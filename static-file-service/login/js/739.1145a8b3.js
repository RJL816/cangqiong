(self.webpackChunkkd_login=self.webpackChunkkd_login||[]).push([[739,196],{65920:function(e,t,n){"use strict";n.r(t),n.d(t,{CheckPhonePanel:function(){return Z},ModifyPanel:function(){return W},SuccessPanel:function(){return U},SuccessSendEmailPanel:function(){return z},default:function(){return H}});n(82320),n(9112),n(97060),n(60776),n(9692),n(5684),n(43616),n(23784),n(43924),n(93917),n(5960),n(76896),n(97336),n(21300),n(46428),n(36368),n(8896),n(6200),n(70864),n(80920),n(87912),n(36887),n(33768),n(90512),n(78504),n(77864),n(86744);var o=n(85668),a=n(71252),i=n.n(a),r=n(90923),s=n(33588),l={formContainer:"_2v7dY-_P",title:"lFW3nOTb",content:"_1V8Gq5A2",radio:"_2wcpMSXH",graphicContainer:"_1jeIZHC8",graphicCode:"DTqYXb9t",phoneCodeContainer:"_27GbPHXb",btn:"_15N0yOV7",disable:"_1-0d6m8p",showPhoneCode:"dhLdnSFI",successPanel:"_2qiy0puH",successImage:"_18b0Esoe",text:"_23QGGNtu",count:"_3TkqJors",successSendEmailPanel:"_1QwJipif",backLogin:"yT2dsA_H",hyperlink:"_2LSAbB-z",switchVirBtn:"_3F9PIliQ"},c=n(58952),d=n(74800),u=n(25128),p=n(99832),h=n(82499),y=n(82784),f=n(10327),m=n(61076),v=n.n(m),P=n(82080),g=n.n(P),w=n(9468),C=n.n(w),k=n(57768),S=n(94348),b=n(91304),M=n(57044);function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,a,i,r,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(o=i.call(n)).done)&&(s.push(o.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(c)throw a}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function A(e,t,n){return(t=V(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K(){return K=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},K.apply(this,arguments)}function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,V(o.key),o)}}function T(e,t,n){return t&&I(e.prototype,t),n&&I(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function V(e){var t=function(e,t){if("object"!=E(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=E(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==E(t)?t:String(t)}function F(e,t,n){return t=L(t),function(e,t){if(t&&("object"===E(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return R(e)}(e,q()?Reflect.construct(t,n||[],L(e).constructor):t.apply(e,n))}function q(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(q=function(){return!!e})()}function L(e){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},L(e)}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}function O(e,t){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},O(e,t)}var j=["administrator","cosmic","security","auditor"],B=function(e){function t(e){var n;return N(this,t),(n=F(this,t,[e])).state={showModifyPanel:!1,showSuccessPanel:!1,showSuccessSendEmailPanel:!1,isVirtualACT:!1},n.showModifyPanel=n.showModifyPanel.bind(R(n)),n.showSuccessPanel=n.showSuccessPanel.bind(R(n)),n.showSuccessSendEmailPanel=n.showSuccessSendEmailPanel.bind(R(n)),n.isShowModifyPanel=n.isShowModifyPanel.bind(R(n)),n}return x(t,e),T(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.props.dataPipeModel&&e.props.dataPipeModel.sendData({type:"FocusInput",name:"account"})}),0),this.isShowModifyPanel()}},{key:"isShowModifyPanel",value:function(){var e=(0,f.Ku)("userKey");this.setState({showModifyPanel:null!==e})}},{key:"showModifyPanel",value:function(){this.setState({showModifyPanel:!0})}},{key:"showSuccessPanel",value:function(){this.setState({showModifyPanel:!1,showSuccessPanel:!0})}},{key:"showSuccessSendEmailPanel",value:function(){this.setState({showSuccessSendEmailPanel:!0})}},{key:"componentWillUnmount",value:function(){(0,S.YL)(u.c),u.c.setValue("modifyPanel",""),u.c.setValue("newResetPws","")}},{key:"render",value:function(){var e,t=this.state,n=t.showModifyPanel,a=t.showSuccessPanel,i=t.showSuccessSendEmailPanel;return e=u.c.modifyPanel||n?o.createElement(W,{showSuccessPanel:this.showSuccessPanel,dataPipeModel:this.props.dataPipeModel}):a?o.createElement(U,{dataPipeModel:this.props.dataPipeModel}):i?o.createElement(z,{dataPipeModel:this.props.dataPipeModel}):o.createElement(Z,K({showSuccessPanel:this.showSuccessPanel,showModifyPanel:this.showModifyPanel,showSuccessSendEmailPanel:this.showSuccessSendEmailPanel,dataPipeModel:this.props.dataPipeModel},this.props)),o.createElement(s.c,K({selectType:"findPassword"},this.props),e)}}]),t}(o.Component),Z=function(e){function t(e){var n;return N(this,t),(n=F(this,t,[e]))._isMounted=!1,n.oldAccount=u.c.account,n.getVerifyCode=n.getVerifyCode.bind(R(n)),n.handleNextBtnClick=n.handleNextBtnClick.bind(R(n)),n.verifyPhone=n.verifyPhone.bind(R(n)),n.handleReSendPhoneCode=n.handleReSendPhoneCode.bind(R(n)),n.validateFormData=n.validateFormData.bind(R(n)),n.resetPhoneCodeState=n.resetPhoneCodeState.bind(R(n)),n.handleEnterKeyDown=n.handleEnterKeyDown.bind(R(n)),n.handleAccountInputBlur=n.handleAccountInputBlur.bind(R(n)),n.verifyPhoneCodeAndResetPwd=n.verifyPhoneCodeAndResetPwd.bind(R(n)),n.resetPassword=n.resetPassword.bind(R(n)),n.getPublicKey=n.getPublicKey.bind(R(n)),n.valueChange=n.valueChange.bind(R(n)),n.handleRadioChange=n.handleRadioChange.bind(R(n)),n.handleLoginTypeClick=n.handleLoginTypeClick.bind(R(n)),n.handleVirtualACTClick=n.handleVirtualACTClick.bind(R(n)),n.isInitAccount=(0,f.wN)(u.c.account)||(0,f.KA)(u.c.account)||(0,f.Ui)(u.c.account),n.loadingStyle={height:"30px",width:"30px",borderLeftColor:"#FFFFFF"},n.hidePhoneLogin="true"===e.configuration.isGlobalDeploy||!0===e.configuration.isGlobalDeploy,n.state={isLoading:!1,verifyCodeImg:v(),showPhoneCode:!1,vCodeTime:0,isVirtualAccount:!1,verificationMode:n.hidePhoneLogin?"email":"SMS",isPhoneLogin:!0,hidePhoneLogin:n.hidePhoneLogin},n}return x(t,e),T(t,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.getVerifyCode(),document.addEventListener("keydown",this.handleEnterKeyDown),(0,f.KA)(u.c.account)||u.c.setValue("account",""),(0,S.YL)(u.c)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,clearInterval(this.vCodeTimer),document.removeEventListener("keydown",this.handleEnterKeyDown)}},{key:"handleEnterKeyDown",value:function(e){13===e.keyCode&&this.handleNextBtnClick()}},{key:"getVerifyCode",value:function(){var e=this;this.setState({verifyCode:v()}),this.props.dataPipeModel&&this.props.dataPipeModel.sendData({type:"FocusInput",name:"verifyCode"}),h.G8({phone:u.c.account,language:u.c.lang,v:(0,d.gV)(!1,8)}).then((function(t){e._isMounted&&(e.setState({verifyCodeImg:t.content||v()}),e.verifyCodeToken=t.vCode,u.c.setValue("randomCode",t.vCode))}))}},{key:"validateFormData",value:function(e){var t=u.c.account,n=u.c.verifyCode,o=u.c.phoneCode,a=u.c.newPassword,i=u.c.confirmPassword;if(d.q4.isEmpty(t)){var r=(0,y.yG)("login.key051");return this.props.dataPipeModel&&this.props.dataPipeModel.sendData({type:"accountError",data:r}),!1}if(d.q4.isEmpty(n)){var s=(0,y.yG)("login.key046");return this.props.dataPipeModel&&this.props.dataPipeModel.sendData({type:"verifyCodeError",data:s}),!1}if(e||!this.state.showPhoneCode)return!0;if(this.state.showPhoneCode&&d.q4.isEmpty(o)){var l=(0,y.yG)("login.key047");return this.props.dataPipeModel&&this.props.dataPipeModel.sendData({type:"phoneCodeError",data:l}),!1}if(d.q4.isEmpty(a)){var c=(0,y.yG)("login.key048");return this.props.dataPipeModel&&this.props.dataPipeModel.sendData({type:"newPasswordError",data:c}),!1}if(d.q4.isEmpty(i)){var p=(0,y.yG)("login.key056");return this.props.dataPipeModel&&this.props.dataPipeModel.sendData({type:"confirmPasswordError",data:p}),!1}if(1===d.q4.checkLength(a,0,20)){var h=(0,y.yG)("login.key049");return this.props.dataPipeModel&&this.props.dataPipeModel.sendData({type:"newPasswordError",data:h}),!1}if(!d.q4.isEqual(a,i)){var f=(0,y.yG)("login.key045");return this.props.dataPipeModel&&this.props.dataPipeModel.sendData({type:"confirmPasswordError",data:f}),!1}return!0}},{key:"handleNextBtnClick",value:function(){if(!this.validateFormData())return!1;this.setState({isLoading:!0}),this.state.showPhoneCode?this.verifyPhoneCodeAndResetPwd():this.verifyGraphicCode()}},{key:"verifyPhoneCodeAndResetPwd",value:function(){this.getPublicKey(this.resetPassword)}},{key:"getPublicKey",value:function(e){var t=this,n=(0,f.Ku)("userKey")||u.c.account+(0,d.gV)(!1,16-u.c.account.length);h.Mh({accessKey:n,language:u.c.lang,accountId:u.c.accountId}).then((function(o){if(!0!==o.success){var a={message:o.errorMessage,level:o.level||1};return t.props.dataPipeModel&&t.props.dataPipeModel.sendData({type:"ShowNotification",error:a}),!1}e({publicKey:o.publicKey,accessKey:n})}))}},{key:"resetPassword",value:function(e){var t=this,n=u.c.accountId,o=u.c.account,a=u.c.newPassword,i=u.c.lang,s=this.props.showSuccessPanel,l=(0,r.U)(e.publicKey,a),c={accountId:n,accessKey:e.accessKey,password:l,language:i,randomCode:u.c.randomCode,phone:u.c.account,code:u.c.phoneCode};u.c.modifyPanel&&Object.assign(c,{passwordWarning:!0});var d=(0,f.Ku)("userKey");if(null!==d){c.type="email",c.userKey=d;var p=(0,f.iW)(k.uW),y=f.q.getItem(p)||"zh_CN";c.language=y}else c.phone=o;h.Uj(c).then((function(e){if(e.success)u.c.setValue("modifyPanel",""),s(),setTimeout((function(){window.location.hash="kingdeeCloud"}),3e3);else{var n={message:e.msg||e.error,level:e.level||1};setTimeout((function(){t.props.dataPipeModel&&t.props.dataPipeModel.sendData({type:"ShowNotification",error:n})}),0),u.c.newResetPws?e.overtime&&(window.location.hash="kingdeeCloud"):e.overtime&&setTimeout((function(){window.location.reload()}),2e3),t.setState({isLoading:!1})}}))}},{key:"valueChange",value:function(e){this.props.dataPipeModel&&this.props.dataPipeModel.sendData({type:"confirmPasswordError",data:"",name:e})}},{key:"verifyGraphicCode",value:function(){var e=this;h.qS({phone:u.c.account,vCode:u.c.verifyCode,token:this.verifyCodeToken,language:u.c.lang}).then((function(t){if(!1===t.success){var n={message:t.msg,level:t.level||1};return e.props.dataPipeModel&&e.props.dataPipeModel.sendData({type:"ShowNotification",error:n}),e.props.dataPipeModel&&e.props.dataPipeModel.sendData({type:"FocusInput",name:"verifyCode",emptyValue:!0}),u.c.setValue("verifyCode",""),e.getVerifyCode(),e.setState({isLoading:!1}),!1}if(e.state.isVirtualAccount)"SMS"===e.state.verificationMode?e.verifyPhone():e.verifyEmail();else{if("true"===e.props.configuration.isGlobalDeploy||!0===e.props.configuration.isGlobalDeploy)return void e.verifyEmail();if(!e.state.isPhoneLogin)return void e.verifyEmail();e.verifyPhone()}}))}},{key:"verifyEmail",value:function(){var e=this;h.OC({email:u.c.account,accountId:u.c.accountId,vCode:this.verifyCodeToken,language:u.c.lang}).then((function(t){if(e.setState({isLoading:!1}),t.success)e.props.showSuccessSendEmailPanel();else{var n=t.msg?{message:t.msg,level:t.level||1}:{message:(0,y.yG)("login.key106"),level:2};e.props.dataPipeModel&&e.props.dataPipeModel.sendData({type:"ShowNotification",error:n})}}))}},{key:"verifyPhone",value:function(){var e=this;h.k$({phone:u.c.account,accountId:u.c.accountId,vCode:this.verifyCodeToken,language:u.c.lang}).then((function(t){if(e.setState({isLoading:!1}),t.success)if(t.hasSent){var n={message:t.msg,level:1};e.props.dataPipeModel&&e.props.dataPipeModel.sendData({type:"ShowNotification",error:n})}else{var o=t.vCodeTime/1e3||60;e.setState({vCodeTime:o,showPhoneCode:!0}),e.vCodeTimer=setInterval((function(){o<=0?clearInterval(e.vCodeTimer):e.setState({vCodeTime:--o})}),1e3),e.props.dataPipeModel&&e.props.dataPipeModel.sendData({type:"FocusInput",name:"phoneCode"})}else{var a=t.msg?{message:t.msg,level:t.level||1}:{message:(0,y.yG)("login.key106"),level:2};e.props.dataPipeModel&&e.props.dataPipeModel.sendData({type:"ShowNotification",error:a}),e.resetPhoneCodeState()}}))}},{key:"handleReSendPhoneCode",value:function(){return!!this.validateFormData(!0)&&(0===this.state.vCodeTime&&void this.verifyGraphicCode())}},{key:"verifyPhoneCode",value:function(){var e=this;h.iG({accountId:u.c.accountId,phone:u.c.account,code:u.c.phoneCode,language:u.c.lang}).then((function(t){if(e.setState({isLoading:!1}),t.success)u.c.setValue("randomCode",t.randomCode),e.props.showModifyPanel();else{var n={message:t.msg,level:t.level||1};e.props.dataPipeModel&&e.props.dataPipeModel.sendData({type:"ShowNotification",error:n}),u.c.setValue("phoneCode",""),e.props.dataPipeModel&&e.props.dataPipeModel.sendData({type:"FocusInput",name:"phoneCode",emptyValue:!0}),t.refreshCode&&e.resetPhoneCodeState()}}))}},{key:"resetPhoneCodeState",value:function(){clearInterval(this.vCodeTimer),this.setState({vCodeTime:0})}},{key:"handleLoginTypeClick",value:function(){this.setState({isPhoneLogin:!this.state.isPhoneLogin})}},{key:"handleAccountInputBlur",value:function(){var e=u.c.account;e!==this.oldAccount&&(this.oldAccount=e,this.props.dataPipeModel&&this.props.dataPipeModel.sendData({type:"FocusInput",name:"verifyCode",emptyValue:!0}),this.getVerifyCode(),this.resetPhoneCodeState());var t=j.includes(e);this.setState({showPhoneCode:!1,isVirtualAccount:t})}},{key:"handleRadioChange",value:function(e,t){this.setState({verificationMode:t})}},{key:"handleVirtualACTClick",value:function(){this.setState({isVirtualACT:!this.state.isVirtualACT})}},{key:"render",value:function(){var e,t=this,n=this.state,a=n.vCodeTime,r=n.showPhoneCode,s=n.isPhoneLogin,d=n.isVirtualACT,h=n.verificationMode,m=n.hidePhoneLogin,v=i()(A(A({},l.phoneCodeContainer,!0),l.showPhoneCode,r)),P=i()(A(A({},l.btn,!0),l.disable,0!==a)),g=(0,y.yG)("login.key036"),w=0===a?g:"".concat(g,"(").concat(a,"s)"),C=f.q.getItem((0,f.iW)(k.EF))===k.Af?"<".concat((0,y.yG)("login.key218")):"<".concat((0,y.yG)("login.key217")),S=(0,y.yG)("login.key226");return(!s&&!d||d&&"email"===h||m)&&(S=(0,y.yG)("login.key227")),o.createElement("div",{className:l.formContainer},o.createElement("div",{className:l.title},S),o.createElement(c.Y3,{style:{margin:"0px"},dataPipeModel:this.props.dataPipeModel}),o.createElement("div",{className:l.content},o.createElement(p.StoreContext.Provider,{value:u.c},!s||d||m?o.createElement(c.EF,{dataPipeModel:this.props.dataPipeModel,name:"account",type:"text",placeholder:d?(0,y.yG)("login.key224"):(0,y.yG)("login.key219"),defaultValue:this.isInitAccount?u.c.account:"",onBlur:this.handleAccountInputBlur}):o.createElement(M.c,{telViaList:this.props.countryAreaCodes,defaultAreaCode:null===(e=this.props.configuration)||void 0===e?void 0:e.defaultAreaCode,dataPipeModel:this.props.dataPipeModel,name:"account",type:"text",placeholder:(0,y.yG)("login.key211"),defaultValue:(0,f.KA)(u.c.account)?u.c.account:"",onBlur:this.handleAccountInputBlur}),o.createElement("div",{className:l.graphicContainer},o.createElement(c.EF,{dataPipeModel:this.props.dataPipeModel,name:"verifyCode",type:"text",placeholder:(0,y.yG)("login.key024")}),o.createElement("div",{className:l.graphicCode,onClick:this.getVerifyCode},o.createElement("img",{src:this.state.verifyCodeImg}))),(this.state.isVirtualAccount||d)&&o.createElement("div",{className:l.radio},o.createElement(b.cp.Group,{onChange:this.handleRadioChange,defaultValue:m?"email":"SMS"},!m&&o.createElement(b.cp,{value:"SMS",radioType:"square",disabled:r},(0,y.yG)("login.key128")),o.createElement(b.cp,{value:"email",radioType:"square",disabled:r},(0,y.yG)("login.key129")))),o.createElement("div",{className:v},o.createElement(c.EF,{dataPipeModel:this.props.dataPipeModel,name:"phoneCode",type:"text",placeholder:(0,y.yG)("login.key120")}),o.createElement("div",{className:P,onClick:this.handleReSendPhoneCode},w)),r&&o.createElement(o.Fragment,null,o.createElement(c.EF,{dataPipeModel:this.props.dataPipeModel,name:"newPassword",type:"password",placeholder:(0,y.yG)("login.key030"),valueChange:function(){t.valueChange("newPassword")}}),o.createElement(c.EF,{dataPipeModel:this.props.dataPipeModel,name:"confirmPassword",type:"password",placeholder:(0,y.yG)("login.key031"),valueChange:function(){t.valueChange("confirmPassword")}})),o.createElement(c.q,{text:r?(0,y.yG)("login.key032"):(0,y.yG)("login.key125"),dataPipeModel:this.props.dataPipeModel,onClick:(0,f.Cu)(this.handleNextBtnClick,200),style:this.loadingStyle,isLoading:this.state.isLoading}),o.createElement("div",{className:l.backLogin},o.createElement("a",{className:l.hyperlink,href:"#kingdeeCloud",title:C.substring(1)},C," "),d?null:o.createElement("div",{className:l.hyperlink,onClick:this.handleLoginTypeClick,title:m?null:s?(0,y.yG)("login.key220"):(0,y.yG)("login.key221")},m?null:s?(0,y.yG)("login.key220"):(0,y.yG)("login.key221"))),o.createElement("div",{className:l.switchVirBtn,onClick:this.handleVirtualACTClick}," ",d?(0,y.yG)("login.key223"):(0,y.yG)("login.key222")))))}}]),t}(o.Component),W=function(e){function t(e){var n;return N(this,t),(n=F(this,t,[e])).handleClick=n.handleClick.bind(R(n)),n.validateFormData=n.validateFormData.bind(R(n)),n.getPublicKey=n.getPublicKey.bind(R(n)),n.resetPassword=n.resetPassword.bind(R(n)),n.handleEnterKeyDown=n.handleEnterKeyDown.bind(R(n)),n.valueChange=n.valueChange.bind(R(n)),n}return x(t,e),T(t,[{key:"componentDidMount",value:function(){u.c.setValue("newPassword",""),u.c.setValue("confirmPassword",""),this.props.dataPipeModel&&this.props.dataPipeModel.sendData({type:"FocusInput",name:"newPassword"}),document.addEventListener("keydown",this.handleEnterKeyDown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleEnterKeyDown)}},{key:"handleEnterKeyDown",value:function(e){13===e.keyCode&&this.handleClick()}},{key:"handleClick",value:function(){if(!this.validateFormData())return!1;this.getPublicKey(this.resetPassword)}},{key:"validateFormData",value:function(){var e=u.c.newPassword,t=u.c.confirmPassword;if(d.q4.isEmpty(e)){var n=(0,y.yG)("login.key048");return this.props.dataPipeModel&&this.props.dataPipeModel.sendData({type:"newPasswordError",data:n}),!1}if(d.q4.isEmpty(t)){var o=(0,y.yG)("login.key056");return this.props.dataPipeModel&&this.props.dataPipeModel.sendData({type:"confirmPasswordError",data:o}),!1}if(1===d.q4.checkLength(e,0,20)){var a=(0,y.yG)("login.key049");return this.props.dataPipeModel&&this.props.dataPipeModel.sendData({type:"newPasswordError",data:a}),!1}if(!d.q4.isEqual(e,t)){var i=(0,y.yG)("login.key045");return this.props.dataPipeModel&&this.props.dataPipeModel.sendData({type:"confirmPasswordError",data:i}),!1}return!0}},{key:"getPublicKey",value:function(e){var t=this,n=(0,f.Ku)("userKey")||u.c.account+(0,d.gV)(!1,16-u.c.account.length);h.Mh({accessKey:n,language:u.c.lang,accountId:u.c.accountId}).then((function(o){if(!0!==o.success){var a={message:o.errorMessage,level:o.level||1};return t.props.dataPipeModel&&t.props.dataPipeModel.sendData({type:"ShowNotification",error:a}),!1}e({publicKey:o.publicKey,accessKey:n})}))}},{key:"resetPassword",value:function(e){var t=this,n=u.c.accountId,o=u.c.account,a=u.c.newPassword,i=u.c.lang,s=this.props.showSuccessPanel,l=(0,r.U)(e.publicKey,a),c={accountId:n,accessKey:e.accessKey,password:l,language:i,randomCode:u.c.randomCode};u.c.modifyPanel&&Object.assign(c,{passwordWarning:!0});var d=(0,f.Ku)("userKey");if(null!==d){c.type="email",c.userKey=d;var p=(0,f.iW)(k.uW),y=f.q.getItem(p)||"zh_CN";c.language=y}else c.phone=o;h.Gy(c).then((function(e){if(e.success)u.c.setValue("modifyPanel",""),s(),setTimeout((function(){window.location.hash="kingdeeCloud"}),3e3);else{var n={message:e.msg||e.error,level:e.level||1};setTimeout((function(){t.props.dataPipeModel&&t.props.dataPipeModel.sendData({type:"ShowNotification",error:n})}),0),u.c.newResetPws?e.overtime&&(window.location.hash="kingdeeCloud"):e.overtime&&setTimeout((function(){window.location.reload()}),2e3)}}))}},{key:"valueChange",value:function(e){this.props.dataPipeModel&&this.props.dataPipeModel.sendData({type:"confirmPasswordError",data:"",name:e})}},{key:"render",value:function(){var e=this;return o.createElement("div",{className:l.formContainer},o.createElement("div",{className:l.title},(0,y.yG)("login.key029")),o.createElement(c.Y3,{dataPipeModel:this.props.dataPipeModel}),o.createElement("div",{className:l.content},o.createElement(p.StoreContext.Provider,{value:u.c},o.createElement(c.EF,{dataPipeModel:this.props.dataPipeModel,name:"newPassword",type:"password",placeholder:(0,y.yG)("login.key030"),valueChange:function(){e.valueChange("newPassword")}}),o.createElement(c.EF,{dataPipeModel:this.props.dataPipeModel,name:"confirmPassword",type:"password",placeholder:(0,y.yG)("login.key031"),valueChange:function(){e.valueChange("confirmPassword")}}),o.createElement(c.q,{text:(0,y.yG)("login.key032"),onClick:(0,f.Cu)(this.handleClick,200)}),o.createElement(c.aE,{text:"<".concat((0,y.yG)("login.key028")),style:{fontSize:"14px"},href:"#"}))))}}]),t}(o.Component);function U(e){var t=G((0,o.useState)(3),2),n=t[0],a=t[1],i=null;return i=setInterval((function(){1===n&&clearInterval(i),a(n-1)}),1e3),o.createElement("div",{className:l.successPanel},o.createElement("img",{src:C(),className:l.successImage}),o.createElement("div",{className:l.text},(0,y.yG)("login.key033")),o.createElement("div",{className:l.count}," ",n,(0,y.yG)("login.key096")))}function z(e){return o.createElement("div",{className:l.successSendEmailPanel},o.createElement("img",{src:g()}),o.createElement("div",null,(0,y.yG)("login.key059")),o.createElement("div",null,o.createElement("span",null,(0,y.yG)("login.key229")),o.createElement("span",{style:{color:"#0086f6"}},u.c.account),o.createElement("span",null,(0,y.yG)("login.key230"))),o.createElement("div",{style:{width:"100%",height:123}}),o.createElement(c.q,{text:(0,y.yG)("login.key028"),onClick:function(){return window.location.hash="kingdeeCloud"}}))}var H=B},9468:function(e){e.exports="data:image/png;base64,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"},26952:function(){},72628:function(){},99560:function(){},67716:function(){},66756:function(){},87240:function(){},4712:function(){},27292:function(){}}]);