(self.webpackChunkkd_login=self.webpackChunkkd_login||[]).push([[904,196],{54608:function(e,t,n){"use strict";n.r(t),n.d(t,{PrivateQrcode:function(){return T},PublicQrcode:function(){return S}});n(82320),n(9112),n(97060),n(60776),n(43924),n(5960),n(97336),n(46428),n(36368),n(8896),n(6200),n(70864),n(80920),n(87912),n(36887),n(78504),n(77864),n(86744);var r=n(85668),o=n(71252),i=n.n(o),a=n(41316),c=n(33588),l=n(58952),u=n(82499),s=n(74800),d=n(82784),f=n(94348),p=n(25128),h=n(81748),m=n(10327),y=n(57768);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b.apply(this,arguments)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,w(r.key),r)}}function k(e,t,n){return t&&C(e.prototype,t),n&&C(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function w(e){var t=function(e,t){if("object"!=v(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==v(t)?t:String(t)}function j(e,t,n){return t=P(t),function(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return D(e)}(e,E()?Reflect.construct(t,n||[],P(e).constructor):t.apply(e,n))}function E(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(E=function(){return!!e})()}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Q(e,t)}function Q(e,t){return Q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Q(e,t)}var I=function(e){function t(e){var n;return g(this,t),(n=j(this,t,[e])).state={list:[]},n.handleChangeDataCenter=n.handleChangeDataCenter.bind(D(n)),n.showDropdownList=n.showDropdownList.bind(D(n)),n}return O(t,e),k(t,[{key:"componentDidMount",value:function(){var e=this.props.dataCenter;0!==e.length&&this.ListenerFilterDataCenter(e)}},{key:"componentWillMount",value:function(){var e=this.props.currentAccountId;this.props.handleChangeDataCenter(e)}},{key:"shouldComponentUpdate",value:function(e,t){return 0!==e.dataCenter.length&&0===this.props.dataCenter.length&&this.ListenerFilterDataCenter(e.dataCenter),!0}},{key:"ListenerFilterDataCenter",value:function(e){var t="cloudHubDataCenterList",n=this.props.dataPipeModel;n&&n.registerCallback(t,this.showDropdownList),(0,f.WG)(t,e,[0,1],n)}},{key:"showDropdownList",value:function(e){var t=e.data,n=this.state.list;n.push(t),this.setState({list:n})}},{key:"handleChangeDataCenter",value:function(e){p.c.setValue("toggleDataCenter",!0),this.props.handleChangeDataCenter(e)}},{key:"render",value:function(){var e=this.props,t=e.currentAccountId,n=e.dataPipeModel,o=m.q.getItem((0,m.iW)(y.EF))===y.Af?"<".concat((0,d.yG)("login.key218")):"<".concat((0,d.yG)("login.key217"));return r.createElement(c.c,b({selectType:"cloudHub"},this.props),r.createElement("div",{className:a.c.formContainer},r.createElement("div",{className:a.c.content},r.createElement(h.c,{dataPipeModel:n}),this.state.list&&r.createElement(l.k9,{name:"accountId",list:this.state.list,dataPipeModel:n,selectItem:t,style:a.c.dropdownList,onItemClick:this.handleChangeDataCenter}),r.createElement(S,{currentAccountId:t,dataPipeModel:n})),r.createElement("div",{className:a.c.backLogin},r.createElement("a",{className:a.c.hyperlink,href:"#kingdeeCloud"},o," "))))}}]),t}(r.Component),S=function(e){function t(e){var n;return g(this,t),(n=j(this,t,[e])).state={qrCodeUrl:""},n}return O(t,e),k(t,[{key:"componentDidMount",value:function(){this.loadYzjQrcode()}},{key:"componentWillUpdate",value:function(e){this.props.currentAccountId!==e.currentAccountId&&this.loadYzjQrcode(e.currentAccountId)}},{key:"loadYzjQrcode",value:function(e){var t=this,n=(0,s.gV)(!1,15),r=(0,m.Qn)(),o={accountId:e||this.props.currentAccountId,token:n,language:p.c.lang,scantype:"cloudHub",QRcodeRedirect:r};u.YV(o).then((function(e){if(e&&e.errorcode){var n={message:e.description||e.description_cn,level:e.level||1,time:e.time};t.props.dataPipeModel&&t.props.dataPipeModel.sendData({type:"ShowNotification",error:n})}t.setState({qrCodeUrl:e.redirectUrl})}))}},{key:"render",value:function(){return r.createElement("div",{className:a.c.publicQrcode},r.createElement("iframe",{src:this.state.qrCodeUrl,frameBorder:"0",scrolling:"no"}))}}]),t}(r.Component),T=function(e){function t(e){var n;return g(this,t),(n=j(this,t,[e])).state={qrCodeUrl:"",overTime:!1},n.loadYzjQrcode=n.loadYzjQrcode.bind(D(n)),n.handleReloadClick=n.handleReloadClick.bind(D(n)),n}return O(t,e),k(t,[{key:"componentDidMount",value:function(){this.loadYzjQrcode()}},{key:"componentWillUpdate",value:function(e){this.props.currentAccountId!==e.currentAccountId&&this.loadYzjQrcode()}},{key:"loadYzjQrcode",value:function(){var e=this;u.yW({language:p.c.lang}).then((function(t){if(!t.success)return!1;var n=t.data,r=n.interval,o=n.url;e.setState({qrCodeUrl:o,overTime:!1}),e.overTimer=setTimeout((function(){e.setState({overTime:!0})}),1e3*r)}))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.overTimer)}},{key:"handleReloadClick",value:function(){this.loadYzjQrcode()}},{key:"render",value:function(){var e,t,n,o=this.state,c=o.qrCodeUrl,l=o.overTime,u=i()((e={},t=a.c.imgBox,n=""!==c,(t=w(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e));return r.createElement("div",{className:a.c.privateQrcode},r.createElement("div",{className:u},r.createElement("img",{src:c})),l&&r.createElement("div",{className:a.c.reload,onClick:this.handleReloadClick},r.createElement("div",null,(0,d.yG)("login.key015")),r.createElement("div",null,(0,d.yG)("login.key016"))))}}]),t}(r.Component);t.default=I},26952:function(){},72628:function(){},99560:function(){},67716:function(){},66756:function(){},87240:function(){},4712:function(){},27292:function(){}}]);