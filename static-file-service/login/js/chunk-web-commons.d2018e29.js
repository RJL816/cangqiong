"use strict";(self.webpackChunkkd_login=self.webpackChunkkd_login||[]).push([[440],{41316:function(e,t){t.c={formContainer:"H_rJ83Ua",title:"_1MP9WG9E",content:"_1v9cNOCJ",dropdownList:"_1ZqHa1pQ",backLogin:"_31xrBGwI",hyperlink:"_1myz4b5R",publicQrcode:"_1uoRJ-AE",privateQrcode:"_3_82Cwec",imgBox:"_3FhP8sIj",reload:"_3rGWKWX8"}},19828:function(e,t){t.c={container:"qqk5cqlu",errorMsg:"_3EJ2tM1B",content:"_1yfX1Rdk",showPwd:"_1rgkxIc6",hidePwd:"XTh8voNj",showKeyboard:"_13DOZEFp",hideKeyboard:"_2MKvpULV",image:"_1yABl0_n",icon:"_1tBxMTSa",accIcon:"_3jVtp61f",accIconFocus:"_27WDHUrP",accIconError:"_22hwq8yR",pwdIcon:"UO82t4Gs",pwdIconFocus:"_24RlzxyE",pwdIconError:"_1_oV2QBp",verifyIcon:"gtYGZJYm",verifyIconFocus:"r2AuPWjt",verifyIconError:"pi6HWSmS",msgIcon:"_31nvN2bb",msgIconFocus:"_18H1QzeB",msgIconError:"_34hoioDA",input:"_10qgMJdZ",inputFocus:"_2RDs8uM-",inputError:"_2QspcDWN",keybord:"_2_ELJhnU",row:"RYk-DZbn",cell:"_329FsVPL",del:"_3ZvyGRuS",shift:"_12h7zjDG",shiftActive:"_2kDOHPPC",enter:"_2JcIDtau",space:"_3qrt1W_l"}},99832:function(e,t,n){n.r(t),n.d(t,{Form:function(){return Z},StoreContext:function(){return J},Tools:function(){return X},default:function(){return $}});n(82320),n(9112),n(97060),n(60776),n(9692),n(5092),n(43616),n(41872),n(43924),n(4180),n(5960),n(76896),n(97336),n(46428),n(36368),n(8896),n(6200),n(70864),n(76124),n(80920),n(87912),n(97448),n(36887),n(90512),n(60824),n(78504),n(21164),n(77864),n(86744);var r=n(85668),o=n(20536),i=n.n(o),a=n(71252),c=n.n(a),u=n(33588),l={formContainer:"_3CJd7H_-",title:"_3ZXK1RH7",content:"_2sVhwDQp",dropdownList:"_3Gihi7yG",graphicContainer:"_1ldvravK",input:"_35yiWrHJ",graphicCode:"_3QqFpQwI",hide:"_1vCKiBNP",phoneCodeContainer:"_2L1GGaz3",btn:"Og9WotyU",disable:"Jw_N60HR",showPhoneCode:"_1Dm_w1gJ",tools:"_2Ui6QYH3",loginType:"_21z43npA",phoneLogin:"_3Jlpjz3o",msgLogin:"tthSl2ao",line:"j28lqyPq"},s=n(58952),d=n(74800),f=n(82499),p=n(25128),y=n(82784),m=n(57768),v=n(94348),h=n(34520),g=n(61076),b=n.n(g),w=n(10327),S=n(90923),E=(n(6208),n(22676),n(33696),n(5684),n(23784),n(86456),n(35164),n(93917),n(27184),n(21300),n(69e3),n(34440),n(76152),n(33768),n(13640),n(97308),n(19828));function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t,n){var r;return r=function(e,t){if("object"!=C(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==C(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e){return function(e){if(Array.isArray(e))return N(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||j(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||j(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){if(e){if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?N(e,t):void 0}}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function M(e){var t,n,o=e.dataPipeModel,i=e.isFocusAccount,a=e.name,u=e.defaultValue,l=e.placeholder,s=e.enableSoftKeyboard,d=_((0,r.useState)(!1),2),f=d[0],m=d[1],h=_((0,r.useState)(""),2),g=h[0],b=h[1],w=_((0,r.useState)(""),2),S=w[0],C=w[1],k=_((0,r.useState)(!1),2),j=k[0],N=k[1],M=_((0,r.useState)(!1),2),A=M[0],L=M[1],T=(0,r.useRef)(null),x=(0,r.useRef)({password:"",pwdCover:""});(0,r.useEffect)((function(){var e=o.registerCallback("".concat(a,"Error"),D),t=o.registerCallback("FocusInput",V);return"password"!==a||i||o.sendData({type:"FocusInput",name:"password"}),function(){e(),t()}}),[]);var D=function(e){var t=e.data,n=e.name;b(t),n&&"newPassword"===n||T.current.focus()},V=function(e){e.name===a&&T.current.focus()};(0,r.useEffect)((function(){if([void 0,null,""].includes(T.current.value)&&u){var e=new Array(u.length).fill("●").join("");x.current.pwdCover=e,x.current.password=u,C(j?u:e)}}),[u]);var R=function(e){var t=x.current,n=e.value;if(j)return t.pwdCover=new Array(n.length).fill("●").join(""),t.password=n,t;var r=-1,o=-1,i=t.password.split(""),a=n.split(""),c=n.length,u=t.password.length;a.forEach((function(e,t){e.includes("●")||-1!==r||(r=t),-1!==r&&-1===o&&(e.includes("●")?o=t-1:t===a.length-1&&(o=t))}));var l=a.slice(r,o+1);if(u>c&&0===l.length){var s=e.selectionEnd;i.splice(s,u-c)}else{var d=a.length,f=r?i.slice(0,r):[],p=d!==o+1?i.slice(-(d-o-1)):[];i=[].concat(I(f),I(l),I(p))}return t.pwdCover=n.replace(/\S/g,"●"),t.password=i.join(""),P(P({},t),{},{inputStart:r})},F=c()(O(O(O({},E.c.content,!0),E.c.inputFocus,f),E.c.inputError,""!==g)),G=c()(O(O(O(O({},E.c.icon,!0),E.c.pwdIcon,!0),E.c.pwdIconFocus,f),E.c.pwdIconError,""!==g)),B=c()(O(O(O({},E.c.hidePwd,!j),E.c.showPwd,j),E.c.image,!0)),K=_((0,r.useState)(!1),2),U=K[0],W=K[1],H=c()(O(O(O({},E.c.hideKeyboard,!U),E.c.showKeyboard,U),E.c.image,!0)),q=p.c.showviewpwdbtn&&"false"!==p.c.showviewpwdbtn,z=_((0,r.useState)(!1),2),Q=z[0],J=z[1],Y=_((0,r.useState)(!1),2),Z=Y[0],X=Y[1],$=_((0,r.useState)((0,v.km)()),2),ee=$[0],te=$[1];(0,r.useEffect)((function(){!U&&te((0,v.km)()),U&&T.current.blur()}),[U]);var ne=(0,r.useRef)(),re=(0,r.useRef)(),oe=(0,r.useRef)(),ie=function(e){if(U&&e.target!==re.current&&e.target!==oe.current){for(var t=e.target;t&&t!==document;){if(t===ne.current)return;t=t.parentNode}t&&W(!1)}},ae=function(e){U&&(e.stopPropagation(),e.preventDefault())};(0,r.useEffect)((function(){return s&&(document.addEventListener("mousedown",ie),document.addEventListener("keydown ",ae)),function(){document.removeEventListener("mousedown",ie),document.removeEventListener("mousedown",ae)}}),[U,s]);var ce=function(){s&&W(!U)},ue=function(e){T.current.focus()},le=["del","shift","enter","space"],se=function(t){var n,r=t.target.dataset.id,o=x.current;if("del"===r)n=o.password&&o.password.slice(0,-1);else{if("shift"===r)return X(!Z);if("enter"===r)return W(!1);n="space"===r?o.password+" ":o.password+r}var i=n?new Array(n.length).fill("●").join(""):"";o.pwdCover=i,o.password=n,b(""),C(j?n:i),p.c.setValue(a,n),null==e||e.valueChange()},de=(null==T||null===(t=T.current)||void 0===t?void 0:t.getBoundingClientRect())||{},fe={top:de.top+48,left:de.left+1+(null===(n=T.current)||void 0===n?void 0:n.offsetWidth)-494};return r.createElement("div",{className:E.c.container},r.createElement("div",{className:E.c.errorMsg},g),r.createElement("div",{className:F},r.createElement("span",{className:G}),r.createElement("input",{onMouseDown:ce,ref:T,type:"text",className:E.c.input,onChange:function(t){if(!s){var n=t.target;if(!A){var r=R(n),o=r.password,i=r.inputStart,c=r.pwdCover;void 0!==i&&-1!==i&&setTimeout((function(){var e=i+1;n.setSelectionRange(e,e)}),0),b(""),C(j?o:c),p.c.setValue(a,o),null==e||e.valueChange()}}},spellCheck:!1,value:S,onCompositionStart:function(e){L(!0),setTimeout((function(){L(!1)}),0),!s&&o.sendData({type:"ShowNotification",error:{level:2,message:(0,y.yG)("login.key208")}})},onFocus:function(){m(!0),Q||s||(o.sendData({type:"ShowNotification",error:{level:2,message:(0,y.yG)("login.key209")}}),J(!0))},onBlur:function(){m(!1)},placeholder:l,style:{paddingRight:50}}),q&&r.createElement("span",{className:B,onClick:function(){var e=x.current,t=e.password,n=e.pwdCover;C(j?n:t),N(!j)},ref:re}),s&&r.createElement("span",{ref:oe,onMouseDown:ue,onClick:ce,style:{right:q?32:10},className:H})),U&&r.createElement("div",{className:E.c.keybord,style:fe,ref:ne,onMouseDown:ue},ee.map((function(e,t){return r.createElement("div",{key:t,className:E.c.row},e.map((function(e,t){var n,o=c()(O(O(O({},E.c.cell,!0),E.c[e],le.includes(e)),E.c.shiftActive,"shift"===e&&!0===Z));return n=le.includes(e)?"enter"===e?(0,y.yG)("login.key231"):"":e=Z?e.toLocaleUpperCase():e,r.createElement("div",{onClick:se,"data-id":e,key:t,className:o},n)})))}))))}var A=n(57044);function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function T(e,t,n){return(t=F(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},x.apply(this,arguments)}function D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,F(r.key),r)}}function R(e,t,n){return t&&V(e.prototype,t),n&&V(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function F(e){var t=function(e,t){if("object"!=L(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=L(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==L(t)?t:String(t)}function G(e,t,n){return t=U(t),function(e,t){if(t&&("object"===L(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return B(e)}(e,K()?Reflect.construct(t,n||[],U(e).constructor):t.apply(e,n))}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function K(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(K=function(){return!!e})()}function U(e){return U=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},U(e)}function W(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&H(e,t)}function H(e,t){return H=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},H(e,t)}var q="0",z="1",Q="2",J=r.createContext(),Y=function(e){function t(){return D(this,t),G(this,t,arguments)}return W(t,e),R(t,[{key:"componentDidMount",value:function(){this.props.dataPipeModel&&this.props.dataPipeModel.sendData({type:"FocusInput",name:"account"})}},{key:"getDefaultDesc",value:function(){var e="2"===p.c.iskdbrand?(0,y.yG)("login.key094"):(0,y.yG)("login.key001");return p.c.isCompleteLoadConfig?e:p.c.loadingText}},{key:"render",value:function(){var e=this.props,t=e.configuration,n=e.currentLang,o=e.dataPipeModel,i=(0,v.WQ)(t.accounttypedesc,n,this.getDefaultDesc());return r.createElement(u.c,x({selectType:"kingdeeCloud"},this.props),r.createElement("div",{className:l.formContainer},i?r.createElement("div",{className:l.title,id:"kd_cloud_title"},i):r.createElement("div",{className:l.title,id:"kd_cloud_title"}," "),r.createElement(s.Y3,{dataPipeModel:o}),r.createElement(Z,this.props)),r.createElement(s.kN,{dataPipeModel:o}))}}]),t}(r.Component),Z=function(e){function t(e){var n;return D(this,t),(n=G(this,t,[e])).handleLoginTypeClick=function(){var e=n.state.isPhoneLogin;w.q.setItem((0,w.iW)(m.EF),e?m.GK:m.Af),n.setState({isPhoneLogin:!e})},n.state={needVerifyCode:!1,logining:!1,verifyCodeImg:b(),pwdIsRemed:!1,needMsgValidate:!1,vCodeTime:0,showPhoneCode:!1,isKickedOut:"",password:"",inputChange:!1,factor:"",isPhoneLogin:w.q.getItem((0,w.iW)(m.EF))===m.Af},n._isMounted=!1,n.verifyCodeToken="",n.handleSubmit=n.handleSubmit.bind(B(n)),n.validateFormData=n.validateFormData.bind(B(n)),n.submit=n.submit.bind(B(n)),n.resetLoginBtn=n.resetLoginBtn.bind(B(n)),n.handleAccountInputBlur=n.handleAccountInputBlur.bind(B(n)),n.getVerifyCode=n.getVerifyCode.bind(B(n)),n.onHandleRememberPwd=n.onHandleRememberPwd.bind(B(n)),n.handleEnterKeyDown=n.handleEnterKeyDown.bind(B(n)),n.handleLoginBtnClick=n.handleLoginBtnClick.bind(B(n)),n.handleSendMessage=n.handleSendMessage.bind(B(n)),n.handleVerifyCodeClick=n.handleVerifyCodeClick.bind(B(n)),n.getUsernamePswVisibility=n.getUsernamePswVisibility.bind(B(n)),n.setAccountAndPasswordOfStore=n.setAccountAndPasswordOfStore.bind(B(n)),n.onClose=n.onClose.bind(B(n)),n.clickCallback=n.clickCallback.bind(B(n)),n.isNeedVerifyCode=n.isNeedVerifyCode.bind(B(n)),n.loadingStyle={height:"30px",width:"30px",borderLeftColor:"#FFFFFF"},n.showPassWord=n.showPassWord.bind(B(n)),n.showError=n.showError.bind(B(n)),n.NeedMsgValidate=n.NeedMsgValidate.bind(B(n)),n.handleChangeDataCenter=n.handleChangeDataCenter.bind(B(n)),n.valueChange=n.valueChange.bind(B(n)),n.handleLoginTypeClick=n.handleLoginTypeClick.bind(B(n)),n.isInitAccount=(0,w.KA)(p.c.account),n}return W(t,e),R(t,[{key:"componentWillMount",value:function(){this.initAccountInfo()}},{key:"componentDidUpdate",value:function(e){e.configuration.usernamepsw!==this.props.configuration.usernamepsw&&this.initAccountInfo()}},{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,document.addEventListener("keydown",this.handleEnterKeyDown),this.removeListener=this.props.dataPipeModel.registerCallback("dataCenterLoad",this.NeedMsgValidate),p.c.account&&p.c.accountId&&p.c.accountId&&this.isNeedMsgValidate().then((function(t){if(e.state.needMsgValidate)return!1;e.isNeedVerifyCode()}))}},{key:"NeedMsgValidate",value:function(){var e=this;p.c.account&&p.c.accountId&&this.isNeedMsgValidate().then((function(t){if(e.state.needMsgValidate)return!1;e.isNeedVerifyCode()}))}},{key:"showPassWord",value:function(){this.setState({password:p.c.password})}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,document.removeEventListener("keydown",this.handleEnterKeyDown),this.removeListener&&this.removeListener(),clearInterval(this.vCodeTimer),p.c.setValue("token",""),p.c.setValue("openid",""),p.c.setValue("scantype","")}},{key:"initAccountInfo",value:function(){var e=w.q.getItem(m.Mf),t=w.Ej.getItem(m.EN)||"",n=this.getUsernamePswVisibility(),r=this.props.configuration.usernamepsw,o=void 0===r?Q:r;if(n&&e){var a=(e=JSON.parse(e)).password;switch(a&&(a=i().AES.decrypt(e.password,m.aC).toString(i().enc.Utf8)),o){case z:this.setAccountAndPasswordOfStore(e.account,a),e.account&&a?this.setState({pwdIsRemed:!0}):this.setState({pwdIsRemed:!1});break;case Q:this.setAccountAndPasswordOfStore(e.account,""),e.account?this.setState({pwdIsRemed:!0}):this.setState({pwdIsRemed:!1});break;default:this.setAccountAndPasswordOfStore("",""),this.setState({pwdIsRemed:!1})}}else t&&p.c.setValue("account",t),o===q&&(this.setAccountAndPasswordOfStore("",""),this.setState({pwdIsRemed:this.state.pwdIsRemed}))}},{key:"setAccountAndPasswordOfStore",value:function(e,t){p.c.account||(p.c.setValue("account",e),p.c.setValue("password",t))}},{key:"getUsernamePswVisibility",value:function(){var e=this.props.configuration.usernamepsw;return[z,Q].includes(void 0===e?Q:e)}},{key:"handleEnterKeyDown",value:function(e){13===e.keyCode&&(this.state.needVerifyCode?this.handleLoginBtnClick():this.handleAccountInputBlur(!0))}},{key:"validateFormData",value:function(e){var t,n=p.c.password,r=p.c.verifyCode,o=p.c.phoneCode,i=p.c.account||(null===(t=document.getElementById("account"))||void 0===t?void 0:t.value)||"";if(d.q4.isEmpty(i)){var a=(0,y.yG)("login.key051");return this.props.dataPipeModel&&this.props.dataPipeModel.sendData({type:"accountError",data:a}),!1}if(d.q4.isEmpty(n)){var c=(0,y.yG)("login.key052");return this.props.dataPipeModel&&this.props.dataPipeModel.sendData({type:"passwordError",data:c}),!1}if(this.state.needVerifyCode&&d.q4.isEmpty(r)){var u=(0,y.yG)("login.key046");return this.props.dataPipeModel&&this.props.dataPipeModel.sendData({type:"verifyCodeError",data:u}),!1}if(this.state.showPhoneCode&&d.q4.isEmpty(o)&&"sendMessage"!==e){var l="email"===this.state.factor?(0,y.yG)("login.key122 "):(0,y.yG)("login.key047");return this.props.dataPipeModel&&this.props.dataPipeModel.sendData({type:"phoneCodeError",data:l}),!1}return!0}},{key:"handleLoginBtnClick",value:function(){this.setState({isKickedOut:""});var e=this.state,t=e.needMsgValidate;!e.showPhoneCode&&t?this.handleSendMessage():this.handleSubmit()}},{key:"handleSendMessage",value:function(){var e=this;if(!this.validateFormData("sendMessage"))return!1;var t=this.state,n=t.vCodeTime,r=t.factor;if(0!==n)return!1;f.Yf({useraccount:p.c.account,verifycode:p.c.verifyCode,loginid:this.verifyCodeToken,language:p.c.lang,accountId:p.c.accountId,factor:r}).then((function(t){if(!0!==t.success){var n={message:t.msg||t.description,level:1};return e.props.dataPipeModel&&e.props.dataPipeModel.sendData({type:"ShowNotification",error:n}),"1"===t.errorcode&&(e.getVerifyCode(),e.props.dataPipeModel&&e.props.dataPipeModel.sendData({type:"FocusInput",name:"verifyCode"})),!1}var r=t.timeout||60;e.vCodeTimer=setInterval((function(){r<=0?clearInterval(e.vCodeTimer):e.setState({vCodeTime:--r})}),1e3),e.setState({showPhoneCode:!0},(function(){e.props.dataPipeModel&&e.props.dataPipeModel.sendData({type:"FocusInput",name:"phoneCode"})}))}))}},{key:"handleSubmit",value:function(){return!this.state.logining&&(!!this.validateFormData()&&(this.setState({logining:!0}),p.c.setValue("account",p.c.account.trim()),void this.getPublicKey(this.submit)))}},{key:"getPublicKey",value:function(e){var t=this,n=p.c.account+(0,d.gV)(!1,16-p.c.account.length);f.Mh({accessKey:n,language:p.c.lang,accountId:p.c.accountId}).then((function(r){if(!0!==r.success){var o={message:r.errorMessage,level:1};return t.props.dataPipeModel&&t.props.dataPipeModel.sendData({type:"ShowNotification",error:o}),t.resetLoginBtn(),!1}e({publicKey:r.publicKey,accessKey:n})}))}},{key:"onClose",value:function(e){if("privacy"===e)return this.setState({isKickedOut:"3"}),void this.handleSubmit();if("findPassword"===e)p.c.setValue("modifyPanel",!0),window.location.hash="#findPassword";else{this.setState({isKickedOut:"1"});var t=this.state,n=t.needMsgValidate;!t.showPhoneCode&&n?this.handleSendMessage():this.handleSubmit()}}},{key:"clickCallback",value:function(e){var t=e.id,n=(e.key,e.isCloseBtn);if("privacy"!==t)if("findPassword"!==t||n)this.setState({isKickedOut:""});else{this.setState({isKickedOut:"2"});var r=this.state,o=r.needMsgValidate;!r.showPhoneCode&&o?this.handleSendMessage():this.handleSubmit()}}},{key:"submit",value:function(e){var t,n=this,r=p.c.accountId,o=p.c.lang,a=p.c.account,c=p.c.password,u=p.c.verifyCode,l=p.c.phoneCode,s=p.c.token,d=p.c.openid,g=p.c.scantype,b=p.c.customDynamicCode,E=this.state,C=E.pwdIsRemed,k=E.needVerifyCode,P=E.needMsgValidate,O=E.isKickedOut,I=E.factor,_=E.isPhoneLogin,j={},N=(0,w.am)();N&&(N=decodeURIComponent(N));var M=p.c.dataCenter.find((function(e,t){return e.value===r}));t=M&&M.closeEncrypt?c:(0,S.U)(e.publicKey,c,null==M?void 0:M.rsaPadding);var A={userSourceType:2,accountId:r,language:o,useraccount:a,password:t,accessKey:e.accessKey,redirect:N||"index.html?formId=pc_main_console",randomCode:p.c.randomCode,isStandard:!0,customDynamicCode:b};s&&Object.assign(A,{token:s}),d&&Object.assign(A,{openid:d}),g&&Object.assign(A,{scantype:g}),k&&Object.assign(A,{verifycode:u,loginid:this.verifyCodeToken}),P&&("email"===I?Object.assign(A,{emailCode:l}):Object.assign(A,{smsCode:l})),O&&Object.assign(A,{isKickedOut:this.state.isKickedOut}),_&&Object.assign(A,{loginType:"1"}),f.E3(A).then((function(e){var t=e.errorcode,o=e.needChangePwd,u=e.needActive,l=e.needverifycode,s=e.needChangeInitialPwd,d=e.message,f=e.randomCode,g=void 0===f?"":f,b=e.iframeUrl;if(p.c.setValue("randomCode",g),u)return window.location.hash="#activeUser",void n.showError(d);if(1===s)return window.location.hash="#findPassword",void n.showError(d);if(1===o)return!1===l?(p.c.setValue("newResetPws",!0),n.onClose("findPassword")):window.location.hash="#findPassword",setTimeout((function(){var e={level:2,message:d};n.props.dataPipeModel&&n.props.dataPipeModel.sendData({type:"ShowNotification",error:e}),n.props.dataPipeModel&&n.props.dataPipeModel.sendData({type:"FocusInput",name:"verifyCode"})}),0),!1;if(0!==t)return j.iframeUrl=b,(0,h.W)(t,e,n.onClose,n.clickCallback,j),n.loginingFail(e),!1;if(C){var S=n.props.configuration.usernamepsw,E={account:"",password:""};switch(void 0===S?Q:S){case z:E.account=a,E.password=i().AES.encrypt(c,m.aC).toString();break;case Q:E.account=a}w.q.setItem(m.Mf,JSON.stringify(E)),w.Ej.setItem(m.EN,E.account)}else w.q.removeItem(m.Mf),w.Ej.removeItem(m.EN);w.q.setItem("ierp-login-username",e.username);var k={username:e.username||"",avatar:e.avatar||""},P=(0,w.iW)(m.Yl);w.q.setItem(P,JSON.stringify(k));var O="#kingdeeCloud"!==window.location.hash?window.location.hash:"";n.getRedirectUrl(e.RedirectURL).then((function(e){if((0,v.Yv)(e))return n.loginingFail({description_cn:(0,y.yG)("login.key101")}),!1;n.resetLoginBtn(),(0,w.Ub)(e,O,p.c.dataCenter,r)}))}))}},{key:"getRedirectUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new Promise((function(t){if(["download.do?"].some((function(t){return e.indexOf(t)>-1}))){var n=document.createElement("iframe");n.style.display="none",n.src=e,document.body.appendChild(n),setTimeout((function(){t("index.html")}),2e3)}else t(e)}))}},{key:"loginingFail",value:function(e){var t=this,n=e.errorcode,r={message:e.description_cn||e.description,level:e.level||2};"1"===n?(this.getVerifyCode(),this.props.dataPipeModel&&this.props.dataPipeModel.sendData({type:"FocusInput",name:"verifyCode"})):"needVerification"===n?(this.setState({needVerifyCode:!0}),this.getVerifyCode(),this.props.dataPipeModel&&this.props.dataPipeModel.sendData({type:"FocusInput",name:"verifyCode"})):n!==m._W&&this.props.dataPipeModel&&this.props.dataPipeModel.sendData({type:"FocusInput",name:"account"}),setTimeout((function(){t.props.dataPipeModel&&t.props.dataPipeModel.sendData({type:"ShowNotification",error:r})}),0),this.resetLoginBtn()}},{key:"showError",value:function(e){var t=this;setTimeout((function(){var n={level:1,message:e};t.props.dataPipeModel&&t.props.dataPipeModel.sendData({type:"ShowNotification",error:n})}),0)}},{key:"resetLoginBtn",value:function(){this.setState({logining:!1})}},{key:"getVerifyCode",value:function(){var e=this;!1!==this.state.needVerifyCode&&(this.setState({getVerifyCode:b()}),f.CE({phone:p.c.account,v:(0,d.gV)(!1,8),language:p.c.lang}).then((function(t){var n=t.description_cn||t.description;if(n){var r={message:n,level:1};return e.props.dataPipeModel&&e.props.dataPipeModel.sendData({type:"ShowNotification",error:r}),!1}e.setState({verifyCodeImg:t.content||b()}),e.verifyCodeToken=t.loginId})))}},{key:"isNeedMsgValidate",value:function(){var e=this;return f.ox({useraccount:p.c.account,accountId:p.c.accountId}).then((function(t){e.setState({needMsgValidate:t.isNeed,factor:t.factor}),t.isNeed&&(e.setState({needVerifyCode:!0}),e.getVerifyCode())}))}},{key:"handleAccountInputBlur",value:function(e){var t=this;p.c.setValue("account",p.c.account&&p.c.account.trim());var n=p.c.account;this.oldAccount=n,p.c.account&&p.c.accountId&&this.isNeedMsgValidate().then((function(n){if(t.state.needMsgValidate)return e&&t.handleLoginBtnClick(),!1;t.isNeedVerifyCode(e)}))}},{key:"isNeedVerifyCode",value:function(e){var t=this;f.Q9({useraccount:p.c.account,accountId:p.c.accountId,v:(0,d.gV)(!1,8),language:p.c.lang}).then((function(n){t._isMounted?(t.state.needVerifyCode&&!1===n.isNeed&&t.setState({showPhoneCode:n.isNeed}),t.setState({needVerifyCode:n.isNeed}),t.getVerifyCode(),!n.isNeed&&e&&t.handleLoginBtnClick()):e&&t.handleLoginBtnClick()}))}},{key:"onHandleRememberPwd",value:function(e){this.setState({pwdIsRemed:e})}},{key:"handleVerifyCodeClick",value:function(){this.getVerifyCode(),this.props.dataPipeModel&&this.props.dataPipeModel.sendData({type:"FocusInput",name:"verifyCode"})}},{key:"handleChangeDataCenter",value:function(e){p.c.setValue("toggleDataCenter",!0),this.props.handleChangeDataCenter(e)}},{key:"valueChange",value:function(){this.setState({inputChange:!this.state.inputChange})}},{key:"render",value:function(){var e=this.props,t=e.dataCenter,n=e.currentAccountId,o=e.configuration,i=e.currentLang,a=e.isComplete,u=e.countryAreaCodes,d=this.state,f=d.needVerifyCode,h=d.logining,g=d.verifyCodeImg,b=d.pwdIsRemed,S=d.needMsgValidate,E=d.showPhoneCode,C=d.factor,k=d.vCodeTime,P=d.isPhoneLogin,O=c()(T(T({},l.graphicContainer,!0),l.hide,!f)),I="",_=(0,v.WQ)(o.accountplaceholder,i,(0,y.yG)("login.key210"));S&&!E?(I="email"===C?(0,y.yG)("login.key130"):(0,y.yG)("login.key055"),_=(0,v.WQ)(o.accountplaceholder,i,(0,y.yG)("login.key087"))):I=h?(0,y.yG)("login.key050"):(0,y.yG)("login.key005");var j=c()(T(T({},l.phoneCodeContainer,!0),l.showPhoneCode,E)),N=c()(T(T({},l.btn,!0),l.disable,0!==k)),L=(0,y.yG)("login.key036"),D=0===k?L:"".concat(L,"(").concat(k,"s)"),V=""===p.c.account,R=p.c.dataCenter.find((function(e,t){return e.value===n}))||{},F=R.needCustomDynamicCode,G=R.forbidRememberPwd,B=R.enableSoftKeyboard,K=w.q.getItem((0,w.iW)(m.CM))||o.defaultAreaCode,U="true"===o.isGlobalDeploy||!0===o.isGlobalDeploy;return r.createElement(J.Provider,{value:p.c},r.createElement("div",{className:l.content},r.createElement(s.k9,{list:t,selectItem:n,style:l.dropdownList,name:"accountId",onItemClick:this.handleChangeDataCenter,isKingdeeClude:!0,dataPipeModel:this.props.dataPipeModel}),P?r.createElement(A.c,{defaultAreaCode:K,telViaList:u,dataPipeModel:this.props.dataPipeModel,valueChange:this.valueChange,name:"account",type:"text",placeholder:_,defaultValue:this.isInitAccount?p.c.account:"",isFocusAccount:V,onBlur:this.handleAccountInputBlur}):r.createElement(s.EF,{dataPipeModel:this.props.dataPipeModel,valueChange:this.valueChange,name:"account",type:"text",placeholder:_,defaultValue:p.c.account,isFocusAccount:V,onBlur:this.handleAccountInputBlur}),G||B?r.createElement(M,{enableSoftKeyboard:B,dataPipeModel:this.props.dataPipeModel,valueChange:this.valueChange,name:"password",type:"password",placeholder:(0,y.yG)("login.key003"),isFocusAccount:V,defaultValue:a&&p.c.password}):r.createElement(r.Fragment,null,r.createElement("input",{type:"text",style:{display:"none"}}),r.createElement("input",{type:"password",style:{display:"none"}}),r.createElement(s.EF,{dataPipeModel:this.props.dataPipeModel,valueChange:this.valueChange,name:"password",type:"password",placeholder:(0,y.yG)("login.key003"),isFocusAccount:V,defaultValue:a&&p.c.password})),r.createElement("div",{className:O},r.createElement(s.EF,{dataPipeModel:this.props.dataPipeModel,valueChange:this.valueChange,name:"verifyCode",type:"text",placeholder:(0,y.yG)("login.key004"),className:l.input}),r.createElement("div",{className:l.graphicCode,onClick:this.handleVerifyCodeClick},r.createElement("img",{src:g}))),r.createElement("div",{className:j},r.createElement(s.EF,{dataPipeModel:this.props.dataPipeModel,valueChange:this.valueChange,name:"phoneCode",type:"text",placeholder:this.state.factor?(0,y.yG)("login.key123"):(0,y.yG)("login.key025"),className:l.input}),r.createElement("div",{className:N,onClick:this.handleSendMessage},D)),F&&r.createElement(s.EF,{dataPipeModel:this.props.dataPipeModel,valueChange:this.valueChange,name:"customDynamicCode",type:"text",placeholder:(0,y.yG)("login.key124"),className:l.input})),r.createElement(X,x({handleRememberPwd:this.onHandleRememberPwd,pwdIsRemed:b},this.props,{getUsernamePswVisibility:this.getUsernamePswVisibility})),r.createElement(s.q,{text:I,style:this.loadingStyle,onClick:this.handleLoginBtnClick,isLoading:this.state.logining}),r.createElement("div",{className:l.loginType},r.createElement("div",{className:l.phoneLogin,onClick:this.handleLoginTypeClick}," ",P?(0,y.yG)("login.key213"):(0,y.yG)("login.key214")),U?null:this.props.userSourceType.includes(7)?r.createElement(r.Fragment,null,r.createElement("div",{className:l.line}),r.createElement("div",{className:l.msgLogin,onClick:function(){window.location.hash="shortMessage"}}," ",(0,y.yG)("login.key212"))):null))}}]),t}(r.Component);function X(e){var t=e.handleRememberPwd,n=e.pwdIsRemed,o=e.configuration,i=e.getUsernamePswVisibility,a=e.hasLDAP,c=o.hiddenresetpwd,u=o.usernamepsw||Q,d=!c||"false"===c,f=i(),p=(0,y.yG)("login.key085");switch(u){case z:p=(0,y.yG)("login.key085");break;case Q:p=(0,y.yG)("login.key086")}return r.createElement("div",{className:l.tools},r.createElement(s.oL,{text:p,isSelect:n,onClick:t,showUsernamePsw:f}),d&&!a&&r.createElement(s.aE,{text:(0,y.yG)("login.key216"),href:"#findPassword"}))}var $=Y},31398:function(e,t,n){n.d(t,{c:function(){return f}});n(82320),n(9112),n(97060),n(60776),n(43924),n(5960),n(46428),n(6200),n(87912),n(78504),n(77864);var r=n(85668),o="_3Gz0oDpe",i="uEwgaz3u",a="_23YUXQ_p",c="_16zdSVKR",u=n(71252),l=n.n(u);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function d(e,t,n){var r;return r=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==s(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function(e){var t=e.isSelect,n=e.onClick,u=e.text,s=e.showUsernamePsw,f=e.isMobile,p=l()(d(d(d({},i,!0),a,t),c,t&&f)),y=function(){n&&n(!t)};return s?r.createElement("div",{className:o,onClick:y,id:"remember_pwd",title:u},r.createElement("div",{className:p}),r.createElement("div",null,u)):r.createElement("div",{className:o,onClick:y})}},81748:function(e,t,n){n.d(t,{c:function(){return P}});n(82320),n(9112),n(97060),n(60776),n(33696),n(43924),n(5960),n(97336),n(46428),n(8896),n(6200),n(70864),n(80920),n(87912),n(36887),n(78504),n(97308),n(77864),n(86744);var r=n(85668),o="_1oQlEOHN",i="_2ZKRT2Ul",a="_1gf_AFKt",c="_3cH-I7go",u="_3RTb2uGc",l=n(71252),s=n.n(l),d=n(53767),f=n.n(d),p=n(7196),y=n.n(p),m=n(25128);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function h(e,t,n){return(t=b(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,b(r.key),r)}}function b(e){var t=function(e,t){if("object"!=v(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==v(t)?t:String(t)}function w(e,t,n){return t=E(t),function(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return C(e)}(e,S()?Reflect.construct(t,n||[],E(e).constructor):t.apply(e,n))}function S(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(S=function(){return!!e})()}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,t){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k(e,t)}var P=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=w(this,t,[e])).duringTime=8e3,n.state={show:!1,message:"",level:1},n.handleClick=n.handleClick.bind(C(n)),n.handleShowNotification=n.handleShowNotification.bind(C(n)),n}var n,l,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}(t,e),n=t,(l=[{key:"componentDidMount",value:function(){var e=this;m.c.notificationList.forEach((function(t){"ShowNotification"===(null==t?void 0:t.type)&&e.handleShowNotification(t)})),m.c.setValue("notificationList",[]),this.showNotificationHandle=this.props.dataPipeModel&&this.props.dataPipeModel.registerCallback("ShowNotification",this.handleShowNotification)}},{key:"componentWillUnmount",value:function(){this.showNotificationHandle()}},{key:"handleClick",value:function(){this.setState({show:!1,message:""})}},{key:"handleShowNotification",value:function(e){var t=this,n=e.error,r=n.message,o=n.level,i=n.time,a=void 0===i?"":i;this.setState({show:!!r,message:r,level:o}),"infinite"!==a&&(this.duringTime=a||this.duringTime,clearTimeout(this.duringTimer),this.duringTimer=setTimeout((function(){t.setState({show:!1,message:""})}),this.duringTime))}},{key:"render",value:function(){var e=this.state.level,t=s()(h(h(h({},o,!0),c,1===e),u,2===e));return this.state.show?r.createElement("div",{className:t,style:this.props.style},r.createElement("img",{src:1===e?f():y()}),r.createElement("div",{className:i,title:this.state.message},this.state.message),r.createElement("div",{className:a,onClick:this.handleClick},"×")):r.createElement("div",{className:o,style:this.props.style})}}])&&g(n.prototype,l),d&&g(n,d),Object.defineProperty(n,"prototype",{writable:!1}),t}(r.Component)},57044:function(e,t,n){n.d(t,{c:function(){return Q}});n(82320),n(9112),n(97060),n(60776),n(9692),n(13468),n(5684),n(43616),n(23784),n(43924),n(92948),n(93917),n(5960),n(76896),n(21300),n(46428),n(6200),n(76124),n(87912),n(33768),n(90512),n(60824),n(78504),n(21164),n(77864),n(86744);var r=n(85668),o=n(12356),i=n(71252),a=n.n(i),c=(n(35164),{root:"_1XGqR6AG",flat:"_3fGLu73a",via:"_3q_6g-0v","input-area":"rZg30feQ","arrow-base":"dLeh8Sln","arrow-default":"c3gweK7K","arrow-flat":"_1YEl_iPi","no-data-tip-class":"_2kvxvrD3","search-panel":"HLQ8Kutd","search-ul":"gbYolb0e","search-li":"_1M9WQbnf","hover-bg":"_3LjCffi5","search-input-div":"_1oG0IL-h","search-icon":"_8kvywSvx","search-input":"_1TVy2-q8",searchIcon:"_3zrtkEjq",searchIconFocus:"NPWOQNxv",searchInputDivFocus:"_31jcMIMY","no-result-li":"_2jKGqPxr","lock-with-no-value":"_3GoIU-Mv",container:"_2hmtB-fh",errorMsg:"_3T7BI7hr",content:"_1F5J9YZN",icon:"y6wN8qvl",telInput:"_7kBF1Tsy",accIcon:"_2cvniuvQ",accIconFocus:"_3ip4V9nV",accIconError:"_2sb3wEy2",msgIcon:"_2fT1tmQ3",msgIconFocus:"_9zCs27jI",msgIconError:"_3dNrjg-j",input:"_2T5_Hm7q",inputFocus:"_3MzKV0XJ",inputError:"_2Jl2BxUs","panel-drop-down-animation":"_3yPKQnM6","panel-drop-down":"_3qHv874G"});function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function l(e,t,n){var r;return r=function(e,t){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==u(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=function(e){var t=(0,r.useRef)(null),n=e.item,o=e.checkVia,i=e.isSelected;(0,r.useEffect)((function(){t.current&&i&&window.requestAnimationFrame((function(){t.current.scrollIntoView({behavior:"auto",block:"center"})}))}),[i]);var u=a()(c["search-li"],l({},c["hover-bg"],i));return r.createElement("li",{ref:t,key:"".concat(n.code2,"_").concat(n.id),onClick:function(){o(n)},className:u},r.createElement("span",null,n.name),r.createElement("span",null,n.id))},d=n(82784),f=n(7196),p=n.n(f);var y=function(e){var t=e.data,n=e.selectIndex,o=e.checkVia;return r.createElement("ul",{className:c["search-ul"]},t.length>0?t.map((function(e,t){return e.index?r.createElement("li",{className:c["search-li"],key:e.index,style:{pointerEvents:"none",fontWeight:200}},r.createElement("span",null,e.index),r.createElement("span",null)):r.createElement(s,{key:"".concat(e.name,"_").concat(e.id,"_").concat(t),item:e,isSelected:n===t,checkVia:o})})):r.createElement("li",{className:a()("kd-cq-empty-description kd-cq-empty-telephone",c["no-result-li"])},r.createElement("img",{src:p()}),r.createElement("span",null,(0,d.yG)("telephone.noResult"))))},m=n(86920);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function h(e,t,n){var r;return r=function(e,t){if("object"!=v(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==v(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var w=function(e){var t=e.viaList,n=e.checkVia,o=e.index,i=e.telInputRef,u=g((0,r.useState)(o),2),l=u[0],s=u[1],f=g((0,r.useState)(""),2),p=f[0],v=f[1],b=(0,r.useRef)(null),w=(0,r.useMemo)((function(){return(0,m.oh)(p,t)}));(0,r.useEffect)((function(){b.current&&b.current.focus()}),[]),(0,r.useEffect)((function(){setTimeout((function(){i.current.readOnly=!1}),300)}),[]);var S=g((0,r.useState)(!1),2),E=S[0],C=S[1],k=a()(h(h({},c["search-input-div"],!0),c.searchInputDivFocus,E)),P=a()(h(h({},c.searchIcon,!0),c.searchIconFocus,E));return t.length>0?r.createElement("div",null,r.createElement("div",{className:k},r.createElement("span",{className:P,style:{cursor:"pointer"}}),r.createElement("input",{ref:b,className:a()("kd-cq-input",c["search-input"]),placeholder:(0,d.yG)("telephone.searchPlaceholder"),onChange:function(e){var t=e.target.value;v(t),s(-1)},onKeyDown:function(e){if(w.length)switch((0,m.Gi)(e)){case 27:case 9:e.preventDefault(),-1!==l&&n(w[l]);break;case 40:e.stopPropagation(),-1===l&&s(0),l<w.length-1?s(l+1):s(w.length-1);break;case 38:e.stopPropagation(),-1!==l&&0!==l&&s(l-1);break;case 13:e.stopPropagation(),-1!==l&&n(w[l])}},onBlur:function(){C(!1)},onFocus:function(){C(!0)},autoComplete:"off"})),r.createElement(y,{data:w,selectIndex:l,checkVia:n})):r.createElement("span",{className:c["no-data-tip-class"]},(0,d.yG)("City.key0005"))},S=(n(41872),n(97336),n(33696),n(36368),n(97308),["onCLickOutside","forwardRef","children","autoFocus"]);function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E.apply(this,arguments)}function C(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function k(e){var t=e.onCLickOutside,n=e.forwardRef,o=e.children,i=e.autoFocus,a=void 0===i||i,c=C(e,S),u=(0,r.useRef)(null),l=(0,r.useRef)(null),s=(0,r.useRef)(null),d=(0,r.useRef)(null),f=(0,r.useCallback)((function(e){clearTimeout(l.current)}),[]),p=(0,r.useCallback)((function(e){l.current=setTimeout((function(){u.current&&!u.current.contains(document.activeElement)&&t(s.current,d.current)}),0)}),[t]);return(0,r.useEffect)((function(){n&&(n.current=u.current),a&&!u.current.contains(document.activeElement)&&u.current.focus()}),[]),(0,r.useEffect)((function(){var e=function(e){s.current=P,d.current=e},t=function(e){s.current=9===e.keyCode?I:O,d.current=e};return document.addEventListener("mousedown",e),document.addEventListener("keydown",t),function(){document.removeEventListener("mousedown",e),document.removeEventListener("keydown",t)}}),[]),r.createElement("div",E({tabIndex:"-1"},c,{ref:u,onBlur:p,onFocus:f}),o)}var P="click",O="keydown",I="tab",_=n(57768),j=n(67928),N=["children","trigger","defaultAlign","onClose","keepFocus","onWindowKeyDown","isFilterPanel","panelAlign"];function M(){return M=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},M.apply(this,arguments)}function A(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var L=(0,r.forwardRef)((function(e,t){var n=e.children,i=e.trigger,a=e.defaultAlign,c=e.onClose,u=e.keepFocus,l=e.onWindowKeyDown,s=e.isFilterPanel,d=e.panelAlign,f=A(e,N),p=(0,r.useRef)(null),y=(0,r.useRef)(null);i&&x(i,p,a,null==f?void 0:f.style,s,d);var m=function(e){return i&&e&&e.target&&i.contains(e.target)},v=function(e){return p.current&&(0,o.findDOMNode)(p.current).contains(e.target)};(0,r.useImperativeHandle)(t,(function(){return{calcPosition:function(){return T(i,p.current,a,null==f?void 0:f.style,s,d)}}}));var h=(0,j.debounce)((function(){var e;null===(e=p.current)||void 0===e||null===(e=e.children)||void 0===e||e[0].style.removeProperty("max-height"),y.current&&clearTimeout(y.current),y.current=setTimeout((function(){p.current&&T(i,p.current,a,null==f?void 0:f.style,s,d)}),300)}),100);if(D((function(){return d?h():c()}),["resize"]),D((function(e){return!v(e)&&!m(e)&&c(e)}),["scroll"]),D((function(e){if(e.keyCode===_.ZQ.ESC)c(),e.stopPropagation();l&&l(e)}),["keydown"]),D((function(e){return!v(e)&&!m(e)&&c()}),["mousedown"]),n=r.Children.only(n),u){return r.createElement(k,M({},f,{onCLickOutside:function(e,t){m(t)?p.current.focus():c()},forwardRef:p,style:Object.assign((null==f?void 0:f.style)||{},{})}),n)}return r.createElement("div",{style:{position:"absolute",top:0,left:0}},r.createElement("div",M({tabIndex:"-1",onMouseDown:function(e){return e.preventDefault()},onClick:function(e){return e.stopPropagation()},ref:p,style:{position:"fixed",visibility:"hidden"}},f),n))}));function T(e,t,n,r,o,i){var a,c=(0,m.gV)({panel:t.children[0],trigger:e,defaultAlign:n,panelAlign:i}),u=c.top,l=c.left,s=c.realHeight;return t.style.position="fixed",t.style.top=u+"px",t.style.left=l+"px",t.style.visibility="visible",t.style.zIndex=null!==(a=null==r?void 0:r.zIndex)&&void 0!==a?a:1050,t.children[0].style.width=e.offsetWidth+"px",o||(t.style.transform="translateZ(0)"),{top:u,left:l,realHeight:s}}var x=function(e,t,n,o,i,a){(0,r.useLayoutEffect)((function(){if(t.current){var e=t.current.style.visibility;return o&&(t.current.style.visibility="hidden"),function(){t.current.style.visibility=e}}}),[]),(0,r.useEffect)((function(){t&&t.current&&T(e,t.current,n,o,i,a);var r=new window.MutationObserver((function(r){r.forEach((function(r){T(e,t.current,n,o,i,a)}))}));return r.observe(t.current,{childList:!0,subtree:!0}),function(){r.disconnect(),r=null}}),[])},D=function(e,t){(0,r.useEffect)((function(){return t.forEach((function(t){return window.addEventListener(t,e,!0)})),function(){return t.forEach((function(t){return window.removeEventListener(t,e,!0)}))}}),[])},V=L,R=n(25128),F=n(31484),G=n.n(F),B=n(82499),K=n(10327);function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function W(e,t,n){var r;return r=function(e,t){if("object"!=U(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=U(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==U(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return q(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var z={Z:{id:"+86",name:(0,d.yG)({key:"Designer.key046"})}};function Q(e){var t=e.defaultValue,n=e.isFocusAccount,i=e.onBlur,u=e.dataPipeModel,l=e.name,s=e.telViaList,f=void 0===s?z:s,p=e.defaultAreaCode,y=H((0,r.useState)(!1),2),v=y[0],h=y[1],g=H((0,r.useState)(""),2),b=g[0],S=g[1],E=H((0,r.useState)(),2),C=E[0],k=E[1],P=H((0,r.useState)(),2),O=P[0],I=P[1],j=H((0,r.useState)(),2),N=j[0],M=j[1],A=H((0,r.useState)(!1),2),L=A[0],T=A[1],x=(0,r.useRef)(null),D=(0,r.useRef)(null),F=(0,r.useRef)(null),U=(0,r.useRef)();(0,r.useEffect)((function(){n&&u.sendData({type:"FocusInput",name:"account"});var e=u.registerCallback("".concat(l,"Error"),(function(e){var t=e.data;S(t),D.current.focus()})),t=u.registerCallback("FocusInput",(function(e){e.name===l&&D.current.focus()}));return function(){e(),t()}}),[]),(0,r.useEffect)((function(){var e=Object.keys(f).reduce((function(e,t){return e.concat({index:t}).concat(f[t])}),[]);I(e);var n=D.current.value;if([void 0,null,""].includes(n)&&t||!U.current){k(n=t);var r=n&&2===n.split("-").length&&n.split("-")[0]||p,o=(0,m.wz)(e,r);M(o),U.current=e.length>2}}),[f,t,p]);var q,Q,J=function(e){M(e),K.q.setItem((0,K.iW)(_.CM),e.id);var t=C?"".concat(e.id,"-").concat((0,m.uc)(C,N,O)):C;Y(t),Z(),D.current.focus()},Y=function(t){k(t),S(""),R.c.setValue(l,(0,m.Oo)(t)),e.valueChange&&e.valueChange()},Z=function(){D.current.focus(),h(!0),T(!1)},X=function(){D.current.readOnly=!0,T(!0),h(!0)},$=(0,m.uc)(C,N,O),ee=a()(W(W(W({},c.content,!0),c.inputFocus,v),c.inputError,""!==b)),te=a()(W(W(W(W({},c.icon,!0),c.accIcon,!0),c.accIconFocus,v),c.accIconError,""!==b));return r.createElement("div",{className:c.container,ref:F},r.createElement("div",{className:c.errorMsg},b),r.createElement("div",{className:ee},r.createElement("span",{className:te}),r.createElement("div",{className:c.via,ref:x,onClick:X},r.createElement("input",{readOnly:!0,value:null==N?void 0:N.id,onFocus:function(e){e.target.select()},onKeyDown:function(t){var n;switch((0,m.Gi)(t)){case _.ZQ.ARROWDOWN:t.preventDefault(),X();break;case _.ZQ.ENTER:t.stopPropagation(),null===(n=D.current)||void 0===n||n.focus();break;default:return}e.onViaKeyDown&&e.onViaKeyDown(t)}}),r.createElement("img",{className:c.img,style:L?{transform:"rotate(180deg)"}:{transform:"rotate(0deg)"},src:G(),onClick:function(e){e.stopPropagation(),L?Z():X()}})),r.createElement("input",{className:c.telInput,ref:D,onFocus:Z,type:"tel",value:$,autoComplete:"off",onBlur:function(e){var t=R.c.account||R.c.value||D.current.value;t&&setTimeout((function(){B.gF({useraccount:t}).then((function(e){var t={message:e.msg||e.description,level:2};u.sendData({type:"ShowNotification",error:t})}))}),0),h(!1),i&&i()},onChange:function(e){var t=e.target.value.trim(),n=t?"".concat(null==N?void 0:N.id,"-").concat(t):t;Y(n)},placeholder:(0,d.yG)("login.key211")})),L?(q=F.current,Q=O.findIndex((function(e){return(null==N?void 0:N.id)===e.id&&(null==N?void 0:N.name)===e.name})),(0,o.createPortal)(r.createElement(V,{trigger:q,keepFocus:!0,onClose:Z},r.createElement("div",{className:a()(c["search-panel"],c["panel-drop-down-animation"])},r.createElement(w,{index:Q,viaList:O,checkVia:J,telInputRef:D}))),document.body)):null)}},58952:function(e,t,n){n.d(t,{q:function(){return y},oL:function(){return m.c},k9:function(){return M},aE:function(){return x},EF:function(){return K},ct:function(){return ge},GW:function(){return se},Y3:function(){return W.c},kN:function(){return ne}});n(82320),n(9112),n(97060),n(60776),n(43924),n(5960),n(46428),n(6200),n(87912),n(78504),n(77864);var r=n(85668),o="NPUKHc2S",i="_2R-qnNNR",a="_37i5KhRk",c="EFZRJepJ",u="_3qn8LhjV",l="_3Q6Txdjo",s=n(71252),d=n.n(s);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t,n){var r;return r=function(e,t){if("object"!=f(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==f(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=function(e){var t=e.disable,n=d()(p(p(p({},i,!0),u,e.isLoading),l,t)),s=d()(p(p({},c,!0),l,t));return r.createElement("div",{className:o},r.createElement("button",{className:n,onClick:function(){!t&&e.onClick()}},r.createElement("span",{className:s}," ",e.text),e.isLoading&&r.createElement("div",{className:a,style:e.style})))},m=n(31398),v=(n(5092),n(43616),n(35164),n(4180),n(97336),n(21300),n(8896),n(70864),n(80920),n(36887),n(60824),n(12356)),h=n(82784),g={dropdownList:"mynwN_g3",title:"_3rA48Uwq",textWrapper:"_1-gHVG-v",tips:"_1qpYHDUI",tipsContainer:"_3qd0IKDm",tipsText:"_2N0dLBjW",tipsHide:"jOWN3FXs",text:"_3FT2U3np",off:"jExkexL5",on:"cE21VXKp",panel:"_1xYHG5mY",list:"_8Qhm2a-a",item:"_3NhxlUy2","item-selected":"_2ogcfj53",hide:"_3FxSIlCG",onlyOneChild:"_1linHcQo",weChatonlyOneChild:"_1PYI37Kt"},b=n(99832),w=n(94348),S=n(25128);function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function C(e,t,n){return(t=P(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,P(r.key),r)}}function P(e){var t=function(e,t){if("object"!=E(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==E(t)?t:String(t)}function O(e,t,n){return t=_(t),function(e,t){if(t&&("object"===E(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return j(e)}(e,I()?Reflect.construct(t,n||[],_(e).constructor):t.apply(e,n))}function I(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(I=function(){return!!e})()}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e,t){return N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},N(e,t)}var M=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=O(this,t,[e])).dropdownListRef=r.createRef(),n.state={showPanel:!1,showTiops:!0,domainText:""},n.handleSwitchPanel=n.handleSwitchPanel.bind(j(n)),n.handleClickOutside=n.handleClickOutside.bind(j(n)),n.handleMouseover=n.handleMouseover.bind(j(n)),n.handleMouseOut=n.handleMouseOut.bind(j(n)),n.getDomain=n.getDomain.bind(j(n)),n.handleItemClick=n.handleItemClick.bind(j(n)),n.showLDAP=n.showLDAP.bind(j(n)),n.hideCloudHubLogin=n.hideCloudHubLogin.bind(j(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&N(e,t)}(t,e),n=t,(o=[{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleClickOutside),S.c.accountId&&this.getDomain(S.c.accountId)}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.selectItem!==e.selectItem&&this.getDomain(e.selectItem),!0}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleClickOutside)}},{key:"handleClickOutside",value:function(e){if(this.state.showPanel){for(var t=e.target;t&&t!==document;){if(t===v.findDOMNode(this.dropdownListRef.current))return;t=t.parentNode}t&&this.setState({showPanel:!1})}}},{key:"handleSwitchPanel",value:function(){this.setState({showPanel:!this.state.showPanel})}},{key:"handleItemClick",value:function(e){this.props.onItemClick(e),this.setState({showPanel:!1})}},{key:"getDomain",value:function(e){var t=this;try{var n,r=S.c.dataCenter;r.some((function(t,r){if(t.value===e)return n=r,!0})),(0,w.Q3)(e,r,n,this.props.dataPipeModel).then((function(e){if(e&&!(e.length<1)){var n=e.hasLDAP,r=e.domain,o=e.userSourceType,i=e.defaultUserSourceType;t.props.dataPipeModel.sendData({type:"currentAccountIdChange",data:{userSourceType:o,defaultUserSourceType:i}}),t.showLDAP(n,r,o,i),t.hideCloudHubLogin(o)}}))}catch(e){this.props.dataPipeModel.sendData({type:"hasLDAP",hasLDAP:!1})}}},{key:"hideCloudHubLogin",value:function(e){e&&(e.includes(0)||e.includes(1))?this.props.dataPipeModel&&this.props.dataPipeModel.sendData({type:"HideCloudHubIcon",isHide:!1}):this.props.dataPipeModel&&this.props.dataPipeModel.sendData({type:"HideCloudHubIcon",isHide:!0})}},{key:"showLDAP",value:function(e,t,n,r){this.props.dataPipeModel.sendData({type:"hasLDAP",hasLDAP:e}),this.props.isKingdeeClude&&(e?this.setState({domainText:t}):this.setState({domainText:"",showTiops:!0}))}},{key:"handleMouseover",value:function(){this.props.isKingdeeClude&&this.state.domainText&&this.setState({showTiops:!1})}},{key:"handleMouseOut",value:function(){this.props.isKingdeeClude&&this.setState({showTiops:!0})}},{key:"render",value:function(){var e=this,t=this.state.showPanel,n=this.props,o=n.list,i=n.name,a=n.inheritStyle,c=n.title,u=n.oldDataCenter,l=!1,s=!1;"accountId"!==i&&"lang"!==i||1!==o.length||(l=!0),1===o.length&&u&&(1===u.length?l=!0:(l=!1,s=!0));var f,p=d()(C(C(C({},g.dropdownList,!0),this.props.style,!0),g.onlyOneChild,l)),y=d()(C(C(C({},g.text,!0),g.on,t&&!s),g.off,!t&&!s)),m=d()(C(C({},g.panel,!0),g.hide,!t)),v=d()(C(C({},g.tips,!0),g.tipsHide,this.state.showTiops));f=o.find((function(t){return t.value===e.props.selectItem}));var w=o.map((function(t){var n=d()(C(C({},g.item,!0),g["item-selected"],t.value===e.props.selectItem));return r.createElement("li",{className:n,key:t.value,onClick:function(n){return e.handleItemClick(t.value,n)}},t.text)}));return f&&S.c.setValue(i,f.value),w.length>0?r.createElement(b.StoreContext.Consumer,null,(function(t){return r.createElement("div",{className:p,style:a,id:"dropdown_list"},c?r.createElement("div",{className:g.title},c):null,r.createElement("div",{className:g.textWrapper,ref:e.dropdownListRef},r.createElement("div",{className:v},r.createElement("div",{className:g.tipsContainer},r.createElement("div",{className:g.tipsTitle},(0,h.yG)("login.key093")),r.createElement("div",{className:g.tipsText,title:e.state.domainText},e.state.domainText))),r.createElement("div",{className:y,onClick:e.handleSwitchPanel,onMouseOver:e.handleMouseover,onMouseOut:e.handleMouseOut},f&&f.text),r.createElement("div",{className:m},r.createElement("ul",{className:g.list},w))))})):null}}])&&k(n.prototype,o),i&&k(n,i),Object.defineProperty(n,"prototype",{writable:!1}),t}(r.Component),A="_2-ty4wmD",L=n(57768),T=n(10327);var x=function(e){var t=T.q.getItem((0,T.iW)(L.EF))===L.Af?"<".concat((0,h.yG)("login.key218")):"<".concat((0,h.yG)("login.key217"));return r.createElement("a",{className:A,id:"find_pwd",style:e.style,href:e.href||"#kingdeeCloud"},e.text||t)},D=(n(5684),n(41872),n(23784),n(93917),n(76896),n(33768),n(90512),n(19828)),V=n(54624);function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function F(e,t,n){var r;return r=function(e,t){if("object"!=R(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=R(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==R(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function K(e){var t,n=e.defaultValue,o=void 0===n?"":n,i=e.isFocusAccount,a=e.className,c=e.onBlur,u=e.dataPipeModel||new V.c,l=G((0,r.useState)(!1),2),s=l[0],f=l[1],p=G((0,r.useState)(""),2),y=p[0],m=p[1],v=(0,r.useRef)(null),h=G((0,r.useState)(!1),2),g=h[0],b=h[1],w=G((0,r.useState)(!1),2),E=w[0],C=w[1];(0,r.useEffect)((function(){var t=e.name+"Error",n=u.registerCallback(t,(function(e){var t=e.data,n=e.name;m(t),n&&"newPassword"===n||v.current.focus()})),r=u.registerCallback("FocusInput",(function(t){t.name===e.name&&(v.current.focus(),t.emptyValue&&(v.current.value=""))}));return"account"===e.name&&i?u.sendData({type:"FocusInput",name:"account"}):"password"!==e.name||i||u.sendData({type:"FocusInput",name:"password"}),function(){n(),r()}}),[]),(0,r.useEffect)((function(){[void 0,null,""].includes(v.current.value)&&o&&(v.current.type=e.type,v.current.value=o)}),[o]);var k=d()(F(F(F({},D.c.content,!0),D.c.inputFocus,s),D.c.inputError,""!==y)),P=d()(F(F(F(F({},D.c.icon,!0),D.c.accIcon,!0),D.c.accIconFocus,s),D.c.accIconError,""!==y)),O=d()(F(F(F(F({},D.c.icon,!0),D.c.pwdIcon,!0),D.c.pwdIconFocus,s),D.c.pwdIconError,""!==y)),I=d()(F(F(F(F({},D.c.icon,!0),D.c.verifyIcon,!0),D.c.verifyIconFocus,s),D.c.verifyIconError,""!==y)),_=d()(F(F(F(F({},D.c.icon,!0),D.c.msgIcon,!0),D.c.msgIconFocus,s),D.c.msgIconError,""!==y)),j=d()(F(F(F({},D.c.hidePwd,!E),D.c.showPwd,E),D.c.icon,!0)),N=e.placeholder,M=e.name,A=U([P,O,I,_],M),L=d()(F(F({},D.c.container,!0),a,a)),T="password"===e.type&&!E&&(g||null!==(t=v.current)&&void 0!==t&&t.value)?"password":"text",x="password"===e.type&&S.c.showviewpwdbtn&&"false"!==S.c.showviewpwdbtn;return r.createElement("div",{className:L},r.createElement("div",{className:D.c.errorMsg},y),r.createElement("div",{className:k},r.createElement("span",{className:A}),r.createElement("input",{id:e.name,ref:v,type:T,"data-type":e.type,className:D.c.input,placeholder:N,onFocus:function(t){"password"!==e.type||E||(v.current.type=e.type),f(!0),b(!0)},onBlur:function(t){"password"!==e.type||E||(v.current.type=e.type),f(!1),c&&c()},onChange:function(t){"password"!==e.type||E||(v.current.type=e.type);var n=t.target.value;v.current.value=n,S.c.setValue(e.name,n),m(""),e.valueChange&&e.valueChange()},autoComplete:"off",spellCheck:!1,readOnly:e.readOnly}),x&&r.createElement("span",{className:j,onClick:function(){C(!E)}})))}var U=function(e,t){return["account","yzjAccount"].indexOf(t)>-1?e[0]:["password","newPassword","confirmPassword","yzjPwd","customDynamicCode"].indexOf(t)>-1?e[1]:"verifyCode"===t?e[2]:"phoneCode"===t?e[3]:void 0},W=n(81748),H=n(82499),q=(n(84804),n(43788));function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,J(r.key),r)}}function J(e){var t=function(e,t){if("object"!=z(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=z(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==z(t)?t:String(t)}function Y(e,t,n){return t=X(t),function(e,t){if(t&&("object"===z(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $(e)}(e,Z()?Reflect.construct(t,n||[],X(e).constructor):t.apply(e,n))}function Z(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Z=function(){return!!e})()}function X(e){return X=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},X(e)}function $(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ee(e,t){return ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ee(e,t)}var te=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Y(this,t,[e])).state={message:"",title:"",buttonType:"",confirmType:""},n.getErrorMessage=n.getErrorMessage.bind($(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ee(e,t)}(t,e),n=t,o=[{key:"componentDidMount",value:function(){this.getErrorMessage()}},{key:"onClose",value:function(e){window.location.hash="#findPassword"}},{key:"clickCallback",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n]}},{key:"getErrorMessage",value:function(){var e=this;H.UJ({language:S.c.lang}).then((function(t){if("[object Object]"===Object.prototype.toString.call(t)){var n=t.title,r=t.message,o=t.buttonType,i=void 0===o?4:o,a=t.confirmType,c=void 0===a?4:a;r&&(0,q.c)({id:"findPassword",msg:r,confirmType:c,title:n||(0,h.yG)("login.key061"),buttonType:Number(i),buttonNames:{7:(0,h.yG)("login.key062"),6:(0,h.yG)("login.key063")},onClose:e.onClose,clickCallback:e.clickCallback})}}))}},{key:"handleChangePsw",value:function(){window.location.hash="#findPassword"}},{key:"renderMessage",value:function(){return this.state.message.split("/n").map((function(e,t){return r.createElement("div",{key:t},e)}))}},{key:"render",value:function(){return r.createElement("div",null)}}],o&&Q(n.prototype,o),i&&Q(n,i),Object.defineProperty(n,"prototype",{writable:!1}),t}(r.Component),ne=te,re=(n(9692),n(28640),n(86744),{ieWrap:"_3WgrW4PN",message:"OVko05Lt",titleRoot:"_1DcBwXGf",title:"_2fd5UnOR",days:"_2ULp72sE",slidingIn:"PNFiudSd",slidingOut:"_1VROEFvf"});function oe(e){return oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oe(e)}function ie(e,t,n){var r;return r=function(e,t){if("object"!=oe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=oe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==oe(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ae(e){return function(e){if(Array.isArray(e))return le(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ue(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||ue(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,t){if(e){if("string"==typeof e)return le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?le(e,t):void 0}}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function se(e){var t=ce((0,r.useState)(!0),2),n=t[0],o=t[1];(0,r.useEffect)((function(){return window.addEventListener("resize",a),window.addEventListener("resize",i),function(){window.removeEventListener("resize",a),window.removeEventListener("resize",i)}}),[]);var i=function(){n&&o(!1)},a=(0,T.Cu)((function(){o((function(e){return!0}))}),1e3);return r.createElement(r.Fragment,{key:"fragment"},n?r.createElement(de,e):null)}function de(e){var t=ce((0,r.useState)([]),2),n=t[0],o=t[1],i=ce((0,r.useState)(!0),2),a=i[0],c=i[1],u=ce((0,r.useState)(!1),2),l=u[0],s=u[1],f=ce((0,r.useState)(!1),2),p=f[0],y=f[1],m=ce((0,r.useState)(!1),2),v=m[0],g=m[1],b=ce((0,r.useState)(-100),2),E=b[0],C=b[1],k=ce((0,r.useState)(0),2),P=k[0],O=k[1],I=ce((0,r.useState)(1),2),_=I[0],j=I[1],N=ce((0,r.useState)(0),2),M=N[0],A=N[1],L=ce((0,r.useState)(),2),T=L[0],x=L[1],D=ce((0,r.useState)(),2),V=D[0],R=D[1],F=(0,r.useRef)([]),G=(0,r.useRef)(null),B=function(){y(!1),g(!1),C(-100),O(0),j(1),A(0)},K=function(t){(0,w.KU)({accountId:t.currentAccountId||S.c.accountId,language:t.language||S.c.lang,dataPipeModel:e.dataPipeModel}).then((function(t){var n;t.licenseList&&(null===(n=t.licenseList)||void 0===n?void 0:n.length)>0?(s(!0),x(t.licenseList[1]),R(t.licenseList[0]),o(t.licenseList),c(!0),B()):(e.dataPipeModel&&e.dataPipeModel.sendData({type:"SetLicenseBarVisible",visible:!1}),s(!1),x(),R(),o(),B())}))};(0,r.useEffect)((function(){var t=e.dataPipeModel&&e.dataPipeModel.registerCallback("ValidateLicense",K);return document.addEventListener("visibilitychange",q),""!==e.currentAccountId&&K({currentAccountId:e.currentAccountId,language:S.c.language}),function(){t(),document.removeEventListener("visibilitychange",q)}}),[]);var U=ce((0,r.useState)(!0),2),W=U[0],H=U[1],q=function(){"visible"===document.visibilityState?H((function(e){return!e})):clearInterval(G.current)};(0,r.useEffect)((function(){a&&n&&(F.current.length>0&&(null==e||e.dataPipeModel.sendData({type:"SetLicenseBarVisible",visible:Math.max.apply(Math,ae(F.current))})),c(!1))}),[n,a]),(0,r.useEffect)((function(){return(null==n?void 0:n.length)>1&&(clearInterval(G.current),G.current=setInterval((function(){1!==F.current.length&&C((function(e){return 0===e?(j((function(e){return A(e),e})),O((function(e){return 0})),y((function(e){return!0})),g((function(e){return!0})),100):-100===e?(j((function(e){return A(e),e})),O((function(e){return 100})),y((function(e){return!0})),g((function(e){return!0})),0):e}))}),5e3)),function(){G.current&&clearInterval(G.current)}}),[n,W]);var z=(0,r.useCallback)((function(){100===E&&(C(-100),Q("one")),100===P&&(O(-100),Q("two")),y(!1),g(!1)}),[E,P]),Q=function(e){_===F.current.length-1?j((function(t){var r=n[0];return"one"===e?x(r):R(r),0})):j((function(t){var r=n[t+1];return"one"===e?x(r):R(r),t+1}))},J=d()(ie(ie(ie({},re.ieWrap,!0),re.slidingIn,l),re.slidingOut,!l)),Y=(0,r.useMemo)((function(){return 100===E?.8:1}),[E]),Z=(0,r.useMemo)((function(){return 100===P?.8:1}),[P]),X=(0,r.useMemo)((function(){return{transform:"translateY(".concat(E,"%) scale(").concat(Y,")"),transition:p?"all 0.5s ease-in-out":"none"}}),[E,p,Y]),$=(0,r.useMemo)((function(){return{transform:"translateY(".concat(P,"%) scale(").concat(Z,")"),transition:v?"all 0.5s ease-in-out":"none"}}),[P,Z,v]),ee=(0,r.useMemo)((function(){return r.createElement(fe,{Info:T})}),[T]),te=(0,r.useMemo)((function(){return r.createElement(fe,{Info:V})}),[V]);return r.createElement("div",null,!a&&r.createElement("div",{className:J,style:{height:F.current[M]}},r.createElement("div",{className:re.message,style:X,onTransitionEnd:z},(null==n?void 0:n.length)>1&&ee),r.createElement("div",{className:re.message,style:$},te)),a&&n&&(F.current=[],r.createElement("div",{className:J,style:{visibility:"hidden"}},null==n?void 0:n.map((function(e,t){var n=e.msg,o=e.days,i=e.overTime?(0,h.yG)("login.key053"):(0,h.yG)("login.key097");if(o>0){var a=n.split(o);return r.createElement("div",{className:re.message,key:t,ref:function(e){e&&F.current.push(e.offsetHeight)}},r.createElement("span",{className:re.title},i),a[0],r.createElement("span",{className:re.days},o),a[1])}return r.createElement("div",{className:re.message,key:t,ref:function(e){e&&F.current.push(e.offsetHeight)}},r.createElement("span",{className:re.title},i),n)})))))}function fe(e){if(!e.Info)return null;var t=e.Info,n=t.msg,o=t.days,i=t.overTime?(0,h.yG)("login.key053"):(0,h.yG)("login.key097");if(o>0){var a=n.split(o);return r.createElement("div",{className:re.titleRoot,title:n},r.createElement("span",{className:re.title},i),a[0],r.createElement("span",{className:re.days},o),a[1])}return r.createElement("div",{className:re.titleRoot,title:n},r.createElement("span",{className:re.title},i),n)}var pe={container:"_3Q5hgSMV",icon:"_3wOK1j_5",text:"VztMx4SI",panel:"WCUv02Up",item:"zWyXSE-P",selected:"je3nxZ5p",hidden:"_3zYVxLlP"};function ye(e){return ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ye(e)}function me(e,t,n){var r;return r=function(e,t){if("object"!=ye(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ye(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==ye(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return he(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return he(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function he(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ge(e){var t=ve((0,r.useState)(!1),2),n=t[0],o=t[1],i=ve((0,r.useState)(!1),2),a=i[0],c=i[1],u=(0,r.useRef)(null),l=e.languages,s=e.currentLang,f=e.changeLang,p=e.dataPipeModel,y=function(e){for(var t=e.target;t&&t!==document;){if(t===v.findDOMNode(u.current))return;t=t.parentNode}t&&o(!1)};(0,r.useEffect)((function(){document.addEventListener("click",y);var e=null==p?void 0:p.registerCallback("SetLicenseBarVisible",(function(e){c(e.visible)}));return function(){document.removeEventListener("click",y),e()}}),[]);var m=function(t){var n=t.target.getAttribute("value");o(!1),n!==s&&(S.c.setValue("lang",n),e.onItemClick(n),f&&f(n))},h=l.map((function(e){var t=d()(me(me({},pe.item,!0),pe.selected,e.value===s));return r.createElement("div",{key:e.value,value:e.value,className:t,onClick:m},e.text)})),g=l.find((function(e){return e.value===s})),b=d()(me(me({},pe.panel,!0),pe.hidden,!n)),w=d()(me(me({},pe.container,!0),pe.topChange,a)),E=a?{top:a}:null;return g&&S.c.setValue("lang",g.value),r.createElement("div",{ref:u,className:w,style:E,id:"language_select",onClick:function(e){o(!n)}},r.createElement("span",{className:pe.icon}),r.createElement("div",{className:pe.text},g&&g.text),r.createElement("div",{className:b},h))}n(92263),n(61432)},10428:function(e,t,n){n.d(t,{c:function(){return P}});n(82320),n(9112),n(97060),n(60776),n(43924),n(5960),n(97336),n(46428),n(8896),n(6200),n(70864),n(80920),n(87912),n(36887),n(78504),n(77864);var r=n(85668),o=n(71252),i=n.n(o),a="_3pHu1TPq",c="_2tgz3L2N",u="_39Ru0F5H",l="_1IAPAA50",s="_25htaxjq",d="_3J3tzZ85",f="_-5fpU0MM",p=n(75336),y=n(57768),m=n(11376);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function h(e,t,n){return(t=b(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,b(r.key),r)}}function b(e){var t=function(e,t){if("object"!=v(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==v(t)?t:String(t)}function w(e,t,n){return t=E(t),function(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,S()?Reflect.construct(t,n||[],E(e).constructor):t.apply(e,n))}function S(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(S=function(){return!!e})()}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}function C(e,t){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},C(e,t)}var k=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),w(this,t,arguments)}var n,o,v;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.selectType,n=e.loginStatus,o=e.currentLang,v=e.userSourceType,g=e.dataPipeModel,b=n===y._Y,w=i()(h(h({},u,!0),d,b)),S=i()(h(h({},l,!0),d,b)),E=i()(h(h({},s,!0),d,b)),C=i()(h({},f,b));return r.createElement("div",{className:a},r.createElement("div",{className:c},r.createElement("div",{className:w},r.createElement("img",{src:m.o[o]||m.o.zh_CN})),r.createElement("div",{className:S},this.props.children),r.createElement("div",{className:E},r.createElement(p.c,{selectType:t,userSourceType:v,dataPipeModel:g}))),r.createElement("div",{className:C}))}}])&&g(n.prototype,o),v&&g(n,v),Object.defineProperty(n,"prototype",{writable:!1}),t}(r.Component),P=k},75336:function(e,t,n){n.d(t,{c:function(){return T}});n(82320),n(9112),n(97060),n(60776),n(22676),n(5092),n(43616),n(43924),n(5960),n(97336),n(46428),n(36368),n(8896),n(6200),n(70864),n(80920),n(87912),n(36887),n(60824),n(78504),n(77864);var r=n(85668),o="psv4R2WI",i="cRZBQlal",a="_33hyo19E",c=n(82784),u=n(61392),l=n.n(u),s=n(94640),d=n.n(s),f=n(21516),p=n.n(f),y=n(37252),m=n.n(y),v=n(54856),h=n.n(v),g=n(43644),b=n.n(g),w=n(96292),S=n.n(w),E=n(61356),C=n.n(E);function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,O(r.key),r)}}function O(e){var t=function(e,t){if("object"!=k(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==k(t)?t:String(t)}function I(e,t,n){return t=j(t),function(e,t){if(t&&("object"===k(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return N(e)}(e,_()?Reflect.construct(t,n||[],j(e).constructor):t.apply(e,n))}function _(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_=function(){return!!e})()}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},j(e)}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e,t){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},M(e,t)}function A(){return A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},A.apply(this,arguments)}var L=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=I(this,t,[e])).state={ishover:!1},n.handleMouseOver=n.handleMouseOver.bind(N(n)),n.handleMouseOut=n.handleMouseOut.bind(N(n)),n.handleClick=n.handleClick.bind(N(n)),n}var n,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&M(e,t)}(t,e),n=t,(o=[{key:"handleMouseOver",value:function(){this.setState({ishover:!0})}},{key:"handleMouseOut",value:function(){this.setState({ishover:!1})}},{key:"handleClick",value:function(){var e=this.props.type;this.props.dataPipeModel&&this.props.dataPipeModel.sendData({type:"usernamepsw"}),window.location.hash=e}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.iconSrc,o=e.iconGraySrc,i=e.selectType,a=e.type,c=this.state.ishover,u=i===a;return r.createElement("img",{src:u||c?n:o,title:t,onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,onClick:this.handleClick,draggable:"false"})}}])&&P(n.prototype,o),i&&P(n,i),Object.defineProperty(n,"prototype",{writable:!1}),t}(r.Component),T=function(e){var t=e.selectType,n=e.userSourceType,u=(void 0===n?[]:n).filter((function(e){return 7!==e})),s=void 0!==u.find((function(e){return 0===e||6===e||4===e||5===e}))&&u.length>1;return"findPassword"!==t&&"activeUser"!==t&&"demo"!==t&&s?r.createElement("div",{className:o,id:"login_mode"},r.createElement("div",{className:i},r.createElement("div",{className:a,style:{margin:"0 12px 0 32px"}}),(u.includes(0)||u.includes(1))&&r.createElement(L,A({title:(0,c.yG)("login.key011"),iconSrc:S(),iconGraySrc:C(),type:"cloudHub"},e)),u.includes(6)&&r.createElement(L,A({title:(0,c.yG)("login.key088"),iconSrc:h(),iconGraySrc:b(),type:"WeChat"},e)),u.includes(4)&&r.createElement(L,A({title:(0,c.yG)("login.key012"),iconSrc:l(),iconGraySrc:d(),type:"face"},e)),u.includes(5)&&r.createElement(L,A({title:(0,c.yG)("login.key013"),iconSrc:p(),iconGraySrc:m(),type:"voice"},e)),r.createElement("div",{className:a,style:{margin:"0 32px 0 0"}}))):r.createElement("div",{className:o})}},33588:function(e,t,n){n.d(t,{c:function(){return L}});n(82320),n(9112),n(97060),n(60776),n(5684),n(43616),n(41872),n(23784),n(43924),n(35164),n(93917),n(5960),n(76896),n(21300),n(46428),n(36368),n(6200),n(76124),n(87912),n(33768),n(90512),n(60824),n(78504),n(28640),n(81288),n(77864);var r=n(85668),o=n(71252),i=n.n(o),a={container:"_2nC8gKpF",imgPart:"_2LgNJhZs",slogan:"_2lFj85r0",sloganh1:"_1tzbLM7P",sloganh2:"OJ5o9zgQ",formPart:"_3WTXv1kC",logo:"_3PifShzX",content:"_3DvuSaIx",imgPartHide:"_1-Rr19CU",formPartCenter:"_1aul0RRr",hidden:"_1uEGdzgb",linksBox:"_12l7JPlB",a:"orJDyniB",linksBox2:"_2odY3Ssg",customRange:"_3xKyhj3u",link:"_2qlSwPbM",img:"Twr6n1rA",split:"_1X2vT19E"},c=n(75336),u=n(58952),l=n(25128),s=n(82784),d=n(10327),f=(n(71176),n(97448),{waterMark:"_3xlZGadA"});function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e){var t=p((0,r.useState)(),2),n=t[0],o=t[1],i=e.type,a=e.text,c=e.logo,u=e.globalAlpha,l=e.angle,s=e.color,d=e.fontSize,y=e.fontFamily,m=e.zIndex;return(0,r.useEffect)((function(){(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"text",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=t.globalAlpha,o=void 0===r?10:r,i=t.angle,a=void 0===i?-10:i,c=t.color,u=void 0===c?"#333":c,l=t.fontSize,s=void 0===l?"12px":l,d=t.fontFamily,f=void 0===d?"Microsoft YaHei":d,p=t.text,y=document.createElement("canvas");y.setAttribute("width",440),y.setAttribute("height",120);var m=y.getContext("2d");if(m.textBaseline="top",n){var v=n.width,h=n.height;m.fillStyle="#ffffff",m.fillRect(0,0,parseInt(v),parseInt(h))}m.font=s+" "+f,m.globalAlpha=o/100,m.rotate(a*Math.PI/180),m.fillStyle=u,(new window.Image).crossOrigin="anonymous";var g=0,b=30,w=220,S=90;return new Promise((function(t,n){if("text"===e)m.fillText(p,g,b),m.fillText(p,w,S),t(y.toDataURL())}))})(i,{text:a,logo:c,globalAlpha:u,angle:l,color:s,fontSize:d,fontFamily:y}).then((function(e){o(e)}))}),[i,a,c,u,l,s,d,y]),n?r.createElement("div",{className:f.waterMark,style:{background:"url(".concat(n,")"),zIndex:m}}):null}var v=n(96012),h=n.n(v),g=n(53932),b=n.n(g),w=n(31664),S=n.n(w),E=n(27281),C=n.n(E),k=n(92263),P=n.n(k),O=n(61432),I=n.n(O),_=n(94348);function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function A(e,t,n){var r;return r=function(e,t){if("object"!=j(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=j(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==j(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var L=function(e){var t,n,o=e.selectType,s=e.configuration,f=e.currentLang,p=e.userSourceType,y=e.languages,v=e.handleChangeLang,g=e.changeLang,w=s.linkdata;if(i()(A({},a.sloganh1,!0)),i()(A({},a.sloganh2,!0)),!window.loginAfterLoad||!window.loginAfterLoad("imgPart")){var E=(0,_.WQ)(s.bgimg,f),k=(0,d.EH)(E)||(l.c.isCompleteLoadConfig&&!f.includes("zh")?b():h());t=k?{backgroundImage:"url(".concat(k,")")}:{},!E,document.body.offsetWidth<1080&&(n=!0)}var P=N((0,r.useState)(n),2),O=P[0],I=P[1],j=function(){window.loginAfterLoad&&window.loginAfterLoad("logo")||(document.body.offsetWidth<1080?I(!0):I(!1))},M=null;if(!window.loginAfterLoad||!window.loginAfterLoad("logo")){var L;L="zh_TW"===f||"zh_CN"===f?C():S();var x=(0,_.WQ)(null==s?void 0:s.logoimg,f),D=(0,d.EH)(x)||l.c.isCompleteLoadConfig&&L;M={width:"100%",height:47,backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"auto 100%"},D&&Object.assign(M,{backgroundImage:"url(".concat(D,")")})}(0,r.useEffect)((function(){try{window.loginAfterLoad&&window.loginAfterLoad("imgPart")&&window.loginAfterLoad("imgPart")(),window.loginAfterLoad&&window.loginAfterLoad("logo")&&window.loginAfterLoad("logo")()}catch(e){}}),[]);var V=N((0,r.useState)(""),2),R=V[0],F=V[1];(0,r.useEffect)((function(){if(!R){var e=s.licenseType;e&&F(e)}}),[s.licenseType]),(0,r.useEffect)((function(){window.addEventListener("resize",(0,d.Cu)(j,30))}),[]);var G=i()(A(A({},a.imgPart,!0),a.imgPartHide,O)),B=i()(A(A({},a.formPart,!0),a.formPartCenter,O));return r.createElement("div",{className:a.container},R&&r.createElement(m,{type:"text",text:R,globalAlpha:10,angle:-10,color:"#212121",fontSize:"18px",zIndex:"999"}),r.createElement("div",{className:G,style:t,id:"imgPart"}),r.createElement("div",{className:B,id:"formPart"},r.createElement(u.GW,{currentAccountId:e.currentAccountId,dataPipeModel:e.dataPipeModel}),["kingdeeCloud","demo","WeChat","shortMessage"].indexOf(o)>=0&&r.createElement(u.ct,{dataPipeModel:e.dataPipeModel,languages:y,currentLang:f,changeLang:g,onItemClick:v}),r.createElement("div",{className:a.logo},r.createElement("div",{style:M,id:"logo"})),r.createElement("div",{className:a.content,id:"content"},e.children),r.createElement(c.c,{selectType:o,userSourceType:p,dataPipeModel:e.dataPipeModel}),("kingdeeCloud"===o||"demo"===o)&&r.createElement(T,{currentLang:f,currentAccountId:e.currentAccountId,configuration:s,data:w,dataPipeModel:e.dataPipeModel})))};function T(e){var t=e.data,n=void 0===t?[]:t,o=e.configuration,c=void 0===o?{}:o,u=e.currentAccountId,l=e.currentLang,d=N((0,r.useState)([]),2),f=d[0],p=d[1],y=c.showpolicy,m=c.policylink,v=(0,r.useRef)([[{type:"A",url:"https://cloud.kingdee.com/passport/#/policy-agree/client-kd",value:(0,s.yG)("login.key083")},{type:"SPLIT"},{type:"A",url:"https://cloud.kingdee.com/passport/#/policy-agree/privacy-policy",value:(0,s.yG)("login.key084")}],[{type:"ICON",url:P()},{type:"ICON",url:I()},{type:"A",url:"https://beian.miit.gov.cn/#/Integrated/index",value:"粤ICP备05041751号"},{type:"A",url:"http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=44030502005006",value:"粤公网安备 44030502005006号"}]]);(0,r.useEffect)((function(){y&&"false"!==y&&p(m||v.current)}),[u,m,y,l,v.current]),(0,r.useEffect)((function(){try{window.loginAfterLoad&&window.loginAfterLoad("linksBox")&&window.loginAfterLoad("linksBox")()}catch(e){}}),[]),"string"==typeof n&&(n=JSON.parse(n));var h=i()(A(A({},a.linksBox,!0),a.linksBox2,n.length<=3)),g=i()(A(A({},a.a,!0),a.a2,n.length<=3)),b=n.map((function(e,t){var n=e.linkname,o=e.mulilanglinkname,i=e.linkurl,a=(null==o?void 0:o[l])||n;return r.createElement("a",{className:g,key:t,href:i,target:"_blank"},a)}));window.loginAfterLoad&&window.loginAfterLoad("linksBox")&&(b=null);var w=(0,r.useMemo)((function(){return f.map((function(t,n){return r.createElement(x,{key:n,rows:t,lang:e.currentLang})}))}),[f,e.currentLang,u]);return r.createElement("div",{className:h,id:"linksBox"},b,(null==f?void 0:f.length)>0&&w)}function x(e){var t=e.rows,n=e.lang;return r.createElement("div",{className:a.customRange},t.map((function(e,t){var o=e.key,i=void 0===o?t:o,c=e.url,u=(0,_.WQ)(e.value,n);switch(e.type){case"A":return r.createElement("a",{className:a.link,id:"custom_range_".concat(i),key:i,href:c,rel:"noreferrer",target:"_blank"},u);case"ICON":return r.createElement("img",{className:a.img,id:"custom_range_".concat(i),key:i,src:c});case"SPLIT":return r.createElement("div",{className:a.split,id:"custom_range_".concat(i),key:i});default:return null}})))}}}]);