"use strict";(self.webpackChunkkd_login=self.webpackChunkkd_login||[]).push([[800],{52419:function(e,t,n){n.r(t),n.d(t,{default:function(){return w}});n(82320),n(9112),n(97060),n(60776),n(5684),n(23784),n(43924),n(93917),n(5960),n(76896),n(21300),n(46428),n(6200),n(87912),n(33768),n(90512),n(78504),n(77864),n(86744);var o=n(85668),a={title:"MspnjDVG",verifyCodeWrapper:"_1VUBnRXg",graphicCode:"_12TLxxj8",phoneCodeWrapper:"_2Hybtmv5",phoneCode:"_2M38NV2B",phoneCodeBtn:"_2YpNG0sM",disable:"_2TwW-wYQ",nextStep:"_1S5zfRly",verifyCodeItem:"_3Uez4HYS",loginType:"DZzsrHOj",phoneLogin:"_11CTgAgI",msgLogin:"_22Uvts4_",line:"_1GkTaSfI"},r=n(82724),i=n(82499),l=n(25128),c=n(71252),d=n.n(c),u=n(74800),s=n(10327),f=n(56284),p=n(82784),m=n(61076),y=n.n(m),g=n(57768),h=n(82100);function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function v(e,t,n){var o;return o=function(e,t){if("object"!=C(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=C(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==C(o)?o:String(o))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,a,r,i,l=[],c=!0,d=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(o=r.call(n)).done)&&(l.push(o.value),l.length!==t);c=!0);}catch(e){d=!0,a=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(d)throw a}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function w(e){var t=(0,o.useRef)(),n=b((0,o.useState)(0),2),c=n[0],m=n[1],C=b((0,o.useState)(!1),2),M=C[0],w=C[1],P=b((0,o.useState)(l.C.account),2),E=P[0],S=P[1],k=b((0,o.useState)(),2),I=k[0],G=k[1],N=b((0,o.useState)(),2),_=N[0],A=N[1],j=b((0,o.useState)(),2),T=j[0],D=j[1],x=e.dataCenter,L=e.currentAccountId,U=e.handleChangeDataCenter,R=b((0,o.useState)(y()),2),B=R[0],O=R[1],V=b((0,o.useState)(!0),2),F=(V[0],V[1],(0,o.useRef)());var W=function(e,t){"account"===e&&S(t),"phoneCode"===e&&G(t),"verifyCode"===e&&A(t)},H=E&&I?{}:{background:"#85B8FF"},Y=d()(v(v({},a.phoneCodeBtn,!0),a.disable,0!==c)),q=M?(0,p.yG)("login.key186"):(0,p.yG)("login.key187"),z=0===c?(0,p.yG)("login.key188"):(0,p.yG)({key:"login.key189",variables:{vCodeTime:c}}),K=function(){O(y()),i.CE({phone:l.C.account,v:(0,u.gV)(!1,8),language:l.C.lang}).then((function(t){var n=t.description_cn||t.description;if(n)return e.dataPipeModel&&e.dataPipeModel.sendData({type:"ShowErrorMessage",message:n}),!1;O(t.content||y()),D(t.loginId)}))},Q=function(e){s.q.setItem((0,s.iW)(g.EF),e?g.Af:g.GK),window.location.href="#kingdeeCloud"};return(0,o.useEffect)((function(){K()}),[]),o.createElement(f.c,e,o.createElement("div",{className:a.title},(0,p.yG)("login.key212")),o.createElement(r.k9,{name:"accountId",list:x,selectItem:L,onItemClick:U,dataPipeModel:e.dataPipeModel}),o.createElement(h.c,{telViaList:e.countryAreaCodes,onBlur:function(){E!==F.current&&(F.current=E,K())},dataPipeModel:e.dataPipeModel,defaultValue:l.C.account,onChange:W,name:"account",placeholder:(0,p.yG)("login.key191"),inputType:"phoneNumber"}),o.createElement("div",{className:a.verifyCodeItem},o.createElement(r.EF,{dataPipeModel:e.dataPipeModel,onChange:W,name:"verifyCode",placeholder:(0,p.yG)("login.key180"),style:{flexGrow:1,width:180,border:"none"}}),o.createElement("div",{className:a.graphicCode,onClick:K},o.createElement("img",{src:B}))),o.createElement("div",{className:a.phoneCodeWrapper},o.createElement(r.EF,{dataPipeModel:e.dataPipeModel,onChange:W,name:"phoneCode",placeholder:(0,p.yG)("login.key192"),style:{flexGrow:1,width:180,border:"none"}}),o.createElement("div",{className:a.phoneCode},o.createElement("div",{className:Y,onClick:function(){return 0===c&&(!!function(e){if(u.q4.isEmpty(l.C.account))return e.dataPipeModel&&e.dataPipeModel.sendData({type:"ShowErrorMessage",message:(0,p.yG)("login.key193")}),!1;return e.dataPipeModel&&e.dataPipeModel.sendData({type:"HideNotification"}),!0}({dataPipeModel:e.dataPipeModel})&&void i.Yf({useraccount:l.C.account,accountId:l.C.accountId,language:l.C.lang,loginid:T,verifycode:_}).then((function(n){if(n.success){var o=n.timeout||60;m(o),t.current=setInterval((function(){o<=0?clearInterval(t.current):m(--o)}),1e3)}else e.dataPipeModel&&e.dataPipeModel.sendData({type:"ShowErrorMessage",message:n.msg||n.description}),K()})))}},z))),o.createElement(r.q,{dataPipeModel:e.dataPipeModel,style:H,text:q,onClick:function(){!function(e){if(M)return!1;if(!E||!I||!_)return!1;w(!0);var t=l.C.account,n=l.C.accountId,o=l.C.phoneCode,a=(0,s.am)();a&&(a=decodeURIComponent(a)),i.gx({useraccount:t,accountId:n,smsCode:o,redirect:a||"mobile.html",needActive:!1,language:l.C.lang,loginid:T,verifycode:l.C.verifyCode}).then((function(t){var o=t.errorcode,a=t.needChangePwd,r=t.needChangeInitialPwd,i=t.message,c=t.needActive,d=t.msg;if(w(!1),c)return window.location.hash="#activeUser",!1;if(1===a||1===r)return window.location.hash="#findPassword",e.dataPipeModel&&e.dataPipeModel.sendData({type:"ShowErrorMessage",message:i}),!1;if(0!==o)return e.dataPipeModel&&e.dataPipeModel.sendData({type:"ShowErrorMessage",message:d}),!1;var u="#msgLogin"!==window.location.hash?window.location.hash:"";(0,s.Ub)(t.RedirectURL,u,l.C.dataCenter,n)})).catch((function(e){w(!1)}))}({dataPipeModel:e.dataPipeModel})}}),o.createElement("div",{className:a.loginType},o.createElement("div",{className:a.phoneLogin,onClick:function(){Q(!1)}}," ",(0,p.yG)("login.key213")),o.createElement("div",{className:a.line}),o.createElement("div",{className:a.phoneLogin,onClick:function(){Q(!0)}}," ",(0,p.yG)("login.key214"))))}}}]);