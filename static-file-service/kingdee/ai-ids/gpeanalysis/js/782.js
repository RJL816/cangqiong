(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[782],{29007:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return B}});var r=n(28683),a=n(70885),i=n(72791),o={text:"Home_text__FNtpT",container:"Home_container__dvuTP",h_100_percent:"Home_h_100_percent__wHiYi",loading:"Home_loading__XiXz3",center:"Home_center__b+m1k"},c=n(44357),l=n(41687),u=n(51628),f=n(87095),s=n(39339),d=n(61665),h=n(84017),m=n(93738),v=n(3027),g=n(64118),y=n(85616),p=n(35297),x=n(45687),b=n(71074),S=n(66398),A=n(94830),w=n(51446),N=(n(87577),n(42982)),E=function(t){return{xAxis:{name:t.xName,data:t.x||[],value:"category",nameTextStyle:{fontSize:12,fontWeight:"bold"},nameGap:24,nameLocation:"middle"},yAxis:{name:t.yName,value:"value",nameTextStyle:{fontSize:12,align:"left",fontWeight:"bold"},axisLabel:{fontSize:12,width:50,overflow:"truncate"}},series:[{type:"bar",data:t.y,itemStyle:{color:function(t){return z()[t.seriesIndex]}}}],title:(0,r.Z)({left:"center",text:t.title},j()),grid:D(),tooltip:(0,r.Z)((0,r.Z)({},H()),{},{trigger:"axis",axisPointer:{type:"shadow",label:{show:!0}},formatter:"".concat(t.xName,": {b0}<br />").concat(t.yName,": {c0}")}),legend:{},dataZoom:Z(t.x)}},C=function(t){var e=t.x&&t.x.length<11,n={name:t.xName,value:"category",nameTextStyle:{fontSize:12,fontWeight:"bold"},nameGap:24,nameLocation:"middle"},a={name:t.yName,value:"value",nameTextStyle:{fontSize:12,align:"left",fontWeight:"bold"},axisLabel:{fontSize:12,width:e?78:50,overflow:"truncate"}},i=D();e?(a.data=t.x||[],n.name=t.yName,a.name=t.xName,i.left=90):(n.data=t.x||[],n.name=t.xName,a.name=t.yName);var o={xAxis:n,yAxis:a,series:[{type:"bar",data:t.y,barWidth:"99.3%",itemStyle:{color:function(t){return z()[t.seriesIndex]}}}],title:(0,r.Z)({left:"center",text:t.title},j()),grid:i,tooltip:(0,r.Z)((0,r.Z)({},H()),{},{trigger:"axis",axisPointer:{type:"shadow",label:{show:!0}},formatter:"".concat(t.xName,": {b0}<br />").concat(t.yName,": {c0}")}),legend:{},dataZoom:Z(t.x)};return e&&delete o.dataZoom,o};var _=function(t,e,n){var r={interval:"auto",overflow:"auto",fontSize:12,formatter:function(t){return t}},a={show:!0,interval:0,overflow:"truncate",fontSize:12};if(null!=t&&t.current&&e>0){var i=(t.current.getWidth()-60-30)/e,o=i,c=function(t,e){var n=t.getModel().getComponent("xAxis");if(n){var r=n.axis.scale.getExtent();return e.slice.apply(e,(0,N.Z)(r))}return e}(t.current,n);if(c.length)o=function(t,e){var n=document.createElement("div");n.style.visibility="hidden",n.style.position="absolute",n.style.fontSize="".concat(e,"px"),n.innerHTML=t,document.body.appendChild(n);var r=n.offsetWidth||n.getBoundingClientRect().width;return document.body.removeChild(n),r}(c.reduce((function(t,e){return e.length>t.length?e:t}),""),12);return i<o?r:(a.width=i,a)}return r},D=function(){return{left:60,right:30,bottom:60,top:55}},Z=function(t){return(null==t?void 0:t.length)>10?[{show:!0,start:0,end:Math.floor(10/t.length*100),height:10,bottom:10,handleSize:"150%"},{type:"inside",start:0,end:100}]:[]},T=function(t){if(t.type){var e={bar:E,histogram:C};if(e[t.type])return e[t.type](t)}return{}},z=function(){return["#40a9ff","#45dad1","#73d13d","#ffc53d","#ffa940","#f57582","#9f69e2","#6682f5","#f273b5"]},H=function(){return{trigger:"axis",confine:!0,backgroundColor:"rgba(0, 0, 0, 0.6)",textStyle:{align:"left",fontSize:14,lineHeight:18,color:"#ffffff"},padding:8}},j=function(){return{textStyle:{color:"rgba(33,33,33,1)",fontSize:14},subtextStyle:{color:"#6E7079"}}},I=function(t){return Array.isArray(t)&&t.length>0},R=function(t){return"[object Object]"===Object.prototype.toString.call(t)&&Object.keys(t).length>0},k=function(t){if(Array.isArray(t)){if(t.length>0&&t[0].series)return!1}else if(null!=t&&t.series)return!1;return!0},L=n(51602),W=n(80184),O=(0,i.forwardRef)((function(t,e){(0,i.useImperativeHandle)(e,(function(){return{}}));var n=(new Date).getTime()+Math.random().toString(36).substring(2,15),r=(0,i.useState)([]),o=(0,a.Z)(r,2),c=o[0],l=o[1],u=(0,i.useRef)(null),f=(0,i.useRef)(null),s=(0,i.useRef)([]);(0,i.useEffect)((function(){var e,n;null!=t&&t.options&&c.length>0&&!u.current&&(s.current=(null==t||null===(e=t.options)||void 0===e||null===(n=e.xAxis)||void 0===n?void 0:n.data)||[],d(t.options))}),[t,c]);var d=function(e){var r=window.$echarts.init(document.getElementById(n),null,{width:c[0],height:c[1]});r.setOption(e),u.current=r,y(),u.current.on("dataZoom",(0,L.Ds)(v,300)),t.loadComplete()};(0,i.useLayoutEffect)((function(){var t;return t=f.current,new IntersectionObserver((function(t){t.forEach((function(t){t.isIntersecting&&h()}))})).observe(t),h(),window.addEventListener("resize",(0,L.Ds)(h,300)),function(){window.removeEventListener("resize",(0,L.Ds)(h,300)),u.current&&u.current.off("dataZoom",(0,L.Ds)(v,300))}}),[]);var h=function(){if(null!=f&&f.current){var t=[f.current.offsetWidth,f.current.offsetHeight],e=t[0],n=t[1];0===n&&(n=300),l([e,n]),u.current&&u.current.resize({width:e,height:n})}y()},m=function(t){if(u.current){var e=g();u.current.setOption({xAxis:{axisLabel:_(u,e,s.current)}})}},v=function(){g();m()},g=function(){var t=u.current.getModel().getComponent("xAxis");if(t){var e=t.axis.scale.getExtent(),n=s.current.length||1;return I(e)&&(n=e[1]-e[0]+1),n}return s.current.length},y=function(){m(s.current.length)};return(0,W.jsx)("div",{ref:f,style:{height:"100%"},children:(0,W.jsx)("div",{id:n})})}));O.displayName="EchartsContainer";var M=O,q={ECHARTS:"ECHARTS",D3:"D3"},P="data-ai-ids-control-mark",F="data-ai-ids-control-id";function B(t){t.model;var e=t.pluginPushData,n=(0,i.useState)([]),c=(0,a.Z)(n,2),l=c[0],u=c[1],f=(0,i.useState)(""),s=(0,a.Z)(f,2),d=s[0],h=s[1],m=(0,i.useState)(!0),v=(0,a.Z)(m,2),g=v[0],y=v[1],p=(0,i.useRef)(null);(0,i.useEffect)((function(){null!=e&&e.data&&h(e.data.containerId+e.data.pageId)}),[e]),(0,i.useEffect)((function(){if(""!==d){var t=[];if(k(e.data)){var n=e.data.data;function f(){var t=document.querySelectorAll("div[".concat(F,'="').concat(d,'"]'));return n.length===Array.from(t).length&&Array.from(t).every((function(t){return t.hasAttribute(P)&&t.getAttribute(P)}))}if(Array.isArray(n))var a=setInterval((function(){if(f()){clearInterval(a),a=null;var e=p.current.getAttribute(P),r=n.find((function(t){return t.uniqueId===e}));t=x(r),u(t)}else for(var i=document.querySelectorAll("div[".concat(F,'="').concat(d,'"]')),o=0;o<i.length;o++)i[o].setAttribute(P,n[o].uniqueId)}),300);else t=x(n)}else{var i,o,c=e.data;if((null==c||null===(i=c.chartConfig)||void 0===i?void 0:i.length)>0&&c.chartConfig.forEach((function(e,n){var a=(0,r.Z)({},e),i={};i.id=e.id,i.element=e.element,i.chartType=e.chartType,i.chartType?i.chartCategories=q.D3:i.chartCategories=q.ECHARTS,i.events=e.events,delete a.id,delete a.element,delete a.chartType,delete a.events,i.options=a,t[n]=i})),(null==c||null===(o=c.layout)||void 0===o?void 0:o.length)>0&&c.chartConfig.forEach((function(t,e){console.log("多图表布局",t,e)})),I(null==c?void 0:c.chartData)||R(null==c?void 0:c.chartData)){var l=Array.isArray(c.chartData);t.forEach((function(t){t.options.series.forEach((function(e,n){var a="",i=null;null!=c&&c.chartData[0]&&(i=(0,r.Z)({},null==c?void 0:c.chartData[0]));var o=[];if(l)a=e.dataFrom,c.chartData.forEach((function(t){o.push(t[a])})),t.options.xAxis.data=o,e.data=c.chartData||[],delete i[a],i=Object.keys(i),e.dimensions=[{name:"name",type:"ordinal"},{name:i[n],type:"ordinal"}],e.encode={x:a,y:[i[n]]};else{var u=[(a=e.dataFrom.split("."))[0],a[1]],f=u[0],s=u[1];c.chartData[f].forEach((function(t){o.push(t[s])})),t.options.xAxis.data=o,e.data=c.chartData[f]}}))}))}u(t)}}}),[d]);var x=function(t){var e=[],n=T(t);return e.push({chartCategories:q.ECHARTS,options:n}),e},b=function(){var t=null;return l.forEach((function(e){e.chartCategories===q.ECHARTS&&R(e.options)&&(t=(0,W.jsx)(M,{options:e.options,loadComplete:S})),e.chartCategories,q.D3})),t};(0,i.useEffect)((function(){b()}),[l]);var S=function(){y(!1)};return(0,W.jsxs)("div",{id:"echartsCanvas",ref:p,className:"".concat(o.h_100_percent," ").concat(o.container),"data-ai-ids-control-id":d,children:[g&&(0,W.jsx)("div",{className:o.loading,children:(0,W.jsx)("div",{className:o.center,children:(0,W.jsx)(w.Z,{name:"Spin"})})}),b()]})}c.D([d.N,h.N,m.N,v.N,g.N,x.T,b.z,S.N,u.N,f.N,s.N,y.N,p.N,A.N]),window.$echarts=l},24654:function(){}}]);