// Build date: 2025/3/5 09:49:37
 // Version: 0.0.0
 /*! For license information please see chunk.bundle.c9b35b97.js.LICENSE.txt */
(self.webpackChunkreact_flow_plan=self.webpackChunkreact_flow_plan||[]).push([[23],{12159:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Bc}});var r=n(14552),o=(n(7058),n(97567),n(88845)),a="gaiFlow-App-lWcG_",i="loading-App-eo1zu",l="loadingImg-App-saSOQ",c=n.p+"ai-gai-gpt-flow/assets/loading.f2c0a6b4.gif",u=(n(36063),n(91827),n(42479),n(31240),n(59252),n(30940),n(77416),n(87736),n(84495),n(25802),n(45084),n(37623),n(78864),n(46112),n(45005),n(61513)),d=n(26897),s=n(28700);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){var r;return r=function(e,t){if("object"!=f(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==f(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(){return(0,r.useContext)(s.P)}var g,h,b=function(e,t){var n,o=(0,r.useContext)(s.P);if(!o)throw new Error("Missing StoreProvider");return void 0===(null===(n=t)||void 0===n?void 0:n.shallow)&&(t=p(p({},t),{},{shallow:!0})),(0,u.Pj)(o,t.shallow?(0,d.k)(e):e)},E=(n(83814),n(67783)),C={content:"content-index-WpJGy",mainFlow:"mainFlow-index-k4LWw",mr0:"mr0-index-LOd_i",gaiFlow:"gaiFlow-index-dxnN1",flowContent:"flowContent-index-CiHWN",hidden:"hidden-index-SnIBR"},w=(n(46942),n(72074),n(73730),n(39990),n(82752),n(4656),n(23315),n(801),n(31778)),O=n(43687),A=n(53870),L=n.n(A),S=["svgRef","title"];function N(){return N=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},N.apply(this,arguments)}function x(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var j,P=function(e){var t=e.svgRef,n=e.title,o=x(e,S);return r.createElement("svg",N({width:"16px",height:"16px",viewBox:"0 0 16 16",ref:t},o),void 0===n?g||(g=r.createElement("title",null,"自适应")):n?r.createElement("title",null,n):null,h||(h=r.createElement("g",{id:"\\u9875\\u9762-1",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},r.createElement("g",{id:"\\u4EFB\\u52A1\\u6D41-\\u57FA\\u7840",transform:"translate(-82, -1033)",fill:"#979797",fillRule:"nonzero"},r.createElement("g",{id:"\\u7F16\\u7EC4-8",transform:"translate(50, 95)"},r.createElement("path",{d:"M33,948 L33,952.5 C33,952.776142 33.2238576,953 33.5,953 L37,952.999 L37,954 L33,954 C32.4477153,954 32,953.552285 32,953 L32,948 L33,948 Z M48,948 L48,953 C48,953.552285 47.5522847,954 47,954 L43,954 L43,952.999 L46.5,953 C46.7761424,953 47,952.776142 47,952.5 L46.999,948 L48,948 Z M44,941 C44.5522847,941 45,941.447715 45,942 L45,950 C45,950.552285 44.5522847,951 44,951 L36,951 C35.4477153,951 35,950.552285 35,950 L35,942 C35,941.447715 35.4477153,941 36,941 L44,941 Z M43.5,942 L36.5,942 C36.2238576,942 36,942.223858 36,942.5 L36,949.5 C36,949.776142 36.2238576,950 36.5,950 L43.5,950 C43.7761424,950 44,949.776142 44,949.5 L44,942.5 C44,942.223858 43.7761424,942 43.5,942 Z M37,938 L37,939 L33.5,939 C33.2238576,939 33,939.223858 33,939.5 L33,943 L32,943 L32,939 C32,938.447715 32.4477153,938 33,938 L37,938 Z M47,938 C47.5522847,938 48,938.447715 48,939 L48,943 L46.999,943 L47,939.5 C47,939.223858 46.7761424,939 46.5,939 L43,939 L43,938 L47,938 Z",id:"\\u81EA\\u9002\\u5E94"}))))))},I=r.forwardRef((function(e,t){return r.createElement(P,N({svgRef:t},e))})),k=["svgRef","title"];function F(){return F=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},F.apply(this,arguments)}function D(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var M,R=function(e){var t=e.svgRef,n=e.title,o=D(e,k);return r.createElement("svg",F({width:"16px",height:"16px",viewBox:"0 0 16 16",ref:t},o),n?r.createElement("title",null,n):null,j||(j=r.createElement("g",{id:"\\u9875\\u9762-1",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},r.createElement("g",{id:"\\u4EFB\\u52A1\\u6D41-\\u57FA\\u7840",transform:"translate(-243, -1033)",fill:"#666666",fillRule:"nonzero"},r.createElement("g",{id:"\\u7F16\\u7EC4-8",transform:"translate(50, 95)"},r.createElement("path",{d:"M208,938 C208.552285,938 209,938.447715 209,939 L209,953 C209,953.552285 208.552285,954 208,954 L194,954 C193.447715,954 193,953.552285 193,953 L193,939 C193,938.447715 193.447715,938 194,938 L208,938 Z M207.5,939 L194.5,939 C194.223858,939 194,939.223858 194,939.5 L194,952.5 C194,952.776142 194.223858,953 194.5,953 L207.5,953 C207.776142,953 208,952.776142 208,952.5 L208,939.5 C208,939.223858 207.776142,939 207.5,939 Z M201,941 C201.278539,941 201.5,941.182094 201.5,941.415402 L201.5,945.5 L205.599195,945.5 C205.822474,945.5 206,945.719178 206,946 C205.99817,946.278539 205.822474,946.5 205.599195,946.5 L201.5,946.5 L201.5,950.584598 C201.497717,950.800835 201.278539,951 201,951 C200.721461,951 200.5,950.817906 200.5,950.584598 L200.5,946.5 L196.398975,946.5 C196.175695,946.5 196,946.280822 196,946 C196,945.721461 196.175695,945.5 196.398975,945.5 L200.5,945.5 L200.5,941.415402 C200.5,941.183991 200.719178,941 201,941 Z",id:"\\u653E\\u5927"}))))))},T=r.forwardRef((function(e,t){return r.createElement(R,F({svgRef:t},e))})),H=["svgRef","title"];function V(){return V=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},V.apply(this,arguments)}function _(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var B=function(e){var t=e.svgRef,n=e.title,o=_(e,H);return r.createElement("svg",V({width:"16px",height:"16px",viewBox:"0 0 16 16",ref:t},o),n?r.createElement("title",null,n):null,M||(M=r.createElement("g",{id:"\\u9875\\u9762-1",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},r.createElement("g",{id:"\\u4EFB\\u52A1\\u6D41-\\u57FA\\u7840",transform:"translate(-182, -1033)",fill:"#666666",fillRule:"nonzero"},r.createElement("g",{id:"\\u7F16\\u7EC4-8",transform:"translate(50, 95)"},r.createElement("path",{d:"M147,938 C147.552285,938 148,938.447715 148,939 L148,953 C148,953.552285 147.552285,954 147,954 L133,954 C132.447715,954 132,953.552285 132,953 L132,939 C132,938.447715 132.447715,938 133,938 L147,938 Z M146.5,939 L133.5,939 C133.223858,939 133,939.223858 133,939.5 L133,952.5 C133,952.776142 133.223858,953 133.5,953 L146.5,953 C146.776142,953 147,952.776142 147,952.5 L147,939.5 C147,939.223858 146.776142,939 146.5,939 Z M144.599195,945.5 C144.822474,945.5 145,945.719178 145,946 C144.99817,946.278539 144.822474,946.5 144.599195,946.5 L135.398975,946.5 C135.175695,946.5 135,946.280822 135,946 C135,945.721461 135.175695,945.5 135.398975,945.5 L144.599195,945.5 Z",id:"\\u7F29\\u5C0F"}))))))},U=r.forwardRef((function(e,t){return r.createElement(B,V({svgRef:t},e))})),W=(n(68965),n(13016),n(34523),n(30630),n(64023),n(23110)),Z=function(e){return e.Condition="Condition",e}({});function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}var G,X,Y,K,J=(G={},X=Z.Condition,Y={type:Z.Condition,backendId:"6"},K=function(e,t){if("object"!=z(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=z(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(X,"string"),(X="symbol"==z(K)?K:String(K))in G?Object.defineProperty(G,X,{value:Y,enumerable:!0,configurable:!0,writable:!0}):G[X]=Y,G),Q=n(70552),q=(n(42900),n(46229)),$=n.n(q),ee=n(58994),te=5;function ne(){var e=(0,E.PI)(),t=(0,r.useCallback)((function(t,n,r){var o=(0,e.getState().getNodes)(),a={x:void 0,y:void 0};if(n.parentNode){var i=function(e,t,n){var r=e.querySelectorAll('[class*="react-flow__node"][data-id="'.concat(t,'"][data-testid="rf__node-').concat(t,'"]'));if(r&&r.length){var o=r[0],a=o.querySelectorAll('[class*="react-flow__background"]')[0];if(o&&a){var i=null==o?void 0:o.getBoundingClientRect(),l=null==a?void 0:a.getBoundingClientRect();return{top:(l.top-i.top)/n+te,left:(l.left-i.left)/n+te,right:(i.right-l.right)/n+te,bottom:(i.bottom-l.bottom)/n+te}}return{top:Q.gi.top,left:Q.gi.left,right:Q.gi.right,bottom:Q.gi.bottom}}}(t,n.parentNode,r),l=o.find((function(e){return e.id===n.parentNode}));l&&(n.position.y<i.top&&(a.y=i.top),n.position.x<i.left&&(a.x=i.left),n.position.y+n.data.height>l.data.height-i.bottom&&(a.y=l.data.height-i.bottom-n.data.height),n.position.x+n.data.width>l.data.width-i.right&&(a.x=l.data.width-i.right-n.data.width))}return{restrictPos:a}}),[e]),n=(0,r.useCallback)((function(t){var n=(0,e.getState)(),r=n.getNodes,o=n.setNodes,a=r(),i=a.find((function(e){return e.id===t})),l=(0,ee.ID)(a,t),c=l.rightNode,u=l.bottomNode,d=c&&i.width<c.position.x+c.width,s=u&&i.height<u.position.y+u.height;(d||s)&&o((0,W.jM)(a,(function(e){e.forEach((function(e){if(e.id===t){var n=0,r=0;d&&(n=c.position.x+c.width+Q.gi.right),s&&(r=u.position.y+u.height+Q.gi.bottom+30);var o=e.data;n>0&&(e.width=n,o.width=n),r>0&&(e.height=r,o.height=r)}}))})))}),[e]);return{handleNodeIterationChildDrag:t,handleNodeIterationChildSizeChange:(0,r.useCallback)((function(t){var r=(0,(0,e.getState)().getNodes)().find((function(e){return e.id===t}));null!=r&&r.parentNode&&n(null==r?void 0:r.parentNode)}),[e,n])}}var re={wrapper:"wrapper-baseNode-o9fwM",showBorder:"showBorder-baseNode-GWaQc",errorBorder:"errorBorder-baseNode-Hm3aj",content:"content-baseNode-C0fXi",iterationBorder:"iterationBorder-baseNode-p6Uhs",error:"error-baseNode-V11Jc",errorText:"errorText-baseNode-U0A8Z",resizeWrapper:"resizeWrapper-baseNode-_VlyM",icon:"icon-baseNode-rzJNp"},oe=(n(71145),n(2268)),ae=(0,r.createContext)(null);function ie(e){var t=e.children,n=(0,r.useRef)();return n.current||(n.current=(0,oe.y)((function(e){return{helpLineHorizontal:void 0,setHelpLineHorizontal:function(t){return e((function(){return{helpLineHorizontal:t}}))},helpLineVertical:void 0,setHelpLineVertical:function(t){return e((function(){return{helpLineVertical:t}}))},connectingParams:void 0,setConnectingParams:function(t){return e((function(e){return t?{connectingParams:ue(ue({},e.connectingParams),t)}:{connectingParams:void 0}}))},hoverEdge:void 0,setHoverEdge:function(t){return e((function(){return{hoverEdge:t}}))},selectedEdges:[],setSelectedEdge:function(t){return e((function(){return{selectedEdges:t}}))}}}))),r.createElement(ae.Provider,{value:n.current},t)}function le(e){return le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},le(e)}function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){de(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function de(e,t,n){return t=function(e){var t=function(e,t){if("object"!=le(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=le(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==le(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function se(e,t){var n,o=(0,r.useContext)(ae);if(!o)throw new Error("Missing GaiWorkflowContext.Provider in the tree");return void 0===(null===(n=t)||void 0===n?void 0:n.shallow)&&(t=ue(ue({},t),{},{shallow:!0})),(0,u.Pj)(o,t.shallow?(0,d.k)(e):e)}function fe(){return(0,r.useContext)(ae)}var me={sourceHandle:"sourceHandle-index-dJ30k",targetHandle:"targetHandle-index-m7dnZ",show:"show-index-wxeuF",isConnected:"isConnected-index-X3E2R",hoverEdge:"hoverEdge-index-yuD0J",handle:"handle-index-YdNkV",default:"default-index-AA5dV",selectedEdge:"selectedEdge-index-gDIoQ",handleHover:"handleHover-index-WICD3",hover:"hover-index-SNKEs"};function pe(e){return pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pe(e)}function ve(){return ve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ve.apply(this,arguments)}function ye(e,t,n){return t=function(e){var t=function(e,t){if("object"!=pe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=pe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==pe(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return he(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return he(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function he(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function be(e){var t=e.showHandle,n=e.position,o=e.connected,a=e.nodeId,i=se((function(e){return{hoverEdge:e.hoverEdge,selectedEdges:e.selectedEdges}})),l=i.hoverEdge,c=i.selectedEdges,u=ge((0,r.useState)(!1),2),d=u[0],s=u[1],f={};return"top"!==n&&"bottom"!==n||(f.left="50%"),r.createElement(E.h7,ve({type:"source",className:$()(me.sourceHandle,ye(ye(ye(ye(ye({},me.show,t),me.handleHover,d),me.isConnected,!!o),me.hoverEdge,(null==l?void 0:l.source)===a&&(null==l?void 0:l.sourceHandle)===n),me.selectedEdge,null==c?void 0:c.find((function(e){return e.source===a&&e.sourceHandle===n})))),onMouseEnter:function(){return s(!0)},onMouseLeave:function(){return s(!1)}},L()(e,"showHandle","nodeId"),{style:f}),r.createElement("div",{className:$()(me.handle)},r.createElement("div",{className:me.default}),r.createElement("div",{className:me.hover},"+")))}function Ee(e){var t=e.showHandle,n=e.position,o=e.connected,a=e.nodeId,i=se((function(e){return{hoverEdge:e.hoverEdge,selectedEdges:e.selectedEdges}})),l=i.hoverEdge,c=i.selectedEdges,u=ge((0,r.useState)(!1),2),d=u[0],s=u[1],f={};return"top"!==n&&"bottom"!==n||(f.left=""),r.createElement(E.h7,ve({type:"target",className:$()(me.targetHandle,ye(ye(ye(ye(ye({},me.show,t),me.handleHover,d),me.isConnected,!!o),me.hoverEdge,(null==l?void 0:l.target)===a&&(null==l?void 0:l.targetHandle)===n),me.selectedEdge,null==c?void 0:c.find((function(e){return e.target===a&&e.targetHandle===n})))),onMouseEnter:function(){return s(!0)},onMouseLeave:function(){return s(!1)}},L()(e,"showHandle","nodeId"),{style:f}),r.createElement("div",{className:me.handle},r.createElement("div",{className:me.default}),r.createElement("div",{className:me.hover},"+")))}var Ce,we,Oe=["svgRef","title"];function Ae(){return Ae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ae.apply(this,arguments)}function Le(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Se,Ne,xe=function(e){var t=e.svgRef,n=e.title,o=Le(e,Oe);return r.createElement("svg",Ae({width:"32px",height:"32px",viewBox:"0 0 32 32",ref:t},o),void 0===n?Ce||(Ce=r.createElement("title",null,"图标/用户澄清")):n?r.createElement("title",null,n):null,we||(we=r.createElement("g",{id:"\\u56FE\\u6807/\\u7528\\u6237\\u6F84\\u6E05",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},r.createElement("g",{id:"\\u7F16\\u7EC4",transform:"translate(1, 1)",fill:"#FFFFFF",fillRule:"nonzero"},r.createElement("path",{d:"M15,0 C23.2842712,0 30,6.71572875 30,15 C30,23.2842712 23.2842712,30 15,30 C12.9052053,30 10.9107035,29.5705947 9.09971551,28.7950046 C8.86498416,28.6944764 6.27817419,29.0961416 1.33928571,30 L1.56110074,26.6863034 C1.74655581,23.7013755 1.79333211,22.1211089 1.70142963,21.9455037 C0.614649394,19.8689072 0,17.5062331 0,15 C0,6.71572875 6.71572875,0 15,0 Z M14.4642857,20.3571429 C13.5766852,20.3571429 12.8571429,21.0766852 12.8571429,21.9642857 C12.8571429,22.5384626 13.1634626,23.0690238 13.6607143,23.3561123 C14.157966,23.6432007 14.7706054,23.6432007 15.2678571,23.3561123 C15.7651089,23.0690238 16.0714286,22.5384626 16.0714286,21.9642857 C16.0714286,21.0766852 15.3518862,20.3571429 14.4642857,20.3571429 Z M17.829169,7.94549523 C15.7951745,5.87511593 12.5614114,5.9310277 10.5926383,8.07047445 L9.94800912,8.77266031 L9.85163798,8.89288906 C9.54321933,9.33784683 9.57704733,9.97116322 9.94952592,10.3743676 C10.3575383,10.8167282 11.0188518,10.8150837 11.4268642,10.3727231 L12.07301,9.6705373 L12.2539465,9.4901761 C13.4372577,8.39673861 15.2515625,8.42837544 16.4018843,9.59818094 L16.4464395,9.64360917 L16.5414275,9.74782704 L16.6881037,9.92619974 C17.4419444,10.9301552 17.356441,12.3795948 16.4564881,13.2801343 L16.4003675,13.3409794 L16.1995845,13.5440707 L16.0060062,13.7241393 L15.7072016,13.9790312 L15.0019015,14.5397931 L14.590555,14.8966465 C14.2328969,15.227313 13.9858793,15.5339887 13.7778645,15.9046977 C13.4259729,16.5312383 13.2560941,17.2630244 13.2560941,18.1526791 C13.2560941,18.7792196 13.7247775,19.2857143 14.3011517,19.2857143 C14.877526,19.2857143 15.3446925,18.7775751 15.3446925,18.1526791 C15.3446925,17.6757848 15.4144642,17.3436031 15.5615912,17.0821335 L15.6224518,16.9828489 L15.6893795,16.8905535 L15.7800068,16.7828411 L15.91955,16.6414173 L16.1227978,16.4588819 L16.8857353,15.8504305 L17.195418,15.5916587 C17.412056,15.405192 17.602032,15.2263565 17.7851825,15.0364211 L17.9262425,14.8884194 C19.6963183,13.0581317 19.7448551,10.0553417 18.0309,8.16091995 Z",id:"\\u5F62\\u72B6"})))))},je=r.forwardRef((function(e,t){return r.createElement(xe,Ae({svgRef:t},e))})),Pe=["svgRef","title"];function Ie(){return Ie=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ie.apply(this,arguments)}function ke(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Fe,De,Me=function(e){var t=e.svgRef,n=e.title,o=ke(e,Pe);return r.createElement("svg",Ie({width:"32px",height:"32px",viewBox:"0 0 32 32",ref:t},o),void 0===n?Se||(Se=r.createElement("title",null,"图标/终止循环")):n?r.createElement("title",null,n):null,Ne||(Ne=r.createElement("g",{id:"\\u56FE\\u6807/\\u7EC8\\u6B62\\u5FAA\\u73AF",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},r.createElement("path",{d:"M16,1 C20.0314555,1 23.8123545,2.59918831 26.6065809,5.39339932 C29.4008036,8.18765287 31,11.968551 31,16 C31,20.0314542 29.4007994,23.8123545 26.6065769,26.6065769 C23.8123545,29.4007994 20.0314542,31 16,31 C11.968551,31 8.18765287,29.4008036 5.3933932,26.6065748 C2.59918831,23.8123545 1,20.0314555 1,16 C1,11.9685497 2.59918407,8.18765274 5.39340139,5.39338912 C8.18765274,2.59918407 11.9685497,1 16,1 Z M24.5,14.75 L7.5,14.75 C6.67157288,14.75 6,15.4215729 6,16.25 C6,17.0784271 6.67157288,17.75 7.5,17.75 L24.5,17.75 C25.3284271,17.75 26,17.0784271 26,16.25 C26,15.4215729 25.3284271,14.75 24.5,14.75 Z",id:"\\u5F62\\u72B6\\u7ED3\\u5408",fill:"#FFFFFF",fillRule:"nonzero"}))))},Re=r.forwardRef((function(e,t){return r.createElement(Me,Ie({svgRef:t},e))})),Te=["svgRef","title"];function He(){return He=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},He.apply(this,arguments)}function Ve(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var _e,Be,Ue=function(e){var t=e.svgRef,n=e.title,o=Ve(e,Te);return r.createElement("svg",He({width:"32px",height:"32px",viewBox:"0 0 32 32",ref:t},o),void 0===n?Fe||(Fe=r.createElement("title",null,"图标/代码")):n?r.createElement("title",null,n):null,De||(De=r.createElement("g",{id:"\\u56FE\\u6807/\\u4EE3\\u7801",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},r.createElement("path",{d:"M25.9811321,2.48118586 C26.6603774,3.0649943 27.2012579,3.55758267 27.6037736,3.95895097 C28.0062893,4.36031927 28.3144654,4.70087419 28.5283019,4.98061574 C28.7421384,5.26035728 28.8742138,5.49752946 28.9245283,5.69213227 C28.9748428,5.88673508 29,6.05701254 29,6.20296465 L29,6.78677309 L23.4528302,6.78677309 C23.1761006,6.78677309 22.9433962,6.69555302 22.754717,6.51311288 C22.5660377,6.33067275 22.408805,6.11782592 22.2830189,5.87457241 C22.1572327,5.63131889 22.0628931,5.38198404 22,5.12656784 C21.9371069,4.87115165 21.9056604,4.65830483 21.9056604,4.48802737 L21.9056604,0 L21.9811321,0 C22.2075472,0 22.4213836,0.0243253516 22.6226415,0.0729760547 C22.8238994,0.121626758 23.0691824,0.237172178 23.3584906,0.419612315 C23.6477987,0.602052452 24,0.857468643 24.4150943,1.18586089 C24.8301887,1.51425314 25.3522013,1.94602813 25.9811321,2.48118586 L25.9811321,2.48118586 Z M19.5283019,4.56100342 C19.5283019,5.0231851 19.6037736,5.52185481 19.754717,6.05701254 C19.9056604,6.59217028 20.1446541,7.08475865 20.4716981,7.53477765 C20.7987421,7.98479666 21.2138365,8.3618396 21.7169811,8.6659065 C22.2201258,8.96997339 22.8113208,9.12200684 23.490566,9.12200684 L29,9.12200684 L29,27.4025086 C29,28.1079437 28.8553459,28.7404029 28.5660377,29.299886 C28.2767296,29.8593691 27.8930818,30.3397948 27.4150943,30.7411631 C26.9371069,31.1425314 26.408805,31.4526796 25.8301887,31.6716078 C25.2515723,31.8905359 24.6855346,32 24.1320755,32 L7.86792453,32 C7.38993711,32 6.86792453,31.8662106 6.30188679,31.5986317 C5.73584906,31.3310528 5.20754717,30.9783352 4.71698113,30.5404789 C4.22641509,30.1026226 3.81761006,29.5978715 3.49056604,29.0262258 C3.16352201,28.45458 3,27.8646902 3,27.2565564 L3,4.70695553 C3,4.19612315 3.12578616,3.66096541 3.37735849,3.10148233 C3.62893082,2.54199924 3.96226415,2.03724819 4.37735849,1.58722919 C4.79245283,1.13721019 5.26415094,0.760167237 5.79245283,0.456100342 C6.32075472,0.152033447 6.87421384,0 7.45283019,0 L19.5283019,0 L19.5283019,4.56100342 L19.5283019,4.56100342 Z M16.509434,21.0171038 C16.8113208,20.7251995 16.9748428,20.3359939 17,19.8494869 C17.0251572,19.3629799 16.8867925,18.9859369 16.5849057,18.718358 L10.3962264,12.6978335 C10.0943396,12.4059293 9.72327044,12.2599772 9.28301887,12.2599772 C8.8427673,12.2599772 8.47169811,12.4059293 8.16981132,12.6978335 C7.86792453,13.0140631 7.71698113,13.3850247 7.71698113,13.8107184 C7.71698113,14.236412 7.86792453,14.5952109 8.16981132,14.8871152 L13.2264151,19.8494869 L8.16981132,24.7753706 C7.86792453,25.0672748 7.71698113,25.4260737 7.71698113,25.8517674 C7.71698113,26.277461 7.86792453,26.6484227 8.16981132,26.9646522 C8.47169811,27.2565564 8.8427673,27.4025086 9.28301887,27.4025086 C9.72327044,27.4025086 10.0943396,27.2565564 10.3962264,26.9646522 L16.509434,21.0171038 Z M24.245283,25.0672748 L17.1509434,25.0672748 L17.1509434,27.3660205 L24.245283,27.3660205 L24.245283,25.0672748 L24.245283,25.0672748 Z",id:"\\u5F62\\u72B6",fill:"#FFFFFF",fillRule:"nonzero"}))))},We=r.forwardRef((function(e,t){return r.createElement(Ue,He({svgRef:t},e))})),Ze=["svgRef","title"];function ze(){return ze=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ze.apply(this,arguments)}function Ge(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Xe,Ye,Ke=function(e){var t=e.svgRef,n=e.title,o=Ge(e,Ze);return r.createElement("svg",ze({width:"32px",height:"32px",viewBox:"0 0 32 32",ref:t},o),void 0===n?_e||(_e=r.createElement("title",null,"图标/自定义操作")):n?r.createElement("title",null,n):null,Be||(Be=r.createElement("g",{id:"\\u56FE\\u6807/\\u81EA\\u5B9A\\u4E49\\u64CD\\u4F5C",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},r.createElement("path",{d:"M4,2 L13,2 C14.1045695,2 15,2.8954305 15,4 L15,13 C15,14.1045695 14.1045695,15 13,15 L4,15 C2.8954305,15 2,14.1045695 2,13 L2,4 C2,2.9456382 2.81587779,2.08183488 3.85073766,2.00548574 L4,2 Z M4,17 L13,17 C14.1045695,17 15,17.8954305 15,19 L15,28 C15,29.1045695 14.1045695,30 13,30 L4,30 C2.8954305,30 2,29.1045695 2,28 L2,19 C2,17.9456382 2.81587779,17.0818349 3.85073766,17.0054857 L4,17 Z M23.5,17 C24.0522847,17 24.5,17.4477153 24.5,18 L24.5,22.5 L29,22.5 C29.5522847,22.5 30,22.9477153 30,23.5 C30,24.0522847 29.5522847,24.5 29,24.5 L24.5,24.5 L24.5,29 C24.5,29.5522847 24.0522847,30 23.5,30 C22.9477153,30 22.5,29.5522847 22.5,29 L22.5,24.5 L18,24.5 C17.4477153,24.5 17,24.0522847 17,23.5 C17,22.9477153 17.4477153,22.5 18,22.5 L22.5,22.5 L22.5,18 C22.5,17.4477153 22.9477153,17 23.5,17 Z M19,2 L28,2 C29.1045695,2 30,2.8954305 30,4 L30,13 C30,14.1045695 29.1045695,15 28,15 L19,15 C17.8954305,15 17,14.1045695 17,13 L17,4 C17,2.8954305 17.8954305,2 19,2 Z",id:"\\u5F62\\u72B6",fill:"#FFFFFF"}))))},Je=r.forwardRef((function(e,t){return r.createElement(Ke,ze({svgRef:t},e))})),Qe=["svgRef","title"];function qe(){return qe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qe.apply(this,arguments)}function $e(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var et,tt,nt=function(e){var t=e.svgRef,n=e.title,o=$e(e,Qe);return r.createElement("svg",qe({width:"32px",height:"32px",viewBox:"0 0 32 32",ref:t},o),void 0===n?Xe||(Xe=r.createElement("title",null,"图标/提示")):n?r.createElement("title",null,n):null,Ye||(Ye=r.createElement("g",{id:"\\u56FE\\u6807/\\u63D0\\u793A",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},r.createElement("g",{id:"\\u7F16\\u7EC4",transform:"translate(1, 1)",fill:"#FFFFFF",fillRule:"nonzero"},r.createElement("path",{d:"M15,0 C19.0314555,0 22.8123545,1.59918831 25.6065809,4.39339932 C28.4008036,7.18765287 30,10.968551 30,15 C30,19.0314542 28.4007994,22.8123545 25.6065769,25.6065769 C22.8123545,28.4007994 19.0314542,30 15,30 C10.968551,30 7.18765287,28.4008036 4.3933932,25.6065748 C1.59918831,22.8123545 0,19.0314555 0,15 C0,10.9685497 1.59918407,7.18765274 4.39340139,4.39338912 C7.18765274,1.59918407 10.9685497,0 15,0 Z M15.3488372,11.1627907 L13.9534884,11.1627907 C13.375516,11.1627907 12.9069768,11.63133 12.9069768,12.2093023 L12.9238375,12.3974141 C13.0124476,12.8856102 13.4397351,13.255814 13.9534884,13.255814 L14.3009303,13.255814 L14.301628,20.9281396 L12.9069768,20.9302326 C12.3290044,20.9302326 11.8604651,21.3987718 11.8604651,21.9767442 C11.8604651,22.5547167 12.3290044,23.0232559 12.9069768,23.0232559 L15.3272093,23.0211628 L15.3488372,23.0232559 L17.7906977,23.0232559 C18.3686701,23.0232559 18.8372093,22.5547167 18.8372093,21.9767442 C18.8372093,21.3987718 18.3686701,20.9302326 17.7906977,20.9302326 L16.3946512,20.9281396 L16.3953489,12.2093023 C16.3953489,11.63133 15.9268097,11.1627907 15.3488372,11.1627907 Z M15,5.93023257 C14.036721,5.93023257 13.255814,6.71113954 13.255814,7.67441863 C13.255814,8.6376977 14.036721,9.41860467 15,9.41860467 C15.9632791,9.41860467 16.7441861,8.6376977 16.7441861,7.67441863 C16.7441861,6.71113954 15.9632791,5.93023257 15,5.93023257 Z",id:"\\u5F62\\u72B6"})))))},rt=r.forwardRef((function(e,t){return r.createElement(nt,qe({svgRef:t},e))})),ot=["svgRef","title"];function at(){return at=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},at.apply(this,arguments)}function it(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var lt,ct,ut=function(e){var t=e.svgRef,n=e.title,o=it(e,ot);return r.createElement("svg",at({width:"32px",height:"32px",viewBox:"0 0 32 32",ref:t},o),void 0===n?et||(et=r.createElement("title",null,"图标/消息")):n?r.createElement("title",null,n):null,tt||(tt=r.createElement("g",{id:"\\u56FE\\u6807/\\u6D88\\u606F",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},r.createElement("g",{id:"\\u7F16\\u7EC4",transform:"translate(1, 1)",fill:"#FFFFFF",fillRule:"nonzero"},r.createElement("path",{d:"M15.0000139,0 C23.284281,0 30,6.71572527 30,15 C30,23.2842747 23.284281,30 15.0000139,30 L1.04651067,30 C0.468538788,30 0,29.5314608 0,28.9534883 L0,15 C0,6.71572998 6.71574223,0 15.0000139,0 Z M14.9999442,20.9302326 L8.02320646,20.9302326 C7.44523461,20.9302326 6.97669582,21.3987718 6.97669582,21.9767442 C6.97669582,22.5547167 7.44523461,23.0232559 8.02320646,23.0232559 L14.9999442,23.0232559 C15.577916,23.0232559 16.0464548,22.5547167 16.0464548,21.9767442 C16.0464548,21.3987718 15.577916,20.9302326 14.9999442,20.9302326 Z M20.5813343,15.3488372 L8.02320646,15.3488372 C7.44523461,15.3488372 6.97669582,15.8173765 6.97669582,16.3953489 C6.97669582,16.9733213 7.44523461,17.4418605 8.02320646,17.4418605 L20.5813343,17.4418605 C21.1593062,17.4418605 21.6278449,16.9733213 21.6278449,16.3953489 C21.6278449,15.8173765 21.1593062,15.3488372 20.5813343,15.3488372 Z M20.5813343,9.7674419 L8.02320646,9.7674419 C7.44523461,9.7674419 6.97669582,10.2359811 6.97669582,10.8139535 C6.97669582,11.3919259 7.44523461,11.8604651 8.02320646,11.8604651 L20.5813343,11.8604651 C21.1593062,11.8604651 21.6278449,11.3919259 21.6278449,10.8139535 C21.6278449,10.2359811 21.1593062,9.7674419 20.5813343,9.7674419 Z",id:"\\u5F62\\u72B6"})))))},dt=r.forwardRef((function(e,t){return r.createElement(ut,at({svgRef:t},e))})),st=["svgRef","title"];function ft(){return ft=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ft.apply(this,arguments)}function mt(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var pt,vt,yt=function(e){var t=e.svgRef,n=e.title,o=mt(e,st);return r.createElement("svg",ft({width:"32px",height:"32px",viewBox:"0 0 32 32",ref:t},o),void 0===n?lt||(lt=r.createElement("title",null,"图标/开始")):n?r.createElement("title",null,n):null,ct||(ct=r.createElement("g",{id:"\\u56FE\\u6807/\\u5F00\\u59CB",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},r.createElement("path",{d:"M14,3 C18.4134387,3 22.4515116,5.21722926 24.8439143,8.82758014 C25.1489857,9.2879603 25.023083,9.90848139 24.5627029,10.2135528 C24.1023227,10.5186242 23.4818016,10.3927215 23.1767302,9.93234135 C21.1509901,6.8753172 17.7356159,5 14,5 C7.92486775,5 3,9.92486775 3,16 C3,22.0751322 7.92486775,27 14,27 C17.7648566,27 21.2035154,25.0949799 23.2220595,21.9986932 C23.5236738,21.5360408 24.1432344,21.4054936 24.6058868,21.7071079 C25.0685392,22.0087222 25.1990864,22.6282827 24.8974721,23.0909352 C22.5135374,26.747702 18.4480243,29 14,29 C6.82029825,29 1,23.1797017 1,16 C1,8.82029825 6.82029825,3 14,3 Z M14,7.5 C18.3564221,7.5 21.9473888,10.7773043 22.4419043,15.0009171 L30,15 C30.5522847,15 31,15.4477153 31,16 C31,16.5522847 30.5522847,17 30,17 L22.441788,17.0000759 C21.9468259,21.2232094 18.3560807,24.5 14,24.5 C9.30557963,24.5 5.5,20.6944204 5.5,16 C5.5,11.3055796 9.30557963,7.5 14,7.5 Z",id:"\\u5F62\\u72B6\\u7ED3\\u5408",fill:"#FFFFFF",fillRule:"nonzero"}))))},gt=r.forwardRef((function(e,t){return r.createElement(yt,ft({svgRef:t},e))})),ht=["svgRef","title"];function bt(){return bt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bt.apply(this,arguments)}function Et(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Ct,wt,Ot=function(e){var t=e.svgRef,n=e.title,o=Et(e,ht);return r.createElement("svg",bt({width:"32px",height:"32px",viewBox:"0 0 32 32",ref:t},o),void 0===n?pt||(pt=r.createElement("title",null,"图标/循环")):n?r.createElement("title",null,n):null,vt||(vt=r.createElement("g",{id:"\\u56FE\\u6807/\\u5FAA\\u73AF",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},r.createElement("path",{d:"M15.6874667,19.5125333 C15.2709335,19.9289407 14.5957332,19.9289407 14.1792,19.5125333 L10.6752,16.0085333 C10.5113622,15.8469389 10.3449407,15.6879851 10.176,15.5317333 C9.01013334,14.4394667 7.48693334,13.0133333 7.63946666,10.3786667 C7.73013331,8.83946666 8.04586666,7.56373331 8.33706666,6.68053334 C8.49173331,6.20906669 8.01386666,5.7472 7.60106666,6.02133334 C5.48053331,7.42506669 3.29706666,10.0853333 2.60373334,12.1514667 C1.7696,14.64 1.6608,19.7856 5.36746666,23.4933333 L7.78026666,25.9114667 C8.19596367,26.3278774 8.19596367,27.0022559 7.78026666,27.4186667 L6.24426666,28.9546667 C6.09146943,29.1070781 6.04558528,29.3365525 6.128027,29.5360007 C6.21046871,29.7354489 6.40498472,29.8656 6.6208,29.8656 L17.0666667,29.8656 C17.3495642,29.8656 17.6208751,29.7532194 17.8209139,29.5531806 C18.0209527,29.3531418 18.1333333,29.0818309 18.1333333,28.7989333 L18.1333333,18.3530667 C18.1333333,18.1372514 18.0031823,17.9427354 17.803734,17.8602937 C17.6042858,17.777852 17.3748114,17.8237361 17.2224,17.9765333 L15.6874667,19.5114667 L15.6874667,19.5125333 Z",id:"\\u8DEF\\u5F84",fill:"#FFFFFF",fillRule:"nonzero"}),r.createElement("path",{d:"M16.3125333,12.4874667 C16.7290665,12.0710593 17.4042668,12.0710593 17.8208,12.4874667 L21.3248,15.9914667 C21.4784,16.1450667 21.6469333,16.3029333 21.824,16.4682667 C22.9898667,17.5605333 24.5130667,18.9866667 24.3605333,21.6202667 C24.2879029,22.8778359 24.0534368,24.120793 23.6629333,25.3184 C23.5082667,25.7898667 23.9861333,26.2517333 24.3989333,25.9776 C26.5194667,24.5738667 28.7029333,21.9136 29.3962667,19.8474667 C30.2304,17.3589333 30.3392,12.2133333 26.6325333,8.5056 L24.2197333,6.08746666 C23.8040363,5.67105591 23.8040363,4.9966774 24.2197333,4.58026666 L25.7557333,3.04426666 C25.9085305,2.89185522 25.9544147,2.66238086 25.871973,2.46293264 C25.7895313,2.26348441 25.5950153,2.13333334 25.3792,2.13333334 L14.9333333,2.13333334 C14.6504358,2.13333334 14.3791249,2.24571396 14.1790861,2.44575276 C13.9790473,2.64579157 13.8666667,2.91710241 13.8666667,3.2 L13.8666667,13.6458667 C13.8666667,13.8616819 13.9968177,14.0561979 14.196266,14.1386397 C14.3957142,14.2210814 14.6251886,14.1751972 14.7776,14.0224 L16.3125333,12.4874667 L16.3125333,12.4874667 Z",id:"\\u8DEF\\u5F84",fill:"#FFFFFF",fillRule:"nonzero"}))))},At=r.forwardRef((function(e,t){return r.createElement(Ot,bt({svgRef:t},e))})),Lt=["svgRef","title"];function St(){return St=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},St.apply(this,arguments)}function Nt(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var xt,jt,Pt=function(e){var t=e.svgRef,n=e.title,o=Nt(e,Lt);return r.createElement("svg",St({width:"32px",height:"32px",viewBox:"0 0 32 32",ref:t},o),void 0===n?Ct||(Ct=r.createElement("title",null,"图标/结束")):n?r.createElement("title",null,n):null,wt||(wt=r.createElement("g",{id:"\\u56FE\\u6807/\\u7ED3\\u675F",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},r.createElement("path",{d:"M14,3 C18.4134387,3 22.4515116,5.21722926 24.8439143,8.82758014 C25.1489857,9.2879603 25.023083,9.90848139 24.5627029,10.2135528 C24.1023227,10.5186242 23.4818016,10.3927215 23.1767302,9.93234135 C21.1509901,6.8753172 17.7356159,5 14,5 C7.92486775,5 3,9.92486775 3,16 C3,22.0751322 7.92486775,27 14,27 C17.7648566,27 21.2035154,25.0949799 23.2220595,21.9986932 C23.5236738,21.5360408 24.1432344,21.4054936 24.6058868,21.7071079 C25.0685392,22.0087222 25.1990864,22.6282827 24.8974721,23.0909352 C22.5135374,26.747702 18.4480243,29 14,29 C6.82029825,29 1,23.1797017 1,16 C1,8.82029825 6.82029825,3 14,3 Z M14,7.5 C18.3564221,7.5 21.9473888,10.7773043 22.4419043,15.0009171 L30,15 C30.5522847,15 31,15.4477153 31,16 C31,16.5522847 30.5522847,17 30,17 L22.441788,17.0000759 C21.9468259,21.2232094 18.3560807,24.5 14,24.5 C9.30557963,24.5 5.5,20.6944204 5.5,16 C5.5,11.3055796 9.30557963,7.5 14,7.5 Z",id:"\\u5F62\\u72B6\\u7ED3\\u5408\\u5907\\u4EFD",fill:"#FFFFFF",fillRule:"nonzero",transform:"translate(16, 16) scale(-1, 1) translate(-16, -16)"}))))},It=r.forwardRef((function(e,t){return r.createElement(Pt,St({svgRef:t},e))})),kt=["svgRef","title"];function Ft(){return Ft=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ft.apply(this,arguments)}function Dt(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Mt,Rt,Tt=function(e){var t=e.svgRef,n=e.title,o=Dt(e,kt);return r.createElement("svg",Ft({width:"32px",height:"32px",viewBox:"0 0 32 32",ref:t},o),void 0===n?xt||(xt=r.createElement("title",null,"图标/知识库")):n?r.createElement("title",null,n):null,jt||(jt=r.createElement("g",{id:"\\u56FE\\u6807/\\u77E5\\u8BC6\\u5E93",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},r.createElement("path",{d:"M21,25 L21,28 C21,29.1045695 20.1045695,30 19,30 L16,30 C14.8954305,30 14,29.1045695 14,28 L14,25 L21,25 Z M14,4 C14,2.8954305 14.8954305,2 16,2 L19,2 C20.1045695,2 21,2.8954305 21,4 L21,22 L14,22 L14,4 Z",id:"\\u5F62\\u72B6\\u7ED3\\u5408",fill:"#FFFFFF",fillRule:"nonzero"}),r.createElement("path",{d:"M30,25 L30,28 C30,29.1045695 29.1045695,30 28,30 L25,30 C23.8954305,30 23,29.1045695 23,28 L23,25 L30,25 Z M23,4 C23,2.8954305 23.8954305,2 25,2 L28,2 C29.1045695,2 30,2.8954305 30,4 L30,22 L23,22 L23,4 Z",id:"\\u5F62\\u72B6\\u7ED3\\u5408\\u5907\\u4EFD",fill:"#FFFFFF",fillRule:"nonzero"}),r.createElement("path",{d:"M9.47821745,1.93280488 L12.4126602,2.55653995 C13.4930923,2.78619286 14.182785,3.84822653 13.9531321,4.92865853 L8.96325149,28.404201 C8.73359858,29.484633 7.67156491,30.1743257 6.59113291,29.9446728 L3.6566901,29.3209377 C2.5762581,29.0912848 1.88656537,28.0292511 2.11621828,26.9488191 L5.84410295,9.40668954 L12.68545,10.8616618 L13.3091851,7.92721897 L6.46710295,6.47268954 L7.10609886,3.4732767 C7.33575178,2.39284469 8.39778544,1.70315197 9.47821745,1.93280488 Z",id:"\\u5F62\\u72B6\\u7ED3\\u5408",fill:"#FFFFFF",fillRule:"nonzero"}))))},Ht=r.forwardRef((function(e,t){return r.createElement(Tt,Ft({svgRef:t},e))})),Vt=["svgRef","title"];function _t(){return _t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_t.apply(this,arguments)}function Bt(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Ut,Wt,Zt=function(e){var t=e.svgRef,n=e.title,o=Bt(e,Vt);return r.createElement("svg",_t({width:"32px",height:"32px",viewBox:"0 0 32 32",ref:t},o),void 0===n?Mt||(Mt=r.createElement("title",null,"图标/回复")):n?r.createElement("title",null,n):null,Rt||(Rt=r.createElement("g",{id:"\\u56FE\\u6807/\\u56DE\\u590D",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},r.createElement("path",{d:"M25,2 C27.7614237,2 30,4.23857625 30,7 L30,21 C30,23.7614237 27.7614237,26 25,26 L24.273,26 L17.7598024,29.8602915 C17.0274696,30.2942665 16.1417305,29.6750511 16.2588049,28.8642383 L16.2798575,28.7574644 L16.968,26 L7,26 C4.3112453,26 2.11818189,23.8776933 2.00461951,21.2168896 L2,21 L2,7 C2,4.23857625 4.23857625,2 7,2 L25,2 Z M15.1349182,7.53425357 C14.8776936,7.04552673 14.2729804,6.85785713 13.7842536,7.11508178 L9.03425357,9.61508178 C8.53769102,9.87643048 8.35332931,10.4951188 8.62584272,10.9856429 L11.1258427,15.4856429 C11.3940559,15.9684267 12.0028592,16.1423705 12.4856429,15.8741573 L12.5843209,15.81164 C12.9910199,15.5196151 13.1232124,14.9626562 12.8741573,14.5143571 L11.4341518,11.9220895 C13.8181393,12.2870762 15.8789361,13.1587708 17.6321784,14.5363183 C19.7298736,16.1845074 20.8485753,18.496491 21.0012477,21.5499376 C21.0288274,22.1015333 21.4983419,22.5263321 22.0499376,22.4987523 C22.6015333,22.4711726 23.0263321,22.0016581 22.9987523,21.4500624 C22.8180913,17.8368424 21.4367931,14.9821593 18.8678216,12.9636817 C17.018128,11.510351 14.8781321,10.5464763 12.4597402,10.0714064 L14.7157464,8.88491822 C15.2044733,8.62769357 15.3921429,8.02298041 15.1349182,7.53425357 Z",id:"\\u5F62\\u72B6",fill:"#FFFFFF",fillRule:"nonzero"}))))},zt=r.forwardRef((function(e,t){return r.createElement(Zt,_t({svgRef:t},e))})),Gt=["svgRef","title"];function Xt(){return Xt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xt.apply(this,arguments)}function Yt(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Kt=function(e){var t=e.svgRef,n=e.title,o=Yt(e,Gt);return r.createElement("svg",Xt({width:"32px",height:"32px",viewBox:"0 0 32 32",ref:t},o),void 0===n?Ut||(Ut=r.createElement("title",null,"图标/变量")):n?r.createElement("title",null,n):null,Wt||(Wt=r.createElement("g",{id:"\\u56FE\\u6807/\\u53D8\\u91CF",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},r.createElement("path",{d:"M26,2 C28.209139,2 30,3.790861 30,6 L30,26 C30,28.209139 28.209139,30 26,30 L6,30 C3.790861,30 2,28.209139 2,26 L2,6 C2,3.790861 3.790861,2 6,2 L26,2 Z M17.3039066,12.6713681 C16.0821918,12.6713681 14.8822933,13.190409 13.7696601,14.1833568 L15.122273,15.8081805 L15.1440893,15.7856135 C15.9076611,15.1086037 16.6057839,14.7926657 17.3039066,14.7926657 C17.6966007,14.7926657 17.9802131,14.8603667 18.1547438,14.9506347 C18.3074581,15.0183357 18.3947235,15.1086037 18.4819888,15.2440056 C18.6347032,15.5599436 18.7219685,16.0564175 18.7437849,16.8913963 L18.7437849,16.9365303 L17.5438864,16.9365303 C14.6859462,16.9590973 13.376966,18.1777151 13.376966,19.9379408 L13.376966,20.7277856 C13.376966,22.5331453 14.7950279,24 16.5403349,24 C17.325723,24 18.0456621,23.7066291 18.6128869,23.2101551 L18.6128869,23.77433 L20.7945205,23.77433 L20.7945205,17.0267983 C20.7945205,16.4851904 20.7727042,16.0338505 20.7072552,15.6276446 C20.6199899,15.0860367 20.4890918,14.5895628 20.2491121,14.1833568 C19.6818874,13.167842 18.6783359,12.6713681 17.3039066,12.6713681 Z M7.26889904,8 L5,8 L8.09791984,23.796897 L10.3668189,23.796897 L13.4647387,8 L11.1958397,8 L9.23236936,18.809591 L7.26889904,8 Z M27,13.0098731 C26.1927955,13.0098731 25.4728564,13.303244 24.927448,13.7997179 L24.927448,13.235543 L22.7458143,13.235543 L22.7458143,23.796897 L24.927448,23.796897 L24.927448,16.4174894 C24.992897,15.6050776 25.6473871,14.9732017 26.4327752,14.9732017 L26.4764079,14.9732017 C26.6509386,14.9732017 26.8254693,15.0183357 27,15.0860367 Z M18.6128869,18.629055 L18.6128869,20.6375176 C18.5256215,21.4273625 17.8711314,22.0366714 17.0857433,22.0366714 L17.0639269,22.0366714 C16.2349061,22.0141044 15.5585997,21.3145275 15.5585997,20.4569817 L15.5585997,20.1861777 C15.580416,19.3286319 16.2349061,18.651622 17.0639269,18.629055 L18.6128869,18.629055 Z",id:"\\u5F62\\u72B6\\u7ED3\\u5408",fill:"#FFFFFF"}))))},Jt=r.forwardRef((function(e,t){return r.createElement(Kt,Xt({svgRef:t},e))})),Qt={iconWrap:"iconWrap-index-Cqj80",condition:"condition-index-_Ga3h"};function qt(e){var t=e.bgColor,n=e.children;return r.createElement("span",{className:Qt.iconWrap,style:{background:t}},n)}var $t=function(e){var t=e.type;return r.createElement(r.Fragment,null,function(){switch(t){case Q.Hv.Input:return r.createElement(qt,{bgColor:"#5582F3"},r.createElement(gt,null));case Q.Hv.Output:return r.createElement(qt,{bgColor:"#5582F3"},r.createElement(It,null));case Q.Hv.LLMAction:return r.createElement(qt,{bgColor:"#9A4DFF"},r.createElement(rt,null));case Q.Hv.JavaPluginAction:return r.createElement(qt,{bgColor:"#5797FF"},r.createElement(Je,null));case Q.Hv.MessageAction:return r.createElement(qt,{bgColor:"#FDC200"},r.createElement(dt,null));case Q.Hv.AskUserAction:return r.createElement(qt,{bgColor:"#77C404"},r.createElement(je,null));case Q.Hv.RepoAction:return r.createElement(qt,{bgColor:"#16B8B1"},r.createElement(Ht,null));case Q.Hv.RepoReplyAction:return r.createElement(qt,{bgColor:"#FF698E"},r.createElement(zt,null));case Q.Hv.LoopAction:return r.createElement(qt,{bgColor:"#16B0F1"},r.createElement(At,null));case Q.Hv.BreakLoopAction:return r.createElement(qt,{bgColor:"#FF5757"},r.createElement(Re,null));case Q.Hv.SetVariableAction:return r.createElement(qt,{bgColor:"#FFB44A"},r.createElement(Jt,null));case Q.Hv.CodeAction:return r.createElement(qt,{bgColor:"#FFB44A"},r.createElement(We,null));case"condition":return r.createElement("span",{className:$()(Qt.iconWrap,Qt.condition)},r.createElement("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAFKADAAQAAAABAAAAFAAAAACy3fD9AAAAf0lEQVQ4EWNgGAWjIUAwBMJbPlogK2JC5pDD/veP6VhI4+cpDP//M4L0gwlyDILpCW36/B/E/s/4fyGjOm8yY2jTp61Ac71gCiih/zP8X0Kxl1EcwMjITHUvs6DYQB7n////DNPW1PLmMjAygsOTPGOguoKbPppTZMCo5iEYAgBnWCLVCVw/WAAAAABJRU5ErkJggg=="}));default:return r.createElement("span",{className:Qt.iconWrap},r.createElement("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAHKADAAQAAAABAAAAHAAAAABkvfSiAAABHElEQVRIDWNkAIKghm8yTMx/uxj/MzgAuZIgMSqC5/8ZGQ78+8tctq6B6wkjyDJmpr8XgRYIUdESbEa9+/uPWZ8J5DM6WAZygBDILiZoMGJzEdXFQHYxAU2ldpzhc6gkCz7ZykhOBkMVZnxKMOTO3/nL0L78O4Y4TADkQ5yAVMtABhHSg9dCnC6hQAJvkMLMzZ/6jeH5u38wLlZaUoiJYWI2F1Y5ZEGiLCTGIGRD8bFHgxQcOiM7SIlNnbCENPxTKd2zxaiFsMRFNXpwBSmoMiUVnLv9B68WvPkQX82N11Q8kqAgfY5HntpSz5lAjVRqm4rLPJBdTKAWMVDBO1yKqCj+DmQXE6j5DWoRA21fDjScFsELauovB9kBsgsAczxWDWhURZsAAAAASUVORK5CYII="}))}}())},en="header-index-on_KZ",tn="name-index-C_3EN";var nn=function(e){var t=e.nodeType,n=e.data;return r.createElement("div",{className:en},r.createElement($t,{type:t}),r.createElement("span",{className:tn,title:n.nodeName},n.nodeName))},rn=n(97828);function on(){return r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},r.createElement("path",{d:"M5.19009 11.8398C8.26416 10.6196 10.7144 8.16562 11.9297 5.08904",stroke:"red",strokeOpacity:"0.16",strokeWidth:"2",strokeLinecap:"round"}))}function an(e){var t=e.nodeId,n=e.icon,o=void 0===n?r.createElement(on,null):n,a=e.minHeight,i=void 0===a?Q.J2.HEIGHT:a,l=Bl().handleNodeResize,c=(0,r.useCallback)((function(e,n){l(t,n)}),[l,t]);return r.createElement("div",{className:re.resizeWrapper},r.createElement(rn.IE,{position:"bottom-right",onResize:c,minHeight:i,minWidth:Q.Xn,style:{backgroundColor:"transparent",borderStyle:"none"}},r.createElement("div",{className:re.icon},o)))}var ln=(0,r.memo)(an);function cn(e){return cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cn(e)}function un(e,t,n){return t=function(e){var t=function(e,t){if("object"!=cn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=cn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==cn(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return sn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function fn(e){var t=e.children,n=e.id,o=e.data,a=e.selected,i=dn((0,r.useState)(!1),2),l=i[0],c=i[1],u=dn((0,r.useState)(!1),2),d=u[0],s=u[1],f=(0,r.useRef)(null),m=ne().handleNodeIterationChildSizeChange,p=o.nodeType,v=o.width,y=o.height,g=o.edges;(0,r.useEffect)((function(){if(f.current&&n){var e=new ResizeObserver((function(){setTimeout((function(){m(n)}),0)}));return e.observe(f.current),function(){e.disconnect()}}}),[n,m]);var h,b,C,w,O,A,L,S,N,x;return r.createElement("div",{className:$()(re.wrapper,un(un({},re.showBorder,!!a),re.errorBorder,!!o.hasErr)),style:{width:"".concat(v,"px"),minHeight:"".concat(y,"px")},ref:f,onMouseEnter:function(){return c(!0)},onMouseLeave:function(){return c(!1)}},r.createElement(nn,{nodeType:p,data:o}),p===Q.Hv.Input?r.createElement(r.Fragment,null,r.createElement(be,{id:"bottom",nodeId:n,connected:!(null==g||null===(O=g.bottom)||void 0===O||!O.length),showHandle:l,position:E.yX.Bottom}),r.createElement(be,{id:"left",nodeId:n,connected:!(null==g||null===(A=g.left)||void 0===A||!A.length),showHandle:l,position:E.yX.Left}),r.createElement(be,{id:"right",nodeId:n,connected:!(null==g||null===(L=g.right)||void 0===L||!L.length),showHandle:l,position:E.yX.Right})):p===Q.Hv.Output?r.createElement(r.Fragment,null,r.createElement(Ee,{id:"top",nodeId:n,connected:!(null==g||null===(S=g.top)||void 0===S||!S.length),showHandle:l,position:E.yX.Top}),r.createElement(Ee,{id:"left",nodeId:n,connected:!(null==g||null===(N=g.left)||void 0===N||!N.length),showHandle:l,position:E.yX.Left}),r.createElement(Ee,{id:"right",nodeId:n,connected:!(null==g||null===(x=g.right)||void 0===x||!x.length),showHandle:l,position:E.yX.Right})):r.createElement(r.Fragment,null,r.createElement(Ee,{id:"top",nodeId:n,connected:!(null==g||null===(h=g.top)||void 0===h||!h.length),showHandle:l,position:E.yX.Top}),r.createElement(be,{id:"bottom",nodeId:n,connected:!(null==g||null===(b=g.bottom)||void 0===b||!b.length),showHandle:l,position:E.yX.Bottom}),r.createElement(Ee,{id:"left",nodeId:n,connected:!(null==g||null===(C=g.left)||void 0===C||!C.length),showHandle:l,position:E.yX.Left}),r.createElement(be,{id:"right",nodeId:n,connected:!(null==g||null===(w=g.right)||void 0===w||!w.length),showHandle:l,position:E.yX.Right})),0!==Object.keys(o.nodeData).length||p===Q.Hv.LoopAction||p===Q.Hv.ParallelAction?r.createElement("div",{className:$()(re.content,un(un({},re.iterationBorder,p===Q.Hv.LoopAction||p===Q.Hv.ParallelAction),re.normalBorder,p!==Q.Hv.LoopAction&&p!==Q.Hv.ParallelAction))},(0,r.cloneElement)(t,{id:n,data:o})):null,p===Q.Hv.LoopAction||p===Q.Hv.ParallelAction?r.createElement(ln,{nodeId:n}):null,o.hasErr?r.createElement("span",{className:"".concat(re.error),onMouseEnter:function(){return s(!0)},onMouseLeave:function(){return s(!1)}},"!",r.createElement("div",{style:{display:d?"block":"none",boxShadow:"0px 4px 10px 0px rgba(0,0,0,0.2)"},className:"".concat(re.errorText)},o.errInfo.reduce((function(e,t){return e+t.msg}),""))):null)}var mn=(0,r.memo)(fn);function pn(e){var t=e.data,n=(0,r.useMemo)((function(){return bl[t.nodeType]}),[t]);return r.createElement(mn,e,r.createElement(n,null))}var vn=(0,r.memo)(pn);function yn(e){e.data,e.selected;return r.createElement(r.Fragment,null)}var gn=(0,r.memo)(yn);function hn(){return r.createElement("div",null,"BreakLoopPanel")}var bn=(0,r.memo)(hn);function En(e){e.data,e.selected;return r.createElement(r.Fragment,null)}var Cn=(0,r.memo)(En),wn=n(62507),On=n(11647),An=n(28778),Ln={cascaderUIWrapper:"cascaderUIWrapper-index-sAKUJ",cascaderUIPopUp:"cascaderUIPopUp-index-zeI9G",cascaderUI_base_border:"cascaderUI_base_border-index-oFUKd",cascaderUI_right_border:"cascaderUI_right_border-index-KYh1P",cascaderUI_right_padding:"cascaderUI_right_padding-index-X1joB",cascaderUI_input:"cascaderUI_input-index-IOkp2",cascaderUI_input_error:"cascaderUI_input_error-index-f0Hac",cascaderUI_input_status_error:"cascaderUI_input_status_error-index-iywqr",cascaderUI_empty:"cascaderUI_empty-index-sfv2T"};function Sn(e){return Sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sn(e)}function Nn(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Sn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Sn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Sn(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return jn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Pn=function(e){return e.REFERENCE="reference",e.INPUT="input",e}(Pn||{}),In="cascaderUI",kn={fontSize:"12px",height:"47px",color:"#b2b2b2",width:"168px",display:"flex",alignItems:"center",justifyContent:"center"},Fn=[{value:"reference",label:"引用"},{value:"input",label:"输入"}];function Dn(e){return document.querySelector(".cascaderUI_dropdown_list")}function Mn(e){return document.querySelector(".cascaderUI_dropdown_list1")}var Rn=(0,r.forwardRef)((function(e,t){var n=e.typeList,o=e.typeValue,a=e.disabled,i=e.isSeparate,l=void 0===i||i,c=e.referenceList,u=e.referenceVal,d=e.textVal,s=e.inputEmtpyText,f=void 0===s?"值不能为空":s,m=e.inputPlaceholder,p=void 0===m?"请输入":m,v=e.mustInput,y=void 0===v||v,g=n||Fn,h=xn((0,r.useState)(o||Fn[0].value||""),2),b=h[0],E=h[1],C=xn((0,r.useState)(u||""),2),w=C[0],O=C[1],A=xn((0,r.useState)(d||""),2),L=A[0],S=A[1],N=(0,r.useState)((function(){return function(e){var t=e.mustInput,n=e.baseVal,r=e.textValue,o=e.refValue;return!!t&&(n===Pn.INPUT&&!r||n===Pn.REFERENCE&&!o||void 0)}({baseVal:b,textValue:L,refValue:w,mustInput:y||!1})})),x=xn(N,2),j=x[0],P=x[1];(0,r.useImperativeHandle)(t,(function(){return{getValue:function(){return{baseVal:b,rightVal:b===Pn.INPUT?L:w}}}}));var I=(0,r.useCallback)((function(e,t){E(e[0])}),[E]),k=(0,r.useCallback)((function(e){O(e[0])}),[O]);(0,r.useEffect)((function(){y&&(b!==Pn.INPUT||L?P(!1):P(!0))}),[b,y,P,L]);var F=(0,r.useCallback)((function(e){var t=e.target.value;S(t)}),[S]),D=(0,r.useCallback)((function(e){var t,n=null==e||null===(t=e.props)||void 0===t?void 0:t.children;return Array.isArray(n)?e:r.createElement("div",{style:kn},"没有数据")}),[]);return r.createElement("div",{className:$()(Ln.cascaderUIWrapper)},r.createElement("div",{className:$()(Nn({},Ln["".concat(In,"_base_border")],l),Ln["".concat(In,"_base_type")])},r.createElement("div",{className:$()(Ln.cascaderUIPopUp,"".concat(In,"_dropdown_list")),style:{width:"116px"}}),r.createElement(On.A,{disabled:a,style:{width:"116px"},getPopupContainer:Dn,options:g,allowClear:!1,bordered:!1,mode:"single",value:[b],onChange:I,dropdownRender:D})),r.createElement("div",{className:$()(Nn(Nn({},Ln["".concat(In,"_right_padding")],l),Ln["".concat(In,"_right_border")],l),Ln["".concat(In,"_right_type")]),style:{width:"168px"}},r.createElement("div",{className:$()(Ln.cascaderUIPopUp,"".concat(In,"_dropdown_list1")),style:{width:"168px"}}),"input"===b?r.createElement("div",{className:$()(Ln["".concat(In,"_input")],Nn({},Ln["".concat(In,"_input_status_error")],j&&b===Pn.INPUT))},r.createElement(An.Ay,{placeholder:p,onChange:F,value:L}),r.createElement("div",{className:Ln["".concat(In,"_input_error")],style:{display:j&&b===Pn.INPUT?"flex":"none"}},f)):r.createElement(On.A,{options:c,getPopupContainer:Mn,dropdownRender:D,value:[w],onChange:k})))})),Tn=(0,r.memo)(Rn),Hn=n(35662),Vn=n(63649),_n="gaiCodeEditor-index-XGH80";n(95348),n(74387),n(80582),n(40335),n(37093),n(23520);window.JSHINT=Vn.JSHINT;var Bn=function(e){var t=e.code,n=e.clsName,o=e.readOnly,a=void 0===o||o,i=e.onCodeChange,l=(0,r.useMemo)((function(){return{mode:"javascript",theme:"material",lineNumbers:!0,styleActiveLine:!0,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],extraKeys:{"Ctrl-Q":function(e){e.foldCode(e.getCursor())}},fold:"brace",indentUnit:2,showIndentGuide:!0,readOnly:a,autofocus:!a}}),[]),c=(0,r.useCallback)((function(e,t,n){null==i||i(n)}),[i]),u=(0,r.useCallback)((function(e,t,n){null==i||i(n)}),[i]);return r.createElement(Hn.xL,{className:"".concat(_n," ").concat(n),value:t,onBeforeChange:c,options:l,onChange:u})},Un=(0,r.memo)(Bn),Wn="codeToolbar-index-PWHt8",Zn="ideBtn-index-MX2rd",zn=[{label:"苹果",value:"apple"},{label:"香蕉",value:"banana"},{label:"橙子",value:"orange"}];function Gn(){var e=b((function(e){return{codeStr:e.codeStr,setCodeEditorPanelShow:e.setCodeEditorPanelShow}})),t=e.codeStr,n=e.setCodeEditorPanelShow,o=(0,r.useRef)(null),a=(0,r.useCallback)((function(){n(!0)}),[n]);return r.createElement("div",null,r.createElement(Tn,{referenceList:zn,referenceVal:"apple",ref:o,typeValue:"input",textVal:"hei you name"}),r.createElement("div",{className:Wn},r.createElement(wn.A,{onClick:function(){var e;null===(e=o.current)||void 0===e||e.getValue()}},"getVal"),r.createElement(wn.A,{className:Zn,type:"text",onClick:a},"在IDE中编辑")),r.createElement(Un,{code:t}))}var Xn=(0,r.memo)(Gn),Yn={nodeInfo:"nodeInfo-index-SQ5SU",panel:"panel-index-dakm2",inputVarCollapse:"inputVarCollapse-index-PKgPK",inputVar:"inputVar-index-fgtFI",header:"header-index-ZZOCC",line:"line-index-cidcF",handle:"handle-index-tG2TI",col1:"col1-index-tUuFB",col2:"col2-index-EuDKz",col3:"col3-index-Di3Bq",col4:"col4-index-Db86p",addAction:"addAction-index-mnIMQ"},Kn="wrap-index-VM1nE",Jn="content-index-wzdWZ",Qn="tag-index-KmYeS",qn="isUndefined-index-l00ha",$n="icon-index-giZye",er="onlyName-index-OgbC4",tr="ellipsis-index-QUVsN",nr="nodeTagTipsWrap-index-lsCOP",rr="nodeTagTips-index-K5P6p",or="line-index-sBSwq",ar="label-index-Vx_d4",ir="text-index-k9IoY",lr="empty-index-XrYmM";var cr,ur=function(e){var t=e.label,n=e.children;return r.createElement("div",{className:or},r.createElement("div",{className:ar},t),n)},dr=n(76425),sr=["svgRef","title"];function fr(){return fr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fr.apply(this,arguments)}function mr(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var pr,vr,yr=function(e){var t=e.svgRef,n=e.title,o=mr(e,sr);return r.createElement("svg",fr({width:"16px",height:"16px",viewBox:"0 0 16 16",ref:t},o),n?r.createElement("title",null,n):null,cr||(cr=r.createElement("g",{id:"\\u66F4\\u591A\\u64CD\\u4F5C",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},r.createElement("g",{id:"\\u7F16\\u7EC4",transform:"translate(6.5, 1.5)",fill:"#666666",fillRule:"nonzero"},r.createElement("path",{d:"M1.46326408,2.99954821 C2.00775926,3.01288721 2.51670043,2.7300282 2.79287161,2.26057974 C3.0690428,1.79113128 3.0690428,1.20886872 2.79287161,0.739420262 C2.51670043,0.269971804 2.00775926,-0.0128872126 1.46326408,0.000451791527 C0.649392726,0.0203899541 0,0.685885479 0,1.5 C0,2.31411452 0.649392726,2.97961005 1.46326408,2.99954821 L1.46326408,2.99954821 Z M0,6.5 C0,7.32842712 0.671572875,8 1.5,8 C2.32842712,8 3,7.32842712 3,6.5 C3,5.67157288 2.32842712,5 1.5,5 C0.671572875,5 0,5.67157288 0,6.5 L0,6.5 Z M1.5,13 C2.32842712,13 3,12.3284271 3,11.5 C3,10.6715729 2.32842712,10 1.5,10 C0.671572875,10 0,10.6715729 0,11.5 C0,12.3284271 0.671572875,13 1.5,13 Z",id:"\\u5F62\\u72B6\\u7ED3\\u5408"})))))},gr=r.forwardRef((function(e,t){return r.createElement(yr,fr({svgRef:t},e))})),hr=["svgRef","title"];function br(){return br=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},br.apply(this,arguments)}function Er(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Cr,wr,Or=function(e){var t=e.svgRef,n=e.title,o=Er(e,hr);return r.createElement("svg",br({width:"32px",height:"32px",viewBox:"0 0 32 32",ref:t},o),void 0===n?pr||(pr=r.createElement("title",null,"图标/任务流/数组")):n?r.createElement("title",null,n):null,vr||(vr=r.createElement("g",{id:"\\u56FE\\u6807/\\u4EFB\\u52A1\\u6D41/\\u6570\\u7EC4",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},r.createElement("path",{d:"M12.325784,3.03295311 L12.325784,4.61470215 L11.2047038,4.61470215 C9.91376307,4.61470215 8.8945993,5.60329531 8.86062718,6.85551331 L8.86062718,14.7313054 C8.86062718,14.9949303 8.72473868,15.225602 8.52090592,15.3903676 L8.4869338,15.3903676 L7.67160279,16.0164766 L8.4869338,16.6096324 C8.72473868,16.774398 8.86062718,17.0050697 8.86062718,17.2686946 L8.86062718,25.1444867 C8.86062718,26.3637516 9.87979094,27.3852978 11.1707317,27.418251 L12.325784,27.418251 L12.325784,29 L11.2047038,29 C9.0304878,29 7.26393728,27.2864385 7.22996516,25.2103929 L7.22996516,17.6641318 L5.90505226,16.6755387 C5.83710801,16.6425856 5.76916376,16.5766793 5.73519164,16.5437262 L5.70121951,16.5107731 C5.42944251,16.148289 5.49738676,15.6210393 5.87108014,15.3244613 L5.90505226,15.3244613 L7.22996516,14.3688213 L7.22996516,6.88846641 C7.22996516,4.77946768 8.96254355,3.06590621 11.1367596,3.03295311 L12.325784,3.03295311 Z M6.09581882,3 L6.09581882,4.58174905 L2.63066202,4.58174905 L2.63066202,27.3852978 L6.09581882,27.3852978 L6.09581882,28.9670469 L1.81533101,28.9670469 L1,28.1761724 L1,3.79087452 L1.81533101,3 L6.09581882,3 Z M20.8632404,3.03295311 C23.0374564,3.06590621 24.7700348,4.77946768 24.7700348,6.88846641 L24.7700348,14.3688213 L26.0949477,15.3244613 L26.1289199,15.3244613 C26.5026132,15.6210393 26.5705575,16.148289 26.2987805,16.5107731 L26.2648084,16.5437262 C26.2308362,16.5766793 26.162892,16.6425856 26.0949477,16.6755387 L24.7700348,17.6641318 L24.7700348,25.2103929 C24.7360627,27.2864385 22.9695122,29 20.7952962,29 L19.674216,29 L19.674216,27.418251 L20.8292683,27.418251 C22.1202091,27.3852978 23.1393728,26.3637516 23.1393728,25.1444867 L23.1393728,17.2686946 C23.1393728,17.0050697 23.2752613,16.774398 23.5130662,16.6096324 L24.3283972,16.0164766 L23.5130662,15.3903676 L23.4790941,15.3903676 C23.2752613,15.225602 23.1393728,14.9949303 23.1393728,14.7313054 L23.1393728,6.85551331 C23.1054007,5.60329531 22.0862369,4.61470215 20.7952962,4.61470215 L19.674216,4.61470215 L19.674216,3.03295311 L20.8632404,3.03295311 Z M30.184669,3 L31,3.79087452 L31,28.1761724 L30.184669,28.9670469 L25.9041812,28.9670469 L25.9041812,27.3852978 L29.369338,27.3852978 L29.369338,4.58174905 L25.9041812,4.58174905 L25.9041812,3 L30.184669,3 Z",id:"\\u5F62\\u72B6\\u7ED3\\u5408",fill:"#999999"}))))},Ar=r.forwardRef((function(e,t){return r.createElement(Or,br({svgRef:t},e))})),Lr=["svgRef","title"];function Sr(){return Sr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sr.apply(this,arguments)}function Nr(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var xr,jr,Pr=function(e){var t=e.svgRef,n=e.title,o=Nr(e,Lr);return r.createElement("svg",Sr({width:"32px",height:"32px",viewBox:"0 0 32 32",ref:t},o),void 0===n?Cr||(Cr=r.createElement("title",null,"图标/任务流/时间")):n?r.createElement("title",null,n):null,wr||(wr=r.createElement("g",{id:"\\u56FE\\u6807/\\u4EFB\\u52A1\\u6D41/\\u65F6\\u95F4",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},r.createElement("path",{d:"M16,2 C23.7319865,2 30,8.2680135 30,16 C30,23.7319865 23.7319865,30 16,30 C8.2680135,30 2,23.7319865 2,16 C2,8.2680135 8.2680135,2 16,2 Z M16,4 C9.372583,4 4,9.372583 4,16 C4,22.627417 9.372583,28 16,28 C22.627417,28 28,22.627417 28,16 C28,9.372583 22.627417,4 16,4 Z M16,8 C16.5128358,8 16.9355072,8.38604019 16.9932723,8.88337887 L17,9 L17,15.585 L20.7071068,19.2928932 C21.0675907,19.6533772 21.0953203,20.2206082 20.7902954,20.6128994 L20.7071068,20.7071068 C20.3466228,21.0675907 19.7793918,21.0953203 19.3871006,20.7902954 L19.2928932,20.7071068 L15.2928932,16.7071068 C15.1366129,16.5508265 15.0374017,16.3481451 15.0086724,16.131444 L15,16 L15,9 C15,8.44771525 15.4477153,8 16,8 Z",id:"\\u989C\\u8272",fill:"#999999",fillRule:"nonzero"}))))},Ir=r.forwardRef((function(e,t){return r.createElement(Pr,Sr({svgRef:t},e))})),kr=["svgRef","title"];function Fr(){return Fr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fr.apply(this,arguments)}function Dr(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Mr,Rr,Tr=function(e){var t=e.svgRef,n=e.title,o=Dr(e,kr);return r.createElement("svg",Fr({width:"32px",height:"32px",viewBox:"0 0 32 32",ref:t},o),void 0===n?xr||(xr=r.createElement("title",null,"图标/任务流/图片")):n?r.createElement("title",null,n):null,jr||(jr=r.createElement("g",{id:"\\u56FE\\u6807/\\u4EFB\\u52A1\\u6D41/\\u56FE\\u7247",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},r.createElement("path",{d:"M29,3 C29.5522847,3 30,3.48502485 30,4.08333333 L30,27.9166667 C30,28.5149751 29.5522847,29 29,29 L3,29 C2.44771525,29 2,28.5149751 2,27.9166667 L2,4.08333333 C2,3.48502485 2.44771525,3 3,3 L29,3 Z M28,5 L4,5 L4,25 L10.0410565,11.776286 C10.3193367,11.2992341 10.9316545,11.1380979 11.4087064,11.4163782 C11.5091535,11.4749723 11.5986108,11.5506377 11.6730566,11.6399727 L16.7598307,18.5441016 L20,14 C20.4336732,13.7397961 20.9933503,13.844341 21.303848,14.2435523 L27.999,24.999 L28,5 Z M23,8 C24.1045695,8 25,8.8954305 25,10 C25,11.1045695 24.1045695,12 23,12 C21.8954305,12 21,11.1045695 21,10 C21,8.8954305 21.8954305,8 23,8 Z",id:"\\u989C\\u8272",fill:"#999999",fillRule:"nonzero"}))))},Hr=r.forwardRef((function(e,t){return r.createElement(Tr,Fr({svgRef:t},e))})),Vr=["svgRef","title"];function _r(){return _r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_r.apply(this,arguments)}function Br(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Ur,Wr,Zr=function(e){var t=e.svgRef,n=e.title,o=Br(e,Vr);return r.createElement("svg",_r({width:"32px",height:"32px",viewBox:"0 0 32 32",ref:t},o),void 0===n?Mr||(Mr=r.createElement("title",null,"图标/任务流/超链接")):n?r.createElement("title",null,n):null,Rr||(Rr=r.createElement("g",{id:"\\u56FE\\u6807/\\u4EFB\\u52A1\\u6D41/\\u8D85\\u94FE\\u63A5",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},r.createElement("path",{d:"M13.2249895,8.87738244 C12.8345389,9.26783309 12.2014933,9.26783309 11.8110427,8.87738244 C11.420592,8.4869318 11.420592,7.85388622 11.8110427,7.46343558 L14.6389364,4.63554185 C18.1529922,1.12148605 23.8504023,1.12148605 27.3644581,4.63554185 C30.878514,8.14959765 30.878514,13.8470078 27.3644581,17.3610636 L24.5365644,20.1889573 C24.1461138,20.579408 23.5130682,20.579408 23.1226176,20.1889573 C22.7321669,19.7985067 22.7321669,19.1654611 23.1226176,18.7750105 L25.9505113,15.9471168 C28.6836658,13.2139622 28.6836658,8.78264323 25.9505113,6.04948871 C23.2173568,3.3163342 18.7860378,3.3163342 16.0528832,6.04948871 L13.2249895,8.87738244 Z M18.7750105,23.1226176 C19.1654611,22.7321669 19.7985067,22.7321669 20.1889573,23.1226176 C20.579408,23.5130682 20.579408,24.1461138 20.1889573,24.5365644 L17.3610636,27.3644581 C13.8470078,30.878514 8.14959765,30.878514 4.63554185,27.3644581 C1.12148605,23.8504023 1.12148605,18.1529922 4.63554185,14.6389364 L7.46343558,11.8110427 C7.85388622,11.420592 8.4869318,11.420592 8.87738244,11.8110427 C9.26783309,12.2014933 9.26783309,12.8345389 8.87738244,13.2249895 L6.04948871,16.0528832 C3.3163342,18.7860378 3.3163342,23.2173568 6.04948871,25.9505113 C8.78264323,28.6836658 13.2139622,28.6836658 15.9471168,25.9505113 L18.7750105,23.1226176 Z M12.7071068,20.7071068 C12.3165825,21.0976311 11.6834175,21.0976311 11.2928932,20.7071068 C10.9023689,20.3165825 10.9023689,19.6834175 11.2928932,19.2928932 L20.2928932,10.2928932 C20.6834175,9.90236893 21.3165825,9.90236893 21.7071068,10.2928932 C22.0976311,10.6834175 22.0976311,11.3165825 21.7071068,11.7071068 L12.7071068,20.7071068 Z",id:"\\u989C\\u8272",fill:"#999999",fillRule:"nonzero"}))))},zr=r.forwardRef((function(e,t){return r.createElement(Zr,_r({svgRef:t},e))})),Gr=["svgRef","title"];function Xr(){return Xr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xr.apply(this,arguments)}function Yr(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Kr,Jr,Qr=function(e){var t=e.svgRef,n=e.title,o=Yr(e,Gr);return r.createElement("svg",Xr({width:"32px",height:"32px",viewBox:"0 0 32 32",ref:t},o),void 0===n?Ur||(Ur=r.createElement("title",null,"图标/任务流/数字")):n?r.createElement("title",null,n):null,Wr||(Wr=r.createElement("g",{id:"\\u56FE\\u6807/\\u4EFB\\u52A1\\u6D41/\\u6570\\u5B57",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},r.createElement("path",{d:"M5.13333333,9.54366197 L5.13333333,27.6619718 L3,27.6619718 L3,4 L5.2,4 L12.2,22.1183099 L12.2,4 L14.3333333,4 L14.3333333,27.6619718 L12.1333333,27.6619718 L5.13333333,9.54366197 Z M23.3333333,7.53802817 C26.4666667,7.53802817 29,10.1070423 29,13.284507 L29,18.2535211 C29,21.4309859 26.4666667,24 23.3333333,24 C20.2333333,24 17.6666667,21.4309859 17.6666667,18.2535211 L17.6666667,13.284507 C17.6666667,10.1070423 20.2333333,7.53802817 23.3333333,7.53802817 Z M23.3333333,9.70140845 C21.4333333,9.70140845 19.8333333,11.2901408 19.8,13.2169014 L19.8,18.2535211 C19.8,20.2478873 21.4,21.8366197 23.3333333,21.8366197 C25.2666667,21.8366197 26.8666667,20.2478873 26.8666667,18.3211268 L26.8666667,13.284507 C26.8666667,11.2901408 25.3,9.70140845 23.3333333,9.70140845 Z M17.5,26 L29,26 L29,28 L17.5,28 L17.5,26 Z",id:"\\u5F62\\u72B6\\u7ED3\\u5408",fill:"#999999"}))))},qr=r.forwardRef((function(e,t){return r.createElement(Qr,Xr({svgRef:t},e))})),$r=["svgRef","title"];function eo(){return eo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eo.apply(this,arguments)}function to(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var no=function(e){var t=e.svgRef,n=e.title,o=to(e,$r);return r.createElement("svg",eo({width:"32px",height:"32px",viewBox:"0 0 32 32",ref:t},o),void 0===n?Kr||(Kr=r.createElement("title",null,"图标/任务流/文本")):n?r.createElement("title",null,n):null,Jr||(Jr=r.createElement("g",{id:"\\u56FE\\u6807/\\u4EFB\\u52A1\\u6D41/\\u6587\\u672C",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},r.createElement("path",{d:"M28.425829,24.7932961 C29.3089005,24.7932961 30,25.4972067 30,26.396648 C30,27.2960894 29.3089005,28 28.425829,28 C27.5427574,28 26.8516579,27.2960894 26.8516579,26.396648 C26.8516579,25.4972067 27.5427574,24.7932961 28.425829,24.7932961 Z M28.2529817,11.6648045 L28.2529817,13.7094972 C28.086679,13.6759777 27.8871157,13.6759777 27.654292,13.6759777 C25.7251806,13.6759777 24.1619352,15.3854749 24.1286746,17.3631285 L24.1286746,27.6871508 L22,27.6871508 L22,12 L24.1286746,12 L24.1286746,13.7765363 C25.0932303,12.4692737 26.5566941,11.6648045 28.1864606,11.6648045 L28.2529817,11.6648045 Z M8.11993953,4 C11.4792542,4 14.2066185,6.7150838 14.2398791,10.0670391 L14.2398791,10.6703911 L12.1112044,10.6703911 L12.1112044,10.1675978 C12.1112044,7.95530726 10.3483958,6.1452514 8.11993953,6.1452514 C5.95800437,6.1452514 4.1951957,7.92178771 4.12867462,10.1005587 L4.12867462,10.6703911 C4.12867462,12.1452514 4.56106165,13.150838 5.35931463,13.8882682 C5.72518058,14.1899441 6.15756761,14.4916201 6.72299681,14.7597765 L6.78951789,14.7932961 C7.18864438,14.9944134 7.55451033,15.1284916 8.25298169,15.4301676 L8.85167143,15.6648045 C9.61666387,15.9664804 9.98252982,16.1340782 10.4481774,16.3687151 C11.1799093,16.7374302 11.8118596,17.1396648 12.3107677,17.6089385 C13.375105,18.547486 14.0070553,19.7541899 14.2066185,21.3296089 L14.2398791,21.3296089 L14.2398791,22.4022346 C13.9405342,25.5530726 11.3129515,28 8.11993953,28 C4.7606249,28 2,25.2513966 2,21.8324022 L2,21.3296089 L4.12867462,21.3296089 L4.12867462,21.8994413 C4.1951957,24.0782123 5.95800437,25.8547486 8.11993953,25.8547486 C10.2486141,25.8547486 12.0114228,24.1787709 12.1112044,22.0670391 C12.0779439,20.7597765 11.6455569,19.8882682 10.913825,19.1843575 C10.547959,18.8826816 10.115572,18.5810056 9.55014279,18.3128492 L9.4836217,18.2793296 C9.08449521,18.0782123 8.71862926,17.9441341 8.0201579,17.6424581 L7.42146817,17.4078212 C6.65647573,17.1061453 6.25734924,16.9385475 5.79170166,16.7039106 C5.05996976,16.3351955 4.46128003,15.9329609 3.96237191,15.4636872 C2.69847136,14.3240223 2.03326054,12.7821229 2,10.7374302 L2,10.1675978 C2,6.74860335 4.7606249,4 8.11993953,4 Z M18.3922392,7.75418994 L18.3922392,11.9441341 L20.6872165,11.9441341 L20.6872165,13.9553073 L18.3922392,13.9553073 L18.3922392,24.5810056 C18.3922392,25.2849162 18.9576684,25.8547486 19.6561398,25.8547486 L20.653956,25.8547486 L20.653956,28 L19.6561398,28 C17.82681,28 16.2968251,26.4916201 16.2635646,24.6480447 L16.2635646,13.9553073 L14.0351083,13.9553073 L14.0351083,11.9441341 L16.2635646,11.9441341 L16.2635646,7.75418994 L18.3922392,7.75418994 Z",id:"\\u8DEF\\u5F84-2",fill:"#999999"}))))},ro=r.forwardRef((function(e,t){return r.createElement(no,eo({svgRef:t},e))}));var oo=function(e){var t=e.type,n=e.className;return r.createElement(r.Fragment,null,function(){switch(t){case"String":case"text":return r.createElement(ro,{className:"".concat($n," ").concat(n)});case"Integer":return r.createElement(qr,{className:"".concat($n," ").concat(n)});case"Array<Object>":case"Array<String>":case"Array<Integer>":return r.createElement(Ar,{className:"".concat($n," ").concat(n)});case"DateTime":return r.createElement(Ir,{className:"".concat($n," ").concat(n)});case"url":case"iframe":return r.createElement(zr,{className:"".concat($n," ").concat(n)});case"pic":return r.createElement(Hr,{className:"".concat($n," ").concat(n)});default:return r.createElement(w.A,{type:"warning",className:"".concat($n," ").concat(n)})}}())};function ao(e){return ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ao(e)}function io(e,t,n){return t=function(e){var t=function(e,t){if("object"!=ao(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ao(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ao(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return co(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return co(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function co(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function uo(e){var t=e.infos,n=e.emptyText,o=e.noIcon,a=void 0!==o&&o,i=lo((0,r.useState)(!1),2),l=i[0],c=i[1],u=(0,r.useRef)(null),d=(0,r.useCallback)((function(e){return t.map((function(t,n){var o=""===t.name,i=t.name?t.name:"未定义";return r.createElement("span",{key:n,className:"".concat(Qn," ").concat(o?qn:"")},a?null:r.createElement(oo,{className:"".concat($n),type:t.type}),r.createElement("span",{title:"ellipsis"===e?i:void 0,className:$()(io({},er,a))},i))}))}),[t]),s=(0,r.memo)((function(){return r.createElement("div",{className:tr},r.createElement("div",null),r.createElement("div",null,r.createElement(dr.A,{className:nr,tip:r.createElement("div",{className:rr},d("ellipsis"))},r.createElement(gr,null))))}));return(0,r.useEffect)((function(){if(t.length){var e=u.current;if(e){var n=new ResizeObserver((function(){c(e.scrollWidth>e.clientWidth)}));return n.observe(e),function(){n.disconnect()}}}}),[t]),r.createElement("div",{className:Kn},t.length?r.createElement(r.Fragment,null,r.createElement("div",{className:"".concat(Jn),ref:u},d()),l?r.createElement(s,null):null):r.createElement("div",{className:lr},n))}var so=(0,r.memo)(uo);function fo(e){var t=e.data,n=(e.selected,(0,r.useMemo)((function(){var e;return(null===(e=t.nodeData)||void 0===e?void 0:e.inputVarList)||[]}),[t.nodeData])),o=(0,r.useMemo)((function(){var e;return(null===(e=t.nodeData)||void 0===e?void 0:e.outputVarList)||[]}),[t.nodeData]);return r.createElement("div",{className:Yn.nodeInfo},r.createElement(ur,{label:"输入"},r.createElement(so,{infos:n,emptyText:"未配置输入"})),r.createElement(ur,{label:"输出"},r.createElement(so,{infos:o,emptyText:"未配置输出"})))}var mo,po,vo=(0,r.memo)(fo),yo=(n(55638),n(97)),go=n(51885),ho=n(52579),bo=["svgRef","title"];function Eo(){return Eo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Eo.apply(this,arguments)}function Co(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var wo=function(e){var t=e.svgRef,n=e.title,o=Co(e,bo);return r.createElement("svg",Eo({width:"32px",height:"32px",viewBox:"0 0 32 32",ref:t},o),void 0===n?mo||(mo=r.createElement("title",null,"0.全局样式/1.图标/4.基础面性图标/减少")):n?r.createElement("title",null,n):null,po||(po=r.createElement("g",{id:"0.\\u5168\\u5C40\\u6837\\u5F0F/1.\\u56FE\\u6807/4.\\u57FA\\u7840\\u9762\\u6027\\u56FE\\u6807/\\u51CF\\u5C11",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},r.createElement("path",{d:"M16,0 C24.836556,0 32,7.163444 32,16 C32,24.836556 24.836556,32 16,32 C7.163444,32 0,24.836556 0,16 C0,7.163444 7.163444,0 16,0 Z M23,14 L9,14 C8.44771525,14 8,14.4477153 8,15 L8,17 C8,17.5522847 8.44771525,18 9,18 L23,18 C23.5522847,18 24,17.5522847 24,17 L24,15 C24,14.4477153 23.5522847,14 23,14 Z",id:"\\u5F62\\u72B6\\u7ED3\\u5408",fill:"#666666"}))))},Oo=r.forwardRef((function(e,t){return r.createElement(wo,Eo({svgRef:t},e))})),Ao="icon-index-BXgId";function Lo(e,t){var n=e.className;return r.createElement("div",{className:$()(Ao,n),ref:t},r.createElement(w.A,{type:"menu"}))}var So=r.forwardRef(Lo),No=n(50496),xo=n.n(No);function jo(e,t,n){switch(t){case"editNode":case"saveFlow":case"newNode":case"delNode":case"editFlow":case"init":e.invokeAsync(t,n)}}n(43816),n(21545),n(70895),n(82499),n(51303),n(2182),n(31475),n(1705),n(49331),n(99933),n(71323),n(48788),n(44453),n(37135),n(98592),n(7551),n(96038),n(89298),n(3402),n(50996),n(78546),n(80839),n(70963);var Po=n(13446),Io=n.n(Po),ko=n(74527),Fo=n.n(ko);n(60965),n(21969),n(24941),n(89514),n(33995),n(31861),n(63469),n(28163),n(47469),n(66875),n(40486),n(3458),n(19928),n(36161);function Do(e,t){try{var n=function(e){for(var t=new Map,n=new Map,r=0;r<e.length;r++){var o=e[r],a=o.data.nodeName;t.has(a)&&o.data.nodeType!==Q.Hv.StartLoopAction&&o.data.nodeType!==Q.Hv.StartParallelAction&&(n.set(e[r].id,"node"),n.set(t.get(e[r].data.nodeName),"node")),t.set(a,e[r].id)}var i=Array.from(n).map((function(e){return{id:e[0],type:e[1],errInfo:Q.oM.SAME_NAME}}));return{hasErr:i.length>0,errIdList:i}}(e);if(n.hasErr)return n;var r=function(e,t){var n=!1,r=[],o=!1,a=!1,i=!1;function l(a,i){if(a){var c=i.findIndex((function(e){return e===a.id}));if(-1!==c)return n=!0,void(r=r.concat(i.slice(c,i.length).map((function(e){return{errInfo:Q.oM.RING,type:"node",id:e}}))));if(!n&&!o){var u=i.concat(a.id),d=t.filter((function(e){return e.source===a.id})).map((function(t){return e.find((function(e){return e.id===t.target}))}));if(0===d.length&&a.data.nodeType!==Q.Hv.Output)return o=!0,void(r=r.concat({errInfo:Q.oM.NOT_LINK_OUTPUT,type:"node",id:a.id}));d.forEach((function(e){l(e,u)}))}}}for(var c=e.find((function(e){return e.data.nodeType===Q.Hv.Input})),u=[],d=function(n){if(e[n].data.nodeType===Q.Hv.Input){if(!t.find((function(t){return t.source===e[n].id})))return a=!0,r.push({errInfo:Q.oM.DISCRETE,type:"node",id:e[n].id}),0}else if(e[n].data.nodeType===Q.Hv.Output){if(!t.find((function(t){return t.target===e[n].id})))return a=!0,r.push({errInfo:Q.oM.DISCRETE,type:"node",id:e[n].id}),0}else{if(!t.find((function(t){return t.source===e[n].id}))&&!t.find((function(t){return t.target===e[n].id}))&&e[n].data.nodeType!==Q.Hv.StartLoopAction&&e[n].data.nodeType!==Q.Hv.StartParallelAction)return a=!0,r.push({errInfo:Q.oM.DISCRETE,type:"node",id:e[n].id}),0;if(!(e[n].parentNode||t.find((function(t){return t.source===e[n].id}))&&t.find((function(t){return t.target===e[n].id}))))return i=!0,r.push({errInfo:Q.oM.UNCLOSE,type:"node",id:e[n].id}),0;e[n].parentNode&&e[n].data.nodeType!==Q.Hv.StartLoopAction&&e[n].data.nodeType!==Q.Hv.StartParallelAction&&!t.find((function(t){return t.target===e[n].id}))&&(i=!0,r.push({errInfo:Q.oM.UNCLOSE,type:"node",id:e[n].id}))}},s=0;s<e.length;s++)d(s);return l(c,u),{hasErr:n||o||a||i,errIdList:r}}(e,t);return r.hasErr?r:{hasErr:!1,errIdList:[]}}catch(e){return{hasErr:!1,errIdList:[]}}}var Mo=n(30095);n(34258);function Ro(e){return!(function(e){return null===e}(e)||function(e){return void 0===e}(e)||function(e){return Number.isNaN(e)}(e))}var To=n(77764);function Ho(e){return Ho="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ho(e)}function Vo(){Vo=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),l=new P(r||[]);return o(i,"_invoke",{value:S(e,n,l)}),i}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var f="suspendedStart",m="suspendedYield",p="executing",v="completed",y={};function g(){}function h(){}function b(){}var E={};u(E,i,(function(){return this}));var C=Object.getPrototypeOf,w=C&&C(C(I([])));w&&w!==n&&r.call(w,i)&&(E=w);var O=b.prototype=g.prototype=Object.create(E);function A(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function n(o,a,i,l){var c=s(e[o],e,a);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==Ho(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(d).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,l)}))}l(c.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function S(t,n,r){var o=f;return function(a,i){if(o===p)throw new Error("Generator is already running");if(o===v){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var l=r.delegate;if(l){var c=N(l,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=p;var u=s(t,n,r);if("normal"===u.type){if(o=r.done?v:m,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=v,r.method="throw",r.arg=u.arg)}}}function N(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,N(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var a=s(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,y;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(Ho(t)+" is not iterable")}return h.prototype=b,o(O,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:h,configurable:!0}),h.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},A(L.prototype),u(L.prototype,l,(function(){return this})),t.AsyncIterator=L,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new L(d(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},A(O),u(O,c,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return l.type="throw",l.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function _o(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function Bo(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){_o(a,r,o,i,l,"next",e)}function l(e){_o(a,r,o,i,l,"throw",e)}i(void 0)}))}}function Uo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Uo(Object(n),!0).forEach((function(t){Zo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zo(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Ho(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ho(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ho(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zo(){var e=(0,E.PI)();return{resetErrCode:function(){var t=e.getState(),n=t.getNodes,r=t.setNodes,o=t.edges,a=t.setEdges,i=n(),l=(0,W.jM)(i,(function(e){e.forEach((function(e){var t=e.data;t.hasErr=!1,t.errInfo=[]}))})),c=(0,W.jM)(o,(function(e){e.forEach((function(e){var t=e.selected,n=(0,Mo.bi)(e.markerEnd,e.style,!1,t),r=n.markerEnd,o=n.style;e.markerEnd=r,e.style=o,e.data=Wo(Wo({},e.data),{},{hasErr:!1,errInfo:[]})}))}));r(l),a(c)},setErrCode:function(t){var n=e.getState(),r=n.getNodes,o=n.setNodes,a=n.edges,i=n.setEdges,l=r(),c=(0,W.jM)(l,(function(e){e.forEach((function(e){var n=t.errIdList.find((function(t){return t.id===e.id&&"node"===t.type}));n&&(e.data=Wo(Wo({},e.data),{},{hasErr:!0,errInfo:e.data.errInfo.concat(n.errInfo)}))}))})),u=(0,W.jM)(a,(function(e){e.forEach((function(e){var n=t.errIdList.find((function(t){return t.id===e.id&&"edge"===t.type}));if(n){var r=e.data;if(r){var o=(0,Mo.bi)(e.markerEnd,e.style,!0,e.selected),a=o.markerEnd,i=o.style;e.markerEnd=a,e.style=i,e.data=Wo(Wo({},r),{},{hasErr:!0,errInfo:r.errInfo.concat(n.errInfo)})}}}))}));o(c),i(u)}}}function Go(e,t){var n=new(Io().graphlib.Graph);n.setDefaultEdgeLabel((function(){return{}}));var r=Fo()(e).filter((function(e){return!e.parentNode})),o=Fo()(t).filter((function(e){var t;return!(null!==(t=e.data)&&void 0!==t&&t.isInIteration)}));return n.setGraph({rankdir:"TB",align:"UL",nodesep:120,ranksep:60,ranker:"tight-tree",marginx:200,marginy:30}),r.forEach((function(e){n.setNode(e.id,{width:e.width,height:e.height})})),o.forEach((function(e){n.setEdge(e.source,e.target)})),Io().layout(n),n}function Xo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Yo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ko=xo()((function(e){e()}),5e3);function Jo(){var e,t=(0,E.PI)(),n=(zo().setErrCode,b((function(e){return{model:e.model}})).model),o=(e=(0,E.VH)(),{handleUpdateWorkflowCanvas:(0,r.useCallback)((function(t){t.nodes,t.edges;var n=t.viewport;(0,e.setViewport)(n)}),[e]),handleRefreshWorkflowDraft:(0,r.useCallback)((function(){}),[])}).handleRefreshWorkflowDraft,a=(0,r.useCallback)((function(){var e=t.getState(),n=e.getNodes,r=(e.edges,Xo(e.transform,3));r[0],r[1],r[2],n()}),[t]),i=(0,r.useCallback)((function(){a()}),[a]),l=(0,r.useCallback)((function(e){var t=a();t&&n&&jo(n,"saveFlow",t)}),[a,o]),c=(0,r.useCallback)((function(e,t){e?l(t):Ko(l)}),[l]);return{doSyncWorkflowDraft:l,handleSyncWorkflowDraft:c,syncWorkflowDraftWhenPageClose:i}}function Qo(e){return Qo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qo(e)}function qo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qo(Object(n),!0).forEach((function(t){ea(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ea(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Qo(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Qo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Qo(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ta(){var e=(0,E.PI)(),t=Jo().handleSyncWorkflowDraft,n=(0,r.useCallback)((function(t){var n=t.id,r=t.data,o=e.getState(),a=o.getNodes,i=o.setNodes,l=(0,W.jM)(a(),(function(e){var t=e.find((function(e){return e.id===n}));t&&(t.data=$o($o({},t.data),r)),r.nodeData&&(t.data.nodeData=$o($o({},t.data.nodeData),r.nodeData))}));i(l)}),[e]),o=(0,r.useCallback)((function(e){n(e),t()}),[t,n]);return{handleNodeDataUpdate:n,handleNodeDataUpdateWithSyncDraft:o}}var na=n(13827),ra="collapseWrap-index-vid6E",oa="content-index-bk5Ce";function aa(e){var t=e.children,n=e.title,o=e.className,a=void 0===o?"":o;return r.createElement("div",{className:"".concat(ra," ").concat(a)},r.createElement(na.A,{accordion:!0,defaultActiveKey:["collapse1"]},r.createElement(na.A.Panel,{header:n,panelKey:"collapse1"},r.createElement("div",{className:oa},t))))}var ia=(0,r.memo)(aa),la="formItem-index-BrnVu",ca="isVertical-index-ZOm1p",ua="labelWrap-index-YCAdR",da="inputWrap-index-hdc0D",sa="inputContent-index-Q_JC4",fa="label-index-TEn1x",ma="require-index-LKBBG",pa="tips-index-uWdFh",va="hasError-index-Q0ZNt",ya="errorInfo-index-QZJ7d",ga="tooltip-index-Lvxrw";function ha(e){return ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ha(e)}function ba(e,t,n){return t=function(e){var t=function(e,t){if("object"!=ha(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ha(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ha(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ea(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ca(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ca(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ca(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var wa=[{name:"Radio",propName:"checked"},{name:"Checkbox",propName:"checked"},{name:"Switch",propName:"checked"},{name:"Upload",propName:"fileList"},{name:"Transfer",propName:"targetKeys"}],Oa=["value","checked"];function Aa(e){var t,n=e.label,o=e.children,a=e.style,i=e.isRequire,l=e.requireMsg,c=e.className,u=void 0===c?"":c,d=e.labelClass,s=e.labelStyle,f=e.inputClass,m=e.labelTips,p=e.name,v=e.contentStyle,y=e.layout,g=void 0===y?"horizontal":y,h=e.errorMsg,E=(b((function(e){return{isLock:e.isLock}})).isLock,Ea((0,r.useState)(""),2)),C=E[0],O=E[1],A=!(!h&&!C),L=null,S="value",N=function(e){var t=[];return r.Children.forEach(e,(function(e){t.push(e)})),t}(o);N.length&&(L=N[0]);var x=null===(t=L)||void 0===t||null===(t=t.type)||void 0===t?void 0:t.displayName;if(x){var j=wa.filter((function(e){return x===e.name}));j.length&&(S=j[0].propName)}var P=function(e){if(!e)return{};var t=e.props.onChange,n={onChange:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var o=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if("RadioGroup"===x&&n)t=n[1];else if(e&&Object.prototype.hasOwnProperty.call(e,"target")&&Oa.includes(S)){var r;t=null===(r=e.target)||void 0===r?void 0:r[S]}else t=e;return t}(n[0],n);O(!o&&i&&l?l:""),"function"==typeof t&&t.apply(void 0,n)}};return n},I=(0,r.useCallback)((function(){return(0,r.isValidElement)(o)?r.cloneElement(o,P(o)):o}),[o]);return r.createElement("div",{className:$()(u,la,ba({},ca,"vertical"===g)),"data-name":p,style:a},r.createElement("div",{className:$()(ua,d),style:s},r.createElement("label",{className:"".concat(i?ma:""," ").concat(fa)},n,m?r.createElement(dr.A,{tip:m,className:ga},r.createElement(w.A,{type:"tips",className:pa})):null)),r.createElement("div",{className:$()(da,f,ba({},va,A)),style:v},r.createElement("div",{className:sa},I()),A?r.createElement("div",{className:ya},h||C):null))}var La=(0,r.memo)(Aa);function Sa(e){return Sa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sa(e)}function Na(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Na(Object(n),!0).forEach((function(t){ja(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Na(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ja(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Sa(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Sa(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Sa(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Pa=yo.Ay.Option;function Ia(e){var t=ta().handleNodeDataUpdate,n=e.node,o=n.data,a=void 0===o?{}:o,i=a.nodeName,l=a.nodeData,c=(l.outputVarList,l.inputVarList),u=void 0===c?[]:c,d=function(e,r){var o=n.data,a=r.split("."),i=(0,W.jM)(o,(function(t){1===a.length?t[a[0]]=e:2===a.length&&(t[a[0]][a[1]]=e)}));t({id:n.id,data:i})},s=function(e){var t=e.val,n=e.key,r=e.id,o=(0,W.jM)(u,(function(e){e.find((function(e){return e._id===r}))[n]=t}));d(o,"nodeData.inputVarList")};return r.createElement("div",{className:Yn.panel},r.createElement(ia,{title:"输入",className:Yn.inputVarCollapse},r.createElement("div",{className:Yn.inputVar},r.createElement("div",{className:Yn.header},r.createElement("div",{className:Yn.col1},"变量名"),r.createElement("div",{className:Yn.col2},"变量类型"),r.createElement("div",{className:Yn.col3},"描述"),r.createElement("div",{className:Yn.col4})),r.createElement("div",{className:Yn.list},r.createElement(go.ReactSortable,{list:u.map((function(e){return xa(xa({},e),{},{id:e._id})})),setList:function(e){return function(e){t({id:n.id,data:{nodeData:{inputVarList:e.map((function(e){return{_id:e._id,desc:e.desc,name:e.name,type:e.type,value:e.value,isInput:e.isInput}}))}}})}(e)},handle:".gai-flow-drag-handle"},u.map((function(e){var o=e._id,a=e.desc,i=(e.isInput,e.name),l=e.type;return r.createElement("div",{key:o,className:Yn.line},u.length>1?r.createElement(So,{className:"".concat(Yn.handle," gai-flow-drag-handle")}):null,r.createElement("div",{className:Yn.col1},r.createElement(An.Ay,{value:i,onChange:function(e){return s({val:e.target.value,key:"name",id:o})}})),r.createElement("div",{className:Yn.col2},r.createElement(yo.Ay,{value:l,onChange:function(e){return s({val:e,key:"type",id:o})}},r.createElement(Pa,{value:1},"等于"),r.createElement(Pa,{value:2},"大于"))),r.createElement("div",{className:Yn.col3},r.createElement(An.Ay,{value:a,onChange:function(e){return s({val:e.target.value,key:"desc",id:o})}})),r.createElement("div",{className:Yn.col4},r.createElement(Oo,{className:Yn.reduceIcon,onClick:function(){return e=o,r=(0,W.jM)(u,(function(t){var n=t.findIndex((function(t){return t._id===e}));t.splice(n,1)})),void t({id:n.id,data:{nodeData:{inputVarList:r}}});var e,r}})))})))),r.createElement(wn.A,{type:"primary",ghost:!0,className:Yn.addAction,icon:r.createElement(w.A,{type:"add"}),onClick:function(){return e=(0,W.jM)(u,(function(e){e.push({_id:(0,ho.A)()})})),void t({id:n.id,data:{nodeData:{inputVarList:e}}});var e}},"添加"))),r.createElement(ia,{title:"接口配置"},r.createElement(La,{isRequire:!0,label:"应用",name:"name"},r.createElement(An.Ay,{readOnly:!0,value:i,className:Yn.search,onClick:function(){},suffix:r.createElement(w.A,{type:"search"})})),r.createElement(La,{isRequire:!0,label:"类名",name:"desc"},r.createElement(An.Ay,{value:i,onChange:function(e){return d(e,"nodeName")}})),r.createElement(La,{isRequire:!0,label:"操作名称",name:"desc"},r.createElement(An.Ay,{value:i,onChange:function(e){return d(e,"nodeName")}}))),r.createElement(ia,{title:"输出"},"//"))}var ka=(0,r.memo)(Ia),Fa={nodeInfo:"nodeInfo-index-UdM0E"},Da=["system.user_input","system.chat_history","system.chat_sessionid"];function Ma(e){var t=e.data,n=(e.selected,(0,r.useMemo)((function(){var e;return(null===(e=t.nodeData.inputVars)||void 0===e?void 0:e.filter((function(e){return!Da.includes(e.name)})))||[]}),[t.nodeData]));return r.createElement("div",{className:Fa.nodeInfo},r.createElement(ur,{label:"输入"},r.createElement(so,{infos:n,emptyText:"未配置输入"})))}var Ra=(0,r.memo)(Ma);function Ta(e){var t=ta().handleNodeDataUpdate,n=e.node,o=function(e,r){var o=e.target.value,a=n.data,i=r.split("."),l=(0,W.jM)(a,(function(e){1===i.length?e[i[0]]=o:2===i.length&&(e[i[0]][i[1]]=o)}));t({id:n.id,data:l})};return r.createElement("div",{className:Fa.panel},r.createElement(ia,{title:"基本信息"},r.createElement(La,{isRequire:!0,label:"名称",name:"name"},r.createElement(An.Ay,{value:n.data.nodeName,onChange:function(e){return o(e,"nodeName")}})),r.createElement(La,{label:"说明",name:"desc"},r.createElement(An.Ay,{value:n.data.nodeData.desc,onChange:function(e){return o(e,"nodeData.desc")}}))),r.createElement(ia,{title:"输入"},"1"))}var Ha=(0,r.memo)(Ta),Va="wrapper-index-ncqLu",_a="content-index-X8cLh",Ba="icon-index-Vj_Jw";function Ua(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Wa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wa(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Za(e){var t,n=e.data,o=e.id,a=n.edges,i=Ua((0,r.useState)(!1),2),l=i[0],c=i[1];return r.createElement("div",{className:Va,onMouseEnter:function(){return c(!0)},onMouseLeave:function(){return c(!1)}},r.createElement("div",{className:_a},r.createElement("span",{className:Ba},r.createElement(qt,{bgColor:"#5582F3"},r.createElement(gt,null))),r.createElement("span",null,"开始")),r.createElement(be,{id:"bottom",nodeId:o,connected:!(null==a||null===(t=a.bottom)||void 0===t||!t.length),showHandle:l,position:E.yX.Bottom}))}var za=(0,r.memo)(Za),Ga="wrapper-index-dNV5i",Xa="content-index-NGUGP",Ya="icon-index-LbLPx";function Ka(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ja(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ja(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ja(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Qa(e){var t,n=e.data,o=e.id,a=n.edges,i=Ka((0,r.useState)(!1),2),l=i[0],c=i[1];return r.createElement("div",{className:Ga,onMouseEnter:function(){return c(!0)},onMouseLeave:function(){return c(!1)}},r.createElement("div",{className:Xa},r.createElement("span",{className:Ya},r.createElement(qt,{bgColor:"#5582F3"},r.createElement(gt,null))),r.createElement("span",null,"开始")),r.createElement(be,{id:"bottom",nodeId:o,connected:!(null==a||null===(t=a.bottom)||void 0===t||!t.length),showHandle:l,position:E.yX.Bottom}))}var qa=(0,r.memo)(Qa),$a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAKKADAAQAAAABAAAAKAAAAAB65masAAAEdElEQVRYCc1Zb2wURRT/7d5xB0cL7V2vLVJbqWKt1FahYKJJAw1W8IPBREgwhhgkMdVEIiYaY2JICMaYgDFGSVBJVBKUfgTRFCiYoCZY1BSpEMIBlRbo9Q9tr23u2tt13tTbdNfdnd2lvfYl15158+a937zZN2/2VYKB1rS8sUxVlW0q1AYJKGXDOQaRqe4mVKBDgtQsSfIXp+o/ujDZAMMwQRsP7wzEC/r2qioaGVPO8LP5ZEAVScK+aE94R9OmnSmyzQESuO5I/w8S1PpsArKypUJqKezNX08guafIc7MF3ITX1HrCxNv0zilqum2mttXai1BkyVctU0DMNnATXgTHJlO0Wq1ipvmETWbeo6NkVhJh8zNktuecX/Zh65Jn0LBoFV9E882zOHD1GMaVdDYWlUMAbYnAbS5bq8lk2vuvHNF409kQHsgZz00GYcabPG7WZpkCDcUr0fjABtSGHzITMeUJPWg2yy/5zNi2vMalG7Dx3tVcZlPpGuxu/wYnbrXazqFBoQfpnTPSmXibkSXsr/vvHc4IriueeKczfaunECAFxKHrJ9CbGkTXaA9a+y6irrAGJaFCK52m/IFUQsfvTw3p+lYd4RZTtFJAZIKC3qX3ql7CBzWv4NXWvRgcG7bSrfGD8hx0J+9oi+pkC6WFOyFp9cnX2SXCHQV9AXyyfDtG00m807Yfa4tW4LH8pSgILkRPcgA/df+J0+xHtGheBLseeZm3328/iJQyzndCURXOE/3xBJCURoN52LfyTeT65yHAPGSkX3r+Qsvt37G94nmciZ/Hx5eakFTGjGLCvnCLrTQMjY8grSim4GjOEwVV/Lfn4rc42vWrlRohXxgkVhpeLGtA4dw8q2GNPzA2orW9NDwDrI1UOLJXF612JGcl5BlgaajISqeOXzQ3rOu77XgGGGfHhhPqH3N23lnp8gzw/J2YlU4d/1zfJV3fbcczwK+v/ejo2LiS6HSLSSfvGeCS+fewRC5Z3gtvjMTR9M9p7Hn0NTy7+EnNaCSwAPRzSp7OwVWRSp4dPo8d5Vljy31PoybvfoRZJrma6MIf/Zdx8PpxJNMpnO1tx7vLtrBM8yAWzAlhOXsS0dbvuvAVBgSp0nUmobvc7upt+DL2PQ53nHLkCMo6n9Xu4Klw8gS6btG1y46EHpzPUtnW8vUoCxXjcuIGniupw4HYMcfgyDhFfND3/3T4eMHDdtj4mBDgW5WbURet4cIrwhU4efscvutoESo2CgyyjJLrD+nYxBORMEiM1/P8QK5Ip+m42aLMeMbJQg/G2DFRtbBcm3dt+KbWdtM40vkzhlhAPMW+S4iO3/pNu5LZ6REGSUkoircrX0B5zmJ+m/7w70MYHh+10zmlYwSQcpHtt/GUWnSnLMFKH+hwNyd70oSNlT6k5uyZdGeJsMlUdmVInX0guNN/V9KEibDJVBOmsutdaZuGyYSJsPFzkGrCVHadBjueVBIWwkSTOUCqBVNNmF1OPp3J7ea2GYZMfZoAshKcnmbbvyH+Bf4jf7/TeQQyAAAAAElFTkSuQmCC",ei={nodeInfo:"nodeInfo-index-FjTjF",text:"text-index-ddnII",panel:"panel-index-ERObN",search:"search-index-wYsQ4",collapseTitleTipsIcon:"collapseTitleTipsIcon-index-bmmRT",header:"header-index-thsc1",list:"list-index-Yr0ge",line:"line-index-_vm0j",col1:"col1-index-sX7an",col2:"col2-index-nWIRx"};var ti=function(e){var t=e.img,n=e.text,o=e.emptyText;return r.createElement(r.Fragment,null,n?r.createElement("div",{className:"".concat(ir)},r.createElement("img",{src:t}),r.createElement("span",{title:n},n)):r.createElement("div",{className:lr},o))};function ni(e){var t,n=e.data,o=(e.selected,(0,r.useMemo)((function(){var e;return(null===(e=n.nodeData)||void 0===e?void 0:e.inputVarList)||[]}),[n.nodeData])),a=(0,r.useMemo)((function(){var e;return(null===(e=n.nodeData)||void 0===e?void 0:e.outputVarList)||[]}),[n.nodeData]);return r.createElement("div",{className:ei.nodeInfo},r.createElement(ur,{label:"输入"},r.createElement(so,{infos:o,emptyText:"未配置输入"})),r.createElement(ur,{label:"输出"},r.createElement(so,{infos:a,emptyText:"未配置输出"})),r.createElement(ur,{label:"模型"},r.createElement(ti,{img:$a,text:null===(t=n.nodeData)||void 0===t?void 0:t.llmPromptLLM,emptyText:"未配置模型"})))}var ri=(0,r.memo)(ni),oi=n(39583);function ai(e){var t=ta().handleNodeDataUpdate,n=e.node,o=n.data,a=void 0===o?{}:o,i=a.nodeName,l=a.outputVarList,c=void 0===l?[{id:"1",name:"outputVarListoutputVarListoutputVarListoutputVarListoutputVarList",type:"typetypetypetypetypetype"},{id:"2",name:"outputVarList",type:"type"}]:l,u=(a.inputVarList,function(e,r){var o=n.data,a=r.split("."),i=(0,W.jM)(o,(function(t){1===a.length?t[a[0]]=e:2===a.length&&(t[a[0]][a[1]]=e)}));t({id:n.id,data:i})});return r.createElement("div",{className:ei.panel},r.createElement(ia,{title:"模型"},r.createElement(La,{isRequire:!0,label:"使用模型",name:"name"},r.createElement(An.Ay,{readOnly:!0,value:i,className:ei.search,onClick:function(){},suffix:r.createElement(w.A,{type:"search"})})),r.createElement(La,{label:"消息展示",name:"desc",labelTips:"打开开关后，可将输出变量直接流式展示在侧边栏的智能助手对话流程中。"},r.createElement(oi.A,{onChange:function(e){return u(e,"nodeName")}})),r.createElement(La,{label:"合并展示",name:"desc",labelTips:r.createElement(r.Fragment,null,r.createElement("div",null,"开启后，可将本节点生成内容合并展示在上个消息节点中，生成内容不会再单独展示。"),r.createElement("div",null,"注意：需开启【消息展示】开关，上个节点是消息节点时合并才会生效。"))},r.createElement(oi.A,{onChange:function(e){return u(e,"nodeName")}}))),r.createElement(ia,{title:"输入"},r.createElement(La,{isRequire:!0,label:"用户输入来源",name:"name",labelStyle:{width:"90px"},errorMsg:"用户输入来源用户输入来源用户输入来源",labelTips:r.createElement(r.Fragment,null,r.createElement("div",null,"选择语言模型的用户输入来源；"),r.createElement("div",null,"默认选择“用户输入”选项，此选项表示，会将终端用户在侧边栏输入框中输入的内容发送给语言模型，可根据实际需要变更来源。"))},r.createElement(yo.Ay,{onChange:function(e){return u(e,"nodeName")}})),r.createElement(La,{label:"动态知识库",name:"desc",labelStyle:{width:"90px"},labelTips:r.createElement(r.Fragment,null,"支持通过自定义操作输出变量传入知识库ID列表。知识库ID列表需选择文本类型输出，并使用逗号连接知识库ID。形如：“1820341804784956416,1820341838096117760,18203418570208184320”。")},r.createElement(yo.Ay,{onChange:function(e){return u(e,"nodeName")}}))),r.createElement(ia,{title:r.createElement(r.Fragment,null,r.createElement("span",null,"输出"),r.createElement(dr.A,{tip:"从对应GPT提示的输出变量中获取。"},r.createElement(w.A,{type:"tips",className:ei.collapseTitleTipsIcon})))},r.createElement("div",{className:ei.output},r.createElement("div",{className:ei.header},r.createElement("div",{className:ei.col1},"参数"),r.createElement("div",{className:ei.col2},"参数类型")),r.createElement("div",{className:ei.list},c.map((function(e){return r.createElement("div",{key:e.id,className:ei.line},r.createElement("div",{className:$()(ei.col1),title:e.name},e.name),r.createElement("div",{className:$()(ei.col2),title:e.type},e.type))}))))))}var ii=(0,r.memo)(ai),li=n(53673),ci="wrap-index-wvDje",ui="iter-index-DbC1V";function di(e){var t=e.id,n=(e.data,e.selected,(0,E.kW)().zoom),o=b((function(e){return{flowId:e.flowId}})).flowId;return r.createElement("div",{className:ci},r.createElement("div",{className:ui},r.createElement(li.V,{id:"_".concat(o,"_gai_flow_iter_").concat(t),gap:[20/n,20/n],size:1/n,color:"#999999",style:{backgroundColor:"#f5f5f5"}})))}var si=(0,r.memo)(di);function fi(){return r.createElement("div",null,"LoopPanel")}var mi=(0,r.memo)(fi);function pi(e){e.data,e.selected;return r.createElement(r.Fragment,null)}var vi=(0,r.memo)(pi);function yi(){return r.createElement("div",null,"SetVariableActionPanel")}var gi=(0,r.memo)(yi);function hi(e){e.data,e.selected;return r.createElement(r.Fragment,null)}var bi=(0,r.memo)(hi),Ei={nodeText:"nodeText-index-puqAy",panel:"panel-index-GmFm8",collapseTitleTipsIcon:"collapseTitleTipsIcon-index-tCqMQ",viewCollapse:"viewCollapse-index-x_gm2",inputVar:"inputVar-index-XFGaV",header:"header-index-UGFFL",line:"line-index-x7aAq",handle:"handle-index-NWPuZ",col1:"col1-index-FKLhz",col2:"col2-index-P4jyJ",col3:"col3-index-lzw1H",col4:"col4-index-yZEWY",addAction:"addAction-index-g1Ari",updateWrap:"updateWrap-index-SQr63",switchWrap:"switchWrap-index-v56os",remark:"remark-index-Nm4Mv",tooltip:"tooltip-index-Apl5V"};function Ci(e){return Ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ci(e)}function wi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wi(Object(n),!0).forEach((function(t){Ai(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ai(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Ci(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ci(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ci(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Li=yo.Ay.Option;function Si(e){var t=ta().handleNodeDataUpdate,n=e.node,o=n.data,a=void 0===o?{}:o,i=(a.nodeName,a.nodeData.inputVarList),l=void 0===i?[{_id:"111",desc:"",isInput:!1,name:"string",type:"string",value:"string"},{_id:"222",desc:"",isInput:!1,name:"string11",type:"string1",value:"string111"}]:i,c=function(e,r){var o=n.data,a=r.split("."),i=(0,W.jM)(o,(function(t){1===a.length?t[a[0]]=e:2===a.length&&(t[a[0]][a[1]]=e)}));t({id:n.id,data:i})},u=function(e){var t=e.val,n=e.key,r=e.id,o=(0,W.jM)(l,(function(e){e.find((function(e){return e._id===r}))[n]=t}));c(o,"nodeData.inputVarList")};return r.createElement("div",{className:Ei.panel},r.createElement(ia,{title:r.createElement(r.Fragment,null,r.createElement("span",null,"展示配置"),r.createElement(dr.A,{className:Ei.tooltip,tip:r.createElement(r.Fragment,null,r.createElement("div",null,"默认按列表中顺序显示，若需要调整顺序，可点击”上移”、“下移”进行调整。"),r.createElement("div",null,"支持展示文本、链接、图片及iframe框架信息。"),r.createElement("div",null,"注意，文字类信息没有流式生成效果，若需要流式文字效果，请通过配置GPT提示节点实现。"))},r.createElement(w.A,{type:"tips",className:Ei.collapseTitleTipsIcon}))),className:Ei.viewCollapse},r.createElement("div",{className:Ei.inputVar},r.createElement("div",{className:Ei.header},r.createElement("div",{className:Ei.col1},"参数类型"),r.createElement("div",{className:Ei.col2},"来源"),r.createElement("div",{className:Ei.col3},"用户输入"),r.createElement("div",{className:Ei.col4})),r.createElement("div",{className:Ei.list},r.createElement(go.ReactSortable,{list:l.map((function(e){return Oi(Oi({},e),{},{id:e._id})})),setList:function(e){return function(e){t({id:n.id,data:{nodeData:{inputVarList:e.map((function(e){return{_id:e._id,desc:e.desc,name:e.name,type:e.type,value:e.value,isInput:e.isInput}}))}}})}(e)},handle:".gai-flow-drag-handle"},l.map((function(e){var o=e._id,a=e.desc,i=(e.isInput,e.name,e.type);return r.createElement("div",{key:o,className:Ei.line},l.length>1?r.createElement(So,{className:"".concat(Ei.handle," gai-flow-drag-handle")}):null,r.createElement("div",{className:Ei.col1},r.createElement(yo.Ay,{value:i,onChange:function(e){return u({val:e,key:"type",id:o})}},r.createElement(Li,{value:1},"等于"),r.createElement(Li,{value:2},"大于"))),r.createElement("div",{className:Ei.col2},r.createElement(yo.Ay,{value:i,onChange:function(e){return u({val:e,key:"type",id:o})}},r.createElement(Li,{value:1},"等于"),r.createElement(Li,{value:2},"大于"))),r.createElement("div",{className:Ei.col3},r.createElement(An.Ay,{value:a,onChange:function(e){return u({val:e.target.value,key:"desc",id:o})}})),r.createElement("div",{className:Ei.col4},r.createElement(Oo,{className:Ei.reduceIcon,onClick:function(){return e=o,r=(0,W.jM)(l,(function(t){var n=t.findIndex((function(t){return t._id===e}));t.splice(n,1)})),void t({id:n.id,data:{nodeData:{inputVarList:r}}});var e,r}})))})))),r.createElement(wn.A,{type:"primary",ghost:!0,className:Ei.addAction,icon:r.createElement(w.A,{type:"add"}),onClick:function(){return e=(0,W.jM)(l,(function(e){e.push({_id:(0,ho.A)()})})),void t({id:n.id,data:{nodeData:{inputVarList:e}}});var e}},"添加"))),r.createElement(ia,{title:"更新"},r.createElement(La,{label:"更新上一条消息",name:"update",labelStyle:{width:"88px"},style:{height:"auto"}},r.createElement("div",{className:Ei.updateWrap},r.createElement("div",{className:Ei.switchWrap},r.createElement(oi.A,{onChange:function(e){return c(e,"update")}})),r.createElement("div",{className:Ei.remark},"勾选后，可将本消息内容替换展示到上一个消息节点，若前置节点中没有消息节点不会生效。")))))}var Ni=(0,r.memo)(Si),xi="nodeInfo-index-W3wj3";function ji(e){var t=e.data,n=(e.selected,(0,r.useMemo)((function(){return t.nodeData.outputVars||[]}),[t.nodeData]));return r.createElement("div",{className:xi},r.createElement(ur,{label:"输出"},r.createElement(so,{infos:n,emptyText:"未配置输出"})))}var Pi=(0,r.memo)(ji);function Ii(){return r.createElement("div",null,"OutputPanel")}var ki=(0,r.memo)(Ii),Fi={nodeInfo:"nodeInfo-index-ORPQj",text:"text-index-J7GL0",panel:"panel-index-EVcUs",collapseTitleTipsIcon:"collapseTitleTipsIcon-index-YUsPK",header:"header-index-y7UZT",list:"list-index-PgVBq",line:"line-index-yu__B",col1:"col1-index-KQV2z",col2:"col2-index-Qeyzf",input:"input-index-FKfnv",col3:"col3-index-COkHj",output:"output-index-xAC_m"};function Di(e){var t=e.data,n=(e.selected,(0,r.useMemo)((function(){var e;return(null===(e=t.nodeData)||void 0===e?void 0:e.inputVarList)||[]}),[t.nodeData])),o=(0,r.useMemo)((function(){var e;return(null===(e=t.nodeData)||void 0===e?void 0:e.outputVarList)||[]}),[t.nodeData]),a=(0,r.useMemo)((function(){var e;return(null===(e=t.nodeData)||void 0===e||null===(e=e.repoName)||void 0===e?void 0:e.map((function(e){return{name:e}})))||[]}),[t.nodeData]);return r.createElement("div",{className:Fi.nodeInfo},r.createElement(ur,{label:"输入"},r.createElement(so,{infos:n,emptyText:"未配置输入"})),r.createElement(ur,{label:"输出"},r.createElement(so,{infos:o,emptyText:"未配置输出"})),r.createElement(ur,{label:"知识库"},r.createElement(so,{noIcon:!0,infos:a,emptyText:"未配置知识库"})))}var Mi=(0,r.memo)(Di),Ri=n(98084),Ti=[{text:"向量检索",id:"1"},{text:"全文检索",id:"2"},{text:"混合检索",id:"3"}],Hi=yo.Ay.Option;function Vi(e){var t=ta().handleNodeDataUpdate,n=e.node,o=n.data,a=void 0===o?{}:o,i=(a.nodeName,a.outputVarList),l=void 0===i?[{id:"1",name:"outputVarListoutputVarListoutputVarListoutputVarListoutputVarList",type:"typetypetypetypetypetype"},{id:"2",name:"outputVarList",type:"type"}]:i,c=(a.inputVarList,function(e,r){var o=n.data,a=r.split("."),i=(0,W.jM)(o,(function(t){1===a.length?t[a[0]]=e:2===a.length&&(t[a[0]][a[1]]=e)}));t({id:n.id,data:i})});return r.createElement("div",{className:Fi.panel},r.createElement(ia,{title:"输入",className:Fi.inputVarCollapse},r.createElement("div",{className:Fi.input},r.createElement("div",{className:Fi.header},r.createElement("div",{className:Fi.col1},"参数名"),r.createElement("div",{className:Fi.col2},"参数类型"),r.createElement("div",{className:Fi.col3},"说明"),r.createElement("div",{className:Fi.col4})),r.createElement("div",{className:Fi.list},l.map((function(e){return r.createElement("div",{key:e.id,className:Fi.line},r.createElement("div",{className:$()(Fi.col1),title:e.name},e.name),r.createElement("div",{className:$()(Fi.col2),title:e.type},e.type),r.createElement("div",{className:$()(Fi.col3),title:e.type},r.createElement(An.Ay,{onChange:function(){}})))}))))),r.createElement(ia,{title:r.createElement(r.Fragment,null,r.createElement("span",null,"知识库"),r.createElement(dr.A,{tip:r.createElement(r.Fragment,null,r.createElement("div",null,"配置知识库作为上下文，支持多个。"),r.createElement("div",null,"请确保配置的知识库类型统一。"))},r.createElement(w.A,{type:"tips",className:Fi.collapseTitleTipsIcon})))},r.createElement(r.Fragment,null,r.createElement(La,{label:"检索模式",name:"name",labelStyle:{width:"90px"}},r.createElement(yo.Ay,{onChange:function(e){return c(e,"nodeName")}},Ti.map((function(e){return r.createElement(Hi,{key:e.id,value:e.id},e.text)})))),r.createElement(La,{label:"最大召回数量",name:"name",labelStyle:{width:"90px"}},r.createElement(Ri.A,{min:1,max:100,step:1,onChange:function(e){return c(e,"nodeName")}})),r.createElement(La,{label:"最小匹配度",name:"name",labelStyle:{width:"90px"}},r.createElement(Ri.A,{min:0,max:1,step:.01,onChange:function(e){return c(e,"nodeName")}})),r.createElement(La,{label:"重排序开关",name:"name",labelStyle:{width:"90px"}},r.createElement(oi.A,{onChange:function(e){return c(e,"nodeName")}})))),r.createElement(ia,{title:"输出"},r.createElement("div",{className:Fi.output},r.createElement("div",{className:Fi.header},r.createElement("div",{className:Fi.col1},"参数"),r.createElement("div",{className:Fi.col2},"参数类型")),r.createElement("div",{className:Fi.list},l.map((function(e){return r.createElement("div",{key:e.id,className:Fi.line},r.createElement("div",{className:$()(Fi.col1),title:e.name},e.name),r.createElement("div",{className:$()(Fi.col2),title:e.type},e.type))}))))))}var _i=(0,r.memo)(Vi),Bi={nodeInfo:"nodeInfo-index-Bt54_",text:"text-index-KA1gF",panel:"panel-index-deHAu",inputVarCollapse:"inputVarCollapse-index-IRT8R",input:"input-index-nb83w",header:"header-index-s7RWv",line:"line-index-Cf566",handle:"handle-index-kIPRj",col1:"col1-index-OFlEG",col2:"col2-index-C8hHb",col3:"col3-index-v0mRu",col4:"col4-index-iUO9p",addAction:"addAction-index-MP__l",output:"output-index-ET9kv",list:"list-index-rpwYu"};function Ui(e){var t,n=e.data,o=(e.selected,(0,r.useMemo)((function(){var e;return(null===(e=n.nodeData)||void 0===e?void 0:e.inputVarList)||[]}),[n.nodeData]));return r.createElement("div",{className:Bi.nodeInfo},r.createElement(ur,{label:"输入"},r.createElement(so,{infos:o,emptyText:"未配置输入"})),r.createElement(ur,{label:"模型"},r.createElement(ti,{img:$a,text:null===(t=n.nodeData)||void 0===t?void 0:t.llmPromptLLM,emptyText:"未配置模型"})))}var Wi=(0,r.memo)(Ui),Zi=n(80403);function zi(e){return zi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zi(e)}function Gi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gi(Object(n),!0).forEach((function(t){Yi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Yi(e,t,n){return t=function(e){var t=function(e,t){if("object"!=zi(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=zi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==zi(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ki=yo.Ay.Option;function Ji(e){var t=ta().handleNodeDataUpdate,n=e.node,o=n.data,a=void 0===o?{}:o,i=(a.nodeName,a.nodeData),l=i.inputVarList,c=i.outputVarList;c=c||[],l=l||[{_id:"111",desc:"",isInput:!1,name:"string",type:"string",value:"string"},{_id:"222",desc:"",isInput:!1,name:"string11",type:"string1",value:"string111"}];var u=function(e,r){var o=n.data,a=r.split("."),i=(0,W.jM)(o,(function(t){1===a.length?t[a[0]]=e:2===a.length&&(t[a[0]][a[1]]=e)}));t({id:n.id,data:i})},d=function(e){var t=e.val,n=e.key,r=e.id,o=(0,W.jM)(l,(function(e){e.find((function(e){return e._id===r}))[n]=t}));u(o,"nodeData.inputVarList")};return r.createElement("div",{className:Bi.panel},r.createElement(ia,{title:"输入",className:Bi.inputVarCollapse},r.createElement("div",{className:Bi.input},r.createElement("div",{className:Bi.header},r.createElement("div",{className:Bi.col1},"参数名"),r.createElement("div",{className:Bi.col2},"说明"),r.createElement("div",{className:Bi.col3},"来源参数"),r.createElement("div",{className:Bi.col4})),r.createElement("div",{className:Bi.list},r.createElement(go.ReactSortable,{list:l.map((function(e){return Xi(Xi({},e),{},{id:e._id})})),setList:function(e){return function(e){t({id:n.id,data:{nodeData:{inputVarList:e.map((function(e){return{_id:e._id,desc:e.desc,name:e.name,type:e.type,value:e.value,isInput:e.isInput}}))}}})}(e)},handle:".gai-flow-drag-handle"},l.map((function(e){var o=e._id,a=e.desc,i=(e.isInput,e.name,e.type);return r.createElement("div",{key:o,className:Bi.line},l.length>1?r.createElement(So,{className:"".concat(Bi.handle," gai-flow-drag-handle")}):null,r.createElement("div",{className:Bi.col1},r.createElement(An.Ay,{value:a,onChange:function(e){return d({val:e.target.value,key:"desc",id:o})}})),r.createElement("div",{className:Bi.col2},r.createElement(An.Ay,{value:a,onChange:function(e){return d({val:e.target.value,key:"desc",id:o})}})),r.createElement("div",{className:Bi.col3},r.createElement(yo.Ay,{value:i,onChange:function(e){return d({val:e,key:"type",id:o})}},r.createElement(Ki,{value:1},"等于"),r.createElement(Ki,{value:2},"大于"))),r.createElement("div",{className:Bi.col4},r.createElement(Oo,{className:Bi.reduceIcon,onClick:function(){return e=o,r=(0,W.jM)(l,(function(t){var n=t.findIndex((function(t){return t._id===e}));t.splice(n,1)})),void t({id:n.id,data:{nodeData:{inputVarList:r}}});var e,r}})))})))),r.createElement(wn.A,{type:"primary",ghost:!0,className:Bi.addAction,icon:r.createElement(w.A,{type:"add"}),onClick:function(){return e=(0,W.jM)(l,(function(e){e.push({_id:(0,ho.A)()})})),void t({id:n.id,data:{nodeData:{inputVarList:e}}});var e}},"添加"))),r.createElement(ia,{title:"回复配置",className:Bi.viewCollapse},r.createElement(La,{isRequire:!0,label:"语言模型",name:"update",labelStyle:{width:"88px"}},r.createElement(yo.Ay,{onChange:function(e){return u(e,"nodeName")}})),r.createElement(La,{label:"引用开关",name:"update",labelStyle:{width:"88px"}},r.createElement(oi.A,{onChange:function(e){return u(e,"update")}})),r.createElement(La,{label:"消息展示",name:"update",labelStyle:{width:"88px"}},r.createElement(oi.A,{onChange:function(e){return u(e,"update")}})),r.createElement(La,{label:"提问内容（用户提示词）",layout:"vertical",name:"update"},r.createElement(Zi.A,{autoSize:{minRows:2,maxRows:6},borderType:"bordered"})),r.createElement(La,{label:"提问内容（用户提示词）",layout:"vertical",name:"update"},r.createElement(Zi.A,{autoSize:{minRows:2,maxRows:6},borderType:"bordered"}))),r.createElement(ia,{title:"输出"},r.createElement("div",{className:Bi.output},r.createElement("div",{className:Bi.header},r.createElement("div",{className:Bi.col1},"参数"),r.createElement("div",{className:Bi.col2},"参数类型")),r.createElement("div",{className:Bi.list},c.map((function(e){return r.createElement("div",{key:e.id,className:Bi.line},r.createElement("div",{className:$()(Bi.col1),title:e.name},e.name),r.createElement("div",{className:$()(Bi.col2),title:e.type},e.type))}))))))}var Qi=(0,r.memo)(Ji),qi={nodeInfo:"nodeInfo-index-pNQqx",panel:"panel-index-m29WR",collapseTitleTipsIcon:"collapseTitleTipsIcon-index-shjgt",viewCollapse:"viewCollapse-index-EmjRk",inputVar:"inputVar-index-QRo3S",header:"header-index-n3gZz",line:"line-index-PYlzx",handle:"handle-index-p73Ld",col1:"col1-index-bxJO_",col2:"col2-index-oS7lq",col3:"col3-index-KU6w9",col4:"col4-index-WV1T_",addAction:"addAction-index-a7UEd",updateWrap:"updateWrap-index-VEoco",switchWrap:"switchWrap-index-LQLq4",remark:"remark-index-DYjRR",tooltip:"tooltip-index-HtvIL"};function $i(e){var t=e.data,n=(e.selected,(0,r.useMemo)((function(){var e;return(null===(e=t.nodeData)||void 0===e?void 0:e.outputVarList)||[]}),[t.nodeData]));return r.createElement("div",{className:qi.nodeInfo},r.createElement(ur,{label:"输出"},r.createElement(so,{infos:n,emptyText:"未配置输出"})))}var el=(0,r.memo)($i);function tl(e){return tl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tl(e)}function nl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nl(Object(n),!0).forEach((function(t){ol(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ol(e,t,n){return t=function(e){var t=function(e,t){if("object"!=tl(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=tl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tl(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var al=yo.Ay.Option;function il(e){var t=ta().handleNodeDataUpdate,n=e.node,o=n.data,a=void 0===o?{}:o,i=(a.nodeName,a.nodeData.inputVarList);i=i||[{_id:"111",desc:"",isInput:!1,name:"string",type:"string",value:"string"},{_id:"222",desc:"",isInput:!1,name:"string11",type:"string1",value:"string111"}];var l=function(e,r){var o=n.data,a=r.split("."),i=(0,W.jM)(o,(function(t){1===a.length?t[a[0]]=e:2===a.length&&(t[a[0]][a[1]]=e)}));t({id:n.id,data:i})},c=function(e){var t=e.val,n=e.key,r=e.id,o=(0,W.jM)(i,(function(e){e.find((function(e){return e._id===r}))[n]=t}));l(o,"nodeData.inputVarList")};return r.createElement("div",{className:qi.panel},r.createElement(ia,{title:r.createElement(r.Fragment,null,r.createElement("span",null,"展示配置"),r.createElement(dr.A,{className:qi.tooltip,tip:r.createElement(r.Fragment,null,r.createElement("div",null,"默认按列表中顺序显示，若需要调整顺序，可点击”上移”、“下移”进行调整。"),r.createElement("div",null,"支持展示文本、链接、图片及iframe框架信息。"),r.createElement("div",null,"注意，文字类信息没有流式生成效果，若需要流式文字效果，请通过配置GPT提示节点实现。"))},r.createElement(w.A,{type:"tips",className:qi.collapseTitleTipsIcon}))),className:qi.viewCollapse},r.createElement("div",{className:qi.inputVar},r.createElement("div",{className:qi.header},r.createElement("div",{className:qi.col1},"参数类型"),r.createElement("div",{className:qi.col2},"来源"),r.createElement("div",{className:qi.col3},"用户输入"),r.createElement("div",{className:qi.col4})),r.createElement("div",{className:qi.list},r.createElement(go.ReactSortable,{list:i.map((function(e){return rl(rl({},e),{},{id:e._id})})),setList:function(e){return function(e){t({id:n.id,data:{nodeData:{inputVarList:e.map((function(e){return{_id:e._id,desc:e.desc,name:e.name,type:e.type,value:e.value,isInput:e.isInput}}))}}})}(e)},handle:".gai-flow-drag-handle"},i.map((function(e){var o=e._id,a=e.desc,l=(e.isInput,e.name,e.type);return r.createElement("div",{key:o,className:qi.line},i.length>1?r.createElement(So,{className:"".concat(qi.handle," gai-flow-drag-handle")}):null,r.createElement("div",{className:qi.col1},r.createElement(yo.Ay,{value:l,onChange:function(e){return c({val:e,key:"type",id:o})}},r.createElement(al,{value:1},"等于"),r.createElement(al,{value:2},"大于"))),r.createElement("div",{className:qi.col2},r.createElement(yo.Ay,{value:l,onChange:function(e){return c({val:e,key:"type",id:o})}},r.createElement(al,{value:1},"等于"),r.createElement(al,{value:2},"大于"))),r.createElement("div",{className:qi.col3},r.createElement(An.Ay,{value:a,onChange:function(e){return c({val:e.target.value,key:"desc",id:o})}})),r.createElement("div",{className:qi.col4},r.createElement(Oo,{className:qi.reduceIcon,onClick:function(){return e=o,r=(0,W.jM)(i,(function(t){var n=t.findIndex((function(t){return t._id===e}));t.splice(n,1)})),void t({id:n.id,data:{nodeData:{inputVarList:r}}});var e,r}})))})))),r.createElement(wn.A,{type:"primary",ghost:!0,className:qi.addAction,icon:r.createElement(w.A,{type:"add"}),onClick:function(){return e=(0,W.jM)(i,(function(e){e.push({_id:(0,ho.A)()})})),void t({id:n.id,data:{nodeData:{inputVarList:e}}});var e}},"添加"))),r.createElement(ia,{title:"用户输入配置"},r.createElement(La,{label:"允许用户输入",name:"update",labelStyle:{width:"88px"}},r.createElement(oi.A,{onChange:function(e){return l(e,"update")}}))))}var ll=(0,r.memo)(il),cl="wrap-index-xj9yt",ul="iter-index-GYqld";function dl(e){var t=e.id,n=(e.data,e.selected,(0,E.kW)().zoom),o=b((function(e){return{flowId:e.flowId}})).flowId;return r.createElement("div",{className:cl},r.createElement("div",{className:ul},r.createElement(li.V,{id:"_".concat(o,"_gai_flow_iter_").concat(t),gap:[20/n,20/n],size:1/n,color:"#999999",style:{backgroundColor:"#f5f5f5"}})))}var sl=(0,r.memo)(dl);function fl(){return r.createElement("div",null,"ParallelPanel 属性")}var ml,pl,vl=(0,r.memo)(fl);function yl(e){return yl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yl(e)}function gl(e,t,n){return t=function(e){var t=function(e,t){if("object"!=yl(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=yl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==yl(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var hl={custom:vn,custom_iteration_start:za,custom_parallel_start:qa},bl=(gl(gl(gl(gl(gl(gl(gl(gl(gl(gl(ml={},Q.Hv.LoopAction,si),Q.Hv.StartLoopAction,za),Q.Hv.RepoAction,Mi),Q.Hv.RepoReplyAction,Wi),Q.Hv.AskUserAction,el),Q.Hv.MessageAction,bi),Q.Hv.LLMAction,ri),Q.Hv.JavaPluginAction,vo),Q.Hv.Input,Ra),Q.Hv.Output,Pi),gl(gl(gl(gl(ml,Q.Hv.SetVariableAction,vi),Q.Hv.BreakLoopAction,gn),Q.Hv.CodeAction,Cn),Q.Hv.ParallelAction,sl)),El=(gl(gl(gl(gl(gl(gl(gl(gl(gl(gl(pl={},Q.Hv.LoopAction,mi),Q.Hv.RepoAction,_i),Q.Hv.RepoReplyAction,Qi),Q.Hv.AskUserAction,ll),Q.Hv.MessageAction,Ni),Q.Hv.LLMAction,ii),Q.Hv.JavaPluginAction,ka),Q.Hv.Input,Ha),Q.Hv.Output,ki),Q.Hv.SetVariableAction,gi),gl(gl(gl(pl,Q.Hv.BreakLoopAction,bn),Q.Hv.CodeAction,Xn),Q.Hv.ParallelAction,vl),["LLMAction","JavaPluginAction","MessageAction","RepoAction","RepoReplyAction","LoopAction","AskUserAction","BreakLoopAction","SetVariableAction","LoopAction","CodeAction","ParallelAction"]),Cl=n(33045),wl=n(38455),Ol=n(15560);function Al(e){return Al="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Al(e)}function Ll(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ll(Object(n),!0).forEach((function(t){Nl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ll(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Nl(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Al(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Al(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Al(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xl(e){return xl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xl(e)}function jl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jl(Object(n),!0).forEach((function(t){Il(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Il(e,t,n){return t=function(e){var t=function(e,t){if("object"!=xl(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=xl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==xl(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var kl="select";function Fl(e,t){var n=t.filter((function(t){return e.id===t.source})),r=t.filter((function(t){return e.id===t.target}));e.data.nodeType===Q.Hv.Input?e.data.edges={bottom:n.filter((function(e){return"bottom"===e.sourceHandle})).map((function(e){return e.id})),left:n.filter((function(e){return"left"===e.sourceHandle})).map((function(e){return e.id})),right:n.filter((function(e){return"right"===e.sourceHandle})).map((function(e){return e.id}))}:e.data.nodeType===Q.Hv.Output?e.data.edges={top:r.filter((function(e){return"top"===e.targetHandle})).map((function(e){return e.id})),left:r.filter((function(e){return"left"===e.targetHandle})).map((function(e){return e.id})),right:r.filter((function(e){return"right"===e.targetHandle})).map((function(e){return e.id}))}:e.data.edges={top:r.filter((function(e){return"top"===e.targetHandle})).map((function(e){return e.id})),left:r.filter((function(e){return"left"===e.targetHandle})).map((function(e){return e.id})),right:n.filter((function(e){return"right"===e.sourceHandle})).map((function(e){return e.id})),bottom:n.filter((function(e){return"bottom"===e.sourceHandle})).map((function(e){return e.id}))}}function Dl(){var e=(0,E.PI)(),t=y(),n=fe(),o=Jo().handleSyncWorkflowDraft,a=t.getState().isLock,i=(0,r.useCallback)((function(){var t=e.getState(),n=t.edges;(0,t.setEdges)((0,W.jM)(n,(function(e){e.forEach((function(e){e.selected=!1;var t=e.data,n=(0,Mo.bi)(e.markerEnd,e.style,t.hasErr,e.selected),r=n.markerEnd,o=n.style;e.markerEnd=r,e.style=o,t.selected&&(t.selected=!1)}))})))}),[e]),l=function(e,n){var r=n;if(0===e.length)return r;var o=e.find((function(e){return e.type===kl&&e.selected}));if(o){var a=t.getState().model,i=n.find((function(e){return e.id===(null==o?void 0:o.id)}));if(a){r=function(e,t){var n=(0,W.jM)(t,(function(t){t.forEach((function(t){if(t.id===e){var n=t.data.errInfo.filter((function(e){return e.code===Q.oM.OTHER.code})),r=n.length>0,o=t.selected,a=(0,Mo.bi)(t.markerEnd,t.style,r,o),i=a.markerEnd,l=a.style;t.markerEnd=i,t.style=l,t.data=Pl(Pl({},t.data),{},{hasErr:r,errInfo:n})}}))}));return n}(i.id,n);var l={id:Number(i.id),typeName:i.data.edgeType,type:J[i.data.edgeType].backendId,nodeName:i.data.edgeName};setTimeout((function(){jo(a,"editNode",l)}),200)}}return r},c=(0,r.useCallback)((function(n,r){var o=t.getState(),a=o.rightPanelShow,i=o.setRightPanelShow,l=(0,e.getState().getNodes)().find((function(e){return e.id===r.source}));a||"StartLoopAction"===(null==l?void 0:l.data.nodeType)||i(!0)}),[t,e]),u=(0,r.useCallback)((function(n){var r=t.getState(),o=r.isLock,a=r.setSelectedNode;if(!o){var i=e.getState(),c=i.edges,u=i.setEdges,d=i.getNodes,s=i.setNodes,f=(0,W.jM)(c,(function(e){n.forEach((function(t){if(t.type===kl){var n,r=e.find((function(e){return e.id===t.id}));r.selected=t.selected;var o=null===(n=r.data)||void 0===n?void 0:n.hasErr,a=(0,Mo.bi)(r.markerEnd,r.style,o,r.selected),i=a.markerEnd,l=a.style;r.markerEnd=i,r.style=l}}))}));if(u(f=l(n,f)),n.some((function(e){return"select"===e.type&&e.selected}))){a(null);var m=d();s((0,W.jM)(m,(function(e){e.forEach((function(e){return e.data.selected=e.selected}))})))}}}),[e,t,a]),d=(0,r.useCallback)((function(r){var a=e.getState(),i=a.edges,l=a.setEdges,c=a.getNodes,u=a.setNodes,d=n.getState().setHoverEdge,s=t.getState(),f=s.model;if(!s.isLock){var m=[];if((m=r||i.filter((function(e){return e.selected}))).length>0){var p=(0,W.jM)(i,(function(e){m.forEach((function(t){var n=e.findIndex((function(e){return e.id===t.id}));e.splice(n,1)}))}));setTimeout((function(){var e=c(),t=(0,W.jM)(e,(function(e){e.forEach((function(e){Fl(e,p)}))}));u(t)})),l(p),d(),function(e,t){t&&0!==e.length&&jo(t,"delNode",{nodeIds:[],transferIds:e.map((function(e){return Number(e.id)}))})}(m,f)}o()}}),[e,t,o]),s=(0,r.useCallback)((function(t){var n=t.source,r=t.target,o=(0,(0,e.getState)().getNodes)(),a=o.find((function(e){return e.id===n})),i=o.find((function(e){return e.id===r}));return(null==a?void 0:a.parentNode)===(null==i?void 0:i.parentNode)}),[e]),f=(0,r.useCallback)((function(r,o){var a=e.getState(),i=a.edges,l=a.setEdges,c=t.getState().isLock,u=n.getState().setHoverEdge;if(!c){var d=(0,W.jM)(i,(function(e){var t,n=e.find((function(e){return e.id===o.id}));n.selected=o.selected;var r=null===(t=n.data)||void 0===t?void 0:t.hasErr,a=(0,Mo.bi)(n.markerEnd,n.style,r,n.selected,!0),i=a.markerEnd,l=a.style;n.markerEnd=i,n.style=l}));u(o),l(d)}}),[]),m=(0,r.useCallback)((function(r,o){var a=e.getState(),i=a.edges,l=a.setEdges,c=t.getState().isLock,u=n.getState().setHoverEdge;if(!c){var d=(0,W.jM)(i,(function(e){var t,n=e.find((function(e){return e.id===o.id}));n.selected=o.selected;var r=null===(t=n.data)||void 0===t?void 0:t.hasErr,a=(0,Mo.bi)(n.markerEnd,n.style,r,n.selected,!1),i=a.markerEnd,l=a.style;n.markerEnd=i,n.style=l}));u(),l(d)}}),[]);return{resetEdgeSelect:i,handleEdgeClick:c,handleEdgesChange:u,handleEdgeDel:d,handleEdgeMouseEnter:f,handleEdgeMouseLeave:m,isValidConnection:s}}n(64506);function Ml(e){return Ml="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ml(e)}function Rl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rl(Object(n),!0).forEach((function(t){Hl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Hl(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Ml(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ml(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ml(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vl(e){return function(e){if(Array.isArray(e))return _l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return _l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _l(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Bl(){var e=(0,r.useRef)(1),t=(0,r.useRef)(),n=(0,r.useRef)(!1),o=(0,r.useRef)(!1),a=(0,r.useRef)(),i=(0,E.PI)(),l=(0,E.kW)().zoom,c=(0,E.VH)().getEdges,u=y(),d=fe(),s=Dl(),f=s.handleEdgeDel,m=s.resetEdgeSelect,p=ne().handleNodeIterationChildDrag,v=function(){var e=(0,E.PI)(),t=fe(),n=(0,r.useCallback)((function(n){var r=(0,e.getState().getNodes)(),o=t.getState(),a=o.setHelpLineHorizontal,i=o.setHelpLineVertical,l=n.parentNode?r.find((function(e){return e.id===n.parentNode})):void 0,c=n.parentNode?r.filter((function(e){return e.parentNode===n.parentNode})):r.filter((function(e){return!e.parentNode})),u=c.filter((function(e){if(e.id===n.id)return!1;var t=Math.ceil(e.position.y),r=Math.ceil(n.position.y);return t-r<5&&t-r>-5})).sort((function(e,t){return e.position.x-t.position.x})),d=u.length;if(d>0){var s=u[0],f=u[d-1],m={top:l?s.position.y+l.position.y:s.position.y,left:l?s.position.x+l.position.x:s.position.x,width:f.position.x+f.width-s.position.x};n.position.x<s.position.x&&(m.left=l?n.position.x+l.position.x:n.position.x,m.width=f.position.x+f.width-n.position.x),n.position.x>f.position.x&&(m.width=n.position.x+n.width-s.position.x),a(m)}else a();var p=c.filter((function(e){if(e.id===n.id)return!1;var t=Math.ceil(e.position.x),r=Math.ceil(n.position.x);return t-r<5&&t-r>-5})).sort((function(e,t){return e.position.x-t.position.x})),v=p.length;if(v>0){var y=p[0],g=p[v-1],h={top:l?y.position.y+l.position.y:y.position.y,left:l?y.position.x+l.position.x:y.position.x,height:g.position.y+g.height-y.position.y};n.position.y<y.position.y&&(h.top=l?n.position.y+l.position.y:n.position.y,h.height=g.position.y+g.height-n.position.y),n.position.y>g.position.y&&(h.height=n.position.y+n.height-y.position.y),i(h)}else i();return{showHorizontalHelpLineNodes:u,showVerticalHelpLineNodes:p}}),[e,t]);return{handleSetHelpline:n}}(),g=v.handleSetHelpline,h=Jo().handleSyncWorkflowDraft,b=(0,r.useRef)({x:0,y:0}),C=function t(n,r){var o="".concat(r,"_").concat(e.current++);return n.find((function(e){return e.data.nodeName===o}))?t(n,r):o},w=(0,r.useCallback)((function(){var e=i.getState(),t=e.getNodes,n=e.setNodes,r=t();n((0,W.jM)(r,(function(e){e.forEach((function(e){e.selected=!1;var t=e.data;t.selected&&(t.selected=!1)}))})))}),[i]),O=(0,r.useCallback)((function(e){var t=e.source,n=e.target,r=e.sourceHandle,o=e.targetHandle,a=i.getState(),l=a.getNodes,c=a.edges,u=l(),d=u.find((function(e){return e.id===t})),s=u.find((function(e){return e.id===n})),f=d.data.nodeType,m=s.data.nodeType;if(f===Q.Hv.Output)return!1;if(m===Q.Hv.Input)return!1;if(f!==Q.Hv.Input&&("top"===r||"left"===r))return!1;if(m!==Q.Hv.Output&&("bottom"===o||"right"===o))return!1;var p=c.some((function(e){return e.source===t&&e.target===n})),v=t===n,y=c.some((function(e){return e.source===n&&e.target===t}));return!p&&!v&&!y}),[i]),A=(0,r.useCallback)((function(e){var t=e.target,n=i.getState(),r=n.getNodes,o=n.setNodes,a=n.edges,l=n.setEdges,c=u.getState().model,d=r();if(!O(e))return!1;var s=d.find((function(e){return e.id===t})),f=(0,Ol.Xy)(String(Ol.Sz.getId()),"",e.source,e.target,e.sourceHandle,e.targetHandle);null!=s&&s.parentNode?f.zIndex=Q.wV:f.zIndex=0,f.selected=!0;var m=(0,W.jM)(a,(function(e){e.forEach((function(e){return e.selected=!1})),e.push(f)}));o((0,W.jM)(d,(function(t){t.forEach((function(t){t.selected=!1,t.data.selected=!1,t.id!==e.source&&t.id!==e.target||Fl(t,m)}))}))),l(m),h();var p=(0,Mo.SD)(f,d);if(c&&!p){var v=(0,To.Oc)(f,d,a.concat(f));return jo(c,"newNode",{id:Number(f.id),type:J[f.data.edgeType].backendId,nodes:[],transfers:[v]}),!0}}),[i,u,h]),L=(0,r.useCallback)((function(e,t){var r=e.target,o=i.getState(),a=o.getNodes,l=o.edges,u=o.setEdges,d=a(),s=d.find((function(e){return e.id===r})),f=d.find((function(e){return e.id===t.target}));(null==s?void 0:s.id)===(null==f?void 0:f.id)?(u(Vl(l).filter((function(t){return t.id!==e.id}))),setTimeout((function(){A(t)}))):A(t)&&u(Vl(c()).filter((function(t){return t.id!==e.id})));n.current=!1}),[]),S=(0,r.useCallback)((function(e,t){b.current={x:t.position.x,y:t.position.y}}),[]),N=(0,r.useCallback)((function(e,t,n,r){t.preventDefault(),t.stopPropagation();var o=(0,i.getState)(),a=o.getNodes,c=o.setNodes,u=a(),d=p(e,n,l).restrictPos,s=g(n),f=s.showHorizontalHelpLineNodes,m=s.showVerticalHelpLineNodes,v=m.length,y=f.length;c((0,W.jM)(u,(function(e){var t=e.find((function(e){return e.id===n.id})),r=(t.data,t.position);v>0?r.x=m[0].position.x:d.x?r.x=d.x:r.x=n.position.x,y>0?r.y=f[0].position.y:d.y?r.y=d.y:r.y=n.position.y})))}),[i,l,g,p]),x=(0,r.useCallback)((function(e,t){e.preventDefault(),e.stopPropagation();var n=d.getState(),r=n.setHelpLineHorizontal,o=n.setHelpLineVertical,a=b.current,i=a.x,l=a.y;i===t.position.x&&l===t.position.y||(r(),o()),h()}),[h]),j=(0,r.useCallback)((function(e){var t=i.getState(),n=t.getNodes,r=t.setNodes,o=u.getState(),a=o.model,l=o.rightPanelShow,c=o.setRightPanelShow,d=o.setSelectedNode;l||c(!0);var s=n(),f=s.find((function(t){return t.id===e})),m=(0,W.jM)(s,(function(e){e.forEach((function(e){e.id===f.id?e.data.selected=!e.data.selected:e.data.selected=!1}))}));if(d(f),a){m=function(e,t){return(0,W.jM)(t,(function(t){t.forEach((function(t){if(t.id===e){var n=t.data.errInfo.filter((function(e){return e.code===Q.oM.OTHER.code}));t.data=Sl(Sl({},t.data),{},{hasErr:n.length>0,errInfo:n})}}))}))}(f.id,m);var p={id:Number(f.id),typeName:f.data.nodeType,type:Q.nq[f.data.nodeType].backendId,nodeName:f.data.nodeName,blockNodeId:f.parentNode?f.parentNode:-1};setTimeout((function(){jo(a,"editNode",p)}),200)}r(m),h()}),[i,u,h]),P=(0,r.useCallback)((function(e,t){e.stopPropagation(),"custom_iteration_start"!==t.type&&"custom_parallel_start"!==t.type&&j(t.id)}),[j]),I=(0,r.useCallback)((function(e){var t=u.getState(),n=t.setSelectedNode,r=t.model;if(m(),w(),n(null),r){var o={id:-1,typeName:"flow"};setTimeout((function(){jo(r,"editFlow",o)}),200)}h()}),[i,u,h]),k=(0,r.useCallback)((function(e,t){var n=i.getState(),r=n.getNodes,o=n.setNodes,a=r(),l=(a.find((function(t){return t.id===e})),t.x),c=t.y,u=t.width,d=t.height,s=(0,ee.ID)(a,e),f=s.rightNode,m=s.bottomNode;if(f&&m){if(u<f.position.x+f.width+Q.gi.right)return;if(d<m.position.y+m.height+Q.gi.bottom)return}var p=(0,W.jM)(a,(function(t){var n=t.find((function(t){return t.id===e})),r=null==n?void 0:n.position,o=n.data;r.x=l,r.y=c,o.width=u,o.height=d,n.width=u,n.height=d}));o(p),h()}),[i,h]),F=(0,r.useCallback)((function(){var e=u.getState(),t=e.isLock,n=e.model,r=e.setSelectedNode;if(!t){var o=(0,i.getState)(),a=o.getNodes,l=o.setNodes,c=o.edges,d=a(),s=d.filter((function(e){return e.data.selected&&e.data.nodeType!==Q.Hv.Input&&e.data.nodeType!==Q.Hv.Output}));if(0!==s.length){var m=(0,E.AX)(s,c);s.filter((function(e){return e.data.nodeType===Q.Hv.LoopAction||e.data.nodeType===Q.Hv.ParallelAction})).forEach((function(e){var t=(0,ee.NV)(e,d,c),n=t.childNodes,r=t.childNodesRelativeEdges;s=[].concat(Vl(s),Vl(n)),m=[].concat(Vl(m),Vl(r))})),f(m);var p=(0,W.jM)(d,(function(e){s.forEach((function(t){var n=t.id,r=e.findIndex((function(e){return e.id===n}));r&&e.splice(r,1)}))}));l(p),function(e,t){if(e){var n={nodeIds:t.map((function(e){return Number(e.id)})),transferIds:[]};jo(e,"delNode",n)}}(n,s),r(null),h()}}}),[i,u,h]),D=(0,r.useCallback)((function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Q.Uv.DRAG,o=(0,i.getState)(),a=o.getNodes,l=o.setNodes,c=o.edges,d=o.setEdges,s=a(),f=u.getState(),p=f.model,v=f.selectedNode,y=f.setSelectedNode,g={id:String(Ol.Sz.getId())},b=Ol.jY[t](g),E=[];m(),w(),n&&(b.position=n),n&&r===Q.Uv.CLICK&&(b.position.y+=60*(e.current-1)),El.includes(t)&&(b.data.nodeName=C(s,b.data.nodeName),b.selected=!0),t!==Q.Hv.LoopAction&&t!==Q.Hv.ParallelAction||(b.width=Q.J2.WIDTH,b.height=Q.J2.HEIGHT,b.data=Tl(Tl({},b.data),{},{width:Q.J2.WIDTH,height:Q.J2.HEIGHT}));var O=s.find((function(e){return e.selected&&(e.data.nodeType===Q.Hv.LoopAction||e.data.nodeType===Q.Hv.ParallelAction)}));if(t!==Q.Hv.LoopAction&&t!==Q.Hv.ParallelAction&&(v&&(0,ee.VV)(v,s)||O||v&&(0,ee.B5)(v,s))){var A="";if(A=O?O.id:(null!=v&&v.parentNode&&"-1"!==v.parentNode?v.parentNode:null==v?void 0:v.id)||"",b.parentNode=A,b.data.parentNode=A,b.extent="parent",b.zIndex=Q.wV,0===s.filter((function(e){return e.parentNode&&e.parentNode===A&&e.data.nodeType!==Q.Hv.StartLoopAction&&e.data.nodeType!==Q.Hv.StartParallelAction})).length){var L=s.find((function(e){return e.parentNode===A&&(e.data.nodeType===Q.Hv.StartLoopAction||e.data.nodeType===Q.Hv.StartParallelAction)})),S=String(Ol.Sz.getId()),N=(0,Ol.Xy)(S,"","".concat(L.id),String(b.id),"bottom","top"),x=(0,W.jM)(c,(function(e){e.push(N)})),j=(0,To.cu)(N.id,N.source,N.target);E.push(j),d(x)}}if(b.parentNode){var P=(0,ee.ID)(s,b.parentNode).bottomNode;if(P){var I=P.position.y+P.height+Q.IY,k=b.position;k.y=I,k.x=Q.nh}}var F=(0,W.jM)(s,(function(e){if(e.forEach((function(e){e.selected=!1})),e.push(b),t===Q.Hv.LoopAction){var n=(0,Cl.W)({id:"".concat(String(Ol.Sz.getId())),parentNode:b.id,extend:"parent"});e.push(n)}else if(t===Q.Hv.ParallelAction){var r=(0,wl.V)({id:"".concat(String(Ol.Sz.getId())),parentNode:b.id,extend:"parent"});e.push(r)}}));if(l(F),y(b),p){var D=[],M=(0,To.x1)(b,s.concat(b),c);if(D.push(M),b.data.nodeType===Q.Hv.LoopAction||b.data.nodeType===Q.Hv.ParallelAction){var R=F.find((function(e){return e.parentNode===b.id&&(e.data.nodeType===Q.Hv.StartLoopAction||e.data.nodeType===Q.Hv.StartParallelAction)})),T=(0,To.x1)(R,F,c);D.push(T)}jo(p,"newNode",{id:Number(b.id),type:Q.nq[b.data.nodeType].backendId,nodes:D,blockNodeId:b.parentNode?b.parentNode:-1,transfers:E})}h()}),[i,u,h]);return{handleNodeDragStart:S,handleNodeDrag:N,handleNodeDragStop:x,handleNodeClick:P,handlePaneClick:I,handleNodeResize:k,handleNodeDel:F,handleAddNode:D,handleNodeConnect:A,onEdgeUpdateEnd:function(e,r,a){var l=i.getState(),u=l.getNodes,d=l.setEdges;l.edges;if(o.current=!1,n.current){var s=t.current;if(s&&s.id){var f=r.source,m=u(),p=m.find((function(e){return e.id===f})),v=m.find((function(e){return e.id===s.id}));if((null==p?void 0:p.parentNode)===(null==v?void 0:v.parentNode))if(A({source:r.source,target:s.id,sourceHandle:r.sourceHandle,targetHandle:"top"})){var y=Vl(c()).filter((function(e){return e.id!==r.id}));d(y)}}n.current=!1,t.current=void 0}},onEdgeUpdate:L,onEdgeUpdateStart:function(){n.current=!0,o.current=!0},onConnectEnd:function(e){var n=i.getState().getNodes,r=t.current,l=a.current,c=o.current,u=n().find((function(e){return e.id===(null==l?void 0:l.nodeId)}));(null==u?void 0:u.parentNode)===(null==r?void 0:r.parentNode)&&null!=l&&l.nodeId&&null!=r&&r.id&&!c&&A({source:l.nodeId,target:r.id,sourceHandle:l.handleId,targetHandle:"top"}),c||(t.current=void 0),a.current=void 0},onConnectStart:function(e,t){a.current=t,d.getState().setConnectingParams({sourceParams:t})},onNodeMouseEnter:function(e,n){t.current=n},onNodeMouseLeave:function(){t.current=void 0}}}var Ul=n(27656),Wl=n(31711),Zl={leftPanel:"leftPanel-index-og9xY",show:"show-index-QHiHT",hide:"hide-index-y3lzx",panel:"panel-index-fJfiR",title:"title-index-SygAV",icon:"icon-index-LYU7W",text:"text-index-gtiOt",panelContent:"panelContent-index-mxfvl",wrapperImage:"wrapperImage-index-_EZaQ",notDraggable:"notDraggable-index-PfteK",content:"content-index-lYODb",name:"name-index-Tk2gR",add:"add-index-m_zfH",footerWrap:"footerWrap-index-V0ulC",actions:"actions-index-D3u78",zoomInOut:"zoomInOut-index-KX8jq",rightPanel:"rightPanel-index-QJY4M",header:"header-index-hCJEN",left:"left-index-HV4Nf",isScrollTop:"isScrollTop-index-L6a9i",right:"right-index-LdD7J",flowPanel:"flowPanel-index-mc1AK",codeEditorPanel:"codeEditorPanel-index-ItYKw",headerLeft:"headerLeft-index-AqlcM",nodeName:"nodeName-index-iZ8iT",language:"language-index-VRpdA",headerRight:"headerRight-index-SQwQr",close:"close-index-HB_z2",panelCodeEditor:"panelCodeEditor-index-svNUo"},zl=(0,r.createContext)({});function Gl(e){return Gl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gl(e)}function Xl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xl(Object(n),!0).forEach((function(t){Kl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Kl(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Gl(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Gl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Gl(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ql(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ql(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ql(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ql(){var e=b((function(e){return{isLock:e.isLock,leftPanelShow:e.leftPanelShow,templateList:e.templateList,model:e.model,setLeftPanelShow:e.setLeftPanelShow,setDropPosition:e.setDropPosition}})),t=e.isLock,n=e.leftPanelShow,o=e.templateList,a=e.model,i=e.setLeftPanelShow,l=e.setDropPosition,c=(0,E.PI)(),u=(0,E.kW)().zoom,d=(0,E.VH)(),s=d.zoomIn,f=d.zoomOut,m=(d.zoomTo,d.fitView,function(){var e=(0,E.PI)(),t=(0,E.VH)(),n=(0,r.useCallback)(Bo(Vo().mark((function n(){var r,o,a,i,l,c,u,d,s;return Vo().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=e.getState(),o=r.getNodes,a=r.edges,i=r.setNodes,l=t.setViewport,c=o(),u=Go(c,a),d={},c.forEach((function(e){if(!e.parentNode){var t=u.node(e.id).rank;d[t]?d[t].position.y>e.position.y&&(d[t]=e):d[t]=e}})),s=(0,W.jM)(c,(function(e){e.forEach((function(e){if(!e.parentNode){var t=u.node(e.id);e.position={x:t.x-e.width/2,y:t.y-e.height/2}}}))})),i(s),l({x:0,y:0,zoom:.6});case 10:case"end":return n.stop()}}),n)}))),[e,t]);return{handleLayout:n}}()),p=m.handleLayout,v=(0,r.useContext)(zl).handleAddNode,y=b((function(e){return e.selectedNode})),g=Jl((0,r.useState)("none"),2),h=g[0],C=g[1],A=(0,r.useMemo)((function(){var e=(0,c.getState().getNodes)(),t=Yl({},Q.nq);return t=(0,ee.VV)(y,e)?L()(t,[Q.Hv.LoopAction,Q.Hv.ParallelAction]):(0,ee.B5)(y,e)?L()(t,[Q.Hv.LoopAction,Q.Hv.AskUserAction,Q.Hv.ParallelAction,Q.Hv.SetVariableAction,Q.Hv.BreakLoopAction]):L()(t,[Q.Hv.SetVariableAction,Q.Hv.BreakLoopAction]),Object.keys(t).map((function(e){var n=t[e];if(n.isPanel)return Yl({},n)})).filter(Boolean)}),[null==y?void 0:y.data.nodeType,c]),S=(0,r.useCallback)((function(e,n){t||(e.dataTransfer.setData("application/reactflow",n.type),e.dataTransfer.effectAllowed="move")}),[t]),N=(0,r.useCallback)((function(e,n){t||(e.dataTransfer.setData("application/reactflowTemplate",JSON.stringify(n)),e.dataTransfer.effectAllowed="move")}),[t]),x=function(){var e=c.getState().transform;return(0,Ul.$P)({screenX:Wl.y+Ul.Ei+100,screenY:Ul.tQ+100,transform:e})};return r.createElement("div",{className:"".concat(Zl.leftPanel," ").concat(n?Zl.show:Zl.hide)},r.createElement("span",{className:Zl.icon,onClick:function(){C(n?"scrollx":"none"),i(!n)}},n?r.createElement(w.A,{type:"double-arrow-left"}):r.createElement(w.A,{type:"double-arrow-right"})),r.createElement("div",{className:"".concat(Zl.panel)},r.createElement(O.A,{defaultActiveKey:"NODES",effect:h,style:{margin:"12px"},onChange:function(){C("scrollx")}},r.createElement(O.A.TabPane,{key:"NODES",tab:"节点"},r.createElement("div",{className:Zl.panelContent},A.map((function(e){return r.createElement("div",{key:e.backendId,draggable:!t,onDragStart:function(t){return S(t,e)},className:"".concat(t?Zl.notDraggable:""," ").concat(Zl.wrapperImage)},r.createElement("span",{className:Zl.content,title:e.caption},r.createElement($t,{type:e.type}),n?r.createElement("span",{className:Zl.name},e.name):null),r.createElement("span",{className:Zl.add,onClick:function(){return function(e){var n=x();t||v(e.type,{x:n.x,y:n.y},Q.Uv.CLICK)}(e)}},"+"))})))),r.createElement(O.A.TabPane,{key:"TEMPLATES",tab:"模板"},r.createElement("div",{className:Zl.panelContent},o.map((function(e){return r.createElement("div",{key:e.id,draggable:!t,onDragStart:function(t){return N(t,e)},className:"".concat(t?Zl.notDraggable:""," ").concat(Zl.wrapperImage)},r.createElement("span",{className:Zl.content,title:e.desc},n?r.createElement("span",{className:Zl.name},e.name):null),r.createElement("span",{className:Zl.add,onClick:function(){return function(e){null==a||a.invokeAsync("loadFlowTemplate",{id:null==e?void 0:e.id});var t=x();l(t.x,t.y)}(e)}},"+"))}))))),r.createElement("div",{className:"".concat(Zl.footerWrap)},r.createElement("div",{className:Zl.actions},r.createElement("div",{className:Zl.adaptiveSvg},r.createElement(I,{title:"整理节点",onClick:p})),r.createElement("div",{className:Zl.zoomInOut},r.createElement(U,{title:"缩小",onClick:f}),r.createElement("span",null,Number.parseFloat("".concat(100*u)).toFixed(0),"%"),r.createElement(T,{title:"放大",onClick:s}))))))}var $l=function(){var e=Bl().handleAddNode;return r.createElement(zl.Provider,{value:{hasInputNode:!0,hasOutputNode:!0,handleAddNode:e}},r.createElement(ql,null))},ec=n(78562),tc=n.n(ec),nc=n(15799),rc=n.n(nc),oc=n(52445),ac=n(65045);function ic(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return lc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lc(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var cc=null;var uc=n(76979);var dc="edgeLabel-index-AufBE";function sc(e){return sc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sc(e)}function fc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fc(Object(n),!0).forEach((function(t){pc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pc(e,t,n){return t=function(e){var t=function(e,t){if("object"!=sc(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=sc(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==sc(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return yc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yc(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function gc(e){var t=e.color,n=b((function(e){return{flowId:e.flowId}})).flowId;return r.createElement("defs",null,r.createElement("marker",{id:"".concat(n,"_gai_flow_customArrow_").concat(t),markerWidth:"20",markerHeight:"20",refX:"0",refY:"0",viewBox:"-10 -10 20 20",orient:"auto",fill:t},r.createElement("polygon",{strokeLinecap:"round",strokeLinejoin:"round",points:"-5, 3, 2, 0, -5, -3, -4, 0"})))}function hc(e){var t=e.id,n=e.data,o=(e.selected,e.sourceX),a=e.sourceY,i=e.targetX,l=e.targetY,c=e.sourcePosition,u=e.targetPosition,d=e.style,s=void 0===d?{}:d,f=(e.markerEnd,b((function(e){return{flowId:e.flowId}})).flowId),m=vc((0,E.Fp)({sourceX:"right"===c?o+0:o,sourceY:"bottom"===c?a+0:a,targetX:"left"===u?i-0:i,targetY:"top"===u?l-0:l,sourcePosition:c,targetPosition:u}),3),p=m[0],v=m[1],y=m[2];return r.createElement(r.Fragment,null,r.createElement(E.tE,{id:"_".concat(f,"__gai_flow_edge_").concat(t),path:p,markerEnd:"url(#".concat(f,"_gai_flow_customArrow_").concat(s.stroke,")"),style:mc(mc({},s),{},{strokeDasharray:n.isTemp?"5 5":"initial",strokeWidth:"2"})}),r.createElement(gc,{color:s.stroke}),n.edgeName?r.createElement(E.rV,null,r.createElement("div",{style:{transform:"translate(-50%, -50%) translate(".concat(v,"px,").concat(y,"px)"),color:n.hasErr?"red":"#212121",background:""===n.edgeName?"transparent":"white",zIndex:1002},className:"".concat(dc),title:n.hasErr?n.errInfo.reduce((function(e,t){return e+t.msg}),""):void 0},n.edgeName)):null)}var bc={customEdge:(0,r.memo)(hc)};var Ec=function(e){e.connectionLineType;var t=e.fromX,n=void 0===t?0:t,o=e.fromY,a=void 0===o?0:o,i=e.toX,l=void 0===i?0:i,c=e.toY,u=void 0===c?0:c,d=b((function(e){return{flowId:e.flowId}})).flowId;return r.createElement(r.Fragment,null,r.createElement(gc,{color:"#5582F3"}),r.createElement("g",null,r.createElement("path",{d:"M".concat(n,",").concat(a," C").concat(n+50,",").concat(a," ").concat(l-50,",").concat(u," ").concat(l,",").concat(u),stroke:"#5582F3",strokeDasharray:"2 2",strokeWidth:"2",fill:"none",markerEnd:"url(#".concat(d,"_gai_flow_customArrow_#5582F3)")})))},Cc=n(89039),wc=n(19504);function Oc(e){var t=b((function(e){return{isLock:e.isLock,model:e.model,setIsLock:e.setIsLock}})),n=t.isLock,o=t.model,a=t.setIsLock,i=e.nodes;e.edges;return r.createElement(r.Fragment,null,r.createElement(Cc.o,{pannable:!0,draggable:!0,zoomable:!0,nodeColor:"transparent",nodeStrokeColor:function(e){switch(e.type){case"inputNode":return"green";case"outputNode":return"blue";case"conditioin":return"purple";default:return"orange"}},nodeBorderRadius:10}),r.createElement(wc.H,null,r.createElement(r.Fragment,null,r.createElement(wc.a,{onClick:function(){return jo(o,"saveFlow",{})}},"save"),r.createElement(wc.a,{onClick:function(){return null==o?void 0:o.invokeAsync("getModifyName",i[Math.floor(Math.random()*i.length)].id)}},"changeName"),r.createElement(wc.a,{onClick:function(){return null==o?void 0:o.invokeAsync("getNodeValidate",i[Math.floor(Math.random()*i.length)].id)}},"getError"),r.createElement(wc.a,{onClick:function(){return null==o?void 0:o.invokeAsync("resetNodeValidate",i[Math.floor(Math.random()*i.length)].id)}},"resetError"),r.createElement(wc.a,{onClick:function(){return a(!n)}},n?"unLock":"lock"),r.createElement(wc.a,{onClick:function(){return null==o?void 0:o.invokeAsync("getModifyName",64)}},"changeCondition"))))}var Ac="helpLineHorizontal-index-ZZNGd",Lc="helpLineVertical-index-JNzO5",Sc=(0,r.memo)((function(e){var t=e.top,n=e.left,o=e.width,a=(0,E.kW)(),i=a.x,l=a.y,c=a.zoom;return r.createElement("div",{className:Ac,style:{top:t*c+l,left:n*c+i,width:o*c}})}));Sc.displayName="HelpLineBase";var Nc=(0,r.memo)((function(e){var t=e.top,n=e.left,o=e.height,a=(0,E.kW)(),i=a.x,l=a.y,c=a.zoom;return r.createElement("div",{className:Lc,style:{top:t*c+l,left:n*c+i,height:o*c}})}));function xc(){var e=se((function(e){return e.helpLineHorizontal})),t=se((function(e){return e.helpLineVertical}));return e||t?r.createElement(r.Fragment,null,e&&r.createElement(Sc,e),t&&r.createElement(Nc,t)):null}Nc.displayName="HelpLineVertical";var jc=(0,r.memo)(xc);function Pc(e){return function(e){if(Array.isArray(e))return Fc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||kc(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ic(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return l}}(e,t)||kc(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kc(e,t){if(e){if("string"==typeof e)return Fc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fc(e,t):void 0}}function Fc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Dc=(0,Ol.Uo)(),Mc=Dc.nodes,Rc=Dc.edges;function Tc(){var e=b((function(e){return{isInit:e.isInit,isLock:e.isLock,model:e.model,draftData:e.draftData,setRawData:e.setRawData,currentTemplateFlowDraftData:e.currentTemplateFlowDraftData,currentTemplateFlowRawData:e.currentTemplateFlowRawData,flowId:e.flowId,dropXPosition:e.dropXPosition,dropYPosition:e.dropYPosition,nodeValidates:e.nodeValidates,setInitState:e.setInitState,setDraftData:e.setDraftData,setNodeValidates:e.setNodeValidates}})),t=(e.isInit,e.isLock),n=(e.model,e.draftData),o=e.currentTemplateFlowDraftData,a=e.currentTemplateFlowRawData,i=e.flowId,l=e.dropXPosition,c=e.dropYPosition,u=e.nodeValidates,d=(e.setInitState,e.setDraftData),s=e.setRawData,f=e.setNodeValidates,m=fe(),p=Bl(),v=p.handleNodeDragStart,g=p.handleNodeDrag,h=p.handleNodeDragStop,w=p.handleNodeClick,O=p.handlePaneClick,A=p.handleNodeConnect,L=p.onEdgeUpdateEnd,S=p.onEdgeUpdate,N=p.onEdgeUpdateStart,x=p.onConnectEnd,j=p.onConnectStart,P=p.onNodeMouseEnter,I=p.onNodeMouseLeave,k=Dl(),F=k.handleEdgeClick,D=k.handleEdgesChange,M=k.handleEdgeMouseEnter,R=k.handleEdgeMouseLeave,T=k.isValidConnection,H=function(){var e=(0,E.PI)(),t=y(),n=((0,E.VH)().screenToFlowPosition,Bl().handleAddNode),o=(0,ac.A)(ee.s9,{wait:16}).run,a=b((function(e){return{model:e.model,setDropPosition:e.setDropPosition}})),i=a.model,l=a.setDropPosition,c=(0,r.useCallback)((function(n){n.preventDefault();var r=null==t?void 0:t.getState().dragNode;if(n.dataTransfer.dropEffect="move",r!==Q.Hv.LoopAction){var a=e.getState(),i=a.getNodes,l=a.transform,c=a.setNodes,u=(0,Ul.$P)({screenX:n.clientX,screenY:n.clientY,transform:l}),d=i(),s=o(u,d,l);if(s){cc=s.node;var f=(0,W.jM)(d,(function(e){e.forEach((function(e){e.id===s.node.id&&(e.selected=!0)}))}));c(f)}else if(cc){var m=(0,W.jM)(d,(function(e){e.forEach((function(e){var t;e.id===(null===(t=cc)||void 0===t?void 0:t.id)&&(e.selected=!1)})),cc=null}));c(m)}}}),[e,t]),u=(0,r.useCallback)((function(t){t.preventDefault();var r=t.dataTransfer.getData("application/reactflow"),o=t.dataTransfer.getData("application/reactflowTemplate"),a=e.getState().transform,c=(0,Ul.$P)({screenX:t.clientX,screenY:t.clientY,transform:a});if(l(c.x,c.y),r){var u=ic(a,3);if(u[0],u[1],u[2],void 0===r||!r)return;n(r,c)}else{if(!o)return;var d=JSON.parse(o);null==i||i.invokeAsync("loadFlowTemplate",{id:null==d?void 0:d.id})}}),[]);return{handleDragOver:c,handleDrop:u}}(),V=H.handleDragOver,_=H.handleDrop,B=(0,r.useMemo)((function(){return bc}),[]),U=(0,r.useMemo)((function(){return hl}),[]),Z=(0,E.PI)(),z=(0,r.useRef)(null),G=(0,E.VH)(),X=(G.fitBounds,G.fitView,G.setCenter,G.getEdges),Y=Ic((0,E.ck)(0===n.nodes.length?Mc:n.nodes),2),K=Y[0],J=Y[1],q=Ic((0,E.fM)(0===n.edges.length?Rc:n.edges),2),$=q[0],te=q[1],ne=(0,r.useRef)(),re=(0,r.useRef)(null),oe=(0,r.useRef)(null);!function(e){var t=b((function(e){return{isLock:e.isLock,model:e.model,saveStatus:e.saveStatus,modifyName:e.modifyName,nodeValidates:e.nodeValidates,setSaveStatus:e.setSaveStatus}})),n=t.isLock,o=t.model,a=t.saveStatus,i=t.modifyName,l=t.nodeValidates,c=t.setSaveStatus,u=zo(),d=u.resetErrCode,s=u.setErrCode,f=(0,E.PI)(),m=y().getState().setModifyName;(0,r.useEffect)((function(){var e=f.getState(),t=e.getNodes,n=e.setNodes,r=e.edges,o=e.setEdges,a=t();i&&Ro(i.nodeId)&&(a.find((function(e){return e.id===String(i.nodeId)}))&&n((0,W.jM)(a,(function(e){e.find((function(e){return e.id===String(i.nodeId)})).data.nodeName=i.nodeName}))),r.find((function(e){return e.id===String(i.nodeId)}))&&o((0,W.jM)(r,(function(e){e.forEach((function(e){var t,n=(0,Mo.bi)(e.markerEnd,e.style,null===(t=e.data)||void 0===t?void 0:t.hasErr,e.selected),r=n.markerEnd,o=n.style;e.markerEnd=r,e.style=o,e.id===String(i.nodeId)&&(e.label=i.nodeName,e.data.edgeName=i.nodeName)}))}))),m())}),[i,f]),(0,r.useEffect)((function(){if(a){var e=f.getState(),t=e.getNodes,n=e.edges;d();var r=t(),i=Do(r,n);if(i.hasErr)o&&jo(o,"saveFlow",{errorCodes:Array.from(new Set(i.errIdList.map((function(e){return e.errInfo.code}))))}),s(i);else{var l=(0,To.cl)(r,n);o&&jo(o,"saveFlow",l)}c(!1)}}),[a,c,f]),(0,r.useEffect)((function(){var t=f.getState(),r=t.getNodes,o=t.setNodes,a=t.edges,i=t.setEdges,l=r();if(n!==e.current){if(n){var c=(0,W.jM)(l,(function(e){e.forEach((function(e){e.deletable=!1}))})),u=(0,W.jM)(a,(function(e){e.forEach((function(e){e.deletable=!1,e.selected=!1}))}));o(c),i(u)}else{var d=(0,W.jM)(l,(function(e){e.forEach((function(e){"input"===e.data.type||"output"===e.data.type||(e.deletable=!0)}))})),s=(0,W.jM)(a,(function(e){e.forEach((function(e){e.deletable=!1}))}));o(d),i(s)}e.current=n}}),[n,f]),(0,r.useEffect)((function(){var e=f.getState(),t=e.getNodes,n=e.setNodes,r=e.edges,o=e.setEdges,a=t();if(l&&l.length){for(var i=[],c=[],u=function(){var e=l[d];-1!==e.nodeId&&(a.find((function(t){return t.id===String(e.nodeId)}))&&i.push(e),r.find((function(t){return t.id===String(e.nodeId)}))&&c.push(e))},d=0;d<l.length;d++)u();if(i.length){var s=(0,W.jM)(a,(function(e){i.forEach((function(t){var n=e.find((function(e){return e.id===String(t.nodeId)})),r=t.status;"error"===r?n.data=Wo(Wo({},null==n?void 0:n.data),{},{hasErr:!0,errInfo:n.data.errInfo.filter((function(e){return e.code!==Q.oM.OTHER.code})).concat({code:Q.oM.OTHER.code,msg:t.validMessage})}):"pass"===r&&(n.data.hasErr=!1,n.data.errInfo=[])}))}));n(s)}if(c.length){var m=(0,W.jM)(r,(function(e){c.forEach((function(t){var n=t.status,r=e.find((function(e){return e.id===String(t.nodeId)}));if(r)if("error"===n)(0,Mo.Kn)(r,{markerEnd:r.markerEnd,style:r.style,hasErr:!0,selected:r.selected}),r.data=Wo(Wo({},r.data),{},{hasErr:!0,errInfo:r.data.errInfo.filter((function(e){return e.code!==Q.oM.OTHER.code})).concat({code:Q.oM.OTHER.code,msg:t.validMessage})});else if("pass"===n){var o=r.selected,a=r.markerEnd;(0,Mo.Kn)(r,{markerEnd:a,style:r.style,hasErr:!1,selected:o}),r.data=Wo(Wo({},r.data),{},{hasErr:!1,errInfo:[]})}}))}));o(m)}}}),[l])}(re),function(){var e=Bl().handleNodeDel,t=Dl().handleEdgeDel,n=b((function(e){return{model:e.model}})).model;(0,uc.A)(["delete","backspace"],(function(r){var o=r.target.classList;if(n){var a=n.pageId,i=document.getElementById("".concat(a));if("true"===("123123"===a?"false":null==i?void 0:i.getAttribute("data-tab-hidden")))return;if((o.contains("react-flow__node")||o.contains("react-flow__edge"))&&(r.preventDefault(),t(),e(),n)){var l={id:-1,typeName:"flow"};setTimeout((function(){jo(n,"editFlow",l)}),200)}}}))}();(0,r.useEffect)((function(){var e=n.edges,t=n.nodes;te(e),J(t),ae(),ie()}),[n]),(0,r.useEffect)((function(){var e=Z.getState().getNodes(),t=X(),n=Fo()(a);if(!n||"{}"!==JSON.stringify(n))if(e.length>2){try{if(n){var r,i,u,f,m=tc()(n.actions,"properties.position.x"),p=l-(null!==(r=null==m||null===(i=m.properties)||void 0===i||null===(i=i.position)||void 0===i?void 0:i.x)&&void 0!==r?r:0),v=c-(null!==(u=null==m||null===(f=m.properties)||void 0===f||null===(f=f.position)||void 0===f?void 0:f.y)&&void 0!==u?u:0);n.actions.forEach((function(e,t){e.properties.position&&(e.properties.id===m.properties.id?(e.properties.position.x=l,e.properties.position.y=c):(e.properties.position.x+=p,e.properties.position.y+=v))}))}}catch(e){}var y=(0,To.o4)(n,!0,!0);Z.getState().setNodes(e.concat(Pc(y.nodes))),Z.getState().setEdges(t.concat(Pc(y.edges))),ae()}else d(o),s(a),ie()}),[o]);var ae=function(){setTimeout((function(){var e=Fo()(u);e&&f(e)}),0)},ie=function(){setTimeout((function(){ne.current.fitView({minZoom:.6,maxZoom:.6})}),100)};return r.createElement("div",{className:C.gaiFlow,ref:z},r.createElement(jc,null),r.createElement(E.Gc,{id:"_".concat(i,"_gai_flow"),ref:oe,nodes:K,edges:$,onEdgesChange:D,onConnect:A,onNodeClick:w,onEdgeClick:F,onEdgeUpdateStart:N,onEdgeUpdate:S,onEdgeUpdateEnd:L,onConnectStart:j,onConnectEnd:x,onNodeMouseEnter:P,onNodeMouseLeave:I,onEdgeMouseEnter:M,onEdgeMouseLeave:R,onNodeDragStart:v,onNodeDrag:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return g.apply(void 0,[z.current].concat(t))},onNodeDragStop:h,nodeTypes:U,edgeTypes:B,defaultViewport:{zoom:.6,x:0,y:0},onDrop:_,onDragOver:V,onInit:function(e){ne.current=e},onClick:function(e){},className:C.flowContent,connectionLineComponent:Ec,connectionLineType:E.Do.Bezier,minZoom:.25,maxZoom:2,nodesDraggable:!t,nodesConnectable:!t,nodesFocusable:!t,edgesFocusable:!t,panOnDrag:!t,selectionOnDrag:!0,panOnScroll:!1,multiSelectionKeyCode:null,edgesUpdatable:!t,deleteKeyCode:["Backspace","Delete"],onPaneClick:O,isValidConnection:T,onSelectionChange:function(e){e._nodes;var t=e.edges,n=m.getState().selectedEdges;rc()(null==n?void 0:n.map((function(e){return e.id})),null==t?void 0:t.map((function(e){return e.id})))||m.getState().setSelectedEdge(t)}},r.createElement(li.V,{id:"_".concat(i,"_gai_flow_background"),gap:[20,20],size:1,color:"#999999",style:{backgroundColor:"#f5f5f5"}}),oc.C?r.createElement(Oc,{nodes:K,edges:$}):null))}function Hc(){return r.createElement(ie,null,r.createElement(Tc,null))}var Vc=(0,r.memo)(Hc);var _c=function(){var e=b((function(e){return{leftPanelShow:e.leftPanelShow}})).leftPanelShow;return r.createElement(E.Ln,null,r.createElement("div",{className:"".concat(C.content)},r.createElement($l,null),r.createElement("div",{className:"".concat(e?"":C.mr0," ").concat(C.mainFlow)},r.createElement(Vc,null))))};var Bc=function(){var e=b((function(e){return{isLoading:e.isLoading}})).isLoading;return r.createElement(o.Ay,{value:{prefixCls:"gaiflow",compDefaultProps:{Input:{borderType:"bordered",placeholder:"请输入"},Select:{borderType:"bordered",placeholder:"请选择"}}}},r.createElement("div",{className:"".concat(a)},e?r.createElement("div",{className:i},r.createElement("img",{className:l,src:c})):r.createElement(_c,null)))}},7077:function(){},71383:function(){}}]);