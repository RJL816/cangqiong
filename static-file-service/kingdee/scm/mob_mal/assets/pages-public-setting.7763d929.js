var t=(t,e,s)=>new Promise(((i,l)=>{var o=t=>{try{r(s.next(t))}catch(e){l(e)}},a=t=>{try{r(s.throw(t))}catch(e){l(e)}},r=t=>t.done?i(t.value):Promise.resolve(t.value).then(o,a);r((s=s.apply(t,e)).next())}));import{az as e,aA as s,aB as i,aC as l,a as o,b as a,d as r,e as n,f as c,k as u,m as d,g as p,A as h,l as f,t as b,p as g,q as m,C as _,Q as y,c as w,aD as k,M as x,u as S,s as $,O as C,N as T}from"./index-45b322f7.js";import{_ as v}from"./uni-icons.c22fa7d9.js";import{a as B,_ as A}from"./s-layout.940eafb4.js";import{_ as I}from"./_plugin-vue_export-helper.1b428a4d.js";import{_ as z}from"./su-fixed.9f687b80.js";const j=I({name:"UniListItem",emits:["click","switchChange"],props:{direction:{type:String,default:"row"},title:{type:String,default:""},note:{type:String,default:""},ellipsis:{type:[Number,String],default:0},disabled:{type:[Boolean,String],default:!1},clickable:{type:Boolean,default:!1},showArrow:{type:[Boolean,String],default:!1},link:{type:[Boolean,String],default:!1},to:{type:String,default:""},showBadge:{type:[Boolean,String],default:!1},showSwitch:{type:[Boolean,String],default:!1},switchChecked:{type:[Boolean,String],default:!1},badgeText:{type:String,default:""},badgeType:{type:String,default:"success"},badgeStyle:{type:Object,default:()=>({})},rightText:{type:String,default:""},thumb:{type:String,default:""},thumbSize:{type:String,default:"base"},showExtraIcon:{type:[Boolean,String],default:!1},extraIcon:{type:Object,default:()=>({type:"",color:"#000000",size:20})},border:{type:Boolean,default:!0}},data:()=>({isFirstChild:!1}),mounted(){this.list=this.getForm(),this.list&&(this.list.firstChildAppend||(this.list.firstChildAppend=!0,this.isFirstChild=!0))},methods:{getForm(t="uniList"){let e=this.$parent,s=e.$options.name;for(;s!==t;){if(e=e.$parent,!e)return!1;s=e.$options.name}return e},onClick(){""===this.to?(this.clickable||this.link)&&this.$emit("click",{data:{}}):this.openPage()},onSwitchChange(t){this.$emit("switchChange",t.detail)},openPage(){-1!==["navigateTo","redirectTo","reLaunch","switchTab"].indexOf(this.link)?this.pageApi(this.link):this.pageApi("navigateTo")},pageApi(t){let o={url:this.to,success:t=>{this.$emit("click",{data:t})},fail:t=>{this.$emit("click",{data:t})}};switch(t){case"navigateTo":default:e(o);break;case"redirectTo":l(o);break;case"reLaunch":i(o);break;case"switchTab":s(o)}}}},[["render",function(t,e,s,i,l,w){const k=g,x=m,S=o(a("uni-icons"),v),$=_,C=o(a("uni-badge"),B),T=y;return r(),n(k,{class:u([{"uni-list-item--disabled":s.disabled},"uni-list-item"]),"hover-class":!s.clickable&&!s.link||s.disabled||s.showSwitch?"":"uni-list-item--hover",onClick:w.onClick},{default:c((()=>[l.isFirstChild?d("",!0):(r(),n(k,{key:0,class:u(["border--left",{"uni-list--border":s.border}])},null,8,["class"])),p(k,{class:u(["uni-list-item__container",{"container--right":s.showArrow||s.link,"flex--direction":"column"===s.direction}])},{default:c((()=>[h(t.$slots,"header",{},(()=>[p(k,{class:"uni-list-item__header"},{default:c((()=>[s.thumb?(r(),n(k,{key:0,class:"uni-list-item__icon"},{default:c((()=>[p(x,{src:s.thumb,class:u(["uni-list-item__icon-img",["uni-list--"+s.thumbSize]])},null,8,["src","class"])])),_:1})):s.showExtraIcon?(r(),n(k,{key:1,class:"uni-list-item__icon"},{default:c((()=>[p(S,{color:s.extraIcon.color,size:s.extraIcon.size,type:s.extraIcon.type},null,8,["color","size","type"])])),_:1})):d("",!0)])),_:1})]),!0),h(t.$slots,"body",{},(()=>[p(k,{class:u(["uni-list-item__content",{"uni-list-item__content--center":s.thumb||s.showExtraIcon||s.showBadge||s.showSwitch}])},{default:c((()=>[s.title?(r(),n($,{key:0,class:u(["uni-list-item__content-title",[0!==s.ellipsis&&s.ellipsis<=2?"uni-ellipsis-"+s.ellipsis:""]])},{default:c((()=>[f(b(s.title),1)])),_:1},8,["class"])):d("",!0),s.note?(r(),n($,{key:1,class:"uni-list-item__content-note"},{default:c((()=>[f(b(s.note),1)])),_:1})):d("",!0)])),_:1},8,["class"])]),!0),h(t.$slots,"footer",{},(()=>[s.rightText||s.showBadge||s.showSwitch?(r(),n(k,{key:0,class:u(["uni-list-item__extra",{"flex--justify":"column"===s.direction}])},{default:c((()=>[s.rightText?(r(),n($,{key:0,class:"uni-list-item__extra-text"},{default:c((()=>[f(b(s.rightText),1)])),_:1})):d("",!0),s.showBadge?(r(),n(C,{key:1,type:s.badgeType,text:s.badgeText,"custom-style":s.badgeStyle},null,8,["type","text","custom-style"])):d("",!0),s.showSwitch?(r(),n(T,{key:2,disabled:s.disabled,checked:s.switchChecked,onChange:w.onSwitchChange},null,8,["disabled","checked","onChange"])):d("",!0)])),_:1},8,["class"])):d("",!0)]),!0)])),_:3},8,["class"]),s.showArrow||s.link?(r(),n(S,{key:1,size:16,class:"uni-icon-wrapper",color:"#bbb",type:"arrowright"})):d("",!0)])),_:3},8,["class","hover-class","onClick"])}],["__scopeId","data-v-7ec784ca"]]);const F=I({name:"uniList","mp-weixin":{options:{multipleSlots:!1}},props:{enableBackToTop:{type:[Boolean,String],default:!1},scrollY:{type:[Boolean,String],default:!1},border:{type:Boolean,default:!0}},created(){this.firstChildAppend=!1},methods:{loadMore(t){this.$emit("scrolltolower")}}},[["render",function(t,e,s,i,l,o){const a=g;return r(),n(a,{class:"uni-list uni-border-top-bottom"},{default:c((()=>[s.border?(r(),n(a,{key:0,class:"uni-list--border-top"})):d("",!0),h(t.$slots,"default",{},void 0,!0),s.border?(r(),n(a,{key:1,class:"uni-list--border-bottom"})):d("",!0)])),_:3})}],["__scopeId","data-v-cb34ae06"]]),L=I({__name:"setting",setup(e){const s=w((()=>$.$store("app").info)),i=w((()=>$.$store("user").isLogin)),l=k().currentSize+"Kb";function u(){$.$platform.checkUpdate()}function h(){C({title:"提示",content:"确认注销账号？",success:function(e){return t(this,null,(function*(){if(e.confirm){const{error:t}=yield $.$api.user.logoff();0===t&&($.$store("user").logout(),$.$router.go("/pages/index/mine"))}}))}})}function _(){C({title:"提示",content:"确认退出账号？",success:function(e){return t(this,null,(function*(){if(e.confirm){(yield $.$store("user").logout())&&$.$router.go("/pages/index/mine")}}))}})}return x({showModal:!1}),(t,e)=>{const y=m,w=g,k=o(a("uni-list-item"),j),x=o(a("uni-list"),F),C=T,v=o(a("su-fixed"),z),B=o(a("s-layout"),A);return r(),n(B,{class:"set-wrap",title:"系统设置",bgStyle:{color:"#fff"}},{default:c((()=>[p(w,{class:"header-box ss-flex-col ss-row-center ss-col-center"},{default:c((()=>[p(y,{class:"logo-img ss-m-b-46",src:S($).$url.cdn(S(s).logo),mode:"aspectFit"},null,8,["src"]),p(w,{class:"name ss-m-b-24"},{default:c((()=>[f(b(S(s).name),1)])),_:1})])),_:1}),p(w,{class:"container-list"},{default:c((()=>[p(x,{border:!1},{default:c((()=>[p(k,{title:"当前版本",rightText:S(s).version,showArrow:"",clickable:"",border:!1,class:"list-border",onClick:u},null,8,["rightText"]),p(k,{title:"本地缓存",rightText:l,showArrow:"",border:!1,class:"list-border"}),p(k,{title:"意见反馈",showArrow:"",clickable:"",border:!1,class:"list-border",onClick:e[0]||(e[0]=t=>S($).$router.go("/pages/public/feedback"))}),p(k,{title:"关于我们",showArrow:"",clickable:"",border:!1,class:"list-border",onClick:e[1]||(e[1]=t=>S($).$router.go("/pages/public/richtext",{id:S(s).about_us.id,title:S(s).about_us.title}))}),S(i)&&"ios"===S($).$platform.os&&"App"===S($).$platform.name?(r(),n(k,{key:0,title:"注销账号",rightText:"",showArrow:"",clickable:"",border:!1,class:"list-border",onClick:h})):d("",!0)])),_:1})])),_:1}),p(w,{class:"set-footer ss-flex-col ss-row-center ss-col-center"},{default:c((()=>[p(w,{class:"agreement-box ss-flex ss-col-center ss-m-b-40"},{default:c((()=>[p(w,{class:"ss-flex ss-col-center ss-m-b-10"},{default:c((()=>[p(w,{class:"tcp-text",onClick:e[2]||(e[2]=t=>S($).$router.go("/pages/public/richtext",{id:S(s).user_protocol.id,title:S(s).user_protocol.title}))},{default:c((()=>[f(" 《"+b(S(s).user_protocol.title)+"》 ",1)])),_:1}),p(w,{class:"agreement-text"},{default:c((()=>[f("与")])),_:1}),p(w,{class:"tcp-text",onClick:e[3]||(e[3]=t=>S($).$router.go("/pages/public/richtext",{id:S(s).privacy_protocol.id,title:S(s).privacy_protocol.title}))},{default:c((()=>[f(" 《"+b(S(s).privacy_protocol.title)+"》 ",1)])),_:1})])),_:1})])),_:1}),p(w,{class:"copyright-text ss-m-b-10"},{default:c((()=>[f(b(S(s).copyright),1)])),_:1}),p(w,{class:"copyright-text"},{default:c((()=>[f(b(S(s).copytime),1)])),_:1})])),_:1}),p(v,{bottom:"",placeholder:""},{default:c((()=>[p(w,{class:"ss-p-x-20 ss-p-b-40"},{default:c((()=>[S(i)?(r(),n(C,{key:0,class:"loginout-btn ss-reset-button ui-BG-Main ui-Shadow-Main",onClick:_},{default:c((()=>[f(" 退出登录 ")])),_:1})):d("",!0)])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-660765a0"]]);export{L as default};
