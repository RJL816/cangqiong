import{d as t,e,f as a,A as l,k as s,h as r,l as i,t as o,m as n,C as c,p as u,af as d,a_ as p,a as h,b as g,g as b,i as y,F as m,q as f,s as v,ah as S,ad as _,aj as x,B as C,r as k,c as B,w as $,u as I,j as A,a4 as D,X as w}from"./index-45b322f7.js";import{_ as T}from"./_plugin-vue_export-helper.1b428a4d.js";const N=T({name:"UniBadge",emits:["click"],props:{type:{type:String,default:"error"},inverted:{type:Boolean,default:!1},isDot:{type:Boolean,default:!1},maxNum:{type:Number,default:99},absolute:{type:String,default:""},offset:{type:Array,default:()=>[0,0]},text:{type:[String,Number],default:""},size:{type:String,default:"small"},customStyle:{type:Object,default:()=>({})}},data:()=>({}),computed:{width(){return 8*String(this.text).length+12},classNames(){const{inverted:t,type:e,size:a,absolute:l}=this;return[t?"uni-badge--"+e+"-inverted":"","uni-badge--"+e,"uni-badge--"+a,l?"uni-badge--absolute":""].join(" ")},positionStyle(){if(!this.absolute)return{};let t=this.width/2,e=10;this.isDot&&(t=5,e=5);const a=`${-t+this.offset[0]}px`,l=`${-e+this.offset[1]}px`,s={rightTop:{right:a,top:l},rightBottom:{right:a,bottom:l},leftBottom:{left:a,bottom:l},leftTop:{left:a,top:l}},r=s[this.absolute];return r||s.rightTop},dotStyle(){return this.isDot?{width:"10px",minWidth:"0",height:"10px",padding:"0",borderRadius:"10px"}:{}},displayValue(){const{isDot:t,text:e,maxNum:a}=this;return t?"":Number(e)>a?`${a}+`:e}},methods:{onClick(){this.$emit("click")}}},[["render",function(d,p,h,g,b,y){const m=c,f=u;return t(),e(f,{class:"uni-badge--x"},{default:a((()=>[l(d.$slots,"default",{},void 0,!0),h.text?(t(),e(m,{key:0,class:s([y.classNames,"uni-badge"]),style:r([y.positionStyle,h.customStyle,y.dotStyle]),onClick:p[0]||(p[0]=t=>y.onClick())},{default:a((()=>[i(o(y.displayValue),1)])),_:1},8,["class","style"])):n("",!0)])),_:3})}],["__scopeId","data-v-5830a0f7"]]);const P=T({name:"su-tabbar-item",props:{customStyle:{type:[Object,String],default:()=>({})},customClass:{type:String,default:""},url:{type:String,default:""},linkType:{type:String,default:"navigateTo"},name:{type:[String,Number,null],default:""},icon:{icon:String,default:""},badge:{type:Number,default:0},dot:{type:Boolean,default:!1},text:{type:String,default:""},badgeStyle:{type:[Object,String],default:""},isCenter:{type:Boolean,default:!1},centerImage:{type:String,default:""}},data:()=>({isActive:!1,addStyle:d,parentData:{value:null,activeColor:"",inactiveColor:""},parent:{}}),created(){this.init()},methods:{getParentData(t=""){this.parent||(this.parent={}),this.parent=p.call(this,t),this.parent.children&&-1===this.parent.children.indexOf(this)&&this.parent.children.push(this),this.parent&&this.parentData&&Object.keys(this.parentData).map((t=>{this.parentData[t]=this.parent[t]}))},init(){this.updateParentData(),this.parent||console.log("u-tabbar-item必须搭配u-tabbar组件使用");const t=this.parent.children.indexOf(this);this.isActive=(this.name.split("?")[0]||t)===this.parentData.value},updateParentData(){this.getParentData("su-tabbar")},updateFromParent(){this.init()},clickHandler(){this.$nextTick((()=>{const t=this.parent.children.indexOf(this),e=this.name||t;e!==this.parent.value&&this.parent.$emit("change",e),this.$emit("click",e)}))}}},[["render",function(s,n,d,p,v,S){const _=f,x=u,C=h(g("uni-badge"),N),k=c;return t(),e(x,{class:"u-tabbar-item",style:r([v.addStyle(d.customStyle)])},{default:a((()=>[d.isCenter?(t(),e(x,{key:0,class:"tabbar-center-item"},{default:a((()=>[b(_,{class:"center-image",src:d.centerImage,mode:"aspectFill"},null,8,["src"])])),_:1})):(t(),y(m,{key:1},[b(x,{class:"u-tabbar-item__icon"},{default:a((()=>[b(C,{text:d.badge,absolute:"rightTop",offset:[5,5],class:"badge"},{default:a((()=>[d.icon?(t(),e(_,{key:0,name:d.icon,color:v.isActive?v.parentData.activeColor:v.parentData.inactiveColor,size:20},null,8,["name","color"])):(t(),y(m,{key:1},[v.isActive?l(s.$slots,"active-icon",{key:0},void 0,!0):l(s.$slots,"inactive-icon",{key:1},void 0,!0)],64))])),_:3},8,["text"])])),_:3}),l(s.$slots,"text",{},(()=>[b(k,{class:"u-tabbar-item__text",style:r({color:v.isActive?v.parentData.activeColor:v.parentData.inactiveColor})},{default:a((()=>[i(o(d.text),1)])),_:1},8,["style"])]),!0)],64))])),_:3},8,["style"])}],["__scopeId","data-v-63308f13"]]);const j=T({name:"su-tabbar",props:{customStyle:{type:[Object,String],default:()=>({})},customClass:{type:String,default:""},url:{type:String,default:""},linkType:{type:String,default:"navigateTo"},value:{type:[String,Number,null],default:""},safeAreaInsetBottom:{type:Boolean,default:!0},border:{type:Boolean,default:!0},zIndex:{type:[String,Number],default:10},activeColor:{type:String,default:"#1989fa"},inactiveColor:{type:String,default:"#7d7e80"},fixed:{type:Boolean,default:!0},placeholder:{type:Boolean,default:!0},midTabBar:{type:Boolean,default:!1}},data:()=>({placeholderHeight:0,safeBottomHeight:v.$platform.device.safeAreaInsets.bottom}),computed:{tabbarStyle(){const t={zIndex:this.zIndex};return S(t,d(this.customStyle))},updateChild(){return[this.value,this.activeColor,this.inactiveColor]},updatePlaceholder(){return[this.fixed,this.placeholder]}},watch:{updateChild(){this.updateChildren()},updatePlaceholder(){this.setPlaceholderHeight()}},created(){this.children=[]},mounted(){this.setPlaceholderHeight()},methods:{updateChildren(){this.children.length&&this.children.map((t=>t.updateFromParent()))},getRect(t,e){return new Promise((a=>{_().in(this)[e?"selectAll":"select"](t).boundingClientRect((t=>{e&&Array.isArray(t)&&t.length&&a(t),!e&&t&&a(t)})).exec()}))},setPlaceholderHeight(){return t=this,e=null,a=function*(){this.fixed&&this.placeholder&&(yield x(20),this.getRect(".u-tabbar__content").then((({height:t=50})=>{this.placeholderHeight=t})))},new Promise(((l,s)=>{var r=t=>{try{o(a.next(t))}catch(e){s(e)}},i=t=>{try{o(a.throw(t))}catch(e){s(e)}},o=t=>t.done?l(t.value):Promise.resolve(t.value).then(r,i);o((a=a.apply(t,e)).next())}));var t,e,a}}},[["render",function(i,o,c,d,p,h){const g=u;return t(),e(g,{class:"u-tabbar"},{default:a((()=>[b(g,{class:s(["u-tabbar__content",[c.border&&"u-border-top",c.fixed&&"u-tabbar--fixed",{"mid-tabbar":c.midTabBar}]]),ref:"u-tabbar__content",onTouchmove:o[0]||(o[0]=C((()=>{}),["stop","prevent"])),style:r([h.tabbarStyle])},{default:a((()=>[b(g,{class:"u-tabbar__content__item-wrapper"},{default:a((()=>[l(i.$slots,"default",{},void 0,!0)])),_:3}),c.safeAreaInsetBottom?(t(),e(g,{key:0,style:r([{height:p.safeBottomHeight+"px"}])},null,8,["style"])):n("",!0)])),_:3},8,["class","style"]),c.placeholder?(t(),e(g,{key:0,class:"u-tabbar__placeholder",style:r({height:p.placeholderHeight+"px"})},null,8,["style"])):n("",!0)])),_:3})}],["__scopeId","data-v-81cde467"]]),F=T({__name:"s-tabbar",props:{path:String,default:""},setup(l){const s=v.$store("cart"),r=k({list:[{text:"首页",url:"/pages/homepage/index",activeIcon:"/static/home-page-solid.svg",inactiveIcon:"/static/home-page.svg"},{text:"购物车",url:"/pages/index/cart",activeIcon:"/static/cart-solid.svg",inactiveIcon:"/static/cart.svg",badge:0},{text:"我的",url:"/pages/index/mine",activeIcon:"/static/me-solid.svg",inactiveIcon:"/static/me.svg"}],background:{type:"color",bgColor:"#FFFFFF"}}),i=B((()=>{const t=r.value.background;return"color"==t.type?{background:t.bgColor}:"image"==t.type?{background:`url(${v.$url.cdn(t.bgImage)}) no-repeat top center / 100% auto`}:void 0})),o=t=>2===I(r).mode&&(I(r).list%2>0&&Math.ceil(I(r).list.length/2)===t+1);return $(s,(()=>{var t;t=s.goodsTotalNumber,r.value.list.forEach((e=>{"购物车"==e.text&&(e.badge=t)}))})),(s,c)=>{var d;const p=f,S=h(g("su-tabbar-item"),P),_=h(g("su-tabbar"),j),x=u;return(null==(d=r.value)?void 0:d.list.length)>0?(t(),e(x,{key:0,class:"u-page__item"},{default:a((()=>[b(_,{value:l.path,fixed:!0,placeholder:!0,safeAreaInsetBottom:!0,inactiveColor:r.value.inactiveColor,activeColor:r.value.activeColor,midTabBar:2===r.value.mode,customStyle:I(i)},{default:a((()=>[(t(!0),y(m,null,A(r.value.list,((l,s)=>(t(),e(S,{key:l.text,text:l.text,name:l.url,isCenter:o(s),centerImage:I(v).$url.cdn(l.inactiveIcon),badge:l.badge,onClick:t=>I(v).$router.go(l.url)},{"active-icon":a((()=>[b(p,{class:"u-page__item__slot-icon",src:I(v).$url.cdn(l.activeIcon)},null,8,["src"])])),"inactive-icon":a((()=>[b(p,{class:"u-page__item__slot-icon",src:I(v).$url.cdn(l.inactiveIcon)},null,8,["src"])])),_:2},1032,["text","name","isCenter","centerImage","badge","onClick"])))),128))])),_:1},8,["value","inactiveColor","activeColor","midTabBar","customStyle"])])),_:1})):n("",!0)}}},[["__scopeId","data-v-ea75251c"]]),O=T({__name:"s-layout",props:{title:{type:String,default:""},navbar:{type:String,default:""},opacityBgUi:{type:String,default:"bg-white"},color:{type:String,default:""},tools:{type:String,default:"title"},keyword:{type:String,default:""},navbarStyle:{type:Object,default:()=>({mode:"",type:"",color:"",src:"",list:[],alwaysShow:0})},bgStyle:{type:Object,default:()=>({src:"",color:"var(--ui-BG-1)"})},tabbar:{type:[String,Boolean],default:""},onShareAppMessage:{type:[Boolean,Object],default:!0},leftWidth:{type:[Number,String],default:100},rightWidth:{type:[Number,String],default:100},defaultSearch:{type:String,default:""},showFloatButton:{type:Boolean,default:!1},showLeftButton:{type:Boolean,default:!1}},emits:["search"],setup(i,{emit:o}){const c=i,d=v.$store("sys"),p=B((()=>d)),y=B((()=>"normal"===c.navbar||"normal"===c.navbarStyle.mode?"normal":"inner")),m=B((()=>"inner"===y.value?{background:`${c.bgStyle.color} url(${v.$url.cdn(c.bgStyle.src)}) no-repeat top center / 100% auto`}:{})),f=B((()=>"normal"===y.value?{background:`${c.bgStyle.color} url(${v.$url.cdn(c.bgStyle.src)}) no-repeat top center / 100% auto`}:{}));return B((()=>!0===c.onShareAppMessage?v.$platform.share.getShareInfo():D.isEmpty(c.onShareAppMessage)?{}:(v.$platform.share.updateShareInfo(c.onShareAppMessage),c.onShareAppMessage))),w((()=>{})),(o,c)=>{const d=h(g("s-tabbar"),F),y=u;return t(),e(y,{class:s(["page-app",["theme-"+I(p).mode,"main-"+I(p).theme,"font-"+I(p).fontSize]])},{default:a((()=>[b(y,{class:"page-main",style:r([I(m)])},{default:a((()=>[b(y,{class:"page-body",style:r([I(f)])},{default:a((()=>[l(o.$slots,"default",{},void 0,!0),""!==i.tabbar?(t(),e(d,{key:0,path:i.tabbar},null,8,["path"])):n("",!0)])),_:3},8,["style"])])),_:3},8,["style"])])),_:3},8,["class"])}}},[["__scopeId","data-v-284a50b5"]]);export{O as _,N as a};
