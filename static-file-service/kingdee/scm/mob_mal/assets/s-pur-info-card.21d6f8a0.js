import{d as e,e as t,f as l,g as a,l as s,t as n,h as o,m as u,u as r,s as c,q as d,p as i,r as f,i as p,F as g,j as m,c as _,al as I,k,ae as y,D as C,w as b,a as x,b as E}from"./index-45b322f7.js";import{h as v,a as h}from"./index.f474d5f6.js";import{_ as F}from"./_plugin-vue_export-helper.1b428a4d.js";import{_ as w}from"./uni-data-checkbox.f4bf4f0e.js";const B=F({__name:"s-order-item-detail-card",props:{goods:{},canEdit:{type:Boolean,default:!0}},emits:["onClickPurInfo"],setup(f,{emit:p}){const g=f;function m(e){if(null==e)return;let t=e.toString(),l=t.indexOf(".");if(-1==l)return _(t);{t=parseFloat(e).toFixed(2).toString();let a=t.substring(0,l),s=t.slice(l);return _(a)+s}}function _(e){if(null==e||null==e)return e;let t=e.split("").reverse();for(let l=0;4*l+3<t.length;l++){let e=4*l+3;t.splice(e,0,",")}return t.reverse().join("")}function I(e){switch(e){case"H":case"A":return{background:"#FFFBF2",color:" #FF991C",borderColor:"#FFCB78"};case"I":case"C":case"E":case"G":return{background:"#F2FFF5",color:"#1BA854",borderColor:"#6DD18E"};case"B":case"D":case"F":return{background:"#F2F9FF",color:"#276FF5",borderColor:"#276FF5"};case"J":return{background:"",color:"#FB2323",borderColor:"#FB2323"};default:return""}}function k(){c.$router.go("/pages/goods/index",{goodsid:g.goods.goodsId,platform:g.goods.platform})}function y(){let e="",t=g.goods.materialName;""!=t&&null!=t&&null!=t||(t=g.goods.autoMappingMaterialName);let l=g.goods.purTypeName;return e=""==t||null==t||null==t?l:t+"；"+l,e}function C(e){switch(e){case"H":return"待确认";case"I":return"已确认";case"A":return"待发货";case"B":return"部分发货";case"C":return"已发货";case"D":return"部分收货";case"E":return"已收货";case"F":return"部分入库";case"G":return"已入库";case"J":return"已打回";default:return""}}return(c,_)=>{const b=d,x=i;return e(),t(x,{class:"ss-flex-col"},{default:l((()=>[a(x,{class:"ss-flex infoCard",onClick:k},{default:l((()=>[a(b,{class:"goodsImage",src:f.goods.thumbnail},null,8,["src"]),a(x,{class:"ss-flex-col detailCard"},{default:l((()=>[a(x,{class:"ss-flex ss-row-between ss-col-center"},{default:l((()=>[a(x,{class:"goodsTittle"},{default:l((()=>[s(n(f.goods.goodsName),1)])),_:1}),""!=f.goods.erplogstatus&&null!=f.goods.erplogstatus&&f.goods.erplogstatus!=c.undefind?(e(),t(x,{key:0,class:"erplogstatus-label",style:o(I(f.goods.erplogstatus))},{default:l((()=>[s(n(C(f.goods.erplogstatus)),1)])),_:1},8,["style"])):u("",!0)])),_:1}),f.canEdit&&null!=f.goods.extAmount&&f.goods.extAmount>0?(e(),t(x,{key:0,class:"ss-flex ss-row-between spescFee"},{default:l((()=>[a(x,null,{default:l((()=>[s("附加费：￥"+n(m(f.goods.extAmount)),1)])),_:1})])),_:1})):u("",!0),a(x,{class:"ss-flex ss-row-between priceNumber"},{default:l((()=>[a(x,{class:"goodsPrice"},{default:l((()=>[s("￥"+n(m(f.goods.goodsPrice)),1)])),_:1}),a(x,{class:"goodsNumber"},{default:l((()=>[s("x"+n(f.goods.qty),1)])),_:1})])),_:1})])),_:1})])),_:1}),a(x,{class:"ss-flex ss-row-between purInfo",onClick:_[0]||(_[0]=()=>p("onClickPurInfo",g.goods.goodsId))},{default:l((()=>[a(x,{class:"ss-flex"},{default:l((()=>[s(" 采购信息 "),f.canEdit?(e(),t(x,{key:0,class:"must-input-tag"},{default:l((()=>[s("*")])),_:1})):u("",!0)])),_:1}),a(x,{class:"ss-flex ss-col-center info"},{default:l((()=>[a(x,{class:"ss-line-1"},{default:l((()=>[s(n(y()),1)])),_:1}),a(r(v),{fill:"#999999",class:"ss-m-l-10"})])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-8b81871e"]]),D=F({__name:"s-order-list-item-card",props:{goodsDetailItem:{type:Object,default:{}},canEdit:{type:Boolean,default:!0}},emits:["onClickRowPurInfo","onClickRemark"],setup(o,{emit:c}){const d=o;function _(e){if(null==e)return;let t=e.toString(),l=t.indexOf(".");if(-1==l)return I(t);{t=parseFloat(e).toFixed(2).toString();let a=t.substring(0,l),s=t.slice(l);return I(a)+s}}function I(e){if(null==e||null==e)return e;let t=e.split("").reverse();for(let l=0;4*l+3<t.length;l++){let e=4*l+3;t.splice(e,0,",")}return t.reverse().join("")}function k(e){c("onClickRowPurInfo",d.goodsDetailItem.supplierId,e)}return f(""),(f,I)=>{const y=i;return e(),t(y,null,{default:l((()=>[a(y,{class:"shopInfo ss-flex ss-col-center"},{default:l((()=>[a(y,{class:"tittle"},{default:l((()=>[s(n(o.goodsDetailItem.supplierName),1)])),_:1}),a(y,{class:"tag"},{default:l((()=>[s(n(o.goodsDetailItem.platformName),1)])),_:1})])),_:1}),(e(!0),p(g,null,m(o.goodsDetailItem.placeOrderItemList,((l,a)=>(e(),t(r(B),{goods:l,class:"itemCard",canEdit:d.canEdit,onOnClickPurInfo:k},null,8,["goods","canEdit"])))),256)),a(y,{class:"ss-flex-col remarkFee remarkFeeMargin"},{default:l((()=>[a(y,{class:"ss-flex ss-row-between remark",onClick:I[0]||(I[0]=()=>c("onClickRemark",d.goodsDetailItem.supplierId))},{default:l((()=>[a(y,null,{default:l((()=>[s("备注")])),_:1}),a(y,{class:"ss-flex remark-content"},{default:l((()=>[a(y,{class:"ss-line-1"},{default:l((()=>[s(n(o.goodsDetailItem.note),1)])),_:1}),a(r(v),{fill:"#999999",class:"ss-m-l-10"})])),_:1})])),_:1}),"none"!=o.goodsDetailItem.freight?(e(),t(y,{key:0,class:"ss-flex ss-row-between fee"},{default:l((()=>[a(y,null,{default:l((()=>[s("运费")])),_:1}),a(y,null,{default:l((()=>[s("￥"+n(_(o.goodsDetailItem.freight)),1)])),_:1})])),_:1})):u("",!0)])),_:1})])),_:1})}}},[["__scopeId","data-v-f91ee813"]]),N=F({__name:"su-input",props:{number:{type:String,default:"test"},tittle:{type:String,default:"标题"},mustInput:{type:Boolean,default:!1},placeHolder:{type:String,default:"请选择"},content:{type:String,default:""},canEdit:{type:Boolean,default:!0},mode:{type:String,default:"input"}},emits:["clickInput","dateChanged"],setup(o,{emit:c}){const d=o,f=_((()=>null==d.content||null==d.content||""==d.content)),p=_((()=>function(e){let t=e.getFullYear(),l=e.getMonth()+1,a=e.getDate();l<10&&(l="0"+l);return`${t}-${l}-${a}`}(new Date(d.content))));function g(e){c("dateChanged",e.detail.value)}return(m,_)=>{const k=i,y=I;return e(),t(k,{class:"bg"},{default:l((()=>[a(k,{class:"ss-flex ss-row-between input",onClick:_[0]||(_[0]=()=>c("clickInput",o.number))},{default:l((()=>[a(k,{class:"ss-flex"},{default:l((()=>[a(k,{class:"tittle ss-line-1"},{default:l((()=>[s(n(o.tittle),1)])),_:1}),o.mustInput?(e(),t(k,{key:0,class:"tag"},{default:l((()=>[s("*")])),_:1})):u("",!0)])),_:1}),a(k,{class:"ss-flex"},{default:l((()=>["date"==d.mode?(e(),t(k,{key:0},{default:l((()=>[a(y,{class:"content ss-line-1",mode:"date",value:r(p),onChange:g},{default:l((()=>[s(n(r(p)),1)])),_:1},8,["value"])])),_:1})):(e(),t(k,{key:1},{default:l((()=>[r(f)&&o.canEdit?(e(),t(k,{key:0,class:"placeHolder ss-line-1"},{default:l((()=>[s(n(o.placeHolder),1)])),_:1})):(e(),t(k,{key:1,class:"content"},{default:l((()=>[s(n(o.content),1)])),_:1}))])),_:1})),o.canEdit?(e(),t(r(v),{key:2,fill:"#CCCCCC",size:"16"})):u("",!0)])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-1a732e6e"]]),P=F({__name:"s-remark-card",props:{supplierId:{type:String,default:""},canEdit:{type:Boolean,default:!1},content:{type:String,default:""},placeHolder:{type:String,default:""},maxLength:{type:Number,default:200}},emits:["clickAckBtnRemark","clickCloseIconRemark"],setup(o,{emit:c}){const d=o,p=f(d.content),g=f(!0),m=_((()=>p.value.length+"/"+d.maxLength));function I(){g.value=!1}function C(){g.value=!0}function b(){c("clickAckBtnRemark",d.supplierId,p.value)}return(d,f)=>{const _=i,x=y;return e(),t(_,{class:"ss-flex-col"},{default:l((()=>[a(_,{class:"ss-flex ss-col-center ss-row-center"},{default:l((()=>[a(_,{class:"windowTittle"},{default:l((()=>[s("备注")])),_:1}),a(r(h),{class:"closeOne",size:"16",fill:"#999999",onClick:f[0]||(f[0]=()=>c("clickCloseIconRemark"))})])),_:1}),(null==p.value||null==p.value||""==p.value)&&o.canEdit&&g.value?(e(),t(_,{key:0,class:"textArea ss-col-center ss-row-center ss-flex"},{default:l((()=>[a(x,{class:"placeholder-area",value:o.placeHolder,onFocus:I},null,8,["value"])])),_:1})):(e(),t(_,{key:1,class:"textArea ss-col-center ss-row-center ss-flex"},{default:l((()=>[a(x,{class:k(["area",{disabledStyle:!o.canEdit}]),disabled:!o.canEdit,modelValue:p.value,"onUpdate:modelValue":f[1]||(f[1]=e=>p.value=e),"auto-focus":"true",maxlength:o.maxLength,onBlur:C},null,8,["class","disabled","modelValue","maxlength"])])),_:1})),o.canEdit?(e(),t(_,{key:2,class:"percent"},{default:l((()=>[a(_,{class:"content-percent"},{default:l((()=>[s(n(r(m)),1)])),_:1})])),_:1})):u("",!0),o.canEdit?(e(),t(_,{key:4,class:"btnContainer"},{default:l((()=>[a(_,{class:"acknowledgeBtn",onClick:b},{default:l((()=>[s("确认")])),_:1})])),_:1})):(e(),t(_,{key:3,class:"btnContainer"},{default:l((()=>[a(_,{class:"acknowledgeBtn",onClick:b},{default:l((()=>[s("我知道了")])),_:1})])),_:1}))])),_:1})}}},[["__scopeId","data-v-c08816b0"]]),S=F({__name:"s-pur-info-card",props:{supplierId:{type:String,default:""},goodsId:{type:String,default:""},canEdit:{type:Boolean,default:!1},goodsDetail:{type:Object,default:{}}},emits:["clickAckBtn","clickCloseIcon"],setup(n,{emit:o}){const d=n,p=c.$store("order"),g=_((()=>{let e=B();return""==e.materialName||null==e.materialName||null==e.materialName?e.autoMappingMaterialName:e.materialName})),m=_((()=>B().purTypeName)),I=_((()=>B().costProjectName)),k=_((()=>B().goodsUseName)),y=_((()=>{if(!d.canEdit)return!1;let e=0;for(let l in p.supplierIdToPlaceOrderEntityMap)e+=1;let t=p.supplierIdToPlaceOrderEntityMap[d.supplierId].placeOrderItemList.length;return console.log(e),console.log(t),e>1||t>1}));function v(){return`当前订单所有商品的“费用项目”设为“${I.value}”`}function F(){return`当前订单所有商品的“商品用途”设为“${k.value}”`}function B(){let e=[];return null==p.supplierIdToPlaceOrderEntityMap[d.supplierId]?d.goodsDetail:(e=p.supplierIdToPlaceOrderEntityMap[d.supplierId].placeOrderItemList,e.find((e=>e.goodsId==d.goodsId)))}const D=f([]),P=f();function S(e){if(d.canEdit)if("material"==e)c.$router.go("/pages/baseData/materialSelect",{supplierId:d.supplierId,goodsId:d.goodsId});else if("purType"==e){let e=B(),t=p.supplierIdToPlaceOrderEntityMap[d.supplierId],l=e.materialId;""!=l&&null!=l&&null!=l||(l=e.autoMappingMaterialId),c.$router.go("/pages/baseData/purTypeSelect",{supplierId:d.supplierId,goodsId:d.goodsId,materialId:l,bizTypeId:t.businessTypeId})}else"costProjectName"==e?c.$router.go("/pages/baseData/costProjectSelect",{supplierId:d.supplierId,goodsId:d.goodsId}):"usage"==e&&c.$router.go("/pages/baseData/goodsUsageSelect",{supplierId:d.supplierId,goodsId:d.goodsId})}function M(){null!=P.value&&P.value.forEach((e=>{D.value.find((t=>t.value==e)).handleMethod()})),o("clickAckBtn")}function A(e){return null==e||null==e||""==e}function j(e,t){return A(e)&&A(t)?[]:A(e)&&!A(t)?[{value:"allUsage",text:F(),handleMethod:()=>{let e=B();p.setAllGoodsUsage(e)}}]:!A(e)&&A(t)?[{value:"allFee",text:v(),handleMethod:()=>{let e=B();p.setAllCostProject(e)}}]:[{value:"allFee",text:v(),handleMethod:()=>{let e=B();p.setAllCostProject(e)}},{value:"allUsage",text:F(),handleMethod:()=>{let e=B();p.setAllGoodsUsage(e)}}]}return C((()=>{D.value=j(I.value,k.value)})),b([I,k],(()=>{D.value=j(I.value,k.value)})),(c,d)=>{const f=i,p=x(E("su-input"),N),_=x(E("uni-data-checkbox"),w);return e(),t(f,{class:"ss-flex-col"},{default:l((()=>[a(f,{class:"ss-flex ss-col-center ss-row-center"},{default:l((()=>[a(f,{class:"windowTittle"},{default:l((()=>[s("采购信息")])),_:1}),a(r(h),{class:"closeOne",size:"16",fill:"#999999",onClick:d[0]||(d[0]=()=>o("clickCloseIcon"))})])),_:1}),a(f,{class:"ss-flex-col windowContent"},{default:l((()=>[a(p,{canEdit:n.canEdit,tittle:"ERP物料",content:r(g),mustInput:n.canEdit,number:"material",onClickInput:S},null,8,["canEdit","content","mustInput"]),a(p,{canEdit:n.canEdit,tittle:"采购类型",content:r(m),mustInput:n.canEdit,number:"purType",onClickInput:S},null,8,["canEdit","content","mustInput"]),a(p,{canEdit:n.canEdit,tittle:"费用项目",content:r(I),number:"costProjectName",onClickInput:S},null,8,["canEdit","content"]),a(p,{canEdit:n.canEdit,tittle:"商品用途",content:r(k),number:"usage",onClickInput:S},null,8,["canEdit","content"])])),_:1}),r(y)?(e(),t(f,{key:0,class:"ss-flex-col"},{default:l((()=>[n.canEdit?(e(),t(_,{key:0,multiple:"",modelValue:P.value,"onUpdate:modelValue":d[1]||(d[1]=e=>P.value=e),localdata:D.value},null,8,["modelValue","localdata"])):u("",!0)])),_:1})):u("",!0),n.canEdit?(e(),t(f,{key:2,class:"btnContainer"},{default:l((()=>[a(f,{class:"acknowledgeBtn",onClick:M},{default:l((()=>[s("确认")])),_:1})])),_:1})):(e(),t(f,{key:1,class:"btnContainer"},{default:l((()=>[a(f,{class:"acknowledgeBtn",onClick:M},{default:l((()=>[s("我知道了")])),_:1})])),_:1}))])),_:1})}}},[["__scopeId","data-v-fe2a2bc7"]]);export{D as _,N as a,P as b,S as c};
