!function(){function a(a,d){return c(a||self.document.URL||self.location.href,d||b())}function b(){var a=document.getElementsByTagName("script");return a[a.length-1].src}function c(a,b){var c=b;return/^(\/|\\\\)/.test(b)?c=/^.+?\w(\/|\\\\)/.exec(a)[0]+b.replace(/^(\/|\\\\)/,""):/^[a-z]+:/i.test(b)||(a=a.split("#")[0].split("?")[0].replace(/[^\\\/]+$/,""),c=a+""+b),d(c)}function d(a){var b=/^[a-z]+:\/\//.exec(a)[0],c=null,d=[];for(a=a.replace(b,"").split("?")[0].split("#")[0],a=a.replace(/\\/g,"/").split(/\//),a[a.length-1]="";a.length;)".."===(c=a.shift())?d.pop():"."!==c&&d.push(c);return b+d.join("/")}var e=window.UEDITOR_HOME_URL||a();window.UEDITOR_CONFIG={UEDITOR_HOME_URL:e,serverUrl:e+"jsp/controller.jsp",toolbars:[[]],xssFilterRules:!0,inputXssFilter:!0,outputXssFilter:!0,whitList:{img:["src","alt","title","width","height","id","loadingclass","class","data-latex","style","f7key"],u:[]}},window.UE={getUEBasePath:a}}(),function(){function a(a,b,c){var d;return b=b.toLowerCase(),(d=a.__allListeners||c&&(a.__allListeners={}))&&(d[b]||c&&(d[b]=[]))}function b(a,c,d,e,f,g){var h,i=e&&a[c];for(!i&&(i=a[d]);!i&&(h=(h||a).parentNode);){if("BODY"==h.tagName||g&&!g(h))return null;i=h[d]}return i&&f&&!f(i)?b(i,c,d,!1,f):i}UEDITOR_CONFIG=window.UEDITOR_CONFIG||{};var c=window.baidu||{};window.baidu=c,window.UE=c.editor=window.UE||{},UE.plugins={},UE.commands={},UE.instants={},UE.I18N={},UE._customizeUI={},UE.version="1.4.3";var d=UE.dom={},e=UE.browser=function(){var a=navigator.userAgent.toLowerCase(),b=window.opera,c={ie:/(msie\s|trident.*rv:)([\w.]+)/.test(a),opera:!!b&&b.version,webkit:a.indexOf(" applewebkit/")>-1,mac:a.indexOf("macintosh")>-1,quirks:"BackCompat"==document.compatMode};c.gecko="Gecko"==navigator.product&&!c.webkit&&!c.opera&&!c.ie;var d=0;if(c.ie){var e=a.match(/(?:msie\s([\w.]+))/),f=a.match(/(?:trident.*rv:([\w.]+))/);d=e&&f&&e[1]&&f[1]?Math.max(1*e[1],1*f[1]):e&&e[1]?1*e[1]:f&&f[1]?1*f[1]:0,c.ie11Compat=11==document.documentMode,c.ie9Compat=9==document.documentMode,c.ie8=!!document.documentMode,c.ie8Compat=8==document.documentMode,c.ie7Compat=7==d&&!document.documentMode||7==document.documentMode,c.ie6Compat=d<7||c.quirks,c.ie9above=d>8,c.ie9below=d<9,c.ie11above=d>10,c.ie11below=d<11}if(c.gecko){var g=a.match(/rv:([\d\.]+)/);g&&(g=g[1].split("."),d=1e4*g[0]+100*(g[1]||0)+1*(g[2]||0))}return/chrome\/(\d+\.\d)/i.test(a)&&(c.chrome=+RegExp.$1),/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(a)&&!/chrome/i.test(a)&&(c.safari=+(RegExp.$1||RegExp.$2)),c.opera&&(d=parseFloat(b.version())),c.webkit&&(d=parseFloat(a.match(/ applewebkit\/(\d+)/)[1])),c.version=d,c.isCompatible=!c.mobile&&(c.ie&&d>=6||c.gecko&&d>=10801||c.opera&&d>=9.5||c.air&&d>=1||c.webkit&&d>=522||!1),c}(),f=e.ie,g=(e.webkit,e.gecko,e.opera,UE.utils={each:function(a,b,c){if(null!=a)if(a.length===+a.length){for(var d=0,e=a.length;d<e;d++)if(!1===b.call(c,a[d],d,a))return!1}else for(var f in a)if(a.hasOwnProperty(f)&&!1===b.call(c,a[f],f,a))return!1},makeInstance:function(a){var b=new Function;return b.prototype=a,a=new b,b.prototype=null,a},extend:function(a,b,c){if(b)for(var d in b)c&&a.hasOwnProperty(d)||(a[d]=b[d]);return a},extend2:function(a){for(var b=arguments,c=1;c<b.length;c++){var d=b[c];for(var e in d)a.hasOwnProperty(e)||(a[e]=d[e])}return a},inherits:function(a,b){var c=a.prototype,d=g.makeInstance(b.prototype);return g.extend(d,c,!0),a.prototype=d,d.constructor=a},bind:function(a,b){return function(){return a.apply(b,arguments)}},defer:function(a,b,c){var d;return function(){c&&clearTimeout(d),d=setTimeout(a,b)}},indexOf:function(a,b,c){var d=-1;return c=this.isNumber(c)?c:0,this.each(a,function(a,e){if(e>=c&&a===b)return d=e,!1}),d},removeItem:function(a,b){for(var c=0,d=a.length;c<d;c++)a[c]===b&&(a.splice(c,1),c--)},trim:function(a){return a.replace(/(^[ \t\n\r]+)|([ \t\n\r]+$)/g,"")},listToMap:function(a){if(!a)return{};a=g.isArray(a)?a:a.split(",");for(var b,c=0,d={};b=a[c++];)d[b.toUpperCase()]=d[b]=1;return d},unhtml:function(a,b){return a?a.replace(b||/[&<">'](?:(amp|lt|quot|gt|#39|nbsp|#\d+);)?/g,function(a,b){return b?a:{"<":"&lt;","&":"&amp;",'"':"&quot;",">":"&gt;","'":"&#39;"}[a]}):""},html:function(a){return a?a.replace(/&((g|l|quo)t|amp|#39|nbsp);/g,function(a){return{"&lt;":"<","&amp;":"&","&quot;":'"',"&gt;":">","&#39;":"'","&nbsp;":" "}[a]}):""},cssStyleToDomStyle:function(){var a=document.createElement("div").style,b={float:void 0!=a.cssFloat?"cssFloat":void 0!=a.styleFloat?"styleFloat":"float"};return function(a){return b[a]||(b[a]=a.toLowerCase().replace(/-./g,function(a){return a.charAt(1).toUpperCase()}))}}(),loadFile:function(){function a(a,c){try{for(var d,e=0;d=b[e++];)if(d.doc===a&&d.url==(c.src||c.href))return d}catch(a){return null}}var b=[];return function(c,d,e){var f=a(c,d);if(f)return void(f.ready?e&&e():f.funs.push(e));if(b.push({doc:c,url:d.src||d.href,funs:[e]}),!c.body){var g=[];for(var h in d)"tag"!=h&&g.push(h+'="'+d[h]+'"');return void c.write("<"+d.tag+" "+g.join(" ")+" ></"+d.tag+">")}if(!d.id||!c.getElementById(d.id)){var i=c.createElement(d.tag);delete d.tag;for(var h in d)i.setAttribute(h,d[h]);i.onload=i.onreadystatechange=function(){if(!this.readyState||/loaded|complete/.test(this.readyState)){if(f=a(c,d),f.funs.length>0){f.ready=1;for(var b;b=f.funs.pop();)b()}i.onload=i.onreadystatechange=null}},i.onerror=function(){throw Error("The load "+(d.href||d.src)+" fails,check the url settings of file ueditor.config.js ")},c.getElementsByTagName("head")[0].appendChild(i)}}}(),isEmptyObject:function(a){if(null==a)return!0;if(this.isArray(a)||this.isString(a))return 0===a.length;for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},fixColor:function(a,b){if(/color/i.test(a)&&/rgba?/.test(b)){var c=b.split(",");if(c.length>3)return"";b="#";for(var d,e=0;d=c[e++];)d=parseInt(d.replace(/[^\d]/gi,""),10).toString(16),b+=1==d.length?"0"+d:d;b=b.toUpperCase()}return b},clone:function(a,b){var c;b=b||{};for(var d in a)a.hasOwnProperty(d)&&(c=a[d],"object"==typeof c?(b[d]=g.isArray(c)?[]:{},g.clone(a[d],b[d])):b[d]=c);return b},transUnitToPx:function(a){if(!/(pt|cm)/.test(a))return a;var b;switch(a.replace(/([\d.]+)(\w+)/,function(c,d,e){a=d,b=e}),b){case"cm":a=25*parseFloat(a);break;case"pt":a=Math.round(96*parseFloat(a)/72)}return a+(a?"px":"")},domReady:function(){function a(a){a.isReady=!0;for(var c;c=b.pop();c());}var b=[];return function(c,d){d=d||window;var f=d.document;c&&b.push(c),"complete"===f.readyState?a(f):(f.isReady&&a(f),e.ie&&11!=e.version?(!function(){if(!f.isReady){try{f.documentElement.doScroll("left")}catch(a){return void setTimeout(arguments.callee,0)}a(f)}}(),d.attachEvent("onload",function(){a(f)})):(f.addEventListener("DOMContentLoaded",function(){f.removeEventListener("DOMContentLoaded",arguments.callee,!1),a(f)},!1),d.addEventListener("load",function(){a(f)},!1)))}}(),cssRule:e.ie&&11!=e.version?function(a,b,c){var d,e;if(void 0===b||b&&b.nodeType&&9==b.nodeType){if(c=b&&b.nodeType&&9==b.nodeType?b:c||document,d=c.indexList||(c.indexList={}),void 0!==(e=d[a]))return c.styleSheets[e].cssText}else{if(c=c||document,d=c.indexList||(c.indexList={}),e=d[a],""===b)return void 0!==e&&(c.styleSheets[e].cssText="",delete d[a],!0);void 0!==e?sheetStyle=c.styleSheets[e]:(sheetStyle=c.createStyleSheet("",e=c.styleSheets.length),d[a]=e),sheetStyle.cssText=b}}:function(a,b,c){var d;return void 0===b||b&&b.nodeType&&9==b.nodeType?(c=b&&b.nodeType&&9==b.nodeType?b:c||document,d=c.getElementById(a),d?d.innerHTML:void 0):(c=c||document,d=c.getElementById(a),""===b?!!d&&(d.parentNode.removeChild(d),!0):void(d?d.innerHTML=b:(d=c.createElement("style"),d.id=a,d.innerHTML=b,c.getElementsByTagName("head")[0].appendChild(d))))},sort:function(a,b){b=b||function(a,b){return a.localeCompare(b)};for(var c=0,d=a.length;c<d;c++)for(var e=c,f=a.length;e<f;e++)if(b(a[c],a[e])>0){var g=a[c];a[c]=a[e],a[e]=g}return a},formatUrl:function(a){var b=a.replace(/&&/g,"&");return b=b.replace(/\?&/g,"?"),b=b.replace(/&$/g,""),b=b.replace(/&#/g,"#"),b=b.replace(/&+/g,"&")},str2json:function(a){return g.isString(a)?window.JSON?JSON.parse(a):new Function("return "+g.trim(a||""))():null},json2str:function(){function a(a){return/["\\\x00-\x1f]/.test(a)&&(a=a.replace(/["\\\x00-\x1f]/g,function(a){var b=e[a];return b||(b=a.charCodeAt(),"\\u00"+Math.floor(b/16).toString(16)+(b%16).toString(16))})),'"'+a+'"'}function b(a){var b,c,d,e=["["],f=a.length;for(c=0;c<f;c++)switch(typeof(d=a[c])){case"undefined":case"function":case"unknown":break;default:b&&e.push(","),e.push(g.json2str(d)),b=1}return e.push("]"),e.join("")}function c(a){return a<10?"0"+a:a}function d(a){return'"'+a.getFullYear()+"-"+c(a.getMonth()+1)+"-"+c(a.getDate())+"T"+c(a.getHours())+":"+c(a.getMinutes())+":"+c(a.getSeconds())+'"'}if(window.JSON)return JSON.stringify;var e={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return function(c){switch(typeof c){case"undefined":return"undefined";case"number":return isFinite(c)?String(c):"null";case"string":return a(c);case"boolean":return String(c);default:if(null===c)return"null";if(g.isArray(c))return b(c);if(g.isDate(c))return d(c);var e,f,h=["{"],i=g.json2str;for(var j in c)if(Object.prototype.hasOwnProperty.call(c,j))switch(typeof(f=c[j])){case"undefined":case"unknown":case"function":break;default:e&&h.push(","),e=1,h.push(i(j)+":"+i(f))}return h.push("}"),h.join("")}}}()});g.each(["String","Function","Array","Number","RegExp","Object","Date"],function(a){UE.utils["is"+a]=function(b){return Object.prototype.toString.apply(b)=="[object "+a+"]"}});var h=UE.EventBase=function(){};h.prototype={addListener:function(b,c){b=g.trim(b).split(/\s+/);for(var d,e=0;d=b[e++];)a(this,d,!0).push(c)},on:function(a,b){return this.addListener(a,b)},off:function(a,b){return this.removeListener(a,b)},trigger:function(){return this.fireEvent.apply(this,arguments)},removeListener:function(b,c){b=g.trim(b).split(/\s+/);for(var d,e=0;d=b[e++];)g.removeItem(a(this,d)||[],c)},fireEvent:function(){var b=arguments[0];b=g.trim(b).split(" ");for(var c,d=0;c=b[d++];){var e,f,h,i=a(this,c);if(i)for(h=i.length;h--;)if(i[h]){if(!0===(f=i[h].apply(this,arguments)))return f;void 0!==f&&(e=f)}(f=this["on"+c.toLowerCase()])&&(e=f.apply(this,arguments))}return e}};var i=d.dtd=function(){function a(a){for(var b in a)a[b.toUpperCase()]=a[b];return a}var b=g.extend2,c=a({isindex:1,fieldset:1}),d=a({input:1,button:1,select:1,textarea:1,label:1}),e=b(a({a:1}),d),f=b({iframe:1},e),h=a({hr:1,ul:1,menu:1,div:1,blockquote:1,noscript:1,table:1,center:1,address:1,dir:1,pre:1,h5:1,dl:1,h4:1,noframes:1,h6:1,ol:1,h1:1,h3:1,h2:1}),i=a({ins:1,del:1,script:1,style:1}),j=b(a({b:1,acronym:1,bdo:1,var:1,"#":1,abbr:1,code:1,br:1,i:1,cite:1,kbd:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,dfn:1,span:1}),i),k=b(a({sub:1,img:1,embed:1,object:1,sup:1,basefont:1,map:1,applet:1,font:1,big:1,small:1}),j),l=b(a({p:1}),k),m=b(a({iframe:1}),k,d),n=a({img:1,embed:1,noscript:1,br:1,kbd:1,center:1,button:1,basefont:1,h5:1,h4:1,samp:1,h6:1,ol:1,h1:1,h3:1,h2:1,form:1,font:1,"#":1,select:1,menu:1,ins:1,abbr:1,label:1,code:1,table:1,script:1,cite:1,input:1,iframe:1,strong:1,textarea:1,noframes:1,big:1,small:1,span:1,hr:1,sub:1,bdo:1,var:1,div:1,object:1,sup:1,strike:1,dir:1,map:1,dl:1,applet:1,del:1,isindex:1,fieldset:1,ul:1,b:1,acronym:1,a:1,blockquote:1,i:1,u:1,s:1,tt:1,address:1,q:1,pre:1,p:1,em:1,dfn:1}),o=b(a({a:0}),m),p=a({tr:1}),q=a({"#":1}),r=b(a({param:1}),n),s=b(a({form:1}),c,f,h,l),t=a({li:1,ol:1,ul:1}),u=a({style:1,script:1}),v=a({base:1,link:1,meta:1,title:1}),w=b(v,u),x=a({head:1,body:1}),y=a({html:1}),z=a({address:1,blockquote:1,center:1,dir:1,div:1,dl:1,fieldset:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,hr:1,isindex:1,menu:1,noframes:1,ol:1,p:1,pre:1,table:1,ul:1}),A=a({area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1});return a({$nonBodyContent:b(y,x,v),$block:z,$inline:o,$inlineWithA:b(a({a:1}),o),$body:b(a({script:1,style:1}),z),$cdata:a({script:1,style:1}),$empty:A,$nonChild:a({iframe:1,textarea:1}),$listItem:a({dd:1,dt:1,li:1}),$list:a({ul:1,ol:1,dl:1}),$isNotEmpty:a({table:1,ul:1,ol:1,dl:1,iframe:1,area:1,base:1,col:1,hr:1,img:1,embed:1,input:1,link:1,meta:1,param:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1}),$removeEmpty:a({a:1,abbr:1,acronym:1,address:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,var:1}),$removeEmptyBlock:a({p:1,div:1}),$tableContent:a({caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1,table:1}),$notTransContent:a({pre:1,script:1,style:1,textarea:1}),html:x,head:w,style:q,script:q,body:s,base:{},link:{},meta:{},title:q,col:{},tr:a({td:1,th:1}),img:{},embed:{},colgroup:a({thead:1,col:1,tbody:1,tr:1,tfoot:1}),noscript:s,td:s,br:{},th:s,center:s,kbd:o,button:b(l,h),basefont:{},h5:o,h4:o,samp:o,h6:o,ol:t,h1:o,h3:o,option:q,h2:o,form:b(c,f,h,l),select:a({optgroup:1,option:1}),font:o,ins:o,menu:t,abbr:o,label:o,table:a({thead:1,col:1,tbody:1,tr:1,colgroup:1,caption:1,tfoot:1}),code:o,tfoot:p,cite:o,li:s,input:{},iframe:s,strong:o,textarea:q,noframes:s,big:o,small:o,span:a({"#":1,br:1,b:1,strong:1,u:1,i:1,em:1,sub:1,sup:1,strike:1,span:1}),hr:o,dt:o,sub:o,optgroup:a({option:1}),param:{},bdo:o,var:o,div:s,object:r,sup:o,dd:s,strike:o,area:{},dir:t,map:b(a({area:1,form:1,p:1}),c,i,h),applet:r,dl:a({dt:1,dd:1}),del:o,isindex:{},fieldset:b(a({legend:1}),n),thead:p,ul:t,acronym:o,b:o,a:b(a({a:1}),m),blockquote:b(a({td:1,tr:1,tbody:1,li:1}),s),caption:o,i:o,u:o,tbody:p,s:o,address:b(f,l),tt:o,legend:o,q:o,pre:b(j,e),p:b(a({a:1}),o),em:o,dfn:o})}(),j=f&&e.version<9?{tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder"}:{tabindex:"tabIndex",readonly:"readOnly"},k=g.listToMap(["-webkit-box","-moz-box","block","list-item","table","table-row-group","table-header-group","table-footer-group","table-row","table-column-group","table-column","table-cell","table-caption"]),l=d.domUtils={NODE_ELEMENT:1,NODE_DOCUMENT:9,NODE_TEXT:3,NODE_COMMENT:8,NODE_DOCUMENT_FRAGMENT:11,POSITION_IDENTICAL:0,POSITION_DISCONNECTED:1,POSITION_FOLLOWING:2,POSITION_PRECEDING:4,POSITION_IS_CONTAINED:8,POSITION_CONTAINS:16,fillChar:f&&"6"==e.version?"\ufeff":"​",keys:{8:1,46:1,16:1,17:1,18:1,37:1,38:1,39:1,40:1,13:1},getPosition:function(a,b){if(a===b)return 0;var c,d=[a],e=[b];for(c=a;c=c.parentNode;){if(c===b)return 10;d.push(c)}for(c=b;c=c.parentNode;){if(c===a)return 20;e.push(c)}if(d.reverse(),e.reverse(),d[0]!==e[0])return 1;for(var f=-1;f++,d[f]===e[f];);for(a=d[f],b=e[f];a=a.nextSibling;)if(a===b)return 4;return 2},getNodeIndex:function(a,b){for(var c=a,d=0;c=c.previousSibling;)b&&3==c.nodeType?c.nodeType!=c.nextSibling.nodeType&&d++:d++;return d},inDoc:function(a,b){return 10==l.getPosition(a,b)},findParent:function(a,b,c){if(a&&!l.isBody(a))for(a=c?a:a.parentNode;a;){if(!b||b(a)||l.isBody(a))return b&&!b(a)&&l.isBody(a)?null:a;a=a.parentNode}return null},findParentByTagName:function(a,b,c,d){return b=g.listToMap(g.isArray(b)?b:[b]),l.findParent(a,function(a){return b[a.tagName]&&!(d&&d(a))},c)},findParents:function(a,b,c,d){for(var e=b&&(c&&c(a)||!c)?[a]:[];a=l.findParent(a,c);)e.push(a);return d?e:e.reverse()},insertAfter:function(a,b){return a.nextSibling?a.parentNode.insertBefore(b,a.nextSibling):a.parentNode.appendChild(b)},remove:function(a,b){var c,d=a.parentNode;if(d){if(b&&a.hasChildNodes())for(;c=a.firstChild;)d.insertBefore(c,a);d.removeChild(a)}return a},getNextDomNode:function(a,c,d,e){return b(a,"firstChild","nextSibling",c,d,e)},getPreDomNode:function(a,c,d,e){return b(a,"lastChild","previousSibling",c,d,e)},isBookmarkNode:function(a){return 1==a.nodeType&&a.id&&/^_baidu_bookmark_/i.test(a.id)},getWindow:function(a){var b=a.ownerDocument||a;return b.defaultView||b.parentWindow},getCommonAncestor:function(a,b){if(a===b)return a;for(var c=[a],d=[b],e=a,f=-1;e=e.parentNode;){if(e===b)return e;c.push(e)}for(e=b;e=e.parentNode;){if(e===a)return e;d.push(e)}for(c.reverse(),d.reverse();f++,c[f]===d[f];);return 0==f?null:c[f-1]},split:function(a,b){var c=a.ownerDocument;if(e.ie&&b==a.nodeValue.length){var d=c.createTextNode("");return l.insertAfter(a,d)}var f=a.splitText(b);if(e.ie8){var g=c.createTextNode("");l.insertAfter(f,g),l.remove(g)}return f},isWhitespace:function(a){return!new RegExp("[^ \t\n\r"+l.fillChar+"]").test(a.nodeValue)},getXY:function(a){for(var b=0,c=0;a.offsetParent;)c+=a.offsetTop,b+=a.offsetLeft,a=a.offsetParent;return{x:b,y:c}},on:function(a,b,c){var d=g.isArray(b)?b:g.trim(b).split(/\s+/),e=d.length;if(e)for(;e--;)if(b=d[e],a.addEventListener)a.addEventListener(b,c,!1);else{c._d||(c._d={els:[]});var f=b+c.toString(),h=g.indexOf(c._d.els,a);c._d[f]&&-1!=h||(-1==h&&c._d.els.push(a),c._d[f]||(c._d[f]=function(a){return c.call(a.srcElement,a||window.event)}),a.attachEvent("on"+b,c._d[f]))}a=null},un:function(a,b,c){var d=g.isArray(b)?b:g.trim(b).split(/\s+/),e=d.length;if(e)for(;e--;)if(b=d[e],a.removeEventListener)a.removeEventListener(b,c,!1);else{var f=b+c.toString();try{a.detachEvent("on"+b,c._d?c._d[f]:c)}catch(a){}if(c._d&&c._d[f]){var h=g.indexOf(c._d.els,a);-1!=h&&c._d.els.splice(h,1),0==c._d.els.length&&delete c._d[f]}}},isSameElement:function(a,b){if(a.tagName!=b.tagName)return!1;var c=a.attributes,d=b.attributes;if(!f&&c.length!=d.length)return!1;for(var e,g,h=0,i=0,j=0;e=c[j++];){if("style"==e.nodeName){if(e.specified&&h++,l.isSameStyle(a,b))continue;return!1}if(f){if(!e.specified)continue;h++,g=d.getNamedItem(e.nodeName)}else g=b.attributes[e.nodeName];if(!g.specified||e.nodeValue!=g.nodeValue)return!1}if(f){for(j=0;g=d[j++];)g.specified&&i++;if(h!=i)return!1}return!0},isSameStyle:function(a,b){var c=a.style.cssText.replace(/( ?; ?)/g,";").replace(/( ?: ?)/g,":"),d=b.style.cssText.replace(/( ?; ?)/g,";").replace(/( ?: ?)/g,":");if(e.opera){if(c=a.style,d=b.style,c.length!=d.length)return!1;for(var f in c)if(!/^(\d+|csstext)$/i.test(f)&&c[f]!=d[f])return!1;return!0}if(!c||!d)return c==d;if(c=c.split(";"),d=d.split(";"),c.length!=d.length)return!1;for(var h,i=0;h=c[i++];)if(-1==g.indexOf(d,h))return!1;return!0},isBlockElm:function(a){return 1==a.nodeType&&(i.$block[a.tagName]||k[l.getComputedStyle(a,"display")])&&!i.$nonChild[a.tagName]},isBody:function(a){return a&&1==a.nodeType&&"body"==a.tagName.toLowerCase()},breakParent:function(a,b){var c,d,e,f=a,g=a;do{for(f=f.parentNode,d?(c=f.cloneNode(!1),c.appendChild(d),d=c,c=f.cloneNode(!1),c.appendChild(e),e=c):(d=f.cloneNode(!1),e=d.cloneNode(!1));c=g.previousSibling;)d.insertBefore(c,d.firstChild);for(;c=g.nextSibling;)e.appendChild(c);g=f}while(b!==f);return c=b.parentNode,c.insertBefore(d,b),c.insertBefore(e,b),c.insertBefore(a,e),l.remove(b),a},isEmptyInlineElement:function(a){if(1!=a.nodeType||!i.$removeEmpty[a.tagName])return 0;for(a=a.firstChild;a;){if(l.isBookmarkNode(a))return 0;if(1==a.nodeType&&!l.isEmptyInlineElement(a)||3==a.nodeType&&!l.isWhitespace(a))return 0;a=a.nextSibling}return 1},trimWhiteTextNode:function(a){function b(b){for(var c;(c=a[b])&&3==c.nodeType&&l.isWhitespace(c);)a.removeChild(c)}b("firstChild"),b("lastChild")},getElementsByTagName:function(a,b,c){if(c&&g.isString(c)){var d=c;c=function(a){return l.hasClass(a,d)}}b=g.trim(b).replace(/[ ]{2,}/g," ").split(" ");for(var e,f=[],h=0;e=b[h++];)for(var i,j=a.getElementsByTagName(e),k=0;i=j[k++];)c&&!c(i)||f.push(i);return f},mergeSibling:function(a,b,c){function d(a,b,c){var d;if((d=c[a])&&!l.isBookmarkNode(d)&&1==d.nodeType&&l.isSameElement(c,d)){for(;d.firstChild;)"firstChild"==b?c.insertBefore(d.lastChild,c.firstChild):c.appendChild(d.firstChild);l.remove(d)}}!b&&d("previousSibling","firstChild",a),!c&&d("nextSibling","lastChild",a)},unSelectable:f&&e.ie9below||e.opera?function(a){a.onselectstart=function(){return!1},a.onclick=a.onkeyup=a.onkeydown=function(){return!1},a.unselectable="on",a.setAttribute("unselectable","on");for(var b,c=0;b=a.all[c++];)switch(b.tagName.toLowerCase()){case"iframe":case"textarea":case"input":case"select":break;default:b.unselectable="on",a.setAttribute("unselectable","on")}}:function(a){a.style.MozUserSelect=a.style.webkitUserSelect=a.style.msUserSelect=a.style.KhtmlUserSelect="none"},removeAttributes:function(a,b){b=g.isArray(b)?b:g.trim(b).replace(/[ ]{2,}/g," ").split(" ");for(var c,d=0;c=b[d++];){switch(c=j[c]||c){case"className":a[c]="";break;case"style":a.style.cssText="";var f=a.getAttributeNode("style");!e.ie&&f&&a.removeAttributeNode(f)}a.removeAttribute(c)}},createElement:function(a,b,c){return l.setAttributes(a.createElement(b),c)},setAttributes:function(a,b){for(var c in b)if(b.hasOwnProperty(c)){var d=b[c];switch(c){case"class":a.className=d;break;case"style":a.style.cssText=a.style.cssText+";"+d;break;case"innerHTML":a[c]=d;break;case"value":a.value=d;break;default:a.setAttribute(j[c]||c,d)}}return a},getComputedStyle:function(a,b){if("width height top left".indexOf(b)>-1)return a["offset"+b.replace(/^\w/,function(a){return a.toUpperCase()})]+"px";if(3==a.nodeType&&(a=a.parentNode),e.ie&&e.version<9&&"font-size"==b&&!a.style.fontSize&&!i.$empty[a.tagName]&&!i.$nonChild[a.tagName]){var c=a.ownerDocument.createElement("span");c.style.cssText="padding:0;border:0;font-family:simsun;",c.innerHTML=".",a.appendChild(c);var d=c.offsetHeight;return a.removeChild(c),c=null,d+"px"}try{var f=l.getStyle(a,b)||(window.getComputedStyle?l.getWindow(a).getComputedStyle(a,"").getPropertyValue(b):(a.currentStyle||a.style)[g.cssStyleToDomStyle(b)])}catch(a){return""}return g.transUnitToPx(g.fixColor(b,f))},removeClasses:function(a,b){b=g.isArray(b)?b:g.trim(b).replace(/[ ]{2,}/g," ").split(" ");for(var c,d=0,e=a.className;c=b[d++];)e=e.replace(new RegExp("\\b"+c+"\\b"),"");e=g.trim(e).replace(/[ ]{2,}/g," "),e?a.className=e:l.removeAttributes(a,["class"])},addClass:function(a,b){if(a){b=g.trim(b).replace(/[ ]{2,}/g," ").split(" ");for(var c,d=0,e=a.className;c=b[d++];)new RegExp("\\b"+c+"\\b").test(e)||(e+=" "+c);a.className=g.trim(e)}},hasClass:function(a,b){if(g.isRegExp(b))return b.test(a.className);b=g.trim(b).replace(/[ ]{2,}/g," ").split(" ");for(var c,d=0,e=a.className;c=b[d++];)if(!new RegExp("\\b"+c+"\\b","i").test(e))return!1;return d-1==b.length},preventDefault:function(a){a.preventDefault?a.preventDefault():a.returnValue=!1},getStyle:function(a,b){var c=a.style[g.cssStyleToDomStyle(b)];return g.fixColor(b,c)},setStyle:function(a,b,c){a.style[g.cssStyleToDomStyle(b)]=c,g.trim(a.style.cssText)||this.removeAttributes(a,"style")},setStyles:function(a,b){for(var c in b)b.hasOwnProperty(c)&&l.setStyle(a,c,b[c])},getChildCount:function(a,b){var c=0,d=a.firstChild;for(b=b||function(){return 1};d;)b(d)&&c++,d=d.nextSibling;return c},isEmptyNode:function(a){return!a.firstChild||0==l.getChildCount(a,function(a){return!l.isBr(a)&&!l.isBookmarkNode(a)&&!l.isWhitespace(a)})},scrollToView:function(a,b,c){var d=function(){var a=b.document,c="CSS1Compat"==a.compatMode;return{width:(c?a.documentElement.clientWidth:a.body.clientWidth)||0,height:(c?a.documentElement.clientHeight:a.body.clientHeight)||0}},e=function(a){if("pageXOffset"in a)return{x:a.pageXOffset||0,y:a.pageYOffset||0};var b=a.document;return{x:b.documentElement.scrollLeft||b.body.scrollLeft||0,y:b.documentElement.scrollTop||b.body.scrollTop||0}},f=d().height,g=-1*f+c;g+=a.offsetHeight||0,g+=l.getXY(a).y;var h=e(b).y;(g>h||g<h-f)&&b.scrollTo(0,g+(g<0?-20:20))},isBr:function(a){return 1==a.nodeType&&"BR"==a.tagName},isFillChar:function(a,b){if(3!=a.nodeType)return!1;var c=a.nodeValue;return b?new RegExp("^"+l.fillChar).test(c):!c.replace(new RegExp(l.fillChar,"g"),"").length},isEmptyBlock:function(a,b){if(1!=a.nodeType)return 0;if(b=b||new RegExp("[  \t\r\n"+l.fillChar+"]","g"),a[e.ie?"innerText":"textContent"].replace(b,"").length>0)return 0;for(var c in i.$isNotEmpty)if(a.getElementsByTagName(c).length)return 0;return 1},setViewportOffset:function(a,b){var c=0|parseInt(a.style.left),d=0|parseInt(a.style.top),e=a.getBoundingClientRect(),f=b.left-e.left,g=b.top-e.top;f&&(a.style.left=c+f+"px"),g&&(a.style.top=d+g+"px")},isCustomeNode:function(a){return 1==a.nodeType&&a.getAttribute("_ue_custom_node_")},isBoundaryNode:function(a,b){for(var c;!l.isBody(a);)if(c=a,a=a.parentNode,c!==a[b])return!1;return!0},fillHtml:e.ie11below?"&nbsp;":"<br/>"},m=new RegExp(l.fillChar,"g");!function(){function a(a){a.collapsed=a.startContainer&&a.endContainer&&a.startContainer===a.endContainer&&a.startOffset==a.endOffset}function b(a){return!a.collapsed&&1==a.startContainer.nodeType&&a.startContainer===a.endContainer&&a.endOffset-a.startOffset==1}function c(b,c,d,e){return 1==c.nodeType&&(i.$empty[c.tagName]||i.$nonChild[c.tagName])&&(d=l.getNodeIndex(c)+(b?0:1),c=c.parentNode),b?(e.startContainer=c,e.startOffset=d,e.endContainer||e.collapse(!0)):(e.endContainer=c,e.endOffset=d,e.startContainer||e.collapse(!1)),a(e),e}function f(a,b){var c,d,e=a.startContainer,f=a.endContainer,g=a.startOffset,h=a.endOffset,i=a.document,j=i.createDocumentFragment();if(1==e.nodeType&&(e=e.childNodes[g]||(c=e.appendChild(i.createTextNode("")))),1==f.nodeType&&(f=f.childNodes[h]||(d=f.appendChild(i.createTextNode("")))),e===f&&3==e.nodeType)return j.appendChild(i.createTextNode(e.substringData(g,h-g))),b&&(e.deleteData(g,h-g),a.collapse(!0)),j;for(var k,m,n=j,o=l.findParents(e,!0),p=l.findParents(f,!0),q=0;o[q]==p[q];)q++;for(var r,s=q;r=o[s];s++){for(k=r.nextSibling,r==e?c||(3==a.startContainer.nodeType?(n.appendChild(i.createTextNode(e.nodeValue.slice(g))),b&&e.deleteData(g,e.nodeValue.length-g)):n.appendChild(b?e:e.cloneNode(!0))):(m=r.cloneNode(!1),n.appendChild(m));k&&k!==f&&k!==p[s];)r=k.nextSibling,n.appendChild(b?k:k.cloneNode(!0)),k=r;n=m}n=j,o[q]||(n.appendChild(o[q-1].cloneNode(!1)),n=n.firstChild);for(var t,s=q;t=p[s];s++){if(k=t.previousSibling,t==f?d||3!=a.endContainer.nodeType||(n.appendChild(i.createTextNode(f.substringData(0,h))),b&&f.deleteData(0,h)):(m=t.cloneNode(!1),n.appendChild(m)),s!=q||!o[q])for(;k&&k!==e;)t=k.previousSibling,n.insertBefore(b?k:k.cloneNode(!0),n.firstChild),k=t;n=m}return b&&a.setStartBefore(p[q]?o[q]?p[q]:o[q-1]:p[q-1]).collapse(!0),c&&l.remove(c),d&&l.remove(d),j}function g(a,b){try{if(j&&l.inDoc(j,a))if(j.nodeValue.replace(m,"").length)j.nodeValue=j.nodeValue.replace(m,"");else{var c=j.parentNode;for(l.remove(j);c&&l.isEmptyInlineElement(c)&&(e.safari?!(l.getPosition(c,b)&l.POSITION_CONTAINS):!c.contains(b));)j=c.parentNode,l.remove(c),c=j}}catch(a){}}function h(a,b){var c;for(a=a[b];a&&l.isFillChar(a);)c=a[b],l.remove(a),a=c}var j,k=0,n=l.fillChar,o=d.Range=function(a){var b=this;b.startContainer=b.startOffset=b.endContainer=b.endOffset=null,b.document=a,b.collapsed=!0};o.prototype={deleteContents:function(){var a;return this.collapsed||f(this,1),e.webkit&&(a=this.startContainer,3!=a.nodeType||a.nodeValue.length||(this.setStartBefore(a).collapse(!0),l.remove(a))),this},setStart:function(a,b){return c(!0,a,b,this)},setEnd:function(a,b){return c(!1,a,b,this)},setStartAfter:function(a){return this.setStart(a.parentNode,l.getNodeIndex(a)+1)},setStartBefore:function(a){return this.setStart(a.parentNode,l.getNodeIndex(a))},setEndAfter:function(a){return this.setEnd(a.parentNode,l.getNodeIndex(a)+1)},setEndBefore:function(a){return this.setEnd(a.parentNode,l.getNodeIndex(a))},setStartAtFirst:function(a){return this.setStart(a,0)},setStartAtLast:function(a){return this.setStart(a,3==a.nodeType?a.nodeValue.length:a.childNodes.length)},setEndAtLast:function(a){return this.setEnd(a,3==a.nodeType?a.nodeValue.length:a.childNodes.length)},selectNode:function(a){return this.setStartBefore(a).setEndAfter(a)},selectNodeContents:function(a){return this.setStart(a,0).setEndAtLast(a)},cloneRange:function(){var a=this;return new o(a.document).setStart(a.startContainer,a.startOffset).setEnd(a.endContainer,a.endOffset)},collapse:function(a){var b=this;return a?(b.endContainer=b.startContainer,b.endOffset=b.startOffset):(b.startContainer=b.endContainer,b.startOffset=b.endOffset),b.collapsed=!0,b},shrinkBoundary:function(a){function b(a){return 1==a.nodeType&&!l.isBookmarkNode(a)&&!i.$empty[a.tagName]&&!i.$nonChild[a.tagName]}for(var c,d=this,e=d.collapsed;1==d.startContainer.nodeType&&(c=d.startContainer.childNodes[d.startOffset])&&b(c);)d.setStart(c,0);if(e)return d.collapse(!0);if(!a)for(;1==d.endContainer.nodeType&&d.endOffset>0&&(c=d.endContainer.childNodes[d.endOffset-1])&&b(c);)d.setEnd(c,c.childNodes.length);return d},getCommonAncestor:function(a,c){var d=this,e=d.startContainer,f=d.endContainer;return e===f?a&&b(this)&&(e=e.childNodes[d.startOffset],1==e.nodeType)?e:c&&3==e.nodeType?e.parentNode:e:l.getCommonAncestor(e,f)},trimBoundary:function(a){this.txtToElmBoundary();var b=this.startContainer,c=this.startOffset,d=this.collapsed,e=this.endContainer;if(3==b.nodeType){if(0==c)this.setStartBefore(b);else if(c>=b.nodeValue.length)this.setStartAfter(b);else{var f=l.split(b,c);b===e?this.setEnd(f,this.endOffset-c):b.parentNode===e&&(this.endOffset+=1),this.setStartBefore(f)}if(d)return this.collapse(!0)}return a||(c=this.endOffset,e=this.endContainer,3==e.nodeType&&(0==c?this.setEndBefore(e):(c<e.nodeValue.length&&l.split(e,c),this.setEndAfter(e)))),this},txtToElmBoundary:function(a){function b(a,b){var c=a[b+"Container"],d=a[b+"Offset"];3==c.nodeType&&(d?d>=c.nodeValue.length&&a["set"+b.replace(/(\w)/,function(a){return a.toUpperCase()})+"After"](c):a["set"+b.replace(/(\w)/,function(a){return a.toUpperCase()})+"Before"](c))}return!a&&this.collapsed||(b(this,"start"),b(this,"end")),this},insertNode:function(a){var b=a,c=1;11==a.nodeType&&(b=a.firstChild,c=a.childNodes.length),this.trimBoundary(!0);var d=this.startContainer,e=this.startOffset,f=d.childNodes[e];return f?d.insertBefore(a,f):d.appendChild(a),b.parentNode===this.endContainer&&(this.endOffset=this.endOffset+c),this.setStartBefore(b)},setCursor:function(a,b){return this.collapse(!a).select(b)},createBookmark:function(a,b){var c,d=this.document.createElement("span");return d.style.cssText="display:none;line-height:0px;",d.appendChild(this.document.createTextNode("‍")),d.id="_baidu_bookmark_start_"+(b?"":k++),this.collapsed||(c=d.cloneNode(!0),c.id="_baidu_bookmark_end_"+(b?"":k++)),this.insertNode(d),c&&this.collapse().insertNode(c).setEndBefore(c),this.setStartAfter(d),{start:a?d.id:d,end:c?a?c.id:c:null,id:a}},moveToBookmark:function(a){var b=a.id?this.document.getElementById(a.start):a.start,c=a.end&&a.id?this.document.getElementById(a.end):a.end;return this.setStartBefore(b),l.remove(b),c?(this.setEndBefore(c),l.remove(c)):this.collapse(!0),this},adjustmentBoundary:function(){if(!this.collapsed){for(;!l.isBody(this.startContainer)&&this.startOffset==this.startContainer[3==this.startContainer.nodeType?"nodeValue":"childNodes"].length&&this.startContainer[3==this.startContainer.nodeType?"nodeValue":"childNodes"].length;)this.setStartAfter(this.startContainer);for(;!l.isBody(this.endContainer)&&!this.endOffset&&this.endContainer[3==this.endContainer.nodeType?"nodeValue":"childNodes"].length;)this.setEndBefore(this.endContainer)}return this},getClosedNode:function(){var a;if(!this.collapsed){var c=this.cloneRange().adjustmentBoundary().shrinkBoundary();if(b(c)){var d=c.startContainer.childNodes[c.startOffset];d&&1==d.nodeType&&(i.$empty[d.tagName]||i.$nonChild[d.tagName])&&(a=d)}}return a},select:e.ie?function(a,b){var c;this.collapsed||this.shrinkBoundary();var d=this.getClosedNode();if(d&&!b){try{c=this.document.body.createControlRange(),c.addElement(d),c.select()}catch(a){}return this}var e,f=this.createBookmark(),i=f.start;if(c=this.document.body.createTextRange(),c.moveToElementText(i),c.moveStart("character",1),this.collapsed){if(!a&&3!=this.startContainer.nodeType){var k=this.document.createTextNode(n),m=this.document.createElement("span");m.appendChild(this.document.createTextNode(n)),i.parentNode.insertBefore(m,i),i.parentNode.insertBefore(k,i),g(this.document,k),j=k,h(m,"previousSibling"),h(i,"nextSibling"),c.moveStart("character",-1),c.collapse(!0)}}else{var o=this.document.body.createTextRange();e=f.end,o.moveToElementText(e),c.setEndPoint("EndToEnd",o)}this.moveToBookmark(f),m&&l.remove(m);try{c.select()}catch(a){}return this}:function(a){function b(a){function b(b,c,d){3==b.nodeType&&b.nodeValue.length<c&&(a[d+"Offset"]=b.nodeValue.length)}b(a.startContainer,a.startOffset,"start"),b(a.endContainer,a.endOffset,"end")}var c,d=l.getWindow(this.document),f=d.getSelection();if(e.gecko?this.document.body.focus():d.focus(),f){if(f.removeAllRanges(),this.collapsed&&!a){var i=this.startContainer,k=i;1==i.nodeType&&(k=i.childNodes[this.startOffset]),3==i.nodeType&&this.startOffset||(k?k.previousSibling&&3==k.previousSibling.nodeType:i.lastChild&&3==i.lastChild.nodeType)||(c=this.document.createTextNode(n),this.insertNode(c),g(this.document,c),h(c,"previousSibling"),h(c,"nextSibling"),j=c,this.setStart(c,e.webkit?1:0).collapse(!0))}var m=this.document.createRange();if(this.collapsed&&e.opera&&1==this.startContainer.nodeType){var k=this.startContainer.childNodes[this.startOffset];if(k){for(;k&&l.isBlockElm(k)&&1==k.nodeType&&k.childNodes[0];)k=k.childNodes[0];k&&this.setStartBefore(k).collapse(!0)}else(k=this.startContainer.lastChild)&&l.isBr(k)&&this.setStartBefore(k).collapse(!0)}b(this),m.setStart(this.startContainer,this.startOffset),m.setEnd(this.endContainer,this.endOffset)}return this},scrollToView:function(a,b){a=a?window:l.getWindow(this.document);var c=this,d=c.document.createElement("span");return d.innerHTML="&nbsp;",c.cloneRange().insertNode(d),l.scrollToView(d,a,b),l.remove(d),c},inFillChar:function(){var a=this.startContainer;return!(!this.collapsed||3!=a.nodeType||a.nodeValue.replace(new RegExp("^"+l.fillChar),"").length+1!=a.nodeValue.length)},traversal:function(a,b){if(this.collapsed)return this;for(var c=this.createBookmark(),d=c.end,e=l.getNextDomNode(c.start,!1,b);e&&e!==d&&l.getPosition(e,d)&l.POSITION_PRECEDING;){var f=l.getNextDomNode(e,!1,b);a(e),e=f}return this.moveToBookmark(c)}}}(),function(){function a(a,b){var c=l.getNodeIndex;a=a.duplicate(),a.collapse(b);var d=a.parentElement();if(!d.hasChildNodes())return{container:d,offset:0};for(var e,f,g=d.children,h=a.duplicate(),j=0,k=g.length-1,m=-1;j<=k;){m=Math.floor((j+k)/2),e=g[m],h.moveToElementText(e);var n=h.compareEndPoints("StartToStart",a);if(n>0)k=m-1;else{if(!(n<0))return{container:d,offset:c(e)};j=m+1}}if(-1==m){if(h.moveToElementText(d),h.setEndPoint("StartToStart",a),f=h.text.replace(/(\r\n|\r)/g,"\n").length,g=d.childNodes,!f)return e=g[g.length-1],{container:e,offset:e.nodeValue.length};for(var o=g.length;f>0;)f-=g[--o].nodeValue.length;return{container:g[o],offset:-f}}if(h.collapse(n>0),h.setEndPoint(n>0?"StartToStart":"EndToStart",a),!(f=h.text.replace(/(\r\n|\r)/g,"\n").length))return i.$empty[e.tagName]||i.$nonChild[e.tagName]?{container:d,offset:c(e)+(n>0?0:1)}:{container:e,offset:n>0?0:e.childNodes.length};for(;f>0;)try{var p=e;e=e[n>0?"previousSibling":"nextSibling"],f-=e.nodeValue.length}catch(a){return{container:d,offset:c(p)}}return{container:e,offset:n>0?-f:e.nodeValue.length+f}}function b(b,c){if(b.item)c.selectNode(b.item(0));else{var d=a(b,!0);c.setStart(d.container,d.offset),0!=b.compareEndPoints("StartToEnd",b)&&(d=a(b,!1),c.setEnd(d.container,d.offset))}return c}function f(a){var b;try{b=a.getNative().createRange()}catch(a){return null}var c=b.item?b.item(0):b.parentElement();return(c.ownerDocument||c)===a.document?b:null}(d.Selection=function(a){var b,c=this;c.document=a,e.ie9below&&(b=l.getWindow(a).frameElement,l.on(b,"beforedeactivate",function(){c._bakIERange=c.getIERange()}),l.on(b,"activate",function(){try{!f(c)&&c._bakIERange&&c._bakIERange.select()}catch(a){}c._bakIERange=null})),b=a=null}).prototype={rangeInBody:function(a,b){var c=e.ie9below||b?a.item?a.item():a.parentElement():a.startContainer;return c===this.document.body||l.inDoc(c,this.document)},getNative:function(){var a=this.document;try{return a?e.ie9below?a.selection:l.getWindow(a).getSelection():null}catch(a){return null}},getIERange:function(){var a=f(this);return!a&&this._bakIERange?this._bakIERange:a},cache:function(){this.clear(),this._cachedRange=this.getRange(),this._cachedStartElement=this.getStart(),this._cachedStartElementPath=this.getStartElementPath()},getStartElementPath:function(){if(this._cachedStartElementPath)return this._cachedStartElementPath;var a=this.getStart();return a?l.findParents(a,!0,null,!0):[]},clear:function(){this._cachedStartElementPath=this._cachedRange=this._cachedStartElement=null},isFocus:function(){try{if(e.ie9below){var a=f(this);return!(!a||!this.rangeInBody(a))}return!!this.getNative().rangeCount}catch(a){return!1}},getRange:function(){function a(a){for(var b=d.document.body.firstChild,c=a.collapsed;b&&b.firstChild;)a.setStart(b,0),b=b.firstChild;a.startContainer||a.setStart(d.document.body,0),c&&a.collapse(!0)}var d=this;if(null!=d._cachedRange)return this._cachedRange;var f=new c.editor.dom.Range(d.document);if(e.ie9below){var g=d.getIERange();if(g)try{b(g,f)}catch(b){a(f)}else a(f)}else{var h=d.getNative();if(h&&h.rangeCount){var i=h.getRangeAt(0),j=h.getRangeAt(h.rangeCount-1);f.setStart(i.startContainer,i.startOffset).setEnd(j.endContainer,j.endOffset),f.collapsed&&l.isBody(f.startContainer)&&!f.startOffset&&a(f)}else{if(this._bakRange&&l.inDoc(this._bakRange.startContainer,this.document))return this._bakRange;a(f)}}return this._bakRange=f},getStart:function(){if(this._cachedStartElement)return this._cachedStartElement;var a,b,c,d,f=e.ie9below?this.getIERange():this.getRange();if(e.ie9below){if(!f)return this.document.body.firstChild;if(f.item)return f.item(0);for(a=f.duplicate(),a.text.length>0&&a.moveStart("character",1),a.collapse(1),b=a.parentElement(),d=c=f.parentElement();c=c.parentNode;)if(c==b){b=d;break}}else if(f.shrinkBoundary(),b=f.startContainer,1==b.nodeType&&b.hasChildNodes()&&(b=b.childNodes[Math.min(b.childNodes.length-1,f.startOffset)]),3==b.nodeType)return b.parentNode;return b}}}(),function(){function a(a,b){var c;if(b.textarea)if(g.isString(b.textarea)){for(var d,e=0,f=l.getElementsByTagName(a,"textarea");d=f[e++];)if(d.id=="ueditor_textarea_"+b.options.textarea){c=d;break}}else c=b.textarea;c||(a.appendChild(c=l.createElement(document,"textarea",{name:b.options.textarea,id:"ueditor_textarea_"+b.options.textarea,style:"display:none"})),b.textarea=c),!c.getAttribute("name")&&c.setAttribute("name",b.options.textarea),c.value=b.hasContents()?b.options.allHtmlEnabled?b.getAllHtml():b.getContent(null,null,!0):""}var b,c=0,j=UE.Editor=function(a){var b=this;b.uid=c++,h.call(b),b.commands={},b.options=g.extend(g.clone(a||{}),UEDITOR_CONFIG,!0),b.shortcutkeys={},b.inputRules=[],b.outputRules=[],b.setOpt(j.defaultOptions(b)),UE.instants["ueditorInstant"+b.uid]=b};j.prototype={registerCommand:function(a,b){this.commands[a]=b},ready:function(a){var b=this;a&&(b.isReady?a.apply(b):b.addListener("ready",a))},setOpt:function(a,b){var c={};g.isString(a)?c[a]=b:c=a,g.extend(this.options,c,!0)},getOpt:function(a){return this.options[a]},destroy:function(){var a=this;a.fireEvent("destroy");var b=a.container.parentNode,c=a.textarea;c?c.style.display="":(c=document.createElement("textarea"),b.parentNode.insertBefore(c,b)),c.style.width=a.iframe.offsetWidth+"px",c.style.height=a.iframe.offsetHeight+"px",c.value=a.getContent(),c.id=a.key,b.innerHTML="",l.remove(b);var d=a.key;for(var e in a)a.hasOwnProperty(e)&&delete this[e];UE.delEditor(d)},render:function(a){var b=this,c=b.options,d=function(b){return parseInt(l.getComputedStyle(a,b))};if(g.isString(a)&&(a=document.getElementById(a)),a){c.initialFrameWidth?c.minFrameWidth=c.initialFrameWidth:c.minFrameWidth=c.initialFrameWidth=a.offsetWidth,c.initialFrameHeight?c.minFrameHeight=c.initialFrameHeight:c.initialFrameHeight=c.minFrameHeight=a.offsetHeight,a.style.width=/%$/.test(c.initialFrameWidth)?"100%":c.initialFrameWidth-d("padding-left")-d("padding-right")+"px",a.style.height=/%$/.test(c.initialFrameHeight)?"100%":c.initialFrameHeight-d("padding-top")-d("padding-bottom")+"px",a.style.zIndex=c.zIndex;var h=(f&&e.version<9?"":"<!DOCTYPE html>")+"<html xmlns='http://www.w3.org/1999/xhtml' class='view' ><head><style type='text/css'>.view{padding:0;word-wrap:break-word;cursor:text;height:90%;}\nbody{margin:8px;font-family:sans-serif;font-size:16px;}.invchangeformulatext{background:url(./kingdee/bcm/invchangeformulatext/themes/default/images/open.png) no-repeat 0 0;background-position-x:right;cursor: pointer;border-top:none;border-left:none;border-right:none;border-color:black;border-width:1px;outline:none;font-size:12px;height:18px;text-align:center;}p{margin:5px 0;}</style>"+(c.initialStyle?"<style>"+c.initialStyle+"</style>":"")+"</head><body class='view'  style='font-size:12px;'></body><script type='text/javascript' "+(f?"defer='defer'":"")+" id='_initialScript'>setTimeout(function(){editor = window.parent.UE.instants['ueditorInstant"+b.uid+"'];editor._setup(document);},0);var _tmpScript = document.getElementById('_initialScript');_tmpScript.parentNode.removeChild(_tmpScript);<\/script></html>";a.appendChild(l.createElement(document,"iframe",{id:"ueditor_"+b.uid,width:"100%",height:"100%",frameborder:"0",src:"javascript:void(function(){document.open();"+(c.customDomain&&document.domain!=location.hostname?'document.domain="'+document.domain+'";':"")+'document.write("'+h+'");document.close();}())'})),a.style.overflow="hidden",setTimeout(function(){/%$/.test(c.initialFrameWidth)&&(c.minFrameWidth=c.initialFrameWidth=a.offsetWidth),/%$/.test(c.initialFrameHeight)&&(c.minFrameHeight=c.initialFrameHeight=a.offsetHeight,a.style.height=c.initialFrameHeight+"px")})}},_setup:function(b){var c=this,g=c.options;f?(b.body.disabled=!0,b.body.contentEditable=!0,b.body.disabled=!1):b.body.contentEditable=!0,b.body.spellcheck=!1,c.document=b,c.window=b.defaultView||b.parentWindow,c.iframe=c.window.frameElement,c.body=b.body,c.selection=new d.Selection(b);var h;e.gecko&&(h=this.selection.getNative())&&h.removeAllRanges(),this._initEvents();for(var i=this.iframe.parentNode;!l.isBody(i);i=i.parentNode)if("FORM"==i.tagName){c.form=i,c.options.autoSyncData?l.on(c.window,"blur",function(){a(i,c)}):l.on(i,"submit",function(){a(this,c)});break}if(g.initialContent)if(g.autoClearinitialContent){var j=c.execCommand;c.execCommand=function(){return c.fireEvent("firstBeforeExecCommand"),j.apply(c,arguments)},this._setDefaultContent(g.initialContent)}else this.setContent(g.initialContent,!1,!0);l.isEmptyNode(c.body)&&(c.body.innerHTML="<p>"+(e.ie?"":"<br/>")+"</p>"),c.container||(c.container=this.iframe.parentNode);try{c.document.execCommand("2D-position",!1,!1)}catch(a){}try{c.document.execCommand("enableInlineTableEditing",!1,!1)}catch(a){}try{c.document.execCommand("enableObjectResizing",!1,!1)}catch(a){}c.isReady=1,c.fireEvent("ready"),g.onready&&g.onready.call(c),e.ie9below||l.on(c.window,["blur","focus"],function(a){if("blur"==a.type){c._bakRange=c.selection.getRange();try{c._bakNativeRange=c.selection.getNative().getRangeAt(0),c.selection.getNative().removeAllRanges()}catch(a){c._bakNativeRange=null}}else try{c._bakRange&&c._bakRange.select()}catch(a){}}),e.gecko&&e.version<=10902&&(c.body.contentEditable=!1,setTimeout(function(){c.body.contentEditable=!0},100),setInterval(function(){c.body.style.height=c.iframe.offsetHeight-20+"px"},100)),!g.isShow&&c.setHide(),g.readonly&&c.setDisabled()},getEditorContent:function(){for(var a="",b=this.body.childNodes,c=0;c<b.length;c++)for(var d=b[c].childNodes,e=0;e<d.length;e++)"INPUT"==d[e].nodeName?a+='{"'+d[e].id+'"}':"BR"==d[e].nodeName||(a+=d[e].data);return a.replace(/&nbsp;/g,"").replace(/\s/g,"")},getContent:function(a,b,c,d,e){var f=this;if(a&&g.isFunction(a)&&(b=a,a=""),b?!b():!this.hasContents())return"";f.fireEvent("beforegetcontent");var h=UE.htmlparser(f.body.innerHTML,d);return f.filterOutputRule(h),f.fireEvent("aftergetcontent",a,h),h.toHtml(e)},setContent:function(b,c,d){function f(a){return"DIV"==a.tagName&&a.getAttribute("cdata_tag")}var g=this;g.fireEvent("beforesetcontent",b);var h=UE.htmlparser(b);if(g.filterInputRule(h),b=h.toHtml(),g.body.innerHTML=(c?g.body.innerHTML:"")+b,"p"==g.options.enterTag){var j,k=this.body.firstChild;if(!k||1==k.nodeType&&(i.$cdata[k.tagName]||f(k)||l.isCustomeNode(k))&&k===this.body.lastChild)this.body.innerHTML="<p>"+(e.ie?"&nbsp;":"<br/>")+"</p>"+this.body.innerHTML;else for(var m=g.document.createElement("p");k;){for(;k&&(3==k.nodeType||1==k.nodeType&&i.p[k.tagName]&&!i.$cdata[k.tagName]);)j=k.nextSibling,m.appendChild(k),k=j;if(m.firstChild){if(!k){g.body.appendChild(m);break}k.parentNode.insertBefore(m,k),m=g.document.createElement("p")}k=k.nextSibling}}g.fireEvent("aftersetcontent"),g.fireEvent("contentchange"),!d&&g._selectionChange(),g._bakRange=g._bakIERange=g._bakNativeRange=null;var n;e.gecko&&(n=this.selection.getNative())&&n.removeAllRanges(),g.options.autoSyncData&&g.form&&a(g.form,g)},focus:function(a){try{var b=this,c=b.selection.getRange();if(a){var d=b.body.lastChild;d&&1==d.nodeType&&!i.$empty[d.tagName]&&(l.isEmptyBlock(d)?c.setStartAtFirst(d):c.setStartAtLast(d),c.collapse(!0)),c.setCursor(!0)}else{if(!c.collapsed&&l.isBody(c.startContainer)&&0==c.startOffset){var d=b.body.firstChild;d&&1==d.nodeType&&!i.$empty[d.tagName]&&c.setStartAtFirst(d).collapse(!0)}c.select(!0)}this.fireEvent("focus selectionchange")}catch(a){}},isFocus:function(){return this.selection.isFocus()},blur:function(){var a=this.selection.getNative();if(a.empty&&e.ie){var b=document.body.createTextRange();b.moveToElementText(document.body),b.collapse(!0),b.select(),a.empty()}else a.removeAllRanges()},_initEvents:function(){var a=this,b=a.document,c=a.window;a._proxyDomEvent=g.bind(a._proxyDomEvent,a),l.on(b,["click","contextmenu","mousedown","keydown","keyup","keypress","mouseup","mouseover","mouseout","selectstart"],a._proxyDomEvent),l.on(c,["focus","blur"],a._proxyDomEvent),l.on(a.body,"drop",function(b){e.gecko&&b.stopPropagation&&b.stopPropagation(),a.fireEvent("contentchange")}),l.on(b,["mouseup","keydown"],function(b){"keydown"==b.type&&(b.ctrlKey||b.metaKey||b.shiftKey||b.altKey)||2!=b.button&&a._selectionChange(250,b)})},_proxyDomEvent:function(a){return!1!==this.fireEvent("before"+a.type.replace(/^on/,"").toLowerCase())&&(!1!==this.fireEvent(a.type.replace(/^on/,""),a)&&this.fireEvent("after"+a.type.replace(/^on/,"").toLowerCase()))},_selectionChange:function(a,c){var d,f,g=this,h=!1;if(e.ie&&e.version<9&&c&&"mouseup"==c.type){this.selection.getRange().collapsed||(h=!0,d=c.clientX,f=c.clientY)}clearTimeout(b),b=setTimeout(function(){if(g.selection&&g.selection.getNative()){var a;if(h&&"None"==g.selection.getNative().type){a=g.document.body.createTextRange();try{a.moveToPoint(d,f)}catch(b){a=null}}var b;a&&(b=g.selection.getIERange,g.selection.getIERange=function(){return a}),g.selection.cache(),b&&(g.selection.getIERange=b),g.selection._cachedRange&&g.selection._cachedStartElement&&(g.fireEvent("beforeselectionchange"),g.fireEvent("selectionchange",!!c),g.fireEvent("afterselectionchange"),g.selection.clear())}},a||50)},_callCmdFn:function(a,b){var c,d,e=b[0].toLowerCase();return c=this.commands[e]||UE.commands[e],d=c&&c[a],c&&d||"queryCommandState"!=a?d?d.apply(this,b):void 0:0},execCommand:function(a){a=a.toLowerCase();var b,c=this,d=c.commands[a]||UE.commands[a];return d&&d.execCommand?(d.notNeedUndo||c.__hasEnterExecCommand?(b=this._callCmdFn("execCommand",arguments),!c.__hasEnterExecCommand&&!d.ignoreContentChange&&!c._ignoreContentChange&&c.fireEvent("contentchange")):(c.__hasEnterExecCommand=!0,-1!=c.queryCommandState.apply(c,arguments)&&(c.fireEvent("saveScene"),c.fireEvent.apply(c,["beforeexeccommand",a].concat(arguments)),b=this._callCmdFn("execCommand",arguments),c.fireEvent.apply(c,["afterexeccommand",a].concat(arguments)),c.fireEvent("saveScene")),c.__hasEnterExecCommand=!1),!c.__hasEnterExecCommand&&!d.ignoreContentChange&&!c._ignoreContentChange&&c._selectionChange(),b):null},queryCommandState:function(a){return this._callCmdFn("queryCommandState",arguments)},queryCommandValue:function(a){return this._callCmdFn("queryCommandValue",arguments)},hasContents:function(a){if(a)for(var b,c=0;b=a[c++];)if(this.document.getElementsByTagName(b).length>0)return!0;if(!l.isEmptyBlock(this.body))return!0;for(a=["div"],c=0;b=a[c++];)for(var d,e=l.getElementsByTagName(this.document,b),f=0;d=e[f++];)if(l.isCustomeNode(d))return!0;return!1},setEnabled:function(){var a,b=this;if("false"==b.body.contentEditable){b.body.contentEditable=!0,a=b.selection.getRange();try{a.moveToBookmark(b.lastBk),delete b.lastBk}catch(c){a.setStartAtFirst(b.body).collapse(!0)}a.select(!0),b.bkqueryCommandState&&(b.queryCommandState=b.bkqueryCommandState,delete b.bkqueryCommandState),b.bkqueryCommandValue&&(b.queryCommandValue=b.bkqueryCommandValue,delete b.bkqueryCommandValue),b.fireEvent("selectionchange")}},enable:function(){return this.setEnabled()},setDisabled:function(a){var b=this;a=a?g.isArray(a)?a:[a]:[],"true"==b.body.contentEditable&&(b.lastBk||(b.lastBk=b.selection.getRange().createBookmark(!0)),b.body.contentEditable=!1,b.bkqueryCommandState=b.queryCommandState,b.bkqueryCommandValue=b.queryCommandValue,b.queryCommandState=function(c){return-1!=g.indexOf(a,c)?b.bkqueryCommandState.apply(b,arguments):-1},b.queryCommandValue=function(c){return-1!=g.indexOf(a,c)?b.bkqueryCommandValue.apply(b,arguments):null},b.fireEvent("selectionchange"))},disable:function(a){return this.setDisabled(a)},_setDefaultContent:function(){function a(){var b=this;b.document.getElementById("initContent")&&(b.body.innerHTML="<p>"+(f?"":"<br/>")+"</p>",b.removeListener("firstBeforeExecCommand focus",a),setTimeout(function(){b.focus(),b._selectionChange()},0))}return function(b){var c=this;c.body.innerHTML='<p id="initContent">'+b+"</p>",c.addListener("firstBeforeExecCommand focus",a)}}(),setShow:function(){var a=this,b=a.selection.getRange();if("none"==a.container.style.display){try{b.moveToBookmark(a.lastBk),delete a.lastBk}catch(c){b.setStartAtFirst(a.body).collapse(!0)}setTimeout(function(){b.select(!0)},100),a.container.style.display=""}},show:function(){return this.setShow()},setHide:function(){var a=this;a.lastBk||(a.lastBk=a.selection.getRange().createBookmark(!0)),a.container.style.display="none"},hide:function(){return this.setHide()},filterInputRule:function(a){for(var b,c=0;b=this.inputRules[c++];)b.call(this,a)},filterOutputRule:function(a){for(var b,c=0;b=this.outputRules[c++];)b.call(this,a)},getActionUrl:function(a){var b=this.getOpt(a)||a,c=this.getOpt("imageUrl"),d=this.getOpt("serverUrl");return!d&&c&&(d=c.replace(/^(.*[\/]).+([\.].+)$/,"$1controller$2")),d?(d=d+(-1==d.indexOf("?")?"?":"&")+"action="+(b||""),g.formatUrl(d)):""}},g.inherits(j,h)}(),UE.Editor.defaultOptions=function(a){a.options.UEDITOR_HOME_URL="kingdee/bcm/invchangeformulatext/";var b=a.options.UEDITOR_HOME_URL;return{isShow:!0,initialContent:"",initialStyle:"",autoClearinitialContent:!1,textarea:"editorValue",focus:!1,focusInEnd:!0,autoClearEmptyNode:!0,fullscreen:!1,readonly:!1,imagePopup:!0,enterTag:"p",customDomain:!1,lang:"zh-cn",langPath:b+"lang/",theme:"default",themePath:b+"themes/",allHtmlEnabled:!1,scaleEnabled:!1,tableNativeEditInFF:!1,autoSyncData:!0,fileNameFormat:"{time}{rand:6}"}},function(){function a(a,b,c){return a.push(p),b+(c?1:-1)}function b(a,b){for(var c=0;c<b;c++)a.push(o)}function c(g,h,j,k){switch(g.type){case"root":for(var l,m=0;l=g.children[m++];)j&&"element"==l.type&&!i.$inlineWithA[l.tagName]&&m>1&&(a(h,k,!0),b(h,k)),c(l,h,j,k);break;case"text":d(g,h);break;case"element":e(g,h,j,k);break;case"comment":f(g,h,j)}return h}function d(a,b){"pre"==a.parentNode.tagName?b.push(a.data):b.push(n[a.parentNode.tagName]?g.html(a.data):a.data.replace(/[ ]{2}/g," &nbsp;"))}function e(d,e,f,h){var j="";if(d.attrs){j=[];var k=d.attrs;for(var l in k)j.push(l+(void 0!==k[l]?'="'+(m[l]?g.html(k[l]).replace(/["]/g,function(a){return"&quot;"}):g.unhtml(k[l]))+'"':""));j=j.join(" ")}if(e.push("<"+d.tagName+(j?" "+j:"")+(i.$empty[d.tagName]?"/":"")+">"),f&&!i.$inlineWithA[d.tagName]&&"pre"!=d.tagName&&d.children&&d.children.length&&(h=a(e,h,!0),b(e,h)),d.children&&d.children.length)for(var n,o=0;n=d.children[o++];)f&&"element"==n.type&&!i.$inlineWithA[n.tagName]&&o>1&&(a(e,h),b(e,h)),c(n,e,f,h);i.$empty[d.tagName]||(f&&!i.$inlineWithA[d.tagName]&&"pre"!=d.tagName&&d.children&&d.children.length&&(h=a(e,h),b(e,h)),e.push("</"+d.tagName+">"))}function f(a,b){b.push("\x3c!--"+a.data+"--\x3e")}function h(a,b){var c;if("element"==a.type&&a.getAttr("id")==b)return a;if(a.children&&a.children.length)for(var d,e=0;d=a.children[e++];)if(c=h(d,b))return c}function j(a,b,c){if("element"==a.type&&a.tagName==b&&c.push(a),a.children&&a.children.length)for(var d,e=0;d=a.children[e++];)j(d,b,c)}function k(a,b){if(a.children&&a.children.length)for(var c,d=0;c=a.children[d];)k(c,b),c.parentNode&&(c.children&&c.children.length&&b(c),c.parentNode&&d++);else b(a)}var l=UE.uNode=function(a){this.type=a.type,this.data=a.data,this.tagName=a.tagName,this.parentNode=a.parentNode,this.attrs=a.attrs||{},this.children=a.children},m={href:1,src:1,_src:1,_href:1,cdata_data:1},n={style:1,script:1},o="    ",p="\n";l.createElement=function(a){return/[<>]/.test(a)?UE.htmlparser(a).children[0]:new l({type:"element",children:[],tagName:a})},l.createText=function(a,b){return new UE.uNode({type:"text",data:b?a:g.unhtml(a||"")})},l.prototype={toHtml:function(a){var b=[];return c(this,b,a,0),b.join("")},innerHTML:function(a){if("element"!=this.type||i.$empty[this.tagName])return this;if(g.isString(a)){if(this.children)for(var b,c=0;b=this.children[c++];)b.parentNode=null;this.children=[];for(var b,d=UE.htmlparser(a),c=0;b=d.children[c++];)this.children.push(b),b.parentNode=this;return this}var d=new UE.uNode({type:"root",children:this.children});return d.toHtml()},innerText:function(a,b){if("element"!=this.type||i.$empty[this.tagName])return this;if(a){if(this.children)for(var c,d=0;c=this.children[d++];)c.parentNode=null;return this.children=[],this.appendChild(l.createText(a,b)),this}return this.toHtml().replace(/<[^>]+>/g,"")},getData:function(){return"element"==this.type?"":this.data},firstChild:function(){return this.children?this.children[0]:null},lastChild:function(){return this.children?this.children[this.children.length-1]:null},previousSibling:function(){for(var a,b=this.parentNode,c=0;a=b.children[c];c++)if(a===this)return 0==c?null:b.children[c-1]},nextSibling:function(){for(var a,b=this.parentNode,c=0;a=b.children[c++];)if(a===this)return b.children[c]},replaceChild:function(a,b){if(this.children){a.parentNode&&a.parentNode.removeChild(a);for(var c,d=0;c=this.children[d];d++)if(c===b)return this.children.splice(d,1,a),b.parentNode=null,a.parentNode=this,a}},appendChild:function(a){if("root"==this.type||"element"==this.type&&!i.$empty[this.tagName]){this.children||(this.children=[]),a.parentNode&&a.parentNode.removeChild(a);for(var b,c=0;b=this.children[c];c++)if(b===a){this.children.splice(c,1);break}return this.children.push(a),a.parentNode=this,a}},insertBefore:function(a,b){if(this.children){a.parentNode&&a.parentNode.removeChild(a);for(var c,d=0;c=this.children[d];d++)if(c===b)return this.children.splice(d,0,a),a.parentNode=this,a}},insertAfter:function(a,b){if(this.children){a.parentNode&&a.parentNode.removeChild(a);for(var c,d=0;c=this.children[d];d++)if(c===b)return this.children.splice(d+1,0,a),a.parentNode=this,a}},removeChild:function(a,b){if(this.children)for(var c,d=0;c=this.children[d];d++)if(c===a){if(this.children.splice(d,1),c.parentNode=null,b&&c.children&&c.children.length)for(var e,f=0;e=c.children[f];f++)this.children.splice(d+f,0,e),e.parentNode=this;return c}},getAttr:function(a){return this.attrs&&this.attrs[a.toLowerCase()]},setAttr:function(a,b){if(!a)return void delete this.attrs;if(this.attrs||(this.attrs={}),g.isObject(a))for(var c in a)a[c]?this.attrs[c.toLowerCase()]=a[c]:delete this.attrs[c];else b?this.attrs[a.toLowerCase()]=b:delete this.attrs[a]},getIndex:function(){for(var a,b=this.parentNode,c=0;a=b.children[c];c++)if(a===this)return c;return-1},getNodeById:function(a){var b;if(this.children&&this.children.length)for(var c,d=0;c=this.children[d++];)if(b=h(c,a))return b},getNodesByTagName:function(a){a=g.trim(a).replace(/[ ]{2,}/g," ").split(" ");var b=[],c=this;return g.each(a,function(a){if(c.children&&c.children.length)for(var d,e=0;d=c.children[e++];)j(d,a,b)}),b},getStyle:function(a){var b=this.getAttr("style");if(!b)return"";var c=new RegExp("(^|;)\\s*"+a+":([^;]+)","i"),d=b.match(c);return d&&d[0]?d[2]:""},setStyle:function(a,b){function c(a,b){var c=new RegExp("(^|;)\\s*"+a+":([^;]+;?)","gi");d=d.replace(c,"$1"),b&&(d=a+":"+g.unhtml(b)+";"+d)}var d=this.getAttr("style");if(d||(d=""),g.isObject(a))for(var e in a)c(e,a[e]);else c(a,b);this.setAttr("style",g.trim(d))},traversal:function(a){return this.children&&this.children.length&&k(this,a),this}}}();UE.htmlparser=function(a,b){function c(a,b,c){var d=new m({parentNode:a,type:"element",tagName:b.toLowerCase(),children:i.$empty[b]?null:[]});if(c){for(var e,h={};e=f.exec(c);)h[e[1].toLowerCase()]=k[e[1].toLowerCase()]?e[2]||e[3]||e[4]:g.unhtml(e[2]||e[3]||e[4]);d.attrs=h}return a.children.push(d),i.$empty[b]?a:d}function d(a,b){a.children.push(new m({type:"comment",data:b,parentNode:a}))}var e=/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)-->)|(?:([^\s\/<>]+)\s*((?:(?:"[^"]*")|(?:'[^']*')|[^"'<>])*)\/?>))/g,f=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,h={b:1,code:1,i:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,span:1,sub:1,img:1,sup:1,font:1,big:1,small:1,iframe:1,a:1,br:1,pre:1};a=a.replace(new RegExp(l.fillChar,"g"),""),b||(a=a.replace(new RegExp("[\\r\\t\\n"+(b?"":" ")+"]*</?(\\w+)\\s*(?:[^>]*)>[\\r\\t\\n"+(b?"":" ")+"]*","g"),function(a,c){return c&&h[c.toLowerCase()]?a.replace(/(^[\n\r]+)|([\n\r]+$)/g,""):a.replace(new RegExp("^[\\r\\n"+(b?"":" ")+"]+"),"").replace(new RegExp("[\\r\\n"+(b?"":" ")+"]+$"),"")}));for(var j,k={href:1,src:1},m=UE.uNode,n=0,o=0,p=new m({type:"root",children:[]}),q=p;j=e.exec(a);){n=j.index;try{if(n>o&&text(q,a.slice(o,n)),j[3])i.$cdata[q.tagName]?text(q,j[0]):q=c(q,j[3].toLowerCase(),j[4]);else if(j[1]){if("root"!=q.type)if(i.$cdata[q.tagName]&&!i.$cdata[j[1]])text(q,j[0]);else{for(var r=q;"element"==q.type&&q.tagName!=j[1].toLowerCase();)if(q=q.parentNode,"root"==q.type)throw q=r,"break";q=q.parentNode}}else j[2]&&d(q,j[2])}catch(a){}o=e.lastIndex}return o<a.length&&text(q,a.slice(o)),p},UE.keymap={Backspace:8,Tab:9,Enter:13,Shift:16,Control:17,Alt:18,CapsLock:20,Esc:27,Spacebar:32,PageUp:33,PageDown:34,End:35,Home:36,Left:37,Up:38,Right:39,Down:40,Insert:45,Del:46,NumLock:144,Cmd:91,"=":187,"-":189,b:66,i:73,z:90,y:89,v:86,x:88,s:83,n:78};!function(){var a="ueditor_preference";UE.Editor.prototype.setPreferences=function(b,c){var d={};g.isString(b)?d[b]=c:d=b;var e=LocalStorage.getLocalData(a);e&&(e=g.str2json(e))?g.extend(e,d):e=d,e&&LocalStorage.saveLocalData(a,g.json2str(e))},UE.Editor.prototype.getPreferences=function(b){var c=LocalStorage.getLocalData(a);return c&&(c=g.str2json(c))?b?c[b]:c:null},UE.Editor.prototype.removePreferences=function(b){var c=LocalStorage.getLocalData(a);c&&(c=g.str2json(c))&&(c[b]=void 0,delete c[b]),c&&LocalStorage.saveLocalData(a,g.json2str(c))}}(),UE.commands.inserthtml={execCommand:function(a,b,c){var d,f,h=this;if(b&&!0!==h.fireEvent("beforeinserthtml",b)){if(d=h.selection.getRange(),f=d.document.createElement("div"),f.style.display="inline",!c){var j=UE.htmlparser(b);h.options.filterRules&&UE.filterNode(j,h.options.filterRules),h.filterInputRule(j),b=j.toHtml()}if(f.innerHTML=g.trim(b),!d.collapsed){var k=d.startContainer;if(l.isFillChar(k)&&d.setStartBefore(k),k=d.endContainer,l.isFillChar(k)&&d.setEndAfter(k),d.txtToElmBoundary(),d.endContainer&&1==d.endContainer.nodeType&&(k=d.endContainer.childNodes[d.endOffset])&&l.isBr(k)&&d.setEndAfter(k),0==d.startOffset&&(k=d.startContainer,l.isBoundaryNode(k,"firstChild")&&(k=d.endContainer,d.endOffset==(3==k.nodeType?k.nodeValue.length:k.childNodes.length)&&l.isBoundaryNode(k,"lastChild")&&(h.body.innerHTML="<p>"+(e.ie?"":"<br/>")+"</p>",d.setStart(h.body.firstChild,0).collapse(!0)))),!d.collapsed&&d.deleteContents(),1==d.startContainer.nodeType){var n,o=d.startContainer.childNodes[d.startOffset];if(o&&l.isBlockElm(o)&&(n=o.previousSibling)&&l.isBlockElm(n)){for(d.setEnd(n,n.childNodes.length).collapse();o.firstChild;)n.appendChild(o.firstChild);l.remove(o)}}}var o,p,n,q,r,s=0;d.inFillChar()&&(o=d.startContainer,l.isFillChar(o)?(d.setStartBefore(o).collapse(!0),l.remove(o)):l.isFillChar(o,!0)&&(o.nodeValue=o.nodeValue.replace(m,""),d.startOffset--,d.collapsed&&d.collapse(!0)));for(l.findParentByTagName(d.startContainer,"li",!0);o=f.firstChild;){if(s){for(var t=h.document.createElement("p");o&&(3==o.nodeType||!i.$block[o.tagName]);)r=o.nextSibling,t.appendChild(o),o=r;t.firstChild&&(o=t)}if(d.insertNode(o),r=o.nextSibling,!s&&o.nodeType==l.NODE_ELEMENT&&l.isBlockElm(o)&&(p=l.findParent(o,function(a){return l.isBlockElm(a)}))&&"body"!=p.tagName.toLowerCase()&&(!i[p.tagName][o.nodeName]||o.parentNode!==p)){if(i[p.tagName][o.nodeName])for(q=o.parentNode;q!==p;)n=q,q=q.parentNode;else n=p;l.breakParent(o,n||q);var n=o.previousSibling;l.trimWhiteTextNode(n),n.childNodes.length||l.remove(n),!e.ie&&(u=o.nextSibling)&&l.isBlockElm(u)&&u.lastChild&&!l.isBr(u.lastChild)&&u.appendChild(h.document.createElement("br")),s=1}var u=o.nextSibling;if(!f.firstChild&&u&&l.isBlockElm(u)){d.setStart(u,0).collapse(!0);break}d.setEndAfter(o).collapse()}if(o=d.startContainer,r&&l.isBr(r)&&l.remove(r),l.isBlockElm(o)&&l.isEmptyNode(o))if(r=o.nextSibling)l.remove(o),1==r.nodeType&&i.$block[r.tagName]&&d.setStart(r,0).collapse(!0).shrinkBoundary();else try{o.innerHTML=e.ie?l.fillChar:"<br/>"}catch(a){d.setStartBefore(o),l.remove(o)}try{d.select(!0)}catch(a){}setTimeout(function(){d=h.selection.getRange(),d.scrollToView(h.autoHeightEnabled,h.autoHeightEnabled?l.getXY(h.iframe).y:0),h.fireEvent("afterinserthtml",b)},200)}}},UE.plugins.insertframe=function(){function a(){b._iframe&&delete b._iframe}var b=this;b.addListener("selectionchange",function(){a()})},UE.plugins.selectall=function(){this.commands.selectall={execCommand:function(){var a=this,b=a.body,c=a.selection.getRange();c.selectNodeContents(b),l.isEmptyBlock(b)&&(e.opera&&b.firstChild&&1==b.firstChild.nodeType&&c.setStartAtFirst(b.firstChild),c.collapse(!0)),c.select(!0)},notNeedUndo:1}};var c=c||{};c.editor=c.editor||{},UE.ui=c.editor.ui={},function(){function a(){var a=document.getElementById("edui_fixedlayer");j.setViewportOffset(a,{left:0,top:0})}function b(b){e.on(window,"scroll",a),e.on(window,"resize",c.editor.utils.defer(a,0,!0))}var d=c.editor.browser,e=c.editor.dom.domUtils,f="$EDITORUI",g=window[f]={},h="ID"+f,i=0,j=c.editor.ui.uiUtils={uid:function(a){return a?a[h]||(a[h]=++i):++i},hook:function(a,b){var c;return a&&a._callbacks?c=a:(c=function(){var b;a&&(b=a.apply(this,arguments));for(var d=c._callbacks,e=d.length;e--;){var f=d[e].apply(this,arguments);void 0===b&&(b=f)}return b},c._callbacks=[]),c._callbacks.push(b),c},createElementByHtml:function(a){var b=document.createElement("div");return b.innerHTML=a,b=b.firstChild,b.parentNode.removeChild(b),b},getViewportElement:function(){return d.ie&&d.quirks?document.body:document.documentElement},getClientRect:function(a){var b;try{b=a.getBoundingClientRect()}catch(a){b={left:0,top:0,height:0,width:0}}for(var c,d={left:Math.round(b.left),top:Math.round(b.top),height:Math.round(b.bottom-b.top),width:Math.round(b.right-b.left)};(c=a.ownerDocument)!==document&&(a=e.getWindow(c).frameElement);)b=a.getBoundingClientRect(),d.left+=b.left,d.top+=b.top;return d.bottom=d.top+d.height,d.right=d.left+d.width,d},getViewportRect:function(){var a=j.getViewportElement(),b=0|(window.innerWidth||a.clientWidth),c=0|(window.innerHeight||a.clientHeight);return{left:0,top:0,height:c,width:b,bottom:c,right:b}},setViewportOffset:function(a,b){var c=j.getFixedLayer();a.parentNode===c?(a.style.left=b.left+"px",a.style.top=b.top+"px"):e.setViewportOffset(a,b)},getEventOffset:function(a){var b=a.target||a.srcElement,c=j.getClientRect(b),d=j.getViewportOffsetByEvent(a);return{left:d.left-c.left,top:d.top-c.top}},getViewportOffsetByEvent:function(a){var b=a.target||a.srcElement,c=e.getWindow(b).frameElement,d={left:a.clientX,top:a.clientY};if(c&&b.ownerDocument!==document){var f=j.getClientRect(c);d.left+=f.left,d.top+=f.top}return d},setGlobal:function(a,b){return g[a]=b,f+'["'+a+'"]'},unsetGlobal:function(a){delete g[a]},copyAttributes:function(a,b){for(var c=b.attributes,f=c.length;f--;){var g=c[f];"style"==g.nodeName||"class"==g.nodeName||d.ie&&!g.specified||a.setAttribute(g.nodeName,g.nodeValue)}b.className&&e.addClass(a,b.className),b.style.cssText&&(a.style.cssText+=";"+b.style.cssText)},contains:function(a,b){return a&&b&&a!==b&&(a.contains?a.contains(b):16&a.compareDocumentPosition(b))},getFixedLayer:function(){var c=document.getElementById("edui_fixedlayer");return null==c&&(c=document.createElement("div"),c.id="edui_fixedlayer",document.body.appendChild(c),d.ie&&d.version<=8?(c.style.position="absolute",b(),setTimeout(a)):c.style.position="fixed",c.style.left="0",c.style.top="0",c.style.width="0",c.style.height="0"),c}}}(),function(){var a=c.editor.utils,b=c.editor.ui.uiUtils,d=c.editor.EventBase,e=c.editor.ui.UIBase=function(){};e.prototype={className:"",uiName:"",initOptions:function(a){var c=this;for(var d in a)c[d]=a[d];this.id=this.id||"edui"+b.uid()},initUIBase:function(){this._globalKey=a.unhtml(b.setGlobal(this.id,this))},render:function(a){for(var c,d=this.renderHtml(),e=b.createElementByHtml(d),f=l.getElementsByTagName(e,"*"),g="edui-"+(this.theme||this.editor.options.theme),h=document.getElementById("edui_fixedlayer"),i=0;c=f[i++];)l.addClass(c,g);l.addClass(e,g),h&&(h.className="",l.addClass(h,g));var j=this.getDom();null!=j?(j.parentNode.replaceChild(e,j),b.copyAttributes(e,j)):("string"==typeof a&&(a=document.getElementById(a)),a=a||b.getFixedLayer(),l.addClass(a,g),a.appendChild(e)),this.postRender()},getDom:function(a){return a?document.getElementById(this.id+"_"+a):document.getElementById(this.id)},postRender:function(){this.fireEvent("postrender")},getHtmlTpl:function(){return""},formatHtml:function(a){var b="edui-"+this.uiName;return a.replace(/##/g,this.id).replace(/%%-/g,this.uiName?b+"-":"").replace(/%%/g,(this.uiName?b:"")+" "+this.className).replace(/\$\$/g,this._globalKey)},renderHtml:function(){return this.formatHtml(this.getHtmlTpl())},dispose:function(){var a=this.getDom();a&&c.editor.dom.domUtils.remove(a),b.unsetGlobal(this.id)}},a.inherits(e,d)}(),function(){var a=c.editor.utils,b=c.editor.ui.UIBase,d=c.editor.ui.Separator=function(a){this.initOptions(a),this.initSeparator()};d.prototype={uiName:"separator",initSeparator:function(){this.initUIBase()},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"></div>'}},a.inherits(d,b)}(),function(){var a=c.editor.browser,b=c.editor.dom.domUtils,d=c.editor.ui.uiUtils,e='onmousedown="$$.Stateful_onMouseDown(event, this);" onmouseup="$$.Stateful_onMouseUp(event, this);"'+(a.ie?' onmouseenter="$$.Stateful_onMouseEnter(event, this);" onmouseleave="$$.Stateful_onMouseLeave(event, this);"':' onmouseover="$$.Stateful_onMouseOver(event, this);" onmouseout="$$.Stateful_onMouseOut(event, this);"');c.editor.ui.Stateful={alwalysHoverable:!1,target:null,Stateful_init:function(){this._Stateful_dGetHtmlTpl=this.getHtmlTpl,this.getHtmlTpl=this.Stateful_getHtmlTpl},Stateful_getHtmlTpl:function(){return this._Stateful_dGetHtmlTpl().replace(/stateful/g,function(){return e})},Stateful_onMouseEnter:function(a,b){this.target=b,this.isDisabled()&&!this.alwalysHoverable||(this.addState("hover"),this.fireEvent("over"))},Stateful_onMouseLeave:function(a,b){this.isDisabled()&&!this.alwalysHoverable||(this.removeState("hover"),this.removeState("active"),this.fireEvent("out"))},Stateful_onMouseOver:function(a,b){var c=a.relatedTarget;d.contains(b,c)||b===c||this.Stateful_onMouseEnter(a,b)},Stateful_onMouseOut:function(a,b){var c=a.relatedTarget;d.contains(b,c)||b===c||this.Stateful_onMouseLeave(a,b)},Stateful_onMouseDown:function(a,b){this.isDisabled()||this.addState("active")},Stateful_onMouseUp:function(a,b){this.isDisabled()||this.removeState("active")},Stateful_postRender:function(){this.disabled&&!this.hasState("disabled")&&this.addState("disabled")},hasState:function(a){return b.hasClass(this.getStateDom(),"edui-state-"+a)},addState:function(a){this.hasState(a)||(this.getStateDom().className+=" edui-state-"+a)},removeState:function(a){this.hasState(a)&&b.removeClasses(this.getStateDom(),["edui-state-"+a])},getStateDom:function(){return this.getDom("state")},isChecked:function(){return this.hasState("checked")},setChecked:function(a){!this.isDisabled()&&a?this.addState("checked"):this.removeState("checked")},isDisabled:function(){return this.hasState("disabled")},setDisabled:function(a){a?(this.removeState("hover"),this.removeState("checked"),this.removeState("active"),this.addState("disabled")):this.removeState("disabled")}}}(),function(){var a=c.editor.utils,b=c.editor.ui.UIBase,d=c.editor.ui.Stateful,e=c.editor.ui.Button=function(a){if(a.name){var b=a.name,c=a.cssRules,d=0,e=0,f="";"f(x)"===b?(d=0,f="fx"):"+"===b?(d=-17,f="plus"):"-"===b?(d=-34,f="sub"):"*"===b?(d=-53,f="mul"):"/"===b?(d=-70,f="divide"):"("===b?(d=-90,f="left"):")"===b?(d=-106,f="right"):"="===b?(d=2,e=-17,f="equal"):">"===b?(d=-17,e=-17,f="greater"):">="===b?(d=70,e=-17,f="greaterand"):"<"===b?(d=90,e=-17,f="less"):"<="===b?(d=56,e=-17,f="lessand"):"<>"===b&&(d=38,e=-17,f="noeequal"),c="background-position: "+d+"px "+e+"px;",a.className||(a.className="edui-for-"+f),a.cssRules=".edui-default  .edui-for-"+f+" .edui-icon {"+c+"}"}this.initOptions(a),this.initButton()};e.prototype={uiName:"button",label:"",title:"",showIcon:!0,showText:!0,cssRules:"",initButton:function(){this.initUIBase(),this.Stateful_init(),this.cssRules&&a.cssRule("edui-customize-"+this.name+"-style",this.cssRules)},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"><div id="##_state" stateful><div class="%%-wrap"><div id="##_body" unselectable="on" '+(this.title?'title="'+this.title+'"':"")+' class="%%-body" onmousedown="return $$._onMouseDown(event, this);" onclick="return $$._onClick(event, this);">'+(this.showIcon?'<div class="edui-box edui-icon"></div>':"")+(this.showText?'<div class="edui-box edui-label">'+this.label+"</div>":"")+"</div></div></div></div>"},postRender:function(){this.Stateful_postRender(),this.setDisabled(this.disabled)},_onMouseDown:function(a){var b=a.target||a.srcElement,c=b&&b.tagName&&b.tagName.toLowerCase();if("input"==c||"object"==c||"object"==c)return!1},_onClick:function(){this.isDisabled()||this.fireEvent("click")},setTitle:function(a){this.getDom("label").innerHTML=a}},a.inherits(e,b),a.extend(e.prototype,d)}(),function(){var a=c.editor.utils,b=(c.editor.ui.uiUtils,c.editor.ui.UIBase),d=c.editor.ui.Toolbar=function(a){this.initOptions(a),this.initToolbar()};d.prototype={items:null,initToolbar:function(){this.items=this.items||[],this.initUIBase()},add:function(a,b){void 0===b?this.items.push(a):this.items.splice(b,0,a)},getHtmlTpl:function(){for(var a=[],b=0;b<this.items.length;b++)a[b]=this.items[b].renderHtml();return'<div id="##" class="edui-toolbar %%" onselectstart="return false;" onmousedown="return $$._onMouseDown(event, this);">'+a.join("")+"</div>"},postRender:function(){for(var a=(this.getDom(),0);a<this.items.length;a++)this.items[a].postRender()},_onMouseDown:function(a){var b=a.target||a.srcElement,c=b&&b.tagName&&b.tagName.toLowerCase();if("input"==c||"object"==c||"object"==c)return!1}},a.inherits(d,b)}(),function(){function a(a){this.initOptions(a),this.initEditorUI()}var b=c.editor.utils,d=(c.editor.ui.uiUtils,c.editor.ui.UIBase,c.editor.dom.domUtils);a.prototype={uiName:"editor",initEditorUI:function(){this.editor.ui=this,this._dialogs={},this.initUIBase(),this._initToolbars();var a=this.editor,b=this;a.addListener("ready",function(){a.ui._actualFrameWidth=a.options.initialFrameWidth,UE.browser.ie&&6===UE.browser.version&&a.container.ownerDocument.execCommand("BackgroundImageCache",!1,!0),a.selection.isFocus()&&a.fireEvent("selectionchange",!1,!0)}),a.addListener("keyup",function(a,b){var c,f=b.keyCode||b.which,g=this;if((8==f||46==f)&&(c=g.selection.getRange(),d.isBody(c.startContainer))){var h=d.createElement(g.document,"p",{innerHTML:e.ie?d.fillChar:"<br/>"});c.insertNode(h).setStart(h,0).setCursor(!1,!0)}}),a.addListener("selectionchange",function(){a.options.elementPathEnabled&&b[(-1==a.queryCommandState("elementpath")?"dis":"en")+"ableElementPath"](),a.options.scaleEnabled&&b[(-1==a.queryCommandState("scale")?"dis":"en")+"ableScale"]()})},_initToolbars:function(){for(var a=this.editor,d=this.toolbars||[],e=[],f=0;f<d.length;f++){for(var g=d[f],h=new c.editor.ui.Toolbar({theme:a.options.theme}),i=0;i<g.length;i++){var j=g[i],k=null;"string"==typeof j?(j=j.toLowerCase(),c.editor.ui[j]&&(k=new c.editor.ui[j](a))):k=j,k&&k.id&&h.add(k)}e[f]=h}b.each(UE._customizeUI,function(b,c){var d,e;if(b.id&&b.id!=a.key)return!1;(d=b.execFn.call(a,a,c))&&(e=b.index,void 0===e&&(e=h.items.length),h.add(d,e))}),this.toolbars=e},getHtmlTpl:function(){return'<div id="##" class="%%"><div id="##_toolbarbox" class="%%-toolbarbox">'+(this.toolbars.length?'<div id="##_toolbarboxouter" class="%%-toolbarboxouter"><div class="%%-toolbarboxinner">'+this.renderToolbarBoxHtml()+"</div></div>":"")+'<div id="##_toolbarmsg" class="%%-toolbarmsg" style="display:none;"><div id="##_toolbarmsg_label" class="%%-toolbarmsg-label"></div><div style="height:0;overflow:hidden;clear:both;"></div></div><div id="##_message_holder" class="%%-messageholder"></div></div><div id="##_iframeholder" class="%%-iframeholder"></div><div id="##_scalelayer"></div></div>'},renderToolbarBoxHtml:function(){for(var a=[],b=0;b<this.toolbars.length;b++)a.push(this.toolbars[b].renderHtml());return a.join("")},_updateElementPath:function(){if(this.elementPathEnabled&&(list=this.editor.queryCommandValue("elementpath")))for(var a,b=[],c=0;a=list[c];c++)b[c]=this.formatHtml('<span unselectable="on" onclick="$$.editor.execCommand(&quot;elementpath&quot;, &quot;'+c+'&quot;);">'+a+"</span>")}},b.inherits(a,c.editor.ui.UIBase);var f={};UE.ui.Editor=function(c){var e=new UE.Editor(c);e.options.editor=e,b.loadFile(document,{href:e.options.themePath+e.options.theme+"/css/ueditor.css",tag:"link",type:"text/css",rel:"stylesheet"});var g=e.render;return e.render=function(c){c.constructor===String&&(e.key=c,f[c]=e),b.domReady(function(){function b(){if(e.setOpt({labelMap:e.options.labelMap}),new a(e.options),c&&(c.constructor===String&&(c=document.getElementById(c)),c&&c.getAttribute("name")&&(e.options.textarea=c.getAttribute("name")),c&&/script|textarea/gi.test(c.tagName))){var b=document.createElement("div");c.parentNode.insertBefore(b,c);var f=c.value||c.innerHTML;e.options.initialContent=/^[\t\r\n ]*$/.test(f)?e.options.initialContent:f.replace(/>[\n\r\t]+([ ]{4})+/g,">").replace(/[\n\r\t]+([ ]{4})+</g,"<").replace(/>[\n\r\t]+</g,"><"),c.className&&(b.className=c.className),c.style.cssText&&(b.style.cssText=c.style.cssText),/textarea/i.test(c.tagName)?(e.textarea=c,e.textarea.style.display="none"):c.parentNode.removeChild(c),c.id&&(b.id=c.id,d.removeAttributes(c,"id")),c=b,c.innerHTML=""}d.addClass(c,"edui-"+e.options.theme),e.ui.render(c);var h=e.options;e.container=e.ui.getDom();for(var i,j=d.findParents(c,!0),k=[],l=0;i=j[l];l++)k[l]=i.style.display,i.style.display="block";if(h.initialFrameWidth)h.minFrameWidth=h.initialFrameWidth;else{h.minFrameWidth=h.initialFrameWidth=c.offsetWidth;var m=c.style.width;/%$/.test(m)&&(h.initialFrameWidth=m)}h.initialFrameHeight?h.minFrameHeight=h.initialFrameHeight:h.initialFrameHeight=h.minFrameHeight=c.offsetHeight;for(var i,l=0;i=j[l];l++)i.style.display=k[l];c.style.height&&(c.style.height=""),e.container.style.width=h.initialFrameWidth+(/%$/.test(h.initialFrameWidth)?"":"px"),e.container.style.zIndex=h.zIndex,g.call(e,e.ui.getDom("iframeholder")),e.fireEvent("afteruiready")}b()})},e},UE.getEditor=function(a,b,c){var d=f[a];return d||(d=f[a]=new UE.ui.Editor(b),d.kdModel=c,d.render(a)),d},UE.delEditor=function(a){var b;(b=f[a])&&(b.key&&b.destroy(),delete f[a])},UE.registerUI=function(a,c,d,e){b.each(a.split(/\s+/),function(a){UE._customizeUI[a]={id:e,execFn:c,index:d}})}}(),UE.registerUI("f(x) + - * / ( ) = > >= < <= <>",function(a,b){a.registerCommand(b,{execCommand:function(b){"f(x)"==b?a.kdModel.invoke("f(x)",""):this.execCommand("inserthtml",b+"&nbsp;",!0)}});var c=new UE.ui.Button({name:b,title:b,onclick:function(){a.execCommand(b)}});return a.addListener("selectionchange",function(){var d=a.queryCommandState(b);-1==d?(c.setDisabled(!0),c.setChecked(!1)):(c.setDisabled(!1),c.setChecked(d))}),c})}();