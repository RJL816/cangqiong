(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-index"],{"121b":function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("1bc7");var i=a("5d2d"),n={data:function(){return{pageId:null}},computed:{contentVid:function(){return this.$store.state.global.activeTabbar||uni.getStorageSync("activeTabbar")},afterChooseImg:function(){return this.$store.state.global.globalData.afterChooseImg}},provide:function(){return{getParentTimer:this.getParentTimer,changeViewIdAndPageId:this.changeViewIdAndPageId}},created:function(){this.isFirstLoad=!0,this.timer=this.timer?this.timer:Date.now()},onShow:function(){var e=this,a=this.contentVid||this.viewId,n=this.$store.state.global.forcePage,o=!(!n||!this.contentVid)&&n[this.contentVid],s=this.$store.state.bill.curMainViewId;if(!o||this.afterChooseImg||this.$store.state.global.afteropenset||this.$store.commit("global/SET_IS_NEED_RELOAD",{viewid:a,isNeedReload:!0}),!a||s&&-1!==s.indexOf(a+"-")||(this.timer=this.timer?this.timer:Date.now(),this.$store.commit("bill/SET_CUR_VIEW_ID",a+"-"+this.timer)),"boolean"===typeof this.$store.state.bill.timeStop[this.pageId]&&this.$store.commit("bill/SET_TIME_STOP",{pageId:this.pageId,needStop:!1}),this.$store.state.global.afteropenset){this.$store.state.global.afteropenset=!1;var r=(0,i.getStorage)("curLocation");r||uni.getSetting({success:function(a){t.log(a.authSetting),a.authSetting["scope.userLocation"]&&e.$utils.getCurLocation(!0,e.pageId)}})}},onHide:function(){this.clear(),"boolean"===typeof this.$store.state.bill.timeStop[this.pageId]&&this.$store.commit("bill/SET_TIME_STOP",{pageId:this.pageId,needStop:!0})},methods:{changeViewIdAndPageId:function(t,e){this.viewId=t,this.pageId=e},getParentTimer:function(){return this.timer},clear:function(){var t=this.$store.state.bill.curMainViewId;if(this.$store.commit("bill/DEL_POPUPDATA",t),!this.isFirstLoad){var e=this.$store.state.bill.abortRequestData[t];e&&e.length>0&&e.forEach((function(t){t.abort()}))}this.isFirstLoad=!1}}};e.default=n}).call(this,a("84f8")["default"])},"55a4":function(t,e,a){"use strict";var i=a("eaa2"),n=a.n(i);n.a},"71ca":function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return i}));var i={cusTabBar:a("4440").default},n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"app-wrapper v"},[t.tabData&&t.tabData.children&&t.tabData.children.length>0&&t.appData?[t._l(t.tabData.children,(function(e){return[t.isClicked[e.viewid]?[a("app-main",{key:e.viewid,class:{"app-main-content":!0,hide:e.viewid!==t.contentVid},attrs:{wdata:t.appData,contentVid:e.viewid}})]:t._e()]}))]:t.appData?a("app-main",{key:t.tab.viewid,attrs:{wdata:t.appData}}):t._e(),t.tabData?a("cus-tab-bar",{attrs:{wdata:t.tabData}}):t._e()],2)},o=[]},"7cc9":function(t,e,a){"use strict";(function(t){var i=a("fe5c");a("ac67"),a("32ea"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("1bc7"),a("fc02"),a("d0f2"),a("a7e5"),a("8dee");var n=i(a("46d3")),o=i(a("121b")),s=i(a("2059")),r=a("7736");function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){(0,n.default)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var d={mixins:[o.default],components:{AppMain:s.default},data:function(){return{controlsList:this.$store.state.global.commonData.data?this.$store.state.global.commonData.data.controlsList:[],pageId:void 0,styleobj:{},classobj:{},appData:null,tabData:null}},provide:function(){return{parent:this}},options:{vmobj:getApp().globalData.vmobj},computed:c(c({},(0,r.mapState)({isClicked:function(t){return t.global.isClicked}})),{},{pageClass:function(){var t=getApp().globalData.platSpec||"testmobile";return"mall"===t?"page_mallframe":"store"===t?"page_ocpos_frame":"page_mobileframe"}}),created:function(){t.log("page index created"),this.viewid="index",this.loadView()},mounted:function(){t.log("page mounted")},beforeDestroy:function(){for(var t in this.isClicked)this.contentVid!==t&&this["global/SET_IS_CLICKED"]({viewid:t,isClicked:!1})},onShareAppMessage:function(t){return this.getShareData(t,"global")},onShareTimeline:function(t){return this.getShareData(t,"global")},watch:{"$store.state.global.fulllayer":function(t){var e=this.classobj[this.appmainid];t?e+=" app-full-layer":e=e.replace(/app-full-layer/,""),this.$set(this.classobj,this.appmainid,e)}},methods:c(c(c({},(0,r.mapActions)(["global/WX_LOGIN"])),(0,r.mapMutations)(["bill/SET_LOCALES","bill/SET_IMG_SRV","global/SET_IS_CLICKED"])),{},{loadView:function(){this.initframe()},setStyle:function(t){if(this.styleobj.hasOwnProperty(t.id))return!1;var e=this.$utils.getDnyStyle(t);return this.$set(this.styleobj,t.id,e),this.$set(this.classobj,t.id,t.type),!0},initframe:function(){var t=this;200===this.$store.state.global.commonData.code?this.initPageData(this.$store.state.global.commonData):this.$fetch.doAction.callService({event:"loadView",viewId:this.viewid},"post").then((function(e){200===e.code&&(t.$store.commit("global/SET_COMMON_DATA",e),t.initPageData(e),t.dataLoad())}))},initPageData:function(t){var e=this;if(!this.contentVid&&t.data.controls&&(this.$route&&!this.$route.query.viewid&&0===this.$route.meta.tabBarIndex?localStorage.removeItem("activeTabbar"):this.$store.state.global.activeTabbar=localStorage.getItem("activeTabbar"),!this.contentVid)){var a=t.data.controls.findIndex((function(t){return"TabBar"===t.type}));if(-1!==a){var i=t.data.controls[a].children[0];i.href&&i.href.match(/view/)&&(i.viewid=i.href.split(":")[1]),this.$store.state.global.activeTabbar=i.viewid}}if(this.controlsList=t.data.controls,this.controlsList.push({id:"frame_end",type:"End"}),this.controlsList.forEach((function(t){"AppMain"===t.type&&(e.appData=t),"TabBar"===t.type&&(e.tabData=t)})),this.tabData){var n=[];this.tabData.children.forEach((function(t){n.push(t.viewid)})),this.$utils.setStorage("tab_viewids",n)}this["global/SET_IS_CLICKED"]({viewid:this.contentVid,isClicked:!0}),this.appmainid=this.appData.id,this["bill/SET_LOCALES"](t.locales),this["bill/SET_IMG_SRV"](t.gb&&t.gb.imgsrv||""),this.pageId=t.pageId,"index"===this.viewid&&(this.$store.state.global.gpageId=t.pageId)},dataLoad:function(){this.$fetch.doAction.callService({viewId:this.viewid,pkValue:this.pkValue,pageId:this.pageId,event:"loadData"},"post")},getShareData:function(t,e){var a=this;e=t.target&&t.target.id||e;var i=getCurrentPages(),n=i[i.length-1],o=n.$page.fullPath,s=this.$utils.getStorage("tab_viewids")||[],r=s.findIndex((function(t){return t===a.contentVid})),l={path:o},c=this.$store.state.bill.pageData[this.pageId],d=c?c.ishareurl:null,p=d?d[e]||d.global:null;return-1!==r&&0!==r&&(l.path=r<=4?"/pages/tabbar/tabbar".concat(r+1):"/layout/AppMain/AppMain?viewId=".concat(this.contentVid)),p&&(l.path=l.path+p["u"],p["p"]&&(l.imageUrl=this.$utils.convertPath(p["p"])),p["t"]&&(l.title=p["t"])),l}})};e.default=d}).call(this,a("84f8")["default"])},8069:function(t,e,a){"use strict";a.r(e);var i=a("7cc9"),n=a.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},c58a:function(t,e,a){var i=a("a1a8");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.app-wrapper[data-v-0f0213e7]{width:100%;height:100%}.app-wrapper .app-main-content[data-v-0f0213e7]{-webkit-box-flex:1;-webkit-flex:1;flex:1;overflow:scroll;-webkit-overflow-scrolling:touch}',""]),t.exports=e},eaa2:function(t,e,a){var i=a("c58a");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("d89a").default;n("49f4cba9",i,!0,{sourceMap:!1,shadowMode:!1})},f75a:function(t,e,a){"use strict";a.r(e);var i=a("71ca"),n=a("8069");for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("55a4");var s,r=a("a238"),l=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,"0f0213e7",null,!1,i["a"],s);e["default"]=l.exports}}]);