!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["nocode-designer"]=t():e["nocode-designer"]=t()}(self,(function(){return function(){var e,n,r={9472:function(e,n,r){"use strict";r.r(n),r.d(n,{NoCodeDesigner:function(){return Ud}});var o={};r.r(o),r.d(o,{addCache:function(){return Oi},addControlCache:function(){return Li},clearCache:function(){return ji},deleteControlCache:function(){return Vi},getControlCache:function(){return Ui},hasCache:function(){return Bi},hasControlCache:function(){return Ki}});var a=r(4716),i=r.n(a),l=r(4884),c=r.n(l),u=r(7435),s=r.n(u),f=r(8264),d=r(2992),p=r(3939),v=r.n(p),m=r(696),g=r.n(m),h=r(1908),y=r.n(h),b=r(760),C=r.n(b),E=r(2581),I=r.n(E),x=r(3992),T=r.n(x),N=r(2400),A=r.n(N),S=r(524),w=r.n(S),F=r(5984),k=r.n(F),D=r(8040),P=r.n(D),M=r(3548),R=r(5992),_=r(2664),O="Id",B="FieldType",j="FieldId",L="EntryId",U="_Type_",K="Value",V="Label",z="ParentId",G="Items",H="Bgc",q="data-control-id",Y="data-drag-id",W="data-drag-over",Q="data-selection",X="data-mouse-over",Z="data-cut-control",J="data-is-dragging",$="data-right-drag-style",ee="data-drag-direction",te="data-outline-drag-tree-node",ne="data-change-name",re=function(e){return e?(0,d.c)({},q,null==e?void 0:e[O]):{}},oe=r(6428),ae=r.n(oe),ie=k().createContext({});ie.displayName="DesignerContext";var le=function(e){var t=(0,F.useContext)(ie),n=(t.prefixCls,t.getKdesignerApi),r=(t.invokeAction,t.fieldStatusSettingMode),o=(0,F.useMemo)((function(){return n()}),[]),a=o.selection,i=o.data,l=a.setSelect,c=(0,F.useMemo)((function(){return i.getRootId()}),[]),u=((0,F.useRef)(null),(0,F.useRef)(null),(0,F.useCallback)((function(e){var t;e.stopPropagation();var n=e.currentTarget.dataset,o=n.controlId,a=n.enableClick;if(!r||c!==o&&"false"!==a){var i=document.querySelectorAll(C()(t="[".concat(q,'="')).call(t,o,'"]'))[0];null==i||i.setAttribute(X,"true")}}),[r])),s=(0,F.useCallback)((function(e){var t;e.stopPropagation();var n=e.currentTarget.dataset.controlId;document.querySelectorAll(C()(t="[".concat(q,'="')).call(t,n,'"]'))[0].removeAttribute(X)}),[]);return{onMouseOver:u,onMouseOut:s,onContextMenu:function(e){e.stopPropagation();var t=e.currentTarget.dataset,n=t.controlId,o=t.selection;if(i.getRootId()!==n){var a=i.findControl(n);r||(e.preventDefault(),o||l([n]),D.eventBus.emit("contextmenu",{event:e,field:a}))}}}},ce=r(1260),ue=r.n(ce);function se(e){var t=e||window.event;return D.OS===D.MAC?t.metaKey:t.ctrlKey}var fe,de,pe=r(3440),ve=r.n(pe),me=r(9992),ge=r.n(me),he=r(600),ye=r.n(he),be=r(4984),Ce=r(8496),Ee=r(7348),Ie=r.n(Ee),xe=r(2272),Te=r.n(xe),Ne=r(8456),Ae=r.n(Ne),Se=r(3980),we=r.n(Se),Fe=r(644),ke=r.n(Fe),De=function(e){return e.DEFAULT="1",e.DISABLED="2",e.READONLY="3",e.HIDDEN="4",e}({}),Pe=r(2892),Me=r.n(Pe),Re="nocode-designer",_e=["ParentId","Id"],Oe="entity",Be="all",je="nocode-designer-main-root",Le="System_",Ue="NoCodeGroupContainerAp",Ke="NoCodeBizButtonAp",Ve="BizBtnFlexPanelAp",ze="NoCodeBillFormAp",Ge="NoCodeEntryEntity",He="NoCodeRefBillTable",qe=[Ke,Ue],Ye=C()(fe=[He,Ge,Ue,Ke]).call(fe,["NoCodeBillNoField","NoCodeCreateDateField","NoCodeCreatorField","NoCodeModifyDateField","NoCodeModifierField"]),We={"#276FF5":"#F2F9FF","#16AFF1":"#F2FDFF","#16B8B0":"#F2FFFC","#FDC200":"#FFFDE6","#77C404":"#FAFFEB","#1BA854":"#F2FFF5","#FF991C":"#FFFBF2","#FF5F1F":"#FFF8F2","#FB2323":"#FFF4F2","#F90D58":"#FFF2F4","#701DF0":"#F9F2FF","#0E5FD8":"#F2F9FF"},Qe=[{name:"经典",primaryColor:"#276FF5"},{name:"都市",primaryColor:"#701DF0"},{name:"夜幕",primaryColor:"#0E5FD8"},{name:"沙漠",primaryColor:"#FF5F1F"},{name:"雪山",primaryColor:"#276FF5"},{name:"港湾",primaryColor:"#F90D58"},{name:"高尔夫",primaryColor:"#1BA854"},{name:"乡野",primaryColor:"#16B8B0"}],Xe=["UploadDefValue","PictureDefValue","NoCodeDefValue","FieldRequired","Status","Visibility"],Ze=function(e){return e.DEFAULT="1",e.DISABLED="2",e.READONLY="3",e.HIDDEN="4",e}({}),Je=function(e){return"NoCodeDateRangeField"===e},$e=function(e){return"NoCodeDateField"===e},et=function(e){return(null==e?void 0:w()(e).call(e,"NoCodeRefBillField"))||(null==e?void 0:w()(e).call(e,"NoCodeMulRefBillField"))},tt=function(e){var t;return w()(t=["NoCodeCreatorField","NoCodeModifierField"]).call(t,e)},nt=function(e){var t;return w()(t=["NoCodeCreatorField","NoCodeCreateDateField","NoCodeModifierField","NoCodeModifyDateField","NoCodeBillNoField"]).call(t,e)},rt=function(e){var t;return w()(t=["NoCodeCreatorField","NoCodeCreateDateField","NoCodeModifierField","NoCodeModifyDateField"]).call(t,e)},ot=function(e){return"NoCodeImageUploadField"===e},at=function(e){return"NoCodeAttachmentUploadField"===e},it=function(e){return"NoCodeEntryEntity"===e},lt=function(e){return"NoCodeRefBillTable"===e},ct=function(e){return"NoCodeBillFormAp"===e||"NoCodeBillEntity"===e},ut=function(e){return e===Ke||e===Ve},st=function(e){return"NoCodeSelectItemField"===e},ft=function(e){return"NoCodeRichTextField"===e},dt=function(e){return"NoCodeGraphicDisplayField"===e},pt=function(e){return e&&Date.parse(e)?new Date(e):null},vt=function(e){if(!e)return null;var t=(e=function(e){return e?v()(e).reduce((function(t,n){return t[(0,Fe.lowerFirst)(n)]=e[n],t}),{}):e}(e))||[],n=t.start,r=void 0===n?"":n,o=t.end,a=void 0===o?"":o;return[pt(r),pt(a)]},mt=function(e){return"hide"===e},gt=function(e,t){if(!t)return"";var n,r=t._Type_;return st(r)?C()(n="".concat(e,"[")).call(n,Mt(t.SelectItemType)?"多选":"单选","]"):et(r)?function(e,t){var n;return C()(n="".concat(e,"[")).call(n,t?"多条":"单条","]")}(e,Mt(t.Multi)):e},ht=function(e){return"NoCodeGroupContainerAp"===e},yt=r(9480),bt=r.n(yt),Ct=r(2504),Et=["children"],It=["children","valueItems","billEntityId","displayProp","isMulti","compareTypes","refSelf"];function xt(e,t){var n=v()(e);if(i()){var r=i()(e);t&&(r=g()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xt(Object(n),!0).forEach((function(t){(0,d.c)(e,t,n[t])})):s()?Object.defineProperties(e,s()(n)):xt(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}function Nt(e,t){var n=void 0!==ge()&&ye()(e)||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"==typeof e)return At(e,t);var r=we()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return ve()(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return At(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function At(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var St=["FieldName","TableName","Key"],wt=function(e){return e?Array.isArray(e)?e:[e]:[]},Ft=function(e,t){var n=(0,Fe.cloneDeep)(e),r=n._Type_,o=n.EntityData;n[z]=t;var a=(0,D.createUUid)();if(n[O]=a,o&&(n.EntityData[O]=a,n.EntityData[z]=t,n[j]&&(n[j]=a),n[L]&&(n[L]=a)),Je(r)){Ie()(n,"EndDateFieldKey"),Ie()(n,"EndDateFieldName"),Ie()(n,"StartDateFieldKey"),Ie()(n,"StartDateFieldName");var i=bt()(o,(function(e){Ie()(e,"EndDateFieldKey"),Ie()(e,"EndDateFieldName"),Ie()(e,"StartDateFieldKey"),Ie()(e,"StartDateFieldName")}));Te()(n,"EntityData",i)}if(it(r)){Ie()(n,"TableName");var l=bt()(o,(function(e){Ie()(e,"TableName")}));Te()(n,"EntityData",l)}return Vt(r)&&(Number(n.GroupIndex)>0?n.GroupIndex=Number(n.GroupIndex)+1:(n.GroupParentId=(0,D.createUUid)(),n.GroupIndex=0)),n.Inherit&&(n.Inherit=!1),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:St;return null==t||t.forEach((function(t){e[t]&&delete e[t],e.EntityData&&e.EntityData[t]&&Ie()(e.EntityData,t)})),e}(n)},kt=function e(t,n,r){var o,a,i=n.Id,l=Ft(n,r),c=g()(o=t[G]).call(o,(function(e){return e[z]===i}));return C()(a=[l]).call(a,(0,Fe.flattenDeep)(T()(c).call(c,(function(n){return e(t,n,l[O])}))))},Dt=function(e){var t;return w()(t=["default","hidden","disabled","readonly","mustInput"]).call(t,e)},Pt=function(e){var t=e.SelectItemType,n=e.CustomContent,r=e.DefValue;if(!Array.isArray(n))return"";if("0"===t){var o=Ae()(n).call(n,(function(e){return e.Value===r}));return(null==o?void 0:o.Label)||""}if("1"===t){var a=[],i=r.split(",");return n.forEach((function(e){null!=i&&w()(i).call(i,null==e?void 0:e.Value)&&a.push(e.Label)})),a.join(",")}return""},Mt=function(e){return"1"===(0,Fe.toString)(e)},Rt=function(e){if(!e)return"Select";var t=e.DropDownOrTilePc,n=e.SelectItemType;return"1"===(0,Fe.toString)(t)?Mt(n)?"Checkbox":"Radio":"Select"},_t=function(e){var t,n=e.CustomContent;if(!n)return[];var r=Array.isArray(n)?n:(null==n?void 0:n.ops)||[];return g()(t=(null==r?void 0:T()(r).call(r,(function(e){return{label:null==e?void 0:e[V],value:null==e?void 0:e[K],color:null==e?void 0:e[H]}})))||[]).call(t,(function(e){return e.label}))||[]},Ot=function(e){var t=e.CustomContent;return!!t&&(!Array.isArray(t)&&(null==t?void 0:t.bgcSwitch))},Bt=function(e){var t=e.SelectItemType,n=e.NoCodeDefValue;return Mt(t)?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";return e?null==e?void 0:e.split(t||","):[]}(n,","):n},jt=function(e){return void 0!==e&&0==+e},Lt=function(e,t){var n,r=e.formmeta,o=null==r||null===(n=r.Items)||void 0===n||null===(n=n[0])||void 0===n?void 0:n.SysSetting;return o?JSON.parse(o):function(e){var t=e.Categories,n=void 0===t?[]:t;return g()(n).call(n,(function(e){var t;return null==e||null===(t=e.Id)||void 0===t?void 0:y()(t).call(t,Le)})).reduce((function(e,t){return e[t.Id]=!1,e}),{})}(t)},Ut=function(e,t){return null==e?void 0:e[t]},Kt=function(e,t){var n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var r in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+r+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?n[r]:("00"+n[r]).substr((""+n[r]).length)));return t},Vt=function(e){return e===Ue},zt=function(e){var t=e.split("."),n=/\B(?=(\d{3})+(?!\d))/g;if(2===t.length){var r,o=(0,f.c)(t,2),a=o[0],i=o[1];return C()(r="".concat(a.replace(n,","),".")).call(r,i)}return t[0].replace(n,",")},Gt=null===(de=window.location.search)||void 0===de||null===(de=de.match(/(^|&|\?)kdcdc=([^&]*)(&|$)/i))||void 0===de?void 0:de[2],Ht=function(e){return e?!w()(e).call(e,"kdcdc")&&Gt?e+(w()(e).call(e,"?")?"&":"?")+"kdcdc="+Gt:e:""},qt=function(e){if(e)return window.__domainurl__+("/"===e[0]?we()(e).call(e,1):e)},Yt=function(e,t){return t?t.indexOf("background")>-1?qt(t):e+t:t};function Wt(e,t){var n=new Ct.c((function(e){var n=e[0].contentRect,r=n.width,o=n.height;t&&t({hide:0===r&&0===o,width:r,height:o})}));return n.observe(e),{removeResizeObserve:function(){n.disconnect(e),n=null}}}var Qt=function(e){if("string"!=typeof e)return!1;try{var t=JSON.parse(e);return!("object"!=(0,Ce.c)(t)||!t)}catch(e){return!1}},Xt=function(e){return e&&Qt(e)?0===(e=JSON.parse(e)).valueType&&e.value||"":e},Zt=function(e){if(!(0,Fe.isUndefined)(e)){var t=e.start,n=e.end;return{start:Xt(t),end:Xt(n)}}},Jt=function(e){return Qt(e)?JSON.parse(e):{}},$t=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"NoCodeDefValue",r=Tt({},e);return r[n]&&(r=Tt(Tt({},r),{},(0,d.c)({},n,"DateRangeDefValue"===n?Zt(r[n]):Xt(r[n])))),null!==(t=r.EntityData)&&void 0!==t&&t[n]&&(r=Tt(Tt({},r),{},{EntityData:Tt(Tt({},r.EntityData),{},(0,d.c)({},n,"DateRangeDefValue"===n?Zt(r[n]):Xt(r[n])))})),r},en=function(e,t){var n=e.PropsDisplay,r=e.DataRange,o=e.BillEntityIdEx,a=e.Multi,i=e._Type_,l=(e.Status,e.MustInput),c=(e.EmptyText,e.Key),u=e.Name,s=e.DefaultDisplay,f=e.Id,d=e.FieldType,p=1===parseInt(a),v=tt(i)?"bos_user":o||t.getControlPropertyDefaultValue(d,"BillEntityIdEx");return{displayProp:n||t.getControlPropertyDefaultValue(d,"PropsDisplay"),dataRange:r,isMulti:p,entityId:v,type:(et(i)||lt(i)?"NoCodeMulRefBillField":i).toLowerCase(),id:f,allowClear:!0,mustInput:l,key:c,name:u,defaultDisplay:s,showSelected:!0,disabled:!1,readonly:!1,hidden:!1}},tn=function e(t,n,r){return(t||[]).reduce((function(t,o){var a,i,l=o.id,c=o.option,u=void 0===c?{}:c,s=u.children,f=(0,be.c)(u,Et),d=C()(a="".concat(n,".")).call(a,l),p=null!=d&&w()(d).call(d,"fbasedataid")?l.split(".fbasedataid")[0]:d;if(((null==p||null===(i=p.split("."))||void 0===i?void 0:i.length)||0)>r)return t;var v=Tt({},f);s&&(v.children=e(s,n,r));var m=Tt(Tt({},o),{},{id:d,option:v||{}});return C()(t).call(t,m)}),[])},nn=function e(t,n,r){var o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;return g()(o=(n||[]).reduce((function(n,o){var i,l,c=o.caption,u=o.type,s=o.id,f=o.option,d=void 0===f?{}:f,p=o.typeCaption,v=null!=s&&w()(s).call(s,"fbasedataid")?s.split(".fbasedataid")[0]:s,m=(null==v||null===(i=v.split("."))||void 0===i?void 0:i.length)||0;if("group"!==u&&m>a)return n;var g=d.children,h=d.valueItems,y=d.billEntityId,b=d.displayProp,E=d.isMulti,I=(d.compareTypes,d.refSelf),x=(0,be.c)(d,It),T=function(e){return null==e?void 0:e.split("-")[0]}(u).toLowerCase(),N=function(e){var t=e.compareTypesMap,n=e.type,r=e.entityId,o=t[n]||[];return"bos_user"===r?o="nocodecreatorfield":"bos_adminorg"===r&&(o="orgfield"),"string"==typeof o&&(o=t[o]),o}({compareTypesMap:r,type:T,entityId:y}),A=s,S=Tt({title:c,key:A,compareTypes:N,type:u,titlePrefix:p,selectable:"group"!==u},x);return et(u)||tt(u)||lt(u)?S=(0,_.c)(S,{displayProp:b,entityId:y,isMulti:E}):st(u)&&(S=(0,_.c)(S,{isMulti:E})),h&&(S.items=h),g?S.children=e(t,g,r,a):!0===I&&(S.children=e(t,tn(t,A,a),r,a)),"group"!==u||null!==(l=S)&&void 0!==l&&null!==(l=l.children)&&void 0!==l&&l.length?C()(n).call(n,S):n}),[])).call(o,(function(e){var t=e.type,n=e.entityId;return!et(t)&&!tt(t)||null!==n}))},rn=function(e,t,n){var r,o=document.querySelector(C()(r="[".concat(q,'="')).call(r,e,'"]'));o&&(o.setAttribute(q,t),null==n||n(o))},on=function(e,t,n){if(t){var r=t.GroupParentId,o=t.GroupIndex,a=t.Id,i="forward"===n?-1:1,l=e.findControlByCondition((function(e){return e.GroupParentId===r}));if("forward"!==n||0!==Number(o))if("back"!==n||Number(o)!==l.length-1){var c=Ae()(l).call(l,(function(e){return Number(e.GroupIndex)===Number(o)+i}));if(c){var u=Tt(Tt({},t),{},{GroupIndex:c.GroupIndex});e.insertControl((0,D.createInsertAction)({targetId:c.Id,values:[u],isPre:"forward"===n})).then((function(t){var n=[[c.Id,{GroupIndex:o}]];e.batchUpdateControlPropertyValues((0,D.createUpdateAction)(n))}))}}else{var s=e.getNextSibling(a).control;if(!s)return;if(Vt(s._Type_)){var f,d=e.findControlByCondition((function(e){return e.GroupParentId===s.GroupParentId}));if(null!=d&&d.length)e.insertControl((0,D.createInsertAction)({targetId:null===(f=d[d.length-1])||void 0===f?void 0:f.Id,values:l,isPre:!1}))}else e.insertControl((0,D.createInsertAction)({targetId:s.Id,values:l,isPre:!1}))}else{var p=e.getPrevSibling(a).control;if(!p)return;if(Vt(p._Type_)){var v,m=e.findControlByCondition((function(e){return e.GroupParentId===p.GroupParentId}));if(null!=m&&m.length)e.insertControl((0,D.createInsertAction)({targetId:null===(v=m[0])||void 0===v?void 0:v.Id,values:l,isPre:!0}))}else e.insertControl((0,D.createInsertAction)({targetId:p.Id,values:l,isPre:!0}))}}},an={NoCodeTextField:"文本",NoCodeTextAreaField:"文本",NoCodeCreateDateField:"日期",NoCodeModifyDateField:"日期",NoCodeBillNoField:"文本"},ln=function(e,t,n,r){var o,a,i=e._Type_,l=e.Multi,c=e.SelectItemType,u=e.Name,s=e.Key,f=e.BillEntityIdEx;if(et(i)){var d,p,m=Ae()(d=v()(t)).call(d,(function(e){return w()(s).call(s,e)}));if(m)return t[m]||"";var g=f||n.getControlPropertyDefaultValue(i,"BillEntityIdEx");return C()(p="[".concat(r[g]||"","]")).call(p,1==l?"[多条]":"[单条]")}if(lt(i))return C()(a="[".concat(u||"-","]")).call(a,1==l?"[多条]":"[单条]");if(st(i))return"[选项]".concat(Mt(c)?"[多选]":"[单选]");if("NoCodeCreatorField"===i||"NoCodeModifierField"===i)return"[人员][单条]";var h=an[i]||(null===(o=n.getControlMeta(i))||void 0===o?void 0:o.Name);return"[".concat(h,"]")},cn=function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=Nt(t);try{for(o.s();!(n=o.n()).done;){var a=n.value,i=a.titlePrefix,l=a.key,c=a.children,u=a.type;if(c&&e(c,r),et(u))r[l.split(".").pop()]=i||""}}catch(e){o.e(e)}finally{o.f()}return r},un=function(e,t){var n,r=T()(n=g()(e).call(e,(function(e){return Vt(null==e?void 0:e._Type_)}))).call(n,(function(e){return e.Id}));return r.length&&e.forEach((function(e){if(w()(r).call(r,e.ParentId)&&e.EntityData){var n=Tt(Tt({},e.EntityData),{},{ParentId:t});e.EntityData=n}})),e},sn=function(){var e,t;return we()(e=Math.random().toString()).call(e,-9)+we()(t=Math.random().toString()).call(t,-9)},fn=function(){var e=(0,F.useContext)(ie),t=e.getKdesignerApi,n=e.fieldStatusSettingMode,r=(0,F.useMemo)((function(){return t()}),[]),o=r.data,a=r.selection,i=a.setSelect,l=a.appendSelect,c=a.getSelection,u=(0,F.useCallback)((function(e){e.stopPropagation();var t=o.getRootId(),r=c(),a=function(e){for(;!e.dataset.controlId&&"ui-designer-root"!==e.id;)e=e.parentNode;return e}(e.target).dataset,u=a.controlId,s=a.enableClick;if(!n||t!==u&&"false"!==s){var f=!0;if(r.length>0&&(f=o.isSiblings(r[0],u)),f||!se(e))if(se(e)){var d=r.indexOf(u);if(d>=0){var p=(0,R.c)(r);ue()(p).call(p,d,1),p.length>0&&i(p)}else l([u])}else i([u])}}),[n]);return u},dn="zidingyifuwu",pn={NoCodeTextField:"wenben",NoCodeTextAreaField:"duoxingwenben",NoCodeDateField:"riqi4",NoCodeDecimalField:"shuzhi",NoCodeSelectItemField:"xuanxiang",NoCodeRefBillField:"duoxuanjichuziliao",NoCodeMulRefBillField:"duoxuanjichuziliao",NoCodeAddressFormatField:"dizhi",NoCodeDateRangeField:"riqi4",NoCodeEntryEntity:"biaoge16",NoCodeRefBillTable:"biaoge16",NoCodeRichTextField:"fuwenbenbianjiqi",NoCodeGEOField:"dizhi",NoCodeImageUploadField:"tupian3",NoCodeAttachmentUploadField:"fujian2",NoCodeGraphicDisplayAp:"tuwen",NoCodeBillListAp:"biaodanliebiao",NoCodeCountDownAp:"daojishi",NoCodeMapAp:"ditu",NoCodeCreateDateField:"chuangjianriqi2",NoCodeCreatorField:"chuangjianren2",NoCodeModifyDateField:"xiugairiqi2",NoCodeModifierField:"xiugairen2",NoCodeBillNoField:"bianma",EntryEntity:"biaodanliebiao",GridContainerAp:"zhagerongqi",MessageCarouselContainerAp:"lunborongqi",TabPageAp:"yeqian2",ButtonAp:"anniu3",VectorAp:"zititubiao",ToolbarAp:"gongjulan",NoCodeBizButtonAp:"anniu3",NoCodeGraphicDisplayField:"tuwen",NoCodeGroupContainerAp:"fenzurongqi"};function vn(e,t){return et(e)?"duoxuanjichuziliao":pn[e]||t||dn}var mn=null;function gn(e,t){var n;!function(){mn&&document.body.removeChild(mn);mn=null}(),mn=document.createElement("div");var r=vn(e),o=C()(n='\n    <i class="designericon designericon-'.concat(r,'" style="font-size:20px;vertical-align: -3px"></i>\n    ')).call(n,t,"\n  ");return mn.innerHTML=o,mn.style.cssText="position:absolute;top:-9999px;left:-9999px;opacity:1!important;width: 124px;height: 32px;line-height: 32px;padding: 0 8px;background: #fff;box-shadow: '0px 4px 12px 0px rgba(40,50,70,0.2)';border-radius: 4px;box-sizing: border-box;",document.body.appendChild(mn),mn}var hn=function(e,t,n){e.dataTransfer&&e.dataTransfer.setDragImage&&(e.dataTransfer.dropEffect="move",e.dataTransfer.setDragImage(gn(t,n),-20,-24))},yn=r(9308),bn=r.n(yn),Cn=r(4244),En=r.n(Cn),In=function(e){for(var t=null;;){var n;if(e.dataset.dragId){t=e;break}if(!("kd-nc-grid-panel"!==e.className||null!==(n=e)&&void 0!==n&&null!==(n=n.dataset)&&void 0!==n&&n.groupContainerItem))break;e=e.parentNode}return t},xn=function(e){for(;!e.dataset.groupBarItemId&&"ui-designer-root"!==e.id;)e=e.parentNode;return e},Tn=["data-left-drag-style",$,"data-top-drag-style","data-bottom-drag-style",ee],Nn=function(e){Tn.forEach((function(t){return e.removeAttribute(t)}))},An=function(){setTimeout((function(){var e,t=(0,R.c)(new(bn())(C()(e=[]).call(e,(0,R.c)(document.querySelectorAll("[".concat(ee,"]"))),(0,R.c)(document.querySelectorAll("[".concat(W,"]"))))));t.length&&t.forEach((function(e){Nn(e),e.removeAttribute(W)}))}),200)},Sn=null,wn="",Fn=!1,kn=function(e){wn=e},Dn=function(e){Sn=e},Pn=function(){var e=(0,F.useContext)(ie),t=e.getKdesignerApi,n=e.pubUIAction,r=t(),o=r.data,a=r.selection,i=r.meta,l=r.dataFactory,c=(0,F.useContext)(D.GlobalConfigContext),u=c.env,s=c.showMessage,f=o.getRootId(),d=document.querySelector(".kd-row"),p=function(e,t){var n=Array.isArray(e)?e:[e];return o.getAllParentControlIds(t).some((function(e){return w()(n).call(n,e)}))},v=(0,F.useCallback)((function(e,t,r){var c=(r||{}).isPrev,s=void 0!==c&&c,d=u[D.CONTROL_DRAG_DATA].data,p=(void 0===d?{}:d).Id,v=o.findControl(e),m=-1;if(e===f)m=s?1:-1;else{var g=o.findControlIndex(e);if(s)m=g;else{var h,y=o.getSubControls(e),b=y.length;if(b>0)m=o.findControlIndex(null===(h=y[b-1])||void 0===h?void 0:h[O])+1;else m=g+1}}var C=v[U],E=i.getControlMeta(C).IsContainer,I=void 0!==E&&E?e:o.getParentControlId(e)||f,x=o.findControl(I)[U],T=i.canAdd(p,x);if(T&&!1!==(null==T?void 0:T.success)){if(n({eventName:"drag",action:"fd_add_drag"}),Vt(C))return function(e,t){var n,r,i=u[D.CONTROL_DRAG_DATA].data,c=(void 0===i?{}:i).Id,s=t.Id,f=(t.ParentId,null===(n=xn(e))||void 0===n?void 0:n.getAttribute("data-group-bar-item-id"));if(Vt(c)){if(f){(r=l({type:c,parentId:o.getParentControlId(s),transferData:{Key:"nc_".concat((0,D.createUUid)().toLowerCase())}})).GroupParentId=t.GroupParentId,r.GroupIndex=Number(t.GroupIndex)+1;var d=f;if(e.getAttribute("data-group-bar-item-id"))d=e.getAttribute("data-group-bar-item-id");else{var p,v=En()(p=o.findControlByCondition((function(e){return e.GroupParentId===t.GroupParentId}))).call(p,(function(e,t){return Number(e.GroupIndex)-Number(t.GroupIndex)}));d=v[v.length-1].Id}return void o.insertControl((0,D.createInsertAction)({targetId:d,values:[r],isPre:!1},{isInstrucAdd:!0})).then((function(e){a.setSelect(r.Id)}))}(r=l({type:c,parentId:s})).GroupParentId=(0,D.createUUid)(),r.GroupIndex=0}else r=l(f?{type:c,parentId:f}:{type:c,parentId:s});o.addControl((0,D.createAddAction)(r)).then((function(e){a.setSelect(r.Id)})),delete u[D.CONTROL_DRAG_DATA]}(t,v);var N=l({type:p,parentId:I});o.addControl((0,D.createAddAction)(N,{index:m})).then((function(e){var t=e[0].value;a.setSelect(Array.isArray(t)?[t[0][O]]:[t[O]])})),delete u[D.CONTROL_DRAG_DATA]}}),[u[D.CONTROL_DRAG_DATA],n]),m=(0,F.useCallback)((function(e){var t,n,r,a,l;e.stopPropagation();var c=document.querySelector(C()(t="[".concat(q,"='")).call(t,f,"']")),m=u[D.CONTROL_DRAG_DATA];if(c&&(Sn||m)){var g=Sn||[];null==e||e.currentTarget.removeAttribute(J),Dn(null),kn("");var h=e.target,y=g[0],b=o.findControl(y),E=e.target,I=(E=null!==(n=e.target)&&void 0!==n&&null!==(n=n.dataset)&&void 0!==n&&n.tabsHeader&&Vt(y?null==b?void 0:b._Type_:null===(r=m.data)||void 0===r?void 0:r.Id)?E.lastChild:In(e.target)).dataset.dragId||"";if(!(g&&(null==g?void 0:g.length)>0&&p(g,I))){var x=(null===(a=E.dataset)||void 0===a?void 0:a.dragDirection)||"right",N=!1;if(Nn(E),w()(l=["top","left"]).call(l,x)&&(N=!0),!(w()(g).call(g,I)||I===f&&null!=d&&d.contains(h))){if(null!=g&&g.length){var A=o.findControl(I),S=A._Type_;if(Vt(S))return function(e,t){for(var n,r=e.dropControl,o=e.dragControlIds,a=e.dataContext,l=(r.ParentId,r.Id),c=r._Type_,u=xn(t).getAttribute("data-group-bar-item-id"),f=l,d=[],v=[],m=[],g=function(){var e=o[h],t=a.findControl(e),n=a.findControl(t.ParentId);if(n&&lt(n._Type_))return s("表格的内容无法移动到表格之外"),{v:void 0};if(p(e,l))return{v:void 0};var g=a.findControl(e),y=g._Type_,b=(g.ParentId,g.GroupIndex),C=g.GroupParentId,E=i.canAdd(y,c);if("object"===(0,Ce.c)(E)&&!E.success)return{v:s(E.message)};if(Vt(y))if(u){if(g.GroupParentId!==r.GroupParentId){var I,x,N={GroupParentId:r.GroupParentId,GroupIndex:Number(r.GroupIndex)+1,ParentId:r.ParentId};v.push([g.Id,N]);var A=En()(I=a.findControlByCondition((function(e){return e.GroupParentId===r.GroupParentId}))).call(I,(function(e,t){return Number(e.GroupIndex)-Number(t.GroupIndex)}));ue()(A).call(A,Number(r.GroupIndex)+1,0,g),null==A||A.forEach((function(e,t){Number(e.GroupIndex)!==t&&v.push([e.Id,{GroupIndex:t}])}));var S=En()(x=a.findControlByCondition((function(e){return e.GroupParentId===g.GroupParentId&&e.Id!==g.Id}))).call(x,(function(e,t){return Number(e.GroupIndex)-Number(t.GroupIndex)}));null==S||S.forEach((function(e,t){Number(e.GroupIndex)!==t&&v.push([e.Id,{GroupIndex:t}])}))}else{var w,F=En()(w=a.findControlByCondition((function(e){return e.GroupParentId===r.GroupParentId&&e.Id!==g.Id}))).call(w,(function(e,t){return Number(e.GroupIndex)-Number(t.GroupIndex)}));Number(r.GroupIndex)<Number(g.GroupIndex)?ue()(F).call(F,Number(r.GroupIndex)+1,0,g):ue()(F).call(F,Number(r.GroupIndex),0,g),null==F||F.forEach((function(e,t){Number(e.GroupIndex)!==t&&v.push([e.Id,{GroupIndex:t}])}))}m.push({Id:e})}else{m.push({Id:e,ParentId:l});var k=a.findControl(f).Status;if(void 0!==k){var P=a.getAllSubControlIds(e);d.push.apply(d,(0,R.c)(T()(P).call(P,(function(e){return[e,{Status:k}]}))))}if(1===o.length&&void 0!==b&&C){var M=a.findControlByCondition((function(t){return t.GroupParentId===C&&t.Id!==e}));if(M.length>0&&(d.push([e,{GroupIndex:0,GroupParentId:(0,D.createUUid)()}]),0===Number(b))){var _=T()(M).call(M,(function(e,t){return[e.Id,{GroupIndex:t}]}));d.push.apply(d,(0,R.c)(_))}}}else u?d.push([e,{ParentId:u}]):d.push([e,{ParentId:l}])},h=0;h<o.length;h++)if(n=g())return n.v;v.length>0&&a.batchUpdateControlPropertyValues((0,D.createUpdateAction)(v),!1),m.length>0&&a.insertControl((0,D.createInsertAction)({targetId:f,values:m,isPre:!1})),d.length>0&&a.batchUpdateControlPropertyValues((0,D.createUpdateAction)(d)),An()}({dropControl:A,dragControlIds:g,dataContext:o},E);o.swapControl((0,D.createSwapAction)({origin:g,target:I,isPrev:N})).then((function(e){}))}else v(I,E,{isPrev:N});An()}}}}),[]),g=(0,F.useCallback)((function(e){var t,n,r,a,l;e.preventDefault(),null==e||e.currentTarget.setAttribute(J,"true");var c=u[D.CONTROL_DRAG_DATA];if(Sn||c){var s=Sn||[],f=In(e.target),d=(null==f||null===(t=f.dataset)||void 0===t?void 0:t.dragId)||null;if(d){var p=wn;if(p&&d&&p!==d){var v,m=document.querySelectorAll(C()(v="[".concat(Y,"='")).call(v,p,"']"));m&&m.forEach((function(e){return Nn(e)})),kn(d)}else if(""===p)kn(d);else if(p&&d&&p===d){var g;if(null!==(g=e.target)&&void 0!==g&&null!==(g=g.dataset)&&void 0!==g&&g.tabsHeader)Fn=!0;else if(Fn){var h,y;Fn=!1;var b=document.querySelectorAll(C()(h=C()(y="[".concat(Y,"='")).call(y,p,"'] [")).call(h,ee,"]"));b&&b.forEach((function(e){return Nn(e)}))}}var E=s[0],I=o.findControl(E),x=null==f||null===(n=f.dataset)||void 0===n?void 0:n.groupBarItemId;if(null!==(r=e.target)&&void 0!==r&&null!==(r=r.dataset)&&void 0!==r&&r.tabsHeader&&Vt(E?null==I?void 0:I._Type_:null===(a=c.data)||void 0===a?void 0:a.Id)){var T=e.target.lastChild;null==T||T.setAttribute($,"true"),null==T||T.setAttribute(ee,"right"),kn(null==T?void 0:T.dataset.dragId)}if(!d||null==s||!w()(s).call(s,d))if(x)Vt(E?null==I?void 0:I._Type_:null===(l=c.data)||void 0===l?void 0:l.Id)&&(null==f||f.setAttribute($,"true"),null==f||f.setAttribute(ee,"right"));else{var N=o.findControl(d)._Type_,A=i.getControlMeta(N).IsContainer;if(void 0!==A&&A)return;var S=function(e,t,n){var r=e.getBoundingClientRect(),o=r.x,a=r.y,i=o+r.width,l=a+r.height,c=(o+i)/2,u="";return o<t&&t<i&&a<=n&&n<=a+8?u="left":o<t&&t<i&&l-8<=n&&n<l?u="right":o<=t&&t<=c&&a<n&&n<l?u="left":c<t&&t<i&&a<n&&n<l&&(u="right"),u}(f,e.clientX,e.clientY),F=f.dataset.dragDirection;S&&S!==F&&(F&&(f.removeAttribute("data-".concat(F,"-drag-style")),f.removeAttribute(ee)),null==f||f.setAttribute("data-".concat(S,"-drag-style"),"true"),null==f||f.setAttribute(ee,S))}}else kn("")}}),[f]);return{onDragOver:g,onDragEnd:(0,F.useCallback)((function(e){e.preventDefault(),An(),Dn(null),kn(""),null==e||e.currentTarget.removeAttribute(J)}),[f]),onDrop:m,onDragLeave:(0,F.useCallback)((function(e){var t;null!==(t=e.currentTarget)&&void 0!==t&&t.contains(e.relatedTarget)||(An(),null==e||e.currentTarget.removeAttribute(J))}),[])}};function Mn(e,t){var n=v()(e);if(i()){var r=i()(e);t&&(r=g()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mn(Object(n),!0).forEach((function(t){(0,d.c)(e,t,n[t])})):s()?Object.defineProperties(e,s()(n)):Mn(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}var _n=function(e){for(var t=null;;){var n,r;if(null!==(n=e)&&void 0!==n&&null!==(n=n.dataset)&&void 0!==n&&n.dragId&&(null===(r=e)||void 0===r||null===(r=r.dataset)||void 0===r||!r.groupBarItemId)){t=e;break}if("ui-designer-root"===e.id)break;e=e.parentNode}return t},On=function(e){var t=(0,F.useContext)(ie),n=t.getKdesignerApi,r=t.fieldStatusSettingMode,o=(0,F.useMemo)((function(){return n()}),[]),a=o.data,i=o.meta,l=a.getRootId(),c=l===e[O],u=a.findControl(e[O]),s=null==u?void 0:u._Type_,f=(i.getControlMeta(s)||{}).IsContainer,p=void 0!==f&&f,v=(0,F.useCallback)((function(e){var t;e.stopPropagation();var n,r=e.currentTarget,o=(r=In(r)).dataset.dragId||null,i=[o],l=a.findControl(o),c=l._Type_,u=l.GroupParentId;!Vt(c)||null!==(t=r)&&void 0!==t&&null!==(t=t.dataset)&&void 0!==t&&t.groupBarItemId||(i=T()(n=a.findControlByCondition((function(e){return e.GroupParentId===u}))).call(n,(function(e){return e.Id})));Dn(i);var s=a.findControl(o),f=s._Type_,d=s.Name;hn(e,f,d)}),[l]),m=(0,F.useCallback)((function(e){var t,n=_n(e.currentTarget);!n||null!=n&&null!==(t=n.dataset)&&void 0!==t&&t.dragOver||n.setAttribute(W,"true")}),[]),g=(0,F.useCallback)((function(e){var t=_n(e.currentTarget);if(null!=t&&t.contains(e.relatedTarget)){var n=In(e.currentTarget);null!=n&&n.dataset.groupBarItemId&&null!=n&&n.dataset.dragDirection&&Nn(n)}else null!=t&&t.dataset.dragOver&&t.removeAttribute(W)}),[]),h=p?{onDragEnter:m,onDragLeave:g}:{};return Rn(Rn((0,d.c)({},Y,e[O]),h),{},{onDragStart:v,draggable:!c&&!r})},Bn=function(e){if(!e)return{};e.Id;var t=e.Status,n=e.Visibility,r=e.Key,o=(0,F.useContext)(ie),a=o.fieldStatusSettingMode,i=o.isPC,l=o.fieldStatusMap,c=null==l?void 0:l[r];return(t!==Ze.HIDDEN||a&&c)&&function(e,t){return e&&"mob"!==t||!e&&"pc"!==t}(i,n)&&"hidden"!==c?{}:(0,d.c)({},"data-hidden",!0)};function jn(e,t){var n=v()(e);if(i()){var r=i()(e);t&&(r=g()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ln(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jn(Object(n),!0).forEach((function(t){(0,d.c)(e,t,n[t])})):s()?Object.defineProperties(e,s()(n)):jn(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}var Un=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=le(e),r=fn();if(!e)return Ln({onMouseDown:r},n);var o=re(e),a=On(e),i=Bn(e);return t?Ln(Ln(Ln({},o),n),{},{onMouseDown:r,dragEvent:a},i):Ln(Ln(Ln({},o),n),{},{onMouseDown:r})},Kn=r(1252),Vn=r.n(Kn),zn=function(e){var t=e.field,n=Un(t),r=(t._Type_,t.Id),o=t.Name||r,a=Vn()(["undefined-control-root","text-omit"]);return k().createElement("div",(0,_.c)({},n,{className:a}),o)},Gn=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.isPC,o=void 0===r||r,a=n.excludeType,i=void 0===a?"":a,l=n.ctrlType,c=void 0===l?"":l,u=e[O],s=[],f=t[G].length,d=0;d<f;d++){var p=t[G][d],v=p[U];if(!(p[z]!==u||i&&i===v||c&&c!==v)){if(Vt(v)&&0!==Number(p.GroupIndex))continue;var m=ja(p,{isPC:o});m&&s.push(m)}}return s},Hn=r.p+"images/34cd7b92da1639c0f67b4f2cb967347a.png",qn=r(2416),Yn=r(5873),Wn=(0,F.memo)((function(e){var t,n=e.field,r=(0,F.useContext)(ie),o=r.isPC,a=r.getKdesignerApi,i=r.prefixCls,l=r.baseUrl,c=a().data,u=n.ColumnSpan,s=n.Gutter,f=n.BackColor,p=n.BackImage,v=n.CustomStyle,m=c.getData(),g=c.getRootId(),h=c.findControl,y=Un(n,!1),b=Gn(n,m,{isPC:o,excludeType:Ve},h),E=Vn()("".concat(i,"-root-panel"),(0,d.c)({},C()(t="".concat(i,"-root-panel-")).call(t,o?"isPC":"isMb"),!0)),I=(0,F.useMemo)((function(){var e;return k().createElement("div",{className:C()(e="".concat(i,"-root-panel-")).call(e,o?"isPC":"isMb","-empty")},k().createElement("img",{src:Hn,alt:"暂无数据",className:"empty-img"}),k().createElement("div",{className:"empty-desc"},"您还没有内容，点击或拖拽左侧内容新建"))}),[o]),x=(0,F.useCallback)((function(){return k().createElement("div",{className:"".concat(i,"-root-panel-content"),style:o?{padding:"24px"}:{}},o?k().createElement(qn.GridPanel,{column:u,gutter:s||[24,24],id:"root-grid-panel"},null==b?void 0:T()(b).call(b,(function(e,t){var n,r;return k().cloneElement(e,{itemKey:e.key||(null==e||null===(n=e.props)||void 0===n||null===(n=n.field)||void 0===n?void 0:n.key),columnSpan:null==e||null===(r=e.props)||void 0===r||null===(r=r.field)||void 0===r?void 0:r.ColumnSpan})}))):b)}),[o,b,u,s,qn.GridPanel]),N=null==m?void 0:m.name,A=o?qn.FormBanner:Yn.FormBanner,S=(0,F.useMemo)((function(){return v&&k().createElement(A,{title:N,image:Yt(l.picture,p)})}),[v,N,l.picture,p,A,Yt]),w=Pn();return k().createElement("div",{className:"".concat(i,"-root-panel-wrapper"),style:{backgroundColor:v&&f},"data-drag-id":g},k().createElement("div",(0,_.c)({id:"ui-designer-root"},y,{className:E},w),b.length?k().createElement("div",{className:"".concat(i,"-root-panel-scroll")},S,x()):k().createElement(k().Fragment,null,S,I)))}));Wn.displayName="RootPanel";var Qn=Wn,Xn=(0,F.forwardRef)((function(e,t){var n=e.prefixCls,r=e.value,o=e.maxLength,a=e.style,i=e.onBlur,l=(0,F.useState)(r),c=(0,f.c)(l,2),u=c[0],s=c[1];(0,F.useEffect)((function(){var e;null==t||null===(e=t.current)||void 0===e||e.select()}),[]);var d=(0,F.useCallback)((function(e){var t=e.target.value;s(t)}),[s]),p=function(){var e,n=document.getElementById(je);null==t||null===(e=t.current)||void 0===e||e.blur(),setTimeout((function(){null==n||n.focus()}),0)},v=(0,F.useCallback)((function(e){e.stopPropagation(),e.ctrlKey&&(e.preventDefault(),p()),e.keyCode===D.keyCode.ENTER&&p()}),[]);return k().createElement("input",{ref:t,style:a,type:"text",value:u,maxLength:o,className:"".concat(n,"-global-edit-control-name"),onBlur:i,onChange:d,onKeyDown:v})})),Zn=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=(0,F.useContext)(ie),r=n.prefixCls,o=n.getKdesignerApi,a=(0,F.useContext)(D.GlobalConfigContext).showMessage,i=o(),l=i.data,c=i.meta,u=e.Id,s=(0,F.useRef)(null),f=(0,F.useRef)(null),p=(0,F.useRef)(null),v=(0,F.useRef)(null),m=(0,F.useCallback)((function(){var e;f.current&&s.current&&(null==v||null===(e=v.current)||void 0===e||e.blur())}),[]),g=(0,F.useCallback)((function(){p.current=window.requestAnimationFrame(m)}),[]),h=(0,F.useCallback)((function(){ae().unmountComponentAtNode(s.current),document.body.removeChild(s.current),s.current=null,f.current=null;var e=document.getElementById("ui-designer-root");null==e||e.removeEventListener("scroll",g,!0),p.current&&window.cancelAnimationFrame(p.current)}),[]),y=(0,F.useCallback)((function(e){var t=(l.findControl(u)||{}).Name;e.target.value||a("控件名称不能为空");var n=e.target.value||t;n!==t&&l.batchUpdateControlPropertyValues((0,D.createUpdateAction)([[u,{Name:n}]])),h()}),[]),b=(0,F.useCallback)((function(e){f.current=e;var t,n,o,a=(null==e?void 0:e.getBoundingClientRect())||{},i=a.left,d=a.top,p=a.width,m=a.height,h=l.findControl(u),b=h.Name,E=h._Type_,I=c.getControlMetaEditor(E,"Name").MaxLength;s.current||(s.current=document.createElement("div"),s.current.style.cssText=C()(t=C()(n=C()(o="position: fixed;z-index: 0;left: ".concat(i+1,"px;top: ")).call(o,d,"px;width: ")).call(n,p-2,"px;height: ")).call(t,m,"px;background: transparent;"));ae().render(k().createElement(Xn,{ref:v,prefixCls:r,value:b,maxLength:I,style:{width:"100%",height:"".concat(m-1,"px")},onBlur:y}),s.current),document.body.appendChild(s.current);var x=document.getElementById("ui-designer-root");null==x||x.addEventListener("scroll",g,!0)}),[]),E=(0,F.useCallback)((function(e){var t=e.currentTarget;b(t)}),[]),I=(0,F.useCallback)((function(e){if(s.current&&e!==u)h(),D.eventBus.off("add-control-id",I);else if(t&&e===u){var n,r,o=document.querySelector(C()(n=C()(r="[".concat(q,'="')).call(r,u,'"] [')).call(n,ne,'="true"]'));if(!o)return;b(o)}}),[]);return(0,F.useEffect)((function(){return D.eventBus.on("add-control-id",I),function(){D.eventBus.off("add-control-id",I)}}),[]),(0,d.c)({onDoubleClick:E},ne,!0)},Jn=["field","children","tipsTrigger","dragEvent","wrapperStyle"],$n=function(e,t){var n=e.Key;return function(e){var t=e.MustInput,n=e.FieldRequired;return e.Status===Ze.DEFAULT&&(t||"2"===n||"3"===n)}(e)&&!Dt(t[n])||"mustInput"===t[n]},er=function(e){var t,n,r=(0,F.useContext)(ie),o=r.isPC,a=r.prefixCls,i=r.fieldStatusMap,l=e.field,c=e.children,u=e.tipsTrigger,s=e.dragEvent,f=void 0===s?{}:s,p=e.wrapperStyle,v=void 0===p?{}:p,m=(0,be.c)(e,Jn),g=l.Name,h=l.LabelWidth,y=(l.ShowTitle,l.HelpTips),b=l.TitleArea,E=(l.MustInput,l.Status,l.FieldRequired,l.Key),I=!mt(b),x=(0,_.c)({width:h},e.labelStyle),T=Zn(l),N=$n(l,i),A=(0,_.c)({padding:"0 12px",margin:"0 -12px"},v);return o?k().createElement("div",(0,_.c)({style:A},f),k().createElement(qn.FieldItem,(0,_.c)({className:Vn()((0,d.c)({},C()(n="".concat(a,"-item-")).call(n,i[E]),i[E])),labelClassName:"".concat(a,"-designer-field-item"),labelProps:T,labelText:g,required:N,labelStyle:x,showTitle:I,tips:y,tipsTrigger:o?u:"click",tipsDisabled:!0},m),c)):k().createElement(qn.FieldItem,(0,_.c)({className:Vn()((0,d.c)({},C()(t="".concat(a,"-item-")).call(t,i[E]),i[E])),labelClassName:"".concat(a,"-designer-field-item"),labelProps:T,labelText:g,required:N,labelStyle:x,showTitle:I,tips:y,tipsTrigger:o?u:"click",tipsDisabled:!0},m,f),c)},tr=(0,F.memo)((function(e){var t=e.value,n=(0,F.useContext)(ie).prefixCls;return k().createElement("p",{className:"".concat(n,"-readonly-text")},""===t||null==t?"-":t)})),nr=function(e){var t=e.type,n=e.field,r=void 0===n?{}:n,o=e.props,a=void 0===o?{}:o,i=e.isMb,l=void 0!==i&&i,c=r.Status,u=r.Key,s=(0,F.useContext)(ie),f=s.fieldStatusMap,d=s.fieldStatusSettingMode;if(c===De.READONLY&&!Dt(f[u])||"readonly"===f[u])return k().createElement(tr,{value:a.readonlyValue||(null==r?void 0:r.DefValue)});var p=(0,F.useMemo)((function(){return l?Yn[t]:qn[t]}),[t]),v=function(e,t){var n,r=t.fieldStatusMap,o=e.EmptyText,a=e.NoCodeDefValue,i=e.ShowClearButton,l=e.Status,c=e.MaxLength,u=e.MinLength,s=e._Type_,f=e.DateRangeEmptyText,d=e.DateRangeDefValue,p=e.Key,v={readOnly:!0,disabled:(n=l,n===De.DISABLED&&!Dt(r[p])||"disabled"===r[p])};if((0,Fe.isUndefined)(a)||et(s)||($e(s)?v.value=a&&Date.parse(a)?new Date(a):void 0:v.value=a),(0,Fe.isUndefined)(d)||(v.value=vt(d)),(0,Fe.isUndefined)(o)||(v.placeholder=o),Je(s)&&f){var m=f.start,g=void 0===m?"":m,h=f.end,y=void 0===h?"":h;v.placeholder=[g,y]}return(0,Fe.isUndefined)(i)||(v.allowClear=i),(0,Fe.isUndefined)(c)||(v.maxLength=c),(0,Fe.isUndefined)(u)||(v.mixLength=u),v}(r,{fieldStatusSettingMode:d,fieldStatusMap:f});return k().createElement(p,(0,_.c)({},v,a))},rr=function(e){return k().createElement(nr,(0,_.c)({isMb:!0},e))},or=(0,F.memo)((function(e){var t=e.field,n=Un(t),r={borderType:"bordered"};return k().createElement(er,(0,_.c)({},n,{field:t}),k().createElement(nr,{type:"Text",field:t,props:r}))}));or.displayName="TextFieldAp";var ar=or,ir=function(e){var t,n=e.field,r=Un(n),o=Rt(n),a=Bt(n),i={readonlyValue:Pt(n),options:_t(n),defaultValue:a,value:a,mode:Mt(null==n?void 0:n.SelectItemType)?"multiple":"single",showBgcBlock:Ot(n)};return w()(t=["Checkbox","Radio"]).call(t,o)&&(i.vertical=jt(null==n?void 0:n.TileTypePc)),k().createElement(er,(0,_.c)({},r,{field:n}),k().createElement(nr,{type:o,field:n,props:i}))},lr="setListTreeConfig",cr="setFormRules",ur="setBizRules",sr="setRefBillTreeData",fr="setTreeNodeChildren",dr="setInputForm",pr="setRefPropDisp",vr="getSvgLine",mr="setSwitchFieldTypes",gr="showDesignerError",hr="setAvailableAssociationFields",yr="updateAssociation",br="loadDesignerMetadata",Cr=["field"];function Er(e,t){var n=v()(e);if(i()){var r=i()(e);t&&(r=g()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ir(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Er(Object(n),!0).forEach((function(t){(0,d.c)(e,t,n[t])})):s()?Object.defineProperties(e,s()(n)):Er(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}var xr=function(e){var t,n=e.field,r=((0,be.c)(e,Cr),(0,F.useState)([])),o=(0,f.c)(r,2),a=o[0],i=o[1],l=(0,F.useContext)(ie).getKdesignerApi,c=Un(n),u=((0,F.useMemo)((function(){return l()}),[]).data.getData(),n.EmptyText,n.DataRage,n.showClearButton,n.Status),s=n.ShowType,d=n.PropsDisplay;n.Visibility;(0,F.useEffect)((function(){return D.eventBus.on(pr,p),function(){D.eventBus.off(pr,p)}}),[]);Ze.DISABLED;var p=(0,F.useCallback)((function(e){var t=T()(e).call(e,(function(e){return{fieldCaption:e.PropCap,fieldName:e.PropKey,items:e.items,type:e.type}}));i(t||[])}),[]);d&&(null===(t=d.split(","))||void 0===t||T()(t).call(t,(function(e){var t=(null==a?void 0:Ae()(a).call(a,(function(t){return t.fieldName===e})))||{},n=t.fieldCaption;t.type;return{ApType:"NoCodeTextFieldAp",FieldType:"NoCodeTextField",Id:t.fieldName,Name:n,_Type_:"NoCodeTextField"}}))),Ir({ShowSeqField:!0,SeqName:"序号",ShowBatExportBtn:!1,ShowBatImportBtn:!1,showAddRowBtn:!1,EntityData:Ir(Ir({},n.EntityData),{},{_Type_:"NoCodeEntryEntity"}),operations:["取消"]},n);return"1"===s?k().createElement(er,(0,_.c)({},c,{field:n}),k().createElement(nr,{type:"RefBill",field:n})):null},Tr=function(e){var t=e.field,n=Un(t),r=t.CounterDisplay,o=t.DefaultLines,a={showCount:!!(0,Fe.isUndefined)(r)||r,autoSize:{minRows:o||1,maxRows:o||1},style:{pointerEvents:"none"}};return k().createElement(er,(0,_.c)({},n,{field:t}),k().createElement(nr,{type:"Textarea",field:t,props:a}))},Nr=function(e){var t=e.field,n=Un(t),r=(t.EmptyText,t.DefValue,t.showClearButton,t.Status,t.ThousandsSeparator),o=t.Scale,a=t.Precision,i=t.Stepper,l={borderType:"bordered",readOnly:!0,allowClear:!1,formatter:(0,F.useCallback)((function(e){return r?zt("".concat(e)):String(e)}),[r]),decimalLength:o,maxLength:a,showStepper:i};return k().createElement(er,(0,_.c)({},n,{field:t}),k().createElement(nr,{type:"Number",field:t,props:l}))},Ar=new(Me())([["2","month"],["3","year"]]),Sr=function(e){var t=e.field,n=Un(t),r=t.FormatType,o={borderType:"bordered",showTime:"0"===r,readOnly:!0,allowClear:!1,picker:Ar.get(r)||"date"};return k().createElement(er,(0,_.c)({},n,{field:t}),k().createElement(nr,{type:"DatePicker",field:t,props:o}))},wr=function(e){var t=e.field,n=Un(t),r={borderType:"bordered",showTime:"0"===t.FormatType,readOnly:!0,allowClear:!1};return t=$t(t,"DateRangeDefValue"),k().createElement(er,(0,_.c)({},n,{field:t}),k().createElement(nr,{type:"DateRangePicker",field:t,props:r}))},Fr=r(1848),kr=r.n(Fr),Dr=["ShowSelChexkbox","ShowSeqField","SeqName","ShowBatExportBtn","ShowBatImportBtn"],Pr=["field","className","showSeqField","showSelChexkbox","seqName","operations","subControls","showBatImportBtn","showBatExportBtn","showAddRowBtn"],Mr=function(e){var t=e.field,n=Un(t),r=t.ShowSelChexkbox,o=t.ShowSeqField,a=t.SeqName,i=void 0===a?"序号":a,l=t.ShowBatExportBtn,c=t.ShowBatImportBtn,u=(0,be.c)(t,Dr),s=(0,F.useRef)(null);return"1"===u.ShowType?null:k().createElement(er,(0,_.c)({field:t,tipsTrigger:"click"},n,{wrapperStyle:{margin:0,padding:0}}),k().createElement(Rr,(0,_.c)({showSeqField:o,showSelChexkbox:r,seqName:i,ref:s,field:t,showBatExportBtn:l,showBatImportBtn:c},u)))},Rr=(0,F.forwardRef)((function(e,t){var n,r,o,a=e.field,i=e.className,l=(e.showSeqField,e.showSelChexkbox,e.seqName),c=e.operations,u=void 0===c?["复制","删除","更多"]:c,s=e.subControls,f=(e.showBatImportBtn,e.showBatExportBtn,e.showAddRowBtn,(0,be.c)(e,Pr),(0,F.useContext)(D.ConfigContext)),p=f.getPrefixCls,v=(f.prefixCls,(0,F.useContext)(ie).getKdesignerApi),m=(0,F.useMemo)((function(){return v()}),[]).data,g=p("nocode-designer-entry"),h=m.getData(),y=s||Gn(a,h,{},m.findControl),b=Vn()((0,d.c)((0,d.c)({},"".concat(g,"-body"),!0),i,i)),E=kr()(n=new Array(1)).call(n,"");return y.length?k().createElement("div",{className:"".concat(g),ref:t},k().createElement("div",{className:"".concat(g,"-toolbar")},k().createElement("div",{className:"".concat(g,"-toolbar-btns")},k().createElement(M.Button,{size:"small",className:"add-btn",icon:k().createElement(M.Icon,{prefix:"ncicon",type:"zengjia-yuan"}),type:"ghost"},"新增"),k().createElement(M.Button,{size:"small",className:"import-btn",icon:k().createElement(M.Icon,{prefix:"ncicon",type:"daoru"})},"导入"))),k().createElement("div",{className:b},k().createElement("div",{className:"".concat(g,"-grid-view")},k().createElement("ul",{className:C()(r="".concat(g,"-checkbox-col ")).call(r,g,"-sticky"),style:{left:0}},k().createElement("li",{className:"thead"},k().createElement("span",{className:"checkbox"})),k().createElement("li",null,k().createElement("span",{className:"checkbox"}))),k().createElement("ul",{className:C()(o="".concat(g,"-seqcol ")).call(o,g,"-sticky"),style:{left:40}},k().createElement("li",{className:"thead",title:l},l),k().createElement("li",null,"1")),k().createElement("div",{className:"".concat(g,"-main")},y),((null==y?void 0:y.length)>0||u.length>0)&&k().createElement("ul",{className:"".concat(g,"-sticky-right")},k().createElement("li",{className:"thead"},"操作"),T()(E).call(E,(function(e,t){return k().createElement("li",{key:t},T()(u).call(u,(function(e,t){return k().createElement("div",{key:t,className:"op"},e)})))})))))):k().createElement("div",{className:"".concat(g,"-empty")},"拖拽或点击添加内容")})),_r=r(2796),Or=r.n(_r),Br=r(8429),jr=r.n(Br),Lr=r(1900),Ur=r.n(Lr),Kr="INIT_FORM_DATA",Vr="UPDATE_FORM_DATA",zr="UPDATE_CONTROL_PROPS",Gr="ADD_CONTROL",Hr="DEL_CONTROL",qr="UPDATE_APP_FORM_LIST",Yr=(0,F.memo)((function(e){var t=e.prefixClass,n=e.defaultBatchValue,r=e.handleAddOption,o=(0,F.useState)(!1),a=(0,f.c)(o,2),i=a[0],l=a[1],c=(0,F.useState)(n),u=(0,f.c)(c,2),s=u[0],d=u[1];(0,F.useEffect)((function(){d(n)}),[n]);var p=k().createElement("div",{className:"".concat(t,"_batchaddpanel_form")},k().createElement("label",{className:"".concat(t,"_batchaddpanel_form_label")},"每行对应一个选项"),k().createElement(M.TextArea,{className:"".concat(t,"_batchaddpanel_form_textarea"),defaultValue:s,value:s,placeholder:"请输入",borderType:"bordered",count:!1,autoSize:{minRows:19,maxRows:19},maxLength:2e3,onChange:function(e){d(e.target.value)}})),v=(0,F.useCallback)((function(){var e,t=null==s?void 0:g()(e=s.split(/[\r\n\t]/)).call(e,Boolean),n=(0,R.c)(new(bn())(t));d(n.join("\n")),r(n),l(!1)}),[s,r]),m=(0,F.useCallback)((function(){d(n),l(!1)}),[n]),h=(0,F.useMemo)((function(){var e="".concat(t,"_batchaddpanel_footer");return k().createElement("div",{className:e},k().createElement("div",{className:"".concat(e,"_action")},k().createElement(M.Button,{size:"small",className:Vn()("".concat(e,"_action_btn"),"".concat(e,"_action_cancel")),onClick:m},"取消"),k().createElement(M.Button,{size:"small",type:"primary",className:Vn()("".concat(e,"_action_btn"),"".concat(e,"_action_copy")),onClick:v},"确定")))}),[v]);return k().createElement(k().Fragment,null,k().createElement("div",{className:"".concat(t,"-handle-batchadd"),onClick:function(){l(!0)}},"批量编辑"),i&&k().createElement(M.Modal,{className:"".concat(t,"_batchaddpanel"),bodyClassName:"".concat(t,"_batchaddpanel_body"),body:p,title:"批量编辑",onCancel:function(){return l(!1)},onOk:function(){return l(!1)},visible:i,height:560,footer:h}))})),Wr=r(5288),Qr=r.n(Wr),Xr=(0,F.memo)((function(e){var t=e.className,n=e.value,r=e.colorList,o=void 0===r?[]:r,a=e.onChange,i=e.renderIcon,l=(0,F.useContext)(ie),c=l.getPrefixCls,u=l.prefixCls,s=c&&c(u,"colorpicker-content"),d=(0,F.useState)(n),p=(0,f.c)(d,2),v=p[0],m=p[1];(0,F.useEffect)((function(){!(0,Fe.isUndefined)(n)&&m(n)}),[n]);return k().createElement("ul",{className:Vn()("".concat(s),t)},null==o?void 0:T()(o).call(o,(function(e){return k().createElement("li",{onClick:function(){return function(e){m(e),null==a||a(e)}(e)},key:e,className:"".concat(s,"-item"),style:{backgroundColor:e}},v===e&&("function"==typeof i?i():k().createElement(M.Icon,{className:Vn()("".concat(s,"-item-light")),prefix:"designericon",type:"shuzhankaibeifen"})))})))})),Zr=Xr,Jr=["#E0EFFF","#CFF7FF","#D6FFF8","#DCFAE4","#EDFFBD","#FFF8B8","#FFF1D4","#FFE7D6","#FFDBE0","#FFC4CF","#ECD6FF","#C7E5FF","#E5E5E5"],$r=["#276FF5","#16B0F1","#16B8B1","#1BA854","#77C404","#FDC200","#FF991C","#FF5F1F","#FB2323","#F90D58","#701DF0","#0E5FD8","#999999"],eo=function(e){var t=e.prefixClass,n=e.value,r=e.onChange,o=(0,F.useState)(!1),a=(0,f.c)(o,2),i=a[0],l=a[1],c=(0,F.useState)(n),u=(0,f.c)(c,2),s=u[0],p=u[1];(0,F.useEffect)((function(){!(0,Fe.isUndefined)(n)&&p(n)}),[n]);var v="".concat(t,"-colorpicker"),m=function(e){p(e),null==r||r(e),l(!1)},g=k().createElement(M.Dropdown.Menu,{style:{width:380,padding:8}},k().createElement("div",{className:"".concat(v,"-content")},k().createElement(Zr,{colorList:Jr,onChange:m,value:s}),k().createElement(Zr,{renderIcon:function(){return k().createElement(M.Icon,{className:Vn()("".concat(v,"-content-list-item-dark")),prefix:"designericon",type:"shuzhankaibeifen"})},colorList:$r,onChange:m,value:s})));return k().createElement(M.Dropdown,{popperClassName:"".concat(v,"-popup"),placement:"bottomLeft",menu:g,trigger:"click",visible:i,onVisibleChange:function(e){return l(e)}},k().createElement("div",{style:{backgroundColor:s},className:v},k().createElement(M.Icon,{className:Vn()("".concat(v,"-arrow"),(0,d.c)((0,d.c)({},"".concat(v,"-arrow-up"),i),"".concat(v,"-arrow-light"),w()($r).call($r,s))),prefix:"designericon",type:"zhankai3"})))};function to(e,t){var n=v()(e);if(i()){var r=i()(e);t&&(r=g()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function no(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?to(Object(n),!0).forEach((function(t){(0,d.c)(e,t,n[t])})):s()?Object.defineProperties(e,s()(n)):to(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}var ro=(0,F.memo)((function(e){var t=e.index,n=e.option,r=e.options,o=e.prefixClass,a=e.isNewOptionEdit,i=e.onDrop,l=e.handleEditOption,c=e.handleDeleteOption,u=e.bgcolorChecked,s=(0,F.useState)(!1),p=(0,f.c)(s,2),v=(p[0],p[1]),m=(0,F.useState)(a),g=(0,f.c)(m,2),h=g[0],y=g[1],b=(0,F.useState)(no({},n)),C=(0,f.c)(b,2),E=C[0],I=C[1],x=(0,F.useRef)(null),T=(0,F.useRef)(null),N=(0,F.useRef)(null),A="".concat(o,"-item");(0,F.useEffect)((function(){I(no({},n))}),[n]),(0,F.useEffect)((function(){T.current&&h&&T.current.select()}),[T,h]);var S=(0,F.useCallback)((function(e){e.persist();var t=e.target.value,n=no(no({},E),{},(0,d.c)((0,d.c)({},V,t),K,po(t)));I(n)}),[E]),w=(0,F.useCallback)((function(e){e.persist(),I((function(t){return no(no({},t),{},(0,d.c)({},K,e.target.value))}))}),[]),D=(M.Dropdown.Menu,"".concat(A,"-detail-item"),M.Input,n[V],E[V],"".concat(A,"-detail-input"),"".concat(A,"-detail-item"),M.Input,n[K],E[K],"".concat(A,"-detail-input"),function(){var e;if(y(!1),E[V]&&null!==(e=E[V])&&void 0!==e&&Qr()(e).call(e)){var t=Ae()(r).call(r,(function(e){return e[V]===E[V]}));t&&E[O]!==t[O]?c(n[O]):l(E)}else c(n[O])});return k().createElement(qn.Draggable,{index:t,onDrop:i},k().createElement("div",{className:"".concat(A,"-wrapper")},k().createElement("div",{className:A},u&&k().createElement(eo,{value:n[H],prefixClass:o,onChange:function(e){var t=no(no({},E),{},(0,d.c)({},H,e));I(t),l(t)}}),k().createElement("div",{title:"双击修改显示值",className:"".concat(A,"-content"),onDoubleClick:function(){y(!0),v(!1)}},h?k().createElement(M.Input,{ref:T,className:"".concat(A,"-content_edit"),borderType:"bordered",size:"large",defaultValue:n[V],onBlur:D,onPressEnter:D,onChange:function(e){e.persist();var t=e.target.value;I((function(e){return no(no({},e),{},(0,d.c)((0,d.c)({},V,t),K,po(t)))}))}}):k().createElement("p",null,n[V])),k().createElement("div",{className:"".concat(A,"-operate")},!h&&-1===n[O].indexOf(co)&&k().createElement(M.Icon,{className:"".concat(A,"-operate-edit"),prefix:"designericon",type:"bianji3",onClick:function(){y(!0)},ref:x}),k().createElement(M.Icon,{className:"".concat(A,"-operate-drag"),prefix:"designericon",type:"tuozhuailiebiao"}))),k().createElement("div",{title:"删除选项",className:"".concat(A,"-delete"),onClick:function(){return c(n[O])}},k().createElement(M.Icon,{prefix:"designericon",type:"xingshanchu"}))))})),oo=ro;function ao(e,t){var n=v()(e);if(i()){var r=i()(e);t&&(r=g()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function io(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ao(Object(n),!0).forEach((function(t){(0,d.c)(e,t,n[t])})):s()?Object.defineProperties(e,s()(n)):ao(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}var lo=r(7136).hooks.useOnDrop,co="other",uo=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=g()(e).call(e,(function(e){return!w()(t).call(t,e)})),r=0;r<n.length;r++){var o=r+Math.floor(Math.random()*(n.length-r)),a=[n[o],n[r]];n[r]=a[0],n[o]=a[1]}return C()(t).call(t,n)},so=(0,R.c)(we()($r).call($r,0,-1)),fo=function(e){return e&&Array.isArray(e)&&0!==e.length?T()(e).call(e,(function(e){return e[O]?e:io(io({},e),{},(0,d.c)({},O,(0,D.createUUid)()))})):e},po=function(e){return encodeURIComponent(e)},vo=function(e){var t=e.handleChange,n=e.value,r=e.className,o=e.editor,a=(e.locked,e.Name),i=e.Tips,l=(e.field,o.Enum,o.NameHidden),c=o.Default,u=o.Required,s=o.Title,p="".concat(r,"-custom-option"),v=(0,F.useState)((0,Fe.isUndefined)(n)?[]:fo(function(e){return Array.isArray(e)?e:null==e?void 0:e.ops}(n||c))||[]),m=(0,f.c)(v,2),h=m[0],y=m[1],b=(0,F.useState)(""),E=(0,f.c)(b,2),I=E[0],x=E[1],N=(0,F.useState)((0,Fe.isUndefined)(null==n?void 0:n.bgcSwitch)?null==c?void 0:c.bgcSwitch:null==n?void 0:n.bgcSwitch),A=(0,f.c)(N,2),S=A[0],P=A[1],R=(0,F.useRef)(null==h?void 0:h.some((function(e){return e[O].indexOf(co)>-1}))),_=(0,F.useRef)(null),B=(0,F.useRef)({});(0,F.useEffect)((function(){var e="";B.current={},null==h||h.forEach((function(t){var n,r=null==t?void 0:t[V];r&&(e="".concat(e?e+"\n"+r:r),((null===(n=t[O])||void 0===n?void 0:n.indexOf(co))>-1||"其他"===t[V]||"其他"===t[K])&&(R.current=!0))})),x(e)}),[h]),(0,F.useLayoutEffect)((function(){S||(so=uo(g()(so).call(so,(function(e){return!w()(Jr).call(Jr,e)}))))}),[S]),(0,F.useEffect)((function(){var e,t=g()(e=T()(h).call(h,(function(e){return e[H]}))).call(e,Boolean);so=uo(so,t)}),[]);var j=function(e){var n=[];if(Array.isArray(e))n=T()(e).call(e,(function(e,t){var n=(0,d.c)((0,d.c)((0,d.c)({},V,e),K,po(e)),O,(0,D.createUUid)());return S&&(n[H]=so[t%so.length]),n})),function(e){Array.isArray(e)&&(y(e),t({bgcSwitch:S,ops:e}))}(n);else{var r=(0,d.c)((0,d.c)((0,d.c)({},O,(0,D.createUUid)()),V,""),K,"");S&&(r[H]=so[((null==h?void 0:h.length)||0)%so.length]),_.current=r,n=h?null==h?void 0:C()(h).call(h,r):[r],y(n)}},L=function(e){if(null!=e&&e[O]){var n=null==h?void 0:T()(h).call(h,(function(t){return t[O]===e[O]?e:t}));y(n),t({bgcSwitch:S,ops:n})}},U=function(e){if(e){var n=g()(h).call(h,(function(t){return t[O]!==e}));y(n),0===n.length&&S===(null==c?void 0:c.bgcSwitch)?t({bgcSwitch:S,empty:!0}):t({bgcSwitch:S,ops:n})}},z=(0,F.useCallback)((function(e){if(e){var n=e.sourceIndex,r=e.destinationIndex,o=(0,Fe.cloneDeep)(h),a=ue()(o).call(o,n,1)[0];ue()(o).call(o,r,0,a),t({bgcSwitch:S,ops:o}),y(o)}}),[h,S,t]),G=lo(z);return k().createElement("div",{className:p},k().createElement("div",{className:"".concat(p,"-title")},k().createElement(D.NameTipWrapper,{nameHidden:l,className:r,name:a,tips:i,required:u,title:s}),k().createElement("div",{className:"".concat(p,"-title-colorswitch")},k().createElement("span",{className:"".concat(p,"-title-colorswitch-text")},"彩色"),k().createElement(M.Switch,{checked:S,onChange:function(e){P(e);var n=null==h?void 0:T()(h).call(h,(function(t,n){if(e&&(0,Fe.isUndefined)(t.Bgc)){var r=so[n%so.length];return io((0,d.c)({},H,r),t)}var o=(0,Fe.cloneDeep)(t);return delete o[H],o}));y(n),t({bgcSwitch:e,ops:n})}}))),k().createElement(qn.DragContainer,null,k().createElement("div",{className:Vn()("".concat(p,"-list"))},null==h?void 0:T()(h).call(h,(function(e,t){var n;return k().createElement(oo,{key:e[O],index:t,options:h,option:e,prefixClass:p,handleDeleteOption:U,handleEditOption:L,isNewOptionEdit:(null===(n=_.current)||void 0===n?void 0:n[O])===e[O],bgcolorChecked:S,onDrop:G})})))),k().createElement("div",{className:Vn()("".concat(p,"-handle"))},k().createElement("div",{className:Vn()("".concat(p,"-handle-addoption")),onClick:function(){return j()}},k().createElement(M.Icon,{prefix:"designericon",type:"zengjia-yuan"}),k().createElement("span",null,"添加选项")),k().createElement(Yr,{prefixClass:p,defaultBatchValue:I,handleAddOption:j})))};function mo(e,t){var n=v()(e);if(i()){var r=i()(e);t&&(r=g()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function go(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mo(Object(n),!0).forEach((function(t){(0,d.c)(e,t,n[t])})):s()?Object.defineProperties(e,s()(n)):mo(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}var ho=(0,R.c)(we()($r).call($r,0,-1)),yo=function(e){return w()(qe).call(qe,e)},bo=function(e,t,n){var r=t._Type_,o=t.EntityData,a=void 0===o?{}:o,i=[],l=v()(e).reduce((function(t,o){var a=n.getControlMetaProperty(r,o),l=n.getControlPropertyDefaultValue(r,o),c=a.Tag;return c!==Oe&&c!==Be||(t[o]=e[o],(0,Fe.isEqual)(e[o],l)&&i.push(o)),t}),{});return(0,yt.produce)(a,(function(e){(0,_.c)(e,l),i.forEach((function(t){delete e[t]}))}))},Co=function(e,t,n,r){r.globalConfig,r.dataContext,r.selectionContext,r.action,r.dataFactory,r.modelFactory;var o=r.metaReader;if(!n)return!1;var a=n._Type_,i=n.EntityData,l=void 0===i?{}:i;if(yo(a))return!1;var c=[],u=v()(t).reduce((function(e,n){var r=o.getControlMetaProperty(a,n),i=o.getControlPropertyDefaultValue(a,n),l=r.Tag;return l!==Oe&&l!==Be||(e[n]=t[n],(0,Fe.isEqual)(t[n],i)&&c.push(n)),e}),{}),s=(0,yt.produce)(l,(function(e){(0,_.c)(e,u),c.forEach((function(t){delete e[t]}))}));return v()(u).length?(0,D.createUpdateAction)([[e,{EntityData:s}]]):void 0},Eo=["ApType","EntityData",j,B,O,"Index","Features","FieldName",z],Io=function(e,t){return"string"==typeof e?e:(null==e?void 0:e[t])||(null==e?void 0:e.Default)},xo=function(e,t){var n=t.dataContext,r=t.metaReader,o=e._Type_,a=e.Id,i=e.ParentId,l=n.getRootId();if(ut(o))return e;var c=n.findControl(i),u=c._Type_,s=c.Status,f=r.getControlMeta(o),d=f.ApType,p=f.BaseType,m=r.getControlMeta(u).BaseType;if(d&&!yo(o)){var g,h=v()(e).reduce((function(t,n){var a=r.getControlMetaProperty(o,n).Tag;return(a===Oe||a===Be||w()(_e).call(_e,n))&&(t[n]=e[n]),t}),{});Vt(u)&&(h.ParentId=l);var y="".concat(p,"Id");if(e[y]=a,e.FieldType=o,e.ApType=Io(d,m),st(o)&&(null==h||null===(g=h.CustomContent)||void 0===g||null===(g=g.ops)||void 0===g||!g.length)){var b;ho=uo(ho);var C=r.getControlPropertyDefaultValue(o,"CustomContent"),E=T()(b=C.ops).call(b,(function(e,t){return go(go({},e),{},{Bgc:ho[t]})})),I={bgcSwitch:!0,ops:fo(E)};e.CustomContent=I,(0,_.c)(h,{CustomContent:I})}e.EntityData=h}return(it(u)||lt(u))&&(e._isEntryField_=!0),Vt(u)&&s&&(e.Status=s),e};function To(e,t){var n=v()(e);if(i()){var r=i()(e);t&&(r=g()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function No(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?To(Object(n),!0).forEach((function(t){(0,d.c)(e,t,n[t])})):s()?Object.defineProperties(e,s()(n)):To(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}var Ao=function(e,t){var n,r=e.SourceForm,o=e.BillEntityIdEx,a=new(bn())(t);return"1"===r||!(!o||w()(n=["bos_user","bos_adminorg"]).call(n,o))&&a.has(o)},So=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return t?[T()(t).call(t,(function(t){var a=t||{},i=a.label,l=a.value,c=a.children,u=a.icon,s=a.customParams,f=No({key:l,title:i},n);return u&&(f.icon=u),c?(c.length&&(f.children=e(c,{},null==s?void 0:s.currentApp,o)[0]),f.checkable=!1,f.selectable=!1):f.isLeaf=!0,r&&o.push(l),f})),o]:t},wo=function(e){var t=(null==e?void 0:e.FieldType)||e._Type_;return lt(t)&&"1"===e.ShowType||et(t)&&"2"===e.ShowType},Fo=function(e){var t;return w()(t=["NoCodeCreatorField","NoCodeCreateDateField","NoCodeModifierField","NoCodeModifyDateField","NoCodeBillNoField"]).call(t,e)},ko=function(e,t){var n=["NoCodeRefBillTable","NoCodeRichTextField","NoCodeGroupContainerAp","NoCodeGraphicDisplayField"];return w()(n).call(n,e)},Do=function(e,t){var n={},r="string"==typeof t?t:(0,R.c)(t).join(),o=w()(r).call(r,"_startdate")?r.replace("_startdate","").replace("_enddate",""):r,a=new(bn())(o.split(",")),i=[];return e.forEach((function(e){a.add(e.Key),n[e.Key]=e})),a.forEach((function(e){null!=n&&n[e]&&i.push(n[e])})),i},Po=function(e,t){var n,r;return e.EntityData=t,e.ApType=nt(t._Type_)?"NoCodeSystemAp":e._Type_,e._Type_=t._Type_,e.FieldType=t._Type_,n=e,r=t,v()(r).forEach((function(e){Or()(n,e)||(0,_.c)(n,(0,d.c)({},e,r[e]))})),e},Mo=function(e,t){var n,r,o,a,i=t||{},l=i.Id,c=i.SourceForm,u=i.PropsDisplay,s=i.inner2Outer,f=i.BillEntityIdEx,d=(0,Fe.cloneDeep)(e),p=new(bn())(u?u.split(","):[]),v=f||"".concat(l,"_table"),m=(null==d||null===(n=d.entitymeta)||void 0===n?void 0:n.Items)||[],g=(null==d||null===(r=d.formmeta)||void 0===r?void 0:r.Items)||[],h={},y=[],b=w()(o=["bos_user","bos_adminorg"]).call(o,v),C=new(bn());return null==d||null===(a=d.formmeta)||void 0===a||null===(a=a.Items)||void 0===a||a.forEach((function(e){h[e.Id]=e})),m.length&&(g.forEach((function(e){(Vt(e._Type_)||ct(e._Type_))&&C.add(e.Id)})),m.forEach((function(e){var t,n,r=Po((null==h?void 0:h[e.Id])||{},e);if(r._isEntryField_=!0,"1"===c)!(s||!Fo(e._Type_))||ko(e._Type_)||Vt(e._Type_)||ct(e._Type_)||(r.isShow=!s||p.has(e.Key),y.push(r));else if(b||(Fo(e._Type_)||C.has(null==r?void 0:r.ParentId))&&!ko(r._Type_)){var o=p.has(e.Key);Je(e._Type_)&&(t=e.Key,n=p,o=(0,R.c)(n).some((function(e){return w()(e).call(e,t)}))),r.isShow=o,y.push(r)}}))),y},Ro=function(e,t,n,r,o,a,i){var l=[],c=e.reduce((function(e,a){var i,c=r.findControl(a)||{},u=c.ParentId,s=c.Key,f=c.RefTableId,d=c.RefBillId,p=c._Type_,v=r.findControl(u)||{},m=v._Type_,g=v.SourceForm,h=v.BillEntityIdEx,y=v.PropsDisplay;if(lt(m)){var b,E="1"!==g||h?h:"".concat(u,"_table"),I=a.replace("_".concat(u),"");"1"!==g&&w()(b=t[E].ids).call(b,I)||n({key:Hr,payload:{form:E,id:I}});var x=new(bn())(y?y.split(","):[]),T=s.toLowerCase().replace("_".concat(u.toLowerCase()),"");Je(p)?(x.delete("".concat(T,"_startdate")),x.delete("".concat(T,"_enddate"))):x.delete(T);var N=(0,R.c)(x).join();l=[[u,{PropsDisplay:N}]]}return d&&delete o[d],f&&A()(o).forEach((function(e){e.Id!==f&&e.ParentId!==f||delete o[e.Id]})),C()(i=[]).call(i,(0,R.c)(e),[a])}),[]);a(o),jr().all([r.deleteControl((0,D.createDeleteAction)(c)),r.batchUpdateControlPropertyValues((0,D.createUpdateAction)(l))]).then((function(){null==i||i()})).catch((function(e){}))},_o=function(e,t){var n,r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[{},{}],a=e.Id,i=e.Key,l=e._Type_,c=e.EntityData,u=(0,Fe.cloneDeep)(e),s=t.toLowerCase(),f=i.toLowerCase(),d=w()(f).call(f,s)?f:C()(n="".concat(f,"_")).call(n,s),p=w()(a).call(a,t)?a:C()(r="".concat(a,"_")).call(r,t);return["isShow","UploadDefValue","PictureDefValue","NoCodeDefValue","FieldRequired","Status","Visibility"].forEach((function(e){delete u[e],delete c[e]})),Je(l)&&(u.StartDateFieldKey="".concat(d,"_startdate"),u.EndDateFieldKey="".concat(d,"_enddate"),u.EntityData.StartDateFieldKey="".concat(d,"_startdate"),u.EntityData.EndDateFieldKey="".concat(d,"_enddate")),No(No(No({},u),{},{Id:p,Key:d,ParentId:t,FieldId:p},o[0]),{},{EntityData:No(No({},c),{},{Id:p,Key:d,ParentId:t},o[1]),_isEntryField_:!0})},Oo=function(e,t,n,r){var o=t.reduce((function(e,t){return No(No({},e),{},(0,d.c)({},t.Id,t))}),{}),a=[],i=e.reduce((function(e,t){var i=No({},t);if(t.isShow){var l,c;a.push(i.Key),delete i.isShow;var u=function(e,t,n){if(t){var r=n.getDefaultData(e._Type_),o=[{},{}];return Xe.forEach((function(a){var i=n.getControlMetaProperty(e._Type_,a).Tag,l=i===Oe||i===Be,c=t[a]||r[a];l?(c&&(o[1][a]=c),c&&(o[0][a]=c)):c&&(o[0][a]=c)})),o}}(t,o[C()(l="".concat(i.Id,"_")).call(l,n)],r);return C()(c=[]).call(c,(0,R.c)(e),[_o(i,n,u)])}return e}),[]);return[i,a]},Bo=["dragEvent"];function jo(e,t){var n=v()(e);if(i()){var r=i()(e);t&&(r=g()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jo(Object(n),!0).forEach((function(t){(0,d.c)(e,t,n[t])})):s()?Object.defineProperties(e,s()(n)):jo(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}var Uo=function(e){var t,n=e.field,r=(e.rootWidth,e.rowHeight),o=e.headHeight,a=e.isMb,i=void 0!==a&&a,l=e.autoRowHeight,c=n.Id,u=n.Key,s=n.Name,f=n.ListFieldId,p=n.HelpTips,v=n.Status,m=Un(n),g=m.dragEvent,h=(0,be.c)(m,Bo),y=(0,F.useContext)(ie),b=y.prefixCls,E=y.fieldStatusMap,I=y.getKdesignerApi,x=y.billPropsData,T=y.fieldStatusSettingMode,N=(I()||{}).data,A=(0,F.useMemo)((function(){var e=N.getParentControl(c),t=N.findControl(c);return e.BillEntityIdEx!==N.getRootId()&&(!(null!=t&&t.RefBillId)&&!(null!=t&&t.RefTableId)&&lt(e._Type_)&&Ao(e,(null==x?void 0:x.innerForm)||[]))}),[x,c]),S=A?Zn(n):{},w=Vn()(["".concat(b,"-entry-field"),(0,d.c)({"item-mb":i,"item-hidden":v===Ze.HIDDEN},C()(t="".concat(b,"-item-")).call(t,E[u]),E[u])]),D=s,P={};return!l&&(P={height:r}),k().createElement("div",(0,_.c)({className:w},h,g,{"data-entry-field":n.Key,"data-enable-click":"permission"!==T||A}),k().createElement("div",(0,_.c)({className:"cellHead",style:{height:o}},S),k().createElement(qn.FieldItem.Label,{value:"fseq"===f?"#":D,required:$n(n,E),tips:p,prefixCls:"nc-field-item",style:{marginBottom:"0",fontWeight:"bold"}})),k().createElement("div",{className:"cellContent",style:Lo({},P)}))},Ko=function(e){var t,n,r,o,a=e.field,i=a.FieldType,l=a.FileMaxSize,c=a.UploadNum,u=a.ImageFileType,s=a.UploadPrompt,f=a.ButtonText,d=(0,F.useContext)(ie).getKdesignerApi,p=Un(a),v=d().meta,m=v.getControlPropertyDefaultValue,h=(0,v.getControlMetaEditor)(i,"ImageFileType").Enum,y=m(i,"FileMaxSize"),b=m(i,"ImageFileType"),E=u||b,I=T()(t=E.split(",")).call(t,(function(e){return g()(h).call(h,(function(t){return t.Id===e}))[0].Name})),x=s?C()(n=C()(r=C()(o="请上传小于".concat(l||y,"M的")).call(o,I.join("，"),"文件，文件个数不少于")).call(r,(null==c?void 0:c.min)||0,"个，不多于")).call(n,(null==c?void 0:c.max)||1,"个。"):"";return k().createElement(er,(0,_.c)({},p,{field:a}),k().createElement(qn.Picture,(0,_.c)({style:{fontSize:"12px",textAlign:"left",pointerEvents:"none"},noticeInfo:x,buttonText:f,pasteThumbnail:!1},{})))},Vo=r(5680),zo=r.n(Vo),Go=function(e){var t,n,r,o=e.field,a=o.FieldType,i=o.FileMaxSize,l=o.UploadNum,c=o.UploadModel,u=(o.UploadPrompt,o.ButtonText),s=o.AttachmentFileType,f=(0,F.useContext)(ie).getKdesignerApi,d=Un(o),p=f().meta,v=p.getControlPropertyDefaultValue,m=(p.getControlMetaEditor,v(a,"FileMaxSize")),g=C()(t=C()(n=C()(r="请上传小于".concat(i||m,"M的")).call(r,null==s?void 0:zo()(s).call(s,".",""),"文件，文件个数不少于")).call(n,(null==l?void 0:l.min)||0,"个，不多于")).call(t,(null==l?void 0:l.max)||1,"个。");return k().createElement(er,(0,_.c)({},d,{field:o}),k().createElement(qn.Attachment,(0,_.c)({style:{fontSize:"12px",textAlign:"left",pointerEvents:"none"},fileList:[],mode:c,uploadNum:l,noticeInfo:g,buttonText:u,pasteThumbnail:!1},{})))},Ho=function(e){var t=e.field,n=Un(t),r=window.__kd_cdnPath__||window.__domainurl__,o=t.NoCodeDefValue,a=t.DefaultHeight,i=t.Status,l=t.AutoHeight,c=i===Ze.READONLY,u=i===Ze.DISABLED;return k().createElement(er,(0,_.c)({},n,{field:t}),k().createElement(qn.RichText,{height:a,autoHeight:l,content:o,srcUrl:r,readOnly:c,disabled:u,isDesigner:!0}))},qo=function(e){var t=e.field,n=Un(t),r=t.Content,o=t.Margin,a=t.DefaultHeight,i=t.AutoHeight,l=Jt(o),c=l.margin,u=l.marginTop,s=l.marginRight,f=l.marginBottom,d=l.marginLeft,p={marginTop:"".concat(u,"px"),marginRight:"".concat(s,"px"),marginBottom:"".concat(f,"px"),marginLeft:"".concat(d,"px")},v=-1===c?p:{margin:"".concat(c,"px")};return k().createElement("div",{className:"graphic-display-ap",style:"0"!==c?v:{}},k().createElement(er,(0,_.c)({},n,{field:t}),k().createElement(qn.GraphicDisplay,{content:r,autoHeight:i,defaultHeight:a})))},Yo=r(1184),Wo=function(e){var t,n=(0,F.useContext)(ie),r=(n.isPC,n.getKdesignerApi),o=(0,F.useMemo)((function(){return r()}),[]).data,a=(o.getData(),e.ParentId),i=e.GroupParentId,l=o.getSubControls(a);return En()(t=g()(l).call(l,(function(e){return e.GroupParentId===i}))).call(t,(function(e,t){return Number(e.GroupIndex)-Number(t.GroupIndex)}))};function Qo(e,t){var n=v()(e);if(i()){var r=i()(e);t&&(r=g()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qo(Object(n),!0).forEach((function(t){(0,d.c)(e,t,n[t])})):s()?Object.defineProperties(e,s()(n)):Qo(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}var Zo=function(e){if(!e)return{};var t=le({Id:e}),n=fn(),r=re({Id:e}),o=On({Id:e});return Xo(Xo(Xo({},t),{},{onMouseDown:n},r),o)},Jo=["controlId","parentColumn","className"];function $o(e,t){var n=v()(e);if(i()){var r=i()(e);t&&(r=g()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function ea(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$o(Object(n),!0).forEach((function(t){(0,d.c)(e,t,n[t])})):s()?Object.defineProperties(e,s()(n)):$o(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}var ta=function(e){var t=e.controlId,n=e.parentColumn,r=e.className,o=(0,be.c)(e,Jo),a=(0,F.useContext)(ie),i=a.prefixCls,l=a.getKdesignerApi,c=a.isPC,u=l().data,s=u.getData(),f=u.findControl,d=Gn({Id:t},s,{isPC:c,excludeType:Ve},f);return k().createElement(qn.GridPanel,(0,_.c)({column:0===d.length?1:n},o),d.length>0?T()(d).call(d,(function(e){var t,r,o,a=(null==e||null===(t=e.props)||void 0===t?void 0:t.field)||{},i=a.ColumnSpan,l=a.key,c=a.id,u=(o=i,Math.min(n,Number(o)||4));return null!=e&&null!==(r=e.props)&&void 0!==r&&null!==(r=r.field)&&void 0!==r&&r.ColumnSpan&&(e.props.field.ColumnSpan=u),k().cloneElement(e,{key:c,itemKey:e.key||l,columnSpan:u})})):k().createElement("div",(0,_.c)({className:Vn()(r,"".concat(i,"_group_item_dropbox")),columnSpan:4},o),"拖拽内容到这里"))},na=(0,F.memo)((function(e){var t=e.id,n=e.hidden,r=e.defaultBar,o=e.handleItemClick,a=(0,F.useContext)(ie),i=a.getKdesignerApi,l=a.fieldStatusMap,c=(a.prefixCls,a.fieldStatusSettingMode),u=(0,F.useMemo)((function(){return i()}),[]).data.findControl(t),s=u.Status,f=u.Key,d=Zo(t),p=(0,_.c)({},((0,Yo.c)(d),d)),v=Zn({Id:t},!1),m=null==l?void 0:l[f];return k().cloneElement(r,ea(ea(ea({id:t,"data-group-bar-item-id":t},p),v),{},{"data-enable-click":"permission"!==c,style:{color:n?"#cccccc":"inherit",opacity:(s!==Ze.HIDDEN||c&&m)&&"hidden"!==m?"1":"0.5"},onClick:function(e){o(t)}}))}));na.displayName="TabBar";var ra=function(e){var t,n=e.id,r=e.columnSpan,o=(0,F.useContext)(ie),a=o.getKdesignerApi,i=o.fieldStatusMap,l=o.prefixCls,c=(0,F.useMemo)((function(){return a()}),[]).data.findControl(n),u=(c.Status,c.Key),s=Bn(c);return k().createElement(ta,(0,_.c)({key:n,controlId:n,parentColumn:r,"data-group-container-item":n,className:Vn()((0,d.c)({},C()(t="".concat(l,"-item-")).call(t,i[u]),i[u]))},s))},oa=function(e){var t,n=e.field,r=e.columnSpan,o=(0,F.useContext)(ie),a=o.getKdesignerApi,i=o.fieldStatusMap,l=o.prefixCls,c=o.fieldStatusSettingMode,u=(0,F.useMemo)((function(){return a()}),[]),s=u.selection,p=(u.data,n.Id),v=n.Key,m=(n.Name,n.TitleArea,n.Collapse),g=(n.HelpTips,n.ColumnSpan,(0,F.useState)(p)),h=(0,f.c)(g,2),y=h[0],b=h[1],E=(0,F.useRef)([]),I=(0,F.useRef)(null),x=(0,F.useReducer)((function(e){return e+1}),0),T=(0,f.c)(x,2);T[0],T[1];(0,F.useEffect)((function(){if(I.current){var e=I.current.querySelector("[data-tabs-header]");null==e||e.setAttribute("data-group-bar",p)}}),[]);var N=Wo(n).reduce((function(e,t){var n=t.Id,o=t.Name,a=t.TitleArea,i=t.HelpTips;return e.push({id:n,name:o,titleHidden:mt(a),tips:i,key:n,label:o,children:k().createElement(ra,{id:n,columnSpan:r})}),e}),[]);E.current=N,(0,F.useEffect)((function(){var e=s.getSelection()||[],t=e[0];if(t){var n,r=Ae()(N).call(N,(function(e){return e.id===t}))?null==e?void 0:e[0]:null==N||null===(n=N[0])||void 0===n?void 0:n.id;b(r),document.querySelectorAll("[".concat(Q,"=true]")).forEach((function(t){w()(e).call(e,t[q])||null==t||t.removeAttribute(Q)}))}}),[N.length]);var A=function(e){"permission"!==c&&y!==e&&(rn(y,e),b(e),s.setSelect(e))},S=function(){var e,t=s.getActiveSelectedId();(null===(e=E.current)||void 0===e?void 0:Ae()(e).call(e,(function(e){return e.id===t})))&&y!==t&&b(t)};(0,F.useEffect)((function(){var e=s.addSelectChangeListener(S);return function(){e()}}),[S]);var D=Zo(y),P=(0,_.c)({},((0,Yo.c)(D),D)),M=Bn(n),R=1===N.length?M:{};return k().createElement(qn.Tabs,(0,_.c)({ref:I,activeKey:y,allowCollapse:m,onChange:A,"data-group-container":p},P,R,{"data-enable-click":"permission"!==c,renderTabBar:function(e,t){return k().createElement(na,(0,_.c)({},e,{defaultBar:t,handleItemClick:A}))},items:N,className:Vn()((0,d.c)({},C()(t="".concat(l,"-item-")).call(t,i[v]),1===N.length&&i[v]))}))},aa=["dragEvent"],ia=(0,F.memo)((function(e){var t=e.field,n=(0,F.useContext)(ie).prefixCls,r=Un(t),o=r.dragEvent,a=(0,be.c)(r,aa),i=t.Name;t.EmptyText,t.DataRage,t.showClearButton,t.Status,t.Visibility;return k().createElement("div",(0,_.c)({className:"".concat(n,"-bizbutton")},a,o),k().createElement(qn.BtnField,null,i))}));ia.displayName="NoCodeBizButtonAp";var la={NoCodeTextField:ar,NoCodeSelectItemField:ir,NoCodeRefBillField:xr,NoCodeMulRefBillField:xr,NoCodeTextAreaField:Tr,NoCodeDecimalField:Nr,NoCodeDateField:Sr,NoCodeDateRangeField:wr,NoCodeEntryEntity:Mr,NoCodeRefBillTable:Mr,NoCodeEntryFieldAp:Uo,NoCodeImageUploadField:Ko,NoCodeAttachmentUploadField:Go,NoCodeCreateDateField:ar,NoCodeCreatorField:ar,NoCodeModifyDateField:ar,NoCodeModifierField:ar,NoCodeBillNoField:ar,NoCodeGroupContainerAp:oa,NoCodeBizButtonAp:ia,NoCodeRichTextField:Ho,NoCodeGraphicDisplayField:qo},ca=function(e){var t=e.field,n=Un(t);return k().createElement(er,(0,_.c)({},n,{field:t}),k().createElement(rr,{type:"Text",field:t,props:{}}))},ua=function(e){var t,n=e.field,r=n._Type_,o=n.ShowType,a=Un(n),i=Rt(n),l=Bt(n),c={readonlyValue:Pt(n),options:_t(n),defaultValue:l,value:l,multiple:Mt(null==n?void 0:n.SelectItemType),showBgcBlock:Ot(n)};return w()(t=["Checkbox","Radio"]).call(t,i)&&(c.vertical=jt(null==n?void 0:n.TileTypePc)),et(r)&&"2"===o?null:k().createElement(er,(0,_.c)({},a,{field:n}),k().createElement(rr,{type:i,field:n,props:c}))},sa=function(e){var t=e.field,n=Un(t),r=t.CounterDisplay,o=t.DefaultLines,a={showCount:!!(0,Fe.isUndefined)(r)||r,autoSize:{minRows:o,maxRows:o}};return k().createElement(er,(0,_.c)({},n,{field:t}),k().createElement(rr,{type:"Textarea",field:t,props:a}))},fa=function(e){var t=e.field,n=Un(t),r=(t.EmptyText,t.DefValue,t.showClearButton,t.Status,t.ThousandsSeparator),o=t.Scale,a=t.Precision,i=t.Stepper,l={borderType:"bordered",readOnly:!0,allowClear:!1,formatter:(0,F.useCallback)((function(e){return r?"".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,","):String(e)}),[r]),decimalLength:o,showStepper:i,maxLength:a};return k().createElement(er,(0,_.c)({},n,{field:t}),k().createElement(rr,{type:"Number",field:t,props:l}))},da={0:"second",1:"day"},pa=function(e){var t=e.field,n=Un(t),r={borderType:"bordered",picker:da[t.FormatType||"1"]};return k().createElement(er,(0,_.c)({},n,{field:t}),k().createElement(rr,{type:"DatePicker",field:t,props:r}))},va={0:"second",1:"day"},ma=function(e){var t=e.field,n=Un(t),r={borderType:"bordered",picker:va[t.FormatType||"1"]};return k().createElement(er,(0,_.c)({},n,{field:t}),k().createElement(rr,{type:"DateRangePicker",field:t,props:r}))},ga=function(e){var t,n,r,o,a=e.field,i=(0,F.useContext)(ie).getKdesignerApi,l=a.FieldType,c=a.FileMaxSize,u=a.UploadNum,s=a.ImageFileType,f=i().meta,d=f.getControlPropertyDefaultValue,p=(0,f.getControlMetaEditor)(l,"ImageFileType").Enum,v=d(l,"FileMaxSize"),m=d(l,"ImageFileType"),h=s||m,y=T()(t=h.split(",")).call(t,(function(e){return g()(p).call(p,(function(t){return t.Id===e}))[0].Name})),b=Un(a),E={disabled:!0,noticeInfo:C()(n=C()(r=C()(o="请上传小于".concat(c||v,"M的")).call(o,y.join(),"文件，文件个数不少于")).call(r,(null==u?void 0:u.min)||0,"个，不多于")).call(n,(null==u?void 0:u.max)||1,"个。")};return k().createElement(er,(0,_.c)({},b,{field:a}),k().createElement(rr,{type:"Picture",field:a,props:E}))},ha=function(e){var t,n,r,o=e.field,a=o.FieldType,i=o.FileMaxSize,l=o.UploadNum,c=o.UploadModel,u=o.UploadPrompt,s=o.ButtonText,f=o.AttachmentFileType,d=(0,F.useContext)(ie).getKdesignerApi,p=Un(o),v=(0,d().meta.getControlPropertyDefaultValue)(a,"FileMaxSize"),m=u?C()(t=C()(n=C()(r="请上传小于".concat(i||v,"M的")).call(r,null==f?void 0:zo()(f).call(f,".",""),"文件，文件个数不少于")).call(n,(null==l?void 0:l.min)||0,"个，不多于")).call(t,(null==l?void 0:l.max)||1,"个。"):"";return k().createElement(er,(0,_.c)({},p,{field:o}),k().createElement(Yn.Attachment,(0,_.c)({style:{fontSize:"12px",textAlign:"left"},fileList:[],mode:c,uploadNum:l,noticeInfo:m,buttonText:s},{disabled:!0})))},ya=function(e){var t=e.field,n=Un(t),r=t.NoCodeDefValue,o=t.DefaultHeight,a=t.AutoHeight,i=t.Status===Ze.READONLY,l=Jt(r);return k().createElement(er,(0,_.c)({},n,{field:t}),k().createElement(Yn.RichText,{readOnly:i,content:(null==l?void 0:l.value)||"",height:o,autoHeight:a}))},ba=function(e){var t=e.field,n=Un(t),r=t.Content,o=t.Margin,a=t.DefaultHeight,i=t.AutoHeight,l=Jt(o),c=l.margin,u=l.marginTop,s=l.marginRight,f=l.marginBottom,d=l.marginLeft,p={marginTop:"".concat(u,"px"),marginRight:"".concat(s,"px"),marginBottom:"".concat(f,"px"),marginLeft:"".concat(d,"px")},v=-1===c?p:{margin:"".concat(c,"px")};return k().createElement("div",{className:"graphic-display-ap",style:"0"!==c?v:{}},k().createElement(er,(0,_.c)({},n,{field:t}),k().createElement(qn.GraphicDisplay,{content:r,autoHeight:i,defaultHeight:a})))},Ca=["controlId"],Ea=["defaultBar","handleItemClick"];function Ia(e,t){var n=v()(e);if(i()){var r=i()(e);t&&(r=g()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function xa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ia(Object(n),!0).forEach((function(t){(0,d.c)(e,t,n[t])})):s()?Object.defineProperties(e,s()(n)):Ia(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}var Ta=function(e){var t=e.controlId,n=(0,be.c)(e,Ca),r=(0,F.useContext)(ie),o=r.prefixCls,a=r.getKdesignerApi,i=r.isPC,l=a().data,c=l.getData(),u=l.findControl,s=Gn({Id:t},c,{isPC:i,excludeType:Ve},u);return k().createElement(Yn.GridPanel,(0,_.c)({gutter:[24,24]},n),s.length>0?s:k().createElement("div",(0,_.c)({className:"".concat(o,"_group_item_dropbox")},n),"拖拽内容到这里"))},Na=(0,F.memo)((function(e){var t=e.defaultBar,n=e.handleItemClick,r=(0,be.c)(e,Ea),o=r.id,a=r.tips,i=Zo(o),l=Zn({Id:o},!1);return k().cloneElement(t,xa(xa(xa({id:o,"data-group-bar-item-id":o,tips:a},i),l),{},{onClick:function(e){n(o),i.onClick(e)}}))}));Na.displayName="TabBar";var Aa=function(e){var t=e.id;return k().createElement(Ta,{key:t,controlId:t,"data-group-container-item":t})},Sa=function(e){var t=e.field,n=(0,F.useContext)(ie),r=n.getKdesignerApi,o=(n.prefixCls,r().selection),a=t.Id,i=(t.Name,t.TitleArea,t.HelpTips,t.Collapse),l=(0,F.useState)(a),c=(0,f.c)(l,2),u=c[0],s=c[1],d=(0,F.useRef)([]),p=(0,F.useRef)(null);(0,F.useEffect)((function(){if(p.current){var e=p.current.querySelector("[data-tabs-header]");null==e||e.setAttribute("data-group-bar",a)}}),[]);var v=Wo(t).reduce((function(e,t){var n=t.Id,r=t.Name,o=t.TitleArea,a=t.HelpTips;return e.push({id:n,name:r,titleHidden:mt(o),tips:a,key:n,label:r,children:k().createElement(Aa,{id:n})}),e}),[]);d.current=v;var m=function(){var e,t=o.getActiveSelectedId();(null===(e=d.current)||void 0===e?void 0:Ae()(e).call(e,(function(e){return e.id===t})))&&s(t)};(0,F.useEffect)((function(){var e=o.getSelection();null!=e&&e[0]&&(Ae()(v).call(v,(function(t){return t.id===(null==e?void 0:e[0])}))&&s(null==e?void 0:e[0]))}),[v.length]),(0,F.useEffect)((function(){var e=o.getSelection();if((null==e?void 0:e[0])===u&&!Ae()(v).call(v,(function(e){return e.id===u}))){var t=null==v?void 0:v[0].id;rn(u,t,(function(e){e.removeAttribute(Q)})),s(t)}}),[v,u]),(0,F.useEffect)((function(){m();var e=o.addSelectChangeListener(m);return function(){e()}}),[]);var g=function(e){o.setSelect([e]),s(e)},h=Zo(u);return k().createElement(Yn.Tabs,(0,_.c)({ref:p,activeKey:u,allowCollapse:i,onChange:g,"data-group-container":a,items:v,renderTabBar:function(e,t){return k().createElement(Na,(0,_.c)({},e,{defaultBar:t,handleItemClick:g}))}},h))},wa=["NoCodeImageUploadField","NoCodeAttachmentUploadField"],Fa=function(e){var t=e.field,n=t._Type_,r=(t.ShowBatImportBtn,t.ShowBatExportBtn,t.ShowSeqField),o=(t.ShowType,(0,F.useContext)(ie)),a=o.getKdesignerApi,i=o.prefixCls,l=a(),c=l.data,u=l.meta,s=c.getData(),f=c.findControl,d=u.getControlPropertyDefaultValue(n,"SeqName"),p=t.SeqName,v=void 0===p?d:p,m=Gn(t,s,{isPC:!1},f),g=(0,F.useMemo)((function(){var e,t;if(r)return"".concat(v,"：1");var n=Ae()(m).call(m,(function(e){var t,n=(null==e||null===(t=e.props)||void 0===t?void 0:t.field)._Type_;return!w()(wa).call(wa,n)}));if(!n)return"-";var o=null==n||null===(e=n.props)||void 0===e?void 0:e.field,a=o.Name,i=o.DefValue;return C()(t="".concat(a,"：")).call(t,i||"-")}),[r,v,m]);return m.length?k().createElement(k().Fragment,null,k().createElement("div",{className:"".concat(i,"-entry-mb-operator")},k().createElement(M.Button,{type:"ghost",size:"small",icon:k().createElement(M.Icon,{prefix:"ncicon",type:"zengjia-yuan"})},"新增"),k().createElement(M.Button,{size:"small",icon:k().createElement(M.Icon,{prefix:"ncicon",type:"xuanze"})},"选择")),k().createElement("div",{className:"".concat(i,"-entry-mb-item")},k().createElement(Yn.CollapsePanel,{isOpen:!0,title:g,extra:k().createElement(M.Icon,{prefix:"designericon",type:"shanchu"}),transitionDuration:0},T()(m).call(m,(function(e,t){return k().createElement("div",{className:"".concat(i,"-entry-mb-sub-control"),key:t},e)}))))):k().createElement("div",{className:"".concat(i,"-entry-mb-empty")},"拖拽或点击添加内容")},ka=function(e){var t=e.field,n=t._Type_,r=t.ShowType,o=Un(t);return lt(n)&&"1"===r?null:k().createElement(er,(0,_.c)({field:t,tipsTrigger:"click"},o),k().createElement(Fa,{field:t}))},Da={NoCodeTextField:ca,NoCodeSelectItemField:ua,NoCodeDecimalField:fa,NoCodeRefBillField:ua,NoCodeMulRefBillField:ua,NoCodeTextAreaField:sa,NoCodeGroupContainerAp:Sa,NoCodeEntryEntity:ka,NoCodeRefBillTable:ka,NoCodeCreateDateField:ca,NoCodeCreatorField:ca,NoCodeModifyDateField:ca,NoCodeModifierField:ca,NoCodeBillNoField:ca,NoCodeDateField:pa,NoCodeDateRangeField:ma,NoCodeAttachmentUploadField:ha,NoCodeImageUploadField:ga,NoCodeRichTextField:ya,NoCodeGraphicDisplayField:ba};function Pa(e,t){var n=v()(e);if(i()){var r=i()(e);t&&(r=g()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ma(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pa(Object(n),!0).forEach((function(t){(0,d.c)(e,t,n[t])})):s()?Object.defineProperties(e,s()(n)):Pa(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}var Ra={UndefinedControl:zn,RootPanel:Qn},_a=Ma(Ma(Ma({},la),Da),Ra);function Oa(e,t){var n=v()(e);if(i()){var r=i()(e);t&&(r=g()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ba(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oa(Object(n),!0).forEach((function(t){(0,d.c)(e,t,n[t])})):s()?Object.defineProperties(e,s()(n)):Oa(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}var ja=function(e){var t,n,r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).isPC,o=void 0===r||r,a=e.ParentId,i=e._Type_,l=e.Id,c=e._isEntryField_,u=(0,k().useContext(ie).getKdesignerApi)(),s=u.meta,f=(u.data.getSubControls(l).length,null===(t=s.getControlMeta(i))||void 0===t?void 0:t.IsContainer),d=Ba(Ba({},s.getDefaultData(i)),e),p=C()(n="".concat(f?"".concat(l):l,"-")).call(n,d.Visibility),v={field:$t(d),key:p,_IsContainer:f};if(!a)return k().createElement(_a.RootPanel,v);var m,g,h=(g=o,m=et(m=o&&c?"NoCodeEntryFieldAp":i)?"NoCodeRefBillField":m,g?la[m]:Da[m]);return h?k().createElement(h,v):k().createElement(_a.UndefinedControl,v)},La=function(e){var t=e.value;e.oldValue.forEach((function(e){var t;document.querySelectorAll(C()(t="[".concat(q,'="')).call(t,e,'"]')).forEach((function(e){return null==e?void 0:e.removeAttribute(Q)}))})),t.forEach((function(e){var t;document.querySelectorAll(C()(t="[".concat(q,'="')).call(t,e,'"]')).forEach((function(e){null==e||e.setAttribute(Q,"true"),e.scrollIntoViewIfNeeded?e.scrollIntoViewIfNeeded():e.scrollIntoView({block:"nearest"})}))}))},Ua=r(4496),Ka=r.n(Ua),Va="nocodedesigner.CopyContent",za="nocodedesigner.CopyIds",Ga=function(e){window.sessionStorage.setItem(Va,Ka()(e))},Ha=function(){var e=window.sessionStorage.getItem(Va);return e&&(e=JSON.parse(e)),e},qa=function(e){window.sessionStorage.setItem(za,Ka()(e))},Ya=function(){var e=window.sessionStorage.getItem(za);return e&&(e=JSON.parse(e)),e},Wa=function(){window.sessionStorage.removeItem(Va),window.sessionStorage.removeItem(za)},Qa=function(){var e=(0,F.useContext)(ie).getKdesignerApi,t=(0,F.useMemo)((function(){return e()}),[]).selection.getSelection;return{setCopyContent:Ga,getCopyContent:Ha,setCopyIds:qa,getCopyIds:Ya,setDatasetCutControl:function(){t().forEach((function(e){var t;document.querySelectorAll(C()(t="[".concat(q,'="')).call(t,e,'"]')).forEach((function(e){e.setAttribute(Z,"true")}))}))},removeDatasetCutControl:function(){var e=document.querySelectorAll("[".concat(Z,"]"));return e.length&&e.forEach((function(e){e.removeAttribute(Z)})),e.length},clearCopyContent:Wa}},Xa=function(e,t,n,r,o,a,i,l){var c=e.getSelection,u=e.setSelect,s=(e.getActiveSelectedId,c());if(s.length>0){if(w()(s).call(s,r))return n("禁止删除根节点");var f=g()(s).call(s,(function(e){return e!==r})),d=t.getData().Items,p=Ae()(d).call(d,(function(e){return w()(f).call(f,e.Id)}));if(!p)return;var v=p.Id,m=p.ParentId,h=p._Type_,y=(p.RefBillId,p.RefTableId,p.GroupIndex);if(1===f.length){var b=t.getNextSelectedControlId(v),C=t.findControl(b);b===m&&ut(h)?m=r:!C||b===v||wo(C)||ht(h)&&0===Number(y)&&1===Number(C.GroupIndex)||(m=b)}else if(ut(h)){var E=t.findControlByCondition((function(e){return e.ParentId===m&&!w()(f).call(f,e.Id)}));m=E.length?E[0].Id:r}else{var I=t.getPrevSibling(v).control;I&&(m=I.Id)}Ro(f,o,a,t,i,l,(function(){u([m])}))}},Za=function(e,n){var r=(0,F.useContext)(ie),o=r.getKdesignerApi,a=(r.invokeSaveAction,r.fieldStatusSettingMode),i=r.pubUIAction,l=r.billPropsData,c=r.dispatchBillData,u=r.getHideFieldRef,s=r.setHideFieldRef,f=(0,F.useMemo)((function(){return o()}),[]),d=f.data,p=f.selection,v=f.meta,m=d.getRootId(),h=p.getSelection,y=p.setSelect,b=p.getActiveSelectedId,E=(0,F.useContext)(D.GlobalConfigContext),I=E.showMessage,x=E.keywordMapping,N=Qa(),A=N.setCopyContent,S=N.getCopyContent,k=N.setCopyIds,P=N.getCopyIds,M=N.setDatasetCutControl,_=N.removeDatasetCutControl,B=N.clearCopyContent;(0,F.useEffect)((function(){var n=e.current;if(n&&!a){var r=function(e){var r=(e.target||{}).className;if("nocode-designer-designer-field-item-edit"!==(void 0===r?"":r)){var o=h(),a=b(),N=e.keyCode;switch(N){case D.keyCode.BACKSPACE:case D.keyCode.DELETE:e.preventDefault(),Xa(p,d,I,m,l,c,u(),s),o.length>0&&setTimeout((function(){return n.focus()}),50);break;case D.keyCode.ESC:e.preventDefault();var F=f.selection.getActiveSelectedId();if(F!==f.data.getRootId()){var j=f.data.findControl(F),L=f.data.findControlByCondition((function(e){return e.Id===j.ParentId}))[0];if(L._Root_)return;y(L.Id)}break;case D.keyCode.C:if(e.preventDefault(),e.ctrlKey){null==e||e.stopPropagation();var K=h().reduce((function(e,t){var n,r,o=d.findControl(t),a=v.getControlMeta((null==o?void 0:o.FieldType)||o[U]),i=a.Inside,l=a.CategoryId,c=a.Name;if(i)return e;if(w()(l).call(l,Le))return I("".concat(c,"只能在画布中添加一次，不能复制")),e;if(ht(o[U])&&(null===(r=d.getAllSubControls(o.Id))||void 0===r?void 0:g()(r).call(r,(function(e){return et(e[U])||lt(e[U])||nt(e[U])}))).length>0)return I("分组内包含关联表单、表格、或系统字段，不能复制。"),e;return et(o[U])||lt(o[U])||nt(o[U])?(I("无法复制关联表单、表格控件、系统字段。"),e):C()(n=[]).call(n,(0,R.c)(e),[o])}),[]);A(K),k(K.reduce((function(e,t){var n=d.getAllSubControlIds(null==t?void 0:t.Id)||[];return C()(e).call(e,n)}),[]))}break;case D.keyCode.V:if(e.preventDefault(),e.ctrlKey){var V=S();if(Array.isArray(V)){var G,H=_()>0;d.getData();if(H){var q=V.reduce((function(e,t){var n;return C()(n=[t[O]]).call(n,(0,R.c)(e))}),[]);if(w()(q).call(q,a))return;return d.getAllParentControlIds(a).some((function(e){return w()(q).call(q,e)}))?void I("当【源控件】是【目标控件】的父级时，无法剪切/粘贴"):void d.swapControl((0,D.createSwapAction)({origin:q,target:a})).then((function(e){p.setSelect([q[0]]),B()}))}var Y=d.findControl(a),W=Y.FieldType,Q=Y[U],X=a,Z=v.getControlMeta(W||Q).IsContainer;Z&&!lt(Q)||(X=d.getParentControlId(a));var J=P(),$={Items:d.findControlByCondition((function(e){return null==J?void 0:w()(J).call(J,e.Id)}))},ee=V.reduce((function(e,t){var n=kt($,t,X);return C()(e).call(e,un(n,m))}),[]),te=d.findControlIndex(a);if(Z){var ne=d.getSubControls(a),re=ne.length;re>0&&(te=d.findControlIndex(ne[re-1][O]))}var oe=g()(G=T()(ee).call(ee,(function(e){return d.findControl(e.ParentId)?e.Id:null}))).call(G,Boolean);d.addControl((0,D.createPasteAction)(ee,{index:te+1})).then((function(e){var t=g()(oe).call(oe,(function(e){return d.findControl(e)}));y(t)}))}}break;case D.keyCode.X:if(e.preventDefault(),e.ctrlKey){null==e||e.stopPropagation();var ae=h(),ie=[],le=[];ae.forEach((function(e){var t=d.findControl(e);lt(t[U])||et(t[U])||(ie.push(t),le.push(e))})),k(le),A(ie),M()}break;case D.keyCode.ENTER:var ce,ue;e.preventDefault();var se=b({dataContext:d,selectionContext:p}),fe=d.findControl(se);fe=d.getContainerControl(fe);var de=v.canAdd("NoCodeTextField",fe[x.type]);if(!(!0===de||"object"===(0,Ce.c)(de)&&de.success))return;i({eventName:"enter",action:"fd_add_enter"});var pe=null===(ce=v.getControlMeta(null===(ue=fe)||void 0===ue?void 0:ue[x.type]))||void 0===ce?void 0:ce.IsContainer,ve=(0,D.createControlData)(d.getMeta(),E)({type:"NoCodeTextField",parentId:pe?fe[x.id]:m}),me=fe[x.id]===se?-1:d.findControlIndex(se)+1;d.addControl((0,D.createAddAction)(ve,{index:me})).then((function(e){if(null!=e&&e.length){var t=e[0].value;p.setSelect(Array.isArray(t)?[t[0][x.id]]:[t[x.id]])}}));break;case D.keyCode.D:if(e.preventDefault(),N===D.keyCode.D&&!e.ctrlKey)return;var ge=d.getData(),he=p.getSelection(),ye=function(e){var n=v.getControlMeta(e[U]),r=n.CategoryId,o=n.Name;return!w()(r).call(r,Le)||(I(t({key:"nocode.designer.00040",variables:{name:o}})),!1)};if(he.length>1){var be=he.reduce((function(e,t){var n=d.findControl(t);if(!ye(n))return e;var r=kt(ge,n,n[z]);return C()(e).call(e,un(r,m))}),[]);d.addControl((0,D.createPasteAction)(be)).then((function(){}))}else{var Ee=d.findControl(a);if(!ye(Ee))return;var Ie=un(kt(ge,Ee,Ee[z]),m),xe=d.findControlIndex(Ee[O])+1;d.addControl((0,D.createPasteAction)(Ie,{index:xe})).then((function(){p.setSelect([Ie[0][O]])}))}break;case D.keyCode.Z:case D.keyCode.Y:e.preventDefault();break;case D.keyCode.LEFT:case D.keyCode.RIGHT:case D.keyCode.UP:case D.keyCode.DOWN:e.preventDefault();var Te=N===D.keyCode.LEFT||N===D.keyCode.UP?d.getPrevSibling(a):d.getNextSibling(a),Ne=Te&&Te.control;Ne&&y([Ne[O]])}}};return n.addEventListener("keydown",r,!0),function(){n.removeEventListener("keydown",r,!0)}}}),[l])},Ja=function(e,t){var n=t.selection,r=e.Id,o=(0,F.useContext)(ie).fieldStatusSettingMode,a=n.setSelect;(0,F.useEffect)((function(){o||a([r])}),[])},$a=(0,D.isMac)(),ei=function(){var e=(0,F.useReducer)((function(e){return e+1}),0),t=(0,f.c)(e,2)[1],n=(0,F.useContext)(ie),r=n.getKdesignerApi,o=n.getPrefixCls,a=n.prefixCls,i=n.billPropsData,l=n.dispatchBillData,c=n.getHideFieldRef,u=n.setHideFieldRef,s=(0,F.useMemo)((function(){return r()}),[]),p=s.data,v=s.selection,m=s.meta,h=(0,F.useContext)(D.GlobalConfigContext).showMessage,y=Qa(),b=y.setCopyContent,E=y.getCopyIds,I=y.setCopyIds,x=y.getCopyContent,N=y.setDatasetCutControl,A=y.removeDatasetCutControl,S=y.clearCopyContent,P=(0,F.useRef)(null),_=o&&o(a,"nav-tool"),B=v.getSelection,j=v.setSelect,L=v.getActiveSelectedId,K=v.addSelectChangeListener,V=p.getRootId(),G=p.canUndo(),H=p.canRedo(),Y=L(),W=p.findControl(Y)[U],Q=m.getControlMeta(W).CategoryId,X=B();(0,F.useEffect)((function(){var e=K(t);return function(){e()}}),[]);var Z=(0,F.useCallback)((function(e){return ut(W)?"back"===e?"forward":"back":e}),[W]),J=(0,F.useMemo)((function(){var e,t=Vt(W),n=null===(e=p.getAllSubControls(Y))||void 0===e?void 0:g()(e).call(e,(function(e){return lt(e._Type_)||et(e._Type_)}));return!!(Y===V||w()(Q).call(Q,Le)||lt(W)||et(W)||t&&n.length)}),[V,Y,W]),$=(0,F.useMemo)((function(){return Y===V}),[V,Y]),ee=$||X.length>1,te=((0,F.useCallback)((function(){H&&p.redo()}),[H]),(0,F.useCallback)((function(){G&&p.undo()}),[G]),function(e){var t=setTimeout((function(){!function(e){var t,n=document.querySelector(C()(t="[".concat(q,'="')).call(t,e,'"]'));n&&(n.scrollIntoViewIfNeeded?n.scrollIntoViewIfNeeded():n.scrollIntoView({block:"nearest"}))}(e),clearTimeout(t),t=null}))}),ne=(0,F.useCallback)((function(){var e=B();if(1===e.length){var t=p.findControl(e[0]),n=t.Key,r=t._Type_;if(Vt(r))return void on(p,t,"forward");var o=p.getPrevSibling(e[0]).control;if(o&&Vt(o._Type_))return void on(p,o,"back");var a=p.getParentControl(e[0]),i=a.Id,l=a._Type_,c=a.PropsDisplay;if(lt(l)){var u=c.split(","),s=n.toLowerCase().replace("_".concat(i.toLowerCase()),""),f=Ur()(u).call(u,(function(e){return e===s}));if(u.length>1&&0!==f){var d=ue()(u).call(u,f,1);ue()(u).call(u,f-1,0,d[0]),p.batchUpdateControlPropertyValues((0,D.createUpdateAction)([[i,{PropsDisplay:u.join()}]]))}}p.moveControl(e[0],Z("forward")),te(e[0])}}),[Z]),re=(0,F.useCallback)((function(){var e=B();if(1===e.length){var t=p.findControl(e[0]),n=t.Key,r=t._Type_;if(Vt(r))return void on(p,t,"back");var o=p.getNextSibling(e[0]).control;if(o&&Vt(o._Type_))return void on(p,o,"forward");var a=p.getParentControl(e[0]),i=a.Id,l=a._Type_,c=a.PropsDisplay;if(lt(l)){var u=c.split(","),s=n.toLowerCase().replace("_".concat(i.toLowerCase()),""),f=Ur()(u).call(u,(function(e){return e===s}));if(u.length>1&&f!==u.length-1){var d=ue()(u).call(u,f,1);ue()(u).call(u,f+1,0,d[0]),p.batchUpdateControlPropertyValues((0,D.createUpdateAction)([[i,{PropsDisplay:u.join()}]]))}}p.moveControl(e[0],Z("back")),te(e[0])}}),[Z]),oe=(0,F.useCallback)((function(e){null==e||e.stopPropagation();var t=B();if(1!==t.length||V!==t[0]){var n=T()(t).call(t,(function(e){return p.findControl(e)}));I(t),b(n),N()}}),[]),ae=(0,F.useCallback)((function(e){null==e||e.stopPropagation();var t=B();if(1===t.length&&V===t[0])return h("禁止复制根节点");var n=t.reduce((function(e,t){var n,r,o=p.findControl(t),a=m.getControlMeta((null==o?void 0:o.FieldType)||o[U]),i=a.Inside,l=a.CategoryId,c=a.Name;if(i)return e;if(w()(l).call(l,Le))return h("".concat(c,"只能在画布中添加一次，不能复制")),e;if(Vt(o[U])&&(null===(r=p.getAllSubControls(o.Id))||void 0===r?void 0:g()(r).call(r,(function(e){return et(e[U])||lt(e[U])||nt(e[U])}))).length>0)return h("分组内包含关联表单、表格、或系统字段，不能复制。"),e;return lt(o[U])||et(o[U])?(h("关联表单与表格控件，不能复制"),e):C()(n=[]).call(n,(0,R.c)(e),[o])}),[]);b(n),I(n.reduce((function(e,t){var n=p.getAllSubControlIds(t.Id)||[];return C()(e).call(e,n)}),[]))}),[]),le=(0,F.useCallback)((function(){var e=x();if(Array.isArray(e)){var t,n=A()>0;p.getData();if(n){var r=e.reduce((function(e,t){var n;return C()(n=[t[O]]).call(n,(0,R.c)(e))}),[]);if(w()(r).call(r,Y))return;return p.getAllParentControlIds(Y).some((function(e){return w()(r).call(r,e)}))?void h("当【源控件】是【目标控件】的父级时，无法剪切/粘贴"):void p.swapControl((0,D.createSwapAction)({origin:r,target:Y})).then((function(e){v.setSelect([r[0]]),S()}))}var o=p.findControl(Y),a=o.FieldType,i=o[U],l=Y,c=m.getControlMeta(a||i).IsContainer;c||(l=p.getParentControlId(Y));var u=E(),s={Items:p.findControlByCondition((function(e){return null==u?void 0:w()(u).call(u,e.Id)}))},f=e.reduce((function(e,t){var n=kt(s,t,l);return C()(e).call(e,un(n,V))}),[]),d=p.findControlIndex(Y);if(c){var y=p.getSubControls(Y),b=y.length;b>0&&(d=p.findControlIndex(y[b-1][O]))}var I=g()(t=T()(f).call(f,(function(e){return p.findControl(e.ParentId)?e.Id:null}))).call(t,Boolean);p.addControl((0,D.createPasteAction)(f,{index:d+1})).then((function(e){var t=g()(I).call(I,(function(e){return p.findControl(e)}));j(t)}))}}),[Y]),ce=(0,F.useCallback)((function(e){e.stopPropagation();var t=v.getSelection(),n=p.getData();if(1!==t.length||V!==t[0]){var r=function(e){if(Vt(e[U])){var t,n,r=null===(t=p.getAllSubControls(e.Id))||void 0===t||null===(n=g()(t))||void 0===n?void 0:n.call(t,(function(e){return et(e[U])||lt(e[U])||nt(e[U])}));if((null==r?void 0:r.length)>0)return h("分组内包含关联表单、表格或系统字段，不能重复。"),!1}var o=m.getControlMeta(e[U]),a=o.CategoryId,i=o.Name;return!w()(a).call(a,Le)||(h("".concat(i,"只能在画布中添加一次，不能重复")),!1)};if(t.length>1){var o=t.reduce((function(e,t){var o=p.findControl(t);if(!r(o)||et(o[U])||lt(o[U]))return e;var a=kt(n,o,o[z]);return C()(e).call(e,un(a,V))}),[]);p.addControl((0,D.createPasteAction)(o)).then((function(){}))}else{var a=p.findControl(Y);if(!r(a)||et(a[U])||lt(a[U]))return;var i=un(kt(n,a,a[z]),V),l=p.findControlIndex(a[O])+1;p.addControl((0,D.createPasteAction)(i,{index:l})).then((function(){v.setSelect([i[0][O]])}))}}}),[Y]),se=Vn()("".concat(_,"-operation-btn"));return k().createElement("div",{className:_,ref:P},k().createElement("div",{title:"前移",onClick:ne,className:Vn()((0,d.c)({},"".concat(_,"-operation-disable"),ee),se)},k().createElement(M.Icon,{prefix:"designericon",type:"qianyi"})),k().createElement("div",{title:"后移",onClick:re,className:Vn()((0,d.c)((0,d.c)({},"".concat(_,"-last-operation"),!0),"".concat(_,"-operation-disable"),ee),se)},k().createElement(M.Icon,{prefix:"designericon",type:"houyi"})),k().createElement("div",{title:"剪切\n".concat($a?"⌘+X":"Ctrl+X"),onClick:J?void 0:oe,className:Vn()((0,d.c)({},"".concat(_,"-operation-disable"),J),se)},k().createElement(M.Icon,{prefix:"designericon",type:"jianqie"})),k().createElement("div",{title:"复制\n".concat($a?"⌘+C":"Ctrl+C"),onClick:J?void 0:ae,className:Vn()((0,d.c)({},"".concat(_,"-operation-disable"),J),se)},k().createElement(M.Icon,{prefix:"designericon",type:"fuzhi"})),k().createElement("div",{title:"粘贴\n".concat($a?"⌘+V":"Ctrl+V"),onClick:le,className:Vn()((0,d.c)({},"".concat(_,"-last-operation"),!0),se)},k().createElement(M.Icon,{prefix:"designericon",type:"zhantie"})),k().createElement("div",{title:"重复",onClick:J?void 0:ce,className:Vn()((0,d.c)({},"".concat(_,"-operation-disable"),J),se)},k().createElement(M.Icon,{prefix:"designericon",type:"zhongfu"})),k().createElement("div",{title:"删除\nDelete",onClick:$?void 0:function(){Xa(v,p,h,V,i,l,c(),u)},key:"Delete",className:Vn()((0,d.c)({},"".concat(_,"-operation-disable"),$),se)},k().createElement(M.Icon,{prefix:"designericon",type:"shanchu"})))},ti=function(){var e=(0,F.useContext)(ie),t=e.getPrefixCls,n=e.prefixCls,r=e.isPC,o=e.setIsPC,a=t&&t(n,"nav-deviceswitch"),i=function(e){o(e)};return k().createElement("div",{className:a},k().createElement("div",{className:"".concat(a,"-container")},k().createElement("div",{className:Vn()("".concat(a,"-container-item"),{actived:r}),onClick:function(){return i(!0)},title:"PC端"},k().createElement("div",{className:"".concat(a,"-container-item-icon")},k().createElement(M.Icon,{prefix:"designericon",type:"PC"}))),k().createElement("div",{className:Vn()("".concat(a,"-container-item"),{actived:!r}),onClick:function(){return i(!1)},title:"移动端"},k().createElement("div",{className:"".concat(a,"-container-item-icon")},k().createElement(M.Icon,{prefix:"designericon",type:"shouji2"})))))},ni=[{name:"1列",id:"1",icon:"1lie"},{name:"2列",id:"2",icon:"2lie"},{name:"3列",id:"3",icon:"3lie"},{name:"4列",id:"4",icon:"4lie"}],ri="ColumnSpan",oi=function(){var e=(0,F.useContext)(ie),t=e.prefixCls,n=e.getKdesignerApi,r=e.isPC,o=n(),a=o.data,i=o.meta,l=a.getRootId(),c=a.findControl(l),u=c[ri],s=c._Type_,f=i.getControlPropertyDefaultValue(s,ri),p=String(u||f);return(0,D.useDataChangeForceUpdateEffect)(o),k().createElement("div",{className:Vn()("".concat(t,"-column-switch"),{hide:!r})},k().createElement("div",{className:"".concat(t,"-column-switch-wrapper")},T()(ni).call(ni,(function(e){var n=e.id,r=e.icon;return k().createElement("div",{className:Vn()("".concat(t,"-column-item"),{"is-active":p===n}),onClick:function(){var e;p!==(e=n)&&a.batchUpdateControlPropertyValues((0,D.createUpdateAction)([[l,(0,d.c)({},ri,e)]]))},key:n,title:"".concat(n,"列")},k().createElement("div",{className:"".concat(t,"-column-item-icon")},k().createElement(M.Icon,{prefix:"designericon",type:r})))}))))},ai=function(){var e=(0,F.useContext)(ie),t=e.getPrefixCls,n=e.prefixCls,r=t&&t(n),o="".concat(r,"-top-view-main"),a=k().createElement("div",{className:o},k().createElement(ei,null),k().createElement(oi,null),k().createElement(ti,null));return k().createElement(D.ViewHeader,{content:a,portalId:o})},ii=function(e){var t=e.Id,n=(0,F.useContext)(ie).getKdesignerApi,r=(0,F.useMemo)((function(){return n()}),[]),o=r.meta,a=r.data.findControl(t)||{},i=a._Type_,l=a.Key,c=a.Multi,u=void 0===c?"0":c,s=a.SelectItemType,d=(o.getControlMeta(i)||{}).Name,p=(0,F.useRef)(null),v=(0,F.useState)(gt(d,a)),m=(0,f.c)(v,2),g=m[0],h=m[1];return(0,D.useDataChangeForceUpdateEffect)(r),(0,F.useEffect)((function(){var e=gt(d,{SelectItemType:s,Multi:u,_Type_:i});h(e)}),[t,i,s,u]),(0,F.useEffect)((function(){if(et(i))return D.eventBus.on("".concat(l,"_refbill"),(function(e){p.current=e.formName,h(gt(p.current,a))})),function(){D.eventBus.off("".concat(l,"_refbill"))}}),[l]),g};function li(e,t){var n=v()(e);if(i()){var r=i()(e);t&&(r=g()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function ci(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?li(Object(n),!0).forEach((function(t){(0,d.c)(e,t,n[t])})):s()?Object.defineProperties(e,s()(n)):li(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}var ui=(0,F.memo)((function(e){var t=e.field,n=e.className,r=t.Id,o=t._Type_,a=t.BillEntityId,i=t.Id,l=t.Name,c=(0,F.useContext)(ie),u=c.prefixCls,s=c.getKdesignerApi,p=c.invokeAction,v=c.fieldStatusSettingMode,m=c.getHideFieldRef,h=c.setHideFieldRef,y=(0,F.useMemo)((function(){return s()}),[]),b=y.data,E=y.selection,I=y.meta,x=y.error,N=y.controlCacheApi,S=I.getMeta(),P=(b.getParentControl(r)||{})._Type_,_=(0,F.useRef)(),j=(0,F.useRef)([]),L=(0,F.useState)([]),K=(0,f.c)(L,2),V=K[0],G=K[1],H=(0,F.useState)(!1),q=(0,f.c)(H,2),Y=q[0],W=q[1],Q=(0,F.useState)(!1),X=(0,f.c)(Q,2),Z=X[0],J=X[1],$=N.hasCache("controlId",r);(0,D.useOnClickOutside)([_],(function(e){W(!1)})),(0,F.useEffect)((function(){if(W(!1),J(!1),r&&!w()(Ye).call(Ye,o)&&!v&&!lt(P)){if($){var e;if(S.Controls){var n,a,i=b.findControl(t[z]),l=I.getControlMeta(o),c=C()(n=[]).call(n,(0,R.c)(Ye),[o,"HiddenControl"]);j.current=g()(a=S.Controls||[]).call(a,(function(e){if(w()(c).call(c,e[O])||!1===e.Visible||(null==l?void 0:l.BaseType)!==(null==e?void 0:e.BaseType))return!1;var t=I.canAdd(e.Id,i[U]);return!0===t||"object"===(0,Ce.c)(t)&&t.success}))}return G(j.current),void((null===(e=j.current)||void 0===e?void 0:e.length)>0&&J(!0))}var u=t.Key;p("canSwitchFieldTypes",[[u,t.FieldType]],[]);var s=function(e){var t=e[u]||[];0!==t.length?(G(t),(null==t?void 0:t.length)>0&&J(!0)):W(!1)};return D.eventBus.on(mr,s),function(){D.eventBus.off(mr,s)}}}),[i,o,$]);var ee=ii(t),te=(0,F.useMemo)((function(){if(o)return vn(o)}),[o,vn]),ne="".concat(u,"_contextmenu_panel");return k().createElement("div",{className:Vn()(n,"switchfield")},k().createElement("div",{className:"switchfield_content"},te&&k().createElement(M.Icon,{prefix:"designericon",type:te,className:"switchfield_content_icon"}),k().createElement("span",{className:"switchfield_content_name"},o?ee||"":"批量编辑")),Z&&k().createElement(D.DropDownPanel,{scrollHidden:!0,popperClassName:"".concat(u,"_contextmenu"),visible:Y,onVisibleChange:function(e){return W(e)},placement:"bottomLeft",content:Y&&k().createElement("div",{ref:_,className:ne},T()(V).call(V,(function(e){var n,r="",c="";"object"===(0,Ce.c)(e)?(r=e.Id,c=e.Name):(r=e,c=null===(n=I.getControlMeta(r))||void 0===n?void 0:n.Name);return k().createElement("div",{key:r,title:c,className:"".concat(ne,"_item"),onClick:function(){return function(e){if(e){var n,r="";if(et(o)){if(r=I.getControlMeta(C()(n="".concat(o,"_")).call(n,a)).Name,null!=t&&t.RefTableId){var c=ci({},m()),u=A()(c).reduce((function(e,n){return n.ParentId!==(null==t?void 0:t.RefTableId)&&n.Id!==(null==t?void 0:t.RefTableId)?ci(ci({},e),{},(0,d.c)({},n.Id,n)):e}),{});h(u)}}else r=I.getControlMeta(o).Name;var s=(r||l)===l,f=I.getControlMeta(e).Name,p=s?{Name:f}:{};b.batchUpdateControlPropertyValues((0,D.createUpdateAction)([[i,ci((0,d.c)({},B,e),p)]])).then((function(){E.setSelect([i]),x.getError(i)&&x.deleteError([i]),W(!1)})).catch((function(e){}))}}(r)}},k().createElement(M.Icon,{prefix:"designericon",type:vn(r),className:"nocode-designer-control-icon"}),k().createElement("p",{className:"".concat(ne,"_item_text")},c))})))},k().createElement("div",{className:"switchfield_action"},k().createElement(M.Icon,{prefix:"designericon",type:"qiehuan",className:"operation-bar-name-icon"}),k().createElement("span",{className:"switchfield_action_text"},"转换"))))}));ui.displayName="SwitchField";var si=ui,fi=function(e,t){var n=t.Hide;return!(!n||"object"!==(0,Ce.c)(n))&&n.Hide},di=(0,F.memo)((function(){var e=(0,F.useContext)(ie).prefixCls,t=(0,F.useState)(!1),n=(0,f.c)(t,2),r=n[0],o=n[1],a=(0,F.useRef)({}),i=(0,F.useRef)({}),l=(0,F.useRef)(null);return(0,D.useOnClickOutside)([l],(function(e){o(!1)})),(0,F.useEffect)((function(){var e=function(e){var t,n=e.event,r=e.field,l=n.pageX,c=n.pageY;a.current.style.cssText+=C()(t=";left: ".concat(l,"px;top: ")).call(t,c,"px;"),i.current=r,o(!0)};return D.eventBus.on("contextmenu",e),function(){D.eventBus.off("contextmenu",e)}}),[]),(0,F.useEffect)((function(){var e=function(e){var t=document.getElementById("app");(!t||null!=t&&t.contains(e.target))&&r&&o(!1)};return window.addEventListener("scroll",e,!0),function(){window.removeEventListener("scroll",e,!0)}}),[r]),(0,oe.createPortal)(k().createElement("div",{ref:a,className:"".concat(e,"_contextmenu")},k().createElement(D.DropDownPanel,{popperClassName:"".concat(e,"-quick-setting-dropdown"),visible:r,onVisibleChange:function(e){return o(e)},placement:"bottomLeft",content:k().createElement(gi,{ref:l,controlId:i.current.Id,field:i.current,prefixCls:e})})),document.body)})),pi=di;function vi(e,t){var n=v()(e);if(i()){var r=i()(e);t&&(r=g()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function mi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vi(Object(n),!0).forEach((function(t){(0,d.c)(e,t,n[t])})):s()?Object.defineProperties(e,s()(n)):vi(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}var gi=(0,F.memo)((0,F.forwardRef)((function(e,t){var n,r=e.prefixCls,o=e.controlId,a=(0,F.useContext)(ie).getKdesignerApi,i=(0,F.useMemo)((function(){return a()}),[]),l=i.meta,c=i.data,u=c.findControl(o),s=(u||{})._Type_,f=c.getData(),d=l.getDefaultData(s),p=l.getControlMeta(s),v=(0,F.useMemo)((function(){return mi(mi({},d),u)}),[d,u]),m=(0,D.getModelData)(p.Properties,mi(mi({},f),{},{field:v}))||[],g=En()(n=function(e,t,n){var r,o=[],a=Nt(e);try{for(a.s();!(r=a.n()).done;){var i=r.value,l=i.Nodes,c=void 0===l?[]:l,u=i.Key;if(0===t.length||w()(t).call(t,u)){var s,f=Nt(c);try{for(f.s();!(s=f.n()).done;){var d=s.value;!1!==d.Visible&&n(d)&&o.push(d)}}catch(e){f.e(e)}finally{f.f()}}}}catch(e){a.e(e)}finally{a.f()}return o}(m,[],(function(e){var t;return!fi(0,e)&&(null==e||null===(t=e.Editor)||void 0===t?void 0:t.EnableQuickSetting)}))).call(n,(function(e,t){return e.GroupSubSeq-t.GroupSubSeq}));return(0,D.useDataChangeForceUpdateEffect)(i),null!=u&&u.Id?k().createElement("div",{className:"setting-panel",ref:t},k().createElement(si,{field:v}),(null==g?void 0:g.length)>0&&k().createElement("div",{className:"basic-setting ".concat(r,"-property-view")},T()(g).call(g,(function(e){return k().createElement(D.PropertyViewItem,(0,_.c)({},e,{key:e.Id,field:v,className:"kdesigner-right-view",enableMutiSelect:!1}))})))):null}))),hi=(0,F.memo)((function(e){var t=e.field,n=e.mainViewDom,r=e.prefixCls,o=(0,F.useState)(!1),a=(0,f.c)(o,2),i=a[0],l=a[1],c=(0,F.useContext)(ie).getKdesignerApi,u=((0,F.useMemo)((function(){return c()}),[]),(0,F.useRef)(null)),s=(0,F.useRef)(null);return(0,D.useOnClickOutside)([u,s],(function(e){var t=document.getElementById("app");(!t||null!=t&&t.contains(e.target))&&i&&(l(!1),n.focus())})),(0,F.useEffect)((function(){var e=function(e){var t=document.getElementById("app");(!t||null!=t&&t.contains(e.target))&&i&&l(!1)};return window.addEventListener("scroll",e,!0),function(){window.removeEventListener("scroll",e,!0)}}),[i]),k().createElement(D.DropDownPanel,{gap:2,ref:s,visible:i,placement:"bottomLeft",popperClassName:"".concat(r,"-quick-setting-dropdown"),content:i?!!t.Id&&k().createElement(gi,{ref:u,controlId:t.Id,field:t,prefixCls:r}):k().createElement("div",null)},k().createElement("span",{className:"operation-bar-item",onClick:function(e){e.stopPropagation(),l((function(e){return!e})),n.focus()},title:"设置"},k().createElement(M.Icon,{prefix:"designericon",type:"shezhi"})))}),(function(e,t){return(0,Fe.isEqual)(e.field,t.field)&&e.mainViewDom===t.mainViewDom})),yi="ui-designer-root",bi="1050",Ci="-1";function Ei(e,t){if(t){var n=0,r=new window.IntersectionObserver((function(e){e.forEach((function(e){if(e.intersectionRatio!==n){if(e.intersectionRatio<1&&e.intersectionRatio>0){var r=e.boundingClientRect,o=e.intersectionRect;n>e.intersectionRatio&&r.top<o.top||r.bottom==o.bottom&&r.top<o.top?(t.setAttribute("data-visible","true"),t.style.zIndex=Ci):(t.setAttribute("data-visible","true"),t.style.zIndex=bi)}else e.intersectionRatio>0?(t.setAttribute("data-visible","true"),t.style.zIndex=bi):(t.setAttribute("data-visible","false"),t.style.zIndex=Ci);n=e.intersectionRatio}}))}),{threshold:[1e-6,.999999]});return r.observe(e),r}}var Ii=(0,F.memo)((function(e){var t=e.prefixCls,n=e.field,r=e.kdesignerApi,o=e.mainViewDom,a=e.rootDom,i=e.billPropsData,l=e.dispatchBillData,c=e.getHideField,u=e.setHideField,s=n.Id,d=n._Type_,p=n.SourceForm,v=n.ColumnSpan,m=void 0===v?1:v,h=n.Status,y=n.Margin,b=(0,F.useContext)(D.GlobalConfigContext).showMessage,C=r.data,E=r.selection,I=r.meta,x=(0,F.useRef)(null),T=C.getData(),N=C.getRootId(),A=C.findControl(N).ColumnSpan,S=void 0===A?2:A,P=I.getControlMeta(d),R=P.Inside,_=P.CategoryId,B=P.Name,j=w()(_).call(_,Le),L=document.querySelector('[data-control-id="'.concat(s,'"]')),U=(0,F.useReducer)((function(e){return e+1}),0),K=(0,f.c)(U,2)[1];(0,F.useEffect)((function(){var e=x.current;if(e){var t=Ei(L,e);return function(){t.disconnect()}}}),[x.current,L]);var V=(0,F.useCallback)((function(e){var t=x.current;if(t&&a&&e){var n=a.getBoundingClientRect(),r=t.getBoundingClientRect().width,o=e.left,i=e.top,l=(e.width,n.left),c=n.top,u=n.width,s=n.height,f=o<l?l:o;o+r>l+u&&(f=l+u-r);var d=i-24-2;t.style.left="".concat(f,"px"),t.style.top="".concat(d,"px");var p=d>=c-24-2&&d<=c+s;"true"===t.dataset.visible&&(p&&t.style.zIndex===Ci?t.style.zIndex=bi:p||t.style.zIndex!==bi||(t.style.zIndex=Ci))}}),[x.current,a,L]);(0,D.useTraceElementPosition)({selectedCtrlNode:L,callback:V,depth:[m,h,S,y]});var G=ii(n),H=(0,F.useMemo)((function(){return vn(d)}),[d,vn]);(0,F.useEffect)((function(){var e=function(){V(null==L?void 0:L.getBoundingClientRect())},t=document.getElementById("nocode-designer-main-root");if(L){var n=Wt(L,e),r=Wt(t,e);return function(){n&&n.removeResizeObserve(),r&&r.removeResizeObserve()}}}),[]),(0,F.useEffect)((function(){var e=C.addDataChangeListener((function(){e&&K()}));return function(){e&&e(),e=null}}),[K]);var q=(0,F.useMemo)((function(){var e=C.getParentControl(s);return!!lt(null==e?void 0:e._Type_)&&"2"===e.SourceForm}),[s,i,p]),Y=(0,F.useMemo)((function(){return lt(d)||et(d)}),[d]);return L&&L.getAttribute("id")!==yi&&o&&!R?k().createElement("div",{ref:x,className:"".concat(t,"-operation-bar-wrap")},k().createElement("div",{className:"operation-bar-name mr-2"},k().createElement(M.Icon,{prefix:"designericon",type:H,className:"operation-bar-name-icon"}),k().createElement("span",null,G||"")),k().createElement("div",{className:"operation-bar-left"},!q&&!Y&&k().createElement("span",{className:Vn()(["operation-bar-item"]),onClick:function(e){if(o.focus(),j)return b("".concat(B,"只能在画布中添加一次，不能重复。"));e.stopPropagation();var t=E.getSelection(),r=C.findControl(t[0]),a=un(kt(T,n,n[z]),N),i=g()(a).call(a,(function(e){return et(e._Type_)||lt(e._Type_)}));if(ht(r._Type_)){var l,c,u=null===(l=C.getAllSubControls(r.Id))||void 0===l||null===(c=g()(l))||void 0===c?void 0:c.call(l,(function(e){return nt(null==e?void 0:e._Type_)}));if(i.length||null!=u&&u.length)return void b("分组内包含关联表单、表格或系统字段，不能重复。")}var f=C.findControlIndex(s)+1;C.addControl((0,D.createPasteAction)(a,{index:f})).then((function(){E.setSelect([a[0][O]])}))},title:"重复"},k().createElement(M.Icon,{prefix:"designericon",type:"zhongfu"})),k().createElement("span",{className:Vn()(["operation-bar-item"]),onClick:function(e){o.focus(),e.stopPropagation();var t=C.getNextSelectedControlId(s),r=c();Ro([s],i,l,C,r,u,(function(){var e=t,r=C.findControl(t);ut(d)&&!r?e=N:r&&!wo(r)||(e=n[z]),E.setSelect([e])}))},title:"删除"},k().createElement(M.Icon,{prefix:"designericon",type:"shanchu"}))),!q&&k().createElement(hi,{mainViewDom:o,field:n,prefixCls:t})):null})),xi=function(e){var t=(0,F.useContext)(ie),n=t.getKdesignerApi,r=t.prefixCls,o=t.isPC,a=t.billPropsData,i=t.dispatchBillData,l=t.getHideFieldRef,c=t.setHideFieldRef,u=(0,F.useMemo)((function(){return n()}),[]),s=u.data,d=u.selection,p=u.meta,v=d.getSelection(),m=s.getRootId(),g=(s.findControl(m).ColumnSpan,document.getElementById(je)),h=document.getElementById(yi),y=(0,F.useReducer)((function(e){return e+1}),0),b=(0,f.c)(y,2),E=b[0],I=b[1];(0,F.useRef)("");return(0,D.useSelectionChangeForceUpdateEffect)(u),(0,F.useLayoutEffect)((function(){I()}),[o]),k().createElement(k().Fragment,null,T()(v).call(v,(function(e){var t,n,o,f=s.findControl(e)||{},d=f.ColumnSpan,v=void 0===d?1:d,m=f._Type_,y=mi(mi({},p.getDefaultData(m)),f),b=ut(m)?document.getElementById("biz-button-panel"):h,I=s.findControlIndex(e),x=C()(t=C()(n=C()(o="operation-bar-item-".concat(e,"-")).call(o,I,"-")).call(n,v,"-")).call(t,E);return k().createElement(Ii,{key:x,prefixCls:r,billPropsData:a,dispatchBillData:i,getHideField:l,setHideField:c,field:y,mainViewDom:g,rootDom:b,kdesignerApi:u})})),k().createElement(pi,null))},Ti={1:"default",2:"disabled",3:"readonly",4:"hidden"},Ni=function(e,t){return it(t)||ut(e)},Ai=(0,F.memo)((function(e){var t=e.prefixCls,n=e.field,r=e.rootDom,o=e.kdesignerApi,a=e.containerDom,i=e.floatMenu,l=e.fieldStatusMap,c=e.fieldStatusSettingOptions,u=void 0===c?{}:c,s=e.dispatchFieldStatus,p=n.Id,v=n._Type_,m=n.Key,g=n.Status,h=n.FieldRequired,y=n.ParentId,b=o.data,C=(o.selection,o.meta),E=(0,F.useRef)(null),I=r.getBoundingClientRect(),x=C.getControlMeta(v),N=x.Inside,A=(x.CategoryId,x.Name,x.IsContainer),S=b.findControl(y)._Type_,w=u.defaultStatus,P=void 0===w?"default":w,R=u.hideMenu,O=void 0===R?Ni:R,B=u.onFieldStatusChange,j=C.getControlMetaEditor(v,"Status"),L=(0,F.useState)(!1),U=(0,f.c)(L,2),K=U[0],V=U[1],z=(0,F.useMemo)((function(){if(null!=l&&l[m])return l[m];if(!i||null==i||!i.length){var e=Ti[g]||P;return e===P&&"2"===h?"mustInput":e}return P}),[m,l,i,g,h,u]),G=(0,F.useMemo)((function(){if(!(0,Fe.isUndefined)(i))return i;var e=(j||{}).Enum,t=[];return null==e||e.forEach((function(e){t.push({key:Ti[e.Id],label:e.Name})})),A&&!lt(v)||!t.length||t.push({key:"mustInput",label:"必填"}),t}),[j,A,i,v]);(0,F.useEffect)((function(){var e=E.current;if(e){var t=Ei(a,e);return function(){t.disconnect()}}}),[E.current,a]);var H=(0,F.useCallback)((function(e){var t=E.current;if(t&&r){t.getBoundingClientRect().width;var n=e.left,o=e.top,a=(e.width,I.left),i=I.top,l=(I.width,I.height),c=n<a?a:n,u=o-24-2;t.style.left="".concat(c,"px"),t.style.top="".concat(u,"px");var s=u>=i-24-2&&u<=i+l;"true"===t.dataset.visible&&(s&&t.style.zIndex===Ci?t.style.zIndex=bi:s||t.style.zIndex!==bi||(t.style.zIndex=Ci))}}),[E.current,r,I]);(0,D.useTraceElementPosition)({selectedCtrlNode:a,callback:H});var q=(0,F.useMemo)((function(){var e,t;return(null===(e=Ae()(G).call(G,(function(e){return e.key===z})))||void 0===e?void 0:e.label)||(null===(t=G[0])||void 0===t?void 0:t.label)}),[G,z]),Y=function(e){if(V(!1),"function"!=typeof B)if(lt(v)){var t=(b.findControlByCondition((function(e){return e.ParentId===p}))||[]).reduce((function(t,n){return(0,_.c)(t,(0,d.c)({},n.Key,e))}),(0,d.c)({},m,e));s(t)}else s((0,d.c)({},m,e));else null==B||B(e,n,o,s,l)},W=(0,F.useMemo)((function(){return k().createElement(M.Dropdown.Menu,{onClick:Y},T()(G).call(G,(function(e){return k().createElement(M.Dropdown.Item,{key:e.key},k().createElement("span",{className:"".concat(t,"-permission-setting-panel-item")},e.label||e.key))})))}),[G]);return!a||a.getAttribute("id")===yi||!r||null!=O&&O(v,S)||N?null:k().createElement("div",{ref:E,className:"".concat(t,"-permission-setting-wrap")},k().createElement(M.Dropdown,{selectable:!0,popperClassName:"".concat(t,"-permission-setting-panel"),trigger:"click",visible:K,onVisibleChange:V,selectedKey:z,menu:W},k().createElement("div",{className:"permission-setting-label"},k().createElement("span",{className:"permission-setting-label-text"},q),k().createElement(M.Icon,{className:"permission-setting-label-icon",prefix:"designericon",type:K?"xialajiantoufanxiang":"xialajiantou"}))))}));Ai.displayName="PermissionSettingItem";var Si=function(e){var t=(0,F.useContext)(ie),n=t.getKdesignerApi,r=t.prefixCls,o=t.floatMenu,a=t.fieldStatusMap,i=t.dispatchFieldStatus,l=t.fieldStatusSettingOptions,c=(0,F.useMemo)((function(){return n()}),[]),u=c.data,s=c.selection.getSelection(),d=u.getRootId(),p=document.querySelector('[data-control-id="'.concat(d,'"]')),v=(0,F.useReducer)((function(e){return e+1}),0);(0,f.c)(v,2)[1];return(0,D.useSelectionChangeForceUpdateEffect)(c),(0,D.useDataChangeForceUpdateEffect)(c),k().createElement(k().Fragment,null,T()(s).call(s,(function(e){var t,n,s=u.findControl(e),f=s.ColumnSpan,d=void 0===f?1:f,v=(s._Type_,u.findControlIndex(e)),m=document.querySelector('[data-control-id="'.concat(e,'"]'));return k().createElement(Ai,{key:C()(t=C()(n="permission-setting-item-".concat(e,"-")).call(n,v,"-")).call(t,d),prefixCls:r,field:s,rootDom:p,containerDom:m,kdesignerApi:c,floatMenu:o,fieldStatusMap:a,fieldStatusSettingOptions:l,dispatchFieldStatus:i})})))},wi=function(e){var t=(0,(0,F.useContext)(ie).getKdesignerApi)(),n=e.name,r=e.id,o=e.onSelect,a=e.getClassName,i=e.isActive,l=t.data.findControl(r)._Root_;return k().createElement("div",{className:Vn()(a("item"),(0,d.c)((0,d.c)({},a("active-item"),i),a("item-disabled"),l)),onClick:function(){o({name:n,id:r,disabled:l})}},k().createElement("div",{className:a("item-text")},k().createElement("span",null,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return e?ve()(e).length>t?we()(e).call(e,0,t)+"...":e:""}(n))),k().createElement("div",{className:a("item-text-dumb-node")}))},Fi=function(e){var t=e.items,n=e.onSelect,r=e.prefixCls,o=void 0===r?"":r,a=(0,F.useState)(!1),i=(0,f.c)(a,2),l=i[0],c=i[1],u=(0,F.useState)(!1),s=(0,f.c)(u,2),d=s[0],p=s[1],v=(0,F.useRef)(null),m=(0,F.useRef)(null),g=(0,F.useCallback)((function(e){var t;return C()(t="".concat(o,"-")).call(t,e)}),[]),h=(0,F.useCallback)((function(e,t){var n=e.offsetWidth,r=t.offsetWidth;if(r>n){var o=e.scrollLeft;o>0?o+n>=r?(p(!1),c(!0)):(p(!0),c(!0)):(c(!1),p(!0))}else c(!1),p(!1)}),[]);(0,F.useEffect)((function(){var e=new Ct.c((function(e){var t=(0,f.c)(e,1)[0],n=t.target.parentElement;D.console.log("resize-----"),h(n,t.target)}));return e.observe(m.current),function(){e.disconnect()}}),[]);var y=function(e){D.console.log("Scroll resize-----");var t=v.current,n=m.current;h(t,n)},b=function(e){var t=v.current.offsetWidth;v.current.scrollLeft=Math.max(0,v.current.scrollLeft+("left"===e?-t:t))},E=function(e,t){t.stopPropagation();D.console.log(t,t.deltaY,t.deltaMode);var n=.4*t.deltaY;v.current.scrollLeft=Math.max(0,v.current.scrollLeft+("left"===e?-n:n))};return(0,F.useEffect)((function(){var e=v.current,t=m.current,n=e.offsetWidth,r=t.offsetWidth;r>n&&(e.scrollLeft=r-n)}),[t]),k().createElement("div",{className:g("container-box"),onScroll:y},l&&k().createElement("div",{className:g("left-arrow"),onClick:function(){return b("left")},onWheel:function(e){return E("left",e)}},k().createElement(M.Icon,{type:"zuoqie",prefix:"designericon"})),k().createElement("div",{className:g("container"),ref:v,onScroll:y},k().createElement("div",{className:g("list"),ref:m},T()(t).call(t,(function(e,r){return k().createElement(wi,(0,_.c)({},e,{onSelect:n,getClassName:g,key:e.id,isActive:r===t.length-1}))})))),d&&k().createElement("div",{className:g("right-arrow"),onClick:function(){return b("right")},onWheel:function(e){return E("right",e)}},k().createElement(M.Icon,{type:"youqie",prefix:"designericon"})))},ki=function(){var e=(0,F.useContext)(ie),t=e.prefixCls,n=e.getKdesignerApi,r=e.getPrefixCls,o=n(),a=(0,F.useCallback)((function(){var e,t=o.selection.getActiveSelectedId(),n=o.data.getAllParentControls(t,!0);return T()(e=n.reverse()).call(e,(function(e){return{id:e.Id,name:e.Name}}))}),[]),i=(0,F.useState)(a),l=(0,f.c)(i,2),c=l[0],u=l[1];(0,F.useEffect)((function(){var e=function(){var e=a();u(e)},t=o.selection.addSelectChangeListener(e),n=o.data.addDataChangeListener(e);return function(){t(),n()}}),[]);var s=(0,F.useCallback)((function(e){var t=e.id;e.disabled||o.selection.setSelect([t])}),[]);return k().createElement(Fi,{items:c,onSelect:s,prefixCls:r(t,"breadcrumb")})},Di=(0,F.memo)((0,F.forwardRef)((function(e,t){var n=e.className,r=(0,F.useContext)(ie).prefixCls,o=t||(0,F.useRef)(null);return k().createElement("div",{ref:o,className:Vn()("".concat(r,"_erroricon"),n)},k().createElement("div",{className:"".concat(r,"_erroricon_content")},k().createElement(M.Icon,{className:"".concat(r,"_erroricon_gantanhao"),prefix:"designericon",type:"gantanhao"})))})));Di.displayName="ErrorIcon";var Pi=Di,Mi=function(e){var t=e.prefixCls,n=e.id,r=(e.rootDom,e.nodeErrorData),o=document.querySelector('[data-control-id="'.concat(n,'"]')),a=(0,F.useRef)(),i=(0,F.useMemo)((function(){var e;return(null===(e=v()(r||{}))||void 0===e?void 0:e.length)||0}),[r]),l=(0,F.useMemo)((function(){return 0===i?"":"存在有".concat(i,"条错误，请修复后再发布！")}),[r,i]);return o?i>0?(null==o||o.setAttribute("data-control-error",n),(0,oe.createPortal)(k().createElement(M.Tooltip,{tip:l},k().createElement(Pi,{ref:a,className:"".concat(t,"-error-tips")})),o)):(null==o||o.removeAttribute("data-control-error"),null):null};Mi.displayName="ErrorTips";var Ri=Mi,_i=new(Me()),Oi=function(e,t){if(null!=_i&&_i.has(e)){var n=_i.get(e);n.set(t,!0),_i.set(e,n)}else{var r=new(Me());r.set(t,!0),_i.set(e,r)}},Bi=function(e,t){return!(null==_i||!_i.has(e))&&_i.get(e).has(t)},ji=function(e){if(e){var t=_i.get(e);t&&(t.clear(),_i.set(e,t))}},Li=function(e,t){_i.set(e,t)},Ui=function(e){return e?_i.get(e):_i},Ki=function(e){return _i.has(e)},Vi=function(e){return!!Ki(e)&&_i.delete(e)},zi=function(e){var t=e.data,n=(e.selection,e.error),r=n.getError();(0,D.useErrorChangeForceUpdateEffect)(e);var o=(0,F.useCallback)((function(e){var t;if(n){var o=e;v()(o||{}).length||ji("controlId");var a={};v()(o).forEach((function(e){var t;o[e]&&(a[e]={},null===(t=o[e])||void 0===t||t.forEach((function(t){var n,r=t.propertyName,o=t.error;a[e][r]?a[e][r]=C()(n=[]).call(n,(0,R.c)(a[e][r]),[{msg:o}]):a[e][r]={msg:[o]}})))})),(null===(t=v()(r))||void 0===t?void 0:t.length)>0&&v()(r).forEach((function(e){if(!a[e]){var t=document.querySelector('[data-control-error="'.concat(e,'"]'));t&&t.removeAttribute("data-control-error")}})),n.replaceError(a)}}),[n,r]);(0,F.useEffect)((function(){return D.eventBus.on(gr,o),function(){D.eventBus.off(gr,o)}}),[o,r]);var a=(0,F.useCallback)((function(e){e.type,e.value;var t=e.actions;if((null==t?void 0:t.length)>0){for(var o=[],a=0;a<t.length;a++){var i=t[a]||{},l=i.type,c=i.value;"DELETE"===l&&r[c]&&o.push(c)}o.length>0&&n.deleteError(o)}}),[r]);(0,F.useEffect)((function(){var e=t.addDataChangeListener(a);return function(){e()}}),[r])},Gi=function(e){if(e){var t=document.querySelector('[data-control-id="'.concat(e,'"]'));t&&(null!=t&&t.scrollIntoViewIfNeeded?t.scrollIntoViewIfNeeded():null==t||t.scrollIntoView({block:"center"}))}},Hi=function(e){var t=e.isPC,n=e.errorControlIdList,r=e.error,o=e.root,a=e.prefixCls,i=(0,F.useState)([]),l=(0,f.c)(i,2),c=l[0],u=l[1],s=(0,F.useState)([]),d=(0,f.c)(s,2),p=d[0],m=d[1],h=(0,F.useMemo)((function(){return{root:o,rootMargin:"0px 0px 0px 0px",threshold:[0,.25,.5,.75,1],trackVisibility:!0,delay:200}}),[o]),y=(0,F.useCallback)((function(e,t){var n,r=window.IntersectionObserver;if(r&&e)return n=new r((function(e){t(e)}),h),n.observe(e),n}),[h]),b=function(e,t){return w()(e).call(e,t)?g()(e).call(e,(function(e){return e!==t})):e},E=(0,F.useCallback)((function(e,t,n){t.forEach((function(t){var n=t.rootBounds,r=n.top,o=n.height;if(t.isIntersecting)m((function(t){return b(t,e)})),u((function(t){return b(t,e)}));else{var a=t.boundingClientRect.y>o,i=t.boundingClientRect.y<r;a?m((function(){var t;return w()(p).call(p,e)?p:C()(t=[]).call(t,(0,R.c)(p),[e])})):i&&u((function(){var t;return w()(c).call(c,e)?c:C()(t=[]).call(t,(0,R.c)(c),[e])}))}}))}),[p,c]);(0,F.useEffect)((function(){if((null==n?void 0:n.length)>0){for(var e={},t=function(){var t,a=n[o];if(r[a]&&null!==(t=v()(r[a]))&&void 0!==t&&t.length){var i=document.querySelector('[data-control-id="'.concat(a,'"]'));e[a]=y(i,(function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];E.apply(void 0,C()(e=[a]).call(e,n))}))}else{var l;null===(l=e[a])||void 0===l||l.disconnect(),m((function(e){return b(e,a)})),u((function(e){return b(e,a)}))}},o=0;o<(null==n?void 0:n.length);o++)t();return function(){v()(e).forEach((function(t){var n;null===(n=e[t])||void 0===n||n.disconnect()}))}}}),[t,n,p,c]),(0,F.useEffect)((function(){null!=n&&n.length||(m([]),u([]))}),[n]);return k().createElement(k().Fragment,null,c.length>0&&k().createElement("div",{className:Vn()("".concat(a,"_errorguide"),"".concat(a,"_errorguide_top")),title:"定位到错误的字段",onClick:function(){if(c.length>0){var e=c[0];Gi(e)}}},k().createElement(M.Icon,{className:"".concat(a,"_errorguide_shuidi"),prefix:"designericon",type:"shuidizhixiang"}),k().createElement(Pi,{className:"".concat(a,"_errorguide_icon")})),p.length>0&&k().createElement("div",{className:Vn()("".concat(a,"_errorguide"),"".concat(a,"_errorguide_bottom")),title:"定位到错误的字段",onClick:function(){if(p.length>0){var e=p[0];Gi(e)}}},k().createElement(M.Icon,{className:"".concat(a,"_errorguide_shuidi"),prefix:"designericon",type:"shuidizhixiang"}),k().createElement(Pi,{className:"".concat(a,"_errorguide_icon")})))},qi=function(e){var t=(0,F.useContext)(ie),n=t.getKdesignerApi,r=t.prefixCls,o=t.isPC,a=(0,F.useMemo)((function(){return n()}),[]),i=a.data,l=(a.selection,a.error),c=i.getRootId(),u=l.getError(),s=(0,F.useMemo)((function(){return v()(u)}),[u]),d=i.getData(),p=document.getElementById(je),m=document.querySelector('[data-control-id="'.concat(c,'"]')),g=(0,F.useReducer)((function(e){return e+1}),0),h=(0,f.c)(g,2)[1];return(0,D.useErrorChangeForceUpdateEffect)(a),zi(a),(0,F.useLayoutEffect)((function(){h()}),[o,d.Items.length]),k().createElement(k().Fragment,null,T()(s).call(s,(function(e){return k().createElement(Ri,{key:e,prefixCls:r,id:e,nodeErrorData:u[e],rootDom:m})})),m&&(0,oe.createPortal)(k().createElement(Hi,{isPC:o,prefixCls:r,errorControlIdList:s,error:u,root:p}),m))},Yi=(0,F.memo)((function(e){e.field;var t,n=(0,F.useContext)(ie),r=n.prefixCls,o=n.getKdesignerApi,a=(0,F.useMemo)((function(){return"".concat(r,"-bizbuttonpanel")}),[r]),i=(0,F.useReducer)((function(e){return e+1}),0),l=(0,f.c)(i,2)[1],c=o(),u=c.data,s=c.selection;(0,F.useEffect)((function(){var e=u.addDataChangeListener(g);return function(){e()}}),[]);var d=u.findControl,p=u.getData(),v=Ae()(t=p[G]).call(t,(function(e){return e[U]===Ve}))||{},m=Gn(v,p,{ctrlType:Ke},d),g=(0,F.useCallback)((function(e){e.type;var t=e.value;if(Array.isArray(null==t?void 0:t.Items)){for(var n=null,r=!1,o=t.Items,a=0;a<o.length;a++){var i=o[a],c=i[U];if(c===Ve)n=i;else if(c===Ke){r=!0;break}}if(!r&&n){var f=n.Id,d=u.getRootId();u.deleteControl((0,D.createDeleteAction)([f])).then((function(){s.setSelect([d])}))}}l()}),[]),h=re(v),y=Pn();if(0!==(null==m?void 0:m.length))return k().createElement("div",(0,_.c)({className:a},h,{"data-drag-id":v.Id},y),k().createElement("div",{className:"".concat(a,"-main"),id:"biz-button-panel"},k().createElement("div",{className:"".concat(a,"-main-content")},k().createElement("div",{className:"".concat(a,"-main-scroll")},m))))}));Yi.displayName="BizButtonPanel";var Wi=Yi,Qi=(0,F.memo)((function(e){var t=(0,F.useContext)(ie),n=t.getKdesignerApi,r=t.prefixCls,o=t.isPC,a=t.fieldStatusSettingMode,i=t.floatMenu,l=(0,F.useReducer)((function(e){return e+1}),0),c=(0,f.c)(l,2)[1],u=(0,F.useMemo)((function(){return n()}),[]),s=u.data,d=u.selection,p=s.getRootId(),v=s.findControl(p),m=ja(v),g=(0,F.useRef)(null),h=fn(),y=(0,F.useCallback)((function(){d.getSelection().forEach((function(e){var t;return(0,R.c)(document.querySelectorAll(C()(t="[".concat(q,'="')).call(t,e,'"]'))).forEach((function(e){e.getAttribute(Q)||e.setAttribute(Q,"true")}))}))}),[]),b=(0,F.useCallback)((function(e){e.type,e.value;c(),setTimeout((function(){y()}),100)}),[]);(0,F.useEffect)((function(){var e=d.addSelectChangeListener(La),t=s.addDataChangeListener(b);return function(){e(),t()}}),[]),(0,F.useLayoutEffect)((function(){y()}),[o]),Za(g),Ja(v,u);var E=(0,F.useMemo)((function(){return{prefixCls:"kd"}}),[]);return k().createElement(k().Fragment,null,k().createElement(ai,null),k().createElement(M.ConfigProvider,{value:E},k().createElement("div",{className:"".concat(r,"-main-view-container"),ref:g,id:je,tabIndex:-1},k().cloneElement(m,{onClick:h}),k().createElement(Wi,{field:v})),!a&&k().createElement(ki,null)),a?k().createElement(Si,{floatMenu:i}):k().createElement(xi,null),k().createElement(qi,null))}));Qi.tabKey="MainView",Qi.tabName="主视图",Qi.displayName="MainView";var Xi=Qi,Zi="kdesigner-tree-node-drag-line-by-control",Ji="control",$i="",el=["\\"],tl=function(e){e.preventDefault()},nl=function(){var e=(0,F.useContext)(ie).getKdesignerApi,t=(0,F.useMemo)((function(){return e()}),[]),n=t.data,r=t.views,o=t.selection,a=(t.meta,n.getRootId()),i=(0,F.useContext)(D.GlobalConfigContext).showMessage,l=(0,F.useCallback)((function(e){!function(e,t){"outline"!==(Ji=null==t?void 0:t.getViewActiveKey("left"))&&t&&t.setViewActiveKey("left")("outline"),$i=$i||Ji}(0,r)}),[]),c=(0,F.useCallback)((function(e){!function(e){var t;if(!el.some((function(t){return e.indexOf(t)>=0}))){var n=e.replace("/","\\/").replace("=","\\="),r=document.querySelector(".kdesigner-tree-node-item-id".concat(n," .kdesigner-tree-node-root"));if(r){var o=null==r?void 0:r.className;w()(o).call(o,Zi)||(r.className=C()(t="".concat(o," ")).call(t,Zi))}}}(e)}),[]),u=(0,F.useCallback)((function(e){var t;tl(e);var n=document.querySelector(C()(t="[".concat(q,"='")).call(t,a,"']"));null==n||n.removeAttribute(te)}),[]);(0,F.useEffect)((function(){return D.eventBus.on("drag-control-tab",l),D.eventBus.on("drag-control_".concat(a),c),document.body.addEventListener("dragend",u),function(){D.eventBus.off("drag-control-tab",l),D.eventBus.off("drag-control_".concat(a),c),document.body.removeEventListener("dragend",u)}}),[]);var s=(0,F.useCallback)((function(e){var t,r=e.event,o=e.node;r.stopPropagation();var i=o.nodeKey;(i=i.substr(2))===a&&tl(r);var l=document.querySelector(C()(t="[".concat(q,"='")).call(t,a,"']"));null==l||l.setAttribute(te,i);var c=n.findControl(i),u=c._Type_,s=c.Name;hn(r,u,s)}),[a]),f=(0,F.useCallback)((function(e){e.event,e.node}),[]),d=(0,F.useCallback)((0,Fe.debounce)((function(e){e.event;var t=e.node;D.eventBus.emit("drag-tree-node",t.key)}),100),[]),p=(0,F.useCallback)((function(e){e.event,e.node}),[]),v=(0,F.useCallback)((function(e){e.event;var t,r=e.node,l=e.dropPosition,c=r.key,u=document.querySelector(C()(t="[".concat(q,"='")).call(t,a,"']")).dataset.outlineDragTreeNode,s=we()(c).call(c,2),f=n.findControl(u),d=n.findControl(s);s===a&&0!==l||(f.Id!==d.ParentId?n.swapControl((0,D.createSwapAction)({origin:u,target:we()(c).call(c,2),isPrev:-1===l&&s!==a,dropPosition:l})).then((function(e){o.setSelect([u])})):i("控件类型不符合，不能添加。"))}),[]);return{onDragStart:s,onDragEnter:f,onDragOver:d,onDragLeave:p,onDrop:v,onDragEnd:(0,F.useCallback)((function(e){e.event;var t,n=e.node,r=document.querySelector(C()(t="[".concat(q,"='")).call(t,a,"']"));null==r||r.removeAttribute(te),D.eventBus.emit("drag-tree-node",n.key)}),[])}};function rl(e,t){var n=void 0!==ge()&&ye()(e)||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"==typeof e)return ol(e,t);var r=we()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return ve()(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ol(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function ol(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function al(e,t){var n=v()(e);if(i()){var r=i()(e);t&&(r=g()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function il(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?al(Object(n),!0).forEach((function(t){(0,d.c)(e,t,n[t])})):s()?Object.defineProperties(e,s()(n)):al(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}var ll=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=(0,R.c)(e),o=[],a={},i=[];return r.forEach((function(e,r){var l,c=e.Id,u=e.Name,s=e.ParentId,f=e.Key,d=e._Type_,p=e.Multi,v=e.SelectItemType,m=t.getControlMeta(d).Name,g=s?C()(l="[".concat(m,"]")).call(l,u||f||c):"".concat(u||f||c),h={key:n?"${"+"model.".concat(f)+"}":f,title:g,parentId:s,id:c,type:d,isLeaf:!0};if(Vt(d)&&(h.selectable=!1,h.isLeaf=null),st(d)&&(h.title+="（".concat(1==v?"多选":"单选","）")),et(d)){var y=t.getControlPropertyDefaultValue(d,"BillEntityIdEx"),b=il({BillEntityId:y,BillEntityIdEx:y},e),E=b.BillEntityId,I=b.BillEntityIdEx;h.title+="（".concat("1"===p?"多条":"单条","）"),h.children=[],h.isAsyncNode=!0,h.isLeaf=null,h.BillEntityId=E,h.BillEntityIdEx=I}var x=n?"${"+"model.".concat(f,"_startdate")+"}":"".concat(f,"_startdate"),T=n?"${"+"model.".concat(f,"_enddate")+"}":"".concat(f,"_enddate");Je(d)?(o.push(il(il({},h),{},{key:x,title:g+".开始"})),o.push(il(il({},h),{},{key:T,title:g+".结束"}))):o.push(h),h.parentId?Je(d)?(i.push(il(il({},h),{},{key:x,title:g+".开始"})),i.push(il(il({},h),{},{key:T,title:g+".结束"}))):i.push(h):a=il(il({},h),{},{isLeaf:!1})})),function e(t,n,r){var o=(0,R.c)(n),a=0;n.forEach((function(n,i){if((null==n?void 0:n.parentId)===t.id){var l,c=C()(l="".concat(r,"_")).call(l,a++);ue()(o).call(o,i,1,void 0),t.children?t.children.push(n):t.children=[n],e(n,o,c)}}))}(a,i,"0"),[a]},cl=function(e){return"${"+"model.".concat(e)+"}"},ul=function e(t){var n=t.options,r=t.currRefbillTableKey,o=void 0===r?"":r,a=t.needFormatKey,i=void 0!==a&&a;return n?n.reduce((function(t,n){var r=n.key,a=n.title,l=n.titlePrefix,c=n.children,u=n.type,s=n.entityId,f=n.isMulti,d=o===r?l.replace("[多条]","[循环中：单条]"):l,p={key:i?cl(r):r,title:a,titlePrefix:d,type:u,isMulti:f,selectable:!0};return"group"===u&&(p.selectable=!1),et(u)&&(p.BillEntityId=s,p.BillEntityIdEx=s),c&&(p.children=e({options:c,needFormatKey:i})),C()(t).call(t,p)}),[]):n},sl=function e(t){var n=t.metaApi,r=t.options;return r?r.reduce((function(t,r){var o,a=r.key,i=r.title,l=r.children,c=r.type,u=r.entityId,s=r.isMulti,f=r.titlePrefix,d=null!=a&&w()(a).call(a,"fbasedataid")?a.split(".fbasedataid")[0]:a,p=(null==d||null===(o=d.split("."))||void 0===o?void 0:o.length)||0;if(!Vt(c)&&p>1)return t;var v={key:"${"+"model.".concat(a)+"}",title:i,titlePrefix:f,type:c,isMulti:s};return(Vt(c)||it(c))&&(v.selectable=!1,v.isLeaf=null),u&&(v.entityId=u),l&&(v.children=e({options:l,metaApi:n})),C()(t).call(t,v)}),[]):r},fl=function e(t){var n=t.options;return n?n.reduce((function(t,n){var r,o=n.key,a=n.title,i=n.titlePrefix,l=n.children,c=n.type,u=n.isMulti,s=n.sourceForm,f={key:o,title:a,titlePrefix:i};return l&&!u&&(f.children=e({options:l})),"1"===s||o.split(".").length>1&&void 0!==s?t:et(c)||tt(c)||lt(c)?C()(t).call(t,f):(f.selectable=!1,null!=f&&null!==(r=f.children)&&void 0!==r&&r.length?C()(t).call(t,f):t)}),[]):n},dl=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"key";return t.reduce((function(t,r){var o=[];return r[n]&&o.push(r[n]),r.children&&o.push.apply(o,(0,R.c)(e(r.children,n))),C()(t).call(t,o)}),[])},pl=function(e){var t,n=[],r={},o=rl(e);try{for(o.s();!(t=o.n()).done;){var a=t.value;r[a.Id]=il(il({},a),{},{children:[]})}}catch(e){o.e(e)}finally{o.f()}var i,l=rl(e);try{for(l.s();!(i=l.n()).done;){var c=i.value;c.ParentId?r[c.ParentId]&&r[c.ParentId].children.push(r[c.Id]):n.push(r[c.Id])}}catch(e){l.e(e)}finally{l.f()}return n},vl={},ml="id",gl="",hl=(0,F.memo)((0,F.forwardRef)((function(e,t){var n=e.data,r=(0,F.useContext)(ie),o=r.getKdesignerApi,a=r.prefixCls,i=r.getPrefixCls,l=(0,F.useMemo)((function(){return o()}),[]),c=l.data,u=l.selection,s=c.getRootId(),d=(0,F.useState)(!0),p=(0,f.c)(d,2),m=p[0],h=p[1],y=(0,F.useState)(!1),b=(0,f.c)(y,2),E=b[0],I=b[1],x=(0,F.useState)([s]),N=(0,f.c)(x,2),A=N[0],S=N[1],P=(0,F.useState)(600),_=(0,f.c)(P,2),B=_[0],j=_[1],L=(0,F.useState)(void 0),K=(0,f.c)(L,2),V=K[0],z=K[1],H=(0,F.useRef)(null),q=(0,F.useRef)(null),Y=(0,F.useState)(n),W=(0,f.c)(Y,2),Q=W[0],X=W[1],Z=(0,F.useRef)(null);Za(H,!0);var J=nl(),$=J.onDragStart,ee=J.onDragEnter,te=J.onDragOver,ne=J.onDragLeave,re=J.onDrop,oe=J.onDragEnd,ae=i&&i(a,"outline"),le=(0,F.useState)([]),ce=(0,f.c)(le,2),se=ce[0],fe=ce[1],de=(0,F.useMemo)((function(){var e="".concat(ae,"-search-prefix-icon");return k().createElement(M.Icon,{prefix:"designericon",type:"sousuo",className:e})}),[ae]),pe=(0,F.useCallback)((function(e){var t=e.value,n=t.reduce((function(e,t){var n,r;return C()(n=[]).call(n,(0,R.c)(e),[C()(r="".concat(ml)).call(r,t)])}),[]);S(n);var r=(0,R.c)(se);t.forEach((function(e){for(var t,n=e;n!==s&&""!==n;){var o,a=C()(o="".concat(ml)).call(o,n);!w()(r).call(r,a)&&r.unshift(a),n=c.getParentControlId(n)}var i=C()(t="".concat(ml)).call(t,s);!w()(r).call(r,i)&&r.unshift(i)})),fe(r)}),[s,se]),me=(0,F.useCallback)((function(e){var t=e.value;X(t)}),[]);(0,F.useEffect)((function(){var e=u.addSelectChangeListener(pe),t=c.addDataChangeListener(me);return function(){e(),t()}}),[pe]),(0,F.useEffect)((function(){var e=(0,Fe.debounce)((function(){var e=document.body.clientHeight-30-80-20;j(e),Z.current&&(Z.current.style.height="".concat(e,"px"))}),100);return window.addEventListener("resize",e),function(){vl={},window.removeEventListener("resize",e)}}),[]),(0,F.useEffect)((function(){var e=document.body.clientHeight-30-80-20;j(e),Z.current&&(Z.current.style.height="".concat(e,"px"))}),[Z]);var ge=(0,F.useCallback)((function(e){var t;if(gl!==e){var n=(0,R.c)(se),r=c.getParentControlId(e),o=C()(t="".concat(ml)).call(t,e);for(!w()(n).call(n,o)&&n.push(o);e&&r&&r!==s;){var a;r=c.getParentControlId(r);var i=C()(a="".concat(ml)).call(a,r);w()(n).call(n,i)||n.push(i)}gl=e,fe(n)}}),[se]);(0,F.useEffect)((function(){return D.eventBus.on("drag-control_".concat(s),ge),function(){D.eventBus.off("drag-control_".concat(s),ge)}}),[ge]);var he=(0,F.useCallback)((function(){var e=!m;if(h(e),e)fe([]),Z.current&&(Z.current.scrollTop=0);else{var t,n=T()(t=Q[G]).call(t,(function(e){var t;return C()(t="".concat(ml)).call(t,e[O])}));fe(n)}}),[m,Q,Z.current]),ye=(0,F.useCallback)((function(){I(!E)}),[E]),be=(0,F.useCallback)((function(e){var t=T()(e).call(e,(function(e){return e.substr(2)}));u.setSelect(t);var n=e[0],r=Ur()(se).call(se,(function(e){return n===e})),o=(0,R.c)(se);r>=0?ue()(o).call(o,r,1):o.push(n),fe(o)}),[se]),Ce=(0,F.useMemo)((function(){return function(e,t,n){var r=(0,R.c)(e[G]),o=[],a=[],i={},l=[];return r.forEach((function(e,r){var a,c,u,s=e.Id,f=e.Name,d=e.ParentId,p=e.Key,m={key:s,title:f||p||s,parentId:d,Hidden:"4"===e.Status,disabled:e._Root_};null!=n&&n.prefix&&(m=il(il({},m),{},{key:C()(c="".concat(n.prefix)).call(c,s),parentId:d?C()(u="".concat(n.prefix)).call(u,d):d})),t&&(m.title=C()(a="".concat(f,"（")).call(a,p,"）")),n&&r>0&&v()(n).forEach((function(t){m[t]=e[U]})),o.push(m),(lt(e[U])&&"1"===e.ShowType||et(e[U])&&null!=e&&e.RefTableId&&"2"===(null==e?void 0:e.ShowType))&&(m.Hidden=!0),m.parentId?l.push(m):i=il({},m)})),function e(t,n,r){var o=(0,R.c)(n),i=0;t.parentId||a.push(il(il({},t),{},{level:r})),n.forEach((function(n,l){if((null==n?void 0:n.parentId)===t.key){var c,u=C()(c="".concat(r,"_")).call(c,i++);t.Hidden&&(n.Hidden=!0),a.push(il(il({},n),{},{level:u})),ue()(o).call(o,l,1,void 0),t.children?t.children.push(n):t.children=[n],e(n,o,u)}}))}(i,l,"0"),i.searchData=a,[i]}(Q,E,{prefix:ml})}),[Q,E]),Ee=(0,F.useCallback)((function(e){var t,n,r,o,a,i=(0,R.c)((null==Ce||null===(t=Ce[0])||void 0===t?void 0:t.searchData)||[]),l=Qr()(n=e.target.value).call(n),c=T()(r=En()(o=T()(a=g()(i).call(i,(function(e){var t,n,r;return(null===(t=e.key)||void 0===t?void 0:w()(n=we()(t).call(t,2)).call(n,l))||w()(r=e.title).call(r,l)}))).call(a,(function(e){var t;return{id:null===(t=e.key)||void 0===t?void 0:we()(t).call(t,2),level:e.level}}))).call(o,(function(e){return e.level}))).call(r,(function(e){return e.id}));vl[l]=(0,R.c)(c),z(l)}),[Ce]),Ie=(0,F.useCallback)((function(){if(!V||!vl[V])return null;var e=vl[V],t=e.length;if(t<=0)return s;var n=u.getActiveSelectedId();if(!w()(e).call(e,n))return e[0];var r=e.indexOf(n);return r===t-1?r=0:r++,e[r]}),[V]),xe=(0,F.useCallback)((function(){q.current&&q.current.focus();var e=Ie(),t=c.findControl(e);e&&u.setSelect([t?e:s])}),[q,Ie]),Te=function(e,t){e.stopPropagation(),e.preventDefault();var n=(0,R.c)(se),r=n.indexOf(t);r>=0?ue()(n).call(n,r,1):n.push(t),fe(n)},Ne=[function(e){return k().createElement(M.Icon,{prefix:"designericon",type:"shouqi3",onClick:function(t){return Te(t,e.nodeKey)}})},function(e){return k().createElement(M.Icon,{prefix:"designericon",type:"zhankai3",onClick:function(t){return Te(t,e.nodeKey)}})}],Ae=(0,F.useCallback)((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).nodeKey;if(!e)return k().createElement(M.Icon,{prefix:"designericon",type:"Flexmianban"});var t=vn((c.findControl(we()(e).call(e,2))||{})[U],"Flexmianban");return k().createElement(M.Icon,{prefix:"designericon",type:t})}),[]),Se=(0,F.useCallback)((function(e){return e.Hidden?"kdesigner-form-designer-outline-tree-node-disabled":""}),[]);return k().createElement("div",{className:"".concat(ae,"-wrap")},k().createElement("div",{className:"".concat(ae,"-search")},k().createElement(M.Input,{size:"small",prefix:de,placeholder:"搜索大纲",borderType:"bordered",className:"".concat(ae,"-search-input"),onChange:Ee,onPressEnter:xe,value:V,ref:q,allowClear:!0}),k().createElement(M.Icon,{prefix:"designericon",className:"".concat(ae,"-search-icon"),onClick:he,type:m?"shouqiquanbu":"zhankaiquanbu",title:m?"全部展开":"全部收起"}),k().createElement(M.Icon,{prefix:"designericon",className:"".concat(ae,"-search-icon"),onClick:ye,type:E?"zhanshi":"yincang",title:E?"隐藏标识":"显示标识"})),k().createElement("div",{ref:H,className:"".concat(ae,"-tree"),tabIndex:-1},k().createElement(M.Tree,{name:"OutlineTree",treeData:Ce,height:B,width:280,onExpand:function(e,t){var n,r=t.expanded,o=t.node.key,a=g()(e).call(e,Boolean);a=r?C()(n=[o]).call(n,(0,R.c)(a)):g()(a).call(a,(function(e){return e!==o})),a=ve()(new(bn())(a)),fe(a)},expandedKeys:se,className:ae,virtual:!1,draggable:!0,icon:Ae,showIcon:!0,selectedKeys:A,onSelect:be,onDragStart:$,onDragEnter:ee,onDragOver:te,onDragLeave:ne,onDrop:re,onDragEnd:oe,ref:Z,setTreeNodeClassName:Se,switcherIcon:Ne})))})));hl.tabKey="Outline",hl.tabName="大纲",hl.displayName="Outline";var yl=hl,bl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALgAAABoCAMAAAB108raAAAAb1BMVEUAAADX3unW2ebX3ujY3+nk6OnW3OjZ3urX3eXX3OjZ3unX3efX3ejX3ujZ3uvY3eje3u/X3OfX3ejX3unX3ejW3ejX3ejY3ujX3ejh5/Pf5e/X3OjX3enX3enY3ejW3OjY3eji6PPW3OfK0NvQ1uBUAKD9AAAAIXRSTlMADgcbKgQgFSQnGDQ8QxI4CzE/LkdJ+Evo+si0aH1e2o9Ktf8OAAADNElEQVR42u3a21KrMBSA4ZVAoJwpKm2BHqB9/2fcTG0qrUAOpu7FmE9mqOjFL7MIOAO8BN2c6uO2LLfH+rShsBDpoS67gbI+pIBfvufVA+U+B9xYs+1GbRsGiDlVN6lyAK1s283YZoDUoexmlQdA6dAJoSzPyoclsCkCQoKiqR8OI5wWZztcQgjckWb4E3RXKKuGi/b00l5hWxWbweIxu9w0gEp+LzuG8wv8Ftc9dH/v8kSXwB4QSUs+35Fw0SkxPXEdJE7nHuNiXn8NsPgyqAENWsosGQ2fFTz/WWykxpfwP28DWJz4EMgN1AmwqOVuLg26IT/eihKYVfB7FGDB1wsPZgV87QEs+FXHYBbh1zBg0d1I/x4WNlzAhttwSTbchkuy4TZckg234ZL+cHhS7VpDdlUCvyZpjXpNOaMk9AmFocpseAXGkSDe3MQrAtzObPgODHOKjweFA59aw8CosHj/JvbRhzP3fdQbwx2ex8mEjGIOp3EyKc7xhtOsmJFRtOHrYtYb1nAvFkAaTuKFhruZyAvDaegF67XrORRU5RkXZdFVFvHvPz9HxsOHTxhc4RJQ4kUcz372onASfTyJVNLZOhJ4TTh1J27Ussha7AXhpEhGxanMgzehDMI3MfPhYTLJma/2PfdqFbhixsOdiegi6YUwLRXkaoTvusv5fOl2rQRSzPJhiuO6psO7803XimVFERfxgyIeHKNT3YEiccrlfHdphWIBF0b5q2DVb8EV/zzYc1/H5c4314nDswdxFvfbfd8LYQRdKRPO9/mBcM4zkTWMcDxlEidc6ZRH2chdOrt+3aTwDfXUSU24wpRHQiNTThx1opDzk1ZgLcbgmb+McALPQked6VF5E3NY2peGKfsK12D64nQVeISPigbTy6GrxGPa4aZvQIGaFYVeqsH0LT9QLWcAQDSYfshaqfK0w8V4eGs0nCMP4TnJ++0/hHvqGOQaEITnQDWYDnfUpUsN94FpMB0ealhuuA7T4b4GHOHplZ/63/QH+43vsYWnGlCEEw02/CfhuQa9cMOoBhv+J8OZBhv+E6DBhtvwARtuw385fDEvTA4t7BXVJb8UjPU17H+K3WpesHGw6wAAAABJRU5ErkJggg==",Cl=["NCPG_Hide"],El=function(e){var t=(0,F.useContext)(ie),n=t.getKdesignerApi,r=t.prefixCls,o=t.billPropsData,a=t.dispatchBillData,i=t.invokeAction,l=(0,F.useMemo)((function(){return n()}),[]),c=l.selection,u=l.data,s=(0,F.useState)(null),d=(0,f.c)(s,2),p=d[0],v=d[1],m=u.getRootId(),h=function(){var e=c.getSelection();if(1===(null==e?void 0:e.length)){var t=u.findControl(e[0]),n=u.getParentControl(e[0])||{},r=n._Type_,a=n.BillEntityIdEx;!a||!lt(r)||null!=o&&o[a]||i("getDesignerMetadata",[a]),v(t)}else v({})},y=(0,D.useActivedSelectedId)({dataContext:u,selectionContext:c}).activedSelectId,b=(0,F.useMemo)((function(){return u.getParentControl(y)}),[y]),C=(0,F.useCallback)((function(e){var t;if(null!=e&&e.data){var n=(null==e?void 0:e.data)||{},r=T()(t=n.entitymeta.Items).call(t,(function(e){return e.Id}));a({key:Vr,payload:{form:e.billEntityIdEx||n.id,info:{data:n,ids:r}}})}}),[]);if((0,F.useEffect)((function(){return D.eventBus.on(br,C),function(){D.eventBus.off(br,C)}}),[C]),(0,F.useEffect)((function(){var e=c.addSelectChangeListener(h);return function(){e()}}),[h]),(0,F.useEffect)((function(){h()}),[]),null!=b&&b.BillEntityIdEx&&lt(null==b?void 0:b._Type_)){if(!Ao(b,(null==o?void 0:o.innerForm)||[]))return k().createElement(qn.EmptyData,{src:bl,desc:"无法编辑应用外表单内容的属性"});if((null==b?void 0:b.BillEntityIdEx)===u.getRootId())return k().createElement(qn.EmptyData,{src:bl,desc:"表格为当前表单时无法编辑内容属性"});if(p.RefTableId||p.RefBillId)return k().createElement(qn.EmptyData,{src:bl,desc:"无法编辑属性，请于原单编辑"})}return k().createElement(k().Fragment,null,(null==p?void 0:p.Id)&&m!==p.Id&&k().createElement(si,{field:p,className:"".concat(r,"_property_switchfield")}),k().createElement(D.PropertyView,(0,_.c)({},e,{filterPropertyHandler:function(e){return(0,yt.produce)(e,(function(e){return g()(e).call(e,(function(e){return!w()(Cl).call(Cl,e.Key)}))}))}})))};El.tabKey="property",El.tabName="属性";var Il=El,xl=r(3020),Tl=r.n(xl);function Nl(e,t){var n=v()(e);if(i()){var r=i()(e);t&&(r=g()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Al(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nl(Object(n),!0).forEach((function(t){(0,d.c)(e,t,n[t])})):s()?Object.defineProperties(e,s()(n)):Nl(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}var Sl=[{label:"4",value:4},{label:"5",value:5},{label:"6",value:6},{label:"7",value:7},{label:"8",value:8},{label:"9",value:9},{label:"10",value:10}],wl=function(e,t){return Al(Al({},e),t)},Fl=(0,F.forwardRef)((function(e,t){var n=e.className,r=(0,F.useContext)(ie),o=r.getBillnoSetting,a=r.setBillnoSetting,i=M.Form.useForm(),l=(0,f.c)(i,1)[0],c=(0,F.useReducer)(wl,o()),u=(0,f.c)(c,2),s=u[0],p=u[1],v=s.billNoPreview,m=s.billNoYMD,g=s.billNoHMS,h=s.billNoPrefix,y=s.billNoRandomNum,b=(0,F.useCallback)((function(e){e.billNoPreview;var t=e.billNoYMD,n=e.billNoHMS,r=e.billNoPrefix,o=e.billNoRandomNum,a=r||"";t&&(a+="".concat(Kt(new Date,"yyyyMMdd"))),n&&(a+="".concat(Kt(new Date,"hhmmss"))),o&&(a+="".concat(function(e){for(var t=[];t.length<e;)t.push(Math.floor(10*Math.random()));return t.join("")}(o))),p({billNoPreview:a})}),[m,g,h,y]),C=(0,F.useCallback)((function(e){var t=e.target.value;p({billNoPrefix:t}),b(Al(Al({},s),{},{billNoPrefix:t}))}),[p,b]),E=(0,F.useCallback)((function(e){var t=!s[e];p((0,d.c)({},e,t)),b(Al(Al({},s),{},(0,d.c)({},e,t)))}),[s,p,b]),I=(0,F.useCallback)((function(e){p({billNoRandomNum:e}),b(Al(Al({},s),{},{billNoRandomNum:e}))}),[p,b]),x=(0,F.useCallback)((function(){return new(jr())((function(e,t){l.validateFields().then((function(t){Tl()(t);a(s),e(!0)})).catch((function(e){return t(e)}))}))}),[a,s]);return(0,F.useImperativeHandle)(t,(function(){return{saveForm:x}}),[x]),k().createElement("div",{className:"".concat(n,"-modal-body")},k().createElement(M.Form,{layout:"vertical",form:l,labelWidth:100,wrapperWidth:"100%",onValuesChange:function(e,t){}},k().createElement("div",{className:Vn()("".concat(n,"-form-item"),"".concat(n,"-form-item-vertical"))},k().createElement("div",{className:"".concat(n,"-form-item-label")},"编码示意"),k().createElement("div",{className:"".concat(n,"-form-item-desc")},v||"-")),k().createElement(M.Form.Item,{label:"前缀字符",name:"billNoPrefix",required:!0,validateTrigger:"onChange",className:"".concat(n,"-form-item-validate-nowrap"),rules:[{required:!0,message:"请输入前缀字符"},{type:"string",pattern:/^([a-zA-Z]|[-@#$%^&*_]|\[|\])+$/,message:"仅支持输入大小写字母、特殊字符（-@#$%^&*[]_）"}]},k().createElement(M.Input,{type:"text",borderType:"bordered",size:"middle",value:s.billNoPrefix,placeholder:"最多不超过8位",maxLength:8,onChange:C})),k().createElement("div",{className:Vn()("".concat(n,"-form-item"),"".concat(n,"-form-item-horizontal"))},k().createElement("div",{className:"".concat(n,"-form-item-label")},"年月日"),k().createElement(M.Switch,{checked:s.billNoYMD,onClick:function(){return E("billNoYMD")}})),k().createElement("div",{className:Vn()("".concat(n,"-form-item"),"".concat(n,"-form-item-horizontal"))},k().createElement("div",{className:"".concat(n,"-form-item-label")},"时分秒"),k().createElement(M.Switch,{checked:s.billNoHMS,onClick:function(){return E("billNoHMS")}})),k().createElement(M.Form.Item,{label:"n位随机数",name:"billNoRandomNum",required:!0,rules:[{required:!0,message:"请选择n位随机数"}]},k().createElement(M.Select,{placeholder:"请选择",borderType:"bordered",value:s.billNoRandomNum,options:Sl,onChange:I}))))})),kl=function(e){var t=e.className,n=e.onCancel,r=e.onConfirm;return k().createElement("div",{className:"".concat(t,"-modal-footer")},k().createElement(M.Button,{onClick:n,type:"second",size:"small",className:"".concat(t,"-modal-cancel-btn")},"取消"),k().createElement(M.Button,{type:"primary",size:"small",style:{marginLeft:"12px"},onClick:r,className:"".concat(t,"-modal-ok-btn")},"确定"))},Dl=function(e){var t=e.className,n=e.visible,r=e.setVisible,o=e.onConfirm,a=(0,F.useRef)(null),i=function(){r(!1)};return k().createElement(M.Modal,{mask:!0,visible:n,body:k().createElement(Fl,{className:t,ref:a}),bodyStyle:{justifyContent:"start",alignItems:"start",overflowX:"hidden",overflowY:"auto",flexDirection:"column"},titleIcon:null,className:"".concat(t,"-modal"),footer:k().createElement(kl,{className:t,onConfirm:function(){(0,a.current.saveForm)().then((function(){null==o||o(),r(!1)})).catch((function(e){}))},onCancel:i}),maskClosable:!1,width:320,height:438,title:"设置表单编号格式",closable:!0,destroyOnClose:!0,onCancel:i,onOk:i})};function Pl(e,t){var n=v()(e);if(i()){var r=i()(e);t&&(r=g()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ml(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pl(Object(n),!0).forEach((function(t){(0,d.c)(e,t,n[t])})):s()?Object.defineProperties(e,s()(n)):Pl(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}var Rl="System_CategoryBillNo",_l=["NoCodeBillNoField"],Ol=["NoCodeCreateDateField","NoCodeCreatorField","NoCodeModifyDateField","NoCodeModifierField"],Bl=function(e){var t=e.prefixCls,n=e.data,r=(0,F.useContext)(D.DataFactoryContext).dataFactory,o=(0,F.useContext)(D.GlobalConfigContext),a=o.env,i=o.keywordMapping,l=(0,F.useContext)(ie),c=l.getKdesignerApi,u=l.showMessage,s=c(),f=s.data,d=s.selection,p=s.meta,v=n.Name,m=n.Id,g=(0,(0,F.useContext)(D.GlobalConfigContext).getOutlineItemIcon)(m),h=(0,F.useCallback)((function(){var e,t,n=f.getRootId(),o=d.getActiveSelectedId(),a=f.findControl(o);a=f.getContainerControl(a);var l=p.canAdd(m,a[i.type]);if(!(!0===l||"object"===(0,Ce.c)(l)&&l.success))return(null==l?void 0:l.message)&&u(l.message),!1;var c=null===(e=p.getControlMeta(null===(t=a)||void 0===t?void 0:t[i.type]))||void 0===e?void 0:e.IsContainer,s=r({type:m,parentId:c?a[i.id]:n}),v=a[i.id]===o?-1:f.findControlIndex(o)+1;f.addControl((0,D.createAddAction)(s,{index:v})).then((function(e){if(null!=e&&e.length){var t=e[0].value;d.setSelect(Array.isArray(t)?[t[0][i.id]]:[t[i.id]])}}))}),[m]),y=(0,F.useCallback)((function(e){var t={type:"control",data:n};a[D.CONTROL_DRAG_DATA]=t}),[n]);return k().createElement("div",{className:"".concat(t,"-control-item"),draggable:!0,onDragStart:y,onClick:h},g,k().createElement("div",{className:"".concat(t,"-control-name")},v))},jl=(0,F.forwardRef)((function(e,t){var n=e.data,r=e.prefixCls,o=e.titleSuffix,a=e.showSwitch,i=void 0===a||a,l=e.onSwitchChange,c=(0,F.useContext)(ie),u=c.setSystemSetting,s=c.getSystemSetting,p=((0,c.getKdesignerApi)().data,n.Name),v=n.Controls,m=n.Id,g=(0,F.useState)((function(){var e,t=s();return(null==t?void 0:t[m])||(null==t||null===(e=t[m])||void 0===e?void 0:e.value)||!1})),h=(0,f.c)(g,2),y=h[0],b=h[1],C=(0,F.useCallback)((function(e){var t=Ml(Ml({},s()),{},(0,d.c)({},m,e));b(e),u(t)}),[y,b,u]);return(0,F.useImperativeHandle)(t,(function(){return{isOpen:y,setIsOpen:C}}),[y,C]),k().createElement("div",{className:"".concat(r,"-category-group")},k().createElement("div",{className:"".concat(r,"-category-group-title")},k().createElement("div",{className:"group-name"},p,k().createElement("div",{className:"group-title-suffix"},o)),i&&k().createElement(M.Switch,{checked:y,onClick:function(){return function(){var e=!y;if(!1!==l(m,e)){var t=Ml(Ml({},s()),{},(0,d.c)({},m,e));b(e),u(t)}}()}})),k().createElement("div",{className:"".concat(r,"-category-list")},y&&T()(v).call(v,(function(e){return k().createElement(Bl,{key:e.Id,prefixCls:r,data:e})}))))})),Ll=function(e){var t=e.meta,n=(0,F.useContext)(ie),r=n.prefixCls,o=(0,n.getKdesignerApi)(),a=o.data,i=(o.selection,(0,F.useState)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.Controls,n=void 0===t?[]:t,r=e.Categories,o=void 0===r?[]:r,a=g()(o).call(o,(function(e){var t;return null==e||null===(t=e.Id)||void 0===t?void 0:y()(t).call(t,Le)}));return T()(a).call(a,(function(e){var t=g()(n).call(n,(function(t){return(null==t?void 0:t.CategoryId)===(null==e?void 0:e.Id)}));return Ml(Ml({},e),{},{Controls:t})}))}(t||[])}))),l=(0,f.c)(i,2),c=l[0],u=(l[1],(0,F.useState)(!1)),s=(0,f.c)(u,2),d=s[0],p=s[1],v=(0,F.useRef)(null),m=function(){p(!0)},h=function(e,t){if(e===Rl&&t&&!1===d)return p(!0),!1;if(e===Rl&&!t){var n,r=T()(n=a.findControlByCondition((function(e){return w()(_l).call(_l,e._Type_)}))).call(n,(function(e){return e.Id}));r.length&&a.deleteControl((0,D.createDeleteAction)(r),!1)}if("System_CategoryRecordInfo"===e&&!t){var o,i=T()(o=a.findControlByCondition((function(e){return w()(Ol).call(Ol,e._Type_)}))).call(o,(function(e){return e.Id}));i.length&&a.deleteControl((0,D.createDeleteAction)(i),!1)}};return k().createElement(k().Fragment,null,k().createElement("div",{className:"".concat(r,"-system-categories")},T()(c).call(c,(function(e){var t=e.Id;return t===Rl?k().createElement(jl,{ref:v,prefixCls:r,key:t,data:e,onSwitchChange:h,titleSuffix:k().createElement(M.Icon,{prefix:"designericon",type:"shezhi",onClick:m})}):k().createElement(jl,{prefixCls:r,key:t,data:e,showSwitch:!1,onSwitchChange:h})}))),k().createElement(Dl,{className:"".concat(r,"-billno-setting"),visible:d,setVisible:p,onConfirm:function(){var e=v.current,t=e.isOpen,n=e.setIsOpen;!1===t&&n(!0)}}))};Ll.tabKey="CategorySystem",Ll.tabName="系统功能",Ll.displayName="CategorySystem";var Ul=Ll,Kl=["type","value"],Vl=["Name","_Type_","RefBillId","RefTableId","EntityData","ParentId","Key"];function zl(e,t){var n=v()(e);if(i()){var r=i()(e);t&&(r=g()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zl(Object(n),!0).forEach((function(t){(0,d.c)(e,t,n[t])})):s()?Object.defineProperties(e,s()(n)):zl(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}var Hl=function(e,t,n,r){var o,a=e.globalConfig,i=e.dataContext,l=e.selectionContext,c=e.action,u=e.dataFactory,s=e.modelFactory,p=e.metaReader,m=(c.type,c.value),g=((0,be.c)(c,Kl),r.controlCacheApi),h=r.dispatchBillData,y=r.billPropsData,b=r.getHideFieldRef,E=r.setHideFieldRef,x=[],N=b();return m.forEach((function(e){var t,n=(0,f.c)(e,2),r=n[0],o=n[1],m=i.findControl(r),b=i.findControlIndex(r),E=m?p.getDefaultData(null===(t=m)||void 0===t?void 0:t._Type_):{},S=(m=Gl(Gl({},E),m))||{},F=S.Name,k=S._Type_,P=S.RefBillId,M=S.RefTableId,O=S.EntityData,j=S.ParentId,L=(S.Key,(0,be.c)(S,Vl)),K=i.findControl(j)||{},V=K._Type_,z=K.BillEntityIdEx,G=K.SourceForm;if("Status"in o){var H=function(e,t,n,r){var o=(0,f.c)(e,2),a=o[0],i=o[1],l=n.getAllSubControls(a),c=n.getAllParentControls(a),u=l.reduce((function(e,n){var o=n.Id;if(n._Type_,a!==n.Id){var l,c=C()(l=[]).call(l,(0,R.c)(e),[[o,i]]),u=Co(o,i,n,{metaReader:r});return u&&c.push(u),c}if(null!=n&&n.RefBillId||null!=n&&n.RefTableId){var s=(null==n?void 0:n.RefBillId)||(null==n?void 0:n.RefTableId),d=t[s],p=bo(i,d,r);t[s]=No(No(No({},d),i),{},{EntityData:p}),null!=n&&n.RefTableId&&I()(t).forEach((function(e){var o=(0,f.c)(e,2),a=o[0],l=o[1];if(l.ParentId===(null==n?void 0:n.RefTableId)){var c=bo(i,d,r);t[a]=No(No(No({},l),i),{},{EntityData:c})}}))}return e}),[]),s=c.reduce((function(e,n){var o=n.Id,a=n._Type_,l=n.Status;if((Vt(a)||lt(a))&&Number(l)>Number(i.Status)){var c,u=[[o,Vt(a)?{Status:"1"}:i]],s=Co(o,i,n,{metaReader:r});!Vt(a)&&s&&u.push(s);var f=t[null==n?void 0:n.RefBillId];if(f){var d=bo(i,f,r);t[null==n?void 0:n.RefBillId]=No(No(No({},f),i),{},{EntityData:d})}return C()(c=[]).call(c,(0,R.c)(e),u)}return e}),[]),d=C()(u).call(u,s);return d.length&&(0,D.createUpdateAction)(d)}(e,N,i,p);H&&x.push(H)}if("FormatType"in o){var q=m,Y=q.DateRangeDefValue,W=q.NoCodeDefValue;Y&&Je(k)&&(0,_.c)(o,{DateRangeDefValue:void 0}),W&&$e(k)&&(0,_.c)(o,{NoCodeDefValue:void 0})}if("ParentId"in o){var Q=i.findControl(o.ParentId),X=Q.Status,Z=Q._Type_;if(Vt(Z)&&void 0!==X){var J=i.getAllSubControlIds(r);x.push((0,D.createUpdateAction)(T()(J).call(J,(function(e){return[e,{Status:X}]}))))}}if(et(k)){if("ShowType"in o){var $=o.ShowType;if(m=Gl(Gl(Gl({},m),o),{},{EntityData:Gl(Gl({},m.EntityData),o)}),x.push((0,D.createDeleteAction)([r])),N[r]=m,M||"2"!==$){if(M&&"2"===$){var ee=A()(N).reduce((function(e,t){if(t.Id===M||t.ParentId===M){var n;delete N[t.Id];var r=t.Id===M?Gl(Gl(Gl({},t),o),{},{EntityData:Gl(Gl({},t.EntityData),o)}):t;return C()(n=[]).call(n,(0,R.c)(e),[r])}return e}),[]);x.push((0,D.createAddAction)(ee,{index:b})),setTimeout((function(){return l.setSelect([M])}),100)}}else{var te,ne,re=(0,D.createUUid)(3);delete L.FieldType,delete L.FieldId,delete L.EntryId;var oe=xo(u({type:He,parentId:j,transferData:Gl(Gl({},L),{},{Name:F,RefBillId:r,Id:re,ShowType:"2",SourceForm:"2",Key:"nc_".concat((0,D.createUUid)().toLowerCase())})}),{dataContext:i,metaReader:p});g.addCache("controlId",oe.Id);var ae=Mo((null==y||null===(te=y[null==L?void 0:L.BillEntityIdEx])||void 0===te?void 0:te.data)||[],oe);ae=(ae=Do(ae,oe.PropsDisplay)).reduce((function(e,t){var n;return t.isShow?C()(n=[]).call(n,(0,R.c)(e),[_o(t,oe.Id)]):e}),[]),x.push((0,D.createAddAction)(C()(ne=[oe]).call(ne,(0,R.c)(ae)),{index:b})),m.RefTableId=re,m.EntityData.RefTableId=re,N[r]=m,setTimeout((function(){return l.setSelect([re])}),100)}}if(M&&!(B in o)&&!("ShowType"in o)&&!lt(V)){var ie=N[M];N[M]=Gl(Gl({},ie),o),N[M].EntityData=Gl(Gl({},ie.EntityData),o)}}if(lt(k)){var le=N[P];N[P]=Gl(Gl({},le),o),N[P].EntityData=Gl(Gl({},le.EntityData),o),"inner2Outer"in o&&x.push((0,D.createUpdateAction)([[r,{EntityData:Gl(Gl({},O),{},{inner2Outer:!0})}]])),"ShowType"in o&&(x.push((0,D.createDeleteAction)([r])),x.push((0,D.createAddAction)([Gl({},N[P])],{index:b})),delete N[P],i.findControlByCondition((function(e){e.Id===r&&(m=Gl(Gl(Gl({},m),o),{},{EntityData:Gl(Gl({},m.EntityData),o)}),N[e.Id]=m),e.ParentId===r&&(N[e.Id]=e)})),setTimeout((function(){return l.setSelect([P])}),100))}if(j&&lt(V)){var ce=z||"1"!==G?z:j+"_table",ue=r.replace("_".concat(j),""),se=v()(o).reduce((function(e,t){return function(e){var t;return w()(t=["Status","DisplayRules","FieldRequired","NoCodeDefValue","QueryFormValue","FormulaValue","UploadDefValue","PictureDefValue","Visibility"]).call(t,e)}(t)?e:Gl(Gl({},e),{},(0,d.c)({},t,o[t]))}),{});v()(se).length&&(h({key:zr,payload:{form:ce,id:ue,data:se}}),i.findControlByCondition((function(e){var t;e.Id.split("_").length>1&&w()(t=e.Id).call(t,ue)&&e.Id!==r&&x.push((0,D.createUpdateAction)([[e.Id,Gl(Gl({},o),{},{EntityData:Gl(Gl({},e.EntityData),o)})]]))})),A()(N).forEach((function(e){var t;if(w()(t=e.Id).call(t,ue)){var n=N[e.Id];N[e.Id]=Gl(Gl({},n),o),N[e.Id].EntityData=Gl(Gl({},n.EntityData),o)}})))}var fe=Co(r,o,m,{globalConfig:a,dataContext:i,selectionContext:l,action:c,dataFactory:u,modelFactory:s,metaReader:p});if(fe&&x.push(fe),B in o){var de=o[B],pe=p.getControlMeta(de).ApType,ve=p.getControlMeta(V).BaseType,me=function(e,t,n,r,o){var a=n.EntityData,i=n.Id,l=v()(a).reduce((function(t,n){if(n===U)return t[n]=e,t;var r=o.getControlMetaProperty(e,n).Tag;return(r===Oe||r===Be||w()(_e).call(_e,n))&&(t[n]=a[n]),t}),{}),c={};if(st(e)){var u;ho=uo(ho);var s=o.getControlPropertyDefaultValue(e,"CustomContent"),f=null==s||null===(u=s.ops)||void 0===u?void 0:T()(u).call(u,(function(e,t){return go(go({},e),{},{Bgc:ho[t]})})),d={bgcSwitch:!0,ops:fo(f)};c.CustomContent=d,l.CustomContent=d}return null!=r&&r.Name&&(l.Name=null==r?void 0:r.Name),(0,D.createUpdateAction)([[i,go({ApType:t,_Type_:e,FieldType:e,EntityData:l},c)]])}(de,Io(pe,ve),m,o,p);x.push(me);var ge=function(e,t,n){var r=[];if(v()(t).forEach((function(t){var o;if(!w()(Eo).call(Eo,t)){var a=n.getControlMetaProperty(e,t);a&&0!==(null===(o=v()(a))||void 0===o?void 0:o.length)||r.push(t)}})),r.length>0)return(0,D.createRemovePropAction)([null==t?void 0:t.Id,r])}(de,m,p);ge&&x.push(ge)}})),E(N),C()(o=[c]).call(o,x)};function ql(e,t){var n=v()(e);if(i()){var r=i()(e);t&&(r=g()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ql(Object(n),!0).forEach((function(t){(0,d.c)(e,t,n[t])})):s()?Object.defineProperties(e,s()(n)):ql(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}var Wl="1",Ql=(0,F.memo)((function(e){var t=(0,F.useReducer)((function(e){return e+1}),0),n=(0,f.c)(t,2)[1],r=(0,(0,F.useContext)(D.ConfigContext).getPrefixCls)("nocode-designer-entry"),o=(0,F.useCallback)((function(e){Wl=e,n()}),[Wl]);return k().createElement("div",{className:"".concat(r,"-modal-body")},k().createElement("div",{className:"".concat(r,"-modal-body-menu")},k().createElement("div",{className:Vn()({cur:"1"===Wl}),onClick:function(){return o("1")}},k().createElement("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZgAAAEACAMAAAC50JBJAAAAZlBMVEUAAADf39/o6Oj////k5OTc3Nzd3d3y8vLi4uL////6+vrZ2dmZmZnz8/Ompqbo6Oifn5/4+PicnJz19fXU1NTCwsK4uLjj4+PGxsbb29upqamurq6ioqKxsbHu7u6+vr7Pz8/Kyso7+HZuAAAACXRSTlMA/tAL7dLNTk5icRcsAAAF4UlEQVR42uzdXW7iQBBFYWB+Mq6uxhhswDgEsv9NTpJ5yZM7zEjMreacFdTVJ9ESQmLx3tNqOSaSaFyunhZ/+rZKJNXq24fL95Ta3NlflZKFKcatXW5T+v4us0pjrnxssFvzmH68vS8p5QcYG+rWnNKvxSq1DzE21K1t+rlYpvwYYyPdmlNajKl7jLGRbu3eYFJ6kLHBbgVGMmBEA0Y0YEQDRjRgRANGNGBEA0Y0YEQDRjRgRANGtCLM6Xlntn9u6xhrYSrBvPjazDbe1THWwlSCGX1v1vqpkrEWphLM0a9mvV8qGWthKsGc/WA2eF/JWAvTHMxuGIatX4Zh7fth6GoYa2Gag1n6p56rGGthmoNp+/7ix74/+7rvxyrGWpgKb8zRs9nZh1rGWpgKMOeTWbf1vpaxFqYCzOZi1rq3tYy1MM3AdDkf/DXnq29fcq5jrIVpBubqnzrXMdbCNAPzOk0bP03T2tfTdK1jrIVp/o2ZvDW7eKpmrIVpFqbbbjuzk79UM9bCNAtz8LNZ9ud6xlqYZmGufjRb+r6esRamWZi9Lz+++K9nrIVpFuYw7sza8aWesRYmfowhGjCiASMaMKIBIxowogEjGjCiASMaMKIBIxowogEjGjCiASMaMKIBIxowogEjGjCivcOQZMCI9gbT/EMpNWGKdSswkgEjGjCiASMaMKIBIxowogEjGjCiASMaMKIBIxowogEjGjCiASMaMKIBIxowogEj2hdg8qGtZmwTpjJMd/J1NWObMJVh9g7M/SvDDA7M3SvDtJMDc+/KMN3R3Y8bYO5bGWZy3ywbYO5cGea0HXYNMPeuDHPNTQPMf6j8+APz5YABBphbAgYYYG4JGGCAuSVggAHmloABBphbuj9MzrtqxjZh4lcyogEjGjCiASMaMKIBIxowogEjGjCiASMaMKIBIxowogEjGjCiASMaMKIBIxowogEjGn9TIhswovFRJhkwogEjGjCiASMaMKIBIxowogEjGjCiASMaMKIBIxowogEjGjCiASMaMKIBIxowogEj2u/27m03bSiIwrBdkjTjvXw2NhAD8fu/ZB3c9nLvSJXcmWF917nw0q8AQkiTClPcpvzmZ6yYEQ/TLg1W3VI4GStmRMP0FX67FD7GihnRMBdgrKUPM3DyMVbMiIXJgVG+1MDsY6yYEQszAqU8VEDpYqyYEQsj9SCbD6B2MVbM2MIktA3/Y5L+R5gjMPoYK2Z8J8wCdLWPsWLGN8IcgW5yMlbMSIYpP4C59jJWzEiFuVXA2LoZK2YkwtQzcHI0VsyIh5kadMHTWDEjGqZcu0yuxooZ0TBXYPA1VsyIhfkExvKPwsVYMSMSpu/wF78rS9ovzA0M82/4YwyXz8owKjGMUgyjFMMoxTBKMYxSDKMUwyjFMEoxjFIMoxTDKMUwSjGMUgyjFMMoxTBKMYxSDKMUwyjFMyVqMYxSfClTiWGUYhilGEYphlGKYZRiGKUYRimGUYphlGIYpRhGKYZRimGUYhilGEYphlGKYZRiGKUYRimGUSoVpqh5P2Z36TD9qcGqWVonY8WM5P2Y7tLwfsy+0mE+gGMhRX7h/Zi0HcPUwHX7I6DyMVbMiIUJFc7ypWiA3sVYMSPx5l/IQ4fOx1gxYwuTkPNMyX6+H6YYGlSlj7FiRirM6TID3bF3MlbMSIW5Y1UtDJO0c5hpGE5XYObFpZ1tYRKmDnPrYqyYsYVJWYDBxVgxIx6mlE0O3F2MFTNiYe4zWnkYgJOLsWJGNAzwKQ8jcHYxVsyIham77RBWsQAV3/wTdgwjAUA1XhseKN1Z+njcFV+6e+lkrJiR+rhcTiG/FW7Gihn8lYxSDKMUwyjFMEoxjFIMoxTDKMUwSjGMUgyjFMMoxTBKMYxSDKPUGubMMAqtYfLQPs1YsaJdw/wI9XOMtfSsdXjLfp5D/xRjDT1rH8J7lv0Ief8EYw09a5+H1yzLDi8h1K33sXaeta1DeDlkq8NrIFVeD9nm/S2QGm/v2eoXDlT1L9hoSkAAAAAASUVORK5CYII="}),k().createElement("p",null,"添加空白表格")),k().createElement("div",{className:Vn()({cur:"2"===Wl}),onClick:function(){return o("2")}},k().createElement("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAZgAAAEACAMAAAC50JBJAAAAb1BMVEUAAADi4uLo6Ojd3d3////y8vLi4uL////6+vrZ2dmZmZm1tbX4+PidnZ3Nzc2wsLDAwMCrq6u5ubnS0tLw8PDl5eW9vb2oqKilpaXExMTKysrt7e3r6+vz8/OioqKfn5/19fXi4uLU1NTe3t7o6OiHDuK7AAAAB3RSTlMA89DQC05Omgim0gAAB5ZJREFUeNrs2t1u2kAQhmGgSfvt5/W/E4PLUgf7/q+xkFZKjkqcTrSzZt6DiDlAmtGjYA7YXHvcbZ2lpO3ucfOnh52zVLV7eHXZOjcHj0/lHJIpjV19mJ3bXmV2bgorPzaxXcPkvl2eL86FOzg2qV2Dc983OzffxbFJ7Tpf/mW2LtzHsSntGpzbOOfv49iUdvWvMHdybGK7GozKDEZpBqM0g1GawSjNYJRmMEozGKUZjNIMRmkGozSDUZrBKO0mTH0ageb0tI5jkUy3YDruAeT06zgWyXQLxrEBjqxXciyS6RbMgQVwZrWSY5FMt2AyPgEVzys5Fsn0L5ixqqqclz97NlXlP3psyMpsxDXflOUsOMrDRNhGAGbiu04fPhYFWb29EBzFYSJsIwEzt+0zD21bsm/bacHHQ0ZOAI5k7QVHeZgI2wg9Yw4MQMlq2bHhxP0I1MyPkqM4TIRtpGDKHvA5z8uOxURWKMiz5CgOE2EbMZj8GZjJeeGxOJBtzkZyFIeJsI0MjO+6Fw5dVzDvurDsWF+T7EfBUR4mwjYyMAXfVS47FhnJ0guO8jARtpGBGer6F/u63nNf18WyYweyISvBUR4mwjZiz5iaM/BM94kHaoaKdIKjPEyEbYRgPHMP9Py58NhjzlOAr5nPgqM8TIRtZGCeWAKBp4XHjj35AmAm+yA4ysNE2EYEpuABmNgsPLYhh7/vZyY4ysNE2EYEpuEEDCyWHTu8fW0pyUFwlIeJsI0EzMs0AvPULTvWX3r3UnCUh/mibezHGGve1WBUZjBKMxilGYzSDEZpBqM0g1GawSjNYJRmMEozGKUZjNIMRmkGozSDUZrBKM1glGYwSjMYpV1hLJUZjNIuMD/+o8u7kymtXQ1GZQajNINRmsEozWCUZjBKMxilGYzSDEZpBvObXTPITRgIguCxTa9tMGCMAw6Q/P+PUSJFHMmoo9kBTd3q1qu6jTYoGSYoGSYoGSYoGSYoGSYoGSYoGSYoGSYoGSYoGSYofwiz3MaXeSyehsdh2onHl3ksnobHYQozjAG3MDMzjAGvMOeBGcaAU5h2JjlfMowBlzBr8vIJa5i2lNLgh0MpZ5NCR9nqpmKYqZuvMIfBjtzgm57cGFVH2OqnYph+AWAPg0KOAPYdh8aoOsJWN1XC3LGHad95bIA1u71VdYStblorDEZygx25MquOsNVL64XBG/nR8WBXHWGrk9YMgzXJqbGrjrDVR+uG2ZJcw646wlYfrRqmJw/kbFcdYauP1gxzIwtmcmVWHWGrk9YLs7/w2KIZ2J2sqiNs9dJaYZqBHAGcOk6tUXWErW5aKcyW7H/vHVuj6ghb3bROmJ4s93tHb1LoKFvd9F/CLMv1ZU7peBryl0xQMkxQMkxQMkxQMkxQMkxQvti7YxoAAAAGYf5dY4OjtUCyd8JMCTMlzJQwU8JMCTMlzJQwU8JMCTMlzJQwU8JMCTPlpmRLmClTtiTMlDBTwkwJMyXMlDBTwkwJMyXMlDBTwkwJMyXMlDBTwkwJMyXMlDBTwkwJM1V795acNhAFYRgHx6NpJBsbMBcjEJb2v8ZI5ILzwOghxaTPof8VnKkv8a1c7jGYYnlql34eG8yUhil3R/RVu8LJY4OZkjDNGr96LXw8NpgpCfMKvH2EJh6ArY/HBjOlYNreJQytgIOPxwYzpWDegGU4twGWLh4bzJSCCd3i8ie29y42WfLdmuX7mPII1C42WfLdmgVmDsx8bLJkuzULzA6o9j42WbLdmgNmDuDkZJMl160ZYOpX4LDyssmS6dYMMMsNMCvdbLLkuTUDzP4IbB1tsoRL//2af4FZVaiip02WPLfeHKY+AidXmyyZbs2wHLvwtcmS69bbwjwDs/p3hYtNlmy33hKmwddWLjZZst16S5jl3zAuNlny3apfxnB7q2AoEwxpgiFNMKQJhjTBkCYY0gRDmmBIEwxpgiFNMKQJhjTBkCYY0gRDmmBIEwxpgiFNMKRppoQ2wZCmD2WUCYY0wZAmGNIEQ5pgSBMMaYIhTTCkCYY0wZAmGNIEQ5pgSBMMaYIhTTCkCYY0wZAmGNIEQ9oYTPGh/ZjsjcM02wp91a508thgptH9mGpdaT8me+P7MfMiFO1a+zGZS8N0wCwMRWDj47HBTCmYuEYbhooKaFw8Nphp5JN/Ec5VgI9NFku3foVJbGL52GSxdOsoTLGosKl9bLJYujUNs10fgWreONlksXRrGuYdfevnxskmi6Vb0zCrz8XuBTisfGyyWLr1ApMaxTiULjZZLN2ahrn8S3CxyWLp1hRMffl6ee5ik8XSrddh3g8ow7lPYOtik8XSrddh5n+2A2ZA62KTxdKt12H2+Ilf7IBN6WKTxdKt12FCBLCZzY5A1fnYZLF0awImnF5wbl472WSxdGsCpq9exfajcPOj9GAm/ZYMaYIhTTCkCYY0wZAmGNIEQ5pgSBMMaYIhTTCkCYY0wZAmGNJ6mFYwhPUwD7G8m8cGK5U9zLfY3cdjLd3axenke4zNXTzW0K1NjE+T/r9M29zBYw3d2rRxOplMHh9i7Ervj7Vza9nF+PA4GWSmUVE1HVyGnkRD1PRpMPkBXitvH6PdbmgAAAAASUVORK5CYII="}),k().createElement("p",null,"添加已有表单"))))})),Xl=function(e){M.Modal.confirm({title:"添加表格",width:480,height:304,className:"nocode-designer-entry-modal",showline:!0,maskClosable:!1,titleIcon:null,body:k().createElement(Ql,null),okButtonProps:{size:"small"},cancelButtonProps:{size:"small"},bodyStyle:{padding:24},destroyOnClose:!0,onOk:function(){return function(e){var t=e.dataContext,n=e.dataFactory,r=e.action,o=e.metaReader,a=e.handleConfig,i=a.controlCacheApi,l=a.getHideFieldRef,c=a.setHideFieldRef,u=(r||{}).value,s=xo(n({type:He,parentId:u.ParentId,transferData:{Name:"表格",Id:(0,D.createUUid)(3),Key:"nc_".concat((0,D.createUUid)().toLowerCase()),SourceForm:Wl,ShowType:"2",Multi:"1",DataRange:{max:"100",min:"0"}}}),{dataContext:t,metaReader:o}),f=xo(n({type:"NoCodeMulRefBillField",parentId:u.ParentId,transferData:{Name:"表格",Key:"nc_".concat((0,D.createUUid)().toLowerCase()),SourceForm:Wl,ShowType:"2",Multi:"1",DataRange:{max:"100",min:"0"}}}),{dataContext:t,metaReader:o});s.RefBillId=f.Id,s.EntityData.RefBillId=f.Id,f.RefTableId=s.Id,f.EntityData.RefTableId=s.Id;var p=[(0,D.createAddAction)([s])];i.addCache("controlId",s.Id),c(Yl(Yl({},l()),{},(0,d.c)({},f.Id,f))),t.batchActions(p),setTimeout((function(){return a.selection.setSelect([s.Id])}),300)}(e)}})},Zl=["type","value"];function Jl(e,t){var n=v()(e);if(i()){var r=i()(e);t&&(r=g()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function $l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jl(Object(n),!0).forEach((function(t){(0,d.c)(e,t,n[t])})):s()?Object.defineProperties(e,s()(n)):Jl(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}var ec=function(e,t,n,r){var o=e.globalConfig,a=e.dataContext,i=e.selectionContext,l=e.action,c=e.dataFactory,u=(e.modelFactory,e.metaReader),s=a.getRootId(),f=l.type,p=l.value,v=(0,be.c)(l,Zl),m=o.showMessage,h=wt(p),y=r.dispatchBillData,b=r.billPropsData,E=r.getHideFieldRef,I=r.setHideFieldRef,x=i.getSelection(),T=[],N=[],A=E();if(lt(p._Type_))return Xl({dataContext:a,dataFactory:c,action:l,metaReader:u,handleConfig:r}),n("自定义插入关联表单表格事件"),!1;var S=setTimeout((function(){if(1===h.length){var e=a.getParentControl(h[0].Id),t=a.findControl(x[0]);lt(null==e?void 0:e[U])&&lt(null==t?void 0:t[U])||D.eventBus.emit("add-control-id",h[0].Id)}clearTimeout(S),S=null}),0),F=a.getData(),k=h.reduce((function(e,t){var r,o,i,c=t,f=c._Type_,p=(c.Id,c.ParentId);if(ut(f)&&p===s){var v,h=Ae()(v=F[G]).call(v,(function(e){return e[U]===Ve}));if(h)t[z]=h[O];else{var E=(0,D.createUUid)(),I=u.getControlMeta(Ve);T.push((0,d.c)((0,d.c)((0,d.c)((0,d.c)((0,d.c)({},z,s),U,Ve),O,E),"_Root_",!0),"Name",null==I?void 0:I.Name)),t[z]=E}}var S=u.getControlMeta(f).Name,k=a.findControl(t[z]),P=k||{},M=P._Type_,_=P.Status;if(nt(f)&&!lt(M)){var B=a.findControlByCondition((function(e){return e._Type_===f}));g()(B).call(B,(function(e){var t=a.findControl(e.ParentId);return!lt(t._Type_)})).length>0&&(m("".concat(S,"只能在画布中添加一次")),n("".concat(S,"只能在画布中添加一次")))}if(!t||null!==(r=t)&&void 0!==r&&r.FieldName||null!==(o=t)&&void 0!==o&&o.StartDateFieldName||(t=xo(t,{dataContext:a,metaReader:u})),lt(M)){var j,L,K,V=$l($l({},u.getDefaultData(M)),k)||{},H=V.BillEntityIdEx,q=V.SourceForm,Y=V.PropsDisplay,W=V.RefBillId,Q=V.EntityData;if(!H&&"2"===q)return n("请先选择需要关联的表单"),!1;if(H&&(null==b||!b[H]))return m("数据加载中，请稍后"),n("数据加载中，请稍后"),!1;if(t.Key=null!==(j=t)&&void 0!==j&&j.Key?t.Key.toLowerCase():"nc_".concat((0,D.createUUid)().toLowerCase()),null===(L=t)||void 0===L||null===(L=L.Key)||void 0===L||!w()(L).call(L,p.toLowerCase())){if(!Ao(k,(null==b?void 0:b.innerForm)||[]))return m("应用外表单无法编辑"),n("应用外表单无法编辑"),!1;if((null==k?void 0:k.BillEntityIdEx)===s)return m("表格为当前表单时无法编辑"),n("表格为当前表单时无法编辑"),!1;t.EntityData=$l($l({},t.EntityData),{},{Key:t.Key});var X=H||"1"!==q?H:p+"_table",Z=x[x.length-1],J=t[z]===Z,$={form:X,data:$l({},t)};if(y({key:Gr,payload:$}),!J)$.prevId=Z.replace("_".concat(p),""),K=(a.findControl(Z)||{}).Key.toLowerCase().replace("_".concat(p.toLowerCase()),"");if(l.index>0){var ee=a.getData().Items;ee[l.index-1]&&(K=ee[l.index-1].Key.toLowerCase().replace("_".concat(p.toLowerCase()),""))}t=_o(t,p)}_&&(t.Status=_);var te=t.Key.toLowerCase().replace("_".concat(p.toLowerCase()),""),ne=function(e,t,n){var r=e?e.split(","):[],o=Array.isArray(t)?t:[t];if(n){var a,i,l=Ur()(r).call(r,(function(e){return e===n}));l>-1?ue()(a=r).apply(a,C()(i=[l+1,0]).call(i,(0,R.c)(o))):r=C()(r).call(r,o)}else r=C()(r).call(r,o);return r.join()}(Y,Je(t._Type_)?["".concat(te,"_startdate"),"".concat(te,"_enddate")]:te,K);A[W].PropsDisplay=ne,A[W].EntityData.PropsDisplay=ne,N.push((0,D.createUpdateAction)([[p,{PropsDisplay:ne}],[p,{EntityData:$l($l({},Q),{},{PropsDisplay:ne})}]]))}return Vt(f)&&!t.GroupParentId&&(t.GroupParentId=(0,D.createUUid)(),t.GroupIndex=0),C()(i=[]).call(i,(0,R.c)(e),[t])}),[]),P=[$l({type:f,value:C()(k).call(k,T)},v)];return I(A),C()(P).call(P,N)},tc=function(e,t,n,r){e.globalConfig;var o=e.dataContext,a=(e.selectionContext,e.action),i=(e.dataFactory,e.modelFactory,e.metaReader,[a]),l=[],c=a.value;return(Array.isArray(c)?c:[c]).forEach((function(e){var t=o.findControl(e)||{},n=t._Type_;if(Vt(n)){var r=t.GroupIndex,a=t.GroupParentId;if(0===Number(r)){var i=o.findControlByCondition((function(e){return Vt(e._Type_)&&e.GroupParentId===a&&void 0!==e.GroupIndex&&0!==Number(e.GroupIndex)}));i.length&&l.push((0,D.createDeleteAction)(T()(i).call(i,(function(e){return e.Id}))))}}})),C()(i).call(i,l)};function nc(e,t){var n=v()(e);if(i()){var r=i()(e);t&&(r=g()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function rc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nc(Object(n),!0).forEach((function(t){(0,d.c)(e,t,n[t])})):s()?Object.defineProperties(e,s()(n)):nc(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}var oc=[Ke],ac=function(e,t,n,r){var o,a=e.globalConfig,i=e.dataContext,l=(e.selectionContext,e.action),c=(e.dataFactory,e.modelFactory,e.metaReader),u=(r.billPropsData,r.getHideFieldRef),s=r.setHideFieldRef,f=a.showMessage,d=l.type,p=l.value,v=p,m=p.origin,g=p.target,h=p.isPrev,y=p.dropPosition,b=g,E=Array.isArray(m)?m:[m],I=i.getData().Items,x=i.getRootId(),N=E[0],A=x,S=[],F={},k=!1,P=I.length,M=y&&0!==y,_=i.findControl(b),j=i.getParentControl(b)||{},L=i.getParentControl(N);if(lt(j._Type_)&&lt(L._Type_)&&_._isEntryField_){if(L.Id!==j.Id)return f("表格内容无法移动到其它表格");var K=j||{},V=K.EntityData,G=K.RefBillId,H=i.findControl(Array.isArray(m)?m:[m]),q=i.getAllSiblings(b).reduce((function(e,t){var n,r,o;return w()(m).call(m,t.Id)?e:t.Id===b?h?C()(r=[]).call(r,(0,R.c)(e),(0,R.c)(H),[t]):C()(o=[]).call(o,(0,R.c)(e),[t],(0,R.c)(H)):C()(n=[]).call(n,(0,R.c)(e),[t])}),[]),Y=T()(q).call(q,(function(e){var t,n="".concat(e.Key.toLowerCase().replace("_".concat(e.ParentId.toLowerCase()),""));return Je(e._Type_)?C()(t="".concat(n,"_startdate,")).call(t,n,"_enddate"):n}),[]).join();S.push((0,D.createUpdateAction)([[_.ParentId,{PropsDisplay:Y}],[_.ParentId,{EntityData:rc(rc({},V),{},{PropsDisplay:Y})}]]));var W=u(),Q=(null==W?void 0:W[G])||{},X=rc(rc({},null==Q?void 0:Q.EntityData),{},{PropsDisplay:Y});W[G]=rc(rc({},Q),{},{PropsDisplay:Y,EntityData:X}),s(W)}if(h){var Z=i.findControl(b),J=Z[U];Z[z];if(!c.getControlMeta(J).IsContainer||M)((i.getPrevSibling(b)||{}).control||{})[O]||(k=!0)}for(var $=0,ee=-1,te=function(){var e=I[$],t=e[O];if(t===b){F=e,ee=$;var n=e[U],r=e[z],o=c.getControlMeta(n).IsContainer;if(h){if(ee=ee<=0?0:ee-1,A=r,o&&(A=t),M&&(A=r),k){var a=i.getSubControls(A);ee=(ee=i.findControlIndex(a[0][O])-1)<0?$:ee}return $=P,1}if(r&&!o||M)A=r;else if(o){A=e[O];var l=i.getSubControls(t),u=l.length;u>0&&(ee=Ur()(I).call(I,(function(e){var t;return e[O]===(null===(t=l[u-1])||void 0===t?void 0:t[O])})))}$=P}else $++};$<P&&!te(););F[U];var ne=i.findControl(A)||{},re=i.findControl(N),oe=re.ApType,ae=ne[U],ie=re[B]||re[U],le=re.ParentId,ce=re.EntityData,ue=re._isEntryField_,se=re.GroupIndex,fe=re.GroupParentId,de=i.findControl(le);(de||{})._Type_;if(ae===ze&&w()(oc).call(oc,ie))return f("控件类型不符合，不能添加。");var pe=c.canAdd(ie,ae);if(!("object"!==(0,Ce.c)(pe)||pe.success||lt(ae)&&nt(ie)))return f(pe.message);if(1===E.length&&Vt(ie)&&void 0!==se&&fe){var ve=i.findControlByCondition((function(e){return e.GroupParentId===fe&&e.Id!==N}));if(ve.length>0&&(S.push((0,D.createUpdateAction)([[N,{GroupIndex:0,GroupParentId:(0,D.createUUid)()}]])),0===Number(se))){var me=T()(ve).call(ve,(function(e,t){return[e.Id,{GroupIndex:t}]}));S.push((0,D.createUpdateAction)(me))}}if(ut(ie)&&(h?ee+=1:ee-=1),v=rc(rc({},v),{},{origin:E,targetIndex:ee,targetParentId:A}),(it(ae)||lt(ae))&&!ue)return f("表格之外的内容无法移动到表格内");if((!it(ae)||!lt(ae)||!Vt(ae))&&ue&&de.Id!==ne.Id)return f("表格的内容无法移动到表格之外");if(oe){var ge=c.getControlMeta(ie).ApType,he=c.getControlMeta(ae).BaseType,ye=Io(ge,he);oe!==ye&&S.push((0,D.createUpdateAction)([[N,{ApType:ye}]]))}return le!==A&&ce&&S.push((0,D.createUpdateAction)([[N,{EntityData:rc(rc({},ce),{},{ParentId:A})}]])),C()(o=[{type:d,value:v}]).call(o,S)},ic=["globalConfig","dataContext","selectionContext","action","dataFactory","modelFactory","metaReader"],lc=["type","value"];function cc(e,t){var n=v()(e);if(i()){var r=i()(e);t&&(r=g()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function uc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cc(Object(n),!0).forEach((function(t){(0,d.c)(e,t,n[t])})):s()?Object.defineProperties(e,s()(n)):cc(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}var sc=function(e,t,n,r){var o=e.globalConfig,a=e.dataContext,i=(e.selectionContext,e.action),l=(e.dataFactory,e.modelFactory,e.metaReader),c=((0,be.c)(e,ic),i.type),u=i.value,s=(0,be.c)(i,lc),f=wt(u),d=o.showMessage,p=r.controlCacheApi,v=g()(f).call(f,(function(e){var t=e._Type_,n=e._isEntryField_,r=a.findControl(e.ParentId);if(r){var o=r._Type_,i=l.canAdd(t,r);return"object"!==(0,Ce.c)(i)||i.success?!it(o)&&n?(d("父容器控件类型不符合，不能添加。"),!1):!(it(o)&&!n)||(d("父容器控件类型不符合，不能添加。"),!1):(d(i.message),!1)}return!1})),m=T()(v).call(v,(function(e){return e.Id}));f=T()(f).call(f,(function(e){if(w()(m).call(m,e.Id)){var t=e._Type_,n=e.ApType,r=(e.NoCodeDefValue,e.DateRangeDefValue,uc({},e)),o=a.findControl(e.ParentId)._Type_;if(n){var i=l.getControlMeta(t).ApType,c=l.getControlMeta(o).BaseType;r.ApType=Io(i,c)}return r}return e}));var h=function e(t){var n,r=[];(n=r).push.apply(n,(0,R.c)(g()(f).call(f,(function(e){return w()(t).call(t,e.Id)}))));var o=g()(f).call(f,(function(e){return w()(t).call(t,e.ParentId)}));o.length>0&&(r=T()(o).call(o,(function(e){return e.Id})).reduce((function(t,n){var r;return C()(r=[]).call(r,(0,R.c)(t),(0,R.c)(e([n])))}),r));return r}(m);setTimeout((function(){1===m.length&&D.eventBus.emit("add-control-id",m[0])}),0),p.addCache("controlId",m[0]);var y=[uc({type:c,value:h},s)];return g()(y).call(y,(function(e){var t;return 0!==(null===(t=e.value)||void 0===t?void 0:t.length)}))},fc=["type","value"],dc=(0,d.c)((0,d.c)((0,d.c)((0,d.c)((0,d.c)({},D.ActionType.ADD,ec),D.ActionType.UPDATE,Hl),D.ActionType.DELETE,tc),D.ActionType.DRAG,ac),D.ActionType.PASTE,sc),pc={NoCodeCreatorField:"nocodecreatorfield",NoCodeCreateDateField:"nocodecreatedatefield",NoCodeModifierField:"nocodemodifierfield",NoCodeModifyDateField:"nocodemodifydatefield",NoCodeBillNoField:"nocodebillnofield"},vc=function(e,t){var n=e.action,r=e.dataContext,o=e.selectionContext,a=e.globalConfig,i=e.dataFactory,l=e.modelFactory,c=e.metaReader,u=e.success,s=e.fail,f=(a.dataRef,a.keywordMapping),d=[],p=function(e){var n=[],r=t.controlCacheApi;return jr().all(T()(e).call(e,(function(e){var t=e.type,n=e.value;(0,be.c)(e,fc);if(t===D.ActionType.ADD||t===D.ActionType.PASTE){var o=wt(n);return jr().all(T()(o).call(o,(function(e){var t,n=pc[e[f.type]];n?null!=e&&null!==(t=e.Key)&&void 0!==t&&w()(t).call(t,e.ParentId.toLowerCase())||(e[f.key]=n):e[f.key]=e[f.key]||"nc_".concat((0,D.createUUid)().toLowerCase());return r.addCache("controlId",e.Id),e}))).then((function(t){return e.value=t,e}))}return jr().resolve(e)}))).then((function(e){return u(C()(e).call(e,n))}))},v=n.type,m=dc[v];if(m){var g=m({globalConfig:a,dataContext:r,selectionContext:o,action:n,dataFactory:i,modelFactory:l,metaReader:c},p,s,t);g&&d.push.apply(d,(0,R.c)(g))}else d.push(n);d.length&&p(d)},mc="none",gc=function(e){var t,n,r=e.handleChange,o=e.value,a=e.className,i=e.editor,l=e.locked,c=e.Name,u=e.Tips,s=i.Enum,f=i.NameHidden,d=i.Default,p=i.Required,v=i.Title,m=T()(t=g()(s).call(s,(function(e){return e.Id!==mc}))).call(t,(function(e){return(0,_.c)({},e,{Value:e.Value||e.Id})})),h=(0,Fe.isUndefined)(o)?d||(null===(n=m[0])||void 0===n?void 0:n.Value):String(o),y=h===mc;return k().createElement("div",{className:"".concat(a,"-switch-select")},k().createElement("div",{className:"".concat(a,"-switch-wrap")},k().createElement(D.NameTipWrapper,{nameHidden:f,className:a,name:c,tips:u,required:p,title:v}),k().createElement(M.Switch,{checked:h!==mc,size:"large",disabled:l,onClick:function(){return function(){if(!l){var e=h!==mc?mc:m[0].Value||"";r(e)}}()}})),k().createElement("div",{className:Vn()("".concat(a,"-tab-wrap"),{"is-hidden":y})},T()(m).call(m,(function(e){return k().createElement("div",{key:e.Value,className:Vn()(["".concat(a,"-tab-item"),{"is-active":h===e.Value}]),onClick:function(){return t=e.Value,void r(t);var t}},e.Name)}))))},hc=function(e,t){if(!t)return!0;var n=(t||{}).formId,r=void 0===n?"":n;return e.formId===r},yc=function(e){e.id;var t=e.formId,n=e.enableListener,r=void 0===n?hc:n,o=e.eventName,a=e.parser,i=e.defaultValue,l=void 0===i?{}:i,c=(0,F.useState)(l),u=(0,f.c)(c,2),s=u[0],d=u[1],p=(0,F.useCallback)((function(e){var n=e.args;if(null==r?void 0:r({formId:t},n)){var o="function"==typeof a?a(e):function(e){var t=e.data,n=e.args;return{data:t.rows,param:n.param}}(e);d(o)}}),[d,a,t,r]);return(0,F.useEffect)((function(){return D.eventBus.on(o,p),function(){D.eventBus.off(o,p)}}),[o,t,p]),s},bc=function(e){var t=e.api,n=e.parser,r=t.isVersionEqual,o=t.getData,a=(0,F.useState)((function(){return r()?n(o()):[]})),i=(0,f.c)(a,2),l=i[0],c=i[1],u=(0,F.useCallback)((function(e){var t=e.value,r=n(t);c(r)}),[]);return(0,F.useEffect)((function(){var e=t.addDataChangeListener(u);return function(){e()}}),[]),l};function Cc(e,t){var n=v()(e);if(i()){var r=i()(e);t&&(r=g()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ec(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cc(Object(n),!0).forEach((function(t){(0,d.c)(e,t,n[t])})):s()?Object.defineProperties(e,s()(n)):Cc(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}var Ic=qn.treeUtils.dfs,xc=function(e,t){var n=t.type,r=t.data;return Tc[n]?Tc[n](e,r):e},Tc={updateRelationFormId:function(e,t){return Ec(Ec({},e),{},{relationFormId:t})},updateFilterInfos:function(e,t){return Ec(Ec({},e),{},{filterInfos:t})},updateSortInfos:function(e,t){return Ec(Ec({},e),{},{sortInfos:t})},updateResult:function(e,t){return Ec(Ec({},e),{},{result:t})},updateState:function(e,t){return t}},Nc=function(e){var t=M.Form.useForm(),n=(0,f.c)(t,1)[0],r=e.visible,o=e.onClose,a=e.invokeActions,i=e.queryFormValue,l=e.refBillData,c=e.onConfirm,u=e.field,s=e.compareTypesMap,p=e.formId,v=(0,F.useContext)(ie),m=v.prefixCls,h=v.baseUrl,y=v.onDownLoad,b=v.getControlText,C=v.batchInvoke,E=v.getKdesignerApi,I=v.curListTreeApi,x=v.fetchListTree,N=(0,F.useState)(r),A=(0,f.c)(N,2),S=A[0],w=A[1],P=(0,F.useState)({}),R=(0,f.c)(P,2),_=R[0],O=R[1],B=(0,F.useReducer)(xc,i),j=(0,f.c)(B,2),L=j[0],U=j[1],K=u.Key,V=E(),z=V.data,G=V.meta,H=z.getRootId(),q=(0,F.useState)({}),Y=(0,f.c)(q,2),W=Y[0],Q=Y[1],X=(0,F.useRef)(),Z={baseUrl:h,batchInvoke:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];C(e,u.Key,t,n)},getControlText:b,addControlAction:function(e,t){D.eventBus.on(e,t)},onDownLoad:y,batchInvokeListConfig:function(e){C("listconfig","nocodeformdesigner",[e])},batchInvokeQuery:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=g()(t),r=void 0===n?"":n,o=t.search,a=void 0===o?"":o,i=t.order_by,l=void 0===i?"":i,c=t.select,u=void 0===c?"":c,s=t.page_size,f=void 0===s?10:s,d=t.page_no,v=void 0===d?1:d,m=t.ids,h=void 0===m?[]:m;if(L.relationFormId===p){var y=Ic($,(function(t){return t.entityId===e}));if(null!=y&&y.isDraftField)return}C("query","nocodeformdesigner",[e,{filter:r,search:a,order_by:l,select:u,page_size:f,page_no:v,ids:h}])}},J=yc({id:K,formId:L.relationFormId,eventName:"setListTreeConfig",parser:function(e){var t=e.data;return nn(t,t,s)},defaultValue:[]}),$=bc({api:I,parser:function(e){return nn(e,e,s)}}),ee=(0,F.useMemo)((function(){return L.relationFormId?L.relationFormId===p?$:J:[]}),[L.relationFormId,p,$,J]),te=(0,F.useMemo)((function(){var e=z.findControl(H);return[{key:e.Key,title:e.Name,selectable:!1,children:sl({metaApi:G,options:$})}]}),[$,H]),ne=yc({id:K,formId:L.relationFormId,eventName:"filterItemLook"}),re=(0,F.useMemo)((function(){var e;return Array.isArray(L.filterInfos)?T()(e=L.filterInfos).call(e,(function(e){return Ec(Ec({},e),{},{value:"string"==typeof e.value?JSON.parse(e.value):e.value||[]})})):[]}),[L.filterInfos]);(0,F.useEffect)((function(){var e=ne.data,t=ne.param,n=(void 0===t?{}:t).enumField;if(n){var r=null==re?void 0:g()(re).call(re,(function(e){return e.fieldName===n})),o=Ic(ee,(function(e){return e.key===n}));O((function(t){return Ec(Ec({},t),{},(0,d.c)({},n,{configuredFilter:{enumEqCompareType:"001",items:r},fieldFilterConfig:o,groupInfo:e}))}))}}),[ne,re,ee]);(0,F.useEffect)((function(){S&&L.relationFormId&&a.invokeGetListConfig(L.relationFormId)}),[L.relationFormId,S]),(0,F.useEffect)((function(){S&&x()}),[S]),(0,F.useEffect)((function(){w(r)}),[r]);var oe=function(){w(!1),null==o||o()},ae=function(){return new(jr())((function(e,t){n.validateFields().then((function(t){var n=Tl()(t);e(n)})).catch((function(e){return t(e)}))}))},le=k().createElement(M.ConfigProvider,{value:{prefixCls:"kd"}},k().createElement(M.Form,{layout:"vertical",form:n,labelWidth:"100%",wrapperWidth:"100%",onValuesChange:function(e,t){}},k().createElement(qn.BillQuickFinder,{ref:X,refBillData:l,validData:W,configuredFilterItems:re,listFilterConfig:ee||[],onGetFieldRecords:function(e){a.invokeGetFieldRecords(L.relationFormId,e.fieldName)},fieldRecords:_||{},variablesTree:te,field:u,onFilterChange:function(e){U({type:"updateFilterInfos",data:e})},relationFormId:L.relationFormId,result:L.result,sortInfos:L.sortInfos,onSortChange:function(e){U({type:"updateSortInfos",data:e})},onRelationFormChange:function(e){Q({relationForm:!e}),U({type:"updateRelationFormId",data:e})},onResultChange:function(e){U({type:"updateResult",data:e})},refBillProps:Z})));return k().createElement(M.Modal,{visible:S,className:"".concat(m,"-def-editor-modal"),body:le,bodyClassName:"".concat(m,"-def-editor-modal-body"),width:640,maskClosable:!1,destroyOnClose:!0,closable:!0,onCancel:oe,title:"查找表单记录",footer:k().createElement("div",null,k().createElement(M.Button,{size:"small",style:{marginRight:"12px"},onClick:oe},"取消"),k().createElement(M.Button,{size:"small",type:"primary",onClick:function(){ae().then((function(e){var t,n;if(!(null===(t=(n=X.current).updateVerifyAndGetMsg)||void 0===t?void 0:t.call(n)).length){var r={valueType:2,value:L};if(!L.relationFormId)return void Q({relationForm:!0});a.invokeSaveBizRule(r),null==c||c(r)}})).catch((function(e){}))}},"确定"))})};function Ac(e,t){var n=v()(e);if(i()){var r=i()(e);t&&(r=g()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ac(Object(n),!0).forEach((function(t){(0,d.c)(e,t,n[t])})):s()?Object.defineProperties(e,s()(n)):Ac(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}var wc=qn.Condition.constants,Fc=wc.allFieldRegExp,kc=wc.allExpRegExp,Dc={textDef:[0,1,2],decimalDef:[0,1,2],richEditorDef:[0,1],geoDef:[0,1],addressDef:[0,1],selectDef:[0,1,2],refBillDef:[0,1],dateRangeDef:[0,1],dateDef:[0,1,2],imageDef:[0,1],attachmentDef:[0,1],groupContainerDef:[],entryEntityDef:[],graphicDisplay:[]},Pc=[{label:"查找表单记录",key:"search",id:1,icon:"chazhaobiaodanjilu-xian"},{label:"运算公式",key:"formula",id:2,icon:"yunsuangongshi"}],Mc={valueType:2,value:{relationFormId:"",filterInfos:[],sortInfos:[],result:[]}},Rc={valueType:0,value:""},_c=function(e){var t,n=e.handleChange,r=e.value,o=e.className,a=e.locked,i=e.Editor,l=e.Name,c=e.Tips,u=e.field,s=(e.id,e.propName,e.inputFieldProps),d=e.editorType,p=e.getRenderValue,v=i.NameHidden,m=i.Required,h=i.minPlaceholder,y=void 0===h?"请输入":h,b=(i.maxPlaceholder,i.Title),E=(0,F.useContext)(ie),I=E.prefixCls,x=E.invokeAction,N=E.getKdesignerApi,S=E.getExpressionData,P=E.getRefBillData,R=E.getDataRef,_=E.getCompareTypes,O=(0,F.useState)(!1),B=(0,f.c)(O,2),j=B[0],L=B[1],U=(0,F.useState)(!1),K=(0,f.c)(U,2),V=K[0],z=K[1],G=(0,F.useState)(null),H=(0,f.c)(G,2),q=(H[0],H[1],(0,F.useState)(null)),Y=(0,f.c)(q,2),W=Y[0],Q=Y[1],X=N(),Z=X.data,J=X.meta,$=_(),ee=Z.getRootId(),te=u.ParentId,ne=Z.findControl(te)._Type_,re=(0,F.useState)(r),oe=(0,f.c)(re,2),ae=oe[0],le=oe[1],ce=(0,F.useState)(!1),ue=(0,f.c)(ce,2),se=ue[0],fe=ue[1],de=(0,F.useReducer)((function(e){return e+1}),0),pe=(0,f.c)(de,2),ve=(pe[0],pe[1]),me=(0,F.useRef)(null),ge=(0,F.useRef)(null);(0,F.useEffect)((function(){var e=Z.addDataChangeListener((function(){ve()}));return function(){e()}}),[]),(0,F.useEffect)((function(){(0,Fe.isEqual)(ae,r)||le(r)}),[r]);var he=(0,D.useDebounce)(n),ye=R(),be=yc({id:u.Key,eventName:"setDefValueForQueryForm",parser:function(e){return{data:e.bizRule,param:{}}}}).data,Ce=function(e,t){try{if(e&&"string"==typeof e){var n=JSON.parse(e);return n.valueType===t?n.value:""}if("dateRangeDef"===d){var r=e.start,o=e.end,a=r&&"string"==typeof r&&JSON.parse(r),i=o&&"string"==typeof o&&JSON.parse(o);if(0===t)return{start:(null==a?void 0:a.valueType)===t?null==a?void 0:a.value:"",end:(null==i?void 0:i.valueType)===t?null==i?void 0:i.value:""};if(2===t)return(null==a?void 0:a.valueType)===t?null==a?void 0:a.value:""}}catch(e){}},Ee=(0,F.useMemo)((function(){try{return"string"==typeof be?Ce(be,2):null==be?void 0:be.value}catch(e){}}),[be]),Ie=(0,F.useMemo)((function(){return S()}),[S]),xe=(0,F.useMemo)((function(){return P()}),[P]);(0,F.useEffect)((function(){return D.eventBus.on(pr,Qe),function(){D.eventBus.off(pr,Qe)}}),[]);var Te=(0,F.useMemo)((function(){return Z.findControlByCondition((function(e){var t=e._Type_,n=e.ParentId,r=(n&&Z.findControl(n)||{})._Type_;return!it(r)&&!it(t)}))}),[]);(0,F.useEffect)((function(){var e=ll(Te,J,!1);Q(e)}),[Te]);var Ne,Se,we=(Ne=Ie.functionOperations,A()(Ne)),ke=(Se=Dc[d],null==Pc?void 0:g()(Pc).call(Pc,(function(e){return null==Se?void 0:w()(Se).call(Se,e.id)}))),De=function(e){e.stopPropagation(),x("deleteBizRule",[{formId:ye.id,fieldKey:u.Key}],[]),Me(Rc),fe(!1)},Pe={invokeGetListConfig:function(e){e!==ee&&x("listtreeconfig",[e])},invokeGetFieldRecords:function(e){x("getFilterItemLook",[e,{getEnumData:"true",enumField:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",filterrows:[]}])},invokeSaveBizRule:function(e){x("saveBizRule",[{formId:ye.id,fieldKey:u.Key,ruleInfo:Ka()(e)}])}},Me=function(e){e=Ka()(e),le(e),he(e)},Re=function(e,t){var r=(0,f.c)(e,2),o=r[0],a=void 0===o?"":o,i=r[1],l=void 0===i?"":i,c={start:Ka()({valueType:t,value:a}),end:Ka()({valueType:t,value:l})};le(c),n(c)},_e=function(e,t){var n,r,o=Ae()(n=e[0].data).call(n,(function(e){return e.value===t}));return o=o||Ae()(r=e[1].data).call(r,(function(e){return e.value===t}))},Oe=function(e){var t;if("string"==typeof e)t=e;else if(Array.isArray(e)){if("dateRangeDef"===d)return void Re(e,0);t=e.join(",")}else t=null!=e&&e.target?e.target.value:e;Me({valueType:0,value:t})},Be={prefixCls:"kd"},je=Sc(Sc({},s),{},{value:null!==(t=null==s?void 0:s.value)&&void 0!==t?t:"function"==typeof p?p(Ce(ae,0)):Ce(ae,0),onChange:Oe}),Le={fieldType:"findForm",borderType:"bordered",value:Ce(ae,2),onChange:Oe,disabled:a,placeholder:y,onClear:De,onClick:function(){return Ye("search")}},Ue=function(e){var t=e?e.split("@@"):["","",null],n=(0,f.c)(t,3);return[n[1],n[2]]}(Ce(ae,1)),Ke={fieldType:"formula",onClick:function(){return Ye("formula")},value:Ue[0],expressionData:Ie.functionTypes,fieldData:W,onClear:De,lang:Number(Ue[1]||1),readOnly:!0,autofocus:!1},Ve=function(e){try{if(e&&"string"==typeof e)return JSON.parse(e).valueType||0;if("dateRangeDef"===d){var t=e.start,n=(e.end,t&&"string"==typeof t&&JSON.parse(t));return(null==n?void 0:n.valueType)||0}}catch(e){}}(ae),ze={1:Ke,2:Le}[Ve],Ge=(0,F.useMemo)((function(){return"fileDef"===d}),[d]),He=(it(ne)||Ge||Sc({data:ke,popperClassName:"".concat(I,"-def-editor-var-select-panel"),type:"dropdownSelect",onSelect:function(e){return Ye(e[0])},varSelectActive:se,onVarSelectActive:fe},ze),function(){L(!0)}),qe=function(){x("getBizRule",[{formId:ye.id,fieldKey:u.Key}],[]),z(!0)},Ye=(0,F.useCallback)((function(e){var t,n={search:qe,formula:He};if("formula"===e&&!W){var r=ll(Te,J,!1);Q(r)}null===(t=n[e])||void 0===t||t.call(n)}),[Te,qe,He]),We=function e(t,n,r){return null==t?void 0:T()(t).call(t,(function(t){return t.key===n?Sc(Sc({},t),{},{children:r}):t.children?Sc(Sc({},t),{},{children:e(t.children,n,r)}):t}))},Qe=function(e){var t;Q((function(t){var n;return We(t,null===(n=ge.current)||void 0===n?void 0:n.Key,function(e,t){var n=t||{},r=(n.Name,n.Key),o=n.ParentId;return n.controlType,null==e?void 0:T()(e).call(e,(function(e){var t,n,a=e.PropCap,i=e.PropKey,l=(e.isMulti,e.items,e.type,a);return{key:C()(t="".concat(r,".")).call(t,i),title:l,parentId:o,id:C()(n="".concat(r,".")).call(n,i),isLeaf:!0}}))}(e,ge.current))})),null===(t=me.current)||void 0===t||t.call(me),me.current=null};return k().createElement(k().Fragment,null,!Ge&&k().createElement(D.NameTipWrapper,{nameHidden:v,className:o,name:l,tips:c,required:m,title:b}),k().createElement("div",{onClick:function(){Ge&&Ye("search")},className:"".concat(I,"-def-editor")},k().createElement(M.ConfigProvider,{value:Be},k().createElement(qn.InputCombo,je))),k().createElement(M.ConfigProvider,{value:Be},j&&k().createElement(qn.Condition,{loadData:function(e){e.children,e.isLeaf;var t,n=e.key,r=e.isAsyncNode,o=(null===(t=Z.findControlByCondition((function(e){return e.Key===n})))||void 0===t?void 0:t[0])||{},a=J.getControlMeta(o._Type_).Name;return ge.current=Sc({controlType:a},o),new(jr())((function(e){if(r){me.current=e;var t=function(e){return"NoCodeMulRefBillField_bos_adminorg"===e}(o._Type_)||function(e){return"NoCodeMulRefBillField_bos_user"===e}(o._Type_)?J.getControlMetaEditor(o._Type_,"BillEntityIdEx").Default:o.EntityData.BillEntityIdEx;x("click",[o.Id,"entitymeta","PropsDisplay",{BillEntityIdEx:t,itemKey:o.Key}],[])}else e()}))},value:Ue[0],language:Number(Ue[1]||1),modalTitle:"编辑运算公式",editorTitle:u.Name,visible:j,editorPlaceholder:"请编辑运算公式",fieldData:W,fieldTitle:"表单内容",expressionData:Ie.functionTypes,operations:we,onClose:function(){L(!1),fe(0!==Ve&&!(null==ze||!ze.value))},onConfirm:function(e,t){e=function(e,t){var n,r;if(!e)return"";var o=(e=e.replace(/）/g,")").replace(/（/g,"(").replace(/“/g,'"').replace(/”/g,'"').replace(/‘/g,"'").replace(/’/g,"'")).replace(Fc,"$1").replace(kc,"$1");return C()(n=C()(r="".concat(o,"@@")).call(r,e,"@@")).call(n,t?1:0)}(e,t),Pe.invokeSaveBizRule({valueType:1,value:e}),L(!1),!e&&fe(!1),Me(e?{valueType:1,value:e}:Rc)}})),V&&k().createElement(Nc,{visible:V,onClose:function(){z(!1),fe(0!==Ve&&!(null==ze||!ze.value))},invokeActions:Pe,queryFormValue:Ee||Mc.value,refBillData:xe,field:u,compareTypesMap:$,formId:ye.id,onConfirm:function(e){z(!1),!e.value.relationFormId&&fe(!1);var t=function(e,t){var n,r=(null===(n=_e(e,t))||void 0===n?void 0:n.label)||"";return r?"查找：".concat(r):""}(xe,e.value.relationFormId);"dateRangeDef"===d?Re([t,t],e.valueType):e.value.relationFormId?Me({valueType:e.valueType,value:t}):Me(Rc)}}))},Oc=(0,F.memo)((function(e){var t=e.locked,n=e.editor,r=e.field,o=e.handleChange,a=e.value,i=e.className,l=n.Relationproperty,c=r||{},u=c[void 0===l?"CustomContent":l],s=c.SelectItemType,f=c.AllowClear,p=void 0===f||f,v=Array.isArray(u)?u:(null==u?void 0:u.ops)||[],m=(0,F.useMemo)((function(){var e;return g()(e=(null==v?void 0:T()(v).call(v,(function(e){return{label:e.Label,value:e.Value}})))||[]).call(e,(function(e){return e.label}))}),[v]),h=1==s,y=function(e){t||o(e)};(0,F.useEffect)((function(){if(a&&m.length){var e=JSON.parse(a)||{},t=e.value,n=(null==t?void 0:t.split(","))||[];if(n.length){var r=T()(m).call(m,(function(e){return e.value}));if((n=g()(n).call(n,(function(e){return w()(r).call(r,e)}))).length){var o=n.join(",");t!==o&&(e.value=o,y(Ka()(e)))}else y("")}}}),[m]);var b=(0,d.c)({className:"".concat(i,"-select-def-editor"),scrollHidden:!1,disabled:t,placeholder:"请选择",borderType:"bordered",allowClear:p,onChange:y,mode:h?"multiple":"single",options:m,fieldType:"combo"},"placeholder","请选择");return k().createElement(_c,(0,_.c)({},e,{handleChange:y,getRenderValue:function(e){return h?(0,Fe.isEmpty)(e)?[]:null==e?void 0:e.split(","):(0,Fe.isEmpty)(e)?"":e},editorType:"selectDef",inputFieldProps:b}))}));Oc.displayName="SelectOptionEditor";var Bc=Oc;function jc(e,t){var n=v()(e);if(i()){var r=i()(e);t&&(r=g()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jc(Object(n),!0).forEach((function(t){(0,d.c)(e,t,n[t])})):s()?Object.defineProperties(e,s()(n)):jc(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}var Uc="min",Kc="max",Vc=function(e){return{type:Uc,value:e}},zc=function(e){return{type:Kc,value:e}},Gc=function(e,t){var n=t.type,r=t.value;switch(n){case Uc:return Lc(Lc({},e),{},{min:r});case Kc:return Lc(Lc({},e),{},{max:r});default:return e}},Hc=function(e){var t=e.handleChange,n=e.value,r=e.className,o=e.locked,a=e.Editor,i=e.Name,l=e.Tips,c=a.NameHidden,u=a.Required,s=a.minPlaceholder,p=void 0===s?"最小值":s,v=a.maxPlaceholder,m=void 0===v?"最大值":v,g=a.Min,h=a.Title,y=(0,F.useReducer)(Gc,{min:!1,max:!1}),b=(0,f.c)(y,2),C=b[0],E=b[1],I=(0,F.useReducer)(Gc,{min:String((null==n?void 0:n.min)||""),max:String((null==n?void 0:n.max)||"")}),x=(0,f.c)(I,2),T=x[0],N=x[1];(0,F.useEffect)((function(){var e=String((null==n?void 0:n.min)||""),t=String((null==n?void 0:n.max)||""),r=C.min,o=C.max;r||e===T.min||N(Vc(e)),o||t===T.max||N(zc(t))}),[n,C]);var A=function(e,n){var r=Lc(Lc({},T),{},(0,d.c)({},n,e));t(r)},S=(0,D.useDebounce)(A,300),w=function(e){E({type:e,value:!0})};return k().createElement(k().Fragment,null,k().createElement(D.NameTipWrapper,{nameHidden:c,className:r,name:i,tips:l,required:u,title:h}),k().createElement("div",{className:"".concat(r,"-datascope-editor")},k().createElement(M.Stepper,{type:"embed",value:T.min,zeroShow:!0,onChange:function(e){var t=e.target.value||"",n=T.max;!e.nativeEvent&&!ke()(g)&&t<g&&(t=g),t&&n&&t>Number(n)&&(t=n),N(Vc(t)),t&&!ke()(g)&&t<g||"-"===t||S(t,Uc)},onFocus:function(){return w(Uc)},onBlur:function(e){E(Vc(!1));var t=T.min;!ke()(g)&&(Number(t)<g||""===t)&&(N(Vc(String(g))),A(String(g),Uc))},disabled:o,placeholder:p}),k().createElement("div",{className:"".concat(r,"-seperator")},"-"),k().createElement(M.Stepper,{type:"embed",value:T.max,zeroShow:!0,onFocus:function(){return w(Kc)},onBlur:function(e){E(zc(!1));var t=T.min,n=T.max;if(""!==t&&n<=Number(t)||!ke()(g)&&Number(n)<=g){var r="";""!==n&&""!==t&&n<Number(t)&&(r=t),!ke()(g)&&Number(n)<=g&&(r=g),""!==r&&(N(zc(r)),A(r,Kc))}},onChange:function(e){var t=e.target.value||"",n=T.min;!e.nativeEvent&&t&&(!ke()(g)&&t<g&&(t=g),n&&t<Number(n)&&(t=n)),N(zc(t)),(t&&n&&t>=Number(n)||""===n&&"-"!==t||""===t)&&(!ke()(g)&&t&&t>=g||ke()(g))&&S(t,Kc)},disabled:o,placeholder:m})))};var qc=(0,F.memo)((function(e){var t=e.item,n=e.index,r=e.prefixClass,o=e.isSysControl,a=e.fieldInfo,i=e.innerForm,l=e.isNew,c=e.disabled,u=e.isRefSelf,s=e.onDrop,d=e.onTitleChange,p=e.onShowField,v=e.onDelectField,m=e.showMessage,g=(0,F.useState)((null==t?void 0:t.Name)||""),h=(0,f.c)(g,2),y=h[0],b=h[1],C=(0,F.useState)(!1),E=(0,f.c)(C,2),I=E[0],x=E[1],T=(0,F.useRef)(null),N=a.inner2Outer,A=a.SourceForm,S=(0,F.useMemo)((function(){return!c&&(N||i)}),[N,i,c]),w=(0,F.useMemo)((function(){return!l&&("1"===A&&N||"1"!==A)}),[N,i,A,l]),D=(0,F.useMemo)((function(){return!c&&(!u&&("1"===A||S))}),[N,S,c]);(0,F.useEffect)((function(){t.Name&&b(t.Name)}),[t.Name]);var P=(0,F.useCallback)((function(){var e;y||(null==m||m("控件名不能为空"),b(null==t?void 0:t.Name)),x(!1),null===(e=T.current)||void 0===e||e.blur(),y&&d(y,n,t)}),[y,d]),M=(0,F.useCallback)((function(){S&&!o&&v(n,t,l)}),[t,n,v,S,l,o]),R=(0,F.useCallback)((function(){x(!0),setTimeout((function(){var e;return null===(e=T.current)||void 0===e?void 0:e.focus()}),200)}),[]),_=(0,F.useCallback)((function(e,t){!c&&(null==s||s(e,t))}),[s,c]);return k().createElement(qn.Draggable,{index:n,onDrop:_,disabled:c},k().createElement("div",{className:"".concat(r,"-list-drag-item")},k().createElement("div",null,k().createElement("div",{className:"".concat(r,"-list-drag-item-title")},k().createElement("i",{className:"designericon designericon-".concat((null==pn?void 0:pn[t._Type_])||"wenben")}),I?k().createElement(qn.Text,{ref:T,value:y,size:"small",onChange:b,onPressEnter:P,onBlur:P}):k().createElement("span",{title:y},y)),k().createElement("div",{className:"".concat(r,"-list-drag-item-btns")},D&&!(null!=t&&t.RefBillId)&&!(null!=t&&t.RefTableId)&&k().createElement("i",{className:"designericon designericon-bianji3",onClick:R}),w&&k().createElement("i",{className:Vn()("designericon",{"designericon-zhanshi":t.isShow},{"designericon-yincang":!(null!=t&&t.isShow)}),onClick:function(){return p(n,t)}}),k().createElement("i",{className:"designericon designericon-tuozhuailiebiao"}))),D&&k().createElement("i",{className:Vn()("nocodeplatformicon","nocodeplatformicon-xingshanchu",{gray:!(S&&!o)}),onClick:M})))}));qc.displayName="BillFieldItem";var Yc=qc;function Wc(e,t){var n=v()(e);if(i()){var r=i()(e);t&&(r=g()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wc(Object(n),!0).forEach((function(t){(0,d.c)(e,t,n[t])})):s()?Object.defineProperties(e,s()(n)):Wc(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}var Xc="refreshPropsDisplayList",Zc=k().memo((function(e){e.handleChange;var t=e.value,n=e.className,r=e.editor,o=(e.locked,e.Name),a=e.Tips,i=e.field,l=e.id,c=e.propName,u=e.rootId,s=r.NameHidden,p=r.Required,v=r.Title,m=(0,F.useContext)(ie),h=m.invokeAction,y=m.billPropsData,b=m.dispatchBillData,E=m.getKdesignerApi,I=m.getHideFieldRef,x=m.setHideFieldRef,N=(0,F.useContext)(D.GlobalConfigContext).showMessage,A=E(),S=A.data,P=A.selection,_=A.meta,O=(A.controlCacheApi,i.BillEntityIdEx),B=i.RefTableId,j=i.RefBillId,L=i._Type_,U=i.SourceForm,K=i.inner2Outer,V=i.ShowType,z="".concat(n,"-bill-props"),G=(0,F.useState)([]),H=(0,f.c)(G,2),q=H[0],Y=H[1],W=(0,F.useRef)(t),Q=(0,F.useRef)({fieldId:l,tableId:B,refId:j,code:c}),X=(0,F.useRef)(Qc({},y)||{}),Z=et(L)&&B?B:l,J=(0,F.useRef)(Z),$=(0,F.useRef)(O||"1"!==U?O:"".concat(Z,"_table")),ee=(0,F.useRef)(new(bn())(t?t.split(","):[])),te=(0,F.useRef)([]),ne=(0,F.useMemo)((function(){return Ao(i,y.innerForm||[])}),[i,K,null==y?void 0:y.innerForm]),re=(0,F.useCallback)((function(e){if(W.current!==e){var t=Q.current,n=t.fieldId,r=t.code,o=[[n,(0,d.c)({},r,e)]];S.batchUpdateControlPropertyValues((0,D.createUpdateAction)(o))}}),[]),oe=(0,F.useCallback)((function(e,t){var n=[],r=t||{},o=r.Key,a=r.isShow;if(S.findControlByCondition((function(r){var o;r.Id.split("_").length>1&&w()(o=r.Id).call(o,t.Id)&&n.push([r.Id,{Name:e}])})),"1"!==U&&(!a||"1"===V)){var i=(S.findControl(u)||{}).refFieldEdit,l=void 0===i?{}:i,c="string"==typeof l?JSON.parse(l||"{}"):(0,Fe.cloneDeep)(l);c[$.current]=c[$.current]||{},c[$.current][o]={title:e,status:"edit"},n.push([u,{refFieldEdit:c}])}S.batchUpdateControlPropertyValues((0,D.createUpdateAction)(n))}),[U,u,V]),ae=(0,F.useCallback)((function(e,t){var n=t.sourceIndex,r=t.destinationIndex,o=(0,Fe.cloneDeep)(q),a=ue()(o).call(o,n,1)[0];ue()(o).call(o,r,0,a),Y((0,R.c)(o)),ye(o),te.current=o,D.eventBus.emit(Xc,{id:Q.current.fieldId,data:(0,R.c)(o)})}),[q,Y]),le=(0,F.useCallback)((function(e,t,n){b({key:zr,payload:{form:$.current,id:n.Id,data:{Name:e}}}),oe(e,n)}),[b,q]),ce=(0,F.useCallback)((function(e){return e.reduce((function(e,t){var n,r;return t.isShow?Je(t._Type_)?C()(n=[]).call(n,(0,R.c)(e),["".concat(t.Key,"_startdate"),"".concat(t.Key,"_enddate")]):C()(r=[]).call(r,(0,R.c)(e),[t.Key]):e}),[])}),[]),se=(0,F.useCallback)((function(e,t){var n=(0,Fe.cloneDeep)(q);if(n[e].isShow=!n[e].isShow,"2"===V)if(n[e].isShow)S.addControl((0,D.createAddAction)(_o(n[e],l)));else{var r,o=I();Ro([C()(r="".concat(t.Id,"_")).call(r,l)],y,b,S,o,x)}var a=ce(n);"1"===V&&re(a.join());var i=new(bn())(a);n=Do(n,i),te.current=n,Y(n)}),[q,l,y,V]),fe=(0,F.useCallback)((function(e,t){if(O&&!(arguments.length>2&&void 0!==arguments[2]&&arguments[2])){var n=(S.findControl(u)||{}).refFieldEdit,r=void 0===n?{}:n,o="string"==typeof r?JSON.parse(r||"{}"):(0,Fe.cloneDeep)(r);o[$.current]=o[$.current]||{},o[$.current][t.Key]={status:"delete"},S.batchUpdateControlPropertyValues((0,D.createUpdateAction)([[u,{refFieldEdit:o}]]))}if("2"===V&&null!=t&&t.isShow){var a=[];S.findControlByCondition((function(e){var n;w()(n=e.Id).call(n,t.Id)&&a.push(e.Id)}));var i=I();Ro(a,X.current,b,S,i,x)}else{var l,c=g()(l=(0,R.c)(ee.current)).call(l,(function(e){return!w()(e).call(e,t.Key)}));re(c.join())}b({key:Hr,payload:{form:$.current,id:t.Id}})}),[V,O,u]),de=(0,F.useCallback)((function(e,t,n){var r,o=window.sessionStorage.getItem("nocode-d-del-modal");if(!O||o||n||"1"===U)return fe(e,t);qn.WebMsg.showConfirmModal({title:"确认删除“".concat(t.Name,"”吗？"),content:"会在表单“".concat((null===(r=X.current[O])||void 0===r||null===(r=r.data)||void 0===r?void 0:r.caption)||"","”中同步删除"),actions:[{key:"delete",text:"删除"},{key:"ok",text:"再想想"}],onAction:function(r){"delete"===r&&fe(e,t,n)},type:"delete",extra:k().createElement(M.Checkbox,{style:{marginTop:32},onChange:function(e){return e.target.checked&&window.sessionStorage.setItem("nocode-d-del-modal","true")}},"下次不再提醒")})}),[O,U,fe]),pe=(0,F.useCallback)((function(e,t,n){if(e.length){var r=Q.current.fieldId,o=S.findControlIndex(r),a=Oo(e,t,J.current,_),i=(0,f.c)(a,2),l=i[0],c=i[1];S.addControl((0,D.createAddAction)(l,{index:o+1})).then((function(){P.setSelect([r]),null==n||n(c.join())})).catch((function(e){}))}}),[]),ve=(0,F.useCallback)((function(e,t){S.deleteControl((0,D.createDeleteAction)(e)).then((function(e){null==t||t(e)})).catch((function(e){}))}),[]),me=(0,F.useCallback)((function(e,t){var n=Mo(e,i);ee.current.size&&(n=Do(n,ee.current)),Y(n),te.current=n,null==t||t(n)}),[i]),ge=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,n=(0,F.useRef)({fn:e,timer:null}).current;return(0,F.useEffect)((function(){n.fn=e}),[e]),(0,F.useCallback)((function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];n.timer&&clearTimeout(n.timer),n.timer=setTimeout((function(){n.fn.apply(n,r)}),t)}),[e])}(me,100),he=(0,F.useCallback)((function(e){var t;if(null!=e&&e.data){var n=(null==e?void 0:e.data)||{},r=T()(t=n.entitymeta.Items).call(t,(function(e){return e.Id}));b({key:Vr,payload:{form:e.billEntityIdEx||n.id,info:{data:n,ids:r}}})}}),[]),ye=(0,F.useCallback)((function(e){var t=Q.current.fieldId,n=S.getParentControl(t)._Type_;if(!lt(n))if("2"===V){var r=S.getAllSubControls(t),o=r.reduce((function(e,n){var r;return n.Id===t?e:C()(r=[]).call(r,(0,R.c)(e),[n.Id])}),[]);ve(o,(function(){pe(e,r,(function(e){return re(e)}))}))}else re(ce(e).join())}),[V,U]);(0,F.useEffect)((function(){var e,t=((null==y?void 0:y[$.current])||{}).data,n=((null===(e=X.current)||void 0===e?void 0:e[$.current])||{}).data;t&&!(0,Fe.isEqual)(n,t)&&$.current&&ge(t),X.current=Qc({},y)}),[y]),(0,F.useEffect)((function(){var e;W.current=t,ee.current=new(bn())(t?t.split(","):[]);var n=((null===(e=X.current)||void 0===e?void 0:e[$.current])||{}).data;n&&(K||"1"!==U)&&ge(n)}),[t]),(0,F.useEffect)((function(){if($.current!==O&&"1"!==U&&($.current=O,W.current="",ee.current=new(bn()),Y([])),O){var e,t=((null===(e=X.current)||void 0===e?void 0:e[O])||{}).data;t?ge(t):h("getDesignerMetadata",[O]),h("click",[l,"entitymeta",c,{BillEntityIdEx:O,itemKey:i.Key}],[])}if(!O&&"1"!==U){var n,r=we()(n=S.getAllSubControlIds(J.current)).call(n,1);r.length&&ve(r),te.current=[]}}),[O]),(0,F.useEffect)((function(){if(K){var e,t=((null===(e=X.current)||void 0===e?void 0:e[$.current])||{}).data;t&&ge(t)}}),[K]);var be=(0,F.useCallback)((function(e){var t=e.id,n=e.data;t!==Q.current.fieldId||(0,Fe.isEqual)(n,te.current)||(te.current=n,Y(n))}),[]);(0,F.useEffect)((function(){var e,t=((null===(e=X.current)||void 0===e?void 0:e[$.current])||{}).data;return t&&me(t),D.eventBus.on(Xc,be),function(){D.eventBus.off(Xc,be)}}),[]),(0,F.useEffect)((function(){return D.eventBus.on(br,he),function(){D.eventBus.off(br,he)}}),[he]);var Ce=(0,F.useMemo)((function(){return et(L)&&"2"===V}),[L,V]);return k().createElement("div",{className:z},k().createElement("div",{className:"".concat(z,"-title")},k().createElement(D.NameTipWrapper,{nameHidden:s,className:n,name:o,tips:a,required:p,title:v})),k().createElement("div",{className:"".concat(z,"-list")},null!=q&&q.length?k().createElement(qn.DragContainer,null,k().createElement("div",{className:"".concat(z,"-list-drag")},T()(q).call(q,(function(e,t){var n;return k().createElement(Yc,{key:e.Id,item:e,index:t,prefixClass:z,fieldInfo:i,disabled:Ce,isNew:!O||!(null!=y&&null!==(n=y[$.current])&&void 0!==n&&null!==(n=n.ids)&&void 0!==n&&w()(n).call(n,e.Id)),innerForm:ne,showMessage:N,isRefSelf:O===u,isSysControl:Fo(e._Type_),onDrop:ae,onTitleChange:le,onShowField:se,onDelectField:de})})))):k().createElement("div",{className:"".concat(z,"-empty")},k().createElement(qn.EmptyData,{desc:"暂无内容"}))))}));function Jc(e,t){var n=v()(e);if(i()){var r=i()(e);t&&(r=g()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function $c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jc(Object(n),!0).forEach((function(t){(0,d.c)(e,t,n[t])})):s()?Object.defineProperties(e,s()(n)):Jc(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}var eu=(0,F.memo)((function(e){var t,n,r,o,a=e.handleChange,i=e.value,l=e.className,c=e.editor,u=(e.locked,e.Name),s=e.Tips,d=e.field,p=(e.id,e.propName,c.NameHidden),v=c.Required,m=c.Title,h=d.FileMaxSize,y=d.UploadNum,b=d.ImageFileType,E=d.FieldType,I=d.ButtonText,x=(0,F.useContext)(ie),N=x.getKdesignerApi,A=x.baseUrl,S=(0,F.useState)([]),w=(0,f.c)(S,2),P=w[0],_=w[1],O=N(),B=(O.data,O.meta),j=B.getControlPropertyDefaultValue,L=(0,B.getControlMetaEditor)(E,"ImageFileType").Enum,U=j(E,"FileMaxSize"),K=j(E,"ImageFileType"),V="".concat(l,"-pic"),z=(0,F.useState)(""),G=(0,f.c)(z,2),H=G[0],q=G[1],Y=(0,F.useRef)(new(Me())),W=(0,F.useCallback)((function(e){qn.WebMsg.showNotificationMsg({param:[{type:2,content:e,duration:2e3}]})}),[]),Q=(0,F.useCallback)((function(e,t){return null!=y&&y.max&&t.length>y.max?(W("最多只能上传".concat(y.max,"个图片，请重新选择")),!1):!(h&&e.size/1024/1024>h)||(W("请上传小于".concat(h,"M的图片")),!1)}),[y.max,h,Y.current]),X=(0,F.useCallback)((function(e){var t=e.file,n=e.fileList;if(t.response&&"0"===t.response.errorCode){var r,o=t.uid,i=t.name,l=t.size,c={url:t.response.data.url,status:"success",uploadTime:Date.now()};Y.current.set(t.uid,$c({uid:o,name:i,size:l},c)),a(Ka()((0,R.c)(Tl()(r=Y.current).call(r)))),n.forEach((function(e){e.uid===t.uid&&(e.url=A.picture+t.response.data.url)}))}_((0,R.c)(n))}),[P,Y.current,a]),Z=(0,F.useCallback)((function(e){var t,n=Ur()(P).call(P,(function(t){return t.uid===e.uid}));ue()(P).call(P,n,1),_((0,R.c)(P)),Y.current.get(e.uid)&&Y.current.delete(e.uid);var r=Y.current.size>0?Ka()((0,R.c)(Tl()(t=Y.current).call(t))):"";a(r)}),[P,Y.current,a]);(0,F.useEffect)((function(){if(i&&Qt(i)){var e=JSON.parse(i);(0,Fe.isArray)(e)?(Y.current=new(Me()),e=T()(e).call(e,(function(e){Y.current.set(e.uid,$c({},e));var t=A.picture+e.url;return $c($c({},e),{},{url:t})})),_(e)):q(e.value)}else(0,oe.unstable_batchedUpdates)((function(){_([]),q("")}))}),[i]);var J=b||K,$=T()(t=J.split(",")).call(t,(function(e){return g()(L).call(L,(function(t){return t.Id===e}))[0].Name}));return k().createElement("div",{className:V},k().createElement("div",{style:{marginBottom:"8px"}},k().createElement(D.NameTipWrapper,{nameHidden:p,className:l,name:u,tips:s,required:v,title:m})),!H&&k().createElement("div",null,k().createElement(M.ConfigProvider,{value:{prefixCls:"kd"}},k().createElement(qn.Picture,{fileList:P,action:Ht(window.__domainurl__+"nocode/v2/nocode_sys/image"),data:{action:"upload",tempstorage:!1},accept:T()($).call($,(function(e){return"."+e})).join(","),multiple:!0,buttonText:I,onChange:X,onRemove:Z,beforeUpload:Q,noticeInfo:C()(n=C()(r=C()(o="请上传小于".concat(h||U,"M的")).call(o,$.join("、"),"文件，文件个数不少于")).call(r,(null==y?void 0:y.min)||0,"个，不多于")).call(n,(null==y?void 0:y.max)||1,"个。")}))))})),tu=function(e){var t=e.formVisible,n=e.prefixCls,r=e.refFldOptions,o=e.currFldOptions,a=e.refFldKey,i=e.currFldKey,l=e.handleChange;return t?k().createElement("div",{className:"".concat(n,"-form")},k().createElement("div",{className:"".concat(n,"-form-item")},k().createElement("div",{className:"".concat(n,"-form-item-label")},"关联表单内容"),k().createElement(M.Select,{className:"".concat(n,"-form-item-select"),borderType:"bordered",value:a,options:r,placeholder:"请选择",onChange:function(e){return l(e,"RefFldKey")}})),k().createElement("div",{className:"".concat(n,"-form-seperator")},"的值填充到"),k().createElement("div",{className:"".concat(n,"-form-item")},k().createElement("div",{className:"".concat(n,"-form-item-label")},"当前表单内容"),k().createElement(M.Select,{className:"".concat(n,"-form-item-select"),borderType:"bordered",value:i,options:o,placeholder:"请选择",onChange:function(e){return l(e,"CurrFldKey")}}))):null},nu=function(e){var t,n=e.prefixCls,r=e.data,o=e.index,a=e.isNewOption,i=e.handleDelete,l=e.handleUpdate,c=e.currFldOptions,u=e.refFldOptions,s=r.RefFldKey,d=r.CurrFldKey,p=(null===(t=Ae()(u).call(u,(function(e){return e.value===s})))||void 0===t?void 0:t.label)||"",v=(0,F.useState)(!!a),m=(0,f.c)(v,2),g=m[0],h=m[1],y=(0,F.useRef)(null),b=(0,F.useRef)(null),C=(0,F.useCallback)((function(e,t){e.stopPropagation(),i(t)}),[i]),E=(0,F.useCallback)((function(){h(!0)}),[h]),I=(0,F.useCallback)((function(e,t){l(e,o,t)}),[l,o]),x=(0,F.useCallback)((function(){return k().createElement("div",{ref:y},k().createElement(tu,{formVisible:g,prefixCls:n,currFldOptions:c,refFldOptions:u,refFldKey:s,currFldKey:d,handleChange:I}))}),[n,c,u,s,d,I,g]);return(0,D.useOnClickOutside)([y],(function(e){var t=document.getElementById("app");if((!t||null!=t&&t.contains(e.target))&&g){var n;if(null!==(n=b.current)&&void 0!==n&&n.contains(e.target))return;h(!1)}})),k().createElement(M.Tooltip,{trigger:"click",placement:"leftTop",popperStyle:{width:"636px"},popperClassName:"".concat(n,"-dropdown"),tip:x(),visible:g},k().createElement("div",{className:"".concat(n,"-option"),onClick:E,ref:b},k().createElement("div",{className:"".concat(n,"-option-name")},p),k().createElement("div",{className:"".concat(n,"-option-right-btns")},k().createElement(M.Icon,{prefix:"designericon",type:"bianji3"}),k().createElement(M.Icon,{prefix:"designericon",type:"shanchu",onClick:function(e){return C(e,o)}}))))};function ru(e,t){var n=v()(e);if(i()){var r=i()(e);t&&(r=g()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function ou(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ru(Object(n),!0).forEach((function(t){(0,d.c)(e,t,n[t])})):s()?Object.defineProperties(e,s()(n)):ru(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}var au={CurrFldKey:"",RefFldKey:""},iu="DELETE",lu="UPDATE",cu="MERGE",uu=function(e,t){var n=t.type,r=t.index,o=t.payload;return bt()(e,(function(e){switch(n){case"ADD":e.push(o);break;case lu:e[r]=ou(ou({},e[r]),o);break;case iu:ue()(e).call(e,r,1);break;case cu:e=o}return e}))},su=function(e){var t=e.handleChange,n=e.value,r=e.className,o=e.editor,a=(e.locked,e.Name),i=e.Tips,l=e.field,c=o.NameHidden,u=o.Required,s=o.Title,p=l.Id,v=(0,F.useContext)(ie),m=v.prefixCls,g=v.getKdesignerApi,h=v.getCurrentRefBillPropsData,y=g(),b=y.data,E=y.meta,I=(0,F.useReducer)(uu,n||[]),x=(0,f.c)(I,2),N=x[0],A=x[1],S=(0,F.useState)((function(){var e=b.findControlByCondition((function(e){var t=e._Type_,n=e.ParentId,r=b.getRootId(),o=(n&&b.findControl(n)||{})._Type_;return!(it(o)||it(t)||function(e){return"NoCodeGEOField"===e}(t)||ot(t)||at(t)||e.Id===p||e.Id===r)})).reduce((function(e,t){var n=t._Type_;return"NoCodeDateRangeField"===E.getControlMeta(n).Id?C()(e).call(e,[{label:"".concat(t.Name,".开始"),value:"".concat(t.Key,"_startdate")},{label:"".concat(t.Name,".结束"),value:"".concat(t.Key,"_enddate")}]):C()(e).call(e,{label:t.Name,value:t.Key})}),[]);return e})),w=(0,f.c)(S,1)[0],P=(0,F.useState)([]),R=(0,f.c)(P,2),_=R[0],O=R[1],B=(0,F.useState)(null),j=(0,f.c)(B,2),L=j[0],U=j[1],K=(0,F.useCallback)((function(){U(N.length),A({type:"ADD",payload:au})}),[N,A]),V=(0,F.useCallback)((function(e,t,n){A({type:lu,index:t,payload:(0,d.c)({},n,e)})}),[A]),z=(0,F.useCallback)((function(e){U(null),A({type:iu,index:e})}),[A]),G=(0,F.useCallback)((function(e){var t=T()(e).call(e,(function(e){return{label:e.PropCap,value:e.PropKey}}));O(t)}),[]);return(0,F.useEffect)((function(){return G(h()),D.eventBus.on(pr,G),function(){D.eventBus.off(pr,G)}}),[]),(0,F.useEffect)((function(){(0,Fe.isEqual)(n,N)||t(N)}),[N]),(0,F.useEffect)((function(){(0,Fe.isEqual)(n||[],N)||A({type:cu,payload:n})}),[n]),k().createElement(k().Fragment,null,k().createElement(D.NameTipWrapper,{nameHidden:c,className:r,name:a,tips:i,required:u,title:s}),k().createElement("div",{className:"".concat(m,"-relate-field")},T()(N).call(N,(function(e,t){return k().createElement(nu,{key:t,prefixCls:"".concat(m,"-relate-field"),data:e,index:t,isNewOption:L===t,handleUpdate:V,handleDelete:z,currFldOptions:w,refFldOptions:_})}))),k().createElement("div",{className:"".concat(m,"-relate-field-add")},k().createElement("div",{className:"add-btn",onClick:K},k().createElement(M.Icon,{type:"zengjia-yuan",prefix:"designericon"}),k().createElement("span",{className:"".concat(m,"-relate-field-add-option-desc")},"添加"))))};function fu(e,t){var n=v()(e);if(i()){var r=i()(e);t&&(r=g()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function du(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fu(Object(n),!0).forEach((function(t){(0,d.c)(e,t,n[t])})):s()?Object.defineProperties(e,s()(n)):fu(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}var pu="start",vu="end",mu=function(e,t){return du(du({},e),t)},gu=function(e){var t=e.handleChange,n=e.value,r=e.className,o=e.locked,a=e.Editor,i=e.Name,l=e.Tips,c=a.NameHidden,u=a.Required,s=a.minPlaceholder,p=void 0===s?"请输入":s,v=a.maxPlaceholder,m=void 0===v?"请输入":v,g=a.Title,h=(0,F.useReducer)(mu,(0,d.c)((0,d.c)({},pu,!1),vu,!1)),y=(0,f.c)(h,2),b=y[0],C=y[1],E=(0,F.useReducer)(mu,(0,d.c)((0,d.c)({},pu,String((null==n?void 0:n[pu])||"")),vu,String((null==n?void 0:n[vu])||""))),I=(0,f.c)(E,2),x=I[0],T=I[1];(0,F.useEffect)((function(){var e=String((null==n?void 0:n[pu])||""),t=String((null==n?void 0:n[vu])||""),r=b[pu],o=b[vu];r||e===x[pu]||T((0,d.c)({},pu,e)),o||t===x[vu]||T((0,d.c)({},vu,t))}),[n,b]);var N=(0,D.useDebounce)((function(e,n){var r=du(du({},x),{},(0,d.c)({},n,e));t(r)}),300),A=function(e){C((0,d.c)({},e,!0))},S=function(e){C((0,d.c)({},e,!0))};return k().createElement(k().Fragment,null,k().createElement(D.NameTipWrapper,{nameHidden:c,className:r,name:i,tips:l,required:u,title:g}),k().createElement("div",{className:"".concat(r,"-datascope-editor")},k().createElement(M.Input,{borderType:"bordered",value:x[pu],onChange:function(e){var t=e.target.value||"";T((0,d.c)({},pu,t)),N(t,pu)},onFocus:function(){return A(pu)},onBlur:function(){return S(vu)},disabled:o,placeholder:p}),k().createElement("div",{className:"".concat(r,"-seperator")},"-"),k().createElement(M.Input,{borderType:"bordered",value:x[vu],onFocus:function(){return A(vu)},onBlur:function(){return S(vu)},onChange:function(e){var t=e.target.value||"";T((0,d.c)({},vu,t)),N(t,vu)},disabled:o,placeholder:m})))},hu=function(e){e.handleChange;var t=e.value,n=(e.className,e.locked),r=e.field.FormatType,o=(0,F.useContext)(ie).prefixCls,a={className:"".concat(o,"-daterange-editor"),popperClassName:"".concat(o,"-range-picker-dropdown"),disabled:n,placeholder:["起始日期","结束日期"],formatType:r,allowClear:!0,fieldType:"dateRange"};return k().createElement(_c,(0,_.c)({},e,{getRenderValue:function(e){return vt(e)},editorType:"dateRangeDef",value:t,inputFieldProps:a}))},yu=new(Me())([["2","month"],["3","year"]]),bu=function(e){var t=e.handleChange,n=e.value,r=(e.className,e.locked),o=e.field.FormatType,a=(0,F.useContext)(ie).prefixCls,i=((0,F.useMemo)((function(){return{picker:yu.get(o)||"date"}}),[o]),{className:"".concat(a,"-date-editor"),disabled:r,placeholde:"请选择",formatType:o,allowClear:!0,fieldType:"date",placeholder:"请选择"});return k().createElement(_c,(0,_.c)({},e,{editorType:"dateDef",value:n,getRenderValue:function(e){return e&&Date.parse(e)?new Date(e):void 0},handleChange:function(e){t(e)},inputFieldProps:i}))};function Cu(e,t){var n=v()(e);if(i()){var r=i()(e);t&&(r=g()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Eu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cu(Object(n),!0).forEach((function(t){(0,d.c)(e,t,n[t])})):s()?Object.defineProperties(e,s()(n)):Cu(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}var Iu=(0,F.memo)((function(e){var t,n,r,o=e.handleChange,a=e.value,i=e.className,l=e.editor,c=e.Name,u=e.Tips,s=e.field,p=l.NameHidden,v=l.Required,m=l.Title,h=s.FileMaxSize,y=s.UploadNum,b=s.UploadModel,E=s.AttachmentFileType,I=s.FieldType,x=s.ButtonText,N=(0,F.useContext)(ie),A=N.getKdesignerApi,S=N.baseUrl,w=N.invokeAction,P=(0,F.useState)(""),M=(0,f.c)(P,2),_=M[0],O=M[1],B=(0,F.useState)([]),j=(0,f.c)(B,2),L=j[0],U=j[1],K=(0,F.useState)(""),V=(0,f.c)(K,2),z=V[0],G=V[1],H=A(),q=(H.data,H.meta.getControlPropertyDefaultValue),Y=q(I,"AttachmentFileType"),W=q(I,"FileMaxSize"),Q=h||W,X=E||Y,Z=(0,F.useRef)(new(Me())),J=(0,F.useCallback)((function(e){if(!e||"{}"===e)return[];if(Qt(e)){var t=JSON.parse(e);return Array.isArray(t)?T()(t).call(t,(function(e){return Z.current.set(e.uid,e),Eu(Eu({},e),{},{url:S.attachment+e.url})})):t.value}return""}),[]);(0,F.useEffect)((function(){Z.current=new(Me());var e=J(a);Array.isArray(e)?(U(e),G("")):G(e)}),[J,a,U]);var $=(0,F.useCallback)((function(e){qn.WebMsg.showNotificationMsg({param:[{type:2,content:e,duration:2e3}]})}),[]),ee=(0,F.useCallback)((function(e,t){return null!=y&&y.max&&t.length>y.max?($("最多只能上传".concat(y.max,"个文件，请重新选择")),!1):!(Q&&e.size/1024/1024>Q)||($("请上传小于".concat(Q,"M的文件")),!1)}),[null==y?void 0:y.max,Q]),te=(0,F.useCallback)((function(e){var t=e.file,n=e.fileList;if("done"===t.status&&t.response.status){var r,a=t.lastModified,i=t.uid,l=t.name,c=t.type,u=t.size,s=(t.response,{status:"success",url:t.response.data.url,uploadTime:Date.now()});Z.current.set(t.uid,Eu({lastModified:a,uid:i,name:l,type:c,size:u},s)),o(Ka()((0,R.c)(Tl()(r=Z.current).call(r))));var f=T()(n).call(n,(function(e){return e.uid===t.uid?Z.current.get(t.uid):e}));U(f)}else U((0,R.c)(n))}),[o]),ne=(0,F.useCallback)((function(e){var t=g()(L).call(L,(function(t){return t.uid!==e.uid})),n=Z.current.get(e.uid);if(n){var r;Z.current.delete(e.uid);var a=Z.current.size>0?Ka()((0,R.c)(Tl()(r=Z.current).call(r))):"";o(a),w("beforeRemove",[{url:n.url}],[])}return U((0,R.c)(t)),!0}),[L,o,w]),re=(0,F.useCallback)((function(e){var t,n=Z.current.get(e.uid);n&&(n.name=e.name,Z.current.set(e.uid,n),o(Ka()((0,R.c)(Tl()(t=Z.current).call(t)))));U(bt()((function(t){t.forEach((function(t){t.uid===e.uid&&(t.name=e.name)}))})))}),[L,o]);return(0,F.useEffect)((function(){var e,t;O(C()(e=C()(t="".concat(c,"(")).call(t,Z.current.size,"/")).call(e,(null==y?void 0:y.max)||1,")"))}),[y,L]),k().createElement("div",{className:"".concat(i,"-attachment-editor")},k().createElement("div",{style:{marginBottom:"8px"}},k().createElement(D.NameTipWrapper,{nameHidden:p,className:i,name:_,tips:u,required:v,title:m})),!z&&k().createElement("div",null,k().createElement(qn.Attachment,(0,d.c)({multiple:!0,action:Ht(window.__domainurl__+"nocode/v2/nocode_sys/attachment"),data:{action:"upload",tempstorage:!1,isDesigner:!0},fileList:L,buttonText:x,mode:b,onChange:te,beforeUpload:ee,onRemove:ne,onChangeFileName:re,accept:X||"",uploadNum:y,noticeInfo:C()(t=C()(n=C()(r="请上传小于".concat(Q,"M的")).call(r,null==X?void 0:zo()(X).call(X,".",""),"文件，文件个数不少于")).call(n,(null==y?void 0:y.min)||0,"个，不多于")).call(t,(null==y?void 0:y.max)||1,"个")},"mode",1))))}));function xu(e,t){var n=v()(e);if(i()){var r=i()(e);t&&(r=g()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xu(Object(n),!0).forEach((function(t){(0,d.c)(e,t,n[t])})):s()?Object.defineProperties(e,s()(n)):xu(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}var Nu,Au,Su,wu=function(e){var t=e.handleChange,n=e.value,r=e.className,o=e.field,a=o.Precision,i=o.Scale,l=o.DataRange,c=o.ThousandsSeparator,u=(0,F.useMemo)((function(){var e={},t=l||{},n=t.min,r=t.max;return(0,Fe.isUndefined)(n)||""===n||(e.min=Number(n)),(0,Fe.isUndefined)(r)||""===r||(e.max=Number(r)),e}),[l]),s=(0,F.useCallback)((function(e){return c?zt("".concat(e)):String(e)}),[c]),f=Tu(Tu({className:"".concat(r,"-number-def-editor")},u),{},{showStepper:!0,decimalLength:i,formatter:s,maxLength:a,fieldType:"number",placeholder:"请输入"});return k().createElement(_c,(0,_.c)({},e,{editorType:"decimalDef",value:"".concat(n),onChange:function(e){t(e)},inputFieldProps:f}))},Fu="#F8FAFC",ku=(0,R.c)(new(bn())(T()(Nu=v()(We)).call(Nu,(function(e){return We[e]})))),Du=C()(Au=[Fu]).call(Au,ku),Pu=function(e){var t=e.handleChange,n=e.value,r=e.className,o=e.editor,a=e.locked,i=e.field,l=e.Name,c=e.Tips,u=o.NameHidden,s=o.Default,f=o.Required,d=o.Title,p=i.BackImage,v=(0,F.useRef)(!0),m=(0,Fe.isUndefined)(n)?s:String(n),g=function(e){a||t(e)};return(0,F.useEffect)((function(){!m&&g(ku[0])}),[]),(0,F.useEffect)((function(){if(p&&!v.current){var e=Ae()(Qe).call(Qe,(function(e,t){return w()(p).call(p,"background_".concat(t+1))}));g(e?We[e.primaryColor]:Fu)}v.current=!1}),[p,Qe]),k().createElement(k().Fragment,null,k().createElement(D.NameTipWrapper,{nameHidden:u,className:r,name:l,tips:c,required:f,title:d}),k().createElement(Zr,{className:"".concat(r,"-colorpicker-content"),colorList:Du,prefixClass:r,onChange:g,value:m}))},Mu=r(3872),Ru=r.n(Mu),_u=Ht((Su="nocode/v2/nocode_sys/image",window.__domainurl__+Su)),Ou=["image/png","image/jpeg","image/jpg"],Bu=function(e){var t=(0,F.useContext)(ie),n=t.baseUrl,r=t.showMessage,o=e.handleChange,a=e.value,i=e.className,l=e.editor,c=e.locked,u=e.Name,s=e.Tips,p=l.NameHidden,v=l.Default,m=l.Required,g=l.Images,h=void 0===g?[]:g,y=l.Title,b=(0,Fe.isUndefined)(a)?v:String(a),C="".concat(i,"-bgimage"),E=(0,F.useState)(!1),I=(0,f.c)(E,2),x=I[0],N=I[1],A=(0,F.useState)(""),S=(0,f.c)(A,2),P=S[0],R=S[1],O=k().useState(null!=b?b:Yt(n.picture,b)),B=(0,f.c)(O,2),j=B[0],L=B[1];(0,F.useEffect)((function(){b&&L(Yt(n.picture,b))}),[b]),(0,F.useEffect)((function(){!b&&U(v)}),[]);var U=function(e){c||o(e)},K=k().createElement("div",null,k().createElement(M.Icon,{className:"".concat(C,"-content-upload-add"),type:"add"}),k().createElement("p",{className:"".concat(C,"-content-upload-text")},"上传自定义图片")),V={data:{action:"upload",tempstorage:!0},name:"file",action:"nocode/v2/nocode_sys/image",showUploadList:!1,listType:"picture",accept:Ou.toString(),onChange:function(e){e.file},beforeUpload:function(e){if(w()(Ou).call(Ou,e.type)){P&&Ru().revokeObjectURL(P);var t=Ru().createObjectURL(e);return R(t),N(!0),!1}}};return k().createElement(k().Fragment,null,k().createElement(D.NameTipWrapper,{nameHidden:p,className:i,name:u,tips:s,required:m,title:y}),k().createElement("div",{className:"".concat(C,"-content")},T()(Qe).call(Qe,(function(e,t){var n=h[t]||h[0],r=qt(n);return k().createElement("div",{key:t,className:"".concat(C,"-content-item"),onClick:function(){return U(n)}},k().createElement("img",{className:"".concat(C,"-content-image"),src:r,alt:e.name}),k().createElement("div",{className:"".concat(C,"-content-handle")},k().createElement("span",{className:"".concat(C,"-content-text")},e.name),k().createElement("span",{className:Vn()("".concat(C,"-content-uncheck"),(0,d.c)({},"".concat(C,"-content-check"),n===b))})))})),k().createElement(M.Upload,(0,_.c)({className:"".concat(C,"-content-upload")},V),j&&!w()(h).call(h,b)?k().createElement("img",{src:Ht(j),alt:"avatar",style:{width:"100%"}}):K),k().createElement(M.ImageCropper,{autoCropArea:1,imageMaxSize:20,containerWidth:800,containerHeight:588,aspectRatio:6,visible:x,title:"图片裁剪",image:P,onClose:function(){N(!1)},onCropSuccess:function(e){var t=new FileReader;t.readAsDataURL(e),t.addEventListener("load",(function(){var t;(t=e,new(jr())((function(e,n){var r=new FormData;r.append("file",t),r.append("action","upload"),r.append("tempstorage","true");var o=new XMLHttpRequest;o.open("POST",_u),o.onload=function(t){200===this.status&&t.target.response?e(JSON.parse(t.target.response)):n(t)},o.onerror=function(e){n(e)},o.send(r)}))).then((function(e){var t=e.data;if("0"===e.errorCode){var a=(t||{}).url;if(!a)return;var i=Yt(n.picture,a);L(i),o(a)}else r("裁剪图片失败，请稍后重试")})).catch((function(e){r("裁剪图片失败，请稍后重试")})).finally((function(){return N(!1)}))}))},dragMode:"move",cropBoxMovable:!1,className:"".concat(C,"-content-cropper"),okText:"确定裁剪"})))};function ju(e,t){var n=v()(e);if(i()){var r=i()(e);t&&(r=g()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ju(Object(n),!0).forEach((function(t){(0,d.c)(e,t,n[t])})):s()?Object.defineProperties(e,s()(n)):ju(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}var Uu=qn.treeUtils.exludeTreeNodeByCallback,Ku=[{value:1,label:"编辑"},{value:2,label:"禁用"},{value:3,label:"只读"},{value:4,label:"隐藏"},{value:5,label:"必录"},{value:6,label:"非必录"}],Vu=new(Me())([[1,["NoCodeGraphicDisplayField"]],[2,["NoCodeGraphicDisplayField","NoCodeGroupContainerAp"]],[3,["NoCodeGroupContainerAp"]],[4,[]],[5,["NoCodeGraphicDisplayField","NoCodeGroupContainerAp"]],[6,["NoCodeGraphicDisplayField","NoCodeGroupContainerAp"]]]),zu=function(e){var t,n=e.value,r=e.onChange,o=e.fieldOptions,a=(0,F.useState)(n||[]),i=(0,f.c)(a,2),l=i[0],c=i[1],u=(0,(0,F.useContext)(ie).getKdesignerApi)().data,s=(0,F.useRef)(T()(t=new Array((null==l?void 0:l.length)||0)).call(t,D.createUUid)),d=function(e,t){var n=Ae()(l).call(l,(function(e,n){return n===t})).actionType;if(e!==n){var o=n<5&&e>4||e<5&&n>4,a=T()(l).call(l,(function(n,r){if(t===r){var a=n.fieldName,i=Vu.get(e)||[],l=wt(a),c=g()(l).call(l,(function(e){var t,n=((null===(t=u.findControlByCondition((function(t){return t.Key===e})))||void 0===t?void 0:t[0])||{})._Type_;return w()(i).call(i,n)}));return o?{fieldName:[],actionType:e}:c.length?{fieldName:g()(l).call(l,(function(e){return!w()(c).call(c,e)})),actionType:e}:Lu(Lu({},n),{},{actionType:e})}return n}));c(a),r(a)}},p=function(e,t){var n=T()(l).call(l,(function(n,r){return t===r?Lu(Lu({},n),{},{fieldName:e}):n}));c(n),r(n)};return(0,F.useEffect)((function(){var e,t=n||[];(0,Fe.isEqual)(t,l)||(c(t),s.current=T()(e=new Array((null==t?void 0:t.length)||0)).call(e,D.createUUid))}),[n]),k().createElement("div",{className:"display-rule-true-actions"},k().createElement(M.ConfigProvider,{value:{prefixCls:"kd"}},T()(l).call(l,(function(e,t){var n,a=e.actionType,i=e.fieldName,u=Vu.get(a)||[],f=Uu(o,(function(e){var t=e.type,n=e.children;return!w()(u).call(u,t)||!!n.length})),v=dl(f,"key"),m=g()(n=wt(i)).call(n,(function(e){return w()(v).call(v,e)}));return k().createElement("div",{className:"row_item",key:s.current[t]},k().createElement(M.Select,{className:"action-type-select",value:a,options:Ku,placeholder:"请选择",borderType:"bordered",size:"middle",onChange:function(e){return d(e,t)}}),k().createElement(qn.KDTreeSelect,{mode:"multiple",className:"field-name-select",virtual:!1,value:m,treeData:f,showFullLabelTips:!0,treeCheckStrictly:a>4,onChange:function(e){return p(e,t)}}),k().createElement(M.Icon,{className:"delete_icon",prefix:"ncicon",type:"xingshanchu",onClick:function(){return function(e){var t,n=(0,R.c)(l);ue()(n).call(n,e,1),ue()(t=s.current).call(t,e,1),c(n),r(n)}(t)}}))}))),k().createElement("div",{className:"footer-btns"},k().createElement("div",{className:"add-btn",onClick:function(){var e,t=C()(e=[]).call(e,(0,R.c)(l),[{actionType:"",fieldName:[]}]);c(t),s.current.push((0,D.createUUid)()),r(t)}},k().createElement(M.Icon,{prefix:"nocodeplatformicon",type:"zengjia-yuan"}),"添加规则效果"),!!l.length&&k().createElement("div",{className:"clear-all",onClick:function(){c([]),r([]),s.current=[]}},"清空")))};function Gu(e,t){var n=v()(e);if(i()){var r=i()(e);t&&(r=g()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gu(Object(n),!0).forEach((function(t){(0,d.c)(e,t,n[t])})):s()?Object.defineProperties(e,s()(n)):Gu(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}var qu=qn.treeUtils.dfs,Yu=qn.treeUtils.getListConfigPure,Wu=qn.ListFilterUtil.getVarSelectDisabled,Qu=function(e,t){return Hu(Hu({},e),t)},Xu=function(e){var t=e.prefixCls,n=e.value,r=e.fieldKey,o=e.ruleId,a=e.listFilterConfig,i=e.fieldOptions,l=e.onChange,c=e.onSave,u=M.Form.useForm(),s=(0,f.c)(u,1)[0],p=(0,F.useContext)(ie),v=p.invokeAction,m=p.getKdesignerApi,h=p.baseUrl,y=p.batchInvoke,b=p.getControlText,C=p.onDownLoad,E=m(),I=E.data,x=E.meta,T=I.getRootId(),N=(0,F.useReducer)(Qu,n),S=(0,f.c)(N,2),P=S[0],R=S[1],_=(0,F.useState)({}),O=(0,f.c)(_,2),B=O[0],j=O[1],L=(0,F.useRef)(),U=yc({id:r,formId:T,eventName:"filterItemLook"}),K=(0,F.useMemo)((function(){return Yu(a)}),[a]),V=(0,F.useMemo)((function(){return sl({metaApi:x,options:a})}),[a]);(0,F.useEffect)((function(){var e=U.data,t=U.param,n=(void 0===t?{}:t).enumField;if(n){var r,o=null===(r=P.preCondition)||void 0===r?void 0:g()(r).call(r,(function(e){return e.fieldName===n})),i=qu(a,(function(e){return e.key===n}));j((function(t){return Hu(Hu({},t),{},(0,d.c)({},n,{configuredFilter:{enumEqCompareType:"001",items:o},fieldFilterConfig:i,groupInfo:e}))}))}}),[U,P.preCondition,a]);var z=(0,F.useMemo)((function(){var e;return!(null!=o&&null!==(e=w()(o))&&void 0!==e&&e.call(o,"new_rule_"))}),[n]),G={baseUrl:h,batchInvoke:function(e,t){y(e,r,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[])},getControlText:b,addControlAction:function(e,t){return D.eventBus.on(e,t),function(){D.eventBus.off(e,t)}},onDownLoad:C,batchInvokeListConfig:function(e){y("listconfig","nocodeformdesigner",[e])},batchInvokeQuery:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=g()(t),r=void 0===n?"":n,o=t.search,i=void 0===o?"":o,l=t.order_by,c=void 0===l?"":l,u=t.select,s=void 0===u?"":u,f=t.page_size,d=void 0===f?10:f,p=t.page_no,v=void 0===p?1:p,m=t.ids,h=void 0===m?[]:m,b=qu(a,(function(t){return t.entityId===e}));null!=b&&b.isDraftField||y("query","nocodeformdesigner",[e,{filter:r,search:i,order_by:c,select:s,page_size:d,page_no:v,ids:h}])}},H=(0,F.useCallback)((function(){var e,t,n=null===(e=L.current)||void 0===e||null===(t=e.updateVerifyAndGetMsg)||void 0===t?void 0:t.call(e);new(jr())((function(e,t){s.validateFields().then((function(t){var n=Tl()(t);e(n)})).catch((function(e){return t(e)}))})).then((function(e){var t=e,r=t.name,a=t.trueAction;e=Hu(Hu({},e),{},{name:Qr()(r).call(r)});var i=Hu(Hu({},e),{},{formId:T,ruleType:"0"});z&&(i.ruleId=o);var l=Ka()(a).length;if(l>2e3)return qn.WebMsg.showNotificationMsg("你输入的执行内容长度为[".concat(l,"]，超出了最大长度2000字符。请精简内容后再次尝试保存。"));n.length||c(i)})).catch((function(e){}))}),[T,o,z]),q=(0,D.useDebounce)(H),Y=function(e,t){R((0,d.c)({},e,t)),l((0,d.c)({},e,t))};return k().createElement("div",{className:"display-rules-setting"},k().createElement("div",{className:"setting-form"},k().createElement(M.Form,{layout:"vertical",form:s,labelWidth:"100%",wrapperWidth:"100%",onValuesChange:function(e,t){}},k().createElement(M.Form.Item,{label:"规则名称",name:"name",required:!0,validateTrigger:"onBlur",rules:[{required:!0,message:"请输入规则名称"},{type:"string",validator:function(e,t,n,r,o){return null!=t&&Qr()(t).call(t)?[]:[new Error("请输入规则名称")]}}]},k().createElement(M.Input,{type:"text",borderType:"bordered",size:"middle",placeholder:"请输入规则名称",maxLength:50,value:P.name,onChange:function(e){return Y("name",e.target.value)}})),k().createElement(M.Form.Item,{label:"当满足以下条件时",name:"preCondition",rules:[{type:"array",required:!0,message:"请添加判断条件"}]},k().createElement(qn.FilterEditor,{id:"filter",ref:L,valueRequired:!0,name:"添加判断条件",tips:"",variablesTree:V||[],listFilterConfig:K||[],onGetFieldRecords:function(e){!function(e){v("getFilterItemLook",[e,{getEnumData:"true",enumField:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",filterrows:[]}])}(T,e.fieldName)},fieldRecords:B,nameHidden:!0,style:{marginTop:"0px"},getVarSelectDisabled:Wu,fieldData:{fieldType:"treeSelect",style:{width:"184px"}},filterFooterData:{listType:"tree",triggerText:"添加判断条件"},value:P.preCondition||[],refBillProps:G,onChange:function(e){s.setFieldValue("preCondition",e),Y("preCondition",e)}})),k().createElement(M.Form.Item,{label:"则执行",name:"trueAction",rules:[{type:"array",required:!0,validator:function(e,t,n,r,o){return null!=t&&t.length&&t.every((function(e){return A()(e).every((function(e){return"string"==typeof e?""!==e:!Array.isArray(e)||0!==e.length}))}))?[]:[new Error("请添加规则效果")]}}]},k().createElement(zu,{prefixCls:t,value:P.trueAction,fieldOptions:i,onChange:function(e){return Y("trueAction",e)}})))),k().createElement("div",{className:"setting-footer"},k().createElement(M.Button,{size:"small",type:"primary",onClick:q},"保存")))},Zu="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAcAAAAEACAMAAAATE1b1AAACQ1BMVEUAAADb3eja4uzZ3ejY3efg5OfY3enW3una3unV4unY3+nb5O3X3enY3ejb3ufX3ejX4ebN2OTW2+fX3OfY3OnX2+jY3enX3ejX3OfX3enW3ObV3efX3ejV3OXW3ePY3unX3OfX3OZloPrY3efX3ejW3u8AHWDd5O80Rm76zMJCU3kSKWItP2s8TXTr1tQnOmmLl7ItQGktQGktcvQoOmf8z8XY3en20sobMGYjOGk9e/MuQGm01v//zsIsP2jj6vXx1M8mN2r9z8JDU3r40cjz1M8mO2knWLkscvYCHV8zd/b7zsQsP2l3nOzW3OjW3Oe11v8DHl/d4+4zd/UAHF4MJGD/wrVQfuO01v8AHF612P+DneYncPf/v7Iscfri6PNriOJGT3fpraN4jt5TY4UocPdseZiDtvx3luS01/+MlbEocPbi6POz1f/W3Ocnb/UsPmiFuP/K0Nv/zcAAHF7Y5PWq0P+XxP97rPy92fzV2uXe5O+hyf+y0/3O1OD/s6tlc5OOvv+Wwf2z0PkrRHgjMVP21M6ZufNXlv0wdPVda43Q1+JAUHjv2tr+yL0/gvjY3+ojZeD80MV8iaVYZ4omNlrk5vBnnvro4uc0Rm3+wrdtephSYYQpOmKss8vE0fEnbO7m5OvFzd4hXs9LW39Ni/e0vNSircXrtrb/ubCVhZrS3vRkkOzr4OO7xNWbpbyHrfR2ovRWfuaLo+KpmsvcssCSnbbdrKq5maF3bIliXYAXLGeuwu+Di9bLts52htdyg6mPG3iNAAAAbHRSTlMAEgsaJgYiGB0PKwQhLxYpDgkfLTQVOD89SEMzRTclOzoyW0FLH4b9d/SRTMmFUTT88d3Ss7CSjSkS/vzz256SbR/HnIBcQAnu47Oei4nz1cm/vZ6AaVby4NBpX1A5IdXJtbKhhHdsaDSrUjldQMwIAAAMu0lEQVR42uzZQY3EMAxAUV96KZEwKIxWGhyRCQyJQt5dqVpNh4Hd9yh8WYmTAAAAAAAAAAAAAAAAAAAAAACAb+t27NnMfmxrPMOyZVPbEg+wvLKt1xMKtp2/P1u0t2Zr/c/B1gP4hBE8srUjumu3P9zt0V02co75a5z5IbrLPsa8DAEres9/77wIWMeYH4aA1Zzz5joHBSxjzJshYDHzi4DFCFicgMUJWJxLTHHWiOos8tV5SqvOY3Z1vpMaiu6yuegum4vusrno7oddu3tRIgrjOP5U9mZFQZRuSQXbTXRRN90sdFFERdFVVEQv9ELQxdOe9MzCprRzUahDOZIXJl5UtlTrtkGv9LK9/WnNzKozo44Fe5DOrz74Mnouv5zjOeo4OEI3Do7QjYMjdOPgCB2DI3QMjtAxOELH4AgdgyN0DI7QMThCx+AIHYMjdAyO0DE4QsfgCB2DI3QMjtAxOELH4AgdgyN0DI7QMThCx6ievnj0Yu/PvXsIHGN6et9oOXuYoDGk3F3Dd4qQMaLarBG0m4Axnmpe3jeCzhIwhlOrSDlvhBwgXIzG7Wcbxj+zhjKYV04/OeNE+3L/f0ANlaTro2HM75KfjTbkwyAjaeSlyzYNY9Z57uxFjxAuBlKSC+rmzc/S9Wn+/y5UH9W8bMnv+jwjPfan2dmPXy4TMEbh7l48lQaXPtrS9+UKAWMMgelXZea6DPh0moAxhFol1I8bMgB6AmIELMm2Ei/Iy46DBI3118j7/XqTSugFFCFgoNUrbqvKtv2EjTUXmH6VGvs6b18gbKy3kvT7NUIDtvQcJ3Css5r05avhsqZ7lLCb4J+AgwPmslOZzFQ2p2Zcvar0VWockjdNs9k0TegVdMParSmOls20ZJWMq5eXHfW6fDdXeBwM6EIOuDo2utPBke5lOu6pHVcfsG5L+VYIYc29+/qSHS8LM6br+QmCtGatU88zaP75sirH1Qe03YaWaBmbm3szmU5/MM2ZQjp98tr5iwRmaTw10sYRcpmQnNpx9XsY+UEEFdPp9He336RwHD128hzBWB4fCYiegCFZtePqDxH2exFkpZ12D52HZ515ibKYrkiN/EnAqUzIlNLxiUUJ/QhRkQua34TrgWh5mC4Wi88mJ4XvKgFYkhwJ4wiZLurGJ27dWJTbdzio+sqNaJtvwwGtslUslq2y8I0tJd2tWZ/qNvSAEzcW6Xb6DneplWzTCgT0uAFFiPaL6NJkqsfQl9Bbiw/oF/Q9Fq4nkQHdvpdIbyu3pHoNfRNzQ0HAPgULCxNw4Aw8Q1qLpfoZ9jFiQknA3oKFMS/gtPCVy5YIGSOdxbf0NayDvOKAvQX58euymJ4WUZ44902kr3Vb+hvSV2mKA/oFww3fnRkYUOPTvN+vy3C+zFYbMLogvxRRHmh9EoyPRhnKz0nKA0YXjA6o8zZ0W8Ixmhj1OBcBPATqA0YXtCIDarwNXZUIQwnYr2A56iPQ3d5YpKXVCdSAfQo+GxRQXCcNLd+c9CSSCefmPTu8awf/xt8dsLfgw6gVdPrtt/cftPyHzMZkFICAPQXfiP5+mM26lIdIPyuT0AG7C74W/b23pWMfaWf55u0D8W/89QG7ChZEf4/af9PesGxFLL4uHluxcgPpIOZl2rF9h8e5aL/2rncABAwX/NXOff0qDcUBHP9RNsLFgTiuuPeece+9Emdi1GhM3P4UTN0rzjgTTdQY44xxvKlPPhn/Ng8t0IJtT738xB74fW5Dlz59Q8s55d6fRWe/dMOg0XbDsoGfXEsOl0AJBQLWFXxXdDZBNywb3WBIJtiPeVN5CZRQIaAoKJ1L001zB/2pOwmBlcx3REB7waKjdbppziAnuRAEVCpfKOQL+ToF41h1jd4UCWgruKDoZJZumjDIWRYCqXdB5v8FvHrO7m8C3nRy0XsqZoNeMcjFsEDeCmOFXEEsuVxlbag79v8CXjltc+Nks2oBX0gCDnGTgMDplZNDCeUCOk/FbF6sm6YOdhW8y2i8EwN+dw44VzctG+wuAgGT6pZDCeUCOk/F7Jmqm1aN8hCwgtHuTgx4q+hkyIAJlYHgAC8xCJKuET6ghHIB3zkOAwcMWKEbNg7wFIYAiWV8QAnlAp51HAYOHDi3MpIf6GlYHwiOTEcGxPfOAZfphhUDvWUgMLTODPj5toPJw4YN1g2Lh0kk4L/RQl3xcDgeD2lQFupXL9MvkxEvDVBCuYAPSk4ODx9ujgQnDJfIa/A/JMMRM5AZKhbXIGHsN8Zr94BPFpacHMjn5+iGgXmJCLScFk79WSb157FOCPi55GhmPr9KN0y15vMF+3Z1PwqtpaVTTUAJ1QJ+KTkrFCpD+dUFmb7QSr0SqZSSAUlZAaeXnB3P5cyh/LKcTHcvaJ1kNsUB7QGflpwdzuXMofzcnFQcWiaebRZKqBbwVcnZwe7ujeZUTLdUFlolkeWADQGvuwUcMcIcys8ZIReFlojGIjLZSFYsXsdQQrWAD0rOJmYyo8ypmIxcCFoiFmlCuwZ8XXK2UnQxhvKLM3IJaIVEhAP+XUBjKD8hIxeBPl3pSLZfKhJLhOAf6YpwQIeAz9wCikkL84FErp9c1r6T/icNk0OrIkMjYjHWgve2/d+b0C/6b6WR8B1QDJlW62WDUn9tqAbUojEi6Bf9TAyJvwmYMadiUp6yqaxYUg36ArEwB5QHXGgPmBXMgWC2J4ZGgZIW44DygC/twwhxExloPlCK9IxG/QZMx9IGsSGW+rUgVm7naucFlFA54KNS6Y094FTdMDXSI5TvQS1Not0Dfiw9v+MQcFmkZ9JAJs4Bq7xmYl7fufO8FlB84q4EnDvUTWxorEysHPfDQGVM3zF9/yAOisVaN5wTnM6jhMoBH9gDig6r9VWrywFjPaUBjd61MIm+CbH42xYvgrFdk2jrgK8aAk7VB8ZW6PqqWE+FgUZXgg76Qx/w3HkSXgGf3rljfYgRt4sRc9LpVWIgmO4xDUgk2iEgEa+AP+wB+5pGiWFE3x6LA4Vo2FMinBBL2CeUUDngW3vA6h1kzjLrjmJpPOZ2DihoIpL7jxVS/tPeAV9+tQWckiCh0XwH1Ad+B5YeXbtzp1QLGCYRAgKhcFPaO+B12zj+SVADxgmhhMIBn+Fz8oBdHFASgjDgdXxpCxinwQElIQgDPsVHz4MZsOsP8a64WBz2pZAO/UC+2YCvbQG7aNAEbE4wAvqYSrvRXMAfeN0WsD8NkoD9CaGEwgG/4Ssr4PgQDSCQDNXpH+ovFqd992MWlFA44Ft8qkTAv9YpAb/idA6ICgf8gN/eWAGTNIBAbw7oK+AlfPsXAXsne4vFbZsD/oeAiJ9tAXvTIAmYJIQS6gZ8ifihZAXUaAABrS0CXj0n11TAR4gPAxqw8QJtrk3WfuPaOmf//+iDmlNprxEvBzYgHZRQLaD1K9YPEPGlFbAPDZKAlFBC3YCvEPGRFTBKAwj04YB+LqFPEfEjB0SlAz6zAvbyIdorGhUvXvgSKglBF3C6sWcFpAEE+pi0PppYnLcFsbKOOzDPtV3AB9bDiLo74ngIjmgfQiijbMAvdX+3aQoER5QSyigW0Lrrva0LuAmCgwP6CvgZEadzQNUCvrY9DkT8EciAvTign4AfEPFbMANSQhnFAlpD94d1f/51CQQHB/QV8Akivg1kQFIooVpAa/YTha8cEFUN+BKFDxwQVQ34CIVrHFCVgCcbA35E4VSpaja0qXHoTdmAr7Gs/QPuR2+qBXxpPZA3dts+4FL0pmzA61g2o+0D9kMZtQIutH2jQpjZ9gH9vAVVClj3QB6XTq7uToZ2Fd2GXpQOuC3aAQEhuhTdqRbwsv0bFUujMLsDAgL0W7p/HP5jd6suNOO8LOA4K+DSfgCwpCMCtkKRxAXXfovAML9UNQmAA6ofcFN1dyYwtQKugbLxHFCtgMtLVdM4IKl1RQov/AdcDmU7OSCRWf844K7GgPOhbFJ1dwawpmwoUrjnGnALGOaVqtZC2RoOSORQkcL9q24BdzcEXAiGaRyQyL4iCddfm9ecg83jgMG6Cd7zvoJaAWc23BMXAmvOiSIJl8m0iEtAa1wIrEnbixQ+Od4Fj0HFmsapMw5IZu2/G0nsglrAGQ0PcBdWrqB8D2zevn9VcJcGNcvXnxG2TpsHpmlrzAPAmreWaDB41fEDjGnrGcMkqBprHhgLjMBekjfhggv2ObTdYLPjjGk2VK0/U03KSBJup5gVffzi5lWj3pbdYDfvTMX6P4+sBUZj7dGRFI4c6Y5Cg61nquaBaafY5ouoKiadqZlk3QKr5gMLuPk7xlbsqNaaVzu0ExhjjDHGGGOMMcYYY4wxxhhjjDHGGGN/7zcWyc9ypV5uJAAAAABJRU5ErkJggg==";function Ju(e,t){var n=void 0!==ge()&&ye()(e)||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"==typeof e)return $u(e,t);var r=we()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return ve()(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $u(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function $u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function es(e,t){var n=v()(e);if(i()){var r=i()(e);t&&(r=g()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function ts(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?es(Object(n),!0).forEach((function(t){(0,d.c)(e,t,n[t])})):s()?Object.defineProperties(e,s()(n)):es(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}var ns=qn.treeUtils.exludeTreeNodeByCallback,rs=function(e){var t=e.handleAdd;return k().createElement("div",{className:"rule-empty"},k().createElement("img",{src:Zu,alt:"暂无卡片",width:224,height:128}),k().createElement("div",{className:"empty-text"},"暂无规则，点击下方按钮添加"),k().createElement(M.Button,{type:"primary",icon:k().createElement(M.Icon,{prefix:"nocodeplatformicon",type:"zengjia-yuan"}),onClick:t},"添加规则"))},os=function e(t,n,r,o){return t.reduce((function(t,a){var i=a._Type_,l=a.Name,c=a.Key,u=a.BillEntityIdEx,s=a.SelectItemType,f=a.Multi,d=a.children,p={title:l,titlePrefix:ln(a,n,r,o),key:c,type:i,entityId:u,isMulti:1===s||1===f};return d&&(p.children=e(d,n,r,o)),C()(t).call(t,p)}),[])},as=function(e){var t=cs(e);return ts({affectfldkeys:t.affectfldkeys,depfldkeys:t.depfldkeys},e)},is=(0,F.forwardRef)((function(e,t){var n=e.prefixCls,r=e.field,o=e.refreshEditorDisplay,a=(0,F.useContext)(ie),i=(a.invokeAction,a.getDisplayRules),l=a.setDisplayRules,c=a.getCompareTypes,u=a.getKdesignerApi,s=a.curListTreeApi,d=a.getRefBillNameMap,p=(0,F.useState)((function(){var e,t=i(),n=T()(t).call(t,as);if((null==n?void 0:n.length)<=1)return n;var r,o=[],a=[],l=[],c=Ju(n);try{for(c.s();!(r=c.n()).done;){var u=r.value,s=u.depfldkeys,f=u.affectfldkeys;w()(s).call(s,D)&&w()(f).call(f,D)?o.push(u):w()(s).call(s,D)||w()(f).call(f,D)?a.push(u):l.push(u)}}catch(e){c.e(e)}finally{c.f()}return C()(e=[]).call(e,o,a,l)})),v=(0,f.c)(p,2),m=v[0],h=v[1],y=(0,F.useState)((function(){var e;if(m.length)return null===(e=m[0])||void 0===e?void 0:e.ruleId})),b=(0,f.c)(y,2),E=b[0],I=b[1],x=u(),N=x.data,A=x.meta,S=c(),D=r.Key,P=(N.getRootId(),bc({api:s,parser:function(e){return nn(e,e,S)}})),R=(0,F.useMemo)((function(){return cn(P)}),[P]),_=(0,F.useMemo)((function(){var e,t=N.getData().Items||[],n=ns((null===(e=pl(t)[0])||void 0===e?void 0:e.children)||[],(function(e){var t=e._Type_,n=e.BillEntityIdEx,r=e.showType,o=e.children;return!(!Vt(t)||null==o||!o.length)||(lt(t)?"1"!==r:et(t)?!(null!=e&&e.RefTableId&&"2"===(null==e?void 0:e.ShowType)):!(ut(t)||("NoCodeMulRefBillField"===t||"NoCodeRefBillField"===t)&&void 0===n))}));return os(n,R,A,d())}),[R,d]),O=(0,F.useCallback)((function(){var e=(null==m?void 0:m.length)||0,t="new_rule_".concat(sn()),n={ruleId:t,name:"规则".concat(e+1),depfldkeys:"",affectfldkeys:"",preCondition:[],trueAction:[]};h(m?C()(m).call(m,n):[n]),I(t)}),[m]),B=function(e){var t=function(e){var t=(null==m?void 0:Ur()(m).call(m,(function(t){return t.ruleId===e})))||0,n=E;if(E===e){var r=t>0?m[t-1]:void 0,o=m[t+1];r?n=r.ruleId:o&&(n=o.ruleId)}return n}(e);I(t),h((function(t){return null==t?void 0:g()(t).call(t,(function(t){return t.ruleId!==e}))})),L(e)},j=((0,F.useCallback)((function(e){h(e),e.length&&I(e[0].ruleId)}),[]),function(e){h((function(t){return null==t?void 0:T()(t).call(t,(function(t){return t.ruleId===E?ts(ts({},t),e):t}))}))}),L=function(e){var t=i();l(null==t?void 0:g()(t).call(t,(function(t){return t.ruleId!==e}))),o()},U=function(e){var t=i(),n=ts(ts({},(null==t?void 0:Ae()(t).call(t,(function(e){return e.ruleId===E})))||{}),e),r=cs(n),a=r.affectfldkeys,c=r.depfldkeys;if(null!=E&&w()(E).call(E,"new_rule_")){var u=null==E?void 0:we()(E).call(E,9);n.ruleId=u,j({ruleId:u,affectfldkeys:a,depfldkeys:c}),I(u)}j({affectfldkeys:a,depfldkeys:c});var s=null!=E&&w()(E).call(E,"new_rule_")?C()(t).call(t,n):T()(t).call(t,(function(e){return e.ruleId===E?n:e}));l(s),o(),qn.WebMsg.showNotificationMsg({param:[{type:0,content:"保存成功。",duration:2e3}]})},K=(0,F.useMemo)((function(){return E?null==m?void 0:Ae()(m).call(m,(function(e){return e.ruleId===E})):{}}),[E,m]);return m?k().createElement("div",{className:"".concat(n,"-main")},m.length?k().createElement(k().Fragment,null,k().createElement("div",{className:"left-area"},k().createElement("div",{className:"rule-list"},null==m?void 0:T()(m).call(m,(function(e){var t=e.name,n=e.ruleId,r=e.depfldkeys,o=e.affectfldkeys;return k().createElement("div",{className:Vn()("rule-item",{"is-active":E===n}),key:n,onClick:function(){return I(n)}},k().createElement("div",{className:"rule-name"},t,k().createElement(M.Icon,{prefix:"ncicon",type:"jingshi",className:Vn()("warning-icon",{show:!1})})),k().createElement("div",{className:"tags"},w()(r).call(r,D)&&k().createElement("span",{className:"tag-item"},"触发"),w()(o).call(o,D)&&k().createElement("span",{className:"tag-item"},"受影响的")),k().createElement("div",{className:"delete-btn",onClick:function(e){return function(e,t,n){e.stopPropagation(),null===qn.WebMsg||void 0===qn.WebMsg||qn.WebMsg.showConfirmModal({title:"确定删除“".concat(t,"”吗？"),type:"delete",onAction:function(e){"ok"===e&&B(n)}})}(e,t,n)}},k().createElement(M.Icon,{prefix:"designericon",type:"shanchu"})))}))),k().createElement("div",{className:"add-rule",onClick:O},k().createElement("span",{className:"add-btn"},k().createElement(M.Icon,{prefix:"designericon",type:"zengjia-yuan"}),"新增规则"))),k().createElement("div",{className:"right-area"},k().createElement(Xu,{key:E,prefixCls:n,value:K,fieldKey:D,ruleId:E,listFilterConfig:P,fieldOptions:_,onChange:j,onSave:U}))):k().createElement(rs,{handleAdd:O})):null})),ls=function(e){var t=e.prefixCls,n=e.title,r=e.visible,o=e.setVisible,a=e.field,i=e.refreshEditorDisplay,l=(0,F.useRef)(null),c=function(){o(!1)};return k().createElement(M.Modal,{mask:!0,visible:r,body:k().createElement(is,{ref:l,prefixCls:t,field:a,refreshEditorDisplay:i}),titleIcon:null,className:"".concat(t,"-modal"),footer:null,maskClosable:!1,width:960,height:520,keyboard:!1,title:k().createElement("span",{title:n},n),closable:!0,draggable:!1,destroyOnClose:!0,onCancel:c,onOk:c})},cs=function(e){var t=e.preCondition,n=void 0===t?[]:t,r=e.trueAction,o=void 0===r?[]:r,a=Ka()(n),i=(o||[]).reduce((function(e,t){return C()(e).call(e,t.fieldName||[])}),[]).join(),l=null==a?void 0:a.match(/\${model\.[\w_]+}/g);return{affectfldkeys:i,depfldkeys:(null==l?void 0:T()(l).call(l,(function(e){return e.replace(/\${model\.([\w_]+)}/,"$1")})))||""}},us=function(e){var t=e.locked,n=e.field,r=n.Name,o=n.Key,a=(0,F.useState)(!1),i=(0,f.c)(a,2),l=i[0],c=i[1],u=(0,F.useContext)(ie),s=(u.invokeAction,u.prefixCls),d=u.getKdesignerApi,p=u.getDisplayRules,v=u.fetchListTree,m=(d().data.getRootId(),p()),g=(0,F.useReducer)((function(e){return e+1}),0),h=(0,f.c)(g,2)[1],y=function(){v(),c(!0)},b=(0,F.useMemo)((function(){var e=m.reduce((function(e,t){var n=cs(t),r=n.affectfldkeys,a=n.depfldkeys;return null!=r&&w()(r).call(r,o)||w()(a).call(a,o)?e+1:e}),0);return 0!==e?"".concat(e,"条规则"):""}),[m,o]),C="".concat(s,"-displayrules");return k().createElement(k().Fragment,null,k().createElement(D.CustomInputTrigger,(0,_.c)({},e,{placeholder:"请选择",disabled:t,value:b,onClick:y,onInputClick:y})),k().createElement(ls,{prefixCls:C,visible:l,setVisible:c,field:n,title:"".concat(r,"-显示规则"),refreshEditorDisplay:h}))},ss=function(e){var t=e.value,n=e.className,r=e.field,o=r._Type_,a=r.DefaultLines,i=r.MaxLength,l={className:"".concat(n,"-text-def-editor"),fieldType:"text",placeholder:"请输入",maxLength:i};return function(e){return"NoCodeTextAreaField"===e}(o)&&(l.fieldType="textarea",l.autoSize={minRows:a||1,maxRows:a||1}),k().createElement(_c,(0,_.c)({},e,{editorType:"textDef",value:t,inputFieldProps:l}))};function fs(e,t){var n=v()(e);if(i()){var r=i()(e);t&&(r=g()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function ds(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fs(Object(n),!0).forEach((function(t){(0,d.c)(e,t,n[t])})):s()?Object.defineProperties(e,s()(n)):fs(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}var ps={},vs=(0,F.memo)((function(e){var t,n,r=(0,F.useContext)(ie),o=r.invokeAction,a=r.getKdesignerApi,i=e.handleChange,l=e.value,c=e.className,u=e.editor,s=(e.locked,e.Name),f=e.Tips,d=e.field,p=(e.id,u.Enum,u.NameHidden),v=u.Default,m=u.Required,g=u.HasCheck,h=u.Title,y=a().data.getRootId(),b=l;try{g&&"object"===(0,Ce.c)(JSON.parse(l))&&(b=JSON.parse(l))}catch(e){g&&(b={})}var C=void 0===(null===(t=b)||void 0===t?void 0:t.enable)?null==v?void 0:v.enable:b.enable,E=(0,F.useCallback)((function(e){return Array.isArray(e)&&(null==e?void 0:T()(e).call(e,(function(e){return ds(ds({},e),{},{label:e.name,value:e.id})})))||[]}),[]),I=yc({id:d.Key,formId:y,eventName:"setTriggerProcess",parser:E});null!=I&&I.length&&(ps[y]=I),(0,F.useEffect)((function(){ps[y]||o("getTriggerProcess",[])}),[y]);var x=(0,F.useCallback)((function(e){if(g){var t=ds(ds({},b),{},{value:e});i(Ka()(t))}else i(e)}),[i,b,g]),N=(0,F.useMemo)((function(){return{name:s,className:c,nameHidden:p,tips:f,required:m,title:h}}),[s,c,p,f,m,h]),A=(0,F.useMemo)((function(){return ds(ds({},e),{},{editor:ds(ds({},e.Editor),{},{NameHidden:!0})})}),[e]);return k().createElement("div",{className:"".concat(c,"-trigger-process")},g?k().createElement(D.NameTipSwitchWrapper,(0,_.c)({switchValue:C,onSwitchChange:function(e){var t=ds(ds({},b),{},{enable:e});i(Ka()(t))}},N)):k().createElement(D.NameTipWrapper,N),(!g||C)&&k().createElement(D.EditorPropertySelect,(0,_.c)({},A,{value:g?null===(n=b)||void 0===n?void 0:n.value:l,options:Array.isArray(ps[y])?ps[y]:[],scrollHidden:!1,onChange:x,handleChange:x})))}));vs.displayName="TriggerProcessEditor";var ms=(0,D.ErrorBoundaryWrap)(vs,"TriggerProcessEditor");function gs(e,t){var n=v()(e);if(i()){var r=i()(e);t&&(r=g()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function hs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gs(Object(n),!0).forEach((function(t){(0,d.c)(e,t,n[t])})):s()?Object.defineProperties(e,s()(n)):gs(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}var ys=qn.treeUtils.getListConfigPure,bs=qn.treeUtils.treeNodeTransform,Cs=qn.treeUtils.dfs,Es=qn.ListFilterUtil.getVarSelectDisabled,Is=(0,F.forwardRef)((function(e,t){var n,r,o=e.prefixCls,a=e.field,i=e.formId,l=e.value,c=e.onChange,u=(0,F.useContext)(ie),s=u.invokeAction,p=u.baseUrl,v=u.onDownLoad,m=(u.getBaseHooks,u.getKdesignerApi),h=u.getCompareTypes,y=u.getControlText,b=u.batchInvoke,E=u.curListTreeApi,I=u.getHideFieldRef,x=m(),N=x.data,A=x.meta,S=I(),P=a.Key,R=a._Type_,_=a.ParentId,O=null===(n=S[a.RefBillId])||void 0===n?void 0:n.Key,B=N.findControl(_),j=B.RefBillId,L=B._Type_,U=null===(r=S[j])||void 0===r?void 0:r.Key,K=(N.getRootId(),(0,F.useState)({})),V=(0,f.c)(K,2),z=V[0],G=V[1],H=(0,F.useRef)(null),q=(0,F.useRef)(null),Y=(0,F.useRef)([]),W=h();(0,F.useImperativeHandle)(t,(function(){return{updateVerifyAndGetMsg:function(){return q.current.updateVerifyAndGetMsg()}}}),[]);var Q=yc({id:P,formId:i,eventName:"filterItemLook"}),X=(0,F.useMemo)((function(){return Array.isArray(l)?T()(l).call(l,(function(e){return hs(hs({},e),{},{value:"string"==typeof e.value?JSON.parse(e.value):e.value||[]})})):[]}),[l]),Z=(0,F.useCallback)((function(e){s("getFilterItemLook",[e,{getEnumData:"true",enumField:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",filterrows:[]}])}),[s]),J=(0,F.useCallback)((function(e){Z(i,e.fieldName)}),[Z]),$=bc({api:E,parser:function(e){return nn(e,e,W)}}),ee=bc({api:E,parser:function(e){var t,n,r=nn(e,e,W,4),o=O||P,a=lt(L)?we()(t=C()(n="".concat(U,".")).call(n,P)).call(t,0,-4):o,i=Cs(r,(function(e){return e.key===a}));return bs((null==i?void 0:i.children)||[],(function(e){var t=e.key,n=a.replace(/\./g,"\\."),r=t.replace(new RegExp("^"+n+"\\.(\\S+)"),"$1");return!((null!=r&&w()(r).call(r,"fbasedataid")?r.split(".fbasedataid")[0]:r).split(".").length>2)&&hs(hs({},e),{},{key:r})}))}}),te=(0,F.useMemo)((function(){return ut(R)?$:ee}),[R,$,ee]),ne=(0,F.useMemo)((function(){return sl({metaApi:A,options:$})}),[$]),re=(0,F.useMemo)((function(){return ys(te)}),[te]);(0,F.useEffect)((function(){var e=Q.data,t=Q.param,n=(void 0===t?{}:t).enumField;if(n){var r=null==X?void 0:g()(X).call(X,(function(e){return e.fieldName===n})),o=Cs(te,(function(e){return e.key===n}));G((function(t){return hs(hs({},t),{},(0,d.c)({},n,{configuredFilter:{enumEqCompareType:"001",items:r},fieldFilterConfig:o,groupInfo:e}))}))}}),[Q,X,te]);var oe=(0,F.useCallback)((function(e){Y.current.length<e.length&&e.length>7&&setTimeout((function(){return H.current.scrollTo(0,1e4)}),100),Y.current=e}),[]),ae={baseUrl:p,batchInvoke:function(e,t){b(e,P,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[])},getControlText:y,addControlAction:function(e,t){return D.eventBus.on(e,t),function(){D.eventBus.off(e,t)}},onDownLoad:v,batchInvokeListConfig:function(e){b("listconfig","nocodeformdesigner",[e])},batchInvokeQuery:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Cs(te,(function(t){return t.entityId===e}));if(null==n||!n.isDraftField){var r=g()(t),o=void 0===r?"":r,a=t.search,i=void 0===a?"":a,l=t.order_by,c=void 0===l?"":l,u=t.select,s=void 0===u?"":u,f=t.page_size,d=void 0===f?10:f,p=t.page_no,v=void 0===p?1:p,m=t.ids;b("query","nocodeformdesigner",[e,{filter:o,search:i,order_by:c,select:s,page_size:d,page_no:v,ids:void 0===m?[]:m}])}}};return k().createElement("div",{className:"".concat(o,"-modal-body"),ref:H},k().createElement(M.ConfigProvider,{value:{prefixCls:"kd"}},k().createElement(qn.FilterEditor,{ref:q,valueRequired:!0,nameHidden:!0,id:"filter",name:"配置筛选条件",tips:"",style:{marginTop:"0px"},fieldData:{fieldType:"treeSelect",style:{width:"184px"}},filterFooterData:{listType:"tree",triggerText:"添加筛选条件",treeProps:{defaultExpandAll:!1}},variablesTree:ne||[],listFilterConfig:re||[],fieldRecords:z||[],value:X,refBillProps:ae,onChange:function(e){var t=e;Array.isArray(e)&&(t=T()(e).call(e,(function(e){return hs(hs({},e),{},{value:"object"===(0,Ce.c)(e.value)?Ka()(e.value):e.value||""})}))),c(t),oe(e)},onGetFieldRecords:J,getVarSelectDisabled:Es})))})),xs=function(e){var t=e.prefixCls,n=e.onCancel,r=e.onConfirm;return k().createElement("div",{className:"".concat(t,"-modal-footer")},k().createElement("div",{className:"".concat(t,"-modal-footer-right")},k().createElement(M.Button,{size:"small",className:"".concat(t,"-modal-footer-btn"),onClick:n},"取消"),k().createElement(M.Button,{size:"small",type:"primary",className:"".concat(t,"-modal-footer-btn"),onClick:r},"确定")))},Ts=(0,F.memo)((function(e){var t=e.prefixCls,n=e.title,r=e.value,o=e.formId,a=e.field,i=(e.fieldData,e.visible),l=e.setVisible,c=e.onChange,u=(0,F.useState)(r),s=(0,f.c)(u,2),d=s[0],p=s[1],v=(0,F.useRef)();(0,F.useEffect)((function(){p(r)}),[r]);var m=function(){l(!1),p(r)};return k().createElement(M.Modal,{mask:!0,visible:i,body:k().createElement(Is,{ref:v,prefixCls:t,field:a,formId:o,value:d,onChange:function(e){p(e)}}),titleIcon:null,className:"".concat(t,"-modal"),footer:k().createElement(xs,{prefixCls:t,onCancel:m,onConfirm:function(){var e,t,n=null===(e=(t=v.current).updateVerifyAndGetMsg)||void 0===e?void 0:e.call(t);null!=n&&n.length||(null==c||c(d),m())}}),maskClosable:!1,width:640,height:520,keyboard:!1,bodyStyle:{padding:0,overflow:"hidden"},title:n,closable:!0,draggable:!1,destroyOnClose:!0,onCancel:m,onOk:m})}));Ts.displayName="LimitSelectRangeModal";var Ns=Ts;function As(e,t){var n=v()(e);if(i()){var r=i()(e);t&&(r=g()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ss(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?As(Object(n),!0).forEach((function(t){(0,d.c)(e,t,n[t])})):s()?Object.defineProperties(e,s()(n)):As(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}var ws=(0,F.memo)((function(e){var t,n=e.handleChange,r=e.value,o=e.className,a=e.editor,i=e.locked,l=e.Name,c=e.Tips,u=e.field,s=a.NameHidden,d=a.Required,p=a.Default,v=a.Title,m=p.showEnable,g=u._Type_,h=(0,F.useState)(!1),y=(0,f.c)(h,2),b=y[0],C=y[1],E=void 0===r.enable?p.enable:r.enable,I=(0,F.useContext)(ie),x=I.prefixCls,T=I.getKdesignerApi,N=I.fetchListTree,A=T(),S=A.data,w=A.meta,P=(0,F.useMemo)((function(){return et(g)||lt(g)?u.BillEntityIdEx||w.getControlPropertyDefaultValue(u.FieldType,"BillEntityIdEx"):S.getRootId()}),[g,S,null==u?void 0:u.BillEntityIdEx]),M=(0,F.useCallback)((function(e){n({enable:E,value:e})}),[n,E]),R="".concat(x,"-enablefilter-editor"),O=Ss(Ss({},a),{},{NameHidden:!0}),B=(0,F.useMemo)((function(){return{name:l,className:o,nameHidden:s,tips:c,required:d,title:v}}),[l,o,s,c,d,v]);return k().createElement("div",{className:R},m?k().createElement(D.NameTipSwitchWrapper,(0,_.c)({switchValue:E,onSwitchChange:function(e){var t=Ss(Ss({},r),{},{enable:e});n(t)}},B)):k().createElement("div",{className:"".concat(o,"-nav")},k().createElement(D.NameTipWrapper,B)),E&&k().createElement(k().Fragment,null,k().createElement(D.CustomInputTrigger,(0,_.c)({},e,{editor:O,disabled:i,value:(null==r||null===(t=r.value)||void 0===t?void 0:t.length)>0?"".concat(r.value.length,"个条件"):"",onClick:function(){C(!0),N()}})),k().createElement(Ns,{formId:P,field:u,prefixCls:R,visible:b,setVisible:C,value:(null==r?void 0:r.value)||[],title:l,onChange:M})))}));ws.displayName="EnableFilterEditor";var Fs=(0,D.ErrorBoundaryWrap)(ws,"EnableFilterEditor"),ks=window.__kd_cdnPath__||window.__domainurl__,Ds=Ht(window.__domainurl__+"nocode/v2/nocode_sys/image"),Ps=(0,F.memo)((function(e){var t=e.handleChange,n=e.value,r=e.className,o=e.editor,a=e.Name,i=e.Tips,l=e.field,c=o.NameHidden,u=o.Required,s=o.Title,d=l.FieldType,p=(0,F.useContext)(ie).baseUrl,v=void 0===p?{}:p,m=(0,F.useRef)(""),g=(0,F.useState)(!1),h=(0,f.c)(g,2),y=h[0],b=h[1],C="".concat(r,"-richtext-def-editor"),E=(0,F.useMemo)((function(){return ft(d)}),[d]),I=E&&Qt(n)?Xt(n):n,x=(0,F.useCallback)((function(e){m.current=e}),[]);(0,F.useEffect)((function(){m.current=I}),[I]);var T=function(){b(!1)},N=(0,F.useMemo)((function(){return k().createElement("div",null,k().createElement(qn.RichText,{width:780,toobarMode:"scrolling",content:I,srcUrl:ks,imageUrlPrefix:window.origin,imagesUploadUrl:Ds,pictureServer:v.picture,onChange:x,resize:!1,hasFullScreen:!1}))}),[I,v.picture,x]);return k().createElement("div",{className:C},k().createElement("div",{className:"".concat(C,"-name-tip")},k().createElement(D.NameTipWrapper,{nameHidden:c,className:r,name:a,tips:i,required:u,title:s})),k().createElement(qn.BtnField,{className:"".concat(C,"-edit-btn"),type:"primary",text:"编辑默认值",onClick:function(){b(!0)}}),y&&k().createElement(M.Modal,{width:780,height:482,className:"".concat(C,"-modal"),visible:y,title:"".concat(E?"富文本":"图文展示","-默认值"),body:N,onCancel:T,footer:k().createElement("div",{className:"".concat(C,"-footer")},k().createElement(qn.BtnField,{size:"small",style:{marginRight:"12px"},onClick:T},"取消"),k().createElement(qn.BtnField,{size:"small",type:"primary",onClick:function(){var e=m.current,n=Ka()({value:e,valueType:0});e!==n&&t(E?n:e),b(!1)}},"确定"))}))}));function Ms(e,t){var n=v()(e);if(i()){var r=i()(e);t&&(r=g()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ms(Object(n),!0).forEach((function(t){(0,d.c)(e,t,n[t])})):s()?Object.defineProperties(e,s()(n)):Ms(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}var _s=qn.treeUtils.dfs,Os=k().memo((function(e){e.handleChange;var t=e.value,n=e.className,r=e.editor,o=(e.locked,e.Name),a=e.Tips,i=e.field,l=e.id,c=e.propName,u=r.NameHidden,s=r.Required,p=r.Title,v=i||{},m=(v.DataFill,v.Name),h=v.SelectBillPid,y=v.RefTableId,b=v.RefBillId,C=v.ShowType,E=v.SourceForm,I=v.inner2Outer,x=v.Key,N=(0,F.useContext)(ie),A=N.invokeAction,S=N.getKdesignerApi,w=(N.prefixCls,N.billPropsData),P=N.dispatchBillData,_=S(),O=_.data,B=_.controlCacheApi,j="".concat(n,"-bill-type"),L=(0,F.useState)((0,R.c)((null==w?void 0:w.appFormList)||[])),U=(0,f.c)(L,2),K=U[0],V=U[1],z=(0,F.useRef)(null),G=(0,F.useRef)(null),H=(0,F.useRef)(B.hasCache("controlId",l)),q=(0,F.useState)(!0),Y=(0,f.c)(q,2),W=Y[0],Q=Y[1],X=(0,F.useCallback)((function(e){var t=e.children,n=void 0===t?[]:t;n[0].icon=k().createElement(M.Icon,{prefix:"nocodeplatformicon",type:"gerenzhongxin",style:{color:"#3987ED"}}),n[1].icon=k().createElement(M.Icon,{prefix:"nocodeplatformicon",type:"zuzhi",style:{color:"#3987ED"}});var r=So(n),o=(0,f.c)(r,2),a=o[0],i=o[1];P({key:qr,payload:{data:a,innerForm:i}}),V(a)}),[]),Z=(0,F.useCallback)((function(){var e={showTree:"true",ignoreCosmicForm:"true"};Array.isArray(h)&&(e.parentId=h[h.length-1]),"2"===E&&A("click",[l,"entitymeta",c,e])}),[E]),J=(0,F.useCallback)((function(e){var t=e[i.Key]||[];0===t.length||"1"===E?Q(!0):(null==t?void 0:t.length)>0&&Q(!1)}),[]);(0,F.useEffect)((function(){return"1"!==E&&Z(),H.current&&"1"!==E&&Q(!1),H.current||D.eventBus.on(mr,J),D.eventBus.on(sr,X),D.eventBus.on(fr,$),function(){H.current||D.eventBus.off(mr,J),D.eventBus.off(sr,X),D.eventBus.off(fr,$)}}),[]),(0,F.useEffect)((function(){var e,n=t&&(null===(e=_s(K,(function(e){return e.key===t})))||void 0===e?void 0:e.title)||"关联表单";D.eventBus.emit("".concat(x,"_refbill"),{formName:n})}),[t,K]);var $=function(e){var t;V((function(t){return ee(t,G.current,So(e,{isAsyncNode:!0})[0])})),null===(t=z.current)||void 0===t||t.call(z),z.current=null},ee=function e(t,n,r){return T()(t).call(t,(function(t){return t.key===n?null!=r&&r.length?Rs(Rs({},t),{},{children:r,isLeaf:!0}):Rs(Rs({},t),{},{isLeaf:!0}):t.children?Rs(Rs({},t),{},{children:e(t.children,n,r)}):t}))},te=(0,F.useCallback)((function(e,t){var n=Rs((0,d.c)((0,d.c)({},c,e),"PropsDisplay",""),t),r=[[l,n]];if("2"===C){var o,a=g()(o=O.getAllSubControlIds(l)).call(o,(function(e){return e!==l}));O.deleteControl((0,D.createDeleteAction)(a))}O.batchUpdateControlPropertyValues((0,D.createUpdateAction)(r))}),[c,y,b,l,C]),ne=(0,F.useCallback)((function(){var e=[[l,{inner2Outer:!0}]];O.batchUpdateControlPropertyValues((0,D.createUpdateAction)(e))}),[l,t,m]);return(0,F.useEffect)((function(){I&&V([{key:t,title:m,isLeaf:!0}])}),[m,I]),(0,F.useEffect)((function(){"1"===E&&V([{key:t||"",title:I?m:"内部表单",isLeaf:!0}])}),[]),k().createElement("div",{className:j},k().createElement(D.NameTipWrapper,{nameHidden:u,className:n,name:o,tips:a,required:s,title:p}),"1"===E&&!I&&k().createElement("div",{className:"".concat(j,"-title-btn")},k().createElement(qn.BtnField,{type:"text",major:!0,onClick:ne},"转化为外部表单")),k().createElement("div",{className:"".concat(j,"-tree-select")},k().createElement(M.ConfigProvider,{value:{prefixCls:"kd"}},k().createElement(qn.KDTreeSelect,{allowClear:!0,value:t,treeData:K,showTreeIcon:!0,disabled:W,treeIcon:function(e){return e.icon},onChange:function(e,n){if(e!==t){var r,o={};if((t?null===(r=_s(K,(function(e){return e.key===t})))||void 0===r?void 0:r.title:"关联表单")===m)if(e){var a=n[0]||{},i=a.title,l=void 0===i?"":i,c=a.parentKeys,u=a.isAsyncNode;o.Name=l,o.SelectBillPid=u?c:void 0}else e||(o.Name="关联表单",o.SelectBillPid=void 0);else{var s=n[0]||{},f=s.title,d=s.parentKeys,p=s.isAsyncNode;o.Name=f,o.SelectBillPid=p?d:void 0}te(e,o)}},treeLoadData:function(e){var t=e.key,n=e.children,r=e.isLeaf;return new(jr())((function(e){n||r?e():(z.current=e,G.current=t,A("queryTreeNodeChildren",[t]))}))},treeDefaultExpandedKeys:h,dropdownStyle:{width:"320px"}}))))})),Bs=[{label:"大 (24px)",value:"24"},{label:"中 (16px)",value:"16"},{label:"小 (8px)",value:"8"},{label:"无 (0px)",value:"0"}],js=function(e){var t=e.handleChange,n=e.value,r=e.className,o=e.editor,a=e.locked,i=e.Name,l=e.Tips,c=(e.field,e.id,e.propName,Jt(n)),u=c.margin,s=void 0===u?"0":u,d=c.marginTop,p=c.marginRight,v=c.marginBottom,m=c.marginLeft,g=(0,F.useState)(s),h=(0,f.c)(g,2),y=h[0],b=h[1],C=(0,F.useState)(d||0),E=(0,f.c)(C,2),I=E[0],x=E[1],T=(0,F.useState)(p||0),N=(0,f.c)(T,2),A=N[0],S=N[1],w=(0,F.useState)(v||0),P=(0,f.c)(w,2),M=P[0],R=P[1],_=(0,F.useState)(m||0),O=(0,f.c)(_,2),B=O[0],j=O[1],L="".concat(r,"-margin");(0,F.useEffect)((function(){var e=-1===y?{marginTop:I,marginRight:A,marginBottom:M,marginLeft:B}:{margin:y};t(Ka()(e))}),[y,I,A,M,B]);var U=(0,F.useCallback)((function(e){b(e)}),[]),K=(0,F.useCallback)((function(e){x(e)}),[]),V=(0,F.useCallback)((function(e){S(e)}),[]),z=(0,F.useCallback)((function(e){R(e)}),[]),G=(0,F.useCallback)((function(e){j(e)}),[]);return k().createElement("div",{className:L},k().createElement("div",{className:Vn()("".concat(L,"-item"),"".concat(L,"-select"))},k().createElement(D.EditorPropertySelect,{options:Bs,editor:o,value:y,handleChange:U,className:L,Name:i,locked:a,tips:l})),"-1"===y&&k().createElement(k().Fragment,null,k().createElement("div",{className:"".concat(L,"-item")},k().createElement(D.NameTipWrapper,{className:r,name:"上间距"}),k().createElement(qn.Number,{value:I,onChange:K,showStepper:!1,placeholder:"请输入"})),k().createElement("div",{className:"".concat(L,"-item")},k().createElement(D.NameTipWrapper,{className:r,name:"下间距"}),k().createElement(qn.Number,{value:M,onChange:z,showStepper:!1,placeholder:"请输入"})),k().createElement("div",{className:"".concat(L,"-item")},k().createElement(D.NameTipWrapper,{className:r,name:"左间距"}),k().createElement(qn.Number,{value:B,onChange:G,showStepper:!1,placeholder:"请输入"})),k().createElement("div",{className:"".concat(L,"-item")},k().createElement(D.NameTipWrapper,{className:r,name:"右间距"}),k().createElement(qn.Number,{value:A,onChange:V,showStepper:!1,placeholder:"请输入"}))))};function Ls(e,t){var n=v()(e);if(i()){var r=i()(e);t&&(r=g()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Us(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ls(Object(n),!0).forEach((function(t){(0,d.c)(e,t,n[t])})):s()?Object.defineProperties(e,s()(n)):Ls(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}var Ks=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t?T()(t).call(t,(function(t){var r=t.label,o=t.value,a=t.children,i=t.selectable,l=t.icon,c=Us({key:o,title:r},n);return(0,Fe.isUndefined)(i)||(c.selectable=i),l&&(c.icon=l),a?(a.length&&(c.children=e(a)),c.checkable=!1):c.isLeaf=!0,c})):t},Vs=k().memo((function(e){e.handleChange;var t=e.value,n=e.className,r=e.editor,o=(e.locked,e.Name),a=e.Tips,i=e.field,l=e.id,c=e.propName,u=r.NameHidden,s=r.Required,p=r.needPathValue,v=r.Title,m=(i.DataFill,i.Name,i.SelectBillPid),g=(0,F.useContext)(ie),h=g.invokeAction,y=g.getKdesignerApi,b=g.prefixCls,C=g.getDataRef,E=y().data,I="".concat(b,"-bill-type"),x=(0,F.useState)([]),N=(0,f.c)(x,2),A=N[0],S=N[1],w=(0,F.useRef)(null),P=(0,F.useRef)(null),R=(0,F.useCallback)((function(e){var t=null;t=Array.isArray(e)?e:[e],S(Ks(t))}),[p]),_=(0,F.useCallback)((function(){var e={showTree:"true"},t={nocodeformdesigner:C()};Array.isArray(m)&&(e.parentId=m[m.length-1]),h("click",[l,"entitymeta",c,e],[t])}),[]);(0,F.useEffect)((function(){_()}),[]),(0,F.useEffect)((function(){return D.eventBus.on(dr,R),D.eventBus.on(fr,O),function(){D.eventBus.off(dr,R),D.eventBus.off(fr,O)}}),[]);var O=function(e){var t;S((function(t){return B(t,P.current,Ks(e,{isAsyncNode:!0}))})),null===(t=w.current)||void 0===t||t.call(w),w.current=null},B=function e(t,n,r){return T()(t).call(t,(function(t){return t.key===n?null!=r&&r.length?Us(Us({},t),{},{children:r,isLeaf:!0}):Us(Us({},t),{},{isLeaf:!0}):t.children?Us(Us({},t),{},{children:e(t.children,n,r)}):t}))};return k().createElement(k().Fragment,null,k().createElement(D.NameTipWrapper,{nameHidden:u,className:n,name:o,tips:a,required:s,title:v}),k().createElement("div",{className:"".concat(I,"-tree-select")},k().createElement(M.ConfigProvider,{value:{prefixCls:"kd"}},k().createElement(qn.KDTreeSelect,{allowClear:!0,value:t,treeData:A,showTreeIcon:!0,treeIcon:function(e){return e.icon},onChange:function(e,n){e!==t&&E.batchUpdateControlPropertyValues((0,D.createUpdateAction)([[l,(0,d.c)({},c,e)]]))},treeLoadData:function(e){var t=e.key,n=e.children,r=e.isLeaf;return new(jr())((function(e){n||r?e():(w.current=e,P.current=t,h("queryTreeNodeChildren",[t]))}))},treeDefaultExpandedKeys:m}))))}));Vs.displayName="InputFormEditor";var zs=Vs;function Gs(e,t){var n=v()(e);if(i()){var r=i()(e);t&&(r=g()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gs(Object(n),!0).forEach((function(t){(0,d.c)(e,t,n[t])})):s()?Object.defineProperties(e,s()(n)):Gs(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}var qs=function(e){var t=e.value,n=(e.className,e.handleChange),r=e.field,o=(e.rootId,(0,F.useContext)(ie)),a=o.baseUrl,i=o.onDownLoad,l=o.prefixCls,c=o.getControlText,u=o.batchInvoke,s=o.getBaseHooks,f=o.getKdesignerApi,d=r.SelectScope,p=d?{rawFilter:d.value}:{},v=f().meta,m=s("useKDRefBill"),h=r.BillEntityIdEx||v.getControlPropertyDefaultValue(r.FieldType,"BillEntityIdEx"),y=function(e,t){try{if(e&&"string"==typeof e){var n=JSON.parse(e);return n.valueType===t?n.value:""}}catch(e){}}(t,0),b=function(e,t){var n=g()(t),r=void 0===n?"":n,o=t.search,a=void 0===o?"":o,i=t.order_by,l=void 0===i?"":i,c=t.page_size,s=void 0===c?10:c,f=t.page_no,d=void 0===f?1:f,v=t.ids;e&&u("query","nocodeformdesigner",[e,Hs({filter:r,search:a,order_by:l,select:"",page_size:s,page_no:d,ids:void 0===v?[]:v},p)])},C=1===parseInt(r.Multi),E={controlMeta:en(r,v),onChange:function(e){var t;"string"==typeof e?t=e:Array.isArray(e)&&(t=e.join(",")),n(Ka()({valueType:0,value:t}))},baseUrl:a,batchInvoke:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];u(e,r.Key,t,n)},getControlText:c,addControlAction:function(e,t){D.eventBus.on(e,t)},onDownLoad:i,batchInvokeListConfig:function(){h&&u("listconfig","nocodeformdesigner",[h])},batchInvokeQuery:b,value:y},I=m(E,!0),x=I.searchKeywords;(0,F.useEffect)((function(){b(h,{page_size:10,page_no:1,search:x,select:r.PropsDisplay,ids:y?y.split(","):[]})}),[t,r.PropsDisplay,h]);var T=Hs(Hs({className:"".concat(l,"-refbill-def-editor-input"),fieldType:"refbill"},I),{},{value:C?y?y.split(","):[]:y||"",placeholder:"请选择",showSelected:!1});return k().createElement(_c,(0,_.c)({},e,{editorType:"refBillDef",inputFieldProps:T}))},Ys=function(e){var t,n=e.handleChange,r=e.value,o=e.className,a=e.editor,i=e.Name,l=e.Tips,c=e.renderItem,u=e.field,s=e.id,d=a.Enum,p=a.NameHidden,v=a.Default,m=a.Required,g=a.Title,h=(0,(0,F.useContext)(ie).getKdesignerApi)().controlCacheApi,y=T()(d).call(d,(function(e){return(0,_.c)({},e,{Value:e.Value||e.Id})})),b=(0,Fe.isUndefined)(r)?v||(null===(t=y[0])||void 0===t?void 0:t.Value):String(r),C=h.hasCache("controlId",s),E=(0,F.useState)(!("Multi"!==e.Id||C)),I=(0,f.c)(E,2),x=I[0],N=I[1],A=(0,F.useCallback)((function(e){var t=e[u.Key]||[];0!==t.length?(null==t?void 0:t.length)>0&&N(!1):N(!0)}),[]);(0,F.useEffect)((function(){if("Multi"===e.Id&&!C)return D.eventBus.on(mr,A),function(){D.eventBus.off(mr,A)}}),[]);return k().createElement(k().Fragment,null,k().createElement(D.NameTipWrapper,{nameHidden:p,className:o,name:i,tips:l,required:m,title:g}),k().createElement("div",{className:"".concat(o,"-tab-editor")},T()(y).call(y,(function(e){var t=e.IconClassName,r=e.IconTitle;return k().createElement("div",{key:e.Value,disabled:x,className:Vn()(["".concat(o,"-tab-editor-item"),{"is-active":b===e.Value,"is-disabled":!0===x}]),onClick:function(){return t=e.Value,void(x||n(t));var t},title:t&&r},c?c(e):t?k().createElement("i",{className:t}):e.Name)}))))},Ws=r(6076),Qs=r.n(Ws),Xs=["compareTypes","compareType","compareTypeCaption","fieldName","fieldCaption","items","value"];function Zs(e,t){var n=v()(e);if(i()){var r=i()(e);t&&(r=g()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Js(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zs(Object(n),!0).forEach((function(t){(0,d.c)(e,t,n[t])})):s()?Object.defineProperties(e,s()(n)):Zs(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}var $s=qn.Condition.constants,ef=$s.allFieldRegExp,tf=$s.allExpRegExp,nf=qn.treeUtils.exludeTreeNodeByCallback,rf=qn.treeUtils.transformTreeToListConfig,of=[{id:"edit",name:{zh_CN:"编辑"}},{id:"mustinput",name:{zh_CN:"必填"}},{id:"readonly",name:{zh_CN:"只读"}},{id:"disabled",name:{zh_CN:"禁用"}}],af=function e(t,n,r,o){return t.reduce((function(t,a){var i,l=a._Type_,c=a.Key,u=a.Name,s=a.FormatType,f=a.SelectItemType,d=a.Multi,p=a.children;if(nt(l)||ft(l)||dt(l))return t;var v=et(l)||lt(l)?"NoCodeMulRefBillField":l,m=null==v?void 0:v.toLowerCase();if(Je(l)){var h=[{title:"".concat(u,".开始"),titlePrefix:"[日期]",key:"".concat(c,"_startdate"),formatType:s,type:"nocodedatefield",compareTypes:of,checkable:!0,selectable:!1},{title:"".concat(u,".结束"),titlePrefix:"[日期]",key:"".concat(c,"_enddate"),formatType:s,type:"nocodedatefield",compareTypes:of,checkable:!0,selectable:!1}];return C()(t).call(t,h)}var y={};if(et(l)||tt(l)||lt(l))y=en(a,r);else if(ot(l)){var b,E=r.getControlMetaEditor(l,"ImageFileType").Enum,I=r.getControlPropertyDefaultValue(l,"FileMaxSize"),x=r.getControlPropertyDefaultValue(l,"ImageFileType"),N=(null==a?void 0:a.ImageFileType)||x,A=T()(b=N.split(",")).call(b,(function(e){return g()(E).call(E,(function(t){return t.Id===e}))[0].Name}));y={UploadNum:(null==a?void 0:a.UploadNum)||{max:9,min:0},FileMaxSize:a.FileMaxSize||I,typeArr:A}}else if(at(l)){var S=r.getControlPropertyDefaultValue(l,"AttachmentFileType"),w=r.getControlPropertyDefaultValue(l,"FileMaxSize"),F=(null==a?void 0:a.AttachmentFileType)||S;y={UploadNum:(null==a?void 0:a.UploadNum)||{max:9,min:0},maxSize:a.FileMaxSize||w,fileType:F}}var k=a.CustomContent?null===(i=a.CustomContent.ops)||void 0===i?void 0:T()(i).call(i,(function(e){return{name:{zh_CN:e.Label},value:e.Value,bgc:e.Bgc}})):void 0,D=Js({title:u,titlePrefix:ln(a,n,r,o),key:c,type:m,isMulti:Mt(f)||Mt(d),items:k,formatType:s,compareTypes:of,checkable:!0,selectable:!1},y);return Vt(l)&&p&&(p&&(D.children=e(p,n,r,o)),D.checkable=!1),C()(t).call(t,D)}),[])},lf=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return(t||[]).reduce((function(t,o){var a,i=o.caption,l=o.type,c=o.id,u=o.option,s=void 0===u?{}:u,f=o.typeCaption,d=(s.sourceForm,(null==c||null===(a=c.split("."))||void 0===a?void 0:a.length)||0);if("group"!==l&&d>r)return t;if(nt(l)||ft(l)||dt(l))return t;var p=null==l?void 0:l.toLowerCase();"nocodedaterangefield"===p?p="nocodedatefield":(et(l)||tt(l)||lt(l))&&(p="nocodemulrefbillfield");var v,m=s.children,h=s.valueItems,y=s.billEntityId,b=s.displayProp,E=s.isMulti,I=s.formatType,x={title:i,titlePrefix:f,key:c,compareTypes:of,type:p,formatType:I,selectable:!1,checkable:!0};if(et(l)||tt(l)||lt(l)){if(!y)return t;x=(0,_.c)(x,{displayProp:b,entityId:y,isMulti:E})}else if(st(l))x=(0,_.c)(x,{isMulti:E});else if(ot(l)){var N,A=s.ImageFileType,S=s.FileMaxSize,w=s.UploadNum,F=n.getControlMetaEditor(l,"ImageFileType").Enum,k=n.getControlPropertyDefaultValue(l,"FileMaxSize"),D=n.getControlPropertyDefaultValue(l,"ImageFileType"),P=n.getControlPropertyDefaultValue(l,"UploadNum"),M=A||D,R=T()(N=M.split(",")).call(N,(function(e){return g()(F).call(F,(function(t){return t.Id===e}))[0].Name}));x=(0,_.c)(x,{UploadNum:w||P,FileMaxSize:S||k,typeArr:R})}else if(at(l)){var O=s.AttachmentFileType,B=s.FileMaxSize,j=s.UploadNum,L=n.getControlPropertyDefaultValue(l,"AttachmentFileType"),U=n.getControlPropertyDefaultValue(l,"FileMaxSize"),K=O||L,V=n.getControlPropertyDefaultValue(l,"UploadNum");x=(0,_.c)(x,{UploadNum:j||V,maxSize:B||U,fileType:K})}if((h&&(x.items=h),m&&(x.children=e(m,n,r)),"group"===l)&&(x.checkable=!1,null===(v=x)||void 0===v||null===(v=v.children)||void 0===v||!v.length))return t;return C()(t).call(t,x)}),[])},cf=(0,F.memo)((function(e){var t=e.item,n=e.index,r=e.filterOptions,o=e.fieldTree,a=e.prefixCls,i=e.handleCompareTypeChange,l=e.refBillProps,c=e.fieldRecords,u=e.handleValChange,s=e.handleVarSelect,d=e.handleDelete,p=e.verifyData,m=e.formId,h=t.compareTypes,y=t.compareType,b=(t.compareTypeCaption,t.fieldName),E=(t.fieldCaption,t.items),I=t.value,x=(0,be.c)(t,Xs),T=qn.ListFilterUtil.getCompareTypeOptions,N=qn.ListFilterUtil.getVarSelectedKeysInfo,S=qn.ListFilterUtil.getValueTypeByType,D=qn.ListFilterUtil.getNewValue,P=qn.ListFilterUtil.transform2Options,R=qn.ListFilterUtil.VALUE_EMPTY_COMPARE_TYPE,_=(0,F.useContext)(ie),O=_.getBaseHooks,B=_.invokeAction,j=_.getKdesignerApi,L=_.getExpressionData,U=_.getRefBillData,K=_.getCompareTypes,V=_.batchInvoke,z=_.baseUrl,G=j().data,H=O("useKDRefBill"),q=(0,F.useState)(!1),Y=(0,f.c)(q,2),W=Y[0],Q=Y[1],X=x||{},Z=X.entityId,J=X.formatType,$=X.type,ee=X.displayProp,te=S(x),ne="refbill"===te?l?te:"text":"select"===te&&!0===t.isMulti?"multiSelect":te,re=D(ne,I,null==c?void 0:c[b]),oe=(0,F.useState)(!1),ae=(0,f.c)(oe,2),le=ae[0],ce=ae[1],ue=(0,F.useState)(!1),se=(0,f.c)(ue,2),fe=se[0],de=se[1],pe=(0,F.useState)(!1),ve=(0,f.c)(pe,2),me=ve[0],ge=ve[1],he=K(),ye=G.getRootId(),Ee={name:"field",value:b,options:r,fieldType:"treeSelect",disabled:!0,borderType:"bordered",className:"".concat(a,"-modal-body-fielddata")},Ie={name:"compareType",value:y,options:T(h)||[],className:"".concat(a,"-modal-body-infoType"),fieldType:"select",onChange:function(e){return i(e,n,ne)},borderType:"bordered"},xe=N(I),Te=(0,F.useMemo)((function(){return L()}),[L]),Ne={valueType:0,fieldValue:""};(0,F.useEffect)((function(){!function(e,t){var n=g()(t),r=void 0===n?"":n,o=t.search,a=void 0===o?"":o,i=t.order_by,l=void 0===i?"":i,c=t.select,u=void 0===c?"":c,s=t.page_size,f=void 0===s?10:s,d=t.page_no,p=void 0===d?1:d,v=t.ids;"refbill"===te&&e&&V("query","nocodeformdesigner",[e,{filter:r,search:a,order_by:l,select:u,page_size:f,page_no:p,ids:void 0===v?[]:v}])}(Z,{page_size:10,page_no:1,search:"",select:ee,ids:re||[]})}),[I,Z]);var Ae,Se,we=[{label:"查找表单记录",key:"search",id:1,icon:"chazhaobiaodanjilu-xian"},{label:"运算公式",key:"formula",id:2,icon:"yunsuangongshi"}],Fe={valueType:2,value:{relationFormId:"",filterInfos:[],sortInfos:[],result:[]}},ke=(Ae={nocodetextfield:[0,1,2],nocodetextareafield:[0,1,2],nocodedecimalfield:[0,1,2],nocoderichtextfield:[0,1],nocodegeofield:[0,1],nocodeaddressfield:[0,1],nocodeselectitemfield:[0,1,2],nocodemulrefbillfield:[0,1,2],nocodedaterangefield:[0,1],nocodedatefield:[0,1,2],nocodeimageuploadfield:[0,1],nocodeattachmentuploadfield:[0,1],nocodegroupcontainerfield:[],nocodeentryentityfield:[],nocodegraphicdisplayfield:[0,1],nocodebillnofield:[0,1,2]}[$],null==we?void 0:g()(we).call(we,(function(e){return null==Ae?void 0:w()(Ae).call(Ae,e.id)}))),De=H(Js(Js({},l),{},{batchInvokeListConfig:function(){return l.batchInvokeListConfig(Z)},controlMeta:x,onChange:function(e){return u(Array.isArray(e)?e:""===e?[]:null==e?void 0:e.split(","),n,ne)}}),!0),Pe="refbill"===ne?Js(Js({className:"".concat(a,"-modal-body-refbill")},De),{},{value:1===x.multi?re:re[0]}):"picture"===ne?{UploadNum:t.UploadNum,FileMaxSize:t.FileMaxSize,typeArr:t.typeArr}:"attachment"===ne?{UploadNum:t.UploadNum,maxSize:t.maxSize,fileType:t.fileType}:{},Me=function(e){try{if(Qt(e)){var t=JSON.parse(e);return(null==t?void 0:t.valueType)||0}var n;if(e&&"object"===(0,Ce.c)(e))return(null===(n=e[0])||void 0===n?void 0:n.valueType)||0}catch(e){}}(I),Re=function(e,t){try{if(Qt(e)){var n=JSON.parse(e);return(null==n?void 0:n.valueType)===t?n.value:""}var r,o;if(e&&"object"===(0,Ce.c)(e))return 2===t?null===(o=e[0])||void 0===o?void 0:o.fieldValue:(null===(r=e[0])||void 0===r?void 0:r.valueType)===t?e[0].fieldValue:""}catch(e){}},_e=function(e){var t=e?e.split("@@"):["","",null],n=(0,f.c)(t,3);return[n[1],n[2]]}(Re(I,1)),Oe=function(e){e.stopPropagation(),s(t.fieldName,Ne,ne),ge(!1)},Be=(Se=Te.functionOperations,A()(Se)),je={fieldType:"formula",onClick:function(){return ze("formula")},value:_e[0],expressionData:Te.functionTypes,fieldData:o,onClear:Oe,lang:Number(_e[1]||1),readOnly:!0,autofocus:!1},Le={fieldType:"findForm",borderType:"bordered",value:Re(I,2),onChange:function(e){var n;n="string"==typeof e?e:Array.isArray(e)?e.join(","):null!=e&&e.target?e.target.value:e,s(t.fieldName,{valueType:0,fieldValue:n},ne)},placeholder:"请输入",onClear:Oe,onClick:function(){return ze("search")}},Ue={1:je,2:Le}[Me],Ke=function(){ce(!0)},Ve=function(){de(!0)},ze=(0,F.useCallback)((function(e){var t,n={search:Ve,formula:Ke};null===(t=n[e])||void 0===t||t.call(n)}),[Ve,Ke]),Ge=function(e,t){var n,r=(null===(n=He(e,t))||void 0===n?void 0:n.label)||"";return r=r?"查找：".concat(r):""},He=function e(t,n){var r;return t.children.forEach((function(t){if(t.value===n&&(r=t),t.children){var o=e(t,n);o&&(r=o)}})),r},qe=(0,F.useMemo)((function(){var e;return 2===Me&&(null===(e=I[0])||void 0===e||null===(e=e.rule)||void 0===e?void 0:e.value)||Fe.value}),[I]),Ye={invokeGetListConfig:function(e){e!==ye&&B("listtreeconfig",[e])},invokeGetFieldRecords:function(e){B("getFilterItemLook",[e,{getEnumData:"true",enumField:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",filterrows:[]}])},invokeSaveBizRule:function(e){}},We=(0,F.useMemo)((function(){var e=U();return e.children[0].icon=k().createElement(M.Icon,{prefix:"nocodeplatformicon",type:"gerenzhongxin",style:{color:"#3987ED"}}),e.children[1].icon=k().createElement(M.Icon,{prefix:"nocodeplatformicon",type:"zuzhi",style:{color:"#3987ED"}}),e}),[U]),Qe=Js(Js({name:"value",options:P(E),className:"".concat(a,"-modal-body-infoValue"),fieldType:ne,borderType:"bordered",placeholder:w()(R).call(R,y)?"":void 0,colHeadFilter:null==c?void 0:c[b],formatType:J,baseUrl:z,isMulti:t.isMulti,varSelectProps:Js({showSearch:!0,defaultExpandAll:!0,className:"".concat(a,"-modal-body-var"),visible:W,disabled:"none"===te||"001"===y,value:A()(xe).join(),popperClassName:"".concat(a,"-def-editor-var-select-panel"),type:"dropdownSelect",selectedKeys:v()(xe),data:ke,varSelectActive:me,onVarSelectActive:ge,onVisibleChange:Q,onSelect:function(e){return ze(e[0])}},Ue)},Pe),{},{onChange:function(e){return u(e,n,ne)},allowClear:"number"!==ne,value:t.isMulti?re:"refbill"===ne?Pe.value:re});return k().createElement(k().Fragment,{key:b+y+n},k().createElement(M.ConfigProvider,{value:{prefixCls:"kd"}},k().createElement(qn.ConditionFilterItem,{onDelete:function(){return d(n)},data:[Ee,Ie,Qe],customInput:[{type:"notInput",render:function(e){var t=e.value,n=e.className;return k().createElement("span",{className:n},t)}}],valueRequired:!0,className:"".concat(a,"-item"),verifyData:p}),le&&k().createElement(qn.Condition,{value:_e[0],language:Number(_e[1]||1),modalTitle:"编辑运算公式",editorTitle:t.fieldCaption,visible:le,editorPlaceholder:"请编辑运算公式",fieldData:o,fieldTitle:"表单内容",expressionData:Te.functionTypes,operations:Be,defaultExpandAll:!1,onClose:function(){ce(!1),ge(0!==Me&&!(null==Ue||!Ue.value))},onConfirm:function(e,n){e=function(e,t){var n,r;if(!e)return"";var o=(e=e.replace(/）/g,")").replace(/（/g,"(").replace(/“/g,'"').replace(/”/g,'"').replace(/‘/g,"'").replace(/’/g,"'")).replace(ef,"$1").replace(tf,"$1");return C()(n=C()(r="".concat(o,"@@")).call(r,e,"@@")).call(n,t?1:0)}(e,n),ce(!1),s(t.fieldName,e?{valueType:1,fieldValue:e}:Ne,ne)}})),fe&&k().createElement(Nc,{visible:fe,onClose:function(){de(!1),ge(0!==Me&&!(null==Ue||!Ue.value))},invokeActions:Ye,queryFormValue:qe||Fe.value,refBillData:We,field:t,compareTypesMap:he,formId:m,onConfirm:function(e){de(!1);var n=Ge(We,e.value.relationFormId);s(t.fieldName,e?{valueType:e.valueType,fieldValue:n,rule:e}:Ne,ne)}}))}));cf.displayName="ChildrenItem";var uf=(0,F.forwardRef)((function(e,t){var n=e.prefixCls,r=e.fieldKey,o=e.formId,a=e.inputFormId,i=e.value,l=e.onChange,c=e.onConfirm,u=(0,F.useContext)(ie),s=u.baseUrl,d=u.onDownLoad,p=u.getControlText,v=u.batchInvoke,m=u.getCompareTypes,h=u.getKdesignerApi,b=u.curFormulaTreeApi,E=u.getRefBillNameMap,I=(0,F.useRef)(null),x=(0,F.useRef)(null),N=(0,F.useRef)([]),A=h(),S=A.data,w=A.meta,P=m(),_=S.getRootId();(0,F.useImperativeHandle)(t,(function(){return{updateVerifyAndGetMsg:function(){return x.current.updateVerifyAndGetMsg()}}}),[]);var O=yc({id:r,formId:o,eventName:"filterItemLook"}),B=(0,F.useMemo)((function(){if(Array.isArray(i)){var e=[];return i.forEach((function(t){e.push(Js(Js({},t),{},{value:"string"==typeof t.value?JSON.parse(t.value):t.value||[]}))})),e}return[]}),[i]),j=bc({api:b,parser:function(e){return nn(e,e,P)}}),L=yc({id:r,formId:a,eventName:"setListTreeConfig",parser:function(e){var t=e.data;return lf(t,w)},defaultValue:[]}),U=(0,F.useMemo)((function(){return cn(j)}),[j]),K=(0,F.useMemo)((function(){var e,t,n=T()(e=S.getData().Items||[]).call(e,(function(e){var t=e._Type_;return Js(Js({},w.getDefaultData(t)),e)})),r=nf((null===(t=pl(n)[0])||void 0===t?void 0:t.children)||[],(function(e){var t=e._Type_,n=e.BillEntityIdEx,r=e.showType;return lt(t)?"1"!==r:!(ut(t)||rt(t)||("NoCodeMulRefBillField"===t||"NoCodeRefBillField"===t)&&void 0===n)}));return af(r,U,w,E())}),[U,E]),V=(0,F.useMemo)((function(){return a?a!==_?L:K:[]}),[K,L,a,_]),z=(0,F.useMemo)((function(){return rf(V)}),[V]),G=(0,F.useMemo)((function(){return T()(B).call(B,(function(e){return e.fieldName}))}),[B]),H=(0,F.useMemo)((function(){return ul({options:j})}),[j]),q=(0,F.useCallback)((function(e){N.current.length<e.length&&e.length>7&&setTimeout((function(){return I.current.scrollTo(0,1e4)}),100),N.current=e}),[]),Y=function(e){var t=e;if(Array.isArray(e)){var n=[];e.forEach((function(e){n.push(Js(Js({},e),{},{value:"object"===(0,Ce.c)(e.value)?Ka()(e.value):e.value||""}))})),t=n}l(t),q(e)},W={baseUrl:s,batchInvoke:function(e,t){v(e,r,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[])},getControlText:p,addControlAction:function(e,t){D.eventBus.on(e,t)},onDownLoad:d,batchInvokeListConfig:function(e){v("listconfig","nocodeformdesigner",[e])},batchInvokeQuery:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=g()(t),r=void 0===n?"":n,o=t.search,a=void 0===o?"":o,i=t.order_by,l=void 0===i?"":i,c=t.select,u=void 0===c?"":c,s=t.page_size,f=void 0===s?10:s,d=t.page_no,p=void 0===d?1:d,m=t.ids;v("query","nocodeformdesigner",[e,{filter:r,search:a,order_by:l,select:u,page_size:f,page_no:p,ids:void 0===m?[]:m}])}},Q=qn.ListFilterUtil.filterDataTransform,X=qn.ListFilterUtil.filterNoValue,Z=qn.ListFilterUtil.getNewDefaultFilterDataExcept,J=(qn.ListFilterUtil.getFilterOptions,qn.ListFilterUtil.createNewValue),$=(0,F.useState)([]),ee=(0,f.c)($,2),te=ee[0],ne=ee[1],re=(0,F.useMemo)((function(){return ne([]),Q(B,z)||[]}),[B,z]);(0,F.useImperativeHandle)(t,(function(){return{updateVerifyAndGetMsg:function(){var e=X(re);return ne(e),g()(e).call(e,(function(e){return!e.verifyStatus}))}}}),[re]);var oe=(0,F.useCallback)((function(e){return Js(Js({},e),{},{value:e.value||[]})}),[]),ae=(0,F.useCallback)((function(){(null==B?void 0:B.length)>0&&Y([])}),[B,Y]),le=(0,F.useCallback)((function(e,t,n){var r=[],o=Ae()(B).call(B,(function(e,n){return t===n})).fieldName,a=-1;if(null!=o&&Qs()(o).call(o,"_startdate")||null!=o&&Qs()(o).call(o,"_enddate")){var i=o.replace(/^(\S+)(_startdate|_enddate)/g,"$1");a=Ur()(B).call(B,(function(e,n){var r;return(null===(r=e.fieldName)||void 0===r?void 0:y()(r).call(r,i))&&t!==n}))}B.forEach((function(o,i){t===i||a===i?r.push(oe({fieldName:o.fieldName,compareType:e,value:o.value,fieldType:n})):r.push(oe({fieldName:o.fieldName,compareType:o.compareType,value:o.value,fieldType:n}))})),Y(r)}),[B,Y]),ce=function(e){var t=(0,R.c)(B);ue()(t).call(t,e,1),Y(t)},se=function(e,t,n,r){var o=[];B.forEach((function(n,a){if(n.fieldName===e){var i=[];i.push(t),o.push(oe({fieldName:n.fieldName,compareType:n.compareType,value:i,fieldType:r}))}else o.push(oe({fieldName:n.fieldName,compareType:n.compareType,value:n.value,fieldType:r}))})),Y(o)},fe=function(e,t,n){!function(e,t,n){var r=[];B.forEach((function(o,a){t===a?r.push(oe({fieldName:o.fieldName,compareType:o.compareType,value:e,fieldType:n})):r.push(oe({fieldName:o.fieldName,compareType:o.compareType,value:o.value}))})),Y(r)}(J(e,n),t,n)};return k().createElement("div",{className:"".concat(n,"-modal"),ref:I},k().createElement("div",{className:"".concat(n,"-modal-body"),style:{marginTop:"0px"}},re.length>0&&k().createElement("div",{style:{width:"100%"}},T()(re).call(re,(function(e,t){return k().createElement(cf,{key:(null==e?void 0:e.key)||(null==e?void 0:e.fieldName),item:e,index:t,filterOptions:V,fieldTree:H,prefixCls:n,handleCompareTypeChange:le,refBillProps:W,fieldRecords:O,handleValChange:fe,handleVarSelect:se,handleDelete:ce,verifyData:te,formId:o})})))),k().createElement("div",{className:"".concat(n,"-modal-footer")},k().createElement("div",{className:"".concat(n,"-modal-footer-left")},k().createElement(M.ConfigProvider,{value:{prefixCls:"kd"}},k().createElement(qn.AddTreeItem,{treeData:V,triggerText:"添加录入内容",onCheck:function(e,t){var n=[],r=B.reduce((function(e,t){var n=t.fieldName,r=t.compareType;(null!=n&&Qs()(n).call(n,"_startdate")||null!=n&&Qs()(n).call(n,"_enddate"))&&(e[n.replace(/^(\S+)(_startdate|_enddate)/g,"$1")]=r);return e}),{});e.forEach((function(e,t){var o=Ae()(B).call(B,(function(t){return t.fieldName===e}));if(o)n.push(o);else{var a=Z(z,e,re);if(a){if(null!=e&&Qs()(e).call(e,"_startdate")||null!=e&&Qs()(e).call(e,"_enddate")){var i=e.replace(/^(\S+)(_startdate|_enddate)/g,"$1");r[i]&&(a.compareType=r[i])}n=C()(n).call(n,oe(a))}}})),Y(n)},checkedKeys:G}))),k().createElement("div",{className:"".concat(n,"-modal-footer-right")},k().createElement(M.Button,{size:"small",className:"".concat(n,"-modal-footer-btn"),onClick:ae},"清空"),k().createElement(M.Button,{size:"small",type:"primary",className:"".concat(n,"-modal-footer-btn"),onClick:c},"确定"))))})),sf=(0,F.memo)((function(e){var t=e.prefixCls,n=e.title,r=e.value,o=e.formId,a=e.inputFormId,i=e.visible,l=e.setVisible,c=e.fieldKey,u=e.onChange,s=(0,F.useState)(r),d=(0,f.c)(s,2),p=d[0],v=d[1],m=(0,F.useRef)(),g=function(){l(!1)};return(0,F.useEffect)((function(){i&&((0,Fe.isEqual)(r,p)||v(r))}),[i]),k().createElement(M.Modal,{mask:!0,visible:i,body:k().createElement(uf,{ref:m,prefixCls:t,fieldKey:c,formId:o,inputFormId:a,value:p,onChange:function(e){v(e)},onConfirm:function(){null==u||u(p),g()}}),titleIcon:null,className:"".concat(t,"-modal"),maskClosable:!1,footer:k().createElement(k().Fragment,null),width:640,height:520,keyboard:!1,bodyStyle:{padding:0,overflow:"hidden"},footerStyle:{display:"none"},title:n,closable:!0,draggable:!1,destroyOnClose:!0,onCancel:g,onOk:g})}));sf.displayName="InputContentModal";var ff=sf;function df(e,t){var n=v()(e);if(i()){var r=i()(e);t&&(r=g()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function pf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?df(Object(n),!0).forEach((function(t){(0,d.c)(e,t,n[t])})):s()?Object.defineProperties(e,s()(n)):df(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}var vf=(0,F.memo)((function(e){var t,n,r=e.handleChange,o=e.className,a=e.editor,i=e.locked,l=e.Name,c=e.Tips,u=e.field,s=e.rootId,d=a.NameHidden,p=a.Required,v=a.Title,m=u.Key,g=u._Type_,h=u.InputForm,y=(0,F.useState)(!1),b=(0,f.c)(y,2),C=b[0],E=b[1],I=(0,F.useContext)(ie),x=I.invokeAction,T=I.prefixCls,N=I.getKdesignerApi,A=I.fetchListTree,S=N().data,P="string"==typeof(n=e.value)&&""!=n?JSON.parse(n):n,M=(0,F.useMemo)((function(){return"nocodemulrefbillfield"===g.toLocaleLowerCase()?u.BillEntityIdEx:S.getRootId()}),[g,S,null==u?void 0:u.BillEntityIdEx]),R=(0,F.useMemo)((function(){if(h){var e=h.lastIndexOf(".")+1,t=h.lastIndexOf("["),n=e>0&&t>-1?h.substring(e,t):h;return w()(n).call(n,s)?s:n}return""}),[h]);(0,F.useEffect)((function(){var e=null==P?void 0:P.targetId;e&&e!=h&&r("")}),[h]);var O,B=(0,F.useCallback)((function(e){var t=Ka()({value:e,targetId:h});r(t)}),[r]),j="".concat(T,"-inputContnet-editor"),L=pf(pf({},a),{},{NameHidden:!0}),U=(0,F.useMemo)((function(){return{name:l,className:o,nameHidden:d,tips:c,required:p,title:v}}),[l,o,d,c,p,v]);return k().createElement("div",{className:j},k().createElement("div",{className:"".concat(o,"-nav")},k().createElement(D.NameTipWrapper,U)),k().createElement(D.CustomInputTrigger,(0,_.c)({},e,{editor:L,disabled:i,value:(null==P||null===(t=P.value)||void 0===t?void 0:t.length)>0?(O=P.value,"".concat(O.length,"个内容")):"",onClick:function(){E(!0),A("formula"),R&&x("listtreeconfig",[R,"formula"])}})),k().createElement(ff,{formId:M,inputFormId:R,prefixCls:j,visible:C,setVisible:E,fieldKey:m,value:(null==P?void 0:P.value)||[],title:l,onChange:B}))}));vf.displayName="InputContentEditor";var mf=(0,D.ErrorBoundaryWrap)(vf,"InputContentEditor");function gf(e,t){var n=v()(e);if(i()){var r=i()(e);t&&(r=g()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function hf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gf(Object(n),!0).forEach((function(t){(0,d.c)(e,t,n[t])})):s()?Object.defineProperties(e,s()(n)):gf(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}var yf=qn.treeUtils.exludeTreeNodeByCallback,bf=qn.treeUtils.dfs,Cf=function e(t,n,r,o,a){return t.reduce((function(t,i){var l,c=i._Type_,u=i.Name,s=i.Key,f=i.BillEntityIdEx,d=i.SelectItemType,p=i.Multi,v=i.children,m=i.selectable;if(Je(c)){var g,h,y=[{title:"".concat(u,".开始"),titlePrefix:"[日期]",key:a?C()(g="".concat(a,".")).call(g,s,"_startdate"):"".concat(s,"_startdate"),type:c,entityId:f},{title:"".concat(u,".结束"),titlePrefix:"[日期]",key:a?C()(h="".concat(a,".")).call(h,s,"_enddate"):"".concat(s,"_enddate"),type:c,entityId:f}];return C()(t).call(t,y)}var b=void 0!==m?m:!Vt(c),E={title:u,titlePrefix:ln(i,n,r,o),key:a?C()(l="".concat(a,".")).call(l,s):s,type:c,entityId:f,isMulti:1===d||1==p,selectable:b};if(1!=p&&v){var I=lt(c)?s:void 0;E.children=e(v,n,r,o,I)}return Vt(c)&&(E.selectable=!1),C()(t).call(t,E)}),[])},Ef=function(e){var t=e.value,n=e.isMultiMode,r=void 0!==n&&n,o=e.sourceFieldOptions,a=e.relationFieldId,i=e.selBillValue,l=e.onChange,c=e.curListFilterConfig,u=(0,F.useState)(t||[]),s=(0,f.c)(u,2),d=s[0],p=s[1],v=(0,F.useContext)(ie),m=v.getKdesignerApi,g=v.getRefBillNameMap,h=m(),y=h.data,b=h.meta,E=qn.ListFilterUtil.filterTreeData,I=qn.ListFilterUtil.canClearSourceField,x=(0,F.useMemo)((function(){return cn(c)}),[c]),N=(0,F.useMemo)((function(){var e,t,n=T()(e=y.getData().Items||[]).call(e,(function(e){var t=e._Type_;return hf(hf({},b.getDefaultData(t)),e)})),o=yf((null===(t=pl(n)[0])||void 0===t?void 0:t.children)||[],(function(e){var t=e._Type_,n=e.BillEntityIdEx,o=e.showType,l=e.Multi,c=e.children,u=e.Key,s=e.RefBillKey;return r?(!s||s!==a)&&(!(!lt(t)&&!et(t)||n!==i||u===a||1!=l)||!(1==l||!c.length)&&(e.selectable=!1,!0)):(!a||u!==a&&s!==a)&&(lt(t)?"1"!==o:!(ut(t)||rt(t)||("NoCodeMulRefBillField"===t||"NoCodeRefBillField"===t)&&void 0===n))}));return Cf(o,x,b,g())}),[r,i,a,x,g]),A=function(e,t){var n=Ae()(d).call(d,(function(e,n){return n===t})).fieldId;if(e!==n){var r=T()(d).call(d,(function(n,r){return t===r?hf(hf({},n),{},{sourceField:e}):n}));p(r),l(r)}},S=function(e,t){var n=T()(d).call(d,(function(n,r){if(t===r){var a=E(o,bf(N,(function(t){return t.key===e})));return I(a,n.sourceField)?hf(hf({},n),{},{targetField:e}):hf(hf({},n),{},{targetField:e,sourceField:""})}return n}));p(n),l(n)};(0,F.useEffect)((function(){var e=t||[];(0,Fe.isEqual)(e,d)||p(e)}),[t]);return k().createElement("div",{className:"bill-finder-actions"},T()(d).call(d,(function(e,t){var n=e.sourceField,r=e.targetField,a=bf(N,(function(e){return e.key===r}))||{},c=E(o,hf({selBillValue:i},a));return k().createElement("div",{className:"row_item",key:t},k().createElement("span",{className:"txt"},"将"),k().createElement(qn.KDTreeSelect,{className:"target-field-select",virtual:!1,allowClear:!0,value:r,treeData:N,showFullLabelTips:!0,onChange:function(e){return S(e,t)},suffixIcon:k().createElement(M.Icon,{prefix:"designericon",type:"duixiangxuanze2"})}),k().createElement("span",{className:"txt"},"的值赋为"),k().createElement(qn.KDTreeSelect,{className:"source-field-select",virtual:!1,disabled:""===r||void 0===r,value:n,treeData:c,showFullLabelTips:!0,treeCheckStrictly:!0,onChange:function(e){return A(e,t)},suffixIcon:k().createElement(M.Icon,{prefix:"designericon",type:"duixiangxuanze2"})}),k().createElement(M.Icon,{className:"delete_icon",prefix:"ncicon",type:"xingshanchu",onClick:function(){return function(e){var t=(0,R.c)(d);ue()(t).call(t,e,1),p(t),l(t)}(t)}}))})),k().createElement("div",{className:"footer-btns"},k().createElement("div",{className:"add-btn",onClick:function(){var e,t=C()(e=[]).call(e,(0,R.c)(d),[{sourceField:"",targetField:""}]);p(t),l(t)}},k().createElement(M.Icon,{prefix:"nocodeplatformicon",type:"zengjia-yuan"}),"添加写入规则"),!!d.length&&k().createElement("div",{className:"clear-all",onClick:function(){p([]),l([])}},"清空")))},If=["children"];function xf(e,t){var n=v()(e);if(i()){var r=i()(e);t&&(r=g()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xf(Object(n),!0).forEach((function(t){(0,d.c)(e,t,n[t])})):s()?Object.defineProperties(e,s()(n)):xf(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}var Nf=qn.treeUtils.dfs,Af=qn.treeUtils.getListConfigPure,Sf=qn.treeUtils.treeNodeTransform,wf=qn.treeUtils.getListSortConfig,Ff=qn.treeUtils.getMultiRefChildrenExclude,kf=qn.ListFilterUtil.getVarSelectDisabled,Df={key:"currentRecord",title:"本记录"},Pf={key:"currentRecord",title:"查询结果",isMulti:!0},Mf=[{label:"单条",value:"0"},{label:"多条",value:"1"}],Rf=[{type:"array",required:!0,validator:function(e,t,n,r,o){return null!=t&&t.length&&t.every((function(e){return A()(e).every((function(e){return"string"==typeof e?""!==e:!Array.isArray(e)||0!==e.length}))}))?[]:[new Error("请添加写入规则")]}}],_f=function(e,t){return Tf(Tf({},e),t)},Of=function(e){var t,n=e.value,r=e.refBillData,o=e.field,a=e.ruleId,i=e.compareTypesMap,l=e.formId,c=e.listFilterConfig,u=e.curFormFieldTree,s=e.onChange,p=e.onSave,v=(0,F.useContext)(ie),m=v.prefixCls,h=v.baseUrl,y=v.onDownLoad,b=v.getControlText,E=v.batchInvoke,I=v.invokeAction,x=(v.getDataRef,v.getKdesignerApi),N=M.Form.useForm(),A=(0,f.c)(N,1)[0],S=(0,F.useState)({}),P=(0,f.c)(S,2),_=P[0],O=P[1],B=o.Key,j=o.ParentId,L=x(),U=L.data,K=L.meta,V=U.getRootId(),z=(0,F.useReducer)(_f,n),G=(0,f.c)(z,2),H=G[0],q=G[1],Y=(0,F.useRef)(),W=(0,F.useRef)(),Q={baseUrl:h,batchInvoke:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];E(e,o.Key,t,n)},getControlText:b,addControlAction:function(e,t){return D.eventBus.on(e,t),function(){D.eventBus.off(e,t)}},onDownLoad:y,batchInvokeListConfig:function(e){E("listconfig","nocodeformdesigner",[e])},batchInvokeQuery:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=g()(t),r=void 0===n?"":n,o=t.search,a=void 0===o?"":o,i=t.order_by,u=void 0===i?"":i,s=t.select,f=void 0===s?"":s,d=t.page_size,p=void 0===d?10:d,v=t.page_no,m=void 0===v?1:v,h=t.ids,y=void 0===h?[]:h;if(H.relationFormId===l){var b=Nf(c,(function(t){return t.entityId===e}));if(null!=b&&b.isDraftField)return}E("query","nocodeformdesigner",[e,{filter:r,search:a,order_by:u,select:f,page_size:p,page_no:m,ids:y}])}},X=(0,F.useMemo)((function(){var e=r.children,t=void 0===e?[]:e;return t[0].icon=k().createElement(M.Icon,{prefix:"nocodeplatformicon",type:"gerenzhongxin",style:{color:"#3987ED"}}),t[1].icon=k().createElement(M.Icon,{prefix:"nocodeplatformicon",type:"zuzhi",style:{color:"#3987ED"}}),So(t)[0]}),[r]),Z=yc({id:B,formId:H.relationFormId,eventName:"setListTreeConfig",parser:function(e){var t=e.data;return nn(t,t,i)},defaultValue:[]}),J=(0,F.useMemo)((function(){if(2===H.valueType)return""===H.relationFormId?[]:H.relationFormId===l?c:Z;if(3===H.valueType){var e;if(""===H.relationFieldId)return[];var t=(null===(e=Nf(u,(function(e){return e.key===H.relationFieldId})))||void 0===e?void 0:e.children)||[];return Sf(t,(function(e){var t=e.compareTypes,n=void 0===t?[]:t,r=e.key,o=H.relationFieldId.replace(/\./g,"\\."),a=r.replace(new RegExp("^"+o+"\\.(\\S+)"),"$1");if((null!=a&&w()(a).call(a,"fbasedataid")?a.split(".fbasedataid")[0]:a).split(".").length>2)return!1;var i=g()(n).call(n,(function(e){return"001"!==e.id}));return Tf(Tf({},e),{},{compareTypes:i,key:a})}))}return[]}),[H.relationFormId,H.relationFieldId,H.valueType,l,c,Z,u]),$=(0,F.useMemo)((function(){return Af(J)}),[J]),ee=(0,F.useMemo)((function(){return wf(J)}),[J]),te=(0,F.useMemo)((function(){var e;return"1"===H.valueType2Multi?[Pf]:C()(e=[Df]).call(e,(0,R.c)(Ff(J)))}),[J,H.valueType2Multi]),ne=(0,F.useMemo)((function(){if(!H.relationFieldId)return!1;var e=Nf(u,(function(e){return e.key===H.relationFieldId}));return null==e?void 0:e.isMulti}),[H.relationFieldId,u]),re=(0,F.useMemo)((function(){var e;if(""===H.relationFieldId)return[];if(3===H.valueType&&ne&&"1"===H.valueType3Multi)return[Pf];var t=Nf(u,(function(e){return e.key===H.relationFieldId})),n=Sf((null==t?void 0:t.children)||[],(function(e){var t=e.children,n=(0,be.c)(e,If),r=n.isMulti,o=n.key,a=H.relationFieldId.replace(/\./g,"\\."),i=o.replace(new RegExp("^"+a+"\\.(\\S+)"),"$1");return!((null!=i&&w()(i).call(i,"fbasedataid")?i.split(".fbasedataid")[0]:i).split(".").length>2)&&Tf(Tf({},!r&&t?e:n),{},{key:i})}));return C()(e=[Df]).call(e,(0,R.c)(n))}),[H.relationFieldId,u,H.valueType3Multi,ne]),oe=(0,F.useMemo)((function(){return sl({metaApi:K,options:c})}),[c]),ae=(0,F.useMemo)((function(){return fl({options:c})}),[c,V]),le=(null===(t=Nf(u,(function(e){return e.key===H.relationFieldId})))||void 0===t?void 0:t.entityId)||"",ce=yc({id:B,formId:H.relationFormId,eventName:"filterItemLook"}),ue=(0,F.useMemo)((function(){var e;return Array.isArray(H.filterInfos)?T()(e=H.filterInfos).call(e,(function(e){return Tf(Tf({},e),{},{value:"string"==typeof e.value?JSON.parse(e.value):e.value||[]})})):[]}),[H.filterInfos]);(0,F.useEffect)((function(){var e=ce.data,t=ce.param,n=(void 0===t?{}:t).enumField;if(n){var r=null==ue?void 0:g()(ue).call(ue,(function(e){return e.fieldName===n})),o=Nf(J,(function(e){return e.key===n}));O((function(t){return Tf(Tf({},t),{},(0,d.c)({},n,{configuredFilter:{enumEqCompareType:"001",items:r},fieldFilterConfig:o,groupInfo:e}))}))}}),[ce,ue,J]),(0,F.useEffect)((function(){var e;H.relationFormId&&((e=H.relationFormId)!==V&&I("listtreeconfig",[e]))}),[H.relationFormId]),(0,F.useEffect)((function(){if(2===H.valueType){var e=H.filterInfos,t=H.sortInfos,n=H.relationFormId,r=H.valueType2Result,o=H.valueType2Multi,a=H.valueType2Top;A.setFieldsValue({filterInfos:e,sortInfos:t,relationFormId:n,valueType2Result:r,valueType2Multi:o,valueType2Top:a})}else if(3===H.valueType){var i=H.relationFieldId,l=H.valueType3Result,c=H.valueType3FilterInfos,u=H.valueType3SortInfos,s=H.valueType3Multi,f=H.valueType3Top;A.setFieldsValue({relationFieldId:i,valueType3Result:l,valueType3FilterInfos:c,valueType3SortInfos:u,valueType3Multi:s,valueType3Top:f})}}),[H.valueType]),(0,F.useEffect)((function(){var e=H.valueType2Top;A.setFieldsValue({valueType2Top:e})}),[H.valueType2Multi]),(0,F.useEffect)((function(){var e=H.valueType3Top;A.setFieldsValue({valueType3Top:e})}),[H.valueType3Multi]);var se=(0,F.useMemo)((function(){return!(null!=a&&w()(a).call(a,"new_rule_"))}),[n]),fe=(0,F.useMemo)((function(){return 2===H.valueType?"1"===H.valueType2Multi:3===H.valueType&&(ne&&"1"===H.valueType3Multi)}),[H.valueType,H.valueType2Multi,H.valueType3Multi,ne]),de=function(e){!function(e){I("getFilterItemLook",[e,{getEnumData:"true",enumField:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",filterrows:[]}])}(H.relationFormId,e.fieldName)},pe=function(e,t){q((0,d.c)({},e,t)),s((0,d.c)({},e,t))},ve=function(e){q(e),s(e)};(0,F.useEffect)((function(){(0,Fe.isEqual)(n,H)||(q(n),A.setFieldsValue(n))}),[n]);return k().createElement("div",{className:"bill-finder-setting",key:a},k().createElement("div",{className:"setting-form"},k().createElement(M.ConfigProvider,{value:{prefixCls:"kd"}},k().createElement(M.Form,{layout:"vertical",form:A,labelWidth:"100%",wrapperWidth:"100%",onValuesChange:function(e,t){}},k().createElement(M.Form.Item,{label:"规则名称",name:"ruleName",required:!0,validateTrigger:"onBlur",rules:[{required:!0,message:"请输入规则名称"},{type:"string",validator:function(e,t,n,r,o){return null!=t&&Qr()(t).call(t)?[]:[new Error("请输入规则名称")]}}]},k().createElement(M.Input,{type:"text",borderType:"bordered",size:"middle",placeholder:"请输入规则名称",maxLength:50,value:H.ruleName,onChange:function(e){return pe("ruleName",e.target.value)}})),k().createElement(M.Form.Item,{label:"查找方式",name:"valueType",rules:[{required:!0,message:"请输入规则名称",type:"number"}]},k().createElement(qn.Sectioner,{defaultValue:2,value:H.valueType,options:[{label:"通过筛选条件",value:2},{label:"通过关联表单",value:3}],onChange:function(e){return pe("valueType",e)}})),2===H.valueType&&k().createElement(k().Fragment,null,k().createElement(M.Form.Item,{label:"查找表单",name:"relationFormId",required:!0},k().createElement(qn.KDTreeSelect,{allowClear:!0,value:H.relationFormId||"",treeData:X,showTreeIcon:!0,treeIcon:function(e){return e.icon},onChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";(e=e||"")!==H.relationFormId&&(ve({relationFormId:e,filterInfos:[],sortInfos:[],valueType2Result:[]}),A.setFieldsValue({relationFormId:e,filterInfos:null,sortInfos:null,valueType2Result:null}))}})),k().createElement(M.Form.Item,{label:"配置筛选条件",name:"filterInfos",rules:[{type:"array",required:!0,message:"请配置筛选条件"}]},k().createElement(qn.FilterEditor,{id:"filter",ref:Y,valueRequired:!0,name:"配置筛选条件",tips:"",variablesTree:oe||[],listFilterConfig:$,onGetFieldRecords:de,fieldRecords:_,nameHidden:!0,style:{marginTop:"0px"},getVarSelectDisabled:kf,fieldData:{fieldType:"treeSelect",style:{width:"184px"}},filterFooterData:{listType:"tree",triggerText:"添加筛选条件",treeProps:{defaultExpandAll:!1}},value:H.filterInfos||[],refBillProps:Q,onChange:function(e){A.setFieldValue("filterInfos",e),pe("filterInfos",e)}})),k().createElement(M.Form.Item,{label:"配置排序条件",name:"sortInfos"},k().createElement(qn.OrderByEditor,{id:"filter",name:"配置排序条件",nameHidden:!0,tips:"",style:{marginTop:"0px"},treeData:ee||[],value:H.sortInfos||[],onChange:function(e){return pe("sortInfos",e)}})),k().createElement(M.Form.Item,{label:"查找数量",name:"valueType2Multi"},k().createElement(qn.Sectioner,{defaultValue:"0",value:H.valueType2Multi,options:Mf,onChange:function(e){ve({valueType2Multi:e,valueType2Result:[]}),A.setFieldsValue({valueType2Multi:e,valueType2Result:null})}})),"1"===H.valueType2Multi&&k().createElement(M.Form.Item,{label:"数量上限（最多1000条）",name:"valueType2Top",required:!0},k().createElement(M.InputNumber,{borderType:"bordered",value:H.valueType2Top,min:0,max:1e3,mustInScope:!0,decimalLength:0,onChange:function(e){var t;return pe("valueType2Top",(null===(t=e.target)||void 0===t?void 0:t.value)||"")}})),k().createElement(M.Form.Item,{label:"查找到记录后",name:"valueType2Result",rules:Rf},k().createElement(Ef,{prefixCls:m,isMultiMode:fe,selBillValue:H.relationFormId||"",sourceFieldOptions:te,value:H.valueType2Result||[],onChange:function(e){return pe("valueType2Result",e)},curListFilterConfig:c}))),3===H.valueType&&k().createElement(k().Fragment,null,k().createElement(M.Form.Item,{label:"选择关联表单",name:"relationFieldId",required:!0},k().createElement(qn.KDTreeSelect,{className:"suffix-icon-no-animation",allowClear:!0,value:H.relationFieldId,treeData:ae,suffixIcon:k().createElement(M.Icon,{prefix:"designericon",type:"duixiangxuanze2"}),onChange:function(e){e!==H.relationFieldId&&(ve({relationFieldId:e,valueType3Result:[],valueType3FilterInfos:[],valueType3SortInfos:[]}),A.setFieldsValue({relationFieldId:e,valueType3Result:null,valueType3FilterInfos:null,valueType3SortInfos:null}))},showFullLabelTips:!0})),ne&&k().createElement(k().Fragment,null,k().createElement(M.Form.Item,{label:"配置筛选条件",name:"valueType3FilterInfos",rules:[{type:"array",required:!0,message:"请配置筛选条件"}]},k().createElement(qn.FilterEditor,{id:"filter",ref:W,valueRequired:!0,name:"配置筛选条件",tips:"",variablesTree:oe||[],listFilterConfig:$,onGetFieldRecords:de,fieldRecords:_,nameHidden:!0,style:{marginTop:"0px"},getVarSelectDisabled:kf,fieldData:{fieldType:"treeSelect",style:{width:"184px"}},filterFooterData:{listType:"tree",triggerText:"添加筛选条件",treeProps:{defaultExpandAll:!1}},value:H.valueType3FilterInfos||[],refBillProps:Q,onChange:function(e){A.setFieldValue("valueType3FilterInfos",e),pe("valueType3FilterInfos",e)}})),k().createElement(M.Form.Item,{label:"配置排序条件",name:"valueType3SortInfos"},k().createElement(qn.OrderByEditor,{id:"filter",name:"配置排序条件",nameHidden:!0,tips:"",style:{marginTop:"0px"},treeData:ee||[],value:H.valueType3SortInfos||[],onChange:function(e){return pe("valueType3SortInfos",e)}})),k().createElement(M.Form.Item,{label:"查找数量",name:"valueType3Multi"},k().createElement(qn.Sectioner,{defaultValue:"0",value:H.valueType3Multi,options:Mf,onChange:function(e){ve({valueType3Multi:e,valueType3Result:[]}),A.setFieldsValue({valueType3Multi:e,valueType3Result:null})}})),"1"===H.valueType3Multi&&k().createElement(M.Form.Item,{label:"数量上限（最多1000条）",name:"valueType3Top",required:!0},k().createElement(M.InputNumber,{borderType:"bordered",value:H.valueType3Top,min:0,max:1e3,mustInScope:!0,decimalLength:0,onChange:function(e){var t;return pe("valueType3Top",(null===(t=e.target)||void 0===t?void 0:t.value)||"")}}))),k().createElement(M.Form.Item,{label:"查找到记录后",name:"valueType3Result",rules:Rf},k().createElement(Ef,{prefixCls:m,isMultiMode:fe,selBillValue:le||"",relationFieldId:H.relationFieldId,sourceFieldOptions:re,value:H.valueType3Result||[],onChange:function(e){return pe("valueType3Result",e)},curListFilterConfig:c})))))),k().createElement("div",{className:"setting-footer"},k().createElement(M.Button,{size:"small",type:"primary",onClick:function(){var e,t=U.findControl(j),n=t._Type_,r=t.Key,i=lt(n)?C()(e="".concat(r,".")).call(e,o.Key):o.Key;new(jr())((function(e,t){A.validateFields().then((function(t){var n=Tl()(t);e(n)})).catch((function(e){return t(e)}))})).then((function(e){var t,n,r=e.ruleName,o=e.valueType,l=e.valueType2Result,c=e.valueType3Result,u=e.relationFormId,s=e.relationFieldId,f=e.filterInfos,d=e.valueType2Multi,v=e.valueType2Top,m=e.valueType3FilterInfos,g=e.valueType3SortInfos,h=e.valueType3Multi,y=e.valueType3Top,b=e.sortInfos||[],C=2===o&&(null===(t=Y.current)||void 0===t||null===(n=t.updateVerifyAndGetMsg)||void 0===n?void 0:n.call(t)),E={result:2===o?l:c,relationFormId:2===o?u:s};if(2===o)E.filterInfos=f,E.sortInfos=b,E.multi=d,"1"===d&&(E.top=v);else if(3===o){var I,x;if(ne)if(E.multi=h,E.filterInfos=m,E.sortInfos=g,"1"===h&&(E.top=y),(null===(I=W.current)||void 0===I||null===(x=I.updateVerifyAndGetMsg)||void 0===x?void 0:x.call(I)).length)return}var T={ruleName:Qr()(r).call(r),valueType:o,value:E},N={formId:V,fieldKey:i,ruleInfo:Ka()(T)};se&&(N.ruleId=a),C.length||p(N)})).catch((function(e){}))}},"保存")))};function Bf(e,t){var n=void 0!==ge()&&ye()(e)||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){var n;if(!e)return;if("string"==typeof e)return jf(e,t);var r=we()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return ve()(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jf(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function jf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Lf(e,t){var n=v()(e);if(i()){var r=i()(e);t&&(r=g()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Uf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lf(Object(n),!0).forEach((function(t){(0,d.c)(e,t,n[t])})):s()?Object.defineProperties(e,s()(n)):Lf(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}var Kf=function(e){var t=e.handleAdd;return k().createElement("div",{className:"rule-empty"},k().createElement("img",{src:Zu,alt:"暂无卡片",width:224,height:128}),k().createElement("div",{className:"empty-text"},"暂无规则，点击下方按钮添加"),k().createElement(M.Button,{type:"primary",icon:k().createElement(M.Icon,{prefix:"nocodeplatformicon",type:"zengjia-yuan"}),onClick:t},"添加规则"))},Vf={valueType:2,relationFormId:"",relationFieldId:"",filterInfos:[],sortInfos:[],valueType2Result:[],valueType3Result:[],valueType3FilterInfos:[],valueType3SortInfos:[],valueType2Multi:"0",valueType3Multi:"0",valueType2Top:"100",valueType3Top:"100"},zf=function(e){var t=e.ruleInfo,n=e.ruleId,r=t&&Qt(t)?JSON.parse(t):{},o=r.ruleName,a=r.valueType,i=r.value,l=void 0===i?{}:i,c=qf(e),u=c.affectfldkeys,s=c.depfldkeys,f=Uf(Uf({},Vf),{},{affectfldkeys:u,depfldkeys:s,ruleId:n,ruleName:o,valueType:a});if(2===a){var p=l.filterInfos,v=void 0===p?[]:p,m=l.sortInfos,g=void 0===m?[]:m,h=l.result,y=void 0===h?[]:h,b=l.relationFormId,C=void 0===b?"":b,E=l.multi,I=l.top;(0,_.c)(f,{filterInfos:v,sortInfos:g,valueType2Multi:E,valueType2Result:y,relationFormId:C}),I&&(0,_.c)(f,{valueType2Top:I})}else if(3===a){var x=l.result,T=void 0===x?[]:x,N=l.relationFormId,A=void 0===N?"":N;(0,_.c)(f,{valueType3Result:T,relationFieldId:A}),["filterInfos","sortInfos","multi","top"].forEach((function(e){var t=l[e];t&&(0,_.c)(f,(0,d.c)({},"valueType3".concat((0,Fe.upperFirst)(e)),t))}))}return f},Gf=(0,F.forwardRef)((function(e,t){var n=e.prefixCls,r=e.field,o=e.refreshEditorDisplay,a=(0,F.useContext)(ie),i=(a.invokeAction,a.getKdesignerApi),l=a.getRefBillData,c=a.getCompareTypes,u=a.getBizRules,s=a.setBizRules,d=a.curListTreeApi,p=r.Key,v=(0,F.useState)((function(){var e,t=u(),n=T()(t).call(t,zf);if((null==n?void 0:n.length)<=1)return n;var r,o=[],a=[],i=[],l=Bf(n);try{for(l.s();!(r=l.n()).done;){var c=r.value,s=c.depfldkeys,f=c.affectfldkeys;w()(s).call(s,p)&&w()(f).call(f,p)?o.push(c):w()(s).call(s,p)||w()(f).call(f,p)?a.push(c):i.push(c)}}catch(e){l.e(e)}finally{l.f()}return C()(e=[]).call(e,o,a,i)})),m=(0,f.c)(v,2),h=m[0],y=m[1],b=(0,F.useState)((function(){var e;if(h.length)return null===(e=h[0])||void 0===e?void 0:e.ruleId})),E=(0,f.c)(b,2),I=E[0],x=E[1],N=i().data.getRootId(),A=c(),S=bc({api:d,parser:function(e){return nn(e,e,A)}}),D=bc({api:d,parser:function(e){return nn(e,e,A,4)}}),P=(0,F.useCallback)((function(){null==h||h.length;var e="new_rule_".concat(sn()),t=Uf({ruleId:e,ruleName:"未命名规则",depfldkeys:"",affectfldkeys:""},Vf);y(h?C()(h).call(h,t):[t]),x(e)}),[h]),R=function(e){var t=function(e){var t=(null==h?void 0:Ur()(h).call(h,(function(t){return t.ruleId===e})))||0,n=I;if(I===e){var r=t>0?h[t-1]:void 0,o=h[t+1];r?n=r.ruleId:o&&(n=o.ruleId)}return n}(e);x(t),y((function(t){return null==t?void 0:g()(t).call(t,(function(t){return t.ruleId!==e}))})),O(e)},_=((0,F.useCallback)((function(e){y(T()(e).call(e,zf)),e.length&&x(e[0].ruleId)}),[]),function(e){y((function(t){return null==t?void 0:T()(t).call(t,(function(t){return t.ruleId===I?Uf(Uf({},t),e):t}))}))}),O=function(e){var t=u();s(null==t?void 0:g()(t).call(t,(function(t){return t.ruleId!==e}))),o()},B=(0,F.useMemo)((function(){return l()}),[l]);(0,F.useImperativeHandle)(t,(function(){return{getRules:function(){return null==h?void 0:T()(h).call(h,(function(e){var t="null"===e.depfldkeys?"":e.depfldkeys,n="null"===e.affectfldkeys?"":e.affectfldkeys;return Uf(Uf({},e),{},{depfldkeys:t,affectfldkeys:n})}))}}}),[h]);var j=(0,F.useMemo)((function(){return I?null==h?void 0:Ae()(h).call(h,(function(e){return e.ruleId===I})):{}}),[I,h]);return h?h.length?k().createElement("div",{className:"".concat(n,"-main")},k().createElement("div",{className:"left-area"},k().createElement("div",{className:"rule-list"},null==h?void 0:T()(h).call(h,(function(e){var t=e.ruleName,n=e.ruleId,r=e.depfldkeys,o=e.affectfldkeys;return k().createElement("div",{className:Vn()("rule-item",{"is-active":I===n}),key:n,onClick:function(){return x(n)}},k().createElement("div",{className:"rule-name"},t,k().createElement(M.Icon,{prefix:"ncicon",type:"jingshi",className:Vn()("warning-icon",{show:!1})})),k().createElement("div",{className:"tags"},w()(r).call(r,p)&&k().createElement("span",{className:"tag-item"},"触发"),w()(o).call(o,p)&&k().createElement("span",{className:"tag-item"},"受影响的")),k().createElement("div",{className:"delete-btn",onClick:function(e){return function(e,t,n){e.stopPropagation(),null===qn.WebMsg||void 0===qn.WebMsg||qn.WebMsg.showConfirmModal({title:"确定删除“".concat(t,"”吗？"),type:"delete",onAction:function(e){"ok"===e&&R(n)}})}(e,t,n)}},k().createElement(M.Icon,{prefix:"designericon",type:"shanchu"})))}))),k().createElement("div",{className:"add-rule",onClick:P},k().createElement("span",{className:"add-btn"},k().createElement(M.Icon,{prefix:"designericon",type:"zengjia-yuan"}),"新增规则"))),k().createElement("div",{className:"right-area"},k().createElement(Of,{value:j,refBillData:B,field:r,ruleId:I,compareTypesMap:A,formId:N,listFilterConfig:S,curFormFieldTree:D,onChange:_,onSave:function(e){var t=u(),n=Uf(Uf({},(null==t?void 0:Ae()(t).call(t,(function(e){return e.ruleId===I})))||{}),e),r=qf(n),a=r.affectfldkeys,i=r.depfldkeys;if(null!=I&&w()(I).call(I,"new_rule_")){var l=null==I?void 0:we()(I).call(I,9);n.ruleId=l,_({ruleId:l,affectfldkeys:a,depfldkeys:i}),x(l)}_({affectfldkeys:a,depfldkeys:i});var c=null!=I&&w()(I).call(I,"new_rule_")?C()(t).call(t,n):T()(t).call(t,(function(e){return e.ruleId===I?n:e}));s(c),o(),qn.WebMsg.showNotificationMsg({param:[{type:0,content:"保存成功。",duration:2e3}]})}}))):k().createElement("div",{className:"".concat(n,"-main")},k().createElement(Kf,{handleAdd:P})):null})),Hf=function(e){var t=e.prefixCls,n=e.title,r=e.visible,o=e.setVisible,a=e.field,i=e.listFilterConfig,l=e.refreshEditorDisplay,c=(0,F.useRef)(null),u=function(){o(!1)};return k().createElement(M.Modal,{mask:!0,visible:r,body:k().createElement(Gf,{ref:c,prefixCls:t,field:a,listFilterConfig:i,refreshEditorDisplay:l}),titleIcon:null,className:"".concat(t,"-modal"),footer:null,maskClosable:!1,width:960,height:644,keyboard:!1,title:k().createElement("span",{title:n},n),closable:!0,draggable:!1,destroyOnClose:!0,onCancel:u,onOk:u})},qf=function(e){var t,n=e.ruleInfo,r=(n&&Qt(n)?JSON.parse(n):{}).value,o=void 0===r?{}:r,a=T()(t=(null==o?void 0:o.result)||[]).call(t,(function(e){return e.targetField})).join(),i=null==n?void 0:n.match(/\${model\.[\w_]+}/g);return{affectfldkeys:a,depfldkeys:(null==i?void 0:T()(i).call(i,(function(e){return e.replace(/\${model\.([\w_]+)}/,"$1")})))||""}},Yf=function(e){var t=e.locked,n=e.field,r=n.Name,o=n.Key,a=n.ParentId,i=(0,F.useState)(!1),l=(0,f.c)(i,2),c=l[0],u=l[1],s=(0,F.useContext)(ie),d=(s.invokeAction,s.prefixCls),p=s.getKdesignerApi,v=(s.getDataRef,s.getBizRules),m=s.fetchListTree,g=p().data,h=(g.getRootId(),v()||[]),y=(0,F.useReducer)((function(e){return e+1}),0),b=(0,f.c)(y,2)[1],C=function(){var e=g.findControl(a);e._Type_,e.Key;m(),u(!0)},E=(0,F.useMemo)((function(){var e=h.reduce((function(e,t){var n=qf(t),r=n.affectfldkeys,a=n.depfldkeys;return null!=r&&w()(r).call(r,o)||null!=a&&w()(a).call(a,o)?e+1:e}),0);return 0!==e?"".concat(e,"条规则"):""}),[h,o]),I="".concat(d,"-billFinder");return k().createElement(k().Fragment,null,k().createElement(D.CustomInputTrigger,(0,_.c)({},e,{placeholder:"请选择",disabled:t,value:E,onClick:C,onInputClick:C})),k().createElement(Hf,{prefixCls:I,visible:c,setVisible:u,field:n,title:"".concat(r,"-查找表单记录"),refreshEditorDisplay:b}))},Wf=qn.Condition.constants,Qf=Wf.allFieldRegExp,Xf=Wf.allExpRegExp,Zf=Wf.expRegExp,Jf={valueType:1,value:""},$f=Ka()(Jf),ed={prefixCls:"kd"},td=function(e){var t,n=e.className,r=e.locked,o=e.Editor,a=e.Name,i=e.Tips,l=e.field,c=o.NameHidden,u=o.Required,s=o.Title,p=(0,F.useContext)(ie),v=p.invokeAction,m=p.getKdesignerApi,g=p.getExpressionData,h=p.getCompareTypes,y=p.curFormulaTreeApi,b=p.fetchListTree,E=p.setFormulaRules,I=p.getFormulaRules,x=l.ParentId,T=l.Name,N=l.Key,S=(0,F.useState)(!1),w=(0,f.c)(S,2),P=w[0],R=w[1],O=m(),B=O.data,j=(O.meta,B.findControl(x)),L=j._Type_,U=j.Key,K=lt(L)?C()(t="".concat(U,".")).call(t,N):N,V=B.getRootId(),z=I(),G=(0,F.useState)((null==z?void 0:z[K])||$f),H=(0,f.c)(G,2),q=H[0],Y=H[1],W=h(),Q=(0,F.useMemo)((function(){return g()}),[g]),X=(0,F.useMemo)((function(){return A()(Q.functionOperations)}),[Q]),Z=bc({api:y,parser:function(e){return nn(e,e,W)}}),J=(0,F.useMemo)((function(){var e=lt(L)?U:void 0;return ul({options:Z,currRefbillTableKey:e})}),[Z,V,U]);(0,F.useEffect)((function(){b("formula")}),[T]);var $=function(e){var t=Ka()(e),n=(0,_.c)(z||{},(0,d.c)({},K,t));Y(t),E(n)},ee=(0,F.useMemo)((function(){return e=function(e){try{if(Qt(e)){var t=JSON.parse(e);return(null==t?void 0:t.value)||""}return""}catch(e){}}(q),t=e?e.split("@@"):["","",null],[(n=(0,f.c)(t,3))[1],n[2]];var e,t,n}),[q]),te=(0,F.useCallback)((function(){R(!0)}),[R]),ne=(0,F.useCallback)((function(){R(!1)}),[R]),re=(0,F.useCallback)((function(){te()}),[te]);return k().createElement(k().Fragment,null,k().createElement(D.NameTipWrapper,{nameHidden:c,className:n,name:a,tips:i,required:u,title:s}),k().createElement(M.ConfigProvider,{value:ed},k().createElement(qn.InputCombo,{fieldType:"formula",placeholder:"请输入",disabled:r,onClick:re,value:ee[0],expressionData:Q.functionTypes,fieldData:J,onClear:function(e){e.stopPropagation(),v("deleteBizRule",[{formId:V,fieldKey:K}],[]),$(Jf)},lang:Number(ee[1]||1),readOnly:!0,autofocus:!1})),k().createElement(M.ConfigProvider,{value:ed},P&&k().createElement(qn.Condition,{value:ee[0],language:Number(ee[1]||1),modalTitle:"编辑运算公式",editorTitle:l.Name,visible:P,editorPlaceholder:"请编辑运算公式",fieldData:J,fieldTitle:"表单内容",expressionData:Q.functionTypes,operations:X,defaultExpandAll:!1,onClose:ne,onConfirm:function(e,t){e=function(e,t){var n,r;if(!e)return"";var o=(e=e.replace(/）/g,")").replace(/（/g,"(").replace(/“/g,'"').replace(/”/g,'"').replace(/‘/g,"'").replace(/’/g,"'")).replace(/ {{/g,"{{").replace(/}} /g,"}}").replace(Qf,"$1");return o=o.replace(Xf,(function(e){var t;return((null===(t=e.match(Zf))||void 0===t?void 0:t[1])||"").replace("YMDDATE","DATE")})),C()(n=C()(r="".concat(o,"@@")).call(r,e,"@@")).call(n,t?1:0)}(e,t),$({valueType:1,value:e}),R(!1),qn.WebMsg.showNotificationMsg({param:[{type:0,content:"保存成功。",duration:2e3}]})}})))},nd=k().memo((function(e){var t,n=e.data,r=e.iconIndex,o=e.onSelect,a=e.isLineIconStyle,i=e.prefixClass,l=(0,F.useState)(0),c=(0,f.c)(l,2),u=c[0],s=c[1],p=(0,F.useRef)(null);(0,F.useEffect)((function(){s(r)}),[r]);var v=(0,F.useCallback)((function(e){s(e),null==o||o(e)}),[o,n]);return(0,F.useLayoutEffect)((function(){var e,t,n=null===(e=p.current)||void 0===e?void 0:e.getElementsByTagName("path");n&&(Array.prototype.forEach.call(n,(function(e){return e.removeAttribute("style")})),null===(t=n[u])||void 0===t||t.setAttribute("style","fill:#212121"))}),[u,p.current]),k().createElement("div",{className:"".concat(i,"-popmain")},k().createElement("div",{ref:p,className:"".concat(i,"-icons")},null==n?void 0:T()(t=n.svgs).call(t,(function(e,t){var n=u===t?"#212121":"";return k().createElement("div",{key:t,onClick:function(){return v(t)},className:Vn()((0,d.c)((0,d.c)({},"".concat(i,"-iconf"),a),"".concat(i,"-iconf-active"),a&&u===t)),style:{color:n},dangerouslySetInnerHTML:{__html:e.content}})}))))})),rd=(0,F.memo)((function(e){var t=e.handleChange,n=e.className,r=e.editor,o=e.Name,a=e.Tips,i=e.value,l=r.NameHidden,c=r.Required,u=(0,F.useContext)(ie),s=u.invokeAction,d=u.prefixCls,p=(u.getKdesignerApi,"".concat(d,"-iconPicker-editor")),v=(0,F.useState)({iconIndex:void 0}),m=(0,f.c)(v,2),g=m[0],h=m[1],y=(0,F.useRef)(null),b=(0,F.useState)({}),E=(0,f.c)(b,2),I=E[0],x=E[1];(0,F.useEffect)((function(){s("getSvgLine",[])}),[]);var T=(0,F.useCallback)((function(e){var t,n;x(null==e||null===(t=e.data)||void 0===t?void 0:t.row),w(i,null==e||null===(n=e.data)||void 0===n?void 0:n.row)}),[]);(0,F.useEffect)((function(){return D.eventBus.on(vr,T),function(){D.eventBus.off(vr,T)}}),[]);var N=(0,F.useMemo)((function(){return{name:o,className:n,nameHidden:l,tips:a,required:c}}),[o,n,l,a,c]),A=function(e){var n,r;h({iconIndex:e});var o=encodeURIComponent("#666666"),a=null==I||null===(n=I.svgs)||void 0===n?void 0:n[e].label,i=C()(r="nocode/v2/nocode_sys/common/svgs/create_svg_line?color=".concat(o,"&svg=")).call(r,a);null==t||t(i)},S=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href).split("?")[1],n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),r=null==t?void 0:t.match(n);return null!=r?unescape(r[2]):null},w=(0,F.useCallback)((function(e,t){var n,r=S("svg",e),o=r&&"undefined"!==r?null==t||null===(n=t.svgs)||void 0===n?void 0:Ur()(n).call(n,(function(e){return e.label===r})):0;h({iconIndex:o})}),[]);(0,F.useLayoutEffect)((function(){var e;if(I&&y.current){null===(e=y.current.getElementsByTagName("path"))||void 0===e||null===(e=e[0])||void 0===e||e.setAttribute("style","fill:".concat("#212121"," "))}}),[I,g,y.current]);var P=(0,F.useMemo)((function(){return k().createElement(nd,{data:I,iconIndex:g.iconIndex,onSelect:A,prefixClass:p,isLineIconStyle:!0})}),[I,g]),R=(0,F.useCallback)((function(e){if(e)w(i,I);else{var n,r,o=encodeURIComponent("#666666"),a=null==I||null===(n=I.svgs)||void 0===n?void 0:n[g.iconIndex].label,l=C()(r="nocode/v2/nocode_sys/common/svgs/create_svg_line?color=".concat(o,"&svg=")).call(r,a);null==t||t(l)}}),[I,g,t]),_=(0,F.useMemo)((function(){var e,t,n=S("svg",i),r=n&&"undefined"!==n?null==I||null===(e=I.svgs)||void 0===e?void 0:Ur()(e).call(e,(function(e){return e.label===n})):0;return k().createElement("div",{ref:y,className:"".concat(p,"-avatar"),dangerouslySetInnerHTML:{__html:(null==I||null===(t=I.svgs)||void 0===t||null===(t=t[r])||void 0===t?void 0:t.content)||""}})}),[I,g,i]);return k().createElement("div",{className:p},k().createElement("div",{className:"".concat(p,"-nav")},k().createElement(D.NameTipWrapper,N)),k().createElement("div",null,k().createElement(M.ConfigProvider,{value:{prefixCls:"kd"}},k().createElement(M.Tooltip,{placement:"bottomLeft",arrow:!1,popperClassName:"".concat(p,"-pop"),gap:0,tip:P,trigger:"click",onVisibleChange:R},_))))}));rd.displayName="IconPickerEditor";var od=(0,D.ErrorBoundaryWrap)(rd,"IconPickerEditor"),ad=(0,F.memo)((function(e){e.handleChange;var t=e.className,n=e.editor,r=(e.locked,e.Name),o=e.Tips,a=e.field,i=(e.id,e.propName,e.rootId),l=n.NameHidden,c=n.Required,u=n.Title,s=(0,F.useContext)(ie),d=s.invokeAction,p=s.getHideFieldRef,v=(0,F.useContext)(D.GlobalConfigContext).showMessage,m=(0,F.useState)(""),g=(0,f.c)(m,2),h=g[0],y=g[1],b=(0,F.useState)([]),C=(0,f.c)(b,2),E=C[0],I=C[1],x=(0,F.useState)({}),N=(0,f.c)(x,2),A=N[0],S=N[1],w=a.BillEntityIdEx,P=a.Key,M=a._Type_,R=a.RefBillId,_="".concat(t,"-association"),O=(0,F.useMemo)((function(){var e,t,n;R&&lt(M)&&(t=null===(n=p())||void 0===n?void 0:n[R]);return(null===(e=t)||void 0===e?void 0:e.Key)||P}),[P,M,R]),B=(0,F.useCallback)((function(e){return T()(e).call(e,(function(e){var t=e||{};return{value:t.id,label:t.caption}}))}),[]),j=(0,F.useCallback)((function(e){var t=e||{},n=t.selected,r=t.data,o=B(r||[]);I(o||[]),y(n||"")}),[B]),L=(0,F.useCallback)((function(e,t){d(yr,[i,O,w,e||""]),y(e)}),[i,O,w,d,y]),U=(0,F.useCallback)((function(e){"failure"===(null==e?void 0:e.state)&&(v((null==e?void 0:e.message)||"双向关联失败","error"),y(""))}),[]);(0,F.useEffect)((function(){i&&O&&w&&d("getAvailableAssociationFields",[i,O,w])}),[w,O,i,d]),(0,F.useEffect)((function(){return D.eventBus.on(hr,j),D.eventBus.on(yr,U),D.eventBus.on(mr,S),function(){D.eventBus.off(hr,j),D.eventBus.off(yr,U),D.eventBus.off(mr,S)}}),[]);(0,F.useMemo)((function(){var e=null==A?void 0:A[a.Key];return!w||0===(null==e?void 0:e.length)}),[w,A,a]);return k().createElement("div",{className:"".concat(_,"-box")},k().createElement(D.NameTipWrapper,{nameHidden:l,className:t,name:r,tips:o,required:c,title:u}),k().createElement(qn.Select,{allowClear:!0,value:h,disabled:!1,options:E,onChange:L,placeholder:""}))}));ad.displayName="AssociationEditor";var id=ad,ld=qn.Condition.constants,cd=ld.allFieldRegExp,ud=ld.allExpRegExp,sd=ld.expRegExp,fd={prefixCls:"kd"},dd=function(e){var t=e.className,n=e.locked,r=e.Editor,o=e.Name,a=e.Tips,i=e.field,l=e.handleChange,c=e.value,u=r.NameHidden,s=r.Required,d=r.Title,p=r.HideFunc,v=(r.Type,(0,F.useContext)(ie)),m=v.getKdesignerApi,g=v.getExpressionData,h=v.getCompareTypes,y=v.curFormulaTreeApi,b=v.fetchListTree,E=i.ParentId,I=i.Name,x=(0,F.useState)(!1),T=(0,f.c)(x,2),N=T[0],S=T[1],w=m().data,P=w.findControl(E),R=P._Type_,_=P.Key,O=w.getRootId(),B=h(),j=(0,F.useMemo)((function(){return g()}),[g]),L=(0,F.useMemo)((function(){return A()(j.functionOperations)}),[j]),U=bc({api:y,parser:function(e){return nn(e,e,B)}}),K=(0,F.useMemo)((function(){var e=lt(R)?_:void 0;return ul({options:U,currRefbillTableKey:e,needFormatKey:!0})}),[U,O,_]);(0,F.useEffect)((function(){b("formula")}),[I]);var V=(0,F.useMemo)((function(){return t=(e=c)?e.split("@@"):["","",null],[(n=(0,f.c)(t,3))[1],n[2]];var e,t,n}),[c]),z=(0,F.useCallback)((function(){S(!0)}),[S]),G=(0,F.useCallback)((function(){S(!1)}),[S]),H=(0,F.useCallback)((function(){z()}),[z]);return k().createElement(k().Fragment,null,k().createElement(D.NameTipWrapper,{nameHidden:u,className:t,name:o,tips:a,required:s,title:d}),k().createElement(M.ConfigProvider,{value:fd},k().createElement(qn.InputCombo,{fieldType:"formula",placeholder:"请输入",disabled:n,onClick:H,value:V[0],expressionData:j.functionTypes,fieldData:K,onClear:function(e){e.stopPropagation(),l("")},lang:Number(V[1]||1),readOnly:!0,autofocus:!1})),k().createElement(M.ConfigProvider,{value:fd},N&&k().createElement(qn.Condition,{value:V[0],language:Number(V[1]||1),modalTitle:"编辑目标链接",editorTitle:"目标链接",visible:N,hideFunc:p,editorPlaceholder:"请输入完整链接，以 http:// 或 https:// 开头",fieldData:K,fieldTitle:"表单内容",expressionData:j.functionTypes,operations:L,defaultExpandAll:!1,onClose:G,onConfirm:function(e,t){e=function(e,t){var n,r;if(!e)return"";var o=(e=e.replace(/）/g,")").replace(/（/g,"(").replace(/“/g,'"').replace(/”/g,'"').replace(/‘/g,"'").replace(/’/g,"'")).replace(/ {{/g,"{{").replace(/}} /g,"}}").replace(cd,"$1");return o=o.replace(ud,(function(e){var t;return((null===(t=e.match(sd))||void 0===t?void 0:t[1])||"").replace("YMDDATE","DATE")})),C()(n=C()(r="".concat(o,"@@")).call(r,e,"@@")).call(n,t?1:0)}(e,t),l(e),S(!1)}})))},pd=function(){var e=[];return[[gc,"switchtabsel",""],[vo,"customoption",""],[Bc,"selectoption",""],[Hc,"datascope",""],[Ys,"Tab",""],[eu,"picturedef",""],[Os,"refbilltype",""],[Zc,"refbillprops",""],[su,"dataFill",""],[gu,"inputrange",""],[hu,"DateRange",""],[bu,"date",""],[wu,"decimaldef",""],[Iu,"attachdef",""],[Pu,"backcolor"],[Bu,"backimage"],[us,"displayrule"],[Yf,"bizrule"],[td,"formularule"],[dd,"expression"],[ss,"textdef",""],[ms,"triggerprocess"],[Fs,"enablefilter"],[mf,"inputContent"],[Ps,"richtextdef"],[js,"margin"],[zs,"inputForm"],[qs,"mulrefbilldef"],[od,"iconPicker",""],[id,"association"]].forEach((function(t){var n=(0,f.c)(t,3),r=n[0],o=n[1],a=n[2];e.push([o,r,a])})),e};function vd(e,t){var n=v()(e);if(i()){var r=i()(e);t&&(r=g()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function md(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vd(Object(n),!0).forEach((function(t){(0,d.c)(e,t,n[t])})):s()?Object.defineProperties(e,s()(n)):vd(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}var gd={BizappId:"bizappId",Name:"name",Id:"id",appNum:"formId",Key:"key",EntityId:"rootEntityId"},hd=function(e,t){v()(t).forEach((function(n){Or()(e,n)||(0,_.c)(e,(0,d.c)({},n,t[n]))}))},yd=function(e){return(0,yt.produce)(e,(function(e){e.forEach((function(t){(function(e){return e._Type_===Ue&&!e.GroupParentId&&!e.GroupIndex&&!e.isTab})(t)&&(t.GroupParentId=(0,D.createUUid)(),t.GroupIndex=0,g()(e).call(e,(function(e){return e.ParentId===t.Id&&function(e){return e._Type_===Ue&&!e.GroupParentId&&!e.GroupIndex&&e.isTab}(e)})).forEach((function(e,n){e.GroupParentId=t.GroupParentId,e.GroupIndex=n+1,e.ParentId=t.ParentId})))}))}))},bd=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(0,Fe.cloneDeep)(e),r=n.formmeta,o=n.entitymeta,a={},i={},l=r.Items[0].Id,c=[l],u=new(Me()),s={},p=I()(t).reduce((function(e,t){return md(md({},e),(n=t,a=(0,f.c)(n,2),i=a[0],l=a[1],c=null==l||null===(r=l.formmeta)||void 0===r||null===(r=r.Items)||void 0===r?void 0:r.reduce((function(e,t){return No(No({},e),{},(0,d.c)({},t.Id,t))}),{}),null==l||null===(o=l.entitymeta)||void 0===o||null===(o=o.Items)||void 0===o?void 0:o.reduce((function(e,t){var n;return No(No({},e),{},(0,d.c)({},C()(n="".concat(t.Key,"_")).call(n,i),Po((null==c?void 0:c[t.Id])||{},t)))}),{})));var n,r,o,a,i,l,c}),{});v()(r).forEach((function(e){r[e]&&gd[e]&&(a[gd[e]]=r[e])}));var m=r.Items.reduce((function(e,t){var n,r=t||{},o=r._Type_,a=r.Id,i=r.FieldType;return Vt(o)&&c.push(a),it(i)||lt(i)?C()(n=[]).call(n,(0,R.c)(e),[a]):e}),[]),h=o.Items.reduce((function(e,t){var n,r=t||{},o=r._Type_,a=r.Id,i=r.SourceForm,f=r.ParentId||l;return s[a]=t,lt(o)&&"2"===i&&u.set(a,t),lt(o)&&wo(t)&&w()(c).call(c,f)?C()(n=[]).call(n,(0,R.c)(e),[t.Id]):e}),[]);return a[G]=yd(r.Items.reduce((function(e,t){var n=md({},t);if(null!=n&&n.ParentId){var a=n.FieldId||n.EntryId||n.CardEntryId,f=null==s?void 0:s[a];f&&(n.EntityData=f,n.ApType=n._Type_,n._Type_=f._Type_,n.FieldType=f._Type_,hd(n,f))}else{var d,v=Ae()(d=o.Items).call(d,(function(e){return(null==e?void 0:e.Id)===n.Id}));v&&(n.EntityData=v,hd(n,v))}var y=n.ParentId,b=n.Key,E=n.EntityData;n._isEntryField_&&delete n._isEntryField_,w()(m).call(m,y)&&(n._isEntryField_=!0);var I,x=n.ParentId||l;if(w()(c).call(c,x)&&wo(n)||w()(h).call(h,x))return i[n.Id]=n,e;if(u.has(y)){var T,N,A=b.toLowerCase().replace("_".concat(y.toLowerCase()),"")+"_"+u.get(y).BillEntityIdEx,S=p[A];if(S){var F,k=[{},{}];Xe.forEach((function(e){n[e]&&(k[0][e]=n[e]),E[e]&&(k[1][e]=E[e])}));var D=_o(S,y,k);return delete(t=md({},D)).EntityData,s[D.Id]=D.EntityData,C()(F=[]).call(F,(0,R.c)(e),[D])}return o[G]=g()(T=o[G]).call(T,(function(e){return e.Id!==n.Id})),r[G]=g()(N=r[G]).call(N,(function(e){return e.Id!==n.Id})),e}return C()(I=[]).call(I,(0,R.c)(e),[n])}),[])),o.Items=A()(s),[a,i,n]},Cd=function(e,t){var n,r,o=e||{},a=o._Type_,i=o.EntityData,l=void 0===i?{}:i,c=o.ApType,u=md({},e);c&&(u._Type_=c);var s=C()(n=g()(r=v()(l)).call(r,(function(e){return t.getControlMetaProperty(a,e).Tag===Oe}))).call(n,["EntityData","ApType","_isEntryField_"]);return s.forEach((function(e){delete u[e]})),u},Ed=function e(t,n){return t.reduce((function(t,r){var o,a=r.Id;return n[a]?C()(t).apply(t,C()(o=[r]).call(o,(0,R.c)(e(n[a],n)))):C()(t).call(t,r)}),[])},Id=function(e,t,n,r){var o=n.meta,a=e.entitymeta,i=e.formmeta,l=t.Items,c=void 0===l?[]:l,u=c.reduce((function(e,t){var n=t.ParentId;return void 0!==n&&(void 0===e[n]?e[n]=[t]:e[n].push(t)),e}),{}),s=Ed([c[0]],u),f=s.reduce((function(e,t){var n=t.Key,o=t.EntityData;t.Id;if(o){var a,i,l=md(md({},o),{},{Key:n});if(lt(l._Type_)){var c,u,s,f=md({},null===(c=r[l.RefBillId])||void 0===c?void 0:c.EntityData);return f.Key=null===(u=r[l.RefBillId])||void 0===u?void 0:u.Key,C()(s=[]).call(s,(0,R.c)(e),[l,f])}var d=null==r||null===(a=r[null==l?void 0:l.RefTableId])||void 0===a?void 0:a.EntityData;if(et(l._Type_)&&null!=l&&l.RefTableId&&d){var p,v=A()(r).reduce((function(e,t){var n;return t.ParentId===(null==l?void 0:l.RefTableId)?C()(n=[]).call(n,(0,R.c)(e),[t.EntityData]):e}),[]);return C()(p=[]).call(p,(0,R.c)(e),[l,d],(0,R.c)(v))}return C()(i=[]).call(i,(0,R.c)(e),[l])}return e}),[]),d=s.reduce((function(e,t){var n,a=t||{},i=a.RefTableId,l=a.FieldType,c=a.RefBillId,u=Cd(t,o);if(lt(l)){var s,f=Cd(r[c],o);return C()(s=[]).call(s,(0,R.c)(e),[u,f])}var d=null==r?void 0:r[i];if(et(l)&&i&&d){var p,v=A()(r).reduce((function(e,t){var n;return t.ParentId===i?C()(n=[]).call(n,(0,R.c)(e),[Cd(t,o)]):e}),[]);return C()(p=[]).call(p,(0,R.c)(e),[u,Cd(d,o)],(0,R.c)(v))}return C()(n=[]).call(n,(0,R.c)(e),[u])}),[]),p=md(md({},i),{},{Items:d}),v=md(md({},a),{},{Items:f});return(0,_.c)(e,{formmeta:p,entitymeta:v})},xd=function(e){var t=e.kdesignerApi,n=e.keywordMapping;return function(e,r,o,a){var i=t.current.meta,l="string"==typeof r?r:r[n.type],c=i.getControlMeta(l)||{},u=c.BaseType,s=c.ApType,f=null==s?void 0:s.Default,d="string"==typeof e?e:e[n.type],p=i.getControlMeta(d)||{},v=p.BaseType,m=p.ApType,g=p.Id,h=m?(null==m?void 0:m[u])||(null==m?void 0:m.Default):g;if(!a.IsContainer)return!1;var y=function(e){var t=i.getControlMeta(e).NotAccept;if(t){var n=t.Ids;return null==n?void 0:w()(n).call(n,h)}}(l);if(y)return{message:"控件类型不符合，不能添加。",success:!1};if(!(y=function(e){var t=i.getControlMeta(e).Accept;if(!t)return!0;if(t){var n=t.Basetypes,r=t.Ids;return(null==r?void 0:w()(r).call(r,h))&&(null==n?void 0:w()(n).call(n,v))}}(l)))return{message:"控件类型不符合，不能添加。",success:!1};return!!(y=function(e){var t=i.getControlMeta(e).AcceptParent;if(!t)return!0;if(t){var n=t.Basetypes,r=t.Ids;return(null==r?void 0:w()(r).call(r,f))||(null==n?void 0:w()(n).call(n,u))}}(d))||{message:"父容器类型不符合,不能添加。",success:!1}}},Td=["property"],Nd={},Ad=(0,F.memo)((function(e){var t=e.tabName,n=e.tabKey;if(!w()(Td).call(Td,n))return t;var r=(0,F.useContext)(ie),o=r.getKdesignerApi,a=r.prefixCls,i=(0,F.useMemo)((function(){return o()}),[]),l=i.error,c=i.meta,u=i.data,s=i.selection,d=l.getError(),p=s.getSelection(),m=(0,F.useState)(!1),g=(0,f.c)(m,2),h=g[0],y=g[1],b=(0,F.useState)([]),C=(0,f.c)(b,2),E=C[0],I=C[1];(0,D.useErrorChangeForceUpdateEffect)(i),(0,D.useSelectionChangeForceUpdateEffect)(i),(0,F.useEffect)((function(){var e;if((null==p?void 0:p.length)>0&&(null===(e=v()(d))||void 0===e?void 0:e.length)>0){var t=p.some((function(e){var t=u.findControl(e)._Type_,n=c.getControlMetaPropertyGroups(t);if(d[e]){var r=v()(d[e]);if(I(r),r.length>0){var o=Nd[t];o||(o=[],n.forEach((function(e){null!=e&&e.Nodes&&(null==e||e.Nodes.forEach((function(e){o.push(e.Id)})))})),Nd[t]=o);var a=r[0];return w()(o).call(o,a)}}return!1}));y(t)}else h&&y(!1)}),[p,d]);var x=(0,F.useMemo)((function(){return 0===(null==E?void 0:E.length)?"":"存在有".concat(null==E?void 0:E.length,"条错误，请修复后再发布！")}),[E]);return k().createElement("div",{className:"".concat(a,"_customtab")},k().createElement("span",{className:"".concat(a,"_customtab_name")},t),h&&k().createElement(M.Tooltip,{tip:x},k().createElement(Pi,{className:"".concat(a,"_customtab_icon")})))}));Ad.displayName="CustomTab";var Sd=Ad;r(3192);function wd(e,t){var n=v()(e);if(i()){var r=i()(e);t&&(r=g()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wd(Object(n),!0).forEach((function(t){(0,d.c)(e,t,n[t])})):s()?Object.defineProperties(e,s()(n)):wd(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}var kd={appFormList:[],innerForm:[]},Dd=(0,yt.produce)((function(e,t){var n,r,o=t.key,a=t.payload,i=(null==e?void 0:e[null==a?void 0:a.form])||{},l=i.data,c=void 0===l?{}:l,u=i.ids,s=void 0===u?[]:u,f=c||{},d=f.entitymeta,p=void 0===d?{Items:[]}:d,v=f.formmeta,m=void 0===v?{Items:[]}:v;switch(o){case Kr:for(var h in a){var y;if(Object.prototype.hasOwnProperty.call(a,h))e[h]={data:a[h],ids:T()(y=a[h].entitymeta.Items).call(y,(function(e){return e.Id}))}}break;case Vr:e[a.form]=a.info;break;case Gr:if(null==s||!w()(s).call(s,a.data.Id)){var b,C;a.data.ParentId=w()(b=a.form).call(b,"_table")?a.data.ParentId:a.form,a.data.EntityData.ParentId=w()(C=a.form).call(C,"_table")?a.data.EntityData.ParentId:a.form;var E=Fd({},a.data);delete E.EntityData,null!=e&&e[null==a?void 0:a.form]?(p.Items.push(a.data.EntityData),m.Items.push(E)):e[a.form]={data:{entitymeta:{Items:[a.data.EntityData]},formmeta:{Items:[E]}},ids:[]}}break;case Hr:p.Items=g()(n=p.Items).call(n,(function(e){return e.Id!==a.id})),m.Items=g()(r=m.Items).call(r,(function(e){return e.Id!==a.id}));break;case zr:p.Items.some((function(e){return e.Id===a.id&&(e=(0,_.c)(e,a.data),!0)})),m.Items.some((function(e){return e.Id===a.id&&(e=(0,_.c)(e,a.data),!0)}));break;case qr:e.appFormList=a.data,e.innerForm=a.innerForm;break;case"COPY_FORM_DATA":e[a.form]=Fd({},e[a.source])}}));function Pd(){var e=[],t=[],n=1,r=0,o={setData:function(e){if(e){var n=t;t=e,o.fireEvent({value:t,oldValue:n})}},getData:function(){return t},getDataVersion:function(){return r},setDataVersion:function(e){r=e},increaseVersion:function(){n++},getVersion:function(){return n},isVersionEqual:function(){return n===r},addDataChangeListener:function(t){return e.push(t),function(){e=g()(e).call(e,(function(e){return e!==t}))}},fireEvent:function(t){e.forEach((function(e){try{e(t)}catch(e){}}))}};return o}function Md(e,t){var n=v()(e);if(i()){var r=i()(e);t&&(r=g()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Md(Object(n),!0).forEach((function(t){(0,d.c)(e,t,n[t])})):s()?Object.defineProperties(e,s()(n)):Md(Object(n)).forEach((function(t){Object.defineProperty(e,t,c()(n,t))}))}return e}(0,yt.enableES5)(),D.ControlView.tabName="内容";var _d={id:"Id",type:"_Type_",name:"Name",key:"Key",parentId:"ParentId",items:"Items",fieldType:"FieldType",EntityData:"EntityData"},Od=function(e,t){return Rd(Rd({},e),t)},Bd=function e(t){return t.reduce((function(t,n){var r=n.selectable,o=n.children,a=n.value,i=n.label;return!1!==r&&(t[a]=i),null!=o&&o.length?Rd(Rd({},t),e(o)):t}),{})},jd=(0,F.memo)((0,F.forwardRef)((function(e,t){var n=e.data,r=void 0===n?{}:n,a=e.meta,i=void 0===a?{}:a,l=e.onData,c=e.settingData,u=e.showMessage,s=void 0===u?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";M.Message[t]({content:e,closable:"error"===t,duration:2e3,style:{background:"#fff",borderColor:"#fff",color:"#212121",boxShadow:"0 4px 10px 1px rgba(0,0,0,0.12)"}})}:u,p=(e.handleCustomInputEditor,e.invokeAction),m=void 0===p?function(e,t,n){}:p,h=e.enforceInvokeAction,b=void 0===h?function(e,t,n){}:h,E=e.baseHooks,x=e.baseUrl,N=e.onApi,S=e.onDownLoad,P=e.addControlAction,R=e.getControlText,_=e.batchInvoke,O=e.floatMenu,B=e.defaultFieldStatusMap,j=void 0===B?{}:B,L=e.fieldStatusSettingMode,U=void 0!==L&&L,K=e.fieldStatusSettingOptions,V=e.expression,z=void 0===V?[]:V,G=e.refBillData,H=void 0===G?[]:G,q=e.tableMetas,Y=void 0===q?[]:q,W=e.compareTypes,Q=void 0===W?{}:W,X=e.ncpToolKits,Z=void 0===X?{}:X,J=(0,F.useState)(!0),$=(0,f.c)(J,2),ee=$[0],te=$[1],ne=(0,F.useRef)(null),re=(0,F.useRef)(r),oe=(0,F.useRef)({}),ae=(0,F.useRef)([]),le=(0,F.useReducer)(Dd,kd),ce=(0,f.c)(le,2),ue=ce[0],se=ce[1],fe=(0,F.useRef)({}),de=(0,F.useRef)(null),pe=(0,F.useRef)(Lt(r,i)),ve=(0,F.useRef)(function(e){var t,n=e.formmeta,r=null==n||null===(t=n.Items)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.BillNoSetting;return r?JSON.parse(r):{}}(r)),me=(0,F.useRef)(Ut(r,"displayRules")||[]),ge=(0,F.useRef)(Ut(r,"bizRules")||[]),he=(0,F.useRef)(Ut(r,"formulaRules")||{}),ye=(0,F.useReducer)(Od,j||{}),be=(0,f.c)(ye,2),Ce=be[0],Ee=be[1],Ie=(0,F.useRef)(Pd()),xe=(0,F.useRef)(Pd()),Te=(0,F.useCallback)((function(e){return e}),[]),Ne=(0,F.useMemo)((function(){return function(e,t){return(0,D.adaptorMeta)(e,(0,D.mergeTransformKeyMap)(D.transformKeyMap,(0,d.c)({},"items",["Enum"])),t)}(i,r.formmeta)}),[]),Ae=(0,F.useMemo)((function(){var e=Y.reduce((function(e,t){return null!=t&&t.billEntityIdEx?Rd(Rd({},e),{},(0,d.c)({},t.billEntityIdEx,t.data)):e}),{}),t=bd(r,(0,Fe.cloneDeep)(e)),n=(0,f.c)(t,3),o=n[0],a=n[1],i=n[2];return oe.current=a,re.current=i,null==l||l(i),v()(e).length&&se({key:Kr,payload:e}),o}),[r,Y]);(0,F.useEffect)((function(){fe.current=ue}),[ue]);var Se=(0,F.useCallback)((function(){return(0,Fe.cloneDeep)(oe.current)}),[]),we=(0,F.useCallback)((function(e){oe.current=e}),[]),ke=(0,F.useCallback)((function(e){var t=(null==c?void 0:c[e])||{},n=t.value,r=t.items,o=void 0===r?[]:r;return!n||v()(o).reduce((function(e,t){return!1===o[t].value&&e.push(t),e}),[])}),[c]),De=(0,F.useCallback)((function(e){(0,Z.publishUserEvent)(Rd({appId:Ae.bizappId,formId:Ae.id},e))}),[Z]),Pe=(0,F.useCallback)((function(e){switch(e){case"main":return{main:Xi};case"left":return{control:D.ControlView,systemCategories:Ul,outline:yl};case"right":return{property:Il};default:return{}}}),[]),Me=(0,F.useMemo)((function(){return{showMessage:s,getViews:Pe,processPropertyName:Te,keywordMapping:_d,enableSearch:!0,enableError:!0,dataPortalIdPrefix:"nocode-designer-top-view",controlViewSetting:{className:"".concat(Re,"-control-view"),hideHelpIcon:!0,hideAnchorIcon:!0,hideTitleTips:!0,searchInputPlaceholder:"内容",filterCategories:function(e){return g()(e).call(e,(function(e){var t;return!(null!=e&&null!==(t=e.Id)&&void 0!==t&&y()(t).call(t,"System_"))}))},handleItemClick:function(){De({eventName:"click",action:"fd_add_click"})},getEmptyView:function(){return k().createElement(k().Fragment,null,k().createElement("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOAAAACACAMAAAAlB5WJAAAAjVBMVEUAAADh4uvY3+rZ3erb3enY3+rX3ufZ3e3X3OfZ3Ord3uTX3efY3urX4uvX3efW3OjZ4Onb4Ovj6fPj6fPX3ejn7/bk6PPi5/Tj6fTj6fPj6fTk6fXj6PTi6PTi6PTj5/Ti6fPj6fTk6PTj6fPh5fLj6fPj6vPi6PPk6fXL0NzX3Oji6PPi6PPK0NvX3ehGj5HoAAAALHRSTlMAGhcSJSwiCTIOBj4oDDlENUbD7UoreU7ixq6gh1vMPd3SkfFmgG2ZZvD3u03m2McAAAUISURBVHja7NgLjpswFAVQvxlCKoiSgMdg/oSQTKTe/a+vlaoKw5BOAFV6RpwdWLbv+4jNZrPZbDb/hYqjLLxoCUh9CbMoVmI91D2V+EKm91Uc0rnVeKq+OcJuRYJvJIWwlveo8YL64QkrFRov0jbeogoxQWhb3ng5JsqteqdOiclKiwI1lphBxsISEWaKhBUazNYI/rwUo2Sat8F557q7c9DmqcSolH/UpBhRRhUNVFGJEalgrsEX16aiUVVzte6VRhiS+YGeOuTSrqSJMZQp+ieVYYhxtXAk+nRM34o1+iTbiu+V6EsUvUAl6Cu5RmmOvsyll7gZ+nLBkkJfRC+L0MdztgjRU9AEBXpCwVAxcn+z75DhBOxpmDKaKINJ88uZB0yJSxO5CUwPwU0Ng1Y0mdIw1IKZAqaYZohZ/8Jk5AMu+oaJYMWBQSqaRUkYeDVsNxhymimH4SY4MSPmeqCZDleuMaNgaGi2hmu/doehotkqGO6CjxSdkhYoma5n5PMmdH5LKgUbatELNVU8P2GMjqRFJMvlTIROSoukLPdr2ViVX17rM8FFiE5Li7Qs5/oLOgEtEqBzEVxodM60yBkdLbiQ6OxokR3LQgiDS4u4MAguVn/AdT/R/fvbekPm3Tl+/KZXWibI//jjsspC/+YHf/1cY6u2Czqf62u298eToTemumsYl/b+yVTA0Dr2D7z7o99zuqLz+eFav7L44Q+EZrjHJ9uXTq4/1MDQxke714a/2rn73kZBOIDjPx5EFLWP197tMb3dXdOO7v2/vMOwNLhpCxQWR/xgNPOvfdPELRWoRSPU0TTvV+VRGu62W/qtv/itms/M/2VetmsR7av7HLOK84qhHGLJ5z320nC/XtMoL18KKtZnoiogCsZNcz5XB9/K7kfYRHh9VvD1B5xABCqqM7SdNNwtZsFfgJbZokdWQmg177WRpn8zGvgVdiFmvQSBYPKiyAFw1ov/7E7C42EnIWAxG4IhCMJ0CK2yfn+l6UkEnUaCZmImhDp16HtBCkmVXcNX0nQXciIQERcRuBWqLGyiTeXKG3FZHrtPe4o1GS8TlzUZ3ARTO9tI0ylJcxWGG+TU1j7OhNisuYrDDRCzRXcxpjSTuQUC3nLGkO14fokwKZ1yCxV4IwgxpOjzleufCMsKuBXwhhHSn49xGfwZPdy+MOTIwUS4FeIfiDHCSB3nqzZw//7WpT1vp0OnEGVWUEna34KU7oGOvBZnmX2nbiHL3LA6ciDyWl5n9rWFz6+r3QZaNHPFwAlxtpdedJ92lK1l3QZWzmgeN5A8SE/Hk/Ym5bmQ+ihdAgvnQR49Fynzg9mnC6kPBvYKHz88l5nzg+4zCinzGQSs1V7Ib+lIbxSgClWfWZgxL2At9+S51QM/yq6niiGPkUcP9Nys41lqZiFSGHI7Y7BVevLcbuVVfvKLIifhAqEEUKdevhvmrGRfIXYHXuJvebSTg4UIu5zBS/xNqzb9HzPDCsFE0ResxxnB7T3jCn7ibzu2HCg8R+lIQ/8dGKt6oBCRy75N4HBhYSLqUEPruw/jNVxobdyBg4W4dgBjNlC4xLk9GLWhQpJK4HBhaWl8y9QtC0f8+A9UOOrHY5DCcT8fp0KLwj0kY6AQQzL6CxeQjt7CChLyXjjiXS6CF64ySMuHwtUcUlMv0+5rC9PuawvT7msL0+5Thfv270Nqz88OvEjq7/tkMplMJl/uP6GQwUEv7e1KAAAAAElFTkSuQmCC",alt:"搜索无结果",className:"".concat(Re,"-control-empty-img")}),k().createElement("span",{className:"".concat(Re,"-control-empty-img")},"暂无搜索结果"))},hideItemView:ke("Categories"),onDragStart:function(e,t,n){hn(e,t,n)}},propertyViewSetting:{className:"".concat(Re,"-property-view"),hideItemView:ke("Property")},getOutlineItemIcon:function(e){return k().createElement(M.Icon,{prefix:"designericon",type:vn(e),className:"nocode-designer-control-icon"})},canAddCallback:xd({showMessage:s,kdesignerApi:ne,keywordMapping:_d}),preHandle:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return vc.apply(void 0,C()(t).call(t,[Rd(Rd({},ne.current||{}),{},{billPropsData:fe.current,invokeAction:m,getHideFieldRef:Se,setHideFieldRef:we,dispatchBillData:se})]))},getPropertyEditors:pd,filterProperty:fi,renderCustomTab:function(e,t){return k().createElement(Sd,t)}}}),[s,Pe,Te,pd,ke,Se,we,se]),_e=(0,F.useCallback)((function(){return pe.current}),[]),Oe=(0,F.useCallback)((function(e){pe.current=e,re.current.sysSetting=e;var t=Ie.current.increaseVersion,n=xe.current.increaseVersion;t(),n()}),[]),Be=(0,F.useCallback)((function(){return ve.current}),[]),je=(0,F.useCallback)((function(e){ve.current=e,re.current.billNoSetting=e;var t=Ie.current.increaseVersion,n=xe.current.increaseVersion;t(),n()}),[]),Le=(0,F.useCallback)((function(){return me.current}),[]),Ue=(0,F.useCallback)((function(e){me.current=e}),[]),Ke=(0,F.useCallback)((function(){return ge.current}),[]),Ve=(0,F.useCallback)((function(e){ge.current=e}),[]),ze=(0,F.useCallback)((function(){return he.current}),[]),Ge=(0,F.useCallback)((function(e){he.current=e}),[]),He=(0,F.useCallback)((function(){return ee?"pc":"mobile"}),[ee]),qe=(0,F.useCallback)((function(e,t){var n=(0,Fe.cloneDeep)(fe.current),r=I()(n).reduce((function(e,t){var n;return null!==(n=t[1])&&void 0!==n&&n.data?Rd(Rd({},e),{},(0,d.c)({},t[0],t[1].data)):e}),{}),o=bd(e,r),a=(0,f.c)(o,3),i=a[0],l=a[1],c=a[2];oe.current=l,re.current=c,null==t||t.data.resetData(i,!1)}),[]),Ye=(0,F.useCallback)((function(e,t){D.eventBus.emit(e,t)}),[]),We=(0,F.useCallback)((function(e){ne.current=Rd(Rd({},e),{},{originApi:e,selection:Rd(Rd({},e.selection),{},{getActiveSelectedId:function(){return e.selection.getActiveSelectedId()||e.data.getRootId()}}),controlCacheApi:o}),N({kdesignerApi:ne.current,getDesignerClientType:He,fieldStatusMap:Ce,resetDesignerData:qe,getSystemSetting:_e,getBillnoSetting:Be,getDisplayRules:Le,getBizRules:Ke,getFormulaRules:ze,pubEvent:Ye})}),[N,He,Ce]),Qe=(0,F.useCallback)((function(e,t){re.current=Id(re.current,e,ne.current,oe.current),re.current.sysSetting=_e(),re.current.billNoSetting=Be(),re.current.setting=c,l&&l(re.current,t);var n=Ie.current.increaseVersion,r=xe.current.increaseVersion;n(),r()}),[c]);(0,F.useEffect)((function(){N({kdesignerApi:ne.current,fieldStatusMap:Ce,getDesignerClientType:He,resetDesignerData:qe,getSystemSetting:_e,getBillnoSetting:Be,getBizRules:Ke,getDisplayRules:Le,getFormulaRules:ze,pubEvent:Ye})}),[He,Ce]),(0,F.useEffect)((function(){var e=null==Ae?void 0:Ae.id;b("listtreeconfig",[e,"formula"])}),[]),(0,F.useEffect)((function(){return D.eventBus.on(cr,Ue),D.eventBus.on(ur,Ve),function(){D.eventBus.off(cr,Ue),D.eventBus.off(ur,Ve)}}),[]);var Xe=function(e){var t=null==Ae?void 0:Ae.id,n=e.args,r=e.data,o=n||{},a=o.formId,i=o.param,l=(void 0===i?{}:i).sourceType;if(""===a||a===t){var c="formula"===l?Ie.current:xe.current,u=c.setData,s=c.setDataVersion,f=c.getVersion;u(r),s(f())}};(0,F.useEffect)((function(){return D.eventBus.on(lr,Xe),function(){D.eventBus.off(lr,Xe)}}),[]);var Ze=(0,F.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";window.requestAnimationFrame((function(){var t="formula"===e?Ie.current:xe.current,n=t.isVersionEqual,r=t.getVersion;if(!n()){var o=null==Ae?void 0:Ae.id;if(1!==r()){var a="formula"===e?["","formula"]:[""],i=[{nocodeformdesigner:re.current}];m("listtreeconfig",a,i)}else{m("listtreeconfig","formula"===e?[o,"formula"]:[o])}}}))}),[]);(0,F.useEffect)((function(){if(null!=H&&H.children){var e=H.children,t=void 0===e?[]:e;t[0].icon=k().createElement(M.Icon,{prefix:"nocodeplatformicon",type:"gerenzhongxin",style:{color:"#3987ED"}}),t[1].icon=k().createElement(M.Icon,{prefix:"nocodeplatformicon",type:"zuzhi",style:{color:"#3987ED"}});var n=So(t),r=(0,f.c)(n,2),o=r[0],a=r[1];se({key:qr,payload:{data:o,innerForm:a}})}}),[H]);var Je=(0,F.useMemo)((function(){return Bd((null==H?void 0:H.children)||[])}),[H]),$e=(0,F.useRef)({getKdesignerApi:function(){return ne.current},getExpressionData:function(){return z},getRefBillData:function(){return H},getRefBillNameMap:function(){return Je},getCompareTypes:function(){return Q},getDataRef:function(){return re.current},getCurrentRefBillPropsData:function(){return ae.current},getDisplayRules:Le,getBizRules:Ke,getFormulaRules:ze,setCurrentRefBillPropsData:function(e,t){ae.current[e]=t},fetchListTree:Ze,curFormulaTreeApi:Ie.current,curListTreeApi:xe.current,getSystemSetting:_e,setSystemSetting:Oe,getBillnoSetting:Be,setBillnoSetting:je,setDisplayRules:Ue,setBizRules:Ve,setFormulaRules:Ge,getHideFieldRef:Se,setHideFieldRef:we,showMessage:s,invokeAction:m,baseUrl:x,prefixCls:Re,getPrefixCls:function(e,t,n){var r;return n||(e=e||Re,t?C()(r="".concat(e,"-")).call(r,t):e)},getBaseHooks:function(e){return(null==E?void 0:E[e])||function(){}},onDownLoad:S,addControlAction:P,getControlText:R,batchInvoke:_}),et=(0,F.useMemo)((function(){return Rd({isPC:ee,setIsPC:te,floatMenu:O,fieldStatusSettingMode:U,fieldStatusSettingOptions:K,fieldStatusMap:Ce,billPropsData:ue,pubUIAction:De,dispatchFieldStatus:Ee,dispatchBillData:se},$e.current)}),[ee,U,O,K,Ce,ue,De,se]),tt=(0,F.useCallback)((function(){var e,t=T()(e=A()(Pe("right"))).call(e,(function(e){return(null==e?void 0:e.tabKey)||""})),n=ke("Property");return ne.current&&!0!==n?g()(t).call(t,(function(e){return!0})):t}),[ke]),nt=(0,F.useCallback)((function(){var e,t=T()(e=A()(Pe("left"))).call(e,(function(e){return(null==e?void 0:e.tabKey)||""})),n=ke("Categories");return!0===n?t:g()(t).call(t,(function(e){return null==n||!w()(n).call(n,e)}))}),[ke]);return(0,F.useEffect)((function(){var e=function(){var e=ne.current.views,t=e.getViewVisibleKeys("left"),n=e.getViewVisibleKeys("right"),r=nt(),o=tt();(0,Fe.isEqual)(r,t)||e.setViewsVisibleSetting("left")(r),(0,Fe.isEqual)(o,n)||e.setViewsVisibleSetting("right")(o)},t=ne.current.selection.addSelectChangeListener(e);return e(),function(){t&&t()}}),[c]),k().createElement(k().Fragment,null,k().createElement(M.ConfigProvider,{value:{prefixCls:"kdesigner"}},k().createElement(ie.Provider,{value:et},k().createElement(Ld,{className:"".concat(Re,"-root"),ref:de,globalConfig:Me,onData:Qe,meta:Ne,data:Ae,onApi:We}))))}))),Ld=P();jd.displayName="NoCodeDesigner";var Ud=jd},3192:function(){!function(){"use strict";if("object"==typeof window)if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});else{var e=function(e){for(var t=window.document,n=o(t);n;)n=o(t=n.ownerDocument);return t}(),t=[],n=null,r=null;i.prototype.THROTTLE_TIMEOUT=100,i.prototype.POLL_INTERVAL=null,i.prototype.USE_MUTATION_OBSERVER=!0,i._setupCrossOriginUpdater=function(){return n||(n=function(e,n){r=e&&n?f(e,n):{top:0,bottom:0,left:0,right:0,width:0,height:0},t.forEach((function(e){e._checkForIntersections()}))}),n},i._resetCrossOriginUpdater=function(){n=null,r=null},i.prototype.observe=function(e){if(!this._observationTargets.some((function(t){return t.element==e}))){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections(e.ownerDocument),this._checkForIntersections()}},i.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter((function(t){return t.element!=e})),this._unmonitorIntersections(e.ownerDocument),0==this._observationTargets.length&&this._unregisterInstance()},i.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},i.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},i.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter((function(e,t,n){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==n[t-1]}))},i.prototype._parseRootMargin=function(e){var t=(e||"0px").split(/\s+/).map((function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}}));return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},i.prototype._monitorIntersections=function(t){var n=t.defaultView;if(n&&-1==this._monitoringDocuments.indexOf(t)){var r=this._checkForIntersections,a=null,i=null;this.POLL_INTERVAL?a=n.setInterval(r,this.POLL_INTERVAL):(l(n,"resize",r,!0),l(t,"scroll",r,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in n&&(i=new n.MutationObserver(r)).observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0})),this._monitoringDocuments.push(t),this._monitoringUnsubscribes.push((function(){var e=t.defaultView;e&&(a&&e.clearInterval(a),c(e,"resize",r,!0)),c(t,"scroll",r,!0),i&&i.disconnect()}));var u=this.root&&(this.root.ownerDocument||this.root)||e;if(t!=u){var s=o(t);s&&this._monitorIntersections(s.ownerDocument)}}},i.prototype._unmonitorIntersections=function(t){var n=this._monitoringDocuments.indexOf(t);if(-1!=n){var r=this.root&&(this.root.ownerDocument||this.root)||e,a=this._observationTargets.some((function(e){var n=e.element.ownerDocument;if(n==t)return!0;for(;n&&n!=r;){var a=o(n);if((n=a&&a.ownerDocument)==t)return!0}return!1}));if(!a){var i=this._monitoringUnsubscribes[n];if(this._monitoringDocuments.splice(n,1),this._monitoringUnsubscribes.splice(n,1),i(),t!=r){var l=o(t);l&&this._unmonitorIntersections(l.ownerDocument)}}}},i.prototype._unmonitorAllIntersections=function(){var e=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0,this._monitoringUnsubscribes.length=0;for(var t=0;t<e.length;t++)e[t]()},i.prototype._checkForIntersections=function(){if(this.root||!n||r){var e=this._rootIsInDom(),t=e?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach((function(r){var o=r.element,i=u(o),l=this._rootContainsTarget(o),c=r.entry,s=e&&l&&this._computeTargetAndRootIntersection(o,i,t),f=null;this._rootContainsTarget(o)?n&&!this.root||(f=t):f={top:0,bottom:0,left:0,right:0,width:0,height:0};var d=r.entry=new a({time:window.performance&&performance.now&&performance.now(),target:o,boundingClientRect:i,rootBounds:f,intersectionRect:s});c?e&&l?this._hasCrossedThreshold(c,d)&&this._queuedEntries.push(d):c&&c.isIntersecting&&this._queuedEntries.push(d):this._queuedEntries.push(d)}),this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)}},i.prototype._computeTargetAndRootIntersection=function(t,o,a){if("none"!=window.getComputedStyle(t).display){for(var i,l,c,s,d,v,m,g,h=o,y=p(t),b=!1;!b&&y;){var C=null,E=1==y.nodeType?window.getComputedStyle(y):{};if("none"==E.display)return null;if(y==this.root||9==y.nodeType)if(b=!0,y==this.root||y==e)n&&!this.root?!r||0==r.width&&0==r.height?(y=null,C=null,h=null):C=r:C=a;else{var I=p(y),x=I&&u(I),T=I&&this._computeTargetAndRootIntersection(I,x,a);x&&T?(y=I,C=f(x,T)):(y=null,h=null)}else{var N=y.ownerDocument;y!=N.body&&y!=N.documentElement&&"visible"!=E.overflow&&(C=u(y))}if(C&&(i=C,l=h,c=void 0,s=void 0,d=void 0,v=void 0,m=void 0,g=void 0,c=Math.max(i.top,l.top),s=Math.min(i.bottom,l.bottom),d=Math.max(i.left,l.left),v=Math.min(i.right,l.right),g=s-c,h=(m=v-d)>=0&&g>=0&&{top:c,bottom:s,left:d,right:v,width:m,height:g}||null),!h)break;y=y&&p(y)}return h}},i.prototype._getRootRect=function(){var t;if(this.root&&!v(this.root))t=u(this.root);else{var n=v(this.root)?this.root:e,r=n.documentElement,o=n.body;t={top:0,left:0,right:r.clientWidth||o.clientWidth,width:r.clientWidth||o.clientWidth,bottom:r.clientHeight||o.clientHeight,height:r.clientHeight||o.clientHeight}}return this._expandRectByRootMargin(t)},i.prototype._expandRectByRootMargin=function(e){var t=this._rootMarginValues.map((function(t,n){return"px"==t.unit?t.value:t.value*(n%2?e.width:e.height)/100})),n={top:e.top-t[0],right:e.right+t[1],bottom:e.bottom+t[2],left:e.left-t[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},i.prototype._hasCrossedThreshold=function(e,t){var n=e&&e.isIntersecting?e.intersectionRatio||0:-1,r=t.isIntersecting?t.intersectionRatio||0:-1;if(n!==r)for(var o=0;o<this.thresholds.length;o++){var a=this.thresholds[o];if(a==n||a==r||a<n!=a<r)return!0}},i.prototype._rootIsInDom=function(){return!this.root||d(e,this.root)},i.prototype._rootContainsTarget=function(t){var n=this.root&&(this.root.ownerDocument||this.root)||e;return d(n,t)&&(!this.root||n==t.ownerDocument)},i.prototype._registerInstance=function(){t.indexOf(this)<0&&t.push(this)},i.prototype._unregisterInstance=function(){var e=t.indexOf(this);-1!=e&&t.splice(e,1)},window.IntersectionObserver=i,window.IntersectionObserverEntry=a}function o(e){try{return e.defaultView&&e.defaultView.frameElement||null}catch(e){return null}}function a(e){this.time=e.time,this.target=e.target,this.rootBounds=s(e.rootBounds),this.boundingClientRect=s(e.boundingClientRect),this.intersectionRect=s(e.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0}),this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,n=t.width*t.height,r=this.intersectionRect,o=r.width*r.height;this.intersectionRatio=n?Number((o/n).toFixed(4)):this.isIntersecting?1:0}function i(e,t){var n,r,o,a=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(a.root&&1!=a.root.nodeType&&9!=a.root.nodeType)throw new Error("root must be a Document or Element");this._checkForIntersections=(n=this._checkForIntersections.bind(this),r=this.THROTTLE_TIMEOUT,o=null,function(){o||(o=setTimeout((function(){n(),o=null}),r))}),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(a.rootMargin),this.thresholds=this._initThresholds(a.threshold),this.root=a.root||null,this.rootMargin=this._rootMarginValues.map((function(e){return e.value+e.unit})).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}function l(e,t,n,r){"function"==typeof e.addEventListener?e.addEventListener(t,n,r||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,n)}function c(e,t,n,r){"function"==typeof e.removeEventListener?e.removeEventListener(t,n,r||!1):"function"==typeof e.detachEvent&&e.detachEvent("on"+t,n)}function u(e){var t;try{t=e.getBoundingClientRect()}catch(e){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function s(e){return!e||"x"in e?e:{top:e.top,y:e.top,bottom:e.bottom,left:e.left,x:e.left,right:e.right,width:e.width,height:e.height}}function f(e,t){var n=t.top-e.top,r=t.left-e.left;return{top:n,left:r,height:t.height,width:t.width,bottom:n+t.height,right:r+t.width}}function d(e,t){for(var n=t;n;){if(n==e)return!0;n=p(n)}return!1}function p(t){var n=t.parentNode;return 9==t.nodeType&&t!=e?o(t):(n&&n.assignedSlot&&(n=n.assignedSlot.parentNode),n&&11==n.nodeType&&n.host?n.host:n)}function v(e){return e&&9===e.nodeType}}()},2504:function(e,t,n){"use strict";var r=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var o=r[n];e.call(t,o[1],o[0])}},t}()}(),o="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,a=void 0!==n.g&&n.g.Math===Math?n.g:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),i="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(a):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var l=["top","right","bottom","left","width","height","size","weight"],c="undefined"!=typeof MutationObserver,u=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,o=0;function a(){n&&(n=!1,e()),r&&c()}function l(){i(a)}function c(){var e=Date.now();if(n){if(e-o<2)return;r=!0}else n=!0,r=!1,setTimeout(l,t);o=e}return c}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){o&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),c?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){o&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;l.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),s=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];Object.defineProperty(e,o,{value:t[o],enumerable:!1,writable:!1,configurable:!0})}return e},f=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||a},d=y(0,0,0,0);function p(e){return parseFloat(e)||0}function v(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+p(e["border-"+n+"-width"])}),0)}function m(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return d;var r=f(e).getComputedStyle(e),o=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var o=r[n],a=e["padding-"+o];t[o]=p(a)}return t}(r),a=o.left+o.right,i=o.top+o.bottom,l=p(r.width),c=p(r.height);if("border-box"===r.boxSizing&&(Math.round(l+a)!==t&&(l-=v(r,"left","right")+a),Math.round(c+i)!==n&&(c-=v(r,"top","bottom")+i)),!function(e){return e===f(e).document.documentElement}(e)){var u=Math.round(l+a)-t,s=Math.round(c+i)-n;1!==Math.abs(u)&&(l-=u),1!==Math.abs(s)&&(c-=s)}return y(o.left,o.top,l,c)}var g="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof f(e).SVGGraphicsElement}:function(e){return e instanceof f(e).SVGElement&&"function"==typeof e.getBBox};function h(e){return o?g(e)?function(e){var t=e.getBBox();return y(0,0,t.width,t.height)}(e):m(e):d}function y(e,t,n,r){return{x:e,y:t,width:n,height:r}}var b=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=y(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=h(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),C=function(e,t){var n,r,o,a,i,l,c,u=(r=(n=t).x,o=n.y,a=n.width,i=n.height,l="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,c=Object.create(l.prototype),s(c,{x:r,y:o,width:a,height:i,top:o,right:r+a,bottom:i+o,left:r}),c);s(this,{target:e,contentRect:u})},E=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new r,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof f(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new b(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof f(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new C(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),I="undefined"!=typeof WeakMap?new WeakMap:new r,x=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=u.getInstance(),r=new E(t,n,this);I.set(this,r)};["observe","unobserve","disconnect"].forEach((function(e){x.prototype[e]=function(){var t;return(t=I.get(this))[e].apply(t,arguments)}}));var T=void 0!==a.ResizeObserver?a.ResizeObserver:x;t.c=T},1452:function(e,t,n){"use strict";var r=new Error;e.exports=new Promise((function(e,t){if("undefined"!=typeof designer_base)return e();n.l(window.DESIGNER_BASE_ENTRY,(function(n){if("undefined"!=typeof designer_base)return e();var o=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;r.message="Loading script failed.\n("+o+": "+a+")",r.name="ScriptExternalLoadError",r.type=o,r.request=a,t(r)}),"designer_base")})).then((function(){return designer_base}))},9768:function(e,t,n){"use strict";var r=new Error;e.exports=new Promise((function(e,t){if("undefined"!=typeof kd_libs)return e();n.l(window.KD_LIBS_ENTRY,(function(n){if("undefined"!=typeof kd_libs)return e();var o=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;r.message="Loading script failed.\n("+o+": "+a+")",r.name="ScriptExternalLoadError",r.type=o,r.request=a,t(r)}),"kd_libs")})).then((function(){return kd_libs}))},954:function(e,t,n){"use strict";var r=new Error;e.exports=new Promise((function(e,t){if("undefined"!=typeof nocode_component)return e();n.l(window.NOCODE_COMPONENT_ENTRY,(function(n){if("undefined"!=typeof nocode_component)return e();var o=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;r.message="Loading script failed.\n("+o+": "+a+")",r.name="ScriptExternalLoadError",r.type=o,r.request=a,t(r)}),"nocode_component")})).then((function(){return nocode_component}))},3440:function(e,t,n){e.exports=n(6128)},760:function(e,t,n){e.exports=n(1188)},6076:function(e,t,n){e.exports=n(104)},1848:function(e,t,n){e.exports=n(7444)},696:function(e,t,n){e.exports=n(8320)},1900:function(e,t,n){e.exports=n(3352)},8456:function(e,t,n){e.exports=n(120)},524:function(e,t,n){e.exports=n(8760)},3992:function(e,t,n){e.exports=n(8776)},3980:function(e,t,n){e.exports=n(7584)},4244:function(e,t,n){e.exports=n(4644)},1260:function(e,t,n){e.exports=n(9384)},1908:function(e,t,n){e.exports=n(8812)},5288:function(e,t,n){e.exports=n(9408)},3020:function(e,t,n){e.exports=n(2612)},4496:function(e,t,n){e.exports=n(9140)},2892:function(e,t,n){e.exports=n(2572)},2581:function(e,t,n){e.exports=n(7752)},4884:function(e,t,n){e.exports=n(5716)},7435:function(e,t,n){e.exports=n(6860)},4716:function(e,t,n){e.exports=n(9224)},3939:function(e,t,n){e.exports=n(424)},2400:function(e,t,n){e.exports=n(7052)},8429:function(e,t,n){e.exports=n(9516)},7348:function(e,t,n){e.exports=n(7768)},2796:function(e,t,n){e.exports=n(1576)},2272:function(e,t,n){e.exports=n(8436)},9308:function(e,t,n){e.exports=n(948)},9992:function(e,t,n){e.exports=n(9928)},3872:function(e,t,n){e.exports=n(456)},600:function(e,t,n){e.exports=n(4800)},5680:function(e,t,n){e.exports=n(8816)},1252:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=i(e,a(n)))}return e}function a(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return o.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=i(t,n));return t}function i(e,t){return t?e?e+" "+t:e+t:e}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},5280:function(e,t,n){"use strict";var r=n(6128);e.exports=r},4224:function(e,t,n){"use strict";var r=n(1324);e.exports=r},6188:function(e,t,n){"use strict";var r=n(984);e.exports=r},8404:function(e,t,n){"use strict";var r=n(2960);e.exports=r},9152:function(e,t,n){"use strict";var r=n(5720);e.exports=r},7296:function(e,t,n){"use strict";var r=n(5052);e.exports=r},5672:function(e,t,n){"use strict";var r=n(7339);e.exports=r},296:function(e,t,n){"use strict";var r=n(7584);e.exports=r},376:function(e,t,n){"use strict";var r=n(5608);e.exports=r},6404:function(e,t,n){"use strict";var r=n(8792);e.exports=r},9468:function(e,t,n){"use strict";var r=n(9224);e.exports=r},7144:function(e,t,n){"use strict";var r=n(9928);n(6536),n(7576),n(7772),n(5656),e.exports=r},9184:function(e,t,n){"use strict";var r=n(8308);e.exports=r},5920:function(e,t,n){"use strict";var r=n(6956);e.exports=r},9259:function(e,t,n){"use strict";n(4176),n(7572);var r=n(9832);e.exports=r.Array.from},3376:function(e,t,n){"use strict";n(3276);var r=n(9832);e.exports=r.Array.isArray},7160:function(e,t,n){"use strict";n(2216);var r=n(6180);e.exports=r("Array","concat")},8011:function(e,t,n){"use strict";n(4124);var r=n(6180);e.exports=r("Array","fill")},5592:function(e,t,n){"use strict";n(4864);var r=n(6180);e.exports=r("Array","filter")},4216:function(e,t,n){"use strict";n(8628);var r=n(6180);e.exports=r("Array","findIndex")},8256:function(e,t,n){"use strict";n(6952);var r=n(6180);e.exports=r("Array","find")},6184:function(e,t,n){"use strict";n(6504);var r=n(6180);e.exports=r("Array","includes")},4340:function(e,t,n){"use strict";n(1904);var r=n(6180);e.exports=r("Array","indexOf")},3844:function(e,t,n){"use strict";n(7092);var r=n(6180);e.exports=r("Array","map")},6368:function(e,t,n){"use strict";n(3948);var r=n(6180);e.exports=r("Array","push")},4792:function(e,t,n){"use strict";n(5863);var r=n(6180);e.exports=r("Array","slice")},4416:function(e,t,n){"use strict";n(8280);var r=n(6180);e.exports=r("Array","sort")},3612:function(e,t,n){"use strict";n(4152);var r=n(6180);e.exports=r("Array","splice")},7340:function(e,t,n){"use strict";n(340),n(2352);var r=n(6180);e.exports=r("Array","values")},2412:function(e,t,n){"use strict";n(4388);var r=n(6180);e.exports=r("Function","bind")},4556:function(e,t,n){"use strict";n(340),n(4176);var r=n(68);e.exports=r},4756:function(e,t,n){"use strict";var r=n(2360),o=n(2412),a=Function.prototype;e.exports=function(e){var t=e.bind;return e===a||r(a,e)&&t===a.bind?o:t}},8884:function(e,t,n){"use strict";var r=n(2360),o=n(7160),a=Array.prototype;e.exports=function(e){var t=e.concat;return e===a||r(a,e)&&t===a.concat?o:t}},6172:function(e,t,n){"use strict";var r=n(2360),o=n(1340),a=String.prototype;e.exports=function(e){var t=e.endsWith;return"string"==typeof e||e===a||r(a,e)&&t===a.endsWith?o:t}},8784:function(e,t,n){"use strict";var r=n(2360),o=n(8011),a=Array.prototype;e.exports=function(e){var t=e.fill;return e===a||r(a,e)&&t===a.fill?o:t}},680:function(e,t,n){"use strict";var r=n(2360),o=n(5592),a=Array.prototype;e.exports=function(e){var t=e.filter;return e===a||r(a,e)&&t===a.filter?o:t}},1231:function(e,t,n){"use strict";var r=n(2360),o=n(4216),a=Array.prototype;e.exports=function(e){var t=e.findIndex;return e===a||r(a,e)&&t===a.findIndex?o:t}},2600:function(e,t,n){"use strict";var r=n(2360),o=n(8256),a=Array.prototype;e.exports=function(e){var t=e.find;return e===a||r(a,e)&&t===a.find?o:t}},8180:function(e,t,n){"use strict";var r=n(2360),o=n(6184),a=n(4464),i=Array.prototype,l=String.prototype;e.exports=function(e){var t=e.includes;return e===i||r(i,e)&&t===i.includes?o:"string"==typeof e||e===l||r(l,e)&&t===l.includes?a:t}},4156:function(e,t,n){"use strict";var r=n(2360),o=n(4340),a=Array.prototype;e.exports=function(e){var t=e.indexOf;return e===a||r(a,e)&&t===a.indexOf?o:t}},1352:function(e,t,n){"use strict";var r=n(2360),o=n(3844),a=Array.prototype;e.exports=function(e){var t=e.map;return e===a||r(a,e)&&t===a.map?o:t}},8896:function(e,t,n){"use strict";var r=n(2360),o=n(6368),a=Array.prototype;e.exports=function(e){var t=e.push;return e===a||r(a,e)&&t===a.push?o:t}},7736:function(e,t,n){"use strict";var r=n(2360),o=n(7820),a=String.prototype;e.exports=function(e){var t=e.replaceAll;return"string"==typeof e||e===a||r(a,e)&&t===a.replaceAll?o:t}},8688:function(e,t,n){"use strict";var r=n(2360),o=n(4792),a=Array.prototype;e.exports=function(e){var t=e.slice;return e===a||r(a,e)&&t===a.slice?o:t}},3808:function(e,t,n){"use strict";var r=n(2360),o=n(4416),a=Array.prototype;e.exports=function(e){var t=e.sort;return e===a||r(a,e)&&t===a.sort?o:t}},6312:function(e,t,n){"use strict";var r=n(2360),o=n(3612),a=Array.prototype;e.exports=function(e){var t=e.splice;return e===a||r(a,e)&&t===a.splice?o:t}},1240:function(e,t,n){"use strict";var r=n(2360),o=n(9559),a=String.prototype;e.exports=function(e){var t=e.startsWith;return"string"==typeof e||e===a||r(a,e)&&t===a.startsWith?o:t}},8125:function(e,t,n){"use strict";var r=n(2360),o=n(4352),a=String.prototype;e.exports=function(e){var t=e.trim;return"string"==typeof e||e===a||r(a,e)&&t===a.trim?o:t}},9304:function(e,t,n){"use strict";n(8824);var r=n(9832),o=n(9867);r.JSON||(r.JSON={stringify:JSON.stringify}),e.exports=function(e,t,n){return o(r.JSON.stringify,null,arguments)}},2548:function(e,t,n){"use strict";n(340),n(6775),n(2648),n(2352),n(4176);var r=n(9832);e.exports=r.Map},9196:function(e,t,n){"use strict";n(6448);var r=n(9832);e.exports=r.Object.assign},4856:function(e,t,n){"use strict";n(8708);var r=n(9832).Object,o=e.exports=function(e,t,n){return r.defineProperty(e,t,n)};r.defineProperty.sham&&(o.sham=!0)},2536:function(e,t,n){"use strict";n(6360);var r=n(9832);e.exports=r.Object.entries},3416:function(e,t,n){"use strict";n(7648);var r=n(9832).Object,o=e.exports=function(e,t){return r.getOwnPropertyDescriptor(e,t)};r.getOwnPropertyDescriptor.sham&&(o.sham=!0)},2936:function(e,t,n){"use strict";n(5032);var r=n(9832);e.exports=r.Object.getOwnPropertyDescriptors},920:function(e,t,n){"use strict";n(9276);var r=n(9832);e.exports=r.Object.getOwnPropertySymbols},2613:function(e,t,n){"use strict";n(88);var r=n(9832);e.exports=r.Object.keys},6104:function(e,t,n){"use strict";n(7016);var r=n(9832);e.exports=r.Object.values},6496:function(e,t,n){"use strict";n(816),n(340),n(2352),n(6244),n(8128),n(3728),n(96),n(196),n(4176);var r=n(9832);e.exports=r.Promise},3216:function(e,t,n){"use strict";n(3223);var r=n(9832);e.exports=r.Reflect.deleteProperty},2568:function(e,t,n){"use strict";n(3400);var r=n(9832);e.exports=r.Reflect.has},1060:function(e,t,n){"use strict";n(9988);var r=n(9832);e.exports=r.Reflect.set},7376:function(e,t,n){"use strict";n(340),n(2352),n(1160),n(4176);var r=n(9832);e.exports=r.Set},1340:function(e,t,n){"use strict";n(976);var r=n(6180);e.exports=r("String","endsWith")},4464:function(e,t,n){"use strict";n(3512);var r=n(6180);e.exports=r("String","includes")},7820:function(e,t,n){"use strict";n(1204),n(2008),n(6988);var r=n(6180);e.exports=r("String","replaceAll")},9559:function(e,t,n){"use strict";n(6432);var r=n(6180);e.exports=r("String","startsWith")},4352:function(e,t,n){"use strict";n(3003);var r=n(6180);e.exports=r("String","trim")},2767:function(e,t,n){"use strict";n(2216),n(2352),n(9276),n(2240),n(9452),n(1344),n(4436),n(6992),n(8028),n(6380),n(6176),n(1176),n(781),n(6720),n(5536),n(4732),n(4243),n(7548),n(3787),n(176);var r=n(9832);e.exports=r.Symbol},5180:function(e,t,n){"use strict";n(340),n(2352),n(4176),n(6992);var r=n(1104);e.exports=r.f("iterator")},6888:function(e,t,n){"use strict";n(7532),n(5536);var r=n(1104);e.exports=r.f("toPrimitive")},4800:function(e,t,n){"use strict";e.exports=n(420)},8816:function(e,t,n){"use strict";e.exports=n(9576)},7944:function(e,t,n){"use strict";var r=n(5280);e.exports=r},2396:function(e,t,n){"use strict";var r=n(4224);e.exports=r},420:function(e,t,n){"use strict";var r=n(6188);e.exports=r},8176:function(e,t,n){"use strict";var r=n(8404);e.exports=r},7112:function(e,t,n){"use strict";var r=n(9152);e.exports=r},8360:function(e,t,n){"use strict";var r=n(7296);e.exports=r},9576:function(e,t,n){"use strict";n(6508);var r=n(5672);e.exports=r},3232:function(e,t,n){"use strict";var r=n(296);e.exports=r},2176:function(e,t,n){"use strict";var r=n(376);e.exports=r},8520:function(e,t,n){"use strict";var r=n(6404);e.exports=r},2900:function(e,t,n){"use strict";var r=n(9468);e.exports=r},9216:function(e,t,n){"use strict";var r=n(7144);n(9264),n(8460),n(4448),n(4184),n(1216),n(5196),n(2948),n(2252),n(6396),e.exports=r},7268:function(e,t,n){"use strict";var r=n(9184);e.exports=r},6340:function(e,t,n){"use strict";var r=n(5920);e.exports=r},28:function(e,t,n){"use strict";var r=n(8536),o=n(8944),a=TypeError;e.exports=function(e){if(r(e))return e;throw new a(o(e)+" is not a function")}},9556:function(e,t,n){"use strict";var r=n(9496),o=n(8944),a=TypeError;e.exports=function(e){if(r(e))return e;throw new a(o(e)+" is not a constructor")}},1459:function(e,t,n){"use strict";var r=n(7432),o=String,a=TypeError;e.exports=function(e){if(r(e))return e;throw new a("Can't set "+o(e)+" as a prototype")}},1472:function(e){"use strict";e.exports=function(){}},4572:function(e,t,n){"use strict";var r=n(2360),o=TypeError;e.exports=function(e,t){if(r(t,e))return e;throw new o("Incorrect invocation")}},2032:function(e,t,n){"use strict";var r=n(8608),o=String,a=TypeError;e.exports=function(e){if(r(e))return e;throw new a(o(e)+" is not an object")}},3648:function(e,t,n){"use strict";var r=n(2064);e.exports=r((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}))},3028:function(e,t,n){"use strict";var r=n(2819),o=n(4180),a=n(5316);e.exports=function(e){for(var t=r(this),n=a(t),i=arguments.length,l=o(i>1?arguments[1]:void 0,n),c=i>2?arguments[2]:void 0,u=void 0===c?n:o(c,n);u>l;)t[l++]=e;return t}},9980:function(e,t,n){"use strict";var r=n(1884),o=n(4580),a=n(2819),i=n(7547),l=n(4992),c=n(9496),u=n(5316),s=n(4895),f=n(4656),d=n(68),p=Array;e.exports=function(e){var t=a(e),n=c(this),v=arguments.length,m=v>1?arguments[1]:void 0,g=void 0!==m;g&&(m=r(m,v>2?arguments[2]:void 0));var h,y,b,C,E,I,x=d(t),T=0;if(!x||this===p&&l(x))for(h=u(t),y=n?new this(h):p(h);h>T;T++)I=g?m(t[T],T):t[T],s(y,T,I);else for(E=(C=f(t,x)).next,y=n?new this:[];!(b=o(E,C)).done;T++)I=g?i(C,m,[b.value,T],!0):b.value,s(y,T,I);return y.length=T,y}},7464:function(e,t,n){"use strict";var r=n(445),o=n(4180),a=n(5316),i=function(e){return function(t,n,i){var l,c=r(t),u=a(c),s=o(i,u);if(e&&n!=n){for(;u>s;)if((l=c[s++])!=l)return!0}else for(;u>s;s++)if((e||s in c)&&c[s]===n)return e||s||0;return!e&&-1}};e.exports={includes:i(!0),indexOf:i(!1)}},7608:function(e,t,n){"use strict";var r=n(1884),o=n(9252),a=n(2899),i=n(2819),l=n(5316),c=n(4872),u=o([].push),s=function(e){var t=1===e,n=2===e,o=3===e,s=4===e,f=6===e,d=7===e,p=5===e||f;return function(v,m,g,h){for(var y,b,C=i(v),E=a(C),I=l(E),x=r(m,g),T=0,N=h||c,A=t?N(v,I):n||d?N(v,0):void 0;I>T;T++)if((p||T in E)&&(b=x(y=E[T],T,C),e))if(t)A[T]=b;else if(b)switch(e){case 3:return!0;case 5:return y;case 6:return T;case 2:u(A,y)}else switch(e){case 4:return!1;case 7:u(A,y)}return f?-1:o||s?s:A}};e.exports={forEach:s(0),map:s(1),filter:s(2),some:s(3),every:s(4),find:s(5),findIndex:s(6),filterReject:s(7)}},5384:function(e,t,n){"use strict";var r=n(2064),o=n(3336),a=n(3896),i=o("species");e.exports=function(e){return a>=51||!r((function(){var t=[];return(t.constructor={})[i]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},4888:function(e,t,n){"use strict";var r=n(2064);e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){return 1},1)}))}},1716:function(e,t,n){"use strict";var r=n(9172),o=n(3204),a=TypeError,i=Object.getOwnPropertyDescriptor,l=r&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=l?function(e,t){if(o(e)&&!i(e,"length").writable)throw new a("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}},940:function(e,t,n){"use strict";var r=n(9252);e.exports=r([].slice)},3864:function(e,t,n){"use strict";var r=n(940),o=Math.floor,a=function(e,t){var n=e.length;if(n<8)for(var i,l,c=1;c<n;){for(l=c,i=e[c];l&&t(e[l-1],i)>0;)e[l]=e[--l];l!==c++&&(e[l]=i)}else for(var u=o(n/2),s=a(r(e,0,u),t),f=a(r(e,u),t),d=s.length,p=f.length,v=0,m=0;v<d||m<p;)e[v+m]=v<d&&m<p?t(s[v],f[m])<=0?s[v++]:f[m++]:v<d?s[v++]:f[m++];return e};e.exports=a},2556:function(e,t,n){"use strict";var r=n(3204),o=n(9496),a=n(8608),i=n(3336)("species"),l=Array;e.exports=function(e){var t;return r(e)&&(t=e.constructor,(o(t)&&(t===l||r(t.prototype))||a(t)&&null===(t=t[i]))&&(t=void 0)),void 0===t?l:t}},4872:function(e,t,n){"use strict";var r=n(2556);e.exports=function(e,t){return new(r(e))(0===t?0:t)}},7547:function(e,t,n){"use strict";var r=n(2032),o=n(5872);e.exports=function(e,t,n,a){try{return a?t(r(n)[0],n[1]):t(n)}catch(t){o(e,"throw",t)}}},9592:function(e){"use strict";e.exports=function(e,t){return 1===t?function(t,n){return t[e](n)}:function(t,n,r){return t[e](n,r)}}},347:function(e,t,n){"use strict";var r=n(3336)("iterator"),o=!1;try{var a=0,i={next:function(){return{done:!!a++}},return:function(){o=!0}};i[r]=function(){return this},Array.from(i,(function(){throw 2}))}catch(e){}e.exports=function(e,t){try{if(!t&&!o)return!1}catch(e){return!1}var n=!1;try{var a={};a[r]=function(){return{next:function(){return{done:n=!0}}}},e(a)}catch(e){}return n}},7936:function(e,t,n){"use strict";var r=n(9252),o=r({}.toString),a=r("".slice);e.exports=function(e){return a(o(e),8,-1)}},636:function(e,t,n){"use strict";var r=n(6744),o=n(8536),a=n(7936),i=n(3336)("toStringTag"),l=Object,c="Arguments"===a(function(){return arguments}());e.exports=r?a:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=l(e),i))?n:c?a(t):"Object"===(r=a(t))&&o(t.callee)?"Arguments":r}},3928:function(e,t,n){"use strict";var r=n(4488),o=n(6968),a=n(8104),i=n(1884),l=n(4572),c=n(9511),u=n(5799),s=n(536),f=n(3848),d=n(3120),p=n(9172),v=n(992).fastKey,m=n(2344),g=m.set,h=m.getterFor;e.exports={getConstructor:function(e,t,n,s){var f=e((function(e,o){l(e,d),g(e,{type:t,index:r(null),first:void 0,last:void 0,size:0}),p||(e.size=0),c(o)||u(o,e[s],{that:e,AS_ENTRIES:n})})),d=f.prototype,m=h(t),y=function(e,t,n){var r,o,a=m(e),i=b(e,t);return i?i.value=n:(a.last=i={index:o=v(t,!0),key:t,value:n,previous:r=a.last,next:void 0,removed:!1},a.first||(a.first=i),r&&(r.next=i),p?a.size++:e.size++,"F"!==o&&(a.index[o]=i)),e},b=function(e,t){var n,r=m(e),o=v(t);if("F"!==o)return r.index[o];for(n=r.first;n;n=n.next)if(n.key===t)return n};return a(d,{clear:function(){for(var e=m(this),t=e.first;t;)t.removed=!0,t.previous&&(t.previous=t.previous.next=void 0),t=t.next;e.first=e.last=void 0,e.index=r(null),p?e.size=0:this.size=0},delete:function(e){var t=this,n=m(t),r=b(t,e);if(r){var o=r.next,a=r.previous;delete n.index[r.index],r.removed=!0,a&&(a.next=o),o&&(o.previous=a),n.first===r&&(n.first=o),n.last===r&&(n.last=a),p?n.size--:t.size--}return!!r},forEach:function(e){for(var t,n=m(this),r=i(e,arguments.length>1?arguments[1]:void 0);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!b(this,e)}}),a(d,n?{get:function(e){var t=b(this,e);return t&&t.value},set:function(e,t){return y(this,0===e?0:e,t)}}:{add:function(e){return y(this,e=0===e?0:e,e)}}),p&&o(d,"size",{configurable:!0,get:function(){return m(this).size}}),f},setStrong:function(e,t,n){var r=t+" Iterator",o=h(t),a=h(r);s(e,t,(function(e,t){g(this,{type:r,target:e,state:o(e),kind:t,last:void 0})}),(function(){for(var e=a(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?f("keys"===t?n.key:"values"===t?n.value:[n.key,n.value],!1):(e.target=void 0,f(void 0,!0))}),n?"entries":"values",!n,!0),d(t)}}},6072:function(e,t,n){"use strict";var r=n(3952),o=n(5216),a=n(992),i=n(2064),l=n(896),c=n(5799),u=n(4572),s=n(8536),f=n(8608),d=n(9511),p=n(5836),v=n(2280).f,m=n(7608).forEach,g=n(9172),h=n(2344),y=h.set,b=h.getterFor;e.exports=function(e,t,n){var h,C=-1!==e.indexOf("Map"),E=-1!==e.indexOf("Weak"),I=C?"set":"add",x=o[e],T=x&&x.prototype,N={};if(g&&s(x)&&(E||T.forEach&&!i((function(){(new x).entries().next()})))){var A=(h=t((function(t,n){y(u(t,A),{type:e,collection:new x}),d(n)||c(n,t[I],{that:t,AS_ENTRIES:C})}))).prototype,S=b(e);m(["add","clear","delete","forEach","get","has","set","keys","values","entries"],(function(e){var t="add"===e||"set"===e;!(e in T)||E&&"clear"===e||l(A,e,(function(n,r){var o=S(this).collection;if(!t&&E&&!f(n))return"get"===e&&void 0;var a=o[e](0===n?0:n,r);return t?this:a}))})),E||v(A,"size",{configurable:!0,get:function(){return S(this).collection.size}})}else h=n.getConstructor(t,e,C,I),a.enable();return p(h,e,!1,!0),N[e]=h,r({global:!0,forced:!0},N),E||n.setStrong(h,e,C),h}},1100:function(e,t,n){"use strict";var r=n(4664),o=n(7876),a=n(1008),i=n(2280);e.exports=function(e,t,n){for(var l=o(t),c=i.f,u=a.f,s=0;s<l.length;s++){var f=l[s];r(e,f)||n&&r(n,f)||c(e,f,u(t,f))}}},660:function(e,t,n){"use strict";var r=n(3336)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,"/./"[e](t)}catch(e){}}return!1}},2480:function(e,t,n){"use strict";var r=n(2064);e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},3848:function(e){"use strict";e.exports=function(e,t){return{value:e,done:t}}},896:function(e,t,n){"use strict";var r=n(9172),o=n(2280),a=n(8981);e.exports=r?function(e,t,n){return o.f(e,t,a(1,n))}:function(e,t,n){return e[t]=n,e}},8981:function(e){"use strict";e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},4895:function(e,t,n){"use strict";var r=n(2319),o=n(2280),a=n(8981);e.exports=function(e,t,n){var i=r(t);i in e?o.f(e,i,a(0,n)):e[i]=n}},6968:function(e,t,n){"use strict";var r=n(2280);e.exports=function(e,t,n){return r.f(e,t,n)}},5424:function(e,t,n){"use strict";var r=n(896);e.exports=function(e,t,n,o){return o&&o.enumerable?e[t]=n:r(e,t,n),e}},8104:function(e,t,n){"use strict";var r=n(5424);e.exports=function(e,t,n){for(var o in t)n&&n.unsafe&&e[o]?e[o]=t[o]:r(e,o,t[o],n);return e}},4408:function(e,t,n){"use strict";var r=n(5216),o=Object.defineProperty;e.exports=function(e,t){try{o(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}},6940:function(e,t,n){"use strict";var r=n(8944),o=TypeError;e.exports=function(e,t){if(!delete e[t])throw new o("Cannot delete property "+r(t)+" of "+r(e))}},9172:function(e,t,n){"use strict";var r=n(2064);e.exports=!r((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},1940:function(e,t,n){"use strict";var r=n(5216),o=n(8608),a=r.document,i=o(a)&&o(a.createElement);e.exports=function(e){return i?a.createElement(e):{}}},8200:function(e){"use strict";var t=TypeError;e.exports=function(e){if(e>9007199254740991)throw t("Maximum allowed index exceeded");return e}},472:function(e){"use strict";e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},7587:function(e,t,n){"use strict";var r=n(2276).match(/firefox\/(\d+)/i);e.exports=!!r&&+r[1]},3322:function(e,t,n){"use strict";var r=n(5924),o=n(1432);e.exports=!r&&!o&&"object"==typeof window&&"object"==typeof document},5924:function(e){"use strict";e.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},6028:function(e,t,n){"use strict";var r=n(2276);e.exports=/MSIE|Trident/.test(r)},1172:function(e,t,n){"use strict";var r=n(2276);e.exports=/ipad|iphone|ipod/i.test(r)&&"undefined"!=typeof Pebble},6772:function(e,t,n){"use strict";var r=n(2276);e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},1432:function(e,t,n){"use strict";var r=n(5216),o=n(7936);e.exports="process"===o(r.process)},1824:function(e,t,n){"use strict";var r=n(2276);e.exports=/web0s(?!.*chrome)/i.test(r)},2276:function(e){"use strict";e.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},3896:function(e,t,n){"use strict";var r,o,a=n(5216),i=n(2276),l=a.process,c=a.Deno,u=l&&l.versions||c&&c.version,s=u&&u.v8;s&&(o=(r=s.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!o&&i&&(!(r=i.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=i.match(/Chrome\/(\d+)/))&&(o=+r[1]),e.exports=o},1244:function(e,t,n){"use strict";var r=n(2276).match(/AppleWebKit\/(\d+)\./);e.exports=!!r&&+r[1]},3620:function(e){"use strict";e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},9492:function(e,t,n){"use strict";var r=n(9252),o=Error,a=r("".replace),i=String(new o("zxcasd").stack),l=/\n\s*at [^:]*:[^\n]*/,c=l.test(i);e.exports=function(e,t){if(c&&"string"==typeof e&&!o.prepareStackTrace)for(;t--;)e=a(e,l,"");return e}},9035:function(e,t,n){"use strict";var r=n(896),o=n(9492),a=n(1376),i=Error.captureStackTrace;e.exports=function(e,t,n,l){a&&(i?i(e,t):r(e,"stack",o(n,l)))}},1376:function(e,t,n){"use strict";var r=n(2064),o=n(8981);e.exports=!r((function(){var e=new Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",o(1,7)),7!==e.stack)}))},3952:function(e,t,n){"use strict";var r=n(5216),o=n(9867),a=n(1248),i=n(8536),l=n(1008).f,c=n(6155),u=n(9832),s=n(1884),f=n(896),d=n(4664),p=function(e){var t=function(n,r,a){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(n);case 2:return new e(n,r)}return new e(n,r,a)}return o(e,this,arguments)};return t.prototype=e.prototype,t};e.exports=function(e,t){var n,o,v,m,g,h,y,b,C,E=e.target,I=e.global,x=e.stat,T=e.proto,N=I?r:x?r[E]:r[E]&&r[E].prototype,A=I?u:u[E]||f(u,E,{})[E],S=A.prototype;for(m in t)o=!(n=c(I?m:E+(x?".":"#")+m,e.forced))&&N&&d(N,m),h=A[m],o&&(y=e.dontCallGetSet?(C=l(N,m))&&C.value:N[m]),g=o&&y?y:t[m],(n||T||typeof h!=typeof g)&&(b=e.bind&&o?s(g,r):e.wrap&&o?p(g):T&&i(g)?a(g):g,(e.sham||g&&g.sham||h&&h.sham)&&f(b,"sham",!0),f(A,m,b),T&&(d(u,v=E+"Prototype")||f(u,v,{}),f(u[v],m,g),e.real&&S&&(n||!S[m])&&f(S,m,g)))}},2064:function(e){"use strict";e.exports=function(e){try{return!!e()}catch(e){return!0}}},9380:function(e,t,n){"use strict";var r=n(2064);e.exports=!r((function(){return Object.isExtensible(Object.preventExtensions({}))}))},9867:function(e,t,n){"use strict";var r=n(5200),o=Function.prototype,a=o.apply,i=o.call;e.exports="object"==typeof Reflect&&Reflect.apply||(r?i.bind(a):function(){return i.apply(a,arguments)})},1884:function(e,t,n){"use strict";var r=n(1248),o=n(28),a=n(5200),i=r(r.bind);e.exports=function(e,t){return o(e),void 0===t?e:a?i(e,t):function(){return e.apply(t,arguments)}}},5200:function(e,t,n){"use strict";var r=n(2064);e.exports=!r((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},5404:function(e,t,n){"use strict";var r=n(9252),o=n(28),a=n(8608),i=n(4664),l=n(940),c=n(5200),u=Function,s=r([].concat),f=r([].join),d={};e.exports=c?u.bind:function(e){var t=o(this),n=t.prototype,r=l(arguments,1),c=function(){var n=s(r,l(arguments));return this instanceof c?function(e,t,n){if(!i(d,t)){for(var r=[],o=0;o<t;o++)r[o]="a["+o+"]";d[t]=u("C,a","return new C("+f(r,",")+")")}return d[t](e,n)}(t,n.length,n):t.apply(e,n)};return a(n)&&(c.prototype=n),c}},4580:function(e,t,n){"use strict";var r=n(5200),o=Function.prototype.call;e.exports=r?o.bind(o):function(){return o.apply(o,arguments)}},3564:function(e,t,n){"use strict";var r=n(9172),o=n(4664),a=Function.prototype,i=r&&Object.getOwnPropertyDescriptor,l=o(a,"name"),c=l&&"something"===function(){}.name,u=l&&(!r||r&&i(a,"name").configurable);e.exports={EXISTS:l,PROPER:c,CONFIGURABLE:u}},7864:function(e,t,n){"use strict";var r=n(9252),o=n(28);e.exports=function(e,t,n){try{return r(o(Object.getOwnPropertyDescriptor(e,t)[n]))}catch(e){}}},1248:function(e,t,n){"use strict";var r=n(7936),o=n(9252);e.exports=function(e){if("Function"===r(e))return o(e)}},9252:function(e,t,n){"use strict";var r=n(5200),o=Function.prototype,a=o.call,i=r&&o.bind.bind(a,a);e.exports=r?i:function(e){return function(){return a.apply(e,arguments)}}},6180:function(e,t,n){"use strict";var r=n(5216),o=n(9832);e.exports=function(e,t){var n=o[e+"Prototype"],a=n&&n[t];if(a)return a;var i=r[e],l=i&&i.prototype;return l&&l[t]}},3464:function(e,t,n){"use strict";var r=n(9832),o=n(5216),a=n(8536),i=function(e){return a(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?i(r[e])||i(o[e]):r[e]&&r[e][t]||o[e]&&o[e][t]}},68:function(e,t,n){"use strict";var r=n(636),o=n(1636),a=n(9511),i=n(7256),l=n(3336)("iterator");e.exports=function(e){if(!a(e))return o(e,l)||o(e,"@@iterator")||i[r(e)]}},4656:function(e,t,n){"use strict";var r=n(4580),o=n(28),a=n(2032),i=n(8944),l=n(68),c=TypeError;e.exports=function(e,t){var n=arguments.length<2?l(e):t;if(o(n))return a(r(n,e));throw new c(i(e)+" is not iterable")}},3676:function(e,t,n){"use strict";var r=n(9252),o=n(3204),a=n(8536),i=n(7936),l=n(9352),c=r([].push);e.exports=function(e){if(a(e))return e;if(o(e)){for(var t=e.length,n=[],r=0;r<t;r++){var u=e[r];"string"==typeof u?c(n,u):"number"!=typeof u&&"Number"!==i(u)&&"String"!==i(u)||c(n,l(u))}var s=n.length,f=!0;return function(e,t){if(f)return f=!1,t;if(o(this))return t;for(var r=0;r<s;r++)if(n[r]===e)return t}}}},1636:function(e,t,n){"use strict";var r=n(28),o=n(9511);e.exports=function(e,t){var n=e[t];return o(n)?void 0:r(n)}},1440:function(e,t,n){"use strict";var r=n(9252),o=n(2819),a=Math.floor,i=r("".charAt),l=r("".replace),c=r("".slice),u=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,s=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,r,f,d){var p=n+e.length,v=r.length,m=s;return void 0!==f&&(f=o(f),m=u),l(d,m,(function(o,l){var u;switch(i(l,0)){case"$":return"$";case"&":return e;case"`":return c(t,0,n);case"'":return c(t,p);case"<":u=f[c(l,1,-1)];break;default:var s=+l;if(0===s)return o;if(s>v){var d=a(s/10);return 0===d?o:d<=v?void 0===r[d-1]?i(l,1):r[d-1]+i(l,1):o}u=r[s-1]}return void 0===u?"":u}))}},5216:function(e,t,n){"use strict";var r=function(e){return e&&e.Math===Math&&e};e.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||r("object"==typeof this&&this)||function(){return this}()||Function("return this")()},4664:function(e,t,n){"use strict";var r=n(9252),o=n(2819),a=r({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return a(o(e),t)}},3328:function(e){"use strict";e.exports={}},3320:function(e){"use strict";e.exports=function(e,t){}},7896:function(e,t,n){"use strict";var r=n(3464);e.exports=r("document","documentElement")},124:function(e,t,n){"use strict";var r=n(9172),o=n(2064),a=n(1940);e.exports=!r&&!o((function(){return 7!==Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a}))},2899:function(e,t,n){"use strict";var r=n(9252),o=n(2064),a=n(7936),i=Object,l=r("".split);e.exports=o((function(){return!i("z").propertyIsEnumerable(0)}))?function(e){return"String"===a(e)?l(e,""):i(e)}:i},9376:function(e,t,n){"use strict";var r=n(9252),o=n(8536),a=n(9284),i=r(Function.toString);o(a.inspectSource)||(a.inspectSource=function(e){return i(e)}),e.exports=a.inspectSource},9055:function(e,t,n){"use strict";var r=n(8608),o=n(896);e.exports=function(e,t){r(t)&&"cause"in t&&o(e,"cause",t.cause)}},992:function(e,t,n){"use strict";var r=n(3952),o=n(9252),a=n(3328),i=n(8608),l=n(4664),c=n(2280).f,u=n(1600),s=n(1920),f=n(5432),d=n(6696),p=n(9380),v=!1,m=d("meta"),g=0,h=function(e){c(e,m,{value:{objectID:"O"+g++,weakData:{}}})},y=e.exports={enable:function(){y.enable=function(){},v=!0;var e=u.f,t=o([].splice),n={};n[m]=1,e(n).length&&(u.f=function(n){for(var r=e(n),o=0,a=r.length;o<a;o++)if(r[o]===m){t(r,o,1);break}return r},r({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:s.f}))},fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!l(e,m)){if(!f(e))return"F";if(!t)return"E";h(e)}return e[m].objectID},getWeakData:function(e,t){if(!l(e,m)){if(!f(e))return!0;if(!t)return!1;h(e)}return e[m].weakData},onFreeze:function(e){return p&&v&&f(e)&&!l(e,m)&&h(e),e}};a[m]=!0},2344:function(e,t,n){"use strict";var r,o,a,i=n(3184),l=n(5216),c=n(8608),u=n(896),s=n(4664),f=n(9284),d=n(924),p=n(3328),v="Object already initialized",m=l.TypeError,g=l.WeakMap;if(i||f.state){var h=f.state||(f.state=new g);h.get=h.get,h.has=h.has,h.set=h.set,r=function(e,t){if(h.has(e))throw new m(v);return t.facade=e,h.set(e,t),t},o=function(e){return h.get(e)||{}},a=function(e){return h.has(e)}}else{var y=d("state");p[y]=!0,r=function(e,t){if(s(e,y))throw new m(v);return t.facade=e,u(e,y,t),t},o=function(e){return s(e,y)?e[y]:{}},a=function(e){return s(e,y)}}e.exports={set:r,get:o,has:a,enforce:function(e){return a(e)?o(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!c(t)||(n=o(t)).type!==e)throw new m("Incompatible receiver, "+e+" required");return n}}}},4992:function(e,t,n){"use strict";var r=n(3336),o=n(7256),a=r("iterator"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(o.Array===e||i[a]===e)}},3204:function(e,t,n){"use strict";var r=n(7936);e.exports=Array.isArray||function(e){return"Array"===r(e)}},8536:function(e){"use strict";var t="object"==typeof document&&document.all;e.exports=void 0===t&&void 0!==t?function(e){return"function"==typeof e||e===t}:function(e){return"function"==typeof e}},9496:function(e,t,n){"use strict";var r=n(9252),o=n(2064),a=n(8536),i=n(636),l=n(3464),c=n(9376),u=function(){},s=l("Reflect","construct"),f=/^\s*(?:class|function)\b/,d=r(f.exec),p=!f.test(u),v=function(e){if(!a(e))return!1;try{return s(u,[],e),!0}catch(e){return!1}},m=function(e){if(!a(e))return!1;switch(i(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return p||!!d(f,c(e))}catch(e){return!0}};m.sham=!0,e.exports=!s||o((function(){var e;return v(v.call)||!v(Object)||!v((function(){e=!0}))||e}))?m:v},5072:function(e,t,n){"use strict";var r=n(4664);e.exports=function(e){return void 0!==e&&(r(e,"value")||r(e,"writable"))}},6155:function(e,t,n){"use strict";var r=n(2064),o=n(8536),a=/#|\.prototype\./,i=function(e,t){var n=c[l(e)];return n===s||n!==u&&(o(t)?r(t):!!t)},l=i.normalize=function(e){return String(e).replace(a,".").toLowerCase()},c=i.data={},u=i.NATIVE="N",s=i.POLYFILL="P";e.exports=i},9511:function(e){"use strict";e.exports=function(e){return null==e}},8608:function(e,t,n){"use strict";var r=n(8536);e.exports=function(e){return"object"==typeof e?null!==e:r(e)}},7432:function(e,t,n){"use strict";var r=n(8608);e.exports=function(e){return r(e)||null===e}},1016:function(e){"use strict";e.exports=!0},9300:function(e,t,n){"use strict";var r=n(8608),o=n(7936),a=n(3336)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[a])?!!t:"RegExp"===o(e))}},5376:function(e,t,n){"use strict";var r=n(3464),o=n(8536),a=n(2360),i=n(6416),l=Object;e.exports=i?function(e){return"symbol"==typeof e}:function(e){var t=r("Symbol");return o(t)&&a(t.prototype,l(e))}},5799:function(e,t,n){"use strict";var r=n(1884),o=n(4580),a=n(2032),i=n(8944),l=n(4992),c=n(5316),u=n(2360),s=n(4656),f=n(68),d=n(5872),p=TypeError,v=function(e,t){this.stopped=e,this.result=t},m=v.prototype;e.exports=function(e,t,n){var g,h,y,b,C,E,I,x=n&&n.that,T=!(!n||!n.AS_ENTRIES),N=!(!n||!n.IS_RECORD),A=!(!n||!n.IS_ITERATOR),S=!(!n||!n.INTERRUPTED),w=r(t,x),F=function(e){return g&&d(g,"normal",e),new v(!0,e)},k=function(e){return T?(a(e),S?w(e[0],e[1],F):w(e[0],e[1])):S?w(e,F):w(e)};if(N)g=e.iterator;else if(A)g=e;else{if(!(h=f(e)))throw new p(i(e)+" is not iterable");if(l(h)){for(y=0,b=c(e);b>y;y++)if((C=k(e[y]))&&u(m,C))return C;return new v(!1)}g=s(e,h)}for(E=N?e.next:g.next;!(I=o(E,g)).done;){try{C=k(I.value)}catch(e){d(g,"throw",e)}if("object"==typeof C&&C&&u(m,C))return C}return new v(!1)}},5872:function(e,t,n){"use strict";var r=n(4580),o=n(2032),a=n(1636);e.exports=function(e,t,n){var i,l;o(e);try{if(!(i=a(e,"return"))){if("throw"===t)throw n;return n}i=r(i,e)}catch(e){l=!0,i=e}if("throw"===t)throw n;if(l)throw i;return o(i),n}},9976:function(e,t,n){"use strict";var r=n(2224).IteratorPrototype,o=n(4488),a=n(8981),i=n(5836),l=n(7256),c=function(){return this};e.exports=function(e,t,n,u){var s=t+" Iterator";return e.prototype=o(r,{next:a(+!u,n)}),i(e,s,!1,!0),l[s]=c,e}},536:function(e,t,n){"use strict";var r=n(3952),o=n(4580),a=n(1016),i=n(3564),l=n(8536),c=n(9976),u=n(7800),s=n(2288),f=n(5836),d=n(896),p=n(5424),v=n(3336),m=n(7256),g=n(2224),h=i.PROPER,y=i.CONFIGURABLE,b=g.IteratorPrototype,C=g.BUGGY_SAFARI_ITERATORS,E=v("iterator"),I="keys",x="values",T="entries",N=function(){return this};e.exports=function(e,t,n,i,v,g,A){c(n,t,i);var S,w,F,k=function(e){if(e===v&&_)return _;if(!C&&e&&e in M)return M[e];switch(e){case I:case x:case T:return function(){return new n(this,e)}}return function(){return new n(this)}},D=t+" Iterator",P=!1,M=e.prototype,R=M[E]||M["@@iterator"]||v&&M[v],_=!C&&R||k(v),O="Array"===t&&M.entries||R;if(O&&(S=u(O.call(new e)))!==Object.prototype&&S.next&&(a||u(S)===b||(s?s(S,b):l(S[E])||p(S,E,N)),f(S,D,!0,!0),a&&(m[D]=N)),h&&v===x&&R&&R.name!==x&&(!a&&y?d(M,"name",x):(P=!0,_=function(){return o(R,this)})),v)if(w={values:k(x),keys:g?_:k(I),entries:k(T)},A)for(F in w)(C||P||!(F in M))&&p(M,F,w[F]);else r({target:t,proto:!0,forced:C||P},w);return a&&!A||M[E]===_||p(M,E,_,{name:v}),m[t]=_,w}},2224:function(e,t,n){"use strict";var r,o,a,i=n(2064),l=n(8536),c=n(8608),u=n(4488),s=n(7800),f=n(5424),d=n(3336),p=n(1016),v=d("iterator"),m=!1;[].keys&&("next"in(a=[].keys())?(o=s(s(a)))!==Object.prototype&&(r=o):m=!0),!c(r)||i((function(){var e={};return r[v].call(e)!==e}))?r={}:p&&(r=u(r)),l(r[v])||f(r,v,(function(){return this})),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:m}},7256:function(e){"use strict";e.exports={}},5316:function(e,t,n){"use strict";var r=n(4596);e.exports=function(e){return r(e.length)}},2408:function(e,t,n){"use strict";var r=n(3464),o=n(9592),a=r("Map");e.exports={Map:a,set:o("set",2),get:o("get",1),has:o("has",1),remove:o("delete",1),proto:a.prototype}},24:function(e){"use strict";var t=Math.ceil,n=Math.floor;e.exports=Math.trunc||function(e){var r=+e;return(r>0?n:t)(r)}},9836:function(e,t,n){"use strict";var r,o,a,i,l,c=n(5216),u=n(4604),s=n(1884),f=n(3368).set,d=n(8604),p=n(6772),v=n(1172),m=n(1824),g=n(1432),h=c.MutationObserver||c.WebKitMutationObserver,y=c.document,b=c.process,C=c.Promise,E=u("queueMicrotask");if(!E){var I=new d,x=function(){var e,t;for(g&&(e=b.domain)&&e.exit();t=I.get();)try{t()}catch(e){throw I.head&&r(),e}e&&e.enter()};p||g||m||!h||!y?!v&&C&&C.resolve?((i=C.resolve(void 0)).constructor=C,l=s(i.then,i),r=function(){l(x)}):g?r=function(){b.nextTick(x)}:(f=s(f,c),r=function(){f(x)}):(o=!0,a=y.createTextNode(""),new h(x).observe(a,{characterData:!0}),r=function(){a.data=o=!o}),E=function(e){I.head||r(),I.add(e)}}e.exports=E},1243:function(e,t,n){"use strict";var r=n(28),o=TypeError,a=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw new o("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)};e.exports.f=function(e){return new a(e)}},3080:function(e,t,n){"use strict";var r=n(9352);e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:r(e)}},9720:function(e,t,n){"use strict";var r=n(9300),o=TypeError;e.exports=function(e){if(r(e))throw new o("The method doesn't accept regular expressions");return e}},8980:function(e,t,n){"use strict";var r=n(9172),o=n(9252),a=n(4580),i=n(2064),l=n(9547),c=n(4060),u=n(6500),s=n(2819),f=n(2899),d=Object.assign,p=Object.defineProperty,v=o([].concat);e.exports=!d||i((function(){if(r&&1!==d({b:1},d(p({},"a",{enumerable:!0,get:function(){p(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol("assign detection"),o="abcdefghijklmnopqrst";return e[n]=7,o.split("").forEach((function(e){t[e]=e})),7!==d({},e)[n]||l(d({},t)).join("")!==o}))?function(e,t){for(var n=s(e),o=arguments.length,i=1,d=c.f,p=u.f;o>i;)for(var m,g=f(arguments[i++]),h=d?v(l(g),d(g)):l(g),y=h.length,b=0;y>b;)m=h[b++],r&&!a(p,g,m)||(n[m]=g[m]);return n}:d},4488:function(e,t,n){"use strict";var r,o=n(2032),a=n(6452),i=n(3620),l=n(3328),c=n(7896),u=n(1940),s=n(924),f="prototype",d="script",p=s("IE_PROTO"),v=function(){},m=function(e){return"<"+d+">"+e+"</"+d+">"},g=function(e){e.write(m("")),e.close();var t=e.parentWindow.Object;return e=null,t},h=function(){try{r=new ActiveXObject("htmlfile")}catch(e){}var e,t,n;h="undefined"!=typeof document?document.domain&&r?g(r):(t=u("iframe"),n="java"+d+":",t.style.display="none",c.appendChild(t),t.src=String(n),(e=t.contentWindow.document).open(),e.write(m("document.F=Object")),e.close(),e.F):g(r);for(var o=i.length;o--;)delete h[f][i[o]];return h()};l[p]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(v[f]=o(e),n=new v,v[f]=null,n[p]=e):n=h(),void 0===t?n:a.f(n,t)}},6452:function(e,t,n){"use strict";var r=n(9172),o=n(3109),a=n(2280),i=n(2032),l=n(445),c=n(9547);t.f=r&&!o?Object.defineProperties:function(e,t){i(e);for(var n,r=l(t),o=c(t),u=o.length,s=0;u>s;)a.f(e,n=o[s++],r[n]);return e}},2280:function(e,t,n){"use strict";var r=n(9172),o=n(124),a=n(3109),i=n(2032),l=n(2319),c=TypeError,u=Object.defineProperty,s=Object.getOwnPropertyDescriptor,f="enumerable",d="configurable",p="writable";t.f=r?a?function(e,t,n){if(i(e),t=l(t),i(n),"function"==typeof e&&"prototype"===t&&"value"in n&&p in n&&!n[p]){var r=s(e,t);r&&r[p]&&(e[t]=n.value,n={configurable:d in n?n[d]:r[d],enumerable:f in n?n[f]:r[f],writable:!1})}return u(e,t,n)}:u:function(e,t,n){if(i(e),t=l(t),i(n),o)try{return u(e,t,n)}catch(e){}if("get"in n||"set"in n)throw new c("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},1008:function(e,t,n){"use strict";var r=n(9172),o=n(4580),a=n(6500),i=n(8981),l=n(445),c=n(2319),u=n(4664),s=n(124),f=Object.getOwnPropertyDescriptor;t.f=r?f:function(e,t){if(e=l(e),t=c(t),s)try{return f(e,t)}catch(e){}if(u(e,t))return i(!o(a.f,e,t),e[t])}},1920:function(e,t,n){"use strict";var r=n(7936),o=n(445),a=n(1600).f,i=n(940),l="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return l&&"Window"===r(e)?function(e){try{return a(e)}catch(e){return i(l)}}(e):a(o(e))}},1600:function(e,t,n){"use strict";var r=n(2884),o=n(3620).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},4060:function(e,t){"use strict";t.f=Object.getOwnPropertySymbols},7800:function(e,t,n){"use strict";var r=n(4664),o=n(8536),a=n(2819),i=n(924),l=n(2480),c=i("IE_PROTO"),u=Object,s=u.prototype;e.exports=l?u.getPrototypeOf:function(e){var t=a(e);if(r(t,c))return t[c];var n=t.constructor;return o(n)&&t instanceof n?n.prototype:t instanceof u?s:null}},5432:function(e,t,n){"use strict";var r=n(2064),o=n(8608),a=n(7936),i=n(3648),l=Object.isExtensible,c=r((function(){l(1)}));e.exports=c||i?function(e){return!!o(e)&&((!i||"ArrayBuffer"!==a(e))&&(!l||l(e)))}:l},2360:function(e,t,n){"use strict";var r=n(9252);e.exports=r({}.isPrototypeOf)},2884:function(e,t,n){"use strict";var r=n(9252),o=n(4664),a=n(445),i=n(7464).indexOf,l=n(3328),c=r([].push);e.exports=function(e,t){var n,r=a(e),u=0,s=[];for(n in r)!o(l,n)&&o(r,n)&&c(s,n);for(;t.length>u;)o(r,n=t[u++])&&(~i(s,n)||c(s,n));return s}},9547:function(e,t,n){"use strict";var r=n(2884),o=n(3620);e.exports=Object.keys||function(e){return r(e,o)}},6500:function(e,t){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,o=r&&!n.call({1:2},1);t.f=o?function(e){var t=r(this,e);return!!t&&t.enumerable}:n},2288:function(e,t,n){"use strict";var r=n(7864),o=n(2032),a=n(1459);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=r(Object.prototype,"__proto__","set"))(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return o(n),a(r),t?e(n,r):n.__proto__=r,n}}():void 0)},2768:function(e,t,n){"use strict";var r=n(9172),o=n(2064),a=n(9252),i=n(7800),l=n(9547),c=n(445),u=a(n(6500).f),s=a([].push),f=r&&o((function(){var e=Object.create(null);return e[2]=2,!u(e,2)})),d=function(e){return function(t){for(var n,o=c(t),a=l(o),d=f&&null===i(o),p=a.length,v=0,m=[];p>v;)n=a[v++],r&&!(d?n in o:u(o,n))||s(m,e?[n,o[n]]:o[n]);return m}};e.exports={entries:d(!0),values:d(!1)}},1616:function(e,t,n){"use strict";var r=n(6744),o=n(636);e.exports=r?{}.toString:function(){return"[object "+o(this)+"]"}},416:function(e,t,n){"use strict";var r=n(4580),o=n(8536),a=n(8608),i=TypeError;e.exports=function(e,t){var n,l;if("string"===t&&o(n=e.toString)&&!a(l=r(n,e)))return l;if(o(n=e.valueOf)&&!a(l=r(n,e)))return l;if("string"!==t&&o(n=e.toString)&&!a(l=r(n,e)))return l;throw new i("Can't convert object to primitive value")}},7876:function(e,t,n){"use strict";var r=n(3464),o=n(9252),a=n(1600),i=n(4060),l=n(2032),c=o([].concat);e.exports=r("Reflect","ownKeys")||function(e){var t=a.f(l(e)),n=i.f;return n?c(t,n(e)):t}},9832:function(e){"use strict";e.exports={}},5240:function(e){"use strict";e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},5524:function(e,t,n){"use strict";var r=n(5216),o=n(728),a=n(8536),i=n(6155),l=n(9376),c=n(3336),u=n(3322),s=n(5924),f=n(1016),d=n(3896),p=o&&o.prototype,v=c("species"),m=!1,g=a(r.PromiseRejectionEvent),h=i("Promise",(function(){var e=l(o),t=e!==String(o);if(!t&&66===d)return!0;if(f&&(!p.catch||!p.finally))return!0;if(!d||d<51||!/native code/.test(e)){var n=new o((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};if((n.constructor={})[v]=r,!(m=n.then((function(){}))instanceof r))return!0}return!t&&(u||s)&&!g}));e.exports={CONSTRUCTOR:h,REJECTION_EVENT:g,SUBCLASSING:m}},728:function(e,t,n){"use strict";var r=n(5216);e.exports=r.Promise},7211:function(e,t,n){"use strict";var r=n(2032),o=n(8608),a=n(1243);e.exports=function(e,t){if(r(e),o(t)&&t.constructor===e)return t;var n=a.f(e);return(0,n.resolve)(t),n.promise}},4880:function(e,t,n){"use strict";var r=n(728),o=n(347),a=n(5524).CONSTRUCTOR;e.exports=a||!o((function(e){r.all(e).then(void 0,(function(){}))}))},8604:function(e){"use strict";var t=function(){this.head=null,this.tail=null};t.prototype={add:function(e){var t={item:e,next:null},n=this.tail;n?n.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return null===(this.head=e.next)&&(this.tail=null),e.item}},e.exports=t},3520:function(e,t,n){"use strict";var r=n(2032);e.exports=function(){var e=r(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},2840:function(e,t,n){"use strict";var r=n(4580),o=n(4664),a=n(2360),i=n(3520),l=RegExp.prototype;e.exports=function(e){var t=e.flags;return void 0!==t||"flags"in l||o(e,"flags")||!a(l,e)?t:r(i,e)}},9952:function(e,t,n){"use strict";var r=n(9511),o=TypeError;e.exports=function(e){if(r(e))throw new o("Can't call method on "+e);return e}},4604:function(e,t,n){"use strict";var r=n(5216),o=n(9172),a=Object.getOwnPropertyDescriptor;e.exports=function(e){if(!o)return r[e];var t=a(r,e);return t&&t.value}},3120:function(e,t,n){"use strict";var r=n(3464),o=n(6968),a=n(3336),i=n(9172),l=a("species");e.exports=function(e){var t=r(e);i&&t&&!t[l]&&o(t,l,{configurable:!0,get:function(){return this}})}},5836:function(e,t,n){"use strict";var r=n(6744),o=n(2280).f,a=n(896),i=n(4664),l=n(1616),c=n(3336)("toStringTag");e.exports=function(e,t,n,u){var s=n?e:e&&e.prototype;s&&(i(s,c)||o(s,c,{configurable:!0,value:t}),u&&!r&&a(s,"toString",l))}},924:function(e,t,n){"use strict";var r=n(8852),o=n(6696),a=r("keys");e.exports=function(e){return a[e]||(a[e]=o(e))}},9284:function(e,t,n){"use strict";var r=n(5216),o=n(4408),a="__core-js_shared__",i=r[a]||o(a,{});e.exports=i},8852:function(e,t,n){"use strict";var r=n(1016),o=n(9284);(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.35.1",mode:r?"pure":"global",copyright:"© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.35.1/LICENSE",source:"https://github.com/zloirock/core-js"})},4928:function(e,t,n){"use strict";var r=n(2032),o=n(9556),a=n(9511),i=n(3336)("species");e.exports=function(e,t){var n,l=r(e).constructor;return void 0===l||a(n=r(l)[i])?t:o(n)}},6392:function(e,t,n){"use strict";var r=n(9252),o=n(5016),a=n(9352),i=n(9952),l=r("".charAt),c=r("".charCodeAt),u=r("".slice),s=function(e){return function(t,n){var r,s,f=a(i(t)),d=o(n),p=f.length;return d<0||d>=p?e?"":void 0:(r=c(f,d))<55296||r>56319||d+1===p||(s=c(f,d+1))<56320||s>57343?e?l(f,d):r:e?u(f,d,d+2):s-56320+(r-55296<<10)+65536}};e.exports={codeAt:s(!1),charAt:s(!0)}},2424:function(e,t,n){"use strict";var r=n(9252),o=2147483647,a=/[^\0-\u007E]/,i=/[.\u3002\uFF0E\uFF61]/g,l="Overflow: input needs wider integers to process",c=RangeError,u=r(i.exec),s=Math.floor,f=String.fromCharCode,d=r("".charCodeAt),p=r([].join),v=r([].push),m=r("".replace),g=r("".split),h=r("".toLowerCase),y=function(e){return e+22+75*(e<26)},b=function(e,t,n){var r=0;for(e=n?s(e/700):e>>1,e+=s(e/t);e>455;)e=s(e/35),r+=36;return s(r+36*e/(e+38))},C=function(e){var t=[];e=function(e){for(var t=[],n=0,r=e.length;n<r;){var o=d(e,n++);if(o>=55296&&o<=56319&&n<r){var a=d(e,n++);56320==(64512&a)?v(t,((1023&o)<<10)+(1023&a)+65536):(v(t,o),n--)}else v(t,o)}return t}(e);var n,r,a=e.length,i=128,u=0,m=72;for(n=0;n<e.length;n++)(r=e[n])<128&&v(t,f(r));var g=t.length,h=g;for(g&&v(t,"-");h<a;){var C=o;for(n=0;n<e.length;n++)(r=e[n])>=i&&r<C&&(C=r);var E=h+1;if(C-i>s((o-u)/E))throw new c(l);for(u+=(C-i)*E,i=C,n=0;n<e.length;n++){if((r=e[n])<i&&++u>o)throw new c(l);if(r===i){for(var I=u,x=36;;){var T=x<=m?1:x>=m+26?26:x-m;if(I<T)break;var N=I-T,A=36-T;v(t,f(y(T+N%A))),I=s(N/A),x+=36}v(t,f(y(I))),m=b(u,E,h===g),u=0,h++}}u++,i++}return p(t,"")};e.exports=function(e){var t,n,r=[],o=g(m(h(e),i,"."),".");for(t=0;t<o.length;t++)n=o[t],v(r,u(a,n)?"xn--"+C(n):n);return p(r,".")}},4144:function(e,t,n){"use strict";var r=n(3564).PROPER,o=n(2064),a=n(5276);e.exports=function(e){return o((function(){return!!a[e]()||"​᠎"!=="​᠎"[e]()||r&&a[e].name!==e}))}},6832:function(e,t,n){"use strict";var r=n(9252),o=n(9952),a=n(9352),i=n(5276),l=r("".replace),c=RegExp("^["+i+"]+"),u=RegExp("(^|[^"+i+"])["+i+"]+$"),s=function(e){return function(t){var n=a(o(t));return 1&e&&(n=l(n,c,"")),2&e&&(n=l(n,u,"$1")),n}};e.exports={start:s(1),end:s(2),trim:s(3)}},5235:function(e,t,n){"use strict";var r=n(3896),o=n(2064),a=n(5216).String;e.exports=!!Object.getOwnPropertySymbols&&!o((function(){var e=Symbol("symbol detection");return!a(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},72:function(e,t,n){"use strict";var r=n(4580),o=n(3464),a=n(3336),i=n(5424);e.exports=function(){var e=o("Symbol"),t=e&&e.prototype,n=t&&t.valueOf,l=a("toPrimitive");t&&!t[l]&&i(t,l,(function(e){return r(n,this)}),{arity:1})}},5080:function(e,t,n){"use strict";var r=n(3464),o=n(9252),a=r("Symbol"),i=a.keyFor,l=o(a.prototype.valueOf);e.exports=a.isRegisteredSymbol||function(e){try{return void 0!==i(l(e))}catch(e){return!1}}},2636:function(e,t,n){"use strict";for(var r=n(8852),o=n(3464),a=n(9252),i=n(5376),l=n(3336),c=o("Symbol"),u=c.isWellKnownSymbol,s=o("Object","getOwnPropertyNames"),f=a(c.prototype.valueOf),d=r("wks"),p=0,v=s(c),m=v.length;p<m;p++)try{var g=v[p];i(c[g])&&l(g)}catch(e){}e.exports=function(e){if(u&&u(e))return!0;try{for(var t=f(e),n=0,r=s(d),o=r.length;n<o;n++)if(d[r[n]]==t)return!0}catch(e){}return!1}},7780:function(e,t,n){"use strict";var r=n(5235);e.exports=r&&!!Symbol.for&&!!Symbol.keyFor},3368:function(e,t,n){"use strict";var r,o,a,i,l=n(5216),c=n(9867),u=n(1884),s=n(8536),f=n(4664),d=n(2064),p=n(7896),v=n(940),m=n(1940),g=n(3492),h=n(6772),y=n(1432),b=l.setImmediate,C=l.clearImmediate,E=l.process,I=l.Dispatch,x=l.Function,T=l.MessageChannel,N=l.String,A=0,S={},w="onreadystatechange";d((function(){r=l.location}));var F=function(e){if(f(S,e)){var t=S[e];delete S[e],t()}},k=function(e){return function(){F(e)}},D=function(e){F(e.data)},P=function(e){l.postMessage(N(e),r.protocol+"//"+r.host)};b&&C||(b=function(e){g(arguments.length,1);var t=s(e)?e:x(e),n=v(arguments,1);return S[++A]=function(){c(t,void 0,n)},o(A),A},C=function(e){delete S[e]},y?o=function(e){E.nextTick(k(e))}:I&&I.now?o=function(e){I.now(k(e))}:T&&!h?(i=(a=new T).port2,a.port1.onmessage=D,o=u(i.postMessage,i)):l.addEventListener&&s(l.postMessage)&&!l.importScripts&&r&&"file:"!==r.protocol&&!d(P)?(o=P,l.addEventListener("message",D,!1)):o=w in m("script")?function(e){p.appendChild(m("script"))[w]=function(){p.removeChild(this),F(e)}}:function(e){setTimeout(k(e),0)}),e.exports={set:b,clear:C}},4180:function(e,t,n){"use strict";var r=n(5016),o=Math.max,a=Math.min;e.exports=function(e,t){var n=r(e);return n<0?o(n+t,0):a(n,t)}},445:function(e,t,n){"use strict";var r=n(2899),o=n(9952);e.exports=function(e){return r(o(e))}},5016:function(e,t,n){"use strict";var r=n(24);e.exports=function(e){var t=+e;return t!=t||0===t?0:r(t)}},4596:function(e,t,n){"use strict";var r=n(5016),o=Math.min;e.exports=function(e){var t=r(e);return t>0?o(t,9007199254740991):0}},2819:function(e,t,n){"use strict";var r=n(9952),o=Object;e.exports=function(e){return o(r(e))}},3504:function(e,t,n){"use strict";var r=n(4580),o=n(8608),a=n(5376),i=n(1636),l=n(416),c=n(3336),u=TypeError,s=c("toPrimitive");e.exports=function(e,t){if(!o(e)||a(e))return e;var n,c=i(e,s);if(c){if(void 0===t&&(t="default"),n=r(c,e,t),!o(n)||a(n))return n;throw new u("Can't convert object to primitive value")}return void 0===t&&(t="number"),l(e,t)}},2319:function(e,t,n){"use strict";var r=n(3504),o=n(5376);e.exports=function(e){var t=r(e,"string");return o(t)?t:t+""}},6744:function(e,t,n){"use strict";var r={};r[n(3336)("toStringTag")]="z",e.exports="[object z]"===String(r)},9352:function(e,t,n){"use strict";var r=n(636),o=String;e.exports=function(e){if("Symbol"===r(e))throw new TypeError("Cannot convert a Symbol value to a string");return o(e)}},8944:function(e){"use strict";var t=String;e.exports=function(e){try{return t(e)}catch(e){return"Object"}}},6696:function(e,t,n){"use strict";var r=n(9252),o=0,a=Math.random(),i=r(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+i(++o+a,36)}},928:function(e,t,n){"use strict";var r=n(2064),o=n(3336),a=n(9172),i=n(1016),l=o("iterator");e.exports=!r((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n=new URLSearchParams("a=1&a=2&b=3"),r="";return e.pathname="c%20d",t.forEach((function(e,n){t.delete("b"),r+=n+e})),n.delete("a",2),n.delete("b",void 0),i&&(!e.toJSON||!n.has("a",1)||n.has("a",2)||!n.has("a",void 0)||n.has("b"))||!t.size&&(i||!a)||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[l]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==r||"x"!==new URL("http://x",void 0).host}))},6416:function(e,t,n){"use strict";var r=n(5235);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3109:function(e,t,n){"use strict";var r=n(9172),o=n(2064);e.exports=r&&o((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},3492:function(e){"use strict";var t=TypeError;e.exports=function(e,n){if(e<n)throw new t("Not enough arguments");return e}},3184:function(e,t,n){"use strict";var r=n(5216),o=n(8536),a=r.WeakMap;e.exports=o(a)&&/native code/.test(String(a))},1084:function(e,t,n){"use strict";var r=n(9832),o=n(4664),a=n(1104),i=n(2280).f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});o(t,e)||i(t,e,{value:a.f(e)})}},1104:function(e,t,n){"use strict";var r=n(3336);t.f=r},3336:function(e,t,n){"use strict";var r=n(5216),o=n(8852),a=n(4664),i=n(6696),l=n(5235),c=n(6416),u=r.Symbol,s=o("wks"),f=c?u.for||u:u&&u.withoutSetter||i;e.exports=function(e){return a(s,e)||(s[e]=l&&a(u,e)?u[e]:f("Symbol."+e)),s[e]}},5276:function(e){"use strict";e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},9232:function(e,t,n){"use strict";var r=n(3952),o=n(2360),a=n(7800),i=n(2288),l=n(1100),c=n(4488),u=n(896),s=n(8981),f=n(9055),d=n(9035),p=n(5799),v=n(3080),m=n(3336)("toStringTag"),g=Error,h=[].push,y=function(e,t){var n,r=o(b,this);i?n=i(new g,r?a(this):b):(n=r?this:c(b),u(n,m,"Error")),void 0!==t&&u(n,"message",v(t)),d(n,y,n.stack,1),arguments.length>2&&f(n,arguments[2]);var l=[];return p(e,h,{that:l}),u(n,"errors",l),n};i?i(y,g):l(y,g,{name:!0});var b=y.prototype=c(g.prototype,{constructor:s(1,y),message:s(1,""),name:s(1,"AggregateError")});r({global:!0,constructor:!0,arity:2},{AggregateError:y})},816:function(e,t,n){"use strict";n(9232)},2216:function(e,t,n){"use strict";var r=n(3952),o=n(2064),a=n(3204),i=n(8608),l=n(2819),c=n(5316),u=n(8200),s=n(4895),f=n(4872),d=n(5384),p=n(3336),v=n(3896),m=p("isConcatSpreadable"),g=v>=51||!o((function(){var e=[];return e[m]=!1,e.concat()[0]!==e})),h=function(e){if(!i(e))return!1;var t=e[m];return void 0!==t?!!t:a(e)};r({target:"Array",proto:!0,arity:1,forced:!g||!d("concat")},{concat:function(e){var t,n,r,o,a,i=l(this),d=f(i,0),p=0;for(t=-1,r=arguments.length;t<r;t++)if(h(a=-1===t?i:arguments[t]))for(o=c(a),u(p+o),n=0;n<o;n++,p++)n in a&&s(d,p,a[n]);else u(p+1),s(d,p++,a);return d.length=p,d}})},4124:function(e,t,n){"use strict";var r=n(3952),o=n(3028),a=n(1472);r({target:"Array",proto:!0},{fill:o}),a("fill")},4864:function(e,t,n){"use strict";var r=n(3952),o=n(7608).filter;r({target:"Array",proto:!0,forced:!n(5384)("filter")},{filter:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},8628:function(e,t,n){"use strict";var r=n(3952),o=n(7608).findIndex,a=n(1472),i="findIndex",l=!0;i in[]&&Array(1)[i]((function(){l=!1})),r({target:"Array",proto:!0,forced:l},{findIndex:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),a(i)},6952:function(e,t,n){"use strict";var r=n(3952),o=n(7608).find,a=n(1472),i="find",l=!0;i in[]&&Array(1)[i]((function(){l=!1})),r({target:"Array",proto:!0,forced:l},{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),a(i)},7572:function(e,t,n){"use strict";var r=n(3952),o=n(9980);r({target:"Array",stat:!0,forced:!n(347)((function(e){Array.from(e)}))},{from:o})},6504:function(e,t,n){"use strict";var r=n(3952),o=n(7464).includes,a=n(2064),i=n(1472);r({target:"Array",proto:!0,forced:a((function(){return!Array(1).includes()}))},{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),i("includes")},1904:function(e,t,n){"use strict";var r=n(3952),o=n(1248),a=n(7464).indexOf,i=n(4888),l=o([].indexOf),c=!!l&&1/l([1],1,-0)<0;r({target:"Array",proto:!0,forced:c||!i("indexOf")},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return c?l(this,e,t)||0:a(this,e,t)}})},3276:function(e,t,n){"use strict";n(3952)({target:"Array",stat:!0},{isArray:n(3204)})},340:function(e,t,n){"use strict";var r=n(445),o=n(1472),a=n(7256),i=n(2344),l=n(2280).f,c=n(536),u=n(3848),s=n(1016),f=n(9172),d="Array Iterator",p=i.set,v=i.getterFor(d);e.exports=c(Array,"Array",(function(e,t){p(this,{type:d,target:r(e),index:0,kind:t})}),(function(){var e=v(this),t=e.target,n=e.index++;if(!t||n>=t.length)return e.target=void 0,u(void 0,!0);switch(e.kind){case"keys":return u(n,!1);case"values":return u(t[n],!1)}return u([n,t[n]],!1)}),"values");var m=a.Arguments=a.Array;if(o("keys"),o("values"),o("entries"),!s&&f&&"values"!==m.name)try{l(m,"name",{value:"values"})}catch(e){}},7092:function(e,t,n){"use strict";var r=n(3952),o=n(7608).map;r({target:"Array",proto:!0,forced:!n(5384)("map")},{map:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},3948:function(e,t,n){"use strict";var r=n(3952),o=n(2819),a=n(5316),i=n(1716),l=n(8200);r({target:"Array",proto:!0,arity:1,forced:n(2064)((function(){return 4294967297!==[].push.call({length:4294967296},1)}))||!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}}()},{push:function(e){var t=o(this),n=a(t),r=arguments.length;l(n+r);for(var c=0;c<r;c++)t[n]=arguments[c],n++;return i(t,n),n}})},5863:function(e,t,n){"use strict";var r=n(3952),o=n(3204),a=n(9496),i=n(8608),l=n(4180),c=n(5316),u=n(445),s=n(4895),f=n(3336),d=n(5384),p=n(940),v=d("slice"),m=f("species"),g=Array,h=Math.max;r({target:"Array",proto:!0,forced:!v},{slice:function(e,t){var n,r,f,d=u(this),v=c(d),y=l(e,v),b=l(void 0===t?v:t,v);if(o(d)&&(n=d.constructor,(a(n)&&(n===g||o(n.prototype))||i(n)&&null===(n=n[m]))&&(n=void 0),n===g||void 0===n))return p(d,y,b);for(r=new(void 0===n?g:n)(h(b-y,0)),f=0;y<b;y++,f++)y in d&&s(r,f,d[y]);return r.length=f,r}})},8280:function(e,t,n){"use strict";var r=n(3952),o=n(9252),a=n(28),i=n(2819),l=n(5316),c=n(6940),u=n(9352),s=n(2064),f=n(3864),d=n(4888),p=n(7587),v=n(6028),m=n(3896),g=n(1244),h=[],y=o(h.sort),b=o(h.push),C=s((function(){h.sort(void 0)})),E=s((function(){h.sort(null)})),I=d("sort"),x=!s((function(){if(m)return m<70;if(!(p&&p>3)){if(v)return!0;if(g)return g<603;var e,t,n,r,o="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)h.push({k:t+r,v:n})}for(h.sort((function(e,t){return t.v-e.v})),r=0;r<h.length;r++)t=h[r].k.charAt(0),o.charAt(o.length-1)!==t&&(o+=t);return"DGBEFHACIJK"!==o}}));r({target:"Array",proto:!0,forced:C||!E||!I||!x},{sort:function(e){void 0!==e&&a(e);var t=i(this);if(x)return void 0===e?y(t):y(t,e);var n,r,o=[],s=l(t);for(r=0;r<s;r++)r in t&&b(o,t[r]);for(f(o,function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:u(t)>u(n)?1:-1}}(e)),n=l(o),r=0;r<n;)t[r]=o[r++];for(;r<s;)c(t,r++);return t}})},4152:function(e,t,n){"use strict";var r=n(3952),o=n(2819),a=n(4180),i=n(5016),l=n(5316),c=n(1716),u=n(8200),s=n(4872),f=n(4895),d=n(6940),p=n(5384)("splice"),v=Math.max,m=Math.min;r({target:"Array",proto:!0,forced:!p},{splice:function(e,t){var n,r,p,g,h,y,b=o(this),C=l(b),E=a(e,C),I=arguments.length;for(0===I?n=r=0:1===I?(n=0,r=C-E):(n=I-2,r=m(v(i(t),0),C-E)),u(C+n-r),p=s(b,r),g=0;g<r;g++)(h=E+g)in b&&f(p,g,b[h]);if(p.length=r,n<r){for(g=E;g<C-r;g++)y=g+n,(h=g+r)in b?b[y]=b[h]:d(b,y);for(g=C;g>C-r+n;g--)d(b,g-1)}else if(n>r)for(g=C-r;g>E;g--)y=g+n-1,(h=g+r-1)in b?b[y]=b[h]:d(b,y);for(g=0;g<n;g++)b[g+E]=arguments[g+2];return c(b,C-r+n),p}})},7532:function(){},4388:function(e,t,n){"use strict";var r=n(3952),o=n(5404);r({target:"Function",proto:!0,forced:Function.bind!==o},{bind:o})},8824:function(e,t,n){"use strict";var r=n(3952),o=n(3464),a=n(9867),i=n(4580),l=n(9252),c=n(2064),u=n(8536),s=n(5376),f=n(940),d=n(3676),p=n(5235),v=String,m=o("JSON","stringify"),g=l(/./.exec),h=l("".charAt),y=l("".charCodeAt),b=l("".replace),C=l(1..toString),E=/[\uD800-\uDFFF]/g,I=/^[\uD800-\uDBFF]$/,x=/^[\uDC00-\uDFFF]$/,T=!p||c((function(){var e=o("Symbol")("stringify detection");return"[null]"!==m([e])||"{}"!==m({a:e})||"{}"!==m(Object(e))})),N=c((function(){return'"\\udf06\\ud834"'!==m("\udf06\ud834")||'"\\udead"'!==m("\udead")})),A=function(e,t){var n=f(arguments),r=d(t);if(u(r)||void 0!==e&&!s(e))return n[1]=function(e,t){if(u(r)&&(t=i(r,this,v(e),t)),!s(t))return t},a(m,null,n)},S=function(e,t,n){var r=h(n,t-1),o=h(n,t+1);return g(I,e)&&!g(x,o)||g(x,e)&&!g(I,r)?"\\u"+C(y(e,0),16):e};m&&r({target:"JSON",stat:!0,arity:3,forced:T||N},{stringify:function(e,t,n){var r=f(arguments),o=a(T?A:m,null,r);return N&&"string"==typeof o?b(o,E,S):o}})},7548:function(e,t,n){"use strict";var r=n(5216);n(5836)(r.JSON,"JSON",!0)},4316:function(e,t,n){"use strict";n(6072)("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),n(3928))},2648:function(e,t,n){"use strict";var r=n(3952),o=n(9252),a=n(28),i=n(9952),l=n(5799),c=n(2408),u=n(1016),s=c.Map,f=c.has,d=c.get,p=c.set,v=o([].push);r({target:"Map",stat:!0,forced:u},{groupBy:function(e,t){i(e),a(t);var n=new s,r=0;return l(e,(function(e){var o=t(e,r++);f(n,o)?v(d(n,o),e):p(n,o,[e])})),n}})},6775:function(e,t,n){"use strict";n(4316)},3787:function(){},6448:function(e,t,n){"use strict";var r=n(3952),o=n(8980);r({target:"Object",stat:!0,arity:2,forced:Object.assign!==o},{assign:o})},8708:function(e,t,n){"use strict";var r=n(3952),o=n(9172),a=n(2280).f;r({target:"Object",stat:!0,forced:Object.defineProperty!==a,sham:!o},{defineProperty:a})},6360:function(e,t,n){"use strict";var r=n(3952),o=n(2768).entries;r({target:"Object",stat:!0},{entries:function(e){return o(e)}})},7648:function(e,t,n){"use strict";var r=n(3952),o=n(2064),a=n(445),i=n(1008).f,l=n(9172);r({target:"Object",stat:!0,forced:!l||o((function(){i(1)})),sham:!l},{getOwnPropertyDescriptor:function(e,t){return i(a(e),t)}})},5032:function(e,t,n){"use strict";var r=n(3952),o=n(9172),a=n(7876),i=n(445),l=n(1008),c=n(4895);r({target:"Object",stat:!0,sham:!o},{getOwnPropertyDescriptors:function(e){for(var t,n,r=i(e),o=l.f,u=a(r),s={},f=0;u.length>f;)void 0!==(n=o(r,t=u[f++]))&&c(s,t,n);return s}})},9672:function(e,t,n){"use strict";var r=n(3952),o=n(5235),a=n(2064),i=n(4060),l=n(2819);r({target:"Object",stat:!0,forced:!o||a((function(){i.f(1)}))},{getOwnPropertySymbols:function(e){var t=i.f;return t?t(l(e)):[]}})},88:function(e,t,n){"use strict";var r=n(3952),o=n(2819),a=n(9547);r({target:"Object",stat:!0,forced:n(2064)((function(){a(1)}))},{keys:function(e){return a(o(e))}})},2352:function(){},7016:function(e,t,n){"use strict";var r=n(3952),o=n(2768).values;r({target:"Object",stat:!0},{values:function(e){return o(e)}})},8128:function(e,t,n){"use strict";var r=n(3952),o=n(4580),a=n(28),i=n(1243),l=n(5240),c=n(5799);r({target:"Promise",stat:!0,forced:n(4880)},{allSettled:function(e){var t=this,n=i.f(t),r=n.resolve,u=n.reject,s=l((function(){var n=a(t.resolve),i=[],l=0,u=1;c(e,(function(e){var a=l++,c=!1;u++,o(n,t,e).then((function(e){c||(c=!0,i[a]={status:"fulfilled",value:e},--u||r(i))}),(function(e){c||(c=!0,i[a]={status:"rejected",reason:e},--u||r(i))}))})),--u||r(i)}));return s.error&&u(s.value),n.promise}})},1572:function(e,t,n){"use strict";var r=n(3952),o=n(4580),a=n(28),i=n(1243),l=n(5240),c=n(5799);r({target:"Promise",stat:!0,forced:n(4880)},{all:function(e){var t=this,n=i.f(t),r=n.resolve,u=n.reject,s=l((function(){var n=a(t.resolve),i=[],l=0,s=1;c(e,(function(e){var a=l++,c=!1;s++,o(n,t,e).then((function(e){c||(c=!0,i[a]=e,--s||r(i))}),u)})),--s||r(i)}));return s.error&&u(s.value),n.promise}})},3728:function(e,t,n){"use strict";var r=n(3952),o=n(4580),a=n(28),i=n(3464),l=n(1243),c=n(5240),u=n(5799),s=n(4880),f="No one promise resolved";r({target:"Promise",stat:!0,forced:s},{any:function(e){var t=this,n=i("AggregateError"),r=l.f(t),s=r.resolve,d=r.reject,p=c((function(){var r=a(t.resolve),i=[],l=0,c=1,p=!1;u(e,(function(e){var a=l++,u=!1;c++,o(r,t,e).then((function(e){u||p||(p=!0,s(e))}),(function(e){u||p||(u=!0,i[a]=e,--c||d(new n(i,f)))}))})),--c||d(new n(i,f))}));return p.error&&d(p.value),r.promise}})},2996:function(e,t,n){"use strict";var r=n(3952),o=n(1016),a=n(5524).CONSTRUCTOR,i=n(728),l=n(3464),c=n(8536),u=n(5424),s=i&&i.prototype;if(r({target:"Promise",proto:!0,forced:a,real:!0},{catch:function(e){return this.then(void 0,e)}}),!o&&c(i)){var f=l("Promise").prototype.catch;s.catch!==f&&u(s,"catch",f,{unsafe:!0})}},6160:function(e,t,n){"use strict";var r,o,a,i=n(3952),l=n(1016),c=n(1432),u=n(5216),s=n(4580),f=n(5424),d=n(2288),p=n(5836),v=n(3120),m=n(28),g=n(8536),h=n(8608),y=n(4572),b=n(4928),C=n(3368).set,E=n(9836),I=n(3320),x=n(5240),T=n(8604),N=n(2344),A=n(728),S=n(5524),w=n(1243),F="Promise",k=S.CONSTRUCTOR,D=S.REJECTION_EVENT,P=S.SUBCLASSING,M=N.getterFor(F),R=N.set,_=A&&A.prototype,O=A,B=_,j=u.TypeError,L=u.document,U=u.process,K=w.f,V=K,z=!!(L&&L.createEvent&&u.dispatchEvent),G="unhandledrejection",H=function(e){var t;return!(!h(e)||!g(t=e.then))&&t},q=function(e,t){var n,r,o,a=t.value,i=1===t.state,l=i?e.ok:e.fail,c=e.resolve,u=e.reject,f=e.domain;try{l?(i||(2===t.rejection&&Z(t),t.rejection=1),!0===l?n=a:(f&&f.enter(),n=l(a),f&&(f.exit(),o=!0)),n===e.promise?u(new j("Promise-chain cycle")):(r=H(n))?s(r,n,c,u):c(n)):u(a)}catch(e){f&&!o&&f.exit(),u(e)}},Y=function(e,t){e.notified||(e.notified=!0,E((function(){for(var n,r=e.reactions;n=r.get();)q(n,e);e.notified=!1,t&&!e.rejection&&Q(e)})))},W=function(e,t,n){var r,o;z?((r=L.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),u.dispatchEvent(r)):r={promise:t,reason:n},!D&&(o=u["on"+e])?o(r):e===G&&I("Unhandled promise rejection",n)},Q=function(e){s(C,u,(function(){var t,n=e.facade,r=e.value;if(X(e)&&(t=x((function(){c?U.emit("unhandledRejection",r,n):W(G,n,r)})),e.rejection=c||X(e)?2:1,t.error))throw t.value}))},X=function(e){return 1!==e.rejection&&!e.parent},Z=function(e){s(C,u,(function(){var t=e.facade;c?U.emit("rejectionHandled",t):W("rejectionhandled",t,e.value)}))},J=function(e,t,n){return function(r){e(t,r,n)}},$=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,Y(e,!0))},ee=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw new j("Promise can't be resolved itself");var r=H(t);r?E((function(){var n={done:!1};try{s(r,t,J(ee,n,e),J($,n,e))}catch(t){$(n,t,e)}})):(e.value=t,e.state=1,Y(e,!1))}catch(t){$({done:!1},t,e)}}};if(k&&(B=(O=function(e){y(this,B),m(e),s(r,this);var t=M(this);try{e(J(ee,t),J($,t))}catch(e){$(t,e)}}).prototype,(r=function(e){R(this,{type:F,done:!1,notified:!1,parent:!1,reactions:new T,rejection:!1,state:0,value:void 0})}).prototype=f(B,"then",(function(e,t){var n=M(this),r=K(b(this,O));return n.parent=!0,r.ok=!g(e)||e,r.fail=g(t)&&t,r.domain=c?U.domain:void 0,0===n.state?n.reactions.add(r):E((function(){q(r,n)})),r.promise})),o=function(){var e=new r,t=M(e);this.promise=e,this.resolve=J(ee,t),this.reject=J($,t)},w.f=K=function(e){return e===O||undefined===e?new o(e):V(e)},!l&&g(A)&&_!==Object.prototype)){a=_.then,P||f(_,"then",(function(e,t){var n=this;return new O((function(e,t){s(a,n,e,t)})).then(e,t)}),{unsafe:!0});try{delete _.constructor}catch(e){}d&&d(_,B)}i({global:!0,constructor:!0,wrap:!0,forced:k},{Promise:O}),p(O,F,!1,!0),v(F)},196:function(e,t,n){"use strict";var r=n(3952),o=n(1016),a=n(728),i=n(2064),l=n(3464),c=n(8536),u=n(4928),s=n(7211),f=n(5424),d=a&&a.prototype;if(r({target:"Promise",proto:!0,real:!0,forced:!!a&&i((function(){d.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=u(this,l("Promise")),n=c(e);return this.then(n?function(n){return s(t,e()).then((function(){return n}))}:e,n?function(n){return s(t,e()).then((function(){throw n}))}:e)}}),!o&&c(a)){var p=l("Promise").prototype.finally;d.finally!==p&&f(d,"finally",p,{unsafe:!0})}},6244:function(e,t,n){"use strict";n(6160),n(1572),n(2996),n(9348),n(4072),n(5832)},9348:function(e,t,n){"use strict";var r=n(3952),o=n(4580),a=n(28),i=n(1243),l=n(5240),c=n(5799);r({target:"Promise",stat:!0,forced:n(4880)},{race:function(e){var t=this,n=i.f(t),r=n.reject,u=l((function(){var i=a(t.resolve);c(e,(function(e){o(i,t,e).then(n.resolve,r)}))}));return u.error&&r(u.value),n.promise}})},4072:function(e,t,n){"use strict";var r=n(3952),o=n(1243);r({target:"Promise",stat:!0,forced:n(5524).CONSTRUCTOR},{reject:function(e){var t=o.f(this);return(0,t.reject)(e),t.promise}})},5832:function(e,t,n){"use strict";var r=n(3952),o=n(3464),a=n(1016),i=n(728),l=n(5524).CONSTRUCTOR,c=n(7211),u=o("Promise"),s=a&&!l;r({target:"Promise",stat:!0,forced:a||l},{resolve:function(e){return c(s&&this===u?i:this,e)}})},96:function(e,t,n){"use strict";var r=n(3952),o=n(1243);r({target:"Promise",stat:!0},{withResolvers:function(){var e=o.f(this);return{promise:e.promise,resolve:e.resolve,reject:e.reject}}})},3223:function(e,t,n){"use strict";var r=n(3952),o=n(2032),a=n(1008).f;r({target:"Reflect",stat:!0},{deleteProperty:function(e,t){var n=a(o(e),t);return!(n&&!n.configurable)&&delete e[t]}})},3400:function(e,t,n){"use strict";n(3952)({target:"Reflect",stat:!0},{has:function(e,t){return t in e}})},9988:function(e,t,n){"use strict";var r=n(3952),o=n(4580),a=n(2032),i=n(8608),l=n(5072),c=n(2064),u=n(2280),s=n(1008),f=n(7800),d=n(8981);r({target:"Reflect",stat:!0,forced:c((function(){var e=function(){},t=u.f(new e,"a",{configurable:!0});return!1!==Reflect.set(e.prototype,"a",1,t)}))},{set:function e(t,n,r){var c,p,v,m=arguments.length<4?t:arguments[3],g=s.f(a(t),n);if(!g){if(i(p=f(t)))return e(p,n,r,m);g=d(0)}if(l(g)){if(!1===g.writable||!i(m))return!1;if(c=s.f(m,n)){if(c.get||c.set||!1===c.writable)return!1;c.value=r,u.f(m,n,c)}else u.f(m,n,d(0,r))}else{if(void 0===(v=g.set))return!1;o(v,m,r)}return!0}})},176:function(){},1204:function(){},6784:function(e,t,n){"use strict";n(6072)("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),n(3928))},1160:function(e,t,n){"use strict";n(6784)},976:function(e,t,n){"use strict";var r,o=n(3952),a=n(1248),i=n(1008).f,l=n(4596),c=n(9352),u=n(9720),s=n(9952),f=n(660),d=n(1016),p=a("".slice),v=Math.min,m=f("endsWith");o({target:"String",proto:!0,forced:!!(d||m||(r=i(String.prototype,"endsWith"),!r||r.writable))&&!m},{endsWith:function(e){var t=c(s(this));u(e);var n=arguments.length>1?arguments[1]:void 0,r=t.length,o=void 0===n?r:v(l(n),r),a=c(e);return p(t,o-a.length,o)===a}})},3512:function(e,t,n){"use strict";var r=n(3952),o=n(9252),a=n(9720),i=n(9952),l=n(9352),c=n(660),u=o("".indexOf);r({target:"String",proto:!0,forced:!c("includes")},{includes:function(e){return!!~u(l(i(this)),l(a(e)),arguments.length>1?arguments[1]:void 0)}})},4176:function(e,t,n){"use strict";var r=n(6392).charAt,o=n(9352),a=n(2344),i=n(536),l=n(3848),c="String Iterator",u=a.set,s=a.getterFor(c);i(String,"String",(function(e){u(this,{type:c,string:o(e),index:0})}),(function(){var e,t=s(this),n=t.string,o=t.index;return o>=n.length?l(void 0,!0):(e=r(n,o),t.index+=e.length,l(e,!1))}))},6988:function(e,t,n){"use strict";var r=n(3952),o=n(4580),a=n(9252),i=n(9952),l=n(8536),c=n(9511),u=n(9300),s=n(9352),f=n(1636),d=n(2840),p=n(1440),v=n(3336),m=n(1016),g=v("replace"),h=TypeError,y=a("".indexOf),b=a("".replace),C=a("".slice),E=Math.max;r({target:"String",proto:!0},{replaceAll:function(e,t){var n,r,a,v,I,x,T,N,A,S=i(this),w=0,F=0,k="";if(!c(e)){if((n=u(e))&&(r=s(i(d(e))),!~y(r,"g")))throw new h("`.replaceAll` does not allow non-global regexes");if(a=f(e,g))return o(a,e,S,t);if(m&&n)return b(s(S),e,t)}for(v=s(S),I=s(e),(x=l(t))||(t=s(t)),T=I.length,N=E(1,T),w=y(v,I);-1!==w;)A=x?s(t(I,w,v)):p(I,v,w,[],void 0,t),k+=C(v,F,w)+A,F=w+T,w=w+N>v.length?-1:y(v,I,w+N);return F<v.length&&(k+=C(v,F)),k}})},2008:function(){},6432:function(e,t,n){"use strict";var r,o=n(3952),a=n(1248),i=n(1008).f,l=n(4596),c=n(9352),u=n(9720),s=n(9952),f=n(660),d=n(1016),p=a("".slice),v=Math.min,m=f("startsWith");o({target:"String",proto:!0,forced:!!(d||m||(r=i(String.prototype,"startsWith"),!r||r.writable))&&!m},{startsWith:function(e){var t=c(s(this));u(e);var n=l(v(arguments.length>1?arguments[1]:void 0,t.length)),r=c(e);return p(t,n,n+r.length)===r}})},3003:function(e,t,n){"use strict";var r=n(3952),o=n(6832).trim;r({target:"String",proto:!0,forced:n(4144)("trim")},{trim:function(){return o(this)}})},2240:function(e,t,n){"use strict";n(1084)("asyncIterator")},3840:function(e,t,n){"use strict";var r=n(3952),o=n(5216),a=n(4580),i=n(9252),l=n(1016),c=n(9172),u=n(5235),s=n(2064),f=n(4664),d=n(2360),p=n(2032),v=n(445),m=n(2319),g=n(9352),h=n(8981),y=n(4488),b=n(9547),C=n(1600),E=n(1920),I=n(4060),x=n(1008),T=n(2280),N=n(6452),A=n(6500),S=n(5424),w=n(6968),F=n(8852),k=n(924),D=n(3328),P=n(6696),M=n(3336),R=n(1104),_=n(1084),O=n(72),B=n(5836),j=n(2344),L=n(7608).forEach,U=k("hidden"),K="Symbol",V="prototype",z=j.set,G=j.getterFor(K),H=Object[V],q=o.Symbol,Y=q&&q[V],W=o.RangeError,Q=o.TypeError,X=o.QObject,Z=x.f,J=T.f,$=E.f,ee=A.f,te=i([].push),ne=F("symbols"),re=F("op-symbols"),oe=F("wks"),ae=!X||!X[V]||!X[V].findChild,ie=function(e,t,n){var r=Z(H,t);r&&delete H[t],J(e,t,n),r&&e!==H&&J(H,t,r)},le=c&&s((function(){return 7!==y(J({},"a",{get:function(){return J(this,"a",{value:7}).a}})).a}))?ie:J,ce=function(e,t){var n=ne[e]=y(Y);return z(n,{type:K,tag:e,description:t}),c||(n.description=t),n},ue=function(e,t,n){e===H&&ue(re,t,n),p(e);var r=m(t);return p(n),f(ne,r)?(n.enumerable?(f(e,U)&&e[U][r]&&(e[U][r]=!1),n=y(n,{enumerable:h(0,!1)})):(f(e,U)||J(e,U,h(1,y(null))),e[U][r]=!0),le(e,r,n)):J(e,r,n)},se=function(e,t){p(e);var n=v(t),r=b(n).concat(ve(n));return L(r,(function(t){c&&!a(fe,n,t)||ue(e,t,n[t])})),e},fe=function(e){var t=m(e),n=a(ee,this,t);return!(this===H&&f(ne,t)&&!f(re,t))&&(!(n||!f(this,t)||!f(ne,t)||f(this,U)&&this[U][t])||n)},de=function(e,t){var n=v(e),r=m(t);if(n!==H||!f(ne,r)||f(re,r)){var o=Z(n,r);return!o||!f(ne,r)||f(n,U)&&n[U][r]||(o.enumerable=!0),o}},pe=function(e){var t=$(v(e)),n=[];return L(t,(function(e){f(ne,e)||f(D,e)||te(n,e)})),n},ve=function(e){var t=e===H,n=$(t?re:v(e)),r=[];return L(n,(function(e){!f(ne,e)||t&&!f(H,e)||te(r,ne[e])})),r};u||(q=function(){if(d(Y,this))throw new Q("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?g(arguments[0]):void 0,t=P(e),n=function(e){var r=void 0===this?o:this;r===H&&a(n,re,e),f(r,U)&&f(r[U],t)&&(r[U][t]=!1);var i=h(1,e);try{le(r,t,i)}catch(e){if(!(e instanceof W))throw e;ie(r,t,i)}};return c&&ae&&le(H,t,{configurable:!0,set:n}),ce(t,e)},S(Y=q[V],"toString",(function(){return G(this).tag})),S(q,"withoutSetter",(function(e){return ce(P(e),e)})),A.f=fe,T.f=ue,N.f=se,x.f=de,C.f=E.f=pe,I.f=ve,R.f=function(e){return ce(M(e),e)},c&&(w(Y,"description",{configurable:!0,get:function(){return G(this).description}}),l||S(H,"propertyIsEnumerable",fe,{unsafe:!0}))),r({global:!0,constructor:!0,wrap:!0,forced:!u,sham:!u},{Symbol:q}),L(b(oe),(function(e){_(e)})),r({target:K,stat:!0,forced:!u},{useSetter:function(){ae=!0},useSimple:function(){ae=!1}}),r({target:"Object",stat:!0,forced:!u,sham:!c},{create:function(e,t){return void 0===t?y(e):se(y(e),t)},defineProperty:ue,defineProperties:se,getOwnPropertyDescriptor:de}),r({target:"Object",stat:!0,forced:!u},{getOwnPropertyNames:pe}),O(),B(q,K),D[U]=!0},9452:function(){},8539:function(e,t,n){"use strict";var r=n(3952),o=n(3464),a=n(4664),i=n(9352),l=n(8852),c=n(7780),u=l("string-to-symbol-registry"),s=l("symbol-to-string-registry");r({target:"Symbol",stat:!0,forced:!c},{for:function(e){var t=i(e);if(a(u,t))return u[t];var n=o("Symbol")(t);return u[t]=n,s[n]=t,n}})},1344:function(e,t,n){"use strict";n(1084)("hasInstance")},4436:function(e,t,n){"use strict";n(1084)("isConcatSpreadable")},6992:function(e,t,n){"use strict";n(1084)("iterator")},9276:function(e,t,n){"use strict";n(3840),n(8539),n(1896),n(8824),n(9672)},1896:function(e,t,n){"use strict";var r=n(3952),o=n(4664),a=n(5376),i=n(8944),l=n(8852),c=n(7780),u=l("symbol-to-string-registry");r({target:"Symbol",stat:!0,forced:!c},{keyFor:function(e){if(!a(e))throw new TypeError(i(e)+" is not a symbol");if(o(u,e))return u[e]}})},6380:function(e,t,n){"use strict";n(1084)("matchAll")},8028:function(e,t,n){"use strict";n(1084)("match")},6176:function(e,t,n){"use strict";n(1084)("replace")},1176:function(e,t,n){"use strict";n(1084)("search")},781:function(e,t,n){"use strict";n(1084)("species")},6720:function(e,t,n){"use strict";n(1084)("split")},5536:function(e,t,n){"use strict";var r=n(1084),o=n(72);r("toPrimitive"),o()},4732:function(e,t,n){"use strict";var r=n(3464),o=n(1084),a=n(5836);o("toStringTag"),a(r("Symbol"),"Symbol")},4243:function(e,t,n){"use strict";n(1084)("unscopables")},6536:function(e,t,n){"use strict";var r=n(3336),o=n(2280).f,a=r("metadata"),i=Function.prototype;void 0===i[a]&&o(i,a,{value:null})},6508:function(e,t,n){"use strict";n(6988)},7576:function(e,t,n){"use strict";n(1084)("asyncDispose")},7772:function(e,t,n){"use strict";n(1084)("dispose")},9264:function(e,t,n){"use strict";n(3952)({target:"Symbol",stat:!0},{isRegisteredSymbol:n(5080)})},1216:function(e,t,n){"use strict";n(3952)({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:n(5080)})},8460:function(e,t,n){"use strict";n(3952)({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:n(2636)})},5196:function(e,t,n){"use strict";n(3952)({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:n(2636)})},4448:function(e,t,n){"use strict";n(1084)("matcher")},2948:function(e,t,n){"use strict";n(1084)("metadataKey")},5656:function(e,t,n){"use strict";n(1084)("metadata")},4184:function(e,t,n){"use strict";n(1084)("observable")},2252:function(e,t,n){"use strict";n(1084)("patternMatch")},6396:function(e,t,n){"use strict";n(1084)("replaceAll")},3624:function(e,t,n){"use strict";n(340);var r=n(472),o=n(5216),a=n(5836),i=n(7256);for(var l in r)a(o[l],l),i[l]=i.Array},1624:function(e,t,n){"use strict";n(340);var r=n(3952),o=n(5216),a=n(4604),i=n(4580),l=n(9252),c=n(9172),u=n(928),s=n(5424),f=n(6968),d=n(8104),p=n(5836),v=n(9976),m=n(2344),g=n(4572),h=n(8536),y=n(4664),b=n(1884),C=n(636),E=n(2032),I=n(8608),x=n(9352),T=n(4488),N=n(8981),A=n(4656),S=n(68),w=n(3848),F=n(3492),k=n(3336),D=n(3864),P=k("iterator"),M="URLSearchParams",R=M+"Iterator",_=m.set,O=m.getterFor(M),B=m.getterFor(R),j=a("fetch"),L=a("Request"),U=a("Headers"),K=L&&L.prototype,V=U&&U.prototype,z=o.RegExp,G=o.TypeError,H=o.decodeURIComponent,q=o.encodeURIComponent,Y=l("".charAt),W=l([].join),Q=l([].push),X=l("".replace),Z=l([].shift),J=l([].splice),$=l("".split),ee=l("".slice),te=/\+/g,ne=Array(4),re=function(e){return ne[e-1]||(ne[e-1]=z("((?:%[\\da-f]{2}){"+e+"})","gi"))},oe=function(e){try{return H(e)}catch(t){return e}},ae=function(e){var t=X(e,te," "),n=4;try{return H(t)}catch(e){for(;n;)t=X(t,re(n--),oe);return t}},ie=/[!'()~]|%20/g,le={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},ce=function(e){return le[e]},ue=function(e){return X(q(e),ie,ce)},se=v((function(e,t){_(this,{type:R,target:O(e).entries,index:0,kind:t})}),M,(function(){var e=B(this),t=e.target,n=e.index++;if(!t||n>=t.length)return e.target=void 0,w(void 0,!0);var r=t[n];switch(e.kind){case"keys":return w(r.key,!1);case"values":return w(r.value,!1)}return w([r.key,r.value],!1)}),!0),fe=function(e){this.entries=[],this.url=null,void 0!==e&&(I(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===Y(e,0)?ee(e,1):e:x(e)))};fe.prototype={type:M,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,n,r,o,a,l,c,u=this.entries,s=S(e);if(s)for(n=(t=A(e,s)).next;!(r=i(n,t)).done;){if(a=(o=A(E(r.value))).next,(l=i(a,o)).done||(c=i(a,o)).done||!i(a,o).done)throw new G("Expected sequence with length 2");Q(u,{key:x(l.value),value:x(c.value)})}else for(var f in e)y(e,f)&&Q(u,{key:f,value:x(e[f])})},parseQuery:function(e){if(e)for(var t,n,r=this.entries,o=$(e,"&"),a=0;a<o.length;)(t=o[a++]).length&&(n=$(t,"="),Q(r,{key:ae(Z(n)),value:ae(W(n,"="))}))},serialize:function(){for(var e,t=this.entries,n=[],r=0;r<t.length;)e=t[r++],Q(n,ue(e.key)+"="+ue(e.value));return W(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var de=function(){g(this,pe);var e=_(this,new fe(arguments.length>0?arguments[0]:void 0));c||(this.size=e.entries.length)},pe=de.prototype;if(d(pe,{append:function(e,t){var n=O(this);F(arguments.length,2),Q(n.entries,{key:x(e),value:x(t)}),c||this.length++,n.updateURL()},delete:function(e){for(var t=O(this),n=F(arguments.length,1),r=t.entries,o=x(e),a=n<2?void 0:arguments[1],i=void 0===a?a:x(a),l=0;l<r.length;){var u=r[l];if(u.key!==o||void 0!==i&&u.value!==i)l++;else if(J(r,l,1),void 0!==i)break}c||(this.size=r.length),t.updateURL()},get:function(e){var t=O(this).entries;F(arguments.length,1);for(var n=x(e),r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){var t=O(this).entries;F(arguments.length,1);for(var n=x(e),r=[],o=0;o<t.length;o++)t[o].key===n&&Q(r,t[o].value);return r},has:function(e){for(var t=O(this).entries,n=F(arguments.length,1),r=x(e),o=n<2?void 0:arguments[1],a=void 0===o?o:x(o),i=0;i<t.length;){var l=t[i++];if(l.key===r&&(void 0===a||l.value===a))return!0}return!1},set:function(e,t){var n=O(this);F(arguments.length,1);for(var r,o=n.entries,a=!1,i=x(e),l=x(t),u=0;u<o.length;u++)(r=o[u]).key===i&&(a?J(o,u--,1):(a=!0,r.value=l));a||Q(o,{key:i,value:l}),c||(this.size=o.length),n.updateURL()},sort:function(){var e=O(this);D(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,n=O(this).entries,r=b(e,arguments.length>1?arguments[1]:void 0),o=0;o<n.length;)r((t=n[o++]).value,t.key,this)},keys:function(){return new se(this,"keys")},values:function(){return new se(this,"values")},entries:function(){return new se(this,"entries")}},{enumerable:!0}),s(pe,P,pe.entries,{name:"entries"}),s(pe,"toString",(function(){return O(this).serialize()}),{enumerable:!0}),c&&f(pe,"size",{get:function(){return O(this).entries.length},configurable:!0,enumerable:!0}),p(de,M),r({global:!0,constructor:!0,forced:!u},{URLSearchParams:de}),!u&&h(U)){var ve=l(V.has),me=l(V.set),ge=function(e){if(I(e)){var t,n=e.body;if(C(n)===M)return t=e.headers?new U(e.headers):new U,ve(t,"content-type")||me(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),T(e,{body:N(0,x(n)),headers:N(0,t)})}return e};if(h(j)&&r({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return j(e,arguments.length>1?ge(arguments[1]):{})}}),h(L)){var he=function(e){return g(this,K),new L(e,arguments.length>1?ge(arguments[1]):{})};K.constructor=he,he.prototype=K,r({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:he})}}e.exports={URLSearchParams:de,getState:O}},6372:function(){},3944:function(){},272:function(e,t,n){"use strict";n(1624)},8580:function(){},5188:function(e,t,n){"use strict";var r=n(3952),o=n(3464),a=n(2064),i=n(3492),l=n(9352),c=n(928),u=o("URL");r({target:"URL",stat:!0,forced:!(c&&a((function(){u.canParse()})))},{canParse:function(e){var t=i(arguments.length,1),n=l(e),r=t<2||void 0===arguments[1]?void 0:l(arguments[1]);try{return!!new u(n,r)}catch(e){return!1}}})},1488:function(e,t,n){"use strict";n(4176);var r,o=n(3952),a=n(9172),i=n(928),l=n(5216),c=n(1884),u=n(9252),s=n(5424),f=n(6968),d=n(4572),p=n(4664),v=n(8980),m=n(9980),g=n(940),h=n(6392).codeAt,y=n(2424),b=n(9352),C=n(5836),E=n(3492),I=n(1624),x=n(2344),T=x.set,N=x.getterFor("URL"),A=I.URLSearchParams,S=I.getState,w=l.URL,F=l.TypeError,k=l.parseInt,D=Math.floor,P=Math.pow,M=u("".charAt),R=u(/./.exec),_=u([].join),O=u(1..toString),B=u([].pop),j=u([].push),L=u("".replace),U=u([].shift),K=u("".split),V=u("".slice),z=u("".toLowerCase),G=u([].unshift),H="Invalid scheme",q="Invalid host",Y="Invalid port",W=/[a-z]/i,Q=/[\d+-.a-z]/i,X=/\d/,Z=/^0x/i,J=/^[0-7]+$/,$=/^\d+$/,ee=/^[\da-f]+$/i,te=/[\0\t\n\r #%/:<>?@[\\\]^|]/,ne=/[\0\t\n\r #/:<>?@[\\\]^|]/,re=/^[\u0000-\u0020]+/,oe=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,ae=/[\t\n\r]/g,ie=function(e){var t,n,r,o;if("number"==typeof e){for(t=[],n=0;n<4;n++)G(t,e%256),e=D(e/256);return _(t,".")}if("object"==typeof e){for(t="",r=function(e){for(var t=null,n=1,r=null,o=0,a=0;a<8;a++)0!==e[a]?(o>n&&(t=r,n=o),r=null,o=0):(null===r&&(r=a),++o);return o>n&&(t=r,n=o),t}(e),n=0;n<8;n++)o&&0===e[n]||(o&&(o=!1),r===n?(t+=n?":":"::",o=!0):(t+=O(e[n],16),n<7&&(t+=":")));return"["+t+"]"}return e},le={},ce=v({},le,{" ":1,'"':1,"<":1,">":1,"`":1}),ue=v({},ce,{"#":1,"?":1,"{":1,"}":1}),se=v({},ue,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),fe=function(e,t){var n=h(e,0);return n>32&&n<127&&!p(t,e)?e:encodeURIComponent(e)},de={ftp:21,file:null,http:80,https:443,ws:80,wss:443},pe=function(e,t){var n;return 2===e.length&&R(W,M(e,0))&&(":"===(n=M(e,1))||!t&&"|"===n)},ve=function(e){var t;return e.length>1&&pe(V(e,0,2))&&(2===e.length||"/"===(t=M(e,2))||"\\"===t||"?"===t||"#"===t)},me=function(e){return"."===e||"%2e"===z(e)},ge={},he={},ye={},be={},Ce={},Ee={},Ie={},xe={},Te={},Ne={},Ae={},Se={},we={},Fe={},ke={},De={},Pe={},Me={},Re={},_e={},Oe={},Be=function(e,t,n){var r,o,a,i=b(e);if(t){if(o=this.parse(i))throw new F(o);this.searchParams=null}else{if(void 0!==n&&(r=new Be(n,!0)),o=this.parse(i,null,r))throw new F(o);(a=S(new A)).bindURL(this),this.searchParams=a}};Be.prototype={type:"URL",parse:function(e,t,n){var o,a,i,l,c,u=this,s=t||ge,f=0,d="",v=!1,h=!1,y=!1;for(e=b(e),t||(u.scheme="",u.username="",u.password="",u.host=null,u.port=null,u.path=[],u.query=null,u.fragment=null,u.cannotBeABaseURL=!1,e=L(e,re,""),e=L(e,oe,"$1")),e=L(e,ae,""),o=m(e);f<=o.length;){switch(a=o[f],s){case ge:if(!a||!R(W,a)){if(t)return H;s=ye;continue}d+=z(a),s=he;break;case he:if(a&&(R(Q,a)||"+"===a||"-"===a||"."===a))d+=z(a);else{if(":"!==a){if(t)return H;d="",s=ye,f=0;continue}if(t&&(u.isSpecial()!==p(de,d)||"file"===d&&(u.includesCredentials()||null!==u.port)||"file"===u.scheme&&!u.host))return;if(u.scheme=d,t)return void(u.isSpecial()&&de[u.scheme]===u.port&&(u.port=null));d="","file"===u.scheme?s=Fe:u.isSpecial()&&n&&n.scheme===u.scheme?s=be:u.isSpecial()?s=xe:"/"===o[f+1]?(s=Ce,f++):(u.cannotBeABaseURL=!0,j(u.path,""),s=Re)}break;case ye:if(!n||n.cannotBeABaseURL&&"#"!==a)return H;if(n.cannotBeABaseURL&&"#"===a){u.scheme=n.scheme,u.path=g(n.path),u.query=n.query,u.fragment="",u.cannotBeABaseURL=!0,s=Oe;break}s="file"===n.scheme?Fe:Ee;continue;case be:if("/"!==a||"/"!==o[f+1]){s=Ee;continue}s=Te,f++;break;case Ce:if("/"===a){s=Ne;break}s=Me;continue;case Ee:if(u.scheme=n.scheme,a===r)u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,u.path=g(n.path),u.query=n.query;else if("/"===a||"\\"===a&&u.isSpecial())s=Ie;else if("?"===a)u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,u.path=g(n.path),u.query="",s=_e;else{if("#"!==a){u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,u.path=g(n.path),u.path.length--,s=Me;continue}u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,u.path=g(n.path),u.query=n.query,u.fragment="",s=Oe}break;case Ie:if(!u.isSpecial()||"/"!==a&&"\\"!==a){if("/"!==a){u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,s=Me;continue}s=Ne}else s=Te;break;case xe:if(s=Te,"/"!==a||"/"!==M(d,f+1))continue;f++;break;case Te:if("/"!==a&&"\\"!==a){s=Ne;continue}break;case Ne:if("@"===a){v&&(d="%40"+d),v=!0,i=m(d);for(var C=0;C<i.length;C++){var E=i[C];if(":"!==E||y){var I=fe(E,se);y?u.password+=I:u.username+=I}else y=!0}d=""}else if(a===r||"/"===a||"?"===a||"#"===a||"\\"===a&&u.isSpecial()){if(v&&""===d)return"Invalid authority";f-=m(d).length+1,d="",s=Ae}else d+=a;break;case Ae:case Se:if(t&&"file"===u.scheme){s=De;continue}if(":"!==a||h){if(a===r||"/"===a||"?"===a||"#"===a||"\\"===a&&u.isSpecial()){if(u.isSpecial()&&""===d)return q;if(t&&""===d&&(u.includesCredentials()||null!==u.port))return;if(l=u.parseHost(d))return l;if(d="",s=Pe,t)return;continue}"["===a?h=!0:"]"===a&&(h=!1),d+=a}else{if(""===d)return q;if(l=u.parseHost(d))return l;if(d="",s=we,t===Se)return}break;case we:if(!R(X,a)){if(a===r||"/"===a||"?"===a||"#"===a||"\\"===a&&u.isSpecial()||t){if(""!==d){var x=k(d,10);if(x>65535)return Y;u.port=u.isSpecial()&&x===de[u.scheme]?null:x,d=""}if(t)return;s=Pe;continue}return Y}d+=a;break;case Fe:if(u.scheme="file","/"===a||"\\"===a)s=ke;else{if(!n||"file"!==n.scheme){s=Me;continue}switch(a){case r:u.host=n.host,u.path=g(n.path),u.query=n.query;break;case"?":u.host=n.host,u.path=g(n.path),u.query="",s=_e;break;case"#":u.host=n.host,u.path=g(n.path),u.query=n.query,u.fragment="",s=Oe;break;default:ve(_(g(o,f),""))||(u.host=n.host,u.path=g(n.path),u.shortenPath()),s=Me;continue}}break;case ke:if("/"===a||"\\"===a){s=De;break}n&&"file"===n.scheme&&!ve(_(g(o,f),""))&&(pe(n.path[0],!0)?j(u.path,n.path[0]):u.host=n.host),s=Me;continue;case De:if(a===r||"/"===a||"\\"===a||"?"===a||"#"===a){if(!t&&pe(d))s=Me;else if(""===d){if(u.host="",t)return;s=Pe}else{if(l=u.parseHost(d))return l;if("localhost"===u.host&&(u.host=""),t)return;d="",s=Pe}continue}d+=a;break;case Pe:if(u.isSpecial()){if(s=Me,"/"!==a&&"\\"!==a)continue}else if(t||"?"!==a)if(t||"#"!==a){if(a!==r&&(s=Me,"/"!==a))continue}else u.fragment="",s=Oe;else u.query="",s=_e;break;case Me:if(a===r||"/"===a||"\\"===a&&u.isSpecial()||!t&&("?"===a||"#"===a)){if(".."===(c=z(c=d))||"%2e."===c||".%2e"===c||"%2e%2e"===c?(u.shortenPath(),"/"===a||"\\"===a&&u.isSpecial()||j(u.path,"")):me(d)?"/"===a||"\\"===a&&u.isSpecial()||j(u.path,""):("file"===u.scheme&&!u.path.length&&pe(d)&&(u.host&&(u.host=""),d=M(d,0)+":"),j(u.path,d)),d="","file"===u.scheme&&(a===r||"?"===a||"#"===a))for(;u.path.length>1&&""===u.path[0];)U(u.path);"?"===a?(u.query="",s=_e):"#"===a&&(u.fragment="",s=Oe)}else d+=fe(a,ue);break;case Re:"?"===a?(u.query="",s=_e):"#"===a?(u.fragment="",s=Oe):a!==r&&(u.path[0]+=fe(a,le));break;case _e:t||"#"!==a?a!==r&&("'"===a&&u.isSpecial()?u.query+="%27":u.query+="#"===a?"%23":fe(a,le)):(u.fragment="",s=Oe);break;case Oe:a!==r&&(u.fragment+=fe(a,ce))}f++}},parseHost:function(e){var t,n,r;if("["===M(e,0)){if("]"!==M(e,e.length-1))return q;if(t=function(e){var t,n,r,o,a,i,l,c=[0,0,0,0,0,0,0,0],u=0,s=null,f=0,d=function(){return M(e,f)};if(":"===d()){if(":"!==M(e,1))return;f+=2,s=++u}for(;d();){if(8===u)return;if(":"!==d()){for(t=n=0;n<4&&R(ee,d());)t=16*t+k(d(),16),f++,n++;if("."===d()){if(0===n)return;if(f-=n,u>6)return;for(r=0;d();){if(o=null,r>0){if(!("."===d()&&r<4))return;f++}if(!R(X,d()))return;for(;R(X,d());){if(a=k(d(),10),null===o)o=a;else{if(0===o)return;o=10*o+a}if(o>255)return;f++}c[u]=256*c[u]+o,2!=++r&&4!==r||u++}if(4!==r)return;break}if(":"===d()){if(f++,!d())return}else if(d())return;c[u++]=t}else{if(null!==s)return;f++,s=++u}}if(null!==s)for(i=u-s,u=7;0!==u&&i>0;)l=c[u],c[u--]=c[s+i-1],c[s+--i]=l;else if(8!==u)return;return c}(V(e,1,-1)),!t)return q;this.host=t}else if(this.isSpecial()){if(e=y(e),R(te,e))return q;if(t=function(e){var t,n,r,o,a,i,l,c=K(e,".");if(c.length&&""===c[c.length-1]&&c.length--,(t=c.length)>4)return e;for(n=[],r=0;r<t;r++){if(""===(o=c[r]))return e;if(a=10,o.length>1&&"0"===M(o,0)&&(a=R(Z,o)?16:8,o=V(o,8===a?1:2)),""===o)i=0;else{if(!R(10===a?$:8===a?J:ee,o))return e;i=k(o,a)}j(n,i)}for(r=0;r<t;r++)if(i=n[r],r===t-1){if(i>=P(256,5-t))return null}else if(i>255)return null;for(l=B(n),r=0;r<n.length;r++)l+=n[r]*P(256,3-r);return l}(e),null===t)return q;this.host=t}else{if(R(ne,e))return q;for(t="",n=m(e),r=0;r<n.length;r++)t+=fe(n[r],le);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"===this.scheme},includesCredentials:function(){return""!==this.username||""!==this.password},isSpecial:function(){return p(de,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"===this.scheme&&1===t&&pe(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,n=e.username,r=e.password,o=e.host,a=e.port,i=e.path,l=e.query,c=e.fragment,u=t+":";return null!==o?(u+="//",e.includesCredentials()&&(u+=n+(r?":"+r:"")+"@"),u+=ie(o),null!==a&&(u+=":"+a)):"file"===t&&(u+="//"),u+=e.cannotBeABaseURL?i[0]:i.length?"/"+_(i,"/"):"",null!==l&&(u+="?"+l),null!==c&&(u+="#"+c),u},setHref:function(e){var t=this.parse(e);if(t)throw new F(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"===e)try{return new je(e.path[0]).origin}catch(e){return"null"}return"file"!==e&&this.isSpecial()?e+"://"+ie(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(b(e)+":",ge)},getUsername:function(){return this.username},setUsername:function(e){var t=m(b(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<t.length;n++)this.username+=fe(t[n],se)}},getPassword:function(){return this.password},setPassword:function(e){var t=m(b(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<t.length;n++)this.password+=fe(t[n],se)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?ie(e):ie(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,Ae)},getHostname:function(){var e=this.host;return null===e?"":ie(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,Se)},getPort:function(){var e=this.port;return null===e?"":b(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""===(e=b(e))?this.port=null:this.parse(e,we))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+_(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,Pe))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""===(e=b(e))?this.query=null:("?"===M(e,0)&&(e=V(e,1)),this.query="",this.parse(e,_e)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){""!==(e=b(e))?("#"===M(e,0)&&(e=V(e,1)),this.fragment="",this.parse(e,Oe)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var je=function(e){var t=d(this,Le),n=E(arguments.length,1)>1?arguments[1]:void 0,r=T(t,new Be(e,!1,n));a||(t.href=r.serialize(),t.origin=r.getOrigin(),t.protocol=r.getProtocol(),t.username=r.getUsername(),t.password=r.getPassword(),t.host=r.getHost(),t.hostname=r.getHostname(),t.port=r.getPort(),t.pathname=r.getPathname(),t.search=r.getSearch(),t.searchParams=r.getSearchParams(),t.hash=r.getHash())},Le=je.prototype,Ue=function(e,t){return{get:function(){return N(this)[e]()},set:t&&function(e){return N(this)[t](e)},configurable:!0,enumerable:!0}};if(a&&(f(Le,"href",Ue("serialize","setHref")),f(Le,"origin",Ue("getOrigin")),f(Le,"protocol",Ue("getProtocol","setProtocol")),f(Le,"username",Ue("getUsername","setUsername")),f(Le,"password",Ue("getPassword","setPassword")),f(Le,"host",Ue("getHost","setHost")),f(Le,"hostname",Ue("getHostname","setHostname")),f(Le,"port",Ue("getPort","setPort")),f(Le,"pathname",Ue("getPathname","setPathname")),f(Le,"search",Ue("getSearch","setSearch")),f(Le,"searchParams",Ue("getSearchParams")),f(Le,"hash",Ue("getHash","setHash"))),s(Le,"toJSON",(function(){return N(this).serialize()}),{enumerable:!0}),s(Le,"toString",(function(){return N(this).serialize()}),{enumerable:!0}),w){var Ke=w.createObjectURL,Ve=w.revokeObjectURL;Ke&&s(je,"createObjectURL",c(Ke,w)),Ve&&s(je,"revokeObjectURL",c(Ve,w))}C(je,"URL"),o({global:!0,constructor:!0,forced:!i,sham:!a},{URL:je})},4484:function(e,t,n){"use strict";n(1488)},7840:function(){},6128:function(e,t,n){"use strict";var r=n(9259);e.exports=r},1324:function(e,t,n){"use strict";var r=n(3376);e.exports=r},1056:function(e,t,n){"use strict";var r=n(7340);e.exports=r},984:function(e,t,n){"use strict";var r=n(4556);n(3624),e.exports=r},2960:function(e,t,n){"use strict";var r=n(4756);e.exports=r},1188:function(e,t,n){"use strict";var r=n(8884);e.exports=r},104:function(e,t,n){"use strict";var r=n(6172);e.exports=r},7444:function(e,t,n){"use strict";var r=n(8784);e.exports=r},8320:function(e,t,n){"use strict";var r=n(680);e.exports=r},3352:function(e,t,n){"use strict";var r=n(1231);e.exports=r},120:function(e,t,n){"use strict";var r=n(2600);e.exports=r},8760:function(e,t,n){"use strict";var r=n(8180);e.exports=r},5720:function(e,t,n){"use strict";var r=n(4156);e.exports=r},8776:function(e,t,n){"use strict";var r=n(1352);e.exports=r},5052:function(e,t,n){"use strict";var r=n(8896);e.exports=r},7339:function(e,t,n){"use strict";var r=n(7736);e.exports=r},7584:function(e,t,n){"use strict";var r=n(8688);e.exports=r},4644:function(e,t,n){"use strict";var r=n(3808);e.exports=r},9384:function(e,t,n){"use strict";var r=n(6312);e.exports=r},8812:function(e,t,n){"use strict";var r=n(1240);e.exports=r},9408:function(e,t,n){"use strict";var r=n(8125);e.exports=r},2612:function(e,t,n){"use strict";n(3624);var r=n(636),o=n(4664),a=n(2360),i=n(1056),l=Array.prototype,c={DOMTokenList:!0,NodeList:!0};e.exports=function(e){var t=e.values;return e===l||a(l,e)&&t===l.values||o(c,r(e))?i:t}},9140:function(e,t,n){"use strict";var r=n(9304);e.exports=r},2572:function(e,t,n){"use strict";var r=n(2548);n(3624),e.exports=r},5608:function(e,t,n){"use strict";var r=n(9196);e.exports=r},8792:function(e,t,n){"use strict";var r=n(4856);e.exports=r},7752:function(e,t,n){"use strict";var r=n(2536);e.exports=r},5716:function(e,t,n){"use strict";var r=n(3416);e.exports=r},6860:function(e,t,n){"use strict";var r=n(2936);e.exports=r},9224:function(e,t,n){"use strict";var r=n(920);e.exports=r},424:function(e,t,n){"use strict";var r=n(2613);e.exports=r},7052:function(e,t,n){"use strict";var r=n(6104);e.exports=r},9516:function(e,t,n){"use strict";var r=n(6496);n(3624),e.exports=r},7768:function(e,t,n){"use strict";var r=n(3216);e.exports=r},1576:function(e,t,n){"use strict";var r=n(2568);e.exports=r},8436:function(e,t,n){"use strict";var r=n(1060);e.exports=r},948:function(e,t,n){"use strict";var r=n(7376);n(3624),e.exports=r},9928:function(e,t,n){"use strict";var r=n(2767);n(3624),e.exports=r},8308:function(e,t,n){"use strict";var r=n(5180);n(3624),e.exports=r},6956:function(e,t,n){"use strict";var r=n(6888);e.exports=r},456:function(e,t,n){"use strict";var r=n(2296);e.exports=r},5120:function(e,t,n){"use strict";n(272),n(6372),n(3944),n(8580);var r=n(9832);e.exports=r.URLSearchParams},2296:function(e,t,n){"use strict";n(5120),n(4484),n(5188),n(7840);var r=n(9832);e.exports=r.URL},9464:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{c:function(){return r}})},2992:function(e,t,n){"use strict";n.d(t,{c:function(){return l}});var r=n(8520),o=n(8496),a=n(6340);function i(e){var t=function(e,t){if("object"!=(0,o.c)(e)||!e)return e;var n=e[a];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=(0,o.c)(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==(0,o.c)(t)?t:t+""}function l(e,t,n){return(t=i(t))in e?r(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},2664:function(e,t,n){"use strict";n.d(t,{c:function(){return a}});var r=n(2176),o=n(8176);function a(){var e;return a=r?o(e=r).call(e):function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(null,arguments)}},1184:function(e,t,n){"use strict";function r(e){if(null==e)throw new TypeError("Cannot destructure "+e)}n.d(t,{c:function(){return r}})},4984:function(e,t,n){"use strict";n.d(t,{c:function(){return a}});var r=n(2900),o=n(7112);function a(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(o(t).call(t,r)>=0)continue;n[r]=e[r]}return n}(e,t);if(r){var l=r(e);for(a=0;a<l.length;a++)n=l[a],o(t).call(t,n)>=0||{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}},8264:function(e,t,n){"use strict";n.d(t,{c:function(){return c}});var r=n(2396);var o=n(9216),a=n(420),i=n(8360);var l=n(5956);function c(e,t){return function(e){if(r(e))return e}(e)||function(e,t){var n=null==e?null:void 0!==o&&a(e)||e["@@iterator"];if(null!=n){var r,l,c,u,s=[],f=!0,d=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;f=!1}else for(;!(f=(r=c.call(n)).done)&&(i(s).call(s,r.value),s.length!==t);f=!0);}catch(e){d=!0,l=e}finally{try{if(!f&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(d)throw l}}return s}}(e,t)||(0,l.c)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},5992:function(e,t,n){"use strict";n.d(t,{c:function(){return u}});var r=n(2396),o=n(9464);var a=n(9216),i=n(420),l=n(7944);var c=n(5956);function u(e){return function(e){if(r(e))return(0,o.c)(e)}(e)||function(e){if(void 0!==a&&null!=i(e)||null!=e["@@iterator"])return l(e)}(e)||(0,c.c)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},8496:function(e,t,n){"use strict";n.d(t,{c:function(){return a}});var r=n(9216),o=n(7268);function a(e){return a="function"==typeof r&&"symbol"==typeof o?function(e){return typeof e}:function(e){return e&&"function"==typeof r&&e.constructor===r&&e!==r.prototype?"symbol":typeof e},a(e)}},5956:function(e,t,n){"use strict";n.d(t,{c:function(){return i}});var r=n(3232),o=n(7944),a=n(9464);function i(e,t){if(e){var n;if("string"==typeof e)return(0,a.c)(e,t);var i=r(n={}.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?o(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?(0,a.c)(e,t):void 0}}}},o={};function a(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={exports:{}};return r[e].call(n.exports,n,n.exports,a),n.exports}return a.m=r,a.c=o,a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,{a:t}),t},a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e={},n="nocode-designer:",a.l=function(t,r,o,i){if(e[t])e[t].push(r);else{var l,c;if(void 0!==o)for(var u=document.getElementsByTagName("script"),s=0;s<u.length;s++){var f=u[s];if(f.getAttribute("src")==t||f.getAttribute("data-webpack")==n+o){l=f;break}}l||(c=!0,(l=document.createElement("script")).charset="utf-8",l.timeout=120,a.nc&&l.setAttribute("nonce",a.nc),l.setAttribute("data-webpack",n+o),l.src=t),e[t]=[r];var d=function(n,r){l.onerror=l.onload=null,clearTimeout(p);var o=e[t];if(delete e[t],l.parentNode&&l.parentNode.removeChild(l),o&&o.forEach((function(e){return e(r)})),n)return n(r)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=d.bind(null,l.onerror),l.onload=d.bind(null,l.onload),c&&document.head.appendChild(l)}},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){a.S={};var e={},t={};a.I=function(n,r){r||(r=[]);var o=t[n];if(o||(o=t[n]={}),!(r.indexOf(o)>=0)){if(r.push(o),e[n])return e[n];a.o(a.S,n)||(a.S[n]={});a.S[n];var i=function(e){var t=function(e){"undefined"!=typeof console&&console.warn};try{var o=a(e);if(!o)return;var i=function(e){return e&&e.init&&e.init(a.S[n],r)};if(o.then)return l.push(o.then(i,t));var c=i(o);if(c&&c.then)return l.push(c.catch(t))}catch(e){t()}},l=[];if("default"===n)i(1452),i(9768),i(954);return l.length?e[n]=Promise.all(l).then((function(){return e[n]=1})):e[n]=1}}}(),function(){var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&!e;)e=n[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e+"../"}(),a(9472)}()}));