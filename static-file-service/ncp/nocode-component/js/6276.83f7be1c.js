"use strict";(self.webpackChunknocode_component=self.webpackChunknocode_component||[]).push([[6276],{74238:function(n,e,t){t.d(e,{sB:function(){return c.s},uY:function(){return a.uY},Ml:function(){return a.Ml},uO:function(){return a.uO},C3:function(){return o}});var u=t(65984),r=t(39756),o=function(n,e,t){var o=(0,u.useContext)(r.m).model,c=(0,u.useCallback)(t,[t]);(0,u.useEffect)((function(){var t=e.pageId,u=e.id,r=o.addControlAction(n,t,u,c);return function(){r&&r()}}),[])},c=t(46276),a=t(14948)},20024:function(n,e,t){var u=t(72048),r=t(760),o=t.n(r),c=t(70696),a=t.n(c),l=t(65984),i=t(74238),d=t(23832),f=t(38680),s=t(16428);e.c=function(n){var e=n.Status,t=n.mi,r=n.rules,c=void 0===r?[]:r,v=(0,l.useRef)(e),p=(0,d.cl)(v.current),b=p.disabled,h=p.readonly,C=p.hidden,m=(0,l.useState)(!!t),w=(0,u.c)(m,2),g=w[0],k=w[1],y=(0,l.useReducer)((function(n){return n+1}),0),I=(0,u.c)(y,2)[1],x=(0,l.useCallback)((function(n){var e=n.v;e<5?(v.current=e,(0,s.unstable_batchedUpdates)((function(){I()}))):"5"===e?k(!0):"6"===e&&k(!1)}),[]);return(0,l.useEffect)((function(){x({v:e})}),[e,x]),(0,l.useEffect)((function(){k(t)}),[t]),(0,i.C3)(f.oH,n,x),{disabled:b,readonly:h,hidden:C,rules:(0,l.useMemo)((function(){var e,t;return g?o()(e=a()(t=c).call(t,(function(n){return!0!==n.required}))).call(e,(0,d.y6)(n)):c}),[g]),required:!b&&!h&&g}}},46276:function(n,e,t){t.d(e,{s:function(){return a}});var u=t(65984),r=t(39756),o=t(23832),c=t(20024),a=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.emptytip,a=n.ShowClearButton,l=n.maxlength,i=n.pageId,d=(0,u.useContext)(r.m).model,f=d.getFormStatus(i),s=(0,o.y8)(f),v=(0,c.c)(n),p=v.disabled,b=v.readonly,h=v.hidden,C=v.required,m=v.rules,w=e.readonly||b||s;return n?{hidden:h,disabled:p,readonly:w,placeholder:d.getControlText(t)||"",allowClear:a,maxLength:l,required:C,rules:m}:{readonly:w}}},14948:function(n,e,t){t.d(e,{Ml:function(){return D},uO:function(){return F},uY:function(){return B}});t(87912),t(97308);var u=t(13939),r=t.n(u),o=t(34716),c=t.n(o),a=t(70696),l=t.n(a),i=t(4884),d=t.n(i),f=t(3464),s=t.n(f),v=t(51400),p=t.n(v),b=t(25028),h=t.n(b),C=t(30112),m=t(72048),w=t(67584),g=t.n(w),k=t(22796),y=t.n(k),I=t(760),x=t.n(I),E=t(65984),R=t(46276),T=t(39756),q=t(35084),M=t(27448),S=t(38680);function O(n,e){var t=r()(n);if(c()){var u=c()(n);e&&(u=l()(u).call(u,(function(e){return d()(n,e).enumerable}))),t.push.apply(t,u)}return t}function A(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?O(Object(t),!0).forEach((function(e){(0,C.c)(n,e,t[e])})):s()?p()(n,s()(t)):O(Object(t)).forEach((function(e){h()(n,e,d()(t,e))}))}return n}var D=function(n,e){var t=e.value,u=e.disabled,r=e.isValidate,o=(0,E.useRef)();return(0,E.useEffect)((function(){g()((function(){var e;r&&!u&&(Array.isArray(t)?(null==t?void 0:t.length)>0:t)&&(null===(e=o.current)||void 0===e||e.validateFields(n,t))}))}),[o.current,t,u]),o},B=function(n){var e,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blur",u=(0,E.useContext)(T.m).model,r=(0,E.useContext)(q.q),o=r.state,c=r.dispatch,a=n.rowIndex,l=n.meta,i=n.value,d=n.record,f=(0,R.s)(l,n).readonly,s=(0,E.useState)(!0),v=(0,m.c)(s,2),p=v[0],b=v[1],h=(0,E.useState)(new Date),w=(0,m.c)(h,2)[1],g=l.pageId,k=l.dataIndex,y=l.editor,I=(l.id,l.gridId),x=(0,E.useRef)(null),S=(0,E.useRef)(i),O=(0,E.useCallback)((function(n){if(S.current!==i){var e={k:k,r:a,v:n||S.current};u.batchInvoke("updateValue",g,"",[],[{},[e]])}}),[i,k,a,g]),D=(0,E.useCallback)((function(n){S.current=n,"change"===t&&O(n)}),[t,O]),B=(0,E.useCallback)((function(){"blur"===t&&O()}),[i,t,O]),F=(0,E.useMemo)((function(){var n,e;return(null==d||null===(n=d.cprop)||void 0===n?void 0:n.canEditRow)||void 0===(null==d||null===(e=d.cprop)||void 0===e?void 0:e.canEditRow)}),[null==d||null===(e=d.cprop)||void 0===e?void 0:e.canEditRow]),N=(0,E.useCallback)((function(){if(!f&&F){var n={fieldKey:k,row:a,selRows:[a],isClientNewRow:!1,clientNewRows:"",selDatas:[]},e=[(0,C.c)({},I,n),[]];u.batchInvoke("entryRowClick",g,I,[a],e),c({type:M.cT,payload:[a,k]})}}),[i,f,F,a,k,I]);return(0,E.useEffect)((function(){x.current&&x.current.focus()}),[p]),(0,E.useEffect)((function(){S.current=i,w(new Date)}),[i]),(0,E.useEffect)((function(){o.focusTd;var n=o.focusTd[0]===a&&o.focusTd[1]===k;p!==!n&&b(!n)}),[o.focusTd,a,k,p,b]),o.focusTd,{ref:x,controlMeta:A(A({},y),{},{pageId:g,id:k,gridId:I,dataIndex:k,TitleArea:"hide",rowIndex:a}),value:{v:S.current},disabled:p,setDisabled:b,onChange:D,onBlur:B,onTdClick:N}},F=function(n,e,t){var u=n.pageId,r=n.gridId,o=n.id,c=n.rowIndex,a=(0,E.useContext)(T.m).model,l=(0,E.useCallback)((function(n){var u,r=n.v,a=n.k,l=n.r;a===o&&c===l&&y()(n,"v")&&(null===(u=e.current)||void 0===u||u.validateFields("",(null==t?void 0:t(r))||r))}),[]);(0,E.useEffect)((function(){var n,e,t=a.addEventListener(x()(n=x()(e="".concat(S.lN,"-")).call(e,u,"-")).call(n,r,"-validate"),l);return function(){null==t||t()}}),[l])}},35084:function(n,e,t){t.d(e,{q:function(){return r}});var u=t(65984),r=t.n(u)().createContext(null)}}]);