"use strict";(self.webpackChunknocode_component=self.webpackChunknocode_component||[]).push([[8732],{35392:function(e,n,a){a.r(n);a(87912),a(97308);var t=a(13939),l=a.n(t),r=a(34716),o=a.n(r),c=a(70696),i=a.n(c),u=a(4884),d=a.n(u),s=a(3464),m=a.n(s),v=a(51400),f=a.n(v),p=a(25028),b=a.n(p),E=a(30112),h=a(65984),y=a.n(h),g=a(10532),C=a(13764),k=a(73572),N=a(63324);function _(e,n){var a=l()(e);if(o()){var t=o()(e);n&&(t=i()(t).call(t,(function(n){return d()(e,n).enumerable}))),a.push.apply(a,t)}return a}function S(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?_(Object(a),!0).forEach((function(n){(0,E.c)(e,n,a[n])})):m()?f()(e,m()(a)):_(Object(a)).forEach((function(n){b()(e,n,d()(a,n))}))}return e}n.default=(0,h.memo)((function(e){var n=(0,N.c)(S(S({},e),{},{uploadAttachmentVerify:k.S0,showInfo:k.yW})),a=n.action,t=n.disabled,l=n.readonly,r=n.handleChange,o=n.onDownload,c=n.onChangeFileName,i=n.beforeUpload,u=n.handleRemove,d=n.attachmentFileType,s=n.uploadNum,m=n.notice,v=n.previewType,f=n.labelText,p=n.required,b=n.hidden,E=n.fieldRef,h=n.datas;return n.rules,b?null:y().createElement(g.c,{ref:E,subTitle:f,controlMeta:S(S({},e.controlMeta),{},{labelDirection:"v"}),required:p},0===(null==h?void 0:h.length)&&l?y().createElement(y().Fragment,null,"-"):y().createElement(C.Attachment,{multiple:!0,action:a,data:{action:"upload",tempstorage:!1},fileList:h,disabled:t,readonly:l,onChange:r,onDownload:o,onChangeFileName:c,beforeUpload:i,onRemove:u,accept:d,uploadNum:s,noticeInfo:m,previewType:v}))}))},14744:function(e,n,a){a.r(n);a(87912),a(97308);var t=a(13939),l=a.n(t),r=a(34716),o=a.n(r),c=a(70696),i=a.n(c),u=a(4884),d=a.n(u),s=a(3464),m=a.n(s),v=a(51400),f=a.n(v),p=a(25028),b=a.n(p),E=a(30112),h=a(65984),y=a.n(h),g=a(10532),C=a(13764),k=a(73572),N=a(60807);function _(e,n){var a=l()(e);if(o()){var t=o()(e);n&&(t=i()(t).call(t,(function(n){return d()(e,n).enumerable}))),a.push.apply(a,t)}return a}function S(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?_(Object(a),!0).forEach((function(n){(0,E.c)(e,n,a[n])})):m()?f()(e,m()(a)):_(Object(a)).forEach((function(n){b()(e,n,d()(a,n))}))}return e}n.default=(0,h.memo)((function(e){var n=(0,h.useCallback)((function(n,a){return(0,k.is)(n,a,e.controlMeta)}),[e.controlMeta]),a=(0,N.c)(e),t=a.action,l=a.notice,r=a.labelText,o=a.datas,c=a.readonly,i=a.disabled,u=a.hidden,d=a.required,s=(a.rules,a.enablePreview),m=a.buttonText,v=a.fieldTitleRef,f=a.baseUrl,p=a.limit,b=a.accept,E=a.onRemove,_=a.handleChange;return u?null:y().createElement(g.c,{ref:v,subTitle:r,controlMeta:S(S({},e.controlMeta),{},{labelDirection:"v"}),required:d},0===(null==o?void 0:o.length)&&c?y().createElement(y().Fragment,null,"-"):y().createElement(C.Picture,{multiple:!0,baseUrl:f,action:t,data:{action:"upload",tempstorage:!1},disabled:i,readonly:c,fileList:o,uploadNum:p,onChange:_,onRemove:E,beforeUpload:n,accept:b,enablePreview:s,buttonText:m,noticeInfo:l}))}))},78184:function(e,n,a){a.d(n,{c:function(){return S}});var t=a(72048),l=a(23992),r=a.n(l),o=a(67584),c=a.n(o),i=(a(86456),a(21300),a(33768),a(29885),a(65984)),u=a.n(i),d=a(22176),s=a(47906),m=a(63548),v="D2uvtrIA_popup_body",f="x8pGkqfS_item",p="tIkx0VPm_title",b="Ef77mT7u_user_info",E="_8U-jn1Ug_avatar",h="_2jnKO7VQ_org_Info",y="sPSqBVga_headTitle",g="AVFhz5E2_hidden",C="xwSSaRqa_org_Info_loading",k=(0,i.memo)((function(e){var n,a=e.data,t=e.title;return u().createElement("div",{className:v},u().createElement("div",{className:y},t),u().createElement("div",{className:b},u().createElement("div",{className:f},u().createElement("div",{className:p},"员工编号"),u().createElement("div",null,(null==a?void 0:a.number)||"-")),u().createElement("div",{className:f},u().createElement("div",{className:p},"姓名"),u().createElement("div",null,(null==a?void 0:a.name)||"-")),u().createElement("div",{className:f},u().createElement("div",{className:p},"头像"),u().createElement("div",{className:E},u().createElement(s.Avatar,{src:null==a?void 0:a.avatar}))),u().createElement("div",{className:f},u().createElement("div",{className:p},"性别"),u().createElement("div",null,(null==a?void 0:a.gender)||"-")),u().createElement("div",{className:f},u().createElement("div",{className:p},"生日"),u().createElement("div",null,(null==a?void 0:a.birthday)||"-")),u().createElement("div",{className:f},u().createElement("div",{className:p},"手机号"),u().createElement("div",null,(null==a?void 0:a.phone)||"-")),u().createElement("div",{className:f},u().createElement("div",{className:p},"邮箱"),u().createElement("div",null,(null==a?void 0:a.email)||"-")),(null==a?void 0:a.orgs)&&(null==a?void 0:a.orgs.length)>0&&u().createElement("div",{className:f},u().createElement("div",{className:p},"所属组织"),u().createElement("div",null,u().createElement("table",{cellSpacing:1,cellPadding:1},u().createElement("tr",null,u().createElement("th",null,"所属组织编码"),u().createElement("th",null,"组织名称")),null==a?void 0:r()(n=a.orgs).call(n,(function(e,n){return u().createElement("tr",{key:e.orgId+n},u().createElement("td",null,e.orgNum),u().createElement("td",null,e.orgName))})))))))})),N=(0,i.memo)((function(e){var n=e.org,a=e.title,l=n||{},r=l.id,o=l.number,d=[window.__domainurl__||"","nocode/m/user/company/",r,"/",o].join("")+window.location.search,s=(0,i.useState)(!1),v=(0,t.c)(s,2),f=v[0],p=v[1];return u().createElement(u().Fragment,null,u().createElement("div",{className:y},a),u().createElement("div",{className:f?g:C},u().createElement(m.Spin,null)),u().createElement("div",{className:f?"":g},u().createElement("iframe",{src:d,className:h,onLoad:function(){c()((function(){return p(!0)}),1e3)}})))})),_=(0,i.memo)((function(e){var n=e.visible,a=e.title,l=e.type,r=e.data,o=e.onClose,c=(0,i.useState)(!1),s=(0,t.c)(c,2),m=s[0],v=s[1];(0,i.useEffect)((function(){v(n)}),[n]);var f=(0,i.useCallback)((function(){if(o)return null==o?void 0:o();v(!1)}),[o]);return u().createElement(d.c,{visible:m,lockScroll:!1,closeable:!0,onClose:f,bodyStyle:{height:"auto",minHeight:180}},""!==l&&function(e){return"user"===e?u().createElement(k,{data:r,title:a||"人员信息"}):"org"===e?u().createElement(N,{org:r,title:a||"组织信息"}):void 0}(l))}));_.displayName="RefBillUsrOrCompanyInfo";var S=_},87592:function(e,n,a){a.r(n),a.d(n,{default:function(){return ae}});a(87912),a(97308);var t=a(13939),l=a.n(t),r=a(34716),o=a.n(r),c=a(4884),i=a.n(c),u=a(3464),d=a.n(u),s=a(51400),m=a.n(s),v=a(25028),f=a.n(v),p=a(75240),b=a(81043),E=a(72048),h=a(30112),y=(a(86456),a(76124),a(59992)),g=a.n(y),C=a(73980),k=a.n(C),N=a(70696),_=a.n(N),S=a(50524),w=a.n(S),I=a(23992),R=a.n(I),O=a(760),x=a.n(O),T=a(65984),M=a.n(T),j=a(39756),A=a(10532),D=a(13764),F=a(38680),q=a(14020),U=a(74238),B=a(18656),V={"ref-bill-option":"_54fTl+Yu_ref-bill-option","ref-bill-option-title":"I-f6aEiv_ref-bill-option-title","ref-bill-option-desc":"z8gANQMR_ref-bill-option-desc","ref-bill-option-empty":"c4n62y0z_ref-bill-option-empty","ref-bill-extra":"B+v0ytCg_ref-bill-extra"},L=a(60644),P=a(78184),z="_7hth3Wfp_text",H=a(62132),W=(0,T.memo)((function(e){var n,a,t=e.meta,l=e.model,r=e.multi,o=e.onRef,c=e.data,i=t.pageId,u=t.id,d=t.gridId,s=t.caption;(0,T.useImperativeHandle)(o,(function(){return{showCompany:w,showStaffModal:S}}),[]);var m=(0,T.useState)(!1),v=(0,E.c)(m,2),f=v[0],p=v[1],b=(0,T.useState)({}),h=(0,E.c)(b,2),y=h[0],g=h[1],C=(0,T.useState)(""),k=(0,E.c)(C,2),N=k[0],_=k[1],S=(0,T.useCallback)((function(e){_("user"),g(e),p(!0)}),[]),w=(0,T.useCallback)((function(e){_("org"),g(e),p(!0)}),[]),I=(0,T.useCallback)((function(e){if(e){var n=[e],a=u;d&&(n.push(u),a=d),l.batchInvoke(F.uW,i,a,[n])}}),[i,u,d]),O=(0,H.c)(I);return M().createElement("div",{className:z},r?null==c?void 0:R()(c).call(c,(function(e,n){return M().createElement("span",{key:e.value},window.NOCODE_SHARE_ID?e.label:M().createElement("a",{onClick:function(){return O(e.value)}},e.label),n!==c.length-1?",":"")})):window.NOCODE_SHARE_ID?(null===(n=c[0])||void 0===n?void 0:n.label)||"-":M().createElement("a",{onClick:function(){var e;return O(null===(e=c[0])||void 0===e?void 0:e.value)}},(null===(a=c[0])||void 0===a?void 0:a.label)||"-"),M().createElement(P.c,{visible:f,type:N,data:y,title:l.getControlText(s),onClose:function(){g({}),p(!1)}}))}));W.displayName="RefBillReadonly";var Q=W;function G(e,n){var a=l()(e);if(o()){var t=o()(e);n&&(t=_()(t).call(t,(function(n){return i()(e,n).enumerable}))),a.push.apply(a,t)}return a}function J(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?G(Object(a),!0).forEach((function(n){(0,h.c)(e,n,a[n])})):d()?m()(e,d()(a)):G(Object(a)).forEach((function(n){f()(e,n,i()(a,n))}))}return e}var K=g()("更新下拉数据"),X=g()("设置下拉选中值"),Y=g()("设置下拉选项"),$=g()("根据u指令设置下拉选项"),Z="ref-bill-option",ee={value:"",options:[],valueOptions:[]},ne=function(e,n){var a=n.type,t=n.payload;switch(a){case K:return J(J({},e),t);case X:return J(J({},e),{},{value:t});case Y:return J(J({},e),{},{options:t});case $:return J(J({},e),{},{valueOptions:t})}};var ae=M().memo((function(e){var n=e.value,a=e.controlMeta,t=e.onChange,l=e.onSearch,r=(0,T.useContext)(j.m).model,o=(0,T.useReducer)(ne,ee),c=(0,E.c)(o,2),i=c[0],u=c[1],d=(0,T.useState)(0),s=(0,E.c)(d,2),m=s[0],v=s[1],f=i.options,h=i.value,y=(i.label,i.valueOptions),g=a.pageId,C=a.id,N=a.ShowClearButton,S=a.rowIndex,I=a.gridId,O=a.multi,P=a.propsDisplay,z=a.refbilltype,W=(0,U.sB)(a),G=W.readonly,$=W.placeholder,ae=W.disabled,te=W.hidden,le=W.required,re=W.rules,oe=1===O,ce=(0,T.useRef)(null),ie=(0,T.useRef)(),ue=(0,T.useRef)(!1),de=(0,T.useRef)(),se=(0,T.useCallback)((function(e){if(u({type:X,payload:e}),t)return t(e);ve(e)}),[u,t]),me=(0,T.useCallback)((function(e,n){return oe&&ue.current?e:(oe&&!ue.current&&se(e||[]),u({type:X,payload:e}),t?t(e):void ve(e))}),[u,t,oe]),ve=(0,T.useCallback)((function(e){var n={k:C,r:0,v:e};r.batchInvoke("updateValue",g,"",[],[{},[n]]),r.batchInvoke(F.Se,g,C,[[e,0]])}),[]),fe=(0,T.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";r.batchInvoke(F.gR,g,C,[["%",e,"%",null==h?void 0:k()(h).call(h,0,20),1,0]])}),[h]),pe=(0,H.c)(fe),be=(0,T.useCallback)((function(e){if(ue.current=e,e){var n=h?Array.isArray(h)?h:[h]:[],a=_()(f).call(f,(function(e){return w()(n).call(n,e.value)}));u({type:Y,payload:a}),v(0),pe()}}),[pe,h,f]),Ee=(0,T.useCallback)((function(e){if(Array.isArray(e.v)){var n,a,t=R()(n=e.v).call(n,(function(e){return Ne(e)})),l=R()(t).call(t,(function(e){return e.value})),o=oe?l:l.join();if(u({type:K,payload:{value:o,options:t,valueOptions:t}}),!1===e.isLoadData)null===(a=de.current)||void 0===a||a.validateFields("",o);(0,L.isEqual)(h,o)||G||r.batchInvoke(F.gR,g,C,[["%","","%",o||"",1,0]])}else{var c;if(u({type:K,payload:{value:oe?[]:"",options:[]}}),!1===e.isLoadData)null===(c=de.current)||void 0===c||c.validateFields("",oe?[]:"")}}),[h,G]);(0,U.uO)(a,de,(function(e){if(Array.isArray(e)){var n=R()(e).call(e,(function(e){return Ne(e)})),a=R()(n).call(n,(function(e){return e.value}));return oe?a:a.join()}return oe?[]:""}));var he=(0,T.useCallback)((0,q.Cu)((function(){r.batchInvoke("addNewRef",g,C,[[P]])})),[P,g,C]),ye=(0,T.useCallback)((function(e){var n,a=e.pkId,t=oe?x()(n=[]).call(n,(0,b.c)(ie.current.value),[a]):a;se(t),pe()}),[oe,se]),ge=(0,T.useCallback)((function(e){var n,a=null==e||null===(n=e.data)||void 0===n?void 0:R()(n).call(n,(function(e){var n=(0,p.c)(e),a=n[0],t=k()(n).call(n,1),l=a?JSON.parse(a):{};return J(J({},Ne(t)),{},{disabled:"disabled"===l._state_})}));u({type:Y,payload:a}),v(1)}),[v]),Ce=(0,T.useCallback)((function(e){var n,a,t=e[0],l=t.methodname,r=t.args;switch(l){case F.Ex:ge(r[0]);break;case F.kT:Ee({v:r[0]});break;case F.Tb:null===(n=ce.current)||void 0===n||n.showStaffModal(r[0]);break;case F.X3:null===(a=ce.current)||void 0===a||a.showCompany(r[0]);break;case F.c$:ye(r[0])}}),[Ee,v,ge]),ke=(0,T.useCallback)((function(e){var n=e.args;n[0].k===C&&n[0].r===S&&Ce([e])}),[Ce]),Ne=(0,T.useCallback)((function(e){var n=(0,p.c)(e),a=n[0],t=n[1],l=k()(n).call(n,2),r=R()(l).call(l,(function(e){return e||"-"}));return{label:t||"-",value:a,des:r.join("｜")}}),[]),_e=(0,T.useCallback)((function(e){var n=e.label,a=e.des;return M().createElement("div",{className:V[Z]},M().createElement("div",{className:V["".concat(Z,"-title")]},n),a&&M().createElement("div",{className:V["".concat(Z,"-desc")]},a))}),[]),Se=(0,T.useCallback)((function(e,n){return!0}),[]),we=(0,T.useCallback)((0,q.Cu)((function(e){if(l)return l(e);r.batchInvoke(F.gR,g,C,[["%",e,"%","",1,0]])}),500),[l]);r.useUpdateControlStates(a,Ee),r.useInvokeControlMethod(a,Ce),(0,T.useEffect)((function(){n&&(null==n?void 0:n[0])!==h&&Ee({k:C,v:n})}),[n]),(0,T.useEffect)((function(){var e,n,a=r.addEventListener(x()(e=x()(n="".concat(F.lN,"-")).call(n,g,"-")).call(e,I),ke);return function(){null==a||a()}}),[]);var Ie=(0,T.useMemo)((function(){return h?_()(y).call(y,(function(e){return w()(h).call(h,e.value)})):[]}),[h,y]),Re=(0,T.useMemo)((function(){if(0===m)return M().createElement("div",{className:V["".concat(Z,"-empty")]},M().createElement(B.Spin,{name:"Spin"}))}),[m]),Oe=(0,T.useMemo)((function(){var e;return w()(e=["bos_user","bos_adminorg"]).call(e,z)?null:M().createElement("div",{className:V["ref-bill-extra"]},M().createElement(D.BtnField,{major:!0,type:"text",onClick:he,icon:{prefix:"ncicon",type:"zengjia-yuan"}},"新增记录"))}),[z,he]);return te?null:M().createElement(A.c,{controlMeta:a,required:le,rules:re,ref:de},G?M().createElement(Q,{data:Ie,multi:oe,onRef:ce,meta:a,model:r}):M().createElement(D.Select,{ref:ie,value:h,renderSearch:!0,multiple:oe,allowClear:N,placeholder:$,disabled:ae,options:f||[],onChange:me,onVisibleChange:be,notFoundContent:Re,renderOption:_e,filterOption:Se,onSearch:we,onConfirm:se,maxTagCount:5,extra:Oe}))}))}}]);