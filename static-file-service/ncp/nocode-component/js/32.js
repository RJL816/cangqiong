"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunknocode_component"] = self["webpackChunknocode_component"] || []).push([[32],{

/***/ "./src/control/web/Attachment/index.less":
/*!***********************************************!*\
  !*** ./src/control/web/Attachment/index.less ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\"no_file\":\"YTkRbZYY_no_file\",\"comform_body\":\"W7YVdCfq_comform_body\",\"input\":\"TJp225mr_input\",\"title\":\"KeR0k7MJ_title\"});\n\n//# sourceURL=webpack://nocode-component/./src/control/web/Attachment/index.less?");

/***/ }),

/***/ "./src/control/web/RefBill/RefBillReadonly.less":
/*!******************************************************!*\
  !*** ./src/control/web/RefBill/RefBillReadonly.less ***!
  \******************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\"text\":\"Zn6h-Dx5_text\"});\n\n//# sourceURL=webpack://nocode-component/./src/control/web/RefBill/RefBillReadonly.less?");

/***/ }),

/***/ "./src/control/web/RefBill/UserAndOrgModalBody.less":
/*!**********************************************************!*\
  !*** ./src/control/web/RefBill/UserAndOrgModalBody.less ***!
  \**********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\"org_info\":\"LQ9dRkQy_org_info\",\"organization\":\"rbAUWmcE_organization\",\"item\":\"_0bsE9HyI_item\",\"managers\":\"vYz5ajTk_managers\",\"title\":\"IKj-Z2b9_title\",\"list\":\"cBOpquAU_list\",\"page\":\"YKyLMzeF_page\",\"user_info\":\"_0bCnRGBO_user_info\",\"table\":\"RCOCClI1_table\"});\n\n//# sourceURL=webpack://nocode-component/./src/control/web/RefBill/UserAndOrgModalBody.less?");

/***/ }),

/***/ "./src/control/web/RefBillGridView/OperatorFields.less":
/*!*************************************************************!*\
  !*** ./src/control/web/RefBillGridView/OperatorFields.less ***!
  \*************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\"operator\":\"rf4exZZu_operator\"});\n\n//# sourceURL=webpack://nocode-component/./src/control/web/RefBillGridView/OperatorFields.less?");

/***/ }),

/***/ "./src/control/hooks/useRefBillProps.ts":
/*!**********************************************!*\
  !*** ./src/control/hooks/useRefBillProps.ts ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.regexp.exec.js */ \"../../node_modules/core-js/modules/es.regexp.exec.js\");\n/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var core_js_modules_es_string_search_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.string.search.js */ \"../../node_modules/core-js/modules/es.string.search.js\");\n/* harmony import */ var core_js_modules_es_string_search_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_search_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/filter */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/instance/filter.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\n/*\n * @Description:\n * @Author: jianhang_he\n * @Date: 2023-08-16 14:53:31\n * @LastEditTime: 2023-08-31 17:18:25\n * @Last Modified by: jianhang_he\n */\n\nvar useRefBillProps = function useRefBillProps(_ref) {\n  var pageId = _ref.pageId,\n    fieldKey = _ref.fieldKey,\n    model = _ref.model,\n    baseUrl = _ref.baseUrl,\n    onDownLoad = _ref.onDownLoad;\n  var getControlText = model.getControlText,\n    addEventListener = model.addEventListener;\n  var batchInvoke = function batchInvoke(actionName, id, args, params) {\n    model.batchInvoke(actionName, pageId, id, args, params);\n  };\n  var batchInvokeQuery = function batchInvokeQuery(id) {\n    var args = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var _args$filter = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_2___default()(args),\n      filter = _args$filter === void 0 ? '' : _args$filter,\n      _args$search = args.search,\n      search = _args$search === void 0 ? '' : _args$search,\n      _args$order_by = args.order_by,\n      order_by = _args$order_by === void 0 ? '' : _args$order_by,\n      _args$select = args.select,\n      select = _args$select === void 0 ? '' : _args$select,\n      _args$page_size = args.page_size,\n      page_size = _args$page_size === void 0 ? 10 : _args$page_size,\n      _args$page_no = args.page_no,\n      page_no = _args$page_no === void 0 ? 1 : _args$page_no,\n      _args$ids = args.ids,\n      ids = _args$ids === void 0 ? [] : _args$ids;\n    batchInvoke('query', fieldKey, [[id, {\n      filter: filter,\n      // 数据过滤\n      search: search,\n      // 搜索内容\n      order_by: order_by,\n      // 排序\n      select: select,\n      // 字段\n      page_size: page_size,\n      // 每页行数\n      page_no: page_no,\n      ids: ids // 选中的ids\n    }]]);\n  };\n\n  // const addControlAction = (methodName, listener) => {\n  //   const removerAction = model.addControlAction(methodName, pageId, fieldKey, listener)\n\n  //   // 需要返回销毁函数，要不然监听一直都在\n  //   return removerAction\n  // }\n\n  var onBatchInvoke = function onBatchInvoke(actionName, args) {\n    var params = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n    batchInvoke(actionName, fieldKey, args, params);\n  };\n  var batchInvokeListConfig = function batchInvokeListConfig(id) {\n    batchInvoke('listConfig', fieldKey, [[id]]);\n  };\n  return {\n    baseUrl: baseUrl,\n    batchInvoke: onBatchInvoke,\n    getControlText: getControlText,\n    addControlAction: addEventListener,\n    onDownLoad: onDownLoad,\n    batchInvokeListConfig: batchInvokeListConfig,\n    batchInvokeQuery: batchInvokeQuery\n  };\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (useRefBillProps);\n\n//# sourceURL=webpack://nocode-component/./src/control/hooks/useRefBillProps.ts?");

/***/ }),

/***/ "./src/control/web/Attachment/index.tsx":
/*!**********************************************!*\
  !*** ./src/control/web/Attachment/index.tsx ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ \"../../node_modules/core-js/modules/web.dom-collections.for-each.js\");\n/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/keys */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/object/keys.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/filter */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/instance/filter.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-properties */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/object/define-properties.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-property */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/object/define-property.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/defineProperty */ \"../../node_modules/@babel/runtime-corejs3/helpers/esm/defineProperty.js\");\n/* harmony import */ var core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! core-js/modules/es.function.name.js */ \"../../node_modules/core-js/modules/es.function.name.js\");\n/* harmony import */ var core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var kd_libs_react__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! kd_libs/react */ \"webpack/container/remote/kd_libs/react\");\n/* harmony import */ var kd_libs_react__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(kd_libs_react__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var _FieldItemWrapper__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../FieldItemWrapper */ \"./src/control/web/FieldItemWrapper/index.tsx\");\n/* harmony import */ var _base_web__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @/base/web */ \"./src/base/web/index.ts\");\n/* harmony import */ var _utils_webTools__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @/utils/webTools */ \"./src/utils/webTools.ts\");\n/* harmony import */ var _index_less__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./index.less */ \"./src/control/web/Attachment/index.less\");\n/* harmony import */ var _control_hooks_useAttachmentHooks__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @/control/hooks/useAttachmentHooks */ \"./src/control/hooks/useAttachmentHooks.ts\");\n\n\n\n\n\n\n\n\n\n\n\nfunction ownKeys(e, r) { var t = _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_2___default()(e); if ((_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_3___default())) { var o = _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_3___default()(e); r && (o = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_4___default()(o).call(o, function (r) { return _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_5___default()(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { (0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(e, r, t[r]); }) : (_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_6___default()) ? _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_7___default()(e, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_6___default()(t)) : ownKeys(Object(t)).forEach(function (r) { _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_8___default()(e, r, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_5___default()(t, r)); }); } return e; }\n\n\n\n\n// import { KDContext } from '@/utils/context'\n// import { debounce, downloadFile } from '@/utils'\n// import { useFieldProps } from '@/control/hooks/useFieldProps'\n// import { UPDATE_CONTROL_STATES, INVOKE_CONTROL_METHOD } from '@/constants/sysActionName'\n\n// import { getSecureUrl } from '@/utils/attachmentPreviewUtils'\n// import { ATTACHMENT_PREVIEW_EXCEL } from '@/base/web/AttachmentPreviewer/AttachmentPreviewerConst'\n\n// import produce from '@/utils/immerTools'\n// import { debounce } from '@/utils'\n\n// const ATTACHMENT_ACTION = `${window.__domainurl__ || ''}nocode/v2/nocode_sys/attachment`\n// // 拼接免登分享ID\n// const getFullUrl = (path:string) => {\n//   const str = path.includes('?') ? '&' : '?'\n//   const shareParam = window.NOCODE_SHARE_ID ? `${str}noCodeShareId=${window.NOCODE_SHARE_ID}` : ''\n//   return path + shareParam\n// }\n\nfunction KDAttachment(props) {\n  // const { controlMeta, value: cellValue, onChange } = props\n  // const { model } = useContext(KDContext)\n  // const { readonly, disabled, hidden, required } = useFieldProps(controlMeta)\n  // const [datas, setDatas] = useState<any[]>([]) // 文件列表\n  // // const titleRef = useRef(model.getControlText(controlMeta.caption))\n  // const [labelText, setLabelText] = useState('') // 控件标题\n  // const { pageId, id, uploadNum, fileMaxSize, uploadModel, attachmentFileType, displayCount, uploadPrompt, buttonText } = controlMeta\n  // const fieldRef = useRef<any>(null) // 控件外部容器，用户显示错误信息\n  // const uploadRef = useRef(new Map()) // 缓存上传成功的列表\n  // // const baseUrl = useRef<string>(model.getFileServer('attachment')) // 图片路径\n\n  // // 上传前执行\n  // const beforeUpload = useCallback((file, list) => {\n  //   // console.log('beforeUpload', file.name)\n  //   const result = uploadAttachmentVerify(file, list, controlMeta)\n  //   if (result) beforeAsyn(list)\n  //   return result\n  // }, [])\n\n  // const beforeAsyn = useCallback(debounce((list:any[]) => {\n  //   // [{\"key\":\"attachmentpanel\",\"methodName\":\"beforeUpload\",\"args\":[[{\"uid\":\"rc-upload-1665492200338-3\",\"name\":\"nginx路由配置.docx\",\"size\":17445,\"type\":\"application/vnd.openxmlformats-officedocument.wordprocessingml.document\"}]],\"postData\":[{},[]]}]\n  //   const args:any[] = []\n  //   list.forEach((item:any) => {\n  //     if (checkAttachmentType(item, attachmentFileType) && !checkSize(item, fileMaxSize) && !checkEmpty(item)) {\n  //       args.push({ uid: item.uid, name: item.name, size: item.size, type: item.type })\n  //     }\n  //   })\n  //   model.batchInvoke('beforeUpload', pageId, id, [args], [])\n  // }, 50), [])\n\n  // // change事件, 更新\n  // const handleChange = useCallback(({ file, fileList }) => {\n  //   const errText = required && fileList.length === 0 ? '值不能为空' : ''\n  //   fieldRef.current.setValidateMessage(errText)\n  //   const newList = fileList.filter((item:any) => item.status !== 'notStart')\n  //   if (file.status === 'done' && file.response.status) {\n  //     const { lastModified, uid, name, type, size } = file\n  //     const param = {\n  //       status: 'success',\n  //       url: file.response.data.url,\n  //       uploadTime: Date.now()\n  //     }\n  //     const info = { lastModified, uid, name, type, size, ...param }\n  //     uploadRef.current.set(file.uid, info)\n  //     const uploadList = newList.filter((item:any) => item.status === 'uploading')\n  //     // console.log('onChange', uploadRef.current.size, uploadList.length)\n  //     if (uploadList.length === 0) {\n  //       if (onChange) { // 附件单据体内需要使用单据体提供onchange事件\n  //         onChange([...uploadRef.current.values()])\n  //       } else {\n  //         updateDatas([...uploadRef.current.values()])\n  //       }\n  //     }\n  //   } else if (file.status === 'error' || (file.status === 'done' && !file?.response.status)) {\n  //     showNotice(`${file.name}上传失败，请重新上传`)\n  //     // [{\"key\":\"attachmentfield\",\"methodName\":\"uploadResult\",\"args\":[[{\"uid\":\"rc-upload-1687763956534-51\",\"description\":\"禁止上传非法文件。\",\"status\":\"error\"}]],\"postData\":[{},[]]}]\n  //     model.batchInvoke('uploadResult', pageId, id, [[{ uid: file.uid, description: '禁止上传非法文件。', status: 'error' }]], [{}, []])\n  //   }\n  //   setDatas(newList)\n  // }, [onChange, required])\n\n  // // 同步上传成功内容到服务端\n  // const updateDatas = useCallback((files:any[]) => {\n  //   model.batchInvoke('updateValue', pageId, '', [], [{}, [{ k: id, v: files }]])\n  // }, [])\n\n  // // 下载\n  // const onDownload = useCallback((info:any) => {\n  //   const config = model.getConfig(pageId)\n  //   const file = uploadRef.current.get(info.uid)\n  //   const options = {\n  //     params: '1',\n  //     appId: config.appId,\n  //     fId: config.formId,\n  //     fileName: file.name\n  //   }\n  //   const url = `${getFullUrl(file.url)}&kd_cs_ticket=${model.Global.token}`\n  //   downloadFile(url, options)\n  // }, [])\n\n  // // 删除\n  // const handleRemove = useCallback((file:any) => {\n  //   const newData = datas.filter((item:any) => item.uid !== file.uid)\n  //   if (required && !newData.length) {\n  //     fieldRef.current.setValidateMessage('值不能为空')\n  //   }\n  //   // const newFile = uploadRef.current.get(file.uid) // 上传成功列表\n  //   // if (newFile) { // 上传成功文件,更新postData\n  //   // }\n  //   model.batchInvoke('beforeRemove', pageId, id, [{ uid: file.uid }], [])\n  //   setDatas(newData)\n  //   return true\n  // }, [datas, onChange, required])\n\n  // // 修改文件名\n  // const onChangeFileName = useCallback((info:any, index:number) => {\n  //   const file = datas[index]\n  //   file.name = info.name\n  //   if (file.status === 'success') { // 若已经上传成功，需要同时更新缓存\n  //     const obj = uploadRef.current.get(info.uid)\n  //     obj.name = info.name\n  //     uploadRef.current.set(info.uid, obj)\n  //     // updateDatas([...uploadRef.current.values()])\n  //     model.batchInvoke('rename', pageId, id, [info.uid, info.name], [{}, []])\n  //     if (onChange) {\n  //       onChange([...uploadRef.current.values()])\n  //     }\n  //   }\n  //   setDatas([...datas])\n  // }, [datas, onChange])\n\n  // useEffect(() => {\n  //   const label = !displayCount || readonly || disabled ? '' : `(${uploadRef.current.size}/${uploadNum?.max || 1})`\n  //   setLabelText(label)\n  // }, [displayCount, readonly, disabled, uploadNum, datas])\n\n  // // 监听系统U指令-回调\n  // const updateValue = useCallback((info:any) => {\n  //   // console.log('updateValue', info)\n  //   if (!Array.isArray(info.v) || (Array.isArray(info.v) && !info?.v?.length)) {\n  //     setDatas([])\n  //     return\n  //   }\n  //   const map = new Map()\n  //   info.v.forEach((item:any) => {\n  //     const name = model.getControlText(item.name)\n  //     map.set(item.uid, { ...item, name }) // 缓存已经上传成功的列表\n  //   })\n  //   let arr = []\n  //   if (datas.length) { // 有数据时\n  //     arr = datas.map((item:any) => {\n  //       return map.has(item.uid) ? map.get(item.uid) : item\n  //     })\n  //   } else { // 无数据时\n  //     arr = [...map.values()]\n  //   }\n  //   uploadRef.current = map\n  //   setDatas(arr)\n  //   // setDatas([...map.values()])\n  //   // 建立索引，并转换文件名\n  //   // info.v.forEach((item:any) => {\n  //   //   const name = model.getControlText(item.name)\n  //   //   uploadRef.current.set(item.uid, { ...item, name }) // 缓存已经上传成功的列表\n  //   // })\n  //   // if (datas.length) { // 存在列表，更新列表, 同时更新URL\n  //   //   const keys = [...uploadRef.current.keys()]\n  //   //   const data = datas.map((item:any) => {\n  //   //     return keys.includes(item.uid) ? uploadRef.current.get(item.uid) : item\n  //   //   })\n  //   //   setDatas(data)\n  //   // } else {\n  //   //   setDatas([...uploadRef.current.values()])\n  //   // }\n  // }, [datas])\n\n  // useEffect(() => {\n  //   updateValue({ k: id, v: cellValue })\n  // }, [cellValue])\n\n  // /**\n  //  * 控件内部指令\n  //  */\n  // const controlMethod = useCallback((info) => {\n  //   const { args, methodname } = info[0]\n  //   switch (methodname) {\n  //     case 'beforeRemove': // 删除\n  //       const { canRemove } = args[0]\n  //       if (canRemove) {\n  //         const files:any[] = []\n  //         uploadRef.current.forEach((item:any, key:string) => {\n  //           const { lastModified, name, size, status, type, uid, url, uploadTime } = item\n  //           if (key === args[0].uid) {\n  //             files.push({ lastModified, name, size, status, type, uid, url, uploadTime, delete: true })\n  //           } else {\n  //             files.push({ lastModified, name, size, status, type, uid, url, uploadTime })\n  //           }\n  //         })\n  //         model.batchInvoke('updateValue', pageId, '', [], [{}, [{ k: id, v: files }]])\n  //         uploadRef.current.delete(args[0].uid)\n  //       }\n  //       break\n  //   }\n  // }, [datas, uploadRef.current])\n\n  // model.useUpdateControlStates(controlMeta, updateValue)\n  // model.useInvokeControlMethod(controlMeta, controlMethod)\n\n  // // console.log('KDAttachment', controlMeta)\n  // const notice = uploadPrompt ? `请上传小于${fileMaxSize}M的${attachmentFileType?.replaceAll('.', '')}文件，文件个数不少于${uploadNum?.min || 0}个，不多于${uploadNum?.max || 1}个` : ''\n\n  // // 处理previewurl\n  // const handledDatas = useMemo(() => {\n  //   const config = model.getConfig(pageId)\n  //   const { appId, formId } = config\n  //   return datas.map(item => {\n  //     // excel不加shareId，内部fetchControlData时会加\n  //     item.previewurl = getSecureUrl({ url: item.previewurl, pageId, appId, formId, ticket: model.Global.token, needShareId: !ATTACHMENT_PREVIEW_EXCEL.includes(item.type) })\n  //     return item\n  //   })\n  // }, [datas])\n\n  // const previewType = useMemo(() => {\n  //   const { attPreview } = model?.getConfig?.() || {}\n  //   const { previewType } = attPreview || {}\n  //   return previewType || '0'\n  // }, [])\n\n  var _useAttachmentHooks = (0,_control_hooks_useAttachmentHooks__WEBPACK_IMPORTED_MODULE_16__[\"default\"])(_objectSpread(_objectSpread({}, props), {}, {\n      uploadAttachmentVerify: _utils_webTools__WEBPACK_IMPORTED_MODULE_14__.uploadAttachmentVerify,\n      showInfo: _utils_webTools__WEBPACK_IMPORTED_MODULE_14__.showNotice\n    })),\n    action = _useAttachmentHooks.action,\n    handledDatas = _useAttachmentHooks.handledDatas,\n    disabled = _useAttachmentHooks.disabled,\n    readonly = _useAttachmentHooks.readonly,\n    buttonText = _useAttachmentHooks.buttonText,\n    uploadModel = _useAttachmentHooks.uploadModel,\n    handleChange = _useAttachmentHooks.handleChange,\n    onDownload = _useAttachmentHooks.onDownload,\n    onChangeFileName = _useAttachmentHooks.onChangeFileName,\n    beforeUpload = _useAttachmentHooks.beforeUpload,\n    handleRemove = _useAttachmentHooks.handleRemove,\n    attachmentFileType = _useAttachmentHooks.attachmentFileType,\n    uploadNum = _useAttachmentHooks.uploadNum,\n    notice = _useAttachmentHooks.notice,\n    previewType = _useAttachmentHooks.previewType,\n    labelText = _useAttachmentHooks.labelText,\n    required = _useAttachmentHooks.required,\n    hidden = _useAttachmentHooks.hidden,\n    fieldRef = _useAttachmentHooks.fieldRef,\n    datas = _useAttachmentHooks.datas;\n  if (hidden) return null;\n  return /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_11___default().createElement(_FieldItemWrapper__WEBPACK_IMPORTED_MODULE_12__[\"default\"], {\n    ref: fieldRef,\n    subTitle: labelText,\n    controlMeta: props.controlMeta,\n    required: required\n  }, (datas === null || datas === void 0 ? void 0 : datas.length) === 0 && readonly ? /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_11___default().createElement(\"div\", {\n    className: _index_less__WEBPACK_IMPORTED_MODULE_15__[\"default\"].no_file\n  }, \"\\u6682\\u65E0\\u6570\\u636E\") : /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_11___default().createElement(_base_web__WEBPACK_IMPORTED_MODULE_13__.Attachment, {\n    multiple: true,\n    action: action,\n    data: {\n      action: 'upload',\n      tempstorage: false\n    },\n    fileList: handledDatas,\n    disabled: disabled,\n    readonly: readonly,\n    buttonText: buttonText,\n    mode: uploadModel,\n    onChange: handleChange,\n    onDownload: onDownload,\n    onChangeFileName: onChangeFileName,\n    beforeUpload: beforeUpload,\n    onRemove: handleRemove,\n    onStart: function onStart(file) {\n      return console.log('uploadstart', file.name);\n    },\n    accept: attachmentFileType || '',\n    uploadNum: uploadNum,\n    noticeInfo: notice,\n    previewType: previewType\n  }));\n}\n/* harmony default export */ __webpack_exports__[\"default\"] = ((0,kd_libs_react__WEBPACK_IMPORTED_MODULE_11__.memo)(KDAttachment));\n\n//# sourceURL=webpack://nocode-component/./src/control/web/Attachment/index.tsx?");

/***/ }),

/***/ "./src/control/web/FieldItemWrapper/index.tsx":
/*!****************************************************!*\
  !*** ./src/control/web/FieldItemWrapper/index.tsx ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_corejs3_helpers_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/extends */ \"../../node_modules/@babel/runtime-corejs3/helpers/esm/extends.js\");\n/* harmony import */ var _babel_runtime_corejs3_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/objectWithoutProperties */ \"../../node_modules/@babel/runtime-corejs3/helpers/esm/objectWithoutProperties.js\");\n/* harmony import */ var kd_libs_react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kd_libs/react */ \"webpack/container/remote/kd_libs/react\");\n/* harmony import */ var kd_libs_react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(kd_libs_react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _base_web_FieldItem__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/base/web/FieldItem */ \"./src/base/web/FieldItem/index.tsx\");\n/* harmony import */ var _utils_context__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/utils/context */ \"./src/utils/context.ts\");\n/* harmony import */ var _utils_componentUtil__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/utils/componentUtil */ \"./src/utils/componentUtil.ts\");\n/* harmony import */ var _constants_serverproperties__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/constants/serverproperties */ \"./src/constants/serverproperties.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/utils */ \"./src/utils/index.ts\");\n\n\nvar _excluded = [\"controlMeta\", \"children\", \"tipsTrigger\"];\n/*\n * @Description:\n * @Author: jianhang_he\n * @Date: 2022-08-23 17:28:40\n * @LastEditTime: 2024-01-17 15:11:05\n * @Last Modified by: jianhang_he\n */\n\n\n\n\n\n\nvar FieldItemWrapper = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_2__.forwardRef)(function (_ref, ref) {\n  var controlMeta = _ref.controlMeta,\n    children = _ref.children,\n    tipsTrigger = _ref.tipsTrigger,\n    others = (0,_babel_runtime_corejs3_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(_ref, _excluded);\n  var fieldItemRef = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n  var _useContext = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_2__.useContext)(_utils_context__WEBPACK_IMPORTED_MODULE_4__.KDContext),\n    model = _useContext.model;\n  var caption = controlMeta.caption,\n    LabelWidth = controlMeta.LabelWidth,\n    ShowTitle = controlMeta.ShowTitle,\n    TitleArea = controlMeta.TitleArea,\n    helpTips = controlMeta.helpTips,\n    required = controlMeta.mi,\n    rules = controlMeta.rules,\n    Status = controlMeta.Status;\n  var showTitle = !(0,_utils__WEBPACK_IMPORTED_MODULE_7__.isHideTitleArea)(TitleArea);\n  var labelStyle = {\n    width: LabelWidth\n  };\n  var labelText = model.getControlText(caption);\n  var isReadonly = Status === _constants_serverproperties__WEBPACK_IMPORTED_MODULE_6__.TEXT_STATUS_ENUM.READONLY;\n  var pageStatus = model.getFormStatus();\n  var tips = helpTips || controlMeta.HelpTips;\n  var id = controlMeta === null || controlMeta === void 0 ? void 0 : controlMeta.id;\n  // 只读态和查看太的文字间距是4px\n  // 查看态\n  if ((0,_utils_componentUtil__WEBPACK_IMPORTED_MODULE_5__.isPageViewStatus)(pageStatus)) {\n    labelStyle = (0,_babel_runtime_corejs3_helpers_extends__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(labelStyle, {\n      color: '#666666',\n      marginBottom: '4px'\n    });\n  }\n  // 只读态\n  if (isReadonly) {\n    labelStyle = (0,_babel_runtime_corejs3_helpers_extends__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(labelStyle, {\n      marginBottom: '4px'\n    });\n  }\n  (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_2__.useImperativeHandle)(ref, function () {\n    var _fieldItemRef$current, _fieldItemRef$current2;\n    return {\n      setValidateMessage: (_fieldItemRef$current = fieldItemRef.current) === null || _fieldItemRef$current === void 0 ? void 0 : _fieldItemRef$current.setValidateMessage,\n      validateFields: (_fieldItemRef$current2 = fieldItemRef.current) === null || _fieldItemRef$current2 === void 0 ? void 0 : _fieldItemRef$current2.validateFields\n    };\n  });\n  return /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_base_web_FieldItem__WEBPACK_IMPORTED_MODULE_3__[\"default\"], (0,_babel_runtime_corejs3_helpers_extends__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n    ref: fieldItemRef,\n    labelText: labelText,\n    required: !isReadonly && required // 只读态时不存在必录的情况\n    ,\n    labelStyle: labelStyle,\n    showTitle: showTitle,\n    tips: tips,\n    tipsTrigger: tipsTrigger,\n    rules: rules\n  }, others, {\n    id: id,\n    labelWrap: true\n  }), children);\n});\nFieldItemWrapper.displayName = 'FieldItemWrapper';\n/* harmony default export */ __webpack_exports__[\"default\"] = (FieldItemWrapper);\n\n//# sourceURL=webpack://nocode-component/./src/control/web/FieldItemWrapper/index.tsx?");

/***/ }),

/***/ "./src/control/web/Picture/index.tsx":
/*!*******************************************!*\
  !*** ./src/control/web/Picture/index.tsx ***!
  \*******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var kd_libs_react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! kd_libs/react */ \"webpack/container/remote/kd_libs/react\");\n/* harmony import */ var kd_libs_react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(kd_libs_react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _FieldItemWrapper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../FieldItemWrapper */ \"./src/control/web/FieldItemWrapper/index.tsx\");\n/* harmony import */ var _base_web__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/base/web */ \"./src/base/web/index.ts\");\n/* harmony import */ var _utils_webTools__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/utils/webTools */ \"./src/utils/webTools.ts\");\n/* harmony import */ var _control_hooks_usePictureHooks__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/control/hooks/usePictureHooks */ \"./src/control/hooks/usePictureHooks.ts\");\n\n\n\n// import { KDContext } from '@/utils/context'\n// import { downloadFile } from '@/utils'\n\n// import { useFieldProps } from '@/control/hooks/useFieldProps'\n// import { UPDATE_CONTROL_STATES } from '@/constants/sysActionName'\n// import styles from './index.less'\n\n\n/**\n * 附件-KD层\n * @param props\n */\n\n// const shareParam = window.NOCODE_SHARE_ID ? `?noCodeShareId=${window.NOCODE_SHARE_ID}` : ''\n// const PICTURE_ACTION = `${window.__domainurl__ || ''}nocode/v2/nocode_sys/image${shareParam}`\n\n// const getFullUrl = (baseUrl:string, path:string) => {\n//   return baseUrl + (path[0] === '/' ? path.slice(1) : path) + shareParam\n// }\n\nfunction KDPicture(props) {\n  // const { controlMeta, value: cellValue, onChange } = props\n  // const { model } = useContext(KDContext)\n  // const { readonly, disabled, hidden, required } = useFieldProps(controlMeta)\n  // const {\n  //   pageId, id, imageFileType, fileMaxSize, uploadNum, ops,\n  //   enablePreview, buttonText, displayCount, uploadPrompt\n  // } = controlMeta\n\n  // const uploadRef = useRef(new Map()) // 记录每个文件上传时间\n  // const fieldTitleRef = useRef<any>(null) // 存储错误提示Dom\n  // const baseUrl = useRef(model.getFileServer('picture')) // 图片的基础URL\n  // // const titleRef = useRef(model.getControlText(controlMeta.caption)) // 原始标题\n  // const [labelText, setLabelText] = useState('') // 字段标题，用于存储要显示上传数量时的标题\n\n  // // 将字符串数据转成数组\n  // const transformData = useCallback((str:string) => {\n  //   if (!str) return []\n  //   return JSON.parse(str).map((item:any) => {\n  //     uploadRef.current.set(item.uid, { ...item }) // 保存未变更的URL地址\n  //     const url = getFullUrl(baseUrl.current, item.url) // 变更URL\n  //     return { ...item, url }\n  //   })\n  // }, [])\n\n  // const [datas, setDatas] = useState<any[]>([]) // 上传列表数据\n\n  // 上传前执行图片校验\n  var beforeUpload = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (file, list) {\n    // 是否超过个数\n    return (0,_utils_webTools__WEBPACK_IMPORTED_MODULE_3__.uploadPictureVerify)(file, list, props.controlMeta);\n  }, [props.controlMeta]);\n\n  // // change事件, 更新\n  // const handleChange = useCallback(({ file, fileList }) => {\n  //   const errText = required && fileList.length === 0 ? '值不能为空' : ''\n  //   fieldTitleRef.current.setValidateMessage(errText)\n  //   let newList = fileList.filter((item:any) => item.status !== 'notStart')\n  //   if (file.status === 'done' && file.response.status) {\n  //     const { uid, name, size } = file\n  //     const data = {\n  //       url: file.response.data.url,\n  //       status: 'success',\n  //       uploadTime: Date.now()\n  //     }\n  //     uploadRef.current.set(file.uid, { uid, name, size, ...data }) // Map存储已上传的文件信息\n  //     const str = JSON.stringify([...(uploadRef.current.values())])\n  //     const updateData = { k: id, r: 0, v: str }\n  //     const uploadList = newList.filter((item:any) => item.status === 'uploading')\n  //     // console.log('onChange', uploadRef.current.size, uploadList.length)\n  //     if (uploadList.length === 0) {\n  //       if (onChange) {\n  //         // 如果外部传了onChange，用外部的（表格里图片字段用）\n  //         onChange([...(uploadRef.current.values())])\n  //       } else {\n  //         model.batchInvoke('updateValue', pageId, '', [], [{}, [updateData]])\n  //       }\n  //     }\n  //     // model.setPostData(pageId, id, str)\n  //     newList = newList.map((item:any) => {\n  //       if (item.uid === uid) item.status = 'success'\n  //       return item\n  //     })\n  //   }\n  //   setDatas([...newList])\n  // }, [datas, onChange, required])\n\n  // // 删除\n  // const onRemove = useCallback((file:any) => {\n  //   const newData = datas.filter((item:any) => item.uid !== file.uid)\n  //   const newFile = uploadRef.current.get(file.uid) // 上传成功列表\n  //   setDatas([...newData])\n  //   if (newFile) { // 上传成功文件,更新postData\n  //     uploadRef.current.delete(file.uid)\n  //     const str = uploadRef.current.size > 0 ? JSON.stringify([...uploadRef.current.values()]) : ''\n  //     const updateData = { k: id, r: 0, v: str }\n  //     if (onChange) {\n  //       // 如果外部传了onChange，用外部的（表格里图片字段用）\n  //       onChange([...uploadRef.current.values()])\n  //     } else {\n  //       model.batchInvoke('updateValue', pageId, '', [], [{}, [updateData]])\n  //     }\n  //     // model.setPostData(pageId, id, str) // 走postData\n  //   }\n  //   return true\n  // }, [datas, onChange])\n\n  // // 下载\n  // const onDownload = useCallback((info:any) => {\n  //   const config = model.getConfig(pageId)\n  //   const file = uploadRef.current.get(info.uid)\n  //   const options = {\n  //     params: '1',\n  //     appId: config.appId,\n  //     fId: config.formId,\n  //     fileName: file.name\n  //   }\n  //   const url = `${getFullUrl(baseUrl.current, file.url)}${shareParam ? '&' : '?'}kd_cs_ticket=${model.Global.token}`\n  //   downloadFile(url, options)\n  // }, [])\n\n  // // 监听系统U指令-回调\n  // const updateValue = (info:any) => {\n  //   // console.log('updateValue', info, datas)\n  //   uploadRef.current = new Map()\n  //   try {\n  //     setDatas(transformData(info.v))\n  //   } catch (error) { // info.v 的值可能为null也可能为 '******\n  //     setDatas([])\n  //   }\n  // }\n\n  // useEffect(() => {\n  //   // updatevalue之后会U指令更新uploadRef及datas，可能会更新不及时，所以侦听datas\n  //   const label = !displayCount || readonly || disabled ? '' : `(${uploadRef.current.size}/${uploadNum?.max || 1})`\n  //   setLabelText(label)\n  // }, [displayCount, readonly, disabled, uploadNum, datas])\n\n  // useEffect(() => {\n  //   updateValue({ k: id, v: cellValue })\n  // }, [cellValue])\n\n  // useEffect(() => {\n  //   // 监听系统U指令\n  //   const rmUpdateListener = model.addControlAction(UPDATE_CONTROL_STATES, pageId, id, updateValue)\n  //   return () => {\n  //     rmUpdateListener?.()\n  //   }\n  // }, [datas])\n\n  // // console.log('KDPicture', controlMeta)\n  // const num = uploadNum || {} // 最大/最小上传数量\n  // const typeArr = imageFileType.split(',').map((item:any) => ops[item])\n  // const notice = uploadPrompt ? `请上传小于${fileMaxSize}M的${typeArr.join('、')}文件，文件个数不少于${num?.min || 0}个，不多于${num?.max || 1}个。` : ''\n\n  var _usePictureHooks = (0,_control_hooks_usePictureHooks__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(props),\n    action = _usePictureHooks.action,\n    notice = _usePictureHooks.notice,\n    labelText = _usePictureHooks.labelText,\n    datas = _usePictureHooks.datas,\n    readonly = _usePictureHooks.readonly,\n    disabled = _usePictureHooks.disabled,\n    hidden = _usePictureHooks.hidden,\n    required = _usePictureHooks.required,\n    rules = _usePictureHooks.rules,\n    enablePreview = _usePictureHooks.enablePreview,\n    buttonText = _usePictureHooks.buttonText,\n    fieldTitleRef = _usePictureHooks.fieldTitleRef,\n    baseUrl = _usePictureHooks.baseUrl,\n    limit = _usePictureHooks.limit,\n    accept = _usePictureHooks.accept,\n    onRemove = _usePictureHooks.onRemove,\n    handleChange = _usePictureHooks.handleChange,\n    onDownload = _usePictureHooks.onDownload;\n  if (hidden) return null;\n  return /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_FieldItemWrapper__WEBPACK_IMPORTED_MODULE_1__[\"default\"], {\n    ref: fieldTitleRef,\n    subTitle: labelText,\n    controlMeta: props.controlMeta,\n    required: required\n  }, /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_base_web__WEBPACK_IMPORTED_MODULE_2__.Picture, {\n    multiple: true,\n    action: action,\n    baseUrl: baseUrl,\n    data: {\n      action: 'upload',\n      tempstorage: false\n    },\n    disabled: disabled,\n    readonly: readonly,\n    fileList: datas,\n    uploadNum: limit,\n    onChange: handleChange,\n    onRemove: onRemove,\n    onDownload: onDownload,\n    beforeUpload: beforeUpload,\n    accept: accept,\n    enablePreview: enablePreview,\n    buttonText: buttonText,\n    noticeInfo: notice\n  }));\n}\n/* harmony default export */ __webpack_exports__[\"default\"] = ((0,kd_libs_react__WEBPACK_IMPORTED_MODULE_0__.memo)(KDPicture));\n\n//# sourceURL=webpack://nocode-component/./src/control/web/Picture/index.tsx?");

/***/ }),

/***/ "./src/control/web/RefBill/RefBillReadonly.tsx":
/*!*****************************************************!*\
  !*** ./src/control/web/RefBill/RefBillReadonly.tsx ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/instance/map.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _base_hooks_useDebounce__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/base/hooks/useDebounce */ \"./src/base/hooks/useDebounce.ts\");\n/* harmony import */ var kd_libs_react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kd_libs/react */ \"webpack/container/remote/kd_libs/react\");\n/* harmony import */ var kd_libs_react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(kd_libs_react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _refBillConstants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./refBillConstants */ \"./src/control/web/RefBill/refBillConstants.ts\");\n/* harmony import */ var _RefBillReadonly_less__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./RefBillReadonly.less */ \"./src/control/web/RefBill/RefBillReadonly.less\");\n\n\n\n// import { BtnField as Button, Avatar } from '@/base/web'\n// import { Modal } from '@kdcloudjs/kdesign'\n// import { autoModalHeight } from '@/utils'\n\n// import { UserBody, CompanyBody } from './UserAndOrgModalBody'\n\nvar RefBillReadonly = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_2__.memo)(function (_ref) {\n  var meta = _ref.meta,\n    model = _ref.model,\n    multi = _ref.multi,\n    data = _ref.data,\n    silence = _ref.silence,\n    readonly = _ref.readonly;\n  var _ref2 = meta || {},\n    pageId = _ref2.pageId,\n    id = _ref2.id,\n    refbilltype = _ref2.refbilltype,\n    dataIndex = _ref2.dataIndex,\n    gridId = _ref2.gridId;\n\n  // 打开关联表单详情\n  var showForm = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(function (pkId) {\n    if (silence || !pkId) return;\n    var param = [pkId];\n    var realId = id;\n    if (gridId) {\n      param.push(dataIndex);\n      realId = gridId;\n    }\n    model.batchInvoke(_refBillConstants__WEBPACK_IMPORTED_MODULE_3__.SHOW_REF_BILL_INFO, pageId, realId, [param]);\n  }, [pageId, id, silence, gridId, dataIndex]);\n  var debunceText = (0,_base_hooks_useDebounce__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(showForm);\n\n  // 分享的时候不显示超链接\n  var showText = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(function (val) {\n    var text = (val === null || val === void 0 ? void 0 : val.label) || '-'; // 无标题显示为-\n    // text = readonly && !text ? '-' : text\n    // if (window.NOCODE_SHARE_ID) {\n    //   return text\n    // } else {\n    //   return <a onClick={() => showForm(val?.value)}>{text}</a>\n    // }\n    return window.NOCODE_SHARE_ID ? text : /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"a\", {\n      onClick: function onClick() {\n        return debunceText(val === null || val === void 0 ? void 0 : val.value);\n      }\n    }, text);\n  }, [readonly, debunceText]);\n  return /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\", {\n    className: _RefBillReadonly_less__WEBPACK_IMPORTED_MODULE_4__[\"default\"].text\n  }, multi && data.length > 1 ? data === null || data === void 0 ? void 0 : _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0___default()(data).call(data, function (val, index) {\n    return /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"span\", {\n      key: val.value\n    }, showText(val), index !== data.length - 1 ? ',' : '');\n  }) // 多记录时需要用,号分开\n  : !(data !== null && data !== void 0 && data.length) ? readonly === undefined ? '-' : '' // 没数据,表格内不显示，单头显示为-\n  : showText(data[0]));\n});\nRefBillReadonly.displayName = 'RefBillReadonly';\n/* harmony default export */ __webpack_exports__[\"default\"] = (RefBillReadonly);\n\n//# sourceURL=webpack://nocode-component/./src/control/web/RefBill/RefBillReadonly.tsx?");

/***/ }),

/***/ "./src/control/web/RefBill/UserAndOrgModalBody.tsx":
/*!*********************************************************!*\
  !*** ./src/control/web/RefBill/UserAndOrgModalBody.tsx ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CompanyBody: function() { return /* binding */ CompanyBody; },\n/* harmony export */   UserBody: function() { return /* binding */ UserBody; }\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/slicedToArray */ \"../../node_modules/@babel/runtime-corejs3/helpers/esm/slicedToArray.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/instance/map.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.array.join.js */ \"../../node_modules/core-js/modules/es.array.join.js\");\n/* harmony import */ var core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es.function.name.js */ \"../../node_modules/core-js/modules/es.function.name.js\");\n/* harmony import */ var core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var kd_libs_react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! kd_libs/react */ \"webpack/container/remote/kd_libs/react\");\n/* harmony import */ var kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(kd_libs_react__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _hooks_useResizeObserver__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/hooks/useResizeObserver */ \"./src/hooks/useResizeObserver.ts\");\n/* harmony import */ var _base_web__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/base/web */ \"./src/base/web/index.ts\");\n/* harmony import */ var _UserAndOrgModalBody_less__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./UserAndOrgModalBody.less */ \"./src/control/web/RefBill/UserAndOrgModalBody.less\");\n\n\n\n\n\n\n\n\n/**\n * 关联表单只读模式增加查看按钮\n * 三种类型：普通|人员|组织\n * 分别对应不同弹窗\n */\n\nvar UserBody = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_4__.memo)(function (_ref) {\n  var _data$orgs;\n  var data = _ref.data;\n  return /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"div\", {\n    className: _UserAndOrgModalBody_less__WEBPACK_IMPORTED_MODULE_7__[\"default\"].user_info\n  }, /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"div\", null, /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"div\", {\n    className: _UserAndOrgModalBody_less__WEBPACK_IMPORTED_MODULE_7__[\"default\"].item\n  }, /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"div\", {\n    className: _UserAndOrgModalBody_less__WEBPACK_IMPORTED_MODULE_7__[\"default\"].title\n  }, \"\\u5458\\u5DE5\\u7F16\\u53F7\"), /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"div\", null, (data === null || data === void 0 ? void 0 : data.number) || '-')), /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"div\", {\n    className: _UserAndOrgModalBody_less__WEBPACK_IMPORTED_MODULE_7__[\"default\"].item\n  }, /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"div\", {\n    className: _UserAndOrgModalBody_less__WEBPACK_IMPORTED_MODULE_7__[\"default\"].title\n  }, \"\\u59D3\\u540D\"), /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"div\", null, (data === null || data === void 0 ? void 0 : data.name) || '-'))), /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"div\", null, /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"div\", {\n    className: _UserAndOrgModalBody_less__WEBPACK_IMPORTED_MODULE_7__[\"default\"].item\n  }, /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"div\", {\n    className: _UserAndOrgModalBody_less__WEBPACK_IMPORTED_MODULE_7__[\"default\"].title\n  }, \"\\u5934\\u50CF\"), /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default().createElement(_base_web__WEBPACK_IMPORTED_MODULE_6__.Avatar, {\n    src: data === null || data === void 0 ? void 0 : data.avatar,\n    alt: \"\"\n  })), /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"div\", {\n    className: _UserAndOrgModalBody_less__WEBPACK_IMPORTED_MODULE_7__[\"default\"].item\n  }, /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"div\", {\n    className: _UserAndOrgModalBody_less__WEBPACK_IMPORTED_MODULE_7__[\"default\"].title\n  }, \"\\u6027\\u522B\"), /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"div\", null, (data === null || data === void 0 ? void 0 : data.gender) || '-'))), /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"div\", null, /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"div\", {\n    className: _UserAndOrgModalBody_less__WEBPACK_IMPORTED_MODULE_7__[\"default\"].item\n  }, /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"div\", {\n    className: _UserAndOrgModalBody_less__WEBPACK_IMPORTED_MODULE_7__[\"default\"].title\n  }, \"\\u751F\\u65E5\"), /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"div\", null, (data === null || data === void 0 ? void 0 : data.birthday) || '-')), /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"div\", {\n    className: _UserAndOrgModalBody_less__WEBPACK_IMPORTED_MODULE_7__[\"default\"].item\n  }, /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"div\", {\n    className: _UserAndOrgModalBody_less__WEBPACK_IMPORTED_MODULE_7__[\"default\"].title\n  }, \"\\u624B\\u673A\\u53F7\"), /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"div\", null, (data === null || data === void 0 ? void 0 : data.phone) || '-'))), /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"div\", null, /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"div\", {\n    className: _UserAndOrgModalBody_less__WEBPACK_IMPORTED_MODULE_7__[\"default\"].item\n  }, /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"div\", {\n    className: _UserAndOrgModalBody_less__WEBPACK_IMPORTED_MODULE_7__[\"default\"].title\n  }, \"\\u90AE\\u7BB1\"), /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"div\", null, (data === null || data === void 0 ? void 0 : data.email) || '-'))), (data === null || data === void 0 ? void 0 : data.orgs) && (data === null || data === void 0 ? void 0 : data.orgs.length) > 0 && /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"div\", {\n    className: _UserAndOrgModalBody_less__WEBPACK_IMPORTED_MODULE_7__[\"default\"].table\n  }, /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"table\", {\n    cellSpacing: 1,\n    cellPadding: 1\n  }, /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"tr\", null, /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"th\", null, \"\\u6240\\u5C5E\\u7EC4\\u7EC7\\u7F16\\u7801\"), /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"th\", null, \"\\u7EC4\\u7EC7\\u540D\\u79F0\")), data === null || data === void 0 || (_data$orgs = data.orgs) === null || _data$orgs === void 0 ? void 0 : _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_1___default()(_data$orgs).call(_data$orgs, function (item, index) {\n    return /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"tr\", {\n      key: item.orgNum + index\n    }, /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"td\", null, item.orgNum), /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"td\", null, item.orgName));\n  }))));\n});\nvar CompanyBody = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_4__.memo)(function (_ref2) {\n  var org = _ref2.org,\n    columns = _ref2.columns;\n  var _ref3 = org || {},\n    id = _ref3.id,\n    name = _ref3.name,\n    number = _ref3.number,\n    parentid = _ref3.parentid,\n    parentname = _ref3.parentname,\n    users = _ref3.users;\n  var _useState = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_4__.useState)(200),\n    _useState2 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useState, 2),\n    empityTableHeight = _useState2[0],\n    setEmpityTableHeight = _useState2[1]; // 所有数据\n  var tableRef = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_4__.useRef)(null); // 表格容器，用于获取表格高度\n  var managers = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_4__.useMemo)(function () {\n    var _users$extra;\n    return (users === null || users === void 0 || (_users$extra = users.extra) === null || _users$extra === void 0 || (_users$extra = _users$extra.managers) === null || _users$extra === void 0 ? void 0 : _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_1___default()(_users$extra).call(_users$extra, function (usr) {\n      return usr.name;\n    }).join('、')) || '-';\n  }, [users]);\n  var staffs = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_4__.useMemo)(function () {\n    return (users === null || users === void 0 ? void 0 : users.rows) || [];\n  }, [users]);\n\n  // 动态设置空值时的TD高度\n  (0,_hooks_useResizeObserver__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(tableRef.current, function (res) {\n    // console.log('table resize', res[0].contentRect.height)\n    setEmpityTableHeight(res[0].contentRect.height - 50);\n  });\n  return /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"div\", {\n    className: _UserAndOrgModalBody_less__WEBPACK_IMPORTED_MODULE_7__[\"default\"].org_info\n  }, /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"div\", {\n    className: _UserAndOrgModalBody_less__WEBPACK_IMPORTED_MODULE_7__[\"default\"].organization\n  }, /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"div\", {\n    className: _UserAndOrgModalBody_less__WEBPACK_IMPORTED_MODULE_7__[\"default\"].item\n  }, /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"div\", {\n    className: _UserAndOrgModalBody_less__WEBPACK_IMPORTED_MODULE_7__[\"default\"].title\n  }, \"\\u7EC4\\u7EC7\\u7F16\\u53F7\"), /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"div\", null, number || '-')), /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"div\", {\n    className: _UserAndOrgModalBody_less__WEBPACK_IMPORTED_MODULE_7__[\"default\"].item\n  }, /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"div\", {\n    className: _UserAndOrgModalBody_less__WEBPACK_IMPORTED_MODULE_7__[\"default\"].title\n  }, \"\\u7EC4\\u7EC7\\u540D\\u79F0\"), /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"div\", null, name || '-')), /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"div\", {\n    className: _UserAndOrgModalBody_less__WEBPACK_IMPORTED_MODULE_7__[\"default\"].item\n  }, /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"div\", {\n    className: _UserAndOrgModalBody_less__WEBPACK_IMPORTED_MODULE_7__[\"default\"].title\n  }, \"\\u4E0A\\u7EA7\\u7EC4\\u7EC7\"), /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"div\", null, parentname || '-')), /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"div\", {\n    className: _UserAndOrgModalBody_less__WEBPACK_IMPORTED_MODULE_7__[\"default\"].item\n  }, /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"div\", {\n    className: _UserAndOrgModalBody_less__WEBPACK_IMPORTED_MODULE_7__[\"default\"].title\n  }, \"\\u7EC4\\u7EC7\\u8D1F\\u8D23\\u4EBA\"), /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"div\", {\n    className: _UserAndOrgModalBody_less__WEBPACK_IMPORTED_MODULE_7__[\"default\"].managers\n  }, managers || '-'))), /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"div\", {\n    ref: tableRef,\n    className: _UserAndOrgModalBody_less__WEBPACK_IMPORTED_MODULE_7__[\"default\"].list\n  }, /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default().createElement(_base_web__WEBPACK_IMPORTED_MODULE_6__.DataGrid, {\n    emptyCellHeight: empityTableHeight,\n    style: {\n      overflow: 'auto',\n      flex: 'auto'\n    },\n    primaryKey: \"id\",\n    useVirtual: true,\n    columns: columns,\n    dataSource: staffs\n  })));\n});\n\n\n//# sourceURL=webpack://nocode-component/./src/control/web/RefBill/UserAndOrgModalBody.tsx?");

/***/ }),

/***/ "./src/control/web/RefBill/index.tsx":
/*!*******************************************!*\
  !*** ./src/control/web/RefBill/index.tsx ***!
  \*******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/keys */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/object/keys.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-properties */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/object/define-properties.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-property */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/object/define-property.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _babel_runtime_corejs3_helpers_toArray__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/toArray */ \"../../node_modules/@babel/runtime-corejs3/helpers/esm/toArray.js\");\n/* harmony import */ var _babel_runtime_corejs3_helpers_extends__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/extends */ \"../../node_modules/@babel/runtime-corejs3/helpers/esm/extends.js\");\n/* harmony import */ var _babel_runtime_corejs3_helpers_typeof__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/typeof */ \"../../node_modules/@babel/runtime-corejs3/helpers/esm/typeof.js\");\n/* harmony import */ var _babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/toConsumableArray */ \"../../node_modules/@babel/runtime-corejs3/helpers/esm/toConsumableArray.js\");\n/* harmony import */ var _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/defineProperty */ \"../../node_modules/@babel/runtime-corejs3/helpers/esm/defineProperty.js\");\n/* harmony import */ var _babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/slicedToArray */ \"../../node_modules/@babel/runtime-corejs3/helpers/esm/slicedToArray.js\");\n/* harmony import */ var core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! core-js/modules/es.array.join.js */ \"../../node_modules/core-js/modules/es.array.join.js\");\n/* harmony import */ var core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! core-js/modules/es.function.name.js */ \"../../node_modules/core-js/modules/es.function.name.js\");\n/* harmony import */ var core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! core-js/modules/es.object.keys.js */ \"../../node_modules/core-js/modules/es.object.keys.js\");\n/* harmony import */ var core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! core-js/modules/es.regexp.exec.js */ \"../../node_modules/core-js/modules/es.regexp.exec.js\");\n/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_16__);\n/* harmony import */ var core_js_modules_es_string_search_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! core-js/modules/es.string.search.js */ \"../../node_modules/core-js/modules/es.string.search.js\");\n/* harmony import */ var core_js_modules_es_string_search_js__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_search_js__WEBPACK_IMPORTED_MODULE_17__);\n/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ \"../../node_modules/core-js/modules/web.dom-collections.for-each.js\");\n/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_18__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/includes */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/instance/includes.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_20___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_20__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/filter */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/instance/filter.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_19__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/slice */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/instance/slice.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_21___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_21__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_sort__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/sort */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/instance/sort.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_sort__WEBPACK_IMPORTED_MODULE_22___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_sort__WEBPACK_IMPORTED_MODULE_22__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/instance/map.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_23___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_23__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/concat */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/instance/concat.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_24___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_24__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_set__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/set */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/set.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_set__WEBPACK_IMPORTED_MODULE_25___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_set__WEBPACK_IMPORTED_MODULE_25__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_values__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/values */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/object/values.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_values__WEBPACK_IMPORTED_MODULE_26___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_values__WEBPACK_IMPORTED_MODULE_26__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_splice__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/splice */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/instance/splice.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_splice__WEBPACK_IMPORTED_MODULE_27___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_splice__WEBPACK_IMPORTED_MODULE_27__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/json/stringify */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/json/stringify.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_28___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_28__);\n/* harmony import */ var kd_libs_react__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! kd_libs/react */ \"webpack/container/remote/kd_libs/react\");\n/* harmony import */ var kd_libs_react__WEBPACK_IMPORTED_MODULE_29___default = /*#__PURE__*/__webpack_require__.n(kd_libs_react__WEBPACK_IMPORTED_MODULE_29__);\n/* harmony import */ var _utils_context__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! @/utils/context */ \"./src/utils/context.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! @/utils */ \"./src/utils/index.ts\");\n/* harmony import */ var _FieldItemWrapper__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ../FieldItemWrapper */ \"./src/control/web/FieldItemWrapper/index.tsx\");\n/* harmony import */ var _base_web__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! @/base/web */ \"./src/base/web/index.ts\");\n/* harmony import */ var _base_common_Nodata__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! @/base/common/Nodata */ \"./src/base/common/Nodata/index.tsx\");\n/* harmony import */ var _constants_sysActionName__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! @/constants/sysActionName */ \"./src/constants/sysActionName.js\");\n/* harmony import */ var _refBillConstants__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ./refBillConstants */ \"./src/control/web/RefBill/refBillConstants.ts\");\n/* harmony import */ var _refBillReducer__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ./refBillReducer */ \"./src/control/web/RefBill/refBillReducer.ts\");\n/* harmony import */ var _assets_svg_empty_data_svg__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! @@/assets/svg/empty_data.svg */ \"./assets/svg/empty_data.svg\");\n/* harmony import */ var kd_libs_kdesign1__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! kd_libs/kdesign1 */ \"webpack/container/remote/kd_libs/kdesign1\");\n/* harmony import */ var kd_libs_kdesign1__WEBPACK_IMPORTED_MODULE_39___default = /*#__PURE__*/__webpack_require__.n(kd_libs_kdesign1__WEBPACK_IMPORTED_MODULE_39__);\n/* harmony import */ var _control_hooks__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! @/control/hooks */ \"./src/control/hooks/index.ts\");\n/* harmony import */ var _control_hooks_useRefBillProps__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! @/control/hooks/useRefBillProps */ \"./src/control/hooks/useRefBillProps.ts\");\n/* harmony import */ var _RefBillReadonly__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! ./RefBillReadonly */ \"./src/control/web/RefBill/RefBillReadonly.tsx\");\n/* harmony import */ var _utils_showUserOrOrgInfo__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! @/utils/showUserOrOrgInfo */ \"./src/utils/showUserOrOrgInfo.tsx\");\n/* harmony import */ var kd_libs_react_dom__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! kd_libs/react-dom */ \"webpack/container/remote/kd_libs/react-dom\");\n/* harmony import */ var kd_libs_react_dom__WEBPACK_IMPORTED_MODULE_44___default = /*#__PURE__*/__webpack_require__.n(kd_libs_react_dom__WEBPACK_IMPORTED_MODULE_44__);\n/* harmony import */ var _constants_dataGridConstants__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! @/constants/dataGridConstants */ \"./src/constants/dataGridConstants.ts\");\n/* harmony import */ var _base_hooks_useTableSelect__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! @/base/hooks/useTableSelect */ \"./src/base/hooks/useTableSelect.ts\");\n/* harmony import */ var _utils_refBillUtils__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(/*! @/utils/refBillUtils */ \"./src/utils/refBillUtils.ts\");\n/* harmony import */ var _utils_webTools__WEBPACK_IMPORTED_MODULE_48__ = __webpack_require__(/*! @/utils/webTools */ \"./src/utils/webTools.ts\");\n/* harmony import */ var _utils_tableSelectUtils__WEBPACK_IMPORTED_MODULE_49__ = __webpack_require__(/*! @/utils/tableSelectUtils */ \"./src/utils/tableSelectUtils.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction ownKeys(e, r) { var t = _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0___default()(e); if ((_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1___default())) { var o = _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1___default()(e); r && (o = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_19___default()(o).call(o, function (r) { return _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2___default()(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { (0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_10__[\"default\"])(e, r, t[r]); }) : (_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_3___default()) ? _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_4___default()(e, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_3___default()(t)) : ownKeys(Object(t)).forEach(function (r) { _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_5___default()(e, r, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2___default()(t, r)); }); } return e; }\n\n\n\n\n\n\n\n\n\n\n\n\n\n// import { ReadonlyText } from '@/control/common'\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// 超过20条，点击Select直接打开F7\nvar MaxSelected = 20;\n\n/**\n * 关联单据-KD层\n * @param props\n * @returns\n */\nvar KDRefBill = function KDRefBill(props) {\n  var meta = props.controlMeta,\n    invokeData = props.invokeData,\n    handleChange = props.onChange,\n    value = props.value;\n  var _useContext = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_29__.useContext)(_utils_context__WEBPACK_IMPORTED_MODULE_30__.KDContext),\n    model = _useContext.model;\n  var _useReducer = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_29__.useReducer)(_refBillReducer__WEBPACK_IMPORTED_MODULE_37__.reducer, _refBillReducer__WEBPACK_IMPORTED_MODULE_37__.initState),\n    _useReducer2 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_11__[\"default\"])(_useReducer, 2),\n    state = _useReducer2[0],\n    dispatch = _useReducer2[1];\n  var _useState = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_29__.useState)(0),\n    _useState2 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_11__[\"default\"])(_useState, 2),\n    selectStatus = _useState2[0],\n    setSelectStatus = _useState2[1];\n  var _useState3 = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_29__.useState)([]),\n    _useState4 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_11__[\"default\"])(_useState3, 2),\n    sorts = _useState4[0],\n    setSorts = _useState4[1];\n  var _useState5 = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_29__.useState)(''),\n    _useState6 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_11__[\"default\"])(_useState5, 2),\n    searchKeywords = _useState6[0],\n    setSearchKeywords = _useState6[1];\n\n  // const selectText = useRef(['', 'loading', '暂无数据']) // 没内容时显示的文本\n  var pageId = meta.pageId,\n    id = meta.id,\n    _meta$dataRange = meta.dataRange,\n    dataRange = _meta$dataRange === void 0 ? {} : _meta$dataRange,\n    propsDisplay = meta.propsDisplay,\n    dispSelected = meta.dispSelected,\n    refbilltype = meta.refbilltype,\n    caption = meta.caption;\n  var _useFieldProps = (0,_control_hooks__WEBPACK_IMPORTED_MODULE_40__.useFieldProps)(meta),\n    readonly = _useFieldProps.readonly,\n    placeholder = _useFieldProps.placeholder,\n    disabled = _useFieldProps.disabled,\n    hidden = _useFieldProps.hidden,\n    required = _useFieldProps.required,\n    rules = _useFieldProps.rules;\n  var max = dataRange.max,\n    min = dataRange.min;\n  var selectDisplay = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_29__.useRef)((propsDisplay === null || propsDisplay === void 0 ? void 0 : propsDisplay.split(',')) || []);\n  var dropDownVisible = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_29__.useRef)(false);\n  var baseUrl = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_29__.useRef)(model.getFileServer());\n  var store = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_29__.useRef)(state);\n  // const refBillText = useRef<any>(null)\n  var isF7Show = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_29__.useRef)(false); // 标记当前是否打开modal弹窗\n  var fieldItemRef = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_29__.useRef)();\n\n  // 缓存F7请求参数\n  var f7Params = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_29__.useRef)({\n    key: '',\n    filter: '',\n    pageNum: 1,\n    pageSize: 10,\n    sort: ''\n  });\n  var f7ContentRef = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_29__.useRef)();\n  var isMulti = meta.multi === 1; // 是否多选\n\n  var CellRender = _base_web__WEBPACK_IMPORTED_MODULE_33__.DataGrid.CellRender;\n  var showAddRecord = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_29__.useMemo)(function () {\n    var _context;\n    return !_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_20___default()(_context = ['bos_user', 'bos_adminorg']).call(_context, refbilltype);\n  }, [refbilltype]);\n\n  /**\n   * 同步更新到服务器\n   */\n  var updateServerValue = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_29__.useCallback)(function (v) {\n    // const val = isMulti ? v.join() : v\n    if (handleChange) return handleChange(v);\n    var data = {\n      k: id,\n      r: 0,\n      v: v\n    };\n    model.batchInvoke('updateValue', pageId, '', [], [{}, [data]]);\n    // 与后端确认去掉，该指令与updateValue重复\n    // model.batchInvoke(SET_ITEM_BY_ID_FROM_CLIENT, pageId, id, [[v, 0]])\n  }, [handleChange]);\n\n  // 打开下拉弹窗时，过滤掉未选中的选项\n  var updateOptionList = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_29__.useCallback)(function (data) {\n    var _context2;\n    var newOptions = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_19___default()(_context2 = state.options).call(_context2, function (op) {\n      return _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_20___default()(data).call(data, op.value);\n    });\n    dispatch({\n      type: _refBillConstants__WEBPACK_IMPORTED_MODULE_36__.SET_OPTIONS,\n      payload: newOptions\n    });\n  }, [state.options, state.selectedKeys]);\n\n  /**\n   * 数据变更\n   */\n  var onChange = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_29__.useCallback)(function (v, option) {\n    // console.log('onChange', v, option, state.options)\n    var data = v ? isMulti ? v : [v] : [];\n    // const label:any[] = []\n    // state.options.forEach((item:any) => {\n    //   data.includes(item.value) && label.push(item.label)\n    // })\n    dispatch({\n      type: _refBillConstants__WEBPACK_IMPORTED_MODULE_36__.SET_VALUE,\n      payload: {\n        value: v || (isMulti ? [] : ''),\n        selectedKeys: data\n      }\n    });\n    if (!isMulti || isMulti && !dropDownVisible.current) {\n      updateServerValue(data); // 单选或多选点X时\n    }\n  }, [isMulti, updateServerValue]);\n\n  /**\n   * 模糊搜索\n   */\n  var onSearchAction = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_29__.useCallback)((0,_utils__WEBPACK_IMPORTED_MODULE_31__.debounce)(function () {\n    var _value;\n    var key = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    var value = arguments.length > 1 ? arguments[1] : undefined;\n    // console.log('onSearchAction', key)\n    // const val = isMulti ? value : [value]\n    // model.batchInvoke(GET_LOOK_UP_LIST, pageId, id, [['%', key, '%', val, 1, 0]])\n    setSearchKeywords(key);\n    value = value || (state === null || state === void 0 ? void 0 : state.value);\n    model.batchInvoke(_constants_sysActionName__WEBPACK_IMPORTED_MODULE_35__.GET_LOOK_UP_LIST, pageId, id, [['%', key, '%', (_value = value) === null || _value === void 0 ? void 0 : _babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_21___default()(_value).call(_value, 0, MaxSelected), 1, 0]]);\n  }), [state.value, setSearchKeywords]);\n\n  /**\n   * F7搜索\n   */\n  var onF7Search = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_29__.useCallback)((0,_utils__WEBPACK_IMPORTED_MODULE_31__.debounce)(function (params) {\n    f7Params.current = _objectSpread(_objectSpread({}, f7Params.current), params);\n    var _f7Params$current = f7Params.current,\n      key = _f7Params$current.key,\n      filter = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_19___default()(_f7Params$current),\n      pageNum = _f7Params$current.pageNum,\n      pageSize = _f7Params$current.pageSize,\n      sort = _babel_runtime_corejs3_core_js_stable_instance_sort__WEBPACK_IMPORTED_MODULE_22___default()(_f7Params$current);\n    model.batchInvoke(_constants_sysActionName__WEBPACK_IMPORTED_MODULE_35__.GET_LIST_QUERY, pageId, id, [[pageSize, pageNum, key, filter, sort]], [], params === null || params === void 0 ? void 0 : params.callback);\n  }), [pageId, id]);\n\n  /**\n   * 点击更多图标\n   */\n  var onMoreClick = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_29__.useCallback)(function () {\n    if (readonly || disabled) return;\n    isF7Show.current = true;\n    onF7Search({});\n    model.batchInvoke(_constants_sysActionName__WEBPACK_IMPORTED_MODULE_35__.GET_LIST_CONFIG, pageId, id, [[]]);\n  }, [readonly, disabled, onF7Search]);\n  /**\n   * F7清空\n   */\n  var onF7Clean = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_29__.useCallback)(function () {\n    // console.log('onF7Clean')\n    dispatch({\n      type: _refBillConstants__WEBPACK_IMPORTED_MODULE_36__.CLEAN_SELECTED\n    });\n  }, [dispatch]);\n\n  /**\n   * 下拉显示隐藏-回调\n   */\n  var onVisibleChange = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_29__.useCallback)(function (visible) {\n    dropDownVisible.current = visible;\n    if (visible) {\n      updateOptionList(state.value);\n      setSelectStatus(1);\n      onSearchAction();\n    }\n    if (isMulti && !visible) {\n      // 多选时隐藏弹窗时更新值\n      updateServerValue(state.value);\n    }\n  }, [state.value, updateOptionList, onSearchAction, updateServerValue, isMulti]);\n\n  /**\n   * 添加数据后，指令刷新F7弹窗数据\n   */\n  var refreshRefList = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_29__.useCallback)(function (info) {\n    var _context3;\n    // console.log('refreshRefList', info)\n    var id = info.pkId;\n    var rowSelected = _objectSpread({}, state.rowSelected);\n    var displayProps = propsDisplay.split(','); // 可显示字段\n    var val = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_23___default()(displayProps).call(displayProps, function (key) {\n      return info[key];\n    });\n    var data = (0,_utils_refBillUtils__WEBPACK_IMPORTED_MODULE_47__.formateData)(_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_24___default()(_context3 = [id]).call(_context3, (0,_babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(val)));\n    var keys = new (_babel_runtime_corejs3_core_js_stable_set__WEBPACK_IMPORTED_MODULE_25___default())(state.selectedKeys);\n    var selectedKeys = isMulti ? (0,_babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(keys.add(id)) : [id];\n    var value = isMulti ? (0,_babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(keys.add(id)) : id;\n    rowSelected[id] = data;\n    if (isF7Show.current) {\n      onF7Search({\n        callback: function callback(res) {\n          if (res !== null && res !== void 0 && res.data) {\n            var _res$data, _f7ContentRef$current, _f7ContentRef$current2, _res$data$;\n            var newTableData = (_res$data = res.data) === null || _res$data === void 0 || (_res$data = _res$data[0]) === null || _res$data === void 0 || (_res$data = _res$data.p) === null || _res$data === void 0 || (_res$data = _res$data[0]) === null || _res$data === void 0 || (_res$data = _res$data.args) === null || _res$data === void 0 || (_res$data = _res$data[0]) === null || _res$data === void 0 || (_res$data = _res$data.data) === null || _res$data === void 0 ? void 0 : _res$data.rows;\n            if (!newTableData) return;\n            var newSelectInfo = (0,_utils_tableSelectUtils__WEBPACK_IMPORTED_MODULE_49__.handleAddRecord)({\n              newData: newTableData,\n              key: id,\n              curSelectInfo: state.selectInfo\n            });\n            f7ContentRef === null || f7ContentRef === void 0 || (_f7ContentRef$current = f7ContentRef.current) === null || _f7ContentRef$current === void 0 || (_f7ContentRef$current2 = _f7ContentRef$current.setSelectedInfo) === null || _f7ContentRef$current2 === void 0 || _f7ContentRef$current2.call(_f7ContentRef$current, newSelectInfo);\n            onF7RowSelectChange(selectedKeys, id, [id], _base_hooks_useTableSelect__WEBPACK_IMPORTED_MODULE_46__.SELECT_ACTIONS.check, newSelectInfo, {\n              newRows: newTableData\n            });\n            console.log('更新后数据', res === null || res === void 0 || (_res$data$ = res.data[0]) === null || _res$data$ === void 0 || (_res$data$ = _res$data$.p[0]) === null || _res$data$ === void 0 || (_res$data$ = _res$data$.args[0]) === null || _res$data$ === void 0 || (_res$data$ = _res$data$.data) === null || _res$data$ === void 0 ? void 0 : _res$data$.rows);\n          }\n        }\n      });\n      // dispatch({ type: SET_TABLE_SELECTED_KEYS, payload: { selectedKeys, rowSelected } })\n      // setTimeout(() => {\n      //   f7ContentRef.current?.onSelectChange?.({ key: id, action: SELECT_ACTIONS.check })\n      // })\n    } else {\n      onChange(value, null);\n    }\n  }, [isMulti, propsDisplay, state.selectedKeys, onF7Search, state.rowSelected, onChange, onF7RowSelectChange, state.selectInfo]);\n  /**\n   * F7过滤条件变更\n   */\n  var onF7FilterChange = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_29__.useCallback)(function (info) {\n    var _state$selectInfo;\n    // 常规勾选场景保留勾选，全选和反选时清空\n    var newInfo = {};\n    if (((_state$selectInfo = state.selectInfo) === null || _state$selectInfo === void 0 ? void 0 : _state$selectInfo.selectStatus) !== _constants_dataGridConstants__WEBPACK_IMPORTED_MODULE_45__.CHECK) {\n      newInfo = {\n        selectInfo: (0,_utils_tableSelectUtils__WEBPACK_IMPORTED_MODULE_49__.getInitSelectInfo)(),\n        rowSelected: [],\n        selectedKeys: []\n      };\n    }\n    dispatch({\n      type: _refBillConstants__WEBPACK_IMPORTED_MODULE_36__.SET_TABLE_FILTER,\n      payload: _objectSpread({\n        tableFilterData: info\n      }, newInfo)\n    }); // 统一缓存查询条件\n    onF7Search({\n      filter: (0,_utils_refBillUtils__WEBPACK_IMPORTED_MODULE_47__.getFilterRows)(info),\n      pageNum: 1\n    }); // 过滤后回到第一页\n  }, [onF7Search, dispatch, state.selectInfo]);\n\n  /**\n   * F7点关闭弹窗\n   * 还原默认请求参数设置\n   */\n  var onF7Cancel = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_29__.useCallback)(function () {\n    console.log('onF7Cancel');\n    isF7Show.current = false;\n    f7Params.current = {\n      key: '',\n      filter: '',\n      pageNum: 1,\n      pageSize: 10,\n      sort: ''\n    };\n    // 关闭弹窗之后，清空表格列表|筛选|排序数据\n    dispatch({\n      type: _refBillConstants__WEBPACK_IMPORTED_MODULE_36__.CLOSE_F7_MODAL,\n      payload: null\n    });\n  }, []);\n  var selectTips = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_29__.useMemo)(function () {\n    var _context4, _context5;\n    return _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_24___default()(_context4 = _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_24___default()(_context5 = \"\\\"\".concat(model.getControlText(caption), \"\\\"\\u9009\\u62E9\\u6570\\u91CF\\u4E0D\\u80FD\\u5C0F\\u4E8E\")).call(_context5, min, \"\\uFF0C\\u4E0D\\u80FD\\u5927\\u4E8E\")).call(_context4, max);\n  }, [max, min, caption]);\n\n  /**\n   * F7确认\n   */\n  var onF7Ok = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_29__.useCallback)(function (args) {\n    var _context6;\n    var _ref = args || {},\n      _ref$search = _ref.search,\n      search = _ref$search === void 0 ? '' : _ref$search;\n    var data = Array.isArray(state.selectedKeys) ? _babel_runtime_corejs3_core_js_stable_instance_sort__WEBPACK_IMPORTED_MODULE_22___default()(_context6 = (0,_babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(state.selectedKeys)).call(_context6) : state.selectedKeys;\n    if (isMulti) {\n      var _ref2 = state.selectInfo || {},\n        _ref2$selectedCount = _ref2.selectedCount,\n        selectedCount = _ref2$selectedCount === void 0 ? 0 : _ref2$selectedCount;\n      if (selectedCount > max || selectedCount < min) {\n        (0,_utils_webTools__WEBPACK_IMPORTED_MODULE_48__.showNotice)(selectTips);\n        return false;\n      }\n    }\n    isF7Show.current = false;\n    dispatch({\n      type: _refBillConstants__WEBPACK_IMPORTED_MODULE_36__.SET_VALUE,\n      payload: {\n        value: isMulti ? data : data.join(),\n        selectedKeys: data\n      }\n    });\n    // 选中后只保存当前已选选项\n    dispatch({\n      type: _refBillConstants__WEBPACK_IMPORTED_MODULE_36__.SET_OPTIONS,\n      payload: _babel_runtime_corejs3_core_js_stable_object_values__WEBPACK_IMPORTED_MODULE_26___default()(state.rowSelected)\n    });\n    updateServerValue(isMulti ? (0,_utils_refBillUtils__WEBPACK_IMPORTED_MODULE_47__.getPostValue)({\n      selectInfo: state.selectInfo,\n      search: search,\n      filterData: state.tableFilterData || []\n    }) : data.join());\n    // 内部更新了选项内容，需要更新列表\n    onSearchAction('', isMulti ? data : data.join());\n    onF7Cancel();\n    return true;\n  }, [state, updateServerValue, dispatch, onF7Cancel, min, max, isMulti, searchKeywords]);\n\n  // 数据排序\n  var onF7Sort = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_29__.useCallback)(function (number, key) {\n    console.log('onF7Sort', number, key);\n    // const sort = { ...store.current.colSort }\n    var sort = {};\n    if (key === 0) {\n      // 不排序时去除参数\n      delete sort[number];\n    } else {\n      var _context7;\n      // 添加参数，拼接字符串\n      var orderBy = key === -1 ? 'desc' : '';\n      sort[number] = _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_24___default()(_context7 = \"\".concat(number)).call(_context7, orderBy ? ' ' + orderBy : '');\n    }\n    onF7Search({\n      sort: sort[number] || ''\n    });\n    setSorts([{\n      number: number,\n      isAsc: key === 1\n    }]);\n    dispatch({\n      type: _refBillConstants__WEBPACK_IMPORTED_MODULE_36__.SET_TABLE_COL_SORT,\n      payload: sort\n    });\n  }, [onF7Search, setSorts, dispatch]);\n\n  // 关键字搜索\n  var onF7SearchAction = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_29__.useCallback)(function (key) {\n    var _state$selectInfo2;\n    console.log('onF7SearchAction', key);\n    onF7Search({\n      key: key || '',\n      pageNum: 1\n    });\n    // 常规勾选场景保留勾选，全选和反选时清空\n    if (((_state$selectInfo2 = state.selectInfo) === null || _state$selectInfo2 === void 0 ? void 0 : _state$selectInfo2.selectStatus) !== _constants_dataGridConstants__WEBPACK_IMPORTED_MODULE_45__.CHECK) {\n      dispatch({\n        type: _refBillConstants__WEBPACK_IMPORTED_MODULE_36__.SET_TABLE_ROW_SELECTED,\n        payload: {\n          rowSelected: [],\n          selectedKeys: [],\n          selectInfo: (0,_utils_tableSelectUtils__WEBPACK_IMPORTED_MODULE_49__.getInitSelectInfo)()\n        }\n      });\n    }\n  }, [onF7Search, state.selectInfo]);\n  /**\n   * F7页码变更\n   */\n  var onF7PageChange = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_29__.useCallback)(function (pageNum, pageSize) {\n    onF7Search({\n      pageNum: pageNum,\n      pageSize: pageSize\n    });\n  }, [onF7Search]);\n\n  /**\n   * F7单个删除已选\n   * newSelectInfo--更新后的选择信息\n   */\n  var onF7DelSelect = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_29__.useCallback)(function (info, newSelectInfo) {\n    // console.log('onF7DelSelect', info)\n    var rowSelected = _objectSpread({}, state.rowSelected);\n    var selectedKeys = new (_babel_runtime_corejs3_core_js_stable_set__WEBPACK_IMPORTED_MODULE_25___default())(state.selectedKeys);\n    // const selectedKeys = state.selectedKeys.filter((item:any) => item !== info.value)\n    info.forEach(function (item) {\n      delete rowSelected[item];\n      if (!newSelectInfo) {\n        selectedKeys.delete(item);\n      }\n    });\n    var newSelectedKeys = newSelectInfo === null || newSelectInfo === void 0 ? void 0 : newSelectInfo.selectedIds;\n    // const index = state.tableData.rows.findIndex((item:any) => item.id === info.value)\n    // const selectedKeys:any = index > -1 ? (state.selectedKeys.filter((item:string) => Number(item) !== index)) : state.selectedKeys\n    dispatch({\n      type: _refBillConstants__WEBPACK_IMPORTED_MODULE_36__.SET_TABLE_ROW_SELECTED,\n      payload: {\n        rowSelected: rowSelected,\n        selectedKeys: newSelectedKeys ? (0,_babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(newSelectedKeys) : (0,_babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(selectedKeys),\n        selectInfo: newSelectInfo || state.selectInfo\n      }\n    });\n  }, [state.rowSelected, state.selectedKeys, dispatch]);\n\n  // 拼接已选信息\n  var handleRowData = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_29__.useCallback)(function (rowData) {\n    var obj = {};\n    rowData.forEach(function (data) {\n      var id = data.id,\n        _title_ = data._title_;\n      if (_title_) {\n        // 兼容数据\n        // const index = _title_.indexOf('|')\n        // const label = _title_.substring(0, index)\n        // const des = _title_.substr(index + 1).replaceAll('|', '｜')\n        var arr = _title_.split('|');\n        var label = arr[0];\n        var des = _babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_21___default()(arr).call(arr, 1).join('｜');\n        obj[data.id] = {\n          value: id,\n          label: label,\n          des: des\n        };\n      } else {\n        var _arr = [data.id];\n        selectDisplay.current.forEach(function (item) {\n          _arr.push(data[item]);\n        });\n        obj[data.id] = (0,_utils_refBillUtils__WEBPACK_IMPORTED_MODULE_47__.formateData)(_arr);\n      }\n    });\n    return obj;\n  }, []);\n\n  /**\n   * F7选择变化时\n   */\n  var onF7RowSelectChange = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_29__.useCallback)(function (selectedRowKeys, actionRowkey, actionRowskeys, action, selectInfo) {\n    var delayHelpInfo = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {};\n    var newRows = delayHelpInfo.newRows;\n    if (!isMulti) {\n      dispatch({\n        type: _refBillConstants__WEBPACK_IMPORTED_MODULE_36__.UPDATE_TABLE_SELECTED_AND_KEYS,\n        payload: {\n          selectedKeys: selectedRowKeys\n        }\n      });\n      return;\n    }\n    var notInSelectedIds = selectInfo.notInSelectedIds,\n      selectStatus = selectInfo.selectStatus,\n      selectedCount = selectInfo.selectedCount;\n    var tableData = state.tableData;\n    var rows = newRows || (tableData === null || tableData === void 0 ? void 0 : tableData.rows);\n    // 如为全选或置空，直接处理rowSelected\n    if (selectStatus === _constants_dataGridConstants__WEBPACK_IMPORTED_MODULE_45__.CHECK_ALL || selectStatus === _constants_dataGridConstants__WEBPACK_IMPORTED_MODULE_45__.CHECK && !selectedCount) {\n      var newSelectedKeys = selectStatus === _constants_dataGridConstants__WEBPACK_IMPORTED_MODULE_45__.CHECK_ALL ? selectedRowKeys : [];\n      dispatch({\n        type: _refBillConstants__WEBPACK_IMPORTED_MODULE_36__.SET_TABLE_ROW_SELECTED,\n        payload: {\n          rowSelected: [],\n          selectedKeys: newSelectedKeys,\n          selectInfo: selectInfo\n        }\n      });\n      return;\n    }\n    // 否则需结合selectInfo的notInSelectedIds处理rowSelected\n    switch (action) {\n      case _base_hooks_useTableSelect__WEBPACK_IMPORTED_MODULE_46__.SELECT_ACTIONS.uncheck:\n        // 此处逻辑与check相似，反选到的数据需累加\n        if (selectStatus === _constants_dataGridConstants__WEBPACK_IMPORTED_MODULE_45__.CHECK_CANCEL) {\n          rowData = rows === null || rows === void 0 ? void 0 : _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_19___default()(rows).call(rows, function (item) {\n            return _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_20___default()(notInSelectedIds).call(notInSelectedIds, item.id);\n          });\n          var _newRowSelected = handleRowData(rowData);\n          dispatch({\n            type: _refBillConstants__WEBPACK_IMPORTED_MODULE_36__.UPDATE_TABLE_SELECTED_AND_KEYS,\n            payload: {\n              rowSelected: _newRowSelected,\n              selectedKeys: selectedRowKeys,\n              selectInfo: selectInfo\n            }\n          });\n        } else {\n          onF7DelSelect(actionRowskeys, selectInfo);\n        }\n        break;\n      case _base_hooks_useTableSelect__WEBPACK_IMPORTED_MODULE_46__.SELECT_ACTIONS.check:\n        // 处理勾选单项造成的全选场景\n        if (selectStatus === _constants_dataGridConstants__WEBPACK_IMPORTED_MODULE_45__.CHECK_ALL) {\n          dispatch({\n            type: _refBillConstants__WEBPACK_IMPORTED_MODULE_36__.SET_TABLE_ROW_SELECTED,\n            payload: {\n              rowSelected: [],\n              selectedKeys: selectedRowKeys,\n              selectInfo: selectInfo\n            }\n          });\n          return;\n        }\n        var rowData = [];\n        var type = '';\n        if (selectStatus === _constants_dataGridConstants__WEBPACK_IMPORTED_MODULE_45__.CHECK_CANCEL) {\n          rowData = rows === null || rows === void 0 ? void 0 : _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_19___default()(rows).call(rows, function (item) {\n            return _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_20___default()(notInSelectedIds).call(notInSelectedIds, item.id);\n          });\n          // type用于区分rowSelected用替换还是覆盖的方式更新，此处意在删除rowSelected用替换\n          type = _refBillConstants__WEBPACK_IMPORTED_MODULE_36__.SET_TABLE_ROW_SELECTED;\n        } else {\n          // 此处意在新增rowSelected用替换\n          type = _refBillConstants__WEBPACK_IMPORTED_MODULE_36__.UPDATE_TABLE_SELECTED_AND_KEYS;\n          rowData = rows === null || rows === void 0 ? void 0 : _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_19___default()(rows).call(rows, function (item) {\n            return _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_20___default()(selectedRowKeys).call(selectedRowKeys, item.id);\n          }); // 获取当前已选中的数据\n        }\n        var newRowSelected = handleRowData(rowData);\n        dispatch({\n          type: type,\n          payload: {\n            selectedKeys: selectedRowKeys,\n            rowSelected: newRowSelected,\n            selectInfo: selectInfo\n          }\n        });\n    }\n  }, [state.tableData, onF7DelSelect, handleRowData, isMulti]);\n\n  /**\n   * F7弹窗 - 筛选面板\n   * @param info 列信息\n   * @param filters 当前已过滤条件\n   */\n  var onF7ColHeadFilterVisibleChange = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_29__.useCallback)(function (info, filters) {\n    console.log('onF7ColHeadFilterVisibleChange', info, filters);\n    // model.batchInvoke(GET_FILTER_ITEM_LOOK, pageId, id, [[info.fieldName]])\n    model.batchInvoke(_constants_sysActionName__WEBPACK_IMPORTED_MODULE_35__.GET_HEAD_FIELD_FILTER_ITEM, pageId, id, [[info.fieldName, filters]]);\n  }, [pageId, id]);\n\n  /**\n   * 返回已选在当前数据下标集合，使用primaryKey之后不需要每次遍历\n   * @param data F7表格数据\n   * @param selected 已选数据\n   * @returns []\n   */\n  // const getSelectedKeys = (data:any[], selected:any[]) => {\n  //   const keys:string[] = []\n  //   if (!data || data.length === 0) return keys\n  //   data.forEach((item:any, index:number) => {\n  //     console.log(selected[item.id], selected)\n  //     if (selected[item.id]) {\n  //       keys.push(String(index))\n  //     }\n  //   })\n  //   return keys\n  // }\n\n  // 下载\n  var onDownLoad = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_29__.useCallback)(function (info) {\n    var _context8;\n    var config = model.getConfig(pageId);\n    // const file = uploadRef.current.get(info.uid)\n    var options = {\n      params: '1',\n      appId: config.appId,\n      fId: config.formId,\n      fileName: info.name\n    };\n    var url = _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_24___default()(_context8 = \"\".concat(info.url, \"&kd_cs_ticket=\")).call(_context8, model.Global.token);\n    (0,_utils__WEBPACK_IMPORTED_MODULE_31__.downloadFile)(url, options);\n  }, []);\n  var refBillProps = (0,_control_hooks_useRefBillProps__WEBPACK_IMPORTED_MODULE_41__[\"default\"])({\n    pageId: pageId,\n    fieldKey: id,\n    model: model,\n    baseUrl: baseUrl,\n    onDownLoad: onDownLoad\n  });\n\n  // F7弹窗 - 列头筛选\n  var onF7TitleFilterShow = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_29__.useCallback)(function (number, filters) {\n    // onF7ColHeadFilterVisibleChange({ fieldName: number })\n    model.batchInvoke(_constants_sysActionName__WEBPACK_IMPORTED_MODULE_35__.GET_HEAD_FIELD_FILTER_ITEM, pageId, id, [[number, filters]]);\n  }, [pageId, id]);\n\n  // F7筛选弹窗-确定\n  var onF7TitleFilterConfirm = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_29__.useCallback)(function (row, number) {\n    var _data$filter, _context9;\n    console.log('onF7TitleFilterConfirm', row, number);\n    row.forEach(function (item, index) {\n      item.value.forEach(function (filter) {\n        if (filter.type === 'all') {\n          // 去除全选\n          _babel_runtime_corejs3_core_js_stable_instance_splice__WEBPACK_IMPORTED_MODULE_27___default()(row).call(row, index, 1);\n        }\n      });\n    });\n    var data = (state === null || state === void 0 ? void 0 : state.tableFilterData) || [];\n    var other = (data === null || data === void 0 || (_data$filter = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_19___default()(data)) === null || _data$filter === void 0 ? void 0 : _data$filter.call(data, function (item) {\n      return item.fieldName !== number;\n    })) || [];\n    var filters = _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_24___default()(_context9 = []).call(_context9, (0,_babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(row), (0,_babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(other));\n    // dispatch({ type: SET_TABLE_FILTER, payload: filters })\n    onF7FilterChange(filters);\n  }, [onF7FilterChange, state.tableFilterData]);\n\n  // 格式化表格列数据\n  var formateF7Column = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_29__.useCallback)(function (item, appId, formId) {\n    var align = item.type === 'nocodedecimalfield' ? 'right' : ''; // 标题对齐方式\n    var titleProps = {\n      // 列头数据\n      align: align,\n      // active: false,\n      // filter: state.colFilter[item.number],\n      title: item.name,\n      number: item.number,\n      type: item.type\n    };\n    return {\n      code: item.number,\n      title: /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_29___default().createElement(_base_web__WEBPACK_IMPORTED_MODULE_33__.TableTitle, titleProps),\n      width: 200,\n      align: align,\n      lock: false,\n      render: function render(value, record, rowIndex) {\n        var _context10;\n        if (_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_20___default()(_context10 = ['nocodeimageuploadfield', 'nocodeattachmentuploadfield', 'nocodeselectitemfield', 'nocodeentryentity', 'nocoderichtextfield', 'nocodegraphicdisplayfield']).call(_context10, item.type)) {\n          var _context11;\n          var newValue = value;\n          if (item.type === 'nocodeselectitemfield') {\n            newValue = Array.isArray(value) ? _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_23___default()(value).call(value, function (item) {\n              return _objectSpread(_objectSpread({}, item), {}, {\n                label: model.getControlText(item.name)\n              });\n            }) : [];\n          }\n          var option = {};\n          if (_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_20___default()(_context11 = ['nocodeimageuploadfield', 'nocodeattachmentuploadfield']).call(_context11, item.type)) {\n            option = {\n              baseUrl: baseUrl.current,\n              onDownLoad: onDownLoad,\n              value: newValue,\n              record: record,\n              rowIndex: rowIndex\n            };\n          } else if (item.type === 'nocodeentryentity') {\n            option = {\n              getTableData: getTableData,\n              appId: appId,\n              formId: formId,\n              baseUrl: baseUrl.current,\n              onDownLoad: onDownLoad\n            };\n          }\n          return renderCell(item.type, value, record, rowIndex, item.number, item.name, option);\n          // return <CellRender readOnly type={item.type} baseUrl={baseUrl.current} onDownLoad={onDownLoad} value={newValue} record={record} rowIndex={rowIndex} />\n        } else {\n          // 兼容苍穹的人员组织数据\n          if (value === null) return '';\n          if (typeof value === 'boolean') {\n            return value ? '是' : '否';\n          }\n          if ((0,_babel_runtime_corejs3_helpers_typeof__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(value) === 'object') return _babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_28___default()(value);\n          return value;\n        }\n      }\n    };\n  }, [onF7Sort, onDownLoad]);\n  var getTableData = function getTableData(pkId, entry, pageSize, pageNo, appId, formId, callback) {\n    // const param = { pkId: rowId, key: fieldKey, entry: fieldName, methodName: 'getEntryData', page_size: page_size, page_no: page_no, appId: appId, formId: formId, callback: callback }\n    model.batchInvoke(_constants_sysActionName__WEBPACK_IMPORTED_MODULE_35__.GET_ENTRY_DATA, pageId, id, [[pkId, pageNo, pageSize, entry]], [], callback);\n  };\n  var renderCell = function renderCell(type, value, record, rowIndex, fieldName, title, option) {\n    var props = {\n      type: type,\n      value: value,\n      readOnly: true,\n      id: record === null || record === void 0 ? void 0 : record.id,\n      title: title,\n      fieldName: fieldName\n    };\n    if (record.isAgg) {\n      props = _objectSpread(_objectSpread({}, props), {}, {\n        type: 'aggregate',\n        selectedItem: value || {},\n        fieldName: fieldName,\n        readOnly: false\n      });\n    }\n    return /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_29___default().createElement(CellRender, (0,_babel_runtime_corejs3_helpers_extends__WEBPACK_IMPORTED_MODULE_7__[\"default\"])({}, props, option));\n  };\n\n  // 编辑F7弹窗记录\n  var editF7Record = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_29__.useCallback)(function (_ref3) {\n    var recordId = _ref3.id;\n    // console.log('editF7Record', recordId)\n    // recordId：记录ID\n    // propsDisplay: 可显示内容\n    // id：refresh指令发回时的ID\n    model.batchInvoke(_constants_sysActionName__WEBPACK_IMPORTED_MODULE_35__.EIDT_REF_BILL_RECORD, pageId, id, [[recordId, propsDisplay, id]]);\n  }, [pageId, id, propsDisplay]);\n  var handleF7Edit = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_29__.useCallback)(function (e, record) {\n    e.stopPropagation();\n    editF7Record(record);\n  }, [editF7Record]);\n\n  /**\n   * F7配置数据格式化\n   */\n  var formateF7Config = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_29__.useCallback)(function (info) {\n    var config = info.listItemConfig;\n    var column = [];\n    var data = [];\n    config.forEach(function (item) {\n      // const align = item.type === 'nocodedecimalfield' ? 'right' : '' // 标题对齐方式\n      column.push(formateF7Column(item, info.appId, info.formId));\n      data.push({\n        key: item.number,\n        title: item.name\n      });\n    });\n    showAddRecord && column.push({\n      code: 'operator',\n      title: '操作',\n      width: 100,\n      lock: true,\n      render: function render(value, record, rowIndex) {\n        return /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_29___default().createElement(_base_web__WEBPACK_IMPORTED_MODULE_33__.BtnField, {\n          type: \"text\",\n          major: true,\n          onClick: function onClick(e) {\n            return handleF7Edit(e, record);\n          }\n        }, \"\\u7F16\\u8F91\");\n      }\n    });\n    return _objectSpread(_objectSpread({}, info), {}, {\n      data: data,\n      column: column,\n      editF7Record: editF7Record\n    });\n  }, [showAddRecord, editF7Record]);\n\n  // 更新表格配置信息，含已选数据，表格列设置，表格筛选数据\n  var setTableListConfig = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_29__.useCallback)(function (info) {\n    var rowSelected = {};\n    var selectedKeys = [];\n    info.selected.forEach(function (item, index) {\n      // 控制已选项最多展示1000条\n      if (index <= _utils_refBillUtils__WEBPACK_IMPORTED_MODULE_47__.MaxRowSelected) {\n        rowSelected[item[0]] = (0,_utils_refBillUtils__WEBPACK_IMPORTED_MODULE_47__.formateData)(item);\n      }\n      selectedKeys.push(item[0]);\n    });\n    var config = formateF7Config(info.data.rows[0]);\n    var selectInfo = {\n      selectStatus: _constants_dataGridConstants__WEBPACK_IMPORTED_MODULE_45__.CHECK,\n      selectedIds: selectedKeys,\n      notInSelectedIds: [],\n      selectedCount: selectedKeys.length\n    };\n    dispatch({\n      type: _refBillConstants__WEBPACK_IMPORTED_MODULE_36__.UPDATE_TABLE_CONFIG,\n      payload: {\n        tableConfig: info.data.rows[0],\n        tableColumn: config.column,\n        tableColumnData: config.data,\n        // tableFilterData: info.data.rows[0].configuredFilterItems, // 不用保存筛选条件\n        rowSelected: rowSelected,\n        selectedKeys: selectedKeys,\n        selectInfo: selectInfo\n      }\n    });\n  }, [formateF7Config, dispatch]);\n\n  /**\n   * F7添加关联表单记录\n   */\n  var onF7AddRecord = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_29__.useCallback)((0,_utils__WEBPACK_IMPORTED_MODULE_31__.debounce)(function () {\n    // propsDisplay\n    model.batchInvoke('addNewRef', pageId, id, [[propsDisplay, id]]);\n  }), [propsDisplay, pageId, id]);\n  var notFoundContent = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_29__.useMemo)(function () {\n    if (selectStatus === 2) {\n      return searchKeywords ? /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_29___default().createElement(_base_common_Nodata__WEBPACK_IMPORTED_MODULE_34__[\"default\"], {\n        text: \"\\u6682\\u65E0\\u641C\\u7D22\\u7ED3\\u679C\"\n      }) : /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_29___default().createElement(_base_common_Nodata__WEBPACK_IMPORTED_MODULE_34__[\"default\"], {\n        text: \"\\u6682\\u65E0\\u6570\\u636E\",\n        img: _assets_svg_empty_data_svg__WEBPACK_IMPORTED_MODULE_38__\n      });\n    } else if (selectStatus === 1) {\n      return /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_29___default().createElement(kd_libs_kdesign1__WEBPACK_IMPORTED_MODULE_39__.Spin, {\n        name: \"Spin\"\n      });\n    } else {\n      return /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_29___default().createElement(\"div\", null);\n    }\n  }, [selectStatus, searchKeywords]);\n\n  // useEffect(() => {\n  //   // console.log('state', state.tableData, state.rowSelected)\n  //   if (state.tableData?.rows?.length > 0 && Object.keys(state.rowSelected).length > 0) {\n  //     dispatch({ type: SET_TABLE_SELECTED_KEYS, payload: getSelectedKeys(state.tableData.rows, state.rowSelected) })\n  //   }\n  // }, [state.tableData, state.rowSelected])\n\n  /**\n   * 后台发的U指令\n   */\n  var updateValue = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_29__.useCallback)(function (info) {\n    if (Array.isArray(info === null || info === void 0 ? void 0 : info.v)) {\n      // const label:string[] = []\n      // const vals:string[] = []\n      // 只展示一千条数据\n      var _handleSelectData = (0,_utils_refBillUtils__WEBPACK_IMPORTED_MODULE_47__.handleSelectData)(info.v),\n        _handleSelectData2 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_11__[\"default\"])(_handleSelectData, 2),\n        vals = _handleSelectData2[0],\n        data = _handleSelectData2[1];\n      dispatch({\n        type: _refBillConstants__WEBPACK_IMPORTED_MODULE_36__.UPDATE_SELECT_DATA,\n        payload: {\n          value: isMulti ? vals : vals.join(),\n          options: data,\n          selectedKeys: vals,\n          selectInfo: (0,_utils_tableSelectUtils__WEBPACK_IMPORTED_MODULE_49__.getInitSelectInfo)({\n            selectedIds: vals\n          })\n        }\n      });\n      // !readonly && onSearchAction('', vals)\n      if (info.isLoadData === false) {\n        var _fieldItemRef$current;\n        (_fieldItemRef$current = fieldItemRef.current) === null || _fieldItemRef$current === void 0 || _fieldItemRef$current.validateFields('', isMulti ? vals : vals.join());\n      }\n    } else {\n      // 返回为null 或者 '******'\n      var _value2 = isMulti ? [] : '';\n      if (dropDownVisible.current && !isMulti) {\n        // 单选已选值下拉状态，清空内容,后端返回null，不清空下拉列表\n        dispatch({\n          type: _refBillConstants__WEBPACK_IMPORTED_MODULE_36__.SET_VALUE,\n          payload: {\n            value: _value2,\n            selectedKeys: []\n          }\n        });\n      } else {\n        dispatch({\n          type: _refBillConstants__WEBPACK_IMPORTED_MODULE_36__.UPDATE_SELECT_DATA,\n          payload: {\n            value: _value2,\n            options: [],\n            selectedKeys: [],\n            selectInfo: (0,_utils_tableSelectUtils__WEBPACK_IMPORTED_MODULE_49__.getInitSelectInfo)()\n          }\n        });\n      }\n      // !readonly && onSearchAction('', '')\n      if (info.isLoadData === false) {\n        var _fieldItemRef$current2;\n        (_fieldItemRef$current2 = fieldItemRef.current) === null || _fieldItemRef$current2 === void 0 || _fieldItemRef$current2.validateFields('', _value2);\n      }\n    }\n  }, [isMulti, dispatch, onSearchAction, _utils_refBillUtils__WEBPACK_IMPORTED_MODULE_47__.formateData]);\n  (0,_control_hooks__WEBPACK_IMPORTED_MODULE_40__.useGridValueValidate)(meta, fieldItemRef, function (v) {\n    if (Array.isArray(v)) {\n      var _handleSelectData3 = (0,_utils_refBillUtils__WEBPACK_IMPORTED_MODULE_47__.handleSelectData)(v),\n        _handleSelectData4 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_11__[\"default\"])(_handleSelectData3, 1),\n        vals = _handleSelectData4[0];\n      return isMulti ? vals : vals.join();\n    } else {\n      return isMulti ? [] : '';\n    }\n  });\n\n  // 模糊搜索回来的数据格式化成下拉选项的值\n  var setSelectOptions = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_29__.useCallback)(function (info) {\n    var _info$data;\n    var options = info === null || info === void 0 || (_info$data = info.data) === null || _info$data === void 0 ? void 0 : _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_23___default()(_info$data).call(_info$data, function (item) {\n      var _item = (0,_babel_runtime_corejs3_helpers_toArray__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(item),\n        param = _item[0],\n        other = _babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_21___default()(_item).call(_item, 1);\n      var obj = param ? JSON.parse(param) : {};\n      var option = (0,_utils_refBillUtils__WEBPACK_IMPORTED_MODULE_47__.formateData)(other);\n      return _objectSpread(_objectSpread({}, option), {}, {\n        disabled: obj._state_ === 'disabled'\n      });\n    });\n    (0,kd_libs_react_dom__WEBPACK_IMPORTED_MODULE_44__.unstable_batchedUpdates)(function () {\n      var _info$data2;\n      dispatch({\n        type: _refBillConstants__WEBPACK_IMPORTED_MODULE_36__.SET_OPTIONS,\n        payload: options\n      });\n      setSelectStatus((info === null || info === void 0 || (_info$data2 = info.data) === null || _info$data2 === void 0 ? void 0 : _info$data2.length) > 0 ? 0 : 2);\n    });\n  }, [setSelectStatus, _utils_refBillUtils__WEBPACK_IMPORTED_MODULE_47__.formateData]);\n\n  /**\n   * 自定义指令处理\n   */\n  var invokeMethod = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_29__.useCallback)(function (info) {\n    var _args$, _args$2, _args$3, _args$4;\n    if (!info) return;\n    console.log('invokeMethod', info);\n    var _info$ = info[0],\n      methodname = _info$.methodname,\n      args = _info$.args;\n    switch (methodname) {\n      case _constants_sysActionName__WEBPACK_IMPORTED_MODULE_35__.SET_LOOK_UP_LIST_VALUE:\n        setSelectOptions(args[0]);\n        break;\n      case _constants_sysActionName__WEBPACK_IMPORTED_MODULE_35__.SET_LIST_QUERY:\n        // 获取列表\n        dispatch({\n          type: _refBillConstants__WEBPACK_IMPORTED_MODULE_36__.SET_TABLE_DATA,\n          payload: args[0]\n        });\n        break;\n      case _constants_sysActionName__WEBPACK_IMPORTED_MODULE_35__.SET_LIST_CONFIG:\n        // 获取配置信息\n        args[0].selected = ((_args$ = args[0]) === null || _args$ === void 0 ? void 0 : _args$.selected) || [];\n        setTableListConfig(args[0]);\n        break;\n      case _constants_sysActionName__WEBPACK_IMPORTED_MODULE_35__.SET_FILTER_ITEM_LOOK:\n        // 暂时废弃\n        // console.log('SET_FILTER_ITEM_LOOK', args[0].data.rows)\n        dispatch({\n          type: _refBillConstants__WEBPACK_IMPORTED_MODULE_36__.SET_TABLE_COL_FILTER,\n          payload: {\n            key: args[0].args[0],\n            value: args[0].data.rows[0]\n          }\n        });\n        // dispatch({ type: SET_TABLE_COL_FILTER, payload: { [args[0].args[0]]: args[0].data.rows[0] } })\n        // model.emitEvent(pageId + id + SET_TABLE_COLUMN_FILTER, { key: args[0].args[0], value: args[0].data.rows[0] })\n        break;\n      case _constants_sysActionName__WEBPACK_IMPORTED_MODULE_35__.SET_HEAD_FIELD_FILTER_ITEM:\n        console.log('SET_HEAD_FIELD_FILTER_ITEM', args[0].data.rows[0]);\n        dispatch({\n          type: _refBillConstants__WEBPACK_IMPORTED_MODULE_36__.SET_TABLE_COL_FILTER,\n          payload: {\n            key: args[0].args[0],\n            value: args[0].data.rows[0]\n          }\n        });\n        break;\n      case _constants_sysActionName__WEBPACK_IMPORTED_MODULE_35__.REFBILL_RESET_VALUE:\n        // console.log('REFBILL_RESET_VALUE', args)\n        updateValue({\n          v: args[0]\n        });\n        break;\n      case _refBillConstants__WEBPACK_IMPORTED_MODULE_36__.SHOW_REF_BILL_USER_INFO:\n        // console.log('updateUserInfo', args)\n        (0,_utils_showUserOrOrgInfo__WEBPACK_IMPORTED_MODULE_43__.showStaffModal)(args[0]);\n        break;\n      case _refBillConstants__WEBPACK_IMPORTED_MODULE_36__.SHOW_REF_BILL_ORG_INFO:\n        // console.log('updateOrgInfo', args)\n        (0,_utils_showUserOrOrgInfo__WEBPACK_IMPORTED_MODULE_43__.showCompany)(args[0]);\n        break;\n      case _constants_sysActionName__WEBPACK_IMPORTED_MODULE_35__.REFBILL_REFRESH_REF_LIST:\n        // console.log('REFBILL_REFRESH_REF_LIST', args)\n        refreshRefList(args[0]);\n        break;\n      case 'setQuery':\n        model.emitEvent(methodname, _objectSpread(_objectSpread({}, args[0]), {}, {\n          args: {\n            formId: (_args$2 = args[0]) === null || _args$2 === void 0 ? void 0 : _args$2.args[0],\n            param: (_args$3 = args[0]) === null || _args$3 === void 0 ? void 0 : _args$3.args[1]\n          }\n        }));\n        break;\n      case 'listConfig':\n        model.emitEvent('setListConfig', _objectSpread(_objectSpread({}, args[0]), {}, {\n          args: {\n            formId: (_args$4 = args[0]) === null || _args$4 === void 0 ? void 0 : _args$4.args[0]\n          }\n        }));\n        break;\n    }\n  }, [refreshRefList, updateValue, setSelectStatus, dispatch, setTableListConfig, setSelectOptions]);\n  model.useUpdateControlStates(meta, updateValue); // 侦听U指令\n  model.useInvokeControlMethod(meta, invokeMethod); // 侦听InvokeControlMethod指令\n  // useEffect(() => {\n  //   const rmUpdateListener = model.addControlAction(UPDATE_CONTROL_STATES, pageId, id, updateValue) // 监听U指令\n  //   const rmSetListValueListener = model.addControlAction(INVOKE_CONTROL_METHOD, pageId, id, invokeMethod) // 监听控件指令\n  //   return () => {\n  //     rmUpdateListener?.()\n  //     rmSetListValueListener?.()\n  //   }\n  // }, [])\n\n  (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_29__.useEffect)(function () {\n    // 监听平台指令返回来的数据\n    invokeMethod(invokeData);\n  }, [invokeData]);\n  (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_29__.useEffect)(function () {\n    updateValue({\n      v: value\n    });\n  }, [value]);\n  (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_29__.useEffect)(function () {\n    // *******将state赋给ref，以便将值穿透给子组件\n    store.current = state;\n  }, [state]);\n  (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_29__.useEffect)(function () {\n    // 设置初始值\n    // console.log('change value', props.value)\n    updateValue({\n      v: props.value\n    });\n  }, []);\n  var selectData = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_29__.useMemo)(function () {\n    var _state$options;\n    return (_state$options = state.options) === null || _state$options === void 0 ? void 0 : _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_19___default()(_state$options).call(_state$options, function (op) {\n      var _state$value;\n      return (_state$value = state.value) === null || _state$value === void 0 ? void 0 : _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_20___default()(_state$value).call(_state$value, op.value);\n    });\n  }, [state.value, state.options]);\n  if (hidden) return null;\n  return /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_29___default().createElement(_FieldItemWrapper__WEBPACK_IMPORTED_MODULE_32__[\"default\"], {\n    controlMeta: meta,\n    required: required,\n    rules: rules,\n    ref: fieldItemRef\n  }, readonly ? /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_29___default().createElement(_RefBillReadonly__WEBPACK_IMPORTED_MODULE_42__[\"default\"], {\n    data: selectData,\n    multi: isMulti,\n    meta: meta,\n    model: model\n  }) : /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_29___default().createElement(_base_web__WEBPACK_IMPORTED_MODULE_33__.RefBill, {\n    showSearch: true,\n    value: (state === null || state === void 0 ? void 0 : state.value) || '',\n    placeholder: placeholder,\n    disabled: disabled,\n    options: (state === null || state === void 0 ? void 0 : state.options) || [],\n    dataRange: dataRange || {},\n    mode: isMulti ? 'multiple' : 'single',\n    allowClear: meta === null || meta === void 0 ? void 0 : meta.ShowClearButton,\n    notFoundContent: notFoundContent,\n    tablePrimaryKey: \"id\",\n    tableSorts: sorts,\n    tableColFilter: state === null || state === void 0 ? void 0 : state.colFilter // 多余的属性\n    ,\n    tableData: state === null || state === void 0 ? void 0 : state.tableData,\n    tableConfig: state === null || state === void 0 ? void 0 : state.tableConfig,\n    tableColumn: state === null || state === void 0 ? void 0 : state.tableColumn,\n    tableColumnData: state === null || state === void 0 ? void 0 : state.tableColumnData,\n    tableFilterData: state === null || state === void 0 ? void 0 : state.tableFilterData,\n    tableSelected: state !== null && state !== void 0 && state.rowSelected ? _babel_runtime_corejs3_core_js_stable_object_values__WEBPACK_IMPORTED_MODULE_26___default()(state === null || state === void 0 ? void 0 : state.rowSelected) : [],\n    tableSelectedKeys: (state === null || state === void 0 ? void 0 : state.selectedKeys) || [],\n    showSelected: dispSelected === 1,\n    f7ContentRef: f7ContentRef,\n    f7Options: {\n      showAddRecord: showAddRecord,\n      // 人员|组织不显示按钮\n      onAddRecord: onF7AddRecord\n    },\n    refBillProps: refBillProps,\n    f7SelectInfo: state.selectInfo,\n    allowSelectAll: true,\n    onChange: onChange,\n    onSearch: onSearchAction,\n    onVisibleChange: onVisibleChange,\n    moreClick: onMoreClick,\n    onF7Search: onF7SearchAction,\n    onF7FilterChange: onF7FilterChange,\n    onF7PageChange: onF7PageChange,\n    onF7Ok: onF7Ok,\n    onF7Cancel: onF7Cancel,\n    onF7Clean: onF7Clean,\n    onF7DelSelect: onF7DelSelect,\n    onF7RowSelectChange: onF7RowSelectChange,\n    f7ColHeadFilter: state.colFilter,\n    onF7ColHeadFilterVisibleChange: onF7ColHeadFilterVisibleChange,\n    onF7Sort: onF7Sort,\n    onF7TitleFilterConfirm: onF7TitleFilterConfirm,\n    onF7TitleFilterShow: onF7TitleFilterShow\n  }));\n};\nKDRefBill.displayName = 'KDRefBill';\n/* harmony default export */ __webpack_exports__[\"default\"] = (kd_libs_react__WEBPACK_IMPORTED_MODULE_29___default().memo(KDRefBill));\n\n//# sourceURL=webpack://nocode-component/./src/control/web/RefBill/index.tsx?");

/***/ }),

/***/ "./src/control/web/RefBill/refBillConstants.ts":
/*!*****************************************************!*\
  !*** ./src/control/web/RefBill/refBillConstants.ts ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CLEAN_SELECTED: function() { return /* binding */ CLEAN_SELECTED; },\n/* harmony export */   CLOSE_F7_MODAL: function() { return /* binding */ CLOSE_F7_MODAL; },\n/* harmony export */   SET_OPTIONS: function() { return /* binding */ SET_OPTIONS; },\n/* harmony export */   SET_TABLE_COL_FILTER: function() { return /* binding */ SET_TABLE_COL_FILTER; },\n/* harmony export */   SET_TABLE_COL_SORT: function() { return /* binding */ SET_TABLE_COL_SORT; },\n/* harmony export */   SET_TABLE_DATA: function() { return /* binding */ SET_TABLE_DATA; },\n/* harmony export */   SET_TABLE_FILTER: function() { return /* binding */ SET_TABLE_FILTER; },\n/* harmony export */   SET_TABLE_ROW_SELECTED: function() { return /* binding */ SET_TABLE_ROW_SELECTED; },\n/* harmony export */   SET_TABLE_SELECTED_KEYS: function() { return /* binding */ SET_TABLE_SELECTED_KEYS; },\n/* harmony export */   SET_VALUE: function() { return /* binding */ SET_VALUE; },\n/* harmony export */   SHOW_REF_BILL_INFO: function() { return /* binding */ SHOW_REF_BILL_INFO; },\n/* harmony export */   SHOW_REF_BILL_ORG_INFO: function() { return /* binding */ SHOW_REF_BILL_ORG_INFO; },\n/* harmony export */   SHOW_REF_BILL_USER_INFO: function() { return /* binding */ SHOW_REF_BILL_USER_INFO; },\n/* harmony export */   UPDATE_SELECT: function() { return /* binding */ UPDATE_SELECT; },\n/* harmony export */   UPDATE_SELECT_DATA: function() { return /* binding */ UPDATE_SELECT_DATA; },\n/* harmony export */   UPDATE_TABLE_CONFIG: function() { return /* binding */ UPDATE_TABLE_CONFIG; },\n/* harmony export */   UPDATE_TABLE_SELECTED_AND_KEYS: function() { return /* binding */ UPDATE_TABLE_SELECTED_AND_KEYS; }\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_symbol__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/symbol */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/symbol.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_symbol__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_symbol__WEBPACK_IMPORTED_MODULE_0__);\n\nvar UPDATE_SELECT_DATA = _babel_runtime_corejs3_core_js_stable_symbol__WEBPACK_IMPORTED_MODULE_0___default()('更新下拉数据');\nvar SET_VALUE = _babel_runtime_corejs3_core_js_stable_symbol__WEBPACK_IMPORTED_MODULE_0___default()('设置下拉选中值');\nvar SET_OPTIONS = _babel_runtime_corejs3_core_js_stable_symbol__WEBPACK_IMPORTED_MODULE_0___default()('设置下拉选项');\nvar SET_TABLE_DATA = _babel_runtime_corejs3_core_js_stable_symbol__WEBPACK_IMPORTED_MODULE_0___default()('设置F7表格数据');\nvar UPDATE_TABLE_CONFIG = _babel_runtime_corejs3_core_js_stable_symbol__WEBPACK_IMPORTED_MODULE_0___default()('设置F7表格配置信息');\nvar SET_TABLE_COL_FILTER = _babel_runtime_corejs3_core_js_stable_symbol__WEBPACK_IMPORTED_MODULE_0___default()('设置F7表格请求过滤条件');\nvar UPDATE_SELECT = _babel_runtime_corejs3_core_js_stable_symbol__WEBPACK_IMPORTED_MODULE_0___default()('F7单个删除已选');\nvar SET_TABLE_ROW_SELECTED = _babel_runtime_corejs3_core_js_stable_symbol__WEBPACK_IMPORTED_MODULE_0___default()('设置F7表格行选择数据');\nvar UPDATE_TABLE_SELECTED_AND_KEYS = _babel_runtime_corejs3_core_js_stable_symbol__WEBPACK_IMPORTED_MODULE_0___default()('更新F7表格行选择数据和下标');\nvar SET_TABLE_SELECTED_KEYS = _babel_runtime_corejs3_core_js_stable_symbol__WEBPACK_IMPORTED_MODULE_0___default()('设置F7表格行选择数据下标');\nvar CLEAN_SELECTED = _babel_runtime_corejs3_core_js_stable_symbol__WEBPACK_IMPORTED_MODULE_0___default()('F7点击清空按钮');\nvar SET_TABLE_FILTER = _babel_runtime_corejs3_core_js_stable_symbol__WEBPACK_IMPORTED_MODULE_0___default()('设置表格筛选项');\nvar SET_TABLE_COL_SORT = _babel_runtime_corejs3_core_js_stable_symbol__WEBPACK_IMPORTED_MODULE_0___default()('表格列排序');\nvar CLOSE_F7_MODAL = _babel_runtime_corejs3_core_js_stable_symbol__WEBPACK_IMPORTED_MODULE_0___default()('关闭F7弹窗');\nvar SHOW_REF_BILL_INFO = 'showInfo'; // 打开关联的表单详情\nvar SHOW_REF_BILL_USER_INFO = 'showUserInfo'; // 展示用户信息\nvar SHOW_REF_BILL_ORG_INFO = 'showOrgInfo'; // 展示用户信息\n\n//# sourceURL=webpack://nocode-component/./src/control/web/RefBill/refBillConstants.ts?");

/***/ }),

/***/ "./src/control/web/RefBill/refBillReducer.ts":
/*!***************************************************!*\
  !*** ./src/control/web/RefBill/refBillReducer.ts ***!
  \***************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   initState: function() { return /* binding */ initState; },\n/* harmony export */   reducer: function() { return /* binding */ reducer; }\n/* harmony export */ });\n/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ \"../../node_modules/core-js/modules/web.dom-collections.for-each.js\");\n/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/keys */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/object/keys.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/filter */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/instance/filter.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-properties */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/object/define-properties.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-property */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/object/define-property.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/defineProperty */ \"../../node_modules/@babel/runtime-corejs3/helpers/esm/defineProperty.js\");\n/* harmony import */ var _utils_immerTools__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @/utils/immerTools */ \"./src/utils/immerTools.ts\");\n/* harmony import */ var _utils_tableSelectUtils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @/utils/tableSelectUtils */ \"./src/utils/tableSelectUtils.ts\");\n/* harmony import */ var _refBillConstants__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./refBillConstants */ \"./src/control/web/RefBill/refBillConstants.ts\");\n\n\n\n\n\n\n\n\n\n\nfunction ownKeys(e, r) { var t = _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_2___default()(e); if ((_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_3___default())) { var o = _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_3___default()(e); r && (o = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_4___default()(o).call(o, function (r) { return _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_5___default()(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { (0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(e, r, t[r]); }) : (_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_6___default()) ? _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_7___default()(e, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_6___default()(t)) : ownKeys(Object(t)).forEach(function (r) { _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_8___default()(e, r, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_5___default()(t, r)); }); } return e; }\n\n\n\nvar initState = {\n  value: [],\n  // 选项值\n  label: '',\n  // 只读文本\n  options: [],\n  // 下拉列表数据\n  tableData: {\n    rows: []\n  },\n  // f7表格数据\n  tableConfig: {},\n  // f7表格配置信息\n  tableColumn: [],\n  // f7 表格列设置\n  tableColumnData: [],\n  // f7 表格列数据[{key,title}]\n  tableFilterData: [],\n  // f7 表格过滤数据\n  rowSelected: {},\n  // f7表格行选择\n  selectedKeys: [],\n  // f7表格当前已选\n  colFilter: {},\n  // f7列过滤\n  colSort: {} // f7列排序\n};\nvar reducer = (0,_utils_immerTools__WEBPACK_IMPORTED_MODULE_10__[\"default\"])(function (state, action) {\n  var type = action.type,\n    payload = action.payload;\n  switch (type) {\n    case _refBillConstants__WEBPACK_IMPORTED_MODULE_12__.UPDATE_SELECT_DATA:\n      // 主要用于U指令更新\n      state.value = payload.value;\n      state.options = payload.options;\n      // state.label = payload.label\n      state.selectedKeys = payload.selectedKeys;\n      state.selectInfo = payload.selectInfo;\n      break;\n    case _refBillConstants__WEBPACK_IMPORTED_MODULE_12__.SET_VALUE:\n      state.value = payload.value;\n      // state.label = payload.label\n      state.selectedKeys = payload.selectedKeys;\n      break;\n    case _refBillConstants__WEBPACK_IMPORTED_MODULE_12__.SET_OPTIONS:\n      state.options = payload;\n      break;\n    case _refBillConstants__WEBPACK_IMPORTED_MODULE_12__.SET_TABLE_DATA:\n      // state.tableFilterData = payload.args[3] // 从请求的参数里保存筛选参数, 不再从这里拿\n      state.tableData = payload.data;\n      break;\n    case _refBillConstants__WEBPACK_IMPORTED_MODULE_12__.UPDATE_TABLE_CONFIG:\n      state.tableConfig = payload.tableConfig;\n      state.rowSelected = payload.rowSelected;\n      state.tableColumn = payload.tableColumn;\n      state.tableColumnData = payload.tableColumnData;\n      state.selectedKeys = payload.selectedKeys;\n      state.selectInfo = payload.selectInfo;\n      // state.tableFilterData = payload.tableFilterData // 返回的内容里没有tableFilterData\n      break;\n    case _refBillConstants__WEBPACK_IMPORTED_MODULE_12__.SET_TABLE_FILTER:\n      // 自行维护筛选数据\n      state.tableFilterData = payload.tableFilterData;\n      state.rowSelected = payload.rowSelected || state.rowSelected;\n      state.selectedKeys = payload.selectedKeys || state.selectedKeys;\n      state.selectInfo = payload.selectInfo || state.selectInfo;\n      break;\n    case _refBillConstants__WEBPACK_IMPORTED_MODULE_12__.SET_TABLE_ROW_SELECTED:\n      state.rowSelected = payload.rowSelected;\n      state.selectedKeys = payload.selectedKeys;\n      state.selectInfo = payload.selectInfo || state.selectInfo;\n      break;\n    case _refBillConstants__WEBPACK_IMPORTED_MODULE_12__.CLOSE_F7_MODAL:\n      state.tableFilterData = [];\n      state.tableData = [];\n      state.colSort = {};\n      state.selectInfo = (0,_utils_tableSelectUtils__WEBPACK_IMPORTED_MODULE_11__.getInitSelectInfo)();\n      break;\n    case _refBillConstants__WEBPACK_IMPORTED_MODULE_12__.CLEAN_SELECTED:\n      state.rowSelected = [];\n      state.selectedKeys = [];\n      state.selectInfo = (0,_utils_tableSelectUtils__WEBPACK_IMPORTED_MODULE_11__.getInitSelectInfo)();\n      break;\n    case _refBillConstants__WEBPACK_IMPORTED_MODULE_12__.SET_TABLE_SELECTED_KEYS:\n      state.selectedKeys = payload.selectedKeys;\n      state.rowSelected = payload.rowSelected;\n      break;\n    case _refBillConstants__WEBPACK_IMPORTED_MODULE_12__.UPDATE_TABLE_SELECTED_AND_KEYS:\n      state.selectedKeys = payload.selectedKeys;\n      state.rowSelected = _objectSpread(_objectSpread({}, state.rowSelected), payload.rowSelected);\n      state.selectInfo = payload.selectInfo;\n      break;\n    case _refBillConstants__WEBPACK_IMPORTED_MODULE_12__.SET_TABLE_COL_FILTER:\n      state.colFilter[payload.key] = payload.value;\n      break;\n    case _refBillConstants__WEBPACK_IMPORTED_MODULE_12__.SET_TABLE_COL_SORT:\n      state.colSort = payload;\n      break;\n  }\n});\n\n//# sourceURL=webpack://nocode-component/./src/control/web/RefBill/refBillReducer.ts?");

/***/ }),

/***/ "./src/control/web/RefBillGridView/OperatorFields.tsx":
/*!************************************************************!*\
  !*** ./src/control/web/RefBillGridView/OperatorFields.tsx ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/filter */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/instance/filter.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/instance/map.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var kd_libs_react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! kd_libs/react */ \"webpack/container/remote/kd_libs/react\");\n/* harmony import */ var kd_libs_react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(kd_libs_react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _base_web__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/base/web */ \"./src/base/web/index.ts\");\n/* harmony import */ var _OperatorFields_less__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./OperatorFields.less */ \"./src/control/web/RefBillGridView/OperatorFields.less\");\n\n\n\n\n\nvar OperatorFields = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_2__.memo)(function (_ref) {\n  var onItemClick = _ref.onItemClick,\n    disabled = _ref.disabled,\n    record = _ref.record,\n    isF7 = _ref.isF7;\n  var options = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_2__.useRef)([{\n    key: 'edit',\n    title: '编辑',\n    isF7: true\n  }, {\n    key: 'detail',\n    title: '详情',\n    isF7: false\n  }, {\n    key: 'delete',\n    title: '删除',\n    isF7: false\n  }]);\n  var handleClick = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(function (e, key, record) {\n    e.stopPropagation();\n    onItemClick === null || onItemClick === void 0 || onItemClick(key, record);\n  }, [onItemClick]);\n  var btns = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(function () {\n    var _context;\n    return _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_0___default()(_context = options.current).call(_context, function (item) {\n      return item.isF7 === isF7;\n    });\n  }, [isF7]);\n  return /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\", {\n    className: _OperatorFields_less__WEBPACK_IMPORTED_MODULE_4__[\"default\"].operator\n  }, _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_1___default()(btns).call(btns, function (_ref2) {\n    var key = _ref2.key,\n      title = _ref2.title;\n    return /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_base_web__WEBPACK_IMPORTED_MODULE_3__.BtnField, {\n      key: key,\n      type: \"text\",\n      disabled: key === 'detail' ? false : disabled,\n      major: true,\n      onClick: function onClick(e) {\n        return handleClick(e, key, record);\n      }\n    }, title);\n  }));\n});\nOperatorFields.displayName = 'OperatorFields';\n/* harmony default export */ __webpack_exports__[\"default\"] = (OperatorFields);\n\n//# sourceURL=webpack://nocode-component/./src/control/web/RefBillGridView/OperatorFields.tsx?");

/***/ }),

/***/ "./src/hooks/useResizeObserver.ts":
/*!****************************************!*\
  !*** ./src/hooks/useResizeObserver.ts ***!
  \****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ useResizeObserver; }\n/* harmony export */ });\n/* harmony import */ var kd_libs_react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! kd_libs/react */ \"webpack/container/remote/kd_libs/react\");\n/* harmony import */ var kd_libs_react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(kd_libs_react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var resize_observer_polyfill__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! resize-observer-polyfill */ \"../../node_modules/resize-observer-polyfill/dist/ResizeObserver.es.js\");\n\n\n\n/*\n @param:id,元素属性值\n @param：refName，指定id值的ele属性，默认为id\n */\nfunction useResizeObserver(element, handler) {\n  (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    if (!element) {\n      console.warn('useResizeMeasure指定的元素不存在');\n      return;\n    }\n    var resizeObserver = element && new resize_observer_polyfill__WEBPACK_IMPORTED_MODULE_1__[\"default\"](handler);\n    resizeObserver && resizeObserver.observe(element);\n    return function () {\n      resizeObserver && resizeObserver.disconnect(element);\n    };\n  }, [element, handler]);\n}\n\n//# sourceURL=webpack://nocode-component/./src/hooks/useResizeObserver.ts?");

/***/ }),

/***/ "./src/utils/showUserOrOrgInfo.tsx":
/*!*****************************************!*\
  !*** ./src/utils/showUserOrOrgInfo.tsx ***!
  \*****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   showCompany: function() { return /* binding */ showCompany; },\n/* harmony export */   showStaffModal: function() { return /* binding */ showStaffModal; }\n/* harmony export */ });\n/* harmony import */ var kd_libs_react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! kd_libs/react */ \"webpack/container/remote/kd_libs/react\");\n/* harmony import */ var kd_libs_react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(kd_libs_react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var kd_libs_kdesign1__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! kd_libs/kdesign1 */ \"webpack/container/remote/kd_libs/kdesign1\");\n/* harmony import */ var kd_libs_kdesign1__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(kd_libs_kdesign1__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _base_web__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/base/web */ \"./src/base/web/index.ts\");\n/* harmony import */ var _control_web_RefBill_UserAndOrgModalBody__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/control/web/RefBill/UserAndOrgModalBody */ \"./src/control/web/RefBill/UserAndOrgModalBody.tsx\");\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./index */ \"./src/utils/index.ts\");\n\n\n\n\n\n\n// 组织列\nvar orgColumns = [{\n  code: 'number',\n  name: '员工编号',\n  width: 178\n}, {\n  code: 'name',\n  name: '员工姓名',\n  width: 178\n}, {\n  code: 'avatar',\n  name: '员工头像',\n  align: 'center',\n  width: 178,\n  render: function render(node) {\n    return /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_base_web__WEBPACK_IMPORTED_MODULE_2__.Avatar, {\n      src: node,\n      alt: \"\"\n    });\n  }\n}, {\n  code: 'opera',\n  lock: true,\n  name: '操作',\n  width: 100,\n  render: function render(node, data, index) {\n    return /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_base_web__WEBPACK_IMPORTED_MODULE_2__.BtnField, {\n      type: \"text\",\n      major: true,\n      onClick: function onClick() {\n        return showStaffModal(data);\n      }\n    }, \"\\u8BE6\\u60C5\");\n  }\n}]; // 所有数据\n\n// 打开员工信息弹窗\nvar showStaffModal = function showStaffModal(data) {\n  var height = (0,_index__WEBPACK_IMPORTED_MODULE_4__.autoModalHeight)(520, 640, 640, /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_control_web_RefBill_UserAndOrgModalBody__WEBPACK_IMPORTED_MODULE_3__.UserBody, {\n    data: data\n  }));\n  kd_libs_kdesign1__WEBPACK_IMPORTED_MODULE_1__.Modal.confirm({\n    title: '人员信息',\n    showline: true,\n    footer: null,\n    titleIcon: null,\n    style: {\n      position: 'absolute'\n    },\n    destroyOnClose: true,\n    width: 640,\n    height: height,\n    type: 'normal',\n    bodyStyle: {\n      padding: 0,\n      overflow: 'hidden'\n    },\n    body: /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_control_web_RefBill_UserAndOrgModalBody__WEBPACK_IMPORTED_MODULE_3__.UserBody, {\n      data: data\n    }),\n    closable: true,\n    maskClosable: false\n  });\n};\n\n// 打开部门信息弹窗\nvar showCompany = function showCompany(org) {\n  var height = (0,_index__WEBPACK_IMPORTED_MODULE_4__.autoModalHeight)(520, 748);\n  kd_libs_kdesign1__WEBPACK_IMPORTED_MODULE_1__.Modal.confirm({\n    title: '组织信息',\n    showline: true,\n    titleIcon: null,\n    footer: null,\n    width: 720,\n    height: height,\n    style: {\n      position: 'absolute'\n    },\n    destroyOnClose: true,\n    type: 'normal',\n    bodyStyle: {\n      padding: 0,\n      display: 'flex',\n      overflow: 'hidden',\n      flexBasis: 0\n    },\n    body: /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_control_web_RefBill_UserAndOrgModalBody__WEBPACK_IMPORTED_MODULE_3__.CompanyBody, {\n      org: org,\n      columns: orgColumns\n    }),\n    closable: true,\n    maskClosable: false\n  });\n};\n\n\n//# sourceURL=webpack://nocode-component/./src/utils/showUserOrOrgInfo.tsx?");

/***/ })

}]);