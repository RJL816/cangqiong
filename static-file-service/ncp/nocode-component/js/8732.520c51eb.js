"use strict";(self.webpackChunknocode_component=self.webpackChunknocode_component||[]).push([[8732],{35392:function(e,n,t){t.r(n);t(87912),t(97308);var a=t(13939),l=t.n(a),r=t(34716),o=t.n(r),c=t(70696),i=t.n(c),u=t(4884),s=t.n(u),d=t(3464),m=t.n(d),v=t(51400),f=t.n(v),p=t(25028),b=t.n(p),E=t(30112),h=t(65984),g=t.n(h),y=t(10532),C=t(13764),k=t(73572),N=t(63324);function _(e,n){var t=l()(e);if(o()){var a=o()(e);n&&(a=i()(a).call(a,(function(n){return s()(e,n).enumerable}))),t.push.apply(t,a)}return t}function S(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?_(Object(t),!0).forEach((function(n){(0,E.c)(e,n,t[n])})):m()?f()(e,m()(t)):_(Object(t)).forEach((function(n){b()(e,n,s()(t,n))}))}return e}n.default=(0,h.memo)((function(e){var n=(0,N.c)(S(S({},e),{},{uploadAttachmentVerify:k.S0,showInfo:k.yW})),t=n.action,a=n.disabled,l=n.readonly,r=n.handleChange,o=n.onDownload,c=n.onChangeFileName,i=n.beforeUpload,u=n.handleRemove,s=n.attachmentFileType,d=n.uploadNum,m=n.notice,v=n.previewType,f=n.labelText,p=n.required,b=n.hidden,E=n.fieldRef,h=n.datas;return n.rules,b?null:g().createElement(y.c,{ref:E,subTitle:f,controlMeta:S(S({},e.controlMeta),{},{labelDirection:"v"}),required:p},0===(null==h?void 0:h.length)&&l?g().createElement(g().Fragment,null,"-"):g().createElement(C.Attachment,{multiple:!0,action:t,data:{action:"upload",tempstorage:!1},fileList:h,disabled:a,readonly:l,onChange:r,onDownload:o,onChangeFileName:c,beforeUpload:i,onRemove:u,accept:s,uploadNum:d,noticeInfo:m,previewType:v}))}))},14744:function(e,n,t){t.r(n);t(87912),t(97308);var a=t(13939),l=t.n(a),r=t(34716),o=t.n(r),c=t(70696),i=t.n(c),u=t(4884),s=t.n(u),d=t(3464),m=t.n(d),v=t(51400),f=t.n(v),p=t(25028),b=t.n(p),E=t(30112),h=t(65984),g=t.n(h),y=t(10532),C=t(13764),k=t(73572),N=t(60807);function _(e,n){var t=l()(e);if(o()){var a=o()(e);n&&(a=i()(a).call(a,(function(n){return s()(e,n).enumerable}))),t.push.apply(t,a)}return t}function S(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?_(Object(t),!0).forEach((function(n){(0,E.c)(e,n,t[n])})):m()?f()(e,m()(t)):_(Object(t)).forEach((function(n){b()(e,n,s()(t,n))}))}return e}n.default=(0,h.memo)((function(e){var n=(0,h.useCallback)((function(n,t){return(0,k.is)(n,t,e.controlMeta)}),[e.controlMeta]),t=(0,N.c)(e),a=t.action,l=t.notice,r=t.labelText,o=t.datas,c=t.readonly,i=t.disabled,u=t.hidden,s=t.required,d=(t.rules,t.enablePreview),m=t.buttonText,v=t.fieldTitleRef,f=t.baseUrl,p=t.limit,b=t.accept,E=t.onRemove,_=t.handleChange;return u?null:g().createElement(y.c,{ref:v,subTitle:r,controlMeta:S(S({},e.controlMeta),{},{labelDirection:"v"}),required:s},0===(null==o?void 0:o.length)&&c?g().createElement(g().Fragment,null,"-"):g().createElement(C.Picture,{multiple:!0,baseUrl:f,action:a,data:{action:"upload",tempstorage:!1},disabled:i,readonly:c,fileList:o,uploadNum:p,onChange:_,onRemove:E,beforeUpload:n,accept:b,enablePreview:d,buttonText:m,noticeInfo:l}))}))},78184:function(e,n,t){t.d(n,{c:function(){return S}});var a=t(72048),l=t(23992),r=t.n(l),o=t(67584),c=t.n(o),i=(t(86456),t(21300),t(33768),t(29885),t(65984)),u=t.n(i),s=t(22176),d=t(47906),m=t(63548),v="D2uvtrIA_popup_body",f="x8pGkqfS_item",p="tIkx0VPm_title",b="Ef77mT7u_user_info",E="_8U-jn1Ug_avatar",h="_2jnKO7VQ_org_Info",g="sPSqBVga_headTitle",y="AVFhz5E2_hidden",C="xwSSaRqa_org_Info_loading",k=(0,i.memo)((function(e){var n,t=e.data,a=e.title;return u().createElement("div",{className:v},u().createElement("div",{className:g},a),u().createElement("div",{className:b},u().createElement("div",{className:f},u().createElement("div",{className:p},"员工编号"),u().createElement("div",null,(null==t?void 0:t.number)||"-")),u().createElement("div",{className:f},u().createElement("div",{className:p},"姓名"),u().createElement("div",null,(null==t?void 0:t.name)||"-")),u().createElement("div",{className:f},u().createElement("div",{className:p},"头像"),u().createElement("div",{className:E},u().createElement(d.Avatar,{src:null==t?void 0:t.avatar}))),u().createElement("div",{className:f},u().createElement("div",{className:p},"性别"),u().createElement("div",null,(null==t?void 0:t.gender)||"-")),u().createElement("div",{className:f},u().createElement("div",{className:p},"生日"),u().createElement("div",null,(null==t?void 0:t.birthday)||"-")),u().createElement("div",{className:f},u().createElement("div",{className:p},"手机号"),u().createElement("div",null,(null==t?void 0:t.phone)||"-")),u().createElement("div",{className:f},u().createElement("div",{className:p},"邮箱"),u().createElement("div",null,(null==t?void 0:t.email)||"-")),(null==t?void 0:t.orgs)&&(null==t?void 0:t.orgs.length)>0&&u().createElement("div",{className:f},u().createElement("div",{className:p},"所属组织"),u().createElement("div",null,u().createElement("table",{cellSpacing:1,cellPadding:1},u().createElement("tr",null,u().createElement("th",null,"所属组织编码"),u().createElement("th",null,"组织名称")),null==t?void 0:r()(n=t.orgs).call(n,(function(e,n){return u().createElement("tr",{key:e.orgId+n},u().createElement("td",null,e.orgNum),u().createElement("td",null,e.orgName))})))))))})),N=(0,i.memo)((function(e){var n=e.org,t=e.title,l=n||{},r=l.id,o=l.number,s=[window.__domainurl__||"","nocode/m/user/company/",r,"/",o].join("")+window.location.search,d=(0,i.useState)(!1),v=(0,a.c)(d,2),f=v[0],p=v[1];return u().createElement(u().Fragment,null,u().createElement("div",{className:g},t),u().createElement("div",{className:f?y:C},u().createElement(m.Spin,null)),u().createElement("div",{className:f?"":y},u().createElement("iframe",{src:s,className:h,onLoad:function(){c()((function(){return p(!0)}),1e3)}})))})),_=(0,i.memo)((function(e){var n=e.visible,t=e.title,l=e.type,r=e.data,o=e.onClose,c=(0,i.useState)(!1),d=(0,a.c)(c,2),m=d[0],v=d[1];(0,i.useEffect)((function(){v(n)}),[n]);var f=(0,i.useCallback)((function(){if(o)return null==o?void 0:o();v(!1)}),[o]);return u().createElement(s.c,{visible:m,lockScroll:!1,closeable:!0,onClose:f,bodyStyle:{height:"auto",minHeight:180}},""!==l&&function(e){return"user"===e?u().createElement(k,{data:r,title:t||"人员信息"}):"org"===e?u().createElement(N,{org:r,title:t||"组织信息"}):void 0}(l))}));_.displayName="RefBillUsrOrCompanyInfo";var S=_},87592:function(e,n,t){t.r(n),t.d(n,{default:function(){return te}});t(87912),t(97308);var a=t(13939),l=t.n(a),r=t(34716),o=t.n(r),c=t(4884),i=t.n(c),u=t(3464),s=t.n(u),d=t(51400),m=t.n(d),v=t(25028),f=t.n(v),p=t(75240),b=t(81043),E=t(72048),h=t(30112),g=(t(86456),t(76124),t(59992)),y=t.n(g),C=t(73980),k=t.n(C),N=t(70696),_=t.n(N),S=t(50524),w=t.n(S),I=t(23992),R=t.n(I),x=t(760),O=t.n(x),T=t(65984),M=t.n(T),j=t(39756),A=t(10532),q=t(13764),D=t(38680),F=t(14020),U=t(46276),V=t(18656),B={"ref-bill-option":"_54fTl+Yu_ref-bill-option","ref-bill-option-title":"I-f6aEiv_ref-bill-option-title","ref-bill-option-desc":"z8gANQMR_ref-bill-option-desc","ref-bill-option-empty":"c4n62y0z_ref-bill-option-empty","ref-bill-extra":"B+v0ytCg_ref-bill-extra"},P=t(60644),z=t(78184),H="_7hth3Wfp_text",L=t(62132),W=(0,T.memo)((function(e){var n,t,a=e.meta,l=e.model,r=e.multi,o=e.onRef,c=e.data,i=a.pageId,u=a.id,s=a.gridId,d=a.caption;(0,T.useImperativeHandle)(o,(function(){return{showCompany:w,showStaffModal:S}}),[]);var m=(0,T.useState)(!1),v=(0,E.c)(m,2),f=v[0],p=v[1],b=(0,T.useState)({}),h=(0,E.c)(b,2),g=h[0],y=h[1],C=(0,T.useState)(""),k=(0,E.c)(C,2),N=k[0],_=k[1],S=(0,T.useCallback)((function(e){_("user"),y(e),p(!0)}),[]),w=(0,T.useCallback)((function(e){_("org"),y(e),p(!0)}),[]),I=(0,T.useCallback)((function(e){if(e){var n=[e],t=u;s&&(n.push(u),t=s),l.batchInvoke(D.uW,i,t,[n])}}),[i,u,s]),x=(0,L.c)(I);return M().createElement("div",{className:H},r?null==c?void 0:R()(c).call(c,(function(e,n){return M().createElement("span",{key:e.value},window.NOCODE_SHARE_ID?e.label:M().createElement("a",{onClick:function(){return x(e.value)}},e.label),n!==c.length-1?",":"")})):window.NOCODE_SHARE_ID?(null===(n=c[0])||void 0===n?void 0:n.label)||"-":M().createElement("a",{onClick:function(){var e;return x(null===(e=c[0])||void 0===e?void 0:e.value)}},(null===(t=c[0])||void 0===t?void 0:t.label)||"-"),M().createElement(z.c,{visible:f,type:N,data:g,title:l.getControlText(d),onClose:function(){y({}),p(!1)}}))}));W.displayName="RefBillReadonly";var Q=W;function G(e,n){var t=l()(e);if(o()){var a=o()(e);n&&(a=_()(a).call(a,(function(n){return i()(e,n).enumerable}))),t.push.apply(t,a)}return t}function J(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?G(Object(t),!0).forEach((function(n){(0,h.c)(e,n,t[n])})):s()?m()(e,s()(t)):G(Object(t)).forEach((function(n){f()(e,n,i()(t,n))}))}return e}var K=y()("更新下拉数据"),X=y()("设置下拉选中值"),Y=y()("设置下拉选项"),$=y()("根据u指令设置下拉选项"),Z="ref-bill-option",ee={value:"",options:[],valueOptions:[]},ne=function(e,n){var t=n.type,a=n.payload;switch(t){case K:return J(J({},e),a);case X:return J(J({},e),{},{value:a});case Y:return J(J({},e),{},{options:a});case $:return J(J({},e),{},{valueOptions:a})}};var te=M().memo((function(e){var n=e.value,t=e.controlMeta,a=e.onChange,l=e.onSearch,r=(0,T.useContext)(j.m).model,o=(0,T.useReducer)(ne,ee),c=(0,E.c)(o,2),i=c[0],u=c[1],s=(0,T.useState)(0),d=(0,E.c)(s,2),m=d[0],v=d[1],f=i.options,h=i.value,g=(i.label,i.valueOptions),y=t.pageId,C=t.id,N=t.ShowClearButton,S=t.rowIndex,I=t.gridId,x=t.multi,z=t.propsDisplay,H=t.refbilltype,W=(0,U.s)(t),G=W.readonly,$=W.placeholder,te=W.disabled,ae=W.hidden,le=W.required,re=W.rules,oe=1===x,ce=(0,T.useRef)(null),ie=(0,T.useRef)(),ue=(0,T.useRef)(!1),se=(0,T.useCallback)((function(e){if(u({type:X,payload:e}),a)return a(e);me(e)}),[u,a]),de=(0,T.useCallback)((function(e,n){return oe&&ue.current?e:(oe&&!ue.current&&se(e||[]),u({type:X,payload:e}),a?a(e):void me(e))}),[u,a,oe]),me=(0,T.useCallback)((function(e){var n={k:C,r:0,v:e};r.batchInvoke("updateValue",y,"",[],[{},[n]]),r.batchInvoke(D.Se,y,C,[[e,0]])}),[]),ve=(0,T.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";r.batchInvoke(D.gR,y,C,[["%",e,"%",null==h?void 0:k()(h).call(h,0,20),1,0]])}),[h]),fe=(0,L.c)(ve),pe=(0,T.useCallback)((function(e){if(ue.current=e,e){var n=h?Array.isArray(h)?h:[h]:[],t=_()(f).call(f,(function(e){return w()(n).call(n,e.value)}));u({type:Y,payload:t}),v(0),fe()}}),[fe,h,f]),be=(0,T.useCallback)((function(e){if(Array.isArray(e.v)){var n,t=R()(n=e.v).call(n,(function(e){return ke(e)})),a=R()(t).call(t,(function(e){return e.value})),l=oe?a:a.join();u({type:K,payload:{value:l,options:t,valueOptions:t}}),(0,P.isEqual)(h,l)||G||r.batchInvoke(D.gR,y,C,[["%","","%",l||"",1,0]])}else u({type:K,payload:{value:oe?[]:"",options:[]}})}),[h,G]),Ee=(0,T.useCallback)((0,F.Cu)((function(){r.batchInvoke("addNewRef",y,C,[[z]])})),[z,y,C]),he=(0,T.useCallback)((function(e){var n,t=e.pkId,a=oe?O()(n=[]).call(n,(0,b.c)(ie.current.value),[t]):t;se(a),fe()}),[oe,se]),ge=(0,T.useCallback)((function(e){var n,t=null==e||null===(n=e.data)||void 0===n?void 0:R()(n).call(n,(function(e){var n=(0,p.c)(e),t=n[0],a=k()(n).call(n,1),l=t?JSON.parse(t):{};return J(J({},ke(a)),{},{disabled:"disabled"===l._state_})}));u({type:Y,payload:t}),v(1)}),[v]),ye=(0,T.useCallback)((function(e){var n,t,a=e[0],l=a.methodname,r=a.args;switch(l){case D.Ex:ge(r[0]);break;case D.kT:be({v:r[0]});break;case D.Tb:null===(n=ce.current)||void 0===n||n.showStaffModal(r[0]);break;case D.X3:null===(t=ce.current)||void 0===t||t.showCompany(r[0]);break;case D.c$:he(r[0])}}),[be,v,ge]),Ce=(0,T.useCallback)((function(e){var n=e.args;n[0].k===C&&n[0].r===S&&ye([e])}),[ye]),ke=(0,T.useCallback)((function(e){var n=(0,p.c)(e),t=n[0],a=n[1],l=k()(n).call(n,2),r=R()(l).call(l,(function(e){return e||"-"}));return{label:a||"-",value:t,des:r.join("｜")}}),[]),Ne=(0,T.useCallback)((function(e){var n=e.label,t=e.des;return M().createElement("div",{className:B[Z]},M().createElement("div",{className:B["".concat(Z,"-title")]},n),t&&M().createElement("div",{className:B["".concat(Z,"-desc")]},t))}),[]),_e=(0,T.useCallback)((function(e,n){return!0}),[]),Se=(0,T.useCallback)((0,F.Cu)((function(e){if(l)return l(e);r.batchInvoke(D.gR,y,C,[["%",e,"%","",1,0]])}),500),[l]);r.useUpdateControlStates(t,be),r.useInvokeControlMethod(t,ye),(0,T.useEffect)((function(){n&&(null==n?void 0:n[0])!==h&&be({k:C,v:n})}),[n]),(0,T.useEffect)((function(){var e,n,t=r.addEventListener(O()(e=O()(n="".concat(D.lN,"-")).call(n,y,"-")).call(e,I),Ce);return function(){null==t||t()}}),[]);var we=(0,T.useMemo)((function(){return h?_()(g).call(g,(function(e){return w()(h).call(h,e.value)})):[]}),[h,g]),Ie=(0,T.useMemo)((function(){if(0===m)return M().createElement("div",{className:B["".concat(Z,"-empty")]},M().createElement(V.Spin,{name:"Spin"}))}),[m]),Re=(0,T.useMemo)((function(){var e;return w()(e=["bos_user","bos_adminorg"]).call(e,H)?null:M().createElement("div",{className:B["ref-bill-extra"]},M().createElement(q.BtnField,{major:!0,type:"text",onClick:Ee,icon:{prefix:"ncicon",type:"zengjia-yuan"}},"新增记录"))}),[H,Ee]);return ae?null:M().createElement(A.c,{controlMeta:t,required:le,rules:re},G?M().createElement(Q,{data:we,multi:oe,onRef:ce,meta:t,model:r}):M().createElement(q.Select,{ref:ie,value:h,renderSearch:!0,multiple:oe,allowClear:N,placeholder:$,disabled:te,options:f||[],onChange:de,onVisibleChange:pe,notFoundContent:Ie,renderOption:Ne,filterOption:_e,onSearch:Se,onConfirm:se,maxTagCount:5,extra:Re}))}))}}]);