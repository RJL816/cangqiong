"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunknocode_component"] = self["webpackChunknocode_component"] || []).push([[28],{

/***/ "./src/control/web/GraphicDisplay/index.tsx":
/*!**************************************************!*\
  !*** ./src/control/web/GraphicDisplay/index.tsx ***!
  \**************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/slicedToArray */ \"../../node_modules/@babel/runtime-corejs3/helpers/esm/slicedToArray.js\");\n/* harmony import */ var kd_libs_react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! kd_libs/react */ \"webpack/container/remote/kd_libs/react\");\n/* harmony import */ var kd_libs_react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(kd_libs_react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _control_hooks__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/control/hooks */ \"./src/control/hooks/index.ts\");\n/* harmony import */ var _constants_sysActionName__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/constants/sysActionName */ \"./src/constants/sysActionName.js\");\n/* harmony import */ var _FieldItemWrapper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../FieldItemWrapper */ \"./src/control/web/FieldItemWrapper/index.tsx\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/utils */ \"./src/utils/index.ts\");\n/* harmony import */ var _base_web_GraphicDisplay__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/base/web/GraphicDisplay */ \"./src/base/web/GraphicDisplay/index.jsx\");\n\n/*\n * @Description:\n * @Author: xiaoman_xie\n * @Date: 2023-05-22 10:39:07\n * @LastEditTime: 2024-06-18 11:20:35\n * @Last Modified by: xiaoman_xie\n */\n\n\n\n\n\n\nvar KDGraphicDisplay = function KDGraphicDisplay(props) {\n  var controlMeta = props.controlMeta;\n  var content = controlMeta.content,\n    marginInfo = controlMeta.margin,\n    autoHeight = controlMeta.autoHeight,\n    defaultHeight = controlMeta.defaultHeight;\n  var _analyzeJSON = (0,_utils__WEBPACK_IMPORTED_MODULE_5__.analyzeJSON)(marginInfo),\n    margin = _analyzeJSON.margin,\n    marginTop = _analyzeJSON.marginTop,\n    marginRight = _analyzeJSON.marginRight,\n    marginBottom = _analyzeJSON.marginBottom,\n    marginLeft = _analyzeJSON.marginLeft;\n  var otherMargin = {\n    marginTop: \"\".concat(marginTop, \"px\"),\n    marginRight: \"\".concat(marginRight, \"px\"),\n    marginBottom: \"\".concat(marginBottom, \"px\"),\n    marginLeft: \"\".concat(marginLeft, \"px\"),\n    width: 'auto'\n  };\n  var marginValue = margin === -1 ? otherMargin : {\n    margin: \"\".concat(margin, \"px\"),\n    width: 'auto'\n  };\n  var _useState = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_1__.useState)(content),\n    _useState2 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useState, 2),\n    value = _useState2[0],\n    setValue = _useState2[1];\n  var fieldItemRef = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_1__.useRef)();\n  var formatContent = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(function (v) {\n    setValue(v);\n  }, []);\n  var updateValue = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(function (args) {\n    formatContent(args.v);\n    if (args.isLoadData === false) {\n      var _fieldItemRef$current;\n      (_fieldItemRef$current = fieldItemRef.current) === null || _fieldItemRef$current === void 0 || _fieldItemRef$current.validateFields('', args.v);\n    }\n  }, [formatContent]);\n\n  // 注册侦听指令逻辑\n  (0,_control_hooks__WEBPACK_IMPORTED_MODULE_2__.useListenControlAction)(_constants_sysActionName__WEBPACK_IMPORTED_MODULE_3__.UPDATE_CONTROL_STATES, controlMeta, updateValue);\n\n  // 处理免登分享中图片链接问题\n  (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(function () {\n    formatContent(content);\n  }, [content]);\n\n  // 基类属性\n  var _useFieldProps = (0,_control_hooks__WEBPACK_IMPORTED_MODULE_2__.useFieldProps)(controlMeta),\n    hidden = _useFieldProps.hidden,\n    required = _useFieldProps.required,\n    rules = _useFieldProps.rules;\n  if (hidden) return null;\n  return /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_FieldItemWrapper__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n    controlMeta: controlMeta,\n    style: margin !== '0' ? marginValue : {},\n    required: required,\n    rules: rules,\n    ref: fieldItemRef\n  }, /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_base_web_GraphicDisplay__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n    content: value,\n    autoHeight: autoHeight,\n    defaultHeight: defaultHeight\n  }));\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (KDGraphicDisplay);\n\n//# sourceURL=webpack://nocode-component/./src/control/web/GraphicDisplay/index.tsx?");

/***/ }),

/***/ "./src/control/web/Image/index.tsx":
/*!*****************************************!*\
  !*** ./src/control/web/Image/index.tsx ***!
  \*****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var kd_libs_react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! kd_libs/react */ \"webpack/container/remote/kd_libs/react\");\n/* harmony import */ var kd_libs_react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(kd_libs_react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _base_web__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/base/web */ \"./src/base/web/index.ts\");\n/* harmony import */ var _utils_context__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/utils/context */ \"./src/utils/context.ts\");\n\n\n\nvar KDImage = function KDImage(props) {\n  var controlMeta = props.controlMeta;\n  var _useContext = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_utils_context__WEBPACK_IMPORTED_MODULE_2__.KDContext),\n    model = _useContext.model;\n  var getConfig = model.getConfig;\n  console.log('KDImage', controlMeta);\n  var imageKey = controlMeta.imageKey,\n    pageId = controlMeta.pageId;\n  var config = getConfig(pageId);\n  return /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_base_web__WEBPACK_IMPORTED_MODULE_1__.Image, {\n    src: config.mobdomainurl + imageKey\n  });\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = ((0,kd_libs_react__WEBPACK_IMPORTED_MODULE_0__.memo)(KDImage));\n\n//# sourceURL=webpack://nocode-component/./src/control/web/Image/index.tsx?");

/***/ }),

/***/ "./src/control/web/RefBillGridView/index.tsx":
/*!***************************************************!*\
  !*** ./src/control/web/RefBillGridView/index.tsx ***!
  \***************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/keys */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/object/keys.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-properties */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/object/define-properties.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-property */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/object/define-property.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _babel_runtime_corejs3_helpers_typeof__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/typeof */ \"../../node_modules/@babel/runtime-corejs3/helpers/esm/typeof.js\");\n/* harmony import */ var _babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/toConsumableArray */ \"../../node_modules/@babel/runtime-corejs3/helpers/esm/toConsumableArray.js\");\n/* harmony import */ var _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/defineProperty */ \"../../node_modules/@babel/runtime-corejs3/helpers/esm/defineProperty.js\");\n/* harmony import */ var _babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/slicedToArray */ \"../../node_modules/@babel/runtime-corejs3/helpers/esm/slicedToArray.js\");\n/* harmony import */ var core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! core-js/modules/es.array.join.js */ \"../../node_modules/core-js/modules/es.array.join.js\");\n/* harmony import */ var core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_join_js__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! core-js/modules/es.function.name.js */ \"../../node_modules/core-js/modules/es.function.name.js\");\n/* harmony import */ var core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ \"../../node_modules/core-js/modules/web.dom-collections.for-each.js\");\n/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/includes */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/instance/includes.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/slice */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/instance/slice.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_16__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/filter */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/instance/filter.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_sort__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/sort */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/instance/sort.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_sort__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_sort__WEBPACK_IMPORTED_MODULE_17__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/instance/map.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_18__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/concat */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/instance/concat.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_19__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_set__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/set */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/set.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_set__WEBPACK_IMPORTED_MODULE_20___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_set__WEBPACK_IMPORTED_MODULE_20__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_index_of__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/index-of */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/instance/index-of.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_index_of__WEBPACK_IMPORTED_MODULE_21___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_index_of__WEBPACK_IMPORTED_MODULE_21__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_instance_replace_all__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js/instance/replace-all */ \"../../node_modules/@babel/runtime-corejs3/core-js/instance/replace-all.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_instance_replace_all__WEBPACK_IMPORTED_MODULE_22___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_instance_replace_all__WEBPACK_IMPORTED_MODULE_22__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_splice__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/splice */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/instance/splice.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_splice__WEBPACK_IMPORTED_MODULE_23___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_splice__WEBPACK_IMPORTED_MODULE_23__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/json/stringify */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/json/stringify.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_24___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_24__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_values__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/values */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/object/values.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_values__WEBPACK_IMPORTED_MODULE_25___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_values__WEBPACK_IMPORTED_MODULE_25__);\n/* harmony import */ var kd_libs_react__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! kd_libs/react */ \"webpack/container/remote/kd_libs/react\");\n/* harmony import */ var kd_libs_react__WEBPACK_IMPORTED_MODULE_26___default = /*#__PURE__*/__webpack_require__.n(kd_libs_react__WEBPACK_IMPORTED_MODULE_26__);\n/* harmony import */ var _utils_context__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! @/utils/context */ \"./src/utils/context.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! @/utils */ \"./src/utils/index.ts\");\n/* harmony import */ var _FieldItemWrapper__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ../FieldItemWrapper */ \"./src/control/web/FieldItemWrapper/index.tsx\");\n/* harmony import */ var _base_web__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! @/base/web */ \"./src/base/web/index.ts\");\n/* harmony import */ var _constants_sysActionName__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! @/constants/sysActionName */ \"./src/constants/sysActionName.js\");\n/* harmony import */ var _refBillConstants__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./refBillConstants */ \"./src/control/web/RefBillGridView/refBillConstants.ts\");\n/* harmony import */ var _refBillReducer__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./refBillReducer */ \"./src/control/web/RefBillGridView/refBillReducer.ts\");\n/* harmony import */ var _OperatorFields__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./OperatorFields */ \"./src/control/web/RefBillGridView/OperatorFields.tsx\");\n/* harmony import */ var _control_hooks_useFieldProps__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! @/control/hooks/useFieldProps */ \"./src/control/hooks/useFieldProps.tsx\");\n/* harmony import */ var _utils_showUserOrOrgInfo__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! @/utils/showUserOrOrgInfo */ \"./src/utils/showUserOrOrgInfo.tsx\");\n\n\n\n\n\n\n\n\n\n\nfunction ownKeys(e, r) { var t = _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0___default()(e); if ((_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1___default())) { var o = _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1___default()(e); r && (o = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_10___default()(o).call(o, function (r) { return _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2___default()(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { (0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(e, r, t[r]); }) : (_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_3___default()) ? _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_4___default()(e, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_3___default()(t)) : ownKeys(Object(t)).forEach(function (r) { _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_5___default()(e, r, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2___default()(t, r)); }); } return e; }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// import { ReadonlyText } from '@/control/common'\n\n\n// import NoData from '@/base/common/Nodata'\n\n\n\n\n// import EmptyDataImg from '@@/assets/images/empty_data.png'\n// import { Spin } from '@kdcloudjs/kdesign'\n\n\n\n\n// import RefBillReadonly from './RefBillReadonly'\n\n/**\n * 关联单据-KD层\n * @param props\n * @returns\n */\nvar KDRefBillGridView = function KDRefBillGridView(props) {\n  var meta = props.controlMeta,\n    invokeData = props.invokeData,\n    handleChange = props.onChange;\n  var _useContext = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_26__.useContext)(_utils_context__WEBPACK_IMPORTED_MODULE_27__.KDContext),\n    model = _useContext.model;\n  var _useReducer = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_26__.useReducer)(_refBillReducer__WEBPACK_IMPORTED_MODULE_33__.reducer, _refBillReducer__WEBPACK_IMPORTED_MODULE_33__.initState),\n    _useReducer2 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(_useReducer, 2),\n    state = _useReducer2[0],\n    dispatch = _useReducer2[1];\n  var _useState = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_26__.useState)(0),\n    _useState2 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(_useState, 2),\n    selectStatus = _useState2[0],\n    setSelectStatus = _useState2[1];\n  var _useState3 = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_26__.useState)([]),\n    _useState4 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(_useState3, 2),\n    sorts = _useState4[0],\n    setSorts = _useState4[1];\n  // const [searchKeywords, setSearchKeywords] = useState('')\n\n  // const selectText = useRef(['', 'loading', '暂无数据']) // 没内容时显示的文本\n  var pageId = meta.pageId,\n    id = meta.id,\n    dataRange = meta.dataRange,\n    propsDisplay = meta.propsDisplay,\n    dispSelected = meta.dispSelected,\n    refbilltype = meta.refbilltype;\n  var _useFieldProps = (0,_control_hooks_useFieldProps__WEBPACK_IMPORTED_MODULE_35__.useFieldProps)(meta),\n    readonly = _useFieldProps.readonly,\n    placeholder = _useFieldProps.placeholder,\n    disabled = _useFieldProps.disabled,\n    hidden = _useFieldProps.hidden,\n    required = _useFieldProps.required,\n    rules = _useFieldProps.rules;\n  var selectDisplay = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_26__.useRef)((propsDisplay === null || propsDisplay === void 0 ? void 0 : propsDisplay.split(',')) || []);\n  var dropDownVisible = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_26__.useRef)(false);\n  var baseUrl = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_26__.useRef)({\n    attachment: model.getFileServer('attachment'),\n    // 附件服务器地址\n    picture: model.getFileServer('picture') // 图片服务器地址\n  });\n  var store = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_26__.useRef)(state);\n  var disabledStatus = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_26__.useRef)(readonly || disabled);\n  // const refBillText = useRef<any>(null)\n  // const selectKeys = useRef<any>([]) // 利用\n  var isF7Show = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_26__.useRef)(false); // 标记当前是否打开modal弹窗\n\n  (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_26__.useEffect)(function () {\n    disabledStatus.current = readonly || disabled;\n  }, [readonly, disabled]);\n\n  // 请求参数\n  var params = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_26__.useRef)({\n    pageNum: 1,\n    pageSize: 10\n  });\n  // 缓存F7请求参数\n  var f7Params = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_26__.useRef)({\n    key: '',\n    filter: '',\n    pageNum: 1,\n    pageSize: 10,\n    sort: ''\n  });\n  var isMulti = meta.multi === 1; // 是否多选\n\n  var CellRender = _base_web__WEBPACK_IMPORTED_MODULE_30__.DataGrid.CellRender;\n  var showAddRecord = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_26__.useMemo)(function () {\n    var _context;\n    return !_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_15___default()(_context = ['bos_user', 'bos_adminorg']).call(_context, refbilltype);\n  }, [refbilltype]);\n\n  /**\n   * 选项数据格式化\n   */\n  var formateData = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_26__.useCallback)(function (item) {\n    var arr = (item === null || item === void 0 ? void 0 : _babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_16___default()(item).call(item, 2)) || [];\n    arr = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_10___default()(arr).call(arr, function (item) {\n      return item;\n    });\n    var des = arr.length > 0 ? arr.join('｜') : '-';\n    return {\n      label: item[1] || '-',\n      value: item[0],\n      des: des\n    };\n  }, []);\n\n  /**\n   * 同步更新到服务器\n   */\n  var updateServerValue = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_26__.useCallback)(function (v) {\n    // const val = isMulti ? v.join() : v\n    if (handleChange) return handleChange(v);\n    var data = {\n      k: id,\n      r: 0,\n      v: v\n    };\n    model.batchInvoke(_constants_sysActionName__WEBPACK_IMPORTED_MODULE_31__.UPDATE_VALUE, pageId, '', [], [{}, [data]]);\n    model.batchInvoke(_constants_sysActionName__WEBPACK_IMPORTED_MODULE_31__.SET_ITEM_BY_ID_FROM_CLIENT, pageId, id, [[v, 0]]);\n  }, [handleChange]);\n\n  /**\n   * 数据变更\n   */\n  var onChange = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_26__.useCallback)(function (v, option) {\n    // console.log('onChange', v, option, state.options)\n    var data = v ? isMulti ? v : [v] : [];\n    var label = [];\n    state.options.forEach(function (item) {\n      _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_15___default()(data).call(data, item.value) && label.push(item.label);\n    });\n    dispatch({\n      type: _refBillConstants__WEBPACK_IMPORTED_MODULE_32__.SET_VALUE,\n      payload: {\n        value: v || (isMulti ? [] : ''),\n        selectedKeys: data\n      }\n    });\n    if (!isMulti || isMulti && !dropDownVisible.current) updateServerValue(data); // 单选或多选点X时\n  }, [state.options, isMulti, updateServerValue]);\n\n  /**\n   * 模糊搜索\n   */\n  var onSearchAction = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_26__.useCallback)(function (pks) {\n    var _params$current = params.current,\n      pageNum = _params$current.pageNum,\n      pageSize = _params$current.pageSize;\n    model.batchInvoke(_constants_sysActionName__WEBPACK_IMPORTED_MODULE_31__.GET_LIST_QUERY, pageId, id, [[pageSize, pageNum, '', '', '', {\n      showType: 'list',\n      pks: pks\n    }]]);\n  }, []);\n  /**\n   * 页码切换\n   */\n  var onPageChange = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_26__.useCallback)(function (pageNum, pageSize) {\n    console.log('onPageChange', pageSize, pageNum, state.selectedKeys);\n    params.current.pageNum = pageNum;\n    params.current.pageSize = pageSize;\n    onSearchAction(state.selectedKeys);\n  }, [state.selectedKeys, onSearchAction]);\n\n  /**\n   * F7搜索\n   */\n  var onF7Search = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_26__.useCallback)((0,_utils__WEBPACK_IMPORTED_MODULE_28__.debounce)(function (params) {\n    f7Params.current = _objectSpread(_objectSpread({}, f7Params.current), params);\n    var _f7Params$current = f7Params.current,\n      key = _f7Params$current.key,\n      filter = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_10___default()(_f7Params$current),\n      pageNum = _f7Params$current.pageNum,\n      pageSize = _f7Params$current.pageSize,\n      sort = _babel_runtime_corejs3_core_js_stable_instance_sort__WEBPACK_IMPORTED_MODULE_17___default()(_f7Params$current);\n    model.batchInvoke(_constants_sysActionName__WEBPACK_IMPORTED_MODULE_31__.GET_LIST_QUERY, pageId, id, [[pageSize, pageNum, key, filter, sort]]);\n  }), [pageId, id]);\n\n  /**\n   * 点击更多图标\n   */\n  var onMoreClick = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_26__.useCallback)(function () {\n    if (readonly || disabled) return;\n    isF7Show.current = true;\n    onF7Search({});\n    model.batchInvoke(_constants_sysActionName__WEBPACK_IMPORTED_MODULE_31__.GET_LIST_CONFIG, pageId, id, [[]]);\n  }, [readonly, disabled, onF7Search]);\n  /**\n   * F7清空\n   */\n  var onF7Clean = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_26__.useCallback)(function () {\n    // console.log('onF7Clean')\n    dispatch({\n      type: _refBillConstants__WEBPACK_IMPORTED_MODULE_32__.CLEAN_SELECTED\n    });\n  }, [dispatch]);\n\n  /**\n   * 下拉显示隐藏-回调\n   */\n  // const onVisibleChange = useCallback((visible:boolean) => {\n  //   dropDownVisible.current = visible\n  //   if (visible) {\n  //     setSelectStatus(1)\n  //     onSearchAction()\n  //   }\n  //   if (isMulti && !visible) { // 多选时隐藏弹窗时更新值\n  //     updateServerValue(state.value)\n  //   }\n  // }, [state.value, onSearchAction, updateServerValue, isMulti])\n\n  /**\n   * 添加数据后，指令刷新F7弹窗数据\n   */\n  var refreshRefList = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_26__.useCallback)(function (info) {\n    var _context2;\n    // console.log('refreshRefList', info)\n    var id = info.pkId;\n    var rowSelected = _objectSpread({}, state.rowSelected);\n    var displayProps = propsDisplay.split(','); // 可显示字段\n    var val = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_18___default()(displayProps).call(displayProps, function (key) {\n      return info[key];\n    });\n    var data = formateData(_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_19___default()(_context2 = [id]).call(_context2, (0,_babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(val)));\n    var keys = new (_babel_runtime_corejs3_core_js_stable_set__WEBPACK_IMPORTED_MODULE_20___default())(state.selectedKeys);\n    var selectedKeys = isMulti ? (0,_babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(keys.add(id)) : [id];\n    rowSelected[id] = data;\n    if (isF7Show.current) {\n      dispatch({\n        type: _refBillConstants__WEBPACK_IMPORTED_MODULE_32__.SET_TABLE_SELECTED_KEYS,\n        payload: {\n          selectedKeys: selectedKeys,\n          rowSelected: rowSelected\n        }\n      });\n      onF7Search({});\n    } else {\n      onSearchAction(selectedKeys);\n      updateServerValue(selectedKeys);\n    }\n  }, [isMulti, propsDisplay, state.selectedKeys, onF7Search, state.rowSelected]);\n  /**\n   * F7过滤条件变更\n   */\n  var onF7FilterChange = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_26__.useCallback)(function (info) {\n    console.log('onF7FilterChange', info);\n    dispatch({\n      type: _refBillConstants__WEBPACK_IMPORTED_MODULE_32__.SET_TABLE_FILTER,\n      payload: info\n    }); // 统一缓存查询条件\n    var filterrows = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_18___default()(info).call(info, function (item) {\n      var compareType = item.compareType,\n        fieldName = item.fieldName,\n        value = item.value;\n      return {\n        compareType: compareType,\n        fieldName: fieldName,\n        value: value\n      };\n    });\n    onF7Search({\n      filter: filterrows\n    });\n  }, [onF7Search, dispatch]);\n\n  /**\n   * F7点关闭弹窗\n   * 还原默认请求参数设置\n   */\n  var onF7Cancel = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_26__.useCallback)(function () {\n    console.log('onF7Cancel');\n    isF7Show.current = false;\n    f7Params.current = {\n      key: '',\n      filter: '',\n      pageNum: 1,\n      pageSize: 10,\n      sort: ''\n    };\n  }, []);\n\n  /**\n   * F7确认\n   */\n  var onF7Ok = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_26__.useCallback)(function () {\n    // console.log('onF7Ok')\n    isF7Show.current = true;\n    var data = state.selectedKeys;\n    dispatch({\n      type: _refBillConstants__WEBPACK_IMPORTED_MODULE_32__.SET_VALUE,\n      payload: {\n        value: isMulti ? data : data.join(),\n        selectedKeys: data\n      }\n    });\n    updateServerValue(data.join());\n    onF7Cancel();\n  }, [state.selectedKeys, updateServerValue, dispatch, onF7Cancel]);\n\n  // 数据排序\n  var onF7Sort = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_26__.useCallback)(function (number, key) {\n    console.log('onF7Sort', number, key);\n    // const sort = { ...store.current.colSort }\n    var sort = {};\n    if (key === 0) {\n      // 不排序时去除参数\n      delete sort[number];\n    } else {\n      var _context3;\n      // 添加参数，拼接字符串\n      var orderBy = key === -1 ? 'desc' : '';\n      sort[number] = _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_19___default()(_context3 = \"\".concat(number)).call(_context3, orderBy ? ' ' + orderBy : '');\n    }\n    onF7Search({\n      sort: sort[number] || ''\n    });\n    setSorts([{\n      number: number,\n      isAsc: key === 1\n    }]);\n    dispatch({\n      type: _refBillConstants__WEBPACK_IMPORTED_MODULE_32__.SET_TABLE_COL_SORT,\n      payload: sort\n    });\n  }, [onF7Search, setSorts, dispatch]);\n\n  // 关键字搜索\n  var onF7SearchAction = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_26__.useCallback)(function (key) {\n    console.log('onF7SearchAction', key);\n    onF7Search({\n      key: key || ''\n    });\n  }, [onF7Search]);\n  /**\n   * F7页码变更\n   */\n  var onF7PageChange = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_26__.useCallback)(function (pageNum, pageSize) {\n    onF7Search({\n      pageNum: pageNum,\n      pageSize: pageSize\n    });\n  }, [onF7Search]);\n\n  /**\n   * F7单个删除已选\n   */\n  var onF7DelSelect = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_26__.useCallback)(function (info) {\n    // console.log('onF7DelSelect', info)\n    var rowSelected = _objectSpread({}, state.rowSelected);\n    var selectedKeys = new (_babel_runtime_corejs3_core_js_stable_set__WEBPACK_IMPORTED_MODULE_20___default())(state.selectedKeys);\n    // const selectedKeys = state.selectedKeys.filter((item:any) => item !== info.value)\n    info.forEach(function (item) {\n      delete rowSelected[item];\n      selectedKeys.delete(item);\n    });\n    // const index = state.tableData.rows.findIndex((item:any) => item.id === info.value)\n    // const selectedKeys:any = index > -1 ? (state.selectedKeys.filter((item:string) => Number(item) !== index)) : state.selectedKeys\n    dispatch({\n      type: _refBillConstants__WEBPACK_IMPORTED_MODULE_32__.SET_TABLE_ROW_SELECTED,\n      payload: {\n        rowSelected: rowSelected,\n        selectedKeys: (0,_babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(selectedKeys)\n      }\n    });\n  }, [state.rowSelected, state.selectedKeys, dispatch]);\n\n  /**\n   * F7选择变化时\n   */\n  var onF7RowSelectChange = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_26__.useCallback)(function (selectedRowKeys, actionRowkey, actionRowskeys, action) {\n    var _context4;\n    var tableData = state.tableData;\n    if (action === 'uncheck' || action === 'uncheck-all') {\n      onF7DelSelect(actionRowskeys);\n    }\n    var rowData = tableData === null || tableData === void 0 ? void 0 : _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_10___default()(_context4 = tableData.rows).call(_context4, function (item) {\n      return _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_15___default()(selectedRowKeys).call(selectedRowKeys, item.id);\n    }); // 获取当前已选中的数据\n    var obj = {};\n    rowData.forEach(function (data) {\n      // const data = tableData.rows[item]\n      var id = data.id,\n        _title_ = data._title_;\n      if (_title_) {\n        var _context5;\n        // 兼容数据\n        var index = _babel_runtime_corejs3_core_js_stable_instance_index_of__WEBPACK_IMPORTED_MODULE_21___default()(_title_).call(_title_, '|');\n        var label = _title_.substring(0, index);\n        var des = _babel_runtime_corejs3_core_js_instance_replace_all__WEBPACK_IMPORTED_MODULE_22___default()(_context5 = _title_.substr(index + 1)).call(_context5, '|', '｜');\n        obj[data.id] = {\n          value: id,\n          label: label,\n          des: des\n        };\n      } else {\n        var arr = [data.id];\n        selectDisplay.current.forEach(function (item) {\n          arr.push(data[item]);\n        });\n        obj[data.id] = formateData(arr);\n      }\n    });\n    dispatch({\n      type: _refBillConstants__WEBPACK_IMPORTED_MODULE_32__.UPDATE_TABLE_SELECTED_AND_KEYS,\n      payload: {\n        selectedKeys: selectedRowKeys,\n        rowSelected: obj\n      }\n    });\n  }, [state.tableData, formateData, onF7DelSelect]);\n\n  /**\n   * F7弹窗 - 筛选面板\n   * @param info 列信息\n   * @param filters 当前已过滤条件\n   */\n  var onF7ColHeadFilterVisibleChange = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_26__.useCallback)(function (info, filters) {\n    console.log('onF7ColHeadFilterVisibleChange', info, filters);\n    // model.batchInvoke(GET_FILTER_ITEM_LOOK, pageId, id, [[info.fieldName]])\n    model.batchInvoke(_constants_sysActionName__WEBPACK_IMPORTED_MODULE_31__.GET_HEAD_FIELD_FILTER_ITEM, pageId, id, [[info.fieldName, filters]]);\n  }, [pageId, id]);\n\n  /**\n   * 返回已选在当前数据下标集合，使用primaryKey之后不需要每次遍历\n   * @param data F7表格数据\n   * @param selected 已选数据\n   * @returns []\n   */\n  // const getSelectedKeys = (data:any[], selected:any[]) => {\n  //   const keys:string[] = []\n  //   if (!data || data.length === 0) return keys\n  //   data.forEach((item:any, index:number) => {\n  //     console.log(selected[item.id], selected)\n  //     if (selected[item.id]) {\n  //       keys.push(String(index))\n  //     }\n  //   })\n  //   return keys\n  // }\n\n  // 下载\n  var onDownLoad = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_26__.useCallback)(function (info) {\n    var _context6;\n    var config = model.getConfig(pageId);\n    // const file = uploadRef.current.get(info.uid)\n    var options = {\n      params: '1',\n      appId: config.appId,\n      fId: config.formId,\n      fileName: info.name\n    };\n    var url = _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_19___default()(_context6 = \"\".concat(info.url, \"&kd_cs_ticket=\")).call(_context6, model.Global.token);\n    (0,_utils__WEBPACK_IMPORTED_MODULE_28__.downloadFile)(url, options);\n  }, []);\n\n  // F7弹窗 - 列头筛选\n  var onF7TitleFilterShow = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_26__.useCallback)(function (number, filters) {\n    // onF7ColHeadFilterVisibleChange({ fieldName: number })\n    model.batchInvoke(_constants_sysActionName__WEBPACK_IMPORTED_MODULE_31__.GET_HEAD_FIELD_FILTER_ITEM, pageId, id, [[number, filters]]);\n  }, [pageId, id]);\n\n  // F7筛选弹窗-确定\n  var onF7TitleFilterConfirm = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_26__.useCallback)(function (row, number) {\n    var _data$filter, _context7;\n    console.log('onF7TitleFilterConfirm', row, number);\n    row.forEach(function (item, index) {\n      item.value.forEach(function (filter) {\n        if (filter.type === 'all') {\n          // 去除全选\n          _babel_runtime_corejs3_core_js_stable_instance_splice__WEBPACK_IMPORTED_MODULE_23___default()(row).call(row, index, 1);\n        }\n      });\n    });\n    var data = (state === null || state === void 0 ? void 0 : state.tableFilterData) || [];\n    var other = (data === null || data === void 0 || (_data$filter = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_10___default()(data)) === null || _data$filter === void 0 ? void 0 : _data$filter.call(data, function (item) {\n      return item.fieldName !== number;\n    })) || [];\n    var filters = _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_19___default()(_context7 = []).call(_context7, (0,_babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(row), (0,_babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(other));\n    // dispatch({ type: SET_TABLE_FILTER, payload: filters })\n    onF7FilterChange(filters);\n  }, [onF7FilterChange, state.tableFilterData]);\n\n  // 格式化表格列数据\n  var formateF7Column = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_26__.useCallback)(function (item) {\n    var align = item.type === 'nocodedecimalfield' ? 'right' : ''; // 标题对齐方式\n    var titleProps = {\n      // 列头数据\n      align: align,\n      // active: false,\n      // filter: state.colFilter[item.number],\n      title: item.name,\n      number: item.number,\n      type: item.type\n    };\n    return {\n      code: item.number,\n      title: /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_26___default().createElement(_base_web__WEBPACK_IMPORTED_MODULE_30__.TableTitle, titleProps),\n      width: 200,\n      align: align,\n      lock: false,\n      render: function render(value, record, rowIndex) {\n        var _context8;\n        if (_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_15___default()(_context8 = ['nocodeimageuploadfield', 'nocodeattachmentuploadfield', 'nocodeselectitemfield']).call(_context8, item.type)) {\n          var newValue = value;\n          if (item.type === 'nocodeselectitemfield') {\n            newValue = Array.isArray(value) ? _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_18___default()(value).call(value, function (item) {\n              return _objectSpread(_objectSpread({}, item), {}, {\n                label: model.getControlText(item.name)\n              });\n            }) : [];\n          }\n          return /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_26___default().createElement(CellRender, {\n            readOnly: true,\n            type: item.type,\n            baseUrl: baseUrl.current,\n            onDownLoad: onDownLoad,\n            value: newValue,\n            record: record,\n            rowIndex: rowIndex\n          });\n        } else {\n          // 兼容苍穹的人员组织数据\n          if (value === null) return '';\n          if (typeof value === 'boolean') {\n            return value ? '是' : '否';\n          }\n          if ((0,_babel_runtime_corejs3_helpers_typeof__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(value) === 'object') return _babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_24___default()(value);\n          return value;\n        }\n      }\n    };\n  }, [onF7Sort, onDownLoad]);\n\n  // 编辑F7弹窗记录\n  var editF7Record = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_26__.useCallback)(function (_ref) {\n    var recordId = _ref.id;\n    // console.log('editF7Record', recordId)\n    model.batchInvoke(_constants_sysActionName__WEBPACK_IMPORTED_MODULE_31__.EIDT_REF_BILL_RECORD, pageId, id, [[recordId, propsDisplay]]);\n  }, [pageId, id, propsDisplay]);\n\n  // 取消已选记录\n  var deleteSelected = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_26__.useCallback)(function (_ref2) {\n    var _store$current$select;\n    var recordId = _ref2.id;\n    // console.log('editF7Record', recordId)\n    var ids = (_store$current$select = store.current.selectedKeys) === null || _store$current$select === void 0 ? void 0 : _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_10___default()(_store$current$select).call(_store$current$select, function (key) {\n      return key !== recordId;\n    });\n    onChange(isMulti ? ids : ids.join(), null);\n    onSearchAction(ids);\n  }, [onChange, isMulti]);\n\n  /**\n   * 点击操作列按钮\n   */\n  var onOperatorClick = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_26__.useCallback)(function (key, record) {\n    switch (key) {\n      case 'delete':\n        deleteSelected(record);\n        break;\n      case 'detail':\n        model.batchInvoke(_refBillConstants__WEBPACK_IMPORTED_MODULE_32__.SHOW_REF_BILL_INFO, pageId, id, [[record.id]]);\n        break;\n      case 'edit':\n        editF7Record(record);\n        break;\n    }\n  }, [deleteSelected, editF7Record, pageId, id]);\n\n  /**\n   * F7配置数据格式化\n   */\n  var formateF7Config = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_26__.useCallback)(function (info, isF7) {\n    var config = info.listItemConfig;\n    var param = isF7 ? f7Params.current : params.current;\n    var count = param.pageSize * (param.pageNum - 1);\n    var column = [{\n      code: 'No',\n      title: '序号',\n      width: 60,\n      align: 'center',\n      lock: true,\n      render: function render(value, record, rowIndex) {\n        return count + rowIndex + 1;\n      }\n    }];\n    var data = [];\n    config.forEach(function (item) {\n      // const align = item.type === 'nocodedecimalfield' ? 'right' : '' // 标题对齐方式\n      column.push(formateF7Column(item));\n      data.push({\n        key: item.number,\n        title: item.name\n      });\n    });\n    if (showAddRecord && isF7 || !isF7) {\n      column.push({\n        code: 'operator',\n        title: '操作',\n        width: 100,\n        lock: true,\n        render: function render(value, record, rowIndex) {\n          return /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_26___default().createElement(_OperatorFields__WEBPACK_IMPORTED_MODULE_34__[\"default\"], {\n            isF7: isF7,\n            onItemClick: onOperatorClick,\n            disabled: disabledStatus.current,\n            record: record\n          });\n        }\n      });\n    }\n    return _objectSpread(_objectSpread({}, info), {}, {\n      data: data,\n      column: column,\n      editF7Record: editF7Record\n    });\n  }, [showAddRecord, readonly, disabled, onOperatorClick, editF7Record]);\n\n  /**\n   * 关联表单表格模式表格--列头设置\n   */\n  var setRefBillTableConfig = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_26__.useCallback)(function (info) {\n    var _ref3 = formateF7Config(info.data.rows[0], false) || {},\n      column = _ref3.column;\n    console.log('setRefBillTableConfig', column);\n    dispatch({\n      type: _refBillConstants__WEBPACK_IMPORTED_MODULE_32__.UPDATE_REFBILL_TABLE_CONFIG,\n      payload: column\n    });\n  }, []);\n\n  // 更新F7表格配置信息，含已选数据，表格列设置，表格筛选数据\n  var setTableListConfig = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_26__.useCallback)(function (info) {\n    var rowSelected = {};\n    var selectedKeys = [];\n    info.selected.forEach(function (item) {\n      rowSelected[item[0]] = formateData(item);\n      selectedKeys.push(item[0]);\n    });\n    var config = formateF7Config(info.data.rows[0], true);\n    dispatch({\n      type: _refBillConstants__WEBPACK_IMPORTED_MODULE_32__.UPDATE_TABLE_CONFIG,\n      payload: {\n        tableConfig: info.data.rows[0],\n        tableColumn: config.column,\n        tableColumnData: config.data,\n        // tableFilterData: info.data.rows[0].configuredFilterItems, // 不用保存筛选条件\n        rowSelected: rowSelected,\n        selectedKeys: selectedKeys\n      }\n    });\n  }, [formateF7Config, dispatch]);\n\n  /**\n   * F7添加关联表单记录\n   */\n  var onF7AddRecord = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_26__.useCallback)((0,_utils__WEBPACK_IMPORTED_MODULE_28__.debounce)(function () {\n    // propsDisplay\n    model.batchInvoke('addNewRef', pageId, id, [[propsDisplay]]);\n  }), [propsDisplay, pageId, id]);\n\n  /**\n   * 后台发的U指令\n   */\n  var updateValue = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_26__.useCallback)(function (info) {\n    if (info !== null && info !== void 0 && info.v) {\n      var _context9;\n      console.log('updateValue', info);\n      var vals = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_18___default()(_context9 = info.v).call(_context9, function (v) {\n        return v[0];\n      });\n      onSearchAction(vals);\n    } else {\n      // dispatch({ type: UPDATE_SELECT_DATA, payload: { dataSource: [], selectedKeys: [] } })\n      onSearchAction([]);\n    }\n  }, [dispatch, onSearchAction, formateData]);\n\n  /**\n   * 自定义指令处理\n   */\n  var invokeMethod = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_26__.useCallback)(function (info) {\n    var _args$, _args$2, _args$0$args, _args$0$args2;\n    if (!info) return;\n    console.log('invokeMethod', info);\n    var _info$ = info[0],\n      methodname = _info$.methodname,\n      args = _info$.args;\n    switch (methodname) {\n      case _constants_sysActionName__WEBPACK_IMPORTED_MODULE_31__.SET_LOOK_UP_LIST_VALUE:\n        dispatch({\n          type: _refBillConstants__WEBPACK_IMPORTED_MODULE_32__.SET_OPTIONS,\n          payload: (_args$ = args[0]) === null || _args$ === void 0 || (_args$ = _args$.data) === null || _args$ === void 0 ? void 0 : _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_18___default()(_args$).call(_args$, function (item) {\n            return formateData(item);\n          })\n        });\n        setSelectStatus(((_args$2 = args[0]) === null || _args$2 === void 0 || (_args$2 = _args$2.data) === null || _args$2 === void 0 ? void 0 : _args$2.length) > 0 ? 0 : 2);\n        break;\n      case _constants_sysActionName__WEBPACK_IMPORTED_MODULE_31__.SET_LIST_QUERY:\n        // 获取列表\n        if (((_args$0$args = args[0].args) === null || _args$0$args === void 0 || (_args$0$args = _args$0$args[5]) === null || _args$0$args === void 0 ? void 0 : _args$0$args.showType) === 'list') {\n          // 表格模式关联表单表格列表数据\n          console.log('SET_LIST_QUERY', args);\n          dispatch({\n            type: _refBillConstants__WEBPACK_IMPORTED_MODULE_32__.SET_REFBILL_TABLE_DATA,\n            payload: args[0].data\n          });\n        } else {\n          // F7弹窗表格数据\n          dispatch({\n            type: _refBillConstants__WEBPACK_IMPORTED_MODULE_32__.SET_TABLE_DATA,\n            payload: args[0]\n          });\n        }\n        break;\n      case _constants_sysActionName__WEBPACK_IMPORTED_MODULE_31__.SET_LIST_CONFIG:\n        // 获取配置信息\n        if (((_args$0$args2 = args[0].args) === null || _args$0$args2 === void 0 || (_args$0$args2 = _args$0$args2[0]) === null || _args$0$args2 === void 0 ? void 0 : _args$0$args2.showType) === 'list') {\n          console.log('SET_LIST_CONFIG', args);\n          setRefBillTableConfig(args[0]);\n        } else {\n          var _args$3;\n          // F7弹窗表格数据\n          args[0].selected = ((_args$3 = args[0]) === null || _args$3 === void 0 ? void 0 : _args$3.selected) || [];\n          setTableListConfig(args[0]);\n        }\n        break;\n      case _constants_sysActionName__WEBPACK_IMPORTED_MODULE_31__.SET_FILTER_ITEM_LOOK:\n        // 暂时废弃\n        // console.log('SET_FILTER_ITEM_LOOK', args[0].data.rows)\n        dispatch({\n          type: _refBillConstants__WEBPACK_IMPORTED_MODULE_32__.SET_TABLE_COL_FILTER,\n          payload: {\n            key: args[0].args[0],\n            value: args[0].data.rows[0]\n          }\n        });\n        // dispatch({ type: SET_TABLE_COL_FILTER, payload: { [args[0].args[0]]: args[0].data.rows[0] } })\n        // model.emitEvent(pageId + id + SET_TABLE_COLUMN_FILTER, { key: args[0].args[0], value: args[0].data.rows[0] })\n        break;\n      case _constants_sysActionName__WEBPACK_IMPORTED_MODULE_31__.SET_HEAD_FIELD_FILTER_ITEM:\n        console.log('SET_HEAD_FIELD_FILTER_ITEM', args[0].data.rows[0]);\n        dispatch({\n          type: _refBillConstants__WEBPACK_IMPORTED_MODULE_32__.SET_TABLE_COL_FILTER,\n          payload: {\n            key: args[0].args[0],\n            value: args[0].data.rows[0]\n          }\n        });\n        break;\n      case _constants_sysActionName__WEBPACK_IMPORTED_MODULE_31__.REFBILL_RESET_VALUE:\n        // console.log('REFBILL_RESET_VALUE', args)\n        updateValue({\n          v: args[0]\n        });\n        break;\n      case _refBillConstants__WEBPACK_IMPORTED_MODULE_32__.SHOW_REF_BILL_USER_INFO:\n        // console.log('updateUserInfo', args)\n        (0,_utils_showUserOrOrgInfo__WEBPACK_IMPORTED_MODULE_36__.showStaffModal)(args[0]);\n        break;\n      case _refBillConstants__WEBPACK_IMPORTED_MODULE_32__.SHOW_REF_BILL_ORG_INFO:\n        // console.log('updateOrgInfo', args)\n        (0,_utils_showUserOrOrgInfo__WEBPACK_IMPORTED_MODULE_36__.showCompany)(args[0]);\n        break;\n      case _constants_sysActionName__WEBPACK_IMPORTED_MODULE_31__.REFBILL_REFRESH_REF_LIST:\n        // console.log('REFBILL_REFRESH_REF_LIST', args)\n        refreshRefList(args[0]);\n        break;\n    }\n  }, [refreshRefList, updateValue, setSelectStatus, dispatch, setTableListConfig, setRefBillTableConfig]);\n  model.useUpdateControlStates(meta, updateValue); // 侦听U指令\n  model.useInvokeControlMethod(meta, invokeMethod); // 侦听InvokeControlMethod指令\n\n  (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_26__.useEffect)(function () {\n    // 监听平台指令返回来的数据\n    invokeMethod(invokeData);\n  }, [invokeData]);\n  (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_26__.useEffect)(function () {\n    // *******将state赋给ref，以便将值穿透给子组件\n    store.current = state;\n  }, [state]);\n  (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_26__.useEffect)(function () {\n    // 设置初始值\n    updateValue(props.value);\n    // 获取配置信息\n    model.batchInvoke(_constants_sysActionName__WEBPACK_IMPORTED_MODULE_31__.GET_LIST_CONFIG, pageId, id, [[{\n      showType: 'list'\n    }]]);\n  }, []);\n\n  // const refBillProps = {}\n\n  // console.log('KDRefBillGridView', state?.label, state.value)\n  if (hidden) return null;\n  return /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_26___default().createElement(_FieldItemWrapper__WEBPACK_IMPORTED_MODULE_29__[\"default\"], {\n    controlMeta: meta,\n    required: required,\n    rules: rules\n  }, /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_26___default().createElement(_base_web__WEBPACK_IMPORTED_MODULE_30__.RefBillGridView, {\n    dataSource: (state === null || state === void 0 ? void 0 : state.dataSource) || [],\n    disabled: disabled,\n    readOnly: readonly,\n    column: (state === null || state === void 0 ? void 0 : state.column) || []\n    // dataRange={dataRange || {}}\n    ,\n    mode: isMulti ? 'multiple' : 'single'\n    // allowClear={meta?.ShowClearButton}\n    // notFoundContent={notFoundContent}\n    ,\n    tablePrimaryKey: \"id\",\n    tableSorts: sorts,\n    tableColFilter: state === null || state === void 0 ? void 0 : state.colFilter // 多余的属性\n    ,\n    tableData: state === null || state === void 0 ? void 0 : state.tableData,\n    tableConfig: state === null || state === void 0 ? void 0 : state.tableConfig,\n    tableColumn: state === null || state === void 0 ? void 0 : state.tableColumn,\n    tableColumnData: state === null || state === void 0 ? void 0 : state.tableColumnData,\n    tableFilterData: state === null || state === void 0 ? void 0 : state.tableFilterData,\n    tableSelected: state !== null && state !== void 0 && state.rowSelected ? _babel_runtime_corejs3_core_js_stable_object_values__WEBPACK_IMPORTED_MODULE_25___default()(state === null || state === void 0 ? void 0 : state.rowSelected) : [],\n    tableSelectedKeys: (state === null || state === void 0 ? void 0 : state.selectedKeys) || [],\n    showSelected: dispSelected === 1,\n    f7Options: {\n      showAddRecord: showAddRecord,\n      // 人员|组织不显示按钮\n      onAddRecord: onF7AddRecord\n    }\n    // refBillProps={refBillProps}\n    ,\n    onChange: onChange,\n    onPageChange: onPageChange\n    // onVisibleChange={onVisibleChange}\n    ,\n    moreClick: onMoreClick,\n    onF7Search: onF7SearchAction,\n    onF7FilterChange: onF7FilterChange,\n    onF7PageChange: onF7PageChange,\n    onF7Ok: onF7Ok,\n    onF7Cancel: onF7Cancel,\n    onF7Clean: onF7Clean,\n    onF7DelSelect: onF7DelSelect,\n    onF7RowSelectChange: onF7RowSelectChange,\n    f7ColHeadFilter: state.colFilter,\n    onF7ColHeadFilterVisibleChange: onF7ColHeadFilterVisibleChange,\n    onF7Sort: onF7Sort,\n    onF7TitleFilterConfirm: onF7TitleFilterConfirm,\n    onF7TitleFilterShow: onF7TitleFilterShow\n  }));\n};\nKDRefBillGridView.displayName = 'KDRefBillGridView';\n/* harmony default export */ __webpack_exports__[\"default\"] = (kd_libs_react__WEBPACK_IMPORTED_MODULE_26___default().memo(KDRefBillGridView));\n\n//# sourceURL=webpack://nocode-component/./src/control/web/RefBillGridView/index.tsx?");

/***/ }),

/***/ "./src/control/web/RefBillGridView/refBillConstants.ts":
/*!*************************************************************!*\
  !*** ./src/control/web/RefBillGridView/refBillConstants.ts ***!
  \*************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CLEAN_SELECTED: function() { return /* binding */ CLEAN_SELECTED; },\n/* harmony export */   SET_OPTIONS: function() { return /* binding */ SET_OPTIONS; },\n/* harmony export */   SET_REFBILL_TABLE_DATA: function() { return /* binding */ SET_REFBILL_TABLE_DATA; },\n/* harmony export */   SET_TABLE_COL_FILTER: function() { return /* binding */ SET_TABLE_COL_FILTER; },\n/* harmony export */   SET_TABLE_COL_SORT: function() { return /* binding */ SET_TABLE_COL_SORT; },\n/* harmony export */   SET_TABLE_DATA: function() { return /* binding */ SET_TABLE_DATA; },\n/* harmony export */   SET_TABLE_FILTER: function() { return /* binding */ SET_TABLE_FILTER; },\n/* harmony export */   SET_TABLE_ROW_SELECTED: function() { return /* binding */ SET_TABLE_ROW_SELECTED; },\n/* harmony export */   SET_TABLE_SELECTED_KEYS: function() { return /* binding */ SET_TABLE_SELECTED_KEYS; },\n/* harmony export */   SET_VALUE: function() { return /* binding */ SET_VALUE; },\n/* harmony export */   SHOW_REF_BILL_INFO: function() { return /* binding */ SHOW_REF_BILL_INFO; },\n/* harmony export */   SHOW_REF_BILL_ORG_INFO: function() { return /* binding */ SHOW_REF_BILL_ORG_INFO; },\n/* harmony export */   SHOW_REF_BILL_USER_INFO: function() { return /* binding */ SHOW_REF_BILL_USER_INFO; },\n/* harmony export */   UPDATE_REFBILL_TABLE_CONFIG: function() { return /* binding */ UPDATE_REFBILL_TABLE_CONFIG; },\n/* harmony export */   UPDATE_SELECT: function() { return /* binding */ UPDATE_SELECT; },\n/* harmony export */   UPDATE_SELECT_DATA: function() { return /* binding */ UPDATE_SELECT_DATA; },\n/* harmony export */   UPDATE_TABLE_CONFIG: function() { return /* binding */ UPDATE_TABLE_CONFIG; },\n/* harmony export */   UPDATE_TABLE_SELECTED_AND_KEYS: function() { return /* binding */ UPDATE_TABLE_SELECTED_AND_KEYS; }\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_symbol__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/symbol */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/symbol.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_symbol__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_symbol__WEBPACK_IMPORTED_MODULE_0__);\n\nvar UPDATE_SELECT_DATA = _babel_runtime_corejs3_core_js_stable_symbol__WEBPACK_IMPORTED_MODULE_0___default()('更新下拉数据');\nvar SET_VALUE = _babel_runtime_corejs3_core_js_stable_symbol__WEBPACK_IMPORTED_MODULE_0___default()('设置下拉选中值');\nvar SET_OPTIONS = _babel_runtime_corejs3_core_js_stable_symbol__WEBPACK_IMPORTED_MODULE_0___default()('设置下拉选项');\nvar SET_TABLE_DATA = _babel_runtime_corejs3_core_js_stable_symbol__WEBPACK_IMPORTED_MODULE_0___default()('设置F7表格数据');\nvar UPDATE_TABLE_CONFIG = _babel_runtime_corejs3_core_js_stable_symbol__WEBPACK_IMPORTED_MODULE_0___default()('设置F7表格配置信息');\nvar SET_TABLE_COL_FILTER = _babel_runtime_corejs3_core_js_stable_symbol__WEBPACK_IMPORTED_MODULE_0___default()('设置F7表格请求过滤条件');\nvar UPDATE_SELECT = _babel_runtime_corejs3_core_js_stable_symbol__WEBPACK_IMPORTED_MODULE_0___default()('F7单个删除已选');\nvar SET_TABLE_ROW_SELECTED = _babel_runtime_corejs3_core_js_stable_symbol__WEBPACK_IMPORTED_MODULE_0___default()('设置F7表格行选择数据');\nvar UPDATE_TABLE_SELECTED_AND_KEYS = _babel_runtime_corejs3_core_js_stable_symbol__WEBPACK_IMPORTED_MODULE_0___default()('更新F7表格行选择数据和下标');\nvar SET_TABLE_SELECTED_KEYS = _babel_runtime_corejs3_core_js_stable_symbol__WEBPACK_IMPORTED_MODULE_0___default()('设置F7表格行选择数据下标');\nvar CLEAN_SELECTED = _babel_runtime_corejs3_core_js_stable_symbol__WEBPACK_IMPORTED_MODULE_0___default()('F7点击清空按钮');\nvar SET_TABLE_FILTER = _babel_runtime_corejs3_core_js_stable_symbol__WEBPACK_IMPORTED_MODULE_0___default()('设置表格筛选项');\nvar SET_TABLE_COL_SORT = _babel_runtime_corejs3_core_js_stable_symbol__WEBPACK_IMPORTED_MODULE_0___default()('表格列排序');\nvar UPDATE_REFBILL_TABLE_CONFIG = _babel_runtime_corejs3_core_js_stable_symbol__WEBPACK_IMPORTED_MODULE_0___default()('关联表单表格模式列头设置');\nvar SET_REFBILL_TABLE_DATA = _babel_runtime_corejs3_core_js_stable_symbol__WEBPACK_IMPORTED_MODULE_0___default()('关联表单表格模式数据');\nvar SHOW_REF_BILL_INFO = 'showInfo'; // 打开关联的表单详情\nvar SHOW_REF_BILL_USER_INFO = 'showUserInfo'; // 展示用户信息\nvar SHOW_REF_BILL_ORG_INFO = 'showOrgInfo'; // 展示用户信息\n\n//# sourceURL=webpack://nocode-component/./src/control/web/RefBillGridView/refBillConstants.ts?");

/***/ }),

/***/ "./src/control/web/RefBillGridView/refBillReducer.ts":
/*!***********************************************************!*\
  !*** ./src/control/web/RefBillGridView/refBillReducer.ts ***!
  \***********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   initState: function() { return /* binding */ initState; },\n/* harmony export */   reducer: function() { return /* binding */ reducer; }\n/* harmony export */ });\n/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ \"../../node_modules/core-js/modules/web.dom-collections.for-each.js\");\n/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/keys */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/object/keys.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/filter */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/instance/filter.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-properties */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/object/define-properties.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-property */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/object/define-property.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/defineProperty */ \"../../node_modules/@babel/runtime-corejs3/helpers/esm/defineProperty.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/instance/map.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var _utils_immerTools__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @/utils/immerTools */ \"./src/utils/immerTools.ts\");\n/* harmony import */ var _refBillConstants__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./refBillConstants */ \"./src/control/web/RefBillGridView/refBillConstants.ts\");\n\n\n\n\n\n\n\n\n\n\nfunction ownKeys(e, r) { var t = _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_2___default()(e); if ((_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_3___default())) { var o = _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_3___default()(e); r && (o = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_4___default()(o).call(o, function (r) { return _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_5___default()(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { (0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(e, r, t[r]); }) : (_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_6___default()) ? _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_7___default()(e, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_6___default()(t)) : ownKeys(Object(t)).forEach(function (r) { _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_8___default()(e, r, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_5___default()(t, r)); }); } return e; }\n\n\n\nvar initState = {\n  value: [],\n  // 选项值\n  label: '',\n  // 只读文本\n  options: [],\n  // 下拉列表数据\n  column: [],\n  // 表格列头\n  dataSource: [],\n  // 表格数据\n  tableData: {\n    rows: []\n  },\n  // f7表格数据\n  tableConfig: {},\n  // f7表格配置信息\n  tableColumn: [],\n  // f7 表格列设置\n  tableColumnData: [],\n  // f7 表格列数据[{key,title}]\n  tableFilterData: [],\n  // f7 表格过滤数据\n  rowSelected: {},\n  // f7表格行选择\n  selectedKeys: [],\n  // f7表格当前已选\n  colFilter: {},\n  // f7列过滤\n  colSort: {} // f7列排序\n};\nvar reducer = (0,_utils_immerTools__WEBPACK_IMPORTED_MODULE_11__[\"default\"])(function (state, action) {\n  var _context;\n  var type = action.type,\n    payload = action.payload;\n  switch (type) {\n    case _refBillConstants__WEBPACK_IMPORTED_MODULE_12__.UPDATE_SELECT_DATA:\n      // 主要用于U指令更新\n      state.value = payload.value;\n      state.options = payload.options;\n      // state.label = payload.label\n      state.selectedKeys = payload.selectedKeys;\n      break;\n    case _refBillConstants__WEBPACK_IMPORTED_MODULE_12__.SET_VALUE:\n      state.value = payload.value;\n      // state.label = payload.label\n      state.selectedKeys = payload.selectedKeys;\n      break;\n    case _refBillConstants__WEBPACK_IMPORTED_MODULE_12__.SET_OPTIONS:\n      state.options = payload;\n      break;\n    case _refBillConstants__WEBPACK_IMPORTED_MODULE_12__.SET_REFBILL_TABLE_DATA:\n      // state.tableFilterData = payload.args[3] // 从请求的参数里保存筛选参数, 不再从这里拿\n      state.dataSource = payload;\n      state.selectedKeys = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_10___default()(_context = payload.rows).call(_context, function (row) {\n        return row.id;\n      });\n      break;\n    case _refBillConstants__WEBPACK_IMPORTED_MODULE_12__.SET_TABLE_DATA:\n      // state.tableFilterData = payload.args[3] // 从请求的参数里保存筛选参数, 不再从这里拿\n      state.tableData = payload.data;\n      break;\n    case _refBillConstants__WEBPACK_IMPORTED_MODULE_12__.UPDATE_REFBILL_TABLE_CONFIG:\n      // state.tableConfig = payload.tableConfig\n      // state.rowSelected = payload.rowSelected\n      state.column = payload;\n      // state.tableColumnData = payload.tableColumnData\n      // state.selectedKeys = payload.selectedKeys\n      // state.tableFilterData = payload.tableFilterData // 返回的内容里没有tableFilterData\n      break;\n    case _refBillConstants__WEBPACK_IMPORTED_MODULE_12__.UPDATE_TABLE_CONFIG:\n      state.tableConfig = payload.tableConfig;\n      state.rowSelected = payload.rowSelected;\n      state.tableColumn = payload.tableColumn;\n      state.tableColumnData = payload.tableColumnData;\n      state.selectedKeys = payload.selectedKeys;\n      // state.tableFilterData = payload.tableFilterData // 返回的内容里没有tableFilterData\n      break;\n    case _refBillConstants__WEBPACK_IMPORTED_MODULE_12__.SET_TABLE_FILTER:\n      // 自行维护筛选数据\n      state.tableFilterData = payload;\n      break;\n    case _refBillConstants__WEBPACK_IMPORTED_MODULE_12__.SET_TABLE_ROW_SELECTED:\n      state.rowSelected = payload.rowSelected;\n      state.selectedKeys = payload.selectedKeys;\n      break;\n    case _refBillConstants__WEBPACK_IMPORTED_MODULE_12__.CLEAN_SELECTED:\n      state.rowSelected = [];\n      state.selectedKeys = [];\n      break;\n    case _refBillConstants__WEBPACK_IMPORTED_MODULE_12__.SET_TABLE_SELECTED_KEYS:\n      state.selectedKeys = payload.selectedKeys;\n      state.rowSelected = payload.rowSelected;\n      break;\n    case _refBillConstants__WEBPACK_IMPORTED_MODULE_12__.UPDATE_TABLE_SELECTED_AND_KEYS:\n      state.selectedKeys = payload.selectedKeys;\n      state.rowSelected = _objectSpread(_objectSpread({}, state.rowSelected), payload.rowSelected);\n      break;\n    case _refBillConstants__WEBPACK_IMPORTED_MODULE_12__.SET_TABLE_COL_FILTER:\n      state.colFilter[payload.key] = payload.value;\n      break;\n    case _refBillConstants__WEBPACK_IMPORTED_MODULE_12__.SET_TABLE_COL_SORT:\n      state.colSort = payload;\n      break;\n  }\n});\n\n//# sourceURL=webpack://nocode-component/./src/control/web/RefBillGridView/refBillReducer.ts?");

/***/ }),

/***/ "./src/control/web/RichText/index.tsx":
/*!********************************************!*\
  !*** ./src/control/web/RichText/index.tsx ***!
  \********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_corejs3_helpers_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/extends */ \"../../node_modules/@babel/runtime-corejs3/helpers/esm/extends.js\");\n/* harmony import */ var _babel_runtime_corejs3_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/objectWithoutProperties */ \"../../node_modules/@babel/runtime-corejs3/helpers/esm/objectWithoutProperties.js\");\n/* harmony import */ var _babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/slicedToArray */ \"../../node_modules/@babel/runtime-corejs3/helpers/esm/slicedToArray.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/concat */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/instance/concat.js\");\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var kd_libs_react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! kd_libs/react */ \"webpack/container/remote/kd_libs/react\");\n/* harmony import */ var kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(kd_libs_react__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _base_web__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/base/web */ \"./src/base/web/index.ts\");\n/* harmony import */ var _utils_context__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/utils/context */ \"./src/utils/context.ts\");\n/* harmony import */ var _control_hooks__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/control/hooks */ \"./src/control/hooks/index.ts\");\n/* harmony import */ var _constants_sysActionName__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/constants/sysActionName */ \"./src/constants/sysActionName.js\");\n/* harmony import */ var _FieldItemWrapper__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../FieldItemWrapper */ \"./src/control/web/FieldItemWrapper/index.tsx\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @/utils */ \"./src/utils/index.ts\");\n\n\n\nvar _excluded = [\"hidden\", \"readonly\", \"required\", \"rules\"];\nvar _context;\n\n/*\n * @Description:\n * @Author: xiaoman_xie\n * @Date: 2023-05-22 10:39:07\n * @LastEditTime: 2024-06-18 11:20:43\n * @Last Modified by: xiaoman_xie\n */\n\n\n\n\n\n\n\nvar shareParam = window.NOCODE_SHARE_ID ? \"noCodeShareId=\".concat(window.NOCODE_SHARE_ID) : '';\nvar SRC_URL = window.__kd_cdnPath__ || window.__domainurl__;\nvar UPLOAD_URL = (0,_utils__WEBPACK_IMPORTED_MODULE_10__.getUrlWithDataCenter)(window.__domainurl__ + _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_3___default()(_context = \"nocode/v2/nocode_sys/image\".concat(shareParam ? '?' : '')).call(_context, shareParam));\nvar KDRichText = function KDRichText(props) {\n  var controlMeta = props.controlMeta;\n  var id = controlMeta.id,\n    pageId = controlMeta.pageId;\n  var _useContext = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_4__.useContext)(_utils_context__WEBPACK_IMPORTED_MODULE_6__.KDContext),\n    model = _useContext.model;\n  var pictureServer = model.getFileServer('picture');\n  var richtextRef = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_4__.useRef)();\n  var _useState = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_4__.useState)(''),\n    _useState2 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(_useState, 2),\n    value = _useState2[0],\n    setValue = _useState2[1];\n  var fieldItemRef = (0,kd_libs_react__WEBPACK_IMPORTED_MODULE_4__.useRef)();\n  var updateValue = function updateValue(args) {\n    setValue((args === null || args === void 0 ? void 0 : args.v) || '');\n    if (args.isLoadData === false) {\n      var _fieldItemRef$current;\n      (_fieldItemRef$current = fieldItemRef.current) === null || _fieldItemRef$current === void 0 || _fieldItemRef$current.validateFields('', (args === null || args === void 0 ? void 0 : args.v) || '');\n    }\n  };\n\n  // 注册侦听指令逻辑\n  (0,_control_hooks__WEBPACK_IMPORTED_MODULE_7__.useListenControlAction)(_constants_sysActionName__WEBPACK_IMPORTED_MODULE_8__.UPDATE_CONTROL_STATES, controlMeta, updateValue);\n\n  // 基类属性\n  var _useFieldProps = (0,_control_hooks__WEBPACK_IMPORTED_MODULE_7__.useFieldProps)(controlMeta),\n    hidden = _useFieldProps.hidden,\n    readonly = _useFieldProps.readonly,\n    required = _useFieldProps.required,\n    rules = _useFieldProps.rules,\n    fieldProps = (0,_babel_runtime_corejs3_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(_useFieldProps, _excluded);\n  var defaultHeight = controlMeta.defaultHeight,\n    autoHeight = controlMeta.autoHeight;\n  var handleBlur = function handleBlur(v) {\n    var data = {\n      k: id,\n      r: 0,\n      v: v\n    };\n    model.batchInvoke('updateValue', pageId, '', [], [{}, [data]]);\n  };\n  var changeAction = function changeAction(v) {\n    model.setPostData(pageId, id, v);\n  };\n  if (hidden) return null;\n  return /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default().createElement(_FieldItemWrapper__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {\n    controlMeta: controlMeta,\n    required: required,\n    rules: rules,\n    ref: fieldItemRef\n  }, /*#__PURE__*/kd_libs_react__WEBPACK_IMPORTED_MODULE_4___default().createElement(_base_web__WEBPACK_IMPORTED_MODULE_5__.RichText, (0,_babel_runtime_corejs3_helpers_extends__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n    ref: richtextRef,\n    readOnly: readonly,\n    height: defaultHeight,\n    autoHeight: autoHeight,\n    content: value,\n    srcUrl: SRC_URL,\n    imageUrlPrefix: window.origin,\n    imagesUploadUrl: UPLOAD_URL,\n    pictureServer: pictureServer,\n    onChange: changeAction,\n    onBlur: handleBlur\n  }, fieldProps)));\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (KDRichText);\n\n//# sourceURL=webpack://nocode-component/./src/control/web/RichText/index.tsx?");

/***/ })

}]);