"use strict";(self.webpackChunknocode_component=self.webpackChunknocode_component||[]).push([[548],{79748:function(e,t,l){l(33768),l(29885);var n=l(70696),a=l.n(n);t.c=function(e){var t=e.pageId,l=e.fieldKey,n=e.model,o=e.baseUrl,r=e.onDownLoad,c=n.getControlText,i=n.addEventListener,u=function(e,l,a,o){n.batchInvoke(e,t,l,a,o)};return{baseUrl:o,batchInvoke:function(e,t){u(e,l,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[])},getControlText:c,addControlAction:i,onDownLoad:r,batchInvokeListConfig:function(e){u("listConfig",l,[[e]])},batchInvokeQuery:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a()(t),o=void 0===n?"":n,r=t.search,c=void 0===r?"":r,i=t.order_by,d=void 0===i?"":i,s=t.select,f=void 0===s?"":s,v=t.page_size,m=void 0===v?10:v,b=t.page_no,p=void 0===b?1:b,y=t.ids;u("query",l,[[e,{filter:o,search:c,order_by:d,select:f,page_size:m,page_no:p,ids:void 0===y?[]:y}]])}}}},31520:function(e,t,l){l.r(t),l.d(t,{default:function(){return N}});l(87912),l(97308);var n=l(13939),a=l.n(n),o=l(34716),r=l.n(o),c=l(70696),i=l.n(c),u=l(4884),d=l.n(u),s=l(3464),f=l.n(s),v=l(51400),m=l.n(v),b=l(25028),p=l.n(b),y=l(30112),h=(l(21300),l(65984)),g=l.n(h),C=l(69984),k=l(47906),E=l(37668),w="YTkRbZYY_no_file",I=l(63324);function S(e,t){var l=a()(e);if(r()){var n=r()(e);t&&(n=i()(n).call(n,(function(t){return d()(e,t).enumerable}))),l.push.apply(l,n)}return l}function F(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?S(Object(l),!0).forEach((function(t){(0,y.c)(e,t,l[t])})):f()?m()(e,f()(l)):S(Object(l)).forEach((function(t){p()(e,t,d()(l,t))}))}return e}var N=(0,h.memo)((function(e){var t=(0,I.c)(F(F({},e),{},{uploadAttachmentVerify:E.S0,showInfo:E.s9})),l=t.action,n=t.handledDatas,a=t.disabled,o=t.readonly,r=t.buttonText,c=t.uploadModel,i=t.handleChange,u=t.onDownload,d=t.onChangeFileName,s=t.beforeUpload,f=t.handleRemove,v=t.attachmentFileType,m=t.uploadNum,b=t.notice,p=t.previewType,y=t.labelText,h=t.required,S=t.hidden,N=t.fieldRef,K=t.datas;return S?null:g().createElement(C.c,{ref:N,subTitle:y,controlMeta:e.controlMeta,required:h},0===(null==K?void 0:K.length)&&o?g().createElement("div",{className:w},"暂无数据"):g().createElement(k.Attachment,{multiple:!0,action:l,data:{action:"upload",tempstorage:!1},fileList:n,disabled:a,readonly:o,buttonText:r,mode:c,onChange:i,onDownload:u,onChangeFileName:d,beforeUpload:s,onRemove:f,onStart:function(e){return console.log("uploadstart",e.name)},accept:v||"",uploadNum:m,noticeInfo:b,previewType:p}))}))},45240:function(e,t,l){l.r(t);var n=l(65984),a=l.n(n),o=l(69984),r=l(47906),c=l(37668),i=l(60807);t.default=(0,n.memo)((function(e){var t=(0,n.useCallback)((function(t,l){return(0,c.is)(t,l,e.controlMeta)}),[e.controlMeta]),l=(0,i.c)(e),u=l.action,d=l.notice,s=l.labelText,f=l.datas,v=l.readonly,m=l.disabled,b=l.hidden,p=l.required,y=(l.rules,l.enablePreview),h=l.buttonText,g=l.fieldTitleRef,C=l.baseUrl,k=l.limit,E=l.accept,w=l.onRemove,I=l.handleChange,S=l.onDownload;return b?null:a().createElement(o.c,{ref:g,subTitle:s,controlMeta:e.controlMeta,required:p},a().createElement(r.Picture,{multiple:!0,action:u,baseUrl:C,data:{action:"upload",tempstorage:!1},disabled:m,readonly:v,fileList:f,uploadNum:k,onChange:I,onRemove:w,onDownload:S,beforeUpload:t,accept:E,enablePreview:y,buttonText:h,noticeInfo:d}))}))},94780:function(e,t,l){l.d(t,{c:function(){return s}});var n=l(23992),a=l.n(n),o=l(62132),r=l(65984),c=l.n(r),i=l(47404),u="Zn6h-Dx5_text",d=(0,r.memo)((function(e){var t=e.meta,l=e.model,n=e.multi,d=e.data,s=e.silence,f=e.readonly,v=t||{},m=v.pageId,b=v.id,p=(v.refbilltype,v.dataIndex),y=v.gridId,h=(0,r.useCallback)((function(e){if(!s&&e){var t=[e],n=b;y&&(t.push(p),n=y),l.batchInvoke(i.uW,m,n,[t])}}),[m,b,s,y,p]),g=(0,o.c)(h),C=(0,r.useCallback)((function(e){var t=(null==e?void 0:e.label)||"-";return window.NOCODE_SHARE_ID?t:c().createElement("a",{onClick:function(){return g(null==e?void 0:e.value)}},t)}),[f,g]);return c().createElement("div",{className:u},n&&d.length>1?null==d?void 0:a()(d).call(d,(function(e,t){return c().createElement("span",{key:e.value},C(e),t!==d.length-1?",":"")})):null!=d&&d.length?C(d[0]):void 0===f?"-":"")}));d.displayName="RefBillReadonly";var s=d},28140:function(e,t,l){l.r(t),l.d(t,{default:function(){return pe}});var n=l(13939),a=l.n(n),o=l(34716),r=l.n(o),c=l(4884),i=l.n(c),u=l(3464),d=l.n(u),s=l(51400),f=l.n(s),v=l(25028),m=l.n(v),b=l(75240),p=l(2664),y=l(58496),h=l(81043),g=l(30112),C=l(72048),k=(l(86456),l(21300),l(76124),l(87912),l(33768),l(29885),l(97308),l(50524)),E=l.n(k),w=l(70696),I=l.n(w),S=l(73980),F=l.n(S),N=l(24244),K=l.n(N),D=l(23992),_=l.n(D),R=l(760),M=l.n(R),A=l(99308),x=l.n(A),T=l(72400),O=l.n(T),j=l(61260),q=l.n(j),B=l(24496),L=l.n(B),U=l(65984),z=l.n(U),P=l(39756),Y=l(14020),Q=l(69984),V=l(47906),H=l(87812),Z=l(38680),G=l(47404),W=l(86132),$=l(84332);function J(e,t){var l=a()(e);if(r()){var n=r()(e);t&&(n=I()(n).call(n,(function(t){return i()(e,t).enumerable}))),l.push.apply(l,n)}return l}function X(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?J(Object(l),!0).forEach((function(t){(0,g.c)(e,t,l[t])})):d()?f()(e,d()(l)):J(Object(l)).forEach((function(t){m()(e,t,i()(l,t))}))}return e}var ee={value:[],label:"",options:[],tableData:{rows:[]},tableConfig:{},tableColumn:[],tableColumnData:[],tableFilterData:[],rowSelected:{},selectedKeys:[],colFilter:{},colSort:{}},te=(0,W.c)((function(e,t){var l=t.type,n=t.payload;switch(l){case G.Mz:e.value=n.value,e.options=n.options,e.selectedKeys=n.selectedKeys,e.selectInfo=n.selectInfo;break;case G.YB:e.value=n.value,e.selectedKeys=n.selectedKeys;break;case G.qe:e.options=n;break;case G.o$:e.tableData=n.data;break;case G.CC:e.tableConfig=n.tableConfig,e.rowSelected=n.rowSelected,e.tableColumn=n.tableColumn,e.tableColumnData=n.tableColumnData,e.selectedKeys=n.selectedKeys,e.selectInfo=n.selectInfo;break;case G.mq:e.tableFilterData=n.tableFilterData,e.rowSelected=n.rowSelected||e.rowSelected,e.selectedKeys=n.selectedKeys||e.selectedKeys,e.selectInfo=n.selectInfo||e.selectInfo;break;case G.eC:e.rowSelected=n.rowSelected,e.selectedKeys=n.selectedKeys,e.selectInfo=n.selectInfo||e.selectInfo;break;case G.iI:e.tableFilterData=[],e.tableData=[],e.colSort={},e.selectInfo=(0,$.SA)();break;case G.Md:e.rowSelected=[],e.selectedKeys=[],e.selectInfo=(0,$.SA)();break;case G.kL:e.selectedKeys=n.selectedKeys,e.rowSelected=n.rowSelected;break;case G.K:e.selectedKeys=n.selectedKeys,e.rowSelected=X(X({},e.rowSelected),n.rowSelected),e.selectInfo=n.selectInfo;break;case G.g7:e.colFilter[n.key]=n.value;break;case G.q_:e.colSort=n}})),le=l(85984),ne=l(63548),ae=l(74238),oe=l(79748),re=l(94780),ce=l(49624),ie=l(16428),ue=l(27448),de=l(57628),se=l(6080),fe=l(37668);function ve(e,t){var l=a()(e);if(r()){var n=r()(e);t&&(n=I()(n).call(n,(function(t){return i()(e,t).enumerable}))),l.push.apply(l,n)}return l}function me(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(l),!0).forEach((function(t){(0,g.c)(e,t,l[t])})):d()?f()(e,d()(l)):ve(Object(l)).forEach((function(t){m()(e,t,i()(l,t))}))}return e}var be=function(e){var t=e.controlMeta,l=e.invokeData,n=e.onChange,a=e.value,o=(0,U.useContext)(P.m).model,r=(0,U.useReducer)(te,ee),c=(0,C.c)(r,2),i=c[0],u=c[1],d=(0,U.useState)(0),s=(0,C.c)(d,2),f=s[0],v=s[1],m=(0,U.useState)([]),g=(0,C.c)(m,2),k=g[0],w=g[1],S=(0,U.useState)(""),N=(0,C.c)(S,2),D=N[0],R=N[1],A=t.pageId,T=t.id,j=t.dataRange,B=void 0===j?{}:j,W=t.propsDisplay,J=t.dispSelected,X=t.refbilltype,ve=t.caption,be=(0,ae.sB)(t),pe=be.readonly,ye=be.placeholder,he=be.disabled,ge=be.hidden,Ce=be.required,ke=be.rules,Ee=B.max,we=B.min,Ie=(0,U.useRef)((null==W?void 0:W.split(","))||[]),Se=(0,U.useRef)(!1),Fe=(0,U.useRef)(o.getFileServer()),Ne=(0,U.useRef)(i),Ke=(0,U.useRef)(!1),De=(0,U.useRef)(),_e=(0,U.useRef)({key:"",filter:"",pageNum:1,pageSize:10,sort:""}),Re=(0,U.useRef)(),Me=1===t.multi,Ae=V.DataGrid.CellRender,xe=(0,U.useMemo)((function(){var e;return!E()(e=["bos_user","bos_adminorg"]).call(e,X)}),[X]),Te=(0,U.useCallback)((function(e){if(n)return n(e);var t={k:T,r:0,v:e};o.batchInvoke("updateValue",A,"",[],[{},[t]])}),[n]),Oe=(0,U.useCallback)((function(e){var t,l=I()(t=i.options).call(t,(function(t){return E()(e).call(e,t.value)}));u({type:G.qe,payload:l})}),[i.options,i.selectedKeys]),je=(0,U.useCallback)((function(e,t){var l=e?Me?e:[e]:[];u({type:G.YB,payload:{value:e||(Me?[]:""),selectedKeys:l}}),(!Me||Me&&!Se.current)&&Te(l)}),[Me,Te]),qe=(0,U.useCallback)((0,Y.Cu)((function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",l=arguments.length>1?arguments[1]:void 0;R(t),l=l||(null==i?void 0:i.value),o.batchInvoke(Z.gR,A,T,[["%",t,"%",null===(e=l)||void 0===e?void 0:F()(e).call(e,0,20),1,0]])})),[i.value,R]),Be=(0,U.useCallback)((0,Y.Cu)((function(e){_e.current=me(me({},_e.current),e);var t=_e.current,l=t.key,n=I()(t),a=t.pageNum,r=t.pageSize,c=K()(t);o.batchInvoke(Z.kV,A,T,[[r,a,l,n,c]],[],null==e?void 0:e.callback)})),[A,T]),Le=(0,U.useCallback)((function(){pe||he||(Ke.current=!0,Be({}),o.batchInvoke(Z.gd,A,T,[[]]))}),[pe,he,Be]),Ue=(0,U.useCallback)((function(){u({type:G.Md})}),[u]),ze=(0,U.useCallback)((function(e){Se.current=e,e&&(Oe(i.value),v(1),qe()),Me&&!e&&Te(i.value)}),[i.value,Oe,qe,Te,Me]),Pe=(0,U.useCallback)((function(e){var t,l=e.pkId,n=me({},i.rowSelected),a=W.split(","),o=_()(a).call(a,(function(t){return e[t]})),r=(0,se.sl)(M()(t=[l]).call(t,(0,h.c)(o))),c=new(x())(i.selectedKeys),u=Me?(0,h.c)(c.add(l)):[l],d=Me?(0,h.c)(c.add(l)):l;n[l]=r,Ke.current?Be({callback:function(e){if(null!=e&&e.data){var t,n,a,o,r=null===(t=e.data)||void 0===t||null===(t=t[0])||void 0===t||null===(t=t.p)||void 0===t||null===(t=t[0])||void 0===t||null===(t=t.args)||void 0===t||null===(t=t[0])||void 0===t||null===(t=t.data)||void 0===t?void 0:t.rows;if(!r)return;var c=(0,$.AT)({newData:r,key:l,curSelectInfo:i.selectInfo});null==Re||null===(n=Re.current)||void 0===n||null===(a=n.setSelectedInfo)||void 0===a||a.call(n,c),Xe(u,l,[l],de.SS.check,c,{newRows:r}),null==e||null===(o=e.data[0])||void 0===o||null===(o=o.p[0])||void 0===o||null===(o=o.args[0])||void 0===o||null===(o=o.data)||void 0===o||o.rows}}}):je(d,null)}),[Me,W,i.selectedKeys,Be,i.rowSelected,je,Xe,i.selectInfo]),Ye=(0,U.useCallback)((function(e){var t,l={};(null===(t=i.selectInfo)||void 0===t?void 0:t.selectStatus)!==ue.m_&&(l={selectInfo:(0,$.SA)(),rowSelected:[],selectedKeys:[]}),u({type:G.mq,payload:me({tableFilterData:e},l)}),Be({filter:(0,se.Mt)(e),pageNum:1})}),[Be,u,i.selectInfo]),Qe=(0,U.useCallback)((function(){Ke.current=!1,_e.current={key:"",filter:"",pageNum:1,pageSize:10,sort:""},u({type:G.iI,payload:null})}),[]),Ve=(0,U.useMemo)((function(){var e,t;return M()(e=M()(t='"'.concat(o.getControlText(ve),'"选择数量不能小于')).call(t,we,"，不能大于")).call(e,Ee)}),[Ee,we,ve]),He=(0,U.useCallback)((function(e){var t,l=(e||{}).search,n=void 0===l?"":l,a=Array.isArray(i.selectedKeys)?K()(t=(0,h.c)(i.selectedKeys)).call(t):i.selectedKeys;if(Me){var o=(i.selectInfo||{}).selectedCount,r=void 0===o?0:o;if(r>Ee||r<we)return(0,fe.s9)(Ve),!1}return Ke.current=!1,u({type:G.YB,payload:{value:Me?a:a.join(),selectedKeys:a}}),u({type:G.qe,payload:O()(i.rowSelected)}),Te(Me?(0,se.Om)({selectInfo:i.selectInfo,search:n,filterData:i.tableFilterData||[]}):a.join()),qe("",Me?a:a.join()),Qe(),!0}),[i,Te,u,Qe,we,Ee,Me,D]),Ze=(0,U.useCallback)((function(e,t){var l={};if(0===t)delete l[e];else{var n,a=-1===t?"desc":"";l[e]=M()(n="".concat(e)).call(n,a?" "+a:"")}Be({sort:l[e]||""}),w([{number:e,isAsc:1===t}]),u({type:G.q_,payload:l})}),[Be,w,u]),Ge=(0,U.useCallback)((function(e){var t;Be({key:e||"",pageNum:1}),(null===(t=i.selectInfo)||void 0===t?void 0:t.selectStatus)!==ue.m_&&u({type:G.eC,payload:{rowSelected:[],selectedKeys:[],selectInfo:(0,$.SA)()}})}),[Be,i.selectInfo]),We=(0,U.useCallback)((function(e,t){Be({pageNum:e,pageSize:t})}),[Be]),$e=(0,U.useCallback)((function(e,t){var l=me({},i.rowSelected),n=new(x())(i.selectedKeys);e.forEach((function(e){delete l[e],t||n.delete(e)}));var a=null==t?void 0:t.selectedIds;u({type:G.eC,payload:{rowSelected:l,selectedKeys:a?(0,h.c)(a):(0,h.c)(n),selectInfo:t||i.selectInfo}})}),[i.rowSelected,i.selectedKeys,u]),Je=(0,U.useCallback)((function(e){var t={};return e.forEach((function(e){var l=e.id,n=e._title_;if(n){var a=n.split("|"),o=a[0],r=F()(a).call(a,1).join("｜");t[e.id]={value:l,label:o,des:r}}else{var c=[e.id];Ie.current.forEach((function(t){c.push(e[t])})),t[e.id]=(0,se.sl)(c)}})),t}),[]),Xe=(0,U.useCallback)((function(e,t,l,n,a){var o=(arguments.length>5&&void 0!==arguments[5]?arguments[5]:{}).newRows;if(Me){var r=a.notInSelectedIds,c=a.selectStatus,d=a.selectedCount,s=i.tableData,f=o||(null==s?void 0:s.rows);if(c===ue.mw||c===ue.m_&&!d){var v=c===ue.mw?e:[];u({type:G.eC,payload:{rowSelected:[],selectedKeys:v,selectInfo:a}})}else switch(n){case de.SS.uncheck:if(c===ue.gt){b=null==f?void 0:I()(f).call(f,(function(e){return E()(r).call(r,e.id)}));var m=Je(b);u({type:G.K,payload:{rowSelected:m,selectedKeys:e,selectInfo:a}})}else $e(l,a);break;case de.SS.check:if(c===ue.mw)return void u({type:G.eC,payload:{rowSelected:[],selectedKeys:e,selectInfo:a}});var b=[],p="";c===ue.gt?(b=null==f?void 0:I()(f).call(f,(function(e){return E()(r).call(r,e.id)})),p=G.eC):(p=G.K,b=null==f?void 0:I()(f).call(f,(function(t){return E()(e).call(e,t.id)})));var y=Je(b);u({type:p,payload:{selectedKeys:e,rowSelected:y,selectInfo:a}})}}else u({type:G.K,payload:{selectedKeys:e}})}),[i.tableData,$e,Je,Me]),et=(0,U.useCallback)((function(e,t){o.batchInvoke(Z.kD,A,T,[[e.fieldName,t]])}),[A,T]),tt=(0,U.useCallback)((function(e){var t,l=o.getConfig(A),n={params:"1",appId:l.appId,fId:l.formId,fileName:e.name},a=M()(t="".concat(e.url,"&kd_cs_ticket=")).call(t,o.Global.token);(0,Y.gr)(a,n)}),[]),lt=(0,oe.c)({pageId:A,fieldKey:T,model:o,baseUrl:Fe,onDownLoad:tt}),nt=(0,U.useCallback)((function(e,t){o.batchInvoke(Z.kD,A,T,[[e,t]])}),[A,T]),at=(0,U.useCallback)((function(e,t){var l,n;e.forEach((function(t,l){t.value.forEach((function(t){"all"===t.type&&q()(e).call(e,l,1)}))}));var a=(null==i?void 0:i.tableFilterData)||[],o=(null==a||null===(l=I()(a))||void 0===l?void 0:l.call(a,(function(e){return e.fieldName!==t})))||[],r=M()(n=[]).call(n,(0,h.c)(e),(0,h.c)(o));Ye(r)}),[Ye,i.tableFilterData]),ot=(0,U.useCallback)((function(e,t,l){var n="nocodedecimalfield"===e.type?"right":"",a={align:n,title:e.name,number:e.number,type:e.type};return{code:e.number,title:z().createElement(V.TableTitle,a),width:200,align:n,lock:!1,render:function(n,a,r){var c;if(E()(c=["nocodeimageuploadfield","nocodeattachmentuploadfield","nocodeselectitemfield","nocodeentryentity","nocoderichtextfield","nocodegraphicdisplayfield"]).call(c,e.type)){var i,u=n;"nocodeselectitemfield"===e.type&&(u=Array.isArray(n)?_()(n).call(n,(function(e){return me(me({},e),{},{label:o.getControlText(e.name)})})):[]);var d={};return E()(i=["nocodeimageuploadfield","nocodeattachmentuploadfield"]).call(i,e.type)?d={baseUrl:Fe.current,onDownLoad:tt,value:u,record:a,rowIndex:r}:"nocodeentryentity"===e.type&&(d={getTableData:rt,appId:t,formId:l,baseUrl:Fe.current,onDownLoad:tt}),ct(e.type,n,a,r,e.number,e.name,d)}return null===n?"":"boolean"==typeof n?n?"是":"否":"object"===(0,y.c)(n)?L()(n):n}}}),[Ze,tt]),rt=function(e,t,l,n,a,r,c){o.batchInvoke(Z.iA,A,T,[[e,n,l,t]],[],c)},ct=function(e,t,l,n,a,o,r){var c={type:e,value:t,readOnly:!0,id:null==l?void 0:l.id,title:o,fieldName:a};return l.isAgg&&(c=me(me({},c),{},{type:"aggregate",selectedItem:t||{},fieldName:a,readOnly:!1})),z().createElement(Ae,(0,p.c)({},c,r))},it=(0,U.useCallback)((function(e){var t=e.id;o.batchInvoke(Z.E_,A,T,[[t,W,T]])}),[A,T,W]),ut=(0,U.useCallback)((function(e,t){e.stopPropagation(),it(t)}),[it]),dt=(0,U.useCallback)((function(e){var t=e.listItemConfig,l=[],n=[];return t.forEach((function(t){l.push(ot(t,e.appId,e.formId)),n.push({key:t.number,title:t.name})})),xe&&l.push({code:"operator",title:"操作",width:100,lock:!0,render:function(e,t,l){return z().createElement(V.BtnField,{type:"text",major:!0,onClick:function(e){return ut(e,t)}},"编辑")}}),me(me({},e),{},{data:n,column:l,editF7Record:it})}),[xe,it]),st=(0,U.useCallback)((function(e){var t={},l=[];e.selected.forEach((function(e,n){n<=se.cX&&(t[e[0]]=(0,se.sl)(e)),l.push(e[0])}));var n=dt(e.data.rows[0]),a={selectStatus:ue.m_,selectedIds:l,notInSelectedIds:[],selectedCount:l.length};u({type:G.CC,payload:{tableConfig:e.data.rows[0],tableColumn:n.column,tableColumnData:n.data,rowSelected:t,selectedKeys:l,selectInfo:a}})}),[dt,u]),ft=(0,U.useCallback)((0,Y.Cu)((function(){o.batchInvoke("addNewRef",A,T,[[W,T]])})),[W,A,T]),vt=(0,U.useMemo)((function(){return 2===f?D?z().createElement(H.c,{text:"暂无搜索结果"}):z().createElement(H.c,{text:"暂无数据",img:le}):1===f?z().createElement(ne.Spin,{name:"Spin"}):z().createElement("div",null)}),[f,D]),mt=(0,U.useCallback)((function(e){if(Array.isArray(null==e?void 0:e.v)){var t,l=(0,se.YP)(e.v),n=(0,C.c)(l,2),a=n[0],o=n[1];if(u({type:G.Mz,payload:{value:Me?a:a.join(),options:o,selectedKeys:a,selectInfo:(0,$.SA)({selectedIds:a})}}),!1===e.isLoadData)null===(t=De.current)||void 0===t||t.validateFields("",Me?a:a.join())}else{var r,c=Me?[]:"";if(Se.current&&!Me?u({type:G.YB,payload:{value:c,selectedKeys:[]}}):u({type:G.Mz,payload:{value:c,options:[],selectedKeys:[],selectInfo:(0,$.SA)()}}),!1===e.isLoadData)null===(r=De.current)||void 0===r||r.validateFields("",c)}}),[Me,u,qe,se.sl]);(0,ae.uO)(t,De,(function(e){if(Array.isArray(e)){var t=(0,se.YP)(e),l=(0,C.c)(t,1)[0];return Me?l:l.join()}return Me?[]:""}));var bt=(0,U.useCallback)((function(e){var t,l=null==e||null===(t=e.data)||void 0===t?void 0:_()(t).call(t,(function(e){var t=(0,b.c)(e),l=t[0],n=F()(t).call(t,1),a=l?JSON.parse(l):{};return me(me({},(0,se.sl)(n)),{},{disabled:"disabled"===a._state_})}));(0,ie.unstable_batchedUpdates)((function(){var t;u({type:G.qe,payload:l}),v((null==e||null===(t=e.data)||void 0===t?void 0:t.length)>0?0:2)}))}),[v,se.sl]),pt=(0,U.useCallback)((function(e){var t,l,n,a;if(e){var r=e[0],c=r.methodname,i=r.args;switch(c){case Z.Ex:bt(i[0]);break;case Z.ct:u({type:G.o$,payload:i[0]});break;case Z.WK:i[0].selected=(null===(t=i[0])||void 0===t?void 0:t.selected)||[],st(i[0]);break;case Z.__:u({type:G.g7,payload:{key:i[0].args[0],value:i[0].data.rows[0]}});break;case Z.S6:i[0].data.rows[0],u({type:G.g7,payload:{key:i[0].args[0],value:i[0].data.rows[0]}});break;case Z.kT:mt({v:i[0]});break;case G.Tb:(0,ce.M)(i[0]);break;case G.op:(0,ce.Q)(i[0]);break;case Z.c$:Pe(i[0]);break;case"setQuery":o.emitEvent(c,me(me({},i[0]),{},{args:{formId:null===(l=i[0])||void 0===l?void 0:l.args[0],param:null===(n=i[0])||void 0===n?void 0:n.args[1]}}));break;case"listConfig":o.emitEvent("setListConfig",me(me({},i[0]),{},{args:{formId:null===(a=i[0])||void 0===a?void 0:a.args[0]}}))}}}),[Pe,mt,v,u,st,bt]);o.useUpdateControlStates(t,mt),o.useInvokeControlMethod(t,pt),(0,U.useEffect)((function(){pt(l)}),[l]),(0,U.useEffect)((function(){mt({v:a})}),[a]),(0,U.useEffect)((function(){Ne.current=i}),[i]),(0,U.useEffect)((function(){mt({v:e.value})}),[]);var yt=(0,U.useMemo)((function(){var e;return null===(e=i.options)||void 0===e?void 0:I()(e).call(e,(function(e){var t;return null===(t=i.value)||void 0===t?void 0:E()(t).call(t,e.value)}))}),[i.value,i.options]);return ge?null:z().createElement(Q.c,{controlMeta:t,required:Ce,rules:ke,ref:De},pe?z().createElement(re.c,{data:yt,multi:Me,meta:t,model:o}):z().createElement(V.RefBill,{showSearch:!0,value:(null==i?void 0:i.value)||"",placeholder:ye,disabled:he,options:(null==i?void 0:i.options)||[],dataRange:B||{},mode:Me?"multiple":"single",allowClear:null==t?void 0:t.ShowClearButton,notFoundContent:vt,tablePrimaryKey:"id",tableSorts:k,tableColFilter:null==i?void 0:i.colFilter,tableData:null==i?void 0:i.tableData,tableConfig:null==i?void 0:i.tableConfig,tableColumn:null==i?void 0:i.tableColumn,tableColumnData:null==i?void 0:i.tableColumnData,tableFilterData:null==i?void 0:i.tableFilterData,tableSelected:null!=i&&i.rowSelected?O()(null==i?void 0:i.rowSelected):[],tableSelectedKeys:(null==i?void 0:i.selectedKeys)||[],showSelected:1===J,f7ContentRef:Re,f7Options:{showAddRecord:xe,onAddRecord:ft},refBillProps:lt,f7SelectInfo:i.selectInfo,allowSelectAll:!0,onChange:je,onSearch:qe,onVisibleChange:ze,moreClick:Le,onF7Search:Ge,onF7FilterChange:Ye,onF7PageChange:We,onF7Ok:He,onF7Cancel:Qe,onF7Clean:Ue,onF7DelSelect:$e,onF7RowSelectChange:Xe,f7ColHeadFilter:i.colFilter,onF7ColHeadFilterVisibleChange:et,onF7Sort:Ze,onF7TitleFilterConfirm:at,onF7TitleFilterShow:nt}))};be.displayName="KDRefBill";var pe=z().memo(be)},47404:function(e,t,l){l.d(t,{CC:function(){return u},K:function(){return f},Md:function(){return m},Mz:function(){return o},Tb:function(){return g},YB:function(){return r},eC:function(){return s},g7:function(){return d},iI:function(){return y},kL:function(){return v},mq:function(){return b},o$:function(){return i},op:function(){return C},q_:function(){return p},qe:function(){return c},uW:function(){return h}});var n=l(59992),a=l.n(n),o=a()("更新下拉数据"),r=a()("设置下拉选中值"),c=a()("设置下拉选项"),i=a()("设置F7表格数据"),u=a()("设置F7表格配置信息"),d=a()("设置F7表格请求过滤条件"),s=(a()("F7单个删除已选"),a()("设置F7表格行选择数据")),f=a()("更新F7表格行选择数据和下标"),v=a()("设置F7表格行选择数据下标"),m=a()("F7点击清空按钮"),b=a()("设置表格筛选项"),p=a()("表格列排序"),y=a()("关闭F7弹窗"),h="showInfo",g="showUserInfo",C="showOrgInfo"},76352:function(e,t,l){l.d(t,{c:function(){return f}});var n=l(70696),a=l.n(n),o=l(23992),r=l.n(o),c=l(65984),i=l.n(c),u=l(47906),d="rf4exZZu_operator",s=(0,c.memo)((function(e){var t=e.onItemClick,l=e.disabled,n=e.record,o=e.isF7,s=(0,c.useRef)([{key:"edit",title:"编辑",isF7:!0},{key:"detail",title:"详情",isF7:!1},{key:"delete",title:"删除",isF7:!1}]),f=(0,c.useCallback)((function(e,l,n){e.stopPropagation(),null==t||t(l,n)}),[t]),v=(0,c.useMemo)((function(){var e;return a()(e=s.current).call(e,(function(e){return e.isF7===o}))}),[o]);return i().createElement("div",{className:d},r()(v).call(v,(function(e){var t=e.key,a=e.title;return i().createElement(u.BtnField,{key:t,type:"text",disabled:"detail"!==t&&l,major:!0,onClick:function(e){return f(e,t,n)}},a)})))}));s.displayName="OperatorFields";var f=s},49624:function(e,t,l){l.d(t,{Q:function(){return I},M:function(){return w}});var n=l(65984),a=l.n(n),o=l(63548),r=l(47906),c=l(72048),i=l(23992),u=l.n(i),d=(l(86456),l(21300),l(82504));var s="LQ9dRkQy_org_info",f="rbAUWmcE_organization",v="_0bsE9HyI_item",m="vYz5ajTk_managers",b="IKj-Z2b9_title",p="cBOpquAU_list",y="_0bCnRGBO_user_info",h="RCOCClI1_table",g=(0,n.memo)((function(e){var t,l=e.data;return a().createElement("div",{className:y},a().createElement("div",null,a().createElement("div",{className:v},a().createElement("div",{className:b},"员工编号"),a().createElement("div",null,(null==l?void 0:l.number)||"-")),a().createElement("div",{className:v},a().createElement("div",{className:b},"姓名"),a().createElement("div",null,(null==l?void 0:l.name)||"-"))),a().createElement("div",null,a().createElement("div",{className:v},a().createElement("div",{className:b},"头像"),a().createElement(r.Avatar,{src:null==l?void 0:l.avatar,alt:""})),a().createElement("div",{className:v},a().createElement("div",{className:b},"性别"),a().createElement("div",null,(null==l?void 0:l.gender)||"-"))),a().createElement("div",null,a().createElement("div",{className:v},a().createElement("div",{className:b},"生日"),a().createElement("div",null,(null==l?void 0:l.birthday)||"-")),a().createElement("div",{className:v},a().createElement("div",{className:b},"手机号"),a().createElement("div",null,(null==l?void 0:l.phone)||"-"))),a().createElement("div",null,a().createElement("div",{className:v},a().createElement("div",{className:b},"邮箱"),a().createElement("div",null,(null==l?void 0:l.email)||"-"))),(null==l?void 0:l.orgs)&&(null==l?void 0:l.orgs.length)>0&&a().createElement("div",{className:h},a().createElement("table",{cellSpacing:1,cellPadding:1},a().createElement("tr",null,a().createElement("th",null,"所属组织编码"),a().createElement("th",null,"组织名称")),null==l||null===(t=l.orgs)||void 0===t?void 0:u()(t).call(t,(function(e,t){return a().createElement("tr",{key:e.orgNum+t},a().createElement("td",null,e.orgNum),a().createElement("td",null,e.orgName))})))))})),C=(0,n.memo)((function(e){var t,l,o=e.org,i=e.columns,y=o||{},h=(y.id,y.name),g=y.number,C=(y.parentid,y.parentname),k=y.users,E=(0,n.useState)(200),w=(0,c.c)(E,2),I=w[0],S=w[1],F=(0,n.useRef)(null),N=(0,n.useMemo)((function(){var e;return(null==k||null===(e=k.extra)||void 0===e||null===(e=e.managers)||void 0===e?void 0:u()(e).call(e,(function(e){return e.name})).join("、"))||"-"}),[k]),K=(0,n.useMemo)((function(){return(null==k?void 0:k.rows)||[]}),[k]);return t=F.current,l=function(e){S(e[0].contentRect.height-50)},(0,n.useEffect)((function(){if(t){var e=t&&new d.c(l);return e&&e.observe(t),function(){e&&e.disconnect(t)}}console.warn("useResizeMeasure指定的元素不存在")}),[t,l]),a().createElement("div",{className:s},a().createElement("div",{className:f},a().createElement("div",{className:v},a().createElement("div",{className:b},"组织编号"),a().createElement("div",null,g||"-")),a().createElement("div",{className:v},a().createElement("div",{className:b},"组织名称"),a().createElement("div",null,h||"-")),a().createElement("div",{className:v},a().createElement("div",{className:b},"上级组织"),a().createElement("div",null,C||"-")),a().createElement("div",{className:v},a().createElement("div",{className:b},"组织负责人"),a().createElement("div",{className:m},N||"-"))),a().createElement("div",{ref:F,className:p},a().createElement(r.DataGrid,{emptyCellHeight:I,style:{overflow:"auto",flex:"auto"},primaryKey:"id",useVirtual:!0,columns:i,dataSource:K})))})),k=l(14020),E=[{code:"number",name:"员工编号",width:178},{code:"name",name:"员工姓名",width:178},{code:"avatar",name:"员工头像",align:"center",width:178,render:function(e){return a().createElement(r.Avatar,{src:e,alt:""})}},{code:"opera",lock:!0,name:"操作",width:100,render:function(e,t,l){return a().createElement(r.BtnField,{type:"text",major:!0,onClick:function(){return w(t)}},"详情")}}],w=function(e){var t=(0,k.k3)(520,640,640,a().createElement(g,{data:e}));o.Modal.confirm({title:"人员信息",showline:!0,footer:null,titleIcon:null,style:{position:"absolute"},destroyOnClose:!0,width:640,height:t,type:"normal",bodyStyle:{padding:0,overflow:"hidden"},body:a().createElement(g,{data:e}),closable:!0,maskClosable:!1})},I=function(e){var t=(0,k.k3)(520,748);o.Modal.confirm({title:"组织信息",showline:!0,titleIcon:null,footer:null,width:720,height:t,style:{position:"absolute"},destroyOnClose:!0,type:"normal",bodyStyle:{padding:0,display:"flex",overflow:"hidden",flexBasis:0},body:a().createElement(C,{org:e,columns:E}),closable:!0,maskClosable:!1})}}}]);