"use strict";(self.webpackChunknocode_component=self.webpackChunknocode_component||[]).push([[548],{79748:function(e,t,l){l(33768),l(29885);var n=l(70696),a=l.n(n);t.c=function(e){var t=e.pageId,l=e.fieldKey,n=e.model,o=e.baseUrl,c=e.onDownLoad,r=n.getControlText,i=n.addEventListener,u=function(e,l,a,o){n.batchInvoke(e,t,l,a,o)};return{baseUrl:o,batchInvoke:function(e,t){u(e,l,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[])},getControlText:r,addControlAction:i,onDownLoad:c,batchInvokeListConfig:function(e){u("listConfig",l,[[e]])},batchInvokeQuery:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a()(t),o=void 0===n?"":n,c=t.search,r=void 0===c?"":c,i=t.order_by,d=void 0===i?"":i,s=t.select,f=void 0===s?"":s,v=t.page_size,m=void 0===v?10:v,b=t.page_no,p=void 0===b?1:b,y=t.ids;u("query",l,[[e,{filter:o,search:r,order_by:d,select:f,page_size:m,page_no:p,ids:void 0===y?[]:y}]])}}}},31520:function(e,t,l){l.r(t),l.d(t,{default:function(){return N}});l(87912),l(97308);var n=l(13939),a=l.n(n),o=l(34716),c=l.n(o),r=l(70696),i=l.n(r),u=l(4884),d=l.n(u),s=l(3464),f=l.n(s),v=l(51400),m=l.n(v),b=l(25028),p=l.n(b),y=l(30112),h=(l(21300),l(65984)),g=l.n(h),C=l(69984),k=l(47906),E=l(37668),w="YTkRbZYY_no_file",I=l(63324);function S(e,t){var l=a()(e);if(c()){var n=c()(e);t&&(n=i()(n).call(n,(function(t){return d()(e,t).enumerable}))),l.push.apply(l,n)}return l}function F(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?S(Object(l),!0).forEach((function(t){(0,y.c)(e,t,l[t])})):f()?m()(e,f()(l)):S(Object(l)).forEach((function(t){p()(e,t,d()(l,t))}))}return e}var N=(0,h.memo)((function(e){var t=(0,I.c)(F(F({},e),{},{uploadAttachmentVerify:E.S0,showInfo:E.s9})),l=t.action,n=t.handledDatas,a=t.disabled,o=t.readonly,c=t.buttonText,r=t.uploadModel,i=t.handleChange,u=t.onDownload,d=t.onChangeFileName,s=t.beforeUpload,f=t.handleRemove,v=t.attachmentFileType,m=t.uploadNum,b=t.notice,p=t.previewType,y=t.labelText,h=t.required,S=t.hidden,N=t.fieldRef,K=t.datas;return S?null:g().createElement(C.c,{ref:N,subTitle:y,controlMeta:e.controlMeta,required:h},0===(null==K?void 0:K.length)&&o?g().createElement("div",{className:w},"暂无数据"):g().createElement(k.Attachment,{multiple:!0,action:l,data:{action:"upload",tempstorage:!1},fileList:n,disabled:a,readonly:o,buttonText:c,mode:r,onChange:i,onDownload:u,onChangeFileName:d,beforeUpload:s,onRemove:f,onStart:function(e){return console.log("uploadstart",e.name)},accept:v||"",uploadNum:m,noticeInfo:b,previewType:p}))}))},45240:function(e,t,l){l.r(t);var n=l(65984),a=l.n(n),o=l(69984),c=l(47906),r=l(37668),i=l(60807);t.default=(0,n.memo)((function(e){var t=(0,n.useCallback)((function(t,l){return(0,r.is)(t,l,e.controlMeta)}),[e.controlMeta]),l=(0,i.c)(e),u=l.action,d=l.notice,s=l.labelText,f=l.datas,v=l.readonly,m=l.disabled,b=l.hidden,p=l.required,y=(l.rules,l.enablePreview),h=l.buttonText,g=l.fieldTitleRef,C=l.baseUrl,k=l.limit,E=l.accept,w=l.onRemove,I=l.handleChange,S=l.onDownload;return b?null:a().createElement(o.c,{ref:g,subTitle:s,controlMeta:e.controlMeta,required:p},a().createElement(c.Picture,{multiple:!0,action:u,baseUrl:C,data:{action:"upload",tempstorage:!1},disabled:m,readonly:v,fileList:f,uploadNum:k,onChange:I,onRemove:w,onDownload:S,beforeUpload:t,accept:E,enablePreview:y,buttonText:h,noticeInfo:d}))}))},94780:function(e,t,l){l.d(t,{c:function(){return s}});var n=l(23992),a=l.n(n),o=l(62132),c=l(65984),r=l.n(c),i=l(47404),u="Zn6h-Dx5_text",d=(0,c.memo)((function(e){var t=e.meta,l=e.model,n=e.multi,d=e.data,s=e.silence,f=e.readonly,v=t||{},m=v.pageId,b=v.id,p=(v.refbilltype,v.dataIndex),y=v.gridId,h=(0,c.useCallback)((function(e){if(!s&&e){var t=[e],n=b;y&&(t.push(p),n=y),l.batchInvoke(i.uW,m,n,[t])}}),[m,b,s,y,p]),g=(0,o.c)(h),C=(0,c.useCallback)((function(e){var t=(null==e?void 0:e.label)||"-";return window.NOCODE_SHARE_ID?t:r().createElement("a",{onClick:function(){return g(null==e?void 0:e.value)}},t)}),[f,g]);return r().createElement("div",{className:u},n&&d.length>1?null==d?void 0:a()(d).call(d,(function(e,t){return r().createElement("span",{key:e.value},C(e),t!==d.length-1?",":"")})):null!=d&&d.length?C(d[0]):void 0===f?"-":"")}));d.displayName="RefBillReadonly";var s=d},28140:function(e,t,l){l.r(t),l.d(t,{default:function(){return pe}});var n=l(13939),a=l.n(n),o=l(34716),c=l.n(o),r=l(4884),i=l.n(r),u=l(3464),d=l.n(u),s=l(51400),f=l.n(s),v=l(25028),m=l.n(v),b=l(75240),p=l(2664),y=l(58496),h=l(81043),g=l(30112),C=l(72048),k=(l(86456),l(21300),l(76124),l(87912),l(33768),l(29885),l(97308),l(50524)),E=l.n(k),w=l(70696),I=l.n(w),S=l(73980),F=l.n(S),N=l(24244),K=l.n(N),D=l(23992),_=l.n(D),R=l(760),M=l.n(R),x=l(99308),A=l.n(x),T=l(72400),O=l.n(T),q=l(61260),j=l.n(q),B=l(24496),U=l.n(B),z=l(65984),L=l.n(z),P=l(39756),Y=l(14020),Q=l(69984),V=l(47906),H=l(87812),Z=l(38680),G=l(47404),W=l(86132),$=l(84332);function J(e,t){var l=a()(e);if(c()){var n=c()(e);t&&(n=I()(n).call(n,(function(t){return i()(e,t).enumerable}))),l.push.apply(l,n)}return l}function X(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?J(Object(l),!0).forEach((function(t){(0,g.c)(e,t,l[t])})):d()?f()(e,d()(l)):J(Object(l)).forEach((function(t){m()(e,t,i()(l,t))}))}return e}var ee={value:[],label:"",options:[],tableData:{rows:[]},tableConfig:{},tableColumn:[],tableColumnData:[],tableFilterData:[],rowSelected:{},selectedKeys:[],colFilter:{},colSort:{}},te=(0,W.c)((function(e,t){var l=t.type,n=t.payload;switch(l){case G.Mz:e.value=n.value,e.options=n.options,e.selectedKeys=n.selectedKeys,e.selectInfo=n.selectInfo;break;case G.YB:e.value=n.value,e.selectedKeys=n.selectedKeys;break;case G.qe:e.options=n;break;case G.o$:e.tableData=n.data;break;case G.CC:e.tableConfig=n.tableConfig,e.rowSelected=n.rowSelected,e.tableColumn=n.tableColumn,e.tableColumnData=n.tableColumnData,e.selectedKeys=n.selectedKeys,e.selectInfo=n.selectInfo;break;case G.mq:e.tableFilterData=n.tableFilterData,e.rowSelected=n.rowSelected||e.rowSelected,e.selectedKeys=n.selectedKeys||e.selectedKeys,e.selectInfo=n.selectInfo||e.selectInfo;break;case G.eC:e.rowSelected=n.rowSelected,e.selectedKeys=n.selectedKeys,e.selectInfo=n.selectInfo||e.selectInfo;break;case G.iI:e.tableFilterData=[],e.tableData=[],e.colSort={},e.selectInfo=(0,$.SA)();break;case G.Md:e.rowSelected=[],e.selectedKeys=[],e.selectInfo=(0,$.SA)();break;case G.kL:e.selectedKeys=n.selectedKeys,e.rowSelected=n.rowSelected;break;case G.K:e.selectedKeys=n.selectedKeys,e.rowSelected=X(X({},e.rowSelected),n.rowSelected),e.selectInfo=n.selectInfo;break;case G.g7:e.colFilter[n.key]=n.value;break;case G.q_:e.colSort=n}})),le=l(85984),ne=l(63548),ae=l(46276),oe=l(79748),ce=l(94780),re=l(49624),ie=l(16428),ue=l(27448),de=l(57628),se=l(6080),fe=l(37668);function ve(e,t){var l=a()(e);if(c()){var n=c()(e);t&&(n=I()(n).call(n,(function(t){return i()(e,t).enumerable}))),l.push.apply(l,n)}return l}function me(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(l),!0).forEach((function(t){(0,g.c)(e,t,l[t])})):d()?f()(e,d()(l)):ve(Object(l)).forEach((function(t){m()(e,t,i()(l,t))}))}return e}var be=function(e){var t=e.controlMeta,l=e.invokeData,n=e.onChange,a=e.value,o=(0,z.useContext)(P.m).model,c=(0,z.useReducer)(te,ee),r=(0,C.c)(c,2),i=r[0],u=r[1],d=(0,z.useState)(0),s=(0,C.c)(d,2),f=s[0],v=s[1],m=(0,z.useState)([]),g=(0,C.c)(m,2),k=g[0],w=g[1],S=(0,z.useState)(""),N=(0,C.c)(S,2),D=N[0],R=N[1],x=t.pageId,T=t.id,q=t.dataRange,B=void 0===q?{}:q,W=t.propsDisplay,J=t.dispSelected,X=t.refbilltype,ve=t.caption,be=(0,ae.s)(t),pe=be.readonly,ye=be.placeholder,he=be.disabled,ge=be.hidden,Ce=be.required,ke=be.rules,Ee=B.max,we=B.min,Ie=(0,z.useRef)((null==W?void 0:W.split(","))||[]),Se=(0,z.useRef)(!1),Fe=(0,z.useRef)(o.getFileServer()),Ne=(0,z.useRef)(i),Ke=(0,z.useRef)(!1),De=(0,z.useRef)({key:"",filter:"",pageNum:1,pageSize:10,sort:""}),_e=(0,z.useRef)(),Re=1===t.multi,Me=V.DataGrid.CellRender,xe=(0,z.useMemo)((function(){var e;return!E()(e=["bos_user","bos_adminorg"]).call(e,X)}),[X]),Ae=(0,z.useCallback)((function(e){if(n)return n(e);var t={k:T,r:0,v:e};o.batchInvoke("updateValue",x,"",[],[{},[t]])}),[n]),Te=(0,z.useCallback)((function(e){var t,l=I()(t=i.options).call(t,(function(t){return E()(e).call(e,t.value)}));u({type:G.qe,payload:l})}),[i.options,i.selectedKeys]),Oe=(0,z.useCallback)((function(e,t){var l=e?Re?e:[e]:[];u({type:G.YB,payload:{value:e||(Re?[]:""),selectedKeys:l}}),(!Re||Re&&!Se.current)&&Ae(l)}),[Re,Ae]),qe=(0,z.useCallback)((0,Y.Cu)((function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",l=arguments.length>1?arguments[1]:void 0;R(t),l=l||(null==i?void 0:i.value),o.batchInvoke(Z.gR,x,T,[["%",t,"%",null===(e=l)||void 0===e?void 0:F()(e).call(e,0,20),1,0]])})),[i.value,R]),je=(0,z.useCallback)((0,Y.Cu)((function(e){De.current=me(me({},De.current),e);var t=De.current,l=t.key,n=I()(t),a=t.pageNum,c=t.pageSize,r=K()(t);o.batchInvoke(Z.kV,x,T,[[c,a,l,n,r]],[],null==e?void 0:e.callback)})),[x,T]),Be=(0,z.useCallback)((function(){pe||he||(Ke.current=!0,je({}),o.batchInvoke(Z.gd,x,T,[[]]))}),[pe,he,je]),Ue=(0,z.useCallback)((function(){u({type:G.Md})}),[u]),ze=(0,z.useCallback)((function(e){Se.current=e,e&&(Te(i.value),v(1),qe()),Re&&!e&&Ae(i.value)}),[i.value,Te,qe,Ae,Re]),Le=(0,z.useCallback)((function(e){var t,l=e.pkId,n=me({},i.rowSelected),a=W.split(","),o=_()(a).call(a,(function(t){return e[t]})),c=(0,se.sl)(M()(t=[l]).call(t,(0,h.c)(o))),r=new(A())(i.selectedKeys),u=Re?(0,h.c)(r.add(l)):[l],d=Re?(0,h.c)(r.add(l)):l;n[l]=c,Ke.current?je({callback:function(e){if(null!=e&&e.data){var t,n,a,o,c=null===(t=e.data)||void 0===t||null===(t=t[0])||void 0===t||null===(t=t.p)||void 0===t||null===(t=t[0])||void 0===t||null===(t=t.args)||void 0===t||null===(t=t[0])||void 0===t||null===(t=t.data)||void 0===t?void 0:t.rows;if(!c)return;var r=(0,$.AT)({newData:c,key:l,curSelectInfo:i.selectInfo});null==_e||null===(n=_e.current)||void 0===n||null===(a=n.setSelectedInfo)||void 0===a||a.call(n,r),Je(u,l,[l],de.SS.check,r,{newRows:c}),null==e||null===(o=e.data[0])||void 0===o||null===(o=o.p[0])||void 0===o||null===(o=o.args[0])||void 0===o||null===(o=o.data)||void 0===o||o.rows}}}):Oe(d,null)}),[Re,W,i.selectedKeys,je,i.rowSelected,Oe,Je,i.selectInfo]),Pe=(0,z.useCallback)((function(e){var t,l={};(null===(t=i.selectInfo)||void 0===t?void 0:t.selectStatus)!==ue.m_&&(l={selectInfo:(0,$.SA)(),rowSelected:[],selectedKeys:[]}),u({type:G.mq,payload:me({tableFilterData:e},l)}),je({filter:(0,se.Mt)(e),pageNum:1})}),[je,u,i.selectInfo]),Ye=(0,z.useCallback)((function(){Ke.current=!1,De.current={key:"",filter:"",pageNum:1,pageSize:10,sort:""},u({type:G.iI,payload:null})}),[]),Qe=(0,z.useMemo)((function(){var e,t;return M()(e=M()(t='"'.concat(o.getControlText(ve),'"选择数量不能小于')).call(t,we,"，不能大于")).call(e,Ee)}),[Ee,we,ve]),Ve=(0,z.useCallback)((function(e){var t,l=(e||{}).search,n=void 0===l?"":l,a=Array.isArray(i.selectedKeys)?K()(t=(0,h.c)(i.selectedKeys)).call(t):i.selectedKeys;if(Re){var o=(i.selectInfo||{}).selectedCount,c=void 0===o?0:o;if(c>Ee||c<we)return(0,fe.s9)(Qe),!1}return Ke.current=!1,u({type:G.YB,payload:{value:Re?a:a.join(),selectedKeys:a}}),u({type:G.qe,payload:O()(i.rowSelected)}),Ae(Re?(0,se.Om)({selectInfo:i.selectInfo,search:n,filterData:i.tableFilterData||[]}):a.join()),qe("",Re?a:a.join()),Ye(),!0}),[i,Ae,u,Ye,we,Ee,Re,D]),He=(0,z.useCallback)((function(e,t){var l={};if(0===t)delete l[e];else{var n,a=-1===t?"desc":"";l[e]=M()(n="".concat(e)).call(n,a?" "+a:"")}je({sort:l[e]||""}),w([{number:e,isAsc:1===t}]),u({type:G.q_,payload:l})}),[je,w,u]),Ze=(0,z.useCallback)((function(e){var t;je({key:e||"",pageNum:1}),(null===(t=i.selectInfo)||void 0===t?void 0:t.selectStatus)!==ue.m_&&u({type:G.eC,payload:{rowSelected:[],selectedKeys:[],selectInfo:(0,$.SA)()}})}),[je,i.selectInfo]),Ge=(0,z.useCallback)((function(e,t){je({pageNum:e,pageSize:t})}),[je]),We=(0,z.useCallback)((function(e,t){var l=me({},i.rowSelected),n=new(A())(i.selectedKeys);e.forEach((function(e){delete l[e],t||n.delete(e)}));var a=null==t?void 0:t.selectedIds;u({type:G.eC,payload:{rowSelected:l,selectedKeys:a?(0,h.c)(a):(0,h.c)(n),selectInfo:t||i.selectInfo}})}),[i.rowSelected,i.selectedKeys,u]),$e=(0,z.useCallback)((function(e){var t={};return e.forEach((function(e){var l=e.id,n=e._title_;if(n){var a=n.split("|"),o=a[0],c=F()(a).call(a,1).join("｜");t[e.id]={value:l,label:o,des:c}}else{var r=[e.id];Ie.current.forEach((function(t){r.push(e[t])})),t[e.id]=(0,se.sl)(r)}})),t}),[]),Je=(0,z.useCallback)((function(e,t,l,n,a){var o=(arguments.length>5&&void 0!==arguments[5]?arguments[5]:{}).newRows;if(Re){var c=a.notInSelectedIds,r=a.selectStatus,d=a.selectedCount,s=i.tableData,f=o||(null==s?void 0:s.rows);if(r===ue.mw||r===ue.m_&&!d){var v=r===ue.mw?e:[];u({type:G.eC,payload:{rowSelected:[],selectedKeys:v,selectInfo:a}})}else switch(n){case de.SS.uncheck:if(r===ue.gt){b=null==f?void 0:I()(f).call(f,(function(e){return E()(c).call(c,e.id)}));var m=$e(b);u({type:G.K,payload:{rowSelected:m,selectedKeys:e,selectInfo:a}})}else We(l,a);break;case de.SS.check:if(r===ue.mw)return void u({type:G.eC,payload:{rowSelected:[],selectedKeys:e,selectInfo:a}});var b=[],p="";r===ue.gt?(b=null==f?void 0:I()(f).call(f,(function(e){return E()(c).call(c,e.id)})),p=G.eC):(p=G.K,b=null==f?void 0:I()(f).call(f,(function(t){return E()(e).call(e,t.id)})));var y=$e(b);u({type:p,payload:{selectedKeys:e,rowSelected:y,selectInfo:a}})}}else u({type:G.K,payload:{selectedKeys:e}})}),[i.tableData,We,$e,Re]),Xe=(0,z.useCallback)((function(e,t){o.batchInvoke(Z.kD,x,T,[[e.fieldName,t]])}),[x,T]),et=(0,z.useCallback)((function(e){var t,l=o.getConfig(x),n={params:"1",appId:l.appId,fId:l.formId,fileName:e.name},a=M()(t="".concat(e.url,"&kd_cs_ticket=")).call(t,o.Global.token);(0,Y.gr)(a,n)}),[]),tt=(0,oe.c)({pageId:x,fieldKey:T,model:o,baseUrl:Fe,onDownLoad:et}),lt=(0,z.useCallback)((function(e,t){o.batchInvoke(Z.kD,x,T,[[e,t]])}),[x,T]),nt=(0,z.useCallback)((function(e,t){var l,n;e.forEach((function(t,l){t.value.forEach((function(t){"all"===t.type&&j()(e).call(e,l,1)}))}));var a=(null==i?void 0:i.tableFilterData)||[],o=(null==a||null===(l=I()(a))||void 0===l?void 0:l.call(a,(function(e){return e.fieldName!==t})))||[],c=M()(n=[]).call(n,(0,h.c)(e),(0,h.c)(o));Pe(c)}),[Pe,i.tableFilterData]),at=(0,z.useCallback)((function(e,t,l){var n="nocodedecimalfield"===e.type?"right":"",a={align:n,title:e.name,number:e.number,type:e.type};return{code:e.number,title:L().createElement(V.TableTitle,a),width:200,align:n,lock:!1,render:function(n,a,c){var r;if(E()(r=["nocodeimageuploadfield","nocodeattachmentuploadfield","nocodeselectitemfield","nocodeentryentity","nocoderichtextfield","nocodegraphicdisplayfield"]).call(r,e.type)){var i,u=n;"nocodeselectitemfield"===e.type&&(u=Array.isArray(n)?_()(n).call(n,(function(e){return me(me({},e),{},{label:o.getControlText(e.name)})})):[]);var d={};return E()(i=["nocodeimageuploadfield","nocodeattachmentuploadfield"]).call(i,e.type)?d={baseUrl:Fe.current,onDownLoad:et,value:u,record:a,rowIndex:c}:"nocodeentryentity"===e.type&&(d={getTableData:ot,appId:t,formId:l,baseUrl:Fe.current,onDownLoad:et}),ct(e.type,n,a,c,e.number,e.name,d)}return null===n?"":"boolean"==typeof n?n?"是":"否":"object"===(0,y.c)(n)?U()(n):n}}}),[He,et]),ot=function(e,t,l,n,a,c,r){o.batchInvoke(Z.iA,x,T,[[e,n,l,t]],[],r)},ct=function(e,t,l,n,a,o,c){var r={type:e,value:t,readOnly:!0,id:null==l?void 0:l.id,title:o,fieldName:a};return l.isAgg&&(r=me(me({},r),{},{type:"aggregate",selectedItem:t||{},fieldName:a,readOnly:!1})),L().createElement(Me,(0,p.c)({},r,c))},rt=(0,z.useCallback)((function(e){var t=e.id;o.batchInvoke(Z.E_,x,T,[[t,W,T]])}),[x,T,W]),it=(0,z.useCallback)((function(e,t){e.stopPropagation(),rt(t)}),[rt]),ut=(0,z.useCallback)((function(e){var t=e.listItemConfig,l=[],n=[];return t.forEach((function(t){l.push(at(t,e.appId,e.formId)),n.push({key:t.number,title:t.name})})),xe&&l.push({code:"operator",title:"操作",width:100,lock:!0,render:function(e,t,l){return L().createElement(V.BtnField,{type:"text",major:!0,onClick:function(e){return it(e,t)}},"编辑")}}),me(me({},e),{},{data:n,column:l,editF7Record:rt})}),[xe,rt]),dt=(0,z.useCallback)((function(e){var t={},l=[];e.selected.forEach((function(e,n){n<=se.cX&&(t[e[0]]=(0,se.sl)(e)),l.push(e[0])}));var n=ut(e.data.rows[0]),a={selectStatus:ue.m_,selectedIds:l,notInSelectedIds:[],selectedCount:l.length};u({type:G.CC,payload:{tableConfig:e.data.rows[0],tableColumn:n.column,tableColumnData:n.data,rowSelected:t,selectedKeys:l,selectInfo:a}})}),[ut,u]),st=(0,z.useCallback)((0,Y.Cu)((function(){o.batchInvoke("addNewRef",x,T,[[W,T]])})),[W,x,T]),ft=(0,z.useMemo)((function(){return 2===f?D?L().createElement(H.c,{text:"暂无搜索结果"}):L().createElement(H.c,{text:"暂无数据",img:le}):1===f?L().createElement(ne.Spin,{name:"Spin"}):L().createElement("div",null)}),[f,D]),vt=(0,z.useCallback)((function(e){if(Array.isArray(null==e?void 0:e.v)){var t=(0,se.YP)(e.v),l=(0,C.c)(t,2),n=l[0],a=l[1];u({type:G.Mz,payload:{value:Re?n:n.join(),options:a,selectedKeys:n,selectInfo:(0,$.SA)({selectedIds:n})}})}else{var o=Re?[]:"";Se.current&&!Re?u({type:G.YB,payload:{value:o,selectedKeys:[]}}):u({type:G.Mz,payload:{value:o,options:[],selectedKeys:[],selectInfo:(0,$.SA)()}})}}),[Re,u,qe,se.sl]),mt=(0,z.useCallback)((function(e){var t,l=null==e||null===(t=e.data)||void 0===t?void 0:_()(t).call(t,(function(e){var t=(0,b.c)(e),l=t[0],n=F()(t).call(t,1),a=l?JSON.parse(l):{};return me(me({},(0,se.sl)(n)),{},{disabled:"disabled"===a._state_})}));(0,ie.unstable_batchedUpdates)((function(){var t;u({type:G.qe,payload:l}),v((null==e||null===(t=e.data)||void 0===t?void 0:t.length)>0?0:2)}))}),[v,se.sl]),bt=(0,z.useCallback)((function(e){var t,l,n,a;if(e){var c=e[0],r=c.methodname,i=c.args;switch(r){case Z.Ex:mt(i[0]);break;case Z.ct:u({type:G.o$,payload:i[0]});break;case Z.WK:i[0].selected=(null===(t=i[0])||void 0===t?void 0:t.selected)||[],dt(i[0]);break;case Z.__:u({type:G.g7,payload:{key:i[0].args[0],value:i[0].data.rows[0]}});break;case Z.S6:i[0].data.rows[0],u({type:G.g7,payload:{key:i[0].args[0],value:i[0].data.rows[0]}});break;case Z.kT:vt({v:i[0]});break;case G.Tb:(0,re.M)(i[0]);break;case G.op:(0,re.Q)(i[0]);break;case Z.c$:Le(i[0]);break;case"setQuery":o.emitEvent(r,me(me({},i[0]),{},{args:{formId:null===(l=i[0])||void 0===l?void 0:l.args[0],param:null===(n=i[0])||void 0===n?void 0:n.args[1]}}));break;case"listConfig":o.emitEvent("setListConfig",me(me({},i[0]),{},{args:{formId:null===(a=i[0])||void 0===a?void 0:a.args[0]}}))}}}),[Le,vt,v,u,dt,mt]);o.useUpdateControlStates(t,vt),o.useInvokeControlMethod(t,bt),(0,z.useEffect)((function(){bt(l)}),[l]),(0,z.useEffect)((function(){vt({v:a})}),[a]),(0,z.useEffect)((function(){Ne.current=i}),[i]),(0,z.useEffect)((function(){vt({v:e.value})}),[]);var pt=(0,z.useMemo)((function(){var e;return null===(e=i.options)||void 0===e?void 0:I()(e).call(e,(function(e){var t;return null===(t=i.value)||void 0===t?void 0:E()(t).call(t,e.value)}))}),[i.value,i.options]);return ge?null:L().createElement(Q.c,{controlMeta:t,required:Ce,rules:ke},pe?L().createElement(ce.c,{data:pt,multi:Re,meta:t,model:o}):L().createElement(V.RefBill,{showSearch:!0,value:(null==i?void 0:i.value)||"",placeholder:ye,disabled:he,options:(null==i?void 0:i.options)||[],dataRange:B||{},mode:Re?"multiple":"single",allowClear:null==t?void 0:t.ShowClearButton,notFoundContent:ft,tablePrimaryKey:"id",tableSorts:k,tableColFilter:null==i?void 0:i.colFilter,tableData:null==i?void 0:i.tableData,tableConfig:null==i?void 0:i.tableConfig,tableColumn:null==i?void 0:i.tableColumn,tableColumnData:null==i?void 0:i.tableColumnData,tableFilterData:null==i?void 0:i.tableFilterData,tableSelected:null!=i&&i.rowSelected?O()(null==i?void 0:i.rowSelected):[],tableSelectedKeys:(null==i?void 0:i.selectedKeys)||[],showSelected:1===J,f7ContentRef:_e,f7Options:{showAddRecord:xe,onAddRecord:st},refBillProps:tt,f7SelectInfo:i.selectInfo,allowSelectAll:!0,onChange:Oe,onSearch:qe,onVisibleChange:ze,moreClick:Be,onF7Search:Ze,onF7FilterChange:Pe,onF7PageChange:Ge,onF7Ok:Ve,onF7Cancel:Ye,onF7Clean:Ue,onF7DelSelect:We,onF7RowSelectChange:Je,f7ColHeadFilter:i.colFilter,onF7ColHeadFilterVisibleChange:Xe,onF7Sort:He,onF7TitleFilterConfirm:nt,onF7TitleFilterShow:lt}))};be.displayName="KDRefBill";var pe=L().memo(be)},47404:function(e,t,l){l.d(t,{CC:function(){return u},K:function(){return f},Md:function(){return m},Mz:function(){return o},Tb:function(){return g},YB:function(){return c},eC:function(){return s},g7:function(){return d},iI:function(){return y},kL:function(){return v},mq:function(){return b},o$:function(){return i},op:function(){return C},q_:function(){return p},qe:function(){return r},uW:function(){return h}});var n=l(59992),a=l.n(n),o=a()("更新下拉数据"),c=a()("设置下拉选中值"),r=a()("设置下拉选项"),i=a()("设置F7表格数据"),u=a()("设置F7表格配置信息"),d=a()("设置F7表格请求过滤条件"),s=(a()("F7单个删除已选"),a()("设置F7表格行选择数据")),f=a()("更新F7表格行选择数据和下标"),v=a()("设置F7表格行选择数据下标"),m=a()("F7点击清空按钮"),b=a()("设置表格筛选项"),p=a()("表格列排序"),y=a()("关闭F7弹窗"),h="showInfo",g="showUserInfo",C="showOrgInfo"},76352:function(e,t,l){l.d(t,{c:function(){return f}});var n=l(70696),a=l.n(n),o=l(23992),c=l.n(o),r=l(65984),i=l.n(r),u=l(47906),d="rf4exZZu_operator",s=(0,r.memo)((function(e){var t=e.onItemClick,l=e.disabled,n=e.record,o=e.isF7,s=(0,r.useRef)([{key:"edit",title:"编辑",isF7:!0},{key:"detail",title:"详情",isF7:!1},{key:"delete",title:"删除",isF7:!1}]),f=(0,r.useCallback)((function(e,l,n){e.stopPropagation(),null==t||t(l,n)}),[t]),v=(0,r.useMemo)((function(){var e;return a()(e=s.current).call(e,(function(e){return e.isF7===o}))}),[o]);return i().createElement("div",{className:d},c()(v).call(v,(function(e){var t=e.key,a=e.title;return i().createElement(u.BtnField,{key:t,type:"text",disabled:"detail"!==t&&l,major:!0,onClick:function(e){return f(e,t,n)}},a)})))}));s.displayName="OperatorFields";var f=s},49624:function(e,t,l){l.d(t,{Q:function(){return I},M:function(){return w}});var n=l(65984),a=l.n(n),o=l(63548),c=l(47906),r=l(72048),i=l(23992),u=l.n(i),d=(l(86456),l(21300),l(82504));var s="LQ9dRkQy_org_info",f="rbAUWmcE_organization",v="_0bsE9HyI_item",m="vYz5ajTk_managers",b="IKj-Z2b9_title",p="cBOpquAU_list",y="_0bCnRGBO_user_info",h="RCOCClI1_table",g=(0,n.memo)((function(e){var t,l=e.data;return a().createElement("div",{className:y},a().createElement("div",null,a().createElement("div",{className:v},a().createElement("div",{className:b},"员工编号"),a().createElement("div",null,(null==l?void 0:l.number)||"-")),a().createElement("div",{className:v},a().createElement("div",{className:b},"姓名"),a().createElement("div",null,(null==l?void 0:l.name)||"-"))),a().createElement("div",null,a().createElement("div",{className:v},a().createElement("div",{className:b},"头像"),a().createElement(c.Avatar,{src:null==l?void 0:l.avatar,alt:""})),a().createElement("div",{className:v},a().createElement("div",{className:b},"性别"),a().createElement("div",null,(null==l?void 0:l.gender)||"-"))),a().createElement("div",null,a().createElement("div",{className:v},a().createElement("div",{className:b},"生日"),a().createElement("div",null,(null==l?void 0:l.birthday)||"-")),a().createElement("div",{className:v},a().createElement("div",{className:b},"手机号"),a().createElement("div",null,(null==l?void 0:l.phone)||"-"))),a().createElement("div",null,a().createElement("div",{className:v},a().createElement("div",{className:b},"邮箱"),a().createElement("div",null,(null==l?void 0:l.email)||"-"))),(null==l?void 0:l.orgs)&&(null==l?void 0:l.orgs.length)>0&&a().createElement("div",{className:h},a().createElement("table",{cellSpacing:1,cellPadding:1},a().createElement("tr",null,a().createElement("th",null,"所属组织编码"),a().createElement("th",null,"组织名称")),null==l||null===(t=l.orgs)||void 0===t?void 0:u()(t).call(t,(function(e,t){return a().createElement("tr",{key:e.orgNum+t},a().createElement("td",null,e.orgNum),a().createElement("td",null,e.orgName))})))))})),C=(0,n.memo)((function(e){var t,l,o=e.org,i=e.columns,y=o||{},h=(y.id,y.name),g=y.number,C=(y.parentid,y.parentname),k=y.users,E=(0,n.useState)(200),w=(0,r.c)(E,2),I=w[0],S=w[1],F=(0,n.useRef)(null),N=(0,n.useMemo)((function(){var e;return(null==k||null===(e=k.extra)||void 0===e||null===(e=e.managers)||void 0===e?void 0:u()(e).call(e,(function(e){return e.name})).join("、"))||"-"}),[k]),K=(0,n.useMemo)((function(){return(null==k?void 0:k.rows)||[]}),[k]);return t=F.current,l=function(e){S(e[0].contentRect.height-50)},(0,n.useEffect)((function(){if(t){var e=t&&new d.c(l);return e&&e.observe(t),function(){e&&e.disconnect(t)}}console.warn("useResizeMeasure指定的元素不存在")}),[t,l]),a().createElement("div",{className:s},a().createElement("div",{className:f},a().createElement("div",{className:v},a().createElement("div",{className:b},"组织编号"),a().createElement("div",null,g||"-")),a().createElement("div",{className:v},a().createElement("div",{className:b},"组织名称"),a().createElement("div",null,h||"-")),a().createElement("div",{className:v},a().createElement("div",{className:b},"上级组织"),a().createElement("div",null,C||"-")),a().createElement("div",{className:v},a().createElement("div",{className:b},"组织负责人"),a().createElement("div",{className:m},N||"-"))),a().createElement("div",{ref:F,className:p},a().createElement(c.DataGrid,{emptyCellHeight:I,style:{overflow:"auto",flex:"auto"},primaryKey:"id",useVirtual:!0,columns:i,dataSource:K})))})),k=l(14020),E=[{code:"number",name:"员工编号",width:178},{code:"name",name:"员工姓名",width:178},{code:"avatar",name:"员工头像",align:"center",width:178,render:function(e){return a().createElement(c.Avatar,{src:e,alt:""})}},{code:"opera",lock:!0,name:"操作",width:100,render:function(e,t,l){return a().createElement(c.BtnField,{type:"text",major:!0,onClick:function(){return w(t)}},"详情")}}],w=function(e){var t=(0,k.k3)(520,640,640,a().createElement(g,{data:e}));o.Modal.confirm({title:"人员信息",showline:!0,footer:null,titleIcon:null,style:{position:"absolute"},destroyOnClose:!0,width:640,height:t,type:"normal",bodyStyle:{padding:0,overflow:"hidden"},body:a().createElement(g,{data:e}),closable:!0,maskClosable:!1})},I=function(e){var t=(0,k.k3)(520,748);o.Modal.confirm({title:"组织信息",showline:!0,titleIcon:null,footer:null,width:720,height:t,style:{position:"absolute"},destroyOnClose:!0,type:"normal",bodyStyle:{padding:0,display:"flex",overflow:"hidden",flexBasis:0},body:a().createElement(C,{org:e,columns:E}),closable:!0,maskClosable:!1})}}}]);