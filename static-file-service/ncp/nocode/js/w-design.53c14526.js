"use strict";(self.webpackChunknocode_platform=self.webpackChunknocode_platform||[]).push([[712],{17816:function(e,t,a){a.r(t),t.default={formheader:"N5mQvldk_formheader",formheader_mb:"GmLA48Qs_formheader_mb"}},56124:function(e,t,a){a.r(t),t.default={header:"EKFI1FZG_header",header_main:"o69fZx-U_header_main"}},62500:function(e,t,a){a.r(t),t.default={header_formname:"-l8F5Byn_header_formname",header_formname_input:"jZHRzDD-_header_formname_input",header_formname_editicon:"oSIYjYRW_header_formname_editicon"}},13246:function(e,t,a){a.r(t),t.default={header_iconmenu:"V9HBm0UE_header_iconmenu",header_iconmenu_item:"WO+6Ug6l_header_iconmenu_item",txt:"nsfAJW4N_txt",dropDownContent:"C5KkiAWE_dropDownContent",dropDownContent_shortcut:"EpVGicOG_dropDownContent_shortcut",dropDownContent_shortcut_name:"cmX7B94h_dropDownContent_shortcut_name",dropDownContent_shortcut_key:"_0ksj9FgZ_dropDownContent_shortcut_key",text_block:"k+rVwe4x_text_block",dropDownContent_setting:"Hf5BtD3p_dropDownContent_setting",dropDownContent_setting_header:"_7Xxo4SvG_dropDownContent_setting_header",title:"vRsI11hv_title",dropDownContent_setting_list:"l0PfQVKU_dropDownContent_setting_list",pd16:"G74MOBrN_pd16"}},45664:function(e,t,a){a.r(t),t.default={wrapper:"na4XqVfP_wrapper",designer_header:"q+luMOLg_designer_header","ml-4":"xLOoFh52_ml-4",leftnav:"tkM9+f8q_leftnav",leftnav_container:"Yr1O64De_leftnav_container",leftnav_container_appname:"-XxwKOZ3_leftnav_container_appname",leftnav_container_input:"Oqryz4GH_leftnav_container_input",leftnav_container_editicon:"+ngLHrAs_leftnav_container_editicon",mainnav:"M-KJn5yB_mainnav",selected:"dm+wQr7m_selected",rightnav:"ScBmty+p_rightnav",btn_group:"_1DtOJstv_btn_group",save_btn:"E4afXEha_save_btn",seperator:"_6re2UJq0_seperator",btn_dropdown:"caHLk9ty_btn_dropdown",isOpen:"nV9jktt2_isOpen","rightnav-preview":"_9JpLHwHh_rightnav-preview","rightnav-save":"kduHZi+K_rightnav-save",designer_container:"_91NWTgXR_designer_container",dropdown_panel:"+vamI9FO_dropdown_panel"}},94958:function(e,t,a){a.r(t),t.default={header_nav:"GWucqz0j_header_nav",header_nav_container:"Ovudhbpp_header_nav_container",header_nav_menu:"q2r5C6zu_header_nav_menu",header_nav_menu_item:"i1eYlHah_header_nav_menu_item",header_nav_menu_item_divider:"_4rcXUi6A_header_nav_menu_item_divider"}},38219:function(e,t,a){a.r(t),t.default={previewDrawer:"xa+JxNkw_previewDrawer",previewDrawer_header:"_0Y00Uccl_previewDrawer_header",previewDrawer_header_left:"_94E5LyOR_previewDrawer_header_left",previewDrawer_header_right:"iLn3TLma_previewDrawer_header_right",previewDrawer_header_right_item:"f0MFwGxo_previewDrawer_header_right_item",previewDrawer_body:"OwMLJETf_previewDrawer_body",previewDrawer_body_main:"_7NfsrbFG_previewDrawer_body_main",mobile:"_3tjLCE0q_mobile",previewDrawer_body_main_header:"_9H-iaskn_previewDrawer_body_main_header",previewDrawer_body_main_qrcode:"l5S1-9Q8_previewDrawer_body_main_qrcode",mask:"_0InI0WoP_mask"}},80796:function(e,t,a){a.r(t),t.default={previewQRcode:"_1X2dT0lb_previewQRcode",previewQRcode_title:"cvQ9OGf6_previewQRcode_title",previewQRcode_main:"_0eShNd7R_previewQRcode_main",previewQRcode_main_icon:"L9kGpJZb_previewQRcode_main_icon"}},37064:function(e,t,a){a.r(t),t.default={loading_wrapper:"-Wi07ZPx_loading_wrapper",hidden:"f6VImrSN_hidden"}},4440:function(e,t,a){var n=a(25028),r=a(9564);n(t,"__esModule",{value:!0}),t.getFormData=function(e){return d.apply(this,arguments)},t.getFormMetaData=function(e){return f.apply(this,arguments)},t.setFormData=function(e){return c.apply(this,arguments)};var l=r(a(29052)),u=r(a(760)),i=r(a(94924)),o=a(50460);function d(){return(d=(0,i.default)(l.default.mark((function e(t){var a,n,r,i,d;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.appId,r=t.targetFormId,i=(0,u.default)(a="nocode/v2/".concat(n,"/form/")).call(a,r),e.next=4,(0,o.get)(i,{});case 4:return d=e.sent,e.abrupt("return",d);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(){return(c=(0,i.default)(l.default.mark((function e(t){var a,n,r,i,d,c;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.appId,r=t.targetFormId,i=t.params,d=(0,u.default)(a="nocode/v2/".concat(n,"/")).call(a,r),e.next=4,(0,o.post)(d,{data:i});case 4:return c=e.sent,e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){return(f=(0,i.default)(l.default.mark((function e(t){var a,n,r,i,d;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.appId,r=t.targetFormId,i=(0,u.default)(a="nocode/v2/".concat(n,"/form/")).call(a,r,"?metadata=true"),e.next=4,(0,o.get)(i,{});case 4:return d=e.sent,e.abrupt("return",d);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},59876:function(e,t,a){a(25028)(t,"__esModule",{value:!0}),t.DEFAULT_FORM_IMAGE=t.DEFAULT_APP_IMAGE=void 0;t.DEFAULT_APP_IMAGE="nocode/v2/nocode_sys/common/svgs/create_svg?color=%233987ED&svg=svg18",t.DEFAULT_FORM_IMAGE="nocode/v2/nocode_sys/common/svgs/create_svg_line?color=%233987ED&svg=svg64"},75020:function(e,t,a){var n=a(25028),r=a(9564);n(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=(0,u.useRef)({fn:e,timer:null}).current,r=(0,u.useRef)(!0);return(0,u.useEffect)((function(){n.fn=e}),[e]),(0,u.useCallback)((function(){for(var e=arguments.length,u=new Array(e),i=0;i<e;i++)u[i]=arguments[i];n.timer&&clearTimeout(n.timer),a&&r.current&&(r.current=!1,n.fn.apply(n,u)),n.timer=(0,l.default)((function(){n.fn.apply(n,u)}),t)}),[e])};var l=r(a(67584)),u=a(65984)},29588:function(e,t,a){var n=a(25028),r=a(9564);n(t,"__esModule",{value:!0}),t.useWindowSize=function(){var e=(0,u.useState)((function(){var e=window;return{width:e.innerWidth,height:e.innerHeight}})),t=(0,l.default)(e,2),a=t[0],n=t[1],r=function(e){var t=e.width,a=e.height;n({width:t,height:a})};return(0,u.useEffect)((function(){var e=(0,i.addResizeObserve)(document.body,r);return function(){e&&e.removeResizeObserve()}}),[]),a};var l=r(a(78912)),u=a(65984),i=a(57264)},732:function(e,t,a){a(25028)(t,"__esModule",{value:!0}),t.default=void 0;var n=a(65984),r=a(41936),l=a(34896);t.default=function(){var e=(0,r.useNavigate)(),t=(0,r.useLocation)().search;return(0,n.useCallback)((function(a,n){a=(0,l.urlParamWithDebug)(a,t),e(a,n)}),[t,e])}},78016:function(e,t,a){var n=a(13939),r=a(34716),l=a(70696),u=a(4884),i=a(3464),o=a(51400),d=a(25028),c=a(9564);d(t,"__esModule",{value:!0}),t.init=function(){var e;null===(e=window.document.querySelector("body"))||void 0===e||e.addEventListener("click",g)},t.publishUserEvent=t.publishSearchUserEvent=t.publishClickUserEvent=void 0;var f=c(a(78912)),p=c(a(96631)),s=a(88268),_=a(90568);function m(e,t){var a=n(e);if(r){var i=r(e);t&&(i=l(i).call(i,(function(t){return u(e,t).enumerable}))),a.push.apply(a,i)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),!0).forEach((function(t){(0,p.default)(e,t,a[t])})):i?o(e,i(a)):m(Object(a)).forEach((function(t){d(e,t,u(a,t))}))}return e}t.publishUserEvent=function(e){(0,_.publishEvent)(s.USER_ACTION_EVENT,e)};var h=t.publishClickUserEvent=function(e){var t=v({page:window.location.pathname,prepage:window.document.referrer,eventName:"click",controlName:"",controlType:"",type:"",controlId:""},e);(0,_.publishEvent)(s.USER_ACTION_EVENT,t)};t.publishSearchUserEvent=function(e){var t=v({eventName:"search"},e);(0,_.publishEvent)(s.USER_ACTION_EVENT,t)};function g(e){!function e(t){var a;if(t&&"BODY"!==(null==t?void 0:t.tagName)){var n=null==t||null===(a=t.dataset)||void 0===a?void 0:a.ncAction;if(n){var r=n.split("|"),l=(0,f.default)(r,3),u=l[0],i=l[1],o=l[2];h({appId:u,formId:i,action:o})}else{e(t.parentNode)}}}(e.target)}},66028:function(e,t,a){var n=a(13939),r=a(34716),l=a(70696),u=a(4884),i=a(3464),o=a(51400),d=a(25028),c=a(9564);d(t,"__esModule",{value:!0}),t.assignDataReducer=void 0;var f=c(a(96631));function p(e,t){var a=n(e);if(r){var i=r(e);t&&(i=l(i).call(i,(function(t){return u(e,t).enumerable}))),a.push.apply(a,i)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){(0,f.default)(e,t,a[t])})):i?o(e,i(a)):p(Object(a)).forEach((function(t){d(e,t,u(a,t))}))}return e}t.assignDataReducer=function(e,t){return s(s({},e),t)}},34896:function(e,t,a){var n=a(25028),r=a(9564);n(t,"__esModule",{value:!0}),t.urlParamWithDebug=void 0;var l=r(a(50524)),u=r(a(760)),i=["kdweb_debug","kdweb_cdn","kdcdc"];t.urlParamWithDebug=function(e,t){for(var a=0;a<i.length;a++)if(null!=t&&(0,l.default)(t).call(t,i[a]))return(0,u.default)(e).call(e,t);return e}},70356:function(e,t,a){var n=a(13568),r=a(93252),l=a(25028),u=a(4884),i=a(9564);l(t,"__esModule",{value:!0}),t.default=void 0;var o=i(a(96631)),d=i(a(78912)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var a=v(t);if(a&&a.has(e))return a.get(e);var r={__proto__:null},i=l&&u;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var d=i?u(e,o):null;d&&(d.get||d.set)?l(r,o,d):r[o]=e[o]}return r.default=e,a&&a.set(e,r),r}(a(65984)),f=a(41936),p=a(4440),s=a(60644),_=i(a(71252)),m=i(a(17816));function v(e){if("function"!=typeof r)return null;var t=new r,a=new r;return(v=function(e){return e?a:t})(e)}t.default=function(e){var t=e.title,a=e.children,n=e.isMb,r=(0,f.useParams)(),l=r.targetFormId,u=r.appId,i=(0,c.useState)(t),v=(0,d.default)(i,2),h=v[0],g=v[1];return(0,c.useEffect)((function(){(0,s.isUndefined)(t)&&(0,p.getFormData)({appId:u,targetFormId:l}).then((function(e){var t,a=(null==e||null===(t=e.rows)||void 0===t?void 0:t[0])||{};g(a.name)})).catch((function(e){}))}),[]),c.default.createElement(c.default.Fragment,null,c.default.createElement("div",{className:(0,_.default)(m.default.formheader,(0,o.default)({},m.default.formheader_mb,n))},h),a)}},1520:function(e,t,a){var n=a(13568),r=a(93252),l=a(25028),u=a(4884),i=a(9564);l(t,"__esModule",{value:!0}),t.default=void 0;var o=i(a(23992)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var a=p(t);if(a&&a.has(e))return a.get(e);var r={__proto__:null},i=l&&u;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var d=i?u(e,o):null;d&&(d.get||d.set)?l(r,o,d):r[o]=e[o]}return r.default=e,a&&a.set(e,r),r}(a(65984)),c=i(a(71252)),f=i(a(56124));function p(e){if("function"!=typeof r)return null;var t=new r,a=new r;return(p=function(e){return e?a:t})(e)}var s=(0,d.memo)((function(e){var t=e.children,a=e.className;return d.default.createElement("div",{className:(0,c.default)(f.default.header,a)},null==t?void 0:(0,o.default)(t).call(t,(function(e,t){return d.default.cloneElement(e,{key:t})})))}));s.displayName="Header";var _=(0,d.memo)((function(e){var t=e.children,a=e.className;return d.default.createElement("div",{className:a},t)}));_.displayName="HeaderLeft";var m=(0,d.memo)((function(e){var t=e.children,a=e.className;return d.default.createElement("div",{className:(0,c.default)(f.default.header_main,a)},t)}));m.displayName="HeaderMain",s.Left=_,s.Main=m,s.Right=_;t.default=s},51368:function(e,t,a){var n=a(13568),r=a(93252),l=a(25028),u=a(4884),i=a(9564);l(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var a=c(t);if(a&&a.has(e))return a.get(e);var r={__proto__:null},i=l&&u;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var d=i?u(e,o):null;d&&(d.get||d.set)?l(r,o,d):r[o]=e[o]}return r.default=e,a&&a.set(e,r),r}(a(65984)),d=i(a(21363));function c(e){if("function"!=typeof r)return null;var t=new r,a=new r;return(c=function(e){return e?a:t})(e)}var f=(0,o.memo)((function(e){return o.default.createElement(d.default,e)}));f.displayName="QRCode";t.default=f},14552:function(e,t,a){a(25028)(t,"__esModule",{value:!0}),t.DesignerSkeleton=void 0;t.DesignerSkeleton=[{width:"100%",height:"100%",background:"#ECEEF2",child:[{width:"280px",height:"100%",type:"MENU",child:[{width:"216px",height:"28px",margin:"12px",type:"INPUT"},{width:"64px",height:"20px",margin:"16px 12px 12px 12px",type:"INPUT"},{width:"auto",height:"auto",flexWrap:"wrap",margin:"0px 0px 0px 12px",child:[{width:"80px",height:"72px",margin:"0px 8px 8px 0px",type:"INPUT",repeat:12}]},{width:"64px",height:"20px",margin:"20px 12px 12px 12px",type:"INPUT"},{width:"auto",height:"auto",flexWrap:"wrap",margin:"0px 0px 0px 12px",child:[{width:"80px",height:"72px",margin:"0px 8px 8px 0px",type:"INPUT",repeat:12}]},{width:"64px",height:"20px",margin:"20px 12px 12px 12px",type:"INPUT"},{width:"auto",height:"auto",flexWrap:"wrap",margin:"0px 0px 0px 12px",child:[{width:"80px",height:"72px",margin:"0px 8px 8px 0px",type:"INPUT",repeat:3}]}]},{width:"calc(100vw - 600px)",height:"auto",type:"CONCENT",margin:"20px",child:[{width:"100%",height:"auto",margin:"1px 0px",flexDirection:"row",flexWrap:"wrap",child:[{width:"50%",height:"auto",flexDirection:"column",repeat:3,child:[{width:"48px",height:"16px",type:"INPUT",margin:"0px 0px 12px 12px"},{width:"calc(100% - 24px)",height:"36px",type:"INPUT",margin:"0px 0px 24px 12px"}]},{width:"50%",height:"auto",flexDirection:"column",child:[{width:"48px",height:"16px",type:"INPUT",margin:"0px 0px 12px 12px"},{width:"50%",height:"36px",flexDirection:"row",child:[{width:"120px",height:"36px",type:"INPUT",margin:"0px 4px 0px 12px",repeat:2}]}]},{width:"100%",height:"auto",flexDirection:"column",child:[{width:"48px",height:"16px",type:"INPUT",margin:"0px 0px 12px 12px"},{width:"calc(100% - 24px)",height:"76px",type:"INPUT",margin:"0px 0px 24px 12px"}]},{width:"100%",height:"auto",flexDirection:"column",child:[{width:"48px",height:"16px",type:"INPUT",margin:"0px 0px 12px 12px"},{width:"calc(100% - 24px)",height:"88px",type:"INPUT",margin:"0px 0px 8px 12px"}]},{width:"100%",height:"auto",type:"HEAD",child:[{width:"92px",height:"28px",type:"INPUT"},{width:"280px",height:"28px",type:"INPUT",margin:"0px 12px 24px 12px"}]}]}]},{width:"280px",height:"auto",type:"MENU",child:[{width:"32px",height:"20px",type:"INPUT",margin:"24px 12px"},{width:"48px",height:"26px",type:"INPUT",margin:"0px 12px"},{width:"256px",height:"36px",type:"INPUT",margin:"12px"},{width:"256px",height:"16px",margin:"12px",type:"HEAD",child:[{width:"48px",height:"16px",type:"INPUT",margin:"0px"},{width:"31px",height:"16px",type:"INPUT"}]},{width:"48px",height:"16px",type:"INPUT",margin:"12px"},{width:"256px",height:"36px",type:"INPUT",margin:"0px 12px 24px 12px"},{width:"48px",height:"16px",type:"INPUT",margin:"0px 12px 12px 12px"},{width:"100%",height:"auto",flexDirection:"row",flexWrap:"wrap",child:[{width:"80px",height:"16px",type:"INPUT",repeat:6,margin:"0px 42px 12px 12px"}]},{width:"100%",height:"1px",type:"INPUT",margin:"24px 0px"},{width:"32px",height:"20px",type:"INPUT"},{width:"48px",height:"16px",type:"INPUT",margin:"24px 0px 0px 12px"},{width:"256px",height:"36px",type:"INPUT",margin:"12px"},{width:"48px",height:"16px",type:"INPUT",margin:"12px"},{width:"256px",height:"36px",type:"INPUT",margin:"0px 12px 12px 12px"},{width:"256px",height:"16px",margin:"12px",repeat:2,type:"HEAD",flexDirection:"row",child:[{width:"48px",height:"16px",type:"INPUT",margin:"0px"},{width:"31px",height:"16px",type:"INPUT"}]},{width:"256px",height:"28px",type:"INPUT",margin:"0px 12px 12px 12px"},{width:"256px",height:"36px",margin:"12px",type:"HEAD",flexDirection:"row",child:[{width:"48px",height:"16px",type:"INPUT",margin:"0px"},{width:"31px",height:"16px",type:"INPUT"}]}]}]}]},76040:function(e,t,a){var n=a(13568),r=a(93252),l=a(25028),u=a(4884),i=a(9564);l(t,"__esModule",{value:!0}),t.default=void 0;var o=i(a(78912)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var a=p(t);if(a&&a.has(e))return a.get(e);var r={__proto__:null},i=l&&u;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var d=i?u(e,o):null;d&&(d.get||d.set)?l(r,o,d):r[o]=e[o]}return r.default=e,a&&a.set(e,r),r}(a(65984)),c=a(63548),f=i(a(62500));function p(e){if("function"!=typeof r)return null;var t=new r,a=new r;return(p=function(e){return e?a:t})(e)}var s="doubleClick";t.default=function(e){var t=e.formName,a=e.updateFormName,n=e.placeholder,r=void 0===n?"请输入表单名称":n,l=e.tips,u=void 0===l?"点击修改表单名称":l,i=e.doubleClickTips,p=void 0===i?"双击修改表单名称":i,_=e.defaultName,m=void 0===_?"未命名表单":_,v=(0,d.useRef)(null),h=(0,d.useState)(t===m),g=(0,o.default)(h,2),w=g[0],x=g[1],E=(0,d.useState)(t),y=(0,o.default)(E,2),b=y[0],N=y[1];(0,d.useEffect)((function(){N(t),x(t===m)}),[t]),(0,d.useEffect)((function(){v.current&&w&&v.current.select()}),[]),(0,d.useEffect)((function(){w!==s?w&&v.current.focus():v.current.select()}),[w]);var D=(0,d.useCallback)((function(e){a(e),I(e),N(e),x(!1)}),[]),I=function(e){document.title="配置：".concat(e)};return d.default.createElement("div",{className:f.default.header_formname},w?d.default.createElement(c.Input,{allowClear:!0,defaultValue:b,value:b,onChange:function(e){var t=e.target.value;N(t)},onBlur:function(e){var a=e.target.value;D(a||t||m)},onPressEnter:function(e){D(e||m)},maxLength:50,ref:v,className:f.default.header_formname_input,placeholder:r,borderType:"bordered"}):d.default.createElement(d.default.Fragment,null,d.default.createElement("p",{title:p,onDoubleClick:function(){x(s)}},b),d.default.createElement(c.Icon,{prefix:"nocodeplatformicon",title:u,className:f.default.header_formname_editicon,type:"bianji",onClick:function(){return x(!0)}})))}},29912:function(e,t,a){var n=a(13568),r=a(93252),l=a(25028),u=a(4884),i=a(9564);l(t,"__esModule",{value:!0}),t.default=void 0;var o=i(a(26048)),d=i(a(13568)),c=i(a(23992)),f=i(a(13939)),p=i(a(760)),s=i(a(70696)),_=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var a=x(t);if(a&&a.has(e))return a.get(e);var r={__proto__:null},i=l&&u;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var d=i?u(e,o):null;d&&(d.get||d.set)?l(r,o,d):r[o]=e[o]}return r.default=e,a&&a.set(e,r),r}(a(65984)),m=a(63548),v=a(60644),h=a(78016),g=i(a(71252)),w=i(a(13246));function x(e){if("function"!=typeof r)return null;var t=new r,a=new r;return(x=function(e){return e?a:t})(e)}var E=[{key:"quickNew",name:"快速新建",shortcutDataList:[{type:"block",value:"Enter"}]},{key:"delete",name:"删除",shortcutDataList:[{type:"block",value:"Delete"},"或",{type:"block",value:"Backspace"}]},{key:"copy",name:"复制",shortcutDataList:[{type:"block",value:"Ctrl"},"+",{type:"block",value:"C"}]},{key:"paste",name:"粘贴",shortcutDataList:[{type:"block",value:"Ctrl"},"+",{type:"block",value:"V"}]},{key:"shearCut",name:"剪切",shortcutDataList:[{type:"block",value:"Ctrl"},"+",{type:"block",value:"X"}]},{key:"repeat",name:"重复",shortcutDataList:[{type:"block",value:"Ctrl"},"+",{type:"block",value:"D"}]},{key:"multiSelect",name:"多选或取消多选",shortcutDataList:[{type:"block",value:"Ctrl"},"+",{type:"block",value:"鼠标点击"}]},{key:"cancel",name:"撤销",shortcutDataList:[{type:"block",value:"Ctrl"},"+",{type:"block",value:"Z"}]},{key:"renew",name:"恢复",shortcutDataList:[{type:"block",value:"Ctrl"},"+",{type:"block",value:"Y"}]}],y=function(e){var t,a=e.appId,n=e.formId,r=e.settingData,l=e.setSettingData,u=function(e,t){var r={appId:a,formId:n,eventName:"click",event:{Categories:{true:"tb_ds_lib_open",false:"tb_ds_lib_close"},CategoryArrangement:{true:"tb_ds_lay_open",false:"tb_ds_lay_close"},CategoryDisplayContent:{true:"tb_ds_dc_open",false:"tb_ds_dc_close"},CategoryGeneralContent:{true:"tb_ds_gc_open",false:"tb_ds_gc_close"},CategoryOperation:{true:"tb_ds_opi_open",false:"tb_ds_opi_close"},CategorySystem:{true:"tb_ds_sysf_open",false:"tb_ds_sysf_close"},Property:{true:"tb_ds_al_open",false:"tb_ds_al_close"},Outline:{true:"tb_ds_ol_open",false:"tb_ds_ol_close"}}[e][String(t)]};(0,h.publishUserEvent)(r)};return _.default.createElement(m.Dropdown.Menu,{className:w.default.dropDownContent},r&&(0,c.default)(t=(0,f.default)(r)).call(t,(function(e){var t,a=r[e],n=a.title,i=a.items,o=a.value;return _.default.createElement("div",{className:w.default.dropDownContent_setting,key:e},_.default.createElement("div",{className:w.default.dropDownContent_setting_header},_.default.createElement("p",{className:w.default.title},n),_.default.createElement(m.Switch,{checked:o,onChange:function(t){return function(e,t){r[e].value=t,l((0,v.cloneDeep)(r)),u(e,t)}(e,t)}})),o&&i&&_.default.createElement("ul",{className:w.default.dropDownContent_setting_list},(0,c.default)(t=(0,f.default)(i)).call(t,(function(t){var a=i[t],n=a.name,o=a.value;return _.default.createElement("li",{key:t},_.default.createElement("p",null,n),_.default.createElement(m.Switch,{checked:o,onChange:function(a){return function(e,t,a){r[e].items[t].value=a,l((0,v.cloneDeep)(r)),u(t,a)}(e,t,a)}}))}))))})))};t.default=function(e){var t,a,n,r=e.appId,l=e.formId,u=e.setSettingData,i=e.settingData,f=e.handleMenuItemClick,v=e.hideText,h=void 0!==v&&v,x=e.canSaveTemplate,b=void 0!==x&&x,N=[{title:"快捷键",icon:"kuaijiejian",key:"shortcut",dropDownContent:_.default.createElement(m.Dropdown.Menu,{className:(0,g.default)(w.default.dropDownContent,w.default.pd16)},(0,c.default)(E).call(E,(function(e,t){var a=e.name,n=e.shortcutDataList;return _.default.createElement("div",{key:t,className:w.default.dropDownContent_shortcut},_.default.createElement("p",{className:w.default.dropDownContent_shortcut_name},a),_.default.createElement("ul",{className:w.default.dropDownContent_shortcut_key},_.default.createElement("li",null,(0,c.default)(n).call(n,(function(e){return"object"===(0,d.default)(e)?_.default.createElement("span",{key:e.value,className:w.default.text_block},e.value):_.default.createElement("span",{key:e}," ",e," ")})))))}))),action:(0,p.default)(t="".concat(r,"|")).call(t,l,"|tb_shortcut")},{title:"设计器配置",icon:"shezhi",key:"designerSetting",dropDownContent:y({appId:r,formId:l,setSettingData:u,settingData:i})},b&&{title:"保存为模板",icon:"baocunweimoban",key:"saveTemplate",action:(0,p.default)(a="".concat(r,"|")).call(a,l,"|tb_sft")}];return _.default.createElement("ul",{className:w.default.header_iconmenu},(0,c.default)(n=(0,s.default)(N).call(N,Boolean)).call(n,(function(e,t){var a=e.title,n=e.icon,r=e.dropDownContent,l=e.action,u=e.key,i=l?{"data-nc-action":l}:{},d=_.default.createElement("li",(0,o.default)({key:u,className:w.default.header_iconmenu_item,title:a,onClick:function(){return function(e){null==f||f(e)}(u)}},i),_.default.createElement(m.Icon,{prefix:"nocodeplatformicon",className:w.default.header_iconmenu_item_icon,type:n}),!h&&_.default.createElement("span",{className:w.default.txt},a));return r?_.default.createElement(m.Dropdown,{key:t,gap:0,placement:"topRight",menu:r,trigger:"click"},d):d})))}},80320:function(e,t,a){var n=a(13568),r=a(13939),l=a(34716),u=a(70696),i=a(4884),o=a(3464),d=a(51400),c=a(25028),f=a(93252),p=a(9564);c(t,"__esModule",{value:!0}),t.default=void 0;var s=p(a(760)),_=p(a(96631)),m=p(a(78912)),v=j(a(65984)),h=a(95936),g=a(41936),w=a(4440),x=a(39392),E=a(63548),y=a(88268),b=p(a(1520)),N=p(a(48864)),D=p(a(29912)),I=p(a(76040)),k=j(a(54864)),C=p(a(60584)),T=a(29588),P=p(a(45664)),O=p(a(71252)),A=p(a(43332)),S=p(a(75020)),M=a(62012),U=a(57264),L=a(66028),R=a(59876);function F(e){if("function"!=typeof f)return null;var t=new f,a=new f;return(F=function(e){return e?a:t})(e)}function j(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var a=F(t);if(a&&a.has(e))return a.get(e);var r={__proto__:null},l=c&&i;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var o=l?i(e,u):null;o&&(o.get||o.set)?c(r,u,o):r[u]=e[u]}return r.default=e,a&&a.set(e,r),r}function V(e,t){var a=r(e);if(l){var n=l(e);t&&(n=u(n).call(n,(function(t){return i(e,t).enumerable}))),a.push.apply(a,n)}return a}function G(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?V(Object(a),!0).forEach((function(t){(0,_.default)(e,t,a[t])})):o?d(e,o(a)):V(Object(a)).forEach((function(t){c(e,t,i(a,t))}))}return e}var W="SAVE_AND_VISIT",H={visible:!1,value:k.INIT_TEMPLATE_VALUE};t.default=function(){var e,t,a,n,r,l,u,i,o,d,c=(0,g.useParams)(),f=c.targetFormId,p=c.appId,F=((0,g.useLocation)().pathname,(0,v.useRef)(null),(0,v.useState)(null)),j=(0,m.default)(F,2),V=j[0],Q=j[1],B=(0,v.useState)(null),q=(0,m.default)(B,2),z=q[0],X=q[1],Z=(0,v.useState)(null),J=(0,m.default)(Z,2),Y=J[0],K=J[1],$=(0,v.useState)(!1),ee=(0,m.default)($,2),te=ee[0],ae=ee[1],ne=(0,v.useState)(null),re=(0,m.default)(ne,2),le=re[0],ue=re[1],ie=(0,v.useState)(null),oe=(0,m.default)(ie,2),de=oe[0],ce=oe[1],fe=(0,v.useReducer)(L.assignDataReducer,H),pe=(0,m.default)(fe,2),se=pe[0],_e=pe[1],me=(0,v.useState)(!1),ve=(0,m.default)(me,2),he=(ve[0],ve[1],(0,v.useState)(!1)),ge=(0,m.default)(he,2),we=ge[0],xe=ge[1],Ee=(0,v.useContext)(h.Context).state,ye=Ee.userInfo,be=Ee.rootConfig,Ne=ye||{},De=Ne.isAdminUser,Ie=Ne.templateEnabled,ke=void 0!==Ie&&Ie,Ce=(0,v.useRef)(null),Te=(0,T.useWindowSize)().width<1366;(0,v.useEffect)((function(){(0,w.getFormData)({appId:p,targetFormId:f}).then((function(e){var t,a=(null==e||null===(t=e.rows)||void 0===t?void 0:t[0])||{};Q(a),ce(a.name)})).catch((function(e){}))}),[]);var Pe=(0,x.useTranslation)().t,Oe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"发布中...",a=(0,U.showLoadingMessage)(t);0===e&&a()},Ae=(0,v.useCallback)((function(){if(!(0,U.isCNLanguage)(be))return(0,U.showNotice)("warnning",y.LANG_INVALID);ae(!0),Oe(-1),X(Date.now())}),[be]),Se=(0,v.useCallback)((function(){if(!(0,U.isCNLanguage)(be))return(0,U.showNotice)("warnning",y.LANG_INVALID);ue(Date.now()),Oe(-1)}),[be]),Me=(0,S.default)(Ae),Ue=(0,S.default)(Se),Le=(0,v.useCallback)((function(e){ce(e),C.default.emit(y.UPDATE_FORMNAME,e)}),[V]),Re=(0,v.useCallback)((function(){if(!(0,U.isCNLanguage)(be))return(0,U.showNotice)("warnning",y.LANG_INVALID);var e=V||{},t=e.name,a=void 0===t?"":t,n=e.image,r=void 0===n?R.DEFAULT_FORM_IMAGE:n;_e({visible:!0,value:G(G({},k.INIT_TEMPLATE_VALUE),{},{name:a,icon:r})})}),[_e,V,be]),Fe=(0,v.useCallback)((function(e){if("saveTemplate"===e)Re()}),[Re]),je=(0,v.useCallback)((function(e){ae(!0),Oe(-1,"模板保存中，请稍候..."),C.default.emit(y.SAVE_AS_TEMPLATE,e)}),[]),Ve=(Pe("designer.key0001"),(0,s.default)(e="/".concat(p,"/designer/")).call(e,f),Pe("designer.key0003"),(0,s.default)(t="/".concat(p,"/designer/")).call(t,f,"/formsetting"),(0,v.useCallback)((function(){Oe(0),ae(!1)}),[])),Ge=(0,v.useMemo)((function(){return{settingData:null==V?void 0:V.setting,save:z,saveAndVisit:Y,preview:le,formTitle:de,saveStatus:Ve}}),[V,z,Y,le,de,Ve]),We=v.default.createElement(E.Dropdown.Menu,null,v.default.createElement(E.Dropdown.Item,{key:W,"data-nc-action":(0,s.default)(a="".concat(p,"|")).call(a,f,"|tb_pa")},"发布并访问"));return v.default.createElement(M.ThemeContextProvider,{useDefault:!0},v.default.createElement("div",{className:P.default.wrapper,ref:Ce},v.default.createElement(b.default,{className:P.default.designer_header},v.default.createElement(b.default.Left,{className:P.default.leftnav},v.default.createElement(N.default,{appId:p,formId:f}),v.default.createElement("div",{className:P.default.leftnav_container},"配置：",v.default.createElement(A.default,{to:(0,s.default)(n="/".concat(p,"/admin/")).call(n,f),className:P.default.leftnav_container_appname,"data-nc-action":(0,s.default)(r="".concat(p,"|")).call(r,f,"|tb_crumb_fl")},null==V||null===(l=V.app)||void 0===l?void 0:l.name),(null==V||null===(u=V.app)||void 0===u?void 0:u.name)&&de&&v.default.createElement(v.default.Fragment,null,v.default.createElement(E.Icon,{prefix:"nocodeplatformicon",type:"fangxiangyou"}),v.default.createElement(I.default,{formName:de,updateFormName:Le})))),v.default.createElement(b.default.Right,{className:P.default.rightnav},v.default.createElement(D.default,{appId:p,formId:f,settingData:null==V?void 0:V.setting,setSettingData:function(e){Q((function(t){return G(G({},t),{},{setting:e})}))},hideText:Te,canSaveTemplate:ke&&De,handleMenuItemClick:Fe}),v.default.createElement(E.Button,{className:P.default["rightnav-preview"],onClick:Ue,"data-nc-action":(0,s.default)(i="".concat(p,"|")).call(i,f,"|tb_pv")},"预览"),v.default.createElement("div",{className:P.default.btn_group},v.default.createElement(E.Button,{className:P.default.save_btn,type:"primary",loading:te,onClick:Me,"data-nc-action":(0,s.default)(o="".concat(p,"|")).call(o,f,"|tb_publish")},"发布"),v.default.createElement("div",{className:P.default.seperator}),v.default.createElement(E.Dropdown,{menu:We,onItemClick:function(e){if(e===W){if(!(0,U.isCNLanguage)(be))return(0,U.showNotice)("warnning",y.LANG_INVALID);K(Date.now()),Oe(-1)}we&&xe(!1)},onVisibleChange:xe,popperClassName:P.default.dropdown_panel},v.default.createElement(E.Button,{className:P.default.btn_dropdown,type:"primary"},v.default.createElement(E.Icon,{type:"arrow-down",style:{lineHeight:1},className:(0,O.default)((0,_.default)({},P.default.isOpen,we))})))))),v.default.createElement("div",{className:P.default.designer_container},v.default.createElement(g.Outlet,{context:Ge})),v.default.createElement(k.default,{value:se.value,visible:se.visible,setVisible:function(e){return _e({visible:e})},onConfirm:je,confirmBtnProps:{"data-nc-action":(0,s.default)(d="".concat(p,"|")).call(d,f,"|sft_comf")}})))}},48864:function(e,t,a){var n=a(13568),r=a(93252),l=a(25028),u=a(4884),i=a(9564);l(t,"__esModule",{value:!0}),t.default=void 0;var o=i(a(760)),d=i(a(23992)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var a=g(t);if(a&&a.has(e))return a.get(e);var r={__proto__:null},i=l&&u;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var d=i?u(e,o):null;d&&(d.get||d.set)?l(r,o,d):r[o]=e[o]}return r.default=e,a&&a.set(e,r),r}(a(65984)),f=i(a(732)),p=a(41936),s=a(63548),_=a(39392),m=i(a(94958)),v=a(95936),h=a(57264);function g(e){if("function"!=typeof r)return null;var t=new r,a=new r;return(g=function(e){return e?a:t})(e)}var w=(0,c.lazy)((function(){return a.e(0).then(a.t.bind(a,51e3,23))})),x="businessManage";t.default=function(e){var t=e.onItemClick,a=e.openNewPage,n=void 0===a||a,r=(0,_.useTranslation)().t,l=(0,f.default)(),u=(0,p.useParams)(),i=u.appId,g=u.targetFormId,E=(0,c.useContext)(v.Context).dispatch,y=(0,c.useCallback)((function(e){var t,a;return(0,o.default)(t=(0,o.default)(a="".concat(i||"","|")).call(a,g||"","|")).call(t,e)}),[i,g]),b=[{path:"/home",title:r("designer.key0004"),icon:"qiyeguanli",useActionName:"tb_h_bn"},{path:"/app",title:r("designer.key0005"),icon:"quanbuyingyong",key:"allApp",useActionName:"tb_as_bn"},{path:"/template",title:r("designer.key0006"),icon:"moban2",useActionName:"tb_ts_bn"},{path:"/flow",title:r("designer.key0008"),icon:"liucheng-xian",useActionName:"tb_fs_bn"},{type:"divider"},{title:r("designer.key0007"),icon:"jichushezhi",key:x,useActionName:"tb_em_bn"}],N=c.default.createElement(s.Dropdown.Menu,{className:m.default.header_nav_menu},(0,d.default)(b).call(b,(function(e,t){var a=e.title,n=(e.path,e.icon),r=e.type,l=e.useActionName;return"divider"===r?c.default.createElement("li",{key:t,className:m.default.header_nav_menu_item_divider}):c.default.createElement(s.Dropdown.Item,{key:t,className:m.default.header_nav_menu_item,"data-nc-action":y(l)},c.default.createElement(c.default.Fragment,null,c.default.createElement(s.Icon,{prefix:"nocodeplatformicon",type:n}),a))})));return c.default.createElement(c.default.Fragment,null,c.default.createElement(s.Dropdown,{placement:"topLeft",menu:N,onItemClick:function(e){if("function"==typeof t&&t(e))return;var a=b[e];if(a){var r=a.path;if(r)n?(0,h.openner)(r):l(r);else if(a.key===x){var u=(0,h.autoModalHeight)(520,768);s.Modal.confirm({title:"企业管理",showline:!0,titleIcon:null,footer:null,width:960,height:u,type:"normal",bodyStyle:{padding:0,display:"flex",overflow:"hidden",flexBasis:0},body:c.default.createElement(c.Suspense,{fallback:c.default.createElement(c.default.Fragment,null)}," ",c.default.createElement(w,{dispatch:E})," "),closable:!0,maskClosable:!1})}}}},c.default.createElement("div",{className:m.default.header_nav},c.default.createElement("div",{className:m.default.header_nav_container},c.default.createElement(s.Icon,{prefix:"nocodeplatformicon",type:"9gedian"})))))}},44512:function(e,t,a){var n=a(13568),r=a(93252),l=a(25028),u=a(4884),i=a(9564);l(t,"__esModule",{value:!0}),t.default=void 0;var o=i(a(96631)),d=i(a(760)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var r={__proto__:null},i=l&&u;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var d=i?u(e,o):null;d&&(d.get||d.set)?l(r,o,d):r[o]=e[o]}return r.default=e,a&&a.set(e,r),r}(a(65984)),f=i(a(16428)),p=a(41936),s=a(63548),_=(i(a(70356)),a(57264),i(a(23772))),m=i(a(71252)),v=i(a(38219));function h(e){if("function"!=typeof r)return null;var t=new r,a=new r;return(h=function(e){return e?a:t})(e)}(0,c.lazy)((function(){return Promise.resolve().then(a.t.bind(a,87168,23))})),t.default=function(e){e.formTitle;var t,a,n,r,l,u,i,h,g=e.device,w=(e.visible,e.setVisible),x=(0,p.useParams)(),E=x.targetFormId,y=x.appId,b=window.location,N=(b.pathname,b.search),D=(b.origin,(0,d.default)(t=(0,d.default)(a=(0,d.default)(n=(0,d.default)(r=(0,d.default)(l="".concat(window.__domainurl__)).call(l,"nocode","/")).call(r,y,"/preview/")).call(n,E,"/")).call(a,g)).call(t,N)),I=(0,c.useMemo)((function(){return"mobile"===g}),[]);return f.default.createPortal(c.default.createElement(c.default.Fragment,null,c.default.createElement("div",{className:v.default.previewDrawer},c.default.createElement("div",{className:v.default.previewDrawer_header},c.default.createElement("div",{className:v.default.previewDrawer_header_left},"预览"),c.default.createElement("div",{className:v.default.previewDrawer_header_right},c.default.createElement(s.Icon,{prefix:"nocodeplatformicon",title:"关闭预览",type:"guanbi",onClick:function(){return w(!1)}}))),c.default.createElement("div",{className:v.default.previewDrawer_body},c.default.createElement("div",{className:(0,m.default)(v.default.previewDrawer_body_main,(0,o.default)({},v.default.mobile,I))},c.default.createElement("iframe",{src:D,frameBorder:"0",width:"100%"}),I&&c.default.createElement("div",{className:v.default.previewDrawer_body_main_qrcode},c.default.createElement(_.default,{url:(0,d.default)(u=(0,d.default)(i=(0,d.default)(h="/".concat("nocode","/")).call(h,y,"/preview/")).call(i,E,"/")).call(u,g)}))))),c.default.createElement("div",{className:v.default.mask,onClick:function(){return w(!1)}})),document.body)}},23772:function(e,t,a){var n=a(13568),r=a(93252),l=a(25028),u=a(4884),i=a(9564);l(t,"__esModule",{value:!0}),t.default=void 0;var o=i(a(73980)),d=i(a(29052)),c=i(a(94924)),f=i(a(78912)),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var a=g(t);if(a&&a.has(e))return a.get(e);var r={__proto__:null},i=l&&u;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var d=i?u(e,o):null;d&&(d.get||d.set)?l(r,o,d):r[o]=e[o]}return r.default=e,a&&a.set(e,r),r}(a(65984)),s=a(63548),_=i(a(51368)),m=a(98464),v=a(57264),h=i(a(80796));function g(e){if("function"!=typeof r)return null;var t=new r,a=new r;return(g=function(e){return e?a:t})(e)}var w=(0,p.memo)((function(e){var t=e.url,a=e.title,n=void 0===a?"手机扫码预览":a,r=(0,p.useState)(t),l=(0,f.default)(r,2),u=l[0],i=l[1],g=function(){var e=(0,c.default)(d.default.mark((function e(){var a,n,r;return d.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,m.sendShareData)({url:t});case 3:null!=(n=e.sent)&&null!==(a=n.row)&&void 0!==a&&a.url&&i(null==n||null===(r=n.row)||void 0===r?void 0:r.url),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();(0,p.useEffect)((function(){g()}),[]);var w=window.location.origin+(0,v.getFullUrl)("/"===u[0]?(0,o.default)(u).call(u,1):u);return p.default.createElement("div",{className:h.default.previewQRcode},p.default.createElement("p",{className:h.default.previewQRcode_title},n),p.default.createElement("div",{className:h.default.previewQRcode_main},p.default.createElement(_.default,{value:(0,v.getUrlWithDataCenter)(w),size:148,bgColor:"#ffffff",fgColor:"#000000"}),p.default.createElement(s.Icon,{className:h.default.previewQRcode_main_icon,prefix:"nocodeplatformicon",type:"danju"})))}));w.displayName="PreviewQrcode";t.default=w},97976:function(e,t,a){var n=a(13568),r=a(93252),l=a(25028),u=a(4884),i=a(9564);l(t,"__esModule",{value:!0}),t.default=void 0;var o=i(a(96631)),d=i(a(78912)),c=i(a(26048)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var a=b(t);if(a&&a.has(e))return a.get(e);var r={__proto__:null},i=l&&u;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var d=i?u(e,o):null;d&&(d.get||d.set)?l(r,o,d):r[o]=e[o]}return r.default=e,a&&a.set(e,r),r}(a(65984)),p=a(41936),s=i(a(44512)),_=a(88268),m=(a(63548),i(a(87168))),v=i(a(37064)),h=i(a(71252)),g=i(a(60584)),w=i(a(40436)),x=a(82416),E=a(14552),y=a(78016);function b(e){if("function"!=typeof r)return null;var t=new r,a=new r;return(b=function(e){return e?a:t})(e)}var N=(0,f.memo)((function(e){var t,a=(0,p.useParams)().targetFormId,n=(0,w.default)().state;return null!=n&&null!==(t=n.rootConfig)&&void 0!==t&&t.pageId?f.default.createElement(f.Suspense,{fallback:f.default.createElement("div",null)},f.default.createElement(m.default,(0,c.default)({config:{formId:"bos_nocode_formdesign",targetFormId:a,rootPageId:n.rootConfig.pageId}},e))):null}));t.default=function(e){var t=(0,p.useOutletContext)(),a=t.settingData,n=t.save,r=t.saveAndVisit,l=t.preview,u=t.formTitle,i=t.saveStatus,m=(0,f.useState)(!1),b=(0,d.default)(m,2),D=b[0],I=b[1],k=(0,f.useState)("pc"),C=(0,d.default)(k,2),T=C[0],P=C[1],O=(0,w.default)().state,A=O.compareTypes,S=void 0===A?{}:A,M=O.rootConfig,U=(0,f.useState)(!1),L=(0,d.default)(U,2),R=L[0],F=L[1],j=(0,f.useState)(),V=(0,d.default)(j,2),G=V[0],W=V[1];(0,f.useEffect)((function(){if(G){G.addEventListener(_.NOCODE_DESIGNER_PREVIEW_DEVICE,Q),G.addEventListener(_.DESIGNER_MOUNT,H);var e=function(e){null==G||G.publishEvent(_.NOCODE_DESIGNER_UPDATE,{type:_.UPDATE_FORMNAME,payload:e})},t=function(e){null==G||G.publishEvent(_.NOCODE_DESIGNER_UPDATE,{type:_.SAVE_AS_TEMPLATE,payload:e})};return g.default.on(_.UPDATE_FORMNAME,e),g.default.on(_.SAVE_AS_TEMPLATE,t),function(){g.default.off(_.UPDATE_FORMNAME,e),g.default.off(_.SAVE_AS_TEMPLATE,t)}}}),[G]),(0,f.useEffect)((function(){a&&(null==G||G.publishEvent(_.NOCODE_DESIGNER_SETTING,a,!0))}),[a,G]),(0,f.useEffect)((function(){l&&(null==G||G.publishEvent(_.NOCODE_DESIGNER_PREVIEW,l))}),[l]),(0,f.useEffect)((function(){n&&(null==G||G.publishEvent(_.NOCODE_DESIGNER_SAVE,n))}),[n]),(0,f.useEffect)((function(){r&&(null==G||G.publishEvent(_.NOCODE_DESIGNER_SAVE_AND_VISIT,r))}),[r]),(0,f.useEffect)((function(){G&&(null==G||G.publishEvent(_.SET_COMPARE_TYPES,S,!0))}),[S,G]),(0,f.useEffect)((function(){G&&G.publishEvent(_.SET_NOCODE_PLATFORM_API,{publishUserEvent:y.publishUserEvent},!0)}),[G]),(0,f.useEffect)((function(){G&&G.publishEvent(_.NOCODE_DESIGNER_SAVE_API,{saveStatus:i},!0)}),[i,G]);var H=(0,f.useCallback)((function(){F(!0)}),[]),Q=(0,f.useCallback)((function(e){P(e),I(!0)}),[]);return f.default.createElement(f.default.Fragment,null,f.default.createElement("div",{className:(0,h.default)((0,o.default)({},v.default.hidden,!R),v.default.designer_main)},f.default.createElement(N,(0,c.default)({onRef:W,showPreviewDrawer:Q,options:{rootConfig:M}},t)),D&&f.default.createElement(s.default,{formTitle:u,device:T,visible:D,setVisible:I})),f.default.createElement("div",{className:(0,h.default)([v.default.loading_wrapper,(0,o.default)({},v.default.hidden,R)])},f.default.createElement(x.Skeleton,{options:E.DesignerSkeleton})))}}}]);