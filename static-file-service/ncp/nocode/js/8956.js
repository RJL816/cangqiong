"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunknocode_platform"] = self["webpackChunknocode_platform"] || []).push([[8956],{

/***/ "./src/utils/crypto.ts":
/*!*****************************!*\
  !*** ./src/utils/crypto.ts ***!
  \*****************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\n\nvar _Object$defineProperty = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-property */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/object/define-property.js\");\nvar _interopRequireDefault = __webpack_require__(/*! @babel/runtime-corejs3/helpers/interopRequireDefault */ \"../../node_modules/@babel/runtime-corejs3/helpers/interopRequireDefault.js\");\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.encryptByBase64 = exports.encrypt = exports.decryptByBase64 = exports.decrypt = exports.KEY = exports.IV = void 0;\nexports.encryptUserActionData = encryptUserActionData;\nexports.getEncodeValue = exports.getDecodeValue = void 0;\nvar _stringify = _interopRequireDefault(__webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/json/stringify */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/json/stringify.js\"));\nvar _promise = _interopRequireDefault(__webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/promise */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/promise.js\"));\nvar _concat = _interopRequireDefault(__webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/concat */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/instance/concat.js\"));\nvar _cryptoJs = _interopRequireDefault(__webpack_require__(/*! kd_libs/crypto-js */ \"webpack/container/remote/kd_libs/crypto-js\"));\n/*\n * @Description:\n * @Author: jianhang_he\n * @Date: 2023-06-26 10:39:12\n * @LastEditTime: 2023-06-26 10:39:58\n * @Last Modified by: jianhang_he\n */\n/**\n * 传输内容加密\n * npm install crypto-js\n */\n\n// import sha256 from 'crypto-js/sha256'\n// import { List, Map } from 'immutable'\n\nvar ALGONAME = 'AES'; // 加密算法\nvar KEY = exports.KEY = '091A126D76A4B595'; // 十六位十六进制的密钥，与后端约定好的\nvar IV = exports.IV = 'B5EFEB5E3226D81A'; // 十六位十六进制的偏移量，与后端约定好的\n\n// 加密是字符串,对象\\数组暂不支持\n// key十六位十六进制数作为密钥\n// iv十六位十六进制数作为偏移量\nvar encrypt = exports.encrypt = function encrypt(data, key, iv) {\n  key = _cryptoJs.default.enc.Utf8.parse(key);\n  iv = _cryptoJs.default.enc.Utf8.parse(iv);\n  // data = typeof data === \"object\" ? JSON.stringify(data) : data\n  data = _cryptoJs.default.enc.Utf8.parse(data);\n  var cfg = {\n    iv: iv,\n    mode: _cryptoJs.default.mode.CBC,\n    padding: _cryptoJs.default.pad.Pkcs7\n  };\n  var encrypted = _cryptoJs.default[ALGONAME].encrypt(data, key, cfg);\n  var decryptedStr = encrypted.ciphertext.toString().toUpperCase();\n  var hexStr = _cryptoJs.default.enc.Hex.parse(decryptedStr);\n  var base64Str = _cryptoJs.default.enc.Base64.stringify(hexStr);\n  return base64Str;\n};\n\n// 解密data 是字符串, 仅测试使用，前端不需要提供解密\nvar decrypt = exports.decrypt = function decrypt(data, key, iv) {\n  key = _cryptoJs.default.enc.Utf8.parse(key);\n  iv = _cryptoJs.default.enc.Utf8.parse(iv);\n  var cfg = {\n    iv: iv,\n    mode: _cryptoJs.default.mode.CBC,\n    padding: _cryptoJs.default.pad.Pkcs7\n  };\n  var decrypt = _cryptoJs.default[ALGONAME].decrypt(data, key, cfg);\n  var decryptedStr = decrypt.toString(_cryptoJs.default.enc.Utf8);\n  // decryptedStr = isObject ? JSON.parse(decryptedStr) : decryptedStr\n  var value = decryptedStr.toString();\n  return value;\n};\nvar getDecodeValue = exports.getDecodeValue = function getDecodeValue(value) {\n  if (!value) return value;\n  return decrypt(value, KEY, IV);\n};\nvar getEncodeValue = exports.getEncodeValue = function getEncodeValue(value) {\n  if (!value) return value;\n  return encrypt(value, KEY, IV);\n};\n\n// base64编码\nvar encryptByBase64 = exports.encryptByBase64 = function encryptByBase64(value) {\n  var valueStr = value;\n  if (Array.isArray(valueStr) || Object.prototype.toString.call(valueStr) === '[object Object]') {\n    valueStr = (0, _stringify.default)(valueStr);\n  }\n  var wordArray = _cryptoJs.default.enc.Utf8.parse(valueStr);\n  var base64Str = _cryptoJs.default.enc.Base64.stringify(wordArray);\n  return base64Str;\n};\n\n// base64解码\nvar decryptByBase64 = exports.decryptByBase64 = function decryptByBase64(value) {\n  var parsedWordArray = _cryptoJs.default.enc.Base64.parse(value);\n  var parsedStr = parsedWordArray.toString(_cryptoJs.default.enc.Utf8);\n  return parsedStr;\n};\n\n/**\n * 生成埋点数据签名\n * @des project 项目名\n * @des store 仓库名\n * @des time 时间戳\n * @des nonce 唯一标识\n * @des ce 加密码\n * @returns Promise\n */\nfunction encryptUserActionData(data) {\n  return new _promise.default(function (resolve, reject) {\n    try {\n      var _context, _context2, _context3;\n      var _ref = data || {},\n        time = _ref.time,\n        nonce = _ref.nonce,\n        ce = _ref.ce,\n        project = _ref.project,\n        store = _ref.store;\n      var srcStr = (0, _concat.default)(_context = (0, _concat.default)(_context2 = (0, _concat.default)(_context3 = \"POST\\n%2Fladdercs%2Fladderlog\\nproject=\".concat(project, \"&store=\")).call(_context3, store, \"\\nx-api-nonce:\")).call(_context2, nonce, \"\\nx-api-timestamp:\")).call(_context, time, \"\\n\");\n      var sha256 = _cryptoJs.default.HmacSHA256(srcStr, ce); // hmac sha256加密\n      var hex = _cryptoJs.default.enc.Hex.stringify(sha256); // 转16进制\n      var signature = _cryptoJs.default.enc.Base64.stringify(_cryptoJs.default.enc.Utf8.parse(hex)); // 转base64\n      resolve({\n        nonce: nonce,\n        encrypt: signature\n      });\n    } catch (error) {\n      reject(error);\n    }\n  });\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbHMvY3J5cHRvLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFXQTtBQVhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL25vY29kZS1wbGF0Zm9ybS8uL3NyYy91dGlscy9jcnlwdG8udHM/ODIzZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQERlc2NyaXB0aW9uOlxuICogQEF1dGhvcjogamlhbmhhbmdfaGVcbiAqIEBEYXRlOiAyMDIzLTA2LTI2IDEwOjM5OjEyXG4gKiBATGFzdEVkaXRUaW1lOiAyMDIzLTA2LTI2IDEwOjM5OjU4XG4gKiBATGFzdCBNb2RpZmllZCBieTogamlhbmhhbmdfaGVcbiAqL1xuLyoqXG4gKiDkvKDovpPlhoXlrrnliqDlr4ZcbiAqIG5wbSBpbnN0YWxsIGNyeXB0by1qc1xuICovXG5pbXBvcnQgQ3J5cHRvSlMgZnJvbSAnY3J5cHRvLWpzJ1xuLy8gaW1wb3J0IHNoYTI1NiBmcm9tICdjcnlwdG8tanMvc2hhMjU2J1xuLy8gaW1wb3J0IHsgTGlzdCwgTWFwIH0gZnJvbSAnaW1tdXRhYmxlJ1xuXG5jb25zdCBBTEdPTkFNRSA9ICdBRVMnIC8vIOWKoOWvhueul+azlVxuZXhwb3J0IGNvbnN0IEtFWSA9ICcwOTFBMTI2RDc2QTRCNTk1JyAvLyDljYHlha3kvY3ljYHlha3ov5vliLbnmoTlr4bpkqXvvIzkuI7lkI7nq6/nuqblrprlpb3nmoRcbmV4cG9ydCBjb25zdCBJViA9ICdCNUVGRUI1RTMyMjZEODFBJyAvLyDljYHlha3kvY3ljYHlha3ov5vliLbnmoTlgY/np7vph4/vvIzkuI7lkI7nq6/nuqblrprlpb3nmoRcblxuLy8g5Yqg5a+G5piv5a2X56ym5LiyLOWvueixoVxc5pWw57uE5pqC5LiN5pSv5oyBXG4vLyBrZXnljYHlha3kvY3ljYHlha3ov5vliLbmlbDkvZzkuLrlr4bpkqVcbi8vIGl25Y2B5YWt5L2N5Y2B5YWt6L+b5Yi25pWw5L2c5Li65YGP56e76YePXG5leHBvcnQgY29uc3QgZW5jcnlwdCA9IChkYXRhOmFueSwga2V5OnN0cmluZywgaXY6c3RyaW5nKSA9PiB7XG4gIGtleSA9IENyeXB0b0pTLmVuYy5VdGY4LnBhcnNlKGtleSlcbiAgaXYgPSBDcnlwdG9KUy5lbmMuVXRmOC5wYXJzZShpdilcbiAgLy8gZGF0YSA9IHR5cGVvZiBkYXRhID09PSBcIm9iamVjdFwiID8gSlNPTi5zdHJpbmdpZnkoZGF0YSkgOiBkYXRhXG4gIGRhdGEgPSBDcnlwdG9KUy5lbmMuVXRmOC5wYXJzZShkYXRhKVxuICBjb25zdCBjZmcgPSB7XG4gICAgaXY6IGl2LFxuICAgIG1vZGU6IENyeXB0b0pTLm1vZGUuQ0JDLFxuICAgIHBhZGRpbmc6IENyeXB0b0pTLnBhZC5Qa2NzN1xuICB9XG4gIGNvbnN0IGVuY3J5cHRlZCA9IENyeXB0b0pTW0FMR09OQU1FXS5lbmNyeXB0KGRhdGEsIGtleSwgY2ZnKVxuICBjb25zdCBkZWNyeXB0ZWRTdHIgPSBlbmNyeXB0ZWQuY2lwaGVydGV4dC50b1N0cmluZygpLnRvVXBwZXJDYXNlKClcbiAgY29uc3QgaGV4U3RyID0gQ3J5cHRvSlMuZW5jLkhleC5wYXJzZShkZWNyeXB0ZWRTdHIpXG4gIGNvbnN0IGJhc2U2NFN0ciA9IENyeXB0b0pTLmVuYy5CYXNlNjQuc3RyaW5naWZ5KGhleFN0cilcbiAgcmV0dXJuIGJhc2U2NFN0clxufVxuXG4vLyDop6Plr4ZkYXRhIOaYr+Wtl+espuS4siwg5LuF5rWL6K+V5L2/55So77yM5YmN56uv5LiN6ZyA6KaB5o+Q5L6b6Kej5a+GXG5leHBvcnQgY29uc3QgZGVjcnlwdCA9IChkYXRhOmFueSwga2V5OnN0cmluZywgaXY6c3RyaW5nKSA9PiB7XG4gIGtleSA9IENyeXB0b0pTLmVuYy5VdGY4LnBhcnNlKGtleSlcbiAgaXYgPSBDcnlwdG9KUy5lbmMuVXRmOC5wYXJzZShpdilcbiAgY29uc3QgY2ZnID0ge1xuICAgIGl2OiBpdixcbiAgICBtb2RlOiBDcnlwdG9KUy5tb2RlLkNCQyxcbiAgICBwYWRkaW5nOiBDcnlwdG9KUy5wYWQuUGtjczdcbiAgfVxuICBjb25zdCBkZWNyeXB0ID0gQ3J5cHRvSlNbQUxHT05BTUVdLmRlY3J5cHQoZGF0YSwga2V5LCBjZmcpXG4gIGNvbnN0IGRlY3J5cHRlZFN0ciA9IGRlY3J5cHQudG9TdHJpbmcoQ3J5cHRvSlMuZW5jLlV0ZjgpXG4gIC8vIGRlY3J5cHRlZFN0ciA9IGlzT2JqZWN0ID8gSlNPTi5wYXJzZShkZWNyeXB0ZWRTdHIpIDogZGVjcnlwdGVkU3RyXG4gIGNvbnN0IHZhbHVlID0gZGVjcnlwdGVkU3RyLnRvU3RyaW5nKClcbiAgcmV0dXJuIHZhbHVlXG59XG5cbmV4cG9ydCBjb25zdCBnZXREZWNvZGVWYWx1ZSA9ICh2YWx1ZTphbnkpID0+IHtcbiAgaWYgKCF2YWx1ZSkgcmV0dXJuIHZhbHVlXG4gIHJldHVybiBkZWNyeXB0KHZhbHVlLCBLRVksIElWKVxufVxuXG5leHBvcnQgY29uc3QgZ2V0RW5jb2RlVmFsdWUgPSAodmFsdWU6YW55KSA9PiB7XG4gIGlmICghdmFsdWUpIHJldHVybiB2YWx1ZVxuICByZXR1cm4gZW5jcnlwdCh2YWx1ZSwgS0VZLCBJVilcbn1cblxuLy8gYmFzZTY057yW56CBXG5leHBvcnQgY29uc3QgZW5jcnlwdEJ5QmFzZTY0ID0gKHZhbHVlOmFueSkgPT4ge1xuICBsZXQgdmFsdWVTdHIgPSB2YWx1ZVxuICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZVN0cikgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlU3RyKSA9PT0gJ1tvYmplY3QgT2JqZWN0XScpIHtcbiAgICB2YWx1ZVN0ciA9IEpTT04uc3RyaW5naWZ5KHZhbHVlU3RyKVxuICB9XG4gIGNvbnN0IHdvcmRBcnJheSA9IENyeXB0b0pTLmVuYy5VdGY4LnBhcnNlKHZhbHVlU3RyKVxuICBjb25zdCBiYXNlNjRTdHIgPSBDcnlwdG9KUy5lbmMuQmFzZTY0LnN0cmluZ2lmeSh3b3JkQXJyYXkpXG4gIHJldHVybiBiYXNlNjRTdHJcbn1cblxuLy8gYmFzZTY06Kej56CBXG5leHBvcnQgY29uc3QgZGVjcnlwdEJ5QmFzZTY0ID0gKHZhbHVlOmFueSkgPT4ge1xuICBjb25zdCBwYXJzZWRXb3JkQXJyYXkgPSBDcnlwdG9KUy5lbmMuQmFzZTY0LnBhcnNlKHZhbHVlKVxuICBjb25zdCBwYXJzZWRTdHIgPSBwYXJzZWRXb3JkQXJyYXkudG9TdHJpbmcoQ3J5cHRvSlMuZW5jLlV0ZjgpXG4gIHJldHVybiBwYXJzZWRTdHJcbn1cblxuLyoqXG4gKiDnlJ/miJDln4vngrnmlbDmja7nrb7lkI1cbiAqIEBkZXMgcHJvamVjdCDpobnnm67lkI1cbiAqIEBkZXMgc3RvcmUg5LuT5bqT5ZCNXG4gKiBAZGVzIHRpbWUg5pe26Ze05oizXG4gKiBAZGVzIG5vbmNlIOWUr+S4gOagh+ivhlxuICogQGRlcyBjZSDliqDlr4bnoIFcbiAqIEByZXR1cm5zIFByb21pc2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVuY3J5cHRVc2VyQWN0aW9uRGF0YSAoZGF0YTphbnkpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyB0aW1lLCBub25jZSwgY2UsIHByb2plY3QsIHN0b3JlIH0gPSBkYXRhIHx8IHt9XG4gICAgICBjb25zdCBzcmNTdHIgPSBgUE9TVFxcbiUyRmxhZGRlcmNzJTJGbGFkZGVybG9nXFxucHJvamVjdD0ke3Byb2plY3R9JnN0b3JlPSR7c3RvcmV9XFxueC1hcGktbm9uY2U6JHtub25jZX1cXG54LWFwaS10aW1lc3RhbXA6JHt0aW1lfVxcbmBcbiAgICAgIGNvbnN0IHNoYTI1NiA9IENyeXB0b0pTLkhtYWNTSEEyNTYoc3JjU3RyLCBjZSkgLy8gaG1hYyBzaGEyNTbliqDlr4ZcbiAgICAgIGNvbnN0IGhleCA9IENyeXB0b0pTLmVuYy5IZXguc3RyaW5naWZ5KHNoYTI1NikgLy8g6L2sMTbov5vliLZcbiAgICAgIGNvbnN0IHNpZ25hdHVyZSA9IENyeXB0b0pTLmVuYy5CYXNlNjQuc3RyaW5naWZ5KENyeXB0b0pTLmVuYy5VdGY4LnBhcnNlKGhleCkpIC8vIOi9rGJhc2U2NFxuICAgICAgcmVzb2x2ZSh7IG5vbmNlLCBlbmNyeXB0OiBzaWduYXR1cmUgfSlcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmVqZWN0KGVycm9yKVxuICAgIH1cbiAgfSlcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/utils/crypto.ts\n");

/***/ })

}]);