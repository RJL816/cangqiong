"use strict";(self.webpackChunknocode_platform=self.webpackChunknocode_platform||[]).push([[867],{71120:function(e,t,r){r(25028)(t,"__esModule",{value:!0}),t.ENV_APP=t.ENV_ADMIN=void 0;t.ENV_ADMIN="0",t.ENV_APP="1"},12700:function(e,t,r){var n=r(13939),a=r(34716),o=r(70696),u=r(4884),l=r(3464),i=r(51400),f=r(25028),s=r(9564);f(t,"__esModule",{value:!0}),t.isEnumSelectedAll=t.isEnumAllEmpty=t.getUnqueId=t.getTransferFilters=t.getListItemSettingData=t.getListFilterConfig=t.getInputValue=t.getFilters=t.getCompareTypeCaptionByCompareType=t.filterItemCompareTypes=t.filterEmptyOrAllFilters=t.filterDataTransform=t.filterCompareTypes=void 0;var d=s(r(13568)),c=s(r(96631)),p=s(r(1900)),m=s(r(50524)),v=s(r(70696)),g=s(r(23992)),y=s(r(38456));function I(e,t){var r=n(e);if(a){var l=a(e);t&&(l=o(l).call(l,(function(t){return u(e,t).enumerable}))),r.push.apply(r,l)}return r}function F(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){(0,c.default)(e,t,r[t])})):l?i(e,l(r)):I(Object(r)).forEach((function(t){f(e,t,u(r,t))}))}return e}var h=["301","302"],w=(t.getListItemSettingData=function(){var e=[];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(t){var r={key:"",title:""};r.key=t.number,r.title=t.name,e.push(r)})),e},t.filterItemCompareTypes=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:["001"],a=(0,p.default)(t).call(t,(function(t){return e.fieldName===t.fieldName&&(0,m.default)(n).call(n,t.compareType)})),o=t[a];if(o&&r!==a){var u,l=(0,v.default)(u=e.compareTypes).call(u,(function(e,t){return e.id!==o.compareType}));return F(F({},e),{},{compareTypes:l})}return e}),S=(t.filterCompareTypes=function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["001"],a=(0,p.default)(t).call(t,(function(t){return e.fieldName===t.fieldName&&(0,m.default)(n).call(n,t.compareType)})),o=t[a];return o?(0,v.default)(r=e.compareTypes).call(r,(function(e,t){return e.id!==o.compareType})):e.compareTypes},t.filterDataTransform=function(e,t){return null==e?void 0:(0,g.default)(e).call(e,(function(r,n){var a=(null==t?void 0:(0,y.default)(t).call(t,(function(e){return e.fieldName===r.fieldName})))||{};return a=w(a,e,n),(r=F(F({},a),r)).compareTypeCaption=C(a.compareTypes,r.compareType),r}))}),C=t.getCompareTypeCaptionByCompareType=function(e,t){var r,n=null==e?void 0:(0,y.default)(e).call(e,(function(e){return e.id===t}));return null==n||null===(r=n.name)||void 0===r?void 0:r.zh_CN},N=t.getUnqueId=function(e){return"normal"===e.type?e.fieldValue:e.type},T=(t.getFilters=function(e,t){var r=S(e,t);return x(r)},t.isEnumSelectedAll=function(e){var t;return"001"===e.compareType&&!!(0,y.default)(t=e.value).call(t,(function(e){return"all"===e.type}))}),x=(t.isEnumAllEmpty=function(e){var t;return"001"===e.compareType&&!!(0,y.default)(t=e.value).call(t,(function(e){return"empty"===e.type}))&&1===e.value.length},t.filterEmptyOrAllFilters=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=["501","502","701","702","1701","1702"];return(0,g.default)(e).call(e,(function(e){return T(e)||!(0,m.default)(t).call(t,e.compareType)&&(Array.isArray(e.value)&&0===e.value.length||!e.value)?null:e}))});t.getTransferFilters=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"zh_CN";return null==e?void 0:(0,g.default)(e).call(e,(function(e){var r;if(!e)return e;var n,a,o=null==e||null===(r=e.value)||void 0===r?void 0:(0,v.default)(r).call(r,(function(e){return"object"===(0,d.default)(e)?"all"!==N(e):e}));(0,m.default)(h).call(h,e.compareType)?o=(0,g.default)(n=e.items).call(n,(function(e){return e.name[t]})):o=null===(a=o)||void 0===a?void 0:(0,g.default)(a).call(a,(function(e){return"object"===(0,d.default)(e)?(null==e?void 0:e.label)||(null==e?void 0:e.fieldValue)||"":e}));return F(F({},e),{},{value:o})}))},t.getInputValue=function(e,t,r){var n;return(null==e||null===(n=(0,v.default)(e).call(e,(function(e){return"all"!==e})))||void 0===n?void 0:(0,g.default)(n).call(n,(function(e){var n,a;return(null==r||null===(n=(0,y.default)(r).call(r,(function(t){return N(t)===e})))||void 0===n?void 0:n.label)||(null==t||null===(a=(0,y.default)(t).call(t,(function(t){return N(t)===e})))||void 0===a?void 0:a.label)}))).join(",")},t.getListFilterConfig=function(e,t){var r={};return e.forEach((function(e){r[e.number]=e})),null==t?void 0:(0,g.default)(t).call(t,(function(e){var t=e.fieldName;return F(F({},e),r[t]||{})}))}},55867:function(e,t,r){var n=r(25028),a=r(9564);n(t,"__esModule",{value:!0}),t.sendFooterDataSource=t.onSavePageSize=t.onSaveFormFilterSetting=t.onDeleteItemsWithFilter=t.onDeleteFormDataListItem=t.loadFormListWithParams=t.getUpdateFooterDataSource=t.getStatInfoRow=t.getStatInfo=t.getOrderBy=t.getNewFilters=t.getInitFormDataList=t.getFormDataListSetting=t.getFormDataList=t.getEnumFilterValue=t.getColHeadFilters=t.getColHeadFilterConfig=void 0;var o=a(r(70696)),u=a(r(38456)),l=a(r(29052)),i=a(r(94924)),f=r(98464),s=r(57264),d=r(69400),c=r(12700),p=t.getFormDataList=function(){var e=(0,i.default)(l.default.mark((function e(t){var r,n,a,o,u,i,s,c,p,m,v,g,y,I,F,h,w;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.appId,n=t.formId,a=t.env,t.listItemConfig,o=t.listFilters,u=t.pageNo,i=t.pageSize,s=t.searchKeywords,c=t.orderBy,p=t.viewAuth,m=t.schemaId,p){e.next=3;break}return e.abrupt("return",{dataSource:[],pageSize:i,totalCount:0,pageNo:1,lastPage:!0});case 3:return v=(0,d.getArgs)(null==o?void 0:o[0],{page_no:u,page_size:i,search:s,env:a,order_by:c,schemaId:m}),e.next=6,(0,f.getFormDataList)(r,n,v);case 6:return g=e.sent,y=g.rows,I=g.pageSize,F=g.totalCount,h=g.pageNo,w=g.lastPage,e.abrupt("return",{dataSource:y,pageSize:I,totalCount:F,pageNo:h,lastPage:w});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=(t.getInitFormDataList=function(){var e=(0,i.default)(l.default.mark((function e(t){var r,n,a,o,u,i,c,p,v,g,y,I,F,h,w,S,C,N,T,x,b,D,z;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.appId,n=t.formId,a=t.env,o=t.viewAuth,u=t.compareTypes,r&&n){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,m({appId:r,formId:n,env:a,compareTypes:u});case 6:if(e.t0=e.sent,e.t0){e.next=9;break}e.t0={};case 9:if(i=e.t0,c=i.listItemConfig,p=i.configuredFilterItems,v=i.listFilters,g=i.listFilterConfig,y=i.listStatInfo,I=i.formName,F=i.configuredPageSize,h=i.orderBy,w=i.orderInfo,o){e.next=21;break}return e.abrupt("return",{dataSource:[],footerDataSource:[],pageSize:20,pageNo:1,totalCount:0,lastPage:!0,formName:I,loading:!1,listItemConfig:c,listFilterConfig:g,listStatInfo:y,configuredFilterItems:p,listFilters:v,orderBy:h,orderInfo:w});case 21:return S=(0,d.getArgs)(null==v?void 0:v[0],{env:a,page_size:F,order_by:h}),e.next=24,(0,f.getFormDataList)(r,n,S);case 24:return C=e.sent,N=C.rows,T=C.pageSize,x=C.totalCount,b=C.pageNo,D=C.lastPage,z=(0,d.getInitFooterDataSource)(c,y),e.abrupt("return",{dataSource:N,footerDataSource:z,pageSize:T,pageNo:b,totalCount:x,lastPage:D,formName:I,loading:!1,listItemConfig:c,listFilterConfig:g,listStatInfo:y,configuredFilterItems:p,listFilters:v,orderBy:h,orderInfo:w});case 30:e.prev=30,e.t1=e.catch(3),(0,s.showNotice)("error",e.t1.message||"表单已被删除");case 34:case"end":return e.stop()}}),e,null,[[3,30]])})));return function(t){return e.apply(this,arguments)}}(),t.getFormDataListSetting=function(){var e=(0,i.default)(l.default.mark((function e(t){var r,n,a,o,u,i,s,d,p,m,v,g,y,I,F,h,w,S,C,N,T,x,b;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m=t.appId,v=t.formId,g=t.env,t.compareTypes,e.next=3,(0,f.getFormDataListSetting)(m,v,g);case 3:return y=e.sent,I=(null==y||null===(r=y.rows[0])||void 0===r?void 0:r.listItemConfig)||[],F=(null==y||null===(n=y.rows[0])||void 0===n?void 0:n.listFilterConfig)||[],h=(null==y||null===(a=y.rows[0])||void 0===a?void 0:a.configuredFilterItems)||[],w=(null==y||null===(o=y.rows[0])||void 0===o?void 0:o.listStatInfo)||[],S=null==y||null===(u=y.rows[0])||void 0===u?void 0:u.filters,C=(null==y||null===(i=y.rows[0])||void 0===i?void 0:i.formName)||"",N=null==y||null===(s=y.rows[0])||void 0===s?void 0:s.configuredPageSize,T=(null==y||null===(d=y.rows[0])||void 0===d?void 0:d.orderBy)||"",x=(null==y||null===(p=y.rows[0])||void 0===p?void 0:p.orderInfo)||[],b=(0,c.getListFilterConfig)(I,F),e.abrupt("return",{listItemConfig:I,listFilterConfig:b,configuredFilterItems:h,listFilters:S,listStatInfo:w,formName:C,configuredPageSize:N,orderBy:T,orderInfo:x});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),v=t.onSaveFormFilterSetting=function(e,t){return(0,f.sendFormFilterSetting)(e,t)},g=(t.onSavePageSize=function(e,t,r,n){var a={data:[{appId:e,formId:t,pageSize:n}]};return(0,f.sendPageSize)(a,r)},t.getOrderBy=function(){var e=(0,i.default)(l.default.mark((function e(t,r,n,a){var o,u,i;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u={data:[{appId:t,formId:r,orderInfo:a}]},e.next=3,(0,f.sendColHeadSort)(u,n);case 3:return i=e.sent,e.abrupt("return",null==i||null===(o=i.extra)||void 0===o?void 0:o.orderBy);case 5:case"end":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}(),t.getStatInfoRow=function(){var e=(0,i.default)(l.default.mark((function e(t,r,n,a){var o;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.getStatInfoRow)(t,r,n,a);case 2:return o=e.sent,e.abrupt("return",null==o?void 0:o.rows);case 4:case"end":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}());t.getStatInfo=function(){var e=(0,i.default)(l.default.mark((function e(t){var r,n,a,o,u,i,s,c,p,m,v;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.appId,n=t.formId,a=t.env,o=t.fieldName,u=t.listFilters,i=t.pageSize,s=t.pageNo,c=t.searchKeywords,p=t.schemaId,m=(0,d.getArgs)(null==u?void 0:u[0],{page_size:i,page_no:s,search:c,stat:o,schemaId:p,env:a}),e.next=4,(0,f.getStatInfo)(r,n,m);case 4:return v=e.sent,e.abrupt("return",null==v?void 0:v.rows);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getColHeadFilterConfig=function(){var e=(0,i.default)(l.default.mark((function e(t,r,n,a,o,u){var i,s,d,c,p,m;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={filter:"",filterRows:o},e.next=3,(0,f.getColHeadFilter)({appId:t,formId:r,env:n,fieldName:a,schemaId:u,params:i});case 3:return s=e.sent,d=null==s?void 0:s.rows[0],c=d.configuredFilter,p=d.fieldFilterConfig,m=d.groupInfo,e.abrupt("return",{configuredFilter:c,fieldFilterConfig:p,groupInfo:m});case 7:case"end":return e.stop()}}),e)})));return function(t,r,n,a,o,u){return e.apply(this,arguments)}}(),t.getColHeadFilters=function(){var e=(0,i.default)(l.default.mark((function e(t,r,n,a,o){var u,i,s,d;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={data:[{appid:t,formid:r,filterrows:a}]},e.next=3,(0,f.sendColHeadFilter)(i,n,o);case 3:return s=e.sent,d=null==s||null===(u=s.extra)||void 0===u?void 0:u.filters,e.abrupt("return",d);case 6:case"end":return e.stop()}}),e)})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),t.sendFooterDataSource=function(){var e=(0,i.default)(l.default.mark((function e(t,r,n,a,o,u){var i;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=o&&u?[{appid:t,formid:r,statinfo:"summary"===o.rptType?[{fieldName:a,rptType:o.rptType,panelType:u}]:[{fieldValue:o.fieldValue,fieldName:a,rptType:o.rptType,panelType:u}]}]:[{appid:t,formid:r,statinfo:[{fieldName:a,rptType:"none"}]}],e.next=3,(0,f.sendStatInfo)(i,n);case 3:case"end":return e.stop()}}),e)})));return function(t,r,n,a,o,u){return e.apply(this,arguments)}}(),t.getNewFilters=function(){var e=(0,i.default)(l.default.mark((function e(t,r,n,a){var o,u,i;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u={data:[{appid:t,formid:r,filterrows:a}]},e.next=3,v(u,n);case 3:return i=e.sent,e.abrupt("return",null==i||null===(o=i.extra)||void 0===o?void 0:o.filters);case 5:case"end":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}(),t.loadFormListWithParams=function(){var e=(0,i.default)(l.default.mark((function e(t){var r,n,a,o,u,i,f,s,d,c,m,v,g,y,I,F,h;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.appId,n=t.formId,a=t.env,o=t.listItemConfig,u=t.listFilters,i=t.pageNo,f=t.pageSize,s=t.searchKeywords,d=t.orderBy,c=t.viewAuth,m=t.schemaId,e.next=3,p({appId:r,formId:n,env:a,listItemConfig:o,listFilters:u,pageNo:i,pageSize:f,searchKeywords:s,orderBy:d,viewAuth:c,schemaId:m});case 3:return v=e.sent,g=v.dataSource,y=v.pageSize,I=v.totalCount,F=v.pageNo,h=v.lastPage,e.abrupt("return",{dataSource:g,pageSize:y,pageNo:F,totalCount:I,lastPage:h});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.getUpdateFooterDataSource=function(){var e=(0,i.default)(l.default.mark((function e(t,r,n,a,o,u,i,f,s){var c,p;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=(0,d.getArgs)(null==u?void 0:u[0],{page_no:a,page_size:o,search:i}),e.next=3,g(t,r,n,c);case 3:return p=e.sent,e.abrupt("return",(0,d.mergeUpdatedFooterDataSource)(f,p,s));case 5:case"end":return e.stop()}}),e)})));return function(t,r,n,a,o,u,l,i,f){return e.apply(this,arguments)}}(),t.onDeleteFormDataListItem=function(e,t,r){return(0,f.deleteFormDataListItem)(e,t,r)},t.onDeleteItemsWithFilter=function(e,t,r,n,a,o){return(0,f.deleteFormDataListItemWithFilter)(e,t,r,n,a,o)},t.getEnumFilterValue=function(){var e=(0,i.default)(l.default.mark((function e(t,r,n,a,i,s){var c,p,m,v,g,y,I,F=arguments;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=s.fieldName,p=F.length>6&&void 0!==F[6]?F[6]:"",m=F.length>7?F[7]:void 0,v=(0,d.getFiltersExceptFieldEnumType)(c,a),e.next=6,(0,f.getEnumFilterValue)(t,r,c,v,n,p,m);case 6:return g=e.sent,y=(0,o.default)(a).call(a,(function(e){return e.fieldName===c})),I=(0,u.default)(i).call(i,(function(e){return e.fieldName===c})),e.abrupt("return",{configuredFilter:{enumEqCompareType:"001",items:y},fieldFilterConfig:I,groupInfo:g.rows});case 10:case"end":return e.stop()}}),e)})));return function(t,r,n,a,o,u){return e.apply(this,arguments)}}()}}]);