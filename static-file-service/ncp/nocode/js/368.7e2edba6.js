"use strict";(self.webpackChunknocode_platform=self.webpackChunknocode_platform||[]).push([[368],{74896:function(e,t,a){a.r(t),t.default={popup:"MedmhCc9_popup",card_empty:"X3GkFD5l_card_empty",empty_text:"E-F5iF7K_empty_text"}},70916:function(e,t,a){a.r(t),t.default={collapse:"RJWK3-+K_collapse",collapse_panel_header:"YUIdlg8U_collapse_panel_header",collapse_panel_header_main:"tcoEERJw_collapse_panel_header_main",collapse_panel_header_arrow_icon:"VPvh0tfW_collapse_panel_header_arrow_icon",collapse_panel_header_arrow_icon_expand:"MrYTlaT-_collapse_panel_header_arrow_icon_expand",collapse_panel_content:"_0oFj8rRC_collapse_panel_content",collapse_panel_content_hidden:"gSP+kLEl_collapse_panel_content_hidden"}},94360:function(e,t,a){a.r(t),t.default={table_view_grid_wrapper:"ShCVy8A9_table_view_grid_wrapper",table_toggle_btn_wrapper:"l-ouz0Qh_table_toggle_btn_wrapper",table_toggle_btn:"dF4DXW+x_table_toggle_btn",font:"_0A5GcYKK_font",table_horizontal:"v7TI5A0v_table_horizontal",table_toggle_btn_wrapper_horizontal:"Uw2yvRQx_table_toggle_btn_wrapper_horizontal"}},98880:function(e,t,a){a.r(t),t.default={popup:"_24rd4JoP_popup",menu:"SGoUjTPO_menu",item:"eDA+UWe2_item"}},38760:function(e,t,a){a.r(t),t.default={footerbtns:"P4JiD7Lg_footerbtns",button:"KSTYsSPi_button"}},56636:function(e,t,a){a.r(t),t.default={"ref-bill-option":"+oBEuJ0u_ref-bill-option","ref-bill-option-title":"Ss00zqM6_ref-bill-option-title","ref-bill-option-desc":"HIEvw0n6_ref-bill-option-desc","ref-bill-option-empty":"MILWai+7_ref-bill-option-empty","ref-bill-extra":"ogxI8+qW_ref-bill-extra"}},76612:function(e,t,a){a.r(t),t.default={table_filter:"KrCVnp5G_table_filter",filter_content:"PipMMjst_filter_content",nodata:"LyBlJvXI_nodata",maintips:"_6Otj9+tj_maintips",operatetips:"w7qcj7Qj_operatetips",btn:"_6D6Vs4EB_btn",filter_item:"u1wTl41z_filter_item",item_header:"_5F0vB4vz_item_header",title:"cEKjRhPr_title",delicon:"chmbDILp_delicon",select_container:"_09fzpj0Z_select_container",condition_selectBox:"oTsg+Lwn_condition_selectBox",condition_select:"pqnX3S6F_condition_select",value_selectbox:"mlACFWg1_value_selectbox",withcond_select:"YCGtP4fG_withcond_select",footerbtns:"uFWjM3hI_footerbtns",button:"WKK59QF-_button"}},15964:function(e,t,a){a.r(t),t.default={popup:"m+O5AcM1_popup",box:"KZC7ATdA_box",tip:"_9DW135-1_tip",title:"u8tt+702_title",close:"BmXfEoN3_close",data_list:"EISZ81Ln_data_list",item:"ivjkTRUS_item",delete:"rE0GUg0W_delete",content:"hj8FBI7U_content",values:"_5JQIh35k_values",footer:"_2DL1xmlo_footer",selected:"sxLCbjMb_selected","checkbox-wrapper":"K89+mDrt_checkbox-wrapper",checkbox:"kOjRTnai_checkbox",desc:"IMLDxmH6_desc",confirm:"BA1GYNhx_confirm"}},57620:function(e,t,a){a.r(t),t.default={popup:"tRh6-wHo_popup",box:"_7nCtjkdG_box",tip:"RUN3A021_tip",title:"+VAMnlG3_title",close:"Gqg1C2zI_close",data_list:"y8BPNdwm_data_list",item:"YsHuAgNF_item",delete:"a1rUz6Gt_delete",content:"aBu+6+SQ_content",values:"CHcfU8aW_values",field_value:"_8S1EyQpe_field_value",split:"-UwaKa27_split"}},33020:function(e,t,a){a.r(t),t.default={footerlayout:"_05ODacM8_footerlayout",button_group:"_8PVoKjeX_button_group",batch_button:"JTIdAxvu_batch_button",button:"_1wYQln-g_button",check:"_83Bwv7kL_check",checkbox:"kEnhiXK7_checkbox",selected:"oBOxEKjX_selected",selected_count:"+63mIcPp_selected_count",trigger:"tP48BYxd_trigger"}},97452:function(e,t,a){a.r(t),t.default={headerlayout:"_9SC7QDua_headerlayout",headerlayout_item:"gxkRVkZj_headerlayout_item",headerlayout_icon:"fZJSOkFe_headerlayout_icon",active:"Z+Pc-h6t_active",menu:"X-vXfe-p_menu",menu_text:"QjskyplP_menu_text",menu_icon:"SAPdvM84_menu_icon",menu_scroll:"wckNLF6l_menu_scroll"}},66236:function(e,t,a){a.r(t),t.default={ellipsis:"znv30WkG_ellipsis",sidenavlayout:"UAcGG7jI_sidenavlayout",sidenavlayout_header:"vSxEy5uV_sidenavlayout_header",sidenavlayout_header_icon:"NEk5lKq-_sidenavlayout_header_icon",sidenavlayout_header_title:"Rk-SxaE3_sidenavlayout_header_title",sidenavlayout_content:"DIsGEPcu_sidenavlayout_content",sidenavlayout_content_empty:"LX-YyPCy_sidenavlayout_content_empty",sidenavlayout_content_empty_img:"_38DQ-uSm_sidenavlayout_content_empty_img",sidenavlayout_content_empty_text:"zAZV9ZoE_sidenavlayout_content_empty_text",sidenavlayout_content_main:"otrDyr4D_sidenavlayout_content_main",sidenavlayout_content_main_group:"pcA8JxhF_sidenavlayout_content_main_group",sidenavlayout_content_main_group_icon:"GIedlOrs_sidenavlayout_content_main_group_icon",sidenavlayout_content_main_group_title:"HfgKs8Ot_sidenavlayout_content_main_group_title",sidenavlayout_content_main_item:"BWGlQyBQ_sidenavlayout_content_main_item",sidenavlayout_content_main_item_main:"TsHFhdcs_sidenavlayout_content_main_item_main",sidenavlayout_content_main_item_icon:"_7UBoEYJ+_sidenavlayout_content_main_item_icon",sidenavlayout_content_main_item_title:"_8szJ1-jG_sidenavlayout_content_main_item_title",sidenavlayout_content_main_item_selected:"zak-bGCB_sidenavlayout_content_main_item_selected",sidenavlayout_content_footer:"_32fYjy5a_sidenavlayout_content_footer",sidenavlayout_content_footer_item:"Jn84eXpW_sidenavlayout_content_footer_item",sidenavlayout_content_footer_icon:"_7EHDbJnJ_sidenavlayout_content_footer_icon",sidenavlayout_content_footer_name:"cG-Gzdag_sidenavlayout_content_footer_name"}},7648:function(e,t,a){a.r(t),t.default={apphomepage:"_1y95SnYm_apphomepage",apphomepage_loading:"vglX-HOP_apphomepage_loading",apphomepage_container:"fd64HHaz_apphomepage_container",apphomepage_container_main:"_9X9GYXI0_apphomepage_container_main",table_view_container:"Ym9HCm3H_table_view_container",custom:"W9SaVbga_custom",custom_wrapper:"gB0lSBRB_custom_wrapper"}},44164:function(e,t,a){a.r(t),t.default={title:"O8Hm+nQz_title","title-name":"OuZ9o325_title-name","title-icon":"_3Q38LMSO_title-icon","title-drag":"bnA7BGaC_title-drag","title-more":"cbPfkWhG_title-more","tree-node-item-hover":"jQdR1264_tree-node-item-hover",popper:"tzoheLQL_popper"}},63536:function(e,t,a){var n=a(25028),l=a(9564);n(t,"__esModule",{value:!0}),t.default=void 0;var u=l(a(38456)),r=a(65984);t.default=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"click",n=arguments.length>3?arguments[3]:void 0;(0,r.useEffect)((function(){var l,r=function(e){var a=function(e){for(;;){if(!e)return{};if(e.dataset.key)return{key:e.dataset.key,actionKey:e.dataset.actionKey};e=e.parentElement}}(e.target),n=(0,u.default)(t).call(t,(function(e){return e.actionKey===a.actionKey}));n&&(null==n||n.action(null==a?void 0:a.key))};return!n&&(null===(l=e.current)||void 0===l||l.addEventListener(a,r)),function(){var t;!n&&(null===(t=e.current)||void 0===t||t.removeEventListener(a,r))}}),[t,e.current,n])}},63176:function(e,t,a){var n=a(13939),l=a(34716),u=a(70696),r=a(4884),o=a(3464),i=a(51400),c=a(25028),d=a(9564);c(t,"__esModule",{value:!0}),t.default=void 0;var f=d(a(29052)),s=d(a(96631)),m=d(a(94924)),p=d(a(78912)),v=a(65984),_=(d(a(60584)),a(98464)),h=a(41936),y=a(90568);function g(e,t){var a=n(e);if(l){var o=l(e);t&&(o=u(o).call(o,(function(t){return r(e,t).enumerable}))),a.push.apply(a,o)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){(0,s.default)(e,t,a[t])})):o?i(e,o(a)):g(Object(a)).forEach((function(t){c(e,t,r(a,t))}))}return e}t.default=function(e){var t=e||{},a=t.appId,n=t.defaultQueryParams,l=t.queryCallback,u=(n||{}).pageSize,r=void 0===u?20:u,o=(0,h.useParams)().appId,i=a||o,c=(0,v.useState)(),d=(0,p.default)(c,2),s=d[0],g=d[1],b=function(){var e=(0,m.default)(f.default.mark((function e(t,a){var n,u;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=E({env:"1",page_size:(null==a?void 0:a.page_size)||r||20,page_no:(null==a?void 0:a.page_no)||1},a),g(n),e.next=4,(0,_.loadFormDataList)(i,t,n);case 4:u=e.sent,null==l||l(),(0,y.publishEvent)("setQuery",{args:{formId:t,param:n},data:u});case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),C=function(){var e=(0,m.default)(f.default.mark((function e(t){var a;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,_.queryEntryData)(null==t?void 0:t.appId,null==t?void 0:t.formId,null==t?void 0:t.pkId,{page_size:(null==t?void 0:t.page_size)||10,page_no:(null==t?void 0:t.page_no)||1,entry:null==t?void 0:t.entry});case 3:a=e.sent,null==t||t.callback(a),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=(0,m.default)(f.default.mark((function e(t,a){var n;return f.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_.getFormDataListSetting)(i,t,a.env,{selects:a.displayProp});case 2:n=e.sent,(0,y.publishEvent)("setListConfig",{args:{formId:t},data:n});case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return{batchInvokeQuery:b,addControlAction:y.addEventListener,baseUrl:window.__nocode_file_host__,batchInvoke:function(){},batchInvokeTable:C,batchInvokeListConfig:k,getControlText:function(e){return(null==e?void 0:e.zh_CN)||""},queryParams:s}}},39764:function(e,t,a){var n=a(13568),l=a(93252),u=a(25028),r=a(4884),o=a(9564);u(t,"__esModule",{value:!0}),t.default=void 0;var i=o(a(23992)),c=o(a(29052)),d=o(a(94924)),f=o(a(78912)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var a=b(t);if(a&&a.has(e))return a.get(e);var l={__proto__:null},o=u&&r;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var c=o?r(e,i):null;c&&(c.get||c.set)?u(l,i,c):l[i]=e[i]}return l.default=e,a&&a.set(e,l),l}(a(65984)),m=a(41936),p=a(65873),v=a(18656),_=o(a(74896)),h=o(a(26124)),y=o(a(79212)),g=a(71120),E=a(98464);function b(e){if("function"!=typeof l)return null;var t=new l,a=new l;return(b=function(e){return e?a:t})(e)}var C=function(){return s.default.createElement("div",{className:_.default.card_empty},s.default.createElement("img",{src:h.default,alt:"暂无卡片",width:320,height:160}),s.default.createElement("div",{className:_.default.empty_text},"暂无卡片，请在PC端添加"))},k=(0,s.memo)((function(e){var t=e.visible,a=e.setVisible,n=e.title,l=void 0===n?"统计":n,u=(0,s.useState)(null),r=(0,f.default)(u,2),o=r[0],h=r[1],b=(0,m.useParams)(),k=b.appId,N=b.targetFormId,w=(0,s.useCallback)(function(){var e=(0,d.default)(c.default.mark((function e(t){var a,n,l;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,E.getStartCard)(k,N,g.ENV_APP);case 3:a=e.sent,n=(a||{}).rows,h(void 0===n?[]:n),t&&t(),e.next=15;break;case 9:e.prev=9,e.t0=e.catch(0),l=e.t0.message,p.WebMsg.showToast({type:2,content:l}),h([]);case 15:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),[h,k,N]);(0,s.useEffect)((function(){t&&w()}),[t]);return s.default.createElement(v.Popup,{placement:"bottom",visible:t,onClose:function(){return a(!1)},title:l,className:_.default.popup,radius:!0},o&&(o.length?null==o?void 0:(0,i.default)(o).call(o,(function(e){var t=e.cardId,a=e.title,n={qingCardId:t};return s.default.createElement(y.default,{key:t,config:n,title:a,style:{marginLeft:"12px",marginRight:"12px"}})})):s.default.createElement(C,null)))}));k.displayName="StatisticPopUp";t.default=k},75308:function(e,t,a){var n=a(13568),l=a(93252),u=a(25028),r=a(4884);u(t,"__esModule",{value:!0}),u(t,"Card",{enumerable:!0,get:function(){return o.default}}),u(t,"FIELD_MAP",{enumerable:!0,get:function(){return o.FIELD_MAP}});var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var a=i(t);if(a&&a.has(e))return a.get(e);var l={__proto__:null},o=u&&r;for(var c in e)if("default"!==c&&Object.prototype.hasOwnProperty.call(e,c)){var d=o?r(e,c):null;d&&(d.get||d.set)?u(l,c,d):l[c]=e[c]}return l.default=e,a&&a.set(e,l),l}(a(13472));function i(e){if("function"!=typeof l)return null;var t=new l,a=new l;return(i=function(e){return e?a:t})(e)}},64716:function(e,t,a){var n=a(13568),l=a(13939),u=a(34716),r=a(70696),o=a(4884),i=a(3464),c=a(51400),d=a(25028),f=a(93252),s=a(9564);d(t,"__esModule",{value:!0}),t.default=void 0;var m=s(a(33260)),p=s(a(61260)),v=s(a(23992)),_=s(a(50524)),h=s(a(78912)),y=s(a(96631)),g=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var a=N(t);if(a&&a.has(e))return a.get(e);var l={__proto__:null},u=d&&o;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var i=u?o(e,r):null;i&&(i.get||i.set)?d(l,r,i):l[r]=e[r]}return l.default=e,a&&a.set(e,l),l}(a(65984)),E=a(18656),b=a(60644),C=s(a(71252)),k=s(a(70916));function N(e){if("function"!=typeof f)return null;var t=new f,a=new f;return(N=function(e){return e?a:t})(e)}function w(e,t){var a=l(e);if(u){var n=u(e);t&&(n=r(n).call(n,(function(t){return o(e,t).enumerable}))),a.push.apply(a,n)}return a}var I=function(e){var t=e.title,a=e.renderTitle,n=e.children,l=e.style,u=e.className,r=e.panelKey,o=e.expand,i=e.onChange;return g.default.createElement(g.default.Fragment,null,g.default.createElement("div",{className:(0,C.default)(k.default.collapse_panel_header,u),style:l,onClick:function(){null==i||i(r)}},g.default.createElement("div",{className:k.default.collapse_panel_header_main},"function"==typeof a?a(o):t),g.default.createElement("div",{className:k.default.collapse_panel_header_arrow},g.default.createElement(E.Icon,{className:(0,C.default)((0,y.default)((0,y.default)({},k.default.collapse_panel_header_arrow_icon_expand,o),k.default.collapse_panel_header_arrow_icon,!o)),prefix:"nocodeplatformicon",type:"fangxiangyou"}))),g.default.createElement("div",{className:(0,C.default)(k.default.collapse_panel_content,(0,y.default)({},k.default.collapse_panel_content_hidden,!o))},n))};I.displayName="CollapsePanel";var S=(0,g.memo)((0,g.forwardRef)((function(e,t){var a,n=e.activeKey,l=e.defaultActiveKey,u=e.children,r=e.onChange,f=e.style,s=t||(0,g.useRef)(),E=(0,g.useState)(function(e,t){return(0,b.isUndefined)(e)?(0,b.isUndefined)(t)?[]:Array.isArray(t)?t:[t]:Array.isArray(e)?e:[e]}(n,l)),C=(0,h.default)(E,2),N=C[0],I=C[1],S=function(e){var t=(0,m.default)(N).call(N,e);t>-1?(0,p.default)(N).call(N,t,1):N.push(e);var a=(0,b.clone)(N);null==r||r(a),I(a)};return g.default.createElement("div",{className:k.default.collapse,style:f,ref:s},(0,v.default)(a=g.default.Children).call(a,u,(function(e){var t;if("CollapsePanel"!==(null==e||null===(t=e.type)||void 0===t?void 0:t.displayName))return e;var a=e.props.panelKey;return g.default.cloneElement(e,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach((function(t){(0,y.default)(e,t,a[t])})):i?c(e,i(a)):w(Object(a)).forEach((function(t){d(e,t,o(a,t))}))}return e}({onChange:S,expand:(0,_.default)(N).call(N,a)},e.props))})))})));S.Panel=I,S.displayName="Collapse";t.default=S},41016:function(e,t,a){var n=a(13568),l=a(93252),u=a(25028),r=a(4884),o=a(9564);u(t,"__esModule",{value:!0}),u(t,"TableViewGridContext",{enumerable:!0,get:function(){return f.TableViewGridContext}}),t.default=void 0;var i=o(a(96631)),c=o(a(760)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var l={__proto__:null},o=u&&r;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var c=o?r(e,i):null;c&&(c.get||c.set)?u(l,i,c):l[i]=e[i]}return l.default=e,a&&a.set(e,l),l}(a(65984)),f=a(65873),s=o(a(94360)),m=o(a(40436)),p=a(18656),v=o(a(71252)),_=o(a(16428));function h(e){if("function"!=typeof l)return null;var t=new l,a=new l;return(h=function(e){return e?a:t})(e)}t.default=(0,d.memo)((function(e){var t=e.horizontal,a=e.onToggleHorizontal,n=e.getTransformOriginRef,l=(0,m.default)().state.fileServer.imageUrl,u=void 0===l?"":l,r=(0,d.useRef)(null),o=n()||r.current;(0,d.useLayoutEffect)((function(){if(o)if(t){var e,a,n=null===(e=o.parentElement)||void 0===e?void 0:e.getBoundingClientRect(),l=(n.height,n.width),u=Math.floor(l/2);o.style.cssText=(0,c.default)(a="transform: rotateZ(90deg);transform-origin: ".concat(u,"px ")).call(a,u,"px;\n        height: 100vw;width:100vh; opacity: 0.99; position: absolute; overflow: hidden;")}else o.style.cssText=""}),[r.current,t,o]);var h=_.default.createPortal(d.default.createElement("div",{className:(0,v.default)(s.default.table_toggle_btn_wrapper,(0,i.default)({},s.default.table_toggle_btn_wrapper_horizontal,t))},d.default.createElement("div",{className:s.default.table_toggle_btn,onClick:a},d.default.createElement(p.Icon,{type:t?"shuping":"hengping",prefix:"nocodeplatformicon"}),d.default.createElement("p",{className:s.default.font},t?"竖屏":"横屏"))),document.body);return d.default.createElement(d.default.Fragment,null,d.default.createElement("div",{ref:r,className:(0,v.default)(s.default.table_view_grid_wrapper)},d.default.createElement(f.TableViewGridContext.Provider,{value:{baseUrl:u}},d.default.createElement(f.TableViewGrid,e))),h)}))},4:function(e,t,a){var n=a(13568),l=a(93252),u=a(25028),r=a(4884),o=a(9564);u(t,"__esModule",{value:!0}),t.default=void 0;var i=o(a(38456)),c=o(a(23992)),d=o(a(73980)),f=o(a(78912)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var a=_(t);if(a&&a.has(e))return a.get(e);var l={__proto__:null},o=u&&r;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var c=o?r(e,i):null;c&&(c.get||c.set)?u(l,i,c):l[i]=e[i]}return l.default=e,a&&a.set(e,l),l}(a(65984)),m=a(18656),p=o(a(98880)),v=o(a(71252));function _(e){if("function"!=typeof l)return null;var t=new l,a=new l;return(_=function(e){return e?a:t})(e)}var h=(0,s.memo)((function(e){var t=e.onItemClick,a=e.menu,n=e.trigger,l=e.children,u=e.dropdownClassName,r=e.gap,o=void 0===r?6:r,i=(0,s.useState)(!1),c=(0,f.default)(i,2),d=c[0],_=c[1],h=(0,s.useState)({}),y=(0,f.default)(h,2),g=y[0],E=y[1],b=(0,s.useRef)(),C=(0,s.useRef)(),k=(0,s.useCallback)((function(e){_(!1),null==t||t(e)}),[t]);(0,s.useEffect)((function(){if(C.current&&b.current){var e=b.current.clientWidth;E({width:e+"px"})}}),[b.current,C.current]);var N=(0,s.useCallback)((function(e){_(e)}),[]);if("Menu"!==a.type.displayName)return s.default.createElement("div",null);var w=s.default.cloneElement(a,{onItemClick:k,ref:C}),I=s.default.cloneElement(l,{ref:b});p.default.dropdown;return s.default.createElement(m.Tooltip,{tip:w,popperStyle:g,gap:o,popperClassName:(0,v.default)(p.default.popup,u),trigger:n||"click",arrow:!1,visible:d,onVisibleChange:N},I)})),y=function(e){var t=e.id,a=e.children,n=e.onClick,l=e.className,u=(0,s.useCallback)((function(){null==n||n(t)}),[n,t]);return s.default.createElement("span",{className:(0,v.default)(p.default.item,l),onClick:u},a)},g=(0,s.forwardRef)((function(e,t){var a=e.children,n=e.onClick,l=e.onItemClick,u=e.className,r=s.default.Children.toArray(a);if(!(0,i.default)(r).call(r,(function(e){return e.type!==y}))){var o=(0,c.default)(r).call(r,(function(e){var t;return s.default.cloneElement(e,{onClick:l||n,id:null===(t=e.key)||void 0===t?void 0:(0,d.default)(t).call(t,2)})}));return s.default.createElement("div",{ref:t,className:(0,v.default)(p.default.menu,u)},o)}}));y.displayName="Item",g.displayName="Menu",h.displayName="Dropdown",h.Menu=g,h.Item=y;t.default=h},19084:function(e,t,a){var n=a(25028),l=a(9564);n(t,"__esModule",{value:!0}),t.default=void 0;var u=l(a(23992)),r=l(a(65984)),o=l(a(71252)),i=l(a(38760)),c=a(18656);t.default=function(e){var t=e.className,a=e.btns;return r.default.createElement("div",{className:(0,o.default)(i.default.footerbtns,t)},(0,u.default)(a).call(a,(function(e,t){var n=e.text,l=e.handleClick;return r.default.createElement(c.Button,{className:i.default.button,onClick:l,type:t<a.length-1?"second":"primary"},n)})))}},11292:function(e,t,a){var n=a(13568),l=a(13939),u=a(34716),r=a(70696),o=a(4884),i=a(3464),c=a(51400),d=a(25028),f=a(93252),s=a(9564);d(t,"__esModule",{value:!0}),t.default=void 0;var m=s(a(26048)),p=s(a(96631)),v=s(a(99148)),_=s(a(35256)),h=s(a(38456)),y=s(a(50524)),g=s(a(70696)),E=s(a(760)),b=s(a(73980)),C=s(a(61260)),k=s(a(67584)),N=s(a(23992)),w=s(a(1900)),I=s(a(78912)),S=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var a=V(t);if(a&&a.has(e))return a.get(e);var l={__proto__:null},u=d&&o;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var i=u?o(e,r):null;i&&(i.get||i.set)?d(l,r,i):l[r]=e[r]}return l.default=e,a&&a.set(e,l),l}(a(65984)),T=s(a(76612)),M=s(a(19084)),x=a(14012),P=a(60644),A=a(4804),L=s(a(35736)),O=s(a(32676)),F=a(57264),D=["fieldCaption","items"],j=["value"];function V(e){if("function"!=typeof f)return null;var t=new f,a=new f;return(V=function(e){return e?a:t})(e)}function R(e,t){var a=l(e);if(u){var n=u(e);t&&(n=r(n).call(n,(function(t){return o(e,t).enumerable}))),a.push.apply(a,n)}return a}function B(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){(0,p.default)(e,t,a[t])})):i?c(e,i(a)):R(Object(a)).forEach((function(t){d(e,t,o(a,t))}))}return e}var U=(0,S.memo)((function(e){var t=e.listFilterConfig,a=void 0===t?[]:t,n=e.configFilterItems,l=e.handleSubmit,u=e.enumValueList,r=e.addFilterValueList,o=(0,S.useState)(!1),i=(0,I.default)(o,2),c=i[0],d=i[1],f=(0,S.useState)((0,A.getDefaultFilterList)(n,a)),s=(0,I.default)(f,2),p=s[0],V=s[1],R=(0,S.useCallback)((function(e){return(0,h.default)(a).call(a,(function(t){return t.fieldName===e}))||{}}),[a]),U=(0,S.useCallback)((function(e){var t,a=e.fieldName,n=e.newFilterList,l=void 0===n?p:n,u=e.own,r=(null===(t=R(a))||void 0===t?void 0:t.compareTypes)||[],o=[];if(l.forEach((function(e){e.fieldName===a&&o.push(e.compareType)})),(0,y.default)(o).call(o,A.COMPARE_TYPE.enumEq)){var i=(0,g.default)(r).call(r,(function(e){return e.id!==A.COMPARE_TYPE.enumEq||e.id===A.COMPARE_TYPE.enumEq&&u===A.COMPARE_TYPE.enumEq}));return(0,A.convertCompareTypes)(i)}return(0,A.convertCompareTypes)(r)}),[p,R]),z=(0,S.useCallback)((function(){d(!0)}),[]),G=(0,S.useCallback)((function(e){var t=R(e),a=t.fieldCaption,n=t.items,l=(0,_.default)(t,D),u=U({fieldName:e});u.length&&V((function(t){var r;return(0,E.default)(r=[]).call(r,(0,v.default)(t),[B(B({},l),{},{id:t.length,fieldCaption:a,fieldName:e,compareTypes:u,compareType:u[0].value,valueList:n?(0,A.convertItems)(n):[],value:"",key:l.number+(0,F.getRandomValues)()})])}))}),[U,R]),Y=(0,S.useCallback)((function(e){var t=(0,b.default)(p).call(p);(0,C.default)(t).call(t,e,1),V(t)}),[p]),K=(0,S.useCallback)((function(e){(0,k.default)((function(){d(!1),G(e.value)}))}),[G]),W=(0,S.useCallback)((function(){V([])}),[]),q=(0,S.useCallback)((function(){var e=(0,N.default)(p).call(p,(function(e){var t=e.fieldName,a=e.compareType,n=e.value;return{fieldName:t,compareType:a,value:e.submitValue||(n?Array.isArray(n)?n:[n]:[])}}));l(e)}),[p,l]),H=(0,S.useCallback)((function(e){var t=e.id,a=e.compareType,n=e.value,l=e.isEnum,r=(0,w.default)(p).call(p,(function(e){return t===e.id}));if(-1!==r){var o=(0,P.cloneDeep)(p);if(a&&(o[r].compareType=a,o[r].submitValue=void 0,o[r].value=[],o.forEach((function(e){e.compareTypes=U({fieldName:e.fieldName,newFilterList:o,own:e.compareType})}))),n)if(l){var i,c=o[r],d=null===(i=u[c.fieldName])||void 0===i?void 0:i.groupInfo,f=(0,A.removeAllItem)(d),s=(0,N.default)(n).call(n,(function(e){var t=f[e];t.value;return B({},(0,_.default)(t,j))}));o[r].submitValue=s}else Array.isArray(n)?o[r].submitValue=(0,N.default)(n).call(n,(function(e){return{fieldValue:e}})):o[r].submitValue=[{fieldValue:n}];o[r].value=n,V(o)}}),[p,u]),Q=[{text:"添加筛选条件",handleClick:z},{text:"清空值",handleClick:W},{text:"确定",handleClick:q}],J=(0,S.useMemo)((function(){return(0,N.default)(a).call(a,(function(e){return{value:e.fieldName,label:e.fieldCaption}}))}),[a]),X=(0,S.useMemo)((function(){return(0,N.default)(p).call(p,(function(e,t){var a,n=e.value,l=e.fieldName,o=e.compareTypes,i=e.compareType,c=e.key,d=e.isMulti,f=(0,A.getEnumList)((null==u||null===(a=u[l])||void 0===a?void 0:a.groupInfo)||[]),s=(0,A.getInputType)(o,i,d),p=(0,A.getFilterItemValue)(n,s,f);return S.default.createElement(O.default,(0,m.default)({},e,{value:p,handleChange:H,handleDelete:function(){Y(t)},enumValueList:f,valueList:e.valueList||[],setEnumOptions:function(){return r(e)},inputType:s,isMulti:d||(0,y.default)(A.MULTI_COMPARE_TYPE).call(A.MULTI_COMPARE_TYPE,i),key:c}))}))}),[p,H,Y,u,r]);return S.default.createElement(S.default.Fragment,null,S.default.createElement("div",{className:T.default.filter_content},!p.length&&S.default.createElement(L.default,{handleAdd:z}),S.default.createElement(x.SelectPopup,{title:"请选择筛选内容",data:J,handleSelect:K,visible:c,setVisible:d}),X),(!!n.length||!!p.length)&&S.default.createElement(M.default,{btns:Q}))}));U.displayName="FilterContent";t.default=U},32676:function(e,t,a){var n=a(13568),l=a(93252),u=a(25028),r=a(4884),o=a(9564);u(t,"__esModule",{value:!0}),t.default=void 0;var i=o(a(26048)),c=o(a(96631)),d=o(a(78912)),f=o(a(35256)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var a=C(t);if(a&&a.has(e))return a.get(e);var l={__proto__:null},o=u&&r;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var c=o?r(e,i):null;c&&(c.get||c.set)?u(l,i,c):l[i]=e[i]}return l.default=e,a&&a.set(e,l),l}(a(65984)),m=a(18656),p=a(65873),v=o(a(71252)),_=a(16428),h=a(4804),y=o(a(75296)),g=o(a(76612)),E=a(60644),b=["id","fieldName","fieldCaption","compareTypes","valueList","compareType","value","handleDelete","isWithCondition","handleChange","enumValueList","setEnumOptions","formatType","maxLength","inputType"];function C(e){if("function"!=typeof l)return null;var t=new l,a=new l;return(C=function(e){return e?a:t})(e)}var k=(0,s.memo)((function(e){var t,a=e.id,n=(e.fieldName,e.fieldCaption),l=e.compareTypes,u=void 0===l?[]:l,r=e.valueList,o=void 0===r?[]:r,C=e.compareType,k=void 0===C?(null===(t=u[0])||void 0===t?void 0:t.value)||"":C,N=e.value,w=void 0===N?[]:N,I=e.handleDelete,S=e.isWithCondition,T=void 0===S||S,M=e.handleChange,x=e.enumValueList,P=e.setEnumOptions,A=e.formatType,L=e.maxLength,O=e.inputType,F=(0,f.default)(e,b),D=(0,s.useState)(k),j=(0,d.default)(D,2),V=j[0],R=j[1],B=(0,s.useMemo)((function(){return O===h.INPUT_TYPE.enumEq}),[O]),U=(0,s.useState)(w),z=(0,d.default)(U,2),G=z[0],Y=z[1],K=(0,s.useCallback)((function(e){M({id:a,compareType:e}),(0,_.unstable_batchedUpdates)((function(){R(e),Y("")}))}),[M,a]),W=(0,s.useCallback)((function(e){var t=(0,h.formatValue)(e,A,O);Y(t),M({id:a,compareType:V,value:t})}),[a,V,M,A,O]),q=(0,s.useMemo)((function(){if(O===h.INPUT_TYPE.dateRange&&(0,E.isArray)(G)){var e=(0,d.default)(G,2),t=e[0],a=void 0===t?"":t,n=e[1];return{start:a,end:void 0===n?"":n}}return G}),[O,G]);(0,s.useEffect)((function(){B&&(null==P||P())}),[]);var H=(0,s.useCallback)((function(e){M({id:a,value:e,isEnum:B})}),[B,M]),Q=(0,s.useMemo)((function(){return(0,h.getFormatType)(A)}),[A]),J=(0,s.useCallback)((function(){switch(O){case h.INPUT_TYPE.none:return s.default.createElement(p.Text,{value:G,disabled:!0});case h.INPUT_TYPE.enumEq:var e=(0,h.getEnumList)(x);return s.default.createElement(p.Select,{className:(0,v.default)((0,c.default)({},g.default.withcond_select,T)),value:w,options:e,multiple:!0,placeholder:"请选择",onConfirm:H,showAllSelect:!0,renderSearch:!0});case h.INPUT_TYPE.select:return s.default.createElement(p.Select,{className:(0,v.default)((0,c.default)({},g.default.withcond_select,T)),value:w,options:o,placeholder:"请选择",onChange:H});case h.INPUT_TYPE.multiSelect:return s.default.createElement(p.Select,{className:(0,v.default)((0,c.default)({},g.default.withcond_select,T)),value:w,options:o,multiple:!0,placeholder:"请选择",renderSearch:!0,showAllSelect:!0,onConfirm:H});case h.INPUT_TYPE.refbill:return s.default.createElement(y.default,(0,i.default)({},F,{value:G,onChange:H,onConfirm:H}));case h.INPUT_TYPE.text:return s.default.createElement(p.Text,{value:G,maxLength:L||400,placeholder:"请输入",onChange:W});case h.INPUT_TYPE.textarea:return s.default.createElement(p.Textarea,{value:G,maxLength:L||140,placeholder:"请输入",onChange:W});case h.INPUT_TYPE.dateTime:return s.default.createElement(p.DatePicker,{value:G,placeholder:"请选择",onConfirm:W,picker:Q});case h.INPUT_TYPE.dateRange:return s.default.createElement(p.DateRangePicker,{value:q,placeholder:"请选择",onChange:W,picker:Q});case h.INPUT_TYPE.number:return s.default.createElement(p.Number,{value:G,digitLength:F.precision||23,onChange:W});default:return s.default.createElement(p.Text,{value:G,maxLength:L||400,placeholder:"请输入",onChange:W})}}),[V,w,G,O,x,H,q]);return s.default.createElement("div",{className:g.default.filter_item},s.default.createElement("div",{className:g.default.item_header},s.default.createElement("div",{className:g.default.title},n),s.default.createElement("div",{className:g.default.delicon,onClick:function(){I(a)}},s.default.createElement(m.Icon,{prefix:"nocodeplatformicon",type:"shanchu2"}))),s.default.createElement("div",{className:g.default.select_container},T&&s.default.createElement("div",{className:g.default.condition_selectBox},s.default.createElement(p.Select,{className:g.default.condition_select,value:V,options:u,onChange:K,placeholder:"请选择"})),s.default.createElement("div",{className:g.default.value_selectbox},J())))}));k.displayName="FilterItem";t.default=k},35736:function(e,t,a){var n=a(13568),l=a(93252),u=a(25028),r=a(4884),o=a(9564);u(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var a=s(t);if(a&&a.has(e))return a.get(e);var l={__proto__:null},o=u&&r;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var c=o?r(e,i):null;c&&(c.get||c.set)?u(l,i,c):l[i]=e[i]}return l.default=e,a&&a.set(e,l),l}(a(65984)),c=a(18656),d=o(a(4496)),f=o(a(76612));function s(e){if("function"!=typeof l)return null;var t=new l,a=new l;return(s=function(e){return e?a:t})(e)}var m=(0,i.memo)((function(e){var t=e.handleAdd;return i.default.createElement("div",{className:f.default.nodata},i.default.createElement("img",{src:d.default}),i.default.createElement("div",{className:f.default.maintips},"暂未设置筛选条件"),i.default.createElement("div",{className:f.default.operatetips},"点击下方按钮添加筛选内容"),i.default.createElement(c.Button,{className:f.default.btn,type:"primary",onClick:t},"添加筛选内容"))}));m.displayName="NoData";t.default=m},75296:function(e,t,a){var n=a(13568),l=a(13939),u=a(34716),r=a(70696),o=a(4884),i=a(3464),c=a(51400),d=a(25028),f=a(93252),s=a(9564);d(t,"__esModule",{value:!0}),t.default=void 0;var m=s(a(96631)),p=s(a(78912)),v=s(a(35256)),_=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var a=w(t);if(a&&a.has(e))return a.get(e);var l={__proto__:null},u=d&&o;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var i=u?o(e,r):null;i&&(i.get||i.set)?d(l,r,i):l[r]=e[r]}return l.default=e,a&&a.set(e,l),l}(a(65984)),h=a(65873),y=a(31896),g=a(41936),E=a(18656),b=s(a(63176)),C=s(a(75020)),k=s(a(56636)),N=["value","onChange","onConfirm"];function w(e){if("function"!=typeof f)return null;var t=new f,a=new f;return(w=function(e){return e?a:t})(e)}function I(e,t){var a=l(e);if(u){var n=u(e);t&&(n=r(n).call(n,(function(t){return o(e,t).enumerable}))),a.push.apply(a,n)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){(0,m.default)(e,t,a[t])})):i?c(e,i(a)):I(Object(a)).forEach((function(t){d(e,t,o(a,t))}))}return e}var T=y.hooks.useKDRefBill,M="ref-bill-option",x=(0,_.memo)((function(e){var t=e.value,a=e.onChange,n=e.onConfirm,l=(0,v.default)(e,N),u=((0,g.useParams)().appId,(0,_.useState)(0)),r=(0,p.default)(u,2),o=r[0],i=r[1],c=l.entityId,d=l.isMulti,f=(0,_.useRef)(),s=(0,_.useMemo)((function(){return d?t||[]:(Array.isArray(t)?t[0]:t)||""}),[d,t]),m=(0,b.default)({defaultQueryParams:{pageSize:50},queryCallback:function(){i(1)}}),y=T(S(S({},m),{},{controlMeta:S(S({},l),{},{queryParams:m.queryParams})}),!0)||{},w=y.onSearch,I=y.options,x=y.onChange;(0,_.useEffect)((function(){var e;c&&(s&&x(s),null===(e=m.batchInvokeQuery)||void 0===e||e.call(m,c,{page_size:50,ids:Array.isArray(s)?s:s?[s]:[]}))}),[c]);var P=(0,_.useCallback)((function(e,t){if(null==x||x(e),d)return e;null==a||a(e)}),[a,d,x]),A=(0,_.useCallback)((function(e){null==n||n(e)}),[a]),L=(0,_.useCallback)((function(e){var t=e.label,a=e.des;return _.default.createElement("div",{className:k.default[M]},_.default.createElement("div",{className:k.default["".concat(M,"-title")]},t),_.default.createElement("div",{className:k.default["".concat(M,"-desc")]},a||"-"))}),[]),O=(0,_.useCallback)((function(e,t){return!0}),[]),F=function(e){null==w||w(e)},D=(0,C.default)(F),j=(0,_.useMemo)((function(){if(0===o)return _.default.createElement("div",{className:k.default["".concat(M,"-empty")]},_.default.createElement(E.Spin,{name:"Spin"}))}),[o]);return _.default.createElement(h.Select,{ref:f,value:s,renderSearch:!0,multiple:d,allowClear:!0,placeholder:"请选择",options:I||[],onChange:P,notFoundContent:j,renderOption:L,filterOption:O,onVisibleChange:function(e){e&&F("")},onSearch:D,onConfirm:A})}));x.displayName="ListFilterRefBill";t.default=x},40128:function(e,t,a){var n=a(13568),l=a(93252),u=a(25028),r=a(4884),o=a(9564);u(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var a=s(t);if(a&&a.has(e))return a.get(e);var l={__proto__:null},o=u&&r;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var c=o?r(e,i):null;c&&(c.get||c.set)?u(l,i,c):l[i]=e[i]}return l.default=e,a&&a.set(e,l),l}(a(65984)),c=a(18656),d=o(a(11292)),f=o(a(76612));function s(e){if("function"!=typeof l)return null;var t=new l,a=new l;return(s=function(e){return e?a:t})(e)}var m=(0,i.memo)((function(e){var t=e.title,a=e.visible,n=e.setVisible,l=e.configFilterItems,u=e.listFilterConfig,r=e.handleSubmit,o=e.enumValueList,s=e.addFilterValueList;return i.default.createElement(c.Popup,{className:f.default.table_filter,placement:"bottom",visible:a,onClose:function(){return n(!1)},radius:!0,title:t},i.default.createElement(d.default,{configFilterItems:l,listFilterConfig:u,handleSubmit:r,enumValueList:o,addFilterValueList:s}))}));m.displayName="TableFilter";t.default=m},28332:function(e,t,a){var n=a(13568),l=a(93252),u=a(25028),r=a(4884),o=a(9564);u(t,"__esModule",{value:!0}),t.default=void 0;var i=o(a(23992)),c=o(a(52892)),d=o(a(99308)),f=o(a(760)),s=o(a(70696)),m=o(a(50524)),p=o(a(26048)),v=o(a(99148)),_=o(a(78912)),h=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var a=b(t);if(a&&a.has(e))return a.get(e);var l={__proto__:null},o=u&&r;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var c=o?r(e,i):null;c&&(c.get||c.set)?u(l,i,c):l[i]=e[i]}return l.default=e,a&&a.set(e,l),l}(a(65984)),y=a(65873),g=o(a(15964)),E=a(18656);function b(e){if("function"!=typeof l)return null;var t=new l,a=new l;return(b=function(e){return e?a:t})(e)}var C=(0,h.memo)((function(e){var t=e.data,a=e.visible,n=e.onConfirm,l=e.onClose,u=e.title,r=e.checkedKeys,o=e.okText,b=void 0===o?"确定":o,C=e.onVisibleChange,w=(0,h.useState)(!1),I=(0,_.default)(w,2),S=I[0],T=I[1],M=(0,h.useState)(r||[]),x=(0,_.default)(M,2),P=x[0],A=x[1],L=(0,h.useState)(t||[]),O=(0,_.default)(L,2),F=O[0],D=O[1],j=(0,h.useCallback)((function(){if(l)return l();T(!1),null==C||C()}),[C]);(0,h.useEffect)((function(){T(null!=a&&a)}),[a]),(0,h.useEffect)((function(){A(r||[])}),[r]),(0,h.useEffect)((function(){D(t||[])}),[t]);var V=(0,h.useMemo)((function(){return null==F?void 0:(0,i.default)(F).call(F,(function(e){return e.key}))}),[F]),R=(0,h.useMemo)((function(){var e=new c.default;F.forEach((function(t){e.set(t.key,!0)}));var t=[];return P.forEach((function(a){e.has(a)&&t.push(a)})),t}),[F,P]),B=function(e,t){var a,n=t?(0,v.default)(new d.default((0,f.default)(a=[]).call(a,(0,v.default)(R),[e]))):(0,s.default)(R).call(R,(function(t){return t!==e}));A(n)},U=(0,h.useCallback)((function(e){var t=e?V:function(e,t){var a={};return t.forEach((function(e){a[e]=!0})),(0,s.default)(e).call(e,(function(e){return!a[e]}))}(P,V);A(t)}),[V,P]),z=(0,h.useCallback)((function(e){return(0,m.default)(R).call(R,e)}),[R]),G=(0,h.useCallback)((function(){null==n||n(R,F)}),[R,n]),Y=(0,h.useMemo)((function(){return 0===R.length?{checked:!1,indeterminate:!1}:F.length===R.length?{checked:!0,indeterminate:!1}:F.length>=R.length?{checked:!1,indeterminate:!0}:{checked:!1,indeterminate:!1}}),[R,F]);return h.default.createElement(y.Popup,{visible:S,teleport:document.body,onClose:j,className:g.default.popup},h.default.createElement("div",{className:g.default.box},h.default.createElement("div",{className:g.default.tip},h.default.createElement("div",{className:g.default.title},u),h.default.createElement("div",{className:g.default.close},h.default.createElement(E.Icon,{type:"guanbi",prefix:"nocodeplatformicon",onClick:j}))),h.default.createElement("div",{className:g.default.data_list},null==F?void 0:(0,i.default)(F).call(F,(function(e,t){return h.default.createElement(k,{key:e.key,checked:z(e.key),title:e.title,id:e.key,onSelect:B})}))),h.default.createElement(N,(0,p.default)({},Y,{selechedNum:R.length,totalNum:F.length,onChange:U,onConfirm:G,okText:b}))))})),k=(0,h.memo)((function(e){var t=e.checked,a=e.title,n=e.id,l=e.onSelect,u=(0,h.useCallback)((function(e){var t=e.currentTarget.querySelector("input"),a=t.checked,n=t.value;"INPUT"===e.target.nodeName?null==l||l(n,a):null==l||l(n,!a)}),[l]);return h.default.createElement("div",{className:g.default.item,onClick:u},h.default.createElement(E.Checkbox,{className:g.default.checkbox,value:n,checked:t}),h.default.createElement("div",{className:g.default.content},h.default.createElement("p",{className:g.default.title},a)))})),N=function(e){e.selechedNum,e.totalNum;var t=e.indeterminate,a=e.checked,n=e.onChange,l=e.onConfirm,u=e.okText,r=(0,h.useCallback)((function(){null==l||l()}),[l]),o=(0,h.useCallback)((function(e){var t=e.currentTarget.querySelector("input").checked;"INPUT"===e.target.nodeName?null==n||n(t):null==n||n(!t)}),[n]);return h.default.createElement("div",{className:g.default.footer},h.default.createElement("span",{className:g.default.selected,onClick:o},h.default.createElement("span",{className:g.default["checkbox-wrapper"]},h.default.createElement(E.Checkbox,{className:g.default.checkbox,indeterminate:t,checked:a})),h.default.createElement("span",{className:g.default.desc},"全选")),h.default.createElement(E.Button,{size:"small",type:"primary",className:g.default.confirm,onClick:r},u||"确定"))};C.displayName="ListItemSettingPopup";t.default=C},48144:function(e,t,a){var n=a(13568),l=a(93252),u=a(25028),r=a(4884),o=a(9564);u(t,"__esModule",{value:!0}),t.default=void 0;var i=o(a(23992)),c=o(a(73020)),d=o(a(78912)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var a=_(t);if(a&&a.has(e))return a.get(e);var l={__proto__:null},o=u&&r;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var c=o?r(e,i):null;c&&(c.get||c.set)?u(l,i,c):l[i]=e[i]}return l.default=e,a&&a.set(e,l),l}(a(65984)),s=a(65873),m=o(a(57620)),p=a(18656),v=a(13472);function _(e){if("function"!=typeof l)return null;var t=new l,a=new l;return(_=function(e){return e?a:t})(e)}var h=(0,f.memo)((function(e){var t=e.dataList,a=e.visible,n=e.onDelete,l=e.onClose,u=e.title,r=e.hasMore,o=e.onLoadMore,v=(0,f.useState)(!1),_=(0,d.default)(v,2),h=_[0],g=_[1],E=(0,f.useCallback)((function(){if(l)return l();g(!1)}),[]);return(0,f.useEffect)((function(){g(a||!1)}),[a]),f.default.createElement(s.Popup,{visible:h,teleport:document.body,onClose:E,className:m.default.popup},f.default.createElement("div",{className:m.default.box},f.default.createElement("div",{className:m.default.tip},f.default.createElement("div",{className:m.default.title},u),f.default.createElement("div",{className:m.default.close},f.default.createElement(p.Icon,{type:"guanbi",prefix:"nocodeplatformicon",onClick:E}))),f.default.createElement("div",{className:m.default.data_list},f.default.createElement(s.InfiniteLoading,{hasMore:r,onLoadMore:o},null==t?void 0:(0,i.default)(t).call(t,(function(e,t){return f.default.createElement(y,{key:null==e?void 0:e.key,onDelete:n,title:e.title,index:t,data:(0,c.default)(e),id:e.id})}))))))})),y=(0,f.memo)((function(e){var t=e.onDelete,a=e.data,n=e.title,l=void 0===n?"":n,u=e.id,r=(0,f.useCallback)((function(){null==t||t(u)}),[u,t]);return f.default.createElement("div",{className:m.default.item},f.default.createElement(p.Icon,{className:m.default.delete,type:"xingshanchu",prefix:"nocodeplatformicon",onClick:r}),f.default.createElement("div",{className:m.default.content},f.default.createElement("p",{className:m.default.title},l),f.default.createElement("div",{className:(0,c.default)(m.default)},null==a?void 0:(0,i.default)(a).call(a,(function(e,t){return f.default.createElement(f.default.Fragment,null,f.default.createElement(f.default.Fragment,null,(0,v.parseCardFieldControl)(e)),t!==a.length&&f.default.createElement(f.default.Fragment,null," | "))})))))}));h.displayName="SelectListPopup";t.default=h},5248:function(e,t,a){var n=a(13568),l=a(93252),u=a(25028),r=a(4884),o=a(9564);u(t,"__esModule",{value:!0}),t.default=t.BatchWorkFooterLayout=void 0;var i=o(a(23992)),c=o(a(96631)),d=o(a(78912)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var l={__proto__:null},o=u&&r;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var c=o?r(e,i):null;c&&(c.get||c.set)?u(l,i,c):l[i]=e[i]}return l.default=e,a&&a.set(e,l),l}(a(65984)),s=a(18656),m=o(a(4)),p=o(a(33020)),v=o(a(48144)),_=o(a(71252));function h(e){if("function"!=typeof l)return null;var t=new l,a=new l;return(h=function(e){return e?a:t})(e)}var y=(0,f.memo)((function(e){var t=e.onClickNew,a=e.onClickStatistic,n=e.onClickSelect,l=e.showStatistic,u=e.showNew,r=e.showSelect;return f.default.createElement("div",{className:p.default.footerlayout},r&&f.default.createElement(s.Button,{className:p.default.button,onClick:n},"选择"),l&&f.default.createElement(s.Button,{className:p.default.button,onClick:a},"统计"),u&&f.default.createElement(s.Button,{className:p.default.button,type:"primary",onClick:t},"录入"))}));t.BatchWorkFooterLayout=(0,f.memo)((function(e){var t=e.onOk,a=e.indeterminate,n=e.checked,l=e.onSelect,u=e.onBatchWork,r=e.actions,o=e.count,h=e.onDelete,y=e.dataList,g=e.hasMore,E=e.onLoadMore,b=(0,f.useState)(!1),C=(0,d.default)(b,2),k=C[0],N=C[1],w=(0,f.useCallback)((function(){N(!1)}),[]),I=(0,f.useCallback)((function(){o>0&&N(!0)}),[k,o]),S=(0,f.useCallback)((function(e){o<=1&&N(!1),null==h||h(e)}),[o,h]),T=f.default.createElement(m.default.Menu,null,null==r?void 0:(0,i.default)(r).call(r,(function(e){return f.default.createElement(m.default.Item,{key:e.value},e.label)})));return f.default.createElement("div",{className:p.default.footerlayout},f.default.createElement("div",{className:p.default.check},f.default.createElement(s.Checkbox,{className:p.default.checkbox,onChange:l,indeterminate:a,checked:n},"全选"),f.default.createElement("div",{className:p.default.selected},f.default.createElement("p",null,"已选："),f.default.createElement(s.Button,{type:"text",className:(0,_.default)((0,c.default)({},p.default.selected_count,o>0)),onClick:I},o),f.default.createElement(v.default,{hasMore:g,onLoadMore:E,dataList:y,visible:k,onDelete:S,onClose:w,title:"已选： ".concat(o)}))),f.default.createElement("div",{className:p.default.button_group},f.default.createElement(m.default,{menu:T,onItemClick:function(e){null==u||u(e)},trigger:"click"},f.default.createElement(s.Button,{className:p.default.batch_button},"批量操作")),f.default.createElement(s.Button,{className:p.default.batch_button,type:"primary",onClick:t},"完成")))})),t.default=y},58476:function(e,t,a){var n=a(13568),l=a(93252),u=a(25028),r=a(4884),o=a(9564);u(t,"__esModule",{value:!0}),t.default=void 0;var i=o(a(96631)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var a=p(t);if(a&&a.has(e))return a.get(e);var l={__proto__:null},o=u&&r;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var c=o?r(e,i):null;c&&(c.get||c.set)?u(l,i,c):l[i]=e[i]}return l.default=e,a&&a.set(e,l),l}(a(65984)),d=a(18656),f=o(a(42284)),s=o(a(71252)),m=o(a(97452));function p(e){if("function"!=typeof l)return null;var t=new l,a=new l;return(p=function(e){return e?a:t})(e)}var v=(0,c.memo)((function(e){var t=e.searchKeywords,a=e.handleSearch,n=(e.handleChangeForm,e.handleShowListItemSetting),l=(e.showSideNav,e.showViewSelect),u=e.showSearch,r=e.showGridView,o=(e.showSort,e.showFilter),p=e.showColumnsSetting,v=e.handleShowFilterSetting,_=e.tableView,h=e.filterActive,y=e.handleToggleTableView,g=e.handleShowViewSelect,E=(0,s.default)(m.default.headerlayout_item,m.default.headerlayout_icon);return c.default.createElement(c.default.Fragment,null,c.default.createElement("div",{className:m.default.headerlayout},u&&c.default.createElement(f.default,{value:t,onSearch:a,className:m.default.headerlayout_item,size:"small",borderType:"bordered",placeholder:"搜索"}),l&&c.default.createElement(d.Icon,{className:(0,s.default)(E),prefix:"nocodeplatformicon",type:"shitu",onClick:g}),o&&c.default.createElement(d.Icon,{className:(0,s.default)(E,(0,i.default)({},m.default.active,h)),prefix:"nocodeplatformicon",type:"shaixuanxian",onClick:v}),p&&c.default.createElement(d.Icon,{onClick:n,className:E,prefix:"nocodeplatformicon",type:"lieshezhi"}),r&&c.default.createElement(d.Icon,{className:E,prefix:"nocodeplatformicon",type:_?"kapian":"biaoge",onClick:y})))}));v.displayName="HeaderLayout";t.default=v},92432:function(e,t,a){var n=a(13568),l=a(93252),u=a(25028),r=a(4884),o=a(9564);u(t,"__esModule",{value:!0}),t.default=void 0;var i=o(a(50524)),c=o(a(67584)),d=o(a(760)),f=o(a(78912)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var l={__proto__:null},o=u&&r;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var c=o?r(e,i):null;c&&(c.get||c.set)?u(l,i,c):l[i]=e[i]}return l.default=e,a&&a.set(e,l),l}(a(65984)),m=a(41936),p=a(18656),v=o(a(91840)),_=o(a(97452));function h(e){if("function"!=typeof l)return null;var t=new l,a=new l;return(h=function(e){return e?a:t})(e)}var y=(0,s.memo)((function(e){e.className;var t,a=e.handleChangeForm,n=e.formMenu,l=e.svgData,u=(0,m.useParams)(),r=u.appId,o=u.targetFormId,h=(0,s.useState)(!1),y=(0,f.default)(h,2),g=y[0],E=y[1],b=(0,s.useRef)(),C=(0,s.useCallback)((function(){E(!0)}),[]);return(0,s.useEffect)((function(){var e=null;function t(){if(b.current){var t=b.current.classList;(0,i.default)(Array.prototype).call(t,_.default.menu_scroll)||t.add(_.default.menu_scroll),window.clearTimeout(e),e=(0,c.default)((function(){t.remove(_.default.menu_scroll)}),300)}}return document.addEventListener("scroll",t,!0),function(){document.removeEventListener("scroll",t,!0)}}),[]),s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{ref:b,className:_.default.menu,"data-nc-action":(0,d.default)(t="".concat(r,"|")).call(t,o,"|m_au_lfm")},s.default.createElement(p.Icon,{prefix:"nocodeplatformicon",type:"caidan2",className:_.default.menu_icon,onClick:C}),s.default.createElement("span",{className:_.default.menu_text},"菜单")),s.default.createElement(v.default,{handleChangeForm:a,visible:g,setVisible:E,formMenu:n,svgData:l}))}));y.displayName="HeaderSideNavButton";t.default=y},91840:function(e,t,a){var n=a(13568),l=a(93252),u=a(25028),r=a(4884),o=a(9564);u(t,"__esModule",{value:!0}),t.default=t.NoData=void 0;var i=o(a(50524)),c=o(a(23992)),d=o(a(1900)),f=o(a(760)),s=o(a(26048)),m=o(a(99148)),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var a=M(t);if(a&&a.has(e))return a.get(e);var l={__proto__:null},o=u&&r;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var c=o?r(e,i):null;c&&(c.get||c.set)?u(l,i,c):l[i]=e[i]}return l.default=e,a&&a.set(e,l),l}(a(65984)),v=a(41936),_=a(18656),h=o(a(64716)),y=a(25096),g=a(95936),E=a(60644),b=a(57264),C=o(a(732)),k=o(a(22936)),N=a(59876),w=a(6940),I=a(80672),S=o(a(66236)),T=o(a(71252));function M(e){if("function"!=typeof l)return null;var t=new l,a=new l;return(M=function(e){return e?a:t})(e)}var x=function(e){return!e},P=t.NoData=function(){return p.default.createElement("div",{className:S.default.sidenavlayout_content_empty},p.default.createElement("img",{className:S.default.sidenavlayout_content_empty_img,src:k.default,alt:"",srcset:""}),p.default.createElement("p",{className:S.default.sidenavlayout_content_empty_text},"应用中还没有内容，请在PC端配置"))},A=function(e){var t=e.title,a=e.expand;return p.default.createElement("div",{className:S.default.sidenavlayout_content_main_group},p.default.createElement(_.Icon,{className:S.default.sidenavlayout_content_main_group_icon,type:a?"wenjianjiakai":"wenjianjiaguan",prefix:"nocodeplatformicon"}),p.default.createElement("div",{className:S.default.sidenavlayout_content_main_group_title},t))},L=function(e){var t=e.title,a=(e.image,e.icon),n=e.isSelected,l=void 0===n||n,u=e.style,r=e.className,o=e.onClick;return p.default.createElement("div",{onClick:function(e){e.stopPropagation(),null==o||o()},className:(0,T.default)(S.default.sidenavlayout_content_main_item,r),style:u},p.default.createElement("div",{className:S.default.sidenavlayout_content_main_item_main},a,p.default.createElement("div",{className:S.default.sidenavlayout_content_main_item_title},t)),l&&p.default.createElement(_.Icon,{className:S.default.sidenavlayout_content_main_item_selected,prefix:"nocodeplatformicon",type:"gouxuan"}))},O=(0,p.memo)((function(e){var t=e.level,a=e.formId,n=e.svgData,l=e.name,u=e.image,r=e.selectedId,o=e.children,f=e.formData,v=e.onClick,_=function(e){return e>1?24*(e-1)+12:12*e}(t);if(x(a)){var y=function(e){if(!Array.isArray(e))return[];for(var t=[],a=(0,E.cloneDeep)(e);a.length;){var n=a.pop();x(n.formId)?Array.isArray(n.children)&&a.push.apply(a,(0,m.default)(n.children)):t.push(n.formId)}return t}(o);return p.default.createElement(h.default,{activeKey:(0,i.default)(y).call(y,r)?t:void 0},p.default.createElement(h.default.Panel,{panelKey:t,style:{paddingLeft:"".concat(_,"px")},renderTitle:function(e){return p.default.createElement(A,{expand:e,title:l})}},null==o?void 0:(0,c.default)(o).call(o,(function(e,a){return p.default.createElement(O,(0,s.default)({onClick:v,key:a,formData:e},e,{svgData:n,selectedId:r,level:t+1}))}))))}var g=function(e,t){var a,n,l,u,r=(0,b.getQueryString)("color",t),o=(0,b.getQueryString)("svg",t),i=r&&"undefined"!==r?null==e||null===(a=e.colors)||void 0===a?void 0:(0,d.default)(a).call(a,(function(e){return e.value===r||e.key===r})):0,c=o&&"undefined"!==o?null==e||null===(n=e.svgs)||void 0===n?void 0:(0,d.default)(n).call(n,(function(e){return e.label===o})):0,f=null==e||null===(l=e.colors)||void 0===l||null===(l=l[i])||void 0===l?void 0:l.value,s=null==e||null===(u=e.svgs)||void 0===u||null===(u=u[c])||void 0===u?void 0:u.content;return p.default.createElement("div",{ref:function(e){if(e){var t;e.getElementsByTagName("path")[0].setAttribute("style","fill:".concat(f," "));var a=null===(t=e.getElementsByTagName("svg"))||void 0===t?void 0:t[0];a&&(a.style.width="16px",a.style.height="16px")}},className:S.default.sidenavlayout_content_main_item_icon,dangerouslySetInnerHTML:{__html:s||""}})},C=(0,p.useMemo)((function(){return g(n,u||N.DEFAULT_FORM_IMAGE)}),[n,u,g]);return p.default.createElement(L,{isSelected:r===a,onClick:function(){return null==v?void 0:v(a,f)},style:{paddingLeft:"".concat(_,"px")},title:l,icon:C,image:"".concat(u||"nocode/v2/nocode_sys/common/svgs/create_svg_line?color=%233987ED&svg=svg64","&scale=1")})}));O.displayName="SideNavItemContent";var F=[{path:"/m/home",name:"工作台",iconType:"shouye",useActionName:"m_au_lfm_h"},{path:"/m/app",name:"应用",iconType:"yingyong4",useActionName:"m_au_lfm_as"},{path:"/m/user",name:"我的",iconType:"wode",useActionName:"m_au_lfm_mine"}],D=(0,p.memo)((function(e){var t=e.appId,a=e.formId,n=e.menu,l=e.svgData,u=e.onChange,r=e.selectedId,o=(0,C.default)();return p.default.createElement("div",{className:S.default.sidenavlayout_content},p.default.createElement("div",{className:S.default.sidenavlayout_content_main},(null==n?void 0:n.length)>0?(0,c.default)(n).call(n,(function(e,t){return p.default.createElement(O,(0,s.default)({key:t,formData:e},e,{svgData:l,selectedId:r,onClick:u,level:1}))})):p.default.createElement(P,null)),p.default.createElement("div",{className:S.default.sidenavlayout_content_footer},(0,c.default)(F).call(F,(function(e,n){var l,u;return p.default.createElement("div",{key:e.path,className:S.default.sidenavlayout_content_footer_item,"data-nc-action":(0,f.default)(l=(0,f.default)(u="".concat(t,"|")).call(u,a,"|")).call(l,e.useActionName),onClick:function(){return t=e.path,void o(t,{replace:!0});var t}},p.default.createElement("div",{className:S.default.sidenavlayout_content_footer_item_main},p.default.createElement(_.Icon,{className:S.default.sidenavlayout_content_footer_icon,type:e.iconType,prefix:"nocodeplatformicon"}),p.default.createElement("span",{className:S.default.sidenavlayout_content_footer_name},e.name)))}))))}));D.displayName="SideNavContent";var j=(0,p.memo)((function(){var e=(0,v.useParams)().appId,t=(0,p.useContext)(g.Context),a=t.state,n=t.dispatch,l=a.appsList[e];return(0,p.useEffect)((function(){if(!l){var t="nocode/v2/nocode_sys/app/".concat(e);(0,w.getStoreData)(t,"").then((function(t){t&&n({type:I.UPDATE_APP_INFO_BY_ID,payload:{id:e,value:t.rows[0]}})})),(0,y.getAppInfoById)(e).then((function(a){(0,w.setStoreData)(t,"",a),n({type:I.UPDATE_APP_INFO_BY_ID,payload:{id:e,value:a.rows[0]}})}))}}),[l,a.userInfo]),p.default.createElement("div",{className:S.default.sidenavlayout_header},p.default.createElement("img",{className:S.default.sidenavlayout_header_icon,src:(0,b.getUrlWithDataCenter)((0,b.getFullUrl)(null==l?void 0:l.image)),alt:""}),p.default.createElement("span",{className:S.default.sidenavlayout_header_title},null==l?void 0:l.name))}));j.displayName="SideNavHeader";var V=(0,p.memo)((function(e){var t=e.visible,a=e.setVisible,n=e.handleChangeForm,l=e.formMenu,u=e.svgData,r=(0,v.useParams)(),o=r.appId,i=r.targetFormId,c=(0,C.default)();return p.default.createElement(_.Popup,{className:S.default.sidenavlayout,placement:"left",visible:t,onClose:function(){return a(!1)},title:p.default.createElement(j,null),radius:!0},p.default.createElement(D,{appId:o,formId:i,onChange:function(e,t){e&&(n(e,t),a(!1),function(e,t){var a;c((0,f.default)(a="/m/".concat(o,"/home/")).call(a,e),t)}(e,{replace:!0}))},selectedId:i,menu:l,svgData:u}))}));V.displayName="SideNavLayout";t.default=V},36604:function(e,t,a){var n=a(13568),l=a(93252),u=a(25028),r=a(4884),o=a(9564);u(t,"__esModule",{value:!0}),t.default=void 0;var i=o(a(70696)),c=o(a(50524)),d=o(a(78912)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var a=b(t);if(a&&a.has(e))return a.get(e);var l={__proto__:null},o=u&&r;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var c=o?r(e,i):null;c&&(c.get||c.set)?u(l,i,c):l[i]=e[i]}return l.default=e,a&&a.set(e,l),l}(a(65984)),s=o(a(90940)),m=a(83180),p=a(95936),v=a(60644),_=a(41532),h=a(6940),y=a(25960),g=o(a(83672)),E=o(a(7648));function b(e){if("function"!=typeof l)return null;var t=new l,a=new l;return(b=function(e){return e?a:t})(e)}var C=(0,f.memo)((function(e){var t,a=e.pageId,n=(0,f.useReducer)(m.reducer,m.initState),l=(0,d.default)(n,2),u=l[0],r=void 0===u?{}:u,o=l[1],b=(0,f.useState)(!1),C=(0,d.default)(b,2),k=C[0],N=C[1],w=(0,f.useContext)(p.Context),I=null==w||null===(t=w.state)||void 0===t?void 0:t.userInfo,S=null==I?void 0:I.id,T=(0,f.useCallback)((function(e,t){var a,n=null==t||null===(a=t.rows)||void 0===a?void 0:a[0],l=null==n?void 0:n.cardInfo;if(n){var u=(0,i.default)(l).call(l,(function(e){return(0,c.default)(m.ShowTypes).call(m.ShowTypes,e.type)}));o({type:e,payload:{cardInfo:u,layout:null==n?void 0:n.layout}})}}),[]),M=(0,f.useCallback)((function(e){var t=e||(null==r?void 0:r.viewId);k&&N(!1);var a={};(0,_.getCardBySchmeId)({pageId:t}).then((function(e){(0,h.setStoreData)(y.HOME_CARD,{schemaId:t},e),N(!0),!(0,v.isEqual)(a,e)&&T(m.UPDATE_VALUE,e)})).catch((function(e){(0,m.showToast)(e.message)}))}),[k,r.viewId,T,S]);return(0,f.useEffect)((function(){M(a)}),[a]),f.default.createElement(g.default,{mainClassName:E.default.custom_wrapper},f.default.createElement("div",{className:E.default.custom},f.default.createElement(s.default,{init:k,state:r})))}));C.displayName="MobileAppCustomPage";t.default=C},24596:function(e,t,a){var n=a(13568),l=a(13939),u=a(34716),r=a(70696),o=a(4884),i=a(3464),c=a(51400),d=a(25028),f=a(93252),s=a(9564);d(t,"__esModule",{value:!0}),t.default=void 0;var m=s(a(29052)),p=s(a(760)),v=s(a(38456)),_=s(a(23992)),h=s(a(70696)),y=s(a(50524)),g=s(a(67584)),E=s(a(94924)),b=s(a(96631)),C=s(a(78912)),k=le(a(65984)),N=a(41936),w=s(a(58476)),I=le(a(5248)),S=s(a(7648)),T=a(71120),M=a(75308),x=a(65873),P=s(a(63536)),A=a(98464),L=s(a(28332)),O=a(12700),F=a(69400),D=le(a(21980)),j=s(a(40128)),V=le(a(41016)),R=s(a(4496)),B=a(95936),U=a(80672),z=s(a(732)),G=le(a(55867)),Y=s(a(71252)),K=a(57056),W=a(14012),q=a(99400),H=le(a(67112)),Q=s(a(39764)),J=s(a(59480)),X=a(78016),Z=s(a(83672)),$=a(20948),ee=a(16428),te=a(29084),ae=a(18656);function ne(e){if("function"!=typeof f)return null;var t=new f,a=new f;return(ne=function(e){return e?a:t})(e)}function le(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var a=ne(t);if(a&&a.has(e))return a.get(e);var l={__proto__:null},u=d&&o;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var i=u?o(e,r):null;i&&(i.get||i.set)?d(l,r,i):l[r]=e[r]}return l.default=e,a&&a.set(e,l),l}function ue(e,t){var a=l(e);if(u){var n=u(e);t&&(n=r(n).call(n,(function(t){return o(e,t).enumerable}))),a.push.apply(a,n)}return a}function re(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(a),!0).forEach((function(t){(0,b.default)(e,t,a[t])})):i?c(e,i(a)):ue(Object(a)).forEach((function(t){d(e,t,o(a,t))}))}return e}var oe=["nocodeattachmentuploadfield","nocodeimageuploadfield","nocodeentryentity","serial","nocoderichtextfield","nocodegraphicdisplayfield"],ie=(0,k.memo)((function(e){var t=e.menuData,a=(0,k.useContext)(B.Context).dispatch,n=(0,N.useParams)(),l=n.targetFormId,u=n.appId,r=(0,k.useState)(l||""),o=(0,C.default)(r,2),i=o[0],c=o[1],d=(0,k.useState)(!1),f=(0,C.default)(d,2),s=f[0],ne=f[1],le=(0,k.useState)(!1),ue=(0,C.default)(le,2),ie=ue[0],ce=ue[1],de=(0,k.useRef)(1),fe=(0,k.useRef)(1),se=(0,k.useRef)(null),me=(0,k.useRef)(null),pe=(0,z.default)(),ve=(0,k.useState)(!1),_e=(0,C.default)(ve,2),he=_e[0],ye=_e[1],ge=((0,k.useContext)(V.TableViewGridContext),(0,k.useState)(!1)),Ee=(0,C.default)(ge,2),be=Ee[0],Ce=Ee[1],ke=(0,k.useState)(!1),Ne=(0,C.default)(ke,2),we=Ne[0],Ie=Ne[1],Se=(0,k.useState)([]),Te=(0,C.default)(Se,2),Me=Te[0],xe=Te[1],Pe=(0,k.useState)(!1),Ae=(0,C.default)(Pe,2),Le=Ae[0],Oe=Ae[1],Fe=(0,k.useState)(!1),De=(0,C.default)(Fe,2),je=De[0],Ve=De[1],Re=(0,k.useContext)(K.AuthorizeContext)||{},Be=Re.authList,Ue=Re.pending,ze=Re.setPending,Ge=Re.formId,Ye=!Ue&&Ge===l,Ke=Be||{},We=Ke.viewAuth,qe=Ke.editAuth,He=Ke.deleteAuth,Qe=(Ke.importAuth,Ke.exportAuth,Ke.inputAuth),Je=(Ke.printAuth,Ke.statisticAuth),Xe=(Ke.detailShareReqireLoginAuth,Ke.detailShareNotReqireLoginAuth,Ke.editShareAuth,Ke.inputShareReqireLoginAuth,Ke.inputShareNotReqireLoginAuth,(0,D.default)({appId:u,formId:i,env:T.ENV_APP,viewAuth:We,pending:Ue,setPending:ze},{loadData:!1,loadMore:!0,updateFooter:!1,isMob:!0,needSerial:!0,horizontal:be,columnsDataTranform:q.columnsDataTranform},re(re({},G),H))),Ze=(0,C.default)(Xe,3),$e=Ze[0],et=Ze[1],tt=(Ze[2],$e.formName,$e.dataSource),at=$e.visibleColumnKeys,nt=$e.columns,lt=$e.showListSettingPop,ut=$e.showFilterSettingPop,rt=$e.listFilterConfig,ot=$e.listItemConfig,it=$e.configuredFilterItems,ct=$e.searchKeywords,dt=$e.totalCount,ft=$e.lastPage,st=$e.listFilters,mt=$e.enumFilterValue,pt=$e.selectStatus,vt=$e.selectedIds,_t=$e.selectedCount,ht=$e.notInSelectedIds,yt=et.onListSettingConfirm,gt=et.onFilterConfirm,Et=et.onSearch,bt=et.onSetShowFilterSettingPop,Ct=et.onSetShowListSettingPop,kt=et.onGetEnumFilterValue,Nt=et.onLoadInitData,wt=et.onUpdateDataSource,It=et.setFormDataListState,St=et.onSelectChange,Tt=et.onBatchDelete,Mt=et.getSelectedQueryString,xt=et.onPaginationChange,Pt=et.setSelectedInfo,At=et.handleDeleteSelectedId,Lt=((0,k.useMemo)((function(){return Mt()}),[Mt]),function(e){var t,a;(0,X.publishClickUserEvent)({appId:u,formId:l,action:(0,p.default)(t=(0,p.default)(a="".concat(u,"|")).call(a,l,"|")).call(t,e)})}),Ot=(0,k.useMemo)((function(){return(0,F.getShowColumns)(nt,at)}),[nt,at]),Ft=(0,k.useMemo)((function(){var e=[];return qe&&e.push({key:"edit",text:"编辑"}),Qe&&e.push({key:"copy",text:"复制"}),He&&e.push({key:"remove",text:"删除",danger:!0}),e}),[qe,Qe,He]),Dt=(0,k.useMemo)((function(){var e;return null===(e=(0,v.default)(Me).call(Me,(function(e){return e.active})))||void 0===e?void 0:e.id}),[Me]),jt=(0,k.useMemo)((function(){return null==Me?void 0:(0,_.default)(Me).call(Me,(function(e){return{value:e.id,label:e.name}}))}),[Me]);(0,k.useEffect)((function(){c(l),Ie(!1)}),[l]);var Vt=function(){var e=(0,E.default)(m.default.mark((function e(t,a,n){var l,r,o,i;return m.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null==t?void 0:(0,h.default)(t).call(t,(function(e){return!(0,y.default)(F.VIEW_MOB_HIDDEN).call(F.VIEW_MOB_HIDDEN,e.hidden)})),xe(r),o=(0,v.default)(r).call(r,(function(e){return e.active})),!(i=(null==o?void 0:o.id)||(null==r||null===(l=r[0])||void 0===l?void 0:l.id))){e.next=9;break}return e.next=7,Nt(u,a,T.ENV_APP,n,i);case 7:de.current=1,fe.current=2;case 9:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}();(0,k.useEffect)((function(){var e=function(){var e=(0,E.default)(m.default.mark((function e(){var t;return m.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!Ye){e.next=6;break}return e.next=4,(0,A.getViewData)(i);case 4:t=e.sent,Vt(t.rows||[],i,We);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),It({dataSource:[],footerDataSource:[],pageNo:1,pageSize:20,totalCount:0,lastPage:!0,formName:"",loading:!1,listItemConfig:[],listFilterConfig:[],listStatInfo:[],configuredFilterItems:[],listFilters:[]});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[i,We,Ye]),(0,k.useEffect)((function(){a({type:U.UPDATE_MOBILE_APPHOMEDATA,payload:{pageNo:de.current,pageSize:20,data:tt,lastPage:ft,listItemConfig:ot,listFilters:st,searchKeywords:ct}})}),[tt,de.current,ft,ot,rt,st,ct]);var Rt=(0,k.useMemo)((function(){return(0,F.getShowColumns)(nt,at)}),[nt,at]),Bt=(0,k.useMemo)((function(){return(0,_.default)(tt).call(tt,(function(e,t){return{fields:(0,_.default)(Rt).call(Rt,(function(a,n){return{type:a.type,name:a.name,value:"serial"===a.type?"".concat(t+1):e[a.number],id:a.number}})),id:e.id}}))}),[Rt,tt]),Ut=(0,k.useCallback)((function(e){var t=(0,v.default)(tt).call(tt,(function(t){return t.id===e}));return(0,F.findFormUserName)(ot,t)}),[tt,ot]),zt=(0,k.useMemo)((function(){return function e(t,a,n){return null==t||t.forEach((function(t){t.formId===a?n=t:null!=t&&t.children&&(n=e(null==t?void 0:t.children,a,n))})),n}(t,i)}),[t,i]),Gt=function(e){var t=function(e){return null==e?void 0:(0,v.default)(e).call(e,(function(e){return(null==e?void 0:e.type)&&!(0,y.default)(oe).call(oe,e.type)}))}(e),a=null==e?void 0:(0,h.default)(e).call(e,(function(e){return e.id!==(null==t?void 0:t.id)}));return[t,a]},Yt=(0,k.useCallback)((function(e,t,a){return("nocodeselectitemfield"===a?function(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"zh_CN";return Array.isArray(e)?null===(t=(0,_.default)(e).call(e,(function(e){return e.name[a]})))||void 0===t?void 0:t.join(","):e}(e):e)||"-"}),[zt]),Kt=(0,k.useCallback)((function(e){return null==e?void 0:(0,h.default)(e).call(e,(function(e){return null==e?void 0:e.type}))}),[]),Wt=(0,k.useMemo)((function(){var e,t={};return null==Bt||Bt.forEach((function(e){t[e.id]=e})),(0,h.default)(e=(0,_.default)(vt).call(vt,(function(e){var a=t[e];if(a){var n=Ut(a.id),l=Kt(a.fields),u=Gt(l),r=(0,C.default)(u,2),o=r[0];return{values:r[1],title:Yt(null==o?void 0:o.value,n,null==o?void 0:o.type),id:a.id}}}))).call(e,Boolean)}),[Bt,vt,Ut,Yt,Kt]),qt=(0,k.useMemo)((function(){return(0,F.filterOperateCol)(nt)}),[nt]),Ht=(0,k.useCallback)((function(e){e&&kt(e,it)}),[kt,it]),Qt=(0,k.useCallback)((function(e){var t,a;We?pe((0,p.default)(t=(0,p.default)(a="/m/".concat(u,"/detail/")).call(a,i,"/")).call(t,e,"/view")):x.WebMsg.showToast({type:2,content:"没有查看权限"})}),[i,u,pe,We]),Jt=(0,k.useCallback)((function(e){return!!(0,v.default)(vt).call(vt,(function(t){return t===e}))?(0,h.default)(vt).call(vt,(function(t){return t!==e})):(0,p.default)(vt).call(vt,e)}),[vt]),Xt=(0,k.useCallback)((function(e){return pt===$.CHECK_CANCEL?(0,v.default)(ht).call(ht,(function(t){return t===e}))?D.SELECT_ACTIONS.check:D.SELECT_ACTIONS.uncheck:(0,v.default)(vt).call(vt,(function(t){return t===e}))?D.SELECT_ACTIONS.uncheck:D.SELECT_ACTIONS.check}),[pt,ht,vt]),Zt=(0,k.useCallback)((function(e){St({key:e,action:Xt(e)});var t=Jt(e);Ie(t.length===dt)}),[Jt,Xt,St,dt]),$t=(0,k.useCallback)((function(e){if(Array.isArray(e))e.length?St({action:D.SELECT_ACTIONS.check_all}):St({action:D.SELECT_ACTIONS.uncheck_all});else{var t=(null==e?void 0:e.id)||"";t&&St({key:t,action:Xt(t)})}}),[Xt,St]),ea=(0,k.useCallback)((function(e){!ie&&Qt(e)}),[ie,Qt]),ta=[{actionKey:"click",action:ie?Zt:Qt}];(0,P.default)(se,ta,"click",!1);var aa=(0,k.useCallback)((function(){Dt&&1!==fe.current&&(Dt&&xt(fe.current),de.current=fe.current,fe.current+=1)}),[xt,Dt,fe.current]),na=(0,k.useCallback)((function(e,t){c(e)}),[]),la=(0,k.useCallback)((function(e,t){var a,n,l,r;switch(null==e?void 0:e.key){case"copy":pe((0,p.default)(a=(0,p.default)(n="/m/".concat(u,"/detail/")).call(n,i,"/")).call(a,me.current,"/copy"));break;case"edit":Lt("m_au_fo_edit"),pe((0,p.default)(l=(0,p.default)(r="/m/".concat(u,"/detail/")).call(r,i,"/")).call(l,me.current,"/edit"));break;case"remove":x.WebMsg.showModalConfirm({type:3,title:"确定删除该记录吗？",onAction:function(e,t){if("ok"===e.key){Lt("m_au_fo_del_comf");var a=me.current;(0,A.deleteFormDataListItem)(u,i,a).then((function(e){x.WebMsg.showToast({type:0,content:"删除成功"}),(0,g.default)((function(){var e=null==tt?void 0:(0,h.default)(tt).call(tt,(function(e){return e.id!==a}));At(e,a,!0),wt(e)}),300)})).catch((function(e){x.WebMsg.showToast({type:2,content:e.message})}))}Lt("m_au_fo_del")},actions:[{key:"cancel",text:"取消"},{key:"ok",text:"确定",primary:!0}]})}ne(!1)}),[i,tt,u,me.current,wt,At]),ua=(0,k.useCallback)((function(e){me.current=e,ne(!0)}),[me.current]),ra=(0,k.useCallback)((function(){var e;Lt("m_au_lo_fill"),pe((0,p.default)(e="/m/".concat(u,"/detail/")).call(e,i))}),[u,i]),oa=(0,k.useCallback)((function(){Lt("m_au_lo_cho"),tt.length<=0?x.WebMsg.showToast({type:3,content:"暂无数据"}):ce(!0)}),[tt]),ia=(0,k.useMemo)((function(){return vt.length>0}),[vt]),ca=(0,k.useCallback)((function(e){var t=e.target.checked;St({action:t?D.SELECT_ACTIONS.check_all:D.SELECT_ACTIONS.uncheck_all}),Ie(t)}),[St]),da=(0,k.useCallback)((function(e){var t=e.data,a=e.message,n=t||{},l=n.successCount,u=n.failCount;x.WebMsg.showModalConfirm({type:2,title:(0,te.getErrTips)(l,u,"删除"),content:a,onAction:function(){},actions:[{key:"ok",text:"我知道了",primary:!0}]}),fe.current=2}),[]),fa=(0,k.useCallback)((function(){Lt("m_au_lo_be_del_comf"),Tt().then((function(e){var t=e.successCount;x.WebMsg.showToast({type:0,content:(0,te.getErrTips)(t,0,"删除")})})).catch((function(e){da(e)}))}),[Tt,da]),sa=(0,k.useCallback)((function(e){if(_t<=0)x.WebMsg.showToast({type:3,content:"请选择要操作的数据"});else{x.WebMsg.showModalConfirm({type:3,title:"确定删除选中的".concat(_t,"条记录吗？"),actions:[{key:"cancle",text:"取消"},{key:"delete",text:"确定",primary:!0}],onAction:function(e){if("delete"===e.key)fa()}})}}),[fa,_t]),ma=(0,k.useCallback)((function(){(0,ee.unstable_batchedUpdates)((function(){ce(!1),Ie(!1)})),Pt([],$.CHECK,[],0)}),[Pt]),pa=(0,k.useCallback)((function(e){var t;return null===(t=(0,v.default)(Bt).call(Bt,(function(t){return t.id===e})))||void 0===t?void 0:t.fields}),[Bt]),va=(0,k.useMemo)((function(){var e=Ut(me.current),t=Kt(pa(me.current)),a=Gt(t),n=(0,C.default)(a,1)[0];return Yt(null==n?void 0:n.value,e,null==n?void 0:n.type)}),[me.current,Ut,pa,Yt,Kt]),_a=(0,k.useCallback)((function(e){(0,X.publishSearchUserEvent)({appId:u,formId:l,action:"m_au_lo_srh"}),null==Et||Et(e)}),[Et,u,l]),ha=(0,k.useCallback)((function(){return(0,A.getViewData)(i).then((function(e){Vt(e.rows||[],i,We)}))}),[i,We]),ya=(0,k.useCallback)((0,E.default)(m.default.mark((function e(){return m.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return de.current=1,fe.current=2,e.next=4,null==ha?void 0:ha();case 4:case"end":return e.stop()}}),e)}))),[ha]),ga=(0,k.useCallback)((function(e){St({key:e,action:D.SELECT_ACTIONS.uncheck})}),[vt]),Ea=(0,k.useCallback)((function(e,t){Lt("m_au_lo_cs_comf"),null==yt||yt(e,void 0,t)}),[ot,u,i,yt,It]),ba=(0,k.useCallback)((function(){bt(!0)}),[]),Ca=(0,k.useCallback)((function(e){Lt("m_au_lo_fil_comf"),null==gt||gt(e)}),[gt]),ka=(0,k.useCallback)((function(){Ce(!be)}),[be]),Na=function(e){Lt("m_au_lo_cview_open"),Oe(!1);var t=(0,J.default)(Me,(function(t){t.forEach((function(t){t.active=t.id===e}))}));Vt(t||[],i,We)},wa=(0,k.useCallback)((function(){Lt("m_au_lo_analy"),Ve(!0)}),[]);return k.default.createElement(k.default.Fragment,null,!be&&k.default.createElement(k.default.Fragment,null,(null==Me?void 0:Me.length)>1&&k.default.createElement(ae.Tabs,{activeKey:Dt,onChange:Na},null==Me?void 0:(0,_.default)(Me).call(Me,(function(e){return k.default.createElement(ae.Tabs.Tab,{title:e.name,key:e.id})}))),k.default.createElement(w.default,{searchKeywords:ct,handleSearch:_a,handleChangeForm:na,handleShowListItemSetting:function(){Ct(!0)},handleShowFilterSetting:ba,showSideNav:!ie,showSearch:!0,showViewSelect:!1,showGridView:!ie,showSort:!ie,showFilter:!ie,showColumnsSetting:!ie,tableView:he,filterActive:it.length>0,handleToggleTableView:function(){var e=!he;Lt(e?"m_au_lo_lv":"m_au_lo_cv"),ye(e),fe.current=2}})),k.default.createElement("div",{className:(0,Y.default)(S.default.apphomepage_container,(0,b.default)({},S.default.table_view_container,he)),ref:se},k.default.createElement(Z.default,{mainClassName:S.default.apphomepage_container_main},k.default.createElement(x.PullToRefresh,{onRefresh:ya,horizontal:be},ft&&0===tt.length?k.default.createElement(x.EmptyData,{src:R.default,desc:"暂无数据",imageWidth:224,imageHeight:128,textGap:16}):he?k.default.createElement(V.default,{dataSource:tt,columns:Ot,rowClick:function(e,t){return ea(e.id)},horizontal:be,onToggleHorizontal:ka,rowSelection:ie?{value:vt,onChange:$t}:null,hasMore:!ft,onLoadMore:aa,getTransformOriginRef:function(){return se.current}}):k.default.createElement(x.InfiniteLoading,{hasMore:!ft,onLoadMore:aa},(0,_.default)(Bt).call(Bt,(function(e){var t=!!(0,v.default)(vt).call(vt,(function(t){return t===e.id})),a=Kt(e.fields),n=Ut(e.id),l=Gt(a),u=(0,C.default)(l,2),r=u[0],o=u[1];return k.default.createElement("div",{key:e.id,"data-key":e.id,"data-action-key":"click","data-nc-action":"m_au_fo_detail"},k.default.createElement(M.Card,{fields:o,id:e.id,title:Yt(null==r?void 0:r.value,n,null==r?void 0:r.type),onClickOperate:ua,stopClickOperateEventPropagation:!0,showSelect:ie,selected:t,key:e.id}))})))))),(null==t?void 0:t.length)<=0||be?null:ie?k.default.createElement(I.BatchWorkFooterLayout,{onOk:ma,actions:He?[{value:"delete",label:"删除"}]:[],indeterminate:ia,checked:we,onSelect:ca,onBatchWork:sa,count:_t,dataList:Wt,onDelete:ga,hasMore:!ft,onLoadMore:aa}):k.default.createElement(I.default,{onClickNew:ra,onClickStatistic:wa,onClickSelect:oa,showStatistic:Je,showNew:Qe,showSelect:He}),Ft.length>0&&k.default.createElement(x.ActionSheet,{actions:Ft,visible:s,onAction:la,tip:va,onClose:function(){return ne(!1)}}),lt&&k.default.createElement(L.default,{visible:lt,title:"列设置",onConfirm:Ea,data:(0,O.getListItemSettingData)(qt),checkedKeys:at,onVisibleChange:function(e){Ct(e)}}),k.default.createElement(j.default,{title:"筛选",visible:ut,setVisible:bt,listFilterConfig:rt||[],configFilterItems:it||[],handleSubmit:Ca,enumValueList:mt,addFilterValueList:Ht}),k.default.createElement(W.SelectPopup,{visible:Le,setVisible:Oe,title:"请选择视图",fixHeight:!0,value:Dt,data:jt,handleSelect:Na,renderSearch:!0}),k.default.createElement(Q.default,{visible:je,setVisible:Ve,title:"统计"}))}));ie.displayName="MobileAppFormPage";t.default=ie},86812:function(e,t,a){var n=a(13568),l=a(93252),u=a(25028),r=a(4884),o=a(9564);u(t,"__esModule",{value:!0}),t.default=void 0;var i=o(a(760)),c=o(a(28429)),d=o(a(72400)),f=o(a(78912)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var a=I(t);if(a&&a.has(e))return a.get(e);var l={__proto__:null},o=u&&r;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var c=o?r(e,i):null;c&&(c.get||c.set)?u(l,i,c):l[i]=e[i]}return l.default=e,a&&a.set(e,l),l}(a(65984)),m=a(41936),p=a(57056),v=o(a(92432)),_=o(a(24596)),h=o(a(36604)),y=a(89208),g=a(91840),E=a(57264),b=o(a(732)),C=a(25096),k=a(98464),N=a(18656),w=o(a(7648));function I(e){if("function"!=typeof l)return null;var t=new l,a=new l;return(I=function(e){return e?a:t})(e)}var S=(0,s.memo)((function(){var e=(0,m.useParams)(),t=e.targetFormId,a=e.appId,n=(0,b.default)(),l=(0,s.useRef)(a),u=(0,s.useState)({formId:t||""}),r=(0,f.default)(u,2),o=r[0],I=r[1],S=(0,s.useState)(null),T=(0,f.default)(S,2),M=T[0],x=T[1],P=(0,s.useState)({}),A=(0,f.default)(P,2),L=A[0],O=A[1],F=(0,s.useContext)(p.AuthorizeContext)||{},D=F.authList,j=F.pending,V=F.formId,R=!j&&V===t,B=function(e){if(t){var l=(0,y.getNodeByFormId)(e,t);if(l)return void I(l)}var u,r,o,c=(0,y.getTreeFirstFormNode)(e),d=c.formId;d&&(I(c),u=d,r={replace:!0},n((0,i.default)(o="/m/".concat(a,"/home/")).call(o,u),r))};(0,s.useEffect)((function(){l.current===a&&M&&B(M)}),[t,M]),(0,s.useEffect)((function(){l.current=a,c.default.all([(0,C.getLineIconAndColor)(),(0,k.getFormList)(a)]).then((function(e){var t=(0,f.default)(e,2),a=t[0],n=t[1];O(a.row);var l=n.rows;l&&0!==l.length?(B(l),x(l)):x([])})).catch((function(e){}))}),[a]);var U=(0,s.useCallback)((function(e,t){I(t)}),[]);return t&&R&&(0,d.default)(D).every((function(e){return!1===e}))?s.default.createElement(m.Navigate,{to:"/noPermission",replace:!0}):((0,E.setDocumentTitle)(null==o?void 0:o.name,!1),s.default.createElement("div",{className:w.default.apphomepage},M&&t?s.default.createElement(s.default.Fragment,null,o.formId===t&&(0===(null==M?void 0:M.length)?s.default.createElement(g.NoData,null):(null==o?void 0:o.type)&&((0,E.isCustomPage)(null==o?void 0:o.type)?s.default.createElement(h.default,{pageId:null==o?void 0:o.formId}):s.default.createElement(_.default,{menuData:M||[],formId:null==o?void 0:o.formId}))),s.default.createElement(v.default,{formMenu:M,svgData:L,handleChangeForm:U,className:w.default.menu_icon})):s.default.createElement(N.Spin,{className:w.default.apphomepage_loading})))}));S.displayName="MobileAppHomePage";t.default=S},29084:function(e,t,a){var n=a(25028),l=a(9564);n(t,"__esModule",{value:!0}),t.showBatchErrNotice=t.getErrTips=t.TextUpdateOptions=t.SensitiveTypes=t.NoBatchEditTypes=t.NoBatchEditStatus=t.MultiUpdateOptions=t.DefaultUpdateWay=void 0;var u=l(a(760)),r=a(57264),o=(t.NoBatchEditTypes=["nocodecreatorfield","nocodecreatedatefield","nocodemodifierfield","nocodemodifydatefield","nocodebillnofield","nocodeattachmentuploadfield","nocodeimageuploadfield","nocodegraphicdisplayfield","nocoderichtextfield","nocodeentryentity"],t.NoBatchEditStatus=["2","3","4"],t.SensitiveTypes=["text","textarea"],t.DefaultUpdateWay="update"),i=(t.MultiUpdateOptions=[{label:"追加",value:"add"},{label:"覆盖",value:o}],t.TextUpdateOptions=[{label:"覆盖",value:o},{label:"关键词替换",value:"replace"}],t.getErrTips=function(){var e,t,a,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"操作",o=n?(0,u.default)(e="".concat(n,"条记录")).call(e,r,"成功"):"",i=l?(0,u.default)(t="".concat(l,"条记录")).call(t,r,"失败"):"";return(0,u.default)(a="".concat(o)).call(a,i?"，".concat(i):"","。")});t.showBatchErrNotice=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"操作",a=e.data,n=void 0===a?{}:a,l=e.message;if(n){var o,c=n.successCount,d=n.failCount;(0,r.showNotice)("error",(0,u.default)(o="".concat(i(c,d,t))).call(o,l?"\n".concat(l):""))}else(0,r.showNotice)("error",l)}},4804:function(e,t,a){var n=a(13939),l=a(34716),u=a(70696),r=a(4884),o=a(3464),i=a(51400),c=a(25028),d=a(9564);c(t,"__esModule",{value:!0}),t.removeAllItem=t.getValueArray=t.getInputType=t.getFormatType=t.getFilterItemValue=t.getEnumList=t.getDefaultFilterList=t.formatValue=t.convertItems=t.convertCompareTypes=t.VALUE_EMPTY_COMPARE_TYPE=t.SelectTypes=t.MULTI_COMPARE_TYPE=t.INPUT_TYPE=t.COMPARE_TYPE=void 0;var f=d(a(96631)),s=d(a(35256)),m=d(a(13568)),p=d(a(70696)),v=d(a(38456)),_=d(a(23992)),h=d(a(1900)),y=d(a(50524)),g=a(57264),E=a(12700),b=["items"];function C(e,t){var a=n(e);if(l){var o=l(e);t&&(o=u(o).call(o,(function(t){return r(e,t).enumerable}))),a.push.apply(a,o)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){(0,f.default)(e,t,a[t])})):o?i(e,o(a)):C(Object(a)).forEach((function(t){c(e,t,r(a,t))}))}return e}var N=t.INPUT_TYPE=function(e){return e.notInput="notInput",e.text="text",e.number="number",e.dateTime="datetime",e.none="none",e.dateRange="dateRange",e.select="select",e.multiSelect="multiSelect",e.enumEq="enum_eq",e.refbill="refbill",e.textarea="textarea",e}({}),w=(t.COMPARE_TYPE=function(e){return e.enumEq="001",e}({}),t.SelectTypes=[N.select,N.multiSelect]),I=t.removeAllItem=function(e){return(0,p.default)(e).call(e,(function(e){return"all"!==e.type}))},S=(t.getInputType=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=((0,v.default)(e).call(e,(function(e){return e.value===t}))||{}).inputCtlType;return n===N.select&&a?N.multiSelect:n},t.getEnumList=function(e){var t;return(0,_.default)(t=I(e)).call(t,(function(e,t){return{value:t,label:e.label,fieldValue:e.fieldValue}}))},t.getValueArray=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Array.isArray(e)?(0,_.default)(e).call(e,(function(e){var a=(0,h.default)(t).call(t,(function(t){return t.fieldValue===e.fieldValue}));return a>-1?a:e.label})):[]}),T=(t.getFilterItemValue=function(e,t,a){return t===N.enumEq?"object"===(0,m.default)(null==e?void 0:e[0])?S(e,a):e:(0,y.default)(w).call(w,t)||t===N.refbill?Array.isArray(e)?null==e?void 0:(0,_.default)(e).call(e,(function(e){return(null==e?void 0:e.fieldValue)||e||""})):e:t===N.dateRange?null==e?void 0:(0,_.default)(e).call(e,(function(e){return e.fieldValue||""})):(null==e||null===(n=e[0])||void 0===n?void 0:n.fieldValue)||"";var n},["second","date","month","year"]),M=["yyyy-MM-dd hh:mm:ss","yyyy-MM-dd","yyyy-MM","yyyy"],x=[N.dateRange,N.dateTime],P=(t.getFormatType=function(e){return T[Number(e)]},t.formatValue=function(e,t,a){if((0,y.default)(x).call(x,a)){var n=M[Number(t)];if(e instanceof Date)return(0,g.dateFormat)(n,e);if(Array.isArray(e))return(0,_.default)(e).call(e,(function(e){return(0,g.dateFormat)(n,e)}))}return e},t.convertCompareTypes=function(e){return(0,_.default)(e).call(e,(function(e){var t;return{label:null===(t=e.name)||void 0===t?void 0:t.zh_CN,value:e.id,inputCtlType:e.inputCtlType}}))}),A=t.convertItems=function(e){return e&&(0,_.default)(e).call(e,(function(e){var t;return{value:e.value,label:null==e||null===(t=e.name)||void 0===t?void 0:t.zh_CN}}))};t.getDefaultFilterList=function(e,t){var a=(0,E.filterDataTransform)(e,t);return a.length?(0,_.default)(a).call(a,(function(e,t){var a=e.items,n=(0,s.default)(e,b);return k(k({},n),{},{compareTypes:P(e.compareTypes),valueList:A(a)||[],id:t,key:n.number+(0,g.getRandomValues)()})})):[]},t.VALUE_EMPTY_COMPARE_TYPE=["501","502","701","702"],t.MULTI_COMPARE_TYPE=["1502","1501"]},99400:function(e,t,a){var n=a(13939),l=a(34716),u=a(70696),r=a(4884),o=a(3464),i=a(51400),c=a(25028),d=a(9564);c(t,"__esModule",{value:!0}),t.renderMobCell=t.getDefalutColW=t.columnsDataTranform=t.addSerialColumn=t.addOperateColumn=void 0;var f=d(a(96631)),s=d(a(23992)),m=d(a(61260)),p=d(a(65984)),v=a(65873),_=a(89068);function h(e,t){var a=n(e);if(l){var o=l(e);t&&(o=u(o).call(o,(function(t){return r(e,t).enumerable}))),a.push.apply(a,o)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){(0,f.default)(e,t,a[t])})):o?i(e,o(a)):h(Object(a)).forEach((function(t){c(e,t,r(a,t))}))}return e}var g=t.renderMobCell=function(e,t,a,n,l,u){var r={type:e,value:t,readOnly:!0,id:null==a?void 0:a.id,title:u,fieldName:l};return p.default.createElement(v.TableViewCellRender,r)},E=t.getDefalutColW=function(){return 112},b=(t.columnsDataTranform=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.primaryKey,n=void 0===a?"number":a,l=(t.isMob,t.needSerial),u=t.horizontal,r=t.operateCol,o=void 0===r?{}:r,i=o.needOperateCol,c=(0,s.default)(e).call(e,(function(e){var t=e.type,a=e.number,l=e.name,r=(e.locked,e.width),o="nocodedecimalfield"===(null==e?void 0:e.type)?"right":"left",i=v.TableViewTitle;return y(y({},e),{},{code:e[n],width:u?200:null!=r?r:E(),lock:!1,align:o,title:p.default.createElement(i,{title:l,key:e[n],type:t,number:a,align:o}),render:function(e,n,u){return g(t,e,n,u,a,l)}})}));return l&&(c=b(c)),i&&(c=C(c,o)),c},t.addSerialColumn=function(e){var t,a=v.TableViewTitle;e.length>0&&(null!==(t=e[e.length-1])&&void 0!==t&&t.serial?e.shift(e.length-1,1,{code:"serial",name:"序号",width:44,align:"center",lock:!0,title:p.default.createElement(a,{title:"序号",type:"serial"}),serial:!0,type:"serial",render:function(e,t,a){if(!t.isAgg)return p.default.createElement(_.CellRender,{value:"".concat(a+1),readOnly:!0,type:"serial"})}}):e.unshift({code:"serial",name:"序号",width:44,align:"center",lock:!0,title:p.default.createElement(a,{title:"序号",type:"serial"}),serial:!0,type:"serial",render:function(e,t,a){if(!t.isAgg)return p.default.createElement(_.CellRender,{value:"".concat(a+1),readOnly:!0,type:"serial"})}}));return e}),C=t.addOperateColumn=function(e,t){var a,n=t.disabled,l=t.width,u=v.TableViewTitle;e.length>0&&(null!==(a=e[e.length-1])&&void 0!==a&&a.operate?(0,m.default)(e).call(e,e.length-1,1,{code:"operate",name:"操作",width:200,align:"left",lock:!0,title:p.default.createElement(u,{title:"操作",type:"operate"}),operate:!0,type:"operate",render:function(e,t,a){if(!t.isAgg)return p.default.createElement(_.CellRender,{record:t,readOnly:!0,disabled:n,type:"operation"})}}):e.push({code:"operate",name:"操作",width:l||200,align:"left",lock:!0,title:p.default.createElement(u,{title:"操作",type:"operate"}),operate:!0,type:"operate",render:function(e,t,a){if(!t.isAgg)return p.default.createElement(_.CellRender,{record:t,readOnly:!0,disabled:n,type:"operation"})}}));return e}},89208:function(e,t,a){var n=a(13568),l=a(13939),u=a(34716),r=a(70696),o=a(4884),i=a(3464),c=a(51400),d=a(25028),f=a(93252),s=a(9564);d(t,"__esModule",{value:!0}),t.loopEditName=t.loopAddMenu=t.getTreeFirstFormNode=t.getNodeKeyByFormId=t.getNodeById=t.getNodeByFormId=t.getMenuTreeData=t.getGroupNodes=t.getFormNodes=void 0,t.transformTreeData=function e(t,a,n,l){var u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5?arguments[5]:void 0,o=u+1,i=!0;o>=l&&(i=!1);return t.forEach((function(t){var u=t.key,c=t.id,d=t.children,f=t.formId,s=t.name,m=t.parentId,p=t.seq,v=t.image,_=t.type;t.key=u||c||"",t.title=a?a({name:s,key:t.key,formId:f,parentId:m,seq:p,image:v,canAddChildGroup:i,type:_}):s,t.children=d&&d.length>0&&e(d,a,n,l,o,r),t.selectable=r?r():!!f,n&&(t.icon=n(k(k({},t),{},{hasChild:d&&d.length>0})))})),t};var m=s(a(61260)),p=s(a(28429)),v=s(a(96631)),_=(function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var a=b(t);if(a&&a.has(e))return a.get(e);var l={__proto__:null},u=d&&o;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var i=u?o(e,r):null;i&&(i.get||i.set)?d(l,r,i):l[r]=e[r]}l.default=e,a&&a.set(e,l)}(a(65984)),a(63548),a(66200),a(6940)),h=a(25960),y=a(63516),g=a(98464),E=a(25096);function b(e){if("function"!=typeof f)return null;var t=new f,a=new f;return(b=function(e){return e?a:t})(e)}function C(e,t){var a=l(e);if(u){var n=u(e);t&&(n=r(n).call(n,(function(t){return o(e,t).enumerable}))),a.push.apply(a,n)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){(0,v.default)(e,t,a[t])})):i?c(e,i(a)):C(Object(a)).forEach((function(t){d(e,t,o(a,t))}))}return e}t.getTreeFirstFormNode=function e(t){for(var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=0;n<t.length;){var l=t[n];if(l.formId)return a=a||{formId:l.formId,key:l.key,name:l.name,type:l.type};l.children&&!a&&(a=e(l.children)),n++}return a};t.getNodeKeyByFormId=function(e,t){var a;return null===(a=N(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:""))||void 0===a?void 0:a.key};var N=t.getNodeByFormId=function e(t,a){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",l=0;l<t.length;){var u=t[l];if(u.formId===a)return n=n||u;u.children&&!n&&(n=e(u.children,a,n)),l++}return n};t.getNodeById=function e(t,a){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",l=0;l<t.length;){var u=t[l];if(u.id===a)return n=n||u;u.children&&!n&&(n=e(u.children,a,n)),l++}return n},t.getGroupNodes=function e(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return t.forEach((function(t){if(!t.formId&&l<a&&n.push(t),t.children){var u=l+1;e(t.children,a,n,u)}})),n},t.getFormNodes=function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.forEach((function(t){!t.children&&t.formId&&a.push(t),t.children&&e(t.children,a)})),a},t.loopAddMenu=function e(t,a,n,l){for(var u=!1,r=!1,o=0;o<(null==t?void 0:t.length);o++){if(t[o].formId===l){(0,m.default)(t).call(t,o+1,0,n),u=!0;break}if(!l&&t[o].key===a){t[o].children=t[o].children||[],t[o].children.push(n),u=!0;break}if(t[o].children){var i=e(t[o].children,a,n,l);i&&(r=i)}}return u||r},t.loopEditName=function e(t,a,n){for(var l=0;l<(null==t?void 0:t.length);l++){if(t[l].id===a){t[l].name=n;break}e(t[l].children,a)}},t.getMenuTreeData=function(e,t){var a=(0,g.getReqUrl)(e),n=p.default.all([(0,_.getStoreData)(h.GET_LINEICON_COLOR,""),(0,_.getStoreData)(a,"")]),l=p.default.all([(0,E.getLineIconAndColor)(),(0,g.getFormList)(e)]).then((function(e){return(0,_.setStoreData)(h.GET_LINEICON_COLOR,"",k({},e[0])),(0,_.setStoreData)(a,"",k({},e[1])),e}));return(0,y.getWithPriority)(n,l,t)}},66200:function(e,t,a){var n=a(13568),l=a(13939),u=a(34716),r=a(70696),o=a(4884),i=a(3464),c=a(51400),d=a(25028),f=a(93252),s=a(9564);d(t,"__esModule",{value:!0}),t.TreeNodeTitle=void 0;var m=s(a(760)),p=s(a(70696)),v=s(a(23992)),_=s(a(50524)),h=s(a(25288)),y=s(a(96631)),g=s(a(26048)),E=s(a(78912)),b=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var a=I(t);if(a&&a.has(e))return a.get(e);var l={__proto__:null},u=d&&o;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var i=u?o(e,r):null;i&&(i.get||i.set)?d(l,r,i):l[r]=e[r]}return l.default=e,a&&a.set(e,l),l}(a(65984)),C=a(63548),k=a(82416),N=s(a(44164)),w=a(57264);function I(e){if("function"!=typeof f)return null;var t=new f,a=new f;return(I=function(e){return e?a:t})(e)}function S(e,t){var a=l(e);if(u){var n=u(e);t&&(n=r(n).call(n,(function(t){return o(e,t).enumerable}))),a.push.apply(a,n)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){(0,y.default)(e,t,a[t])})):i?c(e,i(a)):S(Object(a)).forEach((function(t){d(e,t,o(a,t))}))}return e}t.TreeNodeTitle=function(e){var t=e.isGroupNode,a=e.title,n=e.formId,l=e.appId,u=e.nodeKey,r=e.parentId,o=e.seq,i=e.image,c=e.hideDrag,d=e.onDelete,f=e.onEditName,s=e.onAddChildGroup,y=e.onCopy,I=e.canAddChildGroup,S=e.onSave,M=e.handleEditing,x=e.type,P=(0,b.useState)(!1),A=(0,E.default)(P,2),L=A[0],O=A[1],F=(0,b.useState)(!1),D=(0,E.default)(F,2),j=D[0],V=D[1],R=(0,b.useState)(a),B=(0,E.default)(R,2),U=B[0],z=B[1],G=(0,b.useState)(a),Y=(0,E.default)(G,2),K=Y[0],W=Y[1],q=(0,b.useRef)(),H=(0,b.useRef)(),Q=(0,b.useCallback)((function(e){var t,a;return(0,m.default)(t=(0,m.default)(a="".concat(l||"","|")).call(a,n||"","|")).call(t,e)}),[l,n]);(0,b.useEffect)((function(){var e;j&&(null===(e=H.current)||void 0===e||e.focus()),null==M||M(j)}),[j]),(0,b.useEffect)((function(){z(a),W(a)}),[a]),(0,b.useEffect)((function(){z(a)}),[a]);var J,X,Z=[{name:"修改名称",key:"editName",hidden:!f},{name:"复制",key:"copy",hidden:!y,useActionName:{"data-nc-action":Q("sa_fm_copy")}},{name:"删除",key:"delete",hidden:!d}],$=[{name:"修改名称",key:"editName"},{name:"新建子分组",key:"addChildGroup",useActionName:{"data-nc-action":Q("sa_fm_csg")}},{name:"删除",key:"delete"}],ee=[{name:"修改名称",key:"editName"},{name:"删除",key:"delete"}],te={id:u,formId:n,name:U,parentId:r,seq:o,image:i,type:x},ae=function(e){for(;e;){if((0,_.default)(Array.prototype).apply(e.classList,["kd-tree-node-item"]))return e;e=e.parentElement}},ne=function(e,t){var a,l=(null==e||null===(a=e.target)||void 0===a?void 0:a.value)||t;if(l&&l!==K){var r=(0,w.showLoadingMessage)("正在修改名称，请稍候...");null==S||S(T(T({},te),{},{name:l})).then((function(e){V(!1),W(l),f&&f(n,u,l),r({type:"success",content:"修改名称成功"})})).catch((function(e){r({type:"error",content:null==e?void 0:e.message})}))}else V(!1)};return b.default.createElement("span",{className:N.default.title,ref:q,"data-tree-node-key":u},j?b.default.createElement(k.Text,{ref:H,value:U,onChange:function(e){z((0,h.default)(e).call(e))},onBlur:ne,onPressEnter:function(e,t){ne(t,e)},maxLength:50,size:"small",allowClear:!0}):b.default.createElement(b.default.Fragment,null,b.default.createElement("span",{className:N.default["title-name"],title:a},a),b.default.createElement("span",{className:N.default["title-icon"],"data-menu-btn":"true"},b.default.createElement("span",{className:N.default["title-more"],onClick:function(e){e.stopPropagation()}},b.default.createElement(C.Dropdown,{menu:(X=t?I?$:ee:Z,b.default.createElement(C.Dropdown.Menu,null,null===(J=(0,p.default)(X).call(X,(function(e){return!e.hidden})))||void 0===J?void 0:(0,v.default)(J).call(J,(function(e){return b.default.createElement(C.Dropdown.Item,(0,g.default)({key:e.key},null==e?void 0:e.useActionName),b.default.createElement("span",null,e.name))})))),popperClassName:N.default.popper,visible:L,onItemClick:function(e){O(!1);var t=ae(q.current);switch(null==t||t.setAttribute("data-node-visible",!1),e){case"editName":V(!0);break;case"delete":d&&d(u,n);break;case"addChildGroup":s&&s(u);break;case"copy":y&&y(te)}},onVisibleChange:function(e){if(O(e),q.current){var t=ae(q.current);null==t||t.setAttribute("data-node-visible",e),e?null==t||t.classList.add(N.default["tree-node-item-hover"]):null==t||t.classList.remove(N.default["tree-node-item-hover"])}},trigger:"hover"},b.default.createElement(k.BtnField,{type:"text"},b.default.createElement(C.Icon,{prefix:"nocodeplatformicon",type:"gengduo3"})))),!c&&b.default.createElement(k.BtnField,{type:"text",className:N.default["title-drag"]},b.default.createElement(C.Icon,{prefix:"nocodeplatformicon",type:"tuozhuai"})))))}},22936:function(e,t,a){e.exports=a.p+"ncp/nocode/images/f6f2652259704f369a40.png"}}]);