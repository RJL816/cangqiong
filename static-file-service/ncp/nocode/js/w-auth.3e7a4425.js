(self.webpackChunknocode_platform=self.webpackChunknocode_platform||[]).push([[988],{47712:function(e,t,a){"use strict";a.r(t),t.default={modal:"Dmk9VNVp_modal",body:"kYDVH67p_body",valid_info:"FXmJeVtJ_valid_info",red:"uAZKB4AH_red",app:"DrLec5ld_app",app_title:"qi89uPJy_app_title",app_select:"zI-GV6N0_app_select",form:"_4rgIlY1t_form",form_title:"SRKYr65x_form_title",form_select:"_8pk7FyUV_form_select",reason:"mnohAXcX_reason",reason_title:"pH0RlC4r_reason_title",reason_text:"wI3JVm8y_reason_text",footer:"u4c4ZC-a_footer",button_group:"MosGtfYA_button_group"}},42544:function(e,t,a){"use strict";a.r(t),t.default={modal:"arCkonwO_modal",body:"in7gMxcY_body",apply_app:"I4q+X1Ka_apply_app",apply_app_title:"ddyiLSJ-_apply_app_title",apply_app_text:"si01u7pD_apply_app_text",apply_form:"qlJr0NoH_apply_form",apply_form_title:"Ioa2nCka_apply_form_title",apply_form_text:"JAsmfIBZ_apply_form_text",apply_reason:"SlFawa9J_apply_reason",apply_reason_title:"_082mO8Oo_apply_reason_title",apply_reason_text:"CMnkv6ts_apply_reason_text",apply_advise:"f5xTaxZ6_apply_advise",apply_advise_title:"Z3BrcNxV_apply_advise_title",apply_advise_text:"vWqVYLND_apply_advise_text",footer:"RQ6FqnoN_footer",button_group:"XWE55sGW_button_group"}},25772:function(e,t,a){"use strict";a.r(t),t.default={api_main:"_4HDN-Lc3_api_main",tree_container:"yvy6-jhn_tree_container",request_info:"PyNTwssY_request_info",request_data:"_12fqUjFy_request_data",title:"Tv6q-tBC_title",form:"iPiOwX0d_form",tips:"_8AkaRRL6_tips",table_container:"DxZX5gC8_table_container",table_header:"sHUn87t0_table_header",table_label:"M2Ane0i7_table_label",generate_btn:"qUalmDfh_generate_btn",request_json:"sNmQWxeP_request_json"}},89916:function(e,t,a){"use strict";a.r(t),t.default={container:"quhrit-l_container",main:"UXckET7a_main",actions:"UtlZOoIP_actions",buttons:"_5+Qlb3n2_buttons",vas_action:"wElVv5lZ_vas_action",refresh:"pdzdBcgg_refresh",refresh_load:"Eo1dd6B0_refresh_load",fullscreen:"_0AcRVw4a_fullscreen",list:"SQ6E7SEJ_list",page:"+c2-ruK6_page",page_total:"LgXVIIDX_page_total","container-full-screen":"vWamiXPT_container-full-screen"}},44200:function(e,t,a){"use strict";a.r(t),t.default={container:"zaMKQin8_container",main:"CKBzlNNl_main",actions:"l1uGFnmH_actions",vas_action:"aRb5BCHN_vas_action",refresh:"bD3LQQPp_refresh",refresh_load:"sxy2rbsh_refresh_load",fullscreen:"iCDiPEbt_fullscreen",list:"HrJSF4l1_list",page:"FNjl306l_page",page_total:"gwdjrn82_page_total","container-full-screen":"HRQALquJ_container-full-screen"}},69584:function(e,t,a){"use strict";var n=a(25028),r=a(9564);n(t,"__esModule",{value:!0}),t.getApiMenu=void 0;var l=r(a(29052)),o=r(a(94924)),u=a(50460);t.getApiMenu=function(){var e=(0,o.default)(l.default.mark((function e(t){var a;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"nocode/v2/nocode_sys/common/api_menu",e.next=3,(0,u.get)("nocode/v2/nocode_sys/common/api_menu",t);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},76084:function(e,t,a){"use strict";var n=a(25028),r=a(9564);n(t,"__esModule",{value:!0}),t.loadFormListWithParams=t.getInitFormDataList=t.getFormDataListSetting=t.getFormDataList=void 0;var l=r(a(29052)),o=r(a(94924)),u=a(85040),i=a(57264),s=a(69400),c=t.getFormDataList=function(){var e=(0,o.default)(l.default.mark((function e(t){var a,n,r,o,i,c,f,d,p,m,v,_,g;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.appId,t.formId,n=t.listFilters,r=t.pageNo,o=t.pageSize,i=t.searchKeywords,c=t.orderBy,f=(0,s.getArgs)(null==n?void 0:n[0],{page_no:r,page_size:o,search:i,order_by:c}),e.next=4,(0,u.getAuthApplyListData)(a,f);case 4:return d=e.sent,p=d.rows,m=d.pageSize,v=d.totalCount,_=d.pageNo,g=d.lastPage,e.abrupt("return",{dataSource:p,pageSize:m,totalCount:v,pageNo:_,lastPage:g});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=(t.getInitFormDataList=function(){var e=(0,o.default)(l.default.mark((function e(t){var a,n,r,o,c,d,p,m,v,_,g,h,y,b,w,C,N,x,S;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.appId){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,f();case 6:if(e.t0=e.sent,e.t0){e.next=9;break}e.t0={};case 9:return n=e.t0,r=n.listItemConfig,o=n.configuredFilterItems,c=n.listFilters,d=n.listFilterConfig,p=n.listStatInfo,m=n.formName,v=n.configuredPageSize,_=n.orderBy,g=n.orderInfo,h=(0,s.getArgs)(null==c?void 0:c[0],{page_size:v,order_by:_}),e.next=22,(0,u.getAuthApplyListData)(a,h);case 22:return y=e.sent,b=y.rows,w=y.pageSize,C=y.totalCount,N=y.pageNo,x=y.lastPage,S=(0,s.getInitFooterDataSource)(r,p),e.abrupt("return",{dataSource:b,footerDataSource:S,pageSize:w,pageNo:N,totalCount:C,lastPage:x,formName:m,loading:!1,listItemConfig:r,listFilterConfig:d,listStatInfo:p,configuredFilterItems:o,listFilters:c,orderBy:_,orderInfo:g});case 28:e.prev=28,e.t1=e.catch(3),(0,i.showNotice)("error",e.t1.message);case 32:case"end":return e.stop()}}),e,null,[[3,28]])})));return function(t){return e.apply(this,arguments)}}(),t.getFormDataListSetting=function(){var e=(0,o.default)(l.default.mark((function e(){var t,a,n,r,o,i,s,c,f,d,p,m,v,_,g,h,y,b,w;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.getAuthApplyListSetting)();case 2:return d=e.sent,p=(null==d||null===(t=d.rows[0])||void 0===t?void 0:t.listItemConfig)||[],m=(null==d||null===(a=d.rows[0])||void 0===a?void 0:a.listFilterConfig)||[],v=(null==d||null===(n=d.rows[0])||void 0===n?void 0:n.configuredFilterItems)||[],_=(null==d||null===(r=d.rows[0])||void 0===r?void 0:r.listStatInfo)||[],g=null==d||null===(o=d.rows[0])||void 0===o?void 0:o.filters,h=(null==d||null===(i=d.rows[0])||void 0===i?void 0:i.formName)||"",y=null==d||null===(s=d.rows[0])||void 0===s?void 0:s.configuredPageSize,b=(null==d||null===(c=d.rows[0])||void 0===c?void 0:c.orderBy)||"",w=(null==d||null===(f=d.rows[0])||void 0===f?void 0:f.orderInfo)||[],e.abrupt("return",{listItemConfig:p,listFilterConfig:m,configuredFilterItems:v,listFilters:g,listStatInfo:_,formName:h,configuredPageSize:y,orderBy:b,orderInfo:w});case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());t.loadFormListWithParams=function(){var e=(0,o.default)(l.default.mark((function e(t){var a,n,r,o,u,i,s,f,d,p,m,v,_;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.appId,n=t.formId,r=t.listFilters,o=t.pageNo,u=t.pageSize,i=t.searchKeywords,s=t.orderBy,e.next=3,c({appId:a,formId:n,listFilters:r,pageNo:o,pageSize:u,searchKeywords:i,orderBy:s});case 3:return f=e.sent,d=f.dataSource,p=f.pageSize,m=f.totalCount,v=f.pageNo,_=f.lastPage,e.abrupt("return",{dataSource:d,pageSize:p,pageNo:v,totalCount:m,lastPage:_});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},97512:function(e,t,a){"use strict";var n=a(25028),r=a(9564);n(t,"__esModule",{value:!0}),t.loadFormListWithParams=t.getInitFormDataList=t.getFormDataListSetting=t.getFormDataList=void 0;var l=r(a(29052)),o=r(a(94924)),u=a(85040),i=a(57264),s=a(69400),c=t.getFormDataList=function(){var e=(0,o.default)(l.default.mark((function e(t){var a,n,r,o,i,c,f,d,p,m,v,_,g;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.appId,t.formId,n=t.listFilters,r=t.pageNo,o=t.pageSize,i=t.searchKeywords,c=t.orderBy,f=(0,s.getArgs)(null==n?void 0:n[0],{page_no:r,page_size:o,search:i,order_by:c}),e.next=4,(0,u.getAuthAuditListData)(a,f);case 4:return d=e.sent,p=d.rows,m=d.pageSize,v=d.totalCount,_=d.pageNo,g=d.lastPage,e.abrupt("return",{dataSource:p,pageSize:m,totalCount:v,pageNo:_,lastPage:g});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=(t.getInitFormDataList=function(){var e=(0,o.default)(l.default.mark((function e(t){var a,n,r,o,c,d,p,m,v,_,g,h,y,b,w,C,N,x,S;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.appId){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,f();case 6:if(e.t0=e.sent,e.t0){e.next=9;break}e.t0={};case 9:return n=e.t0,r=n.listItemConfig,o=n.configuredFilterItems,c=n.listFilters,d=n.listFilterConfig,p=n.listStatInfo,m=n.formName,v=n.configuredPageSize,_=n.orderBy,g=n.orderInfo,h=(0,s.getArgs)(null==c?void 0:c[0],{page_size:v,order_by:_}),e.next=22,(0,u.getAuthAuditListData)(a,h);case 22:return y=e.sent,b=y.rows,w=y.pageSize,C=y.totalCount,N=y.pageNo,x=y.lastPage,S=(0,s.getInitFooterDataSource)(r,p),e.abrupt("return",{dataSource:b,footerDataSource:S,pageSize:w,pageNo:N,totalCount:C,lastPage:x,formName:m,loading:!1,listItemConfig:r,listFilterConfig:d,listStatInfo:p,configuredFilterItems:o,listFilters:c,orderBy:_,orderInfo:g});case 28:e.prev=28,e.t1=e.catch(3),(0,i.showNotice)("error",e.t1.message);case 32:case"end":return e.stop()}}),e,null,[[3,28]])})));return function(t){return e.apply(this,arguments)}}(),t.getFormDataListSetting=function(){var e=(0,o.default)(l.default.mark((function e(){var t,a,n,r,o,i,s,c,f,d,p,m,v,_,g,h,y,b,w;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.getAuthAuditListSetting)();case 2:return d=e.sent,p=(null==d||null===(t=d.rows[0])||void 0===t?void 0:t.listItemConfig)||[],m=(null==d||null===(a=d.rows[0])||void 0===a?void 0:a.listFilterConfig)||[],v=(null==d||null===(n=d.rows[0])||void 0===n?void 0:n.configuredFilterItems)||[],_=(null==d||null===(r=d.rows[0])||void 0===r?void 0:r.listStatInfo)||[],g=null==d||null===(o=d.rows[0])||void 0===o?void 0:o.filters,h=(null==d||null===(i=d.rows[0])||void 0===i?void 0:i.formName)||"",y=null==d||null===(s=d.rows[0])||void 0===s?void 0:s.configuredPageSize,b=(null==d||null===(c=d.rows[0])||void 0===c?void 0:c.orderBy)||"",w=(null==d||null===(f=d.rows[0])||void 0===f?void 0:f.orderInfo)||[],e.abrupt("return",{listItemConfig:p,listFilterConfig:m,configuredFilterItems:v,listFilters:g,listStatInfo:_,formName:h,configuredPageSize:y,orderBy:b,orderInfo:w});case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());t.loadFormListWithParams=function(){var e=(0,o.default)(l.default.mark((function e(t){var a,n,r,o,u,i,s,f,d,p,m,v,_;return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.appId,n=t.formId,r=t.listFilters,o=t.pageNo,u=t.pageSize,i=t.searchKeywords,s=t.orderBy,e.next=3,c({appId:a,formId:n,listFilters:r,pageNo:o,pageSize:u,searchKeywords:i,orderBy:s});case 3:return f=e.sent,d=f.dataSource,p=f.pageSize,m=f.totalCount,v=f.pageNo,_=f.lastPage,e.abrupt("return",{dataSource:d,pageSize:p,pageNo:v,totalCount:m,lastPage:_});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},77772:function(e,t,a){"use strict";var n=a(13568),r=a(93252),l=a(25028),o=a(4884),u=a(9564);l(t,"__esModule",{value:!0}),t.default=void 0;var i=u(a(23992)),s=u(a(70696)),c=u(a(38456)),f=u(a(78912)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var a=y(t);if(a&&a.has(e))return a.get(e);var r={__proto__:null},u=l&&o;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=u?o(e,i):null;s&&(s.get||s.set)?l(r,i,s):r[i]=e[i]}return r.default=e,a&&a.set(e,r),r}(a(65984)),p=u(a(16428)),m=a(63548),v=a(82416),_=u(a(47712)),g=a(85040),h=a(57264);function y(e){if("function"!=typeof r)return null;var t=new r,a=new r;return(y=function(e){return e?a:t})(e)}var b=function(e){var t=e.appId,a=e.onConfirm,n=(0,d.useState)([]),r=(0,f.default)(n,2),l=r[0],o=r[1],u=(0,d.useState)([]),p=(0,f.default)(u,2),y=p[0],b=p[1],w=(0,d.useState)(!0),C=(0,f.default)(w,2),N=C[0],x=C[1],S=(0,d.useState)(""),E=(0,f.default)(S,2),k=E[0],F=E[1],I=(0,d.useState)(""),P=(0,f.default)(I,2),A=P[0],M=P[1],z=(0,d.useState)([]),L=(0,f.default)(z,2),D=L[0],B=L[1],O=(0,d.useRef)(null);(0,d.useEffect)((function(){(0,g.getAppList)(t).then((function(e){o(null==e?void 0:e.rows)})).catch((function(e){}))}),[t]),(0,d.useEffect)((function(){k&&(0,g.getFormList)(k).then((function(e){b(null==e?void 0:e.rows)})).catch((function(e){}))}),[k]);var j=(0,d.useMemo)((function(){return(0,i.default)(l).call(l,(function(e){return{label:e.name||"-",value:e.id}}))}),[l]),V=(0,d.useMemo)((function(){return(0,i.default)(y).call(y,(function(e){return{label:e.name,value:e.formId}}))}),[y]),q=(0,d.useCallback)((function(e){F(e),M(""),B((0,s.default)(D).call(D,(function(e){return"app"!==e.name})))}),[D]),K=(0,d.useCallback)((function(e){M(e),B((0,s.default)(D).call(D,(function(e){return"form"!==e.name})))}),[D]),R=(0,d.useCallback)((function(e){O.current=e}),[]),T=d.default.createElement(d.default.Fragment,null,d.default.createElement("div",{className:_.default.app},d.default.createElement("div",{className:_.default.app_title},"选择应用",d.default.createElement("span",{className:_.default.red},"*")),d.default.createElement(v.Select,{showSearch:!0,options:j,value:k,onChange:q,className:_.default.app_select}),(0,c.default)(D).call(D,(function(e){return"app"===e.name}))&&d.default.createElement("div",{className:_.default.valid_info},"请选择应用")),d.default.createElement("div",{className:_.default.form},d.default.createElement("div",{className:_.default.form_title},"选择表单",d.default.createElement("span",{className:_.default.red},"*")),d.default.createElement(v.Select,{showSearch:!0,options:V,value:A,onChange:K,className:_.default.form_select}),(0,c.default)(D).call(D,(function(e){return"form"===e.name}))&&d.default.createElement("div",{className:_.default.valid_info},"请选择表单")),d.default.createElement("div",{className:_.default.reason},d.default.createElement("div",{className:_.default.reason_title},"申请原因"),d.default.createElement(v.Textarea,{placeholder:"请输入",className:_.default.reason_text,onChange:R,maxLength:255}))),J=(0,d.useCallback)((function(){x(!1)}),[]),H=(0,d.useCallback)((function(){var e=[];if(k||e.push({name:"app"}),A||e.push({name:"form"}),e.length>0)B(e);else{var n={data:[{applyReason:O.current,appId:k,formId:A,applyAppId:t}]};(0,g.applyAuth)(n).then((function(e){(0,h.showNotice)("success","提交成功"),J(),null==a||a()})).catch((function(e){(0,h.showNotice)("error",e.message)}))}}),[J,a,k,A,t]),X=d.default.createElement("div",{className:_.default.button_group},d.default.createElement(v.BtnField,{text:"取消",onClick:J,size:"small"}),d.default.createElement(v.BtnField,{type:"primary",text:"确定",onClick:H,size:"small"}));return d.default.createElement(m.Modal,{title:"申请权限",body:T,bodyClassName:_.default.body,footer:X,footerClassName:_.default.footer,maskClosable:!1,className:_.default.modal,height:424,width:480,keyboard:!1,visible:N,closable:!0,onCancel:J})};b.show=function(e){var t=document.createElement("div");document.body.appendChild(t),p.default.render(d.default.createElement(b,e),t)};t.default=b},45292:function(e,t,a){"use strict";var n=a(13568),r=a(93252),l=a(25028),o=a(4884),u=a(9564);l(t,"__esModule",{value:!0}),t.default=void 0;var i=u(a(78912)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var a=_(t);if(a&&a.has(e))return a.get(e);var r={__proto__:null},u=l&&o;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=u?o(e,i):null;s&&(s.get||s.set)?l(r,i,s):r[i]=e[i]}return r.default=e,a&&a.set(e,r),r}(a(65984)),c=u(a(16428)),f=a(63548),d=a(82416),p=u(a(42544)),m=a(85040),v=a(57264);function _(e){if("function"!=typeof r)return null;var t=new r,a=new r;return(_=function(e){return e?a:t})(e)}var g=function(e){var t=e.record,a=void 0===t?{}:t,n=e.onAfterConfirm,r=a.formid,l=a.applyreason,o=a.applyappname,u=a.audittext,c=a.id,_=a.formname,g=(0,s.useState)(!0),h=(0,i.default)(g,2),y=h[0],b=h[1],w=(0,s.useState)(u),C=(0,i.default)(w,2),N=C[0],x=C[1];(0,s.useEffect)((function(){x(N)}),[N]);var S=(0,s.useCallback)((function(e){x(e)}),[]),E=s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{className:p.default.apply_app},s.default.createElement("div",{className:p.default.apply_app_title},"申请应用"),s.default.createElement("div",{className:p.default.apply_app_text,title:o},o)),s.default.createElement("div",{className:p.default.apply_form},s.default.createElement("div",{className:p.default.apply_form_title},"申请表单"),s.default.createElement("div",{className:p.default.apply_form_text,title:_},_)),s.default.createElement("div",{className:p.default.apply_reason},s.default.createElement("div",{className:p.default.apply_reason_title},"申请原因"),s.default.createElement("div",{className:p.default.apply_reason_text},l)),s.default.createElement("div",{className:p.default.apply_advise},s.default.createElement("div",{className:p.default.apply_advise_title},"审批意见"),s.default.createElement(d.Textarea,{placeholder:"请输入",className:p.default.apply_advise_text,onChange:S,value:N,maxLength:255}))),k=(0,s.useCallback)((function(){b(!1)}),[]),F=(0,s.useCallback)((function(e){var t={data:[{id:c,agree:e,auditText:N}]};(0,m.auditAuth)(t).then((function(e){(0,v.showNotice)("success","审批成功"),k(),null==n||n()})).catch((function(e){(0,v.showNotice)("error",e.message)}))}),[k,n,r,c,N]),I=(0,s.useCallback)((function(){F(!1)}),[F]),P=(0,s.useCallback)((function(){F(!0)}),[F]),A=s.default.createElement("div",{className:p.default.button_group},s.default.createElement(d.BtnField,{text:"拒绝",onClick:I,size:"small"}),s.default.createElement(d.BtnField,{type:"primary",text:"同意",onClick:P,size:"small"}));return s.default.createElement(f.Modal,{title:"审批权限",body:E,bodyClassName:p.default.body,footer:A,footerClassName:p.default.footer,maskClosable:!1,className:p.default.modal,width:480,keyboard:!1,visible:y,closable:!0,onCancel:k})};g.show=function(e){var t=document.createElement("div");document.body.appendChild(t),c.default.render(s.default.createElement(g,e),t)};t.default=g},53428:function(e,t,a){"use strict";var n=a(13568),r=a(93252),l=a(25028),o=a(4884),u=a(9564);l(t,"__esModule",{value:!0}),t.default=void 0;var i=u(a(96631)),s=u(a(26048)),c=u(a(78912)),f=u(a(35256)),d=u(a(29052)),p=u(a(94924)),m=u(a(28429)),v=u(a(23992)),_=u(a(94728)),g=u(a(760)),h=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var a=I(t);if(a&&a.has(e))return a.get(e);var r={__proto__:null},u=l&&o;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=u?o(e,i):null;s&&(s.get||s.set)?l(r,i,s):r[i]=e[i]}return r.default=e,a&&a.set(e,r),r}(a(65984)),y=a(63548),b=a(82416),w=u(a(25772)),C=a(57264),N=a(41936),x=a(69584),S=a(50460),E=a(16428),k=u(a(59480)),F=["defaultValue","onChange","onBlur","validate"];function I(e){if("function"!=typeof r)return null;var t=new r,a=new r;return(I=function(e){return e?a:t})(e)}var P=function e(t){return m.default.all(null==t?void 0:(0,v.default)(t).call(t,function(){var t=(0,p.default)(d.default.mark((function t(a){var n,r,l,o,u,i;return d.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.id,r=a.name,l=a.url,o=a.type,a.key=n,a.title=r,"menu"!==o||!l){t.next=14;break}return t.next=6,(0,S.get)(l);case 6:if(u=t.sent,i=null==u?void 0:u.rows){t.next=10;break}return t.abrupt("return",a);case 10:return t.next=12,e(i);case 12:a.children=t.sent,a.selectable=!a.children;case 14:return t.abrupt("return",a);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))},A=function(e){switch(e){case"number":return 200;case"desc":return 250;case"required":return 100;case"code":return 300;case"name":case"type":case"alias":return 150;default:return 180}},M=function(e){switch(e){case"code":case"name":case"number":return 2;case"desc":return 3;default:return 1}},z=/[^\w]+/g,L=function(e){var t=e.defaultValue,a=e.onChange,n=e.onBlur,r=e.validate,l=(0,f.default)(e,F),o=(0,h.useState)(t),u=(0,c.default)(o,2),i=u[0],d=u[1];return(0,h.useEffect)((function(){d(t)}),[t]),h.default.createElement(b.Text,(0,s.default)({value:i,onChange:function(e){r&&!r(e)||(d(e),null==a||a(e))},onBlur:function(e){var t=e.target.value;r&&!r(t)||(d(t),null==n||n(t))}},l))};t.default=function(e){var t,a=(0,N.useParams)().appId,n=(0,h.useState)([]),r=(0,c.default)(n,2),l=r[0],o=r[1],u=(0,h.useState)(),s=(0,c.default)(u,2),f=s[0],m=s[1],F=(0,h.useState)([]),I=(0,c.default)(F,2),D=I[0],B=I[1],O=(0,h.useState)({row:-1,col:-1}),j=(0,c.default)(O,2),V=j[0],q=j[1],K=(0,h.useRef)(),R=(0,h.useCallback)((0,p.default)(d.default.mark((function e(){var t,n;return d.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,x.getApiMenu)({appId:a});case 3:return t=e.sent,e.next=6,P(t.rows);case 6:n=e.sent,(0,E.unstable_batchedUpdates)((function(){(null==n?void 0:n[0])&&m(null==n?void 0:n[0]),o(n)})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),(0,C.showNotice)("error",(null===e.t0||void 0===e.t0?void 0:e.t0.message)||"请求API文档菜单信息失败");case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),[a]);(0,h.useEffect)((function(){R()}),[]);var T=(0,h.useCallback)(function(){var e=(0,p.default)(d.default.mark((function e(t){var a,n,r,l,o;return d.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.url){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,(0,S.get)(a);case 6:r=e.sent,B(null==r||null===(n=r.rows)||void 0===n?void 0:n[0]),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),l=e.t0||{},(o=l.message)&&(0,C.showNotice)("error",o);case 14:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),[D]),J=(0,h.useCallback)((function(){q({row:-1,col:-1})}),[]),H=(0,h.useCallback)(function(){var e=(0,p.default)(d.default.mark((function e(t,a){var n;return d.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=a.node).id!==f.id&&(m(n),J());case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[f]),X=(0,h.useCallback)((function(){f&&T(f)}),[f,T]);(0,h.useEffect)((function(){X()}),[f]);var Q=(0,h.useMemo)((function(){var e;return(null==D||null===(e=D.previewInfos)||void 0===e?void 0:(0,_.default)(e).call(e,(function(e,t){var a;return e+(0,g.default)(a="\n".concat(t.label,"\n\n")).call(a,t.value,"\n")}),""))||""}),[D]),W=(0,h.useCallback)((0,p.default)(d.default.mark((function e(){var t;return d.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={data:[{batchAlias:!0}]},e.next=4,(0,S.post)(null==f?void 0:f.url,t);case 4:X(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),(0,C.showNotice)("error",(null===e.t0||void 0===e.t0?void 0:e.t0.message)||"批量生成内容别名失败");case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[f,X]),Z=(0,h.useCallback)((function(){(0,C.showConfirmModal)({title:"确定批量生成内容别名？",content:"根据内容名称批量生成别名，该操作不会影响已设置的别名。",onAction:function(e){if("ok"===e)W()}})}),[W]),G=(0,h.useCallback)((function(e){return function(t,a,n){return{style:{},onClick:function(){var t=V.row,a=V.col;t===n&&a===e||q({row:n,col:e})}}}}),[V]),U=(0,h.useCallback)((function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").match(z)||((0,C.showNotice)("warnning","".concat(e,"别名必须由英文大小写、数字或下划线组成")),!1)}),[]),Y=(0,h.useCallback)(function(){var e=(0,p.default)(d.default.mark((function e(t,a,n){var r,l;return d.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==a){e.next=3;break}return J(),e.abrupt("return");case 3:return r={data:[(0,i.default)({},n,t||"")]},e.prev=4,e.next=7,(0,S.post)(null==f?void 0:f.url,r);case 7:return l=e.sent,(0,C.showNotice)("success","修改成功"),J(),e.abrupt("return",l);case 13:return e.prev=13,e.t0=e.catch(4),(0,C.showNotice)("error",(null===e.t0||void 0===e.t0?void 0:e.t0.message)||"修改表单别名失败"),J(),e.abrupt("return",e.t0);case 18:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t,a,n){return e.apply(this,arguments)}}(),[f,X]),$=(0,h.useCallback)((function(e){return null==e?void 0:(0,v.default)(e).call(e,(function(e,t){var a=e.id,n={code:a,editable:e.edit,title:e.name,getCellProps:G(t),width:A(a),features:{flex:M(a)}};return n.editable?(n.render=function(e,a,n){var r=function(){var t=(0,p.default)(d.default.mark((function t(r){return d.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Y(r,e,a.number).then((function(e){B((0,k.default)((function(e){return e.items[2].value[n].alias=r,e})))}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return V.row===n&&V.col===t?h.default.createElement(L,{defaultValue:e,maxLength:50,onBlur:r,onPressEnter:r,validate:function(e){return U(e,"内容")}}):h.default.createElement("div",{style:{display:"flex",alignItems:"center"}},e)},n):n}))}),[G,V,Y]),ee=(0,h.useCallback)((function(e){var t,a,n=e.id,r=e.type,l=e.edit,o=e.name,u=e.value,i=e.config,s=e.batchAlias,c=function(e){var t,a=null==D||null===(t=D.items)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.value;Y(e,u,a).then((function(t){null!=t&&t.status?B((0,k.default)((function(t){return t.items[1].value=e,t}))):X()}))},d="formInfo"===(null==f?void 0:f.apiType)?"表单":"流程";switch(r){case"nocodetextfield":return h.default.createElement(y.Form.Item,{label:o,key:n,name:n},h.default.createElement(L,{defaultValue:u,maxLength:50,onBlur:c,onPressEnter:c,validate:function(e){return U(e,d)},disabled:!l,key:n+"_input"}));case"nocodeentryfield":return h.default.createElement("div",{className:w.default.table_container,key:n},h.default.createElement("div",{className:w.default.table_header},h.default.createElement(b.Label,{className:w.default.table_label,text:o}),s&&h.default.createElement(b.BtnField,{className:w.default.generate_btn,text:"批量生成内容别名",onClick:Z,type:"text"})),h.default.createElement(b.DataGrid,{columns:$(i),dataSource:u}));case"nocodegraphicdisplayfield":return h.default.createElement(h.default.Fragment,null,null===(t=u||"")||void 0===t?void 0:(0,v.default)(a=t.split("\n")).call(a,(function(e){return h.default.createElement("div",{className:w.default.tips},e)})))}}),[Z,$,D,f,X,Y]);return h.default.createElement("div",{className:w.default.api_main},h.default.createElement("div",{className:w.default.tree_container},h.default.createElement(y.Tree,{selectedKeys:[null==f?void 0:f.id],treeData:l,estimatedItemSize:36,onSelect:H})),h.default.createElement("div",{className:w.default.request_info},h.default.createElement("div",{className:w.default.request_data},h.default.createElement("div",{className:w.default.title},null==D?void 0:D.title),h.default.createElement(y.Form,{className:w.default.form},null==D||null===(t=D.items)||void 0===t?void 0:(0,v.default)(t).call(t,(function(e){return ee(e)})))),Q&&h.default.createElement(b.CodeEditor,{ref:K,value:Q,className:w.default.request_json,options:{readOnly:!0}})))}},25340:function(e,t,a){"use strict";var n=a(13568),r=a(93252),l=a(25028),o=a(4884),u=a(9564);l(t,"__esModule",{value:!0}),t.default=void 0;var i=u(a(50524)),s=u(a(760)),c=u(a(78912)),f=k(a(65984)),d=u(a(16428)),p=u(a(89916)),m=u(a(21980)),v=a(71120),_=a(57264),g=a(12700),h=a(69400),y=u(a(71252)),b=a(82416),w=k(a(76084)),C=a(41936),N=u(a(77772)),x=a(85040),S=a(63548);function E(e){if("function"!=typeof r)return null;var t=new r,a=new r;return(E=function(e){return e?a:t})(e)}function k(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var a=E(t);if(a&&a.has(e))return a.get(e);var r={__proto__:null},u=l&&o;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=u?o(e,i):null;s&&(s.get||s.set)?l(r,i,s):r[i]=e[i]}return r.default=e,a&&a.set(e,r),r}t.default=function(e){var t=(0,C.useParams)(e).appId,a=(0,f.useState)(!1),n=(0,c.default)(a,2),r=n[0],l=n[1],o=["3"],u=(0,f.useMemo)((function(){return{loadMore:!1,updateFooter:!0,isMob:!1,operateCol:{needOperateCol:!0,width:53,disabled:!1}}}),[]),E=(0,m.default)({appId:t,env:v.ENV_APP},u,w),k=(0,c.default)(E,3),F=k[0],I=k[1],P=k[2],A=(F.formName,F.dataSource),M=(F.footerDataSource,F.pageNo),z=F.pageSize,L=(F.lastPage,F.totalCount),D=F.visibleColumnKeys,B=F.columns,O=(F.showListSettingPop,F.showFilterSettingPop,F.listFilterConfig),j=(F.listItemConfig,F.configuredFilterItems),V=(F.listFilters,F.searchKeywords,F.colHeadFilters,F.loading,F.orderInfo,F.orderBy,I.onAfterAddRows,I.onPaginationChange),q=(I.onListSettingConfirm,I.onFilterItemDelete,I.onFilterConfirm),K=I.onRefresh,R=I.onSearch,T=(I.onChangeFilters,I.onSetShowFilterSettingPop,I.onSetShowListSettingPop,I.onAggCellChange,I.getEnumFilterValue,I.getStatInfo,I.onColFilterConfirm,I.onRowDelete,I.onColSort,(0,f.useCallback)((function(e,t){if("confirm"===e){var a={data:[{id:t}]};(0,x.abstainAuth)(a).then((function(e){(0,_.showNotice)("success","弃权成功"),K()})).catch((function(e){(0,_.showNotice)("error",e.message)}))}}),[K])),J=(0,f.useMemo)((function(){return[{name:"弃权",major:!0,visible:function(e){return(0,i.default)(o).call(o,e.statusId)},onClick:function(e){var t;(0,_.showConfirmModal)({title:(0,s.default)(t="确定放弃“".concat(e.appname,"”应用的“")).call(t,e.formname,"”表单权限？"),actions:[{text:"取消",key:"cancel"},{text:"确定",key:"confirm"}],onAction:function(t){return T(t,e.id)},type:"prompt"})}}]}),[T]),H=((0,f.useCallback)((function(e){null==q||q(e)}),[q]),(0,f.useCallback)((function(){l(!r)}),[r])),X=((0,f.useMemo)((function(){return(0,h.filterOperateCol)(B)}),[B]),(0,f.useMemo)((function(){return(0,g.getTransferFilters)((0,g.getFilters)(j,O))}),[j,O]),(0,f.useCallback)((function(){null==K||K()}),[K])),Q=((0,f.useCallback)((function(e){null==R||R(e)}),[R]),f.default.createElement(f.default.Fragment,null,f.default.createElement("div",{className:(0,y.default)(p.default.container)},f.default.createElement("div",{className:p.default.main},f.default.createElement("div",{className:p.default.actions},f.default.createElement("div",{className:p.default.buttons},f.default.createElement(b.BtnField,{type:"primary",className:p.default.refresh,text:"申请权限",onClick:function(e){N.default.show({appId:t,onConfirm:K})}})),f.default.createElement("div",{className:p.default.vas_action},f.default.createElement(b.BtnField,{type:"text",className:p.default.refresh,onClick:function(e){X()},icon:{prefix:"nocodeplatformicon",type:"shuaxin"}}),f.default.createElement(b.BtnField,{className:p.default.fullscreen,type:"text",onClick:H,icon:{prefix:"nocodeplatformicon",type:r?"suoxiao":"fangda"}}))),f.default.createElement("div",{className:p.default.list},f.default.createElement(P.Provider,{value:{colOperations:J}},f.default.createElement(b.DataGrid,{rowSelection:!1,useVirtual:!0,columns:(0,h.getShowColumns)(B,D),dataSource:A,style:{height:"100%"}}))),f.default.createElement("div",{className:p.default.page},f.default.createElement(S.Pagination,{showSizeChanger:!0,showQuickJumper:!1,defaultCurrent:M,current:M,total:L,pageSize:z,onChange:function(e,t){null==V||V(e||1,t)},pageType:"nicety"}))))));return r?d.default.createPortal(f.default.createElement("div",{className:p.default["container-full-screen"]},Q),document.body):Q}},86204:function(e,t,a){"use strict";var n=a(13568),r=a(93252),l=a(25028),o=a(4884),u=a(9564);l(t,"__esModule",{value:!0}),t.default=void 0;var i=u(a(50524)),s=u(a(760)),c=u(a(78912)),f=k(a(65984)),d=u(a(16428)),p=u(a(44200)),m=u(a(21980)),v=a(71120),_=a(57264),g=a(12700),h=a(69400),y=u(a(71252)),b=a(82416),w=k(a(97512)),C=a(41936),N=a(63548),x=u(a(45292)),S=a(85040);function E(e){if("function"!=typeof r)return null;var t=new r,a=new r;return(E=function(e){return e?a:t})(e)}function k(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var a=E(t);if(a&&a.has(e))return a.get(e);var r={__proto__:null},u=l&&o;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=u?o(e,i):null;s&&(s.get||s.set)?l(r,i,s):r[i]=e[i]}return r.default=e,a&&a.set(e,r),r}t.default=function(e){var t=(0,C.useParams)(e).appId,a=(0,f.useState)(!1),n=(0,c.default)(a,2),r=n[0],l=n[1],o=["3"],u=["1"],E=(0,f.useMemo)((function(){return{loadMore:!1,updateFooter:!0,isMob:!1,operateCol:{needOperateCol:!0,width:53,disabled:!1}}}),[]),k=(0,m.default)({appId:t,env:v.ENV_APP},E,w),F=(0,c.default)(k,3),I=F[0],P=F[1],A=F[2],M=(I.formName,I.dataSource),z=(I.footerDataSource,I.pageNo),L=I.pageSize,D=(I.lastPage,I.totalCount),B=I.visibleColumnKeys,O=I.columns,j=(I.showListSettingPop,I.showFilterSettingPop,I.listFilterConfig),V=(I.listItemConfig,I.configuredFilterItems),q=(I.listFilters,I.searchKeywords,I.colHeadFilters,I.loading,I.orderInfo,I.orderBy,P.onAfterAddRows,P.onPaginationChange),K=(P.onListSettingConfirm,P.onFilterItemDelete,P.onFilterConfirm),R=P.onRefresh,T=P.onSearch,J=(P.onChangeFilters,P.onAggCellChange,P.getEnumFilterValue,P.onColFilterConfirm,P.onRowDelete,P.onColSort,(0,f.useCallback)((function(){null==R||R()}),[R])),H=(0,f.useCallback)((function(e,t){if("confirm"===e){var a={data:[{id:t}]};(0,S.revokeAuth)(a).then((function(e){(0,_.showNotice)("success","撤销成功"),R()})).catch((function(e){(0,_.showNotice)("error",e.message)}))}}),[R]),X=(0,f.useMemo)((function(){return[{name:"撤销",major:!0,visible:function(e){return(0,i.default)(o).call(o,e.statusId)},onClick:function(e){var t;(0,_.showConfirmModal)({title:(0,s.default)(t="确定撤销“".concat(e.applyappname,"”应用申请的“")).call(t,e.formname,"”表单权限？"),actions:[{text:"取消",key:"cancel"},{text:"确定",key:"confirm"}],onAction:function(t){return H(t,e.id)},type:"prompt"})}},{name:"审批",major:!0,visible:function(e){return(0,i.default)(u).call(u,e.statusId)},onClick:function(e){x.default.show({record:e,onAfterConfirm:J})}}]}),[J,H]),Q=((0,f.useCallback)((function(e){null==K||K(e)}),[K]),(0,f.useCallback)((function(){l(!r)}),[r])),W=((0,f.useMemo)((function(){return(0,h.filterOperateCol)(O)}),[O]),(0,f.useMemo)((function(){return(0,g.getTransferFilters)((0,g.getFilters)(V,j))}),[V,j]),(0,f.useCallback)((function(){null==R||R()}),[R])),Z=((0,f.useCallback)((function(e){null==T||T(e)}),[T]),f.default.createElement(f.default.Fragment,null,f.default.createElement("div",{className:(0,y.default)(p.default.container)},f.default.createElement("div",{className:p.default.main},f.default.createElement("div",{className:p.default.actions},f.default.createElement("div",{className:p.default.vas_action},f.default.createElement(b.BtnField,{type:"text",className:p.default.refresh,onClick:function(e){W()},icon:{prefix:"nocodeplatformicon",type:"shuaxin"}}),f.default.createElement(b.BtnField,{className:p.default.fullscreen,type:"text",onClick:Q,icon:{prefix:"nocodeplatformicon",type:r?"suoxiao":"fangda"}}))),f.default.createElement("div",{className:p.default.list},f.default.createElement(A.Provider,{value:{colOperations:X}},f.default.createElement(b.DataGrid,{rowSelection:!1,useVirtual:!0,columns:(0,h.getShowColumns)(O,B),dataSource:M,style:{height:"100%"}}))),f.default.createElement("div",{className:p.default.page},f.default.createElement(N.Pagination,{showSizeChanger:!0,showQuickJumper:!1,defaultCurrent:z,current:z,total:D,pageSize:L,onChange:function(e,t){null==q||q(e||1,t)},pageType:"nicety"}))))));return r?d.default.createPortal(f.default.createElement("div",{className:p.default["container-full-screen"]},Z),document.body):Z}},88600:function(e,t,a){var n=a(6164),r=a(84316);e.exports=function(e){if(n(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},228:function(e,t,a){var n=a(16388),r=a(64800),l=a(96680);e.exports=function(e){if(void 0!==n&&null!=r(e)||null!=e["@@iterator"])return l(e)},e.exports.__esModule=!0,e.exports.default=e.exports},52331:function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},99148:function(e,t,a){var n=a(88600),r=a(228),l=a(2880),o=a(52331);e.exports=function(e){return n(e)||r(e)||l(e)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},71252:function(e,t){var a;!function(){"use strict";var n={}.hasOwnProperty;function r(){for(var e="",t=0;t<arguments.length;t++){var a=arguments[t];a&&(e=o(e,l(a)))}return e}function l(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return r.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var a in e)n.call(e,a)&&e[a]&&(t=o(t,a));return t}function o(e,t){return t?e?e+" "+t:e+t:e}e.exports?(r.default=r,e.exports=r):void 0===(a=function(){return r}.apply(t,[]))||(e.exports=a)}()}}]);