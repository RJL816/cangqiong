"use strict";(self.webpackChunknocode_platform=self.webpackChunknocode_platform||[]).push([[504],{58176:function(e,t,a){a.r(t),t.default={"delete-confirm-modal-body":"avmkIDAN_delete-confirm-modal-body","delete-confirm-text":"ZaossPzc_delete-confirm-text","delete-confirm-modal-footer":"XlctXH4w_delete-confirm-modal-footer","delete-confirm-modal":"mvC8bIYZ_delete-confirm-modal",delete_content:"xWk32Shl_delete_content",desc:"WbBnVV9C_desc"}},84548:function(e,t,a){a.r(t),t.default={common_card_wrapper:"c6XDQGJ9_common_card_wrapper",container:"-TiBgXPs_container",item:"_9O+mDSJy_item",num:"DBOZi6yc_num",label:"jz59CPS2_label"}},68848:function(e,t,a){a.r(t),t.default={color_select:"_1HkjQSHw_color_select",title:"crbQCtIx_title",value:"PnRDTUl3_value"}},64120:function(e,t,a){a.r(t),t.default={wrapper:"-JCQQuwM_wrapper",switch_item:"Phy-AljC_switch_item",label:"ldLo2r85_label",btn_area:"svTybwIV_btn_area",tips:"uaS3owjX_tips"}},12380:function(e,t,a){a.r(t),t.default={setting_wrapper:"pyZNxWiK_setting_wrapper",side:"S--Nuun1_side",content:"lnsJ0Pyn_content"}},72348:function(e,t,a){a.r(t),t.default={theme_config:"W8BT-C7u_theme_config",container:"HdNcaduD_container",config_title:"bNoDmAwh_config_title",config_content:"j+qJ8tVW_config_content",field_wrapper:"Bq-XkmpI_field_wrapper",field_title:"wLTUQVNO_field_title",nav_style:"jWf9S1Lr_nav_style",nav_style_item:"DHGEcusF_nav_style_item",img:"rxFnD4nW_img",desc:"CWl-YZYP_desc",img_nav_bg_bar:"kqDT9xDf_img_nav_bg_bar",active:"Gn7s8G7Y_active",field_group:"_6pbo98be_field_group",field:"sgU2ska3_field",field_title_wrapper:"DvLuR2WN_field_title_wrapper",field_name_title:"_94ZuOj8h_field_name_title",tip:"Q4U9Q21B_tip",field_color_title:"dI+Cn10c_field_color_title",footer:"Hgn1pe1b_footer"}},70996:function(e,t,a){a.r(t),t.default={user_info:"_2T756X+h_user_info",item:"zopCz4ml_item",title:"WprfM4Ce_title",table:"avPrKPbU_table",container:"ytQm31U8_container"}},79420:function(e,t,a){a.r(t),t.default={user_info_body:"_2ryGvqRp_user_info_body",info:"Gtz0I9O8_info",usr:"T6E-9p+b_usr",title:"VS5ufCi4_title",campany:"_1G62QM17_campany",item:"WNotWEVK_item",login_out:"IeDe28cG_login_out"}},65996:function(e,t,a){a.r(t),t.default={using_container:"_1IML9IB2_using_container",card:"C8xq6ijN_card"}},71124:function(e,t,a){a(25028)(t,"__esModule",{value:!0}),t.UPLOAD_IMAGE_URL=void 0;t.UPLOAD_IMAGE_URL="nocode/v2/nocode_sys/image"},44988:function(e,t,a){var l=a(13568),n=a(93252),u=a(25028),r=a(4884),o=a(9564);u(t,"__esModule",{value:!0}),t.default=t.InputConfirmModal=void 0;var c=o(a(25288)),i=o(a(78912)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=l(e)&&"function"!=typeof e)return{default:e};var a=p(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},o=u&&r;for(var c in e)if("default"!==c&&Object.prototype.hasOwnProperty.call(e,c)){var i=o?r(e,c):null;i&&(i.get||i.set)?u(n,c,i):n[c]=e[c]}return n.default=e,a&&a.set(e,n),n}(a(65984)),f=a(63548),s=a(82416),m=o(a(22304)),v=o(a(58176));function p(e){if("function"!=typeof n)return null;var t=new n,a=new n;return(p=function(e){return e?a:t})(e)}var _=function(e){var t=e.text,a=e.onCancel,l=e.onConfirm;return d.default.createElement(d.default.Fragment,null,d.default.createElement("div",{className:v.default["delete-confirm-modal-body"]},d.default.createElement("img",{src:m.default,width:168,height:96,alt:"确认删除"}),d.default.createElement("div",{className:v.default["delete-confirm-text"]},t)),d.default.createElement("div",{className:v.default["delete-confirm-modal-footer"]},d.default.createElement(f.Button,{size:"middle",onClick:a,style:{marginRight:"24px"}},"取消"),d.default.createElement(f.Button,{size:"middle",type:"primary",onClick:l},"确定")))};(t.InputConfirmModal=(0,d.memo)((function(e){var t=e.visible,a=void 0===t||t,l=e.type,n=void 0===l?"delete":l,u=e.title,r=e.desc,o=e.disabledActions,m=e.label,p=(e.requireInput,e.validateMsg),_=void 0===p?"请输入":p,g=e.onAction,E=f.Form.useForm(),h=(0,i.default)(E,1)[0],b=(0,d.useState)(),y=(0,i.default)(b,2),C=y[0],w=y[1],N=(0,d.useCallback)((function(e){h.validateFields().then((function(){null==g||g(e,C)})).catch((function(t){null==g||g(e)}))}),[g,C]);return d.default.createElement(s.ConfirmModal,{visible:a,type:n,disabledActions:o,title:u,content:d.default.createElement("div",{className:v.default.delete_content},d.default.createElement("div",{className:v.default.desc},r),d.default.createElement(f.Form,{layout:"vertical",form:h,labelWidth:"100%",wrapperWidth:"100%"},d.default.createElement(f.Form.Item,{label:m||"请输入",name:"name",required:!0,validateTrigger:"onBlur",rules:[{required:!0,message:_},{type:"string",validator:function(e,t,a,l,n){return null!=t&&(0,c.default)(t).call(t)?[]:[new Error(_)]}}]},d.default.createElement(f.Input,{type:"text",borderType:"bordered",size:"large",placeholder:"请输入",maxLength:50,value:C,onChange:function(e){return w(e.target.value)}})))),onAction:N})}))).displayName="InputConfirmModal";t.default=function(e){var t=e.visible,a=e.text,l=e.onConfirm,n=e.onCancel,u=e.onVisibleChange,r=(0,d.useState)(t),o=(0,i.default)(r,2),c=o[0],s=o[1];(0,d.useEffect)((function(){c!==t&&s(t)}),[t]);return d.default.createElement(f.Modal,{className:v.default["delete-confirm-modal"],showline:!1,title:null,body:d.default.createElement(_,{text:a,onCancel:function(){s(!1),u(!1),null==n||n()},onConfirm:function(){s(!1),u(!1),null==l||l()}}),footer:null,closable:!1,width:480,visible:t,keyboard:!1})}},64816:function(e,t,a){var l=a(13568),n=a(93252),u=a(25028),r=a(4884),o=a(9564);u(t,"__esModule",{value:!0}),t.default=void 0;var c=o(a(23992)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=l(e)&&"function"!=typeof e)return{default:e};var a=s(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},o=u&&r;for(var c in e)if("default"!==c&&Object.prototype.hasOwnProperty.call(e,c)){var i=o?r(e,c):null;i&&(i.get||i.set)?u(n,c,i):n[c]=e[c]}return n.default=e,a&&a.set(e,n),n}(a(65984)),d=o(a(2500)),f=o(a(84548));function s(e){if("function"!=typeof n)return null;var t=new n,a=new n;return(s=function(e){return e?a:t})(e)}var m=(0,i.memo)((function(e){var t=e.title,a=e.list,l=e.itemWidth,n=e.className;return i.default.createElement(d.default,{wrapperClassName:n,className:f.default.common_card_wrapper,title:t},i.default.createElement("div",{className:f.default.container},null==a?void 0:(0,c.default)(a).call(a,(function(e){var t=e.num,a=e.label;return i.default.createElement("div",{className:f.default.item,style:{width:l},key:a},i.default.createElement("div",{className:f.default.num},t),i.default.createElement("div",{className:f.default.label},a))}))))}));m.displayName="CommonStatisticCard";t.default=m},32656:function(e,t,a){var l=a(13568),n=a(93252),u=a(25028),r=a(4884),o=a(9564);u(t,"__esModule",{value:!0}),t.default=void 0;var c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=l(e)&&"function"!=typeof e)return{default:e};var a=s(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},o=u&&r;for(var c in e)if("default"!==c&&Object.prototype.hasOwnProperty.call(e,c)){var i=o?r(e,c):null;i&&(i.get||i.set)?u(n,c,i):n[c]=e[c]}return n.default=e,a&&a.set(e,n),n}(a(65984)),i=o(a(71252)),d=a(82416),f=o(a(68848));function s(e){if("function"!=typeof n)return null;var t=new n,a=new n;return(s=function(e){return e?a:t})(e)}var m=(0,c.memo)((function(e){var t=e.title,a=e.value,l=e.className,n=e.onChange;return c.default.createElement("div",{className:(0,i.default)(l,f.default.color_select)},c.default.createElement("div",{className:f.default.title},t),c.default.createElement("div",{className:f.default.value},c.default.createElement(d.ColorPicker,{value:a,onChange:n})))}));t.default=m},50892:function(e,t,a){var l=a(13568),n=a(13939),u=a(34716),r=a(70696),o=a(4884),c=a(3464),i=a(51400),d=a(25028),f=a(93252),s=a(9564);d(t,"__esModule",{value:!0}),t.default=void 0;var m=s(a(25288)),v=s(a(96631)),p=s(a(78912)),_=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=l(e)&&"function"!=typeof e)return{default:e};var a=N(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},u=d&&o;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var c=u?o(e,r):null;c&&(c.get||c.set)?d(n,r,c):n[r]=e[r]}return n.default=e,a&&a.set(e,n),n}(a(65984)),g=a(63548),E=s(a(71252)),h=s(a(64120)),b=a(66028),y=s(a(85744)),C=s(a(72492)),w=a(57264);function N(e){if("function"!=typeof f)return null;var t=new f,a=new f;return(N=function(e){return e?a:t})(e)}function k(e,t){var a=n(e);if(u){var l=u(e);t&&(l=r(l).call(l,(function(t){return o(e,t).enumerable}))),a.push.apply(a,l)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){(0,v.default)(e,t,a[t])})):c?i(e,c(a)):k(Object(a)).forEach((function(t){d(e,t,o(a,t))}))}return e}var I="请输入角色名称",S="name",M=(0,_.memo)((function(e){var t=e.className,a=e.height,l=e.role,n=void 0===l?{}:l,u=e.confirmLocked,r=e.onConfirm,o=g.Form.useForm(),c=(0,p.default)(o,1)[0],i=(0,_.useReducer)(b.assignDataReducer,n),d=(0,p.default)(i,2),f=d[0],s=d[1];(0,_.useEffect)((function(){s(n),c.setFieldsValue({name:null==n?void 0:n.name})}),[n]);var v=(0,_.useCallback)((function(e){s({manage:e,userScope:[],orgScope:[]})}),[]),N=(0,_.useCallback)((function(){var e=c.getFieldValue(S);e?f.manage||f.orgScope.length||f.userScope.length?null==r||r(x(x({},f),{},{name:e})):(0,w.showNotice)("warnning","请至少选择一个可授权组织或人员"):(0,w.showNotice)("warnning",I)}),[f]);return _.default.createElement("div",{className:(0,E.default)(h.default.wrapper,t),style:{minHeight:a-24}},n&&_.default.createElement(_.default.Fragment,null,_.default.createElement(g.Form,{layout:"vertical",form:c,labelWidth:"100%",wrapperWidth:"100%"},_.default.createElement(g.Form.Item,{label:_.default.createElement("span",{title:"角色的名称"},"角色名称"),name:S,required:!0,validateTrigger:"onBlur",rules:[{required:!0,message:I},{type:"string",validator:function(e,t){return null!=t&&(0,m.default)(t).call(t)?[]:[new Error(I)]}}]},_.default.createElement(g.Input,{type:"text",borderType:"bordered",size:"large",placeholder:"请输入角色名称",maxLength:30,onChange:function(e){return s({name:e.target.value})}})),_.default.createElement(g.Form.Item,{label:_.default.createElement("span",{title:"角色的描述"},"描述"),name:"desc"},_.default.createElement(g.Input,{type:"text",borderType:"bordered",size:"large",placeholder:"请输入描述",maxLength:50,value:f.desc,onChange:function(e){return s({desc:e.target.value})}})),_.default.createElement(g.Form.Item,{label:_.default.createElement("span",{title:"选择可以使用该角色的组织"},"授权组织"),name:"orgs"},_.default.createElement(C.default,{value:f.orgs,onChange:function(e){return s({orgs:e})}})),_.default.createElement(g.Form.Item,{label:_.default.createElement("span",{title:"选择可以使用该角色的人员"},"授权人员"),name:"users"},_.default.createElement(y.default,{value:f.users,onChange:function(e){return s({users:e})}})),_.default.createElement(g.Form.Item,{className:h.default.switch_item,label:_.default.createElement("span",{className:h.default.label,title:"设置角色的平台管理权"},"平台管理权",_.default.createElement("div",{className:h.default.tips},"（具备平台的使用管理、权限管理和应用创建等权限）")),name:"manage"},_.default.createElement(g.Switch,{checked:f.manage,onChange:v})),!f.manage&&_.default.createElement(_.default.Fragment,null,_.default.createElement(g.Form.Item,{className:h.default.switch_item,label:_.default.createElement("span",{title:"设置角色的应用创建权"},"应用创建权"),name:"create"},_.default.createElement(g.Switch,{checked:f.create,disabled:!0,onChange:function(e){return s({appCreate:e})}})),_.default.createElement(g.Form.Item,{label:_.default.createElement("span",{title:"设置角色在应用可授权的组织"},"应用可授权组织"),name:"orgScope"},_.default.createElement(C.default,{value:f.orgScope,onChange:function(e){return s({orgScope:e})}})),_.default.createElement(g.Form.Item,{label:_.default.createElement("span",{title:"设置角色在应用可授权的人员"},"应用可授权人员"),name:"userScope"},_.default.createElement(y.default,{value:f.userScope,onChange:function(e){return s({userScope:e})}})))),_.default.createElement("div",{className:h.default.btn_area},_.default.createElement(g.Button,{type:"primary",onClick:N,disabled:u},"保存"))))}));M.displayName="PlatformRoleSetting";t.default=M},37500:function(e,t,a){var l=a(13568),n=a(13939),u=a(34716),r=a(70696),o=a(4884),c=a(3464),i=a(51400),d=a(25028),f=a(93252),s=a(9564);d(t,"__esModule",{value:!0}),t.newRole=t.default=void 0;var m=s(a(23992)),v=s(a(29052)),p=s(a(96631)),_=s(a(94924)),g=s(a(78912)),E=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=l(e)&&"function"!=typeof e)return{default:e};var a=x(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},u=d&&o;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var c=u?o(e,r):null;c&&(c.get||c.set)?d(n,r,c):n[r]=e[r]}return n.default=e,a&&a.set(e,n),n}(a(65984)),h=s(a(84692)),b=s(a(50892)),y=s(a(12380)),C=a(25096),w=a(57264),N=a(44988),k=a(76004);function x(e){if("function"!=typeof f)return null;var t=new f,a=new f;return(x=function(e){return e?a:t})(e)}function I(e,t){var a=n(e);if(u){var l=u(e);t&&(l=r(l).call(l,(function(t){return o(e,t).enumerable}))),a.push.apply(a,l)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){(0,p.default)(e,t,a[t])})):c?i(e,c(a)):I(Object(a)).forEach((function(t){d(e,t,o(a,t))}))}return e}var M=t.newRole={name:"未命名角色",desc:"",users:[],orgs:[],manage:!0,create:!0,userScope:[],orgScope:[]},F=(0,E.memo)((function(e){var t,a,l=e.modalHeight,n=(0,E.useState)(M),u=(0,g.default)(n,2),r=u[0],o=u[1],c=(0,E.useState)([]),i=(0,g.default)(c,2),d=i[0],f=i[1],s=(0,E.useState)(""),p=(0,g.default)(s,2),x=p[0],I=p[1],F=(0,E.useState)([]),O=(0,g.default)(F,2),R=O[0],L=O[1],P=(0,E.useState)(!1),A=(0,g.default)(P,2),T=A[0],D=A[1],U=(0,E.useState)(!1),W=(0,g.default)(U,2),z=W[0],B=W[1],q=(0,E.useRef)(null);(0,E.useEffect)((function(){H()}),[]),(0,E.useEffect)((function(){x?Y(x):o(null)}),[x]);var H=function(){var e=(0,_.default)(v.default.mark((function e(t){var a,l,n,u;return v.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,C.getManageRoleList)();case 3:a=e.sent,l=a.rows,f(n=void 0===l?[]:l),I(t||((null==n||null===(u=n[0])||void 0===u?void 0:u.id)||"")),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),(0,w.showNotice)("error",(null===e.t0||void 0===e.t0?void 0:e.t0.message)||"加载失败");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),G=(0,E.useCallback)(function(){var e=(0,_.default)(v.default.mark((function e(t,a){var l,n,u,r,o,c;return v.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l={data:[t]},e.prev=1,e.next=4,(0,C.saveManageRole)(l);case 4:n=e.sent,u=n.failCount,r=n.result,"0"===u&&((0,w.showNotice)("success",a||"新增角色成功"),c=null==r||null===(o=r[0])||void 0===o?void 0:o.id,H(c)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),(0,w.showNotice)("error",j(e.t0));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,a){return e.apply(this,arguments)}}(),[H]),V=(0,E.useCallback)((function(){G(M,"新增角色成功")}),[G]),Q=(0,E.useCallback)((0,_.default)(v.default.mark((function e(){var t,a,l,n,u;return v.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(L(["ok","cancel"]),t=(0,w.showLoadingMessage)("角色删除中，请稍候..."),a=q.current.id){e.next=5;break}return e.abrupt("return");case 5:return l=x,x===a&&(l=(0,k.getNextSelectedId)(a,d)),n=[{id:a}],e.prev=8,e.next=11,(0,C.deleteManageRole)(n);case 11:u=e.sent,"0"===u.failCount&&(t({type:"success",content:"删除成功"}),D(!1),H(l)),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(8),t({type:"error",content:(null===e.t0||void 0===e.t0?void 0:e.t0.message)||"删除失败"});case 19:L([]);case 20:case"end":return e.stop()}}),e,null,[[8,16]])}))),[x,H,null===(t=q.current)||void 0===t?void 0:t.id]),X=(0,E.useCallback)((function(e,t){var a;"ok"===e?t===(null===(a=q.current)||void 0===a?void 0:a.name)?Q():(0,w.showNotice)("error","名称输入错误，删除失败"):D(!1)}),[Q]),Z=(0,E.useCallback)((function(e){D(!0),q.current=e}),[]),J=(0,E.useCallback)((function(e){var t=e.id;G({id:t,copy:!0},"复制角色成功")}),[]),K=function(){var e=(0,_.default)(v.default.mark((function e(t){var a,l;return v.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={data:(0,m.default)(t).call(t,(function(e){return{id:e.id}})),reorder:!0},e.prev=1,e.next=4,(0,C.saveManageRole)(a);case 4:l=e.sent,"0"===l.failCount&&(0,w.showNotice)("success","排序成功"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),(0,w.showNotice)("error",(null===e.t0||void 0===e.t0?void 0:e.t0.message)||"排序失败");case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=(0,_.default)(v.default.mark((function e(t){var a,l,n;return v.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,(0,C.getManageRoleDetail)(t);case 5:a=e.sent,l=a.rows,o((n=void 0===l?[]:l)[0]?S(S({},M),n[0]):null),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),(0,w.showNotice)("error",(null===e.t0||void 0===e.t0?void 0:e.t0.message)||"排序失败");case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),$=(0,E.useCallback)(function(){var e=(0,_.default)(v.default.mark((function e(t){var a,l,n,u,r,o,c;return v.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return B(!0),a=(0,w.showLoadingMessage)("保存中，请稍候..."),e.prev=2,l={data:[t]},e.next=6,(0,C.saveManageRole)(l);case 6:n=e.sent,u=n.failCount,r=n.result,"0"===u&&(a({type:"success",content:"保存成功"}),c=null==r||null===(o=r[0])||void 0===o?void 0:o.id,H(c),B(!1)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),a({type:"error",content:j(e.t0)}),B(!1);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}(),[G]);return E.default.createElement("div",{className:y.default.setting_wrapper},E.default.createElement(h.default,{activeRoleId:x,setActiveRoleId:I,roleList:d,onAdd:V,onDelete:Z,onCopy:J,onSort:K}),E.default.createElement("div",{className:y.default.content},E.default.createElement(b.default,{height:l-48,role:r,onConfirm:$,confirmLocked:z,key:null==r?void 0:r.id})),T&&E.default.createElement(N.InputConfirmModal,{title:'确定要删除角色"'.concat((null===(a=q.current)||void 0===a?void 0:a.name)||"",'"吗？'),desc:"删除角色后，该角色授权的组织、人员权限将一并删除，不可恢复",disabledActions:R,label:"请输入该角色名称",validateMsg:"请输入该角色名称",onAction:X}))})),j=function(e){var t,a=e.data,l=e.message;return(null==a||null===(t=a.result)||void 0===t||null===(t=t[0])||void 0===t||null===(t=t.errors)||void 0===t||null===(t=t[0])||void 0===t||null===(t=t.rowMsg)||void 0===t?void 0:t[0])||l};F.displayName="RoleSettingModalLayout";t.default=F},23324:function(e,t,a){var l=a(13568),n=a(93252),u=a(25028),r=a(4884),o=a(9564);u(t,"__esModule",{value:!0}),t.default=void 0;var c=o(a(50524)),i=o(a(23992)),d=o(a(760)),f=o(a(96631)),s=o(a(99148)),m=o(a(78912)),v=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=l(e)&&"function"!=typeof e)return{default:e};var a=S(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},o=u&&r;for(var c in e)if("default"!==c&&Object.prototype.hasOwnProperty.call(e,c)){var i=o?r(e,c):null;i&&(i.get||i.set)?u(n,c,i):n[c]=e[c]}return n.default=e,a&&a.set(e,n),n}(a(65984)),p=a(63548),_=o(a(72348)),g=a(82416),E=o(a(71252)),h=o(a(89515)),b=o(a(51492)),y=o(a(32528)),C=a(71124),w=a(57264),N=a(62012),k=a(95936),x=o(a(32656)),I=a(16428);function S(e){if("function"!=typeof n)return null;var t=new n,a=new n;return(S=function(e){return e?a:t})(e)}t.default=(0,v.memo)((function(e){var t,a=e.visible,l=e.onClose,n=e.appId,u=void 0===n?"":n,r=e.formId,o=void 0===r?"":r,S=(0,v.useContext)(N.ThemeContext)||{},M=((0,v.useContext)(k.Context)||{}).state,F=S.theme,j=S.onThemeChange,O=S.onThemeConfirm,R=S.onResetTheme,L=S.onInitTheme,P=(0,v.useState)(""),A=(0,m.default)(P,2),T=A[0],D=A[1],U=(0,v.useState)(""),W=(0,m.default)(U,2),z=W[0],B=W[1],q=(0,v.useState)(""),H=(0,m.default)(q,2),G=H[0],V=H[1],Q=(0,v.useState)(""),X=(0,m.default)(Q,2),Z=X[0],J=X[1],K=(0,v.useState)(""),Y=(0,m.default)(K,2),$=Y[0],ee=Y[1],te=(0,v.useState)(""),ae=(0,m.default)(te,2),le=ae[0],ne=ae[1],ue=(0,v.useState)(""),re=(0,m.default)(ue,2),oe=re[0],ce=re[1],ie=(0,v.useState)(""),de=(0,m.default)(ie,2),fe=de[0],se=de[1],me=(0,v.useState)(""),ve=(0,m.default)(me,2),pe=ve[0],_e=ve[1],ge=(0,v.useState)([]),Ee=(0,m.default)(ge,2),he=Ee[0],be=Ee[1];(0,v.useEffect)((function(){var e=F||{},t=e.themeColor,a=e.infoColor,l=e.successColor,n=e.warningColor,u=e.errorColor,r=e.navStyle,o=e.logo,i=e.platformName,d=e.platformNameColor;(0,I.unstable_batchedUpdates)((function(){var e;B(t),V(a),J(l),ee(n),ne(u),ce(i),se(d),_e(o),!(0,c.default)(o).call(o,"/".concat("ncp","/"))&&be([{uid:"-1",name:"image1.png",status:"success",size:1234,url:(0,c.default)(o).call(o,"data:image")?o:(null==M||null===(e=M.fileServer)||void 0===e?void 0:e.imageUrl)+o}]),D(r)}))}),[F,null==M?void 0:M.fileServer]);var ye=(0,v.useMemo)((function(){return{themeColor:z,infoColor:G,successColor:Z,warningColor:$,errorColor:le,navStyle:T,logo:pe,platformName:oe,platformNameColor:fe}}),[T,pe,z,G,Z,$,le,T,oe,fe]),Ce=(0,v.useCallback)((function(e){null==j||j({themeColor:e}),B(e)}),[j]),we=(0,v.useCallback)((function(e){null==j||j({successColor:e}),J(e)}),[j]),Ne=(0,v.useCallback)((function(e){null==j||j({infoColor:e}),V(e)}),[j]),ke=(0,v.useCallback)((function(e){null==j||j({warningColor:e}),ee(e)}),[j]),xe=(0,v.useCallback)((function(e){null==j||j({errorColor:e}),ne(e)}),[j]),Ie=(0,v.useCallback)((function(e){null==j||j({platformNameColor:e}),se(e)}),[j]),Se=(0,v.useCallback)((function(e){new RegExp("[`~!_+@#$^&*()=|{}':;',\\[\\].<>《》/?~！@#￥……&*（）——|{}【】‘；：”“'。，、？]").test(e)||(null==j||j({platformName:e}),ce(e))}),[j]),Me=(0,v.useCallback)((function(e){var t;D(e),j({navStyle:e}),null===(t=document.querySelector("html"))||void 0===t||t.setAttribute("data-theme",e)}),[j]),Fe=(0,v.useCallback)((function(){O(ye,l)}),[O,ye]),je=(0,v.useCallback)((function(){null==R||R(),be([])}),[R]),Oe=(0,v.useCallback)((function(){L(),l()}),[l,L]),Re=(0,v.useCallback)((function(e){var t=e.file,a=e.fileList;if("done"===t.status&&t.response.status){var l=t.uid,n=(t.name,t.size,t.response.data.url),u=(0,i.default)(a).call(a,(function(e){return e.uid===l&&(e.status="success"),e}));be((0,s.default)(u)),_e(n),j({logo:n})}}),[j]),Le=(0,v.useCallback)((function(e){if(be([]),null!=F&&F.logo)return _e(F.logo),j({logo:""}),!0}),[F,j]),Pe=(0,v.useMemo)((function(){return[{title:"主题色",value:z,onChange:Ce},{title:"信息色",value:G,onChange:Ne},{title:"成功色",value:Z,onChange:we},{title:"警示色",value:$,onChange:ke},{title:"错误色",value:le,onChange:xe}]}),[z,G,Z,$,le,xe,ke,Ne,Ce]);return v.default.createElement(p.Drawer,{placement:"right",visible:a,onClose:Oe,destroyOnClose:!0,title:"主题配置",width:480,mask:!1,keyboard:!1,className:_.default.theme_config},v.default.createElement("div",{className:_.default.container},v.default.createElement("div",{className:_.default.config_title},"色彩配置"),v.default.createElement("div",{className:_.default.config_content},(0,i.default)(Pe).call(Pe,(function(e,t){var a=e.title,l=e.value,n=e.onChange;return v.default.createElement(x.default,{key:t,title:a,value:l,className:_.default.field_wrapper,onChange:n})}))),v.default.createElement("div",{className:_.default.config_title},"品牌配置"),v.default.createElement("div",{className:_.default.field_title},"导航栏风格"),v.default.createElement("div",{className:_.default.nav_style},v.default.createElement("div",{className:(0,E.default)(_.default.nav_style_item,(0,f.default)({},_.default.active,"light"===T))},v.default.createElement("img",{src:y.default,className:_.default.img,onClick:function(){return Me("light")}}),v.default.createElement("div",{className:_.default.desc},"浅色")),v.default.createElement("div",{className:(0,E.default)(_.default.nav_style_item,(0,f.default)({},_.default.active,"dark"===T))},v.default.createElement("img",{src:b.default,className:_.default.img,onClick:function(){return Me("dark")}}),v.default.createElement("div",{className:_.default.desc},"深色")),v.default.createElement("div",{className:(0,E.default)(_.default.nav_style_item,(0,f.default)({},_.default.active,"theme"===T))},v.default.createElement("img",{src:h.default,className:_.default.img,onClick:function(){return Me("theme")}}),v.default.createElement("div",{className:_.default.desc},"跟随主题"),v.default.createElement("i",{className:_.default.img_nav_bg_bar,style:{backgroundColor:z}}))),v.default.createElement("div",null,v.default.createElement("div",null)),v.default.createElement("div",{className:_.default.field_title},"Logo"),v.default.createElement("div",null,v.default.createElement(g.Picture,{fileList:he,uploadNum:{max:1},noticeInfo:"建议上传小于200K的png图片",onRemove:Le,onChange:Re,enablePreview:!0,action:(0,w.getFullImageUrl)(C.UPLOAD_IMAGE_URL),data:{action:"upload",tempstorage:!1},accept:".jpg,.jpeg,.png"})),v.default.createElement("div",{className:_.default.field_group},v.default.createElement("div",{className:_.default.field},v.default.createElement("div",{className:_.default.field_title_wrapper},v.default.createElement("div",{className:_.default.field_name_title},"平台名称"),v.default.createElement(p.Tooltip,{tip:"请设置不超过12个字的平台名称"},v.default.createElement(p.Icon,{type:"wenhao",prefix:"nocodeplatformicon",className:_.default.tip}))),v.default.createElement(g.Text,{value:oe,maxLength:12,onChange:Se,borderType:"bordered"})),v.default.createElement(x.default,{title:"平台名称文字色",value:fe,onChange:Ie}))),v.default.createElement("div",{className:_.default.footer},v.default.createElement(g.BtnField,{text:"恢复默认",size:"small",onClick:je}),v.default.createElement(g.BtnField,{type:"primary",text:"确定",size:"small","data-nc-action":(0,d.default)(t="".concat(u,"|")).call(t,o,"|ts_comf"),onClick:Fe})))}))},86920:function(e,t,a){var l=a(25028),n=a(9564);l(t,"__esModule",{value:!0}),t.default=void 0;var u=n(a(23992)),r=n(a(65984)),o=a(82416),c=n(a(70996));t.default=r.default.memo((function(e){var t,a=e.data;return r.default.createElement("div",{className:c.default.user_info},r.default.createElement("div",null,r.default.createElement("div",{className:c.default.item},r.default.createElement("div",{className:c.default.title},"员工编号"),r.default.createElement("div",null,(null==a?void 0:a.number)||"-")),r.default.createElement("div",{className:c.default.item},r.default.createElement("div",{className:c.default.title},"姓名"),r.default.createElement("div",null,(null==a?void 0:a.name)||"-"))),r.default.createElement("div",null,r.default.createElement("div",{className:c.default.item},r.default.createElement("div",{className:c.default.title},"头像"),r.default.createElement(o.Avatar,{src:null==a?void 0:a.avatar,alt:""})),r.default.createElement("div",{className:c.default.item},r.default.createElement("div",{className:c.default.title},"性别"),r.default.createElement("div",null,(null==a?void 0:a.gender)||"-"))),r.default.createElement("div",null,r.default.createElement("div",{className:c.default.item},r.default.createElement("div",{className:c.default.title},"生日"),r.default.createElement("div",null,(null==a?void 0:a.birthday)||"-")),r.default.createElement("div",{className:c.default.item},r.default.createElement("div",{className:c.default.title},"手机号"),r.default.createElement("div",null,(null==a?void 0:a.phone)||"-"))),r.default.createElement("div",null,r.default.createElement("div",{className:c.default.item},r.default.createElement("div",{className:c.default.title},"邮箱"),r.default.createElement("div",null,(null==a?void 0:a.email)||"-"))),(null==a?void 0:a.orgs)&&(null==a?void 0:a.orgs.length)>0&&r.default.createElement("div",{className:c.default.table},r.default.createElement("table",{cellSpacing:1,cellPadding:1},r.default.createElement("tr",null,r.default.createElement("th",null,"所属组织编码"),r.default.createElement("th",null,"组织名称")),null==a||null===(t=a.orgs)||void 0===t?void 0:(0,u.default)(t).call(t,(function(e,t){return r.default.createElement("tr",{key:e.orgNum+t},r.default.createElement("td",null,e.orgNum),r.default.createElement("td",null,e.orgName))})))))}))},32504:function(e,t,a){var l=a(13568),n=a(93252),u=a(25028),r=a(4884),o=a(9564);u(t,"__esModule",{value:!0}),t.default=void 0;var c=o(a(50524)),i=o(a(760)),d=o(a(78912)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=l(e)&&"function"!=typeof e)return{default:e};var a=C(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},o=u&&r;for(var c in e)if("default"!==c&&Object.prototype.hasOwnProperty.call(e,c)){var i=o?r(e,c):null;i&&(i.get||i.set)?u(n,c,i):n[c]=e[c]}return n.default=e,a&&a.set(e,n),n}(a(65984)),s=a(63548),m=a(82416),v=o(a(79420)),p=o(a(23324)),_=a(57264),g=o(a(86920)),E=o(a(37500)),h=o(a(15940)),b=o(a(40436)),y=a(25096);function C(e){if("function"!=typeof n)return null;var t=new n,a=new n;return(C=function(e){return e?a:t})(e)}var w=(0,f.lazy)((function(){return a.e(656).then(a.t.bind(a,51e3,23))})),N=(0,_.getModalHeight)(),k=["center","company"],x=(0,f.forwardRef)((function(e,t){var a,l,n=e.data,u=void 0===n?{}:n,r=e.setVisible,o=e.handleClickTheme,C=e.handleClickLogout,x=e.appId,I=void 0===x?"":x,S=e.formId,M=void 0===S?"":S,F=(0,f.useState)(!1),j=(0,d.default)(F,2),O=j[0],R=j[1],L=(0,b.default)(),P=L.state,A=L.dispatch,T=(P.userInfo||{}).isAdminUser,D=(0,f.useCallback)((function(){if(o)return o();R(!0)}),[o]),U=(0,f.useCallback)((function(){R(!1)}),[]),W=(0,f.useCallback)((function(){var e=(0,_.autoModalHeight)(520,640,640,f.default.createElement(g.default,{data:u}));s.Modal.confirm({title:"个人中心",showline:!0,footer:null,titleIcon:null,width:640,height:e,type:"normal",bodyStyle:{padding:0,overflow:"hidden"},body:f.default.createElement(f.Suspense,{fallback:f.default.createElement(f.default.Fragment,null)},f.default.createElement(g.default,{data:u})),closable:!0,maskClosable:!1})}),[u]),z=function(e){return function(){if((0,c.default)(k).call(k,e)){switch(e){case"center":W();break;case"company":t=(0,_.autoModalHeight)(520,748),s.Modal.confirm({title:"企业管理",showline:!0,titleIcon:null,footer:null,width:960,height:t,type:"normal",bodyStyle:{padding:0,display:"flex",overflow:"hidden",flexBasis:0},body:f.default.createElement(f.Suspense,{fallback:f.default.createElement(f.default.Fragment,null)}," ",f.default.createElement(w,null)," "),closable:!0,maskClosable:!1})}r(!1)}else{var t;(0,y.getUserInfo)(A).then((function(t){var a;if(r(!1),((null==t||null===(a=t.rows)||void 0===a?void 0:a[0])||{}).isAdminUser)switch(e){case"role":s.Modal.confirm({title:"平台授权",showline:!0,titleIcon:null,footer:null,width:1112,height:N,type:"normal",bodyStyle:{padding:0,display:"flex",overflow:"hidden",flexBasis:0,backgroundColor:"#F8FAFC"},body:f.default.createElement(f.Suspense,{fallback:f.default.createElement(f.default.Fragment,null)}," ",f.default.createElement(E.default,{modalHeight:N})," "),closable:!0,maskClosable:!1});break;case"use":s.Modal.confirm({title:"使用管理",showline:!0,titleIcon:null,footer:null,width:960,height:216,type:"normal",bodyStyle:{padding:0,display:"flex",overflow:"hidden",flexBasis:0,backgroundColor:"#F8FAFC"},body:f.default.createElement(f.Suspense,{fallback:f.default.createElement(f.default.Fragment,null)}," ",f.default.createElement(h.default,null)," "),closable:!0,maskClosable:!1});break;case"thema":D()}else(0,_.showNotice)("warnning","暂无权限")}))}}},B=encodeURIComponent(window.location.pathname.replace(window.__domainurl__,"")),q=(0,i.default)(a="".concat(I||"","|")).call(a,M||"");return f.default.createElement("div",{className:v.default.user_info_body},f.default.createElement("div",{className:v.default.info},f.default.createElement(m.Avatar,{src:null==u?void 0:u.avatar,size:48}),f.default.createElement("div",{className:v.default.usr},f.default.createElement("p",{className:v.default.title},null==u?void 0:u.name),f.default.createElement("p",{className:v.default.campany},null==u?void 0:u.company))),f.default.createElement("div",{className:v.default.item,onClick:z("center"),"data-nc-action":"".concat(q,"|tb_menu_pc")},f.default.createElement("div",null,f.default.createElement(s.Icon,{prefix:"nocodeplatformicon",type:"gerenzhongxin"}),f.default.createElement("span",null,"个人中心")),f.default.createElement(s.Icon,{prefix:"nocodeplatformicon",type:"jinru"})),f.default.createElement("div",{className:v.default.item,onClick:z("company"),"data-nc-action":"".concat(q,"|tb_menu_em")},f.default.createElement("div",null,f.default.createElement(s.Icon,{prefix:"nocodeplatformicon",type:"qiyeguanli"}),f.default.createElement("span",null,"企业管理")),f.default.createElement(s.Icon,{prefix:"nocodeplatformicon",type:"jinru"})),T&&f.default.createElement(f.default.Fragment,null,f.default.createElement("div",{className:v.default.item,onClick:z("role")},f.default.createElement("div",null,f.default.createElement(s.Icon,{prefix:"nocodeplatformicon",type:"yingyongquanxian"}),f.default.createElement("span",null,"平台授权")),f.default.createElement(s.Icon,{prefix:"nocodeplatformicon",type:"jinru"})),f.default.createElement("div",{className:v.default.item,onClick:z("use")},f.default.createElement("div",null,f.default.createElement(s.Icon,{prefix:"nocodeplatformicon",type:"fenxi-xian"}),f.default.createElement("span",null,"使用管理")),f.default.createElement(s.Icon,{prefix:"nocodeplatformicon",type:"jinru"})),f.default.createElement("div",{className:v.default.item,onClick:z("thema"),"data-nc-action":"".concat(q,"|tb_menu_ts")},f.default.createElement("div",null,f.default.createElement(s.Icon,{prefix:"nocodeplatformicon",type:"diaoseban"}),f.default.createElement("span",null,"主题配置")),f.default.createElement(s.Icon,{prefix:"nocodeplatformicon",type:"jinru"}))),f.default.createElement("div",{className:v.default.login_out,onClick:C,"data-nc-action":"".concat(q,"|tb_out")},C?f.default.createElement(f.default.Fragment,null,f.default.createElement(s.Icon,{prefix:"nocodeplatformicon",type:"tuichu"}),"退出登录"):f.default.createElement("a",{href:(0,_.getUrlWithDataCenter)((0,i.default)(l="".concat(window.__domainurl__,"auth/logout.do?redirect=")).call(l,B)),target:"_self"},f.default.createElement(s.Icon,{prefix:"nocodeplatformicon",type:"tuichu"}),"退出登录")),O&&f.default.createElement(p.default,{appId:I,formId:M,onClose:U,visible:O}))}));t.default=(0,f.memo)(x)},15940:function(e,t,a){var l=a(13568),n=a(93252),u=a(25028),r=a(4884),o=a(9564);u(t,"__esModule",{value:!0}),t.default=void 0;var c=o(a(23992)),i=o(a(29052)),d=o(a(26048)),f=o(a(94924)),s=o(a(78912)),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=l(e)&&"function"!=typeof e)return{default:e};var a=g(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},o=u&&r;for(var c in e)if("default"!==c&&Object.prototype.hasOwnProperty.call(e,c)){var i=o?r(e,c):null;i&&(i.get||i.set)?u(n,c,i):n[c]=e[c]}return n.default=e,a&&a.set(e,n),n}(a(65984)),v=o(a(65996)),p=o(a(64816)),_=a(25096);function g(e){if("function"!=typeof n)return null;var t=new n,a=new n;return(g=function(e){return e?a:t})(e)}var E=function(e){return[{title:"使用",list:[{num:e.appNums,label:"应用总数"},{num:e.formNums,label:"表单总数（上限1000个）"}],itemWidth:446}]},h=(0,m.memo)((function(){var e=(0,m.useState)([]),t=(0,s.default)(e,2),a=t[0],l=t[1];return(0,m.useEffect)((0,f.default)(i.default.mark((function e(){var t,a,n;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_.getPaltInfo)();case 2:a=e.sent,(n=null==a||null===(t=a.rows)||void 0===t?void 0:t[0])&&l(E(n));case 5:case"end":return e.stop()}}),e)}))),[]),m.default.createElement("div",{className:v.default.using_container},null==a?void 0:(0,c.default)(a).call(a,(function(e){return m.default.createElement(p.default,(0,d.default)({className:v.default.card,key:e.title},e))})))}));h.displayName="UsingManageModal";t.default=h},22304:function(e,t,a){e.exports=a.p+"ncp/nocode/images/de44ebd290ec2b13546d.png"},51492:function(e,t,a){e.exports=a.p+"ncp/nocode/images/9e8477f9ad0247b0c43b.png"},89515:function(e,t,a){e.exports=a.p+"ncp/nocode/images/4c39cd1fe6f0e10812aa.png"},32528:function(e,t,a){e.exports=a.p+"ncp/nocode/images/9cc21593d40174af41d4.png"}}]);