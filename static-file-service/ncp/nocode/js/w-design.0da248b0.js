"use strict";(self.webpackChunknocode_platform=self.webpackChunknocode_platform||[]).push([[712],{17816:function(e,t,a){a.r(t),t.default={formheader:"N5mQvldk_formheader",formheader_mb:"GmLA48Qs_formheader_mb"}},56124:function(e,t,a){a.r(t),t.default={header:"EKFI1FZG_header",header_main:"o69fZx-U_header_main"}},20552:function(e,t,a){a.r(t),t.default={icon_pop:"L4d1n3Co_icon_pop",pop:"wDS8lVOy_pop",pop_main:"pM5A9eK0_pop_main",colors:"RHIwvsm9_colors",icons:"+e5WT0CW_icons","icon-item-f-style":"LUv9eLkI_icon-item-f-style","icon-item-f-style-active":"FbkEq6b8_icon-item-f-style-active"}},4200:function(e,t,a){a.r(t),t.default={pop:"js8Jd4ya_pop",avatar:"coK+fk++_avatar"}},62500:function(e,t,a){a.r(t),t.default={header_formname:"-l8F5Byn_header_formname",header_formname_input:"jZHRzDD-_header_formname_input",header_formname_editicon:"oSIYjYRW_header_formname_editicon"}},13246:function(e,t,a){a.r(t),t.default={header_iconmenu:"V9HBm0UE_header_iconmenu",header_iconmenu_item:"WO+6Ug6l_header_iconmenu_item",txt:"nsfAJW4N_txt",dropDownContent:"C5KkiAWE_dropDownContent",dropDownContent_shortcut:"EpVGicOG_dropDownContent_shortcut",dropDownContent_shortcut_name:"cmX7B94h_dropDownContent_shortcut_name",dropDownContent_shortcut_key:"_0ksj9FgZ_dropDownContent_shortcut_key",text_block:"k+rVwe4x_text_block",dropDownContent_setting:"Hf5BtD3p_dropDownContent_setting",dropDownContent_setting_header:"_7Xxo4SvG_dropDownContent_setting_header",title:"vRsI11hv_title",dropDownContent_setting_list:"l0PfQVKU_dropDownContent_setting_list",pd16:"G74MOBrN_pd16"}},45664:function(e,t,a){a.r(t),t.default={wrapper:"na4XqVfP_wrapper",designer_header:"q+luMOLg_designer_header","ml-4":"xLOoFh52_ml-4",leftnav:"tkM9+f8q_leftnav",leftnav_container:"Yr1O64De_leftnav_container",leftnav_container_appname:"-XxwKOZ3_leftnav_container_appname",leftnav_container_input:"Oqryz4GH_leftnav_container_input",leftnav_container_editicon:"+ngLHrAs_leftnav_container_editicon",mainnav:"M-KJn5yB_mainnav",selected:"dm+wQr7m_selected",rightnav:"ScBmty+p_rightnav",btn_group:"_1DtOJstv_btn_group",save_btn:"E4afXEha_save_btn",seperator:"_6re2UJq0_seperator",btn_dropdown:"caHLk9ty_btn_dropdown",isOpen:"nV9jktt2_isOpen","rightnav-preview":"_9JpLHwHh_rightnav-preview","rightnav-save":"kduHZi+K_rightnav-save",designer_container:"_91NWTgXR_designer_container",dropdown_panel:"+vamI9FO_dropdown_panel"}},94958:function(e,t,a){a.r(t),t.default={header_nav:"GWucqz0j_header_nav",header_nav_container:"Ovudhbpp_header_nav_container",header_nav_menu:"q2r5C6zu_header_nav_menu",header_nav_menu_item:"i1eYlHah_header_nav_menu_item",header_nav_menu_item_divider:"_4rcXUi6A_header_nav_menu_item_divider"}},38219:function(e,t,a){a.r(t),t.default={previewDrawer:"xa+JxNkw_previewDrawer",previewDrawer_header:"_0Y00Uccl_previewDrawer_header",previewDrawer_header_left:"_94E5LyOR_previewDrawer_header_left",previewDrawer_header_right:"iLn3TLma_previewDrawer_header_right",previewDrawer_header_right_item:"f0MFwGxo_previewDrawer_header_right_item",previewDrawer_body:"OwMLJETf_previewDrawer_body",previewDrawer_body_main:"_7NfsrbFG_previewDrawer_body_main",mobile:"_3tjLCE0q_mobile",previewDrawer_body_main_header:"_9H-iaskn_previewDrawer_body_main_header",previewDrawer_body_main_qrcode:"l5S1-9Q8_previewDrawer_body_main_qrcode",mask:"_0InI0WoP_mask"}},80796:function(e,t,a){a.r(t),t.default={previewQRcode:"_1X2dT0lb_previewQRcode",previewQRcode_title:"cvQ9OGf6_previewQRcode_title",previewQRcode_main:"_0eShNd7R_previewQRcode_main",previewQRcode_main_icon:"L9kGpJZb_previewQRcode_main_icon"}},58495:function(e,t,a){a.r(t),t.default={"nocode-save-template-modal":"_6F96kUhg_nocode-save-template-modal","nocode-save-template-modal-form-item-checkbox":"_1cAwLZM5_nocode-save-template-modal-form-item-checkbox","nocode-save-template-modal-footer":"s2nsVvte_nocode-save-template-modal-footer","nocode-save-template-modal-body":"+fqon2-X_nocode-save-template-modal-body","nocode-save-template-upload-wrapper":"qz3PdAnC_nocode-save-template-upload-wrapper","icon-selector":"lnxgyB0B_icon-selector","nocode-save-template-upload-desc":"Pc+XS6pH_nocode-save-template-upload-desc","checkbox-group":"ImKtv5OJ_checkbox-group",checkbox:"dHGjNzbj_checkbox"}},37064:function(e,t,a){a.r(t),t.default={loading_wrapper:"-Wi07ZPx_loading_wrapper",hidden:"f6VImrSN_hidden"}},4440:function(e,t,a){var n=a(25028),l=a(9564);n(t,"__esModule",{value:!0}),t.getFormData=function(e){return c.apply(this,arguments)},t.getFormMetaData=function(e){return f.apply(this,arguments)},t.setFormData=function(e){return d.apply(this,arguments)};var r=l(a(29052)),u=l(a(760)),o=l(a(94924)),i=a(50460);function c(){return(c=(0,o.default)(r.default.mark((function e(t){var a,n,l,o,c;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.appId,l=t.targetFormId,o=(0,u.default)(a="nocode/v2/".concat(n,"/form/")).call(a,l),e.next=4,(0,i.get)(o,{});case 4:return c=e.sent,e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){return(d=(0,o.default)(r.default.mark((function e(t){var a,n,l,o,c,d;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.appId,l=t.targetFormId,o=t.params,c=(0,u.default)(a="nocode/v2/".concat(n,"/")).call(a,l),e.next=4,(0,i.post)(c,{data:o});case 4:return d=e.sent,e.abrupt("return",d);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){return(f=(0,o.default)(r.default.mark((function e(t){var a,n,l,o,c;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.appId,l=t.targetFormId,o=(0,u.default)(a="nocode/v2/".concat(n,"/form/")).call(a,l,"?metadata=true"),e.next=4,(0,i.get)(o,{});case 4:return c=e.sent,e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},59876:function(e,t,a){a(25028)(t,"__esModule",{value:!0}),t.DEFAULT_FORM_IMAGE=t.DEFAULT_APP_IMAGE=void 0;t.DEFAULT_APP_IMAGE="nocode/v2/nocode_sys/common/svgs/create_svg?color=%233987ED&svg=svg18",t.DEFAULT_FORM_IMAGE="nocode/v2/nocode_sys/common/svgs/create_svg_line?color=%233987ED&svg=svg64"},75020:function(e,t,a){var n=a(25028),l=a(9564);n(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=(0,u.useRef)({fn:e,timer:null}).current,l=(0,u.useRef)(!0);return(0,u.useEffect)((function(){n.fn=e}),[e]),(0,u.useCallback)((function(){for(var e=arguments.length,u=new Array(e),o=0;o<e;o++)u[o]=arguments[o];n.timer&&clearTimeout(n.timer),a&&l.current&&(l.current=!1,n.fn.apply(n,u)),n.timer=(0,r.default)((function(){n.fn.apply(n,u)}),t)}),[e])};var r=l(a(67584)),u=a(65984)},29588:function(e,t,a){var n=a(25028),l=a(9564);n(t,"__esModule",{value:!0}),t.useWindowSize=function(){var e=(0,u.useState)((function(){var e=window;return{width:e.innerWidth,height:e.innerHeight}})),t=(0,r.default)(e,2),a=t[0],n=t[1],l=function(e){var t=e.width,a=e.height;n({width:t,height:a})};return(0,u.useEffect)((function(){var e=(0,o.addResizeObserve)(document.body,l);return function(){e&&e.removeResizeObserve()}}),[]),a};var r=l(a(78912)),u=a(65984),o=a(57264)},43332:function(e,t,a){var n=a(13568),l=a(93252),r=a(25028),u=a(4884),o=a(9564);r(t,"__esModule",{value:!0}),t.default=void 0;var i=o(a(26048)),c=a(41936),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var a=s(t);if(a&&a.has(e))return a.get(e);var l={__proto__:null},o=r&&u;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var c=o?u(e,i):null;c&&(c.get||c.set)?r(l,i,c):l[i]=e[i]}return l.default=e,a&&a.set(e,l),l}(a(65984)),f=a(34896);function s(e){if("function"!=typeof l)return null;var t=new l,a=new l;return(s=function(e){return e?a:t})(e)}t.default=(0,d.memo)((function(e){var t=e.children,a=e.to,n=(0,c.useLocation)().search,l=a;return l=(0,f.urlParamWithDebug)(l,n),d.default.createElement(c.Link,(0,i.default)({},e,{to:l}),t)}))},732:function(e,t,a){a(25028)(t,"__esModule",{value:!0}),t.default=void 0;var n=a(65984),l=a(41936),r=a(34896);t.default=function(){var e=(0,l.useNavigate)(),t=(0,l.useLocation)().search;return(0,n.useCallback)((function(a,n){a=(0,r.urlParamWithDebug)(a,t),e(a,n)}),[t,e])}},78016:function(e,t,a){var n=a(13939),l=a(34716),r=a(70696),u=a(4884),o=a(3464),i=a(51400),c=a(25028),d=a(9564);c(t,"__esModule",{value:!0}),t.init=function(){var e;null===(e=window.document.querySelector("body"))||void 0===e||e.addEventListener("click",g)},t.publishUserEvent=t.publishSearchUserEvent=t.publishClickUserEvent=void 0;var f=d(a(78912)),s=d(a(96631)),p=a(88268),m=a(90568);function v(e,t){var a=n(e);if(l){var o=l(e);t&&(o=r(o).call(o,(function(t){return u(e,t).enumerable}))),a.push.apply(a,o)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){(0,s.default)(e,t,a[t])})):o?i(e,o(a)):v(Object(a)).forEach((function(t){c(e,t,u(a,t))}))}return e}t.publishUserEvent=function(e){(0,m.publishEvent)(p.USER_ACTION_EVENT,e)};var h=t.publishClickUserEvent=function(e){var t=_({page:window.location.pathname,prepage:window.document.referrer,eventName:"click",controlName:"",controlType:"",type:"",controlId:""},e);(0,m.publishEvent)(p.USER_ACTION_EVENT,t)};t.publishSearchUserEvent=function(e){var t=_({eventName:"search"},e);(0,m.publishEvent)(p.USER_ACTION_EVENT,t)};function g(e){!function e(t){var a;if(t&&"BODY"!==(null==t?void 0:t.tagName)){var n=null==t||null===(a=t.dataset)||void 0===a?void 0:a.ncAction;if(n){var l=n.split("|"),r=(0,f.default)(l,3),u=r[0],o=r[1],i=r[2];h({appId:u,formId:o,action:i})}else{e(t.parentNode)}}}(e.target)}},66028:function(e,t,a){var n=a(13939),l=a(34716),r=a(70696),u=a(4884),o=a(3464),i=a(51400),c=a(25028),d=a(9564);c(t,"__esModule",{value:!0}),t.assignDataReducer=void 0;var f=d(a(96631));function s(e,t){var a=n(e);if(l){var o=l(e);t&&(o=r(o).call(o,(function(t){return u(e,t).enumerable}))),a.push.apply(a,o)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){(0,f.default)(e,t,a[t])})):o?i(e,o(a)):s(Object(a)).forEach((function(t){c(e,t,u(a,t))}))}return e}t.assignDataReducer=function(e,t){return p(p({},e),t)}},34896:function(e,t,a){var n=a(25028),l=a(9564);n(t,"__esModule",{value:!0}),t.urlParamWithDebug=void 0;var r=l(a(50524)),u=l(a(760)),o=["kdweb_debug","kdweb_cdn","kdcdc"];t.urlParamWithDebug=function(e,t){for(var a=0;a<o.length;a++)if(null!=t&&(0,r.default)(t).call(t,o[a]))return(0,u.default)(e).call(e,t);return e}},70356:function(e,t,a){var n=a(13568),l=a(93252),r=a(25028),u=a(4884),o=a(9564);r(t,"__esModule",{value:!0}),t.default=void 0;var i=o(a(96631)),c=o(a(78912)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var a=_(t);if(a&&a.has(e))return a.get(e);var l={__proto__:null},o=r&&u;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var c=o?u(e,i):null;c&&(c.get||c.set)?r(l,i,c):l[i]=e[i]}return l.default=e,a&&a.set(e,l),l}(a(65984)),f=a(41936),s=a(4440),p=a(60644),m=o(a(71252)),v=o(a(17816));function _(e){if("function"!=typeof l)return null;var t=new l,a=new l;return(_=function(e){return e?a:t})(e)}t.default=function(e){var t=e.title,a=e.children,n=e.isMb,l=(0,f.useParams)(),r=l.targetFormId,u=l.appId,o=(0,d.useState)(t),_=(0,c.default)(o,2),h=_[0],g=_[1];return(0,d.useEffect)((function(){(0,p.isUndefined)(t)&&(0,s.getFormData)({appId:u,targetFormId:r}).then((function(e){var t,a=(null==e||null===(t=e.rows)||void 0===t?void 0:t[0])||{};g(a.name)})).catch((function(e){}))}),[]),d.default.createElement(d.default.Fragment,null,d.default.createElement("div",{className:(0,m.default)(v.default.formheader,(0,i.default)({},v.default.formheader_mb,n))},h),a)}},1520:function(e,t,a){var n=a(13568),l=a(93252),r=a(25028),u=a(4884),o=a(9564);r(t,"__esModule",{value:!0}),t.default=void 0;var i=o(a(23992)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var a=s(t);if(a&&a.has(e))return a.get(e);var l={__proto__:null},o=r&&u;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var c=o?u(e,i):null;c&&(c.get||c.set)?r(l,i,c):l[i]=e[i]}return l.default=e,a&&a.set(e,l),l}(a(65984)),d=o(a(71252)),f=o(a(56124));function s(e){if("function"!=typeof l)return null;var t=new l,a=new l;return(s=function(e){return e?a:t})(e)}var p=(0,c.memo)((function(e){var t=e.children,a=e.className;return c.default.createElement("div",{className:(0,d.default)(f.default.header,a)},null==t?void 0:(0,i.default)(t).call(t,(function(e,t){return c.default.cloneElement(e,{key:t})})))}));p.displayName="Header";var m=(0,c.memo)((function(e){var t=e.children,a=e.className;return c.default.createElement("div",{className:a},t)}));m.displayName="HeaderLeft";var v=(0,c.memo)((function(e){var t=e.children,a=e.className;return c.default.createElement("div",{className:(0,d.default)(f.default.header_main,a)},t)}));v.displayName="HeaderMain",p.Left=m,p.Main=v,p.Right=m;t.default=p},10352:function(e,t,a){var n=a(13568),l=a(93252),r=a(25028),u=a(4884),o=a(9564);r(t,"__esModule",{value:!0}),t.default=void 0;var i=o(a(23992)),c=o(a(96631)),d=o(a(78912)),f=a(63548),s=o(a(71252)),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var a=v(t);if(a&&a.has(e))return a.get(e);var l={__proto__:null},o=r&&u;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var c=o?u(e,i):null;c&&(c.get||c.set)?r(l,i,c):l[i]=e[i]}return l.default=e,a&&a.set(e,l),l}(a(65984)),m=o(a(20552));function v(e){if("function"!=typeof l)return null;var t=new l,a=new l;return(v=function(e){return e?a:t})(e)}t.default=p.default.memo((function(e){var t,a,n=e.data,l=e.colorIndex,r=e.iconIndex,u=e.onSelect,o=e.isLineIconStyle,v=(0,p.useState)(0),_=(0,d.default)(v,2),h=_[0],g=_[1],w=(0,p.useState)(0),E=(0,d.default)(w,2),x=E[0],y=E[1],b=(0,p.useRef)(null);(0,p.useEffect)((function(){g(l)}),[l]),(0,p.useEffect)((function(){y(r)}),[r]);var N=(0,p.useCallback)((function(e,t){g(e),y(t),null==u||u(e,t)}),[u,n]);return(0,p.useLayoutEffect)((function(){var e,t,a,l=null===(e=b.current)||void 0===e?void 0:e.getElementsByTagName("path");l&&(Array.prototype.forEach.call(l,(function(e){return e.removeAttribute("style")})),o?null===(t=l[x])||void 0===t||t.setAttribute("style","fill:".concat(null==n?void 0:n.colors[h].value)):null===(a=l[x])||void 0===a||a.setAttribute("style","fill:#fff"))}),[x,h,b.current]),p.default.createElement("div",{className:m.default.pop_main},p.default.createElement("div",{className:m.default.colors},null==n?void 0:(0,i.default)(t=n.colors).call(t,(function(e,t){return p.default.createElement("div",{key:t,onClick:function(){return N(t,x)},style:{backgroundColor:e.value}},h===t&&p.default.createElement(f.Icon,{prefix:"nocodeplatformicon",type:"gouxuan"}))}))),p.default.createElement("div",{ref:b,className:m.default.icons},null==n?void 0:(0,i.default)(a=n.svgs).call(a,(function(e,t){var a=x===t?null==n?void 0:n.colors[h].value:"",l=x===t?"#fff":"";return p.default.createElement("div",{key:t,onClick:function(){return N(h,t)},className:(0,s.default)((0,c.default)((0,c.default)({},m.default["icon-item-f-style"],o),m.default["icon-item-f-style-active"],o&&x===t)),style:{backgroundColor:o?l:a,color:o?a:l},dangerouslySetInnerHTML:{__html:e.content}})}))))}))},51368:function(e,t,a){var n=a(13568),l=a(93252),r=a(25028),u=a(4884),o=a(9564);r(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var a=d(t);if(a&&a.has(e))return a.get(e);var l={__proto__:null},o=r&&u;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var c=o?u(e,i):null;c&&(c.get||c.set)?r(l,i,c):l[i]=e[i]}return l.default=e,a&&a.set(e,l),l}(a(65984)),c=o(a(21363));function d(e){if("function"!=typeof l)return null;var t=new l,a=new l;return(d=function(e){return e?a:t})(e)}var f=(0,i.memo)((function(e){return i.default.createElement(c.default,e)}));f.displayName="QRCode";t.default=f},6896:function(e,t,a){var n=a(13568),l=a(93252),r=a(25028),u=a(4884),o=a(9564);r(t,"__esModule",{value:!0}),t.default=void 0;var i=o(a(1900)),c=o(a(760)),d=o(a(78912)),f=a(63548),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var l={__proto__:null},o=r&&u;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var c=o?u(e,i):null;c&&(c.get||c.set)?r(l,i,c):l[i]=e[i]}return l.default=e,a&&a.set(e,l),l}(a(65984)),p=o(a(4200)),m=o(a(10352)),v=a(57264),_=o(a(71252));function h(e){if("function"!=typeof l)return null;var t=new l,a=new l;return(h=function(e){return e?a:t})(e)}t.default=s.default.memo((function(e){var t=e.onChange,a=e.image,n=e.placement,l=e.triggerClassName,r=e.popperClassName,u=e.isLineIconStyle,o=e.svgData,h=e.readonly,g=(0,s.useState)({colorIndex:void 0,iconIndex:void 0}),w=(0,d.default)(g,2),E=w[0],x=w[1],y=(0,s.useRef)(null),b=(0,s.useCallback)((function(e,t){var a,n,l=(0,v.getQueryString)("color",e),r=(0,v.getQueryString)("svg",e),u=l&&"undefined"!==l?null==t||null===(a=t.colors)||void 0===a?void 0:(0,i.default)(a).call(a,(function(e){return e.value===l||e.key===l})):0,o=r&&"undefined"!==r?null==t||null===(n=t.svgs)||void 0===n?void 0:(0,i.default)(n).call(n,(function(e){return e.label===r})):0;x({colorIndex:u,iconIndex:o})}),[]),N=function(e,t){x({colorIndex:e,iconIndex:t})};(0,s.useLayoutEffect)((function(){var e,t;if(o&&y.current){var a=u?null==o||null===(e=o.colors)||void 0===e||null===(e=e[E.colorIndex])||void 0===e?void 0:e.value:"#fff";null===(t=y.current.getElementsByTagName("path"))||void 0===t||null===(t=t[0])||void 0===t||t.setAttribute("style","fill:".concat(a," "))}}),[o,E,y.current,u]),(0,s.useEffect)((function(){b(a,o)}),[a,o]);var I=(0,s.useCallback)((function(e){if(e)b(a,o);else{var n,l,r,u=encodeURIComponent(null==o||null===(n=o.colors)||void 0===n||null===(n=n[E.colorIndex])||void 0===n?void 0:n.value),i=null==o||null===(l=o.svgs)||void 0===l?void 0:l[E.iconIndex].label,d=(0,c.default)(r="nocode/v2/nocode_sys/common/svgs/create_svg_line?color=".concat(u,"&svg=")).call(r,i);null==t||t(d)}}),[o,E,t]),k=(0,s.useMemo)((function(){return s.default.createElement(m.default,{data:o,iconIndex:E.iconIndex,colorIndex:E.colorIndex,onSelect:N,isLineIconStyle:u})}),[o,E,u]),D=(0,s.useMemo)((function(){var e,t;return s.default.createElement("div",{ref:y,className:(0,_.default)(p.default.avatar,l),style:{backgroundColor:u?"":null==o||null===(e=o.colors)||void 0===e||null===(e=e[E.colorIndex])||void 0===e?void 0:e.value},dangerouslySetInnerHTML:{__html:(null==o||null===(t=o.svgs)||void 0===t||null===(t=t[E.iconIndex])||void 0===t?void 0:t.content)||""}})}),[o,E,u]);return h?D:s.default.createElement(f.Tooltip,{placement:n||"rightTop",arrow:!1,popperClassName:(0,_.default)(p.default.pop,r),gap:0,tip:k,trigger:"click",onVisibleChange:I},D)}))},14552:function(e,t,a){a(25028)(t,"__esModule",{value:!0}),t.DesignerSkeleton=void 0;t.DesignerSkeleton=[{width:"100%",height:"100%",background:"#ECEEF2",child:[{width:"280px",height:"100%",type:"MENU",child:[{width:"216px",height:"28px",margin:"12px",type:"INPUT"},{width:"64px",height:"20px",margin:"16px 12px 12px 12px",type:"INPUT"},{width:"auto",height:"auto",flexWrap:"wrap",margin:"0px 0px 0px 12px",child:[{width:"80px",height:"72px",margin:"0px 8px 8px 0px",type:"INPUT",repeat:12}]},{width:"64px",height:"20px",margin:"20px 12px 12px 12px",type:"INPUT"},{width:"auto",height:"auto",flexWrap:"wrap",margin:"0px 0px 0px 12px",child:[{width:"80px",height:"72px",margin:"0px 8px 8px 0px",type:"INPUT",repeat:12}]},{width:"64px",height:"20px",margin:"20px 12px 12px 12px",type:"INPUT"},{width:"auto",height:"auto",flexWrap:"wrap",margin:"0px 0px 0px 12px",child:[{width:"80px",height:"72px",margin:"0px 8px 8px 0px",type:"INPUT",repeat:3}]}]},{width:"calc(100vw - 600px)",height:"auto",type:"CONCENT",margin:"20px",child:[{width:"100%",height:"auto",margin:"1px 0px",flexDirection:"row",flexWrap:"wrap",child:[{width:"50%",height:"auto",flexDirection:"column",repeat:3,child:[{width:"48px",height:"16px",type:"INPUT",margin:"0px 0px 12px 12px"},{width:"calc(100% - 24px)",height:"36px",type:"INPUT",margin:"0px 0px 24px 12px"}]},{width:"50%",height:"auto",flexDirection:"column",child:[{width:"48px",height:"16px",type:"INPUT",margin:"0px 0px 12px 12px"},{width:"50%",height:"36px",flexDirection:"row",child:[{width:"120px",height:"36px",type:"INPUT",margin:"0px 4px 0px 12px",repeat:2}]}]},{width:"100%",height:"auto",flexDirection:"column",child:[{width:"48px",height:"16px",type:"INPUT",margin:"0px 0px 12px 12px"},{width:"calc(100% - 24px)",height:"76px",type:"INPUT",margin:"0px 0px 24px 12px"}]},{width:"100%",height:"auto",flexDirection:"column",child:[{width:"48px",height:"16px",type:"INPUT",margin:"0px 0px 12px 12px"},{width:"calc(100% - 24px)",height:"88px",type:"INPUT",margin:"0px 0px 8px 12px"}]},{width:"100%",height:"auto",type:"HEAD",child:[{width:"92px",height:"28px",type:"INPUT"},{width:"280px",height:"28px",type:"INPUT",margin:"0px 12px 24px 12px"}]}]}]},{width:"280px",height:"auto",type:"MENU",child:[{width:"32px",height:"20px",type:"INPUT",margin:"24px 12px"},{width:"48px",height:"26px",type:"INPUT",margin:"0px 12px"},{width:"256px",height:"36px",type:"INPUT",margin:"12px"},{width:"256px",height:"16px",margin:"12px",type:"HEAD",child:[{width:"48px",height:"16px",type:"INPUT",margin:"0px"},{width:"31px",height:"16px",type:"INPUT"}]},{width:"48px",height:"16px",type:"INPUT",margin:"12px"},{width:"256px",height:"36px",type:"INPUT",margin:"0px 12px 24px 12px"},{width:"48px",height:"16px",type:"INPUT",margin:"0px 12px 12px 12px"},{width:"100%",height:"auto",flexDirection:"row",flexWrap:"wrap",child:[{width:"80px",height:"16px",type:"INPUT",repeat:6,margin:"0px 42px 12px 12px"}]},{width:"100%",height:"1px",type:"INPUT",margin:"24px 0px"},{width:"32px",height:"20px",type:"INPUT"},{width:"48px",height:"16px",type:"INPUT",margin:"24px 0px 0px 12px"},{width:"256px",height:"36px",type:"INPUT",margin:"12px"},{width:"48px",height:"16px",type:"INPUT",margin:"12px"},{width:"256px",height:"36px",type:"INPUT",margin:"0px 12px 12px 12px"},{width:"256px",height:"16px",margin:"12px",repeat:2,type:"HEAD",flexDirection:"row",child:[{width:"48px",height:"16px",type:"INPUT",margin:"0px"},{width:"31px",height:"16px",type:"INPUT"}]},{width:"256px",height:"28px",type:"INPUT",margin:"0px 12px 12px 12px"},{width:"256px",height:"36px",margin:"12px",type:"HEAD",flexDirection:"row",child:[{width:"48px",height:"16px",type:"INPUT",margin:"0px"},{width:"31px",height:"16px",type:"INPUT"}]}]}]}]},76040:function(e,t,a){var n=a(13568),l=a(93252),r=a(25028),u=a(4884),o=a(9564);r(t,"__esModule",{value:!0}),t.default=void 0;var i=o(a(78912)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var a=s(t);if(a&&a.has(e))return a.get(e);var l={__proto__:null},o=r&&u;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var c=o?u(e,i):null;c&&(c.get||c.set)?r(l,i,c):l[i]=e[i]}return l.default=e,a&&a.set(e,l),l}(a(65984)),d=a(63548),f=o(a(62500));function s(e){if("function"!=typeof l)return null;var t=new l,a=new l;return(s=function(e){return e?a:t})(e)}var p="doubleClick";t.default=function(e){var t=e.formName,a=e.updateFormName,n=e.placeholder,l=void 0===n?"请输入表单名称":n,r=e.tips,u=void 0===r?"点击修改表单名称":r,o=e.doubleClickTips,s=void 0===o?"双击修改表单名称":o,m=e.defaultName,v=void 0===m?"未命名表单":m,_=(0,c.useRef)(null),h=(0,c.useState)(t===v),g=(0,i.default)(h,2),w=g[0],E=g[1],x=(0,c.useState)(t),y=(0,i.default)(x,2),b=y[0],N=y[1];(0,c.useEffect)((function(){N(t),E(t===v)}),[t]),(0,c.useEffect)((function(){_.current&&w&&_.current.select()}),[]),(0,c.useEffect)((function(){w!==p?w&&_.current.focus():_.current.select()}),[w]);var I=(0,c.useCallback)((function(e){a(e),k(e),N(e),E(!1)}),[]),k=function(e){document.title="配置：".concat(e)};return c.default.createElement("div",{className:f.default.header_formname},w?c.default.createElement(d.Input,{allowClear:!0,defaultValue:b,value:b,onChange:function(e){var t=e.target.value;N(t)},onBlur:function(e){var a=e.target.value;I(a||t||v)},onPressEnter:function(e){I(e||v)},maxLength:50,ref:_,className:f.default.header_formname_input,placeholder:l,borderType:"bordered"}):c.default.createElement(c.default.Fragment,null,c.default.createElement("p",{title:s,onDoubleClick:function(){E(p)}},b),c.default.createElement(d.Icon,{prefix:"nocodeplatformicon",title:u,className:f.default.header_formname_editicon,type:"bianji",onClick:function(){return E(!0)}})))}},29912:function(e,t,a){var n=a(13568),l=a(93252),r=a(25028),u=a(4884),o=a(9564);r(t,"__esModule",{value:!0}),t.default=void 0;var i=o(a(26048)),c=o(a(13568)),d=o(a(23992)),f=o(a(13939)),s=o(a(760)),p=o(a(70696)),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var a=E(t);if(a&&a.has(e))return a.get(e);var l={__proto__:null},o=r&&u;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var c=o?u(e,i):null;c&&(c.get||c.set)?r(l,i,c):l[i]=e[i]}return l.default=e,a&&a.set(e,l),l}(a(65984)),v=a(63548),_=a(60644),h=a(78016),g=o(a(71252)),w=o(a(13246));function E(e){if("function"!=typeof l)return null;var t=new l,a=new l;return(E=function(e){return e?a:t})(e)}var x=[{key:"quickNew",name:"快速新建",shortcutDataList:[{type:"block",value:"Enter"}]},{key:"delete",name:"删除",shortcutDataList:[{type:"block",value:"Delete"},"或",{type:"block",value:"Backspace"}]},{key:"copy",name:"复制",shortcutDataList:[{type:"block",value:"Ctrl"},"+",{type:"block",value:"C"}]},{key:"paste",name:"粘贴",shortcutDataList:[{type:"block",value:"Ctrl"},"+",{type:"block",value:"V"}]},{key:"shearCut",name:"剪切",shortcutDataList:[{type:"block",value:"Ctrl"},"+",{type:"block",value:"X"}]},{key:"repeat",name:"重复",shortcutDataList:[{type:"block",value:"Ctrl"},"+",{type:"block",value:"D"}]},{key:"multiSelect",name:"多选或取消多选",shortcutDataList:[{type:"block",value:"Ctrl"},"+",{type:"block",value:"鼠标点击"}]},{key:"cancel",name:"撤销",shortcutDataList:[{type:"block",value:"Ctrl"},"+",{type:"block",value:"Z"}]},{key:"renew",name:"恢复",shortcutDataList:[{type:"block",value:"Ctrl"},"+",{type:"block",value:"Y"}]}],y=function(e){var t,a=e.appId,n=e.formId,l=e.settingData,r=e.setSettingData,u=function(e,t){var l={appId:a,formId:n,eventName:"click",event:{Categories:{true:"tb_ds_lib_open",false:"tb_ds_lib_close"},CategoryArrangement:{true:"tb_ds_lay_open",false:"tb_ds_lay_close"},CategoryDisplayContent:{true:"tb_ds_dc_open",false:"tb_ds_dc_close"},CategoryGeneralContent:{true:"tb_ds_gc_open",false:"tb_ds_gc_close"},CategoryOperation:{true:"tb_ds_opi_open",false:"tb_ds_opi_close"},CategorySystem:{true:"tb_ds_sysf_open",false:"tb_ds_sysf_close"},Property:{true:"tb_ds_al_open",false:"tb_ds_al_close"},Outline:{true:"tb_ds_ol_open",false:"tb_ds_ol_close"}}[e][String(t)]};(0,h.publishUserEvent)(l)};return m.default.createElement(v.Dropdown.Menu,{className:w.default.dropDownContent},l&&(0,d.default)(t=(0,f.default)(l)).call(t,(function(e){var t,a=l[e],n=a.title,o=a.items,i=a.value;return m.default.createElement("div",{className:w.default.dropDownContent_setting,key:e},m.default.createElement("div",{className:w.default.dropDownContent_setting_header},m.default.createElement("p",{className:w.default.title},n),m.default.createElement(v.Switch,{checked:i,onChange:function(t){return function(e,t){l[e].value=t,r((0,_.cloneDeep)(l)),u(e,t)}(e,t)}})),i&&o&&m.default.createElement("ul",{className:w.default.dropDownContent_setting_list},(0,d.default)(t=(0,f.default)(o)).call(t,(function(t){var a=o[t],n=a.name,i=a.value;return m.default.createElement("li",{key:t},m.default.createElement("p",null,n),m.default.createElement(v.Switch,{checked:i,onChange:function(a){return function(e,t,a){l[e].items[t].value=a,r((0,_.cloneDeep)(l)),u(t,a)}(e,t,a)}}))}))))})))};t.default=function(e){var t,a,n,l=e.appId,r=e.formId,u=e.setSettingData,o=e.settingData,f=e.handleMenuItemClick,_=e.hideText,h=void 0!==_&&_,E=e.canSaveTemplate,b=void 0!==E&&E,N=[{title:"快捷键",icon:"kuaijiejian",key:"shortcut",dropDownContent:m.default.createElement(v.Dropdown.Menu,{className:(0,g.default)(w.default.dropDownContent,w.default.pd16)},(0,d.default)(x).call(x,(function(e,t){var a=e.name,n=e.shortcutDataList;return m.default.createElement("div",{key:t,className:w.default.dropDownContent_shortcut},m.default.createElement("p",{className:w.default.dropDownContent_shortcut_name},a),m.default.createElement("ul",{className:w.default.dropDownContent_shortcut_key},m.default.createElement("li",null,(0,d.default)(n).call(n,(function(e){return"object"===(0,c.default)(e)?m.default.createElement("span",{key:e.value,className:w.default.text_block},e.value):m.default.createElement("span",{key:e}," ",e," ")})))))}))),action:(0,s.default)(t="".concat(l,"|")).call(t,r,"|tb_shortcut")},{title:"设计器配置",icon:"shezhi",key:"designerSetting",dropDownContent:y({appId:l,formId:r,setSettingData:u,settingData:o})},b&&{title:"保存为模板",icon:"baocunweimoban",key:"saveTemplate",action:(0,s.default)(a="".concat(l,"|")).call(a,r,"|tb_sft")}];return m.default.createElement("ul",{className:w.default.header_iconmenu},(0,d.default)(n=(0,p.default)(N).call(N,Boolean)).call(n,(function(e,t){var a=e.title,n=e.icon,l=e.dropDownContent,r=e.action,u=e.key,o=r?{"data-nc-action":r}:{},c=m.default.createElement("li",(0,i.default)({key:u,className:w.default.header_iconmenu_item,title:a,onClick:function(){return function(e){null==f||f(e)}(u)}},o),m.default.createElement(v.Icon,{prefix:"nocodeplatformicon",className:w.default.header_iconmenu_item_icon,type:n}),!h&&m.default.createElement("span",{className:w.default.txt},a));return l?m.default.createElement(v.Dropdown,{key:t,gap:0,placement:"topRight",menu:l,trigger:"click"},c):c})))}},80320:function(e,t,a){var n=a(13568),l=a(13939),r=a(34716),u=a(70696),o=a(4884),i=a(3464),c=a(51400),d=a(25028),f=a(93252),s=a(9564);d(t,"__esModule",{value:!0}),t.default=void 0;var p=s(a(760)),m=s(a(96631)),v=s(a(78912)),_=j(a(65984)),h=a(95936),g=a(41936),w=a(4440),E=a(39392),x=a(63548),y=a(88268),b=s(a(1520)),N=s(a(48864)),I=s(a(29912)),k=s(a(76040)),D=j(a(54864)),C=s(a(60584)),T=a(29588),P=s(a(45664)),A=s(a(71252)),M=s(a(43332)),O=s(a(75020)),S=a(62012),L=a(57264),U=a(66028),F=a(59876);function R(e){if("function"!=typeof f)return null;var t=new f,a=new f;return(R=function(e){return e?a:t})(e)}function j(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var a=R(t);if(a&&a.has(e))return a.get(e);var l={__proto__:null},r=d&&o;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=r?o(e,u):null;i&&(i.get||i.set)?d(l,u,i):l[u]=e[u]}return l.default=e,a&&a.set(e,l),l}function V(e,t){var a=l(e);if(r){var n=r(e);t&&(n=u(n).call(n,(function(t){return o(e,t).enumerable}))),a.push.apply(a,n)}return a}function G(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?V(Object(a),!0).forEach((function(t){(0,m.default)(e,t,a[t])})):i?c(e,i(a)):V(Object(a)).forEach((function(t){d(e,t,o(a,t))}))}return e}var B="SAVE_AND_VISIT",H={visible:!1,value:D.INIT_TEMPLATE_VALUE};t.default=function(){var e,t,a,n,l,r,u,o,i,c,d=(0,g.useParams)(),f=d.targetFormId,s=d.appId,R=((0,g.useLocation)().pathname,(0,_.useRef)(null),(0,_.useState)(null)),j=(0,v.default)(R,2),V=j[0],W=j[1],q=(0,_.useState)(null),Q=(0,v.default)(q,2),z=Q[0],X=Q[1],J=(0,_.useState)(null),Z=(0,v.default)(J,2),K=Z[0],Y=Z[1],$=(0,_.useState)(!1),ee=(0,v.default)($,2),te=ee[0],ae=ee[1],ne=(0,_.useState)(null),le=(0,v.default)(ne,2),re=le[0],ue=le[1],oe=(0,_.useState)(null),ie=(0,v.default)(oe,2),ce=ie[0],de=ie[1],fe=(0,_.useReducer)(U.assignDataReducer,H),se=(0,v.default)(fe,2),pe=se[0],me=se[1],ve=(0,_.useState)(!1),_e=(0,v.default)(ve,2),he=(_e[0],_e[1],(0,_.useState)(!1)),ge=(0,v.default)(he,2),we=ge[0],Ee=ge[1],xe=(0,_.useContext)(h.Context).state,ye=xe.userInfo,be=xe.rootConfig,Ne=ye||{},Ie=Ne.isAdminUser,ke=Ne.templateEnabled,De=void 0!==ke&&ke,Ce=(0,_.useRef)(null),Te=(0,T.useWindowSize)().width<1366;(0,_.useEffect)((function(){(0,w.getFormData)({appId:s,targetFormId:f}).then((function(e){var t,a=(null==e||null===(t=e.rows)||void 0===t?void 0:t[0])||{};W(a),de(a.name)})).catch((function(e){}))}),[]);var Pe=(0,E.useTranslation)().t,Ae=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"发布中...",a=(0,L.showLoadingMessage)(t);0===e&&a()},Me=(0,_.useCallback)((function(){if(!(0,L.isCNLanguage)(be))return(0,L.showNotice)("warnning",y.LANG_INVALID);ae(!0),Ae(-1),X(Date.now())}),[be]),Oe=(0,_.useCallback)((function(){if(!(0,L.isCNLanguage)(be))return(0,L.showNotice)("warnning",y.LANG_INVALID);ue(Date.now()),Ae(-1)}),[be]),Se=(0,O.default)(Me),Le=(0,O.default)(Oe),Ue=(0,_.useCallback)((function(e){de(e),C.default.emit(y.UPDATE_FORMNAME,e)}),[V]),Fe=(0,_.useCallback)((function(){if(!(0,L.isCNLanguage)(be))return(0,L.showNotice)("warnning",y.LANG_INVALID);var e=V||{},t=e.name,a=void 0===t?"":t,n=e.image,l=void 0===n?F.DEFAULT_FORM_IMAGE:n;me({visible:!0,value:G(G({},D.INIT_TEMPLATE_VALUE),{},{name:a,icon:l})})}),[me,V,be]),Re=(0,_.useCallback)((function(e){if("saveTemplate"===e)Fe()}),[Fe]),je=(0,_.useCallback)((function(e){ae(!0),Ae(-1,"模板保存中，请稍候..."),C.default.emit(y.SAVE_AS_TEMPLATE,e)}),[]),Ve=(Pe("designer.key0001"),(0,p.default)(e="/".concat(s,"/designer/")).call(e,f),Pe("designer.key0003"),(0,p.default)(t="/".concat(s,"/designer/")).call(t,f,"/formsetting"),(0,_.useCallback)((function(){Ae(0),ae(!1)}),[])),Ge=(0,_.useMemo)((function(){return{settingData:null==V?void 0:V.setting,save:z,saveAndVisit:K,preview:re,formTitle:ce,saveStatus:Ve}}),[V,z,K,re,ce,Ve]),Be=_.default.createElement(x.Dropdown.Menu,null,_.default.createElement(x.Dropdown.Item,{key:B,"data-nc-action":(0,p.default)(a="".concat(s,"|")).call(a,f,"|tb_pa")},"发布并访问"));return _.default.createElement(S.ThemeContextProvider,{useDefault:!0},_.default.createElement("div",{className:P.default.wrapper,ref:Ce},_.default.createElement(b.default,{className:P.default.designer_header},_.default.createElement(b.default.Left,{className:P.default.leftnav},_.default.createElement(N.default,{appId:s,formId:f}),_.default.createElement("div",{className:P.default.leftnav_container},"配置：",_.default.createElement(M.default,{to:(0,p.default)(n="/".concat(s,"/admin/")).call(n,f),className:P.default.leftnav_container_appname,"data-nc-action":(0,p.default)(l="".concat(s,"|")).call(l,f,"|tb_crumb_fl")},null==V||null===(r=V.app)||void 0===r?void 0:r.name),(null==V||null===(u=V.app)||void 0===u?void 0:u.name)&&ce&&_.default.createElement(_.default.Fragment,null,_.default.createElement(x.Icon,{prefix:"nocodeplatformicon",type:"fangxiangyou"}),_.default.createElement(k.default,{formName:ce,updateFormName:Ue})))),_.default.createElement(b.default.Right,{className:P.default.rightnav},_.default.createElement(I.default,{appId:s,formId:f,settingData:null==V?void 0:V.setting,setSettingData:function(e){W((function(t){return G(G({},t),{},{setting:e})}))},hideText:Te,canSaveTemplate:De&&Ie,handleMenuItemClick:Re}),_.default.createElement(x.Button,{className:P.default["rightnav-preview"],onClick:Le,"data-nc-action":(0,p.default)(o="".concat(s,"|")).call(o,f,"|tb_pv")},"预览"),_.default.createElement("div",{className:P.default.btn_group},_.default.createElement(x.Button,{className:P.default.save_btn,type:"primary",loading:te,onClick:Se,"data-nc-action":(0,p.default)(i="".concat(s,"|")).call(i,f,"|tb_publish")},"发布"),_.default.createElement("div",{className:P.default.seperator}),_.default.createElement(x.Dropdown,{menu:Be,onItemClick:function(e){if(e===B){if(!(0,L.isCNLanguage)(be))return(0,L.showNotice)("warnning",y.LANG_INVALID);Y(Date.now()),Ae(-1)}we&&Ee(!1)},onVisibleChange:Ee,popperClassName:P.default.dropdown_panel},_.default.createElement(x.Button,{className:P.default.btn_dropdown,type:"primary"},_.default.createElement(x.Icon,{type:"arrow-down",style:{lineHeight:1},className:(0,A.default)((0,m.default)({},P.default.isOpen,we))})))))),_.default.createElement("div",{className:P.default.designer_container},_.default.createElement(g.Outlet,{context:Ge})),_.default.createElement(D.default,{value:pe.value,visible:pe.visible,setVisible:function(e){return me({visible:e})},onConfirm:je,confirmBtnProps:{"data-nc-action":(0,p.default)(c="".concat(s,"|")).call(c,f,"|sft_comf")}})))}},48864:function(e,t,a){var n=a(13568),l=a(93252),r=a(25028),u=a(4884),o=a(9564);r(t,"__esModule",{value:!0}),t.default=void 0;var i=o(a(760)),c=o(a(23992)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var a=g(t);if(a&&a.has(e))return a.get(e);var l={__proto__:null},o=r&&u;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var c=o?u(e,i):null;c&&(c.get||c.set)?r(l,i,c):l[i]=e[i]}return l.default=e,a&&a.set(e,l),l}(a(65984)),f=o(a(732)),s=a(41936),p=a(63548),m=a(39392),v=o(a(94958)),_=a(95936),h=a(57264);function g(e){if("function"!=typeof l)return null;var t=new l,a=new l;return(g=function(e){return e?a:t})(e)}var w=(0,d.lazy)((function(){return a.e(0).then(a.t.bind(a,51e3,23))})),E="businessManage";t.default=function(e){var t=e.onItemClick,a=e.openNewPage,n=void 0===a||a,l=(0,m.useTranslation)().t,r=(0,f.default)(),u=(0,s.useParams)(),o=u.appId,g=u.targetFormId,x=(0,d.useContext)(_.Context).dispatch,y=(0,d.useCallback)((function(e){var t,a;return(0,i.default)(t=(0,i.default)(a="".concat(o||"","|")).call(a,g||"","|")).call(t,e)}),[o,g]),b=[{path:"/home",title:l("designer.key0004"),icon:"qiyeguanli",useActionName:"tb_h_bn"},{path:"/app",title:l("designer.key0005"),icon:"quanbuyingyong",key:"allApp",useActionName:"tb_as_bn"},{path:"/template",title:l("designer.key0006"),icon:"moban2",useActionName:"tb_ts_bn"},{path:"/flow",title:l("designer.key0008"),icon:"liucheng-xian",useActionName:"tb_fs_bn"},{type:"divider"},{title:l("designer.key0007"),icon:"jichushezhi",key:E,useActionName:"tb_em_bn"}],N=d.default.createElement(p.Dropdown.Menu,{className:v.default.header_nav_menu},(0,c.default)(b).call(b,(function(e,t){var a=e.title,n=(e.path,e.icon),l=e.type,r=e.useActionName;return"divider"===l?d.default.createElement("li",{key:t,className:v.default.header_nav_menu_item_divider}):d.default.createElement(p.Dropdown.Item,{key:t,className:v.default.header_nav_menu_item,"data-nc-action":y(r)},d.default.createElement(d.default.Fragment,null,d.default.createElement(p.Icon,{prefix:"nocodeplatformicon",type:n}),a))})));return d.default.createElement(d.default.Fragment,null,d.default.createElement(p.Dropdown,{placement:"topLeft",menu:N,onItemClick:function(e){if("function"==typeof t&&t(e))return;var a=b[e];if(a){var l=a.path;if(l)n?(0,h.openner)(l):r(l);else if(a.key===E){var u=(0,h.autoModalHeight)(520,768);p.Modal.confirm({title:"企业管理",showline:!0,titleIcon:null,footer:null,width:960,height:u,type:"normal",bodyStyle:{padding:0,display:"flex",overflow:"hidden",flexBasis:0},body:d.default.createElement(d.Suspense,{fallback:d.default.createElement(d.default.Fragment,null)}," ",d.default.createElement(w,{dispatch:x})," "),closable:!0,maskClosable:!1})}}}},d.default.createElement("div",{className:v.default.header_nav},d.default.createElement("div",{className:v.default.header_nav_container},d.default.createElement(p.Icon,{prefix:"nocodeplatformicon",type:"9gedian"})))))}},44512:function(e,t,a){var n=a(13568),l=a(93252),r=a(25028),u=a(4884),o=a(9564);r(t,"__esModule",{value:!0}),t.default=void 0;var i=o(a(96631)),c=o(a(760)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var a=h(t);if(a&&a.has(e))return a.get(e);var l={__proto__:null},o=r&&u;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var c=o?u(e,i):null;c&&(c.get||c.set)?r(l,i,c):l[i]=e[i]}return l.default=e,a&&a.set(e,l),l}(a(65984)),f=o(a(16428)),s=a(41936),p=a(63548),m=(o(a(70356)),a(57264),o(a(23772))),v=o(a(71252)),_=o(a(38219));function h(e){if("function"!=typeof l)return null;var t=new l,a=new l;return(h=function(e){return e?a:t})(e)}(0,d.lazy)((function(){return Promise.resolve().then(a.t.bind(a,87168,23))})),t.default=function(e){e.formTitle;var t,a,n,l,r,u,o,h,g=e.device,w=(e.visible,e.setVisible),E=(0,s.useParams)(),x=E.targetFormId,y=E.appId,b=window.location,N=(b.pathname,b.search),I=(b.origin,(0,c.default)(t=(0,c.default)(a=(0,c.default)(n=(0,c.default)(l=(0,c.default)(r="".concat(window.__domainurl__)).call(r,"nocode","/")).call(l,y,"/preview/")).call(n,x,"/")).call(a,g)).call(t,N)),k=(0,d.useMemo)((function(){return"mobile"===g}),[]);return f.default.createPortal(d.default.createElement(d.default.Fragment,null,d.default.createElement("div",{className:_.default.previewDrawer},d.default.createElement("div",{className:_.default.previewDrawer_header},d.default.createElement("div",{className:_.default.previewDrawer_header_left},"预览"),d.default.createElement("div",{className:_.default.previewDrawer_header_right},d.default.createElement(p.Icon,{prefix:"nocodeplatformicon",title:"关闭预览",type:"guanbi",onClick:function(){return w(!1)}}))),d.default.createElement("div",{className:_.default.previewDrawer_body},d.default.createElement("div",{className:(0,v.default)(_.default.previewDrawer_body_main,(0,i.default)({},_.default.mobile,k))},d.default.createElement("iframe",{src:I,frameBorder:"0",width:"100%"}),k&&d.default.createElement("div",{className:_.default.previewDrawer_body_main_qrcode},d.default.createElement(m.default,{url:(0,c.default)(u=(0,c.default)(o=(0,c.default)(h="/".concat("nocode","/")).call(h,y,"/preview/")).call(o,x,"/")).call(u,g)}))))),d.default.createElement("div",{className:_.default.mask,onClick:function(){return w(!1)}})),document.body)}},23772:function(e,t,a){var n=a(13568),l=a(93252),r=a(25028),u=a(4884),o=a(9564);r(t,"__esModule",{value:!0}),t.default=void 0;var i=o(a(73980)),c=o(a(29052)),d=o(a(94924)),f=o(a(78912)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var a=g(t);if(a&&a.has(e))return a.get(e);var l={__proto__:null},o=r&&u;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var c=o?u(e,i):null;c&&(c.get||c.set)?r(l,i,c):l[i]=e[i]}return l.default=e,a&&a.set(e,l),l}(a(65984)),p=a(63548),m=o(a(51368)),v=a(98464),_=a(57264),h=o(a(80796));function g(e){if("function"!=typeof l)return null;var t=new l,a=new l;return(g=function(e){return e?a:t})(e)}var w=(0,s.memo)((function(e){var t=e.url,a=e.title,n=void 0===a?"手机扫码预览":a,l=(0,s.useState)(t),r=(0,f.default)(l,2),u=r[0],o=r[1],g=function(){var e=(0,d.default)(c.default.mark((function e(){var a,n,l;return c.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,v.sendShareData)({url:t});case 3:null!=(n=e.sent)&&null!==(a=n.row)&&void 0!==a&&a.url&&o(null==n||null===(l=n.row)||void 0===l?void 0:l.url),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();(0,s.useEffect)((function(){g()}),[]);var w=window.location.origin+(0,_.getFullUrl)("/"===u[0]?(0,i.default)(u).call(u,1):u);return s.default.createElement("div",{className:h.default.previewQRcode},s.default.createElement("p",{className:h.default.previewQRcode_title},n),s.default.createElement("div",{className:h.default.previewQRcode_main},s.default.createElement(m.default,{value:(0,_.getUrlWithDataCenter)(w),size:148,bgColor:"#ffffff",fgColor:"#000000"}),s.default.createElement(p.Icon,{className:h.default.previewQRcode_main_icon,prefix:"nocodeplatformicon",type:"danju"})))}));w.displayName="PreviewQrcode";t.default=w},54864:function(e,t,a){var n=a(13568),l=a(13939),r=a(34716),u=a(70696),o=a(4884),i=a(3464),c=a(51400),d=a(25028),f=a(93252),s=a(9564);d(t,"__esModule",{value:!0}),t.default=t.INIT_TEMPLATE_VALUE=void 0;var p=s(a(29052)),m=s(a(26048)),v=s(a(94924)),_=s(a(78912)),h=s(a(99148)),g=s(a(96631)),w=s(a(23992)),E=s(a(99308)),x=s(a(760)),y=s(a(70696)),b=s(a(50524)),N=s(a(28429)),I=s(a(73020)),k=s(a(25288)),D=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var a=U(t);if(a&&a.has(e))return a.get(e);var l={__proto__:null},r=d&&o;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=r?o(e,u):null;i&&(i.get||i.set)?d(l,u,i):l[u]=e[u]}return l.default=e,a&&a.set(e,l),l}(a(65984)),C=a(63548),T=a(37220),P=a(82416),A=s(a(58495)),M=s(a(6896)),O=a(25096),S=a(59876),L=a(66028);function U(e){if("function"!=typeof f)return null;var t=new f,a=new f;return(U=function(e){return e?a:t})(e)}function F(e,t){var a=l(e);if(r){var n=r(e);t&&(n=u(n).call(n,(function(t){return o(e,t).enumerable}))),a.push.apply(a,n)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?F(Object(a),!0).forEach((function(t){(0,g.default)(e,t,a[t])})):i?c(e,i(a)):F(Object(a)).forEach((function(t){d(e,t,o(a,t))}))}return e}var j="nocode-save-template",V=function(e){return(0,w.default)(e).call(e,(function(e){return e.id}))},G=t.INIT_TEMPLATE_VALUE={name:"",desc:"",icon:"",domains:[],trades:[]},B={domains:[],trades:[]},H=function(e,t){return R(R({},e),t)},W=function(e){var t=e.value,a=e.onChange,n=e.options,l=function(e,n){var l,r=e.target.checked?(0,h.default)(new E.default((0,x.default)(l=[]).call(l,(0,h.default)(t),[n]))):(0,y.default)(t).call(t,(function(e){return e!==n}));null==a||a(r)};return D.default.createElement("div",{className:A.default["checkbox-group"]},D.default.createElement(C.Checkbox,{className:A.default.checkbox,checked:t.length===n.length,value:"all",key:"all",onChange:function(e){var t;t=e.target.checked?(0,w.default)(n).call(n,(function(e){return e.id})):[],null==a||a(t)}},"全部"),(0,w.default)(n).call(n,(function(e){return D.default.createElement(C.Checkbox,{className:A.default.checkbox,value:e.id,key:e.id,checked:(0,b.default)(t).call(t,e.id),onChange:function(t){return l(t,e.id)}},e.name)})))},q=(0,D.forwardRef)((function(e,t){var a=e.prefixCls,n=e.value,l=e.svgData,r=C.Form.useForm(),u=(0,_.default)(r,1)[0],o=(0,D.useReducer)(H,B),i=(0,_.default)(o,2),c=i[0],d=i[1],f=(0,D.useReducer)(L.assignDataReducer,n||G),s=(0,_.default)(f,2),m=s[0],h=s[1];(0,D.useEffect)((function(){g()}),[]);var g=(0,D.useCallback)((0,v.default)(p.default.mark((function e(){var t,a,n,l,r,u,o,i;return p.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,T.getTradesAndDomains)();case 3:t=e.sent,a=t.rows,l=(n=void 0===a?[]:a)[0]||{},r=l.domains,u=void 0===r?[]:r,o=n[1]||{},i=o.trades,d({domains:u,trades:void 0===i?[]:i}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),[d]);(0,D.useImperativeHandle)(t,(function(){return{validateFields:w}}));var w=function(){return new N.default((function(e,t){u.validateFields().then((function(t){var a=(0,I.default)(t);e(a)})).catch((function(e){return t(e)}))}))};return(0,D.useEffect)((function(){if(n){var e=n.name,t=n.icon,a=n.trades,l=n.domains,r=n.desc;u.setFieldsValue({name:e,icon:t||S.DEFAULT_FORM_IMAGE,trades:V(a),domains:V(l),desc:r})}}),[]),D.default.createElement("div",{className:A.default["".concat(a,"-modal-body")]},D.default.createElement(C.Form,{layout:"vertical",form:u,labelWidth:"100%",wrapperWidth:"100%",onValuesChange:function(e,t){}},D.default.createElement(C.Form.Item,{label:"模板名称",name:"name",required:!0,validateTrigger:"onBlur",rules:[{required:!0,message:"请输入模板名称"},{type:"string",validator:function(e,t,a,n,l){return null!=t&&(0,k.default)(t).call(t)?[]:[new Error("请输入模板名称")]}}]},D.default.createElement(C.Input,{type:"text",value:m.name,borderType:"bordered",size:"large",placeholder:"请输入模板名称",maxLength:50,onChange:function(e){h({name:e.target.value})}})),D.default.createElement(C.Form.Item,{label:"图标",name:"icon",required:!0,validateTrigger:"onBlur"},D.default.createElement(M.default,{isLineIconStyle:!0,placement:"bottomLeft",triggerClassName:A.default["icon-selector"],svgData:l,image:m.icon||S.DEFAULT_FORM_IMAGE,onChange:function(e){u.setFieldValue("icon",e),h({icon:e})}})),D.default.createElement(C.Form.Item,{label:"模板描述",name:"desc",validateTrigger:"onBlur"},D.default.createElement(P.Textarea,{size:"large",value:m.desc,autoSize:{minRows:3,maxRows:3},borderType:"bordered",placeholder:"请输入模板描述",onChange:function(e){return h({desc:e})},maxLength:255,showCount:!0})),D.default.createElement(C.Form.Item,{className:A.default["".concat(a,"-modal-form-item-checkbox")],label:"领域",name:"domains",rules:[{required:!0,message:"请选择领域"}]},D.default.createElement(W,{value:m.domains,options:c.domains,onChange:function(e){h({domains:e}),u.setFieldValue("domains",e)}})),D.default.createElement(C.Form.Item,{className:A.default["".concat(a,"-modal-form-item-checkbox")],label:"行业",name:"trades",rules:[{required:!0,message:"请选择行业"}]},D.default.createElement(W,{value:m.trades,options:c.trades,onChange:function(e){h({trades:e}),u.setFieldValue("trades",e)}}))))})),Q=function(e){var t=e.prefixCls,a=e.confirmBtnProps,n=void 0===a?{}:a,l=e.onCancel,r=e.onConfirm;return D.default.createElement("div",{className:A.default["".concat(t,"-modal-footer")]},D.default.createElement(C.Button,{onClick:l,type:"second",size:"small",className:A.default["".concat(t,"-modal-cancel-btn")]},"取消"),D.default.createElement(C.Button,(0,m.default)({type:"primary",size:"small",style:{marginLeft:"12px"},onClick:r,className:A.default["".concat(t,"-modal-ok-btn")]},n),"确定"))};t.default=function(e){var t=e.title,a=e.value,n=e.visible,l=e.setVisible,r=e.onConfirm,u=e.confirmBtnProps,o=(0,D.useRef)(null),i=(0,D.useState)({}),c=(0,_.default)(i,2),d=c[0],f=c[1],s=function(){var e=(0,v.default)(p.default.mark((function e(){var t,a;return p.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,O.getLineIconAndColor)();case 3:t=e.sent,a=t.row,f(void 0===a?{}:a),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();(0,D.useEffect)((function(){s()}),[]);var m=function(){(0,o.current.validateFields)().then((function(e){var t=e.name;e=R(R({},e),{},{name:(0,k.default)(t).call(t)}),l(!1),null==r||r(e)})).catch((function(e){}))},h=function(){l(!1)};return D.default.createElement(C.Modal,{mask:!0,visible:n,body:D.default.createElement(q,{prefixCls:j,ref:o,value:a,svgData:d}),titleIcon:null,className:A.default["".concat(j,"-modal")],footer:D.default.createElement(Q,{prefixCls:j,confirmBtnProps:u,onConfirm:m,onCancel:h}),maskClosable:!1,width:480,height:830,keyboard:!1,title:t||"保存为模板",closable:!0,draggable:!1,destroyOnClose:!0,onCancel:h,onOk:m})}},97976:function(e,t,a){var n=a(13568),l=a(93252),r=a(25028),u=a(4884),o=a(9564);r(t,"__esModule",{value:!0}),t.default=void 0;var i=o(a(96631)),c=o(a(78912)),d=o(a(26048)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var a=b(t);if(a&&a.has(e))return a.get(e);var l={__proto__:null},o=r&&u;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var c=o?u(e,i):null;c&&(c.get||c.set)?r(l,i,c):l[i]=e[i]}return l.default=e,a&&a.set(e,l),l}(a(65984)),s=a(41936),p=o(a(44512)),m=a(88268),v=(a(63548),o(a(87168))),_=o(a(37064)),h=o(a(71252)),g=o(a(60584)),w=o(a(40436)),E=a(82416),x=a(14552),y=a(78016);function b(e){if("function"!=typeof l)return null;var t=new l,a=new l;return(b=function(e){return e?a:t})(e)}var N=(0,f.memo)((function(e){var t,a=(0,s.useParams)().targetFormId,n=(0,w.default)().state;return null!=n&&null!==(t=n.rootConfig)&&void 0!==t&&t.pageId?f.default.createElement(f.Suspense,{fallback:f.default.createElement("div",null)},f.default.createElement(v.default,(0,d.default)({config:{formId:"bos_nocode_formdesign",targetFormId:a,rootPageId:n.rootConfig.pageId}},e))):null}));t.default=function(e){var t=(0,s.useOutletContext)(),a=t.settingData,n=t.save,l=t.saveAndVisit,r=t.preview,u=t.formTitle,o=t.saveStatus,v=(0,f.useState)(!1),b=(0,c.default)(v,2),I=b[0],k=b[1],D=(0,f.useState)("pc"),C=(0,c.default)(D,2),T=C[0],P=C[1],A=(0,w.default)().state,M=A.compareTypes,O=void 0===M?{}:M,S=A.rootConfig,L=(0,f.useState)(!1),U=(0,c.default)(L,2),F=U[0],R=U[1],j=(0,f.useState)(),V=(0,c.default)(j,2),G=V[0],B=V[1];(0,f.useEffect)((function(){if(G){G.addEventListener(m.NOCODE_DESIGNER_PREVIEW_DEVICE,W),G.addEventListener(m.DESIGNER_MOUNT,H);var e=function(e){null==G||G.publishEvent(m.NOCODE_DESIGNER_UPDATE,{type:m.UPDATE_FORMNAME,payload:e})},t=function(e){null==G||G.publishEvent(m.NOCODE_DESIGNER_UPDATE,{type:m.SAVE_AS_TEMPLATE,payload:e})};return g.default.on(m.UPDATE_FORMNAME,e),g.default.on(m.SAVE_AS_TEMPLATE,t),function(){g.default.off(m.UPDATE_FORMNAME,e),g.default.off(m.SAVE_AS_TEMPLATE,t)}}}),[G]),(0,f.useEffect)((function(){a&&(null==G||G.publishEvent(m.NOCODE_DESIGNER_SETTING,a,!0))}),[a,G]),(0,f.useEffect)((function(){r&&(null==G||G.publishEvent(m.NOCODE_DESIGNER_PREVIEW,r))}),[r]),(0,f.useEffect)((function(){n&&(null==G||G.publishEvent(m.NOCODE_DESIGNER_SAVE,n))}),[n]),(0,f.useEffect)((function(){l&&(null==G||G.publishEvent(m.NOCODE_DESIGNER_SAVE_AND_VISIT,l))}),[l]),(0,f.useEffect)((function(){G&&(null==G||G.publishEvent(m.SET_COMPARE_TYPES,O,!0))}),[O,G]),(0,f.useEffect)((function(){G&&G.publishEvent(m.SET_NOCODE_PLATFORM_API,{publishUserEvent:y.publishUserEvent},!0)}),[G]),(0,f.useEffect)((function(){G&&G.publishEvent(m.NOCODE_DESIGNER_SAVE_API,{saveStatus:o},!0)}),[o,G]);var H=(0,f.useCallback)((function(){R(!0)}),[]),W=(0,f.useCallback)((function(e){P(e),k(!0)}),[]);return f.default.createElement(f.default.Fragment,null,f.default.createElement("div",{className:(0,h.default)((0,i.default)({},_.default.hidden,!F),_.default.designer_main)},f.default.createElement(N,(0,d.default)({onRef:B,showPreviewDrawer:W,options:{rootConfig:S}},t)),I&&f.default.createElement(p.default,{formTitle:u,device:T,visible:I,setVisible:k})),f.default.createElement("div",{className:(0,h.default)([_.default.loading_wrapper,(0,i.default)({},_.default.hidden,F)])},f.default.createElement(E.Skeleton,{options:x.DesignerSkeleton})))}}}]);