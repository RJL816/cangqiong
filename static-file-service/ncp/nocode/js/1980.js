"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunknocode_platform"] = self["webpackChunknocode_platform"] || []).push([[1980],{

/***/ "./src/hooks/useFormDataList.ts":
/*!**************************************!*\
  !*** ./src/hooks/useFormDataList.ts ***!
  \**************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\n\nvar _typeof = __webpack_require__(/*! @babel/runtime-corejs3/helpers/typeof */ \"../../node_modules/@babel/runtime-corejs3/helpers/typeof.js\");\nvar _Object$keys = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/keys */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/object/keys.js\");\nvar _Object$getOwnPropertySymbols = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols.js\");\nvar _filterInstanceProperty2 = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/filter */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/instance/filter.js\");\nvar _Object$getOwnPropertyDescriptor = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor.js\");\nvar _Object$getOwnPropertyDescriptors = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors.js\");\nvar _Object$defineProperties = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-properties */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/object/define-properties.js\");\nvar _Object$defineProperty = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-property */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/object/define-property.js\");\nvar _WeakMap = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/weak-map */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/weak-map.js\");\nvar _interopRequireDefault = __webpack_require__(/*! @babel/runtime-corejs3/helpers/interopRequireDefault */ \"../../node_modules/@babel/runtime-corejs3/helpers/interopRequireDefault.js\");\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.SELECT_ACTIONS = void 0;\nvar _map = _interopRequireDefault(__webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/instance/map.js\"));\nvar _concat = _interopRequireDefault(__webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/concat */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/instance/concat.js\"));\nvar _filter = _interopRequireDefault(__webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/filter */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/instance/filter.js\"));\nvar _includes = _interopRequireDefault(__webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/includes */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/instance/includes.js\"));\nvar _find = _interopRequireDefault(__webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/find */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/instance/find.js\"));\nvar _regenerator = _interopRequireDefault(__webpack_require__(/*! @babel/runtime-corejs3/regenerator */ \"../../node_modules/@babel/runtime-corejs3/regenerator/index.js\"));\nvar _defineProperty2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime-corejs3/helpers/defineProperty */ \"../../node_modules/@babel/runtime-corejs3/helpers/defineProperty.js\"));\nvar _asyncToGenerator2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime-corejs3/helpers/asyncToGenerator */ \"../../node_modules/@babel/runtime-corejs3/helpers/asyncToGenerator.js\"));\nvar _slicedToArray2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime-corejs3/helpers/slicedToArray */ \"../../node_modules/@babel/runtime-corejs3/helpers/slicedToArray.js\"));\nvar _react = __webpack_require__(/*! kd_libs/react */ \"webpack/container/remote/kd_libs/react\");\nvar _menuTableUtil = __webpack_require__(/*! @/utils/menuTableUtil */ \"./src/utils/menuTableUtil.js\");\nvar _env = __webpack_require__(/*! @/constants/env */ \"./src/constants/env.js\");\nvar _utils = __webpack_require__(/*! @/utils */ \"./src/utils/index.tsx\");\nvar _useFormDataListState3 = _interopRequireWildcard(__webpack_require__(/*! ./useFormDataListState */ \"./src/hooks/useFormDataListState.ts\"));\nvar _WebUI = __webpack_require__(/*! nocode_component/WebUI */ \"webpack/container/remote/nocode_component/WebUI\");\nvar _useAppContext2 = _interopRequireDefault(__webpack_require__(/*! @/hooks/useAppContext */ \"./src/hooks/useAppContext.js\"));\nvar _PageEventService = __webpack_require__(/*! @/service/PageEventService */ \"./src/service/PageEventService.ts\");\nvar _menuTableActions = __webpack_require__(/*! @/utils/menuTableActions */ \"./src/utils/menuTableActions.ts\");\nvar _menuTableAppActions = __webpack_require__(/*! @/utils/menuTableAppActions */ \"./src/utils/menuTableAppActions.ts\");\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof _WeakMap) return null; var r = new _WeakMap(), t = new _WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { default: e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = _Object$defineProperty && _Object$getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? _Object$getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? _Object$defineProperty(n, u, i) : n[u] = e[u]; } return n.default = e, t && t.set(e, n), n; }\nfunction ownKeys(e, r) { var t = _Object$keys(e); if (_Object$getOwnPropertySymbols) { var o = _Object$getOwnPropertySymbols(e); r && (o = _filterInstanceProperty2(o).call(o, function (r) { return _Object$getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { (0, _defineProperty2.default)(e, r, t[r]); }) : _Object$getOwnPropertyDescriptors ? _Object$defineProperties(e, _Object$getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { _Object$defineProperty(e, r, _Object$getOwnPropertyDescriptor(t, r)); }); } return e; }\n// import { TableContext } from '@/context/apps'\n\nvar LoadingMsg = '数据加载中...';\nvar SELECT_ACTIONS = exports.SELECT_ACTIONS = {\n  check_all: 'check-all',\n  uncheck_all: 'uncheck-all',\n  check: 'check',\n  uncheck: 'uncheck'\n};\nvar useFormDataList = function useFormDataList(formInfo, options, tableActions) {\n  // 改为加载首面统一接口获取筛选条件，不再每次请求表格都获取\n  var _useAppContext = (0, _useAppContext2.default)(),\n    _useAppContext$state = _useAppContext.state,\n    state = _useAppContext$state === void 0 ? {} : _useAppContext$state;\n  var compareTypes = state.compareTypes,\n    defaultAdminFormId = state.defaultAdminFormId,\n    defaultAppsFormId = state.defaultAppsFormId;\n  var appId = formInfo.appId,\n    formId = formInfo.formId,\n    env = formInfo.env,\n    _formInfo$viewAuth = formInfo.viewAuth,\n    viewAuth = _formInfo$viewAuth === void 0 ? true : _formInfo$viewAuth,\n    _formInfo$pending = formInfo.pending,\n    pending = _formInfo$pending === void 0 ? false : _formInfo$pending,\n    setPending = formInfo.setPending;\n  var _options$needSerial = options.needSerial,\n    needSerial = _options$needSerial === void 0 ? false : _options$needSerial,\n    _options$loadMore = options.loadMore,\n    loadMore = _options$loadMore === void 0 ? false : _options$loadMore,\n    _options$loadData = options.loadData,\n    loadData = _options$loadData === void 0 ? true : _options$loadData,\n    _options$updateFooter = options.updateFooter,\n    updateFooter = _options$updateFooter === void 0 ? false : _options$updateFooter,\n    _options$isMob = options.isMob,\n    isMob = _options$isMob === void 0 ? false : _options$isMob,\n    _options$horizontal = options.horizontal,\n    horizontal = _options$horizontal === void 0 ? false : _options$horizontal,\n    operateCol = options.operateCol,\n    _options$columnsDataT = options.columnsDataTranform,\n    columnsDataTranform = _options$columnsDataT === void 0 ? _menuTableUtil.columnsDataTranform : _options$columnsDataT;\n  var sendFooterDataSource = tableActions.sendFooterDataSource,\n    getColHeadFilterConfig = tableActions.getColHeadFilterConfig,\n    getColHeadFilters = tableActions.getColHeadFilters,\n    getInitFormDataList = tableActions.getInitFormDataList,\n    loadFormListWithParams = tableActions.loadFormListWithParams,\n    onSaveFormListSetting = tableActions.onSaveFormListSetting,\n    loadEnumFilterValue = tableActions.getEnumFilterValue,\n    _getStatInfo = tableActions.getStatInfo,\n    getUpdateFooterDataSource = tableActions.getUpdateFooterDataSource,\n    getNewFilters = tableActions.getNewFilters,\n    onDeleteFormDataListItem = tableActions.onDeleteFormDataListItem,\n    onSavePageSize = tableActions.onSavePageSize,\n    getOrderBy = tableActions.getOrderBy,\n    getFormDataListSetting = tableActions.getFormDataListSetting;\n  var _useFormDataListState = (0, _useFormDataListState3.default)(),\n    _useFormDataListState2 = (0, _slicedToArray2.default)(_useFormDataListState, 2),\n    formDataListState = _useFormDataListState2[0],\n    setFormDataListState = _useFormDataListState2[1];\n  var dataSource = formDataListState.dataSource,\n    footerDataSource = formDataListState.footerDataSource,\n    pageNo = formDataListState.pageNo,\n    pageSize = formDataListState.pageSize,\n    totalCount = formDataListState.totalCount,\n    listItemConfig = formDataListState.listItemConfig,\n    listFilterConfig = formDataListState.listFilterConfig,\n    configuredFilterItems = formDataListState.configuredFilterItems,\n    bizButtons = formDataListState.bizButtons,\n    listFilters = formDataListState.listFilters,\n    searchKeywords = formDataListState.searchKeywords,\n    orderBy = formDataListState.orderBy,\n    orderInfo = formDataListState.orderInfo,\n    colHeadFilter = formDataListState.colHeadFilter,\n    enumFilterValue = formDataListState.enumFilterValue,\n    stateInfo = formDataListState.stateInfo,\n    schemaId = formDataListState.schemaId,\n    selectedIds = formDataListState.selectedIds,\n    selectStatus = formDataListState.selectStatus,\n    notInSelectedIds = formDataListState.notInSelectedIds,\n    selectedCount = formDataListState.selectedCount;\n  var defualtFormId = env === _env.ENV_APP ? defaultAppsFormId : env === _env.ENV_ADMIN ? defaultAdminFormId : '';\n  var formListParamsMemo = (0, _react.useMemo)(function () {\n    return {\n      appId: appId,\n      formId: formId,\n      env: env,\n      listItemConfig: listItemConfig,\n      listFilters: listFilters,\n      pageNo: pageNo,\n      pageSize: pageSize,\n      searchKeywords: searchKeywords,\n      updateFooter: true,\n      orderBy: orderBy,\n      orderInfo: orderInfo,\n      viewAuth: viewAuth,\n      schemaId: schemaId\n    };\n  }, [appId, formId, env, listItemConfig, listFilters, pageNo, pageSize, searchKeywords, orderBy, orderInfo, viewAuth, schemaId]);\n  var setFormDataListStateWithPostFooter = (0, _react.useCallback)( /*#__PURE__*/function () {\n    var _ref = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee(data, listFilters, searchKeywords) {\n      var newFooterDataSource;\n      return _regenerator.default.wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            if (!updateFooter) {\n              _context.next = 6;\n              break;\n            }\n            _context.next = 3;\n            return getUpdateFooterDataSource === null || getUpdateFooterDataSource === void 0 ? void 0 : getUpdateFooterDataSource(appId, formId, env, pageNo, pageSize, listFilters, searchKeywords, listItemConfig, footerDataSource);\n          case 3:\n            _context.t0 = _context.sent;\n            _context.next = 7;\n            break;\n          case 6:\n            _context.t0 = footerDataSource;\n          case 7:\n            newFooterDataSource = _context.t0;\n            setFormDataListState(_objectSpread(_objectSpread({}, data), {}, {\n              footerDataSource: newFooterDataSource\n            }));\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee);\n    }));\n    return function (_x, _x2, _x3) {\n      return _ref.apply(this, arguments);\n    };\n  }(), [appId, formId, env, pageNo, pageSize, listItemConfig, footerDataSource, updateFooter, setFormDataListState]);\n  var getSelectedId = (0, _react.useCallback)(function (_ref2) {\n    var _ref2$status = _ref2.status,\n      status = _ref2$status === void 0 ? selectStatus : _ref2$status,\n      info = _ref2.info;\n    var _ref3 = info || {},\n      _ref3$newDataSource = _ref3.newDataSource,\n      newDataSource = _ref3$newDataSource === void 0 ? dataSource : _ref3$newDataSource,\n      _ref3$newNotInIds = _ref3.newNotInIds,\n      newNotInIds = _ref3$newNotInIds === void 0 ? notInSelectedIds : _ref3$newNotInIds,\n      _ref3$newSelectedIds = _ref3.newSelectedIds,\n      newSelectedIds = _ref3$newSelectedIds === void 0 ? selectedIds : _ref3$newSelectedIds;\n    switch (status) {\n      case _useFormDataListState3.CHECK:\n        return newSelectedIds;\n      case _useFormDataListState3.CHECK_ALL:\n        return (0, _map.default)(newDataSource).call(newDataSource, function (item) {\n          return item.id;\n        });\n      case _useFormDataListState3.CHECK_CANCEL:\n        return (0, _menuTableUtil.getSelectedIdByInfo)(newDataSource, newNotInIds);\n      default:\n        return [];\n    }\n  }, [dataSource, notInSelectedIds, selectStatus, selectedIds]);\n\n  // 区分是否是loadMore模式 用于数据更新\n  var setPostState = (0, _react.useCallback)(function (_ref4) {\n    var config = _ref4.config,\n      _ref4$noPreData = _ref4.noPreData,\n      noPreData = _ref4$noPreData === void 0 ? false : _ref4$noPreData,\n      callback = _ref4.callback,\n      updateFooter = _ref4.updateFooter,\n      _ref4$clearSelectInfo = _ref4.clearSelectInfo,\n      clearSelectInfo = _ref4$clearSelectInfo === void 0 ? false : _ref4$clearSelectInfo;\n    var setFormState = updateFooter ? setFormDataListStateWithPostFooter : setFormDataListState;\n    var listFilters = config.listFilters,\n      searchKeywords = config.searchKeywords;\n    var newSelectInfo = clearSelectInfo ? _menuTableAppActions.initSelectInfo : {};\n    var prevDataSource = noPreData ? [] : dataSource; // 搜索和筛选要清空原先数据， 否则在移动端loadMore下，搜索数据会叠加原来数据\n    return /*#__PURE__*/function () {\n      var _ref5 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee2(doPost) {\n        var data;\n        return _regenerator.default.wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return doPost(config);\n            case 2:\n              data = _context2.sent;\n              if (data) {\n                if (loadMore) {\n                  setFormState(_objectSpread(_objectSpread({}, data), {}, {\n                    dataSource: (0, _concat.default)(prevDataSource).call(prevDataSource, data.dataSource)\n                  }, newSelectInfo), listFilters, searchKeywords); // 合并最新config和表格data到state\n                } else {\n                  setFormState(_objectSpread(_objectSpread({}, data), newSelectInfo), listFilters, searchKeywords);\n                }\n                callback === null || callback === void 0 || callback(data);\n              } else {\n                setFormState(_objectSpread({\n                  dataSource: [],\n                  footerDataSource: [],\n                  lastPage: false\n                }, newSelectInfo), listFilters, searchKeywords);\n              }\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2);\n      }));\n      return function (_x4) {\n        return _ref5.apply(this, arguments);\n      };\n    }();\n  }, [setFormDataListState, setFormDataListStateWithPostFooter, loadMore, dataSource]);\n\n  // 区分是否是loadMore模式，并且重新请求footerDataSource数据， 用于数据更新\n  var setPostStateWithPostFooter = (0, _react.useCallback)(function (_ref6) {\n    var config = _ref6.config,\n      _ref6$noPreData = _ref6.noPreData,\n      noPreData = _ref6$noPreData === void 0 ? false : _ref6$noPreData,\n      callback = _ref6.callback,\n      _ref6$clearSelectInfo = _ref6.clearSelectInfo,\n      clearSelectInfo = _ref6$clearSelectInfo === void 0 ? false : _ref6$clearSelectInfo;\n    return setPostState({\n      config: config,\n      noPreData: noPreData,\n      callback: callback,\n      updateFooter: true,\n      clearSelectInfo: clearSelectInfo\n    });\n  }, [setPostState]);\n  var getColumns = (0, _react.useCallback)(function (listItemConfig) {\n    var colOptions = {\n      primaryKey: 'number',\n      isMob: isMob,\n      needSerial: needSerial,\n      horizontal: horizontal,\n      operateCol: operateCol\n    };\n    var columns = columnsDataTranform(listItemConfig, colOptions, appId, formId);\n    var visibleColumnKeys = (0, _menuTableUtil.getVisibleColumnKeys)(columns);\n    return {\n      columns: columns,\n      visibleColumnKeys: visibleColumnKeys\n    };\n  }, [isMob, needSerial, horizontal, operateCol, appId, formId, columnsDataTranform]);\n\n  // 用于初始化\n  var setInitPostState = (0, _react.useCallback)(function (config) {\n    var closeMessage = (0, _utils.showLoadingMessage)(LoadingMsg);\n    return /*#__PURE__*/function () {\n      var _ref7 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee3(doPost) {\n        var data, colHeadFilters, _getColumns, columns, visibleColumnKeys, result;\n        return _regenerator.default.wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              setPending === null || setPending === void 0 || setPending(true);\n              _context3.next = 3;\n              return doPost(config);\n            case 3:\n              data = _context3.sent;\n              if (!data) {\n                _context3.next = 13;\n                break;\n              }\n              colHeadFilters = (0, _menuTableUtil.getColHeadFilterByConfigured)(data.configuredFilterItems);\n              _getColumns = getColumns(data.listItemConfig), columns = _getColumns.columns, visibleColumnKeys = _getColumns.visibleColumnKeys;\n              result = _objectSpread(_objectSpread({}, data), {}, {\n                colHeadFilters: colHeadFilters,\n                columns: columns,\n                visibleColumnKeys: visibleColumnKeys,\n                schemaId: config.schemaId || ''\n              });\n              setFormDataListState(result);\n              closeMessage();\n              return _context3.abrupt(\"return\", result);\n            case 13:\n              setFormDataListState({\n                dataSource: [],\n                footerDataSource: [],\n                lastPage: true\n              });\n              closeMessage();\n              return _context3.abrupt(\"return\", {});\n            case 16:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3);\n      }));\n      return function (_x5) {\n        return _ref7.apply(this, arguments);\n      };\n    }();\n  }, [setFormDataListState, getColumns, setPending]);\n  var onAfterConfirm = (0, _react.useCallback)(function (totalCount) {\n    _WebUI.WebMsg === null || _WebUI.WebMsg === void 0 || _WebUI.WebMsg.showNotificationMsg({\n      // todo 重构把这部分提取到外面统一处理\n      pageId: '',\n      param: [{\n        type: 'success',\n        content: \"\\u7B5B\\u9009\\u51FA\".concat(totalCount, \"\\u6761\\u8BB0\\u5F55\\u3002\")\n      }]\n    });\n  }, [_WebUI.WebMsg]);\n  var onLoadInitData = function onLoadInitData(appId, formId, env, viewAuth, curSchemaId) {\n    return setInitPostState({\n      appId: appId,\n      formId: formId,\n      schemaId: curSchemaId,\n      env: env,\n      viewAuth: viewAuth,\n      compareTypes: compareTypes,\n      searchKeywords: searchKeywords\n    })(getInitFormDataList);\n  };\n  var onLoadSetting = function onLoadSetting(appId, formId, env, viewAuth, curSchemaId) {\n    return setInitPostState({\n      appId: appId,\n      formId: formId,\n      schemaId: curSchemaId,\n      env: env,\n      viewAuth: viewAuth,\n      compareTypes: compareTypes\n    })(getFormDataListSetting);\n  };\n  var onLoadMoreData = (0, _react.useCallback)(function (pageNo) {\n    setPostStateWithPostFooter({\n      config: _objectSpread(_objectSpread({}, formListParamsMemo), {}, {\n        pageNo: pageNo\n      })\n    })(loadFormListWithParams);\n  }, [setPostStateWithPostFooter, formListParamsMemo]);\n  var onUpdateDataSource = (0, _react.useCallback)(function (dataSource) {\n    setFormDataListState({\n      dataSource: dataSource\n    });\n  }, [setFormDataListState]);\n  var onAggCellChange = (0, _react.useCallback)( /*#__PURE__*/function () {\n    var _ref8 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee4(fieldName, item, panelType) {\n      var field, data;\n      return _regenerator.default.wrap(function _callee4$(_context4) {\n        while (1) switch (_context4.prev = _context4.next) {\n          case 0:\n            field = footerDataSource[0][fieldName]; // 发生值改变的单元格字段\n            if (!(0, _menuTableUtil.isSameField)(field, item)) {\n              _context4.next = 3;\n              break;\n            }\n            return _context4.abrupt(\"return\");\n          case 3:\n            _context4.next = 5;\n            return sendFooterDataSource(appId, formId, env, fieldName, item, panelType);\n          case 5:\n            data = (0, _menuTableUtil.prevHandFooterDataSource)(fieldName, item, panelType, footerDataSource);\n            setFormDataListState({\n              footerDataSource: data\n            });\n          case 7:\n          case \"end\":\n            return _context4.stop();\n        }\n      }, _callee4);\n    }));\n    return function (_x6, _x7, _x8) {\n      return _ref8.apply(this, arguments);\n    };\n  }(), [appId, formId, env, footerDataSource, setFormDataListState]);\n  var getStatInfo = (0, _react.useCallback)( /*#__PURE__*/function () {\n    var _ref9 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee5(fieldName) {\n      return _regenerator.default.wrap(function _callee5$(_context5) {\n        while (1) switch (_context5.prev = _context5.next) {\n          case 0:\n            _context5.next = 2;\n            return _getStatInfo === null || _getStatInfo === void 0 ? void 0 : _getStatInfo({\n              appId: appId,\n              formId: formId,\n              env: env,\n              fieldName: fieldName,\n              listFilters: listFilters,\n              pageSize: pageSize,\n              pageNo: pageNo,\n              searchKeywords: searchKeywords,\n              schemaId: schemaId\n            });\n          case 2:\n            return _context5.abrupt(\"return\", _context5.sent);\n          case 3:\n          case \"end\":\n            return _context5.stop();\n        }\n      }, _callee5);\n    }));\n    return function (_x9) {\n      return _ref9.apply(this, arguments);\n    };\n  }(), [appId, formId, env, listFilters, pageSize, pageNo, searchKeywords, schemaId]);\n  var onAggVisibleChange = (0, _react.useCallback)( /*#__PURE__*/function () {\n    var _ref10 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee6(fieldName) {\n      var data;\n      return _regenerator.default.wrap(function _callee6$(_context6) {\n        while (1) switch (_context6.prev = _context6.next) {\n          case 0:\n            _context6.next = 2;\n            return getStatInfo(fieldName);\n          case 2:\n            data = _context6.sent;\n            setFormDataListState({\n              stateInfo: data\n            });\n          case 4:\n          case \"end\":\n            return _context6.stop();\n        }\n      }, _callee6);\n    }));\n    return function (_x10) {\n      return _ref10.apply(this, arguments);\n    };\n  }(), [getStatInfo, stateInfo, setFormDataListState]);\n  var onFilterConfirm = (0, _react.useCallback)( /*#__PURE__*/function () {\n    var _ref11 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee7(configuredFilterItems) {\n      var newConfiguredFilterItems, newColHeadFilters, listFilters;\n      return _regenerator.default.wrap(function _callee7$(_context7) {\n        while (1) switch (_context7.prev = _context7.next) {\n          case 0:\n            newConfiguredFilterItems = (0, _menuTableUtil.getEffectiveFilterItems)(configuredFilterItems);\n            newColHeadFilters = (0, _menuTableUtil.getColHeadFilterByConfigured)(newConfiguredFilterItems);\n            _context7.next = 4;\n            return getNewFilters === null || getNewFilters === void 0 ? void 0 : getNewFilters(appId, formId, env, newConfiguredFilterItems);\n          case 4:\n            listFilters = _context7.sent;\n            setFormDataListState({\n              colHeadFilters: newColHeadFilters,\n              listFilters: listFilters,\n              configuredFilterItems: newConfiguredFilterItems,\n              showFilterSettingPop: false\n            });\n            setPostStateWithPostFooter({\n              config: _objectSpread(_objectSpread({}, formListParamsMemo), {}, {\n                pageNo: 1,\n                // 筛选结果跳转到第一页\n                colHeadFilters: newColHeadFilters,\n                listFilters: listFilters,\n                configuredFilterItems: newConfiguredFilterItems,\n                showFilterSettingPop: false\n              }),\n              noPreData: true,\n              callback: function callback(data) {\n                onAfterConfirm === null || onAfterConfirm === void 0 || onAfterConfirm(data === null || data === void 0 ? void 0 : data.totalCount);\n              },\n              // 筛选结果跳转到第一页\n              clearSelectInfo: true\n            })(loadFormListWithParams);\n          case 7:\n          case \"end\":\n            return _context7.stop();\n        }\n      }, _callee7);\n    }));\n    return function (_x11) {\n      return _ref11.apply(this, arguments);\n    };\n  }(), [formListParamsMemo, setPostStateWithPostFooter, appId, formId, env, setFormDataListState]);\n  var onColFilterConfirm = (0, _react.useCallback)( /*#__PURE__*/function () {\n    var _ref12 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee8(currentFieldFilterItems, headField) {\n      var otherFieldsFilters, newConfiguredFilterItems, newColHeadFilters, listFilters;\n      return _regenerator.default.wrap(function _callee8$(_context8) {\n        while (1) switch (_context8.prev = _context8.next) {\n          case 0:\n            // publishUserEvent({\n            //   appId,\n            //   formId,\n            //   action: 'au_ch_fil_comf'\n            // })\n            otherFieldsFilters = (0, _menuTableUtil.getOtherFieldsFilters)(headField, configuredFilterItems, listFilterConfig);\n            newConfiguredFilterItems = (0, _menuTableUtil.mergeFilterItems)(otherFieldsFilters, currentFieldFilterItems);\n            newConfiguredFilterItems = (0, _menuTableUtil.getEffectiveFilterItems)(newConfiguredFilterItems);\n            newColHeadFilters = (0, _menuTableUtil.getColHeadFilterByConfigured)(newConfiguredFilterItems);\n            _context8.next = 6;\n            return getColHeadFilters === null || getColHeadFilters === void 0 ? void 0 : getColHeadFilters(appId, formId, env, newConfiguredFilterItems, headField);\n          case 6:\n            listFilters = _context8.sent;\n            setFormDataListState({\n              // 更新配置\n              colHeadFilters: newColHeadFilters,\n              listFilters: listFilters,\n              configuredFilterItems: newConfiguredFilterItems\n            });\n            setPostStateWithPostFooter({\n              // 更新数据\n              config: _objectSpread(_objectSpread({}, formListParamsMemo), {}, {\n                pageNo: 1,\n                // 筛选结果跳转到第一页\n                colHeadFilters: newColHeadFilters,\n                listFilters: listFilters,\n                configuredFilterItems: newConfiguredFilterItems\n              }),\n              callback: function callback(data) {\n                onAfterConfirm === null || onAfterConfirm === void 0 || onAfterConfirm(data === null || data === void 0 ? void 0 : data.totalCount);\n              },\n              // 筛选结果跳转到第一页\n              clearSelectInfo: true\n            })(loadFormListWithParams);\n          case 9:\n          case \"end\":\n            return _context8.stop();\n        }\n      }, _callee8);\n    }));\n    return function (_x12, _x13) {\n      return _ref12.apply(this, arguments);\n    };\n  }(), [formListParamsMemo, setPostStateWithPostFooter, onAfterConfirm, setFormDataListState, configuredFilterItems, listFilterConfig]);\n  var handleSelected = (0, _react.useCallback)(function (data) {\n    // 兼容移动端\n    var newDataSource = loadMore ? (0, _concat.default)(dataSource).call(dataSource, data.dataSource || []) : data.dataSource;\n    var newSelectedIds = getSelectedId({\n      info: {\n        newDataSource: newDataSource\n      }\n    });\n    setFormDataListState({\n      selectedIds: newSelectedIds\n    });\n  }, [getSelectedId, loadMore, dataSource]);\n  var onPaginationChange = (0, _react.useCallback)(function (pageNo, newPageSize) {\n    setPostStateWithPostFooter({\n      config: _objectSpread(_objectSpread({}, formListParamsMemo), {}, {\n        pageSize: newPageSize || pageSize,\n        pageNo: pageNo\n      }),\n      callback: handleSelected\n    })(loadFormListWithParams);\n    newPageSize && (onSavePageSize === null || onSavePageSize === void 0 ? void 0 : onSavePageSize(appId, formId, env, newPageSize));\n  }, [formListParamsMemo, setPostStateWithPostFooter, onSavePageSize, env, handleSelected, pageSize]);\n\n  // 根据更新后的dataSource和已删除的id，计算新的选中信息\n  // singleDel开启处理操作栏及PopBill中的单项删除\n  var handleDeleteSelectedId = (0, _react.useCallback)(function (curDataSource, deletedId) {\n    var singleDel = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    var ids = Array.isArray(deletedId) ? deletedId : [deletedId];\n    var deleteCount = totalCount - ids.length;\n    if (selectStatus === _useFormDataListState3.CHECK_CANCEL) {\n      // 删除的可能是未勾选的\n      var _filterAndCount = (0, _menuTableUtil.filterAndCount)(ids, notInSelectedIds),\n        _filterAndCount2 = (0, _slicedToArray2.default)(_filterAndCount, 2),\n        newNotInIds = _filterAndCount2[0],\n        count = _filterAndCount2[1];\n      var newCount = count === 0 ? selectedCount - ids.length : selectedCount;\n      var newSelectedIds = getSelectedId({\n        info: {\n          newDataSource: curDataSource,\n          newNotInIds: newNotInIds\n        }\n      });\n      setFormDataListState({\n        selectedIds: newSelectedIds,\n        notInSelectedIds: newNotInIds,\n        selectedCount: (0, _menuTableUtil.getResonableCount)(newCount),\n        totalCount: deleteCount\n      });\n    } else {\n      // 勾选的单项删除的id一定在selectedIds中，操作栏的不一定\n      var _filterAndCount3 = (0, _menuTableUtil.filterAndCount)(ids, selectedIds),\n        _filterAndCount4 = (0, _slicedToArray2.default)(_filterAndCount3, 2),\n        _newSelectedIds = _filterAndCount4[0],\n        _count = _filterAndCount4[1];\n      var _newCount = singleDel ? selectedCount - _count : selectedCount - ids.length;\n      setFormDataListState({\n        selectedIds: _newSelectedIds,\n        selectedCount: (0, _menuTableUtil.getResonableCount)(_newCount),\n        totalCount: deleteCount\n      });\n    }\n  }, [notInSelectedIds, selectedIds, selectedCount, selectStatus, getSelectedId, totalCount]);\n\n  // 批量删除，刷新请求回来后再处理勾选\n  var deleteUpdateCallback = (0, _react.useCallback)(function (deletedId, singleDel) {\n    return function (data) {\n      handleDeleteSelectedId(data.dataSource, deletedId, singleDel);\n    };\n  }, [handleDeleteSelectedId]);\n\n  // 返回promise\n  var onAfterDeleteRows = (0, _react.useCallback)(function (deletedId, currentPageData) {\n    var singleDel = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    var delCallback = arguments.length > 3 ? arguments[3] : undefined;\n    var ids = Array.isArray(deletedId) ? deletedId : [deletedId];\n    var deleteCount = ids.length;\n    var prevTotalPage = (0, _menuTableUtil.calTotalPage)(pageSize, totalCount);\n    var nextTotalCount = totalCount - deleteCount;\n    var nextTotalPage = (0, _menuTableUtil.calTotalPage)(pageSize, nextTotalCount);\n    // deleteUpdateCallback为前端计算新的勾选信息逻辑，delCallback满足部分删除失败场景使用后端返回的失败id作为新的勾选项\n    var callback = delCallback || deleteUpdateCallback(ids, singleDel);\n    // 刷新前，删除本地数据，否则已选条数会有误\n    setFormDataListState({\n      dataSource: currentPageData\n    });\n    if (deleteCount >= dataSource.length) {\n      // 页码有可能改动的情况\n      return setPostStateWithPostFooter({\n        config: _objectSpread(_objectSpread({}, formListParamsMemo), {}, {\n          pageNo: nextTotalPage >= pageNo ? pageNo : nextTotalPage\n        }),\n        callback: callback\n      })(loadFormListWithParams);\n    } else {\n      return setPostStateWithPostFooter({\n        config: formListParamsMemo,\n        callback: callback\n      })(loadFormListWithParams);\n    }\n  }, [formListParamsMemo, setPostStateWithPostFooter, pageSize, pageNo, totalCount, dataSource, deleteUpdateCallback]);\n\n  // 保留所有配置进行刷新，不带顶部loading\n  var onAfterSave = (0, _react.useCallback)(function () {\n    return setPostStateWithPostFooter({\n      config: formListParamsMemo\n    })(loadFormListWithParams);\n  }, [formListParamsMemo, setPostStateWithPostFooter]);\n  var onAfterAddRows = (0, _react.useCallback)(function () {\n    var addCount = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n    var nextTotalCount = totalCount + addCount;\n    var nextTotalPage = (0, _menuTableUtil.calTotalPage)(pageSize, nextTotalCount); // 新增一行或多行数据，页码自动跳转到后面\n    setPostStateWithPostFooter({\n      config: _objectSpread(_objectSpread({}, formListParamsMemo), {}, {\n        pageNo: nextTotalPage\n      }),\n      clearSelectInfo: true\n    })(loadFormListWithParams);\n  }, [formListParamsMemo, setPostStateWithPostFooter]);\n  var handleRowDelete = (0, _react.useCallback)( /*#__PURE__*/function () {\n    var _ref13 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee9(pkId, callback) {\n      var res, newTableDataSource;\n      return _regenerator.default.wrap(function _callee9$(_context9) {\n        while (1) switch (_context9.prev = _context9.next) {\n          case 0:\n            (0, _PageEventService.publishUserEvent)({\n              appId: appId,\n              formId: formId,\n              action: 'au_lo_del_comf'\n            });\n            _context9.prev = 1;\n            _context9.next = 4;\n            return onDeleteFormDataListItem(appId, formId, pkId);\n          case 4:\n            res = _context9.sent;\n            newTableDataSource = (0, _filter.default)(dataSource).call(dataSource, function (item) {\n              return item.id !== pkId;\n            });\n            onAfterDeleteRows(pkId, newTableDataSource, true);\n            callback === null || callback === void 0 || callback(res);\n            (0, _utils.showNotice)('success', '删除成功');\n            _context9.next = 14;\n            break;\n          case 11:\n            _context9.prev = 11;\n            _context9.t0 = _context9[\"catch\"](1);\n            (0, _utils.showNotice)('error', _context9.t0.message);\n          case 14:\n          case \"end\":\n            return _context9.stop();\n        }\n      }, _callee9, null, [[1, 11]]);\n    }));\n    return function (_x14, _x15) {\n      return _ref13.apply(this, arguments);\n    };\n  }(), [appId, formId, dataSource, onAfterDeleteRows, onDeleteFormDataListItem]);\n  var onRowDelete = (0, _react.useCallback)(function (pkId, callback) {\n    (0, _PageEventService.publishUserEvent)({\n      appId: appId,\n      formId: formId,\n      action: 'au_lo_del'\n    });\n    (0, _utils.showDeleteConfirmModal)({\n      title: '',\n      message: '确定删除该记录吗？',\n      detail: '',\n      onOk: function onOk() {\n        return handleRowDelete(pkId, callback);\n      },\n      onCancel: function onCancel() {}\n    });\n  }, [appId, formId, handleRowDelete]);\n\n  // 返回 已选id和filter 的拼接串，传给后端\n  var getSelectedQueryString = (0, _react.useCallback)(function () {\n    return (0, _menuTableUtil.getSelectedSQL)({\n      status: selectStatus,\n      selectedIds: selectedIds,\n      notInIds: notInSelectedIds,\n      filter: listFilters === null || listFilters === void 0 ? void 0 : listFilters[0]\n    });\n  }, [selectStatus, selectedIds, notInSelectedIds, listFilters]);\n  var setSelectedInfo = (0, _react.useCallback)(function () {\n    var ids = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : selectedIds;\n    var status = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : selectStatus;\n    var notInIds = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : notInSelectedIds;\n    var newCount = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : selectedCount;\n    setFormDataListState({\n      selectedIds: ids,\n      selectStatus: status,\n      notInSelectedIds: notInIds,\n      selectedCount: newCount\n    });\n  }, [selectStatus, selectedIds, notInSelectedIds, selectedCount]);\n\n  // 保留所有配置进行刷新，带顶部loading\n  var onRefreshWithSetting = (0, _react.useCallback)( /*#__PURE__*/(0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee10() {\n    var closeMessage, newConfig, _ref15, _ref15$listFilterConf, newFilterConfig, _ref15$listItemConfig, newItemConfig, _ref15$listTreeConfig, newTreeConfig, newFilterFieldNames, newConfiguredFilterItems, filterInfo, newColHeadFilters, _listFilters, newConfigSortIds, newSortItems, newOrderInfo, _orderBy;\n    return _regenerator.default.wrap(function _callee10$(_context10) {\n      while (1) switch (_context10.prev = _context10.next) {\n        case 0:\n          closeMessage = (0, _utils.showLoadingMessage)(LoadingMsg);\n          _context10.prev = 1;\n          _context10.next = 4;\n          return getFormDataListSetting({\n            schemaId: schemaId\n          });\n        case 4:\n          newConfig = _context10.sent;\n          _ref15 = newConfig || {}, _ref15$listFilterConf = _ref15.listFilterConfig, newFilterConfig = _ref15$listFilterConf === void 0 ? [] : _ref15$listFilterConf, _ref15$listItemConfig = _ref15.listItemConfig, newItemConfig = _ref15$listItemConfig === void 0 ? [] : _ref15$listItemConfig, _ref15$listTreeConfig = _ref15.listTreeConfig, newTreeConfig = _ref15$listTreeConfig === void 0 ? [] : _ref15$listTreeConfig;\n          newFilterFieldNames = (0, _map.default)(newFilterConfig).call(newFilterConfig, function (item) {\n            return item.fieldName;\n          }); // 过滤无权限的旧字段\n          newConfiguredFilterItems = (0, _filter.default)(configuredFilterItems).call(configuredFilterItems, function (item) {\n            return (0, _includes.default)(newFilterFieldNames).call(newFilterFieldNames, item.fieldName);\n          });\n          filterInfo = {}; // 已配置筛选项中含有无权限字段则过滤后重新请求\n          if (!(newConfiguredFilterItems.length !== configuredFilterItems.length)) {\n            _context10.next = 15;\n            break;\n          }\n          newColHeadFilters = (0, _menuTableUtil.getColHeadFilterByConfigured)(newConfiguredFilterItems);\n          _context10.next = 13;\n          return getNewFilters === null || getNewFilters === void 0 ? void 0 : getNewFilters(appId, formId, env, newConfiguredFilterItems);\n        case 13:\n          _listFilters = _context10.sent;\n          filterInfo = {\n            colHeadFilters: newColHeadFilters,\n            configuredFilterItems: newConfiguredFilterItems,\n            listFilters: _listFilters\n          };\n        case 15:\n          newConfigSortIds = (0, _map.default)(newItemConfig).call(newItemConfig, function (item) {\n            return item.number;\n          });\n          newSortItems = (0, _filter.default)(orderInfo).call(orderInfo, function (item) {\n            return (0, _includes.default)(newConfigSortIds).call(newConfigSortIds, item.number);\n          });\n          newOrderInfo = {}; // 已配置排序中含有无权限字段则过滤后重新请求\n          if (!(newSortItems.length !== orderInfo.length)) {\n            _context10.next = 23;\n            break;\n          }\n          _context10.next = 21;\n          return getOrderBy(appId, formId, env, orderInfo);\n        case 21:\n          _orderBy = _context10.sent;\n          newOrderInfo = {\n            orderBy: _orderBy,\n            orderInfo: newSortItems\n          };\n        case 23:\n          setFormDataListState(_objectSpread(_objectSpread({\n            listFilterConfig: newFilterConfig,\n            listItemConfig: newItemConfig,\n            listTreeConfig: newTreeConfig\n          }, filterInfo), newOrderInfo));\n          delete newOrderInfo.orderInfo;\n          _context10.next = 27;\n          return setPostStateWithPostFooter({\n            config: _objectSpread(_objectSpread(_objectSpread({}, formListParamsMemo), filterInfo), newOrderInfo),\n            noPreData: true\n          })(loadFormListWithParams);\n        case 27:\n          closeMessage();\n          _context10.next = 33;\n          break;\n        case 30:\n          _context10.prev = 30;\n          _context10.t0 = _context10[\"catch\"](1);\n          closeMessage({\n            type: 'error',\n            content: (_context10.t0 === null || _context10.t0 === void 0 ? void 0 : _context10.t0.message) || '刷新失败'\n          });\n        case 33:\n        case \"end\":\n          return _context10.stop();\n      }\n    }, _callee10, null, [[1, 30]]);\n  })), [appId, formId, env, configuredFilterItems, orderInfo]);\n\n  // 保持操作失败条目的选中\n  var keepErrSelect = (0, _react.useCallback)(function (result) {\n    if (result) {\n      var errIds = (0, _menuTableUtil.getDelData)(result);\n      var newSelectInfo = {\n        selectStatus: _useFormDataListState3.CHECK,\n        selectedIds: errIds,\n        notInSelectedIds: [],\n        selectedCount: errIds.length\n      };\n      setFormDataListState(newSelectInfo);\n    }\n  }, []);\n\n  // 出现部分记录删除失败则会刷新表单\n  var onBatchDelete = (0, _react.useCallback)(function () {\n    var params = {\n      filter: getSelectedQueryString(),\n      queryFilter: (listFilters === null || listFilters === void 0 ? void 0 : listFilters[0]) || ''\n    };\n    return (0, _menuTableActions.onDeleteItemsWithFilter)(appId, formId, schemaId, searchKeywords, params, orderBy).then(function (res) {\n      var successCount = res.successCount,\n        result = res.result;\n      var newTotal = totalCount - successCount;\n      // 真实被后端删除的全部id\n      var realDelIds = (0, _menuTableUtil.getDelData)(result, false);\n      if (loadMore) {\n        // 移动端删除后过滤dataSource即可，不能重新请求页面数据\n        var newDataSource = (0, _menuTableUtil.filterData)(realDelIds, dataSource);\n        setFormDataListState({\n          selectedIds: [],\n          notInSelectedIds: [],\n          selectStatus: _useFormDataListState3.CHECK,\n          selectedCount: 0,\n          dataSource: newDataSource,\n          totalCount: newTotal\n        });\n      } else {\n        onAfterDeleteRows(realDelIds, (0, _menuTableUtil.filterData)(realDelIds, dataSource));\n        setFormDataListState(_objectSpread({}, _menuTableAppActions.initSelectInfo));\n      }\n      return res;\n    }).catch(function (err) {\n      var _ref16 = err.data || {},\n        result = _ref16.result;\n      // 保持未删除条目的选中\n      var realDelIds = (0, _menuTableUtil.getDelData)(result, false);\n      var refreshPromise;\n      if (loadMore) {\n        keepErrSelect(result);\n        refreshPromise = setPostStateWithPostFooter({\n          config: _objectSpread(_objectSpread({}, formListParamsMemo), {}, {\n            pageNo: 1\n          }),\n          noPreData: true\n        })(loadFormListWithParams);\n      } else {\n        // 走常规的删除后翻页检查，callback中重置勾选信息\n        refreshPromise = onAfterDeleteRows(realDelIds, (0, _menuTableUtil.filterData)(realDelIds, dataSource), false);\n      }\n      return refreshPromise.then(function (res) {\n        keepErrSelect(result);\n        // 只要有删除失败的都要给错误提示\n        throw err;\n      });\n    });\n  }, [appId, formId, searchKeywords, dataSource, onAfterDeleteRows, loadMore, totalCount, orderBy, listFilters, schemaId]);\n  var onListSettingConfirm = (0, _react.useCallback)(function (keys, lockIndex, listData) {\n    var _context11;\n    var obj = {};\n    listItemConfig.forEach(function (item) {\n      obj[item.number] = item;\n    });\n    var newListItemConfig = listData === null || listData === void 0 ? void 0 : (0, _map.default)(listData).call(listData, function (item) {\n      return _objectSpread(_objectSpread({}, obj[item.key]), {}, {\n        display: !!(0, _find.default)(keys).call(keys, function (key) {\n          return key === item.key;\n        })\n      });\n    });\n    // 移动端无锁定列lockIndex是undefined，但不能影响pc的列锁定\n    lockIndex !== undefined && (newListItemConfig === null || newListItemConfig === void 0 ? void 0 : newListItemConfig.forEach(function (col, i) {\n      col.locked = i <= lockIndex;\n    }));\n    var lockedKeys = newListItemConfig === null || newListItemConfig === void 0 ? void 0 : (0, _map.default)(_context11 = (0, _filter.default)(newListItemConfig).call(newListItemConfig, function (item) {\n      return item.locked;\n    })).call(_context11, function (item) {\n      return item.number;\n    });\n    setFormDataListState({\n      showListSettingPop: false,\n      listItemConfig: newListItemConfig || listItemConfig\n    });\n    onSaveFormListSetting === null || onSaveFormListSetting === void 0 || onSaveFormListSetting(appId, formId, env, keys, lockedKeys);\n  }, [setFormDataListState, listItemConfig, appId, formId, env]);\n  var onFilterItemDelete = (0, _react.useCallback)( /*#__PURE__*/function () {\n    var _ref17 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee11(i) {\n      var newItems;\n      return _regenerator.default.wrap(function _callee11$(_context12) {\n        while (1) switch (_context12.prev = _context12.next) {\n          case 0:\n            newItems = configuredFilterItems === null || configuredFilterItems === void 0 ? void 0 : (0, _filter.default)(configuredFilterItems).call(configuredFilterItems, function (item, index) {\n              return i !== index;\n            });\n            onFilterConfirm(newItems);\n          case 2:\n          case \"end\":\n            return _context12.stop();\n        }\n      }, _callee11);\n    }));\n    return function (_x16) {\n      return _ref17.apply(this, arguments);\n    };\n  }(), [configuredFilterItems, onFilterConfirm]);\n  var onChangeFilters = (0, _react.useCallback)(function (colHeadFilters) {\n    setFormDataListState({\n      colHeadFilters: colHeadFilters\n    });\n  }, [setFormDataListState]);\n\n  // 刷新需要重新获取所有表格配置和数据（保留了关键词）\n  var onRefresh = (0, _react.useCallback)(function () {\n    return onLoadInitData(appId, formId || defualtFormId, env, viewAuth);\n  }, [appId, formId, defualtFormId, env, onLoadInitData, viewAuth]);\n\n  // const onRefresh = useCallback(() => {\n  //   return setPostStateWithPostFooter(formListParamsMemo, true)(loadFormListWithParams)\n  // }, [formListParamsMemo, setPostStateWithPostFooter])\n\n  var onSearch = (0, _react.useCallback)(function (value) {\n    // 关键词搜索时回到第一页\n    setFormDataListState({\n      searchKeywords: value,\n      pageNo: 1\n    });\n  }, [setFormDataListState]);\n  var onColSort = (0, _react.useCallback)( /*#__PURE__*/function () {\n    var _ref18 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee12(orderInfo) {\n      var orderBy;\n      return _regenerator.default.wrap(function _callee12$(_context13) {\n        while (1) switch (_context13.prev = _context13.next) {\n          case 0:\n            _context13.next = 2;\n            return getOrderBy(appId, formId, env, orderInfo);\n          case 2:\n            orderBy = _context13.sent;\n            setFormDataListState({\n              orderInfo: orderInfo,\n              orderBy: orderBy\n            });\n            setPostState({\n              config: _objectSpread(_objectSpread({}, formListParamsMemo), {}, {\n                orderBy: orderBy\n              })\n            })(loadFormListWithParams);\n          case 5:\n          case \"end\":\n            return _context13.stop();\n        }\n      }, _callee12);\n    }));\n    return function (_x17) {\n      return _ref18.apply(this, arguments);\n    };\n  }(), [appId, formId, env, formListParamsMemo, setFormDataListState, setPostState]);\n  var onSetShowListSettingPop = (0, _react.useCallback)(function (v) {\n    setFormDataListState({\n      showListSettingPop: v\n    });\n  }, [setFormDataListState]);\n  var onSetShowFilterSettingPop = (0, _react.useCallback)(function (v) {\n    setFormDataListState({\n      showFilterSettingPop: v\n    });\n  }, [setFormDataListState]);\n  var onSetShowSortSettingPop = (0, _react.useCallback)(function (v) {\n    setFormDataListState({\n      showSortSettingPop: v\n    });\n  }, [setFormDataListState]);\n  var withoutSearchKeywordsParamsMemo = (0, _react.useMemo)(function () {\n    return {\n      appId: appId,\n      formId: formId,\n      schemaId: schemaId,\n      env: env,\n      listItemConfig: listItemConfig,\n      listFilters: listFilters,\n      pageNo: pageNo,\n      pageSize: pageSize,\n      updateFooter: true,\n      orderBy: orderBy,\n      orderInfo: orderInfo,\n      viewAuth: viewAuth\n    };\n  }, [appId, formId, schemaId, env, listItemConfig, listFilters, pageNo, pageSize, orderBy, orderInfo, viewAuth]);\n  var loadSearchResult = (0, _react.useCallback)( /*#__PURE__*/function () {\n    var _ref19 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee13(searchKeywords) {\n      return _regenerator.default.wrap(function _callee13$(_context14) {\n        while (1) switch (_context14.prev = _context14.next) {\n          case 0:\n            setPostStateWithPostFooter({\n              config: _objectSpread(_objectSpread({}, withoutSearchKeywordsParamsMemo), {}, {\n                searchKeywords: searchKeywords\n              }),\n              noPreData: true,\n              // 搜索需清空原有数据\n              clearSelectInfo: true\n            })(loadFormListWithParams);\n          case 1:\n          case \"end\":\n            return _context14.stop();\n        }\n      }, _callee13);\n    }));\n    return function (_x18) {\n      return _ref19.apply(this, arguments);\n    };\n  }(), [withoutSearchKeywordsParamsMemo, setPostStateWithPostFooter]);\n  var debounceSearch = (0, _react.useMemo)(function () {\n    return (0, _utils.debounce)(loadSearchResult, 500);\n  }, [loadSearchResult]);\n  var handleDebounceSearch = (0, _react.useCallback)( /*#__PURE__*/function () {\n    var _ref20 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee14(searchKeywords) {\n      return _regenerator.default.wrap(function _callee14$(_context15) {\n        while (1) switch (_context15.prev = _context15.next) {\n          case 0:\n            debounceSearch(searchKeywords);\n          case 1:\n          case \"end\":\n            return _context15.stop();\n        }\n      }, _callee14);\n    }));\n    return function (_x19) {\n      return _ref20.apply(this, arguments);\n    };\n  }(), [debounceSearch]);\n  var getColHeadFilter = (0, _react.useCallback)(function (fieldName) {\n    var filtersExceptFieldEnumType = (0, _menuTableUtil.getFiltersExceptFieldEnumType)(fieldName, configuredFilterItems); // 发送其余筛选条件去查询枚举值,即当前字段且是枚举类型的条件除外\n    return getColHeadFilterConfig(appId, formId, env, fieldName, filtersExceptFieldEnumType, schemaId);\n  }, [appId, formId, env, configuredFilterItems, schemaId]);\n  var onColHeadFilterVisibleChange = (0, _react.useCallback)(function (number) {\n    // if (v) {\n    // clearTimeout(timer.current)\n    // timer.current = setTimeout(() => {\n    //   setFormDataListState({\n    //     colHeadFilter: {\n    //       ...colHeadFilter,\n    //       [number]: data\n    //     },\n    //     colLoading: true\n    //   })\n    // }, LOADING_TIME_OUT)\n    getColHeadFilter === null || getColHeadFilter === void 0 || getColHeadFilter(number).then(function (data) {\n      // clearTimeout(timer.current)\n\n      var fieldItemConfig = (0, _find.default)(listItemConfig).call(listItemConfig, function (item) {\n        return item.number === number;\n      }) || {};\n      setFormDataListState({\n        colHeadFilter: _objectSpread(_objectSpread({}, colHeadFilter), {}, (0, _defineProperty2.default)({}, number, {\n          fieldFilterConfig: _objectSpread(_objectSpread({}, data.fieldFilterConfig), fieldItemConfig),\n          groupInfo: data.groupInfo,\n          configuredFilter: {\n            items: (0, _menuTableUtil.getConfiguredFilter)(configuredFilterItems, number, fieldItemConfig.type),\n            enumEqCompareType: '001'\n          }\n        }))\n        // colLoading: false\n      });\n    });\n    // }\n  }, [getColHeadFilter, colHeadFilter, configuredFilterItems, listItemConfig]);\n\n  // 如果当前枚举类型是由其他比较类型转换过来的，需要传递最新的configuredFilterItems\n  var getEnumFilterValue = (0, _react.useCallback)( /*#__PURE__*/function () {\n    var _ref21 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee15(v, newConfiguredFilterItems) {\n      var withSchemaId,\n        filterrows,\n        _args15 = arguments;\n      return _regenerator.default.wrap(function _callee15$(_context16) {\n        while (1) switch (_context16.prev = _context16.next) {\n          case 0:\n            withSchemaId = _args15.length > 2 && _args15[2] !== undefined ? _args15[2] : false;\n            filterrows = {\n              fieldName: v === null || v === void 0 ? void 0 : v.fieldName,\n              compareType: v === null || v === void 0 ? void 0 : v.compareType,\n              value: v === null || v === void 0 ? void 0 : v.value\n            }; // loadEnumFilterValue中有容错判断，Boolean(schemaId)为false时不会传schemaId\n            _context16.next = 4;\n            return loadEnumFilterValue(appId, formId, env, newConfiguredFilterItems || configuredFilterItems, listFilterConfig, filterrows, '', withSchemaId && schemaId);\n          case 4:\n            return _context16.abrupt(\"return\", _context16.sent);\n          case 5:\n          case \"end\":\n            return _context16.stop();\n        }\n      }, _callee15);\n    }));\n    return function (_x20, _x21) {\n      return _ref21.apply(this, arguments);\n    };\n  }(), [appId, formId, env, configuredFilterItems, listFilterConfig, schemaId]);\n  var onGetEnumFilterValue = (0, _react.useCallback)( /*#__PURE__*/function () {\n    var _ref22 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee16(v, configuredFilterItems) {\n      var withSchemaId,\n        _args16 = arguments;\n      return _regenerator.default.wrap(function _callee16$(_context17) {\n        while (1) switch (_context17.prev = _context17.next) {\n          case 0:\n            withSchemaId = _args16.length > 2 && _args16[2] !== undefined ? _args16[2] : false;\n            _context17.next = 3;\n            return getEnumFilterValue({\n              fieldName: v === null || v === void 0 ? void 0 : v.fieldName,\n              compareType: v === null || v === void 0 ? void 0 : v.compareType,\n              value: v === null || v === void 0 ? void 0 : v.value\n            }, configuredFilterItems, withSchemaId).then(function (data) {\n              setFormDataListState({\n                enumFilterValue: _objectSpread(_objectSpread({}, enumFilterValue), {}, (0, _defineProperty2.default)({}, v === null || v === void 0 ? void 0 : v.fieldName, data))\n              });\n            });\n          case 3:\n            return _context17.abrupt(\"return\", _context17.sent);\n          case 4:\n          case \"end\":\n            return _context17.stop();\n        }\n      }, _callee16);\n    }));\n    return function (_x22, _x23) {\n      return _ref22.apply(this, arguments);\n    };\n  }(), [getEnumFilterValue, enumFilterValue]);\n  (0, _react.useEffect)(function () {\n    var _getColumns2 = getColumns(listItemConfig),\n      columns = _getColumns2.columns,\n      visibleColumnKeys = _getColumns2.visibleColumnKeys;\n    setFormDataListState({\n      columns: columns,\n      visibleColumnKeys: visibleColumnKeys\n    });\n  }, [listItemConfig, getColumns]);\n  (0, _react.useEffect)(function () {\n    setFormDataListState({\n      // 切换页面搜索框内容置空， searchKeywords设置为null，避免和搜索内容删除后是''的情况冲突\n      searchKeywords: null,\n      selectedIds: [],\n      selectStatus: _useFormDataListState3.CHECK,\n      notInSelectedIds: [],\n      selectedCount: 0\n    });\n    try {\n      loadData && !pending && onLoadInitData(appId, formId || defualtFormId, env, viewAuth); //  滚动加载会自动从第一页加载\n    } catch (e) {\n      setFormDataListState({\n        dataSource: [],\n        footerDataSource: [],\n        pageNo: 1,\n        pageSize: 20,\n        totalCount: 0,\n        lastPage: true,\n        formName: '',\n        loading: false,\n        listItemConfig: [],\n        listFilterConfig: [],\n        listTreeConfig: [],\n        listStatInfo: [],\n        configuredFilterItems: [],\n        listFilters: []\n      });\n    }\n  }, [setFormDataListState, appId, formId, defualtFormId, env, loadData, viewAuth, pending]);\n  (0, _react.useEffect)(function () {\n    typeof searchKeywords === 'string' && handleDebounceSearch(searchKeywords);\n  }, [searchKeywords]);\n  var onSelectChange = (0, _react.useCallback)(function (_ref23) {\n    var next = _ref23.next,\n      _ref23$key = _ref23.key,\n      key = _ref23$key === void 0 ? '' : _ref23$key,\n      action = _ref23.action;\n    var ids = (0, _menuTableUtil.getIds)(key);\n    switch (action) {\n      case SELECT_ACTIONS.check_all:\n        setSelectedInfo(next || getSelectedId({\n          status: _useFormDataListState3.CHECK_ALL\n        }), _useFormDataListState3.CHECK_ALL, [], totalCount);\n        break;\n      case SELECT_ACTIONS.uncheck_all:\n        setSelectedInfo([], _useFormDataListState3.CHECK, [], 0);\n        break;\n      case SELECT_ACTIONS.check:\n        if (selectStatus === _useFormDataListState3.CHECK) {\n          setFormDataListState({\n            selectedIds: (0, _concat.default)(selectedIds).call(selectedIds, ids),\n            selectedCount: selectedCount + 1\n          });\n        } else {\n          var newNotInIds = (0, _menuTableUtil.filterId)(ids, notInSelectedIds);\n          setFormDataListState({\n            selectedIds: next || getSelectedId({\n              info: {\n                newNotInIds: newNotInIds\n              }\n            }),\n            notInSelectedIds: newNotInIds,\n            selectedCount: selectedCount + 1\n          });\n        }\n        break;\n      case SELECT_ACTIONS.uncheck:\n        if (selectStatus === _useFormDataListState3.CHECK) {\n          setFormDataListState({\n            selectedIds: (0, _menuTableUtil.filterId)(ids, selectedIds),\n            selectedCount: selectedCount - 1\n          });\n        } else {\n          var _newNotInIds = (0, _concat.default)(notInSelectedIds).call(notInSelectedIds, ids);\n          setSelectedInfo(next || getSelectedId({\n            status: _useFormDataListState3.CHECK_CANCEL,\n            info: {\n              newNotInIds: _newNotInIds\n            }\n          }), _useFormDataListState3.CHECK_CANCEL, _newNotInIds, selectedCount - 1);\n        }\n        break;\n    }\n  }, [selectStatus, selectedIds, notInSelectedIds, setSelectedInfo, totalCount, selectedCount, getSelectedId]);\n  var actions = {\n    onAfterAddRows: onAfterAddRows,\n    onAfterDeleteRows: onAfterDeleteRows,\n    onAfterSave: onAfterSave,\n    onPaginationChange: onPaginationChange,\n    onListSettingConfirm: onListSettingConfirm,\n    onFilterItemDelete: onFilterItemDelete,\n    onFilterConfirm: onFilterConfirm,\n    onRefresh: onRefresh,\n    onRefreshWithSetting: onRefreshWithSetting,\n    onSearch: onSearch,\n    onChangeFilters: onChangeFilters,\n    onSetShowFilterSettingPop: onSetShowFilterSettingPop,\n    onSetShowListSettingPop: onSetShowListSettingPop,\n    onSetShowSortSettingPop: onSetShowSortSettingPop,\n    onAggCellChange: onAggCellChange,\n    getColHeadFilter: getColHeadFilter,\n    onColHeadFilterVisibleChange: onColHeadFilterVisibleChange,\n    getEnumFilterValue: getEnumFilterValue,\n    getStatInfo: getStatInfo,\n    onColFilterConfirm: onColFilterConfirm,\n    handleRowDelete: handleRowDelete,\n    onRowDelete: onRowDelete,\n    onLoadMoreData: onLoadMoreData,\n    onLoadInitData: onLoadInitData,\n    onLoadSetting: onLoadSetting,\n    onUpdateDataSource: onUpdateDataSource,\n    onColSort: onColSort,\n    onGetEnumFilterValue: onGetEnumFilterValue,\n    onAggVisibleChange: onAggVisibleChange,\n    setFormDataListState: setFormDataListState,\n    onSelectChange: onSelectChange,\n    onBatchDelete: onBatchDelete,\n    getSelectedQueryString: getSelectedQueryString,\n    setSelectedInfo: setSelectedInfo,\n    handleDeleteSelectedId: handleDeleteSelectedId,\n    keepErrSelect: keepErrSelect\n  };\n  return [formDataListState, actions, _WebUI.TableContext];\n};\nvar _default = exports[\"default\"] = useFormDataList;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvaG9va3MvdXNlRm9ybURhdGFMaXN0LnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBcUJBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBOztBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFlQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFPQTtBQUdBO0FBRkE7QUFDQTtBQUVBO0FBSUE7QUFIQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBOztBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFJQTtBQUFBO0FBQUE7QUFFQTtBQUtBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ub2NvZGUtcGxhdGZvcm0vLi9zcmMvaG9va3MvdXNlRm9ybURhdGFMaXN0LnRzP2UzMzIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlTWVtbyB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHtcbiAgY29sdW1uc0RhdGFUcmFuZm9ybSBhcyBkZWZhdWx0Q29sdW1uc0RhdGFUcmFuZm9ybSxcbiAgZ2V0Q29sSGVhZEZpbHRlckJ5Q29uZmlndXJlZCxcbiAgbWVyZ2VGaWx0ZXJJdGVtcyxcbiAgY2FsVG90YWxQYWdlLFxuICBpc1NhbWVGaWVsZCxcbiAgcHJldkhhbmRGb290ZXJEYXRhU291cmNlLFxuICBnZXRPdGhlckZpZWxkc0ZpbHRlcnMsXG4gIGdldEVmZmVjdGl2ZUZpbHRlckl0ZW1zLFxuICBnZXRDb25maWd1cmVkRmlsdGVyLFxuICBnZXRWaXNpYmxlQ29sdW1uS2V5cyxcbiAgZ2V0RmlsdGVyc0V4Y2VwdEZpZWxkRW51bVR5cGUsXG4gIGZpbHRlcklkLFxuICBnZXRTZWxlY3RlZElkQnlJbmZvLFxuICBmaWx0ZXJEYXRhLFxuICBnZXREZWxEYXRhLFxuICBnZXRTZWxlY3RlZFNRTCxcbiAgZmlsdGVyQW5kQ291bnQsXG4gIGdldElkcyxcbiAgZ2V0UmVzb25hYmxlQ291bnRcbn0gZnJvbSAnQC91dGlscy9tZW51VGFibGVVdGlsJ1xuaW1wb3J0IHsgRU5WX0FETUlOLCBFTlZfQVBQIH0gZnJvbSAnQC9jb25zdGFudHMvZW52J1xuaW1wb3J0IHsgc2hvd0RlbGV0ZUNvbmZpcm1Nb2RhbCwgc2hvd0xvYWRpbmdNZXNzYWdlLCBzaG93Tm90aWNlIH0gZnJvbSAnQC91dGlscydcbmltcG9ydCB1c2VGb3JtRGF0YUxpc3RTdGF0ZSwgeyBDSEVDSywgQ0hFQ0tfQUxMLCBDSEVDS19DQU5DRUwgfSBmcm9tICcuL3VzZUZvcm1EYXRhTGlzdFN0YXRlJ1xuaW1wb3J0IHsgV2ViTXNnLCBUYWJsZUNvbnRleHQgfSBmcm9tICdub2NvZGVfY29tcG9uZW50L1dlYlVJJ1xuaW1wb3J0IHsgZGVib3VuY2UgfSBmcm9tICdAL3V0aWxzJ1xuaW1wb3J0IHVzZUFwcENvbnRleHQgZnJvbSAnQC9ob29rcy91c2VBcHBDb250ZXh0J1xuaW1wb3J0IHsgcHVibGlzaFVzZXJFdmVudCB9IGZyb20gJ0Avc2VydmljZS9QYWdlRXZlbnRTZXJ2aWNlJ1xuaW1wb3J0IHsgb25EZWxldGVJdGVtc1dpdGhGaWx0ZXIgfSBmcm9tICdAL3V0aWxzL21lbnVUYWJsZUFjdGlvbnMnXG5pbXBvcnQgeyBpbml0U2VsZWN0SW5mbyB9IGZyb20gJ0AvdXRpbHMvbWVudVRhYmxlQXBwQWN0aW9ucydcbi8vIGltcG9ydCB7IFRhYmxlQ29udGV4dCB9IGZyb20gJ0AvY29udGV4dC9hcHBzJ1xuXG5jb25zdCBMb2FkaW5nTXNnID0gJ+aVsOaNruWKoOi9veS4rS4uLidcblxuZXhwb3J0IGNvbnN0IFNFTEVDVF9BQ1RJT05TID0ge1xuICBjaGVja19hbGw6ICdjaGVjay1hbGwnLFxuICB1bmNoZWNrX2FsbDogJ3VuY2hlY2stYWxsJyxcbiAgY2hlY2s6ICdjaGVjaycsXG4gIHVuY2hlY2s6ICd1bmNoZWNrJ1xufVxuXG5jb25zdCB1c2VGb3JtRGF0YUxpc3QgPSAoZm9ybUluZm8sIG9wdGlvbnMsIHRhYmxlQWN0aW9ucykgPT4ge1xuICAvLyDmlLnkuLrliqDovb3pppbpnaLnu5/kuIDmjqXlj6Pojrflj5bnrZvpgInmnaHku7bvvIzkuI3lho3mr4/mrKHor7fmsYLooajmoLzpg73ojrflj5ZcbiAgY29uc3QgeyBzdGF0ZSA9IHt9IH0gPSB1c2VBcHBDb250ZXh0KClcbiAgY29uc3QgeyBjb21wYXJlVHlwZXMsIGRlZmF1bHRBZG1pbkZvcm1JZCwgZGVmYXVsdEFwcHNGb3JtSWQgfSA9IHN0YXRlXG5cbiAgY29uc3Qge1xuICAgIGFwcElkLCBmb3JtSWQsIGVudiwgdmlld0F1dGggPSB0cnVlLCBwZW5kaW5nID0gZmFsc2UsIHNldFBlbmRpbmdcbiAgfSA9IGZvcm1JbmZvXG4gIGNvbnN0IHtcbiAgICBuZWVkU2VyaWFsID0gZmFsc2UsXG4gICAgbG9hZE1vcmUgPSBmYWxzZSxcbiAgICBsb2FkRGF0YSA9IHRydWUsXG4gICAgdXBkYXRlRm9vdGVyID0gZmFsc2UsXG4gICAgaXNNb2IgPSBmYWxzZSxcbiAgICBob3Jpem9udGFsID0gZmFsc2UsXG4gICAgb3BlcmF0ZUNvbCxcbiAgICBjb2x1bW5zRGF0YVRyYW5mb3JtID0gZGVmYXVsdENvbHVtbnNEYXRhVHJhbmZvcm0gLy8g56e75Yqo56uv6ZyA5Lyg5YWl77yM5YW85a65aWXvvIx3ZWLnq6/kuI3og73lr7zlhaXmnIltb2Lnu4Tku7ZcbiAgfSA9IG9wdGlvbnNcblxuICBjb25zdCB7XG4gICAgc2VuZEZvb3RlckRhdGFTb3VyY2UsXG4gICAgZ2V0Q29sSGVhZEZpbHRlckNvbmZpZyxcbiAgICBnZXRDb2xIZWFkRmlsdGVycyxcbiAgICBnZXRJbml0Rm9ybURhdGFMaXN0LFxuICAgIGxvYWRGb3JtTGlzdFdpdGhQYXJhbXMsXG4gICAgb25TYXZlRm9ybUxpc3RTZXR0aW5nLFxuICAgIGdldEVudW1GaWx0ZXJWYWx1ZTogbG9hZEVudW1GaWx0ZXJWYWx1ZSxcbiAgICBnZXRTdGF0SW5mbzogX2dldFN0YXRJbmZvLFxuICAgIGdldFVwZGF0ZUZvb3RlckRhdGFTb3VyY2UsXG4gICAgZ2V0TmV3RmlsdGVycyxcbiAgICBvbkRlbGV0ZUZvcm1EYXRhTGlzdEl0ZW0sXG4gICAgb25TYXZlUGFnZVNpemUsXG4gICAgZ2V0T3JkZXJCeSxcbiAgICBnZXRGb3JtRGF0YUxpc3RTZXR0aW5nXG4gIH0gPSB0YWJsZUFjdGlvbnNcblxuICBjb25zdCBbZm9ybURhdGFMaXN0U3RhdGUsIHNldEZvcm1EYXRhTGlzdFN0YXRlXSA9IHVzZUZvcm1EYXRhTGlzdFN0YXRlKClcbiAgY29uc3Qge1xuICAgIGRhdGFTb3VyY2UsXG4gICAgZm9vdGVyRGF0YVNvdXJjZSxcbiAgICBwYWdlTm8sXG4gICAgcGFnZVNpemUsXG4gICAgdG90YWxDb3VudCxcbiAgICBsaXN0SXRlbUNvbmZpZyxcbiAgICBsaXN0RmlsdGVyQ29uZmlnLFxuICAgIGNvbmZpZ3VyZWRGaWx0ZXJJdGVtcyxcbiAgICBiaXpCdXR0b25zLFxuICAgIGxpc3RGaWx0ZXJzLFxuICAgIHNlYXJjaEtleXdvcmRzLFxuICAgIG9yZGVyQnksXG4gICAgb3JkZXJJbmZvLFxuICAgIGNvbEhlYWRGaWx0ZXIsXG4gICAgZW51bUZpbHRlclZhbHVlLFxuICAgIHN0YXRlSW5mbyxcbiAgICBzY2hlbWFJZCxcbiAgICBzZWxlY3RlZElkcyxcbiAgICBzZWxlY3RTdGF0dXMsXG4gICAgbm90SW5TZWxlY3RlZElkcyxcbiAgICBzZWxlY3RlZENvdW50XG4gIH0gPSBmb3JtRGF0YUxpc3RTdGF0ZVxuICBcbiAgY29uc3QgZGVmdWFsdEZvcm1JZCA9IGVudiA9PT0gRU5WX0FQUCA/IGRlZmF1bHRBcHBzRm9ybUlkIDogKGVudiA9PT0gRU5WX0FETUlOID8gZGVmYXVsdEFkbWluRm9ybUlkIDogJycpXG5cbiAgY29uc3QgZm9ybUxpc3RQYXJhbXNNZW1vID0gdXNlTWVtbygoKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGFwcElkLFxuICAgICAgZm9ybUlkLFxuICAgICAgZW52LFxuICAgICAgbGlzdEl0ZW1Db25maWcsXG4gICAgICBsaXN0RmlsdGVycyxcbiAgICAgIHBhZ2VObyxcbiAgICAgIHBhZ2VTaXplLFxuICAgICAgc2VhcmNoS2V5d29yZHMsXG4gICAgICB1cGRhdGVGb290ZXI6IHRydWUsXG4gICAgICBvcmRlckJ5LFxuICAgICAgb3JkZXJJbmZvLFxuICAgICAgdmlld0F1dGgsXG4gICAgICBzY2hlbWFJZFxuICAgIH1cbiAgfSwgW1xuICAgIGFwcElkLFxuICAgIGZvcm1JZCxcbiAgICBlbnYsXG4gICAgbGlzdEl0ZW1Db25maWcsXG4gICAgbGlzdEZpbHRlcnMsXG4gICAgcGFnZU5vLFxuICAgIHBhZ2VTaXplLFxuICAgIHNlYXJjaEtleXdvcmRzLFxuICAgIG9yZGVyQnksXG4gICAgb3JkZXJJbmZvLFxuICAgIHZpZXdBdXRoLFxuICAgIHNjaGVtYUlkXG4gIF0pXG5cbiAgY29uc3Qgc2V0Rm9ybURhdGFMaXN0U3RhdGVXaXRoUG9zdEZvb3RlciA9IHVzZUNhbGxiYWNrKGFzeW5jIChkYXRhLCBsaXN0RmlsdGVycywgc2VhcmNoS2V5d29yZHMpID0+IHtcbiAgICBjb25zdCBuZXdGb290ZXJEYXRhU291cmNlID0gdXBkYXRlRm9vdGVyID8gYXdhaXQgZ2V0VXBkYXRlRm9vdGVyRGF0YVNvdXJjZT8uKGFwcElkLCBmb3JtSWQsIGVudiwgcGFnZU5vLCBwYWdlU2l6ZSwgbGlzdEZpbHRlcnMsIHNlYXJjaEtleXdvcmRzLCBsaXN0SXRlbUNvbmZpZywgZm9vdGVyRGF0YVNvdXJjZSkgOiBmb290ZXJEYXRhU291cmNlXG4gICAgc2V0Rm9ybURhdGFMaXN0U3RhdGUoeyAuLi5kYXRhLCBmb290ZXJEYXRhU291cmNlOiBuZXdGb290ZXJEYXRhU291cmNlIH0pXG4gIH0sIFthcHBJZCwgZm9ybUlkLCBlbnYsIHBhZ2VObywgcGFnZVNpemUsXG4gICAgbGlzdEl0ZW1Db25maWcsXG4gICAgZm9vdGVyRGF0YVNvdXJjZSxcbiAgICB1cGRhdGVGb290ZXIsXG4gICAgc2V0Rm9ybURhdGFMaXN0U3RhdGVcbiAgXSlcblxuICBjb25zdCBnZXRTZWxlY3RlZElkID0gdXNlQ2FsbGJhY2soKHtcbiAgICBzdGF0dXMgPSBzZWxlY3RTdGF0dXMsXG4gICAgaW5mb1xuICB9KSA9PiB7XG4gICAgY29uc3Qge1xuICAgICAgbmV3RGF0YVNvdXJjZSA9IGRhdGFTb3VyY2UsXG4gICAgICBuZXdOb3RJbklkcyA9IG5vdEluU2VsZWN0ZWRJZHMsXG4gICAgICBuZXdTZWxlY3RlZElkcyA9IHNlbGVjdGVkSWRzXG4gICAgfSA9IGluZm8gfHwge31cbiAgICBzd2l0Y2ggKHN0YXR1cykge1xuICAgICAgY2FzZSBDSEVDSzpcbiAgICAgICAgcmV0dXJuIG5ld1NlbGVjdGVkSWRzXG4gICAgICBjYXNlIENIRUNLX0FMTDpcbiAgICAgICAgcmV0dXJuIG5ld0RhdGFTb3VyY2UubWFwKGl0ZW0gPT4gaXRlbS5pZClcbiAgICAgIGNhc2UgQ0hFQ0tfQ0FOQ0VMOlxuICAgICAgICByZXR1cm4gZ2V0U2VsZWN0ZWRJZEJ5SW5mbyhuZXdEYXRhU291cmNlLCBuZXdOb3RJbklkcylcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBbXVxuICAgIH1cbiAgfSwgW2RhdGFTb3VyY2UsIG5vdEluU2VsZWN0ZWRJZHMsIHNlbGVjdFN0YXR1cywgc2VsZWN0ZWRJZHNdKVxuXG4gIC8vIOWMuuWIhuaYr+WQpuaYr2xvYWRNb3Jl5qih5byPIOeUqOS6juaVsOaNruabtOaWsFxuICBjb25zdCBzZXRQb3N0U3RhdGUgPSB1c2VDYWxsYmFjaygoe2NvbmZpZywgbm9QcmVEYXRhID0gZmFsc2UsIGNhbGxiYWNrLCB1cGRhdGVGb290ZXIsIGNsZWFyU2VsZWN0SW5mbyA9IGZhbHNlfSkgPT4ge1xuICAgIGNvbnN0IHNldEZvcm1TdGF0ZSA9IHVwZGF0ZUZvb3RlciA/IHNldEZvcm1EYXRhTGlzdFN0YXRlV2l0aFBvc3RGb290ZXIgOiBzZXRGb3JtRGF0YUxpc3RTdGF0ZVxuICAgIGNvbnN0IHsgbGlzdEZpbHRlcnMsIHNlYXJjaEtleXdvcmRzIH0gPSBjb25maWdcbiAgICBjb25zdCBuZXdTZWxlY3RJbmZvID0gY2xlYXJTZWxlY3RJbmZvID8gaW5pdFNlbGVjdEluZm8gOiB7fVxuICAgIGNvbnN0IHByZXZEYXRhU291cmNlID0gbm9QcmVEYXRhID8gW10gOiBkYXRhU291cmNlIC8vIOaQnOe0ouWSjOetm+mAieimgea4heepuuWOn+WFiOaVsOaNru+8jCDlkKbliJnlnKjnp7vliqjnq69sb2FkTW9yZeS4i++8jOaQnOe0ouaVsOaNruS8muWPoOWKoOWOn+adpeaVsOaNrlxuICAgIHJldHVybiBhc3luYyAoZG9Qb3N0OiAoYXJnczogYW55KSA9PiBQcm9taXNlPGFueT4pID0+IHtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBkb1Bvc3QoY29uZmlnKVxuICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgaWYgKGxvYWRNb3JlKSB7XG4gICAgICAgICAgc2V0Rm9ybVN0YXRlKHsgLi4uZGF0YSwgZGF0YVNvdXJjZTogcHJldkRhdGFTb3VyY2UuY29uY2F0KGRhdGEuZGF0YVNvdXJjZSksIC4uLm5ld1NlbGVjdEluZm8gfSwgbGlzdEZpbHRlcnMsIHNlYXJjaEtleXdvcmRzKSAvLyDlkIjlubbmnIDmlrBjb25maWflkozooajmoLxkYXRh5Yiwc3RhdGVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZXRGb3JtU3RhdGUoeyAuLi5kYXRhLCAuLi5uZXdTZWxlY3RJbmZvIH0sIGxpc3RGaWx0ZXJzLCBzZWFyY2hLZXl3b3JkcylcbiAgICAgICAgfVxuICAgICAgICBjYWxsYmFjaz8uKGRhdGEpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZXRGb3JtU3RhdGUoeyBkYXRhU291cmNlOiBbXSwgZm9vdGVyRGF0YVNvdXJjZTogW10sIGxhc3RQYWdlOiBmYWxzZSwgLi4ubmV3U2VsZWN0SW5mbyB9LCBsaXN0RmlsdGVycywgc2VhcmNoS2V5d29yZHMpXG4gICAgICB9XG4gICAgfVxuICB9LCBbc2V0Rm9ybURhdGFMaXN0U3RhdGUsIHNldEZvcm1EYXRhTGlzdFN0YXRlV2l0aFBvc3RGb290ZXIsIGxvYWRNb3JlLCBkYXRhU291cmNlXSlcblxuICAvLyDljLrliIbmmK/lkKbmmK9sb2FkTW9yZeaooeW8j++8jOW5tuS4lOmHjeaWsOivt+axgmZvb3RlckRhdGFTb3VyY2XmlbDmja7vvIwg55So5LqO5pWw5o2u5pu05pawXG4gIGNvbnN0IHNldFBvc3RTdGF0ZVdpdGhQb3N0Rm9vdGVyID0gdXNlQ2FsbGJhY2soKHtjb25maWcsIG5vUHJlRGF0YSA9IGZhbHNlLCBjYWxsYmFjaywgY2xlYXJTZWxlY3RJbmZvID0gZmFsc2V9KSA9PiB7XG4gICAgcmV0dXJuIHNldFBvc3RTdGF0ZSh7Y29uZmlnLCBub1ByZURhdGEsIGNhbGxiYWNrLCB1cGRhdGVGb290ZXI6IHRydWUsIGNsZWFyU2VsZWN0SW5mb30pXG4gIH0sIFtzZXRQb3N0U3RhdGVdKVxuXG4gIGNvbnN0IGdldENvbHVtbnMgPSB1c2VDYWxsYmFjaygobGlzdEl0ZW1Db25maWcpID0+IHtcbiAgICBjb25zdCBjb2xPcHRpb25zID0ge1xuICAgICAgcHJpbWFyeUtleTogJ251bWJlcicsXG4gICAgICBpc01vYixcbiAgICAgIG5lZWRTZXJpYWwsXG4gICAgICBob3Jpem9udGFsLFxuICAgICAgb3BlcmF0ZUNvbFxuICAgIH1cbiAgICBjb25zdCBjb2x1bW5zID0gY29sdW1uc0RhdGFUcmFuZm9ybShsaXN0SXRlbUNvbmZpZywgY29sT3B0aW9ucywgYXBwSWQsIGZvcm1JZClcbiAgICBjb25zdCB2aXNpYmxlQ29sdW1uS2V5cyA9IGdldFZpc2libGVDb2x1bW5LZXlzKGNvbHVtbnMpXG4gICAgcmV0dXJuIHsgY29sdW1ucywgdmlzaWJsZUNvbHVtbktleXMgfVxuICB9LCBbaXNNb2IsIG5lZWRTZXJpYWwsIGhvcml6b250YWwsIG9wZXJhdGVDb2wsIGFwcElkLCBmb3JtSWQsIGNvbHVtbnNEYXRhVHJhbmZvcm1dKVxuXG4gIC8vIOeUqOS6juWIneWni+WMllxuICBjb25zdCBzZXRJbml0UG9zdFN0YXRlID0gdXNlQ2FsbGJhY2soKGNvbmZpZykgPT4ge1xuICAgIGNvbnN0IGNsb3NlTWVzc2FnZSA9IHNob3dMb2FkaW5nTWVzc2FnZShMb2FkaW5nTXNnKVxuICAgIHJldHVybiBhc3luYyAoZG9Qb3N0OiAoYXJnczogYW55KSA9PiBQcm9taXNlPGFueT4pID0+IHtcbiAgICAgIHNldFBlbmRpbmc/Lih0cnVlKVxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGRvUG9zdChjb25maWcpXG4gICAgICBpZiAoZGF0YSkge1xuICAgICAgICBjb25zdCBjb2xIZWFkRmlsdGVycyA9IGdldENvbEhlYWRGaWx0ZXJCeUNvbmZpZ3VyZWQoZGF0YS5jb25maWd1cmVkRmlsdGVySXRlbXMpXG4gICAgICAgIGNvbnN0IHsgY29sdW1ucywgdmlzaWJsZUNvbHVtbktleXMgfSA9IGdldENvbHVtbnMoZGF0YS5saXN0SXRlbUNvbmZpZylcbiAgICAgICAgY29uc3QgcmVzdWx0ID0geyAuLi5kYXRhLCBjb2xIZWFkRmlsdGVycywgY29sdW1ucywgdmlzaWJsZUNvbHVtbktleXMsIHNjaGVtYUlkOiBjb25maWcuc2NoZW1hSWQgfHwgJycgfVxuICAgICAgICBzZXRGb3JtRGF0YUxpc3RTdGF0ZShyZXN1bHQpXG4gICAgICAgIGNsb3NlTWVzc2FnZSgpXG4gICAgICAgIHJldHVybiByZXN1bHRcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNldEZvcm1EYXRhTGlzdFN0YXRlKHsgZGF0YVNvdXJjZTogW10sIGZvb3RlckRhdGFTb3VyY2U6IFtdLCBsYXN0UGFnZTogdHJ1ZSB9KVxuICAgICAgICBjbG9zZU1lc3NhZ2UoKVxuICAgICAgICByZXR1cm4ge31cbiAgICAgIH1cbiAgICB9XG4gIH0sIFtzZXRGb3JtRGF0YUxpc3RTdGF0ZSwgZ2V0Q29sdW1ucywgc2V0UGVuZGluZ10pXG5cbiAgY29uc3Qgb25BZnRlckNvbmZpcm0gPSB1c2VDYWxsYmFjaygodG90YWxDb3VudCkgPT4ge1xuICAgIFdlYk1zZz8uc2hvd05vdGlmaWNhdGlvbk1zZyh7IC8vIHRvZG8g6YeN5p6E5oqK6L+Z6YOo5YiG5o+Q5Y+W5Yiw5aSW6Z2i57uf5LiA5aSE55CGXG4gICAgICBwYWdlSWQ6ICcnLFxuICAgICAgcGFyYW06IFt7XG4gICAgICAgIHR5cGU6ICdzdWNjZXNzJyxcbiAgICAgICAgY29udGVudDogYOetm+mAieWHuiR7dG90YWxDb3VudH3mnaHorrDlvZXjgIJgXG4gICAgICB9XVxuICAgIH0pXG4gIH0sIFtXZWJNc2ddKVxuXG4gIGNvbnN0IG9uTG9hZEluaXREYXRhID0gKGFwcElkLCBmb3JtSWQsIGVudiwgdmlld0F1dGgsIGN1clNjaGVtYUlkKSA9PiB7XG4gICAgcmV0dXJuIHNldEluaXRQb3N0U3RhdGUoeyBhcHBJZCwgZm9ybUlkLCBzY2hlbWFJZDogY3VyU2NoZW1hSWQsIGVudiwgdmlld0F1dGgsIGNvbXBhcmVUeXBlcywgc2VhcmNoS2V5d29yZHMgfSkoZ2V0SW5pdEZvcm1EYXRhTGlzdClcbiAgfVxuXG4gIGNvbnN0IG9uTG9hZFNldHRpbmcgPSAoYXBwSWQsIGZvcm1JZCwgZW52LCB2aWV3QXV0aCwgY3VyU2NoZW1hSWQpID0+IHtcbiAgICByZXR1cm4gc2V0SW5pdFBvc3RTdGF0ZSh7IGFwcElkLCBmb3JtSWQsIHNjaGVtYUlkOiBjdXJTY2hlbWFJZCwgZW52LCB2aWV3QXV0aCwgY29tcGFyZVR5cGVzIH0pKGdldEZvcm1EYXRhTGlzdFNldHRpbmcpXG4gIH1cblxuICBjb25zdCBvbkxvYWRNb3JlRGF0YSA9IHVzZUNhbGxiYWNrKChwYWdlTm8pID0+IHtcbiAgICBzZXRQb3N0U3RhdGVXaXRoUG9zdEZvb3Rlcih7XG4gICAgICBjb25maWc6IHtcbiAgICAgICAgLi4uZm9ybUxpc3RQYXJhbXNNZW1vLFxuICAgICAgICBwYWdlTm9cbiAgICAgIH1cbiAgICB9KShsb2FkRm9ybUxpc3RXaXRoUGFyYW1zKVxuICB9LCBbc2V0UG9zdFN0YXRlV2l0aFBvc3RGb290ZXIsIGZvcm1MaXN0UGFyYW1zTWVtb10pXG5cbiAgY29uc3Qgb25VcGRhdGVEYXRhU291cmNlID0gdXNlQ2FsbGJhY2soKGRhdGFTb3VyY2UpID0+IHtcbiAgICBzZXRGb3JtRGF0YUxpc3RTdGF0ZSh7XG4gICAgICBkYXRhU291cmNlXG4gICAgfSlcbiAgfSwgW3NldEZvcm1EYXRhTGlzdFN0YXRlXSlcblxuICBjb25zdCBvbkFnZ0NlbGxDaGFuZ2UgPSB1c2VDYWxsYmFjayhhc3luYyAoZmllbGROYW1lLCBpdGVtLCBwYW5lbFR5cGUpID0+IHtcbiAgICBjb25zdCBmaWVsZCA9IGZvb3RlckRhdGFTb3VyY2VbMF1bZmllbGROYW1lXSAvLyDlj5HnlJ/lgLzmlLnlj5jnmoTljZXlhYPmoLzlrZfmrrVcbiAgICBpZiAoaXNTYW1lRmllbGQoZmllbGQsIGl0ZW0pKSByZXR1cm5cbiAgICBhd2FpdCBzZW5kRm9vdGVyRGF0YVNvdXJjZShhcHBJZCwgZm9ybUlkLCBlbnYsIGZpZWxkTmFtZSwgaXRlbSwgcGFuZWxUeXBlKVxuICAgIGNvbnN0IGRhdGEgPSBwcmV2SGFuZEZvb3RlckRhdGFTb3VyY2UoZmllbGROYW1lLCBpdGVtLCBwYW5lbFR5cGUsIGZvb3RlckRhdGFTb3VyY2UpXG4gICAgc2V0Rm9ybURhdGFMaXN0U3RhdGUoe1xuICAgICAgZm9vdGVyRGF0YVNvdXJjZTogZGF0YVxuICAgIH0pXG4gIH0sIFthcHBJZCwgZm9ybUlkLCBlbnYsIGZvb3RlckRhdGFTb3VyY2UsIHNldEZvcm1EYXRhTGlzdFN0YXRlXSlcblxuICBjb25zdCBnZXRTdGF0SW5mbyA9IHVzZUNhbGxiYWNrKGFzeW5jIChmaWVsZE5hbWUpID0+IHtcbiAgICAvLyBwYWdlTm/jgIFwYWdlU2l6ZeS4jeS8muW9seWTjeWQiOiuoee7k+aenO+8jOS9hui/mOaYr+WFiOaKiuS+nei1luWKoOS4iuS/neivgeWGhemDqOS8oOWAvOato+ehrlxuICAgIHJldHVybiBhd2FpdCBfZ2V0U3RhdEluZm8/Lih7IGFwcElkLCBmb3JtSWQsIGVudiwgZmllbGROYW1lLCBsaXN0RmlsdGVycywgcGFnZVNpemUsIHBhZ2VObywgc2VhcmNoS2V5d29yZHMsIHNjaGVtYUlkIH0pXG4gIH0sIFthcHBJZCwgZm9ybUlkLCBlbnYsIGxpc3RGaWx0ZXJzLCBwYWdlU2l6ZSwgcGFnZU5vLCBzZWFyY2hLZXl3b3Jkcywgc2NoZW1hSWRdKVxuXG4gIGNvbnN0IG9uQWdnVmlzaWJsZUNoYW5nZSA9IHVzZUNhbGxiYWNrKGFzeW5jIChmaWVsZE5hbWUpID0+IHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgZ2V0U3RhdEluZm8oZmllbGROYW1lKVxuICAgIHNldEZvcm1EYXRhTGlzdFN0YXRlKHtcbiAgICAgIHN0YXRlSW5mbzogZGF0YVxuICAgIH0pXG4gIH0sIFtnZXRTdGF0SW5mbywgc3RhdGVJbmZvLCBzZXRGb3JtRGF0YUxpc3RTdGF0ZV0pXG5cbiAgY29uc3Qgb25GaWx0ZXJDb25maXJtID0gdXNlQ2FsbGJhY2soYXN5bmMgKGNvbmZpZ3VyZWRGaWx0ZXJJdGVtcykgPT4ge1xuICAgIGNvbnN0IG5ld0NvbmZpZ3VyZWRGaWx0ZXJJdGVtcyA9IGdldEVmZmVjdGl2ZUZpbHRlckl0ZW1zKGNvbmZpZ3VyZWRGaWx0ZXJJdGVtcylcbiAgICBjb25zdCBuZXdDb2xIZWFkRmlsdGVycyA9IGdldENvbEhlYWRGaWx0ZXJCeUNvbmZpZ3VyZWQobmV3Q29uZmlndXJlZEZpbHRlckl0ZW1zKVxuICAgIGNvbnN0IGxpc3RGaWx0ZXJzID0gYXdhaXQgZ2V0TmV3RmlsdGVycz8uKGFwcElkLCBmb3JtSWQsIGVudiwgbmV3Q29uZmlndXJlZEZpbHRlckl0ZW1zKVxuICAgIHNldEZvcm1EYXRhTGlzdFN0YXRlKHtcbiAgICAgIGNvbEhlYWRGaWx0ZXJzOiBuZXdDb2xIZWFkRmlsdGVycyxcbiAgICAgIGxpc3RGaWx0ZXJzLFxuICAgICAgY29uZmlndXJlZEZpbHRlckl0ZW1zOiBuZXdDb25maWd1cmVkRmlsdGVySXRlbXMsXG4gICAgICBzaG93RmlsdGVyU2V0dGluZ1BvcDogZmFsc2VcbiAgICB9KVxuICAgIHNldFBvc3RTdGF0ZVdpdGhQb3N0Rm9vdGVyKHtcbiAgICAgIGNvbmZpZzoge1xuICAgICAgICAuLi5mb3JtTGlzdFBhcmFtc01lbW8sXG4gICAgICAgIHBhZ2VObzogMSwgLy8g562b6YCJ57uT5p6c6Lez6L2s5Yiw56ys5LiA6aG1XG4gICAgICAgIGNvbEhlYWRGaWx0ZXJzOiBuZXdDb2xIZWFkRmlsdGVycyxcbiAgICAgICAgbGlzdEZpbHRlcnMsXG4gICAgICAgIGNvbmZpZ3VyZWRGaWx0ZXJJdGVtczogbmV3Q29uZmlndXJlZEZpbHRlckl0ZW1zLFxuICAgICAgICBzaG93RmlsdGVyU2V0dGluZ1BvcDogZmFsc2VcbiAgICAgIH0sXG4gICAgICBub1ByZURhdGE6IHRydWUsXG4gICAgICBjYWxsYmFjazogKGRhdGEpID0+IHsgb25BZnRlckNvbmZpcm0/LihkYXRhPy50b3RhbENvdW50KSB9LCAvLyDnrZvpgInnu5Pmnpzot7PovazliLDnrKzkuIDpobVcbiAgICAgIGNsZWFyU2VsZWN0SW5mbzogdHJ1ZVxuICAgIH0pKGxvYWRGb3JtTGlzdFdpdGhQYXJhbXMpXG4gIH0sIFtmb3JtTGlzdFBhcmFtc01lbW8sIHNldFBvc3RTdGF0ZVdpdGhQb3N0Rm9vdGVyLCBhcHBJZCwgZm9ybUlkLCBlbnYsIHNldEZvcm1EYXRhTGlzdFN0YXRlXSlcblxuICBjb25zdCBvbkNvbEZpbHRlckNvbmZpcm0gPSB1c2VDYWxsYmFjayhhc3luYyAoY3VycmVudEZpZWxkRmlsdGVySXRlbXMsIGhlYWRGaWVsZCkgPT4ge1xuICAgIC8vIHB1Ymxpc2hVc2VyRXZlbnQoe1xuICAgIC8vICAgYXBwSWQsXG4gICAgLy8gICBmb3JtSWQsXG4gICAgLy8gICBhY3Rpb246ICdhdV9jaF9maWxfY29tZidcbiAgICAvLyB9KVxuICAgIGNvbnN0IG90aGVyRmllbGRzRmlsdGVycyA9IGdldE90aGVyRmllbGRzRmlsdGVycyhoZWFkRmllbGQsIGNvbmZpZ3VyZWRGaWx0ZXJJdGVtcywgbGlzdEZpbHRlckNvbmZpZylcbiAgICBsZXQgbmV3Q29uZmlndXJlZEZpbHRlckl0ZW1zID0gbWVyZ2VGaWx0ZXJJdGVtcyhvdGhlckZpZWxkc0ZpbHRlcnMsIGN1cnJlbnRGaWVsZEZpbHRlckl0ZW1zKVxuICAgIG5ld0NvbmZpZ3VyZWRGaWx0ZXJJdGVtcyA9IGdldEVmZmVjdGl2ZUZpbHRlckl0ZW1zKG5ld0NvbmZpZ3VyZWRGaWx0ZXJJdGVtcylcbiAgICBjb25zdCBuZXdDb2xIZWFkRmlsdGVycyA9IGdldENvbEhlYWRGaWx0ZXJCeUNvbmZpZ3VyZWQobmV3Q29uZmlndXJlZEZpbHRlckl0ZW1zKVxuICAgIGNvbnN0IGxpc3RGaWx0ZXJzID0gYXdhaXQgZ2V0Q29sSGVhZEZpbHRlcnM/LihhcHBJZCwgZm9ybUlkLCBlbnYsIG5ld0NvbmZpZ3VyZWRGaWx0ZXJJdGVtcywgaGVhZEZpZWxkKVxuICAgIHNldEZvcm1EYXRhTGlzdFN0YXRlKHsgLy8g5pu05paw6YWN572uXG4gICAgICBjb2xIZWFkRmlsdGVyczogbmV3Q29sSGVhZEZpbHRlcnMsXG4gICAgICBsaXN0RmlsdGVycyxcbiAgICAgIGNvbmZpZ3VyZWRGaWx0ZXJJdGVtczogbmV3Q29uZmlndXJlZEZpbHRlckl0ZW1zXG4gICAgfSlcbiAgICBzZXRQb3N0U3RhdGVXaXRoUG9zdEZvb3Rlcih7IC8vIOabtOaWsOaVsOaNrlxuICAgICAgY29uZmlnOiB7XG4gICAgICAgIC4uLmZvcm1MaXN0UGFyYW1zTWVtbyxcbiAgICAgICAgcGFnZU5vOiAxLCAvLyDnrZvpgInnu5Pmnpzot7PovazliLDnrKzkuIDpobVcbiAgICAgICAgY29sSGVhZEZpbHRlcnM6IG5ld0NvbEhlYWRGaWx0ZXJzLFxuICAgICAgICBsaXN0RmlsdGVycyxcbiAgICAgICAgY29uZmlndXJlZEZpbHRlckl0ZW1zOiBuZXdDb25maWd1cmVkRmlsdGVySXRlbXMsXG4gICAgICB9LFxuICAgICAgY2FsbGJhY2s6IChkYXRhKSA9PiB7IG9uQWZ0ZXJDb25maXJtPy4oZGF0YT8udG90YWxDb3VudCkgfSwgLy8g562b6YCJ57uT5p6c6Lez6L2s5Yiw56ys5LiA6aG1XG4gICAgICBjbGVhclNlbGVjdEluZm86IHRydWVcbiAgICB9KShsb2FkRm9ybUxpc3RXaXRoUGFyYW1zKVxuICB9LCBbZm9ybUxpc3RQYXJhbXNNZW1vLCBzZXRQb3N0U3RhdGVXaXRoUG9zdEZvb3Rlciwgb25BZnRlckNvbmZpcm0sIHNldEZvcm1EYXRhTGlzdFN0YXRlLCBjb25maWd1cmVkRmlsdGVySXRlbXMsIGxpc3RGaWx0ZXJDb25maWddKVxuXG4gIGNvbnN0IGhhbmRsZVNlbGVjdGVkID0gdXNlQ2FsbGJhY2soKGRhdGEpID0+IHtcbiAgICAvLyDlhbzlrrnnp7vliqjnq69cbiAgICBjb25zdCBuZXdEYXRhU291cmNlID0gbG9hZE1vcmUgPyBkYXRhU291cmNlLmNvbmNhdChkYXRhLmRhdGFTb3VyY2UgfHwgW10pIDogZGF0YS5kYXRhU291cmNlXG4gICAgY29uc3QgbmV3U2VsZWN0ZWRJZHMgPSBnZXRTZWxlY3RlZElkKHsgaW5mbzogeyBuZXdEYXRhU291cmNlIH0gfSlcbiAgICBzZXRGb3JtRGF0YUxpc3RTdGF0ZSh7IHNlbGVjdGVkSWRzOiBuZXdTZWxlY3RlZElkcyB9KVxuICB9LCBbZ2V0U2VsZWN0ZWRJZCwgbG9hZE1vcmUsIGRhdGFTb3VyY2VdKVxuXG4gIGNvbnN0IG9uUGFnaW5hdGlvbkNoYW5nZSA9IHVzZUNhbGxiYWNrKChwYWdlTm8sIG5ld1BhZ2VTaXplKSA9PiB7XG4gICAgc2V0UG9zdFN0YXRlV2l0aFBvc3RGb290ZXIoe1xuICAgICAgY29uZmlnOiB7XG4gICAgICAgIC4uLmZvcm1MaXN0UGFyYW1zTWVtbyxcbiAgICAgICAgcGFnZVNpemU6IG5ld1BhZ2VTaXplIHx8IHBhZ2VTaXplLFxuICAgICAgICBwYWdlTm9cbiAgICAgIH0sXG4gICAgICBjYWxsYmFjazogaGFuZGxlU2VsZWN0ZWRcbiAgICB9KShsb2FkRm9ybUxpc3RXaXRoUGFyYW1zKVxuICAgIG5ld1BhZ2VTaXplICYmIG9uU2F2ZVBhZ2VTaXplPy4oYXBwSWQsIGZvcm1JZCwgZW52LCBuZXdQYWdlU2l6ZSlcbiAgfSwgW2Zvcm1MaXN0UGFyYW1zTWVtbywgc2V0UG9zdFN0YXRlV2l0aFBvc3RGb290ZXIsIG9uU2F2ZVBhZ2VTaXplLCBlbnYsIGhhbmRsZVNlbGVjdGVkLCBwYWdlU2l6ZV0pXG5cbiAgLy8g5qC55o2u5pu05paw5ZCO55qEZGF0YVNvdXJjZeWSjOW3suWIoOmZpOeahGlk77yM6K6h566X5paw55qE6YCJ5Lit5L+h5oGvXG4gIC8vIHNpbmdsZURlbOW8gOWQr+WkhOeQhuaTjeS9nOagj+WPilBvcEJpbGzkuK3nmoTljZXpobnliKDpmaRcbiAgY29uc3QgaGFuZGxlRGVsZXRlU2VsZWN0ZWRJZCA9IHVzZUNhbGxiYWNrKChjdXJEYXRhU291cmNlLCBkZWxldGVkSWQsIHNpbmdsZURlbCA9IGZhbHNlKSA9PiB7XG4gICAgY29uc3QgaWRzID0gQXJyYXkuaXNBcnJheShkZWxldGVkSWQpID8gZGVsZXRlZElkIDogW2RlbGV0ZWRJZF1cbiAgICBjb25zdCBkZWxldGVDb3VudCA9IHRvdGFsQ291bnQgLSBpZHMubGVuZ3RoXG4gICAgaWYgKHNlbGVjdFN0YXR1cyA9PT0gQ0hFQ0tfQ0FOQ0VMKSB7XG4gICAgICAvLyDliKDpmaTnmoTlj6/og73mmK/mnKrli77pgInnmoRcbiAgICAgIGNvbnN0IFtuZXdOb3RJbklkcywgY291bnRdID0gZmlsdGVyQW5kQ291bnQoaWRzLCBub3RJblNlbGVjdGVkSWRzKVxuICAgICAgY29uc3QgbmV3Q291bnQgPSBjb3VudCA9PT0gMCA/IHNlbGVjdGVkQ291bnQgLSBpZHMubGVuZ3RoIDogc2VsZWN0ZWRDb3VudFxuICAgICAgY29uc3QgbmV3U2VsZWN0ZWRJZHMgPSBnZXRTZWxlY3RlZElkKHsgaW5mbzogeyBuZXdEYXRhU291cmNlOiBjdXJEYXRhU291cmNlLCBuZXdOb3RJbklkcyB9IH0pXG4gICAgICBzZXRGb3JtRGF0YUxpc3RTdGF0ZSh7IHNlbGVjdGVkSWRzOiBuZXdTZWxlY3RlZElkcywgbm90SW5TZWxlY3RlZElkczogbmV3Tm90SW5JZHMsIHNlbGVjdGVkQ291bnQ6IGdldFJlc29uYWJsZUNvdW50KG5ld0NvdW50KSwgdG90YWxDb3VudDogZGVsZXRlQ291bnQgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgLy8g5Yu+6YCJ55qE5Y2V6aG55Yig6Zmk55qEaWTkuIDlrprlnKhzZWxlY3RlZElkc+S4re+8jOaTjeS9nOagj+eahOS4jeS4gOWumlxuICAgICAgY29uc3QgW25ld1NlbGVjdGVkSWRzLCBjb3VudF0gPSBmaWx0ZXJBbmRDb3VudChpZHMsIHNlbGVjdGVkSWRzKVxuICAgICAgY29uc3QgbmV3Q291bnQgPSBzaW5nbGVEZWwgPyBzZWxlY3RlZENvdW50IC0gY291bnQgOiBzZWxlY3RlZENvdW50IC0gaWRzLmxlbmd0aFxuICAgICAgc2V0Rm9ybURhdGFMaXN0U3RhdGUoeyBzZWxlY3RlZElkczogbmV3U2VsZWN0ZWRJZHMsIHNlbGVjdGVkQ291bnQ6IGdldFJlc29uYWJsZUNvdW50KG5ld0NvdW50KSwgdG90YWxDb3VudDogZGVsZXRlQ291bnQgfSlcbiAgICB9XG4gIH0sIFtub3RJblNlbGVjdGVkSWRzLCBzZWxlY3RlZElkcywgc2VsZWN0ZWRDb3VudCwgc2VsZWN0U3RhdHVzLCBnZXRTZWxlY3RlZElkLCB0b3RhbENvdW50XSlcblxuICAvLyDmibnph4/liKDpmaTvvIzliLfmlrDor7fmsYLlm57mnaXlkI7lho3lpITnkIbli77pgIlcbiAgY29uc3QgZGVsZXRlVXBkYXRlQ2FsbGJhY2sgPSB1c2VDYWxsYmFjaygoZGVsZXRlZElkLCBzaW5nbGVEZWwpID0+IHtcbiAgICByZXR1cm4gKGRhdGEpID0+IHtcbiAgICAgIGhhbmRsZURlbGV0ZVNlbGVjdGVkSWQoZGF0YS5kYXRhU291cmNlLCBkZWxldGVkSWQsIHNpbmdsZURlbClcbiAgICB9XG4gIH0sIFtoYW5kbGVEZWxldGVTZWxlY3RlZElkXSlcblxuICAvLyDov5Tlm55wcm9taXNlXG4gIGNvbnN0IG9uQWZ0ZXJEZWxldGVSb3dzID0gdXNlQ2FsbGJhY2soKGRlbGV0ZWRJZCwgY3VycmVudFBhZ2VEYXRhLCBzaW5nbGVEZWwgPSBmYWxzZSwgZGVsQ2FsbGJhY2s/KSA9PiB7XG4gICAgY29uc3QgaWRzID0gQXJyYXkuaXNBcnJheShkZWxldGVkSWQpID8gZGVsZXRlZElkIDogW2RlbGV0ZWRJZF1cbiAgICBjb25zdCBkZWxldGVDb3VudCA9IGlkcy5sZW5ndGhcbiAgICBjb25zdCBwcmV2VG90YWxQYWdlID0gY2FsVG90YWxQYWdlKHBhZ2VTaXplLCB0b3RhbENvdW50KVxuICAgIGNvbnN0IG5leHRUb3RhbENvdW50ID0gdG90YWxDb3VudCAtIGRlbGV0ZUNvdW50XG4gICAgY29uc3QgbmV4dFRvdGFsUGFnZSA9IGNhbFRvdGFsUGFnZShwYWdlU2l6ZSwgbmV4dFRvdGFsQ291bnQpXG4gICAgLy8gZGVsZXRlVXBkYXRlQ2FsbGJhY2vkuLrliY3nq6/orqHnrpfmlrDnmoTli77pgInkv6Hmga/pgLvovpHvvIxkZWxDYWxsYmFja+a7oei2s+mDqOWIhuWIoOmZpOWksei0peWcuuaZr+S9v+eUqOWQjuerr+i/lOWbnueahOWksei0pWlk5L2c5Li65paw55qE5Yu+6YCJ6aG5XG4gICAgY29uc3QgY2FsbGJhY2sgPSBkZWxDYWxsYmFjayB8fCBkZWxldGVVcGRhdGVDYWxsYmFjayhpZHMsIHNpbmdsZURlbClcbiAgICAvLyDliLfmlrDliY3vvIzliKDpmaTmnKzlnLDmlbDmja7vvIzlkKbliJnlt7LpgInmnaHmlbDkvJrmnInor69cbiAgICBzZXRGb3JtRGF0YUxpc3RTdGF0ZSh7IGRhdGFTb3VyY2U6IGN1cnJlbnRQYWdlRGF0YSB9KVxuICAgIGlmIChkZWxldGVDb3VudCA+PSBkYXRhU291cmNlLmxlbmd0aCkgeyAvLyDpobXnoIHmnInlj6/og73mlLnliqjnmoTmg4XlhrVcbiAgICAgIHJldHVybiBzZXRQb3N0U3RhdGVXaXRoUG9zdEZvb3Rlcih7XG4gICAgICAgIGNvbmZpZzoge1xuICAgICAgICAgIC4uLmZvcm1MaXN0UGFyYW1zTWVtbyxcbiAgICAgICAgICBwYWdlTm86IG5leHRUb3RhbFBhZ2UgPj0gcGFnZU5vID8gcGFnZU5vIDogbmV4dFRvdGFsUGFnZVxuICAgICAgICB9LFxuICAgICAgICBjYWxsYmFja1xuICAgICAgfSkobG9hZEZvcm1MaXN0V2l0aFBhcmFtcylcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHNldFBvc3RTdGF0ZVdpdGhQb3N0Rm9vdGVyKHtjb25maWc6IGZvcm1MaXN0UGFyYW1zTWVtbywgY2FsbGJhY2t9KShsb2FkRm9ybUxpc3RXaXRoUGFyYW1zKVxuICAgIH1cbiAgfSwgW2Zvcm1MaXN0UGFyYW1zTWVtbywgc2V0UG9zdFN0YXRlV2l0aFBvc3RGb290ZXIsIHBhZ2VTaXplLCBwYWdlTm8sIHRvdGFsQ291bnQsIGRhdGFTb3VyY2UsIGRlbGV0ZVVwZGF0ZUNhbGxiYWNrXSlcblxuICAvLyDkv53nlZnmiYDmnInphY3nva7ov5vooYzliLfmlrDvvIzkuI3luKbpobbpg6hsb2FkaW5nXG4gIGNvbnN0IG9uQWZ0ZXJTYXZlID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHJldHVybiBzZXRQb3N0U3RhdGVXaXRoUG9zdEZvb3Rlcih7Y29uZmlnOiBmb3JtTGlzdFBhcmFtc01lbW99KShsb2FkRm9ybUxpc3RXaXRoUGFyYW1zKVxuICB9LCBbZm9ybUxpc3RQYXJhbXNNZW1vLCBzZXRQb3N0U3RhdGVXaXRoUG9zdEZvb3Rlcl0pXG5cbiAgY29uc3Qgb25BZnRlckFkZFJvd3MgPSB1c2VDYWxsYmFjaygoYWRkQ291bnQgPSAxKSA9PiB7XG4gICAgY29uc3QgbmV4dFRvdGFsQ291bnQgPSB0b3RhbENvdW50ICsgYWRkQ291bnRcbiAgICBjb25zdCBuZXh0VG90YWxQYWdlID0gY2FsVG90YWxQYWdlKHBhZ2VTaXplLCBuZXh0VG90YWxDb3VudCkgLy8g5paw5aKe5LiA6KGM5oiW5aSa6KGM5pWw5o2u77yM6aG156CB6Ieq5Yqo6Lez6L2s5Yiw5ZCO6Z2iXG4gICAgc2V0UG9zdFN0YXRlV2l0aFBvc3RGb290ZXIoe1xuICAgICAgY29uZmlnOiB7XG4gICAgICAgIC4uLmZvcm1MaXN0UGFyYW1zTWVtbyxcbiAgICAgICAgcGFnZU5vOiBuZXh0VG90YWxQYWdlXG4gICAgICB9LFxuICAgICAgY2xlYXJTZWxlY3RJbmZvOiB0cnVlXG4gICAgfSkobG9hZEZvcm1MaXN0V2l0aFBhcmFtcylcbiAgfSwgW2Zvcm1MaXN0UGFyYW1zTWVtbywgc2V0UG9zdFN0YXRlV2l0aFBvc3RGb290ZXJdKVxuXG4gIGNvbnN0IGhhbmRsZVJvd0RlbGV0ZSA9IHVzZUNhbGxiYWNrKGFzeW5jIChwa0lkLCBjYWxsYmFjaykgPT4ge1xuICAgIHB1Ymxpc2hVc2VyRXZlbnQoe1xuICAgICAgYXBwSWQsIGZvcm1JZCwgYWN0aW9uOiAnYXVfbG9fZGVsX2NvbWYnXG4gICAgfSlcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgb25EZWxldGVGb3JtRGF0YUxpc3RJdGVtKGFwcElkLCBmb3JtSWQsIHBrSWQpXG4gICAgICBjb25zdCBuZXdUYWJsZURhdGFTb3VyY2UgPSBkYXRhU291cmNlLmZpbHRlcihpdGVtID0+IHtcbiAgICAgICAgcmV0dXJuIGl0ZW0uaWQgIT09IHBrSWRcbiAgICAgIH0pXG4gICAgICBvbkFmdGVyRGVsZXRlUm93cyhwa0lkLCBuZXdUYWJsZURhdGFTb3VyY2UsIHRydWUpXG4gICAgICBjYWxsYmFjaz8uKHJlcylcbiAgICAgIHNob3dOb3RpY2UoJ3N1Y2Nlc3MnLCAn5Yig6Zmk5oiQ5YqfJylcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHNob3dOb3RpY2UoJ2Vycm9yJywgZXJyLm1lc3NhZ2UpXG4gICAgfVxuICB9LCBbYXBwSWQsIGZvcm1JZCwgZGF0YVNvdXJjZSwgb25BZnRlckRlbGV0ZVJvd3MsIG9uRGVsZXRlRm9ybURhdGFMaXN0SXRlbV0pXG5cbiAgY29uc3Qgb25Sb3dEZWxldGUgPSB1c2VDYWxsYmFjaygocGtJZCwgY2FsbGJhY2spID0+IHtcbiAgICBwdWJsaXNoVXNlckV2ZW50KHtcbiAgICAgIGFwcElkLCBmb3JtSWQsIGFjdGlvbjogJ2F1X2xvX2RlbCdcbiAgICB9KVxuICAgIHNob3dEZWxldGVDb25maXJtTW9kYWwoe1xuICAgICAgdGl0bGU6ICcnLFxuICAgICAgbWVzc2FnZTogJ+ehruWumuWIoOmZpOivpeiusOW9leWQl++8nycsXG4gICAgICBkZXRhaWw6ICcnLFxuICAgICAgb25PazogKCkgPT4gaGFuZGxlUm93RGVsZXRlKHBrSWQsIGNhbGxiYWNrKSxcbiAgICAgIG9uQ2FuY2VsOiAoKSA9PiB7XG4gICAgICB9XG4gICAgfSlcbiAgfSwgW2FwcElkLCBmb3JtSWQsIGhhbmRsZVJvd0RlbGV0ZV0pXG5cbiAgLy8g6L+U5ZueIOW3sumAiWlk5ZKMZmlsdGVyIOeahOaLvOaOpeS4su+8jOS8oOe7meWQjuerr1xuICBjb25zdCBnZXRTZWxlY3RlZFF1ZXJ5U3RyaW5nID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHJldHVybiBnZXRTZWxlY3RlZFNRTCh7IHN0YXR1czogc2VsZWN0U3RhdHVzLCBzZWxlY3RlZElkcywgbm90SW5JZHM6IG5vdEluU2VsZWN0ZWRJZHMsIGZpbHRlcjogbGlzdEZpbHRlcnM/LlswXSB9KVxuICB9LCBbc2VsZWN0U3RhdHVzLCBzZWxlY3RlZElkcywgbm90SW5TZWxlY3RlZElkcywgbGlzdEZpbHRlcnNdKVxuXG4gIGNvbnN0IHNldFNlbGVjdGVkSW5mbyA9IHVzZUNhbGxiYWNrKChpZHMgPSBzZWxlY3RlZElkcywgc3RhdHVzID0gc2VsZWN0U3RhdHVzLCBub3RJbklkcyA9IG5vdEluU2VsZWN0ZWRJZHMsIG5ld0NvdW50ID0gc2VsZWN0ZWRDb3VudCkgPT4ge1xuICAgIHNldEZvcm1EYXRhTGlzdFN0YXRlKHtcbiAgICAgIHNlbGVjdGVkSWRzOiBpZHMsXG4gICAgICBzZWxlY3RTdGF0dXM6IHN0YXR1cyxcbiAgICAgIG5vdEluU2VsZWN0ZWRJZHM6IG5vdEluSWRzLFxuICAgICAgc2VsZWN0ZWRDb3VudDogbmV3Q291bnRcbiAgICB9KVxuICB9LCBbc2VsZWN0U3RhdHVzLCBzZWxlY3RlZElkcywgbm90SW5TZWxlY3RlZElkcywgc2VsZWN0ZWRDb3VudF0pXG5cbiAgLy8g5L+d55WZ5omA5pyJ6YWN572u6L+b6KGM5Yi35paw77yM5bim6aG26YOobG9hZGluZ1xuICBjb25zdCBvblJlZnJlc2hXaXRoU2V0dGluZyA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBjbG9zZU1lc3NhZ2UgPSBzaG93TG9hZGluZ01lc3NhZ2UoTG9hZGluZ01zZylcbiAgICB0cnkge1xuICAgIC8vIOabtOaWsOmFjee9ruS/oeaBr1xuICAgICAgY29uc3QgbmV3Q29uZmlnID0gYXdhaXQgZ2V0Rm9ybURhdGFMaXN0U2V0dGluZyh7IHNjaGVtYUlkIH0pXG4gICAgICBjb25zdCB7IGxpc3RGaWx0ZXJDb25maWc6IG5ld0ZpbHRlckNvbmZpZyA9IFtdLCBsaXN0SXRlbUNvbmZpZzogbmV3SXRlbUNvbmZpZyA9IFtdLCBsaXN0VHJlZUNvbmZpZzogbmV3VHJlZUNvbmZpZyA9IFtdIH0gPSBuZXdDb25maWcgfHwge31cbiAgICAgIGNvbnN0IG5ld0ZpbHRlckZpZWxkTmFtZXMgPSBuZXdGaWx0ZXJDb25maWcubWFwKGl0ZW0gPT4ge1xuICAgICAgICByZXR1cm4gaXRlbS5maWVsZE5hbWVcbiAgICAgIH0pXG4gICAgICAvLyDov4fmu6Tml6DmnYPpmZDnmoTml6flrZfmrrVcbiAgICAgIGNvbnN0IG5ld0NvbmZpZ3VyZWRGaWx0ZXJJdGVtcyA9IGNvbmZpZ3VyZWRGaWx0ZXJJdGVtcy5maWx0ZXIoaXRlbSA9PiB7XG4gICAgICAgIHJldHVybiBuZXdGaWx0ZXJGaWVsZE5hbWVzLmluY2x1ZGVzKGl0ZW0uZmllbGROYW1lKVxuICAgICAgfSlcbiAgICAgIGxldCBmaWx0ZXJJbmZvID0ge31cbiAgICAgIC8vIOW3sumFjee9ruetm+mAiemhueS4reWQq+acieaXoOadg+mZkOWtl+auteWImei/h+a7pOWQjumHjeaWsOivt+axglxuICAgICAgaWYgKG5ld0NvbmZpZ3VyZWRGaWx0ZXJJdGVtcy5sZW5ndGggIT09IGNvbmZpZ3VyZWRGaWx0ZXJJdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgbmV3Q29sSGVhZEZpbHRlcnMgPSBnZXRDb2xIZWFkRmlsdGVyQnlDb25maWd1cmVkKG5ld0NvbmZpZ3VyZWRGaWx0ZXJJdGVtcylcbiAgICAgICAgY29uc3QgbGlzdEZpbHRlcnMgPSBhd2FpdCBnZXROZXdGaWx0ZXJzPy4oYXBwSWQsIGZvcm1JZCwgZW52LCBuZXdDb25maWd1cmVkRmlsdGVySXRlbXMpXG4gICAgICAgIGZpbHRlckluZm8gPSB7XG4gICAgICAgICAgY29sSGVhZEZpbHRlcnM6IG5ld0NvbEhlYWRGaWx0ZXJzLFxuICAgICAgICAgIGNvbmZpZ3VyZWRGaWx0ZXJJdGVtczogbmV3Q29uZmlndXJlZEZpbHRlckl0ZW1zLFxuICAgICAgICAgIGxpc3RGaWx0ZXJzXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IG5ld0NvbmZpZ1NvcnRJZHMgPSBuZXdJdGVtQ29uZmlnLm1hcChpdGVtID0+IHtcbiAgICAgICAgcmV0dXJuIGl0ZW0ubnVtYmVyXG4gICAgICB9KVxuICAgICAgY29uc3QgbmV3U29ydEl0ZW1zID0gb3JkZXJJbmZvLmZpbHRlcihpdGVtID0+IHtcbiAgICAgICAgcmV0dXJuIG5ld0NvbmZpZ1NvcnRJZHMuaW5jbHVkZXMoaXRlbS5udW1iZXIpXG4gICAgICB9KVxuICAgICAgbGV0IG5ld09yZGVySW5mbyA9IHt9XG4gICAgICAvLyDlt7LphY3nva7mjpLluo/kuK3lkKvmnInml6DmnYPpmZDlrZfmrrXliJnov4fmu6TlkI7ph43mlrDor7fmsYJcbiAgICAgIGlmIChuZXdTb3J0SXRlbXMubGVuZ3RoICE9PSBvcmRlckluZm8ubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IG9yZGVyQnkgPSBhd2FpdCBnZXRPcmRlckJ5KGFwcElkLCBmb3JtSWQsIGVudiwgb3JkZXJJbmZvKVxuICAgICAgICBuZXdPcmRlckluZm8gPSB7XG4gICAgICAgICAgb3JkZXJCeSxcbiAgICAgICAgICBvcmRlckluZm86IG5ld1NvcnRJdGVtc1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBzZXRGb3JtRGF0YUxpc3RTdGF0ZSh7XG4gICAgICAgIGxpc3RGaWx0ZXJDb25maWc6IG5ld0ZpbHRlckNvbmZpZyxcbiAgICAgICAgbGlzdEl0ZW1Db25maWc6IG5ld0l0ZW1Db25maWcsXG4gICAgICAgIGxpc3RUcmVlQ29uZmlnOiBuZXdUcmVlQ29uZmlnLFxuICAgICAgICAuLi5maWx0ZXJJbmZvLFxuICAgICAgICAuLi5uZXdPcmRlckluZm9cbiAgICAgIH0pXG4gICAgICBkZWxldGUgbmV3T3JkZXJJbmZvLm9yZGVySW5mb1xuICAgICAgYXdhaXQgc2V0UG9zdFN0YXRlV2l0aFBvc3RGb290ZXIoe1xuICAgICAgICBjb25maWc6IHtcbiAgICAgICAgICAuLi5mb3JtTGlzdFBhcmFtc01lbW8sXG4gICAgICAgICAgLi4uZmlsdGVySW5mbyxcbiAgICAgICAgICAuLi5uZXdPcmRlckluZm9cbiAgICAgICAgfSxcbiAgICAgICAgbm9QcmVEYXRhOiB0cnVlXG4gICAgICB9KShsb2FkRm9ybUxpc3RXaXRoUGFyYW1zKVxuICAgICAgY2xvc2VNZXNzYWdlKClcbiAgICB9IGNhdGNoKGVycikge1xuICAgICAgY2xvc2VNZXNzYWdlKHsgdHlwZTogJ2Vycm9yJywgY29udGVudDogZXJyPy5tZXNzYWdlIHx8ICfliLfmlrDlpLHotKUnIH0pXG4gICAgfVxuICB9LCBbYXBwSWQsIGZvcm1JZCwgZW52LCBjb25maWd1cmVkRmlsdGVySXRlbXMsIG9yZGVySW5mb10pXG5cbiAgLy8g5L+d5oyB5pON5L2c5aSx6LSl5p2h55uu55qE6YCJ5LitXG4gIGNvbnN0IGtlZXBFcnJTZWxlY3QgPSB1c2VDYWxsYmFjaygocmVzdWx0KSA9PiB7XG4gICAgaWYgKHJlc3VsdCkge1xuICAgICAgY29uc3QgZXJySWRzID0gZ2V0RGVsRGF0YShyZXN1bHQpXG4gICAgICBjb25zdCBuZXdTZWxlY3RJbmZvID0ge1xuICAgICAgICBzZWxlY3RTdGF0dXM6IENIRUNLLFxuICAgICAgICBzZWxlY3RlZElkczogZXJySWRzLFxuICAgICAgICBub3RJblNlbGVjdGVkSWRzOiBbXSxcbiAgICAgICAgc2VsZWN0ZWRDb3VudDogZXJySWRzLmxlbmd0aFxuICAgICAgfVxuICAgICAgc2V0Rm9ybURhdGFMaXN0U3RhdGUobmV3U2VsZWN0SW5mbylcbiAgICB9XG4gIH0sIFtdKVxuXG4gIC8vIOWHuueOsOmDqOWIhuiusOW9leWIoOmZpOWksei0peWImeS8muWIt+aWsOihqOWNlVxuICBjb25zdCBvbkJhdGNoRGVsZXRlID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGNvbnN0IHBhcmFtcyA9IHtcbiAgICAgIGZpbHRlcjogZ2V0U2VsZWN0ZWRRdWVyeVN0cmluZygpLFxuICAgICAgcXVlcnlGaWx0ZXI6IGxpc3RGaWx0ZXJzPy5bMF0gfHwgJydcbiAgICB9XG4gICAgcmV0dXJuIG9uRGVsZXRlSXRlbXNXaXRoRmlsdGVyKGFwcElkLCBmb3JtSWQsIHNjaGVtYUlkLCBzZWFyY2hLZXl3b3JkcywgcGFyYW1zLCBvcmRlckJ5KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGNvbnN0IHsgc3VjY2Vzc0NvdW50LCByZXN1bHQgfSA9IHJlc1xuICAgICAgY29uc3QgbmV3VG90YWwgPSB0b3RhbENvdW50IC0gc3VjY2Vzc0NvdW50XG4gICAgICAvLyDnnJ/lrp7ooqvlkI7nq6/liKDpmaTnmoTlhajpg6hpZFxuICAgICAgY29uc3QgcmVhbERlbElkcyA9IGdldERlbERhdGEocmVzdWx0LCBmYWxzZSlcbiAgICAgIGlmIChsb2FkTW9yZSkge1xuICAgICAgICAvLyDnp7vliqjnq6/liKDpmaTlkI7ov4fmu6RkYXRhU291cmNl5Y2z5Y+v77yM5LiN6IO96YeN5paw6K+35rGC6aG16Z2i5pWw5o2uXG4gICAgICAgIGNvbnN0IG5ld0RhdGFTb3VyY2UgPSBmaWx0ZXJEYXRhKHJlYWxEZWxJZHMsIGRhdGFTb3VyY2UpXG4gICAgICAgIHNldEZvcm1EYXRhTGlzdFN0YXRlKHtcbiAgICAgICAgICBzZWxlY3RlZElkczogW10sXG4gICAgICAgICAgbm90SW5TZWxlY3RlZElkczogW10sXG4gICAgICAgICAgc2VsZWN0U3RhdHVzOiBDSEVDSyxcbiAgICAgICAgICBzZWxlY3RlZENvdW50OiAwLFxuICAgICAgICAgIGRhdGFTb3VyY2U6IG5ld0RhdGFTb3VyY2UsXG4gICAgICAgICAgdG90YWxDb3VudDogbmV3VG90YWxcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9uQWZ0ZXJEZWxldGVSb3dzKHJlYWxEZWxJZHMsIGZpbHRlckRhdGEocmVhbERlbElkcywgZGF0YVNvdXJjZSkpXG4gICAgICAgIHNldEZvcm1EYXRhTGlzdFN0YXRlKHsgLi4uaW5pdFNlbGVjdEluZm8gfSlcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXNcbiAgICB9KS5jYXRjaChlcnIgPT4ge1xuICAgICAgY29uc3QgeyByZXN1bHQgfSA9IGVyci5kYXRhIHx8IHt9XG4gICAgICAvLyDkv53mjIHmnKrliKDpmaTmnaHnm67nmoTpgInkuK1cbiAgICAgIGNvbnN0IHJlYWxEZWxJZHMgPSBnZXREZWxEYXRhKHJlc3VsdCwgZmFsc2UpXG4gICAgICBsZXQgcmVmcmVzaFByb21pc2VcbiAgICAgIGlmIChsb2FkTW9yZSkge1xuICAgICAgICBrZWVwRXJyU2VsZWN0KHJlc3VsdClcbiAgICAgICAgcmVmcmVzaFByb21pc2UgPSBzZXRQb3N0U3RhdGVXaXRoUG9zdEZvb3Rlcih7XG4gICAgICAgICAgY29uZmlnOiB7XG4gICAgICAgICAgICAuLi5mb3JtTGlzdFBhcmFtc01lbW8sXG4gICAgICAgICAgICBwYWdlTm86IDFcbiAgICAgICAgICB9LFxuICAgICAgICAgIG5vUHJlRGF0YTogdHJ1ZSxcbiAgICAgICAgfSkobG9hZEZvcm1MaXN0V2l0aFBhcmFtcylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIOi1sOW4uOinhOeahOWIoOmZpOWQjue/u+mhteajgOafpe+8jGNhbGxiYWNr5Lit6YeN572u5Yu+6YCJ5L+h5oGvXG4gICAgICAgIHJlZnJlc2hQcm9taXNlID0gb25BZnRlckRlbGV0ZVJvd3MocmVhbERlbElkcywgZmlsdGVyRGF0YShyZWFsRGVsSWRzLCBkYXRhU291cmNlKSwgZmFsc2UpXG4gICAgICB9XG4gICAgICByZXR1cm4gcmVmcmVzaFByb21pc2UudGhlbihyZXMgPT4ge1xuICAgICAgICBrZWVwRXJyU2VsZWN0KHJlc3VsdClcbiAgICAgICAgLy8g5Y+q6KaB5pyJ5Yig6Zmk5aSx6LSl55qE6YO96KaB57uZ6ZSZ6K+v5o+Q56S6XG4gICAgICAgIHRocm93IGVyclxuICAgICAgfSlcbiAgICB9KVxuICB9LCBbYXBwSWQsIGZvcm1JZCwgc2VhcmNoS2V5d29yZHMsIGRhdGFTb3VyY2UsIG9uQWZ0ZXJEZWxldGVSb3dzLCBsb2FkTW9yZSwgdG90YWxDb3VudCwgb3JkZXJCeSwgbGlzdEZpbHRlcnMsIHNjaGVtYUlkXSlcblxuICBjb25zdCBvbkxpc3RTZXR0aW5nQ29uZmlybSA9IHVzZUNhbGxiYWNrKChrZXlzLCBsb2NrSW5kZXgsIGxpc3REYXRhKSA9PiB7XG4gICAgY29uc3Qgb2JqID0ge31cbiAgICBsaXN0SXRlbUNvbmZpZy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgb2JqW2l0ZW0ubnVtYmVyXSA9IGl0ZW1cbiAgICB9KVxuICAgIGNvbnN0IG5ld0xpc3RJdGVtQ29uZmlnID0gbGlzdERhdGE/Lm1hcChpdGVtID0+IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLm9ialtpdGVtLmtleV0sXG4gICAgICAgIGRpc3BsYXk6ICEha2V5cy5maW5kKGtleSA9PiB7XG4gICAgICAgICAgcmV0dXJuIGtleSA9PT0gaXRlbS5rZXlcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9KVxuICAgIC8vIOenu+WKqOerr+aXoOmUgeWumuWIl2xvY2tJbmRleOaYr3VuZGVmaW5lZO+8jOS9huS4jeiDveW9seWTjXBj55qE5YiX6ZSB5a6aXG4gICAgbG9ja0luZGV4ICE9PSB1bmRlZmluZWQgJiYgbmV3TGlzdEl0ZW1Db25maWc/LmZvckVhY2goKGNvbCwgaSkgPT4ge1xuICAgICAgY29sLmxvY2tlZCA9IGkgPD0gbG9ja0luZGV4XG4gICAgfSlcbiAgICBjb25zdCBsb2NrZWRLZXlzID0gbmV3TGlzdEl0ZW1Db25maWc/LmZpbHRlcihpdGVtID0+IHtcbiAgICAgIHJldHVybiBpdGVtLmxvY2tlZFxuICAgIH0pLm1hcCgoaXRlbSkgPT4ge1xuICAgICAgcmV0dXJuIGl0ZW0ubnVtYmVyXG4gICAgfSlcbiAgICBzZXRGb3JtRGF0YUxpc3RTdGF0ZSh7IHNob3dMaXN0U2V0dGluZ1BvcDogZmFsc2UsIGxpc3RJdGVtQ29uZmlnOiBuZXdMaXN0SXRlbUNvbmZpZyB8fCBsaXN0SXRlbUNvbmZpZyB9KVxuICAgIG9uU2F2ZUZvcm1MaXN0U2V0dGluZz8uKGFwcElkLCBmb3JtSWQsIGVudiwga2V5cywgbG9ja2VkS2V5cylcbiAgfSwgW3NldEZvcm1EYXRhTGlzdFN0YXRlLCBsaXN0SXRlbUNvbmZpZywgYXBwSWQsIGZvcm1JZCwgZW52XSlcblxuICBjb25zdCBvbkZpbHRlckl0ZW1EZWxldGUgPSB1c2VDYWxsYmFjayhhc3luYyAoaSkgPT4ge1xuICAgIGNvbnN0IG5ld0l0ZW1zID0gY29uZmlndXJlZEZpbHRlckl0ZW1zPy5maWx0ZXIoKGl0ZW0sIGluZGV4KSA9PiB7XG4gICAgICByZXR1cm4gaSAhPT0gaW5kZXhcbiAgICB9KVxuICAgIG9uRmlsdGVyQ29uZmlybShuZXdJdGVtcylcbiAgfSwgW2NvbmZpZ3VyZWRGaWx0ZXJJdGVtcywgb25GaWx0ZXJDb25maXJtXSlcblxuICBjb25zdCBvbkNoYW5nZUZpbHRlcnMgPSB1c2VDYWxsYmFjaygoY29sSGVhZEZpbHRlcnMpID0+IHtcbiAgICBzZXRGb3JtRGF0YUxpc3RTdGF0ZSh7IGNvbEhlYWRGaWx0ZXJzIH0pXG4gIH0sIFtzZXRGb3JtRGF0YUxpc3RTdGF0ZV0pXG5cbiAgLy8g5Yi35paw6ZyA6KaB6YeN5paw6I635Y+W5omA5pyJ6KGo5qC86YWN572u5ZKM5pWw5o2u77yI5L+d55WZ5LqG5YWz6ZSu6K+N77yJXG4gIGNvbnN0IG9uUmVmcmVzaCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICByZXR1cm4gb25Mb2FkSW5pdERhdGEoYXBwSWQsIGZvcm1JZCB8fCBkZWZ1YWx0Rm9ybUlkLCBlbnYsIHZpZXdBdXRoKVxuICB9LCBbYXBwSWQsIGZvcm1JZCwgZGVmdWFsdEZvcm1JZCwgZW52LCBvbkxvYWRJbml0RGF0YSwgdmlld0F1dGhdKVxuXG4gIC8vIGNvbnN0IG9uUmVmcmVzaCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgLy8gICByZXR1cm4gc2V0UG9zdFN0YXRlV2l0aFBvc3RGb290ZXIoZm9ybUxpc3RQYXJhbXNNZW1vLCB0cnVlKShsb2FkRm9ybUxpc3RXaXRoUGFyYW1zKVxuICAvLyB9LCBbZm9ybUxpc3RQYXJhbXNNZW1vLCBzZXRQb3N0U3RhdGVXaXRoUG9zdEZvb3Rlcl0pXG5cbiAgY29uc3Qgb25TZWFyY2ggPSB1c2VDYWxsYmFjaygodmFsdWUpID0+IHtcbiAgICAvLyDlhbPplK7or43mkJzntKLml7blm57liLDnrKzkuIDpobVcbiAgICBzZXRGb3JtRGF0YUxpc3RTdGF0ZSh7IHNlYXJjaEtleXdvcmRzOiB2YWx1ZSwgcGFnZU5vOiAxIH0pXG4gIH0sIFtzZXRGb3JtRGF0YUxpc3RTdGF0ZV0pXG5cbiAgY29uc3Qgb25Db2xTb3J0ID0gdXNlQ2FsbGJhY2soYXN5bmMgKG9yZGVySW5mbykgPT4ge1xuICAgIGNvbnN0IG9yZGVyQnkgPSBhd2FpdCBnZXRPcmRlckJ5KGFwcElkLCBmb3JtSWQsIGVudiwgb3JkZXJJbmZvKVxuICAgIHNldEZvcm1EYXRhTGlzdFN0YXRlKHtcbiAgICAgIG9yZGVySW5mbyxcbiAgICAgIG9yZGVyQnlcbiAgICB9KVxuICAgIHNldFBvc3RTdGF0ZSh7XG4gICAgICBjb25maWc6IHtcbiAgICAgICAgLi4uZm9ybUxpc3RQYXJhbXNNZW1vLFxuICAgICAgICBvcmRlckJ5LFxuICAgICAgfVxuICAgIH0pKGxvYWRGb3JtTGlzdFdpdGhQYXJhbXMpXG4gIH0sIFthcHBJZCwgZm9ybUlkLCBlbnYsIGZvcm1MaXN0UGFyYW1zTWVtbywgc2V0Rm9ybURhdGFMaXN0U3RhdGUsIHNldFBvc3RTdGF0ZV0pXG5cbiAgY29uc3Qgb25TZXRTaG93TGlzdFNldHRpbmdQb3AgPSB1c2VDYWxsYmFjaygodikgPT4ge1xuICAgIHNldEZvcm1EYXRhTGlzdFN0YXRlKHtcbiAgICAgIHNob3dMaXN0U2V0dGluZ1BvcDogdlxuICAgIH0pXG4gIH0sIFtzZXRGb3JtRGF0YUxpc3RTdGF0ZV0pXG5cbiAgY29uc3Qgb25TZXRTaG93RmlsdGVyU2V0dGluZ1BvcCA9IHVzZUNhbGxiYWNrKCh2KSA9PiB7XG4gICAgc2V0Rm9ybURhdGFMaXN0U3RhdGUoe1xuICAgICAgc2hvd0ZpbHRlclNldHRpbmdQb3A6IHZcbiAgICB9KVxuICB9LCBbc2V0Rm9ybURhdGFMaXN0U3RhdGVdKVxuXG4gIGNvbnN0IG9uU2V0U2hvd1NvcnRTZXR0aW5nUG9wID0gdXNlQ2FsbGJhY2soKHYpID0+IHtcbiAgICBzZXRGb3JtRGF0YUxpc3RTdGF0ZSh7XG4gICAgICBzaG93U29ydFNldHRpbmdQb3A6IHZcbiAgICB9KVxuICB9LCBbc2V0Rm9ybURhdGFMaXN0U3RhdGVdKVxuXG4gIGNvbnN0IHdpdGhvdXRTZWFyY2hLZXl3b3Jkc1BhcmFtc01lbW8gPSB1c2VNZW1vKCgpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgYXBwSWQsXG4gICAgICBmb3JtSWQsXG4gICAgICBzY2hlbWFJZCxcbiAgICAgIGVudixcbiAgICAgIGxpc3RJdGVtQ29uZmlnLFxuICAgICAgbGlzdEZpbHRlcnMsXG4gICAgICBwYWdlTm8sXG4gICAgICBwYWdlU2l6ZSxcbiAgICAgIHVwZGF0ZUZvb3RlcjogdHJ1ZSxcbiAgICAgIG9yZGVyQnksXG4gICAgICBvcmRlckluZm8sXG4gICAgICB2aWV3QXV0aFxuICAgIH1cbiAgfSwgW1xuICAgIGFwcElkLFxuICAgIGZvcm1JZCxcbiAgICBzY2hlbWFJZCxcbiAgICBlbnYsXG4gICAgbGlzdEl0ZW1Db25maWcsXG4gICAgbGlzdEZpbHRlcnMsXG4gICAgcGFnZU5vLFxuICAgIHBhZ2VTaXplLFxuICAgIG9yZGVyQnksXG4gICAgb3JkZXJJbmZvLFxuICAgIHZpZXdBdXRoXG4gIF0pXG5cbiAgY29uc3QgbG9hZFNlYXJjaFJlc3VsdCA9IHVzZUNhbGxiYWNrKGFzeW5jIChzZWFyY2hLZXl3b3JkcykgPT4ge1xuICAgIHNldFBvc3RTdGF0ZVdpdGhQb3N0Rm9vdGVyKHtcbiAgICAgIGNvbmZpZzoge1xuICAgICAgICAuLi53aXRob3V0U2VhcmNoS2V5d29yZHNQYXJhbXNNZW1vLFxuICAgICAgICBzZWFyY2hLZXl3b3JkcyxcbiAgICAgIH0sXG4gICAgICBub1ByZURhdGE6IHRydWUsIC8vIOaQnOe0oumcgOa4heepuuWOn+acieaVsOaNrlxuICAgICAgY2xlYXJTZWxlY3RJbmZvOiB0cnVlXG4gICAgfSkobG9hZEZvcm1MaXN0V2l0aFBhcmFtcylcbiAgfSwgW3dpdGhvdXRTZWFyY2hLZXl3b3Jkc1BhcmFtc01lbW8sIHNldFBvc3RTdGF0ZVdpdGhQb3N0Rm9vdGVyXSlcblxuICBjb25zdCBkZWJvdW5jZVNlYXJjaCA9IHVzZU1lbW8oKCkgPT4ge1xuICAgIHJldHVybiBkZWJvdW5jZShsb2FkU2VhcmNoUmVzdWx0LCA1MDApXG4gIH0sIFtsb2FkU2VhcmNoUmVzdWx0XSlcblxuICBjb25zdCBoYW5kbGVEZWJvdW5jZVNlYXJjaCA9IHVzZUNhbGxiYWNrKGFzeW5jIChzZWFyY2hLZXl3b3JkcykgPT4ge1xuICAgIGRlYm91bmNlU2VhcmNoKHNlYXJjaEtleXdvcmRzKVxuICB9LCBbZGVib3VuY2VTZWFyY2hdKVxuXG4gIGNvbnN0IGdldENvbEhlYWRGaWx0ZXIgPSB1c2VDYWxsYmFjaygoZmllbGROYW1lKSA9PiB7XG4gICAgY29uc3QgZmlsdGVyc0V4Y2VwdEZpZWxkRW51bVR5cGUgPSBnZXRGaWx0ZXJzRXhjZXB0RmllbGRFbnVtVHlwZShmaWVsZE5hbWUsIGNvbmZpZ3VyZWRGaWx0ZXJJdGVtcykvLyDlj5HpgIHlhbbkvZnnrZvpgInmnaHku7bljrvmn6Xor6LmnprkuL7lgLws5Y2z5b2T5YmN5a2X5q615LiU5piv5p6a5Li+57G75Z6L55qE5p2h5Lu26Zmk5aSWXG4gICAgcmV0dXJuIGdldENvbEhlYWRGaWx0ZXJDb25maWcoYXBwSWQsIGZvcm1JZCwgZW52LCBmaWVsZE5hbWUsIGZpbHRlcnNFeGNlcHRGaWVsZEVudW1UeXBlLCBzY2hlbWFJZClcbiAgfSwgW2FwcElkLCBmb3JtSWQsIGVudiwgY29uZmlndXJlZEZpbHRlckl0ZW1zLCBzY2hlbWFJZF0pXG5cbiAgY29uc3Qgb25Db2xIZWFkRmlsdGVyVmlzaWJsZUNoYW5nZSA9IHVzZUNhbGxiYWNrKChudW1iZXIpID0+IHtcbiAgICAvLyBpZiAodikge1xuICAgIC8vIGNsZWFyVGltZW91dCh0aW1lci5jdXJyZW50KVxuICAgIC8vIHRpbWVyLmN1cnJlbnQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAvLyAgIHNldEZvcm1EYXRhTGlzdFN0YXRlKHtcbiAgICAvLyAgICAgY29sSGVhZEZpbHRlcjoge1xuICAgIC8vICAgICAgIC4uLmNvbEhlYWRGaWx0ZXIsXG4gICAgLy8gICAgICAgW251bWJlcl06IGRhdGFcbiAgICAvLyAgICAgfSxcbiAgICAvLyAgICAgY29sTG9hZGluZzogdHJ1ZVxuICAgIC8vICAgfSlcbiAgICAvLyB9LCBMT0FESU5HX1RJTUVfT1VUKVxuICAgIGdldENvbEhlYWRGaWx0ZXI/LihudW1iZXIpLnRoZW4oZGF0YSA9PiB7XG4gICAgICAvLyBjbGVhclRpbWVvdXQodGltZXIuY3VycmVudClcblxuICAgICAgY29uc3QgZmllbGRJdGVtQ29uZmlnID0gbGlzdEl0ZW1Db25maWcuZmluZChpdGVtID0+IGl0ZW0ubnVtYmVyID09PSBudW1iZXIpIHx8IHt9XG5cbiAgICAgIHNldEZvcm1EYXRhTGlzdFN0YXRlKHtcbiAgICAgICAgY29sSGVhZEZpbHRlcjoge1xuICAgICAgICAgIC4uLmNvbEhlYWRGaWx0ZXIsXG4gICAgICAgICAgW251bWJlcl06IHtcbiAgICAgICAgICAgIGZpZWxkRmlsdGVyQ29uZmlnOiB7IC4uLmRhdGEuZmllbGRGaWx0ZXJDb25maWcsIC4uLmZpZWxkSXRlbUNvbmZpZyB9LFxuICAgICAgICAgICAgZ3JvdXBJbmZvOiBkYXRhLmdyb3VwSW5mbyxcbiAgICAgICAgICAgIGNvbmZpZ3VyZWRGaWx0ZXI6IHsgaXRlbXM6IGdldENvbmZpZ3VyZWRGaWx0ZXIoY29uZmlndXJlZEZpbHRlckl0ZW1zLCBudW1iZXIsIGZpZWxkSXRlbUNvbmZpZy50eXBlKSwgZW51bUVxQ29tcGFyZVR5cGU6ICcwMDEnIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIC8vIGNvbExvYWRpbmc6IGZhbHNlXG4gICAgICB9KVxuICAgIH0pXG4gICAgLy8gfVxuICB9LCBbZ2V0Q29sSGVhZEZpbHRlciwgY29sSGVhZEZpbHRlciwgY29uZmlndXJlZEZpbHRlckl0ZW1zLCBsaXN0SXRlbUNvbmZpZ10pXG5cbiAgLy8g5aaC5p6c5b2T5YmN5p6a5Li+57G75Z6L5piv55Sx5YW25LuW5q+U6L6D57G75Z6L6L2s5o2i6L+H5p2l55qE77yM6ZyA6KaB5Lyg6YCS5pyA5paw55qEY29uZmlndXJlZEZpbHRlckl0ZW1zXG4gIGNvbnN0IGdldEVudW1GaWx0ZXJWYWx1ZSA9IHVzZUNhbGxiYWNrKGFzeW5jICh2LCBuZXdDb25maWd1cmVkRmlsdGVySXRlbXMsIHdpdGhTY2hlbWFJZCA9IGZhbHNlKSA9PiB7XG4gICAgY29uc3QgZmlsdGVycm93cyA9IHsgZmllbGROYW1lOiB2Py5maWVsZE5hbWUsIGNvbXBhcmVUeXBlOiB2Py5jb21wYXJlVHlwZSwgdmFsdWU6IHY/LnZhbHVlIH1cbiAgICAvLyBsb2FkRW51bUZpbHRlclZhbHVl5Lit5pyJ5a656ZSZ5Yik5pat77yMQm9vbGVhbihzY2hlbWFJZCnkuLpmYWxzZeaXtuS4jeS8muS8oHNjaGVtYUlkXG4gICAgcmV0dXJuIGF3YWl0IGxvYWRFbnVtRmlsdGVyVmFsdWUoYXBwSWQsIGZvcm1JZCwgZW52LCBuZXdDb25maWd1cmVkRmlsdGVySXRlbXMgfHwgY29uZmlndXJlZEZpbHRlckl0ZW1zLCBsaXN0RmlsdGVyQ29uZmlnLCBmaWx0ZXJyb3dzLCAnJywgd2l0aFNjaGVtYUlkICYmIHNjaGVtYUlkKVxuICB9LCBbYXBwSWQsIGZvcm1JZCwgZW52LCBjb25maWd1cmVkRmlsdGVySXRlbXMsIGxpc3RGaWx0ZXJDb25maWcsIHNjaGVtYUlkXSlcblxuICBjb25zdCBvbkdldEVudW1GaWx0ZXJWYWx1ZSA9IHVzZUNhbGxiYWNrKGFzeW5jICh2LCBjb25maWd1cmVkRmlsdGVySXRlbXMsIHdpdGhTY2hlbWFJZCA9IGZhbHNlKSA9PiB7XG4gICAgcmV0dXJuIGF3YWl0IGdldEVudW1GaWx0ZXJWYWx1ZSh7IGZpZWxkTmFtZTogdj8uZmllbGROYW1lLCBjb21wYXJlVHlwZTogdj8uY29tcGFyZVR5cGUsIHZhbHVlOiB2Py52YWx1ZSB9LCBjb25maWd1cmVkRmlsdGVySXRlbXMsIHdpdGhTY2hlbWFJZCkudGhlbigoZGF0YSkgPT4ge1xuICAgICAgc2V0Rm9ybURhdGFMaXN0U3RhdGUoe1xuICAgICAgICBlbnVtRmlsdGVyVmFsdWU6IHtcbiAgICAgICAgICAuLi5lbnVtRmlsdGVyVmFsdWUsXG4gICAgICAgICAgW3Y/LmZpZWxkTmFtZV06IGRhdGFcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9KVxuICB9LCBbZ2V0RW51bUZpbHRlclZhbHVlLCBlbnVtRmlsdGVyVmFsdWVdKVxuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgeyBjb2x1bW5zLCB2aXNpYmxlQ29sdW1uS2V5cyB9ID0gZ2V0Q29sdW1ucyhsaXN0SXRlbUNvbmZpZylcbiAgICBzZXRGb3JtRGF0YUxpc3RTdGF0ZSh7IGNvbHVtbnMsIHZpc2libGVDb2x1bW5LZXlzIH0pXG4gIH0sIFtsaXN0SXRlbUNvbmZpZywgZ2V0Q29sdW1uc10pXG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBzZXRGb3JtRGF0YUxpc3RTdGF0ZSh7IC8vIOWIh+aNoumhtemdouaQnOe0ouahhuWGheWuuee9ruepuu+8jCBzZWFyY2hLZXl3b3Jkc+iuvue9ruS4um51bGzvvIzpgb/lhY3lkozmkJzntKLlhoXlrrnliKDpmaTlkI7mmK8nJ+eahOaDheWGteWGsueqgVxuICAgICAgc2VhcmNoS2V5d29yZHM6IG51bGwsXG4gICAgICBzZWxlY3RlZElkczogW10sXG4gICAgICBzZWxlY3RTdGF0dXM6IENIRUNLLFxuICAgICAgbm90SW5TZWxlY3RlZElkczogW10sXG4gICAgICBzZWxlY3RlZENvdW50OiAwXG4gICAgfSlcbiAgICB0cnkge1xuICAgICAgbG9hZERhdGEgJiYgIXBlbmRpbmcgJiYgb25Mb2FkSW5pdERhdGEoYXBwSWQsIGZvcm1JZCB8fCBkZWZ1YWx0Rm9ybUlkLCBlbnYsIHZpZXdBdXRoKSAvLyAg5rua5Yqo5Yqg6L295Lya6Ieq5Yqo5LuO56ys5LiA6aG15Yqg6L29XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgc2V0Rm9ybURhdGFMaXN0U3RhdGUoe1xuICAgICAgICBkYXRhU291cmNlOiBbXSxcbiAgICAgICAgZm9vdGVyRGF0YVNvdXJjZTogW10sXG4gICAgICAgIHBhZ2VObzogMSxcbiAgICAgICAgcGFnZVNpemU6IDIwLFxuICAgICAgICB0b3RhbENvdW50OiAwLFxuICAgICAgICBsYXN0UGFnZTogdHJ1ZSxcbiAgICAgICAgZm9ybU5hbWU6ICcnLFxuICAgICAgICBsb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgbGlzdEl0ZW1Db25maWc6IFtdLFxuICAgICAgICBsaXN0RmlsdGVyQ29uZmlnOiBbXSxcbiAgICAgICAgbGlzdFRyZWVDb25maWc6IFtdLFxuICAgICAgICBsaXN0U3RhdEluZm86IFtdLFxuICAgICAgICBjb25maWd1cmVkRmlsdGVySXRlbXM6IFtdLFxuICAgICAgICBsaXN0RmlsdGVyczogW11cbiAgICAgIH0pXG4gICAgfVxuICB9LCBbc2V0Rm9ybURhdGFMaXN0U3RhdGUsIGFwcElkLCBmb3JtSWQsIGRlZnVhbHRGb3JtSWQsIGVudiwgbG9hZERhdGEsIHZpZXdBdXRoLCBwZW5kaW5nXSlcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIHR5cGVvZiBzZWFyY2hLZXl3b3JkcyA9PT0gJ3N0cmluZycgJiYgaGFuZGxlRGVib3VuY2VTZWFyY2goc2VhcmNoS2V5d29yZHMpXG4gIH0sIFtzZWFyY2hLZXl3b3Jkc10pXG5cbiAgY29uc3Qgb25TZWxlY3RDaGFuZ2UgPSB1c2VDYWxsYmFjaygoeyBuZXh0LCBrZXkgPSAnJywgYWN0aW9uIH0pID0+IHtcbiAgICBjb25zdCBpZHMgPSBnZXRJZHMoa2V5KVxuICAgIHN3aXRjaCAoYWN0aW9uKSB7XG4gICAgICBjYXNlIFNFTEVDVF9BQ1RJT05TLmNoZWNrX2FsbDpcbiAgICAgICAgc2V0U2VsZWN0ZWRJbmZvKG5leHQgfHwgZ2V0U2VsZWN0ZWRJZCh7IHN0YXR1czogQ0hFQ0tfQUxMIH0pLCBDSEVDS19BTEwsIFtdLCB0b3RhbENvdW50KVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSBTRUxFQ1RfQUNUSU9OUy51bmNoZWNrX2FsbDpcbiAgICAgICAgc2V0U2VsZWN0ZWRJbmZvKFtdLCBDSEVDSywgW10sIDApXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlIFNFTEVDVF9BQ1RJT05TLmNoZWNrOlxuICAgICAgICBpZiAoc2VsZWN0U3RhdHVzID09PSBDSEVDSykge1xuICAgICAgICAgIHNldEZvcm1EYXRhTGlzdFN0YXRlKHtcbiAgICAgICAgICAgIHNlbGVjdGVkSWRzOiBzZWxlY3RlZElkcy5jb25jYXQoaWRzKSxcbiAgICAgICAgICAgIHNlbGVjdGVkQ291bnQ6IHNlbGVjdGVkQ291bnQgKyAxXG4gICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBuZXdOb3RJbklkcyA9IGZpbHRlcklkKGlkcywgbm90SW5TZWxlY3RlZElkcylcbiAgICAgICAgICBzZXRGb3JtRGF0YUxpc3RTdGF0ZSh7XG4gICAgICAgICAgICBzZWxlY3RlZElkczogbmV4dCB8fCBnZXRTZWxlY3RlZElkKHsgaW5mbzogeyBuZXdOb3RJbklkcyB9IH0pLFxuICAgICAgICAgICAgbm90SW5TZWxlY3RlZElkczogbmV3Tm90SW5JZHMsXG4gICAgICAgICAgICBzZWxlY3RlZENvdW50OiBzZWxlY3RlZENvdW50ICsgMVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgU0VMRUNUX0FDVElPTlMudW5jaGVjazpcbiAgICAgICAgaWYgKHNlbGVjdFN0YXR1cyA9PT0gQ0hFQ0spIHtcbiAgICAgICAgICBzZXRGb3JtRGF0YUxpc3RTdGF0ZSh7XG4gICAgICAgICAgICBzZWxlY3RlZElkczogZmlsdGVySWQoaWRzLCBzZWxlY3RlZElkcyksXG4gICAgICAgICAgICBzZWxlY3RlZENvdW50OiBzZWxlY3RlZENvdW50IC0gMVxuICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgbmV3Tm90SW5JZHMgPSBub3RJblNlbGVjdGVkSWRzLmNvbmNhdChpZHMpXG4gICAgICAgICAgc2V0U2VsZWN0ZWRJbmZvKG5leHQgfHwgZ2V0U2VsZWN0ZWRJZCh7IHN0YXR1czogQ0hFQ0tfQ0FOQ0VMLCBpbmZvOiB7IG5ld05vdEluSWRzIH0gfSksIENIRUNLX0NBTkNFTCwgbmV3Tm90SW5JZHMsIHNlbGVjdGVkQ291bnQgLSAxKVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgfVxuICB9LCBbc2VsZWN0U3RhdHVzLCBzZWxlY3RlZElkcywgbm90SW5TZWxlY3RlZElkcywgc2V0U2VsZWN0ZWRJbmZvLCB0b3RhbENvdW50LCBzZWxlY3RlZENvdW50LCBnZXRTZWxlY3RlZElkXSlcblxuICBjb25zdCBhY3Rpb25zID0ge1xuICAgIG9uQWZ0ZXJBZGRSb3dzLFxuICAgIG9uQWZ0ZXJEZWxldGVSb3dzLFxuICAgIG9uQWZ0ZXJTYXZlLFxuICAgIG9uUGFnaW5hdGlvbkNoYW5nZSxcbiAgICBvbkxpc3RTZXR0aW5nQ29uZmlybSxcbiAgICBvbkZpbHRlckl0ZW1EZWxldGUsXG4gICAgb25GaWx0ZXJDb25maXJtLFxuICAgIG9uUmVmcmVzaCxcbiAgICBvblJlZnJlc2hXaXRoU2V0dGluZyxcbiAgICBvblNlYXJjaCxcbiAgICBvbkNoYW5nZUZpbHRlcnMsXG4gICAgb25TZXRTaG93RmlsdGVyU2V0dGluZ1BvcCxcbiAgICBvblNldFNob3dMaXN0U2V0dGluZ1BvcCxcbiAgICBvblNldFNob3dTb3J0U2V0dGluZ1BvcCxcbiAgICBvbkFnZ0NlbGxDaGFuZ2UsXG4gICAgZ2V0Q29sSGVhZEZpbHRlcixcbiAgICBvbkNvbEhlYWRGaWx0ZXJWaXNpYmxlQ2hhbmdlLFxuICAgIGdldEVudW1GaWx0ZXJWYWx1ZSxcbiAgICBnZXRTdGF0SW5mbyxcbiAgICBvbkNvbEZpbHRlckNvbmZpcm0sXG4gICAgaGFuZGxlUm93RGVsZXRlLFxuICAgIG9uUm93RGVsZXRlLFxuICAgIG9uTG9hZE1vcmVEYXRhLFxuICAgIG9uTG9hZEluaXREYXRhLFxuICAgIG9uTG9hZFNldHRpbmcsXG4gICAgb25VcGRhdGVEYXRhU291cmNlLFxuICAgIG9uQ29sU29ydCxcbiAgICBvbkdldEVudW1GaWx0ZXJWYWx1ZSxcbiAgICBvbkFnZ1Zpc2libGVDaGFuZ2UsXG4gICAgc2V0Rm9ybURhdGFMaXN0U3RhdGUsXG4gICAgb25TZWxlY3RDaGFuZ2UsXG4gICAgb25CYXRjaERlbGV0ZSxcbiAgICBnZXRTZWxlY3RlZFF1ZXJ5U3RyaW5nLFxuICAgIHNldFNlbGVjdGVkSW5mbyxcbiAgICBoYW5kbGVEZWxldGVTZWxlY3RlZElkLFxuICAgIGtlZXBFcnJTZWxlY3RcbiAgfVxuXG4gIHJldHVybiBbZm9ybURhdGFMaXN0U3RhdGUsIGFjdGlvbnMsIFRhYmxlQ29udGV4dF1cbn1cblxuZXhwb3J0IGRlZmF1bHQgdXNlRm9ybURhdGFMaXN0XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/hooks/useFormDataList.ts\n");

/***/ }),

/***/ "./src/utils/menuTableAppActions.ts":
/*!******************************************!*\
  !*** ./src/utils/menuTableAppActions.ts ***!
  \******************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\n\nvar _Object$keys = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/keys */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/object/keys.js\");\nvar _Object$getOwnPropertySymbols = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols.js\");\nvar _filterInstanceProperty = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/filter */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/instance/filter.js\");\nvar _Object$getOwnPropertyDescriptor = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor.js\");\nvar _Object$getOwnPropertyDescriptors = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors.js\");\nvar _Object$defineProperties = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-properties */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/object/define-properties.js\");\nvar _Object$defineProperty = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-property */ \"../../node_modules/@babel/runtime-corejs3/core-js-stable/object/define-property.js\");\nvar _interopRequireDefault = __webpack_require__(/*! @babel/runtime-corejs3/helpers/interopRequireDefault */ \"../../node_modules/@babel/runtime-corejs3/helpers/interopRequireDefault.js\");\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.initSelectInfo = exports.getInitFormDataList = exports.getFormDataListSetting = void 0;\nvar _regenerator = _interopRequireDefault(__webpack_require__(/*! @babel/runtime-corejs3/regenerator */ \"../../node_modules/@babel/runtime-corejs3/regenerator/index.js\"));\nvar _defineProperty2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime-corejs3/helpers/defineProperty */ \"../../node_modules/@babel/runtime-corejs3/helpers/defineProperty.js\"));\nvar _objectWithoutProperties2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime-corejs3/helpers/objectWithoutProperties */ \"../../node_modules/@babel/runtime-corejs3/helpers/objectWithoutProperties.js\"));\nvar _asyncToGenerator2 = _interopRequireDefault(__webpack_require__(/*! @babel/runtime-corejs3/helpers/asyncToGenerator */ \"../../node_modules/@babel/runtime-corejs3/helpers/asyncToGenerator.js\"));\nvar _apps = __webpack_require__(/*! @/actions/apps */ \"./src/actions/apps.ts\");\nvar _menuTableUtil = __webpack_require__(/*! ./menuTableUtil */ \"./src/utils/menuTableUtil.js\");\nvar _listSettingUtil = __webpack_require__(/*! ./listSettingUtil */ \"./src/utils/listSettingUtil.js\");\nvar _ = __webpack_require__(/*! . */ \"./src/utils/index.tsx\");\nvar _useFormDataListState = __webpack_require__(/*! @/hooks/useFormDataListState */ \"./src/hooks/useFormDataListState.ts\");\nvar _excluded = [\"listItemConfig\", \"configuredFilterItems\", \"listFilters\", \"listFilterConfig\", \"listStatInfo\", \"formName\", \"configuredPageSize\", \"orderBy\", \"orderInfo\", \"name\"];\nfunction ownKeys(e, r) { var t = _Object$keys(e); if (_Object$getOwnPropertySymbols) { var o = _Object$getOwnPropertySymbols(e); r && (o = _filterInstanceProperty(o).call(o, function (r) { return _Object$getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { (0, _defineProperty2.default)(e, r, t[r]); }) : _Object$getOwnPropertyDescriptors ? _Object$defineProperties(e, _Object$getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { _Object$defineProperty(e, r, _Object$getOwnPropertyDescriptor(t, r)); }); } return e; }\nvar initSelectInfo = exports.initSelectInfo = {\n  selectedIds: [],\n  // 选中id（常规选中的是跨页已勾选的id，全选后取消勾选保存的是当前页选中的id）\n  selectStatus: _useFormDataListState.CHECK,\n  // 全选状态\n  notInSelectedIds: [],\n  // 全选后，取消勾选的id\n  selectedCount: 0 // 选中条数\n};\nvar getInitFormDataList = exports.getInitFormDataList = /*#__PURE__*/function () {\n  var _ref2 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee(_ref) {\n    var appId, formId, schemaId, env, viewAuth, compareTypes, searchKeywords, _ref3, listItemConfig, configuredFilterItems, listFilters, listFilterConfig, listStatInfo, formName, configuredPageSize, orderBy, orderInfo, name, other, args, data, dataSource, pageSize, totalCount, pageNo, lastPage, footerDataSource;\n    return _regenerator.default.wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          appId = _ref.appId, formId = _ref.formId, schemaId = _ref.schemaId, env = _ref.env, viewAuth = _ref.viewAuth, compareTypes = _ref.compareTypes, searchKeywords = _ref.searchKeywords;\n          if (!(!appId || !formId || !schemaId)) {\n            _context.next = 3;\n            break;\n          }\n          return _context.abrupt(\"return\");\n        case 3:\n          _context.prev = 3;\n          _context.next = 6;\n          return getFormDataListSetting({\n            appId: appId,\n            formId: formId,\n            env: env,\n            schemaId: schemaId,\n            compareTypes: compareTypes\n          });\n        case 6:\n          _context.t0 = _context.sent;\n          if (_context.t0) {\n            _context.next = 9;\n            break;\n          }\n          _context.t0 = {};\n        case 9:\n          _ref3 = _context.t0;\n          listItemConfig = _ref3.listItemConfig;\n          configuredFilterItems = _ref3.configuredFilterItems;\n          listFilters = _ref3.listFilters;\n          listFilterConfig = _ref3.listFilterConfig;\n          listStatInfo = _ref3.listStatInfo;\n          formName = _ref3.formName;\n          configuredPageSize = _ref3.configuredPageSize;\n          orderBy = _ref3.orderBy;\n          orderInfo = _ref3.orderInfo;\n          name = _ref3.name;\n          other = (0, _objectWithoutProperties2.default)(_ref3, _excluded);\n          if (viewAuth) {\n            _context.next = 23;\n            break;\n          }\n          return _context.abrupt(\"return\", {\n            dataSource: [],\n            footerDataSource: [],\n            pageSize: 20,\n            pageNo: 1,\n            totalCount: 0,\n            lastPage: true,\n            formName: formName,\n            loading: false,\n            listItemConfig: listItemConfig,\n            listFilterConfig: listFilterConfig,\n            listStatInfo: listStatInfo,\n            configuredFilterItems: [],\n            // 不显示视图的默认筛选\n            listFilters: listFilters,\n            orderBy: orderBy,\n            orderInfo: orderInfo\n          });\n        case 23:\n          args = (0, _menuTableUtil.getArgs)(listFilters === null || listFilters === void 0 ? void 0 : listFilters[0], {\n            env: env,\n            page_size: configuredPageSize,\n            order_by: orderBy,\n            schemaId: schemaId,\n            search: searchKeywords\n          });\n          _context.next = 26;\n          return (0, _apps.getFormDataList)(appId, formId, args);\n        case 26:\n          data = _context.sent;\n          dataSource = data.rows, pageSize = data.pageSize, totalCount = data.totalCount, pageNo = data.pageNo, lastPage = data.lastPage;\n          footerDataSource = (0, _menuTableUtil.getInitFooterDataSource)(listItemConfig, listStatInfo);\n          return _context.abrupt(\"return\", _objectSpread(_objectSpread({\n            dataSource: dataSource,\n            footerDataSource: footerDataSource,\n            pageSize: pageSize,\n            pageNo: pageNo,\n            totalCount: totalCount,\n            lastPage: lastPage,\n            formName: formName,\n            loading: false,\n            listItemConfig: listItemConfig,\n            listFilterConfig: listFilterConfig,\n            listStatInfo: listStatInfo,\n            configuredFilterItems: [],\n            // 不显示视图的默认筛选\n            schemaConfiguredFilterItems: configuredFilterItems,\n            listFilters: listFilters,\n            orderBy: orderBy,\n            orderInfo: orderInfo\n          }, other), initSelectInfo));\n        case 32:\n          _context.prev = 32;\n          _context.t1 = _context[\"catch\"](3);\n          console.error(_context.t1.message || '表单已被删除');\n          (0, _.showNotice)('error', _context.t1.message || '表单已被删除');\n          // showNotice('error', '数据发生异常')\n        case 36:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee, null, [[3, 32]]);\n  }));\n  return function getInitFormDataList(_x) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nvar getFormDataListSetting = exports.getFormDataListSetting = /*#__PURE__*/function () {\n  var _ref5 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee2(_ref4) {\n    var appId, formId, env, schemaId, compareTypesMap, formSetting, data, listFilterConfig;\n    return _regenerator.default.wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          appId = _ref4.appId, formId = _ref4.formId, env = _ref4.env, schemaId = _ref4.schemaId, compareTypesMap = _ref4.compareTypes;\n          _context2.next = 3;\n          return (0, _apps.getFormDataListSettingBySchemaId)(schemaId);\n        case 3:\n          formSetting = _context2.sent;\n          data = formSetting === null || formSetting === void 0 ? void 0 : formSetting.rows[0];\n          listFilterConfig = (0, _listSettingUtil.getListFilterConfig)(data.listItemConfig, data.listFilterConfig);\n          return _context2.abrupt(\"return\", _objectSpread(_objectSpread({}, data), {}, {\n            listFilterConfig: listFilterConfig,\n            listFilters: data.filters\n          }));\n        case 7:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2);\n  }));\n  return function getFormDataListSetting(_x2) {\n    return _ref5.apply(this, arguments);\n  };\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvdXRpbHMvbWVudVRhYmxlQXBwQWN0aW9ucy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFLQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFGQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQXZEQTtBQUFBO0FBQUE7QUF5REE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBVkE7QUFBQTtBQUFBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbm9jb2RlLXBsYXRmb3JtLy4vc3JjL3V0aWxzL21lbnVUYWJsZUFwcEFjdGlvbnMudHM/NmVmZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBnZXRGb3JtRGF0YUxpc3QgYXMgbG9hZEZvcm1EYXRhTGlzdCwgZ2V0Rm9ybURhdGFMaXN0U2V0dGluZ0J5U2NoZW1hSWQgYXMgbG9hZEZvcm1EYXRhTGlzdFNldHRpbmdCeVNjaGVtYUlkXG59IGZyb20gJ0AvYWN0aW9ucy9hcHBzJ1xuaW1wb3J0IHsgZ2V0QXJncywgZ2V0SW5pdEZvb3RlckRhdGFTb3VyY2UgfSBmcm9tICcuL21lbnVUYWJsZVV0aWwnXG5pbXBvcnQgeyBnZXRMaXN0RmlsdGVyQ29uZmlnIH0gZnJvbSAnLi9saXN0U2V0dGluZ1V0aWwnXG5pbXBvcnQgeyBzaG93Tm90aWNlIH0gZnJvbSAnLidcbmltcG9ydCB7IENIRUNLIH0gZnJvbSAnQC9ob29rcy91c2VGb3JtRGF0YUxpc3RTdGF0ZSdcblxuZXhwb3J0IGNvbnN0IGluaXRTZWxlY3RJbmZvID0ge1xuICBzZWxlY3RlZElkczogW10sIC8vIOmAieS4rWlk77yI5bi46KeE6YCJ5Lit55qE5piv6Leo6aG15bey5Yu+6YCJ55qEaWTvvIzlhajpgInlkI7lj5bmtojli77pgInkv53lrZjnmoTmmK/lvZPliY3pobXpgInkuK3nmoRpZO+8iVxuICBzZWxlY3RTdGF0dXM6IENIRUNLLCAvLyDlhajpgInnirbmgIFcbiAgbm90SW5TZWxlY3RlZElkczogW10sIC8vIOWFqOmAieWQju+8jOWPlua2iOWLvumAieeahGlkXG4gIHNlbGVjdGVkQ291bnQ6IDAgLy8g6YCJ5Lit5p2h5pWwXG59XG5cbmV4cG9ydCBjb25zdCBnZXRJbml0Rm9ybURhdGFMaXN0ID0gYXN5bmMgKHsgYXBwSWQsIGZvcm1JZCwgc2NoZW1hSWQsIGVudiwgdmlld0F1dGgsIGNvbXBhcmVUeXBlcywgc2VhcmNoS2V5d29yZHMgfSkgPT4ge1xuICBpZiAoIWFwcElkIHx8ICFmb3JtSWQgfHwgIXNjaGVtYUlkKSByZXR1cm5cbiAgdHJ5IHtcbiAgICBjb25zdCB7XG4gICAgICBsaXN0SXRlbUNvbmZpZywgY29uZmlndXJlZEZpbHRlckl0ZW1zLCBsaXN0RmlsdGVycywgbGlzdEZpbHRlckNvbmZpZywgbGlzdFN0YXRJbmZvLFxuICAgICAgZm9ybU5hbWUsIGNvbmZpZ3VyZWRQYWdlU2l6ZSwgb3JkZXJCeSwgb3JkZXJJbmZvLCBuYW1lLCAuLi5vdGhlclxuICAgIH0gPSBhd2FpdCBnZXRGb3JtRGF0YUxpc3RTZXR0aW5nKHsgYXBwSWQsIGZvcm1JZCwgZW52LCBzY2hlbWFJZCwgY29tcGFyZVR5cGVzIH0pIHx8IHt9XG4gICAgaWYgKCF2aWV3QXV0aCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZGF0YVNvdXJjZTogW10sXG4gICAgICAgIGZvb3RlckRhdGFTb3VyY2U6IFtdLFxuICAgICAgICBwYWdlU2l6ZTogMjAsXG4gICAgICAgIHBhZ2VObzogMSxcbiAgICAgICAgdG90YWxDb3VudDogMCxcbiAgICAgICAgbGFzdFBhZ2U6IHRydWUsXG4gICAgICAgIGZvcm1OYW1lLFxuICAgICAgICBsb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgbGlzdEl0ZW1Db25maWcsXG4gICAgICAgIGxpc3RGaWx0ZXJDb25maWcsXG4gICAgICAgIGxpc3RTdGF0SW5mbyxcbiAgICAgICAgY29uZmlndXJlZEZpbHRlckl0ZW1zOiBbXSwgLy8g5LiN5pi+56S66KeG5Zu+55qE6buY6K6k562b6YCJXG4gICAgICAgIGxpc3RGaWx0ZXJzLFxuICAgICAgICBvcmRlckJ5LFxuICAgICAgICBvcmRlckluZm9cbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgYXJncyA9IGdldEFyZ3MobGlzdEZpbHRlcnM/LlswXSwgeyBlbnYsIHBhZ2Vfc2l6ZTogY29uZmlndXJlZFBhZ2VTaXplLCBvcmRlcl9ieTogb3JkZXJCeSwgc2NoZW1hSWQsIHNlYXJjaDogc2VhcmNoS2V5d29yZHMgfSlcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgbG9hZEZvcm1EYXRhTGlzdChhcHBJZCwgZm9ybUlkLCBhcmdzKVxuICAgIGNvbnN0IHsgcm93czogZGF0YVNvdXJjZSwgcGFnZVNpemUsIHRvdGFsQ291bnQsIHBhZ2VObywgbGFzdFBhZ2UgfSA9IGRhdGFcbiAgICBjb25zdCBmb290ZXJEYXRhU291cmNlID0gZ2V0SW5pdEZvb3RlckRhdGFTb3VyY2UobGlzdEl0ZW1Db25maWcsIGxpc3RTdGF0SW5mbylcbiAgICByZXR1cm4ge1xuICAgICAgZGF0YVNvdXJjZSxcbiAgICAgIGZvb3RlckRhdGFTb3VyY2UsXG4gICAgICBwYWdlU2l6ZSxcbiAgICAgIHBhZ2VObyxcbiAgICAgIHRvdGFsQ291bnQsXG4gICAgICBsYXN0UGFnZSxcbiAgICAgIGZvcm1OYW1lLFxuICAgICAgbG9hZGluZzogZmFsc2UsXG4gICAgICBsaXN0SXRlbUNvbmZpZyxcbiAgICAgIGxpc3RGaWx0ZXJDb25maWcsXG4gICAgICBsaXN0U3RhdEluZm8sXG4gICAgICBjb25maWd1cmVkRmlsdGVySXRlbXM6IFtdLCAvLyDkuI3mmL7npLrop4blm77nmoTpu5jorqTnrZvpgIlcbiAgICAgIHNjaGVtYUNvbmZpZ3VyZWRGaWx0ZXJJdGVtczogY29uZmlndXJlZEZpbHRlckl0ZW1zLFxuICAgICAgbGlzdEZpbHRlcnMsXG4gICAgICBvcmRlckJ5LFxuICAgICAgb3JkZXJJbmZvLFxuICAgICAgLi4ub3RoZXIsXG4gICAgICAuLi5pbml0U2VsZWN0SW5mb1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUuZXJyb3IoZS5tZXNzYWdlIHx8ICfooajljZXlt7LooqvliKDpmaQnKVxuICAgIHNob3dOb3RpY2UoJ2Vycm9yJywgZS5tZXNzYWdlIHx8ICfooajljZXlt7LooqvliKDpmaQnKVxuICAgIC8vIHNob3dOb3RpY2UoJ2Vycm9yJywgJ+aVsOaNruWPkeeUn+W8guW4uCcpXG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IGdldEZvcm1EYXRhTGlzdFNldHRpbmcgPSBhc3luYyAoeyBhcHBJZCwgZm9ybUlkLCBlbnYsIHNjaGVtYUlkLCBjb21wYXJlVHlwZXM6IGNvbXBhcmVUeXBlc01hcCB9KSA9PiB7XG4gIGNvbnN0IGZvcm1TZXR0aW5nID0gYXdhaXQgbG9hZEZvcm1EYXRhTGlzdFNldHRpbmdCeVNjaGVtYUlkKHNjaGVtYUlkKVxuICBjb25zdCBkYXRhID0gZm9ybVNldHRpbmc/LnJvd3NbMF1cbiAgY29uc3QgbGlzdEZpbHRlckNvbmZpZyA9IGdldExpc3RGaWx0ZXJDb25maWcoZGF0YS5saXN0SXRlbUNvbmZpZywgZGF0YS5saXN0RmlsdGVyQ29uZmlnKVxuICByZXR1cm4ge1xuICAgIC4uLmRhdGEsXG4gICAgbGlzdEZpbHRlckNvbmZpZyxcbiAgICBsaXN0RmlsdGVyczogZGF0YS5maWx0ZXJzXG4gIH1cbiAgLy8gcmV0dXJuIHsgbGlzdEl0ZW1Db25maWcsIGxpc3RGaWx0ZXJDb25maWcsIGNvbmZpZ3VyZWRGaWx0ZXJJdGVtcywgbGlzdEZpbHRlcnM6IGZpbHRlcnMsIGxpc3RTdGF0SW5mbywgZm9ybU5hbWUsIGNvbmZpZ3VyZWRQYWdlU2l6ZSwgb3JkZXJCeSwgb3JkZXJJbmZvIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/utils/menuTableAppActions.ts\n");

/***/ })

}]);