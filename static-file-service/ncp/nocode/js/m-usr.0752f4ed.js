(self.webpackChunknocode_platform=self.webpackChunknocode_platform||[]).push([[360],{53196:function(e,t,a){"use strict";a.r(t),t.default={dept:"fSTCsUdc_dept",name:"fWz2YO7d_name"}},53840:function(e,t,a){"use strict";a.r(t),t.default={item:"j3famgOK_item",sub:"_7DhjfQhl_sub",info:"hK7H1HLZ_info"}},3392:function(e,t,a){"use strict";a.r(t),t.default={container:"eDJPMfw3_container",box:"YWqOIvBe_box",title:"_7h89fqlw_title",staff:"h2FsT2ta_staff",child:"v8gTKSlf_child",nav:"oY+1Bs5d_nav",path:"Kt70x27-_path"}},97300:function(e,t,a){"use strict";a.r(t),t.default={container:"+gKL4VN4_container",item:"Uuw1om15_item",title:"kpcuBore_title",avatar:"fsJtOrmG_avatar",origin:"fEHLVdv4_origin"}},48492:function(e,t,a){"use strict";var l=a(13568),n=a(93252),u=a(25028),r=a(4884),f=a(9564);u(t,"__esModule",{value:!0}),t.default=void 0;var c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=l(e)&&"function"!=typeof e)return{default:e};var a=o(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},f=u&&r;for(var c in e)if("default"!==c&&Object.prototype.hasOwnProperty.call(e,c)){var d=f?r(e,c):null;d&&(d.get||d.set)?u(n,c,d):n[c]=e[c]}return n.default=e,a&&a.set(e,n),n}(a(65984)),d=a(18656),i=f(a(53196));function o(e){if("function"!=typeof n)return null;var t=new n,a=new n;return(o=function(e){return e?a:t})(e)}t.default=(0,c.memo)((function(e){var t=e.data,a=e.onClick;return c.default.createElement("div",{className:i.default.dept,onClick:a},c.default.createElement("div",{className:i.default.name},t.name)," ",c.default.createElement(d.Icon,{type:"arrow-right"}))}))},93600:function(e,t,a){"use strict";var l=a(13568),n=a(93252),u=a(25028),r=a(4884),f=a(9564);u(t,"__esModule",{value:!0}),t.default=void 0;var c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=l(e)&&"function"!=typeof e)return{default:e};var a=p(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},f=u&&r;for(var c in e)if("default"!==c&&Object.prototype.hasOwnProperty.call(e,c)){var d=f?r(e,c):null;d&&(d.get||d.set)?u(n,c,d):n[c]=e[c]}return n.default=e,a&&a.set(e,n),n}(a(65984)),d=a(18656),i=f(a(53840)),o=f(a(732)),s=a(95936),m=a(80672),v=a(65873);function p(e){if("function"!=typeof n)return null;var t=new n,a=new n;return(p=function(e){return e?a:t})(e)}t.default=(0,c.memo)((function(e){var t=e.data,a=t.name,l=t.number,n=t.id,u=t.avatar,r=(0,o.default)(),f=(0,c.useContext)(s.Context),p=(f.state,f.dispatch),_=(0,c.useCallback)((function(){p({type:m.SET_STAFF_INFO,payload:e.data}),n&&r("/m/user/info/".concat(n))}),[r]);return c.default.createElement("div",{className:i.default.item,onClick:_},c.default.createElement(v.Avatar,{src:u}),c.default.createElement("div",{className:i.default.info},c.default.createElement("div",null,a),c.default.createElement("div",{className:i.default.sub},l)),c.default.createElement(d.Icon,{type:"arrow-right"}))}))},69652:function(e,t,a){"use strict";var l=a(13568),n=a(13939),u=a(34716),r=a(70696),f=a(4884),c=a(3464),d=a(51400),i=a(25028),o=a(93252),s=a(9564);i(t,"__esModule",{value:!0}),t.default=void 0;var m=s(a(52892)),v=s(a(73980)),p=s(a(67584)),_=s(a(25288)),E=s(a(23992)),h=s(a(760)),b=s(a(99148)),g=s(a(96631)),N=s(a(78912)),y=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=l(e)&&"function"!=typeof e)return{default:e};var a=j(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},u=i&&f;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var c=u?f(e,r):null;c&&(c.get||c.set)?i(n,r,c):n[r]=e[r]}return n.default=e,a&&a.set(e,n),n}(a(65984)),w=s(a(3392)),k=s(a(93600)),x=s(a(48492)),C=a(18656),O=a(25096),M=a(41936);function j(e){if("function"!=typeof o)return null;var t=new o,a=new o;return(j=function(e){return e?a:t})(e)}function I(e,t){var a=n(e);if(u){var l=u(e);t&&(l=r(l).call(l,(function(t){return f(e,t).enumerable}))),a.push.apply(a,l)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){(0,g.default)(e,t,a[t])})):c?d(e,c(a)):I(Object(a)).forEach((function(t){i(e,t,f(a,t))}))}return e}var S={page_size:1e3,page_no:1};t.default=(0,y.memo)((function(){var e=(0,y.useState)([]),t=(0,N.default)(e,2),a=t[0],l=t[1],n=(0,y.useState)([]),u=(0,N.default)(n,2),r=u[0],f=u[1],c=(0,y.useState)([]),d=(0,N.default)(c,2),i=d[0],o=d[1],s=(0,y.useRef)(null),g=(0,y.useRef)(null),j=(0,y.useRef)(null),I=(0,y.useRef)(new m.default),T=(0,M.useParams)(),W=T.orgId,D=T.orgNum,K=(0,y.useCallback)((function(e){(0,O.getOrgUsers)(P(P({},S),{},{filter:"entryentity.dpt.number EQ "+e})).then((function(e){l(e.rows)}))}),[]),F=(0,y.useCallback)((function(e){var t=[];I.current.forEach((function(a,l){a.parentid===e&&t.push(a)})),f(t)}),[]),L=(0,y.useCallback)((function(e,t){o((0,b.default)((0,v.default)(i).call(i,0,t+1))),K(e.number),F(e.id)}),[i]),R=(0,y.useCallback)((function(e){i.push(e),o(i),K(e.number),F(e.id),A()}),[i,j.current]),A=(0,y.useCallback)((function(){s.current.scrollTo({top:0,behavior:"smooth"}),(0,p.default)((function(){var e,t;null===(e=g.current)||void 0===e||e.scrollTo({left:null===(t=j.current)||void 0===t?void 0:t.offsetWidth,behavior:"smooth"})}),1e3)}),[j.current]),B=(0,y.useCallback)((function(e){return(e=(0,_.default)(e).call(e)).length>8?e.substr(0,4)+"..."+e.substr(e.length-4,4):e}),[]),H=(0,y.useCallback)((function(e){e.forEach((function(e){I.current.set(e.id,P(P({},e),{},{children:[]})),e.children.length&&H(e.children)}))}),[]),U=(0,y.useCallback)((function(e){var t=I.current.get(e),a=null==t?void 0:t.parentid;""!==a&&U(a),i.push(t)}),[]);return(0,y.useEffect)((function(){(0,O.getCompanyOrg)({}).then((function(e){H(e.rows),W&&D?(U(W),K(D),F(W),A()):(K(e.rows[0].number),o(e.rows),F(e.rows[0].id))})),document.title="企业管理"}),[]),y.default.createElement("div",{className:w.default.container},y.default.createElement("div",{className:w.default.nav,ref:g},y.default.createElement("div",{className:w.default.path,ref:j},(0,E.default)(i).call(i,(function(e,t){return t===i.length-1?y.default.createElement("p",{key:e.number},e.name):y.default.createElement("p",{key:e.number,onClick:function(){return L(e,t)}},y.default.createElement("a",null,B(e.name)),y.default.createElement(C.Icon,{type:"arrow-right"}))})),y.default.createElement("p",null))),y.default.createElement("div",{className:w.default.box,ref:s},y.default.createElement("div",{className:w.default.staff},y.default.createElement("div",{className:w.default.title},"组织成员"),(0,E.default)(a).call(a,(function(e,t){var a;return y.default.createElement(k.default,{key:(0,h.default)(a="".concat(null==e?void 0:e.id)).call(a,t),data:e})}))),r.length>0&&y.default.createElement("div",{className:w.default.child},y.default.createElement("div",{className:w.default.title},"下级部门"),(0,E.default)(r).call(r,(function(e){return y.default.createElement(x.default,{key:e.number,data:e,onClick:function(){return R(e)}})})))))}))},72324:function(e,t,a){"use strict";var l=a(13568),n=a(93252),u=a(25028),r=a(4884),f=a(9564);u(t,"__esModule",{value:!0}),t.default=void 0;var c=f(a(23992)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=l(e)&&"function"!=typeof e)return{default:e};var a=v(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},f=u&&r;for(var c in e)if("default"!==c&&Object.prototype.hasOwnProperty.call(e,c)){var d=f?r(e,c):null;d&&(d.get||d.set)?u(n,c,d):n[c]=e[c]}return n.default=e,a&&a.set(e,n),n}(a(65984)),i=a(41936),o=a(65873),s=f(a(97300)),m=a(95936);function v(e){if("function"!=typeof n)return null;var t=new n,a=new n;return(v=function(e){return e?a:t})(e)}t.default=(0,d.memo)((function(){var e,t=(0,d.useContext)(m.Context).state,a=(0,i.useParams)().id,l=a?t.staffInfo[a]:t.userInfo;return(0,d.useEffect)((function(){document.title=a?"员工信息":"个人中心"}),[]),d.default.createElement("div",{className:s.default.container},d.default.createElement("div",{className:s.default.item},d.default.createElement("div",{className:s.default.title},"员工编号"),d.default.createElement("div",null,null==l?void 0:l.number)),d.default.createElement("div",{className:s.default.item},d.default.createElement("div",{className:s.default.title},"姓名"),d.default.createElement("div",null,null==l?void 0:l.name)),d.default.createElement("div",{className:s.default.item},d.default.createElement("div",{className:s.default.title},"头像"),d.default.createElement("div",{className:s.default.avatar},d.default.createElement(o.Avatar,{src:null==l?void 0:l.avatar}))),d.default.createElement("div",{className:s.default.item},d.default.createElement("div",{className:s.default.title},"性别"),d.default.createElement("div",null,null==l?void 0:l.gender)),d.default.createElement("div",{className:s.default.item},d.default.createElement("div",{className:s.default.title},"生日"),d.default.createElement("div",null,null==l?void 0:l.birthday)),d.default.createElement("div",{className:s.default.item},d.default.createElement("div",{className:s.default.title},"手机号"),d.default.createElement("div",null,null==l?void 0:l.phone)),d.default.createElement("div",{className:s.default.item},d.default.createElement("div",{className:s.default.title},"邮箱"),d.default.createElement("div",null,null==l?void 0:l.email)),(null==l?void 0:l.orgs)&&(null==l?void 0:l.orgs.length)>0&&d.default.createElement("div",{className:s.default.item},d.default.createElement("div",{className:s.default.title},"所属组织"),d.default.createElement("div",null,d.default.createElement("table",{cellSpacing:1,cellPadding:1},d.default.createElement("tr",null,d.default.createElement("th",null,"所属组织编码"),d.default.createElement("th",null,"组织名称")),null==l?void 0:(0,c.default)(e=l.orgs).call(e,(function(e,t){return d.default.createElement("tr",{key:e.orgId+t},d.default.createElement("td",null,e.orgNum),d.default.createElement("td",null,e.orgName))}))))))}))},732:function(e,t,a){"use strict";a(25028)(t,"__esModule",{value:!0}),t.default=void 0;var l=a(65984),n=a(41936),u=a(34896);t.default=function(){var e=(0,n.useNavigate)(),t=(0,n.useLocation)().search;return(0,l.useCallback)((function(a,l){a=(0,u.urlParamWithDebug)(a,t),e(a,l)}),[t,e])}},34896:function(e,t,a){"use strict";var l=a(25028),n=a(9564);l(t,"__esModule",{value:!0}),t.urlParamWithDebug=void 0;var u=n(a(50524)),r=n(a(760)),f=["kdweb_debug","kdweb_cdn","kdcdc"];t.urlParamWithDebug=function(e,t){for(var a=0;a<f.length;a++)if(null!=t&&(0,u.default)(t).call(t,f[a]))return(0,r.default)(e).call(e,t);return e}},88600:function(e,t,a){var l=a(6164),n=a(84316);e.exports=function(e){if(l(e))return n(e)},e.exports.__esModule=!0,e.exports.default=e.exports},228:function(e,t,a){var l=a(16388),n=a(64800),u=a(96680);e.exports=function(e){if(void 0!==l&&null!=n(e)||null!=e["@@iterator"])return u(e)},e.exports.__esModule=!0,e.exports.default=e.exports},52331:function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},99148:function(e,t,a){var l=a(88600),n=a(228),u=a(2880),r=a(52331);e.exports=function(e){return l(e)||n(e)||u(e)||r()},e.exports.__esModule=!0,e.exports.default=e.exports}}]);