(self.webpackChunkform_designer=self.webpackChunkform_designer||[]).push([[370,820,400],{60370:function(e,t,n){"use strict";n.r(t),n.d(t,{FormDesigner:function(){return kd}});n(19600);var r=n(47976),a=n.n(r),i=n(39448),o=n.n(i),l=n(55748),c=n.n(l),d=n(7312),u=n.n(d),s=n(54120),f=n.n(s),g=n(63808),p=n.n(g),m=n(45040),v=n.n(m),y=n(58496),C=n(34984),h=n(2664),A=n(30112),E=n(75984),x=n.n(E),I=n(81744),b=n.n(I),k=n(47332),S=n.n(k),F=n(13760),w=n.n(F),T=n(82600),N=n.n(T),M=n(30479),L=n.n(M),P=n(59312),D=n.n(P),R=n(29636),B=n.n(R),G=n(45076),_=n.n(G),O=n(18860),K=n.n(O),V=n(43400),z=n.n(V),U=n(18040),H=n.n(U),W=n(54116),j=n(81043),q=n(72048),J=n(65624),Q=n.n(J),Z="Id",X="Type",Y="FieldType",$="FieldName",ee="_Type_",te="Key",ne="Name",re="ParentId",ae="Items",ie="FieldId",oe="LabelDirection",le="Style",ce="Border",de="fieldstyle",ue="lDir",se="text-align",fe="TableHeaderCellBackColor",ge=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.isPC,a=void 0===r||r,i=n.excludeType,o=void 0===i?"":i,l=n.ctrlType,c=void 0===l?"":l,d=e[Z],s=(0,V.useMemo)((function(){var e,n=[];return u()(e=t[ae]).call(e,(function(e){var t=e[ee];if(!(e[re]!==d||o&&o===t||c&&c!==t)){var r=Mi(e,{isPC:a});r&&n.push(z().cloneElement(r,{key:e[Z]}))}})),n}),[d,t,a]);return s},pe=z().createContext({});pe.displayName="DesignerContext";var me=z().createContext({});me.displayName="MainViewContext";var ve=z().createContext({});ve.displayName="DesignerTableContext";var ye=z().createContext({});ye.displayName="DesignerLang";var Ce,he,Ae="data-control-id",Ee="data-selection",xe="data-mouse-over",Ie="data-cut-control",be="data-auxiliary-line",ke="data-origin-format",Se="data-batch-format",Fe="data-drag-control-ids",we="data-drag-direction",Te="data-drag-tree-affected-control",Ne="data-outline-drag-tree-node",Me=function(e){return(0,A.c)({},Ae,e[Z])},Le=function(){var e=(0,V.useCallback)((function(e){var t;e.stopPropagation();var n=e.currentTarget.dataset.controlId,r=document.querySelectorAll(b()(t="[".concat(Ae,'="')).call(t,n,'"]'));u()(r).call(r,(function(e){e.setAttribute(xe,"true")}))}),[]),t=(0,V.useCallback)((function(e){var t;e.stopPropagation();var n=e.currentTarget.dataset.controlId,r=document.querySelectorAll(b()(t="[".concat(Ae,'="')).call(t,n,'"]'));u()(r).call(r,(function(e){e.removeAttribute(xe)}))}),[]);return{onMouseOver:e,onMouseOut:t}},Pe=n(39568),De=n.n(Pe);function Re(){return"Win32"==window.navigator.platform||"Windows"==window.navigator.platform}function Be(){return"Mac68K"==window.navigator.platform||"MacPPC"==window.navigator.platform||"Macintosh"==window.navigator.platform||"MacIntel"==window.navigator.platform}var Ge=Be()?"Mac":"X11"!=window.navigator.platform||Re()||Be()?function(){var e;return De()(e=String(window.navigator.platform)).call(e,"Linux")>-1}()?"Linux":Re()?"Windows":"":"Unix",_e=!0,Oe=function(e){_e=e},Ke=function(){return _e};function Ve(e){return Be()?e.metaKey:e.ctrlKey}navigator.userAgent.match(/Electron\/(\d+)/),navigator.userAgent.match(/Trident\/(\d+)/);var ze=!!navigator.userAgent.match(/Firefox\/(\d+)/),Ue=(navigator.userAgent.match(/Chrome\/(\d+)/),navigator.userAgent.match(/Edge\/(\d+)/),N()(Ce=window.location.hash).call(Ce,"&preview=true"),N()(he=window.location.hash).call(he,"&noLoadYZJ=true"),ze);function He(e){var t=e||window.event;return"Mac"===Ge?t.metaKey:t.ctrlKey}function We(e){return e.shiftKey}var je=n(12388),qe=n.n(je),Je=n(12640),Qe=n.n(Je),Ze=n(67928),Xe=function(e){return e?qe()(e)?e:[e]:[]};var Ye,$e=function(e){for(;!e.dataset.controlId&&"ui-designer-root"!==e.id;)e=e.parentNode;return e},et=function e(t,n,r,a){var i,o,l=n.Id,c=function(e,t,n){var r,a=(0,Ze.cloneDeep)(e);return a[re]=t,a[Z]=(0,U.createUUid)(),n&&u()(r=["FieldId","EntryId","CardEntryId"]).call(r,(function(e){a[e]&&(a[e]=a[Z])})),a.Inherit&&(a.Inherit=!1),a}(n,r,a),d=K()(i=t[ae]).call(i,(function(e){return e[re]===l}));return b()(o=[c]).call(o,(0,Ze.flattenDeep)(x()(d).call(d,(function(n){return e(t,n,c[Z],a)}))))},tt=function(e,t,n){var r,a=B()(e).call(e,(function(e){return e[Z]===t})),i=B()(e).call(e,(function(e){return e[Z]===n}));if((a=-1===a?0:a)>(i=-1===i?0:i)){var o=[i,a];a=o[0],i=o[1]}return null===(r=Qe()(e).call(e,a,i+1))||void 0===r?void 0:x()(r).call(r,(function(e){return e[Z]}))},nt=["Width","Height","FontSize","ForeColor","BackColor","Style","LabelDirection","LabelWidth","TextAlign","FieldForeColor","FieldBackColor","FieldTextAlign","Radius","FieldFontSize","HorAlignment","VerAlignment","HorizontalFill","VerticalFill","Bold","Italic","UnderLine","ValueAreaStyle","MobFieldPattern","FieldStyle","FontWeight","FullLine"],rt=function(e){return function(t,n){if(t&&0!==(null==n?void 0:n.length)){var r=e.findControl(t),a=r[ee],i=_()(n).call(n,(function(t,n){var r;return b()(r=[]).call(r,(0,j.c)(t),(0,j.c)(e.getAllSubControlIds(n)))}),[]),o=_()(i).call(i,(function(t,n){var i,o,l=null===(i=e.findControl(n))||void 0===i?void 0:i[ee];if(a!==l)return t;var c=_()(nt).call(nt,(function(e,t){return e[t]=r[t],e}),{});return b()(o=[]).call(o,(0,j.c)(t),[[n,c]])}),[]);e.batchUpdateControlPropertyValues((0,U.createUpdateAction)(o))}}},at=function(){var e=(0,V.useContext)(pe).getKdesignerApi,t=(0,V.useMemo)((function(){return e()}),[]),n=t.data,r=t.selection,a=r.setSelect,i=r.appendSelect,o=r.getSelection,l=(0,V.useCallback)((function(e){var t;e.stopPropagation();var r=o(),l=n.getRootId(),c=document.querySelector(b()(t="[".concat(Ae,'="')).call(t,l,'"]')),d=$e(e.target).dataset.controlId,u=d?[d]:[],s=!1;if((He(e)||We(e))&&r.length>0&&(s=n.isSiblings(r[0],d)),s){if(He(e))if(N()(r).call(r,d)){var f=K()(r).call(r,(function(e){return e!==d}));f.length&&a(f)}else i([d]);else if(We(e)){var g=r[r.length-1];if(g===d)return;var p=n.getAllSiblings(g);(u=tt(p,g,d))&&a(u)}}else a([d]);var m=document.querySelector("[".concat(ke,"]"));if(m){var v=m.dataset.controlId||"";if(rt(n)(v,u),null!=c&&c.dataset.batchFormat)return;c.style.cursor="",U.eventBus.emit("clear-form-status",!1),m.removeAttribute(ke)}}),[]);return l},it=function(){var e=(0,V.useContext)(pe),t=e.getKdesignerApi,n=e.getCommonUtil,r=(0,V.useMemo)((function(){return t()}),[]),a=r.data,i=r.selection.getActiveSelectedId,o=n().dbClickToChangeProperty,l=(0,V.useMemo)((function(){return Ke()}),[]),c=(0,V.useCallback)((function(e,t){var n=i(),r=(0,A.c)({},e,t);a.batchUpdateControlPropertyValues((0,U.createUpdateAction)([[n,r]]))}),[]);return(0,V.useCallback)((function(e){e.stopPropagation();var t=i(),n=a.findControl(t),r=n[Y],d=n[ee];o(t,!l,c,{type:r||d})}),[l,c])},ot=["Direction","Wrap","Grow","Shrink","Overflow","AlignSelf","AlignContent","AlignItems","JustifyContent","Name","Collapsible","Clickable","FloatingDock","DockingPosition","Hidden","Maximize"],lt={ButtonAp:["Name","Grow","Shrink","AlignSelf","ImageKey","ButtonStyle","ImgWidth","ImgHeight","Hidden","FollowTheme"],FlexPanelAp:ot,CardEntryFlexPanelAp:ot,CardEntryFixRowPanelAp:ot,CardFlexPanelAp:ot,GridFlatPanelAp:ot,UndefinedControl:["Name","Hidden","Direction","Wrap","Grow","Shrink","Overflow","AlignSelf","AlignContent","AlignItems","JustifyContent"],AttachmentPanelAp:["Grow","Shrink","AlignSelf","Name","Collapsible",["ExtendName","extName"],"Hidden"],HyperlinkAp:[["Name","title"],["ShowUnderline","underline"],"Grow","Shrink","AlignSelf","Hidden"],LabelAp:["Name","Grow","Shrink","AlignSelf","LabelStyle","AutoTextWrap","Hidden"],QRCodeAp:[["QrCodeShowStyle","QrCodeStyle"],["FontSize","fontSize"],"Hidden"],ProgressBarAp:["Grow","AlignSelf","Hidden"],CarouselFigureAp:["Grow","Shrink","Hidden"],ImageAp:["ImageKey","Grow","Shrink","AlignSelf","Hidden"],ImageListAp:["Grow","Shrink","AlignSelf","Hidden"],BarChartAp:["Name","Grow","Shrink","AlignSelf","ShowTitle","TitleAlign","ShowLegend","LegendAlign","LegendVertical","Hidden"],CustomChartAp:["Name","Grow","Shrink","AlignSelf","ShowTitle","TitleAlign","ShowLegend","LegendAlign","LegendVertical","Hidden"],GaugeChartAp:["Name","Grow","Shrink","AlignSelf","ShowTitle","TitleAlign","ShowLegend","LegendAlign","LegendVertical","Hidden"],HistogramChartAp:["Name","Grow","Shrink","AlignSelf","ShowTitle","TitleAlign","ShowLegend","LegendAlign","LegendVertical","Hidden"],PieChartAp:["Name","Grow","Shrink","AlignSelf","ShowTitle","TitleAlign","ShowLegend","LegendAlign","LegendVertical","PieRadius","Hidden"],PointLineChartAp:["Name","Grow","Shrink","AlignSelf","ShowTitle","TitleAlign","ShowLegend","LegendAlign","LegendVertical","Hidden"],RadarChartAp:["Name","Grow","Shrink","AlignSelf","ShowTitle","TitleAlign","ShowLegend","LegendAlign","LegendVertical","Hidden"],FieldsetPanelAp:b()(Ye=["RelatedChildrenIds"]).call(Ye,ot),NameCombinePanelAp:["Name","Collapsible","RelatedChildrenIds","Hidden"],ListColumnAp:["Name","Grow","Shrink","AlignSelf"],ListCardViewAp:["Name","Grow","Shrink","Direction","Wrap","AlignItems","AlignSelf","JustifyContent","AlignContent"],F7SelectedListAp:["Name","Grow","Shrink"],BillListAp:["Name","Direction","Wrap","Grow","Shrink","Overflow","AlignSelf","AlignContent","AlignItems","JustifyContent"],CardRowPanelAp:["Shrink","Grow","AlignSelf","AlignContent","AlignItems","JustifyContent","Direction","Wrap"],AdvConAp:["Name","Collapsible","Grow","Shrink","AlignSelf","AlignItems","AlignContent","JustifyContent","CtlTips","Maximize","Hidden"],AdvConSummaryPanelAp:["Direction","Wrap","Grow","Shrink","Overflow","AlignSelf","AlignContent","AlignItems","JustifyContent","Name","Collapsible","Hidden"],AdvConToolbarAp:["Name","Hidden"],AdvConBarItemAp:["Name","DropdownItems","OperationKey","Key"],AdvConChildPanelAp:["Direction","Wrap","Grow","Shrink","Overflow","AlignSelf","AlignContent","AlignItems","JustifyContent","Name","Collapsible","Clickable","FloatingDock","DockingPosition","Hidden"],FloatMenuAp:["Align","Top","Hidden"],FloatMenuItemAp:["Name","Grow","Shrink","AlignSelf","fontClass"],TabAp:["Grow","Shrink","AlignSelf","AlignItems","AlignContent","JustifyContent","HideNavigation","CanCloseAll","CanSlide","CanFull","TabStyle","TabDirection","ShowDropdownIcon"],TabPageAp:["Name","HomeTab"],WizardAp:["WizardStyle","WizardType","TextDirection","StepsOptions","StepLength","Grow","Shrink","StatusIcon","TabId"],HomePageTabAp:["TabId"],IFrameAp:["Grow","Shrink","Hidden"],ClientAjaxAp:["Name"],HtmlAp:["HtmlContent","Direction","Grow","Shrink","AlignSelf"],TaskNoticeAp:["Grow","Shrink"],EntryAp:["Direction","Wrap","Overflow","Grow","Shrink","ShowSelChexkbox","ShowSeq","Name","Collapsible","RowHeight","HeadHeight","ShowFlatPanel","AutoRowHeight","Multi"],DataGridAp:["Direction","Wrap","Overflow","Grow","Shrink","ShowSelChexkbox","ShowSeq","Name","Collapsible","RowHeight","HeadHeight","ShowFlatPanel","AutoRowHeight","Multi"],AnchorControlAp:["Grow","Shrink","AlignSelf"],CardEntryFixRowAp:["Shrink","Grow","AlignSelf","AlignContent","AlignItems","JustifyContent","Direction","Wrap","Type"],EntryFieldContainerAp:["Name","Direction","Wrap","Overflow","Grow","Shrink","AlignItems","AlignSelf","AlignContent","JustifyContent"],CardEntryRowAp:["Height","Width"],FieldgroupPanelAp:["Grow","Shrink","Overflow","AlignSelf","Name"],ToolbarAp:["MoreButtonVisible"]},ct=function(e){var t=e[ee],n=(0,V.useMemo)((function(){return Xe(lt[t]||lt.UndefinedControl)}),[t]),r=(0,V.useContext)(pe).getKdesignerApi,a=function(e,t,n){return _()(e).call(e,(function(e,r){var a=qe()(r)?r:[r,r],i=(0,q.c)(a,2),o=i[0];return e[i[1]]=(0,U.getFieldProperty)(t,o,n),e}),{})}(n,e,(0,V.useMemo)((function(){return r()}),[]));return a.isDesigner=!0,a};function dt(e,t){var n=a()(e);if(o()){var r=o()(e);t&&(r=K()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function ut(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?u()(n=dt(Object(a),!0)).call(n,(function(t){(0,A.c)(e,t,a[t])})):f()?p()(e,f()(a)):u()(r=dt(Object(a))).call(r,(function(t){v()(e,t,c()(a,t))}))}return e}var st=function(e){var t={},n=e.Width,r=e.Height;return n&&(t.width=n),r&&(t.height=r),t},ft=function(e,t,n){var r;t&&u()(r=a()(t)).call(r,(function(r){var a=t[r],i=(null==n?void 0:n[r])||r;e[i]=a}))},gt=function(e,t,n){var r=(0,(0,V.useContext)(pe).getCommonUtil)(),a=r.fixColor,i=r.getImgFullPath,o=r.fileserver,l=e.Hidden,c=e.Invisible,d={fixColor:a,getImgFullPath:i,fileserver:o};if(l||c)return{display:"none"};var u=function(e,t){var n={},r=t.fixColor,a=t.getImgFullPath,i=t.fileserver,o=e.ForeColor,l=e.BackColor,c=e.FontSize,d=e.FontWeight,u=e.BackgroundImg,s=e.BKFull,f=e.BKRepeat;return o&&(n.color=r(o)),l&&(n.backgroundColor=r(l)),c&&12!==c&&(n.fontSize=c),d&&(n.fontWeight=d),u?n.backgroundImage="url(".concat(a(i,u),")"):delete n.backgroundImage,s?n.backgroundSize="100% 100%":delete n.backgroundSize,f?n.backgroundRepeat=f:delete n.backgroundRepeat,n}(e,d),s=function(e){var t={};return"center"===e.Align?t.alignItems="center":"right"===e.Align&&(t.alignItems="flex-end"),t}(e),f=st(e),g=function(e,t,n){var r=t.fixColor,a={},i=e.Radius,o=e.Style,l=e.FieldStyle;if(i&&(a.borderRadius=i),o){var c=o.Margin,d=o.Padding,u=o.Border;if(n&&1===l||ft(a,c,{Top:"marginTop",Left:"marginLeft",Bottom:"marginBottom",Right:"marginRight"}),ft(a,d,{Top:"paddingTop",Left:"paddingLeft",Bottom:"paddingBottom",Right:"paddingRight"}),u){var s=u.Top,f=u.Left,g=u.Right,p=u.Bottom;if(s){var m=s.split("_");m[m.length-1]=r(m[m.length-1]),a.borderTop=m.join(" ")}if(f){var v=f.split("_");v[v.length-1]=r(v[v.length-1]),a.borderLeft=v.join(" ")}if(g){var y=g.split("_");y[y.length-1]=r(y[y.length-1]),a.borderRight=y.join(" ")}if(p){var C=p.split("_");C[C.length-1]=r(C[C.length-1]),a.borderBottom=C.join(" ")}}}return a}(e,d,n),p=function(e,t){var n=e.ZIndex,r=t.originZIndex,a={};return(0,Ze.isUndefined)(r)||(a.zIndex=n),a}(e,t),m=function(e){var t=e.TextAlign,n={};return t&&"default"!==t&&(n.textAlign=t),n}(e);return ut(ut(ut(ut(ut(ut({},u),s),f),g),p),m)},pt=n(71252),mt=n.n(pt),vt=function(e){var t,n=(0,V.useContext)(U.DataFactoryContext).metaApi,r=e[ee],a=e.Inherit,i=n.getControlMeta(r).IsContainer,o=void 0!==i&&i;return{className:mt()((0,A.c)((0,A.c)({},"inherit-triangle",a),"container-component",o||N()(t=["HtmlAp"]).call(t,r)))}},yt=n(39832),Ct=n.n(yt),ht=null;function At(e,t,n){var r;!function(){ht&&document.body.removeChild(ht);ht=null}(),ht=document.createElement("div");var a=(0,U.getControlIconMap)(e),i=b()(r='\n    <i class="designericon designericon-'.concat(a,'" style="font-size:20px"></i>\n    ')).call(r,t,"\n  ");return ht.innerHTML=i,ht.style.cssText="position:absolute;top:-9999px;left:-9999px;opacity:1!important;",document.body.appendChild(ht),ht}var Et=function(e,t,n){e.dataTransfer&&e.dataTransfer.setDragImage&&(e.dataTransfer.dropEffect="move",e.dataTransfer.setDragImage(At(t,n),-20,-24))},xt="kdesigner-tree-node-drag-line-by-control",It="control",bt="",kt=function(e,t){(It=null==t?void 0:t.getViewActiveKey("left"))!==bt&&t&&(t.setViewActiveKey("left")(bt),bt="")},St=["\\"],Ft=function(e){if(!Q()(St).call(St,(function(t){return De()(e).call(e,t)>=0}))){var t=e.replace("/","\\/").replace("=","\\="),n=document.querySelector(".kdesigner-tree-node-item-id".concat(t," .kdesigner-tree-node-root"));if(n){var r=null==n?void 0:n.className,a=(0,j.c)(document.querySelectorAll(".".concat(xt)));(N()(r).call(r,xt)||0!==a.length&&a)&&u()(a).call(a,(function(e){e.className=e.className.replace(" ".concat(xt),"")}))}}},wt=function(e){var t=e||window.event;t.preventDefault(),t.stopPropagation(),t.returnValue=!1},Tt=["data-left-drag-style","data-right-drag-style","data-top-drag-style","data-bottom-drag-style",we,"data-default-drag-style"],Nt=function(e){u()(Tt).call(Tt,(function(t){return e.removeAttribute(t)}))},Mt=function(){Ue&&w()((function(){var e=document.querySelectorAll("[".concat(we,"]"));e.length&&u()(e).call(e,(function(e){return Nt(e)}))}),200)},Lt=function(e){var t,n=document.querySelectorAll("[".concat(Te,"=true]"));u()(n).call(n,(function(e){return e.removeAttribute(Te)}));var r=document.querySelector("[".concat(Ne,"]")),a=document.querySelector(b()(t="[".concat(Ae,'="')).call(t,e,'"]'));r?null==a||a.setAttribute(Te,"true"):null==a||a.removeAttribute(Te)},Pt=function(e,t){var n,r;Mt(),0!==(r=document.querySelectorAll(".".concat(xt))).length&&r&&u()(r).call(r,(function(e){e.className=e.className.replace(" ".concat(xt),"")}));var a=document.querySelector(b()(n="[".concat(Ae,"='")).call(n,t,"']"));null==a||a.removeAttribute(Fe)},Dt=function(e){var t=(0,V.useContext)(pe).getKdesignerApi,n=(0,V.useContext)(U.GlobalConfigContext).env,r=(0,V.useMemo)((function(){return t()}),[]),a=r.data,i=r.selection,o=r.meta,l=r.dataFactory,c=r.views,d=a.getRootId(),u=d===e[Z],s=i.getSelection,f=i.setSelect;(0,V.useEffect)((function(){var e=function(e){Pt(0,d)};return U.eventBus.on("drag-tree-node",Lt),document.body.addEventListener("dragend",e),function(){U.eventBus.off("drag-tree-node",Lt),document.body.removeEventListener("dragend",e)}}),[]);var g=(0,V.useCallback)((function(e){var t=n[U.CONTROL_DRAG_DATA].data,r=(void 0===t?{}:t).Id,i=a.findControl(e)[ee],c=o.getControlMeta(i).IsContainer,u=void 0!==c&&c?e:a.getParentControlId(e)||d,s=a.findControl(u)[ee];if(o.canAdd(r,s)){var g=l({type:r,parentId:u});a.addControl((0,U.createAddAction)(g)).then((function(e){var t=e[0].value;f(qe()(t)?[t[0][Z]]:[t[Z]])})),delete n[U.CONTROL_DRAG_DATA]}}),[n[U.CONTROL_DRAG_DATA]]),p=(0,V.useCallback)((function(e){var t;e.stopPropagation();var n=document.querySelector(b()(t="[".concat(Ae,"='")).call(t,d,"']")),r=s(),i=e.currentTarget,o=(i=$e(i)).dataset.controlId||null,l=[o];N()(r).call(r,o)&&(l=(0,j.c)(r)),null==n||n.setAttribute(Fe,Ct()(l));var c=a.findControl(o),u=c._Type_,f=c.Name;Et(e,u,f),U.eventBus.emit("drag-control-tab",o)}),[d]);return{onDragStart:p,onDragEnter:(0,V.useCallback)((function(e){var t;wt(e);var r=document.querySelector(b()(t="[".concat(Ae,"='")).call(t,d,"']")),a=n[U.CONTROL_DRAG_DATA];if(r&&(r.dataset.dragControlIds||a)){var i=e.currentTarget;i=$e(i),Nt(i)}}),[d,n[U.CONTROL_DRAG_DATA]]),onDragOver:(0,V.useCallback)((function(e){var t;wt(e);var r=document.querySelector(b()(t="[".concat(Ae,"='")).call(t,d,"']")),a=n[U.CONTROL_DRAG_DATA],i=null==r?void 0:r.dataset.dragControlIds;if(i||a){var o=e.currentTarget,l=(o=$e(o)).dataset.controlId||null;if(!l||null==i||!N()(i).call(i,l)){var c,u,s=function(e,t,n){var r=e.getBoundingClientRect(),a=r.x,i=r.y,o=a+r.width,l=i+r.height,c=(a+o)/2,d="right";return a<t&&t<o&&i<=n&&n<=i+8?d="top":a<t&&t<o&&l-8<=n&&n<l?d="bottom":a<=t&&t<=c&&i<n&&n<l?d="left":c<t&&t<o&&i<n&&n<l&&(d="right"),d}(o,e.clientX,e.clientY),f=o.dataset.dragDirection;if(s!==f)f&&(o.removeAttribute("data-".concat(f,"-drag-style")),o.removeAttribute(we)),null===(c=o)||void 0===c||c.setAttribute("data-".concat(s,"-drag-style"),"true"),null===(u=o)||void 0===u||u.setAttribute(we,s);U.eventBus.emit("drag-control_".concat(d),l)}}}),[d,n[U.CONTROL_DRAG_DATA]]),onDragLeave:(0,V.useCallback)((function(e){var t;wt(e);var r=document.querySelector(b()(t="[".concat(Ae,"='")).call(t,d,"']")),a=n[U.CONTROL_DRAG_DATA];if(r&&(r.dataset.dragControlIds||a)){var i=JSON.parse(r.dataset.dragControlIds||'""'),o=e.currentTarget,l=(o=$e(o)).dataset.controlId;i&&l&&N()(i).call(i,l)||(Nt(o),l&&Ft(l))}}),[n[U.CONTROL_DRAG_DATA]]),onDrop:(0,V.useCallback)((function(e){var t,r;e.stopPropagation();var o=document.querySelector(b()(t="[".concat(Ae,"='")).call(t,d,"']")),l=n[U.CONTROL_DRAG_DATA];if(o&&(o.dataset.dragControlIds||l)){var u=JSON.parse(o.dataset.dragControlIds||'""');null==o||o.removeAttribute(Fe);var s=e.currentTarget,f=(s=$e(s)).dataset.controlId||"",p=s.dataset.dragDirection||"left",m=!1;Nt(s),N()(r=["top","left"]).call(r,p)&&(m=!0),N()(u).call(u,f)?kt(0,c):(u?a.swapControl((0,U.createSwapAction)({origin:u,target:f,isPrev:m})).then((function(e){i.setSelect([u[0]])})):g(f),f&&w()((function(){kt(0,c),Ft(f)}),100),Mt())}}),[d,n[U.CONTROL_DRAG_DATA]]),onDragEnd:(0,V.useCallback)((function(e){var t;wt(e),Nt(e.currentTarget);var n=document.querySelector(b()(t="[".concat(Ae,"='")).call(t,d,"']"));null==n||n.removeAttribute(Fe),w()((function(){var t,n=(null===(t=e.currentTarget)||void 0===t||null===(t=t.dataset)||void 0===t?void 0:t.controlId)||"";n&&(kt(0,c),Ft(n))}),100)}),[d]),draggable:!u}};function Rt(e,t){var n=a()(e);if(o()){var r=o()(e);t&&(r=K()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bt(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?u()(n=Rt(Object(a),!0)).call(n,(function(t){(0,A.c)(e,t,a[t])})):f()?p()(e,f()(a)):u()(r=Rt(Object(a))).call(r,(function(t){v()(e,t,c()(a,t))}))}return e}var Gt=function(e,t){var n=(0,(0,(0,V.useContext)(pe).getCommonUtil)().getDefaultLang)()();return(null==e?void 0:e.getIn(b()(t).call(t,[n])))||(null==e?void 0:e.getIn(b()(t).call(t,["zh_CN"])))},_t=function(e){var t=(0,V.useContext)(pe).getKdesignerApi,n=e.originZIndex,r=e.Id,a=t(),i=a.data,o=a.meta,l=i.getRealControlType(e),c=(0,h.c)({},o.getDefaultData(l),e),d=Me(c),u=Le(),s=at(),f=it(),g=ct(c),p=gt(c,{originZIndex:n},!0);p=function(e,t,n){var r=(0,V.useContext)(ye).mulLangProperty;return e.width=e.width||Gt(r,[n,"Width"]),e.height=e.height||Gt(r,[n,"Height"]),void 0===e.width&&void 0!==t.Width&&(e.width=t.Width,delete t.Width),void 0===e.height&&void 0!==t.Height&&(e.height=t.Height,delete t.Height),e}(p,g,r);var m=vt(c),v=Dt(c);return Bt(Bt(Bt(Bt(Bt({},d),u),{},{onClick:s,onTwiceClick:f},g),{},{style:p},m),v)},Ot=(n(68756),["style"]),Kt=function(e){var t=e.field,n=(0,V.useContext)(me),r=n.getData,a=n.prefixCls,i=n.mergeCommonClassNames,o=n.getKdesignerApi,l=n.onRootPanelMount;(0,V.useEffect)((function(){l()}),[]);var c=r(),d=_t(t),u=d.style,s=(0,C.c)(d,Ot),f=ge(t,c,{}),g=Dt(t),p=g.onDragOver,m=g.onDragEnd,v=g.onDragLeave,y=g.onDrop,E=(0,U.useGetFieldProperty)(t,o()),x=mt()(s.className,"".concat(a,"-root-panel"),(0,A.c)({},"".concat(a,"-root-panel-isPC"),!0),i({Wrap:E("Wrap"),Direction:E("Direction"),AlignContent:E("AlignContent"),AlignItems:E("AlignItems"),JustifyContent:E("JustifyContent")}));return(0,h.c)(u,{overflow:E("Overflow")}),z().createElement("div",(0,h.c)({id:"ui-designer-root"},s,{className:x,onDragOver:p,onDragEnd:m,onDragLeave:v,onDrop:y,tabIndex:-1,style:u}),f)},Vt=function(e,t,n){var r,i=e;(t.length<=0&&(i=(0,h.c)(i,{minWidth:40,minHeight:40})),n)&&u()(r=a()(n)).call(r,(function(e){return i[e]&&(i[n[e]]=i[e])}));return i},zt=["field","controlProps","style"],Ut=["Collapsible","maximize","Maximize","CtlTips","onClick","Name","baseControlCollapsible","customStyle"],Ht=["Direction","Wrap","Overflow","Grow","Shrink","AlignSelf","AlignContent","AlignItems","JustifyContent"],Wt=["width","height","backgroundColor","color","fontSize","borderRadius","marginTop","marginLeft","marginRight","marginBottom","zIndex","textAlign","borderTop","borderLeft","borderRight","borderBottom","paddingTop","paddingLeft","paddingRight","paddingBottom","display"];function jt(e,t){var n=a()(e);if(o()){var r=o()(e);t&&(r=K()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function qt(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?u()(n=jt(Object(a),!0)).call(n,(function(t){(0,A.c)(e,t,a[t])})):f()?p()(e,f()(a)):u()(r=jt(Object(a))).call(r,(function(t){v()(e,t,c()(a,t))}))}return e}var Jt=function(e,t,n){var r=n.field,a=n.controlProps,i=n.style,o=(0,C.c)(n,zt),l=(0,V.useContext)(U.ConfigContext),c=l.getPrefixCls,d=l.prefixCls,u=(0,V.useContext)(pe),s=u.getBaseControlByType,f=(0,u.getCommonUtil)(),g=f.mergeCommonClassNames,p=f.defaultPropsUtil,m=f.customCtrlName,v=f.customProperties,y=p.getUIDefaultProps,E=c&&c(d,"collapse"),x=a.Collapsible,I=(a.maximize,a.Maximize),b=(a.CtlTips,a.onClick),k=a.Name,S=a.baseControlCollapsible,F=a.customStyle,w=(0,C.c)(a,Ut),T=(0,V.useState)(!1),N=(0,q.c)(T,2),M=N[0],L=N[1],P=(0,V.useCallback)((function(e){L(!M),b(e)}),[M]),D=mt()((0,A.c)((0,A.c)((0,A.c)({"kdfont kdfont-quanping":!0},"".concat(E,"-full-screen"),!0),"".concat(E,"-full-screen-slot"),I&&!x),"kd-hover-color",!0)),R=z().createElement("span",{className:D,title:(0,U.getLangMsg)("formd.advCon.key0001")}),B=I&&!x?R:null,G=function(n){if("[object Object]"===e.toString())return z().cloneElement(e,qt({children:t},n));var r="string"==typeof e&&s(e);return z().createElement(r,n,t)},_=G(qt(qt(qt({style:i,field:r,Name:k},w),o),{},{Collapsible:null!=S?S:x,Maximize:I,fieldSetSlot:B}));if(x){var O=w.Direction,K=w.Wrap,H=w.Overflow,j=w.Grow,J=w.Shrink,Q=w.AlignSelf,Z=w.AlignContent,X=w.AlignItems,Y=w.JustifyContent,$=((0,C.c)(w,Ht),y(m.ADV_CON,[v.HIDE_COLLAPSE_ICON])),ee=i.width,te=i.height,ne=i.backgroundColor,re=i.color,ae=i.fontSize,ie=i.borderRadius,oe=i.marginTop,le=i.marginLeft,ce=i.marginRight,de=i.marginBottom,ue=i.zIndex,se=i.textAlign,fe=i.borderTop,ge=i.borderLeft,me=i.borderRight,ve=i.borderBottom,ye=i.paddingTop,Ce=i.paddingLeft,he=i.paddingRight,Ae=i.paddingBottom,Ee=i.display,xe=(0,C.c)(i,Wt),Ie=qt(qt({width:ee,height:te,backgroundColor:ne,color:re,fontSize:ae,borderRadius:ie,marginTop:oe,marginLeft:le,marginRight:ce,marginBottom:de,zIndex:ue,textAlign:se,borderTop:fe,borderLeft:ge,borderRight:me,borderBottom:ve},{paddingTop:null!=ye?ye:y(m.ADV_CON,[v.PADDING_TOP]),paddingRight:null!=he?he:y(m.ADV_CON,[v.PADDING_RIGHT]),paddingBottom:null!=Ae?Ae:y(m.ADV_CON,[v.PADDING_BOTTOM]),paddingLeft:null!=Ce?Ce:y(m.ADV_CON,[v.PADDING_LEFT])}),{},{display:Ee}),be=mt()((0,A.c)({},"".concat(E,"-root"),!1===S),g({Direction:O,Wrap:K,Overflow:H,Grow:j,Shrink:J,AlignSelf:Q,AlignContent:Z,AlignItems:X,JustifyContent:Y})),ke=mt()((0,A.c)({},"".concat(E,"-bar"),!0)),Se=mt()((0,A.c)({},"".concat(E,"-title-panel"),!0)),Fe=mt()((0,A.c)((0,A.c)({},"".concat(E,"-content-panel"),!1===S),"".concat(E,"-hidden"),M)),we=mt()((0,A.c)({},"".concat(E,"-cb-collapseicon"),!0),"secondary-text-in-light"),Te=mt()(["".concat(E,"-cb-collapse")],"primary-text-in-light");_=z().createElement("div",(0,h.c)({},w,{className:be,style:Ie,onClick:b}),!1===S&&z().createElement("div",{className:ke},z().createElement("div",{className:Se},z().createElement("div",{className:Te,onClick:P},!$&&z().createElement(W.Icon,{prefix:"designericon",className:we,type:M?"shouqi3":"zhankai3"}),z().createElement("span",{className:"".concat(E,"-cb-title")},k))),I?R:null),z().createElement("div",{className:Fe},G(qt(qt({style:qt(qt({},xe),F),field:r,Name:k},o),{},{Direction:O,Wrap:K,Overflow:H,Grow:j,Shrink:J,AlignContent:Z,AlignItems:X,JustifyContent:Y,Collapsible:null!=S?S:x,Maximize:I}))))}return _},Qt=["style","className"],Zt=function(e){var t=e.field,n=(0,V.useContext)(pe),r=n.getKdesignerApi,a=n.getCommonUtil,i=(0,V.useMemo)((function(){return r()}),[]).data.getData(),o=(a().mergeCommonClassNames,_t(t)),l=o.style,c=o.className,d=(0,C.c)(o,Qt),u=ge(t,i),s=Vt(l,u),f=(t.Grow,t.Shrink,mt()((0,A.c)({},c,c)));return Jt("FlexPanel",u,{field:t,controlProps:d,style:s,className:f})},Xt=["ImageKey"],Yt=function(e){var t=e.field,n=_t(t),r=(0,V.useContext)(pe),a=r.getBaseControlByType,i=(0,r.getCommonUtil)(),o=i.getImgFullPath,l=i.fileserver,c=n.ImageKey,d=(0,C.c)(n,Xt);c&&(c=o(l,c));var u=a("Button");return z().createElement(u,(0,h.c)({field:t,ImageKey:c},d))},$t=n(48560),en=n.n($t),tn=function(e){var t=e[ee],n=e[oe],r=e.FieldTextAlign,a=e.ShowTitle,i={Grow:"TextField"===t&&!a&&"v"===n?0:1,theme:"v"===n?"default":"flat"},o={fontSize:e.FieldFontSize,color:e.FieldForeColor,backgroundColor:e.FieldBackColor};return"default"!==r&&(o=(0,h.c)(o,{textAlign:r})),-1!==De()(t).call(t,"Field")?{}:{inputStyle:o,inputProps:i}},nn=["field","items","Grow","showStyle","showType"],rn=function(e){e.field;var t=e.items,n=e.Grow,r=e.showStyle,a=e.showType,i=(0,C.c)(e,nn),o=(0,V.useContext)(pe),l=o.getBaseControlByType,c=(0,o.getCommonUtil)(),d=c.getImgFullPath,u=c.fileserver,s=l("Select"),f=x()(t).call(t,(function(e){var t={};return t.value=e.Value,t.alias=e.Caption,e.ImageKey&&(t.imgkey=d(u,e.ImageKey)),t}));return z().createElement(s,(0,h.c)({items:f,Grow:n,showStyle:r,showType:a},i))},an=84,on="CheckBoxGroupField",ln="RadioOptGroupField",cn="ComboField",dn="MulComboField";function un(e,t){if(!e)return e;var n=[ln,on,cn,dn],r=(0,A.c)((0,A.c)((0,A.c)((0,A.c)({},ln,{combo:cn,flat:ln}),on,{combo:dn,flat:on}),cn,{combo:cn,flat:ln}),dn,{combo:dn,flat:on});if(N()(n).call(n,e)){var a,i=t("OptionDisplayMode");return(null==r||null===(a=r[e])||void 0===a?void 0:a[i])||e}return e}var sn=["field","children","getEntityPropertyValue","fieldValueStyle"],fn=["field"],gn=["style"];function pn(e,t){var n=a()(e);if(o()){var r=o()(e);t&&(r=K()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function mn(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?u()(n=pn(Object(a),!0)).call(n,(function(t){(0,A.c)(e,t,a[t])})):f()?p()(e,f()(a)):u()(r=pn(Object(a))).call(r,(function(t){v()(e,t,c()(a,t))}))}return e}var vn=function(e){var t,n,r,a,i=(0,V.useContext)(pe),o=i.getBaseControlByType,l=(0,i.getCommonUtil)(),c=l.defaultPropsUtil,d=l.serverProperties,u=l.getTitleProps,s=l.getControlProps,f=l.layoutService,g=l.customProperties,p=c.getFieldValue,m=c.getFieldDefaultProps,v=o("FieldItem"),y=o("Attachment"),A=o("Picture"),E=o("Signature"),x=o("RichText"),I=e.field,b=e.children,k=e.getEntityPropertyValue,S=e.fieldValueStyle,F=(0,C.c)(e,sn),w=(I._Type_,I.FieldType),T=I.Name,M=I.LabelWidth,L=I.ShowTitle,P=I.LabelDirection,D=I.FieldStyle,R=I.TextAlign,B=I.FullLine,G=I.ShowStyle,_=I.StepperStyle,O=I.CtlTips,K=I.DisplayStyle,H=I.AutoWrap,W=I.FieldTextAlign,j=I.ComboShowType,J=(0,V.useState)({style:void 0,contentContainerStyle:void 0}),Q=(0,q.c)(J,2),Z=Q[0],X=Q[1],Y=(0,V.useRef)(null),$=un(w,k)||w;(0,V.useEffect)((function(){var t,n;if(Y.current){var r=p(e._Type_,ue,null!=P?P:"",""),a=2==p(e._Type_,de,null!=D?D:-1,-1)&&!N()(t=["RadioField","CheckBoxField","CheckBoxGroupField","RadioOptGroupField"]).call(t,e._Type_),i=f.getDesignerLayoutInfo({dom:Y.current,style:e.style,labelDirection:r,isAllBorder:a});null!==(n=e.layoutOption)&&void 0!==n&&n.isLastColumn&&i.style&&((i=(0,Ze.cloneDeep)(i)).style.marginRight="0px"),X(i)}}),[e.layoutOption,e._Type_,e.style,f]);var ee=k("MustInput");if(!b&&("PictureField"!==$||"IconField"!==$||"AttachmentField"!==$||"SignatureField"!==$||"RichTextField"!==$))return null;var te=e.style;delete te.textAlign,B&&(te.width="100%");var re,ae,ie=2==p($,de,null!=D?D:-1,-1)&&!N()(t=["RadioField","CheckBoxField","CheckBoxGroupField","RadioOptGroupField"]).call(t,$),oe=T,le=!1!==L,ce={width:M},fe=p($,ue,null!=P?P:"",""),ge=null!==(n="h"===fe?m($,g.HORIZONTAL_TITLE_ALIGN):p($,se,R,"default"))&&void 0!==n?n:p($,se,R,"default");if(N()(r=["PictureField","SignatureField"]).call(r,$)&&"h"===fe){var me,ve=null!==(me=m($,g.HORIZONTAL_FIELD_TITLE_WIDTH))&&void 0!==me?me:an;ce.width=void 0===ce.width||""===ce.width?ve:ce.width}if("CheckBoxField"===$&&("1"==G||"2"==G)||"RadioField"===$)le=!1,"RadioField"===$&&(re=D),"CheckBoxField"===$&&(ae=G);else{if("PictureField"===$)return z().createElement(A,(0,h.c)({isDesigner:!0,labelText:oe,labelStyle:ce,labelTextAlign:ge,showTitle:le,style:te,labelDirection:fe,fieldType:$},F,{field:I,Shrink:0,mustInput:ee}));if("SignatureField"===$)return z().createElement(E,(0,h.c)({isDesigner:!0,labelText:oe,labelStyle:ce,labelTextAlign:ge,showTitle:le,style:te,labelDirection:fe,fieldType:$},F,{field:I,Shrink:0,mustInput:ee}));if("RichTextField"===$){var ye,Ce=null==I||null===(ye=I.ToolbarItems)||void 0===ye?void 0:ye.toolbarItems;return z().createElement(x,(0,h.c)({isDesigner:!0,labelText:oe,labelStyle:ce,labelTextAlign:ge,showTitle:le,style:te,labelDirection:fe,fieldType:$,getPropertyValue:k,ctlTips:O,toolbarItems:Ce},F,{field:I,Shrink:0,mustInput:ee}))}}if("AttachmentField"===$){var he=F.field,Ae=(0,C.c)(F,fn);return z().createElement(y,(0,h.c)({style:te,isDesigner:!0,isField:!0,disabled:!0},Ae,{field:he,Name:T,showTitle:le,composedProps:{},labelDirection:fe,mustInput:ee}))}if(1==p($,d.FIELD_STYLE,D,-1)&&!N()(a=["RadioField"]).call(a,$)){"default"!==W&&(te.textAlign=W);var Ee=mt()({"common_text-omit":!0,"common_text-wrap":H},e.className),xe=u(I,ne,T),Ie=s(I,F.onTwiceClick),be=mn(mn({},xe),Ie);return z().createElement("div",(0,h.c)({},F,{className:Ee,style:te},be),z().createElement("span",null,T||(0,U.getLangMsg)("formd.field.key0003")))}var ke=function(e){var t=e.fieldType,n=e.stepperStyle,r=e.allBorder;return!en()(t,"RadioField")&&!en()(t,"RadioOptGroupField")&&(!(en()(t,"ComboField")&&1===j&&!r)&&(!en()(t,"CheckBoxField")&&((!en()(t,"StepperField")||1!==n&&2!==n)&&"CheckBoxGroupField"!==t)))}({fieldType:$,stepperStyle:_,allBorder:ie});return te=mn(mn({},te),Z.style),z().createElement(v,(0,h.c)({allBorder:ie,needBorder:ke,labelText:oe,mustInput:ee,labelStyle:ce,labelTextAlign:ge,showTitle:le,labelDirection:fe,fieldType:$,radioStyle:re,checkboxStyle:ae},F,{style:te,field:I,CtlTips:O,isDesigner:!0,displayType:K,fieldValueStyle:S,getField:function(e){Y.current=e},contentContainerStyle:Z.contentContainerStyle,layoutOption:e.layoutOption}),b)},yn=function(e){var t=(0,V.useContext)(me).fixColor,n=(0,V.useContext)(pe),r=n.getBaseControlByType,a=n.getModel,i=n.getLanguage,o=n.getCommonUtil,l=n.getKdesignerApi,c=r("Text"),d=r("Number"),u=r("MulLangText"),s=r("BaseData"),f=r("LargeText"),g=r("TextArea"),p=(r("Text"),r("AdminDivisionAp")),m=r("CityAp"),v=r("DatePicker"),y=r("Time"),E=r("DatePicker"),x=r("DateRangeField"),I=r("TimeRangeField"),k=r("CheckBox"),S=r("Radio"),F=r("Stepper"),w=r("CheckBoxGroupAp"),T=r("RadioOptGroupAp"),M=e.field,L=e.layoutOption,P=_t(M,{fixColor:t}),D=P.style,R=(0,C.c)(P,gn),B=tn(M),G=B.inputStyle,O=void 0===G?{}:G,K=B.inputProps,U=void 0===K?{}:K,H=M.Id,W=M.FieldId;(D=mn(mn({},O),D)).width&&(D.minWidth=0),D.height&&(D.minHeight=0);var j,q,J=a(),Q=(j=H,function(e){return J.getPropertyValue(j,e)}),Z=(q=W,function(e){return J.getEntityPropertyValue(q,e)}),X={},Y=["_Type_","ShowStyle","MobStepperStyle","StepperPattern","DefValue","Group","MustInput","BackgroundImgKey","FieldStyle",oe],$=["EditStyle","EditingMode","BasedataBtnIcon","DisplayStyle"];return z().createElement(vn,(0,h.c)({style:D},R,{field:(0,h.c)({},_()(Y).call(Y,(function(e,t){return e[t]=Z(t),e}),{}),M),inputProps:U,getEntityPropertyValue:Z,fieldValueStyle:X,layoutOption:L}),function(e){e.ShowTitle,e._Type_;var t,n,r=e.FieldType,a=e.FieldId,C=e.LabelDirection,M=e.FieldFontSize,L=e.FieldForeColor,P=e.FieldBackColor,R=e.FieldTextAlign,B=e.EditStyle,G=(e.EditingMode,e.FieldStyle),_=e.BasedataBtnIcon,O=e.DisplayStyle,K=e.Mask,V=Z("EmptyText"),U=(Z("DefValue"),un(r,Z)||r),H={placeholder:V,theme:"v"===C?"default":"flat"},W=M;12===W&&(W=void 0);var j={fontSize:W||D.fontSize,color:L||D.color,backgroundColor:P||D.backgroundColor};P&&(X.backgroundColor=P),"default"!==R&&(j.textAlign=R);i(),Z("EditingMode");var q,Y=Z("DefValue"),$=o(),ee=$.propNames,te=($.serverProperties,$.defaultPropsUtil),ne=$.customCtrlName,re=$.customProperties,ae=(ee.D_LABEL_DIRECTION,ee.D_FIELD_STYLE),ie=(ee.LABEL_DIRECTION,ee.FIELD_STYLE),oe=(ee.TEXT_ALIGN,te.getFieldValue),le=te.getFieldDefaultProps;switch(U){case"TimeField":q=z().createElement(y,(0,h.c)({style:j,inputStyle:j,readOnly:!0},H));break;case"TimeRangeField":q=z().createElement(I,(0,h.c)({style:j,inputStyle:j,readOnly:!0},H));break;case"DateField":var ce=Q("Mask");return z().createElement(E,(0,h.c)({type:"date",style:j,mask:ce,readOnly:!0},H));case"DateRangeField":var de=Q("Mask");return z().createElement(x,(0,h.c)({type:"date",style:j,mask:de,readOnly:!0},H));case"DateTimeField":case"CreateDateField":case"ModifyDateField":var ue=Q("Mask");return z().createElement(v,(0,h.c)({type:"datetime",style:j,mask:ue,readOnly:!0},H));case"CheckBoxField":var se;H.text=Q("Name"),H.styleType=Z("ShowStyle"),H.foreColor=Q("ForeColor");var fe=null===(se=st(e))||void 0===se?void 0:se.width;return z().createElement(k,(0,h.c)({fieldWidth:fe,style:j,value:Y,readOnly:!0},H));case"ComboField":case"MulComboField":case"NameSegComboField":var ge=Q("ComboShowStyle"),pe=Q("ComboShowType"),me=Z("Items"),ve=[];return me&&(ve=me),z().createElement(rn,(0,h.c)({items:ve,style:j,multiple:"MulComboField"===U,showStyle:ge,showType:pe},H,{field:e}));case"BillNoField":case"TextField":case"NameSegTextField":case"I18nNameField":case"ItemClassTypeField":case"ItemClassField":2===G&&(j.paddingLeft=9,j.paddingRight=9),j.paddingRight=20,q=z().createElement(c,(0,h.c)({field:e,style:j},H,{isDesigner:!0}));break;case"BasedataField":case"MulBasedataField":case"AssistantField":case"OrgField":case"MaterielField":case"CurrencyField":case"UnitField":case"UserField":case"NameSegBasedataField":H.displayType=O,H.fontClass=_,H.placeholder=Z("EmptyText"),q=z().createElement(s,(0,h.c)({onClick:function(e){return e},entityId:U,isDesigner:!0,inputStyle:j},H));break;case"AdminDivisionField":q=z().createElement(p,(0,h.c)({style:j},H));break;case"CityField":q=z().createElement(m,(0,h.c)({style:j},H));break;case"DateTimeField":case"CreateDateField":case"ModifyDateField":q=z().createElement(v,(0,h.c)({type:"datetime",style:j,mask:K,readOnly:!0},H));break;case"DecimalField":case"IntegerField":case"AmountField":case"PriceField":case"QtyField":q=z().createElement(d,(0,h.c)({field:e,style:j,readOnly:!0,isDesigner:!0},H));break;case"MuliLangTextField":q=z().createElement(u,(0,h.c)({inputStyle:j,isDesigner:!0},H));break;case"RadioField":var ye,Ce=Z("Group");H.isDesigner=!0;var he=0;if(Ce){var Ae=l().data.findControlByCondition((function(e){return e.FieldId===Ce}));he=Ae&&Ae[0]?J.getPropertyValue(Ae[0].Id,ae):Q(ae)}else he=Q(ae);he=oe(U,ie,he,-1),H.text=Q("Name");var Ee=null===(ye=st(e))||void 0===ye?void 0:ye.width;return z().createElement(S,(0,h.c)({fieldId:a,fieldWidth:Ee,style:j},H,{fieldStyle:he}));case"RadioGroupField":return null;case"LargeTextField":q=z().createElement(f,(0,h.c)({inputStyle:j,isDesigner:!0},H));break;case"TextAreaField":q=z().createElement(g,(0,h.c)({style:j,isDesigner:!0},H));break;case"StepperField":return H.stepperStyle=Z("StepperStyle")||0,z().createElement(F,(0,h.c)({style:j,fieldStyle:D&&{width:D.width,height:D.height},isDesigner:!0,readOnly:!0},H));case"PictureField":case"SignatureField":case"RichTextField":return z().createElement("div",null);case"CheckBoxGroupField":var xe=Z("Items"),Ie=Q("ComboFlatStyle"),be=Q("ComboFlatLayout");return z().createElement(w,(0,h.c)({flatStyle:+Ie,flatLayout:+be,items:xe||[],style:j},H));case"RadioOptGroupField":var ke=Z("Items"),Se=Q("ComboFlatStyle"),Fe=Q("ComboFlatLayout");return z().createElement(T,(0,h.c)({flatStyle:Se,flatLayout:Fe,items:ke||[],style:j},H));default:q=z().createElement(c,(0,h.c)({field:e,style:j},H,{isDesigner:!0}))}if(N()(t=["TextAreaField","TextField"]).call(t,U)&&N()(n=[1,2]).call(n,B)){var we=[],Te=Z("TextBtnIcon")||"kdfont kdfont-zidingyi",Ne=2==(null!=G?G:le(ne.FIELD,[re.FIELD_STYLE]))&&"RadioField"!==U&&"CheckBoxField"!==U,Me=mt()((0,A.c)((0,A.c)({"edit-btn-default":!0},Te,!0),"all-border",Ne)),Le=z().createElement("div",{className:Me,key:"edit-btn"});return we=b()(we).call(we,Le,z().cloneElement(q,{key:"input"}))}if("ItemClassTypeField"===U||"ItemClassField"===U){var Pe=[],De=mt()({"edit-btn-default":!0,kdfont:!0,"kdfont-xiala":"ItemClassTypeField"===U,"kdfont-f":"ItemClassField"===U}),Re=z().createElement("div",{className:De,key:"icon-btn"});return Pe=b()(Pe).call(Pe,Re,z().cloneElement(q,{key:"input"}))}return q}((0,h.c)({},_()($).call($,(function(e,t){return e[t]=Z(t),e}),{}),M)))},Cn=["className","onTwiceClick"];function hn(e,t){var n=a()(e);if(o()){var r=o()(e);t&&(r=K()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function An(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?u()(n=hn(Object(a),!0)).call(n,(function(t){(0,A.c)(e,t,a[t])})):f()?p()(e,f()(a)):u()(r=hn(Object(a))).call(r,(function(t){v()(e,t,c()(a,t))}))}return e}var En=function(e){var t,n=e.field,r=(0,(0,V.useContext)(pe).getCommonUtil)(),a=r.mergeCommonClassNames,i=r.getTitleProps,o=r.getControlProps,l=_t(n),c=l.className,d=l.onTwiceClick,u=(0,C.c)(l,Cn),s=n._Type_,f=n.Id,g=u.Name,p=u.Grow,m=u.Shrink,v=u.Direction,y=u.Wrap,A=u.AlignItems,E=u.AlignSelf,x=u.JustifyContent,I=u.AlignContent,b=g||f,k=i(n,"Name",b),S=o(n,d),F=An(An({},k),S),w=mt()(["undefined-control-root","text-omit",c,{bgimg:N()(t=["CardPictureListColumnAp","CardAvatarListColumnAp"]).call(t,s)},a({Grow:p,Shrink:m,Direction:v,Wrap:y,AlignItems:A,AlignSelf:E,JustifyContent:x,AlignContent:I})]);return z().createElement("div",(0,h.c)({},u,F,{className:w}),b)},xn=["style","className","extName"];function In(e,t){var n=a()(e);if(o()){var r=o()(e);t&&(r=K()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function bn(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?u()(n=In(Object(a),!0)).call(n,(function(t){(0,A.c)(e,t,a[t])})):f()?p()(e,f()(a)):u()(r=In(Object(a))).call(r,(function(t){v()(e,t,c()(a,t))}))}return e}var kn=function(e){var t=e.field,n=(0,V.useContext)(pe),r=n.getKdesignerApi,a=n.getCommonUtil,i=((0,V.useMemo)((function(){return r()}),[]).data,a().mergeCommonClassNames),o=_t(t),l=o.style,c=o.className,d=o.extName,u=(0,C.c)(o,xn),s=Vt(l,[]),f=t.Grow,g=t.Shrink,p=t.ShowTitle,m=t.LabelDirection,v=!!p,y=mt()((0,A.c)({},c,c),i({Grow:f,Shrink:g}));return Jt("Attachment",[],{field:t,controlProps:bn(bn({},u),{},{baseControlCollapsible:!1}),style:s,className:y,disabled:!0,isDesigner:!0,showTitle:v,extName:d,labelDirection:m})},Sn=function(e){var t=e.field,n=(0,V.useContext)(me).fixColor,r=_t(t,{fixColor:n}),a=r.style,i=void 0===a?{}:a,o=i.Grow,l=i.Shrink,c=i.AlignSelf,d=(0,(0,V.useContext)(pe).getBaseControlByType)("HyperLink");return z().createElement(d,(0,h.c)({field:t},r,{Grow:o,Shrink:l,AlignSelf:c}))},Fn=["ImageKey"],wn=function(e){var t=e.field,n=(0,V.useContext)(pe),r=n.getBaseControlByType,a=(0,n.getCommonUtil)(),i=a.getImgFullPath,o=a.fileserver,l=_t(t),c=r("Image"),d=l.ImageKey,u=(0,C.c)(l,Fn);return d&&(d=i(o,d)),z().createElement(c,(0,h.c)({field:t,url:d},u))},Tn=function(e){var t=e.field,n=_t(t),r=(0,(0,V.useContext)(pe).getBaseControlByType)("ImageList");return z().createElement(r,(0,h.c)({field:t},n))},Nn=function(e){var t=e.field,n=_t(t),r=(0,(0,V.useContext)(pe).getBaseControlByType)("BarChart");return z().createElement(r,(0,h.c)({field:t},n,{inDesigner:!0}))},Mn=function(e){var t=e.field,n=_t(t),r=(0,(0,V.useContext)(pe).getBaseControlByType)("CustomChart");return z().createElement(r,(0,h.c)({field:t},n,{inDesigner:!0}))},Ln=function(e){var t=e.field,n=_t(t),r=(0,(0,V.useContext)(pe).getBaseControlByType)("GaugeChart");return z().createElement(r,(0,h.c)({field:t},n,{inDesigner:!0}))},Pn=function(e){var t=e.field,n=_t(t),r=(0,(0,V.useContext)(pe).getBaseControlByType)("HistogramChart");return z().createElement(r,(0,h.c)({field:t},n,{inDesigner:!0}))},Dn=function(e){var t=e.field,n=_t(t),r=(0,(0,V.useContext)(pe).getBaseControlByType)("PieChart");return z().createElement(r,(0,h.c)({field:t},n,{inDesigner:!0}))},Rn=function(e){var t=e.field,n=_t(t),r=(0,(0,V.useContext)(pe).getBaseControlByType)("PointLineChart");return z().createElement(r,(0,h.c)({field:t},n,{inDesigner:!0}))},Bn=function(e){var t=e.field,n=_t(t),r=(0,(0,V.useContext)(pe).getBaseControlByType)("RadarChart");return z().createElement(r,(0,h.c)({field:t},n,{inDesigner:!0}))},Gn=function(e){var t=e.field,n=(0,V.useContext)(me),r=n.fixColor,a=n.getKdesignerApi,i=_t(t,{fixColor:r,kdesignerApi:a()}),o=(0,(0,V.useContext)(pe).getBaseControlByType)("Label"),l=i.style;return z().createElement(o,(0,h.c)({field:t,fontColor:l.color},i))},_n=n(97552),On=n.n(_n),Kn=function(e){var t=e.field,n=(0,V.useContext)(me),r=n.fixColor,a=n.getKdesignerApi,i=n.mergeCommonClassNames,o=_t(t,{fixColor:r,kdesignerApi:a()}),l=(0,(0,V.useContext)(pe).getBaseControlByType)("BaseQRCode"),c=(0,U.useGetFieldProperty)(t,a()),d=c("AlignSelf"),u=o.style,s=o.className,f=u.width?On()(u.width):128,g=mt()(s,i({AlignSelf:d})),p=c("ShowBarCodeValue");return z().createElement("div",(0,h.c)({},o,{className:g}),z().createElement(l,(0,h.c)({field:t,value:"123",size:f,displayValue:!1},o)),p?z().createElement("div",{style:{fontSize:"inherit",fontFamily:"inherit",textAlign:"center"}},"123"):"")},Vn=function(e){var t=e.field,n=(0,V.useContext)(me),r=n.fixColor,a=n.getKdesignerApi,i=_t(t,{fixColor:r,kdesignerApi:a()}),o=(0,(0,V.useContext)(pe).getBaseControlByType)("ProgressBar"),l=(0,U.useGetFieldProperty)(t,a())("ProgressBarStyle")||0;return z().createElement(o,(0,h.c)({field:t,percent:60,ProgressBarStyle:l},i))},zn=function(e){var t,n=e.field,r=(0,V.useContext)(me),a=r.fixColor,i=r.getKdesignerApi,o=_t(n,{fixColor:a,kdesignerApi:i()}),l=(0,V.useContext)(pe),c=l.getBaseControlByType,d=(0,l.getCommonUtil)().getImgFullPath,u=c("Carousel"),s=o.style,f=n.CarouselImg,g=s.height;delete s.height;var p={display:"block",width:"100%",height:"100%",borderRadius:null==s?void 0:s.borderRadius};f&&f.length&&(t=x()(f).call(f,(function(e,t){var n=d("",e.Url,!1,!1);return z().createElement("img",{key:e.Id,style:p,src:n,alt:e.Name})})));var m=(0,U.useGetFieldProperty)(n,i()),v=m("CarouselStopOnHover"),y=m("CarouselDotPosition"),C=m("CarouselSlideBtn");return z().createElement(u,(0,h.c)({field:n,height:g},o,{hoverStop:v,showArrow:C,dotPosition:y}),t)},Un=n(71928);var Hn=function(e){var t=e.field,n=(0,V.useContext)(me),r=n.fixColor,a=n.getKdesignerApi,i=_t(t,{fixColor:r,kdesignerApi:a()}),o=(0,(0,V.useContext)(pe).getBaseControlByType)("TransferContainer"),l=i.style,c=(0,U.useGetFieldProperty)(t,a()),d=c("Key"),u=c("TransferContainerStyle");u=On()(u);var s,f,g=(0,Un.fromJS)(c("TransferContainerSetting"))||(0,Un.Map)(),p=g.get("title")||(0,Un.List)(),m=g.get("size")||(0,Un.Map)(),v=(s=(0,U.getLangMsg)("formd.transferContainer.key0002"),f={data:{source:{caption:(0,U.getLangMsg)("formd.transferContainer.key0001"),data:[{id:"1",text:"".concat(s,"1"),disabled:!0},{id:"2",text:"".concat(s,"2")},{id:"3",text:"".concat(s,"3"),disabled:!0},{id:"4",text:"".concat(s,"4")},{id:"5",text:"".concat(s,"5")},{id:"6",text:"".concat(s,"6")},{id:"7",text:"".concat(s,"7")},{id:"8",text:"".concat(s,"8"),disabled:!0},{id:"9",text:"".concat(s,"9")}]},target:{caption:(0,U.getLangMsg)("formd.transferContainer.key0003"),selected:["5","6"]}},selected:["5","6","8"]},(0,Un.fromJS)(f)).get("data");return 1===u&&(v=function(){var e=(0,U.getLangMsg)("formd.transferContainer.key0004"),t={data:{source:{caption:(0,U.getLangMsg)("formd.transferContainer.key0001"),data:[{children:[{children:[{children:[],parentid:"0111",id:"0111",text:"".concat(e,"11"),disabled:!0},{children:[],parentid:"0111",id:"0112",text:"".concat(e,"12")}],parentid:"01",id:"011",text:"".concat(e,"1"),disabled:!0,isOpened:!0},{children:[{children:[],parentid:"012",id:"0121",text:"".concat(e,"21")},{children:[],parentid:"012",id:"0122",text:"".concat(e,"22"),disabled:!0},{children:[],parentid:"012",id:"0123",text:"".concat(e,"23")}],parentid:"01",id:"012",text:"".concat(e,"2")},{children:[],parentid:"01",id:"013",text:"".concat(e,"3"),disabled:!0},{children:[],parentid:"01",id:"014",text:"".concat(e,"4")},{children:[],parentid:"01",id:"015",text:"".concat(e,"5")}],parentid:0,id:"01",text:(0,U.getLangMsg)("formd.transferContainer.key0005"),isOpened:!0}]},target:{caption:(0,U.getLangMsg)("formd.transferContainer.key0003"),selected:["5","6"]}},selected:["5","6","8"]};return(0,Un.fromJS)(t)}().get("data")),z().createElement(o,(0,h.c)({field:t,id:d,style:l,dataSource:v,selected:(0,Un.List)(),titles:p,listStyle:m,showModel:u},i))},Wn=function(e){var t,n,r=e.field,a=(0,V.useContext)(me),i=a.fixColor,o=a.getKdesignerApi,l=_t(r,{fixColor:i,kdesignerApi:o()}),c=(0,(0,V.useContext)(pe).getBaseControlByType)("Timeline"),d=(0,U.useGetFieldProperty)(r,o()),u=d("TitleLine")||0,s=d("DescriptionLine")||0,f=d("AxisPosition")||"left",g=d("TimelineOptions")||(t=(0,U.getLangMsg)("formd.timeline.key0001"),n=(0,U.getLangMsg)("formd.timeline.key0002"),[{Label:{Title:"06-01",Description:"09:00"},Content:{Title:t,Description:n}},{Label:{Title:"06-02",Description:"09:00"},Content:{Title:t,Description:n}}]),p=d("LayoutType")||"leftandright",m=(0,Un.fromJS)(x()(g).call(g,(function(e){var t=e.Label,n=e.Content;return{label:{title:t.Title,description:t.Description},content:{title:n.Title,description:n.Description}}})));return z().createElement(c,(0,h.c)({defaultStatus:"process",data:m,titleLine:u,descriptionLine:s,mode:f,layoutType:p},l))},jn=function(e){var t=e.field,n=(0,V.useContext)(me),r=n.fixColor,a=n.getKdesignerApi,i=_t(t,{fixColor:r,kdesignerApi:a()}),o=(0,(0,V.useContext)(pe).getBaseControlByType)("FontIcon"),l=i.style,c=(0,U.useGetFieldProperty)(t,a()),d=c("fontClass")||"kdfont kdfont-tianjia",u=c("Grow"),s=c("Shrink"),f=c("AlignSelf"),g=c("Clickable"),p=c("NeedHoverClass"),m=c("HoverClass");return z().createElement(o,(0,h.c)({field:t,fontClass:d,clickable:g,needHoverClass:!1!==p,hoverClass:m,style:l,Grow:u,Shrink:s,AlignSelf:f},i))},qn=n(7224),Jn=n.n(qn),Qn=function(e){var t=e.field,n=(0,V.useContext)(me),r=n.fixColor,a=n.getKdesignerApi,i=n.mergeCommonClassNames,o=_t(t,{fixColor:r,kdesignerApi:a()}),l=(0,(0,V.useContext)(pe).getBaseControlByType)("Rate"),c=o.style,d=(0,U.useGetFieldProperty)(t,a()),u=d("Grow"),s=d("Shrink"),f=d("AlignSelf"),g=d("ShowTextType"),p=d("TotalScore")||5,m=d("IconSize")||18,v=d("RateType")||"normal",y=d("StarsNum")||5,C=(0,Un.List)([(0,U.getLangMsg)("formd.rate.key0001"),(0,U.getLangMsg)("formd.rate.key0002"),(0,U.getLangMsg)("formd.rate.key0003"),(0,U.getLangMsg)("formd.rate.key0004"),(0,U.getLangMsg)("formd.rate.key0005")]),A=3/Jn()(y)*Jn()(p),E=Jn()(A),x=mt()(null==o?void 0:o.className,i({Grow:u,Shrink:s,AlignSelf:f}));return z().createElement(l,(0,h.c)({field:t,score:E,count:"normal"===v?y:5,style:"normal"===v?{fontSize:m}:{},emotionalIconText:C,starsNum:y,iconSize:m,totalScore:p,showTextType:On()(g),rateType:v,onlyActiveCurrent:"emotional"===v,defaultValue:3,rateStyle:c,disabled:!0},o,{rateClassName:x,texts:C}))};var Zn=function(e){var t,n,r,a,i=e.field,o=(0,V.useContext)(me),l=o.fixColor,c=o.getKdesignerApi,d=_t(i,{fixColor:l,kdesignerApi:c()}),u=(0,(0,V.useContext)(pe).getBaseControlByType)("TreeMenu");return z().createElement(u,(0,h.c)({field:i,childNodes:(t=(0,U.getLangMsg)("formd.treeMenu.key0001"),n=(0,U.getLangMsg)("formd.treeMenu.key0002"),r=(0,U.getLangMsg)("formd.treeMenu.key0003"),a=(0,U.getLangMsg)("formd.treeMenu.key0004"),(0,Un.fromJS)([{children:[{children:[{children:[{children:[],parentid:"0111",id:"01111",text:"".concat(a,"1")}],parentid:"011",id:"0111",text:"".concat(r,"1")},{children:[],parentid:"011",id:"0112",text:"".concat(r,"2")},{children:[],parentid:"011",id:"0113",text:"".concat(r,"3")},{children:[],parentid:"011",id:"0114",text:"".concat(r,"4")},{children:[],parentid:"011",id:"0115",text:"".concat(r,"5")}],parentid:"01",id:"011",text:"".concat(n,"1")},{children:[{children:[],parentid:"012",id:"0121",text:"".concat(r,"1")},{children:[],parentid:"012",id:"0122",text:"".concat(r,"2")},{children:[],parentid:"012",id:"0123",text:"".concat(r,"3")}],parentid:"01",id:"012",text:"".concat(n,"2")},{children:[{children:[],parentid:"018",id:"0181",text:"".concat(r,"1")},{children:[],parentid:"018",id:"0182",text:"".concat(r,"2")}],parentid:"01",id:"018",text:"".concat(n,"8")},{children:[{children:[],parentid:"012",id:"0131",text:"".concat(r,"1")},{children:[],parentid:"012",id:"0132",text:"".concat(r,"2")},{children:[],parentid:"012",id:"0133",text:"".concat(r,"3")},{children:[],parentid:"012",id:"0134",text:"".concat(r,"4")},{children:[],parentid:"012",id:"0135",text:"".concat(r,"5")},{children:[],parentid:"012",id:"0136",text:"".concat(r,"6")},{children:[],parentid:"012",id:"0137",text:"".concat(r,"7")},{children:[],parentid:"012",id:"0138",text:"".concat(r,"8")}],parentid:"01",id:"013",text:"".concat(n,"3")},{children:[{children:[],parentid:"012",id:"0141",text:"".concat(r,"1")},{children:[],parentid:"012",id:"0142",text:"".concat(r,"2")},{children:[],parentid:"012",id:"0143",text:"".concat(r,"3")},{children:[],parentid:"012",id:"0144",text:"".concat(r,"4")},{children:[],parentid:"012",id:"0145",text:"".concat(r,"5")}],parentid:"01",id:"014",text:"".concat(n,"4")},{children:[{children:[],parentid:"012",id:"0151",text:"".concat(r,"1")},{children:[],parentid:"012",id:"0152",text:"".concat(r,"2")}],parentid:"01",id:"015",text:"".concat(n,"5")},{children:[{children:[],parentid:"012",id:"0161",text:"".concat(r,"1")},{children:[],parentid:"012",id:"0162",text:"".concat(r,"2")}],parentid:"01",id:"016",text:"".concat(n,"6")},{children:[{children:[],parentid:"012",id:"0171",text:"".concat(r,"1")},{children:[],parentid:"012",id:"0172",text:"".concat(r,"2")}],parentid:"01",id:"017",text:"".concat(n,"7")}],parentid:"0",id:"01",text:"".concat(t,"1")},{children:[{children:[{children:[],parentid:"021",id:"0211",text:"".concat(r,"1")}],parentid:"02",id:"021",text:"".concat(n,"1")},{children:[],parentid:"02",id:"021",text:"".concat(n,"2")},{children:[],parentid:"02",id:"021",text:"".concat(n,"3")}],parentid:"0",id:"02",text:"".concat(t,"2")},{children:[],parentid:"0",id:"03",text:"".concat(t,"3")},{children:[{parentid:"04",id:"041",text:"".concat(n,"1")},{parentid:"04",id:"042",text:"".concat(n,"2")},{parentid:"04",id:"043",text:"".concat(n,"3")},{parentid:"04",id:"044",text:"".concat(n,"4")},{parentid:"04",id:"045",text:"".concat(n,"5")}],parentid:"0",id:"04",text:"".concat(t,"4")}]))},d))},Xn=function(e,t){var n;return b()(n="".concat(e,"-")).call(n,t)},Yn=function(e){return function(t){var n;return b()(n="".concat(e,"-")).call(n,t)}};var $n=function(e){var t,n=e.field,r=(0,V.useContext)(me),a=r.fixColor,i=r.getKdesignerApi,o=r.mergeCommonClassNames,l=r.prefixCls,c=_t(n,{fixColor:a,kdesignerApi:i()}),d=(0,V.useContext)(pe).getBaseControlByType,u=(0,U.useGetFieldProperty)(n,i()),s=d("TreeNew"),f=d("Tree"),g=u("Grow"),p=u("Shrink"),m=u("AlignSelf"),v=u("BigDataRender"),y=c.className,C=c.onClick,E=Yn(Xn(l,"tree-view")),x=mt()((0,A.c)((0,A.c)({},E("container"),!0),y,y),o({Grow:g,Shrink:p,AlignSelf:m})),I=mt()((0,A.c)({},y,y),o({Grow:g,Shrink:p,AlignSelf:m})),b=null,k=(t=(0,U.getLangMsg)("formd.transferContainer.key0004"),[{children:[{children:[{children:[],parentid:"0111",id:"0111",text:"".concat(t,"11")},{children:[],parentid:"0111",id:"0112",text:"".concat(t,"12")}],parentid:"01",id:"011",text:"".concat(t,"1"),isOpened:!0},{children:[{children:[],parentid:"012",id:"0121",text:"".concat(t,"21")},{children:[],parentid:"012",id:"0122",text:"".concat(t,"22")},{children:[],parentid:"012",id:"0123",text:"".concat(t,"23")}],parentid:"01",id:"012",text:"".concat(t,"2")},{children:[],parentid:"01",id:"013",text:"".concat(t,"3")},{children:[],parentid:"01",id:"014",text:"".concat(t,"4")},{children:[],parentid:"01",id:"015",text:"".concat(t,"5")}],parentid:0,id:"01",text:(0,U.getLangMsg)("formd.transferContainer.key0005"),isOpened:!0}]);return b=v?z().createElement(s,{isMulti:u("Multi"),rootView:u("RootVisible"),field:n,className:I,childNodes:(0,Un.fromJS)(k)}):z().createElement(f,{isMulti:u("Multi"),rootView:u("RootVisible"),field:n,className:I,childNodes:k}),z().createElement("div",(0,h.c)({},c,{className:x}),b,z().createElement("div",{className:E("mask"),onClick:C}))},er=function(e,t){var n=(0,V.useContext)(pe).getKdesignerApi,r=(0,V.useMemo)((function(){return n()}),[]),a=r.dataFactory,i=r.data,o=r.selection,l=a({type:t,parentId:e});return function(){i.addControl((0,U.createAddAction)(l)).then((function(e){var t=e[0].value;o.setSelect(qe()(t)?[t[0][Z]]:[t[Z]])}))}},tr=["MoreButtonVisible","style"];function nr(e,t){var n=a()(e);if(o()){var r=o()(e);t&&(r=K()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function rr(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?u()(n=nr(Object(a),!0)).call(n,(function(t){(0,A.c)(e,t,a[t])})):f()?p()(e,f()(a)):u()(r=nr(Object(a))).call(r,(function(t){v()(e,t,c()(a,t))}))}return e}var ar=function(e){var t,n=e.field,r=(0,V.useContext)(pe),a=r.getBaseControlByType,i=r.getKdesignerApi,o=r.getCommonUtil,l=(0,V.useMemo)((function(){return i()}),[]).data,c=l.getData(),d=n.ShowTitle,u=_t(n),s=u.MoreButtonVisible,f=u.style,g=(0,C.c)(u,tr),p=o(),m=p.customCtrlName,v=p.customProperties,y=p.defaultPropsUtil,A=ge(n,c),E=a("Toolbar"),x=y.getUIDefaultProps(m.ADV_CON,[v.TOOLBAR_STYLE]),I=er(n[Z],1===x?"AdvConBarItemAp":"BarItemAp"),b=!!d,k=(0,V.useCallback)((function(){I()}),[I]),F=rr(rr({},f),{},{flexShrink:0});delete F.alignItems;var w,T=!!(w=l.getSubControls(n[Z])).length&&void 0!==S()(w).call(w,(function(e){var t=(0,Un.Map)(e);return t.get("ForeColor")||t.get("BackColor")||t.getIn([le,ce,"Top"])||t.getIn([le,ce,"Right"])||t.getIn([le,ce,"Bottom"])||t.getIn([le,ce,"Left"])})),N=y.getUIDefaultProps(m.TOOLBARITEM,v.BARITEM_SHOW_TYPE);return void 0!==N&&0!==Number(N)&&T&&(N=0),z().createElement(E,(0,h.c)({field:n,showTitle:b,showMore:s,onAddItem:k,style:F,"data-baritem-show-type":null!==(t=N)&&void 0!==t?t:0,hasSetColor:T},g),A)},ir=["Name","OperationKey","OperationStyle","DropdownItems","style"],or=function(e){var t=e.field,n=_t(t),r=(0,V.useContext)(pe),a=r.getBaseControlByType,i=(0,r.getCommonUtil)(),o=i.getCurrentTheme,l=i.isWhiteColorBg,c=i.customCtrlName,d=i.defaultPropsUtil,s=i.customProperties,f=a("ToolbarItem"),g=t.Id,p=n.Name,m=n.OperationKey,v=n.OperationStyle,y=n.DropdownItems,A=n.style,E=(0,C.c)(n,ir),x=[];null==y||u()(y).call(y,(function(e){var t={};t.key=e.Key,t.opk=e.OperationKey,t.title=e.Title,t.background=e.Background,x.push(t)}));var I=A.borderTop||A.borderBottom||A.borderLeft||A.borderRight,b=A.color===o(),k=l(A.backgroundColor),S=A.backgroundColor&&A.backgroundColor!==o(),F=d.getUIDefaultProps(c.TOOLBARITEM,s.BARITEM_SHOW_TYPE);return z().createElement(f,(0,h.c)({barItemShowType:null!=F?F:0,field:t,title:p,key:g,id:g,operationKey:m,operationStyle:v,dropDownItems:x,hasBorder:I,isThemeColor:b,isWhiteBg:k,hasNonThemeBg:S,style:A},E))},lr=["Maximize","Collapsible","style","className","Grow","Shrink","AlignSelf","AlignContent","AlignItems","JustifyContent","onClick","CtlTips","Name"];function cr(e,t){var n=a()(e);if(o()){var r=o()(e);t&&(r=K()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function dr(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?u()(n=cr(Object(a),!0)).call(n,(function(t){(0,A.c)(e,t,a[t])})):f()?p()(e,f()(a)):u()(r=cr(Object(a))).call(r,(function(t){v()(e,t,c()(a,t))}))}return e}var ur=function(e){var t=e.field,n=(0,V.useContext)(pe),r=n.getKdesignerApi,a=n.getCommonUtil,i=(0,V.useMemo)((function(){return r()}),[]),o=a(),l=o.customCtrlName,c=o.customProperties,d=o.defaultPropsUtil,u=o.mergeCommonClassNames,s=i.data,f=s.getData(),g=_t(t),p=(0,V.useState)(!0),m=(0,q.c)(p,2),v=m[0],y=m[1],E=(0,V.useCallback)((function(){y(!v)}),[t.Collapsible,v]),I=(0,V.useCallback)((function(e){return null==e?void 0:Q()(e).call(e,(function(e){var t;return(null===(t=s.getSubControls(e[Z]))||void 0===t?void 0:t.length)>0}))}),[f]),b=s.getSubControls(t[Z])||[],k=S()(b).call(b,(function(e){return"AdvConToolbarAp"===e[ee]})),F=g.Maximize,w=g.Collapsible,T=g.style,N=g.className,M=g.Grow,L=g.Shrink,P=g.AlignSelf,D=g.AlignContent,R=g.AlignItems,B=g.JustifyContent,G=g.onClick,_=g.CtlTips,O=g.Name,H=(0,C.c)(g,lr),W="adv-con-",j=d.getUIDefaultProps(l.ADV_CON,[c.FOLDED_FONT_CLASS]),J=1===d.getUIDefaultProps(l.ADV_CON,[c.TOOLBAR_STYLE]),X=j||"kdfont kdfont-right",Y=mt()("".concat(W,"collapse-icon"),(0,A.c)({},"".concat(W,"expand-icon"),!v),"secondary-text-in-light",[X]),$="".concat(W,"title"),te=mt()("".concat(W,"panel"),(0,A.c)({},"".concat(W,"mt0"),J)),ne={},re="".concat(W,"summary-panel"),ae=mt()("".concat(W,"toolbar"),(0,A.c)((0,A.c)({},"".concat(W,"ap-type1"),J),"".concat(W,"full-screen-right-padding"),F));w||(Y="".concat(W,"hide"),$=mt()("".concat(W,"title"),"".concat(W,"cur")),ne.marginLeft=0,T.paddingRight=T.paddingRight?T.paddingRight:0,T.paddingLeft=T.paddingLeft?T.paddingLeft:0),!v&&w&&(ae=te="".concat(W,"hide"));var ie,oe,le=mt()((0,A.c)((0,A.c)({"adv-con":!0},"".concat(W,"customized"),j),N,N),u({Grow:M,Shrink:L,AlignSelf:P,AlignContent:D,AlignItems:R,JustifyContent:B})),ce=d.getUIDefaultProps(l.ADV_CON,[c.HIDE_COLLAPSE_ICON]),de=K()(b).call(b,(function(e){return"AdvConSummaryPanelAp"===e[ee]}));de&&(ie=x()(de).call(de,(function(e){var t=Mi(e);return z().cloneElement(t,dr({key:e[Z],onClick:G},H))}))),k&&(oe=Mi(k));var ue,se=K()(b).call(b,(function(e){return"AdvConChildPanelAp"===e[ee]})),fe=I(se);se&&(ue=x()(se).call(se,(function(e){var t=Mi(e);return z().cloneElement(t,dr({key:e[Z],onClick:G},H))})));var ge,me,ve=mt()((0,A.c)((0,A.c)((0,A.c)({},te,!0),"".concat(W,"panel-style"),!0),"".concat(W,"panel-with-min-hei"),!fe)),ye=mt()(["".concat(W,"collapse")],"primary-text-in-light"),Ce=d.getUIDefaultProps(l.ADV_CON,[c.TITLE_FONT_SIZE]),he=d.getUIDefaultProps(l.ADV_CON,[c.SUB_TITLE_FONT_SIZE]);void 0!==Ce&&(ge={fontSize:Ce}),void 0!==he&&(me={fontSize:he});var Ae=z().createElement("div",{className:ae},oe?z().cloneElement(oe,dr({onClick:G},H)):null),Ee=mt()("kdfont kdfont-tishixinxi",(0,A.c)({},"".concat(W,"design-tips"),!0)),xe=mt()((0,A.c)((0,A.c)({"kdfont kdfont-quanping":!0},"".concat(W,"full-screen"),!0),"isDesigner",!0)),Ie={paddingTop:d.getUIDefaultProps(l.ADV_CON,[c.PADDING_TOP]),paddingRight:d.getUIDefaultProps(l.ADV_CON,[c.PADDING_RIGHT]),paddingBottom:d.getUIDefaultProps(l.ADV_CON,[c.PADDING_BOTTOM]),paddingLeft:d.getUIDefaultProps(l.ADV_CON,[c.PADDING_LEFT])};return z().createElement("div",(0,h.c)({className:le,style:dr(dr({},T),Ie),onClick:G},H),z().createElement("div",{className:"".concat(W,"bar")},z().createElement("div",{className:"".concat(W,"box")},z().createElement("div",{className:ye,onClick:E},!ce&&z().createElement("i",{className:Y}),z().createElement("span",{className:$,style:ge},O)),F?z().createElement("span",{className:xe,title:(0,U.getLangMsg)("formd.advCon.key0001")}):null,_&&z().createElement("i",{className:Ee}),z().createElement("div",{className:re,style:me},ie)),!J&&Ae),J&&Ae,z().createElement("div",{className:ve,style:ne},ue))},sr=["style","className"],fr=function(e){var t=e.field,n=(0,V.useContext)(pe).getKdesignerApi,r=(0,V.useMemo)((function(){return n()}),[]).data.getData(),a=_t(t),i=a.style,o=a.className,l=(0,C.c)(a,sr),c=ge(t,r),d=Vt(i,c);return Jt("FlexPanel",c,{field:t,controlProps:l,style:d,className:mt()(o,"adv-con-summary-panel-ap"),draggable:!1})},gr=["style"],pr=function(e){var t=e.field,n=(0,V.useContext)(pe).getKdesignerApi,r=(0,V.useMemo)((function(){return n()}),[]).data.getData(),a=_t(t),i=a.style,o=(0,C.c)(a,gr),l=ge(t,r),c=Vt(i,l);c.justifyContent="flex-end";var d=er(t[Z],"AdvConBarItemAp"),u=(0,V.useCallback)((function(){d()}),[d]);return Jt("AdvConToolbar",l,{field:t,controlProps:o,style:c,onAddItem:u})},mr=function(e){var t=e.field,n=_t(t),r=(0,(0,V.useContext)(pe).getBaseControlByType)("AdvConToolbarItem");return z().createElement(r,(0,h.c)({field:t},n))},vr=["style"],yr=function(e){var t=e.field,n=(0,V.useContext)(pe).getKdesignerApi,r=(0,V.useMemo)((function(){return n()}),[]).data.getData(),a=_t(t),i=a.style,o=(0,C.c)(a,vr),l=ge(t,r),c=Vt(i,l,{width:"min-width"});return Jt("FlexPanel",l,{field:t,controlProps:o,style:c,draggable:!1})},Cr=["style","Top"],hr={left:0,top:0,width:0},Ar=function(e){var t,n=e.field,r=(0,V.useState)(!1)[1],a=(0,V.useState)(76),i=(0,q.c)(a,2),o=i[0],l=i[1],c=(0,V.useState)(!1),d=(0,q.c)(c,2),u=d[0],s=d[1],f=(0,V.useState)(hr),g=(0,q.c)(f,2),p=g[0],m=g[1],v=(0,V.useContext)(pe),y=v.getBaseControlByType,A=v.getKdesignerApi,E=(0,v.getCommonUtil)().addResizeObserve,x=(0,V.useMemo)((function(){return A()}),[]).data,I=x.getData(),k=document.querySelector(b()(t="[".concat(Ae,'="')).call(t,n[Z],'"]')),S=_t(n),F=S.style,w=S.Top,T=(0,C.c)(S,Cr),N=ge(n,I),M=Vt(F,N),L=(0,V.useCallback)((function(){if(!u){var e,t=x.getRootId(),n=document.querySelector(b()(e="[".concat(Ae,'="')).call(e,t,'"]'));if(n){var r=n.getBoundingClientRect();m(r),window.requestAnimationFrame(L)}}}),[u]);(0,V.useEffect)((function(){r(!0)}),[]),(0,V.useEffect)((function(){L();var e=null;return k&&(e=E(k,(function(e){var t=null==e?void 0:e.width;t&&l(t)}))),function(){s(!0),e&&(e.removeResizeObserve(),e=null)}}),[k,L]);var P=y("FloatMenu"),D=On()(n.Align||0),R=p.top,B=p.left,G=p.right,_=p.bottom,O=document.documentElement.clientHeight;return R+=On()(w,10),1===D?(M.left=B,M.top=R):2===D?M.bottom=O-_:(M.left=G-o,M.top=R),z().createElement(P,(0,h.c)({field:n,style:M},T),N)},Er=function(e){var t=e.field,n=(0,V.useContext)(pe),r=n.getBaseControlByType,a=n.getKdesignerApi,i=(0,V.useMemo)((function(){return a()}),[]).data.getData(),o=_t(t),l=ge(t,i),c=r("FloatMenuPanel");return z().createElement(c,(0,h.c)({field:t},o),l)},xr=["Name"],Ir=function(e){var t=e.field,n=_t(t),r=(0,(0,V.useContext)(pe).getBaseControlByType)("FloatMenuItem"),a=n.Name,i=(0,C.c)(n,xr);return z().createElement(r,(0,h.c)({field:t,text:a},i))},br=["field","className"],kr=["Name","HomeTab","className"],Sr=function(e){var t=e.field,n=e.className,r=(0,C.c)(e,br),a=t[Z],i=(0,V.useContext)(pe),o=i.getBaseControlByType,l=i.getKdesignerApi,c=(0,V.useMemo)((function(){return l()}),[]).data.getData(),d=_t(t),u=d.Name,s=d.HomeTab,f=d.className,g=(0,C.c)(d,kr),p=ge(t,c),m=o("TabPanel"),v=mt()("kdesigner-form-kdesigner-tabpanel",(0,A.c)((0,A.c)({},f,!0),n,!0));return z().createElement(m,(0,h.c)({className:v,key:a,id:a,title:u,lazyLoaded:!1,homeTab:s},g,r),p)},Fr=["ShowDropdownIcon","HideNavigation","CanCloseAll","CanSlide","CanFull","TabDirection"],wr=function(e){var t=e.field,n=t[Z],r=(0,V.useState)(""),a=(0,q.c)(r,2),i=a[0],o=a[1],l=(0,V.useState)(0),c=(0,q.c)(l,2),d=c[0],u=c[1],s=_t(t),f=s.ShowDropdownIcon,g=s.HideNavigation,p=s.CanCloseAll,m=s.CanSlide,v=s.CanFull,y=s.TabDirection,A=(0,C.c)(s,Fr),E=s.TabStyle,I=(0,V.useContext)(pe),b=I.getBaseControlByType,k=I.getKdesignerApi,S=(0,V.useMemo)((function(){return k()}),[]),F=S.data,w=S.selection,T=b("Tabs"),N=er(n,"TabPageAp"),M=(0,V.useCallback)((function(e){o(e),w.setSelect([e])}),[]),L=F.getSubControls(n);(0,V.useEffect)((function(){var e=F.getSubControls(n);if(e.length>0){var t=e[0][Z];o(t),w.setSelect([t])}}),[n]),(0,V.useEffect)((function(){var e,t=L.length;t!==d&&u(t);var n=null===(e=L[t-1])||void 0===e?void 0:e[Z];d&&t&&n&&d<t&&o(n)}),[L,d]);var P=(0,V.useCallback)((function(e){var t=e.value[0];Q()(L).call(L,(function(e){return e[Z]===t}))&&o(t)}),[L]);return(0,V.useEffect)((function(){var e=w.addSelectChangeListener(P);return function(){e()}}),[P]),"vertical"===y&&(E=4),z().createElement(T,(0,h.c)({field:t,activeKey:i,showAddIcon:!0,handleTabClick:M,handleAddClick:N,hideNavigation:g,canCloseAll:p,canSlide:m,canFull:v,tabStyle:E,tabDirection:y,showMore:f},A),x()(L).call(L,(function(e){var t=e.Name,n=e.Id;return z().createElement(Sr,{title:t,field:e,key:n,id:n})})))},Tr=n(89843),Nr=n.n(Tr),Mr=["StatusIcon","StepsOptions","WizardStyle","Grow","Shrink","className","StepLength","style"],Lr=["TabId","WizardStyle","WizardType","TextDirection","style"],Pr=function(e){var t=e.field,n=(0,(0,V.useContext)(pe).getCommonUtil)().mergeCommonClassNames,r=_t(t),i=r.StatusIcon,o=r.StepsOptions,l=r.WizardStyle,c=r.Grow,d=r.Shrink,u=r.className,s=r.StepLength,f=r.style,g=(0,C.c)(r,Mr),p=(0,V.useMemo)((function(){var e,t=JSON.parse(i||"{}"),n={finish:z().createElement("i",{className:"kdfont kdfont-gouxuan",style:{fontSize:12}}),error:z().createElement("span",null,"!")};return null===(e=a()(t))||void 0===e||_()(e).call(e,(function(e,n){var r=t[n];return r&&(e[n]=z().createElement("i",{className:r,style:{fontSize:12}})),e}),n),n}),[i]),m=(null==o?void 0:o.length)>0?o:Nr()({length:s||4}),v=0===l,y=v?{minWidth:110*m.length}:{minHeight:110*m.length},E=mt()((0,A.c)({},u,u),n({Grow:c,Shrink:d}));return z().createElement(W.Steps,(0,h.c)({style:(0,h.c)(y,f),className:E,current:1,status:"error",icons:p,direction:v?"horizontal":"vertical"},g),x()(m).call(m,(function(e,t){return z().createElement(W.Step,{key:t,icons:p,title:(null==e?void 0:e.Title)||"",description:(null==e?void 0:e.Description)||""})})))},Dr=function(e){var t=e.field,n=(0,V.useContext)(pe),r=n.getBaseControlByType,a=n.getKdesignerApi,i=(0,V.useMemo)((function(){return a()}),[]),o=i.data,l=o.getData(),c=_t(t),d=ge(t,l),u=r("Wizard"),s=c.TabId,f=c.WizardStyle,g=c.WizardType,p=c.TextDirection,m=c.style,v=(0,C.c)(c,Lr),y=Vt(m,d),A=g||"tab",E=(0,V.useCallback)((function(){var e=[];if(s){var t=o.findControl(s);if(t&&"TabAp"===t[ee]){var n=o.getSubControls(s);e=x()(n).call(n,(function(e,t){var n=e.Id,r=e.Key,a=e.Name;return{tabId:s,id:n,key:r,title:a,isActive:0===t}}))}}return e}),[s]);return(0,V.useEffect)((function(){i.selection.setSelect(t[Z])}),[A,t[Z]]),"tab"===A?z().createElement(u,(0,h.c)({style:y,items:E(),wizardStyle:On()(f),tDir:p},v)):z().createElement(Pr,{field:t})},Rr=["TabId"],Br=function(e){var t=e.field,n=(0,V.useState)(!0),r=(0,q.c)(n,2),a=r[0],i=r[1],o=(0,V.useContext)(pe),l=o.getBaseControlByType,c=o.getKdesignerApi,d=(0,V.useMemo)((function(){return c()}),[]).data,u=_t(t),s=l("HomePageTab"),f=(0,V.useCallback)((function(){return i(!a)}),[a]);(0,V.useEffect)((function(){var e=d.addDataChangeListener(f);return function(){e()}}),[]);var g=u.TabId,p=(0,C.c)(u,Rr),m={},v=[];if(g&&(m=d.findControl(g))&&"TabAp"===m[ee]){var y=d.getSubControls(g);v=_()(y).call(y,(function(e,t,n){var r,a=t.Id,i=t.Key,o=t.Name;return b()(r=[]).call(r,(0,j.c)(e),[{tabId:g,id:a,key:i,title:o,isActive:0===n}])}),v)}return z().createElement(s,(0,h.c)({items:v},p))},Gr=["className","Grow","Shrink","Hidden","style"];function _r(e,t){var n=a()(e);if(o()){var r=o()(e);t&&(r=K()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Or(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?u()(n=_r(Object(a),!0)).call(n,(function(t){(0,A.c)(e,t,a[t])})):f()?p()(e,f()(a)):u()(r=_r(Object(a))).call(r,(function(t){v()(e,t,c()(a,t))}))}return e}var Kr=function(e){var t=e.field,n=(0,V.useContext)(pe),r=n.getBaseControlByType,a=n.getCommonUtil,i=_t(t),o=i.className,l=i.Grow,c=i.Shrink,d=i.Hidden,u=i.style,s=(0,C.c)(i,Gr),f=r("IFrame"),g=a().mergeCommonClassNames,p=Or(Or({},u),{},{position:"relative",display:"flex"}),m=mt()((0,A.c)({},o,o),g({Grow:l,Shrink:c}));return d?null:z().createElement("div",(0,h.c)({style:p,className:m},s),z().createElement("div",{style:{position:"absolute",marginLeft:0,marginTop:0,width:"100%",height:"100%",background:"#000",filter:"alpha(opacity=0)",opacity:0}}),z().createElement(f,{src:"",frameBorder:1,scrolling:"auto",allowtransparency:!0,isDesigner:!0}))},Vr=["Name"],zr=function(e){var t=e.field,n=_t(t),r=n.Name,a=(0,C.c)(n,Vr);return z().createElement("div",a,r)},Ur=["style"];function Hr(e,t){var n=a()(e);if(o()){var r=o()(e);t&&(r=K()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wr(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?u()(n=Hr(Object(a),!0)).call(n,(function(t){(0,A.c)(e,t,a[t])})):f()?p()(e,f()(a)):u()(r=Hr(Object(a))).call(r,(function(t){v()(e,t,c()(a,t))}))}return e}var jr=function(e){var t=e.field,n=(0,V.useContext)(pe).getBaseControlByType,r=_t(t),a=r.style,i=(0,C.c)(r,Ur),o=n("HtmlPanel"),l=Wr(Wr({},a),{},{minHeight:40,minWidth:40});return z().createElement(o,(0,h.c)({style:l},i))},qr=["style","className","Grow","Shrink"],Jr=["width","height","backgroundColor","color","fontSize","borderRadius","zIndex","textAlign","borderTop","borderLeft","borderRight","borderBottom"],Qr=function(e){var t=e.field,n=(0,V.useContext)(pe),r=n.getBaseControlByType,i=n.getCommonUtil,o=_t(t),l=o.style,c=o.className,d=o.Grow,s=o.Shrink,f=(0,C.c)(o,qr),g=i().mergeCommonClassNames,p=r("TaskNotice"),m=mt()((0,A.c)({},c,c),g({Grow:d,Shrink:s})),v=function(e,t){var n,r;return u()(n=K()(r=a()(e)).call(r,(function(n){return void 0===e[n]||N()(t).call(t,n)}))).call(n,(function(t){return delete e[t]})),e}(l,Jr);return z().createElement("div",(0,h.c)({className:m,style:v},f),z().createElement(p,{isDesigner:!0,taskList:(0,Un.List)()}))},Zr=function(e){return!(!e.Hidden&&!e.Invisible)},Xr=["SubEntryEntity"],Yr=["RadioGroupField","RadioField"],$r=["EntryEntity","TreeEntryEntity"],ea=function(e,t,n){var r,a,i=t.getParentControl(e.Id)||{},o=t.getData(),l={},c=[],d=[];if("EntryAp"===e[ee])null!=e&&e.EntryId&&(c=K()(r=o[ae]).call(r,(function(t){return t[re]===e.Id&&!N()(Xr).call(Xr,t[ee])&&!N()(Yr).call(Yr,t[ee])})),d=null===(a=n.entitymeta[ae])||void 0===a?void 0:K()(a).call(a,(function(t){return t[Z]===e.EntryId&&(l=t),t[re]===e.EntryId&&!N()(Xr).call(Xr,t[ee])&&!N()(Yr).call(Yr,t[ee])})));else if("FieldsetPanelAp"===e[ee]){var u,s;if("GridFlatPanelAp"===i[ee]);else c=K()(u=o[ae]).call(u,(function(t){return t[re]===e.Id&&!N()(Xr).call(Xr,t[ee])})),d=(null===(s=n.entitytree[ae])||void 0===s?void 0:K()(s).call(s,(function(e){return!e[re]&&!N()($r).call($r,e[X])&&!N()($r).call($r,e[ee])})))||[]}var f=[],g=(0,U.getLangMsg)("formd.field.key0001");if(d.length>0){var p=JSON.parse(Ct()(d));f=x()(p).call(p,(function(t){var n=S()(c).call(c,(function(n){return n.FieldId===t[Z]&&n.ParentId===e.Id}));return t.selected=!!n,t})),l[ne]&&(g=(0,U.getLangMsg)({key:"formd.field.key0002",variables:{name:l[ne]}}))}return{entityList:d,fieldList:c,entityFieldList:f,title:g}},ta=function(e){var t=(0,V.useContext)(pe),n=t.getKdesignerApi,r=t.getDataRef,a=(0,V.useMemo)((function(){return n()}),[]).data,i=r();return ea(e,a,i)},na=n(71536),ra=n.n(na),aa="refreshEntityData",ia=(n(39160),function(e){var t=e.triggerRef,n=e.onClose,r=e.entityList,a=e.fieldList,i=e.fieldParentId,o=e.title,l=void 0===o?(0,U.getLangMsg)("formd.field.key0001"):o,c=(0,V.useContext)(me).prefixCls,d=(0,(0,V.useContext)(pe).getKdesignerApi)(),s=d.data,f=d.selection,g="".concat(c,"-field-add-panel"),p="".concat(g,"-header"),m="".concat(g,"-body"),v="".concat(g,"-body-no-result"),y="".concat(g,"-body-no-result-container"),C=(0,V.useState)(r),h=(0,q.c)(C,2),E=h[0],I=h[1],k=(0,V.useState)(""),S=(0,q.c)(k,2),F=S[0],w=S[1],T=(0,V.useRef)(),M=(0,V.useRef)(!1);(0,V.useEffect)((function(){L(F)}),[r]),(0,V.useEffect)((function(){if(t.current&&T.current){var e,n,r=t.current.getBoundingClientRect(),a=(t.current.parentElement,null===(e=T.current)||void 0===e?void 0:e.getBoundingClientRect()),i=a.height,o=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,l=document.body.offsetWidth,c=r.left;l-r.left<a.width&&(c=l-a.width-4);var d=r.top+r.height+4;d+i>o&&(d=r.top>i+4?r.top-i-4:o-i-4),T.current.style.cssText+=b()(n=";left: ".concat(c,"px;top: ")).call(n,d,"px;")}}),[]),(0,V.useEffect)((function(){if(T.current){var e=function(e){var t;(null===(t=T.current)||void 0===t?void 0:t.contains(e.target))?M.current=!0:n(e)},t=function(e){var t;M.current?M.current=!1:null!==(t=T.current)&&void 0!==t&&t.contains(e.target)||e.target.getAttribute("data-control-id")===i||n(e)};return document.addEventListener("click",e),document.addEventListener("scroll",t,!0),function(){document.removeEventListener("click",e),document.removeEventListener("scroll",t,!0)}}}),[]),(0,U.useOnClickOutside)([T,t],(function(e){n(e)}));var L=function(e){if(e){var t=K()(r).call(r,(function(t){var n;return null===(n=t[ne])||void 0===n?void 0:N()(n).call(n,e)}));I(t||[])}else(0,Ze.isEqual)(E,r)||I(r)};return z().createElement("div",{ref:T,className:g},z().createElement("div",{className:p},z().createElement("p",{className:"".concat(p,"-left")},l),z().createElement("div",{className:"".concat(p,"-right")},z().createElement(W.Input,{className:"".concat(p,"-right-search"),prefix:z().createElement(W.Icon,{type:"search"}),borderType:"bordered",allowClear:!0,onChange:function(e){var t,n=null===(t=e.target)||void 0===t?void 0:t.value;w(n),L(n)},onPressEnter:L}),z().createElement("i",{className:"kdfont kdfont-guanbi8",onClick:n}))),z().createElement("div",{className:mt()(m,(0,A.c)({},v,0===E.length))},E.length>0?x()(E).call(E,(function(e){var t=e[ne]||e[te]||e[Z];return z().createElement("div",{key:e[Z],className:mt()("".concat(m,"-item"),{selected:e.selected}),onClick:function(){return function(e){if(null!=e&&e.selected){var t=[];u()(a).call(a,(function(n){n.ParentId===i&&n.FieldId===(null==e?void 0:e.Id)&&t.push(n.Id)})),s.deleteControl((0,U.createDeleteAction)(t))}else{var n=(0,U.createUUid)();s.addControl((0,U.createAddAction)({_Type_:(null==e?void 0:e._Type_)||(null==e?void 0:e.Type),FieldType:(null==e?void 0:e._Type_)||(null==e?void 0:e.Type),Name:null==e?void 0:e.Name,ParentId:i,Id:n,FieldId:null==e?void 0:e.Id,Key:null==e?void 0:e.Key},{isAddByEntity:!0})).then((function(){U.eventBus.emit("add-control-id",""),f.setSelect([n])}))}}(e)},title:t},z().createElement(W.Icon,{prefix:"designericon",type:(0,U.getControlIconMap)(e[ee]||e[X]),className:"".concat(m,"-item-icon")}),z().createElement("p",null,t),e.selected&&z().createElement("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAKKADAAQAAAABAAAAKAAAAAB65masAAACwElEQVRYCc3YQWgTQRQA0P9n18ZkUdKr9d7YSj1I0asIhVIQEYSe1ApS8JRW6DVRvFjR5KJSqFLvelUo6MWLl16UxPQq1rNgk5htk/H/6LRrTHY3k00ye9j5M5ndefkzOxsCYPCRSpezaKqPcVJCxkigwnHyjAN6ccYBW3FGAdvhjAF2whkB9MMNHRiEGyowDG5owLC4oQC7wQ0c2C1uoEAd3MCAuriBAHvB9R3YK66vwChwfQNGhesLMEocAwWfojp0cQgiAzEYQ8BcqyWyX9TaOAH3Sjknw7DxlfIJqMGOFxlJBrVxCC8VjlHo4rwXx3HPQF0ccd45pxK3FCi19GuG4geqrsqegLo4RPicHI1f2VrEPYZMLrtnQDZeSSltBVOl9hrUxQHiTmwEzn9aTXxjxNRK5WTNhY8g5ZhCeUutDLbDIeJjfhKFgPveAbwx9flpC3tO4c5l5XHXlW864fjarjPYDtdEEG571fnOMfXZoH8Frjfb/54Itw8o5kq5o5vcdHZNHtktVt8CyIvefq1xVxnsiKO7ij24rG7uJBO36ZsXVZ1LCbiocFwvf6msB+G4X2igH45vJBv4cPJObYLjrSxWLNu+ShtvhetIe912Pv6CYz5SS+W7lOFrf2r+51BTHIRTQ3DWnNHENAO5LZWu3gBoXCjlnYPpHk9Xb9K3ea6uCSoDMxgWxwNJgInyj8pTNWgpH9+YTyYWVJ33OgS5puphSt8MdoPzDoYoFhjnbeO9rt7Y/0B73TFvu19MS2S3I1AXxwPy2rNsa7rwKNZ8UIL2uk5IXjJtgb3gDgfDkhgRl2SdvPX6a5r+04efhYwQ8/8Bo8GFBPh1Q2xYaE3985AYgyM4Ze5ZMRcrHABNwtH7+r2VjC9zgptAY3A0rfRKfGIn47OFLLoMxGHjeCuhHfSrRNykNbfO08owdfwGj3tVsOJZgqAAAAAASUVORK5CYII="}))})):z().createElement("div",{className:y},z().createElement("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOAAAACACAMAAAAlB5WJAAAA3lBMVEUAAADi4uvX3ung5O3d3uTW3eXY3+jX2ufX4uvZ2ufY3unZ3+zX3ejZ4e7X3efV2+fZ2+bX3enW2+bj4/Pb3+rX1+nc4O/X3unN2ebW3efW3efW2+fW3ebW3OfX3Ofa4OrX3ejX3enW3ejn7/bi6fPk6PPj6fPj6fPj6PTi6PTj6PPi6PTj6fPj6fPj5/Ti6fTi6PTo6/fi6fPk6fXj6fXj6fTk6PTf5PHm6/Lj6fPh5fLj6fTo7PTk6PTj6fPj6vPi6PPk6fXL0Nzj6PTX3Oji6PPd4uzi6PPK0NvX3ejhvRgLAAAAR3RSTlMAGhgDBiQdDgwUISsxETkfJig0ChYIEC4JPDZDLT5AKUpHRSvDee7Gh1zqzK/CPfngIt2hUNKRTDPxZuRDnoBtmWbwqfe7V2k1DGkAAAV7SURBVHja7NjratswFAdwnTn74ox0sK20lC5the927DiJc08ayvi//xttMIZk110Tm8KR8e8NhM5d9Hq9Xq/X+wiWnDv7ZJGFaRpmi2TvzKUlOkMeYxevuPFRig6YHnK8KT9MhdGswMM7vMDcWB2ccpwhPw2EkYItzrQNhHlkggskptWbgZ/iIqlvVJxOI1wsMqigzl004M6FIRw05AgTWAUaKwzoiYMX1Apjf7NbDW17uNpt/DhErRf2pcaqfV/kTKhi4kS1L+T+hwVeWRcTqjUp1nilEKw5qHL9Mb1p7LtmVZo5qmaS/kvOUMW4W0xdlGVLetcyQ5nLtuMPIpR5ks4gPZRFXEupXw1Pm85iV8PUFyzJFCUOnc1BScpzt0hQEtAFApQkgqGg5v8a/yHDDXiwhW5GF5pBt+VXZ07QeTZdyPagOwlmrByaTNLFZAZNzm0mDaBbUgNL1lno1SRgqzT0BCtTaFxJjUgXGl4D2wEanxryoTkITnIo6zE1NF5DyQUjEpqCGiug4TSvHaGZUGMTaI6CjxhKRC1EUGLBhuVCcagFB4rLp9fLlhGqTHgm4RxKSK2ELI8zDpSYWolZ3tf2dV2+fa/fCy4SKBtqZcNyr19A2VErOygLwUUGZUWtrKBkgosQypBaGUIJBRcpFJtasaGkgovOP7DTIWrdXH/vbpG5/jp6+CPraJug+4e/Fp1s9J/uH//51cFRzRo+Ks/dG7a/jZ40DpTQ7sK6dHN7pwug2Xw2f+H9MfpZcreG8vxwZfzJ4st9RQJlsXwy/eh0dVtVQLNZjsw+G/5u50572obBAI4/ce6zbdKkB71gLVcBCWldx4CtgjLD9/9Cc7MKHEio7SZTFuUnS6Eub/5CCmpj2+h5PTI8b3slzjDlcbm8/q+/+B17H93iNze/J8PCvrrvIqvlOGNLCqEoQT/FClPuJ5NmIQ9f9GZv8mo41qEQlk/r+30y/CVO/gm9Ah6f6f7kHT+C/MmOn2aBKReHR7k/AFUGhyk6CuTNcFLNMO3XkZrzI2x9eJRq6Ob4wU/XAxlQJ5Vziym3X518FyGg0UEWlE+daQ1iamuQ7iemzXu5LiORDkYHIzISZdu5XArdlr2Lc45pj3kuBIqGo8+YsCdZGjOYFbaUK/SGn+qFsB+txWRe1GK8Tm8HG/bSbrJZFrSc0vR2QrCHrspqVcyC2I63kwN7kCxWzUURS5rNPgMXhIUNdlc3BSxKb/oMWiAs0jj8yH9bgewwkUFUW+Nxuv/GkLUPNNdhEoEohJCEJDLerrGM+ft9t/a8PD8kCrUOE0lxkaYhV+EP5HQhsjmL7ntOFjZse2APXpEXRDxHxsf3BpYBfNqcpAuB7XV0X1x49XS+mMlAqDavhgw8TG4rLIz0xdZ449IAgGaLmxoCB5ffKRa03va94L+mBgkUoCrALhJwJrhJ2X+g+raFqogGsNNFfBHcZk4K4z6qUBUSATNDiPtN7KAAUkj66ELbEsFxowkECR714K9x0nzcEBEAq24Y64ZdMuLrFv06ORcTPKzjCr83b2kCTGClCBI8buUJf3DSlPi18wiUFZmMjPcED8w5T/uVa8QPWMmCBI88WuCcCkFI8YdWzXBqodUmzLaZQCZekRdkUFcQUvyxY/JlemHD5ARlZUzTCzWXD5RWVqGk0yI9IkOnJeehvLILmZU7MLMQGRygzDIKp+0g6AbdGPmBjPiaOhdAqWUVmiEzKLesQldhVL5t6oyFkcymPBu7eAv1qgRmFpb7/lgXMhSuoDIyChFURnrhHVRHauEYKmRbWOJTLnIvPLahWt4VHn+HqjGm1e7bFFa7b1NY7b5NYbX7SOGK9J1U7f6ZgO4q9f+9VqvVarV/7g8kJJPsErZ8tQAAAABJRU5ErkJggg=="}),z().createElement("p",null,(0,U.getLangMsg)("formd.field.key0005")))))});function oa(e){var t=e.fieldList,n=void 0===t?[]:t,r=e.entityFieldList,a=void 0===r?[]:r,i=e.title,o=void 0===i?(0,U.getLangMsg)("formd.field.key0001"):i,l=e.fieldParent,c=e.className,d=(0,V.useContext)(me).prefixCls,u=(0,V.useContext)(pe),s=u.getKdesignerApi,f=u.invokeAction,g=u.getDataRef,p=(0,V.useMemo)((function(){return s()}),[]).data,m=(0,V.useState)(!1),v=(0,q.c)(m,2),y=v[0],C=v[1],h=(0,V.useState)({fieldList:n,entityFieldList:a,title:o}),A=(0,q.c)(h,2),E=A[0],x=A[1],I=(0,V.useRef)(null);(0,V.useEffect)((function(){x({fieldList:n,entityFieldList:a,title:o})}),[n,a,o]),(0,V.useEffect)((function(){var e=function(){var e=g(),t=ea(l,p,e),n=t.entityFieldList,r=t.fieldList,a=t.title;x({fieldList:r,entityFieldList:n,title:a})};return U.eventBus.on(aa,e),function(){U.eventBus.off(aa,e)}}),[]);return z().createElement(z().Fragment,null,z().createElement("div",{ref:I,className:mt()("".concat(d,"-field-add-container"),c),onClick:function(e){e.stopPropagation(),f(aa,[]),y||C(!0)}},z().createElement("i",{className:"kdfont kdfont-zengjia3"}),z().createElement("p",{className:"".concat(d,"-field-add-container-text")},(0,U.getLangMsg)("formd.field.key0004"))),y&&ra().createPortal(z().createElement(ia,{fieldParentId:null==l?void 0:l.Id,title:E.title,onClose:function(e){e.stopPropagation(),C(!1)},entityList:E.entityFieldList,fieldList:E.fieldList,triggerRef:I}),document.body))}var la=["style"];function ca(e,t){var n=a()(e);if(o()){var r=o()(e);t&&(r=K()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function da(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?u()(n=ca(Object(a),!0)).call(n,(function(t){(0,A.c)(e,t,a[t])})):f()?p()(e,f()(a)):u()(r=ca(Object(a))).call(r,(function(t){v()(e,t,c()(a,t))}))}return e}var ua=function(e){var t=e.field;if(Zr(t))return null;var n=(0,V.useContext)(pe),r=n.getKdesignerApi,a=n.isDataWithMetaMode,i=(0,V.useMemo)((function(){return r()}),[]).data,o=i.getData(),l=_t(t),c=l.style,d=(0,C.c)(l,la),u=ge(t,o),s=ta(t),f=s.entityFieldList,g=s.fieldList,p=s.entityList,m=s.title,v=S()(u).call(u,(function(e){var t;return"field-set-panel-add"===(null==e||null===(t=e.props)||void 0===t?void 0:t.className)})),y=Vt(c,u),h=(0,V.useCallback)((function(e){var t=e.field,n=e.itemHW,r=e.itemVW,a=e.fullWidthPercent,o=e.divstyle;if(!t)return{};var l,c=i.findControl(t[Z]),d=c[oe],u="".concat("h"===d?n:r,"px");c.FullLine&&(o={width:b()(l="calc(".concat(u," + ")).call(l,a,"%)")});return o}),[o]),A=(0,V.useCallback)((function(e){var t=e.field;return!!t&&i.findControl(t[Z]).FullLine}),[o]),E=(0,V.useCallback)((function(e){var t=e.childField;if(t){var n=i.findControl(t[Z]);return n&&"h"===n[oe]}}),[o]);return Jt("FieldsetPanel",u,{field:t,controlProps:da(da({},d),{},{baseControlCollapsible:!1,customStyle:{padding:0}}),style:y,getDivStyle:h,getIsFieldFullline:A,getIsLabelDirectionEqualH:E,addFieldControl:!a&&p.length>0&&!v?z().createElement(oa,{className:"field-set-panel-add",fieldParent:t,title:m,fieldList:g,entityFieldList:f}):null,isDesigner:!0})},sa=["className"],fa=function(e){var t=e.field,n=(0,V.useState)(0),r=(0,q.c)(n,2),a=r[0],i=r[1],o=(0,V.useContext)(pe),l=o.getBaseControlByType,c=o.getKdesignerApi,d=o.prefixCls,u=(0,V.useMemo)((function(){return c()}),[]),s=u.data.getData(),f=u.selection,g=_t(t),p=g.className,m=void 0===p?"":p,v=(0,C.c)(g,sa),y=l("BillList"),A=mt()([m,Yn(d)("bill-list")]),E=ge(t,s),I=function(e){var t,n=E[e],r=null==n||null===(t=n.props)||void 0===t||null===(t=t.field)||void 0===t?void 0:t.Id;f.setSelect([r])};return(0,V.useLayoutEffect)((function(){I(a)}),[a]),z().createElement(y,(0,h.c)({className:A},v,{rendPanel:function(){return E[a]},rendToolbar:function(){return x()(E).call(E,(function(e,t){var n=((null==e?void 0:e.props)||{}).field,r=n.Name||n.Id,o={padding:"0 10px",cursor:"pointer"};return t===a&&(o.color="blue"),z().createElement("span",{style:o,onClick:function(e){return function(e,t){e.stopPropagation(),t===a?I(t):i(t)}(e,t)}},r)}))}}))},ga=n(52360),pa=n.n(ga),ma=n(11872),va=n.n(ma);function ya(e,t){var n=a()(e);if(o()){var r=o()(e);t&&(r=K()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ca(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?u()(n=ya(Object(a),!0)).call(n,(function(t){(0,A.c)(e,t,a[t])})):f()?p()(e,f()(a)):u()(r=ya(Object(a))).call(r,(function(t){v()(e,t,c()(a,t))}))}return e}function ha(e){var t,n,r,a=e.containerId,i=e.addRef,o=(0,V.useRef)(),l=(0,V.useRef)(),c=(0,V.useContext)(U.GlobalConfigContext).showMessage,d=(0,V.useContext)(me),s=d.getData,f=d.getKdesignerApi,g=(0,V.useContext)(pe),p=g.getDataRef,m=g.getModel,v=g.canAddControlFromEntityNode,y=m(),C=s(),h=f(),A=(0,V.useState)(""),E=(0,q.c)(A,2),I=E[0],k=E[1],F=(0,V.useState)(),w=(0,q.c)(F,2),T=w[0],M=w[1],L=(0,V.useRef)([]),P=K()(t=C[ae]).call(t,(function(e){return e[re]===a})),D=(0,V.useMemo)((function(){var e,t;return K()(e=(null===(t=p())||void 0===t||null===(t=t.entitytree)||void 0===t?void 0:t.Items)||[]).call(e,(function(e){var t=e.Items;return!(null==t||!t.length)}))}),[]);(0,V.useEffect)((function(){if(i.current){var e,t=i.current.parentElement.getBoundingClientRect(),n=o.current.getBoundingClientRect(),r=n.width,a=n.height,l=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,c=document.body.offsetWidth,d=On()(String(c/2-r/2)),u=t.top+On()(t.height/2)+25;u+a>l&&t.top>a&&(u=t.top-a),o.current.style.cssText+=b()(e=";left: ".concat(d,"px;top: ")).call(e,u,"px;")}}),[]);var R=function(e,t,n){e.stopPropagation(),n?h.data.deleteControl((0,U.createDeleteAction)([n])):function(e){var t=e.Id,n=e.CreateType;if(S()(P).call(P,(function(e){return e.ListFieldId===t})))c((0,U.getLangMsg)("formd.entry.key0005"));else if(!v(n,t,a)){var r=(0,U.createUUid)(),i=y.getEntityTreeInfo(t);h.data.addControl((0,U.createAddAction)({_Type_:i.get("_TYPE_")||i.get("Type"),FieldType:i.get("_TYPE_")||i.get("Type"),Name:i.get("Name"),ParentId:a,Id:r,FieldId:t,ListFieldId:t})).then((function(){h.selection.setSelect([r])}))}}(t)};(0,V.useEffect)((function(){var t=function(t){for(var n=t.target;n;){if(n===o.current)return;n=n.parentNode}e.handleClick(t)};return document.addEventListener("click",t),function(){document.removeEventListener("click",t)}}),[o.current]);var B=(0,V.useRef)([]),G=function e(t,n){var r=[];u()(t).call(t,(function(t){var n=(null==t?void 0:t.Items)||[];if(n.length>0){B.current.push({tabName:t.Name,id:t.Id,panel:K()(n).call(n,(function(e){var t;return!(null!=e&&null!==(t=e.Items)&&void 0!==t&&t.length)}))});var a=K()(n).call(n,(function(e){var t;return!(null==e||null===(t=e.Items)||void 0===t||!t.length)}));a&&u()(a).call(a,(function(t){e((null==t?void 0:t.Items)||[],t)}))}else r.push(t)})),n&&B.current&&B.current.push({tabName:n.Name,id:n.Id,panel:r})};(0,V.useEffect)((function(){G(D)}),[]);var _=function e(t){var n=[];return u()(t).call(t,(function(t){var r=(null==t?void 0:t.Items)||[];if(r.length>0){var a,i=e(r);0===i.length&&(i=""),n.push({isOpened:!(L.current&&N()(a=L.current).call(a,t.Id)),id:t.Id,isSelected:t.Id===T,text:t.Name,children:i})}})),n},O=(0,V.useState)(_(D)),H=(0,q.c)(O,2),W=H[0],j=H[1],J=(0,V.useState)(B.current),Q=(0,q.c)(J,2),Z=Q[0],X=Q[1];(0,V.useEffect)((function(){var e,t=null==Z||null===(e=Z[0])||void 0===e?void 0:e.id;M(t)}),[null==Z||null===(n=Z[0])||void 0===n?void 0:n.id]);return(0,V.useEffect)((function(){j(_(D))}),[T]),(0,V.useEffect)((function(){var e,t=(e=B.current,I&&""!==pa()(I).call(I)?(k(pa()(I).call(I)),x()(e).call(e,(function(e){var t,n=K()(t=e.panel).call(t,(function(e){var t,n=e.Name;if(n)return!!(n&&De()(t=n.toLocaleLowerCase()).call(t,I.toLocaleLowerCase())>=0)||void 0}));return Ca(Ca({},e),{},{panel:n})}))):e);X(t)}),[null===(r=l.current)||void 0===r?void 0:r.value,I,T]),z().createElement("div",{className:"list-grid-add-panel",ref:o},z().createElement("div",{className:"header"},z().createElement("div",{className:"title"},z().createElement("span",null,(0,U.getLangMsg)("formd.entry.key0006"))),z().createElement("div",{className:"searchBox"},z().createElement("div",{className:"search"},z().createElement("span",{className:"kdfont kdfont-f searchIcon"}),z().createElement("div",{className:"searchInput"},z().createElement("input",{className:"input",onKeyUp:(0,Ze.debounce)((function(){var e=l.current&&l.current.value;k(e)}),300),placeholder:(0,U.getLangMsg)("formd.entry.key0007"),type:"text",ref:l}),I&&z().createElement("span",{onClick:function(e){k(""),l.current.value="",e.nativeEvent.stopImmediatePropagation()},className:"kdfont kdfont-qingkong searchIcon"}))),z().createElement("span",{onClick:e.handleClick,className:"kdfont kdfont-toubudaohang_guanbi close"}))),I?z().createElement(Aa,{data:Z,onClick:R,addedFields:P}):z().createElement("div",{className:"list"},z().createElement(Ea,{data:W,onClick:function(e){M(e.id)},handleExpand:function(e,t){var n,r,a=null===(n=L.current)||void 0===n?void 0:De()(n).call(n,e);-1!==a?va()(r=L.current).call(r,a,1):L.current.push(e);j(_(D))},active:T}),z().createElement(xa,{data:Z,onClick:R,active:T,addedFields:P})))}function Aa(e){var t=(0,V.useState)(),n=(0,q.c)(t,2),r=n[0],a=n[1],i=e.addedFields;return(0,V.useEffect)((function(){var t,n;a((t=e.data,n=[],u()(t).call(t,(function(t){var r=t.tabName,a=t.panel;if(null!=a&&a.length){var o=x()(a).call(a,(function(t){var n=t.Id,r=t.Name,a=K()(i).call(i,(function(e){return e.ListFieldId===n}));return z().createElement("div",{key:n+r,className:mt()("searchPanelItem",{selected:!(null==a||!a.length)}),onClick:function(n){var r;return e.onClick(n,t,null===(r=a[0])||void 0===r?void 0:r.Id)}},t.Name,z().createElement("span",{className:mt()("kdfont kdfont-gouxuan gouxuan",{hideGou:!a.length})}))}));n.push(z().createElement("li",{key:t.id,className:"searchPanelLi"},z().createElement("div",{className:"searchTitle"},r),o))}})),n))}),[e.data,i]),z().createElement("ul",{className:"searchPanel"},r)}function Ea(e){var t=e.handleExpand,n=(0,(0,V.useContext)(pe).getBaseControlByType)("Tree");return z().createElement("div",{className:"tabBar"},z().createElement(n,{Grow:1,Overflow:"auto",focusedNode:e.active,childNodes:e.data,handleClick:e.onClick,handleExpand:function(e,n,r,a){return t(e,a)}}))}function xa(e){var t=(0,V.useState)(),n=(0,q.c)(t,2),r=n[0],a=n[1],i=e.addedFields,o=function t(n){var r=[];return u()(n).call(n,(function(n,a){var o=n.panel;if(null!=o&&o.length){var l;l=x()(o).call(o,(function(n){var a,o=n.Id;if((null==n||null===(a=n.Items)||void 0===a?void 0:a.length)>0){var l=t(n.Items);r.push(l)}var c=K()(i).call(i,(function(e){return e.ListFieldId===o}));return z().createElement("div",{key:o,className:mt()("panelItem",{selected:!!c.length}),onClick:function(t){var r;return e.onClick(t,n,null===(r=c[0])||void 0===r?void 0:r.Id)}},n.Name,z().createElement("span",{className:mt()("kdfont kdfont-gouxuan gouxuan",{hideGou:!c.length})}))})),r.push(z().createElement("li",{key:n.id,className:mt()("panelLi",{hide:n.id!==e.active})},l))}})),r};return(0,V.useEffect)((function(){a(o(e.data))}),[e.data,e.active,i]),z().createElement("ul",{className:"tabPanel"},r)}var Ia=["containerId"];function ba(e){var t=e.containerId,n=(0,C.c)(e,Ia),r=(0,V.useState)(!1),a=(0,q.c)(r,2),i=a[0],o=a[1],l=(0,V.useContext)(pe).prefixCls,c=(0,V.useRef)(null),d=function(e){e.stopPropagation(),o(!i)};return z().createElement(z().Fragment,null,z().createElement("div",{className:Yn(l)("list-grid-add-col")},z().createElement("span",{onClick:d,ref:c,className:Yn(l)("list-grid-add-col-add")},z().createElement("span",{className:Yn(l)("list-grid-add-col-icon")},"+"),(0,U.getLangMsg)("formd.entry.key0004"))),i&&ra().createPortal(z().createElement(ha,(0,h.c)({containerId:t,handleClick:d,addRef:c},n)),document.body))}var ka=["className"],Sa=function(e){var t,n=e.field,r=(0,V.useRef)(null),i=n.Id,o=(0,V.useContext)(pe),l=o.getKdesignerApi,c=o.prefixCls,d=(0,V.useMemo)((function(){return l()}),[]),u=d.data,s=d.meta,f=u.getData(),g=_t(n),p=g.className,m=(0,C.c)(g,ka),v=(0,(0,V.useContext)(pe).getBaseControlByType)("FlexPanel"),y=ge(n,f),A=null===(t=r.current)||void 0===t?void 0:t.clientWidth,E=u.getParentControl(i)||{},I=s.getControlMetaProperty(E._Type_,"EntityId"),b=!!a()(I).length,k={titleFontSize:null==n?void 0:n.TitleFontSize};return z().createElement(ve.Provider,{value:k},z().createElement(v,(0,h.c)({className:mt()([Yn(c)("list-grid-view"),p])},m),z().createElement("div",{className:Yn(c)("list-grid-view-container"),ref:r},x()(y).call(y,(function(e){return z().cloneElement(e,{showInGridView:!0,rootWidth:A})})),!b&&z().createElement(ba,{containerId:i}))))},Fa=["className"],wa=function(e){var t,n,r=e.field,a=(0,V.useContext)(pe),i=a.getCommonUtil,o=a.getKdesignerApi,l=a.prefixCls,c=(0,V.useMemo)((function(){return o()}),[]).data.getData(),d=i().mergeCommonClassNames,u=ge(r,c),s=!(null!==(t=K()(n=c[ae]).call(n,(function(e){var t;return e[re]===(null===(t=u[0])||void 0===t||null===(t=t.props)||void 0===t||null===(t=t.field)||void 0===t?void 0:t[Z])})))&&void 0!==t&&t.length),f=_t(r),g=f.className,p=(0,C.c)(f,Fa),m=p.Grow,v=p.Shrink,y=p.Direction,A=p.Wrap,E=p.AlignItems,x=p.AlignSelf,I=p.JustifyContent,b=p.AlignContent,k=mt()([Yn(l)("list-card-view"),g,d({Grow:m,Shrink:v,Direction:y,Wrap:A,AlignItems:E,AlignSelf:x,JustifyContent:I,AlignContent:b})]),S=z().cloneElement(u[0],{key:"cloneControl1"}),F=z().cloneElement(u[0],{key:"cloneControl2"}),w=z().cloneElement(u[0],{key:"cloneControl3"});return z().createElement("div",(0,h.c)({className:k},p),z().Children.toArray(u),s?null:S,s?null:F,s?null:w)},Ta=["className"],Na=function(e){var t=e.field,n=t._Type_,r=(0,V.useContext)(pe),a=r.getBaseControlByType,i=r.getKdesignerApi,o=r.prefixCls,l=(0,V.useMemo)((function(){return i()}),[]).data.getData(),c=ge(t,l),d=_t(t),u=d.className,s=(0,C.c)(d,Ta),f=a("CardRowPanel"),g=mt()([u,Xn(o,"designer-card-row")]);return z().createElement(f,(0,h.c)({className:g,Type:n,isDesigner:!0,emptyTextLangKey:"pagelist.kapianshitu"},s),c)};var Ma=function(e){var t,n=e.field,r=_t(n),a=(0,(0,V.useContext)(pe).getBaseControlByType)("F7SelectedList");return z().createElement(a,(0,h.c)({},r,{items:(t=(0,U.getLangMsg)("formd.f7SelectedList.key0001"),[{text:t,value:0},{text:t,value:1},{text:t,value:2}]),readonly:!0}))},La=n(3460),Pa=n(27688),Da=function(){function e(t){(0,La.c)(this,e),(0,A.c)(this,"relationMap",{}),this.init(t)}return(0,Pa.c)(e,[{key:"init",value:function(e){this.relationMap[e]||(this.relationMap=(0,A.c)({},e,{}))}},{key:"setEntryFieldId",value:function(e,t,n){var r=this.relationMap[e];r&&(r[t]=n)}},{key:"delEntryOrFieldId",value:function(e,t){this.relationMap[e]&&(t?delete this.relationMap[e][t]:delete this.relationMap[e])}},{key:"getFlatFieldId",value:function(e,t){var n=this.relationMap[e];return n?n[t]:null}},{key:"getEntryFieldId",value:function(e,t){var n,r=this.relationMap[e];return r?S()(n=a()(r)).call(n,(function(e){return r[e]===t})):null}}]),e}(),Ra=new Da,Ba=["RowHeight","HeadHeight","style","ShowSelChexkbox","ShowSeq","ShowFlatPanel","AutoRowHeight"],Ga=["field","showFlatPanel","switchToFlatPanel","className","Direction","showSeq","multi","showEmptyTips","Wrap","Overflow","Grow","Shrink","showSelChexkbox","headHeight","autoRowHeight","rowHeight"];function _a(e,t){var n=a()(e);if(o()){var r=o()(e);t&&(r=K()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oa(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?u()(n=_a(Object(a),!0)).call(n,(function(t){(0,A.c)(e,t,a[t])})):f()?p()(e,f()(a)):u()(r=_a(Object(a))).call(r,(function(t){v()(e,t,c()(a,t))}))}return e}var Ka="GridFlatPanelAp",Va=function(e){var t=e.field,n=_t(t),r=(0,V.useContext)(pe),a=r.getKdesignerApi,i=r.getDataRef,o=(0,V.useMemo)((function(){return a()}),[]),l=o.data,c=o.dataFactory,d=(0,V.useMemo)((function(){return i().entitymeta[ae]}),[]),u=t[Z],s=n.RowHeight,f=n.HeadHeight,g=n.style,p=n.ShowSelChexkbox,m=n.ShowSeq,v=n.ShowFlatPanel,y=n.AutoRowHeight,A=(0,C.c)(n,Ba),E=(0,V.useState)(0),I=(0,q.c)(E,2),b=I[0],k=I[1],F=(0,V.useRef)(null);(0,V.useEffect)((function(){var e=F.current;if(e){var t=e.clientWidth;k(p||m?p&&m?t-80:t-40:t)}}),[p,m,F.current]);var w=(0,V.useCallback)((function(){var e,t,n=K()(e=l.getAllSubControls(u)).call(e,(function(e){return"EntryFieldAp"===e[ee]}));return{entityFields:K()(t=x()(n).call(n,(function(e){return S()(d).call(d,(function(t){return t[Z]===e.FieldId}))}))).call(t,(function(e){return e})),entryFields:n}}),[u,d]),T=(0,V.useCallback)((function(){}),[u]),N=(0,V.useCallback)((function(){if(Ra.init(u),w().entryFields.length>=1){var e=Oa(Oa({},c({type:Ka,parentId:u})),{},{Direction:"column",Grow:1});l.addControl((0,U.createAddAction)(e,{isAddFlatFieldAp:!0})).then((function(e){}))}}),[]),M=(0,V.useCallback)((function(){var e,t=Q()(e=l.getSubControls(u)).call(e,(function(e){return e[ee]===Ka}));t?T():N()}),[u]),L=(0,V.useCallback)((function(){var e,n=t[ee],r=t[Z],a=o.data.getData(),i=K()(e=a[ae]).call(e,(function(e){return e[re]===r&&e[ee]!==Ka}));return"DataGridAp"===n&&!p&&!m&&0===i.length}),[p,m]);(0,V.useEffect)((function(){v?(Ra.init(u),M()):Ra.delEntryOrFieldId(u)}),[v,M]);var P=z().createElement(za,(0,h.c)({rowHeight:s,showFlatPanel:v,headHeight:f,showSeq:m,showSelChexkbox:p,showEmptyTips:L(),multi:!n.hasOwnProperty("Multi")||n.Multi,autoRowHeight:y,rootWidth:b,ref:F,switchToFlatPanel:M,field:t},A));return Jt(P,[],{field:t,style:g,controlProps:Oa(Oa({},A),{},{baseControlCollapsible:!1})})},za=(0,V.forwardRef)((function(e,t){var n=e.field,r=e.showFlatPanel,a=e.switchToFlatPanel,i=e.className,o=e.Direction,l=e.showSeq,c=e.multi,d=e.showEmptyTips,u=e.Wrap,s=e.Overflow,f=e.Grow,g=e.Shrink,p=e.showSelChexkbox,m=e.headHeight,v=e.autoRowHeight,y=e.rowHeight,E=(0,C.c)(e,Ga),x=(0,V.useState)(0),I=(0,q.c)(x,2),b=I[0],k=I[1],S=(0,V.useContext)(U.ConfigContext),F=S.getPrefixCls,w=S.prefixCls,T=(0,V.useContext)(pe),N=T.getKdesignerApi,M=T.getCommonUtil,L=T.isDataWithMetaMode,P=(0,V.useMemo)((function(){return N()}),[]),D=P.data,R=P.selection,B=F(w,"form-designer-entry"),G=M().mergeCommonClassNames,_=D.getData(),O=ge(n,_,{excludeType:Ka}),H=ge(n,_,{ctrlType:Ka}),W=ta(n),j=W.entityFieldList,J=W.fieldList,Q=W.entityList,X=W.title,Y={titleFontSize:null==n?void 0:n.TitleFontSize,autoRowHeight:v,rowHeight:y,headHeight:m};(0,V.useEffect)((function(){var e=R.addSelectChangeListener((function(){for(var e=R.getActiveSelectedId(),t=b,n=!1;!n;){var a=D.findControl(e)[ee];a[re]?a[ee]===Ka?(n=!0,t=1):"EntryAp"===a[ee]&&(n=!0):n=!0,e=D.getParentControlId(e)}b!==t&&k(t),r||k(0)}));return function(){e()}}),[b,r]);var $=(0,V.useCallback)((function(e){var t=n[Z];if(k(e),1===e){var r;a();var i=D.getSubControls(t),o=null===(r=K()(i).call(i,(function(e){return e[ee]===Ka}))[0])||void 0===r?void 0:r[Z];o&&R.setSelect(o)}}),[n[Z]]),te=(0,V.useCallback)((function(e,t){e.stopPropagation(),$(t)}),[$]),ne=mt()((0,A.c)((0,A.c)({},"".concat(B,"-root"),!0),i,i),G({Direction:o,Wrap:u,Overflow:s,Grow:f,Shrink:g})),ae=mt()((0,A.c)((0,A.c)({},"".concat(B,"-view-panel"),!0),"".concat(B,"-active-panel"),0===b)),ie=mt()((0,A.c)((0,A.c)({},"".concat(B,"-view-panel"),!0),"".concat(B,"-active-panel"),1===b)),oe=mt()((0,A.c)((0,A.c)({},"".concat(B,"-grid-view"),!0),"".concat(B,"-hide"),1===b)),le=mt()((0,A.c)((0,A.c)({},"".concat(B,"-flat-view"),!0),"".concat(B,"-hide"),0===b)),ce=mt()((0,A.c)((0,A.c)({},"".concat(B,"-switch-panel"),!0),"".concat(B,"-hide"),!r)),de={};!v&&(de={height:y});var ue=mt()((0,A.c)({},"".concat(B,"-multi-chekbox"),c),"".concat(B,"-chekbox"));return z().createElement(ve.Provider,{value:Y},z().createElement("div",(0,h.c)({className:ne,ref:t},E),z().createElement("div",{className:ce},z().createElement("div",{className:ae,onClick:function(e){return te(e,0)}},z().createElement("span",{className:mt()(["".concat(B,"-text-omit")])},(0,U.getLangMsg)("formd.entry.key0001"))),z().createElement("div",{className:ie,onClick:function(e){return te(e,1)}},z().createElement("span",{className:mt()(["".concat(B,"-text-omit")])},(0,U.getLangMsg)("formd.entry.key0002")))),z().createElement("div",{className:oe},p?z().createElement("ul",{className:ue},z().createElement("li",{className:"".concat(B,"-headbox"),style:{height:m}},z().createElement("span",null)),z().createElement("li",{style:Oa({},de)},z().createElement("span",null)),z().createElement("li",{style:Oa({},de)},z().createElement("span",null)),z().createElement("li",{style:Oa({},de)},z().createElement("span",null))):null,l?z().createElement("ul",{className:"".concat(B,"-chekbox")},z().createElement("li",{className:"".concat(B,"-headbox"),style:{height:m}},"#"),z().createElement("li",{style:Oa({},de)},"1"),z().createElement("li",{style:Oa({},de)},"2"),z().createElement("li",{style:Oa({},de)},"3")):null,d?z().createElement("div",{className:"".concat(B,"-empty-tips")},(0,U.getLangMsg)("formd.entry.key0003")):null,O,!L&&(null==Q?void 0:Q.length)>0&&z().createElement(oa,{fieldParent:n,title:X,fieldList:J,entityFieldList:j})),z().createElement("div",{className:le},H)))})),Ua=["style","Name","rowHeight","Direction","Wrap","Overflow","Grow","Shrink","AlignItems","AlignSelf","AlignContent","JustifyContent"];function Ha(e,t){var n=a()(e);if(o()){var r=o()(e);t&&(r=K()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wa(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?u()(n=Ha(Object(a),!0)).call(n,(function(t){(0,A.c)(e,t,a[t])})):f()?p()(e,f()(a)):u()(r=Ha(Object(a))).call(r,(function(t){v()(e,t,c()(a,t))}))}return e}var ja=function(e){var t=e.field,n=(0,V.useContext)(pe),r=n.getKdesignerApi,a=n.getCommonUtil,i=n.getModel,o=(0,V.useContext)(me).fixColor,l=(0,V.useContext)(U.ConfigContext),c=l.getPrefixCls,d=l.prefixCls,u=i(),s=(0,V.useContext)(ve).titleFontSize,f=(0,V.useMemo)((function(){return r()}),[]).data,g=a().mergeCommonClassNames,p=_t(t),m=f.getData(),v=ge(t,m),y=p.style,E=p.Name,x=p.rowHeight,I=p.Direction,b=p.Wrap,k=p.Overflow,S=p.Grow,F=p.Shrink,w=p.AlignItems,T=p.AlignSelf,N=p.AlignContent,M=p.JustifyContent,L=(0,C.c)(p,Ua),P=c(d,"form-designer-entry-field-contain"),D=mt()((0,A.c)((0,A.c)({},"".concat(P,"-item"),!0),"".concat(P,"-container-item"),!0)),R=mt()((0,A.c)((0,A.c)({},"".concat(P,"-cell-head"),!0),"".concat(P,"-container-cell-head"),!0)),B=function(e,t){var n=e&&e[ee],r=e&&e[Z],a=qa[r];if(void 0!==a)return a;var i=!1;if("EntryFieldContainerAp"===n||"EntryFieldAp"===n){i="EntryFieldContainerAp"===t.getParentControl(r)[ee]}return qa[r]=i,i}(t,f),G=mt()((0,A.c)((0,A.c)({},"".concat(P,"-container-content"),!B),"".concat(P,"-container-child-content"),B),g({Direction:I,Wrap:b,Overflow:k,Grow:S,Shrink:F,AlignItems:w,AlignSelf:T,AlignContent:N,JustifyContent:M})),_=3*Jn()(x),O=o(u.getPropertyValue(t.Id,fe)),K={height:_&&!isNaN(_)?_+"px":void 0},H=Wa(Wa({},y),{},{maxWidth:110});return B||delete H.height,B?z().createElement("div",(0,h.c)({style:Wa(Wa({},y),{},{maxWidth:110})},L,{className:mt()((0,A.c)({},L.className,L.className),G)}),v):z().createElement("div",(0,h.c)({style:H},L,{className:mt()((0,A.c)({},L.className,L.className),D)}),z().createElement("div",{className:R,style:{fontSize:s,background:O}},E),z().createElement("div",{className:G,style:K},v))},qa={};var Ja=["className","onTwiceClick"];function Qa(e,t){var n=a()(e);if(o()){var r=o()(e);t&&(r=K()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Za(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?u()(n=Qa(Object(a),!0)).call(n,(function(t){(0,A.c)(e,t,a[t])})):f()?p()(e,f()(a)):u()(r=Qa(Object(a))).call(r,(function(t){v()(e,t,c()(a,t))}))}return e}var Xa=["CheckBoxField","PictureField"],Ya=["IntegerField","DecimalField","BigIntField","QtyField","AmountField"],$a=function(e){var t,n,r=e.field,a=e.rootWidth,i=e.isMb,o=void 0!==i&&i,l=r.Id,c=r._Type_,d=r.FieldId,u=r.Name,s=r.ListFieldId,f=r.Key,g=_t(r),p=(g.className,g.onTwiceClick),m=(0,C.c)(g,Ja),v=m.style,y=void 0===v?{}:v,A=(0,V.useContext)(pe),E=A.getModel,x=A.getCommonUtil,I=A.prefixCls,b=(0,V.useContext)(me).fixColor,k=(0,V.useContext)(ve),S=k.titleFontSize,F=k.autoRowHeight,w=k.rowHeight,T=k.headHeight,M=x(),L=M.getTitleProps,P=M.getControlProps,D=E(),R=(t=l,function(e){return D.getPropertyValue(t,e)}),B=(n=d,function(e){return D.getEntityPropertyValue(n,e)}),G=b(R("BackColor")),_=B("MustInput"),O=R("Hidden"),K=R("CtlTips"),U=b(R(fe)),H=R("TextAlign"),W=mt()([Yn(I)("entry-field"),{"item-mb":o}]),j=y.width;if(j&&-1!==De()(j).call(j,"%")&&(y.width=a*On()(j)*.01+"px"),O)return null;var q=u||f||l,J=L(r,ne,q),Q=P(r,p),Z={};return!F&&(Z={height:w}),"default"===H&&(N()(Xa).call(Xa,c)?H="center":N()(Ya).call(Ya,c)&&(H="right")),z().createElement("div",(0,h.c)({},m,{className:W},Q),z().createElement("div",(0,h.c)({className:"cellHead",style:{height:T,fontSize:S,background:U}},J),z().createElement("div",{style:{width:"100%",textAlign:H}},_?z().createElement("span",{className:"mustinput"},"*"):null,"fseq"===s?"#":q,K?z().createElement("i",{className:"kdfont kdfont-tishixinxi design-tips"}):null)),z().createElement("div",{className:"cellContent",style:Za(Za({},Z),{},{backgroundColor:G})}),z().createElement("div",{className:"cellContent",style:Za(Za({},Z),{},{backgroundColor:G})}),z().createElement("div",{className:"cellContent",style:Za(Za({},Z),{},{backgroundColor:G})}))},ei=["className","onTwiceClick"],ti=function(e){var t=e.field,n=t.Id,r=t.Name,a=(0,V.useContext)(pe),i=a.getKdesignerApi,o=a.getCommonUtil,l=a.prefixCls,c=a.getModel,d=(0,V.useContext)(me).fixColor,u=(0,V.useMemo)((function(){return i()}),[]).data.getData(),s=(0,V.useContext)(ve).titleFontSize,f=_t(t),g=f.className,p=f.onTwiceClick,m=(0,C.c)(f,ei),v=ge(t,u),y=o(),A=y.getTitleProps,E=y.getControlProps,x=mt()([g,Yn(l)("entry-field-group")]),I=r||n,b=A(t,ne,I),k=E(t,p),S=c(),F=S.getPropertyValue(n,"GroupCollapsible"),w=S.getPropertyValue(n,"GroupDefaultCollapse"),T=S.getPropertyValue(n,"CtlTips"),N=mt()("kdfont kdfont-tishixinxi","design-tips"),M=d(S.getPropertyValue(n,fe));return z().createElement("div",(0,h.c)({className:x},m,k),z().createElement("div",(0,h.c)({className:"group-name"},b,{style:{fontSize:s,background:M}}),I,T?z().createElement("i",{className:N}):null,F&&(w?z().createElement("i",{className:"kdfont kdfont-xiayiyue"}):z().createElement("i",{className:"kdfont kdfont-shangyiyue"}))),z().createElement("div",{className:"group-content"},v))},ni=["field","showInGridView"],ri=["className","Grow","Shrink","AlignSelf"];var ai=function(e){var t=e.field,n=e.showInGridView,r=(0,C.c)(e,ni),a=t._Type_,i=t.Name,o=t.Id,l=(0,V.useContext)(pe),c=l.getCommonUtil,d=l.prefixCls,u=c().mergeCommonClassNames,s=_t(t),f=s.className,g=s.Grow,p=s.Shrink,m=s.AlignSelf,v=(0,C.c)(s,ri),y=i||o,A=mt()([Yn(d)("list-column"),{"show-in-grid":n}]),E=mt()({"show-in-grid-title":n}),x=mt()(A,f,u({Grow:g,Shrink:p,AlignSelf:m}));return"RadioGroupField"===a?null:z().createElement("div",(0,h.c)({className:x},v,r),z().createElement("span",{className:E},y))},ii=["className","Grow","Shrink","AlignSelf"],oi=function(e){var t=e.field,n=(0,V.useContext)(pe),r=n.getCommonUtil,a=n.prefixCls,i=r().mergeCommonClassNames,o=_t(t),l=o.className,c=void 0===l?"":l,d=o.Grow,u=o.Shrink,s=o.AlignSelf,f=(0,C.c)(o,ii),g=f.style,p=void 0===g?{}:g,m=mt()([Yn(a)("card-selector"),c,i({Grow:d,Shrink:u,AlignSelf:s})]),v=mt()({kdfont:!0,"kdfont-fuxuankuangxuanzhong_fang":!0,"theme-fc":!0}),y=p.fontSize?{fontSize:p.fontSize}:{};return z().createElement("div",(0,h.c)({className:m},f),z().createElement("span",{className:v,style:y}))},li=function(e){var t,n,r=e.field,a=(0,V.useContext)(me),i=a.fixColor,o=a.getKdesignerApi,l=a.getData,c=_t(r,{fixColor:i,kdesignerApi:o()}),d=(0,U.useGetFieldProperty)(r,o()),u=(0,(0,V.useContext)(pe).getBaseControlByType)("SplitContainer"),s=(0,V.useRef)({top:3,right:1,bottom:2,left:0}),f=d("Grow"),g=d("Shrink"),p=0===On()(d("SplitStyle")||0),m=d("SplitPosition")||"50%";if(-1!==De()(m).call(m,"%")){var v=On()(m.replace("%","")),y=s.current;v>=100?(t=p?y.bottom:y.right,n=!0):v<=0&&(t=p?y.top:y.left,n=!0)}var C=d("MinHeight")||65,A=d("MinWidth")||300,E=l(),x=c.style,I=ge(r,E),b=Vt(x,I),k=!!window.localStorage.getItem("kd_auxiliary_line"),S=(0,h.c)(x,{border:k?"1px dashed burlywood":"1px dashed transparent",minWidth:50,flexGrow:1});return S.height||(S.height=100),z().createElement(u,(0,h.c)({auxiliaryLine:k,isDesign:!0,minHeight:C,minWidth:A,isHorizon:p,splitPercent:m,hiddenDir:t,hiddenState:n,Grow:f,Shrink:g,field:r},c,{style:b}),z().Children.toArray(I))},ci=(0,V.forwardRef)((function(e,t){var n=e.field,r=e.Grow,a=e.Shrink,i=e.style,o=void 0===i?{}:i,l=(0,V.useContext)(me),c=l.fixColor,d=l.getKdesignerApi,u=l.getData,s=_t(n,{fixColor:c,kdesignerApi:d()}),f=(0,U.useGetFieldProperty)(n,d()),g=(0,(0,V.useContext)(pe).getBaseControlByType)("SplitPanel"),p=f("Grow")||r,m=f("Shrink")||a,v=f("Direction"),y=f("Wrap"),C=f("Overflow"),A=f("AlignSelf"),E=f("AlignContent"),x=f("AlignItems"),I=f("JustifyContent"),b=u(),k=s.style,S=ge(n,b),F=Vt((0,h.c)({},k,o),S);return z().createElement(g,(0,h.c)({Direction:v,Wrap:y,Overflow:C,Grow:p,Shrink:m,AlignSelf:A,AlignContent:E,AlignItems:x,JustifyContent:I,field:n},s,{style:F,ref:t}),z().Children.toArray(S))})),di=ci,ui=function(e){var t,n,r=e.field,a=(0,V.useContext)(me),i=a.fixColor,o=a.getKdesignerApi,l=a.mergeCommonClassNames,c=a.prefixCls,d=o(),u=_t(r,{fixColor:i,kdesignerApi:d}),s=u.style,f=u.className,g=Yn(Xn(c,"card-entry-view")),p=(0,U.useGetFieldProperty)(r,d),m=_()(t=["Direction","Wrap","Grow","Shrink","AlignSelf","AlignItems","AlignContent","JustifyContent"]).call(t,(function(e,t){return e[t]=p(t),e}),{}),v=p("LayoutStyle"),y=(0,h.c)({},s);1===v?n=mt()((0,A.c)((0,A.c)((0,A.c)({},g("list-card-view"),!0),g("underline"),!0),f,f)):(y.overflow="auto",n=mt()((0,A.c)((0,A.c)({},g("list-card-view"),!0),f,f),l(m)));var C=d.data.getData(),E=ge(r,C),x=Vt(y,E);return z().createElement("div",(0,h.c)({className:n,style:x},u),z().Children.toArray(E))},si=function(e){var t=e.field,n=(0,V.useContext)(me),r=n.fixColor,a=n.getKdesignerApi,i=n.prefixCls,o=_t(t,{fixColor:r,kdesignerApi:a()}),l=(0,(0,V.useContext)(pe).getBaseControlByType)("CardRowPanel"),c=o.className,d=o.style,u=Yn(Xn(i,"card-entry-fix-row")),s=a().data.getData(),f=ge(t,s),g=Vt(d,f);return z().createElement(l,(0,h.c)({},o,{isDesigner:!0,className:mt()(c,u("designer-card-row")),style:g}),f)},fi="FilterGridViewAp",gi="SchemeFilterViewAp",pi=function(e){var t,n,r,a,i,o=e.field,l=(0,V.useContext)(me),c=l.fixColor,d=l.getKdesignerApi,u=l.mergeCommonClassNames,s=l.prefixCls,f=d(),g=_t(o,{fixColor:c,kdesignerApi:f}),p=(0,V.useContext)(pe).getBaseControlByType,m=p("QpTabs"),v=p("QpTabPanel"),y=(0,U.useGetFieldProperty)(o,f),C=_()(t=["Direction","Wrap","Overflow","Grow","Shrink"]).call(t,(function(e,t){return e[t]=y(t),e}),{}),E=Yn(Xn(s,"filter")),x=g.className,I=mt()((0,A.c)((0,A.c)({},E("query-panel"),!0),x,x),u(C)),b=function(e,t){var n=f.data.getSubControls(t.Id),r=K()(n).call(n,(function(t){return t._Type_===e}));return r.length>0?r[0]:null},k=function(e){var t=b(e,o);return null!=t?Mi(t):null},S=function(e){return function(){f.selection.setSelect(e)}};return z().createElement("div",(0,h.c)({},g,{className:I}),z().createElement("div",{className:E("bar")},z().createElement("div",{className:mt()("tip","title")},(0,U.getLangMsg)("formd.filterContainer.key0003")),z().createElement("div",{className:"selected-condition"}),k("FastSearchGridViewAp")),z().createElement("div",{className:mt()(E("query-condition"))},(n=b(fi,o),r=b(gi,o),a=n&&n.Id||"",i=r&&r.Id||"",z().createElement(m,{activeKey:0},z().createElement(v,{key:0,title:(0,U.getLangMsg)("formd.filterContainer.key0001"),onTitileClickCallBack:S(a)},k(fi)),z().createElement(v,{key:1,title:(0,U.getLangMsg)("formd.filterContainer.key0002"),onTitileClickCallBack:S(i)},k(gi))))))},mi=function(e){var t,n=e.field,r=(0,V.useContext)(me),a=r.fixColor,i=r.getKdesignerApi,o=r.mergeCommonClassNames,l=r.prefixCls,c=r.getData,d=i(),u=_t(n,{fixColor:a,kdesignerApi:d}),s=(0,U.useGetFieldProperty)(n,d),f=_()(t=["Direction","Wrap","Overflow","Grow","Shrink"]).call(t,(function(e,t){return e[t]=s(t),e}),{}),g=Yn(Xn(l,"filter")),p=u.className,m=u.style,v=mt()((0,A.c)((0,A.c)({},g("entryroot"),!0),p,p),o(f)),y=c(),C=ge(n,y),E=Vt(m,C);return z().createElement("div",(0,h.c)({},u,{className:v,style:E}),z().createElement("div",{className:g("head-container")},C))},vi=function(e){var t=e.field,n=(0,V.useContext)(me),r=n.fixColor,a=n.getKdesignerApi,i=n.prefixCls,o=a(),l=_t(t,{fixColor:r,kdesignerApi:o}),c=t.Id===o.selection.getActiveSelectedId(),d=(0,V.useRef)(c);d.current=c;var u=(0,V.useCallback)((function(){t.Id,o.selection.getActiveSelectedId();return d.current,!0}),[t.Id]);(0,U.useSelectionChangeForceUpdateEffect)(o,u);var s=t.Name||t.Id,f=l.className,g=Yn(Xn(i,"filter-column")),p=mt()((0,A.c)((0,A.c)((0,A.c)((0,A.c)({},g("item"),!0),Yn(Xn(i,"common"))("selected"),c),g("selected"),c),"className",f));return z().createElement("div",(0,h.c)({},l,{className:p}),s)},yi=[{fieldName:"(",fieldCaption:"("},{fieldName:"((",fieldCaption:"(("},{fieldName:"(((",fieldCaption:"((("}],Ci=[{fieldName:")",fieldCaption:")"},{fieldName:"))",fieldCaption:"))"},{fieldName:")))",fieldCaption:")))"}];yi=(0,Un.fromJS)(yi),Ci=(0,Un.fromJS)(Ci);var hi=function(e){var t=e.field,n=(0,V.useContext)(me),r=n.fixColor,a=n.getKdesignerApi,i=n.mergeCommonClassNames,o=_t(t,{fixColor:r,kdesignerApi:a()}),l=(0,V.useContext)(pe),c=l.getBaseControlByType,d=(0,l.getCommonUtil)(),u=d.getMapConfig,s=d.createNewId,f=(0,V.useRef)(u()).current,g=(0,V.useRef)(s());"amap"===f.mapService&&f.securityKey&&(window._AMapSecurityConfig={securityJsCode:f.securityKey});var p=(0,U.useGetFieldProperty)(t,a()),m=p("Grow"),v=p("Shrink"),y={position:"relative",display:"flex",height:"100px"},C={pointerEvents:"none"},E={position:"absolute",marginLeft:0,marginTop:0,width:"100%",height:"100%",background:"#000",filter:"alpha(opacity=0)",opacity:0},x=o.className,I=o.style,b=mt()((0,A.c)({},x,x),i({Grow:m,Shrink:v}));if("baidumap"===(null==f?void 0:f.mapService)||"default"===(null==f?void 0:f.mapService)){var k=c("MapBase"),S=f.mapKey,F=f.apiKey;return z().createElement("div",(0,h.c)({},o,{className:b,style:(0,h.c)({},y,I)}),z().createElement("div",{style:E}),z().createElement(k,{showSearchBox:!1,style:C,mapKey:S,apiKey:F}))}var w=c("AMap");return z().createElement("div",(0,h.c)({},o,{className:b,style:(0,h.c)({},y,I)}),z().createElement("div",{style:E}),z().createElement(w,{showSearchBox:!1,style:C,mapKey:f.mapKey,id:g.current}))};var Ai=function(e){var t,n,r,a=e.field,i=(0,V.useContext)(me),o=i.fixColor,l=i.getKdesignerApi,c=_t(a,{fixColor:o,kdesignerApi:l()}),d=(0,(0,V.useContext)(pe).getBaseControlByType)("AnchorControl"),u=(0,U.useGetFieldProperty)(a,l()),s=(t=(0,U.getLangMsg)("formd.anchor.key0001"),n=(0,U.getLangMsg)("formd.anchor.key0002"),r={items:[{target:"id1",caption:"".concat(t,"1"),items:[]},{target:"id2",caption:"".concat(t,"2"),items:[]},{target:"id3",caption:"".concat(t,"3"),items:[{target:"id4",caption:"".concat(n,"1"),items:[]},{target:"id5",caption:"".concat(n,"2"),items:[]},{target:"id6",caption:"".concat(n,"3"),items:[]}]},{target:"id7",caption:"".concat(t,"4"),items:[]},{target:"id8",caption:"".concat(t,"5"),items:[]}]},(0,Un.fromJS)(r)).get("items"),f=u("Id"),g=On()(u("AnchorDirection")),p=c.style||{};return p.position=1!==g?"absolute":"",z().createElement(d,(0,h.c)({field:a},c,{pageId:"page_id_"+f,items:s,style:p,direction:g}))},Ei=function(e){var t=e.field,n=(0,V.useContext)(me),r=n.fixColor,a=n.getKdesignerApi,i=n.mergeCommonClassNames,o=_t(t,{fixColor:r,kdesignerApi:a()}),l=(0,(0,V.useContext)(pe).getBaseControlByType)("Audio"),c=(0,U.useGetFieldProperty)(t,a()),d=c("Grow"),u=c("Shrink"),s=c("AlignSelf"),f=o.className,g=o.style,p=mt()((0,A.c)({},f,f),i({Grow:d,Shrink:u,AlignSelf:s})),m={pointerEvents:"none",width:g.width};return z().createElement("div",(0,h.c)({},o,{className:p}),z().createElement(l,{field:t,src:"",style:m}))};var xi,Ii=function(e){var t=e.field,n=(0,V.useContext)(me),r=n.fixColor,a=n.getKdesignerApi,i=n.mergeCommonClassNames,o=_t(t,{fixColor:r,kdesignerApi:a()}),l=(0,(0,V.useContext)(pe).getBaseControlByType)("LittleK"),c=(0,U.useGetFieldProperty)(t,a()),d=c("Grow"),u=c("Shrink"),s=c("LittleKStatus"),f=o.className,g=o.style,p=mt()((0,A.c)({},f,f),i({Grow:d,Shrink:u}));return z().createElement("div",(0,h.c)({},o,{className:p}),z().createElement(l,{style:g,status:s}))},bi=function(e){var t,n=e.field,r=(0,V.useContext)(me),a=r.fixColor,i=r.getKdesignerApi,o=r.mergeCommonClassNames,l=r.prefixCls,c=i(),d=_t(n,{fixColor:a,kdesignerApi:c}),u=(0,U.useGetFieldProperty)(n,c),s=n.Id===c.selection.getActiveSelectedId(),f=(0,V.useRef)(s);f.current=s;var g=(0,V.useCallback)((function(){n.Id,c.selection.getActiveSelectedId();return f.current,!0}),[n.Id]);(0,U.useSelectionChangeForceUpdateEffect)(c,g);var p=_()(t=["Direction","Grow","Shrink","AlignSelf","AlignItems","AlignContent","JustifyContent"]).call(t,(function(e,t){return e[t]=u(t),e}),{}),m=d.className,v=d.style,y=Yn(Xn(l,"MessageCarouselContainer")),C=mt()((0,A.c)((0,A.c)((0,A.c)({},m,m),y("carouselFieldAp"),!0),Yn(Xn(l,"common"))("selected"),s),o(p)),E=u("ShowDots"),x=u("DotDirection"),I=mt()((0,A.c)((0,A.c)((0,A.c)((0,A.c)({},y("dotsContainer"),!0),y("dotsInLeft"),"left"===x),y("dotsInRight"),"right"===x),y("dotsInTop"),"top"===x)),b=c.data.getData(),k=ge(n,b),S=Vt(v,k);return z().createElement("div",(0,h.c)({},d,{style:S,className:C}),k,E&&z().createElement("ul",{className:I},Nr()({length:4},(function(e,t){var n=mt()((0,A.c)({},y("dot"),!0));return z().createElement("li",{key:t,className:n})}))))},ki=function(e){var t,n=e.field,r=(0,V.useContext)(me),a=r.fixColor,i=r.getKdesignerApi,o=r.mergeCommonClassNames,l=r.prefixCls,c=i(),d=_t(n,{fixColor:a,kdesignerApi:c}),u=(0,U.useGetFieldProperty)(n,c),s=n.Id===c.selection.getActiveSelectedId(),f=(0,V.useRef)(s);f.current=s;var g=(0,V.useCallback)((function(){n.Id,c.selection.getActiveSelectedId();return f.current,!0}),[n.Id]);(0,U.useSelectionChangeForceUpdateEffect)(c,g);var p=_()(t=["Direction","Wrap","Grow","Shrink","Overflow","AlignSelf","AlignContent","AlignItems","JustifyContent","Name"]).call(t,(function(e,t){return e[t]=u(t),e}),{}),m=d.className,v=d.style,y=Yn(Xn(l,"MessageCarouselFlexPanel")),C=mt()((0,A.c)((0,A.c)((0,A.c)({},m,m),y("carouselItemAp"),!0),Yn(Xn(l,"common"))("selected"),s),o(p)),E=c.data.getData(),x=ge(n,E),I=Vt(v,x);return z().createElement("div",(0,h.c)({},d,{className:C,style:I}),x)},Si=[],Fi=function(e){var t,n=e.field,r=(0,V.useContext)(me),a=r.fixColor,i=r.getKdesignerApi,o=r.mergeCommonClassNames,l=r.prefixCls,c=(0,V.useContext)(pe),d=c.getBaseControlByType,u=(0,c.getCommonUtil)(),s=u.getToolbarItems,f=u.getWordCount,g=(0,U.useGetFieldProperty)(n,i()),p=g("Grow"),m=g("Shrink"),v=g("AlignSelf"),y=g("RichTextEditorStyle"),C=g("toolbarItems")||(null===(t=g("ToolbarItems"))||void 0===t?void 0:t.toolbarItems),E=s(C,Si,y),x=Yn(Xn(l,"rich-editor")),I=_t(n,{fixColor:a,kdesignerApi:i()}),b=I.className,k=I.onClick,S=I.style,F=mt()((0,A.c)((0,A.c)({},x("container"),!0),b,b),o({Grow:p,Shrink:m,AlignSelf:v})),w=(0,h.c)({},{fontSize:null==S?void 0:S.fontSize}),T=f(C,!1),N=d("TinymceEditor");return z().createElement("div",(0,h.c)({},I,{className:F}),z().createElement(N,{field:n,className:b,style:w,disabled:!0,content:"",Grow:p,Shrink:m,AlignSelf:v,onClick:k,isDesigner:!0,toolbarItems:E,wordCount:T}),z().createElement("div",{className:x("mask"),onClick:k}))},wi={RootPanel:Kt,FlexPanelAp:Zt,CardEntryFlexPanelAp:Zt,CardEntryFixRowPanelAp:Zt,CardFlexPanelAp:Zt,GridFlatPanelAp:Zt,ButtonAp:Yt,UndefinedControl:En,FieldAp:yn,CardEntryFieldAp:yn,AttachmentPanelAp:kn,HyperlinkAp:Sn,BillListAp:fa,ListGridViewAp:Sa,ListCardViewAp:wa,CardRowPanelAp:Na,F7SelectedListAp:Ma,EntryFieldAp:$a,FlatFieldAp:yn,ListColumnAp:$a,EntryAp:Va,CardEntryAp:fa,SubCardEntryAp:fa,CardEntryViewAp:ui,CardEntryFixRowAp:si,CardEntryRowAp:si,DecimalListColumnAp:$a,ComboListColumnAp:$a,MulComboListColumnAp:$a,DateListColumnAp:$a,TimeListColumnAp:$a,DynamicTextListColumnAp:$a,FlexListColumnAp:$a,PictureListColumnAp:$a,OperationColumnAp:$a,ListOperationColumnAp:$a,CheckBoxListColumnAp:$a,CascaderListColumnAp:$a,DateTimeListColumnAp:$a,AmountListColumnAp:$a,BigIntListColumnAp:$a,IntegerListColumnAp:$a,PriceListColumnAp:$a,QtyListColumnAp:$a,StepperListColumnAp:$a,EntryFieldGroupAp:ti,EntryFieldContainerAp:ja,MergeListColumnAp:ti,ListColumnGroupAp:ti,DataGridAp:Va,TextDataGridColumnAp:$a,IntegerDataGridColumnAp:$a,DecimalDataGridColumnAp:$a,DateDataGridColumnAp:$a,TimeDataGridColumnAp:$a,AmountDataGridColumnAp:$a,PictureDataGridColumnAp:$a,OperationDataGridColumnAp:$a,CardListColumnAp:ai,CardDecimalListColumnAp:ai,CardComboListColumnAp:ai,CardMulComboListColumnAp:ai,CardDateListColumnAp:ai,CardCheckBoxListColumnAp:ai,CardTimeListColumnAp:ai,CardFlexListColumnAp:ai,CardDateTimeListColumnAp:ai,CardAmountListColumnAp:ai,CardBigIntListColumnAp:ai,CardIntegerListColumnAp:ai,CardPriceListColumnAp:ai,CardQtyListColumnAp:ai,CardStepperListColumnAp:ai,CardSelectorAp:oi,ImageAp:wn,ImageListAp:Tn,BarChartAp:Nn,CustomChartAp:Mn,GaugeChartAp:Ln,HistogramChartAp:Pn,PieChartAp:Dn,PointLineChartAp:Rn,RadarChartAp:Bn,LabelAp:Gn,QRCodeAp:Kn,ProgressBarAp:Vn,CarouselFigureAp:zn,TransferContainerAp:Hn,RateAp:Qn,TimelineAp:Wn,VectorAp:jn,TreeMenuAp:Zn,TreeViewAp:$n,ToolbarAp:ar,BarItemAp:or,AdvConAp:ur,AdvConSummaryPanelAp:fr,AdvConToolbarAp:pr,AdvConBarItemAp:mr,AdvConChildPanelAp:yr,FloatMenuAp:Ar,FloatMenuPanelAp:Er,FloatMenuItemAp:Ir,TabAp:wr,TabPageAp:Sr,WizardAp:Dr,HomePageTabAp:Br,IFrameAp:Kr,ClientAjaxAp:zr,HtmlAp:jr,TaskNoticeAp:Qr,FieldsetPanelAp:ua,SplitContainerAp:li,SplitPanelAp:di,FieldgroupPanelAp:Zt,FilterContainerAp:pi,FastSearchGridViewAp:mi,FilterColumnAp:vi,FilterGridViewAp:mi,SchemeFilterViewAp:mi,FilterGridAp:function(e){var t,n,r,a=e.field,i=(0,V.useContext)(me),o=i.fixColor,l=i.getKdesignerApi,c=_t(a,{fixColor:o,kdesignerApi:l()}),d=(0,(0,V.useContext)(pe).getBaseControlByType)("CommonFilterGrid"),u=(t=[{id:"67",name:{zh_CN:(0,U.getLangMsg)("formd.filterGrid.key0004")}},{id:"17",name:{zh_CN:(0,U.getLangMsg)("formd.filterGrid.key0005")}},{id:"34",name:{zh_CN:(0,U.getLangMsg)("formd.filterGrid.key0006")}},{id:"60",name:{zh_CN:(0,U.getLangMsg)("formd.filterGrid.key0007")}},{id:"211",name:{zh_CN:(0,U.getLangMsg)("formd.filterGrid.key0008")}},{id:"83",name:{zh_CN:(0,U.getLangMsg)("formd.filterGrid.key0009")}},{id:"72",name:{zh_CN:(0,U.getLangMsg)("formd.filterGrid.key0010")}},{id:"42",name:{zh_CN:(0,U.getLangMsg)("formd.filterGrid.key0011")}},{id:"44",name:{zh_CN:(0,U.getLangMsg)("formd.filterGrid.key0012")}},{id:"56",name:{zh_CN:(0,U.getLangMsg)("formd.filterGrid.key0013")}},{id:"100",name:{zh_CN:(0,U.getLangMsg)("formd.filterGrid.key0014")}},{id:"52",name:{zh_CN:(0,U.getLangMsg)("formd.filterGrid.key0015")}}],n={conditions:[{fieldName:"textfield1",fieldCaption:(0,U.getLangMsg)("formd.filterGrid.key0003"),compareTypes:t,type:"text"},{fieldName:"combofield",fieldCaption:(0,U.getLangMsg)("formd.filterGrid.key0016"),compareTypes:t,type:"enum",items:[{name:{zh_CN:"".concat((0,U.getLangMsg)("formd.filterGrid.key0017"),"1")},value:"1"},{name:{zh_CN:"".concat((0,U.getLangMsg)("formd.filterGrid.key0017"),"2")},value:"2"}]}]},(0,Un.fromJS)(n)).get("conditions"),s=(r={add:[{leftBracket:"(",fieldName:"textfield1",value:(0,U.getLangMsg)("formd.filterGrid.key0003"),compareType:"17",rightBracket:")",logic:"0"},{leftBracket:"(",fieldName:"combofield",value:"2",compareType:"60",rightBracket:")",logic:"0"}]},(0,Un.fromJS)(r)).get("add"),f=(0,U.useGetFieldProperty)(a,l())("showTitle")||!0,g=function(){var e=[{fieldName:"0",fieldCaption:(0,U.getLangMsg)("formd.filterGrid.key0001")},{fieldName:"1",fieldCaption:(0,U.getLangMsg)("formd.filterGrid.key0002")}];return(0,Un.fromJS)(e)}();return z().createElement("div",c,z().createElement(d,{conditions:u,added:s,left:yi,right:Ci,showTitle:f,logic:g}))},SearchAp:function(e){var t=e.field,n=(0,V.useContext)(me),r=n.fixColor,a=n.getKdesignerApi,i=n.mergeCommonClassNames,o=_t(t,{fixColor:r,kdesignerApi:a()}),l=(0,(0,V.useContext)(pe).getBaseControlByType)("SearchBox"),c=(0,U.useGetFieldProperty)(t,a()),d=c("Key"),u=c("Grow"),s=c("Shrink"),f=c("ShowModel"),g=c("SearchEmptyText"),p=o.className,m=mt()((0,A.c)({},p,p),i({Grow:u,Shrink:s}));return z().createElement(l,(0,h.c)({field:t},o,{id:d,className:m,placeholder:g,showModel:f}))},MapControlAp:hi,AnchorControlAp:Ai,AudioAp:Ei,CountDownAp:function(e){var t=e.field,n=(0,V.useContext)(me),r=n.fixColor,a=n.getKdesignerApi,i=n.mergeCommonClassNames,o=_t(t,{fixColor:r,kdesignerApi:a()}),l=(0,(0,V.useContext)(pe).getBaseControlByType)("Countdown"),c=(0,U.useGetFieldProperty)(t,a()),d=c("Grow"),u=c("Shrink"),s=c("CountDownMask"),f=o.className,g=mt()((0,A.c)({},f,f),i({Grow:d,Shrink:u}));return z().createElement("div",(0,h.c)({},o,{className:g}),z().createElement(l,{mask:s,time:{hour:"01",minute:"00",second:"00"},duration:60}))},GridContainerAp:function(e){var t=e.field,n=(0,V.useContext)(me),r=n.fixColor,a=n.getKdesignerApi,i=_t(t,{fixColor:r,kdesignerApi:a()}),o=(0,(0,V.useContext)(pe).getBaseControlByType)("GridContainerAp"),l=(0,U.useGetFieldProperty)(t,a());return z().createElement(o,(0,h.c)({field:t},i,{getPropertyValue:l,updatePropValue:function(e,t,n){a().data.batchUpdateControlPropertyValues((0,U.createUpdateAction)([[e,(0,A.c)({},t,n)]]))}}))},ListboxAp:function(e){var t,n=e.field,r=(0,V.useContext)(me),a=r.fixColor,i=r.getKdesignerApi,o=r.mergeCommonClassNames,l=_t(n,{fixColor:a,kdesignerApi:i()}),c=(0,(0,V.useContext)(pe).getBaseControlByType)("Listbox"),d=(0,U.useGetFieldProperty)(n,i()),u=d("Grow"),s=d("Shrink"),f=d("ListboxDiraction")||"v",g=l.className,p=mt()((0,A.c)({},g,g),o({Grow:u,Shrink:s}));return z().createElement(c,(0,h.c)({items:(t=[{id:"aaa",content:(0,U.getLangMsg)("formd.listbox.key0001")},{id:"bbb",content:(0,U.getLangMsg)("formd.listbox.key0002")},{id:"ccc",content:(0,U.getLangMsg)("formd.listbox.key0003")}],(0,Un.fromJS)(t)),diraction:f},l,{className:p}))},LittleKAp:Ii,MarkdownAp:function(e){var t=e.field,n=(0,V.useContext)(me),r=n.fixColor,a=n.getKdesignerApi,i=n.mergeCommonClassNames,o=_t(t,{fixColor:r,kdesignerApi:a()}),l=(0,(0,V.useContext)(pe).getBaseControlByType)("Markdown"),c=(0,U.useGetFieldProperty)(t,a()),d=c("Grow"),u=c("Shrink"),s=o.className,f=mt()((0,A.c)({},s,s),i({Grow:d,Shrink:u}));return z().createElement(l,(0,h.c)({content:"Markdown"},o,{className:f,field:t}))},MessageCarouselContainerAp:bi,MessageCarouselFlexPanelAp:ki,QingAnalysisCardAp:function(e){var t=e.field,n=(0,V.useContext)(me),r=n.fixColor,a=n.getKdesignerApi,i=_t(t,{fixColor:r,kdesignerApi:a()}),o=(0,(0,V.useContext)(pe).getBaseControlByType)("QingAnalysisCardAp"),l=(0,U.useGetFieldProperty)(t,a());return z().createElement(o,(0,h.c)({field:t},i,{getPropertyValue:l}))},VideoAp:function(e){var t=e.field,n=(0,V.useContext)(me),r=n.fixColor,a=n.getKdesignerApi,i=n.mergeCommonClassNames,o=_t(t,{fixColor:r,kdesignerApi:a()}),l=(0,(0,V.useContext)(pe).getBaseControlByType)("Video"),c=(0,U.useGetFieldProperty)(t,a()),d=c("Grow"),u=c("Shrink"),s=c("AlignSelf"),f=o.className,g=mt()((0,A.c)({},f,f),i({Grow:d,Shrink:u,AlignSelf:s}));return z().createElement("div",(0,h.c)({},o,{className:g}),z().createElement(l,{field:t,src:"",style:{pointerEvents:"none",width:"100%",height:"100%"}}))},NameCombinePanelAp:ua,NameSegFieldAp:yn,CodeEditAp:function(e){var t=e.field,n=(0,V.useContext)(me),r=n.fixColor,a=n.getKdesignerApi,i=_t(t,{fixColor:r,kdesignerApi:a()}),o=(0,(0,V.useContext)(pe).getBaseControlByType)("CodeEditAp"),l=(0,U.useGetFieldProperty)(t,a());return z().createElement(o,(0,h.c)({field:t},i,{getPropertyValue:l}))},RichTextEditorAp:Fi,CodeEditorAp:function(e){var t=e.field,n=(0,V.useContext)(me),r=n.fixColor,a=n.getKdesignerApi,i=_t(t,{fixColor:r,kdesignerApi:a()}),o=(0,(0,V.useContext)(pe).getBaseControlByType)("CodeEditAp"),l=(0,U.useGetFieldProperty)(t,a());return z().createElement(o,(0,h.c)({field:t},i,{getPropertyValue:l}))}},Ti=_()(xi=a()(wi)).call(xi,(function(e,t){return e[t]=z().memo(wi[t],(function(e,t){var n=t._IsContainer,r=t.field,a=void 0===r?{}:r,i=t.isDataWithMetaMode;if(n||"RadioField"===a.FieldType||"FieldAp"===a._Type_&&i)return!1;var o=e.field,l=e.layoutOption,c=t.field,d=t.layoutOption;return(!l||!d||l===d)&&o===c})),e}),{}),Ni=Ti,Mi=function(e){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).isPC;var t,n=e.ParentId,r=z().useContext(pe),a=r.getKdesignerApi,i=r.isDataWithMetaMode,o=a(),l=o.data,c=o.meta,d=l.getRealControlType(e),u=null===(t=c.getControlMeta(d))||void 0===t?void 0:t.IsContainer,s={field:e,key:e[Z],_IsContainer:u,isDataWithMetaMode:i};if(!n)return z().createElement(Ni.RootPanel,s);var f=function(e){return Ti[e]}(d);if(f)return z().createElement(f,s);var g=l.getSubControls(e[Z]);return(null==g?void 0:g.length)>0?z().createElement(Ni.FlexPanelAp,s):z().createElement(Ni.UndefinedControl,s)},Li=function(e){var t=e.value,n=e.oldValue;u()(n).call(n,(function(e){var t,n=document.querySelectorAll(b()(t="[".concat(Ae,'="')).call(t,e,'"]'));u()(n).call(n,(function(e){return null==e?void 0:e.removeAttribute(Ee)}))})),u()(t).call(t,(function(e){var t,n=document.querySelectorAll(b()(t="[".concat(Ae,'="')).call(t,e,'"]'));u()(n).call(n,(function(e){null==e||e.setAttribute(Ee,"true"),e.scrollIntoViewIfNeeded?e.scrollIntoViewIfNeeded():e.scrollIntoView({block:"center"})}))}))},Pi={0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,TAB:9,ENTER:13,SHIFT:16,CTRL:17,CONTROL:17,ALT:18,ESC:27,ESCAPE:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,ARROWLEFT:37,UP:38,ARROWUP:38,RIGHT:39,ARROWRIGHT:39,DOWN:40,ARROWDOWN:40,DELETE:46,META:91,"*":106,"+":107,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"]":221},Di="formdesigner.CopyContent",Ri=function(e){window.sessionStorage.setItem(Di,Ct()(e))},Bi=function(){var e=window.sessionStorage.getItem(Di);return e&&(e=JSON.parse(e)),e},Gi=function(){window.sessionStorage.removeItem(Di)},_i=function(){var e=(0,V.useContext)(pe).getKdesignerApi,t=(0,V.useMemo)((function(){return e()}),[]).selection.getSelection;return{setCopyContent:Ri,getCopyContent:Bi,setDatasetCutControl:function(){var e=t();u()(e).call(e,(function(e){var t,n=document.querySelectorAll(b()(t="[".concat(Ae,'="')).call(t,e,'"]'));u()(n).call(n,(function(e){e.setAttribute(Ie,"true")}))}))},removeDatasetCutControl:function(){var e=document.querySelectorAll("[".concat(Ie,"]"));return e.length&&u()(e).call(e,(function(e){e.removeAttribute(Ie)})),e.length},clearCopyContent:Gi}},Oi=n(55640),Ki=n.n(Oi),Vi=["_Type_"],zi=["Id","_Type_","Key","Name","ParentId","Index","FieldType","FieldId","EntryId","CardEntryId"],Ui=function(e){return e.selection.getActiveSelectedId()},Hi=function(e){var t=Ui(e);return e.data.findControl(t)},Wi=function(e,t,n){var r,i,o,l=n?n():Hi(t),c=e.json,d=c.formMeta,u=c.excludeProp,s=void 0===u?zi:u,f=l._Type_;return(0,h.c)({},_()(r=a()(l)).call(r,(function(e,n){var r=t.meta.getControlMetaProperty(f,n);return(0,Ze.isEmpty)(r)||"biz"!==r.TabGroup&&r.TabGroup||(e[n]=l[n]),e}),{}),d,_()(i=(0,j.c)(new(D())(b()(o=[]).call(o,(0,j.c)(s),zi)))).call(i,(function(e,t){return Ki()(l,t)&&(e[t]=l[t]),e}),{}))},ji=function(e,t,n){var r,i=n.meta.getDefaultData(e._Type_);return(0,h.c)(e,_()(r=a()(t)).call(r,(function(t,n){return Ki()(e,n)||(t[n]=i[n]),t}),{}))},qi="showGptDialog";function Ji(e,t){var n=a()(e);if(o()){var r=o()(e);t&&(r=K()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}var Qi=function(e,t){var n=(0,V.useContext)(pe),r=n.getKdesignerApi,i=n.invokeSaveAction,o=n.isDataWithMetaMode,l=n.clientParams,d=n.invokeAction,s=n.getModel,g=(0,V.useMemo)((function(){return r()}),[]),m=g.data,y=g.selection,h=g.meta,E=m.getRootId(),I=y.getSelection,k=y.setSelect,S=y.getActiveSelectedId,F=(0,V.useContext)(U.GlobalConfigContext).showMessage,T=_i(),M=T.setCopyContent,L=T.getCopyContent,P=T.setDatasetCutControl,D=T.removeDatasetCutControl,R=T.clearCopyContent;(0,V.useEffect)((function(){var n=e.current;if(n){var r,T=document.querySelector(b()(r="[".concat(Ae,'="')).call(r,E,'"]')),B=function(e){var n=I(),r=S(),B=m.getNextSelectedControlId(r),G=m.getParentControlId(B),O=e.keyCode;switch(O){case Pi.DELETE:n.length>0&&(u()(n).call(n,(function(e){E!==e?m.deleteControl((0,U.createDeleteAction)(e)).then((function(){var e=m.findControl(B)||m.findControl(G),t=(null==e?void 0:e.Id)||E;k([t])})):F((0,U.getLangMsg)("formd.tips.key0007"))})),w()((function(){return T.focus()}),50));break;case Pi.ESC:var K=g.selection.getActiveSelectedId();if(K!==g.data.getRootId()){var V=g.data.findControl(K),z=g.data.findControlByCondition((function(e){return e.Id===V.ParentId}));k(z[0].Id)}break;case Pi.S:Ve(e)&&i();break;case Pi.T:Ve(e)&&e.altKey&&window.console.log(Ct()(function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zi,r=(e._Type_,(0,C.c)(e,Vi));return{formMeta:_()(t=a()(r)).call(t,(function(e,t){return N()(n).call(n,t)||(e[t]=r[t]),e}),{}),excludeProp:n}}(g.data.findControl(g.selection.getActiveSelectedId())),void 0,2));break;case Pi.C:if(e.ctrlKey){null==e||e.stopPropagation();var H=I(),W=_()(H).call(H,(function(e,t){var n,r=m.findControl(t),a=function(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?u()(n=Ji(Object(a),!0)).call(n,(function(t){(0,A.c)(e,t,a[t])})):f()?p()(e,f()(a)):u()(r=Ji(Object(a))).call(r,(function(t){v()(e,t,c()(a,t))}))}return e}({},r),i=h.getControlMeta((null==r?void 0:r.FieldType)||r[ee]).Inside;return r.FieldId&&(a.FieldId=""),i?e:b()(n=[]).call(n,(0,j.c)(e),[a])}),[]);M(W)}break;case Pi.V:if(e.ctrlKey&&e.altKey){var q=L();if(1===(null==q?void 0:q.length)){var J=q[0][Z],Q=I();rt(m)(J,Q)}}else if(e.ctrlKey){var X=L();if(qe()(X)){var Y=D()>0,$=m.getData();if(Y){var te=_()(X).call(X,(function(e,t){var n;return b()(n=[t[Z]]).call(n,(0,j.c)(e))}),[]);return void m.swapControl((0,U.createSwapAction)({origin:te,target:r})).then((function(e){y.setSelect([te[0]]),R()}))}var ne=m.findControl(r),re=ne.FieldType,ae=ne[ee],ie=r,oe=h.getControlMeta(re||ae).IsContainer;oe||(ie=m.getParentControlId(r));var le=_()(X).call(X,(function(e,t){var n;return b()(n=[]).call(n,(0,j.c)(e),[et($,t,ie,o)])}),[]),ce=m.findControlIndex(r);if(oe){var de=m.getSubControls(r),ue=de.length;ue>0&&(ce=m.findControlIndex(de[ue-1][Z]))}m.addControl((0,U.createPasteAction)(le[0],{index:ce+1})).then((function(e){var t,n=(null==e||null===(t=e[0])||void 0===t||null===(t=t.value)||void 0===t?void 0:t[0][Z])||r;k(n)}))}}break;case Pi.X:if(e.ctrlKey){null==e||e.stopPropagation();var se=I(),fe=_()(se).call(se,(function(e,t){var n;return b()(n=[]).call(n,(0,j.c)(m.getAllSubControls(t)),(0,j.c)(e))}),[]);M(fe),P()}break;case Pi.Z:var ge=m.canUndo();e.ctrlKey&&ge&&m.undo();break;case Pi.Y:var pe=m.canRedo();e.ctrlKey&&pe&&m.undo();break;case Pi.LEFT:case Pi.RIGHT:case Pi.UP:case Pi.DOWN:if(t){if(O===Pi.LEFT||O===Pi.UP){var me=m.getPrevSibling(r).control;if(me)return void k(me[Z]);var ve=m.getParentControl(r);if(ve)return void k(ve[Z])}else{var ye,Ce,he=null===(ye=m.getSubControls(r))||void 0===ye?void 0:ye[0];if(he)return void k(he[Z]);var Ae=m.getNextSibling(r).control;if(Ae)return void k(Ae[Z]);var Ee=m.getParentControl(r);if(!Ee)return;for(var xe=Ee[Z],Ie=m.getNextSibling(Ee[Z]).control;!Ie&&r!==E&&xe!==E;){var be,ke;Ie=(xe=null===(ke=Ee=m.getParentControl(null===(be=Ee)||void 0===be?void 0:be[Z]))||void 0===ke?void 0:ke[Z])&&m.getNextSibling(xe).control}var Se=null===(Ce=Ie)||void 0===Ce?void 0:Ce[Z];if(Se!==E)return void k(Se)}return}if(e.shiftKey){var Fe,we=O===Pi.LEFT||O===Pi.RIGHT?"Width":"Height",Te=O===Pi.LEFT||O===Pi.DOWN?-1:1,Ne=null===(Fe=m.findControl(r))||void 0===Fe?void 0:Fe[we],Me=(0,Ze.endsWith)(Ne,"%")?"%":"";if(Me=(0,Ze.endsWith)(Ne,"px")?"px":Me,!(Me=(0,Ze.endsWith)(Ne,"mm")?"mm":Me))return;Ne=((Ne=Jn()(Ne)+Te)<0?0:Ne)+Me,m.batchUpdateControlPropertyValues((0,U.createUpdateAction)([[r,(0,A.c)({},we,Ne)]]))}else if(e.ctrlKey){var Le=O===Pi.LEFT||O===Pi.UP?"forward":"back";m.moveControl(r,Le),w()((function(){return T.focus()}),50)}else{var Pe=O===Pi.LEFT||O===Pi.UP?m.getPrevSibling(r):m.getNextSibling(r),De=Pe&&Pe.control;De&&k([De[Z]])}break;case Pi.K:if(e.ctrlKey&&l.enableGpt){e.preventDefault(),e.stopPropagation();var Re=s(),Be=x()(n).call(n,(function(e){return{entitymeta:Re.getFieldInfo(e,"entitymeta"),formmeta:Re.getFieldInfo(e,"formmeta")}}));d(qi,[{selectionControls:Be,activeControlId:r}])}}};return n.addEventListener("keydown",B),function(){n.removeEventListener("keydown",B)}}}),[])},Zi=function(e){var t=(0,V.useContext)(pe).getKdesignerApi,n=(0,V.useMemo)((function(){return t()}),[]).selection,r=e.Id,a=n.setSelect;(0,V.useEffect)((function(){a([r])}),[])},Xi={},Yi={},$i=function(e,t){t?Yi=e.getBoundingClientRect():Xi=e.getBoundingClientRect()},eo=function(e){return e?Yi:Xi},to=function(e){var t=eo(e).width;return!!(t&&564-t>12)},no=W.Dropdown.Menu,ro=W.Dropdown.Item,ao=Be(),io="kd_auxiliary_line",oo=function(){var e,t,n,r,a,i,o=(0,V.useContext)(pe),l=o.getKdesignerApi,c=o.getCommonUtil,d=o.isDataWithMetaMode,s=(0,V.useContext)(me).isListMeta,f=(0,V.useMemo)((function(){return l()}),[]),g=f.data,p=f.selection,m=f.meta,v=(0,V.useContext)(U.ConfigContext),y=v.getPrefixCls,C=v.prefixCls,h=((0,V.useContext)(U.GlobalConfigContext).showMessage,_i()),E=h.setCopyContent,I=h.getCopyContent,k=h.setDatasetCutControl,S=h.removeDatasetCutControl,F=h.clearCopyContent,w=(0,V.useState)(!1),T=(0,q.c)(w,2),M=T[0],L=T[1],P=(0,V.useState)(!1),D=(0,q.c)(P,2),R=D[0],B=D[1],G=(0,V.useState)(!1),O=(0,q.c)(G,2),H=O[0],J=O[1],Q=(0,V.useState)(""),X=(0,q.c)(Q,2),Y=X[0],$=X[1],te=(0,V.useState)(""),ne=(0,q.c)(te,2),ae=ne[0],ie=ne[1],oe=(0,V.useState)("#212121"),le=(0,q.c)(oe,2),ce=le[0],de=le[1],ue=(0,V.useState)("#ffffff"),se=(0,q.c)(ue,2),fe=se[0],ge=se[1],ve=(0,V.useState)(to(s)),ye=(0,q.c)(ve,2),Ce=ye[0],he=ye[1],Ee=(0,V.useState)(!1),xe=(0,q.c)(Ee,2),Ie=xe[0],Fe=xe[1],we=(0,V.useState)(!1),Te=(0,q.c)(we,2),Ne=Te[0],Me=Te[1],Le=(0,V.useState)(!1),Pe=(0,q.c)(Le,2),De=Pe[0],Re=Pe[1],Be=(0,V.useState)(0)[1],Ge=(0,V.useRef)(null),_e=(0,V.useRef)(null),Oe=(0,V.useRef)(null),Ke=y&&y(C,"nav-tool"),Ve=p.getSelection,ze=p.setSelect,Ue=p.getActiveSelectedId,He=p.addSelectChangeListener,We=g.getRootId(),je=document.querySelector(b()(e="[".concat(Ae,'="')).call(e,We,'"]')),Je=g.canUndo(),Xe=g.canRedo(),Ye=c().cursorBrush,$e=(0,V.useCallback)((function(){var e,t=Ue(),n=g.findControl(t),r=n.FontWeight,a=n.ForeColor,i=void 0===a?"":a,o=n.BackColor,l=void 0===o?"":o,c=n[ee],d=n.FieldType,u=m.getControlMeta(d||c).Inside,s=void 0!==u&&u;if(B("bold"===r),$(i),ie(l),N()(e=["GridFlatPanelAp","FlatFieldAp"]).call(e,c))Re(!0);else{var f=(g.getParentControl(t)||{})[ee];Re("GridFlatPanelAp"===f||s)}}),[]),tt=(0,V.useCallback)((function(e){var t=e.actions;if("UPDATE"===(null==t?void 0:t[0].type)){var n=g.findControl(Ue()),r=n.FontWeight,a=n.ForeColor,i=void 0===a?"":a,o=n.BackColor,l=void 0===o?"":o;B("bold"===r),$(i),ie(l)}}),[]);(0,V.useEffect)((function(){var e=g.findControl(Ue()),t=e.FontWeight,n=e.ForeColor,r=void 0===n?"":n,a=e.BackColor,i=void 0===a?"":a;B("bold"===t),$(r),ie(i);var o=!!window.localStorage.getItem(io);o&&(L(o),null==je||je.setAttribute(be,"true")),U.eventBus.on("clear-form-status",J);var l=He($e),c=g.addDataChangeListener(tt);return function(){l(),U.eventBus.off("clear-form-status",J),c()}}),[]),(0,V.useEffect)((function(){var e=Oe.current;e&&($i(null==e?void 0:e.parentElement,s),window.onresize=(0,Ze.debounce)((function(){$i(null==e?void 0:e.parentElement,s),he(to(s)),Be((function(e){return e+1}))}),100))}),[Oe.current]),(0,V.useEffect)((function(){Ce!==to(s)&&he(to(s))}),[Ce]);var nt=(0,V.useCallback)((function(){Xe&&g.redo()}),[Xe]),rt=(0,V.useCallback)((function(){Je&&g.undo()}),[Je]),at=(0,V.useCallback)((function(){var e=Ve();1===e.length&&g.moveControl(e[0],"forward")}),[]),it=(0,V.useCallback)((function(){var e=Ve();1===e.length&&g.moveControl(e[0],"back")}),[]),ot=(0,V.useCallback)((function(){var e=Ve();if(e.length>0){var t=Ue(),n=g.getNextSelectedControlId(t),r=g.getParentControlId(t),a=g.getRootId(),i=K()(e).call(e,(function(e){return e!==a}));g.deleteControl((0,U.createDeleteAction)(i)).then((function(){var e=g.findControl(n)||g.findControl(r);n=(null==e?void 0:e.Id)||a,ze([n])}))}}),[]),lt=(0,V.useCallback)((function(e){null==e||e.stopPropagation();var t=Ve(),n=_()(t).call(t,(function(e,t){var n;return b()(n=[]).call(n,(0,j.c)(g.getAllSubControls(t)),(0,j.c)(e))}),[]);E(n),k()}),[]),ct=(0,V.useCallback)((function(e){null==e||e.stopPropagation();var t=Ve(),n=_()(t).call(t,(function(e,t){var n,r=g.findControl(t);return b()(n=[]).call(n,(0,j.c)(e),[r])}),[]);E(n)}),[]),dt=(0,V.useCallback)((function(){var e=I(),t=Ue(),n=g.getData();if(qe()(e)){if(S()>0){var r=_()(e).call(e,(function(e,t){var n;return b()(n=[t[Z]]).call(n,(0,j.c)(e))}),[]);return void g.swapControl((0,U.createSwapAction)({origin:r,target:t})).then((function(e){p.setSelect([r[0]]),F()}))}var a=g.findControl(t),i=a.FieldType,o=a[ee],l=t,c=m.getControlMeta(i||o).IsContainer;c||(l=g.getParentControlId(t));var u=_()(e).call(e,(function(e,t){var r;return b()(r=[]).call(r,(0,j.c)(e),[et(n,t,l,d)])}),[]),s=g.findControlIndex(t);if(c){var f=g.getSubControls(t),v=f.length;v>0&&(s=g.findControlIndex(f[v-1][Z]))}g.addControl((0,U.createPasteAction)(u[0],{index:s+1})).then((function(e){var n,r=(null==e||null===(n=e[0])||void 0===n||null===(n=n.value)||void 0===n?void 0:n[0][Z])||t;ze(r)}))}}),[]),ut=(0,V.useCallback)((function(e){e.stopPropagation();var t=g.getData(),n=p.getSelection();if(n.length>1){var r=_()(n).call(n,(function(e,n){var r=g.findControl(n);return b()(e).call(e,et(t,r,r[re],d))}),[]);g.addControl((0,U.createPasteAction)(r)).then((function(){}))}else{var a=g.findControl(n[0]),i=et(t,a,a[re],d),o=g.findControlIndex(n[0])+1;g.addControl((0,U.createPasteAction)(i,{index:o})).then((function(){p.setSelect([i[0][Z]])}))}}),[]),st=(0,V.useCallback)((function(e){var t,n=document.querySelectorAll("[".concat(ke,"]"));if(n.length>0&&u()(n).call(n,(function(e){e.removeAttribute(ke)})),je.style.cursor||(je.style.cursor="url("+Ye+") 16 16, auto"),H||J(!0),je.dataset.batchFormat)return je.removeAttribute(Se),je.style.cursor="",void J(!1);e&&je.setAttribute(Se,"true");var r=Ue(),a=document.querySelector(b()(t="[".concat(Ae,'="')).call(t,r,'"]'));null==a||a.setAttribute(ke,"true")}),[H]),ft=(0,V.useCallback)((function(){var e=!M;L(e),e?(null==je||je.setAttribute(be,"true"),window.localStorage.setItem(io,"true")):(null==je||je.removeAttribute(be),window.localStorage.removeItem(io))}),[M]),gt=(0,V.useCallback)((function(){var e=!R,t=Ve(),n=e?"bold":"normal",r=_()(t).call(t,(function(e,t){var r;return b()(r=[]).call(r,(0,j.c)(e),[[t,{FontWeight:n}]])}),[]);g.batchUpdateControlPropertyValues((0,U.createUpdateAction)(r)),B(e)}),[R]),pt=(0,V.useCallback)((function(e,t){"ForeColor"===e?($(t),de(t)):"BackColor"===e&&(ie(t),ge(t));var n=Ve(),r=_()(n).call(n,(function(n,r){var a;return b()(a=[]).call(a,(0,j.c)(n),[[r,(0,A.c)({},e,t)]])}),[]);g.batchUpdateControlPropertyValues((0,U.createUpdateAction)(r))}),[]),vt=(0,V.useCallback)((function(e,t,n){e.stopPropagation(),"fore"===t?Fe(!n):Me(!n)}),[]),yt=mt()("".concat(Ke,"-operation-btn")),Ct=[z().createElement("div",{title:"".concat((0,U.getLangMsg)("formd.toolbarView.key0001"),"\nDelete"),onClick:!De&&ot,key:"Delete",className:mt()((0,A.c)((0,A.c)({},"".concat(Ke,"-operation-disable"),De),"".concat(Ke,"-last-operation"),!0),yt)},z().createElement(W.Icon,{prefix:"designericon",type:"shanchu"})),z().createElement("div",{title:"".concat(M?(0,U.getLangMsg)("formd.toolbarView.key0002"):(0,U.getLangMsg)("formd.toolbarView.key0003")),onClick:ft,key:"auxiliaryLine",className:mt()((0,A.c)({},"".concat(Ke,"-auxiliary-checked"),M),yt)},z().createElement(W.Icon,{prefix:"designericon",type:"fuzhuxian"}),M?z().createElement(W.Icon,{prefix:"designericon",type:"fuzhuxiangouxuan"}):null),z().createElement("div",{title:R?(0,U.getLangMsg)("formd.toolbarView.key0004"):(0,U.getLangMsg)("formd.toolbarView.key0005"),onClick:gt,key:"bold",className:mt()((0,A.c)((0,A.c)({},"".concat(Ke,"-last-operation"),!0),"".concat(Ke,"-bold-status"),R),yt)},z().createElement(W.Icon,{prefix:"designericon",type:"wenzijiacu"})),z().createElement("div",{title:(0,U.getLangMsg)("formd.toolbarView.key0006"),key:"foreColor",className:mt()((0,A.c)({},"".concat(Ke,"-no-hover-status"),!0),yt),ref:Ge},z().createElement(U.ColorPrefixIcon,{className:"".concat(Ke,"-color-editor"),type:"foreColor",color:ce,onClick:function(){pt("ForeColor",ce)}}),z().createElement(W.Icon,{prefix:"designericon",type:Ie?"xialajiantoufanxiang":"xialajiantou",className:"".concat(Ke,"-dropdown"),onClick:function(e){return vt(e,"fore",Ie)}}),z().createElement(U.ColorPicker,{triggerDom:Ge,showPanel:Ie,colorValue:Y,onClosePanel:function(){Fe(!1)},onChange:function(e){return pt("ForeColor",e)}})),z().createElement("div",{title:(0,U.getLangMsg)("formd.toolbarView.key0007"),key:"backColor",className:mt()((0,A.c)({},"".concat(Ke,"-no-hover-status"),!0),yt),ref:_e},z().createElement(U.ColorPrefixIcon,{className:"".concat(Ke,"-color-editor"),type:"backColor",color:fe,onClick:function(){pt("BackColor",fe)}}),z().createElement(W.Icon,{prefix:"designericon",type:Ne?"xialajiantoufanxiang":"xialajiantou",className:"".concat(Ke,"-dropdown"),onClick:function(e){return vt(e,"back",Ne)}}),z().createElement(U.ColorPicker,{triggerDom:_e,showPanel:Ne,colorValue:ae,onClosePanel:function(){Me(!1)},onChange:function(e){return pt("BackColor",e)}}))],ht=(0,V.useMemo)((function(){return{Delete:ot,auxiliaryLine:ft,bold:gt,foreColor:function(){return Fe(!0)},backColor:function(){return Me(!0)}}}),[ft,gt]),At=[];if(Ce){var Et=function(e){var t=564-eo(e).width,n=-1;return 4<t&&t<=36?n=3:36<t&&t<=84?n=2:84<t&&t<=120?n=1:120<t&&t<=168&&(n=0),n}(s);if(Et>=0){var xt=Qe()(Ct).call(Ct,Et);At=z().createElement(no,null,x()(xt).call(xt,(function(e){return z().createElement(ro,{key:e.key},e,(null==e?void 0:e.props._title)||(null==e?void 0:e.props.title))}))),va()(Ct).call(Ct,Et)}}return z().createElement("div",{className:Ke,ref:Oe},z().createElement("div",{title:b()(t="".concat((0,U.getLangMsg)("formd.toolbarView.key0008"),"\n")).call(t,ao?"⌘+Z":"Ctrl+Z"),className:mt()((0,A.c)({},"".concat(Ke,"-operation-disable"),!Je),yt),onClick:rt},z().createElement(W.Icon,{prefix:"designericon",type:"chexiao"})),z().createElement("div",{title:b()(n="".concat((0,U.getLangMsg)("formd.toolbarView.key0009"),"\n")).call(n,ao?"⌘+Y":"Ctrl+Y"),className:mt()((0,A.c)((0,A.c)({},"".concat(Ke,"-operation-disable"),!Xe),"".concat(Ke,"-last-operation"),!0),yt),onClick:nt},z().createElement(W.Icon,{prefix:"designericon",type:"zhongzuo"})),z().createElement("div",{title:(0,U.getLangMsg)("formd.toolbarView.key0010"),onClick:at,className:yt},z().createElement(W.Icon,{prefix:"designericon",type:"qianyi"})),z().createElement("div",{title:(0,U.getLangMsg)("formd.toolbarView.key0011"),onClick:it,className:mt()((0,A.c)({},"".concat(Ke,"-last-operation"),!0),yt)},z().createElement(W.Icon,{prefix:"designericon",type:"houyi"})),z().createElement("div",{title:b()(r="".concat((0,U.getLangMsg)("formd.toolbarView.key0012"),"\n")).call(r,ao?"⌘+X":"Ctrl+X"),onClick:!De&&lt,className:mt()((0,A.c)({},"".concat(Ke,"-operation-disable"),De),yt)},z().createElement(W.Icon,{prefix:"designericon",type:"jianqie"})),z().createElement("div",{title:b()(a="".concat((0,U.getLangMsg)("formd.toolbarView.key0013"),"\n")).call(a,ao?"⌘+C":"Ctrl+C"),onClick:!De&&ct,className:mt()((0,A.c)({},"".concat(Ke,"-operation-disable"),De),yt)},z().createElement(W.Icon,{prefix:"designericon",type:"fuzhi"})),z().createElement("div",{title:b()(i="".concat((0,U.getLangMsg)("formd.toolbarView.key0014"),"\n")).call(i,ao?"⌘+V":"Ctrl+V"),onClick:dt,className:mt()((0,A.c)({},"".concat(Ke,"-last-operation"),!0),yt)},z().createElement(W.Icon,{prefix:"designericon",type:"zhantie"})),z().createElement("div",{title:(0,U.getLangMsg)("formd.toolbarView.key0015"),onClick:function(){return st()},onDoubleClick:function(){return st(!0)},className:mt()((0,A.c)({},"".concat(Ke,"-format-status"),H),yt)},z().createElement(W.Icon,{prefix:"designericon",type:"geshishua"})),z().createElement("div",{title:(0,U.getLangMsg)("formd.toolbarView.key0016"),onClick:!De&&ut,className:mt()((0,A.c)({},"".concat(Ke,"-operation-disable"),De),yt)},z().createElement(W.Icon,{prefix:"designericon",type:"zhongfu"})),Ct,Ce&&z().createElement(W.Dropdown,{menu:At,onItemClick:function(e){return ht[e]()},trigger:"click"},z().createElement("div",{className:yt},z().createElement(W.Icon,{prefix:"designericon",type:"gengduo"}))))},lo=function(){var e=(0,V.useContext)(U.ConfigContext),t=e.getPrefixCls,n=e.prefixCls,r=t&&t(n),a="".concat(r,"-top-view-main");return z().createElement(U.ViewHeader,{content:z().createElement("div",{className:"".concat(r,"-main-view-toolbar")},z().createElement(oo,null)),portalId:a})},co=n(97440),uo=n.n(co),so=n(64248),fo=n.n(so),go=n(6908),po=n.n(go);function mo(e){var t=e.selectedCtrlNode,n=e.callback;if(t&&!(t.style.zIndex<0)){var r=t.getBoundingClientRect();n&&n(r)}}var vo=function(e){var t=e.selectedCtrlNode,n=e.callback,r=(0,V.useRef)(null),a=(0,V.useRef)(!1),i=(0,V.useRef)(null),o=function e(){mo({selectedCtrlNode:t,callback:n}),a.current||(r.current=window.requestAnimationFrame(e))};(0,V.useEffect)((function(){r.current=window.requestAnimationFrame((function(){mo({selectedCtrlNode:t,callback:n})}))}),[t]),(0,V.useEffect)((function(){var e=function(){a.current=!1,i.current&&clearTimeout(i.current),i.current=w()((function(){a.current=!0}),500),r.current=window.requestAnimationFrame(o)};return document.addEventListener("scroll",e,!0),function(){document.removeEventListener("scroll",e,!0),r.current&&window.cancelAnimationFrame(r.current)}}),[])},yo=["getKdesignerApi"],Co=["TextField","ItemClassTypeField","TextAreaField","LargeTextField","MuliLangTextField","IntegerField","DecimalField","BigIntField","DateField","DateTimeField","DateRangeField","TimeField","TimeRangeField","ComboField","MulComboField","BillNoField","BillStatusField","BillTypeField","BasedataField","MulBasedataField","AssistantField","BasedataPropField","ItemClassField","OrgField","MaterielField","CurrencyField","CityField","UnitField","PriceField","QtyField","AmountField","GroupField","FlexField","AdminDivisionField","AttachmentCountField","PrintCountField","BaseUnitqtyField","AccountField","CustomerField","SupplierField","EmailField","TelephoneField","UserField","CreaterField","ModifierField","CreateDateField","UserAvatarField","I18nNameField","ParentBasedataField","ModifyDateField"],ho=function(e){var t=e.hoverimg,n=e.prefixCls,r=Yn(n),a=(0,V.useRef)({}),i=(0,V.useRef)(null),o=(0,V.useRef)(null);return(0,V.useEffect)((function(){o.current&&(o.current.style.width="",o.current.style.height="")}),[t]),t?z().createElement("div",{className:r("hover-item"),ref:i},z().createElement("img",{src:t,ref:o,onLoad:function(e){var t=e.target,n=t.width/2,r=t.height/2;if(a.current={width:Math.max(n+48,240),height:Math.max(r+48,160)},i.current){var l=i.current.parentNode;i.current.style.width=a.current.width+"px",i.current.style.height=a.current.height+"px",l.style.width=a.current.width+"px",l.style.height=a.current.height+"px",l.style.maxWidth=a.current.width+"px",l.style.maxHeight=a.current.height+"px",l.style.padding="0"}o.current&&(Math.min(n,r)===n?o.current.style.width=n+"px":o.current.style.height=r+"px")}})):z().createElement("span",null,(0,U.getLangMsg)("formd.rightView.key0012"))},Ao=(0,V.forwardRef)((function(e,t){e.hoverimg;var n=e.name,r=e.onSelect,a=e.selected,i=e.prefixCls,o=e.onMouseOutItem,l=e.onMouseOverItem,c=e.item,d=e.image,u=Yn(i);return z().createElement("div",{ref:t,className:mt()(u("item"),(0,A.c)({},u("selected-item"),a)),onMouseMove:function(){return l()},onMouseOut:o,onClick:function(){return r(c)}},z().createElement("img",{src:d}),z().createElement("span",{title:n},n))})),Eo=function(e){var t=e.schema,n=e.prefixCls,r=e.onSelect,a=e.isSchemaItemSelect,i=t.items,o=(0,V.useState)(null),l=(0,q.c)(o,2),c=l[0],d=l[1],u=function(e){return r(e)},s=(0,V.useState)(!1),f=(0,q.c)(s,2),g=f[0],p=f[1],m=(0,V.useRef)(0),v=function(){return p(!1)},y=Yn(n),C=(0,V.useRef)(null);return z().createElement("div",{className:y("container"),ref:C},x()(i).call(i,(function(e,t){var r=z().createElement(Ao,(0,h.c)({key:e.name},e,{item:e,prefixCls:n,onSelect:u,selected:a(e),onMouseOverItem:function(){return function(e,t){var n=e.hoverimg;m.current=Math.max(0,3*(Math.ceil((t+1)/3)-1)),c!==n&&d(n),!1===g&&p(!0)}(e,t)},onMouseOutItem:v})),i=z().createElement(W.Tooltip,{popperClassName:"scheme-list-popper",visible:g,tip:z().createElement(ho,{prefixCls:n,hoverimg:c}),arrowSize:0,mouseEnterDelay:1,mouseLeaveDelay:.5,placement:"leftTop"},r);return m.current===t?i:r})))},xo=["Inherit"],Io=function(e){var t=e.getKdesignerApi,n=(0,C.c)(e,yo),r=t();(0,U.useDataChangeForceUpdateEffect)(r);return z().createElement(Eo,(0,h.c)({},n,{onSelect:function(e){var t=Ui(r),n=Hi(r);r.data.batchUpdateControlPropertyValues((0,U.createUpdateAction)([[t,ji(Wi(e,r),n,r)]]))},isSchemaItemSelect:function(e){var t,n,i=Hi(r),o=Wi(e,r),l=[],c=[],d=i._Type_;return u()(t=a()(o)).call(t,(function(e){!Ki()(i,e)&&(0,Ze.isEqual)(r.meta.getControlPropertyDefaultValue(d,e),o[e])&&l.push(e)})),u()(n=a()(i)).call(n,(function(e){if(!Ki()(o,e)){var t=r.meta.getControlMetaProperty(d,e);if((0,Ze.isEmpty)(t))return;"biz"!==t.TabGroup&&t.TabGroup||c.push(e)}})),(0,Ze.isEqual)((0,Ze.omit)(o,l),(0,Ze.omit)(i,b()(xo).call(xo,c)))}}))},bo=function(){var e,t=(0,V.useContext)(pe),n=t.getKdesignerApi,r=t.getCommonUtil,a=t.getDesignerModelType,i=t.prefixCls,o=n(),l=(0,V.useState)(null),c=(0,q.c)(l,2),d=c[0],u=c[1],s=r().getTemplateScheme,f=Hi(o);return(0,V.useEffect)((function(){var e=Hi(o),t=a(),n=s,r=e.FieldType||e._Type_;N()(Co).call(Co,r)&&(r=e._Type_),n(t,r).then((function(e){var t,n=null==e||null===(t=e[0])||void 0===t||null===(t=t.children)||void 0===t?void 0:t[0];u(n)}))}),[f.FieldType||f._Type_]),{schema:d,setSchema:u,SchemeComponent:d&&(null===(e=d.items)||void 0===e?void 0:e.length)&&z().createElement(Io,{schema:d,getKdesignerApi:n,prefixCls:Xn(i,"schema")})}};function ko(e,t){var n=a()(e);if(o()){var r=o()(e);t&&(r=K()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function So(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?u()(n=ko(Object(a),!0)).call(n,(function(t){(0,A.c)(e,t,a[t])})):f()?p()(e,f()(a)):u()(r=ko(Object(a))).call(r,(function(t){v()(e,t,c()(a,t))}))}return e}function Fo(e,t){var n=void 0!==uo()&&fo()(e)||e["@@iterator"];if(!n){if(qe()(e)||(n=function(e,t){var n;if(!e)return;if("string"==typeof e)return wo(e,t);var r=Qe()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Nr()(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wo(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw i}}}}function wo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var To=["FieldId","EntryId","CardEntryId"],No=function(e){var t,n,r,a,i=e.field,o=e.addControlId,l=e.clearAddControlId,c=e.rootDom,d=e.isDataWithMetaMode,u=i.Id,s=i._Type_,f=(i.FieldType,i.FieldName,(0,V.useState)(o===u)),g=(0,q.c)(f,2),p=g[0],m=g[1],v=(0,V.useContext)(pe),y=v.getKdesignerApi,C=v.getModel,A=v.designerConfig,E=(0,V.useContext)(U.GlobalConfigContext).filterProperty,I=(0,V.useMemo)((function(){return y()}),[]),k=I.meta,F=I.data,T=I.aliasData,M=F.getData(),L=k.getDefaultData(s),P=k.getControlMeta(s),D=(0,U.getModelData)(P.Properties,So(So({},M),{},{field:So(So({},L),i)}),{getModel:C}),R=po()(t=K()(n=function(e,t,n){var r,a=[],i=Fo(e);try{for(i.s();!(r=i.n()).done;){var o=r.value,l=o.Nodes,c=void 0===l?[]:l,d=o.Key;if(N()(t).call(t,d)){var u,s=Fo(c);try{for(s.s();!(u=s.n()).done;){var f=u.value;!1!==f.Visible&&n(f)&&a.push(f)}}catch(e){s.e(e)}finally{s.f()}}}}catch(e){i.e(e)}finally{i.f()}return a}(D,["BasicSetting"],(function(e){return!d||!N()(To).call(To,e.Id)}))).call(n,(function(e){return!E(i,e)}))).call(t,(function(e,t){return e.GroupSubSeq-t.GroupSubSeq}));if("2"===M.devType){var B,G=A.enableExtLimits,_=void 0!==G&&G,O=M.Items,H=M.extElements,j=void 0===H?[]:H,J=(null===(B=S()(j).call(j,(function(e){return"Field"===e.Type})))||void 0===B?void 0:B.Items)||[];J=x()(J).call(J,(function(e){var t,n;e.Id===(null===(t=O[0])||void 0===t?void 0:t.PkId)&&(e.Id=null===(n=O[0])||void 0===n?void 0:n.Id);return e}));var Q=S()(J).call(J,(function(e){return e.Id===u})),Z=(null==Q?void 0:Q.Props)||[],X=F.findControl(u)||{};R=x()(R).call(R,(function(e){var t,n=null===(t=S()(Z).call(Z,(function(t){return t.Id===e.Id})))||void 0===t?void 0:t.LockType;return void 0===n&&_&&X.Inherit&&(n=e.LockType),"lock"===n?So(So({},e),{},{Locked:!0}):e}))}var Y,$=(0,V.useState)("1"),ee=(0,q.c)($,2),te=ee[0],ne=ee[1],re=(0,V.useMemo)((function(){return C()}),[]),ae=(Y=i.FieldId||i.EntryId||i.CardEntryId,function(e){return re.getEntityPropertyValue(Y,e)}),ie=S()(R).call(R,(function(e){var t;return N()(t=["EntryId","CardEntryId","FieldId"]).call(t,e.Id)})),oe=i.FieldId||i.EntryId||i.CardEntryId,le=oe?ae("Name")||oe:"",ce=oe?ae("Key")||oe:"",de=oe?b()(r="".concat(le,"(")).call(r,ce,")"):"",ue=(0,V.useRef)(null),se=(0,V.useRef)(null),fe=(0,V.useState)(0)[1],ge=bo(),me=ge.schema,ve=ge.SchemeComponent;(0,V.useEffect)((function(){var e=T.addAliasDataChangeListener((function(){fe((function(e){return e+1}))}));return function(){e()}}),[]),(0,V.useEffect)((function(){var e=function(e){var t;"basic-setting"!==(null===(t=e.target)||void 0===t?void 0:t.className)&&m(!1)},t=w()((function(){document.addEventListener("scroll",e,!0)}),500);return function(){p&&(l(),m(!1)),t&&clearTimeout(t),t=null,document.removeEventListener("scroll",e,!0)}}),[]),(0,U.useOnClickOutside)([ue,se],(function(e){var t,n=document.getElementById("dialogShow");n&&null!=n&&n.contains(e.target)||"kdesigner-select-item-option-content"===(null===(t=e.target)||void 0===t?void 0:t.className)||p&&(m(!1),c.focus())}));var ye=z().createElement(z().Fragment,null,de&&z().createElement(W.Icon,{prefix:"designericon",type:"shuliang"}),de),Ce=(0,V.useCallback)((function(){m(!1),c.focus()}),[c]);return z().createElement(z().Fragment,null,z().createElement(U.DropDownPanel,{scrollHidden:!0,ref:se,visible:p,placement:"bottomLeft",popperClassName:"formdesigner-quick-setting-dropdown",content:z().createElement("div",{className:"setting-panel",ref:ue},z().createElement(W.Icon,{prefix:"designericon",type:"guanbi",className:"close-btn",onClick:Ce}),z().createElement(W.Tabs,{activeKey:te,onChange:function(e){ne(e)}},z().createElement(W.Tabs.TabPane,{key:"1",tab:(0,U.getLangMsg)("formd.mainview.key0001")},z().createElement("div",{className:"basic-setting"},x()(R).call(R,(function(e){return z().createElement(U.PropertyViewItem,(0,h.c)({},e,{key:e.Id,field:i,className:"kdesigner-right-view"}))})))),me&&(null===(a=me.items)||void 0===a?void 0:a.length)&&z().createElement(W.Tabs.TabPane,{key:"2",tab:(0,U.getLangMsg)("formd.mainview.key0002")},z().createElement("div",{className:"schema-setting"},ve))))},z().createElement("span",{className:"operation-bar-item",onClick:function(e){e.stopPropagation(),m((function(e){return!e})),c.focus()},title:(0,U.getLangMsg)("formd.mainview.key0003")},z().createElement(W.Icon,{prefix:"designericon",type:"shezhi"}))),!d&&ie&&z().createElement("span",{className:"datasource-tips"},oe?ye:(0,U.getLangMsg)("formd.mainview.key0004")))},Mo="1050",Lo="-1";var Po=Be()?"⌘+K":"Ctrl+K",Do=(0,V.memo)((function(e){var t,n=e.field,r=e.rootDom,a=e.kdesignerApi,i=e.addControlId,o=e.clearAddControlId,l=e.containerDom,c=e.isDataWithMetaMode,d=n.Id,s=n._Type_,f=n.FieldType,g=n.ParentId,p=a.data,m=a.selection,v=a.meta,y=(0,V.useContext)(pe),C=y.invokeAction,h=y.clientParams,A=y.getModel,E=(0,V.useState)(!1),I=(0,q.c)(E,2),k=I[0],S=I[1],F=(0,V.useRef)(null),w=r.getBoundingClientRect(),T=p.getData(),M=v.getControlMeta(f||s),L=(p.findControl(g)||{})._Type_,P=M.Inside,D="GridFlatPanelAp"===L||N()(t=["GridFlatPanelAp","FlatFieldAp"]).call(t,s);(0,V.useEffect)((function(){var e=F.current;if(e){var t=function(e,t){if(t){var n=0,r=new window.IntersectionObserver((function(e){u()(e).call(e,(function(e){if(e.intersectionRatio!==n){if(e.intersectionRatio<1&&e.intersectionRatio>0){var r=e.boundingClientRect,a=e.intersectionRect;n>e.intersectionRatio&&r.top<a.top||r.bottom==a.bottom&&r.top<a.top?(t.setAttribute("data-visible","true"),t.style.zIndex=Lo):(t.setAttribute("data-visible","true"),t.style.zIndex=Mo)}else e.intersectionRatio>0?(t.setAttribute("data-visible","true"),t.style.zIndex=Mo):(t.setAttribute("data-visible","false"),t.style.zIndex=Lo);n=e.intersectionRatio}}))}),{threshold:[1e-6,.999999],rootMargin:"-5px 0px 0px 0px"});return r.observe(e),r}}(l,e);return function(){t.disconnect()}}}),[F.current,l]);var R=(0,V.useCallback)((function(e){var t=F.current;if(t&&r){t.getBoundingClientRect().width;var n=e.left,a=e.top,i=(e.width,w.left),o=w.top,l=(w.width,w.height),c=n<i?i:n,d=a-24-2;t.style.left="".concat(c,"px"),t.style.top="".concat(d,"px");var u=d>=o-24-2&&d<=o+l;"true"===t.dataset.visible&&(u&&t.style.zIndex===Lo?t.style.zIndex=Mo:u||t.style.zIndex!==Mo||(t.style.zIndex=Lo))}}),[F.current,r,w]);if(vo({selectedCtrlNode:l,callback:R}),(0,U.useResizeObserver)(r,(function(){mo({selectedCtrlNode:l,callback:R})})),!l||"ui-designer-root"===l.getAttribute("id")||!r)return null;return P?null:z().createElement("div",{ref:F,className:"operation-bar-warp"},h.enableGpt&&z().createElement("div",{className:"operation-bar-item gpt-icon",onClick:function(){var e=m.getSelection(),t=A(),n=x()(e).call(e,(function(e){return{entitymeta:t.getFieldInfo(e,"entitymeta"),formmeta:t.getFieldInfo(e,"formmeta")}}));C(qi,[{selectionControls:n,activeControlId:d}])},onMouseEnter:function(){return S(!0)},onMouseLeave:function(){return S(!1)}},z().createElement("div",{className:"gpt-rk-icon"}),k&&z().createElement("span",{className:"gpt-shortcut-key"},Po)),!D&&z().createElement("div",{className:"operation-bar-left"},z().createElement("span",{className:mt()(["operation-bar-item"]),onClick:function(e){if(r.focus(),!D){e.stopPropagation();var t=m.getSelection();if(t.length>1){var a=_()(t).call(t,(function(e,t){var n=p.findControl(t);return b()(e).call(e,et(T,n,n[re],c))}),[]);p.addControl((0,U.createPasteAction)(a)).then((function(){}))}else{var i=et(T,n,n[re],c),o=p.findControlIndex(d)+1;p.addControl((0,U.createPasteAction)(i,{index:o})).then((function(){m.setSelect([i[0][Z]])}))}}},title:(0,U.getLangMsg)("formd.toolbarView.key0016")},z().createElement(W.Icon,{prefix:"designericon",type:"zhongfu"})),z().createElement("span",{className:mt()(["operation-bar-item"]),onClick:function(e){if(r.focus(),!D){e.stopPropagation();var t=p.getNextSelectedControlId(d),n=p.getParentControlId(d),a=p.getRootId();p.deleteControl((0,U.createDeleteAction)(d)).then((function(){var e=p.findControl(t)||p.findControl(n);t=(null==e?void 0:e.Id)||a,m.setSelect([t])}))}},title:(0,U.getLangMsg)("formd.toolbarView.key0001")},z().createElement(W.Icon,{prefix:"designericon",type:"shanchu"}))),z().createElement(No,{rootDom:r,field:n,addControlId:i,clearAddControlId:o,isDataWithMetaMode:c}))})),Ro=function(e){var t=(0,V.useContext)(pe),n=t.getKdesignerApi,r=t.isDataWithMetaMode,a=(0,V.useMemo)((function(){return n()}),[]),i=a.data,o=a.selection,l=(a.aliasData,o.getSelection()),c=i.getRootId(),d=document.querySelector('[data-control-id="'.concat(c,'"]')),u=(0,V.useRef)("");(0,U.useSelectionChangeForceUpdateEffect)(a),(0,U.useDataChangeForceUpdateEffect)(a);var s=(0,V.useCallback)((function(e){u.current=e}),[]),f=(0,V.useCallback)((function(){u.current=""}),[]);return(0,V.useEffect)((function(){return U.eventBus.on("add-control-id",s),function(){U.eventBus.off("add-control-id",s)}}),[]),z().createElement(z().Fragment,null,x()(l).call(l,(function(e){var t,n=i.findControl(e),o=n.Hidden,l=n.Invisible,c=n.FullLine,s=document.querySelector('[data-control-id="'.concat(e,'"]'));return o||l?null:z().createElement(Do,{field:n,rootDom:d,containerDom:s,kdesignerApi:a,key:b()(t="operation-bar-item-".concat(e,"-")).call(t,c),addControlId:u.current,clearAddControlId:f,isDataWithMetaMode:r})})))},Bo=n(96416),Go=n.n(Bo),_o=n(82504),Oo=function(e){var t=e.name,n=e.id,r=e.onSelect,a=e.prefixCls,i=e.isActive,o=Yn(a);return z().createElement("div",{className:mt()(o("item"),(0,A.c)({},o("active-item"),i)),onClick:function(){r({name:t,id:n})}},z().createElement("div",{className:o("item-text")},z().createElement("span",null,t)),z().createElement("div",{className:o("item-text-dumb-node")}))},Ko=function(e){var t=e.items,n=e.onSelect,r=e.prefixCls,a=void 0===r?"":r,i=Yn(a),o=(0,V.useState)(!1),l=(0,q.c)(o,2),c=l[0],d=l[1],u=(0,V.useState)(!1),s=(0,q.c)(u,2),f=s[0],g=s[1],p=(0,V.useRef)(null),m=(0,V.useRef)(null),v=(0,V.useCallback)((function(e,t){var n=e.offsetWidth,r=t.offsetWidth;if(r>n){var a=e.scrollLeft;a>0?a+n>=r?(g(!1),d(!0)):(g(!0),d(!0)):(d(!1),g(!0))}else d(!1),g(!1)}),[]);(0,V.useEffect)((function(){var e=new _o.c((function(e){var t=(0,q.c)(e,1)[0],n=t.target.parentElement;U.console.log("resize-----"),v(n,t.target)}));return e.observe(m.current),function(){e.disconnect()}}),[]);var y=function(e){U.console.log("Scroll resize-----");var t=p.current,n=m.current;v(t,n)},C=function(e){var t=p.current.offsetWidth;p.current.scrollLeft=Math.max(0,p.current.scrollLeft+("left"===e?-t:t))},A=function(e,t){t.stopPropagation();U.console.log(t,t.deltaY,t.deltaMode);var n=.4*t.deltaY;p.current.scrollLeft=Math.max(0,p.current.scrollLeft+("left"===e?-n:n))};return(0,V.useEffect)((function(){var e=p.current,t=m.current,n=e.offsetWidth,r=t.offsetWidth;r>n&&(e.scrollLeft=r-n)}),[t]),z().createElement("div",{className:i("container-box"),onScroll:y},c&&z().createElement("div",{className:i("left-arrow"),onClick:function(){return C("left")},onWheel:function(e){return A("left",e)}},z().createElement(W.Icon,{type:"zuoqie",prefix:"designericon"})),z().createElement("div",{className:i("container"),ref:p,onScroll:y},z().createElement("div",{className:i("list"),ref:m},x()(t).call(t,(function(e,r){return z().createElement(Oo,(0,h.c)({},e,{onSelect:n,prefixCls:a,key:e.id,isActive:r===t.length-1}))})))),f&&z().createElement("div",{className:i("right-arrow"),onClick:function(){return C("right")},onWheel:function(e){return A("right",e)}},z().createElement(W.Icon,{type:"youqie",prefix:"designericon"})))},Vo=function(){var e=(0,V.useContext)(me),t=e.prefixCls,n=(0,e.getKdesignerApi)(),r=(0,V.useCallback)((function(){var e,t=n.selection.getActiveSelectedId(),r=n.data.getAllParentControls(t,!0);return x()(e=Go()(r).call(r)).call(e,(function(e){return{id:e.Id,name:e.Name}}))}),[]),a=(0,V.useState)(r),i=(0,q.c)(a,2),o=i[0],l=i[1];(0,V.useEffect)((function(){var e=n.selection.addSelectChangeListener((function(){var e=r();l(e)}));return function(){e()}}),[]);var c=(0,V.useCallback)((function(e){var t=e.id;n.selection.setSelect([t])}),[]);return z().createElement(Ko,{items:o,onSelect:c,prefixCls:Xn(t,"breadcrumb")})},zo=(0,V.memo)((function(e,t){var n=e.data,r=void 0===n?{}:n,a=(e.meta,(0,V.useState)(r)),i=(0,q.c)(a,2),o=i[0],l=i[1],c=(0,V.useContext)(pe),d=c.getKdesignerApi,s=c.prefixCls,f=c.getDataRef,g=c.invokeAction,p=c.onRootPanelMount,m=(0,V.useMemo)((function(){return d()}),[]),v=m.data,y=m.selection,C=(m.meta,(0,(0,V.useContext)(pe).getCommonUtil)()),h=C.fixColor,A=C.mergeCommonClassNames,E=f(),x=E.designer,I=E.isPC,k=(0,V.useMemo)((function(){return!(!x||!N()(x).call(x,"List"))}),[x]),S=(0,V.useCallback)((function(e){var t=e.value,n=e.type;if(l(t),"Move"===n){var r=y.getSelection(),a=r[0];if(!("FieldsetPanelAp"===v.getParentControl(a)[ee]))return;w()((function(){u()(r).call(r,(function(e){var t,n;return L()(t=(0,j.c)(document.querySelectorAll(b()(n="[".concat(Ae,'="')).call(n,e,'"]')))).call(t,(function(e){return e.setAttribute(Ee,"true")}))}))}),100)}}),[]),F=(0,V.useCallback)((function(e){var t=e.value,n=v.findControl(t),r=Q()(n).call(n,(function(e){return"EntryAp"===e._Type_}));r&&g(aa,[]),Li(e)}),[]),T=(0,V.useMemo)((function(){return{prefixCls:"kd"}}),[]);(0,V.useEffect)((function(){var e=y.addSelectChangeListener(F),t=v.addDataChangeListener(S);return function(){e(),t()}}),[]),(0,V.useEffect)((function(){Oe(I)}),[I]);var M=o[ae][0],P=Mi(M),D=at(),R=(0,V.useRef)(o);R.current=o;var B=function(){return R.current},G=(0,V.useRef)(null);Qi(G),Zi(M);var _=(0,V.useMemo)((function(){return{getData:B,fixColor:h,mergeCommonClassNames:A,prefixCls:s,getKdesignerApi:d,isListMeta:k,onRootPanelMount:p}}),[s,k]);return z().createElement(z().Fragment,null,z().createElement(me.Provider,{value:_},z().createElement(lo,null),z().createElement(W.ConfigProvider,{value:T},z().createElement("div",{className:"".concat(s,"-main-view-container"),ref:G},z().createElement("div",{className:"".concat(s,"-pc-view")},z().cloneElement(P,{key:M[Z],onClick:D}))),z().createElement(Vo,null)),z().createElement(Ro,null)))}));zo.tabKey="main-view",zo.getTabName=function(){return(0,U.getLangMsg)("formd.leftView.key0002")},zo.displayName="main-view";var Uo=zo,Ho=function(e){e.preventDefault(),e.stopPropagation()},Wo=function(){var e=(0,V.useContext)(pe).getKdesignerApi,t=(0,V.useMemo)((function(){return e()}),[]),n=t.data,r=t.views,a=t.selection,i=(t.meta,n.getRootId()),o=(0,V.useCallback)((function(e){!function(e,t){"outline"!==(It=null==t?void 0:t.getViewActiveKey("left"))&&t&&t.setViewActiveKey("left")("outline"),bt=bt||It}(0,r)}),[]),l=(0,V.useCallback)((function(e){!function(e){var t;if(!Q()(St).call(St,(function(t){return De()(e).call(e,t)>=0}))){var n=e.replace("/","\\/").replace("=","\\="),r=document.querySelector(".kdesigner-tree-node-item-id".concat(n," .kdesigner-tree-node-root"));if(r){var a=null==r?void 0:r.className;N()(a).call(a,xt)||(r.className=b()(t="".concat(a," ")).call(t,xt))}}}(e)}),[]),c=(0,V.useCallback)((function(e){var t;Ho(e);var n=document.querySelector(b()(t="[".concat(Ae,"='")).call(t,i,"']"));null==n||n.removeAttribute(Ne)}),[]);(0,V.useEffect)((function(){return U.eventBus.on("drag-control-tab",o),U.eventBus.on("drag-control_".concat(i),l),document.body.addEventListener("dragend",c),function(){U.eventBus.off("drag-control-tab",o),U.eventBus.off("drag-control_".concat(i),l),document.body.removeEventListener("dragend",c)}}),[]);var d=(0,V.useCallback)((function(e){var t,r=e.event,a=e.node;r.stopPropagation();var o=a.nodeKey;o=o.substr(2);var l=document.querySelector(b()(t="[".concat(Ae,"='")).call(t,i,"']"));null==l||l.setAttribute(Ne,o);var c=n.findControl(o),d=c._Type_,u=c.Name;Et(r,d,u)}),[]),u=(0,V.useCallback)((function(e){var t=e.event;e.node;Ho(t)}),[]),s=(0,V.useCallback)((0,Ze.debounce)((function(e){var t=e.event,n=e.node;Ho(t),U.eventBus.emit("drag-tree-node",n.key)}),100),[]),f=(0,V.useCallback)((function(e){var t=e.event;e.node;Ho(t)}),[]),g=(0,V.useCallback)((function(e){var t,r=e.event,o=e.node;Ho(r);var l=o.key,c=document.querySelector(b()(t="[".concat(Ae,"='")).call(t,i,"']")).dataset.outlineDragTreeNode;n.swapControl((0,U.createSwapAction)({origin:c,target:Qe()(l).call(l,2)})).then((function(e){a.setSelect([c])}))}),[]);return{onDragStart:d,onDragEnter:u,onDragOver:s,onDragLeave:f,onDrop:g,onDragEnd:(0,V.useCallback)((function(e){var t,n=e.event,r=e.node;Ho(n);var a=document.querySelector(b()(t="[".concat(Ae,"='")).call(t,i,"']"));null==a||a.removeAttribute(Ne),U.eventBus.emit("drag-tree-node",r.key)}),[])}},jo="designericon designericon-",qo=function(e,t){return(0,Ze.property)(t)(e)},Jo={Direction:{row:"pailiefangshi-shuiping",column:"pailiefangshi-chuizhi"}},Qo=function(e){var t=e.originProp,n=e.path,r=e.pathLength,a=e.inputMeta;if("Editor"===n[r-3]){var i,o=qo(a,Qe()(n).call(n,0,-2)),l=t.id,c=t.name,d={};l&&c&&(0,h.c)(d,{Value:l,Id:l,Name:c});var u,s=Jo[null==o?void 0:o.PropertyName];if((null==o?void 0:o.Group)===(0,U.getLangMsg)("formd.rightView.key0002")&&s&&s[l])d.IconClassName=b()(u="".concat(jo)).call(u,s[l]);return N()(i=["AlignItems","AlignContent","JustifyContent"]).call(i,null==o?void 0:o.PropertyName)&&"default"===l&&(0,h.c)(d,{Value:"flex-start",Id:"flex-start"}),d}},Zo=n(83789);function Xo(e,t){var n=a()(e);if(o()){var r=o()(e);t&&(r=K()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yo(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?u()(n=Xo(Object(a),!0)).call(n,(function(t){(0,A.c)(e,t,a[t])})):f()?p()(e,f()(a)):u()(r=Xo(Object(a))).call(r,(function(t){v()(e,t,c()(a,t))}))}return e}var $o={BizappId:"bizappId",Name:"name",Id:"id",appNum:"formId",Key:"key",EntityId:"rootEntityId"},el=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.formmeta,i=e.entitymeta,o=e.devType,l={};if(u()(t=a()(r)).call(t,(function(e){r[e]&&$o[e]&&(l[$o[e]]=r[e])})),l[ae]=r.Items,l.extElements=null==i?void 0:i.ExtElements,l.devType=o||r.DevType,n){var c,d,s=null===(c=i.Items[0])||void 0===c?void 0:c.Id;l.EntityData={Items:x()(d=i.Items).call(d,(function(e){return e.Id===s||e.ParentId?e:Yo(Yo({},e),{},{ParentId:s})}))}}return i?(0,Zo.cp)(l,(function(e){var t;u()(t=e[ae]).call(t,(function(e){var t=e.FieldId||e.EntryId||e.CardEntryId;if(t){var n,r=S()(n=i.Items).call(n,(function(e){return e.Id===t}));r&&(e.FieldType=r._Type_)}}))})):l};function tl(e,t,n){var r=(0,j.c)(e[ae]),i=[],o=[],l={},c=[];return u()(r).call(r,(function(e,r){var o,d,s,f,g=e.Id,p=e.Name,m=e.ParentId,v=e.Key,y=e.Hidden,C=e.Invisible,h={key:g,title:p||v||g,parentId:m,Hidden:y||C};null!=n&&n.prefix&&(h=Yo(Yo({},h),{},{key:b()(d="".concat(n.prefix)).call(d,g),parentId:m?b()(s="".concat(n.prefix)).call(s,m):m}));(t&&(h.title=b()(o="".concat(p,"（")).call(o,v,"）")),n&&r>0)&&u()(f=a()(n)).call(f,(function(t){h[t]=e._Type_}));i.push(h),h.parentId?c.push(h):l=Yo({},h)})),function e(t,n,r){var a=(0,j.c)(n),i=0;t.parentId||o.push(Yo(Yo({},t),{},{level:r})),u()(n).call(n,(function(n,l){if((null==n?void 0:n.parentId)===t.key){var c,d=b()(c="".concat(r,"_")).call(c,i++);o.push(Yo(Yo({},n),{},{level:d})),va()(a).call(a,l,1,void 0),t.children?t.children.push(n):t.children=[n],e(n,a,d)}}))}(l,c,"0"),l.searchData=o,[l]}function nl(e,t,n,r){var a=r.isShowKey,i=r.isListMeta,o=[];return u()(e).call(e,(function(e){var r,l={key:e.Id,title:e.Name,type:e.Type,createType:e.CreateType};(n.push(Yo({},l)),a)&&(l.title=b()(r="".concat(e.Name,"（")).call(r,e.Id,"）"));e.Items&&(l.children=nl(e.Items,t,n,{isShowKey:a,isListMeta:i})),t.push(e.Id),o.push(l)})),o}function rl(e,t){var n=t.isShowKey,r=t.isListMeta,a=[],i=[];return{treeData:nl([Yo({},e)],a,i,{isShowKey:n,isListMeta:r}),ids:a,flattenTrees:i}}var al={},il="id",ol="",ll=(0,V.memo)((0,V.forwardRef)((function(e,t){var n=e.data,r=(0,V.useContext)(U.ConfigContext),a=r.getPrefixCls,i=r.prefixCls,o=(0,V.useContext)(pe).getKdesignerApi,l=(0,V.useMemo)((function(){return o()}),[]),c=l.data,d=l.selection,s=c.getRootId(),f=(0,V.useState)(!0),g=(0,q.c)(f,2),p=g[0],m=g[1],v=(0,V.useState)(!1),y=(0,q.c)(v,2),C=y[0],h=y[1],A=(0,V.useState)([s]),E=(0,q.c)(A,2),I=E[0],k=E[1],S=(0,V.useState)(600),F=(0,q.c)(S,2),w=F[0],T=F[1],M=(0,V.useState)(void 0),L=(0,q.c)(M,2),P=L[0],R=L[1],G=(0,V.useRef)(null),O=(0,V.useRef)(null),H=(0,V.useState)(n),J=(0,q.c)(H,2),Q=J[0],X=J[1],$=(0,V.useRef)(null);Qi(G,!0);var te=Wo(),ne=te.onDragStart,re=te.onDragEnter,ie=te.onDragOver,oe=te.onDragLeave,le=te.onDrop,ce=te.onDragEnd,de=a&&a(i,"outline"),ue=(0,V.useState)([]),se=(0,q.c)(ue,2),fe=se[0],ge=se[1],me=(0,V.useMemo)((function(){var e="".concat(de,"-search-prefix-icon");return z().createElement(W.Icon,{prefix:"designericon",type:"sousuo",className:e})}),[de]),ve=(0,V.useCallback)((function(e){var t=e.value,n=_()(t).call(t,(function(e,t){var n,r;return b()(n=[]).call(n,(0,j.c)(e),[b()(r="".concat(il)).call(r,t)])}),[]);k(n);var r=(0,j.c)(fe);u()(t).call(t,(function(e){for(var t,n=e;n!==s&&""!==n;){var a,i=b()(a="".concat(il)).call(a,n);!N()(r).call(r,i)&&r.unshift(i),n=c.getParentControlId(n)}var o=b()(t="".concat(il)).call(t,s);!N()(r).call(r,o)&&r.unshift(o)})),ge(r)}),[s,fe]),ye=(0,V.useCallback)((function(e){var t=e.value;X(t)}),[]);(0,V.useEffect)((function(){var e=d.addSelectChangeListener(ve),t=c.addDataChangeListener(ye);return function(){e(),t()}}),[ve]),(0,V.useEffect)((function(){var e=(0,Ze.debounce)((function(){var e=document.body.clientHeight-30-80-20;T(e),$.current&&($.current.style.height="".concat(e,"px"))}),100);return window.addEventListener("resize",e),function(){al={},window.removeEventListener("resize",e)}}),[]),(0,V.useEffect)((function(){var e=document.body.clientHeight-30-80-20;T(e),$.current&&($.current.style.height="".concat(e,"px"))}),[$]);var Ce=(0,V.useCallback)((function(e){var t;if(ol!==e){var n=(0,j.c)(fe),r=c.getParentControlId(e),a=b()(t="".concat(il)).call(t,e);for(!N()(n).call(n,a)&&n.push(a);e&&r&&r!==s;){var i;r=c.getParentControlId(r);var o=b()(i="".concat(il)).call(i,r);N()(n).call(n,o)||n.push(o)}ol=e,ge(n)}}),[fe]);(0,V.useEffect)((function(){return U.eventBus.on("drag-control_".concat(s),Ce),function(){U.eventBus.off("drag-control_".concat(s),Ce)}}),[Ce]);var he=(0,V.useCallback)((function(){var e=!p;if(m(e),e)ge([]),$.current&&($.current.scrollTop=0);else{var t,n=x()(t=Q[ae]).call(t,(function(e){var t;return b()(t="".concat(il)).call(t,e[Z])}));ge(n)}}),[p,Q,$.current]),Ae=(0,V.useCallback)((function(){h(!C)}),[C]),Ee=(0,V.useCallback)((function(e,t){if(We(t.event)){var n,r=null===(n=e[0])||void 0===n?void 0:n.substr(2),a=d.getSelection,i=d.setSelect,o=a();if(c.isSiblings(o[0],r)){var l=o[o.length-1];if(l===r)return;var u=c.getAllSiblings(l),s=tt(u,l,r);s&&i(s)}}else{var f=x()(e).call(e,(function(e){return e.substr(2)}));d.setSelect(f)}var g=e[0],p=B()(fe).call(fe,(function(e){return g===e})),m=(0,j.c)(fe);p>=0?va()(m).call(m,p,1):m.push(g),ge(m)}),[fe]),xe=(0,V.useMemo)((function(){return tl(Q,C,{prefix:il})}),[Q,C]),Ie=(0,V.useCallback)((function(e){var t,n,r,a,i,o=(0,j.c)((null==xe||null===(t=xe[0])||void 0===t?void 0:t.searchData)||[]),l=pa()(n=e.target.value).call(n),c=x()(r=po()(a=x()(i=K()(o).call(o,(function(e){var t,n,r;return(null===(t=e.key)||void 0===t?void 0:N()(n=Qe()(t).call(t,2)).call(n,l))||N()(r=e.title).call(r,l)}))).call(i,(function(e){var t;return{id:null===(t=e.key)||void 0===t?void 0:Qe()(t).call(t,2),level:e.level}}))).call(a,(function(e){return e.level}))).call(r,(function(e){return e.id}));al[l]=(0,j.c)(c),R(l)}),[xe]),be=(0,V.useCallback)((function(){if(!P||!al[P])return null;var e=al[P],t=e.length;if(t<=0)return s;var n=d.getActiveSelectedId();if(!N()(e).call(e,n))return e[0];var r=De()(e).call(e,n);return r===t-1?r=0:r++,e[r]}),[P]),ke=(0,V.useCallback)((function(){O.current&&O.current.focus();var e=be(),t=c.findControl(e);e&&d.setSelect([t?e:s])}),[O,be]),Se=function(e,t){e.stopPropagation(),e.preventDefault();var n=(0,j.c)(fe),r=De()(n).call(n,t);r>=0?va()(n).call(n,r,1):n.push(t),ge(n)},Fe=[function(e){return z().createElement(W.Icon,{prefix:"designericon",type:"shouqi3",onClick:function(t){return Se(t,e.nodeKey)}})},function(e){return z().createElement(W.Icon,{prefix:"designericon",type:"zhankai3",onClick:function(t){return Se(t,e.nodeKey)}})}],we=(0,V.useCallback)((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).nodeKey;if(!e)return z().createElement(W.Icon,{prefix:"designericon",type:"Flexmianban"});var t=c.findControl(Qe()(e).call(e,2))||{},n=t[ee],r=t[Y],a=(t.FieldId,"");return a=r?(0,U.getControlIconMap)(r):(0,U.getControlIconMap)(n),z().createElement(W.Icon,{prefix:"designericon",type:a})}),[]),Te=(0,V.useCallback)((function(e){return e.Hidden?"kdesigner-form-designer-outline-tree-node-disabled":""}),[]);return z().createElement("div",{className:"".concat(de,"-wrap"),tabIndex:-1},z().createElement("div",{className:"".concat(de,"-search")},z().createElement(W.Input,{prefix:me,placeholder:(0,U.getLangMsg)("formd.leftView.key0009"),borderType:"bordered",className:"".concat(de,"-search-input"),onChange:Ie,onPressEnter:ke,value:P,ref:O,allowClear:!0}),z().createElement(W.Icon,{prefix:"designericon",className:"".concat(de,"-search-icon"),onClick:he,type:p?"shouqiquanbu":"zhankaiquanbu",title:p?(0,U.getLangMsg)("formd.leftView.key0004"):(0,U.getLangMsg)("formd.leftView.key0005")}),z().createElement(W.Icon,{prefix:"designericon",className:"".concat(de,"-search-icon"),onClick:Ae,type:C?"zhanshi":"yincang",title:C?(0,U.getLangMsg)("formd.leftView.key0006"):(0,U.getLangMsg)("formd.leftView.key0007")})),z().createElement("div",{ref:G,tabIndex:-1},z().createElement(W.Tree,{name:"OutlineTree",treeData:xe,height:w,width:280,onExpand:function(e,t){var n,r=t.expanded,a=t.node.key,i=K()(e).call(e,Boolean);i=r?b()(n=[a]).call(n,(0,j.c)(i)):K()(i).call(i,(function(e){return e!==a})),i=Nr()(new(D())(i)),ge(i)},expandedKeys:fe,className:de,virtual:!0,draggable:!0,icon:we,showIcon:!0,selectedKeys:I,onSelect:Ee,onDragStart:ne,onDragEnter:re,onDragOver:ie,onDragLeave:oe,onDrop:le,onDragEnd:ce,ref:$,setTreeNodeClassName:Te,switcherIcon:Fe})))})));ll.tabKey="outline",ll.getTabName=function(){return(0,U.getLangMsg)("formd.leftView.key0002")},ll.displayName="outline";var cl=ll,dl=n(1508),ul=n.n(dl),sl=(n(22280),["mode","columnMode"]),fl=function(e){var t=e.children,n=e.className,r=e.width,a=e.height,i=e.alignItems,o=e.alignContent,l=e.wrap,c=e.direction,d=e.justifyContent,u=e.onClick,s=e.selected,f=e.title;return z().createElement("div",{title:f,onClick:u,className:mt()("".concat(n,"-demo-box"),(0,A.c)({},"".concat(n,"-demo-box-selected"),s)),style:{width:r,height:a,flexWrap:l?"wrap":"nowrap",flexDirection:c,alignItems:i,alignContent:o,justifyContent:d}},t)},gl=function(e){var t,n,r,a=e.height,i=e.width,o=e.className,l=e.index,c=e.mode,d=e.direction,u=e.wrap,s=e.children,f=e.alignItems,g=e.justifyContent;return z().createElement("div",{className:mt()("".concat(o,"-demo-column"),b()(t="".concat(o,"-demo-column-")).call(t,c),b()(n="".concat(o,"-demo-column-direction-")).call(n,d),(0,A.c)((0,A.c)((0,A.c)((0,A.c)((0,A.c)({},"".concat(o,"-demo-column-wrap"),!!u),"".concat(o,"-demo-column-alignItems-start"),"center"!==f&&"flex-end"!==f),"".concat(o,"-demo-column-alignItems-end"),"flex-end"===f),"".concat(o,"-demo-column-justifyContent-start"),"center"!==g&&"flex-end"!==g),"".concat(o,"-demo-column-justifyContent-end"),"flex-end"===g)),style:{minHeight:a,minWidth:i}},s,z().createElement("span",{className:b()(r="".concat(o,"-demo-column-span-")).call(r,c)},l))},pl=function(e){var t,n,r=e.mode,a=e.columnMode,i=(0,C.c)(e,sl),o=i.className,l="small"===r?16:54,c={small:[28,36,28,36,28,36],large:[72,108,72,108,72,108]},d=i.wrap,u=i.direction,s=i.alignItems,f=i.justifyContent,g=d?6:4;return z().createElement(fl,i,x()(t=ul()(n=new Array(g)).call(n,0)).call(t,(function(e,t){var n,i,g,p,m=c[r][t],v="horizontal"===a?l:m,y="horizontal"===a?m:l,C="".concat(o,"-flex-main-axis"),h="".concat(o,"-flex-cross-axis"),E=!1;return z().createElement(gl,{width:y,height:v,index:t+1,key:t,className:o,mode:r,direction:u,wrap:!!d,alignItems:s,justifyContent:f},(0===t||4===t)&&z().createElement("div",{key:b()(n="".concat(C,"-")).call(n,t),className:mt()(C,b()(i="".concat(C,"-direction-")).call(i,u),(0,A.c)((0,A.c)((0,A.c)({},"".concat(C,"-alignItems-start"),"center"!==s&&"flex-end"!==s),"".concat(C,"-alignItems-end"),"flex-end"===s),"".concat(C,"-alignItems-center"),"center"===s),(0,A.c)((0,A.c)((0,A.c)({},"".concat(C,"-justifyContent-start"),"center"!==f&&"flex-end"!==f),"".concat(C,"-justifyContent-end"),"flex-end"===f),"".concat(C,"-justifyContent-center"),"center"===f),(0,A.c)({},"".concat(C,"-second"),4===t))}),!E&&(0===t||4===t)&&"center"===s&&"center"===f&&(E=!0,!0)&&z().createElement("div",{key:b()(g="".concat(h,"-")).call(g,t),className:mt()(h,b()(p="".concat(h,"-direction-")).call(p,u),"".concat(h,"-alignItems-center"),"".concat(C,"-justifyContent-center"))}))})))},ml=(n(71120),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.Editor&&e.Editor.Span&&(e.Editor.Span+=t)}),vl=function(e,t,n){for(var r,a=0,i=t;i<n+1;i++)a+=(r=e[i])?r.Editor&&r.Editor.Span||12:0;return a},yl=function(e,t,n,r,a){var i=(0,Zo.Ut)(n,(function(n){u()(n).call(n,(function(n){if(!1!==n.Visible&&n.Nodes){var i,o;n.Nodes=K()(i=po()(o=(0,U.filterNodes)(n.Nodes,r,a)).call(o,(function(e,t){return(e.GroupSubSeq||0)-(t.GroupSubSeq||0)}))).call(i,(function(n){return!e(t,n)}));for(var l=n.Nodes.length,c=0,d=0,u=vl(n.Nodes,c,d);c<l&&d<l;)if((u=vl(n.Nodes,c,d))>12&&0!==d){var s=Math.max(0,12-vl(n.Nodes,c,d-1));ml(n.Nodes[c],s),d=++c}else 12===u?c=++d:d++;if(u<12&&c<l){var f=Math.max(0,12-vl(n.Nodes,c,d-1));ml(n.Nodes[c],f)}}}))}));return i},Cl=W.Collapse.Panel,hl=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=function(e){return(0,Zo.Ut)(e,(function(e){u()(e).call(e,(function(e){var t;e.Nodes=K()(t=e.Nodes).call(t,(function(e){var t;return!(!r&&"layout"===e.Group)&&(!("style"!==e.TabGroup&&!N()(t=["Width","Height"]).call(t,e.Id))||void 0)}))}))}))};if(!e)return a(n);var i=e._Type_,o=e.FieldType,l=n||t.meta.getControlMetaPropertyGroups(i),c=o;if(c&&t.meta.getControlMeta(c).Properties){var d,s=t.meta.getControlMeta(c).Properties,f=a(l),g=a(s);return f=(0,U.createPropertyGroups)(b()(d=(0,Ze.flattenDeep)(x()(g).call(g,(function(e){return e.Nodes})))).call(d,(0,Ze.flattenDeep)(x()(f).call(f,(function(e){return e.Nodes})))))}return a(l)},Al=function(e){e.className;var t,n=(0,V.useContext)(pe),r=n.getKdesignerApi,a=n.prefixCls,i=n.getLayoutVisible,o=n.getBusinessVisible,l=n.isActionTabVisible,c=n.filterProperty,d=r(),u=1===d.selection.getSelection().length;(0,U.useSelectionChangeForceUpdateEffect)(d,void 0);var s=d.selection.getActiveSelectedId(),f=bo(),g=f.schema,p=f.SchemeComponent;return z().createElement(U.PropertyView,(0,h.c)({},e,{filterPropertyHandler:function(e){var t,n=d.selection.getActiveSelectedId(),r=d.data.findControl(n),a=hl(r,d,e),u=K()(t=[o(n)&&"business",(null==a?void 0:a.length)&&Q()(a).call(a,(function(e){var t;return(null===(t=e.Nodes)||void 0===t?void 0:t.length)>0}))&&"style",i(n)&&"layout",l(n)&&"action"]).call(t,Boolean);return d.views.setViewsVisibleSetting("right")(u),yl(c,r,a,[],Tl)},exclude:Tl,solidSelectedId:s}),u&&g&&(null===(t=g.items)||void 0===t?void 0:t.length)&&z().createElement(W.Collapse,{key:"plan",name:"Collapse",className:"".concat(Xn(a,"schema"),"-collapse"),expandIconPosition:"left",defaultActiveKey:"plan"},z().createElement(Cl,{header:(0,U.getLangMsg)("formd.rightView.key0001"),panelKey:"plan"},p)))};Al.tabKey="style",Al.getTabName=function(){return(0,U.getLangMsg)("formd.rightView.key0002")};var El=Al,xl="horizontal",Il="vertical",bl="column",kl="row",Sl=function(e){var t=(0,V.useContext)(pe).getKdesignerApi,n=e.className,r=e.id,i=e.field,o=[{columnMode:xl,childrenCount:4,direction:bl,alignItems:"flex-start",justifyContent:"flex-start",title:(0,U.getLangMsg)("formd.editor.key0002")},{columnMode:xl,childrenCount:4,direction:bl,alignItems:"center",justifyContent:"flex-start",title:(0,U.getLangMsg)("formd.editor.key0003")},{columnMode:xl,childrenCount:4,direction:bl,alignItems:"flex-start",justifyContent:"center",title:(0,U.getLangMsg)("formd.editor.key0004")},{columnMode:xl,childrenCount:4,direction:bl,alignItems:"flex-start",justifyContent:"space-between",title:(0,U.getLangMsg)("formd.editor.key0005")},{columnMode:Il,childrenCount:4,direction:kl,alignItems:"flex-start",justifyContent:"flex-start",title:(0,U.getLangMsg)("formd.editor.key0006")},{columnMode:Il,childrenCount:4,direction:kl,alignItems:"flex-start",justifyContent:"center",title:(0,U.getLangMsg)("formd.editor.key0007")},{columnMode:Il,childrenCount:4,direction:kl,alignItems:"flex-start",justifyContent:"space-between",title:(0,U.getLangMsg)("formd.editor.key0008")},{columnMode:Il,childrenCount:4,direction:kl,alignItems:"center",justifyContent:"center",title:(0,U.getLangMsg)("formd.editor.key0009")},{columnMode:xl,childrenCount:4,direction:bl,alignItems:"stretch",justifyContent:"flex-start",title:(0,U.getLangMsg)("formd.editor.key0010")},{columnMode:xl,childrenCount:4,direction:bl,alignItems:"center",justifyContent:"center",title:(0,U.getLangMsg)("formd.editor.key0011")},{columnMode:xl,childrenCount:6,direction:bl,wrap:!0,alignItems:"flex-start",justifyContent:"flex-start",alignContent:"flex-start",title:(0,U.getLangMsg)("formd.editor.key0012")},{columnMode:Il,childrenCount:6,direction:kl,wrap:!0,alignItems:"flex-start",justifyContent:"flex-start",alignContent:"flex-start",title:(0,U.getLangMsg)("formd.editor.key0013")}],l=t(),c=l.selection.getSelection(),d=(0,h.c)({},i.FieldType?l.meta.getControlDefaultDataByPropertyGroups(hl(i,l)):l.meta.getDefaultData(i._Type_),i);return z().createElement("div",{className:"".concat(n,"-quick-layout")},x()(o).call(o,(function(e,t){var i,o={Direction:e.direction,Wrap:!!e.wrap,AlignItems:e.alignItems,AlignContent:e.alignContent,JustifyContent:e.justifyContent},u=_()(i=a()(o)).call(i,(function(e,t){return e?((0,Ze.isUndefined)(o[t])||!!(0,Ze.isEqual)(o[t],d[t]))&&e:e}),!0);return z().createElement(pl,(0,h.c)({},e,{key:t,mode:"small",onClick:function(){var e,t=_()(e=a()(o)).call(e,(function(e,t){return(0,Ze.isUndefined)(o[t])||(e[t]=o[t]),e}),{});if(c.length>1)return l.data.batchUpdateControlPropertyValues((0,U.createUpdateAction)(x()(c).call(c,(function(e){return[e,t]}))));l.data.batchUpdateControlPropertyValues((0,U.createUpdateAction)([[r,t]]))},width:80,height:80,className:n,selected:u}))})))},Fl=function(e){var t=e.field,n=e.className,r=(0,(0,V.useContext)(pe).getKdesignerApi)(),a=(0,h.c)({},r.meta.getDefaultData(t._Type_),t),i=_()(Tl).call(Tl,(function(e,t){return e[(0,Ze.lowerFirst)(t)]=a[t],e}),{});return z().createElement("div",{className:"".concat(n,"-demo-preview")},z().createElement(pl,(0,h.c)({},i,{mode:"large",columnMode:i.direction===kl?Il:xl,className:n,width:256,height:256,selected:!0})))},wl=W.Collapse.Panel,Tl=["Direction","Wrap","AlignContent","AlignItems","JustifyContent"],Nl={row:{Direction:{row:"pailiefangshi-shuiping",column:"pailiefangshi-chuizhi"},Wrap:{false:"shifouduoxing-danxing",true:"shifouduoxing-duoxing"},AlignSelf:{},AlignContent:{center:"duoxingchuizhifangxiang-juzhong","flex-start":"chuizhi-chuizhifangxiang-qidianduiqi","flex-end":"chuizhi-chuizhifangxiang-zhongdianduiqi","space-around":"chuizhi-chuizhifangxiang-jiangexiangdeng","space-between":"duoxingchuizhifangxiang-liangduanduiqi",stretch:"duoxingchuizhifangxiang-chongman"},AlignItems:{center:"shuiping-chuizhifangxiang-juzhong","flex-start":"shuiping-chuizhifangxiang-qidianduiqi","flex-end":"shuiping-chuizhifangxiang-zhongdianduiqi",stretch:"shuiping-chuizhifangxiang-chongman",baseline:"jixianduiqi"},JustifyContent:{"flex-start":"shuiping-shuipingfangxiang-qidianduiqi","flex-end":"shuiping-shuipingfangxiang-zhongdianduiqi",center:"duolieshuipingfangxiang-juzhong","space-between":"duolieshuipingfangxiang-liangduanduiqi","space-around":"duolieshuipingfangxiang-jiangexiangdeng"}},column:{Direction:{row:"pailiefangshi-shuiping",column:"pailiefangshi-chuizhi"},Wrap:{false:"shifouduolie-danlie",true:"shifouduolie-duolie"},AlignSelf:{},AlignContent:{"flex-start":"duolieshuipingfangxiang-qidianduiqi","flex-end":"duolieshuipingfangxiang-zhongdianduiqi",center:"duolieshuipingfangxiang-juzhong","space-around":"duolieshuipingfangxiang-jiangexiangdeng","space-between":"duolieshuipingfangxiang-liangduanduiqi",stretch:"duolieshuipingfangxiang-chongman"},AlignItems:{center:"chuizhi-shuipingfangxiang-juzhong","flex-start":"chuizhi-shuipingfangxiang-qidianduiqi","flex-end":"chuizhi-shuipingfangxiang-zhongdianduiqi",stretch:"chuizhi-shuipingfangxiang-liangduanduiqi",baseline:"jixianduiqi"},JustifyContent:{"flex-start":"chuizhi-chuizhifangxiang-qidianduiqi","flex-end":"chuizhi-chuizhifangxiang-zhongdianduiqi",center:"chuizhi-chuizhifangxiang-juzhong","space-around":"chuizhi-chuizhifangxiang-jiangexiangdeng","space-between":"chuizhi-chuizhifangxiang-liangduanduiqi"}}},Ml=(0,Ze.memoize)((function(e,t){if((0,Ze.isUndefined)(e)&&(0,Ze.isUndefined)(t))return{};var n={Direction:{row:(0,U.getLangMsg)("formd.rightView.key0004"),column:(0,U.getLangMsg)("formd.rightView.key0005")},Wrap:{false:(0,U.getLangMsg)("formd.rightView.key0006"),true:(0,U.getLangMsg)("formd.rightView.key0007")},AlignSelf:{},AlignContent:{"flex-start":(0,U.getLangMsg)("formd.editor.key0015"),"flex-end":(0,U.getLangMsg)("formd.editor.key0016"),center:(0,U.getLangMsg)("formd.editor.key0017"),"space-around":(0,U.getLangMsg)("formd.editor.key0018"),"space-between":(0,U.getLangMsg)("formd.editor.key0015"),stretch:(0,U.getLangMsg)("formd.editor.key0020")},AlignItems:{"flex-start":(0,U.getLangMsg)("formd.editor.key0015"),"flex-end":(0,U.getLangMsg)("formd.editor.key0016"),center:(0,U.getLangMsg)("formd.editor.key0017"),stretch:(0,U.getLangMsg)("formd.editor.key0020"),baseline:(0,U.getLangMsg)("formd.editor.key0021")},JustifyContent:{"flex-start":(0,U.getLangMsg)("formd.editor.key0015"),"flex-end":(0,U.getLangMsg)("formd.editor.key0016"),center:(0,U.getLangMsg)("formd.editor.key0017"),"space-around":(0,U.getLangMsg)("formd.editor.key0018"),"space-between":(0,U.getLangMsg)("formd.editor.key0019")}};return{Editor:["Editor",function(t){var r=t.originProp,a=t.path,i=(t.pathLength,t.inputMeta),o=qo(i,Qe()(a).call(a,0,-1));if(o&&N()(Tl).call(Tl,o.Id)){var l=(0,Zo.cp)(r,(function(t){var r;if(t.Type="Tab","Wrap"===o.Id&&(t.Enum=[{Id:!1,Value:!1,Name:"nowrap"},{Value:!0,Id:!0,Name:"wrap"}]),N()(r=["AlignItems","AlignContent","JustifyContent"]).call(r,o.Id)){var a,i;t.Default="flex-start";var l=B()(a=t.Enum).call(a,(function(e){return"default"===e.Id}));-1!==l&&va()(i=t.Enum).call(i,l,1)}var c=t.Enum;null==c||u()(c).call(c,(function(t){var r,a=Nl[e][o.Id][t.Value||t.Id],i=n[o.Id][t.Value||t.Id];a&&(t.IconClassName=b()(r="".concat(jo)).call(r,a));i&&(t.IconTitle=i)}))}));return l}}],Visible:["Visible",function(e){e.originProp;var n=e.path,r=(e.pathLength,e.inputMeta),a=qo(r,Qe()(n).call(n,0,-1));if(a&&"AlignContent"===a.Id)return!!t}]}}),(function(e,t){return{direction:e,wrap:t}})),Ll=function(e){var t=e.className,n=e.field,r=e.modelData,a=e.PropertyViewItemRender,i=(0,V.useContext)(pe),o=i.prefixCls,l=(0,i.getKdesignerApi)(),c=l.data,d=l.meta,u=c.getRealControlType(n),s=(0,h.c)({},d.getDefaultData(u),n),f=s.Direction,g=s.Wrap,p=(0,U.adaptorObjectByTransformKeyMap)(r,Ml(f,g)),m=Pl(p);return z().createElement(z().Fragment,null,z().createElement(W.Collapse,{key:"quicklayout",name:"Collapse",className:"".concat(t,"-collapse"),expandIconPosition:"left",defaultActiveKey:"quicklayout"},z().createElement(wl,{header:(0,U.getLangMsg)("formd.editor.key0022"),panelKey:"quicklayout"},z().createElement(Sl,{className:o,id:n.Id,field:n}))),z().createElement(U.PropertyViewItemGroup,(0,h.c)({},e,{modelData:p}),z().createElement("div",{className:mt()("".concat(t,"-editor-control"),"".concat(o,"-preview-title"))},z().createElement(U.NameTipWrapper,{className:t,name:(0,U.getLangMsg)("formd.editor.key0023")}),z().createElement(Fl,{className:o,field:n})),z().createElement("div",{className:mt()("".concat(t,"-layout-props-list"))},x()(m).call(m,(function(e){return z().createElement(a,(0,h.c)({className:"kdesigner-right-view"},e,{field:n}))})))))},Pl=function(e){var t=null==e?void 0:_()(e).call(e,(function(e,t){var n,r=(null==t?void 0:t.Nodes)||[];return b()(n=[]).call(n,(0,j.c)(e),(0,j.c)(r))}),[]);return(null==t?void 0:K()(t).call(t,(function(e){return"layout"===e.Group})))||[]},Dl=function(e){var t=(0,V.useContext)(pe).getKdesignerApi;(0,U.useSelectionChangeForceUpdateEffect)(t(),void 0);var n=t().selection.getActiveSelectedId();return z().createElement(U.PropertyView,(0,h.c)({},e,{PropertyViewItemGroupRender:Ll,include:Tl,filterPropertyHandler:function(e){var n=t(),r=n.selection.getActiveSelectedId(),a=n.data.findControl(r);return hl(a,n,e,!0)},solidSelectedId:n}))};Dl.tabKey="layout",Dl.getTabName=function(){return(0,U.getLangMsg)("formd.rightView.key0011")};var Rl=Dl;function Bl(e,t){var n=a()(e);if(o()){var r=o()(e);t&&(r=K()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gl(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?u()(n=Bl(Object(a),!0)).call(n,(function(t){(0,A.c)(e,t,a[t])})):f()?p()(e,f()(a)):u()(r=Bl(Object(a))).call(r,(function(t){v()(e,t,c()(a,t))}))}return e}var _l=function(e){var t=(0,V.useContext)(pe),n=t.getKdesignerApi,r=t.filterProperty,a=t.isDataWithMetaMode,i=t.lockPropsMap,o=void 0===i?{}:i,l=t.getModel,c=t.designerConfig,d=void 0===c?{}:c,s=n();(0,U.useSelectionChangeForceUpdateEffect)(n(),void 0);var f=s.selection.getActiveSelectedId(),g=(0,V.useCallback)((function(e){var t,n,i=s.selection.getActiveSelectedId(),c=s.data.findControl(i),f=d.enableExtLimits,g=void 0!==f&&f,p=s.data.getData(),m=p.Items,v=p.extElements,y=void 0===v?[]:v,C=p.devType,h=(null===(t=S()(y).call(y,(function(e){return"Field"===e.Type})))||void 0===t?void 0:t.Items)||[];h=x()(h).call(h,(function(e){var t,n;return e.Id===(null===(t=m[0])||void 0===t?void 0:t.PkId)?Gl(Gl({},e),{},{Id:null===(n=m[0])||void 0===n?void 0:n.Id}):e}));var A=function(e,t){return(0,Zo.Ut)(e,(function(e){u()(e).call(e,(function(e){var n,r;e.Nodes=K()(n=e.Nodes).call(n,(function(e){var n;if(t&&t(e),"style"!==e.TabGroup&&!N()(n=["Width","Height"]).call(n,e.Id))return!0})),e.Nodes=x()(r=e.Nodes).call(r,(function(e){if("2"===C){var t=c.Inherit,n=e.ReadOnly;g||(e.LockType="unlock"),t||"speciallock"!==e.LockType||(e.LockType="unlock"),!n&&"lock"===e.LockType&&t&&(e.ReadOnly=!0);var r,a=S()(h).call(h,(function(e){return e.Id===i}));if(a)null===(r=a.Props)||void 0===r||u()(r).call(r,(function(t){var r=t.LockType||"lock";e.Id===t.Id&&(e.LockType=r,"lock"===r?e.ReadOnly=!0:n||"unlock"!==r||(e.ReadOnly=!1))}))}var l=o[i]||[];if(l.length>0){var d=e.Id,s=K()(l).call(l,(function(e){return"string"==typeof e})),f=S()(l).call(l,(function(e){return void 0!==e[d]}));null!=s&&N()(s).call(s,d)?e.ReadOnly=!0:f&&(e.LockType="speciallock",e._originPropsValue_=f[d])}return e}))}))}))},E=A(e,(function(e){var t=["FieldId","EntryId","CardEntryId"];a&&N()(t).call(t,e.Id)&&(e.Visible=!1)})),I=s.meta.getControlMeta(c.FieldType).Properties;if(a&&c.FieldType){var k=s.data.getData(),F=k.EntityData.Items,w=S()(F).call(F,(function(e){return e.Id===c.Id}));if(w){var T=s.meta.getDefaultData(w._Type_),M=Gl(Gl({},k),{},{field:Gl(Gl({},T),w)});I=(0,U.getModelData)(I,M,{getModel:l})}}I=A(I||[],(function(e){var t;N()(t=["Name","Key"]).call(t,e.Id)&&(e.Visible=!1),e.Editor&&(e.Editor.isEntityData=!0,e.Editor.MetaType="entitymeta")}));var L=a?(0,U.createPropertyGroups)(b()(n=(0,Ze.flattenDeep)(x()(E).call(E,(function(e){return e.Nodes})))).call(n,(0,Ze.flattenDeep)(x()(I).call(I,(function(e){return e.Nodes}))))):E;return yl(r,c,L,[],Tl)}),[a]);return z().createElement(U.PropertyView,(0,h.c)({},e,{exclude:Tl,filterPropertyHandler:g,solidSelectedId:f}),z().createElement(Kl,null))};_l.tabKey="business",_l.getTabName=function(){return(0,U.getLangMsg)("formd.rightView.key0008")};var Ol=_l;function Kl(){var e=(0,V.useState)(),t=(0,q.c)(e,2),n=t[0],r=t[1],a=(0,V.useContext)(pe),i=a.prefixCls,o=(0,a.getKdesignerApi)(),l=o.selection.getActiveSelectedId,c=o.data,d=c.getRootId,u=c.findControl,s=c.addDataChangeListener,f=c.getSubControls,g=o.meta.getControlMeta,p=l()||d();if((0,V.useEffect)((function(){var e=u(p);r(e);var t=s((function(){var e=u(p);r(e)}));return function(){t&&t()}}),[p]),!n)return null;var m="".concat(i,"-business"),v=n.ContainerType,y=n._Type_,C=g(n.FieldType),A=g(y),E=C.Name||A.Name,x="FieldsetPanelAp"===y;if("FlexPanelAp"===y||"FieldsetPanelAp"===y&&"FlexPanelAp"===v){var I=f(p)||[];x=!Q()(I).call(I,(function(e){return"FieldAp"!==e._Type_})),E=(0,U.getLangMsg)("formd.rightView.key0009")}if(x){var b=A.Properties[0].Nodes[1];return z().createElement("div",{className:"".concat(m,"-property-item")},z().createElement(U.PropertyViewItem,(0,h.c)({className:"kdesigner-right-view"},b,{field:n})))}return z().createElement("div",{className:"".concat(m,"-readonly-container")},z().createElement("div",{className:"".concat(m,"-readonly-property")},z().createElement("div",{className:"".concat(m,"-readonly-title")},"".concat((0,U.getLangMsg)("formd.rightView.key0010"),"：")),z().createElement("div",{className:"".concat(m,"-readonly-name")},E)))}var Vl=function(e){var t=(0,V.useContext)(U.GlobalConfigContext).keywordMapping,n=(0,V.useContext)(pe),r=n.getDataRef,a=n.getModel,i=n.getKdesignerApi;return(0,U.createRefComboEditor)({getDataRef:r,getModel:a,getKdesignerApi:i,keywordMapping:t})(e)},zl=function(e){var t=(0,V.useContext)(U.GlobalConfigContext).keywordMapping,n=(0,V.useContext)(pe),r=n.getDataRef,a=n.getModel,i=n.getKdesignerApi;return(0,U.createRefComboEditor)({getDataRef:r,getModel:a,getKdesignerApi:i,keywordMapping:t,multiple:!0})(e)},Ul=function(e){var t=e.value,n=e.handleChange,r=(0,V.useState)(!1),a=(0,q.c)(r,2),i=a[0],o=a[1],l=(0,V.useContext)(pe).getCommonUtil,c=(l&&l()).CodeEditWrapper,d=(0,V.useRef)("");c||U.console.log("without designerConfigRef");var u=function(){o((function(e){return!e}))};return z().createElement(z().Fragment,null,z().createElement(U.EditorPropertyCustomInput,(0,h.c)({},e,{onCustomInputClick:function(){u()},handleClear:function(e){n(e||"")}})),i&&c&&z().createElement(c,{value:t,showOrHiddenDialog:u,handleChange:function(e){d.current=e},handleClick:function(){var e=function(e){if(e){var t={type:0,content:e};return window.btoa(unescape(encodeURIComponent(Ct()(t))))}}(d.current||t);u(),n(e)}}))},Hl=function(e){var t,n,r,a=e.handleChange,i=e.value,o=e.editor,l=(e.locked,e.Name),c=e.Tips,d=e.className,u=o.Enum,s=o.NameHidden,f=o.Default,g=o.Required,p="formdesigner",m=(0,Ze.isUndefined)(i)?f||u&&(null!==(t=null===(n=u[0])||void 0===n?void 0:n.Value)&&void 0!==t?t:null===(r=u[0])||void 0===r?void 0:r.Id):i;return z().createElement(z().Fragment,null,z().createElement(U.NameTipWrapper,{nameHidden:s,className:d,name:l,tips:c,required:g}),z().createElement("div",{className:"".concat(p,"-position-select-box")},x()(u).call(u,(function(e){var t;return z().createElement("div",{key:e.Id,className:mt()(["".concat(p,"-position-select-item"),{"is-active":m===e.Id}]),title:b()(t="".concat((0,U.getLangMsg)("formd.editor.key0001"),"：")).call(t,e.Name),onClick:function(){return t=e.Id,void a(t);var t}},e.Name)}))))},Wl=function(e){var t,n,r=e.handleChange,a=e.value,i=e.editor,o=e.Name,l=e.Tips,c=e.className,d=i.Enum,u=i.NameHidden,s=i.Default,f=null===(t=S()(d).call(d,(function(e){return!0===e.Checked})))||void 0===t?void 0:t.Id,g=null===(n=S()(d).call(d,(function(e){return!1===e.Checked})))||void 0===n?void 0:n.Id,p=(a||s)===f;return z().createElement(z().Fragment,null,z().createElement(U.NameTipWrapper,{nameHidden:u,className:c,name:o,tips:l}),z().createElement("div",{className:mt()(["formdesigner-font-bold-editor",{active:p}]),onClick:function(){r(p?g:f)}},z().createElement(W.Icon,{prefix:"designericon",type:"wenzijiacu"})))},jl=n(88836),ql=n.n(jl),Jl=W.Select.Option;function Ql(e,t){if((0,Ze.isUndefined)(e)||""===e)return"";var n=e.split(" ");if(!n.length)return"";if(1===n.length){var r=Jn()(e);n=[r,r,r,r]}else if(2===n.length){var a;n=x()(a=b()(n).call(n,n)).call(a,Jn())}else if(3===n.length){var i;n=x()(i=b()(n).call(n,n[1])).call(i,Jn())}else if(n.length>=4){var o;n=x()(o=Qe()(n).call(n,0,4)).call(o,Jn())}return"topLeft"===t?String(n[0]):"topRight"===t?String(n[1]):"bottomLeft"===t?String(n[2]):"bottomRight"===t?String(n[3]):""}var Zl=function(e){var t=e.handleChange,n=e.value,r=e.className,a=e.editor,i=e.locked,o=e.Name,l=e.Tips,c=a.NameHidden,d=(0,V.useRef)(null),u=(0,V.useState)((function(){return function(e){if(!e)return"";var t=e.split(" ");return x()(t).call(t,Jn()).join(";")}(n)})),s=(0,q.c)(u,2),f=s[0],g=s[1],p=(0,V.useState)((function(){return(null==n?void 0:De()(n).call(n,"%"))>-1?"%":"px"})),m=(0,q.c)(p,2),v=m[0],y=m[1],C=(0,V.useState)(!1),h=(0,q.c)(C,2),A=h[0],E=h[1],I=(0,V.useState)((function(){return Ql(n,"topLeft")})),k=(0,q.c)(I,2),S=k[0],F=k[1],w=(0,V.useState)((function(){return Ql(n,"topRight")})),T=(0,q.c)(w,2),N=T[0],M=T[1],L=(0,V.useState)((function(){return Ql(n,"bottomLeft")})),P=(0,q.c)(L,2),R=P[0],B=P[1],G=(0,V.useState)((function(){return Ql(n,"bottomRight")})),_=(0,q.c)(G,2),O=_[0],K=_[1],H=function(e){F(Ql(e,"topLeft")),M(Ql(e,"topRight")),B(Ql(e,"bottomLeft")),K(Ql(e,"bottomRight"))},j=function(e,n){var r="topLeft"===n?e:S,a=[r,"topRight"===n?e:N,"bottomLeft"===n?e:R,"bottomRight"===n?e:O],i=function(e){var t=e=x()(e).call(e,(function(e){return""===e?"0":e})),n=(0,q.c)(t,4),r=n[0],a=n[1],i=n[2],o=n[3];return 1===new(D())(e).size?[r]:r===i&&a===o?[r,a]:a===o?[r,a,i]:e}(a),o=new(ql())([["topLeft",F],["topRight",M],["bottomLeft",B],["bottomRight",K]]).get(n);null==o||o(e),1===new(D())(a).size&&""===r?(g(""),t(void 0)):(g(i.join(";")),t(x()(i).call(i,(function(e){var t;return b()(t="".concat(e)).call(t,v)})).join(" ")))};return z().createElement(z().Fragment,null,z().createElement(U.NameTipWrapper,{nameHidden:c,className:r,name:o,tips:l}),z().createElement("div",{className:"formdesigner-radius-editor"},z().createElement("div",{className:"".concat(r,"-dimission-editor")},z().createElement(W.Input,{borderType:"bordered",className:"".concat(r,"-dimission-editor-input"),ref:d,value:f,onKeyPress:function(e){e.stopPropagation();var t=["-","+","e","E"];-1!==De()(t).call(t,e.key)&&e.preventDefault()},onChange:function(e){var n=e.target.value;if(g(n),/^(\d+(\.\d+)?;){1,3}\d+(\.\d+)?$/.test(n)){var r,a=x()(r=n.split(";")).call(r,(function(e){var t;return b()(t="".concat(e)).call(t,v)})).join(" ");t(a),H(a)}else if(/^\d+(\.\d+)?$/.test(n)){var i,o;t(b()(i="".concat(n)).call(i,v)),H(b()(o="".concat(n)).call(o,v))}else""===n&&(t(void 0),H(void 0))},disabled:i}),z().createElement(W.Select,{scrollHidden:!0,className:"".concat(r,"-dimission-editor-unit"),borderType:"none",value:v,onChange:function(e){var n,r=(null===(n=d.current)||void 0===n?void 0:n.value)||"";if(y(e),/^(\d+(\.\d+)?;){1,3}\d+(\.\d+)?$/.test(r)){var a,i=x()(a=r.split(";")).call(a,(function(t){var n;return b()(n="".concat(t)).call(n,e)})).join(" ");t(i)}else if(/^\d+(\.\d+)?$/.test(r)){var o;t(b()(o="".concat(r)).call(o,e))}}},z().createElement(Jl,{value:"px"},"px"),z().createElement(Jl,{value:"%"},"%"))),z().createElement("div",{className:mt()(["formdesigner-radius-editor-button",{"is-open":A}]),onClick:function(){E((function(e){return!e}))}},z().createElement(W.Icon,{prefix:"designericon",type:"wenzijiacu2"}))),A&&z().createElement("div",{className:"formdesigner-radius-panel"},z().createElement(W.InputNumber,{borderType:"bordered",value:S,zeroShow:!0,prefix:z().createElement(W.Icon,{prefix:"designericon",type:"yuanjiaozuoshang"}),onChange:function(e){F(e.target.value),j(e.target.value,"topLeft")},onKeyPress:function(e){e.stopPropagation();var t=["-","+","e","E"];-1!==De()(t).call(t,e.key)&&e.preventDefault()}}),z().createElement(W.InputNumber,{borderType:"bordered",value:N,zeroShow:!0,prefix:z().createElement(W.Icon,{prefix:"designericon",type:"yuanjiaoyoushang"}),onChange:function(e){M(e.target.value),j(e.target.value,"topRight")},onKeyPress:function(e){e.stopPropagation();var t=["-","+","e","E"];-1!==De()(t).call(t,e.key)&&e.preventDefault()}}),z().createElement(W.InputNumber,{borderType:"bordered",value:R,zeroShow:!0,prefix:z().createElement(W.Icon,{prefix:"designericon",type:"yuanjiaozuoxia"}),onChange:function(e){B(e.target.value),j(e.target.value,"bottomLeft")},onKeyPress:function(e){e.stopPropagation();var t=["-","+","e","E"];-1!==De()(t).call(t,e.key)&&e.preventDefault()}}),z().createElement(W.InputNumber,{borderType:"bordered",value:O,zeroShow:!0,prefix:z().createElement(W.Icon,{prefix:"designericon",type:"yuanjiaoyouxia"}),onChange:function(e){K(e.target.value),j(e.target.value,"bottomRight")},onKeyPress:function(e){e.stopPropagation();var t=["-","+","e","E"];-1!==De()(t).call(t,e.key)&&e.preventDefault()}})))},Xl=function(e){var t=(0,V.useContext)(pe),n=t.getDataRef,r=t.getModel,a=t.getKdesignerApi,i=(0,V.useReducer)((function(e){return e+1}),0),o=(0,q.c)(i,2)[1];return(0,V.useEffect)((function(){return U.eventBus.on(aa,o),function(){U.eventBus.off(aa,o)}}),[]),(0,U.createEComboEditor)({getDataRef:n,getModel:r,getKdesignerApi:a,metaType:"formmeta"})(e)},Yl=U.EditComboEditor,$l=function(e){var t=(0,V.useContext)(pe),n=t.getKdesignerApi,r=t.queryEntityByFieldId;return(0,U.createInputEditor)({editorComponent:W.Input,getKdesignerApi:n,queryEntityByFieldId:r})(e)},ec=function(e){return(0,U.createSelectEditor)({editorComponent:W.Select})(e)},tc=function(){var e=[],t=[[Vl,"RefCombo",""],[zl,"RefMCombo",""],[Ul,"CssEdit",""],[Hl,"Position",""],[Wl,"FontBold",""],[Zl,"Radius",""],[Zl,"Radius",""],[Xl,"ECombo",""],[Yl,"EditCombo",""],[$l,"Input",""],[ec,"Select",""]];return u()(t).call(t,(function(t){var n=(0,q.c)(t,3),r=n[0],a=n[1],i=n[2];e.push([a,r,i])})),e},nc=n(2992),rc=n.n(nc),ac=n(73400),ic=n.n(ac),oc=["globalConfig","dataContext","selectionContext","action","dataFactory","modelFactory","metaReader"],lc=["type","value"];function cc(e,t){var n=a()(e);if(o()){var r=o()(e);t&&(r=K()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function dc(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?u()(n=cc(Object(a),!0)).call(n,(function(t){(0,A.c)(e,t,a[t])})):f()?p()(e,f()(a)):u()(r=cc(Object(a))).call(r,(function(t){v()(e,t,c()(a,t))}))}return e}var uc="@container-bg-color",sc=["EntryAp","EntryFieldGroupAp","EntryFieldContainerAp","AdvConBarItemAp","CardEntryAp"],fc=function(e,t,n,r){var a,i,o=e._Type_,l=e.ParentId,c=e.FieldType,d=e.Id,u=n.getControlMeta(o).BaseId,s="".concat(u,"Id"),f=function(e,t){return"Field"===u||"Entry"===u?u+"Ap":t},g=t.findControl(l),p=null==g?void 0:g._Type_;(o&&c?(0,Ze.endsWith)(o,"Ap")?"CardEntryAp"===o?c="EntryEntity":"SubCardEntryAp"===o?c="SubEntryEntity":"NameCombinePanelAp"===o&&(c="NameCombineEntity"):o=f()||o:o?(0,Ze.endsWith)(o,"Ap")?"CardEntryAp"===o?c="EntryEntity":"SubCardEntryAp"===o?c="SubEntryEntity":"NameCombinePanelAp"===o&&(c="NameCombineEntity"):(c=o,o=f()):c&&(o=f()),c)&&("GridFlatPanelAp"===o||(!N()(a=["EntryFieldGroupAp","EntryFieldContainerAp"]).call(a,o)&&N()(i=["EntryAp","EntryFieldGroupAp","ReportListAp","EntryFieldContainerAp"]).call(i,p)?o="EntryFieldAp":"FieldAp"!==o||"CardEntryRowAp"!==p&&"CardEntryFlexPanelAp"!==p||(o="CardEntryFieldAp")));return(0,h.c)({},{_Type_:o,FieldType:c},!r||"Field"!==u&&"Entry"!==u?{}:(0,A.c)({},s,d))},gc=function(e,t,n,r){var a,i=e.globalConfig,o=e.dataContext,l=(e.selectionContext,e.action),c=e.dataFactory,d=(e.modelFactory,e.metaReader),s=((0,C.c)(e,oc),[]),f=l.type,g=l.value,p=(0,C.c)(l,lc),m=Xe(g),v=m.length,E=p.isAddForFilter,I=i.showMessage,k=r.entityDataApi,F=r.isDataWithMetaMode,w=i.designerContextValue.getDataRef,T=i.keywordMapping;"ListMeta"!==w().designer&&U.eventBus.emit("add-control-id",E?m[v-1].Id:m[0].Id);var M=K()(a=x()(m).call(m,(function(e){var t,a,i,l=dc({},e),f=l,g=f.Id,p=f.ParentId,v=f._Type_,C=f.Key,E=r.getDataRef().isv;E&&"kingdee"!==E&&C&&!(0,Ze.startsWith)(C,"".concat(E,"_"))&&(C="".concat(E,"_")+C),l.Key=(0,U.createUniqueKey)(C,v,null===(t=o.getData())||void 0===t?void 0:t.Items,T);var b=(null===(a=w().entitymeta)||void 0===a?void 0:a[ae])||[],k=S()(m).call(m,(function(e){return e[Z]===p})),M=o.findControl(p)||k,L=M._Type_,P=d.getControlMeta(v);P&&1===P.CreateType&&((0,r.invokeAction)("createUIElementByType",[{CreateType:1,type:v},M||{}]),n("CreateType 为 1, 由后台创建"));var D=d.canAdd(v,L);N()(sc).call(sc,v)&&("object"!==(0,y.c)(D)||D.success||(I(D.message),n(D.message))),(0,h.c)(l,fc(e,o,d,F));var R=l,B=R._Type_,G=R.FieldType;ic()(B).call(B,"ChartAp")&&(l.Width="250px",l.Height="250px");var _=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g,n=arguments.length>2?arguments[2]:void 0;return(0,U.createAddAction)(c({type:e,parentId:t,transferData:n}))};if("FieldAp"===B&&"AttachmentField"===G&&(l=dc(dc({},l),{},{ShowTitle:!1,FireUpdEvt:!0})),"CardEntryFieldAp"===B&&"AttachmentField"===G&&(l=dc(dc({},l),{},{ShowTitle:!1})),"SplitContainerAp"===B&&(s.push(_("SplitPanelAp")),s.push(_("SplitPanelAp"))),"AdvConAp"===B){s.push(_("AdvConSummaryPanelAp"));var O=_("AdvConToolbarAp"),V=O.value[Z];s.push(O),s.push(_("AdvConBarItemAp",V)),s.push(_("AdvConBarItemAp",V)),s.push(_("AdvConChildPanelAp")),l=dc(dc({},l),{},{Shrink:0,Grow:0,Collapsible:!0,BackColor:uc})}if("BillListAp"===B){s.push(_("ListGridViewAp"));var z=_("ListCardViewAp",g,{LayoutStyle:2,AlignContent:"flex-start",AlignItems:"flex-start",JustifyContent:"flex-start"}),H=z.value.Id;s.push(z),s.push(_("CardRowPanelAp",H,{Shrink:0,Grow:0,Height:"250px",Width:"300px"}))}if("TabAp"===B&&(s.push(_("TabPageAp")),l=dc(dc({},l),{},{Shrink:0,TabStyle:3,BackColor:uc})),"SpreadAp"===B&&(l=dc(dc({},l),{},{Height:"500px"})),"CardEntryAp"===B||"SubCardEntryAp"===B){var W=_("CardEntryViewAp"),j=W.value.Id;s.push(W),s.push(_("CardEntryFixRowAp",j,{CardType:0,Hidden:!0,Shrink:0,Grow:0,Height:"250px",Width:"300px"})),s.push(_("CardEntryRowAp",j,{CardType:1,Shrink:0,Grow:0,Height:"250px",Width:"300px"})),s.push(_("CardEntryFixRowAp",j,{CardType:0,Hidden:!0,Shrink:0,Grow:0,Height:"250px",Width:"300px"}))}if("GridFlatPanelAp"===B){var q=e.ParentId,J=e.Id,Q=function(e,t,n){var r,a,i=K()(r=t.getAllSubControls(e)).call(r,(function(e){return"EntryFieldAp"===e[ee]}));return{entityFields:K()(a=x()(i).call(i,(function(e){return S()(n).call(n,(function(t){return t[Z]===e.FieldId}))}))).call(a,(function(e){return e})),entryFields:i}}(q,o,b),X=Q.entityFields,Y=Q.entryFields,te=K()(Y).call(Y,(function(e){return!e.FieldId})),re=_("FieldsetPanelAp",J),ie=re.value[Z];s.push(re),u()(X).call(X,(function(e){var t=e[ee],n=e[Z],r=e[ne],a=_("FlatFieldAp",ie,(0,A.c)((0,A.c)((0,A.c)({},ne,r),"FieldId",n),"FieldType",t));s.push(dc(dc({},a),{},{isAddFlatFieldAp:!0}))})),u()(te).call(te,(function(e){var t=e.Name,n=e.FieldType,r=e.Id,a=_("FlatFieldAp",ie,(0,A.c)((0,A.c)({},ne,t),"FieldType",n));s.push(dc(dc({},a),{},{isAddFlatFieldAp:!0}));var i=a.value[Z];Ra.setEntryFieldId(q,r,i)}))}if("EntryFieldAp"===B){for(var oe,le=o.findControl(p)||k;"EntryAp"!==le[ee];)le=o.getParentControl(le[Z]);var ce=K()(oe=o.getSubControls(le[Z])).call(oe,(function(e){return"GridFlatPanelAp"===e[ee]}));if(ce.length>0){var de,ue=ce[0][Z],se=K()(de=o.getSubControls(ue)).call(de,(function(e){return"FieldsetPanelAp"===e[ee]}))[0][Z],fe=l,ge=fe.FieldType,pe=fe.Name,me=fe.FieldId,ve=_("FlatFieldAp",se,(0,A.c)((0,A.c)((0,A.c)({},ne,pe),"FieldType",ge),"FieldId",me));s.push(ve);var ye=ve.value[Z];Ra.setEntryFieldId(le[Z],g,ye)}}"ToolbarAp"===B&&(s.push(_("BarItemAp")),s.push(_("BarItemAp")),s.push(_("BarItemAp")),l=dc(dc({},l),{},{Shrink:0})),"FieldsetPanelAp"===B&&(l=dc(dc({},l),{},{BackColor:uc})),"MarkdownAp"===B&&(l=dc(dc({},l),{},{defoc:!1})),"WizardAp"===B&&(l=dc(dc({},l),{},{NodeLinkageSubTab:!0})),"RichTextField"===v&&"FieldsetPanelAp"===L&&(l=dc(dc({},l),{},{FullLine:!0}));var Ce=e.ParentId,he=e.FieldName;if(N()(i=["schemefilterview","filtergridview","fastsearchgridview"]).call(i,Ce)){var Ae,Ee=x()(Ae=o.getSubControls(Ce)).call(Ae,(function(e){return e[$]}));if(N()(Ee).call(Ee,he)){var xe={schemefilterview:(0,U.getLangMsg)("formd.filterView.key0001"),filtergridview:(0,U.getLangMsg)("formd.filterView.key0002"),fastsearchgridview:(0,U.getLangMsg)("formd.filterView.key0003")},Ie=(0,U.getLangMsg)({key:"formd.tips.key0008",variables:{fieldType:xe[Ce],name:e[ne],fieldName:he}});return void I(Ie)}}return l}))).call(a,Boolean),L=[dc({type:f,value:M},p)],P=b()(L).call(L,s);if(F){var D,R=[],B=b()(P).call(P,K()(D=x()(P).call(P,(function(e){var t,n=e.type,r=e.value,a=qe()(r)?r:[r];if(N()(t=[U.ActionType.ADD,U.ActionType.PASTE]).call(t,n)){var i,l,c=K()(i=x()(a).call(a,(function(e){if("RadioField"===e.FieldType){var t=e.Id,n=e.ParentId,r=e.FieldType,a=e.Name;e.FieldId=t;var i=o.getData().EntityData.Items,l=S()(i).call(i,(function(e){return"RadioGroupField"===e._Type_})),c=null,u="".concat(K()(i).call(i,(function(e){return"RadioField"===e._Type_})).length+1),s=(0,U.createUUid)();if(!l){var f={Id:s,Name:(0,U.getLangMsg)("formd.tips.key0009"),ParentId:n,_Type_:"RadioGroupField",FieldType:"RadioGroupField"};(0,h.c)(f,fc(f,o,d,F)),c={Id:s,ParentId:n,_Type_:"RadioGroupField",Items:[{Caption:a,Value:u,_Type_:"ComboItem"}]},R.push((0,U.createAddAction)(f))}return[{Id:t,ParentId:n,_Type_:r,Group:(null==l?void 0:l.Id)||s,Items:u,Name:a},c]}if(e.FieldType)return{Id:e.Id,ParentId:e.ParentId,_Type_:e.FieldType}}))).call(i,Boolean),u=K()(l=(0,Ze.flattenDeep)(c)).call(l,Boolean);return u.length&&k.getBatchAction((0,U.createAddAction)(u))}}))).call(D,Boolean));return b()(B).call(B,R)}return K()(P).call(P,(function(e){var t;return 0!==(null===(t=e.value)||void 0===t?void 0:t.length)}))},pc=["NameSegTextField","NameSegComboField","NameSegBasedataField"],mc=["NameCombinePanelAp"];var vc=function(e,t){var n=e.isMultiSelected,r=e.field,a=e.dataContext,i=e.selectionContext,o=e.propName,l=e.editor,c=r.Id,d=i.getSelection();if(N()(d).call(d,c)){t.entityDataApi;if(t.isDataWithMetaMode&&l&&l.isEntityData){var u=a.getData().EntityData.Items,s=S()(u).call(u,(function(e){return e.Id===c}));return null==s?void 0:s[o]}if(n){var f=x()(d).call(d,(function(e){return a.findControl(e)}));return 1===new(D())(x()(f).call(f,(function(e){return e[o]}))).size?r[o]:""}return r[o]}},yc=function(e,t,n,r){var a,i=e.globalConfig,o=e.dataContext,l=(e.selectionContext,e.action),c=(e.dataFactory,e.modelFactory,e.metaReader,l.type),d=l.value,s=Xe(d),f=[],g=i.showMessage;u()(s).call(s,(function(e){var t,r,a=o.findControl(e),l=a[ee],c=a[ne],d=a[te],s=a[re],p=a.FieldId,m=o.findControl(s)[ee],v="";try{!function(e,t){var n=e.Id,r=e.Name,a=e.Key,i=e._Type_,o=e.FieldType,l=e.RelatedParentId,c=e.ParentId,d=t.designerContextValue,s=(t.showMessage,d.getModel),f=d.getKdesignerApi,g=s(),p=f(),m=p.data,v=p.meta;if(m.findControl(c)._Type_,n===m.getRootId()){var y=(0,U.getLangMsg)({key:"formd.tips.key0003",variables:{fieldName:r,fieldKey:a}});throw new Error(y)}if(l&&N()(pc).call(pc,o)){var C=g.getPropertyValue(l,"Name"),h=(0,U.getLangMsg)({key:"formd.tips.key0004",variables:{fieldName:r,fieldKey:a,relatedParentName:C}});throw new Error(h)}var A=i;if(function e(t){var n=t._Type_,r=t.Id,a=t.Name,i=t.Key,o=t.FieldType,l=t.RelatedParentId,c=t.Inherit,d=v.getControlMeta(o||n).isContainer,s=["EntryAp","ReportCommFilterPanelAp","ReportMoreFilterPanelAp","ReportListAp"];if(c&&(!d||N()(s).call(s,n))){var f=(0,U.getLangMsg)({key:"formd.tips.key0005",variables:{fieldName:a,fieldKey:i}});throw new Error(f)}if(N()(pc).call(pc,o)&&!N()(mc).call(mc,A)&&l){var p=g.getPropertyValue(l,"Name"),y=(0,U.getLangMsg)({key:"formd.tips.key0004",variables:{fieldName:a,fieldKey:i,relatedParentName:p}});throw new Error(y)}var C=m.getSubControls(r);C.length&&(A=n,u()(C).call(C,(function(t){return e(t)})))}(e),v.getControlMeta(o||i).Inside){var E=(0,U.getLangMsg)({key:"formd.tips.key0006",variables:{fieldName:r,fieldKey:a}});throw new Error(E)}}(a,i)}catch(e){v=e.message}if(v)return n("以下控件不能删除：".concat(v)),g(b()(r="".concat((0,U.getLangMsg)("formd.tips.key0010"),"：")).call(r,v));if(N()(t=["FlatFieldAp","GridFlatPanelAp"]).call(t,l)||"FieldsetPanelAp"===l&&"GridFlatPanelAp"===m){var y;n(b()(y="".concat(c,"[")).call(y,d,"]为分录平铺视图字段，可设置隐藏。"));var C=(0,U.getLangMsg)({key:"formd.tips.key0011",variables:{name:c,key:d}});return g(C)}if("EntryFieldAp"===l){var h;f.push(e);for(var A=o.findControl(s);"EntryAp"!==A[ee];)A=o.getParentControl(A[Z]);if(K()(h=o.getSubControls(A[Z])).call(h,(function(e){return"GridFlatPanelAp"===e[ee]})).length>0)if(p){var E;f=_()(E=o.findControlByCondition((function(e){return e.FieldId===p&&"EntryFieldAp"!==e[ee]&&!N()(f).call(f,e[Z])}))).call(E,(function(e,t){var n;return b()(n=[]).call(n,(0,j.c)(e),[t[Z]])}),f)}else{var x=Ra.getFlatFieldId(A[Z],e);x&&f.push(x)}}else{var I;if("RadioField"===a.FieldType&&N()(I=["FieldAp","CardEntryFieldAp"]).call(I,l)){var k=(0,i.designerContextValue.getDataRef)().entitymeta.Items,F=S()(k).call(k,(function(e){return"RadioField"===e._Type_&&e.Id===a.FieldId}));if(F){var w=[];if(u()(k).call(k,(function(e){"RadioField"===e._Type_&&e.Group===F.Group&&w.push(e.Id)})),w.length>0){var T,M=o.getData().Items,L=[],P={};u()(M).call(M,(function(e){e.ParentId===a.ParentId&&N()(w).call(w,e.FieldId)&&L.push(e),"RadioGroupField"===e.FieldType&&e.FieldId===F.Group&&(P=e)})),1===L.length&&null!==(T=P)&&void 0!==T&&T.Id&&f.push(P.Id)}}}f.push(e)}}));var p=r.entityDataApi,m=r.isDataWithMetaMode;return b()(a=[{type:c,value:f}]).call(a,m?[p.getBatchAction((0,U.createDeleteAction)(f))]:[])},Cc=function e(t,n){var r=t;if(r.Id===n)return r;if(r.Items)for(var a=0;a<r.Items.length;a++){var i=e(r.Items[a],n);if(i)return i}},hc=function(e,t,n,r){e.globalConfig;var a,i=e.dataContext,o=(e.selectionContext,e.action),l=(e.dataFactory,e.modelFactory,e.metaReader),c=o.type,d=o.value,s=o.id,f=r.getDataRef,g=r.createFormDataFromEntityData,p=r.queryEntityByFieldId,m=r.getForceUpdateAction,v=r.entityDataApi;if("function"==typeof d)return[o,m(s)];var y=[],C=K()(d).call(d,(function(e){return!qe()(e)})),A=K()(d).call(d,(function(e){return qe()(e)}));return u()(A).call(A,(function(e){var t=null==e?void 0:e[0],n=["Collapsible"];Q()(n).call(n,(function(t){return Ki()(null==e?void 0:e[1],t)}))&&w()((function(){var e,n=document.querySelectorAll('[data-control-id="'.concat(t,'"]'));null!=n&&null!==(e=n[0])&&void 0!==e&&null!==(e=e.dataset)&&void 0!==e&&e.selection||u()(n).call(n,(function(e){return null==e?void 0:e.click()}))}),100);var r=null==e?void 0:e[1];if(t&&r&&Ki()(r,"Name")){var a=i.findControl(t);a&&"RadioField"===a.FieldType&&C.push(v.getBatchAction((0,U.createUpdateAction)([[t,{Name:r.Name}]]),t))}if(t&&r&&Ki()(r,"FieldId")){var o=i.findControl(t);if(o&&"RadioField"===o.FieldType){var c=f(),d=c.entitymeta,s=c.entitytree;if(d){var m=i.findControlByCondition((function(e){return"RadioGroupField"===e.FieldType}));if(Cc(s,r.FieldId)){var E,I=S()(E=d.Items).call(E,(function(e){return e.Id===r.FieldId}));if(null!=I&&I.Group&&!Q()(m).call(m,(function(e){return e.FieldId===I.Group}))){var k=g(I.Group,"FieldAp",o.ParentId,{FieldType:"RadioGroupField"}),F=k.action,T=k.exitEntityData;(0,h.c)(F.value,fc(F.value,i,l)),T&&y.push(F)}}}}if(o){var N=r.FieldId,M=p(N);M&&y.push((0,U.createUpdateAction)([[t,{Key:M.Key}]]))}}var L=[];if(Ki()(r,"EntryId")){var P,D,R=i.getAllSubControls(t);L=K()(P=x()(R).call(R,(function(e){var t=e[Z],n=e.FieldId;if(!e.EntryId&&n)return[t,{FieldId:""}]}))).call(P,(function(e){return e})),A=b()(D=[]).call(D,(0,j.c)(A),(0,j.c)(L))}})),b()(a=[{type:c,value:A}]).call(a,y,C)};function Ac(e,t){var n=a()(e);if(o()){var r=o()(e);t&&(r=K()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ec(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?u()(n=Ac(Object(a),!0)).call(n,(function(t){(0,A.c)(e,t,a[t])})):f()?p()(e,f()(a)):u()(r=Ac(Object(a))).call(r,(function(t){v()(e,t,c()(a,t))}))}return e}var xc=["EntryFieldAp","CardEntryFieldAp","FlatFieldAp","OperationColumnAp","EntryFieldContainerAp","EntryFieldGroupAp","CardEntryRowAp","EntryAp","CardEntryAp","SubCardEntryAp"],Ic=function(e,t,n,r){var a=e.globalConfig,i=e.dataContext,o=(e.selectionContext,e.action),l=(e.dataFactory,e.modelFactory,e.metaReader),c=a.showMessage,d=o.type,u=o.value,s=u,f=u.origin,g=u.target,p=u.isPrev,m=g,v=qe()(f)?f:[f],C=i.getData().Items,h=i.getRootId(),A=v[0],E=h,x={},I=!1,b=C.length;if(p){var k=i.findControl(m),S=k[ee],F=k[re];if(!l.getControlMeta(S).IsContainer){var w,T=null===(w=i.getPrevSibling(m).control)||void 0===w?void 0:w[Z];T?m=T:(I=!0,m=F)}}for(var M=0,L=-1,P=function(){var e=C[M],t=e[Z];if(t===m){x=e,L=M;var n=e[ee],r=e[re],a=l.getControlMeta(n).IsContainer;if(p){if(E=r,a&&(E=t),I){var o=i.getSubControls(E);L=(L=i.findControlIndex(o[0][Z])-1)<0?M:L}return M=b,1}if(r&&!a)E=r;else if(a){E=e[Z];var c=i.getSubControls(t),d=c.length;d>0&&(L=B()(C).call(C,(function(e){var t;return e[Z]===(null===(t=c[d-1])||void 0===t?void 0:t[Z])})))}M=b}else M++};M<b&&!P(););var D=x[ee],R=i.findControl(E),G=i.findControl(A),_=R[ee],O=G[Y]||G[ee],K=G[ee],V=x[ee];if(E!==G[re]){var z=i.getParentControl(E),H=z?z[ee]:"";if("FieldsetPanelAp"===_&&"GridFlatPanelAp"===H)return c((0,U.getLangMsg)("formd.tips.key0012"));if("FlatFieldAp"===K)return c((0,U.getLangMsg)("formd.tips.key0013"))}if(N()(xc).call(xc,V)&&"FieldAp"===K)return c((0,U.getLangMsg)("formd.tips.key0002"));var W=l.canAdd(G,R);if("object"===(0,y.c)(W)&&!W.success)return c(W.message);var j=["FieldAp","FlatFieldAp"];if(O!==K&&!N()(j).call(j,K)&&N()(K).call(K,"FieldAp")&&D!==K){var q=l.canAdd(K,_);if("object"===(0,y.c)(q)&&!q.success)return c(q.message)}var J=["EntryFieldContainerAp","EntryFieldGroupAp","EntryFieldAp","OperationColumnAp"],Q=["CardEntryFieldAp","CardEntryRowAp","CardEntryViewAp"],X=["FlatFieldAp"],$=function(e,t){for(var n="",r=t||A,a="";n!==e&&r!==h;){var o=i.findControl(r);n=o[ee],a=o[Z],r=o[re]}return a};if(N()(J).call(J,K)&&$("EntryAp",A)!==$("EntryAp",m))return c((0,U.getLangMsg)("formd.tips.key0014"));if(N()(Q).call(Q,K)&&$("CardEntryAp",A)!==$("CardEntryAp",m))return c((0,U.getLangMsg)("formd.tips.key0014"));if(N()(X).call(X,K)&&$("GridFlatPanelAp",A)!==$("GridFlatPanelAp",m))return c((0,U.getLangMsg)("formd.tips.key0014"));return"GridFlatPanelAp"===V?c((0,U.getLangMsg)("formd.tips.key0015")):[{type:d,value:s=Ec(Ec({},s),{},{origin:v,targetIndex:L,targetParentId:E})}]},bc=["globalConfig","dataContext","selectionContext","action","dataFactory","modelFactory","metaReader"],kc=["type","value"];function Sc(e,t){var n=a()(e);if(o()){var r=o()(e);t&&(r=K()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fc(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?u()(n=Sc(Object(a),!0)).call(n,(function(t){(0,A.c)(e,t,a[t])})):f()?p()(e,f()(a)):u()(r=Sc(Object(a))).call(r,(function(t){v()(e,t,c()(a,t))}))}return e}var wc=function(e,t,n,r){var a,i,o,l=e.globalConfig,c=e.dataContext,d=e.selectionContext,u=e.action,s=(e.dataFactory,e.modelFactory,e.metaReader),f=((0,C.c)(e,bc),u.type),g=u.value,p=(0,C.c)(u,kc),m=Xe(g),v=m.length,h=p.isAddForFilter,A=l.showMessage,E=(r.entityDataApi,r.isDataWithMetaMode,l.designerContextValue.getDataRef);"ListMeta"!==E().designer&&U.eventBus.emit("add-control-id",h?m[v-1].Id:m[0].Id);var I=null===(a=d.getSelection())||void 0===a?void 0:a[0],b=null===(i=c.getParentControl(I))||void 0===i?void 0:i.Id,k=K()(o=x()(m).call(m,(function(e){var t,r,a,i=Fc({},e),o=(i.Id,i.ParentId),l=i._Type_,d=i.FieldType||l,u=(null===(t=E().entitymeta)||void 0===t||t[ae],S()(m).call(m,(function(e){return e[Z]===o}))),f=c.findControl(o)||u,g=f._Type_;if("FieldsetPanelAp"===(f.FieldType||g)){var p=c.getParentControl(o);if(p&&"GridFlatPanelAp"===p[ee]){var v=(0,U.getLangMsg)("formd.tips.key0012");A(v),n(v)}}var C=["EntryFieldAp","EntryFieldGroupAp","OperationColumnAp","EntryFieldContainerAp"],h=(0,U.getLangMsg)("formd.tips.key0002");"EntryAp"===g&&(N()(C).call(C,l)||(A(h),n(h))),N()(r=["EntryFieldGroupAp","EntryFieldContainerAp","CardEntryRowAp","CardEntryFlexPanelAp","CardEntryAp","SubCardEntryAp"]).call(r,g)&&"FieldAp"===l&&(A(h),n(h)),N()(C).call(C,l)&&"EntryAp"!==g&&(A(h),n(h));var I=o!==b||s.canAdd(d,f);"object"!==(0,y.c)(I)||I.success||(A(I.message),n(I.message));var k=e.ParentId,F=e.FieldName;if(N()(a=["schemefilterview","filtergridview","fastsearchgridview"]).call(a,k)){var w,T=x()(w=c.getSubControls(k)).call(w,(function(e){return e[$]}));if(N()(T).call(T,F)){var M={schemefilterview:(0,U.getLangMsg)("formd.filterView.key0001"),filtergridview:(0,U.getLangMsg)("formd.filterView.key0002"),fastsearchgridview:(0,U.getLangMsg)("formd.filterView.key0003")},L=(0,U.getLangMsg)({key:"formd.tips.key0008",variables:{fieldType:M[k],name:e[ne],fieldName:F}});return void A(L)}}return i}))).call(o,Boolean),F=[Fc({type:f,value:k},p)];return K()(F).call(F,(function(e){var t;return 0!==(null===(t=e.value)||void 0===t?void 0:t.length)}))},Tc=["type","value"],Nc=["__targetIndex__"],Mc=(0,A.c)((0,A.c)((0,A.c)((0,A.c)((0,A.c)({},U.ActionType.ADD,gc),U.ActionType.DELETE,yc),U.ActionType.UPDATE,hc),U.ActionType.DRAG,Ic),U.ActionType.PASTE,wc),Lc=function(e,t){var n=e.action,r=e.dataContext,a=e.selectionContext,i=e.globalConfig,o=e.dataFactory,l=e.modelFactory,c=e.metaReader,d=e.success,s=e.fail,f=(i.dataRef,i.keywordMapping),g=t.getDataRef().isv,p=(t.isDataWithMetaMode,t.createFormDataFromEntityData),m=t.queryEntityByFieldId,v=!1,y=function e(n){var a=[],i=t.getCommonUtil,o=t.getDesignerModelType,l=t.getKdesignerApi,s=o(),y=i().getTemplateScheme;return rc().all(x()(n).call(n,(function(e){var t=e.type,n=e.value,i=(0,C.c)(e,Tc),o=y,d=l();if(t===U.ActionType.ADD||t===U.ActionType.PASTE){var v=qe()(n)?n:[n],A=i.isAddForFilter;if(A){var E=(0,Ze.cloneDeep)(v),I=[];u()(E).call(E,(function(e,t){if(!(0,Ze.isUndefined)(e.__targetIndex__)){var n=e.__targetIndex__,a=(0,C.c)(e,Nc);v[t]=a;var i=a.ParentId;if(i){var o=r.findControlByCondition((function(e){return e.ParentId===i}));o.length&&o[n]&&I.push([t,r.findControlIndex(o[n].Id)])}else I.push([t,-1])}})),u()(I).call(I,(function(e){var t=(0,q.c)(e,2),n=t[0],r=t[1],i=v[n];v[n]=void 0,a.push((0,U.createAddAction)(i,{index:r,isAddForFilter:A}))})),v=K()(v).call(v,(function(e){return!!e}))}var k=rc().all(x()(v).call(v,(function(e){var n=e.FieldType||e._Type_||"";e[f.key]=e[f.key]||n.toLowerCase();var l=i.isAddByEntity,y=i.isAddFlatFieldAp;if(t===U.ActionType.ADD&&!l&&!y&&e.FieldType){var C,A=e.FieldType?"FieldType":"_Type_",E=d.data.findControlByCondition((function(t){return e[A]===t[A]})).length;e[f.name]=b()(C="".concat(e[f.name])).call(C,0===E?"":E)}if(t===U.ActionType.PASTE||l){var I=K()(v).call(v,(function(e){if("RadioField"===e.FieldType&&e.FieldId)return!0})),k=K()(v).call(v,(function(e){if("RadioGroupField"===e.FieldType&&e.FieldId)return!0}));if(I.length){var S=r.findControlByCondition((function(e){return"RadioGroupField"===e.FieldType})),F=x()(I).call(I,(function(e){var t;return null===(t=m(e.FieldId))||void 0===t?void 0:t.Group})),w=new(D());u()(F).call(F,(function(e,t){if(e&&!w.has(e)){var n=x()(k).call(k,(function(e){return e.FieldId})),i=I[t];if(!N()(n).call(n,e)&&!Q()(S).call(S,(function(t){return t.FieldId===e}))){var o=p(e,"FieldAp",i.ParentId,{FieldType:"RadioGroupField"}),l=o.action,d=o.exitEntityData;(0,h.c)(l.value,fc(l.value,r,c)),d&&(w.add(e),a.push(l))}}}))}}return g&&"kingdee"!==g&&!(0,Ze.startsWith)(e[f.key],"".concat(g,"_"))&&(l&&0===r.findControlByCondition((function(t){return t[f.key]===e[f.key]})).length||(e[f.key]="".concat(g,"_")+e[f.key])),o(s,e.FieldType||e._Type_).then((function(t){var n,r=((null==t||null===(n=t[0])||void 0===n||null===(n=n.children)||void 0===n?void 0:n[0])||{}).items;return function(e,t,n){return(0,Ze.isEmpty)(e)?t:ji(e,{},n)}(function(e,t,n){return(0,Ze.isEmpty)(e)?{}:Wi(e,t,(function(){return n}))}((void 0===r?[{}]:r)[0],d,e),e,d)}))})));return k.then((function(t){return e.value=t,e}))}return rc().resolve(e)}))).then((function(t){return a.length?(v=!0,e(a).then((function(e){return d(b()(t).call(t,e))}))):v?b()(t).call(t,a):d(b()(t).call(t,a))}))},A=[],E=n.type,I=Mc[E];if(I&&"ADD"===E&&!n.value.length){var k=I({globalConfig:i,dataContext:r,selectionContext:a,action:n,dataFactory:o,modelFactory:l,metaReader:c},y,s,t);k&&A.push.apply(A,(0,j.c)(k))}else if(I){var S=I({globalConfig:i,dataContext:r,selectionContext:a,action:n,dataFactory:o,modelFactory:l,metaReader:c},y,s,t);S&&A.push.apply(A,(0,j.c)(S))}else A.push(n);A.length&&y(A)};function Pc(e,t){var n=a()(e);if(o()){var r=o()(e);t&&(r=K()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dc(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?u()(n=Pc(Object(a),!0)).call(n,(function(t){(0,A.c)(e,t,a[t])})):f()?p()(e,f()(a)):u()(r=Pc(Object(a))).call(r,(function(t){v()(e,t,c()(a,t))}))}return e}var Rc=function(e,t,n){var r=Dc(Dc({},e),{},{getEntityPropertyValue:function(e,r){var a,i=n();if(i){var o=null==i||null===(a=i.Items)||void 0===a?void 0:S()(a).call(a,(function(t){return t.Id===e}));if(o){var l=o[r];return(0,Ze.isUndefined)(l)?t.meta.getControlPropertyDefaultValue(o._Type_,r):l}}},getPropertyValue:function(e,n){var r=t.data.findControl(e);if(r){var a=r[n];return(0,Ze.isUndefined)(a)?t.meta.getControlPropertyDefaultValue(r._Type_,n):a}},getFormFieldInfo:function(e){return t.data.findControl(e)},getFieldInfo:function(e,n){return"entitymeta"===n?r.getEntityFieldInfo("string"==typeof e?e:e.entityId):t.data.findControl(e)},getFieldPropertyInfo:function(e,t,n){return"entitymeta"===n?r.getEntityPropertyValue(e,t):r.getPropertyValue(e,t)},getEntityRootId:function(){var e,t,r=n();if(r)return null===(e=S()(t=r.Items).call(t,(function(e){return!e.ParentId})))||void 0===e?void 0:e.Id},getEntityFieldInfo:function(e){var t,r=n();if(r)return null==r||null===(t=r.Items)||void 0===t?void 0:S()(t).call(t,(function(t){return t.Id===e}))},getParentControl:function(e,t,n){for(var r={Id:e},a=function(){var e,a=S()(n).call(n,(function(e){return e.Id===r.Id}));if((null===(e=r=S()(n).call(n,(function(e){return e.Id===a.ParentId})))||void 0===e?void 0:e._Type_)===t)return 1};r&&!a(););return r}});return r},Bc=function(){var e=(0,V.useContext)(pe).getKdesignerApi,t=(0,V.useMemo)((function(){return e()}),[]).data;return{getControlByEntityId:(0,V.useCallback)((function(e){if(e)return t.findControlByCondition((function(t){return t.FieldId===e}))}),[])}};function Gc(e,t){var n=a()(e);if(o()){var r=o()(e);t&&(r=K()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}var _c={},Oc="",Kc=function e(t,n){for(var r in t){if(t[r].key===n)return[t[r].key];if(t[r].children){var a=e(t[r].children,n);if(void 0!==a)return b()(a).call(a,[t[r].key])}}},Vc=(0,V.memo)((0,V.forwardRef)((function(e,t){var n,r=(0,V.useContext)(U.ConfigContext),a=r.getPrefixCls,i=r.prefixCls,o=(0,V.useContext)(pe),l=o.getKdesignerApi,d=o.getDataRef,s=o.canAddControlFromEntityNode,g=o.getModel,m=(0,V.useContext)(U.GlobalConfigContext).showMessage,y=(0,V.useMemo)((function(){return l()}),[]),C=y.selection,E=y.meta,I=y.dataFactory,k=y.data,S=Bc().getControlByEntityId,F=d(),w=F.designer,T=F.entitymeta,M=F.entitytree,L=g(),P=(0,V.useMemo)((function(){return!(!w||!N()(w).call(w,"List"))}),[w]),D=k.getRootId(),R=(0,V.useState)([D]),B=(0,q.c)(R,2),G=B[0],O=B[1],H=(0,V.useState)(!0),J=(0,q.c)(H,2),Q=J[0],X=J[1],Y=(0,V.useState)(!1),$=(0,q.c)(Y,2),ie=$[0],oe=$[1],le=(0,V.useState)(void 0),ce=(0,q.c)(le,2),de=ce[0],ue=ce[1],se=(0,V.useState)(600),fe=(0,q.c)(se,2),ge=fe[0],me=fe[1],ve=(0,V.useRef)(null),ye=(0,V.useReducer)((function(e){return e+1}),0),Ce=(0,q.c)(ye,2)[1],he=(0,V.useMemo)((function(){if(P)return M;var e,t=T[ae][0],n=x()(e=T[ae]).call(e,(function(e,n){return 0===n||e[re]||(e[re]=t[Z]),e}));return T[ae]=n,T}),[P,T,M]),Ae=(0,V.useMemo)((function(){return P?rl(he,{isShowKey:ie,isListMeta:P}):{treeData:tl(he,ie,{type:ee}),ids:_()(e=he[ae]).call(e,(function(e,t){return e.push(t[Z]),e}),[])};var e}),[ie,P,he]),Ee=Ae.treeData,xe=Ae.ids,Ie=Ae.flattenTrees,be=a&&a(i,"outline"),ke=(null===(n=Ee[0])||void 0===n?void 0:n.key)||"",Se=ke?[ke]:[],Fe=(0,V.useState)(Se),we=(0,q.c)(Fe,2),Te=we[0],Ne=we[1],Me=(0,V.useCallback)((function(){var e=!Q;X(e),e?(Ne([]),ve.current&&(ve.current.scrollTop=0)):Ne(xe)}),[Q,xe,ve.current]),Le=(0,V.useCallback)((function(){oe(!ie)}),[ie]),Pe=(0,V.useCallback)((function(e,t){var n,r,a=t.node,i=a.type,o=a.createType,l=a.key,d=a.parentId,g=C.getActiveSelectedId();if(!s(o,l,g))if(i){L.getEntityFieldInfo(l);var y=L.getEntityFieldInfo(d),x=k.findControl(g),b=x[ee],S=x.FieldId,F=x.EntryId,w=S||F,T=k.getData().rootEntityId,P="";N()(b).call(b,"EntryAp")?P=w:g===D&&(P=T);for(var R=g;!P&&D!==R&&P!==T;){var B=k.getParentControl(R);P=B.FieldId||B.EntryId,R=B.Id,D===R&&(P=T)}if(y.Id===P||N()(n=["SubEntryEntity"]).call(n,i)){var G=E.getControlMeta(b).IsContainer,_=void 0!==G&&G,O=_?g:k.getParentControlId(g)||D,K=k.findControl(O)[ee];if(E.canAdd(i,K)){var V=Cc(M,l),z=(0,h.c)({},function(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?u()(n=Gc(Object(a),!0)).call(n,(function(t){(0,A.c)(e,t,a[t])})):f()?p()(e,f()(a)):u()(r=Gc(Object(a))).call(r,(function(t){v()(e,t,c()(a,t))}))}return e}({},I({type:i,parentId:O})),N()(r=["EntryEntity","SubEntryEntity","TreeEntryEntity"]).call(r,i)?{EntryId:e[0]}:{FieldId:e[0]},V?{Name:V.Name,Key:V.Key}:{}),H=k.findControlIndex(g);if(_){var W=k.getSubControls(g),j=W.length;j>0&&(H=k.findControlIndex(W[j-1][Z]))}k.addControl((0,U.createAddAction)(z,(0,h.c)({index:H+1},V?{isAddByEntity:!0}:{}))).then((function(e){var t=e[0].value;C.setSelect(qe()(t)?[t[0][Z]]:[t[Z]])}))}}else m((0,U.getLangMsg)("formd.tips.key0016"))}else m((0,U.getLangMsg)("formd.tips.key0016"))}),[]),Re=(0,V.useCallback)((function(e){var t,n,r,a=P?he:he[ae];a=qe()(a)?a:Ie;var i=e.target.value,o=x()(t=K()(a).call(a,(function(e){var t;return N()(t=e[ne]||e.title).call(t,i)}))).call(t,(function(e){return e[Z]||e.key})),l=x()(n=K()(a).call(a,(function(e){var t;return N()(t=e[te]||e.key).call(t,i)}))).call(n,(function(e){return e[Z]||e.key}));_c[i]=b()(r=[]).call(r,(0,j.c)(o),(0,j.c)(l)),ue(i)}),[he,P]),Be=(0,V.useCallback)((function(){if(!de||!_c[de])return null;var e=_c[de],t=e.length;if(t<=0)return D;if(!Oc&&!N()(e).call(e,Oc))return e[0];var n=De()(e).call(e,Oc);return n===t-1?n=0:n++,e[n]}),[de]),Ge=(0,V.useCallback)((function(){var e,t=Be();if(t){Oc=t,O([t]);var n=S(t),r=null==n||null===(e=n[0])||void 0===e?void 0:e[Z];if(r&&C.setSelect(r),!N()(Te).call(Te,t)){var a,i=Kc(Ee,t);(null==i?void 0:i.length)&&Ne(b()(a=[]).call(a,(0,j.c)(Te),(0,j.c)(i)))}}}),[Be,P,Ee,Te]),_e=(0,V.useMemo)((function(){var e="".concat(be,"-search-prefix-icon");return z().createElement(W.Icon,{prefix:"designericon",type:"sousuo",className:e,onClick:Ge})}),[be]);(0,V.useEffect)((function(){var e=function(){var e=document.body.clientHeight-30-80-20;me(e),ve.current&&(ve.current.style.height="".concat(e,"px"))};e();var t=(0,Ze.debounce)(e,100);return window.addEventListener("resize",t),U.eventBus.on(aa,Ce),function(){window.removeEventListener("resize",t),U.eventBus.off(aa,Ce)}}),[]);var Oe=function(e,t){e.stopPropagation(),e.preventDefault();var n=(0,j.c)(Te),r=De()(n).call(n,t);r>=0?va()(n).call(n,r,1):n.push(t),Ne(n)},Ke=[function(e){return z().createElement(W.Icon,{prefix:"designericon",type:"shouqi3",onClick:function(t){return Oe(t,e.nodeKey)}})},function(e){return z().createElement(W.Icon,{prefix:"designericon",type:"zhankai3",onClick:function(t){return Oe(t,e.nodeKey)}})}],Ve=(0,V.useCallback)((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).nodeKey;if(!e)return z().createElement(W.Icon,{prefix:"designericon",type:"Flexmianban"});var t=(L.getEntityFieldInfo(e)||{})[ee],n=void 0===t?"FlexPanelAp":t,r=(0,U.getControlIconMap)(n);return z().createElement(W.Icon,{prefix:"designericon",type:r})}),[]);return z().createElement("div",{className:"".concat(be,"-wrap")},z().createElement("div",{className:"".concat(be,"-search")},z().createElement(W.Input,{prefix:_e,placeholder:(0,U.getLangMsg)("formd.leftView.key0003"),borderType:"bordered",className:"".concat(be,"-search-input"),onChange:Re,onPressEnter:Ge,value:de,allowClear:!0}),z().createElement(W.Icon,{prefix:"designericon",className:"".concat(be,"-search-icon"),onClick:Me,type:Q?"shouqiquanbu":"zhankaiquanbu",title:Q?(0,U.getLangMsg)("formd.leftView.key0004"):(0,U.getLangMsg)("formd.leftView.key0005")}),z().createElement(W.Icon,{prefix:"designericon",className:"".concat(be,"-search-icon"),onClick:Le,type:ie?"zhanshi":"yincang",title:ie?(0,U.getLangMsg)("formd.leftView.key0006"):(0,U.getLangMsg)("formd.leftView.key0007")})),z().createElement(W.Tree,{name:"EntityTree",treeData:Ee,height:ge,width:280,onExpand:function(e,t){var n,r=t.expanded,a=t.node.key,i=K()(e).call(e,Boolean);i=r?b()(n=[a]).call(n,(0,j.c)(i)):K()(i).call(i,(function(e){return e!==a})),Ne(i)},expandedKeys:Te,className:be,virtual:!1,icon:Ve,showIcon:!0,selectedKeys:G,onSelect:Pe,ref:ve,switcherIcon:Ke}))})));Vc.tabKey="entityTree",Vc.getTabName=function(){return(0,U.getLangMsg)("formd.leftView.key0001")},Vc.displayName="entity-tree";var zc=Vc,Uc=n(2900),Hc=n.n(Uc)()(),Wc=function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2?arguments[2]:void 0;return new Hc(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{get:function(n,r,a){return(0,Ze.isUndefined)(e[r])?t||function(){}:e[r]}})},jc=(Wc({},{},Wc()),Wc()),qc="update",Jc="alias",Qc=new U.DelayQueueUtil([qc,Jc]),Zc=function(e){var t=e.dataRef,n=e.kdesignerApi,r=e.keywordMapping,a=e.designerContextValueRef;return function(e){var i;if(e&&e[0]){var o=e[0];o=qe()(o)?o:[o];var l=[],c=K()(i=x()(o).call(o,(function(e,i){var o,c=e.itemId,d=e.value,u=e.metaType,s=e.propertyName,f=e.alias,g=(0,Ze.isUndefined)(f)?Ct()(d):f,p=S()(o=t.current[u].Items).call(o,(function(e){return e.Id===c}));if(p){var m=p[s],v=!(0,Ze.isEqual)(m,d);if(!(0,Ze.isUndefined)(g)){var y=n.current.aliasData.getAliasDataPropValue(p[r.type],s,d);(0,Ze.isEqual)(y,g)||l.push({type:p[r.type],propName:s,value:d,alias:g})}return v?"entitymeta"===u?a.current.entityDataApi.getBatchAction((0,U.createUpdateAction)([[c,(0,A.c)({},s,d)]])):[c,(0,A.c)({},s,d)]:void 0}}))).call(i,Boolean);Qc.addQueueData(c,qc),Qc.addQueueData(l,Jc),Qc.addTimer((function(){var e=Qc.getQueueData(qc),t=Qc.getQueueData(Jc);e.length&&n.current.data.batchUpdateControlPropertyValues((0,U.createUpdateAction)(e)),t.length&&w()((function(){n.current.aliasData.setAliasDataPropValue(t)})),Qc.clearQueue()}))}}},Xc=["targetIndex"],Yc=new U.DelayQueueUtil,$c=function(e){var t=e.kdesignerApi,n=e.keywordMapping;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];w()((function(){var r=function(){Yc.addTimer((function(){var e=t.current,r=Yc.getQueueData();e.data.addControl((0,U.createAddAction)(r,{isAddForFilter:!0})).then((function(){r.length&&e.selection.setSelect([r[r.length-1][n.id]])})),Yc.clearQueue()}))},a=function(e){var a=e[n.id],i=t.current;if(a)!function(e){var t=e,n=t.TargetIndex,a=(t.targetIndex,(0,C.c)(t,Xc));isNaN(n)||(n++,a.__targetIndex__=n),Yc.addQueueData([a]),r()}(e);else{var o=e.ParentId,l=e.Name,c=e.FieldType,d=e.FieldId,u=(e.Key,e._Type_);o=o||i.data.getRootId();var s=i.data.findControl(o),f=i.data.getContainerControl(s);if(!f||(0,Ze.isEmpty)(f))return;o=f[n.parentId];var g=f[n.type];if(u=u||"FieldAp","EntryEntity"===c||"SubEntryEntity"===c?u="EntryAp":"NameCombineEntity"===c&&(u="NameCombinePanelAp"),!i.meta.getControlMeta("CardEntryFieldAp")||!i.meta.canAdd("CardEntryFieldAp",g))return;u="CardEntryFieldAp";var p=i.dataFactory({type:u,parentId:o,transferData:{Name:l,FieldType:c,FieldId:d}});Yc.addQueueData([p]),r()}},i=e[0],o=e[1];if(null!=o.TargetIndex&&o.TargetIndex>=0&&(i.TargetIndex=o.TargetIndex),i.ParentId=i.ParentId||o.Id,i.Type&&(i.FieldType=i.Type),"SchemeFilterColumnAp"===i._Type_||"CommonFilterColumnAp"===i._Type_){var l=i.ParentId,c=i.FieldName;t.current.data.findControlByCondition((function(e){return e.ParentId===l&&e.FieldName===c})).length||a(i)}else a(i)}))}},ed=function(e){var t=e.kdesignerApi,n=e.keywordMapping;return function(e,r,a,i){var o,l,c=t.current,d="string"==typeof r?r:r.FieldType||r[n.type],u=null===(o=c.meta.getControlMeta(d))||void 0===o?void 0:o.BaseId,s="string"==typeof e?e:e.FieldType||e[n.type],f=null===(l=c.meta.getControlMeta(s))||void 0===l?void 0:l.BaseId,g=["NameCombinePanelAp"],p=["NameSegTextField","NameSegComboField","NameSegBasedataField"],m=(0,U.getLangMsg)("formd.tips.key0001");if(N()(g).call(g,d)&&!N()(p).call(p,s))return{message:m,success:!1};if(N()(g).call(g,d)&&N()(p).call(p,s)&&e.RelatedParentId!==r.get("Id"))return{message:m,success:!1};if(e[n.id]){var v;if("EntryAp"===d){var y=["EntryFieldAp","EntryFieldGroupAp","OperationColumnAp","EntryFieldContainerAp"];return De()(y).call(y,s)>-1||{message:(0,U.getLangMsg)("formd.tips.key0002"),success:!1}}if(N()(v=["EntryFieldGroupAp","EntryFieldContainerAp","CardEntryRowAp","CardEntryFlexPanelAp"]).call(v,d)&&"FieldAp"===s)return{message:(0,U.getLangMsg)("formd.tips.key0002"),success:!1}}if(!i.IsContainer)return!1;var C=function(e){var t=c.meta.getControlMeta(e).NotAccept;if(t){var n=t.Ids;return null==n?void 0:N()(n).call(n,s)}}(d);if(C)return{message:(0,U.getLangMsg)("formd.tips.key0002"),success:!1};if(!(C=function(e){var t=c.meta.getControlMeta(e).Accept;if(!t)return!0;if(t){var n=t.Basetypes,r=t.Ids;return(null==r?void 0:N()(r).call(r,s))||(null==n?void 0:N()(n).call(n,f))}}(d)))return{message:(0,U.getLangMsg)("formd.tips.key0002"),success:!1};return!!(C=function(e){var t=c.meta.getControlMeta(e).AcceptParent;if(!t)return!0;if(t){var n=t.Basetypes,r=t.Ids;return(null==r?void 0:N()(r).call(r,d))||(null==n?void 0:N()(n).call(n,u))}}(s))||{message:(0,U.getLangMsg)("formd.tips.key0002"),success:!1}}},td=["getTemplateScheme"];function nd(e,t){var n=a()(e);if(o()){var r=o()(e);t&&(r=K()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function rd(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?u()(n=nd(Object(a),!0)).call(n,(function(t){(0,A.c)(e,t,a[t])})):f()?p()(e,f()(a)):u()(r=nd(Object(a))).call(r,(function(t){v()(e,t,c()(a,t))}))}return e}var ad,id=function(e){e.getTemplateScheme;return rd(rd({},(0,C.c)(e,td)),{},{getTemplateScheme:function(e,t){return rc().resolve()}})},od=function(e){var t=e.kdesignerApi;return function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[])[0],n=t.current;if(e&&n){var r=n.data.findControlByCondition((function(t){return t.ParentId===e}));r.length&&n.data.deleteControl((0,U.createDeleteAction)(x()(r).call(r,(function(e){return e.Id}))))}}},ld="EntityData",cd=function(e,t){if(t.length){var n,r=(0,Ze.groupBy)(t,"Group");dd(e,(0,U.createUpdateAction)(x()(n=a()(r)).call(n,(function(e){var t;return[e,_()(t=r[e]).call(t,(function(e,t){return e.Items.push({Caption:t.Name,Value:t.Items,_Type_:"ComboItem"}),e}),{Items:[]})]}))))}},dd=function(e,t){var n,r=t.value,i=e[ld].Items,o=qe()(r)?r:[r];u()(o).call(o,(function(e){var t,n=(0,q.c)(e,2),r=n[0],o=n[1],l=S()(i).call(i,(function(e){return e.Id===r}));l&&u()(t=a()(o)).call(t,(function(e){l[e]=o[e]}))}));var l=K()(n=x()(o).call(o,(function(e){var t,n=(0,q.c)(e,2),r=n[0],a=n[1];if(!Q()(t=["Items","Name"]).call(t,(function(e){return Ki()(a,e)})))return null;var o=S()(i).call(i,(function(e){return e.Id===r}));return"RadioField"===(null==o?void 0:o._Type_)?o:null}))).call(n,Boolean);cd(e,l)},ud=function(){var e={getAction:function(e,t){return{type:U.ActionType.UPDATE,value:function(t){return e(t),[]},id:t}},getBatchAction:function(t,n){return e.getAction((function(e){switch(t.type){case U.ActionType.ADD:!function(e,t){var n,r=t.value,a=(t.index,e[ld].Items),i=qe()(r)?r:[r],o=x()(n=K()(i).call(i,(function(e){return"RadioGroupField"===e._Type_}))).call(n,(function(e){return e.Id})),l=0!==K()(i).call(i,(function(e){return"RadioField"===e._Type_&&!N()(o).call(o,e.Group)})).length;if(a.push.apply(a,(0,j.c)(i)),l){var c=K()(a).call(a,(function(e){return"RadioField"===e._Type_}));cd(e,c)}}(e,t);break;case U.ActionType.UPDATE:dd(e,t);break;case U.ActionType.DELETE:!function(e,t){var n=t.value,r=e[ld].Items,a=qe()(n)?n:[n];u()(a).call(a,(function(e){var t=B()(r).call(r,(function(t){return t.Id===e}));-1!==t&&va()(r).call(r,t,1)}))}(e,t)}}),n)}};return e},sd=["/**"," * ".concat((0,U.getLangMsg)("bosd.scripteditor.didmount.desc1"))," * ".concat((0,U.getLangMsg)("bosd.scripteditor.didmount.desc2"))," * ".concat((0,U.getLangMsg)("bosd.scripteditor.didmount.desc3"))," */","function didMount () {","  ","}"],fd=["/**"," * ".concat((0,U.getLangMsg)("bosd.scripteditor.unmount.desc1"))," * ".concat((0,U.getLangMsg)("bosd.scripteditor.unmount.desc2"))," * ".concat((0,U.getLangMsg)("bosd.scripteditor.unmount.desc3"))," */","function willUnmount () {","  ","}"],gd=(b()(ad=[]).call(ad,sd,fd),"page"),pd="field",md="control",vd=((0,U.getLangMsg)("formd.scripteditor.script.didmount"),(0,U.getLangMsg)("formd.scripteditor.script.willunmount"),(0,U.getLangMsg)("formd.scripteditor.script.onvaluechange"),(0,U.getLangMsg)("bosd.scripteditor.controlmethod"),(0,U.getLangMsg)("bosd.scripteditor.set"),(0,U.getLangMsg)("bosd.scripteditor.set.desc"),(0,U.getLangMsg)("bosd.scripteditor.get"),(0,U.getLangMsg)("bosd.scripteditor.get.desc"),(0,U.getLangMsg)("bosd.scripteditor.iseditable"),(0,U.getLangMsg)("bosd.scripteditor.iseditable.desc"),(0,U.getLangMsg)("bosd.scripteditor.isvisible"),(0,U.getLangMsg)("bosd.scripteditor.isvisible.desc"),(0,U.getLangMsg)("bosd.scripteditor.fieldmethod"),(0,U.getLangMsg)("bosd.scripteditor.setfieldvalue"),(0,U.getLangMsg)("bosd.scripteditor.setfieldvalue.desc"),(0,U.getLangMsg)("bosd.scripteditor.getfieldvalue"),(0,U.getLangMsg)("bosd.scripteditor.getfieldvalue.desc"),(0,U.getLangMsg)("bosd.scripteditor.ismustinput"),(0,U.getLangMsg)("bosd.scripteditor.ismustinput.desc"),(0,U.getLangMsg)("bosd.scripteditor.formmethod"),(0,U.getLangMsg)("bosd.scripteditor.getformconfig"),(0,U.getLangMsg)("bosd.scripteditor.getformconfig.desc"),(0,U.getLangMsg)("bosd.scripteditor.getformmeta"),(0,U.getLangMsg)("bosd.scripteditor.getformmeta.desc"),(0,U.getLangMsg)("bosd.scripteditor.getformstatus"),(0,U.getLangMsg)("bosd.scripteditor.getformstatus.desc"),(0,U.getLangMsg)("bosd.scripteditor.domhandler"),(0,U.getLangMsg)("bosd.scripteditor.on"),(0,U.getLangMsg)("bosd.scripteditor.on.desc"),(0,U.getLangMsg)("bosd.scripteditor.off"),(0,U.getLangMsg)("bosd.scripteditor.off.desc"),(0,U.getLangMsg)("bosd.scripteditor.getelement"),(0,U.getLangMsg)("bosd.scripteditor.getelement.desc"),(0,U.getLangMsg)("bosd.scripteditor.wait"),(0,U.getLangMsg)("bosd.scripteditor.wait.desc"),(0,U.getLangMsg)("bosd.scripteditor.css"),(0,U.getLangMsg)("bosd.scripteditor.css.desc"),(0,U.getLangMsg)("bosd.scripteditor.utils"),(0,U.getLangMsg)("bosd.scripteditor.loadfiles"),(0,U.getLangMsg)("bosd.scripteditor.loadfiles.desc"),(0,U.getLangMsg)("bosd.scripteditor.showmessage"),(0,U.getLangMsg)("bosd.scripteditor.showmessage.desc"),(0,U.getLangMsg)("bosd.scripteditor.createstyle"),(0,U.getLangMsg)("bosd.scripteditor.createstyle.desc"),(0,U.getLangMsg)("bosd.scripteditor.loadarttemplate"),(0,U.getLangMsg)("bosd.scripteditor.loadarttemplate.desc"),(0,U.getLangMsg)("bosd.scripteditor.othermethod"),(0,U.getLangMsg)("bosd.scripteditor.debugger"),(0,U.getLangMsg)("bosd.scripteditor.debugger.desc"),(0,U.getLangMsg)("bosd.scripteditor.console"),(0,U.getLangMsg)("bosd.scripteditor.console.desc"),function(e){var t=e.functionName,n=e.prefixCls,r=e.title,a=e.onEditClick,i=Yn(n);return z().createElement("div",{className:i("action-item-container")},z().createElement("div",{className:i("top")},z().createElement("div",{className:i("title")},r),z().createElement("div",{className:i("edit-btn"),onClick:a},(0,U.getLangMsg)("formd.actionpanel.key0001"))),z().createElement("div",{className:i("bottom")},z().createElement("div",{className:i("function-name")},t)))}),yd=function(e){var t=(0,V.useContext)(pe),n=t.prefixCls,r=t.getKdesignerApi,a=t.onActionEditFunctionClick,i=r(),o=i.data,l=(o.getRootId,o.findControl),c=(o.addDataChangeListener,o.getSubControls,i.selection.getActiveSelectedId());(0,U.useSelectionChangeForceUpdateEffect)(i,void 0);var d=l(c),u=(d.ContainerType,d._Type_),s=(d.FieldType,(0,V.useMemo)((function(){var e=function(e){return"FieldAp"===e?pd:ic()(e).call(e,"FormAp")?gd:md}(u);return{page:[{name:"didMount",desc:(0,U.getLangMsg)("formd.scripteditor.script.didmount")},{name:"willUnmount",desc:(0,U.getLangMsg)("formd.scripteditor.script.willunmount")}],field:[{name:"onValueChange",desc:(0,U.getLangMsg)("formd.scripteditor.script.onvaluechange")}]}[e]}),[u])),f="FieldAp"===u?d.Name:"";return z().createElement("div",{className:"".concat(n,"-action-container")},z().createElement("div",{className:"".concat(n,"-field-title")},f),null==s?void 0:x()(s).call(s,(function(e){return z().createElement(vd,{functionName:e.name,key:e.name,title:e.desc,prefixCls:n,onEditClick:function(t){!function(e){var t=e.name,n={text:t};"onValueChange"===t&&d&&(n.controlKey=d.Key,n.controlName=d.Name),null==a||a([{isInternal:!0,content:n}])}(e)}})})))};yd.tabKey="action",yd.getTabName=function(){return(0,U.getLangMsg)("formd.rightView.key0013")};var Cd=yd,hd=["__forceUpdate__"];function Ad(e,t){var n=a()(e);if(o()){var r=o()(e);t&&(r=K()(r).call(r,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ed(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?u()(n=Ad(Object(a),!0)).call(n,(function(t){(0,A.c)(e,t,a[t])})):f()?p()(e,f()(a)):u()(r=Ad(Object(a))).call(r,(function(t){v()(e,t,c()(a,t))}))}return e}(0,Zo.uG)();var xd=function(){},Id=z().memo(H(),(function(){return!0})),bd=(0,V.memo)((0,V.forwardRef)((function(e,t){var n=e.data,r=void 0===n?{}:n,a=e.meta,i=void 0===a?{}:a,o=e.onData,l=e.showMessage,c=void 0===l?function(e){window.console.log("showMessage-------",e)}:l,d=e.handleCustomInputEditor,u=void 0===d?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];U.console.log("handleCustomInputEditor-------",t)}:d,s=e.invokeAction,f=void 0===s?function(e,t){U.console.log("invokeAction-------",e,t)}:s,g=e.baseControl,p=e.getEntityModel,m=e.commonUtil,v=void 0===m?Wc({},{fixColor:function(e){return e},mergeCommonClassNames:function(){}},jc):m,E=e.getPropertyAliasValue,I=void 0===E?xd:E,k=e.invokeSaveAction,F=void 0===k?xd:k,T=e.onApi,M=void 0===T?xd:T,P=e.isDataWithMetaMode,R=void 0!==P&&P,G=e.onRootPanelMount,O=e.viewCollapseState,H=void 0===O?{}:O,j=e.mulLangProperty,q=e.clientParams,J=void 0===q?{}:q,Q=e.lockPropsMap,X=void 0===Q?{}:Q,Y=e.onActionEditFunctionClick,$=e.designerConfig,te=void 0===$?{}:$,ne={id:"Id",type:"_Type_",name:"Name",key:"Key",parentId:"ParentId",items:"Items",fieldType:"FieldType",EntityData:"EntityData"},ae="kdesigner-form-designer",oe=(0,V.useRef)(r),le=(0,V.useMemo)((function(){return r.entitytree}),[]),ce=(0,V.useRef)(v),de=(0,V.useRef)(null),ue=(0,V.useCallback)((function(e){return e}),[]);(0,V.useEffect)((function(){oe.current=r;var e=el(r,R);de.current.data.resetData(e,!1),U.eventBus.emit(aa)}),[r]),(0,V.useEffect)((function(){var e,t;M(Ed(Ed({attrActions:null===(e=we.current)||void 0===e?void 0:e.attrActions,resetPatches:null===(t=we.current)||void 0===t||null===(t=t.dataContext)||void 0===t?void 0:t.resetPatches,setProperty:Zc({dataRef:oe,kdesignerApi:de,keywordMapping:ne,designerContextValueRef:ke}),getKdesignerApiRef:function(){return de},createUIElement:$c({kdesignerApi:de,keywordMapping:ne}),getDataRef:function(){return oe.current}},ke.current||{}),{},{resetSideBar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=de.current,n={toolbox:"ControlView",outline:"outline",entitytree:"entityTree"},r=x()(e).call(e,(function(e){return n[e]||e}));t.views.setViewsVisibleSetting("left")(r)},refreshEntityData:function(e){var t=e[0]||{},n=t.entitymeta,r=t.entitytree;oe.current=Ed(Ed({},oe.current),{},{entitymeta:n,entitytree:r}),o&&o(oe.current),U.eventBus.emit(aa)},removeUIElements:od({kdesignerApi:de})}))}),[]);var se=(0,V.useMemo)((function(){var e,t;return b()(e=b()(t="https://".concat("vip.")).call(t,"kingdee.")).call(e,"com","/knowledge/specialDetail/218022218066869248")}),[]),fe=(0,V.useMemo)((function(){return function(e,t,n){return(0,U.adaptorMeta)(e,(0,U.mergeTransformKeyMap)(U.transformKeyMap,(0,A.c)({},"items",["Enum",Qo])),t,void 0,n)}(i,r.formmeta,{getLangMsg:ce.current.getLangMsg})}),[]),ge=el(r,R),me=(0,V.useCallback)((function(e){switch(e){case"main":return{main:Uo};case"left":return{outline:cl,entityTree:R?null:zc};case"right":return{property:Ol,style:El,layout:Rl,action:Cd};default:return{}}}),[]),ve=(0,V.useCallback)((function(e,t,n){"CustomeStyles"===e?U.console.log('need bos"s CodeEditWrapper'):u(e,t,n)}),[u]),Ce=(0,V.useCallback)((function(e,t,n){var r=de.current.aliasData,a=t,i=a[ne.type];if(R&&n.isEntityData){var o=oe.current.entitymeta.Items,l=S()(o).call(o,(function(e){return e.Id===a.Id}));i=(null==l?void 0:l[ne.type])||i,a=l||a}var c=w()((function(){var t,r=n.Alias,i=n.EmptyDisplay;!r||!i&&N()(t=[void 0,""]).call(t,a[e])||I(e,a,n)}));if(r.hasAliasDataPropValue(i,e,a[e])){var d=r.getAliasDataPropValue(i,e,a[e]);return d&&clearTimeout(c),d}}),[]),he=function(e){var t=de.current,n=t.selection,r=t.data;if(r.getRootId()===e)return!0;var a=["FlexPanelAp","CardEntryViewAp","SubCardEntryViewAp","CardEntryFlexPanelAp","CardFlexPanelAp","AdvConChildPanelAp","SplitPanelAp","ListCardViewAp","MessageCarouselContainerAp","CardEntryFixRowAp","CardEntryRowAp","CardRowPanelAp","MessageCarouselFlexPanelAp","GridFlatPanelAp","EntryFieldContainerAp","CardEntryFixRowPanelAp"],i=n.getSelection();if(i.length>1){var o=r.findControl(i);return L()(o).call(o,(function(e){var t=r.getRealControlType(e);return N()(a).call(a,t)}))}var l=r.findControl(e),c=r.getRealControlType(l);return N()(a).call(a,c)},Ae=function(e){return de.current.data.getRootId()!==e},Ee=function(e){var t=de.current.data,n=["BillFormAp","BasedataFormAp","FieldAp","FormAp"],r=t.findControl(e),a=t.getRealControlType(r),i=oe.current,o=i.formmeta,l=i.isv,c=o.Isv;return N()(n).call(n,a)&&c===l},xe=(0,V.useMemo)((function(){return ud()}),[]),Ie=(0,V.useRef)(new(D())),be=(0,V.useRef)(0),ke=(0,V.useRef)({getBaseControlByType:function(e){return g&&g[e]||En},getDataRef:function(){return oe.current},getEntityTree:function(){return le},getModel:function(){return p?Rc(p(),de.current,(function(){return oe.current.entitymeta})):jc},getKdesignerApi:function(){return de.current},getCommonUtil:function(){return id(ce.current)},entityDataApi:xe,isDataWithMetaMode:R,getForceUpdateAction:function(e){return Ie.current.add(e),(0,U.createUpdateAction)([[e,{__forceUpdate__:be.current++}]])},prefixCls:ae,getLanguage:function(){return oe.current.language},getDesignerModelType:function(){var e;return null===(e=oe.current.formmeta)||void 0===e?void 0:e.ModelType},canAddControlFromEntityNode:function(e,t,n){if(1===e){var r,a=de.current.data.findControl(n),i=de.current.data.getContainerControl(a),o=B()(r=de.current.data.findControlByCondition((function(e){return e.ParentId===i.Id}))).call(r,(function(e){return e.Id===a.Id}));null!=o&&(i=(0,Zo.cp)(i,(function(e){e.TargetIndex=o})));var l=oe.current.entitytree,c=Cc(l,t);return f("createUIElemntByEntityItem",[c,i||{}]),!0}return!1},createFormDataFromEntityData:function(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=(oe.current||{}).entitymeta,o=de.current;if(!i||!o)return{};var l="string"==typeof e?e:e.Id,c=S()(r=i.Items).call(r,(function(e){return e.Id===l})),d=o.dataFactory({type:t,parentId:n,transferData:(0,h.c)({},a,c?{Name:c.Name,FieldId:l,Key:c.Key}:{})});return{action:(0,U.createAddAction)([d],{isAddByEntity:!0}),exitEntityData:!!c,entityData:c}},queryEntityByFieldId:function(e){var t;if(!R){var n=(oe.current||{}).entitymeta,r=void 0===n?{Items:[]}:n,a="string"==typeof e?e:e.Id;return S()(t=r.Items).call(t,(function(e){return e.Id===a}))}},invokeSaveAction:function(){F&&F()},invokeAction:f,getLayoutVisible:he,getBusinessVisible:Ae,isActionTabVisible:Ee,filterProperty:function(e,t){return(0,U.filterProperty)(ke.current.getModel,ke.current.getKdesignerApi,"formmeta")(e,t)},onRootPanelMount:G,clientParams:J,lockPropsMap:X,onActionEditFunctionClick:Y,designerConfig:te});(0,V.useEffect)((function(){ke.current.lockPropsMap=X}),[X]);var Se=(0,V.useMemo)((function(){return{showMessage:c,getViews:me,processPropertyName:ue,keywordMapping:ne,onCustomInputClick:ve,controlViewSetting:{onHelpIconClick:function(){var e;e=se,window.open(e,"_blank")}},onViewActiveKeyChange:function(e){var t=e.position,n=e.key;"left"===t&&"entityTree"===n&&f(aa,[])},controlViewMode:"horizontal",viewSetting:{layout:[function(e){var t=de.current;if(t.data.getRootId()===e)return!0;var n=["FlexPanelAp","CardEntryViewAp","SubCardEntryViewAp","CardEntryFlexPanelAp","CardFlexPanelAp","AdvConChildPanelAp","SplitPanelAp","ListCardViewAp","MessageCarouselContainerAp","CardEntryFixRowAp","CardEntryRowAp","CardRowPanelAp","MessageCarouselFlexPanelAp","GridFlatPanelAp","EntryFieldContainerAp","CardEntryFixRowPanelAp"],r=t.data.findControl(e);return N()(n).call(n,r._Type_)}],business:[function(e){return de.current.data.getRootId()!==e}]},viewCollapseState:{left:H.left,right:H.right},filterProperty:function(e,t){return(0,U.filterProperty)(ke.current.getModel,ke.current.getKdesignerApi,"formmeta")(e,t)},getPropertyEditors:tc,getEditorFormatValue:Ce,preHandle:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Lc.apply(void 0,b()(t).call(t,[Ed({invokeAction:f},ke.current)]))},getOutlineItemIcon:function(e){return z().createElement(W.Icon,{prefix:"designericon",type:(0,U.getControlIconMap)(e),className:"".concat(ae,"-control-icon")})},designerContextValue:ke.current,canAddCallback:ed({showMessage:c,kdesignerApi:de,keywordMapping:ne}),getValue:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return vc.apply(void 0,b()(t).call(t,[ke.current]))},globalHandleChange:function(e,t,n,r,a){if(r.isEntityData){var i=(0,U.createPropertyChangeByActions)(a,t,n,n,e,de.current.data,de.current.getModel);return de.current.data.batchUpdateControlPropertyValues(xe.getBatchAction((0,U.createUpdateAction)([[e.Id,i]]),e.Id)),!0}return!1},getLangMsg:ce.current.getLangMsg}}),[c,me,ue,ve,tc,Ce]);U.console.log(e,Se),U.console.log("adaptorMeta",fe),U.console.log("adaptorData",ge);var Fe=(0,V.useMemo)((function(){return{prefixCls:"kdesigner",getPrefixCls:function(e,t,n){var r;return n||(e=e||"kdesigner",t?b()(r="".concat(e,"-")).call(r,t):e)}}}),[]),we=(0,V.useRef)(null),Te=(0,V.useCallback)((function(e,t){var n,r;oe.current.formmeta=Ed(Ed({},oe.current.formmeta),{},{Items:x()(n=e.Items).call(n,(function(e){if(Ie.current.has(e.Id)){var t=e;t.__forceUpdate__;return(0,C.c)(t,hd)}if("FlatFieldAp"===e[ee]){for(var n=e[ie],r=de.current.data.getParentControl(e[Z]);r&&"EntryAp"!==r[ee];)r=de.current.data.getParentControl(r[Z]);var a=r&&r[Z]||"",i=de.current.data.findControlByCondition((function(e){if(e[ie]!==n||"EntryFieldAp"!==e[ee])return!1;if(e[re]===a)return!0;for(var t=de.current.data.getParentControl(e[Z]);t&&"EntryAp"!==t[ee];)t=de.current.data.getParentControl(t[Z]);return(t&&t[Z]||"")===a}));if(i.length>0){var o=i[0][Z];e=Ed(Ed({},e),{},(0,A.c)({},"relateEntryFieldId",o))}}return e}))});var a,i=_()(r=e.Items).call(r,(function(e,t){return e[t.Id]=t,e}),{});R&&(oe.current.entitymeta=Ed(Ed({},oe.current.entitymeta),{},{Items:x()(a=e.EntityData.Items).call(a,(function(e){var t=i[e.Id];return t?Ed(Ed({},e),{},{Key:t.Key,Name:t.Name}):e}))}));o&&o(oe.current,t)}),[o]);(0,V.useEffect)((function(){var e=de.current.data.addDataChangeListener((function(e){var t=e.value;Te(t,e)}));return function(){e&&e()}}),[]),(0,V.useEffect)((function(){var e=de.current,t=e.data.addDataChangeListener((function(t){var n,r=t.type;N()(n=[U.DataChangeEventType.Undo,U.DataChangeEventType.Redo]).call(n,r)&&e.aliasData.setAliasDataPropValue([{type:"__forceUpdat__",propName:"__forceUpdat__",value:"__forceUpdat__",alias:be.current++}])}));return function(){t&&t()}}),[]);var Ne=(0,V.useCallback)((function(e){de.current=Ed(Ed({},e),{},{originApi:e,selection:Ed(Ed({},e.selection),{},{getActiveSelectedId:function(){return e.selection.getActiveSelectedId()||e.data.getRootId()}}),meta:Ed(Ed({},e.meta),{},{canAdd:function(t,n){var r=e.meta.canAdd(t,n);return"object"===(0,y.c)(r)?(c(r.message),r.success):r}}),getModel:ke.current.getModel})}),[]);(0,V.useEffect)((function(){var e=de.current,t=e.selection,n=e.views,r=function(){var e,n=t.getActiveSelectedId();return K()(e=[Ae(n)&&"business","style",he(n)&&"layout",Ee(n)&&"action"]).call(e,Boolean)},a=t.addSelectChangeListener((function(e){e.value;n.setViewsVisibleSetting("right")(r())}));return n.setViewsVisibleSetting("right")(r()),function(){a&&a()}}),[]);var Me=(0,V.useMemo)((function(){return{mulLangProperty:j}}),[j]);return z().createElement(z().Fragment,null,z().createElement(W.ConfigProvider,{value:Fe},z().createElement(pe.Provider,{value:ke.current},z().createElement(ye.Provider,{value:Me},z().createElement(Id,{onApi:Ne,ref:we,globalConfig:Se,meta:fe,data:ge})))))}))),kd=(0,U.ErrorBoundaryWrap)(bd,"form-designer")},39160:function(){},68756:function(){},22280:function(){},71120:function(){},19600:function(){}}]);