(self.webpackChunkform_designer=self.webpackChunkform_designer||[]).push([[704,820,400],{83704:function(e,t,n){"use strict";n.r(t),n.d(t,{FormDesigner:function(){return Md}});n(19600);var r=n(39448),a=n.n(r),i=n(55748),l=n.n(i),o=n(7312),c=n.n(o),d=n(54120),u=n.n(d),s=n(63808),f=n.n(s),g=n(45040),m=n.n(g),p=n(58496),C=n(34984),v=n(2664),y=n(30112),A=n(75984),h=n.n(A),I=n(81744),E=n.n(I),x=n(47332),k=n.n(x),b=n(13760),S=n.n(b),N=n(82600),w=n.n(N),T=n(30479),F=n.n(T),M=n(47976),D=n.n(M),L=n(59312),P=n.n(L),B=n(29636),R=n.n(B),G=n(45076),O=n.n(G),z=n(18860),j=n.n(z),_=n(43400),K=n.n(_),V=n(18040),U=n.n(V),W=n(54116),H=n(81043),q=n(72048),Z=n(65624),Y=n.n(Z),Q="Id",J="Type",X="FieldType",$="FieldName",ee="_Type_",te="Key",ne="Name",re="ParentId",ae="Items",ie="FieldId",le="LabelDirection",oe="Style",ce="Border",de="fieldstyle",ue="lDir",se="text-align",fe="TableHeaderCellBackColor",ge=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.isPC,a=void 0===r||r,i=n.excludeType,l=void 0===i?"":i,o=n.ctrlType,d=void 0===o?"":o,u=e[Q],s=(0,_.useMemo)((function(){var e,n=[];return c()(e=t[ae]).call(e,(function(e){var t=e[ee];if(!(e[re]!==u||l&&l===t||d&&d!==t)){var r=Xi(e,{isPC:a});r&&n.push(K().cloneElement(r,{key:e[Q]}))}})),n}),[u,t,a]);return s},me=K().createContext({});me.displayName="DesignerContext";var pe=K().createContext({});pe.displayName="MainViewContext";var Ce=K().createContext({});Ce.displayName="DesignerTableContext";var ve=K().createContext({});ve.displayName="DesignerLang";var ye,Ae,he="data-control-id",Ie="data-selection",Ee="data-mouse-over",xe="data-cut-control",ke="data-auxiliary-line",be="data-origin-format",Se="data-batch-format",Ne="data-drag-control-ids",we="data-drag-direction",Te="data-drag-tree-affected-control",Fe="data-outline-drag-tree-node",Me=function(e){return(0,y.c)({},he,e[Q])},De=function(){var e=(0,_.useCallback)((function(e){var t;e.stopPropagation();var n=e.currentTarget.dataset.controlId,r=document.querySelectorAll(E()(t="[".concat(he,'="')).call(t,n,'"]'));c()(r).call(r,(function(e){e.setAttribute(Ee,"true")}))}),[]),t=(0,_.useCallback)((function(e){var t;e.stopPropagation();var n=e.currentTarget.dataset.controlId,r=document.querySelectorAll(E()(t="[".concat(he,'="')).call(t,n,'"]'));c()(r).call(r,(function(e){e.removeAttribute(Ee)}))}),[]);return{onMouseOver:e,onMouseOut:t}},Le=n(39568),Pe=n.n(Le);function Be(){return"Win32"==window.navigator.platform||"Windows"==window.navigator.platform}function Re(){return"Mac68K"==window.navigator.platform||"MacPPC"==window.navigator.platform||"Macintosh"==window.navigator.platform||"MacIntel"==window.navigator.platform}var Ge=Re()?"Mac":"X11"!=window.navigator.platform||Be()||Re()?function(){var e;return Pe()(e=String(window.navigator.platform)).call(e,"Linux")>-1}()?"Linux":Be()?"Windows":"":"Unix",Oe=!0,ze=function(e){Oe=e},je=function(){return Oe};function _e(e){return Re()?e.metaKey:e.ctrlKey}navigator.userAgent.match(/Electron\/(\d+)/),navigator.userAgent.match(/Trident\/(\d+)/);var Ke=!!navigator.userAgent.match(/Firefox\/(\d+)/),Ve=(navigator.userAgent.match(/Chrome\/(\d+)/),navigator.userAgent.match(/Edge\/(\d+)/),w()(ye=window.location.hash).call(ye,"&preview=true"),w()(Ae=window.location.hash).call(Ae,"&noLoadYZJ=true"),Ke);function Ue(e){var t=e||window.event;return"Mac"===Ge?t.metaKey:t.ctrlKey}function We(e){return e.shiftKey}var He=n(12388),qe=n.n(He),Ze=n(12640),Ye=n.n(Ze),Qe=n(67928),Je=function(e){return e?qe()(e)?e:[e]:[]};var Xe,$e=function(e){for(;!e.dataset.controlId&&"ui-designer-root"!==e.id;)e=e.parentNode;return e},et=function e(t,n,r,a){var i,l,o=n.Id,d=function(e,t,n){var r,a=(0,Qe.cloneDeep)(e);return a[re]=t,a[Q]=(0,V.createUUid)(),n&&c()(r=["FieldId","EntryId","CardEntryId"]).call(r,(function(e){a[e]&&(a[e]=a[Q])})),a.Inherit&&(a.Inherit=!1),a}(n,r,a),u=j()(i=t[ae]).call(i,(function(e){return e[re]===o}));return E()(l=[d]).call(l,(0,Qe.flattenDeep)(h()(u).call(u,(function(n){return e(t,n,d[Q],a)}))))},tt=function(e,t,n){var r,a=R()(e).call(e,(function(e){return e[Q]===t})),i=R()(e).call(e,(function(e){return e[Q]===n}));if((a=-1===a?0:a)>(i=-1===i?0:i)){var l=[i,a];a=l[0],i=l[1]}return null===(r=Ye()(e).call(e,a,i+1))||void 0===r?void 0:h()(r).call(r,(function(e){return e[Q]}))},nt=["Width","Height","FontSize","ForeColor","BackColor","Style","LabelDirection","LabelWidth","TextAlign","FieldForeColor","FieldBackColor","FieldTextAlign","Radius","FieldFontSize","HorAlignment","VerAlignment","HorizontalFill","VerticalFill","Bold","Italic","UnderLine","ValueAreaStyle","MobFieldPattern","FieldStyle","FontWeight","FullLine"],rt=function(e){return function(t,n){if(t&&0!==(null==n?void 0:n.length)){var r=e.findControl(t),a=r[ee],i=O()(n).call(n,(function(t,n){var r;return E()(r=[]).call(r,(0,H.c)(t),(0,H.c)(e.getAllSubControlIds(n)))}),[]),l=O()(i).call(i,(function(t,n){var i,l,o=null===(i=e.findControl(n))||void 0===i?void 0:i[ee];if(a!==o)return t;var c=O()(nt).call(nt,(function(e,t){return e[t]=r[t],e}),{});return E()(l=[]).call(l,(0,H.c)(t),[[n,c]])}),[]);e.batchUpdateControlPropertyValues((0,V.createUpdateAction)(l))}}},at=function(){var e=(0,_.useContext)(me).getKdesignerApi,t=(0,_.useMemo)((function(){return e()}),[]),n=t.data,r=t.selection,a=r.setSelect,i=r.appendSelect,l=r.getSelection,o=(0,_.useCallback)((function(e){var t;e.stopPropagation();var r=l(),o=n.getRootId(),c=document.querySelector(E()(t="[".concat(he,'="')).call(t,o,'"]')),d=$e(e.target).dataset.controlId,u=d?[d]:[],s=!1;if((Ue(e)||We(e))&&r.length>0&&(s=n.isSiblings(r[0],d)),s){if(Ue(e))if(w()(r).call(r,d)){var f=j()(r).call(r,(function(e){return e!==d}));f.length&&a(f)}else i([d]);else if(We(e)){var g=r[r.length-1];if(g===d)return;var m=n.getAllSiblings(g);(u=tt(m,g,d))&&a(u)}}else a([d]);var p=document.querySelector("[".concat(be,"]"));if(p){var C=p.dataset.controlId||"";if(rt(n)(C,u),null!=c&&c.dataset.batchFormat)return;c.style.cursor="",V.eventBus.emit("clear-form-status",!1),p.removeAttribute(be)}}),[]);return o},it=function(){var e=(0,_.useContext)(me),t=e.getKdesignerApi,n=e.getCommonUtil,r=(0,_.useMemo)((function(){return t()}),[]),a=r.data,i=r.selection.getActiveSelectedId,l=n().dbClickToChangeProperty,o=(0,_.useMemo)((function(){return je()}),[]),c=(0,_.useCallback)((function(e,t){var n=i(),r=(0,y.c)({},e,t);a.batchUpdateControlPropertyValues((0,V.createUpdateAction)([[n,r]]))}),[]);return(0,_.useCallback)((function(e){e.stopPropagation();var t=i(),n=a.findControl(t),r=n[X],d=n[ee];l(t,!o,c,{type:r||d})}),[o,c])},lt=["Direction","Wrap","Grow","Shrink","Overflow","AlignSelf","AlignContent","AlignItems","JustifyContent","Name","Collapsible","Clickable","FloatingDock","DockingPosition","Hidden","Maximize"],ot={ButtonAp:["Name","Grow","Shrink","AlignSelf","ImageKey","ButtonStyle","ImgWidth","ImgHeight","Hidden","FollowTheme"],FlexPanelAp:lt,CardEntryFlexPanelAp:lt,CardEntryFixRowPanelAp:lt,CardFlexPanelAp:lt,GridFlatPanelAp:lt,EmbedFormAp:lt,UndefinedControl:["Name","Hidden","Direction","Wrap","Grow","Shrink","Overflow","AlignSelf","AlignContent","AlignItems","JustifyContent"],AttachmentPanelAp:["Grow","Shrink","AlignSelf","Name","Collapsible",["ExtendName","extName"],"Hidden"],HyperlinkAp:[["Name","title"],["ShowUnderline","underline"],"Grow","Shrink","AlignSelf","Hidden"],LabelAp:["Name","Grow","Shrink","AlignSelf","LabelStyle","AutoTextWrap","Hidden"],QRCodeAp:[["QrCodeShowStyle","QrCodeStyle"],["FontSize","fontSize"],"Hidden"],ProgressBarAp:["Grow","AlignSelf","Hidden"],CarouselFigureAp:["Grow","Shrink","Hidden"],ImageAp:["ImageKey","Grow","Shrink","AlignSelf","Hidden"],ImageListAp:["Grow","Shrink","AlignSelf","Hidden"],BarChartAp:["Name","Grow","Shrink","AlignSelf","ShowTitle","TitleAlign","ShowLegend","LegendAlign","LegendVertical","Hidden"],CustomChartAp:["Name","Grow","Shrink","AlignSelf","ShowTitle","TitleAlign","ShowLegend","LegendAlign","LegendVertical","Hidden"],GaugeChartAp:["Name","Grow","Shrink","AlignSelf","ShowTitle","TitleAlign","ShowLegend","LegendAlign","LegendVertical","Hidden"],HistogramChartAp:["Name","Grow","Shrink","AlignSelf","ShowTitle","TitleAlign","ShowLegend","LegendAlign","LegendVertical","Hidden"],PieChartAp:["Name","Grow","Shrink","AlignSelf","ShowTitle","TitleAlign","ShowLegend","LegendAlign","LegendVertical","PieRadius","Hidden"],PointLineChartAp:["Name","Grow","Shrink","AlignSelf","ShowTitle","TitleAlign","ShowLegend","LegendAlign","LegendVertical","Hidden"],RadarChartAp:["Name","Grow","Shrink","AlignSelf","ShowTitle","TitleAlign","ShowLegend","LegendAlign","LegendVertical","Hidden"],FieldsetPanelAp:E()(Xe=["RelatedChildrenIds"]).call(Xe,lt),NameCombinePanelAp:["Name","Collapsible","RelatedChildrenIds","Hidden"],ListColumnAp:["Name","Grow","Shrink","AlignSelf"],ListCardViewAp:["Name","Grow","Shrink","Direction","Wrap","AlignItems","AlignSelf","JustifyContent","AlignContent"],F7SelectedListAp:["Name","Grow","Shrink"],BillListAp:["Name","Direction","Wrap","Grow","Shrink","Overflow","AlignSelf","AlignContent","AlignItems","JustifyContent"],CardRowPanelAp:["Shrink","Grow","AlignSelf","AlignContent","AlignItems","JustifyContent","Direction","Wrap"],AdvConAp:["Name","Collapsible","Grow","Shrink","AlignSelf","AlignItems","AlignContent","JustifyContent","CtlTips","Maximize","Hidden"],AdvConSummaryPanelAp:["Direction","Wrap","Grow","Shrink","Overflow","AlignSelf","AlignContent","AlignItems","JustifyContent","Name","Collapsible","Hidden"],AdvConToolbarAp:["Name","Hidden"],AdvConBarItemAp:["Name","DropdownItems","OperationKey","Key"],AdvConChildPanelAp:["Direction","Wrap","Grow","Shrink","Overflow","AlignSelf","AlignContent","AlignItems","JustifyContent","Name","Collapsible","Clickable","FloatingDock","DockingPosition","Hidden"],FloatMenuAp:["Align","Top","Hidden"],FloatMenuItemAp:["Name","Grow","Shrink","AlignSelf","fontClass"],TabAp:["Grow","Shrink","AlignSelf","AlignItems","AlignContent","JustifyContent","HideNavigation","CanCloseAll","CanSlide","CanFull","TabStyle","TabDirection","ShowDropdownIcon"],TabPageAp:["Name","HomeTab"],WizardAp:["WizardStyle","WizardType","TextDirection","StepsOptions","StepLength","Grow","Shrink","StatusIcon","TabId"],HomePageTabAp:["TabId"],IFrameAp:["Grow","Shrink","Hidden"],ClientAjaxAp:["Name"],HtmlAp:["HtmlContent","Direction","Grow","Shrink","AlignSelf"],TaskNoticeAp:["Grow","Shrink"],EntryAp:["Direction","Wrap","Overflow","Grow","Shrink","ShowSelChexkbox","ShowSeq","Name","Collapsible","RowHeight","HeadHeight","ShowFlatPanel","AutoRowHeight","Multi"],DataGridAp:["Direction","Wrap","Overflow","Grow","Shrink","ShowSelChexkbox","ShowSeq","Name","Collapsible","RowHeight","HeadHeight","ShowFlatPanel","AutoRowHeight","Multi"],AnchorControlAp:["Grow","Shrink","AlignSelf"],CardEntryFixRowAp:["Shrink","Grow","AlignSelf","AlignContent","AlignItems","JustifyContent","Direction","Wrap","Type"],EntryFieldContainerAp:["Name","Direction","Wrap","Overflow","Grow","Shrink","AlignItems","AlignSelf","AlignContent","JustifyContent"],CardEntryRowAp:["Height","Width"],FieldgroupPanelAp:["Grow","Shrink","Overflow","AlignSelf","Name"],ToolbarAp:["MoreButtonVisible"]},ct=function(e){var t=e[ee],n=(0,_.useMemo)((function(){return Je(ot[t]||ot.UndefinedControl)}),[t]),r=(0,_.useContext)(me).getKdesignerApi,a=function(e,t,n){return O()(e).call(e,(function(e,r){var a=qe()(r)?r:[r,r],i=(0,q.c)(a,2),l=i[0];return e[i[1]]=(0,V.getFieldProperty)(t,l,n),e}),{})}(n,e,(0,_.useMemo)((function(){return r()}),[]));return a.isDesigner=!0,a};function dt(e,t){var n=D()(e);if(a()){var r=a()(e);t&&(r=j()(r).call(r,(function(t){return l()(e,t).enumerable}))),n.push.apply(n,r)}return n}function ut(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?c()(n=dt(Object(a),!0)).call(n,(function(t){(0,y.c)(e,t,a[t])})):u()?f()(e,u()(a)):c()(r=dt(Object(a))).call(r,(function(t){m()(e,t,l()(a,t))}))}return e}var st=function(e){var t={},n=e.Width,r=e.Height;return n&&(t.width=n),r&&(t.height=r),t},ft=function(e,t,n){var r;t&&c()(r=D()(t)).call(r,(function(r){var a=t[r],i=(null==n?void 0:n[r])||r;e[i]=a}))},gt=function(e,t,n){var r=(0,(0,_.useContext)(me).getCommonUtil)(),a=r.fixColor,i=r.getImgFullPath,l=r.fileserver,o=e.Hidden,c=e.Invisible,d={fixColor:a,getImgFullPath:i,fileserver:l};if(o||c)return{display:"none"};var u=function(e,t){var n={},r=t.fixColor,a=t.getImgFullPath,i=t.fileserver,l=e.ForeColor,o=e.BackColor,c=e.FontSize,d=e.FontWeight,u=e.BackgroundImg,s=e.BKFull,f=e.BKRepeat;return l&&(n.color=r(l)),o&&(n.backgroundColor=r(o)),c&&12!==c&&(n.fontSize=c),d&&(n.fontWeight=d),u?n.backgroundImage="url(".concat(a(i,u),")"):delete n.backgroundImage,s?n.backgroundSize="100% 100%":delete n.backgroundSize,f?n.backgroundRepeat=f:delete n.backgroundRepeat,n}(e,d),s=function(e){var t={};return"center"===e.Align?t.alignItems="center":"right"===e.Align&&(t.alignItems="flex-end"),t}(e),f=st(e),g=function(e,t,n){var r=t.fixColor,a={},i=e.Radius,l=e.Style,o=e.FieldStyle;if(i&&(a.borderRadius=i),l){var c=l.Margin,d=l.Padding,u=l.Border;if(n&&1===o||ft(a,c,{Top:"marginTop",Left:"marginLeft",Bottom:"marginBottom",Right:"marginRight"}),ft(a,d,{Top:"paddingTop",Left:"paddingLeft",Bottom:"paddingBottom",Right:"paddingRight"}),u){var s=u.Top,f=u.Left,g=u.Right,m=u.Bottom;if(s){var p=s.split("_");p[p.length-1]=r(p[p.length-1]),a.borderTop=p.join(" ")}if(f){var C=f.split("_");C[C.length-1]=r(C[C.length-1]),a.borderLeft=C.join(" ")}if(g){var v=g.split("_");v[v.length-1]=r(v[v.length-1]),a.borderRight=v.join(" ")}if(m){var y=m.split("_");y[y.length-1]=r(y[y.length-1]),a.borderBottom=y.join(" ")}}}return a}(e,d,n),m=function(e,t){var n=e.ZIndex,r=t.originZIndex,a={};return(0,Qe.isUndefined)(r)||(a.zIndex=n),a}(e,t),p=function(e){var t=e.TextAlign,n={};return t&&"default"!==t&&(n.textAlign=t),n}(e);return ut(ut(ut(ut(ut(ut({},u),s),f),g),m),p)},mt=n(71252),pt=n.n(mt),Ct=function(e){var t,n=(0,_.useContext)(V.DataFactoryContext).metaApi,r=e[ee],a=e.Inherit,i=n.getControlMeta(r).IsContainer,l=void 0!==i&&i;return{className:pt()((0,y.c)((0,y.c)({},"inherit-triangle",a),"container-component",l||w()(t=["HtmlAp"]).call(t,r)))}},vt=n(39832),yt=n.n(vt),At=null;function ht(e,t,n){var r;!function(){At&&document.body.removeChild(At);At=null}(),At=document.createElement("div");var a=(0,V.getControlIconMap)(e),i=E()(r='\n    <i class="designericon designericon-'.concat(a,'" style="font-size:20px"></i>\n    ')).call(r,t,"\n  ");return At.innerHTML=i,At.style.cssText="position:absolute;top:-9999px;left:-9999px;opacity:1!important;",document.body.appendChild(At),At}var It=function(e,t,n){e.dataTransfer&&e.dataTransfer.setDragImage&&(e.dataTransfer.dropEffect="move",e.dataTransfer.setDragImage(ht(t,n),-20,-24))},Et="kdesigner-tree-node-drag-line-by-control",xt="control",kt="",bt=function(e,t){(xt=null==t?void 0:t.getViewActiveKey("left"))!==kt&&t&&(t.setViewActiveKey("left")(kt),kt="")},St=["\\"],Nt=function(e){if(!Y()(St).call(St,(function(t){return Pe()(e).call(e,t)>=0}))){var t=e.replace("/","\\/").replace("=","\\="),n=document.querySelector(".kdesigner-tree-node-item-id".concat(t," .kdesigner-tree-node-root"));if(n){var r=null==n?void 0:n.className,a=(0,H.c)(document.querySelectorAll(".".concat(Et)));(w()(r).call(r,Et)||0!==a.length&&a)&&c()(a).call(a,(function(e){e.className=e.className.replace(" ".concat(Et),"")}))}}},wt=function(e){var t=e||window.event;t.preventDefault(),t.stopPropagation(),t.returnValue=!1},Tt=["data-left-drag-style","data-right-drag-style","data-top-drag-style","data-bottom-drag-style",we,"data-default-drag-style"],Ft=function(e){c()(Tt).call(Tt,(function(t){return e.removeAttribute(t)}))},Mt=function(){Ve&&S()((function(){var e=document.querySelectorAll("[".concat(we,"]"));e.length&&c()(e).call(e,(function(e){return Ft(e)}))}),200)},Dt=function(e){var t,n=document.querySelectorAll("[".concat(Te,"=true]"));c()(n).call(n,(function(e){return e.removeAttribute(Te)}));var r=document.querySelector("[".concat(Fe,"]")),a=document.querySelector(E()(t="[".concat(he,'="')).call(t,e,'"]'));r?null==a||a.setAttribute(Te,"true"):null==a||a.removeAttribute(Te)},Lt=function(e,t){var n,r;Mt(),0!==(r=document.querySelectorAll(".".concat(Et))).length&&r&&c()(r).call(r,(function(e){e.className=e.className.replace(" ".concat(Et),"")}));var a=document.querySelector(E()(n="[".concat(he,"='")).call(n,t,"']"));null==a||a.removeAttribute(Ne)},Pt=function(e){var t=(0,_.useContext)(me).getKdesignerApi,n=(0,_.useContext)(V.GlobalConfigContext).env,r=(0,_.useMemo)((function(){return t()}),[]),a=r.data,i=r.selection,l=r.meta,o=r.dataFactory,c=r.views,d=a.getRootId(),u=d===e[Q],s=i.getSelection,f=i.setSelect;(0,_.useEffect)((function(){var e=function(e){Lt(0,d)};return V.eventBus.on("drag-tree-node",Dt),document.body.addEventListener("dragend",e),function(){V.eventBus.off("drag-tree-node",Dt),document.body.removeEventListener("dragend",e)}}),[]);var g=(0,_.useCallback)((function(e){var t=n[V.CONTROL_DRAG_DATA].data,r=(void 0===t?{}:t).Id,i=a.findControl(e)[ee],c=l.getControlMeta(i).IsContainer,u=void 0!==c&&c?e:a.getParentControlId(e)||d,s=a.findControl(u)[ee];if(l.canAdd(r,s)){var g=o({type:r,parentId:u});a.addControl((0,V.createAddAction)(g)).then((function(e){var t=e[0].value;f(qe()(t)?[t[0][Q]]:[t[Q]])})),delete n[V.CONTROL_DRAG_DATA]}}),[n[V.CONTROL_DRAG_DATA]]),m=(0,_.useCallback)((function(e){var t;e.stopPropagation();var n=document.querySelector(E()(t="[".concat(he,"='")).call(t,d,"']")),r=s(),i=e.currentTarget,l=(i=$e(i)).dataset.controlId||null,o=[l];w()(r).call(r,l)&&(o=(0,H.c)(r)),null==n||n.setAttribute(Ne,yt()(o));var c=a.findControl(l),u=c._Type_,f=c.Name;It(e,u,f),V.eventBus.emit("drag-control-tab",l)}),[d]);return{onDragStart:m,onDragEnter:(0,_.useCallback)((function(e){var t;wt(e);var r=document.querySelector(E()(t="[".concat(he,"='")).call(t,d,"']")),a=n[V.CONTROL_DRAG_DATA];if(r&&(r.dataset.dragControlIds||a)){var i=e.currentTarget;i=$e(i),Ft(i)}}),[d,n[V.CONTROL_DRAG_DATA]]),onDragOver:(0,_.useCallback)((function(e){var t;wt(e);var r=document.querySelector(E()(t="[".concat(he,"='")).call(t,d,"']")),a=n[V.CONTROL_DRAG_DATA],i=null==r?void 0:r.dataset.dragControlIds;if(i||a){var l=e.currentTarget,o=(l=$e(l)).dataset.controlId||null;if(!o||null==i||!w()(i).call(i,o)){var c,u,s=function(e,t,n){var r=e.getBoundingClientRect(),a=r.x,i=r.y,l=a+r.width,o=i+r.height,c=(a+l)/2,d="right";return a<t&&t<l&&i<=n&&n<=i+8?d="top":a<t&&t<l&&o-8<=n&&n<o?d="bottom":a<=t&&t<=c&&i<n&&n<o?d="left":c<t&&t<l&&i<n&&n<o&&(d="right"),d}(l,e.clientX,e.clientY),f=l.dataset.dragDirection;if(s!==f)f&&(l.removeAttribute("data-".concat(f,"-drag-style")),l.removeAttribute(we)),null===(c=l)||void 0===c||c.setAttribute("data-".concat(s,"-drag-style"),"true"),null===(u=l)||void 0===u||u.setAttribute(we,s);V.eventBus.emit("drag-control_".concat(d),o)}}}),[d,n[V.CONTROL_DRAG_DATA]]),onDragLeave:(0,_.useCallback)((function(e){var t;wt(e);var r=document.querySelector(E()(t="[".concat(he,"='")).call(t,d,"']")),a=n[V.CONTROL_DRAG_DATA];if(r&&(r.dataset.dragControlIds||a)){var i=JSON.parse(r.dataset.dragControlIds||'""'),l=e.currentTarget,o=(l=$e(l)).dataset.controlId;i&&o&&w()(i).call(i,o)||(Ft(l),o&&Nt(o))}}),[n[V.CONTROL_DRAG_DATA]]),onDrop:(0,_.useCallback)((function(e){var t,r;e.stopPropagation();var l=document.querySelector(E()(t="[".concat(he,"='")).call(t,d,"']")),o=n[V.CONTROL_DRAG_DATA];if(l&&(l.dataset.dragControlIds||o)){var u=JSON.parse(l.dataset.dragControlIds||'""');null==l||l.removeAttribute(Ne);var s=e.currentTarget,f=(s=$e(s)).dataset.controlId||"",m=s.dataset.dragDirection||"left",p=!1;Ft(s),w()(r=["top","left"]).call(r,m)&&(p=!0),w()(u).call(u,f)?bt(0,c):(u?a.swapControl((0,V.createSwapAction)({origin:u,target:f,isPrev:p})).then((function(e){i.setSelect([u[0]])})):g(f),f&&S()((function(){bt(0,c),Nt(f)}),100),Mt())}}),[d,n[V.CONTROL_DRAG_DATA]]),onDragEnd:(0,_.useCallback)((function(e){var t;wt(e),Ft(e.currentTarget);var n=document.querySelector(E()(t="[".concat(he,"='")).call(t,d,"']"));null==n||n.removeAttribute(Ne),S()((function(){var t,n=(null===(t=e.currentTarget)||void 0===t||null===(t=t.dataset)||void 0===t?void 0:t.controlId)||"";n&&(bt(0,c),Nt(n))}),100)}),[d]),draggable:!u}};function Bt(e,t){var n=D()(e);if(a()){var r=a()(e);t&&(r=j()(r).call(r,(function(t){return l()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rt(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?c()(n=Bt(Object(a),!0)).call(n,(function(t){(0,y.c)(e,t,a[t])})):u()?f()(e,u()(a)):c()(r=Bt(Object(a))).call(r,(function(t){m()(e,t,l()(a,t))}))}return e}var Gt=function(e,t){var n=(0,(0,(0,_.useContext)(me).getCommonUtil)().getDefaultLang)()();return(null==e?void 0:e.getIn(E()(t).call(t,[n])))||(null==e?void 0:e.getIn(E()(t).call(t,["zh_CN"])))},Ot=function(e){var t=(0,_.useContext)(me).getKdesignerApi,n=e.originZIndex,r=e.Id,a=t(),i=a.data,l=a.meta,o=i.getRealControlType(e),c=(0,v.c)({},l.getDefaultData(o),e),d=Me(c),u=De(),s=at(),f=it(),g=ct(c),m=gt(c,{originZIndex:n},!0);m=function(e,t,n){var r=(0,_.useContext)(ve).mulLangProperty;return e.width=e.width||Gt(r,[n,"Width"]),e.height=e.height||Gt(r,[n,"Height"]),void 0===e.width&&void 0!==t.Width&&(e.width=t.Width,delete t.Width),void 0===e.height&&void 0!==t.Height&&(e.height=t.Height,delete t.Height),e}(m,g,r);var p=Ct(c),C=Pt(c);return Rt(Rt(Rt(Rt(Rt({},d),u),{},{onClick:s,onTwiceClick:f},g),{},{style:m},p),C)},zt=(n(68756),["style"]),jt=function(e){var t=e.field,n=(0,_.useContext)(pe),r=n.getData,a=n.prefixCls,i=n.mergeCommonClassNames,l=n.getKdesignerApi,o=n.onRootPanelMount;(0,_.useEffect)((function(){o()}),[]);var c=r(),d=Ot(t),u=d.style,s=(0,C.c)(d,zt),f=ge(t,c,{}),g=Pt(t),m=g.onDragOver,p=g.onDragEnd,A=g.onDragLeave,h=g.onDrop,I=(0,V.useGetFieldProperty)(t,l()),E=pt()(s.className,"".concat(a,"-root-panel"),(0,y.c)({},"".concat(a,"-root-panel-isPC"),!0),i({Wrap:I("Wrap"),Direction:I("Direction"),AlignContent:I("AlignContent"),AlignItems:I("AlignItems"),JustifyContent:I("JustifyContent")}));return(0,v.c)(u,{overflow:I("Overflow")}),K().createElement("div",(0,v.c)({id:"ui-designer-root"},s,{className:E,onDragOver:m,onDragEnd:p,onDragLeave:A,onDrop:h,tabIndex:-1,style:u}),f)},_t=function(e,t,n){var r,a=e;(t.length<=0&&(a=(0,v.c)(a,{minWidth:40,minHeight:40})),n)&&c()(r=D()(n)).call(r,(function(e){return a[e]&&(a[n[e]]=a[e])}));return a},Kt=["field","controlProps","style"],Vt=["Collapsible","maximize","Maximize","CtlTips","onClick","Name","baseControlCollapsible","customStyle"],Ut=["Direction","Wrap","Overflow","Grow","Shrink","AlignSelf","AlignContent","AlignItems","JustifyContent"],Wt=["width","height","backgroundColor","color","fontSize","borderRadius","marginTop","marginLeft","marginRight","marginBottom","zIndex","textAlign","borderTop","borderLeft","borderRight","borderBottom","paddingTop","paddingLeft","paddingRight","paddingBottom","display"];function Ht(e,t){var n=D()(e);if(a()){var r=a()(e);t&&(r=j()(r).call(r,(function(t){return l()(e,t).enumerable}))),n.push.apply(n,r)}return n}function qt(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?c()(n=Ht(Object(a),!0)).call(n,(function(t){(0,y.c)(e,t,a[t])})):u()?f()(e,u()(a)):c()(r=Ht(Object(a))).call(r,(function(t){m()(e,t,l()(a,t))}))}return e}var Zt=function(e,t,n){var r=n.field,a=n.controlProps,i=n.style,l=(0,C.c)(n,Kt),o=(0,_.useContext)(V.ConfigContext),c=o.getPrefixCls,d=o.prefixCls,u=(0,_.useContext)(me),s=u.getBaseControlByType,f=(0,u.getCommonUtil)(),g=f.mergeCommonClassNames,m=f.defaultPropsUtil,p=f.customCtrlName,A=f.customProperties,h=m.getUIDefaultProps,I=c&&c(d,"collapse"),E=a.Collapsible,x=(a.maximize,a.Maximize),k=(a.CtlTips,a.onClick),b=a.Name,S=a.baseControlCollapsible,N=a.customStyle,w=(0,C.c)(a,Vt),T=(0,_.useState)(!1),F=(0,q.c)(T,2),M=F[0],D=F[1],L=(0,_.useCallback)((function(e){D(!M),k(e)}),[M]),P=pt()((0,y.c)((0,y.c)((0,y.c)({"kdfont kdfont-quanping":!0},"".concat(I,"-full-screen"),!0),"".concat(I,"-full-screen-slot"),x&&!E),"kd-hover-color",!0)),B=K().createElement("span",{className:P,title:(0,V.getLangMsg)("formd.advCon.key0001")}),R=x&&!E?B:null,G=function(n){if("[object Object]"===e.toString())return K().cloneElement(e,qt({children:t},n));var r="string"==typeof e&&s(e);return K().createElement(r,n,t)},O=G(qt(qt(qt({style:i,field:r,Name:b},w),l),{},{Collapsible:null!=S?S:E,Maximize:x,fieldSetSlot:R}));if(E){var z=w.Direction,j=w.Wrap,U=w.Overflow,H=w.Grow,Z=w.Shrink,Y=w.AlignSelf,Q=w.AlignContent,J=w.AlignItems,X=w.JustifyContent,$=((0,C.c)(w,Ut),h(p.ADV_CON,[A.HIDE_COLLAPSE_ICON])),ee=i.width,te=i.height,ne=i.backgroundColor,re=i.color,ae=i.fontSize,ie=i.borderRadius,le=i.marginTop,oe=i.marginLeft,ce=i.marginRight,de=i.marginBottom,ue=i.zIndex,se=i.textAlign,fe=i.borderTop,ge=i.borderLeft,pe=i.borderRight,Ce=i.borderBottom,ve=i.paddingTop,ye=i.paddingLeft,Ae=i.paddingRight,he=i.paddingBottom,Ie=i.display,Ee=(0,C.c)(i,Wt),xe=qt(qt({width:ee,height:te,backgroundColor:ne,color:re,fontSize:ae,borderRadius:ie,marginTop:le,marginLeft:oe,marginRight:ce,marginBottom:de,zIndex:ue,textAlign:se,borderTop:fe,borderLeft:ge,borderRight:pe,borderBottom:Ce},{paddingTop:null!=ve?ve:h(p.ADV_CON,[A.PADDING_TOP]),paddingRight:null!=Ae?Ae:h(p.ADV_CON,[A.PADDING_RIGHT]),paddingBottom:null!=he?he:h(p.ADV_CON,[A.PADDING_BOTTOM]),paddingLeft:null!=ye?ye:h(p.ADV_CON,[A.PADDING_LEFT])}),{},{display:Ie}),ke=pt()((0,y.c)({},"".concat(I,"-root"),!1===S),g({Direction:z,Wrap:j,Overflow:U,Grow:H,Shrink:Z,AlignSelf:Y,AlignContent:Q,AlignItems:J,JustifyContent:X})),be=pt()((0,y.c)({},"".concat(I,"-bar"),!0)),Se=pt()((0,y.c)({},"".concat(I,"-title-panel"),!0)),Ne=pt()((0,y.c)((0,y.c)((0,y.c)({},"".concat(I,"-content-panel"),!1===S),"".concat(I,"-hidden"),M),"".concat(I,"-pl0"),$)),we=pt()((0,y.c)({},"".concat(I,"-cb-collapseicon"),!0),"secondary-text-in-light"),Te=pt()(["".concat(I,"-cb-collapse")],"primary-text-in-light");O=K().createElement("div",(0,v.c)({},w,{className:ke,style:xe,onClick:k}),!1===S&&K().createElement("div",{className:be},K().createElement("div",{className:Se},K().createElement("div",{className:Te,onClick:L},!$&&K().createElement(W.Icon,{prefix:"designericon",className:we,type:M?"shouqi3":"zhankai3"}),K().createElement("span",{className:"".concat(I,"-cb-title")},b))),x?B:null),K().createElement("div",{className:Ne},G(qt(qt({style:qt(qt({},Ee),N),field:r,Name:b},l),{},{Direction:z,Wrap:j,Overflow:U,Grow:H,Shrink:Z,AlignContent:Q,AlignItems:J,JustifyContent:X,Collapsible:null!=S?S:E,Maximize:x}))))}return O},Yt=["style","className"],Qt=function(e){var t=e.field,n=(0,_.useContext)(me),r=n.getKdesignerApi,a=n.getCommonUtil,i=(0,_.useMemo)((function(){return r()}),[]).data.getData(),l=(a().mergeCommonClassNames,Ot(t)),o=l.style,c=l.className,d=(0,C.c)(l,Yt),u=ge(t,i),s=_t(o,u),f=(t.Grow,t.Shrink,t.FlexAbstract),g=pt()((0,y.c)({},c,c));return Zt("FlexPanel",u,{field:t,controlProps:d,style:s,className:g,getCustomOutLine:f?function(){return f}:void 0})},Jt=["ImageKey"],Xt=function(e){var t=e.field,n=Ot(t),r=(0,_.useContext)(me),a=r.getBaseControlByType,i=(0,r.getCommonUtil)(),l=i.getImgFullPath,o=i.fileserver,c=n.ImageKey,d=(0,C.c)(n,Jt);c&&(c=l(o,c));var u=a("Button");return K().createElement(u,(0,v.c)({field:t,ImageKey:c},d))},$t=n(48560),en=n.n($t),tn=function(e){var t=e[ee],n=e[le],r=e.FieldTextAlign,a=e.ShowTitle,i={Grow:"TextField"===t&&!a&&"v"===n?0:1,theme:"v"===n?"default":"flat"},l={fontSize:e.FieldFontSize,color:e.FieldForeColor,backgroundColor:e.FieldBackColor};return"default"!==r&&(l=(0,v.c)(l,{textAlign:r})),-1!==Pe()(t).call(t,"Field")?{}:{inputStyle:l,inputProps:i}},nn=["field","items","Grow","showStyle","showType"],rn=function(e){e.field;var t=e.items,n=e.Grow,r=e.showStyle,a=e.showType,i=(0,C.c)(e,nn),l=(0,_.useContext)(me),o=l.getBaseControlByType,c=(0,l.getCommonUtil)(),d=c.getImgFullPath,u=c.fileserver,s=o("Select"),f=h()(t).call(t,(function(e){var t={};return t.value=e.Value,t.alias=e.Caption,e.ImageKey&&(t.imgkey=d(u,e.ImageKey)),t}));return K().createElement(s,(0,v.c)({items:f,Grow:n,showStyle:r,showType:a},i))},an=84,ln="oem",on="CheckBoxGroupField",cn="RadioOptGroupField",dn="ComboField",un="MulComboField";function sn(e,t){if(!e)return e;var n=[cn,on,dn,un],r=(0,y.c)((0,y.c)((0,y.c)((0,y.c)({},cn,{combo:dn,flat:cn}),on,{combo:un,flat:on}),dn,{combo:dn,flat:cn}),un,{combo:un,flat:on});if(w()(n).call(n,e)){var a,i=t("OptionDisplayMode");return(null==r||null===(a=r[e])||void 0===a?void 0:a[i])||e}return e}var fn=["field","children","getEntityPropertyValue","fieldValueStyle"],gn=["field"],mn=["style"];function pn(e,t){var n=D()(e);if(a()){var r=a()(e);t&&(r=j()(r).call(r,(function(t){return l()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cn(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?c()(n=pn(Object(a),!0)).call(n,(function(t){(0,y.c)(e,t,a[t])})):u()?f()(e,u()(a)):c()(r=pn(Object(a))).call(r,(function(t){m()(e,t,l()(a,t))}))}return e}var vn=function(e){var t,n,r,a,i=(0,_.useContext)(me),l=i.getBaseControlByType,o=(0,i.getCommonUtil)(),c=o.defaultPropsUtil,d=o.serverProperties,u=o.getTitleProps,s=o.getControlProps,f=o.layoutService,g=o.customProperties,m=c.getFieldValue,p=c.getFieldDefaultProps,y=l("FieldItem"),A=l("Attachment"),h=l("Picture"),I=l("Signature"),E=l("RichText"),x=e.field,k=e.children,b=e.getEntityPropertyValue,S=e.fieldValueStyle,N=(0,C.c)(e,fn),T=(x._Type_,x.FieldType),F=x.Name,M=x.LabelWidth,D=x.ShowTitle,L=x.LabelDirection,P=x.FieldStyle,B=x.TextAlign,R=x.FullLine,G=x.ShowStyle,O=x.StepperStyle,z=x.CtlTips,j=x.DisplayStyle,U=x.AutoWrap,W=x.FieldTextAlign,H=x.ComboShowType,Z=(0,_.useState)({style:void 0,contentContainerStyle:void 0}),Y=(0,q.c)(Z,2),Q=Y[0],J=Y[1],X=(0,_.useRef)(null),$=sn(T,b)||T;(0,_.useEffect)((function(){var t,n;if(X.current){var r=m(e._Type_,ue,null!=L?L:"","");r=f.getAdaptiveLabelDirection(r);var a=2==m(e._Type_,de,null!=P?P:-1,-1)&&!w()(t=["RadioField","CheckBoxField","CheckBoxGroupField","RadioOptGroupField"]).call(t,e._Type_),i=f.getDesignerLayoutInfo({dom:X.current,style:e.style,labelDirection:r,isAllBorder:a});null!==(n=e.layoutOption)&&void 0!==n&&n.isLastColumn&&i.style&&((i=(0,Qe.cloneDeep)(i)).style.marginRight="0px"),J(i)}}),[e.layoutOption,e._Type_,e.style,f]);var ee=b("MustInput");if(!k&&("PictureField"!==$||"IconField"!==$||"AttachmentField"!==$||"SignatureField"!==$||"RichTextField"!==$))return null;var te=e.style;delete te.textAlign,R&&(te.width="100%");var re,ae,ie=2==m($,de,null!=P?P:-1,-1)&&!w()(t=["RadioField","CheckBoxField","CheckBoxGroupField","RadioOptGroupField"]).call(t,$),le=F,oe=!1!==D,ce={width:M},fe=f.getAdaptiveLabelDirection(m($,ue,null!=L?L:"","")),ge=null!==(n="h"===fe?p($,g.HORIZONTAL_TITLE_ALIGN):m($,se,B,"default"))&&void 0!==n?n:m($,se,B,"default");if(w()(r=["PictureField","SignatureField"]).call(r,$)&&"h"===fe){var pe,Ce=null!==(pe=p($,g.HORIZONTAL_FIELD_TITLE_WIDTH))&&void 0!==pe?pe:an;ce.width=void 0===ce.width||""===ce.width?Ce:ce.width}if("CheckBoxField"===$&&("1"==G||"2"==G)||"RadioField"===$)oe=!1,"RadioField"===$&&(re=P),"CheckBoxField"===$&&(ae=G);else{if("PictureField"===$)return K().createElement(h,(0,v.c)({isDesigner:!0,labelText:le,labelStyle:ce,labelTextAlign:ge,showTitle:oe,style:te,labelDirection:fe,fieldType:$},N,{field:x,Shrink:0,mustInput:ee}));if("SignatureField"===$)return K().createElement(I,(0,v.c)({isDesigner:!0,labelText:le,labelStyle:ce,labelTextAlign:ge,showTitle:oe,style:te,labelDirection:fe,fieldType:$},N,{field:x,Shrink:0,mustInput:ee}));if("RichTextField"===$){var ve,ye=null==x||null===(ve=x.ToolbarItems)||void 0===ve?void 0:ve.toolbarItems;return K().createElement(E,(0,v.c)({isDesigner:!0,labelText:le,labelStyle:ce,labelTextAlign:ge,showTitle:oe,style:te,labelDirection:fe,fieldType:$,getPropertyValue:b,ctlTips:z,toolbarItems:ye},N,{field:x,Shrink:0,mustInput:ee}))}}if("AttachmentField"===$){var Ae=N.field,he=(0,C.c)(N,gn);return K().createElement(A,(0,v.c)({style:te,isDesigner:!0,isField:!0,disabled:!0},he,{field:Ae,Name:F,showTitle:oe,composedProps:{},labelDirection:fe,mustInput:ee}))}if(1==m($,d.FIELD_STYLE,P,-1)&&!w()(a=["RadioField"]).call(a,$)){"default"!==W&&(te.textAlign=W);var Ie=pt()({"common_text-omit":!0,"common_text-wrap":U},e.className),Ee=u(x,ne,F),xe=s(x,N.onTwiceClick),ke=Cn(Cn({},Ee),xe);return K().createElement("div",(0,v.c)({},N,{className:Ie,style:te},ke),K().createElement("span",null,F||(0,V.getLangMsg)("formd.field.key0003")))}var be=function(e){var t=e.fieldType,n=e.stepperStyle,r=e.allBorder;return!en()(t,"RadioField")&&!en()(t,"RadioOptGroupField")&&(!(en()(t,"ComboField")&&1===H&&!r)&&(!en()(t,"CheckBoxField")&&((!en()(t,"StepperField")||1!==n&&2!==n)&&"CheckBoxGroupField"!==t)))}({fieldType:$,stepperStyle:O,allBorder:ie});return te=Cn(Cn({},te),Q.style),K().createElement(y,(0,v.c)({allBorder:ie,needBorder:be,labelText:le,mustInput:ee,labelStyle:ce,labelTextAlign:ge,showTitle:oe,labelDirection:fe,fieldType:$,radioStyle:re,checkboxStyle:ae},N,{style:te,field:x,CtlTips:z,isDesigner:!0,displayType:j,fieldValueStyle:S,getField:function(e){X.current=e},contentContainerStyle:Q.contentContainerStyle,layoutOption:e.layoutOption}),k)},yn=function(e){var t=(0,_.useContext)(pe).fixColor,n=(0,_.useContext)(me),r=n.getBaseControlByType,a=n.getModel,i=n.getLanguage,l=n.getCommonUtil,o=n.getKdesignerApi,c=r("Text"),d=r("Number"),u=r("MulLangText"),s=r("BaseData"),f=r("LargeText"),g=r("TextArea"),m=(r("Text"),r("AdminDivisionAp")),p=r("CityAp"),A=r("DatePicker"),h=r("Time"),I=r("DatePicker"),x=r("DateRangeField"),k=r("TimeRangeField"),b=r("CheckBox"),S=r("Radio"),N=r("Stepper"),T=r("CheckBoxGroupAp"),F=r("RadioOptGroupAp"),M=e.field,D=e.layoutOption,L=Ot(M,{fixColor:t}),P=L.style,B=(0,C.c)(L,mn),R=tn(M),G=R.inputStyle,z=void 0===G?{}:G,j=R.inputProps,V=void 0===j?{}:j,U=M.Id,W=M.FieldId;(P=Cn(Cn({},z),P)).width&&(P.minWidth=0),P.height&&(P.minHeight=0);var H,q,Z=a(),Y=(H=U,function(e){return Z.getPropertyValue(H,e)}),Q=(q=W,function(e){return Z.getEntityPropertyValue(q,e)}),J={},X=["_Type_","ShowStyle","MobStepperStyle","StepperPattern","DefValue","Group","MustInput","BackgroundImgKey","FieldStyle",le],$=["EditStyle","EditingMode","BasedataBtnIcon","DisplayStyle"];return K().createElement(vn,(0,v.c)({style:P},B,{field:(0,v.c)({},O()(X).call(X,(function(e,t){return e[t]=Q(t),e}),{}),M),inputProps:V,getEntityPropertyValue:Q,fieldValueStyle:J,layoutOption:D}),function(e){e.ShowTitle,e._Type_;var t,n,r=e.FieldType,a=e.FieldId,C=e.LabelDirection,M=e.FieldFontSize,D=e.FieldForeColor,L=e.FieldBackColor,B=e.FieldTextAlign,R=e.EditStyle,G=(e.EditingMode,e.FieldStyle),O=e.BasedataBtnIcon,z=e.DisplayStyle,j=e.Mask,_=Q("EmptyText"),V=(Q("DefValue"),sn(r,Q)||r),U={placeholder:_,theme:"v"===C?"default":"flat"},W=M;12===W&&(W=void 0);var H={fontSize:W||P.fontSize,color:D||P.color,backgroundColor:L||P.backgroundColor};L&&(J.backgroundColor=L),"default"!==B&&(H.textAlign=B);i(),Q("EditingMode");var q,X=Q("DefValue"),$=l(),ee=$.propNames,te=($.serverProperties,$.defaultPropsUtil),ne=$.customCtrlName,re=$.customProperties,ae=(ee.D_LABEL_DIRECTION,ee.D_FIELD_STYLE),ie=(ee.LABEL_DIRECTION,ee.FIELD_STYLE),le=(ee.TEXT_ALIGN,te.getFieldValue),oe=te.getFieldDefaultProps;switch(V){case"TimeField":q=K().createElement(h,(0,v.c)({style:H,inputStyle:H,readOnly:!0},U));break;case"TimeRangeField":q=K().createElement(k,(0,v.c)({style:H,inputStyle:H,readOnly:!0},U));break;case"DateField":var ce=Y("Mask");return K().createElement(I,(0,v.c)({type:"date",style:H,mask:ce,readOnly:!0},U));case"DateRangeField":var de=Y("Mask");return K().createElement(x,(0,v.c)({type:"date",style:H,mask:de,readOnly:!0},U));case"DateTimeField":case"CreateDateField":case"ModifyDateField":var ue=Y("Mask");return K().createElement(A,(0,v.c)({type:"datetime",style:H,mask:ue,readOnly:!0},U));case"CheckBoxField":var se;U.text=Y("Name"),U.styleType=Q("ShowStyle"),U.foreColor=Y("ForeColor");var fe=null===(se=st(e))||void 0===se?void 0:se.width;return K().createElement(b,(0,v.c)({fieldWidth:fe,style:H,value:X,readOnly:!0},U));case"ComboField":case"MulComboField":case"NameSegComboField":var ge=Y("ComboShowStyle"),me=Y("ComboShowType"),pe=Q("Items"),Ce=[];return pe&&(Ce=pe),K().createElement(rn,(0,v.c)({items:Ce,style:H,multiple:"MulComboField"===V,showStyle:ge,showType:me},U,{field:e}));case"BillNoField":case"TextField":case"NameSegTextField":case"I18nNameField":case"ItemClassTypeField":case"ItemClassField":2===G&&(H.paddingLeft=9,H.paddingRight=9),H.paddingRight=20,q=K().createElement(c,(0,v.c)({field:e,style:H},U,{isDesigner:!0}));break;case"BasedataField":case"MulBasedataField":case"AssistantField":case"OrgField":case"MaterielField":case"CurrencyField":case"UnitField":case"UserField":case"NameSegBasedataField":U.displayType=z,U.fontClass=O,U.placeholder=Q("EmptyText"),q=K().createElement(s,(0,v.c)({onClick:function(e){return e},entityId:V,isDesigner:!0,inputStyle:H},U));break;case"AdminDivisionField":q=K().createElement(m,(0,v.c)({style:H},U));break;case"CityField":q=K().createElement(p,(0,v.c)({style:H},U));break;case"DateTimeField":case"CreateDateField":case"ModifyDateField":q=K().createElement(A,(0,v.c)({type:"datetime",style:H,mask:j,readOnly:!0},U));break;case"DecimalField":case"IntegerField":case"AmountField":case"PriceField":case"QtyField":q=K().createElement(d,(0,v.c)({field:e,style:H,readOnly:!0,isDesigner:!0},U));break;case"MuliLangTextField":q=K().createElement(u,(0,v.c)({inputStyle:H,isDesigner:!0},U));break;case"RadioField":var ve,ye=Q("Group");U.isDesigner=!0;var Ae=0;if(ye){var he=o().data.findControlByCondition((function(e){return e.FieldId===ye}));Ae=he&&he[0]?Z.getPropertyValue(he[0].Id,ae):Y(ae)}else Ae=Y(ae);Ae=le(V,ie,Ae,-1),U.text=Y("Name");var Ie=null===(ve=st(e))||void 0===ve?void 0:ve.width;return K().createElement(S,(0,v.c)({fieldId:a,fieldWidth:Ie,style:H},U,{fieldStyle:Ae}));case"RadioGroupField":return null;case"LargeTextField":q=K().createElement(f,(0,v.c)({inputStyle:H,isDesigner:!0},U));break;case"TextAreaField":q=K().createElement(g,(0,v.c)({style:H,isDesigner:!0},U));break;case"StepperField":return U.stepperStyle=Q("StepperStyle")||0,K().createElement(N,(0,v.c)({style:H,fieldStyle:P&&{width:P.width,height:P.height},isDesigner:!0,readOnly:!0},U));case"PictureField":case"SignatureField":case"RichTextField":return K().createElement("div",null);case"CheckBoxGroupField":var Ee=Q("Items"),xe=Y("ComboFlatStyle"),ke=Y("ComboFlatLayout");return K().createElement(T,(0,v.c)({flatStyle:+xe,flatLayout:+ke,items:Ee||[],style:H},U));case"RadioOptGroupField":var be=Q("Items"),Se=Y("ComboFlatStyle"),Ne=Y("ComboFlatLayout");return K().createElement(F,(0,v.c)({flatStyle:Se,flatLayout:Ne,items:be||[],style:H},U));default:q=K().createElement(c,(0,v.c)({field:e,style:H},U,{isDesigner:!0}))}if(w()(t=["TextAreaField","TextField"]).call(t,V)&&w()(n=[1,2]).call(n,R)){var we=[],Te=Q("TextBtnIcon")||"kdfont kdfont-zidingyi",Fe=2==(null!=G?G:oe(ne.FIELD,[re.FIELD_STYLE]))&&"RadioField"!==V&&"CheckBoxField"!==V,Me=pt()((0,y.c)((0,y.c)({"edit-btn-default":!0},Te,!0),"all-border",Fe)),De=K().createElement("div",{className:Me,key:"edit-btn"});return we=E()(we).call(we,De,K().cloneElement(q,{key:"input"}))}if("ItemClassTypeField"===V||"ItemClassField"===V){var Le=[],Pe=pt()({"edit-btn-default":!0,kdfont:!0,"kdfont-xiala":"ItemClassTypeField"===V,"kdfont-f":"ItemClassField"===V}),Be=K().createElement("div",{className:Pe,key:"icon-btn"});return Le=E()(Le).call(Le,Be,K().cloneElement(q,{key:"input"}))}return q}((0,v.c)({},O()($).call($,(function(e,t){return e[t]=Q(t),e}),{}),M)))},An=["className","onTwiceClick"];function hn(e,t){var n=D()(e);if(a()){var r=a()(e);t&&(r=j()(r).call(r,(function(t){return l()(e,t).enumerable}))),n.push.apply(n,r)}return n}function In(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?c()(n=hn(Object(a),!0)).call(n,(function(t){(0,y.c)(e,t,a[t])})):u()?f()(e,u()(a)):c()(r=hn(Object(a))).call(r,(function(t){m()(e,t,l()(a,t))}))}return e}var En=function(e){var t,n=e.field,r=(0,(0,_.useContext)(me).getCommonUtil)(),a=r.mergeCommonClassNames,i=r.getTitleProps,l=r.getControlProps,o=Ot(n),c=o.className,d=o.onTwiceClick,u=(0,C.c)(o,An),s=n._Type_,f=n.Id,g=u.Name,m=u.Grow,p=u.Shrink,y=u.Direction,A=u.Wrap,h=u.AlignItems,I=u.AlignSelf,E=u.JustifyContent,x=u.AlignContent,k=g||f,b=i(n,"Name",k),S=l(n,d),N=In(In({},b),S),T=pt()(["undefined-control-root","text-omit",c,{bgimg:w()(t=["CardPictureListColumnAp","CardAvatarListColumnAp"]).call(t,s)},a({Grow:m,Shrink:p,Direction:y,Wrap:A,AlignItems:h,AlignSelf:I,JustifyContent:E,AlignContent:x})]);return K().createElement("div",(0,v.c)({},u,N,{className:T}),k)},xn=["style","className","extName"];function kn(e,t){var n=D()(e);if(a()){var r=a()(e);t&&(r=j()(r).call(r,(function(t){return l()(e,t).enumerable}))),n.push.apply(n,r)}return n}function bn(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?c()(n=kn(Object(a),!0)).call(n,(function(t){(0,y.c)(e,t,a[t])})):u()?f()(e,u()(a)):c()(r=kn(Object(a))).call(r,(function(t){m()(e,t,l()(a,t))}))}return e}var Sn=function(e){var t=e.field,n=(0,_.useContext)(me),r=n.getKdesignerApi,a=n.getCommonUtil,i=((0,_.useMemo)((function(){return r()}),[]).data,a().mergeCommonClassNames),l=Ot(t),o=l.style,c=l.className,d=l.extName,u=(0,C.c)(l,xn),s=_t(o,[]),f=t.Grow,g=t.Shrink,m=t.ShowTitle,p=t.LabelDirection,v=!!m,A=pt()((0,y.c)({},c,c),i({Grow:f,Shrink:g}));return Zt("Attachment",[],{field:t,controlProps:bn(bn({},u),{},{baseControlCollapsible:!1}),style:s,className:A,disabled:!0,isDesigner:!0,showTitle:v,extName:d,labelDirection:p})},Nn=function(e){var t=e.field,n=(0,_.useContext)(pe).fixColor,r=Ot(t,{fixColor:n}),a=r.style,i=void 0===a?{}:a,l=i.Grow,o=i.Shrink,c=i.AlignSelf,d=(0,(0,_.useContext)(me).getBaseControlByType)("HyperLink");return K().createElement(d,(0,v.c)({field:t},r,{Grow:l,Shrink:o,AlignSelf:c}))},wn=["ImageKey"],Tn=function(e){var t=e.field,n=(0,_.useContext)(me),r=n.getBaseControlByType,a=(0,n.getCommonUtil)(),i=a.getImgFullPath,l=a.fileserver,o=Ot(t),c=r("Image"),d=o.ImageKey,u=(0,C.c)(o,wn);return d&&(d=i(l,d)),K().createElement(c,(0,v.c)({field:t,url:d},u))},Fn=function(e){var t=e.field,n=Ot(t),r=(0,(0,_.useContext)(me).getBaseControlByType)("ImageList");return K().createElement(r,(0,v.c)({field:t},n))},Mn=function(e){var t=e.field,n=Ot(t),r=(0,(0,_.useContext)(me).getBaseControlByType)("BarChart");return K().createElement(r,(0,v.c)({field:t},n,{inDesigner:!0}))},Dn=function(e){var t=e.field,n=Ot(t),r=(0,(0,_.useContext)(me).getBaseControlByType)("CustomChart");return K().createElement(r,(0,v.c)({field:t},n,{inDesigner:!0}))},Ln=function(e){var t=e.field,n=Ot(t),r=(0,(0,_.useContext)(me).getBaseControlByType)("GaugeChart");return K().createElement(r,(0,v.c)({field:t},n,{inDesigner:!0}))},Pn=function(e){var t=e.field,n=Ot(t),r=(0,(0,_.useContext)(me).getBaseControlByType)("HistogramChart");return K().createElement(r,(0,v.c)({field:t},n,{inDesigner:!0}))},Bn=function(e){var t=e.field,n=Ot(t),r=(0,(0,_.useContext)(me).getBaseControlByType)("PieChart");return K().createElement(r,(0,v.c)({field:t},n,{inDesigner:!0}))},Rn=function(e){var t=e.field,n=Ot(t),r=(0,(0,_.useContext)(me).getBaseControlByType)("PointLineChart");return K().createElement(r,(0,v.c)({field:t},n,{inDesigner:!0}))},Gn=function(e){var t=e.field,n=Ot(t),r=(0,(0,_.useContext)(me).getBaseControlByType)("RadarChart");return K().createElement(r,(0,v.c)({field:t},n,{inDesigner:!0}))},On=function(e){var t=e.field,n=(0,_.useContext)(pe),r=n.fixColor,a=n.getKdesignerApi,i=Ot(t,{fixColor:r,kdesignerApi:a()}),l=(0,(0,_.useContext)(me).getBaseControlByType)("Label"),o=i.style;return K().createElement(l,(0,v.c)({field:t,fontColor:o.color},i))},zn=n(97552),jn=n.n(zn),_n=function(e){var t=e.field,n=(0,_.useContext)(pe),r=n.fixColor,a=n.getKdesignerApi,i=n.mergeCommonClassNames,l=Ot(t,{fixColor:r,kdesignerApi:a()}),o=(0,(0,_.useContext)(me).getBaseControlByType)("BaseQRCode"),c=(0,V.useGetFieldProperty)(t,a()),d=c("AlignSelf"),u=l.style,s=l.className,f=u.width?jn()(u.width):128,g=pt()(s,i({AlignSelf:d})),m=c("ShowBarCodeValue");return K().createElement("div",(0,v.c)({},l,{className:g}),K().createElement(o,(0,v.c)({field:t,value:"123",size:f,displayValue:!1},l)),m?K().createElement("div",{style:{fontSize:"inherit",fontFamily:"inherit",textAlign:"center"}},"123"):"")},Kn=function(e){var t=e.field,n=(0,_.useContext)(pe),r=n.fixColor,a=n.getKdesignerApi,i=Ot(t,{fixColor:r,kdesignerApi:a()}),l=(0,(0,_.useContext)(me).getBaseControlByType)("ProgressBar"),o=(0,V.useGetFieldProperty)(t,a())("ProgressBarStyle")||0;return K().createElement(l,(0,v.c)({field:t,percent:60,ProgressBarStyle:o},i))},Vn=function(e){var t,n=e.field,r=(0,_.useContext)(pe),a=r.fixColor,i=r.getKdesignerApi,l=Ot(n,{fixColor:a,kdesignerApi:i()}),o=(0,_.useContext)(me),c=o.getBaseControlByType,d=(0,o.getCommonUtil)().getImgFullPath,u=c("Carousel"),s=l.style,f=n.CarouselImg,g=s.height;delete s.height;var m={display:"block",width:"100%",height:"100%",borderRadius:null==s?void 0:s.borderRadius};f&&f.length&&(t=h()(f).call(f,(function(e,t){var n=d("",e.Url,!1,!1);return K().createElement("img",{key:e.Id,style:m,src:n,alt:e.Name})})));var p=(0,V.useGetFieldProperty)(n,i()),C=p("CarouselStopOnHover"),y=p("CarouselDotPosition"),A=p("CarouselSlideBtn");return K().createElement(u,(0,v.c)({field:n,height:g},l,{hoverStop:C,showArrow:A,dotPosition:y}),t)},Un=n(71928);var Wn=function(e){var t=e.field,n=(0,_.useContext)(pe),r=n.fixColor,a=n.getKdesignerApi,i=Ot(t,{fixColor:r,kdesignerApi:a()}),l=(0,(0,_.useContext)(me).getBaseControlByType)("TransferContainer"),o=i.style,c=(0,V.useGetFieldProperty)(t,a()),d=c("Key"),u=c("TransferContainerStyle");u=jn()(u);var s,f,g=(0,Un.fromJS)(c("TransferContainerSetting"))||(0,Un.Map)(),m=g.get("title")||(0,Un.List)(),p=g.get("size")||(0,Un.Map)(),C=(s=(0,V.getLangMsg)("formd.transferContainer.key0002"),f={data:{source:{caption:(0,V.getLangMsg)("formd.transferContainer.key0001"),data:[{id:"1",text:"".concat(s,"1"),disabled:!0},{id:"2",text:"".concat(s,"2")},{id:"3",text:"".concat(s,"3"),disabled:!0},{id:"4",text:"".concat(s,"4")},{id:"5",text:"".concat(s,"5")},{id:"6",text:"".concat(s,"6")},{id:"7",text:"".concat(s,"7")},{id:"8",text:"".concat(s,"8"),disabled:!0},{id:"9",text:"".concat(s,"9")}]},target:{caption:(0,V.getLangMsg)("formd.transferContainer.key0003"),selected:["5","6"]}},selected:["5","6","8"]},(0,Un.fromJS)(f)).get("data");return 1===u&&(C=function(){var e=(0,V.getLangMsg)("formd.transferContainer.key0004"),t={data:{source:{caption:(0,V.getLangMsg)("formd.transferContainer.key0001"),data:[{children:[{children:[{children:[],parentid:"0111",id:"0111",text:"".concat(e,"11"),disabled:!0},{children:[],parentid:"0111",id:"0112",text:"".concat(e,"12")}],parentid:"01",id:"011",text:"".concat(e,"1"),disabled:!0,isOpened:!0},{children:[{children:[],parentid:"012",id:"0121",text:"".concat(e,"21")},{children:[],parentid:"012",id:"0122",text:"".concat(e,"22"),disabled:!0},{children:[],parentid:"012",id:"0123",text:"".concat(e,"23")}],parentid:"01",id:"012",text:"".concat(e,"2")},{children:[],parentid:"01",id:"013",text:"".concat(e,"3"),disabled:!0},{children:[],parentid:"01",id:"014",text:"".concat(e,"4")},{children:[],parentid:"01",id:"015",text:"".concat(e,"5")}],parentid:0,id:"01",text:(0,V.getLangMsg)("formd.transferContainer.key0005"),isOpened:!0}]},target:{caption:(0,V.getLangMsg)("formd.transferContainer.key0003"),selected:["5","6"]}},selected:["5","6","8"]};return(0,Un.fromJS)(t)}().get("data")),K().createElement(l,(0,v.c)({field:t,id:d,style:o,dataSource:C,selected:(0,Un.List)(),titles:m,listStyle:p,showModel:u},i))},Hn=function(e){var t,n,r=e.field,a=(0,_.useContext)(pe),i=a.fixColor,l=a.getKdesignerApi,o=Ot(r,{fixColor:i,kdesignerApi:l()}),c=(0,(0,_.useContext)(me).getBaseControlByType)("Timeline"),d=(0,V.useGetFieldProperty)(r,l()),u=d("TitleLine")||0,s=d("DescriptionLine")||0,f=d("AxisPosition")||"left",g=d("TimelineOptions")||(t=(0,V.getLangMsg)("formd.timeline.key0001"),n=(0,V.getLangMsg)("formd.timeline.key0002"),[{Label:{Title:"06-01",Description:"09:00"},Content:{Title:t,Description:n}},{Label:{Title:"06-02",Description:"09:00"},Content:{Title:t,Description:n}}]),m=d("LayoutType")||"leftandright",p=(0,Un.fromJS)(h()(g).call(g,(function(e){var t=e.Label,n=e.Content;return{label:{title:t.Title,description:t.Description},content:{title:n.Title,description:n.Description}}})));return K().createElement(c,(0,v.c)({defaultStatus:"process",data:p,titleLine:u,descriptionLine:s,mode:f,layoutType:m},o))},qn=function(e){var t=e.field,n=(0,_.useContext)(pe),r=n.fixColor,a=n.getKdesignerApi,i=Ot(t,{fixColor:r,kdesignerApi:a()}),l=(0,(0,_.useContext)(me).getBaseControlByType)("FontIcon"),o=i.style,c=(0,V.useGetFieldProperty)(t,a()),d=c("fontClass")||"kdfont kdfont-tianjia",u=c("Grow"),s=c("Shrink"),f=c("AlignSelf"),g=c("Clickable"),m=c("NeedHoverClass"),p=c("HoverClass");return K().createElement(l,(0,v.c)({field:t,fontClass:d,clickable:g,needHoverClass:!1!==m,hoverClass:p,style:o,Grow:u,Shrink:s,AlignSelf:f},i))},Zn=n(7224),Yn=n.n(Zn),Qn=function(e){var t=e.field,n=(0,_.useContext)(pe),r=n.fixColor,a=n.getKdesignerApi,i=n.mergeCommonClassNames,l=Ot(t,{fixColor:r,kdesignerApi:a()}),o=(0,(0,_.useContext)(me).getBaseControlByType)("Rate"),c=l.style,d=(0,V.useGetFieldProperty)(t,a()),u=d("Grow"),s=d("Shrink"),f=d("AlignSelf"),g=d("ShowTextType"),m=d("TotalScore")||5,p=d("IconSize")||18,C=d("RateType")||"normal",y=d("StarsNum")||5,A=(0,Un.List)([(0,V.getLangMsg)("formd.rate.key0001"),(0,V.getLangMsg)("formd.rate.key0002"),(0,V.getLangMsg)("formd.rate.key0003"),(0,V.getLangMsg)("formd.rate.key0004"),(0,V.getLangMsg)("formd.rate.key0005")]),h=3/Yn()(y)*Yn()(m),I=Yn()(h),E=pt()(null==l?void 0:l.className,i({Grow:u,Shrink:s,AlignSelf:f}));return K().createElement(o,(0,v.c)({field:t,score:I,count:"normal"===C?y:5,style:"normal"===C?{fontSize:p}:{},emotionalIconText:A,starsNum:y,iconSize:p,totalScore:m,showTextType:jn()(g),rateType:C,onlyActiveCurrent:"emotional"===C,defaultValue:3,rateStyle:c,disabled:!0},l,{rateClassName:E,texts:A}))};var Jn=function(e){var t,n,r,a,i=e.field,l=(0,_.useContext)(pe),o=l.fixColor,c=l.getKdesignerApi,d=Ot(i,{fixColor:o,kdesignerApi:c()}),u=(0,(0,_.useContext)(me).getBaseControlByType)("TreeMenu");return K().createElement(u,(0,v.c)({field:i,childNodes:(t=(0,V.getLangMsg)("formd.treeMenu.key0001"),n=(0,V.getLangMsg)("formd.treeMenu.key0002"),r=(0,V.getLangMsg)("formd.treeMenu.key0003"),a=(0,V.getLangMsg)("formd.treeMenu.key0004"),(0,Un.fromJS)([{children:[{children:[{children:[{children:[],parentid:"0111",id:"01111",text:"".concat(a,"1")}],parentid:"011",id:"0111",text:"".concat(r,"1")},{children:[],parentid:"011",id:"0112",text:"".concat(r,"2")},{children:[],parentid:"011",id:"0113",text:"".concat(r,"3")},{children:[],parentid:"011",id:"0114",text:"".concat(r,"4")},{children:[],parentid:"011",id:"0115",text:"".concat(r,"5")}],parentid:"01",id:"011",text:"".concat(n,"1")},{children:[{children:[],parentid:"012",id:"0121",text:"".concat(r,"1")},{children:[],parentid:"012",id:"0122",text:"".concat(r,"2")},{children:[],parentid:"012",id:"0123",text:"".concat(r,"3")}],parentid:"01",id:"012",text:"".concat(n,"2")},{children:[{children:[],parentid:"018",id:"0181",text:"".concat(r,"1")},{children:[],parentid:"018",id:"0182",text:"".concat(r,"2")}],parentid:"01",id:"018",text:"".concat(n,"8")},{children:[{children:[],parentid:"012",id:"0131",text:"".concat(r,"1")},{children:[],parentid:"012",id:"0132",text:"".concat(r,"2")},{children:[],parentid:"012",id:"0133",text:"".concat(r,"3")},{children:[],parentid:"012",id:"0134",text:"".concat(r,"4")},{children:[],parentid:"012",id:"0135",text:"".concat(r,"5")},{children:[],parentid:"012",id:"0136",text:"".concat(r,"6")},{children:[],parentid:"012",id:"0137",text:"".concat(r,"7")},{children:[],parentid:"012",id:"0138",text:"".concat(r,"8")}],parentid:"01",id:"013",text:"".concat(n,"3")},{children:[{children:[],parentid:"012",id:"0141",text:"".concat(r,"1")},{children:[],parentid:"012",id:"0142",text:"".concat(r,"2")},{children:[],parentid:"012",id:"0143",text:"".concat(r,"3")},{children:[],parentid:"012",id:"0144",text:"".concat(r,"4")},{children:[],parentid:"012",id:"0145",text:"".concat(r,"5")}],parentid:"01",id:"014",text:"".concat(n,"4")},{children:[{children:[],parentid:"012",id:"0151",text:"".concat(r,"1")},{children:[],parentid:"012",id:"0152",text:"".concat(r,"2")}],parentid:"01",id:"015",text:"".concat(n,"5")},{children:[{children:[],parentid:"012",id:"0161",text:"".concat(r,"1")},{children:[],parentid:"012",id:"0162",text:"".concat(r,"2")}],parentid:"01",id:"016",text:"".concat(n,"6")},{children:[{children:[],parentid:"012",id:"0171",text:"".concat(r,"1")},{children:[],parentid:"012",id:"0172",text:"".concat(r,"2")}],parentid:"01",id:"017",text:"".concat(n,"7")}],parentid:"0",id:"01",text:"".concat(t,"1")},{children:[{children:[{children:[],parentid:"021",id:"0211",text:"".concat(r,"1")}],parentid:"02",id:"021",text:"".concat(n,"1")},{children:[],parentid:"02",id:"021",text:"".concat(n,"2")},{children:[],parentid:"02",id:"021",text:"".concat(n,"3")}],parentid:"0",id:"02",text:"".concat(t,"2")},{children:[],parentid:"0",id:"03",text:"".concat(t,"3")},{children:[{parentid:"04",id:"041",text:"".concat(n,"1")},{parentid:"04",id:"042",text:"".concat(n,"2")},{parentid:"04",id:"043",text:"".concat(n,"3")},{parentid:"04",id:"044",text:"".concat(n,"4")},{parentid:"04",id:"045",text:"".concat(n,"5")}],parentid:"0",id:"04",text:"".concat(t,"4")}]))},d))},Xn=function(e,t){var n;return E()(n="".concat(e,"-")).call(n,t)},$n=function(e){return function(t){var n;return E()(n="".concat(e,"-")).call(n,t)}};var er=function(e){var t,n=e.field,r=(0,_.useContext)(pe),a=r.fixColor,i=r.getKdesignerApi,l=r.mergeCommonClassNames,o=r.prefixCls,c=Ot(n,{fixColor:a,kdesignerApi:i()}),d=(0,_.useContext)(me).getBaseControlByType,u=(0,V.useGetFieldProperty)(n,i()),s=d("TreeNew"),f=d("Tree"),g=u("Grow"),m=u("Shrink"),p=u("AlignSelf"),C=u("BigDataRender"),A=c.className,h=c.onClick,I=$n(Xn(o,"tree-view")),E=pt()((0,y.c)((0,y.c)({},I("container"),!0),A,A),l({Grow:g,Shrink:m,AlignSelf:p})),x=pt()((0,y.c)({},A,A),l({Grow:g,Shrink:m,AlignSelf:p})),k=null,b=(t=(0,V.getLangMsg)("formd.transferContainer.key0004"),[{children:[{children:[{children:[],parentid:"0111",id:"0111",text:"".concat(t,"11")},{children:[],parentid:"0111",id:"0112",text:"".concat(t,"12")}],parentid:"01",id:"011",text:"".concat(t,"1"),isOpened:!0},{children:[{children:[],parentid:"012",id:"0121",text:"".concat(t,"21")},{children:[],parentid:"012",id:"0122",text:"".concat(t,"22")},{children:[],parentid:"012",id:"0123",text:"".concat(t,"23")}],parentid:"01",id:"012",text:"".concat(t,"2")},{children:[],parentid:"01",id:"013",text:"".concat(t,"3")},{children:[],parentid:"01",id:"014",text:"".concat(t,"4")},{children:[],parentid:"01",id:"015",text:"".concat(t,"5")}],parentid:0,id:"01",text:(0,V.getLangMsg)("formd.transferContainer.key0005"),isOpened:!0}]);return k=C?K().createElement(s,{isMulti:u("Multi"),rootView:u("RootVisible"),field:n,className:x,childNodes:(0,Un.fromJS)(b)}):K().createElement(f,{isMulti:u("Multi"),rootView:u("RootVisible"),field:n,className:x,childNodes:b}),K().createElement("div",(0,v.c)({},c,{className:E}),k,K().createElement("div",{className:I("mask"),onClick:h}))},tr=function(e,t){var n=(0,_.useContext)(me).getKdesignerApi,r=(0,_.useMemo)((function(){return n()}),[]),a=r.dataFactory,i=r.data,l=r.selection,o=a({type:t,parentId:e});return function(){i.addControl((0,V.createAddAction)(o)).then((function(e){var t=e[0].value;l.setSelect(qe()(t)?[t[0][Q]]:[t[Q]])}))}},nr=["MoreButtonVisible","style"];function rr(e,t){var n=D()(e);if(a()){var r=a()(e);t&&(r=j()(r).call(r,(function(t){return l()(e,t).enumerable}))),n.push.apply(n,r)}return n}function ar(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?c()(n=rr(Object(a),!0)).call(n,(function(t){(0,y.c)(e,t,a[t])})):u()?f()(e,u()(a)):c()(r=rr(Object(a))).call(r,(function(t){m()(e,t,l()(a,t))}))}return e}var ir=function(e){var t,n=e.field,r=(0,_.useContext)(me),a=r.getBaseControlByType,i=r.getKdesignerApi,l=r.getCommonUtil,o=(0,_.useMemo)((function(){return i()}),[]).data,c=o.getData(),d=n.ShowTitle,u=Ot(n),s=u.MoreButtonVisible,f=u.style,g=(0,C.c)(u,nr),m=l(),p=m.customCtrlName,y=m.customProperties,A=m.defaultPropsUtil,h=ge(n,c),I=a("Toolbar"),E=A.getUIDefaultProps(p.ADV_CON,[y.TOOLBAR_STYLE]),x=tr(n[Q],1===E?"AdvConBarItemAp":"BarItemAp"),b=!!d,S=(0,_.useCallback)((function(){x()}),[x]),N=ar(ar({},f),{},{flexShrink:0});delete N.alignItems;var w,T=!!(w=o.getSubControls(n[Q])).length&&void 0!==k()(w).call(w,(function(e){var t=(0,Un.Map)(e);return t.get("ForeColor")||t.get("BackColor")||t.getIn([oe,ce,"Top"])||t.getIn([oe,ce,"Right"])||t.getIn([oe,ce,"Bottom"])||t.getIn([oe,ce,"Left"])})),F=A.getUIDefaultProps(p.TOOLBARITEM,y.BARITEM_SHOW_TYPE);return void 0!==F&&0!==Number(F)&&T&&(F=0),K().createElement(I,(0,v.c)({field:n,showTitle:b,showMore:s,onAddItem:S,style:N,"data-baritem-show-type":null!==(t=F)&&void 0!==t?t:0,hasSetColor:T},g),h)},lr=["Name","OperationKey","OperationStyle","DropdownItems","style"],or=function(e){var t=e.field,n=Ot(t),r=(0,_.useContext)(me),a=r.getBaseControlByType,i=(0,r.getCommonUtil)(),l=i.getCurrentTheme,o=i.isWhiteColorBg,d=i.customCtrlName,u=i.defaultPropsUtil,s=i.customProperties,f=a("ToolbarItem"),g=t.Id,m=n.Name,p=n.OperationKey,y=n.OperationStyle,A=n.DropdownItems,h=n.style,I=(0,C.c)(n,lr),E=[];null==A||c()(A).call(A,(function(e){var t={};t.key=e.Key,t.opk=e.OperationKey,t.title=e.Title,t.background=e.Background,E.push(t)}));var x=h.borderTop||h.borderBottom||h.borderLeft||h.borderRight,k=h.color===l(),b=o(h.backgroundColor),S=h.backgroundColor&&h.backgroundColor!==l(),N=u.getUIDefaultProps(d.TOOLBARITEM,s.BARITEM_SHOW_TYPE);return K().createElement(f,(0,v.c)({barItemShowType:null!=N?N:0,field:t,title:m,key:g,id:g,operationKey:p,operationStyle:y,dropDownItems:E,hasBorder:x,isThemeColor:k,isWhiteBg:b,hasNonThemeBg:S,style:h},I))},cr=["Maximize","Collapsible","style","className","Grow","Shrink","AlignSelf","AlignContent","AlignItems","JustifyContent","onClick","CtlTips","Name"];function dr(e,t){var n=D()(e);if(a()){var r=a()(e);t&&(r=j()(r).call(r,(function(t){return l()(e,t).enumerable}))),n.push.apply(n,r)}return n}function ur(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?c()(n=dr(Object(a),!0)).call(n,(function(t){(0,y.c)(e,t,a[t])})):u()?f()(e,u()(a)):c()(r=dr(Object(a))).call(r,(function(t){m()(e,t,l()(a,t))}))}return e}var sr=function(e){var t=e.field,n=(0,_.useContext)(me),r=n.getKdesignerApi,a=n.getCommonUtil,i=(0,_.useMemo)((function(){return r()}),[]),l=a(),o=l.customCtrlName,c=l.customProperties,d=l.defaultPropsUtil,u=l.mergeCommonClassNames,s=i.data,f=s.getData(),g=Ot(t),m=(0,_.useState)(!0),p=(0,q.c)(m,2),A=p[0],I=p[1],E=(0,_.useCallback)((function(){I(!A)}),[t.Collapsible,A]),x=(0,_.useCallback)((function(e){return null==e?void 0:Y()(e).call(e,(function(e){var t;return(null===(t=s.getSubControls(e[Q]))||void 0===t?void 0:t.length)>0}))}),[f]),b=s.getSubControls(t[Q])||[],S=k()(b).call(b,(function(e){return"AdvConToolbarAp"===e[ee]})),N=g.Maximize,w=g.Collapsible,T=g.style,F=g.className,M=g.Grow,D=g.Shrink,L=g.AlignSelf,P=g.AlignContent,B=g.AlignItems,R=g.JustifyContent,G=g.onClick,O=g.CtlTips,z=g.Name,U=(0,C.c)(g,cr),W="adv-con-",H=d.getUIDefaultProps(o.ADV_CON,[c.FOLDED_FONT_CLASS]),Z=1===d.getUIDefaultProps(o.ADV_CON,[c.TOOLBAR_STYLE]),J=H||"kdfont kdfont-right",X=pt()("".concat(W,"collapse-icon"),(0,y.c)({},"".concat(W,"expand-icon"),!A),"secondary-text-in-light",[J]),$="".concat(W,"title"),te=pt()("".concat(W,"panel"),(0,y.c)({},"".concat(W,"mt0"),Z)),ne={},re="".concat(W,"summary-panel"),ae=pt()("".concat(W,"toolbar"),(0,y.c)((0,y.c)({},"".concat(W,"ap-type1"),Z),"".concat(W,"full-screen-right-padding"),N));w||(X="".concat(W,"hide"),$=pt()("".concat(W,"title"),"".concat(W,"cur")),ne.marginLeft=0,T.paddingRight=T.paddingRight?T.paddingRight:0,T.paddingLeft=T.paddingLeft?T.paddingLeft:0),!A&&w&&(ae=te="".concat(W,"hide"));var ie,le,oe=pt()((0,y.c)((0,y.c)({"adv-con":!0},"".concat(W,"customized"),H),F,F),u({Grow:M,Shrink:D,AlignSelf:L,AlignContent:P,AlignItems:B,JustifyContent:R})),ce=d.getUIDefaultProps(o.ADV_CON,[c.HIDE_COLLAPSE_ICON]),de=j()(b).call(b,(function(e){return"AdvConSummaryPanelAp"===e[ee]}));de&&(ie=h()(de).call(de,(function(e){var t=Xi(e);return K().cloneElement(t,ur({key:e[Q],onClick:G},U))}))),S&&(le=Xi(S));var ue,se=j()(b).call(b,(function(e){return"AdvConChildPanelAp"===e[ee]})),fe=x(se);se&&(ue=h()(se).call(se,(function(e){var t=Xi(e);return K().cloneElement(t,ur({key:e[Q],onClick:G},U))})));var ge,pe,Ce=pt()((0,y.c)((0,y.c)((0,y.c)({},te,!0),"".concat(W,"panel-style"),!0),"".concat(W,"panel-with-min-hei"),!fe)),ve=pt()(["".concat(W,"collapse")],"primary-text-in-light"),ye=d.getUIDefaultProps(o.ADV_CON,[c.TITLE_FONT_SIZE]),Ae=d.getUIDefaultProps(o.ADV_CON,[c.SUB_TITLE_FONT_SIZE]);void 0!==ye&&(ge={fontSize:ye}),void 0!==Ae&&(pe={fontSize:Ae});var he=K().createElement("div",{className:ae},le?K().cloneElement(le,ur({onClick:G},U)):null),Ie=pt()("kdfont kdfont-tishixinxi",(0,y.c)({},"".concat(W,"design-tips"),!0)),Ee=pt()((0,y.c)((0,y.c)({"kdfont kdfont-quanping":!0},"".concat(W,"full-screen"),!0),"isDesigner",!0)),xe={paddingTop:d.getUIDefaultProps(o.ADV_CON,[c.PADDING_TOP]),paddingRight:d.getUIDefaultProps(o.ADV_CON,[c.PADDING_RIGHT]),paddingBottom:d.getUIDefaultProps(o.ADV_CON,[c.PADDING_BOTTOM]),paddingLeft:d.getUIDefaultProps(o.ADV_CON,[c.PADDING_LEFT])};return K().createElement("div",(0,v.c)({className:oe,style:ur(ur({},T),xe),onClick:G},U),K().createElement("div",{className:"".concat(W,"bar")},K().createElement("div",{className:"".concat(W,"box")},K().createElement("div",{className:ve,onClick:E},!ce&&K().createElement("i",{className:X}),K().createElement("span",{className:$,style:ge},z)),N?K().createElement("span",{className:Ee,title:(0,V.getLangMsg)("formd.advCon.key0001")}):null,O&&K().createElement("i",{className:Ie}),K().createElement("div",{className:re,style:pe},ie)),!Z&&he),Z&&he,K().createElement("div",{className:Ce,style:ne},ue))},fr=["style","className"],gr=function(e){var t=e.field,n=(0,_.useContext)(me).getKdesignerApi,r=(0,_.useMemo)((function(){return n()}),[]).data.getData(),a=Ot(t),i=a.style,l=a.className,o=(0,C.c)(a,fr),c=ge(t,r),d=_t(i,c);return Zt("FlexPanel",c,{field:t,controlProps:o,style:d,className:pt()(l,"adv-con-summary-panel-ap"),draggable:!1})},mr=["style"],pr=function(e){var t=e.field,n=(0,_.useContext)(me).getKdesignerApi,r=(0,_.useMemo)((function(){return n()}),[]).data.getData(),a=Ot(t),i=a.style,l=(0,C.c)(a,mr),o=ge(t,r),c=_t(i,o);c.justifyContent="flex-end";var d=tr(t[Q],"AdvConBarItemAp"),u=(0,_.useCallback)((function(){d()}),[d]);return Zt("AdvConToolbar",o,{field:t,controlProps:l,style:c,onAddItem:u})},Cr=function(e){var t=e.field,n=Ot(t),r=(0,(0,_.useContext)(me).getBaseControlByType)("AdvConToolbarItem");return K().createElement(r,(0,v.c)({field:t},n))},vr=["style"],yr=function(e){var t=e.field,n=(0,_.useContext)(me).getKdesignerApi,r=(0,_.useMemo)((function(){return n()}),[]).data.getData(),a=Ot(t),i=a.style,l=(0,C.c)(a,vr),o=ge(t,r),c=_t(i,o,{width:"min-width"});return Zt("FlexPanel",o,{field:t,controlProps:l,style:c,draggable:!1})},Ar=["style","Top"],hr={left:0,top:0,width:0},Ir=function(e){var t,n=e.field,r=(0,_.useState)(!1)[1],a=(0,_.useState)(76),i=(0,q.c)(a,2),l=i[0],o=i[1],c=(0,_.useState)(!1),d=(0,q.c)(c,2),u=d[0],s=d[1],f=(0,_.useState)(hr),g=(0,q.c)(f,2),m=g[0],p=g[1],y=(0,_.useContext)(me),A=y.getBaseControlByType,h=y.getKdesignerApi,I=(0,y.getCommonUtil)().addResizeObserve,x=(0,_.useMemo)((function(){return h()}),[]).data,k=x.getData(),b=document.querySelector(E()(t="[".concat(he,'="')).call(t,n[Q],'"]')),S=Ot(n),N=S.style,w=S.Top,T=(0,C.c)(S,Ar),F=ge(n,k),M=_t(N,F),D=(0,_.useCallback)((function(){if(!u){var e,t=x.getRootId(),n=document.querySelector(E()(e="[".concat(he,'="')).call(e,t,'"]'));if(n){var r=n.getBoundingClientRect();p(r),window.requestAnimationFrame(D)}}}),[u]);(0,_.useEffect)((function(){r(!0)}),[]),(0,_.useEffect)((function(){D();var e=null;return b&&(e=I(b,(function(e){var t=null==e?void 0:e.width;t&&o(t)}))),function(){s(!0),e&&(e.removeResizeObserve(),e=null)}}),[b,D]);var L=A("FloatMenu"),P=jn()(n.Align||0),B=m.top,R=m.left,G=m.right,O=m.bottom,z=document.documentElement.clientHeight;return B+=jn()(w,10),1===P?(M.left=R,M.top=B):2===P?M.bottom=z-O:(M.left=G-l,M.top=B),K().createElement(L,(0,v.c)({field:n,style:M},T),F)},Er=function(e){var t=e.field,n=(0,_.useContext)(me),r=n.getBaseControlByType,a=n.getKdesignerApi,i=(0,_.useMemo)((function(){return a()}),[]).data.getData(),l=Ot(t),o=ge(t,i),c=r("FloatMenuPanel");return K().createElement(c,(0,v.c)({field:t},l),o)},xr=["Name"],kr=function(e){var t=e.field,n=Ot(t),r=(0,(0,_.useContext)(me).getBaseControlByType)("FloatMenuItem"),a=n.Name,i=(0,C.c)(n,xr);return K().createElement(r,(0,v.c)({field:t,text:a},i))},br=["field","className"],Sr=["Name","HomeTab","className"],Nr=function(e){var t=e.field,n=e.className,r=(0,C.c)(e,br),a=t[Q],i=(0,_.useContext)(me),l=i.getBaseControlByType,o=i.getKdesignerApi,c=(0,_.useMemo)((function(){return o()}),[]).data.getData(),d=Ot(t),u=d.Name,s=d.HomeTab,f=d.className,g=(0,C.c)(d,Sr),m=ge(t,c),p=l("TabPanel"),A=pt()("kdesigner-form-kdesigner-tabpanel",(0,y.c)((0,y.c)({},f,!0),n,!0));return K().createElement(p,(0,v.c)({className:A,key:a,id:a,title:u,lazyLoaded:!1,homeTab:s},g,r),m)},wr=["ShowDropdownIcon","HideNavigation","CanCloseAll","CanSlide","CanFull","TabDirection"],Tr=function(e){var t=e.field,n=t[Q],r=(0,_.useState)(""),a=(0,q.c)(r,2),i=a[0],l=a[1],o=(0,_.useState)(0),c=(0,q.c)(o,2),d=c[0],u=c[1],s=Ot(t),f=s.ShowDropdownIcon,g=s.HideNavigation,m=s.CanCloseAll,p=s.CanSlide,y=s.CanFull,A=s.TabDirection,I=(0,C.c)(s,wr),E=s.TabStyle,x=(0,_.useContext)(me),k=x.getBaseControlByType,b=x.getKdesignerApi,S=(0,_.useMemo)((function(){return b()}),[]),N=S.data,w=S.selection,T=k("Tabs"),F=tr(n,"TabPageAp"),M=(0,_.useCallback)((function(e){l(e),w.setSelect([e])}),[]),D=N.getSubControls(n);(0,_.useEffect)((function(){var e=N.getSubControls(n);if(e.length>0){var t=e[0][Q];l(t),w.setSelect([t])}}),[n]),(0,_.useEffect)((function(){var e,t=D.length;t!==d&&u(t);var n=null===(e=D[t-1])||void 0===e?void 0:e[Q];d&&t&&n&&d<t&&l(n)}),[D,d]);var L=(0,_.useCallback)((function(e){var t=e.value[0];Y()(D).call(D,(function(e){return e[Q]===t}))&&l(t)}),[D]);return(0,_.useEffect)((function(){var e=w.addSelectChangeListener(L);return function(){e()}}),[L]),"vertical"===A&&(E=4),K().createElement(T,(0,v.c)({field:t,activeKey:i,showAddIcon:!0,handleTabClick:M,handleAddClick:F,hideNavigation:g,canCloseAll:m,canSlide:p,canFull:y,tabStyle:E,tabDirection:A,showMore:f},I),h()(D).call(D,(function(e){var t=e.Name,n=e.Id;return K().createElement(Nr,{title:t,field:e,key:n,id:n})})))},Fr=n(89843),Mr=n.n(Fr),Dr=["StatusIcon","StepsOptions","WizardStyle","Grow","Shrink","className","StepLength","style"],Lr=["TabId","WizardStyle","WizardType","TextDirection","style"],Pr=function(e){var t=e.field,n=(0,(0,_.useContext)(me).getCommonUtil)().mergeCommonClassNames,r=Ot(t),a=r.StatusIcon,i=r.StepsOptions,l=r.WizardStyle,o=r.Grow,c=r.Shrink,d=r.className,u=r.StepLength,s=r.style,f=(0,C.c)(r,Dr),g=(0,_.useMemo)((function(){var e,t=JSON.parse(a||"{}"),n={finish:K().createElement("i",{className:"kdfont kdfont-gouxuan",style:{fontSize:12}}),error:K().createElement("span",null,"!")};return null===(e=D()(t))||void 0===e||O()(e).call(e,(function(e,n){var r=t[n];return r&&(e[n]=K().createElement("i",{className:r,style:{fontSize:12}})),e}),n),n}),[a]),m=(null==i?void 0:i.length)>0?i:Mr()({length:u||4}),p=0===l,A=p?{minWidth:110*m.length}:{minHeight:110*m.length},I=pt()((0,y.c)({},d,d),n({Grow:o,Shrink:c}));return K().createElement(W.Steps,(0,v.c)({style:(0,v.c)(A,s),className:I,current:1,status:"error",icons:g,direction:p?"horizontal":"vertical"},f),h()(m).call(m,(function(e,t){return K().createElement(W.Step,{key:t,icons:g,title:(null==e?void 0:e.Title)||"",description:(null==e?void 0:e.Description)||""})})))},Br=function(e){var t=e.field,n=(0,_.useContext)(me),r=n.getBaseControlByType,a=n.getKdesignerApi,i=(0,_.useMemo)((function(){return a()}),[]),l=i.data,o=l.getData(),c=Ot(t),d=ge(t,o),u=r("Wizard"),s=c.TabId,f=c.WizardStyle,g=c.WizardType,m=c.TextDirection,p=c.style,y=(0,C.c)(c,Lr),A=_t(p,d),I=g||"tab",E=(0,_.useCallback)((function(){var e=[];if(s){var t=l.findControl(s);if(t&&"TabAp"===t[ee]){var n=l.getSubControls(s);e=h()(n).call(n,(function(e,t){var n=e.Id,r=e.Key,a=e.Name;return{tabId:s,id:n,key:r,title:a,isActive:0===t}}))}}return e}),[s]);return(0,_.useEffect)((function(){i.selection.setSelect(t[Q])}),[I,t[Q]]),"tab"===I?K().createElement(u,(0,v.c)({style:A,items:E(),wizardStyle:jn()(f),tDir:m},y)):K().createElement(Pr,{field:t})},Rr=["TabId"],Gr=function(e){var t=e.field,n=(0,_.useState)(!0),r=(0,q.c)(n,2),a=r[0],i=r[1],l=(0,_.useContext)(me),o=l.getBaseControlByType,c=l.getKdesignerApi,d=(0,_.useMemo)((function(){return c()}),[]).data,u=Ot(t),s=o("HomePageTab"),f=(0,_.useCallback)((function(){return i(!a)}),[a]);(0,_.useEffect)((function(){var e=d.addDataChangeListener(f);return function(){e()}}),[]);var g=u.TabId,m=(0,C.c)(u,Rr),p={},y=[];if(g&&(p=d.findControl(g))&&"TabAp"===p[ee]){var A=d.getSubControls(g);y=O()(A).call(A,(function(e,t,n){var r,a=t.Id,i=t.Key,l=t.Name;return E()(r=[]).call(r,(0,H.c)(e),[{tabId:g,id:a,key:i,title:l,isActive:0===n}])}),y)}return K().createElement(s,(0,v.c)({items:y},m))},Or=["className","Grow","Shrink","Hidden","style"];function zr(e,t){var n=D()(e);if(a()){var r=a()(e);t&&(r=j()(r).call(r,(function(t){return l()(e,t).enumerable}))),n.push.apply(n,r)}return n}function jr(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?c()(n=zr(Object(a),!0)).call(n,(function(t){(0,y.c)(e,t,a[t])})):u()?f()(e,u()(a)):c()(r=zr(Object(a))).call(r,(function(t){m()(e,t,l()(a,t))}))}return e}var _r=function(e){var t=e.field,n=(0,_.useContext)(me),r=n.getBaseControlByType,a=n.getCommonUtil,i=Ot(t),l=i.className,o=i.Grow,c=i.Shrink,d=i.Hidden,u=i.style,s=(0,C.c)(i,Or),f=r("IFrame"),g=a().mergeCommonClassNames,m=jr(jr({},u),{},{position:"relative",display:"flex"}),p=pt()((0,y.c)({},l,l),g({Grow:o,Shrink:c}));return d?null:K().createElement("div",(0,v.c)({style:m,className:p},s),K().createElement("div",{style:{position:"absolute",marginLeft:0,marginTop:0,width:"100%",height:"100%",background:"#000",filter:"alpha(opacity=0)",opacity:0}}),K().createElement(f,{src:"",frameBorder:1,scrolling:"auto",allowtransparency:!0,isDesigner:!0}))},Kr=["Name"],Vr=function(e){var t=e.field,n=Ot(t),r=n.Name,a=(0,C.c)(n,Kr);return K().createElement("div",a,r)},Ur=["style"];function Wr(e,t){var n=D()(e);if(a()){var r=a()(e);t&&(r=j()(r).call(r,(function(t){return l()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hr(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?c()(n=Wr(Object(a),!0)).call(n,(function(t){(0,y.c)(e,t,a[t])})):u()?f()(e,u()(a)):c()(r=Wr(Object(a))).call(r,(function(t){m()(e,t,l()(a,t))}))}return e}var qr=function(e){var t=e.field,n=(0,_.useContext)(me).getBaseControlByType,r=Ot(t),a=r.style,i=(0,C.c)(r,Ur),l=n("HtmlPanel"),o=Hr(Hr({},a),{},{minHeight:40,minWidth:40});return K().createElement(l,(0,v.c)({style:o},i))},Zr=["style","className","Grow","Shrink"],Yr=["width","height","backgroundColor","color","fontSize","borderRadius","zIndex","textAlign","borderTop","borderLeft","borderRight","borderBottom"],Qr=function(e){var t=e.field,n=(0,_.useContext)(me),r=n.getBaseControlByType,a=n.getCommonUtil,i=Ot(t),l=i.style,o=i.className,d=i.Grow,u=i.Shrink,s=(0,C.c)(i,Zr),f=a().mergeCommonClassNames,g=r("TaskNotice"),m=pt()((0,y.c)({},o,o),f({Grow:d,Shrink:u})),p=function(e,t){var n,r;return c()(n=j()(r=D()(e)).call(r,(function(n){return void 0===e[n]||w()(t).call(t,n)}))).call(n,(function(t){return delete e[t]})),e}(l,Yr);return K().createElement("div",(0,v.c)({className:m,style:p},s),K().createElement(g,{isDesigner:!0,taskList:(0,Un.List)()}))},Jr=function(e){return!(!e.Hidden&&!e.Invisible)},Xr=["SubEntryEntity"],$r=["RadioGroupField","RadioField"],ea=["EntryEntity","TreeEntryEntity"],ta=function(e,t,n){var r,a,i=t.getParentControl(e.Id)||{},l=t.getData(),o={},c=[],d=[];if("EntryAp"===e[ee])null!=e&&e.EntryId&&(c=j()(r=l[ae]).call(r,(function(t){return t[re]===e.Id&&!w()(Xr).call(Xr,t[ee])&&!w()($r).call($r,t[ee])})),d=null===(a=n.entitymeta[ae])||void 0===a?void 0:j()(a).call(a,(function(t){return t[Q]===e.EntryId&&(o=t),t[re]===e.EntryId&&!w()(Xr).call(Xr,t[ee])&&!w()($r).call($r,t[ee])})));else if("FieldsetPanelAp"===e[ee]){var u,s;if("GridFlatPanelAp"===i[ee]);else c=j()(u=l[ae]).call(u,(function(t){return t[re]===e.Id&&!w()(Xr).call(Xr,t[ee])})),d=(null===(s=n.entitytree[ae])||void 0===s?void 0:j()(s).call(s,(function(e){return!e[re]&&!w()(ea).call(ea,e[J])&&!w()(ea).call(ea,e[ee])})))||[]}var f=[],g=(0,V.getLangMsg)("formd.field.key0001");if(d.length>0){var m=JSON.parse(yt()(d));f=h()(m).call(m,(function(t){var n=k()(c).call(c,(function(n){return n.FieldId===t[Q]&&n.ParentId===e.Id}));return t.selected=!!n,t})),o[ne]&&(g=(0,V.getLangMsg)({key:"formd.field.key0002",variables:{name:o[ne]}}))}return{entityList:d,fieldList:c,entityFieldList:f,title:g}},na=function(e){var t=(0,_.useContext)(me),n=t.getKdesignerApi,r=t.getDataRef,a=(0,_.useMemo)((function(){return n()}),[]).data,i=r();return ta(e,a,i)},ra=n(71536),aa=n.n(ra),ia="refreshEntityData",la=(n(39160),function(e){var t=e.triggerRef,n=e.onClose,r=e.entityList,a=e.fieldList,i=e.fieldParentId,l=e.title,o=void 0===l?(0,V.getLangMsg)("formd.field.key0001"):l,d=(0,_.useContext)(pe).prefixCls,u=(0,(0,_.useContext)(me).getKdesignerApi)(),s=u.data,f=u.selection,g="".concat(d,"-field-add-panel"),m="".concat(g,"-header"),p="".concat(g,"-body"),C="".concat(g,"-body-no-result"),v="".concat(g,"-body-no-result-container"),A=(0,_.useState)(r),I=(0,q.c)(A,2),x=I[0],k=I[1],b=(0,_.useState)(""),S=(0,q.c)(b,2),N=S[0],T=S[1],F=(0,_.useRef)(),M=(0,_.useRef)(!1);(0,_.useEffect)((function(){D(N)}),[r]),(0,_.useEffect)((function(){if(t.current&&F.current){var e,n,r=t.current.getBoundingClientRect(),a=(t.current.parentElement,null===(e=F.current)||void 0===e?void 0:e.getBoundingClientRect()),i=a.height,l=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,o=document.body.offsetWidth,c=r.left;o-r.left<a.width&&(c=o-a.width-4);var d=r.top+r.height+4;d+i>l&&(d=r.top>i+4?r.top-i-4:l-i-4),F.current.style.cssText+=E()(n=";left: ".concat(c,"px;top: ")).call(n,d,"px;")}}),[]),(0,_.useEffect)((function(){if(F.current){var e=function(e){var t;(null===(t=F.current)||void 0===t?void 0:t.contains(e.target))?M.current=!0:n(e)},t=function(e){var t;M.current?M.current=!1:null!==(t=F.current)&&void 0!==t&&t.contains(e.target)||e.target.getAttribute("data-control-id")===i||n(e)};return document.addEventListener("click",e),document.addEventListener("scroll",t,!0),function(){document.removeEventListener("click",e),document.removeEventListener("scroll",t,!0)}}}),[]),(0,V.useOnClickOutside)([F,t],(function(e){n(e)}));var D=function(e){if(e){var t=j()(r).call(r,(function(t){var n;return null===(n=t[ne])||void 0===n?void 0:w()(n).call(n,e)}));k(t||[])}else(0,Qe.isEqual)(x,r)||k(r)};return K().createElement("div",{ref:F,className:g},K().createElement("div",{className:m},K().createElement("p",{className:"".concat(m,"-left")},o),K().createElement("div",{className:"".concat(m,"-right")},K().createElement(W.Input,{className:"".concat(m,"-right-search"),prefix:K().createElement(W.Icon,{type:"search"}),borderType:"bordered",allowClear:!0,onChange:function(e){var t,n=null===(t=e.target)||void 0===t?void 0:t.value;T(n),D(n)},onPressEnter:D}),K().createElement("i",{className:"kdfont kdfont-guanbi8",onClick:n}))),K().createElement("div",{className:pt()(p,(0,y.c)({},C,0===x.length))},x.length>0?h()(x).call(x,(function(e){var t=e[ne]||e[te]||e[Q];return K().createElement("div",{key:e[Q],className:pt()("".concat(p,"-item"),{selected:e.selected}),onClick:function(){return function(e){if(null!=e&&e.selected){var t=[];c()(a).call(a,(function(n){n.ParentId===i&&n.FieldId===(null==e?void 0:e.Id)&&t.push(n.Id)})),s.deleteControl((0,V.createDeleteAction)(t))}else{var n=(0,V.createUUid)();s.addControl((0,V.createAddAction)({_Type_:(null==e?void 0:e._Type_)||(null==e?void 0:e.Type),FieldType:(null==e?void 0:e._Type_)||(null==e?void 0:e.Type),Name:null==e?void 0:e.Name,ParentId:i,Id:n,FieldId:null==e?void 0:e.Id,Key:null==e?void 0:e.Key},{isAddByEntity:!0})).then((function(){V.eventBus.emit("add-control-id",""),f.setSelect([n])}))}}(e)},title:t},K().createElement(W.Icon,{prefix:"designericon",type:(0,V.getControlIconMap)(e[ee]||e[J]),className:"".concat(p,"-item-icon")}),K().createElement("p",null,t),e.selected&&K().createElement("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAKKADAAQAAAABAAAAKAAAAAB65masAAACwElEQVRYCc3YQWgTQRQA0P9n18ZkUdKr9d7YSj1I0asIhVIQEYSe1ApS8JRW6DVRvFjR5KJSqFLvelUo6MWLl16UxPQq1rNgk5htk/H/6LRrTHY3k00ye9j5M5ndefkzOxsCYPCRSpezaKqPcVJCxkigwnHyjAN6ccYBW3FGAdvhjAF2whkB9MMNHRiEGyowDG5owLC4oQC7wQ0c2C1uoEAd3MCAuriBAHvB9R3YK66vwChwfQNGhesLMEocAwWfojp0cQgiAzEYQ8BcqyWyX9TaOAH3Sjknw7DxlfIJqMGOFxlJBrVxCC8VjlHo4rwXx3HPQF0ccd45pxK3FCi19GuG4geqrsqegLo4RPicHI1f2VrEPYZMLrtnQDZeSSltBVOl9hrUxQHiTmwEzn9aTXxjxNRK5WTNhY8g5ZhCeUutDLbDIeJjfhKFgPveAbwx9flpC3tO4c5l5XHXlW864fjarjPYDtdEEG571fnOMfXZoH8Frjfb/54Itw8o5kq5o5vcdHZNHtktVt8CyIvefq1xVxnsiKO7ij24rG7uJBO36ZsXVZ1LCbiocFwvf6msB+G4X2igH45vJBv4cPJObYLjrSxWLNu+ShtvhetIe912Pv6CYz5SS+W7lOFrf2r+51BTHIRTQ3DWnNHENAO5LZWu3gBoXCjlnYPpHk9Xb9K3ea6uCSoDMxgWxwNJgInyj8pTNWgpH9+YTyYWVJ33OgS5puphSt8MdoPzDoYoFhjnbeO9rt7Y/0B73TFvu19MS2S3I1AXxwPy2rNsa7rwKNZ8UIL2uk5IXjJtgb3gDgfDkhgRl2SdvPX6a5r+04efhYwQ8/8Bo8GFBPh1Q2xYaE3985AYgyM4Ze5ZMRcrHABNwtH7+r2VjC9zgptAY3A0rfRKfGIn47OFLLoMxGHjeCuhHfSrRNykNbfO08owdfwGj3tVsOJZgqAAAAAASUVORK5CYII="}))})):K().createElement("div",{className:v},K().createElement("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOAAAACACAMAAAAlB5WJAAAA3lBMVEUAAADi4uvX3ung5O3d3uTW3eXY3+jX2ufX4uvZ2ufY3unZ3+zX3ejZ4e7X3efV2+fZ2+bX3enW2+bj4/Pb3+rX1+nc4O/X3unN2ebW3efW3efW2+fW3ebW3OfX3Ofa4OrX3ejX3enW3ejn7/bi6fPk6PPj6fPj6fPj6PTi6PTj6PPi6PTj6fPj6fPj5/Ti6fTi6PTo6/fi6fPk6fXj6fXj6fTk6PTf5PHm6/Lj6fPh5fLj6fTo7PTk6PTj6fPj6vPi6PPk6fXL0Nzj6PTX3Oji6PPd4uzi6PPK0NvX3ejhvRgLAAAAR3RSTlMAGhgDBiQdDgwUISsxETkfJig0ChYIEC4JPDZDLT5AKUpHRSvDee7Gh1zqzK/CPfngIt2hUNKRTDPxZuRDnoBtmWbwqfe7V2k1DGkAAAV7SURBVHja7NjratswFAdwnTn74ox0sK20lC5the927DiJc08ayvi//xttMIZk110Tm8KR8e8NhM5d9Hq9Xq/X+wiWnDv7ZJGFaRpmi2TvzKUlOkMeYxevuPFRig6YHnK8KT9MhdGswMM7vMDcWB2ccpwhPw2EkYItzrQNhHlkggskptWbgZ/iIqlvVJxOI1wsMqigzl004M6FIRw05AgTWAUaKwzoiYMX1Apjf7NbDW17uNpt/DhErRf2pcaqfV/kTKhi4kS1L+T+hwVeWRcTqjUp1nilEKw5qHL9Mb1p7LtmVZo5qmaS/kvOUMW4W0xdlGVLetcyQ5nLtuMPIpR5ks4gPZRFXEupXw1Pm85iV8PUFyzJFCUOnc1BScpzt0hQEtAFApQkgqGg5v8a/yHDDXiwhW5GF5pBt+VXZ07QeTZdyPagOwlmrByaTNLFZAZNzm0mDaBbUgNL1lno1SRgqzT0BCtTaFxJjUgXGl4D2wEanxryoTkITnIo6zE1NF5DyQUjEpqCGiug4TSvHaGZUGMTaI6CjxhKRC1EUGLBhuVCcagFB4rLp9fLlhGqTHgm4RxKSK2ELI8zDpSYWolZ3tf2dV2+fa/fCy4SKBtqZcNyr19A2VErOygLwUUGZUWtrKBkgosQypBaGUIJBRcpFJtasaGkgovOP7DTIWrdXH/vbpG5/jp6+CPraJug+4e/Fp1s9J/uH//51cFRzRo+Ks/dG7a/jZ40DpTQ7sK6dHN7pwug2Xw2f+H9MfpZcreG8vxwZfzJ4st9RQJlsXwy/eh0dVtVQLNZjsw+G/5u50572obBAI4/ce6zbdKkB71gLVcBCWldx4CtgjLD9/9Cc7MKHEio7SZTFuUnS6Eub/5CCmpj2+h5PTI8b3slzjDlcbm8/q+/+B17H93iNze/J8PCvrrvIqvlOGNLCqEoQT/FClPuJ5NmIQ9f9GZv8mo41qEQlk/r+30y/CVO/gm9Ah6f6f7kHT+C/MmOn2aBKReHR7k/AFUGhyk6CuTNcFLNMO3XkZrzI2x9eJRq6Ob4wU/XAxlQJ5Vziym3X518FyGg0UEWlE+daQ1iamuQ7iemzXu5LiORDkYHIzISZdu5XArdlr2Lc45pj3kuBIqGo8+YsCdZGjOYFbaUK/SGn+qFsB+txWRe1GK8Tm8HG/bSbrJZFrSc0vR2QrCHrspqVcyC2I63kwN7kCxWzUURS5rNPgMXhIUNdlc3BSxKb/oMWiAs0jj8yH9bgewwkUFUW+Nxuv/GkLUPNNdhEoEohJCEJDLerrGM+ft9t/a8PD8kCrUOE0lxkaYhV+EP5HQhsjmL7ntOFjZse2APXpEXRDxHxsf3BpYBfNqcpAuB7XV0X1x49XS+mMlAqDavhgw8TG4rLIz0xdZ449IAgGaLmxoCB5ffKRa03va94L+mBgkUoCrALhJwJrhJ2X+g+raFqogGsNNFfBHcZk4K4z6qUBUSATNDiPtN7KAAUkj66ELbEsFxowkECR714K9x0nzcEBEAq24Y64ZdMuLrFv06ORcTPKzjCr83b2kCTGClCBI8buUJf3DSlPi18wiUFZmMjPcED8w5T/uVa8QPWMmCBI88WuCcCkFI8YdWzXBqodUmzLaZQCZekRdkUFcQUvyxY/JlemHD5ARlZUzTCzWXD5RWVqGk0yI9IkOnJeehvLILmZU7MLMQGRygzDIKp+0g6AbdGPmBjPiaOhdAqWUVmiEzKLesQldhVL5t6oyFkcymPBu7eAv1qgRmFpb7/lgXMhSuoDIyChFURnrhHVRHauEYKmRbWOJTLnIvPLahWt4VHn+HqjGm1e7bFFa7b1NY7b5NYbX7SOGK9J1U7f6ZgO4q9f+9VqvVarV/7g8kJJPsErZ8tQAAAABJRU5ErkJggg=="}),K().createElement("p",null,(0,V.getLangMsg)("formd.field.key0005")))))});function oa(e){var t=e.fieldList,n=void 0===t?[]:t,r=e.entityFieldList,a=void 0===r?[]:r,i=e.title,l=void 0===i?(0,V.getLangMsg)("formd.field.key0001"):i,o=e.fieldParent,c=e.className,d=(0,_.useContext)(pe).prefixCls,u=(0,_.useContext)(me),s=u.getKdesignerApi,f=u.invokeAction,g=u.getDataRef,m=(0,_.useMemo)((function(){return s()}),[]).data,p=(0,_.useState)(!1),C=(0,q.c)(p,2),v=C[0],y=C[1],A=(0,_.useState)({fieldList:n,entityFieldList:a,title:l}),h=(0,q.c)(A,2),I=h[0],E=h[1],x=(0,_.useRef)(null);(0,_.useEffect)((function(){E({fieldList:n,entityFieldList:a,title:l})}),[n,a,l]),(0,_.useEffect)((function(){var e=function(){var e=g(),t=ta(o,m,e),n=t.entityFieldList,r=t.fieldList,a=t.title;E({fieldList:r,entityFieldList:n,title:a})};return V.eventBus.on(ia,e),function(){V.eventBus.off(ia,e)}}),[]);return K().createElement(K().Fragment,null,K().createElement("div",{ref:x,className:pt()("".concat(d,"-field-add-container"),c),onClick:function(e){e.stopPropagation(),f(ia,[]),v||y(!0)}},K().createElement("i",{className:"kdfont kdfont-zengjia3"}),K().createElement("p",{className:"".concat(d,"-field-add-container-text")},(0,V.getLangMsg)("formd.field.key0004"))),v&&aa().createPortal(K().createElement(la,{fieldParentId:null==o?void 0:o.Id,title:I.title,onClose:function(e){e.stopPropagation(),y(!1)},entityList:I.entityFieldList,fieldList:I.fieldList,triggerRef:x}),document.body))}var ca=["style"];function da(e,t){var n=D()(e);if(a()){var r=a()(e);t&&(r=j()(r).call(r,(function(t){return l()(e,t).enumerable}))),n.push.apply(n,r)}return n}function ua(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?c()(n=da(Object(a),!0)).call(n,(function(t){(0,y.c)(e,t,a[t])})):u()?f()(e,u()(a)):c()(r=da(Object(a))).call(r,(function(t){m()(e,t,l()(a,t))}))}return e}var sa=function(e){var t=e.field;if(Jr(t))return null;var n=(0,_.useContext)(me),r=n.getKdesignerApi,a=n.isDataWithMetaMode,i=(0,_.useMemo)((function(){return r()}),[]).data,l=i.getData(),o=Ot(t),c=o.style,d=(0,C.c)(o,ca),u=ge(t,l),s=na(t),f=s.entityFieldList,g=s.fieldList,m=s.entityList,p=s.title,v=k()(u).call(u,(function(e){var t;return"field-set-panel-add"===(null==e||null===(t=e.props)||void 0===t?void 0:t.className)})),y=_t(c,u),A=(0,_.useCallback)((function(e){var t=e.field,n=e.itemHW,r=e.itemVW,a=e.fullWidthPercent,l=e.divstyle;if(!t)return{};var o,c=i.findControl(t[Q]),d=c[le],u="".concat("h"===d?n:r,"px");c.FullLine&&(l={width:E()(o="calc(".concat(u," + ")).call(o,a,"%)")});return(c.Hidden||c.Invisible)&&(l.display="none"),l}),[l]),h=(0,_.useCallback)((function(e){var t=e.field;return!!t&&i.findControl(t[Q]).FullLine}),[l]),I=(0,_.useCallback)((function(e){var t=e.childField;if(t){var n=i.findControl(t[Q]);return n&&"h"===n[le]}}),[l]);return Zt("FieldsetPanel",u,{field:t,controlProps:ua(ua({},d),{},{baseControlCollapsible:!1,customStyle:{padding:0}}),style:y,getDivStyle:A,getIsFieldFullline:h,getIsLabelDirectionEqualH:I,addFieldControl:!a&&m.length>0&&!v?K().createElement(oa,{className:"field-set-panel-add",fieldParent:t,title:p,fieldList:g,entityFieldList:f}):null,isDesigner:!0,"data-ctrl-type":"fieldpanel"})},fa=n(11872),ga=n.n(fa),ma="designericon designericon-",pa=function(e,t){return(0,Qe.property)(t)(e)},Ca={Direction:{row:"pailiefangshi-shuiping",column:"pailiefangshi-chuizhi"}},va=function(e){var t=e.originProp,n=e.path,r=e.pathLength,a=e.inputMeta;if("Editor"===n[r-3]){var i,l=pa(a,Ye()(n).call(n,0,-2)),o=t.id,c=t.name,d={};o&&c&&(0,v.c)(d,{Value:o,Id:o,Name:c});var u,s=Ca[null==l?void 0:l.PropertyName];if((null==l?void 0:l.Group)===(0,V.getLangMsg)("formd.rightView.key0002")&&s&&s[o])d.IconClassName=E()(u="".concat(ma)).call(u,s[o]);return w()(i=["AlignItems","AlignContent","JustifyContent"]).call(i,null==l?void 0:l.PropertyName)&&"default"===o&&(0,v.c)(d,{Value:"flex-start",Id:"flex-start"}),d}},ya=n(83789);function Aa(e,t){var n=D()(e);if(a()){var r=a()(e);t&&(r=j()(r).call(r,(function(t){return l()(e,t).enumerable}))),n.push.apply(n,r)}return n}function ha(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?c()(n=Aa(Object(a),!0)).call(n,(function(t){(0,y.c)(e,t,a[t])})):u()?f()(e,u()(a)):c()(r=Aa(Object(a))).call(r,(function(t){m()(e,t,l()(a,t))}))}return e}var Ia=function(e,t,n){return(0,V.adaptorMeta)(e,(0,V.mergeTransformKeyMap)(V.transformKeyMap,(0,y.c)({},"items",["Enum",va])),t,void 0,n)},Ea={BizappId:"bizappId",Name:"name",Id:"id",appNum:"formId",Key:"key",EntityId:"rootEntityId"},xa=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.formmeta,a=e.entitymeta,i=e.devType,l={};if(c()(t=D()(r)).call(t,(function(e){r[e]&&Ea[e]&&(l[Ea[e]]=r[e])})),l[ae]=r.Items,l.extElements=null==a?void 0:a.ExtElements,l.devType=i||r.DevType,n){var o,d,u=null===(o=a.Items[0])||void 0===o?void 0:o.Id;l.EntityData={Items:h()(d=a.Items).call(d,(function(e){return e.Id===u||e.ParentId?e:ha(ha({},e),{},{ParentId:u})}))}}return a?(0,ya.cp)(l,(function(e){var t;c()(t=e[ae]).call(t,(function(e){var t=e.FieldId||e.EntryId||e.CardEntryId;if(t){var n,r=k()(n=a.Items).call(n,(function(e){return e.Id===t}));r&&(e.FieldType=r._Type_)}}))})):l};function ka(e,t,n){var r=(0,H.c)(e[ae]),a=[],i=[],l={},o=[];return c()(r).call(r,(function(e,r){var i,d,u,s,f=e.Id,g=e.Name,m=e.ParentId,p=e.Key,C=e.Hidden,v=e.Invisible,y={key:f,title:g||p||f,parentId:m,Hidden:C||v};null!=n&&n.prefix&&(y=ha(ha({},y),{},{key:E()(d="".concat(n.prefix)).call(d,f),parentId:m?E()(u="".concat(n.prefix)).call(u,m):m}));(t&&(y.title=E()(i="".concat(g,"")).call(i,p,"")),n&&r>0)&&c()(s=D()(n)).call(s,(function(t){y[t]=e._Type_}));a.push(y),y.parentId?o.push(y):l=ha({},y)})),function e(t,n,r){var a=(0,H.c)(n),l=0;t.parentId||i.push(ha(ha({},t),{},{level:r})),c()(n).call(n,(function(n,o){if((null==n?void 0:n.parentId)===t.key){var c,d=E()(c="".concat(r,"_")).call(c,l++);i.push(ha(ha({},n),{},{level:d})),ga()(a).call(a,o,1,void 0),t.children?t.children.push(n):t.children=[n],e(n,a,d)}}))}(l,o,"0"),l.searchData=i,[l]}function ba(e,t,n,r){var a=r.isShowKey,i=r.isListMeta,l=[];return c()(e).call(e,(function(e){var r,o={key:e.Id,title:e.Name,type:e.Type,createType:e.CreateType};(n.push(ha({},o)),a)&&(o.title=E()(r="".concat(e.Name,"")).call(r,e.Id,""));e.Items&&(o.children=ba(e.Items,t,n,{isShowKey:a,isListMeta:i})),t.push(e.Id),l.push(o)})),l}function Sa(e,t){var n=t.isShowKey,r=t.isListMeta,a=[],i=[];return{treeData:ba([ha({},e)],a,i,{isShowKey:n,isListMeta:r}),ids:a,flattenTrees:i}}var Na=["style"],wa=["field","className"];function Ta(e,t){var n=D()(e);if(a()){var r=a()(e);t&&(r=j()(r).call(r,(function(t){return l()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fa(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?c()(n=Ta(Object(a),!0)).call(n,(function(t){(0,y.c)(e,t,a[t])})):u()?f()(e,u()(a)):c()(r=Ta(Object(a))).call(r,(function(t){m()(e,t,l()(a,t))}))}return e}function Ma(e){var t=e.field,n=e.className,r=(0,C.c)(e,wa),a=(0,_.useContext)(me),i=a.getKdesignerApi,l=(0,a.getCommonUtil)(),o=l.getUiConfig,c=l.memoryCacheApi,d=c.getPageData,u=c.addDataChangeListener,s=(0,V.useGetFieldProperty)(t,i()),f=(0,_.useState)(),g=(0,q.c)(f,2),m=g[0],p=g[1],A=(0,_.useState)(),h=(0,q.c)(A,2),I=h[0],E=h[1],x=(0,_.useState)(!1),k=(0,q.c)(x,2),b=k[0],S=k[1];(0,_.useEffect)((function(){var e=t.Id,n=d([e,"embedFormContent"]);n&&N(n);var r=u([e,"embedFormContent"],N),a=d([e,"showDesign"]);void 0!==a&&S(a);var i=u([e,"showDesign"],S);return function(){r(),i()}}),[]);var N=function(e){var t=xa(e);p(t);var n=e.modelType;if(n){o(n,{transformMeta:function(e){return(0,V.transformMeta)(Ia(e))}}).then((function(e){E(e)}))}},w=s("Name"),T=s("ShowParam"),F=b&&m&&I&&T,M=T?w:(0,V.getLangMsg)("bosd.embedForm.placeholder"),D=pt()((0,y.c)((0,y.c)({"embed-form-wrap":!0,"show-name":!F},n,!!n),"not-allow",F));return K().createElement("div",(0,v.c)({},r,{className:D}),F?K().createElement(Da,{uiConfig:I,formData:m}):M,K().createElement("div",{className:"masker",title:(0,V.getLangMsg)("bosd.embedForm.tips")}))}function Da(e){var t=e.uiConfig,n=e.formData,r=(0,_.useContext)(me),a=(0,_.useContext)(pe),i=(0,_.useContext)(V.GlobalConfigContext),l=(0,V.createDataContext)(t,n,i),o=(0,V.createMetaApi)(t,i),c=n.Items[0],d=Xi(c),u=r.getKdesignerApi(),s=(0,_.useCallback)((function(){return Fa(Fa({},u),{},{data:l,meta:o,selection:Fa(Fa({},u.selection),{},{setSelect:function(e){},addSelectChangeListener:function(){return function(){}}})})}),[]);return K().createElement(me.Provider,{value:Fa(Fa({},r),{},{getKdesignerApi:s})},K().createElement(pe.Provider,{value:Fa(Fa({},a),{},{getData:l.getData,getKdesignerApi:s,onRootPanelMount:function(){}})},d))}var La=["className"],Pa=function(e){var t=e.field,n=(0,_.useState)(0),r=(0,q.c)(n,2),a=r[0],i=r[1],l=(0,_.useContext)(me),o=l.getBaseControlByType,c=l.getKdesignerApi,d=l.prefixCls,u=(0,_.useMemo)((function(){return c()}),[]),s=u.data.getData(),f=u.selection,g=Ot(t),m=g.className,p=void 0===m?"":m,y=(0,C.c)(g,La),A=o("BillList"),I=pt()([p,$n(d)("bill-list")]),E=ge(t,s),x=function(e){var t,n=E[e],r=null==n||null===(t=n.props)||void 0===t||null===(t=t.field)||void 0===t?void 0:t.Id;f.setSelect([r])};return(0,_.useLayoutEffect)((function(){x(a)}),[a]),K().createElement(A,(0,v.c)({className:I},y,{rendPanel:function(){return E[a]},rendToolbar:function(){return h()(E).call(E,(function(e,t){var n=((null==e?void 0:e.props)||{}).field,r=n.Name||n.Id,l={padding:"0 10px",cursor:"pointer"};return t===a&&(l.color="blue"),K().createElement("span",{style:l,onClick:function(e){return function(e,t){e.stopPropagation(),t===a?x(t):i(t)}(e,t)}},r)}))}}))},Ba=n(52360),Ra=n.n(Ba);function Ga(e,t){var n=D()(e);if(a()){var r=a()(e);t&&(r=j()(r).call(r,(function(t){return l()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oa(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?c()(n=Ga(Object(a),!0)).call(n,(function(t){(0,y.c)(e,t,a[t])})):u()?f()(e,u()(a)):c()(r=Ga(Object(a))).call(r,(function(t){m()(e,t,l()(a,t))}))}return e}function za(e){var t,n,r,a=e.containerId,i=e.addRef,l=(0,_.useRef)(),o=(0,_.useRef)(),d=(0,_.useContext)(V.GlobalConfigContext).showMessage,u=(0,_.useContext)(pe),s=u.getData,f=u.getKdesignerApi,g=(0,_.useContext)(me),m=g.getDataRef,p=g.getModel,C=g.canAddControlFromEntityNode,v=p(),y=s(),A=f(),I=(0,_.useState)(""),x=(0,q.c)(I,2),b=x[0],S=x[1],N=(0,_.useState)(),T=(0,q.c)(N,2),F=T[0],M=T[1],D=(0,_.useRef)([]),L=j()(t=y[ae]).call(t,(function(e){return e[re]===a})),P=(0,_.useMemo)((function(){var e,t;return j()(e=(null===(t=m())||void 0===t||null===(t=t.entitytree)||void 0===t?void 0:t.Items)||[]).call(e,(function(e){var t=e.Items;return!(null==t||!t.length)}))}),[]);(0,_.useEffect)((function(){if(i.current){var e,t=i.current.parentElement.getBoundingClientRect(),n=l.current.getBoundingClientRect(),r=n.width,a=n.height,o=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,c=document.body.offsetWidth,d=jn()(String(c/2-r/2)),u=t.top+jn()(t.height/2)+25;u+a>o&&t.top>a&&(u=t.top-a),l.current.style.cssText+=E()(e=";left: ".concat(d,"px;top: ")).call(e,u,"px;")}}),[]);var B=function(e,t,n){e.stopPropagation(),n?A.data.deleteControl((0,V.createDeleteAction)([n])):function(e){var t=e.Id,n=e.CreateType;if(k()(L).call(L,(function(e){return e.ListFieldId===t})))d((0,V.getLangMsg)("formd.entry.key0005"));else if(!C(n,t,a)){var r=(0,V.createUUid)(),i=v.getEntityTreeInfo(t);A.data.addControl((0,V.createAddAction)({_Type_:i.get("_TYPE_")||i.get("Type"),FieldType:i.get("_TYPE_")||i.get("Type"),Name:i.get("Name"),ParentId:a,Id:r,FieldId:t,ListFieldId:t})).then((function(){A.selection.setSelect([r])}))}}(t)};(0,_.useEffect)((function(){var t=function(t){for(var n=t.target;n;){if(n===l.current)return;n=n.parentNode}e.handleClick(t)};return document.addEventListener("click",t),function(){document.removeEventListener("click",t)}}),[l.current]);var R=(0,_.useRef)([]),G=function e(t,n){var r=[];c()(t).call(t,(function(t){var n=(null==t?void 0:t.Items)||[];if(n.length>0){R.current.push({tabName:t.Name,id:t.Id,panel:j()(n).call(n,(function(e){var t;return!(null!=e&&null!==(t=e.Items)&&void 0!==t&&t.length)}))});var a=j()(n).call(n,(function(e){var t;return!(null==e||null===(t=e.Items)||void 0===t||!t.length)}));a&&c()(a).call(a,(function(t){e((null==t?void 0:t.Items)||[],t)}))}else r.push(t)})),n&&R.current&&R.current.push({tabName:n.Name,id:n.Id,panel:r})};(0,_.useEffect)((function(){G(P)}),[]);var O=function e(t){var n=[];return c()(t).call(t,(function(t){var r=(null==t?void 0:t.Items)||[];if(r.length>0){var a,i=e(r);0===i.length&&(i=""),n.push({isOpened:!(D.current&&w()(a=D.current).call(a,t.Id)),id:t.Id,isSelected:t.Id===F,text:t.Name,children:i})}})),n},z=(0,_.useState)(O(P)),U=(0,q.c)(z,2),W=U[0],H=U[1],Z=(0,_.useState)(R.current),Y=(0,q.c)(Z,2),Q=Y[0],J=Y[1];(0,_.useEffect)((function(){var e,t=null==Q||null===(e=Q[0])||void 0===e?void 0:e.id;M(t)}),[null==Q||null===(n=Q[0])||void 0===n?void 0:n.id]);return(0,_.useEffect)((function(){H(O(P))}),[F]),(0,_.useEffect)((function(){var e,t=(e=R.current,b&&""!==Ra()(b).call(b)?(S(Ra()(b).call(b)),h()(e).call(e,(function(e){var t,n=j()(t=e.panel).call(t,(function(e){var t,n=e.Name;if(n)return!!(n&&Pe()(t=n.toLocaleLowerCase()).call(t,b.toLocaleLowerCase())>=0)||void 0}));return Oa(Oa({},e),{},{panel:n})}))):e);J(t)}),[null===(r=o.current)||void 0===r?void 0:r.value,b,F]),K().createElement("div",{className:"list-grid-add-panel",ref:l},K().createElement("div",{className:"header"},K().createElement("div",{className:"title"},K().createElement("span",null,(0,V.getLangMsg)("formd.entry.key0006"))),K().createElement("div",{className:"searchBox"},K().createElement("div",{className:"search"},K().createElement("span",{className:"kdfont kdfont-f searchIcon"}),K().createElement("div",{className:"searchInput"},K().createElement("input",{className:"input",onKeyUp:(0,Qe.debounce)((function(){var e=o.current&&o.current.value;S(e)}),300),placeholder:(0,V.getLangMsg)("formd.entry.key0007"),type:"text",ref:o}),b&&K().createElement("span",{onClick:function(e){S(""),o.current.value="",e.nativeEvent.stopImmediatePropagation()},className:"kdfont kdfont-qingkong searchIcon"}))),K().createElement("span",{onClick:e.handleClick,className:"kdfont kdfont-toubudaohang_guanbi close"}))),b?K().createElement(ja,{data:Q,onClick:B,addedFields:L}):K().createElement("div",{className:"list"},K().createElement(_a,{data:W,onClick:function(e){M(e.id)},handleExpand:function(e,t){var n,r,a=null===(n=D.current)||void 0===n?void 0:Pe()(n).call(n,e);-1!==a?ga()(r=D.current).call(r,a,1):D.current.push(e);H(O(P))},active:F}),K().createElement(Ka,{data:Q,onClick:B,active:F,addedFields:L})))}function ja(e){var t=(0,_.useState)(),n=(0,q.c)(t,2),r=n[0],a=n[1],i=e.addedFields;return(0,_.useEffect)((function(){var t,n;a((t=e.data,n=[],c()(t).call(t,(function(t){var r=t.tabName,a=t.panel;if(null!=a&&a.length){var l=h()(a).call(a,(function(t){var n=t.Id,r=t.Name,a=j()(i).call(i,(function(e){return e.ListFieldId===n}));return K().createElement("div",{key:n+r,className:pt()("searchPanelItem",{selected:!(null==a||!a.length)}),onClick:function(n){var r;return e.onClick(n,t,null===(r=a[0])||void 0===r?void 0:r.Id)}},t.Name,K().createElement("span",{className:pt()("kdfont kdfont-gouxuan gouxuan",{hideGou:!a.length})}))}));n.push(K().createElement("li",{key:t.id,className:"searchPanelLi"},K().createElement("div",{className:"searchTitle"},r),l))}})),n))}),[e.data,i]),K().createElement("ul",{className:"searchPanel"},r)}function _a(e){var t=e.handleExpand,n=(0,(0,_.useContext)(me).getBaseControlByType)("Tree");return K().createElement("div",{className:"tabBar"},K().createElement(n,{Grow:1,Overflow:"auto",focusedNode:e.active,childNodes:e.data,handleClick:e.onClick,handleExpand:function(e,n,r,a){return t(e,a)}}))}function Ka(e){var t=(0,_.useState)(),n=(0,q.c)(t,2),r=n[0],a=n[1],i=e.addedFields,l=function t(n){var r=[];return c()(n).call(n,(function(n,a){var l=n.panel;if(null!=l&&l.length){var o;o=h()(l).call(l,(function(n){var a,l=n.Id;if((null==n||null===(a=n.Items)||void 0===a?void 0:a.length)>0){var o=t(n.Items);r.push(o)}var c=j()(i).call(i,(function(e){return e.ListFieldId===l}));return K().createElement("div",{key:l,className:pt()("panelItem",{selected:!!c.length}),onClick:function(t){var r;return e.onClick(t,n,null===(r=c[0])||void 0===r?void 0:r.Id)}},n.Name,K().createElement("span",{className:pt()("kdfont kdfont-gouxuan gouxuan",{hideGou:!c.length})}))})),r.push(K().createElement("li",{key:n.id,className:pt()("panelLi",{hide:n.id!==e.active})},o))}})),r};return(0,_.useEffect)((function(){a(l(e.data))}),[e.data,e.active,i]),K().createElement("ul",{className:"tabPanel"},r)}var Va=["containerId"];function Ua(e){var t=e.containerId,n=(0,C.c)(e,Va),r=(0,_.useState)(!1),a=(0,q.c)(r,2),i=a[0],l=a[1],o=(0,_.useContext)(me).prefixCls,c=(0,_.useRef)(null),d=function(e){e.stopPropagation(),l(!i)};return K().createElement(K().Fragment,null,K().createElement("div",{className:$n(o)("list-grid-add-col")},K().createElement("span",{onClick:d,ref:c,className:$n(o)("list-grid-add-col-add")},K().createElement("span",{className:$n(o)("list-grid-add-col-icon")},"+"),(0,V.getLangMsg)("formd.entry.key0004"))),i&&aa().createPortal(K().createElement(za,(0,v.c)({containerId:t,handleClick:d,addRef:c},n)),document.body))}var Wa=["className"],Ha=function(e){var t,n=e.field,r=(0,_.useRef)(null),a=n.Id,i=(0,_.useContext)(me),l=i.getKdesignerApi,o=i.prefixCls,c=(0,_.useMemo)((function(){return l()}),[]),d=c.data,u=c.meta,s=d.getData(),f=Ot(n),g=f.className,m=(0,C.c)(f,Wa),p=(0,(0,_.useContext)(me).getBaseControlByType)("FlexPanel"),y=ge(n,s),A=null===(t=r.current)||void 0===t?void 0:t.clientWidth,I=d.getParentControl(a)||{},E=u.getControlMetaProperty(I._Type_,"EntityId"),x=!!D()(E).length,k={titleFontSize:null==n?void 0:n.TitleFontSize};return K().createElement(Ce.Provider,{value:k},K().createElement(p,(0,v.c)({className:pt()([$n(o)("list-grid-view"),g])},m),K().createElement("div",{className:$n(o)("list-grid-view-container"),ref:r},h()(y).call(y,(function(e){return K().cloneElement(e,{showInGridView:!0,rootWidth:A})})),!x&&K().createElement(Ua,{containerId:a}))))},qa=["className"],Za=function(e){var t,n,r=e.field,a=(0,_.useContext)(me),i=a.getCommonUtil,l=a.getKdesignerApi,o=a.prefixCls,c=(0,_.useMemo)((function(){return l()}),[]).data.getData(),d=i().mergeCommonClassNames,u=ge(r,c),s=!(null!==(t=j()(n=c[ae]).call(n,(function(e){var t;return e[re]===(null===(t=u[0])||void 0===t||null===(t=t.props)||void 0===t||null===(t=t.field)||void 0===t?void 0:t[Q])})))&&void 0!==t&&t.length),f=Ot(r),g=f.className,m=(0,C.c)(f,qa),p=m.Grow,y=m.Shrink,A=m.Direction,h=m.Wrap,I=m.AlignItems,E=m.AlignSelf,x=m.JustifyContent,k=m.AlignContent,b=pt()([$n(o)("list-card-view"),g,d({Grow:p,Shrink:y,Direction:A,Wrap:h,AlignItems:I,AlignSelf:E,JustifyContent:x,AlignContent:k})]),S=K().cloneElement(u[0],{key:"cloneControl1"}),N=K().cloneElement(u[0],{key:"cloneControl2"}),w=K().cloneElement(u[0],{key:"cloneControl3"});return K().createElement("div",(0,v.c)({className:b},m),K().Children.toArray(u),s?null:S,s?null:N,s?null:w)},Ya=["className"],Qa=function(e){var t=e.field,n=t._Type_,r=(0,_.useContext)(me),a=r.getBaseControlByType,i=r.getKdesignerApi,l=r.prefixCls,o=(0,_.useMemo)((function(){return i()}),[]).data.getData(),c=ge(t,o),d=Ot(t),u=d.className,s=(0,C.c)(d,Ya),f=a("CardRowPanel"),g=pt()([u,Xn(l,"designer-card-row")]);return K().createElement(f,(0,v.c)({className:g,Type:n,isDesigner:!0,emptyTextLangKey:"pagelist.kapianshitu"},s),c)};var Ja=function(e){var t,n=e.field,r=Ot(n),a=(0,(0,_.useContext)(me).getBaseControlByType)("F7SelectedList");return K().createElement(a,(0,v.c)({},r,{items:(t=(0,V.getLangMsg)("formd.f7SelectedList.key0001"),[{text:t,value:0},{text:t,value:1},{text:t,value:2}]),readonly:!0}))},Xa=n(3460),$a=n(27688),ei=function(){function e(t){(0,Xa.c)(this,e),(0,y.c)(this,"relationMap",{}),this.init(t)}return(0,$a.c)(e,[{key:"init",value:function(e){this.relationMap[e]||(this.relationMap=(0,y.c)({},e,{}))}},{key:"setEntryFieldId",value:function(e,t,n){var r=this.relationMap[e];r&&(r[t]=n)}},{key:"delEntryOrFieldId",value:function(e,t){this.relationMap[e]&&(t?delete this.relationMap[e][t]:delete this.relationMap[e])}},{key:"getFlatFieldId",value:function(e,t){var n=this.relationMap[e];return n?n[t]:null}},{key:"getEntryFieldId",value:function(e,t){var n,r=this.relationMap[e];return r?k()(n=D()(r)).call(n,(function(e){return r[e]===t})):null}}]),e}(),ti=new ei,ni=["RowHeight","HeadHeight","style","ShowSelChexkbox","ShowSeq","ShowFlatPanel","AutoRowHeight"],ri=["field","showFlatPanel","switchToFlatPanel","className","Direction","showSeq","multi","showEmptyTips","Wrap","Overflow","Grow","Shrink","showSelChexkbox","headHeight","autoRowHeight","rowHeight"];function ai(e,t){var n=D()(e);if(a()){var r=a()(e);t&&(r=j()(r).call(r,(function(t){return l()(e,t).enumerable}))),n.push.apply(n,r)}return n}function ii(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?c()(n=ai(Object(a),!0)).call(n,(function(t){(0,y.c)(e,t,a[t])})):u()?f()(e,u()(a)):c()(r=ai(Object(a))).call(r,(function(t){m()(e,t,l()(a,t))}))}return e}var li="GridFlatPanelAp",oi=function(e){var t=e.field,n=Ot(t),r=(0,_.useContext)(me),a=r.getKdesignerApi,i=r.getDataRef,l=(0,_.useMemo)((function(){return a()}),[]),o=l.data,c=l.dataFactory,d=(0,_.useMemo)((function(){return i().entitymeta[ae]}),[]),u=t[Q],s=n.RowHeight,f=n.HeadHeight,g=n.style,m=n.ShowSelChexkbox,p=n.ShowSeq,y=n.ShowFlatPanel,A=n.AutoRowHeight,I=(0,C.c)(n,ni),E=(0,_.useState)(0),x=(0,q.c)(E,2),b=x[0],S=x[1],N=(0,_.useRef)(null);(0,_.useEffect)((function(){var e=N.current;if(e){var t=e.clientWidth;S(m||p?m&&p?t-80:t-40:t)}}),[m,p,N.current]);var w=(0,_.useCallback)((function(){var e,t,n=j()(e=o.getAllSubControls(u)).call(e,(function(e){return"EntryFieldAp"===e[ee]}));return{entityFields:j()(t=h()(n).call(n,(function(e){return k()(d).call(d,(function(t){return t[Q]===e.FieldId}))}))).call(t,(function(e){return e})),entryFields:n}}),[u,d]),T=(0,_.useCallback)((function(){}),[u]),F=(0,_.useCallback)((function(){if(ti.init(u),w().entryFields.length>=1){var e=ii(ii({},c({type:li,parentId:u})),{},{Direction:"column",Grow:1});o.addControl((0,V.createAddAction)(e,{isAddFlatFieldAp:!0})).then((function(e){}))}}),[]),M=(0,_.useCallback)((function(){var e,t=Y()(e=o.getSubControls(u)).call(e,(function(e){return e[ee]===li}));t?T():F()}),[u]),D=(0,_.useCallback)((function(){var e,n=t[ee],r=t[Q],a=l.data.getData(),i=j()(e=a[ae]).call(e,(function(e){return e[re]===r&&e[ee]!==li}));return"DataGridAp"===n&&!m&&!p&&0===i.length}),[m,p]);(0,_.useEffect)((function(){y?(ti.init(u),M()):ti.delEntryOrFieldId(u)}),[y,M]);var L=K().createElement(ci,(0,v.c)({rowHeight:s,showFlatPanel:y,headHeight:f,showSeq:p,showSelChexkbox:m,showEmptyTips:D(),multi:!n.hasOwnProperty("Multi")||n.Multi,autoRowHeight:A,rootWidth:b,ref:N,switchToFlatPanel:M,field:t},I));return Zt(L,[],{field:t,style:g,controlProps:ii(ii({},I),{},{baseControlCollapsible:!1})})},ci=(0,_.forwardRef)((function(e,t){var n=e.field,r=e.showFlatPanel,a=e.switchToFlatPanel,i=e.className,l=e.Direction,o=e.showSeq,c=e.multi,d=e.showEmptyTips,u=e.Wrap,s=e.Overflow,f=e.Grow,g=e.Shrink,m=e.showSelChexkbox,p=e.headHeight,A=e.autoRowHeight,h=e.rowHeight,I=(0,C.c)(e,ri),E=(0,_.useState)(0),x=(0,q.c)(E,2),k=x[0],b=x[1],S=(0,_.useContext)(V.ConfigContext),N=S.getPrefixCls,w=S.prefixCls,T=(0,_.useContext)(me),F=T.getKdesignerApi,M=T.getCommonUtil,D=T.isDataWithMetaMode,L=(0,_.useMemo)((function(){return F()}),[]),P=L.data,B=L.selection,R=N(w,"form-designer-entry"),G=M().mergeCommonClassNames,O=P.getData(),z=ge(n,O,{excludeType:li}),U=ge(n,O,{ctrlType:li}),W=na(n),H=W.entityFieldList,Z=W.fieldList,Y=W.entityList,J=W.title,X={titleFontSize:null==n?void 0:n.TitleFontSize,autoRowHeight:A,rowHeight:h,headHeight:p};(0,_.useEffect)((function(){var e=B.addSelectChangeListener((function(){for(var e=B.getActiveSelectedId(),t=k,n=!1;!n;){var a=P.findControl(e)[ee];a[re]?a[ee]===li?(n=!0,t=1):"EntryAp"===a[ee]&&(n=!0):n=!0,e=P.getParentControlId(e)}k!==t&&b(t),r||b(0)}));return function(){e()}}),[k,r]);var $=(0,_.useCallback)((function(e){var t=n[Q];if(b(e),1===e){var r;a();var i=P.getSubControls(t),l=null===(r=j()(i).call(i,(function(e){return e[ee]===li}))[0])||void 0===r?void 0:r[Q];l&&B.setSelect(l)}}),[n[Q]]),te=(0,_.useCallback)((function(e,t){e.stopPropagation(),$(t)}),[$]),ne=pt()((0,y.c)((0,y.c)({},"".concat(R,"-root"),!0),i,i),G({Direction:l,Wrap:u,Overflow:s,Grow:f,Shrink:g})),ae=pt()((0,y.c)((0,y.c)({},"".concat(R,"-view-panel"),!0),"".concat(R,"-active-panel"),0===k)),ie=pt()((0,y.c)((0,y.c)({},"".concat(R,"-view-panel"),!0),"".concat(R,"-active-panel"),1===k)),le=pt()((0,y.c)((0,y.c)({},"".concat(R,"-grid-view"),!0),"".concat(R,"-hide"),1===k)),oe=pt()((0,y.c)((0,y.c)({},"".concat(R,"-flat-view"),!0),"".concat(R,"-hide"),0===k)),ce=pt()((0,y.c)((0,y.c)({},"".concat(R,"-switch-panel"),!0),"".concat(R,"-hide"),!r)),de={};!A&&(de={height:h});var ue=pt()((0,y.c)({},"".concat(R,"-multi-chekbox"),c),"".concat(R,"-chekbox"));return K().createElement(Ce.Provider,{value:X},K().createElement("div",(0,v.c)({className:ne,ref:t},I),K().createElement("div",{className:ce},K().createElement("div",{className:ae,onClick:function(e){return te(e,0)}},K().createElement("span",{className:pt()(["".concat(R,"-text-omit")])},(0,V.getLangMsg)("formd.entry.key0001"))),K().createElement("div",{className:ie,onClick:function(e){return te(e,1)}},K().createElement("span",{className:pt()(["".concat(R,"-text-omit")])},(0,V.getLangMsg)("formd.entry.key0002")))),K().createElement("div",{className:le},m?K().createElement("ul",{className:ue},K().createElement("li",{className:"".concat(R,"-headbox"),style:{height:p}},K().createElement("span",null)),K().createElement("li",{style:ii({},de)},K().createElement("span",null)),K().createElement("li",{style:ii({},de)},K().createElement("span",null)),K().createElement("li",{style:ii({},de)},K().createElement("span",null))):null,o?K().createElement("ul",{className:"".concat(R,"-chekbox")},K().createElement("li",{className:"".concat(R,"-headbox"),style:{height:p}},"#"),K().createElement("li",{style:ii({},de)},"1"),K().createElement("li",{style:ii({},de)},"2"),K().createElement("li",{style:ii({},de)},"3")):null,d?K().createElement("div",{className:"".concat(R,"-empty-tips")},(0,V.getLangMsg)("formd.entry.key0003")):null,z,!D&&(null==Y?void 0:Y.length)>0&&K().createElement(oa,{fieldParent:n,title:J,fieldList:Z,entityFieldList:H})),K().createElement("div",{className:oe},U)))})),di=["style","Name","rowHeight","Direction","Wrap","Overflow","Grow","Shrink","AlignItems","AlignSelf","AlignContent","JustifyContent"];function ui(e,t){var n=D()(e);if(a()){var r=a()(e);t&&(r=j()(r).call(r,(function(t){return l()(e,t).enumerable}))),n.push.apply(n,r)}return n}function si(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?c()(n=ui(Object(a),!0)).call(n,(function(t){(0,y.c)(e,t,a[t])})):u()?f()(e,u()(a)):c()(r=ui(Object(a))).call(r,(function(t){m()(e,t,l()(a,t))}))}return e}var fi=function(e){var t=e.field,n=(0,_.useContext)(me),r=n.getKdesignerApi,a=n.getCommonUtil,i=n.getModel,l=(0,_.useContext)(pe).fixColor,o=(0,_.useContext)(V.ConfigContext),c=o.getPrefixCls,d=o.prefixCls,u=i(),s=(0,_.useContext)(Ce).titleFontSize,f=(0,_.useMemo)((function(){return r()}),[]).data,g=a().mergeCommonClassNames,m=Ot(t),p=f.getData(),A=ge(t,p),h=m.style,I=m.Name,E=m.rowHeight,x=m.Direction,k=m.Wrap,b=m.Overflow,S=m.Grow,N=m.Shrink,w=m.AlignItems,T=m.AlignSelf,F=m.AlignContent,M=m.JustifyContent,D=(0,C.c)(m,di),L=c(d,"form-designer-entry-field-contain"),P=pt()((0,y.c)((0,y.c)({},"".concat(L,"-item"),!0),"".concat(L,"-container-item"),!0)),B=pt()((0,y.c)((0,y.c)({},"".concat(L,"-cell-head"),!0),"".concat(L,"-container-cell-head"),!0)),R=function(e,t){var n=e&&e[ee],r=e&&e[Q],a=gi[r];if(void 0!==a)return a;var i=!1;if("EntryFieldContainerAp"===n||"EntryFieldAp"===n){i="EntryFieldContainerAp"===t.getParentControl(r)[ee]}return gi[r]=i,i}(t,f),G=pt()((0,y.c)((0,y.c)({},"".concat(L,"-container-content"),!R),"".concat(L,"-container-child-content"),R),g({Direction:x,Wrap:k,Overflow:b,Grow:S,Shrink:N,AlignItems:w,AlignSelf:T,AlignContent:F,JustifyContent:M})),O=3*Yn()(E),z=l(u.getPropertyValue(t.Id,fe)),j={height:O&&!isNaN(O)?O+"px":void 0},U=si(si({},h),{},{maxWidth:110});return R||delete U.height,R?K().createElement("div",(0,v.c)({style:si(si({},h),{},{maxWidth:110})},D,{className:pt()((0,y.c)({},D.className,D.className),G)}),A):K().createElement("div",(0,v.c)({style:U},D,{className:pt()((0,y.c)({},D.className,D.className),P)}),K().createElement("div",{className:B,style:{fontSize:s,background:z}},I),K().createElement("div",{className:G,style:j},A))},gi={};var mi=["className","onTwiceClick"];function pi(e,t){var n=D()(e);if(a()){var r=a()(e);t&&(r=j()(r).call(r,(function(t){return l()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ci(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?c()(n=pi(Object(a),!0)).call(n,(function(t){(0,y.c)(e,t,a[t])})):u()?f()(e,u()(a)):c()(r=pi(Object(a))).call(r,(function(t){m()(e,t,l()(a,t))}))}return e}var vi=["CheckBoxField","PictureField"],yi=["IntegerField","DecimalField","BigIntField","QtyField","AmountField"],Ai=function(e){var t,n,r=e.field,a=e.rootWidth,i=e.isMb,l=void 0!==i&&i,o=r.Id,c=r._Type_,d=r.FieldId,u=r.Name,s=r.ListFieldId,f=r.Key,g=Ot(r),m=(g.className,g.onTwiceClick),p=(0,C.c)(g,mi),y=p.style,A=void 0===y?{}:y,h=(0,_.useContext)(me),I=h.getModel,E=h.getCommonUtil,x=h.prefixCls,k=(0,_.useContext)(pe).fixColor,b=(0,_.useContext)(Ce),S=b.titleFontSize,N=b.autoRowHeight,T=b.rowHeight,F=b.headHeight,M=E(),D=M.getTitleProps,L=M.getControlProps,P=I(),B=(t=o,function(e){return P.getPropertyValue(t,e)}),R=(n=d,function(e){return P.getEntityPropertyValue(n,e)}),G=k(B("BackColor")),O=R("MustInput"),z=B("Hidden"),j=B("CtlTips"),V=k(B(fe)),U=B("TextAlign"),W=pt()([$n(x)("entry-field"),{"item-mb":l}]),H=A.width;if(H&&-1!==Pe()(H).call(H,"%")&&(A.width=a*jn()(H)*.01+"px"),z)return null;var q=u||f||o,Z=D(r,ne,q),Y=L(r,m),Q={};return!N&&(Q={height:T}),"default"===U&&(w()(vi).call(vi,c)?U="center":w()(yi).call(yi,c)&&(U="right")),K().createElement("div",(0,v.c)({},p,{className:W},Y),K().createElement("div",(0,v.c)({className:"cellHead",style:{height:F,fontSize:S,background:V}},Z),K().createElement("div",{style:{width:"100%",textAlign:U}},O?K().createElement("span",{className:"mustinput"},"*"):null,"fseq"===s?"#":q,j?K().createElement("i",{className:"kdfont kdfont-tishixinxi design-tips"}):null)),K().createElement("div",{className:"cellContent",style:Ci(Ci({},Q),{},{backgroundColor:G})}),K().createElement("div",{className:"cellContent",style:Ci(Ci({},Q),{},{backgroundColor:G})}),K().createElement("div",{className:"cellContent",style:Ci(Ci({},Q),{},{backgroundColor:G})}))},hi=["className","onTwiceClick"],Ii=function(e){var t=e.field,n=t.Id,r=t.Name,a=(0,_.useContext)(me),i=a.getKdesignerApi,l=a.getCommonUtil,o=a.prefixCls,c=a.getModel,d=(0,_.useContext)(pe).fixColor,u=(0,_.useMemo)((function(){return i()}),[]).data.getData(),s=(0,_.useContext)(Ce).titleFontSize,f=Ot(t),g=f.className,m=f.onTwiceClick,p=(0,C.c)(f,hi),y=ge(t,u),A=l(),h=A.getTitleProps,I=A.getControlProps,E=pt()([g,$n(o)("entry-field-group")]),x=r||n,k=h(t,ne,x),b=I(t,m),S=c(),N=S.getPropertyValue(n,"GroupCollapsible"),w=S.getPropertyValue(n,"GroupDefaultCollapse"),T=S.getPropertyValue(n,"CtlTips"),F=pt()("kdfont kdfont-tishixinxi","design-tips"),M=d(S.getPropertyValue(n,fe));return K().createElement("div",(0,v.c)({className:E},p,b),K().createElement("div",(0,v.c)({className:"group-name"},k,{style:{fontSize:s,background:M}}),x,T?K().createElement("i",{className:F}):null,N&&(w?K().createElement("i",{className:"kdfont kdfont-xiayiyue"}):K().createElement("i",{className:"kdfont kdfont-shangyiyue"}))),K().createElement("div",{className:"group-content"},y))},Ei=["field","showInGridView"],xi=["className","Grow","Shrink","AlignSelf"];var ki=function(e){var t=e.field,n=e.showInGridView,r=(0,C.c)(e,Ei),a=t._Type_,i=t.Name,l=t.Id,o=(0,_.useContext)(me),c=o.getCommonUtil,d=o.prefixCls,u=c().mergeCommonClassNames,s=Ot(t),f=s.className,g=s.Grow,m=s.Shrink,p=s.AlignSelf,y=(0,C.c)(s,xi),A=i||l,h=pt()([$n(d)("list-column"),{"show-in-grid":n}]),I=pt()({"show-in-grid-title":n}),E=pt()(h,f,u({Grow:g,Shrink:m,AlignSelf:p}));return"RadioGroupField"===a?null:K().createElement("div",(0,v.c)({className:E},y,r),K().createElement("span",{className:I},A))},bi=["className","Grow","Shrink","AlignSelf"],Si=function(e){var t=e.field,n=(0,_.useContext)(me),r=n.getCommonUtil,a=n.prefixCls,i=r().mergeCommonClassNames,l=Ot(t),o=l.className,c=void 0===o?"":o,d=l.Grow,u=l.Shrink,s=l.AlignSelf,f=(0,C.c)(l,bi),g=f.style,m=void 0===g?{}:g,p=pt()([$n(a)("card-selector"),c,i({Grow:d,Shrink:u,AlignSelf:s})]),y=pt()({kdfont:!0,"kdfont-fuxuankuangxuanzhong_fang":!0,"theme-fc":!0}),A=m.fontSize?{fontSize:m.fontSize}:{};return K().createElement("div",(0,v.c)({className:p},f),K().createElement("span",{className:y,style:A}))},Ni=function(e){var t,n,r=e.field,a=(0,_.useContext)(pe),i=a.fixColor,l=a.getKdesignerApi,o=a.getData,c=Ot(r,{fixColor:i,kdesignerApi:l()}),d=(0,V.useGetFieldProperty)(r,l()),u=(0,(0,_.useContext)(me).getBaseControlByType)("SplitContainer"),s=(0,_.useRef)({top:3,right:1,bottom:2,left:0}),f=d("Grow"),g=d("Shrink"),m=0===jn()(d("SplitStyle")||0),p=d("SplitPosition")||"50%";if(-1!==Pe()(p).call(p,"%")){var C=jn()(p.replace("%","")),y=s.current;C>=100?(t=m?y.bottom:y.right,n=!0):C<=0&&(t=m?y.top:y.left,n=!0)}var A=d("MinHeight")||65,h=d("MinWidth")||300,I=o(),E=c.style,x=ge(r,I),k=_t(E,x),b=!!window.localStorage.getItem("kd_auxiliary_line"),S=(0,v.c)(E,{border:b?"1px dashed burlywood":"1px dashed transparent",minWidth:50,flexGrow:1});return S.height||(S.height=100),K().createElement(u,(0,v.c)({auxiliaryLine:b,isDesign:!0,minHeight:A,minWidth:h,isHorizon:m,splitPercent:p,hiddenDir:t,hiddenState:n,Grow:f,Shrink:g,field:r},c,{style:k}),K().Children.toArray(x))},wi=(0,_.forwardRef)((function(e,t){var n=e.field,r=e.Grow,a=e.Shrink,i=e.style,l=void 0===i?{}:i,o=(0,_.useContext)(pe),c=o.fixColor,d=o.getKdesignerApi,u=o.getData,s=Ot(n,{fixColor:c,kdesignerApi:d()}),f=(0,V.useGetFieldProperty)(n,d()),g=(0,(0,_.useContext)(me).getBaseControlByType)("SplitPanel"),m=f("Grow")||r,p=f("Shrink")||a,C=f("Direction"),y=f("Wrap"),A=f("Overflow"),h=f("AlignSelf"),I=f("AlignContent"),E=f("AlignItems"),x=f("JustifyContent"),k=u(),b=s.style,S=ge(n,k),N=_t((0,v.c)({},b,l),S);return K().createElement(g,(0,v.c)({Direction:C,Wrap:y,Overflow:A,Grow:m,Shrink:p,AlignSelf:h,AlignContent:I,AlignItems:E,JustifyContent:x,field:n},s,{style:N,ref:t}),K().Children.toArray(S))})),Ti=wi,Fi=function(e){var t,n,r=e.field,a=(0,_.useContext)(pe),i=a.fixColor,l=a.getKdesignerApi,o=a.mergeCommonClassNames,c=a.prefixCls,d=l(),u=Ot(r,{fixColor:i,kdesignerApi:d}),s=u.style,f=u.className,g=$n(Xn(c,"card-entry-view")),m=(0,V.useGetFieldProperty)(r,d),p=O()(t=["Direction","Wrap","Grow","Shrink","AlignSelf","AlignItems","AlignContent","JustifyContent"]).call(t,(function(e,t){return e[t]=m(t),e}),{}),C=m("LayoutStyle"),A=(0,v.c)({},s);1===C?n=pt()((0,y.c)((0,y.c)((0,y.c)({},g("list-card-view"),!0),g("underline"),!0),f,f)):(A.overflow="auto",n=pt()((0,y.c)((0,y.c)({},g("list-card-view"),!0),f,f),o(p)));var h=d.data.getData(),I=ge(r,h),E=_t(A,I);return K().createElement("div",(0,v.c)({className:n,style:E},u),K().Children.toArray(I))},Mi=function(e){var t=e.field,n=(0,_.useContext)(pe),r=n.fixColor,a=n.getKdesignerApi,i=n.prefixCls,l=Ot(t,{fixColor:r,kdesignerApi:a()}),o=(0,(0,_.useContext)(me).getBaseControlByType)("CardRowPanel"),c=l.className,d=l.style,u=$n(Xn(i,"card-entry-fix-row")),s=a().data.getData(),f=ge(t,s),g=_t(d,f);return K().createElement(o,(0,v.c)({},l,{isDesigner:!0,className:pt()(c,u("designer-card-row")),style:g}),f)},Di="FilterGridViewAp",Li="SchemeFilterViewAp",Pi=function(e){var t,n,r,a,i,l=e.field,o=(0,_.useContext)(pe),c=o.fixColor,d=o.getKdesignerApi,u=o.mergeCommonClassNames,s=o.prefixCls,f=d(),g=Ot(l,{fixColor:c,kdesignerApi:f}),m=(0,_.useContext)(me).getBaseControlByType,p=m("QpTabs"),C=m("QpTabPanel"),A=(0,V.useGetFieldProperty)(l,f),h=O()(t=["Direction","Wrap","Overflow","Grow","Shrink"]).call(t,(function(e,t){return e[t]=A(t),e}),{}),I=$n(Xn(s,"filter")),E=g.className,x=pt()((0,y.c)((0,y.c)({},I("query-panel"),!0),E,E),u(h)),k=function(e,t){var n=f.data.getSubControls(t.Id),r=j()(n).call(n,(function(t){return t._Type_===e}));return r.length>0?r[0]:null},b=function(e){var t=k(e,l);return null!=t?Xi(t):null},S=function(e){return function(){f.selection.setSelect(e)}};return K().createElement("div",(0,v.c)({},g,{className:x}),K().createElement("div",{className:I("bar")},K().createElement("div",{className:pt()("tip","title")},(0,V.getLangMsg)("formd.filterContainer.key0003")),K().createElement("div",{className:"selected-condition"}),b("FastSearchGridViewAp")),K().createElement("div",{className:pt()(I("query-condition"))},(n=k(Di,l),r=k(Li,l),a=n&&n.Id||"",i=r&&r.Id||"",K().createElement(p,{activeKey:0},K().createElement(C,{key:0,title:(0,V.getLangMsg)("formd.filterContainer.key0001"),onTitileClickCallBack:S(a)},b(Di)),K().createElement(C,{key:1,title:(0,V.getLangMsg)("formd.filterContainer.key0002"),onTitileClickCallBack:S(i)},b(Li))))))},Bi=function(e){var t,n=e.field,r=(0,_.useContext)(pe),a=r.fixColor,i=r.getKdesignerApi,l=r.mergeCommonClassNames,o=r.prefixCls,c=r.getData,d=i(),u=Ot(n,{fixColor:a,kdesignerApi:d}),s=(0,V.useGetFieldProperty)(n,d),f=O()(t=["Direction","Wrap","Overflow","Grow","Shrink"]).call(t,(function(e,t){return e[t]=s(t),e}),{}),g=$n(Xn(o,"filter")),m=u.className,p=u.style,C=pt()((0,y.c)((0,y.c)({},g("entryroot"),!0),m,m),l(f)),A=c(),h=ge(n,A),I=_t(p,h);return K().createElement("div",(0,v.c)({},u,{className:C,style:I}),K().createElement("div",{className:g("head-container")},h))},Ri=function(e){var t=e.field,n=(0,_.useContext)(pe),r=n.fixColor,a=n.getKdesignerApi,i=n.prefixCls,l=a(),o=Ot(t,{fixColor:r,kdesignerApi:l}),c=t.Id===l.selection.getActiveSelectedId(),d=(0,_.useRef)(c);d.current=c;var u=(0,_.useCallback)((function(){t.Id,l.selection.getActiveSelectedId();return d.current,!0}),[t.Id]);(0,V.useSelectionChangeForceUpdateEffect)(l,u);var s=t.Name||t.Id,f=o.className,g=$n(Xn(i,"filter-column")),m=pt()((0,y.c)((0,y.c)((0,y.c)((0,y.c)({},g("item"),!0),$n(Xn(i,"common"))("selected"),c),g("selected"),c),"className",f));return K().createElement("div",(0,v.c)({},o,{className:m}),s)},Gi=[{fieldName:"(",fieldCaption:"("},{fieldName:"((",fieldCaption:"(("},{fieldName:"(((",fieldCaption:"((("}],Oi=[{fieldName:")",fieldCaption:")"},{fieldName:"))",fieldCaption:"))"},{fieldName:")))",fieldCaption:")))"}];Gi=(0,Un.fromJS)(Gi),Oi=(0,Un.fromJS)(Oi);var zi=function(e){var t=e.field,n=(0,_.useContext)(pe),r=n.fixColor,a=n.getKdesignerApi,i=n.mergeCommonClassNames,l=n.prefixCls,o=Ot(t,{fixColor:r,kdesignerApi:a()}),c=(0,_.useContext)(me),d=c.getBaseControlByType,u=(0,c.getCommonUtil)(),s=u.getMapConfig,f=u.getSysParam,g=u.getLangMsg,m=u.createNewId,p=u.addResizeObserve,C=(0,_.useRef)(s()).current,A=(0,_.useRef)(m());"amap"===C.mapService&&C.securityKey&&(window._AMapSecurityConfig={securityJsCode:C.securityKey});var h=(0,V.useGetFieldProperty)(t,a()),I=h("Grow"),E=h("Shrink"),x={position:"relative",display:"flex",height:"100px"},k={pointerEvents:"none"},b={position:"absolute",marginLeft:0,marginTop:0,width:"100%",height:"100%",background:"#000",filter:"alpha(opacity=0)",opacity:0},S=o.className,N=o.style,w=pt()((0,y.c)({},S,S),i({Grow:I,Shrink:E}));if((f()||{}).productType===ln&&("default"===(null==C?void 0:C.mapService)||""===(null==C?void 0:C.mapService))){var T=$n(Xn(l,"MapControlAp"));return K().createElement("div",(0,v.c)({},o,{className:pt()(w,[T("mapContainer")]),style:(0,v.c)({},x,N)}),K().createElement("div",{style:b}),K().createElement(ji,{getLangMsg:g,addResizeObserve:p}))}if("baidumap"===(null==C?void 0:C.mapService)||"default"===(null==C?void 0:C.mapService)){var F=d("MapBase"),M=C.mapKey,D=C.apiKey;return K().createElement("div",(0,v.c)({},o,{className:w,style:(0,v.c)({},x,N)}),K().createElement("div",{style:b}),K().createElement(F,{showSearchBox:!1,style:k,mapKey:M,apiKey:D}))}var L=d("AMap");return K().createElement("div",(0,v.c)({},o,{className:w,style:(0,v.c)({},x,N)}),K().createElement("div",{style:b}),K().createElement(L,{showSearchBox:!1,style:k,mapKey:C.mapKey,id:A.current}))},ji=function(e){var t=e.addResizeObserve,n=e.getLangMsg,r=(0,_.useContext)(pe).prefixCls,a=(0,_.useRef)(null);(0,_.useEffect)((function(){var e=t(a.current.parentNode,(function(e){var t=e.width,n=e.height;if(t>=200&&n>=150){var r,i,l=.4*(n-123),o=.6*(n-123);a.current.style.cssText+=E()(r=E()(i=";align-items: flex-end;background: url(".concat("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTY4cHgiIGhlaWdodD0iOTZweCIgdmlld0JveD0iMCAwIDE2OCA5NiIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4KICAgIDx0aXRsZT7lnLDlm748L3RpdGxlPgogICAgPGRlZnM+CiAgICAgICAgPHJlY3QgaWQ9InBhdGgtMSIgeD0iMCIgeT0iMCIgd2lkdGg9IjE2OCIgaGVpZ2h0PSI5NiI+PC9yZWN0PgogICAgPC9kZWZzPgogICAgPGcgaWQ9IuWcsOWbvue7hOS7tiIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9IuWcsOWbvue7hOS7ti0t5byA5Y+R6KeE6IyDIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTA2MiwgLTM1OCkiPgogICAgICAgICAgICA8ZyBpZD0i57yW57uELTMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDk0NiwgMzI3KSI+CiAgICAgICAgICAgICAgICA8ZyBpZD0i57yW57uELTQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEwMiwgMzEpIj4KICAgICAgICAgICAgICAgICAgICA8ZyBpZD0i5Zyw5Zu+IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNCwgMCkiPgogICAgICAgICAgICAgICAgICAgICAgICA8bWFzayBpZD0ibWFzay0yIiBmaWxsPSJ3aGl0ZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dXNlIHhsaW5rOmhyZWY9IiNwYXRoLTEiPjwvdXNlPgogICAgICAgICAgICAgICAgICAgICAgICA8L21hc2s+CiAgICAgICAgICAgICAgICAgICAgICAgIDx1c2UgaWQ9IuefqeW9oiIgZmlsbC1vcGFjaXR5PSIwIiBmaWxsPSIjRkZGRkZGIiB4bGluazpocmVmPSIjcGF0aC0xIj48L3VzZT4KICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9IuW7uuetkSIgbWFzaz0idXJsKCNtYXNrLTIpIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDQyLCAxMikiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMiwyNi40IEwzMCwzMCBMMzAsNzIgTDEyLDY4LjM5OTQxMTcgTDEyLDI2LjQgWiBNMCwyNCBMNiwyNS4yIEw2LDY3LjE5NyBMMi40MTE2NTE1OSw2Ni40ODIzMzAzIEMxLjAwOTM3OSw2Ni4yMDE4NzU4IDAsNjQuOTcwNjMxNCAwLDYzLjU0MDU4ODMgTDAsMjQgWiBNMCwwLjY1OTQxMTcwOCBDMy4xOTc1NTU5NiwwLjY1OTQxMTcwOCAzLjM5NDYyODg1LDAuNjc4OTI1NzcgMy41ODgzNDg0MSwwLjcxNzY2OTY4MSBMMzAsNiBMMzAsMjQgTDAsMTggTDAsMy42NTk0MTE3MSBDMCwyLjAwMjU1NzQ2IDEuMzQzMTQ1NzUsMC42NTk0MTE3MDggMCwwLjY1OTQxMTcwOCBaIE04NCw2OC4yNjAxNTE4IEM4NCw2OS45MTcwMDYxIDgyLjY1Njg1NDIsNzEuMjYwMTUxOCA4MSw3MS4yNjAxNTE4IEM4MC43ODExMTMsNzEuMjYwMTUxOCA4MC41NjI4ODMzLDcxLjIzNjE5NjMgODAuMzQ5MjA4Niw3MS4xODg3MTMgTDU3LDY2IEw1NywyNCBMODQsMzAgTDg0LDY4LjI2MDE1MTggWiBNNTcsMCBMODEuNjUwNzkxNCw1LjQ3Nzk1MzY0IEM4My4wMjM0MDQsNS43ODI5Nzg2OCA4NCw3LjAwMDQxODg3IDg0LDguNDA2NTE0ODIgTDg0LDI0IEw1NywxOCBMNTcsMCBaIiBpZD0i5b2i54q2IiBmaWxsLW9wYWNpdHk9IjAuMiIgZmlsbD0iIzcwODZBRSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik01NywyNCBMNTcsNjYgTDMwLDcyIEwzMCwzMCBMNTcsMjQgWiBNNDUsMi42NjcgTDQ1LDIwLjY2NyBMMzAsMjQgTDMwLDYgTDQ1LDIuNjY3IFogTTU3LDAgTDU3LDE4IEw1MSwxOS4zMzIgTDUxLDEuMzM1IEw1NywwIFoiIGlkPSLlvaLnirYiIGZpbGw9IiM3RDhCQTUiIG9wYWNpdHk9IjAuMyI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwb2x5Z29uIGlkPSLot6/lvoQiIGZpbGw9IiM3RDhCQTUiIG9wYWNpdHk9IjAuNCIgcG9pbnRzPSI1MSAxLjMzNSA1MSAxOS4zMzIgNTcgMTggODQgMjQgODQgMzAgNTcgMjQgMzAgMzAgMTIgMjYuNCAxMiA2OC40IDYgNjcuMTk3IDYgMjUuMiAwIDI0IDAgMTggMzAgMjQgNDUgMjAuNjY3IDQ1IDIuNjY3Ij48L3BvbHlnb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9IumUgSIgbWFzaz0idXJsKCNtYXNrLTIpIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDc0LjQsIDQwLjgpIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZyBpZD0i57yW57uELTIiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IGlkPSLnn6nlvaIiIHg9IjAiIHk9IjAiIHdpZHRoPSI1Mi44IiBoZWlnaHQ9IjUyLjgiPjwvcmVjdD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGVsbGlwc2UgaWQ9IuakreWchuW9oiIgZmlsbC1vcGFjaXR5PSIwLjIiIGZpbGw9IiNGRjVGMUYiIGN4PSIyNi40IiBjeT0iNDQuNTUiIHJ4PSI5LjkiIHJ5PSIzLjMiPjwvZWxsaXBzZT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMzguMDY3MjYxOSw5Ljc4MjczODExIEM0NC4zOTM3NTU0LDE2LjEwOTIzMTYgNDQuNTA4NzgyNiwyNi4yOTUwMzU2IDM4LjQxMjM0MzQsMzIuNzYxODY3NyBMMzguMDY3MjYxOSwzMy4xMTcyNjE5IEwyNy41OTUxNTc0LDQ0LjExOTM1NjEgQzI2Ljk2Njg4NjgsNDQuNzc5NDIzMyAyNS45MjI0ODI2LDQ0LjgwNTE5OTUgMjUuMjYyNDE1NCw0NC4xNzY5Mjg5IEwxNC43MzI3MzgxLDMzLjExNzI2MTkgTDE0LjMzODQwMDEsMzIuNzA5MzkzMSBDMTEuMzc5NDY2NywyOS41NDM1NDMzIDkuOSwyNS40OTY3NzE2IDkuOSwyMS40NSBDOS45LDE3LjIyNzI4MTggMTEuNTEwOTEyNywxMy4wMDQ1NjM1IDE0LjczMjczODEsOS43ODI3MzgxMSBDMjEuMTc2Mzg4OSwzLjMzOTA4NzMgMzEuNjIzNjExMSwzLjMzOTA4NzMgMzguMDY3MjYxOSw5Ljc4MjczODExIFogTTI2LjQsMTYuNSBDMjMuNjY2MTkwNSwxNi41IDIxLjQ1LDE4LjcxNjE5MDUgMjEuNDUsMjEuNDUgQzIxLjQ1LDI0LjE4MzgwOTUgMjMuNjY2MTkwNSwyNi40IDI2LjQsMjYuNCBDMjkuMTMzODA5NSwyNi40IDMxLjM1LDI0LjE4MzgwOTUgMzEuMzUsMjEuNDUgQzMxLjM1LDE4LjcxNjE5MDUgMjkuMTMzODA5NSwxNi41IDI2LjQsMTYuNSBaIiBpZD0i5b2i54q257uT5ZCIIiBmaWxsPSIjRkY1RjFGIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGNpcmNsZSBpZD0i5qSt5ZyG5b2iIiBmaWxsLW9wYWNpdHk9IjAuNSIgZmlsbD0iI0ZGRkZGRiIgY3g9IjI2LjQiIGN5PSIyMS40NSIgcj0iNC45NSI+PC9jaXJjbGU+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==",") no-repeat center ")).call(i,l,"px;padding-bottom: ")).call(r,o,"px;")}else a.current.style.cssText=""}));return function(){e.removeResizeObserve()}}),[]);var i=$n(Xn(r,"MapControlAp"));return K().createElement("div",{className:pt()(i("NoSecrectKey-Wrap")),ref:a},K().createElement("span",{className:pt()(i("NoSecrectKey-Content")),title:n("MapBase.key0014")},n("MapBase.key0014")))};var _i=function(e){var t,n,r,a=e.field,i=(0,_.useContext)(pe),l=i.fixColor,o=i.getKdesignerApi,c=Ot(a,{fixColor:l,kdesignerApi:o()}),d=(0,(0,_.useContext)(me).getBaseControlByType)("AnchorControl"),u=(0,V.useGetFieldProperty)(a,o()),s=(t=(0,V.getLangMsg)("formd.anchor.key0001"),n=(0,V.getLangMsg)("formd.anchor.key0002"),r={items:[{target:"id1",caption:"".concat(t,"1"),items:[]},{target:"id2",caption:"".concat(t,"2"),items:[]},{target:"id3",caption:"".concat(t,"3"),items:[{target:"id4",caption:"".concat(n,"1"),items:[]},{target:"id5",caption:"".concat(n,"2"),items:[]},{target:"id6",caption:"".concat(n,"3"),items:[]}]},{target:"id7",caption:"".concat(t,"4"),items:[]},{target:"id8",caption:"".concat(t,"5"),items:[]}]},(0,Un.fromJS)(r)).get("items"),f=u("Id"),g=jn()(u("AnchorDirection")),m=c.style||{};return m.position=1!==g?"absolute":"",K().createElement(d,(0,v.c)({field:a},c,{pageId:"page_id_"+f,items:s,style:m,direction:g}))},Ki=function(e){var t=e.field,n=(0,_.useContext)(pe),r=n.fixColor,a=n.getKdesignerApi,i=n.mergeCommonClassNames,l=Ot(t,{fixColor:r,kdesignerApi:a()}),o=(0,(0,_.useContext)(me).getBaseControlByType)("Audio"),c=(0,V.useGetFieldProperty)(t,a()),d=c("Grow"),u=c("Shrink"),s=c("AlignSelf"),f=l.className,g=l.style,m=pt()((0,y.c)({},f,f),i({Grow:d,Shrink:u,AlignSelf:s})),p={pointerEvents:"none",width:g.width};return K().createElement("div",(0,v.c)({},l,{className:m}),K().createElement(o,{field:t,src:"",style:p}))};var Vi,Ui=function(e){var t=e.field,n=(0,_.useContext)(pe),r=n.fixColor,a=n.getKdesignerApi,i=n.mergeCommonClassNames,l=Ot(t,{fixColor:r,kdesignerApi:a()}),o=(0,(0,_.useContext)(me).getBaseControlByType)("LittleK"),c=(0,V.useGetFieldProperty)(t,a()),d=c("Grow"),u=c("Shrink"),s=c("LittleKStatus"),f=l.className,g=l.style,m=pt()((0,y.c)({},f,f),i({Grow:d,Shrink:u}));return K().createElement("div",(0,v.c)({},l,{className:m}),K().createElement(o,{style:g,status:s}))},Wi=function(e){var t,n=e.field,r=(0,_.useContext)(pe),a=r.fixColor,i=r.getKdesignerApi,l=r.mergeCommonClassNames,o=r.prefixCls,c=i(),d=Ot(n,{fixColor:a,kdesignerApi:c}),u=(0,V.useGetFieldProperty)(n,c),s=n.Id===c.selection.getActiveSelectedId(),f=(0,_.useRef)(s);f.current=s;var g=(0,_.useCallback)((function(){n.Id,c.selection.getActiveSelectedId();return f.current,!0}),[n.Id]);(0,V.useSelectionChangeForceUpdateEffect)(c,g);var m=O()(t=["Direction","Grow","Shrink","AlignSelf","AlignItems","AlignContent","JustifyContent"]).call(t,(function(e,t){return e[t]=u(t),e}),{}),p=d.className,C=d.style,A=$n(Xn(o,"MessageCarouselContainer")),h=pt()((0,y.c)((0,y.c)((0,y.c)({},p,p),A("carouselFieldAp"),!0),$n(Xn(o,"common"))("selected"),s),l(m)),I=u("ShowDots"),E=u("DotDirection"),x=pt()((0,y.c)((0,y.c)((0,y.c)((0,y.c)({},A("dotsContainer"),!0),A("dotsInLeft"),"left"===E),A("dotsInRight"),"right"===E),A("dotsInTop"),"top"===E)),k=c.data.getData(),b=ge(n,k),S=_t(C,b);return K().createElement("div",(0,v.c)({},d,{style:S,className:h}),b,I&&K().createElement("ul",{className:x},Mr()({length:4},(function(e,t){var n=pt()((0,y.c)({},A("dot"),!0));return K().createElement("li",{key:t,className:n})}))))},Hi=function(e){var t,n=e.field,r=(0,_.useContext)(pe),a=r.fixColor,i=r.getKdesignerApi,l=r.mergeCommonClassNames,o=r.prefixCls,c=i(),d=Ot(n,{fixColor:a,kdesignerApi:c}),u=(0,V.useGetFieldProperty)(n,c),s=n.Id===c.selection.getActiveSelectedId(),f=(0,_.useRef)(s);f.current=s;var g=(0,_.useCallback)((function(){n.Id,c.selection.getActiveSelectedId();return f.current,!0}),[n.Id]);(0,V.useSelectionChangeForceUpdateEffect)(c,g);var m=O()(t=["Direction","Wrap","Grow","Shrink","Overflow","AlignSelf","AlignContent","AlignItems","JustifyContent","Name"]).call(t,(function(e,t){return e[t]=u(t),e}),{}),p=d.className,C=d.style,A=$n(Xn(o,"MessageCarouselFlexPanel")),h=pt()((0,y.c)((0,y.c)((0,y.c)({},p,p),A("carouselItemAp"),!0),$n(Xn(o,"common"))("selected"),s),l(m)),I=c.data.getData(),E=ge(n,I),x=_t(C,E);return K().createElement("div",(0,v.c)({},d,{className:h,style:x}),E)},qi=[],Zi=function(e){var t,n=e.field,r=(0,_.useContext)(pe),a=r.fixColor,i=r.getKdesignerApi,l=r.mergeCommonClassNames,o=r.prefixCls,c=(0,_.useContext)(me),d=c.getBaseControlByType,u=(0,c.getCommonUtil)(),s=u.getToolbarItems,f=u.getWordCount,g=(0,V.useGetFieldProperty)(n,i()),m=g("Grow"),p=g("Shrink"),C=g("AlignSelf"),A=g("RichTextEditorStyle"),h=g("toolbarItems")||(null===(t=g("ToolbarItems"))||void 0===t?void 0:t.toolbarItems),I=s(h,qi,A),E=$n(Xn(o,"rich-editor")),x=Ot(n,{fixColor:a,kdesignerApi:i()}),k=x.className,b=x.onClick,S=x.style,N=pt()((0,y.c)((0,y.c)({},E("container"),!0),k,k),l({Grow:m,Shrink:p,AlignSelf:C})),w=(0,v.c)({},{fontSize:null==S?void 0:S.fontSize}),T=f(h,!1),F=d("TinymceEditor");return K().createElement("div",(0,v.c)({},x,{className:N}),K().createElement(F,{field:n,className:k,style:w,disabled:!0,content:"",Grow:m,Shrink:p,AlignSelf:C,onClick:b,isDesigner:!0,toolbarItems:I,wordCount:T}),K().createElement("div",{className:E("mask"),onClick:b}))},Yi={RootPanel:jt,FlexPanelAp:Qt,CardEntryFlexPanelAp:Qt,CardEntryFixRowPanelAp:Qt,CardFlexPanelAp:Qt,GridFlatPanelAp:Qt,ButtonAp:Xt,UndefinedControl:En,FieldAp:yn,CardEntryFieldAp:yn,AttachmentPanelAp:Sn,HyperlinkAp:Nn,BillListAp:Pa,ListGridViewAp:Ha,ListCardViewAp:Za,CardRowPanelAp:Qa,F7SelectedListAp:Ja,EntryFieldAp:Ai,FlatFieldAp:yn,ListColumnAp:Ai,EntryAp:oi,CardEntryAp:Pa,SubCardEntryAp:Pa,CardEntryViewAp:Fi,CardEntryFixRowAp:Mi,CardEntryRowAp:Mi,DecimalListColumnAp:Ai,ComboListColumnAp:Ai,MulComboListColumnAp:Ai,DateListColumnAp:Ai,TimeListColumnAp:Ai,DynamicTextListColumnAp:Ai,FlexListColumnAp:Ai,PictureListColumnAp:Ai,OperationColumnAp:Ai,ListOperationColumnAp:Ai,CheckBoxListColumnAp:Ai,CascaderListColumnAp:Ai,DateTimeListColumnAp:Ai,AmountListColumnAp:Ai,BigIntListColumnAp:Ai,IntegerListColumnAp:Ai,PriceListColumnAp:Ai,QtyListColumnAp:Ai,StepperListColumnAp:Ai,EntryFieldGroupAp:Ii,EntryFieldContainerAp:fi,MergeListColumnAp:Ii,ListColumnGroupAp:Ii,DataGridAp:oi,TextDataGridColumnAp:Ai,IntegerDataGridColumnAp:Ai,DecimalDataGridColumnAp:Ai,DateDataGridColumnAp:Ai,TimeDataGridColumnAp:Ai,AmountDataGridColumnAp:Ai,PictureDataGridColumnAp:Ai,OperationDataGridColumnAp:Ai,CardListColumnAp:ki,CardDecimalListColumnAp:ki,CardComboListColumnAp:ki,CardMulComboListColumnAp:ki,CardDateListColumnAp:ki,CardCheckBoxListColumnAp:ki,CardTimeListColumnAp:ki,CardFlexListColumnAp:ki,CardDateTimeListColumnAp:ki,CardAmountListColumnAp:ki,CardBigIntListColumnAp:ki,CardIntegerListColumnAp:ki,CardPriceListColumnAp:ki,CardQtyListColumnAp:ki,CardStepperListColumnAp:ki,CardSelectorAp:Si,ImageAp:Tn,ImageListAp:Fn,BarChartAp:Mn,CustomChartAp:Dn,GaugeChartAp:Ln,HistogramChartAp:Pn,PieChartAp:Bn,PointLineChartAp:Rn,RadarChartAp:Gn,LabelAp:On,QRCodeAp:_n,ProgressBarAp:Kn,CarouselFigureAp:Vn,TransferContainerAp:Wn,RateAp:Qn,TimelineAp:Hn,VectorAp:qn,TreeMenuAp:Jn,TreeViewAp:er,ToolbarAp:ir,BarItemAp:or,AdvConAp:sr,AdvConSummaryPanelAp:gr,AdvConToolbarAp:pr,AdvConBarItemAp:Cr,AdvConChildPanelAp:yr,FloatMenuAp:Ir,FloatMenuPanelAp:Er,FloatMenuItemAp:kr,TabAp:Tr,TabPageAp:Nr,WizardAp:Br,HomePageTabAp:Gr,IFrameAp:_r,ClientAjaxAp:Vr,HtmlAp:qr,TaskNoticeAp:Qr,FieldsetPanelAp:sa,SplitContainerAp:Ni,SplitPanelAp:Ti,FieldgroupPanelAp:Qt,EmbedFormAp:function(e){var t=e.field,n=K().createElement(Ma,{field:t}),r=Ot(t),a=r.style,i=(0,C.c)(r,Na);return Zt(n,[],{field:t,style:a,controlProps:Fa(Fa({},i),{},{baseControlCollapsible:!1})})},FilterContainerAp:Pi,FastSearchGridViewAp:Bi,FilterColumnAp:Ri,FilterGridViewAp:Bi,SchemeFilterViewAp:Bi,FilterGridAp:function(e){var t,n,r,a=e.field,i=(0,_.useContext)(pe),l=i.fixColor,o=i.getKdesignerApi,c=Ot(a,{fixColor:l,kdesignerApi:o()}),d=(0,(0,_.useContext)(me).getBaseControlByType)("CommonFilterGrid"),u=(t=[{id:"67",name:{zh_CN:(0,V.getLangMsg)("formd.filterGrid.key0004")}},{id:"17",name:{zh_CN:(0,V.getLangMsg)("formd.filterGrid.key0005")}},{id:"34",name:{zh_CN:(0,V.getLangMsg)("formd.filterGrid.key0006")}},{id:"60",name:{zh_CN:(0,V.getLangMsg)("formd.filterGrid.key0007")}},{id:"211",name:{zh_CN:(0,V.getLangMsg)("formd.filterGrid.key0008")}},{id:"83",name:{zh_CN:(0,V.getLangMsg)("formd.filterGrid.key0009")}},{id:"72",name:{zh_CN:(0,V.getLangMsg)("formd.filterGrid.key0010")}},{id:"42",name:{zh_CN:(0,V.getLangMsg)("formd.filterGrid.key0011")}},{id:"44",name:{zh_CN:(0,V.getLangMsg)("formd.filterGrid.key0012")}},{id:"56",name:{zh_CN:(0,V.getLangMsg)("formd.filterGrid.key0013")}},{id:"100",name:{zh_CN:(0,V.getLangMsg)("formd.filterGrid.key0014")}},{id:"52",name:{zh_CN:(0,V.getLangMsg)("formd.filterGrid.key0015")}}],n={conditions:[{fieldName:"textfield1",fieldCaption:(0,V.getLangMsg)("formd.filterGrid.key0003"),compareTypes:t,type:"text"},{fieldName:"combofield",fieldCaption:(0,V.getLangMsg)("formd.filterGrid.key0016"),compareTypes:t,type:"enum",items:[{name:{zh_CN:"".concat((0,V.getLangMsg)("formd.filterGrid.key0017"),"1")},value:"1"},{name:{zh_CN:"".concat((0,V.getLangMsg)("formd.filterGrid.key0017"),"2")},value:"2"}]}]},(0,Un.fromJS)(n)).get("conditions"),s=(r={add:[{leftBracket:"(",fieldName:"textfield1",value:(0,V.getLangMsg)("formd.filterGrid.key0003"),compareType:"17",rightBracket:")",logic:"0"},{leftBracket:"(",fieldName:"combofield",value:"2",compareType:"60",rightBracket:")",logic:"0"}]},(0,Un.fromJS)(r)).get("add"),f=(0,V.useGetFieldProperty)(a,o())("showTitle")||!0,g=function(){var e=[{fieldName:"0",fieldCaption:(0,V.getLangMsg)("formd.filterGrid.key0001")},{fieldName:"1",fieldCaption:(0,V.getLangMsg)("formd.filterGrid.key0002")}];return(0,Un.fromJS)(e)}();return K().createElement("div",c,K().createElement(d,{conditions:u,added:s,left:Gi,right:Oi,showTitle:f,logic:g}))},SearchAp:function(e){var t=e.field,n=(0,_.useContext)(pe),r=n.fixColor,a=n.getKdesignerApi,i=n.mergeCommonClassNames,l=Ot(t,{fixColor:r,kdesignerApi:a()}),o=(0,(0,_.useContext)(me).getBaseControlByType)("SearchBox"),c=(0,V.useGetFieldProperty)(t,a()),d=c("Key"),u=c("Grow"),s=c("Shrink"),f=c("ShowModel"),g=c("SearchEmptyText"),m=l.className,p=pt()((0,y.c)({},m,m),i({Grow:u,Shrink:s}));return K().createElement(o,(0,v.c)({field:t},l,{id:d,className:p,placeholder:g,showModel:f}))},MapControlAp:zi,AnchorControlAp:_i,AudioAp:Ki,CountDownAp:function(e){var t=e.field,n=(0,_.useContext)(pe),r=n.fixColor,a=n.getKdesignerApi,i=n.mergeCommonClassNames,l=Ot(t,{fixColor:r,kdesignerApi:a()}),o=(0,(0,_.useContext)(me).getBaseControlByType)("Countdown"),c=(0,V.useGetFieldProperty)(t,a()),d=c("Grow"),u=c("Shrink"),s=c("CountDownMask"),f=l.className,g=pt()((0,y.c)({},f,f),i({Grow:d,Shrink:u}));return K().createElement("div",(0,v.c)({},l,{className:g}),K().createElement(o,{mask:s,time:{hour:"01",minute:"00",second:"00"},duration:60}))},GridContainerAp:function(e){var t=e.field,n=(0,_.useContext)(pe),r=n.fixColor,a=n.getKdesignerApi,i=Ot(t,{fixColor:r,kdesignerApi:a()}),l=(0,(0,_.useContext)(me).getBaseControlByType)("GridContainerAp"),o=(0,V.useGetFieldProperty)(t,a());return K().createElement(l,(0,v.c)({field:t},i,{getPropertyValue:o,updatePropValue:function(e,t,n){a().data.batchUpdateControlPropertyValues((0,V.createUpdateAction)([[e,(0,y.c)({},t,n)]]))}}))},ListboxAp:function(e){var t,n=e.field,r=(0,_.useContext)(pe),a=r.fixColor,i=r.getKdesignerApi,l=r.mergeCommonClassNames,o=Ot(n,{fixColor:a,kdesignerApi:i()}),c=(0,(0,_.useContext)(me).getBaseControlByType)("Listbox"),d=(0,V.useGetFieldProperty)(n,i()),u=d("Grow"),s=d("Shrink"),f=d("ListboxDiraction")||"v",g=o.className,m=pt()((0,y.c)({},g,g),l({Grow:u,Shrink:s}));return K().createElement(c,(0,v.c)({items:(t=[{id:"aaa",content:(0,V.getLangMsg)("formd.listbox.key0001")},{id:"bbb",content:(0,V.getLangMsg)("formd.listbox.key0002")},{id:"ccc",content:(0,V.getLangMsg)("formd.listbox.key0003")}],(0,Un.fromJS)(t)),diraction:f},o,{className:m}))},LittleKAp:Ui,MarkdownAp:function(e){var t=e.field,n=(0,_.useContext)(pe),r=n.fixColor,a=n.getKdesignerApi,i=n.mergeCommonClassNames,l=Ot(t,{fixColor:r,kdesignerApi:a()}),o=(0,(0,_.useContext)(me).getBaseControlByType)("Markdown"),c=(0,V.useGetFieldProperty)(t,a()),d=c("Grow"),u=c("Shrink"),s=l.className,f=pt()((0,y.c)({},s,s),i({Grow:d,Shrink:u}));return K().createElement(o,(0,v.c)({content:"Markdown"},l,{className:f,field:t}))},MessageCarouselContainerAp:Wi,MessageCarouselFlexPanelAp:Hi,QingAnalysisCardAp:function(e){var t=e.field,n=(0,_.useContext)(pe),r=n.fixColor,a=n.getKdesignerApi,i=Ot(t,{fixColor:r,kdesignerApi:a()}),l=(0,(0,_.useContext)(me).getBaseControlByType)("QingAnalysisCardAp"),o=(0,V.useGetFieldProperty)(t,a());return K().createElement(l,(0,v.c)({field:t},i,{getPropertyValue:o}))},VideoAp:function(e){var t=e.field,n=(0,_.useContext)(pe),r=n.fixColor,a=n.getKdesignerApi,i=n.mergeCommonClassNames,l=Ot(t,{fixColor:r,kdesignerApi:a()}),o=(0,(0,_.useContext)(me).getBaseControlByType)("Video"),c=(0,V.useGetFieldProperty)(t,a()),d=c("Grow"),u=c("Shrink"),s=c("AlignSelf"),f=l.className,g=pt()((0,y.c)({},f,f),i({Grow:d,Shrink:u,AlignSelf:s}));return K().createElement("div",(0,v.c)({},l,{className:g}),K().createElement(o,{field:t,src:"",style:{pointerEvents:"none",width:"100%",height:"100%"}}))},NameCombinePanelAp:sa,NameSegFieldAp:yn,CodeEditAp:function(e){var t=e.field,n=(0,_.useContext)(pe),r=n.fixColor,a=n.getKdesignerApi,i=Ot(t,{fixColor:r,kdesignerApi:a()}),l=(0,(0,_.useContext)(me).getBaseControlByType)("CodeEditAp"),o=(0,V.useGetFieldProperty)(t,a());return K().createElement(l,(0,v.c)({field:t},i,{getPropertyValue:o}))},RichTextEditorAp:Zi,CodeEditorAp:function(e){var t=e.field,n=(0,_.useContext)(pe),r=n.fixColor,a=n.getKdesignerApi,i=Ot(t,{fixColor:r,kdesignerApi:a()}),l=(0,(0,_.useContext)(me).getBaseControlByType)("CodeEditAp"),o=(0,V.useGetFieldProperty)(t,a());return K().createElement(l,(0,v.c)({field:t},i,{getPropertyValue:o}))}},Qi=O()(Vi=D()(Yi)).call(Vi,(function(e,t){return e[t]=K().memo(Yi[t],(function(e,t){var n=t._IsContainer,r=t.field,a=void 0===r?{}:r,i=t.isDataWithMetaMode;if(n||"RadioField"===a.FieldType||"FieldAp"===a._Type_&&i)return!1;var l=e.field,o=e.layoutOption,c=t.field,d=t.layoutOption;return(!o||!d||o===d)&&l===c})),e}),{}),Ji=Qi,Xi=function(e){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).isPC;var t,n=e.ParentId,r=K().useContext(me),a=r.getKdesignerApi,i=r.isDataWithMetaMode,l=a(),o=l.data,c=l.meta,d=o.getRealControlType(e),u=null===(t=c.getControlMeta(d))||void 0===t?void 0:t.IsContainer,s={field:e,key:e[Q],_IsContainer:u,isDataWithMetaMode:i};if(!n)return K().createElement(Ji.RootPanel,s);var f=function(e){return Qi[e]}(d);if(f)return K().createElement(f,s);var g=o.getSubControls(e[Q]);return(null==g?void 0:g.length)>0?K().createElement(Ji.FlexPanelAp,s):K().createElement(Ji.UndefinedControl,s)},$i=function(e){var t=e.value,n=e.oldValue;c()(n).call(n,(function(e){var t,n=document.querySelectorAll(E()(t="[".concat(he,'="')).call(t,e,'"]'));c()(n).call(n,(function(e){return null==e?void 0:e.removeAttribute(Ie)}))})),c()(t).call(t,(function(e){var t,n=document.querySelectorAll(E()(t="[".concat(he,'="')).call(t,e,'"]'));c()(n).call(n,(function(e){null==e||e.setAttribute(Ie,"true"),e.scrollIntoViewIfNeeded?e.scrollIntoViewIfNeeded():e.scrollIntoView({block:"center"})}))}))},el={0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,TAB:9,ENTER:13,SHIFT:16,CTRL:17,CONTROL:17,ALT:18,ESC:27,ESCAPE:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,ARROWLEFT:37,UP:38,ARROWUP:38,RIGHT:39,ARROWRIGHT:39,DOWN:40,ARROWDOWN:40,DELETE:46,META:91,"*":106,"+":107,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"]":221},tl="formdesigner.CopyContent",nl=function(e){window.sessionStorage.setItem(tl,yt()(e))},rl=function(){var e=window.sessionStorage.getItem(tl);return e&&(e=JSON.parse(e)),e},al=function(){window.sessionStorage.removeItem(tl)},il=function(){var e=(0,_.useContext)(me).getKdesignerApi,t=(0,_.useMemo)((function(){return e()}),[]).selection.getSelection;return{setCopyContent:nl,getCopyContent:rl,setDatasetCutControl:function(){var e=t();c()(e).call(e,(function(e){var t,n=document.querySelectorAll(E()(t="[".concat(he,'="')).call(t,e,'"]'));c()(n).call(n,(function(e){e.setAttribute(xe,"true")}))}))},removeDatasetCutControl:function(){var e=document.querySelectorAll("[".concat(xe,"]"));return e.length&&c()(e).call(e,(function(e){e.removeAttribute(xe)})),e.length},clearCopyContent:al}},ll=n(55640),ol=n.n(ll),cl=["_Type_"],dl=["Id","_Type_","Key","Name","ParentId","Index","FieldType","FieldId","EntryId","CardEntryId"],ul=function(e){return e.selection.getActiveSelectedId()},sl=function(e){var t=ul(e);return e.data.findControl(t)},fl=function(e,t,n){var r,a,i,l=n?n():sl(t),o=e.json,c=o.formMeta,d=o.excludeProp,u=void 0===d?dl:d,s=l._Type_;return(0,v.c)({},O()(r=D()(l)).call(r,(function(e,n){var r=t.meta.getControlMetaProperty(s,n);return(0,Qe.isEmpty)(r)||"biz"!==r.TabGroup&&r.TabGroup||(e[n]=l[n]),e}),{}),c,O()(a=(0,H.c)(new(P())(E()(i=[]).call(i,(0,H.c)(u),dl)))).call(a,(function(e,t){return ol()(l,t)&&(e[t]=l[t]),e}),{}))},gl=function(e,t,n){var r,a=n.meta.getDefaultData(e._Type_);return(0,v.c)(e,O()(r=D()(t)).call(r,(function(t,n){return ol()(e,n)||(t[n]=a[n]),t}),{}))},ml="showGptDialog",pl="openEmbedForm";function Cl(e,t){var n=D()(e);if(a()){var r=a()(e);t&&(r=j()(r).call(r,(function(t){return l()(e,t).enumerable}))),n.push.apply(n,r)}return n}var vl=function(e,t){var n=(0,_.useContext)(me),r=n.getKdesignerApi,a=n.invokeSaveAction,i=n.isDataWithMetaMode,o=n.clientParams,d=n.invokeAction,s=n.getModel,g=(0,_.useMemo)((function(){return r()}),[]),p=g.data,v=g.selection,A=g.meta,I=p.getRootId(),x=v.getSelection,k=v.setSelect,b=v.getActiveSelectedId,N=(0,_.useContext)(V.GlobalConfigContext).showMessage,T=il(),F=T.setCopyContent,M=T.getCopyContent,L=T.setDatasetCutControl,P=T.removeDatasetCutControl,B=T.clearCopyContent;(0,_.useEffect)((function(){var n=e.current;if(n){var r,T=document.querySelector(E()(r="[".concat(he,'="')).call(r,I,'"]')),R=function(e){var n=x(),r=b(),R=p.getNextSelectedControlId(r),G=p.getParentControlId(R),z=e.keyCode;switch(z){case el.DELETE:n.length>0&&(c()(n).call(n,(function(e){I!==e?p.deleteControl((0,V.createDeleteAction)(e)).then((function(){var e=p.findControl(R)||p.findControl(G),t=(null==e?void 0:e.Id)||I;k([t])})):N((0,V.getLangMsg)("formd.tips.key0007"))})),S()((function(){return T.focus()}),50));break;case el.ESC:var j=g.selection.getActiveSelectedId();if(j!==g.data.getRootId()){var _=g.data.findControl(j),K=g.data.findControlByCondition((function(e){return e.Id===_.ParentId}));k(K[0].Id)}break;case el.S:_e(e)&&a();break;case el.T:_e(e)&&e.altKey&&window.console.log(yt()(function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:dl,r=(e._Type_,(0,C.c)(e,cl));return{formMeta:O()(t=D()(r)).call(t,(function(e,t){return w()(n).call(n,t)||(e[t]=r[t]),e}),{}),excludeProp:n}}(g.data.findControl(g.selection.getActiveSelectedId())),void 0,2));break;case el.C:if(e.ctrlKey){null==e||e.stopPropagation();var U=x(),W=O()(U).call(U,(function(e,t){var n,r=p.findControl(t),a=function(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?c()(n=Cl(Object(a),!0)).call(n,(function(t){(0,y.c)(e,t,a[t])})):u()?f()(e,u()(a)):c()(r=Cl(Object(a))).call(r,(function(t){m()(e,t,l()(a,t))}))}return e}({},r),i=A.getControlMeta((null==r?void 0:r.FieldType)||r[ee]).Inside;return r.FieldId&&(a.FieldId=""),i?e:E()(n=[]).call(n,(0,H.c)(e),[a])}),[]);F(W)}break;case el.V:if(e.ctrlKey&&e.altKey){var q=M();if(1===(null==q?void 0:q.length)){var Z=q[0][Q],Y=x();rt(p)(Z,Y)}}else if(e.ctrlKey){var J=M();if(qe()(J)){var X=P()>0,$=p.getData();if(X){var te=O()(J).call(J,(function(e,t){var n;return E()(n=[t[Q]]).call(n,(0,H.c)(e))}),[]);return void p.swapControl((0,V.createSwapAction)({origin:te,target:r})).then((function(e){v.setSelect([te[0]]),B()}))}var ne=p.findControl(r),re=ne.FieldType,ae=ne[ee],ie=r,le=A.getControlMeta(re||ae).IsContainer;le||(ie=p.getParentControlId(r));var oe=O()(J).call(J,(function(e,t){var n;return E()(n=[]).call(n,(0,H.c)(e),[et($,t,ie,i)])}),[]),ce=p.findControlIndex(r);if(le){var de=p.getSubControls(r),ue=de.length;ue>0&&(ce=p.findControlIndex(de[ue-1][Q]))}p.addControl((0,V.createPasteAction)(oe[0],{index:ce+1})).then((function(e){var t,n=(null==e||null===(t=e[0])||void 0===t||null===(t=t.value)||void 0===t?void 0:t[0][Q])||r;k(n)}))}}break;case el.X:if(e.ctrlKey){null==e||e.stopPropagation();var se=x(),fe=O()(se).call(se,(function(e,t){var n;return E()(n=[]).call(n,(0,H.c)(p.getAllSubControls(t)),(0,H.c)(e))}),[]);F(fe),L()}break;case el.Z:var ge=p.canUndo();e.ctrlKey&&ge&&p.undo();break;case el.Y:var me=p.canRedo();e.ctrlKey&&me&&p.undo();break;case el.LEFT:case el.RIGHT:case el.UP:case el.DOWN:if(t){if(z===el.LEFT||z===el.UP){var pe=p.getPrevSibling(r).control;if(pe)return void k(pe[Q]);var Ce=p.getParentControl(r);if(Ce)return void k(Ce[Q])}else{var ve,ye,Ae=null===(ve=p.getSubControls(r))||void 0===ve?void 0:ve[0];if(Ae)return void k(Ae[Q]);var he=p.getNextSibling(r).control;if(he)return void k(he[Q]);var Ie=p.getParentControl(r);if(!Ie)return;for(var Ee=Ie[Q],xe=p.getNextSibling(Ie[Q]).control;!xe&&r!==I&&Ee!==I;){var ke,be;xe=(Ee=null===(be=Ie=p.getParentControl(null===(ke=Ie)||void 0===ke?void 0:ke[Q]))||void 0===be?void 0:be[Q])&&p.getNextSibling(Ee).control}var Se=null===(ye=xe)||void 0===ye?void 0:ye[Q];if(Se!==I)return void k(Se)}return}if(e.shiftKey){var Ne,we=z===el.LEFT||z===el.RIGHT?"Width":"Height",Te=z===el.LEFT||z===el.DOWN?-1:1,Fe=null===(Ne=p.findControl(r))||void 0===Ne?void 0:Ne[we],Me=(0,Qe.endsWith)(Fe,"%")?"%":"";if(Me=(0,Qe.endsWith)(Fe,"px")?"px":Me,!(Me=(0,Qe.endsWith)(Fe,"mm")?"mm":Me))return;Fe=((Fe=Yn()(Fe)+Te)<0?0:Fe)+Me,p.batchUpdateControlPropertyValues((0,V.createUpdateAction)([[r,(0,y.c)({},we,Fe)]]))}else if(e.ctrlKey){var De=z===el.LEFT||z===el.UP?"forward":"back";p.moveControl(r,De),S()((function(){return T.focus()}),50)}else{var Le=z===el.LEFT||z===el.UP?p.getPrevSibling(r):p.getNextSibling(r),Pe=Le&&Le.control;Pe&&k([Pe[Q]])}break;case el.K:if(e.ctrlKey&&o.enableGpt){e.preventDefault(),e.stopPropagation();var Be=s(),Re=h()(n).call(n,(function(e){return{entitymeta:Be.getFieldInfo(e,"entitymeta"),formmeta:Be.getFieldInfo(e,"formmeta")}}));d(ml,[{selectionControls:Re,activeControlId:r}])}}};return n.addEventListener("keydown",R),function(){n.removeEventListener("keydown",R)}}}),[])},yl=function(e){var t=(0,_.useContext)(me).getKdesignerApi,n=(0,_.useMemo)((function(){return t()}),[]).selection,r=e.Id,a=n.setSelect;(0,_.useEffect)((function(){a([r])}),[])},Al={},hl={},Il=function(e,t){t?hl=e.getBoundingClientRect():Al=e.getBoundingClientRect()},El=function(e){return e?hl:Al},xl=function(e){var t=El(e).width;return!!(t&&564-t>12)},kl=W.Dropdown.Menu,bl=W.Dropdown.Item,Sl=Re(),Nl="kd_auxiliary_line",wl=function(){var e,t,n,r,a,i,l=(0,_.useContext)(me),o=l.getKdesignerApi,d=l.getCommonUtil,u=l.isDataWithMetaMode,s=(0,_.useContext)(pe).isListMeta,f=(0,_.useMemo)((function(){return o()}),[]),g=f.data,m=f.selection,p=f.meta,C=(0,_.useContext)(V.ConfigContext),v=C.getPrefixCls,A=C.prefixCls,I=((0,_.useContext)(V.GlobalConfigContext).showMessage,il()),x=I.setCopyContent,k=I.getCopyContent,b=I.setDatasetCutControl,S=I.removeDatasetCutControl,N=I.clearCopyContent,T=(0,_.useState)(!1),F=(0,q.c)(T,2),M=F[0],D=F[1],L=(0,_.useState)(!1),P=(0,q.c)(L,2),B=P[0],R=P[1],G=(0,_.useState)(!1),z=(0,q.c)(G,2),U=z[0],Z=z[1],Y=(0,_.useState)(""),J=(0,q.c)(Y,2),X=J[0],$=J[1],te=(0,_.useState)(""),ne=(0,q.c)(te,2),ae=ne[0],ie=ne[1],le=(0,_.useState)("#212121"),oe=(0,q.c)(le,2),ce=oe[0],de=oe[1],ue=(0,_.useState)("#ffffff"),se=(0,q.c)(ue,2),fe=se[0],ge=se[1],Ce=(0,_.useState)(xl(s)),ve=(0,q.c)(Ce,2),ye=ve[0],Ae=ve[1],Ie=(0,_.useState)(!1),Ee=(0,q.c)(Ie,2),xe=Ee[0],Ne=Ee[1],we=(0,_.useState)(!1),Te=(0,q.c)(we,2),Fe=Te[0],Me=Te[1],De=(0,_.useState)(!1),Le=(0,q.c)(De,2),Pe=Le[0],Be=Le[1],Re=(0,_.useState)(0)[1],Ge=(0,_.useRef)(null),Oe=(0,_.useRef)(null),ze=(0,_.useRef)(null),je=v&&v(A,"nav-tool"),_e=m.getSelection,Ke=m.setSelect,Ve=m.getActiveSelectedId,Ue=m.addSelectChangeListener,We=g.getRootId(),He=document.querySelector(E()(e="[".concat(he,'="')).call(e,We,'"]')),Ze=g.canUndo(),Je=g.canRedo(),Xe=d().cursorBrush,$e=(0,_.useCallback)((function(){var e,t=Ve(),n=g.findControl(t),r=n.FontWeight,a=n.ForeColor,i=void 0===a?"":a,l=n.BackColor,o=void 0===l?"":l,c=n[ee],d=n.FieldType,u=p.getControlMeta(d||c).Inside,s=void 0!==u&&u;if(R("bold"===r),$(i),ie(o),w()(e=["GridFlatPanelAp","FlatFieldAp"]).call(e,c))Be(!0);else{var f=(g.getParentControl(t)||{})[ee];Be("GridFlatPanelAp"===f||s)}}),[]),tt=(0,_.useCallback)((function(e){var t=e.actions;if("UPDATE"===(null==t?void 0:t[0].type)){var n=g.findControl(Ve()),r=n.FontWeight,a=n.ForeColor,i=void 0===a?"":a,l=n.BackColor,o=void 0===l?"":l;R("bold"===r),$(i),ie(o)}}),[]);(0,_.useEffect)((function(){var e=g.findControl(Ve()),t=e.FontWeight,n=e.ForeColor,r=void 0===n?"":n,a=e.BackColor,i=void 0===a?"":a;R("bold"===t),$(r),ie(i);var l=!!window.localStorage.getItem(Nl);l&&(D(l),null==He||He.setAttribute(ke,"true")),V.eventBus.on("clear-form-status",Z);var o=Ue($e),c=g.addDataChangeListener(tt);return function(){o(),V.eventBus.off("clear-form-status",Z),c()}}),[]),(0,_.useEffect)((function(){var e=ze.current;e&&(Il(null==e?void 0:e.parentElement,s),window.onresize=(0,Qe.debounce)((function(){Il(null==e?void 0:e.parentElement,s),Ae(xl(s)),Re((function(e){return e+1}))}),100))}),[ze.current]),(0,_.useEffect)((function(){ye!==xl(s)&&Ae(xl(s))}),[ye]);var nt=(0,_.useCallback)((function(){Je&&g.redo()}),[Je]),rt=(0,_.useCallback)((function(){Ze&&g.undo()}),[Ze]),at=(0,_.useCallback)((function(){var e=_e();1===e.length&&g.moveControl(e[0],"forward")}),[]),it=(0,_.useCallback)((function(){var e=_e();1===e.length&&g.moveControl(e[0],"back")}),[]),lt=(0,_.useCallback)((function(){var e=_e();if(e.length>0){var t=Ve(),n=g.getNextSelectedControlId(t),r=g.getParentControlId(t),a=g.getRootId(),i=j()(e).call(e,(function(e){return e!==a}));g.deleteControl((0,V.createDeleteAction)(i)).then((function(){var e=g.findControl(n)||g.findControl(r);n=(null==e?void 0:e.Id)||a,Ke([n])}))}}),[]),ot=(0,_.useCallback)((function(e){null==e||e.stopPropagation();var t=_e(),n=O()(t).call(t,(function(e,t){var n;return E()(n=[]).call(n,(0,H.c)(g.getAllSubControls(t)),(0,H.c)(e))}),[]);x(n),b()}),[]),ct=(0,_.useCallback)((function(e){null==e||e.stopPropagation();var t=_e(),n=O()(t).call(t,(function(e,t){var n,r=g.findControl(t);return E()(n=[]).call(n,(0,H.c)(e),[r])}),[]);x(n)}),[]),dt=(0,_.useCallback)((function(){var e=k(),t=Ve(),n=g.getData();if(qe()(e)){if(S()>0){var r=O()(e).call(e,(function(e,t){var n;return E()(n=[t[Q]]).call(n,(0,H.c)(e))}),[]);return void g.swapControl((0,V.createSwapAction)({origin:r,target:t})).then((function(e){m.setSelect([r[0]]),N()}))}var a=g.findControl(t),i=a.FieldType,l=a[ee],o=t,c=p.getControlMeta(i||l).IsContainer;c||(o=g.getParentControlId(t));var d=O()(e).call(e,(function(e,t){var r;return E()(r=[]).call(r,(0,H.c)(e),[et(n,t,o,u)])}),[]),s=g.findControlIndex(t);if(c){var f=g.getSubControls(t),C=f.length;C>0&&(s=g.findControlIndex(f[C-1][Q]))}g.addControl((0,V.createPasteAction)(d[0],{index:s+1})).then((function(e){var n,r=(null==e||null===(n=e[0])||void 0===n||null===(n=n.value)||void 0===n?void 0:n[0][Q])||t;Ke(r)}))}}),[]),ut=(0,_.useCallback)((function(e){e.stopPropagation();var t=g.getData(),n=m.getSelection();if(n.length>1){var r=O()(n).call(n,(function(e,n){var r=g.findControl(n);return E()(e).call(e,et(t,r,r[re],u))}),[]);g.addControl((0,V.createPasteAction)(r)).then((function(){}))}else{var a=g.findControl(n[0]),i=et(t,a,a[re],u),l=g.findControlIndex(n[0])+1;g.addControl((0,V.createPasteAction)(i,{index:l})).then((function(){m.setSelect([i[0][Q]])}))}}),[]),st=(0,_.useCallback)((function(e){var t,n=document.querySelectorAll("[".concat(be,"]"));if(n.length>0&&c()(n).call(n,(function(e){e.removeAttribute(be)})),He.style.cursor||(He.style.cursor="url("+Xe+") 16 16, auto"),U||Z(!0),He.dataset.batchFormat)return He.removeAttribute(Se),He.style.cursor="",void Z(!1);e&&He.setAttribute(Se,"true");var r=Ve(),a=document.querySelector(E()(t="[".concat(he,'="')).call(t,r,'"]'));null==a||a.setAttribute(be,"true")}),[U]),ft=(0,_.useCallback)((function(){var e=!M;D(e),e?(null==He||He.setAttribute(ke,"true"),window.localStorage.setItem(Nl,"true")):(null==He||He.removeAttribute(ke),window.localStorage.removeItem(Nl))}),[M]),gt=(0,_.useCallback)((function(){var e=!B,t=_e(),n=e?"bold":"normal",r=O()(t).call(t,(function(e,t){var r;return E()(r=[]).call(r,(0,H.c)(e),[[t,{FontWeight:n}]])}),[]);g.batchUpdateControlPropertyValues((0,V.createUpdateAction)(r)),R(e)}),[B]),mt=(0,_.useCallback)((function(e,t){"ForeColor"===e?($(t),de(t)):"BackColor"===e&&(ie(t),ge(t));var n=_e(),r=O()(n).call(n,(function(n,r){var a;return E()(a=[]).call(a,(0,H.c)(n),[[r,(0,y.c)({},e,t)]])}),[]);g.batchUpdateControlPropertyValues((0,V.createUpdateAction)(r))}),[]),Ct=(0,_.useCallback)((function(e,t,n){e.stopPropagation(),"fore"===t?Ne(!n):Me(!n)}),[]),vt=pt()("".concat(je,"-operation-btn")),yt=[K().createElement("div",{title:"".concat((0,V.getLangMsg)("formd.toolbarView.key0001"),"\nDelete"),onClick:!Pe&&lt,key:"Delete",className:pt()((0,y.c)((0,y.c)({},"".concat(je,"-operation-disable"),Pe),"".concat(je,"-last-operation"),!0),vt)},K().createElement(W.Icon,{prefix:"designericon",type:"shanchu"})),K().createElement("div",{title:"".concat(M?(0,V.getLangMsg)("formd.toolbarView.key0002"):(0,V.getLangMsg)("formd.toolbarView.key0003")),onClick:ft,key:"auxiliaryLine",className:pt()((0,y.c)({},"".concat(je,"-auxiliary-checked"),M),vt)},K().createElement(W.Icon,{prefix:"designericon",type:"fuzhuxian"}),M?K().createElement(W.Icon,{prefix:"designericon",type:"fuzhuxiangouxuan"}):null),K().createElement("div",{title:B?(0,V.getLangMsg)("formd.toolbarView.key0004"):(0,V.getLangMsg)("formd.toolbarView.key0005"),onClick:gt,key:"bold",className:pt()((0,y.c)((0,y.c)({},"".concat(je,"-last-operation"),!0),"".concat(je,"-bold-status"),B),vt)},K().createElement(W.Icon,{prefix:"designericon",type:"wenzijiacu"})),K().createElement("div",{title:(0,V.getLangMsg)("formd.toolbarView.key0006"),key:"foreColor",className:pt()((0,y.c)({},"".concat(je,"-no-hover-status"),!0),vt),ref:Ge},K().createElement(V.ColorPrefixIcon,{className:"".concat(je,"-color-editor"),type:"foreColor",color:ce,onClick:function(){mt("ForeColor",ce)}}),K().createElement(W.Icon,{prefix:"designericon",type:xe?"xialajiantoufanxiang":"xialajiantou",className:"".concat(je,"-dropdown"),onClick:function(e){return Ct(e,"fore",xe)}}),K().createElement(V.ColorPicker,{triggerDom:Ge,showPanel:xe,colorValue:X,onClosePanel:function(){Ne(!1)},onChange:function(e){return mt("ForeColor",e)}})),K().createElement("div",{title:(0,V.getLangMsg)("formd.toolbarView.key0007"),key:"backColor",className:pt()((0,y.c)({},"".concat(je,"-no-hover-status"),!0),vt),ref:Oe},K().createElement(V.ColorPrefixIcon,{className:"".concat(je,"-color-editor"),type:"backColor",color:fe,onClick:function(){mt("BackColor",fe)}}),K().createElement(W.Icon,{prefix:"designericon",type:Fe?"xialajiantoufanxiang":"xialajiantou",className:"".concat(je,"-dropdown"),onClick:function(e){return Ct(e,"back",Fe)}}),K().createElement(V.ColorPicker,{triggerDom:Oe,showPanel:Fe,colorValue:ae,onClosePanel:function(){Me(!1)},onChange:function(e){return mt("BackColor",e)}}))],At=(0,_.useMemo)((function(){return{Delete:lt,auxiliaryLine:ft,bold:gt,foreColor:function(){return Ne(!0)},backColor:function(){return Me(!0)}}}),[ft,gt]),ht=[];if(ye){var It=function(e){var t=564-El(e).width,n=-1;return 4<t&&t<=36?n=3:36<t&&t<=84?n=2:84<t&&t<=120?n=1:120<t&&t<=168&&(n=0),n}(s);if(It>=0){var Et=Ye()(yt).call(yt,It);ht=K().createElement(kl,null,h()(Et).call(Et,(function(e){return K().createElement(bl,{key:e.key},e,(null==e?void 0:e.props._title)||(null==e?void 0:e.props.title))}))),ga()(yt).call(yt,It)}}return K().createElement("div",{className:je,ref:ze},K().createElement("div",{title:E()(t="".concat((0,V.getLangMsg)("formd.toolbarView.key0008"),"\n")).call(t,Sl?"+Z":"Ctrl+Z"),className:pt()((0,y.c)({},"".concat(je,"-operation-disable"),!Ze),vt),onClick:rt},K().createElement(W.Icon,{prefix:"designericon",type:"chexiao"})),K().createElement("div",{title:E()(n="".concat((0,V.getLangMsg)("formd.toolbarView.key0009"),"\n")).call(n,Sl?"+Y":"Ctrl+Y"),className:pt()((0,y.c)((0,y.c)({},"".concat(je,"-operation-disable"),!Je),"".concat(je,"-last-operation"),!0),vt),onClick:nt},K().createElement(W.Icon,{prefix:"designericon",type:"zhongzuo"})),K().createElement("div",{title:(0,V.getLangMsg)("formd.toolbarView.key0010"),onClick:at,className:vt},K().createElement(W.Icon,{prefix:"designericon",type:"qianyi"})),K().createElement("div",{title:(0,V.getLangMsg)("formd.toolbarView.key0011"),onClick:it,className:pt()((0,y.c)({},"".concat(je,"-last-operation"),!0),vt)},K().createElement(W.Icon,{prefix:"designericon",type:"houyi"})),K().createElement("div",{title:E()(r="".concat((0,V.getLangMsg)("formd.toolbarView.key0012"),"\n")).call(r,Sl?"+X":"Ctrl+X"),onClick:!Pe&&ot,className:pt()((0,y.c)({},"".concat(je,"-operation-disable"),Pe),vt)},K().createElement(W.Icon,{prefix:"designericon",type:"jianqie"})),K().createElement("div",{title:E()(a="".concat((0,V.getLangMsg)("formd.toolbarView.key0013"),"\n")).call(a,Sl?"+C":"Ctrl+C"),onClick:!Pe&&ct,className:pt()((0,y.c)({},"".concat(je,"-operation-disable"),Pe),vt)},K().createElement(W.Icon,{prefix:"designericon",type:"fuzhi"})),K().createElement("div",{title:E()(i="".concat((0,V.getLangMsg)("formd.toolbarView.key0014"),"\n")).call(i,Sl?"+V":"Ctrl+V"),onClick:dt,className:pt()((0,y.c)({},"".concat(je,"-last-operation"),!0),vt)},K().createElement(W.Icon,{prefix:"designericon",type:"zhantie"})),K().createElement("div",{title:(0,V.getLangMsg)("formd.toolbarView.key0015"),onClick:function(){return st()},onDoubleClick:function(){return st(!0)},className:pt()((0,y.c)({},"".concat(je,"-format-status"),U),vt)},K().createElement(W.Icon,{prefix:"designericon",type:"geshishua"})),K().createElement("div",{title:(0,V.getLangMsg)("formd.toolbarView.key0016"),onClick:!Pe&&ut,className:pt()((0,y.c)({},"".concat(je,"-operation-disable"),Pe),vt)},K().createElement(W.Icon,{prefix:"designericon",type:"zhongfu"})),yt,ye&&K().createElement(W.Dropdown,{menu:ht,onItemClick:function(e){return At[e]()},trigger:"click"},K().createElement("div",{className:vt},K().createElement(W.Icon,{prefix:"designericon",type:"gengduo"}))))},Tl=function(){var e=(0,_.useContext)(V.ConfigContext),t=e.getPrefixCls,n=e.prefixCls,r=t&&t(n),a="".concat(r,"-top-view-main");return K().createElement(V.ViewHeader,{content:K().createElement("div",{className:"".concat(r,"-main-view-toolbar")},K().createElement(wl,null)),portalId:a})},Fl=n(97440),Ml=n.n(Fl),Dl=n(64248),Ll=n.n(Dl),Pl=n(6908),Bl=n.n(Pl);function Rl(e){var t=e.selectedCtrlNode,n=e.callback;if(t&&!(t.style.zIndex<0)){var r=t.getBoundingClientRect();n&&n(r)}}var Gl=function(e){var t=e.selectedCtrlNode,n=e.callback,r=(0,_.useRef)(null),a=(0,_.useRef)(!1),i=(0,_.useRef)(null),l=function e(){Rl({selectedCtrlNode:t,callback:n}),a.current||(r.current=window.requestAnimationFrame(e))};(0,_.useEffect)((function(){r.current=window.requestAnimationFrame((function(){Rl({selectedCtrlNode:t,callback:n})}))}),[t]),(0,_.useEffect)((function(){var e=function(){a.current=!1,i.current&&clearTimeout(i.current),i.current=S()((function(){a.current=!0}),500),r.current=window.requestAnimationFrame(l)};return document.addEventListener("scroll",e,!0),function(){document.removeEventListener("scroll",e,!0),r.current&&window.cancelAnimationFrame(r.current)}}),[])},Ol=["getKdesignerApi"],zl=["TextField","ItemClassTypeField","TextAreaField","LargeTextField","MuliLangTextField","IntegerField","DecimalField","BigIntField","DateField","DateTimeField","DateRangeField","TimeField","TimeRangeField","ComboField","MulComboField","BillNoField","BillStatusField","BillTypeField","BasedataField","MulBasedataField","AssistantField","BasedataPropField","ItemClassField","OrgField","MaterielField","CurrencyField","CityField","UnitField","PriceField","QtyField","AmountField","GroupField","FlexField","AdminDivisionField","AttachmentCountField","PrintCountField","BaseUnitqtyField","AccountField","CustomerField","SupplierField","EmailField","TelephoneField","UserField","CreaterField","ModifierField","CreateDateField","UserAvatarField","I18nNameField","ParentBasedataField","ModifyDateField"],jl=function(e){var t=e.hoverimg,n=e.prefixCls,r=$n(n),a=(0,_.useRef)({}),i=(0,_.useRef)(null),l=(0,_.useRef)(null);return(0,_.useEffect)((function(){l.current&&(l.current.style.width="",l.current.style.height="")}),[t]),t?K().createElement("div",{className:r("hover-item"),ref:i},K().createElement("img",{src:t,ref:l,onLoad:function(e){var t=e.target,n=t.width/2,r=t.height/2;if(a.current={width:Math.max(n+48,240),height:Math.max(r+48,160)},i.current){var o=i.current.parentNode;i.current.style.width=a.current.width+"px",i.current.style.height=a.current.height+"px",o.style.width=a.current.width+"px",o.style.height=a.current.height+"px",o.style.maxWidth=a.current.width+"px",o.style.maxHeight=a.current.height+"px",o.style.padding="0"}l.current&&(Math.min(n,r)===n?l.current.style.width=n+"px":l.current.style.height=r+"px")}})):K().createElement("span",null,(0,V.getLangMsg)("formd.rightView.key0012"))},_l=(0,_.forwardRef)((function(e,t){e.hoverimg;var n=e.name,r=e.onSelect,a=e.selected,i=e.prefixCls,l=e.onMouseOutItem,o=e.onMouseOverItem,c=e.item,d=e.image,u=$n(i);return K().createElement("div",{ref:t,className:pt()(u("item"),(0,y.c)({},u("selected-item"),a)),onMouseMove:function(){return o()},onMouseOut:l,onClick:function(){return r(c)}},K().createElement("img",{src:d}),K().createElement("span",{title:n},n))})),Kl=function(e){var t=e.schema,n=e.prefixCls,r=e.onSelect,a=e.isSchemaItemSelect,i=t.items,l=(0,_.useState)(null),o=(0,q.c)(l,2),c=o[0],d=o[1],u=function(e){return r(e)},s=(0,_.useState)(!1),f=(0,q.c)(s,2),g=f[0],m=f[1],p=(0,_.useRef)(0),C=function(){return m(!1)},y=$n(n),A=(0,_.useRef)(null);return K().createElement("div",{className:y("container"),ref:A},h()(i).call(i,(function(e,t){var r=K().createElement(_l,(0,v.c)({key:e.name},e,{item:e,prefixCls:n,onSelect:u,selected:a(e),onMouseOverItem:function(){return function(e,t){var n=e.hoverimg;p.current=Math.max(0,3*(Math.ceil((t+1)/3)-1)),c!==n&&d(n),!1===g&&m(!0)}(e,t)},onMouseOutItem:C})),i=K().createElement(W.Tooltip,{popperClassName:"scheme-list-popper",visible:g,tip:K().createElement(jl,{prefixCls:n,hoverimg:c}),arrowSize:0,mouseEnterDelay:1,mouseLeaveDelay:.5,placement:"leftTop"},r);return p.current===t?i:r})))},Vl=["Inherit"],Ul=function(e){var t=e.getKdesignerApi,n=(0,C.c)(e,Ol),r=t();(0,V.useDataChangeForceUpdateEffect)(r);return K().createElement(Kl,(0,v.c)({},n,{onSelect:function(e){var t=ul(r),n=sl(r);r.data.batchUpdateControlPropertyValues((0,V.createUpdateAction)([[t,gl(fl(e,r),n,r)]]))},isSchemaItemSelect:function(e){var t,n,a=sl(r),i=fl(e,r),l=[],o=[],d=a._Type_;return c()(t=D()(i)).call(t,(function(e){!ol()(a,e)&&(0,Qe.isEqual)(r.meta.getControlPropertyDefaultValue(d,e),i[e])&&l.push(e)})),c()(n=D()(a)).call(n,(function(e){if(!ol()(i,e)){var t=r.meta.getControlMetaProperty(d,e);if((0,Qe.isEmpty)(t))return;"biz"!==t.TabGroup&&t.TabGroup||o.push(e)}})),(0,Qe.isEqual)((0,Qe.omit)(i,l),(0,Qe.omit)(a,E()(Vl).call(Vl,o)))}}))},Wl=function(){var e,t=(0,_.useContext)(me),n=t.getKdesignerApi,r=t.getCommonUtil,a=t.getDesignerModelType,i=t.prefixCls,l=n(),o=(0,_.useState)(null),c=(0,q.c)(o,2),d=c[0],u=c[1],s=r().getTemplateScheme,f=sl(l);return(0,_.useEffect)((function(){var e=sl(l),t=a(),n=s,r=e.FieldType||e._Type_;w()(zl).call(zl,r)&&(r=e._Type_),n(t,r).then((function(e){var t,n=null==e||null===(t=e[0])||void 0===t||null===(t=t.children)||void 0===t?void 0:t[0];u(n)}))}),[f.FieldType||f._Type_]),{schema:d,setSchema:u,SchemeComponent:d&&(null===(e=d.items)||void 0===e?void 0:e.length)&&K().createElement(Ul,{schema:d,getKdesignerApi:n,prefixCls:Xn(i,"schema")})}};function Hl(e,t){var n=D()(e);if(a()){var r=a()(e);t&&(r=j()(r).call(r,(function(t){return l()(e,t).enumerable}))),n.push.apply(n,r)}return n}function ql(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?c()(n=Hl(Object(a),!0)).call(n,(function(t){(0,y.c)(e,t,a[t])})):u()?f()(e,u()(a)):c()(r=Hl(Object(a))).call(r,(function(t){m()(e,t,l()(a,t))}))}return e}function Zl(e,t){var n=void 0!==Ml()&&Ll()(e)||e["@@iterator"];if(!n){if(qe()(e)||(n=function(e,t){var n;if(!e)return;if("string"==typeof e)return Yl(e,t);var r=Ye()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Mr()(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Yl(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){o=!0,i=e},f:function(){try{l||null==n.return||n.return()}finally{if(o)throw i}}}}function Yl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ql=["FieldId","EntryId","CardEntryId"],Jl=function(e){var t,n,r,a,i=e.field,l=e.addControlId,o=e.clearAddControlId,c=e.rootDom,d=e.isDataWithMetaMode,u=i.Id,s=i._Type_,f=(i.FieldType,i.FieldName,(0,_.useState)(l===u)),g=(0,q.c)(f,2),m=g[0],p=g[1],C=(0,_.useContext)(me),y=C.getKdesignerApi,A=C.getModel,I=C.designerConfig,x=(0,_.useContext)(V.GlobalConfigContext).filterProperty,b=(0,_.useMemo)((function(){return y()}),[]),N=b.meta,T=b.data,F=b.aliasData,M=T.getData(),D=N.getDefaultData(s),L=N.getControlMeta(s),P=(0,V.getModelData)(L.Properties,ql(ql({},M),{},{field:ql(ql({},D),i)}),{getModel:A}),B=Bl()(t=j()(n=function(e,t,n){var r,a=[],i=Zl(e);try{for(i.s();!(r=i.n()).done;){var l=r.value,o=l.Nodes,c=void 0===o?[]:o,d=l.Key;if(w()(t).call(t,d)){var u,s=Zl(c);try{for(s.s();!(u=s.n()).done;){var f=u.value;!1!==f.Visible&&n(f)&&a.push(f)}}catch(e){s.e(e)}finally{s.f()}}}}catch(e){i.e(e)}finally{i.f()}return a}(P,["BasicSetting"],(function(e){return!d||!w()(Ql).call(Ql,e.Id)}))).call(n,(function(e){return!x(i,e)}))).call(t,(function(e,t){return e.GroupSubSeq-t.GroupSubSeq}));if("2"===M.devType){var R,G=I.enableGlobalControl,O=void 0!==G&&G,z=M.Items,U=M.extElements,H=void 0===U?[]:U,Z=(null===(R=k()(H).call(H,(function(e){return"Field"===e.Type})))||void 0===R?void 0:R.Items)||[];Z=h()(Z).call(Z,(function(e){var t,n;return e.Id===(null===(t=z[0])||void 0===t?void 0:t.PkId)?ql(ql({},e),{},{Id:null===(n=z[0])||void 0===n?void 0:n.Id}):e}));var Y=k()(Z).call(Z,(function(e){return e.Id===u})),Q=(null==Y?void 0:Y.Props)||[],J=T.findControl(u)||{};B=h()(B).call(B,(function(e){var t,n=null===(t=k()(Q).call(Q,(function(t){return t.Id===e.Id})))||void 0===t?void 0:t.LockType;return void 0===n&&O&&J.Inherit&&(n=e.LockType),"lock"===n?ql(ql({},e),{},{Locked:!0}):e}))}var X,$=(0,_.useState)("1"),ee=(0,q.c)($,2),te=ee[0],ne=ee[1],re=(0,_.useMemo)((function(){return A()}),[]),ae=(X=i.FieldId||i.EntryId||i.CardEntryId,function(e){return re.getEntityPropertyValue(X,e)}),ie=k()(B).call(B,(function(e){var t;return w()(t=["EntryId","CardEntryId","FieldId"]).call(t,e.Id)})),le=i.FieldId||i.EntryId||i.CardEntryId,oe=le?ae("Name")||le:"",ce=le?ae("Key")||le:"",de=le?E()(r="".concat(oe,"(")).call(r,ce,")"):"",ue=(0,_.useRef)(null),se=(0,_.useRef)(null),fe=(0,_.useState)(0)[1],ge=Wl(),pe=ge.schema,Ce=ge.SchemeComponent;(0,_.useEffect)((function(){var e=F.addAliasDataChangeListener((function(){fe((function(e){return e+1}))}));return function(){e()}}),[]),(0,_.useEffect)((function(){var e=function(e){var t;"basic-setting"!==(null===(t=e.target)||void 0===t?void 0:t.className)&&p(!1)},t=S()((function(){document.addEventListener("scroll",e,!0)}),500);return function(){m&&(o(),p(!1)),t&&clearTimeout(t),t=null,document.removeEventListener("scroll",e,!0)}}),[]),(0,V.useOnClickOutside)([ue,se],(function(e){var t,n=document.getElementById("dialogShow");n&&null!=n&&n.contains(e.target)||"kdesigner-select-item-option-content"===(null===(t=e.target)||void 0===t?void 0:t.className)||m&&(p(!1),c.focus())}));var ve=K().createElement(K().Fragment,null,de&&K().createElement(W.Icon,{prefix:"designericon",type:"shuliang"}),de),ye=(0,_.useCallback)((function(){p(!1),c.focus()}),[c]);return K().createElement(K().Fragment,null,K().createElement(V.DropDownPanel,{scrollHidden:!0,ref:se,visible:m,placement:"bottomLeft",popperClassName:"formdesigner-quick-setting-dropdown",content:K().createElement("div",{className:"setting-panel",ref:ue},K().createElement(W.Icon,{prefix:"designericon",type:"guanbi",className:"close-btn",onClick:ye}),K().createElement(W.Tabs,{activeKey:te,onChange:function(e){ne(e)}},K().createElement(W.Tabs.TabPane,{key:"1",tab:(0,V.getLangMsg)("formd.mainview.key0001")},K().createElement("div",{className:"basic-setting"},h()(B).call(B,(function(e){return K().createElement(V.PropertyViewItem,(0,v.c)({},e,{key:e.Id,field:i,className:"kdesigner-right-view"}))})))),pe&&(null===(a=pe.items)||void 0===a?void 0:a.length)&&K().createElement(W.Tabs.TabPane,{key:"2",tab:(0,V.getLangMsg)("formd.mainview.key0002")},K().createElement("div",{className:"schema-setting"},Ce))))},K().createElement("span",{className:"operation-bar-item",onClick:function(e){e.stopPropagation(),p((function(e){return!e})),c.focus()},title:(0,V.getLangMsg)("formd.mainview.key0003")},K().createElement(W.Icon,{prefix:"designericon",type:"shezhi"}))),!d&&ie&&K().createElement("span",{className:"datasource-tips"},le?ve:(0,V.getLangMsg)("formd.mainview.key0004")))},Xl="1050",$l="-1";var eo=Re()?"+K":"Ctrl+K",to=(0,_.memo)((function(e){var t,n=e.field,r=e.rootDom,a=e.kdesignerApi,i=e.addControlId,l=e.clearAddControlId,o=e.containerDom,d=e.isDataWithMetaMode,u=n.Id,s=n._Type_,f=n.FieldType,g=n.ParentId,m=a.data,p=a.selection,C=a.meta,v=(0,_.useContext)(me),y=v.invokeAction,A=v.clientParams,I=v.getModel,x=(0,v.getCommonUtil)().memoryCacheApi,k=x.getPageData,b=x.setPageData,S=(0,_.useState)(!1),N=(0,q.c)(S,2),T=N[0],F=N[1],M=(0,_.useRef)(null),D=r.getBoundingClientRect(),L=m.getData(),P=C.getControlMeta(f||s),B=(m.findControl(g)||{})._Type_,R=P.Inside,G="GridFlatPanelAp"===B||w()(t=["GridFlatPanelAp","FlatFieldAp"]).call(t,s);(0,_.useEffect)((function(){var e=M.current;if(e){var t=function(e,t){if(t){var n=0,r=new window.IntersectionObserver((function(e){c()(e).call(e,(function(e){if(e.intersectionRatio!==n){if(e.intersectionRatio<1&&e.intersectionRatio>0){var r=e.boundingClientRect,a=e.intersectionRect;n>e.intersectionRatio&&r.top<a.top||r.bottom==a.bottom&&r.top<a.top?(t.setAttribute("data-visible","true"),t.style.zIndex=$l):(t.setAttribute("data-visible","true"),t.style.zIndex=Xl)}else e.intersectionRatio>0?(t.setAttribute("data-visible","true"),t.style.zIndex=Xl):(t.setAttribute("data-visible","false"),t.style.zIndex=$l);n=e.intersectionRatio}}))}),{threshold:[1e-6,.999999],rootMargin:"-5px 0px 0px 0px"});return r.observe(e),r}}(o,e);return function(){t.disconnect()}}}),[M.current,o]);var z=(0,_.useCallback)((function(e){var t=M.current;if(t&&r){t.getBoundingClientRect().width;var n=e.left,a=e.top,i=(e.width,D.left),l=D.top,o=(D.width,D.height),c=n<i?i:n,d=a-24-2;t.style.left="".concat(c,"px"),t.style.top="".concat(d,"px");var u=d>=l-24-2&&d<=l+o;"true"===t.dataset.visible&&(u&&t.style.zIndex===$l?t.style.zIndex=Xl:u||t.style.zIndex!==Xl||(t.style.zIndex=$l))}}),[M.current,r,D]);if(Gl({selectedCtrlNode:o,callback:z}),(0,V.useResizeObserver)(r,(function(){Rl({selectedCtrlNode:o,callback:z})})),(0,V.useResizeObserver)(o,(function(){Rl({selectedCtrlNode:o,callback:z})})),!o||"ui-designer-root"===o.getAttribute("id")||!r)return null;var j="EmbedFormAp"===s;return R?null:K().createElement("div",{ref:M,className:"operation-bar-warp"},A.enableGpt&&K().createElement("div",{className:"operation-bar-item gpt-icon",onClick:function(){var e=p.getSelection(),t=I(),n=h()(e).call(e,(function(e){return{entitymeta:t.getFieldInfo(e,"entitymeta"),formmeta:t.getFieldInfo(e,"formmeta")}}));y(ml,[{selectionControls:n,activeControlId:u}])},onMouseEnter:function(){return F(!0)},onMouseLeave:function(){return F(!1)}},K().createElement("div",{className:"gpt-rk-icon"}),T&&K().createElement("span",{className:"gpt-shortcut-key"},eo)),!G&&K().createElement("div",{className:"operation-bar-left"},j&&K().createElement("span",{className:pt()(["operation-bar-item"]),onClick:function(e){e.stopPropagation();var t=p.getActiveSelectedId(),n=m.findControl(t);if(n.ShowParam){var r=[t,"showDesign"];k(r)?b(r,!1):(y(pl,[t,"formmeta",{value:!0,item:{Id:t,_Type_:"EmbedFormAp"},form:{},context:[[n]]}]),b(r,!0))}},title:(0,V.getLangMsg)("formd.toolbarView.key0017")},K().createElement(W.Icon,{prefix:"designericon",type:"qiehuanyemianneirong"})),K().createElement("span",{className:pt()(["operation-bar-item"]),onClick:function(e){if(r.focus(),!G){e.stopPropagation();var t=p.getSelection();if(t.length>1){var a=O()(t).call(t,(function(e,t){var n=m.findControl(t);return E()(e).call(e,et(L,n,n[re],d))}),[]);m.addControl((0,V.createPasteAction)(a)).then((function(){}))}else{var i=et(L,n,n[re],d),l=m.findControlIndex(u)+1;m.addControl((0,V.createPasteAction)(i,{index:l})).then((function(){p.setSelect([i[0][Q]])}))}}},title:(0,V.getLangMsg)("formd.toolbarView.key0016")},K().createElement(W.Icon,{prefix:"designericon",type:"zhongfu"})),K().createElement("span",{className:pt()(["operation-bar-item"]),onClick:function(e){if(r.focus(),!G){e.stopPropagation();var t=m.getNextSelectedControlId(u),n=m.getParentControlId(u),a=m.getRootId();m.deleteControl((0,V.createDeleteAction)(u)).then((function(){var e=m.findControl(t)||m.findControl(n);t=(null==e?void 0:e.Id)||a,p.setSelect([t])}))}},title:(0,V.getLangMsg)("formd.toolbarView.key0001")},K().createElement(W.Icon,{prefix:"designericon",type:"shanchu"}))),K().createElement(Jl,{rootDom:r,field:n,addControlId:i,clearAddControlId:l,isDataWithMetaMode:d}))})),no=function(e){var t=(0,_.useContext)(me),n=t.getKdesignerApi,r=t.isDataWithMetaMode,a=(0,_.useMemo)((function(){return n()}),[]),i=a.data,l=a.selection,o=(a.aliasData,l.getSelection()),c=i.getRootId(),d=document.querySelector('[data-control-id="'.concat(c,'"]')),u=(0,_.useRef)("");(0,V.useSelectionChangeForceUpdateEffect)(a),(0,V.useDataChangeForceUpdateEffect)(a);var s=(0,_.useCallback)((function(e){u.current=e}),[]),f=(0,_.useCallback)((function(){u.current=""}),[]);return(0,_.useEffect)((function(){return V.eventBus.on("add-control-id",s),function(){V.eventBus.off("add-control-id",s)}}),[]),K().createElement(K().Fragment,null,h()(o).call(o,(function(e){var t;if(!e)return null;var n=i.findControl(e),l=n.Hidden,o=n.Invisible,c=n.FullLine,s=document.querySelector('[data-control-id="'.concat(e,'"]'));return l||o?null:K().createElement(to,{field:n,rootDom:d,containerDom:s,kdesignerApi:a,key:E()(t="operation-bar-item-".concat(e,"-")).call(t,c),addControlId:u.current,clearAddControlId:f,isDataWithMetaMode:r})})))},ro=n(96416),ao=n.n(ro),io=n(82504),lo=function(e){var t=e.name,n=e.id,r=e.onSelect,a=e.prefixCls,i=e.isActive,l=$n(a);return K().createElement("div",{className:pt()(l("item"),(0,y.c)({},l("active-item"),i)),onClick:function(){r({name:t,id:n})}},K().createElement("div",{className:l("item-text")},K().createElement("span",null,t)),K().createElement("div",{className:l("item-text-dumb-node")}))},oo=function(e){var t=e.items,n=e.onSelect,r=e.prefixCls,a=void 0===r?"":r,i=$n(a),l=(0,_.useState)(!1),o=(0,q.c)(l,2),c=o[0],d=o[1],u=(0,_.useState)(!1),s=(0,q.c)(u,2),f=s[0],g=s[1],m=(0,_.useRef)(null),p=(0,_.useRef)(null),C=(0,_.useCallback)((function(e,t){var n=e.offsetWidth,r=t.offsetWidth;if(r>n){var a=e.scrollLeft;a>0?a+n>=r?(g(!1),d(!0)):(g(!0),d(!0)):(d(!1),g(!0))}else d(!1),g(!1)}),[]);(0,_.useEffect)((function(){var e=new io.c((function(e){var t=(0,q.c)(e,1)[0],n=t.target.parentElement;V.console.log("resize-----"),C(n,t.target)}));return e.observe(p.current),function(){e.disconnect()}}),[]);var y=function(e){V.console.log("Scroll resize-----");var t=m.current,n=p.current;C(t,n)},A=function(e){var t=m.current.offsetWidth;m.current.scrollLeft=Math.max(0,m.current.scrollLeft+("left"===e?-t:t))},I=function(e,t){t.stopPropagation();V.console.log(t,t.deltaY,t.deltaMode);var n=.4*t.deltaY;m.current.scrollLeft=Math.max(0,m.current.scrollLeft+("left"===e?-n:n))};return(0,_.useEffect)((function(){var e=m.current,t=p.current,n=e.offsetWidth,r=t.offsetWidth;r>n&&(e.scrollLeft=r-n)}),[t]),K().createElement("div",{className:i("container-box"),onScroll:y},c&&K().createElement("div",{className:i("left-arrow"),onClick:function(){return A("left")},onWheel:function(e){return I("left",e)}},K().createElement(W.Icon,{type:"zuoqie",prefix:"designericon"})),K().createElement("div",{className:i("container"),ref:m,onScroll:y},K().createElement("div",{className:i("list"),ref:p},h()(t).call(t,(function(e,r){return K().createElement(lo,(0,v.c)({},e,{onSelect:n,prefixCls:a,key:e.id,isActive:r===t.length-1}))})))),f&&K().createElement("div",{className:i("right-arrow"),onClick:function(){return A("right")},onWheel:function(e){return I("right",e)}},K().createElement(W.Icon,{type:"youqie",prefix:"designericon"})))},co=function(){var e=(0,_.useContext)(pe),t=e.prefixCls,n=(0,e.getKdesignerApi)(),r=(0,_.useCallback)((function(){var e,t=n.selection.getActiveSelectedId(),r=n.data.getAllParentControls(t,!0);return h()(e=ao()(r).call(r)).call(e,(function(e){return{id:e.Id,name:e.Name}}))}),[]),a=(0,_.useState)(r),i=(0,q.c)(a,2),l=i[0],o=i[1];(0,_.useEffect)((function(){var e=n.selection.addSelectChangeListener((function(){var e=r();o(e)}));return function(){e()}}),[]);var c=(0,_.useCallback)((function(e){var t=e.id;n.selection.setSelect([t])}),[]);return K().createElement(oo,{items:l,onSelect:c,prefixCls:Xn(t,"breadcrumb")})},uo=(0,_.memo)((function(e,t){var n=e.data,r=void 0===n?{}:n,a=(e.meta,(0,_.useState)(r)),i=(0,q.c)(a,2),l=i[0],o=i[1],d=(0,_.useContext)(me),u=d.getKdesignerApi,s=d.prefixCls,f=d.getDataRef,g=d.invokeAction,m=d.onRootPanelMount,p=(0,_.useMemo)((function(){return u()}),[]),C=p.data,v=p.selection,y=(p.meta,(0,(0,_.useContext)(me).getCommonUtil)()),A=y.fixColor,h=y.mergeCommonClassNames,I=f(),x=I.designer,k=I.isPC,b=(0,_.useMemo)((function(){return!(!x||!w()(x).call(x,"List"))}),[x]),N=(0,_.useCallback)((function(e){var t=e.value,n=e.type;if(o(t),"Move"===n){var r=v.getSelection(),a=r[0];if(!("FieldsetPanelAp"===C.getParentControl(a)[ee]))return;S()((function(){c()(r).call(r,(function(e){var t,n;return F()(t=(0,H.c)(document.querySelectorAll(E()(n="[".concat(he,'="')).call(n,e,'"]')))).call(t,(function(e){return e.setAttribute(Ie,"true")}))}))}),100)}}),[]),T=(0,_.useCallback)((function(e){var t=e.value,n=C.findControl(t),r=Y()(n).call(n,(function(e){return"EntryAp"===e._Type_}));r&&g(ia,[]),$i(e)}),[]),M=(0,_.useMemo)((function(){return{prefixCls:"kd"}}),[]);(0,_.useEffect)((function(){var e=v.addSelectChangeListener(T),t=C.addDataChangeListener(N);return function(){e(),t()}}),[]),(0,_.useEffect)((function(){ze(k)}),[k]);var D=l[ae][0],L=Xi(D),P=at(),B=(0,_.useRef)(l);B.current=l;var R=function(){return B.current},G=(0,_.useRef)(null);vl(G),yl(D);var O=(0,_.useMemo)((function(){return{getData:R,fixColor:A,mergeCommonClassNames:h,prefixCls:s,getKdesignerApi:u,isListMeta:b,onRootPanelMount:m}}),[s,b]);return K().createElement(K().Fragment,null,K().createElement(pe.Provider,{value:O},K().createElement(Tl,null),K().createElement(W.ConfigProvider,{value:M},K().createElement("div",{className:"".concat(s,"-main-view-container"),ref:G},K().createElement("div",{className:"".concat(s,"-pc-view")},K().cloneElement(L,{key:D[Q],onClick:P}))),K().createElement(co,null)),K().createElement(no,null)))}));uo.tabKey="main-view",uo.getTabName=function(){return(0,V.getLangMsg)("formd.leftView.key0002")},uo.displayName="main-view";var so=uo,fo=function(e){e.preventDefault(),e.stopPropagation()},go=function(){var e=(0,_.useContext)(me).getKdesignerApi,t=(0,_.useMemo)((function(){return e()}),[]),n=t.data,r=t.views,a=t.selection,i=(t.meta,n.getRootId()),l=(0,_.useCallback)((function(e){!function(e,t){"outline"!==(xt=null==t?void 0:t.getViewActiveKey("left"))&&t&&t.setViewActiveKey("left")("outline"),kt=kt||xt}(0,r)}),[]),o=(0,_.useCallback)((function(e){!function(e){var t;if(!Y()(St).call(St,(function(t){return Pe()(e).call(e,t)>=0}))){var n=e.replace("/","\\/").replace("=","\\="),r=document.querySelector(".kdesigner-tree-node-item-id".concat(n," .kdesigner-tree-node-root"));if(r){var a=null==r?void 0:r.className;w()(a).call(a,Et)||(r.className=E()(t="".concat(a," ")).call(t,Et))}}}(e)}),[]),c=(0,_.useCallback)((function(e){var t;fo(e);var n=document.querySelector(E()(t="[".concat(he,"='")).call(t,i,"']"));null==n||n.removeAttribute(Fe)}),[]);(0,_.useEffect)((function(){return V.eventBus.on("drag-control-tab",l),V.eventBus.on("drag-control_".concat(i),o),document.body.addEventListener("dragend",c),function(){V.eventBus.off("drag-control-tab",l),V.eventBus.off("drag-control_".concat(i),o),document.body.removeEventListener("dragend",c)}}),[]);var d=(0,_.useCallback)((function(e){var t,r=e.event,a=e.node;r.stopPropagation();var l=a.nodeKey;l=l.substr(2);var o=document.querySelector(E()(t="[".concat(he,"='")).call(t,i,"']"));null==o||o.setAttribute(Fe,l);var c=n.findControl(l),d=c._Type_,u=c.Name;It(r,d,u)}),[]),u=(0,_.useCallback)((function(e){var t=e.event;e.node;fo(t)}),[]),s=(0,_.useCallback)((0,Qe.debounce)((function(e){var t=e.event,n=e.node;fo(t),V.eventBus.emit("drag-tree-node",n.key)}),100),[]),f=(0,_.useCallback)((function(e){var t=e.event;e.node;fo(t)}),[]),g=(0,_.useCallback)((function(e){var t,r=e.event,l=e.node;fo(r);var o=l.key,c=document.querySelector(E()(t="[".concat(he,"='")).call(t,i,"']")).dataset.outlineDragTreeNode;n.swapControl((0,V.createSwapAction)({origin:c,target:Ye()(o).call(o,2)})).then((function(e){a.setSelect([c])}))}),[]);return{onDragStart:d,onDragEnter:u,onDragOver:s,onDragLeave:f,onDrop:g,onDragEnd:(0,_.useCallback)((function(e){var t,n=e.event,r=e.node;fo(n);var a=document.querySelector(E()(t="[".concat(he,"='")).call(t,i,"']"));null==a||a.removeAttribute(Fe),V.eventBus.emit("drag-tree-node",r.key)}),[])}},mo={},po="id",Co="",vo=(0,_.memo)((0,_.forwardRef)((function(e,t){var n=e.data,r=(0,_.useContext)(V.ConfigContext),a=r.getPrefixCls,i=r.prefixCls,l=(0,_.useContext)(me).getKdesignerApi,o=(0,_.useMemo)((function(){return l()}),[]),d=o.data,u=o.selection,s=d.getRootId(),f=(0,_.useState)(!0),g=(0,q.c)(f,2),m=g[0],p=g[1],C=(0,_.useState)(!1),v=(0,q.c)(C,2),y=v[0],A=v[1],I=(0,_.useState)([s]),x=(0,q.c)(I,2),k=x[0],b=x[1],S=(0,_.useState)(600),N=(0,q.c)(S,2),T=N[0],F=N[1],M=(0,_.useState)(void 0),D=(0,q.c)(M,2),L=D[0],B=D[1],G=(0,_.useRef)(null),z=(0,_.useRef)(null),U=(0,_.useState)(n),Z=(0,q.c)(U,2),Y=Z[0],J=Z[1],$=(0,_.useRef)(null);vl(G,!0);var te=go(),ne=te.onDragStart,re=te.onDragEnter,ie=te.onDragOver,le=te.onDragLeave,oe=te.onDrop,ce=te.onDragEnd,de=a&&a(i,"outline"),ue=(0,_.useState)([]),se=(0,q.c)(ue,2),fe=se[0],ge=se[1],pe=(0,_.useMemo)((function(){var e="".concat(de,"-search-prefix-icon");return K().createElement(W.Icon,{prefix:"designericon",type:"sousuo",className:e})}),[de]),Ce=(0,_.useCallback)((function(e){var t=e.value,n=O()(t).call(t,(function(e,t){var n,r;return E()(n=[]).call(n,(0,H.c)(e),[E()(r="".concat(po)).call(r,t)])}),[]);b(n);var r=(0,H.c)(fe);c()(t).call(t,(function(e){for(var t,n=e;n!==s&&""!==n;){var a,i=E()(a="".concat(po)).call(a,n);!w()(r).call(r,i)&&r.unshift(i),n=d.getParentControlId(n)}var l=E()(t="".concat(po)).call(t,s);!w()(r).call(r,l)&&r.unshift(l)})),ge(r)}),[s,fe]),ve=(0,_.useCallback)((function(e){var t=e.value;J(t)}),[]);(0,_.useEffect)((function(){var e=u.addSelectChangeListener(Ce),t=d.addDataChangeListener(ve);return function(){e(),t()}}),[Ce]),(0,_.useEffect)((function(){var e=(0,Qe.debounce)((function(){var e=document.body.clientHeight-30-80-20;F(e),$.current&&($.current.style.height="".concat(e,"px"))}),100);return window.addEventListener("resize",e),function(){mo={},window.removeEventListener("resize",e)}}),[]),(0,_.useEffect)((function(){var e=document.body.clientHeight-30-80-20;F(e),$.current&&($.current.style.height="".concat(e,"px"))}),[$]);var ye=(0,_.useCallback)((function(e){var t;if(Co!==e){var n=(0,H.c)(fe),r=d.getParentControlId(e),a=E()(t="".concat(po)).call(t,e);for(!w()(n).call(n,a)&&n.push(a);e&&r&&r!==s;){var i;r=d.getParentControlId(r);var l=E()(i="".concat(po)).call(i,r);w()(n).call(n,l)||n.push(l)}Co=e,ge(n)}}),[fe]);(0,_.useEffect)((function(){return V.eventBus.on("drag-control_".concat(s),ye),function(){V.eventBus.off("drag-control_".concat(s),ye)}}),[ye]);var Ae=(0,_.useCallback)((function(){var e=!m;if(p(e),e)ge([]),$.current&&($.current.scrollTop=0);else{var t,n=h()(t=Y[ae]).call(t,(function(e){var t;return E()(t="".concat(po)).call(t,e[Q])}));ge(n)}}),[m,Y,$.current]),he=(0,_.useCallback)((function(){A(!y)}),[y]),Ie=(0,_.useCallback)((function(e,t){if(We(t.event)){var n,r=null===(n=e[0])||void 0===n?void 0:n.substr(2),a=u.getSelection,i=u.setSelect,l=a();if(d.isSiblings(l[0],r)){var o=l[l.length-1];if(o===r)return;var c=d.getAllSiblings(o),s=tt(c,o,r);s&&i(s)}}else{var f=h()(e).call(e,(function(e){return e.substr(2)}));u.setSelect(f)}var g=e[0],m=R()(fe).call(fe,(function(e){return g===e})),p=(0,H.c)(fe);m>=0?ga()(p).call(p,m,1):p.push(g),ge(p)}),[fe]),Ee=(0,_.useMemo)((function(){return ka(Y,y,{prefix:po})}),[Y,y]),xe=(0,_.useCallback)((function(e){var t,n,r,a,i,l=(0,H.c)((null==Ee||null===(t=Ee[0])||void 0===t?void 0:t.searchData)||[]),o=Ra()(n=e.target.value).call(n),c=h()(r=Bl()(a=h()(i=j()(l).call(l,(function(e){var t,n,r;return(null===(t=e.key)||void 0===t?void 0:w()(n=Ye()(t).call(t,2)).call(n,o))||w()(r=e.title).call(r,o)}))).call(i,(function(e){var t;return{id:null===(t=e.key)||void 0===t?void 0:Ye()(t).call(t,2),level:e.level}}))).call(a,(function(e){return e.level}))).call(r,(function(e){return e.id}));mo[o]=(0,H.c)(c),B(o)}),[Ee]),ke=(0,_.useCallback)((function(){if(!L||!mo[L])return null;var e=mo[L],t=e.length;if(t<=0)return s;var n=u.getActiveSelectedId();if(!w()(e).call(e,n))return e[0];var r=Pe()(e).call(e,n);return r===t-1?r=0:r++,e[r]}),[L]),be=(0,_.useCallback)((function(){z.current&&z.current.focus();var e=ke(),t=d.findControl(e);e&&u.setSelect([t?e:s])}),[z,ke]),Se=function(e,t){e.stopPropagation(),e.preventDefault();var n=(0,H.c)(fe),r=Pe()(n).call(n,t);r>=0?ga()(n).call(n,r,1):n.push(t),ge(n)},Ne=[function(e){return K().createElement(W.Icon,{prefix:"designericon",type:"shouqi3",onClick:function(t){return Se(t,e.nodeKey)}})},function(e){return K().createElement(W.Icon,{prefix:"designericon",type:"zhankai3",onClick:function(t){return Se(t,e.nodeKey)}})}],we=(0,_.useCallback)((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).nodeKey;if(!e)return K().createElement(W.Icon,{prefix:"designericon",type:"Flexmianban"});var t=d.findControl(Ye()(e).call(e,2))||{},n=t[ee],r=t[X],a=(t.FieldId,"");return a=r?(0,V.getControlIconMap)(r):(0,V.getControlIconMap)(n),K().createElement(W.Icon,{prefix:"designericon",type:a})}),[]),Te=(0,_.useCallback)((function(e){return e.Hidden?"kdesigner-form-designer-outline-tree-node-disabled":""}),[]);return K().createElement("div",{className:"".concat(de,"-wrap"),tabIndex:-1},K().createElement("div",{className:"".concat(de,"-search")},K().createElement(W.Input,{prefix:pe,placeholder:(0,V.getLangMsg)("formd.leftView.key0009"),borderType:"bordered",className:"".concat(de,"-search-input"),onChange:xe,onPressEnter:be,value:L,ref:z,allowClear:!0}),K().createElement(W.Icon,{prefix:"designericon",className:"".concat(de,"-search-icon"),onClick:Ae,type:m?"shouqiquanbu":"zhankaiquanbu",title:m?(0,V.getLangMsg)("formd.leftView.key0004"):(0,V.getLangMsg)("formd.leftView.key0005")}),K().createElement(W.Icon,{prefix:"designericon",className:"".concat(de,"-search-icon"),onClick:he,type:y?"zhanshi":"yincang",title:y?(0,V.getLangMsg)("formd.leftView.key0006"):(0,V.getLangMsg)("formd.leftView.key0007")})),K().createElement("div",{ref:G,tabIndex:-1},K().createElement(W.Tree,{name:"OutlineTree",treeData:Ee,height:T,width:280,onExpand:function(e,t){var n,r=t.expanded,a=t.node.key,i=j()(e).call(e,Boolean);i=r?E()(n=[a]).call(n,(0,H.c)(i)):j()(i).call(i,(function(e){return e!==a})),i=Mr()(new(P())(i)),ge(i)},expandedKeys:fe,className:de,virtual:!0,draggable:!0,icon:we,showIcon:!0,selectedKeys:k,onSelect:Ie,onDragStart:ne,onDragEnter:re,onDragOver:ie,onDragLeave:le,onDrop:oe,onDragEnd:ce,ref:$,setTreeNodeClassName:Te,switcherIcon:Ne})))})));vo.tabKey="outline",vo.getTabName=function(){return(0,V.getLangMsg)("formd.leftView.key0002")},vo.displayName="outline";var yo=vo,Ao=n(1508),ho=n.n(Ao),Io=(n(22280),["mode","columnMode"]),Eo=function(e){var t=e.children,n=e.className,r=e.width,a=e.height,i=e.alignItems,l=e.alignContent,o=e.wrap,c=e.direction,d=e.justifyContent,u=e.onClick,s=e.selected,f=e.title;return K().createElement("div",{title:f,onClick:u,className:pt()("".concat(n,"-demo-box"),(0,y.c)({},"".concat(n,"-demo-box-selected"),s)),style:{width:r,height:a,flexWrap:o?"wrap":"nowrap",flexDirection:c,alignItems:i,alignContent:l,justifyContent:d}},t)},xo=function(e){var t,n,r,a=e.height,i=e.width,l=e.className,o=e.index,c=e.mode,d=e.direction,u=e.wrap,s=e.children,f=e.alignItems,g=e.justifyContent;return K().createElement("div",{className:pt()("".concat(l,"-demo-column"),E()(t="".concat(l,"-demo-column-")).call(t,c),E()(n="".concat(l,"-demo-column-direction-")).call(n,d),(0,y.c)((0,y.c)((0,y.c)((0,y.c)((0,y.c)({},"".concat(l,"-demo-column-wrap"),!!u),"".concat(l,"-demo-column-alignItems-start"),"center"!==f&&"flex-end"!==f),"".concat(l,"-demo-column-alignItems-end"),"flex-end"===f),"".concat(l,"-demo-column-justifyContent-start"),"center"!==g&&"flex-end"!==g),"".concat(l,"-demo-column-justifyContent-end"),"flex-end"===g)),style:{minHeight:a,minWidth:i}},s,K().createElement("span",{className:E()(r="".concat(l,"-demo-column-span-")).call(r,c)},o))},ko=function(e){var t,n,r=e.mode,a=e.columnMode,i=(0,C.c)(e,Io),l=i.className,o="small"===r?16:54,c={small:[28,36,28,36,28,36],large:[72,108,72,108,72,108]},d=i.wrap,u=i.direction,s=i.alignItems,f=i.justifyContent,g=d?6:4;return K().createElement(Eo,i,h()(t=ho()(n=new Array(g)).call(n,0)).call(t,(function(e,t){var n,i,g,m,p=c[r][t],C="horizontal"===a?o:p,v="horizontal"===a?p:o,A="".concat(l,"-flex-main-axis"),h="".concat(l,"-flex-cross-axis"),I=!1;return K().createElement(xo,{width:v,height:C,index:t+1,key:t,className:l,mode:r,direction:u,wrap:!!d,alignItems:s,justifyContent:f},(0===t||4===t)&&K().createElement("div",{key:E()(n="".concat(A,"-")).call(n,t),className:pt()(A,E()(i="".concat(A,"-direction-")).call(i,u),(0,y.c)((0,y.c)((0,y.c)({},"".concat(A,"-alignItems-start"),"center"!==s&&"flex-end"!==s),"".concat(A,"-alignItems-end"),"flex-end"===s),"".concat(A,"-alignItems-center"),"center"===s),(0,y.c)((0,y.c)((0,y.c)({},"".concat(A,"-justifyContent-start"),"center"!==f&&"flex-end"!==f),"".concat(A,"-justifyContent-end"),"flex-end"===f),"".concat(A,"-justifyContent-center"),"center"===f),(0,y.c)({},"".concat(A,"-second"),4===t))}),!I&&(0===t||4===t)&&"center"===s&&"center"===f&&(I=!0,!0)&&K().createElement("div",{key:E()(g="".concat(h,"-")).call(g,t),className:pt()(h,E()(m="".concat(h,"-direction-")).call(m,u),"".concat(h,"-alignItems-center"),"".concat(A,"-justifyContent-center"))}))})))},bo=(n(71120),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.Editor&&e.Editor.Span&&(e.Editor.Span+=t)}),So=function(e,t,n){for(var r,a=0,i=t;i<n+1;i++)a+=(r=e[i])?r.Editor&&r.Editor.Span||12:0;return a},No=function(e,t,n,r,a){var i=(0,ya.Ut)(n,(function(n){c()(n).call(n,(function(n){if(!1!==n.Visible&&n.Nodes){var i,l;n.Nodes=j()(i=Bl()(l=(0,V.filterNodes)(n.Nodes,r,a)).call(l,(function(e,t){return(e.GroupSubSeq||0)-(t.GroupSubSeq||0)}))).call(i,(function(n){return!e(t,n)}));for(var o=n.Nodes.length,c=0,d=0,u=So(n.Nodes,c,d);c<o&&d<o;)if((u=So(n.Nodes,c,d))>12&&0!==d){var s=Math.max(0,12-So(n.Nodes,c,d-1));bo(n.Nodes[c],s),d=++c}else 12===u?c=++d:d++;if(u<12&&c<o){var f=Math.max(0,12-So(n.Nodes,c,d-1));bo(n.Nodes[c],f)}}}))}));return i},wo=W.Collapse.Panel,To=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=function(e){return(0,ya.Ut)(e,(function(e){c()(e).call(e,(function(e){var t;e.Nodes=j()(t=e.Nodes).call(t,(function(e){var t;return!(!r&&"layout"===e.Group)&&(!("style"!==e.TabGroup&&!w()(t=["Width","Height"]).call(t,e.Id))||void 0)}))}))}))};if(!e)return a(n);var i=e._Type_,l=e.FieldType,o=n||t.meta.getControlMetaPropertyGroups(i),d=l;if(d&&t.meta.getControlMeta(d).Properties){var u,s=t.meta.getControlMeta(d).Properties,f=a(o),g=a(s);return f=(0,V.createPropertyGroups)(E()(u=(0,Qe.flattenDeep)(h()(g).call(g,(function(e){return e.Nodes})))).call(u,(0,Qe.flattenDeep)(h()(f).call(f,(function(e){return e.Nodes})))))}return a(o)},Fo=function(e){e.className;var t,n=(0,_.useContext)(me),r=n.getKdesignerApi,a=n.prefixCls,i=n.getLayoutVisible,l=n.getBusinessVisible,o=n.isActionTabVisible,c=n.filterProperty,d=r(),u=1===d.selection.getSelection().length;(0,V.useSelectionChangeForceUpdateEffect)(d,void 0);var s=d.selection.getActiveSelectedId(),f=Wl(),g=f.schema,m=f.SchemeComponent;return K().createElement(V.PropertyView,(0,v.c)({},e,{filterPropertyHandler:function(e){var t,n=d.selection.getActiveSelectedId(),r=d.data.findControl(n),a=To(r,d,e),u=j()(t=[l(n)&&"business",(null==a?void 0:a.length)&&Y()(a).call(a,(function(e){var t;return(null===(t=e.Nodes)||void 0===t?void 0:t.length)>0}))&&"style",i(n)&&"layout",o(n)&&"action"]).call(t,Boolean);return d.views.setViewsVisibleSetting("right")(u),No(c,r,a,[],zo)},exclude:zo,solidSelectedId:s}),u&&g&&(null===(t=g.items)||void 0===t?void 0:t.length)&&K().createElement(W.Collapse,{key:"plan",name:"Collapse",className:"".concat(Xn(a,"schema"),"-collapse"),expandIconPosition:"left",defaultActiveKey:"plan"},K().createElement(wo,{header:(0,V.getLangMsg)("formd.rightView.key0001"),panelKey:"plan"},m)))};Fo.tabKey="style",Fo.getTabName=function(){return(0,V.getLangMsg)("formd.rightView.key0002")};var Mo=Fo,Do="horizontal",Lo="vertical",Po="column",Bo="row",Ro=function(e){var t=(0,_.useContext)(me).getKdesignerApi,n=e.className,r=e.id,a=e.field,i=[{columnMode:Do,childrenCount:4,direction:Po,alignItems:"flex-start",justifyContent:"flex-start",title:(0,V.getLangMsg)("formd.editor.key0002")},{columnMode:Do,childrenCount:4,direction:Po,alignItems:"center",justifyContent:"flex-start",title:(0,V.getLangMsg)("formd.editor.key0003")},{columnMode:Do,childrenCount:4,direction:Po,alignItems:"flex-start",justifyContent:"center",title:(0,V.getLangMsg)("formd.editor.key0004")},{columnMode:Do,childrenCount:4,direction:Po,alignItems:"flex-start",justifyContent:"space-between",title:(0,V.getLangMsg)("formd.editor.key0005")},{columnMode:Lo,childrenCount:4,direction:Bo,alignItems:"flex-start",justifyContent:"flex-start",title:(0,V.getLangMsg)("formd.editor.key0006")},{columnMode:Lo,childrenCount:4,direction:Bo,alignItems:"flex-start",justifyContent:"center",title:(0,V.getLangMsg)("formd.editor.key0007")},{columnMode:Lo,childrenCount:4,direction:Bo,alignItems:"flex-start",justifyContent:"space-between",title:(0,V.getLangMsg)("formd.editor.key0008")},{columnMode:Lo,childrenCount:4,direction:Bo,alignItems:"center",justifyContent:"center",title:(0,V.getLangMsg)("formd.editor.key0009")},{columnMode:Do,childrenCount:4,direction:Po,alignItems:"stretch",justifyContent:"flex-start",title:(0,V.getLangMsg)("formd.editor.key0010")},{columnMode:Do,childrenCount:4,direction:Po,alignItems:"center",justifyContent:"center",title:(0,V.getLangMsg)("formd.editor.key0011")},{columnMode:Do,childrenCount:6,direction:Po,wrap:!0,alignItems:"flex-start",justifyContent:"flex-start",alignContent:"flex-start",title:(0,V.getLangMsg)("formd.editor.key0012")},{columnMode:Lo,childrenCount:6,direction:Bo,wrap:!0,alignItems:"flex-start",justifyContent:"flex-start",alignContent:"flex-start",title:(0,V.getLangMsg)("formd.editor.key0013")}],l=t(),o=l.selection.getSelection(),c=(0,v.c)({},a.FieldType?l.meta.getControlDefaultDataByPropertyGroups(To(a,l)):l.meta.getDefaultData(a._Type_),a);return K().createElement("div",{className:"".concat(n,"-quick-layout")},h()(i).call(i,(function(e,t){var a,i={Direction:e.direction,Wrap:!!e.wrap,AlignItems:e.alignItems,AlignContent:e.alignContent,JustifyContent:e.justifyContent},d=O()(a=D()(i)).call(a,(function(e,t){return e?((0,Qe.isUndefined)(i[t])||!!(0,Qe.isEqual)(i[t],c[t]))&&e:e}),!0);return K().createElement(ko,(0,v.c)({},e,{key:t,mode:"small",onClick:function(){var e,t=O()(e=D()(i)).call(e,(function(e,t){return(0,Qe.isUndefined)(i[t])||(e[t]=i[t]),e}),{});if(o.length>1)return l.data.batchUpdateControlPropertyValues((0,V.createUpdateAction)(h()(o).call(o,(function(e){return[e,t]}))));l.data.batchUpdateControlPropertyValues((0,V.createUpdateAction)([[r,t]]))},width:80,height:80,className:n,selected:d}))})))},Go=function(e){var t=e.field,n=e.className,r=(0,(0,_.useContext)(me).getKdesignerApi)(),a=(0,v.c)({},r.meta.getDefaultData(t._Type_),t),i=O()(zo).call(zo,(function(e,t){return e[(0,Qe.lowerFirst)(t)]=a[t],e}),{});return K().createElement("div",{className:"".concat(n,"-demo-preview")},K().createElement(ko,(0,v.c)({},i,{mode:"large",columnMode:i.direction===Bo?Lo:Do,className:n,width:256,height:256,selected:!0})))},Oo=W.Collapse.Panel,zo=["Direction","Wrap","AlignContent","AlignItems","JustifyContent"],jo={row:{Direction:{row:"pailiefangshi-shuiping",column:"pailiefangshi-chuizhi"},Wrap:{false:"shifouduoxing-danxing",true:"shifouduoxing-duoxing"},AlignSelf:{},AlignContent:{center:"duoxingchuizhifangxiang-juzhong","flex-start":"chuizhi-chuizhifangxiang-qidianduiqi","flex-end":"chuizhi-chuizhifangxiang-zhongdianduiqi","space-around":"chuizhi-chuizhifangxiang-jiangexiangdeng","space-between":"duoxingchuizhifangxiang-liangduanduiqi",stretch:"duoxingchuizhifangxiang-chongman"},AlignItems:{center:"shuiping-chuizhifangxiang-juzhong","flex-start":"shuiping-chuizhifangxiang-qidianduiqi","flex-end":"shuiping-chuizhifangxiang-zhongdianduiqi",stretch:"shuiping-chuizhifangxiang-chongman",baseline:"jixianduiqi"},JustifyContent:{"flex-start":"shuiping-shuipingfangxiang-qidianduiqi","flex-end":"shuiping-shuipingfangxiang-zhongdianduiqi",center:"duolieshuipingfangxiang-juzhong","space-between":"duolieshuipingfangxiang-liangduanduiqi","space-around":"duolieshuipingfangxiang-jiangexiangdeng"}},column:{Direction:{row:"pailiefangshi-shuiping",column:"pailiefangshi-chuizhi"},Wrap:{false:"shifouduolie-danlie",true:"shifouduolie-duolie"},AlignSelf:{},AlignContent:{"flex-start":"duolieshuipingfangxiang-qidianduiqi","flex-end":"duolieshuipingfangxiang-zhongdianduiqi",center:"duolieshuipingfangxiang-juzhong","space-around":"duolieshuipingfangxiang-jiangexiangdeng","space-between":"duolieshuipingfangxiang-liangduanduiqi",stretch:"duolieshuipingfangxiang-chongman"},AlignItems:{center:"chuizhi-shuipingfangxiang-juzhong","flex-start":"chuizhi-shuipingfangxiang-qidianduiqi","flex-end":"chuizhi-shuipingfangxiang-zhongdianduiqi",stretch:"chuizhi-shuipingfangxiang-liangduanduiqi",baseline:"jixianduiqi"},JustifyContent:{"flex-start":"chuizhi-chuizhifangxiang-qidianduiqi","flex-end":"chuizhi-chuizhifangxiang-zhongdianduiqi",center:"chuizhi-chuizhifangxiang-juzhong","space-around":"chuizhi-chuizhifangxiang-jiangexiangdeng","space-between":"chuizhi-chuizhifangxiang-liangduanduiqi"}}},_o=(0,Qe.memoize)((function(e,t){if((0,Qe.isUndefined)(e)&&(0,Qe.isUndefined)(t))return{};var n={Direction:{row:(0,V.getLangMsg)("formd.rightView.key0004"),column:(0,V.getLangMsg)("formd.rightView.key0005")},Wrap:{false:(0,V.getLangMsg)("formd.rightView.key0006"),true:(0,V.getLangMsg)("formd.rightView.key0007")},AlignSelf:{},AlignContent:{"flex-start":(0,V.getLangMsg)("formd.editor.key0015"),"flex-end":(0,V.getLangMsg)("formd.editor.key0016"),center:(0,V.getLangMsg)("formd.editor.key0017"),"space-around":(0,V.getLangMsg)("formd.editor.key0018"),"space-between":(0,V.getLangMsg)("formd.editor.key0015"),stretch:(0,V.getLangMsg)("formd.editor.key0020")},AlignItems:{"flex-start":(0,V.getLangMsg)("formd.editor.key0015"),"flex-end":(0,V.getLangMsg)("formd.editor.key0016"),center:(0,V.getLangMsg)("formd.editor.key0017"),stretch:(0,V.getLangMsg)("formd.editor.key0020"),baseline:(0,V.getLangMsg)("formd.editor.key0021")},JustifyContent:{"flex-start":(0,V.getLangMsg)("formd.editor.key0015"),"flex-end":(0,V.getLangMsg)("formd.editor.key0016"),center:(0,V.getLangMsg)("formd.editor.key0017"),"space-around":(0,V.getLangMsg)("formd.editor.key0018"),"space-between":(0,V.getLangMsg)("formd.editor.key0019")}};return{Editor:["Editor",function(t){var r=t.originProp,a=t.path,i=(t.pathLength,t.inputMeta),l=pa(i,Ye()(a).call(a,0,-1));if(l&&w()(zo).call(zo,l.Id)){var o=(0,ya.cp)(r,(function(t){var r;if(t.Type="Tab","Wrap"===l.Id&&(t.Enum=[{Id:!1,Value:!1,Name:"nowrap"},{Value:!0,Id:!0,Name:"wrap"}]),w()(r=["AlignItems","AlignContent","JustifyContent"]).call(r,l.Id)){var a,i;t.Default="flex-start";var o=R()(a=t.Enum).call(a,(function(e){return"default"===e.Id}));-1!==o&&ga()(i=t.Enum).call(i,o,1)}var d=t.Enum;null==d||c()(d).call(d,(function(t){var r,a=jo[e][l.Id][t.Value||t.Id],i=n[l.Id][t.Value||t.Id];a&&(t.IconClassName=E()(r="".concat(ma)).call(r,a));i&&(t.IconTitle=i)}))}));return o}}],Visible:["Visible",function(e){e.originProp;var n=e.path,r=(e.pathLength,e.inputMeta),a=pa(r,Ye()(n).call(n,0,-1));if(a&&"AlignContent"===a.Id)return!!t}]}}),(function(e,t){return{direction:e,wrap:t}})),Ko=function(e){var t=e.className,n=e.field,r=e.modelData,a=e.PropertyViewItemRender,i=(0,_.useContext)(me),l=i.prefixCls,o=(0,i.getKdesignerApi)(),c=o.data,d=o.meta,u=c.getRealControlType(n),s=(0,v.c)({},d.getDefaultData(u),n),f=s.Direction,g=s.Wrap,m=(0,V.adaptorObjectByTransformKeyMap)(r,_o(f,g)),p=Vo(m);return K().createElement(K().Fragment,null,K().createElement(W.Collapse,{key:"quicklayout",name:"Collapse",className:"".concat(t,"-collapse"),expandIconPosition:"left",defaultActiveKey:"quicklayout"},K().createElement(Oo,{header:(0,V.getLangMsg)("formd.editor.key0022"),panelKey:"quicklayout"},K().createElement(Ro,{className:l,id:n.Id,field:n}))),K().createElement(V.PropertyViewItemGroup,(0,v.c)({},e,{modelData:m}),K().createElement("div",{className:pt()("".concat(t,"-editor-control"),"".concat(l,"-preview-title"))},K().createElement(V.NameTipWrapper,{className:t,name:(0,V.getLangMsg)("formd.editor.key0023")}),K().createElement(Go,{className:l,field:n})),K().createElement("div",{className:pt()("".concat(t,"-layout-props-list"))},h()(p).call(p,(function(e){return K().createElement(a,(0,v.c)({className:"kdesigner-right-view"},e,{field:n}))})))))},Vo=function(e){var t=null==e?void 0:O()(e).call(e,(function(e,t){var n,r=(null==t?void 0:t.Nodes)||[];return E()(n=[]).call(n,(0,H.c)(e),(0,H.c)(r))}),[]);return(null==t?void 0:j()(t).call(t,(function(e){return"layout"===e.Group})))||[]},Uo=function(e){var t=(0,_.useContext)(me).getKdesignerApi;(0,V.useSelectionChangeForceUpdateEffect)(t(),void 0);var n=t().selection.getActiveSelectedId();return K().createElement(V.PropertyView,(0,v.c)({},e,{PropertyViewItemGroupRender:Ko,include:zo,filterPropertyHandler:function(e){var n=t(),r=n.selection.getActiveSelectedId(),a=n.data.findControl(r);return To(a,n,e,!0)},solidSelectedId:n}))};Uo.tabKey="layout",Uo.getTabName=function(){return(0,V.getLangMsg)("formd.rightView.key0011")};var Wo=Uo;function Ho(e,t){var n=D()(e);if(a()){var r=a()(e);t&&(r=j()(r).call(r,(function(t){return l()(e,t).enumerable}))),n.push.apply(n,r)}return n}function qo(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?c()(n=Ho(Object(a),!0)).call(n,(function(t){(0,y.c)(e,t,a[t])})):u()?f()(e,u()(a)):c()(r=Ho(Object(a))).call(r,(function(t){m()(e,t,l()(a,t))}))}return e}var Zo=["kingdee","kdxk","kdtest","test"],Yo=function(e){var t,n,r=(0,_.useContext)(me),a=r.getKdesignerApi,i=r.filterProperty,l=r.isDataWithMetaMode,o=r.lockPropsMap,d=void 0===o?{}:o,u=r.getModel,s=r.designerConfig,f=void 0===s?{}:s,g=r.getDataRef,m=a();(0,V.useSelectionChangeForceUpdateEffect)(a(),void 0);var p=g(),C=(null==p||null===(t=p.formmeta)||void 0===t?void 0:t.Isv)||(null==p||null===(n=p.entitymeta)||void 0===n?void 0:n.Isv)||"kingdee",y=m.selection.getActiveSelectedId(),A=(0,_.useCallback)((function(e){var t,n,r=m.selection.getActiveSelectedId(),a=m.data.findControl(r),o=f.enableGlobalControl,s=void 0!==o&&o,g=f.enableBillControl,p=void 0!==g&&g,v=m.data.getData(),y=v.Items,A=v.extElements,I=void 0===A?[]:A,x=v.devType,b=(null===(t=k()(I).call(I,(function(e){return"Field"===e.Type})))||void 0===t?void 0:t.Items)||[];b=h()(b).call(b,(function(e){var t,n;return e.Id===(null===(t=y[0])||void 0===t?void 0:t.PkId)?qo(qo({},e),{},{Id:null===(n=y[0])||void 0===n?void 0:n.Id}):e}));var S=function(e,t){return(0,ya.Ut)(e,(function(e){c()(e).call(e,(function(e){var n,i;e.Nodes=j()(n=e.Nodes).call(n,(function(e){var n;if(t&&t(e),"style"!==e.TabGroup&&!w()(n=["Width","Height"]).call(n,e.Id))return!0})),e.Nodes=h()(i=e.Nodes).call(i,(function(e){var t=a.IsvFlag,n=t===C;if(w()(Zo).call(Zo,t)&&"2"===x&&!n){var i=a.Inherit,l=e.ReadOnly;s?(i||"speciallock"!==e.LockType||(e.LockType="unlock"),!l&&"lock"===e.LockType&&i&&(e.ReadOnly=!0)):e.LockType="unlock";var o,u=k()(b).call(b,(function(e){return e.Id===r}));if(p&&u)null===(o=u.Props)||void 0===o||c()(o).call(o,(function(t){var n=t.LockType||"lock";e.Id===t.Id&&(e.LockType=n,"lock"===n?e.ReadOnly=!0:l||"unlock"!==n||(e.ReadOnly=!1))}))}else delete e.LockType;var f=d[r]||[];if(f.length>0){var g=e.Id,m=j()(f).call(f,(function(e){return"string"==typeof e})),v=k()(f).call(f,(function(e){return void 0!==e[g]}));null!=m&&w()(m).call(m,g)?e.ReadOnly=!0:v&&(e.LockType="speciallock",e._originPropsValue_=v[g])}return e}))}))}))},N=S(e,(function(e){var t=["FieldId","EntryId","CardEntryId"];l&&w()(t).call(t,e.Id)&&(e.Visible=!1)})),T=m.meta.getControlMeta(a.FieldType).Properties;if(l&&a.FieldType){var F=m.data.getData(),M=F.EntityData.Items,D=k()(M).call(M,(function(e){return e.Id===a.Id}));if(D){var L=m.meta.getDefaultData(D._Type_),P=qo(qo({},F),{},{field:qo(qo({},L),D)});T=(0,V.getModelData)(T,P,{getModel:u})}}T=S(T||[],(function(e){var t;w()(t=["Name","Key"]).call(t,e.Id)&&(e.Visible=!1),e.Editor&&(e.Editor.isEntityData=!0,e.Editor.MetaType="entitymeta")}));var B=l?(0,V.createPropertyGroups)(E()(n=(0,Qe.flattenDeep)(h()(N).call(N,(function(e){return e.Nodes})))).call(n,(0,Qe.flattenDeep)(h()(T).call(T,(function(e){return e.Nodes}))))):N;return No(i,a,B,[],zo)}),[l]);return K().createElement(V.PropertyView,(0,v.c)({},e,{exclude:zo,filterPropertyHandler:A,solidSelectedId:y}),K().createElement(Jo,null))};Yo.tabKey="business",Yo.getTabName=function(){return(0,V.getLangMsg)("formd.rightView.key0008")};var Qo=Yo;function Jo(){var e=(0,_.useState)(),t=(0,q.c)(e,2),n=t[0],r=t[1],a=(0,_.useContext)(me),i=a.prefixCls,l=(0,a.getKdesignerApi)(),o=l.selection.getActiveSelectedId,c=l.data,d=c.getRootId,u=c.findControl,s=c.addDataChangeListener,f=c.getSubControls,g=l.meta.getControlMeta,m=o()||d();if((0,_.useEffect)((function(){var e=u(m);r(e);var t=s((function(){var e=u(m);r(e)}));return function(){t&&t()}}),[m]),!n)return null;var p="".concat(i,"-business"),C=n.ContainerType,y=n._Type_,A=g(n.FieldType),h=g(y),I=A.Name||h.Name,E="FieldsetPanelAp"===y;if("FlexPanelAp"===y||"FieldsetPanelAp"===y&&"FlexPanelAp"===C){var x=f(m)||[];E=!Y()(x).call(x,(function(e){return"FieldAp"!==e._Type_})),I=(0,V.getLangMsg)("formd.rightView.key0009")}if(E){var k=h.Properties[0].Nodes[1];return K().createElement("div",{className:"".concat(p,"-property-item")},K().createElement(V.PropertyViewItem,(0,v.c)({className:"kdesigner-right-view"},k,{field:n})))}return K().createElement("div",{className:"".concat(p,"-readonly-container")},K().createElement("div",{className:"".concat(p,"-readonly-property")},K().createElement("div",{className:"".concat(p,"-readonly-title")},"".concat((0,V.getLangMsg)("formd.rightView.key0010"),"")),K().createElement("div",{className:"".concat(p,"-readonly-name")},I)))}var Xo=function(e){var t=(0,_.useContext)(V.GlobalConfigContext).keywordMapping,n=(0,_.useContext)(me),r=n.getDataRef,a=n.getModel,i=n.getKdesignerApi;return(0,V.createRefComboEditor)({getDataRef:r,getModel:a,getKdesignerApi:i,keywordMapping:t})(e)},$o=function(e){var t=(0,_.useContext)(V.GlobalConfigContext).keywordMapping,n=(0,_.useContext)(me),r=n.getDataRef,a=n.getModel,i=n.getKdesignerApi;return(0,V.createRefComboEditor)({getDataRef:r,getModel:a,getKdesignerApi:i,keywordMapping:t,multiple:!0})(e)},ec=function(e){var t=e.value,n=e.handleChange,r=(0,_.useState)(!1),a=(0,q.c)(r,2),i=a[0],l=a[1],o=(0,_.useContext)(me).getCommonUtil,c=(o&&o()).CodeEditWrapper,d=(0,_.useRef)("");c||V.console.log("without designerConfigRef");var u=function(){l((function(e){return!e}))};return K().createElement(K().Fragment,null,K().createElement(V.EditorPropertyCustomInput,(0,v.c)({},e,{onCustomInputClick:function(){u()},handleClear:function(e){n(e||"")}})),i&&c&&K().createElement(c,{value:t,showOrHiddenDialog:u,handleChange:function(e){d.current=e},handleClick:function(){var e=function(e){if(e){var t={type:0,content:e};return window.btoa(unescape(encodeURIComponent(yt()(t))))}}(d.current||t);u(),n(e)}}))},tc=function(e){var t,n,r,a=e.handleChange,i=e.value,l=e.editor,o=(e.locked,e.Name),c=e.Tips,d=e.className,u=l.Enum,s=l.NameHidden,f=l.Default,g=l.Required,m="formdesigner",p=(0,Qe.isUndefined)(i)?f||u&&(null!==(t=null===(n=u[0])||void 0===n?void 0:n.Value)&&void 0!==t?t:null===(r=u[0])||void 0===r?void 0:r.Id):i;return K().createElement(K().Fragment,null,K().createElement(V.NameTipWrapper,{nameHidden:s,className:d,name:o,tips:c,required:g}),K().createElement("div",{className:"".concat(m,"-position-select-box")},h()(u).call(u,(function(e){var t;return K().createElement("div",{key:e.Id,className:pt()(["".concat(m,"-position-select-item"),{"is-active":p===e.Id}]),title:E()(t="".concat((0,V.getLangMsg)("formd.editor.key0001"),"")).call(t,e.Name),onClick:function(){return t=e.Id,void a(t);var t}},e.Name)}))))},nc=function(e){var t,n,r=e.handleChange,a=e.value,i=e.editor,l=e.Name,o=e.Tips,c=e.className,d=i.Enum,u=i.NameHidden,s=i.Default,f=null===(t=k()(d).call(d,(function(e){return!0===e.Checked})))||void 0===t?void 0:t.Id,g=null===(n=k()(d).call(d,(function(e){return!1===e.Checked})))||void 0===n?void 0:n.Id,m=(a||s)===f;return K().createElement(K().Fragment,null,K().createElement(V.NameTipWrapper,{nameHidden:u,className:c,name:l,tips:o}),K().createElement("div",{className:pt()(["formdesigner-font-bold-editor",{active:m}]),onClick:function(){r(m?g:f)}},K().createElement(W.Icon,{prefix:"designericon",type:"wenzijiacu"})))},rc=n(88836),ac=n.n(rc),ic=W.Select.Option;function lc(e,t){if((0,Qe.isUndefined)(e)||""===e)return"";var n=e.split(" ");if(!n.length)return"";if(1===n.length){var r=Yn()(e);n=[r,r,r,r]}else if(2===n.length){var a;n=h()(a=E()(n).call(n,n)).call(a,Yn())}else if(3===n.length){var i;n=h()(i=E()(n).call(n,n[1])).call(i,Yn())}else if(n.length>=4){var l;n=h()(l=Ye()(n).call(n,0,4)).call(l,Yn())}return"topLeft"===t?String(n[0]):"topRight"===t?String(n[1]):"bottomLeft"===t?String(n[2]):"bottomRight"===t?String(n[3]):""}var oc=function(e){var t=e.handleChange,n=e.value,r=e.className,a=e.editor,i=e.locked,l=e.Name,o=e.Tips,c=a.NameHidden,d=(0,_.useRef)(null),u=(0,_.useState)((function(){return function(e){if(!e)return"";var t=e.split(" ");return h()(t).call(t,Yn()).join(";")}(n)})),s=(0,q.c)(u,2),f=s[0],g=s[1],m=(0,_.useState)((function(){return(null==n?void 0:Pe()(n).call(n,"%"))>-1?"%":"px"})),p=(0,q.c)(m,2),C=p[0],v=p[1],y=(0,_.useState)(!1),A=(0,q.c)(y,2),I=A[0],x=A[1],k=(0,_.useState)((function(){return lc(n,"topLeft")})),b=(0,q.c)(k,2),S=b[0],N=b[1],w=(0,_.useState)((function(){return lc(n,"topRight")})),T=(0,q.c)(w,2),F=T[0],M=T[1],D=(0,_.useState)((function(){return lc(n,"bottomLeft")})),L=(0,q.c)(D,2),B=L[0],R=L[1],G=(0,_.useState)((function(){return lc(n,"bottomRight")})),O=(0,q.c)(G,2),z=O[0],j=O[1],U=function(e){N(lc(e,"topLeft")),M(lc(e,"topRight")),R(lc(e,"bottomLeft")),j(lc(e,"bottomRight"))},H=function(e,n){var r="topLeft"===n?e:S,a=[r,"topRight"===n?e:F,"bottomLeft"===n?e:B,"bottomRight"===n?e:z],i=function(e){var t=e=h()(e).call(e,(function(e){return""===e?"0":e})),n=(0,q.c)(t,4),r=n[0],a=n[1],i=n[2],l=n[3];return 1===new(P())(e).size?[r]:r===i&&a===l?[r,a]:a===l?[r,a,i]:e}(a),l=new(ac())([["topLeft",N],["topRight",M],["bottomLeft",R],["bottomRight",j]]).get(n);null==l||l(e),1===new(P())(a).size&&""===r?(g(""),t(void 0)):(g(i.join(";")),t(h()(i).call(i,(function(e){var t;return E()(t="".concat(e)).call(t,C)})).join(" ")))};return K().createElement(K().Fragment,null,K().createElement(V.NameTipWrapper,{nameHidden:c,className:r,name:l,tips:o}),K().createElement("div",{className:"formdesigner-radius-editor"},K().createElement("div",{className:"".concat(r,"-dimission-editor")},K().createElement(W.Input,{borderType:"bordered",className:"".concat(r,"-dimission-editor-input"),ref:d,value:f,onKeyPress:function(e){e.stopPropagation();var t=["-","+","e","E"];-1!==Pe()(t).call(t,e.key)&&e.preventDefault()},onChange:function(e){var n=e.target.value;if(g(n),/^(\d+(\.\d+)?;){1,3}\d+(\.\d+)?$/.test(n)){var r,a=h()(r=n.split(";")).call(r,(function(e){var t;return E()(t="".concat(e)).call(t,C)})).join(" ");t(a),U(a)}else if(/^\d+(\.\d+)?$/.test(n)){var i,l;t(E()(i="".concat(n)).call(i,C)),U(E()(l="".concat(n)).call(l,C))}else""===n&&(t(void 0),U(void 0))},disabled:i}),K().createElement(W.Select,{scrollHidden:!0,className:"".concat(r,"-dimission-editor-unit"),borderType:"none",value:C,onChange:function(e){var n,r=(null===(n=d.current)||void 0===n?void 0:n.value)||"";if(v(e),/^(\d+(\.\d+)?;){1,3}\d+(\.\d+)?$/.test(r)){var a,i=h()(a=r.split(";")).call(a,(function(t){var n;return E()(n="".concat(t)).call(n,e)})).join(" ");t(i)}else if(/^\d+(\.\d+)?$/.test(r)){var l;t(E()(l="".concat(r)).call(l,e))}}},K().createElement(ic,{value:"px"},"px"),K().createElement(ic,{value:"%"},"%"))),K().createElement("div",{className:pt()(["formdesigner-radius-editor-button",{"is-open":I}]),onClick:function(){x((function(e){return!e}))}},K().createElement(W.Icon,{prefix:"designericon",type:"wenzijiacu2"}))),I&&K().createElement("div",{className:"formdesigner-radius-panel"},K().createElement(W.InputNumber,{borderType:"bordered",value:S,zeroShow:!0,prefix:K().createElement(W.Icon,{prefix:"designericon",type:"yuanjiaozuoshang"}),onChange:function(e){N(e.target.value),H(e.target.value,"topLeft")},onKeyPress:function(e){e.stopPropagation();var t=["-","+","e","E"];-1!==Pe()(t).call(t,e.key)&&e.preventDefault()}}),K().createElement(W.InputNumber,{borderType:"bordered",value:F,zeroShow:!0,prefix:K().createElement(W.Icon,{prefix:"designericon",type:"yuanjiaoyoushang"}),onChange:function(e){M(e.target.value),H(e.target.value,"topRight")},onKeyPress:function(e){e.stopPropagation();var t=["-","+","e","E"];-1!==Pe()(t).call(t,e.key)&&e.preventDefault()}}),K().createElement(W.InputNumber,{borderType:"bordered",value:B,zeroShow:!0,prefix:K().createElement(W.Icon,{prefix:"designericon",type:"yuanjiaozuoxia"}),onChange:function(e){R(e.target.value),H(e.target.value,"bottomLeft")},onKeyPress:function(e){e.stopPropagation();var t=["-","+","e","E"];-1!==Pe()(t).call(t,e.key)&&e.preventDefault()}}),K().createElement(W.InputNumber,{borderType:"bordered",value:z,zeroShow:!0,prefix:K().createElement(W.Icon,{prefix:"designericon",type:"yuanjiaoyouxia"}),onChange:function(e){j(e.target.value),H(e.target.value,"bottomRight")},onKeyPress:function(e){e.stopPropagation();var t=["-","+","e","E"];-1!==Pe()(t).call(t,e.key)&&e.preventDefault()}})))},cc=function(e){var t=(0,_.useContext)(me),n=t.getDataRef,r=t.getModel,a=t.getKdesignerApi,i=(0,_.useReducer)((function(e){return e+1}),0),l=(0,q.c)(i,2)[1];return(0,_.useEffect)((function(){return V.eventBus.on(ia,l),function(){V.eventBus.off(ia,l)}}),[]),(0,V.createEComboEditor)({getDataRef:n,getModel:r,getKdesignerApi:a,metaType:"formmeta"})(e)},dc=V.EditComboEditor,uc=function(e){var t=(0,_.useContext)(me),n=t.getKdesignerApi,r=t.queryEntityByFieldId;return(0,V.createInputEditor)({editorComponent:W.Input,getKdesignerApi:n,queryEntityByFieldId:r})(e)},sc=function(e){return(0,V.createSelectEditor)({editorComponent:W.Select})(e)},fc=function(){var e=[],t=[[Xo,"RefCombo",""],[$o,"RefMCombo",""],[ec,"CssEdit",""],[tc,"Position",""],[nc,"FontBold",""],[oc,"Radius",""],[oc,"Radius",""],[cc,"ECombo",""],[dc,"EditCombo",""],[uc,"Input",""],[sc,"Select",""]];return c()(t).call(t,(function(t){var n=(0,q.c)(t,3),r=n[0],a=n[1],i=n[2];e.push([a,r,i])})),e},gc=n(2992),mc=n.n(gc),pc=n(73400),Cc=n.n(pc),vc=["globalConfig","dataContext","selectionContext","action","dataFactory","modelFactory","metaReader"],yc=["type","value"];function Ac(e,t){var n=D()(e);if(a()){var r=a()(e);t&&(r=j()(r).call(r,(function(t){return l()(e,t).enumerable}))),n.push.apply(n,r)}return n}function hc(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?c()(n=Ac(Object(a),!0)).call(n,(function(t){(0,y.c)(e,t,a[t])})):u()?f()(e,u()(a)):c()(r=Ac(Object(a))).call(r,(function(t){m()(e,t,l()(a,t))}))}return e}var Ic="@container-bg-color",Ec=["EntryAp","EntryFieldGroupAp","EntryFieldContainerAp","AdvConBarItemAp","CardEntryAp"],xc=function(e,t,n,r){var a,i,l=e._Type_,o=e.ParentId,c=e.FieldType,d=e.Id,u=n.getControlMeta(l).BaseId,s="".concat(u,"Id"),f=function(e,t){return"Field"===u||"Entry"===u?u+"Ap":t},g=t.findControl(o),m=null==g?void 0:g._Type_;(l&&c?(0,Qe.endsWith)(l,"Ap")?"CardEntryAp"===l?c="EntryEntity":"SubCardEntryAp"===l?c="SubEntryEntity":"NameCombinePanelAp"===l&&(c="NameCombineEntity"):l=f()||l:l?(0,Qe.endsWith)(l,"Ap")?"CardEntryAp"===l?c="EntryEntity":"SubCardEntryAp"===l?c="SubEntryEntity":"NameCombinePanelAp"===l&&(c="NameCombineEntity"):(c=l,l=f()):c&&(l=f()),c)&&("GridFlatPanelAp"===l||(!w()(a=["EntryFieldGroupAp","EntryFieldContainerAp"]).call(a,l)&&w()(i=["EntryAp","EntryFieldGroupAp","ReportListAp","EntryFieldContainerAp"]).call(i,m)?l="EntryFieldAp":"FieldAp"!==l||"CardEntryRowAp"!==m&&"CardEntryFlexPanelAp"!==m||(l="CardEntryFieldAp")));return(0,v.c)({},{_Type_:l,FieldType:c},!r||"Field"!==u&&"Entry"!==u?{}:(0,y.c)({},s,d))},kc=function(e,t,n,r){var a,i=e.globalConfig,l=e.dataContext,o=(e.selectionContext,e.action),d=e.dataFactory,u=(e.modelFactory,e.metaReader),s=((0,C.c)(e,vc),[]),f=o.type,g=o.value,m=(0,C.c)(o,yc),A=Je(g),I=A.length,x=m.isAddForFilter,b=i.showMessage,S=r.entityDataApi,N=r.isDataWithMetaMode,T=i.designerContextValue.getDataRef,F=i.keywordMapping;"ListMeta"!==T().designer&&V.eventBus.emit("add-control-id",x?A[I-1].Id:A[0].Id);var M=j()(a=h()(A).call(A,(function(e){var t,a,i,o=hc({},e),f=o,g=f.Id,m=f.ParentId,C=f._Type_,I=f.Key,E=r.getDataRef().isv;E&&"kingdee"!==E&&I&&!(0,Qe.startsWith)(I,"".concat(E,"_"))&&(I="".concat(E,"_")+I),o.Key=(0,V.createUniqueKey)(I,C,null===(t=l.getData())||void 0===t?void 0:t.Items,F);var x=(null===(a=T().entitymeta)||void 0===a?void 0:a[ae])||[],S=k()(A).call(A,(function(e){return e[Q]===m})),M=l.findControl(m)||S,D=M._Type_,L=u.getControlMeta(C);L&&1===L.CreateType&&((0,r.invokeAction)("createUIElementByType",[{CreateType:1,type:C},M||{}]),n("CreateType  1, "));var P=u.canAdd(C,D);w()(Ec).call(Ec,C)&&("object"!==(0,p.c)(P)||P.success||(b(P.message),n(P.message))),(0,v.c)(o,xc(e,l,u,N));var B=o,R=B._Type_,G=B.FieldType;Cc()(R).call(R,"ChartAp")&&(o.Width="250px",o.Height="250px");var O=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g,n=arguments.length>2?arguments[2]:void 0;return(0,V.createAddAction)(d({type:e,parentId:t,transferData:n}))};if("FieldAp"===R&&"AttachmentField"===G&&(o=hc(hc({},o),{},{ShowTitle:!1,FireUpdEvt:!0})),"CardEntryFieldAp"===R&&"AttachmentField"===G&&(o=hc(hc({},o),{},{ShowTitle:!1})),"SplitContainerAp"===R&&(s.push(O("SplitPanelAp")),s.push(O("SplitPanelAp"))),"AdvConAp"===R){s.push(O("AdvConSummaryPanelAp"));var z=O("AdvConToolbarAp"),_=z.value[Q];s.push(z),s.push(O("AdvConBarItemAp",_)),s.push(O("AdvConBarItemAp",_)),s.push(O("AdvConChildPanelAp")),o=hc(hc({},o),{},{Shrink:0,Grow:0,Collapsible:!0,BackColor:Ic})}if("BillListAp"===R){s.push(O("ListGridViewAp"));var K=O("ListCardViewAp",g,{LayoutStyle:2,AlignContent:"flex-start",AlignItems:"flex-start",JustifyContent:"flex-start"}),U=K.value.Id;s.push(K),s.push(O("CardRowPanelAp",U,{Shrink:0,Grow:0,Height:"250px",Width:"300px"}))}if("TabAp"===R&&(s.push(O("TabPageAp")),o=hc(hc({},o),{},{Shrink:0,TabStyle:3,BackColor:Ic})),"SpreadAp"===R&&(o=hc(hc({},o),{},{Height:"500px"})),"CardEntryAp"===R||"SubCardEntryAp"===R){var W=O("CardEntryViewAp"),H=W.value.Id;s.push(W),s.push(O("CardEntryFixRowAp",H,{CardType:0,Hidden:!0,Shrink:0,Grow:0,Height:"250px",Width:"300px"})),s.push(O("CardEntryRowAp",H,{CardType:1,Shrink:0,Grow:0,Height:"250px",Width:"300px"})),s.push(O("CardEntryFixRowAp",H,{CardType:0,Hidden:!0,Shrink:0,Grow:0,Height:"250px",Width:"300px"}))}if("GridFlatPanelAp"===R){var q=e.ParentId,Z=e.Id,Y=function(e,t,n){var r,a,i=j()(r=t.getAllSubControls(e)).call(r,(function(e){return"EntryFieldAp"===e[ee]}));return{entityFields:j()(a=h()(i).call(i,(function(e){return k()(n).call(n,(function(t){return t[Q]===e.FieldId}))}))).call(a,(function(e){return e})),entryFields:i}}(q,l,x),J=Y.entityFields,X=Y.entryFields,te=j()(X).call(X,(function(e){return!e.FieldId})),re=O("FieldsetPanelAp",Z),ie=re.value[Q];s.push(re),c()(J).call(J,(function(e){var t=e[ee],n=e[Q],r=e[ne],a=O("FlatFieldAp",ie,(0,y.c)((0,y.c)((0,y.c)({},ne,r),"FieldId",n),"FieldType",t));s.push(hc(hc({},a),{},{isAddFlatFieldAp:!0}))})),c()(te).call(te,(function(e){var t=e.Name,n=e.FieldType,r=e.Id,a=O("FlatFieldAp",ie,(0,y.c)((0,y.c)({},ne,t),"FieldType",n));s.push(hc(hc({},a),{},{isAddFlatFieldAp:!0}));var i=a.value[Q];ti.setEntryFieldId(q,r,i)}))}if("EntryFieldAp"===R){for(var le,oe=l.findControl(m)||S;"EntryAp"!==oe[ee];)oe=l.getParentControl(oe[Q]);var ce=j()(le=l.getSubControls(oe[Q])).call(le,(function(e){return"GridFlatPanelAp"===e[ee]}));if(ce.length>0){var de,ue=ce[0][Q],se=j()(de=l.getSubControls(ue)).call(de,(function(e){return"FieldsetPanelAp"===e[ee]}))[0][Q],fe=o,ge=fe.FieldType,me=fe.Name,pe=fe.FieldId,Ce=O("FlatFieldAp",se,(0,y.c)((0,y.c)((0,y.c)({},ne,me),"FieldType",ge),"FieldId",pe));s.push(Ce);var ve=Ce.value[Q];ti.setEntryFieldId(oe[Q],g,ve)}}"ToolbarAp"===R&&(s.push(O("BarItemAp")),s.push(O("BarItemAp")),s.push(O("BarItemAp")),o=hc(hc({},o),{},{Shrink:0})),"FieldsetPanelAp"===R&&(o=hc(hc({},o),{},{BackColor:Ic})),"MarkdownAp"===R&&(o=hc(hc({},o),{},{defoc:!1})),"WizardAp"===R&&(o=hc(hc({},o),{},{NodeLinkageSubTab:!0})),"RichTextField"===C&&"FieldsetPanelAp"===D&&(o=hc(hc({},o),{},{FullLine:!0}));var ye=e.ParentId,Ae=e.FieldName;if(w()(i=["schemefilterview","filtergridview","fastsearchgridview"]).call(i,ye)){var he,Ie=h()(he=l.getSubControls(ye)).call(he,(function(e){return e[$]}));if(w()(Ie).call(Ie,Ae)){var Ee={schemefilterview:(0,V.getLangMsg)("formd.filterView.key0001"),filtergridview:(0,V.getLangMsg)("formd.filterView.key0002"),fastsearchgridview:(0,V.getLangMsg)("formd.filterView.key0003")},xe=(0,V.getLangMsg)({key:"formd.tips.key0008",variables:{fieldType:Ee[ye],name:e[ne],fieldName:Ae}});return void b(xe)}}return o}))).call(a,Boolean),D=[hc({type:f,value:M},m)],L=E()(D).call(D,s);if(N){var P,B=[],R=E()(L).call(L,j()(P=h()(L).call(L,(function(e){var t,n=e.type,r=e.value,a=qe()(r)?r:[r];if(w()(t=[V.ActionType.ADD,V.ActionType.PASTE]).call(t,n)){var i,o,c=j()(i=h()(a).call(a,(function(e){if("RadioField"===e.FieldType){var t=e.Id,n=e.ParentId,r=e.FieldType,a=e.Name;e.FieldId=t;var i=l.getData().EntityData.Items,o=k()(i).call(i,(function(e){return"RadioGroupField"===e._Type_})),c=null,d="".concat(j()(i).call(i,(function(e){return"RadioField"===e._Type_})).length+1),s=(0,V.createUUid)();if(!o){var f={Id:s,Name:(0,V.getLangMsg)("formd.tips.key0009"),ParentId:n,_Type_:"RadioGroupField",FieldType:"RadioGroupField"};(0,v.c)(f,xc(f,l,u,N)),c={Id:s,ParentId:n,_Type_:"RadioGroupField",Items:[{Caption:a,Value:d,_Type_:"ComboItem"}]},B.push((0,V.createAddAction)(f))}return[{Id:t,ParentId:n,_Type_:r,Group:(null==o?void 0:o.Id)||s,Items:d,Name:a},c]}if(e.FieldType)return{Id:e.Id,ParentId:e.ParentId,_Type_:e.FieldType}}))).call(i,Boolean),d=j()(o=(0,Qe.flattenDeep)(c)).call(o,Boolean);return d.length&&S.getBatchAction((0,V.createAddAction)(d))}}))).call(P,Boolean));return E()(R).call(R,B)}return j()(L).call(L,(function(e){var t;return 0!==(null===(t=e.value)||void 0===t?void 0:t.length)}))},bc=["NameSegTextField","NameSegComboField","NameSegBasedataField"],Sc=["NameCombinePanelAp"];var Nc=function(e,t){var n=e.isMultiSelected,r=e.field,a=e.dataContext,i=e.selectionContext,l=e.propName,o=e.editor,c=r.Id,d=i.getSelection();if(w()(d).call(d,c)){t.entityDataApi;if(t.isDataWithMetaMode&&o&&o.isEntityData){var u=a.getData().EntityData.Items,s=k()(u).call(u,(function(e){return e.Id===c}));return null==s?void 0:s[l]}if(n){var f=h()(d).call(d,(function(e){return a.findControl(e)}));return 1===new(P())(h()(f).call(f,(function(e){return e[l]}))).size?r[l]:""}return r[l]}},wc=function(e,t,n,r){var a,i=e.globalConfig,l=e.dataContext,o=(e.selectionContext,e.action),d=(e.dataFactory,e.modelFactory,e.metaReader,o.type),u=o.value,s=o.deleteConfirm,f=Je(u),g=[],m=i.showMessage,C=i.showConfirm,v=[];if(c()(f).call(f,(function(e){var t,r,a=l.findControl(e),o=a[ee],d=a[ne],u=a[te],s=a[re],f=a.FieldId,C=l.findControl(s)[ee],y="";try{var A=function(e,t){var n=e.Id,r=e.Name,a=e.Key,i=e._Type_,l=e.FieldType,o=e.RelatedParentId,d=e.ParentId,u=t.designerContextValue,s=(t.showMessage,u.getModel),f=u.getKdesignerApi,g=u.getDesignerModelType,m=s(),p=f(),C=p.data,v=p.meta;if(C.findControl(d)._Type_,n===C.getRootId()){var y=(0,V.getLangMsg)({key:"formd.tips.key0003",variables:{fieldName:r,fieldKey:a}});throw new Error(y)}if(o&&w()(bc).call(bc,l)){var A=m.getPropertyValue(o,"Name"),h=(0,V.getLangMsg)({key:"formd.tips.key0004",variables:{fieldName:r,fieldKey:a,relatedParentName:A}});throw new Error(h)}var I=i,E=[];if(function e(t){var n=t._Type_,r=t.Id,a=t.Name,i=t.Key,l=t.FieldType,o=t.RelatedParentId,d=t.Inherit,u=v.getControlMeta(l||n).isContainer,s=["EntryAp","ReportCommFilterPanelAp","ReportMoreFilterPanelAp","ReportListAp"];if(d&&(!u||w()(s).call(s,n))){var f="BillListCardViewModel"===g();if(w()(s).call(s,n)||!f&&!u){var p=(0,V.getLangMsg)({key:"formd.tips.key0005",variables:{fieldName:a,fieldKey:i}});throw new Error(p)}f&&E.push({key:i,name:a})}if(w()(bc).call(bc,l)&&!w()(Sc).call(Sc,I)&&o){var y=m.getPropertyValue(o,"Name"),A=(0,V.getLangMsg)({key:"formd.tips.key0004",variables:{fieldName:a,fieldKey:i,relatedParentName:y}});throw new Error(A)}var h=C.getSubControls(r);h.length&&(I=n,c()(h).call(h,(function(t){return e(t)})))}(e),E.length>0)return{needConfirm:!0,inheritCtrls:E};if(v.getControlMeta(l||i).Inside){var x=(0,V.getLangMsg)({key:"formd.tips.key0006",variables:{fieldName:r,fieldKey:a}});throw new Error(x)}}(a,i);"object"===(0,p.c)(A)&&A.needConfirm&&(v=E()(v).call(v,A.inheritCtrls))}catch(e){y=e.message}if(y)return n("".concat(y)),m(E()(r="".concat((0,V.getLangMsg)("formd.tips.key0010"),"")).call(r,y));if(w()(t=["FlatFieldAp","GridFlatPanelAp"]).call(t,o)||"FieldsetPanelAp"===o&&"GridFlatPanelAp"===C){var h;n(E()(h="".concat(d,"[")).call(h,u,"]"));var I=(0,V.getLangMsg)({key:"formd.tips.key0011",variables:{name:d,key:u}});return m(I)}if("EntryFieldAp"===o){var x;g.push(e);for(var b=l.findControl(s);"EntryAp"!==b[ee];)b=l.getParentControl(b[Q]);if(j()(x=l.getSubControls(b[Q])).call(x,(function(e){return"GridFlatPanelAp"===e[ee]})).length>0)if(f){var S;g=O()(S=l.findControlByCondition((function(e){return e.FieldId===f&&"EntryFieldAp"!==e[ee]&&!w()(g).call(g,e[Q])}))).call(S,(function(e,t){var n;return E()(n=[]).call(n,(0,H.c)(e),[t[Q]])}),g)}else{var N=ti.getFlatFieldId(b[Q],e);N&&g.push(N)}}else{var T;if("RadioField"===a.FieldType&&w()(T=["FieldAp","CardEntryFieldAp"]).call(T,o)){var F=(0,i.designerContextValue.getDataRef)().entitymeta.Items,M=k()(F).call(F,(function(e){return"RadioField"===e._Type_&&e.Id===a.FieldId}));if(M){var D=[];if(c()(F).call(F,(function(e){"RadioField"===e._Type_&&e.Group===M.Group&&D.push(e.Id)})),D.length>0){var L,P=l.getData().Items,B=[],R={};c()(P).call(P,(function(e){e.ParentId===a.ParentId&&w()(D).call(D,e.FieldId)&&B.push(e),"RadioGroupField"===e.FieldType&&e.FieldId===M.Group&&(R=e)})),1===B.length&&null!==(L=R)&&void 0!==L&&L.Id&&g.push(R.Id)}}}g.push(e)}})),!(v.length>0&&!1!==s)){var y=r.entityDataApi,A=r.isDataWithMetaMode;return E()(a=[{type:d,value:g}]).call(a,A?[y.getBatchAction((0,V.createDeleteAction)(g))]:[])}var I=h()(v).call(v,(function(e){return e.name})).join("");C({id:"deleteConfirm",msg:(0,V.getLangMsg)({key:"bosd.deleteAction.tips",variables:{fieldsName:I}}),confirmType:2,button_type:1,clickCallback:function(e,t,n,r){6===n&&i.designerContextValue.getKdesignerApi().data.deleteControl((0,V.createDeleteAction)(f,{deleteConfirm:!1}))}})},Tc=function e(t,n){var r=t;if(r.Id===n)return r;if(r.Items)for(var a=0;a<r.Items.length;a++){var i=e(r.Items[a],n);if(i)return i}},Fc=function(e,t,n,r){e.globalConfig;var a,i=e.dataContext,l=(e.selectionContext,e.action),o=(e.dataFactory,e.modelFactory,e.metaReader),d=l.type,u=l.value,s=l.id,f=r.getDataRef,g=r.createFormDataFromEntityData,m=r.queryEntityByFieldId,p=r.getForceUpdateAction,C=r.entityDataApi;if("function"==typeof u)return[l,p(s)];var y=[],A=j()(u).call(u,(function(e){return!qe()(e)})),I=j()(u).call(u,(function(e){return qe()(e)}));return c()(I).call(I,(function(e){var t=null==e?void 0:e[0],n=["Collapsible"];Y()(n).call(n,(function(t){return ol()(null==e?void 0:e[1],t)}))&&S()((function(){var e,n=document.querySelectorAll('[data-control-id="'.concat(t,'"]'));null!=n&&null!==(e=n[0])&&void 0!==e&&null!==(e=e.dataset)&&void 0!==e&&e.selection||c()(n).call(n,(function(e){return null==e?void 0:e.click()}))}),100);var r=null==e?void 0:e[1];if(t&&r&&ol()(r,"Name")){var a=i.findControl(t);a&&"RadioField"===a.FieldType&&A.push(C.getBatchAction((0,V.createUpdateAction)([[t,{Name:r.Name}]]),t))}if(t&&r&&ol()(r,"FieldId")){var l=i.findControl(t);if(l&&"RadioField"===l.FieldType){var d=f(),u=d.entitymeta,s=d.entitytree;if(u){var p=i.findControlByCondition((function(e){return"RadioGroupField"===e.FieldType}));if(Tc(s,r.FieldId)){var x,b=k()(x=u.Items).call(x,(function(e){return e.Id===r.FieldId}));if(null!=b&&b.Group&&!Y()(p).call(p,(function(e){return e.FieldId===b.Group}))){var N=g(b.Group,"FieldAp",l.ParentId,{FieldType:"RadioGroupField"}),w=N.action,T=N.exitEntityData;(0,v.c)(w.value,xc(w.value,i,o)),T&&y.push(w)}}}}if(l){var F=r.FieldId,M=m(F);M&&y.push((0,V.createUpdateAction)([[t,{Key:M.Key}]]))}}var D=[];if(ol()(r,"EntryId")){var L,P,B=i.getAllSubControls(t);D=j()(L=h()(B).call(B,(function(e){var t=e[Q],n=e.FieldId;if(!e.EntryId&&n)return[t,{FieldId:""}]}))).call(L,(function(e){return e})),I=E()(P=[]).call(P,(0,H.c)(I),(0,H.c)(D))}})),E()(a=[{type:d,value:I}]).call(a,y,A)};function Mc(e,t){var n=D()(e);if(a()){var r=a()(e);t&&(r=j()(r).call(r,(function(t){return l()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dc(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?c()(n=Mc(Object(a),!0)).call(n,(function(t){(0,y.c)(e,t,a[t])})):u()?f()(e,u()(a)):c()(r=Mc(Object(a))).call(r,(function(t){m()(e,t,l()(a,t))}))}return e}var Lc=["EntryFieldAp","CardEntryFieldAp","FlatFieldAp","OperationColumnAp","EntryFieldContainerAp","EntryFieldGroupAp","CardEntryRowAp","EntryAp","CardEntryAp","SubCardEntryAp"],Pc=function(e,t,n,r){var a=e.globalConfig,i=e.dataContext,l=(e.selectionContext,e.action),o=(e.dataFactory,e.modelFactory,e.metaReader),c=a.showMessage,d=l.type,u=l.value,s=u,f=u.origin,g=u.target,m=u.isPrev,C=g,v=qe()(f)?f:[f],y=i.getData().Items,A=i.getRootId(),h=v[0],I=A,E={},x=!1,k=y.length;if(m){var b=i.findControl(C),S=b[ee],N=b[re];if(!o.getControlMeta(S).IsContainer){var T,F=null===(T=i.getPrevSibling(C).control)||void 0===T?void 0:T[Q];F?C=F:(x=!0,C=N)}}for(var M=0,D=-1,L=function(){var e=y[M],t=e[Q];if(t===C){E=e,D=M;var n=e[ee],r=e[re],a=o.getControlMeta(n).IsContainer;if(m){if(I=r,a&&(I=t),x){var l=i.getSubControls(I);D=(D=i.findControlIndex(l[0][Q])-1)<0?M:D}return M=k,1}if(r&&!a)I=r;else if(a){I=e[Q];var c=i.getSubControls(t),d=c.length;d>0&&(D=R()(y).call(y,(function(e){var t;return e[Q]===(null===(t=c[d-1])||void 0===t?void 0:t[Q])})))}M=k}else M++};M<k&&!L(););var P=E[ee],B=i.findControl(I),G=i.findControl(h),O=B[ee],z=G[X]||G[ee],j=G[ee],_=E[ee];if(I!==G[re]){var K=i.getParentControl(I),U=K?K[ee]:"";if("FieldsetPanelAp"===O&&"GridFlatPanelAp"===U)return c((0,V.getLangMsg)("formd.tips.key0012"));if("FlatFieldAp"===j)return c((0,V.getLangMsg)("formd.tips.key0013"))}if(w()(Lc).call(Lc,_)&&"FieldAp"===j)return c((0,V.getLangMsg)("formd.tips.key0002"));var W=o.canAdd(G,B);if("object"===(0,p.c)(W)&&!W.success)return c(W.message);var H=["FieldAp","FlatFieldAp"];if(z!==j&&!w()(H).call(H,j)&&w()(j).call(j,"FieldAp")&&P!==j){var q=o.canAdd(j,O);if("object"===(0,p.c)(q)&&!q.success)return c(q.message)}var Z=["EntryFieldContainerAp","EntryFieldGroupAp","EntryFieldAp","OperationColumnAp"],Y=["CardEntryFieldAp","CardEntryRowAp","CardEntryViewAp"],J=["FlatFieldAp"],$=function(e,t){for(var n="",r=t||h,a="";n!==e&&r!==A;){var l=i.findControl(r);n=l[ee],a=l[Q],r=l[re]}return a};if(w()(Z).call(Z,j)&&$("EntryAp",h)!==$("EntryAp",C))return c((0,V.getLangMsg)("formd.tips.key0014"));if(w()(Y).call(Y,j)&&$("CardEntryAp",h)!==$("CardEntryAp",C))return c((0,V.getLangMsg)("formd.tips.key0014"));if(w()(J).call(J,j)&&$("GridFlatPanelAp",h)!==$("GridFlatPanelAp",C))return c((0,V.getLangMsg)("formd.tips.key0014"));return"GridFlatPanelAp"===_?c((0,V.getLangMsg)("formd.tips.key0015")):[{type:d,value:s=Dc(Dc({},s),{},{origin:v,targetIndex:D,targetParentId:I})}]},Bc=["globalConfig","dataContext","selectionContext","action","dataFactory","modelFactory","metaReader"],Rc=["type","value"];function Gc(e,t){var n=D()(e);if(a()){var r=a()(e);t&&(r=j()(r).call(r,(function(t){return l()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oc(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?c()(n=Gc(Object(a),!0)).call(n,(function(t){(0,y.c)(e,t,a[t])})):u()?f()(e,u()(a)):c()(r=Gc(Object(a))).call(r,(function(t){m()(e,t,l()(a,t))}))}return e}var zc=function(e,t,n,r){var a,i,l,o=e.globalConfig,c=e.dataContext,d=e.selectionContext,u=e.action,s=(e.dataFactory,e.modelFactory,e.metaReader),f=((0,C.c)(e,Bc),u.type),g=u.value,m=(0,C.c)(u,Rc),v=Je(g),y=v.length,A=m.isAddForFilter,I=o.showMessage,E=(r.entityDataApi,r.isDataWithMetaMode,o.designerContextValue.getDataRef);"ListMeta"!==E().designer&&V.eventBus.emit("add-control-id",A?v[y-1].Id:v[0].Id);var x=null===(a=d.getSelection())||void 0===a?void 0:a[0],b=null===(i=c.getParentControl(x))||void 0===i?void 0:i.Id,S=j()(l=h()(v).call(v,(function(e){var t,r,a,i=Oc({},e),l=(i.Id,i.ParentId),o=i._Type_,d=i.FieldType||o,u=(null===(t=E().entitymeta)||void 0===t||t[ae],k()(v).call(v,(function(e){return e[Q]===l}))),f=c.findControl(l)||u,g=f._Type_;if("FieldsetPanelAp"===(f.FieldType||g)){var m=c.getParentControl(l);if(m&&"GridFlatPanelAp"===m[ee]){var C=(0,V.getLangMsg)("formd.tips.key0012");I(C),n(C)}}var y=["EntryFieldAp","EntryFieldGroupAp","OperationColumnAp","EntryFieldContainerAp"],A=(0,V.getLangMsg)("formd.tips.key0002");"EntryAp"===g&&(w()(y).call(y,o)||(I(A),n(A))),w()(r=["EntryFieldGroupAp","EntryFieldContainerAp","CardEntryRowAp","CardEntryFlexPanelAp","CardEntryAp","SubCardEntryAp"]).call(r,g)&&"FieldAp"===o&&(I(A),n(A)),w()(y).call(y,o)&&"EntryAp"!==g&&(I(A),n(A));var x=l!==b||s.canAdd(d,f);"object"!==(0,p.c)(x)||x.success||(I(x.message),n(x.message));var S=e.ParentId,N=e.FieldName;if(w()(a=["schemefilterview","filtergridview","fastsearchgridview"]).call(a,S)){var T,F=h()(T=c.getSubControls(S)).call(T,(function(e){return e[$]}));if(w()(F).call(F,N)){var M={schemefilterview:(0,V.getLangMsg)("formd.filterView.key0001"),filtergridview:(0,V.getLangMsg)("formd.filterView.key0002"),fastsearchgridview:(0,V.getLangMsg)("formd.filterView.key0003")},D=(0,V.getLangMsg)({key:"formd.tips.key0008",variables:{fieldType:M[S],name:e[ne],fieldName:N}});return void I(D)}}return i}))).call(l,Boolean),N=[Oc({type:f,value:S},m)];return j()(N).call(N,(function(e){var t;return 0!==(null===(t=e.value)||void 0===t?void 0:t.length)}))},jc=["type","value"],_c=["__targetIndex__"],Kc=(0,y.c)((0,y.c)((0,y.c)((0,y.c)((0,y.c)({},V.ActionType.ADD,kc),V.ActionType.DELETE,wc),V.ActionType.UPDATE,Fc),V.ActionType.DRAG,Pc),V.ActionType.PASTE,zc),Vc=function(e,t){var n=e.action,r=e.dataContext,a=e.selectionContext,i=e.globalConfig,l=e.dataFactory,o=e.modelFactory,d=e.metaReader,u=e.success,s=e.fail,f=(i.dataRef,i.keywordMapping),g=t.getDataRef().isv,m=(t.isDataWithMetaMode,t.createFormDataFromEntityData),p=t.queryEntityByFieldId,y=!1,A=function e(n){var a=[],i=t.getCommonUtil,l=t.getDesignerModelType,o=t.getKdesignerApi,s=l(),A=i().getTemplateScheme;return mc().all(h()(n).call(n,(function(e){var t=e.type,n=e.value,i=(0,C.c)(e,jc),l=A,u=o();if(t===V.ActionType.ADD||t===V.ActionType.PASTE){var y=qe()(n)?n:[n],I=i.isAddForFilter;if(I){var x=(0,Qe.cloneDeep)(y),k=[];c()(x).call(x,(function(e,t){if(!(0,Qe.isUndefined)(e.__targetIndex__)){var n=e.__targetIndex__,a=(0,C.c)(e,_c);y[t]=a;var i=a.ParentId;if(i){var l=r.findControlByCondition((function(e){return e.ParentId===i}));l.length&&l[n]&&k.push([t,r.findControlIndex(l[n].Id)])}else k.push([t,-1])}})),c()(k).call(k,(function(e){var t=(0,q.c)(e,2),n=t[0],r=t[1],i=y[n];y[n]=void 0,a.push((0,V.createAddAction)(i,{index:r,isAddForFilter:I}))})),y=j()(y).call(y,(function(e){return!!e}))}var b=mc().all(h()(y).call(y,(function(e){var n=e.FieldType||e._Type_||"";e[f.key]=e[f.key]||n.toLowerCase();var o=i.isAddByEntity,C=i.isAddFlatFieldAp;if(t===V.ActionType.ADD&&!o&&!C&&e.FieldType){var A,I=e.FieldType?"FieldType":"_Type_",x=u.data.findControlByCondition((function(t){return e[I]===t[I]})).length;e[f.name]=E()(A="".concat(e[f.name])).call(A,0===x?"":x)}if(t===V.ActionType.PASTE||o){var k=j()(y).call(y,(function(e){if("RadioField"===e.FieldType&&e.FieldId)return!0})),b=j()(y).call(y,(function(e){if("RadioGroupField"===e.FieldType&&e.FieldId)return!0}));if(k.length){var S=r.findControlByCondition((function(e){return"RadioGroupField"===e.FieldType})),N=h()(k).call(k,(function(e){var t;return null===(t=p(e.FieldId))||void 0===t?void 0:t.Group})),T=new(P());c()(N).call(N,(function(e,t){if(e&&!T.has(e)){var n=h()(b).call(b,(function(e){return e.FieldId})),i=k[t];if(!w()(n).call(n,e)&&!Y()(S).call(S,(function(t){return t.FieldId===e}))){var l=m(e,"FieldAp",i.ParentId,{FieldType:"RadioGroupField"}),o=l.action,c=l.exitEntityData;(0,v.c)(o.value,xc(o.value,r,d)),c&&(T.add(e),a.push(o))}}}))}}return g&&"kingdee"!==g&&!(0,Qe.startsWith)(e[f.key],"".concat(g,"_"))&&(o&&0===r.findControlByCondition((function(t){return t[f.key]===e[f.key]})).length||(e[f.key]="".concat(g,"_")+e[f.key])),l(s,e.FieldType||e._Type_).then((function(t){var n,r=((null==t||null===(n=t[0])||void 0===n||null===(n=n.children)||void 0===n?void 0:n[0])||{}).items;return function(e,t,n){return(0,Qe.isEmpty)(e)?t:gl(e,{},n)}(function(e,t,n){return(0,Qe.isEmpty)(e)?{}:fl(e,t,(function(){return n}))}((void 0===r?[{}]:r)[0],u,e),e,u)}))})));return b.then((function(t){return e.value=t,e}))}return mc().resolve(e)}))).then((function(t){return a.length?(y=!0,e(a).then((function(e){return u(E()(t).call(t,e))}))):y?E()(t).call(t,a):u(E()(t).call(t,a))}))},I=[],x=n.type,k=Kc[x];if(k&&"ADD"===x&&!n.value.length){var b=k({globalConfig:i,dataContext:r,selectionContext:a,action:n,dataFactory:l,modelFactory:o,metaReader:d},A,s,t);b&&I.push.apply(I,(0,H.c)(b))}else if(k){var S=k({globalConfig:i,dataContext:r,selectionContext:a,action:n,dataFactory:l,modelFactory:o,metaReader:d},A,s,t);S&&I.push.apply(I,(0,H.c)(S))}else I.push(n);I.length&&A(I)};function Uc(e,t){var n=D()(e);if(a()){var r=a()(e);t&&(r=j()(r).call(r,(function(t){return l()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wc(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?c()(n=Uc(Object(a),!0)).call(n,(function(t){(0,y.c)(e,t,a[t])})):u()?f()(e,u()(a)):c()(r=Uc(Object(a))).call(r,(function(t){m()(e,t,l()(a,t))}))}return e}var Hc=function(e,t,n){var r=Wc(Wc({},e),{},{getEntityPropertyValue:function(e,r){var a,i=n();if(i){var l=null==i||null===(a=i.Items)||void 0===a?void 0:k()(a).call(a,(function(t){return t.Id===e}));if(l){var o=l[r];return(0,Qe.isUndefined)(o)?t.meta.getControlPropertyDefaultValue(l._Type_,r):o}}},getPropertyValue:function(e,n){var r=t.data.findControl(e);if(r){var a=r[n];return(0,Qe.isUndefined)(a)?t.meta.getControlPropertyDefaultValue(r._Type_,n):a}},getFormFieldInfo:function(e){return t.data.findControl(e)},getFieldInfo:function(e,n){return"entitymeta"===n?r.getEntityFieldInfo("string"==typeof e?e:e.entityId):t.data.findControl(e)},getFieldPropertyInfo:function(e,t,n){return"entitymeta"===n?r.getEntityPropertyValue(e,t):r.getPropertyValue(e,t)},getEntityRootId:function(){var e,t,r=n();if(r)return null===(e=k()(t=r.Items).call(t,(function(e){return!e.ParentId})))||void 0===e?void 0:e.Id},getEntityFieldInfo:function(e){var t,r=n();if(r)return null==r||null===(t=r.Items)||void 0===t?void 0:k()(t).call(t,(function(t){return t.Id===e}))},getParentControl:function(e,t,n){for(var r={Id:e},a=function(){var e,a=k()(n).call(n,(function(e){return e.Id===r.Id}));if((null===(e=r=k()(n).call(n,(function(e){return e.Id===a.ParentId})))||void 0===e?void 0:e._Type_)===t)return 1};r&&!a(););return r}});return r},qc=function(){var e=(0,_.useContext)(me).getKdesignerApi,t=(0,_.useMemo)((function(){return e()}),[]).data;return{getControlByEntityId:(0,_.useCallback)((function(e){if(e)return t.findControlByCondition((function(t){return t.FieldId===e}))}),[])}};function Zc(e,t){var n=D()(e);if(a()){var r=a()(e);t&&(r=j()(r).call(r,(function(t){return l()(e,t).enumerable}))),n.push.apply(n,r)}return n}var Yc={},Qc="",Jc=function e(t,n){for(var r in t){if(t[r].key===n)return[t[r].key];if(t[r].children){var a=e(t[r].children,n);if(void 0!==a)return E()(a).call(a,[t[r].key])}}},Xc=(0,_.memo)((0,_.forwardRef)((function(e,t){var n,r=(0,_.useContext)(V.ConfigContext),a=r.getPrefixCls,i=r.prefixCls,o=(0,_.useContext)(me),d=o.getKdesignerApi,s=o.getDataRef,g=o.canAddControlFromEntityNode,p=o.getModel,C=(0,_.useContext)(V.GlobalConfigContext).showMessage,A=(0,_.useMemo)((function(){return d()}),[]),I=A.selection,x=A.meta,k=A.dataFactory,b=A.data,S=qc().getControlByEntityId,N=s(),T=N.designer,F=N.entitymeta,M=N.entitytree,D=p(),L=(0,_.useMemo)((function(){return!(!T||!w()(T).call(T,"List"))}),[T]),P=b.getRootId(),B=(0,_.useState)([P]),R=(0,q.c)(B,2),G=R[0],z=R[1],U=(0,_.useState)(!0),Z=(0,q.c)(U,2),Y=Z[0],J=Z[1],X=(0,_.useState)(!1),$=(0,q.c)(X,2),ie=$[0],le=$[1],oe=(0,_.useState)(void 0),ce=(0,q.c)(oe,2),de=ce[0],ue=ce[1],se=(0,_.useState)(600),fe=(0,q.c)(se,2),ge=fe[0],pe=fe[1],Ce=(0,_.useRef)(null),ve=(0,_.useReducer)((function(e){return e+1}),0),ye=(0,q.c)(ve,2)[1],Ae=(0,_.useMemo)((function(){if(L)return M;var e,t=F[ae][0],n=h()(e=F[ae]).call(e,(function(e,n){return 0===n||e[re]||(e[re]=t[Q]),e}));return F[ae]=n,F}),[L,F,M]),he=(0,_.useMemo)((function(){return L?Sa(Ae,{isShowKey:ie,isListMeta:L}):{treeData:ka(Ae,ie,{type:ee}),ids:O()(e=Ae[ae]).call(e,(function(e,t){return e.push(t[Q]),e}),[])};var e}),[ie,L,Ae]),Ie=he.treeData,Ee=he.ids,xe=he.flattenTrees,ke=a&&a(i,"outline"),be=(null===(n=Ie[0])||void 0===n?void 0:n.key)||"",Se=be?[be]:[],Ne=(0,_.useState)(Se),we=(0,q.c)(Ne,2),Te=we[0],Fe=we[1],Me=(0,_.useCallback)((function(){var e=!Y;J(e),e?(Fe([]),Ce.current&&(Ce.current.scrollTop=0)):Fe(Ee)}),[Y,Ee,Ce.current]),De=(0,_.useCallback)((function(){le(!ie)}),[ie]),Le=(0,_.useCallback)((function(e,t){var n,r,a=t.node,i=a.type,o=a.createType,d=a.key,s=a.parentId,p=I.getActiveSelectedId();if(!g(o,d,p))if(i){D.getEntityFieldInfo(d);var A=D.getEntityFieldInfo(s),h=b.findControl(p),E=h[ee],S=h.FieldId,N=h.EntryId,T=S||N,F=b.getData().rootEntityId,L="";w()(E).call(E,"EntryAp")?L=T:p===P&&(L=F);for(var B=p;!L&&P!==B&&L!==F;){var R=b.getParentControl(B);L=R.FieldId||R.EntryId,B=R.Id,P===B&&(L=F)}if(A.Id===L||w()(n=["SubEntryEntity"]).call(n,i)){var G=x.getControlMeta(E).IsContainer,O=void 0!==G&&G,z=O?p:b.getParentControlId(p)||P,j=b.findControl(z)[ee];if(x.canAdd(i,j)){var _=Tc(M,d),K=(0,v.c)({},function(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?c()(n=Zc(Object(a),!0)).call(n,(function(t){(0,y.c)(e,t,a[t])})):u()?f()(e,u()(a)):c()(r=Zc(Object(a))).call(r,(function(t){m()(e,t,l()(a,t))}))}return e}({},k({type:i,parentId:z})),w()(r=["EntryEntity","SubEntryEntity","TreeEntryEntity"]).call(r,i)?{EntryId:e[0]}:{FieldId:e[0]},_?{Name:_.Name,Key:_.Key}:{}),U=b.findControlIndex(p);if(O){var W=b.getSubControls(p),H=W.length;H>0&&(U=b.findControlIndex(W[H-1][Q]))}b.addControl((0,V.createAddAction)(K,(0,v.c)({index:U+1},_?{isAddByEntity:!0}:{}))).then((function(e){var t=e[0].value;I.setSelect(qe()(t)?[t[0][Q]]:[t[Q]])}))}}else C((0,V.getLangMsg)("formd.tips.key0016"))}else C((0,V.getLangMsg)("formd.tips.key0016"))}),[]),Be=(0,_.useCallback)((function(e){var t,n,r,a=L?Ae:Ae[ae];a=qe()(a)?a:xe;var i=e.target.value,l=h()(t=j()(a).call(a,(function(e){var t;return w()(t=e[ne]||e.title).call(t,i)}))).call(t,(function(e){return e[Q]||e.key})),o=h()(n=j()(a).call(a,(function(e){var t;return w()(t=e[te]||e.key).call(t,i)}))).call(n,(function(e){return e[Q]||e.key}));Yc[i]=E()(r=[]).call(r,(0,H.c)(l),(0,H.c)(o)),ue(i)}),[Ae,L]),Re=(0,_.useCallback)((function(){if(!de||!Yc[de])return null;var e=Yc[de],t=e.length;if(t<=0)return P;if(!Qc&&!w()(e).call(e,Qc))return e[0];var n=Pe()(e).call(e,Qc);return n===t-1?n=0:n++,e[n]}),[de]),Ge=(0,_.useCallback)((function(){var e,t=Re();if(t){Qc=t,z([t]);var n=S(t),r=null==n||null===(e=n[0])||void 0===e?void 0:e[Q];if(r&&I.setSelect(r),!w()(Te).call(Te,t)){var a,i=Jc(Ie,t);(null==i?void 0:i.length)&&Fe(E()(a=[]).call(a,(0,H.c)(Te),(0,H.c)(i)))}}}),[Re,L,Ie,Te]),Oe=(0,_.useMemo)((function(){var e="".concat(ke,"-search-prefix-icon");return K().createElement(W.Icon,{prefix:"designericon",type:"sousuo",className:e,onClick:Ge})}),[ke]);(0,_.useEffect)((function(){var e=function(){var e=document.body.clientHeight-30-80-20;pe(e),Ce.current&&(Ce.current.style.height="".concat(e,"px"))};e();var t=(0,Qe.debounce)(e,100);return window.addEventListener("resize",t),V.eventBus.on(ia,ye),function(){window.removeEventListener("resize",t),V.eventBus.off(ia,ye)}}),[]);var ze=function(e,t){e.stopPropagation(),e.preventDefault();var n=(0,H.c)(Te),r=Pe()(n).call(n,t);r>=0?ga()(n).call(n,r,1):n.push(t),Fe(n)},je=[function(e){return K().createElement(W.Icon,{prefix:"designericon",type:"shouqi3",onClick:function(t){return ze(t,e.nodeKey)}})},function(e){return K().createElement(W.Icon,{prefix:"designericon",type:"zhankai3",onClick:function(t){return ze(t,e.nodeKey)}})}],_e=(0,_.useCallback)((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).nodeKey;if(!e)return K().createElement(W.Icon,{prefix:"designericon",type:"Flexmianban"});var t=(D.getEntityFieldInfo(e)||{})[ee],n=void 0===t?"FlexPanelAp":t,r=(0,V.getControlIconMap)(n);return K().createElement(W.Icon,{prefix:"designericon",type:r})}),[]);return K().createElement("div",{className:"".concat(ke,"-wrap")},K().createElement("div",{className:"".concat(ke,"-search")},K().createElement(W.Input,{prefix:Oe,placeholder:(0,V.getLangMsg)("formd.leftView.key0003"),borderType:"bordered",className:"".concat(ke,"-search-input"),onChange:Be,onPressEnter:Ge,value:de,allowClear:!0}),K().createElement(W.Icon,{prefix:"designericon",className:"".concat(ke,"-search-icon"),onClick:Me,type:Y?"shouqiquanbu":"zhankaiquanbu",title:Y?(0,V.getLangMsg)("formd.leftView.key0004"):(0,V.getLangMsg)("formd.leftView.key0005")}),K().createElement(W.Icon,{prefix:"designericon",className:"".concat(ke,"-search-icon"),onClick:De,type:ie?"zhanshi":"yincang",title:ie?(0,V.getLangMsg)("formd.leftView.key0006"):(0,V.getLangMsg)("formd.leftView.key0007")})),K().createElement(W.Tree,{name:"EntityTree",treeData:Ie,height:ge,width:280,onExpand:function(e,t){var n,r=t.expanded,a=t.node.key,i=j()(e).call(e,Boolean);i=r?E()(n=[a]).call(n,(0,H.c)(i)):j()(i).call(i,(function(e){return e!==a})),Fe(i)},expandedKeys:Te,className:ke,virtual:!1,icon:_e,showIcon:!0,selectedKeys:G,onSelect:Le,ref:Ce,switcherIcon:je}))})));Xc.tabKey="entityTree",Xc.getTabName=function(){return(0,V.getLangMsg)("formd.leftView.key0001")},Xc.displayName="entity-tree";var $c=Xc,ed=n(2900),td=n.n(ed)()(),nd=function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2?arguments[2]:void 0;return new td(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{get:function(n,r,a){return(0,Qe.isUndefined)(e[r])?t||function(){}:e[r]}})},rd=(nd({},{},nd()),nd()),ad="update",id="alias",ld=new V.DelayQueueUtil([ad,id]),od=function(e){var t=e.dataRef,n=e.kdesignerApi,r=e.keywordMapping,a=e.designerContextValueRef;return function(e){var i;if(e&&e[0]){var l=e[0];l=qe()(l)?l:[l];var o=[],c=j()(i=h()(l).call(l,(function(e,i){var l,c=e.itemId,d=e.value,u=e.metaType,s=e.propertyName,f=e.alias,g=(0,Qe.isUndefined)(f)?yt()(d):f,m=k()(l=t.current[u].Items).call(l,(function(e){return e.Id===c}));if(m){var p=m[s],C=!(0,Qe.isEqual)(p,d);if(!(0,Qe.isUndefined)(g)){var v=n.current.aliasData.getAliasDataPropValue(m[r.type],s,d);(0,Qe.isEqual)(v,g)||o.push({type:m[r.type],propName:s,value:d,alias:g})}if(C)return"entitymeta"===u?a.current.entityDataApi.getBatchAction((0,V.createUpdateAction)([[c,(0,y.c)({},s,d)]])):[c,(0,y.c)({},s,d)];if("ShowParam"===s&&"EmbedFormAp"===m._Type_){var A=a.current,h=A.invokeAction;(0,(0,A.getCommonUtil)().memoryCacheApi.getPageData)([c,"showDesign"])&&h(pl,[c,"formmeta",{value:!0,item:{Id:c,_Type_:"EmbedFormAp"},form:{},context:[[m]]}])}}}))).call(i,Boolean);ld.addQueueData(c,ad),ld.addQueueData(o,id),ld.addTimer((function(){var e=ld.getQueueData(ad),t=ld.getQueueData(id);e.length&&n.current.data.batchUpdateControlPropertyValues((0,V.createUpdateAction)(e)),t.length&&S()((function(){n.current.aliasData.setAliasDataPropValue(t)})),ld.clearQueue()}))}}},cd=["targetIndex"],dd=new V.DelayQueueUtil,ud=function(e){var t=e.kdesignerApi,n=e.keywordMapping;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];S()((function(){var r=function(){dd.addTimer((function(){var e=t.current,r=dd.getQueueData();e.data.addControl((0,V.createAddAction)(r,{isAddForFilter:!0})).then((function(){r.length&&e.selection.setSelect([r[r.length-1][n.id]])})),dd.clearQueue()}))},a=function(e){var a=e[n.id],i=t.current;if(a)!function(e){var t=e,n=t.TargetIndex,a=(t.targetIndex,(0,C.c)(t,cd));isNaN(n)||(n++,a.__targetIndex__=n),dd.addQueueData([a]),r()}(e);else{var l=e.ParentId,o=e.Name,c=e.FieldType,d=e.FieldId,u=(e.Key,e._Type_);l=l||i.data.getRootId();var s=i.data.findControl(l),f=i.data.getContainerControl(s);if(!f||(0,Qe.isEmpty)(f))return;l=f[n.parentId];var g=f[n.type];if(u=u||"FieldAp","EntryEntity"===c||"SubEntryEntity"===c?u="EntryAp":"NameCombineEntity"===c&&(u="NameCombinePanelAp"),!i.meta.getControlMeta("CardEntryFieldAp")||!i.meta.canAdd("CardEntryFieldAp",g))return;u="CardEntryFieldAp";var m=i.dataFactory({type:u,parentId:l,transferData:{Name:o,FieldType:c,FieldId:d}});dd.addQueueData([m]),r()}},i=e[0],l=e[1];if(null!=l.TargetIndex&&l.TargetIndex>=0&&(i.TargetIndex=l.TargetIndex),i.ParentId=i.ParentId||l.Id,i.Type&&(i.FieldType=i.Type),"SchemeFilterColumnAp"===i._Type_||"CommonFilterColumnAp"===i._Type_){var o=i.ParentId,c=i.FieldName;t.current.data.findControlByCondition((function(e){return e.ParentId===o&&e.FieldName===c})).length||a(i)}else a(i)}))}},sd=function(e){var t=e.kdesignerApi,n=e.keywordMapping;return function(e,r,a,i){var l,o,c=t.current,d="string"==typeof r?r:r.FieldType||r[n.type],u=null===(l=c.meta.getControlMeta(d))||void 0===l?void 0:l.BaseId,s="string"==typeof e?e:e.FieldType||e[n.type],f=null===(o=c.meta.getControlMeta(s))||void 0===o?void 0:o.BaseId,g=["NameCombinePanelAp"],m=["NameSegTextField","NameSegComboField","NameSegBasedataField"],p=(0,V.getLangMsg)("formd.tips.key0001");if(w()(g).call(g,d)&&!w()(m).call(m,s))return{message:p,success:!1};if(w()(g).call(g,d)&&w()(m).call(m,s)&&e.RelatedParentId!==r.get("Id"))return{message:p,success:!1};if(e[n.id]){var C;if("EntryAp"===d){var v=["EntryFieldAp","EntryFieldGroupAp","OperationColumnAp","EntryFieldContainerAp"];return Pe()(v).call(v,s)>-1||{message:(0,V.getLangMsg)("formd.tips.key0002"),success:!1}}if(w()(C=["EntryFieldGroupAp","EntryFieldContainerAp","CardEntryRowAp","CardEntryFlexPanelAp"]).call(C,d)&&"FieldAp"===s)return{message:(0,V.getLangMsg)("formd.tips.key0002"),success:!1}}if(!i.IsContainer)return!1;var y=function(e){var t=c.meta.getControlMeta(e).NotAccept;if(t){var n=t.Ids;return null==n?void 0:w()(n).call(n,s)}}(d);if(y)return{message:(0,V.getLangMsg)("formd.tips.key0002"),success:!1};if(!(y=function(e){var t=c.meta.getControlMeta(e).Accept;if(!t)return!0;if(t){var n=t.Basetypes,r=t.Ids;return(null==r?void 0:w()(r).call(r,s))||(null==n?void 0:w()(n).call(n,f))}}(d)))return{message:(0,V.getLangMsg)("formd.tips.key0002"),success:!1};return!!(y=function(e){var t=c.meta.getControlMeta(e).AcceptParent;if(!t)return!0;if(t){var n=t.Basetypes,r=t.Ids;return(null==r?void 0:w()(r).call(r,d))||(null==n?void 0:w()(n).call(n,u))}}(s))||{message:(0,V.getLangMsg)("formd.tips.key0002"),success:!1}}},fd=["getTemplateScheme"];function gd(e,t){var n=D()(e);if(a()){var r=a()(e);t&&(r=j()(r).call(r,(function(t){return l()(e,t).enumerable}))),n.push.apply(n,r)}return n}function md(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?c()(n=gd(Object(a),!0)).call(n,(function(t){(0,y.c)(e,t,a[t])})):u()?f()(e,u()(a)):c()(r=gd(Object(a))).call(r,(function(t){m()(e,t,l()(a,t))}))}return e}var pd=function(e){e.getTemplateScheme;return md(md({},(0,C.c)(e,fd)),{},{getTemplateScheme:function(e,t){return mc().resolve()}})},Cd=function(e){var t=e.kdesignerApi;return function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[])[0],n=t.current;if(e&&n){var r=n.data.findControlByCondition((function(t){return t.ParentId===e}));r.length&&n.data.deleteControl((0,V.createDeleteAction)(h()(r).call(r,(function(e){return e.Id}))))}}},vd="EntityData",yd=function(e,t){if(t.length){var n,r=(0,Qe.groupBy)(t,"Group");Ad(e,(0,V.createUpdateAction)(h()(n=D()(r)).call(n,(function(e){var t;return[e,O()(t=r[e]).call(t,(function(e,t){return e.Items.push({Caption:t.Name,Value:t.Items,_Type_:"ComboItem"}),e}),{Items:[]})]}))))}},Ad=function(e,t){var n,r=t.value,a=e[vd].Items,i=qe()(r)?r:[r];c()(i).call(i,(function(e){var t,n=(0,q.c)(e,2),r=n[0],i=n[1],l=k()(a).call(a,(function(e){return e.Id===r}));l&&c()(t=D()(i)).call(t,(function(e){l[e]=i[e]}))}));var l=j()(n=h()(i).call(i,(function(e){var t,n=(0,q.c)(e,2),r=n[0],i=n[1];if(!Y()(t=["Items","Name"]).call(t,(function(e){return ol()(i,e)})))return null;var l=k()(a).call(a,(function(e){return e.Id===r}));return"RadioField"===(null==l?void 0:l._Type_)?l:null}))).call(n,Boolean);yd(e,l)},hd=function(){var e={getAction:function(e,t){return{type:V.ActionType.UPDATE,value:function(t){return e(t),[]},id:t}},getBatchAction:function(t,n){return e.getAction((function(e){switch(t.type){case V.ActionType.ADD:!function(e,t){var n,r=t.value,a=(t.index,e[vd].Items),i=qe()(r)?r:[r],l=h()(n=j()(i).call(i,(function(e){return"RadioGroupField"===e._Type_}))).call(n,(function(e){return e.Id})),o=0!==j()(i).call(i,(function(e){return"RadioField"===e._Type_&&!w()(l).call(l,e.Group)})).length;if(a.push.apply(a,(0,H.c)(i)),o){var c=j()(a).call(a,(function(e){return"RadioField"===e._Type_}));yd(e,c)}}(e,t);break;case V.ActionType.UPDATE:Ad(e,t);break;case V.ActionType.DELETE:!function(e,t){var n=t.value,r=e[vd].Items,a=qe()(n)?n:[n];c()(a).call(a,(function(e){var t=R()(r).call(r,(function(t){return t.Id===e}));-1!==t&&ga()(r).call(r,t,1)}))}(e,t)}}),n)}};return e},Id={FormAp:"form",BillFormAp:"form",MobileFormAp:"form",MobileBillFormAp:"form",BasedataFormAp:"form",FieldAp:"field",ButtonAp:"button",ToolbarAp:"toolbar",MToolbarAp:"toolbar",EntryAp:"entryentity",TreeViewAp:"tree",TabAp:"tab",AdvConToolbarAp:"advcontoolbar",CustomControlAp:"customcontrol",Default:"control"},Ed=function(e){var t=e.functionName,n=e.prefixCls,r=e.title,a=e.onEditClick,i=$n(n);return K().createElement("div",{className:i("action-item-container")},K().createElement("div",{className:i("top")},K().createElement("div",{className:i("title")},r),K().createElement("div",{className:i("edit-btn"),onClick:a},(0,V.getLangMsg)("formd.actionpanel.key0001"))),K().createElement("div",{className:i("bottom")},K().createElement("div",{className:i("function-name")},t)))},xd=function(e){var t=(0,_.useContext)(me),n=t.prefixCls,r=t.getKdesignerApi,a=t.onActionEditFunctionClick,i=r(),l=i.data,o=(l.getRootId,l.findControl),c=(l.addDataChangeListener,l.getSubControls,i.selection.getActiveSelectedId());(0,V.useSelectionChangeForceUpdateEffect)(i,void 0);var d=o(c),u=(d.ContainerType,d._Type_),s=(d.FieldType,(0,_.useMemo)((function(){return function(e){return{form:[{name:"didMount",desc:(0,V.getLangMsg)("formd.scripteditor.script.didmount")},{name:"willUnmount",desc:(0,V.getLangMsg)("formd.scripteditor.script.willunmount")}],field:[{name:"onValueChange",desc:(0,V.getLangMsg)("formd.scripteditor.script.onvaluechange")}],button:[{name:"onClick",desc:(0,V.getLangMsg)("formd.scripteditor.script.onclick")}],toolbar:[{name:"onItemClick",desc:(0,V.getLangMsg)("formd.scripteditor.script.onitemclick")}],entryentity:[{name:"onInit",desc:(0,V.getLangMsg)("formd.scripteditor.script.oninit")},{name:"onTableRowClick",desc:(0,V.getLangMsg)("formd.scripteditor.script.ontablerowclick")},{name:"onTableRowDoubleClick",desc:(0,V.getLangMsg)("formd.scripteditor.script.ontablerowdoubleclick")},{name:"onCellValueChange",desc:(0,V.getLangMsg)("formd.scripteditor.script.oncellvaluechange")},{name:"onSelect",desc:(0,V.getLangMsg)("formd.scripteditor.script.onselect")},{name:"onUnSelect",desc:(0,V.getLangMsg)("formd.scripteditor.script.onunselect")},{name:"onSelectAll",desc:(0,V.getLangMsg)("formd.scripteditor.script.onselectall")},{name:"onUnSelectAll",desc:(0,V.getLangMsg)("formd.scripteditor.script.onunselectall")}],tree:[{name:"onInit",desc:(0,V.getLangMsg)("formd.scripteditor.script.oninit")},{name:"onTreeNodeClick",desc:(0,V.getLangMsg)("formd.scripteditor.script.ontreenodeclick")},{name:"onTreeNodeDoubleClick",desc:(0,V.getLangMsg)("formd.scripteditor.script.ontreenodedoubleclick")},{name:"onTreeNodeCheck",desc:(0,V.getLangMsg)("formd.scripteditor.script.ontreenodecheck")}],tab:[{name:"onItemClick",desc:(0,V.getLangMsg)("formd.scripteditor.script.ontabitemclick")}],advcontoolbar:[{name:"onItemClick",desc:(0,V.getLangMsg)("formd.scripteditor.script.onitemclick")}],customcontrol:[{name:"onCustomMsgEvent",desc:(0,V.getLangMsg)("formd.scripteditor.script.oncustommsgevent")}],control:[]}[e]}(function(e){return Id[e]?Id[e]:Id.Default}(u))}),[u])),f="FieldAp"===u?d.Name:"";return K().createElement("div",{className:"".concat(n,"-action-container")},K().createElement("div",{className:"".concat(n,"-field-title")},f),null==s?void 0:h()(s).call(s,(function(e){return K().createElement(Ed,{functionName:e.name,key:e.name,title:e.desc,prefixCls:n,onEditClick:function(t){!function(e){var t={snippet:e.name};d&&(t.controlKey=d.Key,t.controlName=d.Name,t.controlType=d._Type_),null==a||a([{isInternal:!0,content:t}])}(e)}})})))};xd.tabKey="action",xd.getTabName=function(){return(0,V.getLangMsg)("formd.rightView.key0013")};var kd=xd,bd=["__forceUpdate__"];function Sd(e,t){var n=D()(e);if(a()){var r=a()(e);t&&(r=j()(r).call(r,(function(t){return l()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nd(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?c()(n=Sd(Object(a),!0)).call(n,(function(t){(0,y.c)(e,t,a[t])})):u()?f()(e,u()(a)):c()(r=Sd(Object(a))).call(r,(function(t){m()(e,t,l()(a,t))}))}return e}(0,ya.uG)();var wd=function(){},Td=K().memo(U(),(function(){return!0})),Fd=(0,_.memo)((0,_.forwardRef)((function(e,t){var n=e.data,r=void 0===n?{}:n,a=e.meta,i=void 0===a?{}:a,l=e.onData,o=e.showMessage,c=void 0===o?function(e){window.console.log("showMessage-------",e)}:o,d=e.showConfirm,u=void 0===d?function(e){V.console.log("showConfirm-------",e)}:d,s=e.handleCustomInputEditor,f=void 0===s?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];V.console.log("handleCustomInputEditor-------",t)}:s,g=e.invokeAction,m=void 0===g?function(e,t){V.console.log("invokeAction-------",e,t)}:g,A=e.baseControl,I=e.getEntityModel,x=e.commonUtil,b=void 0===x?nd({},{fixColor:function(e){return e},mergeCommonClassNames:function(){}},rd):x,N=e.getPropertyAliasValue,T=void 0===N?wd:N,M=e.invokeSaveAction,L=void 0===M?wd:M,B=e.onApi,G=void 0===B?wd:B,z=e.isDataWithMetaMode,U=void 0!==z&&z,H=e.onRootPanelMount,q=e.viewCollapseState,Z=void 0===q?{}:q,Y=e.mulLangProperty,J=e.clientParams,X=void 0===J?{}:J,$=e.lockPropsMap,te=void 0===$?{}:$,ne=e.onActionEditFunctionClick,ae=e.designerConfig,le=void 0===ae?{}:ae,oe={id:"Id",type:"_Type_",name:"Name",key:"Key",parentId:"ParentId",items:"Items",fieldType:"FieldType",EntityData:"EntityData"},ce="kdesigner-form-designer",de=(0,_.useRef)(r),ue=(0,_.useMemo)((function(){return r.entitytree}),[]),se=(0,_.useRef)(b),fe=(0,_.useRef)(null),ge=(0,_.useCallback)((function(e){return e}),[]);(0,_.useEffect)((function(){de.current=r;var e=xa(r,U);fe.current.data.resetData(e,!1),V.eventBus.emit(ia)}),[r]),(0,_.useEffect)((function(){var e,t;G(Nd(Nd({attrActions:null===(e=Me.current)||void 0===e?void 0:e.attrActions,resetPatches:null===(t=Me.current)||void 0===t||null===(t=t.dataContext)||void 0===t?void 0:t.resetPatches,setProperty:od({dataRef:de,kdesignerApi:fe,keywordMapping:oe,designerContextValueRef:we}),getKdesignerApiRef:function(){return fe},createUIElement:ud({kdesignerApi:fe,keywordMapping:oe}),getDataRef:function(){return de.current}},we.current||{}),{},{resetSideBar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=fe.current,n={toolbox:"ControlView",outline:"outline",entitytree:"entityTree"},r=h()(e).call(e,(function(e){return n[e]||e}));t.views.setViewsVisibleSetting("left")(r)},refreshEntityData:function(e){var t=e[0]||{},n=t.entitymeta,r=t.entitytree;de.current=Nd(Nd({},de.current),{},{entitymeta:n,entitytree:r}),l&&l(de.current),V.eventBus.emit(ia)},removeUIElements:Cd({kdesignerApi:fe})}))}),[]);var pe=(0,_.useMemo)((function(){var e,t;return E()(e=E()(t="https://".concat("vip.")).call(t,"kingdee.")).call(e,"com","/knowledge/specialDetail/218022218066869248")}),[]),Ce=(0,_.useMemo)((function(){var e=Ia(i,r.formmeta,{getLangMsg:se.current.getLangMsg});return b.setUiConfigCache(r.modelType,(0,V.transformMeta)(e)),e}),[]),ye=xa(r,U),Ae=(0,_.useCallback)((function(e){switch(e){case"main":return{main:so};case"left":return{outline:yo,entityTree:U?null:$c};case"right":return{property:Qo,style:Mo,layout:Wo,action:kd};default:return{}}}),[]),he=(0,_.useCallback)((function(e,t,n){"CustomeStyles"===e?V.console.log('need bos"s CodeEditWrapper'):f(e,t,n)}),[f]),Ie=(0,_.useCallback)((function(e,t,n){var r=fe.current.aliasData,a=t,i=a[oe.type];if(U&&n.isEntityData){var l=de.current.entitymeta.Items,o=k()(l).call(l,(function(e){return e.Id===a.Id}));i=(null==o?void 0:o[oe.type])||i,a=o||a}var c=S()((function(){var t,r=n.Alias,i=n.EmptyDisplay;!r||!i&&w()(t=[void 0,""]).call(t,a[e])||T(e,a,n)}));if(r.hasAliasDataPropValue(i,e,a[e])){var d=r.getAliasDataPropValue(i,e,a[e]);return d&&clearTimeout(c),d}}),[]),Ee=function(e){var t=fe.current,n=t.selection,r=t.data;if(r.getRootId()===e)return!0;var a=["FlexPanelAp","CardEntryViewAp","SubCardEntryViewAp","CardEntryFlexPanelAp","CardFlexPanelAp","AdvConChildPanelAp","SplitPanelAp","ListCardViewAp","MessageCarouselContainerAp","CardEntryFixRowAp","CardEntryRowAp","CardRowPanelAp","MessageCarouselFlexPanelAp","GridFlatPanelAp","EntryFieldContainerAp","CardEntryFixRowPanelAp"],i=n.getSelection();if(i.length>1){var l=r.findControl(i);return F()(l).call(l,(function(e){var t=r.getRealControlType(e);return w()(a).call(a,t)}))}var o=r.findControl(e),c=r.getRealControlType(o);return w()(a).call(a,c)},xe=function(e){return fe.current.data.getRootId()!==e},ke=function(e){var t=fe.current.data,n=D()(Id),r=t.findControl(e),a=t.getRealControlType(r),i=de.current,l=i.formmeta,o=i.isv,c=l.Isv;return w()(n).call(n,a)&&c===o},be=(0,_.useMemo)((function(){return hd()}),[]),Se=(0,_.useRef)(new(P())),Ne=(0,_.useRef)(0),we=(0,_.useRef)({getBaseControlByType:function(e){return A&&A[e]||En},getDataRef:function(){return de.current},getEntityTree:function(){return ue},getModel:function(){return I?Hc(I(),fe.current,(function(){return de.current.entitymeta})):rd},getKdesignerApi:function(){return fe.current},getCommonUtil:function(){return pd(se.current)},entityDataApi:be,isDataWithMetaMode:U,getForceUpdateAction:function(e){return Se.current.add(e),(0,V.createUpdateAction)([[e,{__forceUpdate__:Ne.current++}]])},prefixCls:ce,getLanguage:function(){return de.current.language},getDesignerModelType:function(){var e;return null===(e=de.current.formmeta)||void 0===e?void 0:e.ModelType},canAddControlFromEntityNode:function(e,t,n){if(1===e){var r,a=fe.current.data.findControl(n),i=fe.current.data.getContainerControl(a),l=R()(r=fe.current.data.findControlByCondition((function(e){return e.ParentId===i.Id}))).call(r,(function(e){return e.Id===a.Id}));null!=l&&(i=(0,ya.cp)(i,(function(e){e.TargetIndex=l})));var o=de.current.entitytree,c=Tc(o,t);return m("createUIElemntByEntityItem",[c,i||{}]),!0}return!1},createFormDataFromEntityData:function(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=(de.current||{}).entitymeta,l=fe.current;if(!i||!l)return{};var o="string"==typeof e?e:e.Id,c=k()(r=i.Items).call(r,(function(e){return e.Id===o})),d=l.dataFactory({type:t,parentId:n,transferData:(0,v.c)({},a,c?{Name:c.Name,FieldId:o,Key:c.Key}:{})});return{action:(0,V.createAddAction)([d],{isAddByEntity:!0}),exitEntityData:!!c,entityData:c}},queryEntityByFieldId:function(e){var t;if(!U){var n=(de.current||{}).entitymeta,r=void 0===n?{Items:[]}:n,a="string"==typeof e?e:e.Id;return k()(t=r.Items).call(t,(function(e){return e.Id===a}))}},invokeSaveAction:function(){L&&L()},invokeAction:m,getLayoutVisible:Ee,getBusinessVisible:xe,isActionTabVisible:ke,filterProperty:function(e,t){return(0,V.filterProperty)(we.current.getModel,we.current.getKdesignerApi,"formmeta")(e,t)},onRootPanelMount:H,clientParams:X,lockPropsMap:te,onActionEditFunctionClick:ne,designerConfig:le});(0,_.useEffect)((function(){we.current.lockPropsMap=te}),[te]);var Te=(0,_.useMemo)((function(){return{showMessage:c,showConfirm:u,getViews:Ae,processPropertyName:ge,keywordMapping:oe,onCustomInputClick:he,controlViewSetting:{onHelpIconClick:function(){var e;e=pe,window.open(e,"_blank")}},onViewActiveKeyChange:function(e){var t=e.position,n=e.key;"left"===t&&"entityTree"===n&&m(ia,[])},controlViewMode:"horizontal",viewSetting:{layout:[function(e){var t=fe.current;if(t.data.getRootId()===e)return!0;var n=["FlexPanelAp","CardEntryViewAp","SubCardEntryViewAp","CardEntryFlexPanelAp","CardFlexPanelAp","AdvConChildPanelAp","SplitPanelAp","ListCardViewAp","MessageCarouselContainerAp","CardEntryFixRowAp","CardEntryRowAp","CardRowPanelAp","MessageCarouselFlexPanelAp","GridFlatPanelAp","EntryFieldContainerAp","CardEntryFixRowPanelAp"],r=t.data.findControl(e);return w()(n).call(n,r._Type_)}],business:[function(e){return fe.current.data.getRootId()!==e}]},viewCollapseState:{left:Z.left,right:Z.right},filterProperty:function(e,t){return(0,V.filterProperty)(we.current.getModel,we.current.getKdesignerApi,"formmeta")(e,t)},getPropertyEditors:fc,getEditorFormatValue:Ie,preHandle:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Vc.apply(void 0,E()(t).call(t,[Nd({invokeAction:m},we.current)]))},getOutlineItemIcon:function(e){return K().createElement(W.Icon,{prefix:"designericon",type:(0,V.getControlIconMap)(e),className:"".concat(ce,"-control-icon")})},designerContextValue:we.current,canAddCallback:sd({showMessage:c,kdesignerApi:fe,keywordMapping:oe}),getValue:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Nc.apply(void 0,E()(t).call(t,[we.current]))},globalHandleChange:function(e,t,n,r,a){if(r.isEntityData){var i=(0,V.createPropertyChangeByActions)(a,t,n,n,e,fe.current.data,fe.current.getModel);return fe.current.data.batchUpdateControlPropertyValues(be.getBatchAction((0,V.createUpdateAction)([[e.Id,i]]),e.Id)),!0}return!1},getLangMsg:se.current.getLangMsg}}),[c,Ae,ge,he,fc,Ie]);V.console.log(e,Te),V.console.log("adaptorMeta",Ce),V.console.log("adaptorData",ye);var Fe=(0,_.useMemo)((function(){return{prefixCls:"kdesigner",getPrefixCls:function(e,t,n){var r;return n||(e=e||"kdesigner",t?E()(r="".concat(e,"-")).call(r,t):e)}}}),[]),Me=(0,_.useRef)(null),De=(0,_.useCallback)((function(e,t){var n,r;de.current.formmeta=Nd(Nd({},de.current.formmeta),{},{Items:h()(n=e.Items).call(n,(function(e){if(Se.current.has(e.Id)){var t=e;t.__forceUpdate__;return(0,C.c)(t,bd)}if("FlatFieldAp"===e[ee]){for(var n=e[ie],r=fe.current.data.getParentControl(e[Q]);r&&"EntryAp"!==r[ee];)r=fe.current.data.getParentControl(r[Q]);var a=r&&r[Q]||"",i=fe.current.data.findControlByCondition((function(e){if(e[ie]!==n||"EntryFieldAp"!==e[ee])return!1;if(e[re]===a)return!0;for(var t=fe.current.data.getParentControl(e[Q]);t&&"EntryAp"!==t[ee];)t=fe.current.data.getParentControl(t[Q]);return(t&&t[Q]||"")===a}));if(i.length>0){var l=i[0][Q];e=Nd(Nd({},e),{},(0,y.c)({},"relateEntryFieldId",l))}}return e}))});var a,i=O()(r=e.Items).call(r,(function(e,t){return e[t.Id]=t,e}),{});U&&(de.current.entitymeta=Nd(Nd({},de.current.entitymeta),{},{Items:h()(a=e.EntityData.Items).call(a,(function(e){var t=i[e.Id];return t?Nd(Nd({},e),{},{Key:t.Key,Name:t.Name}):e}))}));l&&l(de.current,t)}),[l]);(0,_.useEffect)((function(){var e=fe.current.data.addDataChangeListener((function(e){var t=e.value;De(t,e)}));return function(){e&&e()}}),[]),(0,_.useEffect)((function(){var e=fe.current,t=e.data.addDataChangeListener((function(t){var n,r=t.type;w()(n=[V.DataChangeEventType.Undo,V.DataChangeEventType.Redo]).call(n,r)&&e.aliasData.setAliasDataPropValue([{type:"__forceUpdat__",propName:"__forceUpdat__",value:"__forceUpdat__",alias:Ne.current++}])}));return function(){t&&t()}}),[]);var Le=(0,_.useCallback)((function(e){fe.current=Nd(Nd({},e),{},{originApi:e,selection:Nd(Nd({},e.selection),{},{getActiveSelectedId:function(){return e.selection.getActiveSelectedId()||e.data.getRootId()}}),meta:Nd(Nd({},e.meta),{},{canAdd:function(t,n){var r=e.meta.canAdd(t,n);return"object"===(0,p.c)(r)?(c(r.message),r.success):r}}),getModel:we.current.getModel})}),[]);(0,_.useEffect)((function(){var e=fe.current,t=e.selection,n=e.views,r=function(){var e,n=t.getActiveSelectedId();return j()(e=[xe(n)&&"business","style",Ee(n)&&"layout",ke(n)&&"action"]).call(e,Boolean)},a=t.addSelectChangeListener((function(e){e.value;n.setViewsVisibleSetting("right")(r())}));return n.setViewsVisibleSetting("right")(r()),function(){a&&a()}}),[]);var Pe=(0,_.useMemo)((function(){return{mulLangProperty:Y}}),[Y]);return K().createElement(K().Fragment,null,K().createElement(W.ConfigProvider,{value:Fe},K().createElement(me.Provider,{value:we.current},K().createElement(ve.Provider,{value:Pe},K().createElement(Td,{onApi:Le,ref:Me,globalConfig:Te,meta:Ce,data:ye})))))}))),Md=(0,V.ErrorBoundaryWrap)(Fd,"form-designer")},39160:function(){},68756:function(){},22280:function(){},71120:function(){},19600:function(){}}]);