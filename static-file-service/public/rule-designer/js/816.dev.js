/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkrule_designer"] = self["webpackChunkrule_designer"] || []).push([[816],{

/***/ 45816:
/*!******************!*\
  !*** ./index.js ***!
  \******************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RuleDesigner: function() { return /* reexport safe */ _src_index_tsx__WEBPACK_IMPORTED_MODULE_1__[\"default\"]; }\n/* harmony export */ });\n/* harmony import */ var _src_style_index_less__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./src/style/index.less */ 19600);\n/* harmony import */ var _src_style_index_less__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_src_style_index_less__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _src_index_tsx__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./src/index.tsx */ 90236);\n\n/* @remove-on-es-build-end */\n\n\n//# sourceURL=webpack://rule-designer/./index.js?");

/***/ }),

/***/ 98092:
/*!********************************!*\
  !*** ./src/constants/index.ts ***!
  \********************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FIELD_REGEXP: function() { return /* binding */ FIELD_REGEXP; },\n/* harmony export */   FIELD_REGEXP_G: function() { return /* binding */ FIELD_REGEXP_G; },\n/* harmony export */   NODE_SELECTION: function() { return /* binding */ NODE_SELECTION; },\n/* harmony export */   OPERATION_FILTER_LIST: function() { return /* binding */ OPERATION_FILTER_LIST; }\n/* harmony export */ });\nvar NODE_SELECTION = 'node-selection';\nvar OPERATION_FILTER_LIST = ['(', ')', '()', 'Backspace', 'CLR'];\n\n// export const DEFAULT_RULE_NAME = '未命名规则'\nvar FIELD_REGEXP = /{{Field id=\"([^\"]+)\" text=\"([^\"]+)\"}}/; // 这两个要保持一致\nvar FIELD_REGEXP_G = /{{Field id=\"([^\"]+)\" text=\"([^\"]+)\"}}/g; // 这两个要保持一致\n\n//# sourceURL=webpack://rule-designer/./src/constants/index.ts?");

/***/ }),

/***/ 90115:
/*!******************************!*\
  !*** ./src/context/index.ts ***!
  \******************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DesignerContext: function() { return /* binding */ DesignerContext; },\n/* harmony export */   FlowViewContext: function() { return /* binding */ FlowViewContext; }\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ 43400);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n\n\n// 设计器context，用于顶层向下传入数据\n\nvar DesignerContext = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createContext({});\nDesignerContext.displayName = 'DesignerContext';\nvar FlowViewContext = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createContext({});\nFlowViewContext.displayName = 'FlowViewContext';\n\n//# sourceURL=webpack://rule-designer/./src/context/index.ts?");

/***/ }),

/***/ 11176:
/*!*************************************!*\
  !*** ./src/controls/ActionNode.tsx ***!
  \*************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_corejs3_helpers_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/extends */ 2664);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/array/is-array */ 12388);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ 43400);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react_flow_renderer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-flow-renderer */ 98752);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! designer_base/Main */ 18040);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(designer_base_Main__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../context */ 90115);\n/* harmony import */ var _Handle__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Handle */ 7260);\n/* harmony import */ var _hooks_useNodeClick__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../hooks/useNodeClick */ 56828);\n/* harmony import */ var _hooks_useSelected__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../hooks/useSelected */ 88840);\n/* harmony import */ var _hooks_useDragDrop__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../hooks/useDragDrop */ 52708);\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! classnames */ 71252);\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var _common_AddIcon__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./common/AddIcon */ 92516);\n\n\n/*\n * @Author: wbw\n * @Email: wbw@kingdee.com\n * @Date: 2022-04-02 09:53:57\n * @Last Modified by: fjr\n * @LastEditTime: 2022-04-06 13:51:56\n * @Description: ...\n */\n\n\n\n\n\n\n\n\n\n\nvar ActionNode = function ActionNode(_ref) {\n  var _data$size, _data$size2;\n  var data = _ref.data,\n    id = _ref.id;\n  var description = data.Description,\n    ParentId = data.ParentId,\n    Id = data.Id;\n  var _useContext = (0,react__WEBPACK_IMPORTED_MODULE_2__.useContext)(_context__WEBPACK_IMPORTED_MODULE_5__.DesignerContext),\n    getPrefixCls = _useContext.getPrefixCls,\n    prefixCls = _useContext.prefixCls,\n    getKdesignerApi = _useContext.getKdesignerApi,\n    isLockRule = _useContext.isLockRule;\n  var kdesignerApi = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(function () {\n    return getKdesignerApi();\n  }, []);\n  var dataContext = kdesignerApi.data;\n  var selectionApi = kdesignerApi.selection;\n  var locked = isLockRule();\n  var rootClass = getPrefixCls && getPrefixCls(prefixCls, 'controls-action-node');\n  var dragEventProps = locked ? {} : (0,_hooks_useDragDrop__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(id, undefined, undefined);\n  var isSelected = (0,_hooks_useSelected__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(id);\n  var onClick = (0,_hooks_useNodeClick__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(id);\n  var handleItemClick = function handleItemClick(service, addNodeType) {\n    var _ref2 = service || {},\n      id = _ref2.id,\n      title = _ref2.title,\n      checked = _ref2.checked;\n    var uid = (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_4__.createUUid)();\n    var actionNodeData = {\n      Type: id === 'TakeBaseProAction' ? service === null || service === void 0 ? void 0 : service.metaClass : id,\n      Name: title,\n      ParentId: addNodeType === 'pre' ? ParentId : Id,\n      Id: uid,\n      RET: _babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_1___default()(checked) ? checked.join(',') : checked\n    };\n    dataContext.addControl((0,designer_base_Main__WEBPACK_IMPORTED_MODULE_4__.createAddAction)(actionNodeData)).then(function () {\n      selectionApi.setSelect([uid]);\n    });\n  };\n\n  // 选中 && 非锁定\n  var showAddIcon = isSelected && !locked;\n  var targetStyle = !locked ? isSelected ? _Handle__WEBPACK_IMPORTED_MODULE_6__.targetHandleHorizontalStyle : _Handle__WEBPACK_IMPORTED_MODULE_6__.targetHandleStyleWithArrow : _Handle__WEBPACK_IMPORTED_MODULE_6__.targetHandleStyleWithArrow;\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\", {\n    className: rootClass\n  }, showAddIcon && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_common_AddIcon__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n    className: \"\".concat(rootClass, \"-pre-add\"),\n    onClick: function onClick(key) {\n      return handleItemClick(key, 'pre');\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\", (0,_babel_runtime_corejs3_helpers_extends__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n    className: classnames__WEBPACK_IMPORTED_MODULE_10___default()(\"\".concat(rootClass, \"-node\"), {\n      'node-selection': isSelected\n    }),\n    style: {\n      width: (_data$size = data.size) === null || _data$size === void 0 ? void 0 : _data$size.width,\n      height: (_data$size2 = data.size) === null || _data$size2 === void 0 ? void 0 : _data$size2.height\n    },\n    onMouseDown: onClick\n  }, dragEventProps), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(react_flow_renderer__WEBPACK_IMPORTED_MODULE_3__.Handle, {\n    type: \"target\",\n    position: react_flow_renderer__WEBPACK_IMPORTED_MODULE_3__.Position.Left,\n    id: \"a\",\n    style: targetStyle\n  }, !showAddIcon && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_Handle__WEBPACK_IMPORTED_MODULE_6__.TargetHandle, {\n    prefixCls: prefixCls\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(react_flow_renderer__WEBPACK_IMPORTED_MODULE_3__.Handle, {\n    type: \"source\",\n    position: react_flow_renderer__WEBPACK_IMPORTED_MODULE_3__.Position.Right,\n    id: \"b\",\n    style: _Handle__WEBPACK_IMPORTED_MODULE_6__.sourceHandleHorizontalStyle\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\", {\n    className: \"\".concat(rootClass, \"-label\")\n  }, description)), showAddIcon && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_common_AddIcon__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n    className: \"\".concat(rootClass, \"-next-add\"),\n    onClick: function onClick(key) {\n      return handleItemClick(key, 'next');\n    }\n  }));\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = ((0,designer_base_Main__WEBPACK_IMPORTED_MODULE_4__.ErrorBoundaryWrap)(ActionNode, 'flow-action-node'));\n\n//# sourceURL=webpack://rule-designer/./src/controls/ActionNode.tsx?");

/***/ }),

/***/ 53620:
/*!**********************************!*\
  !*** ./src/controls/AddNode.tsx ***!
  \**********************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/array/is-array */ 12388);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ 43400);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_flow_renderer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-flow-renderer */ 98752);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! designer_base/Main */ 18040);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(designer_base_Main__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../context */ 90115);\n/* harmony import */ var _Handle__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Handle */ 7260);\n/* harmony import */ var _common_AddIcon__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./common/AddIcon */ 92516);\n\n\n\n\n\n\n\nvar AddNode = function AddNode(_ref) {\n  var _data$size, _data$size2;\n  var data = _ref.data;\n  var _useContext = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(_context__WEBPACK_IMPORTED_MODULE_4__.DesignerContext),\n    getPrefixCls = _useContext.getPrefixCls,\n    prefixCls = _useContext.prefixCls,\n    getKdesignerApi = _useContext.getKdesignerApi,\n    isLockRule = _useContext.isLockRule;\n  if (isLockRule()) return null;\n  var kdesignerApi = (0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)(function () {\n    return getKdesignerApi();\n  }, []);\n  var dataContext = kdesignerApi.data;\n  var selectionApi = kdesignerApi.selection;\n  var rootClass = getPrefixCls && getPrefixCls(prefixCls, 'controls-add-node');\n  var ParentId = data.ParentId;\n  var handleItemClick = function handleItemClick(service) {\n    var _ref2 = service || {},\n      id = _ref2.metaClass,\n      title = _ref2.title,\n      checked = _ref2.checked;\n    var uid = (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_3__.createUUid)();\n    var actionNodeData = {\n      Type: id === 'TakeBaseProAction' ? service === null || service === void 0 ? void 0 : service.metaClass : id,\n      Name: title,\n      ParentId: ParentId,\n      Id: uid,\n      Ret: _babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_0___default()(checked) ? checked.join(',') : checked\n    };\n    dataContext.addControl((0,designer_base_Main__WEBPACK_IMPORTED_MODULE_3__.createAddAction)(actionNodeData)).then(function () {\n      selectionApi.setSelect([uid]);\n    });\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", {\n    className: rootClass,\n    style: {\n      width: (_data$size = data.size) === null || _data$size === void 0 ? void 0 : _data$size.width,\n      height: (_data$size2 = data.size) === null || _data$size2 === void 0 ? void 0 : _data$size2.height\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(react_flow_renderer__WEBPACK_IMPORTED_MODULE_2__.Handle, {\n    type: \"target\",\n    position: react_flow_renderer__WEBPACK_IMPORTED_MODULE_2__.Position.Left,\n    id: \"addTarget\",\n    style: _Handle__WEBPACK_IMPORTED_MODULE_5__.targetHandleHorizontalStyle\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_common_AddIcon__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n    onClick: handleItemClick\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(react_flow_renderer__WEBPACK_IMPORTED_MODULE_2__.Handle, {\n    type: \"source\",\n    position: react_flow_renderer__WEBPACK_IMPORTED_MODULE_2__.Position.Right,\n    id: \"addSource\",\n    style: _Handle__WEBPACK_IMPORTED_MODULE_5__.sourceHandleHorizontalStyle\n  }));\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = ((0,designer_base_Main__WEBPACK_IMPORTED_MODULE_3__.ErrorBoundaryWrap)(AddNode, 'flow-action-node'));\n\n//# sourceURL=webpack://rule-designer/./src/controls/AddNode.tsx?");

/***/ }),

/***/ 15576:
/*!***************************************!*\
  !*** ./src/controls/AllRulesView.tsx ***!
  \***************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/keys */ 47976);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols */ 39448);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/filter */ 18860);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor */ 55748);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors */ 54120);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-properties */ 63808);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-property */ 45040);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _babel_runtime_corejs3_helpers_extends__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/extends */ 2664);\n/* harmony import */ var _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/defineProperty */ 30112);\n/* harmony import */ var _babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/slicedToArray */ 95992);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/for-each */ 7312);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ 75984);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_reduce__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/reduce */ 45076);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_reduce__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_reduce__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/concat */ 81744);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! react */ 43400);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var _kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @kdcloudjs/kdesign */ 54116);\n/* harmony import */ var _kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var react_flow_renderer__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! react-flow-renderer */ 98752);\n/* harmony import */ var _RuleNode__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./RuleNode */ 45408);\n/* harmony import */ var _ConditionNode__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./ConditionNode */ 284);\n/* harmony import */ var _JudgeNode__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./JudgeNode */ 62796);\n/* harmony import */ var _TFNode__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./TFNode */ 13948);\n/* harmony import */ var _ActionNode__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./ActionNode */ 11176);\n/* harmony import */ var _RetNode__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./RetNode */ 4333);\n/* harmony import */ var _EndNode__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./EndNode */ 86716);\n/* harmony import */ var dagre__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! dagre */ 84912);\n/* harmony import */ var dagre__WEBPACK_IMPORTED_MODULE_24___default = /*#__PURE__*/__webpack_require__.n(dagre__WEBPACK_IMPORTED_MODULE_24__);\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../context */ 90115);\n/* harmony import */ var _utils_convert_data__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../utils/convert-data */ 13908);\n/* harmony import */ var _utils_layout__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ../utils/layout */ 21920);\n/* harmony import */ var _utils_nodeType__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ../utils/nodeType */ 1300);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! designer_base/Main */ 18040);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_29___default = /*#__PURE__*/__webpack_require__.n(designer_base_Main__WEBPACK_IMPORTED_MODULE_29__);\n\n\n\n\n\n\n\n\n\n\nfunction ownKeys(e, r) { var t = _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0___default()(e); if ((_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1___default())) { var o = _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1___default()(e); r && (o = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_2___default()(o).call(o, function (r) { return _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_3___default()(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var _context3, _context4; var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_10___default()(_context3 = ownKeys(Object(t), !0)).call(_context3, function (r) { (0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(e, r, t[r]); }) : (_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_4___default()) ? _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_5___default()(e, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_4___default()(t)) : _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_10___default()(_context4 = ownKeys(Object(t))).call(_context4, function (r) { _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_6___default()(e, r, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_3___default()(t, r)); }); } return e; }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar CUSTOM_NODES = {\n  RuleNode: _RuleNode__WEBPACK_IMPORTED_MODULE_17__[\"default\"],\n  ConditionNode: _ConditionNode__WEBPACK_IMPORTED_MODULE_18__[\"default\"],\n  JudgeNode: _JudgeNode__WEBPACK_IMPORTED_MODULE_19__[\"default\"],\n  TrueNode: _TFNode__WEBPACK_IMPORTED_MODULE_20__.TrueNode,\n  FalseNode: _TFNode__WEBPACK_IMPORTED_MODULE_20__.FalseNode,\n  EndNode: _EndNode__WEBPACK_IMPORTED_MODULE_23__[\"default\"],\n  ActionNode: _ActionNode__WEBPACK_IMPORTED_MODULE_21__[\"default\"],\n  RetNode: _RetNode__WEBPACK_IMPORTED_MODULE_22__[\"default\"]\n};\nvar ModalBody = function ModalBody(_ref) {\n  var visible = _ref.visible;\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_14__.useState)([]),\n    _useState2 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(_useState, 2),\n    layoutElements = _useState2[0],\n    setlayoutElements = _useState2[1];\n  var _useState3 = (0,react__WEBPACK_IMPORTED_MODULE_14__.useState)('LR'),\n    _useState4 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(_useState3, 1),\n    layoutDirection = _useState4[0];\n  var _useState5 = (0,react__WEBPACK_IMPORTED_MODULE_14__.useState)(true),\n    _useState6 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(_useState5, 2),\n    panOnScroll = _useState6[0],\n    setPanOnScroll = _useState6[1];\n  var _useContext = (0,react__WEBPACK_IMPORTED_MODULE_14__.useContext)(_context__WEBPACK_IMPORTED_MODULE_25__.DesignerContext),\n    getKdesignerApi = _useContext.getKdesignerApi,\n    getPrefixCls = _useContext.getPrefixCls,\n    prefixCls = _useContext.prefixCls;\n  var kdesignerApi = (0,react__WEBPACK_IMPORTED_MODULE_14__.useMemo)(function () {\n    return getKdesignerApi();\n  }, []);\n  var dataContext = kdesignerApi.data,\n    selectionContext = kdesignerApi.selection;\n  var className = getPrefixCls && getPrefixCls(prefixCls, 'all-rules-view-body');\n  var instanceRef = (0,react__WEBPACK_IMPORTED_MODULE_14__.useRef)();\n  var elementsRef = (0,react__WEBPACK_IMPORTED_MODULE_14__.useRef)([]);\n  var needFitViewFlag = (0,react__WEBPACK_IMPORTED_MODULE_14__.useRef)(false);\n  var onLayout = function onLayout(direction) {\n    var _context, _context2;\n    var dagreGraph = new (dagre__WEBPACK_IMPORTED_MODULE_24___default().graphlib).Graph();\n    dagreGraph.setDefaultEdgeLabel(function () {\n      return {};\n    });\n    dagreGraph.setGraph({\n      rankdir: direction,\n      nodesep: 30,\n      ranksep: 50,\n      marginx: 100,\n      align: 'UL'\n    });\n    _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_10___default()(_context = elementsRef.current).call(_context, function (el) {\n      if ((0,react_flow_renderer__WEBPACK_IMPORTED_MODULE_16__.isNode)(el)) {\n        el.data.size = (0,_utils_layout__WEBPACK_IMPORTED_MODULE_27__.getNodeSize)(el);\n        dagreGraph.setNode(el.id, _objectSpread(_objectSpread({}, el.data.size), {}, {\n          shape: 'rect'\n        }));\n      } else {\n        dagreGraph.setEdge(el.source, el.target);\n      }\n    });\n    dagre__WEBPACK_IMPORTED_MODULE_24___default().layout(dagreGraph);\n    // 转成 ReactFlow 的元素\n    var _layoutElements = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_11___default()(_context2 = elementsRef.current).call(_context2, function (el) {\n      if ((0,react_flow_renderer__WEBPACK_IMPORTED_MODULE_16__.isNode)(el)) {\n        var nodeWithPosition = dagreGraph.node(el.id);\n        el.targetPosition = react_flow_renderer__WEBPACK_IMPORTED_MODULE_16__.Position.Left;\n        el.sourcePosition = react_flow_renderer__WEBPACK_IMPORTED_MODULE_16__.Position.Right;\n        el.position = {\n          x: nodeWithPosition.x - nodeWithPosition.width / 2,\n          y: nodeWithPosition.y + (36 - nodeWithPosition.height) / 2\n        };\n        // el.position = getAdjustedNodePosition(nodeElements, nodeWithPosition, el.data.level, isHorizontal)\n      }\n      return el;\n    });\n    setlayoutElements(_layoutElements);\n  };\n  var onLoad = function onLoad(reactFlowInstance) {\n    needFitViewFlag.current = true;\n    onLayout('LR');\n    instanceRef.current = reactFlowInstance;\n  };\n  var dataChangeListenerCallback = (0,react__WEBPACK_IMPORTED_MODULE_14__.useCallback)(function (dataChangeEvent) {\n    var ruleNodes = dataContext.findControlByCondition(function (item) {\n      return item.Type === _utils_nodeType__WEBPACK_IMPORTED_MODULE_28__.RULE_NODE_TYPE;\n    });\n    var data = _babel_runtime_corejs3_core_js_stable_instance_reduce__WEBPACK_IMPORTED_MODULE_12___default()(ruleNodes).call(ruleNodes, function (controls, item) {\n      return _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_13___default()(controls).call(controls, dataContext.getAllSubControls(item.Id));\n    }, []);\n    elementsRef.current = (0,_utils_convert_data__WEBPACK_IMPORTED_MODULE_26__.convertDataToAllRulesElements)(data, dataContext);\n    needFitViewFlag.current = false;\n    onLayout(layoutDirection);\n  }, [layoutDirection]);\n  (0,react__WEBPACK_IMPORTED_MODULE_14__.useEffect)(function () {\n    needFitViewFlag.current = true;\n    onLayout(layoutDirection);\n    var removeDataChangeListener = dataContext.addDataChangeListener(dataChangeListenerCallback);\n    return function () {\n      removeDataChangeListener();\n    };\n  }, [layoutDirection]);\n  (0,react__WEBPACK_IMPORTED_MODULE_14__.useEffect)(function () {\n    if (layoutElements.length > 0) {\n      var _instanceRef$current$, _instanceRef$current;\n      var zoom = (_instanceRef$current$ = instanceRef.current.toObject()) === null || _instanceRef$current$ === void 0 ? void 0 : _instanceRef$current$.zoom;\n      (_instanceRef$current = instanceRef.current) === null || _instanceRef$current === void 0 || _instanceRef$current.fitView({\n        minZoom: zoom,\n        maxZoom: zoom\n      });\n    }\n  }, [layoutElements]);\n  (0,react__WEBPACK_IMPORTED_MODULE_14__.useEffect)(function () {\n    if (visible) {\n      needFitViewFlag.current = true;\n      var ruleNodes = dataContext.findControlByCondition(function (item) {\n        return item.Type === _utils_nodeType__WEBPACK_IMPORTED_MODULE_28__.RULE_NODE_TYPE;\n      });\n      var data = _babel_runtime_corejs3_core_js_stable_instance_reduce__WEBPACK_IMPORTED_MODULE_12___default()(ruleNodes).call(ruleNodes, function (controls, item) {\n        return _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_13___default()(controls).call(controls, dataContext.getAllSubControls(item.Id));\n      }, []);\n      elementsRef.current = (0,_utils_convert_data__WEBPACK_IMPORTED_MODULE_26__.convertDataToAllRulesElements)(data, dataContext);\n      onLayout(layoutDirection);\n    }\n  }, [visible]);\n  var onNodeMouseEnter = function onNodeMouseEnter() {\n    setPanOnScroll(false);\n  };\n  var onNodeMouseLeave = function onNodeMouseLeave() {\n    setPanOnScroll(true);\n  };\n  var reactFlowConfig = (0,_utils_layout__WEBPACK_IMPORTED_MODULE_27__.getAllRulesFlowConfig)();\n  var flowViewContextValue = (0,react__WEBPACK_IMPORTED_MODULE_14__.useMemo)(function () {\n    return {\n      canClick: false\n    };\n  }, []);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_14___default().createElement(_context__WEBPACK_IMPORTED_MODULE_25__.FlowViewContext.Provider, {\n    value: flowViewContextValue\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_14___default().createElement(\"div\", {\n    className: className\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_14___default().createElement(react_flow_renderer__WEBPACK_IMPORTED_MODULE_16__.ReactFlowProvider, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_14___default().createElement(react_flow_renderer__WEBPACK_IMPORTED_MODULE_16__[\"default\"], (0,_babel_runtime_corejs3_helpers_extends__WEBPACK_IMPORTED_MODULE_7__[\"default\"])({\n    elements: layoutElements,\n    nodeTypes: CUSTOM_NODES,\n    onLoad: onLoad,\n    panOnScroll: panOnScroll,\n    onNodeMouseEnter: onNodeMouseEnter,\n    onNodeMouseLeave: onNodeMouseLeave\n  }, reactFlowConfig)))));\n};\n\n/**\n * 查看完整视图\n * @param props\n * @returns\n */\nvar AllRulesView = function AllRulesView(_ref2) {\n  var visible = _ref2.visible,\n    setVisible = _ref2.setVisible;\n  var _useContext2 = (0,react__WEBPACK_IMPORTED_MODULE_14__.useContext)(_context__WEBPACK_IMPORTED_MODULE_25__.DesignerContext),\n    getPrefixCls = _useContext2.getPrefixCls,\n    prefixCls = _useContext2.prefixCls;\n  var rootClass = getPrefixCls && getPrefixCls(prefixCls, 'all-rules-view');\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_14___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_15__.Modal, {\n    body: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_14___default().createElement(ModalBody, {\n      visible: visible\n    }),\n    titleIcon: null,\n    className: rootClass,\n    footer: null,\n    maskClosable: false,\n    width: 1074,\n    height: 520,\n    title: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_29__.getLangMsg)('ruled.allRulesView.key0001'),\n    closable: true,\n    destroyOnClose: true,\n    onCancel: function onCancel() {\n      return setVisible(false);\n    },\n    onOk: function onOk() {\n      return setVisible(false);\n    },\n    mask: true,\n    visible: visible\n  });\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (AllRulesView);\n\n//# sourceURL=webpack://rule-designer/./src/controls/AllRulesView.tsx?");

/***/ }),

/***/ 284:
/*!****************************************!*\
  !*** ./src/controls/ConditionNode.tsx ***!
  \****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ 43400);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_flow_renderer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-flow-renderer */ 98752);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! designer_base/Main */ 18040);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(designer_base_Main__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../context */ 90115);\n/* harmony import */ var _Handle__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Handle */ 7260);\n/* harmony import */ var _hooks_useNodeClick__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../hooks/useNodeClick */ 56828);\n/* harmony import */ var _hooks_useSelected__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../hooks/useSelected */ 88840);\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! classnames */ 71252);\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_7__);\n\n\n\n\n\n\n\n\nvar ConditionNode = function ConditionNode(_ref) {\n  var _data$size, _data$size2;\n  var data = _ref.data,\n    id = _ref.id;\n  var name = data.PreDescription;\n  var _useContext = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_context__WEBPACK_IMPORTED_MODULE_3__.DesignerContext),\n    getPrefixCls = _useContext.getPrefixCls,\n    prefixCls = _useContext.prefixCls;\n  var rootClass = getPrefixCls && getPrefixCls(prefixCls, 'controls-condition-node');\n  var isSelected = (0,_hooks_useSelected__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(id);\n  var onClick = (0,_hooks_useNodeClick__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(id);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: classnames__WEBPACK_IMPORTED_MODULE_7___default()(rootClass, {\n      'node-selection': isSelected\n    }),\n    style: {\n      width: (_data$size = data.size) === null || _data$size === void 0 ? void 0 : _data$size.width,\n      height: (_data$size2 = data.size) === null || _data$size2 === void 0 ? void 0 : _data$size2.height\n    },\n    onClick: onClick\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(react_flow_renderer__WEBPACK_IMPORTED_MODULE_1__.Handle, {\n    type: \"target\",\n    position: react_flow_renderer__WEBPACK_IMPORTED_MODULE_1__.Position.Left,\n    id: \"a\",\n    style: _Handle__WEBPACK_IMPORTED_MODULE_4__.targetHandleStyleWithArrow\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_Handle__WEBPACK_IMPORTED_MODULE_4__.TargetHandle, {\n    prefixCls: prefixCls\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(react_flow_renderer__WEBPACK_IMPORTED_MODULE_1__.Handle, {\n    type: \"source\",\n    position: react_flow_renderer__WEBPACK_IMPORTED_MODULE_1__.Position.Right,\n    id: \"b\",\n    style: _Handle__WEBPACK_IMPORTED_MODULE_4__.sourceHandleHorizontalStyle\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: \"\".concat(rootClass, \"-label\")\n  }, name));\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = ((0,designer_base_Main__WEBPACK_IMPORTED_MODULE_2__.ErrorBoundaryWrap)(ConditionNode, 'flow-condition-node'));\n\n//# sourceURL=webpack://rule-designer/./src/controls/ConditionNode.tsx?");

/***/ }),

/***/ 86716:
/*!**********************************!*\
  !*** ./src/controls/EndNode.tsx ***!
  \**********************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ 43400);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_flow_renderer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-flow-renderer */ 98752);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! designer_base/Main */ 18040);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(designer_base_Main__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../context */ 90115);\n/* harmony import */ var _Handle__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Handle */ 7260);\n\n\n\n\n\nvar EndNode = function EndNode(_ref) {\n  var _data$size, _data$size2;\n  var data = _ref.data,\n    id = _ref.id;\n  var _useContext = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_context__WEBPACK_IMPORTED_MODULE_3__.DesignerContext),\n    getPrefixCls = _useContext.getPrefixCls,\n    prefixCls = _useContext.prefixCls;\n  var rootClass = getPrefixCls && getPrefixCls(prefixCls, 'controls-end-node');\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: rootClass,\n    style: {\n      width: (_data$size = data.size) === null || _data$size === void 0 ? void 0 : _data$size.width,\n      height: (_data$size2 = data.size) === null || _data$size2 === void 0 ? void 0 : _data$size2.height\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(react_flow_renderer__WEBPACK_IMPORTED_MODULE_1__.Handle, {\n    type: \"target\",\n    position: react_flow_renderer__WEBPACK_IMPORTED_MODULE_1__.Position.Left,\n    id: \"a\",\n    style: _Handle__WEBPACK_IMPORTED_MODULE_4__.targetHandleStyleWithArrow\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_Handle__WEBPACK_IMPORTED_MODULE_4__.TargetHandle, {\n    prefixCls: prefixCls\n  })));\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = ((0,designer_base_Main__WEBPACK_IMPORTED_MODULE_2__.ErrorBoundaryWrap)(EndNode, 'flow-end-node'));\n\n//# sourceURL=webpack://rule-designer/./src/controls/EndNode.tsx?");

/***/ }),

/***/ 7260:
/*!*********************************!*\
  !*** ./src/controls/Handle.tsx ***!
  \*********************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TargetHandle: function() { return /* binding */ TargetHandle; },\n/* harmony export */   sourceHandleHorizontalStyle: function() { return /* binding */ sourceHandleHorizontalStyle; },\n/* harmony export */   sourceHandleVerticalStyle: function() { return /* binding */ sourceHandleVerticalStyle; },\n/* harmony export */   targetHandleHorizontalStyle: function() { return /* binding */ targetHandleHorizontalStyle; },\n/* harmony export */   targetHandleStyle: function() { return /* binding */ targetHandleStyle; },\n/* harmony export */   targetHandleStyleWithArrow: function() { return /* binding */ targetHandleStyleWithArrow; }\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ 43400);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n\nvar TargetHandle = function TargetHandle(_ref) {\n  var prefixCls = _ref.prefixCls;\n  var handleClass = \"\".concat(prefixCls, \"-target-handle\");\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: handleClass\n  });\n};\nvar targetHandleHorizontalStyle = {\n  position: 'absolute',\n  cursor: 'auto',\n  background: '#999',\n  width: '1px',\n  height: '1px',\n  border: 'none',\n  boderRadius: '0',\n  left: 0\n};\nvar targetHandleStyleWithArrow = {\n  position: 'absolute',\n  cursor: 'auto',\n  background: '#999',\n  width: '1px',\n  height: '1px',\n  border: 'none',\n  boderRadius: '0',\n  left: '-8px'\n};\nvar sourceHandleHorizontalStyle = {\n  position: 'absolute',\n  cursor: 'auto',\n  background: '#999',\n  width: '1px',\n  height: '1px',\n  border: 'none',\n  boderRadius: '0',\n  right: 0\n};\nvar sourceHandleVerticalStyle = {\n  cursor: 'auto',\n  background: '#999',\n  width: '1px',\n  height: '5px',\n  border: 'none',\n  boderRadius: '0'\n};\nvar targetHandleStyle = {\n  cursor: 'auto',\n  background: '#999',\n  width: '1px',\n  height: '1px',\n  border: 'none',\n  boderRadius: '0'\n};\n\n//# sourceURL=webpack://rule-designer/./src/controls/Handle.tsx?");

/***/ }),

/***/ 62796:
/*!************************************!*\
  !*** ./src/controls/JudgeNode.tsx ***!
  \************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_corejs3_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/objectWithoutProperties */ 28220);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/for-each */ 7312);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ 43400);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react_flow_renderer__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-flow-renderer */ 98752);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! designer_base/Main */ 18040);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(designer_base_Main__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../context */ 90115);\n/* harmony import */ var _Handle__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Handle */ 7260);\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils */ 63612);\n\nvar _excluded = [\"data\", \"id\"];\n\n\n\n\n\n\n\nvar checkFalseNodeExist = function checkFalseNodeExist(entityData, activeTreeId) {\n  if (!entityData) return true;\n  var isExistFalseNode = true;\n  entityData === null || entityData === void 0 || _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_1___default()(entityData).call(entityData, function (item) {\n    if (activeTreeId === item.Id && !(0,_utils__WEBPACK_IMPORTED_MODULE_7__.existFalseNode)(item._Type_)) {\n      isExistFalseNode = false;\n    }\n  });\n  return isExistFalseNode;\n};\nvar JudgeNode = function JudgeNode(_ref) {\n  var _data$size, _data$size2;\n  var data = _ref.data,\n    id = _ref.id,\n    other = (0,_babel_runtime_corejs3_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_ref, _excluded);\n  var _useContext = (0,react__WEBPACK_IMPORTED_MODULE_2__.useContext)(_context__WEBPACK_IMPORTED_MODULE_5__.DesignerContext),\n    getPrefixCls = _useContext.getPrefixCls,\n    prefixCls = _useContext.prefixCls,\n    getRulesNodes = _useContext.getRulesNodes,\n    activeRuleNodeId = _useContext.activeRuleNodeId;\n  var rootClass = getPrefixCls && getPrefixCls(prefixCls, 'controls-judge-node');\n  var entityTreeData = getRulesNodes();\n  // 如果是卡片是不需要falsenode\n  var isExistFalseNode = checkFalseNodeExist(entityTreeData, activeRuleNodeId);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\", {\n    className: rootClass,\n    style: {\n      width: (_data$size = data.size) === null || _data$size === void 0 ? void 0 : _data$size.width,\n      height: (_data$size2 = data.size) === null || _data$size2 === void 0 ? void 0 : _data$size2.height\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(react_flow_renderer__WEBPACK_IMPORTED_MODULE_3__.Handle, {\n    type: \"target\",\n    position: react_flow_renderer__WEBPACK_IMPORTED_MODULE_3__.Position.Left,\n    id: \"a\",\n    style: _Handle__WEBPACK_IMPORTED_MODULE_6__.targetHandleStyleWithArrow\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_Handle__WEBPACK_IMPORTED_MODULE_6__.TargetHandle, {\n    prefixCls: prefixCls\n  })), isExistFalseNode && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(react_flow_renderer__WEBPACK_IMPORTED_MODULE_3__.Handle, {\n    type: \"source\",\n    position: react_flow_renderer__WEBPACK_IMPORTED_MODULE_3__.Position.Bottom,\n    id: \"FalseNode\",\n    style: _Handle__WEBPACK_IMPORTED_MODULE_6__.sourceHandleVerticalStyle\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(react_flow_renderer__WEBPACK_IMPORTED_MODULE_3__.Handle, {\n    type: \"source\",\n    position: react_flow_renderer__WEBPACK_IMPORTED_MODULE_3__.Position.Right,\n    id: \"TrueNode\",\n    style: _Handle__WEBPACK_IMPORTED_MODULE_6__.sourceHandleHorizontalStyle\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\", {\n    className: \"\".concat(rootClass, \"-label\"),\n    title: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_4__.getLangMsg)('ruled.judgeNode.key0001')\n  }, (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_4__.getLangMsg)('ruled.judgeNode.key0001')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"svg\", {\n    width: \"100%\",\n    height: \"100%\",\n    version: \"1.1\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    style: {\n      overflow: 'unset'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"polygon\", {\n    points: \"0,18 31,0 62,18 31,36\",\n    style: {\n      fill: '#fafafa',\n      stroke: '#999',\n      strokeWidth: 1\n    }\n  })));\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = ((0,designer_base_Main__WEBPACK_IMPORTED_MODULE_4__.ErrorBoundaryWrap)(JudgeNode, 'flow-judge-node'));\n\n//# sourceURL=webpack://rule-designer/./src/controls/JudgeNode.tsx?");

/***/ }),

/***/ 5660:
/*!*************************************!*\
  !*** ./src/controls/NavToolBar.tsx ***!
  \*************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/defineProperty */ 30112);\n/* harmony import */ var _babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/slicedToArray */ 95992);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/concat */ 81744);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ 43400);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! designer_base/Main */ 18040);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(designer_base_Main__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @kdcloudjs/kdesign */ 54116);\n/* harmony import */ var _kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! classnames */ 71252);\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../context */ 90115);\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../utils */ 63612);\n/* harmony import */ var _AllRulesView__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./AllRulesView */ 15576);\n\n\n\n\n\n\n\n\n\n\n\nvar isMacOS = (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_4__.isMac)();\nvar prefix = 'rule-designer';\nvar navToolPrefixCls = prefix + '-node-nav-tool';\nvar NavToolBar = function NavToolBar() {\n  var _context, _context2;\n  var _useContext = (0,react__WEBPACK_IMPORTED_MODULE_3__.useContext)(_context__WEBPACK_IMPORTED_MODULE_7__.DesignerContext),\n    getKdesignerApi = _useContext.getKdesignerApi,\n    isLockRule = _useContext.isLockRule,\n    activeRuleId = _useContext.activeRuleId;\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false),\n    _useState2 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(_useState, 2),\n    showAllRules = _useState2[0],\n    setShowAllRules = _useState2[1];\n  var _useState3 = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(true),\n    _useState4 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(_useState3, 2),\n    deleteDisabled = _useState4[0],\n    setDeleteDisabled = _useState4[1];\n  var kdesignerApi = getKdesignerApi();\n  var dataContext = kdesignerApi.data;\n  var selectionContext = kdesignerApi.selection;\n  var locked = isLockRule(activeRuleId);\n  // 用于监听回调里面获取locked值\n  var lockedRef = (0,react__WEBPACK_IMPORTED_MODULE_3__.useRef)(locked);\n  var canUndo = dataContext.canUndo();\n  var canRedo = dataContext.canRedo();\n  var selectionCallBack = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(function (selection) {\n    if (lockedRef.current) return;\n    var value = selection.value,\n      oldValue = selection.oldValue;\n    if (value !== oldValue && value.length === 1) {\n      var id = value[0];\n      var selectControl = dataContext.findControl(id);\n      setDeleteDisabled(!(0,_utils__WEBPACK_IMPORTED_MODULE_8__.isActionNode)(selectControl));\n    }\n  }, []);\n  (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(function () {\n    var removeSelectionListener = selectionContext.addSelectChangeListener(selectionCallBack);\n    return function () {\n      removeSelectionListener();\n    };\n  }, []);\n\n  // 锁定状态下，删除不可点击\n  (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(function () {\n    lockedRef.current = locked;\n    if (locked) {\n      setDeleteDisabled(true);\n    }\n  }, [locked]);\n  (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_4__.useDataChangeForceUpdateEffect)(kdesignerApi);\n  var getStatus = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(function (type) {\n    var disable = false;\n    var command = true;\n    switch (type) {\n      case 1:\n        disable = !canUndo;\n        command = canUndo;\n        break;\n      case 2:\n        disable = !canRedo;\n        command = canRedo;\n        break;\n      case 3:\n        disable = deleteDisabled;\n        command = !deleteDisabled;\n        break;\n      default:\n        disable = false;\n        command = true;\n    }\n    return {\n      disable: disable,\n      command: command\n    };\n  }, [deleteDisabled, canRedo, canUndo]);\n\n  // 恢复\n  var redo = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(function () {\n    var _getStatus = getStatus(2),\n      disable = _getStatus.disable;\n    if (disable) return;\n    if (canRedo) {\n      dataContext.redo();\n    }\n  }, [canRedo, getStatus]);\n  // 撤销\n  var undo = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(function () {\n    var _getStatus2 = getStatus(1),\n      disable = _getStatus2.disable;\n    if (disable) return;\n    if (canUndo) {\n      dataContext.undo();\n      // const rootId = dataContext.getRootId()\n      // selectionContext.setSelect(rootId)\n    }\n  }, [canUndo, getStatus]);\n  // 删除\n  var deleteControl = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(function () {\n    var _getStatus3 = getStatus(3),\n      disable = _getStatus3.disable;\n    if (disable) return;\n    var getSelection = selectionContext.getSelection;\n    var selection = getSelection();\n    if (selection.length === 1) {\n      // selectionContext.setSelect([])\n      var selectControl = dataContext.findControl(selection[0]);\n      dataContext.deleteControl((0,designer_base_Main__WEBPACK_IMPORTED_MODULE_4__.createDeleteAction)(selection)).then(function () {\n        var ParentId = selectControl.ParentId;\n        selectionContext.setSelect([ParentId]);\n      });\n    }\n  }, [getStatus]);\n  var getDomClassName = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(function (type) {\n    var isIcon = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var isLast = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    var _getStatus4 = getStatus(type),\n      disable = _getStatus4.disable,\n      command = _getStatus4.command;\n    var cn = isIcon ? classnames__WEBPACK_IMPORTED_MODULE_6___default()((0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__[\"default\"])((0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({}, \"\".concat(navToolPrefixCls, \"-buttonbox-operation-disable-icon\"), disable), \"\".concat(navToolPrefixCls, \"-buttonbox-operation-btn-icon\"), command)) : isLast ? classnames__WEBPACK_IMPORTED_MODULE_6___default()((0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__[\"default\"])((0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__[\"default\"])((0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({}, \"\".concat(navToolPrefixCls, \"-buttonbox-operation-disable\"), disable), \"\".concat(navToolPrefixCls, \"-buttonbox-last-operation\"), true), \"\".concat(navToolPrefixCls, \"-buttonbox-operation-btn\"), command)) : classnames__WEBPACK_IMPORTED_MODULE_6___default()((0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__[\"default\"])((0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({}, \"\".concat(navToolPrefixCls, \"-buttonbox-operation-disable\"), disable), \"\".concat(navToolPrefixCls, \"-buttonbox-operation-btn\"), command));\n    return cn;\n  }, [getStatus]);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"div\", {\n    className: navToolPrefixCls\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"div\", {\n    className: navToolPrefixCls + '-buttonbox'\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"div\", {\n    title: _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_2___default()(_context = \"\".concat((0,designer_base_Main__WEBPACK_IMPORTED_MODULE_4__.getLangMsg)('ruled.navToolBar.key0001'), \"\\n\")).call(_context, isMacOS ? '⌘+Z' : 'Ctrl+Z'),\n    className: getDomClassName(1),\n    onClick: undo\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_5__.Icon, {\n    prefix: \"designericon\",\n    type: \"chexiao\",\n    className: getDomClassName(1, true)\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"div\", {\n    title: _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_2___default()(_context2 = \"\".concat((0,designer_base_Main__WEBPACK_IMPORTED_MODULE_4__.getLangMsg)('ruled.navToolBar.key0002'), \"\\n\")).call(_context2, isMacOS ? '⌘+Y' : 'Ctrl+Y'),\n    className: getDomClassName(2, false, true),\n    onClick: redo\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_5__.Icon, {\n    prefix: \"designericon\",\n    type: \"zhongzuo\",\n    className: getDomClassName(2, true)\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"div\", {\n    className: navToolPrefixCls + '-buttonbox'\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"div\", {\n    title: \"\".concat((0,designer_base_Main__WEBPACK_IMPORTED_MODULE_4__.getLangMsg)('ruled.navToolBar.key0003'), \"\\nDelete\"),\n    onClick: deleteControl,\n    className: getDomClassName(3, false, true)\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_5__.Icon, {\n    prefix: \"designericon\",\n    type: \"shanchu\",\n    className: getDomClassName(3, true)\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default().createElement(_AllRulesView__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {\n    visible: showAllRules,\n    setVisible: setShowAllRules\n  }));\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = ((0,designer_base_Main__WEBPACK_IMPORTED_MODULE_4__.ErrorBoundaryWrap)(NavToolBar, 'ed-nav-toolbar'));\n\n//# sourceURL=webpack://rule-designer/./src/controls/NavToolBar.tsx?");

/***/ }),

/***/ 4333:
/*!**********************************!*\
  !*** ./src/controls/RetNode.tsx ***!
  \**********************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ 43400);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_flow_renderer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-flow-renderer */ 98752);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! designer_base/Main */ 18040);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(designer_base_Main__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../context */ 90115);\n/* harmony import */ var _Handle__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Handle */ 7260);\n\n\n\n\n\nvar RetNode = function RetNode(_ref) {\n  var _data$size, _data$size2;\n  var data = _ref.data,\n    id = _ref.id;\n  var name = data.RET;\n  var nodeRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n  var _useContext = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_context__WEBPACK_IMPORTED_MODULE_3__.DesignerContext),\n    getPrefixCls = _useContext.getPrefixCls,\n    prefixCls = _useContext.prefixCls;\n  var rootClass = getPrefixCls && getPrefixCls(prefixCls, 'controls-condition-node');\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: rootClass,\n    ref: nodeRef,\n    style: {\n      width: (_data$size = data.size) === null || _data$size === void 0 ? void 0 : _data$size.width,\n      height: (_data$size2 = data.size) === null || _data$size2 === void 0 ? void 0 : _data$size2.height\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(react_flow_renderer__WEBPACK_IMPORTED_MODULE_1__.Handle, {\n    type: \"target\",\n    position: react_flow_renderer__WEBPACK_IMPORTED_MODULE_1__.Position.Left,\n    id: \"a\",\n    style: _Handle__WEBPACK_IMPORTED_MODULE_4__.targetHandleStyle\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(react_flow_renderer__WEBPACK_IMPORTED_MODULE_1__.Handle, {\n    type: \"source\",\n    position: react_flow_renderer__WEBPACK_IMPORTED_MODULE_1__.Position.Right,\n    id: \"b\",\n    style: _Handle__WEBPACK_IMPORTED_MODULE_4__.sourceHandleHorizontalStyle\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: \"\".concat(rootClass, \"-label\")\n  }, name));\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = ((0,designer_base_Main__WEBPACK_IMPORTED_MODULE_2__.ErrorBoundaryWrap)(RetNode, 'flow-ret-node'));\n\n//# sourceURL=webpack://rule-designer/./src/controls/RetNode.tsx?");

/***/ }),

/***/ 45408:
/*!***********************************!*\
  !*** ./src/controls/RuleNode.tsx ***!
  \***********************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ 43400);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_flow_renderer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-flow-renderer */ 98752);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! designer_base/Main */ 18040);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(designer_base_Main__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../context */ 90115);\n/* harmony import */ var _Handle__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Handle */ 7260);\n\n\n\n\n\nvar RuleNode = function RuleNode(_ref) {\n  var _data$size, _data$size2;\n  var data = _ref.data,\n    id = _ref.id;\n  var _useContext = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_context__WEBPACK_IMPORTED_MODULE_3__.DesignerContext),\n    getPrefixCls = _useContext.getPrefixCls,\n    prefixCls = _useContext.prefixCls;\n  var rootClass = getPrefixCls && getPrefixCls(prefixCls, 'controls-rule-node');\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: rootClass,\n    style: {\n      width: (_data$size = data.size) === null || _data$size === void 0 ? void 0 : _data$size.width,\n      height: (_data$size2 = data.size) === null || _data$size2 === void 0 ? void 0 : _data$size2.height\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(react_flow_renderer__WEBPACK_IMPORTED_MODULE_1__.Handle, {\n    type: \"source\",\n    position: react_flow_renderer__WEBPACK_IMPORTED_MODULE_1__.Position.Right,\n    id: \"b\",\n    style: _Handle__WEBPACK_IMPORTED_MODULE_4__.sourceHandleHorizontalStyle\n  }));\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = ((0,designer_base_Main__WEBPACK_IMPORTED_MODULE_2__.ErrorBoundaryWrap)(RuleNode, 'flow-rule-node'));\n\n//# sourceURL=webpack://rule-designer/./src/controls/RuleNode.tsx?");

/***/ }),

/***/ 13948:
/*!*********************************!*\
  !*** ./src/controls/TFNode.tsx ***!
  \*********************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FalseNode: function() { return /* binding */ FalseNode; },\n/* harmony export */   TrueNode: function() { return /* binding */ TrueNode; }\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_corejs3_helpers_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/extends */ 2664);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ 43400);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_flow_renderer__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react-flow-renderer */ 98752);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! designer_base/Main */ 18040);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(designer_base_Main__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../context */ 90115);\n/* harmony import */ var _Handle__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Handle */ 7260);\n/* harmony import */ var _hooks_useNodeClick__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../hooks/useNodeClick */ 56828);\n/* harmony import */ var _hooks_useSelected__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../hooks/useSelected */ 88840);\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! classnames */ 71252);\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_8__);\n\n\n\n\n\n\n\n\n\nvar TFNode = function TFNode(_ref) {\n  var _data$size, _data$size2;\n  var data = _ref.data,\n    id = _ref.id,\n    label = _ref.label;\n  var nodeRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n  var _useContext = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(_context__WEBPACK_IMPORTED_MODULE_4__.DesignerContext),\n    getPrefixCls = _useContext.getPrefixCls,\n    prefixCls = _useContext.prefixCls;\n  var rootClass = getPrefixCls && getPrefixCls(prefixCls, 'controls-tf-node');\n  var isSelected = (0,_hooks_useSelected__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(id);\n  var onClick = (0,_hooks_useNodeClick__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(id);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", {\n    className: classnames__WEBPACK_IMPORTED_MODULE_8___default()(rootClass, {\n      'node-selection': isSelected\n    }),\n    ref: nodeRef,\n    style: {\n      width: (_data$size = data.size) === null || _data$size === void 0 ? void 0 : _data$size.width,\n      height: (_data$size2 = data.size) === null || _data$size2 === void 0 ? void 0 : _data$size2.height\n    },\n    onClick: onClick\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(react_flow_renderer__WEBPACK_IMPORTED_MODULE_2__.Handle, {\n    type: \"target\",\n    position: react_flow_renderer__WEBPACK_IMPORTED_MODULE_2__.Position.Left,\n    id: \"a\",\n    style: _Handle__WEBPACK_IMPORTED_MODULE_5__.targetHandleHorizontalStyle\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(react_flow_renderer__WEBPACK_IMPORTED_MODULE_2__.Handle, {\n    type: \"source\",\n    position: react_flow_renderer__WEBPACK_IMPORTED_MODULE_2__.Position.Right,\n    id: \"b\",\n    style: _Handle__WEBPACK_IMPORTED_MODULE_5__.sourceHandleHorizontalStyle\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", {\n    className: \"\".concat(rootClass, \"-label\"),\n    title: label\n  }, label));\n};\nvar createNode = function createNode(type) {\n  return function (props) {\n    var label = type === 'true' ? (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_3__.getLangMsg)('ruled.tfNode.key0001') : type === 'false' ? (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_3__.getLangMsg)('ruled.tfNode.key0002') : null;\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(TFNode, (0,_babel_runtime_corejs3_helpers_extends__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({}, props, {\n      label: label\n    }));\n  };\n};\nvar TrueNode = (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_3__.ErrorBoundaryWrap)(createNode('true'), 'flow-tf-node');\nvar FalseNode = (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_3__.ErrorBoundaryWrap)(createNode('false'), 'flow-tf-node');\n\n//# sourceURL=webpack://rule-designer/./src/controls/TFNode.tsx?");

/***/ }),

/***/ 92516:
/*!*****************************************!*\
  !*** ./src/controls/common/AddIcon.tsx ***!
  \*****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/slicedToArray */ 95992);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ 75984);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ 43400);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! designer_base/Main */ 18040);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(designer_base_Main__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../context */ 90115);\n/* harmony import */ var _kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @kdcloudjs/kdesign */ 54116);\n/* harmony import */ var _kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _meta_index__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../meta/index */ 52904);\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! classnames */ 71252);\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_7__);\n\n\n\n\n\n\n\n\nvar AddIcon = function AddIcon(_ref) {\n  var onClick = _ref.onClick,\n    className = _ref.className;\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false),\n    _useState2 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useState, 2),\n    panelVisible = _useState2[0],\n    setPanelVisible = _useState2[1];\n  var panelRef = (0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null);\n  var _useContext = (0,react__WEBPACK_IMPORTED_MODULE_2__.useContext)(_context__WEBPACK_IMPORTED_MODULE_4__.DesignerContext),\n    ruleMetaInfo = _useContext.ruleMetaInfo,\n    activeRuleNodeId = _useContext.activeRuleNodeId,\n    getPrefixCls = _useContext.getPrefixCls,\n    prefixCls = _useContext.prefixCls;\n  var _ref2 = (ruleMetaInfo === null || ruleMetaInfo === void 0 ? void 0 : ruleMetaInfo[0]) || {},\n    serviceType = _ref2.serviceType,\n    rulesTree = _ref2.rulesTree;\n  if (!serviceType) return null;\n  serviceType = (0,_meta_index__WEBPACK_IMPORTED_MODULE_6__.filterServiceType)(serviceType, rulesTree, activeRuleNodeId);\n  var rootClass = getPrefixCls && getPrefixCls(prefixCls, 'add-icon');\n  var handleClickIcon = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(function () {\n    setPanelVisible(true);\n  }, []);\n  var handleItemClick = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(function (item) {\n    onClick(item);\n  }, []);\n  var handleClose = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(function () {\n    setPanelVisible(false);\n  }, []);\n  (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_3__.useOnClickOutside)([panelRef], function () {\n    handleClose();\n  });\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\", {\n    className: classnames__WEBPACK_IMPORTED_MODULE_7___default()(rootClass, className)\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_5__.Icon, {\n    prefix: \"designericon\",\n    type: \"tianjiakapian\",\n    onClick: handleClickIcon\n  }), panelVisible && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(SelectListPanel, {\n    data: serviceType,\n    onClose: handleClose,\n    onClick: handleItemClick,\n    panelRef: panelRef,\n    prefixCls: rootClass\n  }));\n};\nvar SelectListPanel = function SelectListPanel(_ref3) {\n  var data = _ref3.data,\n    close = _ref3.close,\n    onClick = _ref3.onClick,\n    panelRef = _ref3.panelRef,\n    prefixCls = _ref3.prefixCls;\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(function () {\n    var _panelRef$current;\n    (_panelRef$current = panelRef.current) === null || _panelRef$current === void 0 || _panelRef$current.addEventListener('wheel', handleScroll);\n    return function () {\n      var _panelRef$current2;\n      (_panelRef$current2 = panelRef.current) === null || _panelRef$current2 === void 0 || _panelRef$current2.addEventListener('wheel', handleScroll);\n    };\n  }, []);\n  var handleScroll = function handleScroll(e) {\n    e.stopPropagation();\n  };\n  var handleItemClick = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(function (e, item) {\n    e.stopPropagation();\n    onClick && onClick(item);\n    close && close();\n  }, [close, onClick]);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\", {\n    className: prefixCls + '-list',\n    ref: panelRef\n  }, data && (data === null || data === void 0 ? void 0 : _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_1___default()(data).call(data, function (item, index) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\", {\n      key: index,\n      className: prefixCls + '-list-item',\n      title: item.title,\n      onClick: function onClick(e) {\n        return handleItemClick(e, item);\n      }\n    }, item.title);\n  })));\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (AddIcon);\n\n//# sourceURL=webpack://rule-designer/./src/controls/common/AddIcon.tsx?");

/***/ }),

/***/ 16612:
/*!********************************************!*\
  !*** ./src/controls/common/SearchTree.tsx ***!
  \********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/keys */ 47976);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols */ 39448);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor */ 55748);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors */ 54120);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-properties */ 63808);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-property */ 45040);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/slice */ 12640);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_array_from__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/array/from */ 89843);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_array_from__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_array_from__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_symbol__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/symbol */ 97440);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_symbol__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_symbol__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_get_iterator_method__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js/get-iterator-method */ 64248);\n/* harmony import */ var _babel_runtime_corejs3_core_js_get_iterator_method__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_get_iterator_method__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/array/is-array */ 12388);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var _babel_runtime_corejs3_helpers_extends__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/extends */ 2664);\n/* harmony import */ var _babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/toConsumableArray */ 30260);\n/* harmony import */ var _babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/slicedToArray */ 95992);\n/* harmony import */ var _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/defineProperty */ 30112);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/filter */ 18860);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ 75984);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_17__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/for-each */ 7312);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_16__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_index_of__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/index-of */ 39568);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_index_of__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_index_of__WEBPACK_IMPORTED_MODULE_18__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/concat */ 81744);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_19__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/includes */ 82600);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_20___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_20__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! react */ 43400);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_21___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_21__);\n/* harmony import */ var _assets_images_search_tree_empty_png__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../../assets/images/search-tree-empty.png */ 70780);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! lodash */ 67928);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_23___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_23__);\n/* harmony import */ var _kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @kdcloudjs/kdesign */ 54116);\n/* harmony import */ var _kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_24___default = /*#__PURE__*/__webpack_require__.n(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_24__);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! designer_base/Main */ 18040);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_25___default = /*#__PURE__*/__webpack_require__.n(designer_base_Main__WEBPACK_IMPORTED_MODULE_25__);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof (_babel_runtime_corejs3_core_js_stable_symbol__WEBPACK_IMPORTED_MODULE_8___default()) !== \"undefined\" && _babel_runtime_corejs3_core_js_get_iterator_method__WEBPACK_IMPORTED_MODULE_9___default()(o) || o[\"@@iterator\"]; if (!it) { if (_babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_10___default()(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { var _context11; if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = _babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_6___default()(_context11 = Object.prototype.toString.call(o)).call(_context11, 8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return _babel_runtime_corejs3_core_js_stable_array_from__WEBPACK_IMPORTED_MODULE_7___default()(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction ownKeys(e, r) { var t = _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0___default()(e); if ((_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1___default())) { var o = _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1___default()(e); r && (o = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_15___default()(o).call(o, function (r) { return _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2___default()(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var _context9, _context10; var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_16___default()(_context9 = ownKeys(Object(t), !0)).call(_context9, function (r) { (0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_14__[\"default\"])(e, r, t[r]); }) : (_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_3___default()) ? _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_4___default()(e, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_3___default()(t)) : _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_16___default()(_context10 = ownKeys(Object(t))).call(_context10, function (r) { _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_5___default()(e, r, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2___default()(t, r)); }); } return e; }\n\n\n\n\n\n\n\n\n\n\n\nvar defaultFilterTreeData = function defaultFilterTreeData(treeData) {\n  return treeData;\n};\nvar dealTreeData = function dealTreeData(treeData, showDefinitionId) {\n  var _context;\n  var checkable = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  return _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_15___default()(_context = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_17___default()(treeData).call(treeData, function (def) {\n    var id = def.id,\n      children = def.children,\n      text = def.text;\n    var childObj = children ? {\n      children: dealTreeData(children, showDefinitionId, checkable)\n    } : {\n      children: []\n    };\n    // const currentDataSource = parentIsDs && parentKey\n    // 这里怎么表示第一层，没有字段只能用层级了\n    return _objectSpread(_objectSpread(_objectSpread({}, def), {}, {\n      key: id,\n      title: showDefinitionId ? text : text.replace(/(\\S+)\\(\\S+\\)/g, '$1')\n    }, childObj), {}, {\n      checkable: checkable,\n      selectable: !children && !checkable\n    });\n  })).call(_context, Boolean);\n};\nvar getAllKeys = function getAllKeys(treeData) {\n  var keys = [];\n  var getKey = function getKey(item, arr) {\n    var key = item.key,\n      children = item.children;\n    arr.push(key);\n    children && _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_16___default()(children).call(children, function (i) {\n      return getKey(i, arr);\n    });\n  };\n  _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_16___default()(treeData).call(treeData, function (data) {\n    getKey(data, keys);\n  });\n  return keys;\n};\n\n// 根据key判断节点存不存在\nvar getNodeExistByKey = function getNodeExistByKey(treeData, nodeKey) {\n  var _iterator = _createForOfIteratorHelper(treeData),\n    _step;\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var _step$value = _step.value,\n        key = _step$value.key,\n        children = _step$value.children;\n      if (nodeKey === key) return true;\n      if (children && children.length) {\n        var res = getNodeExistByKey(children, nodeKey);\n        if (res) return res;\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n  return false;\n};\nvar searchTreeData = function searchTreeData(treeData, searchVal) {\n  var _context3;\n  if (searchVal === '') return treeData;\n  var filterFunc = function filterFunc(data, filterValue) {\n    return _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_15___default()(data).call(data, function (item) {\n      var _context2;\n      // 需要将Name改为ViewName\n      if (_babel_runtime_corejs3_core_js_stable_instance_index_of__WEBPACK_IMPORTED_MODULE_18___default()(_context2 = item.text || '').call(_context2, filterValue) !== -1 && (!item.children || item.children.length === 0)) {\n        return true;\n      }\n      var childrenFilterData = item.children && filterFunc(item.children, filterValue);\n      if ((childrenFilterData === null || childrenFilterData === void 0 ? void 0 : childrenFilterData.length) > 0) {\n        item.children = childrenFilterData;\n        return true;\n      }\n    });\n  };\n  return _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_15___default()(_context3 = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_17___default()(treeData).call(treeData, function (treeObj) {\n    var children = treeObj === null || treeObj === void 0 ? void 0 : treeObj.children;\n    if (!children) {\n      return treeObj;\n    }\n    var filteredChildren = filterFunc(treeObj.children, searchVal);\n    return _objectSpread(_objectSpread({}, treeObj), {}, {\n      children: filteredChildren\n    });\n  })).call(_context3, function (treeObj) {\n    var _treeObj$children;\n    return treeObj === null || treeObj === void 0 || (_treeObj$children = treeObj.children) === null || _treeObj$children === void 0 ? void 0 : _treeObj$children.length;\n  });\n};\nfunction SearchEmptyNode(_ref) {\n  var className = _ref.className;\n  var emptyText = (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_25__.getLangMsg)('ruled.searchTree.key0001');\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_21___default().createElement(\"div\", {\n    className: className\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_21___default().createElement(\"img\", {\n    className: \"\".concat(className, \"-img\"),\n    src: _assets_images_search_tree_empty_png__WEBPACK_IMPORTED_MODULE_22__[\"default\"],\n    height: \"72\",\n    alt: emptyText\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_21___default().createElement(\"div\", {\n    className: \"\".concat(className, \"-text\")\n  }, emptyText));\n}\nvar SearchTree = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_21__.memo)(function (_ref2) {\n  var placeholder = _ref2.placeholder,\n    data = _ref2.data,\n    _ref2$showDefinitionI = _ref2.showDefinitionId,\n    showDefinitionId = _ref2$showDefinitionI === void 0 ? true : _ref2$showDefinitionI,\n    checkable = _ref2.checkable,\n    _ref2$checkedKeys = _ref2.checkedKeys,\n    checkedKeys = _ref2$checkedKeys === void 0 ? [] : _ref2$checkedKeys,\n    expandedKeys = _ref2.expandedKeys,\n    onSelect = _ref2.onSelect,\n    onCheck = _ref2.onCheck,\n    _ref2$filterTreeData = _ref2.filterTreeData,\n    filterTreeData = _ref2$filterTreeData === void 0 ? defaultFilterTreeData : _ref2$filterTreeData,\n    onDataChange = _ref2.onDataChange,\n    scrollToKey = _ref2.scrollToKey,\n    expandAll = _ref2.expandAll,\n    _ref2$selectedNodeKey = _ref2.selectedNodeKeys,\n    selectedNodeKeys = _ref2$selectedNodeKey === void 0 ? [] : _ref2$selectedNodeKey;\n  var inputRef = (0,react__WEBPACK_IMPORTED_MODULE_21__.useRef)(null);\n  var previousExpandKeys = (0,react__WEBPACK_IMPORTED_MODULE_21__.useRef)([]);\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_21__.useState)(''),\n    _useState2 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_13__[\"default\"])(_useState, 2),\n    inputVal = _useState2[0],\n    setInputVal = _useState2[1];\n  var _useState3 = (0,react__WEBPACK_IMPORTED_MODULE_21__.useState)(selectedNodeKeys),\n    _useState4 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_13__[\"default\"])(_useState3, 2),\n    selectedKeys = _useState4[0],\n    setSelectedKeys = _useState4[1];\n  var _useState5 = (0,react__WEBPACK_IMPORTED_MODULE_21__.useState)(function () {\n      return dealTreeData(filterTreeData(data), showDefinitionId, checkable);\n    }),\n    _useState6 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_13__[\"default\"])(_useState5, 2),\n    treeData = _useState6[0],\n    setTreeData = _useState6[1];\n  var _useState7 = (0,react__WEBPACK_IMPORTED_MODULE_21__.useState)(function () {\n      var _context5;\n      var keys = [];\n      if (expandAll) {\n        keys = getAllKeys(treeData);\n      } else {\n        var _context4;\n        keys = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_17___default()(_context4 = treeData || []).call(_context4, function (node) {\n          return node.key;\n        });\n      }\n      return _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_19___default()(_context5 = []).call(_context5, (0,_babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_12__[\"default\"])(keys), (0,_babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_12__[\"default\"])(expandedKeys || []));\n    }),\n    _useState8 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_13__[\"default\"])(_useState7, 2),\n    expandNodeKeys = _useState8[0],\n    setExpandNodeKeys = _useState8[1];\n  var scrollToKeyProps = (0,react__WEBPACK_IMPORTED_MODULE_21__.useMemo)(function () {\n    if (scrollToKey) {\n      var hasNode = getNodeExistByKey(treeData, scrollToKey);\n      return hasNode ? {\n        scrollToKey: scrollToKey\n      } : {};\n    }\n    return {};\n  }, [scrollToKey, treeData]);\n  (0,react__WEBPACK_IMPORTED_MODULE_21__.useEffect)(function () {\n    setTreeData(function (treeData) {\n      var _context6;\n      var newDataSource = dealTreeData(filterTreeData(data), showDefinitionId, checkable);\n      var newKeys = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_17___default()(_context6 = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_15___default()(newDataSource).call(newDataSource, function (node) {\n        var treeDataKeys = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_17___default()(treeData).call(treeData, function (item) {\n          return item.key;\n        });\n        return !_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_20___default()(treeDataKeys).call(treeDataKeys, node.key);\n      })).call(_context6, function (node) {\n        return node.key;\n      });\n      setExpandNodeKeys(function (keys) {\n        var _context7;\n        return _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_19___default()(_context7 = []).call(_context7, (0,_babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_12__[\"default\"])(keys), (0,_babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_12__[\"default\"])(newKeys));\n      });\n      return newDataSource;\n    });\n  }, [data, checkable]);\n  (0,react__WEBPACK_IMPORTED_MODULE_21__.useEffect)(function () {\n    setTreeData(function () {\n      var treeData = dealTreeData(filterTreeData(data), showDefinitionId, checkable);\n      var newDataSource = searchTreeData(treeData, inputVal);\n      return newDataSource;\n    });\n  }, [showDefinitionId]);\n  (0,react__WEBPACK_IMPORTED_MODULE_21__.useEffect)(function () {\n    onDataChange && onDataChange(treeData);\n  }, [treeData]);\n\n  // 选中重置\n  (0,react__WEBPACK_IMPORTED_MODULE_21__.useEffect)(function () {\n    if (selectedKeys.length && !scrollToKey) {\n      setSelectedKeys([]);\n    }\n  }, [scrollToKey]);\n  (0,react__WEBPACK_IMPORTED_MODULE_21__.useEffect)(function () {\n    if (selectedNodeKeys.length) {\n      setSelectedKeys(selectedNodeKeys);\n    }\n  }, [selectedNodeKeys]);\n  var onSelectProxy = function onSelectProxy(selectedKeys, _ref3) {\n    var checked = _ref3.checked,\n      node = _ref3.node,\n      event = _ref3.event;\n    console.log('selectedKeys', selectedKeys);\n    setSelectedKeys(selectedKeys);\n    onSelect(checked, node, event);\n  };\n  var onExpand = function onExpand(keys, _ref4) {\n    var _context8;\n    var expanded = _ref4.expanded,\n      node = _ref4.node,\n      event = _ref4.event;\n    var key = node.key;\n    console.log('onExpand', expandNodeKeys);\n    var allKeys = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_15___default()(keys).call(keys, Boolean);\n    allKeys = expanded ? _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_19___default()(_context8 = [key]).call(_context8, (0,_babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_12__[\"default\"])(allKeys)) : _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_15___default()(allKeys).call(allKeys, function (item) {\n      return item !== key;\n    });\n    setExpandNodeKeys(allKeys);\n  };\n  var handleTreeSearch = function handleTreeSearch(e) {\n    var value = e.target.value;\n    var newTreeData = dealTreeData(filterTreeData(data), showDefinitionId, checkable);\n    if (!value) {\n      if (!lodash__WEBPACK_IMPORTED_MODULE_23___default().isEqual(newTreeData, treeData)) {\n        setTreeData(newTreeData);\n      }\n      setExpandNodeKeys(previousExpandKeys.current);\n    } else {\n      newTreeData = searchTreeData(newTreeData, value);\n      console.log('newDataSource', newTreeData);\n      if (!inputVal) {\n        // 存储在未搜索之前时的状态\n        previousExpandKeys.current = expandNodeKeys;\n      }\n      setTreeData(newTreeData);\n      var allKeys = getAllKeys(newTreeData);\n      setExpandNodeKeys(allKeys);\n    }\n    setInputVal(value);\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_21___default().createElement(\"div\", {\n    className: \"kd-search-tree-wrap\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_21___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_24__.Input, {\n    className: \"kd-search-tree-input\",\n    style: {\n      marginBottom: 9,\n      width: '100%'\n    },\n    ref: inputRef,\n    value: inputVal,\n    placeholder: placeholder || (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_25__.getLangMsg)('ruled.searchTree.key0002'),\n    borderType: \"bordered\",\n    onChange: handleTreeSearch,\n    allowClear: true,\n    prefix: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_21___default().createElement(\"div\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_21___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_24__.Icon, {\n      type: \"search\",\n      style: {\n        cursor: 'pointer'\n      }\n    }))\n  }), inputVal && !(treeData !== null && treeData !== void 0 && treeData.length) ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_21___default().createElement(SearchEmptyNode, {\n    className: \"search-empty\"\n  }) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_21___default().createElement(\"div\", {\n    className: \"kd-search-tree\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_21___default().createElement(\"div\", {\n    className: \"tree-container\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_21___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_24__.Tree, (0,_babel_runtime_corejs3_helpers_extends__WEBPACK_IMPORTED_MODULE_11__[\"default\"])({\n    name: \"definition\",\n    checkable: !!checkable,\n    expandedKeys: expandNodeKeys,\n    showIcon: false,\n    style: {\n      width: '100%'\n    },\n    onExpand: onExpand,\n    treeData: treeData,\n    onSelect: onSelectProxy,\n    selectedKeys: selectedKeys,\n    onCheck: onCheck,\n    checkedKeys: checkedKeys,\n    virtual: false\n  }, scrollToKeyProps)))));\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (SearchTree);\n\n//# sourceURL=webpack://rule-designer/./src/controls/common/SearchTree.tsx?");

/***/ }),

/***/ 37304:
/*!***************************!*\
  !*** ./src/data/index.ts ***!
  \***************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getNewDataFromDesignerData: function() { return /* binding */ getNewDataFromDesignerData; },\n/* harmony export */   getPrevNodeId: function() { return /* binding */ getPrevNodeId; }\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_corejs3_helpers_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/extends */ 2664);\n/* harmony import */ var _babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/slicedToArray */ 95992);\n/* harmony import */ var _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/defineProperty */ 30112);\n/* harmony import */ var _babel_runtime_corejs3_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/objectWithoutProperties */ 28220);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/for-each */ 7312);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/array/is-array */ 12388);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_reduce__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/reduce */ 45076);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_reduce__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_reduce__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/includes */ 82600);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/json/stringify */ 39832);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/find */ 47332);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_16__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find_index__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/find-index */ 29636);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find_index__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_find_index__WEBPACK_IMPORTED_MODULE_17__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_splice__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/splice */ 11872);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_splice__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_splice__WEBPACK_IMPORTED_MODULE_18__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/keys */ 47976);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols */ 39448);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/filter */ 18860);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor */ 55748);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors */ 54120);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-properties */ 63808);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-property */ 45040);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! designer_base/Main */ 18040);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(designer_base_Main__WEBPACK_IMPORTED_MODULE_19__);\n/* harmony import */ var _meta__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../meta */ 52904);\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../utils */ 63612);\n/* harmony import */ var immer__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! immer */ 83789);\n\n\n\n\nvar _excluded = [\"_Type_\", \"ActionType\", \"Description\", \"RET\"];\nfunction ownKeys(e, r) { var t = _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_4___default()(e); if ((_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_5___default())) { var o = _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_5___default()(e); r && (o = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_6___default()(o).call(o, function (r) { return _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_7___default()(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var _context5, _context6; var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(_context5 = ownKeys(Object(t), !0)).call(_context5, function (r) { (0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(e, r, t[r]); }) : (_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_9___default()) ? _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_10___default()(e, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_9___default()(t)) : _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(_context6 = ownKeys(Object(t))).call(_context6, function (r) { _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_11___default()(e, r, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_7___default()(t, r)); }); } return e; }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/*\n * @Author: fjr\n * @Email: jinrui_fang@kingdee.com\n * @Date: 2022-02-25 14:01:22\n * @Last Modified by: fjr\n * @LastEditTime: 2022-04-10 11:21:13\n * @Description: ... 用于转换外部传的数据，变成规则设计器内部所使用的数据结构 add by 王志勇 date:2022-03-08\n */\n\n\n\n\nvar getPrevNodeId = function getPrevNodeId(nodes) {\n  return nodes[nodes.length - 1].Id;\n};\nvar addActionNodes = function addActionNodes(nodes, actions, type, judgeNodeId) {\n  var TFNodeData = {\n    id: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_19__.createUUid)(),\n    parentId: judgeNodeId\n  };\n  var TFNode = type === _meta__WEBPACK_IMPORTED_MODULE_20__.TRUE_ACTION_NODE_TYPE ? new _meta__WEBPACK_IMPORTED_MODULE_20__.TrueNode(TFNodeData) : new _meta__WEBPACK_IMPORTED_MODULE_20__.FalseNode(TFNodeData);\n  nodes.push(TFNode);\n  _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(actions).call(actions, function (trueAction, idx) {\n    var Type = trueAction._Type_,\n      ActionType = trueAction.ActionType,\n      Description = trueAction.Description,\n      RET = trueAction.RET,\n      props = (0,_babel_runtime_corejs3_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(trueAction, _excluded);\n    var trueActionNode = new _meta__WEBPACK_IMPORTED_MODULE_20__.ActionNode(_objectSpread({\n      type: Type,\n      id: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_19__.createUUid)(),\n      nodeType: type,\n      actionType: ActionType,\n      description: Description,\n      ret: _babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_12___default()(RET) ? RET.join(',') : RET,\n      parentId: getPrevNodeId(nodes)\n    }, props));\n    nodes.push(trueActionNode);\n  });\n  nodes.push(new _meta__WEBPACK_IMPORTED_MODULE_20__.EndNode({\n    id: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_19__.createUUid)(),\n    parentId: getPrevNodeId(nodes)\n  }));\n};\nvar createRuleDesignerData = function createRuleDesignerData(data, nodeTypes, nodeIds, metaType) {\n  // data 得分类型\n  // 实体\n  var items = data[metaType].Items;\n  var rootId = (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_19__.createUUid)();\n  var _items$reduce = _babel_runtime_corejs3_core_js_stable_instance_reduce__WEBPACK_IMPORTED_MODULE_13___default()(items).call(items, function (ret, item) {\n      var _ret = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(ret, 2),\n        ruleContainerNodes = _ret[0],\n        ruleData = _ret[1];\n      //\n      // console.log(item.Name, nodeIds.includes(item.Id) && nodeTypes.includes(item._Type_), 'nodeIds:', nodeIds,  item.Id, 'nodeTypes:', nodeTypes,  item._Type_)\n      if (_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_14___default()(nodeIds).call(nodeIds, item.Id)) {\n        ruleContainerNodes.push(item);\n        // 卡片的规则，需要取值的key为ClientRules，其它为Rules\n        var rulesKey = (0,_utils__WEBPACK_IMPORTED_MODULE_21__.getRulesKey)(item._Type_, metaType);\n        var rules = item[rulesKey];\n        var relationContainerNodeId = item.Id; // 实体Id or 表单节点Id\n        if ((rules === null || rules === void 0 ? void 0 : rules.length) > 0) {\n          _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(rules).call(rules, function (rule) {\n            var Description = rule.Description,\n              _rule$Enabled = rule.Enabled,\n              Enabled = _rule$Enabled === void 0 ? true : _rule$Enabled,\n              Id = rule.Id,\n              PreDescription = rule.PreDescription,\n              PreCondition = rule.PreCondition,\n              _rule$TrueActions = rule.TrueActions,\n              TrueActions = _rule$TrueActions === void 0 ? [] : _rule$TrueActions,\n              _rule$FalseActions = rule.FalseActions,\n              FalseActions = _rule$FalseActions === void 0 ? [] : _rule$FalseActions;\n            var nodes = [];\n            var ruleNode = new _meta__WEBPACK_IMPORTED_MODULE_20__.RuleNode({\n              id: Id,\n              description: Description,\n              enabled: Enabled,\n              parentId: rootId,\n              relationContainerNodeId: relationContainerNodeId\n            });\n            nodes.push(ruleNode);\n\n            // if(PreDescription && PreCondition) {\n            var conditionNodeId = (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_19__.createUUid)();\n            var conditionNode = new _meta__WEBPACK_IMPORTED_MODULE_20__.ConditionNode({\n              id: conditionNodeId,\n              preDescription: PreDescription,\n              preCondition: PreCondition,\n              parentId: getPrevNodeId(nodes)\n            });\n            nodes.push(conditionNode);\n            var judgeNode = new _meta__WEBPACK_IMPORTED_MODULE_20__.JudgeNode({\n              id: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_19__.createUUid)(),\n              parentId: conditionNodeId\n            });\n            nodes.push(judgeNode);\n            // }\n            var judgeNodeId = getPrevNodeId(nodes);\n            addActionNodes(nodes, TrueActions, _meta__WEBPACK_IMPORTED_MODULE_20__.TRUE_ACTION_NODE_TYPE, judgeNodeId);\n            // 旧版的卡片是不能设置条件不成立时的规则的\n            if ((0,_utils__WEBPACK_IMPORTED_MODULE_21__.existFalseNode)(item._Type_)) {\n              addActionNodes(nodes, FalseActions, _meta__WEBPACK_IMPORTED_MODULE_20__.FALSE_ACTION_NODE_TYPE, judgeNodeId);\n            }\n            ruleData.push.apply(ruleData, nodes);\n          });\n        }\n      }\n      return ret;\n    }, [[], [{\n      Type: 'RuleRoot',\n      Id: rootId\n    }]]),\n    _items$reduce2 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(_items$reduce, 2),\n    ruleContainerNodes = _items$reduce2[0],\n    ruleData = _items$reduce2[1];\n  // 由于Immer的问题, 先让复合结构丢失类型\n  // 后面提issue pr参与建设Immer社区\n  // return [ruleContainerNodes, {Items: ruleData.map((item: Node) => JSON.parse(JSON.stringify(item)))}]\n  return [ruleContainerNodes, {\n    Items: ruleData\n  }];\n};\n\n// actionNode得自己实现getValue\nvar omitActionNodeKeys = ['Type', 'NodeType', 'ParentId'];\nvar getActionByOmitKeys = function getActionByOmitKeys(node) {\n  var _node = JSON.parse(_babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_15___default()(node));\n  _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(omitActionNodeKeys).call(omitActionNodeKeys, function (key) {\n    delete _node[key];\n  });\n  // ret适配\n  if (typeof _node.RET === 'string') {\n    _node.RET = _node.RET.split(',');\n  }\n  return _node;\n};\n\n// 副作用，修改节点数据\n//\nvar getNewDataFromDesignerData = function getNewDataFromDesignerData(designerData, event, oldData, dataApi, ref, metaType) {\n  var _ref$current;\n  // 通过去修改，新增\n  // 得根据类型\n  // 先实体\n  // const containerNodes: any[] = ref.current.slice()\n  // 每次必改\n  ref.current = JSON.parse(_babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_15___default()(ref.current));\n  (_ref$current = ref.current) === null || _ref$current === void 0 || _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(_ref$current).call(_ref$current, function (node) {\n    var rulesKey = (0,_utils__WEBPACK_IMPORTED_MODULE_21__.getRulesKey)(node._Type_, metaType);\n    if (node[rulesKey]) {\n      delete node[rulesKey];\n    }\n  });\n  var newData = (0,immer__WEBPACK_IMPORTED_MODULE_22__.produce)(oldData, function (draft) {\n    var _context;\n    var items = draft[metaType].Items;\n    _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(items).call(items, function (node) {\n      var rulesKey = (0,_utils__WEBPACK_IMPORTED_MODULE_21__.getRulesKey)(node._Type_, metaType);\n      if (node[rulesKey]) {\n        delete node[rulesKey];\n      }\n    });\n\n    // 遍历全部\n    // 顺序\n    _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(_context = designerData.Items).call(_context, function (item) {\n      if ('RelationContainerNodeId' in item) {\n        var _context4;\n        var node = _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_16___default()(items).call(items, function (itm) {\n          return itm.Id === item.RelationContainerNodeId;\n        });\n        if (!node) {\n          console.log(item);\n          return;\n        }\n        var nodeRulesKey = (0,_utils__WEBPACK_IMPORTED_MODULE_21__.getRulesKey)(node._Type_, metaType);\n        var rule = _meta__WEBPACK_IMPORTED_MODULE_20__.RuleNode.getValue.call(item);\n        var children = dataApi.getAllSubControls(item.Id);\n        var TrueActions = [];\n        var FalseActions = [];\n        _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(children).call(children, function (child) {\n          if ((0,_utils__WEBPACK_IMPORTED_MODULE_21__.isConditionNode)(child)) {\n            (0,_babel_runtime_corejs3_helpers_extends__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(rule, _meta__WEBPACK_IMPORTED_MODULE_20__.ConditionNode.getValue.call(child));\n          } else if ((0,_utils__WEBPACK_IMPORTED_MODULE_21__.isActionNode)(child)) {\n            if (child.NodeType === _meta__WEBPACK_IMPORTED_MODULE_20__.TRUE_ACTION_NODE_TYPE) {\n              TrueActions.push(getActionByOmitKeys(child));\n            } else {\n              if ((0,_utils__WEBPACK_IMPORTED_MODULE_21__.existFalseNode)(node._Type_)) {\n                FalseActions.push(getActionByOmitKeys(child));\n              }\n            }\n          }\n        });\n        TrueActions.length && (rule.TrueActions = TrueActions);\n        FalseActions.length && (rule.FalseActions = FalseActions);\n        if (_babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_12___default()(node[nodeRulesKey])) {\n          var _context2;\n          var idx = _babel_runtime_corejs3_core_js_stable_instance_find_index__WEBPACK_IMPORTED_MODULE_17___default()(_context2 = node[nodeRulesKey]).call(_context2, function (_rule) {\n            return _rule.Id === rule.Id;\n          });\n          if (idx === -1) {\n            node[nodeRulesKey].push(rule);\n          } else {\n            var _context3;\n            _babel_runtime_corejs3_core_js_stable_instance_splice__WEBPACK_IMPORTED_MODULE_18___default()(_context3 = node[nodeRulesKey]).call(_context3, idx, 1, rule);\n          }\n        } else {\n          node[nodeRulesKey] = [rule];\n        }\n        var containerNode = _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_16___default()(_context4 = ref.current).call(_context4, function (itm) {\n          return itm.Id === node.Id;\n        });\n        // 深拷贝\n        containerNode[nodeRulesKey] = JSON.parse(_babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_15___default()(node[nodeRulesKey]));\n      }\n    });\n  });\n  return newData;\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (createRuleDesignerData);\n\n//# sourceURL=webpack://rule-designer/./src/data/index.ts?");

/***/ }),

/***/ 42716:
/*!*************************************!*\
  !*** ./src/editors/CheckFields.tsx ***!
  \*************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CustomInput: function() { return /* binding */ CustomInput; }\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/slicedToArray */ 95992);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/array/is-array */ 12388);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/filter */ 18860);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/includes */ 82600);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ 75984);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/find */ 47332);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react */ 43400);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @kdcloudjs/kdesign */ 54116);\n/* harmony import */ var _kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! designer_base/Main */ 18040);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(designer_base_Main__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../context */ 90115);\n/* harmony import */ var _common_FieldsAddPanel__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./common/FieldsAddPanel */ 89004);\n/* harmony import */ var _controls_common_SearchTree__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../controls/common/SearchTree */ 16612);\n/* harmony import */ var _utils_treeUtils__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../utils/treeUtils */ 31340);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! lodash */ 67928);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! classnames */ 71252);\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_14__);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// 更新的属性值：\n// [{\n//   \"_Type_\": \"FieldId\",\n//   \"Id\": \"Imc2a3dR5w\"\n// }]\n/**\n/**\n *\n * @param props 锁定字段/解锁字段/显示字段/隐藏字段-服务设置\n * @returns\n */\nvar CustomInput = function CustomInput(props) {\n  var _ruleMetaInfo$;\n  var className = props.className,\n    editor = props.editor,\n    name = props.Name,\n    tips = props.Tips,\n    field = props.field,\n    id = props.id;\n  var nameHidden = editor.NameHidden,\n    required = editor.Required;\n  var _useContext = (0,react__WEBPACK_IMPORTED_MODULE_6__.useContext)(_context__WEBPACK_IMPORTED_MODULE_9__.DesignerContext),\n    getKdesignerApi = _useContext.getKdesignerApi,\n    getPrefixCls = _useContext.getPrefixCls,\n    prefixCls = _useContext.prefixCls,\n    ruleMetaInfo = _useContext.ruleMetaInfo,\n    activeRuleNodeId = _useContext.activeRuleNodeId,\n    isLockRule = _useContext.isLockRule;\n  var _field$Fields = field.Fields,\n    fields = _field$Fields === void 0 ? [] : _field$Fields,\n    actionType = field.ActionType;\n  var _getKdesignerApi = getKdesignerApi(),\n    dataContext = _getKdesignerApi.data;\n  var rootClass = getPrefixCls && getPrefixCls(prefixCls, 'checkFields-editor');\n  var locked = isLockRule();\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_6__.useState)(false),\n    _useState2 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useState, 2),\n    panelVisible = _useState2[0],\n    setPanelVisible = _useState2[1];\n  var triggerRef = (0,react__WEBPACK_IMPORTED_MODULE_6__.useRef)(null);\n  var _useState3 = (0,react__WEBPACK_IMPORTED_MODULE_6__.useState)(fields),\n    _useState4 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useState3, 2),\n    innerFields = _useState4[0],\n    setInnerFields = _useState4[1];\n  var treeData = (0,react__WEBPACK_IMPORTED_MODULE_6__.useMemo)(function () {\n    return (0,_utils_treeUtils__WEBPACK_IMPORTED_MODULE_12__.getEditorEntityTree)(ruleMetaInfo, activeRuleNodeId, actionType);\n  }, [ruleMetaInfo, activeRuleNodeId, actionType]);\n  var treeDataFlatten = (0,react__WEBPACK_IMPORTED_MODULE_6__.useMemo)(function () {\n    return (0,_utils_treeUtils__WEBPACK_IMPORTED_MODULE_12__.getTreeDataFlatten)(treeData);\n  }, [treeData]);\n\n  // 卡片相关结点特殊处理，使用字段标识操作/提交数据\n  var rulesTree = ((_ruleMetaInfo$ = ruleMetaInfo[0]) === null || _ruleMetaInfo$ === void 0 ? void 0 : _ruleMetaInfo$.rulesTree) || [];\n  var ruleData = _babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_1___default()(rulesTree) ? rulesTree : [rulesTree];\n  var ruleDataFlatten = (0,react__WEBPACK_IMPORTED_MODULE_6__.useMemo)(function () {\n    return (0,_utils_treeUtils__WEBPACK_IMPORTED_MODULE_12__.getTreeDataFlatten)(ruleData);\n  }, [ruleData]);\n  var activeRuleNodes = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_2___default()(ruleDataFlatten).call(ruleDataFlatten, function (rule) {\n    return rule.data === activeRuleNodeId;\n  });\n  var activeRuleNodeType = activeRuleNodes.length ? activeRuleNodes[0].type : '';\n  var cardTypes = ['CardEntryRowAp', 'CardRowPanelAp'];\n  var idName = _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_3___default()(cardTypes).call(cardTypes, activeRuleNodeType) ? 'id' : 'data';\n  var _useState5 = (0,react__WEBPACK_IMPORTED_MODULE_6__.useState)(function () {\n      var _context;\n      return _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_2___default()(_context = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_4___default()(fields).call(fields, function (_ref) {\n        var Id = _ref.Id;\n        var fieldItem = _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_5___default()(treeDataFlatten).call(treeDataFlatten, function (item) {\n          return item[idName] === Id;\n        });\n        return fieldItem === null || fieldItem === void 0 ? void 0 : fieldItem.id;\n      })).call(_context, Boolean);\n    }),\n    _useState6 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useState5, 2),\n    checkedKeys = _useState6[0],\n    setCheckedKeys = _useState6[1];\n  var checkedNodes = (0,react__WEBPACK_IMPORTED_MODULE_6__.useMemo)(function () {\n    var _context2;\n    return _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_2___default()(_context2 = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_4___default()(innerFields).call(innerFields, function (_ref2) {\n      var Id = _ref2.Id;\n      var fieldItem = _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_5___default()(treeDataFlatten).call(treeDataFlatten, function (item) {\n        return item[idName] === Id;\n      });\n      return fieldItem;\n    })).call(_context2, Boolean);\n  }, [innerFields]);\n  (0,react__WEBPACK_IMPORTED_MODULE_6__.useEffect)(function () {\n    if (!(0,lodash__WEBPACK_IMPORTED_MODULE_13__.isEqual)(innerFields, fields)) {\n      var _context3;\n      setInnerFields(fields);\n      setCheckedKeys(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_2___default()(_context3 = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_4___default()(fields).call(fields, function (_ref3) {\n        var Id = _ref3.Id;\n        var fieldItem = _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_5___default()(treeDataFlatten).call(treeDataFlatten, function (item) {\n          return item[idName] === Id;\n        });\n        return fieldItem === null || fieldItem === void 0 ? void 0 : fieldItem.id;\n      })).call(_context3, Boolean));\n    }\n  }, [fields]);\n  var onCheck = function onCheck(keys, _ref4) {\n    var value = _ref4.checked,\n      node = _ref4.node,\n      event = _ref4.event;\n    console.log('checkedKeys', value, keys, node);\n    var newCheckedNodes = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_2___default()(treeDataFlatten).call(treeDataFlatten, function (item) {\n      return _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_3___default()(keys).call(keys, item.id) && (0,lodash__WEBPACK_IMPORTED_MODULE_13__.isUndefined)(item.children);\n    });\n    setCheckedKeys(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_4___default()(newCheckedNodes).call(newCheckedNodes, function (item) {\n      return item.id;\n    }));\n  };\n  var handleDelete = function handleDelete(key) {\n    if (locked) return;\n    var newCheckedKeys = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_2___default()(checkedKeys).call(checkedKeys, function (k) {\n      return k !== key;\n    });\n    var newCheckedNodes = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_2___default()(checkedNodes).call(checkedNodes, function (node) {\n      return node.id !== key;\n    });\n    setCheckedKeys(newCheckedKeys);\n    var newFields = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_4___default()(newCheckedNodes).call(newCheckedNodes, function (node) {\n      return {\n        _Type_: 'FieldId',\n        Id: node[idName]\n      };\n    });\n    setInnerFields(newFields);\n    dataContext.batchUpdateControlPropertyValues((0,designer_base_Main__WEBPACK_IMPORTED_MODULE_8__.createUpdateAction)([[id, {\n      Fields: newFields\n    }]]));\n  };\n  var onConfirm = function onConfirm() {\n    var newCheckedNodes = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_2___default()(treeDataFlatten).call(treeDataFlatten, function (item) {\n      return _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_3___default()(checkedKeys).call(checkedKeys, item.id) && (0,lodash__WEBPACK_IMPORTED_MODULE_13__.isUndefined)(item.children);\n    });\n    var newFields = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_4___default()(newCheckedNodes).call(newCheckedNodes, function (node) {\n      return {\n        _Type_: 'FieldId',\n        Id: node[idName]\n      };\n    });\n    setInnerFields(newFields);\n    dataContext.batchUpdateControlPropertyValues((0,designer_base_Main__WEBPACK_IMPORTED_MODULE_8__.createUpdateAction)([[id, {\n      Fields: newFields\n    }]])).then(function () {\n      setPanelVisible(false);\n    });\n  };\n  var handleClickAdd = function handleClickAdd() {\n    if (locked) return;\n    setPanelVisible(true);\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default().createElement((react__WEBPACK_IMPORTED_MODULE_6___default().Fragment), null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default().createElement(designer_base_Main__WEBPACK_IMPORTED_MODULE_8__.NameTipWrapper, {\n    nameHidden: nameHidden,\n    className: className,\n    name: name,\n    tips: tips,\n    required: required\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default().createElement(\"div\", {\n    className: rootClass\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_7__.Tooltip, {\n    visible: panelVisible,\n    placement: \"bottomRight\",\n    popperClassName: \"\".concat(prefixCls, \"-fields-tree-panel-popper\"),\n    tip: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default().createElement(_common_FieldsAddPanel__WEBPACK_IMPORTED_MODULE_10__[\"default\"], {\n      visible: panelVisible,\n      triggerRef: triggerRef,\n      setVisible: setPanelVisible,\n      onCancel: function onCancel() {\n        return setPanelVisible(false);\n      },\n      onConfirm: onConfirm\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default().createElement(\"div\", {\n      className: \"\".concat(prefixCls, \"-tree-container\")\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default().createElement(_controls_common_SearchTree__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n      data: treeData,\n      checkable: true,\n      onCheck: onCheck,\n      checkedKeys: checkedKeys\n    })))\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default().createElement(\"div\", {\n    className: classnames__WEBPACK_IMPORTED_MODULE_14___default()(\"\".concat(rootClass, \"-add\"), {\n      disabled: locked\n    }),\n    onClick: handleClickAdd,\n    ref: triggerRef\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_7__.Icon, {\n    type: \"add\"\n  }), (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_8__.getLangMsg)('ruled.checkField.key0001'))), _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_4___default()(checkedNodes).call(checkedNodes, function (node) {\n    var name = node.text,\n      key = node.id;\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default().createElement(\"div\", {\n      className: classnames__WEBPACK_IMPORTED_MODULE_14___default()(\"\".concat(rootClass, \"-field-item\"), {\n        disabled: locked\n      }),\n      key: key\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default().createElement(\"div\", {\n      className: \"\".concat(rootClass, \"-field-item-label\")\n    }, name), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_6___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_7__.Icon, {\n      prefix: \"designericon\",\n      type: \"shanchu\",\n      onClick: function onClick() {\n        return handleDelete(key);\n      }\n    }));\n  })));\n};\n\n//# sourceURL=webpack://rule-designer/./src/editors/CheckFields.tsx?");

/***/ }),

/***/ 48924:
/*!******************************************!*\
  !*** ./src/editors/ClearValueAction.tsx ***!
  \******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CustomInput: function() { return /* binding */ CustomInput; }\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/slicedToArray */ 95992);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/filter */ 18860);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/includes */ 82600);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ 75984);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react */ 43400);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @kdcloudjs/kdesign */ 54116);\n/* harmony import */ var _kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! designer_base/Main */ 18040);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(designer_base_Main__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../context */ 90115);\n/* harmony import */ var _common_FieldsAddPanel__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./common/FieldsAddPanel */ 89004);\n/* harmony import */ var _controls_common_SearchTree__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../controls/common/SearchTree */ 16612);\n/* harmony import */ var _utils_treeUtils__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../utils/treeUtils */ 31340);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! lodash */ 67928);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! classnames */ 71252);\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_12__);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// 更新的属性值：\n// billno:kdtest_materielfield1\n\n/**\n *\n * @param props 清除字段-服务设置\n * @returns\n */\nvar CustomInput = function CustomInput(props) {\n  var className = props.className,\n    editor = props.editor,\n    name = props.Name,\n    tips = props.Tips,\n    field = props.field,\n    id = props.id;\n  var nameHidden = editor.NameHidden,\n    required = editor.Required;\n  var _useContext = (0,react__WEBPACK_IMPORTED_MODULE_4__.useContext)(_context__WEBPACK_IMPORTED_MODULE_7__.DesignerContext),\n    getKdesignerApi = _useContext.getKdesignerApi,\n    getPrefixCls = _useContext.getPrefixCls,\n    prefixCls = _useContext.prefixCls,\n    ruleMetaInfo = _useContext.ruleMetaInfo,\n    activeRuleNodeId = _useContext.activeRuleNodeId,\n    isLockRule = _useContext.isLockRule;\n  var actionType = field.ActionType,\n    _field$Expression = field.Expression,\n    expression = _field$Expression === void 0 ? '' : _field$Expression;\n  var _getKdesignerApi = getKdesignerApi(),\n    dataContext = _getKdesignerApi.data;\n  var rootClass = getPrefixCls && getPrefixCls(prefixCls, 'clearValue-editor');\n  var locked = isLockRule();\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(false),\n    _useState2 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useState, 2),\n    panelVisible = _useState2[0],\n    setPanelVisible = _useState2[1];\n  var triggerRef = (0,react__WEBPACK_IMPORTED_MODULE_4__.useRef)(null);\n  var treeData = (0,react__WEBPACK_IMPORTED_MODULE_4__.useMemo)(function () {\n    return (0,_utils_treeUtils__WEBPACK_IMPORTED_MODULE_10__.getEditorEntityTree)(ruleMetaInfo, activeRuleNodeId, actionType);\n  }, [ruleMetaInfo, activeRuleNodeId, actionType]);\n  var treeDataFlatten = (0,react__WEBPACK_IMPORTED_MODULE_4__.useMemo)(function () {\n    return (0,_utils_treeUtils__WEBPACK_IMPORTED_MODULE_10__.getTreeDataFlatten)(treeData);\n  }, [treeData]);\n  var _useState3 = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(function () {\n      return expression.split(':');\n    }),\n    _useState4 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useState3, 2),\n    checkedKeys = _useState4[0],\n    setCheckedKeys = _useState4[1];\n  var _useState5 = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(function () {\n      var nodeKeys = expression.split(':');\n      return _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_1___default()(treeDataFlatten).call(treeDataFlatten, function (node) {\n        return _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_2___default()(nodeKeys).call(nodeKeys, node.id) && (0,lodash__WEBPACK_IMPORTED_MODULE_11__.isUndefined)(node.children);\n      });\n    }),\n    _useState6 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useState5, 2),\n    checkedNodes = _useState6[0],\n    setCheckedNodes = _useState6[1];\n  (0,react__WEBPACK_IMPORTED_MODULE_4__.useEffect)(function () {\n    var newCheckedKeys = expression.split(':');\n    if (!(0,lodash__WEBPACK_IMPORTED_MODULE_11__.isEqual)(newCheckedKeys, checkedKeys)) {\n      setCheckedKeys(newCheckedKeys);\n      setCheckedNodes(function () {\n        return _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_1___default()(treeDataFlatten).call(treeDataFlatten, function (node) {\n          return _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_2___default()(newCheckedKeys).call(newCheckedKeys, node.id) && (0,lodash__WEBPACK_IMPORTED_MODULE_11__.isUndefined)(node.children);\n        });\n      });\n    }\n  }, [expression]);\n  var onCheck = function onCheck(keys, _ref) {\n    var value = _ref.checked,\n      node = _ref.node,\n      event = _ref.event;\n    console.log('checkedKeys', value, keys, node);\n    var checkedNodes = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_1___default()(treeDataFlatten).call(treeDataFlatten, function (node) {\n      return _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_2___default()(keys).call(keys, node.id) && (0,lodash__WEBPACK_IMPORTED_MODULE_11__.isUndefined)(node.children);\n    });\n    setCheckedKeys(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_3___default()(checkedNodes).call(checkedNodes, function (node) {\n      return node.id;\n    }));\n    // setCheckedNodes(checkedNodes)\n  };\n  var handleDelete = function handleDelete(key) {\n    if (locked) return;\n    var newCheckedKeys = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_1___default()(checkedKeys).call(checkedKeys, function (k) {\n      return k !== key;\n    });\n    setCheckedKeys(newCheckedKeys);\n    setCheckedNodes(function (oldNodes) {\n      return _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_1___default()(oldNodes).call(oldNodes, function (node) {\n        return node.id !== key;\n      });\n    });\n    dataContext.batchUpdateControlPropertyValues((0,designer_base_Main__WEBPACK_IMPORTED_MODULE_6__.createUpdateAction)([[id, {\n      Expression: newCheckedKeys.join(':')\n    }]]));\n  };\n  var onConfirm = function onConfirm() {\n    var checkedNodes = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_1___default()(treeDataFlatten).call(treeDataFlatten, function (node) {\n      return _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_2___default()(checkedKeys).call(checkedKeys, node.id) && (0,lodash__WEBPACK_IMPORTED_MODULE_11__.isUndefined)(node.children);\n    });\n    setCheckedNodes(checkedNodes);\n    dataContext.batchUpdateControlPropertyValues((0,designer_base_Main__WEBPACK_IMPORTED_MODULE_6__.createUpdateAction)([[id, {\n      Expression: checkedKeys.join(':')\n    }]])).then(function () {\n      setPanelVisible(false);\n    });\n  };\n  var handleClickAdd = function handleClickAdd() {\n    if (locked) return;\n    setPanelVisible(true);\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default().createElement((react__WEBPACK_IMPORTED_MODULE_4___default().Fragment), null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default().createElement(designer_base_Main__WEBPACK_IMPORTED_MODULE_6__.NameTipWrapper, {\n    nameHidden: nameHidden,\n    className: className,\n    name: name,\n    tips: tips,\n    required: required\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"div\", {\n    className: rootClass\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_5__.Tooltip, {\n    visible: panelVisible,\n    placement: \"bottomRight\",\n    popperClassName: \"\".concat(prefixCls, \"-fields-tree-panel-popper\"),\n    tip: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default().createElement(_common_FieldsAddPanel__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n      visible: panelVisible,\n      triggerRef: triggerRef,\n      setVisible: setPanelVisible,\n      onCancel: function onCancel() {\n        return setPanelVisible(false);\n      },\n      onConfirm: onConfirm\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"div\", {\n      className: \"\".concat(prefixCls, \"-tree-container\")\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default().createElement(_controls_common_SearchTree__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {\n      data: treeData,\n      checkable: true,\n      onCheck: onCheck,\n      checkedKeys: checkedKeys\n    })))\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"div\", {\n    className: classnames__WEBPACK_IMPORTED_MODULE_12___default()(\"\".concat(rootClass, \"-add\"), {\n      disabled: locked\n    }),\n    onClick: handleClickAdd,\n    ref: triggerRef\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_5__.Icon, {\n    type: \"add\"\n  }), (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_6__.getLangMsg)('ruled.clearValue.key0001'))), _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_3___default()(checkedNodes).call(checkedNodes, function (node) {\n    var name = node.text,\n      key = node.id;\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"div\", {\n      className: classnames__WEBPACK_IMPORTED_MODULE_12___default()(\"\".concat(rootClass, \"-field-item\"), {\n        disabled: locked\n      }),\n      key: key\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"div\", {\n      className: \"\".concat(rootClass, \"-field-item-label\")\n    }, name), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_5__.Icon, {\n      prefix: \"designericon\",\n      type: \"shanchu\",\n      onClick: function onClick() {\n        return handleDelete(key);\n      }\n    }));\n  })));\n};\n\n//# sourceURL=webpack://rule-designer/./src/editors/ClearValueAction.tsx?");

/***/ }),

/***/ 84332:
/*!**********************************************!*\
  !*** ./src/editors/ClientSetFieldAction.tsx ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CustomInput: function() { return /* binding */ CustomInput; }\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/keys */ 47976);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols */ 39448);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor */ 55748);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/for-each */ 7312);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors */ 54120);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-properties */ 63808);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-property */ 45040);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/toConsumableArray */ 30260);\n/* harmony import */ var _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/defineProperty */ 30112);\n/* harmony import */ var _babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/slicedToArray */ 95992);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ 75984);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/find */ 47332);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/concat */ 81744);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/filter */ 18860);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_trim__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/trim */ 52360);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_trim__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_trim__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! react */ 43400);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var _kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @kdcloudjs/kdesign */ 54116);\n/* harmony import */ var _kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_16__);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! designer_base/Main */ 18040);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(designer_base_Main__WEBPACK_IMPORTED_MODULE_17__);\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../context */ 90115);\n/* harmony import */ var _common_FieldsAddPanel__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./common/FieldsAddPanel */ 89004);\n/* harmony import */ var _common_FieldsItemWrap__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./common/FieldsItemWrap */ 88728);\n/* harmony import */ var _controls_common_SearchTree__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../controls/common/SearchTree */ 16612);\n/* harmony import */ var _utils_treeUtils__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../utils/treeUtils */ 31340);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! lodash */ 67928);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_23___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_23__);\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! classnames */ 71252);\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_24___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_24__);\n\n\n\n\n\n\n\n\n\n\nfunction ownKeys(e, r) { var t = _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0___default()(e); if ((_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1___default())) { var o = _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1___default()(e); r && (o = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_10___default()(o).call(o, function (r) { return _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2___default()(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var _context2, _context3; var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_3___default()(_context2 = ownKeys(Object(t), !0)).call(_context2, function (r) { (0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(e, r, t[r]); }) : (_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_4___default()) ? _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_5___default()(e, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_4___default()(t)) : _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_3___default()(_context3 = ownKeys(Object(t))).call(_context3, function (r) { _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_6___default()(e, r, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2___default()(t, r)); }); } return e; }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// ClientProperties: [\n//   {\n//       \"_Type_\": \"ClientProperty\",\n//       \"PropertyName\": \"name\",\n//        \"PropertyValue\": \"value\",\n//       \"Id\": \"kdtest_textfield\",\n//   }\n// ]\n\n/**\n *\n * @param props 设置字段属性-字段属性\n * @returns\n */\nvar CustomInput = function CustomInput(props) {\n  var className = props.className,\n    editor = props.editor,\n    name = props.Name,\n    tips = props.Tips,\n    field = props.field,\n    id = props.id;\n  var nameHidden = editor.NameHidden,\n    required = editor.Required;\n  var _useContext = (0,react__WEBPACK_IMPORTED_MODULE_15__.useContext)(_context__WEBPACK_IMPORTED_MODULE_18__.DesignerContext),\n    getKdesignerApi = _useContext.getKdesignerApi,\n    getPrefixCls = _useContext.getPrefixCls,\n    prefixCls = _useContext.prefixCls,\n    ruleMetaInfo = _useContext.ruleMetaInfo,\n    activeRuleNodeId = _useContext.activeRuleNodeId,\n    isLockRule = _useContext.isLockRule;\n  var _field$ClientProperti = field.ClientProperties,\n    clientProperties = _field$ClientProperti === void 0 ? [] : _field$ClientProperti,\n    actionType = field.ActionType;\n  var _getKdesignerApi = getKdesignerApi(),\n    dataContext = _getKdesignerApi.data;\n  var rootClass = getPrefixCls && getPrefixCls(prefixCls, 'setField-editor');\n  var locked = isLockRule();\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_15__.useState)(false),\n    _useState2 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(_useState, 2),\n    fieldSelectPanelVisible = _useState2[0],\n    setFieldSelectPanelVisible = _useState2[1];\n  var _useState3 = (0,react__WEBPACK_IMPORTED_MODULE_15__.useState)(false),\n    _useState4 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(_useState3, 2),\n    panelVisible = _useState4[0],\n    setPanelVisible = _useState4[1];\n  var _useState5 = (0,react__WEBPACK_IMPORTED_MODULE_15__.useState)(false),\n    _useState6 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(_useState5, 2),\n    editPanelVisibleIById = _useState6[0],\n    setEditPanelVisibleById = _useState6[1];\n  var triggerRef = (0,react__WEBPACK_IMPORTED_MODULE_15__.useRef)(null);\n  var editTooltipRef = (0,react__WEBPACK_IMPORTED_MODULE_15__.useRef)(null);\n  var editTriggerRef = (0,react__WEBPACK_IMPORTED_MODULE_15__.useRef)(null);\n  var propertyNameRef = (0,react__WEBPACK_IMPORTED_MODULE_15__.useRef)(null);\n  var clientPropertiesRef = (0,react__WEBPACK_IMPORTED_MODULE_15__.useRef)(clientProperties);\n  (0,react__WEBPACK_IMPORTED_MODULE_15__.useEffect)(function () {\n    if (!panelVisible || !editPanelVisibleIById) {\n      setFieldSelectPanelVisible(false);\n    }\n  }, [panelVisible, editPanelVisibleIById]);\n  var treeData = (0,react__WEBPACK_IMPORTED_MODULE_15__.useMemo)(function () {\n    return (0,_utils_treeUtils__WEBPACK_IMPORTED_MODULE_22__.getEditorEntityTree)(ruleMetaInfo, activeRuleNodeId, actionType);\n  }, [ruleMetaInfo, activeRuleNodeId, actionType]);\n  var treeDataFlatten = (0,react__WEBPACK_IMPORTED_MODULE_15__.useMemo)(function () {\n    return (0,_utils_treeUtils__WEBPACK_IMPORTED_MODULE_22__.getTreeDataFlatten)(treeData);\n  }, [treeData]);\n  var _useState7 = (0,react__WEBPACK_IMPORTED_MODULE_15__.useState)({}),\n    _useState8 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(_useState7, 2),\n    selectNode = _useState8[0],\n    setSelectNode = _useState8[1];\n  var _useState9 = (0,react__WEBPACK_IMPORTED_MODULE_15__.useState)(function () {\n      return _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_11___default()(clientProperties).call(clientProperties, function (clientProperty) {\n        var fieldItem = _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_12___default()(treeDataFlatten).call(treeDataFlatten, function (item) {\n          return item.id === clientProperty.Id;\n        });\n        return _objectSpread(_objectSpread({}, clientProperty), {}, {\n          Text: fieldItem === null || fieldItem === void 0 ? void 0 : fieldItem.text,\n          Ref: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createRef()\n        });\n      });\n    }),\n    _useState10 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(_useState9, 2),\n    selectNodeList = _useState10[0],\n    setSelectNodeList = _useState10[1];\n  (0,react__WEBPACK_IMPORTED_MODULE_15__.useEffect)(function () {\n    if (!(0,lodash__WEBPACK_IMPORTED_MODULE_23__.isEqual)(clientProperties, clientPropertiesRef.current)) {\n      var list = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_11___default()(clientProperties).call(clientProperties, function (clientProperty) {\n        var fieldItem = _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_12___default()(treeDataFlatten).call(treeDataFlatten, function (item) {\n          return item.id === clientProperty.Id;\n        });\n        return _objectSpread(_objectSpread({}, clientProperty), {}, {\n          Text: fieldItem === null || fieldItem === void 0 ? void 0 : fieldItem.text,\n          Ref: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createRef()\n        });\n      });\n      setSelectNodeList(list);\n      clientPropertiesRef.current = clientProperties;\n    }\n  }, [clientProperties]);\n  (0,react__WEBPACK_IMPORTED_MODULE_15__.useEffect)(function () {\n    if (selectNode.Id) {\n      propertyNameRef.current && propertyNameRef.current.focus();\n    }\n  }, [selectNode.Id]);\n  var onSelect = function onSelect(checked, node, event) {\n    var oldSelectNode = _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_12___default()(selectNodeList).call(selectNodeList, function (item) {\n      return item.Id === node.id;\n    });\n    if (oldSelectNode) {\n      setSelectNode(oldSelectNode);\n    } else {\n      setSelectNode({\n        Id: node.id,\n        PropertyName: '',\n        PropertyValue: '',\n        _Type_: 'ClientProperty',\n        Text: node.title,\n        Ref: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createRef()\n      });\n    }\n    setFieldSelectPanelVisible(false);\n  };\n  var onConfirm = function onConfirm() {\n    var isExist = false;\n    var clientProperties = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_11___default()(selectNodeList).call(selectNodeList, function (item) {\n      if (item.Id === selectNode.Id) {\n        item = selectNode;\n        isExist = true;\n      }\n      return item;\n    });\n    if (!isExist) {\n      var _context;\n      clientProperties = _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_13___default()(_context = []).call(_context, (0,_babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(selectNodeList), [selectNode]);\n    }\n    if ((0,lodash__WEBPACK_IMPORTED_MODULE_23__.isEqual)(clientProperties, selectNodeList)) {\n      setPanelVisible(false);\n      setEditPanelVisibleById(false);\n      setSelectNode({});\n      return;\n    }\n    setSelectNodeList(clientProperties);\n    dataContext.batchUpdateControlPropertyValues((0,designer_base_Main__WEBPACK_IMPORTED_MODULE_17__.createUpdateAction)([[id, {\n      ClientProperties: _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_11___default()(clientProperties).call(clientProperties, function (item) {\n        delete item.Text;\n        delete item.Ref;\n        return item;\n      })\n    }]])).then(function () {\n      setPanelVisible(false);\n      setEditPanelVisibleById(false);\n      setSelectNode({});\n    });\n  };\n  var handleClickEditIcon = (0,react__WEBPACK_IMPORTED_MODULE_15__.useCallback)(function (e, node) {\n    if (locked) return;\n    setSelectNode(node);\n    setEditPanelVisibleById(node.Id);\n  }, []);\n  var handleClickDeleteIcon = (0,react__WEBPACK_IMPORTED_MODULE_15__.useCallback)(function (_ref) {\n    var Id = _ref.Id;\n    if (locked) return;\n    var clientProperties = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_10___default()(selectNodeList).call(selectNodeList, function (node) {\n      return node.Id !== Id;\n    });\n    setSelectNodeList(clientProperties);\n    dataContext.batchUpdateControlPropertyValues((0,designer_base_Main__WEBPACK_IMPORTED_MODULE_17__.createUpdateAction)([[id, {\n      ClientProperties: _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_11___default()(clientProperties).call(clientProperties, function (item) {\n        delete item.Text;\n        return item;\n      })\n    }]]));\n  }, [selectNodeList]);\n  var handleChangeAttribute = (0,react__WEBPACK_IMPORTED_MODULE_15__.useCallback)(function (e, key) {\n    var _e$target;\n    var newSelectNode = _objectSpread({}, selectNode);\n    var value = (_e$target = e.target) === null || _e$target === void 0 || (_e$target = _e$target.value) === null || _e$target === void 0 ? void 0 : _babel_runtime_corejs3_core_js_stable_instance_trim__WEBPACK_IMPORTED_MODULE_14___default()(_e$target).call(_e$target);\n    if (key === 'name') {\n      newSelectNode.PropertyName = value;\n    } else if (key === 'value') {\n      newSelectNode.PropertyValue = value;\n    }\n    setSelectNode(newSelectNode);\n  }, [selectNode]);\n  var renderTooltipContent = function renderTooltipContent(triggerRef, visible, setVisible) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(_common_FieldsAddPanel__WEBPACK_IMPORTED_MODULE_19__[\"default\"], {\n      visible: visible,\n      triggerRef: triggerRef,\n      setVisible: setVisible,\n      onCancel: function onCancel() {\n        setVisible(false);\n      },\n      onConfirm: onConfirm\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"div\", {\n      className: \"\".concat(rootClass, \"-container\")\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(_common_FieldsItemWrap__WEBPACK_IMPORTED_MODULE_20__[\"default\"], {\n      label: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_17__.getLangMsg)('ruled.clientSetField.key0001'),\n      prefixCls: prefixCls\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_16__.Tooltip, {\n      popperClassName: \"\".concat(prefixCls, \"-tooltip-popper\"),\n      visible: fieldSelectPanelVisible,\n      onVisibleChange: function onVisibleChange(visible) {\n        return setFieldSelectPanelVisible(visible);\n      },\n      trigger: \"click\",\n      placement: \"bottomRight\",\n      tip: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"div\", {\n        className: \"\".concat(prefixCls, \"-tree-select-popper\")\n      }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(_controls_common_SearchTree__WEBPACK_IMPORTED_MODULE_21__[\"default\"], {\n        className: \"\".concat(prefixCls, \"-container-searchtree\"),\n        data: treeData,\n        onSelect: onSelect,\n        selectedNodeKeys: [selectNode === null || selectNode === void 0 ? void 0 : selectNode.Id],\n        expandAll: true\n      }))\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"div\", {\n      className: \"\".concat(rootClass, \"-container-select\")\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"span\", null, selectNode !== null && selectNode !== void 0 && selectNode.Text ? selectNode.Text : ''), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_16__.Icon, {\n      type: fieldSelectPanelVisible ? 'arrow-up' : 'arrow-down'\n    })))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(_common_FieldsItemWrap__WEBPACK_IMPORTED_MODULE_20__[\"default\"], {\n      label: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_17__.getLangMsg)('ruled.clientSetField.key0002'),\n      prefixCls: prefixCls\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_16__.Input, {\n      className: \"\".concat(rootClass, \"-container-input\"),\n      ref: propertyNameRef,\n      disabled: !(selectNode !== null && selectNode !== void 0 && selectNode.Text),\n      borderType: \"bordered\",\n      onChange: function onChange(e) {\n        return handleChangeAttribute(e, 'name');\n      },\n      value: selectNode.PropertyName\n    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(_common_FieldsItemWrap__WEBPACK_IMPORTED_MODULE_20__[\"default\"], {\n      label: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_17__.getLangMsg)('ruled.clientSetField.key0003'),\n      prefixCls: prefixCls\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_16__.Input, {\n      className: \"\".concat(rootClass, \"-container-input\"),\n      disabled: !(selectNode !== null && selectNode !== void 0 && selectNode.Text),\n      borderType: \"bordered\",\n      onChange: function onChange(e) {\n        return handleChangeAttribute(e, 'value');\n      },\n      value: selectNode.PropertyValue\n    }))));\n  };\n  var handleClickAdd = function handleClickAdd() {\n    if (locked) return;\n    setPanelVisible(true);\n    setSelectNode({});\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement((react__WEBPACK_IMPORTED_MODULE_15___default().Fragment), null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"div\", {\n    className: \"\".concat(rootClass, \"-header\")\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(designer_base_Main__WEBPACK_IMPORTED_MODULE_17__.NameTipWrapper, {\n    nameHidden: nameHidden,\n    className: className,\n    name: name,\n    tips: tips,\n    required: required\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_16__.Tooltip, {\n    visible: panelVisible,\n    placement: \"bottomRight\",\n    popperClassName: \"\".concat(prefixCls, \"-fields-add-panel-popper\"),\n    tip: renderTooltipContent(triggerRef, panelVisible, setPanelVisible)\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"div\", {\n    className: classnames__WEBPACK_IMPORTED_MODULE_24___default()(\"\".concat(rootClass, \"-add\"), {\n      disabled: locked\n    }),\n    onClick: handleClickAdd,\n    ref: triggerRef\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_16__.Icon, {\n    type: \"add\"\n  }), (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_17__.getLangMsg)('ruled.clientSetField.key0004')))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"div\", {\n    className: \"\".concat(rootClass, \"-body\")\n  }, _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_11___default()(selectNodeList).call(selectNodeList, function (node) {\n    var name = node.Text,\n      key = node.Id,\n      PropertyName = node.PropertyName,\n      PropertyValue = node.PropertyValue;\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"div\", {\n      className: classnames__WEBPACK_IMPORTED_MODULE_24___default()(\"\".concat(rootClass, \"-item\"), {\n        disabled: locked\n      }),\n      key: key\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_16__.Tooltip, {\n      visible: editPanelVisibleIById === key,\n      placement: \"bottomRight\",\n      popperClassName: \"\".concat(prefixCls, \"-fields-add-panel-popper\"),\n      scrollHidden: true,\n      tip: renderTooltipContent(node.Ref, editPanelVisibleIById === key, setEditPanelVisibleById)\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"div\", {\n      className: \"\".concat(rootClass, \"-item-header\"),\n      ref: node.Ref\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"p\", null, name), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"div\", {\n      className: \"\".concat(rootClass, \"-item-header-right\")\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_16__.Icon, {\n      className: \"\".concat(rootClass, \"-item-header-right-icon\"),\n      type: \"edit\",\n      onClick: function onClick(e) {\n        return handleClickEditIcon(e, node);\n      }\n    }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_16__.Icon, {\n      className: \"\".concat(rootClass, \"-item-header-right-icon\"),\n      type: \"delete\",\n      onClick: function onClick() {\n        return handleClickDeleteIcon(node);\n      }\n    })))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"p\", {\n      className: \"\".concat(rootClass, \"-item-text\")\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"label\", null, (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_17__.getLangMsg)('ruled.clientSetField.key0002')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"span\", null, PropertyName)), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"p\", {\n      className: \"\".concat(rootClass, \"-item-text\")\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"label\", null, (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_17__.getLangMsg)('ruled.clientSetField.key0003')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"span\", null, PropertyValue)));\n  })));\n};\n\n//# sourceURL=webpack://rule-designer/./src/editors/ClientSetFieldAction.tsx?");

/***/ }),

/***/ 8716:
/*!*************************************************!*\
  !*** ./src/editors/ClientSetFieldfmtAction.tsx ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CustomInput: function() { return /* binding */ CustomInput; }\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/keys */ 47976);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols */ 39448);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor */ 55748);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/for-each */ 7312);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors */ 54120);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-properties */ 63808);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-property */ 45040);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/defineProperty */ 30112);\n/* harmony import */ var _babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/slicedToArray */ 95992);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/filter */ 18860);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ 75984);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/find */ 47332);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/includes */ 82600);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_set_timeout__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/set-timeout */ 13760);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_set_timeout__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_set_timeout__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/concat */ 81744);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! react */ 43400);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var _kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @kdcloudjs/kdesign */ 54116);\n/* harmony import */ var _kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_16__);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! designer_base/Main */ 18040);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(designer_base_Main__WEBPACK_IMPORTED_MODULE_17__);\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../context */ 90115);\n/* harmony import */ var _common_FieldsAddPanel__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./common/FieldsAddPanel */ 89004);\n/* harmony import */ var _controls_common_SearchTree__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../controls/common/SearchTree */ 16612);\n/* harmony import */ var _utils_treeUtils__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../utils/treeUtils */ 31340);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! lodash */ 67928);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_22___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_22__);\n/* harmony import */ var _common_ColorEditor__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./common/ColorEditor */ 71828);\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! classnames */ 71252);\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_24___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_24__);\n\n\n\n\n\n\n\n\n\nfunction ownKeys(e, r) { var t = _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0___default()(e); if ((_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1___default())) { var o = _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1___default()(e); r && (o = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_9___default()(o).call(o, function (r) { return _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2___default()(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var _context10, _context11; var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_3___default()(_context10 = ownKeys(Object(t), !0)).call(_context10, function (r) { (0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(e, r, t[r]); }) : (_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_4___default()) ? _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_5___default()(e, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_4___default()(t)) : _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_3___default()(_context11 = ownKeys(Object(t))).call(_context11, function (r) { _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_6___default()(e, r, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2___default()(t, r)); }); } return e; }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// DisplayStyles: [\n//   {\n//       \"_Type_\": \"DisplayStyle\",\n//       \"FontSize\": \"12\",\n//       \"Id\": \"kdtest_textfield\",\n//       \"ForeColor\": \"#5E80EB\",\n//       \"BackgroundColor\": null\n//   }\n// ]\n/**\n/**\n *\n * @param props 设置字段显示样式-服务设置\n * @returns\n */\nvar CustomInput = function CustomInput(props) {\n  var className = props.className,\n    editor = props.editor,\n    name = props.Name,\n    tips = props.Tips,\n    field = props.field,\n    id = props.id;\n  var nameHidden = editor.NameHidden,\n    required = editor.Required;\n  var _useContext = (0,react__WEBPACK_IMPORTED_MODULE_15__.useContext)(_context__WEBPACK_IMPORTED_MODULE_18__.DesignerContext),\n    getKdesignerApi = _useContext.getKdesignerApi,\n    getPrefixCls = _useContext.getPrefixCls,\n    prefixCls = _useContext.prefixCls,\n    ruleMetaInfo = _useContext.ruleMetaInfo,\n    activeRuleNodeId = _useContext.activeRuleNodeId,\n    isLockRule = _useContext.isLockRule,\n    getRulesNodes = _useContext.getRulesNodes;\n  var _field$DisplayStyles = field.DisplayStyles,\n    displayStyles = _field$DisplayStyles === void 0 ? [] : _field$DisplayStyles,\n    actionType = field.ActionType;\n  var _getKdesignerApi = getKdesignerApi(),\n    dataContext = _getKdesignerApi.data;\n  var rootClass = getPrefixCls && getPrefixCls(prefixCls, 'checkFields-editor');\n  var locked = isLockRule();\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_15__.useState)(false),\n    _useState2 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(_useState, 2),\n    panelVisible = _useState2[0],\n    setPanelVisible = _useState2[1];\n  var _useState3 = (0,react__WEBPACK_IMPORTED_MODULE_15__.useState)(displayStyles),\n    _useState4 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(_useState3, 2),\n    fields = _useState4[0],\n    setFields = _useState4[1];\n  var triggerRef = (0,react__WEBPACK_IMPORTED_MODULE_15__.useRef)(null);\n  var timer = (0,react__WEBPACK_IMPORTED_MODULE_15__.useRef)(null);\n  var treeData = (0,react__WEBPACK_IMPORTED_MODULE_15__.useMemo)(function () {\n    return (0,_utils_treeUtils__WEBPACK_IMPORTED_MODULE_21__.getEditorEntityTree)(ruleMetaInfo, activeRuleNodeId, actionType);\n  }, [ruleMetaInfo, activeRuleNodeId, actionType]);\n  var treeDataFlatten = (0,react__WEBPACK_IMPORTED_MODULE_15__.useMemo)(function () {\n    return (0,_utils_treeUtils__WEBPACK_IMPORTED_MODULE_21__.getTreeDataFlatten)(treeData);\n  }, [treeData]);\n  var _useState5 = (0,react__WEBPACK_IMPORTED_MODULE_15__.useState)(function () {\n      var _context;\n      return _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_9___default()(_context = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_10___default()(displayStyles).call(displayStyles, function (_ref) {\n        var Id = _ref.Id;\n        var fieldItem = _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_11___default()(treeDataFlatten).call(treeDataFlatten, function (item) {\n          return item.id === Id;\n        });\n        return fieldItem === null || fieldItem === void 0 ? void 0 : fieldItem.id;\n      })).call(_context, Boolean);\n    }),\n    _useState6 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(_useState5, 2),\n    checkedKeys = _useState6[0],\n    setCheckedKeys = _useState6[1];\n  var checkedNodes = (0,react__WEBPACK_IMPORTED_MODULE_15__.useMemo)(function () {\n    var _context2;\n    return _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_9___default()(_context2 = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_10___default()(fields).call(fields, function (_ref2) {\n      var Id = _ref2.Id;\n      var fieldItem = _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_11___default()(treeDataFlatten).call(treeDataFlatten, function (item) {\n        return item.id === Id;\n      });\n      return fieldItem;\n    })).call(_context2, Boolean);\n  }, [fields]);\n  (0,react__WEBPACK_IMPORTED_MODULE_15__.useEffect)(function () {\n    if (!(0,lodash__WEBPACK_IMPORTED_MODULE_22__.isEqual)(displayStyles, fields)) {\n      var _context3;\n      setFields(displayStyles);\n      setCheckedKeys(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_9___default()(_context3 = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_10___default()(displayStyles).call(displayStyles, function (_ref3) {\n        var Id = _ref3.Id;\n        var fieldItem = _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_11___default()(treeDataFlatten).call(treeDataFlatten, function (item) {\n          return item.id === Id;\n        });\n        return fieldItem === null || fieldItem === void 0 ? void 0 : fieldItem.id;\n      })).call(_context3, Boolean));\n    }\n  }, [displayStyles]);\n  var onCheck = function onCheck(keys, _ref4) {\n    var value = _ref4.checked,\n      node = _ref4.node,\n      event = _ref4.event;\n    console.log('checkedKeys', value, keys, node);\n    var checkedNodes = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_9___default()(treeDataFlatten).call(treeDataFlatten, function (item) {\n      return _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_12___default()(keys).call(keys, item.id) && (0,lodash__WEBPACK_IMPORTED_MODULE_22__.isUndefined)(item.children);\n    });\n    setCheckedKeys(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_10___default()(checkedNodes).call(checkedNodes, function (item) {\n      return item.id;\n    }));\n  };\n  var handleDelete = function handleDelete(key) {\n    if (locked) return;\n    var newCheckedKeys = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_9___default()(checkedKeys).call(checkedKeys, function (k) {\n      return k !== key;\n    });\n    var newCheckedNodes = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_9___default()(checkedNodes).call(checkedNodes, function (node) {\n      return node.id !== key;\n    });\n    setCheckedKeys(newCheckedKeys);\n    var newValue = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_10___default()(newCheckedNodes).call(newCheckedNodes, function (node) {\n      var field = _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_11___default()(fields).call(fields, function (item) {\n        return item.Id === node.id;\n      });\n      var defaultField = {\n        _Type_: 'DisplayStyle',\n        FontSize: '12',\n        Id: node.id,\n        ForeColor: null,\n        BackgroundColor: null,\n        ValueFontSize: '12',\n        ValueForeColor: null,\n        ValueBackgroundColor: null\n      };\n      return field || defaultField;\n    });\n    setFields(newValue);\n    dataContext.batchUpdateControlPropertyValues((0,designer_base_Main__WEBPACK_IMPORTED_MODULE_17__.createUpdateAction)([[id, {\n      DisplayStyles: newValue\n    }]]));\n  };\n  var onColorChange = function onColorChange(colorType, value, styleId) {\n    var newDisplayStyles = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_10___default()(displayStyles).call(displayStyles, function (style) {\n      if (styleId === style.Id) {\n        return _objectSpread(_objectSpread({}, style), {}, (0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_7__[\"default\"])({}, colorType, value));\n      }\n      return style;\n    });\n    setFields(newDisplayStyles);\n    dataContext.batchUpdateControlPropertyValues((0,designer_base_Main__WEBPACK_IMPORTED_MODULE_17__.createUpdateAction)([[id, {\n      DisplayStyles: newDisplayStyles\n    }]]));\n  };\n  var delayUpdateValue = function delayUpdateValue(val) {\n    timer.current && clearTimeout(timer.current);\n    timer.current = _babel_runtime_corejs3_core_js_stable_set_timeout__WEBPACK_IMPORTED_MODULE_13___default()(function () {\n      timer.current = null;\n      dataContext.batchUpdateControlPropertyValues((0,designer_base_Main__WEBPACK_IMPORTED_MODULE_17__.createUpdateAction)([[id, {\n        DisplayStyles: val\n      }]]));\n    }, 300);\n  };\n  var onFontSizeChange = function onFontSizeChange(fontType, e, styleId) {\n    var value = e.target.value;\n    var newDisplayStyles = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_10___default()(displayStyles).call(displayStyles, function (style) {\n      if (styleId === style.Id) {\n        return _objectSpread(_objectSpread({}, style), {}, (0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_7__[\"default\"])({}, fontType, value));\n      }\n      return style;\n    });\n    setFields(newDisplayStyles);\n    delayUpdateValue(newDisplayStyles);\n  };\n  var onConfirm = function onConfirm() {\n    var newCheckedNodes = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_9___default()(treeDataFlatten).call(treeDataFlatten, function (item) {\n      return _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_12___default()(checkedKeys).call(checkedKeys, item.id) && (0,lodash__WEBPACK_IMPORTED_MODULE_22__.isUndefined)(item.children);\n    });\n    var newValue = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_10___default()(newCheckedNodes).call(newCheckedNodes, function (node) {\n      var field = _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_11___default()(fields).call(fields, function (item) {\n        return item.Id === node.id;\n      });\n      var defaultField = {\n        _Type_: 'DisplayStyle',\n        FontSize: '12',\n        Id: node.id,\n        ForeColor: null,\n        BackgroundColor: null,\n        ValueFontSize: '12',\n        ValueForeColor: null,\n        ValueBackgroundColor: null\n      };\n      return field || defaultField;\n    });\n    setFields(newValue);\n    dataContext.batchUpdateControlPropertyValues((0,designer_base_Main__WEBPACK_IMPORTED_MODULE_17__.createUpdateAction)([[id, {\n      DisplayStyles: newValue\n    }]])).then(function () {\n      setPanelVisible(false);\n    });\n  };\n  var handleClickAdd = function handleClickAdd() {\n    if (locked) return;\n    setPanelVisible(true);\n  };\n  var showValueEditor = function showValueEditor() {\n    var ruleNodes = getRulesNodes();\n    var nodesFilter = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_9___default()(ruleNodes).call(ruleNodes, function (node) {\n      return node.Id === activeRuleNodeId;\n    });\n    if (nodesFilter.length) {\n      var nodeType = nodesFilter[0]._Type_;\n      var showTypes = ['CardRowPanelAp', 'CardEntryRowAp'];\n      return _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_12___default()(showTypes).call(showTypes, nodeType);\n    }\n    return false;\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement((react__WEBPACK_IMPORTED_MODULE_15___default().Fragment), null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"div\", {\n    className: \"\".concat(rootClass, \"-header\")\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(designer_base_Main__WEBPACK_IMPORTED_MODULE_17__.NameTipWrapper, {\n    nameHidden: nameHidden,\n    className: className,\n    name: name,\n    tips: tips,\n    required: required\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_16__.Tooltip, {\n    visible: panelVisible,\n    placement: \"bottomRight\",\n    popperClassName: \"\".concat(prefixCls, \"-fields-tree-panel-popper\"),\n    tip: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(_common_FieldsAddPanel__WEBPACK_IMPORTED_MODULE_19__[\"default\"], {\n      visible: panelVisible,\n      triggerRef: triggerRef,\n      setVisible: setPanelVisible,\n      onCancel: function onCancel() {\n        return setPanelVisible(false);\n      },\n      onConfirm: onConfirm\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"div\", {\n      className: \"\".concat(prefixCls, \"-tree-container\")\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(_controls_common_SearchTree__WEBPACK_IMPORTED_MODULE_20__[\"default\"], {\n      data: treeData,\n      checkable: true,\n      onCheck: onCheck,\n      checkedKeys: checkedKeys\n    })))\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"div\", {\n    className: classnames__WEBPACK_IMPORTED_MODULE_24___default()(\"\".concat(rootClass, \"-add\"), {\n      disabled: locked\n    }),\n    onClick: handleClickAdd,\n    ref: triggerRef\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_16__.Icon, {\n    type: \"add\"\n  }), (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_17__.getLangMsg)('ruled.clientSetFieldfmt.key0001')))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"div\", {\n    className: \"\".concat(rootClass, \"-body\")\n  }, _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_10___default()(fields).call(fields, function (_ref5) {\n    var _context4, _context5, _context6, _context7, _context8, _context9;\n    var foreColor = _ref5.ForeColor,\n      backgroundColor = _ref5.BackgroundColor,\n      fontSize = _ref5.FontSize,\n      valueForeColor = _ref5.ValueForeColor,\n      valueFontSize = _ref5.ValueFontSize,\n      valueBackgroundColor = _ref5.ValueBackgroundColor,\n      Id = _ref5.Id;\n    var node = _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_11___default()(checkedNodes).call(checkedNodes, function (item) {\n      return item.id === Id;\n    });\n    if (!node) return null;\n    var name = node.text,\n      key = node.id;\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"div\", {\n      className: classnames__WEBPACK_IMPORTED_MODULE_24___default()(\"\".concat(rootClass, \"-field-form\"), {\n        disabled: locked\n      }),\n      key: key\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"div\", {\n      className: \"\".concat(rootClass, \"-field-header\")\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"div\", {\n      className: \"\".concat(rootClass, \"-field-name\")\n    }, name), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_16__.Icon, {\n      prefix: \"designericon\",\n      type: \"shanchu\",\n      onClick: function onClick() {\n        return handleDelete(key);\n      }\n    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"div\", {\n      className: \"\".concat(rootClass, \"-field-form-item\")\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"div\", {\n      className: _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_14___default()(_context4 = \"\".concat(rootClass, \"-field-form-item-block \")).call(_context4, rootClass, \"-field-form-item-ffsetting\")\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"div\", {\n      className: \"\".concat(rootClass, \"-field-form-label\")\n    }, (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_17__.getLangMsg)('ruled.clientSetFieldfmt.key0002')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_16__.Input, {\n      borderType: \"bordered\",\n      value: fontSize,\n      disabled: locked,\n      onChange: function onChange(e) {\n        return onFontSizeChange('FontSize', e, key);\n      }\n    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"div\", {\n      className: _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_14___default()(_context5 = \"\".concat(rootClass, \"-field-form-item-block \")).call(_context5, rootClass, \"-field-form-item-fontcolor\")\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"div\", {\n      className: \"\".concat(rootClass, \"-field-form-label\")\n    }, (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_17__.getLangMsg)('ruled.clientSetFieldfmt.key0003')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(_common_ColorEditor__WEBPACK_IMPORTED_MODULE_23__[\"default\"], {\n      className: \"\".concat(rootClass, \"-field-form-coloreditor\"),\n      disabled: locked,\n      hideThemeBtn: true,\n      hideAlphaInput: true,\n      type: \"foreColor\",\n      value: foreColor,\n      handleChange: function handleChange(value) {\n        return onColorChange('ForeColor', value, key);\n      }\n    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"div\", {\n      className: _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_14___default()(_context6 = \"\".concat(rootClass, \"-field-form-item-block \")).call(_context6, rootClass, \"-field-form-item-bgcolor\")\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"div\", {\n      className: \"\".concat(rootClass, \"-field-form-label\")\n    }, (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_17__.getLangMsg)('ruled.clientSetFieldfmt.key0004')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(_common_ColorEditor__WEBPACK_IMPORTED_MODULE_23__[\"default\"], {\n      className: \"\".concat(rootClass, \"-field-form-coloreditor\"),\n      disabled: locked,\n      hideThemeBtn: true,\n      hideAlphaInput: true,\n      type: \"backgroundColor\",\n      value: backgroundColor,\n      handleChange: function handleChange(value) {\n        return onColorChange('BackgroundColor', value, key);\n      }\n    }))), showValueEditor() && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"div\", {\n      className: \"\".concat(rootClass, \"-field-form-item\")\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"div\", {\n      className: _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_14___default()(_context7 = \"\".concat(rootClass, \"-field-form-item-block \")).call(_context7, rootClass, \"-field-form-item-ffsetting\")\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"div\", {\n      className: \"\".concat(rootClass, \"-field-form-label\")\n    }, (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_17__.getLangMsg)('ruled.clientSetFieldfmt.key0005')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_16__.Input, {\n      borderType: \"bordered\",\n      value: valueFontSize,\n      disabled: locked,\n      onChange: function onChange(e) {\n        return onFontSizeChange('ValueFontSize', e, key);\n      }\n    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"div\", {\n      className: _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_14___default()(_context8 = \"\".concat(rootClass, \"-field-form-item-block \")).call(_context8, rootClass, \"-field-form-item-fontcolor\")\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"div\", {\n      className: \"\".concat(rootClass, \"-field-form-label\")\n    }, (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_17__.getLangMsg)('ruled.clientSetFieldfmt.key0006')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(_common_ColorEditor__WEBPACK_IMPORTED_MODULE_23__[\"default\"], {\n      className: \"\".concat(rootClass, \"-field-form-coloreditor\"),\n      disabled: locked,\n      hideThemeBtn: true,\n      hideAlphaInput: true,\n      type: \"foreColor\",\n      value: valueForeColor,\n      handleChange: function handleChange(value) {\n        return onColorChange('ValueForeColor', value, key);\n      }\n    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"div\", {\n      className: _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_14___default()(_context9 = \"\".concat(rootClass, \"-field-form-item-block \")).call(_context9, rootClass, \"-field-form-item-bgcolor\")\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"div\", {\n      className: \"\".concat(rootClass, \"-field-form-label\")\n    }, (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_17__.getLangMsg)('ruled.clientSetFieldfmt.key0007')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(_common_ColorEditor__WEBPACK_IMPORTED_MODULE_23__[\"default\"], {\n      className: \"\".concat(rootClass, \"-field-form-coloreditor\"),\n      disabled: locked,\n      hideThemeBtn: true,\n      hideAlphaInput: true,\n      type: \"backgroundColor\",\n      value: valueBackgroundColor,\n      handleChange: function handleChange(value) {\n        return onColorChange('ValueBackgroundColor', value, key);\n      }\n    }))));\n  })));\n};\n\n//# sourceURL=webpack://rule-designer/./src/editors/ClientSetFieldfmtAction.tsx?");

/***/ }),

/***/ 90396:
/*!***********************************************!*\
  !*** ./src/editors/ClientSetRowFmtAction.tsx ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CustomInput: function() { return /* binding */ CustomInput; }\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/keys */ 47976);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols */ 39448);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/filter */ 18860);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor */ 55748);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/for-each */ 7312);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors */ 54120);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-properties */ 63808);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-property */ 45040);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/defineProperty */ 30112);\n/* harmony import */ var _babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/slicedToArray */ 95992);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_set_timeout__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/set-timeout */ 13760);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_set_timeout__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_set_timeout__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/concat */ 81744);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! react */ 43400);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var _kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @kdcloudjs/kdesign */ 54116);\n/* harmony import */ var _kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! designer_base/Main */ 18040);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(designer_base_Main__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../context */ 90115);\n/* harmony import */ var _common_ColorEditor__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./common/ColorEditor */ 71828);\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! classnames */ 71252);\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_17__);\n\n\n\n\n\n\n\n\n\n\n\n\nfunction ownKeys(e, r) { var t = _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0___default()(e); if ((_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1___default())) { var o = _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1___default()(e); r && (o = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_2___default()(o).call(o, function (r) { return _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_3___default()(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var _context4, _context5; var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_4___default()(_context4 = ownKeys(Object(t), !0)).call(_context4, function (r) { (0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(e, r, t[r]); }) : (_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5___default()) ? _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_6___default()(e, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5___default()(t)) : _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_4___default()(_context5 = ownKeys(Object(t))).call(_context5, function (r) { _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_7___default()(e, r, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_3___default()(t, r)); }); } return e; }\n\n\n\n\n\n\n\n/**\n *\n * @param props 设置行样式-服务设置\n * @returns\n */\nvar CustomInput = function CustomInput(props) {\n  var _context, _context2, _context3;\n  var field = props.field,\n    id = props.id;\n  var _useContext = (0,react__WEBPACK_IMPORTED_MODULE_12__.useContext)(_context__WEBPACK_IMPORTED_MODULE_15__.DesignerContext),\n    getKdesignerApi = _useContext.getKdesignerApi,\n    getPrefixCls = _useContext.getPrefixCls,\n    prefixCls = _useContext.prefixCls,\n    isLockRule = _useContext.isLockRule;\n  var _field$DisplayStyles = field.DisplayStyles,\n    DisplayStyles = _field$DisplayStyles === void 0 ? [] : _field$DisplayStyles;\n  var _getKdesignerApi = getKdesignerApi(),\n    dataContext = _getKdesignerApi.data;\n  var rootClass = getPrefixCls && getPrefixCls(prefixCls, 'checkFields-editor');\n  var locked = isLockRule();\n  var defaultDisplayStyles = {\n    _Type_: 'DisplayStyle',\n    FontSize: '12',\n    Id: 'RowFormatSet',\n    ForeColor: null,\n    BackgroundColor: null\n  };\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_12__.useState)(DisplayStyles[0] || defaultDisplayStyles),\n    _useState2 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(_useState, 2),\n    displayStyles = _useState2[0],\n    setDisplayStyles = _useState2[1];\n  var timer = (0,react__WEBPACK_IMPORTED_MODULE_12__.useRef)(null);\n  var onColorChange = function onColorChange(colorType, value) {\n    var newDisplayStyles = _objectSpread(_objectSpread({}, displayStyles), {}, (0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__[\"default\"])({}, colorType, value));\n    setDisplayStyles(newDisplayStyles);\n    dataContext.batchUpdateControlPropertyValues((0,designer_base_Main__WEBPACK_IMPORTED_MODULE_14__.createUpdateAction)([[id, {\n      DisplayStyles: [newDisplayStyles]\n    }]]));\n  };\n  var delayUpdateValue = function delayUpdateValue(val) {\n    timer.current && clearTimeout(timer.current);\n    timer.current = _babel_runtime_corejs3_core_js_stable_set_timeout__WEBPACK_IMPORTED_MODULE_10___default()(function () {\n      timer.current = null;\n      dataContext.batchUpdateControlPropertyValues((0,designer_base_Main__WEBPACK_IMPORTED_MODULE_14__.createUpdateAction)([[id, {\n        DisplayStyles: val\n      }]]));\n    }, 300);\n  };\n  var onFontSizeChange = function onFontSizeChange(e) {\n    var value = e.target.value;\n    var newDisplayStyles = _objectSpread(_objectSpread({}, displayStyles), {}, {\n      FontSize: value\n    });\n    setDisplayStyles(newDisplayStyles);\n    delayUpdateValue([newDisplayStyles]);\n  };\n  var foreColor = displayStyles.ForeColor,\n    backgroundColor = displayStyles.BackgroundColor,\n    fontSize = displayStyles.FontSize;\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default().createElement(\"div\", {\n    className: \"\".concat(rootClass, \"-body\")\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default().createElement(\"div\", {\n    className: classnames__WEBPACK_IMPORTED_MODULE_17___default()(\"\".concat(rootClass, \"-field-form\"), {\n      disabled: locked\n    })\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default().createElement(\"div\", {\n    className: \"\".concat(rootClass, \"-field-header\")\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default().createElement(\"div\", {\n    className: \"\".concat(rootClass, \"-field-name\")\n  }, (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_14__.getLangMsg)('ruled.clientSetRowFmt.key0001'))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default().createElement(\"div\", {\n    className: \"\".concat(rootClass, \"-field-form-item\")\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default().createElement(\"div\", {\n    className: _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_11___default()(_context = \"\".concat(rootClass, \"-field-form-item-block \")).call(_context, rootClass, \"-field-form-item-ffsetting\")\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default().createElement(\"div\", {\n    className: \"\".concat(rootClass, \"-field-form-label\")\n  }, (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_14__.getLangMsg)('ruled.clientSetRowFmt.key0002')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_13__.Input, {\n    borderType: \"bordered\",\n    value: fontSize,\n    disabled: locked,\n    onChange: onFontSizeChange\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default().createElement(\"div\", {\n    className: _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_11___default()(_context2 = \"\".concat(rootClass, \"-field-form-item-block \")).call(_context2, rootClass, \"-field-form-item-fontcolor\")\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default().createElement(\"div\", {\n    className: \"\".concat(rootClass, \"-field-form-label\")\n  }, (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_14__.getLangMsg)('ruled.clientSetRowFmt.key0003')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default().createElement(_common_ColorEditor__WEBPACK_IMPORTED_MODULE_16__[\"default\"], {\n    className: \"\".concat(rootClass, \"-field-form-coloreditor\"),\n    disabled: locked,\n    hideThemeBtn: true,\n    hideAlphaInput: true,\n    type: \"foreColor\",\n    value: foreColor,\n    handleChange: function handleChange(value) {\n      return onColorChange('ForeColor', value);\n    }\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default().createElement(\"div\", {\n    className: _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_11___default()(_context3 = \"\".concat(rootClass, \"-field-form-item-block \")).call(_context3, rootClass, \"-field-form-item-bgcolor\")\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default().createElement(\"div\", {\n    className: \"\".concat(rootClass, \"-field-form-label\")\n  }, (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_14__.getLangMsg)('ruled.clientSetRowFmt.key0004')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default().createElement(_common_ColorEditor__WEBPACK_IMPORTED_MODULE_16__[\"default\"], {\n    className: \"\".concat(rootClass, \"-field-form-coloreditor\"),\n    disabled: locked,\n    hideThemeBtn: true,\n    hideAlphaInput: true,\n    type: \"backgroundColor\",\n    value: backgroundColor,\n    handleChange: function handleChange(value) {\n      return onColorChange('BackgroundColor', value);\n    }\n  })))));\n};\n\n//# sourceURL=webpack://rule-designer/./src/editors/ClientSetRowFmtAction.tsx?");

/***/ }),

/***/ 85020:
/*!**************************************!*\
  !*** ./src/editors/CustomAction.tsx ***!
  \**************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols */ 39448);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/filter */ 18860);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor */ 55748);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors */ 54120);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-properties */ 63808);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-property */ 45040);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _babel_runtime_corejs3_helpers_extends__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/extends */ 2664);\n/* harmony import */ var _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/defineProperty */ 30112);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/for-each */ 7312);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/keys */ 47976);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/json/stringify */ 39832);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/find */ 47332);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! react */ 43400);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! designer_base/Main */ 18040);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(designer_base_Main__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var _common_CustomInputTrigger__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./common/CustomInputTrigger */ 57092);\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../context */ 90115);\n\n\n\n\n\n\n\n\n\n\n\n\nfunction ownKeys(e, r) { var t = _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_9___default()(e); if ((_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_0___default())) { var o = _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_0___default()(e); r && (o = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_1___default()(o).call(o, function (r) { return _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2___default()(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var _context, _context2; var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(_context = ownKeys(Object(t), !0)).call(_context, function (r) { (0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(e, r, t[r]); }) : (_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_3___default()) ? _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_4___default()(e, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_3___default()(t)) : _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(_context2 = ownKeys(Object(t))).call(_context2, function (r) { _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_5___default()(e, r, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2___default()(t, r)); }); } return e; }\n\n\n\n\nvar omitActionNodeKeys = ['__Type__', '_Type_', 'Type', 'RET', 'ParentId', 'NodeType', 'Id', 'Description', 'ActionType'];\nvar getNodeValueByOmitKeys = function getNodeValueByOmitKeys(node) {\n  var omitNodeVal = _objectSpread({}, node);\n  _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(omitActionNodeKeys).call(omitActionNodeKeys, function (key) {\n    delete omitNodeVal[key];\n  });\n  return _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_9___default()(omitNodeVal).length ? _babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_10___default()(omitNodeVal) : '';\n};\nvar CustomActionEditor = function CustomActionEditor(props) {\n  var field = props.field,\n    id = props.id;\n  var propValue = getNodeValueByOmitKeys(field);\n  var actionType = field.ActionType;\n  var _useContext = (0,react__WEBPACK_IMPORTED_MODULE_12__.useContext)(_context__WEBPACK_IMPORTED_MODULE_15__.DesignerContext),\n    getKdesignerApi = _useContext.getKdesignerApi,\n    invokeAction = _useContext.invokeAction,\n    metaType = _useContext.metaType,\n    activeRuleNodeId = _useContext.activeRuleNodeId,\n    ruleMetaInfo = _useContext.ruleMetaInfo,\n    isLockRule = _useContext.isLockRule;\n  var _getKdesignerApi = getKdesignerApi(),\n    dataContext = _getKdesignerApi.data;\n  var locked = isLockRule();\n  (0,react__WEBPACK_IMPORTED_MODULE_12__.useEffect)(function () {\n    designer_base_Main__WEBPACK_IMPORTED_MODULE_13__.eventBus.on('setCustomRuleAction', setCustomRuleAction);\n    return function () {\n      designer_base_Main__WEBPACK_IMPORTED_MODULE_13__.eventBus.off('setCustomRuleAction', setCustomRuleAction);\n    };\n  }, []);\n  var setCustomRuleAction = function setCustomRuleAction() {\n    var properties = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    properties = properties || {};\n    dataContext.batchUpdateControlPropertyValues((0,designer_base_Main__WEBPACK_IMPORTED_MODULE_13__.createUpdateAction)([[id, _objectSpread({}, properties)]]));\n  };\n  var handleClick = function handleClick() {\n    var serviceTypes = ruleMetaInfo[0].serviceType;\n    var serviceType = _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_11___default()(serviceTypes).call(serviceTypes, function (service) {\n      return service.metaClass === actionType;\n    });\n    var args = {\n      metaType: metaType,\n      treeNodeId: activeRuleNodeId,\n      serviceType: serviceType,\n      value: field\n    };\n    invokeAction('showCustomRuleServiceSetting', [_babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_10___default()(args)]);\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default().createElement((react__WEBPACK_IMPORTED_MODULE_12___default().Fragment), null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default().createElement(_common_CustomInputTrigger__WEBPACK_IMPORTED_MODULE_14__[\"default\"], (0,_babel_runtime_corejs3_helpers_extends__WEBPACK_IMPORTED_MODULE_6__[\"default\"])({}, props, {\n    disabled: locked,\n    value: propValue,\n    onClick: handleClick\n  })));\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (CustomActionEditor);\n\n//# sourceURL=webpack://rule-designer/./src/editors/CustomAction.tsx?");

/***/ }),

/***/ 93312:
/*!***************************************!*\
  !*** ./src/editors/FillQtyAction.tsx ***!
  \***************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CustomInput: function() { return /* binding */ CustomInput; }\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/keys */ 47976);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols */ 39448);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor */ 55748);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/for-each */ 7312);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors */ 54120);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-properties */ 63808);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-property */ 45040);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/defineProperty */ 30112);\n/* harmony import */ var _babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/slicedToArray */ 95992);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/filter */ 18860);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/includes */ 82600);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ 75984);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/find */ 47332);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/json/stringify */ 39832);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/concat */ 81744);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! react */ 43400);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! designer_base/Main */ 18040);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(designer_base_Main__WEBPACK_IMPORTED_MODULE_16__);\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../context */ 90115);\n/* harmony import */ var _common_FieldsAddPanel__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./common/FieldsAddPanel */ 89004);\n/* harmony import */ var _common_FieldsItemWrap__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./common/FieldsItemWrap */ 88728);\n/* harmony import */ var _kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @kdcloudjs/kdesign */ 54116);\n/* harmony import */ var _kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_20___default = /*#__PURE__*/__webpack_require__.n(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_20__);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! lodash */ 67928);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_21___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_21__);\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! classnames */ 71252);\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_22___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_22__);\n\n\n\n\n\n\n\n\n\nfunction ownKeys(e, r) { var t = _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0___default()(e); if ((_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1___default())) { var o = _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1___default()(e); r && (o = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_9___default()(o).call(o, function (r) { return _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2___default()(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var _context3, _context4; var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_3___default()(_context3 = ownKeys(Object(t), !0)).call(_context3, function (r) { (0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(e, r, t[r]); }) : (_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_4___default()) ? _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_5___default()(e, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_4___default()(t)) : _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_3___default()(_context4 = ownKeys(Object(t))).call(_context4, function (r) { _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_6___default()(e, r, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2___default()(t, r)); }); } return e; }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// [\n//   {\n//       \"distQtyField\": \"kdtest_qtyfield1\",\n//       \"srcQtyField\": \"kdtest_qtyfield\"\n//   }\n// ]\n/**\n *\n * @param props 数量换算-服务设置\n * @returns\n */\nvar CustomInput = function CustomInput(props) {\n  var className = props.className,\n    editor = props.editor,\n    name = props.Name,\n    tips = props.Tips,\n    field = props.field,\n    id = props.id;\n  var _field$Expression = field.Expression,\n    expressions = _field$Expression === void 0 ? '' : _field$Expression;\n  expressions = expressions ? JSON.parse(expressions) : [];\n  var nameHidden = editor.NameHidden,\n    required = editor.Required;\n  var _useContext = (0,react__WEBPACK_IMPORTED_MODULE_15__.useContext)(_context__WEBPACK_IMPORTED_MODULE_17__.DesignerContext),\n    getKdesignerApi = _useContext.getKdesignerApi,\n    getPrefixCls = _useContext.getPrefixCls,\n    prefixCls = _useContext.prefixCls,\n    getDataRef = _useContext.getDataRef,\n    isLockRule = _useContext.isLockRule;\n  var _getKdesignerApi = getKdesignerApi(),\n    dataContext = _getKdesignerApi.data;\n  var _useContext2 = (0,react__WEBPACK_IMPORTED_MODULE_15__.useContext)(designer_base_Main__WEBPACK_IMPORTED_MODULE_16__.GlobalConfigContext),\n    showMessage = _useContext2.showMessage;\n  var rootClass = getPrefixCls && getPrefixCls(prefixCls, 'fillQty-editor');\n  var _getDataRef = getDataRef(),\n    entitymeta = _getDataRef.entitymeta;\n  var locked = isLockRule();\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_15__.useState)(false),\n    _useState2 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(_useState, 2),\n    panelVisible = _useState2[0],\n    setPanelVisible = _useState2[1];\n  var _useState3 = (0,react__WEBPACK_IMPORTED_MODULE_15__.useState)({}),\n    _useState4 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(_useState3, 2),\n    currentFieldKeyData = _useState4[0],\n    setCurrentFieldKeyData = _useState4[1];\n  var triggerRef = (0,react__WEBPACK_IMPORTED_MODULE_15__.useRef)(null);\n  var editTriggerRef = (0,react__WEBPACK_IMPORTED_MODULE_15__.useRef)(null);\n  var qtyTypes = ['BaseUnitqtyField', 'QtyField'];\n  var qtyOptions = (0,react__WEBPACK_IMPORTED_MODULE_15__.useMemo)(function () {\n    var _context;\n    var qtyEntity = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_9___default()(_context = entitymeta.Items).call(_context, function (item) {\n      return _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_10___default()(qtyTypes).call(qtyTypes, item._Type_);\n    });\n    return _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_11___default()(qtyEntity).call(qtyEntity, function (qty) {\n      return {\n        label: qty.Name,\n        value: qty.Key\n      };\n    });\n  }, entitymeta);\n  var addQtyFields = function addQtyFields(e) {\n    if (locked) return;\n    editTriggerRef.current = e.target;\n    setCurrentFieldKeyData({});\n    setPanelVisible(true);\n  };\n  var handleSrcQtyChange = function handleSrcQtyChange(value) {\n    if (value !== currentFieldKeyData.distQtyField) {\n      setCurrentFieldKeyData(function (data) {\n        return _objectSpread(_objectSpread({}, data), {}, {\n          srcQtyField: value\n        });\n      });\n    } else {\n      showMessage((0,designer_base_Main__WEBPACK_IMPORTED_MODULE_16__.getLangMsg)('ruled.fillQty.key0001'));\n    }\n  };\n  var handleDistQtyChange = function handleDistQtyChange(value) {\n    if (value !== currentFieldKeyData.srcQtyField) {\n      setCurrentFieldKeyData(function (data) {\n        return _objectSpread(_objectSpread({}, data), {}, {\n          distQtyField: value\n        });\n      });\n    } else {\n      showMessage((0,designer_base_Main__WEBPACK_IMPORTED_MODULE_16__.getLangMsg)('ruled.fillQty.key0001'));\n    }\n  };\n  var getFieldName = function getFieldName(key) {\n    var _context2;\n    var item = _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_12___default()(_context2 = entitymeta.Items).call(_context2, function (opt) {\n      return opt.Key === key;\n    });\n    return (item === null || item === void 0 ? void 0 : item.Name) || '';\n  };\n\n  // 更新值\n  var batchUpdateControlData = function batchUpdateControlData(data) {\n    dataContext.batchUpdateControlPropertyValues((0,designer_base_Main__WEBPACK_IMPORTED_MODULE_16__.createUpdateAction)([[id, {\n      Expression: _babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_13___default()(data)\n    }]])).then(function () {\n      setPanelVisible(false);\n      setCurrentFieldKeyData({});\n    });\n  };\n\n  // 确认添加\n  var confirmAdd = function confirmAdd() {\n    var srcQtyField = currentFieldKeyData.srcQtyField,\n      distQtyField = currentFieldKeyData.distQtyField;\n    if (!(srcQtyField || distQtyField)) return showMessage((0,designer_base_Main__WEBPACK_IMPORTED_MODULE_16__.getLangMsg)('ruled.fillQty.key0002'));\n    var newExpression = _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_14___default()(expressions).call(expressions, {\n      distQtyField: distQtyField,\n      srcQtyField: srcQtyField\n    });\n    batchUpdateControlData(newExpression);\n  };\n\n  // 确认编辑\n  var confirmEdit = function confirmEdit() {\n    var newExpressions = (0,lodash__WEBPACK_IMPORTED_MODULE_21__.cloneDeep)(expressions);\n    var index = currentFieldKeyData.index,\n      srcQtyField = currentFieldKeyData.srcQtyField,\n      distQtyField = currentFieldKeyData.distQtyField;\n\n    // 只更改了源数量\n    if (srcQtyField) {\n      newExpressions[index].srcQtyField = srcQtyField;\n    }\n\n    // 只更改了目标数量\n    if (distQtyField) {\n      newExpressions[index].distQtyField = distQtyField;\n    }\n    batchUpdateControlData(newExpressions);\n  };\n  var onConfirm = function onConfirm() {\n    if ((0,lodash__WEBPACK_IMPORTED_MODULE_21__.isUndefined)(currentFieldKeyData === null || currentFieldKeyData === void 0 ? void 0 : currentFieldKeyData.index)) {\n      confirmAdd();\n    } else {\n      confirmEdit();\n    }\n  };\n  var handleEdit = function handleEdit(e, index) {\n    if (locked) return;\n    editTriggerRef.current = e.target;\n    var cueEditExpression = _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_12___default()(expressions).call(expressions, function (exp, idx) {\n      return idx === index;\n    }) || {};\n    setCurrentFieldKeyData(_objectSpread(_objectSpread({}, cueEditExpression), {}, {\n      index: index\n    }));\n    setPanelVisible(true);\n  };\n  var handleDelete = function handleDelete(index) {\n    if (locked) return;\n    var newExpression = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_9___default()(expressions).call(expressions, function (exp, idx) {\n      return idx !== index;\n    });\n    dataContext.batchUpdateControlPropertyValues((0,designer_base_Main__WEBPACK_IMPORTED_MODULE_16__.createUpdateAction)([[id, {\n      Expression: _babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_13___default()(newExpression)\n    }]]));\n  };\n  var nameStyle = {\n    width: '205px'\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement((react__WEBPACK_IMPORTED_MODULE_15___default().Fragment), null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(designer_base_Main__WEBPACK_IMPORTED_MODULE_16__.NameTipWrapper, {\n    nameHidden: nameHidden,\n    className: className,\n    name: name,\n    tips: tips,\n    required: required,\n    nameStyle: nameStyle\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"div\", {\n    className: rootClass\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_20__.Tooltip, {\n    ref: triggerRef,\n    visible: panelVisible,\n    placement: \"bottomRight\",\n    popperClassName: \"\".concat(prefixCls, \"-fields-add-panel-popper\"),\n    getTriggerElement: function getTriggerElement() {\n      return editTriggerRef.current || triggerRef.current;\n    },\n    tip: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(_common_FieldsAddPanel__WEBPACK_IMPORTED_MODULE_18__[\"default\"], {\n      visible: panelVisible,\n      triggerRef: editTriggerRef || triggerRef,\n      setVisible: function setVisible(visible) {\n        setPanelVisible(visible);\n        !visible && setCurrentFieldKeyData({});\n      },\n      onCancel: function onCancel() {\n        setCurrentFieldKeyData({});\n        setPanelVisible(false);\n      },\n      onConfirm: onConfirm\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(_common_FieldsItemWrap__WEBPACK_IMPORTED_MODULE_19__[\"default\"], {\n      label: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_16__.getLangMsg)('ruled.fillQty.key0003'),\n      prefixCls: prefixCls\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_20__.Select, {\n      className: \"\".concat(prefixCls, \"-fields-item-trigger\"),\n      popperClassName: \"\".concat(prefixCls, \"-select-popper\"),\n      scrollHidden: true,\n      placeholder: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_16__.getLangMsg)('ruled.fillQty.key0004'),\n      borderType: \"bordered\",\n      value: currentFieldKeyData === null || currentFieldKeyData === void 0 ? void 0 : currentFieldKeyData.srcQtyField,\n      options: qtyOptions,\n      onChange: handleSrcQtyChange,\n      notFoundContent: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_16__.getLangMsg)('ruled.fillQty.key0007')\n    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(_common_FieldsItemWrap__WEBPACK_IMPORTED_MODULE_19__[\"default\"], {\n      label: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_16__.getLangMsg)('ruled.fillQty.key0005'),\n      prefixCls: prefixCls\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_20__.Select, {\n      className: \"\".concat(prefixCls, \"-fields-item-trigger\"),\n      popperClassName: \"\".concat(prefixCls, \"-select-popper\"),\n      scrollHidden: true,\n      placeholder: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_16__.getLangMsg)('ruled.fillQty.key0004'),\n      borderType: \"bordered\",\n      value: currentFieldKeyData === null || currentFieldKeyData === void 0 ? void 0 : currentFieldKeyData.distQtyField,\n      options: qtyOptions,\n      onChange: handleDistQtyChange,\n      notFoundContent: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_16__.getLangMsg)('ruled.fillQty.key0007')\n    })))\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"div\", {\n    ref: editTriggerRef,\n    className: classnames__WEBPACK_IMPORTED_MODULE_22___default()(\"\".concat(rootClass, \"-add\"), {\n      disabled: locked\n    }),\n    onClick: addQtyFields\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_20__.Icon, {\n    type: \"add\"\n  }), (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_16__.getLangMsg)('ruled.fillQty.key0006'))), _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_11___default()(expressions).call(expressions, function (qtyField, index) {\n    var distQtyField = qtyField.distQtyField,\n      srcQtyField = qtyField.srcQtyField;\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"div\", {\n      className: classnames__WEBPACK_IMPORTED_MODULE_22___default()(\"\".concat(rootClass, \"-field-name\"), {\n        disabled: locked,\n        edit: (currentFieldKeyData === null || currentFieldKeyData === void 0 ? void 0 : currentFieldKeyData.index) === index\n      }),\n      key: index\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"div\", {\n      className: \"\".concat(rootClass, \"-field-name-wrap\")\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"div\", {\n      className: \"\".concat(rootClass, \"-field-name-item\")\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"div\", {\n      className: \"\".concat(rootClass, \"-field-name-label\")\n    }, (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_16__.getLangMsg)('ruled.fillQty.key0003')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"div\", {\n      className: \"\".concat(rootClass, \"-field-name-value\")\n    }, getFieldName(srcQtyField))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"div\", {\n      className: \"\".concat(rootClass, \"-field-name-item\")\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"div\", {\n      className: \"\".concat(rootClass, \"-field-name-label\")\n    }, (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_16__.getLangMsg)('ruled.fillQty.key0005')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"div\", {\n      className: \"\".concat(rootClass, \"-field-name-value\")\n    }, getFieldName(distQtyField))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_20__.Icon, {\n      type: \"edit\",\n      className: \"\".concat(rootClass, \"-field-name-item-edit\"),\n      onClick: function onClick(e) {\n        return handleEdit(e, index);\n      }\n    }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_20__.Icon, {\n      prefix: \"designericon\",\n      type: \"shanchu\",\n      onClick: function onClick() {\n        return handleDelete(index);\n      }\n    })));\n  })));\n};\n\n//# sourceURL=webpack://rule-designer/./src/editors/FillQtyAction.tsx?");

/***/ }),

/***/ 57456:
/*!***************************************!*\
  !*** ./src/editors/FormulaAction.tsx ***!
  \***************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CustomInput: function() { return /* binding */ CustomInput; }\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_corejs3_helpers_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/extends */ 2664);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ 43400);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _condition__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./condition */ 83452);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! designer_base/Main */ 18040);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(designer_base_Main__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../context */ 90115);\n\n\n\n\n\nvar CustomInput = function CustomInput(props) {\n  var _useContext = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(_context__WEBPACK_IMPORTED_MODULE_4__.DesignerContext),\n    isLockRule = _useContext.isLockRule;\n  var locked = isLockRule();\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_condition__WEBPACK_IMPORTED_MODULE_2__[\"default\"], (0,_babel_runtime_corejs3_helpers_extends__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({}, props, {\n    locked: locked,\n    actionType: \"FormulaAction\",\n    propName: \"Expression\",\n    modalTitle: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_3__.getLangMsg)('ruled.formula.key0001')\n  }));\n};\n\n//# sourceURL=webpack://rule-designer/./src/editors/FormulaAction.tsx?");

/***/ }),

/***/ 23604:
/*!**************************************!*\
  !*** ./src/editors/PreCondition.tsx ***!
  \**************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CustomInput: function() { return /* binding */ CustomInput; }\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_corejs3_helpers_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/extends */ 2664);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ 43400);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _condition__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./condition */ 83452);\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../context */ 90115);\n\n\n\n\nvar CustomInput = function CustomInput(props) {\n  var _useContext = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(_context__WEBPACK_IMPORTED_MODULE_3__.DesignerContext),\n    isLockRule = _useContext.isLockRule;\n  var locked = isLockRule();\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_condition__WEBPACK_IMPORTED_MODULE_2__[\"default\"], (0,_babel_runtime_corejs3_helpers_extends__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({}, props, {\n    locked: locked,\n    actionType: \"PreCondition\",\n    propName: \"PreCondition\"\n  }));\n};\n\n//# sourceURL=webpack://rule-designer/./src/editors/PreCondition.tsx?");

/***/ }),

/***/ 74244:
/*!******************************************!*\
  !*** ./src/editors/SetEqutionAction.tsx ***!
  \******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CustomInput: function() { return /* binding */ CustomInput; },\n/* harmony export */   Switch: function() { return /* binding */ Switch; }\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/keys */ 47976);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols */ 39448);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor */ 55748);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/for-each */ 7312);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors */ 54120);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-properties */ 63808);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-property */ 45040);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _babel_runtime_corejs3_helpers_extends__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/extends */ 2664);\n/* harmony import */ var _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/defineProperty */ 30112);\n/* harmony import */ var _babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/slicedToArray */ 95992);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_every__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/every */ 30479);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_every__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_every__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ 75984);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/concat */ 81744);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/find */ 47332);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/filter */ 18860);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! react */ 43400);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var _kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @kdcloudjs/kdesign */ 54116);\n/* harmony import */ var _kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_16__);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! designer_base/Main */ 18040);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(designer_base_Main__WEBPACK_IMPORTED_MODULE_17__);\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../context */ 90115);\n/* harmony import */ var _common_FieldsAddPanel__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./common/FieldsAddPanel */ 89004);\n/* harmony import */ var _common_FieldsItemWrap__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./common/FieldsItemWrap */ 88728);\n/* harmony import */ var _common_TreeSelect__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./common/TreeSelect */ 29368);\n/* harmony import */ var _utils_treeUtils__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../utils/treeUtils */ 31340);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! lodash */ 67928);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_23___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_23__);\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! classnames */ 71252);\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_24___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_24__);\n\n\n\n\n\n\n\n\n\n\nfunction ownKeys(e, r) { var t = _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0___default()(e); if ((_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1___default())) { var o = _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1___default()(e); r && (o = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_10___default()(o).call(o, function (r) { return _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2___default()(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var _context, _context2; var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_3___default()(_context = ownKeys(Object(t), !0)).call(_context, function (r) { (0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(e, r, t[r]); }) : (_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_4___default()) ? _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_5___default()(e, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_4___default()(t)) : _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_3___default()(_context2 = ownKeys(Object(t))).call(_context2, function (r) { _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_6___default()(e, r, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2___default()(t, r)); }); } return e; }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar Switch = function Switch(props) {\n  var field = props.field,\n    id = props.id;\n  var _useContext = (0,react__WEBPACK_IMPORTED_MODULE_15__.useContext)(_context__WEBPACK_IMPORTED_MODULE_18__.DesignerContext),\n    getKdesignerApi = _useContext.getKdesignerApi,\n    isLockRule = _useContext.isLockRule;\n  var _getKdesignerApi = getKdesignerApi(),\n    dataContext = _getKdesignerApi.data;\n  var fieldName = field.FieldName;\n  var locked = isLockRule();\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_15__.useState)(function () {\n      return (fieldName === null || fieldName === void 0 ? void 0 : fieldName.length) && (fieldName === null || fieldName === void 0 ? void 0 : _babel_runtime_corejs3_core_js_stable_instance_every__WEBPACK_IMPORTED_MODULE_11___default()(fieldName).call(fieldName, function (obj) {\n        return obj.OnlyEmptyRow === true;\n      }));\n    }),\n    _useState2 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(_useState, 2),\n    value = _useState2[0],\n    setValue = _useState2[1];\n  var handleChange = function handleChange(checked) {\n    // 更新FieldName数组里全部对象的OnlyEmptyRow属性\n    if (!checked && value && fieldName !== null && fieldName !== void 0 && fieldName.length) {\n      var newFieldName = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_12___default()(fieldName).call(fieldName, function (obj) {\n        delete obj.OnlyEmptyRow;\n        return obj;\n      });\n      dataContext.batchUpdateControlPropertyValues((0,designer_base_Main__WEBPACK_IMPORTED_MODULE_17__.createUpdateAction)([[id, {\n        fieldName: newFieldName\n      }]]));\n    } else if (checked && !value && fieldName !== null && fieldName !== void 0 && fieldName.length) {\n      var _newFieldName = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_12___default()(fieldName).call(fieldName, function (obj) {\n        return _objectSpread(_objectSpread({}, obj), {}, {\n          OnlyEmptyRow: checked\n        });\n      });\n      dataContext.batchUpdateControlPropertyValues((0,designer_base_Main__WEBPACK_IMPORTED_MODULE_17__.createUpdateAction)([[id, {\n        fieldName: _newFieldName\n      }]]));\n    }\n    setValue(checked);\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(designer_base_Main__WEBPACK_IMPORTED_MODULE_17__.SwitchPropertyEditor, (0,_babel_runtime_corejs3_helpers_extends__WEBPACK_IMPORTED_MODULE_7__[\"default\"])({}, props, {\n    locked: locked,\n    value: value,\n    handleChange: handleChange\n  }));\n};\nvar CustomInput = function CustomInput(props) {\n  var className = props.className,\n    editor = props.editor,\n    name = props.Name,\n    tips = props.Tips,\n    field = props.field,\n    id = props.id,\n    editorType = props.editorType;\n  var nameHidden = editor.NameHidden,\n    required = editor.Required;\n  var _useContext2 = (0,react__WEBPACK_IMPORTED_MODULE_15__.useContext)(_context__WEBPACK_IMPORTED_MODULE_18__.DesignerContext),\n    getKdesignerApi = _useContext2.getKdesignerApi,\n    getPrefixCls = _useContext2.getPrefixCls,\n    prefixCls = _useContext2.prefixCls,\n    ruleMetaInfo = _useContext2.ruleMetaInfo,\n    activeRuleNodeId = _useContext2.activeRuleNodeId,\n    isLockRule = _useContext2.isLockRule;\n  var actionType = field.ActionType,\n    _field$Expression = field.Expression,\n    expressions = _field$Expression === void 0 ? [] : _field$Expression,\n    _field$FieldName = field.FieldName,\n    fieldNames = _field$FieldName === void 0 ? [] : _field$FieldName;\n  var _getKdesignerApi2 = getKdesignerApi(),\n    dataContext = _getKdesignerApi2.data;\n  var rootClass = getPrefixCls && getPrefixCls(prefixCls, 'takeBaseProAction-editor');\n  var locked = isLockRule();\n  var _useState3 = (0,react__WEBPACK_IMPORTED_MODULE_15__.useState)(false),\n    _useState4 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(_useState3, 2),\n    panelVisible = _useState4[0],\n    setPanelVisible = _useState4[1];\n  var _useState5 = (0,react__WEBPACK_IMPORTED_MODULE_15__.useState)({}),\n    _useState6 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(_useState5, 2),\n    currentFieldData = _useState6[0],\n    setCurrentFieldData = _useState6[1];\n  var triggerRef = (0,react__WEBPACK_IMPORTED_MODULE_15__.useRef)(null);\n  var editTriggerRef = (0,react__WEBPACK_IMPORTED_MODULE_15__.useRef)(null);\n  var targetTreeData = (0,react__WEBPACK_IMPORTED_MODULE_15__.useMemo)(function () {\n    return (0,_utils_treeUtils__WEBPACK_IMPORTED_MODULE_22__.getEditorEntityTree)(ruleMetaInfo, activeRuleNodeId, editorType || actionType, 'target');\n  }, [ruleMetaInfo, activeRuleNodeId, actionType]);\n  var sourceTreeData = (0,react__WEBPACK_IMPORTED_MODULE_15__.useMemo)(function () {\n    return (0,_utils_treeUtils__WEBPACK_IMPORTED_MODULE_22__.getEditorEntityTree)(ruleMetaInfo, activeRuleNodeId, editorType || actionType, 'source');\n  }, [ruleMetaInfo, activeRuleNodeId, actionType]);\n  var onSrcSelect = function onSrcSelect(node) {\n    setCurrentFieldData(function (data) {\n      var SrcField = node.id,\n        SrcFieldName = node.text;\n      return _objectSpread(_objectSpread({}, data), {}, {\n        SrcFieldName: SrcFieldName,\n        SrcField: SrcField\n      });\n    });\n  };\n  var onTargetSelect = function onTargetSelect(node) {\n    setCurrentFieldData(function (data) {\n      var TargetField = node.id,\n        TargetFieldName = node.text;\n      return _objectSpread(_objectSpread({}, data), {}, {\n        TargetFieldName: TargetFieldName,\n        TargetField: TargetField\n      });\n    });\n    // setTargetFieldName(node.text || '')\n  };\n\n  // 更新值\n  var batchUpdateControlData = function batchUpdateControlData(data) {\n    dataContext.batchUpdateControlPropertyValues((0,designer_base_Main__WEBPACK_IMPORTED_MODULE_17__.createUpdateAction)([[id, data]])).then(function () {\n      setPanelVisible(false);\n      setCurrentFieldData({});\n    });\n  };\n\n  // 确认添加\n  var confirmAdd = function confirmAdd() {\n    var SrcField = currentFieldData.SrcField,\n      TargetField = currentFieldData.TargetField;\n    if (!(TargetField || SrcField)) return;\n    var SrcFieldName = currentFieldData.SrcFieldName,\n      TargetFieldName = currentFieldData.TargetFieldName;\n\n    // 新增的时候\n    var newExpressions = _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_13___default()(expressions).call(expressions, {\n      SrcField: SrcField,\n      TargetField: TargetField,\n      _Type_: 'TakeValueId'\n    });\n    var newFieldNames = _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_13___default()(fieldNames).call(fieldNames, {\n      SrcFieldName: SrcFieldName,\n      TargetFieldName: TargetFieldName,\n      _Type_: 'TakeValueId'\n    });\n    batchUpdateControlData({\n      FieldName: newFieldNames,\n      Expression: newExpressions\n    });\n  };\n\n  // 确认编辑\n  var confirmEdit = function confirmEdit() {\n    var newFieldNames = (0,lodash__WEBPACK_IMPORTED_MODULE_23__.cloneDeep)(fieldNames);\n    var newExpressions = (0,lodash__WEBPACK_IMPORTED_MODULE_23__.cloneDeep)(expressions);\n    var index = currentFieldData.index,\n      SrcField = currentFieldData.SrcField,\n      TargetField = currentFieldData.TargetField;\n    if (SrcField) {\n      newFieldNames[index].SrcFieldName = currentFieldData.SrcFieldName;\n      newExpressions[index].SrcField = SrcField;\n    }\n\n    // 只更改了目标节点\n    if (TargetField) {\n      newFieldNames[index].TargetFieldName = currentFieldData.TargetFieldName;\n      newExpressions[index].TargetField = TargetField;\n    }\n    batchUpdateControlData({\n      FieldName: newFieldNames,\n      Expression: newExpressions\n    });\n  };\n  var onConfirm = function onConfirm() {\n    if ((0,lodash__WEBPACK_IMPORTED_MODULE_23__.isUndefined)(currentFieldData === null || currentFieldData === void 0 ? void 0 : currentFieldData.index)) {\n      confirmAdd();\n    } else {\n      confirmEdit();\n    }\n  };\n  var handleAdd = function handleAdd(e) {\n    if (locked) return;\n    editTriggerRef.current = e.target;\n    setCurrentFieldData({});\n    setPanelVisible(true);\n  };\n  var handleEdit = function handleEdit(e, index) {\n    if (locked) return;\n    editTriggerRef.current = e.target;\n    var cueEditexpression = _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_14___default()(expressions).call(expressions, function (exp, idx) {\n      return idx === index;\n    }) || {};\n    var cueFieldNames = _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_14___default()(fieldNames).call(fieldNames, function (exp, idx) {\n      return idx === index;\n    }) || {};\n    setCurrentFieldData(_objectSpread(_objectSpread(_objectSpread({}, cueEditexpression), cueFieldNames), {}, {\n      index: index\n    }));\n    setPanelVisible(true);\n  };\n  var handleDelete = function handleDelete(index) {\n    if (locked) return;\n    var newExpression = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_10___default()(expressions).call(expressions, function (exp, idx) {\n      return idx !== index;\n    });\n    var newFieldName = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_10___default()(fieldNames).call(fieldNames, function (fd, idx) {\n      return idx !== index;\n    });\n    dataContext.batchUpdateControlPropertyValues((0,designer_base_Main__WEBPACK_IMPORTED_MODULE_17__.createUpdateAction)([[id, {\n      FieldName: newFieldName,\n      Expression: newExpression\n    }]])).then(function () {\n      setPanelVisible(false);\n    });\n  };\n  var nameStyle = {\n    width: '205px'\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement((react__WEBPACK_IMPORTED_MODULE_15___default().Fragment), null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(designer_base_Main__WEBPACK_IMPORTED_MODULE_17__.NameTipWrapper, {\n    nameHidden: nameHidden,\n    className: className,\n    name: name,\n    tips: tips,\n    required: required,\n    nameStyle: nameStyle\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"div\", {\n    className: rootClass\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_16__.Tooltip, {\n    ref: triggerRef,\n    getTriggerElement: function getTriggerElement() {\n      return editTriggerRef.current || triggerRef.current;\n    },\n    visible: panelVisible,\n    placement: \"bottomRight\",\n    popperClassName: \"\".concat(prefixCls, \"-fields-add-panel-popper\"),\n    tip: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(_common_FieldsAddPanel__WEBPACK_IMPORTED_MODULE_19__[\"default\"], {\n      visible: panelVisible,\n      triggerRef: editTriggerRef || triggerRef,\n      setVisible: function setVisible(visible) {\n        setPanelVisible(visible);\n        !visible && setCurrentFieldData({});\n      },\n      onCancel: function onCancel() {\n        setCurrentFieldData({});\n        setPanelVisible(false);\n      },\n      onConfirm: onConfirm\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(_common_FieldsItemWrap__WEBPACK_IMPORTED_MODULE_20__[\"default\"], {\n      label: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_17__.getLangMsg)('ruled.setEqution.key0001'),\n      prefixCls: prefixCls\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(_common_TreeSelect__WEBPACK_IMPORTED_MODULE_21__[\"default\"], {\n      value: currentFieldData === null || currentFieldData === void 0 ? void 0 : currentFieldData.SrcFieldName,\n      treeData: sourceTreeData,\n      prefixCls: prefixCls,\n      onSelect: onSrcSelect,\n      scrollToKey: currentFieldData === null || currentFieldData === void 0 ? void 0 : currentFieldData.SrcField\n    })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(_common_FieldsItemWrap__WEBPACK_IMPORTED_MODULE_20__[\"default\"], {\n      label: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_17__.getLangMsg)('ruled.setEqution.key0002'),\n      prefixCls: prefixCls\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(_common_TreeSelect__WEBPACK_IMPORTED_MODULE_21__[\"default\"], {\n      value: currentFieldData === null || currentFieldData === void 0 ? void 0 : currentFieldData.TargetFieldName,\n      treeData: targetTreeData,\n      prefixCls: prefixCls,\n      onSelect: onTargetSelect,\n      scrollToKey: currentFieldData === null || currentFieldData === void 0 ? void 0 : currentFieldData.TargetField\n    })))\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"div\", {\n    ref: editTriggerRef,\n    className: classnames__WEBPACK_IMPORTED_MODULE_24___default()(\"\".concat(rootClass, \"-add\"), {\n      disabled: locked\n    }),\n    onClick: handleAdd\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_16__.Icon, {\n    type: \"add\"\n  }), (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_17__.getLangMsg)('ruled.setEqution.key0003'))), _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_12___default()(fieldNames).call(fieldNames, function (field, index) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"div\", {\n      className: classnames__WEBPACK_IMPORTED_MODULE_24___default()(\"\".concat(rootClass, \"-field-name\"), {\n        disabled: locked,\n        edit: (currentFieldData === null || currentFieldData === void 0 ? void 0 : currentFieldData.index) === index\n      }),\n      key: index\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"div\", {\n      className: \"\".concat(rootClass, \"-field-name-wrap\")\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"div\", {\n      className: \"\".concat(rootClass, \"-field-name-item\")\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"div\", {\n      className: \"\".concat(rootClass, \"-field-name-label\")\n    }, (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_17__.getLangMsg)('ruled.setEqution.key0002')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"div\", {\n      className: \"\".concat(rootClass, \"-field-name-value\")\n    }, field.TargetFieldName || '')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"div\", {\n      className: \"\".concat(rootClass, \"-field-name-item\")\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"div\", {\n      className: \"\".concat(rootClass, \"-field-name-label\")\n    }, (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_17__.getLangMsg)('ruled.setEqution.key0004')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(\"div\", {\n      className: \"\".concat(rootClass, \"-field-name-value\")\n    }, field.SrcFieldName || '')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_16__.Icon, {\n      type: \"edit\",\n      className: \"\".concat(rootClass, \"-field-name-item-edit\"),\n      onClick: function onClick(e) {\n        return handleEdit(e, index);\n      }\n    }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_15___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_16__.Icon, {\n      prefix: \"designericon\",\n      type: \"shanchu\",\n      onClick: function onClick() {\n        return handleDelete(index);\n      }\n    })));\n  })));\n};\n\n//# sourceURL=webpack://rule-designer/./src/editors/SetEqutionAction.tsx?");

/***/ }),

/***/ 64464:
/*!*******************************************!*\
  !*** ./src/editors/TakeBaseProAction.tsx ***!
  \*******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CustomInput: function() { return /* binding */ CustomInput; }\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_corejs3_helpers_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/extends */ 2664);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ 43400);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _SetEqutionAction__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./SetEqutionAction */ 74244);\n\n/*\n * @Description: 引用基础资料属性\n * @Author: jianhang_he\n * @Date: 2022-09-16 09:41:15\n * @LastEditTime: 2022-09-16 13:40:51\n * @Last Modified by: jianhang_he\n */\n\n\n// 更新的属性值：\n// [\n//   {\n//       \"_Type_\": \"TakeValueId\",\n//       \"SrcField\": \"bizobject.id\",\n//       \"Id\": \"2BBL0Y544J24\",\n//       \"TargetField\": \"bizobject\"\n//   }\n// ]\n// [\n//   {\n//       \"TargetFieldName\": \"表单(bizobject)\",\n//       \"_Type_\": \"TakeValueId\",\n//       \"Id\": \"2BBL0Y544JRD\",\n//       \"SrcFieldName\": \"表单.内码\"\n//   }\n// ]\n/**\n *\n * @param props 携带属性-服务设置\n * @returns\n */\nvar CustomInput = function CustomInput(props) {\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_SetEqutionAction__WEBPACK_IMPORTED_MODULE_2__.CustomInput, (0,_babel_runtime_corejs3_helpers_extends__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({}, props, {\n    editorType: \"TakeBaseProAction\"\n  }));\n};\n\n//# sourceURL=webpack://rule-designer/./src/editors/TakeBaseProAction.tsx?");

/***/ }),

/***/ 71828:
/*!********************************************!*\
  !*** ./src/editors/common/ColorEditor.tsx ***!
  \********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/slicedToArray */ 95992);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ 43400);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @kdcloudjs/kdesign */ 54116);\n/* harmony import */ var _kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! designer_base/Main */ 18040);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(designer_base_Main__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\nvar ColorEditor = function ColorEditor(_ref) {\n  var type = _ref.type,\n    className = _ref.className,\n    handleChange = _ref.handleChange,\n    value = _ref.value,\n    hideThemeBtn = _ref.hideThemeBtn,\n    hideAlphaInput = _ref.hideAlphaInput,\n    disabled = _ref.disabled;\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false),\n    _useState2 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useState, 2),\n    showPanel = _useState2[0],\n    setShowPanel = _useState2[1];\n  var _useState3 = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(value || ''),\n    _useState4 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useState3, 2),\n    innerValue = _useState4[0],\n    setInnerValue = _useState4[1];\n  var inputRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n  var ref = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n  var kDesignerClassName = 'kdesigner-right-view';\n  var handleChangeInput = function handleChangeInput(event) {\n    var targetValue = event.target.value;\n    setInnerValue(targetValue);\n    handleChange(targetValue);\n  };\n  var handleChangeComplete = function handleChangeComplete(color) {\n    handleChange(color);\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(function () {\n    if (value !== innerValue) {\n      setInnerValue(value);\n    }\n  }, [value]);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", {\n    className: \"\".concat(kDesignerClassName, \"-color-editor\"),\n    ref: ref\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(designer_base_Main__WEBPACK_IMPORTED_MODULE_3__.ColorPrefixIcon, {\n    disabled: disabled,\n    className: \"\".concat(kDesignerClassName, \"-color-editor\"),\n    type: type,\n    color: innerValue,\n    onClick: function onClick() {\n      if (disabled) return;\n      setShowPanel(true);\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_2__.Input, {\n    className: \"\".concat(kDesignerClassName, \"-color-editor-input\"),\n    ref: inputRef,\n    borderType: \"bordered\",\n    value: innerValue,\n    onChange: handleChangeInput,\n    disabled: disabled,\n    onClick: function onClick() {\n      setShowPanel(true);\n    }\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(designer_base_Main__WEBPACK_IMPORTED_MODULE_3__.ColorPicker, {\n    triggerDom: ref,\n    showPanel: showPanel,\n    colorValue: innerValue,\n    className: className,\n    hideThemeBtn: hideThemeBtn,\n    hideAlphaInput: hideAlphaInput,\n    onClosePanel: function onClosePanel() {\n      setShowPanel(false);\n    },\n    onChange: handleChangeComplete\n  }));\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (ColorEditor);\n\n//# sourceURL=webpack://rule-designer/./src/editors/common/ColorEditor.tsx?");

/***/ }),

/***/ 57092:
/*!***************************************************!*\
  !*** ./src/editors/common/CustomInputTrigger.tsx ***!
  \***************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ 43400);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @kdcloudjs/kdesign */ 54116);\n/* harmony import */ var _kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! designer_base/Main */ 18040);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(designer_base_Main__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nvar CustomInputTrigger = function CustomInputTrigger(props) {\n  var onClick = props.onClick,\n    className = props.className,\n    editor = props.editor,\n    name = props.Name,\n    tips = props.Tips,\n    value = props.value,\n    disabled = props.disabled;\n  var nameHidden = editor.NameHidden,\n    required = editor.Required;\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement((react__WEBPACK_IMPORTED_MODULE_0___default().Fragment), null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(designer_base_Main__WEBPACK_IMPORTED_MODULE_2__.NameTipWrapper, {\n    nameHidden: nameHidden,\n    className: className,\n    name: name,\n    tips: tips,\n    required: required\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_1__.Input, {\n    className: \"\".concat(className, \"-custom-input\"),\n    borderType: \"bordered\",\n    readOnly: true,\n    value: value,\n    disabled: disabled,\n    suffix: !disabled && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_1__.Icon, {\n      prefix: \"designericon\",\n      type: \"gengduo\",\n      style: {\n        cursor: 'pointer'\n      },\n      onClick: onClick\n    })\n  }));\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (CustomInputTrigger);\n\n//# sourceURL=webpack://rule-designer/./src/editors/common/CustomInputTrigger.tsx?");

/***/ }),

/***/ 89004:
/*!***********************************************!*\
  !*** ./src/editors/common/FieldsAddPanel.tsx ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/toConsumableArray */ 30260);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/slice */ 12640);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/concat */ 81744);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_some__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/some */ 65624);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_some__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_some__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react */ 43400);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @kdcloudjs/kdesign */ 54116);\n/* harmony import */ var _kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../context */ 90115);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! designer_base/Main */ 18040);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(designer_base_Main__WEBPACK_IMPORTED_MODULE_7__);\n\n\n\n\n/**\n * 添加面板\n */\n\n\n\n\nvar FieldsAddPanel = function FieldsAddPanel(_ref) {\n  var visible = _ref.visible,\n    triggerRef = _ref.triggerRef,\n    setVisible = _ref.setVisible,\n    children = _ref.children,\n    onCancel = _ref.onCancel,\n    onConfirm = _ref.onConfirm;\n  var panelRef = (0,react__WEBPACK_IMPORTED_MODULE_4__.useRef)(null);\n  var _useContext = (0,react__WEBPACK_IMPORTED_MODULE_4__.useContext)(_context__WEBPACK_IMPORTED_MODULE_6__.DesignerContext),\n    getPrefixCls = _useContext.getPrefixCls,\n    prefixCls = _useContext.prefixCls;\n  var rootClass = getPrefixCls && getPrefixCls(prefixCls, 'fields-add-panel');\n  (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_7__.useOnClickOutside)([panelRef, triggerRef], function (e) {\n    var _ref2, _context;\n    var dialogDom = document.getElementById('dialogShow');\n    var treePopperDom = _babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_1___default()(Array.prototype).call(document.querySelectorAll('.rule-designer-tree-select-popper'));\n    var selectPopperDom = _babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_1___default()(Array.prototype).call(document.querySelectorAll('.rule-designer-select-popper'));\n    var tooltipPopperDom = _babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_1___default()(Array.prototype).call(document.querySelectorAll('.rule-designer-tooltip-popper'));\n    var isClickPopper = (_ref2 = _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_2___default()(_context = []).call(_context, (0,_babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(treePopperDom), (0,_babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(selectPopperDom), (0,_babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(tooltipPopperDom))) === null || _ref2 === void 0 ? void 0 : _babel_runtime_corejs3_core_js_stable_instance_some__WEBPACK_IMPORTED_MODULE_3___default()(_ref2).call(_ref2, function (dom) {\n      return dom === null || dom === void 0 ? void 0 : dom.contains(e.target);\n    });\n    if (dialogDom && dialogDom !== null && dialogDom !== void 0 && dialogDom.contains(e.target) || isClickPopper) return;\n    if (visible) {\n      setVisible(false);\n    }\n  });\n  if (!visible) return null;\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"div\", {\n    className: rootClass,\n    ref: panelRef\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"div\", {\n    className: \"\".concat(rootClass, \"-body\")\n  }, children), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default().createElement(\"footer\", {\n    className: \"\".concat(rootClass, \"-footer\")\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_5__.Button, {\n    onClick: onCancel,\n    type: \"second\",\n    className: \"\".concat(rootClass, \"-cancel-btn\"),\n    style: {\n      marginRight: '12px'\n    }\n  }, (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_7__.getLangMsg)('ruled.fieldsAddPanel.key0001')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_5__.Button, {\n    className: \"\".concat(rootClass, \"-modal-ok-btn\"),\n    type: \"primary\",\n    onClick: onConfirm\n  }, (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_7__.getLangMsg)('ruled.fieldsAddPanel.key0002'))));\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (FieldsAddPanel);\n\n//# sourceURL=webpack://rule-designer/./src/editors/common/FieldsAddPanel.tsx?");

/***/ }),

/***/ 88728:
/*!***********************************************!*\
  !*** ./src/editors/common/FieldsItemWrap.tsx ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ 43400);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n\nvar FieldsItemWrap = function FieldsItemWrap(_ref) {\n  var prefixCls = _ref.prefixCls,\n    label = _ref.label,\n    children = _ref.children;\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-fields-item-wrap\")\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-fields-item-label\")\n  }, label), children);\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (FieldsItemWrap);\n\n//# sourceURL=webpack://rule-designer/./src/editors/common/FieldsItemWrap.tsx?");

/***/ }),

/***/ 29368:
/*!*******************************************!*\
  !*** ./src/editors/common/TreeSelect.tsx ***!
  \*******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/slicedToArray */ 95992);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ 43400);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _controls_common_SearchTree__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../controls/common/SearchTree */ 16612);\n/* harmony import */ var _kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @kdcloudjs/kdesign */ 54116);\n/* harmony import */ var _kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! designer_base/Main */ 18040);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(designer_base_Main__WEBPACK_IMPORTED_MODULE_4__);\n\n/*\n * @Description: 树选择\n * @Author: jianhang_he\n * @Date: 2022-07-04 18:02:15\n * @LastEditTime: 2022-09-16 14:10:42\n * @Last Modified by: jianhang_he\n */\n\n\n\n\nvar TreeSelect = function TreeSelect(_ref) {\n  var prefixCls = _ref.prefixCls,\n    value = _ref.value,\n    treeData = _ref.treeData,\n    onSelect = _ref.onSelect,\n    scrollToKey = _ref.scrollToKey;\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false),\n    _useState2 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useState, 2),\n    visible = _useState2[0],\n    setVisible = _useState2[1];\n  var triggerRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n  var panelRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n  (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_4__.useOnClickOutside)([panelRef, triggerRef], function (e) {\n    if (visible) {\n      setVisible(false);\n    }\n  });\n  var onTreeSelect = function onTreeSelect(checked, node, event) {\n    onSelect(node);\n    setVisible(false);\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_3__.Tooltip, {\n    ref: triggerRef,\n    visible: visible,\n    trigger: \"click\",\n    placement: \"bottomRight\",\n    onVisibleChange: function onVisibleChange(visible) {\n      return setVisible(visible);\n    },\n    popperClassName: \"\".concat(prefixCls, \"-tree-select-popper\"),\n    tip: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", {\n      ref: panelRef,\n      className: \"\".concat(prefixCls, \"-search-tree-wrap\")\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_controls_common_SearchTree__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n      data: treeData,\n      onSelect: onTreeSelect,\n      scrollToKey: scrollToKey\n    }))\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-tree-select\")\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"span\", null, value || ''), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_3__.Icon, {\n    type: visible ? 'arrow-up' : 'arrow-down'\n  })));\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (TreeSelect);\n\n//# sourceURL=webpack://rule-designer/./src/editors/common/TreeSelect.tsx?");

/***/ }),

/***/ 67224:
/*!**************************************************!*\
  !*** ./src/editors/condition/ConditionModal.tsx ***!
  \**************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/keys */ 47976);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols */ 39448);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/filter */ 18860);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor */ 55748);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/for-each */ 7312);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors */ 54120);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-properties */ 63808);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-property */ 45040);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/defineProperty */ 30112);\n/* harmony import */ var _babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/slicedToArray */ 95992);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_values__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/values */ 41256);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_values__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_values__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_set_timeout__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/set-timeout */ 13760);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_set_timeout__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_set_timeout__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/concat */ 81744);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/json/stringify */ 39832);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! react */ 43400);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var _kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @kdcloudjs/kdesign */ 54116);\n/* harmony import */ var _kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var _utils_treeUtils__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../utils/treeUtils */ 31340);\n/* harmony import */ var _context_index__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../context/index */ 90115);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! designer_base/Main */ 18040);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(designer_base_Main__WEBPACK_IMPORTED_MODULE_18__);\n/* harmony import */ var _EditArea__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./EditArea */ 95604);\n/* harmony import */ var _Operator__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./Operator */ 44256);\n/* harmony import */ var _NoteArea__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./NoteArea */ 15708);\n/* harmony import */ var _controls_common_SearchTree__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../controls/common/SearchTree */ 16612);\n/* harmony import */ var _ExpressionTree__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./ExpressionTree */ 70987);\n\n\n\n\n\n\n\n\n\n\nfunction ownKeys(e, r) { var t = _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0___default()(e); if ((_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1___default())) { var o = _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1___default()(e); r && (o = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_2___default()(o).call(o, function (r) { return _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_3___default()(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var _context2, _context3; var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_4___default()(_context2 = ownKeys(Object(t), !0)).call(_context2, function (r) { (0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(e, r, t[r]); }) : (_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5___default()) ? _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_6___default()(e, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5___default()(t)) : _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_4___default()(_context3 = ownKeys(Object(t))).call(_context3, function (r) { _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_7___default()(e, r, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_3___default()(t, r)); }); } return e; }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar ModalBody = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_14__.forwardRef)(function (props, ref) {\n  var value = props.value,\n    actionType = props.actionType,\n    className = props.className,\n    showDefinitionId = props.showDefinitionId,\n    setCheckboxVisible = props.setCheckboxVisible,\n    confirmCallback = props.confirmCallback;\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_14__.useState)(null),\n    _useState2 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(_useState, 2),\n    description = _useState2[0],\n    setDescription = _useState2[1];\n  var _useState3 = (0,react__WEBPACK_IMPORTED_MODULE_14__.useState)(''),\n    _useState4 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(_useState3, 2),\n    activeFieldKey = _useState4[0],\n    setActiveFieldKey = _useState4[1];\n  var _useContext = (0,react__WEBPACK_IMPORTED_MODULE_14__.useContext)(_context_index__WEBPACK_IMPORTED_MODULE_17__.DesignerContext),\n    ruleMetaInfo = _useContext.ruleMetaInfo,\n    activeRuleNodeId = _useContext.activeRuleNodeId,\n    invokeAction = _useContext.invokeAction;\n  var leftPanelRef = (0,react__WEBPACK_IMPORTED_MODULE_14__.useRef)(null);\n  var editorRef = (0,react__WEBPACK_IMPORTED_MODULE_14__.useRef)(null);\n  var treeData = (0,react__WEBPACK_IMPORTED_MODULE_14__.useMemo)(function () {\n    return (0,_utils_treeUtils__WEBPACK_IMPORTED_MODULE_16__.getEditorEntityTree)(ruleMetaInfo, activeRuleNodeId, actionType);\n  }, [ruleMetaInfo, activeRuleNodeId]);\n  var expressionData = (0,react__WEBPACK_IMPORTED_MODULE_14__.useMemo)(function () {\n    var functionTypes = ruleMetaInfo[0].functionTypes;\n    return functionTypes;\n  }, [ruleMetaInfo]);\n  var operations = (0,react__WEBPACK_IMPORTED_MODULE_14__.useMemo)(function () {\n    var operations = ruleMetaInfo[0].functionOperations;\n    return _babel_runtime_corejs3_core_js_stable_object_values__WEBPACK_IMPORTED_MODULE_10___default()(operations);\n  }, [ruleMetaInfo]);\n  var _useState5 = (0,react__WEBPACK_IMPORTED_MODULE_14__.useState)({\n      visible: false,\n      msg: '',\n      type: 'success'\n    }),\n    _useState6 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(_useState5, 2),\n    alertData = _useState6[0],\n    setAlertData = _useState6[1];\n  var timerRef = (0,react__WEBPACK_IMPORTED_MODULE_14__.useRef)(null);\n  var isClickConfirmBtn = (0,react__WEBPACK_IMPORTED_MODULE_14__.useRef)(false);\n  (0,react__WEBPACK_IMPORTED_MODULE_14__.useImperativeHandle)(ref, function () {\n    return {\n      getEditorValue: function getEditorValue() {\n        var _editorRef$current;\n        return (_editorRef$current = editorRef.current) === null || _editorRef$current === void 0 ? void 0 : _editorRef$current.getEditorValue();\n      },\n      setIsClickConfirmBtn: function setIsClickConfirmBtn(value) {\n        isClickConfirmBtn.current = value;\n      }\n    };\n  });\n  (0,react__WEBPACK_IMPORTED_MODULE_14__.useEffect)(function () {\n    designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.eventBus.on('validateFormula', onValidate);\n    return function () {\n      designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.eventBus.off('validateFormula', onValidate);\n    };\n  }, []);\n  var onValidate = function onValidate(res) {\n    var result = res.result,\n      msg = res.msg;\n    setAlertData(function () {\n      return {\n        type: result === 'fail' ? 'error' : 'success',\n        visible: true,\n        msg: msg\n      };\n    });\n    if (result === 'success') {\n      timerRef.current = _babel_runtime_corejs3_core_js_stable_set_timeout__WEBPACK_IMPORTED_MODULE_11___default()(function () {\n        timerRef.current && clearTimeout(timerRef.current);\n        setAlertData(function (data) {\n          return _objectSpread(_objectSpread({}, data), {}, {\n            visible: false\n          });\n        });\n      }, 1100);\n    }\n    if (isClickConfirmBtn.current) {\n      isClickConfirmBtn.current = false;\n      if (result === 'success') {\n        confirmCallback();\n      }\n    }\n  };\n  var insetText = (0,react__WEBPACK_IMPORTED_MODULE_14__.useCallback)(function (str) {\n    var _editorRef$current2;\n    (_editorRef$current2 = editorRef.current) === null || _editorRef$current2 === void 0 || _editorRef$current2.insertText(str);\n  }, [editorRef.current]);\n  var onOperationClick = (0,react__WEBPACK_IMPORTED_MODULE_14__.useCallback)(function (str) {\n    var _editorRef$current3;\n    var editor = (_editorRef$current3 = editorRef.current) === null || _editorRef$current3 === void 0 ? void 0 : _editorRef$current3.getEditor();\n    if (str === 'Backspace') {\n      // 退格处理（字符减1）\n      editor.execCommand('delCharBefore');\n      editor.refresh();\n      editor.focus();\n    } else if (str === 'CLR') {\n      // 清除处理(CLR)\n      editor.setValue('');\n      editor.focus();\n    } else {\n      insetText(str);\n    }\n  }, [insetText]);\n  var onSelectField = (0,react__WEBPACK_IMPORTED_MODULE_14__.useCallback)(function (checked, node, event) {\n    var _context, _editorRef$current4;\n    var longText = node.longText,\n      id = node.id;\n    var text = longText.replace(/(\\S+)\\(\\S+\\)/g, '$1');\n    var fieldRegText = _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_12___default()(_context = \"{{Field id=\\\"\".concat(id, \"\\\" text=\\\"\")).call(_context, text, \"\\\"}}\");\n    (_editorRef$current4 = editorRef.current) === null || _editorRef$current4 === void 0 || _editorRef$current4.insertText(fieldRegText);\n  }, [editorRef.current]);\n  var onSelectExpression = (0,react__WEBPACK_IMPORTED_MODULE_14__.useCallback)(function (exp) {\n    var settingFormId = exp.settingFormId,\n      id = exp.id;\n    var treeObj = (treeData === null || treeData === void 0 ? void 0 : treeData[0]) || {};\n    if (settingFormId) {\n      invokeAction('showFunctionSetting', [id, _babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_13___default()(treeObj)]);\n    } else {\n      insetText(\"\".concat(id, \"()\"));\n    }\n  }, [invokeAction, insetText, treeData]);\n  var onClickField = (0,react__WEBPACK_IMPORTED_MODULE_14__.useCallback)(function (id) {\n    var _leftPanelRef$current;\n    var curTab = (_leftPanelRef$current = leftPanelRef.current) === null || _leftPanelRef$current === void 0 ? void 0 : _leftPanelRef$current.getCurTab();\n    if (curTab !== '1') {\n      var _leftPanelRef$current2;\n      (_leftPanelRef$current2 = leftPanelRef.current) === null || _leftPanelRef$current2 === void 0 || _leftPanelRef$current2.setCurTab('1');\n      _babel_runtime_corejs3_core_js_stable_set_timeout__WEBPACK_IMPORTED_MODULE_11___default()(function () {\n        setActiveFieldKey(id);\n      }, 0);\n    } else {\n      setActiveFieldKey(id);\n    }\n  }, [leftPanelRef.current]);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_14___default().createElement(\"div\", {\n    className: \"\".concat(className, \"-body\")\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_14___default().createElement(\"div\", {\n    className: \"panel-aside\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_14___default().createElement(\"div\", {\n    className: \"panel-aside-header\"\n  }, (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.getLangMsg)('ruled.conditionModal.key0001')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_14___default().createElement(\"div\", {\n    className: \"panel-aside-main\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_14___default().createElement(_controls_common_SearchTree__WEBPACK_IMPORTED_MODULE_22__[\"default\"], {\n    placeholder: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.getLangMsg)('ruled.conditionModal.key0002'),\n    data: treeData,\n    showDefinitionId: showDefinitionId,\n    onSelect: onSelectField,\n    scrollToKey: activeFieldKey\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_14___default().createElement(\"div\", {\n    className: \"panel-main\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_14___default().createElement(_Operator__WEBPACK_IMPORTED_MODULE_20__[\"default\"], {\n    operations: operations,\n    onOperationClick: onOperationClick\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_14___default().createElement(_EditArea__WEBPACK_IMPORTED_MODULE_19__[\"default\"], {\n    ref: editorRef,\n    value: value,\n    expressionData: expressionData,\n    operations: operations,\n    treeData: treeData,\n    onClickField: onClickField\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_14___default().createElement(_NoteArea__WEBPACK_IMPORTED_MODULE_21__[\"default\"], {\n    description: description,\n    alertData: alertData,\n    setAlertData: setAlertData\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_14___default().createElement(\"div\", {\n    className: \"panel-aside\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_14___default().createElement(\"div\", {\n    className: \"panel-aside-header\"\n  }, (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.getLangMsg)('ruled.conditionModal.key0003')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_14___default().createElement(\"div\", {\n    className: \"panel-aside-main\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_14___default().createElement(_ExpressionTree__WEBPACK_IMPORTED_MODULE_23__[\"default\"], {\n    data: expressionData,\n    onSelect: onSelectExpression,\n    onShowDescription: setDescription\n  }))));\n});\nvar ConditionModal = function ConditionModal(_ref) {\n  var value = _ref.value,\n    modalTitle = _ref.modalTitle,\n    actionType = _ref.actionType,\n    visible = _ref.visible,\n    setVisible = _ref.setVisible,\n    onConfirm = _ref.onConfirm;\n  var _useState7 = (0,react__WEBPACK_IMPORTED_MODULE_14__.useState)(true),\n    _useState8 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(_useState7, 2),\n    checkboxVisible = _useState8[0],\n    setCheckboxVisible = _useState8[1];\n  var _useState9 = (0,react__WEBPACK_IMPORTED_MODULE_14__.useState)(false),\n    _useState10 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(_useState9, 2),\n    showDefinitionId = _useState10[0],\n    setShowDefinitionId = _useState10[1];\n  var modalBodyRef = (0,react__WEBPACK_IMPORTED_MODULE_14__.useRef)(null);\n  var _useContext2 = (0,react__WEBPACK_IMPORTED_MODULE_14__.useContext)(_context_index__WEBPACK_IMPORTED_MODULE_17__.DesignerContext),\n    getPrefixCls = _useContext2.getPrefixCls,\n    prefixCls = _useContext2.prefixCls,\n    invokeAction = _useContext2.invokeAction,\n    getEncodeValue = _useContext2.getEncodeValue;\n  var className = getPrefixCls && getPrefixCls(prefixCls, 'condition-modal');\n  var confirmCallback = (0,react__WEBPACK_IMPORTED_MODULE_14__.useCallback)(function () {\n    var _modalBodyRef$current;\n    var editorValue = (_modalBodyRef$current = modalBodyRef.current) === null || _modalBodyRef$current === void 0 ? void 0 : _modalBodyRef$current.getEditorValue();\n    onConfirm(editorValue);\n    setVisible(false);\n  }, [modalBodyRef.current, setVisible, onConfirm]);\n  var handleConfirm = function handleConfirm() {\n    var _modalBodyRef$current2, _modalBodyRef$current3;\n    var editorValue = (_modalBodyRef$current2 = modalBodyRef.current) === null || _modalBodyRef$current2 === void 0 ? void 0 : _modalBodyRef$current2.getEditorValue();\n    invokeAction('validateFormula', [getEncodeValue(editorValue)]);\n    (_modalBodyRef$current3 = modalBodyRef.current) === null || _modalBodyRef$current3 === void 0 || _modalBodyRef$current3.setIsClickConfirmBtn(true);\n  };\n  var footer = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_14___default().createElement((react__WEBPACK_IMPORTED_MODULE_14___default().Fragment), null, checkboxVisible && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_14___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_15__.Checkbox, {\n    className: \"\".concat(className, \"-footer-checkbox\"),\n    checked: showDefinitionId,\n    onChange: function onChange(e) {\n      var newVal = !!e.target.checked;\n      setShowDefinitionId(newVal);\n    }\n  }, (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.getLangMsg)('ruled.conditionModal.key0004')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_14___default().createElement(\"div\", {\n    className: \"\".concat(className, \"-footer-btns\")\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_14___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_15__.Button, {\n    onClick: function onClick() {\n      return setVisible(false);\n    },\n    type: \"second\",\n    className: \"\".concat(className, \"-cancel-btn\")\n  }, (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.getLangMsg)('ruled.conditionModal.key0006')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_14___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_15__.Button, {\n    onClick: handleConfirm,\n    type: \"primary\",\n    className: \"\".concat(className, \"-ok-btn\")\n  }, (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.getLangMsg)('ruled.conditionModal.key0005'))));\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_14___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_15__.Modal, {\n    body: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_14___default().createElement(ModalBody, {\n      ref: modalBodyRef,\n      value: value,\n      className: className,\n      actionType: actionType,\n      showDefinitionId: showDefinitionId,\n      setCheckboxVisible: setCheckboxVisible,\n      confirmCallback: confirmCallback\n    }),\n    bodyStyle: {\n      justifyContent: 'start',\n      alignItems: 'start',\n      overflowX: 'hidden',\n      overflowY: 'auto',\n      flexDirection: 'column'\n    },\n    titleIcon: null,\n    className: className,\n    footer: footer,\n    maskClosable: false,\n    width: 1000,\n    height: 614,\n    title: modalTitle || (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.getLangMsg)('ruled.conditionModal.key0007'),\n    closable: true,\n    destroyOnClose: true,\n    onCancel: function onCancel() {\n      return setVisible(false);\n    },\n    onOk: function onOk() {\n      return setVisible(false);\n    },\n    mask: true,\n    visible: visible\n  });\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (ConditionModal);\n\n//# sourceURL=webpack://rule-designer/./src/editors/condition/ConditionModal.tsx?");

/***/ }),

/***/ 95604:
/*!********************************************!*\
  !*** ./src/editors/condition/EditArea.tsx ***!
  \********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/slice */ 12640);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_array_from__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/array/from */ 89843);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_array_from__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_array_from__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_symbol__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/symbol */ 97440);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_symbol__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_symbol__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_get_iterator_method__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js/get-iterator-method */ 64248);\n/* harmony import */ var _babel_runtime_corejs3_core_js_get_iterator_method__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_get_iterator_method__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/array/is-array */ 12388);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/keys */ 47976);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols */ 39448);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor */ 55748);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/for-each */ 7312);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors */ 54120);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-properties */ 63808);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-property */ 45040);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/defineProperty */ 30112);\n/* harmony import */ var _babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/toConsumableArray */ 30260);\n/* harmony import */ var _babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/slicedToArray */ 95992);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_sort__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/sort */ 6908);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_sort__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_sort__WEBPACK_IMPORTED_MODULE_16__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ 75984);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_17__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/filter */ 18860);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/includes */ 82600);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_18__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_set_timeout__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/set-timeout */ 13760);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_set_timeout__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_set_timeout__WEBPACK_IMPORTED_MODULE_19__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/concat */ 81744);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_20___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_20__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! react */ 43400);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_21___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_21__);\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! react-dom */ 71536);\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_22___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_22__);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! designer_base/Main */ 18040);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_23___default = /*#__PURE__*/__webpack_require__.n(designer_base_Main__WEBPACK_IMPORTED_MODULE_23__);\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../../context */ 90115);\n/* harmony import */ var react_codemirror2__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! react-codemirror2 */ 18232);\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../../constants */ 98092);\n/* harmony import */ var _utils_treeUtils__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ../../utils/treeUtils */ 31340);\n/* harmony import */ var codemirror_lib_codemirror_css__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! codemirror/lib/codemirror.css */ 7947);\n/* harmony import */ var codemirror_lib_codemirror_css__WEBPACK_IMPORTED_MODULE_28___default = /*#__PURE__*/__webpack_require__.n(codemirror_lib_codemirror_css__WEBPACK_IMPORTED_MODULE_28__);\n/* harmony import */ var codemirror_addon_selection_mark_selection__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! codemirror/addon/selection/mark-selection */ 12848);\n/* harmony import */ var codemirror_addon_selection_mark_selection__WEBPACK_IMPORTED_MODULE_29___default = /*#__PURE__*/__webpack_require__.n(codemirror_addon_selection_mark_selection__WEBPACK_IMPORTED_MODULE_29__);\n/* harmony import */ var codemirror_addon_search_searchcursor__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! codemirror/addon/search/searchcursor */ 92004);\n/* harmony import */ var codemirror_addon_search_searchcursor__WEBPACK_IMPORTED_MODULE_30___default = /*#__PURE__*/__webpack_require__.n(codemirror_addon_search_searchcursor__WEBPACK_IMPORTED_MODULE_30__);\n/* harmony import */ var codemirror_addon_edit_matchbrackets_js__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! codemirror/addon/edit/matchbrackets.js */ 80760);\n/* harmony import */ var codemirror_addon_edit_matchbrackets_js__WEBPACK_IMPORTED_MODULE_31___default = /*#__PURE__*/__webpack_require__.n(codemirror_addon_edit_matchbrackets_js__WEBPACK_IMPORTED_MODULE_31__);\n/* harmony import */ var codemirror_addon_edit_closebrackets__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! codemirror/addon/edit/closebrackets */ 23360);\n/* harmony import */ var codemirror_addon_edit_closebrackets__WEBPACK_IMPORTED_MODULE_32___default = /*#__PURE__*/__webpack_require__.n(codemirror_addon_edit_closebrackets__WEBPACK_IMPORTED_MODULE_32__);\n/* harmony import */ var codemirror_addon_display_placeholder__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! codemirror/addon/display/placeholder */ 87376);\n/* harmony import */ var codemirror_addon_display_placeholder__WEBPACK_IMPORTED_MODULE_33___default = /*#__PURE__*/__webpack_require__.n(codemirror_addon_display_placeholder__WEBPACK_IMPORTED_MODULE_33__);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! lodash */ 67928);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_34___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_34__);\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! classnames */ 71252);\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_35___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_35__);\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ../../utils */ 63612);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction ownKeys(e, r) { var t = _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_5___default()(e); if ((_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_6___default())) { var o = _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_6___default()(e); r && (o = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_15___default()(o).call(o, function (r) { return _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_7___default()(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var _context6, _context7; var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(_context6 = ownKeys(Object(t), !0)).call(_context6, function (r) { (0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_12__[\"default\"])(e, r, t[r]); }) : (_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_9___default()) ? _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_10___default()(e, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_9___default()(t)) : _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(_context7 = ownKeys(Object(t))).call(_context7, function (r) { _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_11___default()(e, r, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_7___default()(t, r)); }); } return e; }\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof (_babel_runtime_corejs3_core_js_stable_symbol__WEBPACK_IMPORTED_MODULE_2___default()) !== \"undefined\" && _babel_runtime_corejs3_core_js_get_iterator_method__WEBPACK_IMPORTED_MODULE_3___default()(o) || o[\"@@iterator\"]; if (!it) { if (_babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_4___default()(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { var _context5; if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = _babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_0___default()(_context5 = Object.prototype.toString.call(o)).call(_context5, 8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return _babel_runtime_corejs3_core_js_stable_array_from__WEBPACK_IMPORTED_MODULE_1___default()(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction getCustomMode(expressions, operations) {\n  return {\n    name: 'custom',\n    fn: function fn() {\n      var expKeyWords = _babel_runtime_corejs3_core_js_stable_instance_sort__WEBPACK_IMPORTED_MODULE_16___default()(expressions).call(expressions, function (a, b) {\n        return b.length - a.length;\n      });\n      operations = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_17___default()(operations).call(operations, function (op) {\n        return op.toLowerCase();\n      });\n      var operationChars = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_15___default()(operations).call(operations, function (op) {\n        return !/^\\w+\\s*\\w*/.test(op);\n      });\n      var operationWords = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_15___default()(operations).call(operations, function (op) {\n        return /^\\w+\\s*\\w*/.test(op);\n      });\n      function tokenBase(stream, state) {\n        state.beforeParams = false;\n        if (stream.match(/\\w+(?=\\(.*\\))/)) {\n          stream.eatWhile(/\\w+/);\n          var word = stream.current();\n          if (_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_18___default()(expKeyWords).call(expKeyWords, word)) {\n            return 'expression-style';\n          }\n          return null;\n        }\n        // 单词形式操作符（如Like, in, and等），匹配高亮时需加上前后空格匹配\n        if (stream.match(/\\w+/)) {\n          // stream.eatWhile(/^[A-Za-z]+(\\s\\w+)*$/)\n          var _word = stream.current();\n          if (_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_18___default()(operationWords).call(operationWords, _word.toLowerCase())) {\n            return 'operation-style';\n          }\n          return null;\n        }\n        // 符号类的不需匹配空格\n        for (var i = 0; i < operationChars.length; i++) {\n          if (stream.match(operationChars[i])) {\n            return 'operation-style';\n          }\n        }\n        stream.next();\n        return null;\n      }\n      return {\n        startState: function startState() {\n          return {\n            tokenize: tokenBase,\n            beforeParams: false,\n            inParams: false\n          };\n        },\n        token: function token(stream, state) {\n          if (stream.eatSpace()) return null;\n          return state.tokenize(stream, state);\n        }\n      };\n    }\n  };\n}\nvar options = {\n  mode: {\n    name: 'custom'\n  },\n  autoCloseBrackets: true,\n  autofocus: true,\n  // 自动获取焦点\n  styleActiveLine: true,\n  // 光标代码高亮\n  lineNumbers: true,\n  // 显示行号\n  smartIndent: true,\n  // 自动缩进\n  matchBrackets: true,\n  // 匹配括号\n  lineWrapping: false,\n  // 代码超长不换行\n  singleCursorHeightPerLine: true,\n  placeholder: ''\n};\n\n// const fieldRegExp = /{{Field id=\"([^\"]+)\" text=\"([^\"]+)\"}}/\n\nvar EditArea = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_21__.forwardRef)(function (_ref, ref) {\n  var _context;\n  var initValue = _ref.value,\n    expressionData = _ref.expressionData,\n    operationData = _ref.operations,\n    treeData = _ref.treeData,\n    onClickField = _ref.onClickField;\n  var treeDataFlatten = (0,_utils_treeUtils__WEBPACK_IMPORTED_MODULE_27__.getTreeDataFlatten)(treeData);\n  var fields = _babel_runtime_corejs3_core_js_stable_instance_sort__WEBPACK_IMPORTED_MODULE_16___default()(_context = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_15___default()(treeDataFlatten).call(treeDataFlatten, function (node) {\n    return (0,lodash__WEBPACK_IMPORTED_MODULE_34__.isUndefined)(node.children);\n  })).call(_context, function (a, b) {\n    return b.id.length - a.id.length;\n  });\n  var _useContext = (0,react__WEBPACK_IMPORTED_MODULE_21__.useContext)(_context__WEBPACK_IMPORTED_MODULE_24__.DesignerContext),\n    invokeAction = _useContext.invokeAction,\n    getEncodeValue = _useContext.getEncodeValue;\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_21__.useState)(''),\n    _useState2 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_14__[\"default\"])(_useState, 2),\n    value = _useState2[0],\n    setValue = _useState2[1];\n  var editorRef = (0,react__WEBPACK_IMPORTED_MODULE_21__.useRef)(null);\n  var customNodes = (0,react__WEBPACK_IMPORTED_MODULE_21__.useRef)([]);\n  var isSafariBrowser = (0,react__WEBPACK_IMPORTED_MODULE_21__.useRef)((0,_utils__WEBPACK_IMPORTED_MODULE_36__.getBrowserData)() === 'safari');\n  var expressions = (0,react__WEBPACK_IMPORTED_MODULE_21__.useMemo)(function () {\n    var keys = [];\n    var _iterator = _createForOfIteratorHelper(expressionData),\n      _step;\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var types = _step.value.types;\n        var expKeys = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_17___default()(types).call(types, function (exp) {\n          return exp.id;\n        });\n        keys.push.apply(keys, (0,_babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_13__[\"default\"])(expKeys));\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n    return keys;\n  }, [expressionData]);\n  var operations = (0,react__WEBPACK_IMPORTED_MODULE_21__.useMemo)(function () {\n    return _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_15___default()(operationData).call(operationData, function (op) {\n      return !_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_18___default()(_constants__WEBPACK_IMPORTED_MODULE_26__.OPERATION_FILTER_LIST).call(_constants__WEBPACK_IMPORTED_MODULE_26__.OPERATION_FILTER_LIST, op);\n    });\n  }, [operationData]);\n  var customMode = (0,react__WEBPACK_IMPORTED_MODULE_21__.useMemo)(function () {\n    return getCustomMode(expressions, operations);\n  }, [expressions, operations]);\n  (0,react__WEBPACK_IMPORTED_MODULE_21__.useImperativeHandle)(ref, function () {\n    return {\n      insertText: insertText,\n      getEditorValue: function getEditorValue() {\n        return (0,lodash__WEBPACK_IMPORTED_MODULE_34__.trimStart)(value);\n      },\n      getEditor: function getEditor() {\n        var editor = editorRef.current.editor;\n        return editor;\n      }\n    };\n  });\n  (0,react__WEBPACK_IMPORTED_MODULE_21__.useEffect)(function () {\n    designer_base_Main__WEBPACK_IMPORTED_MODULE_23__.eventBus.on('setFunctionParam', insertText);\n    return function () {\n      designer_base_Main__WEBPACK_IMPORTED_MODULE_23__.eventBus.off('setFunctionParam', insertText);\n    };\n  }, []);\n  var insertText = function insertText(str) {\n    var editor = editorRef.current.editor;\n    var pos = editor.getCursor();\n    var line = pos.line,\n      ch = pos.ch;\n    if (ch !== 0) {\n      str = \" \".concat(str, \" \");\n    } else {\n      str = \"\".concat(str, \" \");\n    }\n    editor.replaceRange(str, pos);\n    // 这里不用设置cursor，貌似鼠标焦点会出问题\n    // editor.setCursor({\n    //   line,\n    //   ch: ch + str.length\n    // })\n    _babel_runtime_corejs3_core_js_stable_set_timeout__WEBPACK_IMPORTED_MODULE_19___default()(function () {\n      editor.refresh();\n      editor.focus();\n      editor.scrollIntoView(null);\n    }, 0);\n  };\n  var handleChange = function handleChange(editor, data, value) {\n    var from = data.from;\n    var fromStartOfLine = _objectSpread(_objectSpread({}, from), {}, {\n      ch: 0\n    });\n\n    // 手动输入匹配（字段的key=>标签文本）\n    var _iterator2 = _createForOfIteratorHelper(fields),\n      _step2;\n    try {\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        var _context2;\n        var _step2$value = _step2.value,\n          _id = _step2$value.id,\n          longText = _step2$value.longText;\n        var text = longText.replace(/(\\S+)\\(\\S+\\)/g, '$1');\n        var regExp = isSafariBrowser.current ? new RegExp(\"\\\\s*(\".concat(_id, \")\\\\s\")) : new RegExp(\"(?<!\\\\S)(\".concat(_id, \")(?=\\\\s)\")); // ?<断言在safari不支持，报错\n        var fieldText = _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_20___default()(_context2 = \"{{Field id=\\\"\".concat(_id, \"\\\" text=\\\"\")).call(_context2, text, \"\\\"}}\");\n        replaceFieldKey(editor, fromStartOfLine, regExp, fieldText);\n      }\n      // 文本转换成标签\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n    replaceShortcode(editor, fromStartOfLine);\n  };\n  var handleLoad = function handleLoad(editor) {\n    // 编辑器初始加载的时候，将文本全量替换处理下（字段的key=>标签文本）\n    var replacedValue = initValue;\n    var _iterator3 = _createForOfIteratorHelper(fields),\n      _step3;\n    try {\n      for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n        var _context3;\n        var _step3$value = _step3.value,\n          _id2 = _step3$value.id,\n          longText = _step3$value.longText;\n        var text = longText.replace(/(\\S+)\\(\\S+\\)/g, '$1');\n        var fieldRegText = _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_20___default()(_context3 = \"{{Field id=\\\"\".concat(_id2, \"\\\" text=\\\"\")).call(_context3, text, \"\\\"}}\");\n        var regExp = isSafariBrowser.current ? new RegExp(\"[^\\\\w|\\\\d|\\\\.|=\\\"|\\\\n]*(?:(\".concat(_id2, \"))[^\\\\w|\\\\d|\\\"|\\\\n]*\"), 'g') : new RegExp(\"(?<!\\\\w|\\\\d|\\\\.|=\\\")(\".concat(_id2, \")(?!\\\\w|\\\\d|\\\")\"), 'g');\n        replacedValue = replacedValue.replace(regExp, fieldRegText);\n      }\n    } catch (err) {\n      _iterator3.e(err);\n    } finally {\n      _iterator3.f();\n    }\n    var timer = _babel_runtime_corejs3_core_js_stable_set_timeout__WEBPACK_IMPORTED_MODULE_19___default()(function () {\n      clearTimeout(timer);\n      editor.setValue(replacedValue);\n      editor.setCursor(\n      // 将光标移到末尾\n      editor.lineCount(), 0);\n    }, 0);\n  };\n  var handleUpdate = function handleUpdate(editor) {\n    renderReactNodes(editor);\n  };\n  var replaceFieldKey = function replaceFieldKey(editor, loc, regExp, fieldText) {\n    // 转换：标签的key => 标签文本\n    var cursor = editor.getSearchCursor(regExp, loc, {\n      multiline: 'disable'\n    });\n    while (cursor.findNext()) {\n      var markers = editor.findMarks(cursor.from(), cursor.to());\n      if (markers.length === 0) {\n        var from = cursor.from();\n        var to = cursor.to();\n        editor.replaceRange(fieldText, from, to);\n      }\n    }\n  };\n  var replaceShortcode = function replaceShortcode(editor, loc) {\n    // 转换：标签文本 => node\n    var cursor = editor.getSearchCursor(_constants__WEBPACK_IMPORTED_MODULE_26__.FIELD_REGEXP, loc, {\n      multiline: 'disable'\n    });\n    while (cursor.findNext()) {\n      var markers = editor.findMarks(cursor.from(), cursor.to());\n      if (markers.length === 0) {\n        var from = cursor.from();\n        var to = cursor.to();\n\n        // extract if checkbox is selected or not\n        var match = editor.getRange(from, to);\n        var idMatches = match.match(_constants__WEBPACK_IMPORTED_MODULE_26__.FIELD_REGEXP);\n        var node = document.createElement('div');\n        node.setAttribute('class', 'tag');\n        node.setAttribute('data-id', idMatches[1]);\n        node.setAttribute('data-text', idMatches[2]);\n        // node.innerText = idMatches[1];\n        customNodes.current.push(node);\n        editor.markText(from, to, {\n          replacedWith: node\n        });\n      }\n    }\n  };\n  var renderReactNodes = function renderReactNodes(editor) {\n    var _context4;\n    var needsRefresh = false;\n    customNodes.current = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_15___default()(_context4 = customNodes.current).call(_context4, function (n) {\n      if (n.ownerDocument.body.contains(n)) {\n        if (!n.dataset.__react_rendered) {\n          var fieldId = n.dataset.id;\n          var fieldName = n.dataset.text;\n          n.dataset.__react_rendered = '1';\n          react_dom__WEBPACK_IMPORTED_MODULE_22___default().render( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_21___default().createElement(Field, {\n            id: fieldId,\n            text: fieldName,\n            onClickField: onClickField\n          }), n);\n          needsRefresh = true;\n        }\n        return true;\n      } else {\n        if (n.dataset.__react_rendered) {\n          react_dom__WEBPACK_IMPORTED_MODULE_22___default().unmountComponentAtNode(n);\n        }\n        return false;\n      }\n    });\n    if (needsRefresh) {\n      editor.refresh();\n    }\n  };\n  var handleCheck = function handleCheck() {\n    if (value === '') return;\n    var encodedValue = getEncodeValue((0,lodash__WEBPACK_IMPORTED_MODULE_34__.trimStart)(value));\n    invokeAction('validateFormula', [encodedValue]);\n  };\n  options.placeholder = (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_23__.getLangMsg)('ruled.editArea.key0001');\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_21___default().createElement(\"div\", {\n    className: \"code-edit\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_21___default().createElement(react_codemirror2__WEBPACK_IMPORTED_MODULE_25__.Controlled, {\n    ref: editorRef,\n    value: value,\n    options: options,\n    defineMode: customMode,\n    onBeforeChange: function onBeforeChange(editor, data, newVal) {\n      setValue(newVal);\n    },\n    onChange: handleChange,\n    editorDidMount: handleLoad,\n    onUpdate: handleUpdate\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_21___default().createElement(\"div\", {\n    className: classnames__WEBPACK_IMPORTED_MODULE_35___default()(['check-btn', {\n      disabled: value === ''\n    }]),\n    onClick: handleCheck\n  }, (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_23__.getLangMsg)('ruled.editArea.key0002')));\n});\nfunction Field(_ref2) {\n  var text = _ref2.text,\n    id = _ref2.id,\n    onClickField = _ref2.onClickField;\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_21___default().createElement(\"span\", {\n    onClick: function onClick() {\n      return onClickField(id);\n    }\n  }, text);\n}\n/* harmony default export */ __webpack_exports__[\"default\"] = (EditArea);\n\n//# sourceURL=webpack://rule-designer/./src/editors/condition/EditArea.tsx?");

/***/ }),

/***/ 70987:
/*!**************************************************!*\
  !*** ./src/editors/condition/ExpressionTree.tsx ***!
  \**************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/keys */ 47976);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols */ 39448);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor */ 55748);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/for-each */ 7312);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors */ 54120);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-properties */ 63808);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-property */ 45040);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/slicedToArray */ 95992);\n/* harmony import */ var _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/defineProperty */ 30112);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/filter */ 18860);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ 75984);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/includes */ 82600);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/concat */ 81744);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! react */ 43400);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! classnames */ 71252);\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var _assets_images_search_tree_empty_png__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../assets/images/search-tree-empty.png */ 70780);\n/* harmony import */ var _kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @kdcloudjs/kdesign */ 54116);\n/* harmony import */ var _kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_16__);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! designer_base/Main */ 18040);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(designer_base_Main__WEBPACK_IMPORTED_MODULE_17__);\n\n\n\n\n\n\n\n\n\nfunction ownKeys(e, r) { var t = _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0___default()(e); if ((_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1___default())) { var o = _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1___default()(e); r && (o = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_9___default()(o).call(o, function (r) { return _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2___default()(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var _context4, _context5; var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_3___default()(_context4 = ownKeys(Object(t), !0)).call(_context4, function (r) { (0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(e, r, t[r]); }) : (_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_4___default()) ? _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_5___default()(e, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_4___default()(t)) : _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_3___default()(_context5 = ownKeys(Object(t))).call(_context5, function (r) { _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_6___default()(e, r, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2___default()(t, r)); }); } return e; }\n\n\n\n\n\n\n\n\n\nvar searchExpressions = function searchExpressions(data, searchVal) {\n  var _context;\n  return _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_9___default()(_context = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_10___default()(data).call(data, function (expression) {\n    var types = expression.types;\n    var filteredChildren = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_9___default()(types).call(types, function (item) {\n      var _context2;\n      return _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_11___default()(_context2 = item.name).call(_context2, searchVal);\n    });\n    if (!filteredChildren.length) return null;\n    return _objectSpread(_objectSpread({}, expression), {}, {\n      types: filteredChildren\n    });\n  })).call(_context, Boolean);\n};\nfunction SearchEmptyNode(_ref) {\n  var className = _ref.className;\n  var emptyText = (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_17__.getLangMsg)('ruled.expressionTree.key0001');\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_13___default().createElement(\"div\", {\n    className: \"\".concat(className, \"-empty\")\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_13___default().createElement(\"img\", {\n    className: \"\".concat(className, \"-empty-img\"),\n    src: _assets_images_search_tree_empty_png__WEBPACK_IMPORTED_MODULE_15__[\"default\"],\n    height: \"72\",\n    alt: emptyText\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_13___default().createElement(\"div\", {\n    className: \"\".concat(className, \"-empty-text\")\n  }, emptyText));\n}\nfunction ExpressionTree(_ref2) {\n  var data = _ref2.data,\n    onSelect = _ref2.onSelect,\n    onShowDescription = _ref2.onShowDescription;\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_13__.useState)(''),\n    _useState2 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(_useState, 2),\n    inputVal = _useState2[0],\n    setInputVal = _useState2[1];\n  var _useState3 = (0,react__WEBPACK_IMPORTED_MODULE_13__.useState)(null),\n    _useState4 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(_useState3, 2),\n    descriptionCache = _useState4[0],\n    setDescriptionCache = _useState4[1];\n  var _useState5 = (0,react__WEBPACK_IMPORTED_MODULE_13__.useState)(''),\n    _useState6 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(_useState5, 2),\n    activeKey = _useState6[0],\n    setActiveKey = _useState6[1];\n  var _useState7 = (0,react__WEBPACK_IMPORTED_MODULE_13__.useState)(data),\n    _useState8 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(_useState7, 2),\n    expressionsWithSearch = _useState8[0],\n    setExpressionsWithSearch = _useState8[1];\n  var handleExpressionSearch = function handleExpressionSearch(e) {\n    var value = e.target.value;\n    setInputVal(value);\n    setExpressionsWithSearch(function () {\n      var newExpressions = searchExpressions(data, value);\n      return newExpressions;\n    });\n  };\n  var handleClick = function handleClick(item) {\n    var id = item.id,\n      desc = item.desc;\n    onSelect(item);\n    setActiveKey(id);\n    setDescriptionCache(desc);\n    onShowDescription(desc);\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_13___default().createElement(\"div\", {\n    className: \"kd-expression-tree-wrap\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_13___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_16__.Input, {\n    style: {\n      marginBottom: 9,\n      width: '100%'\n    },\n    value: inputVal,\n    placeholder: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_17__.getLangMsg)('ruled.expressionTree.key0002'),\n    borderType: \"bordered\",\n    onChange: handleExpressionSearch,\n    allowClear: true,\n    prefix: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_13___default().createElement(\"div\", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_13___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_16__.Icon, {\n      type: \"search\",\n      style: {\n        cursor: 'pointer'\n      }\n    }))\n  }), inputVal && !(expressionsWithSearch !== null && expressionsWithSearch !== void 0 && expressionsWithSearch.length) ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_13___default().createElement(SearchEmptyNode, {\n    className: \"left-datasource\"\n  }) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_13___default().createElement(\"div\", {\n    className: \"kd-expression-tree\"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_13___default().createElement(\"div\", {\n    className: \"kd-expression-tree-body\"\n  }, _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_10___default()(expressionsWithSearch).call(expressionsWithSearch, function (expression) {\n    var types = expression.types,\n      headerName = expression.name;\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_13___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_16__.Collapse, {\n      name: \"Collapse\",\n      key: expression.id,\n      defaultActiveKey: expression.id\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_13___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_16__.Collapse.Panel, {\n      header: headerName,\n      panelKey: expression.id\n    }, _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_10___default()(types).call(types, function (item) {\n      var _context3;\n      return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_13___default().createElement(\"div\", {\n        key: _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_12___default()(_context3 = \"\".concat(expression.id, \"-\")).call(_context3, item.key),\n        className: classnames__WEBPACK_IMPORTED_MODULE_14___default()(['expression-item', {\n          'is-active': item.id === activeKey\n        }]),\n        onClick: function onClick() {\n          return handleClick(item);\n        },\n        onMouseOver: function onMouseOver() {\n          return onShowDescription(item.desc);\n        },\n        onMouseLeave: function onMouseLeave() {\n          return onShowDescription(descriptionCache);\n        }\n      }, item.name || '');\n    })));\n  }))));\n}\n/* harmony default export */ __webpack_exports__[\"default\"] = (ExpressionTree);\n\n//# sourceURL=webpack://rule-designer/./src/editors/condition/ExpressionTree.tsx?");

/***/ }),

/***/ 15708:
/*!********************************************!*\
  !*** ./src/editors/condition/NoteArea.tsx ***!
  \********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/keys */ 47976);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols */ 39448);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/filter */ 18860);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor */ 55748);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/for-each */ 7312);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors */ 54120);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-properties */ 63808);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-property */ 45040);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/defineProperty */ 30112);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! react */ 43400);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var _kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @kdcloudjs/kdesign */ 54116);\n/* harmony import */ var _kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! designer_base/Main */ 18040);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(designer_base_Main__WEBPACK_IMPORTED_MODULE_11__);\n\n\n\n\n\n\n\n\n\nfunction ownKeys(e, r) { var t = _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0___default()(e); if ((_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1___default())) { var o = _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1___default()(e); r && (o = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_2___default()(o).call(o, function (r) { return _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_3___default()(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var _context, _context2; var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_4___default()(_context = ownKeys(Object(t), !0)).call(_context, function (r) { (0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(e, r, t[r]); }) : (_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5___default()) ? _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_6___default()(e, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5___default()(t)) : _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_4___default()(_context2 = ownKeys(Object(t))).call(_context2, function (r) { _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_7___default()(e, r, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_3___default()(t, r)); }); } return e; }\n\n\n\nvar NoteArea = function NoteArea(_ref) {\n  var description = _ref.description,\n    alertData = _ref.alertData,\n    setAlertData = _ref.setAlertData;\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9___default().createElement(\"div\", {\n    className: \"note-area\"\n  }, alertData.visible && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_10__.Alert, {\n    message: alertData.msg,\n    showIcon: true,\n    closable: true,\n    type: alertData.type,\n    delayOffTime: alertData.type === 'success' ? 1000 : 0,\n    onClose: function onClose() {\n      return setAlertData(function (data) {\n        return _objectSpread(_objectSpread({}, data), {}, {\n          visible: false\n        });\n      });\n    }\n  }), description ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9___default().createElement(\"div\", {\n    className: \"description-content\"\n  }, description) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9___default().createElement(\"div\", {\n    className: \"description-content\"\n  }, (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_11__.getLangMsg)('ruled.editors.key0001'), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9___default().createElement(\"br\", null), (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_11__.getLangMsg)('ruled.editors.key0002'), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9___default().createElement(\"br\", null), (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_11__.getLangMsg)('ruled.editors.key0003'), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_9___default().createElement(\"br\", null), (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_11__.getLangMsg)('ruled.editors.key0004')));\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (NoteArea);\n\n//# sourceURL=webpack://rule-designer/./src/editors/condition/NoteArea.tsx?");

/***/ }),

/***/ 44256:
/*!********************************************!*\
  !*** ./src/editors/condition/Operator.tsx ***!
  \********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ 75984);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ 43400);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n\n\nvar Operator = function Operator(_ref) {\n  var operations = _ref.operations,\n    onOperationClick = _ref.onOperationClick;\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", {\n    className: \"condition-operator\"\n  }, _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0___default()(operations).call(operations, function (op) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", {\n      className: \"operation-item\",\n      key: op,\n      onClick: function onClick() {\n        return onOperationClick(op);\n      }\n    }, op);\n  }));\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (Operator);\n\n//# sourceURL=webpack://rule-designer/./src/editors/condition/Operator.tsx?");

/***/ }),

/***/ 83452:
/*!*****************************************!*\
  !*** ./src/editors/condition/index.tsx ***!
  \*****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_corejs3_helpers_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/extends */ 2664);\n/* harmony import */ var _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/defineProperty */ 30112);\n/* harmony import */ var _babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/slicedToArray */ 95992);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ 43400);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! designer_base/Main */ 18040);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(designer_base_Main__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _common_CustomInputTrigger__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common/CustomInputTrigger */ 57092);\n/* harmony import */ var _ConditionModal__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./ConditionModal */ 67224);\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../context */ 90115);\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../constants */ 98092);\n\n\n\n\n\n\n\n\n\nvar ConditionEditor = function ConditionEditor(props) {\n  var field = props.field,\n    id = props.id,\n    propName = props.propName,\n    actionType = props.actionType,\n    modalTitle = props.modalTitle,\n    locked = props.locked;\n  var propValue = field[propName] || '';\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false),\n    _useState2 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(_useState, 2),\n    modalVisible = _useState2[0],\n    setModalVisible = _useState2[1];\n  var _useContext = (0,react__WEBPACK_IMPORTED_MODULE_3__.useContext)(_context__WEBPACK_IMPORTED_MODULE_7__.DesignerContext),\n    getKdesignerApi = _useContext.getKdesignerApi;\n  var _getKdesignerApi = getKdesignerApi(),\n    dataContext = _getKdesignerApi.data;\n  var onConfirm = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(function (str) {\n    var condition = str.replace(_constants__WEBPACK_IMPORTED_MODULE_8__.FIELD_REGEXP_G, '$1');\n    dataContext.batchUpdateControlPropertyValues((0,designer_base_Main__WEBPACK_IMPORTED_MODULE_4__.createUpdateAction)([[id, (0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({}, propName, condition)]]));\n  }, []);\n  var handleClick = function handleClick() {\n    if (locked) return;\n    setModalVisible(true);\n  };\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default().createElement((react__WEBPACK_IMPORTED_MODULE_3___default().Fragment), null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default().createElement(_common_CustomInputTrigger__WEBPACK_IMPORTED_MODULE_5__[\"default\"], (0,_babel_runtime_corejs3_helpers_extends__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({}, props, {\n    disabled: locked,\n    value: propValue,\n    onClick: handleClick\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default().createElement(_ConditionModal__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n    value: propValue,\n    actionType: actionType,\n    modalTitle: modalTitle,\n    visible: modalVisible,\n    setVisible: setModalVisible,\n    onConfirm: onConfirm\n  }));\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (ConditionEditor);\n\n//# sourceURL=webpack://rule-designer/./src/editors/condition/index.tsx?");

/***/ }),

/***/ 58036:
/*!******************************!*\
  !*** ./src/editors/index.ts ***!
  \******************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/slicedToArray */ 95992);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/for-each */ 7312);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/keys */ 47976);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _TakeBaseProAction__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./TakeBaseProAction */ 64464);\n/* harmony import */ var _SetEqutionAction__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./SetEqutionAction */ 74244);\n/* harmony import */ var _FillQtyAction__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./FillQtyAction */ 93312);\n/* harmony import */ var _ClearValueAction__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./ClearValueAction */ 48924);\n/* harmony import */ var _CheckFields__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./CheckFields */ 42716);\n/* harmony import */ var _ClientSetFieldfmtAction__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./ClientSetFieldfmtAction */ 8716);\n/* harmony import */ var _ClientSetFieldAction__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./ClientSetFieldAction */ 84332);\n/* harmony import */ var _FormulaAction__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./FormulaAction */ 57456);\n/* harmony import */ var _PreCondition__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./PreCondition */ 23604);\n/* harmony import */ var _CustomAction__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./CustomAction */ 85020);\n/* harmony import */ var _ClientSetRowFmtAction__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./ClientSetRowFmtAction */ 90396);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * 属性编辑器\n * @returns\n */\nvar getPropertyEditors = function getPropertyEditors() {\n  var list = [];\n  var editorMapList = [[_TakeBaseProAction__WEBPACK_IMPORTED_MODULE_3__, 'TakeBasePropertyAction'],\n  // 携带属性\n  [_SetEqutionAction__WEBPACK_IMPORTED_MODULE_4__, 'SetEqutionAction'],\n  // 携带字段\n  [_FillQtyAction__WEBPACK_IMPORTED_MODULE_5__, 'FillQtyAction'],\n  // 数量换算\n  [_ClearValueAction__WEBPACK_IMPORTED_MODULE_6__, 'ClearValueAction'],\n  // 清除字段\n  [_CheckFields__WEBPACK_IMPORTED_MODULE_7__, 'LockFieldAction'],\n  // 锁定字段\n  [_CheckFields__WEBPACK_IMPORTED_MODULE_7__, 'UnlockFieldAction'],\n  // 解锁字段\n  [_CheckFields__WEBPACK_IMPORTED_MODULE_7__, 'ShowFieldAction'],\n  // 显示字段\n  [_CheckFields__WEBPACK_IMPORTED_MODULE_7__, 'HideFieldAction'],\n  // 隐藏字段\n  [_CheckFields__WEBPACK_IMPORTED_MODULE_7__, 'LockControlAction'],\n  // 锁定控件\n  [_CheckFields__WEBPACK_IMPORTED_MODULE_7__, 'UnlockControlAction'],\n  // 解锁控件\n  [_CheckFields__WEBPACK_IMPORTED_MODULE_7__, 'ShowControlAction'],\n  // 显示控件\n  [_CheckFields__WEBPACK_IMPORTED_MODULE_7__, 'HideControlAction'],\n  // 隐藏控件\n  [_CheckFields__WEBPACK_IMPORTED_MODULE_7__, 'ClientLockFieldAction'],\n  // 锁定字段(卡片)\n  [_CheckFields__WEBPACK_IMPORTED_MODULE_7__, 'ClientUnlockFieldAction'],\n  // 解锁字段(卡片)\n  [_CheckFields__WEBPACK_IMPORTED_MODULE_7__, 'ClientShowFieldAction'],\n  // 显示字段(卡片)\n  [_CheckFields__WEBPACK_IMPORTED_MODULE_7__, 'ClientHideFieldAction'],\n  // 隐藏字段(卡片)\n  [_CheckFields__WEBPACK_IMPORTED_MODULE_7__, 'ClientLockControlAction'],\n  // 锁定控件(卡片)\n  [_CheckFields__WEBPACK_IMPORTED_MODULE_7__, 'ClientUnlockControlAction'],\n  // 解锁控件(卡片)\n  [_CheckFields__WEBPACK_IMPORTED_MODULE_7__, 'ClientShowControlAction'],\n  // 显示控件(卡片)\n  [_CheckFields__WEBPACK_IMPORTED_MODULE_7__, 'ClientHideControlAction'],\n  // 隐藏控件(卡片)\n  [_ClientSetFieldfmtAction__WEBPACK_IMPORTED_MODULE_8__, 'ClientSetFieldfmtAction'],\n  // 设置字段显示样式\n  [_ClientSetFieldAction__WEBPACK_IMPORTED_MODULE_9__, 'ClientSetFieldAction'],\n  // 设置字段属性\n  [_ClientSetFieldAction__WEBPACK_IMPORTED_MODULE_9__, 'ClientSetControlAction'],\n  // 设置控件属性\n  [_FormulaAction__WEBPACK_IMPORTED_MODULE_10__, 'FormulaAction'],\n  // 计算字段\n  [_PreCondition__WEBPACK_IMPORTED_MODULE_11__, 'ConditionNode'],\n  // 条件设置\n  [_ClientSetRowFmtAction__WEBPACK_IMPORTED_MODULE_13__, 'ClientSetRowFmtAction'] // 设置行样式\n  ];\n  _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_1___default()(editorMapList).call(editorMapList, function (_ref) {\n    var _context;\n    var _ref2 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_ref, 2),\n      editorMap = _ref2[0],\n      controlType = _ref2[1];\n    _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_1___default()(_context = _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_2___default()(editorMap)).call(_context, function (editorType) {\n      list.push([editorType, editorMap[editorType], controlType]);\n    });\n    list.push(['CustomInput', _CustomAction__WEBPACK_IMPORTED_MODULE_12__[\"default\"], '']);\n  });\n  return list;\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (getPropertyEditors);\n\n//# sourceURL=webpack://rule-designer/./src/editors/index.ts?");

/***/ }),

/***/ 52708:
/*!**********************************!*\
  !*** ./src/hooks/useDragDrop.ts ***!
  \**********************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DRAG_NODE_ID: function() { return /* binding */ DRAG_NODE_ID; },\n/* harmony export */   dragNodeIdDataAttribute: function() { return /* binding */ dragNodeIdDataAttribute; }\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/find */ 47332);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ 43400);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash */ 67928);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _context_index__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../context/index */ 90115);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! designer_base/Main */ 18040);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(designer_base_Main__WEBPACK_IMPORTED_MODULE_4__);\n\n/*\n * @Author: fjr\n * @Email: jinrui_fang@kingdee.com\n * @Date: 2022-04-06 10:47:08\n * @Last Modified by: fjr\n * @LastEditTime: 2022-04-08 14:12:15\n * @Description: ...\n */\n\n\n\n\n\nvar dragNodeIdDataAttribute = 'can-drag-node-id';\nvar DRAG_NODE_ID = 'drag-node-id';\n// type DropEventHook = (event: React.DragEvent) => void\n\nvar dragNodeId = null;\nvar dragOverNodeId = null;\nvar FRONT = 'front';\nvar BACK = 'back';\nvar insertPositionMode = FRONT;\n// let dragOverNodeId = null\n\nvar useDragDrop = function useDragDrop(id, onDragStartHook, onDropHook) {\n  //\n  var _useContext = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(_context_index__WEBPACK_IMPORTED_MODULE_3__.DesignerContext),\n    getKdesignerApi = _useContext.getKdesignerApi,\n    getPrefixCls = _useContext.getPrefixCls,\n    prefixCls = _useContext.prefixCls,\n    getRulesNodes = _useContext.getRulesNodes,\n    activeRuleNodeId = _useContext.activeRuleNodeId;\n  var sortData = function sortData(dragId, dropId) {\n    var strategy = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'insert';\n    if (!dragId || !dropId || dropId === dragId) {\n      return;\n    }\n    switch (strategy) {\n      case 'insert':\n      default:\n        {\n          var api = getKdesignerApi();\n          // let targetIndex = api.data.findControlIndex(dropId)\n          // const { ParentId: targetParentId } = api.data.findControl(dropId)\n          // targetIndex = insertPositionMode === FRONT ? targetIndex : targetIndex + 1\n          api.data.customUpdateState((0,designer_base_Main__WEBPACK_IMPORTED_MODULE_4__.createCustomUpdateAction)(function (state) {\n            var items = state.Items;\n            var dragNode = _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_0___default()(items).call(items, function (item) {\n              return item.Id === dragId;\n            });\n            var dropNode = _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_0___default()(items).call(items, function (item) {\n              return item.Id === dropId;\n            });\n            var dropNodeNextNode = _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_0___default()(items).call(items, function (item) {\n              return item.ParentId === dropId;\n            });\n            var dropNodeNextNodeId = dropNodeNextNode === null || dropNodeNextNode === void 0 ? void 0 : dropNodeNextNode.Id;\n            var dropNodePreviousNodeId = dropNode.ParentId;\n            var dragNodeNextNode = _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_0___default()(items).call(items, function (item) {\n              return item.ParentId === dragId;\n            });\n            // const dragNodeNextNodeId = dragNodeNextNode?.Id\n            var dragNodePreviousNodeId = dragNode.ParentId;\n            if (insertPositionMode === FRONT) {\n              if (dropNodePreviousNodeId === dragId) {\n                return;\n              }\n              dragNodeNextNode.ParentId = dragNodePreviousNodeId;\n              dropNode.ParentId = dragId;\n              dragNode.ParentId = dropNodePreviousNodeId;\n              dragNode.NodeType = dropNode.NodeType;\n            } else {\n              if (dropNodeNextNodeId === dragId) {\n                return;\n              }\n              dragNodeNextNode.ParentId = dragNodePreviousNodeId;\n              dragNode.ParentId = dropId;\n              dragNode.NodeType = dropNode.NodeType;\n              dropNodeNextNode.ParentId = dragId;\n            }\n          }));\n        }\n    }\n  };\n\n  // const removeDragMarkId = () => {\n  //   dragNodeId = null\n  // }\n\n  // const removeDragOverMarkId = () => {\n  //   dragOverNodeId = null\n  // }\n\n  var markDragNodeId = function markDragNodeId(id) {\n    // removeDragMarkId()\n    dragNodeId = id;\n  };\n  var markDragOverNodeId = function markDragOverNodeId(id) {\n    // removeDragOverMarkId()\n    dragOverNodeId = id;\n  };\n  var onDragStart = function onDragStart(event) {\n    markDragNodeId(id);\n    onDragStartHook && onDragStartHook(event);\n  };\n  var onDragOverProxy = (0,lodash__WEBPACK_IMPORTED_MODULE_2__.throttle)(function (event) {\n    event.preventDefault();\n    markDragOverNodeId(id);\n    var boundingRect = event.target.getBoundingClientRect();\n    console.log(boundingRect);\n    console.log(event.clientX);\n    if (event.clientX <= boundingRect.x + boundingRect.width / 2) {\n      insertPositionMode = FRONT;\n    } else {\n      insertPositionMode = BACK;\n    }\n  }, 200);\n  var onDragOver = function onDragOver(event) {\n    event.preventDefault();\n    event.persist();\n    onDragOverProxy(event);\n  };\n  // throttle(, 200)\n\n  var onDrop = function onDrop(event) {\n    event.preventDefault();\n    sortData(dragNodeId, dragOverNodeId);\n    onDropHook && onDropHook(event);\n  };\n  return {\n    onDragStart: onDragStart,\n    onDragOver: onDragOver,\n    onDrop: onDrop,\n    draggable: true\n    // [`data-${dragNodeIdDataAttribute}`]: id\n  };\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (useDragDrop);\n\n//# sourceURL=webpack://rule-designer/./src/hooks/useDragDrop.ts?");

/***/ }),

/***/ 87060:
/*!***************************************!*\
  !*** ./src/hooks/useKeyboardEvent.ts ***!
  \***************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ 43400);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../context */ 90115);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! designer_base/Main */ 18040);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(designer_base_Main__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _utils_control__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/control */ 3700);\n\n\n\n\nvar useKeyboardEvent = function useKeyboardEvent(ref, isOutline) {\n  var _useContext = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_context__WEBPACK_IMPORTED_MODULE_1__.DesignerContext),\n    getKdesignerApi = _useContext.getKdesignerApi,\n    isLockRule = _useContext.isLockRule,\n    activeRuleId = _useContext.activeRuleId;\n  var kdesignerApi = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(function () {\n    return getKdesignerApi();\n  }, []);\n  var dataContext = kdesignerApi.data;\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(function () {\n    // 需要判断当前规则是否锁定\n    var locked = isLockRule(activeRuleId);\n    if (locked) return;\n    var mainViewNode = ref.current;\n    if (mainViewNode) {\n      var handleKeyBoardEvent = function handleKeyBoardEvent(event) {\n        if (event.target !== mainViewNode) return;\n        event.stopPropagation();\n        // 删除控件\n        var keyCode = event.keyCode;\n        switch (keyCode) {\n          case designer_base_Main__WEBPACK_IMPORTED_MODULE_2__.keyCode.DELETE:\n            {\n              (0,_utils_control__WEBPACK_IMPORTED_MODULE_3__.deleteControlFn)(kdesignerApi);\n              break;\n            }\n          case designer_base_Main__WEBPACK_IMPORTED_MODULE_2__.keyCode.Z:\n            {\n              // 撤销\n              var canUndo = dataContext.canUndo();\n              if ((0,designer_base_Main__WEBPACK_IMPORTED_MODULE_2__.isCtrlActive)(event) && canUndo) {\n                dataContext.undo();\n              }\n              break;\n            }\n          case designer_base_Main__WEBPACK_IMPORTED_MODULE_2__.keyCode.Y:\n            {\n              // 恢复\n              var canRedo = dataContext.canRedo();\n              if ((0,designer_base_Main__WEBPACK_IMPORTED_MODULE_2__.isCtrlActive)(event) && canRedo) {\n                dataContext.redo();\n              }\n              break;\n            }\n          default:\n            {\n              break;\n            }\n        }\n      };\n      // const debounceHandleKeyBoardEvent = debounce(handleKeyBoardEvent, 100)\n      var debounceHandleKeyBoardEvent = handleKeyBoardEvent;\n      mainViewNode.addEventListener('keydown', debounceHandleKeyBoardEvent);\n      return function () {\n        mainViewNode.removeEventListener('keydown', debounceHandleKeyBoardEvent);\n      };\n    }\n  }, [activeRuleId]);\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (useKeyboardEvent);\n\n//# sourceURL=webpack://rule-designer/./src/hooks/useKeyboardEvent.ts?");

/***/ }),

/***/ 56828:
/*!***********************************!*\
  !*** ./src/hooks/useNodeClick.ts ***!
  \***********************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ 43400);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../context */ 90115);\n\n\nvar useClick = function useClick(id) {\n  var _useContext = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_context__WEBPACK_IMPORTED_MODULE_1__.FlowViewContext),\n    canClick = _useContext.canClick;\n  var _useContext2 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_context__WEBPACK_IMPORTED_MODULE_1__.DesignerContext),\n    getKdesignerApi = _useContext2.getKdesignerApi;\n  var kdesignerApi = getKdesignerApi();\n  var selectionContext = kdesignerApi.selection;\n  var setSelect = selectionContext.setSelect;\n  var onClick = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function (event) {\n    if (!canClick) return;\n    event.stopPropagation();\n    setSelect([id]);\n  }, []);\n  return onClick;\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (useClick);\n\n//# sourceURL=webpack://rule-designer/./src/hooks/useNodeClick.ts?");

/***/ }),

/***/ 88840:
/*!**********************************!*\
  !*** ./src/hooks/useSelected.ts ***!
  \**********************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/slicedToArray */ 95992);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/includes */ 82600);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ 43400);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _context_index__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../context/index */ 90115);\n\n\n\n\nvar useSelected = function useSelected(id) {\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false),\n    _useState2 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useState, 2),\n    isSelected = _useState2[0],\n    setSelected = _useState2[1];\n  var _useContext = (0,react__WEBPACK_IMPORTED_MODULE_2__.useContext)(_context_index__WEBPACK_IMPORTED_MODULE_3__.DesignerContext),\n    getKdesignerApi = _useContext.getKdesignerApi;\n  var kdesignerApi = (0,react__WEBPACK_IMPORTED_MODULE_2__.useMemo)(function () {\n    return getKdesignerApi();\n  }, []);\n  var selectionContext = kdesignerApi.selection;\n  var selectionCallBack = (0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(function (selection) {\n    var value = selection.value;\n    var newSel = value === null || value === void 0 ? void 0 : _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_1___default()(value).call(value, id);\n    setSelected(newSel);\n  }, [id]);\n  (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(function () {\n    var selectvalue = selectionContext.getSelection();\n    var newSel = selectvalue === null || selectvalue === void 0 ? void 0 : _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_1___default()(selectvalue).call(selectvalue, id);\n    setSelected(newSel);\n    var removeSelectionListener = selectionContext.addSelectChangeListener(selectionCallBack);\n    return function () {\n      removeSelectionListener();\n    };\n  }, []);\n  return isSelected;\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (useSelected);\n\n//# sourceURL=webpack://rule-designer/./src/hooks/useSelected.ts?");

/***/ }),

/***/ 90236:
/*!***********************!*\
  !*** ./src/index.tsx ***!
  \***********************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols */ 39448);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/filter */ 18860);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor */ 55748);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/for-each */ 7312);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors */ 54120);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-properties */ 63808);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-property */ 45040);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/defineProperty */ 30112);\n/* harmony import */ var _babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/slicedToArray */ 95992);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/keys */ 47976);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/concat */ 81744);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! react */ 43400);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! designer_base/Main */ 18040);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(designer_base_Main__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var _kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @kdcloudjs/kdesign */ 54116);\n/* harmony import */ var _kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var _views_main_view__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./views/main-view */ 67328);\n/* harmony import */ var _views_left_panel__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./views/left-panel */ 90220);\n/* harmony import */ var _views_right_panel__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./views/right-panel */ 98564);\n/* harmony import */ var _utils_controlIcon__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./utils/controlIcon */ 84995);\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./context */ 90115);\n/* harmony import */ var _meta_index__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./meta/index */ 52904);\n/* harmony import */ var _data_index__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./data/index */ 37304);\n/* harmony import */ var _preHandle__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./preHandle */ 35260);\n/* harmony import */ var _editors__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./editors */ 58036);\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./utils */ 63612);\n/* harmony import */ var resize_observer_polyfill_dist_ResizeObserver_global__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! resize-observer-polyfill/dist/ResizeObserver.global */ 10936);\n/* harmony import */ var resize_observer_polyfill_dist_ResizeObserver_global__WEBPACK_IMPORTED_MODULE_24___default = /*#__PURE__*/__webpack_require__.n(resize_observer_polyfill_dist_ResizeObserver_global__WEBPACK_IMPORTED_MODULE_24__);\n\n\n\n\n\n\n\n\n\nfunction ownKeys(e, r) { var t = _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_9___default()(e); if ((_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_0___default())) { var o = _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_0___default()(e); r && (o = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_1___default()(o).call(o, function (r) { return _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2___default()(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var _context2, _context3; var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_3___default()(_context2 = ownKeys(Object(t), !0)).call(_context2, function (r) { (0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(e, r, t[r]); }) : (_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_4___default()) ? _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_5___default()(e, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_4___default()(t)) : _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_3___default()(_context3 = ownKeys(Object(t))).call(_context3, function (r) { _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_6___default()(e, r, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2___default()(t, r)); }); } return e; }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar RuleDesigner = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_11__.memo)( /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_11__.forwardRef)(function (props, forwardedRef) {\n  var _ruleMetaInfo$;\n  var _props$data = props.data,\n    data = _props$data === void 0 ? {} : _props$data,\n    _props$meta = props.meta,\n    meta = _props$meta === void 0 ? {} : _props$meta,\n    onData = props.onData,\n    _props$showMessage = props.showMessage,\n    showMessage = _props$showMessage === void 0 ? function (msg) {\n      console.log('showMessage-------', msg);\n    } : _props$showMessage,\n    _props$handleCustomIn = props.handleCustomInputEditor,\n    handleCustomInputEditor = _props$handleCustomIn === void 0 ? function () {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      console.log('handleCustomInputEditor-------', args);\n    } : _props$handleCustomIn,\n    _props$invokeAction = props.invokeAction,\n    _invokeAction = _props$invokeAction === void 0 ? function (actionName, params) {\n      console.log('invokeAction-------', actionName, params);\n    } : _props$invokeAction,\n    _props$getEncodeValue = props.getEncodeValue,\n    getEncodeValue = _props$getEncodeValue === void 0 ? function (value) {\n      return value;\n    } : _props$getEncodeValue,\n    _props$ruleMetaInfo = props.ruleMetaInfo,\n    ruleMetaInfo = _props$ruleMetaInfo === void 0 ? {} : _props$ruleMetaInfo,\n    metaType = props.metaType,\n    _props$selectMetaType = props.selectMetaType,\n    selectMetaType = _props$selectMetaType === void 0 ? metaType : _props$selectMetaType,\n    onRuleDesignerApi = props.onApi,\n    getLangMsg = props.getLangMsg;\n  var kdesignerApi = (0,react__WEBPACK_IMPORTED_MODULE_11__.useRef)(null);\n  var dataRef = (0,react__WEBPACK_IMPORTED_MODULE_11__.useRef)(data);\n  var kdesignerRef = (0,react__WEBPACK_IMPORTED_MODULE_11__.useRef)(null);\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_11__.useState)(''),\n    _useState2 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(_useState, 2),\n    activeRuleNodeId = _useState2[0],\n    setActiveRuleNodeId = _useState2[1];\n  var _useState3 = (0,react__WEBPACK_IMPORTED_MODULE_11__.useState)(''),\n    _useState4 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(_useState3, 2),\n    activeRuleId = _useState4[0],\n    setActiveRuleId = _useState4[1];\n  var processPropertyName = (0,react__WEBPACK_IMPORTED_MODULE_11__.useCallback)(function (value) {\n    return value;\n  }, []);\n  (0,react__WEBPACK_IMPORTED_MODULE_11__.useImperativeHandle)(forwardedRef, function () {\n    return {};\n  });\n  // 表单的还要去找有无映射?\n  // 根据后端的来，写死不用去读模型\n  // 可以根据 ruleMetaInfo entity去查找\n  var rulesNodeIds = _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_9___default()(((_ruleMetaInfo$ = ruleMetaInfo[0]) === null || _ruleMetaInfo$ === void 0 ? void 0 : _ruleMetaInfo$.entity) || {});\n  // 废弃\n  var rulesNodeTypes = metaType === 'formmeta' ? ['BillFormAp', 'BasedataFormAp', 'EntryAp', 'CardEntryRowAp', 'ListGridViewAp', 'CardEntryAp', 'FormAp'] : ['BaseEntity', 'BillEntity', 'EntryEntity', 'SubEntryEntity'];\n  var _useState5 = (0,react__WEBPACK_IMPORTED_MODULE_11__.useState)(function () {\n      return (0,_data_index__WEBPACK_IMPORTED_MODULE_20__[\"default\"])(data, rulesNodeTypes, rulesNodeIds, metaType);\n    }),\n    _useState6 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(_useState5, 2),\n    _useState6$ = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(_useState6[0], 2),\n    ruleContainerNodes = _useState6$[0],\n    designerData = _useState6$[1],\n    setDataTuple = _useState6[1];\n  var ruleContainerNodesRef = (0,react__WEBPACK_IMPORTED_MODULE_11__.useRef)(ruleContainerNodes);\n  var ruleDesignerMeta = (0,_meta_index__WEBPACK_IMPORTED_MODULE_19__.createRuleMeta)(metaType, ruleMetaInfo, activeRuleNodeId, ruleContainerNodes, activeRuleId);\n  // const designerDataRef = useRef(designerData)\n  // const [ruleContainerNodes, designerData] = createRuleDesignerData(data, rulesNodeTypes)\n  console.log(ruleContainerNodesRef.current, designerData);\n  // debugger\n  designer_base_Main__WEBPACK_IMPORTED_MODULE_12__.ControlView.tabName = getLangMsg('ruled.views.key0001');\n  _views_left_panel__WEBPACK_IMPORTED_MODULE_15__[\"default\"].tabName = getLangMsg('ruled.leftPanel.key0002');\n  _views_right_panel__WEBPACK_IMPORTED_MODULE_16__[\"default\"].tabName = getLangMsg('ruled.rightPanel.key0005');\n  var getViews = (0,react__WEBPACK_IMPORTED_MODULE_11__.useCallback)(function (viewName) {\n    switch (viewName) {\n      case 'main':\n        {\n          return {\n            main: _views_main_view__WEBPACK_IMPORTED_MODULE_14__[\"default\"]\n          };\n        }\n      case 'left':\n        {\n          return {\n            control: _views_left_panel__WEBPACK_IMPORTED_MODULE_15__[\"default\"]\n            // control: null\n          };\n        }\n      case 'right':\n        {\n          return {\n            // 0: ControlView,\n            property: _views_right_panel__WEBPACK_IMPORTED_MODULE_16__[\"default\"]\n            // rootProperty: RightView\n          };\n        }\n      default:\n        {\n          return {};\n        }\n    }\n  }, []);\n  var onCustomInputClick = (0,react__WEBPACK_IMPORTED_MODULE_11__.useCallback)(function (propName, field, editor) {\n    handleCustomInputEditor(propName, field, editor);\n  }, [handleCustomInputEditor]);\n  var getControlViewEmpty = (0,react__WEBPACK_IMPORTED_MODULE_11__.useCallback)(function () {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default().createElement(\"div\", {\n      className: \"rule-designer-empty-node\"\n    }, getLangMsg('ruled.views.key0002'));\n  }, []);\n  var getPropertyViewEmpty = (0,react__WEBPACK_IMPORTED_MODULE_11__.useCallback)(function () {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default().createElement(\"div\", {\n      className: \"rule-designer-empty-node\"\n    }, getLangMsg('ruled.views.key0002'));\n  }, []);\n  var globalConfig = (0,react__WEBPACK_IMPORTED_MODULE_11__.useMemo)(function () {\n    return {\n      showMessage: showMessage,\n      getViews: getViews,\n      processPropertyName: processPropertyName,\n      keywordMapping: {\n        // 所有meta和data属性名大小写默认配置\n        id: 'Id',\n        type: 'Type',\n        name: 'Name',\n        key: 'Key',\n        items: 'Items',\n        parentId: 'ParentId'\n      },\n      enableSearch: false,\n      dataPortalIdPrefix: 'rule-designer-top-view',\n      enableDiffDefaultData: false,\n      controlViewSetting: {\n        showCollapseTop: false,\n        hideHelpIcon: true,\n        hideAnchorIcon: true,\n        searchInputPlaceholder: getLangMsg('ruled.views.key0003'),\n        // onHelpIconClick: () => {}\n        getEmptyView: getControlViewEmpty,\n        hideTitleTips: true // 隐藏title属性\n      },\n      propertyViewSetting: {\n        getEmptyView: getPropertyViewEmpty\n      },\n      getOutlineItemIcon: function getOutlineItemIcon(type) {\n        return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_13__.Icon, {\n          prefix: \"designericon\",\n          type: (0,_utils_controlIcon__WEBPACK_IMPORTED_MODULE_17__[\"default\"])(type),\n          className: \"rule-designer-control-icon\"\n        });\n      },\n      onCustomInputClick: onCustomInputClick,\n      preHandle: _preHandle__WEBPACK_IMPORTED_MODULE_21__[\"default\"],\n      getPropertyEditors: _editors__WEBPACK_IMPORTED_MODULE_22__[\"default\"],\n      onViewCollapseChange: function onViewCollapseChange(val) {\n        designer_base_Main__WEBPACK_IMPORTED_MODULE_12__.eventBus.emit('onViewCollapseChange', val);\n      },\n      getLangMsg: getLangMsg\n      // controlViewMode: 'horizontal'\n    };\n  }, [showMessage, getViews, processPropertyName, onCustomInputClick, _editors__WEBPACK_IMPORTED_MODULE_22__[\"default\"]]);\n  console.log(props, globalConfig);\n  var kuiConfig = {\n    prefixCls: 'kdesigner'\n  };\n  var onApiProxy = (0,react__WEBPACK_IMPORTED_MODULE_11__.useCallback)(function (api) {\n    var _kdesignerRef$current, _kdesignerRef$current2;\n    kdesignerApi.current = _objectSpread({\n      attrActions: (_kdesignerRef$current = kdesignerRef.current) === null || _kdesignerRef$current === void 0 ? void 0 : _kdesignerRef$current.attrActions,\n      resetPatches: (_kdesignerRef$current2 = kdesignerRef.current) === null || _kdesignerRef$current2 === void 0 || (_kdesignerRef$current2 = _kdesignerRef$current2.dataContext) === null || _kdesignerRef$current2 === void 0 ? void 0 : _kdesignerRef$current2.resetPatches\n    }, api);\n    onRuleDesignerApi(_objectSpread({\n      setFunctionParam: function setFunctionParam(fcStr) {\n        designer_base_Main__WEBPACK_IMPORTED_MODULE_12__.eventBus.emit('setFunctionParam', fcStr);\n      },\n      validateFormula: function validateFormula() {\n        var res = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        designer_base_Main__WEBPACK_IMPORTED_MODULE_12__.eventBus.emit('validateFormula', res);\n      },\n      setCustomRuleAction: function setCustomRuleAction() {\n        var res = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        designer_base_Main__WEBPACK_IMPORTED_MODULE_12__.eventBus.emit('setCustomRuleAction', res);\n      }\n    }, kdesignerApi.current));\n  }, [onRuleDesignerApi]);\n  var onDataProxy = (0,react__WEBPACK_IMPORTED_MODULE_11__.useCallback)(function (data, event) {\n    console.log('onDataProxy', data, designerData);\n    var prevRefValue = ruleContainerNodesRef.current;\n    dataRef.current = (0,_data_index__WEBPACK_IMPORTED_MODULE_20__.getNewDataFromDesignerData)(data, event, dataRef.current, kdesignerApi.current.data, ruleContainerNodesRef, metaType);\n    // if(ruleContainerNodesRef.current !== prevRefValue) {\n    //   setDataTuple(([ruleContainerNodes, designerData]) => {\n    //     return [ruleContainerNodesRef.current, designerData]\n    //   })\n    // }\n    onData && onData(dataRef.current, event);\n  }, [onData]);\n\n  // 不用hash，每次都进,内部判断\n  (0,react__WEBPACK_IMPORTED_MODULE_11__.useEffect)(function () {\n    console.log('kdesignerRef.current', kdesignerRef.current);\n    // if (kdesignerRef.current?.dataContext) {\n    //   kdesignerRef.current.dataContext.resetData(data, false)\n    // }\n  }, [data]);\n  (0,react__WEBPACK_IMPORTED_MODULE_11__.useEffect)(function () {\n    onRuleDesignerApi(_objectSpread({\n      setFunctionParam: function setFunctionParam(fcStr) {\n        designer_base_Main__WEBPACK_IMPORTED_MODULE_12__.eventBus.emit('setFunctionParam', fcStr);\n      },\n      validateFormula: function validateFormula() {\n        var res = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        designer_base_Main__WEBPACK_IMPORTED_MODULE_12__.eventBus.emit('validateFormula', res);\n      },\n      setCustomRuleAction: function setCustomRuleAction() {\n        var res = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        designer_base_Main__WEBPACK_IMPORTED_MODULE_12__.eventBus.emit('setCustomRuleAction', res);\n      }\n    }, kdesignerApi.current));\n  }, []);\n  (0,react__WEBPACK_IMPORTED_MODULE_11__.useEffect)(function () {\n    if (activeRuleId) {\n      // 切换左视图规则列表的规则，将data-provider里的redo，undo堆栈置空\n      var dataContext = kdesignerApi.current.data;\n      var allData = dataContext.getData();\n      dataContext.resetPatches();\n      dataContext.resetData(allData, false);\n    }\n  }, [activeRuleId]);\n  var designerValue = (0,react__WEBPACK_IMPORTED_MODULE_11__.useRef)({\n    getRulesNodes: function getRulesNodes() {\n      return ruleContainerNodesRef.current;\n    },\n    getKdesignerApi: function getKdesignerApi() {\n      return kdesignerApi.current;\n    },\n    getDataRef: function getDataRef() {\n      return dataRef.current;\n    },\n    invokeAction: function invokeAction(actionName, params) {\n      _invokeAction(actionName, params);\n    },\n    prefixCls: 'rule-designer',\n    getPrefixCls: function getPrefixCls(configPrefixCls, suffixCls, customizePrefixCls) {\n      var _context;\n      // 获取样式前缀方法\n      if (customizePrefixCls) return customizePrefixCls;\n      configPrefixCls = configPrefixCls || 'rule-designer';\n      return suffixCls ? _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_10___default()(_context = \"\".concat(configPrefixCls, \"-\")).call(_context, suffixCls) : configPrefixCls;\n    }\n  });\n  var designerContextValue = (0,react__WEBPACK_IMPORTED_MODULE_11__.useMemo)(function () {\n    return _objectSpread(_objectSpread({\n      ruleMetaInfo: ruleMetaInfo,\n      activeRuleNodeId: activeRuleNodeId,\n      setActiveRuleNodeId: setActiveRuleNodeId,\n      activeRuleId: activeRuleId,\n      setActiveRuleId: setActiveRuleId,\n      metaType: metaType\n    }, designerValue.current), {}, {\n      isLockRule: function isLockRule(curRuleId) {\n        var _curRuleId, _ruleMetaInfo$2;\n        curRuleId = (_curRuleId = curRuleId) !== null && _curRuleId !== void 0 ? _curRuleId : activeRuleId;\n        return (0,_utils__WEBPACK_IMPORTED_MODULE_23__.isLockRule)(curRuleId, (_ruleMetaInfo$2 = ruleMetaInfo[0]) === null || _ruleMetaInfo$2 === void 0 ? void 0 : _ruleMetaInfo$2.lockRules);\n      },\n      isDragRule: function isDragRule(curRuleId, lastRuleId, nextRuleId) {\n        var _ruleMetaInfo$3;\n        return (0,_utils__WEBPACK_IMPORTED_MODULE_23__.isDragRule)(curRuleId, lastRuleId, nextRuleId, (_ruleMetaInfo$3 = ruleMetaInfo[0]) === null || _ruleMetaInfo$3 === void 0 ? void 0 : _ruleMetaInfo$3.lockRules);\n      },\n      getRulesLocked: function getRulesLocked(id) {\n        return (0,_utils__WEBPACK_IMPORTED_MODULE_23__.getRulesLocked)(id, meta, data, selectMetaType);\n      },\n      getEncodeValue: getEncodeValue\n    });\n  }, [activeRuleNodeId, ruleMetaInfo, metaType, activeRuleId]);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default().createElement((react__WEBPACK_IMPORTED_MODULE_11___default().Fragment), null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_13__.ConfigProvider, {\n    value: kuiConfig\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default().createElement(_context__WEBPACK_IMPORTED_MODULE_18__.DesignerContext.Provider, {\n    value: designerContextValue\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default().createElement(MemoDesigner, {\n    ref: kdesignerRef,\n    globalConfig: globalConfig,\n    onData: onDataProxy,\n    meta: ruleDesignerMeta,\n    data: designerData,\n    onApi: onApiProxy\n  }))));\n}));\n\n// 函数返回true, 不渲染; 函数返回false, 重新渲染\nvar MemoDesigner = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_11___default().memo((designer_base_Main__WEBPACK_IMPORTED_MODULE_12___default()));\nRuleDesigner.displayName = 'RuleDesigner';\n/* harmony default export */ __webpack_exports__[\"default\"] = (RuleDesigner);\n\n//# sourceURL=webpack://rule-designer/./src/index.tsx?");

/***/ }),

/***/ 52904:
/*!***************************!*\
  !*** ./src/meta/index.ts ***!
  \***************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ActionNode: function() { return /* binding */ ActionNode; },\n/* harmony export */   AddNode: function() { return /* binding */ AddNode; },\n/* harmony export */   ConditionNode: function() { return /* binding */ ConditionNode; },\n/* harmony export */   EndNode: function() { return /* binding */ EndNode; },\n/* harmony export */   FALSE_ACTION_NODE_TYPE: function() { return /* binding */ FALSE_ACTION_NODE_TYPE; },\n/* harmony export */   FalseNode: function() { return /* binding */ FalseNode; },\n/* harmony export */   JudgeNode: function() { return /* binding */ JudgeNode; },\n/* harmony export */   Node: function() { return /* binding */ Node; },\n/* harmony export */   RetNode: function() { return /* binding */ RetNode; },\n/* harmony export */   RuleNode: function() { return /* binding */ RuleNode; },\n/* harmony export */   RuleRoot: function() { return /* binding */ RuleRoot; },\n/* harmony export */   TRUE_ACTION_NODE_TYPE: function() { return /* binding */ TRUE_ACTION_NODE_TYPE; },\n/* harmony export */   TrueNode: function() { return /* binding */ TrueNode; },\n/* harmony export */   createRuleMeta: function() { return /* binding */ createRuleMeta; },\n/* harmony export */   filterServiceType: function() { return /* binding */ filterServiceType; }\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_reflect_construct__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/reflect/construct */ 11984);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_reflect_construct__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_reflect_construct__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_corejs3_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/objectWithoutProperties */ 28220);\n/* harmony import */ var _babel_runtime_corejs3_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/possibleConstructorReturn */ 54895);\n/* harmony import */ var _babel_runtime_corejs3_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/getPrototypeOf */ 77284);\n/* harmony import */ var _babel_runtime_corejs3_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/assertThisInitialized */ 89280);\n/* harmony import */ var _babel_runtime_corejs3_helpers_inherits__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/inherits */ 50024);\n/* harmony import */ var _babel_runtime_corejs3_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/classCallCheck */ 3460);\n/* harmony import */ var _babel_runtime_corejs3_helpers_createClass__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/createClass */ 27688);\n/* harmony import */ var _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/defineProperty */ 30112);\n/* harmony import */ var _babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/toConsumableArray */ 30260);\n/* harmony import */ var _babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/slicedToArray */ 95992);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ 75984);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_map__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/map */ 88836);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_map__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_map__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/filter */ 18860);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/find */ 47332);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_set__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/set */ 59312);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_set__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_set__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/for-each */ 7312);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_16__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/keys */ 47976);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_17__);\n/* harmony import */ var immer__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! immer */ 83789);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! designer_base/Main */ 18040);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(designer_base_Main__WEBPACK_IMPORTED_MODULE_18__);\n/* harmony import */ var _utils_nodeType__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../utils/nodeType */ 1300);\n/* harmony import */ var _utils_treeUtils__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../utils/treeUtils */ 31340);\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../utils */ 63612);\n\n\n\n\n\n\n\n\n\n\n\nvar _excluded = [\"type\", \"id\", \"nodeType\", \"ret\", \"description\", \"actionType\", \"parentId\"];\nfunction _callSuper(t, o, e) { return o = (0,_babel_runtime_corejs3_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(o), (0,_babel_runtime_corejs3_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(t, _isNativeReflectConstruct() ? _babel_runtime_corejs3_core_js_stable_reflect_construct__WEBPACK_IMPORTED_MODULE_0___default()(o, e || [], (0,_babel_runtime_corejs3_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(t).constructor) : o.apply(t, e)); }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(_babel_runtime_corejs3_core_js_stable_reflect_construct__WEBPACK_IMPORTED_MODULE_0___default()(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\n\n\n\n\n\n\n\n/*\n * @Author: fjr\n * @Email: jinrui_fang@kingdee.com\n * @Date: 2022-02-23 09:47:51\n * @Last Modified by: fjr\n * @LastEditTime: 2022-09-22 20:07:45\n * @Description: ... 规则设计器所需要的数据结构  add by 王志勇 date:2022-03-08\n */\n\n\n\n\n\nvar createServiceControl = function createServiceControl() {\n  return {\n    // Id: string,\n    // Name: string,\n    // Icon: string,\n    // Properties: IControlPropertyGroup[],\n    // Accept: AcceptCtrl,\n    // NotAccept: NotAcceptCtrl,\n    // AcceptParent: AcceptParentCtrl,\n    //   ElementGroupId: string,\n    //   IsContainer?: boolean,\n  };\n};\nvar getRuleMeta = function getRuleMeta(locked) {\n  // Accept: [] 置为空，因为需求上是只有尾节点添加\n  // 整条链路由左视图action添加\n  var RULE_META = {\n    Categories: [{\n      Id: 'ActionNode',\n      Name: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.getLangMsg)('ruled.meta.key0001'),\n      // Display: string,\n      // Seq: string,\n      // BaseType?: string,\n      // 多根特性\n      Controls: [{\n        Id: 'RuleRoot',\n        // 特殊的RuleContainer  伪根\n        Name: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.getLangMsg)('ruled.meta.key0002'),\n        // 也是容器\n        Icon: 'Icon',\n        Properties: [],\n        // Accept: ['RuleNode'],\n        Accept: [],\n        IsContainer: true,\n        Visible: false\n      }, {\n        Id: 'RuleNode',\n        Name: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.getLangMsg)('ruled.meta.key0002'),\n        Icon: 'Icon',\n        Properties: [{\n          Id: 'Property',\n          Name: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.getLangMsg)('ruled.meta.key0003'),\n          DefaultCollapse: false,\n          Nodes: [{\n            Id: 'Description',\n            Name: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.getLangMsg)('ruled.meta.key0004'),\n            Editor: {\n              Type: 'Input',\n              DataType: 'String',\n              Required: true\n            },\n            Visible: true\n          }, {\n            Id: 'Enabled',\n            Name: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.getLangMsg)('ruled.meta.key0005'),\n            Editor: {\n              Type: 'Switch',\n              DataType: 'Boolean',\n              Required: true\n            },\n            Visible: true\n          }]\n        }],\n        // Accept: ['ConditionNode'],\n        Accept: [],\n        IsContainer: true\n      }, {\n        Id: 'ConditionNode',\n        Name: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.getLangMsg)('ruled.meta.key0006'),\n        Icon: 'Icon',\n        Properties: [{\n          Id: 'Property',\n          Name: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.getLangMsg)('ruled.meta.key0006'),\n          DefaultCollapse: false,\n          Nodes: [{\n            Id: 'PreDescription',\n            Name: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.getLangMsg)('ruled.meta.key0007'),\n            Editor: {\n              Type: 'Input',\n              DataType: 'String',\n              Required: true\n            },\n            Visible: true,\n            Locked: locked\n          }, {\n            Id: 'PreCondition',\n            Name: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.getLangMsg)('ruled.meta.key0008'),\n            Editor: {\n              Type: 'CustomInput',\n              DataType: 'String',\n              Required: true\n            },\n            Visible: true,\n            Locked: locked\n          }]\n        }],\n        // Accept: ['JudgeNode'],\n        Accept: [],\n        IsContainer: true\n      }, {\n        Id: 'JudgeNode',\n        Name: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.getLangMsg)('ruled.meta.key0009'),\n        Icon: 'Icon',\n        Properties: [],\n        // Accept: ['TrueNode', 'FalseNode'],\n        Accept: [],\n        IsContainer: true\n      }, {\n        Id: 'TrueNode',\n        Name: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.getLangMsg)('ruled.meta.key0010'),\n        Icon: 'Icon',\n        Properties: [],\n        Accept: ['ActionNode'],\n        IsContainer: true\n      }, {\n        Id: 'FalseNode',\n        Name: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.getLangMsg)('ruled.meta.key0011'),\n        Icon: 'Icon',\n        Properties: [],\n        Accept: ['ActionNode'],\n        IsContainer: true\n      }, {\n        Id: 'EndNode',\n        Name: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.getLangMsg)('ruled.meta.key0011'),\n        Icon: 'Icon',\n        Properties: [],\n        Accept: ['ActionNode'],\n        IsContainer: true\n      }\n      // {\n      //   Id: 'ActionNode',\n      //   Name: '服务节点',\n      //   Icon: 'Icon',\n      //   Properties: [\n      //     {\n      //       Id: 'Property',\n      //       Name: '属性',\n      //       DefaultCollapse: false,\n      //       Nodes: [\n      //         {\n      //           Id: 'NodeType',\n      //           Name: '服务类型',\n      //           Editor: 'Input',\n      //           Visible: false\n      //         }\n      //       ]\n      //     }\n      //   ],\n      //   Accept: ['ActionNode'],\n      //   IsContainer: true\n      // }\n      ]\n    }]\n  };\n  return RULE_META;\n};\n/**\n * 249 值更新\n * 250 加载\n * 255 创建 加载 值更新\n * 253 创建 值更新\n */\nvar CREATED = 'created';\nvar LOADED = 'loaded';\nvar UPDATED = 'updated';\nvar getSelectEnum = function getSelectEnum(service) {\n  var _context;\n  var MAP = {\n    FieldChanged: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.getLangMsg)('ruled.meta.key0012'),\n    ItemAdded: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.getLangMsg)('ruled.meta.key0013'),\n    Initialized: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.getLangMsg)('ruled.meta.key0014')\n  };\n  return _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_11___default()(_context = service.checked).call(_context, function (checkItem) {\n    return {\n      Name: MAP[checkItem] || checkItem,\n      Value: checkItem,\n      Locked: !service[\"support\".concat(checkItem)]\n    };\n  }); //.filter(Boolean)\n};\nvar getServiceSettingName = function getServiceSettingName(id) {\n  var nameMap = new (_babel_runtime_corejs3_core_js_stable_map__WEBPACK_IMPORTED_MODULE_12___default())([['FormulaAction', (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.getLangMsg)('ruled.meta.key0015')], ['TakeBaseProAction', (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.getLangMsg)('ruled.meta.key0016')], ['SetEqutionAction', (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.getLangMsg)('ruled.meta.key0017')], ['ClearValueAction', (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.getLangMsg)('ruled.meta.key0018')], ['FillQtyAction', (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.getLangMsg)('ruled.meta.key0019')], ['LockFieldAction', (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.getLangMsg)('ruled.meta.key0020')],\n  // 锁定字段\n  ['UnlockFieldAction', (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.getLangMsg)('ruled.meta.key0020')],\n  // 解锁字段\n  ['ShowFieldAction', (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.getLangMsg)('ruled.meta.key0020')],\n  // 显示字段\n  ['HideFieldAction', (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.getLangMsg)('ruled.meta.key0020')],\n  // 隐藏字段\n  ['LockControlAction', (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.getLangMsg)('ruled.meta.key0021')],\n  // 锁定控件\n  ['UnlockControlAction', (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.getLangMsg)('ruled.meta.key0021')],\n  // 解锁控件\n  ['ShowControlAction', (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.getLangMsg)('ruled.meta.key0021')],\n  // 显示控件\n  ['HideControlAction', (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.getLangMsg)('ruled.meta.key0021')],\n  // 隐藏控件\n  ['ClientLockFieldAction', (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.getLangMsg)('ruled.meta.key0020')],\n  // 锁定字段\n  ['ClientUnlockFieldAction', (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.getLangMsg)('ruled.meta.key0020')],\n  // 解锁字段(卡片)\n  ['ClientShowFieldAction', (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.getLangMsg)('ruled.meta.key0020')],\n  // 显示字段(卡片)\n  ['ClientHideFieldAction', (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.getLangMsg)('ruled.meta.key0020')],\n  // 隐藏字段(卡片)\n  ['ClientLockControlAction', (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.getLangMsg)('ruled.meta.key0021')],\n  // 锁定控件(卡片)\n  ['ClientUnlockControlAction', (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.getLangMsg)('ruled.meta.key0021')],\n  // 解锁控件(卡片)\n  ['ClientShowControlAction', (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.getLangMsg)('ruled.meta.key0021')],\n  // 显示控件(卡片)\n  ['ClientHideControlAction', (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.getLangMsg)('ruled.meta.key0021')],\n  // 隐藏控件(卡片)\n  ['ClientSetFieldfmtAction', (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.getLangMsg)('ruled.meta.key0022')],\n  // 设置字段显示样式\n  ['ClientSetFieldAction', (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.getLangMsg)('ruled.meta.key0023')],\n  // 设置字段属性\n  ['ClientSetControlAction', (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.getLangMsg)('ruled.meta.key0024')] // 设置控件属性\n  ]);\n  return nameMap.get(id) || (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.getLangMsg)('ruled.meta.key0025');\n};\nvar getServicePropertyNodes = function getServicePropertyNodes(service, locked) {\n  var id = service.id;\n  var PropertyNodes = [{\n    Id: 'RET',\n    Name: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.getLangMsg)('ruled.meta.key0026'),\n    Editor: {\n      Type: 'MultiSelect',\n      Enum: getSelectEnum(service),\n      Required: true\n    },\n    Visible: true,\n    Locked: locked\n  }, {\n    Id: 'Description',\n    Name: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.getLangMsg)('ruled.meta.key0027'),\n    Editor: {\n      Type: 'Input',\n      DataType: 'String'\n    },\n    Visible: true,\n    Locked: locked\n  }, id === 'SetEqutionAction' ? {\n    Id: 'OnlyEmptyRow',\n    Name: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.getLangMsg)('ruled.meta.key0028'),\n    Editor: {\n      Type: 'Switch'\n    },\n    Visible: true,\n    Locked: locked\n  } : null, {\n    Id: 'Value',\n    Name: getServiceSettingName(id),\n    Editor: {\n      Type: 'CustomInput',\n      Required: true\n    },\n    Locked: locked\n  }];\n  return _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_13___default()(PropertyNodes).call(PropertyNodes, Boolean);\n};\nvar filterServiceType = function filterServiceType(serviceType, rulesTree, activeRuleNodeId) {\n  var _treeNodes$find;\n  var treeNodes = (0,_utils_treeUtils__WEBPACK_IMPORTED_MODULE_20__.getTreeDataFlatten)((0,_utils_treeUtils__WEBPACK_IMPORTED_MODULE_20__.toArrayTree)(rulesTree));\n  var filterServiceTypeValue = (_treeNodes$find = _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_14___default()(treeNodes).call(treeNodes, function (node) {\n    return node.data === activeRuleNodeId;\n  })) === null || _treeNodes$find === void 0 ? void 0 : _treeNodes$find.serviceType;\n  return _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_13___default()(serviceType).call(serviceType, function (service) {\n    var serviceTypes = service.serviceTypes;\n    if (filterServiceTypeValue === undefined) {\n      return true;\n    }\n    return serviceTypes === filterServiceTypeValue;\n  });\n};\nvar createRuleMeta = function createRuleMeta(metaType, specificRuleItems, activeRuleNodeId, ruleContainerNodes, activeRuleId) {\n  var actionTypeSet = new (_babel_runtime_corejs3_core_js_stable_set__WEBPACK_IMPORTED_MODULE_15___default())();\n  console.log('specificRuleItems---', specificRuleItems);\n  var _specificRuleItems$ = specificRuleItems[0],\n    originServiceType = _specificRuleItems$.serviceType,\n    rulesTree = _specificRuleItems$.rulesTree,\n    lockRules = _specificRuleItems$.lockRules;\n  var serviceType = filterServiceType(originServiceType, rulesTree, activeRuleNodeId);\n  var locked = (0,_utils__WEBPACK_IMPORTED_MODULE_21__.isLockRule)(activeRuleId, lockRules);\n  var serviceNodesMeta = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_11___default()(serviceType).call(serviceType, function (service) {\n    var id = service.metaClass,\n      title = service.title,\n      tips = service.tips,\n      checked = service.checked;\n    actionTypeSet.add(id);\n    return {\n      Id: id,\n      Name: title,\n      Icon: 'Icon',\n      Tips: tips,\n      Properties: [{\n        Id: 'Property',\n        Name: title,\n        DefaultCollapse: false,\n        Nodes: getServicePropertyNodes(service, locked)\n      }],\n      Accept: [],\n      IsContainer: true,\n      CheckedRet: checked\n    };\n  });\n  var defaultRuleMeta = getRuleMeta(locked);\n  var ruleMeta = (0,immer__WEBPACK_IMPORTED_MODULE_22__[\"default\"])(defaultRuleMeta, function (draft) {\n    var _draft$Categories = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_10__[\"default\"])(draft.Categories, 1),\n      controls = _draft$Categories[0].Controls;\n    for (var i = controls.length - 1; i > controls.length - 4; i--) {\n      controls[i].Accept = (0,_babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(actionTypeSet);\n    }\n    controls.push.apply(controls, (0,_babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_11___default()(serviceNodesMeta).call(serviceNodesMeta, function (nodeMeta) {\n      nodeMeta.Accept = (0,_babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(actionTypeSet);\n      return nodeMeta;\n    })));\n  });\n  // root\n  return ruleMeta;\n};\n\n// 节点\n// const ruleData = {\n//   type: 'RuleRoot',\n//   id: 'node',\n// }\n\n// const ruleContainer = {\n//   type: 'RuleContainer',\n//   id: 'rule',\n// }\n// TODO: extends NodePropsTs\n// type\nvar Node = /*#__PURE__*/function () {\n  function Node(_ref) {\n    var type = _ref.type,\n      id = _ref.id,\n      parentId = _ref.parentId;\n    (0,_babel_runtime_corejs3_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(this, Node);\n    (0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(this, immer__WEBPACK_IMPORTED_MODULE_22__.immerable, true);\n    (0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(this, \"Type\", 'RuleNode');\n    (0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(this, \"Id\", 'node');\n    (0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(this, \"ParentId\", '');\n    this.Type = type;\n    this.Id = id;\n    this.ParentId = parentId;\n  }\n  (0,_babel_runtime_corejs3_helpers_createClass__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(Node, [{\n    key: \"getValue\",\n    value: function getValue() {\n      throw new Error('sub class must realize self getValue');\n    }\n  }]);\n  return Node;\n}();\n/**\n * 规则根节点\n */\nvar RuleRoot = /*#__PURE__*/function (_Node2) {\n  (0,_babel_runtime_corejs3_helpers_inherits__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(RuleRoot, _Node2);\n  function RuleRoot(_ref2) {\n    var _this;\n    var _ref2$type = _ref2.type,\n      type = _ref2$type === void 0 ? 'RuleRoot' : _ref2$type,\n      id = _ref2.id,\n      node = _ref2.node,\n      parentId = _ref2.parentId;\n    (0,_babel_runtime_corejs3_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(this, RuleRoot);\n    _this = _callSuper(this, RuleRoot, [{\n      type: type,\n      id: id,\n      parentId: parentId\n    }]);\n    (0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__[\"default\"])((0,_babel_runtime_corejs3_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(_this), \"MappedFromNode\", {});\n    _this.MappedFromNode = node;\n    return _this;\n  }\n  return (0,_babel_runtime_corejs3_helpers_createClass__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(RuleRoot);\n}(Node); // class RuleRoot extends RuleContainer { }\n/**\n * 规则说明节点，画布中前面那个圆点\n */\nvar RuleNode = /*#__PURE__*/function (_Node3) {\n  (0,_babel_runtime_corejs3_helpers_inherits__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(RuleNode, _Node3);\n  //规则对应的字段/容器id\n  function RuleNode(_ref3) {\n    var _this2;\n    var _ref3$type = _ref3.type,\n      type = _ref3$type === void 0 ? 'RuleNode' : _ref3$type,\n      id = _ref3.id,\n      description = _ref3.description,\n      enabled = _ref3.enabled,\n      parentId = _ref3.parentId,\n      relationContainerNodeId = _ref3.relationContainerNodeId;\n    (0,_babel_runtime_corejs3_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(this, RuleNode);\n    _this2 = _callSuper(this, RuleNode, [{\n      type: type,\n      id: id,\n      parentId: parentId,\n      relationContainerNodeId: relationContainerNodeId\n    }]);\n    (0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__[\"default\"])((0,_babel_runtime_corejs3_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(_this2), \"Description\", '');\n    // 卡片没有启用\n    (0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__[\"default\"])((0,_babel_runtime_corejs3_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(_this2), \"Enabled\", true);\n    //是否启用\n    (0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__[\"default\"])((0,_babel_runtime_corejs3_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(_this2), \"RelationContainerNodeId\", '');\n    _this2.Description = description;\n    _this2.Enabled = enabled;\n    _this2.RelationContainerNodeId = relationContainerNodeId;\n    return _this2;\n  }\n  (0,_babel_runtime_corejs3_helpers_createClass__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(RuleNode, [{\n    key: \"getValue\",\n    value: function getValue() {\n      return RuleNode.getValue.call(this);\n    }\n  }], [{\n    key: \"getValue\",\n    value: function getValue() {\n      return {\n        Id: this.Id,\n        Description: this.Description,\n        Enabled: this.Enabled\n      };\n    }\n  }]);\n  return RuleNode;\n}(Node);\n/**\n * 前置条件节点\n */\nvar ConditionNode = /*#__PURE__*/function (_Node4) {\n  (0,_babel_runtime_corejs3_helpers_inherits__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(ConditionNode, _Node4);\n  //前置条件\n  function ConditionNode(_ref4) {\n    var _this3;\n    var _ref4$type = _ref4.type,\n      type = _ref4$type === void 0 ? 'ConditionNode' : _ref4$type,\n      id = _ref4.id,\n      preDescription = _ref4.preDescription,\n      preCondition = _ref4.preCondition,\n      parentId = _ref4.parentId;\n    (0,_babel_runtime_corejs3_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(this, ConditionNode);\n    _this3 = _callSuper(this, ConditionNode, [{\n      type: type,\n      id: id,\n      parentId: parentId\n    }]);\n    (0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__[\"default\"])((0,_babel_runtime_corejs3_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(_this3), \"PreDescription\", '');\n    //前置条件描述\n    (0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__[\"default\"])((0,_babel_runtime_corejs3_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(_this3), \"PreCondition\", '');\n    _this3.PreDescription = preDescription;\n    _this3.PreCondition = preCondition;\n    return _this3;\n  }\n  (0,_babel_runtime_corejs3_helpers_createClass__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(ConditionNode, [{\n    key: \"getValue\",\n    value: function getValue() {\n      return ConditionNode.getValue.call(this);\n    }\n  }], [{\n    key: \"getValue\",\n    value: function getValue() {\n      return {\n        PreCondition: this.PreCondition || '',\n        PreDescription: this.PreDescription || ''\n      };\n    }\n  }]);\n  return ConditionNode;\n}(Node);\n/**\n * 前置条件判断节点\n */\nvar JudgeNode = /*#__PURE__*/function (_Node5) {\n  (0,_babel_runtime_corejs3_helpers_inherits__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(JudgeNode, _Node5);\n  function JudgeNode(_ref5) {\n    var _ref5$type = _ref5.type,\n      type = _ref5$type === void 0 ? _utils_nodeType__WEBPACK_IMPORTED_MODULE_19__.JUDGE_NODE_TYPE : _ref5$type,\n      id = _ref5.id,\n      parentId = _ref5.parentId;\n    (0,_babel_runtime_corejs3_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(this, JudgeNode);\n    return _callSuper(this, JudgeNode, [{\n      type: type,\n      id: id,\n      parentId: parentId\n    }]);\n  }\n  return (0,_babel_runtime_corejs3_helpers_createClass__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(JudgeNode);\n}(Node);\nvar RetNode = /*#__PURE__*/function (_Node6) {\n  (0,_babel_runtime_corejs3_helpers_inherits__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(RetNode, _Node6);\n  function RetNode(_ref6) {\n    var _this4;\n    var _ref6$type = _ref6.type,\n      type = _ref6$type === void 0 ? _utils_nodeType__WEBPACK_IMPORTED_MODULE_19__.RET_NODE_TYPE : _ref6$type,\n      id = _ref6.id,\n      parentId = _ref6.parentId,\n      _ref6$ret = _ref6.ret,\n      ret = _ref6$ret === void 0 ? '' : _ref6$ret;\n    (0,_babel_runtime_corejs3_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(this, RetNode);\n    _this4 = _callSuper(this, RetNode, [{\n      type: type,\n      id: id,\n      parentId: parentId\n    }]);\n    _this4.RET = ret;\n    return _this4;\n  }\n  return (0,_babel_runtime_corejs3_helpers_createClass__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(RetNode);\n}(Node);\n/**\n * 条件成功\n */\nvar TrueNode = /*#__PURE__*/function (_Node7) {\n  (0,_babel_runtime_corejs3_helpers_inherits__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(TrueNode, _Node7);\n  function TrueNode(_ref7) {\n    var _ref7$type = _ref7.type,\n      type = _ref7$type === void 0 ? _utils_nodeType__WEBPACK_IMPORTED_MODULE_19__.TRUE_NODE_TYPE : _ref7$type,\n      id = _ref7.id,\n      parentId = _ref7.parentId;\n    (0,_babel_runtime_corejs3_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(this, TrueNode);\n    return _callSuper(this, TrueNode, [{\n      type: type,\n      id: id,\n      parentId: parentId\n    }]);\n  }\n  return (0,_babel_runtime_corejs3_helpers_createClass__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(TrueNode);\n}(Node);\n/**\n * 条件为false\n */\nvar FalseNode = /*#__PURE__*/function (_Node8) {\n  (0,_babel_runtime_corejs3_helpers_inherits__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(FalseNode, _Node8);\n  function FalseNode(_ref8) {\n    var _ref8$type = _ref8.type,\n      type = _ref8$type === void 0 ? _utils_nodeType__WEBPACK_IMPORTED_MODULE_19__.FALSE_NODE_TYPE : _ref8$type,\n      id = _ref8.id,\n      parentId = _ref8.parentId;\n    (0,_babel_runtime_corejs3_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(this, FalseNode);\n    return _callSuper(this, FalseNode, [{\n      type: type,\n      id: id,\n      parentId: parentId\n    }]);\n  }\n  return (0,_babel_runtime_corejs3_helpers_createClass__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(FalseNode);\n}(Node);\n/**\n * 添加节点\n * 1、没有添加节点时，会在条件成功或者条件失败的时候显示添加节点\n * 2、选中节点时，会在当前节点的前后显示添加节点\n */\nvar AddNode = /*#__PURE__*/function (_Node9) {\n  (0,_babel_runtime_corejs3_helpers_inherits__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(AddNode, _Node9);\n  function AddNode(_ref9) {\n    var _ref9$type = _ref9.type,\n      type = _ref9$type === void 0 ? _utils_nodeType__WEBPACK_IMPORTED_MODULE_19__.ADD_NODE_TYPE : _ref9$type,\n      id = _ref9.id,\n      parentId = _ref9.parentId;\n    (0,_babel_runtime_corejs3_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(this, AddNode);\n    return _callSuper(this, AddNode, [{\n      type: type,\n      id: id,\n      parentId: parentId\n    }]);\n  }\n  return (0,_babel_runtime_corejs3_helpers_createClass__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(AddNode);\n}(Node);\n/**\n * 结束点，一个规则有两个\n */\nvar EndNode = /*#__PURE__*/function (_Node10) {\n  (0,_babel_runtime_corejs3_helpers_inherits__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(EndNode, _Node10);\n  function EndNode(_ref10) {\n    var _ref10$type = _ref10.type,\n      type = _ref10$type === void 0 ? _utils_nodeType__WEBPACK_IMPORTED_MODULE_19__.END_NODE_TYPE : _ref10$type,\n      id = _ref10.id,\n      parentId = _ref10.parentId;\n    (0,_babel_runtime_corejs3_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(this, EndNode);\n    return _callSuper(this, EndNode, [{\n      type: type,\n      id: id,\n      parentId: parentId\n    }]);\n  }\n  return (0,_babel_runtime_corejs3_helpers_createClass__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(EndNode);\n}(Node);\n// 服务节点类型\nvar TRUE_ACTION_NODE_TYPE = 'true';\nvar FALSE_ACTION_NODE_TYPE = 'false';\nvar ActionNode = /*#__PURE__*/function (_Node11) {\n  (0,_babel_runtime_corejs3_helpers_inherits__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(ActionNode, _Node11);\n  // Fields = '';\n  function ActionNode(_ref11) {\n    var _context2;\n    var _this5;\n    var _ref11$type = _ref11.type,\n      type = _ref11$type === void 0 ? 'ActionNode' : _ref11$type,\n      id = _ref11.id,\n      nodeType = _ref11.nodeType,\n      ret = _ref11.ret,\n      description = _ref11.description,\n      actionType = _ref11.actionType,\n      parentId = _ref11.parentId,\n      props = (0,_babel_runtime_corejs3_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(_ref11, _excluded);\n    (0,_babel_runtime_corejs3_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(this, ActionNode);\n    _this5 = _callSuper(this, ActionNode, [{\n      type: type,\n      id: id,\n      parentId: parentId\n    }]);\n    (0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__[\"default\"])((0,_babel_runtime_corejs3_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(_this5), \"NodeType\", 'true');\n    (0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__[\"default\"])((0,_babel_runtime_corejs3_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(_this5), \"ActionType\", '');\n    (0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__[\"default\"])((0,_babel_runtime_corejs3_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(_this5), \"Description\", '');\n    // 这个是因为type会是具体的服务类型\n    // 所以要加多一个来区分\n    (0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__[\"default\"])((0,_babel_runtime_corejs3_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(_this5), \"__Type__\", 'ActionNode');\n    (0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__[\"default\"])((0,_babel_runtime_corejs3_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(_this5), \"RET\", '');\n    (0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__[\"default\"])((0,_babel_runtime_corejs3_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(_this5), \"_Type_\", '');\n    _this5.NodeType = nodeType;\n    _this5.ActionType = actionType;\n    _this5.Description = description;\n    _this5.RET = ret;\n    _this5._Type_ = _this5.Type;\n    _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_16___default()(_context2 = _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_17___default()(props)).call(_context2, function (key) {\n      _this5[key] = props[key];\n    });\n    // this.Fields = fields\n    return _this5;\n  }\n\n  // getValue() {\n  //   let obj = this\n  //   return Object.keys(obj).reduce(() => {\n\n  //   }, )\n  // }\n  return (0,_babel_runtime_corejs3_helpers_createClass__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(ActionNode);\n}(Node);\n\n\n//# sourceURL=webpack://rule-designer/./src/meta/index.ts?");

/***/ }),

/***/ 35260:
/*!********************************!*\
  !*** ./src/preHandle/index.ts ***!
  \********************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/toConsumableArray */ 30260);\n/* harmony import */ var _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/defineProperty */ 30112);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! designer_base/Main */ 18040);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(designer_base_Main__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _preAddHandle__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./preAddHandle */ 95968);\n/* harmony import */ var _preDeleteHandle__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./preDeleteHandle */ 3040);\n\n\n\n\n\nvar preHandleFnMap = (0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__[\"default\"])((0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({}, designer_base_Main__WEBPACK_IMPORTED_MODULE_2__.ActionType.ADD, _preAddHandle__WEBPACK_IMPORTED_MODULE_3__[\"default\"]), designer_base_Main__WEBPACK_IMPORTED_MODULE_2__.ActionType.DELETE, _preDeleteHandle__WEBPACK_IMPORTED_MODULE_4__[\"default\"]);\nvar preHandle = function preHandle(_ref, handleConfig) {\n  var action = _ref.action,\n    dataContext = _ref.dataContext,\n    selectionContext = _ref.selectionContext,\n    globalConfig = _ref.globalConfig,\n    dataFactory = _ref.dataFactory,\n    modelFactory = _ref.modelFactory,\n    metaReader = _ref.metaReader,\n    success = _ref.success,\n    fail = _ref.fail;\n  var dataRef = globalConfig.dataRef,\n    keywordMapping = globalConfig.keywordMapping;\n  var preHandleResults = [];\n  var type = action.type;\n  var preHandleFn = preHandleFnMap[type];\n  if (preHandleFn) {\n    var allActions = preHandleFn({\n      globalConfig: globalConfig,\n      dataContext: dataContext,\n      selectionContext: selectionContext,\n      action: action,\n      dataFactory: dataFactory,\n      modelFactory: modelFactory,\n      metaReader: metaReader\n    }, success(preHandleResults), fail);\n    if (allActions) {\n      preHandleResults.push.apply(preHandleResults, (0,_babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(allActions));\n    }\n  } else {\n    preHandleResults.push(action);\n  }\n  if (preHandleResults.length) {\n    success(preHandleResults);\n  }\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (preHandle);\n\n//# sourceURL=webpack://rule-designer/./src/preHandle/index.ts?");

/***/ }),

/***/ 95968:
/*!***************************************!*\
  !*** ./src/preHandle/preAddHandle.ts ***!
  \***************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/toConsumableArray */ 30260);\n/* harmony import */ var _babel_runtime_corejs3_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/objectWithoutProperties */ 28220);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/array/is-array */ 12388);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/includes */ 82600);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ 75984);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/concat */ 81744);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/json/stringify */ 39832);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! designer_base/Main */ 18040);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(designer_base_Main__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _meta__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../meta */ 52904);\n/* harmony import */ var _utils_index__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../utils/index */ 63612);\n/* harmony import */ var _utils_nodeType__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../utils/nodeType */ 1300);\n\n\nvar _excluded = [\"type\", \"value\"];\n\n\n\n\n\n/*\n * @Author: wbw\n * @Email: wbw@kingdee.com\n * @Date: 2022-03-28 16:19:57\n * @Last Modified by: fjr\n * @LastEditTime: 2022-04-06 16:41:26\n * @Description: ...\n */\n\n\n\n\nvar preAddHandle = function preAddHandle(_ref, resolve, reject) {\n  var _context;\n  var globalConfig = _ref.globalConfig,\n    dataContext = _ref.dataContext,\n    selectionContext = _ref.selectionContext,\n    action = _ref.action,\n    dataFactory = _ref.dataFactory,\n    modelFactory = _ref.modelFactory,\n    metaReader = _ref.metaReader;\n  var type = action.type,\n    value = action.value,\n    rest = (0,_babel_runtime_corejs3_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(action, _excluded);\n  var preHandleResults = [action];\n  if (_babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_2___default()(value)) return preHandleResults;\n  var controlType = value.Type,\n    parentId = value.ParentId,\n    id = value.Id,\n    name = value.Name,\n    ret = value.Ret;\n  var otherActions = [];\n  var controlMeta = metaReader.getControlMeta(controlType);\n  if (!_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_3___default()(_context = [_utils_nodeType__WEBPACK_IMPORTED_MODULE_10__.RULE_NODE_TYPE, _utils_nodeType__WEBPACK_IMPORTED_MODULE_10__.CONDITION_NODE_TYPE, _utils_nodeType__WEBPACK_IMPORTED_MODULE_10__.JUDGE_NODE_TYPE, _utils_nodeType__WEBPACK_IMPORTED_MODULE_10__.TRUE_NODE_TYPE, _utils_nodeType__WEBPACK_IMPORTED_MODULE_10__.FALSE_NODE_TYPE, _utils_nodeType__WEBPACK_IMPORTED_MODULE_10__.END_NODE_TYPE]).call(_context, controlType)) {\n    var _context2;\n    /**\n     * 添加事件节点处理：\n     * 1.新加的数据用ActionNode实例化\n     * 2.将父子关系重新变更\n     */\n    var defaultRet = controlMeta.CheckedRet;\n    var parentControl = dataContext.findControl(parentId);\n    var addIndex = dataContext.findControlIndex(parentId) + 1;\n    var parentNodeType = parentControl.NodeType;\n    // 兼容后端数据\n    var actionType = controlType === 'TakeBasePropertyAction' ? 'TakeBaseProAction' : controlType;\n    var actionNodeData = {\n      type: controlType,\n      actionType: actionType,\n      description: name,\n      parentId: parentId,\n      id: id,\n      nodeType: (0,_utils_index__WEBPACK_IMPORTED_MODULE_9__.isTFNode)(parentControl) ? (0,_utils_index__WEBPACK_IMPORTED_MODULE_9__.isTrueNode)(parentControl) ? _meta__WEBPACK_IMPORTED_MODULE_8__.TRUE_ACTION_NODE_TYPE : _meta__WEBPACK_IMPORTED_MODULE_8__.FALSE_ACTION_NODE_TYPE : parentNodeType,\n      ret: ret || (defaultRet || []).join(',')\n    };\n    var oldChilds = dataContext.getSubControls(parentId);\n    var updateChildActions = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_4___default()(oldChilds).call(oldChilds, function (control) {\n      var controlId = control.Id;\n      return (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_7__.createUpdateAction)([[controlId, {\n        ParentId: id\n      }]]);\n    });\n    designer_base_Main__WEBPACK_IMPORTED_MODULE_7__.eventBus.emit('add-control-id', id);\n    otherActions.push.apply(otherActions, _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_5___default()(_context2 = [(0,designer_base_Main__WEBPACK_IMPORTED_MODULE_7__.createAddAction)(JSON.parse(_babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_6___default()(new _meta__WEBPACK_IMPORTED_MODULE_8__.ActionNode(actionNodeData))), {\n      index: addIndex\n    })]).call(_context2, (0,_babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(updateChildActions)));\n    return otherActions;\n  }\n  return preHandleResults;\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (preAddHandle);\n\n//# sourceURL=webpack://rule-designer/./src/preHandle/preAddHandle.ts?");

/***/ }),

/***/ 3040:
/*!******************************************!*\
  !*** ./src/preHandle/preDeleteHandle.ts ***!
  \******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/toConsumableArray */ 30260);\n/* harmony import */ var _babel_runtime_corejs3_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/objectWithoutProperties */ 28220);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/includes */ 82600);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ 75984);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/concat */ 81744);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! designer_base/Main */ 18040);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(designer_base_Main__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _utils_nodeType__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/nodeType */ 1300);\n\n\nvar _excluded = [\"type\", \"value\"];\n\n\n\n\n\nvar preDeleteHandle = function preDeleteHandle(_ref, resolve, reject) {\n  var _context;\n  var globalConfig = _ref.globalConfig,\n    dataContext = _ref.dataContext,\n    selectionContext = _ref.selectionContext,\n    action = _ref.action,\n    dataFactory = _ref.dataFactory,\n    modelFactory = _ref.modelFactory,\n    metaReader = _ref.metaReader;\n  var type = action.type,\n    value = action.value,\n    rest = (0,_babel_runtime_corejs3_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(action, _excluded);\n  var _dataContext$findCont = dataContext.findControl(value[0]),\n    controlType = _dataContext$findCont.Type,\n    parentId = _dataContext$findCont.ParentId,\n    id = _dataContext$findCont.Id;\n  var otherActions = [];\n  if (!_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_2___default()(_context = [_utils_nodeType__WEBPACK_IMPORTED_MODULE_6__.RULE_NODE_TYPE, _utils_nodeType__WEBPACK_IMPORTED_MODULE_6__.CONDITION_NODE_TYPE, _utils_nodeType__WEBPACK_IMPORTED_MODULE_6__.JUDGE_NODE_TYPE, _utils_nodeType__WEBPACK_IMPORTED_MODULE_6__.TRUE_NODE_TYPE, _utils_nodeType__WEBPACK_IMPORTED_MODULE_6__.FALSE_NODE_TYPE, _utils_nodeType__WEBPACK_IMPORTED_MODULE_6__.END_NODE_TYPE]).call(_context, controlType)) {\n    /**\n     * 删除服务：处理父子关系的更改\n     */\n    var childControls = dataContext.getSubControls(id);\n    var childUpdates = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_3___default()(childControls).call(childControls, function (item) {\n      var controlId = item.Id;\n      return (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_5__.createUpdateAction)([[controlId, {\n        ParentId: parentId\n      }]]);\n    });\n    otherActions.push.apply(otherActions, (0,_babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(childUpdates));\n    return _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_4___default()(otherActions).call(otherActions, [action]);\n  }\n  var preHandleResults = [action];\n  return _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_4___default()(preHandleResults).call(preHandleResults, otherActions);\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (preDeleteHandle);\n\n//# sourceURL=webpack://rule-designer/./src/preHandle/preDeleteHandle.ts?");

/***/ }),

/***/ 3700:
/*!******************************!*\
  !*** ./src/utils/control.ts ***!
  \******************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   controlIconMap: function() { return /* binding */ controlIconMap; },\n/* harmony export */   \"default\": function() { return /* binding */ getControlIconMap; },\n/* harmony export */   deleteControlFn: function() { return /* binding */ deleteControlFn; }\n/* harmony export */ });\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! designer_base/Main */ 18040);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(designer_base_Main__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index */ 63612);\n\n\nvar controlIconMap = {\n  FormulaAction: '',\n  TakeBaseProAction: '',\n  SetEqutionAction: '',\n  ClearValueAction: '',\n  FillQtyAction: ''\n};\nfunction getControlIconMap(type) {\n  return controlIconMap[type];\n}\nvar deleteControlFn = function deleteControlFn(kdesignerApi, showMessage) {\n  var dataContext = kdesignerApi.data,\n    selectionContext = kdesignerApi.selection;\n  var getSelection = selectionContext.getSelection;\n  var selection = getSelection();\n  if (selection.length === 1) {\n    var selectControl = dataContext.findControl(selection[0]);\n    if (!(0,_index__WEBPACK_IMPORTED_MODULE_1__.isActionNode)(selectControl)) return;\n    // selectionContext.setSelect([])\n    dataContext.deleteControl((0,designer_base_Main__WEBPACK_IMPORTED_MODULE_0__.createDeleteAction)(selection)).then(function () {\n      var ParentId = selectControl.ParentId;\n      selectionContext.setSelect([ParentId]);\n    });\n  }\n};\n\n//# sourceURL=webpack://rule-designer/./src/utils/control.ts?");

/***/ }),

/***/ 84995:
/*!**********************************!*\
  !*** ./src/utils/controlIcon.ts ***!
  \**********************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   controlIconMap: function() { return /* binding */ controlIconMap; },\n/* harmony export */   \"default\": function() { return /* binding */ getControlIconMap; }\n/* harmony export */ });\nvar DEFAULT_ICON = 'zidingyifuwu';\nvar controlIconMap = {\n  FormulaAction: 'jisuanziduan3',\n  // 计算字段\n  TakeBasePropertyAction: 'xiedaijichuziliaoshuxing',\n  // 携带属性\n  SetEqutionAction: 'xiedaiziduan',\n  // 携带字段\n  ClearValueAction: 'qingchuziduan2',\n  // 清除字段\n  FillQtyAction: 'shulianghuansuan',\n  // 数量换算\n  LockFieldAction: 'suodingziduan',\n  // 锁定字段\n  UnlockFieldAction: 'jiesuoziduan',\n  // 解锁字段\n  ShowFieldAction: 'xianshiziduan',\n  // 显示字段\n  HideFieldAction: 'yincangziduan',\n  // 隐藏字段\n  LockControlAction: 'suodingkongjian3',\n  // 锁定控件\n  UnlockControlAction: 'jiesuokongjian3',\n  // 解锁控件\n  ShowControlAction: 'xianshikongjian3',\n  // 显示控件\n  HideControlAction: 'yincangkongjian3',\n  // 隐藏控件\n  ClientLockFieldAction: 'suodingziduan',\n  // 锁定字段(卡片)\n  ClientUnlockFieldAction: 'jiesuoziduan',\n  // 解锁字段(卡片)\n  ClientShowFieldAction: 'xianshiziduan',\n  // 显示字段(卡片)\n  ClientHideFieldAction: 'yincangziduan',\n  // 隐藏字段(卡片)\n  ClientLockControlAction: 'suodingkongjian3',\n  // 锁定控件(卡片)\n  ClientUnlockControlAction: 'jiesuokongjian3',\n  // 解锁控件(卡片)\n  ClientShowControlAction: 'xianshikongjian3',\n  // 显示控件(卡片)\n  ClientHideControlAction: 'yincangkongjian3',\n  // 隐藏控件(卡片)\n  ClientSetFieldfmtAction: 'ziduanxianshiyangshi',\n  // 设置字段显示样式\n  ClientSetFieldAction: 'ziduanshuxing',\n  // 设置字段属性\n  ClientSetControlAction: 'kongjianshuxing',\n  // 设置控件属性\n  ClientSetRowFmtAction: 'shezhixingyangshi' // 设置行样式\n};\nfunction getControlIconMap(type) {\n  return controlIconMap[type] || DEFAULT_ICON; // 新增控件先走默认图标\n}\n\n//# sourceURL=webpack://rule-designer/./src/utils/controlIcon.ts?");

/***/ }),

/***/ 13908:
/*!***********************************!*\
  !*** ./src/utils/convert-data.ts ***!
  \***********************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   convertDataToAllRulesElements: function() { return /* binding */ convertDataToAllRulesElements; },\n/* harmony export */   convertDataToFlowElements: function() { return /* binding */ convertDataToFlowElements; },\n/* harmony export */   insertAddNode: function() { return /* binding */ insertAddNode; }\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/keys */ 47976);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols */ 39448);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor */ 55748);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors */ 54120);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-properties */ 63808);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-property */ 45040);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/toConsumableArray */ 30260);\n/* harmony import */ var _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/defineProperty */ 30112);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/for-each */ 7312);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/concat */ 81744);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/filter */ 18860);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ 75984);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_map__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/map */ 88836);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_map__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_map__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/find */ 47332);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_set__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/set */ 59312);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_set__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_set__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! designer_base/Main */ 18040);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(designer_base_Main__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./index */ 63612);\n/* harmony import */ var _data_index__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../data/index */ 37304);\n/* harmony import */ var _meta__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../meta */ 52904);\n/* harmony import */ var _nodeType__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./nodeType */ 1300);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! lodash */ 67928);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_20___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_20__);\n\n\n\n\n\n\n\n\nfunction ownKeys(e, r) { var t = _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0___default()(e); if ((_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1___default())) { var o = _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1___default()(e); r && (o = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_8___default()(o).call(o, function (r) { return _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2___default()(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var _context6, _context7; var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_9___default()(_context6 = ownKeys(Object(t), !0)).call(_context6, function (r) { (0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(e, r, t[r]); }) : (_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_3___default()) ? _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_4___default()(e, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_3___default()(t)) : _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_9___default()(_context7 = ownKeys(Object(t))).call(_context7, function (r) { _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_5___default()(e, r, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2___default()(t, r)); }); } return e; }\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar getNodeType = function getNodeType(item) {\n  var type = item.Type;\n  return (0,_index__WEBPACK_IMPORTED_MODULE_16__.isActionNode)(item) ? _nodeType__WEBPACK_IMPORTED_MODULE_19__.ACTION_NODE_TYPE : type;\n};\nvar getSourceHandle = function getSourceHandle(item) {\n  if ((0,_index__WEBPACK_IMPORTED_MODULE_16__.isTrueNode)(item)) {\n    return {\n      sourceHandle: 'TrueNode'\n    };\n  } else if ((0,_index__WEBPACK_IMPORTED_MODULE_16__.isFalseNode)(item)) {\n    return {\n      sourceHandle: 'FalseNode'\n    };\n  }\n  return {};\n};\nvar convertDataToFlowElements = function convertDataToFlowElements(ruleItems) {\n  var _context2;\n  var position = {\n    x: 0,\n    y: 0\n  };\n  var nodes = [];\n  var edges = [];\n  _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_9___default()(ruleItems).call(ruleItems, function (item) {\n    var id = item.Id,\n      type = item.Type,\n      name = item.Name,\n      parentId = item.ParentId;\n    nodes.push({\n      id: id,\n      position: position,\n      type: getNodeType(item),\n      data: _objectSpread({}, item)\n    });\n    if (type !== _nodeType__WEBPACK_IMPORTED_MODULE_19__.RULE_NODE_TYPE) {\n      var _context;\n      edges.push(_objectSpread(_objectSpread({\n        id: _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_10___default()(_context = \"\".concat(parentId, \"-\")).call(_context, id),\n        source: parentId,\n        target: id,\n        type: 'step'\n      }, getSourceHandle(item)), {}, {\n        style: {\n          stroke: '#999'\n        }\n        // arrowHeadType: ArrowHeadType.ArrowClosed\n      }));\n    }\n  });\n  return _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_10___default()(_context2 = []).call(_context2, nodes, edges);\n};\nvar pushActionNodes = function pushActionNodes(nodes, actions, type, judgeNodeId) {\n  var _context3;\n  var TFNodeData = {\n    id: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_15__.createUUid)(),\n    parentId: judgeNodeId\n  };\n  var TFNode = type === _meta__WEBPACK_IMPORTED_MODULE_18__.TRUE_ACTION_NODE_TYPE ? new _meta__WEBPACK_IMPORTED_MODULE_18__.TrueNode(TFNodeData) : new _meta__WEBPACK_IMPORTED_MODULE_18__.FalseNode(TFNodeData);\n  nodes.push(TFNode);\n  _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_9___default()(_context3 = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_8___default()(actions).call(actions, function (action) {\n    return action.NodeType === type;\n  })).call(_context3, function (action, idx) {\n    // const actionNodeProps = { ...actio}\n    var ActionType = action.ActionType,\n      Description = action.Description,\n      RET = action.RET,\n      NodeType = action.NodeType;\n    var actionNode = new _meta__WEBPACK_IMPORTED_MODULE_18__.ActionNode({\n      type: ActionType,\n      id: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_15__.createUUid)(),\n      nodeType: NodeType,\n      actionType: ActionType,\n      description: Description,\n      ret: RET,\n      parentId: (0,_data_index__WEBPACK_IMPORTED_MODULE_17__.getPrevNodeId)(nodes)\n    });\n    nodes.push(actionNode);\n  });\n  nodes.push(new _meta__WEBPACK_IMPORTED_MODULE_18__.EndNode({\n    id: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_15__.createUUid)(),\n    parentId: (0,_data_index__WEBPACK_IMPORTED_MODULE_17__.getPrevNodeId)(nodes)\n  }));\n};\nvar convertDataToAllRulesElements = function convertDataToAllRulesElements(ruleItems, dataContext) {\n  var _context5;\n  var ruleNodes = dataContext.findControlByCondition(function (item) {\n    return (0,_index__WEBPACK_IMPORTED_MODULE_16__.isRuleNode)(item);\n  });\n  var ruleControlsArr = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_11___default()(ruleNodes).call(ruleNodes, function (item) {\n    return dataContext.getAllSubControls(item.Id);\n  });\n  if (!ruleControlsArr.length) return [];\n  var retNodesMap = new (_babel_runtime_corejs3_core_js_stable_map__WEBPACK_IMPORTED_MODULE_12___default())();\n  var getRetChildNodes = function getRetChildNodes(ruleControls) {\n    var _context4;\n    var conditionNode = _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_13___default()(ruleControls).call(ruleControls, function (control) {\n      return (0,_index__WEBPACK_IMPORTED_MODULE_16__.isConditionNode)(control);\n    });\n    var rets = new (_babel_runtime_corejs3_core_js_stable_set__WEBPACK_IMPORTED_MODULE_14___default())(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_8___default()(_context4 = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_11___default()(ruleControls).call(ruleControls, function (item) {\n      return item.RET;\n    })).call(_context4, function (ret) {\n      return !(0,lodash__WEBPACK_IMPORTED_MODULE_20__.isUndefined)(ret);\n    }));\n    _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_9___default()(rets).call(rets, function (ret) {\n      var retChildNodes = retNodesMap.get(ret) || [];\n      var nodes = [];\n      var newConditionNode = _objectSpread(_objectSpread({}, conditionNode), {}, {\n        Id: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_15__.createUUid)()\n      });\n      var judgeNode = new _meta__WEBPACK_IMPORTED_MODULE_18__.JudgeNode({\n        id: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_15__.createUUid)(),\n        parentId: newConditionNode.Id\n      });\n      nodes.push(newConditionNode, judgeNode);\n      var judgeNodeId = judgeNode.Id;\n      var actionNodes = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_8___default()(ruleControls).call(ruleControls, function (item) {\n        return item.RET === ret;\n      });\n      pushActionNodes(nodes, actionNodes, _meta__WEBPACK_IMPORTED_MODULE_18__.TRUE_ACTION_NODE_TYPE, judgeNodeId);\n      pushActionNodes(nodes, actionNodes, _meta__WEBPACK_IMPORTED_MODULE_18__.FALSE_ACTION_NODE_TYPE, judgeNodeId);\n      // const retNode = new RetNode({id: createUUid(), parentId: ruleNode.Id})\n      retChildNodes.push(nodes);\n      retNodesMap.set(ret, retChildNodes);\n    });\n    return retNodesMap;\n  };\n  _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_9___default()(ruleControlsArr).call(ruleControlsArr, function (controls) {\n    return getRetChildNodes(controls);\n  });\n  var allRets = new (_babel_runtime_corejs3_core_js_stable_set__WEBPACK_IMPORTED_MODULE_14___default())(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_8___default()(_context5 = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_11___default()(ruleItems).call(ruleItems, function (item) {\n    return item.RET;\n  })).call(_context5, function (ret) {\n    return !(0,lodash__WEBPACK_IMPORTED_MODULE_20__.isUndefined)(ret);\n  }));\n  var newRuleItems = [];\n  var ruleNode = new _meta__WEBPACK_IMPORTED_MODULE_18__.RuleNode({\n    id: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_15__.createUUid)(),\n    parentId: ''\n  });\n  newRuleItems.push(ruleNode);\n  _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_9___default()(allRets).call(allRets, function (ret) {\n    var retNode = new _meta__WEBPACK_IMPORTED_MODULE_18__.RetNode({\n      id: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_15__.createUUid)(),\n      parentId: ruleNode.Id,\n      ret: ret\n    });\n    newRuleItems.push(retNode);\n    var retNodesList = retNodesMap.get(ret) || [];\n    _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_9___default()(retNodesList).call(retNodesList, function (controls) {\n      controls[0].ParentId = retNode.Id;\n      newRuleItems.push.apply(newRuleItems, (0,_babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(controls));\n    });\n  });\n  return convertDataToFlowElements(newRuleItems);\n};\nvar insertAddNode = function insertAddNode(ruleItems, locked) {\n  if (locked) return ruleItems;\n  var newRuleItems = [];\n  _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_9___default()(ruleItems).call(ruleItems, function (item, index) {\n    if (item.Type === _nodeType__WEBPACK_IMPORTED_MODULE_19__.END_NODE_TYPE) {\n      var preNodeItem = ruleItems[index - 1];\n\n      // 判断结束节点前面的那个节点是否true/false节点\n      if ((0,_index__WEBPACK_IMPORTED_MODULE_16__.isFalseNode)(preNodeItem) || (0,_index__WEBPACK_IMPORTED_MODULE_16__.isTrueNode)(preNodeItem)) {\n        var addNodeId = (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_15__.createUUid)();\n        newRuleItems.push(new _meta__WEBPACK_IMPORTED_MODULE_18__.AddNode({\n          id: addNodeId,\n          parentId: preNodeItem.Id\n        }), _objectSpread(_objectSpread({}, item), {}, {\n          ParentId: addNodeId\n        }));\n      } else {\n        newRuleItems.push(item);\n      }\n    } else {\n      newRuleItems.push(item);\n    }\n  });\n  return newRuleItems;\n};\n\n//# sourceURL=webpack://rule-designer/./src/utils/convert-data.ts?");

/***/ }),

/***/ 63612:
/*!****************************!*\
  !*** ./src/utils/index.ts ***!
  \****************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   convertToArray: function() { return /* binding */ convertToArray; },\n/* harmony export */   existEnableTreeNode: function() { return /* binding */ existEnableTreeNode; },\n/* harmony export */   existFalseNode: function() { return /* binding */ existFalseNode; },\n/* harmony export */   getBrowserData: function() { return /* binding */ getBrowserData; },\n/* harmony export */   getRulesKey: function() { return /* binding */ getRulesKey; },\n/* harmony export */   getRulesLocked: function() { return /* binding */ getRulesLocked; },\n/* harmony export */   isActionNode: function() { return /* binding */ isActionNode; },\n/* harmony export */   isAddNode: function() { return /* binding */ isAddNode; },\n/* harmony export */   isConditionNode: function() { return /* binding */ isConditionNode; },\n/* harmony export */   isDragRule: function() { return /* binding */ isDragRule; },\n/* harmony export */   isEndNode: function() { return /* binding */ isEndNode; },\n/* harmony export */   isFalseNode: function() { return /* binding */ isFalseNode; },\n/* harmony export */   isLockRule: function() { return /* binding */ isLockRule; },\n/* harmony export */   isRootNode: function() { return /* binding */ isRootNode; },\n/* harmony export */   isRuleNode: function() { return /* binding */ isRuleNode; },\n/* harmony export */   isTFNode: function() { return /* binding */ isTFNode; },\n/* harmony export */   isTrueNode: function() { return /* binding */ isTrueNode; }\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/array/is-array */ 12388);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/includes */ 82600);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/find */ 47332);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _nodeType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./nodeType */ 1300);\n\n\n\n/*\n * @Author: wbw\n * @Email: wbw@kingdee.com\n * @Date: 2022-03-28 16:18:59\n * @Last Modified by: fjr\n * @LastEditTime: 2022-04-06 16:25:44\n * @Description: ...\n */\n\n\nfunction isRootNode(node) {\n  return node.Type === _nodeType__WEBPACK_IMPORTED_MODULE_3__.ROOT_NODE_TYPE;\n}\nfunction isConditionNode(node) {\n  return node.Type === _nodeType__WEBPACK_IMPORTED_MODULE_3__.CONDITION_NODE_TYPE;\n}\nfunction isActionNode(node) {\n  // 见meta/index ActionNode注释\n  return node.__Type__ === _nodeType__WEBPACK_IMPORTED_MODULE_3__.ACTION_NODE_TYPE;\n}\nfunction isTrueNode(node) {\n  return node.Type === _nodeType__WEBPACK_IMPORTED_MODULE_3__.TRUE_NODE_TYPE;\n}\nfunction isFalseNode(node) {\n  return node.Type === _nodeType__WEBPACK_IMPORTED_MODULE_3__.FALSE_NODE_TYPE;\n}\nfunction isEndNode(node) {\n  return node.Type === _nodeType__WEBPACK_IMPORTED_MODULE_3__.END_NODE_TYPE;\n}\nfunction isTFNode(node) {\n  return isTrueNode(node) || isFalseNode(node);\n}\nfunction isRuleNode(node) {\n  return node.Type === _nodeType__WEBPACK_IMPORTED_MODULE_3__.RULE_NODE_TYPE;\n}\nfunction isAddNode(node) {\n  return node.Type === _nodeType__WEBPACK_IMPORTED_MODULE_3__.ADD_NODE_TYPE;\n}\nvar convertToArray = function convertToArray(param) {\n  if (!param) return [];\n  if (_babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_0___default()(param)) return param;\n  return [param];\n};\nvar getRulesKey = function getRulesKey(type, metaType) {\n  // 卡片的规则，需要赋值的key为ClientRules，其它为Rules\n  var clientRulesFieldTypes = ['CardRowPanelAp', 'CardEntryRowAp', 'ListGridViewAp', 'ReportListAp'];\n  return _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_1___default()(clientRulesFieldTypes).call(clientRulesFieldTypes, type) && metaType === 'formmeta' ? 'ClientRules' : 'Rules';\n};\nvar existFalseNode = function existFalseNode(type) {\n  var unexistFalseNodeTypeList = ['CardEntryRowAp', 'ListGridViewAp', 'CardRowPanelAp'];\n  // 旧版的卡片是不能设置条件不成立时的规则的\n  return !_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_1___default()(unexistFalseNodeTypeList).call(unexistFalseNodeTypeList, type);\n};\nvar existEnableTreeNode = function existEnableTreeNode(treeNode) {\n  var unexistEnableTypeList = ['CardEntryRowAp', 'ListGridViewAp'];\n  return _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_1___default()(unexistEnableTypeList).call(unexistEnableTypeList, treeNode === null || treeNode === void 0 ? void 0 : treeNode.type);\n};\n\n/**\n *规则是否锁定\n * @param curRuleId 规则id（选中的规则id或者当前的规则id）\n * @param lockRules 禁用规则id列表/map\n * @returns boolean true锁定 false不锁定\n */\nvar isLockRule = function isLockRule(curRuleId) {\n  var lockRules = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var isLockRule = false;\n  if (_babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_0___default()(lockRules)) {\n    isLockRule = lockRules === null || lockRules === void 0 ? void 0 : _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_1___default()(lockRules).call(lockRules, curRuleId);\n  } else if (Object.prototype.toString.call(lockRules) === '[object Object]') {\n    isLockRule = (lockRules === null || lockRules === void 0 ? void 0 : lockRules[curRuleId]) === 'lock';\n  }\n  return isLockRule;\n};\n\n/**\n *规则是否可拖拽\n * @param curRuleId 规则id（选中的规则id或者当前的规则id）\n * @param lastRuleId 上一个规则id\n * @param nextRuleId 下一个规则id\n * @param lockRules 禁用规则id列表/map\n * @returns boolean true可拖拽 false不可拖拽\n */\nvar isDragRule = function isDragRule(curRuleId, lastRuleId, nextRuleId) {\n  var lockRules = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n  var isDragRule = true;\n  if (_babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_0___default()(lockRules)) {\n    isDragRule = !_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_1___default()(lockRules).call(lockRules, curRuleId);\n  } else if (Object.prototype.toString.call(lockRules) === '[object Object]') {\n    var curRuleLock = lockRules[curRuleId];\n    if (curRuleLock === 'unlock') {\n      // 有上一条规则，没有下一条规则/下一条规则是扩展的（undefined）,draggbale由上一条规则的锁定性决定\n      isDragRule = lastRuleId && (!nextRuleId || !lockRules[curRuleId]) && lockRules[lastRuleId] === 'unlock' ||\n      // 没有上一条规则，draggbale由下一条规则的锁定性决定\n      !lastRuleId && lockRules[nextRuleId] === 'unlock' ||\n      // 上下两条规则都存在的情况\n      lockRules[lastRuleId] === 'unlock' || lockRules[nextRuleId] === 'unlock';\n    } else {\n      isDragRule = curRuleLock !== 'lock';\n    }\n  }\n  return isDragRule;\n};\n\n/**\n * 规则可否锁定，当表单data里面存在该配置时，取表单data的值，否则取元模型数据的值\n * @param id\n * @param meta\n * @param data\n * @param selectMetaType 值为formmeta/listmeta/entitymeta\n */\nvar getRulesLocked = function getRulesLocked(id, meta, data, selectMetaType) {\n  var _context;\n  var metaType = selectMetaType === 'entitymeta' ? 'entitymeta' : 'formmeta';\n  var dataItem = _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_2___default()(_context = data[metaType].Items).call(_context, function (item) {\n    return item.Id === id;\n  });\n  var type = dataItem === null || dataItem === void 0 ? void 0 : dataItem._Type_;\n  // 表单data数据先不做处理，后续待后端（领域）添加\n  // rulesLocked = dataItem.LockType !== 'lock'\n  var newMeta = selectMetaType === 'entitymeta' ? meta : meta[selectMetaType];\n  var rulesPropertie = getMetaProperty(newMeta, type, 'Rules');\n  return (rulesPropertie === null || rulesPropertie === void 0 ? void 0 : rulesPropertie.LockType) === 'lock';\n};\nvar getMetaProperty = function getMetaProperty(meta, type, propertyName) {\n  var categories = meta.Categories;\n  for (var i = 0; i < categories.length; i++) {\n    var _context2;\n    var elementType = _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_2___default()(_context2 = categories[i].ElementTypes).call(_context2, function (elementType) {\n      return elementType.Id === type;\n    });\n    if (elementType) {\n      var _context3;\n      return _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_2___default()(_context3 = elementType.Properties).call(_context3, function (propertie) {\n        return propertie.PropertyName === propertyName;\n      });\n    }\n  }\n};\nvar getBrowserData = function getBrowserData() {\n  var userAgent = navigator.userAgent;\n  var matchUA = function matchUA(regexp) {\n    return userAgent.match(regexp);\n  };\n  if (matchUA(/Trident\\/(\\d+)/)) return 'ie';\n  if (matchUA(/Firefox\\/(\\d+)/)) return 'firefox';\n  if (matchUA(/Edge?\\/(\\d+)/)) return 'edge'; // edge里面的设备代理也有chrome字样\n  if (matchUA(/Chrome\\/(\\d+)/)) return 'chrome';\n  if (matchUA(/Safari\\/(\\d+)/)) return 'safari';\n  return 'unknow';\n};\n\n//# sourceURL=webpack://rule-designer/./src/utils/index.ts?");

/***/ }),

/***/ 21920:
/*!*****************************!*\
  !*** ./src/utils/layout.ts ***!
  \*****************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getAllRulesFlowConfig: function() { return /* binding */ getAllRulesFlowConfig; },\n/* harmony export */   getNodeHeight: function() { return /* binding */ getNodeHeight; },\n/* harmony export */   getNodeSize: function() { return /* binding */ getNodeSize; },\n/* harmony export */   getNodeXPosition: function() { return /* binding */ getNodeXPosition; },\n/* harmony export */   getReactFlowConfig: function() { return /* binding */ getReactFlowConfig; },\n/* harmony export */   getViewPortWidth: function() { return /* binding */ getViewPortWidth; }\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/defineProperty */ 30112);\n/* harmony import */ var _babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/toConsumableArray */ 30260);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/filter */ 18860);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ 75984);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/find */ 47332);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/keys */ 47976);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols */ 39448);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor */ 55748);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/for-each */ 7312);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors */ 54120);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-properties */ 63808);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-property */ 45040);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var react_flow_renderer__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! react-flow-renderer */ 98752);\n/* harmony import */ var _nodeType__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./nodeType */ 1300);\n\n\nfunction ownKeys(e, r) { var t = _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_2___default()(e); if ((_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_3___default())) { var o = _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_3___default()(e); r && (o = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_4___default()(o).call(o, function (r) { return _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_5___default()(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var _context2, _context3; var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_6___default()(_context2 = ownKeys(Object(t), !0)).call(_context2, function (r) { (0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(e, r, t[r]); }) : (_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_7___default()) ? _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_8___default()(e, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_7___default()(t)) : _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_6___default()(_context3 = ownKeys(Object(t))).call(_context3, function (r) { _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_9___default()(e, r, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_5___default()(t, r)); }); } return e; }\n\n\n\n\n\n\n\n\n\n\n\n\nfunction getNodeSize(element) {\n  var type = element.type;\n  switch (type) {\n    case _nodeType__WEBPACK_IMPORTED_MODULE_13__.RULE_NODE_TYPE:\n    case _nodeType__WEBPACK_IMPORTED_MODULE_13__.END_NODE_TYPE:\n      return {\n        width: 11,\n        height: 11\n      };\n    case _nodeType__WEBPACK_IMPORTED_MODULE_13__.RET_NODE_TYPE:\n    case _nodeType__WEBPACK_IMPORTED_MODULE_13__.CONDITION_NODE_TYPE:\n      return {\n        width: 117,\n        height: getNodeHeight(element, 117)\n      };\n    case _nodeType__WEBPACK_IMPORTED_MODULE_13__.JUDGE_NODE_TYPE:\n      return {\n        width: 62,\n        height: 36\n      };\n    case _nodeType__WEBPACK_IMPORTED_MODULE_13__.TRUE_NODE_TYPE:\n    case _nodeType__WEBPACK_IMPORTED_MODULE_13__.FALSE_NODE_TYPE:\n      return {\n        width: 70,\n        height: 24\n      };\n    case _nodeType__WEBPACK_IMPORTED_MODULE_13__.ACTION_NODE_TYPE:\n      return {\n        width: 146,\n        height: getNodeHeight(element, 146)\n      };\n    case _nodeType__WEBPACK_IMPORTED_MODULE_13__.ADD_NODE_TYPE:\n      return {\n        width: 16,\n        height: 16\n      };\n    default:\n      return {\n        width: 172,\n        height: 36\n      };\n  }\n}\nfunction getNodeHeight(element, nodeWidth) {\n  var type = element.type,\n    data = element.data;\n  var innerText = '';\n  if (type === _nodeType__WEBPACK_IMPORTED_MODULE_13__.CONDITION_NODE_TYPE) {\n    innerText = data.PreDescription || '';\n  } else if (type === _nodeType__WEBPACK_IMPORTED_MODULE_13__.RET_NODE_TYPE) {\n    innerText = data.RET || '';\n  } else {\n    innerText = data.Description || '';\n  }\n  var container = document.createElement('div');\n  container.setAttribute('style', \"width: \".concat(nodeWidth, \"px; line-height: 18px;border: 1px solid transparent; word-break: break-word;padding: 8px 16px; max-width:320px; position:absolute; left:-9999px; top:0px; display:flex;min-height: 36px; font-weight: bold;font-size: 12px;\"));\n  document.body.appendChild(container);\n  container.innerText = innerText;\n  var _container$getBoundin = container.getBoundingClientRect(),\n    height = _container$getBoundin.height;\n  document.body.removeChild(container);\n  return height;\n}\nvar getViewPortWidth = function getViewPortWidth(elements) {\n  var _context;\n  var xPosInfo = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_4___default()(_context = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_10___default()(elements).call(elements, function (el) {\n    if ((0,react_flow_renderer__WEBPACK_IMPORTED_MODULE_12__.isNode)(el)) {\n      var _el$position = el.position,\n        x = _el$position.x,\n        y = _el$position.y;\n      return x;\n    }\n    return null;\n  })).call(_context, Boolean);\n  return Math.max.apply(Math, (0,_babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(xPosInfo));\n};\nvar getNodeXPosition = function getNodeXPosition(el, elements, nodeWithPosition, parentId) {\n  var type = el.type;\n  if (type === _nodeType__WEBPACK_IMPORTED_MODULE_13__.RULE_NODE_TYPE) {\n    return nodeWithPosition.x;\n  } else {\n    var parentEl = _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_11___default()(elements).call(elements, function (item) {\n      return item.id === parentId;\n    });\n    if (parentEl) {\n      var position = parentEl.position,\n        size = parentEl.data.size;\n      // 固定位置，x坐标+宽度+50间距\n      return position.x + size.width + 50;\n    } else {\n      return nodeWithPosition.x;\n    }\n  }\n};\n\n/**\n * 获取 ReactFlow 的配置项\n * @returns ReactFlowProps\n */\nfunction getReactFlowConfig() {\n  return {\n    style: {\n      background: '#ECEEF2'\n    },\n    panOnScroll: true,\n    zoomOnScroll: false,\n    preventScrolling: false,\n    nodesConnectable: false,\n    nodesDraggable: false,\n    panOnScrollMode: react_flow_renderer__WEBPACK_IMPORTED_MODULE_12__.PanOnScrollMode.Free,\n    defaultZoom: 1,\n    minZoom: 1 / 1.2 / 1.2,\n    maxZoom: 1.2 * 1.2,\n    zoomOnDoubleClick: false\n  };\n}\nfunction getAllRulesFlowConfig() {\n  return _objectSpread(_objectSpread({}, getReactFlowConfig()), {}, {\n    style: {\n      background: '#fff'\n    }\n  });\n}\n\n//# sourceURL=webpack://rule-designer/./src/utils/layout.ts?");

/***/ }),

/***/ 1300:
/*!*******************************!*\
  !*** ./src/utils/nodeType.ts ***!
  \*******************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ACTION_NODE_TYPE: function() { return /* binding */ ACTION_NODE_TYPE; },\n/* harmony export */   ADD_NODE_TYPE: function() { return /* binding */ ADD_NODE_TYPE; },\n/* harmony export */   CONDITION_NODE_TYPE: function() { return /* binding */ CONDITION_NODE_TYPE; },\n/* harmony export */   END_NODE_TYPE: function() { return /* binding */ END_NODE_TYPE; },\n/* harmony export */   FALSE_NODE_TYPE: function() { return /* binding */ FALSE_NODE_TYPE; },\n/* harmony export */   JUDGE_NODE_TYPE: function() { return /* binding */ JUDGE_NODE_TYPE; },\n/* harmony export */   RET_NODE_TYPE: function() { return /* binding */ RET_NODE_TYPE; },\n/* harmony export */   ROOT_NODE_TYPE: function() { return /* binding */ ROOT_NODE_TYPE; },\n/* harmony export */   RULE_NODE_TYPE: function() { return /* binding */ RULE_NODE_TYPE; },\n/* harmony export */   TRUE_NODE_TYPE: function() { return /* binding */ TRUE_NODE_TYPE; }\n/* harmony export */ });\n// 根结点类型\nvar ROOT_NODE_TYPE = 'RuleRoot';\nvar CONDITION_NODE_TYPE = 'ConditionNode';\nvar RULE_NODE_TYPE = 'RuleNode';\nvar JUDGE_NODE_TYPE = 'JudgeNode';\nvar END_NODE_TYPE = 'EndNode';\nvar TRUE_NODE_TYPE = 'TrueNode';\nvar FALSE_NODE_TYPE = 'FalseNode';\nvar ACTION_NODE_TYPE = 'ActionNode';\nvar RET_NODE_TYPE = 'RetNode';\nvar ADD_NODE_TYPE = 'AddNode';\n\n//# sourceURL=webpack://rule-designer/./src/utils/nodeType.ts?");

/***/ }),

/***/ 31340:
/*!********************************!*\
  !*** ./src/utils/treeUtils.ts ***!
  \********************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   entityMetaToTree: function() { return /* binding */ entityMetaToTree; },\n/* harmony export */   getEditorEntityTree: function() { return /* binding */ getEditorEntityTree; },\n/* harmony export */   getTreeDataFlatten: function() { return /* binding */ getTreeDataFlatten; },\n/* harmony export */   toArrayTree: function() { return /* binding */ toArrayTree; }\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/slice */ 12640);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_array_from__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/array/from */ 89843);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_array_from__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_array_from__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_symbol__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/symbol */ 97440);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_symbol__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_symbol__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_get_iterator_method__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js/get-iterator-method */ 64248);\n/* harmony import */ var _babel_runtime_corejs3_core_js_get_iterator_method__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_get_iterator_method__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/keys */ 47976);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols */ 39448);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/filter */ 18860);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor */ 55748);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors */ 54120);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-properties */ 63808);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-property */ 45040);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var _babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/toConsumableArray */ 30260);\n/* harmony import */ var _babel_runtime_corejs3_helpers_typeof__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/typeof */ 58496);\n/* harmony import */ var _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/defineProperty */ 30112);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ 75984);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/for-each */ 7312);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/array/is-array */ 12388);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_16__);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! lodash */ 67928);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_17__);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! designer_base/Main */ 18040);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(designer_base_Main__WEBPACK_IMPORTED_MODULE_18__);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction ownKeys(e, r) { var t = _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_4___default()(e); if ((_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_5___default())) { var o = _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_5___default()(e); r && (o = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_6___default()(o).call(o, function (r) { return _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_7___default()(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var _context2, _context3; var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_14___default()(_context2 = ownKeys(Object(t), !0)).call(_context2, function (r) { (0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_13__[\"default\"])(e, r, t[r]); }) : (_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_8___default()) ? _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_9___default()(e, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_8___default()(t)) : _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_14___default()(_context3 = ownKeys(Object(t))).call(_context3, function (r) { _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_10___default()(e, r, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_7___default()(t, r)); }); } return e; }\n\n\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof (_babel_runtime_corejs3_core_js_stable_symbol__WEBPACK_IMPORTED_MODULE_2___default()) !== \"undefined\" && _babel_runtime_corejs3_core_js_get_iterator_method__WEBPACK_IMPORTED_MODULE_3___default()(o) || o[\"@@iterator\"]; if (!it) { if (_babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_16___default()(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\nfunction _unsupportedIterableToArray(o, minLen) { var _context; if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = _babel_runtime_corejs3_core_js_stable_instance_slice__WEBPACK_IMPORTED_MODULE_0___default()(_context = Object.prototype.toString.call(o)).call(_context, 8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return _babel_runtime_corejs3_core_js_stable_array_from__WEBPACK_IMPORTED_MODULE_1___default()(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\n/*\n * @Description:\n * @Author: jianhang_he\n * @Date: 2022-06-17 09:06:12\n * @LastEditTime: 2022-09-22 20:05:56\n * @Last Modified by: jianhang_he\n */\n\n\nvar listToTree = function listToTree(treeRoot, list) {\n  var obj = {};\n  var _iterator = _createForOfIteratorHelper(list),\n    _step;\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var item = _step.value;\n      obj[item.ParentId] = obj[item.ParentId] || [];\n      obj[item.ParentId].push(item);\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n  return formatTree([treeRoot], obj);\n};\nvar formatTree = function formatTree(data, childMap) {\n  return _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_15___default()(data).call(data, function (item) {\n    var children = childMap[item.Id];\n    if (!childMap[item.Id]) return item;\n    return _objectSpread(_objectSpread({}, item), {}, {\n      children: formatTree(children, childMap)\n    });\n  });\n};\nvar entityMetaToTree = function entityMetaToTree(entitymeta) {\n  var _entitymeta$Items = entitymeta.Items,\n    items = _entitymeta$Items === void 0 ? [] : _entitymeta$Items;\n  var treeRoot = items[0] || {};\n  var treeHead = {\n    Name: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_18__.getLangMsg)('ruled.treeUtils.key0001'),\n    Id: 'tree-head-node',\n    ParentId: treeRoot.Id\n  };\n  var formatedList = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_15___default()(items).call(items, function (item) {\n    var parentId = item.ParentId,\n      fieldName = item.FieldName,\n      Id = item.Id;\n    if ((!parentId || parentId === treeRoot.Id) && fieldName) {\n      return _objectSpread(_objectSpread({}, item), {}, {\n        ParentId: 'tree-head-node'\n      });\n    } else if (!parentId && Id !== treeRoot.Id) {\n      return _objectSpread(_objectSpread({}, item), {}, {\n        ParentId: treeRoot.Id || ''\n      });\n    }\n    return item;\n  });\n  formatedList.unshift(treeHead);\n  return listToTree(treeRoot, formatedList, undefined);\n};\nvar getEditorEntityTree = function getEditorEntityTree(ruleMetaInfo, activeRuleNodeId, actionType, treeType) {\n  var _entity$activeRuleNod;\n  var _ruleMetaInfo$ = ruleMetaInfo[0],\n    entity = _ruleMetaInfo$.entity,\n    treeMap = _ruleMetaInfo$.treeMap;\n  var treeId = (entity === null || entity === void 0 || (_entity$activeRuleNod = entity[activeRuleNodeId]) === null || _entity$activeRuleNod === void 0 ? void 0 : _entity$activeRuleNod[actionType]) || '';\n  if ((0,_babel_runtime_corejs3_helpers_typeof__WEBPACK_IMPORTED_MODULE_12__[\"default\"])(treeId) === 'object' && treeType) {\n    treeId = treeId[treeType];\n  }\n  if (!treeId) return [];\n  console.log(actionType, treeId, treeMap[treeId]);\n  return [treeMap[treeId]];\n};\nvar getTreeDataFlatten = function getTreeDataFlatten(treeData) {\n  var flattenData = [];\n  var getChildren = function getChildren(item, arr) {\n    var children = item.children;\n    if (children !== null && children !== void 0 && children.length) {\n      arr.push.apply(arr, (0,_babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_11__[\"default\"])(children));\n      _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_14___default()(children).call(children, function (i) {\n        return getChildren(i, arr);\n      });\n    }\n  };\n  _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_14___default()(treeData).call(treeData, function (data) {\n    flattenData.push(data);\n    getChildren(data, flattenData);\n  });\n  return flattenData;\n};\n\n// 改变一下树返回来的结构，有可能数组\nvar toArrayTree = function toArrayTree(tree) {\n  var newTree = (0,lodash__WEBPACK_IMPORTED_MODULE_17__.cloneDeep)(tree);\n  if (_babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_16___default()(newTree)) return newTree;\n  return newTree ? [newTree] : [];\n};\n\n//# sourceURL=webpack://rule-designer/./src/utils/treeUtils.ts?");

/***/ }),

/***/ 10340:
/*!*************************************!*\
  !*** ./src/views/left-panel/api.ts ***!
  \*************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addOneRule: function() { return /* binding */ addOneRule; },\n/* harmony export */   editRuleDesc: function() { return /* binding */ editRuleDesc; },\n/* harmony export */   removeOneRule: function() { return /* binding */ removeOneRule; },\n/* harmony export */   setRuleEnabled: function() { return /* binding */ setRuleEnabled; }\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ 75984);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/json/stringify */ 39832);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _meta__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../meta */ 52904);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! designer_base/Main */ 18040);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(designer_base_Main__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\n/**\n * 创建一个新的空规则\n * @param {*} id id\n * @param {*} text 文本描述\n * @param {*} parentId 父节点id\n * @param {*} relationContainerNodeId 关联的树节点id\n * * @param {*} addControl 添加控件方法\n */\nfunction addOneRule(text, parentId, relationContainerNodeId, addControl, isExistFalseNode) {\n  /**\n   * 规则的根节点\n   */\n  var ruleNodeId = (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_3__.createUUid)();\n  var ruleNode = new _meta__WEBPACK_IMPORTED_MODULE_2__.RuleNode({\n    id: ruleNodeId,\n    description: text,\n    parentId: parentId,\n    enabled: true,\n    relationContainerNodeId: relationContainerNodeId\n  });\n\n  /**\n   * 前置条件节点\n   */\n  var conditionNodeId = (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_3__.createUUid)();\n  var conditionNode = new _meta__WEBPACK_IMPORTED_MODULE_2__.ConditionNode({\n    id: conditionNodeId,\n    parentId: ruleNodeId,\n    preDescription: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_3__.getLangMsg)('ruled.leftPanelApi.key0001')\n  });\n\n  /**\n   * 判断条件节点\n   */\n  var judgeNodeId = (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_3__.createUUid)();\n  var judgeNode = new _meta__WEBPACK_IMPORTED_MODULE_2__.JudgeNode({\n    id: judgeNodeId,\n    parentId: conditionNodeId\n  });\n\n  /**\n   * 成功节点\n   */\n\n  var trueNodeId = (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_3__.createUUid)();\n  var trueNode = new _meta__WEBPACK_IMPORTED_MODULE_2__.TrueNode({\n    id: trueNodeId,\n    parentId: judgeNodeId\n  });\n\n  /**\n   * 失败节点\n   */\n  var falseNodeId = (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_3__.createUUid)();\n  var falseNode = new _meta__WEBPACK_IMPORTED_MODULE_2__.FalseNode({\n    id: falseNodeId,\n    parentId: judgeNodeId\n  });\n\n  /**\n   * 成功结束节点\n   */\n  var trueEndNodeId = (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_3__.createUUid)();\n  var trueEndNode = new _meta__WEBPACK_IMPORTED_MODULE_2__.EndNode({\n    id: trueEndNodeId,\n    parentId: trueNodeId\n  });\n\n  /**\n   * 失败结束节点\n   */\n  var falseEndNodeId = (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_3__.createUUid)();\n  var falseEndNode = new _meta__WEBPACK_IMPORTED_MODULE_2__.EndNode({\n    id: falseEndNodeId,\n    parentId: falseNodeId\n  });\n  var newNodeList = isExistFalseNode ? [ruleNode, conditionNode, judgeNode, trueNode, trueEndNode, falseNode, falseEndNode] : [ruleNode, conditionNode, judgeNode, trueNode, trueEndNode];\n\n  // 暂时用深拷贝解决Immer的bug\n  return addControl((0,designer_base_Main__WEBPACK_IMPORTED_MODULE_3__.createAddAction)(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0___default()(newNodeList).call(newNodeList, function (node) {\n    return JSON.parse(_babel_runtime_corejs3_core_js_stable_json_stringify__WEBPACK_IMPORTED_MODULE_1___default()(node));\n  })));\n}\n\n/**\n *\n * @param {*} id 节点id\n * @param {*} deleteControl 删除控件方法\n */\nfunction removeOneRule(id, deleteControl) {\n  return deleteControl((0,designer_base_Main__WEBPACK_IMPORTED_MODULE_3__.createDeleteAction)([id]));\n}\n\n/**\n * 更新规则名称\n * @param {*} id\n * @param {*} newDesc\n * @param {*} batchUpdateControlPropertyValues\n */\nfunction editRuleDesc(id, newDesc, batchUpdateControlPropertyValues) {\n  return batchUpdateControlPropertyValues((0,designer_base_Main__WEBPACK_IMPORTED_MODULE_3__.createUpdateAction)([[id, {\n    Description: newDesc\n  }]]));\n}\n/**\n * 启用禁用\n * @param {*} id\n * @param {*} newDesc\n * @param {*} batchUpdateControlPropertyValues\n */\nfunction setRuleEnabled(id, Enabled, batchUpdateControlPropertyValues) {\n  return batchUpdateControlPropertyValues((0,designer_base_Main__WEBPACK_IMPORTED_MODULE_3__.createUpdateAction)([[id, {\n    Enabled: Enabled\n  }]]));\n}\n\n//# sourceURL=webpack://rule-designer/./src/views/left-panel/api.ts?");

/***/ }),

/***/ 79688:
/*!********************************************************!*\
  !*** ./src/views/left-panel/component/RuleContent.tsx ***!
  \********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/slicedToArray */ 95992);\n/* harmony import */ var _babel_runtime_corejs3_helpers_extends__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/extends */ 2664);\n/* harmony import */ var _babel_runtime_corejs3_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/objectWithoutProperties */ 28220);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ 43400);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @kdcloudjs/kdesign */ 54116);\n/* harmony import */ var _kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! designer_base/Main */ 18040);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(designer_base_Main__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _RuleList__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./RuleList */ 1668);\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! classnames */ 71252);\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_7__);\n\n\n\nvar _excluded = [\"children\", \"visible\", \"setVisible\", \"prefixCls\"];\n\n\n\n\n\nvar ADD_RULE_TOOLTIP_VISIBLE = 'rule-designer_addRuleTooltipVisible';\nvar RuleTooltip = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_3__.memo)(function (_ref) {\n  var children = _ref.children,\n    visible = _ref.visible,\n    setVisible = _ref.setVisible,\n    prefixCls = _ref.prefixCls,\n    other = (0,_babel_runtime_corejs3_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(_ref, _excluded);\n  (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(function () {\n    designer_base_Main__WEBPACK_IMPORTED_MODULE_5__.eventBus.on('onViewCollapseChange', function (val) {\n      var position = val.position,\n        hide = val.hide;\n      if (position === 'left' && hide) {\n        setVisible(false);\n      }\n    });\n  }, []);\n  var noShowTips = false;\n  var addRuleTooltipVisible = window.localStorage.getItem(ADD_RULE_TOOLTIP_VISIBLE);\n  var handleClickIHadKnow = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(function () {\n    if (noShowTips) {\n      window.localStorage.setItem(ADD_RULE_TOOLTIP_VISIBLE, 'false');\n    }\n    setVisible(false);\n  }, [noShowTips]);\n  var tooltipContent = (0,react__WEBPACK_IMPORTED_MODULE_3__.useMemo)(function () {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default().createElement((react__WEBPACK_IMPORTED_MODULE_3___default().Fragment), null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"span\", {\n      className: \"\".concat(prefixCls, \"-bar-tooltip-text\")\n    }, (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_5__.getLangMsg)('ruled.ruleContent.key0001')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"div\", {\n      className: \"\".concat(prefixCls, \"-bar-tooltip-footer\")\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_4__.Checkbox\n    // value='noShowTips'\n    , {\n      className: \"\".concat(prefixCls, \"-bar-tooltip-footer-checkbox\"),\n      onChange: function onChange() {\n        noShowTips = true;\n      }\n    }, (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_5__.getLangMsg)('ruled.ruleContent.key0005')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_4__.Button, {\n      type: \"ghost\",\n      className: \"\".concat(prefixCls, \"-bar-tooltip-footer-btn\"),\n      onClick: handleClickIHadKnow\n    }, (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_5__.getLangMsg)('ruled.ruleContent.key0002'))));\n  }, [handleClickIHadKnow]);\n  if (addRuleTooltipVisible !== 'false' && visible) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_4__.Tooltip, (0,_babel_runtime_corejs3_helpers_extends__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({\n      visible: visible,\n      popperClassName: \"\".concat(prefixCls, \"-bar-tooltip\"),\n      tip: tooltipContent\n    }, other), children);\n  }\n  return children;\n});\nfunction RuleContent(_ref2) {\n  var prefixCls = _ref2.prefixCls,\n    data = _ref2.data,\n    addRule = _ref2.addRule,\n    canAddRules = _ref2.canAddRules,\n    removeRule = _ref2.removeRule,\n    editRule = _ref2.editRule,\n    setRule = _ref2.setRule,\n    ruleSelect = _ref2.ruleSelect,\n    selectId = _ref2.selectId,\n    editId = _ref2.editId,\n    allRuleList = _ref2.allRuleList,\n    curSelectRuleTree = _ref2.curSelectRuleTree;\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(allRuleList.length === 0 && !selectId),\n    _useState2 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useState, 2),\n    visible = _useState2[0],\n    setVisible = _useState2[1];\n  (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(function () {\n    setVisible(allRuleList.length === 0 && !selectId);\n  }, [allRuleList, selectId]);\n  var addOneRule = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(function () {\n    if (!curSelectRuleTree || !canAddRules) return;\n    setVisible(false);\n    addRule((0,designer_base_Main__WEBPACK_IMPORTED_MODULE_5__.getLangMsg)('ruled.ruleListItem.key0008'));\n  }, [addRule, canAddRules]);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default().createElement((react__WEBPACK_IMPORTED_MODULE_3___default().Fragment), null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-bar\")\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"span\", {\n    className: \"\".concat(prefixCls, \"-bar-title\")\n  }, (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_5__.getLangMsg)('ruled.ruleContent.key0003')), canAddRules ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default().createElement(RuleTooltip, {\n    prefixCls: prefixCls,\n    placement: \"rightTop\",\n    defaultVisible: visible,\n    visible: visible,\n    setVisible: setVisible,\n    arrow: true\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-bar-handle\"),\n    onClick: addOneRule\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_4__.Icon, {\n    prefix: \"designericon\",\n    type: \"tianjia3\",\n    style: {\n      fontSize: 12\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"span\", null, (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_5__.getLangMsg)('ruled.ruleContent.key0004')))) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"div\", {\n    className: classnames__WEBPACK_IMPORTED_MODULE_7___default()(\"\".concat(prefixCls, \"-bar-handle\"), {\n      disabled: !canAddRules\n    }),\n    onClick: addOneRule\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_4__.Icon, {\n    prefix: \"designericon\",\n    type: \"tianjia3\",\n    style: {\n      fontSize: 12\n    }\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default().createElement(\"span\", null, (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_5__.getLangMsg)('ruled.ruleContent.key0004')))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_3___default().createElement(_RuleList__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n    curSelectRuleTree: curSelectRuleTree,\n    prefixCls: prefixCls,\n    editId: editId,\n    data: data,\n    removeRule: removeRule,\n    setRule: setRule,\n    selectId: selectId,\n    editRule: editRule,\n    onSelect: ruleSelect\n  }));\n}\n/* harmony default export */ __webpack_exports__[\"default\"] = (RuleContent);\n\n//# sourceURL=webpack://rule-designer/./src/views/left-panel/component/RuleContent.tsx?");

/***/ }),

/***/ 1668:
/*!*****************************************************!*\
  !*** ./src/views/left-panel/component/RuleList.tsx ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/keys */ 47976);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols */ 39448);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/filter */ 18860);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor */ 55748);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/for-each */ 7312);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors */ 54120);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-properties */ 63808);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-property */ 45040);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/defineProperty */ 30112);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/array/is-array */ 12388);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/includes */ 82600);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ 75984);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! react */ 43400);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../context */ 90115);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! designer_base/Main */ 18040);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(designer_base_Main__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! lodash */ 67928);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var _RuleListItem__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./RuleListItem */ 27296);\n\n\n\n\n\n\n\n\n\n\n\n\nfunction ownKeys(e, r) { var t = _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0___default()(e); if ((_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1___default())) { var o = _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1___default()(e); r && (o = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_2___default()(o).call(o, function (r) { return _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_3___default()(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var _context, _context2; var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_4___default()(_context = ownKeys(Object(t), !0)).call(_context, function (r) { (0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(e, r, t[r]); }) : (_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5___default()) ? _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_6___default()(e, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_5___default()(t)) : _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_4___default()(_context2 = ownKeys(Object(t))).call(_context2, function (r) { _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_7___default()(e, r, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_3___default()(t, r)); }); } return e; }\n\n\n\n\n\nfunction RuleList(_ref) {\n  var prefixCls = _ref.prefixCls,\n    data = _ref.data,\n    removeRule = _ref.removeRule,\n    setRule = _ref.setRule,\n    editRule = _ref.editRule,\n    onSelect = _ref.onSelect,\n    selectId = _ref.selectId,\n    editId = _ref.editId,\n    curSelectRuleTree = _ref.curSelectRuleTree;\n  var _useContext = (0,react__WEBPACK_IMPORTED_MODULE_12__.useContext)(_context__WEBPACK_IMPORTED_MODULE_13__.DesignerContext),\n    getKdesignerApi = _useContext.getKdesignerApi,\n    isDragRule = _useContext.isDragRule,\n    ruleMetaInfo = _useContext.ruleMetaInfo;\n  var kdesignerApi = (0,react__WEBPACK_IMPORTED_MODULE_12__.useMemo)(function () {\n    return getKdesignerApi();\n  }, []);\n  var dataContext = kdesignerApi.data;\n  var _ref2 = ruleMetaInfo[0] || {},\n    lockRules = _ref2.lockRules;\n  var dragNodeRef = (0,react__WEBPACK_IMPORTED_MODULE_12__.useRef)(null);\n  var draggaleElementRef = (0,react__WEBPACK_IMPORTED_MODULE_12__.useRef)(null);\n  var createDraggableElement = function createDraggableElement(content) {\n    draggaleElementRef.current = document.createElement('div');\n    draggaleElementRef.current.classList.add('leftrule-li-dragelement');\n    draggaleElementRef.current.innerHTML = content;\n    document.body.appendChild(draggaleElementRef.current);\n    return draggaleElementRef.current;\n  };\n  var handleDragStart = function handleDragStart(e, node, index, daggable) {\n    if (!daggable) return;\n    dragNodeRef.current = _objectSpread(_objectSpread({}, node), {}, {\n      dragControlIndex: index\n    });\n\n    // IE不支持setDragImage，默认是拖拽元素的本身\n    if (e.dataTransfer.setDragImage) {\n      var cloneElement = createDraggableElement(node.Description || node.PreDescription);\n      e.dataTransfer.setDragImage(cloneElement, 140, 16);\n    }\n  };\n  var handleDragOver = (0,lodash__WEBPACK_IMPORTED_MODULE_15__.throttle)(function (e, index) {\n    e.preventDefault();\n  }, 100);\n  var addDragClass = function addDragClass(target, isPre) {\n    if (!target) return;\n    var element = target.querySelector('#drag');\n    element.classList.add(isPre ? 'drag-hover-up' : 'drag-hover-dowm');\n  };\n  var removeDragClass = function removeDragClass(target, isPre) {\n    if (!target) return;\n    var element = target.querySelector('#drag');\n    element.classList.remove(isPre ? 'drag-hover-up' : 'drag-hover-dowm');\n  };\n  var isSimpleLockType = function isSimpleLockType(targetNodeId, dragNodeId) {\n    if (!lockRules) return true;\n    var isSimpleLockType;\n    if (_babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_9___default()(lockRules)) {\n      isSimpleLockType = _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_10___default()(lockRules).call(lockRules, targetNodeId) === _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_10___default()(lockRules).call(lockRules, dragNodeId);\n    } else if (Object.prototype.toString.call(lockRules) === '[object Object]') {\n      isSimpleLockType = lockRules[targetNodeId] === lockRules[dragNodeId];\n    }\n    return isSimpleLockType;\n  };\n  var handleDragEnter = function handleDragEnter(e, node, index) {\n    var _ref3 = dragNodeRef.current || {},\n      dragControlIndex = _ref3.dragControlIndex,\n      Id = _ref3.Id;\n    if ((0,lodash__WEBPACK_IMPORTED_MODULE_15__.isUndefined)(dragControlIndex) || (0,lodash__WEBPACK_IMPORTED_MODULE_15__.isUndefined)(Id) || index === dragControlIndex || !isSimpleLockType(node.Id, Id)) return;\n    var isPre = index < dragControlIndex;\n    addDragClass(e.currentTarget, isPre);\n  };\n  var handleDragLeave = function handleDragLeave(e, index) {\n    var _ref4 = dragNodeRef.current || {},\n      dragControlIndex = _ref4.dragControlIndex;\n    if ((0,lodash__WEBPACK_IMPORTED_MODULE_15__.isUndefined)(dragControlIndex) || index === dragControlIndex) return;\n    var isPre = index < dragControlIndex;\n    removeDragClass(e.currentTarget, isPre);\n  };\n  var handleDrop = function handleDrop(e, node, index) {\n    e.preventDefault();\n    var _ref5 = dragNodeRef.current || {},\n      dragControlId = _ref5.Id,\n      dragControlIndex = _ref5.dragControlIndex;\n    if ((0,lodash__WEBPACK_IMPORTED_MODULE_15__.isUndefined)(dragControlIndex) || (0,lodash__WEBPACK_IMPORTED_MODULE_15__.isUndefined)(dragControlId) || dragControlId === node.Id || !isSimpleLockType(node.Id, dragControlId)) return;\n    // 相邻切换或者替换第一个\n    var isPre = index < dragControlIndex;\n    removeDragClass(e.currentTarget, isPre);\n    dataContext.insertControl((0,designer_base_Main__WEBPACK_IMPORTED_MODULE_14__.createInsertAction)({\n      originId: dragControlId,\n      targetId: node.Id,\n      isPre: isPre\n    }));\n    dragNodeRef.current = null;\n  };\n  var handleDragEnd = function handleDragEnd() {\n    document.body.removeChild(draggaleElementRef.current);\n    dragNodeRef.current = null;\n  };\n  return (data === null || data === void 0 ? void 0 : data.length) > 0 ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default().createElement(\"div\", {\n    className: \"leftrule-ul\",\n    onDragOver: function onDragOver(e) {\n      return e.preventDefault();\n    }\n  }, data && _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_11___default()(data).call(data, function (item, index) {\n    var _data, _data2;\n    var daggable = isDragRule(item.Id, (_data = data[index - 1]) === null || _data === void 0 ? void 0 : _data.Id, (_data2 = data[index + 1]) === null || _data2 === void 0 ? void 0 : _data2.Id);\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_12___default().createElement(_RuleListItem__WEBPACK_IMPORTED_MODULE_16__[\"default\"], {\n      prefixCls: prefixCls,\n      node: item,\n      key: item.Id,\n      removeRule: removeRule,\n      setRule: setRule,\n      editRule: editRule,\n      onSelect: onSelect,\n      selectId: selectId,\n      editId: editId,\n      isDaggble: daggable,\n      curSelectRuleTree: curSelectRuleTree,\n      onDrop: function onDrop(e) {\n        return handleDrop(e, item, index);\n      },\n      onDragStart: function onDragStart(e) {\n        return handleDragStart(e, item, index, daggable);\n      },\n      onDragEnter: function onDragEnter(e) {\n        return handleDragEnter(e, item, index);\n      },\n      onDragOver: function onDragOver(e) {\n        return handleDragOver(e, index);\n      },\n      onDragLeave: function onDragLeave(e) {\n        return handleDragLeave(e, index);\n      },\n      onDragEnd: handleDragEnd\n    });\n  })) : null;\n}\n/* harmony default export */ __webpack_exports__[\"default\"] = (/*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_12__.memo)(RuleList));\n\n//# sourceURL=webpack://rule-designer/./src/views/left-panel/component/RuleList.tsx?");

/***/ }),

/***/ 27296:
/*!*********************************************************!*\
  !*** ./src/views/left-panel/component/RuleListItem.tsx ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_corejs3_helpers_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/extends */ 2664);\n/* harmony import */ var _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/defineProperty */ 30112);\n/* harmony import */ var _babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/slicedToArray */ 95992);\n/* harmony import */ var _babel_runtime_corejs3_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/objectWithoutProperties */ 28220);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_trim__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/trim */ 52360);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_trim__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_trim__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react */ 43400);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @kdcloudjs/kdesign */ 54116);\n/* harmony import */ var _kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _assets_images_delete_png__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../assets/images/delete.png */ 14892);\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! classnames */ 71252);\n/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../utils */ 63612);\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../context */ 90115);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! designer_base/Main */ 18040);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(designer_base_Main__WEBPACK_IMPORTED_MODULE_11__);\n\n\n\n\nvar _excluded = [\"prefixCls\", \"node\", \"removeRule\", \"editRule\", \"setRule\", \"onSelect\", \"selectId\", \"editId\", \"curSelectRuleTree\", \"isDaggble\"];\n\n\n\n\n\n\n\n\nvar RULE_COPY = 'ruleCopy'; // 复制\nvar RULE_ENABLE = 'ruleEnable'; // 启用\nvar RULE_DELETE = 'ruleDelete'; // 删除\nvar RULE_EDIT = 'ruleEdit'; // 编辑\n\nfunction RuleListItem(_ref) {\n  var prefixCls = _ref.prefixCls,\n    node = _ref.node,\n    removeRule = _ref.removeRule,\n    editRule = _ref.editRule,\n    setRule = _ref.setRule,\n    onSelect = _ref.onSelect,\n    selectId = _ref.selectId,\n    editId = _ref.editId,\n    curSelectRuleTree = _ref.curSelectRuleTree,\n    isDaggble = _ref.isDaggble,\n    other = (0,_babel_runtime_corejs3_helpers_objectWithoutProperties__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(_ref, _excluded);\n  var _useContext = (0,react__WEBPACK_IMPORTED_MODULE_5__.useContext)(_context__WEBPACK_IMPORTED_MODULE_10__.DesignerContext),\n    isLockRule = _useContext.isLockRule;\n  var locked = isLockRule(node === null || node === void 0 ? void 0 : node.Id);\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_5__.useState)(''),\n    _useState2 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(_useState, 2),\n    opType = _useState2[0],\n    setOpType = _useState2[1];\n  var _useState3 = (0,react__WEBPACK_IMPORTED_MODULE_5__.useState)(node.Description || node.PreDescriptions),\n    _useState4 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(_useState3, 2),\n    text = _useState4[0],\n    setText = _useState4[1];\n  var inputRef = (0,react__WEBPACK_IMPORTED_MODULE_5__.useRef)(null);\n\n  /**\n   * 输入框的事件\n   */\n  var onChange = (0,react__WEBPACK_IMPORTED_MODULE_5__.useCallback)(function (event) {\n    var _context;\n    setText(_babel_runtime_corejs3_core_js_stable_instance_trim__WEBPACK_IMPORTED_MODULE_4___default()(_context = event.target.value).call(_context));\n  }, []);\n\n  /**\n   * 输入框的失去焦点\n   */\n  var onBlur = function onBlur(event) {\n    var _event$target;\n    var value = (_event$target = event.target) === null || _event$target === void 0 || (_event$target = _event$target.value) === null || _event$target === void 0 ? void 0 : _babel_runtime_corejs3_core_js_stable_instance_trim__WEBPACK_IMPORTED_MODULE_4___default()(_event$target).call(_event$target);\n    setOpType('');\n    editRule(node, value || (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_11__.getLangMsg)('ruled.ruleListItem.key0008'));\n  };\n\n  /**\n   * 输入框的回车\n   */\n  var onKeyUp = function onKeyUp(event) {\n    if (event.keyCode === 13) {\n      onBlur(event);\n    }\n  };\n\n  /***\n   * 删除前的确定事件\n   */\n  var onConfirm = (0,react__WEBPACK_IMPORTED_MODULE_5__.useCallback)(function () {\n    var bodyStyle = {\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n      flexDirection: 'column'\n    };\n    var footerStyle = {\n      alignItems: 'start'\n    };\n    var body = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default().createElement((react__WEBPACK_IMPORTED_MODULE_5___default().Fragment), null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default().createElement(\"img\", {\n      src: _assets_images_delete_png__WEBPACK_IMPORTED_MODULE_7__[\"default\"]\n    }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default().createElement(\"span\", {\n      style: {\n        textAlign: 'center',\n        marginTop: 12\n      }\n    }, (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_11__.getLangMsg)('ruled.ruleListItem.key0009')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default().createElement(\"span\", {\n      style: {\n        textAlign: 'center',\n        marginTop: 5\n      }\n    }, (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_11__.getLangMsg)('ruled.ruleListItem.key0010')));\n    _kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_6__.Modal.confirm({\n      title: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_11__.getLangMsg)('ruled.ruleListItem.key0002'),\n      cancelText: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_11__.getLangMsg)('ruled.ruleListItem.key0003'),\n      okText: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_11__.getLangMsg)('ruled.ruleListItem.key0004'),\n      body: body,\n      bodyStyle: bodyStyle,\n      footerStyle: footerStyle,\n      onOk: function onOk() {\n        removeRule && removeRule(node);\n      }\n    });\n  }, [node]);\n  /**\n   * 设置启用\n   */\n  var setcurentRule = (0,react__WEBPACK_IMPORTED_MODULE_5__.useCallback)(function () {\n    setRule && setRule(node);\n  }, [node]);\n\n  /**\n   * 节点选中\n   */\n  var onLiSelect = function onLiSelect(e) {\n    var _e$currentTarget;\n    if (e.target && !((_e$currentTarget = e.currentTarget) !== null && _e$currentTarget !== void 0 && _e$currentTarget.contains(e.target))) {\n      return;\n    }\n    if (selectId === node.Id) {\n      return;\n    }\n\n    // 选中状态下，再次点击会进入编辑状态\n    onSelect && onSelect(node);\n  };\n\n  /**\n   * 双击编辑\n   */\n  var handleDoubleClick = function handleDoubleClick(e) {\n    var _e$currentTarget2;\n    if (locked || e.target && !((_e$currentTarget2 = e.currentTarget) !== null && _e$currentTarget2 !== void 0 && _e$currentTarget2.contains(e.target))) {\n      return;\n    }\n    // 选中状态下，再次点击会进入编辑状态\n    if (selectId === node.Id) {\n      setOpType(RULE_EDIT);\n    }\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_5__.useEffect)(function () {\n    if (editId === node.Id) {\n      setOpType(RULE_EDIT);\n    }\n  }, [editId]);\n  (0,react__WEBPACK_IMPORTED_MODULE_5__.useEffect)(function () {\n    if (opType === RULE_EDIT) {\n      var inputDom = inputRef.current;\n      if (!inputDom) return;\n      inputDom.focus();\n      inputDom.select();\n    }\n  }, [opType]);\n  (0,react__WEBPACK_IMPORTED_MODULE_5__.useEffect)(function () {\n    setText(node.Description || node.PreDescription);\n  }, [node.Description, node.PreDescription]);\n  var handleItemClick = function handleItemClick(key) {\n    switch (key) {\n      case RULE_ENABLE:\n        setcurentRule();\n        break;\n      case RULE_COPY:\n        break;\n      case RULE_DELETE:\n        onConfirm();\n        break;\n      default:\n    }\n  };\n  var ruleToolMenu = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_6__.Dropdown.Menu, {\n    onClick: handleItemClick\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_6__.Dropdown.Item, {\n    className: \"leftrule-li-dropdowm-item\",\n    key: RULE_ENABLE,\n    disabled: (0,_utils__WEBPACK_IMPORTED_MODULE_9__.existEnableTreeNode)(curSelectRuleTree)\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default().createElement((react__WEBPACK_IMPORTED_MODULE_5___default().Fragment), null, (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_11__.getLangMsg)('ruled.ruleListItem.key0005'), node.Enabled && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_6__.Icon, {\n    prefix: \"designericon\",\n    type: \"shuzhankaibeifen\",\n    className: \"leftrule-li-dropdowm-item-right\"\n  }))), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_6__.Dropdown.Item, {\n    className: \"leftrule-li-dropdowm-item\",\n    key: RULE_DELETE\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default().createElement(\"span\", null, (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_11__.getLangMsg)('ruled.ruleListItem.key0004'))));\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default().createElement(\"div\", (0,_babel_runtime_corejs3_helpers_extends__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({\n    draggable: opType !== RULE_EDIT && isDaggble,\n    className: classnames__WEBPACK_IMPORTED_MODULE_8___default()((0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({\n      'leftrule-li': true,\n      selected: selectId === node.Id\n    }, opType, true)),\n    onClick: onLiSelect\n  }, other), !locked && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_6__.Icon, {\n    prefix: \"designericon\",\n    type: \"tuozhuailiebiao\",\n    className: \"leftrule-li-text-dragIcon\"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default().createElement(\"div\", {\n    className: \"leftrule-li-text\",\n    id: \"drag\",\n    title: !locked && selectId === node.Id ? (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_11__.getLangMsg)('ruled.ruleListItem.key0006') : '',\n    onDoubleClick: handleDoubleClick\n  }, opType !== RULE_EDIT || locked ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default().createElement((react__WEBPACK_IMPORTED_MODULE_5___default().Fragment), null, node.Description || node.PreDescription) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default().createElement(\"input\", {\n    ref: inputRef,\n    onChange: onChange,\n    onKeyUp: onKeyUp,\n    onBlur: onBlur,\n    value: text,\n    placeholder: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_11__.getLangMsg)('ruled.ruleListItem.key0007')\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default().createElement(\"div\", {\n    className: classnames__WEBPACK_IMPORTED_MODULE_8___default()('leftrule-li-status', {\n      disabled: locked\n    })\n  }, node.Enabled && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_6__.Icon, {\n    prefix: \"designericon\",\n    type: \"shuzhankaibeifen\",\n    className: \"leftrule-li-status-right\"\n  }), !locked && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_6__.Dropdown, {\n    placement: \"bottomRight\",\n    popperClassName: \"leftrule-li-dropdowm\",\n    scrollHidden: true,\n    trigger: \"click\",\n    menu: ruleToolMenu,\n    onClick: function onClick(e) {\n      return e.stopPropagation();\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_5___default().createElement(\"span\", {\n    className: \"leftrule-li-status-btn\"\n  }, \"\\xB7\\xB7\\xB7\")))));\n}\n/* harmony default export */ __webpack_exports__[\"default\"] = (/*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_5__.memo)(RuleListItem));\n\n//# sourceURL=webpack://rule-designer/./src/views/left-panel/component/RuleListItem.tsx?");

/***/ }),

/***/ 67628:
/*!*****************************************************!*\
  !*** ./src/views/left-panel/component/RuleTree.tsx ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/slicedToArray */ 95992);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ 43400);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @kdcloudjs/kdesign */ 54116);\n/* harmony import */ var _kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash */ 67928);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\nfunction RuleTree(_ref) {\n  var data = _ref.data,\n    selectid = _ref.selectid,\n    ruleList = _ref.ruleList,\n    onSelect = _ref.onSelect;\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]),\n    _useState2 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useState, 2),\n    expandedKeys = _useState2[0],\n    setExpandedKeys = _useState2[1];\n  var _useState3 = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([selectid]),\n    _useState4 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useState3, 2),\n    selectedKeys = _useState4[0],\n    setSelectedKeys = _useState4[1];\n  var _useState5 = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(data),\n    _useState6 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useState5, 2),\n    treeData = _useState6[0],\n    setTreeData = _useState6[1];\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(function () {\n    if (!(0,lodash__WEBPACK_IMPORTED_MODULE_3__.isEqual)(data, treeData)) {\n      setTreeData(data);\n    }\n  }, [data]);\n  var onTreeSelect = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(function (key, props) {\n    setSelectedKeys(key);\n    onSelect && onSelect(key, ruleList, props);\n  }, [ruleList]);\n  var onExpand = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(function (keys) {\n    setExpandedKeys(keys);\n  }, []);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(function () {\n    setSelectedKeys([selectid]);\n  }, [selectid]);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", {\n    className: \"ruleTree\",\n    style: {\n      display: 'flex',\n      flexDirection: 'column'\n    }\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_2__.Tree, {\n    name: \"ruleTree\",\n    treeData: treeData,\n    defaultExpandAll: true,\n    virtual: false,\n    expandedKeys: expandedKeys,\n    selectedKeys: selectedKeys,\n    onExpand: onExpand,\n    onSelect: onTreeSelect,\n    classsName: \"ruleTree\",\n    showIcon: true\n  }));\n}\n/* harmony default export */ __webpack_exports__[\"default\"] = (RuleTree);\n\n//# sourceURL=webpack://rule-designer/./src/views/left-panel/component/RuleTree.tsx?");

/***/ }),

/***/ 90220:
/*!****************************************!*\
  !*** ./src/views/left-panel/index.tsx ***!
  \****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/keys */ 47976);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols */ 39448);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor */ 55748);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors */ 54120);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-properties */ 63808);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-property */ 45040);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/slicedToArray */ 95992);\n/* harmony import */ var _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/defineProperty */ 30112);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/array/is-array */ 12388);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/concat */ 81744);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ 75984);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/for-each */ 7312);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/find */ 47332);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/includes */ 82600);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/filter */ 18860);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_set_timeout__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/set-timeout */ 13760);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_set_timeout__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_set_timeout__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! react */ 43400);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_16__);\n/* harmony import */ var _component_RuleContent__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./component/RuleContent */ 79688);\n/* harmony import */ var _component_RuleTree__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./component/RuleTree */ 67628);\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../context */ 90115);\n/* harmony import */ var _api__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./api */ 10340);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! designer_base/Main */ 18040);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_21___default = /*#__PURE__*/__webpack_require__.n(designer_base_Main__WEBPACK_IMPORTED_MODULE_21__);\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../utils */ 63612);\n/* harmony import */ var _utils_treeUtils__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../utils/treeUtils */ 31340);\n/* harmony import */ var _kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @kdcloudjs/kdesign */ 54116);\n/* harmony import */ var _kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_24___default = /*#__PURE__*/__webpack_require__.n(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_24__);\n/* harmony import */ var _index_less__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./index.less */ 13128);\n/* harmony import */ var _index_less__WEBPACK_IMPORTED_MODULE_25___default = /*#__PURE__*/__webpack_require__.n(_index_less__WEBPACK_IMPORTED_MODULE_25__);\n\n\n\n\n\n\n\n\nfunction ownKeys(e, r) { var t = _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0___default()(e); if ((_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1___default())) { var o = _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1___default()(e); r && (o = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_8___default()(o).call(o, function (r) { return _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2___default()(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var _context3, _context4; var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_9___default()(_context3 = ownKeys(Object(t), !0)).call(_context3, function (r) { (0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(e, r, t[r]); }) : (_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_3___default()) ? _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_4___default()(e, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_3___default()(t)) : _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_9___default()(_context4 = ownKeys(Object(t))).call(_context4, function (r) { _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_5___default()(e, r, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_2___default()(t, r)); }); } return e; }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n *拿到所有的规则\n * @param ruleTree\n * @returns\n */\nfunction getRuleList(ruleTree, metaType) {\n  var ruleList = [];\n  if (ruleTree) {\n    var _loop = function _loop() {\n      var _context, _node$rulesKey2;\n      var node = ruleTree[i];\n      var rulesKey = (0,_utils__WEBPACK_IMPORTED_MODULE_22__.getRulesKey)(node === null || node === void 0 ? void 0 : node.type, metaType);\n      if (node[rulesKey] && _babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_10___default()(node[rulesKey])) {\n        var _node$rulesKey;\n        ruleList = _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_11___default()(ruleList).call(ruleList, (_node$rulesKey = node[rulesKey]) === null || _node$rulesKey === void 0 ? void 0 : _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_12___default()(_node$rulesKey).call(_node$rulesKey, function (item) {\n          return _objectSpread(_objectSpread({}, item), {}, {\n            parentId: node.Id\n          });\n        }));\n      }\n      node.title = _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_11___default()(_context = \"\".concat(node.title, \"(\")).call(_context, ((_node$rulesKey2 = node[rulesKey]) === null || _node$rulesKey2 === void 0 ? void 0 : _node$rulesKey2.length) || 0, \")\");\n      var result = getRuleList(ruleTree[i].children, metaType);\n      ruleList = _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_11___default()(ruleList).call(ruleList, result.list);\n    };\n    for (var i = 0; i < ruleTree.length; i++) {\n      _loop();\n    }\n  }\n  return {\n    list: ruleList\n  };\n}\n\n// 是针对单据、基础资料的单据体、卡片节点的页面规则，需要绑定实体，未绑定实体就无法添加规则\nvar formmetaNodeTypes = ['EntryAp', 'CardEntryAp'];\nvar transformTreeData = function transformTreeData(ruleTree, entityData, metaType) {\n  _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_9___default()(ruleTree).call(ruleTree, function (item) {\n    var entityNode = _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_13___default()(entityData).call(entityData, function (entity) {\n      return entity.Id === item.data;\n    });\n    item.disabled = !entityNode;\n    item.title = item.text;\n    if (entityNode) {\n      // 适应后端返回来的数据\n      item.Id = entityNode.Id;\n      item.key = entityNode.Id; // 树控件需要提供这个\n      item.title = entityNode.Name || item.text;\n      item.parentid = entityNode.ParentId;\n      if (metaType === 'formmeta' && _babel_runtime_corejs3_core_js_stable_instance_includes__WEBPACK_IMPORTED_MODULE_14___default()(formmetaNodeTypes).call(formmetaNodeTypes, entityNode._Type_) && !entityNode.EntryId) {\n        item.icon = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_16___default().createElement(RenderEntityIcon, null);\n        item.disabled = true;\n        item.showIcon = true;\n      }\n      var rulesKey = (0,_utils__WEBPACK_IMPORTED_MODULE_22__.getRulesKey)(entityNode._Type_, metaType);\n      item[rulesKey] = _babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_10___default()(entityNode[rulesKey]) ? entityNode[rulesKey] : [];\n    }\n    if (item.children) {\n      item.children = transformTreeData(item.children, entityData, metaType);\n    }\n  });\n  return ruleTree;\n};\nfunction RenderEntityIcon() {\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_16___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_24__.Tooltip, {\n    placement: \"right\",\n    tip: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_21__.getLangMsg)('ruled.leftPanel.key0001')\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_16___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_24__.Icon, {\n    style: {\n      zIndex: 1\n    },\n    prefix: \"designericon\",\n    type: \"bangdingfenlushiti\"\n  }));\n}\nfunction Left(props) {\n  var setActiveRuleNodeId = props.setActiveRuleNodeId,\n    getPrefixCls = props.getPrefixCls,\n    prefixCls = props.prefixCls,\n    getKdesignerApi = props.getKdesignerApi,\n    ruleMetaInfo = props.ruleMetaInfo,\n    getRulesNodes = props.getRulesNodes,\n    activeRuleId = props.activeRuleId,\n    setActiveRuleId = props.setActiveRuleId,\n    getRulesLocked = props.getRulesLocked;\n  var kdesignerApi = getKdesignerApi();\n  var dataApi = kdesignerApi.data;\n  var selectionApi = kdesignerApi.selection;\n  var rootClass = getPrefixCls && getPrefixCls(prefixCls, 'leftrule');\n  var _ref = (ruleMetaInfo === null || ruleMetaInfo === void 0 ? void 0 : ruleMetaInfo[0]) || {},\n    metaType = _ref.metaType,\n    rulesTree = _ref.rulesTree,\n    showRule = _ref.showRule;\n  // 上边的树\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_16__.useState)([]),\n    _useState2 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(_useState, 2),\n    ruleTree = _useState2[0],\n    setRuleTree = _useState2[1];\n  var _useState3 = (0,react__WEBPACK_IMPORTED_MODULE_16__.useState)(),\n    _useState4 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(_useState3, 2),\n    ruleTreeSelectId = _useState4[0],\n    setRuleTreeSelectId = _useState4[1];\n  var _useState5 = (0,react__WEBPACK_IMPORTED_MODULE_16__.useState)(),\n    _useState6 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(_useState5, 2),\n    ruleListEditId = _useState6[0],\n    setRuleListEditId = _useState6[1];\n  // 下面的列表\n  var _useState7 = (0,react__WEBPACK_IMPORTED_MODULE_16__.useState)([]),\n    _useState8 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(_useState7, 2),\n    ruleList = _useState8[0],\n    setRuleList = _useState8[1];\n  var _useState9 = (0,react__WEBPACK_IMPORTED_MODULE_16__.useState)(false),\n    _useState10 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(_useState9, 2),\n    canAddRules = _useState10[0],\n    setCanAddRules = _useState10[1];\n  var allRuleListRef = (0,react__WEBPACK_IMPORTED_MODULE_16__.useRef)([]);\n  var preRuleTreeSelectIdRef = (0,react__WEBPACK_IMPORTED_MODULE_16__.useRef)(ruleTreeSelectId);\n  var curSelectRuleTreeRef = (0,react__WEBPACK_IMPORTED_MODULE_16__.useRef)();\n  (0,react__WEBPACK_IMPORTED_MODULE_16__.useEffect)(function () {\n    preRuleTreeSelectIdRef.current = ruleTreeSelectId;\n  }, [ruleTreeSelectId]);\n  (0,react__WEBPACK_IMPORTED_MODULE_16__.useEffect)(function () {\n    var _getRuleList, _newRuleList;\n    var entityData = getRulesNodes();\n    var newData = transformTreeData((0,_utils_treeUtils__WEBPACK_IMPORTED_MODULE_23__.toArrayTree)(rulesTree), entityData, metaType);\n    var selectDefaultTreeNode = {};\n    var treeSelectId = '';\n    if (showRule !== null && showRule !== void 0 && showRule.entityId) {\n      selectDefaultTreeNode = _babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_10___default()(newData) ? _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_13___default()(newData).call(newData, function (item) {\n        return item.Id === showRule.entityId;\n      }) : {};\n      treeSelectId = showRule.entityId;\n    } else {\n      var _selectDefaultTreeNod, _selectDefaultTreeNod2;\n      selectDefaultTreeNode = _babel_runtime_corejs3_core_js_stable_array_is_array__WEBPACK_IMPORTED_MODULE_10___default()(newData) ? newData[0] : {};\n      treeSelectId = !((_selectDefaultTreeNod = selectDefaultTreeNode) !== null && _selectDefaultTreeNod !== void 0 && _selectDefaultTreeNod.disabled) ? (_selectDefaultTreeNod2 = selectDefaultTreeNode) === null || _selectDefaultTreeNod2 === void 0 ? void 0 : _selectDefaultTreeNod2.Id : '';\n    }\n    if (treeSelectId) {\n      curSelectRuleTreeRef.current = selectDefaultTreeNode;\n      setRuleTreeSelectId(treeSelectId);\n      setActiveRuleNodeId(treeSelectId);\n      // 获取当前实体的规则列表是否可以新增\n      var _canAddRules = !getRulesLocked(treeSelectId);\n      setCanAddRules(_canAddRules);\n    }\n    var newRuleList = (_getRuleList = getRuleList(newData, metaType)) === null || _getRuleList === void 0 ? void 0 : _getRuleList.list;\n    allRuleListRef.current = newRuleList;\n    newRuleList = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_8___default()(newRuleList).call(newRuleList, function (item) {\n      return item.parentId === treeSelectId;\n    });\n    setRuleTree(newData);\n    setRuleList(newRuleList);\n    var activeRuleId = ((_newRuleList = newRuleList) === null || _newRuleList === void 0 ? void 0 : _newRuleList.length) > 0 ? newRuleList[0].Id : '';\n    selectConditionNode((showRule === null || showRule === void 0 ? void 0 : showRule.ruleId) || activeRuleId);\n    setActiveRuleId((showRule === null || showRule === void 0 ? void 0 : showRule.ruleId) || activeRuleId);\n  }, []);\n  (0,react__WEBPACK_IMPORTED_MODULE_16__.useEffect)(function () {\n    var dataChangeListenerCallback = function dataChangeListenerCallback() {\n      // 和主视图订阅更新存在先后问题，有可能props.getRulesNodes()还是旧的值\n      // 因此这里使用setTimeOut\n      _babel_runtime_corejs3_core_js_stable_set_timeout__WEBPACK_IMPORTED_MODULE_15___default()(function () {\n        reload();\n      });\n    };\n    var removeDataChangeListener = dataApi.addDataChangeListener(dataChangeListenerCallback);\n    return function () {\n      removeDataChangeListener();\n    };\n  }, []);\n\n  /**\n   * 数据刷新\n   */\n  var reload = function reload() {\n    var entityData = getRulesNodes();\n    var newData = transformTreeData((0,_utils_treeUtils__WEBPACK_IMPORTED_MODULE_23__.toArrayTree)(rulesTree), entityData, metaType);\n    // 全部的规则列表\n    var resultList = getRuleList(newData, metaType).list;\n    allRuleListRef.current = resultList;\n    console.log('preRuleTreeSelectIdRef', preRuleTreeSelectIdRef.current);\n    resultList = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_8___default()(resultList).call(resultList, function (item) {\n      return item.parentId === preRuleTreeSelectIdRef.current;\n    });\n\n    // 写在下面，因为上一行代码会统计规则个数\n    setRuleTree(newData);\n    setRuleList(resultList);\n  };\n  var selectConditionNode = function selectConditionNode(parentId) {\n    var data = dataApi.getData().Items; // 得到当前所有规则数组\n    var conditionNode = _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_13___default()(data).call(data, function (item) {\n      return item.Type === 'ConditionNode' && item.ParentId === parentId;\n    });\n    if (conditionNode) {\n      selectionApi.setSelect([conditionNode.Id]);\n    } else {\n      selectionApi.setSelect(parentId ? [parentId] : []);\n    }\n  };\n\n  /**\n   * 添加\n   */\n  var addRule = (0,react__WEBPACK_IMPORTED_MODULE_16__.useCallback)(function (Description) {\n    var data = dataApi.getData().Items; // 得到当前所有规则数组\n    var RuleRoot = _babel_runtime_corejs3_core_js_stable_instance_find__WEBPACK_IMPORTED_MODULE_13___default()(data).call(data, function (item) {\n      return item.Type === 'RuleRoot';\n    }); // 找到根节点\n    if (RuleRoot) {\n      var _curSelectRuleTreeRef;\n      var isExistFalseNode = (0,_utils__WEBPACK_IMPORTED_MODULE_22__.existFalseNode)((_curSelectRuleTreeRef = curSelectRuleTreeRef.current) === null || _curSelectRuleTreeRef === void 0 ? void 0 : _curSelectRuleTreeRef.type);\n      (0,_api__WEBPACK_IMPORTED_MODULE_20__.addOneRule)(Description, RuleRoot.Id, ruleTreeSelectId, dataApi.addControl, isExistFalseNode).then(function (result) {\n        var _result$;\n        if ((_result$ = result[0]) !== null && _result$ !== void 0 && (_result$ = _result$.value[0]) !== null && _result$ !== void 0 && _result$.Id) {\n          selectConditionNode(result[0].value[0].Id);\n          setActiveRuleId(result[0].value[0].Id);\n          setRuleListEditId(result[0].value[0].Id);\n        }\n      });\n    }\n  }, [props, curSelectRuleTreeRef]);\n\n  /**\n   * 编辑\n   */\n  var editRule = (0,react__WEBPACK_IMPORTED_MODULE_16__.useCallback)(function (rule, Description) {\n    (0,_api__WEBPACK_IMPORTED_MODULE_20__.editRuleDesc)(rule.Id, Description, dataApi.batchUpdateControlPropertyValues);\n  }, [props]);\n\n  /**\n   * 设置启用与禁用\n   */\n  var setRule = (0,react__WEBPACK_IMPORTED_MODULE_16__.useCallback)(function (rule) {\n    (0,_api__WEBPACK_IMPORTED_MODULE_20__.setRuleEnabled)(rule.Id, !rule.Enabled, dataApi.batchUpdateControlPropertyValues);\n  }, [props]);\n  /**\n   * 删除\n   */\n  var removeRule = (0,react__WEBPACK_IMPORTED_MODULE_16__.useCallback)(function (rule) {\n    selectionApi.setSelect([]);\n    (0,_api__WEBPACK_IMPORTED_MODULE_20__.removeOneRule)(rule.Id, dataApi.deleteControl).then(function (result) {\n      // const deleteRuleId = result[0]?.value[0]\n\n      // if (deleteRuleId !== activeRuleId) return\n\n      // if (ruleList) {\n      //   const index = ruleList.findIndex(item => item.Id === deleteRuleId)\n      //   let nextSelectRule: any = ''\n      //   if (index > 0) {\n      //     // 现在删除的是第四条规则，则删除后，默认定位到第三条规则上，删除后会有一个默认定位应该是删除规则临近的上一个\n      //     nextSelectRule = ruleList[index - 1]\n      //   } else {\n      //     // 没有的话那么找第一个\n      //     const newRuleList = ruleList.filter(item => item.Id !== deleteRuleId)\n      //     if (newRuleList?.length > 0) {\n      //       nextSelectRule = newRuleList[0]\n      //     }\n      //   }\n\n      //   const nextActiveRuleId = nextSelectRule ? nextSelectRule.Id : ''\n      //   setActiveRuleId(nextActiveRuleId)\n      //   selectConditionNode(nextActiveRuleId)\n      // }\n    });\n  }, [props, ruleList]);\n\n  /**\n   * 规则树点击事件\n   */\n  var onTreeSelect = (0,react__WEBPACK_IMPORTED_MODULE_16__.useCallback)(function (value, ruleList, props) {\n    var _context2;\n    // 得到当前节点下的规则\n    setRuleTreeSelectId(value[0]);\n    setActiveRuleNodeId(value[0]);\n    setRuleListEditId('');\n    curSelectRuleTreeRef.current = props === null || props === void 0 ? void 0 : props.node;\n    var newruleList = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_8___default()(_context2 = allRuleListRef.current).call(_context2, function (item) {\n      return item.parentId === value[0];\n    });\n    var selectDefaultRuleId = newruleList && newruleList.length > 0 ? newruleList[0].Id : '';\n    // selectionApi.setSelect(selectDefaultRuleId ? [selectDefaultRuleId] : [])\n\n    selectConditionNode(selectDefaultRuleId);\n    setActiveRuleId(selectDefaultRuleId);\n    setRuleList(newruleList);\n    // 获取当前实体的规则列表是否可以新增\n    var canAddRules = !getRulesLocked(value[0]);\n    setCanAddRules(canAddRules);\n  }, [allRuleListRef.current]);\n\n  /**\n   * 规则列表的单击事件\n   */\n  var onRuleSelect = (0,react__WEBPACK_IMPORTED_MODULE_16__.useCallback)(function (node) {\n    selectConditionNode(node.Id);\n    setActiveRuleId(node.Id);\n  }, [props]);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_16___default().createElement(\"div\", {\n    className: rootClass\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_16___default().createElement(\"div\", {\n    className: \"\".concat(rootClass, \"-panel\")\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_16___default().createElement(_component_RuleTree__WEBPACK_IMPORTED_MODULE_18__[\"default\"], {\n    data: ruleTree,\n    ruleList: ruleList,\n    selectid: ruleTreeSelectId,\n    onSelect: onTreeSelect\n  })), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_16___default().createElement(\"div\", {\n    className: \"\".concat(rootClass, \"-panel\")\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_16___default().createElement(_component_RuleContent__WEBPACK_IMPORTED_MODULE_17__[\"default\"], {\n    prefixCls: rootClass,\n    data: ruleList,\n    selectId: activeRuleId,\n    editId: ruleListEditId,\n    addRule: addRule,\n    canAddRules: canAddRules,\n    editRule: editRule,\n    setRule: setRule,\n    removeRule: removeRule,\n    ruleSelect: onRuleSelect,\n    ruleTreeSelectId: ruleTreeSelectId,\n    allRuleList: allRuleListRef.current,\n    curSelectRuleTree: curSelectRuleTreeRef.current\n  })));\n}\nfunction LeftContainer() {\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_16___default().createElement(_context__WEBPACK_IMPORTED_MODULE_19__.DesignerContext.Consumer, null, function (value) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_16___default().createElement(Left, value);\n  });\n}\nLeftContainer.tabKey = 'leftTree';\nLeftContainer.tabName = '';\n/* harmony default export */ __webpack_exports__[\"default\"] = (LeftContainer);\n\n//# sourceURL=webpack://rule-designer/./src/views/left-panel/index.tsx?");

/***/ }),

/***/ 67328:
/*!*********************************!*\
  !*** ./src/views/main-view.tsx ***!
  \*********************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/keys */ 47976);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols */ 39448);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/filter */ 18860);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor */ 55748);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors */ 54120);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-properties */ 63808);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/object/define-property */ 45040);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _babel_runtime_corejs3_helpers_extends__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/extends */ 2664);\n/* harmony import */ var _babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/defineProperty */ 30112);\n/* harmony import */ var _babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/toConsumableArray */ 30260);\n/* harmony import */ var _babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/slicedToArray */ 95992);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/for-each */ 7312);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_reduce__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/reduce */ 45076);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_reduce__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_reduce__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/concat */ 81744);\n/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! react */ 43400);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! designer_base/Main */ 18040);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(designer_base_Main__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var react_flow_renderer__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! react-flow-renderer */ 98752);\n/* harmony import */ var _controls_RuleNode__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../controls/RuleNode */ 45408);\n/* harmony import */ var _controls_ConditionNode__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../controls/ConditionNode */ 284);\n/* harmony import */ var _controls_JudgeNode__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../controls/JudgeNode */ 62796);\n/* harmony import */ var _controls_TFNode__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../controls/TFNode */ 13948);\n/* harmony import */ var _controls_ActionNode__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../controls/ActionNode */ 11176);\n/* harmony import */ var _controls_EndNode__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../controls/EndNode */ 86716);\n/* harmony import */ var _controls_AddNode__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../controls/AddNode */ 53620);\n/* harmony import */ var dagre__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! dagre */ 84912);\n/* harmony import */ var dagre__WEBPACK_IMPORTED_MODULE_24___default = /*#__PURE__*/__webpack_require__.n(dagre__WEBPACK_IMPORTED_MODULE_24__);\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../context */ 90115);\n/* harmony import */ var _utils_convert_data__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../utils/convert-data */ 13908);\n/* harmony import */ var _nav_toolbar_view__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./nav-toolbar-view */ 73244);\n/* harmony import */ var _utils_layout__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ../utils/layout */ 21920);\n/* harmony import */ var _utils_index__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ../utils/index */ 63612);\n/* harmony import */ var _hooks_useKeyboardEvent__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ../hooks/useKeyboardEvent */ 87060);\n/* harmony import */ var _assets_images_no_rules_png__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ../../assets/images/no-rules.png */ 52836);\n\n\n\n\n\n\n\n\n\n\n\nfunction ownKeys(e, r) { var t = _babel_runtime_corejs3_core_js_stable_object_keys__WEBPACK_IMPORTED_MODULE_0___default()(e); if ((_babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1___default())) { var o = _babel_runtime_corejs3_core_js_stable_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_1___default()(e); r && (o = _babel_runtime_corejs3_core_js_stable_instance_filter__WEBPACK_IMPORTED_MODULE_2___default()(o).call(o, function (r) { return _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_3___default()(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var _context3, _context4; var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_11___default()(_context3 = ownKeys(Object(t), !0)).call(_context3, function (r) { (0,_babel_runtime_corejs3_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(e, r, t[r]); }) : (_babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_4___default()) ? _babel_runtime_corejs3_core_js_stable_object_define_properties__WEBPACK_IMPORTED_MODULE_5___default()(e, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptors__WEBPACK_IMPORTED_MODULE_4___default()(t)) : _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_11___default()(_context4 = ownKeys(Object(t))).call(_context4, function (r) { _babel_runtime_corejs3_core_js_stable_object_define_property__WEBPACK_IMPORTED_MODULE_6___default()(e, r, _babel_runtime_corejs3_core_js_stable_object_get_own_property_descriptor__WEBPACK_IMPORTED_MODULE_3___default()(t, r)); }); } return e; }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar CUSTOM_NODES = {\n  RuleNode: _controls_RuleNode__WEBPACK_IMPORTED_MODULE_17__[\"default\"],\n  ConditionNode: _controls_ConditionNode__WEBPACK_IMPORTED_MODULE_18__[\"default\"],\n  JudgeNode: _controls_JudgeNode__WEBPACK_IMPORTED_MODULE_19__[\"default\"],\n  TrueNode: _controls_TFNode__WEBPACK_IMPORTED_MODULE_20__.TrueNode,\n  FalseNode: _controls_TFNode__WEBPACK_IMPORTED_MODULE_20__.FalseNode,\n  EndNode: _controls_EndNode__WEBPACK_IMPORTED_MODULE_22__[\"default\"],\n  ActionNode: _controls_ActionNode__WEBPACK_IMPORTED_MODULE_21__[\"default\"],\n  AddNode: _controls_AddNode__WEBPACK_IMPORTED_MODULE_23__[\"default\"]\n};\nvar EmptyView = function EmptyView(_ref) {\n  var prefixCls = _ref.prefixCls;\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_14___default().createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-empty\")\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_14___default().createElement(\"img\", {\n    src: _assets_images_no_rules_png__WEBPACK_IMPORTED_MODULE_31__[\"default\"],\n    alt: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_15__.getLangMsg)('ruled.mainView.key0001'),\n    width: \"168\",\n    height: \"96\"\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_14___default().createElement(\"p\", null, (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_15__.getLangMsg)('ruled.mainView.key0002')), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_14___default().createElement(\"p\", null, (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_15__.getLangMsg)('ruled.mainView.key0003')));\n};\nvar MainView = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_14__.memo)(function (props) {\n  var _useContext = (0,react__WEBPACK_IMPORTED_MODULE_14__.useContext)(_context__WEBPACK_IMPORTED_MODULE_25__.DesignerContext),\n    getKdesignerApi = _useContext.getKdesignerApi,\n    getPrefixCls = _useContext.getPrefixCls,\n    prefixCls = _useContext.prefixCls,\n    activeRuleId = _useContext.activeRuleId,\n    activeRuleNodeId = _useContext.activeRuleNodeId,\n    isLockRule = _useContext.isLockRule;\n  var kdesignerApi = getKdesignerApi();\n  var dataApi = kdesignerApi.data;\n  var selectionApi = kdesignerApi.selection;\n  var locked = isLockRule();\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_14__.useState)([]),\n    _useState2 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_10__[\"default\"])(_useState, 2),\n    layoutElements = _useState2[0],\n    setlayoutElements = _useState2[1];\n  var _useState3 = (0,react__WEBPACK_IMPORTED_MODULE_14__.useState)(false),\n    _useState4 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_10__[\"default\"])(_useState3, 2),\n    isNodeRuleEmpty = _useState4[0],\n    setIsNodeRuleEmpty = _useState4[1];\n  var flowViewPrefix = getPrefixCls && getPrefixCls(prefixCls, 'flow-view');\n\n  // reactflow viewport信息\n  var viewPort = (0,react__WEBPACK_IMPORTED_MODULE_14__.useRef)({\n    x: 0,\n    y: 0,\n    zoom: 1\n  });\n  // reactflow instance\n  var instanceRef = (0,react__WEBPACK_IMPORTED_MODULE_14__.useRef)();\n  var operationRef = (0,react__WEBPACK_IMPORTED_MODULE_14__.useRef)(null);\n  // elements集合\n  var elementsRef = (0,react__WEBPACK_IMPORTED_MODULE_14__.useRef)([]);\n  var addControlId = (0,react__WEBPACK_IMPORTED_MODULE_14__.useRef)('');\n  // 主视图ref\n  var mainViewNodeRef = (0,react__WEBPACK_IMPORTED_MODULE_14__.useRef)(null);\n  var setRuleNodeEmptyState = (0,react__WEBPACK_IMPORTED_MODULE_14__.useCallback)(function () {\n    if (activeRuleNodeId) {\n      var ruleNodes = dataApi.findControlByCondition(function (item) {\n        return item.RelationContainerNodeId === activeRuleNodeId;\n      });\n      setIsNodeRuleEmpty(!ruleNodes.length);\n    }\n  }, [activeRuleNodeId]);\n  var dataChangeListenerCallback = (0,react__WEBPACK_IMPORTED_MODULE_14__.useCallback)(function (dataChangeEvent) {\n    var data = filterDataByRuleNodeId(activeRuleId);\n    var dataWithAddNode = (0,_utils_convert_data__WEBPACK_IMPORTED_MODULE_26__.insertAddNode)(data, locked);\n    elementsRef.current = (0,_utils_convert_data__WEBPACK_IMPORTED_MODULE_26__.convertDataToFlowElements)(dataWithAddNode);\n    setRuleNodeEmptyState();\n    onLayout();\n  }, [activeRuleId, setRuleNodeEmptyState]);\n  var selectionChangeListenerCallback = (0,react__WEBPACK_IMPORTED_MODULE_14__.useCallback)(function (selection) {\n    var value = selection.value;\n    var selectId = value[0];\n    /**\n     * 目的：新添加的服务如果是被遮挡的状态，将其显示出来\n     * 逻辑：\n     * 当添加服务时，add-control-id指向新添加的服务的id\n     * 将服务的boundRight与主视图的boundRight进行对比，如果大于，则整个视口往左平移\n     */\n    if (addControlId.current && addControlId.current === selectId) {\n      var _mainViewNodeRef$curr;\n      var nodeDom = document.querySelector(\"[data-id=\\\"\".concat(addControlId.current, \"\\\"]\"));\n      var _ref2 = (nodeDom === null || nodeDom === void 0 ? void 0 : nodeDom.getBoundingClientRect()) || {},\n        _ref2$right = _ref2.right,\n        right = _ref2$right === void 0 ? 0 : _ref2$right;\n      var _ref3 = ((_mainViewNodeRef$curr = mainViewNodeRef.current) === null || _mainViewNodeRef$curr === void 0 ? void 0 : _mainViewNodeRef$curr.getBoundingClientRect()) || {},\n        _ref3$right = _ref3.right,\n        rootRight = _ref3$right === void 0 ? 0 : _ref3$right;\n      if (right > rootRight) {\n        var _instanceRef$current;\n        var _viewPort$current = viewPort.current,\n          x = _viewPort$current.x,\n          y = _viewPort$current.y,\n          zoom = _viewPort$current.zoom;\n        // 向左平移的距离：rootRight - right可以刚刚好将节点展示出来，这里给多了个30 * zoom的偏移量，目的将右侧的”+“号按钮显示出来\n        var moveDis = rootRight - right - 30 * zoom;\n        var childControl = dataApi.getSubControls(selectId)[0];\n        if ((0,_utils_index__WEBPACK_IMPORTED_MODULE_29__.isEndNode)(childControl)) {\n          // 如果下一个节点是结束节点，则结束节点也需要滚动显示出来\n          var endNodeId = childControl.Id;\n          var _nodeDom = document.querySelector(\"[data-id=\\\"\".concat(endNodeId, \"\\\"]\"));\n          var _ref4 = (_nodeDom === null || _nodeDom === void 0 ? void 0 : _nodeDom.getBoundingClientRect()) || {},\n            _ref4$right = _ref4.right,\n            endNodeRight = _ref4$right === void 0 ? 0 : _ref4$right;\n          moveDis = rootRight - endNodeRight;\n        }\n        (_instanceRef$current = instanceRef.current) === null || _instanceRef$current === void 0 || _instanceRef$current.setTransform({\n          x: x + moveDis,\n          y: y,\n          zoom: zoom\n        }, 100);\n      }\n      addControlId.current = '';\n    }\n  }, []);\n  var filterDataByRuleNodeId = (0,react__WEBPACK_IMPORTED_MODULE_14__.useCallback)(function (id) {\n    if (!id) return [];\n    if (!dataApi.findControl(id)) return [];\n    var filterNodes = dataApi.getAllSubControls(id);\n    return (0,_babel_runtime_corejs3_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(filterNodes);\n  }, []);\n  var onLayout = function onLayout(resetCenter) {\n    var _context, _context2;\n    var dagreGraph = new (dagre__WEBPACK_IMPORTED_MODULE_24___default().graphlib).Graph();\n    dagreGraph.setDefaultEdgeLabel(function () {\n      return {};\n    });\n    dagreGraph.setGraph({\n      rankdir: 'LR',\n      nodesep: 30,\n      ranksep: 50,\n      align: 'DL'\n    });\n    _babel_runtime_corejs3_core_js_stable_instance_for_each__WEBPACK_IMPORTED_MODULE_11___default()(_context = elementsRef.current).call(_context, function (el) {\n      if ((0,react_flow_renderer__WEBPACK_IMPORTED_MODULE_16__.isNode)(el)) {\n        el.data.size = (0,_utils_layout__WEBPACK_IMPORTED_MODULE_28__.getNodeSize)(el);\n        dagreGraph.setNode(el.id, _objectSpread(_objectSpread({}, el.data.size), {}, {\n          shape: 'rect'\n        }));\n      } else {\n        dagreGraph.setEdge(el.source, el.target);\n      }\n    });\n    dagre__WEBPACK_IMPORTED_MODULE_24___default().layout(dagreGraph);\n    var _layoutElements = _babel_runtime_corejs3_core_js_stable_instance_reduce__WEBPACK_IMPORTED_MODULE_12___default()(_context2 = elementsRef.current).call(_context2, function (elements, el) {\n      if ((0,react_flow_renderer__WEBPACK_IMPORTED_MODULE_16__.isNode)(el)) {\n        var parentId = el.data.ParentId;\n        var nodeWithPosition = dagreGraph.node(el.id);\n        el.targetPosition = react_flow_renderer__WEBPACK_IMPORTED_MODULE_16__.Position.Left;\n        el.sourcePosition = react_flow_renderer__WEBPACK_IMPORTED_MODULE_16__.Position.Right;\n        // el.position = {\n        //   x: nodeWithPosition.x - nodeWithPosition.width / 2,\n        //   y: nodeWithPosition.y + (36 - nodeWithPosition.height) / 2\n        // }\n        el.position = {\n          x: (0,_utils_layout__WEBPACK_IMPORTED_MODULE_28__.getNodeXPosition)(el, elements, nodeWithPosition, parentId),\n          y: nodeWithPosition.y + (36 - nodeWithPosition.height) / 2\n        };\n      }\n      return _babel_runtime_corejs3_core_js_stable_instance_concat__WEBPACK_IMPORTED_MODULE_13___default()(elements).call(elements, el);\n    }, []);\n    setlayoutElements(_layoutElements);\n    if (resetCenter) {\n      var _operationRef$current;\n      var viewPortWidth = (0,_utils_layout__WEBPACK_IMPORTED_MODULE_28__.getViewPortWidth)(_layoutElements);\n      var setCenter = (_operationRef$current = operationRef.current) === null || _operationRef$current === void 0 ? void 0 : _operationRef$current.setCenter;\n      setCenter === null || setCenter === void 0 || setCenter(Math.round(viewPortWidth / 2), 100, 1);\n    }\n  };\n  var onLoad = function onLoad(reactFlowInstance) {\n    instanceRef.current = reactFlowInstance;\n  };\n  var onMainViewClick = function onMainViewClick(e) {\n    e.persist();\n    // const rootId = dataApi.getRootId()\n    // const target = e.target\n    // if (target?.className === 'react-flow__pane') {\n    //   selectionApi.setSelect([rootId])\n    // }\n  };\n  var onMove = function onMove(flowTransform) {\n    viewPort.current = flowTransform;\n  };\n  (0,react__WEBPACK_IMPORTED_MODULE_14__.useEffect)(function () {\n    var removeDataChangeListener = dataApi.addDataChangeListener(dataChangeListenerCallback);\n    var removeSelectionChangeListener = selectionApi.addSelectChangeListener(selectionChangeListenerCallback);\n    return function () {\n      removeDataChangeListener();\n      removeSelectionChangeListener();\n    };\n  }, [dataChangeListenerCallback, selectionChangeListenerCallback]);\n  var setAddControlId = (0,react__WEBPACK_IMPORTED_MODULE_14__.useCallback)(function (id) {\n    addControlId.current = id;\n  }, []);\n  (0,react__WEBPACK_IMPORTED_MODULE_14__.useEffect)(function () {\n    setRuleNodeEmptyState();\n  }, [activeRuleNodeId]);\n  (0,react__WEBPACK_IMPORTED_MODULE_14__.useEffect)(function () {\n    designer_base_Main__WEBPACK_IMPORTED_MODULE_15__.eventBus.on('add-control-id', setAddControlId);\n    return function () {\n      designer_base_Main__WEBPACK_IMPORTED_MODULE_15__.eventBus.off('add-control-id', setAddControlId);\n    };\n  }, []);\n  (0,react__WEBPACK_IMPORTED_MODULE_14__.useEffect)(function () {\n    var data = filterDataByRuleNodeId(activeRuleId);\n    var dataWithAddNode = (0,_utils_convert_data__WEBPACK_IMPORTED_MODULE_26__.insertAddNode)(data, locked);\n    elementsRef.current = (0,_utils_convert_data__WEBPACK_IMPORTED_MODULE_26__.convertDataToFlowElements)(dataWithAddNode);\n    onLayout(true);\n  }, [activeRuleId]);\n  (0,_hooks_useKeyboardEvent__WEBPACK_IMPORTED_MODULE_30__[\"default\"])(mainViewNodeRef);\n  var reactFlowConfig = (0,_utils_layout__WEBPACK_IMPORTED_MODULE_28__.getReactFlowConfig)();\n  var flowViewContextValue = (0,react__WEBPACK_IMPORTED_MODULE_14__.useMemo)(function () {\n    return {\n      canClick: true\n    };\n  }, []);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_14___default().createElement(_context__WEBPACK_IMPORTED_MODULE_25__.FlowViewContext.Provider, {\n    value: flowViewContextValue\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_14___default().createElement(_nav_toolbar_view__WEBPACK_IMPORTED_MODULE_27__[\"default\"], null), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_14___default().createElement(react_flow_renderer__WEBPACK_IMPORTED_MODULE_16__.ReactFlowProvider, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_14___default().createElement(react_flow_renderer__WEBPACK_IMPORTED_MODULE_16__[\"default\"], (0,_babel_runtime_corejs3_helpers_extends__WEBPACK_IMPORTED_MODULE_7__[\"default\"])({\n    elements: isNodeRuleEmpty ? [] : layoutElements,\n    nodeTypes: CUSTOM_NODES,\n    onLoad: onLoad,\n    onClick: onMainViewClick,\n    ref: mainViewNodeRef,\n    tabIndex: -1,\n    onMove: onMove\n  }, reactFlowConfig), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_14___default().createElement(Operation, {\n    ref: operationRef\n  }), isNodeRuleEmpty && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_14___default().createElement(EmptyView, {\n    prefixCls: flowViewPrefix\n  }))));\n});\nvar Operation = /*#__PURE__*/(0,react__WEBPACK_IMPORTED_MODULE_14__.forwardRef)(function (props, ref) {\n  var zoomPanHelper = (0,react_flow_renderer__WEBPACK_IMPORTED_MODULE_16__.useZoomPanHelper)();\n  (0,react__WEBPACK_IMPORTED_MODULE_14__.useImperativeHandle)(ref, function () {\n    return zoomPanHelper;\n  });\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_14___default().createElement(\"div\", null);\n});\nMainView.displayName = 'MainView';\nOperation.displayName = 'Operation';\n/* harmony default export */ __webpack_exports__[\"default\"] = (MainView);\n\n//# sourceURL=webpack://rule-designer/./src/views/main-view.tsx?");

/***/ }),

/***/ 73244:
/*!****************************************!*\
  !*** ./src/views/nav-toolbar-view.tsx ***!
  \****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ 43400);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! designer_base/Main */ 18040);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(designer_base_Main__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _controls_NavToolBar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../controls/NavToolBar */ 5660);\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../context */ 90115);\n\n\n\n\nvar NavToolBarPortal = function NavToolBarPortal() {\n  var _useContext = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(designer_base_Main__WEBPACK_IMPORTED_MODULE_1__.ConfigContext),\n    getPrefixCls = _useContext.getPrefixCls,\n    prefixCls = _useContext.prefixCls;\n  var _useContext2 = (0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_context__WEBPACK_IMPORTED_MODULE_3__.DesignerContext),\n    getDesignerPrefixCls = _useContext2.getPrefixCls,\n    entityPrefixCls = _useContext2.prefixCls;\n  var designerPrefixCls = getDesignerPrefixCls && getDesignerPrefixCls(entityPrefixCls);\n  var toolbarClassName = \"\".concat(designerPrefixCls, \"-top-view-main\");\n  var content = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(\"div\", {\n    className: toolbarClassName\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_controls_NavToolBar__WEBPACK_IMPORTED_MODULE_2__[\"default\"], null));\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default().createElement(designer_base_Main__WEBPACK_IMPORTED_MODULE_1__.ViewHeader, {\n    content: content,\n    portalId: toolbarClassName\n  });\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (NavToolBarPortal);\n\n//# sourceURL=webpack://rule-designer/./src/views/nav-toolbar-view.tsx?");

/***/ }),

/***/ 98564:
/*!*****************************************!*\
  !*** ./src/views/right-panel/index.tsx ***!
  \*****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/helpers/slicedToArray */ 95992);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ 43400);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! designer_base/Main */ 18040);\n/* harmony import */ var designer_base_Main__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(designer_base_Main__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @kdcloudjs/kdesign */ 54116);\n/* harmony import */ var _kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../context */ 90115);\n\n\n\n\n\nvar prefix = 'rule-designer';\nvar SplitPanelBar = function SplitPanelBar(_ref) {\n  var children = _ref.children;\n  var prefixCls = 'rule-designer-right-view';\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement((react__WEBPACK_IMPORTED_MODULE_1___default().Fragment), null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", {\n    className: \"\".concat(prefixCls, \"-property-bar\")\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"span\", {\n    className: \"\".concat(prefixCls, \"-bar-title\"),\n    title: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_2__.getLangMsg)('ruled.rightPanel.key0001')\n  }, (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_2__.getLangMsg)('ruled.rightPanel.key0001'))), children);\n};\nvar EmptyNode = function EmptyNode(_ref2) {\n  var text = _ref2.text;\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", {\n    className: \"\".concat(prefix, \"-empty-node\")\n  }, text);\n};\nvar RightRulePanel = function RightRulePanel(props) {\n  var _useContext = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(_context__WEBPACK_IMPORTED_MODULE_4__.DesignerContext),\n    getKdesignerApi = _useContext.getKdesignerApi,\n    activeRuleNodeId = _useContext.activeRuleNodeId,\n    isLockRule = _useContext.isLockRule;\n  var kdesignerApi = getKdesignerApi();\n  var dataContext = kdesignerApi.data;\n  var locked = isLockRule();\n  var _useState = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(function () {\n      var ruleNodes = dataContext.findControlByCondition(function (item) {\n        return item.RelationContainerNodeId === activeRuleNodeId;\n      });\n      return !(ruleNodes !== null && ruleNodes !== void 0 && ruleNodes.length);\n    }),\n    _useState2 = (0,_babel_runtime_corejs3_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_useState, 2),\n    isNodeRuleEmpty = _useState2[0],\n    setIsNodeRuleEmpty = _useState2[1];\n  var setRuleNodeEmptyState = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(function () {\n    if (activeRuleNodeId) {\n      var ruleNodes = dataContext.findControlByCondition(function (item) {\n        return item.RelationContainerNodeId === activeRuleNodeId;\n      });\n      setIsNodeRuleEmpty(!ruleNodes.length);\n    }\n  }, [activeRuleNodeId]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(function () {\n    var removeDataChangeListener = dataContext.addDataChangeListener(setRuleNodeEmptyState);\n    return function () {\n      removeDataChangeListener();\n    };\n  }, [setRuleNodeEmptyState]);\n  (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(function () {\n    setRuleNodeEmptyState();\n  }, [activeRuleNodeId]);\n  var controlView = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", {\n    className: \"\".concat(prefix, \"-control-view\")\n  }, locked ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(EmptyNode, {\n    text: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_2__.getLangMsg)('ruled.rightPanel.key0002')\n  }) : isNodeRuleEmpty ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(EmptyNode, {\n    text: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_2__.getLangMsg)('ruled.rightPanel.key0003')\n  }) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(designer_base_Main__WEBPACK_IMPORTED_MODULE_2__.ControlView, props));\n  var propertyView = /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(SplitPanelBar, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(\"div\", {\n    className: \"\".concat(prefix, \"-property-view\")\n  }, isNodeRuleEmpty ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(EmptyNode, {\n    text: (0,designer_base_Main__WEBPACK_IMPORTED_MODULE_2__.getLangMsg)('ruled.rightPanel.key0004')\n  }) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(designer_base_Main__WEBPACK_IMPORTED_MODULE_2__.PropertyView, props)));\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default().createElement(_kdcloudjs_kdesign__WEBPACK_IMPORTED_MODULE_3__.SplitPanel, {\n    mode: \"vertical\",\n    defaultSplit: \"280\",\n    firstSlot: controlView,\n    secondSlot: propertyView,\n    canFold: false\n  });\n};\nRightRulePanel.tabKey = 'Services';\nRightRulePanel.tabName = '';\n/* harmony default export */ __webpack_exports__[\"default\"] = (RightRulePanel);\n\n//# sourceURL=webpack://rule-designer/./src/views/right-panel/index.tsx?");

/***/ }),

/***/ 19600:
/*!******************************!*\
  !*** ./src/style/index.less ***!
  \******************************/
/***/ (function() {

eval("// extracted by mini-css-extract-plugin\n\n//# sourceURL=webpack://rule-designer/./src/style/index.less?");

/***/ }),

/***/ 13128:
/*!*****************************************!*\
  !*** ./src/views/left-panel/index.less ***!
  \*****************************************/
/***/ (function() {

eval("// extracted by mini-css-extract-plugin\n\n//# sourceURL=webpack://rule-designer/./src/views/left-panel/index.less?");

/***/ }),

/***/ 14892:
/*!**********************************!*\
  !*** ./assets/images/delete.png ***!
  \**********************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKgAAABgCAYAAACJ8DltAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAqKADAAQAAAABAAAAYAAAAACo6b7MAAAK6klEQVR4Ae1dX2wcRxmfmb3znc+5OHFsx1FDadrQtCit+PPGP6FSXnjG0ArBAw8UCYmKIoSQEBh4QAhBX3kGAQIh8cZLS4UKCCFRimiqlFYhUu0kF0MaFyf22efb4ZuzZ2/mu9317t7eefb2W8mZPzvfNzPf97tvZ779ZsMYXSQBkgBJgCRAEiAJkARIAiQBkgBJgCRAEiAJkARIAiQBkgBJgCRAEiAJHJkE+JH1POKOpZRTa+t3vysZ+xyT8syIu8uFfbN57DsnZ/hKLswmhImYkHkMTKMHTim/XhRwqglIyb59+65cGZhMiSsmFqA9y1lAxRJIbaVNLECLZDltlZAlNeUxuQA1Z1nAPFnSfaURQB0GL4GUMQKowwBVQys7SAmgjgO07CAlgBYAoGUGKQG0IAAtK0gJoAUCaBlBSgAtGEDLBlICaAEBWiaQEkALCtCygJQAWmCAlgGkExtu92ZrE+JFBq9WqzVYiWqWlpZQjfvFe5eaE6lLsqDuY6/UIySAllr97k+eAOq+jko9QgJoqdXv/uQJoO7rqNQjJICWWv3uT54A6r6OSj1CAmip1e/+5CvuDzHfERbRCZ+vBIrFjSxosfRVutESQEun8mJNmADqqL5UIMGdPY9t7FRYV07ka/ZEki/dGjSRVI6oUbsr2GbHY3c6FfjzmH8Q7lIVkl04ucU8Fhr/ckSjHU+3BNDxyDm0lw5YRgXGzV2vB8w9P9xSdqB+o11hp+qdUD5m5cPPtD/h+/5PoE7A9YXLP67/zrxftHy4RIo2i5DxDhNuF8IulyrJBdvl06zDG2xHTLM9NpWYb13eZbN7N1iUF0KH2114emsVTtOf7THmbP3JE40zKyvcT9yRYw3Jgo5SIZwDGGsAykbvT+Uly2YTFLCB3aEXZ7IaLAQkW/zl21vvA6K/HUroaAMCaM6K6Yoq22UzPQvZAVD5OX28RfFpVc6z1q39AU/BuvTssTZrVrvWDOAH8CJY0GVdyZl4HPKFBSjt4rUmc0i3xAl2q/JO9j9vnu3wmdzAGTa0XViXrt2pD9ziQj5vVsKHfD9ulouWT/DQKNqU9sc76jXoF39xht3dKYL4+M6cmD75l2f5dhE1SRY0o9bmGvajNSObEZHx3T5jWdsQOx/ql4uVK90aNGoXnFZtS3OCrd5OSzWe9rCZasFX8e7VvfldX61Dn9PlIqVkQTNqa6EZ7JUzchghmS9fN7nzAq9DCaCmJlPk5x0+5StF5a/gkwp8n7Czf8/7vyrnU0zPmaYE0IyqWDiekXAMZEL6r4M/9B/9riTf9rcf65eLkyOAZtTV/DF3H/G+x1Yl59aa02dSrUMLdxFAM6rMZQtakXxVMGH7Q31eSICWbhef5NM3STDrd9RvO/oTOetXX2NShyNBy8VzFxgXg/bg5pXLVnenH3jYKquC9H22fvVfQT0XHPg9FJRxZmG2tgZ1azdub7eB+sCbL89d/Fr7gUs/rF/B7V0uD0rM5dE6NLbpqs/q/bfeAyMTwrPqIMLIKqcpYFrMG/H6zx9WeFv9Qf2fzXt7u93CWVECqKnBlPm5mWhnvfDsh5Pf3UvJvd8c02Le/ZZMBZRANNP+Bcq11qFws3AAtaWoZ0ZpIgmot0nXNyJECKF11iWzW1B4xlusYK1gl40SuJQCgMoKvJe3fhfysbPLlx+Rnr9Yr9ZeufKz8+sGqZPZ6Jk6OVy3BhVrQSvoEb8XbW0Pm5WPaAXibdJz2begTzQbL4NFfUvfh7dLc7Lq/dPvyue32jvXz3zq0vf0PVdTAugQmokFKLctqy8tU5aqV0wrEG+TmfmI3w9U5i+Y96v1xkHQiFQnSL55z/KrnzTvu5a3peja6EYwnrzexauh3bcUHc0kPPu3D+/DM88G02LeJmPwzgaP+F49l88BEAMQVmqNzs7mxrSmAf/olyD/G112LbWl6NroHB/PwvFogHLPfsTLbvZHPKbFvE0xeV5/Darqq8yz/KGiWpvhYGb1xRn/wKOfbc3osmspAXQIjczHBIxgV5DvZwcopsW8zSmAnbYs6CvP1v8Ne/urug1g0/Nq/UBnyeTUW7u3PqLvu5YSQIfQyHzM+3iBLKg/hAXFtJh3MAUIEGk8WL8elA8yOMremwqe8L0WcO7e2ah7AijWZory8bpkU5X+49Ik5chRL4ewoJgW89b9wg6+9dJTfOBssvTt9/IVw4Lu07p7LIQAqrWbMV04Hh40gjcy2Aqm6Q7TYt4BL8NJH9RBhjemX4B/g4F61Rq4Uo01spQX71t+Nfq9rclszHkC6JACX2iGMxDCdpDgdWQ4VXgtpsW8NRX4Od/UeTN97fv8FufyZbMOW9E9zh4377uSJ4AOqYn5CIDinTbeiafpFtNi3pqX6QPVdTqFN0zWbt7cKKk2PnPzNSgBVGswYxq1k1euHNOdA8d/mfpLe2E6zNfkB6thawdv3hNcWO/lwR9q3oagJzfjRQmgtppSl+LiQrE7CD+qk3SGaTBPk4eEc3xm2cyfnq39CdahKsKpd6mAE1HpL0Pg53PP+eU3FvR9V1IC6JCaiFqDKrYmAFTZ30v/uhPTYJ6Kr7484z28rtNpWPgddjfJuuHB14RHnBJAh1TAfMQuvscWRx3hqKQkfWMazNPg4cvpSAuqmkGgs7UOrdYNfyjnL7oY3UQANRScJbsQc7oTO9SxuyhJf5gG89Q8YMXb+fQJdlOXQ1PhW+vQYKPE+SVRnfpMKM0RVxJAh1TAiYZkFS/cWY/BhAOPk3SNaTDPgAdn1/ajl4KagQwOv+PcY/Xm7Jev/+rdj177+bvWBggcqCCA5qCEqJ083tDgoxtJusY0mKfmAf6B2Me7ahcWflebnVfBI+ndC7rjEacE0BwEPEpfaGIfaMwGyZqiRF+/8910L+kxE0C1JIZIo3by8Aluiyt2GVk3IwqYBvPUZHEuJt1GpVXhWetQqPrgR1f0yU+zpRt5W4JujKlwo4jyheLDbXjDk2SimAbz1DyElIc+4lVbHH6njiXf3Nz5sObjWkoAzUEjUWtQKyAD+sFRSUm6xjSYp+YBR/ATAVS1x+F3B1+/06ycSgmgOagjag2Ko46wNUzSNabBPDUPz6smBqhA7+XhO05OBoqouRFAtYaHSKPWoBydjccbniRdYhrMU/OY5skB6tenf2+G30nJ3/vQN+QpzcullACagzaivhWKXUJ4w5Oka0yDeSoetSpnL/2I/zcJP9VmMPwO/oOc9vbHktKPs10/WmCcvU5YXyePMebB95K6xreY1BRV5FHYt5bM6R92f/H+6G8waT6Lca9bdSOU7offSfVf1PSug6/f/VqXXUnJguagCcAmmzvCc5FRa+C4qcFa1novD8dCnFyHEkDjtJjiXtTRjxQsMjfNYkFPN2t/BBsfhN+Bj+HcI19p3595ECMiJIDmJNgsViynrlmUHzaOf1j4XcfvOne6kwAap8UU9+KOIKdgk6lpXERVHEMcfufi1+8mF6Cc34hTTt73onbyefcTxm+u2f9AWNj9qDrJfGsdCsc+nHujNLEAhX3LT6MUM4r6KF/oKPrCPGuC/RbXJSk/Odv4O8gpiCGFnX0nCd0420wsQM8uznwL3Dw/gMfWWCzpxXdIdirihOcoFQrrz5tvNxpPZ+lDhd/BCdHPg4yuwd8q7OyfysKHaEgCJAGSAEmAJEASIAmQBEgCJAGSAEmAJEASIAmQBEgCJAGSAEmAJEASmFAJ/B+YIfc7gS6QZwAAAABJRU5ErkJggg==\");\n\n//# sourceURL=webpack://rule-designer/./assets/images/delete.png?");

/***/ }),

/***/ 52836:
/*!************************************!*\
  !*** ./assets/images/no-rules.png ***!
  \************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJsAAABgCAYAAAAKNABWAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAm6ADAAQAAAABAAAAYAAAAADCgU7PAAAV3klEQVR4Ae1de4xcV3n/zr3zntnZtTf22sZOgoObF3EgTloiGhoHyitCFbRSU6kKQkmbRhVR1ApVqhoUSuEfaBuqhkgNRW1EoaqqSn1ISCGAgVZqQ5LGEAe7DsaPjbPrtb2Ped/X6e87597Z2ZmdnVnvzM7dcL5k5/vO+5zv/O53HvecayJDRgNGA0YDRgNGA0YDRgNGA0YDRgNGA0YDRgNGA0YDRgNGA0YDRgNGA0YDRgNGA0YDRgNGA0YDRgNGA0YDRgNGA0YDRgNGA101ILqGjCDgxaOn7grI/xRJcbskuXsEVdhyRQoSb5CQL1hkf+HQrft/EOcGxAZsPzx68o+JxJ9JKWNTpzh3XHvdhBABkXzsjlsPfL49LC7uWHSstmjBEQDNiotitmI9GHAWWXfH1cIl4qBUHjqlJAO0PjpDwDzsmNxGxbG8ir1UqtDcpXmC/vAnrUBgGkIUy+E0FmDjORpU1YeqTRQG2vZtxaYiIvnCxXntp3TZDI6VEAtrYhYD/WMismitKVr94qzLWICtVXFGfvNqwIBti/Utz9HaaTW/9jhxcMdjzhYHTWyROvBigCkaOqMFwlaovgHbVuilljryqpMXA80FQUtY3EUzjMa9h95E9TNgexN1ZtybEothdNeuXXHXk6nfADRgLNsAlGiy6E8DBmz96cnEGoAGDNgGoESTRX8aMGDrT08m1gA0YMA2ACWaLPrTgAFbf3oysQaggVhsfQygHT/XWdTqDj399e/Q7NwiOa5HtPf+B+lt+/+OjjwOR3zIgC0+fXFFNbG9Bj395D/RF7/x363pn6ZTpw7C45FWz1HLZhgddQ9soPx0Y4l2XXiVXjp2lmy7rSsD+s0NZD2UpG01HEoZJtMhaGCsNEM7Lp4ky/PIdTx69vEP0Gd+67ZmSZmkHYv7Jc0KQYhFhc7OlMyZ8NZeWUPmYXNy/jSlnbKKVUkU6fgrJ+jQDfrm40s/vUTHzs3TiydmXvjS3/zJHWtktelBBmybrvIrLzBfuUgTi9NkSR83NgRd3nYNVXOTNH75DBVrF1dkPHt+5tFdH7nvSys8R+wwYBtxB/RTvOW7tH3hLGXrCyp6IGy6OHkdNdJjym0FHu1542jLMCW+Iw79ynv7yXsz45jV6GZq+wrKmlg4Q/nqZVgz3EEGeXYKQDtAbjLTzC2wEuQ1AkqmYDt8xPO8zzUDYySMDGx8832h6r7DluIDC+V6T5XwCdVyuUT1Wk3FzWSzVCiMEd+jXI2GHX+1Mgftl6/MUQFDZ9REGQR0qZ6ifznp0Q37anTt3gwlEzq0VpWUvHyZXNzznknvPD7ougwiv00H2/z8/ISdLjxUqroPYSm8s9+ryQy0SmX5skckj43poaRdGcOO317eMNyBaNkswNOD73rQydc9+qv/0vdGbSFpe9anPTssOnjgLvrlxlF6IXUTff+VxL/f+Gjlm1cXG6V376s/9+nf2fPiMOq33jw3DWywZKnFivOHliUekoFU2sLnAhqQ+dHU17vXqH1k0VqjsF83sA0rfgALu+QkYEEie9Nao43L+YRHuYRenNcw+V/EfI3nagmsQm3fo2MX9PAZeLDwiSzNVRM0d4YoXSA6FhyilO3RyXPubajnbacX03SulJGffersY489fPXIh9ZNAdvCQv26ctX7si2sW3h4swSpcVNSALnl6d14Xw01B54OnVzMUQNf1BgWnb2YoMNvrVMhpQFXGttF/MeUqpfpaEOXLV0Ntqgezx9z6ZYDCXr5hEsYbZtkky9OLGQehsfIwTY8rYXNLZfd94qE+I+AgutxW7sBgDmaywa2+eBm3pt4jtZOq/lFcVYLW81vPfHnMF8aJtC4LmWA6dnXslR2Oi2nkynQbbfk6eDViBjouWtUf+ZnzjeILW8r1RsNOl9O7Wj1G5Xc2aIB1qRUc98D4/WkFDKpsmVNwKw1NRLKC2Xn+l7FDnvC30/+p0sZWsQQOkx69XVJXiAonwro/W+rNS1ce5mXSj7d99dare1hre6gsUhWekL+/nWvTz3yyIG51rDNloemuUrFOeQF8s8ZWtiBVNYLczT1tR3mTLyaj+ReDeckPD/rNkdrTz+M+G1Go73IgborjrZw3QA3OWZTLkVUddYuVgYcQYqK63wEwlfXjj3c0KEMo1gMFHwpP8OtxB+Gyi5/QvsPt4lbN/cIcKsNqdyqiZ7LKqKP7Z2jp971Y7r/jnJu1JoYimVbqjqPCksUsTJvYLWOUbS5VbQsoOVs6NR7l1FrIcblR4BbzcJtB9jOh1/K6taER+92aHcei4ZU+q5SxfEwzOyB5rfBDlzCVsq0tJPfG8+Ik93SD9J/4GArlRpvJ2HdjUo6ASZCFhDFXBHbUV4phfbUAgwDMaQ9BF3im+K3G+C2Y7tjbRL+zqxrcxxppX4dqr8XQAuT8JMOV+DKpYpzCr30ZCGXfgbTmt477GEO62UDBxt2BT6GyVg4R+O1AMxa2D49R0PDGXAgNnkKfNq5pX5hIsj1V1Y5iYcoobp2pf96XBMZfIezy/P3/OtpevfVdUqHZVw1puDSNfvJgghs7DdhoizsRtmySJSjFMwVqW8YiymYhc+WsdFerToP53Kp56PgQfKBgq1arb7Fk/QOmC71dCiQoVUR2No54xAaaLZ7kA0bdl5LVaLptiFsB7aqd49vrOQ9k2uh1aKGbwNsGuWTPSzb1DhxRN3HAJX0/RrZVjTOqIpG8xjm6Iht2DD4+mK58fh4If21jbWkM/VAweaTfSfaBKumTZd6aLgRzSeVccVmTuMLbxPwuq8Z2Fk747OmBhjca9GOcVH3ipO1xOJFzNGgebfuSjvXgPr5zZfqBFg7JTBngidvEPzRQqlRnxhL/7PyHNDPQMEmhXVACAmrFs0LuJaryWHDwpYNqC0/d9kUUnWyYIrwwHa2HR1RsKnup4t4oaXBZvmO51Ou2tolbBa4N8KZTVOGIfiDpbr8UTEj/q8z8yvzWRfYsKWRKDvOLwhp7YFJmoCRFpjgL2Gif65QSJ1Zqrp7MW3hrQ5F3AiWI7gpbMGLOUfAT1Nmt6H1aeDES98j++i3qMvAK2aD/Un/ow/yRu5+zhmnfANf0PJpBvhpy8afate9xINp5EfSxVfc5e/C1EVdytlcMfUFtktSFu2y80EsnW+XQmQw6iu8YDEg1IoSfKni8htD3vz2LTX86zpFQGNXJEe81U/H3jq/SWgun15Z31Rf2lyZZiOun5w4vWbyV46f2eZn8nNk2dj78JPCqWPMFAAb2zH0Fgh2Ed3B8zjmTJGsenHXUs39RXj+jwra4E9P9VQcebtfdj4KpCSJ1zNBUJfgTFguo+78HKDyqKp+JrTfqvUK0CALjWDOxIuDgFNuPRrD4Qv+GyUtlbFKWYN8z7cuL5bcXCpz2a5XpoTn2lIGVQyR6AI9cOp5Mw4zYf7MWfEcWvvpuTTk98F7+GAr191f9VznPQAI16yBU6AaLMxBFoCDSqNyABAIL9uBH0txdncQn/BQ+x8arOpUaQjcjrjGo6cGFpf0pZe1Ip45N0d7rsrNMNgsr5HEyqAKMwYk6b0BPUbB4IUDJXx53OJFgvLBEbBr4JGEh7tWOf2EdbVs6t2mH/wSwIMDx/op0JYXcogVcK4QAKgrZgV4ZCArrkrndBw5TK/8Wn4M0FqUsX7R5dvvITE6eGzRQ0w4z4GrVm84fnrbdJLmbrU8Jw+U6Tlb63jSIke9FXUx9xz23x5YLDV2AYITwCBetlqzAXkvj+cz/4ly+zq1g2zCPRiWWmhRyu1+xTuMV0443IjqR6AIsG1jYTrKHIRLPkAaHhPthA8E7AMpzhEUNQNDd/gIsWsLD6Pz6LJer4rCBm+Y3bx39Sz47UxEDK8dk+P4p4UW2Ws5wJNVLzu2BKDgOImbB6vAgKBbw6lMmz0I4aqtB2cE1CHyW3HHBsTHwRQcd1qUeH+57t1Zq8mvZbPiNIf2otUtW9W/EzN/LF0wRGITkLnKiG9d+wBPePsaWEE9+PijNsKBD5lnBeAcP8Ilc6bAx6wOaZkr4tOIqvLauZV+ucVRM0ZW7xawcR3y+RzNzM6RncBxkJC8wK/jhC8m0lja+V7BLi8Ugvz2WVQ/7KNwKoR+5iTRtIi5yoJ9WVKhqre0/WEfdKdH3m8DcM8AcGdV/DV+OsB24YIsWOTuRUaOmoupXX5dEfjpORvzkBjnEcEAcgXYEOqqRXIYvyNcHW4L40aZGN63BpqdEKbI59LkNkoA22QzD8/z67BodpDNv2zVqwetWi3lF6gqwr05PDR4tcD/636IZOYqE1gPWAf0OzgISBPoYLYyYThvQbj3Hjt27G9vvvlmPs/UlTrAls06+1DOquNwZOWYc44dlq9rMV0CbDQQe3VdQmPtXcBK9OrlPo1FXSfwL/UJPd416wNM8TA6T4Xr/yFz5tU05fLnAKSKGh85FptoNVZq+4D4GNSApdBANM13aMbZYGAW1WpQVFnXHLjpRghHlaPLTwfY8OJ23A/fbQZAtAVEM+f0UuKUGqrGXLlDmf1Wyz9Ky5zD2/OzJPLGGfnV0sbdj/fUNntfrV0nelGw7DvB/1pf29Bad5waJTMXsZSU8ppb/8LHnpuyZmGfoWPYhPG+h+ojO2HpmRI4k5o1YerDnEldv0BMxeEWAJ5ko+E23gLn+sDmeSLhC1+ZQz7B4KGU5kkGFKjmX2HBwgaIfB8PkwaTXhgsLxCQFkEkmXNF2/NDYt6y25Jg4/aMnNo0N4kFAsa4FdXCXlsNFqOMvXb8y7dWlRd0rcmEev/Aw4ueWMOQYEsLnRau+iKZuSL2ZzlaFaI4jVTR84x6h2XDhI/SVlKd2sAJDkohM+aKuB0sR+2RHt5c4d4ZuI7Av8vLcQthEmHMOYQHX4BLcR3TQxM7qsBBsSd8OKjnkez2RrCx4OF3UNRu2XZun+gAm+u5Nei96ikDtmrJ6BU1P1N9hNVfGElz7p3WXkI+qseYa9IxumxshHGWY67wyCRsxwm80LLZ0oVVSjQt14qoMGSoEBs1td2BMK4fW72wvp4PM4m0zDmlRGRYMzwI2hLabPZGvqTjmq2f+BJ/+xGjXrlksUg8MECwhSNhs9jtsGypVKoJAw7wXb/iBG41kQgvozZjRwIDjfsjXBDgE1yUAICYgwLI/Fku5kwWOhdLW8WVh5r08ee5eIa1NukcWuIgiWvZtrJsgQurlExI5joKV5hlXXFYQZEIEpI5hydsyAEDLLRkAJPa3ABn0hsd2k95uLDeyRW6Ud7mpz8NtE3PqFjI0XhxjBZKqvtUJpWGV0tZNt5c98SCLpSHSI4bDZuR3CU9j538aqHnGIo4HWDDuzHc6wz9GSRcSAgWtk3abDGHJPABABBz5caxXJmAKzwHjgdC4IGQzDk8kpmz20P2CUbgFiTu6PV+bk/vPg6use3DaHEsR8XxlWBzyrUa7EHFdppTNdY994fuRFhCcjCQMWdycGE1hRvSzJkimbkiHvQ4rhr8CJ/zFWxMmevw7r+dYEtKB0rUpiiCLHOmNhg78E/BjzmTWjegSuH6AZ8C0OeNmDPx2aPIj91c5VX3WDgw5rQNl034b5TUbtnGCnn8O6T87RM+VaRpoVKpJYJUpZ7AiQ9QBv/V8R9zpnoVcgZ+4EyRzFwRj5kJfB6JuSL+VBLLipOXqMNgZBTX4d1/O8FWk67IpvUSgK8SSJyj0VcKlpERIoQ3qjmouWG9EvS40YMw+DFnSlAadW4ozu5lWT8l7Geofw20zpKSOPOUTidpDENpK12aw4cvvHLNlgUFFrYLNoAW2Q97AnIJfuBMkcxcEWOXZeZMkRyG2zj6otL0cQSmA2xeCrdaa+GYz+WzHIIcTwOO4dYFc1Uwr6J5zhWupuvYrM5IPCXgiqIvBIQcD4us16VgzuGtsk5gftejAT/a/EKiXFZ3Uj4XdlaY0amZi26hUChPh+694CwzZ3rjDRK7d5Nkzu5IZs5uRRHQ2BHJIW9PrxOs/tsBtqtyOadK+NgXSPo5KVJVXJTIKXcgqiIpc7h+h+0aEJ+m4ucoOlXFN7TLQVXd1ObwduIjVCl8ViD68AmA3ZTb4xp3bw3gDU4zUi6rT3Lm8MqqlS6cn8FGqIge+9agTZc7wDY/T65t80U1piXNIl7EDvUS/JiDUhA9iMyZPMRLUVFxdheLRbm0tCSYszuSmbM7CX9PydHGHfsa6lcDbgvYsiHYstFcK8okkexnoRjFHirvANu2bdSYpaKe0s/OEk1NETEHTQEcs7WaYK48NOaAKuVCtKJAdMmcfWo1TjcVcs5qCnFmFedwFQrgLtQrM1jW7mI/Q/1rYKVl08NnMpXkRz/qGYyNfkcf91/CYGN2mJQjR454gFdD/U1NLXPICHMAGMVZRlWciLMMLPFkTXGWERd/EZ/isAb7MVcypm3Mscv7Q3BDfWjADU/+cFQ/PFfIcjSMSj84w+6I8CIqNmDrqMjhw4f11nFU203g5y/UvuBL/17s0nWAfxOK31JFrAAbLuZFxMMo5mbBaz+b/lf43RL540GOzTAai87dszP7A3zy49OsrEhJhq+ugda9Na9lzpbLZXAoTTz2/MsnXmhNGadhtMOytVZ0M+W9u/Kfg4X7vif9T2GicTtete3ezPK7lTV9eTlktiKp7Orp6rLvYKSxLHaY9D7pmhkm+IgFCKPAinivHj/9j9Dh5w/e83v3tIbEehhd0YJNdrCFQ5H8Fxu6/tHKPHacJnSFeCs02g4dbBV/464UvevG3s/+TD3za++8Vvzbhz70Sd7j4DmvorPTs8dZCIIE7xFoT/yaYbSpii0gSPHKZtTS7/Kiu71sGDQFsNf99ApkYnhVG1CW8KO9f5UUV/ZWxGvPbzPdsZizbWaD11sWOuuZ9aa5kvjnL/c3XcXZtB9z/snAbgORUCBLptLhrmdUi6AtXuS/+dyArYfOf/JE5itYuBzpEW3DwT89jwPyvayboB998CbxBhdmy/IKEGEOp0A21nBWWjazGt1w32xaBgAa5tviE+CvDbPQi4uSnnup+3wQu+QeTjk/ENXB9zPwktMYVvla/BKOM6p/Re27330SN1rFEi53lBB2AZtJ0dvEKOnI+IqnY2S1iHnBx5/Inj70uLzVr9afqDvyQVgR9YZk0NV+7n89qgNvH74j2fw3qbgMFHYKc7JP3HuDaG5rvPjaAsZdPrAv8UlA8W2a/vtvqbj8cOz7+J9iufpFuHM44tGynuYYo6OhKG10zRl+yfc9Ja/N2O4nPU/ux4l2/VpvgMXiIEfDSogavirpH7zWPrV30npWpOjlDx9ou1657+NfBqAeDovG7u7kGE3/pX7hvvf+b8P/HhUm6Gd07pn9A6ziFWdlwHbFqhtxwn0PvB3fTzugaoGP/tGZZ77ZrNE1D7wTlw+uVW4rUaKzX32uGWYEowGjAaMBowGjAaMBowGjAaMBowGjAaMBowGjAaMBo4FhaOD/AXf+5Ym3Fix4AAAAAElFTkSuQmCC\");\n\n//# sourceURL=webpack://rule-designer/./assets/images/no-rules.png?");

/***/ }),

/***/ 70780:
/*!*********************************************!*\
  !*** ./assets/images/search-tree-empty.png ***!
  \*********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH4AAABICAYAAAAwAEE4AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAfqADAAQAAAABAAAASAAAAAAO91pgAAAJu0lEQVR4Ae1d3XIbtxXG7vJvKdqMrPhHTmVJiT2ejlKnnXEfQC/hm970ti+RZnKd1+iNn6B3ym3GvmibsRWNVFuKEltSLGUUUSKX3AX6HYCHomjK5EpLclcFPNyDBc4CB+dbAOcDqUQIm6wHrAesB6wHrAesB6wHrAesB6wHsu0BJwvmK6W8N7+cPJKOrE7K3mm/slqpOLuT6j/pflMP/BulytHu8bdKqD8nPfg47VUqU/90POdv076zGee5tOq6aTWM7Yp2T/4yadDJFkc4d4QU3/5aVwtsW5Zl6oEXjvwkLQ5WSsxfFfDTD3xaUG/bcVXAt8Bf4MW6CuBb4C8APD2SdfAt8BcEPuvgW+AvAXyWwbfAXxL4rIJvgU8A+CyCb4FPCPisgZ9LcNxja2pnZ6dvX4VCQdy4caNv3WULj2q1Pw7ZxrzjiL9C96sh9SeiZmf8RNw++U4t8JPHYCIWWOAn4vbJd2qBnzwGE7HAAj8Rt0++00xG9RS990v5XCaH028oIy/LpKdGRdlG7u0UdWCX+hSBMU5TLPDj9HaK+rLApwiMcZqSyT3+4OBgnD4a2FcWY46JAP/8+fN8pVIpRdFUXohic2/vZmN52QkHerit0Gw2h1W1eud4YGzAv3ihCm7p5wVXFG5FIqpKGOQAdiEicfvejlj7795hJILdvGz8+ODBg+Ace21xQh4YOfD4KxhnY2PvU1XYX4yaeU/mFH6j7r43u8MorLheYaoRuQvfr++++vz+rVeO46iExmmb6fHASIGnJX3t1dsvpOt9JMJICBfTm6Z6n+Q4nlCo8zxt0uLq1tsqnv++j6o47wCnn64t6++BkQG/srKSq0zf/SJU8poQEqh7sABCSyGoY5r2bADnO0tBKKtFPC+lwMSHYlfKYjDVZX4qsuz3xI2Zn//8s5Zo+XmnoLEMAXNOFHA10BKW/KHOOc8Yt3V9R0j8ssKyzqQBGgnwW1tb0yet5gyMxRRvaZsJOok8Q0grvinT1Z38ab3RlVL6jou/XOud9uaxzF0R8+RevvylJERQ8LzjVq1Wazx+/Ng4aYyjGQnwNVGYFRKbeg6RXBjyJD4zrBzqQtSRpArOk6R7rgfiUkkEhF7fZkg19Wl9fb3Yckv3PFG8vfpqp+oAdtrkpKiK8nRVMxopmnuy8cnm0pIzFq6aOPDb29t+LVC+cL1QADDIvsBI1LmoI0mJ8yQpcb2ijOMK0mLokzrAGXWsQIxm/cfDxVYYfIoheBKj6DCarqAG5VMil1/Ml/bvgdG8HgejuTTwFMRde/iwMBMEcmFhIdjY2KlIFVEUl1ByNQ/Qsx5LPqUsHOAQo1ndevcHEVGMgj+5kjqypaxJvM+d7m2IfiLhuWIRTGgaz/97lFvAhYFfef26NBv4szInpsSJEHXhi5cbOzQxlePmOsE5j/OiEls7gMcef2bOX7S18TxHTEQzkjAAozGA58BmCFiSlDhP0qRT1oPHrxEjWllR/4pzotluaChxIeC/W/1p5iPh3my6kmBhy087VOr9stPaWDksg8rMcwI/G4mYCBYnPwdGc8pi9DLffoGFyIPhEPxGUu491uPPzr/5DEproxh1bODxm/apg2P3RgTAPfPy9rWriFI6dyVJifN8Fjuo3jxFez+Weqwj3VF9mg9wsK9jWZe+i/3uQyyG2Q5Ls/KfZT3wwQwxpPn5+V/ZH0nJWMA/ffrUOzmRH+ciZ+CMPoaFFLyS5NS9/lPHHN9QPedZh55t4INDWx3+wZ8AnzTFyP5owrR+uSvFIsRE8MLyUHSDvePTbGcI1tMkhiTEZIF/9Gi53GgQ5YyiYlGoIMBeBmlcxVBproKN3ySW7dszoruO8yxJkfLg8JJ2+Q7qVJHSRI7AfNeUBGTkzOTojeU026GXZADrCVvKJ6Y0NzdXT3LYsWZ8FBXwe8aGfpPD0Me5eh0vrt+2h+Y25XmOU55s5XrOx7Pfk9fNHq+nPIfAaDaNiWzUycW5Ex1TJ5MajVwFW0hjc3OzuF8sukdra83l5eUzK0rcnmIBT42HYVEPyPcjVa8XHZJUXq+HOk+S7k29KTP1RpeeoXvzgtCc5heF82bO+75C+47jO7R4AvCOU/XD6bzARh2CwuYkmU1TqZtgTLfIG2UwqPLc78UPP+wcvy3W3y4vLtKOGDvFAr7ZPJDlclG/aS2s+PRrZpKUctMzonVU05LuWwL5EsogKeWg18IuQNIkCu+oKQ7/OG9eZG7fESWpAyZopj2qpxlASz3+IbJLbsajWUrUrMnhGrmiNNMsLrzYPtxbmqvG/klSLOB9vxIFpRPj/0P0Tv+dSZKUgnb8wVIXdsUkpPsOH5KUep+nci7TCuZSQniM+WNmUld5GrPMPCAlvl42b/A5hg5iNYPqO802gxkwreDOnTu8dHaqPpSJBfz1hx9Hv70j9JDKRnRk+/aDgp8hJc6z7C6j/D4++JrHiczJHTuVqtKaeEISE8lFZ4O7XpsJJQqDu9HqflMIGLpngDjPOt2hNDEtMK7GkydPho4ruF10MTgFm5uytt9emu9C/w0+JPslriNJqUe/57bTFKuL63gG20I5V8KJAa1y2D+Zz+kG03ch+zSdg7meF4XjYD3kBaXyghgXskfDeiUW8M/wav2pGuqNpjl7XxWONxyS1FlhA/n7KIPUndPSTa9ze2nv1T+Gng99kqTPeZJ0z+2J3d9wn5EDWxzI07sJGiLDsIADrtGzHvIVpSi6rn/BaO4GXw1Ig/W0BmbdB87qhmwkptpPe7UvMdm/jPnYRNRxYocIDN+/KfFNGNS/0awE7ISMqddPwHrKYComRuI8SVOPmL3NZIzxNGuY6VAJ53tYT6f9UmtpafggL9aMx1I29B5ijL/8dXv3SDvm8i2NvgUylNYmOnRqtaJoHKyHWRUxrjgjjAV8nIb/H3X1Hg/gJZhIELSicbAe9rOvKrEmpQWePZeA5OATUhZmyyYA72Ytg/ro1uU8S3q2O99mPZr9oIoY16Dmu+st8N3euGSemAcmPJIjaxIznplNv3a5jmlMD83pue00xerMerRE+0Uwrn7dnFdmgT/PMxco13u8Dpel8mdnw3GwHmZRz5pN/coNa3asqH7YRpPUQ3D3FSbS35Nsc9RtgdJ9/btbla9H3U9v+3GCbzvje72XzL2KA0IyXcZrJeXfc8YbjNUe3gMW+OF9daU0LfBXCs7hB5N+4JX78/DDSYlmBmxOPfDe7fI/8G38s5RAOtAMspVsHqg4YYXU0znyD305NOn/xegwOLnKPbx7s/yftEf0w4zF6lgPWA9YD1gPWA9YD1gPWA9YD1gPpN0D/wPBQCiWY5kFsAAAAABJRU5ErkJggg==\");\n\n//# sourceURL=webpack://rule-designer/./assets/images/search-tree-empty.png?");

/***/ })

}]);