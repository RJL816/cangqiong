(self.webpackChunkprint_designer=self.webpackChunkprint_designer||[]).push([[43,820,400],{54043:function(e,t,n){"use strict";n.r(t),n.d(t,{PrintDesigner:function(){return Jy},useInstallFontFamilyOnline:function(){return Wy}});var r={};n.r(r),n.d(r,{SetStatistic:function(){return q}});var a={};n.r(a),n.d(a,{InputQuery:function(){return Bd}});var o={};n.r(o),n.d(o,{InputQuery:function(){return Ld}});var i={};n.r(i),n.d(i,{GridCheckBox:function(){return og},Query:function(){return ng},SortSettings:function(){return rg},filterSetting:function(){return ag}});var l={};n.r(l),n.d(l,{InputQuery:function(){return ig}});var c={};n.r(c),n.d(c,{InputQuery:function(){return lg}});var u={};n.r(u),n.d(u,{ImageUpload:function(){return sg},Query:function(){return cg}});var s={};n.r(s),n.d(s,{ImageUpload:function(){return gg},PaperDirection:function(){return dg}});var d={};n.r(d),n.d(d,{InputQuery:function(){return pg},Query:function(){return pg}});var f={};n.r(f),n.d(f,{InputQuery:function(){return Ld}});var g={};n.r(g),n.d(g,{Query:function(){return ng}});var h={};n.r(h),n.d(h,{MergeByField:function(){return Eg},MergeSummaryField:function(){return wg},Query:function(){return Dg}});var v={};n.r(v),n.d(v,{FileNameInput:function(){return Gg},Input:function(){return Rg},Radio:function(){return Ng},Select:function(){return Tg}});n(19600);var p=n(47976),m=n.n(p),C=n(39448),D=n.n(C),E=n(55748),w=n.n(E),k=n(54120),A=n.n(k),x=n(63808),b=n.n(x),I=n(45040),B=n.n(I),S=n(72048),M=n(30112),L=n(18860),R=n.n(L),T=n(75984),F=n.n(T),N=n(81744),G=n.n(N),Z=n(45076),Q=n.n(Z),j=n(39832),J=n.n(j),P=n(7312),O=n.n(P),U=(n(87964),n(54116)),W=n(18040),z=n.n(W),H=n(43400),K=n.n(H),V=n(45548),Y=n.n(V);function q(e,t){var n=e.Key,r=e.Value,a={};n=Y().camelCase(n),r=Y().camelCase(r);var o=t[n],i=t[r];return o?(/\S+\((\S+)\)$/.test(o)?a[n]="noStat"===i?"=$".concat(o.replace(/\S+\((\S+)\)$/g,"$1")):o.replace(/\S+\((\S+)\)$/g,"=".concat(i,"($1)")):a[n]=o.replace(/^\=\$(\S+)/,"=".concat(i,"($1)")),a):a}var X,$,ee,te,ne,re,ae=function(){var e={dataActions:[],propertyActions:[]},t=[[r,"DataCell"]];return O()(t).call(t,(function(t){var n,r=(0,S.c)(t,2),a=r[0],o=r[1];O()(n=m()(a)).call(n,(function(t){e.dataActions.push([t,a[t],o])}))})),e},oe=n(80284),ie=n(13760),le=n.n(ie),ce=n(41256),ue=n.n(ce),se=n(29636),de=n.n(se),fe=n.p+"images/10a6246291a0d3b504113bd071fd58d0.png",ge=n.p+"images/a4a05f34e894ef1e8cd1b3e97e33a010.png",he=n(44820),ve=n.n(he),pe=(n(35176),(0,n(19980).o)(!0)),me=function(e,t){var n=e.getBoundingClientRect(),r=n.left,a=n.top;t.style.top=a+"px",t.style.left=r+"px"},Ce=function(e){e.style.opacity=0,e.style.visibility="hidden"},ye=function(e,t){if(t){var n=t();return function(){n&&n()}}var r=document.querySelector(e);return r.style.opacity=1,r.style.visibility="visible",function(){Ce(r)}},De={current:null},Ee=function(e){var t=e.handlePassPrintActionGuide,n=pe(),r=(0,S.c)(n,2),a=r[0],o=r[1],i=(0,H.useRef)(null),l=(0,H.useRef)((function(){})),c=(0,H.useRef)(0),u="print-guide-title",s="print-guide-content",d="print-guide-progress",f="print-guide-card",g=".print-guide-mock-image-print-setting",h="print-guide-layer-mask",v=(0,H.useCallback)((function(e,t){var n;return G()(n="<div class='".concat(t,"'>")).call(n,e,"</div>")}),[]),p=function(){var e=document.querySelector(".".concat(h));e&&document.body.removeChild(e)},m=(0,H.useMemo)((function(){var e;return[{element:g,title:v((0,W.getLangMsg)("printd.grid.key0107"),u),_image:ge,_parent:'[data-portalid="print-designer-top-view-right"]',position:"left-center",intro:v((0,W.getLangMsg)("printd.components.key0050"),s)},{element:".print-guide-mock-image-control",title:v((0,W.getLangMsg)("printd.components.key0051"),u),_image:"data:image/png;base64,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EjJCRsgIGSEjISNkhIyQETJCRkJGyAgZISNkJGSEjJARMkJGyEjICBkhI2SEjISMkBEyQkbICBkJGSEjZISMkJGQETJCRsgIGSEjISNkhIyQETISMkJGyAgZISNkJGSEjJARMkJGQkbICBkhI2SEjISMkBEyQkbISMgIGSEjZISMkJGQETJCRsgIGQkZISNkhIyQETISMkJGyAgZISMhI2SEjJARMkJGQkbICBkhI2QkZISMkBEyQkbIuBGEjJARMkJGyEjICBkhI2SEjJBBRsgIGSEjZISMhIyQETJCRsgIGWSEjJARMkJGyEjICBkhI2SEjISMkBEyQkbICBkJGSEjZISMkJGQETJCRsgIGSEjISNkhIyQETISMkJGyAgZISNkJGSEjJARMkJGQkbICBkhI2SEjISMkBEyQkbISMgIGSEjZISMkJGQETJCRsgIGQkZISNkhIyQETISMkJGyAgZISMhI2SEjJARMkJGQkbICBkhI2QkZISMkBEyQkbISMgIGSEjZISMhIyQETJCRsgIGQkZISNkhIyQkZARMkJGyAgZISMhI2SEjJARMhIyQkbICBkhI2QkZISMkBEyQkZCRsgIGSEjZISMhIyQETJCRshIyAgZISNkhIyQkZARMkJGyAgZCRkhI2SEjJARMhIyQkbICBkhIyEjZISMkBEyQkZCRsgIGSEjZCRkhIyQETJCRshIyAgZISNkhIyEjJARMkJGyAgZCRkhI2SEjJCRkBEyQkbICBkhIyEjZISMkBEyEjJCRsgIGSEjZCRkhIyQETJCRkJGyAgZISNkhIyEjJARMkJGyEjICBkhI2SEjJBxIwgZISNkhIyQkZARMkJGyAgZIYOMkBEyQkbICBkJGSEjZISMkBEyyAgZISNkhIyQkZARMkJGyAgZCRkhI2SEjJARMhIyQkbICBkhIyEjZISMkBEyQkZCRsgIGSEjZCRkhIyQETJCRshIyAgZISNkhIyEjJARMkJGyAgZCRkhI2SEjJCRkBEyQkbICBkhIyEjZISMkBEyEjJCRsgIGSEjZCRkhIyQETJCRkJGyAgZISNkhIyEjJARMkJGyEjICBkhI2SEjJCRkBEyQkbICBkJGSEjZISMkBEyEjJCRsgIGSEjISNkhIyQETJCRkJGyAgZISNkJGSEjJARMkJGyEjICBkhI2SEjISMkBEyQkbICBkJGSEjZISMkJGQETJCRsgIGSEjISNkhIyQETISMkJGyAgZISNkJGSEjJARMkJGQkbICBkhI2SEjISMkBEyQkbISMgIGSEjZISMkJGQETJCRsgIGQkZISNkhIyQETISMkJGyAgZISMhI2SEjJARMkJGQkbICBkhI2QkZISMkBEyQkbISMgIGSEjZISMhIyQETJCRsgIGQkZISNkhIyQkZARMkJGyAgZIeNGEDJCRsgIGSEjISNkhIyQETJCBhkhI2SEjJARMhIyQkbICBkhI2SQETJCRsgIGSEjISNkhIyQETISMkJGyAgZISNkJGSEjJARMkJGQkbICBkhI2SEjISMkBEyQkbISMgIGSEjZISMkJGQETJCRsgIGQkZISNkhIyQETISMkJGyAgZISMhI2SEjJARMkJGQkbICBkhI2QkZISMkBEyQkbISMgIGSEjZISMhIyQETJCRsgIGQkZISNkhIyQkZARMkJGyAgZISMhI2SEjJARMhIyQkbICBkhI2QkZISMkBEyQkZCRsgIGSEjZISMhIyQETJCRshIyAgZISNkhIyQkZARMkJGyAgZCRkhI2SEjJARMhIyQkbICBkhIyEjZISMkBEyQkZCRsgIGSEjZCRkhIyQETJCRshIyAgZISNkhIyEjJARMkJGyAgZCRkhI2SEjJCRkBEyQkbICBkhIyEjZISMkBEyEjJCRsgIGSEjZCRkhIyQETJCRkJGyAgZISNkhIyEjJARMkJGyEjICBkhI2SEjJCRkBEyQkbICBkJGSEjZISMkBEyEjJCRsgIGSEjISNkhIyQETJCxo0gZISMkBEyQkZCRsgIGSEjZIQMMkJGyAgZISNkJGSEjJARMkJGyCAjZISMkBEyQkZCRsgIGSEjZCRkhIyQETJCRshIyAgZISNkhIyEjJARMkJGyAgZCRkhI2SEjJCRkBEyQkbICBkhIyEjZISMkBEyEjJCRsgIGSEjZCRkhIyQETJCRkJGyAgZISNkhIyEjJARMkJGyEjICBkhI2SEjJCRkBEyQkbICBkJGSEjZISMkBEyEjJCRsgIGSEjISNkhIyQETJCRkJGyAgZISNkJGSEjJARMkJGyEjICBkhI2SEjISMkBEyQkbICBkJGSEjZISMkJGQETJCRsgIGSEjISNkhIyQETISMkJGyAgZISNkJGSEjJARMkJGQkbICBkhI2R0vWSkLiGjzmT+D/QuigoVnf8fAAAAAElFTkSuQmCC",_parent:'[data-portalid="print-designer-top-view-left"]',position:"right-center",intro:v((0,W.getLangMsg)("printd.components.key0052"),s)},{element:".print-guide-mock-image-datasource",title:(0,W.getLangMsg)("printd.components.key0013"),_image:fe,_parent:'[data-portalid="print-designer-top-view-left"]',parent:".print-guide-mock-image",position:"right-center",intro:G()(e="\n          <div>\n           ".concat(v((0,W.getLangMsg)("printd.components.key0053"),s),"\n           ")).call(e,v((0,W.getLangMsg)("printd.components.key0054"),s),"\n          </div>\n          ")},{element:".print-guide-mock-image-property",title:v((0,W.getLangMsg)("printd.grid.key0108"),u),_image:"data:image/png;base64,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hIyQETISMkJGyAgZISMhI2SEjJARMkJGQkbICBkhI2QkZISMkBEyQkbISMgIGSEjZISMhIyQETJCRsgIGQkZISNkhIyQkZARMkJGyAgZISMhI2SEjJARMhIyQkbICBkhI2QkZISMkBEyQkZCRsgIGSEjZISMhIyQETJCRshIyAgZISNkhIyQkZARMkJGyAgZCRkhI2SEjJARMhIyQkbICBkhIyEjZISMkBEyQkZCRsgIGSEjZCRkhIyQETJCRshIyAgZISNkhIyEjJARMkJGyAgZCRkhI2SEjJCRkBEyQkbICBkhIyEjZISMkBEyEjJCRsgIGSEjZCRkhIyQETJCRkJGyAgZISNkhIwZCBkhI2SEjJCRkBEyQkbICBkhg4yQETJCRsgIGQkZISNkhIyQkZARMkJGyAgZISMhI2SEjJARMhIyQkbICBkhI2QkZISMkBEyQkZCRsgIGSEjZISMhIyQETJCRshIyAgZISNkhIyQkZARMkJGyAgZCRkhI2SEjJARMhIyQkbICBkhIyEjZISMkBEyQkZCRsgIGSEjZCRkhIyQETJCRshIyAgZISNkhIyEjJARMkJGyAgZCRkhI2SEjJCRkBEyQkbICBkhIyEjZISMkBEyEjJCRsgIGSEjZCRkhIyQETJCRkJGyAgZISNkhIyEjJARMkJGyEjICBkhI2SEjJCRkBEyunT/A+RKXPPypoMLAAAAAElFTkSuQmCC",_parent:'[data-portalid="print-designer-top-view-right"]',position:"left-center",intro:v((0,W.getLangMsg)("printd.components.key0055"),s)},{element:"#kdesigner-top-view-main",_isDynamic:!0,title:v((0,W.getLangMsg)("printd.components.key0056"),u),_image:"data:image/png;base64,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",_parent:"#kdesigner-top-view-main",position:"bottom",intro:v((0,W.getLangMsg)("printd.components.key0057"),s)}]}),[]),C=document.body.style.overflow,y=(0,H.useRef)({}),D=(0,H.useCallback)((function(){var e,n;document.body.style.overflow=C,i.current=null,l.current=null,l.current=null,O()(m).call(m,(function(e){var t=e._unmountContainer;t&&(t(),e._unmountContainer=null,e._container=null,e._parentDom=null)})),o(!1),O()(e=ue()(y.current)).call(e,(function(e){return e&&e()})),null===(n=document.querySelector(".".concat(f)))||void 0===n||n.remove(),t&&t(),p()}),[]),E=(0,H.useCallback)((function(){O()(m).call(m,(function(e){var t=e._parentDom,n=e._container;t&&n&&me(t,n)}))}),[]),w=(0,H.useCallback)((function(e){l.current&&l.current(),c.current=e;var t=m[c.current],n=t.element;if(t._isDynamic){l.current=ye(n,(function(){var e=document.querySelector(n);if(e){var t=e.style.pointerEvents;e.style.pointerEvents="none";var r=function(){e.style.pointerEvents=t};return y.current.removeDynamicEffect=r,r}}))}else l.current=ye(n)}),[]),k=(0,H.useCallback)((function(e){le()((function(){!function(e,t,n){if(!document.querySelector(".".concat(t))){var r=document.querySelector(e),a=document.createElement("span");a.classList.add(t),r?(r.insertBefore(a,r.firstElementChild),n&&n()):le()((function(){var r=document.querySelector(e);r?(r.insertBefore(a,r.firstElementChild),n&&n()):W.console.log("createProgressText fail",e,t,n)}))}}(".driver-popover-footer",d,(function(){!function(e,t,n){var r;document.querySelector(".".concat(e)).textContent=G()(r="".concat(t," / ")).call(r,n)}(d,e.currentStep+1,m.length),function(e,t,n){var r,a=document.querySelector(".".concat(e));O()(r=[t,n]).call(r,(function(e){var t=document.createElement("div");t.classList.add(e),null==a||a.appendChild(t)}))}(f,"print-guide-line-shape","print-guide-ball-shape")}))}),150)}),[]),A=(0,H.useRef)(!1);return(0,H.useEffect)((function(){if(a){O()(m).call(m,(function(e){var t=e.element,n=e._parent,r=e._image,a=e._isMount;if(!e._isDynamic){var o=function(e){var t=e._parent,n=e.element,r=e._isMount,a=e._image;if(r)W.console.log("createContainer isMount",t,n,r,a);else{var o=document.querySelector(t);if(o){var i=document.createElement("div");me(o,i),i.style.zIndex="1050",i.style.position="fixed",i.classList.add(n.substring(1)),o.appendChild(i);var l=o.style.position;o.style.position="relative";var c=document.createElement("div"),u=document.createElement("img");return u.src=a,c.classList.add("print-guide-mock-image"),c.appendChild(u),i.appendChild(c),Ce(i),{_parentDom:o,_container:i,_unmountContainer:function(){null==o||o.removeChild(i),o.style.position=l||"static"}}}W.console.log("createContainer parent",t,n,r,a)}}({element:t,_parent:n,_isMount:a,_image:r});o&&(e._isMount=!0),(0,oe.c)(e,o)}})),De.current||le()((function(){De.current=new(ve())({animate:!1,doneBtnText:(0,W.getLangMsg)("printd.components.key0058"),closeBtnText:(0,W.getLangMsg)("printd.components.key0059"),nextBtnText:(0,W.getLangMsg)("printd.components.key0060"),prevBtnText:(0,W.getLangMsg)("printd.components.key0061"),keyboardControl:!0,overlayClickNext:!1,padding:0,allowClose:!1,onNext:function(e){var t=e.options.element,n=de()(m).call(m,(function(e){return t===e.element}));n===m.length-1?D():w(n+1),W.console.log("onNext",e)},onPrevious:function(e){var t=e.options.element,n=de()(m).call(m,(function(e){return t===e.element}));0!==n&&w(n-1),W.console.log("onPrevious",e)},onDeselected:function(e){W.console.log("onDeselected",e),De.current.isActivated||(D(),p())},onHighlighted:function(){k(De.current),document.body.style.overflow="hidden",function(){if(!document.querySelector(".".concat(h))){var e=document.createElement("div");e.classList.add(h),document.body.appendChild(e)}}(),W.console.log("driver",De.current)},onHighlightStarted:function(){A.current||(w(0),A.current=!0)}}),De.current.defineSteps(F()(m).call(m,(function(e){var t,n,r=e.element,a=e.title,o=e.intro,i=e.position,l=G()(t="".concat(r.substring(1),"-card ")).call(t,r!==g?f:G()(n="".concat(f," ")).call(n,"print-guide-first-card"));return{element:r,popover:{className:l,title:a,description:o,position:i}}}))),le()((function(){var e;null===(e=De.current)||void 0===e||e.start(0)}),500)}));var e=function(){var e;E(),null===(e=De.current)||void 0===e||e.refresh(),k(De.current)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}}),[]),null};function we(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}var ke="container_node_cls",Ae="scale_node_cls",xe="normal_node_cls",be="hover_node_cls",Ie="text_node_cls",Be="cell_node_cls",Se="not_cache_node_cls",Me=17,Le=20,Re="horAlignment",Te="lineSpace",Fe="verAlignment",Ne="fontName",Ge="fontSize",Ze="bold",Qe="italic",je="underLine",Je="strike",Pe="foreColor",Oe="backColor",Ue="border",We="left",ze="right",He="bottom",Ke="vertical_center",Ve="horizontal_center",Ye="horizontal_distribution",qe="vertical_distribution",Xe="x",_e="y",$e="width",et="height",tt="id",nt=[Re,Fe,Ne,Ge,Ze,Qe,je,Pe,Oe,Ue,Je,Te],rt=[Ze,Ge,Ne,Re,Fe,je,Pe,Oe,Qe,Je,Te],at="#666666",ot="#5582F3",it="#0E5FD8",lt=["top","bottom","left","right","inner"],ct=["top","bottom","left","right"],ut={color:Q()(lt).call(lt,(function(e,t){return e[t]="",e}),{}),width:Q()(lt).call(lt,(function(e,t){return e[t]=0,e}),{}),style:Q()(lt).call(lt,(function(e,t){return e[t]="",e}),{})},st=(Q()(lt).call(lt,(function(e,t){return e[t]=0,e}),{}),"1"),dt="3",ft="SubDataGrid",gt="TableTail",ht="DataGrid",vt="CardGrid",pt=["DataGrid","LayoutGrid",ft,"CardGrid"],mt=["DataRow"],Ct=["DataColumn"],yt=["DataCell","LayoutCell"],Dt=["SubDataCell"],Et="Detail",wt="Normal",kt="Statistic",At="Layout",xt="Group",bt={bindField:"",bindText:"",viewText:"",dataSource:"",dsType:"",formulaData:null},It=[tt,"key","parentId"],Bt="rowId",St="columnId",Mt=G()(X=[]).call(X,It,[Bt,St,Ue]),Lt={left:0,right:0,top:0,bottom:0},Rt="borderType",Tt="innerBorder",Ft="outBorder",Nt="outBorderBlod",Gt="allBorder",Zt="noneBorder",Qt="left",jt="top",Jt="right",Pt="bottom",Ot="rowHeight",Ut="columnWidth",Wt=10,zt=function(e){var t;return G()(t="".concat(e,", ")).call(t,"arial, sans-serif")},Ht={"思源宋体":["SourceHanSerifSC-Regular","otf"],"思源黑体":["SourceHanSansSC-Regular","otf"],"方正细圆简体":["FZXiYuan-M01S","ttf"],"方正兰亭黑简体":["FZLanTingHeiS-R-GB","ttf"],"阿里巴巴普惠体":["Alibaba-PuHuiTi-Regular","otf"]},Kt=(function(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?O()(n=we(Object(a),!0)).call(n,(function(t){(0,M.c)(e,t,a[t])})):A()?b()(e,A()(a)):O()(r=we(Object(a))).call(r,(function(t){B()(e,t,w()(a,t))}))}}({},Q()($=m()(Ht)).call($,(function(e,t){var n=(0,S.c)(Ht[t],1)[0];return e[t]=zt(n),e}),{})),"思源宋体 CN"),Vt={},Yt=function(e){var t,n=Vt[e];return zt(G()(t="".concat((n||"")+(n?", ":""))).call(t,Kt))},qt="Header",Xt="Footer",_t="SubDataGrid",$t="Line",en=G()(ee=[qt,Xt,_t]).call(ee,yt,[gt]),tn=G()(te=[qt,Xt,_t]).call(te,yt),nn=[qt,Xt,_t],rn=G()(ne=[]).call(ne,yt),an="arrow-down",on=G()(re=[]).call(re,yt),ln=".5",cn="1",un="2",sn="cq-print-designer-copy",dn="cq-print-designer-gridcell-copy",fn=["char","char","char","none"],gn={text:"Text",richText:"RichText"},hn="kdcdc",vn=(0,H.createContext)(null);vn.displayName="PrintRootContext";var pn=(0,H.createContext)(null);pn.displayName="PrintDesignerContext";pn.displayName="DataSourceViewContext";var mn=(0,H.createContext)({});mn.displayName="DataGridContext";var Cn=(0,H.createContext)({});Cn.displayName="CanvasSelectContext";var yn=n(81043),Dn=n(39568),En=n.n(Dn),wn=n(12640),kn=n.n(wn),An=n(82600),xn=n.n(An),bn=n(37152),In=n.n(bn),Bn=n(73400),Sn=n.n(Bn),Mn=function(e){var t=e.selectionContext,n=e.dataContext,r=(e.meta,e.activedSelectId),a=e.modelFactory,o=n.getRootId(),i=n.findControl(r||o);i||W.console.log("useLastSelectedModal",r,t.getSelection());var l=a({type:i.type});return{modelData:l.Properties,selectModel:l,activedSelectId:r,selectItem:i,rootId:o,isRootId:o===r}},Ln=function(e){var t,n=e.dataContext,r=e.selectionContext,a=e.meta,o=e.activedSelectId,i=e.modelFactory,l=Mn({dataContext:n,selectionContext:r,meta:a,activedSelectId:o,modelFactory:i}),c=l.selectItem;return!l.isRootId&&c&&c.dataSource&&c.bindField?(W.console.log("selectItem useScrollKey",c),G()(t="".concat(c.dataSource,"-")).call(t,c.bindField)):""},Rn=n.p+"images/b7faef5a0338c01e97e8b6d7d8f7511f.png",Tn=n(89843),Fn=n.n(Tn),Nn=n(97440),Gn=n.n(Nn),Zn=n(64248),Qn=n.n(Zn),jn=n(12388),Jn=n.n(jn),Pn=n(34984),On=n(58496),Un=n(71252),Wn=n.n(Un),zn=n(47332),Hn=n.n(zn),Kn=n(65624),Vn=n.n(Kn),Yn=function e(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,a=0;a<n.length;a++){var o=n[a],i=(o.isReportEntryGroup,o.Key,o.Name),l=o.ViewName,c=o.Items,u=(o.IsDs,o.IgnoreZero),s=o.IgnoreTailZero,d=o.dataSource,f=o.bindField,g=o.dsTypeKey,h=o.dataSourceText,v="".concat(r?r+"."+i:i);if(t===qn(d,f))return{dataSource:d,ancestorTitle:v,dataSourceText:h,key:f,dsType:g,title:l||i,IgnoreZero:u,IgnoreTailZero:s};var p=e(t,c||[],v);if(p)return p}},qn=function(e,t){var n,r,a=G()(n=G()(r="".concat(e||"")).call(r,e&&t&&"-")).call(n,t||"");if(Xn(a)){var o,i=a.split("."),l="",c=R()(o=Q()(i).call(i,(function(e,t,n){var r;-1!==En()(t).call(t,"-")&&Xn(t)?(l=Hn()(i).call(i,(function(e,t){return!Xn(e)&&t>n})),e.push(G()(r="".concat(t.split("-")[0],"-")).call(r,l))):Xn(t)||e.push(t);return e}),[])).call(o,(function(e){return e!==l}));a=c.join(".")}return a},Xn=function(e){return"string"==typeof e&&-1!==En()(e).call(e,"reportEntryGroup")},_n=function e(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=t,a=0;a<n.length;a++){var o=n[a],i=(o.Key,o.Name),l=o.Items,c=(o.IsDs,o.dataSource),u=o.bindField,s=o.dsTypeKey,d=o.dataSourceText,f=o.ViewName,g=i;if(0===En()(r).call(r,g)){var h=r.replace(i,"");if(""!==h){if("."!==h[0])continue;r=h.substring(1)}else r="";if(""===r)return l?null:{dsType:s,dataSource:c,viewText:f||i,key:u,dataSourceText:d};var v=e(r,l);if(v)return v}}},$n=function(e){if(!e)return{isBindField:!1,bindField:e};var t=/^\=\$.?/g.test(e);return{isBindField:t,bindField:t?e.replace(/^\=\$/,""):e}},er=function(e){var t,n;return Q()(t=R()(n=m()(e)).call(n,(function(e){return"undefined"!==e}))).call(t,(function(t,n){return t[n]=e[n],t}),{})},tr=function e(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=0;r<n.length;r++){var a=n[r],o=(a.Key,a.Name,a.Items),i=(a.IsDs,a.dataSource),l=a.bindField;if(t===qn(i,l))return a;var c=e(t,o||[]);if(c)return c}},nr=function(e,t){var n=e.type,r=e.key,a=Yn(r,t);if(a){var o=a.ancestorTitle,i=a.key,l=a.dataSource,c=a.dataSourceText,u=a.title,s=a.dsType,d=a.IgnoreZero,f=a.IgnoreTailZero;return"Text"===n?{bindText:"=$".concat(o),bindField:i,dataSource:l,dataSourceText:c,dsType:s,title:u,ignoreZero:d,ignoreTailZero:f}:{bindText:"=$".concat(o),bindField:i,dataSource:l,dsType:s,title:u,ignoreZero:d,ignoreTailZero:f}}return{}},rr=function e(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,r=0;r<t.length;r++){var a=t[r];if(n(a))return a;var o=e(a.Items,n);if(o)return o}},ar=function(e){var t=[];return function e(t,n){var r=t.key,a=t.Items,o=t.IsField,i=t.dataSource,l=t.bindField;r=r||qn(i,l),!o&&a&&a.length||n.push(r),a&&O()(a).call(a,(function(t){return e(t,n)}))}(e,t),t},or=function(e,t,n){var r=e.findControl(t)||{},a=["Text","Barcode","QRCode","Image"],o=e.findControl(r.parentId)||{};if(null!=r&&r.parentId&&xn()(a).call(a,r.type)){var i=e.findControl(o.parentId)||{};if(i.type===n)return i.dataSource}else if(o.type===n)return o.dataSource},ir=function(e){var t;return function n(r){return Vn()(r).call(r,(function(r){var a=r.dataSource===e;return t=a&&r.DsType,a||r.Items&&n(r.Items)})),t}},lr=n(82504),cr=n(74808),ur={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function sr(){var e=(0,H.useState)(null),t=(0,S.c)(e,2),n=t[0],r=t[1],a=(0,H.useState)(ur),o=(0,S.c)(a,2),i=o[0],l=o[1],c=(0,H.useMemo)((function(){return new lr.c((function(e){if(e[0]){var t=e[0].contentRect,n=t.x,r=t.y,a=t.width,o=t.height,i=t.top,c=t.left,u=t.bottom,s=t.right;l({x:n,y:r,width:a,height:o,top:i,left:c,bottom:u,right:s})}}))}),[]);return(0,cr.c)((function(){if(n)return c.observe(n),function(){c.disconnect()}}),[n]),[r,i]}function dr(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function fr(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?O()(n=dr(Object(a),!0)).call(n,(function(t){(0,M.c)(e,t,a[t])})):A()?b()(e,A()(a)):O()(r=dr(Object(a))).call(r,(function(t){B()(e,t,w()(a,t))}))}return e}var gr=function e(t,n,r){return Q()(t).call(t,(function(t,a){var o=a.Items;return o&&(a=r&&r===a.DsType||!r?fr(fr({},a),{},{Items:e(o,n)}):a),(n(a)||a.Items&&a.Items.length)&&t.push(a),t}),[])},hr=function(e,t){return gr(e,(function(e){var n=e.Type;return n&&n!==t}))},vr=function e(t){return function(n){return Q()(n).call(n,(function(n,r){var a=r[t],o=r.Items;return!a&&o&&(r=fr(fr({},r),{},{Items:e(t)(o)})),(a||r.Items&&r.Items.length)&&n.push(r),n}),[])}},pr=vr("IsDataGridDs"),mr=vr("IsSubDataGridDs"),Cr=function e(t,n){if(!n)return t;var r=function(e,t){return"string"==typeof e?e===t:!!Jn()(e)&&xn()(e).call(e,t)},a=Q()(t).call(t,(function(t,a){var o=a,i=o.dataSource,l=o.Items;return l&&!r(n,i)&&(a=fr(fr({},a),{},{Items:e(l,n)})),(i&&r(n,i)||a.Items&&a.Items.length)&&t.push(a),t}),[]);return a},yr=function(e,t){return null!=t&&t.length?gr(e,(function(e){var n=e.bindField,r=e.dataSource,a=qn(r,n);return a&&xn()(t).call(t,a)})):e},Dr=["Entry","ReportEntry","Subentry"];function Er(e,t){return Q()(e).call(e,(function(e,n){var r=t===n.dataSource,a=n.Items;return!r&&a&&(n=fr(fr({},n),{},{Items:Er(a,t)})),(r||n.Items&&n.Items.length)&&e.push(n),e}),[])}var wr=function(e,t){if(function(e,t){if(t=Hn()(t).call(t,(function(e){return"Main"===e.DsType})),!t)return;t=t.Items;return function t(n){return Hn()(n).call(n,(function(n){return e===n.dataSource||n.Items&&t(n.Items)}))}(t)}(e,t)){var n=[Hn()(t).call(t,(function(e){return"Main"===e.DsType}))];O()(t).call(t,(function(e){return("Ref"===e.DsType||"Custom"===e.DsType)&&n.push(e)})),t=function t(n){var r=Q()(n).call(n,(function(n,r){var a=r.Items,o=r.DsType;return xn()(Dr).call(Dr,o)||e===r.dataSource||(a?n.push(fr(fr({},r),{},{Items:t(a)})):n.push(r)),e===r.dataSource&&n.push(r),n}),[]);return r}(n)}else t=Er(t,e);return t};function kr(e){return function(t){return Q()(t).call(t,(function(t,n){var r,a,o=n.DsType&&xn()(e).call(e,n.DsType);return!o||null!=n&&null!==(r=n.Items)&&void 0!==r&&r.length||t.push(n),o&&(null==n||null===(a=n.Items)||void 0===a?void 0:a.length)>0&&t.push(fr(fr({},n),{},{Items:kr(e)(n.Items)})),t}),[])}}var Ar=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;return Hn()(t).call(t,(function(t){return n===t.dataSource||t.Items&&e(t.Items,n)}))},xr=["controlType","draggable","checkable","meta","definition","onSelect","onCheck","checkedKeys","showDefinitionId","showDataSourceTitle","filterTreeData","emptyNode","onDataChange","scrollToKey","expandedKeys"];function br(e,t){var n=void 0!==Gn()&&Qn()(e)||e["@@iterator"];if(!n){if(Jn()(e)||(n=function(e,t){var n;if(!e)return;if("string"==typeof e)return Ir(e,t);var r=kn()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Fn()(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ir(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw o}}}}function Ir(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Br(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sr(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?O()(n=Br(Object(a),!0)).call(n,(function(t){(0,M.c)(e,t,a[t])})):A()?b()(e,A()(a)):O()(r=Br(Object(a))).call(r,(function(t){B()(e,t,w()(a,t))}))}return e}var Mr=function(e){var t=e.type,n=e.style,r=void 0===n?{}:n;return t?K().createElement(U.Icon,{prefix:"printdesignericon",type:t,style:r}):K().createElement(U.Icon,{prefix:"printdesignericon",type:"zidingyi",style:r})},Lr=function(e){return e},Rr=function(e){var t=e.name,n=e.type,r=e.isDsRoot,a=e.tag,o=void 0===a?{}:a,i=o.Color,l=o.Name;return K().createElement("span",{className:Wn()("kds-tree-node",{"kds-tree-node-tag":r})},K().createElement(Mr,{type:n}),K().createElement("span",{style:{marginLeft:3}},t),l&&K().createElement(U.Tag,{style:{marginLeft:16},type:"attribute",color:i,className:"kds-tree-tag"},l))},Tr=["Sys"],Fr=function e(t,n,r){var a,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],l=arguments.length>5?arguments[5]:void 0,c=arguments.length>6?arguments[6]:void 0,u=arguments.length>7?arguments[7]:void 0;return R()(a=F()(n).call(n,(function(n){var a,s=n.Name,d=n.Type,f=n.Items,g=n.Key,h=n.DsType,v=n.IsDataGridDs,p=n.IsSubDataGridDs,m=n.Tag,C=(n.IsDs,n.ViewName),y=n.dataSource,D=n.bindField,E=n.Icon,w=f?{children:e(t,f,r,o,!1,h||l,v||c,p||u)}:{},k=C||s;return Sr(Sr({key:qn(y,D),title:K().createElement(Rr,{isDsRoot:i,type:E||d,name:r?(i?"Sys"===h:xn()(Tr).call(Tr,l))?k:G()(a="".concat(k,"(")).call(a,g,")"):k,tag:m}),type:d,dataSource:y,bindField:D,dsType:h||l,isDataGridDs:v||c,isSubDataGridDs:p||u,viewName:C},w),{},{checkable:o&&!(f&&f.length)&&"CardGrid"!==t,selectable:!f&&!o||"CardGrid"===t&&!(f&&f.length),expandOnClickNode:"CardGrid"===t},n)}))).call(a,Boolean)},Nr=function(e,t){var n=function e(t,n){return R()(t).call(t,(function(t){var r,a,o;"object"===(0,On.c)(t.Name)&&(t.Name=null===(o=t.Name)||void 0===o?void 0:o.zh_CN);if((-1!==(null===(r=t.ViewName||t.Name)||void 0===r?void 0:En()(r).call(r,n))||En()(a=t.Key.toLowerCase()).call(a,n)>-1)&&(!t.children||0===t.children.length))return!0;var i=t.children&&e(t.children,n);return(null==i?void 0:i.length)>0?(t.children=i,!0):void 0}))};return F()(e).call(e,(function(e){if(!(null==e?void 0:e.children))return e;var r=n(e.children,t);return Sr(Sr({},e),{},{children:r})}))},Gr=function(e){var t=[],n=function e(t,n){var r=t.key,a=t.Items,o=t.dataSource,i=t.bindField;r=r||qn(o,i),n.push(r),a&&O()(a).call(a,(function(t){return e(t,n)}))};return O()(e).call(e,(function(e){n(e,t)})),t},Zr=function e(t,n){var r,a=br(t);try{for(a.s();!(r=a.n()).done;){var o=r.value,i=o.key,l=o.children;if(n===i)return!0;if(l&&l.length){var c=e(l,n);if(c)return c}}}catch(e){a.e(e)}finally{a.f()}return!1};function Qr(e){var t=e.className;return K().createElement("div",{className:"".concat(t,"-empty")},K().createElement("img",{className:"".concat(t,"-empty-img"),src:Rn,width:"168",height:"96",alt:(0,W.getLangMsg)("printd.grid.key0004")}),K().createElement("div",{className:"".concat(t,"-empty-text")},(0,W.getLangMsg)("printd.grid.key0004")))}var jr=(0,H.memo)((function(e){var t=e.controlType,n=e.draggable,r=e.checkable,a=(e.meta,e.definition),o=e.onSelect,i=e.onCheck,l=e.checkedKeys,c=void 0===l?[]:l,u=e.showDefinitionId,s=e.showDataSourceTitle,d=e.filterTreeData,f=void 0===d?Lr:d,g=e.emptyNode,h=e.onDataChange,v=e.scrollToKey,p=e.expandedKeys,m=(0,Pn.c)(e,xr),C=(0,H.useRef)(null),y=(0,H.useRef)([]),D=(0,H.useState)(""),E=(0,S.c)(D,2),w=E[0],k=E[1],A=(0,H.useState)(!1),x=(0,S.c)(A,2),b=(x[0],x[1],(0,H.useState)([v])),I=(0,S.c)(b,2),B=I[0],M=I[1],L=(0,H.useContext)(W.SelectionContext),T=(0,H.useContext)(W.DataContext),N=(0,H.useState)(""),Z=(0,S.c)(N,2),Q=(Z[0],Z[1]),j=(0,H.useContext)(W.GlobalConfigContext).env,J=L.getSelection(),P=(0,H.useState)((function(){return Fr(t,f(a),u,r)})),O=(0,S.c)(P,2),z=O[0],V=O[1],q=(0,H.useMemo)((function(){return v&&Zr(z,v)?{scrollToKey:v}:{}}),[v,z]),X=(0,H.useState)((function(){var e,t,n=[];m.expandAll?n=Gr(z):n=F()(t=z||[]).call(t,(function(e){return e.key}));return G()(e=[]).call(e,(0,yn.c)(n),(0,yn.c)(p||[]))})),_=(0,S.c)(X,2),$=_[0],ee=_[1];(0,H.useEffect)((function(){t&&Q(t)}),[t]),(0,H.useEffect)((function(){var e=function(e){var t,n=T.findControl(e)||{},r=T.findControl(n.parentId)||{};if(n&&null!=n&&n.parentId&&xn()(t=["Text","Barcode","QRCode","Image"]).call(t,n.type)){var a,o=T.findControl(r.parentId)||{},i="DataGrid"===o.type&&xn()(a=["Detail","Group"]).call(a,r.cellType);return("CardGrid"===o.type||i)&&o.dataSource}var l,c="DataGrid"===r.type&&xn()(l=["Detail","Group"]).call(l,n.cellType);return("CardGrid"===r.type||c)&&r.dataSource}(J[0]);e&&"SubDataGrid"!==t&&(a=wr(e,a))}),[]),(0,H.useEffect)((function(){V((function(e){var n,o=Fr(t,f(a),u,r),i=F()(n=R()(o).call(o,(function(t){var n=F()(e).call(e,(function(e){return e.key}));return!xn()(n).call(n,t.key)}))).call(n,(function(e){return e.key}));return ee((function(e){var t;return G()(t=[]).call(t,(0,yn.c)(e),(0,yn.c)(i))})),o}))}),[a,r]),(0,H.useEffect)((function(){V((function(){var e=Fr(t,f(a),u,r),n=Nr(e,w);return"CardGrid"!==t&&(n=R()(n).call(n,(function(e){var t;return null==e||null===(t=e.children)||void 0===t?void 0:t.length}))),n}))}),[u]),(0,H.useEffect)((function(){h&&h(z)}),[z]),(0,H.useEffect)((function(){B.length&&!v&&M([])}),[J,v]);var te=(0,H.useCallback)((function(e){var t=e.event,n=e.node;if(((null==n?void 0:n.Items)||[]).length)return t.preventDefault();(t=t||window.event).currentTarget.style.backgroundColor="#fff",t.currentTarget.style.color="#000";var r={};for(var a in n)"function"!=typeof n[a]&&"title"!==a&&(r[a]=n[a]);var o={type:"dataSource",data:r,showDataSourceTitle:s};j[W.CONTROL_DRAG_DATA]=o}),[s]),ne=(0,H.useCallback)((function(e){var t=e.event;e.node;(t=t||window.event).currentTarget.style.backgroundColor="",t.currentTarget.style.color=""}),[]),re=(0,H.useCallback)((function(e){e.Key;var n=e.Items,r=e.key,a=e.DsType,o="print-tree-node";return!(n&&n.length)&&xn()(r).call(r,".")&&(o+=" print-tree-node-children"),n&&n.length&&(o+=" print-tree-node-parent"),"CardGrid"===t||"Main"!==a&&"Custom"!==a&&"Sys"!==a&&"Ref"!==a||(o+=" print-tree-root"),o}),[z]),ae=sr(),ie=(0,S.c)(ae,2),le=ie[0],ce=ie[1];ce.height,ce.width;return w||null!=z&&z.length||!g?K().createElement(K().Fragment,null,K().createElement(U.Input,{style:{marginBottom:12,width:"100%"},ref:C,value:w,placeholder:(0,W.getLangMsg)("printd.components.key0022"),borderType:"bordered",onChange:function(e){var n=e.target.value,o=Fr(t,f(a),u,r);if(n){var i=Nr(o,n);"CardGrid"!==t&&(i=R()(i).call(i,(function(e){var t;return null==e||null===(t=e.children)||void 0===t?void 0:t.length}))),w||(y.current=$),V(i);var l=Gr(i);ee(l)}else Y().isEqual(o,z)||V(o),ee(y.current);k(n)},allowClear:!0,suffix:K().createElement("div",null,K().createElement(U.Icon,{type:"search",style:{cursor:"pointer"}}))}),!w||null!=z&&z.length?K().createElement("div",{className:"kd-datasource-tree",ref:le},K().createElement("div",{className:"tree-wrap"},K().createElement(U.Tree,(0,oe.c)({name:"definition",draggable:!!n,checkable:!!r,setTreeNodeClassName:re},q,{expandedKeys:$,showIcon:!1,style:{width:"100%"},onDragStart:te,onDragEnd:ne,onExpand:function(e,t){var n,r=t.expanded,a=t.node.key,o=R()(e).call(e,Boolean);o=r?G()(n=[a]).call(n,(0,yn.c)(o)):R()(o).call(o,(function(e){return e!==a})),ee(o)},treeData:z,onSelect:function(e,n){var r=n.checked,a=n.node,i=n.event;M(e),"CardGrid"===t?(a.key=[a.key],o(a,t)):o(r,a,i)},selectedKeys:B,onCheck:i,checkedKeys:c,virtual:!1})))):K().createElement(Qr,{className:"left-datasource"})):g})),Jr=jr;function Pr(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Or(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?O()(n=Pr(Object(a),!0)).call(n,(function(t){(0,M.c)(e,t,a[t])})):A()?b()(e,A()(a)):O()(r=Pr(Object(a))).call(r,(function(t){B()(e,t,w()(a,t))}))}return e}function Ur(e){var t=e.className;return K().createElement("div",{className:"".concat(t,"-empty")},K().createElement("img",{className:"".concat(t,"-empty-img"),src:Rn,width:"168",height:"96",alt:(0,W.getLangMsg)("printd.grid.key0004")}),K().createElement("div",{className:"".concat(t,"-empty-text")},(0,W.getLangMsg)("printd.grid.key0004")))}var Wr=function(e){var t=e.visible,n=e.checkable,r=e.meta,a=e.definition,o=e.onSelect,i=e.className,l=e.emptyNode,c=void 0===l?K().createElement(Ur,{className:"left-datasource"}):l,u=e.expandedKeys,s=void 0===u?[]:u,d=e.selectedKey,f=e.filterTreeData,g=e.activedSelectId,h=e.checkedKeys,v=void 0===h?[]:h,p=e.modalTitle,m=e.onCancel,C=(0,H.useState)(!1),y=(0,S.c)(C,2),D=y[0],E=y[1],w=(0,H.useState)(!0),k=(0,S.c)(w,2),A=k[0],x=k[1],b=(0,H.useState)([]),I=(0,S.c)(b,2),B=I[0],M=I[1],L=(0,H.useState)(v),T=(0,S.c)(L,2),N=T[0],Z=T[1],Q=(0,H.useRef)(null),j=(0,H.useContext)(W.DataContext),J=(0,H.useContext)(W.SelectionContext),P=(0,H.useContext)(W.DataFactoryContext).modelFactory,O=j.getRootId(),z=(j.findControl(O).language,d||Ln({dataContext:j,selectionContext:J,meta:r,activedSelectId:g,modelFactory:P})),V=(0,H.useCallback)((function(e,t){var n,r,o,i=t.checked,l=t.node,c=(t.event,ar(l)),u=i?G()(n=[]).call(n,(0,yn.c)(N),(0,yn.c)(c)):R()(N).call(N,(function(e){return!xn()(c).call(c,e)})),s=R()(r=F()(o=R()(u).call(u,Boolean)).call(o,(function(e){return Or({key:e},tr(e,a))}))).call(r,(function(e){var t=e.dataSource,n=e.Key,r=e.Items;return!r||!r.length||!(Sn()(t).call(t,n)||r&&r.length)})),d=F()(s).call(s,(function(e){return e.key}));Z(d),M(s)}),[N,Z]);(0,H.useEffect)((function(){if(t){Z(v);var e=F()(v).call(v,(function(e){return Or({key:e},tr(e,a))}));M(e)}}),[t]);var Y=K().createElement(K().Fragment,null,!A&&K().createElement(U.Checkbox,{className:"".concat(i,"-modal-footer-checkbox"),checked:D,onChange:function(e){var t=!!e.target.checked;E(t)}},(0,W.getLangMsg)("printd.grid.key0101")),K().createElement("div",{className:"".concat(i,"-modal-footer-btns")},K().createElement(U.Button,{onClick:m,type:"second",className:"".concat(i,"-modal-cancel-btn")},(0,W.getLangMsg)("printd.components.key0011")),K().createElement(U.Button,{onClick:function(){if(n)o(B);else{var e=Q.current;o(e)}},type:"primary",className:"".concat(i,"-modal-ok-btn")},(0,W.getLangMsg)("printd.components.key0012"))));return K().createElement(U.Modal,{body:K().createElement(Jr,{checkable:!!n,scrollToKey:z,meta:r,definition:a,filterTreeData:f,onSelect:function(e,t,n){Q.current=t},showDefinitionId:D,emptyNode:c,onDataChange:function(e){var t=!(e&&e.length);x(t)},expandedKeys:s,onCheck:V,checkedKeys:N}),bodyStyle:{justifyContent:"start",alignItems:"start",overflowX:"hidden",overflowY:"auto",flexDirection:"column"},titleIcon:null,className:"".concat(i,"-modal"),footer:Y,maskClosable:!1,width:512,height:614,title:p||(0,W.getLangMsg)("printd.components.key0001"),closable:!0,destroyOnClose:!0,onCancel:m,onOk:m,mask:!0,visible:t})},zr=n(52484),Hr=n(71536),Kr=n.n(Hr),Vr=(0,H.memo)((0,H.forwardRef)((function(e,t){var n,r,a=e.className,o=e.children,i=e.tipText,l=(0,H.useState)(!1),c=(0,S.c)(l,2),u=c[0],s=c[1],d=(0,H.useState)(!1),f=(0,S.c)(d,2),g=f[0],h=f[1],v=(0,H.useState)(0)[1];(0,H.useImperativeHandle)(t,(function(){return{show:function(){!u&&s(!0)},hide:function(){u&&s(!1)}}}),[u]),(0,H.useEffect)((function(){var e=function(){v((function(e){return e+1}))};return window.addEventListener("scroll",e),window.addEventListener("resize",e),function(){window.removeEventListener("scroll",e),window.addEventListener("resize",e)}}),[u]);var p=(0,H.useRef)(0),m=(0,H.useRef)(0),C=(0,H.useRef)(null),y=(0,H.useRef)(null),D=K().cloneElement(o,{ref:C});(0,H.useEffect)((function(){h(!0)}),[o]);var E,w=(0,zr.c)(C,{rootMargin:"0px",threshold:1});(E=null==w?void 0:w.isIntersecting)&&u&&le()((function(){y.current&&(y.current.style.display=E?"flex":"none")}));var k=(0,H.useRef)(null),A=(0,H.useRef)(null),x=function e(){if(u&&!A.current){if(y.current&&C.current){var t,n,r=null!==(t=null===(n=C.current)||void 0===n?void 0:n.getBoundingClientRect())&&void 0!==t?t:{left:0,top:0};!function(e,t){e-1===p.current&&m.current===t+35||(p.current=e-1,m.current=t+35,y.current&&(y.current.style.left="".concat(e-1,"px"),y.current.style.top="".concat(t+35,"px")))}(r.left,r.top)}else W.console.error("miss errorDivRef or inputRef",y,C);window.cancelAnimationFrame(k.current),k.current=window.requestAnimationFrame((function(){e()}))}};0!==(null==w?void 0:w.intersectionRatio)&&le()((function(){window.cancelAnimationFrame(k.current),x()}),0),(0,H.useEffect)((function(){return function(){window.cancelAnimationFrame(k.current),A.current=!0}}),[]);var b=null!==(n=null===(r=C.current)||void 0===r?void 0:r.getBoundingClientRect())&&void 0!==n?n:{left:0,top:0},I=b.left,B=b.top;return g&&K().createElement(K().Fragment,null,D,C.current&&u&&Kr().createPortal(K().createElement("div",{ref:y,className:"".concat(a,"-tooltip"),style:{display:u?"flex":"none",left:I-1,top:B+35}},i||(0,W.getLangMsg)("printd.grid.key0005")),document.body))}))),Yr=Vr,qr=n(2992),Xr=n.n(qr),_r=n(85344),$r=n.n(_r),ea=n(89472),ta=n.n(ea),na=n(96416),ra=n.n(na),aa=n(30479),oa=n.n(aa),ia=n(11872),la=n.n(ia),ca=n(59312),ua=n.n(ca),sa=n(53684),da=n.n(sa),fa=n(30856),ga=n.n(fa),ha=n(83789),va=$r().mark(Fi),pa=$r().mark(Ji),ma=$r().mark(Yi);function Ca(e,t){var n=void 0!==Gn()&&Qn()(e)||e["@@iterator"];if(!n){if(Jn()(e)||(n=function(e,t){var n;if(!e)return;if("string"==typeof e)return ya(e,t);var r=kn()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Fn()(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ya(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw o}}}}function ya(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Da=function(e,t){var n=e.current,r=e.affinity;if(null!=n){var a=Ma.transform(n,t,{affinity:r});e.current=a,null==a&&e.unref()}},Ea=function(e,t){var n=e.current,r=e.affinity;if(null!=n){var a=eo.transform(n,t,{affinity:r});e.current=a,null==a&&e.unref()}},wa=function(e,t){var n=e.current,r=e.affinity;if(null!=n){var a=ja.transform(n,t,{affinity:r});e.current=a,null==a&&e.unref()}},ka=new(ta()),Aa=new(ta()),xa=new(ta()),ba=new(ta()),Ia=new(ta()),Ba=new(ta()),Sa=new(ta()),Ma={ancestors:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=ra()(t),r=void 0!==n&&n,a=Ma.levels(e,t);return a=r?kn()(a).call(a,1):kn()(a).call(a,0,-1)},common:function(e,t){for(var n=[],r=0;r<e.length&&r<t.length;r++){var a=e[r];if(a!==t[r])break;n.push(a)}return n},compare:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1}return 0},endsAfter:function(e,t){var n=e.length-1,r=kn()(e).call(e,0,n),a=kn()(t).call(t,0,n),o=e[n],i=t[n];return Ma.equals(r,a)&&o>i},endsAt:function(e,t){var n=e.length,r=kn()(e).call(e,0,n),a=kn()(t).call(t,0,n);return Ma.equals(r,a)},endsBefore:function(e,t){var n=e.length-1,r=kn()(e).call(e,0,n),a=kn()(t).call(t,0,n),o=e[n],i=t[n];return Ma.equals(r,a)&&o<i},equals:function(e,t){return e.length===t.length&&oa()(e).call(e,(function(e,n){return e===t[n]}))},hasPrevious:function(e){return e[e.length-1]>0},isAfter:function(e,t){return 1===Ma.compare(e,t)},isAncestor:function(e,t){return e.length<t.length&&0===Ma.compare(e,t)},isBefore:function(e,t){return-1===Ma.compare(e,t)},isChild:function(e,t){return e.length===t.length+1&&0===Ma.compare(e,t)},isCommon:function(e,t){return e.length<=t.length&&0===Ma.compare(e,t)},isDescendant:function(e,t){return e.length>t.length&&0===Ma.compare(e,t)},isParent:function(e,t){return e.length+1===t.length&&0===Ma.compare(e,t)},isPath:function(e){return Jn()(e)&&(0===e.length||"number"==typeof e[0])},isSibling:function(e,t){if(e.length!==t.length)return!1;var n=kn()(e).call(e,0,-1),r=kn()(t).call(t,0,-1);return e[e.length-1]!==t[t.length-1]&&Ma.equals(n,r)},levels:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=ra()(t),r=void 0!==n&&n,a=[],o=0;o<=e.length;o++)a.push(kn()(e).call(e,0,o));return r&&ra()(a).call(a),a},next:function(e){var t;if(0===e.length)throw new Error("Cannot get the next path of a root path [".concat(e,"], because it has no next index."));var n=e[e.length-1];return G()(t=kn()(e).call(e,0,-1)).call(t,n+1)},operationCanTransformPath:function(e){switch(e.type){case"insert_node":case"remove_node":case"merge_node":case"split_node":case"move_node":return!0;default:return!1}},parent:function(e){if(0===e.length)throw new Error("Cannot get the parent path of the root path [".concat(e,"]."));return kn()(e).call(e,0,-1)},previous:function(e){var t;if(0===e.length)throw new Error("Cannot get the previous path of a root path [".concat(e,"], because it has no previous index."));var n=e[e.length-1];if(n<=0)throw new Error("Cannot get the previous path of a first child path [".concat(e,"] because it would result in a negative index."));return G()(t=kn()(e).call(e,0,-1)).call(t,n-1)},relative:function(e,t){var n;if(!Ma.isAncestor(t,e)&&!Ma.equals(e,t))throw new Error(G()(n="Cannot get the relative path of [".concat(e,"] inside ancestor [")).call(n,t,"], because it is not above or equal to the path."));return kn()(e).call(e,t.length)},transform:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)return null;var r=(0,yn.c)(e),a=n.affinity,o=void 0===a?"forward":a;if(0===e.length)return r;switch(t.type){case"insert_node":var i=t.path;(Ma.equals(i,r)||Ma.endsBefore(i,r)||Ma.isAncestor(i,r))&&(r[i.length-1]+=1);break;case"remove_node":var l=t.path;if(Ma.equals(l,r)||Ma.isAncestor(l,r))return null;Ma.endsBefore(l,r)&&(r[l.length-1]-=1);break;case"merge_node":var c=t.path,u=t.position;Ma.equals(c,r)||Ma.endsBefore(c,r)?r[c.length-1]-=1:Ma.isAncestor(c,r)&&(r[c.length-1]-=1,r[c.length]+=u);break;case"split_node":var s=t.path,d=t.position;if(Ma.equals(s,r)){if("forward"===o)r[r.length-1]+=1;else if("backward"!==o)return null}else Ma.endsBefore(s,r)?r[s.length-1]+=1:Ma.isAncestor(s,r)&&e[s.length]>=d&&(r[s.length-1]+=1,r[s.length]-=d);break;case"move_node":var f=t.path,g=t.newPath;if(Ma.equals(f,g))return r;if(Ma.isAncestor(f,r)||Ma.equals(f,r)){var h=kn()(g).call(g);return Ma.endsBefore(f,g)&&f.length<g.length&&(h[f.length-1]-=1),G()(h).call(h,kn()(r).call(r,f.length))}Ma.isSibling(f,g)&&(Ma.isAncestor(g,r)||Ma.equals(g,r))?Ma.endsBefore(f,r)?r[f.length-1]-=1:r[f.length-1]+=1:Ma.endsBefore(g,r)||Ma.equals(g,r)||Ma.isAncestor(g,r)?(Ma.endsBefore(f,r)&&(r[f.length-1]-=1),r[g.length-1]+=1):Ma.endsBefore(f,r)&&(Ma.equals(g,r)&&(r[g.length-1]+=1),r[f.length-1]-=1)}return r}};function La(e,t,n){return t in e?B()(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ra(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ta(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)O()(n=Ra(Object(r),!0)).call(n,(function(t){La(e,t,r[t])}));else if(A())b()(e,A()(r));else{var a;O()(a=Ra(Object(r))).call(a,(function(t){B()(e,t,w()(r,t))}))}}return e}var Fa={transform:function(e,t){e.children=(0,ha.eQ)(e.children);var n=e.selection&&(0,ha.eQ)(e.selection);try{n=function(e,t,n){switch(n.type){case"insert_node":var r,a=n.path,o=n.node,i=za.parent(e,a),l=a[a.length-1];if(l>i.children.length)throw new Error('Cannot apply an "insert_node" operation at path ['.concat(a,"] because the destination is past the end of the node."));if(la()(r=i.children).call(r,l,0,o),t){var c,u=Ca(ja.points(t));try{for(u.s();!(c=u.n()).done;){var s=(0,S.c)(c.value,2),d=s[0];t[s[1]]=eo.transform(d,n)}}catch(e){u.e(e)}finally{u.f()}}break;case"insert_text":var f,g,h=n.path,v=n.offset,p=n.text;if(0===p.length)break;var m=za.leaf(e,h),C=kn()(f=m.text).call(f,0,v),y=kn()(g=m.text).call(g,v);if(m.text=C+p+y,t){var D,E=Ca(ja.points(t));try{for(E.s();!(D=E.n()).done;){var w=(0,S.c)(D.value,2),k=w[0];t[w[1]]=eo.transform(k,n)}}catch(e){E.e(e)}finally{E.f()}}break;case"merge_node":var A,x=n.path,b=za.get(e,x),I=Ma.previous(x),B=za.get(e,I),M=za.parent(e,x),L=x[x.length-1];if(co.isText(b)&&co.isText(B))B.text+=b.text;else{var R,T,F;if(co.isText(b)||co.isText(B))throw new Error(G()(R=G()(T='Cannot apply a "merge_node" operation at path ['.concat(x,"] to nodes of different interfaces: ")).call(T,no.stringify(b)," ")).call(R,no.stringify(B)));(F=B.children).push.apply(F,(0,yn.c)(b.children))}if(la()(A=M.children).call(A,L,1),t){var N,Z=Ca(ja.points(t));try{for(Z.s();!(N=Z.n()).done;){var Q=(0,S.c)(N.value,2),j=Q[0];t[Q[1]]=eo.transform(j,n)}}catch(e){Z.e(e)}finally{Z.f()}}break;case"move_node":var J,P,O,U=n.path,W=n.newPath;if(Ma.isAncestor(U,W))throw new Error(G()(O="Cannot move a path [".concat(U,"] to new path [")).call(O,W,"] because the destination is inside itself."));var z=za.get(e,U),H=za.parent(e,U),K=U[U.length-1];la()(J=H.children).call(J,K,1);var V=Ma.transform(U,n),Y=za.get(e,Ma.parent(V)),q=V[V.length-1];if(la()(P=Y.children).call(P,q,0,z),t){var X,_=Ca(ja.points(t));try{for(_.s();!(X=_.n()).done;){var $=(0,S.c)(X.value,2),ee=$[0];t[$[1]]=eo.transform(ee,n)}}catch(e){_.e(e)}finally{_.f()}}break;case"remove_node":var te,ne=n.path,re=ne[ne.length-1],ae=za.parent(e,ne);if(la()(te=ae.children).call(te,re,1),t){var oe,ie=Ca(ja.points(t));try{for(ie.s();!(oe=ie.n()).done;){var le=(0,S.c)(oe.value,2),ce=le[0],ue=le[1],se=eo.transform(ce,n);if(null!=t&&null!=se)t[ue]=se;else{var de,fe=void 0,ge=void 0,he=Ca(za.texts(e));try{for(he.s();!(de=he.n()).done;){var ve=(0,S.c)(de.value,2),pe=ve[0],me=ve[1];if(-1!==Ma.compare(me,ne)){ge=[pe,me];break}fe=[pe,me]}}catch(e){he.e(e)}finally{he.f()}var Ce=!1;fe&&ge&&(Ce=Ma.equals(ge[1],ne)?!Ma.hasPrevious(ge[1]):Ma.common(fe[1],ne).length<Ma.common(ge[1],ne).length),fe&&!Ce?(ce.path=fe[1],ce.offset=fe[0].text.length):ge?(ce.path=ge[1],ce.offset=0):t=null}}}catch(e){ie.e(e)}finally{ie.f()}}break;case"remove_text":var ye,De,Ee=n.path,we=n.offset,ke=n.text;if(0===ke.length)break;var Ae=za.leaf(e,Ee),xe=kn()(ye=Ae.text).call(ye,0,we),be=kn()(De=Ae.text).call(De,we+ke.length);if(Ae.text=xe+be,t){var Ie,Be=Ca(ja.points(t));try{for(Be.s();!(Ie=Be.n()).done;){var Se=(0,S.c)(Ie.value,2),Me=Se[0];t[Se[1]]=eo.transform(Me,n)}}catch(e){Be.e(e)}finally{Be.f()}}break;case"set_node":var Le=n.path,Re=n.properties,Te=n.newProperties;if(0===Le.length)throw new Error("Cannot set properties on the root node!");var Fe=za.get(e,Le);for(var Ne in Te){if("children"===Ne||"text"===Ne)throw new Error('Cannot set the "'.concat(Ne,'" property of nodes!'));var Ge=Te[Ne];null==Ge?delete Fe[Ne]:Fe[Ne]=Ge}for(var Ze in Re)Te.hasOwnProperty(Ze)||delete Fe[Ze];break;case"set_selection":var Qe=n.newProperties;if(null==Qe)t=Qe;else{if(null==t){if(!ja.isRange(Qe))throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat(no.stringify(Qe)," when there is no current selection."));t=Ta({},Qe)}for(var je in Qe){var Je=Qe[je];if(null==Je){if("anchor"===je||"focus"===je)throw new Error('Cannot remove the "'.concat(je,'" selection property'));delete t[je]}else t[je]=Je}}break;case"split_node":var Pe,Oe=n.path,Ue=n.position,We=n.properties;if(0===Oe.length)throw new Error('Cannot apply a "split_node" operation at path ['.concat(Oe,"] because the root node cannot be split."));var ze,He=za.get(e,Oe),Ke=za.parent(e,Oe),Ve=Oe[Oe.length-1];if(co.isText(He)){var Ye,qe,Xe=kn()(Ye=He.text).call(Ye,0,Ue),_e=kn()(qe=He.text).call(qe,Ue);He.text=Xe,ze=Ta(Ta({},We),{},{text:_e})}else{var $e,et,tt=kn()($e=He.children).call($e,0,Ue),nt=kn()(et=He.children).call(et,Ue);He.children=tt,ze=Ta(Ta({},We),{},{children:nt})}if(la()(Pe=Ke.children).call(Pe,Ve+1,0,ze),t){var rt,at=Ca(ja.points(t));try{for(at.s();!(rt=at.n()).done;){var ot=(0,S.c)(rt.value,2),it=ot[0];t[ot[1]]=eo.transform(it,n)}}catch(e){at.e(e)}finally{at.f()}}}return t}(e,n,t)}finally{e.children=(0,ha.o7)(e.children),e.selection=n?(0,ha.Wl)(n)?(0,ha.o7)(n):n:null}}},Na=function e(t,n){for(var r in t){var a=t[r],o=n[r];if(ga()(a)&&ga()(o)){if(!e(a,o))return!1}else if(Jn()(a)&&Jn()(o)){if(a.length!==o.length)return!1;for(var i=0;i<a.length;i++)if(a[i]!==o[i])return!1}else if(a!==o)return!1}for(var l in n)if(void 0===t[l]&&void 0!==n[l])return!1;return!0};function Ga(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=m()(e);for(r=0;r<o.length;r++)n=o[r],En()(t).call(t,n)>=0||(a[n]=e[n]);return a}(e,t);if(D()){var o=D()(e);for(r=0;r<o.length;r++)n=o[r],En()(t).call(t,n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Za=["anchor","focus"];function Qa(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}var ja={edges:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=ra()(t),r=void 0!==n&&n,a=e.anchor,o=e.focus;return ja.isBackward(e)===r?[a,o]:[o,a]},end:function(e){var t=ja.edges(e),n=(0,S.c)(t,2)[1];return n},equals:function(e,t){return eo.equals(e.anchor,t.anchor)&&eo.equals(e.focus,t.focus)},includes:function(e,t){if(ja.isRange(t)){if(xn()(ja).call(ja,e,t.anchor)||xn()(ja).call(ja,e,t.focus))return!0;var n=ja.edges(e),r=(0,S.c)(n,2),a=r[0],o=r[1],i=ja.edges(t),l=(0,S.c)(i,2),c=l[0],u=l[1];return eo.isBefore(a,c)&&eo.isAfter(o,u)}var s=ja.edges(e),d=(0,S.c)(s,2),f=d[0],g=d[1],h=!1,v=!1;return eo.isPoint(t)?(h=eo.compare(t,f)>=0,v=eo.compare(t,g)<=0):(h=Ma.compare(t,f.path)>=0,v=Ma.compare(t,g.path)<=0),h&&v},intersection:function(e,t){var n=Ga(e,Za),r=ja.edges(e),a=(0,S.c)(r,2),o=a[0],i=a[1],l=ja.edges(t),c=(0,S.c)(l,2),u=c[0],s=c[1],d=eo.isBefore(o,u)?u:o,f=eo.isBefore(i,s)?i:s;return eo.isBefore(f,d)?null:function(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)O()(n=Qa(Object(r),!0)).call(n,(function(t){La(e,t,r[t])}));else if(A())b()(e,A()(r));else{var a;O()(a=Qa(Object(r))).call(a,(function(t){B()(e,t,w()(r,t))}))}}return e}({anchor:d,focus:f},n)},isBackward:function(e){var t=e.anchor,n=e.focus;return eo.isAfter(t,n)},isCollapsed:function(e){var t=e.anchor,n=e.focus;return eo.equals(t,n)},isExpanded:function(e){return!ja.isCollapsed(e)},isForward:function(e){return!ja.isBackward(e)},isRange:function(e){return ga()(e)&&eo.isPoint(e.anchor)&&eo.isPoint(e.focus)},points:$r().mark((function e(t){return $r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,[t.anchor,"anchor"];case 2:return e.next=4,[t.focus,"focus"];case 4:case"end":return e.stop()}}),e)})),start:function(e){var t=ja.edges(e),n=(0,S.c)(t,1)[0];return n},transform:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,ha.Ut)(e,(function(e){if(null===e)return null;var r,a,o=n.affinity,i=void 0===o?"inward":o;if("inward"===i){var l=ja.isCollapsed(e);ja.isForward(e)?(r="forward",a=l?r:"backward"):(r="backward",a=l?r:"forward")}else"outward"===i?ja.isForward(e)?(r="backward",a="forward"):(r="forward",a="backward"):(r=i,a=i);var c=eo.transform(e.anchor,t,{affinity:r}),u=eo.transform(e.focus,t,{affinity:a});if(!c||!u)return null;e.anchor=c,e.focus=u}))}},Ja=function(e){return ga()(e)&&za.isNodeList(e.children)&&!qa.isEditor(e)},Pa={isAncestor:function(e){return ga()(e)&&za.isNodeList(e.children)},isElement:Ja,isElementList:function(e){return Jn()(e)&&oa()(e).call(e,(function(e){return Pa.isElement(e)}))},isElementProps:function(e){return void 0!==e.children},isElementType:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"type";return Ja(e)&&e[n]===t},matches:function(e,t){for(var n in t)if("children"!==n&&e[n]!==t[n])return!1;return!0}},Oa=["children"],Ua=["text"],Wa=new(ta()),za={ancestor:function(e,t){var n,r=za.get(e,t);if(co.isText(r))throw new Error(G()(n="Cannot get the ancestor node at path [".concat(t,"] because it refers to a text node instead: ")).call(n,no.stringify(r)));return r},ancestors:$r().mark((function e(t,n){var r,a,o,i,l,c,u=arguments;return $r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=u.length>2&&void 0!==u[2]?u[2]:{},a=Ca(Ma.ancestors(n,r)),e.prev=2,a.s();case 4:if((o=a.n()).done){e.next=12;break}return i=o.value,l=za.ancestor(t,i),c=[l,i],e.next=10,c;case 10:e.next=4;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),a.e(e.t0);case 17:return e.prev=17,a.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[2,14,17,20]])})),child:function(e,t){if(co.isText(e))throw new Error("Cannot get the child of a text node: ".concat(no.stringify(e)));var n,r=e.children[t];if(null==r)throw new Error(G()(n="Cannot get child at index `".concat(t,"` in node: ")).call(n,no.stringify(e)));return r},children:$r().mark((function(e,t){var n,r,a,o,i,l,c,u,s=arguments;return $r().wrap((function(d){for(;;)switch(d.prev=d.next){case 0:n=s.length>2&&void 0!==s[2]?s[2]:{},r=ra()(n),a=void 0!==r&&r,o=za.ancestor(e,t),i=o.children,l=a?i.length-1:0;case 5:if(!(a?l>=0:l<i.length)){d.next=13;break}return c=za.child(o,l),u=G()(t).call(t,l),d.next=10,[c,u];case 10:l=a?l-1:l+1,d.next=5;break;case 13:case"end":return d.stop()}}),i)})),common:function(e,t,n){var r=Ma.common(t,n);return[za.get(e,r),r]},descendant:function(e,t){var n,r=za.get(e,t);if(qa.isEditor(r))throw new Error(G()(n="Cannot get the descendant node at path [".concat(t,"] because it refers to the root editor node instead: ")).call(n,no.stringify(r)));return r},descendants:$r().mark((function e(t){var n,r,a,o,i,l,c=arguments;return $r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=c.length>1&&void 0!==c[1]?c[1]:{},r=Ca(za.nodes(t,n)),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=11;break}if(o=(0,S.c)(a.value,2),i=o[0],0===(l=o[1]).length){e.next=9;break}return e.next=9,[i,l];case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),r.e(e.t0);case 16:return e.prev=16,r.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,13,16,19]])})),elements:$r().mark((function e(t){var n,r,a,o,i,l,c=arguments;return $r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=c.length>1&&void 0!==c[1]?c[1]:{},r=Ca(za.nodes(t,n)),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=11;break}if(o=(0,S.c)(a.value,2),i=o[0],l=o[1],!Pa.isElement(i)){e.next=9;break}return e.next=9,[i,l];case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),r.e(e.t0);case 16:return e.prev=16,r.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,13,16,19]])})),extractProps:function(e){return Pa.isAncestor(e)?Ga(e,Oa):Ga(e,Ua)},first:function(e,t){for(var n=kn()(t).call(t),r=za.get(e,n);r&&!co.isText(r)&&0!==r.children.length;)r=r.children[0],n.push(0);return[r,n]},fragment:function(e,t){if(co.isText(e))throw new Error("Cannot get a fragment starting from a root text node: ".concat(no.stringify(e)));var n=(0,ha.Ut)({children:e.children},(function(e){var n,r=ja.edges(t),a=(0,S.c)(r,2),o=a[0],i=a[1],l=za.nodes(e,{reverse:!0,pass:function(e){var n=(0,S.c)(e,2)[1];return!xn()(ja).call(ja,t,n)}}),c=Ca(l);try{for(c.s();!(n=c.n()).done;){var u=(0,S.c)(n.value,2)[1];if(!xn()(ja).call(ja,t,u)){var s,d=za.parent(e,u),f=u[u.length-1];la()(s=d.children).call(s,f,1)}if(Ma.equals(u,i.path)){var g,h=za.leaf(e,u);h.text=kn()(g=h.text).call(g,0,i.offset)}if(Ma.equals(u,o.path)){var v,p=za.leaf(e,u);p.text=kn()(v=p.text).call(v,o.offset)}}}catch(e){c.e(e)}finally{c.f()}qa.isEditor(e)&&(e.selection=null)}));return n.children},get:function(e,t){for(var n=e,r=0;r<t.length;r++){var a,o=t[r];if(co.isText(n)||!n.children[o])throw new Error(G()(a="Cannot find a descendant at path [".concat(t,"] in node: ")).call(a,no.stringify(e)));n=n.children[o]}return n},has:function(e,t){for(var n=e,r=0;r<t.length;r++){var a=t[r];if(co.isText(n)||!n.children[a])return!1;n=n.children[a]}return!0},isNode:function(e){return co.isText(e)||Pa.isElement(e)||qa.isEditor(e)},isNodeList:function(e){if(!Jn()(e))return!1;var t=Wa.get(e);if(void 0!==t)return t;var n=oa()(e).call(e,(function(e){return za.isNode(e)}));return Wa.set(e,n),n},last:function(e,t){for(var n=kn()(t).call(t),r=za.get(e,n);r&&!co.isText(r)&&0!==r.children.length;){var a=r.children.length-1;r=r.children[a],n.push(a)}return[r,n]},leaf:function(e,t){var n,r=za.get(e,t);if(!co.isText(r))throw new Error(G()(n="Cannot get the leaf node at path [".concat(t,"] because it refers to a non-leaf node: ")).call(n,no.stringify(r)));return r},levels:$r().mark((function e(t,n){var r,a,o,i,l,c=arguments;return $r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=c.length>2&&void 0!==c[2]?c[2]:{},a=Ca(Ma.levels(n,r)),e.prev=2,a.s();case 4:if((o=a.n()).done){e.next=11;break}return i=o.value,l=za.get(t,i),e.next=9,[l,i];case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),a.e(e.t0);case 16:return e.prev=16,a.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,13,16,19]])})),matches:function(e,t){return Pa.isElement(e)&&Pa.isElementProps(t)&&Pa.matches(e,t)||co.isText(e)&&co.isTextProps(t)&&co.matches(e,t)},nodes:$r().mark((function e(t){var n,r,a,o,i,l,c,u,s,d,f,g,h,v=arguments;return $r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=(n=v.length>1&&void 0!==v[1]?v[1]:{}).pass,a=ra()(n),o=void 0!==a&&a,i=n.from,l=void 0===i?[]:i,c=n.to,u=new(ua()),s=[],d=t;case 6:if(!c||!(o?Ma.isBefore(s,c):Ma.isAfter(s,c))){e.next=9;break}return e.abrupt("break",37);case 9:if(u.has(d)){e.next=12;break}return e.next=12,[d,s];case 12:if(u.has(d)||co.isText(d)||0===d.children.length||null!=r&&!1!==r([d,s])){e.next=19;break}return u.add(d),f=o?d.children.length-1:0,Ma.isAncestor(s,l)&&(f=l[s.length]),s=G()(s).call(s,f),d=za.get(t,s),e.abrupt("continue",6);case 19:if(0!==s.length){e.next=21;break}return e.abrupt("break",37);case 21:if(o){e.next=27;break}if(g=Ma.next(s),!za.has(t,g)){e.next=27;break}return s=g,d=za.get(t,s),e.abrupt("continue",6);case 27:if(!o||0===s[s.length-1]){e.next=32;break}return h=Ma.previous(s),s=h,d=za.get(t,s),e.abrupt("continue",6);case 32:s=Ma.parent(s),d=za.get(t,s),u.add(d),e.next=6;break;case 37:case"end":return e.stop()}}),e)})),parent:function(e,t){var n=Ma.parent(t),r=za.get(e,n);if(co.isText(r))throw new Error("Cannot get the parent of path [".concat(t,"] because it does not exist in the root."));return r},string:function(e){return co.isText(e)?e.text:F()(t=e.children).call(t,za.string).join("");var t},texts:$r().mark((function e(t){var n,r,a,o,i,l,c=arguments;return $r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=c.length>1&&void 0!==c[1]?c[1]:{},r=Ca(za.nodes(t,n)),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=11;break}if(o=(0,S.c)(a.value,2),i=o[0],l=o[1],!co.isText(i)){e.next=9;break}return e.next=9,[i,l];case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),r.e(e.t0);case 16:return e.prev=16,r.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,13,16,19]])}))};function Ha(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ka(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)O()(n=Ha(Object(r),!0)).call(n,(function(t){La(e,t,r[t])}));else if(A())b()(e,A()(r));else{var a;O()(a=Ha(Object(r))).call(a,(function(t){B()(e,t,w()(r,t))}))}}return e}var Va={isNodeOperation:function(e){var t;return Va.isOperation(e)&&Sn()(t=e.type).call(t,"_node")},isOperation:function(e){if(!ga()(e))return!1;switch(e.type){case"insert_node":case"remove_node":return Ma.isPath(e.path)&&za.isNode(e.node);case"insert_text":case"remove_text":return"number"==typeof e.offset&&"string"==typeof e.text&&Ma.isPath(e.path);case"merge_node":return"number"==typeof e.position&&Ma.isPath(e.path)&&ga()(e.properties);case"move_node":return Ma.isPath(e.path)&&Ma.isPath(e.newPath);case"set_node":return Ma.isPath(e.path)&&ga()(e.properties)&&ga()(e.newProperties);case"set_selection":return null===e.properties&&ja.isRange(e.newProperties)||null===e.newProperties&&ja.isRange(e.properties)||ga()(e.properties)&&ga()(e.newProperties);case"split_node":return Ma.isPath(e.path)&&"number"==typeof e.position&&ga()(e.properties);default:return!1}},isOperationList:function(e){return Jn()(e)&&oa()(e).call(e,(function(e){return Va.isOperation(e)}))},isSelectionOperation:function(e){var t;return Va.isOperation(e)&&Sn()(t=e.type).call(t,"_selection")},isTextOperation:function(e){var t;return Va.isOperation(e)&&Sn()(t=e.type).call(t,"_text")},inverse:function(e){switch(e.type){case"insert_node":return Ka(Ka({},e),{},{type:"remove_node"});case"insert_text":return Ka(Ka({},e),{},{type:"remove_text"});case"merge_node":return Ka(Ka({},e),{},{type:"split_node",path:Ma.previous(e.path)});case"move_node":var t=e.newPath,n=e.path;if(Ma.equals(t,n))return e;if(Ma.isSibling(n,t))return Ka(Ka({},e),{},{path:t,newPath:n});var r=Ma.transform(n,e),a=Ma.transform(Ma.next(n),e);return Ka(Ka({},e),{},{path:r,newPath:a});case"remove_node":return Ka(Ka({},e),{},{type:"insert_node"});case"remove_text":return Ka(Ka({},e),{},{type:"insert_text"});case"set_node":var o=e.properties,i=e.newProperties;return Ka(Ka({},e),{},{properties:i,newProperties:o});case"set_selection":var l=e.properties,c=e.newProperties;return Ka(Ka({},e),{},null==l?{properties:c,newProperties:null}:null==c?{properties:null,newProperties:l}:{properties:c,newProperties:l});case"split_node":return Ka(Ka({},e),{},{type:"merge_node",path:Ma.next(e.path)})}}},Ya=new(ta()),qa={above:function(e,t){return e.above(t)},addMark:function(e,t,n){e.addMark(t,n)},after:function(e,t,n){return e.after(t,n)},before:function(e,t,n){return e.before(t,n)},deleteBackward:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).unit,n=void 0===t?"character":t;e.deleteBackward(n)},deleteForward:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).unit,n=void 0===t?"character":t;e.deleteForward(n)},deleteFragment:function(e,t){e.deleteFragment(t)},edges:function(e,t){return e.edges(t)},elementReadOnly:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.elementReadOnly(t)},end:function(e,t){return e.end(t)},first:function(e,t){return e.first(t)},fragment:function(e,t){return e.fragment(t)},hasBlocks:function(e,t){return e.hasBlocks(t)},hasInlines:function(e,t){return e.hasInlines(t)},hasPath:function(e,t){return e.hasPath(t)},hasTexts:function(e,t){return e.hasTexts(t)},insertBreak:function(e){e.insertBreak()},insertFragment:function(e,t,n){e.insertFragment(t,n)},insertNode:function(e,t){e.insertNode(t)},insertSoftBreak:function(e){e.insertSoftBreak()},insertText:function(e,t){e.insertText(t)},isBlock:function(e,t){return e.isBlock(t)},isEdge:function(e,t,n){return e.isEdge(t,n)},isEditor:function(e){return function(e){var t=Ya.get(e);if(void 0!==t)return t;if(!ga()(e))return!1;var n="function"==typeof e.addMark&&"function"==typeof e.apply&&"function"==typeof e.deleteFragment&&"function"==typeof e.insertBreak&&"function"==typeof e.insertSoftBreak&&"function"==typeof e.insertFragment&&"function"==typeof e.insertNode&&"function"==typeof e.insertText&&"function"==typeof e.isElementReadOnly&&"function"==typeof e.isInline&&"function"==typeof e.isSelectable&&"function"==typeof e.isVoid&&"function"==typeof e.normalizeNode&&"function"==typeof e.onChange&&"function"==typeof e.removeMark&&"function"==typeof e.getDirtyPaths&&(null===e.marks||ga()(e.marks))&&(null===e.selection||ja.isRange(e.selection))&&za.isNodeList(e.children)&&Va.isOperationList(e.operations);return Ya.set(e,n),n}(e)},isElementReadOnly:function(e,t){return e.isElementReadOnly(t)},isEmpty:function(e,t){return e.isEmpty(t)},isEnd:function(e,t,n){return e.isEnd(t,n)},isInline:function(e,t){return e.isInline(t)},isNormalizing:function(e){return e.isNormalizing()},isSelectable:function(e,t){return e.isSelectable(t)},isStart:function(e,t,n){return e.isStart(t,n)},isVoid:function(e,t){return e.isVoid(t)},last:function(e,t){return e.last(t)},leaf:function(e,t,n){return e.leaf(t,n)},levels:function(e,t){return e.levels(t)},marks:function(e){return e.getMarks()},next:function(e,t){return e.next(t)},node:function(e,t,n){return e.node(t,n)},nodes:function(e,t){return e.nodes(t)},normalize:function(e,t){e.normalize(t)},parent:function(e,t,n){return e.parent(t,n)},path:function(e,t,n){return e.path(t,n)},pathRef:function(e,t,n){return e.pathRef(t,n)},pathRefs:function(e){return e.pathRefs()},point:function(e,t,n){return e.point(t,n)},pointRef:function(e,t,n){return e.pointRef(t,n)},pointRefs:function(e){return e.pointRefs()},positions:function(e,t){return e.positions(t)},previous:function(e,t){return e.previous(t)},range:function(e,t,n){return e.range(t,n)},rangeRef:function(e,t,n){return e.rangeRef(t,n)},rangeRefs:function(e){return e.rangeRefs()},removeMark:function(e,t){e.removeMark(t)},setNormalizing:function(e,t){e.setNormalizing(t)},start:function(e,t){return e.start(t)},string:function(e,t,n){return e.string(t,n)},unhangRange:function(e,t,n){return e.unhangRange(t,n)},void:function(e,t){return e.void(t)},withoutNormalizing:function(e,t){e.withoutNormalizing(t)}},Xa={isSpan:function(e){return Jn()(e)&&2===e.length&&oa()(e).call(e,Ma.isPath)}};function _a(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function $a(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)O()(n=_a(Object(r),!0)).call(n,(function(t){La(e,t,r[t])}));else if(A())b()(e,A()(r));else{var a;O()(a=_a(Object(r))).call(a,(function(t){B()(e,t,w()(r,t))}))}}return e}var eo={compare:function(e,t){var n=Ma.compare(e.path,t.path);return 0===n?e.offset<t.offset?-1:e.offset>t.offset?1:0:n},isAfter:function(e,t){return 1===eo.compare(e,t)},isBefore:function(e,t){return-1===eo.compare(e,t)},equals:function(e,t){return e.offset===t.offset&&Ma.equals(e.path,t.path)},isPoint:function(e){return ga()(e)&&"number"==typeof e.offset&&Ma.isPath(e.path)},transform:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,ha.Ut)(e,(function(e){if(null===e)return null;var r=n.affinity,a=void 0===r?"forward":r,o=e.path,i=e.offset;switch(t.type){case"insert_node":case"move_node":e.path=Ma.transform(o,t,n);break;case"insert_text":Ma.equals(t.path,o)&&(t.offset<i||t.offset===i&&"forward"===a)&&(e.offset+=t.text.length);break;case"merge_node":Ma.equals(t.path,o)&&(e.offset+=t.position),e.path=Ma.transform(o,t,n);break;case"remove_text":Ma.equals(t.path,o)&&t.offset<=i&&(e.offset-=Math.min(i-t.offset,t.text.length));break;case"remove_node":if(Ma.equals(t.path,o)||Ma.isAncestor(t.path,o))return null;e.path=Ma.transform(o,t,n);break;case"split_node":if(Ma.equals(t.path,o)){if(t.position===i&&null==a)return null;(t.position<i||t.position===i&&"forward"===a)&&(e.offset-=t.position,e.path=Ma.transform(o,t,$a($a({},n),{},{affinity:"forward"})))}else e.path=Ma.transform(o,t,n)}}))}},to=void 0,no={setScrubber:function(e){to=e},stringify:function(e){return J()(e,to)}},ro=["text"],ao=["anchor","focus"];function oo(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function io(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)O()(n=oo(Object(r),!0)).call(n,(function(t){La(e,t,r[t])}));else if(A())b()(e,A()(r));else{var a;O()(a=oo(Object(r))).call(a,(function(t){B()(e,t,w()(r,t))}))}}return e}var lo,co={equals:function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).loose,r=void 0!==n&&n;function a(e){return Ga(e,ro)}return Na(r?a(e):e,r?a(t):t)},isText:function(e){return ga()(e)&&"string"==typeof e.text},isTextList:function(e){return Jn()(e)&&oa()(e).call(e,(function(e){return co.isText(e)}))},isTextProps:function(e){return void 0!==e.text},matches:function(e,t){for(var n in t)if("text"!==n&&(!e.hasOwnProperty(n)||e[n]!==t[n]))return!1;return!0},decorations:function(e,t){var n,r=[io({},e)],a=Ca(t);try{for(a.s();!(n=a.n()).done;){var o,i=n.value,l=Ga(i,ao),c=ja.edges(i),u=(0,S.c)(c,2),s=u[0],d=u[1],f=[],g=0,h=s.offset,v=d.offset,p=Ca(r);try{for(p.s();!(o=p.n()).done;){var m=o.value,C=m.text.length,y=g;if(g+=C,h<=y&&g<=v)(0,oe.c)(m,l),f.push(m);else if(h!==v&&(h===g||v===y)||h>g||v<y||v===y&&0!==y)f.push(m);else{var D=m,E=void 0,w=void 0;if(v<g){var k,A,x=v-y;w=io(io({},D),{},{text:kn()(k=D.text).call(k,x)}),D=io(io({},D),{},{text:kn()(A=D.text).call(A,0,x)})}if(h>y){var b,I,B=h-y;E=io(io({},D),{},{text:kn()(b=D.text).call(b,0,B)}),D=io(io({},D),{},{text:kn()(I=D.text).call(I,B)})}(0,oe.c)(D,l),E&&f.push(E),f.push(D),w&&f.push(w)}}}catch(e){p.e(e)}finally{p.f()}r=f}}catch(e){a.e(e)}finally{a.f()}return r}},uo=function(e){return e.selection?e.selection:e.children.length>0?qa.end(e,[]):[0]},so=function(e,t){var n=qa.node(e,t),r=(0,S.c)(n,1)[0];return function(e){return e===r}},fo=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!n,a=n?yo(e):e,o=lo.None,i=lo.None,l=0,c=null,u=Ca(a);try{for(u.s();!(t=u.n()).done;){var s=t.value,d=da()(s).call(s,0);if(!d)break;var f=Lo(s,d),g=r?[i,f]:[f,o],h=(0,S.c)(g,2);if(o=h[0],i=h[1],Ro(o,lo.ZWJ)&&Ro(i,lo.ExtPict)&&!Go(r?e.substring(0,l):e.substring(0,e.length-l)))break;if(Ro(o,lo.RI)&&Ro(i,lo.RI)&&!(c=null!==c?!c:!!r||Qo(e.substring(0,e.length-l))))break;if(o!==lo.None&&i!==lo.None&&Fo(o,i))break;l+=s.length}}catch(e){u.e(e)}finally{u.f()}return l||1},go=/\s/,ho=/[\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,vo=/['\u2018\u2019]/,po=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=0,r=!1;e.length>0;){var a=fo(e,t),o=mo(e,a,t),i=(0,S.c)(o,2),l=i[0],c=i[1];if(Co(l,c,t))r=!0,n+=a;else{if(r)break;n+=a}e=c}return n},mo=function(e,t,n){if(n){var r=e.length-t;return[kn()(e).call(e,r,e.length),kn()(e).call(e,0,r)]}return[kn()(e).call(e,0,t),kn()(e).call(e,t)]},Co=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(go.test(t))return!1;if(vo.test(t)){var a=fo(n,r),o=mo(n,a,r),i=(0,S.c)(o,2);if(e(i[0],i[1],r))return!0}return!ho.test(t)},yo=$r().mark((function e(t){var n,r,a,o;return $r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.length-1,r=0;case 2:if(!(r<t.length)){e.next=16;break}if(a=t.charAt(n-r),!Eo(a.charCodeAt(0))){e.next=11;break}if(o=t.charAt(n-r-1),!Do(o.charCodeAt(0))){e.next=11;break}return e.next=9,o+a;case 9:return r++,e.abrupt("continue",13);case 11:return e.next=13,a;case 13:r++,e.next=2;break;case 16:case"end":return e.stop()}}),e)})),Do=function(e){return e>=55296&&e<=56319},Eo=function(e){return e>=56320&&e<=57343};!function(e){e[e.None=0]="None",e[e.Extend=1]="Extend",e[e.ZWJ=2]="ZWJ",e[e.RI=4]="RI",e[e.Prepend=8]="Prepend",e[e.SpacingMark=16]="SpacingMark",e[e.L=32]="L",e[e.V=64]="V",e[e.T=128]="T",e[e.LV=256]="LV",e[e.LVT=512]="LVT",e[e.ExtPict=1024]="ExtPict",e[e.Any=2048]="Any"}(lo||(lo={}));var wo=/^(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1AC0\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDF46-\uDF50]|\uD804[\uDC01\uDC38-\uDC46\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD30-\uDD36\uDEEC-\uDEEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])$/,ko=/^(?:[\u0600-\u0605\u06DD\u070F\u0890\u0891\u08E2\u0D4E]|\uD804[\uDCBD\uDCCD\uDDC2\uDDC3]|\uD806[\uDD3F\uDD41\uDE3A\uDE84-\uDE89]|\uD807\uDD46)$/,Ao=/^(?:[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E\u094F\u0982\u0983\u09BF\u09C0\u09C7\u09C8\u09CB\u09CC\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB\u0ACC\u0B02\u0B03\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0C01-\u0C03\u0C41-\u0C44\u0C82\u0C83\u0CBE\u0CC0\u0CC1\u0CC3\u0CC4\u0CC7\u0CC8\u0CCA\u0CCB\u0D02\u0D03\u0D3F\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D82\u0D83\u0DD0\u0DD1\u0DD8-\u0DDE\u0DF2\u0DF3\u0E33\u0EB3\u0F3E\u0F3F\u0F7F\u1031\u103B\u103C\u1056\u1057\u1084\u1715\u1734\u17B6\u17BE-\u17C5\u17C7\u17C8\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1A19\u1A1A\u1A55\u1A57\u1A6D-\u1A72\u1B04\u1B3B\u1B3D-\u1B41\u1B43\u1B44\u1B82\u1BA1\u1BA6\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1C24-\u1C2B\u1C34\u1C35\u1CE1\u1CF7\uA823\uA824\uA827\uA880\uA881\uA8B4-\uA8C3\uA952\uA953\uA983\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9C0\uAA2F\uAA30\uAA33\uAA34\uAA4D\uAAEB\uAAEE\uAAEF\uAAF5\uABE3\uABE4\uABE6\uABE7\uABE9\uABEA\uABEC]|\uD804[\uDC00\uDC02\uDC82\uDCB0-\uDCB2\uDCB7\uDCB8\uDD2C\uDD45\uDD46\uDD82\uDDB3-\uDDB5\uDDBF\uDDC0\uDDCE\uDE2C-\uDE2E\uDE32\uDE33\uDE35\uDEE0-\uDEE2\uDF02\uDF03\uDF3F\uDF41-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF62\uDF63]|\uD805[\uDC35-\uDC37\uDC40\uDC41\uDC45\uDCB1\uDCB2\uDCB9\uDCBB\uDCBC\uDCBE\uDCC1\uDDB0\uDDB1\uDDB8-\uDDBB\uDDBE\uDE30-\uDE32\uDE3B\uDE3C\uDE3E\uDEAC\uDEAE\uDEAF\uDEB6\uDF26]|\uD806[\uDC2C-\uDC2E\uDC38\uDD31-\uDD35\uDD37\uDD38\uDD3D\uDD40\uDD42\uDDD1-\uDDD3\uDDDC-\uDDDF\uDDE4\uDE39\uDE57\uDE58\uDE97]|\uD807[\uDC2F\uDC3E\uDCA9\uDCB1\uDCB4\uDD8A-\uDD8E\uDD93\uDD94\uDD96\uDEF5\uDEF6]|\uD81B[\uDF51-\uDF87\uDFF0\uDFF1]|\uD834[\uDD66\uDD6D])$/,xo=/^[\u1100-\u115F\uA960-\uA97C]$/,bo=/^[\u1160-\u11A7\uD7B0-\uD7C6]$/,Io=/^[\u11A8-\u11FF\uD7CB-\uD7FB]$/,Bo=/^[\uAC00\uAC1C\uAC38\uAC54\uAC70\uAC8C\uACA8\uACC4\uACE0\uACFC\uAD18\uAD34\uAD50\uAD6C\uAD88\uADA4\uADC0\uADDC\uADF8\uAE14\uAE30\uAE4C\uAE68\uAE84\uAEA0\uAEBC\uAED8\uAEF4\uAF10\uAF2C\uAF48\uAF64\uAF80\uAF9C\uAFB8\uAFD4\uAFF0\uB00C\uB028\uB044\uB060\uB07C\uB098\uB0B4\uB0D0\uB0EC\uB108\uB124\uB140\uB15C\uB178\uB194\uB1B0\uB1CC\uB1E8\uB204\uB220\uB23C\uB258\uB274\uB290\uB2AC\uB2C8\uB2E4\uB300\uB31C\uB338\uB354\uB370\uB38C\uB3A8\uB3C4\uB3E0\uB3FC\uB418\uB434\uB450\uB46C\uB488\uB4A4\uB4C0\uB4DC\uB4F8\uB514\uB530\uB54C\uB568\uB584\uB5A0\uB5BC\uB5D8\uB5F4\uB610\uB62C\uB648\uB664\uB680\uB69C\uB6B8\uB6D4\uB6F0\uB70C\uB728\uB744\uB760\uB77C\uB798\uB7B4\uB7D0\uB7EC\uB808\uB824\uB840\uB85C\uB878\uB894\uB8B0\uB8CC\uB8E8\uB904\uB920\uB93C\uB958\uB974\uB990\uB9AC\uB9C8\uB9E4\uBA00\uBA1C\uBA38\uBA54\uBA70\uBA8C\uBAA8\uBAC4\uBAE0\uBAFC\uBB18\uBB34\uBB50\uBB6C\uBB88\uBBA4\uBBC0\uBBDC\uBBF8\uBC14\uBC30\uBC4C\uBC68\uBC84\uBCA0\uBCBC\uBCD8\uBCF4\uBD10\uBD2C\uBD48\uBD64\uBD80\uBD9C\uBDB8\uBDD4\uBDF0\uBE0C\uBE28\uBE44\uBE60\uBE7C\uBE98\uBEB4\uBED0\uBEEC\uBF08\uBF24\uBF40\uBF5C\uBF78\uBF94\uBFB0\uBFCC\uBFE8\uC004\uC020\uC03C\uC058\uC074\uC090\uC0AC\uC0C8\uC0E4\uC100\uC11C\uC138\uC154\uC170\uC18C\uC1A8\uC1C4\uC1E0\uC1FC\uC218\uC234\uC250\uC26C\uC288\uC2A4\uC2C0\uC2DC\uC2F8\uC314\uC330\uC34C\uC368\uC384\uC3A0\uC3BC\uC3D8\uC3F4\uC410\uC42C\uC448\uC464\uC480\uC49C\uC4B8\uC4D4\uC4F0\uC50C\uC528\uC544\uC560\uC57C\uC598\uC5B4\uC5D0\uC5EC\uC608\uC624\uC640\uC65C\uC678\uC694\uC6B0\uC6CC\uC6E8\uC704\uC720\uC73C\uC758\uC774\uC790\uC7AC\uC7C8\uC7E4\uC800\uC81C\uC838\uC854\uC870\uC88C\uC8A8\uC8C4\uC8E0\uC8FC\uC918\uC934\uC950\uC96C\uC988\uC9A4\uC9C0\uC9DC\uC9F8\uCA14\uCA30\uCA4C\uCA68\uCA84\uCAA0\uCABC\uCAD8\uCAF4\uCB10\uCB2C\uCB48\uCB64\uCB80\uCB9C\uCBB8\uCBD4\uCBF0\uCC0C\uCC28\uCC44\uCC60\uCC7C\uCC98\uCCB4\uCCD0\uCCEC\uCD08\uCD24\uCD40\uCD5C\uCD78\uCD94\uCDB0\uCDCC\uCDE8\uCE04\uCE20\uCE3C\uCE58\uCE74\uCE90\uCEAC\uCEC8\uCEE4\uCF00\uCF1C\uCF38\uCF54\uCF70\uCF8C\uCFA8\uCFC4\uCFE0\uCFFC\uD018\uD034\uD050\uD06C\uD088\uD0A4\uD0C0\uD0DC\uD0F8\uD114\uD130\uD14C\uD168\uD184\uD1A0\uD1BC\uD1D8\uD1F4\uD210\uD22C\uD248\uD264\uD280\uD29C\uD2B8\uD2D4\uD2F0\uD30C\uD328\uD344\uD360\uD37C\uD398\uD3B4\uD3D0\uD3EC\uD408\uD424\uD440\uD45C\uD478\uD494\uD4B0\uD4CC\uD4E8\uD504\uD520\uD53C\uD558\uD574\uD590\uD5AC\uD5C8\uD5E4\uD600\uD61C\uD638\uD654\uD670\uD68C\uD6A8\uD6C4\uD6E0\uD6FC\uD718\uD734\uD750\uD76C\uD788]$/,So=/^[\uAC01-\uAC1B\uAC1D-\uAC37\uAC39-\uAC53\uAC55-\uAC6F\uAC71-\uAC8B\uAC8D-\uACA7\uACA9-\uACC3\uACC5-\uACDF\uACE1-\uACFB\uACFD-\uAD17\uAD19-\uAD33\uAD35-\uAD4F\uAD51-\uAD6B\uAD6D-\uAD87\uAD89-\uADA3\uADA5-\uADBF\uADC1-\uADDB\uADDD-\uADF7\uADF9-\uAE13\uAE15-\uAE2F\uAE31-\uAE4B\uAE4D-\uAE67\uAE69-\uAE83\uAE85-\uAE9F\uAEA1-\uAEBB\uAEBD-\uAED7\uAED9-\uAEF3\uAEF5-\uAF0F\uAF11-\uAF2B\uAF2D-\uAF47\uAF49-\uAF63\uAF65-\uAF7F\uAF81-\uAF9B\uAF9D-\uAFB7\uAFB9-\uAFD3\uAFD5-\uAFEF\uAFF1-\uB00B\uB00D-\uB027\uB029-\uB043\uB045-\uB05F\uB061-\uB07B\uB07D-\uB097\uB099-\uB0B3\uB0B5-\uB0CF\uB0D1-\uB0EB\uB0ED-\uB107\uB109-\uB123\uB125-\uB13F\uB141-\uB15B\uB15D-\uB177\uB179-\uB193\uB195-\uB1AF\uB1B1-\uB1CB\uB1CD-\uB1E7\uB1E9-\uB203\uB205-\uB21F\uB221-\uB23B\uB23D-\uB257\uB259-\uB273\uB275-\uB28F\uB291-\uB2AB\uB2AD-\uB2C7\uB2C9-\uB2E3\uB2E5-\uB2FF\uB301-\uB31B\uB31D-\uB337\uB339-\uB353\uB355-\uB36F\uB371-\uB38B\uB38D-\uB3A7\uB3A9-\uB3C3\uB3C5-\uB3DF\uB3E1-\uB3FB\uB3FD-\uB417\uB419-\uB433\uB435-\uB44F\uB451-\uB46B\uB46D-\uB487\uB489-\uB4A3\uB4A5-\uB4BF\uB4C1-\uB4DB\uB4DD-\uB4F7\uB4F9-\uB513\uB515-\uB52F\uB531-\uB54B\uB54D-\uB567\uB569-\uB583\uB585-\uB59F\uB5A1-\uB5BB\uB5BD-\uB5D7\uB5D9-\uB5F3\uB5F5-\uB60F\uB611-\uB62B\uB62D-\uB647\uB649-\uB663\uB665-\uB67F\uB681-\uB69B\uB69D-\uB6B7\uB6B9-\uB6D3\uB6D5-\uB6EF\uB6F1-\uB70B\uB70D-\uB727\uB729-\uB743\uB745-\uB75F\uB761-\uB77B\uB77D-\uB797\uB799-\uB7B3\uB7B5-\uB7CF\uB7D1-\uB7EB\uB7ED-\uB807\uB809-\uB823\uB825-\uB83F\uB841-\uB85B\uB85D-\uB877\uB879-\uB893\uB895-\uB8AF\uB8B1-\uB8CB\uB8CD-\uB8E7\uB8E9-\uB903\uB905-\uB91F\uB921-\uB93B\uB93D-\uB957\uB959-\uB973\uB975-\uB98F\uB991-\uB9AB\uB9AD-\uB9C7\uB9C9-\uB9E3\uB9E5-\uB9FF\uBA01-\uBA1B\uBA1D-\uBA37\uBA39-\uBA53\uBA55-\uBA6F\uBA71-\uBA8B\uBA8D-\uBAA7\uBAA9-\uBAC3\uBAC5-\uBADF\uBAE1-\uBAFB\uBAFD-\uBB17\uBB19-\uBB33\uBB35-\uBB4F\uBB51-\uBB6B\uBB6D-\uBB87\uBB89-\uBBA3\uBBA5-\uBBBF\uBBC1-\uBBDB\uBBDD-\uBBF7\uBBF9-\uBC13\uBC15-\uBC2F\uBC31-\uBC4B\uBC4D-\uBC67\uBC69-\uBC83\uBC85-\uBC9F\uBCA1-\uBCBB\uBCBD-\uBCD7\uBCD9-\uBCF3\uBCF5-\uBD0F\uBD11-\uBD2B\uBD2D-\uBD47\uBD49-\uBD63\uBD65-\uBD7F\uBD81-\uBD9B\uBD9D-\uBDB7\uBDB9-\uBDD3\uBDD5-\uBDEF\uBDF1-\uBE0B\uBE0D-\uBE27\uBE29-\uBE43\uBE45-\uBE5F\uBE61-\uBE7B\uBE7D-\uBE97\uBE99-\uBEB3\uBEB5-\uBECF\uBED1-\uBEEB\uBEED-\uBF07\uBF09-\uBF23\uBF25-\uBF3F\uBF41-\uBF5B\uBF5D-\uBF77\uBF79-\uBF93\uBF95-\uBFAF\uBFB1-\uBFCB\uBFCD-\uBFE7\uBFE9-\uC003\uC005-\uC01F\uC021-\uC03B\uC03D-\uC057\uC059-\uC073\uC075-\uC08F\uC091-\uC0AB\uC0AD-\uC0C7\uC0C9-\uC0E3\uC0E5-\uC0FF\uC101-\uC11B\uC11D-\uC137\uC139-\uC153\uC155-\uC16F\uC171-\uC18B\uC18D-\uC1A7\uC1A9-\uC1C3\uC1C5-\uC1DF\uC1E1-\uC1FB\uC1FD-\uC217\uC219-\uC233\uC235-\uC24F\uC251-\uC26B\uC26D-\uC287\uC289-\uC2A3\uC2A5-\uC2BF\uC2C1-\uC2DB\uC2DD-\uC2F7\uC2F9-\uC313\uC315-\uC32F\uC331-\uC34B\uC34D-\uC367\uC369-\uC383\uC385-\uC39F\uC3A1-\uC3BB\uC3BD-\uC3D7\uC3D9-\uC3F3\uC3F5-\uC40F\uC411-\uC42B\uC42D-\uC447\uC449-\uC463\uC465-\uC47F\uC481-\uC49B\uC49D-\uC4B7\uC4B9-\uC4D3\uC4D5-\uC4EF\uC4F1-\uC50B\uC50D-\uC527\uC529-\uC543\uC545-\uC55F\uC561-\uC57B\uC57D-\uC597\uC599-\uC5B3\uC5B5-\uC5CF\uC5D1-\uC5EB\uC5ED-\uC607\uC609-\uC623\uC625-\uC63F\uC641-\uC65B\uC65D-\uC677\uC679-\uC693\uC695-\uC6AF\uC6B1-\uC6CB\uC6CD-\uC6E7\uC6E9-\uC703\uC705-\uC71F\uC721-\uC73B\uC73D-\uC757\uC759-\uC773\uC775-\uC78F\uC791-\uC7AB\uC7AD-\uC7C7\uC7C9-\uC7E3\uC7E5-\uC7FF\uC801-\uC81B\uC81D-\uC837\uC839-\uC853\uC855-\uC86F\uC871-\uC88B\uC88D-\uC8A7\uC8A9-\uC8C3\uC8C5-\uC8DF\uC8E1-\uC8FB\uC8FD-\uC917\uC919-\uC933\uC935-\uC94F\uC951-\uC96B\uC96D-\uC987\uC989-\uC9A3\uC9A5-\uC9BF\uC9C1-\uC9DB\uC9DD-\uC9F7\uC9F9-\uCA13\uCA15-\uCA2F\uCA31-\uCA4B\uCA4D-\uCA67\uCA69-\uCA83\uCA85-\uCA9F\uCAA1-\uCABB\uCABD-\uCAD7\uCAD9-\uCAF3\uCAF5-\uCB0F\uCB11-\uCB2B\uCB2D-\uCB47\uCB49-\uCB63\uCB65-\uCB7F\uCB81-\uCB9B\uCB9D-\uCBB7\uCBB9-\uCBD3\uCBD5-\uCBEF\uCBF1-\uCC0B\uCC0D-\uCC27\uCC29-\uCC43\uCC45-\uCC5F\uCC61-\uCC7B\uCC7D-\uCC97\uCC99-\uCCB3\uCCB5-\uCCCF\uCCD1-\uCCEB\uCCED-\uCD07\uCD09-\uCD23\uCD25-\uCD3F\uCD41-\uCD5B\uCD5D-\uCD77\uCD79-\uCD93\uCD95-\uCDAF\uCDB1-\uCDCB\uCDCD-\uCDE7\uCDE9-\uCE03\uCE05-\uCE1F\uCE21-\uCE3B\uCE3D-\uCE57\uCE59-\uCE73\uCE75-\uCE8F\uCE91-\uCEAB\uCEAD-\uCEC7\uCEC9-\uCEE3\uCEE5-\uCEFF\uCF01-\uCF1B\uCF1D-\uCF37\uCF39-\uCF53\uCF55-\uCF6F\uCF71-\uCF8B\uCF8D-\uCFA7\uCFA9-\uCFC3\uCFC5-\uCFDF\uCFE1-\uCFFB\uCFFD-\uD017\uD019-\uD033\uD035-\uD04F\uD051-\uD06B\uD06D-\uD087\uD089-\uD0A3\uD0A5-\uD0BF\uD0C1-\uD0DB\uD0DD-\uD0F7\uD0F9-\uD113\uD115-\uD12F\uD131-\uD14B\uD14D-\uD167\uD169-\uD183\uD185-\uD19F\uD1A1-\uD1BB\uD1BD-\uD1D7\uD1D9-\uD1F3\uD1F5-\uD20F\uD211-\uD22B\uD22D-\uD247\uD249-\uD263\uD265-\uD27F\uD281-\uD29B\uD29D-\uD2B7\uD2B9-\uD2D3\uD2D5-\uD2EF\uD2F1-\uD30B\uD30D-\uD327\uD329-\uD343\uD345-\uD35F\uD361-\uD37B\uD37D-\uD397\uD399-\uD3B3\uD3B5-\uD3CF\uD3D1-\uD3EB\uD3ED-\uD407\uD409-\uD423\uD425-\uD43F\uD441-\uD45B\uD45D-\uD477\uD479-\uD493\uD495-\uD4AF\uD4B1-\uD4CB\uD4CD-\uD4E7\uD4E9-\uD503\uD505-\uD51F\uD521-\uD53B\uD53D-\uD557\uD559-\uD573\uD575-\uD58F\uD591-\uD5AB\uD5AD-\uD5C7\uD5C9-\uD5E3\uD5E5-\uD5FF\uD601-\uD61B\uD61D-\uD637\uD639-\uD653\uD655-\uD66F\uD671-\uD68B\uD68D-\uD6A7\uD6A9-\uD6C3\uD6C5-\uD6DF\uD6E1-\uD6FB\uD6FD-\uD717\uD719-\uD733\uD735-\uD74F\uD751-\uD76B\uD76D-\uD787\uD789-\uD7A3]$/,Mo=/^(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])$/,Lo=function(e,t){var n=lo.Any;return-1!==e.search(wo)&&(n|=lo.Extend),8205===t&&(n|=lo.ZWJ),t>=127462&&t<=127487&&(n|=lo.RI),-1!==e.search(ko)&&(n|=lo.Prepend),-1!==e.search(Ao)&&(n|=lo.SpacingMark),-1!==e.search(xo)&&(n|=lo.L),-1!==e.search(bo)&&(n|=lo.V),-1!==e.search(Io)&&(n|=lo.T),-1!==e.search(Bo)&&(n|=lo.LV),-1!==e.search(So)&&(n|=lo.LVT),-1!==e.search(Mo)&&(n|=lo.ExtPict),n};function Ro(e,t){return 0!=(e&t)}var To=[[lo.L,lo.L|lo.V|lo.LV|lo.LVT],[lo.LV|lo.V,lo.V|lo.T],[lo.LVT|lo.T,lo.T],[lo.Any,lo.Extend|lo.ZWJ],[lo.Any,lo.SpacingMark],[lo.Prepend,lo.Any],[lo.ZWJ,lo.ExtPict],[lo.RI,lo.RI]];function Fo(e,t){return-1===de()(To).call(To,(function(n){return Ro(e,n[0])&&Ro(t,n[1])}))}var No=/(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1AC0\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDF46-\uDF50]|\uD804[\uDC01\uDC38-\uDC46\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD30-\uDD36\uDEEC-\uDEEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])*\u200D$/,Go=function(e){return-1!==e.search(No)},Zo=/(?:\uD83C[\uDDE6-\uDDFF])+$/g,Qo=function(e){var t=e.match(Zo);return null!==t&&t[0].length/2%2==1},jo={delete:function(e,t){e.delete(t)},insertFragment:function(e,t,n){e.insertFragment(t,n)},insertText:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};qa.withoutNormalizing(e,(function(){var r=n.voids,a=void 0!==r&&r,o=n.at,i=void 0===o?uo(e):o;if(Ma.isPath(i)&&(i=qa.range(e,i)),ja.isRange(i))if(ja.isCollapsed(i))i=i.anchor;else{var l=ja.end(i);if(!a&&qa.void(e,{at:l}))return;var c=ja.start(i),u=qa.pointRef(e,c),s=qa.pointRef(e,l);Oo.delete(e,{at:i,voids:a});var d=u.unref(),f=s.unref();i=d||f,Oo.setSelection(e,{anchor:i,focus:i})}if(!(!a&&qa.void(e,{at:i})||qa.elementReadOnly(e,{at:i}))){var g=i,h=g.path,v=g.offset;t.length>0&&e.apply({type:"insert_text",path:h,offset:v,text:t})}}))}};function Jo(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Po(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)O()(n=Jo(Object(r),!0)).call(n,(function(t){La(e,t,r[t])}));else if(A())b()(e,A()(r));else{var a;O()(a=Jo(Object(r))).call(a,(function(t){B()(e,t,w()(r,t))}))}}return e}var Oo=Po(Po(Po(Po({},Fa),{insertNodes:function(e,t,n){e.insertNodes(t,n)},liftNodes:function(e,t){e.liftNodes(t)},mergeNodes:function(e,t){e.mergeNodes(t)},moveNodes:function(e,t){e.moveNodes(t)},removeNodes:function(e,t){e.removeNodes(t)},setNodes:function(e,t,n){e.setNodes(t,n)},splitNodes:function(e,t){e.splitNodes(t)},unsetNodes:function(e,t,n){e.unsetNodes(t,n)},unwrapNodes:function(e,t){e.unwrapNodes(t)},wrapNodes:function(e,t,n){e.wrapNodes(t,n)}}),{collapse:function(e,t){e.collapse(t)},deselect:function(e){e.deselect()},move:function(e,t){e.move(t)},select:function(e,t){e.select(t)},setPoint:function(e,t,n){e.setPoint(t,n)},setSelection:function(e,t){e.setSelection(t)}}),jo),Uo=function(e,t){var n,r=Ca(qa.pathRefs(e));try{for(r.s();!(n=r.n()).done;){var a=n.value;Da(a,t)}}catch(e){r.e(e)}finally{r.f()}var o,i=Ca(qa.pointRefs(e));try{for(i.s();!(o=i.n()).done;){var l=o.value;Ea(l,t)}}catch(e){i.e(e)}finally{i.f()}var c,u=Ca(qa.rangeRefs(e));try{for(u.s();!(c=u.n()).done;){var s=c.value;wa(s,t)}}catch(e){u.e(e)}finally{u.f()}var d,f,g=ka.get(e)||[],h=Aa.get(e)||new(ua()),v=function(e){if(e){var t=e.join(",");f.has(t)||(f.add(t),d.push(e))}};if(Ma.operationCanTransformPath(t)){d=[],f=new(ua());var p,m=Ca(g);try{for(m.s();!(p=m.n()).done;){var C=p.value;v(Ma.transform(C,t))}}catch(e){m.e(e)}finally{m.f()}}else d=g,f=h;var y,D=Ca(e.getDirtyPaths(t));try{for(D.s();!(y=D.n()).done;){v(y.value)}}catch(e){D.e(e)}finally{D.f()}ka.set(e,d),Aa.set(e,f),Oo.transform(e,t),e.operations.push(t),qa.normalize(e,{operation:t}),"set_selection"===t.type&&(e.marks=null),xa.get(e)||(xa.set(e,!0),Xr().resolve().then((function(){xa.set(e,!1),e.onChange({operation:t}),e.operations=[]})))},Wo=function(e,t){switch(t.type){case"insert_text":case"remove_text":case"set_node":var n=t.path;return Ma.levels(n);case"insert_node":var r,a=t.node,o=t.path,i=Ma.levels(o),l=co.isText(a)?[]:Fn()(za.nodes(a),(function(e){var t=(0,S.c)(e,2)[1];return G()(o).call(o,t)}));return G()(r=[]).call(r,(0,yn.c)(i),(0,yn.c)(l));case"merge_node":var c,u=t.path,s=Ma.ancestors(u),d=Ma.previous(u);return G()(c=[]).call(c,(0,yn.c)(s),[d]);case"move_node":var f,g=t.path,h=t.newPath;if(Ma.equals(g,h))return[];var v,p=[],m=[],C=Ca(Ma.ancestors(g));try{for(C.s();!(v=C.n()).done;){var y=v.value,D=Ma.transform(y,t);p.push(D)}}catch(e){C.e(e)}finally{C.f()}var E,w=Ca(Ma.ancestors(h));try{for(w.s();!(E=w.n()).done;){var k=E.value,A=Ma.transform(k,t);m.push(A)}}catch(e){w.e(e)}finally{w.f()}var x=m[m.length-1],b=h[h.length-1],I=G()(x).call(x,b);return G()(f=[]).call(f,p,m,[I]);case"remove_node":var B=t.path,M=Ma.ancestors(B);return(0,yn.c)(M);case"split_node":var L,R=t.path,T=Ma.levels(R),F=Ma.next(R);return G()(L=[]).call(L,(0,yn.c)(T),[F]);default:return[]}},zo=function(e){var t=e.selection;return t?za.fragment(e,t):[]},Ho=function(e,t){var n=(0,S.c)(t,2),r=n[0],a=n[1];if(!co.isText(r))if(Pa.isElement(r)&&0===r.children.length){Oo.insertNodes(e,{text:""},{at:G()(a).call(a,0),voids:!0})}else for(var o=!qa.isEditor(r)&&(Pa.isElement(r)&&(e.isInline(r)||0===r.children.length||co.isText(r.children[0])||e.isInline(r.children[0]))),i=0,l=0;l<r.children.length;l++,i++){var c=za.get(e,a);if(!co.isText(c)){var u=c.children[i],s=c.children[i-1],d=l===r.children.length-1;if((co.isText(u)||Pa.isElement(u)&&e.isInline(u))!==o)Oo.removeNodes(e,{at:G()(a).call(a,i),voids:!0}),i--;else if(Pa.isElement(u)){if(e.isInline(u))if(null!=s&&co.isText(s)){if(d){Oo.insertNodes(e,{text:""},{at:G()(a).call(a,i+1),voids:!0}),i++}}else{Oo.insertNodes(e,{text:""},{at:G()(a).call(a,i),voids:!0}),i++}}else null!=s&&co.isText(s)&&(co.equals(u,s,{loose:!0})?(Oo.mergeNodes(e,{at:G()(a).call(a,i),voids:!0}),i--):""===s.text?(Oo.removeNodes(e,{at:G()(a).call(a,i-1),voids:!0}),i--):""===u.text&&(Oo.removeNodes(e,{at:G()(a).call(a,i),voids:!0}),i--))}}},Ko=function(e,t){var n=t.iteration,r=42*t.initialDirtyPathsLength;if(n>r)throw new Error("Could not completely normalize the editor after ".concat(r," iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state."));return!0},Vo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.voids,r=void 0!==n&&n,a=t.mode,o=void 0===a?"lowest":a,i=t.at,l=void 0===i?e.selection:i,c=t.match;if(l){var u,s=qa.path(e,l),d="lowest"===o,f=Ca(qa.levels(e,{at:s,voids:r,match:c,reverse:d}));try{for(f.s();!(u=f.n()).done;){var g=(0,S.c)(u.value,2),h=g[0],v=g[1];if(!co.isText(h))if(ja.isRange(l)){if(Ma.isAncestor(v,l.anchor.path)&&Ma.isAncestor(v,l.focus.path))return[h,v]}else if(!Ma.equals(s,v))return[h,v]}}catch(e){f.e(e)}finally{f.f()}}};function Yo(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function qo(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)O()(n=Yo(Object(r),!0)).call(n,(function(t){La(e,t,r[t])}));else if(A())b()(e,A()(r));else{var a;O()(a=Yo(Object(r))).call(a,(function(t){B()(e,t,w()(r,t))}))}}return e}var Xo=function(e,t,n){var r=e.selection;if(r){var a=function(t,n){if(!co.isText(t))return!1;var r=qa.parent(e,n),a=(0,S.c)(r,2),o=a[0];a[1];return!e.isVoid(o)||e.markableVoid(o)},o=ja.isExpanded(r),i=!1;if(!o){var l=qa.node(e,r),c=(0,S.c)(l,2),u=c[0],s=c[1];if(u&&a(u,s)){var d=qa.parent(e,s),f=(0,S.c)(d,1)[0];i=f&&e.markableVoid(f)}}if(o||i)Oo.setNodes(e,(0,M.c)({},t,n),{match:a,split:!0,voids:!0});else{var g=qo(qo({},qa.marks(e)||{}),{},(0,M.c)({},t,n));e.marks=g,xa.get(e)||e.onChange()}}};function _o(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function $o(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)O()(n=_o(Object(r),!0)).call(n,(function(t){La(e,t,r[t])}));else if(A())b()(e,A()(r));else{var a;O()(a=_o(Object(r))).call(a,(function(t){B()(e,t,w()(r,t))}))}}return e}var ei=function(e,t){var n,r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o={anchor:qa.point(e,t,{edge:"end"}),focus:qa.end(e,[])},i=a.distance,l=void 0===i?1:i,c=0,u=Ca(qa.positions(e,$o($o({},a),{},{at:o})));try{for(u.s();!(r=u.n()).done;){var s=r.value;if(c>l)break;0!==c&&(n=s),c++}}catch(e){u.e(e)}finally{u.f()}return n};function ti(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function ni(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)O()(n=ti(Object(r),!0)).call(n,(function(t){La(e,t,r[t])}));else if(A())b()(e,A()(r));else{var a;O()(a=ti(Object(r))).call(a,(function(t){B()(e,t,w()(r,t))}))}}return e}var ri=function(e,t){var n,r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o={anchor:qa.start(e,[]),focus:qa.point(e,t,{edge:"start"})},i=a.distance,l=void 0===i?1:i,c=0,u=Ca(qa.positions(e,ni(ni({},a),{},{at:o,reverse:!0})));try{for(u.s();!(r=u.n()).done;){var s=r.value;if(c>l)break;0!==c&&(n=s),c++}}catch(e){u.e(e)}finally{u.f()}return n},ai=function(e,t){var n=e.selection;n&&ja.isCollapsed(n)&&Oo.delete(e,{unit:t,reverse:!0})},oi=function(e,t){var n=e.selection;n&&ja.isCollapsed(n)&&Oo.delete(e,{unit:t})},ii=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).direction,n=void 0===t?"forward":t,r=e.selection;r&&ja.isExpanded(r)&&Oo.delete(e,{reverse:"backward"===n})},li=function(e,t){return[qa.start(e,t),qa.end(e,t)]};function ci(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function ui(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)O()(n=ci(Object(r),!0)).call(n,(function(t){La(e,t,r[t])}));else if(A())b()(e,A()(r));else{var a;O()(a=ci(Object(r))).call(a,(function(t){B()(e,t,w()(r,t))}))}}return e}var si=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return qa.above(e,ui(ui({},t),{},{match:function(t){return Pa.isElement(t)&&qa.isElementReadOnly(e,t)}}))},di=function(e,t){return qa.point(e,t,{edge:"end"})},fi=function(e,t){var n=qa.path(e,t,{edge:"start"});return qa.node(e,n)},gi=function(e,t){var n=qa.range(e,t);return za.fragment(e,n)};function hi(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function vi(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)O()(n=hi(Object(r),!0)).call(n,(function(t){La(e,t,r[t])}));else if(A())b()(e,A()(r));else{var a;O()(a=hi(Object(r))).call(a,(function(t){B()(e,t,w()(r,t))}))}}return e}var pi=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return qa.above(e,vi(vi({},t),{},{match:function(t){return Pa.isElement(t)&&qa.isVoid(e,t)}}))},mi=function(e,t){var n;return Vn()(n=t.children).call(n,(function(t){return Pa.isElement(t)&&qa.isBlock(e,t)}))},Ci=function(e,t){var n;return Vn()(n=t.children).call(n,(function(t){return co.isText(t)||qa.isInline(e,t)}))},yi=function(e,t){return za.has(e,t)},Di=function(e,t){var n;return oa()(n=t.children).call(n,(function(e){return co.isText(e)}))},Ei=function(e){Oo.splitNodes(e,{always:!0})},wi=function(e,t,n){Oo.insertNodes(e,t,n)},ki=function(e){Oo.splitNodes(e,{always:!0})};function Ai(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}var xi=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.selection,a=e.marks;if(r){if(a){var o=function(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)O()(n=Ai(Object(r),!0)).call(n,(function(t){La(e,t,r[t])}));else if(A())b()(e,A()(r));else{var a;O()(a=Ai(Object(r))).call(a,(function(t){B()(e,t,w()(r,t))}))}}return e}({text:t},a);Oo.insertNodes(e,o,{at:n.at,voids:n.voids})}else Oo.insertText(e,t,n);e.marks=null}},bi=function(e,t){return!e.isInline(t)},Ii=function(e,t,n){return qa.isStart(e,t,n)||qa.isEnd(e,t,n)},Bi=function(e,t){var n=t.children,r=(0,S.c)(n,1)[0];return 0===n.length||1===n.length&&co.isText(r)&&""===r.text&&!e.isVoid(t)},Si=function(e,t,n){var r=qa.end(e,n);return eo.equals(t,r)},Mi=function(e){var t=ba.get(e);return void 0===t||t},Li=function(e,t,n){if(0!==t.offset)return!1;var r=qa.start(e,n);return eo.equals(t,r)},Ri=function(e,t){var n=qa.path(e,t,{edge:"end"});return qa.node(e,n)},Ti=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=qa.path(e,t,n);return[za.leaf(e,r),r]};function Fi(e){var t,n,r,a,o,i,l,c,u,s,d,f,g,h,v,p=arguments;return $r().wrap((function(m){for(;;)switch(m.prev=m.next){case 0:if(n=(t=p.length>1&&void 0!==p[1]?p[1]:{}).at,r=void 0===n?e.selection:n,a=ra()(t),o=void 0!==a&&a,i=t.voids,l=void 0!==i&&i,null==(c=t.match)&&(c=function(){return!0}),r){m.next=6;break}return m.abrupt("return");case 6:u=[],s=qa.path(e,r),d=Ca(za.levels(e,s)),m.prev=9,d.s();case 11:if((f=d.n()).done){m.next=20;break}if(g=(0,S.c)(f.value,2),h=g[0],v=g[1],c(h,v)){m.next=15;break}return m.abrupt("continue",18);case 15:if(u.push([h,v]),l||!Pa.isElement(h)||!qa.isVoid(e,h)){m.next=18;break}return m.abrupt("break",20);case 18:m.next=11;break;case 20:m.next=25;break;case 22:m.prev=22,m.t0=m.catch(9),d.e(m.t0);case 25:return m.prev=25,d.f(),m.finish(25);case 28:return o&&ra()(u).call(u),m.delegateYield(u,"t1",30);case 30:case"end":return m.stop()}}),va,null,[[9,22,25,28]])}var Ni=["text"],Gi=["text"],Zi=function(e){var t=e.marks,n=e.selection;if(!n)return null;if(t)return t;if(ja.isExpanded(n)){var r=qa.nodes(e,{match:co.isText}),a=(0,S.c)(r,1)[0];return a?Ga((0,S.c)(a,1)[0],Ni):{}}var o=n.anchor,i=o.path,l=qa.leaf(e,i),c=(0,S.c)(l,1)[0];if(0===o.offset){var u=qa.previous(e,{at:i,match:co.isText}),s=qa.above(e,{match:function(t){return Pa.isElement(t)&&qa.isVoid(e,t)&&e.markableVoid(t)}});if(!s){var d=qa.above(e,{match:function(t){return Pa.isElement(t)&&qa.isBlock(e,t)}});if(u&&d){var f=(0,S.c)(u,2),g=f[0],h=f[1],v=(0,S.c)(d,2)[1];Ma.isAncestor(v,h)&&(c=g)}}}return Ga(c,Gi)},Qi=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.mode,r=void 0===n?"lowest":n,a=t.voids,o=void 0!==a&&a,i=t.match,l=t.at,c=void 0===l?e.selection:l;if(c){var u=qa.after(e,c,{voids:o});if(u){var s=qa.last(e,[]),d=(0,S.c)(s,2)[1],f=[u.path,d];if(Ma.isPath(c)&&0===c.length)throw new Error("Cannot get the next node from the root node!");if(null==i)if(Ma.isPath(c)){var g=qa.parent(e,c),h=(0,S.c)(g,1)[0];i=function(e){var t;return xn()(t=h.children).call(t,e)}}else i=function(){return!0};var v=qa.nodes(e,{at:f,match:i,mode:r,voids:o}),p=(0,S.c)(v,1)[0];return p}}},ji=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=qa.path(e,t,n),a=za.get(e,r);return[a,r]};function Ji(e){var t,n,r,a,o,i,l,c,u,s,d,f,g,h,v,p,m,C,y,D,E,w,k,A,x,b,I,B,M=arguments;return $r().wrap((function(L){for(;;)switch(L.prev=L.next){case 0:if(n=(t=M.length>1&&void 0!==M[1]?M[1]:{}).at,r=void 0===n?e.selection:n,a=t.mode,o=void 0===a?"all":a,i=t.universal,l=void 0!==i&&i,c=ra()(t),u=void 0!==c&&c,s=t.voids,d=void 0!==s&&s,f=t.ignoreNonSelectable,g=void 0!==f&&f,(h=t.match)||(h=function(){return!0}),r){L.next=6;break}return L.abrupt("return");case 6:Xa.isSpan(r)?(v=r[0],p=r[1]):(m=qa.path(e,r,{edge:"start"}),C=qa.path(e,r,{edge:"end"}),v=u?C:m,p=u?m:C),y=za.nodes(e,{reverse:u,from:v,to:p,pass:function(t){var n=(0,S.c)(t,1)[0];return!!Pa.isElement(n)&&(!(d||!qa.isVoid(e,n)&&!qa.isElementReadOnly(e,n))||!(!g||qa.isSelectable(e,n)))}}),D=[],w=Ca(y),L.prev=10,w.s();case 12:if((k=w.n()).done){L.next=39;break}if(A=(0,S.c)(k.value,2),x=A[0],b=A[1],!g||!Pa.isElement(x)||qa.isSelectable(e,x)){L.next=16;break}return L.abrupt("continue",37);case 16:if(I=E&&0===Ma.compare(b,E[1]),"highest"!==o||!I){L.next=19;break}return L.abrupt("continue",37);case 19:if(h(x,b)){L.next=25;break}if(!l||I||!co.isText(x)){L.next=24;break}return L.abrupt("return");case 24:return L.abrupt("continue",37);case 25:if("lowest"!==o||!I){L.next=28;break}return E=[x,b],L.abrupt("continue",37);case 28:if(!(B="lowest"===o?E:[x,b])){L.next=36;break}if(!l){L.next=34;break}D.push(B),L.next=36;break;case 34:return L.next=36,B;case 36:E=[x,b];case 37:L.next=12;break;case 39:L.next=44;break;case 41:L.prev=41,L.t0=L.catch(10),w.e(L.t0);case 44:return L.prev=44,w.f(),L.finish(44);case 47:if("lowest"!==o||!E){L.next=54;break}if(!l){L.next=52;break}D.push(E),L.next=54;break;case 52:return L.next=54,E;case 54:if(!l){L.next=56;break}return L.delegateYield(D,"t1",56);case 56:case"end":return L.stop()}}),pa,null,[[10,41,44,47]])}var Pi=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.force,r=void 0!==n&&n,a=t.operation,o=function(e){return ka.get(e)||[]},i=function(e){var t=o(e).pop(),n=t.join(",");return function(e){return Aa.get(e)||new(ua())}(e).delete(n),t};if(qa.isNormalizing(e)){if(r){var l=Fn()(za.nodes(e),(function(e){return(0,S.c)(e,2)[1]})),c=new(ua())(F()(l).call(l,(function(e){return e.join(",")})));ka.set(e,l),Aa.set(e,c)}0!==o(e).length&&qa.withoutNormalizing(e,(function(){var t,n=Ca(o(e));try{for(n.s();!(t=n.n()).done;){var r=t.value;if(za.has(e,r)){var l=qa.node(e,r),c=l,u=(0,S.c)(c,2),s=u[0];u[1];Pa.isElement(s)&&0===s.children.length&&e.normalizeNode(l,{operation:a})}}}catch(e){n.e(e)}finally{n.f()}for(var d=o(e),f=d.length,g=0;0!==d.length;){if(!e.shouldNormalize({dirtyPaths:d,iteration:g,initialDirtyPathsLength:f,operation:a}))return;var h=i(e);if(za.has(e,h)){var v=qa.node(e,h);e.normalizeNode(v,{operation:a})}g++,d=o(e)}}))}},Oi=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=qa.path(e,t,n),a=Ma.parent(r);return qa.node(e,a)},Ui=function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).affinity,r={current:t,affinity:void 0===n?"forward":n,unref:function(){var t=r.current;return qa.pathRefs(e).delete(r),r.current=null,t}};return qa.pathRefs(e).add(r),r},Wi=function(e){var t=Ia.get(e);return t||(t=new(ua()),Ia.set(e,t)),t},zi=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.depth,a=n.edge;if(Ma.isPath(t))if("start"===a){var o=za.first(e,t);t=(0,S.c)(o,2)[1]}else if("end"===a){var i=za.last(e,t);t=(0,S.c)(i,2)[1]}return ja.isRange(t)&&(t="start"===a?ja.start(t):"end"===a?ja.end(t):Ma.common(t.anchor.path,t.focus.path)),eo.isPoint(t)&&(t=t.path),null!=r&&(t=kn()(t).call(t,0,r)),t},Hi=function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).affinity,r={current:t,affinity:void 0===n?"forward":n,unref:function(){var t=r.current;return qa.pointRefs(e).delete(r),r.current=null,t}};return qa.pointRefs(e).add(r),r},Ki=function(e){var t=Ba.get(e);return t||(t=new(ua()),Ba.set(e,t)),t},Vi=function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).edge,r=void 0===n?"start":n;if(Ma.isPath(t)){var a;if("end"===r){var o=za.last(e,t);a=(0,S.c)(o,2)[1]}else{var i=za.first(e,t);a=(0,S.c)(i,2)[1]}var l,c,u=za.get(e,a);if(!co.isText(u))throw new Error(G()(l=G()(c="Cannot get the ".concat(r," point in the node at path [")).call(c,t,"] because it has no ")).call(l,r," text node."));return{path:a,offset:"end"===r?u.text.length:0}}if(ja.isRange(t)){var s=ja.edges(t),d=(0,S.c)(s,2),f=d[0],g=d[1];return"start"===r?f:g}return t};function Yi(e){var t,n,r,a,o,i,l,c,u,s,d,f,g,h,v,p,m,C,y,D,E,w,k,A,x,b,I,B,M,L,R,T=arguments;return $r().wrap((function(F){for(;;)switch(F.prev=F.next){case 0:if(R=function(e,t,n){return"character"===t?fo(e,n):"word"===t?po(e,n):"line"===t||"block"===t?e.length:1},n=(t=T.length>1&&void 0!==T[1]?T[1]:{}).at,r=void 0===n?e.selection:n,a=t.unit,o=void 0===a?"offset":a,i=ra()(t),l=void 0!==i&&i,c=t.voids,u=void 0!==c&&c,s=t.ignoreNonSelectable,d=void 0!==s&&s,r){F.next=5;break}return F.abrupt("return");case 5:f=qa.range(e,r),g=ja.edges(f),h=(0,S.c)(g,2),v=h[0],p=h[1],m=l?p:v,C=!1,y="",D=0,E=0,w=0,k=Ca(qa.nodes(e,{at:r,reverse:l,voids:u,ignoreNonSelectable:d})),F.prev=14,k.s();case 16:if((A=k.n()).done){F.next=51;break}if(x=(0,S.c)(A.value,2),b=x[0],I=x[1],!Pa.isElement(b)){F.next=26;break}if(u||!e.isVoid(b)&&!e.isElementReadOnly(b)){F.next=23;break}return F.next=22,qa.start(e,I);case 22:return F.abrupt("continue",49);case 23:if(!e.isInline(b)){F.next=25;break}return F.abrupt("continue",49);case 25:qa.hasInlines(e,b)&&(B=Ma.isAncestor(I,p.path)?p:qa.end(e,I),M=Ma.isAncestor(I,v.path)?v:qa.start(e,I),y=qa.string(e,{anchor:M,focus:B},{voids:u}),C=!0);case 26:if(!co.isText(b)){F.next=49;break}if((L=Ma.equals(I,m.path))?(E=l?m.offset:b.text.length-m.offset,w=m.offset):(E=b.text.length,w=l?E:0),!L&&!C&&"offset"!==o){F.next=33;break}return F.next=32,{path:I,offset:w};case 32:C=!1;case 33:if(0!==D){F.next=39;break}if(""!==y){F.next=37;break}return F.abrupt("break",49);case 37:D=R(y,o,l),y=mo(y,D,l)[1];case 39:if(w=l?w-D:w+D,!((E-=D)<0)){F.next=44;break}return D=-E,F.abrupt("break",49);case 44:return D=0,F.next=47,{path:I,offset:w};case 47:F.next=33;break;case 49:F.next=16;break;case 51:F.next=56;break;case 53:F.prev=53,F.t0=F.catch(14),k.e(F.t0);case 56:return F.prev=56,k.f(),F.finish(56);case 59:case"end":return F.stop()}}),ma,null,[[14,53,56,59]])}var qi=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.mode,r=void 0===n?"lowest":n,a=t.voids,o=void 0!==a&&a,i=t.match,l=t.at,c=void 0===l?e.selection:l;if(c){var u=qa.before(e,c,{voids:o});if(u){var s=qa.first(e,[]),d=(0,S.c)(s,2)[1],f=[u.path,d];if(Ma.isPath(c)&&0===c.length)throw new Error("Cannot get the previous node from the root node!");if(null==i)if(Ma.isPath(c)){var g=qa.parent(e,c),h=(0,S.c)(g,1)[0];i=function(e){var t;return xn()(t=h.children).call(t,e)}}else i=function(){return!0};var v=qa.nodes(e,{reverse:!0,at:f,match:i,mode:r,voids:o}),p=(0,S.c)(v,1)[0];return p}}},Xi=function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).affinity,r={current:t,affinity:void 0===n?"forward":n,unref:function(){var t=r.current;return qa.rangeRefs(e).delete(r),r.current=null,t}};return qa.rangeRefs(e).add(r),r},_i=function(e){var t=Sa.get(e);return t||(t=new(ua()),Sa.set(e,t)),t},$i=function(e,t,n){return ja.isRange(t)&&!n?t:{anchor:qa.start(e,t),focus:qa.end(e,n||t)}};function el(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}var tl=function(e,t){var n=e.selection;if(n){var r=function(t,n){if(!co.isText(t))return!1;var r=qa.parent(e,n),a=(0,S.c)(r,2),o=a[0];a[1];return!e.isVoid(o)||e.markableVoid(o)},a=ja.isExpanded(n),o=!1;if(!a){var i=qa.node(e,n),l=(0,S.c)(i,2),c=l[0],u=l[1];if(c&&r(c,u)){var s=qa.parent(e,u),d=(0,S.c)(s,1)[0];o=d&&e.markableVoid(d)}}if(a||o)Oo.unsetNodes(e,t,{match:r,split:!0,voids:!0});else{var f=function(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)O()(n=el(Object(r),!0)).call(n,(function(t){La(e,t,r[t])}));else if(A())b()(e,A()(r));else{var a;O()(a=el(Object(r))).call(a,(function(t){B()(e,t,w()(r,t))}))}}return e}({},qa.marks(e)||{});delete f[t],e.marks=f,xa.get(e)||e.onChange()}}},nl=function(e,t){ba.set(e,t)},rl=function(e,t){return qa.point(e,t,{edge:"start"})},al=function(e,t){var n,r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).voids,a=void 0!==r&&r,o=qa.range(e,t),i=ja.edges(o),l=(0,S.c)(i,2),c=l[0],u=l[1],s="",d=Ca(qa.nodes(e,{at:o,match:co.isText,voids:a}));try{for(d.s();!(n=d.n()).done;){var f=(0,S.c)(n.value,2),g=f[0],h=f[1],v=g.text;Ma.equals(h,u.path)&&(v=kn()(v).call(v,0,u.offset)),Ma.equals(h,c.path)&&(v=kn()(v).call(v,c.offset)),s+=v}}catch(e){d.e(e)}finally{d.f()}return s},ol=function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).voids,r=void 0!==n&&n,a=ja.edges(t),o=(0,S.c)(a,2),i=o[0],l=o[1];if(0!==i.offset||0!==l.offset||ja.isCollapsed(t)||Ma.hasPrevious(l.path))return t;var c,u=qa.above(e,{at:l,match:function(t){return Pa.isElement(t)&&qa.isBlock(e,t)},voids:r}),s=u?u[1]:[],d={anchor:qa.start(e,i),focus:l},f=!0,g=Ca(qa.nodes(e,{at:d,match:co.isText,reverse:!0,voids:r}));try{for(g.s();!(c=g.n()).done;){var h=(0,S.c)(c.value,2),v=h[0],p=h[1];if(f)f=!1;else if(""!==v.text||Ma.isBefore(p,s)){l={path:p,offset:v.text.length};break}}}catch(e){g.e(e)}finally{g.f()}return{anchor:i,focus:l}},il=function(e,t){var n=qa.isNormalizing(e);qa.setNormalizing(e,!1);try{t()}finally{qa.setNormalizing(e,n)}qa.normalize(e)},ll=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};qa.withoutNormalizing(e,(function(){var n,r,a,o,i,l=ra()(t),c=void 0!==l&&l,u=t.unit,s=void 0===u?"character":u,d=t.distance,f=void 0===d?1:d,g=t.voids,h=void 0!==g&&g,v=t.at,p=void 0===v?e.selection:v,m=t.hanging,C=void 0!==m&&m;if(p){var y=!1;if(ja.isRange(p)&&ja.isCollapsed(p)&&(y=!0,p=p.anchor),eo.isPoint(p)){var D=qa.void(e,{at:p,mode:"highest"});if(!h&&D){p=(0,S.c)(D,2)[1]}else{var E={unit:s,distance:f};p={anchor:p,focus:c?qa.before(e,p,E)||qa.start(e,[]):qa.after(e,p,E)||qa.end(e,[])},C=!0}}if(Ma.isPath(p))Oo.removeNodes(e,{at:p,voids:h});else if(!ja.isCollapsed(p)){if(!C){var w=ja.edges(p),k=(0,S.c)(w,2)[1],A=qa.end(e,[]);eo.equals(k,A)||(p=qa.unhangRange(e,p,{voids:h}))}var x=ja.edges(p),b=(0,S.c)(x,2),I=b[0],B=b[1],M=qa.above(e,{match:function(t){return Pa.isElement(t)&&qa.isBlock(e,t)},at:I,voids:h}),L=qa.above(e,{match:function(t){return Pa.isElement(t)&&qa.isBlock(e,t)},at:B,voids:h}),T=M&&L&&!Ma.equals(M[1],L[1]),N=Ma.equals(I.path,B.path),G=h?null:null!==(o=qa.void(e,{at:I,mode:"highest"}))&&void 0!==o?o:qa.elementReadOnly(e,{at:I,mode:"highest"}),Z=h?null:null!==(i=qa.void(e,{at:B,mode:"highest"}))&&void 0!==i?i:qa.elementReadOnly(e,{at:B,mode:"highest"});if(G){var Q=qa.before(e,I);Q&&M&&Ma.isAncestor(M[1],Q.path)&&(I=Q)}if(Z){var j=qa.after(e,B);j&&L&&Ma.isAncestor(L[1],j.path)&&(B=j)}var J,P,U=[],W=Ca(qa.nodes(e,{at:p,voids:h}));try{for(W.s();!(P=W.n()).done;){var z=P.value,H=z,K=(0,S.c)(H,2),V=K[0],Y=K[1];J&&0===Ma.compare(Y,J)||(!h&&Pa.isElement(V)&&(qa.isVoid(e,V)||qa.isElementReadOnly(e,V))||!Ma.isCommon(Y,I.path)&&!Ma.isCommon(Y,B.path))&&(U.push(z),J=Y)}}catch(e){W.e(e)}finally{W.f()}var q=Fn()(U,(function(t){var n=(0,S.c)(t,2)[1];return qa.pathRef(e,n)})),X=qa.pointRef(e,I),_=qa.pointRef(e,B),$="";if(!N&&!G){var ee,te=X.current,ne=qa.leaf(e,te),re=(0,S.c)(ne,1)[0],ae=te.path,oe=I.offset,ie=kn()(ee=re.text).call(ee,oe);ie.length>0&&(e.apply({type:"remove_text",path:ae,offset:oe,text:ie}),$=ie)}if(O()(n=R()(r=F()(a=ra()(q).call(q)).call(a,(function(e){return e.unref()}))).call(r,(function(e){return null!==e}))).call(n,(function(t){return Oo.removeNodes(e,{at:t,voids:h})})),!Z){var le,ce=_.current,ue=qa.leaf(e,ce),se=(0,S.c)(ue,1)[0],de=ce.path,fe=N?I.offset:0,ge=kn()(le=se.text).call(le,fe,B.offset);ge.length>0&&(e.apply({type:"remove_text",path:de,offset:fe,text:ge}),$=ge)}!N&&T&&_.current&&X.current&&Oo.mergeNodes(e,{at:_.current,hanging:!0,voids:h}),y&&c&&"character"===s&&$.length>1&&$.match(/[\u0E00-\u0E7F]+/)&&Oo.insertText(e,kn()($).call($,0,$.length-f));var he=X.unref(),ve=_.unref(),pe=c?he||ve:ve||he;null==t.at&&pe&&Oo.select(e,pe)}}}))},cl=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};qa.withoutNormalizing(e,(function(){var r=n.hanging,a=void 0!==r&&r,o=n.voids,i=void 0!==o&&o,l=n.at,c=void 0===l?uo(e):l;if(t.length){if(ja.isRange(c))if(a||(c=qa.unhangRange(e,c,{voids:i})),ja.isCollapsed(c))c=c.anchor;else{var u=ja.edges(c),s=(0,S.c)(u,2)[1];if(!i&&qa.void(e,{at:s}))return;var d=qa.pointRef(e,s);Oo.delete(e,{at:c}),c=d.unref()}else Ma.isPath(c)&&(c=qa.start(e,c));if(i||!qa.void(e,{at:c})){var f=qa.above(e,{at:c,match:function(t){return Pa.isElement(t)&&qa.isInline(e,t)},mode:"highest",voids:i});if(f){var g=(0,S.c)(f,2)[1];if(qa.isEnd(e,c,g))c=qa.after(e,g);else if(qa.isStart(e,c,g)){c=qa.before(e,g)}}var h,v=qa.above(e,{match:function(t){return Pa.isElement(t)&&qa.isBlock(e,t)},at:c,voids:i}),p=(0,S.c)(v,2)[1],m=qa.isStart(e,c,p),C=qa.isEnd(e,c,p),y=m&&C,D=!m||m&&C,E=!C,w=za.first({children:t},[]),k=(0,S.c)(w,2)[1],A=za.last({children:t},[]),x=(0,S.c)(A,2)[1],b=[],I=function(t){var n=(0,S.c)(t,2),r=n[0],a=n[1];return!(0===a.length)&&(!!y||!(D&&Ma.isAncestor(a,k)&&Pa.isElement(r)&&!e.isVoid(r)&&!e.isInline(r))&&!(E&&Ma.isAncestor(a,x)&&Pa.isElement(r)&&!e.isVoid(r)&&!e.isInline(r)))},B=Ca(za.nodes({children:t},{pass:I}));try{for(B.s();!(h=B.n()).done;){var M=h.value;I(M)&&b.push(M)}}catch(e){B.e(e)}finally{B.f()}for(var L=[],R=[],T=[],F=!0,N=!1,G=0,Z=b;G<Z.length;G++){var Q=(0,S.c)(Z[G],1)[0];Pa.isElement(Q)&&!e.isInline(Q)?(F=!1,N=!0,R.push(Q)):F?L.push(Q):T.push(Q)}var j=qa.nodes(e,{at:c,match:function(t){return co.isText(t)||qa.isInline(e,t)},mode:"highest",voids:i}),J=(0,S.c)(j,1)[0],P=(0,S.c)(J,2)[1],O=qa.isStart(e,c,P),U=qa.isEnd(e,c,P),W=qa.pathRef(e,C&&!T.length?Ma.next(p):p),z=qa.pathRef(e,U?Ma.next(P):P);Oo.splitNodes(e,{at:c,match:function(t){return N?Pa.isElement(t)&&qa.isBlock(e,t):co.isText(t)||qa.isInline(e,t)},mode:N?"lowest":"highest",always:N&&(!m||L.length>0)&&(!C||T.length>0),voids:i});var H,K=qa.pathRef(e,!O||O&&U?Ma.next(P):P);if(Oo.insertNodes(e,L,{at:K.current,match:function(t){return co.isText(t)||qa.isInline(e,t)},mode:"highest",voids:i}),y&&!L.length&&R.length&&!T.length&&Oo.delete(e,{at:p,voids:i}),Oo.insertNodes(e,R,{at:W.current,match:function(t){return Pa.isElement(t)&&qa.isBlock(e,t)},mode:"lowest",voids:i}),Oo.insertNodes(e,T,{at:z.current,match:function(t){return co.isText(t)||qa.isInline(e,t)},mode:"highest",voids:i}),!n.at)if(T.length>0&&z.current?H=Ma.previous(z.current):R.length>0&&W.current?H=Ma.previous(W.current):K.current&&(H=Ma.previous(K.current)),H){var V=qa.end(e,H);Oo.select(e,V)}K.unref(),W.unref(),z.unref()}}}))},ul=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).edge,n=void 0===t?"anchor":t,r=e.selection;if(r)if("anchor"===n)Oo.select(e,r.anchor);else if("focus"===n)Oo.select(e,r.focus);else if("start"===n){var a=ja.edges(r),o=(0,S.c)(a,1)[0];Oo.select(e,o)}else if("end"===n){var i=ja.edges(r),l=(0,S.c)(i,2)[1];Oo.select(e,l)}},sl=function(e){var t=e.selection;t&&e.apply({type:"set_selection",properties:t,newProperties:null})},dl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.selection,r=t.distance,a=void 0===r?1:r,o=t.unit,i=void 0===o?"character":o,l=ra()(t),c=void 0!==l&&l,u=t.edge,s=void 0===u?null:u;if(n){"start"===s&&(s=ja.isBackward(n)?"focus":"anchor"),"end"===s&&(s=ja.isBackward(n)?"anchor":"focus");var d=n.anchor,f=n.focus,g={distance:a,unit:i,ignoreNonSelectable:!0},h={};if(null==s||"anchor"===s){var v=c?qa.before(e,d,g):qa.after(e,d,g);v&&(h.anchor=v)}if(null==s||"focus"===s){var p=c?qa.before(e,f,g):qa.after(e,f,g);p&&(h.focus=p)}Oo.setSelection(e,h)}},fl=function(e,t){var n=e.selection;if(t=qa.range(e,t),n)Oo.setSelection(e,t);else{if(!ja.isRange(t))throw new Error("When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: ".concat(no.stringify(t)));e.apply({type:"set_selection",properties:n,newProperties:t})}};function gl(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function hl(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)O()(n=gl(Object(r),!0)).call(n,(function(t){La(e,t,r[t])}));else if(A())b()(e,A()(r));else{var a;O()(a=gl(Object(r))).call(a,(function(t){B()(e,t,w()(r,t))}))}}return e}var vl=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.selection,a=n.edge,o=void 0===a?"both":a;if(r){"start"===o&&(o=ja.isBackward(r)?"focus":"anchor"),"end"===o&&(o=ja.isBackward(r)?"anchor":"focus");var i=r.anchor,l=r.focus,c="anchor"===o?i:l;Oo.setSelection(e,(0,M.c)({},"anchor"===o?"anchor":"focus",hl(hl({},c),t)))}},pl=function(e,t){var n=e.selection,r={},a={};if(n){for(var o in t)("anchor"===o&&null!=t.anchor&&!eo.equals(t.anchor,n.anchor)||"focus"===o&&null!=t.focus&&!eo.equals(t.focus,n.focus)||"anchor"!==o&&"focus"!==o&&t[o]!==n[o])&&(r[o]=n[o],a[o]=t[o]);m()(r).length>0&&e.apply({type:"set_selection",properties:r,newProperties:a})}},ml=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};qa.withoutNormalizing(e,(function(){var r=n.hanging,a=void 0!==r&&r,o=n.voids,i=void 0!==o&&o,l=n.mode,c=void 0===l?"lowest":l,u=n.at,s=n.match,d=n.select;if(za.isNode(t)&&(t=[t]),0!==t.length){var f=t,g=(0,S.c)(f,1)[0];if(u||(u=uo(e),d=!0),null==d&&(d=!1),ja.isRange(u))if(a||(u=qa.unhangRange(e,u,{voids:i})),ja.isCollapsed(u))u=u.anchor;else{var h=ja.edges(u),v=(0,S.c)(h,2)[1],p=qa.pointRef(e,v);Oo.delete(e,{at:u}),u=p.unref()}if(eo.isPoint(u)){null==s&&(s=co.isText(g)?function(e){return co.isText(e)}:e.isInline(g)?function(t){return co.isText(t)||qa.isInline(e,t)}:function(t){return Pa.isElement(t)&&qa.isBlock(e,t)});var m=qa.nodes(e,{at:u.path,match:s,mode:c,voids:i}),C=(0,S.c)(m,1)[0];if(!C)return;var y=(0,S.c)(C,2)[1],D=qa.pathRef(e,y),E=qa.isEnd(e,u,y);Oo.splitNodes(e,{at:u,match:s,mode:c,voids:i});var w=D.unref();u=E?Ma.next(w):w}var k=Ma.parent(u),A=u[u.length-1];if(i||!qa.void(e,{at:k})){var x,b=Ca(t);try{for(b.s();!(x=b.n()).done;){var I=x.value,B=G()(k).call(k,A);A++,e.apply({type:"insert_node",path:B,node:I}),u=Ma.next(u)}}catch(e){b.e(e)}finally{b.f()}if(u=Ma.previous(u),d){var M=qa.end(e,u);M&&Oo.select(e,M)}}}}))},Cl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};qa.withoutNormalizing(e,(function(){var n=t.at,r=void 0===n?e.selection:n,a=t.mode,o=void 0===a?"lowest":a,i=t.voids,l=void 0!==i&&i,c=t.match;if(null==c&&(c=Ma.isPath(r)?so(e,r):function(t){return Pa.isElement(t)&&qa.isBlock(e,t)}),r){var u,s=qa.nodes(e,{at:r,match:c,mode:o,voids:l}),d=Ca(Fn()(s,(function(t){var n=(0,S.c)(t,2)[1];return qa.pathRef(e,n)})));try{for(d.s();!(u=d.n()).done;){var f=u.value.unref();if(f.length<2)throw new Error("Cannot lift node at a path [".concat(f,"] because it has a depth of less than `2`."));var g=qa.node(e,Ma.parent(f)),h=(0,S.c)(g,2),v=h[0],p=h[1],m=f[f.length-1],C=v.children.length;if(1===C){var y=Ma.next(p);Oo.moveNodes(e,{at:f,to:y,voids:l}),Oo.removeNodes(e,{at:p,voids:l})}else if(0===m)Oo.moveNodes(e,{at:f,to:p,voids:l});else if(m===C-1){var D=Ma.next(p);Oo.moveNodes(e,{at:f,to:D,voids:l})}else{var E=Ma.next(f),w=Ma.next(p);Oo.splitNodes(e,{at:E,voids:l}),Oo.moveNodes(e,{at:f,to:w,voids:l})}}}catch(e){d.e(e)}finally{d.f()}}}))},yl=["text"],Dl=["children"],El=function e(t,n){if(Pa.isElement(n)){var r=n;return!!qa.isVoid(t,n)||1===r.children.length&&e(t,r.children[0])}return!qa.isEditor(n)},wl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};qa.withoutNormalizing(e,(function(){var n,r,a=t.match,o=t.at,i=void 0===o?e.selection:o,l=t.hanging,c=void 0!==l&&l,u=t.voids,s=void 0!==u&&u,d=t.mode,f=void 0===d?"lowest":d;if(i){if(null==a)if(Ma.isPath(i)){var g=qa.parent(e,i),h=(0,S.c)(g,1)[0];a=function(e){var t;return xn()(t=h.children).call(t,e)}}else a=function(t){return Pa.isElement(t)&&qa.isBlock(e,t)};if(!c&&ja.isRange(i)&&(i=qa.unhangRange(e,i,{voids:s})),ja.isRange(i))if(ja.isCollapsed(i))i=i.anchor;else{var v=ja.edges(i),p=(0,S.c)(v,2)[1],m=qa.pointRef(e,p);Oo.delete(e,{at:i}),i=m.unref(),null==t.at&&Oo.select(e,i)}var C=qa.nodes(e,{at:i,match:a,voids:s,mode:f}),y=(0,S.c)(C,1)[0],D=qa.previous(e,{at:i,match:a,voids:s,mode:f});if(y&&D){var E=(0,S.c)(y,2),w=E[0],k=E[1],A=(0,S.c)(D,2),x=A[0],b=A[1];if(0!==k.length&&0!==b.length){var I,B,M=Ma.next(b),L=Ma.common(k,b),R=Ma.isSibling(k,b),T=kn()(n=kn()(r=Fn()(qa.levels(e,{at:k}),(function(e){return(0,S.c)(e,1)[0]}))).call(r,L.length)).call(n,0,-1),F=qa.above(e,{at:k,mode:"highest",match:function(t){return xn()(T).call(T,t)&&El(e,t)}}),N=F&&qa.pathRef(e,F[1]);if(co.isText(w)&&co.isText(x)){var Z=Ga(w,yl);B=x.text.length,I=Z}else{var Q,j;if(!Pa.isElement(w)||!Pa.isElement(x))throw new Error(G()(Q=G()(j="Cannot merge the node at path [".concat(k,"] with the previous sibling because it is not the same kind: ")).call(j,no.stringify(w)," ")).call(Q,no.stringify(x)));Z=Ga(w,Dl);B=x.children.length,I=Z}R||Oo.moveNodes(e,{at:k,to:M,voids:s}),N&&Oo.removeNodes(e,{at:N.current,voids:s}),Pa.isElement(x)&&qa.isEmpty(e,x)||co.isText(x)&&""===x.text&&0!==b[b.length-1]?Oo.removeNodes(e,{at:b,voids:s}):e.apply({type:"merge_node",path:M,position:B,properties:I}),N&&N.unref()}}}}))},kl=function(e,t){qa.withoutNormalizing(e,(function(){var n=t.to,r=t.at,a=void 0===r?e.selection:r,o=t.mode,i=void 0===o?"lowest":o,l=t.voids,c=void 0!==l&&l,u=t.match;if(a){null==u&&(u=Ma.isPath(a)?so(e,a):function(t){return Pa.isElement(t)&&qa.isBlock(e,t)});var s,d=qa.pathRef(e,n),f=qa.nodes(e,{at:a,match:u,mode:i,voids:c}),g=Ca(Fn()(f,(function(t){var n=(0,S.c)(t,2)[1];return qa.pathRef(e,n)})));try{for(g.s();!(s=g.n()).done;){var h=s.value.unref(),v=d.current;0!==h.length&&e.apply({type:"move_node",path:h,newPath:v}),d.current&&Ma.isSibling(v,h)&&Ma.isAfter(v,h)&&(d.current=Ma.next(d.current))}}catch(e){g.e(e)}finally{g.f()}d.unref()}}))},Al=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};qa.withoutNormalizing(e,(function(){var n=t.hanging,r=void 0!==n&&n,a=t.voids,o=void 0!==a&&a,i=t.mode,l=void 0===i?"lowest":i,c=t.at,u=void 0===c?e.selection:c,s=t.match;if(u){null==s&&(s=Ma.isPath(u)?so(e,u):function(t){return Pa.isElement(t)&&qa.isBlock(e,t)}),!r&&ja.isRange(u)&&(u=qa.unhangRange(e,u,{voids:o}));var d,f=qa.nodes(e,{at:u,match:s,mode:l,voids:o}),g=Ca(Fn()(f,(function(t){var n=(0,S.c)(t,2)[1];return qa.pathRef(e,n)})));try{for(g.s();!(d=g.n()).done;){var h=d.value.unref();if(h){var v=qa.node(e,h),p=(0,S.c)(v,1)[0];e.apply({type:"remove_node",path:h,node:p})}}}catch(e){g.e(e)}finally{g.f()}}}))},xl=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};qa.withoutNormalizing(e,(function(){var r=n.match,a=n.at,o=void 0===a?e.selection:a,i=n.compare,l=n.merge,c=n.hanging,u=void 0!==c&&c,s=n.mode,d=void 0===s?"lowest":s,f=n.split,g=void 0!==f&&f,h=n.voids,v=void 0!==h&&h;if(o){if(null==r&&(r=Ma.isPath(o)?so(e,o):function(t){return Pa.isElement(t)&&qa.isBlock(e,t)}),!u&&ja.isRange(o)&&(o=qa.unhangRange(e,o,{voids:v})),g&&ja.isRange(o)){if(ja.isCollapsed(o)&&qa.leaf(e,o.anchor)[0].text.length>0)return;var p=qa.rangeRef(e,o,{affinity:"inward"}),m=ja.edges(o),C=(0,S.c)(m,2),y=C[0],D=C[1],E="lowest"===d?"lowest":"highest",w=qa.isEnd(e,D,D.path);Oo.splitNodes(e,{at:D,match:r,mode:E,voids:v,always:!w});var k=qa.isStart(e,y,y.path);Oo.splitNodes(e,{at:y,match:r,mode:E,voids:v,always:!k}),o=p.unref(),null==n.at&&Oo.select(e,o)}i||(i=function(e,t){return e!==t});var A,x=Ca(qa.nodes(e,{at:o,match:r,mode:d,voids:v}));try{for(x.s();!(A=x.n()).done;){var b=(0,S.c)(A.value,2),I=b[0],B=b[1],M={},L={};if(0!==B.length){var R=!1;for(var T in t)"children"!==T&&"text"!==T&&i(t[T],I[T])&&(R=!0,I.hasOwnProperty(T)&&(M[T]=I[T]),l?null!=t[T]&&(L[T]=l(I[T],t[T])):null!=t[T]&&(L[T]=t[T]));R&&e.apply({type:"set_node",path:B,properties:M,newProperties:L})}}}catch(e){x.e(e)}finally{x.f()}}}))},bl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};qa.withoutNormalizing(e,(function(){var n=t.mode,r=void 0===n?"lowest":n,a=t.voids,o=void 0!==a&&a,i=t.match,l=t.at,c=void 0===l?e.selection:l,u=t.height,s=void 0===u?0:u,d=t.always,f=void 0!==d&&d;if(null==i&&(i=function(t){return Pa.isElement(t)&&qa.isBlock(e,t)}),ja.isRange(c)&&(c=function(e,t){if(ja.isCollapsed(t))return t.anchor;var n=ja.edges(t),r=(0,S.c)(n,2)[1],a=qa.pointRef(e,r);return Oo.delete(e,{at:t}),a.unref()}(e,c)),Ma.isPath(c)){var g=c,h=qa.point(e,g),v=qa.parent(e,g),p=(0,S.c)(v,1)[0];i=function(e){return e===p},s=h.path.length-g.length+1,c=h,f=!0}if(c){var m,C=qa.pointRef(e,c,{affinity:"backward"});try{var y,D=qa.nodes(e,{at:c,match:i,mode:r,voids:o}),E=(0,S.c)(D,1)[0];if(!E)return;var w=qa.void(e,{at:c,mode:"highest"});if(!o&&w){var k=(0,S.c)(w,2),A=k[0],x=k[1];if(Pa.isElement(A)&&e.isInline(A)){var b=qa.after(e,x);if(!b){var I=Ma.next(x);Oo.insertNodes(e,{text:""},{at:I,voids:o}),b=qa.point(e,I)}c=b,f=!0}s=c.path.length-x.length+1,f=!0}m=qa.pointRef(e,c);var B,M=c.path.length-s,L=(0,S.c)(E,2)[1],R=kn()(y=c.path).call(y,0,M),T=0===s?c.offset:c.path[M]+0,F=Ca(qa.levels(e,{at:R,reverse:!0,voids:o}));try{for(F.s();!(B=F.n()).done;){var N=(0,S.c)(B.value,2),G=N[0],Z=N[1],Q=!1;if(Z.length<L.length||0===Z.length||!o&&Pa.isElement(G)&&qa.isVoid(e,G))break;var j=C.current,J=qa.isEnd(e,j,Z);if(f||!C||!qa.isEdge(e,j,Z)){Q=!0;var P=za.extractProps(G);e.apply({type:"split_node",path:Z,position:T,properties:P})}T=Z[Z.length-1]+(Q||J?1:0)}}catch(e){F.e(e)}finally{F.f()}if(null==t.at){var O=m.current||qa.end(e,[]);Oo.select(e,O)}}finally{var U;C.unref(),null===(U=m)||void 0===U||U.unref()}}}))},Il=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Jn()(t)||(t=[t]);var r,a={},o=Ca(t);try{for(o.s();!(r=o.n()).done;){a[r.value]=null}}catch(e){o.e(e)}finally{o.f()}Oo.setNodes(e,a,n)},Bl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};qa.withoutNormalizing(e,(function(){var n,r=t.mode,a=void 0===r?"lowest":r,o=t.split,i=void 0!==o&&o,l=t.voids,c=void 0!==l&&l,u=t.at,s=void 0===u?e.selection:u,d=t.match;if(s){null==d&&(d=Ma.isPath(s)?so(e,s):function(t){return Pa.isElement(t)&&qa.isBlock(e,t)}),Ma.isPath(s)&&(s=qa.range(e,s));var f,g=ja.isRange(s)?qa.rangeRef(e,s):null,h=qa.nodes(e,{at:s,match:d,mode:a,voids:c}),v=function(t){var n=t.unref(),r=qa.node(e,n),a=(0,S.c)(r,1)[0],o=qa.range(e,n);i&&g&&(o=ja.intersection(g.current,o)),Oo.liftNodes(e,{at:o,match:function(e){var t;return Pa.isAncestor(a)&&xn()(t=a.children).call(t,e)},voids:c})},p=Ca(ra()(n=Fn()(h,(function(t){var n=(0,S.c)(t,2)[1];return qa.pathRef(e,n)}))).call(n));try{for(p.s();!(f=p.n()).done;){v(f.value)}}catch(e){p.e(e)}finally{p.f()}g&&g.unref()}}))};function Sl(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ml(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)O()(n=Sl(Object(r),!0)).call(n,(function(t){La(e,t,r[t])}));else if(A())b()(e,A()(r));else{var a;O()(a=Sl(Object(r))).call(a,(function(t){B()(e,t,w()(r,t))}))}}return e}var Ll=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};qa.withoutNormalizing(e,(function(){var r=n.mode,a=void 0===r?"lowest":r,o=n.split,i=void 0!==o&&o,l=n.voids,c=void 0!==l&&l,u=n.match,s=n.at,d=void 0===s?e.selection:s;if(d){if(null==u&&(u=Ma.isPath(d)?so(e,d):e.isInline(t)?function(t){return Pa.isElement(t)&&qa.isInline(e,t)||co.isText(t)}:function(t){return Pa.isElement(t)&&qa.isBlock(e,t)}),i&&ja.isRange(d)){var f=ja.edges(d),g=(0,S.c)(f,2),h=g[0],v=g[1],p=qa.rangeRef(e,d,{affinity:"inward"});Oo.splitNodes(e,{at:v,match:u,voids:c}),Oo.splitNodes(e,{at:h,match:u,voids:c}),d=p.unref(),null==n.at&&Oo.select(e,d)}var m,C=Fn()(qa.nodes(e,{at:d,match:e.isInline(t)?function(t){return Pa.isElement(t)&&qa.isBlock(e,t)}:function(e){return qa.isEditor(e)},mode:"lowest",voids:c})),y=Ca(C);try{for(y.s();!(m=y.n()).done;){var D=(0,S.c)(m.value,2)[1],E=ja.isRange(d)?ja.intersection(d,qa.range(e,D)):d;if(E){var w=Fn()(qa.nodes(e,{at:E,match:u,mode:a,voids:c}));if(w.length>0){var k=function(){var n=w,r=(0,S.c)(n,1)[0],a=w[w.length-1],o=(0,S.c)(r,2)[1],i=(0,S.c)(a,2)[1];if(0===o.length&&0===i.length)return"continue";var l=Ma.equals(o,i)?Ma.parent(o):Ma.common(o,i),u=qa.range(e,o,i),s=qa.node(e,l),d=(0,S.c)(s,1)[0],f=l.length+1,g=Ma.next(kn()(i).call(i,0,f)),h=Ml(Ml({},t),{},{children:[]});Oo.insertNodes(e,h,{at:g,voids:c}),Oo.moveNodes(e,{at:u,match:function(e){var t;return Pa.isAncestor(d)&&xn()(t=d.children).call(t,e)},to:G()(g).call(g,0),voids:c})}();if("continue"===k)continue}}}}catch(e){y.e(e)}finally{y.f()}}}))},Rl=function(){var e={children:[],operations:[],selection:null,marks:null,isElementReadOnly:function(){return!1},isInline:function(){return!1},isSelectable:function(){return!0},isVoid:function(){return!1},markableVoid:function(){return!1},onChange:function(){},apply:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Uo.apply(void 0,G()(t=[e]).call(t,r))},addMark:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Xo.apply(void 0,G()(t=[e]).call(t,r))},deleteBackward:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return ai.apply(void 0,G()(t=[e]).call(t,r))},deleteForward:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return oi.apply(void 0,G()(t=[e]).call(t,r))},deleteFragment:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return ii.apply(void 0,G()(t=[e]).call(t,r))},getFragment:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return zo.apply(void 0,G()(t=[e]).call(t,r))},insertBreak:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Ei.apply(void 0,G()(t=[e]).call(t,r))},insertSoftBreak:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return ki.apply(void 0,G()(t=[e]).call(t,r))},insertFragment:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return cl.apply(void 0,G()(t=[e]).call(t,r))},insertNode:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return wi.apply(void 0,G()(t=[e]).call(t,r))},insertText:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return xi.apply(void 0,G()(t=[e]).call(t,r))},normalizeNode:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Ho.apply(void 0,G()(t=[e]).call(t,r))},removeMark:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return tl.apply(void 0,G()(t=[e]).call(t,r))},getDirtyPaths:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Wo.apply(void 0,G()(t=[e]).call(t,r))},shouldNormalize:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Ko.apply(void 0,G()(t=[e]).call(t,r))},above:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Vo.apply(void 0,G()(t=[e]).call(t,r))},after:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return ei.apply(void 0,G()(t=[e]).call(t,r))},before:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return ri.apply(void 0,G()(t=[e]).call(t,r))},collapse:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return ul.apply(void 0,G()(t=[e]).call(t,r))},delete:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return ll.apply(void 0,G()(t=[e]).call(t,r))},deselect:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return sl.apply(void 0,G()(t=[e]).call(t,r))},edges:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return li.apply(void 0,G()(t=[e]).call(t,r))},elementReadOnly:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return si.apply(void 0,G()(t=[e]).call(t,r))},end:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return di.apply(void 0,G()(t=[e]).call(t,r))},first:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return fi.apply(void 0,G()(t=[e]).call(t,r))},fragment:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return gi.apply(void 0,G()(t=[e]).call(t,r))},getMarks:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Zi.apply(void 0,G()(t=[e]).call(t,r))},hasBlocks:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return mi.apply(void 0,G()(t=[e]).call(t,r))},hasInlines:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Ci.apply(void 0,G()(t=[e]).call(t,r))},hasPath:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return yi.apply(void 0,G()(t=[e]).call(t,r))},hasTexts:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Di.apply(void 0,G()(t=[e]).call(t,r))},insertNodes:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return ml.apply(void 0,G()(t=[e]).call(t,r))},isBlock:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return bi.apply(void 0,G()(t=[e]).call(t,r))},isEdge:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Ii.apply(void 0,G()(t=[e]).call(t,r))},isEmpty:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Bi.apply(void 0,G()(t=[e]).call(t,r))},isEnd:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Si.apply(void 0,G()(t=[e]).call(t,r))},isNormalizing:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Mi.apply(void 0,G()(t=[e]).call(t,r))},isStart:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Li.apply(void 0,G()(t=[e]).call(t,r))},last:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Ri.apply(void 0,G()(t=[e]).call(t,r))},leaf:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Ti.apply(void 0,G()(t=[e]).call(t,r))},levels:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Fi.apply(void 0,G()(t=[e]).call(t,r))},liftNodes:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Cl.apply(void 0,G()(t=[e]).call(t,r))},mergeNodes:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return wl.apply(void 0,G()(t=[e]).call(t,r))},move:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return dl.apply(void 0,G()(t=[e]).call(t,r))},moveNodes:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return kl.apply(void 0,G()(t=[e]).call(t,r))},next:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Qi.apply(void 0,G()(t=[e]).call(t,r))},node:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return ji.apply(void 0,G()(t=[e]).call(t,r))},nodes:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Ji.apply(void 0,G()(t=[e]).call(t,r))},normalize:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Pi.apply(void 0,G()(t=[e]).call(t,r))},parent:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Oi.apply(void 0,G()(t=[e]).call(t,r))},path:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return zi.apply(void 0,G()(t=[e]).call(t,r))},pathRef:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Ui.apply(void 0,G()(t=[e]).call(t,r))},pathRefs:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Wi.apply(void 0,G()(t=[e]).call(t,r))},point:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Vi.apply(void 0,G()(t=[e]).call(t,r))},pointRef:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Hi.apply(void 0,G()(t=[e]).call(t,r))},pointRefs:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Ki.apply(void 0,G()(t=[e]).call(t,r))},positions:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Yi.apply(void 0,G()(t=[e]).call(t,r))},previous:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return qi.apply(void 0,G()(t=[e]).call(t,r))},range:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return $i.apply(void 0,G()(t=[e]).call(t,r))},rangeRef:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Xi.apply(void 0,G()(t=[e]).call(t,r))},rangeRefs:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return _i.apply(void 0,G()(t=[e]).call(t,r))},removeNodes:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Al.apply(void 0,G()(t=[e]).call(t,r))},select:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return fl.apply(void 0,G()(t=[e]).call(t,r))},setNodes:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return xl.apply(void 0,G()(t=[e]).call(t,r))},setNormalizing:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return nl.apply(void 0,G()(t=[e]).call(t,r))},setPoint:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return vl.apply(void 0,G()(t=[e]).call(t,r))},setSelection:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return pl.apply(void 0,G()(t=[e]).call(t,r))},splitNodes:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return bl.apply(void 0,G()(t=[e]).call(t,r))},start:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return rl.apply(void 0,G()(t=[e]).call(t,r))},string:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return al.apply(void 0,G()(t=[e]).call(t,r))},unhangRange:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return ol.apply(void 0,G()(t=[e]).call(t,r))},unsetNodes:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Il.apply(void 0,G()(t=[e]).call(t,r))},unwrapNodes:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Bl.apply(void 0,G()(t=[e]).call(t,r))},void:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return pi.apply(void 0,G()(t=[e]).call(t,r))},withoutNormalizing:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return il.apply(void 0,G()(t=[e]).call(t,r))},wrapNodes:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Ll.apply(void 0,G()(t=[e]).call(t,r))}};return e};function Tl(e,t){var n=void 0!==Gn()&&Qn()(e)||e["@@iterator"];if(!n){if(Jn()(e)||(n=function(e,t){var n;if(!e)return;if("string"==typeof e)return Fl(e,t);var r=kn()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Fn()(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Fl(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw o}}}}function Fl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Nl=function(e){return ga()(e)&&Jn()(e.redos)&&Jn()(e.undos)&&(0===e.redos.length||Va.isOperationList(e.redos[0]))&&(0===e.undos.length||Va.isOperationList(e.undos[0]))},Gl=(new(ta()),new(ta())),Zl=new(ta()),Ql={isHistoryEditor:function(e){return Nl(e.history)&&qa.isEditor(e)},isMerging:function(e){return Zl.get(e)},isSaving:function(e){return Gl.get(e)},redo:function(e){e.redo()},undo:function(e){e.undo()},withoutMerging:function(e,t){var n=Ql.isMerging(e);Zl.set(e,!1),t(),Zl.set(e,n)},withoutSaving:function(e,t){var n=Ql.isSaving(e);Gl.set(e,!1),t(),Gl.set(e,n)}},jl=function(e){var t=e,n=t.apply;return t.history={undos:[],redos:[]},t.redo=function(){var e=t.history,n=e.redos;if(n.length>0){var r=n[n.length-1];Ql.withoutSaving(t,(function(){qa.withoutNormalizing(t,(function(){var e,n=Tl(r);try{for(n.s();!(e=n.n()).done;){var a=e.value;t.apply(a)}}catch(e){n.e(e)}finally{n.f()}}))})),e.redos.pop(),e.undos.push(r)}},t.undo=function(){var e=t.history,n=e.undos;if(n.length>0){var r=n[n.length-1];Ql.withoutSaving(t,(function(){qa.withoutNormalizing(t,(function(){var e,n,a=Tl(ra()(e=F()(r).call(r,Va.inverse)).call(e));try{for(a.s();!(n=a.n()).done;){var o=n.value;t.apply(o)}}catch(e){a.e(e)}finally{a.f()}}))})),e.redos.push(r),e.undos.pop()}},t.apply=function(e){var r=t.operations,a=t.history,o=a.undos,i=o[o.length-1],l=i&&i[i.length-1],c=Ol(e,l),u=Ql.isSaving(t),s=Ql.isMerging(t);if(null==u&&(u=Pl(e)),u){if(null==s&&(s=null!=i&&(0!==r.length||(Jl(e,l)||c))),i&&s)c&&i.pop(),i.push(e);else{var d=[e];o.push(d)}for(;o.length>100;)o.shift();Ul(e)&&(a.redos=[])}n(e)},t},Jl=function(e,t){return"set_selection"===e.type||(!(!t||"insert_text"!==e.type||"insert_text"!==t.type||e.offset!==t.offset+t.text.length||!Ma.equals(e.path,t.path))||!(!t||"remove_text"!==e.type||"remove_text"!==t.type||e.offset+e.text.length!==t.offset||!Ma.equals(e.path,t.path)))},Pl=function(e,t){return"set_selection"!==e.type||null!=e.properties&&null!=e.newProperties},Ol=function(e,t){return!(!t||"set_selection"!==e.type||"set_selection"!==t.type)},Ul=function(e){return"set_selection"!==e.type},Wl=n(11984),zl=n.n(Wl),Hl=n(54895),Kl=n(77284),Vl=n(43840),Yl=n(27688),ql=n(3460),Xl=n(97552),_l=n.n(Xl),$l=n(57548),ec=n.n($l),tc=n(49464),nc=n.n(tc),rc=n(20484),ac=n.n(rc),oc=n(52360),ic=n.n(oc),lc=n(6220),cc=n.n(lc),uc=n(94608),sc=n.n(uc),dc=n(5800),fc=n.n(dc),gc=n(76232),hc=n(96552),vc=n(90352);function pc(e,t,n){return t=(0,Kl.c)(t),(0,Hl.c)(e,mc()?zl()(t,n||[],(0,Kl.c)(e).constructor):t.apply(e,n))}function mc(){try{var e=!Boolean.prototype.valueOf.call(zl()(Boolean,[],(function(){})))}catch(e){}return(mc=function(){return!!e})()}function Cc(e,t){var n=void 0!==Gn()&&Qn()(e)||e["@@iterator"];if(!n){if(Jn()(e)||(n=function(e,t){var n;if(!e)return;if("string"==typeof e)return yc(e,t);var r=kn()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Fn()(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yc(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw o}}}}function yc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Dc(e,t,n){return t in e?B()(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ec(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=m()(e);for(r=0;r<o.length;r++)n=o[r],En()(t).call(t,n)>=0||(a[n]=e[n]);return a}(e,t);if(D()){var o=D()(e);for(r=0;r<o.length;r++)n=o[r],En()(t).call(t,n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var wc=(0,H.createContext)(null),kc=function(){var e=(0,H.useContext)(wc);if(!e)throw new Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return e},Ac=_l()(K().version.split(".")[0],10),xc="undefined"!=typeof navigator&&"undefined"!=typeof window&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,bc="undefined"!=typeof navigator&&/Mac OS X/.test(navigator.userAgent),Ic="undefined"!=typeof navigator&&/Android/.test(navigator.userAgent),Bc="undefined"!=typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),Sc="undefined"!=typeof navigator&&/AppleWebKit(?!.*Chrome)/i.test(navigator.userAgent),Mc="undefined"!=typeof navigator&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent),Lc="undefined"!=typeof navigator&&/Chrome/i.test(navigator.userAgent),Rc="undefined"!=typeof navigator&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent),Tc=Ic&&"undefined"!=typeof navigator&&/Chrome?\/(?:[0-5]?\d)(?:\.)/i.test(navigator.userAgent),Fc="undefined"!=typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent),Nc="undefined"!=typeof navigator&&/.*UCBrowser/.test(navigator.userAgent),Gc="undefined"!=typeof navigator&&/.*Wechat/.test(navigator.userAgent)&&!/.*MacWechat/.test(navigator.userAgent),Zc=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),Qc=(!Rc||!Tc)&&!Mc&&void 0!==ec()&&ec().InputEvent&&"function"==typeof ec().InputEvent.prototype.getTargetRanges,jc=new(ta()),Jc=new(ta()),Pc=new(ta()),Oc=new(ta()),Uc=new(ta()),Wc=new(ta()),zc=new(ta()),Hc=new(ta()),Kc=new(ta()),Vc=new(ta()),Yc=new(ta()),qc=new(ta()),Xc=new(ta()),_c=new(ta()),$c=new(ta()),eu=new(ta()),tu=new(ta()),nu=new(ta()),ru=new(ta()),au=new(ta()),ou=new(ta()),iu=Gn()("placeholder"),lu=Gn()("mark-placeholder"),cu=ec().Text,uu=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||null},su=function(e){return du(e)&&1===e.nodeType},du=function(e){var t=uu(e);return!!t&&e instanceof t.Node},fu=function(e){var t=e&&e.anchorNode&&uu(e.anchorNode);return!!t&&e instanceof t.Selection},gu=function(e){return du(e)&&3===e.nodeType},hu=function(e,t,n){for(var r,a=e.childNodes,o=a[t],i=t,l=!1,c=!1;(du(r=o)&&8===r.nodeType||su(o)&&0===o.childNodes.length||su(o)&&"false"===o.getAttribute("contenteditable"))&&(!l||!c);)i>=a.length?(l=!0,i=t-1,n="backward"):i<0?(c=!0,i=t+1,n="forward"):(o=a[i],t=i,i+="forward"===n?1:-1);return[o,t]},vu=function(e,t,n){var r=hu(e,t,n);return(0,S.c)(r,1)[0]},pu=function e(t){var n="";if(gu(t)&&t.nodeValue)return t.nodeValue;if(su(t)){for(var r=0,a=Fn()(t.childNodes);r<a.length;r++){n+=e(a[r])}var o=getComputedStyle(t).getPropertyValue("display");"block"!==o&&"list"!==o&&"BR"!==t.tagName||(n+="\n")}return n},mu=/data-slate-fragment="(.+?)"/m,Cu=function e(t,n,r){var a=n.target;if(su(a)&&a.matches('[contentEditable="false"]'))return!1;if(Eu.getWindow(t).document.contains(a))return Eu.hasDOMNode(t,a,{editable:!0});var o=Hn()(r).call(r,(function(e){var t,n=e.addedNodes,r=e.removedNodes,o=Cc(n);try{for(o.s();!(t=o.n()).done;){var i=t.value;if(i===a||i.contains(a))return!0}}catch(e){o.e(e)}finally{o.f()}var l,c=Cc(r);try{for(c.s();!(l=c.n()).done;){var u=l.value;if(u===a||u.contains(a))return!0}}catch(e){c.e(e)}finally{c.f()}}));return!(!o||o===n)&&e(t,o,r)},yu=0,Du=(0,Yl.c)((function e(){(0,ql.c)(this,e),this.id="".concat(yu++)})),Eu={androidPendingDiffs:function(e){return nu.get(e)},androidScheduleFlush:function(e){var t;null===(t=$c.get(e))||void 0===t||t()},blur:function(e){var t=Eu.toDOMNode(e,e),n=Eu.findDocumentOrShadowRoot(e);Yc.set(e,!1),n.activeElement===t&&t.blur()},deselect:function(e){var t=e.selection,n=Eu.findDocumentOrShadowRoot(e).getSelection();n&&n.rangeCount>0&&n.removeAllRanges(),t&&hc.cx.deselect(e)},findDocumentOrShadowRoot:function(e){var t=Eu.toDOMNode(e,e),n=t.getRootNode();return(n instanceof Document||n instanceof ShadowRoot)&&null!=n.getSelection?n:t.ownerDocument},findEventRange:function(e,t){"nativeEvent"in t&&(t=t.nativeEvent);var n=t,r=n.clientX,a=n.clientY,o=n.target;if(null==r||null==a)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(t));var i,l=Eu.toSlateNode(e,t.target),c=Eu.findPath(e,l);if(hc.gr.isElement(l)&&hc.GW.isVoid(e,l)){var u=o.getBoundingClientRect(),s=e.isInline(l)?r-u.left<u.left+u.width-r:a-u.top<u.top+u.height-a,d=hc.GW.point(e,c,{edge:s?"start":"end"}),f=s?hc.GW.before(e,d):hc.GW.after(e,d);if(f)return hc.GW.range(e,f)}var g=Eu.getWindow(e).document;if(g.caretRangeFromPoint)i=g.caretRangeFromPoint(r,a);else{var h=g.caretPositionFromPoint(r,a);h&&((i=g.createRange()).setStart(h.offsetNode,h.offset),i.setEnd(h.offsetNode,h.offset))}if(!i)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(t));return Eu.toSlateRange(e,i,{exactMatch:!1,suppressThrow:!1})},findKey:function(e,t){var n=Hc.get(t);return n||(n=new Du,Hc.set(t,n)),n},findPath:function(e,t){for(var n=[],r=t;;){var a=Jc.get(r);if(null==a){if(hc.GW.isEditor(r))return n;break}var o=jc.get(r);if(null==o)break;n.unshift(o),r=a}throw new Error("Unable to find the path for Slate node: ".concat(hc.Scrubber.stringify(t)))},focus:function(e){var t=Eu.toDOMNode(e,e),n=Eu.findDocumentOrShadowRoot(e);Yc.set(e,!0),n.activeElement!==t&&t.focus({preventScroll:!0})},getWindow:function(e){var t=Pc.get(e);if(!t)throw new Error("Unable to find a host window element for this editor");return t},hasDOMNode:function(e,t){var n,r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).editable,a=void 0!==r&&r,o=Eu.toDOMNode(e,e);try{n=su(t)?t:t.parentElement}catch(e){var i;if(!xn()(i=e.message).call(i,'Permission denied to access property "nodeType"'))throw e}return!!n&&!(n.closest("[data-slate-editor]")!==o||a&&!n.isContentEditable&&("boolean"!=typeof n.isContentEditable||n.closest('[contenteditable="false"]')!==o)&&!n.getAttribute("data-slate-zero-width"))},hasEditableTarget:function(e,t){return du(t)&&Eu.hasDOMNode(e,t,{editable:!0})},hasRange:function(e,t){var n=t.anchor,r=t.focus;return hc.GW.hasPath(e,n.path)&&hc.GW.hasPath(e,r.path)},hasSelectableTarget:function(e,t){return Eu.hasEditableTarget(e,t)||Eu.isTargetInsideNonReadonlyVoid(e,t)},hasTarget:function(e,t){return du(t)&&Eu.hasDOMNode(e,t)},insertData:function(e,t){e.insertData(t)},insertFragmentData:function(e,t){return e.insertFragmentData(t)},insertTextData:function(e,t){return e.insertTextData(t)},isComposing:function(e){return!!qc.get(e)},isFocused:function(e){return!!Yc.get(e)},isReadOnly:function(e){return!!Vc.get(e)},isTargetInsideNonReadonlyVoid:function(e,t){if(Vc.get(e))return!1;var n=Eu.hasTarget(e,t)&&Eu.toSlateNode(e,t);return hc.gr.isElement(n)&&hc.GW.isVoid(e,n)},setFragmentData:function(e,t,n){return e.setFragmentData(t,n)},toDOMNode:function(e,t){var n=Kc.get(e),r=hc.GW.isEditor(t)?Oc.get(e):null==n?void 0:n.get(Eu.findKey(e,t));if(!r)throw new Error("Cannot resolve a DOM node from Slate node: ".concat(hc.Scrubber.stringify(t)));return r},toDOMPoint:function(e,t){var n,r=hc.GW.node(e,t.path),a=(0,S.c)(r,1)[0],o=Eu.toDOMNode(e,a);hc.GW.void(e,{at:t})&&(t={path:t.path,offset:0});for(var i=Fn()(o.querySelectorAll("[data-slate-string], [data-slate-zero-width]")),l=0,c=0;c<i.length;c++){var u=i[c],s=u.childNodes[0];if(null!=s&&null!=s.textContent){var d=s.textContent.length,f=u.getAttribute("data-slate-length"),g=l+(null==f?d:_l()(f,10)),h=i[c+1];if(t.offset===g&&null!=h&&h.hasAttribute("data-slate-mark-placeholder")){var v,p=h.childNodes[0];n=[p instanceof cu?p:h,null!==(v=h.textContent)&&void 0!==v&&nc()(v).call(v,"\ufeff")?1:0];break}if(t.offset<=g){n=[s,Math.min(d,Math.max(0,t.offset-l))];break}l=g}}if(!n)throw new Error("Cannot resolve a DOM point from Slate point: ".concat(hc.Scrubber.stringify(t)));return n},toDOMRange:function(e,t){var n=t.anchor,r=t.focus,a=hc.EH.isBackward(t),o=Eu.toDOMPoint(e,n),i=hc.EH.isCollapsed(t)?o:Eu.toDOMPoint(e,r),l=Eu.getWindow(e).document.createRange(),c=a?i:o,u=(0,S.c)(c,2),s=u[0],d=u[1],f=a?o:i,g=(0,S.c)(f,2),h=g[0],v=g[1],p=!!(su(s)?s:s.parentElement).getAttribute("data-slate-zero-width"),m=!!(su(h)?h:h.parentElement).getAttribute("data-slate-zero-width");return l.setStart(s,p?1:d),l.setEnd(h,m?1:v),l},toSlateNode:function(e,t){var n=su(t)?t:t.parentElement;n&&!n.hasAttribute("data-slate-node")&&(n=n.closest("[data-slate-node]"));var r=n?Wc.get(n):null;if(!r)throw new Error("Cannot resolve a Slate node from DOM node: ".concat(n));return r},toSlatePoint:function(e,t,n){var r=n.exactMatch,a=n.suppressThrow,o=r?t:function(e){var t=(0,S.c)(e,2),n=t[0],r=t[1];if(su(n)&&n.childNodes.length){var a=r===n.childNodes.length,o=a?r-1:r,i=hu(n,o,a?"backward":"forward"),l=(0,S.c)(i,2);for(n=l[0],a=(o=l[1])<r;su(n)&&n.childNodes.length;){var c=a?n.childNodes.length-1:0;n=vu(n,c,a?"backward":"forward")}r=a&&null!=n.textContent?n.textContent.length:0}return[n,r]}(t),i=(0,S.c)(o,2),l=i[0],c=i[1],u=l.parentNode,s=null,d=0;if(u){var f,g,h=Eu.toDOMNode(e,e),v=u.closest('[data-slate-void="true"]'),p=v&&h.contains(v)?v:null,m=u.closest("[data-slate-leaf]"),C=null;if(m){if(s=m.closest('[data-slate-node="text"]')){var y,D=Eu.getWindow(e).document.createRange();D.setStart(s,0),D.setEnd(l,c);var E=D.cloneContents(),w=G()(y=[]).call(y,(0,yn.c)(kn()(Array.prototype).call(E.querySelectorAll("[data-slate-zero-width]"))),(0,yn.c)(kn()(Array.prototype).call(E.querySelectorAll("[contenteditable=false]"))));O()(w).call(w,(function(e){var t,n;Ic&&!r&&e.hasAttribute("data-slate-zero-width")&&e.textContent.length>0&&"\ufeff"!==e.textContext?nc()(t=e.textContent).call(t,"\ufeff")&&(e.textContent=kn()(n=e.textContent).call(n,1)):e.parentNode.removeChild(e)})),d=E.textContent.length,C=s}}else if(p){for(var k,A=p.querySelectorAll("[data-slate-leaf]"),x=0;x<A.length;x++){var b=A[x];if(Eu.hasDOMNode(e,b)){m=b;break}}if(m)s=m.closest('[data-slate-node="text"]'),d=(C=m).textContent.length,O()(k=C.querySelectorAll("[data-slate-zero-width]")).call(k,(function(e){d-=e.textContent.length}));else d=1}C&&d===C.textContent.length&&Ic&&"z"===C.getAttribute("data-slate-zero-width")&&null!==(f=C.textContent)&&void 0!==f&&nc()(f).call(f,"\ufeff")&&(u.hasAttribute("data-slate-zero-width")||Bc&&null!==(g=C.textContent)&&void 0!==g&&Sn()(g).call(g,"\n\n"))&&d--}if(Ic&&!s&&!r){var I=u.hasAttribute("data-slate-node")?u:u.closest("[data-slate-node]");if(I&&Eu.hasDOMNode(e,I,{editable:!0})){var B=Eu.toSlateNode(e,I),M=hc.GW.start(e,Eu.findPath(e,B)),L=M.path,R=M.offset;return I.querySelector("[data-slate-leaf]")||(R=c),{path:L,offset:R}}}if(!s){if(a)return null;throw new Error("Cannot resolve a Slate point from DOM point: ".concat(t))}var T=Eu.toSlateNode(e,s);return{path:Eu.findPath(e,T),offset:d}},toSlateRange:function(e,t,n){var r,a,o,i,l,c,u=n.exactMatch,s=n.suppressThrow;if(fu(t)?t.anchorNode:t.startContainer)if(fu(t)){if(Bc&&t.rangeCount>1){o=t.focusNode;var d=t.getRangeAt(0),f=t.getRangeAt(t.rangeCount-1);if(o instanceof HTMLTableRowElement&&d.startContainer instanceof HTMLTableRowElement&&f.startContainer instanceof HTMLTableRowElement){var g=function e(t){return t.childElementCount>0?e(t.children[0]):t},h=d.startContainer,v=f.startContainer,p=g(h.children[d.startOffset]),m=g(v.children[f.startOffset]);i=0,r=m.childNodes.length>0?m.childNodes[0]:m,o=p.childNodes.length>0?p.childNodes[0]:p,a=m instanceof HTMLElement?m.innerHTML.length:0}else d.startContainer===o?(r=f.endContainer,a=f.endOffset,i=d.startOffset):(r=d.startContainer,a=d.endOffset,i=f.startOffset)}else r=t.anchorNode,a=t.anchorOffset,o=t.focusNode,i=t.focusOffset;l=Lc&&function(e){for(var t=e&&e.parentNode;t;){if("[object ShadowRoot]"===t.toString())return!0;t=t.parentNode}return!1}(r)||Bc?t.anchorNode===t.focusNode&&t.anchorOffset===t.focusOffset:t.isCollapsed}else r=t.startContainer,a=t.startOffset,o=t.endContainer,i=t.endOffset,l=t.collapsed;if(null==r||null==o||null==a||null==i)throw new Error("Cannot resolve a Slate range from DOM range: ".concat(t));"getAttribute"in o&&"false"===o.getAttribute("contenteditable")&&"true"!==o.getAttribute("data-slate-void")&&(o=r,i=(null===(c=r.textContent)||void 0===c?void 0:c.length)||0);var C=Eu.toSlatePoint(e,[r,a],{exactMatch:u,suppressThrow:s});if(!C)return null;var y=l?C:Eu.toSlatePoint(e,[o,i],{exactMatch:u,suppressThrow:s});if(!y)return null;var D={anchor:C,focus:y};return hc.EH.isExpanded(D)&&hc.EH.isForward(D)&&su(o)&&hc.GW.void(e,{at:D.focus,mode:"highest"})&&(D=hc.GW.unhangRange(e,D,{voids:!0})),D}};function wu(e,t){var n,r=t.path,a=t.diff;if(!hc.GW.hasPath(e,r))return!1;var o,i=hc.a8.get(e,r);if(!hc.a.isText(i))return!1;if(a.start!==i.text.length||0===a.text.length)return kn()(o=i.text).call(o,a.start,a.start+a.text.length)===a.text;var l=hc.YH.next(r);if(!hc.GW.hasPath(e,l))return!1;var c=hc.a8.get(e,l);return hc.a.isText(c)&&nc()(n=c.text).call(n,a.text)}function ku(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Q()(n).call(n,(function(e,t){return kn()(e).call(e,0,t.start)+t.text+kn()(e).call(e,t.end)}),e)}function Au(e,t){var n=t.start,r=t.end,a=t.text,o=kn()(e).call(e,n,r),i=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++)if(e.charAt(r)!==t.charAt(r))return r;return n}(o,a),l=function(e,t,n){for(var r=Math.min(e.length,t.length,n),a=0;a<r;a++)if(e.charAt(e.length-a-1)!==t.charAt(t.length-a-1))return a;return r}(o,a,Math.min(o.length-i,a.length-i)),c={start:n+i,end:r-l,text:kn()(a).call(a,i,a.length-l)};return c.start===c.end&&0===c.text.length?null:c}function xu(e){var t=e.path,n=e.diff;return{anchor:{path:t,offset:n.start},focus:{path:t,offset:n.end}}}function bu(e,t){var n=t.path,r=t.offset;if(!hc.GW.hasPath(e,n))return null;var a=hc.a8.get(e,n);if(!hc.a.isText(a))return null;var o=hc.GW.above(e,{match:function(t){return hc.gr.isElement(t)&&hc.GW.isBlock(e,t)},at:n});if(!o)return null;for(;r>a.text.length;){var i=hc.GW.next(e,{at:n,match:hc.a.isText});if(!i||!hc.YH.isDescendant(i[1],o[1]))return null;r-=a.text.length,a=i[0],n=i[1]}return{path:n,offset:r}}function Iu(e,t){var n=bu(e,t.anchor);if(!n)return null;if(hc.EH.isCollapsed(t))return{anchor:n,focus:n};var r=bu(e,t.focus);return r?{anchor:n,focus:r}:null}function Bu(e,t,n){var r=nu.get(e),a=null==r?void 0:Hn()(r).call(r,(function(e){var n=e.path;return hc.YH.equals(n,t.path)}));if(!a||t.offset<=a.diff.start)return hc.wb.transform(t,n,{affinity:"backward"});var o=a.diff;if(t.offset<=o.start+o.text.length){var i={path:t.path,offset:o.start},l=hc.wb.transform(i,n,{affinity:"backward"});return l?{path:l.path,offset:l.offset+t.offset-o.start}:null}var c={path:t.path,offset:t.offset-o.text.length+o.end-o.start},u=hc.wb.transform(c,n,{affinity:"backward"});return u?"split_node"===n.type&&hc.YH.equals(n.path,t.path)&&c.offset<n.position&&o.start<n.position?u:{path:u.path,offset:u.offset+o.text.length-o.end+o.start}:null}function Su(e,t,n){var r=Bu(e,t.anchor,n);if(!r)return null;if(hc.EH.isCollapsed(t))return{anchor:r,focus:r};var a=Bu(e,t.focus,n);return a?{anchor:r,focus:a}:null}function Mu(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lu(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)O()(n=Mu(Object(r),!0)).call(n,(function(t){Dc(e,t,r[t])}));else if(A())b()(e,A()(r));else{var a;O()(a=Mu(Object(r))).call(a,(function(t){B()(e,t,w()(r,t))}))}}return e}function Ru(e){var t=e.editor,n=e.scheduleOnDOMSelectionChange,r=e.onDOMSelectionChange,a=!1,o=null,i=null,l=null,c=0,u=!1,s=function(){var e=au.get(t);if(au.delete(t),e){var n=t.selection,r=Iu(t,e);!r||n&&hc.EH.equals(r,n)||hc.cx.select(t,r)}},d=function(){if(i&&(clearTimeout(i),i=null),l&&(clearTimeout(l),l=null),p()||v()){a||(a=!0,le()((function(){return a=!1}))),v()&&(a="action");var e=t.selection&&hc.GW.rangeRef(t,t.selection,{affinity:"forward"});tu.set(t,t.marks),ru.get(t),nu.get(t);for(var o,c=p();o=null===(d=nu.get(t))||void 0===d?void 0:d[0];){var d,f,g=eu.get(t);void 0!==g&&(eu.delete(t),t.marks=g),g&&!1===u&&(u=null);var h=xu(o);t.selection&&hc.EH.equals(t.selection,h)||hc.cx.select(t,h),o.diff.text?hc.GW.insertText(t,o.diff.text):hc.GW.deleteFragment(t),nu.set(t,null===(f=nu.get(t))||void 0===f?void 0:R()(f).call(f,(function(e){return e.id!==o.id}))),wu(t,o)||(c=!1,ru.delete(t),tu.delete(t),a="action",au.delete(t),n.cancel(),r.cancel(),null==e||e.unref())}var m=null==e?void 0:e.unref();if(!m||au.get(t)||t.selection&&hc.EH.equals(m,t.selection)||hc.cx.select(t,m),v())!function(){var e=ru.get(t);if(ru.delete(t),e){if(e.at){var n=hc.wb.isPoint(e.at)?bu(t,e.at):Iu(t,e.at);if(!n)return;var r=hc.GW.range(t,n);t.selection&&hc.EH.equals(t.selection,r)||hc.cx.select(t,n)}e.run()}}();else{c&&n(),n.flush(),r.flush(),s();var C=tu.get(t);tu.delete(t),void 0!==C&&(t.marks=C,t.onChange())}}else s()},f=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=Uc.get(t);n&&(p()||e?n.style.display="none":n.style.removeProperty("display"))},g=function(e,n){var r,a=null!==(r=nu.get(t))&&void 0!==r?r:[];nu.set(t,a);var o=hc.a8.leaf(t,e),i=de()(a).call(a,(function(t){return hc.YH.equals(t.path,e)}));if(i<0)return Au(o.text,n)&&a.push({path:e,diff:n,id:c++}),void f();var l=function(e,t,n){var r=Math.min(t.start,n.start),a=Math.max(0,Math.min(t.start+t.text.length,n.end)-n.start),o=ku(e,t,n),i=Math.max(n.start+n.text.length,t.start+t.text.length+(t.start+t.text.length>n.start?n.text.length:0)-a),l=kn()(o).call(o,r,i);return Au(e,{start:r,end:Math.max(t.end,n.end-t.text.length+(t.end-t.start)),text:l})}(o.text,a[i].diff,n);if(!l)return la()(a).call(a,i,1),void f();a[i]=Lu(Lu({},a[i]),{},{diff:l})},h=function(e){var a=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).at;u=!1,au.delete(t),n.cancel(),r.cancel(),v()&&d(),ru.set(t,{at:a,run:e}),l=le()(d)},v=function(){return!!ru.get(t)},p=function(){var e;return!(null===(e=nu.get(t))||void 0===e||!e.length)},m=function(e){var n,r;au.set(t,e),i&&(clearTimeout(i),i=null);var a=t.selection;if(e){var o=!a||!hc.YH.equals(a.anchor.path,e.anchor.path),l=!a||!hc.YH.equals(kn()(n=a.anchor.path).call(n,0,-1),kn()(r=e.anchor.path).call(r,0,-1));(o&&u||l)&&(u=!1),(o||p())&&(i=le()(d,200))}},C=function(){v()||(l=le()(d))};return{flush:d,scheduleFlush:C,hasPendingDiffs:p,hasPendingAction:v,hasPendingChanges:function(){return v()||p()},isFlushing:function(){return a},handleUserSelect:m,handleCompositionEnd:function(e){o&&clearTimeout(o),o=le()((function(){qc.set(t,!1),d()}),25)},handleCompositionStart:function(e){qc.set(t,!0),o&&(clearTimeout(o),o=null)},handleDOMBeforeInput:function(e){var n;i&&(clearTimeout(i),i=null);var r=e.inputType,a=null,o=e.dataTransfer||e.data||void 0;!1!==u&&"insertText"!==r&&"insertCompositionText"!==r&&(u=!1);var l=e.getTargetRanges(),c=(0,S.c)(l,1)[0];c&&(a=Eu.toSlateRange(t,c,{exactMatch:!1,suppressThrow:!0}));var s=Eu.getWindow(t).getSelection();if(!a&&s&&(c=s,a=Eu.toSlateRange(t,s,{exactMatch:!1,suppressThrow:!0})),a=null!==(n=a)&&void 0!==n?n:t.selection){var d,f=!0;if(nc()(r).call(r,"delete")){var v;if(hc.EH.isExpanded(a)){var p=hc.EH.edges(a),y=(0,S.c)(p,2),D=y[0],E=y[1];if(hc.a8.leaf(t,D.path).text.length===D.offset&&0===E.offset){var w=hc.GW.next(t,{at:D.path,match:hc.a.isText});w&&hc.YH.equals(w[1],E.path)&&(a={anchor:E,focus:E})}}var k=Sn()(r).call(r,"Backward")?"backward":"forward",A=hc.EH.edges(a),x=(0,S.c)(A,2),b=x[0],I=x[1],B=hc.GW.leaf(t,b.path),M=(0,S.c)(B,2),L=M[0],R=M[1],T={text:"",start:b.offset,end:I.offset},F=nu.get(t),N=null==F?void 0:Hn()(F).call(F,(function(e){return hc.YH.equals(e.path,R)})),Z=N?[N.diff,T]:[T];if(0===ku.apply(void 0,G()(v=[L.text]).call(v,Z)).length&&(f=!1),hc.EH.isExpanded(a)){if(f&&hc.YH.equals(a.anchor.path,a.focus.path)){var Q={path:a.anchor.path,offset:b.offset},j=hc.GW.range(t,Q,Q);return m(j),g(a.anchor.path,{text:"",end:I.offset,start:b.offset})}return h((function(){return hc.GW.deleteFragment(t,{direction:k})}),{at:a})}}switch(r){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":return h((function(){return hc.GW.deleteFragment(t)}),{at:a});case"deleteContent":case"deleteContentForward":var J=a.anchor;if(f&&hc.EH.isCollapsed(a)){var P=hc.a8.leaf(t,J.path);if(J.offset<P.text.length)return g(J.path,{text:"",start:J.offset,end:J.offset+1})}return h((function(){return hc.GW.deleteForward(t)}),{at:a});case"deleteContentBackward":var U,W=a.anchor,z=fu(c)?c.isCollapsed:!(null===(U=c)||void 0===U||!U.collapsed);return f&&z&&hc.EH.isCollapsed(a)&&W.offset>0?g(W.path,{text:"",start:W.offset-1,end:W.offset}):h((function(){return hc.GW.deleteBackward(t)}),{at:a});case"deleteEntireSoftLine":return h((function(){hc.GW.deleteBackward(t,{unit:"line"}),hc.GW.deleteForward(t,{unit:"line"})}),{at:a});case"deleteHardLineBackward":return h((function(){return hc.GW.deleteBackward(t,{unit:"block"})}),{at:a});case"deleteSoftLineBackward":return h((function(){return hc.GW.deleteBackward(t,{unit:"line"})}),{at:a});case"deleteHardLineForward":return h((function(){return hc.GW.deleteForward(t,{unit:"block"})}),{at:a});case"deleteSoftLineForward":return h((function(){return hc.GW.deleteForward(t,{unit:"line"})}),{at:a});case"deleteWordBackward":return h((function(){return hc.GW.deleteBackward(t,{unit:"word"})}),{at:a});case"deleteWordForward":return h((function(){return hc.GW.deleteForward(t,{unit:"word"})}),{at:a});case"insertLineBreak":return h((function(){return hc.GW.insertSoftBreak(t)}),{at:a});case"insertParagraph":return h((function(){return hc.GW.insertBreak(t)}),{at:a});case"insertCompositionText":case"deleteCompositionText":case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":if("DataTransfer"===(null==(d=o)?void 0:d.constructor.name))return h((function(){return Eu.insertData(t,o)}),{at:a});var H=null!=o?o:"";if(eu.get(t)&&(H=H.replace("\ufeff","")),"insertText"===r&&/.*\n.*\n$/.test(H)&&(H=kn()(H).call(H,0,-1)),xn()(H).call(H,"\n"))return h((function(){var e=H.split("\n");O()(e).call(e,(function(n,r){n&&hc.GW.insertText(t,n),r!==e.length-1&&hc.GW.insertSoftBreak(t)}))}),{at:a});if(hc.YH.equals(a.anchor.path,a.focus.path)){var K=hc.EH.edges(a),V=(0,S.c)(K,2),Y=V[0],q=V[1],X={start:Y.offset,end:q.offset,text:H};if(H&&u&&"insertCompositionText"===r){var _=u.start+u.text.search(/\S|$/);X.start+X.text.search(/\S|$/)===_+1&&X.end===u.start+u.text.length?(X.start-=1,u=null,C()):u=!1}else u="insertText"===r&&(null===u?X:!(!u||!hc.EH.isCollapsed(a)||u.end+u.text.length!==Y.offset)&&Lu(Lu({},u),{},{text:u.text+H}));if(f)return void g(Y.path,X)}return h((function(){return hc.GW.insertText(t,H)}),{at:a})}}},handleKeyDown:function(e){p()||(f(!0),le()(f))},handleDomMutations:function(e){var n;p()||v()||Vn()(e).call(e,(function(n){return Cu(t,n,e)}))&&(null===(n=ou.get(t))||void 0===n||n())},handleInput:function(){!v()&&p()||d()}}}var Tu=Zc?H.useLayoutEffect:H.useEffect;var Fu=["node"];function Nu(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}var Gu={subtree:!0,childList:!0,characterData:!0},Zu=Ic?function(e){var t=e.node,n=Ec(e,Fu);if(!Ic)return null;var r,a=kc(),o=(r=(0,H.useRef)(!1),(0,H.useEffect)((function(){return r.current=!0,function(){r.current=!1}}),[]),r.current),i=(0,H.useState)((function(){return Ru(function(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)O()(n=Nu(Object(r),!0)).call(n,(function(t){Dc(e,t,r[t])}));else if(A())b()(e,A()(r));else{var a;O()(a=Nu(Object(r))).call(a,(function(t){B()(e,t,w()(r,t))}))}}return e}({editor:a},n))})),l=(0,S.c)(i,1)[0];return function(e,t,n){var r=(0,H.useState)((function(){return new MutationObserver(t)})),a=(0,S.c)(r,1)[0];Tu((function(){a.takeRecords()})),(0,H.useEffect)((function(){if(!e.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");return a.observe(e.current,n),function(){return a.disconnect()}}),[a,e,n])}(t,l.handleDomMutations,Gu),$c.set(a,l.scheduleFlush),o&&l.flush(),l}:function(){return null},Qu=["anchor","focus"],ju=["anchor","focus"],Ju=function(e,t){var n,r,a,o=Ec(e,Qu),i=Ec(t,ju);return e[iu]===t[iu]&&(n=o,r=i,m()(n).length===m()(r).length&&oa()(a=m()(n)).call(a,(function(e){return r.hasOwnProperty(e)&&n[e]===r[e]})))},Pu=function(e){var t,n=e.isLast,r=e.leaf,a=e.parent,o=e.text,i=kc(),l=Eu.findPath(i,o),c=hc.YH.parent(l),u=!0===r[lu];return i.isVoid(a)?K().createElement(Wu,{length:hc.a8.string(a).length}):""!==r.text||a.children[a.children.length-1]!==o||i.isInline(a)||""!==hc.GW.string(i,c)?""===r.text?K().createElement(Wu,{isMarkPlaceholder:u}):n&&"\n"===kn()(t=r.text).call(t,-1)?K().createElement(Ou,{isTrailing:!0,text:r.text}):K().createElement(Ou,{text:r.text}):K().createElement(Wu,{isLineBreak:!0,isMarkPlaceholder:u})},Ou=function(e){var t=e.text,n=e.isTrailing,r=void 0!==n&&n,a=(0,H.useRef)(null),o=function(){var e;return G()(e="".concat(null!=t?t:"")).call(e,r?"\n":"")},i=(0,H.useState)(o),l=(0,S.c)(i,1)[0];return Tu((function(){var e=o();a.current&&a.current.textContent!==e&&(a.current.textContent=e)})),K().createElement(Uu,{ref:a},l)},Uu=(0,H.memo)((0,H.forwardRef)((function(e,t){return K().createElement("span",{"data-slate-string":!0,ref:t},e.children)}))),Wu=function(e){var t=e.length,n=void 0===t?0:t,r=e.isLineBreak,a=void 0!==r&&r,o=e.isMarkPlaceholder,i={"data-slate-zero-width":a?"n":"z","data-slate-length":n};return void 0!==o&&o&&(i["data-slate-mark-placeholder"]=!0),K().createElement("span",(0,oe.c)({},i),Ic&&a?null:"\ufeff",a?K().createElement("br",null):null)};function zu(e){e.current&&(clearTimeout(e.current),e.current=null)}var Hu=function(e){var t=e.leaf,n=e.isLast,r=e.text,a=e.parent,o=e.renderPlaceholder,i=e.renderLeaf,l=void 0===i?function(e){return K().createElement(Vu,(0,oe.c)({},e))}:i,c=kc(),u=(0,H.useRef)(null),s=(0,H.useRef)(null),d=(0,H.useState)(!1),f=(0,S.c)(d,2),g=f[0],h=f[1],v=(0,H.useRef)(null),p=(0,H.useCallback)((function(e){if(function(e,t){e.current&&(e.current.disconnect(),t&&(e.current=null))}(u,null==e),null==e){var n;Uc.delete(c),null===(n=t.onPlaceholderResize)||void 0===n||n.call(t,null)}else{if(Uc.set(c,e),!u.current){var r=window.ResizeObserver||ResizeObserver;u.current=new r((function(){var n;null===(n=t.onPlaceholderResize)||void 0===n||n.call(t,e)}))}u.current.observe(e),s.current=e}}),[s,t,c]),m=K().createElement(Pu,{isLast:n,leaf:t,parent:a,text:r}),C=t[iu];if((0,H.useEffect)((function(){return C?v.current||(v.current=le()((function(){h(!0),v.current=null}),300)):(zu(v),h(!1)),function(){return zu(v)}}),[C,h]),C&&g){var y={children:t.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",top:0,pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none",WebkitUserModify:Sc?"inherit":void 0},contentEditable:!1,ref:p}};m=K().createElement(K().Fragment,null,o(y),m)}return l({attributes:{"data-slate-leaf":!0},children:m,leaf:t,text:r})},Ku=K().memo(Hu,(function(e,t){return t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&hc.a.equals(t.leaf,e.leaf)&&t.leaf[iu]===e.leaf[iu]})),Vu=function(e){var t=e.attributes,n=e.children;return K().createElement("span",(0,oe.c)({},t),n)},Yu=function(e){for(var t=e.decorations,n=e.isLast,r=e.parent,a=e.renderPlaceholder,o=e.renderLeaf,i=e.text,l=kc(),c=(0,H.useRef)(null),u=hc.a.decorations(i,t),s=Eu.findKey(l,i),d=[],f=0;f<u.length;f++){var g,h=u[f];d.push(K().createElement(Ku,{isLast:n&&f===u.length-1,key:G()(g="".concat(s.id,"-")).call(g,f),renderPlaceholder:a,leaf:h,text:i,parent:r,renderLeaf:o}))}var v=(0,H.useCallback)((function(e){var t=Kc.get(l);e?(null==t||t.set(s,e),zc.set(i,e),Wc.set(e,i)):(null==t||t.delete(s),zc.delete(i),c.current&&Wc.delete(c.current)),c.current=e}),[c,l,s,i]);return K().createElement("span",{"data-slate-node":"text",ref:v},d)},qu=K().memo(Yu,(function(e,t){return t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++){var r=e[n],a=t[n];if(r.anchor.offset!==a.anchor.offset||r.focus.offset!==a.focus.offset||!Ju(r,a))return!1}return!0}(t.decorations,e.decorations)})),Xu=function(e){var t=e.decorations,n=e.element,r=e.renderElement,a=void 0===r?function(e){return K().createElement($u,(0,oe.c)({},e))}:r,o=e.renderPlaceholder,i=e.renderLeaf,l=e.selection,c=kc(),u=os(),s=c.isInline(n),d=Eu.findKey(c,n),f=(0,H.useCallback)((function(e){var t=Kc.get(c);e?(null==t||t.set(d,e),zc.set(n,e),Wc.set(e,n)):(null==t||t.delete(d),zc.delete(n))}),[c,d,n]),g=rs({decorations:t,node:n,renderElement:a,renderPlaceholder:o,renderLeaf:i,selection:l}),h={"data-slate-node":"element",ref:f};if(s&&(h["data-slate-inline"]=!0),!s&&hc.GW.hasInlines(c,n)){var v=hc.a8.string(n),p=cc()(v);"rtl"===p&&(h.dir=p)}if(hc.GW.isVoid(c,n)){h["data-slate-void"]=!0,!u&&s&&(h.contentEditable=!1);var m=s?"span":"div",C=hc.a8.texts(n),y=(0,S.c)(C,1),D=(0,S.c)(y[0],1)[0];g=K().createElement(m,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},K().createElement(qu,{renderPlaceholder:o,decorations:[],isLast:!1,parent:n,text:D})),jc.set(D,0),Jc.set(D,n)}return a({attributes:h,children:g,element:n})},_u=K().memo(Xu,(function(e,t){return e.element===t.element&&e.renderElement===t.renderElement&&e.renderLeaf===t.renderLeaf&&e.renderPlaceholder===t.renderPlaceholder&&function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++){var r=e[n],a=t[n];if(!hc.EH.equals(r,a)||!Ju(r,a))return!1}return!0}(e.decorations,t.decorations)&&(e.selection===t.selection||!!e.selection&&!!t.selection&&hc.EH.equals(e.selection,t.selection))})),$u=function(e){var t=e.attributes,n=e.children,r=e.element,a=kc().isInline(r)?"span":"div";return K().createElement(a,(0,oe.c)({},t,{style:{position:"relative"}}),n)},es=(0,H.createContext)((function(){return[]})),ts=(0,H.createContext)(!1),ns=function(){return(0,H.useContext)(ts)},rs=function(e){for(var t=e.decorations,n=e.node,r=e.renderElement,a=e.renderPlaceholder,o=e.renderLeaf,i=e.selection,l=(0,H.useContext)(es),c=kc(),u=Eu.findPath(c,n),s=[],d=hc.gr.isElement(n)&&!c.isInline(n)&&hc.GW.hasInlines(c,n),f=0;f<n.children.length;f++){var g,h=G()(u).call(u,f),v=n.children[f],p=Eu.findKey(c,v),m=hc.GW.range(c,h),C=i&&hc.EH.intersection(m,i),y=l([v,h]),D=Cc(t);try{for(D.s();!(g=D.n()).done;){var E=g.value,w=hc.EH.intersection(E,m);w&&y.push(w)}}catch(e){D.e(e)}finally{D.f()}hc.gr.isElement(v)?s.push(K().createElement(ts.Provider,{key:"provider-".concat(p.id),value:!!C},K().createElement(_u,{decorations:y,element:v,key:p.id,renderElement:r,renderPlaceholder:a,renderLeaf:o,selection:C}))):s.push(K().createElement(qu,{decorations:y,key:p.id,isLast:d&&f===n.children.length-1,parent:n,renderPlaceholder:a,renderLeaf:o,text:v})),jc.set(v,f),Jc.set(v,n)}return s},as=(0,H.createContext)(!1),os=function(){return(0,H.useContext)(as)},is=(0,H.createContext)(null);var ls={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",insertSoftBreak:"shift+enter",splitBlock:"enter",undo:"mod+z"},cs={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},us={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},ss=function(e){var t=ls[e],n=cs[e],r=us[e],a=t&&(0,vc.g5)(t),o=n&&(0,vc.g5)(n),i=r&&(0,vc.g5)(r);return function(e){return!(!a||!a(e))||(!!(bc&&o&&o(e))||!(bc||!i||!i(e)))}},ds={isBold:ss("bold"),isCompose:ss("compose"),isMoveBackward:ss("moveBackward"),isMoveForward:ss("moveForward"),isDeleteBackward:ss("deleteBackward"),isDeleteForward:ss("deleteForward"),isDeleteLineBackward:ss("deleteLineBackward"),isDeleteLineForward:ss("deleteLineForward"),isDeleteWordBackward:ss("deleteWordBackward"),isDeleteWordForward:ss("deleteWordForward"),isExtendBackward:ss("extendBackward"),isExtendForward:ss("extendForward"),isExtendLineBackward:ss("extendLineBackward"),isExtendLineForward:ss("extendLineForward"),isItalic:ss("italic"),isMoveLineBackward:ss("moveLineBackward"),isMoveLineForward:ss("moveLineForward"),isMoveWordBackward:ss("moveWordBackward"),isMoveWordForward:ss("moveWordForward"),isRedo:ss("redo"),isSoftBreak:ss("insertSoftBreak"),isSplitBlock:ss("splitBlock"),isTransposeCharacter:ss("transposeCharacter"),isUndo:ss("undo")},fs={subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0},gs=function(e){function t(){var e;return(0,ql.c)(this,t),(e=pc(this,t,arguments)).context=null,e.manager=null,e.mutationObserver=null,e}return(0,Vl.c)(t,e),(0,Yl.c)(t,[{key:"observe",value:function(){var e,t=this.props.node;if(!t.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");null===(e=this.mutationObserver)||void 0===e||e.observe(t.current,fs)}},{key:"componentDidMount",value:function(){var e=this.props.receivedUserInput,t=this.context;this.manager=function(e,t){var n=[],r=function(){n=[]};return{registerMutations:function(r){var a;if(t.current){var o=R()(r).call(r,(function(t){return Cu(e,t,r)}));(a=n).push.apply(a,(0,yn.c)(o))}},restoreDOM:function(){var e;n.length>0&&(O()(e=ra()(n).call(n)).call(e,(function(e){var t,n;"characterData"!==e.type&&(O()(t=e.removedNodes).call(t,(function(t){e.target.insertBefore(t,e.nextSibling)})),O()(n=e.addedNodes).call(n,(function(t){e.target.removeChild(t)})))})),r())},clear:r}}(t,e),this.mutationObserver=new MutationObserver(this.manager.registerMutations),this.observe()}},{key:"getSnapshotBeforeUpdate",value:function(){var e,t,n,r,a=null===(e=this.mutationObserver)||void 0===e?void 0:e.takeRecords();null!=a&&a.length&&(null===(r=this.manager)||void 0===r||r.registerMutations(a));return null===(t=this.mutationObserver)||void 0===t||t.disconnect(),null===(n=this.manager)||void 0===n||n.restoreDOM(),null}},{key:"componentDidUpdate",value:function(){var e;null===(e=this.manager)||void 0===e||e.clear(),this.observe()}},{key:"componentWillUnmount",value:function(){var e;null===(e=this.mutationObserver)||void 0===e||e.disconnect()}},{key:"render",value:function(){return this.props.children}}]),t}(H.Component);gs.contextType=wc;var hs=Ic?gs:function(e){var t=e.children;return K().createElement(K().Fragment,null,t)},vs=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","renderPlaceholder","scrollSelectionIntoView","style","as","disableDefaultStyles"],ps=["text"];function ms(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cs(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)O()(n=ms(Object(r),!0)).call(n,(function(t){Dc(e,t,r[t])}));else if(A())b()(e,A()(r));else{var a;O()(a=ms(Object(r))).call(a,(function(t){B()(e,t,w()(r,t))}))}}return e}var ys=function(e){return K().createElement(K().Fragment,null,rs(e))},Ds=function(e){var t=(0,H.useCallback)((function(e){return K().createElement(Es,(0,oe.c)({},e))}),[]),n=e.autoFocus,r=e.decorate,a=void 0===r?ws:r,o=e.onDOMBeforeInput,i=e.placeholder,l=e.readOnly,c=void 0!==l&&l,u=e.renderElement,s=e.renderLeaf,d=e.renderPlaceholder,f=void 0===d?t:d,g=e.scrollSelectionIntoView,h=void 0===g?ks:g,v=e.style,p=void 0===v?{}:v,C=e.as,y=void 0===C?"div":C,D=e.disableDefaultStyles,E=void 0!==D&&D,w=Ec(e,vs),k=function(){var e=(0,H.useContext)(is);if(!e)throw new Error("The `useSlate` hook must be used inside the <Slate> component's context.");return e.editor}(),A=(0,H.useState)(!1),x=(0,S.c)(A,2),b=x[0],I=x[1],B=(0,H.useRef)(null),L=(0,H.useRef)([]),R=(0,H.useState)(),T=(0,S.c)(R,2),N=T[0],G=T[1],Z=function(){var e=kc(),t=(0,H.useRef)(!1),n=(0,H.useRef)(0),r=(0,H.useCallback)((function(){if(!t.current){t.current=!0;var r=Eu.getWindow(e);r.cancelAnimationFrame(n.current),n.current=r.requestAnimationFrame((function(){t.current=!1}))}}),[e]);return(0,H.useEffect)((function(){return function(){return cancelAnimationFrame(n.current)}}),[]),{receivedUserInput:t,onUserInput:r}}(),Q=Z.onUserInput,j=Z.receivedUserInput,J=(0,H.useReducer)((function(e){return e+1}),0),P=(0,S.c)(J,2)[1];ou.set(k,P),Vc.set(k,c);var O=(0,H.useMemo)((function(){return{isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null,hasMarkPlaceholder:!1}}),[]);(0,H.useEffect)((function(){B.current&&n&&B.current.focus()}),[n]);var U=(0,H.useRef)(),W=(0,H.useMemo)((function(){return fc()((function(){var e=U.current;if((Ic||!Eu.isComposing(k))&&(!O.isUpdatingSelection||null!=e&&e.isFlushing())&&!O.isDraggingInternally){var t=Eu.findDocumentOrShadowRoot(k),n=t.activeElement,r=Eu.toDOMNode(k,k),a=t.getSelection();if(n===r?(O.latestElement=n,Yc.set(k,!0)):Yc.delete(k),!a)return hc.cx.deselect(k);var o=a.anchorNode,i=a.focusNode,l=Eu.hasEditableTarget(k,o)||Eu.isTargetInsideNonReadonlyVoid(k,o),u=Eu.hasEditableTarget(k,i)||Eu.isTargetInsideNonReadonlyVoid(k,i);if(l&&u){var s=Eu.toSlateRange(k,a,{exactMatch:!1,suppressThrow:!0});s&&(Eu.isComposing(k)||null!=e&&e.hasPendingChanges()||null!=e&&e.isFlushing()?null==e||e.handleUserSelect(s):hc.cx.select(k,s))}!c||l&&u||hc.cx.deselect(k)}}),100)}),[k,c,O]),z=(0,H.useMemo)((function(){return sc()(W,0)}),[W]);U.current=Zu({node:B,onDOMSelectionChange:W,scheduleOnDOMSelectionChange:z}),Tu((function(){var e,t,n;B.current&&(n=uu(B.current))?(Pc.set(k,n),Oc.set(k,B.current),zc.set(k,B.current),Wc.set(B.current,k)):zc.delete(k);var r=k.selection,a=Eu.findDocumentOrShadowRoot(k).getSelection();if(a&&Eu.isFocused(k)&&(null===(e=U.current)||void 0===e||!e.hasPendingAction())){var o=function(e){var t="None"!==a.type;if(r||t){var n,o=a.focusNode;if(Bc&&a.rangeCount>1){var i=a.getRangeAt(0),l=a.getRangeAt(a.rangeCount-1);n=i.startContainer===o?l.endContainer:i.startContainer}else n=a.anchorNode;var c=Oc.get(k),u=!1;if(c.contains(n)&&c.contains(o)&&(u=!0),t&&u&&r&&!e){var s=Eu.toSlateRange(k,a,{exactMatch:!0,suppressThrow:!0});if(s&&hc.EH.equals(s,r)){var d,f;if(!O.hasMarkPlaceholder)return;if(null!==(d=n)&&void 0!==d&&null!==(f=d.parentElement)&&void 0!==f&&f.hasAttribute("data-slate-mark-placeholder"))return}}if(!r||Eu.hasRange(k,r)){O.isUpdatingSelection=!0;var g=r&&Eu.toDOMRange(k,r);return g?(Eu.isComposing(k)&&!Ic?a.collapseToEnd():hc.EH.isBackward(r)?a.setBaseAndExtent(g.endContainer,g.endOffset,g.startContainer,g.startOffset):a.setBaseAndExtent(g.startContainer,g.startOffset,g.endContainer,g.endOffset),h(k,g)):a.removeAllRanges(),g}k.selection=Eu.toSlateRange(k,a,{exactMatch:!1,suppressThrow:!0})}};a.rangeCount<=1&&o();var i="action"===(null===(t=U.current)||void 0===t?void 0:t.isFlushing());if(Ic&&i){var l=null,c=requestAnimationFrame((function(){if(i){var e=function(e){try{Eu.toDOMNode(k,k).focus(),o(e)}catch(e){}};e(),l=le()((function(){e(!0),O.isUpdatingSelection=!1}))}}));return function(){cancelAnimationFrame(c),l&&clearTimeout(l)}}le()((function(){O.isUpdatingSelection=!1}))}}));var V=(0,H.useCallback)((function(e){if(Q(),!c&&Eu.hasEditableTarget(k,e.target)&&!bs(e,o)){var t;if(U.current)return U.current.handleDOMBeforeInput(e);z.flush(),W.flush();var n=k.selection,r=e.inputType,a=e.dataTransfer||e.data||void 0,i="insertCompositionText"===r||"deleteCompositionText"===r;if(i&&Eu.isComposing(k))return;var l=!1;if("insertText"===r&&n&&hc.EH.isCollapsed(n)&&e.data&&1===e.data.length&&/[a-z ]/i.test(e.data)&&0!==n.anchor.offset){var u,s;l=!0,k.marks&&(l=!1);var d=n.anchor,f=Eu.toDOMPoint(k,d),g=(0,S.c)(f,2),h=g[0],v=g[1],p=null===(u=h.parentElement)||void 0===u?void 0:u.closest("a"),m=Eu.getWindow(k);if(l&&p&&Eu.hasDOMNode(k,p)){var C,y=null==m?void 0:m.document.createTreeWalker(p,NodeFilter.SHOW_TEXT).lastChild();y===h&&(null===(C=y.textContent)||void 0===C?void 0:C.length)===v&&(l=!1)}if(l&&h.parentElement&&"pre"===(null==m||null===(s=m.getComputedStyle(h.parentElement))||void 0===s?void 0:s.whiteSpace)){var D,E=hc.GW.above(k,{at:d.path,match:function(e){return hc.gr.isElement(e)&&hc.GW.isBlock(k,e)}});E&&xn()(D=hc.a8.string(E[0])).call(D,"\t")&&(l=!1)}}if(!nc()(r).call(r,"delete")||nc()(r).call(r,"deleteBy")){var w=e.getTargetRanges(),A=(0,S.c)(w,1)[0];if(A){var x=Eu.toSlateRange(k,A,{exactMatch:!1,suppressThrow:!1});if(!n||!hc.EH.equals(n,x)){l=!1;var b=!i&&k.selection&&hc.GW.rangeRef(k,k.selection);hc.cx.select(k,x),b&&Xc.set(k,b)}}}if(i)return;if(l||e.preventDefault(),n&&hc.EH.isExpanded(n)&&nc()(r).call(r,"delete")){var B=Sn()(r).call(r,"Backward")?"backward":"forward";return void hc.GW.deleteFragment(k,{direction:B})}switch(r){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":hc.GW.deleteFragment(k);break;case"deleteContent":case"deleteContentForward":hc.GW.deleteForward(k);break;case"deleteContentBackward":hc.GW.deleteBackward(k);break;case"deleteEntireSoftLine":hc.GW.deleteBackward(k,{unit:"line"}),hc.GW.deleteForward(k,{unit:"line"});break;case"deleteHardLineBackward":hc.GW.deleteBackward(k,{unit:"block"});break;case"deleteSoftLineBackward":hc.GW.deleteBackward(k,{unit:"line"});break;case"deleteHardLineForward":hc.GW.deleteForward(k,{unit:"block"});break;case"deleteSoftLineForward":hc.GW.deleteForward(k,{unit:"line"});break;case"deleteWordBackward":hc.GW.deleteBackward(k,{unit:"word"});break;case"deleteWordForward":hc.GW.deleteForward(k,{unit:"word"});break;case"insertLineBreak":hc.GW.insertSoftBreak(k);break;case"insertParagraph":hc.GW.insertBreak(k);break;case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":"insertFromComposition"===r&&Eu.isComposing(k)&&(I(!1),qc.set(k,!1)),"DataTransfer"===(null==a?void 0:a.constructor.name)?Eu.insertData(k,a):"string"==typeof a&&(l?L.current.push((function(){return hc.GW.insertText(k,a)})):hc.GW.insertText(k,a))}var M=null===(t=Xc.get(k))||void 0===t?void 0:t.unref();Xc.delete(k),!M||k.selection&&hc.EH.equals(k.selection,M)||hc.cx.select(k,M)}}),[k,W,Q,o,c,z]),Y=(0,H.useCallback)((function(e){null==e?(W.cancel(),z.cancel(),Oc.delete(k),zc.delete(k),B.current&&Qc&&B.current.removeEventListener("beforeinput",V)):Qc&&e.addEventListener("beforeinput",V),B.current=e}),[W,z,k,V]);Tu((function(){var e=Eu.getWindow(k);return e.document.addEventListener("selectionchange",z),function(){e.document.removeEventListener("selectionchange",z)}}),[z]);var q=a([k,[]]),X=i&&1===k.children.length&&1===Fn()(hc.a8.texts(k)).length&&""===hc.a8.string(k)&&!b,_=(0,H.useCallback)((function(e){var t;e&&X?G(null===(t=e.getBoundingClientRect())||void 0===t?void 0:t.height):G(void 0)}),[X]);if(X){var $=hc.GW.start(k,[]);q.push((0,M.c)((0,M.c)((0,M.c)((0,M.c)((0,M.c)({},iu,!0),"placeholder",i),"onPlaceholderResize",_),"anchor",$),"focus",$))}var ee=k.marks;if(O.hasMarkPlaceholder=!1,k.selection&&hc.EH.isCollapsed(k.selection)&&ee){var te=k.selection.anchor,ne=hc.a8.leaf(k,te.path),re=Ec(ne,ps);if(!hc.a.equals(ne,ee,{loose:!0})){var ae;O.hasMarkPlaceholder=!0;var ie=ac()(F()(ae=m()(re)).call(ae,(function(e){return[e,null]})));q.push(Cs(Cs(Cs((0,M.c)({},lu,!0),ie),ee),{},{anchor:te,focus:te}))}}return(0,H.useEffect)((function(){le()((function(){var e=k.selection;if(e){var t=e.anchor,n=hc.a8.leaf(k,t.path);if(ee&&!hc.a.equals(n,ee,{loose:!0}))return void eu.set(k,ee)}eu.delete(k)}))})),K().createElement(as.Provider,{value:c},K().createElement(es.Provider,{value:a},K().createElement(hs,{node:B,receivedUserInput:j},K().createElement(y,(0,oe.c)({role:c?void 0:"textbox","aria-multiline":!c||void 0},w,{spellCheck:!(!Qc&&Zc)&&w.spellCheck,autoCorrect:Qc||!Zc?w.autoCorrect:"false",autoCapitalize:Qc||!Zc?w.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:!c,zindex:-1,suppressContentEditableWarning:!0,ref:Y,style:Cs(Cs({},E?{}:Cs({position:"relative",whiteSpace:"pre-wrap",wordWrap:"break-word"},N?{minHeight:N}:{})),p),onBeforeInput:(0,H.useCallback)((function(e){if(!Qc&&!c&&!As(e,w.onBeforeInput)&&Eu.hasSelectableTarget(k,e.target)&&(e.preventDefault(),!Eu.isComposing(k))){var t=e.data;hc.GW.insertText(k,t)}}),[w.onBeforeInput,k,c]),onInput:(0,H.useCallback)((function(e){if(!As(e,w.onInput))if(U.current)U.current.handleInput();else{var t,n=Cc(L.current);try{for(n.s();!(t=n.n()).done;){(0,t.value)()}}catch(e){n.e(e)}finally{n.f()}L.current=[]}}),[w.onInput]),onBlur:(0,H.useCallback)((function(e){if(!c&&!O.isUpdatingSelection&&Eu.hasSelectableTarget(k,e.target)&&!As(e,w.onBlur)){var t=Eu.findDocumentOrShadowRoot(k);if(O.latestElement!==t.activeElement){var n=e.relatedTarget;if(!(n===Eu.toDOMNode(k,k)||su(n)&&n.hasAttribute("data-slate-spacer"))){if(null!=n&&du(n)&&Eu.hasDOMNode(k,n)){var r=Eu.toSlateNode(k,n);if(hc.gr.isElement(r)&&!k.isVoid(r))return}if(Sc){var a=t.getSelection();null==a||a.removeAllRanges()}Yc.delete(k)}}}}),[c,O.isUpdatingSelection,O.latestElement,k,w.onBlur]),onClick:(0,H.useCallback)((function(e){if(Eu.hasTarget(k,e.target)&&!As(e,w.onClick)&&du(e.target)){var t=Eu.toSlateNode(k,e.target),n=Eu.findPath(k,t);if(!hc.GW.hasPath(k,n)||hc.a8.get(k,n)!==t)return;if(3===e.detail&&n.length>=1){var r=n;if(!hc.gr.isElement(t)||!hc.GW.isBlock(k,t)){var a,o=hc.GW.above(k,{match:function(e){return hc.gr.isElement(e)&&hc.GW.isBlock(k,e)},at:n});r=null!==(a=null==o?void 0:o[1])&&void 0!==a?a:kn()(n).call(n,0,1)}var i=hc.GW.range(k,r);return void hc.cx.select(k,i)}if(c)return;var l=hc.GW.start(k,n),u=hc.GW.end(k,n),s=hc.GW.void(k,{at:l}),d=hc.GW.void(k,{at:u});if(s&&d&&hc.YH.equals(s[1],d[1])){var f=hc.GW.range(k,l);hc.cx.select(k,f)}}}),[k,w.onClick,c]),onCompositionEnd:(0,H.useCallback)((function(e){if(Eu.hasSelectableTarget(k,e.target)){var t;if(Eu.isComposing(k)&&(I(!1),qc.set(k,!1)),null===(t=U.current)||void 0===t||t.handleCompositionEnd(e),As(e,w.onCompositionEnd)||Ic)return;if(!Sc&&!Fc&&!xc&&!Gc&&!Nc&&e.data){var n=eu.get(k);eu.delete(k),void 0!==n&&(tu.set(k,k.marks),k.marks=n),hc.GW.insertText(k,e.data);var r=tu.get(k);tu.delete(k),void 0!==r&&(k.marks=r)}}}),[w.onCompositionEnd,k]),onCompositionUpdate:(0,H.useCallback)((function(e){Eu.hasSelectableTarget(k,e.target)&&!As(e,w.onCompositionUpdate)&&(Eu.isComposing(k)||(I(!0),qc.set(k,!0)))}),[w.onCompositionUpdate,k]),onCompositionStart:(0,H.useCallback)((function(e){if(Eu.hasSelectableTarget(k,e.target)){var t;if(null===(t=U.current)||void 0===t||t.handleCompositionStart(e),As(e,w.onCompositionStart)||Ic)return;I(!0);var n=k.selection;if(n){if(hc.EH.isExpanded(n))return void hc.GW.deleteFragment(k);var r=hc.GW.above(k,{match:function(e){return hc.gr.isElement(e)&&hc.GW.isInline(k,e)},mode:"highest"});if(r){var a=(0,S.c)(r,2)[1];if(hc.GW.isEnd(k,n.anchor,a)){var o=hc.GW.after(k,a);hc.cx.setSelection(k,{anchor:o,focus:o})}}}}}),[w.onCompositionStart,k]),onCopy:(0,H.useCallback)((function(e){!Eu.hasSelectableTarget(k,e.target)||As(e,w.onCopy)||xs(e)||(e.preventDefault(),Eu.setFragmentData(k,e.clipboardData,"copy"))}),[w.onCopy,k]),onCut:(0,H.useCallback)((function(e){if(!c&&Eu.hasSelectableTarget(k,e.target)&&!As(e,w.onCut)&&!xs(e)){e.preventDefault(),Eu.setFragmentData(k,e.clipboardData,"cut");var t=k.selection;if(t)if(hc.EH.isExpanded(t))hc.GW.deleteFragment(k);else{var n=hc.a8.parent(k,t.anchor.path);hc.GW.isVoid(k,n)&&hc.cx.delete(k)}}}),[c,k,w.onCut]),onDragOver:(0,H.useCallback)((function(e){if(Eu.hasTarget(k,e.target)&&!As(e,w.onDragOver)){var t=Eu.toSlateNode(k,e.target);hc.gr.isElement(t)&&hc.GW.isVoid(k,t)&&e.preventDefault()}}),[w.onDragOver,k]),onDragStart:(0,H.useCallback)((function(e){if(!c&&Eu.hasTarget(k,e.target)&&!As(e,w.onDragStart)){var t=Eu.toSlateNode(k,e.target),n=Eu.findPath(k,t);if(hc.gr.isElement(t)&&hc.GW.isVoid(k,t)||hc.GW.void(k,{at:n,voids:!0})){var r=hc.GW.range(k,n);hc.cx.select(k,r)}O.isDraggingInternally=!0,Eu.setFragmentData(k,e.dataTransfer,"drag")}}),[c,k,w.onDragStart,O]),onDrop:(0,H.useCallback)((function(e){if(!c&&Eu.hasTarget(k,e.target)&&!As(e,w.onDrop)){e.preventDefault();var t=k.selection,n=Eu.findEventRange(k,e),r=e.dataTransfer;hc.cx.select(k,n),O.isDraggingInternally&&(!t||hc.EH.equals(t,n)||hc.GW.void(k,{at:n,voids:!0})||hc.cx.delete(k,{at:t})),Eu.insertData(k,r),Eu.isFocused(k)||Eu.focus(k)}O.isDraggingInternally=!1}),[c,k,w.onDrop,O]),onDragEnd:(0,H.useCallback)((function(e){!c&&O.isDraggingInternally&&w.onDragEnd&&Eu.hasTarget(k,e.target)&&w.onDragEnd(e),O.isDraggingInternally=!1}),[c,O,w,k]),onFocus:(0,H.useCallback)((function(e){if(!c&&!O.isUpdatingSelection&&Eu.hasEditableTarget(k,e.target)&&!As(e,w.onFocus)){var t=Eu.toDOMNode(k,k),n=Eu.findDocumentOrShadowRoot(k);if(O.latestElement=n.activeElement,Bc&&e.target!==t)return void t.focus();Yc.set(k,!0)}}),[c,O,k,w.onFocus]),onKeyDown:(0,H.useCallback)((function(e){if(!c&&Eu.hasEditableTarget(k,e.target)){var t;null===(t=U.current)||void 0===t||t.handleKeyDown(e);var n=e.nativeEvent;if(Eu.isComposing(k)&&!1===n.isComposing&&(qc.set(k,!1),I(!1)),As(e,w.onKeyDown)||Eu.isComposing(k))return;var r=k.selection,a=k.children[null!==r?r.focus.path[0]:0],o="rtl"===cc()(hc.a8.string(a));if(ds.isRedo(n)){e.preventDefault();var i=k;return void("function"==typeof i.redo&&i.redo())}if(ds.isUndo(n)){e.preventDefault();var l=k;return void("function"==typeof l.undo&&l.undo())}if(ds.isMoveLineBackward(n))return e.preventDefault(),void hc.cx.move(k,{unit:"line",reverse:!0});if(ds.isMoveLineForward(n))return e.preventDefault(),void hc.cx.move(k,{unit:"line"});if(ds.isExtendLineBackward(n))return e.preventDefault(),void hc.cx.move(k,{unit:"line",edge:"focus",reverse:!0});if(ds.isExtendLineForward(n))return e.preventDefault(),void hc.cx.move(k,{unit:"line",edge:"focus"});if(ds.isMoveBackward(n))return e.preventDefault(),void(r&&hc.EH.isCollapsed(r)?hc.cx.move(k,{reverse:!o}):hc.cx.collapse(k,{edge:"start"}));if(ds.isMoveForward(n))return e.preventDefault(),void(r&&hc.EH.isCollapsed(r)?hc.cx.move(k,{reverse:o}):hc.cx.collapse(k,{edge:"end"}));if(ds.isMoveWordBackward(n))return e.preventDefault(),r&&hc.EH.isExpanded(r)&&hc.cx.collapse(k,{edge:"focus"}),void hc.cx.move(k,{unit:"word",reverse:!o});if(ds.isMoveWordForward(n))return e.preventDefault(),r&&hc.EH.isExpanded(r)&&hc.cx.collapse(k,{edge:"focus"}),void hc.cx.move(k,{unit:"word",reverse:o});if(Qc){if((Lc||Sc)&&r&&(ds.isDeleteBackward(n)||ds.isDeleteForward(n))&&hc.EH.isCollapsed(r)){var u=hc.a8.parent(k,r.anchor.path);if(hc.gr.isElement(u)&&hc.GW.isVoid(k,u)&&(hc.GW.isInline(k,u)||hc.GW.isBlock(k,u)))return e.preventDefault(),void hc.GW.deleteBackward(k,{unit:"block"})}}else{if(ds.isBold(n)||ds.isItalic(n)||ds.isTransposeCharacter(n))return void e.preventDefault();if(ds.isSoftBreak(n))return e.preventDefault(),void hc.GW.insertSoftBreak(k);if(ds.isSplitBlock(n))return e.preventDefault(),void hc.GW.insertBreak(k);if(ds.isDeleteBackward(n))return e.preventDefault(),void(r&&hc.EH.isExpanded(r)?hc.GW.deleteFragment(k,{direction:"backward"}):hc.GW.deleteBackward(k));if(ds.isDeleteForward(n))return e.preventDefault(),void(r&&hc.EH.isExpanded(r)?hc.GW.deleteFragment(k,{direction:"forward"}):hc.GW.deleteForward(k));if(ds.isDeleteLineBackward(n))return e.preventDefault(),void(r&&hc.EH.isExpanded(r)?hc.GW.deleteFragment(k,{direction:"backward"}):hc.GW.deleteBackward(k,{unit:"line"}));if(ds.isDeleteLineForward(n))return e.preventDefault(),void(r&&hc.EH.isExpanded(r)?hc.GW.deleteFragment(k,{direction:"forward"}):hc.GW.deleteForward(k,{unit:"line"}));if(ds.isDeleteWordBackward(n))return e.preventDefault(),void(r&&hc.EH.isExpanded(r)?hc.GW.deleteFragment(k,{direction:"backward"}):hc.GW.deleteBackward(k,{unit:"word"}));if(ds.isDeleteWordForward(n))return e.preventDefault(),void(r&&hc.EH.isExpanded(r)?hc.GW.deleteFragment(k,{direction:"forward"}):hc.GW.deleteForward(k,{unit:"word"}))}}}),[c,k,w.onKeyDown]),onPaste:(0,H.useCallback)((function(e){c||!Eu.hasEditableTarget(k,e.target)||As(e,w.onPaste)||(!Qc||function(e){return e.clipboardData&&""!==e.clipboardData.getData("text/plain")&&1===e.clipboardData.types.length}(e.nativeEvent)||Sc)&&(e.preventDefault(),Eu.insertData(k,e.clipboardData))}),[c,k,w.onPaste])}),K().createElement(ys,{decorations:q,node:k,renderElement:u,renderPlaceholder:f,renderLeaf:s,selection:k.selection})))))},Es=function(e){var t=e.attributes,n=e.children;return K().createElement("span",(0,oe.c)({},t),n,Ic&&K().createElement("br",null))},ws=function(){return[]},ks=function(e,t){if(t.getBoundingClientRect&&(!e.selection||e.selection&&hc.EH.isCollapsed(e.selection))){var n,r=t.startContainer.parentElement;r.getBoundingClientRect=In()(n=t.getBoundingClientRect).call(n,t),(0,gc.c)(r,{scrollMode:"if-needed"}),delete r.getBoundingClientRect}},As=function(e,t){if(!t)return!1;var n=t(e);return null!=n?n:e.isDefaultPrevented()||e.isPropagationStopped()},xs=function(e){return du(e.target)&&(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement)},bs=function(e,t){if(!t)return!1;var n=t(e);return null!=n?n:e.defaultPrevented},Is=(0,H.createContext)(!1),Bs=function(){return(0,H.useContext)(Is)};var Ss=(0,H.createContext)({});var Ms=["editor","children","onChange","value"],Ls=function(e){var t=e.editor,n=e.children,r=e.onChange,a=e.value,o=Ec(e,Ms),i=K().useState((function(){if(!hc.a8.isNodeList(a))throw new Error("[Slate] initialValue is invalid! Expected a list of elements but got: ".concat(hc.Scrubber.stringify(a)));if(!hc.GW.isEditor(t))throw new Error("[Slate] editor is invalid! You passed: ".concat(hc.Scrubber.stringify(t)));return t.children=a,(0,oe.c)(t,o),{v:0,editor:t}})),l=(0,S.c)(i,2),c=l[0],u=l[1],s=function(e){var t=(0,H.useRef)([]).current,n=(0,H.useRef)({editor:e}).current,r=(0,H.useCallback)((function(e){n.editor=e,O()(t).call(t,(function(t){return t(e)}))}),[t,n]);return{selectorContext:(0,H.useMemo)((function(){return{getSlate:function(){return n.editor},addEventListener:function(e){return t.push(e),function(){la()(t).call(t,En()(t).call(t,e),1)}}}}),[t,n]),onChange:r}}(t),d=s.selectorContext,f=s.onChange,g=(0,H.useCallback)((function(){r&&r(t.children),u((function(e){return{v:e.v+1,editor:t}})),f(t)}),[t,f,r]);(0,H.useEffect)((function(){return _c.set(t,g),function(){_c.set(t,(function(){}))}}),[t,g]);var h=(0,H.useState)(Eu.isFocused(t)),v=(0,S.c)(h,2),p=v[0],m=v[1];return(0,H.useEffect)((function(){m(Eu.isFocused(t))}),[t]),Tu((function(){var e=function(){return m(Eu.isFocused(t))};return Ac>=17?(document.addEventListener("focusin",e),document.addEventListener("focusout",e),function(){document.removeEventListener("focusin",e),document.removeEventListener("focusout",e)}):(document.addEventListener("focus",e,!0),document.addEventListener("blur",e,!0),function(){document.removeEventListener("focus",e,!0),document.removeEventListener("blur",e,!0)})}),[]),K().createElement(Ss.Provider,{value:d},K().createElement(is.Provider,{value:c},K().createElement(wc.Provider,{value:c.editor},K().createElement(Is.Provider,{value:p},n))))},Rs=function(e,t){var n=(t.top+t.bottom)/2;return e.top<=n&&e.bottom>=n},Ts=function(e,t,n){var r=Eu.toDOMRange(e,t).getBoundingClientRect(),a=Eu.toDOMRange(e,n).getBoundingClientRect();return Rs(r,a)&&Rs(a,r)};function Fs(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ns(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)O()(n=Fs(Object(r),!0)).call(n,(function(t){Dc(e,t,r[t])}));else if(A())b()(e,A()(r));else{var a;O()(a=Fs(Object(r))).call(a,(function(t){B()(e,t,w()(r,t))}))}}return e}var Gs=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x-slate-fragment",n=e,r=n.apply,a=n.onChange,o=n.deleteBackward,i=n.addMark,l=n.removeMark;return Kc.set(n,new(ta())),n.addMark=function(e,t){var r,a;null===(r=$c.get(n))||void 0===r||r(),!eu.get(n)&&null!==(a=nu.get(n))&&void 0!==a&&a.length&&eu.set(n,null),tu.delete(n),i(e,t)},n.removeMark=function(e){var t;!eu.get(n)&&null!==(t=nu.get(n))&&void 0!==t&&t.length&&eu.set(n,null),tu.delete(n),l(e)},n.deleteBackward=function(e){if("line"!==e)return o(e);if(n.selection&&hc.EH.isCollapsed(n.selection)){var t=hc.GW.above(n,{match:function(e){return hc.gr.isElement(e)&&hc.GW.isBlock(n,e)},at:n.selection});if(t){var r=(0,S.c)(t,2)[1],a=hc.GW.range(n,r,n.selection.anchor),i=function(e,t){var n=hc.GW.range(e,hc.EH.end(t)),r=Fn()(hc.GW.positions(e,{at:t})),a=0,o=r.length,i=Math.floor(o/2);if(Ts(e,hc.GW.range(e,r[a]),n))return hc.GW.range(e,r[a],n);if(r.length<2)return hc.GW.range(e,r[r.length-1],n);for(;i!==r.length&&i!==a;)Ts(e,hc.GW.range(e,r[i]),n)?o=i:a=i,i=Math.floor((a+o)/2);return hc.GW.range(e,r[o],n)}(n,a);hc.EH.isCollapsed(i)||hc.cx.delete(n,{at:i})}}},n.apply=function(e){var t=[],a=nu.get(n);if(null!=a&&a.length){var o,i=R()(o=F()(a).call(a,(function(t){return function(e,t){var n=e.path,r=e.diff,a=e.id;switch(t.type){case"insert_text":return!hc.YH.equals(t.path,n)||t.offset>=r.end?e:t.offset<=r.start?{diff:{start:t.text.length+r.start,end:t.text.length+r.end,text:r.text},id:a,path:n}:{diff:{start:r.start,end:r.end+t.text.length,text:r.text},id:a,path:n};case"remove_text":return!hc.YH.equals(t.path,n)||t.offset>=r.end?e:t.offset+t.text.length<=r.start?{diff:{start:r.start-t.text.length,end:r.end-t.text.length,text:r.text},id:a,path:n}:{diff:{start:r.start,end:r.end-t.text.length,text:r.text},id:a,path:n};case"split_node":return!hc.YH.equals(t.path,n)||t.position>=r.end?{diff:r,id:a,path:hc.YH.transform(n,t,{affinity:"backward"})}:t.position>r.start?{diff:{start:r.start,end:Math.min(t.position,r.end),text:r.text},id:a,path:n}:{diff:{start:r.start-t.position,end:r.end-t.position,text:r.text},id:a,path:hc.YH.transform(n,t,{affinity:"forward"})};case"merge_node":return hc.YH.equals(t.path,n)?{diff:{start:r.start+t.position,end:r.end+t.position,text:r.text},id:a,path:hc.YH.transform(n,t)}:{diff:r,id:a,path:hc.YH.transform(n,t)}}var o=hc.YH.transform(n,t);return o?{diff:r,path:o,id:a}:null}(t,e)}))).call(o,Boolean);nu.set(n,i)}var l=au.get(n);l&&au.set(n,Su(n,l,e));var c=ru.get(n);if(null!=c&&c.at){var u=hc.wb.isPoint(null==c?void 0:c.at)?Bu(n,c.at,e):Su(n,c.at,e);ru.set(n,u?Ns(Ns({},c),{},{at:u}):null)}switch(e.type){case"insert_text":case"remove_text":case"set_node":case"split_node":t.push.apply(t,(0,yn.c)(Zs(n,e.path)));break;case"set_selection":var s;null===(s=Xc.get(n))||void 0===s||s.unref(),Xc.delete(n);break;case"insert_node":case"remove_node":t.push.apply(t,(0,yn.c)(Zs(n,hc.YH.parent(e.path))));break;case"merge_node":var d=hc.YH.previous(e.path);t.push.apply(t,(0,yn.c)(Zs(n,d)));break;case"move_node":var f=hc.YH.common(hc.YH.parent(e.path),hc.YH.parent(e.newPath));t.push.apply(t,(0,yn.c)(Zs(n,f)))}r(e);for(var g=0,h=t;g<h.length;g++){var v=(0,S.c)(h[g],2),p=v[0],m=v[1],C=hc.GW.node(n,p),y=(0,S.c)(C,1)[0];Hc.set(y,m)}},n.setFragmentData=function(e){var r,a,o=n.selection;if(o){var i=hc.EH.edges(o),l=(0,S.c)(i,2),c=l[0],u=l[1],s=hc.GW.void(n,{at:c.path}),d=hc.GW.void(n,{at:u.path});if(!hc.EH.isCollapsed(o)||s){var f=Eu.toDOMRange(n,o),g=f.cloneContents(),h=g.childNodes[0];if(O()(r=g.childNodes).call(r,(function(e){var t;e.textContent&&""!==ic()(t=e.textContent).call(t)&&(h=e)})),d){var v=(0,S.c)(d,1)[0],p=f.cloneRange(),m=Eu.toDOMNode(n,v);p.setEndAfter(m),g=p.cloneContents()}if(s&&(h=g.querySelector("[data-slate-spacer]")),O()(a=Fn()(g.querySelectorAll("[data-slate-zero-width]"))).call(a,(function(e){var t="n"===e.getAttribute("data-slate-zero-width");e.textContent=t?"\n":""})),gu(h)){var C=h.ownerDocument.createElement("span");C.style.whiteSpace="pre",C.appendChild(h),g.appendChild(C),h=C}var y=n.getFragment(),D=J()(y),E=window.btoa(encodeURIComponent(D));h.setAttribute("data-slate-fragment",E),e.setData("application/".concat(t),E);var w=g.ownerDocument.createElement("div");return w.appendChild(g),w.setAttribute("hidden","true"),g.ownerDocument.body.appendChild(w),e.setData("text/html",w.innerHTML),e.setData("text/plain",pu(w)),g.ownerDocument.body.removeChild(w),e}}},n.insertData=function(e){n.insertFragmentData(e)||n.insertTextData(e)},n.insertFragmentData=function(e){var r,a=e.getData("application/".concat(t))||(r=e.getData("text/html").match(mu)||[],(0,S.c)(r,2)[1]);if(a){var o=decodeURIComponent(window.atob(a)),i=JSON.parse(o);return n.insertFragment(i),!0}return!1},n.insertTextData=function(e){var t=e.getData("text/plain");if(t){var r,a=!1,o=Cc(t.split(/\r\n|\r|\n/));try{for(o.s();!(r=o.n()).done;){var i=r.value;a&&hc.cx.splitNodes(n,{always:!0}),n.insertText(i),a=!0}}catch(e){o.e(e)}finally{o.f()}return!0}return!1},n.onChange=function(e){(Ac<18?Kr().unstable_batchedUpdates:function(e){return e()})((function(){var t=_c.get(n);t&&t(),a(e)}))},n},Zs=function(e,t){var n,r=[],a=Cc(hc.GW.levels(e,{at:t}));try{for(a.s();!(n=a.n()).done;){var o=(0,S.c)(n.value,2),i=o[0],l=o[1],c=Eu.findKey(e,i);r.push([l,c])}}catch(e){a.e(e)}finally{a.f()}return r};function Qs(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function js(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?O()(n=Qs(Object(a),!0)).call(n,(function(t){(0,M.c)(e,t,a[t])})):A()?b()(e,A()(a)):O()(r=Qs(Object(a))).call(r,(function(t){B()(e,t,w()(a,t))}))}return e}function Js(e){var t=e.className;return K().createElement("div",{className:"".concat(t,"-empty")},K().createElement("img",{className:"".concat(t,"-empty-img"),src:Rn,width:"168",height:"96",alt:(0,W.getLangMsg)("printd.grid.key0004")}),K().createElement("div",{className:"".concat(t,"-empty-text")},(0,W.getLangMsg)("printd.grid.key0004")))}var Ps=function(e){var t=e.onSelect,n=e.onShowDescription,r=(0,H.useContext)(pn).expressions,a=(0,H.useState)(""),o=(0,S.c)(a,2),i=o[0],l=o[1],c=(0,H.useState)(null),u=(0,S.c)(c,2),s=u[0],d=u[1],f=(0,H.useState)(""),g=(0,S.c)(f,2),h=g[0],v=g[1],p=(0,H.useState)(r),m=(0,S.c)(p,2),C=m[0],y=m[1];return K().createElement("div",{className:"kd-expression-tree-wrap"},K().createElement(U.Input,{style:{marginBottom:12,width:"100%"},value:i,placeholder:(0,W.getLangMsg)("printd.components.key0029"),borderType:"bordered",onChange:function(e){var t=e.target.value;l(t),y((function(){var e=function(e,t){var n;return R()(n=F()(e).call(e,(function(e){var n=e.items,r=R()(n).call(n,(function(e){var n;return xn()(n=e.name).call(n,t)}));return r.length?js(js({},e),{},{items:r}):null}))).call(n,Boolean)}(r,t);return e}))},allowClear:!0,suffix:K().createElement("div",null,K().createElement(U.Icon,{type:"search",style:{cursor:"pointer"}}))}),!i||null!=C&&C.length?K().createElement("div",{className:"kd-expression-tree"},F()(C).call(C,(function(e){var r=e.items,a=e.name;return K().createElement(U.Collapse,{name:"Collapse",key:e.type,defaultActiveKey:e.type},K().createElement(U.Collapse.Panel,{header:a,panelKey:e.type},F()(r).call(r,(function(r){var a;return K().createElement("div",{key:G()(a="".concat(e.type,"-")).call(a,r.key),className:Wn()(["expression-item",{"is-active":r.key===h}]),onClick:function(){return function(e){var r=e.key;t(r),v(r),d(e),n(e)}(r)},onMouseOver:function(){return n(r)},onMouseLeave:function(){return n(s)}},r.name)}))))}))):K().createElement(Js,{className:"left-datasource"}))},Os="object"==("undefined"==typeof self?"undefined":(0,On.c)(self))&&self.self===self&&self||"object"==(void 0===n.g?"undefined":(0,On.c)(n.g))&&n.g.global===n.g&&n.g||{},Us="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function Ws(e){var t,n;for(t=[],n=0;n<e.length;n++)t.push(Us[e[n]%62]);return t.join("")}var zs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;if(void 0!==Os.crypto)return Ws(Os.crypto.getRandomValues(new Uint8Array(e)));for(var t=new Array(e),n=0;n<e;n++)t[n]=Math.floor(256*Math.random());return Ws(t)};var Hs=function(e,t,n){var r;return Y().isUndefined(e)?Y().isUndefined(null==t||null===(r=t[0])||void 0===r?void 0:r.Value)?function(e){switch(e){case"String":default:return"";case"Integer":return 0;case"Boolean":return!1}}(n):t[0].Value:e},Ks=Y().memoize((function(e,t){for(var n={},r=0;r<e.Categories.length;r++){var a,o=e.Categories[r],i=Hn()(a=o.Controls).call(a,(function(e){return e.Id===t}));i&&(0,oe.c)(n,i)}return n}),(function(e,t){return J()({meta:e,type:t})})),Vs=Y().memoize((function(e){var t={},n=e.Nodes;if(n)O()(n).call(n,(function(e){var n=Y().camelCase(e.Id),r=e.Editor;if(r){var a=r.DataType,o=r.Default,i=(r.Min,r.Enum);t[n]=Hs(o,i,a)}else t[n]="not editor property: err"}));else{var r=e.Editor,a=r.DataType,o=r.Default,i=(r.Min,r.Enum),l=Y().camelCase(e.Id);t[l]=r?Hs(o,i,a):"not editor property: err"}return t}));function Ys(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n){var r,a=n.type,o=n.parentId,i=n.transferData,l={},c={};if(t&&i)(0,oe.c)(c,i);else{var u=Ks(e,a);u&&(0,oe.c)(c,u)}return t?c:(o&&(l.parentId=o),O()(r=c.Properties).call(r,(function(e){(0,oe.c)(l,Vs(e))})),l.id=zs(),l.name=c.Name,l.type=c.Id,!t&&i&&(0,oe.c)(l,i),l)}}function qs(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xs(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?O()(n=qs(Object(a),!0)).call(n,(function(t){(0,M.c)(e,t,a[t])})):A()?b()(e,A()(a)):O()(r=qs(Object(a))).call(r,(function(t){B()(e,t,w()(a,t))}))}return e}var _s=[{type:"paragraph",children:[{text:""}]}],$s=(0,W.ErrorBoundaryWrap)(Ls,"slate");function ed(e){return K().createElement("p",e.attributes,e.children)}function td(e){var t=ns(),n=Bs(),r=e.element.textFormat,a="Date"===r?"#FFF1D4":"Number"===r||"Amount"===r?"#DCFAE4":"#E0EFFF";return(0,H.useEffect)((function(){if(t&&n){var r=e.element.key;(0,e.setActiveDataSourceKey)(r)}}),[t,n]),K().createElement("span",(0,oe.c)({},e.attributes,{contentEditable:!1,style:{padding:"1px 8px",margin:"0 3px",verticalAlign:"baseline",display:"inline-block",borderRadius:"2px",backgroundColor:a,fontSize:"12px",cursor:"pointer",boxShadow:t&&n?"0 0 0 2px #B4D5FF":"none",lineHeight:"18px"}}),e.element.formulaName,e.children)}var nd=(0,H.forwardRef)((function(e,t){var n=e.meta,r=e.definition,a=e.expandedKeys,o=e.formulaData,i=e.activedSelectId,l=e.filterTreeData,c=e.showDefinitionId,u=(0,H.useState)(null),s=(0,S.c)(u,2),d=s[0],f=s[1],g=(0,H.useState)(""),h=(0,S.c)(g,2),v=h[0],p=h[1],m=(0,H.useRef)(null),C=(0,H.useState)((function(){if(o&&o.length){var e=[],t={type:"paragraph",children:[{text:""}]};return O()(o).call(o,(function(n,r){if("_enter_"!==n){var a=r===o.length-1;a&&e.push(Xs({},t)),"string"==typeof n?t.children.push({text:n}):t.children.push({text:""},Xs(Xs({},n),{},{type:"label",children:[{text:""}]}),{text:""}),t=a?{type:"paragraph",children:[]}:t}else e.push(Xs({},t)),t={type:"paragraph",children:[{text:""}]}})),e}return _s})),y=(0,S.c)(C,2),D=y[0],E=y[1],w=(0,H.useMemo)((function(){return J()(D)===J()(_s)}),[D]),k=(0,H.useState)({visible:!1,msg:"",type:"success"}),A=(0,S.c)(k,2),x=A[0],b=A[1],I=(0,H.useContext)(W.DataContext),B=I.findControl(i),M=B.cellType,L=B.parentId,T=I.findControl(L),N=(0,H.useMemo)((function(){return function(e){var t=e.isVoid,n=e.isInline;return e.isInline=function(e){return"label"===e.type||n(e)},e.isVoid=function(e){return"label"===e.type||t(e)},e}(Gs(jl(Rl())))}),[]),G=function(){var e=[];O()(D).call(D,(function(t,n){var r,a=t.children,o=R()(r=F()(a).call(a,(function(e){var t=e.type,n=e.text;return"label"===t?e:n}))).call(r,(function(e){return""!==e}));e.push.apply(e,(0,yn.c)(o)),n!==D.length-1&&e.push("_enter_")}));var t=I.getData(),n=null==t?void 0:t.version;return{formulaData:e,tplVersion:n}},Z=function(){var e=G();return window.fetch("api/print/validatePrintFormula.do",{method:"POST",headers:{"Content-Type":"application/jsoncharset=utf-8"},body:J()(e),mode:"cors",credentials:"include"}).then((function(e){if(e.ok)return e.json();throw new Error(e.statusText)})).then((function(t){var n=t.result,r=t.msg;return b((function(){return{type:"fail"===n?"error":"success",visible:!0,msg:r}})),"success"===n?(m.current=le()((function(){m.current&&clearTimeout(m.current),b((function(e){return Xs(Xs({},e),{},{visible:!1})}))}),1100),Xs({curTab:"2"},e)):"fail"})).catch((function(e){return!1}))};(0,H.useImperativeHandle)(t,(function(){return{getFormulaData:G,onExpressionSave:Z,onAutoFocus:z}}));var Q=(0,H.useCallback)((function(e){return"label"===e.element.type?K().createElement(td,(0,oe.c)({},e,{setActiveDataSourceKey:p})):K().createElement(ed,e)}),[]),j=(0,H.useRef)(null),P=function(e){j.current&&(Oo.select(N,j.current),Oo.insertText(N,e),Eu.focus(N))},z=(0,H.useCallback)((function(){var e,t,n=null===(e=N.children[0])||void 0===e||null===(e=e.children)||void 0===e?void 0:e.length,r=null===(t=N.children[0])||void 0===t||null===(t=t.children[n-1])||void 0===t||null===(t=t.text)||void 0===t?void 0:t.length,a={anchor:{path:[0,n-1],offset:r},focus:{path:[0,n-1],offset:r}};Oo.select(N,a),Eu.focus(N)}),[N]);return K().createElement(K().Fragment,null,K().createElement("div",{className:"expression-left"},K().createElement("div",{className:"block-title"},(0,W.getLangMsg)("printd.components.key0013")),K().createElement("div",{className:"block-main"},K().createElement(Jr,{meta:n,definition:r,onSelect:function(e,t,n){var r;if(j.current){var a=t.Name,o=t.ViewName,i=t.bindField,l=t.dataSource,c=t.dsTypeKey,u=t.key,s=t.InitAttr,d=void 0===s?{TextFormat:"Text"}:s,f=o||a;if(j.current)Oo.select(N,j.current);else{var g,h=D[0].children.length-1,v=[0,h],m=(null===(g=D[0].children[h])||void 0===g||null===(g=g.text)||void 0===g?void 0:g.length)||0;Oo.select(N,{focus:{path:v,offset:m},anchor:{path:v,offset:m}})}var C={id:zs(),type:"label",formulaName:f,bindField:(null==i?void 0:R()(r=i.split(".")).call(r,(function(e){return!xn()(e).call(e,"$reportEntryGroup$")})).join("."))||"",dataSource:l,dsType:c,key:u,textFormat:d.TextFormat,children:[{text:""}]};p(u),Oo.insertNodes(N,C),Oo.move(N),Eu.focus(N)}},expandedKeys:a,scrollToKey:v,filterTreeData:function(e){var t=or(I,i,"DataGrid");return t?wr(t,e):l(e)},showDefinitionId:c}))),K().createElement("div",{className:"expression-main"},K().createElement("div",{className:"editor-area"},K().createElement("div",{className:"editor-toolbar"},K().createElement("span",{onClick:function(){return P("+")}},K().createElement(U.Icon,{type:"add"})),K().createElement("span",{onClick:function(){return P("-")}},K().createElement(U.Icon,{type:"reduce"})),K().createElement("span",{onClick:function(){return P("*")}},K().createElement(U.Icon,{prefix:"printdesignericon",type:"chengyi"})),K().createElement("span",{onClick:function(){return P("/")}},K().createElement(U.Icon,{prefix:"printdesignericon",type:"xiegang"})),K().createElement("span",{onClick:function(){return P(">")}},K().createElement(U.Icon,{prefix:"printdesignericon",type:"dayu"})),K().createElement("span",{onClick:function(){return P("<")}},K().createElement(U.Icon,{prefix:"printdesignericon",type:"xiaoyu"})),K().createElement("span",{onClick:function(){return P(">=")}},K().createElement(U.Icon,{prefix:"printdesignericon",type:"dayudengyu"})),K().createElement("span",{onClick:function(){return P("<=")}},K().createElement(U.Icon,{prefix:"printdesignericon",type:"xiaoyudengyu"})),K().createElement("span",{onClick:function(){return P("=")}},K().createElement(U.Icon,{prefix:"printdesignericon",type:"dengyu3"})),K().createElement("span",{onClick:function(){return P("!=")}},K().createElement(U.Icon,{prefix:"printdesignericon",type:"budengyu"}))),K().createElement("div",{className:"editor"},K().createElement($s,{value:D,editor:N,onChange:function(e){E(e)}},K().createElement(Ds,{placeholder:(0,W.getLangMsg)("printd.components.key0005"),id:"slate-editor",renderElement:Q,onKeyDown:function(e){if("("===e.key&&(e.preventDefault(),N.insertText("()"),Oo.move(N,{distance:1,unit:"offset",reverse:!0})),13===e.keyCode){var t=I.getData(),n=null==t?void 0:t.version;(!n||Number(n)<6)&&e.preventDefault()}},autoFocus:!0,onBlur:function(e){e.persist();var t=e.relatedTarget;if("INPUT"!==(null==t?void 0:t.tagName)){var n=N.selection,r={};for(var a in n){var o=n[a],i=o.path,l=o.offset;r[a]={path:kn()(i).call(i,0,2),offset:l}}j.current=r,Oo.select(N,r),Eu.focus(N)}}})),K().createElement("div",{className:"editor-bottom"},K().createElement("span",{className:Wn()(["verify-btn",{disabled:w}]),onClick:function(){if(!w){var e=G(),t=Xs(Xs({},"Detail"===M?{cellType:M,dataSource:T.dataSource}:{}),e);window.fetch("api/print/validatePrintFormula.do",{method:"POST",headers:{"Content-Type":"application/jsoncharset=utf-8"},body:J()(t),mode:"cors",credentials:"include"}).then((function(e){if(e.ok)return e.json();throw new Error(e.statusText)})).then((function(e){var t=e.result,n=e.msg;b((function(){return{type:"fail"===t?"error":"success",visible:!0,msg:n}})),"success"===t&&(m.current=le()((function(){m.current&&clearTimeout(m.current),b((function(e){return Xs(Xs({},e),{},{visible:!1})}))}),1100))})).catch((function(e){}))}}},(0,W.getLangMsg)("printd.components.key0010"))))),K().createElement("div",{className:"description-area"},x.visible&&K().createElement(U.Alert,{message:x.msg,showIcon:!0,closable:!0,type:x.type,delayOffTime:"success"===x.type?1e3:0,onClose:function(){return b((function(e){return Xs(Xs({},e),{},{visible:!1})}))}}),d?K().createElement("div",{className:"description-content"},K().createElement("div",{className:"description-title"},(null==d?void 0:d.title)||""),K().createElement("div",{className:"description-detail"},(null==d?void 0:d.description)||"")):K().createElement("div",{className:"description-content"},(0,W.getLangMsg)("printd.components.key0023"),K().createElement("br",null),(0,W.getLangMsg)("printd.components.key0024"),K().createElement("br",null),(0,W.getLangMsg)("printd.components.key0025"),K().createElement("br",null),(0,W.getLangMsg)("printd.components.key0026")))),K().createElement("div",{className:"expression-right"},K().createElement("div",{className:"block-title"},(0,W.getLangMsg)("printd.components.key0028")),K().createElement("div",{className:"block-main"},K().createElement(Ps,{onSelect:function(e){j.current&&(Oo.select(N,j.current),Oo.insertText(N,e+"()"),Oo.move(N,{distance:1,unit:"offset",reverse:!0}),Eu.focus(N))},onShowDescription:f}))))})),rd=(0,H.forwardRef)((function(e,t){var n,r=e.meta,a=e.definition,o=e.expandedKeys,i=void 0===o?[]:o,l=e.scrollToKey,c=e.filterTreeData,u=e.activedSelectId,s=e.showDefinitionId,d=e.activeTab,f=e.formulaData,g=e.filterExpressionTreeData,h=e.DataSourceOption,v=(0,H.useRef)(null),p=(0,H.useRef)(null),m=(0,H.useRef)(null),C=(0,H.useState)(d),y=(0,S.c)(C,2),D=y[0],E=y[1],w=null===(n=(0,H.useContext)(W.DataContext).getData())||void 0===n?void 0:n.version,k="expression-modal";(0,H.useImperativeHandle)(t,(function(){return{getDataSource:function(){return new(Xr())((function(e,t){var n;"1"===D?e({curTab:D,selectNode:v.current}):null===(n=p.current)||void 0===n||n.onExpressionSave().then(e)}))}}}));(0,H.useEffect)((function(){var e;D&&(null===(e=p.current)||void 0===e||e.onAutoFocus())}),[D]);var A=(0,H.useMemo)((function(){var e=w&&Number(w)>=6;return[K().createElement("span",null,(0,W.getLangMsg)("printd.grid.key0003"),e?K().createElement("label",{className:"".concat(k,"-new-tag")},"NEW"):null),e]}),[w]),x=(0,S.c)(A,2),b=x[0],I=x[1];return K().createElement("div",{className:"".concat(k,"-tab-wrapper")},K().createElement(U.Tabs,{type:"dynamic",activeKey:D,onChange:function(e){E(e)}},K().createElement(U.Tabs.TabPane,{key:"1",tab:(0,W.getLangMsg)("printd.components.key0027")},K().createElement("div",{className:"body-left"},K().createElement(Jr,{scrollToKey:l,meta:r,definition:a,onSelect:function(e,t,n){v.current=t},showDefinitionId:s,expandedKeys:i,filterTreeData:c}))),!1===(null==h?void 0:h.AllowFormula)?K().createElement("div",null):K().createElement(U.Tabs.TabPane,{key:"2",tab:b},K().createElement("div",{className:"body-right",ref:m},K().createElement(nd,{meta:r,definition:a,expandedKeys:i,ref:p,formulaData:f,activedSelectId:u,filterTreeData:g,showDefinitionId:s}))),I?K().createElement(U.Tabs.TabPane,{specialPane:"right"},K().createElement(U.Link,{target:"_blank",rel:"noreferrer",href:"https://vip.kingdee.com/article/609740912138348800"},(0,W.getLangMsg)("printd.grid.key0129"))):null))})),ad=function(e){var t=e.visible,n=e.setVisible,r=e.meta,a=e.definition,o=e.onSelect,i=(e.emptyNode,e.expandedKeys),l=void 0===i?[]:i,c=e.activeTab,u=e.DataSourceOption,s=e.filterTreeData,d=e.activedSelectId,f=e.formulaData,g=e.filterExpressionTreeData,h="expression",v=(0,H.useState)(!1),p=(0,S.c)(v,2),m=p[0],C=p[1],y=(0,H.useState)(!0),D=(0,S.c)(y,2),E=(D[0],D[1],(0,H.useRef)(null)),w=(0,H.useContext)(W.DataContext),k=(0,H.useContext)(W.SelectionContext),A=(0,H.useContext)(W.DataFactoryContext).modelFactory,x=w.getRootId(),b=(w.findControl(x).language,Ln({dataContext:w,selectionContext:k,meta:r,activedSelectId:d,modelFactory:A})),I=K().createElement(K().Fragment,null,K().createElement(U.Checkbox,{className:"".concat(h,"-modal-footer-checkbox"),checked:m,onChange:function(e){var t=!!e.target.checked;C(t)}},(0,W.getLangMsg)("printd.grid.key0101")),K().createElement("div",{className:"".concat(h,"-modal-footer-btns")},K().createElement(U.Button,{onClick:function(){return n(!1)},type:"second",className:"".concat(h,"-modal-cancel-btn")},(0,W.getLangMsg)("printd.components.key0011")),K().createElement(U.Button,{onClick:function(){var e;null===(e=E.current)||void 0===e||e.getDataSource().then((function(e){"fail"!==e&&o(e)}))},type:"primary",className:"".concat(h,"-modal-ok-btn")},(0,W.getLangMsg)("printd.components.key0012"))));return K().createElement(U.Modal,{body:K().createElement(rd,{scrollToKey:b,activeTab:c,formulaData:f,meta:r,definition:a,showDefinitionId:m,expandedKeys:l,ref:E,filterTreeData:s,activedSelectId:d,filterExpressionTreeData:g,DataSourceOption:u}),bodyStyle:{justifyContent:"start",alignItems:"start",overflowX:"hidden",overflowY:"auto",flexDirection:"column"},titleIcon:null,className:"".concat(h,"-modal"),footer:I,maskClosable:!1,width:1e3,height:614,title:(0,W.getLangMsg)("printd.components.key0001"),closable:!0,destroyOnClose:!0,onCancel:function(){return n(!1)},onOk:function(){return n(!1)},mask:!0,visible:t})},od="beforeSave";function id(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function ld(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?O()(n=id(Object(a),!0)).call(n,(function(t){(0,M.c)(e,t,a[t])})):A()?b()(e,A()(a)):O()(r=id(Object(a))).call(r,(function(t){B()(e,t,w()(a,t))}))}return e}function cd(e,t){if(!t)return e;t.ShowType;var n=t.DsType,r=t.FieldType,a=n.Hide,o=(n.OnlyShow,r.Hide,r.OnlyShow);return(null==a?void 0:a.length)>0&&(e=sd(e,a)),(null==o?void 0:o.length)>0&&(e=ud(e,o)),e}function ud(e,t){return Q()(e).call(e,(function(e,n){var r=n,a=r.Items,o=r.Type,i=xn()(t).call(t,o);return!i&&a&&(n=ld(ld({},n),{},{Items:ud(a,t)})),(i||n.Items&&n.Items.length)&&e.push(n),e}),[])}function sd(e,t){return Q()(e).call(e,(function(e,n){var r=n.Items,a=n.DsType;return xn()(t).call(t,a)||(r?e.push(ld(ld({},n),{},{Items:sd(r,t)})):e.push(n)),e}),[])}var dd={locale:"zh-CN","global.selectholder":"请选择","global.placeholder":"请输入...","global.cancel":"取消","global.confirm":"确定"};function fd(e,t){var n=void 0!==Gn()&&Qn()(e)||e["@@iterator"];if(!n){if(Jn()(e)||(n=function(e,t){var n;if(!e)return;if("string"==typeof e)return gd(e,t);var r=kn()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Fn()(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gd(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw o}}}}function gd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var hd=function(){function e(t,n){(0,ql.c)(this,e),(0,M.c)(this,"localesData",void 0),(0,M.c)(this,"locale",void 0),this.locale=n||dd.locale,this.localesData=t}return(0,Yl.c)(e,[{key:"setLocalesData",value:function(e,t){var n=t||this.localesData[e];if(n)return this.locale=e,this.localesData[e]=n,t}},{key:"getLocalData",value:function(){return this.localesData[this.locale]}},{key:"getLocal",value:function(){return this.locale}},{key:"getLocalesData",value:function(){return this.localesData}}]),e}(),vd=new hd((0,M.c)({},dd.locale,dd)),pd=function(e,t,n){var r,a=vd.getLocalData();return function(e,t){var n,r=/{[\w\W]*?}/g,a=e.match(r)||[],o=function(e){return"object"===(0,On.c)(e)||"function"==typeof e},i=function(e){var t=e.length;return kn()(e).call(e,1,t-1)},l=[],c=[],u=fd(a);try{for(u.s();!(n=u.n()).done;){var s=i(n.value),d=t[s];o(d)?c.push({k:s,v:d}):l.push({k:s,v:d})}}catch(e){u.e(e)}finally{u.f()}e=function(e,t){return O()(t).call(t,(function(t){var n=t.k,r=t.v,a=new RegExp("{"+n+"}","g");e=e.replace(a,r)})),e}(e,l);var f=[];c.length>0&&(f=function(e,t){var n=function(e){var t,n=[],r={t:0,v:""},a=e.length;return O()(t=e.split("")).call(t,(function(e,t){"{"===e?(n.push(r),r={t:1,v:""}):"}"===e?(n.push(r),r={t:0,v:""}):r.v=r.v+e,t===a-1&&n.push(r)})),n},r=[],a=n(e);return O()(a).call(a,(function(e,n){var a=e.t,o=e.v;0===a&&""!==o?r.push(K().createElement("span",{key:n},o)):1===a&&r.push(K().cloneElement(t[o],{key:n}))})),r}(e,t));return c.length>0?f:e}(a[G()(r="".concat(e,".")).call(r,t)]||a["global.".concat(t)]||"",n)};var md,Cd={getPrefixCls:function(e,t,n){var r;return n||(e=e||"kdesigner",t?G()(r="".concat(e,"-")).call(r,t):e)},prefixCls:"kdesigner",locale:{getLangMsg:pd,getCompLangMsg:function(e,t,n){var r=e.componentName,a=e.labels,o=e.labelParams;if(o=o||{},n=n||dd,!(a=a||[]).length)for(var i in n){var l=i.split(".");r===l[0]&&l[1]&&a.push(l[1])}var c={};return O()(a).call(a,(function(e){c[e]=t&&"function"==typeof t?t(r,e,o[e]||{}):pd(r,e,o[e]||{})})),c}}},yd=Cd,Dd=(0,H.createContext)(yd);function Ed(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function wd(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?O()(n=Ed(Object(a),!0)).call(n,(function(t){(0,M.c)(e,t,a[t])})):A()?b()(e,A()(a)):O()(r=Ed(Object(a))).call(r,(function(t){B()(e,t,w()(a,t))}))}return e}var kd=G()(md=[gn.text]).call(md,(0,yn.c)(yt),(0,yn.c)(Dt)),Ad=function(e){var t=e.id,n=e.propName,r=e.dataContext,a=(e.activedSelectId,e.RelationKey),o=e.RelationViewText,i=e.RelationDataSource,l=e.DataSourceOption,c=e.value,u=e.className,s=e.Editor,d=void 0===s?{}:s,f=e.field,g=e.readOnly,h=e.modalTitle,v=e.clearable,p=void 0!==v&&v,C=e.onClear,y=e.onSelect,D=e.handleInputChange,E=e.filterTreeData,w=e.expandedKeys,k=e.checkedKeys,A=e.selectedKey,x=e.modalType,b=e.Name,I=e.Tips,B=e.checkable,L=e.filterExpressionTreeData,R=e.DataSourceInfo,T=(0,H.useState)(!1),F=(0,S.c)(T,2),N=F[0],Z=F[1],j=(0,H.useState)(!1),J=(0,S.c)(j,2),P=J[0],O=J[1],z=(0,H.useState)(!1),V=(0,S.c)(z,2),q=V[0],X=V[1],_=(0,H.useState)("1"),$=(0,S.c)(_,2),ee=$[0],te=$[1],ne=(0,H.useRef)(null),re=d.MaxLength,ae=d.Tips,ie=d.NameHidden,ce=(0,H.useContext)(pn),ue=f.formulaData,se="Formula"===f.dsType&&b===(0,W.getLangMsg)({key:"printd.grid.key0128"}),de=(ce.meta,ce.definition),fe=ce.setMessage,ge="left-datasource",he=["=now()","=getUserName()"],ve=function(e){le()((function(){var t,n;e?null===(t=ne.current)||void 0===t||t.show():null===(n=ne.current)||void 0===n||n.hide()}),0)},pe=(0,H.useState)(c),me=(0,S.c)(pe,2),Ce=me[0],ye=me[1];!function(e,t){(0,H.useEffect)((function(){var n=function(n){var r=n.id,a=n.value;r===e&&t(a)};return W.eventBus.on("input-query",n),function(){W.eventBus.off("input-query",n)}}),[e])}(t,ve),(0,H.useEffect)((function(){ye(c)}),[c]),(0,H.useEffect)((function(){var e=$n(c),t=e.isBindField,n=e.bindField;if(!t||se)ve(!1),De(!1);else{var r=_n(n,de);if("$DsKey=[System]"===f.dataSource&&(r=!0),r)ve(!1),De(!1);else{var a,o,i;if(f.dataSource||f.bindField||!f.anchorField)i=Yn(qn(f.dataSource,f.bindField),de);else{var l=f.anchorField,u=l.bindField,s=l.dataSource;i=Yn(qn(s,u),de)}if(!i&&-1!==(null==f||null===(a=f.bindField)||void 0===a||null===(o=En()(a))||void 0===o?void 0:o.call(a,"."))){var d=f.bindField.match(/w?\w*$/)[0];i=Yn(qn(f.dataSource,d),de)}i?(ve(!1),De(!1)):(ve(!0),De(!0))}}}),[c,de,se]);var De=function(e){var n;W.eventBus.emit(G()(n="".concat(od,"_")).call(n,t),e)},Ee=(0,H.useCallback)((function(e){if(e!==c){if(se)return r.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[t,er((0,M.c)((0,M.c)({},n,e),"viewText",""))]]));var o,l=$n(e),u=l.isBindField,s=l.bindField;if(W.console.log("isBindField",u),o=er(R?(0,M.c)((0,M.c)({},n,e),R,""):(0,M.c)((0,M.c)((0,M.c)((0,M.c)((0,M.c)({},n,e),Y().camelCase(a),""),Y().camelCase(i),""),"viewText",""),"dsType","")),u){var d=_n(s,de);if(!d)return ve(!0),r.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[t,o]])),void W.console.error("queryDataSourceAndAncestorByName has no res",s,de);ve(!1);var f=d.dataSource,g=d.key,h=d.viewText,v=d.dsType;W.console.log("bindField, definition, res"),W.console.log(s,de,d),r.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[t,er((0,M.c)((0,M.c)((0,M.c)((0,M.c)((0,M.c)({},n,e),Y().camelCase(a),g),Y().camelCase(i),f),"viewText","=$".concat(h)),"dsType",v))]]))}else ve(!1),r.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[t,o]]))}}),[t,c,n,a,i,de,se]),we=(0,H.useCallback)((function(e){var l=e.curTab;if(e)if("2"===l){var c=e.formulaData,u=se?{formulaData:c}:(0,M.c)((0,M.c)((0,M.c)((0,M.c)((0,M.c)((0,M.c)({},n,(0,W.getLangMsg)("printd.grid.key0003")),Y().camelCase(a),""),Y().camelCase(i),""),Y().camelCase(o),""),"dsType","Formula"),"formulaData",c);r.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[t,er(u)]]))}else{var s=e.selectNode;ke(s)}else{r.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[t,{bindField:"",bindText:"",dataSource:"",dsType:"",formulaData:[],viewText:""}]]))}X(!1)}),[t,n,de,o,i,a,n,x,se]),ke=(0,H.useCallback)((function(e){var l;if(e){var c=e.key,u=e.InitAttr,s=void 0===u?{}:u,d=Yn(c,de);if(d){var f=d.dataSource,g=d.ancestorTitle,h=d.key,v=d.title,p=d.dsType,C=d.IgnoreZero,y=d.IgnoreTailZero,D=Q()(l=m()(s)).call(l,(function(e,t){return e[Y().camelCase(t)]=s[t],e}),{});D.ignoreZero=C,D.ignoreTailZero=y,R?r.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[t,er((0,M.c)((0,M.c)({},n,"=$".concat(g)),R,er((0,M.c)((0,M.c)((0,M.c)((0,M.c)({},Y().camelCase(a),h),Y().camelCase(i),f),Y().camelCase(o),"=$".concat(v)),"dsType",p))))]])):r.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[t,er(wd((0,M.c)((0,M.c)((0,M.c)((0,M.c)((0,M.c)((0,M.c)({},n,"=$".concat(g)),Y().camelCase(a),h),Y().camelCase(i),f),Y().camelCase(o),"=$".concat(v)),"dsType",p),"formulaData",null),D))]]))}else W.console.error("queryDataSourceAndAncestorByKey has no res",c,de)}}),[t,n,de,o,i,a,n,R]),Ae=(0,H.useCallback)((function(){O(!1)}),[]),xe=function(){te((function(){return se?"2":"1"})),"expression"===x?X(!0):O(!0)},be=(0,H.useCallback)((function(e){return"function"==typeof L&&(e=L(e)),function(e,t){return null!=t&&t.length?gr(e,(function(e){var n=e.bindField;return n&&xn()(t).call(t,n)}),"Sys"):e}(e,he)}),[L]),Ie=(0,H.useContext)(W.GlobalConfigContext).invokePrintDesignerCustomEvent,Be=(0,H.useCallback)((function(e){Ie("clickTipsLink",e)}),[Ie]),Se=(0,H.useCallback)((function(e){return E(cd(e,l))}),[l]);return K().createElement(K().Fragment,null,K().createElement(W.NameTipWrapper,{nameHidden:ie,className:u,name:b,tips:I,onLinkClick:Be}),K().createElement(Yr,{ref:ne,className:u},K().createElement("div",{onMouseOver:function(){p&&Ce&&Z(!0)},onMouseLeave:function(){N&&Z(!1)}},K().createElement(U.Input,{onChange:function(e){var t=e.target.value||"";ye(t)},readOnly:g,onPressEnter:function(){},onBlur:function(e){var t=e.target.value||"",n=D||Ee;re&&t.length>re&&((null==ae?void 0:ae.MaxLength)&&fe(ae.MaxLength),t=kn()(t).call(t,0,re),ye(t)),n(t,ve)},value:Ce,title:c,type:"string",placeholder:(0,W.getLangMsg)("printd.grid.key0002"),borderType:"bordered",prefix:se?K().createElement("span",{className:"formula-prefix"},"fx"):null,onClick:function(){g&&xe()},suffix:K().createElement(K().Fragment,null,N&&K().createElement(U.Icon,{type:"close",style:{cursor:"pointer"},onClick:C}),K().createElement(U.Icon,{type:"more",style:{cursor:"pointer"},onClick:xe}))}),se&&xn()(kd).call(kd,f.type)?K().createElement(Id,null):null)),K().createElement(Wr,(0,oe.c)({activedSelectId:t,visible:P,modalTitle:h},ce,{filterTreeData:E,expandedKeys:w,selectedKey:A,checkedKeys:k,onSelect:y?In()(y).call(y,null,O):function(e){ke(e),O(!1)},onCancel:Ae,className:ge,emptyNode:K().createElement(xd,{className:"left-datasource"}),checkable:B})),K().createElement(ad,(0,oe.c)({activedSelectId:t,visible:q,activeTab:ee,formulaData:ue},ce,{filterTreeData:Se,filterExpressionTreeData:be,expandedKeys:w,setVisible:X,onSelect:y?In()(y).call(y,null,X):we,className:ge,DataSourceOption:l})))};function xd(e){var t=e.className;return K().createElement("div",{className:"".concat(t,"-empty")},K().createElement("img",{className:"".concat(t,"-empty-img"),src:Rn,width:"168",height:"96",alt:(0,W.getLangMsg)("printd.grid.key0004")}),K().createElement("div",{className:"".concat(t,"-empty-text")},(0,W.getLangMsg)("printd.grid.key0004")))}var bd=" ";function Id(){var e=(0,H.useContext)(Dd),t=e.getPrefixCls,n=e.prefixCls,r=t?t(n,"print-designer"):"";return K().createElement("div",{className:"".concat(r,"-formula-helper-text")},K().createElement("span",null,(0,W.getLangMsg)("printd.grid.key0125")+bd),K().createElement("a",{href:"https://vip.kingdee.com/article/583309331983209728",target:"_blank",rel:"noreferrer"},(0,W.getLangMsg)("printd.grid.key0126")))}var Bd=function(e){var t,n=e.dataContext,r=e.field,a=null==e||null===(t=e.field)||void 0===t?void 0:t.type,o="LayoutCell"!==a,i=n.findControl(r.parentId)||{},l=i.id,c=(i.dataSource,i.type,(0,H.useCallback)((function(e){var t=n.findControl(l);null==t||t.cellType,n.findControl(null==t?void 0:t.parentId);return e=R()(e).call(e,(function(e){return"Sys"!==e.DsType})),o?hr(e,"Image"):e}),[a])),u=(0,H.useCallback)((function(e){return o?hr(e,"Image"):e}),[]);return K().createElement(Ad,(0,oe.c)({},e,{modalType:"expression",filterTreeData:c,filterExpressionTreeData:u}))};function Sd(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Md(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?O()(n=Sd(Object(a),!0)).call(n,(function(t){(0,M.c)(e,t,a[t])})):A()?b()(e,A()(a)):O()(r=Sd(Object(a))).call(r,(function(t){B()(e,t,w()(a,t))}))}return e}var Ld=function(e){e.Name;var t,n,r,a=e.id,o=e.propName,i=e.DataSourceInfo,l=e.dataContext,c=e.RelationKey,u=e.RelationViewText,s=e.RelationDataSource,d=e.value,f=e.field;e.className;W.console.log("datacell------",e);(0,H.useRef)(null);var g=(0,H.useContext)(pn),h=f.statType||"",v=f.dsType,p=f.cellType,C="Formula"===v,y=l.findControl(f.parentId),D=y.id,E=y.dataSource,w=y.type,k=(xn()(t=["Detail","Group"]).call(t,p)?E:"").replace(/^(\S+\.)?(\S+)$/g,"$2"),A=xn()(n=["Detail","Group"]).call(n,p)?[G()(r="".concat(E,"-")).call(r,k)]:[],x=(g.meta,g.definition),b="SubDataGrid"===w&&"Detail"===p?null:"expression",I=function(e){var t,n=e.key,r=e.InitAttr,u=void 0===r?{}:r,d=Yn(n,x);if(d){var f,g,v,C=d.dataSource,y=d.ancestorTitle,w=d.key,k=d.title,A=d.dsType,b=d.IgnoreZero,I=d.IgnoreTailZero,B="=$".concat(y),S=Q()(t=m()(u)).call(t,(function(e,t){return e[Y().camelCase(t)]=u[t],e}),{});if(S.ignoreZero=b,S.ignoreTailZero=I,i)f=[[a,er((0,M.c)((0,M.c)({},o,B),i,er(Md((0,M.c)((0,M.c)((0,M.c)((0,M.c)({},Y().camelCase(c),w),Y().camelCase(s),C),"viewText","Statistic"===p&&"noStat"!==h?G()(g="=".concat(h,"(")).call(g,k,")"):"=$".concat(k)),"dsType",A),S))))]];else f=[[a,er(Md((0,M.c)((0,M.c)((0,M.c)((0,M.c)((0,M.c)({},o,B),Y().camelCase(c),w),Y().camelCase(s),C),"viewText","Statistic"===p&&"noStat"!==h?G()(v="=".concat(h,"(")).call(v,k,")"):"=$".concat(k)),"dsType",A),S))]];E||f.push([D,{dataSource:C,dataSourceText:B?B.replace(/(\S+)\.(\S+)(\.\S+)$/g,"$2"):""}]),l.batchUpdateControlPropertyValues((0,W.createUpdateAction)(f))}else W.console.error("queryDataSourceAndAncestorByKey has no res",n,x)},B=(0,H.useCallback)((function(e){return e=R()(e).call(e,(function(e){return"Sys"!==e.DsType}))}),[p,E,f]);return K().createElement(Ad,(0,oe.c)({},e,{modalType:b,filterTreeData:B,expandedKeys:A,onSelect:"expression"===b?function(e,t){if(t)if("2"===t.curTab){var n,r=t.formulaData,i=C?{formulaData:r}:(0,M.c)((0,M.c)((0,M.c)((0,M.c)((0,M.c)((0,M.c)({},o,(0,W.getLangMsg)("printd.grid.key0003")),Y().camelCase(c),""),Y().camelCase(s),""),Y().camelCase(u),""),"dsType","Formula"),"formulaData",r);n=null!=r&&r[0]||1!==(null==r?void 0:r.length)?er(i):Md(Md({},er(i)),{},{bindText:"",dsType:""}),l.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[a,n]]))}else{var d=t.selectNode;I(d)}else{l.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[a,{bindField:"",bindText:"",dataSource:"",dsType:"",formulaData:[],viewText:""}]]))}e(!1)}:function(e,t){I(t),e(!1)},handleInputChange:function(e,t){if(e!==d){if(C)return l.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[a,er((0,M.c)((0,M.c)({},o,e),"viewText",""))]]));var n=$n(d),r=n.isBindField,f=n.bindField;if(r){var g,v=_n(f,x);if(!v)return t(!0),l.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[a,er((0,M.c)((0,M.c)((0,M.c)((0,M.c)((0,M.c)({},o,e),Y().camelCase(c),""),Y().camelCase(s),""),Y().camelCase(u),""),"dsType",""))]])),void W.console.error("queryDataSourceAndAncestorByName has no res",f,x);t(!1);var m=v.dataSource,y=v.key,w=v.viewText,k=v.dataSourceText,A=v.dsType;W.console.log("bindField, definition, res"),W.console.log(f,x,v);var b,I="Statistic"===p?(0,M.c)({},Y().camelCase(u),G()(g="=".concat(h,"(")).call(g,w,")")):(0,M.c)({},Y().camelCase(u),"=$".concat(w));b=i?[[a,er((0,M.c)((0,M.c)({},o,e),i,""))]]:[[a,er(Md((0,M.c)((0,M.c)((0,M.c)((0,M.c)({},o,e),Y().camelCase(c),y),Y().camelCase(s),m),"dsType",A),I))]],E||b.push([D,{dataSource:m,dataSourceText:k}]),l.batchUpdateControlPropertyValues((0,W.createUpdateAction)(b))}else t(!1),l.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[a,(0,M.c)({},o,e)]]))}}}))};function Rd(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Td(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?O()(n=Rd(Object(a),!0)).call(n,(function(t){(0,M.c)(e,t,a[t])})):A()?b()(e,A()(a)):O()(r=Rd(Object(a))).call(r,(function(t){B()(e,t,w()(a,t))}))}return e}var Fd,Nd=function(e){var t=e.className,n=e.scrollToKey,r=e.errorTipShow,a=e.setErrorTipShow,o=e.checkable,i=e.meta,l=e.definition,c=e.showDefinitionId,u=e.filterTreeData,s=e.onCheck,d=e.checkedKeys,f=e.checkedNodes,g=e.emptyNode,h=e.handleDelete,v=e.handleClear,p=e.setCheckedNodes,m=e.setCheckedNodeKeys,C=e.controlType,y=e.onSelect,D=f.length||0,E=(0,H.useState)(null),w=(0,S.c)(E,2),k=w[0],A=w[1],x=(0,H.useState)(!1),b=(0,S.c)(x,2),I=b[0],B=b[1],M=(0,H.useCallback)((function(e,t,n){return e[t]=la()(e).call(e,n,1,e[t])[0],e}),[]),L=function(e){e.preventDefault()},R=function(e){B(!1)};return K().createElement(K().Fragment,null,r&&K().createElement(U.Alert,{className:"".concat(t,"-alert"),message:(0,W.getLangMsg)("printd.components.key0007"),type:"error",delayOffTime:0,closable:!0,showIcon:!0,onClose:function(){return a(!1)}}),K().createElement("div",{className:t},K().createElement("div",{className:"".concat(t,"-left")},K().createElement(Jr,{controlType:C,onSelect:y,checkable:!!o&&"CardGrid"!==C,scrollToKey:n,meta:i,definition:l,showDefinitionId:c,filterTreeData:u,onCheck:s,checkedKeys:d,emptyNode:g})),"CardGrid"!==C&&K().createElement("div",{className:"".concat(t,"-right")},K().createElement("div",{className:"right-header"},K().createElement("div",{className:"total"},(0,W.getLangMsg)("printd.components.key0008"),"（",D,"）"),K().createElement("div",{className:Wn()({"clear-all":!0,disabled:0===D}),onClick:v},(0,W.getLangMsg)("printd.components.key0009"))),K().createElement("ul",{className:Wn()("checked-list",{"is-drag":I}),onDragOver:L,onDragEnter:L},F()(f).call(f,(function(e,t){return K().createElement("li",{className:Wn()("checked-item",{"is-active":k===t}),key:t,draggable:!0,onDragStart:function(e){return function(e,t){e.stopPropagation(),A(t),B(!0)}(e,t)},onDragEnd:R,onDragOver:function(e){return function(e,t){if(t!==k){var n=M(f,t,k);p(n),m(F()(n).call(n,(function(e){return e.key}))),A(t)}}(0,t)},onMouseOver:function(e){return function(e,t){A(t)}(0,t)},onMouseLeave:function(e){A(null)}},K().createElement("span",{className:"item-name"},e.ViewName||e.Name||""),K().createElement(U.Icon,{type:"close",onClick:function(){return h(e.key)}}))}))))))},Gd=function(e){var t=e.visible,n=e.onCancel,r=e.meta,a=e.definition,o=e.checkedKeys,i=void 0===o?[]:o,l=e.onSelect,c=e.emptyNode,u=(e.activedSelectId,e.controlType),s=void 0===u?"DataGrid":u,d=e.transferData,f=(0,H.useState)(!1),g=(0,S.c)(f,2),h=g[0],v=g[1],p=(0,H.useState)(!1),m=(0,S.c)(p,2),C=m[0],y=m[1],D=(0,H.useState)([]),E=(0,S.c)(D,2),w=E[0],k=E[1],A=(0,H.useState)(i),x=(0,S.c)(A,2),b=x[0],I=x[1],B=!b.length,M=(0,H.useContext)(W.DataContext),L=((0,H.useContext)(W.SelectionContext),(0,H.useContext)(W.DataFactoryContext).modelFactory,M.getRootId()),T=(M.findControl(L).language,s===ft?null==d?void 0:d.parentGridId:""),N="grid-guide",Z=(0,H.useCallback)((function(e,t){var n,r,o,i,l,c=t.checked,u=t.node;t.event;W.console.log("checkedKeys",c,e,u);var s=ar(u);W.console.log("fieldKeys--------",s,b);var d=c?G()(n=[]).call(n,(0,yn.c)(b),(0,yn.c)(s)):R()(b).call(b,(function(e){return!xn()(s).call(s,e)}));W.console.log("checkedKeys--------",d);var f=R()(r=F()(o=R()(d).call(d,Boolean)).call(o,(function(e){return Td({key:e},tr(e,a))}))).call(r,(function(e){var t=e.dataSource,n=e.Key,r=e.Items;return!r||!r.length||!(Sn()(t).call(t,n)||r&&r.length)}));W.console.log("nodes------",f,F()(i=R()(d).call(d,Boolean)).call(i,(function(e){return Td({key:e},tr(e,a))})));var g=R()(f).call(f,(function(e){return"=getRowNumber()"!==e.Key})),h=(null===(l=R()(g).call(g,(function(e){return e}))[0])||void 0===l?void 0:l.dataSource)||"",p=(0,yn.c)(new(ua())(F()(g).call(g,(function(e){return e.dataSource})))),m=p.length>1;v(m),W.console.log("nodes---------",f),f=R()(f).call(f,(function(e){return"=getRowNumber()"===e.Key||e.dataSource===h}));var C=F()(f).call(f,(function(e){return e.key}));I(C),k(f),W.console.log("checkedNodes.current",f)}),[b,I,v]),Q=function(){k([]),I([])},j=function(){v(!1),n()},J=["Entry","ReportEntry","Custom","Ref","Subentry","Workflow","Head","Main","Report","Approveline"],P=(0,H.useCallback)((function(e){if("CardGrid"===s)return kr(J)(e);if(s===ft){var t,n=M.findControl(T).dataSource,r=(null===(t=rr(e,(function(e){if(e.dataSource===n)return!0})))||void 0===t?void 0:t.SubEntryList)||[];return e=mr(e),Cr(e,r)}var a=null==d?void 0:d.subGridId;if(null!=a&&a.length){var o=d.dataSource;return Cr(e,o)}var i=pr(e);try{var l,c,u=null==i||null===(l=Hn()(i).call(i,(function(e){return"Ref"===e.DsType})))||void 0===l||null===(l=Hn()(c=l.Items).call(c,(function(e){return"Workflow"===e.DsType})))||void 0===l?void 0:l.Items;if((null==u?void 0:u.length)>1){var f=de()(u).call(u,(function(e){return"Approveactivity"===e.DsType}));-1!==f&&la()(u).call(u,f,1)}}catch(e){}return i}),[s]);(0,H.useEffect)((function(){}),[b]),(0,H.useEffect)((function(){if(t)if(Ar(a,null==d?void 0:d.dataSource)||"CardGrid"===s){I(i);var e=F()(i).call(i,(function(e){return Td({key:e},tr(e,a))}));k(e)}else Q()}),[t,a.length,null==d?void 0:d.dataSource,s]);var O=K().createElement(K().Fragment,null,K().createElement(U.Checkbox,{className:"".concat(N,"-modal-footer-checkbox"),checked:C,onChange:function(e){var t=!!e.target.checked;y(t)}},(0,W.getLangMsg)("printd.grid.key0101")),K().createElement("div",{className:"".concat(N,"-modal-footer-btns")},K().createElement(U.Button,{onClick:j,type:"second",className:"".concat(N,"-modal-cancel-btn")},(0,W.getLangMsg)("printd.components.key0011")),K().createElement(U.Button,{className:"".concat(N,"-modal-ok-btn"),type:"primary",disabled:B,onClick:function(){l(w,s)}},(0,W.getLangMsg)("printd.components.key0012"))));return K().createElement(U.Modal,{body:K().createElement(Nd,{checkable:!0,className:"".concat(N,"-body"),errorTipShow:h,setErrorTipShow:v,meta:r,definition:a,showDefinitionId:C,filterTreeData:P,onCheck:Z,checkedKeys:b,checkedNodes:w,handleDelete:function(e){k((function(t){return R()(t).call(t,(function(t){return t.key!==e}))})),I((function(t){return R()(t).call(t,(function(t){return t!==e}))}))},handleClear:Q,emptyNode:c,setCheckedNodes:k,setCheckedNodeKeys:I,controlType:s,onSelect:function(e){k(e),I(e.key)}}),titleIcon:null,maskClosable:!1,className:"".concat(N,"-modal"),footer:O,width:688,height:500,title:(0,W.getLangMsg)("printd.components.key0013"),closable:!0,destroyOnClose:!0,onCancel:j,onOk:j,mask:!0,visible:t})},Zd=n(1508),Qd=n.n(Zd),jd=n(7224),Jd=n.n(jd);function Pd(){if(Fd)return Fd;if(Fd={},null!=window.screen.deviceXDPI)Fd.x=window.screen.deviceXDPI,Fd.y=window.screen.deviceYDPI;else{var e=document.createElement("div");e.style.cssText="width:1in;height:1in;position:absolute;left:0;top:0;z-index:0;visibility:hidden",document.body.appendChild(e),Fd.x=_l()(e.offsetWidth),Fd.y=_l()(e.offsetHeight),e.parentNode.removeChild(e)}return Fd}var Od=function(){return zd(1,"x",arguments.length>0&&void 0!==arguments[0]?arguments[0]:1)},Ud=function(e){var t=arguments.length>2?arguments[2]:void 0;return Hd(e*zd(1,"x",arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),null!=t?t:1)},Wd=function(e){var t=arguments.length>2?arguments[2]:void 0;return Hd(e/zd(1,"x",arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),null!=t?t:1)};function zd(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"mm";"string"==typeof e&&(t=e.substr(e.length-2,2)),t=t||a,e=Jd()(e);var o=Pd()[n];switch(t){case"cm":return Hd(e*o/2.54,1)*r;case"mm":return Hd(e*o/25.4,1)*r;default:return e*r}}function Hd(e,t){if(!t)return e;var n=Math.pow(10,t);return Math.round(e*n)/n}function Kd(e,t){if(!t)return e;var n=Math.pow(10,t);return Math.floor(e*n)/n}var Vd=["fontSize","width","height"],Yd=function(e){var t;return Q()(t=m()(e)).call(t,(function(t,n){if(e.lineSpace)return t[n]=e[n],t;var r=Hn()(Vd).call(Vd,(function(t){return null==e?void 0:e[t]}))?2:1;return t[n]=Y().isNumber(e[n])?Hd(e[n],r):e[n],t}),{})},qd=function(e){var t;return"PrintMetadata"!==(null===(t=e.getData())||void 0===t?void 0:t.type)},Xd=n(6908),_d=n.n(Xd);function $d(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function ef(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?O()(n=$d(Object(a),!0)).call(n,(function(t){(0,M.c)(e,t,a[t])})):A()?b()(e,A()(a)):O()(r=$d(Object(a))).call(r,(function(t){B()(e,t,w()(a,t))}))}return e}var tf=function(e){var t=e.columns,n=e.rows;return function(e){var r=e.row,a=e.column;return{x:of(kn()(t).call(t,0,a)),y:of(kn()(n).call(n,0,r)),width:t[a].columnWidth,height:n[r].rowHeight}}},nf=tf,rf=function(e,t){var n;return G()(n="".concat(e,"-")).call(n,t)},af=function(e){return function(t,n){return t*e+n}},of=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.length?Hd(Q()(e).call(e,(function(e,n){return"DataRow"===n.type?n.rowType===Et?e+n.rowHeight+t:e+n.rowHeight:e+n.columnWidth}),0),1):0},lf=function(e){var t,n,r,a,o=e.columns,i=e.rows,l=e.cells,c=e.mergeConfig,u=e.templateRowCount,s=e.fixedRowAtPage,d=e.allItems,f=void 0===d?[]:d,g=e.gridData,h=Y().cloneDeep(f),v=[],p=F()(t=Qd()(n=new Array(i.length)).call(n,0)).call(t,(function(){return{cells:[],row:{}}})),C=o.length,y=i.length,D=Y().cloneDeep(l),E={},w=tf({columns:o,rows:i}),k=af(C);O()(r=m()(c)).call(r,(function(e){for(var t=e.split("-"),n=(0,S.c)(t,2),r=(n[0],n[1],c[e]),a=r.rowStart,o=r.rowLength,i=r.columnStart,l=r.columnLength,u=a;u<a+o;u++)for(var s=i;s<i+l;s++)D[k(u,s)].mergeConfig=c[e]})),O()(D).call(D,(function(e,t){var n=e.row,r=e.column,a=e.border,o=void 0===a?DEFUALT_BORDER_DATA:a,l=e.id;if(e.mergeConfig){var c=e.mergeConfig,u=c.rowStart,s=c.columnStart,d=(c.rowLength,c.columnLength,rf(u,s));if(d in E){var f=E[d],g=w({row:n,column:r}),m=g.width,C=g.height;n!==u&&r===s&&(v[f].height+=C),r!==s&&n===u&&(v[f].width+=m)}else{var y=ef(ef(ef({},e),w({row:n,column:r})),{},{cellKey:rf(n,r),border:o,childItems:(null==h?void 0:R()(h).call(h,(function(e){return e.parentId===l})))||[]});v.push(y),p[n]=p[n]||{cells:[]},p[n].row=i[n],p[n].cells.push(y),E[d]=v.length-1}}else{var D=ef(ef(ef({},e),w({row:n,column:r})),{},{cellKey:rf(n,r),border:o});v.push(D),p[n]=p[n]||{cells:[]},p[n].row=i[n],p[n].cells.push(D)}})),W.console.log("cellDataWithMergeCell",p,v,E);var A=[],x=-1,b=0,I=-1;if(s&&u>1){x=de()(p).call(p,(function(e){return e.row.rowType===Et}));var B=p[x];if(B){var M,L,T=B.cells,N=B.row.rowHeight;if(b=N*(u-1),T)A=F()(M=Qd()(L=new Array(u-1)).call(L,0)).call(M,(function(e,t){return F()(T).call(T,(function(e){var n=e.y+N*(t+1);return 0===t&&(I=n),(0,oe.c)({},e,bt,{y:n})}))}))}}if(x>-1&&0!==b&&O()(p).call(p,(function(e,t){var n=e.cells;t>x&&O()(n).call(n,(function(e){(0,oe.c)(e,{y:e.y+b})}))})),g&&A.length&&-1!==x&&!xn()(a=[Zt,Gt]).call(a,g[Rt])){var Z,Q,j=Y().cloneDeep(p[x]);O()(Z=j.cells).call(Z,(function(e){e.row=0})),O()(A).call(A,(function(e,t){O()(e).call(e,(function(e){e.row=t+1}))}));var J=Hf(g,G()(Q=[j]).call(Q,(0,yn.c)(F()(A).call(A,(function(e){return{cells:e}})))),u,C).newRowData;if(J){var P,U,z,H=Vf(g[Ue]),K=(0,S.c)(H,4),V=K[0],q=K[1],X=K[2],_=K[3],$=V;if(0!==x){var ee,te,ne;if(xn()($).call($,Tt))O()(ee=J[0].cells).call(ee,(function(e){e[Ue]=mf(e[Ue],jt,_,q,X)}));if(xn()($).call($,jt))O()(te=J[0].cells).call(te,(function(e){e[Ue]=mf(e[Ue],jt,0,q,X)}));if(xn()($).call($,Ft))O()(ne=J[0].cells).call(ne,(function(e){e[Ue]=mf(e[Ue],jt,0,q,X)}))}if(x!==y-1){var re,ae;if(xn()($).call($,Tt),xn()($).call($,Pt))O()(re=J[J.length-1].cells).call(re,(function(e){e[Ue]=mf(e[Ue],Pt,0,q,X)}));if(xn()($).call($,Ft))O()(ae=J[J.length-1].cells).call(ae,(function(e){e[Ue]=mf(e[Ue],Pt,0,q,X)}))}return{originCells:D,rowData:G()(P=G()(U=kn()(p).call(p,0,x)).call(U,J[0])).call(P,kn()(p).call(p,x+1)),templateRowData:F()(z=kn()(J).call(J,1)).call(z,(function(e){return e.cells})),templateRowHeight:b,templateRowIndex:x,templateRowY:I,rowCount:y,columnCount:C}}}return{originCells:D,rowData:p,templateRowData:A,templateRowHeight:b,templateRowIndex:x,templateRowY:I,rowCount:y,columnCount:C}},cf=Y().memoize((function(e){var t,n,r,a,o=Q()(t=Y().cloneDeep(e)).call(t,(function(e,t){var n=t.type;t.id;switch(n){case"DataRow":return e.rows.push(t),e;case"DataColumn":return e.columns.push(t),e;default:return e.cells.push(t),e}}),{columnData:{},rowData:{},cells:[],columns:[],rows:[]}),i=(o.columns.length,o.rows),l=o.columns;return O()(n=o.cells).call(n,(function(e,t){e.id;var n=e.rowId,r=e.columnId,a=de()(i).call(i,(function(e){return e.id===n})),c=de()(l).call(l,(function(e){return e.id===r}));o.cells[t]=ef(ef({},e),{},{row:a,column:c}),o.rowData[a]=o.rowData[a]||[],o.rowData[a].push(e),o.columnData[c]=o.columnData[c]||[],o.columnData[c].push(e)})),_d()(r=o.cells).call(r,(function(e,t){var n=e.row,r=e.column,a=t.row,o=t.column;return n-a==0?r-o:n-a})),W.console.log("originCells",o.cells),W.console.log("originCells id",F()(a=o.cells).call(a,(function(e){return{row:e.row,column:e.column}}))),o.rowCount=i.length,o.columnCount=l.length,o}),J()),uf=function(e,t,n){var r={};return Q()(t).call(t,(function(t,a){var o=a.rowId,i=a.columnId,l="height"===n?o:i;return r[l]?(r[l]=!0,Hd(t,1)):(r[l]=!0,Hd(t+e.findControl(l)["height"===n?Ot:Ut],1))}),0)},sf=function(e){var t=e.isMultiSelected,n=e.field,r=e.dataContext,a=e.selectionContext,o=e.propName,i=(n.id,n.parentId),l=n.rowId,c=n.columnId,u=a.getSelection();if(t){var s=F()(u).call(u,(function(e){return r.findControl(e)})),d=R()(s).call(s,yf);if(d.length===s.length&&("width"===o||"height"===o)){var f=F()(d).call(d,(function(e){return df({dataContext:r,field:e})[o]}));return 1===new(ua())(f).size?f[0]:""}return 1===new(ua())(F()(s).call(s,(function(e){return e[o]}))).size?n[o]:""}if(yf(n)&&("width"===o||"height"===o)){var g,h,v,p,m=r.findControl(i);if(m.mergeConfig){var C=qf({items:r.getData().items,gridData:m,rowId:l,columnId:c});if(C.length)return uf(r,C,o)}return"width"===o?null!==(g=null===(h=r.findControl(c))||void 0===h?void 0:h.columnWidth)&&void 0!==g?g:"":null!==(v=null===(p=r.findControl(l))||void 0===p?void 0:p.rowHeight)&&void 0!==v?v:""}return n[o]},df=function(e){var t=e.field,n=e.dataContext,r=(t.id,t.parentId),a=t.rowId,o=t.columnId;if(yf(t)){var i=n.findControl(r);if(i.mergeConfig){var l=qf({items:n.getData().items,gridData:i,rowId:a,columnId:o});if(l.length)return{width:uf(n,l,"width"),height:uf(n,l,"height")};var c=n.findControl(a);return{width:n.findControl(o).columnWidth,height:c.rowHeight}}}};function ff(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function gf(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?O()(n=ff(Object(a),!0)).call(n,(function(t){(0,M.c)(e,t,a[t])})):A()?b()(e,A()(a)):O()(r=ff(Object(a))).call(r,(function(t){B()(e,t,w()(a,t))}))}return e}function hf(e,t){return Q()(lt).call(lt,(function(n,r){return t&&t(n,r)||(n[r]=e),n}),{})}var vf=function(e,t,n,r){var a,o,i=xn()(a=["dashed","dotted"]).call(a,r)?.5:n===Nt?2:r,l=xn()(o=["dashed","dotted"]).call(o,r)?r:"solid";return pf(e,n,t,i,l)},pf=function(e,t,n,r,a){var o=Y().cloneDeep(e);switch(t){case Zt:o.width.left=0,o.width.right=0,o.width.top=0,o.width.bottom=0,o.width.inner=0;break;case Qt:o.width.left=r,o.color.left=n,o.style.left=a;break;case Jt:o.width.right=r,o.color.right=n,o.style.right=a;break;case jt:o.color.top=n,o.width.top=r,o.style.top=a;break;case Pt:o.color.bottom=n,o.width.bottom=r,o.style.bottom=a;break;case Tt:o.color.inner=n,o.width.inner=r,o.style.inner=a;break;default:o.width=Q()(lt).call(lt,(function(e,n){return"inner"===n&&t!==Gt||(e[n]=r),e}),{}),o.color=Q()(lt).call(lt,(function(e,r){return"inner"===r&&t!==Gt||(e[r]=n),e}),{}),o.style=Q()(lt).call(lt,(function(e,n){return"inner"===n&&t!==Gt||(e[n]=a),e}),{})}return o},mf=function(e,t,n,r,a,o,i){var l=Y().cloneDeep(e);if(n&&!i&&(l.width=hf(n||.5,(function(e,t){if(!l.width[t])return e[t]=l.width[t],!0}))),r&&(l.color=hf(r)),a&&(l.style=hf(a)),!t)return l;var c=Y().isUndefined(n)?l.width.top||l.width.left||l.width.right||l.width.bottom||l.width.inner||.5:n,u=Y().isUndefined(a)?l.style.top||l.style.left||l.style.right||l.style.bottom||l.style.inner:a,s=Y().isUndefined(r)?l.color.top||l.color.left||l.color.right||l.color.bottom||l.color.inner:r;switch(t){case Zt:o?(l.width.left=0,l.width.right=0,l.width.top=0,l.width.bottom=0,void 0===l.width.inner&&(l.width.inner=0)):l.width=Q()(lt).call(lt,(function(e,t){return e[t]=0,e}),{});break;case Qt:var d=c,f=s,g=u;l.width.left=d,l.color.left=f,l.style.left=g;break;case Jt:var h=c,v=s,p=u;l.color.right=v,l.width.right=h,l.style.right=p;break;case jt:var m=c,C=s,y=u;l.color.top=C,l.width.top=m,l.style.top=y;break;case Pt:var D=c,E=s,w=u;l.color.bottom=E,l.width.bottom=D,l.style.bottom=w;break;case Gt:var k=c,A=s,x=u;l.width=Q()(lt).call(lt,(function(e,t){return e[t]=k,e}),{}),l.color=Q()(lt).call(lt,(function(e,t){return e[t]=A,e}),{}),l.style=Q()(ct).call(ct,(function(e,t){return e[t]=x,e}),{});break;case Tt:var b=c,I=s,B=u;l.color.inner=I,l.width.inner=b,l.style.inner=B;break;default:var S=c,M=s,L=u;l.width=(0,oe.c)(l.width,Q()(ct).call(ct,(function(e,t){return e[t]=S,e}),{})),l.color=(0,oe.c)(l.color,Q()(ct).call(ct,(function(e,t){return e[t]=M,e}),{})),l.style=(0,oe.c)(l.style,Q()(ct).call(ct,(function(e,t){return e[t]=L,e}),{}))}return l},Cf=function e(t,n){var r=Y().cloneDeep(t);if(Jn()(n))return Q()(n).call(n,(function(t,n){return e(t,n)}),r);switch(n){case Qt:r.width.left=0;break;case Jt:r.width.right=0;break;case jt:r.width.top=0;break;case Pt:r.width.bottom=0;break;default:return r}return r},yf=function(e){return xn()(yt).call(yt,null==e?void 0:e.type)},Df=function(e){return xn()(pt).call(pt,null==e?void 0:e.type)},Ef=function(e){return"DataGrid"===e.type},wf=function(e){return(null==e?void 0:e.type)===ft},kf=function(e){return"CardGrid"===e.type},Af=function(e){var t=e.findControl(e.getRootId()),n=t.width-t.marginLeft-t.marginRight,r=t.height-t.marginTop-t.marginBottom;return{x:0,y:0,width:n,height:r,left:0,top:0,right:n,bottom:r}},xf=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.x,a=void 0===r?0:r,o=n.y,i=void 0===o?0:o,l=e.findControl(t),c=l.width,u=l.height,s=l.x,d=l.y;return{x:s+=a,y:d+=i,width:c,height:u,left:s,top:d,right:s+c,bottom:d+u}},bf=function(e){return xn()(mt).call(mt,e.type)},If=function(e){return xn()(Ct).call(Ct,e.type)},Bf=function(e){return e.rowType===Et},Sf=function(e){if(!e)return!1;var t=e.type,n=e.cellType;return"DataCell"===t&&"Detail"===n},Mf=function(e){return e.rowType===xt},Lf=function(e){return!!e&&"LayoutCell"===e.type},Rf=function(e){return"TableTail"===e.type},Tf=function(e){return!!e&&"DataCell"===e.type},Ff=function(e){if(!e)return!1;var t=e.type;return"LayoutGrid"===t||"CardGrid"===t},Nf=function(e,t){var n=e.getData().items;return{items:R()(n).call(n,(function(e){return e.parentId===t})),gridData:Hn()(n).call(n,(function(e){return e.id===t})),allItems:n}},Gf=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return Q()(t).call(t,(function(t,r,a){return(n[a]||r)&&(t[n[a]||r]=e[r]),t}),{})},Zf=function(e){var t,n={};O()(e).call(e,(function(e){var t=(0,S.c)(e,2),r=t[0],a=t[1];n[r]=n[r]||[],n[r].push(a)}));var r={};return R()(t=F()(e).call(e,(function(e){var t,a=(0,S.c)(e,2),o=a[0];a[1];if(!r[o])return r[o]=!0,[o,Q()(t=n[o]).call(t,(function(e,t){return(0,oe.c)(e,Yd(t))}),{})]}))).call(t,Boolean)},Qf=function(e){var t=e.mergeConfig,n=e.row,r=e.column,a=n,o=r;t&&(a+=t.rowLength-1,o+=t.columnLength-1);return a===n&&(a=null),o===r&&(o=null),{realRowIdx:n,realCellIdx:r,rightRowIdx:a,bottomCellIdx:o}},jf=function(e){e.rowIdx,e.cellIdx;var t,n,r=e.cell,a=(e.cells,e.borderConfig),o=e.handleBorderTypes,i=e.columnLength,l=Qf(r),c=l.realCellIdx,u=l.bottomCellIdx,s=a.borderColor,d=a.borderStyle,f=a.borderWidth,g=(0,S.c)(o,3),h=g[0],v=g[1],p=g[2];xn()(t=[c,u]).call(t,0)&&(r[Ue]=Q()(h).call(h,(function(e,t){return mf(e,t,f,s,d,!1,!0)}),r[Ue])),xn()(n=[c,u]).call(n,i-1)&&(r[Ue]=Q()(p).call(p,(function(e,t){return mf(e,t,f,s,d,!1,!0)}),r[Ue])),(0!==c||u!==i-1||(0,V.isNumber)(u)&&u!==i-1)&&(r[Ue]=Q()(v).call(v,(function(e,t){return mf(e,t,f,s,d,!1,!0)}),r[Ue]))},Jf=function e(t,n,r,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];if(0===n.length)return null;if(Jn()(t))return Q()(t).call(t,(function(t,n){return e(n,t,r,a,o)}),n);var i=r.borderColor,l=r.borderStyle,c=r.borderWidth,u=a.rowLength,s=a.columnLength;switch(t){case Gt:return O()(n).call(n,(function(e,t,n){var r=e.cells;O()(r).call(r,(function(e,t,n){var r,a,o,d,f,g,h=Qf(e),v=h.realRowIdx,p=h.realCellIdx,m=h.rightRowIdx,C=h.bottomCellIdx;xn()(r=[v,m]).call(r,u-1)?xn()(a=[p,C]).call(a,s-1)?e[Ue]=mf(e[Ue],Ft,c,i,l):(e[Ue]=Cf(e[Ue],Jt),e[Ue]=Q()(o=[Qt,jt,Pt]).call(o,(function(e,t){return mf(e,t,c,i,l)}),e[Ue])):xn()(d=[p,C]).call(d,s-1)?(e[Ue]=Cf(e[Ue],Pt),e[Ue]=Q()(f=[Qt,jt,Jt]).call(f,(function(e,t){return mf(e,t,c,i,l)}),e[Ue])):(e[Ue]=Cf(e[Ue],[Pt,Jt]),e[Ue]=Q()(g=[Qt,jt]).call(g,(function(e,t){return mf(e,t,c,i,l)}),e[Ue]))}))})),n;case Ft:for(var d=0;d<n.length;d++)for(var f=n[d].cells,g=0;g<f.length;g++){var h,v,p=f[g],m=Qf(p),C=m.realRowIdx,y=(m.realCellIdx,m.rightRowIdx);m.bottomCellIdx;xn()(h=[C,y]).call(h,0)&&jf({rowIdx:d,cellIdx:g,cell:p,cells:f,borderConfig:r,handleBorderTypes:[[Qt,jt],[jt],[Jt,jt]],columnLength:s}),xn()(v=[C,y]).call(v,u-1)&&jf({rowIdx:d,cellIdx:g,cell:p,cells:f,borderConfig:r,handleBorderTypes:[[Qt,Pt],[Pt],[Jt,Pt]],columnLength:s}),(0!==C||C!==u-1||(0,V.isNumber)(y)&&y!==u-1)&&jf({rowIdx:d,cellIdx:g,cell:p,cells:f,borderConfig:r,handleBorderTypes:[[Qt],[],[Jt]],columnLength:s})}return n;case Zt:return O()(n).call(n,(function(e,t,n){var r=e.cells;O()(r).call(r,(function(e,t,n){e[Ue]=mf(e[Ue],Zt,c,i,l,!0)}))})),n;case Qt:return O()(n).call(n,(function(e,t,n){var r=e.cells;O()(r).call(r,(function(e,t,n){var r=Qf(e),a=(r.realRowIdx,r.realCellIdx),o=r.rightRowIdx;r.bottomCellIdx;0!==a&&0!==o||(e[Ue]=mf(e[Ue],Qt,c,i,l))}))})),n;case jt:var D=n[0].cells;return O()(D).call(D,(function(e){e[Ue]=mf(e[Ue],jt,c,i,l)})),n;case Jt:return O()(n).call(n,(function(e,t,n){var r=e.cells;O()(r).call(r,(function(e){var t,n=Qf(e),r=(n.realRowIdx,n.realCellIdx),a=(n.rightRowIdx,n.bottomCellIdx);xn()(t=[r,a]).call(t,s-1)&&(e[Ue]=mf(e[Ue],Jt,c,i,l))}))})),n;case Pt:return O()(n).call(n,(function(e,t,n){var r=e.cells;O()(r).call(r,(function(e){var t,n=Qf(e),r=n.realRowIdx,a=(n.realCellIdx,n.rightRowIdx);n.bottomCellIdx;xn()(t=[r,a]).call(t,u-1)&&(e[Ue]=mf(e[Ue],Pt,c,i,l))}))})),n;case Tt:return O()(n).call(n,(function(e,t,n){var r=e.cells;O()(r).call(r,(function(e,t,n){var r,a,o,u,s=Qf(e),d=s.realRowIdx,f=s.realCellIdx,g=s.rightRowIdx,h=s.bottomCellIdx;xn()(r=[d,g]).call(r,0)?xn()(a=[f,h]).call(a,0)||(e[Ue]=mf(e[Ue],Qt,c,i,l)):xn()(o=[f,h]).call(o,0)?e[Ue]=mf(e[Ue],jt,c,i,l):e[Ue]=Q()(u=[Qt,jt]).call(u,(function(e,t){return mf(e,t,c,i,l)}),e[Ue])}))})),n;default:W.console.error("unreachable action error")}},Pf=function(e,t,n,r,a){return O()(n).call(n,(function(e,n,o){var i=e.cells;O()(i).call(i,(function(e,n,o){var i,l,c,u=Qf(e),s=u.realRowIdx,d=u.realCellIdx,f=u.rightRowIdx,g=u.bottomCellIdx,h=Hn()(t).call(t,(function(t){return t.id===e.id}));(h&&(e[Ue]=h[Ue]),xn()(i=[s,f]).call(i,r-1))?xn()(l=[d,g]).call(l,a-1)||(e[Ue]=Cf(e[Ue],Jt)):xn()(c=[d,g]).call(c,a-1)?e[Ue]=Cf(e[Ue],Pt):e[Ue]=Cf(e[Ue],[Pt,Jt])}))})),n},Of=function(e,t,n,r,a){return O()(n).call(n,(function(e,n,o){var i=e.cells;O()(i).call(i,(function(e,n,o){var i,l,c=Qf(e),u=c.realRowIdx,s=c.realCellIdx,d=c.rightRowIdx,f=c.bottomCellIdx,g=Hn()(t).call(t,(function(t){return t.id===e.id}));if(g&&(e[Ue]=g[Ue]),xn()(i=[u,d]).call(i,r-1)){var h=Y().findLast(t,(function(e){return"DataRow"===e.type}));if(h&&h.id!==e.rowId){var v,p=Hn()(t).call(t,(function(t){return t.rowId===h.id&&t.columnId===e.columnId})).border;if(null!=p&&null!==(v=p.width)&&void 0!==v&&v.bottom){var m=Vf(e[Ue])[1],C=Vf(e[Ue])[2],y=Vf(e[Ue])[3];e[Ue]=mf(e[Ue],Pt,y,m,C)}}}if(xn()(l=[s,f]).call(l,a-1)){var D=Y().findLast(t,(function(e){return"DataColumn"===e.type}));if(D&&D.id!==e.columnId){var E,w=Hn()(t).call(t,(function(t){return t.columnId===D.id&&t.rowId===e.rowId})).border;if(null!=w&&null!==(E=w.width)&&void 0!==E&&E.right){var k=Vf(e[Ue])[1],A=Vf(e[Ue])[2],x=Vf(e[Ue])[3];e[Ue]=mf(e[Ue],Jt,x,k,A)}}}}))})),n},Uf=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=Y().cloneDeep(e),o=a.borderType,i=a.border,l=a.mergeConfig,c=void 0===l?{}:l,u=(r?function(e){return e}:Y().cloneDeep)(R()(t).call(t,(function(t){return t.parentId===e.id}))),s=cf(u),d=s.columns,f=s.rows,g=s.cells,h=lf(gf(gf({columns:d,rows:f,cells:g},a),{},{mergeConfig:c})).rowData,v=Yf(i,o,h,f.length,d.length),p=[];v&&O()(n=Q()(v).call(v,(function(e,t){return G()(e).call(e,t.cells)}),[])).call(n,(function(e){var t=e.id,n=e.border,a=Hn()(u).call(u,(function(e){return e.id===t}));a&&r&&(a.border=n,p.push([a.id,{border:n}]))}));return p},Wf=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Y().cloneDeep(e),a=(r.borderType,r.border,r.mergeConfig),o=void 0===a?{}:a,i=(0,Y().cloneDeep)(R()(t).call(t,(function(t){return t.parentId===e.id}))),l=cf(i),c=l.columns,u=l.rows,s=l.cells,d=lf(gf(gf({columns:c,rows:u,cells:s},r),{},{mergeConfig:o})).rowData,f=[];f=n?Pf(0,i,d,u.length,c.length):Of(0,i,d,u.length,c.length);var g,h=[];f&&O()(g=Q()(f).call(f,(function(e,t){return G()(e).call(e,t.cells)}),[])).call(g,(function(e){var t=e.id,n=e.border,r=Hn()(i).call(i,(function(e){return e.id===t}));r&&h.push([r.id,{border:n}])}));return h},zf=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Y().cloneDeep(e),o=a.borderType,i=a.border,l=a.mergeConfig,c=void 0===l?{}:l,u=(0,Y().cloneDeep)(R()(t).call(t,(function(t){return t.parentId===e.id}))),s=R()(n).call(n,(function(t){return t.parentId===e.id})),d=cf(u),f=d.columns,g=d.rows,h=d.cells,v=lf(gf(gf({columns:f,rows:g,cells:h},a),{},{mergeConfig:c})).rowData,p=Yf(i,o,v,g.length,f.length);p=r?Of(0,s,v,g.length,f.length):Pf(0,n,v,g.length,f.length);var m,C=[];p&&O()(m=Q()(p).call(p,(function(e,t){return G()(e).call(e,t.cells)}),[])).call(m,(function(e){var t=e.id,n=e.border,r=Hn()(u).call(u,(function(e){return e.id===t}));r&&(r.border=n,C.push([r.id,{border:n}]))}));return C},Hf=function(e,t,n,r){var a=e.borderType,o=e.border;e.mergeConfig;return{newRowData:Yf(o,a,t,n,r)}},Kf=[ln,cn,un],Vf=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=ue()(n.width||{}),a=n.width||{},o=a.left,i=a.right,l=a.top,c=a.bottom,u=!a.inner&&o&&i&&l&&c,s=(ue()(n.color||{}),ue()(n.style||{}),R()(r).call(r,Boolean).length);if(0===s)return[[Zt]];if(5===s)return[[Gt],n.color.top,n.style.top,+(null!==(e=Hn()(Kf).call(Kf,(function(e){return+e===n.width.top})))&&void 0!==e?e:ln)];if(u)return[[Ft],n.color.top,n.style.top,+(null!==(t=Hn()(Kf).call(Kf,(function(e){return+e===n.width.top})))&&void 0!==t?t:ln)];var d=[];return n.width.top&&d.push(jt),n.width.left&&d.push(Qt),n.width.right&&d.push(Jt),n.width.bottom&&d.push(Pt),n.width.inner&&d.push(Tt),[d,n.color.top||n.color.bottom||n.color.left||n.color.right||n.color.inner,n.style.top||n.style.bottom||n.style.left||n.style.right||n.style.inner,+(n.width.top||n.width.bottom||n.width.left||n.width.right||n.width.inner||ln)]},Yf=Y().memoize((function(e,t,n,r,a){var o=Vf(e),i=(0,S.c)(o,4),l=i[0],c=i[1],u=i[2],s=i[3],d=xn()(l).call(l,Tt)?[Tt]:l,f=Jf(d,Y().cloneDeep(n),{borderColor:c,borderStyle:u,borderWidth:s},{rowLength:r,columnLength:a},R()(l).call(l,(function(e){return e!==Tt})));return f}),(function(e,t,n,r,a){return J()({value:e,type:t,rowData:n,rowLength:r,columnLength:a})})),qf=function(e){var t,n=e.items,r=e.rowId,a=e.columnId,o=e.gridData,i=Y().cloneDeep(o),l=(i.borderType,i.border,i.mergeConfig),c=void 0===l?{}:l;if(Y().isEmpty(c))return[];var u=R()(n).call(n,(function(e){return e.parentId===o.id})),s=cf(u),d=s.columns,f=s.rows,g=s.cells,h=s.columnCount,v=af(h),p=G()(t="".concat(de()(f).call(f,(function(e){return e.id===r})),"_")).call(t,de()(d).call(d,(function(e){return e.id===a}))),m=[];if(c[p])for(var C=c[p],y=C.rowStart,D=C.rowLength,E=C.columnStart,w=C.columnLength,k=y;k<y+D;k++)for(var A=E;A<E+w;A++){var x=g[v(k,A)];x.rowId!==r&&x.columnId!==a||m.push(x)}return m},Xf=function(e,t){var n=Q()(e).call(e,(function(e,t){return e+t}),0),r=t-n;return F()(e).call(e,(function(t){return Kd(t+(0===n?r/e.length:r*t/n),1)}))},_f=function(e,t){if((null==e?void 0:e.length)>1){var n=Q()(e).call(e,(function(e,t){return e+t}),0);e[e.length-1]=e[e.length-1]+Kd(t-n,1)}return e};var $f=function(e,t,n,r){return function(a,o){for(var i=a,l=e;l<=t;l++){i=o(i,n[r(l,a)])}return i}};function eg(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function tg(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?O()(n=eg(Object(a),!0)).call(n,(function(t){(0,M.c)(e,t,a[t])})):A()?b()(e,A()(a)):O()(r=eg(Object(a))).call(r,(function(t){B()(e,t,w()(a,t))}))}return e}var ng=function(e){e.Name;var t,n=e.id,r=e.dataContext,a=e.value,o=e.field,i=e.className,l=e.selectionContext,c=e.Name,u=e.Tips,s=e.Editor,d=(void 0===s?{}:s).NameHidden,f=(0,H.useState)(!1),g=(0,S.c)(f,2),h=g[0],v=g[1],p=(0,H.useState)([]),C=(0,S.c)(p,2),y=C[0],D=C[1],E=(0,H.useContext)(pn),w=E.meta,k=E.definition,A=E.setMessage,x=r.getRootId(),b=(Y().last(G()(t=[x]).call(t,(0,yn.c)(l.getSelection()))),(0,H.useContext)(W.GlobalConfigContext).invokePrintDesignerCustomEvent),I=(0,H.useCallback)((function(e){b("clickTipsLink",e)}),[b]);return K().createElement(K().Fragment,null,K().createElement(W.NameTipWrapper,{nameHidden:d,className:i,name:c,tips:u,onLinkClick:I}),K().createElement("div",{className:"".concat(i,"-query"),onClick:function(){var e,t=o.id,n=r.findControlByCondition((function(e){return e.parentId===t&&"Detail"===e.cellType})),a=R()(e=F()(n).call(n,(function(e){var t=e.bindField,n=e.dataSource;return qn(n,t)}))).call(e,Boolean);D(a),v(!0)}},K().createElement("div",{className:Wn()(["".concat(i,"-query-text"),(0,M.c)({},"".concat(i,"-query-text-empty"),!a)])},a||(0,W.getLangMsg)("printd.grid.key0008")),K().createElement("div",{className:"".concat(i,"-query-btn")},K().createElement(U.Icon,{type:"more",style:{cursor:"pointer"}}))),K().createElement(Gd,{activedSelectId:n,meta:w,definition:k,visible:h,onCancel:function(){return v(!1)},onSelect:function(e,t){if("CardGrid"===t){var a=(null==e?void 0:e.key)||[],i=Yn(null==a?void 0:a[0],k);if(!i)return;var c=i.dataSource,u=i.dataSourceText,s=i.dsType,d=i.IgnoreZero,f=i.IgnoreTailZero,g=[n,{dataSource:c,dataSourceText:u,dsType:s,methodName:"switchDataSource",ignoreZero:d,ignoreTailZero:f}],h=o.tableTailId;return r.batchUpdateControlPropertyValues((0,W.createCustomUpdateAction)(g)).then((function(){h&&r.deleteControl((0,W.createDeleteAction)(h))})),void v(!1)}var p=r.findControl(x);if((p.width-p.marginLeft-p.marginRight)/e.length<5)return A((0,W.getLangMsg)("printd.grid.key0004"));var C,D=F()(e).call(e,(function(e){var t,n=e.key,r=e.InitAttr,a=void 0===r?{}:r,o=Yn(n,k);if(!o)return{};var i=o.dataSource,l=o.ancestorTitle,c=o.key,u=o.title,s=o.dsType,d=o.IgnoreZero,f=o.IgnoreTailZero,g=Q()(t=m()(a)).call(t,(function(e,t){return e[Y().camelCase(t)]=a[t],e}),{});return g.ignoreZero=d,g.ignoreTailZero=f,tg({bindText:"=$".concat(l),bindField:c,dataSource:i,viewText:"=$".concat(u),dsType:s},g)})),E=F()(D).call(D,(function(e){return qn(e.dataSource,e.bindField)}));if(!(C=y,E.join("")===C.join(""))){l.setSelect([]);var w=o.tableTailId;r.batchUpdateControlPropertyValues((0,W.createCustomUpdateAction)([n,{dataSource:D}])).then((function(e){w&&r.deleteControl((0,W.createDeleteAction)(w));var t=e[1].value;l.setSelect(Jn()(t)?[t[0].id]:[t.id])}))}v(!1)},checkedKeys:y,controlType:o.type,transferData:o}))},rg=function(e){e.Name,e.id;var t,n=e.dataContext,r=e.value,a=e.field,o=e.className,i=e.Name,l=e.Tips,c=e.Editor,u=(void 0===c?{}:c).NameHidden,s=(0,H.useContext)(W.GlobalConfigContext).handleOpenDGridSortSettingEdModal,d=(0,H.useCallback)((function(){var e=n.findControlByCondition((function(e){return Sf(e)&&e.parentId===a.id})),t=F()(e).call(e,(function(e){return{dataSource:e.dataSource,bindField:e.bindField}}));null==s||s(tg(tg({},a),{},{sortSettingsText:r,dsList:t}))}),[s,a,r]),f=(0,H.useContext)(W.GlobalConfigContext).invokePrintDesignerCustomEvent,g=(0,H.useCallback)((function(e){f("clickTipsLink",e)}),[f]),h=(0,H.useContext)(pn).definition,v=void 0===h?{}:h,p=a.dataSource,m=ir(p)(v),C=xn()(t=["Workflow","Approveline","Attach","Ref"]).call(t,m);return K().createElement(K().Fragment,null,!C&&K().createElement(K().Fragment,null,K().createElement(W.NameTipWrapper,{nameHidden:u,className:o,name:i,tips:l,onLinkClick:g}),K().createElement("div",{className:"".concat(o,"-query"),onClick:d},K().createElement("div",{className:Wn()(["".concat(o,"-query-text"),(0,M.c)({},"".concat(o,"-query-text-empty"),!r)])},r||(0,W.getLangMsg)("printd.grid.key0008")),K().createElement("div",{className:"".concat(o,"-query-btn")},K().createElement(U.Icon,{type:"more",style:{cursor:"pointer"}})))))},ag=function(e){e.Name,e.id,e.dataContext;var t,n=e.value,r=e.field,a=e.className,o=e.Name,i=e.Tips,l=e.Editor,c=(void 0===l?{}:l).NameHidden,u=(0,H.useContext)(W.GlobalConfigContext).handleOpenDGridFilterSettingEdModal,s=(0,H.useCallback)((function(){null==u||u(tg({},r))}),[u,r,n]),d=(0,H.useContext)(pn).definition,f=void 0===d?{}:d,g=r.dataSource,h=ir(g)(f),v=xn()(t=["ReportEntry","Approveline","Approveactivity","Custom","Workflow","Ref","Attach"]).call(t,h),p=(0,H.useContext)(W.GlobalConfigContext).invokePrintDesignerCustomEvent,m=(0,H.useCallback)((function(e){p("clickTipsLink",e)}),[p]);return K().createElement(K().Fragment,null,!v&&K().createElement(K().Fragment,null,K().createElement(W.NameTipWrapper,{nameHidden:c,className:a,name:o,tips:i,onLinkClick:m}),K().createElement("div",{className:"".concat(a,"-query"),onClick:s},K().createElement("div",{className:Wn()(["".concat(a,"-query-text"),(0,M.c)({},"".concat(a,"-query-text-empty"),!(n||r.filterSettingValue))])},n||r.filterSettingValue?(0,W.getLangMsg)("printd.grid.key0001"):(0,W.getLangMsg)("printd.grid.key0009")),K().createElement("div",{className:"".concat(a,"-query-btn")},K().createElement(U.Icon,{type:"more",style:{cursor:"pointer"}})))))},og=function(e){var t,n=e.id,r=e.locked,a=e.className,o=e.editor,i=e.Name,l=e.Tips,c=e.dataContext,u=e.field,s=o.NameHidden,d=o.Required;if((null===(t=u.subGridId)||void 0===t?void 0:t.length)>0)return K().createElement(K().Fragment,null);var f=(0,H.useContext)(W.GlobalConfigContext).invokePrintDesignerCustomEvent,g=(0,H.useCallback)((function(e){f("clickTipsLink",e)}),[f]);return K().createElement(K().Fragment,null,K().createElement(U.Checkbox,{checked:!!u.tableTailId,disabled:r,onChange:function(e){var t,r;t=e.target.checked,r=[[n,{hasTableTail:t}]],c.batchUpdateControlPropertyValues((0,W.createUpdateAction)(r))}},K().createElement(W.NameTipWrapper,{nameHidden:s,className:a,name:i,tips:l,required:d,onLinkClick:g})))},ig=function(e){var t,n=(0,H.useCallback)((function(e){return e=R()(e).call(e,(function(e){return"Sys"!==e.DsType})),hr(e,"Image")}),[]),r=(0,H.useCallback)((function(e){return hr(e,"Image")}),[]);return K().createElement(Ad,(0,oe.c)({filterTreeData:n,filterExpressionTreeData:r},e,{modalType:(null==e||null===(t=e.editor)||void 0===t?void 0:t.SupportFx)&&"expression"}))},lg=function(e){var t,n=(0,H.useCallback)((function(e){return e=R()(e).call(e,(function(e){return"Sys"!==e.DsType})),hr(e,"Image")}),[]),r=(0,H.useCallback)((function(e){return hr(e,"Image")}),[]);return K().createElement(Ad,(0,oe.c)({},e,{filterTreeData:n,filterExpressionTreeData:r,modalType:(null==e||null===(t=e.editor)||void 0===t?void 0:t.SupportFx)&&"expression"}))},cg=function(e){var t=e.id,n=e.propName,r=e.dataContext,a=e.value,o=e.className,i=(e.activedSelectId,(0,H.useState)(!1)),l=(0,S.c)(i,2),c=l[0],u=l[1],s=(0,H.useContext)(pn),d=s.definition,f=(0,H.useCallback)((function(e){e||u(!1);var a=e.key,o=Yn(a,d);if(W.console.log("onSelect-----",e,o),o){var i=o.dataSource,l=o.ancestorTitle,c=o.key,s=o.dsType;r.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[t,(0,M.c)((0,M.c)((0,M.c)((0,M.c)({},n,"=$".concat(l)),"dsType",s),"bindField",c),"dataSource",i)]])),u(!1)}else W.console.error("queryDataSourceAndAncestorByKey has no res",a,d)}),[t,n,d]),g=(0,H.useCallback)((function(e){return function(e,t){return gr(e,(function(e){var n=e.Type;return n&&n===t}))}(e,"Image")}),[]),h=(0,H.useCallback)((function(){u(!1)}),[]);return K().createElement(K().Fragment,null,K().createElement("div",{className:"".concat(o,"-query"),onClick:function(){return u(!0)}},K().createElement("div",{className:Wn()(["".concat(o,"-query-text"),(0,M.c)({},"".concat(o,"-query-text-empty"),!a)])},a||(0,W.getLangMsg)("printd.grid.key0010")),K().createElement("div",{className:"".concat(o,"-query-btn")},K().createElement(U.Icon,{type:"more",style:{cursor:"pointer"}}))),K().createElement(Wr,(0,oe.c)({activedSelectId:t,visible:c,filterTreeData:g},s,{setVisible:u,onSelect:f,onCancel:h,className:"left-datasource",emptyNode:K().createElement(ug,{className:"left-datasource"})})))};function ug(e){var t=e.className;return K().createElement("div",{className:"".concat(t,"-empty")},K().createElement("img",{className:"".concat(t,"-empty-img"),src:Rn,width:"168",height:"96",alt:(0,W.getLangMsg)("printd.grid.key0011")}),K().createElement("div",{className:"".concat(t,"-empty-text")},(0,W.getLangMsg)("printd.grid.key0011")))}var sg=function(e){var t,n=e.id,r=(e.handleChange,e.value),a=(e.className,e.rootId,e.field,e.dataContext),o=e.locked,i=e.propName,l="kdesigner-image-upload",c=(0,H.useState)([]),u=(0,S.c)(c,2),s=u[0],d=u[1],f=(0,H.useState)(""),g=(0,S.c)(f,2),h=g[0],v=g[1],p=(0,H.useRef)(null),m=(0,H.useContext)(W.GlobalConfigContext).uploadImageUrl,C=(0,H.useContext)(pn).setMessage,y=a.getData().id||"";(0,H.useEffect)((function(){var e;e="error"===h,le()((function(){var t,n;e?null===(t=p.current)||void 0===t||t.show():null===(n=p.current)||void 0===n||n.hide()}),0)}),[h]),(0,H.useEffect)((function(){$n(r).isBindField&&a.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[n,(0,M.c)((0,M.c)((0,M.c)({},i,""),"bindField",""),"dataSource","")]]))}),[]);var D=G()(t="".concat(m)).call(t,y);return K().createElement(U.Upload,{disabled:o,action:D,className:"".concat(l,"-wrapper"),accept:".jpg,.jpeg,.png,.bmp",fileList:s,onChange:function(e){var t=e.file.status,r=(0,yn.c)(e.fileList);r=kn()(r).call(r,-1),r=F()(r).call(r,(function(e){var r=e.response;if(r){var o=r.rcId,l=r.fileName,c=r.status,u=r.message;"1"===c?(a.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[n,(0,M.c)((0,M.c)((0,M.c)({},i,l),"bindField",o),"dataSource","")]])),t="success"):(t="error",C(u||(0,W.getLangMsg)("printd.grid.key0012")))}return e})),d(r),W.console.log("upload------",t),v((function(){return"error"===t?"error":"success"}))}},K().createElement("div",{className:l},K().createElement("div",{className:Wn()(["".concat(l,"-value"),(0,M.c)({},"".concat(l,"-value-empty"),!r)])},r||(0,W.getLangMsg)("printd.grid.key0013")),K().createElement(U.Icon,{type:"shangchuan",prefix:"designericon",className:"".concat(l,"-icon")})))},dg=function(e){e.className;var t=e.Editor,n=e.value,r=e.handleChange;n||W.console.error("PaperDirection value is null");var a=t.Enum,o="editor";return K().createElement(K().Fragment,null,K().createElement("div",{style:{opacity:1,visibility:"hidden",height:"16px"}},(0,W.getLangMsg)("printd.grid.key0020")),K().createElement("div",{className:"".concat(o,"-page-direction")},F()(a).call(a,(function(e){var t=e.Value;return K().createElement("div",{className:Wn()((0,M.c)({},"".concat(o,"-page-direction-enable"),t===n)),onClick:function(){r(t)},title:"horizontal"===t?(0,W.getLangMsg)("printd.grid.key0021"):(0,W.getLangMsg)("printd.grid.key0022"),key:t},K().createElement("div",{className:Wn()((0,M.c)((0,M.c)({},"".concat(o,"-page-direction-horizontal"),"horizontal"===t),"".concat(o,"-page-direction-veritical"),"vertical"===t))}))}))))},fg=n(85640),gg=function(e){var t,n=e.handleChange,r=e.value,a=e.className,o=(e.rootId,e.Name),i=e.dataContext,l=(e.propName,(0,H.useContext)(W.GlobalConfigContext)),c=l.previewImageUrl,u=l.uploadImageUrl,s="editor",d=(0,H.useState)([]),f=(0,S.c)(d,2),g=f[0],h=f[1],v=(0,H.useState)(""),p=(0,S.c)(v,2),m=(p[0],p[1]),C=(0,H.useState)((function(){var e,t=r||"";return t?G()(e="".concat(c)).call(e,t):""})),y=(0,S.c)(C,2),D=y[0],E=y[1],w=(0,H.useContext)(pn).setMessage,k=i.getData().id||"",A=function(e){return new(Xr())((function(t,n){var r=i.getRootId(),a=i.findControl(r),o=a.width,l=(a.height,new Image);l.src=e;l.onload=function(){var e=l.width,n=l.height;e=Wd(e,1),n=Wd(n,1),t(e>o?{width:o,height:n*o/e}:{width:e,height:n})}}))},x=function(){var e=(0,fg.c)($r().mark((function e(t){var r,a,o,i,l,u,s;return $r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.file.status,a=(0,yn.c)(t.fileList),a=kn()(a).call(a,-1),a=F()(a).call(a,(function(e){var t=e.response;if(t){var n=t.rcId,a=t.fileName,i=t.status,l=t.message;"1"===i?(o={rcId:n,name:a},r="success"):(r="error",w(l||(0,W.getLangMsg)("printd.grid.key0019")))}return e})),!o){e.next=14;break}return l=o.rcId,u=G()(i="".concat(c)).call(i,l),e.next=9,A(u);case 9:s=e.sent,s.width,s.height,E(u),n(l);case 14:h(a),m((function(){return"error"===r?"error":"success"}));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,H.useEffect)((function(){var e,t=r||"";E(t?G()(e="".concat(c)).call(e,t):"")}),[r]);var b=G()(t="".concat(u)).call(t,k);return K().createElement(K().Fragment,null,K().createElement("div",{className:Wn()((0,M.c)({},"".concat(a,"-title"),!0))},o),D?K().createElement("div",{className:"".concat(s,"-upload-preview")},K().createElement("img",{src:D,alt:""}),D&&K().createElement("div",{className:"".concat(s,"-upload-preview-bg"),onClick:function(){E(""),h([]),n("")}},K().createElement(U.Icon,{prefix:"printdesignericon",type:"shanchu"}))):K().createElement(U.Upload,{className:"".concat(a,"-background-upload"),action:b,accept:".jpg,.jpeg,.png,.bmp",fileList:g,onChange:x},K().createElement("div",{className:"".concat(s,"-upload")},K().createElement(U.Icon,{type:"add"}))))};function hg(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function vg(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?O()(n=hg(Object(a),!0)).call(n,(function(t){(0,M.c)(e,t,a[t])})):A()?b()(e,A()(a)):O()(r=hg(Object(a))).call(r,(function(t){B()(e,t,w()(a,t))}))}return e}var pg=function(e){var t=e.id,n=e.propName,r=e.dataContext,a=e.value,o=e.className,i=(e.activedSelectId,e.RelationKey),l=e.RelationDataSource,c=e.RelationViewText,u=e.Name,s=e.Tips,d=e.Editor,f=void 0===d?{}:d,g=e.field,h=f.NameHidden,v=(0,H.useState)(!1),p=(0,S.c)(v,2),C=p[0],y=p[1],D=(0,H.useContext)(pn),E=(D.meta,D.definition),w=(0,H.useCallback)((function(e){var a;e||y(!1);var o=e.key,u=e.InitAttr,s=void 0===u?{}:u,d=Yn(o,E);if(d){var f=d.dataSource,g=d.ancestorTitle,h=d.key,v=d.title,p=d.dsType,C=d.IgnoreZero,D=d.IgnoreTailZero,w=Q()(a=m()(s)).call(a,(function(e,t){return e[Y().camelCase(t)]=s[t],e}),{});w.ignoreZero=C,w.ignoreTailZero=D,r.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[t,er(vg((0,M.c)((0,M.c)((0,M.c)((0,M.c)((0,M.c)({},n,"=$".concat(g)),Y().camelCase(i),h),Y().camelCase(l),f),Y().camelCase(c),"=$".concat(v)),"dsType",p),w))]])),y(!1)}else W.console.error("queryDataSourceAndAncestorByKey has no res",o,E)}),[t,n,E,c,l,i,n]),k=(0,H.useCallback)((function(){y(!1)}),[]),A=(0,H.useCallback)((function(e){return"RichText"===g.type&&(e=gr(e,(function(){}),"Sys")),function(e,t){return gr(e,(function(e){var n=e.Type,r=e.InitAttr;return n&&xn()(t).call(t,n)&&xn()(t).call(t,null==r?void 0:r.TextFormat)}))}(e,["Text","RichText"])}),[g.type]),x=(0,H.useContext)(W.GlobalConfigContext).invokePrintDesignerCustomEvent,b=(0,H.useCallback)((function(e){x("clickTipsLink",e)}),[x]);return K().createElement(K().Fragment,null,K().createElement(W.NameTipWrapper,{nameHidden:h,className:o,name:u,tips:s,onLinkClick:b}),K().createElement("div",{className:"".concat(o,"-query"),onClick:function(){return y(!0)}},K().createElement("div",{className:Wn()(["".concat(o,"-query-text"),(0,M.c)({},"".concat(o,"-query-text-empty"),!a)])},a||(0,W.getLangMsg)("printd.grid.key0014")),K().createElement("div",{className:"".concat(o,"-query-btn")},K().createElement(U.Icon,{type:"more",style:{cursor:"pointer"}}))),K().createElement(Wr,(0,oe.c)({activedSelectId:t,visible:C,filterTreeData:A},D,{onSelect:w,onCancel:k,className:"left-datasource",emptyNode:K().createElement(mg,{className:"left-datasource"})})))};function mg(e){var t=e.className;return K().createElement("div",{className:"".concat(t,"-empty")},K().createElement("img",{className:"".concat(t,"-empty-img"),src:Rn,width:"168",height:"96",alt:(0,W.getLangMsg)("printd.grid.key0014")}),K().createElement("div",{className:"".concat(t,"-empty-text")},(0,W.getLangMsg)("printd.grid.key0014")))}function Cg(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function yg(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?O()(n=Cg(Object(a),!0)).call(n,(function(t){(0,M.c)(e,t,a[t])})):A()?b()(e,A()(a)):O()(r=Cg(Object(a))).call(r,(function(t){B()(e,t,w()(a,t))}))}return e}var Dg=function(e){var t,n,r=e.id,a=e.propName,o=e.dataContext,i=e.RelationKey,l=e.value,c=e.field,u=(0,H.useContext)(pn),s=c.parentId,d=c.groupField,f=o.findControl(s).dataSource,g=f.replace(/^(\S+\.)?(\S+)$/g,"$2"),h=[G()(t="".concat(f,"-")).call(t,g)],v=G()(n="".concat(f,"-")).call(n,d),p=u.definition,C=(0,H.useCallback)((function(e){return e=pr(e),e=Cr(e,f)}),[f]);return K().createElement(Ad,(0,oe.c)({},e,{readOnly:!0,filterTreeData:C,selectedKey:v,expandedKeys:h,onSelect:function(e,t){var n,l=t.key,c=t.InitAttr,u=void 0===c?{}:c,s=Yn(l,p);if(s){var d=s.ancestorTitle,f=s.key,g=s.dsType,h=s.IgnoreZero,v=s.IgnoreTailZero,C="=$".concat(d),y=Q()(n=m()(u)).call(n,(function(e,t){return e[(0,V.camelCase)(t)]=u[t],e}),{});y.ignoreZero=h,y.ignoreTailZero=v;var D=[[r,er(yg((0,M.c)((0,M.c)((0,M.c)({},a,C),(0,V.camelCase)(i),f),"dsType",g),y))]];o.batchUpdateControlPropertyValues((0,W.createUpdateAction)(D)),e(!1)}},handleInputChange:function(e,t){if(e!==l){var n=$n(e),c=n.isBindField,u=n.bindField;if(c){var s=_n(u,p);if(!s)return t(!0),void o.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[r,er((0,M.c)((0,M.c)((0,M.c)({},a,e),(0,V.camelCase)(i),""),"dsType",""))]]));t(!1);var d=s.key,f=s.dsType,g=[[r,er((0,M.c)((0,M.c)((0,M.c)({},a,e),(0,V.camelCase)(i),d),"dsType",f))]];o.batchUpdateControlPropertyValues((0,W.createUpdateAction)(g))}else t(!1),o.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[r,(0,M.c)((0,M.c)((0,M.c)({},a,e),(0,V.camelCase)(i),""),"dsType","")]]))}}}))},Eg=function(e){var t,n,r=e.id,a=e.propName,o=(e.className,e.Name),i=e.dataContext,l=e.RelationKey,c=e.value,u=e.field,s=(0,H.useContext)(pn).definition,d=u.parentId,f=u.mergeByField,g=u.mergeSummaryField,h=i.findControl(d),v=h.id,p=h.dataSource,C=p.replace(/^(\S+\.)?(\S+)$/g,"$2"),y=[G()(t="".concat(p,"-")).call(t,C)],D=i.findControlByCondition((function(e){return e.parentId===v&&"Detail"===e.cellType})),E=!!i.findControlByCondition((function(e){return Mf(e)&&e.parentId===d})).length,w=(0,yn.c)(new(ua())(R()(n=F()(D).call(D,(function(e){var t=e.bindField,n=e.dataSource;return qn(n,t)}))).call(n,Boolean))),k=(0,H.useMemo)((function(){var e,t=yr(s,w),n=f?null==f?void 0:F()(e=f.split(";")).call(e,(function(e){var t;return G()(t="".concat(p,"-")).call(t,e)})):[];return F()(n).call(n,(function(e){var n=e;return kg(t,e)||Ag(t,e.split("-")[1],(function(e){var t,r=e.dataSource,a=e.bindField;n=G()(t="".concat(r,"-")).call(t,a)})),n}))}),[w,f,p]);return E||wf(h)?null:K().createElement(Ad,(0,oe.c)({},e,{readOnly:!0,clearable:!0,modalTitle:o,filterTreeData:function(e){return p?e=yr(e,w):[]},expandedKeys:y,checkedKeys:k,onSelect:function(e,t){var n=F()(t).call(t,(function(e){var t,n=e.key,r=e.InitAttr,a=void 0===r?{}:r,o=Yn(n,s);if(!o)return{};var i=o.dataSource,l=o.ancestorTitle,c=o.key,u=o.title,d=o.dsType,f=o.IgnoreZero,g=o.IgnoreTailZero,h=Q()(t=m()(a)).call(t,(function(e,t){return e[(0,V.camelCase)(t)]=a[t],e}),{});return h.ignoreZero=f,h.ignoreTailZero=g,yg({bindText:"=$".concat(l),bindField:c,dataSource:i,viewText:"=$".concat(u),title:u,dsType:d},h)})),o=er((0,M.c)((0,M.c)({},a,F()(n).call(n,(function(e){return e.title})).join(";")),(0,V.camelCase)(l),F()(n).call(n,(function(e){return e.bindField})).join(";")));i.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[r,o]])),e(!1)},onClear:function(){var e=g.length?{mergeSummaryField:[],mergeSummaryFieldText:""}:{};i.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[r,er(yg((0,M.c)((0,M.c)({},a,""),(0,V.camelCase)(l),""),e))]]))},handleInputChange:function(e,t){if(e!==c){var n=$n(e),o=n.isBindField,u=n.bindField;if(o){var d=_n(u,s);if(!d)return t(!0),void i.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[r,er((0,M.c)((0,M.c)({},a,e),(0,V.camelCase)(l),""))]]));t(!1);var f=d.key,g=[[r,er((0,M.c)((0,M.c)({},a,e),(0,V.camelCase)(l),f))]];i.batchUpdateControlPropertyValues((0,W.createUpdateAction)(g))}else t(!1),i.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[r,(0,M.c)((0,M.c)({},a,e),(0,V.camelCase)(l),"")]]))}},checkable:!0}))},wg=function(e){var t,n,r=e.Name,a=e.id,o=e.propName,i=e.dataContext,l=e.RelationKey,c=e.value,u=e.field,s=e.className,d=(e.selectionContext,(0,H.useState)(!1)),f=(0,S.c)(d,2),g=f[0],h=f[1],v=(0,H.useState)(!1),p=(0,S.c)(v,2),C=p[0],y=p[1],D=(0,H.useState)([]),E=(0,S.c)(D,2),w=E[0],k=E[1],A=(0,H.useContext)(pn),x=u.mergeSummaryField,b=u.parentId,I=u.mergeByField,B=i.findControl(b),L=B.id,T=B.dataSource,N=(B.type,T.replace(/^(\S+\.)?(\S+)$/g,"$2")),Z=[G()(t="".concat(T,"-")).call(t,N)],j=i.findControlByCondition((function(e){return e.parentId===L&&"Detail"===e.cellType})),J=(0,yn.c)(new(ua())(R()(n=F()(j).call(j,(function(e){var t=e.bindField,n=e.dataSource;return qn(n,t)}))).call(n,Boolean))),P=!I,O=!!i.findControlByCondition((function(e){return Mf(e)&&e.parentId===b})).length,z=A.meta,Y=A.definition,q=(0,H.useMemo)((function(){var e,t=yr(Y,J),n=I?null==I?void 0:F()(e=I.split(";")).call(e,(function(e){var t;return G()(t="".concat(T,"-")).call(t,e)})):[];return F()(n).call(n,(function(e){var n=e;return kg(t,e)||Ag(t,e.split("-")[1],(function(e){var t,r=e.dataSource,a=e.bindField;n=G()(t="".concat(r,"-")).call(t,a)})),n}))}),[J,I,T]);return O||wf(B)?null:K().createElement(K().Fragment,null,K().createElement("div",{className:"".concat(s,"-title")},r),K().createElement("div",{className:Wn()(["".concat(s,"-query"),{"is-disabled":P}]),onMouseOver:function(e){c&&h(!0)},onMouseLeave:function(e){g&&h(!1)},onClick:function(){if(!P){var e=x?F()(x).call(x,(function(e){var t;return G()(t="".concat(T,"-")).call(t,e)})):[];k(e),y(!0)}}},K().createElement("div",{className:Wn()(["".concat(s,"-query-text"),(0,M.c)({},"".concat(s,"-query-text-empty"),!c)])},c||(0,W.getLangMsg)("printd.grid.key0008")),K().createElement("div",{className:"".concat(s,"-query-btn")},!P&&g&&K().createElement(U.Icon,{type:"close",style:{cursor:"pointer"},onClick:function(e){e.stopPropagation(),i.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[a,er((0,M.c)((0,M.c)({},o,""),(0,V.camelCase)(l),[]))]]))}}),K().createElement(U.Icon,{type:"more",style:{cursor:P?"not-allowed":"pointer"}}))),K().createElement(Wr,{checkable:!0,className:"left-datasource",activedSelectId:a,modalTitle:r,meta:z,definition:Y,visible:C,onCancel:function(){return y(!1)},onSelect:function(e){var t=F()(e).call(e,(function(e){var t,n=e.key,r=e.InitAttr,a=void 0===r?{}:r,o=Yn(n,Y);if(!o)return{};var i=o.dataSource,l=o.ancestorTitle,c=o.key,u=o.title,s=o.dsType,d=o.IgnoreZero,f=o.IgnoreTailZero,g=Q()(t=m()(a)).call(t,(function(e,t){return e[_.camelCase(t)]=a[t],e}),{});return g.ignoreZero=d,g.ignoreTailZero=f,yg({bindText:"=$".concat(l),bindField:c,dataSource:i,viewText:"=$".concat(u),title:u,dsType:s},g)})),n=(0,M.c)((0,M.c)({},o,F()(t).call(t,(function(e){return e.title})).join(";")),(0,V.camelCase)(l),F()(t).call(t,(function(e){return e.bindField})));i.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[a,n]])),y(!1)},expandedKeys:Z,checkedKeys:w,filterTreeData:function(e){return T?(e=function(e,t){return null!=t&&t.length?gr(e,(function(e){var n=e.bindField,r=e.dataSource,a=qn(r,n);return a&&!xn()(t).call(t,a)})):e}(e=yr(e,J),q),e):[]}}))};function kg(e,t){return Hn()(e).call(e,(function(e){var n=e.bindField,r=e.dataSource,a=e.Items;return r+"-"+n===t||(null==a?void 0:a.length)&&kg(a,t)}))}function Ag(e,t,n){return Hn()(e).call(e,(function(e){var r=e.bindField,a=e.Items,o=r===t;return o&&n(e),o||a&&Ag(a,t,n)}))}function xg(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function bg(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?O()(n=xg(Object(a),!0)).call(n,(function(t){(0,M.c)(e,t,a[t])})):A()?b()(e,A()(a)):O()(r=xg(Object(a))).call(r,(function(t){B()(e,t,w()(a,t))}))}return e}function Ig(e){var t=e.visible,n=e.onCancel,r=e.selectList,a=e.fileName,o=e.id,i=(0,H.useContext)(W.DataContext),l=(0,H.useState)(!1),c=(0,S.c)(l,2),u=c[0],s=c[1],d=(0,H.useState)([]),f=(0,S.c)(d,2),g=f[0],h=f[1],v=(0,H.useRef)(null),p="grid-guide",m=["\\","/",":","*","?","<",">","|"],C=function(){s(!1),n()};return K().createElement(U.Modal,{body:K().createElement(Bg,{checkable:!0,className:"".concat(p,"-body"),errorTipShow:u,setErrorTipShow:s,checkedNodes:g,setCheckedNodes:h,selectList:r,fileName:a,ref:v}),titleIcon:null,maskClosable:!1,className:"".concat(p,"-modal"),footer:K().createElement(K().Fragment,null,K().createElement("div",{className:"".concat(p,"-modal-footer-btns")},K().createElement(U.Button,{onClick:C,type:"second",className:"".concat(p,"-modal-cancel-btn")},(0,W.getLangMsg)("printd.components.key0011")),K().createElement(U.Button,{className:"".concat(p,"-modal-ok-btn"),type:"primary",onClick:function(){var e,t,n=null===(e=v.current)||void 0===e?void 0:e.getFormulaData();(null===(t=v.current)||void 0===t?void 0:t.getDataLen())<=100?!function(e){if(null!=e&&e.length)return Hn()(e).call(e,(function(e){return"string"==typeof e&&Hn()(m).call(m,(function(t){return xn()(e).call(e,t)}))}))}(n)?(i.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[o,{fileName:n}]])),C()):s("existSpecialStr"):s(!0)}},(0,W.getLangMsg)("printd.components.key0012")))),width:480,height:320,title:(0,W.getLangMsg)("printd.grid.key0121"),closable:!0,destroyOnClose:!0,onCancel:C,onOk:C,mask:!0,visible:t})}var Bg=(0,H.forwardRef)((function(e,t){var n=(0,H.useRef)(),r=function(){var e;return null===(e=n.current)||void 0===e?void 0:e.getFormulaData()},a=function(){var e;return null===(e=n.current)||void 0===e?void 0:e.getDataLen()};return(0,H.useImperativeHandle)(t,(function(){return{getFormulaData:r,getDataLen:a}})),(0,H.useEffect)((function(){n.current.onAutoFocus()}),[]),K().createElement("div",{className:"".concat(e.className," fileNameRoot")},K().createElement(Sg,(0,oe.c)({ref:n},e)))}));Bg.displayName="FileNameModalBody";var Sg=(0,H.forwardRef)((function(e,t){var n=(0,H.useMemo)((function(){return function(e){var t=e.isVoid,n=e.isInline;return e.isInline=function(e){return"label"===e.type||n(e)},e.isVoid=function(e){return"label"===e.type||t(e)},e}(Gs(jl(Rl())))}),[]),r=e.fileName,a=e.errorTipShow,o=e.className,i=e.setErrorTipShow,l=(0,H.useState)(!1),c=(0,S.c)(l,2),u=c[0],s=c[1],d=(0,H.useState)(""),f=(0,S.c)(d,2),g=f[0],h=f[1],v=(0,H.useState)(0),p=(0,S.c)(v,2),m=p[0],C=p[1],y=(0,H.useRef)(null),D=(0,H.useState)((function(){if(null!=r&&r.length){var e=[],t={type:"paragraph",children:[{text:""}]};return O()(r).call(r,(function(n,a){var o=a===r.length-1;o&&e.push(bg({},t)),"string"==typeof n?t.children.push({text:n}):t.children.push({text:""},bg(bg({},n),{},{type:"label",children:[{text:""}]}),{text:""}),t=o?{type:"paragraph",children:[]}:t})),e}return[{type:"paragraph",children:[{text:""}]}]})),E=(0,S.c)(D,2),w=E[0],k=E[1],A=(0,H.useMemo)((function(){var t;return R()(t=e.selectList).call(t,(function(e){var t=e.name,n=e.key;return-1!==En()(t).call(t,g)||-1!==En()(n).call(n,g)}))}),[e.selectList,g]);(0,H.useEffect)((function(){return document.addEventListener("mousedown",I),function(){document.removeEventListener("mousedown",I)}}),[u]),(0,H.useImperativeHandle)(t,(function(){return{getFormulaData:b,onAutoFocus:L,getDataLen:x}}));var x=function(e){var t=((null==e?void 0:e[0])||(null==w?void 0:w[0])).children,n=0;return O()(t).call(t,(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.type,a=t.text;n+="label"===r?null==t||null===(e=t.name)||void 0===e?void 0:e.length:null==a?void 0:a.length})),n},b=function(){var e,t=(w[0]||{}).children;return R()(e=F()(t).call(t,(function(e){var t=e.type,n=e.text;return"label"===t?e:n}))).call(e,(function(e){return""!==e}))},I=function(e){if(u){var t=e.target,n=document.getElementById("kdPrintDesignerFileNameList"),r=document.getElementById("kdPrintDesignerFileNameBtn");n.contains(t)||r.contains(t)||s(!1)}},B=function(e){var t=e.target.value;h(t)},M=function(e){var t=e.name,r=e.key,a=e.type;if(y.current){Oo.select(n,y.current);var o={type:"label",name:t,key:r,textFormat:a,children:[{text:""}],id:zs()};Oo.insertNodes(n,o),Oo.move(n),Eu.focus(n)}},L=function(){var e,t,r=null===(e=n.children[0])||void 0===e||null===(e=e.children)||void 0===e?void 0:e.length,a=null===(t=n.children[0])||void 0===t||null===(t=t.children[r-1])||void 0===t||null===(t=t.text)||void 0===t?void 0:t.length,o={anchor:{path:[0,r-1],offset:a},focus:{path:[0,r-1],offset:a}};Oo.select(n,o),Eu.focus(n)},T=(0,H.useMemo)((function(){return K().createElement(U.Dropdown.Menu,{id:"kdPrintDesignerFileNameList"},K().createElement("div",{className:"searchInput"},K().createElement(U.Input,{style:{marginBottom:8,marginRight:8,paddingRight:28},placeholder:(0,W.getLangMsg)("printd.grid.key0115"),borderType:"bordered",onChange:B}),K().createElement("div",{className:"image"},K().createElement("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAAXNSR0IArs4c6QAAG7RJREFUeF7tXQmYXUWVPud2h3QgSEAdFVEcdSQsCogLO0SEYPpV3ZcEegQxA+qHjstoXBAVEHT8RgK4gRszAYmK0NDhVd3XgYjSKLKpKCpbHMZRQXCFDgGy9btn3mFuYwNZXtWt++7yqr6vv4Z855w656/7d9W9deoUgm8eAY/AZhFAj41HwCOweQQ8QfzT4RHYAgKeIP7x8Ah4gvhnwCNgh4CfQexw81o9goAnSI8MtA/TDgFPEDvcvFaPIOAJ0iMD7cO0Q8ATxA43r9UjCHiC9MhA+zDtEPAEscPNa/UIAp4gBgM9PDy80/Tp0/dCxL0AYGcAGACAGYg4QERP/k7+fR0iriWiJ38DwFoAWAcADxDRHevXr79jaGjoIQMXvGiXEfAE2QzgURTtDQCvjuN4khCTpHA9RA8AwB1MmCAI7gCAnwkhfuG6E2/PDgFPkAS3ZrO5XxzHrweAwwHgDQDwbDtInWj9DQCua/tyfRAEt9ZqtducWPVGjBHoWYKMjIzs0t/fX0fEQ4joQETcxRi9LikQ0f2IeBMR3TAxMdFYuHDh/V3quue76SmCjI2N9a9evboeBEEIAHUAmFnCJ+BRAGjEcax22GGHxpw5cyZKGENpXO4JgmitDwaASVK8vDSjs3VH72WyAICSUv5o6+JewhSBShNEKfVmRPwXADjaFJgSyq8goqVhGC4voe+FdblyBBkbGxt45JFHTkyIsX9hkc/OsesQcakQ4tLsuugdy5UhyOjo6PM3btx4YhAEPGPM7p0h3HSkyUv9RVLKpb2ORZr4K0EQrfU7AeDjAPDiNGBUVPfGIAiW1Go1XdH4Mg2r1ARpNBqvD4LgY8kLeKZAld04Il4Ux/GSMAxXlT2WbvpfSoIMDw9vM3369I8jIpNjm24CVvK+/kpE54RhuKTkcXTN/dIRRGvNn2uZGLzrnWf7LQD8BhEfI6LHAeDxyd/83wCwLf8g4pO/2w/ndgDwUgB4SZ6OA4BfdnU4AKUiiFLqU4h4eoexORFDxIeI6BYiuhMR7wKAO8fHx+9atGjRY7YdLFu2bLtZs2btAQB7EtEeiLgnABwIALNsbVrqnSal/Iylbk+olYIgURTNJiJeFoisRyVJ67ghCIIbiOimbiYOJvlghwDAYUlOWDcIcykRfTAMwz9ljW0Z7ReeIFrr45gcGedKcRatAoCmlPKWIgxkFEXbEhETpYaIg0S0a1Z+EdHtAMAkGcuqj7LaLTRBlFJMjI9kAS4iPkhEOo5jXa/XV2TRhyubK1asmD4xMVEDgEEmDAA815XtKXY2xHH8wXq9/uUMbJfWZGEJorXmHCN+IXfaOCMWES9Zt27dlUNDQ6udGu+CsWazuWOr1ToGEd8GAFlkCpwnpfxwF0IpRReFJIjW+gft8xCHOkawwcQQQjDxKtGUUm9JiMLnV1y270gpj3dpsKy2CkcQrfWvAIBP77lqS4MguKRWq93gymDR7DQajflBEPCMwssvV+16KeUcV8bKaqdQBNFa/yE56+0Cz2uTTbFrXRgrgw2l1NsQ8RQA2M2Fv0T06zAMndhy4U8eNgpDEK01b67NSAsCEd3X3qDjlIoL0toqo34URc8BgI+0Ny2ZKC7aGinls1wYKqONQhBEa/0IAGyfFkBEvGCbbbZZMnfuXCZJTzel1EHtHf1TEFE6AKJnSZI7QbTWd6dNTyei1UEQLBZCXOzgYaiUCaXU6Yj4KQdB3SOl3N2BnVKZyJUg7aOw3wOAI1Iixht7i4uywZcylkzUtdb88n42AHB6S5r2/fbR3jemMVA23dwIorUebuc1HZsSsItnzJix+MgjjyzdfkbKuI3Voyh6IZOEiN5irPxUhSuklEMpbZRGPReCuCAHEZ0RhuGnS4N0QRxVSp2JiJ9M6U7PkKTrBHGRPhIEwYdrtdp5KQe5Z9VdkCT5hO7qS1lhx6KrBOHEQwBIW0xgkZTym4VFtCSOKaVOQ8S0M/DxUsrvlCRkKze7RhBOWY/j+No0WblEtHcYhr+0itQrPQMBpdQJiGj9x4aPBgRBcKQQ4p6qwts1gmituWiA9XkOKWXXfK3qYG8qLq0153F9P0XMkZTSxV5LCheyU+3KQ+fgJOCuUsrfZwdDb1uOoqjenp2vskWBiD4dhuEZtvpF1sucIMkZ8jQZtIf4sprZP0JKqX9FxK/Y9sT1jqtYWihTgnD1kYGBgR/aFlhAxLf4CoG2j6y5ntb6P9oX/JxqrvmExg+llHwCslItU4Kk/Jz4MSnlZyuFdgmC0Vp/GwCszoIg4geEEF8sQZgdu5gZQZKibjx72NSturj9zsHnG3zrMgKcDRzH8TWIuJ9F1/e1v1QeVK/XK5MsmhlBUhyZvWXGjBlH+/QRi8fTkUqz2TyESZLU9jKySkRfDMPwA0ZKBRbOhCBJrdyvmcbNWbmIeLRPPDRFzr28UupkRPy6jWWuxhKGIa8eSt+cE4SrrLdarVttCknz+Wqfsl6cZ0pr/XkAMJ4NuFpMGIbOC27kgYxzgjQajVODIOCvIUaNDzsJId5npOSFM0dAa803V/HhK9MmpJRNU6WiyTslCF9es2bNmp+bHoDiY7IDAwMH+ZOARXs8AJrNpuT7EE09a7/kR0KI0u+wOyWIUupdiPhVUzCJ6H29eobcFKs85KMoWkpENl8VSz+LOCWI1vpmi2Jm10opj8pj4H2fnSGglNoNEXmpxQUhOm5VmEWcESS5MNM49bldIPqoMAx7pjRPx09XwQSVUlwAgo/tmrZSzyLOCKK1vtriNtmlUsp3mCLu5fNBQCn1U9MNxLLPIk4IktxDbly5MAiCQ6tc8TCfxzi7XlPsjZQ24dQVQc4BANOCxw0p5fzshtNbzgIBm1kEAM6VUmZSpT+LGKfaTE2QsbGx/jVr1nBtq5ebOIuI86tUSNok9jLLWs4i926//fa7z5kzZ6JssacmSKPROCYIgitMAucrCMIwdF293cQFL5sCAZtZJI7jY+v1+pUpus1FNTVBtNZ8pvkEQ+/f4S+4N0SsQOKWs8i3pJRvLVAYHbmSiiAjIyO7TJs2jZdXMzvqDQD4Zqe1a9fuXsbLazqNsepyw8PDO8yYMeNuInqBQayPbty4cfeFCxfeb6CTu2gqgiil3ouI5xtG8XUp5bsMdbx4wRDQWnO29jtN3CpjxkQqgkRRdAURHWMCUhzHg0W/E9Aknl6VbTQa84IgGDWJHxGvFEKkLTdr0mVq2VQEaa9FH2ifGTCZZu+QUr4ytdfeQCEQML0NjIgeDMNw50I436ET1gSJougAvke8w34mxT4jpTzNUMeLFxQBrfW/A8AnTNxDxAOFEJyzV4pmTRCt9UcBwKioQtnAKcUI5uik5R/JU6WUNjlduURqTRClVJMvuO/Ua/56JYQo1fTaaWy9LBdF0QMmX7OIaDQMQ5eXjWYKvzVBtNYPAcCOBt751BIDsMoiqrXmiox1A38fllLuZCCfq6gVQUZHR/dptVp8ctCklWpqNQmsl2Vtltp9fX37Dg4O3l4G3KwIEkXRSUR0kWGAr5NS/sRQx4sXHAGt9WsB4McmbpapYqYVQZRS5yHiBw1AGZdSmizHDEx70bwR0Fo/DACzOvWjTLeDWRFEa70SAEyOya5ozx4dv9B3CrSXKwYC7VmENwzndeoNIl4ihDixU/k85WwJ8gcA6PiLVK9c15XnQObZt8W1ejdKKQ/O0+dO+zYmyPDw8E4DAwN/67SDRO4kKeU3DHW8eEkQ0FrzbGByR/0fpZQmGRi5IWFMEKXUoYj4A0OP/Qu6IWBlErd5UZ8+ffrMuXPnPlb0OI0JorV+NwB82SSw8fHxmYsWLSo8GCYxedm/I7Bs2bLtZs2a9agJJmW5b9KGIKb5N7+VUv6jCXhetnwIaK3/FwBe0qnnRPSmMAy5gnyhmw1BzgWADxlEdZ2U8ggDeS9aQgS01nwRKF8I2mkrxRXSNgTh5RUvszpqZa+L1FGQXgiiKNJEZHKL8XuklNZ3InYLcmOCWNRpvVxK+eZuBeT7yQcBrfVlAPDPBr2fJqX8jIF8LqLGBNFaXwoAxxl4669TMwCrrKJaa049OsnA//OklKa11AzMuxE1JkgURcuJqOOCb0T05TAM3+vGXW+lqAgopS5AxPd06h8iXiSEeHun8nnJGRPEtAav30XPa2i726/pbjoiXiWEWNBdL817syHIGAAc3mlXRHRW+zauMzuV93LlRMDiyu/rpZRzih6tDUGMqrj7GaToj4Ab/0xnEAC4WkrZcYKjGy/NrRgTxL+DmIPcCxqm7yAAMCKlNCoZlQeOxgTxX7HyGKbi92nxFasUpUiNCeL3QYr/sObhocU+yIVSSqPKjHnEZUwQrbXfSc9jpArep+lOOiJ+UQhhfAd7t2GwIYjPxer2KJWgP4tcrM9KKT9W9NBsCOKzeYs+qjn4Z5HN+9EwDJfk4KpRlzYE8edBjCCuvrDNeZAgCMJaraaLjo4xQfyJwqIPaff9szlRSESzwzBc1X1vzXo0Jog/k24GcC9IW5xJByml8bOXB5ZWTmqtfVWTPEaroH1a7KKvklLOLmg4T3HLliC+LlYZRrdLPprWxSIiHbYT9LrkXqpurAjiKyumwrxyyqaVFRFxiRCCr88ofLMiiE1t3iAIXlOr1W4rPCLeQSMEms3mfnEc/9RECRHnCyEaJjp5ydoSZG8iMq3OvVhK+YW8AvX9ZoOA1pp3wz9vYn1iYuJ5CxYs+LOJTl6yVgRhZ7XWfwWAZxs47u8HMQCrLKKm94Mg4u1CiH3LEl8aggwDgMmNpeOI+EIhxONlAcf7uWUEoijaloj4i2bHld0B4EtSyveXBds0BDHeUecK4FJKPnDlWwUQ0Fq/CQBWmIRCRG8Nw/BbJjp5yloTxOblDAC+IqXs+GB/nsD4vreOgGlmN1tExN2FEPds3XoxJKwJwu4rpe5DxF06DQURf9fX17fbvHnz1neq4+WKicCKFSumt1qtVUS0q4GHt0op9zeQz100FUG01pcDwJBhFMdIKUcMdbx4wRDQWi8EgCtN3CpjAY9UBFFKvRcRzzcBie+RkFK+zVDHixcMAYsjthDH8f71ev3WgoWyRXdSEWRkZGSXadOm3Q0AMw2C/ksQBLvVajW+1863EiLQbDZ3jOOYM3Gfa+B+6ZZXT7wzGQS4SVGt9TcB4AQTO0R0chiG/2mi42WLg4DWms+Sf83EI0Q8UwhxlolOEWRTE6TRaBwTBMEVhsHcIqU8wFDHixcAAX45n5iY4GufX2XiThmXV05mkLGxsf41a9bwMuvlJoAR0QlhGH7bRMfL5o+A1noxAHzO0JPS3hGTegZhoLTW5wCAaaXu0oJm+HBURjx59+DZw+iPISKeLIQo5ZLaFUH4St8bTJ+EOI4X1Ov1q0z1vHw+CGitPwEAXLSj48Z7X3EcvzIMwzUdKxVI0AlBklnE6DL5BIOmlNLkVqICQddbrqxcufJF69evvwUAdjaM/Gwp5amGOoURd0YQpdQCRDTeACSit4dhyJev+FZgBKIoOp+IjO956evr23dwcND0aERhkHBGkGQWMb3IkdVWIeLBQghOn/etgAgopY5ExO+auoaIVwohTDK+TbvIXN4pQaIoOp6IjL9MlekIZuYjUsAOtNZMjiMtXBNSyqaFXmFUnBKEo4qi6EYiOtA0QiI6OAzDG031vHy2CFimE3HWbiSEkNl6l7115wTRWvO9c/9l6nqZKl2YxlZW+Waz+dJWq3U9Ir7IIobSzx4cs3OCJO8iPwKAg0xBJaIzwjD8tKmel88GAa01Z+ty1q5Rq8rskRlBms2mjONYGaH6d+FK/OWxjL0wajZ7HlOcr8wYZjKDJO8iS4nIJq39LkQ8SgjBZ519ywGBRqMxLwgC3teyaZUqzpEZQZRSuyEiL7WeY4oyIn5bCGGUIWzah5ffNAIjIyMvmDZtGn+12ssCo/FWqzVn/vz5pd33eHrMmRGEO1JKnYKIZ1sADWU8fWYTZ9F0tNam1WqmhlC52meZEoSR01pbvbCzridJd+mTkhyVWlpNIp85QVK+sDNJTg/D0ChBrruPVTV6S0mOyi2tukaQZBYxzgKd+tiVrZZS2Sijtb4YAE5M4XflllZdJUhCEk5BOT7FIBwhpbwuhb5X3QQCSqkzEfGTtuAg4iVCiDTksu26K3qZL7Emo1BKPQ8ArkHEfWwjK1NVcNsYu6nngBy3bdiwQSxcuPDBbvrdzb66RpDkq9YcRLwGALaxDZKI3h2G4Vdt9b3e/yOQlhwAsJ6IRBiG11YZ064ShIFsNBrvCYLggpSgluKO7ZQxZqautf4SALwvTQeI+CEhhOnZ9DRd5qLbdYIk7yPnAsCHUkZ8KSK+358j6RxF3gTs7+//HCK+uXOtTUp+Q0p5UkobpVDPhSAJSS5tH5Y6Lg1K7Sn+tr6+vsW1Ws34PHyafsuom6SP8KatzQ7500MmRBwSQhiVHi0jbrkRJCHJGAAcnhK4x4locRiGF6a0U1n1lImHm8Ml5rrMVa+znCtBkpdFPnL7CgdP5xeklFyzybcEAT7PEcfxEpuU9Q5BbBHRUBiGyzuUL51Y7gRJZpJHAGB7B+jdGATBklqtph3YKrUJPgkIAJwLZ3PYyST2iWS5VcnyTYUgiGOS8HHPi/gvZxiGXGC5p1pSYOEjlmfIrbAioo1BEPA7SSlurjUJsjAESUjCJUxnmwSwBdm/EtE5YRjyEqPyjetWbdiw4RSb0jyOwNmQvJPYHpRz5IZbM4UiSEKS77WrNB7hKkz+0tUudnZhVV/ik3KgfF8k/5gWdXMF86Qd3jzkd5LKLHELR5CEJGnOJGxy0KtGlKTK+iQxjGrlumbF0+ytS95Jooz76Yr5QhIkK5Kw3UmirF+//vKhoaHVXUHZYSfJjMHX3jE5jK4g6MQNTj4kokUpC3qsTZZbpa6JxXgVliDsnFJqCSLyC6fzhogPcqmhOI51vV43usrYuTNbMZjMFjUAGAQA/m1ys1On7vI7xBlSyrOjKDqGiPj+yaBT5U3I8f4UL7dsz7an6NqdaqEJkswkxxERE6Xj23Qt4LmD+YiIo0KImy30nasMDw/PHBgYOIQJgYiDhrfJGvnTzpL+BRGdNrUKYnJJJ5Okz8jYU4Ufi+N4qOh/gLYUX+EJws5HUTSbSQIAmVeCT2YWvmiSK5nzHSY/SfGAGKk2Go0DuaJLEAT7ExHfwPUsIwMWwlwgAwA+uqkqMklBciZJv4XpJ1SI6FF+J5FSXm1rI0+9UhBkEiCl1KcQ8fQuAzYOADcR0Z3tgb4LAO4cHx+/a9GiRY/Z+rFs2bLtZs2atQcA7ElEeyDingDAd6xkTogpPnNcZ0kpv7ClOKIomh/H8eWIOM023nZi6ppkucVHHUrVSkUQRjY5486ZwIfmjPRvAeA37Xekx4jo8fauNa+5n/id/GwLANu2C3M/+bu9L7MdALwUAF6Ss++NVqt1VqfleaIoqifvJNbneACAP4jwTGJcJT5PrEpHkEmwoih6PxExUbJOpchzfFz33dGssalOtdYhAPBya3oKp8aTmaQ0h6xKSxAepEaj8SI+uMPnQlIMWq+oGs0amwJFKSURkUkykAK0hzktpVar8YZw4VupCTLl3YSXW0yU0pfbd/3EcCFpIrrQ1T0dURSJZLk1w9ZXRHyIl1tCCL5wqdCtEgSZRFhrzZ9ET+az0oVGvQvOuSbGVJcZ52S5xe9Xtu1vyTtJoSvVVIognijAmcxXEtElrmaMzT39SqnBZLnFHx5sGyeU8mYiH5wrZKskQXqNKHzVMhFd1tfXd1k3L8zkY7xMEkScmeLp/kuSu3V9ChuZqVaaIFOIwnsM/BWmDgBFSuxLO7DXIeJlcRxfltc95FrrNyXLrTQH3v6cLLd+kBYQ1/o9QZBJ0MbGxvpXr15dD4Jgkixp/vK5HotO7d1KRNcQ0dX1ep13/HNvSqmjmagAsEMKZ/6ULLd+mMKGc9WeIshU9EZGRnbp7+9nshwWx/FBiPgC5+i6M1g4Ujw9NK31UclMMitF2H9McrcKU6WmZwny9EGMougAIjqUiA5p3wnOt/TumGKg06remeSC3dzf33/zvHnzOMWl8C057sv7JNbYEdGDSe4WX5uRe/ME2cwQjI6O7hPH8R5xHL8sCIKXERG/u7wMAJ7veNRWEdGqIAjuIaIfb9y48aYy17ptNptv5H0SItopBU4PJMut3K8F9wQxHMWVK1dut27dOibKzojIfymf/Jn8fyLif+NDQ5yX9cRvRFxLRPzzcF9f3z2tVmtVVYtKRFF0RLKZ+GxDeKeK/yFZbt2UwkZqVU+Q1BB6A5tCQGv9huSdxPiOykl7RHR/q9UaWrBgQW5ndDxB/POdGQJKKa7mz+8kaU5A3tfX13fs4OBgLl/sPEEyezy8YUYgiqLDk+XWP6RA5PeIeKwQ4scpbFipeoJYweaVTBDQWh+WLLf4EiXb9rv2YbVju3nCkx31BLEdLq9nhIBS6tBkuWX9FZCI+JDasWEY/tSo8xTCniApwPOqZgg0Gg3eY+LcLetNWUTkU5x8noQLAmbePEEyh9h3MBUBrTXnxfGLu3UVSET8H94nkVL+LGt0PUGyRtjbfwYCSilO7WGSvDAFPPcmm4k/T2Fjq6qeIFuFyAtkgUBS4oiXW2nqnf0375N0WnzCJg5PEBvUvI4TBJYvX35Af38/zyTWhTcQ8dfJ8d1fOHHqaUY8QbJA1dvsGIHR0dHXt1otLlb+4o6VninI+Wx8MvGXKWxsUtUTxDWi3p4xAlEUva5dQI9Jsqux8t8V7klyt36VwsYzVD1BXKLpbVkjoLV+LZMEEdMU1bt7YmKCc7e41rKT5gniBEZvxAUCSqnXBEHAqfJcfdK28dkZ/gTMZ2pSN0+Q1BB6Ay4RaDab+yXnSfhIgW37rpRyrq3yVD1PEBcoehtOEdBavzrZTExTYONcKWXqu2U8QZwOrTfmCgGl1L7JZuI/Wdr8lZQy9Q1cniCW6Hu17BG46qqr9uF9EiJ6hUVvq9tXO6QpIPFEl54gFsh7le4hEEXR3sl5kt0Mex2XUloXj5jsyxPEEHUv3n0ElFKvSpZbszvtHRFvF0Ls26n85uQ8QdIi6PW7gkCj0XglfwJuv7zv3mGH50sp/61D2c2KeYKkRdDrdw2B5cuX75XkbvH1dVtq90opbV/un2LXE6Rrw+s7coGA1prvc/xc+95IruS4qXajlJLPnDhpniBOYPRGuo2A1vocAODNwMkkx99zjQgp5Sdc+uIJ4hJNb6tyCHiCVG5IfUAuEfAEcYmmt1U5BDxBKjekPiCXCHiCuETT26ocAp4glRtSH5BLBDxBXKLpbVUOAU+Qyg2pD8glAp4gLtH0tiqHgCdI5YbUB+QSAU8Ql2h6W5VDwBOkckPqA3KJgCeISzS9rcoh4AlSuSH1AblEwBPEJZreVuUQ8ASp3JD6gFwi4AniEk1vq3II/B+y7K5QB92laAAAAABJRU5ErkJggg=="}))),F()(A).call(A,(function(e,t){var n=e.fileViewName,r=e.key;return K().createElement(U.Dropdown.Item,{className:"".concat(0===t?"firstItem":""),key:r}," ",n)})),!A.length&&K().createElement("div",{className:"noData"},(0,W.getLangMsg)(" printd.grid.key0116")))}),[A]),N=(0,H.useCallback)((function(e){return"label"===e.element.type?K().createElement(Lg,e):K().createElement(Mg,e)}),[]);return K().createElement(K().Fragment,null,a&&K().createElement(U.Alert,{className:"".concat(o,"-alert"),message:(0,W.getLangMsg)("existSpecialStr"!==a?"printd.grid.key0117":"printd.grid.key0122"),type:"error",delayOffTime:0,closable:!0,showIcon:!0,onClose:function(){return i(!1)}}),K().createElement("span",{className:"fileName"},(0,W.getLangMsg)("printd.grid.key0118")),K().createElement("div",{className:"editor"},K().createElement(Ls,{value:w,editor:n,onChange:function(e){var t=x(e);C(t),k(e)}},K().createElement(Ds,{placeholder:(0,W.getLangMsg)("printd.grid.key0119"),id:"slate-editor",renderElement:N,onKeyDown:function(e){"("===e.key&&(e.preventDefault(),n.insertText("()"),Oo.move(n,{distance:1,unit:"offset",reverse:!0}))},autoFocus:!0,onBlur:function(e){e.persist();var t=e.relatedTarget;if("INPUT"!==(null==t?void 0:t.tagName)){var r=n.selection,a={};for(var o in r){var i=r[o],l=i.path,c=i.offset;a[o]={path:kn()(l).call(l,0,2),offset:c}}y.current=a,Oo.select(n,a),Eu.focus(n)}}}))),K().createElement("div",{className:"count"},K().createElement("div",{class:"kd-input-textarea-mark"},"".concat(m,"/100"))),K().createElement(U.Button,{icon:K().createElement(U.Icon,{type:"add"}),onClick:function(){s(!u)},className:"button-basic-left",style:{marginTop:8,width:85},id:"kdPrintDesignerFileNameBtn"},(0,W.getLangMsg)("printd.grid.key0120")),K().createElement("div",{className:"helpText"},(0,W.getLangMsg)("printd.grid.key0123")," "),K().createElement(U.Dropdown,{menu:T,visible:u,onItemClick:function(e){M(Hn()(A).call(A,(function(t){return e===t.key})))}}))}));function Mg(e){return K().createElement("p",e.attributes,e.children)}function Lg(e){var t=ns(),n=Bs(),r=e.element.textFormat,a="Date"===r?"#FFF1D4":"Number"===r||"Amount"===r?"#DCFAE4":"#E0EFFF";return K().createElement("span",(0,oe.c)({},e.attributes,{contentEditable:!1,style:{padding:"1px 8px",margin:"0 3px",verticalAlign:"baseline",display:"inline-block",borderRadius:"2px",backgroundColor:a,fontSize:"12px",cursor:"pointer",boxShadow:t&&n?"0 0 0 2px #B4D5FF":"none",lineHeight:"18px"}}),e.element.name,e.children)}Sg.displayName="FileNameExpressionView";var Rg=function(e){var t=(0,H.useRef)(null),n=e.handleChange,r=e.value,a=e.Id,o=e.className,i=e.locked,l=e.Editor,c=e.Name,u=e.Tips,s=e.dataContext,d=e.field,f=e.Id,g=l.NameHidden,h=l.DataScope,v=void 0===h?[]:h,p=l.Tips,m=l.MaxLength,C=l.Min,y=l.Max,D=(0,H.useContext)(W.GlobalConfigContext).showMessage,E=(0,H.useState)(r),w=(0,S.c)(E,2),k=w[0],A=w[1],x=(0,H.useState)(""),b=(0,S.c)(x,2),I=(b[0],b[1]),B="String"===l.DataType?"string":"number",M={style:{},placeholder:(0,W.getLangMsg)("printd.grid.key0002"),borderType:"bordered",suffix:e.Unit};(0,H.useEffect)((function(){A(r)}),[r]);var L=function(e){var t="string"===B?e.target.value:""===e.target.value?"":+e.target.value;if(r!==t)if(""!==t||"number"!==B){var a,o=(0,S.c)(v,1)[0];if(!Y().isEmpty(v)&&!Y().isUndefined(o)&&t<o?(D(p.DataScope),t=o):!Y().isUndefined(C)&&t<C&&(D(p.Min),t=C),"X"===f||"Y"===f||"Height"===f||"Width"===f){var i=d.parentId,l=s.findControl(i)||{};if("TableTail"===l.type){var c=l.width,u=l.height,g=d.width,h=d.height;"X"===f&&t+g>c&&A(t=c-g),"Y"===f&&t+h>u&&A(t=u-h),"Height"===f&&t>u&&A(t=u),"Width"===f&&t>c&&A(t=c)}}a=t,n("number"!==B||a?a:0)}else A(r)},R={};if("number"===B){if(v.length){var T=(0,S.c)(v,2),F=T[0],N=T[1];R.min=F,R.max=N}Y().isUndefined(C)||(R.min=C),Y().isUndefined(y)||(R.max=y),d.type===$t&&("H"===d.direction&&"Height"===a&&(R.max=3),"V"===d.direction&&"Width"===a&&(R.max=3))}var G=(0,H.useContext)(W.GlobalConfigContext).invokePrintDesignerCustomEvent,Z=(0,H.useCallback)((function(e){G("clickTipsLink",e)}),[G]);return K().createElement(K().Fragment,null,K().createElement(W.NameTipWrapper,{nameHidden:g,className:o,name:c,tips:u,onLinkClick:Z}),K().createElement(U.Input,(0,oe.c)({},M,{type:B,ref:t,value:k,onKeyPress:function(e){if("string"!==B){var t=["-","+","e","E"];-1!==En()(t).call(t,e.key)&&e.preventDefault()}},onChange:function(e){var t=e.target.value;if(""===t)return A(t);var n="string"===B?t:+t;if(m&&n.length>m&&(D(p.MaxLength),n=kn()(n).call(n,0,m)),k!==n){if("string"===B)return A(n);var r=v[1];!Y().isUndefined(r)&&n>r?(D(p.DataScope),A(r)):!Y().isUndefined(y)&&n>y?(D(p.Max),A(y)):n>R.max&&d.type===$t?(D((0,W.getLangMsg)("printd.grid.key0130")),A(R.max)):A(n)}},onFocus:function(e){return function(e){"number"===B&&t.current.select(),I("string"===B?e.target.value:""===e.target.value?"":+e.target.value)}(e)},onPressEnter:function(){},onBlur:L,onClick:function(e){var n;null===(n=t.current)||void 0===n||n.focus(),L(e)},disabled:i},R)))},Tg=function(e){var t,n,r,a=e.handleChange,o=e.value,i=e.className,l=e.editor,c=e.locked,u=(e.field,l.Enum),s=l.Default,d=l.NameHidden,f=(0,H.useState)(!1),g=(0,S.c)(f,2),h=g[0],v=g[1],p=s||u&&(null!==(t=null===(n=u[0])||void 0===n?void 0:n.Value)&&void 0!==t?t:null===(r=u[0])||void 0===r?void 0:r.Id);if(null==p)return"selectValue: ".concat(p);var m=F()(u).call(u,(function(e){var t;return{value:null!==(t=e.Value)&&void 0!==t?t:e.Id,label:e.Name,disabled:!1===e.Visible}})),C=e.Name,y=e.Tips;(0,H.useRef)(null);(0,H.useEffect)((function(){var e=function(e){for(var t=e.target;t&&t!==document;){if(t.classList.contains("kds-scroll-select-panel"))return;t=t.parentNode}v(!1)};return document.addEventListener("scroll",e,!0),function(){document.removeEventListener("scroll",e,!0)}}),[]);var D=(0,H.useContext)(W.GlobalConfigContext).invokePrintDesignerCustomEvent,E=(0,H.useCallback)((function(e){D("clickTipsLink",e)}),[D]);return K().createElement(K().Fragment,null,K().createElement(W.NameTipWrapper,{nameHidden:d,className:i,name:C,tips:y,onLinkClick:E}),K().createElement(U.Select,{disabled:c,placeholder:(0,W.getLangMsg)("printd.grid.key0002"),borderType:"bordered",value:Y().isUndefined(o)?p:o,onChange:function(e){v(!1),a(e)},options:m,visible:h,onVisibleChange:function(e){v(e)},popperClassName:"kds-scroll-select-panel"}))},Fg=U.Radio.Group,Ng=function(e){var t=e.handleChange,n=e.value,r=e.className,a=e.editor,o=e.locked,i=e.Id,l=e.field,c=a.Enum,u=a.NameHidden,s=a.DataType,d=a.Required,f=e.Name,g=e.Tips,h=(0,H.useContext)(pn).definition;if("MergePrint"===i){var v,p,m,C=l.dataSource;if(xn()(v=C.split(".")).call(v,"workflow"))return null;var y=Er(h,C),D=null==y||null===(p=y[0])||void 0===p?void 0:p.DsType;if(xn()(m=["Ref","Custom"]).call(m,D))return null}var E=(0,H.useContext)(W.GlobalConfigContext).invokePrintDesignerCustomEvent,w=(0,H.useCallback)((function(e){E("clickTipsLink",e)}),[E]);if("object"===(0,On.c)(c[0])){var k=F()(c).call(c,(function(e){return{label:e.Name,value:e.Value}}));return K().createElement(K().Fragment,null,K().createElement(W.NameTipWrapper,{nameHidden:u,className:r,name:f,tips:g,required:d,onLinkClick:w}),K().createElement(Fg,{disabled:o,value:null==n?void 0:n.toString(),onChange:function(e){"Boolean"===s?"false"===e.target.value?t(!1):t(!0):t(e.target.value)},options:k}))}return K().createElement(W.CheckboxPropertyEditor,(0,oe.c)({},e,{onLinkClick:w}))},Gg=function(e){var t=e.id,n=e.field,r=e.className,a=e.Name,o=e.Tips,i=e.Editor,l=void 0===i?{}:i,c=(0,H.useContext)(pn).definition,u=["Entry","ReportEntry","Attach","Custom","Ref","Subentry","Workflow","Head","Report","Approveline","Sys"],s=(0,H.useMemo)((function(){var e,t=Hn()(c).call(c,(function(e){return"Main"===e.DsType})),n=t?F()(e=Zg([t],u)).call(e,(function(e){var t,n=e.bindField,r=e.Name,a=e.ViewName;return{name:a||r,key:n,fileViewName:G()(t="".concat(a||r,"(")).call(t,n,")")}})):[];return n.push({name:"打印人",key:"$sys.printer",fileViewName:"打印人(sys.printer)"}),n.push({name:"打印时间",key:"$sys.printTime",fileViewName:"打印时间(sys.printTime)"}),n}),[c]),d=n.fileName,f=l.NameHidden,g=(0,H.useState)(!1),h=(0,S.c)(g,2),v=h[0],p=h[1],m=(0,H.useMemo)((function(){if(null!=d&&d.length)return Q()(d).call(d,(function(e,t){return"string"==typeof t?e.push(t):t.name&&e.push("{".concat(t.name,"}")),e}),[]).join("")}),[d,null==d?void 0:d.length]);return K().createElement(K().Fragment,null,K().createElement(W.NameTipWrapper,{nameHidden:f,className:r,name:a,tips:o}),K().createElement("div",{className:"".concat(r,"-query"),onClick:function(){p(!v)}},K().createElement("div",{className:Wn()(["".concat(r,"-query-text"),(0,M.c)({},"".concat(r,"-query-text-empty"),!m)])},m||(0,W.getLangMsg)("printd.grid.key0002")),K().createElement("div",{className:"".concat(r,"-query-btn")},K().createElement(U.Icon,{type:"more",style:{cursor:"pointer"}}))),K().createElement(Ig,{visible:v,selectList:s,onCancel:function(){p(!1)},onConfirm:function(){p(!1)},fileName:d,id:t}))};function Zg(e,t){return Q()(e).call(e,(function(e,n){if(!n)return[];var r=n.Items,a=n.DsType,o=n.Type,i=n.Icon;return r||xn()(t).call(t,a)||"Image"===o||"fujian"===i||e.push(n),r&&!xn()(t).call(t,a)&&"Image"!==o&&"fujian"!==i&&e.push.apply(e,(0,yn.c)(Zg(r,t))),e}),[])}var Qg=function(){var e=[],t=[[a,"Text"],[i,"CardGrid"],[a,"LayoutCell"],[a,"CardCell"],[d,"RichText"],[o,"DataCell"],[i,"DataGrid"],[g,"SubDataGrid"],[f,"SubDataCell"],[l,"QRCode"],[c,"Barcode"],[u,"Image"],[s,"Paper"],[h,"DataRow"],[v]];return O()(t).call(t,(function(t){var n,r=(0,S.c)(t,2),a=r[0],o=r[1];O()(n=m()(a)).call(n,(function(t){e.push([t,a[t],o])}))})),e};function jg(e,t){var n=e.dataContext,r=e.selectionContext;if("right"===t){var a,o=n.getRootId();return Y().last(G()(a=[o]).call(a,(0,yn.c)(r.getSelection())))===o?"PrintSetting":"PropertyView"}}var Jg=["Id","Count","CellType","Name"],Pg=["Id","Count","CellType","Name"];function Og(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ug(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?O()(n=Og(Object(a),!0)).call(n,(function(t){(0,M.c)(e,t,a[t])})):A()?b()(e,A()(a)):O()(r=Og(Object(a))).call(r,(function(t){B()(e,t,w()(a,t))}))}return e}var Wg=function(){return K().createElement("svg",{className:"icon",width:"200",height:"200",viewBox:"0 0 28 28",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},K().createElement("title",null,(0,W.getLangMsg)("printd.grid.key0026")),K().createElement("g",{id:"文本备份",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},K().createElement("path",{d:"M5.5,24 L22.5,24 L22.5,22.5 L23.999,22.5 L24,5.5 L22.5,5.5 L22.5,4 L5.5,4 L5.5,5.5 L4,5.5 L3.999,22.5 L5.5,22.5 L5.5,24 Z M4.5,23.5 L2.5,23.5 L2.5,25.5 L4.5,25.5 L4.5,23.5 Z M25.5,23.5 L23.5,23.5 L23.5,25.5 L25.5,25.5 L25.5,23.5 Z M4.5,2.5 L2.5,2.5 L2.5,4.5 L4.5,4.5 L4.5,2.5 Z M25.5,2.5 L23.5,2.5 L23.5,4.5 L25.5,4.5 L25.5,2.5 Z M5.5,26.5 L1.5,26.5 L1.5,22.5 L2.999,22.5 L3,5.5 L1.5,5.5 L1.5,1.5 L5.5,1.5 L5.5,3 L22.5,3 L22.5,1.5 L26.5,1.5 L26.5,5.5 L25,5.5 L24.999,22.5 L26.5,22.5 L26.5,26.5 L22.5,26.5 L22.5,25 L5.5,25 L5.5,26.5 Z",id:"形状结合",fill:"#404040","fill-rule":"nonzero"}),K().createElement("path",{d:"M20.5234375,19.924 C20.7995799,19.924 21.0234375,20.1478576 21.0234375,20.424 C21.0234375,20.6694599 20.8465623,20.8736084 20.6133131,20.9159443 L20.5234375,20.924 L7.55200195,20.924 C7.27585958,20.924 7.05200195,20.7001424 7.05200195,20.424 C7.05200195,20.1785401 7.22887711,19.9743916 7.46212632,19.9320557 L7.55200195,19.924 L20.5234375,19.924 Z M20.5,17.424 C20.7761424,17.424 21,17.6478576 21,17.924 C21,18.1694599 20.8231248,18.3736084 20.5898756,18.4159443 L20.5,18.424 L15.5,18.424 C15.2238576,18.424 15,18.2001424 15,17.924 C15,17.6785401 15.1768752,17.4743916 15.4101244,17.4320557 L15.5,17.424 L20.5,17.424 Z M20.5,14.424 C20.7761424,14.424 21,14.6478576 21,14.924 C21,15.1694599 20.8231248,15.3736084 20.5898756,15.4159443 L20.5,15.424 L15.5,15.424 C15.2238576,15.424 15,15.2001424 15,14.924 C15,14.6785401 15.1768752,14.4743916 15.4101244,14.4320557 L15.5,14.424 L20.5,14.424 Z",id:"形状结合",fill:"#979797","fill-rule":"nonzero"}),K().createElement("path",{d:"M12.6,17.6699621 L12.6,8.03204346 L12.6,8.03204346 L16.1159783,8.03204346 C16.4009692,8.03204346 16.632,7.80101266 16.632,7.51602173 C16.632,7.2310308 16.4009692,7 16.1159783,7 L7.78802173,7 C7.5030308,7 7.272,7.2310308 7.272,7.51602173 C7.272,7.80101266 7.5030308,8.03204346 7.78802173,8.03204346 L11.304,8.03204346 L11.304,8.03204346 L11.304,17.7739187 C11.304,18.1053028 11.57264,18.3739428 11.9040241,18.3739428 C11.9200353,18.3739428 11.9360401,18.3733019 11.952,18.3720217 C12.3179691,18.3426661 12.6,18.0371067 12.6,17.6699621 Z",id:"T",fill:"#404040","fill-rule":"nonzero"})))},zg=function(e){switch(e){case"Text":return K().createElement("svg",{className:"icon",width:"200",height:"200",viewBox:"0 0 28 28",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},K().createElement("title",null,(0,W.getLangMsg)("printd.grid.key0026")),K().createElement("g",{id:"文本备份",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},K().createElement("path",{d:"M5.5,24 L22.5,24 L22.5,22.5 L23.999,22.5 L24,5.5 L22.5,5.5 L22.5,4 L5.5,4 L5.5,5.5 L4,5.5 L3.999,22.5 L5.5,22.5 L5.5,24 Z M4.5,23.5 L2.5,23.5 L2.5,25.5 L4.5,25.5 L4.5,23.5 Z M25.5,23.5 L23.5,23.5 L23.5,25.5 L25.5,25.5 L25.5,23.5 Z M4.5,2.5 L2.5,2.5 L2.5,4.5 L4.5,4.5 L4.5,2.5 Z M25.5,2.5 L23.5,2.5 L23.5,4.5 L25.5,4.5 L25.5,2.5 Z M5.5,26.5 L1.5,26.5 L1.5,22.5 L2.999,22.5 L3,5.5 L1.5,5.5 L1.5,1.5 L5.5,1.5 L5.5,3 L22.5,3 L22.5,1.5 L26.5,1.5 L26.5,5.5 L25,5.5 L24.999,22.5 L26.5,22.5 L26.5,26.5 L22.5,26.5 L22.5,25 L5.5,25 L5.5,26.5 Z",id:"形状结合",fill:"#404040","fill-rule":"nonzero"}),K().createElement("path",{d:"M20.5234375,19.924 C20.7995799,19.924 21.0234375,20.1478576 21.0234375,20.424 C21.0234375,20.6694599 20.8465623,20.8736084 20.6133131,20.9159443 L20.5234375,20.924 L7.55200195,20.924 C7.27585958,20.924 7.05200195,20.7001424 7.05200195,20.424 C7.05200195,20.1785401 7.22887711,19.9743916 7.46212632,19.9320557 L7.55200195,19.924 L20.5234375,19.924 Z M20.5,17.424 C20.7761424,17.424 21,17.6478576 21,17.924 C21,18.1694599 20.8231248,18.3736084 20.5898756,18.4159443 L20.5,18.424 L15.5,18.424 C15.2238576,18.424 15,18.2001424 15,17.924 C15,17.6785401 15.1768752,17.4743916 15.4101244,17.4320557 L15.5,17.424 L20.5,17.424 Z M20.5,14.424 C20.7761424,14.424 21,14.6478576 21,14.924 C21,15.1694599 20.8231248,15.3736084 20.5898756,15.4159443 L20.5,15.424 L15.5,15.424 C15.2238576,15.424 15,15.2001424 15,14.924 C15,14.6785401 15.1768752,14.4743916 15.4101244,14.4320557 L15.5,14.424 L20.5,14.424 Z",id:"形状结合",fill:"#979797","fill-rule":"nonzero"}),K().createElement("path",{d:"M12.6,17.6699621 L12.6,8.03204346 L12.6,8.03204346 L16.1159783,8.03204346 C16.4009692,8.03204346 16.632,7.80101266 16.632,7.51602173 C16.632,7.2310308 16.4009692,7 16.1159783,7 L7.78802173,7 C7.5030308,7 7.272,7.2310308 7.272,7.51602173 C7.272,7.80101266 7.5030308,8.03204346 7.78802173,8.03204346 L11.304,8.03204346 L11.304,8.03204346 L11.304,17.7739187 C11.304,18.1053028 11.57264,18.3739428 11.9040241,18.3739428 C11.9200353,18.3739428 11.9360401,18.3733019 11.952,18.3720217 C12.3179691,18.3426661 12.6,18.0371067 12.6,17.6699621 Z",id:"T",fill:"#404040","fill-rule":"nonzero"})));case"RichText":return K().createElement("svg",{className:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},K().createElement("path",{d:"M821.428571 107.142857C860.877482 107.142857 892.857143 139.122518 892.857143 178.571429L892.857143 821.428571C892.857143 860.877482 860.877482 892.857143 821.428571 892.857143L178.571429 892.857143C139.122518 892.857143 107.142857 860.877482 107.142857 821.428571L107.142857 178.571429C107.142857 139.122518 139.122518 107.142857 178.571429 107.142857L821.428571 107.142857zM821.428571 142.857143L178.571429 142.857143C160.255863 142.857143 145.160459 156.644293 143.097419 174.406388L142.857143 178.571429L142.857143 821.428571C142.857143 839.744136 156.644293 854.839543 174.406388 856.902582L178.571429 857.142857L821.428571 857.142857C839.744136 857.142857 854.839543 843.355707 856.902582 825.593611L857.142857 821.428571L857.142857 178.571429C857.142857 160.255863 843.355707 145.160459 825.593611 143.097419L821.428571 142.857143zM742.093161 706.857143C751.955389 706.857143 759.950304 714.852057 759.950304 724.714286C759.950304 733.480711 753.633332 740.771729 745.303004 742.283725L742.093161 742.571429L267.857143 742.571429C257.994915 742.571429 250 734.576514 250 724.714286C250 715.947861 256.31697 708.656843 264.647299 707.144846L267.857143 706.857143L742.093161 706.857143zM742.093161 564C751.955389 564 759.950304 571.994914 759.950304 581.857143C759.950304 590.623568 753.633332 597.914586 745.303004 599.426582L742.093161 599.714286L563.521732 599.714286C553.659504 599.714286 545.664589 591.719371 545.664589 581.857143C545.664589 573.090718 551.981557 565.7997 560.311886 564.287704L563.521732 564L742.093161 564zM364.307446 267.857143C370.307446 267.857143 375.164589 269.214286 378.878875 271.928571C381.664589 273.964286 383.807446 276.522321 385.307446 279.602679L386.593161 282.857143L477.021732 545.571429C479.307446 552.428571 479.450304 558.214286 477.450304 562.928571C475.450304 567.642857 470.736018 570 463.307446 570C458.450304 570.285714 454.521732 568.928571 451.521732 565.928571C449.271732 563.678571 447.463696 560.90625 446.097625 557.611607L444.878875 554.142857L421.307446 488.571429L307.736017 488.571429L290.164589 537.857143C288.736017 541.857143 287.307446 545.714286 285.878874 549.428571C284.450303 553.142857 282.807446 556.571429 280.950303 559.714286C279.09316 562.857143 276.950303 565.357143 274.521731 567.214286C272.09316 569.071429 269.307446 570 266.164589 570C260.450303 570 256.021731 568.214286 252.878874 564.642857C250.184997 561.581632 249.800157 556.26385 251.724355 548.689504L252.878874 544.714286L342.878874 282.857143C344.307446 278.285714 346.807446 274.642857 350.378874 271.928571C353.950303 269.214286 358.593161 267.857143 364.307446 267.857143zM364.736018 311.571429L315.878874 458.571429L413.593161 458.571429L364.736018 311.571429zM742.093161 421.142857C751.955389 421.142857 759.950304 429.137771 759.950304 439C759.950304 447.766425 753.633332 455.057443 745.303004 456.569439L742.093161 456.857143L563.521732 456.857143C553.659504 456.857143 545.664589 448.862229 545.664589 439C545.664589 430.233575 551.981557 422.942557 560.311886 421.430561L563.521732 421.142857L742.093161 421.142857zM742.093161 278.285714C751.955389 278.285714 759.950304 286.28063 759.950304 296.142857C759.950304 304.909282 753.633332 312.200299 745.303004 313.712298L742.093161 314L563.521732 314C553.659504 314 545.664589 306.005085 545.664589 296.142857C545.664589 287.376433 551.981557 280.085415 560.311886 278.573417L563.521732 278.285714L742.093161 278.285714z"}));case"Image":return K().createElement("svg",{className:"icon",width:"200",height:"200",viewBox:"0 0 28 28",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},K().createElement("title",null,(0,W.getLangMsg)("printd.grid.key0027")),K().createElement("g",{id:"图片",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},K().createElement("path",{d:"M19.0635867,11.8647461 C20.8536504,11.8647461 22.8005418,13.7442816 24.9042609,17.5033525 L25.2664347,18.1661764 C25.5089081,18.6203335 25.7534299,19.0990397 26,19.6022949 L26,23 C26,24.1045695 25.1045695,25 24,25 L4,25 C2.8954305,25 2,24.1045695 2,23 L2,17.8845201 C4.66666667,15.29484 6.66666667,14 8,14 C10,14 10.8910175,16.4140625 12.9127329,16.4140625 C13.6708761,16.4140625 14.2999834,15.7743149 14.9497399,14.9746304 L15.6119234,14.1394043 C16.5187958,13.0020752 17.5510805,11.8647461 19.0635867,11.8647461 Z M19.0635867,12.8647461 C18.2328992,12.8647461 17.5590201,13.3424069 16.5714275,14.5433547 L15.7888437,15.5273213 L15.5490143,15.8193286 C15.5112838,15.8641349 15.474257,15.9074927 15.4373086,15.9501251 C14.6063027,16.9089708 13.8692177,17.4140625 12.9127329,17.4140625 C11.8290264,17.4140625 11.1560903,17.0708566 10.03841,16.1646156 L9.78761095,15.9582593 C8.89476212,15.2155435 8.5141519,15 8,15 C7.33313035,15 6.2739504,15.5469592 4.88524327,16.6528567 L4.43582359,17.0206811 L3.96493565,17.4257486 C3.88468972,17.4963682 3.80356758,17.568543 3.72157839,17.6422748 L3.21931187,18.1033643 L3,18.309 L3,23 C3,23.5128358 3.38604019,23.9355072 3.88337887,23.9932723 L4,24 L24,24 C24.5128358,24 24.9355072,23.6139598 24.9932723,23.1166211 L25,23 L25,19.838 L24.9249973,19.6846648 C22.6893998,15.2138574 20.6966562,12.9807295 19.1821547,12.8691495 L19.0635867,12.8647461 Z",id:"矩形",fill:"#979797","fill-rule":"nonzero"}),K().createElement("path",{d:"M24,3 C25.1045695,3 26,3.8954305 26,5 L26,23 C26,24.1045695 25.1045695,25 24,25 L4,25 C2.8954305,25 2,24.1045695 2,23 L2,5 C2,3.8954305 2.8954305,3 4,3 L24,3 Z M24,4 L4,4 C3.48716416,4 3.06449284,4.38604019 3.00672773,4.88337887 L3,5 L3,23 C3,23.5128358 3.38604019,23.9355072 3.88337887,23.9932723 L4,24 L24,24 C24.5128358,24 24.9355072,23.6139598 24.9932723,23.1166211 L25,23 L25,5 C25,4.48716416 24.6139598,4.06449284 24.1166211,4.00672773 L24,4 Z",id:"矩形备份",fill:"#404040","fill-rule":"nonzero"}),K().createElement("path",{d:"M8,6.5 C6.61928813,6.5 5.5,7.61928813 5.5,9 C5.5,10.3807119 6.61928813,11.5 8,11.5 C9.38071187,11.5 10.5,10.3807119 10.5,9 C10.5,7.61928813 9.38071187,6.5 8,6.5 Z M8,7.5 C8.82842712,7.5 9.5,8.17157288 9.5,9 C9.5,9.82842712 8.82842712,10.5 8,10.5 C7.17157288,10.5 6.5,9.82842712 6.5,9 C6.5,8.17157288 7.17157288,7.5 8,7.5 Z",id:"椭圆形",fill:"#404040","fill-rule":"nonzero"})));case"Barcode":return K().createElement("svg",{className:"icon",width:"200",height:"200",viewBox:"0 0 28 28",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},K().createElement("title",null,(0,W.getLangMsg)("printd.grid.key0028")),K().createElement("g",{id:"条形码",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},K().createElement("path",{d:"M2.45361328,18.5048828 C2.72975566,18.5048828 2.95361328,18.7287404 2.95361328,19.0048828 L2.95361328,19.0048828 L2.95361328,21.3505859 L2.96047986,21.4950459 C3.0331646,22.2556979 3.67391716,22.8505859 4.45361328,22.8505859 L4.45361328,22.8505859 L7,22.8505859 L7.08987563,22.8586416 C7.32312484,22.9009776 7.5,23.105126 7.5,23.3505859 C7.5,23.6267283 7.27614237,23.8505859 7,23.8505859 L7,23.8505859 L4.45361328,23.8505859 L4.28923759,23.8452683 C2.98514922,23.7606246 1.95361328,22.6760693 1.95361328,21.3505859 L1.95361328,21.3505859 L1.95361328,19.0048828 L1.96166895,18.9150072 C2.00400491,18.681758 2.20815339,18.5048828 2.45361328,18.5048828 Z M26,18.5048828 C26.2454599,18.5048828 26.4496084,18.681758 26.4919443,18.9150072 L26.5,19.0048828 L26.5,21.3505859 C26.5,22.6760693 25.4684641,23.7606246 24.1643757,23.8452683 L24,23.8505859 L21.4536133,23.8505859 C21.1774709,23.8505859 20.9536133,23.6267283 20.9536133,23.3505859 C20.9536133,23.105126 21.1304884,22.9009776 21.3637376,22.8586416 L21.4536133,22.8505859 L24,22.8505859 C24.7796961,22.8505859 25.4204487,22.2556979 25.4931334,21.4950459 L25.5,21.3505859 L25.5,19.0048828 C25.5,18.7287404 25.7238576,18.5048828 26,18.5048828 Z M7,4.50488281 C7.27614237,4.50488281 7.5,4.72874044 7.5,5.00488281 C7.5,5.2503427 7.32312484,5.45449118 7.08987563,5.49682714 L7,5.50488281 L4.45361328,5.50488281 C3.67391716,5.50488281 3.0331646,6.0997709 2.96047986,6.8604228 L2.95361328,7.00488281 L2.95361328,9.35058594 C2.95361328,9.62672831 2.72975566,9.85058594 2.45361328,9.85058594 C2.20815339,9.85058594 2.00400491,9.67371078 1.96166895,9.44046157 L1.95361328,9.35058594 L1.95361328,7.00488281 C1.95361328,5.67939941 2.98514922,4.59484414 4.28923759,4.51020049 L4.45361328,4.50488281 L7,4.50488281 Z M24,4.50488281 L24.1643757,4.51020049 C25.4684641,4.59484414 26.5,5.67939941 26.5,7.00488281 L26.5,7.00488281 L26.5,9.35058594 L26.4919443,9.44046157 C26.4496084,9.67371078 26.2454599,9.85058594 26,9.85058594 C25.7238576,9.85058594 25.5,9.62672831 25.5,9.35058594 L25.5,9.35058594 L25.5,7.00488281 L25.4931334,6.8604228 C25.4204487,6.0997709 24.7796961,5.50488281 24,5.50488281 L24,5.50488281 L21.4536133,5.50488281 L21.3637376,5.49682714 C21.1304884,5.45449118 20.9536133,5.2503427 20.9536133,5.00488281 C20.9536133,4.72874044 21.1774709,4.50488281 21.4536133,4.50488281 L21.4536133,4.50488281 L24,4.50488281 Z",id:"形状结合",fill:"#404040","fill-rule":"nonzero"}),K().createElement("path",{d:"M18,15 C18.2761424,15 18.5,15.2238576 18.5,15.5 L18.5,18.5 C18.5,18.7761424 18.2761424,19 18,19 C17.7238576,19 17.5,18.7761424 17.5,18.5 L17.5,15.5 C17.5,15.2238576 17.7238576,15 18,15 Z M6,13 C6.27614237,13 6.5,13.2238576 6.5,13.5 L6.5,18.5 C6.5,18.7761424 6.27614237,19 6,19 C5.72385763,19 5.5,18.7761424 5.5,18.5 L5.5,13.5 C5.5,13.2238576 5.72385763,13 6,13 Z M10,15 C10.2761424,15 10.5,15.2238576 10.5,15.5 L10.5,18.5 C10.5,18.7761424 10.2761424,19 10,19 C9.72385763,19 9.5,18.7761424 9.5,18.5 L9.5,15.5 C9.5,15.2238576 9.72385763,15 10,15 Z M22,17 C22.2761424,17 22.5,17.2238576 22.5,17.5 L22.5,18.5 C22.5,18.7761424 22.2761424,19 22,19 C21.7238576,19 21.5,18.7761424 21.5,18.5 L21.5,17.5 C21.5,17.2238576 21.7238576,17 22,17 Z M14,13 C14.2761424,13 14.5,13.2238576 14.5,13.5 L14.5,18.5 C14.5,18.7761424 14.2761424,19 14,19 C13.7238576,19 13.5,18.7761424 13.5,18.5 L13.5,13.5 C13.5,13.2238576 13.7238576,13 14,13 Z M22,9 C22.2761424,9 22.5,9.22385763 22.5,9.5 L22.5,15.5 C22.5,15.7761424 22.2761424,16 22,16 C21.7238576,16 21.5,15.7761424 21.5,15.5 L21.5,9.5 C21.5,9.22385763 21.7238576,9 22,9 Z M10,9 C10.2761424,9 10.5,9.22385763 10.5,9.5 L10.5,13.5 C10.5,13.7761424 10.2761424,14 10,14 C9.72385763,14 9.5,13.7761424 9.5,13.5 L9.5,9.5 C9.5,9.22385763 9.72385763,9 10,9 Z M18,9 C18.2761424,9 18.5,9.22385763 18.5,9.5 L18.5,13.5 C18.5,13.7761424 18.2761424,14 18,14 C17.7238576,14 17.5,13.7761424 17.5,13.5 L17.5,9.5 C17.5,9.22385763 17.7238576,9 18,9 Z M6,9 C6.27614237,9 6.5,9.22385763 6.5,9.5 L6.5,11.5 C6.5,11.7761424 6.27614237,12 6,12 C5.72385763,12 5.5,11.7761424 5.5,11.5 L5.5,9.5 C5.5,9.22385763 5.72385763,9 6,9 Z M14,9 C14.2761424,9 14.5,9.22385763 14.5,9.5 L14.5,11.5 C14.5,11.7761424 14.2761424,12 14,12 C13.7238576,12 13.5,11.7761424 13.5,11.5 L13.5,9.5 C13.5,9.22385763 13.7238576,9 14,9 Z",id:"形状结合",fill:"#404040","fill-rule":"nonzero"}),K().createElement("rect",{id:"矩形备份-21",x:"16.5",y:"18",width:"1",height:"1",rx:"0.5"})));case"QRCode":return K().createElement("svg",{className:"icon",width:"200",height:"200",viewBox:"0 0 28 28",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},K().createElement("title",null,(0,W.getLangMsg)("printd.grid.key0029")),K().createElement("g",{id:"二维码",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},K().createElement("path",{d:"M11,3 C12.1045695,3 13,3.8954305 13,5 L13,11 C13,12.1045695 12.1045695,13 11,13 L5,13 C3.8954305,13 3,12.1045695 3,11 L3,5 C3,3.8954305 3.8954305,3 5,3 L11,3 Z M11,4 L5,4 C4.48716416,4 4.06449284,4.38604019 4.00672773,4.88337887 L4,5 L4,11 C4,11.5128358 4.38604019,11.9355072 4.88337887,11.9932723 L5,12 L11,12 C11.5128358,12 11.9355072,11.6139598 11.9932723,11.1166211 L12,11 L12,5 C12,4.48716416 11.6139598,4.06449284 11.1166211,4.00672773 L11,4 Z",id:"矩形",fill:"#404040","fill-rule":"nonzero"}),K().createElement("path",{d:"M11,15 C12.1045695,15 13,15.8954305 13,17 L13,23 C13,24.1045695 12.1045695,25 11,25 L5,25 C3.8954305,25 3,24.1045695 3,23 L3,17 C3,15.8954305 3.8954305,15 5,15 L11,15 Z M11,16 L5,16 C4.48716416,16 4.06449284,16.3860402 4.00672773,16.8833789 L4,17 L4,23 C4,23.5128358 4.38604019,23.9355072 4.88337887,23.9932723 L5,24 L11,24 C11.5128358,24 11.9355072,23.6139598 11.9932723,23.1166211 L12,23 L12,17 C12,16.4871642 11.6139598,16.0644928 11.1166211,16.0067277 L11,16 Z",id:"矩形备份-2",fill:"#404040","fill-rule":"nonzero"}),K().createElement("path",{d:"M23,3 C24.1045695,3 25,3.8954305 25,5 L25,11 C25,12.1045695 24.1045695,13 23,13 L17,13 C15.8954305,13 15,12.1045695 15,11 L15,5 C15,3.8954305 15.8954305,3 17,3 L23,3 Z M23,4 L17,4 C16.4871642,4 16.0644928,4.38604019 16.0067277,4.88337887 L16,5 L16,11 C16,11.5128358 16.3860402,11.9355072 16.8833789,11.9932723 L17,12 L23,12 C23.5128358,12 23.9355072,11.6139598 23.9932723,11.1166211 L24,11 L24,5 C24,4.48716416 23.6139598,4.06449284 23.1166211,4.00672773 L23,4 Z",id:"矩形备份",fill:"#404040","fill-rule":"nonzero"}),K().createElement("path",{d:"M9,5.5 L7,5.5 C6.17157288,5.5 5.5,6.17157288 5.5,7 L5.5,9 C5.5,9.82842712 6.17157288,10.5 7,10.5 L9,10.5 C9.82842712,10.5 10.5,9.82842712 10.5,9 L10.5,7 C10.5,6.17157288 9.82842712,5.5 9,5.5 Z M7,6.5 L9,6.5 C9.27614237,6.5 9.5,6.72385763 9.5,7 L9.5,9 C9.5,9.27614237 9.27614237,9.5 9,9.5 L7,9.5 C6.72385763,9.5 6.5,9.27614237 6.5,9 L6.5,7 C6.5,6.72385763 6.72385763,6.5 7,6.5 Z",id:"矩形",fill:"#979797","fill-rule":"nonzero"}),K().createElement("path",{d:"M21,5.5 L19,5.5 C18.1715729,5.5 17.5,6.17157288 17.5,7 L17.5,9 C17.5,9.82842712 18.1715729,10.5 19,10.5 L21,10.5 C21.8284271,10.5 22.5,9.82842712 22.5,9 L22.5,7 C22.5,6.17157288 21.8284271,5.5 21,5.5 Z M19,6.5 L21,6.5 C21.2761424,6.5 21.5,6.72385763 21.5,7 L21.5,9 C21.5,9.27614237 21.2761424,9.5 21,9.5 L19,9.5 C18.7238576,9.5 18.5,9.27614237 18.5,9 L18.5,7 C18.5,6.72385763 18.7238576,6.5 19,6.5 Z",id:"矩形备份-3",fill:"#979797","fill-rule":"nonzero"}),K().createElement("path",{d:"M9,17.5 L7,17.5 C6.17157288,17.5 5.5,18.1715729 5.5,19 L5.5,21 C5.5,21.8284271 6.17157288,22.5 7,22.5 L9,22.5 C9.82842712,22.5 10.5,21.8284271 10.5,21 L10.5,19 C10.5,18.1715729 9.82842712,17.5 9,17.5 Z M7,18.5 L9,18.5 C9.27614237,18.5 9.5,18.7238576 9.5,19 L9.5,21 C9.5,21.2761424 9.27614237,21.5 9,21.5 L7,21.5 C6.72385763,21.5 6.5,21.2761424 6.5,21 L6.5,19 C6.5,18.7238576 6.72385763,18.5 7,18.5 Z",id:"矩形备份-4",fill:"#979797","fill-rule":"nonzero"}),K().createElement("path",{d:"M15.5,18 C15.7761424,18 16,18.2238576 16,18.5 L16,24.5 C16,24.7761424 15.7761424,25 15.5,25 C15.2238576,25 15,24.7761424 15,24.5 L15,18.5 C15,18.2238576 15.2238576,18 15.5,18 Z M18.5,19 C18.7761424,19 19,19.2238576 19,19.5 L19,24.5 C19,24.7761424 18.7761424,25 18.5,25 C18.2238576,25 18,24.7761424 18,24.5 L18,19.5 C18,19.2238576 18.2238576,19 18.5,19 Z M21.5,21 C21.7761424,21 22,21.2238576 22,21.5 L22,24.5 C22,24.7761424 21.7761424,25 21.5,25 C21.2238576,25 21,24.7761424 21,24.5 L21,21.5 C21,21.2238576 21.2238576,21 21.5,21 Z M24.5,19 C24.7761424,19 25,19.2238576 25,19.5 L25,24.5 C25,24.7761424 24.7761424,25 24.5,25 C24.2238576,25 24,24.7761424 24,24.5 L24,19.5 C24,19.2238576 24.2238576,19 24.5,19 Z M21.5,15 C21.7761424,15 22,15.2238576 22,15.5 L22,19.5 C22,19.7761424 21.7761424,20 21.5,20 C21.2238576,20 21,19.7761424 21,19.5 L21,15.5 C21,15.2238576 21.2238576,15 21.5,15 Z M18.5,15 C18.7761424,15 19,15.2238576 19,15.5 L19,17.5 C19,17.7761424 18.7761424,18 18.5,18 C18.2238576,18 18,17.7761424 18,17.5 L18,15.5 C18,15.2238576 18.2238576,15 18.5,15 Z M24.5,15 C24.7761424,15 25,15.2238576 25,15.5 L25,17.5 C25,17.7761424 24.7761424,18 24.5,18 C24.2238576,18 24,17.7761424 24,17.5 L24,15.5 C24,15.2238576 24.2238576,15 24.5,15 Z M15.5,15 C15.7761424,15 16,15.2238576 16,15.5 L16,16.5 C16,16.7761424 15.7761424,17 15.5,17 C15.2238576,17 15,16.7761424 15,16.5 L15,15.5 C15,15.2238576 15.2238576,15 15.5,15 Z",id:"形状结合",fill:"#404040","fill-rule":"nonzero"})));case"Footer":return K().createElement("svg",{className:"icon",width:"200",height:"200",viewBox:"0 0 28 28",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},K().createElement("title",null,(0,W.getLangMsg)("printd.grid.key0030")),K().createElement("g",{id:"页脚",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},K().createElement("g",{id:"编组",transform:"translate(4.000000, 1.967985)","fill-rule":"nonzero"},K().createElement("path",{d:"M1,19.532015 L2.70000005,19.532015 L2.70000005,18.532015 L1,18.532015 L1,19.532015 Z M4.4000001,19.532015 L6.10000014,19.532015 L6.10000014,18.532015 L4.4000001,18.532015 L4.4000001,19.532015 Z M7.80000019,19.532015 L9.50000024,19.532015 L9.50000024,18.532015 L7.80000019,18.532015 L7.80000019,19.532015 Z M11.2000003,19.532015 L12.9000003,19.532015 L12.9000003,18.532015 L11.2000003,18.532015 L11.2000003,19.532015 Z M14.6000004,19.532015 L16.3000004,19.532015 L16.3000004,18.532015 L14.6000004,18.532015 L14.6000004,19.532015 Z M18.0000005,19.532015 L19.5361328,19.532015 L19.5361328,18.532015 L18.0000005,18.532015 L18.0000005,19.532015 Z",id:"路径-20备份-3",fill:"#404040"}),K().createElement("path",{d:"M12.947418,0 L19.9931943,8.10498047 L19.938,8.152 L20,8.15262042 L20,22.032015 C20,23.1365845 19.1045695,24.032015 18,24.032015 L2,24.032015 C0.8954305,24.032015 0,23.1365845 0,22.032015 L0,2.03201496 C0,0.927445456 0.8954305,0.0320149557 2,0.0320149557 L12.91,0.032 L12.947418,0 Z M11.958,1.03201496 L2,1.03201496 C1.48716416,1.03201496 1.06449284,1.41805515 1.00672773,1.91539383 L1,2.03201496 L1,22.032015 C1,22.5448508 1.38604019,22.9675221 1.88337887,23.0252872 L2,23.032015 L18,23.032015 C18.5128358,23.032015 18.9355072,22.6459748 18.9932723,22.1486361 L19,22.032015 L19,9.15201496 L14.9587268,9.15262042 C13.3610459,9.15262042 12.0550659,7.90370046 11.9638195,6.32889321 L11.9587268,6.15262042 L11.958,1.03201496 Z M18.709,8.152 L12.958,1.537 L12.9587268,6.15262042 C12.9587268,7.25718992 13.8541573,8.15262042 14.9587268,8.15262042 L18.709,8.152 Z",id:"形状结合",fill:"#404040"}),K().createElement("rect",{id:"矩形备份-24",fill:"#979797",transform:"translate(10.000000, 15.532015) scale(1, -1) rotate(-180.000000) translate(-10.000000, -15.532015) ",x:"5",y:"15.032015",width:"10",height:"1",rx:"0.5"}),K().createElement("rect",{id:"矩形备份-25",fill:"#979797",transform:"translate(10.000000, 11.532015) scale(1, -1) rotate(-180.000000) translate(-10.000000, -11.532015) ",x:"5",y:"11.032015",width:"10",height:"1",rx:"0.5"}))));case"DataGrid":return K().createElement("svg",{className:"icon",width:"200",height:"200",viewBox:"0 0 28 28",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},K().createElement("title",null,(0,W.getLangMsg)("printd.grid.key0031")),K().createElement("g",{id:"数据表格",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},K().createElement("g",{id:"编组备份-5",transform:"translate(3.000000, 3.000000)"},K().createElement("path",{d:"M7.5,7.5 L7.5,12 L14.5,11.999 L14.5,7.5 L15.5,7.5 L15.5,11.999 L21,12 L21,13 L15.5,12.999 L15.5,16.999 L21,17 L21,18 L15.5,17.999 L15.5,21.5 L14.5,21.5 L14.5,17.999 L7.5,18 L7.5,21.5 L6.5,21.5 L6.5,18 L1,18 L1,17 L6.5,17 L6.5,13 L1,13 L1,12 L6.5,12 L6.5,7.5 L7.5,7.5 Z M14.5,12.999 L7.5,13 L7.5,17 L14.5,16.999 L14.5,12.999 Z",id:"形状结合",fill:"#979797"}),K().createElement("path",{d:"M20,0 C21.1045695,0 22,0.8954305 22,2 L22,20 C22,21.1045695 21.1045695,22 20,22 L2,22 C0.8954305,22 0,21.1045695 0,20 L0,2 C0,0.8954305 0.8954305,0 2,0 L20,0 Z M1,8 L1,20 C1,20.5128358 1.38604019,20.9355072 1.88337887,20.9932723 L2,21 L20,21 C20.5128358,21 20.9355072,20.6139598 20.9932723,20.1166211 L21,20 L21,8 L1,8 Z M1,7 L21,7 L21,2 C21,1.48716416 20.6139598,1.06449284 20.1166211,1.00672773 L20,1 L2,1 C1.48716416,1 1.06449284,1.38604019 1.00672773,1.88337887 L1,2 L1,7 Z",id:"形状结合",fill:"#404040","fill-rule":"nonzero"}))));case"SubDateGrid":return K().createElement("svg",{className:"icon",width:"200",height:"200",viewBox:"0 0 28 28",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},K().createElement("title",null,(0,W.getLangMsg)("printd.grid.key0032")),K().createElement("g",{id:"子数据表格",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},K().createElement("g",{id:"编组",transform:"translate(3.000000, 3.000000)","fill-rule":"nonzero"},K().createElement("path",{d:"M20,0 C21.1045695,0 22,0.8954305 22,2 L22,20 C22,21.1045695 21.1045695,22 20,22 L2,22 C0.8954305,22 0,21.1045695 0,20 L0,2 C0,0.8954305 0.8954305,0 2,0 L20,0 Z M20,1 L2,1 C1.48716416,1 1.06449284,1.38604019 1.00672773,1.88337887 L1,2 L1,20 C1,20.5128358 1.38604019,20.9355072 1.88337887,20.9932723 L2,21 L20,21 C20.5128358,21 20.9355072,20.6139598 20.9932723,20.1166211 L21,20 L21,2 C21,1.48716416 20.6139598,1.06449284 20.1166211,1.00672773 L20,1 Z",id:"矩形备份",fill:"#404040"}),K().createElement("path",{d:"M18,4.5 L4,4.5 C3.17157288,4.5 2.5,5.17157288 2.5,6 L2.5,8 C2.5,8.82842712 3.17157288,9.5 4,9.5 L18,9.5 C18.8284271,9.5 19.5,8.82842712 19.5,8 L19.5,6 C19.5,5.17157288 18.8284271,4.5 18,4.5 Z M4,5.5 L18,5.5 C18.2761424,5.5 18.5,5.72385763 18.5,6 L18.5,8 C18.5,8.27614237 18.2761424,8.5 18,8.5 L4,8.5 C3.72385763,8.5 3.5,8.27614237 3.5,8 L3.5,6 C3.5,5.72385763 3.72385763,5.5 4,5.5 Z",id:"矩形",fill:"#979797"}),K().createElement("path",{d:"M7,12.5 C7.82842712,12.5 8.5,13.1715729 8.5,14 L8.5,14 L8.5,17 C8.5,17.8284271 7.82842712,18.5 7,18.5 L7,18.5 L4,18.5 C3.17157288,18.5 2.5,17.8284271 2.5,17 L2.5,17 L2.5,14 C2.5,13.1715729 3.17157288,12.5 4,12.5 L4,12.5 Z M18.5,17 C18.7761424,17 19,17.2238576 19,17.5 C19,17.7761424 18.7761424,18 18.5,18 L18.5,18 L11.5,18 C11.2238576,18 11,17.7761424 11,17.5 C11,17.2238576 11.2238576,17 11.5,17 L11.5,17 Z M7,13.5 L4,13.5 C3.72385763,13.5 3.5,13.7238576 3.5,14 L3.5,14 L3.5,17 C3.5,17.2761424 3.72385763,17.5 4,17.5 L4,17.5 L7,17.5 C7.27614237,17.5 7.5,17.2761424 7.5,17 L7.5,17 L7.5,14 C7.5,13.7238576 7.27614237,13.5 7,13.5 L7,13.5 Z M18.5,13 C18.7761424,13 19,13.2238576 19,13.5 C19,13.7761424 18.7761424,14 18.5,14 L18.5,14 L11.5,14 C11.2238576,14 11,13.7761424 11,13.5 C11,13.2238576 11.2238576,13 11.5,13 L11.5,13 Z",id:"形状结合",fill:"#404040"}))));case"Header":return K().createElement("svg",{className:"icon",width:"200",height:"200",viewBox:"0 0 28 28",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},K().createElement("title",null,(0,W.getLangMsg)("printd.grid.key0033")),K().createElement("g",{id:"页眉",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},K().createElement("path",{d:"M16.947418,1.96798504 L23.9931943,10.0729655 L23.938,10.119985 L24,10.1206055 L24,24 C24,25.1045695 23.1045695,26 22,26 L6,26 C4.8954305,26 4,25.1045695 4,24 L4,4 C4,2.8954305 4.8954305,2 6,2 L16.91,1.99998504 L16.947418,1.96798504 Z M15.958,3 L6,3 C5.48716416,3 5.06449284,3.38604019 5.00672773,3.88337887 L5,4 L5,24 C5,24.5128358 5.38604019,24.9355072 5.88337887,24.9932723 L6,25 L22,25 C22.5128358,25 22.9355072,24.6139598 22.9932723,24.1166211 L23,24 L23,11.12 L18.9587268,11.1206055 C17.3610459,11.1206055 16.0550659,9.8716855 15.9638195,8.29687826 L15.9587268,8.12060547 L15.958,3 Z M22.709,10.119985 L16.958,3.50498504 L16.9587268,8.12060547 C16.9587268,9.22517497 17.8541573,10.1206055 18.9587268,10.1206055 L22.709,10.119985 Z",id:"形状结合",fill:"#404040","fill-rule":"nonzero"}),K().createElement("rect",{id:"矩形备份-9",fill:"#979797",transform:"translate(14.000000, 17.500000) scale(1, -1) rotate(-180.000000) translate(-14.000000, -17.500000) ",x:"9",y:"17",width:"10",height:"1",rx:"0.5"}),K().createElement("rect",{id:"矩形备份-10",fill:"#979797",transform:"translate(14.000000, 13.500000) scale(1, -1) rotate(-180.000000) translate(-14.000000, -13.500000) ",x:"9",y:"13",width:"10",height:"1",rx:"0.5"}),K().createElement("path",{d:"M5,7.5 L6.5,7.5 L6.5,6.5 L5,6.5 L5,7.5 Z M8,7.5 L9.5,7.5 L9.5,6.5 L8,6.5 L8,7.5 Z M11,7.5 L12.5,7.5 L12.5,6.5 L11,6.5 L11,7.5 Z M14,7.5 L15.5,7.5 L15.5,6.5 L14,6.5 L14,7.5 Z",id:"路径-20",fill:"#404040","fill-rule":"nonzero"})));case"LayoutGrid":return K().createElement("svg",{className:"icon",width:"200",height:"200",viewBox:"0 0 28 28",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},K().createElement("title",null,(0,W.getLangMsg)("printd.grid.key0034")),K().createElement("g",{id:"网格",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},K().createElement("rect",{id:"矩形",stroke:"#404040",x:"3.5",y:"3.5",width:"21",height:"21",rx:"2"}),K().createElement("path",{d:"M11,4 L11,10 L24,10 L24,11 L11,11 L11,24 L10,24 L10,11 L4,11 L4,10 L10,10 L10,4 L11,4 Z",id:"形状结合",fill:"#404040"}),K().createElement("path",{d:"M11,4 L11,10 L24,10 L24,11 L11,11 L11,24 L10,24 L10,11 L4,11 L4,10 L10,10 L10,4 L11,4 Z",id:"形状结合",fill:"#979797",transform:"translate(14.000000, 14.000000) scale(-1, -1) translate(-14.000000, -14.000000) "})));case"CardGrid":return K().createElement("svg",{className:"icon",width:"28px",height:"28px",viewBox:"0 0 28 28",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},K().createElement("title",null,(0,W.getLangMsg)("printd.grid.key0112")),K().createElement("g",{id:"布局",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},K().createElement("g",{transform:"translate(4.000000, 4.000000)",fill:"#404040","fill-rule":"nonzero",id:"形状结合"},K().createElement("path",{d:"M19,14 L13,14 C11.8954305,14 11,14.8954305 11,16 L11,19 C11,20.1045695 11.8954305,21 13,21 L19,21 C20.1045695,21 21,20.1045695 21,19 L21,16 C21,14.8954305 20.1045695,14 19,14 Z M19,15 C19.5522847,15 20,15.4477153 20,16 L20,19 C20,19.5522847 19.5522847,20 19,20 L13,20 C12.4477153,20 12,19.5522847 12,19 L12,16 C12,15.4477153 12.4477153,15 13,15 L19,15 Z M7,-1 L1,-1 C-0.1045695,-1 -1,-0.1045695 -1,1 L-1,7 C-1,8.1045695 -0.1045695,9 1,9 L7,9 C8.1045695,9 9,8.1045695 9,7 L9,1 C9,-0.1045695 8.1045695,-1 7,-1 Z M7,0 C7.55228475,0 8,0.44771525 8,1 L8,7 C8,7.55228475 7.55228475,8 7,8 L1,8 C0.44771525,8 0,7.55228475 0,7 L0,1 C0,0.44771525 0.44771525,0 1,0 L7,0 Z M19,-1 L13,-1 C11.8954305,-1 11,-0.1045695 11,1 L11,10 C11,11.1045695 11.8954305,12 13,12 L19,12 C20.1045695,12 21,11.1045695 21,10 L21,1 C21,-0.1045695 20.1045695,-1 19,-1 Z M19,0 C19.5522847,0 20,0.44771525 20,1 L20,10 C20,10.5522847 19.5522847,11 19,11 L13,11 C12.4477153,11 12,10.5522847 12,10 L12,1 C12,0.44771525 12.4477153,0 13,0 L19,0 Z M7,11 L1,11 C-0.1045695,11 -1,11.8954305 -1,13 L-1,19 C-1,20.1045695 -0.1045695,21 1,21 L7,21 C8.1045695,21 9,20.1045695 9,19 L9,13 C9,11.8954305 8.1045695,11 7,11 Z M7,12 C7.55228475,12 8,12.4477153 8,13 L8,19 C8,19.5522847 7.55228475,20 7,20 L1,20 C0.44771525,20 0,19.5522847 0,19 L0,13 C0,12.4477153 0.44771525,12 1,12 L7,12 Z"}))));case"Line":return K().createElement("svg",{className:"icon",width:"28px",height:"28px",viewBox:"0 0 28 28",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},K().createElement("title",null,"直线"),K().createElement("g",{id:"直线",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},K().createElement("path",{d:"M6.5,15.5046212 C5.67157288,15.5046212 5,14.8330483 5,14.0046212 C5,13.1761941 5.67157288,12.5046212 6.5,12.5046212 C7.15321869,12.5046212 7.70891488,12.9221647 7.91475048,13.5049137 L20.0852495,13.5049137 C20.2910851,12.9221647 20.8467813,12.5046212 21.5,12.5046212 C22.3284271,12.5046212 23,13.1761941 23,14.0046212 C23,14.8330483 22.3284271,15.5046212 21.5,15.5046212 C20.8471533,15.5046212 20.2917181,15.0875531 20.0856015,14.5053242 L7.91439849,14.5053242 C7.70828193,15.0875531 7.1528467,15.5046212 6.5,15.5046212 Z M21.5,13.5046212 C21.2238576,13.5046212 21,13.7284788 21,14.0046212 C21,14.2807636 21.2238576,14.5046212 21.5,14.5046212 C21.7761424,14.5046212 22,14.2807636 22,14.0046212 C22,13.7284788 21.7761424,13.5046212 21.5,13.5046212 Z M6.5,13.5046212 C6.22385763,13.5046212 6,13.7284788 6,14.0046212 C6,14.2807636 6.22385763,14.5046212 6.5,14.5046212 C6.77614237,14.5046212 7,14.2807636 7,14.0046212 C7,13.7284788 6.77614237,13.5046212 6.5,13.5046212 Z",id:"形状结合",fill:"#404040","fill-rule":"nonzero",transform:"translate(14, 14.0046) rotate(-45) translate(-14, -14.0046)"}),K().createElement("path",{d:"M23,3 C24.1045695,3 25,3.8954305 25,5 L25,23 C25,24.1045695 24.1045695,25 23,25 L5,25 C3.8954305,25 3,24.1045695 3,23 L3,5 C3,3.8954305 3.8954305,3 5,3 L23,3 Z M23,4 L5,4 C4.48716416,4 4.06449284,4.38604019 4.00672773,4.88337887 L4,5 L4,23 C4,23.5128358 4.38604019,23.9355072 4.88337887,23.9932723 L5,24 L23,24 C23.5128358,24 23.9355072,23.6139598 23.9932723,23.1166211 L24,23 L24,5 C24,4.48716416 23.6139598,4.06449284 23.1166211,4.00672773 L23,4 Z",id:"矩形备份",fill:"#404040","fill-rule":"nonzero"})));default:return K().createElement(Wg,null)}},Hg=function(e,t,n){Jn()(e)?O()(e).call(e,(function(e){e[t]=n})):e[t]=n};function Kg(e,t){return function(n){var r=n.type,a=n.parentId,o=n.transferData,i=n.cellData,l=void 0===i?[]:i,c=n.parentItem,u=e({type:r,parentId:a,transferData:o,parentItem:c}),s=t({type:r});if("DataGrid"===s.Id||s.Id===ft){var d=s.Default,f=0,g=[],h=[],v=[];u.items=_.flatten(F()(d).call(d,(function(t){var n,r,a,i=t.Id,c=t.Count,s=t.CellType,d=t.Name,p=(0,Pn.c)(t,Jg),C={};o&&o.width&&(C={columnWidth:Kd(o.width/l.length,1)});var y=_.isEmpty(p)?p:Q()(n=m()(p)).call(n,(function(e,t){return e[_.camelCase(t)]=p[t],e}),{}),D=F()(r=Qd()(a=new Array("DataRow"!==i?l.length:c)).call(a,0)).call(r,(function(t,n){var r=l[n]||{},a=r.viewText,o=void 0===a?"":a,c={Detail:r,Normal:{bindText:o?o.replace(/=\$(.+)$/g,"$1"):""}};return e({type:i,parentId:u.id,transferData:"DataCell"===i?Ug(Ug(Ug(Ug({rowId:g[f].id,columnId:h[n].id,width:h[n].columnWidth,height:g[f].rowHeight,cellType:s},y),d?{name:d}:{}),c[s]||{}),C):Ug(Ug(Ug({},y),d?{name:d}:{}),"DataColumn"===i?C:{})})}));return"DataRow"===i?g.push.apply(g,(0,yn.c)(D)):"DataColumn"===i&&h.push.apply(h,(0,yn.c)(D)),"DataCell"===i&&(f++,v.push.apply(v,(0,yn.c)(D))),D})))}return o&&(0,oe.c)(u,o),null!=o&&o.width&&(u.width=Kd(Kd(o.width/l.length,1)*l.length,1)),Yg(u)}}function Vg(e,t){return function(n){var r=n.type,a=n.parentId,o=n.transferData,i=n.gridInfo,l=void 0===i?{}:i,c=n.parentItem,u=e({type:r,parentId:a,transferData:o,parentItem:c}),s=t({type:r}),d=l.row,f=void 0===d?1:d,g=l.column,h=void 0===g?1:g;if(f=_l()(f),h=_l()(h),"LayoutGrid"===s.Id||"CardGrid"===s.Id){var v=s.Default,p=[],C=[];u.items=_.flatten(F()(v).call(v,(function(t){var n,r,a,i=t.Id,l=(t.Count,t.CellType),c=t.Name,s=(0,Pn.c)(t,Pg),d={};o&&o.width&&(d={columnWidth:Kd(o.width/h,1)});var g=_.isEmpty(s)?s:Q()(n=m()(s)).call(n,(function(e,t){return e[_.camelCase(t)]=s[t],e}),{}),v=F()(r=Qd()(a=new Array(function(e){return"DataRow"===e?f:"DataColumn"===e?h:"LayoutCell"===e?f*h:void 0}(i))).call(a,0)).call(r,(function(t,n){return e({type:i,parentId:u.id,transferData:"LayoutCell"===i?Ug(Ug({rowId:p[Math.floor(n/h)].id,columnId:C[n%h].id,width:C[n%h].columnWidth,height:p[Math.floor(n/h)].rowHeight,cellType:l},g),d):Ug(Ug(Ug({},g),c?{name:c}:{}),"DataColumn"===i?d:{})})}));return"DataRow"===i?p.push.apply(p,(0,yn.c)(v)):"DataColumn"===i&&C.push.apply(C,(0,yn.c)(v)),v})))}return o&&(0,oe.c)(u,o),null!=o&&o.width&&(u.width=Kd(Kd(o.width/h,1)*h,1)),Yg(u)}}function Yg(e){if(e.items){var t,n=e.items;return e.items=void 0,Uf(e,n,!0),G()(t=[e]).call(t,(0,yn.c)(n))}return e}function qg(e,t,n){t.findControlByCondition((function(t){return t.parentId===e})).length||t.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[e,n]]))}var Xg={Normal:["Sys","Head","Import","Main","Entry"]};function _g(e,t,n,r,a,o){var i,l,c=e.isDataGridDs,u=e.dsType,s=e.isSubDataGridDs,d=(e.dataSource,e.bindField),f=t.statType,g=t.cellType,h=t.parentId,v=t.id,p=r.initAttr,m=r.title,C=Xg[g],y=n.findControl(h),D=y.type;y.parentControl;if("Sys"===u&&!xn()(i=["=getGroupRowNumber()","=getRowNumber()"]).call(i,d))return a((0,W.getLangMsg)("printd.grid.key0113"));var E,w=or(n,v,"DataGrid")||or(n,v,"SubDataGrid");if(!Ar(o,w))return a((0,W.getLangMsg)("printd.grid.key0035"));if("Normal"===g&&!xn()(C).call(C,u))return a((0,W.getLangMsg)("printd.grid.key0036"));"Normal"!==g&&"Statistic"!==g||n.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[v,Ug(Ug({},p),{},{viewText:"Statistic"===g&&"noStat"!==f?G()(E="=".concat(f,"(")).call(E,m,")"):"=$".concat(m)})]]));if(xn()(l=["Detail","Group"]).call(l,g)){var k,A=n.findControl(h).dataSource,x=["Entry","ReportEntry","Subentry","Workflow","Report","Approveline"];if("DataGrid"===D&&!(xn()(k=["=getGroupRowNumber()","=getRowNumber()"]).call(k,p.bindField)||A&&(p.dataSource===A||!xn()(x).call(x,p.dsType))||!A&&c))return a((0,W.getLangMsg)("printd.grid.key0037"));if("SubDataGrid"===D&&!("=getRowNumber()"===p.bindField||A&&p.dataSource===A||!A&&s))return a((0,W.getLangMsg)("printd.grid.key0038"));var b=[[v,Ug(Ug({},p),{},{viewText:"=$".concat(m)})]];A||b.push([h,{dataSource:p.dataSource,dataSourceText:p.dataSourceText}]),n.batchUpdateControlPropertyValues((0,W.createUpdateAction)(b))}}var $g=function(e,t){var n=e.y,r=e.height,a=e.subGridId,o=e.tableTailId;if(Ef(e)&&null!=a&&a.length){var i=t.findControl(a[0]),l=i.subGridDirection,c=i.height;if("bottom"===l)return Kd(n+r+c,1);if("right"===l)return Kd(n+Math.max(r,c),1)}if((Ef(e)||kf(e))&&o)return Kd(n+r+t.findControl(o).height,1);if(wf(e)){var u=e.subGridDirection,s=e.parentGridId;if("right"===u){var d=t.findControl(s).height;return Kd(n+Math.max(r,d),1)}}return Kd(n+r,1)},eh=function(e,t){var n=e.y;if(wf(e)){var r=e.subGridDirection,a=e.parentGridId;if("bottom"===r)return Kd(n-t.findControl(a).height,1)}return n},th=["FontName","FontSize","Bold","Italic","UnderLine","ForeColor","BackColor","HorAlignment","Border","BorderType","VerAlignment","Padding","Strike","LineSpace"],nh=function(e,t){var n=t.Id;return xn()(th).call(th,n)},rh=function(e){return"Header"===e.type},ah=function(e){return"Footer"===e.type},oh=function(e){return"Barcode"===e.type},ih=function(e){return e?e.parentId?e:(0,oe.c)({},e,{width:Math.max(e.width-(e.marginLeft+e.marginRight),e.marginLeft+e.marginRight),height:Math.max(e.height-(e.marginTop+e.marginBottom),e.marginTop+e.marginBottom),x:0,y:0}):e},lh=n(31408),ch=n.n(lh);function uh(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function sh(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?O()(n=uh(Object(a),!0)).call(n,(function(t){(0,M.c)(e,t,a[t])})):A()?b()(e,A()(a)):O()(r=uh(Object(a))).call(r,(function(t){B()(e,t,w()(a,t))}))}return e}var dh=function(e){var t,n,r,a=e.change,o=e.id,i=e.dataContext,l=e.globalConfig,c=e.addActionRef,u=e.action,s=(l.definition,l.dataRef),d=l.showMessage,f=i.getRootId(),g=i.findControl(o);if("key"in a){var h,v=F()(h=s.current).call(h,(function(e){return e.key}));if(xn()(v).call(v,a.key))return d((0,W.getLangMsg)("printd.grid.key0048")),{change:g.key,id:o}}if(yf(g)){var p="height"in a,C="width"in a;if(p||C){var y=p?et:$e,D=y===et,E=g[y],w=a[y],k=g.parentId,A=g.rowId,x=g.columnId,b=i.findControl(A),I=i.findControl(x),B=i.findControl(k),L=w-E;Bf(b)&&B.fixedRowAtPage&&B.fixedRowCount>1&&L*(B.fixedRowCount-1);var T=[[o,(0,M.c)({},y,w)],D?[b.id,{rowHeight:w}]:[I.id,{columnWidth:w}]],N=i.findControl(k);if(N.mergeConfig){var Z=qf({items:i.getData().items,gridData:N,rowId:A,columnId:x});if(Z.length){var j,J,P=new(ua());C?O()(Z).call(Z,(function(e){P.add(e.columnId)})):O()(Z).call(Z,(function(e){P.add(e.rowId)}));var U=F()(j=(0,yn.c)(P)).call(j,(function(e){return i.findControl(e)})),z=C?a.width:a.height,H=C?"columnWidth":"rowHeight",K=F()(J=Xf(F()(U).call(U,(function(e){return e[H]})),z)).call(J,(function(e,t){return[U[t].id,(0,M.c)({},H,e)]}));return K.unshift.apply(K,T),W.console.log(Y().cloneDeep(K),"afterChange",Zf(K)),Zf(K)}}return Zf(T)}}if(g&&function(e){return"Line"===e.type}(g)){if(a.border){var V,q=R()(V=ue()(a.border.width)).call(V,(function(e){return e}))[0];if("color"!==a.changeBorderType){var X,_;a.height=Wd(q,a.scale/100,2);var $=["dashed","dotted"],ee=a.border&&R()(X=ue()(a.border.style)).call(X,(function(e){return e}))[0],te=g.border&&R()(_=ue()(g.border.style)).call(_,(function(e){return e}))[0];if(xn()($).call($,ee)&&xn()($).call($,te)||"solid"===ee&&"solid"===te);else{var ne,re,ae,ie,le=g.border&&R()(ne=ue()(g.border.color)).call(ne,(function(e){return e}))[0],ce=g.border&&R()(re=ue()(g.border.width)).call(re,(function(e){return e}))[0];O()(ae=m()(g.border.color)).call(ae,(function(e){a.border.color[e]=le})),O()(ie=m()(g.border.width)).call(ie,(function(e){a.border.width[e]=ce}))}}else{var se,de,fe=g.border&&R()(se=ue()(g.border.style)).call(se,(function(e){return e}))[0];O()(de=m()(g.border.style)).call(de,(function(e){a.border.style[e]=fe}))}"V"===g.direction&&(a.width=a.height||g.width,a.height=g.height)}return a.direction&&a.direction!==g.direction&&(a.width=g.height,a.height=g.width),{change:a,id:o}}if(g&&oh(g)&&"rotate"in a){var ge=g.width,he=g.height,ve=g.x,pe=g.y;if(t=g,n=a.rotate,r=t.rotate,Math.abs(n-r)%180==90){a.width=he,a.height=ge;var me={x:Kd(ve+ge/2-he/2),y:Kd(pe+he/2-ge/2)};a.x=me.x,a.y=me.y}return{id:o,change:a}}if(g&&function(e){return!!e&&"Text"===e.type}(g)&&Ue in a){var Ce=u[Rt]||g[Rt];a[Rt]=Ce||g[Rt]}if(Df(g)){var ye=Y().cloneDeep(g),De=Y().cloneDeep((0,oe.c)({},ye,a)),Ee=[[o,a]],we=i.getData().items,ke=R()(we).call(we,(function(e){return e.parentId===o})),Ae=cf(ke),xe=Ae.rows,be=void 0===xe?[]:xe,Ie=Ae.columns,Be=void 0===Ie?[]:Ie,Se=Ae.cells,Me=void 0===Se?[]:Se,Le=(Ae.rowData,Ae.columnData,De.x),Re=De.y,Te=De.id,Fe=De.height,Ne=De.width,Ge=(De.detailRowHeight,De.fixedRowAtPage),Ze=De.fixedRowCount,Qe=De.mergeConfig,je=(De.subGridId,De.parentGridId,De.subGridDirection,lf({columns:Be,rows:be,cells:Me,mergeConfig:Qe,templateRowCount:Ze,fixedRowAtPage:Ge,allItems:i.getData().items}).rowData);if(Ue in a){var Je,Pe,Oe=u.changeType,We=a.gridBorder,ze=a[Ue];g[Ue];if(We)Pe=function(e,t,n,r,a){var o,i;if(!r.length)return null;var l=a.rc,c=a.cc,u=xn()(o=["dashed","dotted"]).call(o,n)?.5:t===Nt?2:n,s=xn()(i=["dashed","dotted"]).call(i,n)?n:"solid",d=t===Ft||t===Nt;return O()(r).call(r,(function(n){var r=n.cells;O()(r).call(r,(function(n){var r=n.row,a=n.column,o=n.mergeConfig||{},i=o.columnLength,f=o.columnStart,g=o.rowLength,h=o.rowStart;(t===Qt||d)&&0===a&&(n[Ue].width.left=u,n[Ue].color.left=e,n[Ue].style.left=s),(t===Jt||d)&&(a!==c-1&&i+f!==c||(n[Ue].width.right=u,n[Ue].color.right=e,n[Ue].style.right=s)),(t===jt||d)&&0===r&&(n[Ue].width.top=u,n[Ue].color.top=e,n[Ue].style.top=s),(t===Pt||d)&&(r!==l-1&&g+h!==l||(n[Ue].width.bottom=u,n[Ue].color.bottom=e,n[Ue].style.bottom=s)),t===Zt&&O()(lt).call(lt,(function(e){n[Ue].width[e]=0})),t===Gt&&(n[Ue].width.left=u,n[Ue].color.left=e,n[Ue].style.left=s,n[Ue].width.top=u,n[Ue].color.top=e,n[Ue].style.top=s,r!==l-1&&g+h!==l||(n[Ue].width.bottom=u,n[Ue].color.bottom=e,n[Ue].style.bottom=s),a!==c-1&&i+f!==c||(n[Ue].width.right=u,n[Ue].color.right=e,n[Ue].style.right=s)),t===Tt&&(0!==a&&(n[Ue].width.left=u,n[Ue].color.left=e,n[Ue].style.left=s),0!==r&&(n[Ue].width.top=u,n[Ue].color.top=e,n[Ue].style.top=s))}))})),r}(We.color,We.type,We.line,je,{rc:be.length,cc:Be.length}),delete a.gridBorder;else"borderWidth"===Oe?Pe=function(e,t){var n=Vf(e)[3];return O()(t).call(t,(function(e){var t=e.cells;O()(t).call(t,(function(e){e[Ue]=mf(e[Ue],void 0,n,void 0,"solid")}))})),t}(ze,je):"borderColor"===Oe?Pe=function(e,t){var n=Vf(e)[1];return O()(t).call(t,(function(e){var t=e.cells;O()(t).call(t,(function(e){e[Ue]=mf(e[Ue],void 0,void 0,n,void 0)}))})),t}(ze,je):"borderStyle"===Oe?Pe=function(e,t){var n=Vf(e)[2];return O()(t).call(t,(function(e){var t=e.cells;O()(t).call(t,(function(e){e[Ue]=mf(e[Ue],void 0,void 0,void 0,n)}))})),t}(ze,je):a.formatBrush?(Pe=function(e,t,n){var r=n.rc,a=n.cc;return O()(e).call(e,(function(e){var n=e.cells;O()(n).call(n,(function(e){var n=e.row,o=e.column,i=e.mergeConfig||{},l=i.columnLength,c=i.columnStart,u=i.rowLength,s=i.rowStart;0===o&&(e[Ue].width.left=t.width.left,e[Ue].color.left=t.color.left,e[Ue].style.left=t.style.left),o!==a-1&&l+c!==a||(e[Ue].width.right=t.width.right,e[Ue].color.right=t.color.right,e[Ue].style.right=t.style.right),0===n&&(e[Ue].width.top=t.width.top,e[Ue].color.top=t.color.top,e[Ue].style.top=t.style.top),n!==r-1&&u+s!==r||(e[Ue].width.bottom=t.width.bottom,e[Ue].color.bottom=t.color.bottom,e[Ue].style.bottom=t.style.bottom)}))})),e}(Y().cloneDeep(je),a.border,{rc:be.length,cc:Be.length}),delete a.formatBrush):Pe=Yf(ze,void 0,je,be.length,Be.length);return Pe?G()(Ee).call(Ee,F()(Je=Q()(Pe).call(Pe,(function(e,t){return G()(e).call(e,t.cells)}),[])).call(Je,(function(e){return[e.id,{border:e.border}]}))):Ee}var He=ye.x,Ke=ye.y,Ve=ye.fixedRowAtPage,Ye=ye.height,qe=ye.width,tt=(ye.detailRowHeight,ye.fixedRowCount),nt=ye.mergeConfig,at=ye.tableTailId;if(Ve!==Ge){var ot=Hn()(be).call(be,(function(e){return e.rowType===Et})),it=(null==ot?void 0:ot.rowHeight)*(Ze-1),ct=Ge?Fe+it:Fe-it;at&&Ee.push([at,{y:ct+Ke,isfixedRowAtPage:!0}]),Ee.push([o,{height:ct,x:He,y:Ke,isfixedRowAtPage:!0}])}if(Ze!==tt){var ut=Hn()(be).call(be,(function(e){return e.rowType===Et})),st=(null==ut?void 0:ut.rowHeight)*(Ze-tt);Ge?Ee.push([o,{height:Fe+st}]):Ee.push([o,{height:Fe-st}])}if(Ye!==Fe||qe!==Ne){var dt=function(e){var t,n,r,a,o,i,l=e.x,c=e.y,u=e.width,s=e.height,d=e.id,f=e.rows,g=e.columns,h=e.dataContext,v=Y().cloneDeep(h.getData()).items,p=Hn()(v).call(v,(function(e){return e.id===d})),m=p.width,C=p.height,y=p.fixedRowAtPage,D=p.fixedRowCount;p.x=void 0===l?p.x:l,p.y=void 0===c?p.y:c,p.width=u,p.height=s;var E=s,w=F()(f).call(f,(function(e){return e.id})),k=F()(g).call(g,(function(e){return e.id})),A=R()(v).call(v,(function(e){return xn()(w).call(w,e.id)})),x=Hn()(A).call(A,(function(e){return e.rowType===Et})),b=R()(v).call(v,(function(e){return xn()(k).call(k,e.id)})),I=_f(Xf(G()(t=F()(A).call(A,(function(e){return e.rowHeight}))).call(t,y&&D>1?F()(n=Qd()(r=new Array(D-1)).call(r,0)).call(n,(function(){return x.rowHeight})):[]),E),s),B=_f(Xf(F()(b).call(b,(function(e){return e.columnWidth})),u),u);if(Y().isEqual(kn()(I).call(I,0,A.length),F()(A).call(A,(function(e){return e.rowHeight})))&&Y().isEqual(B,F()(b).call(b,(function(e){return e.columnWidth}))))return[[d,{width:m,height:C}]];var S=F()(A).call(A,(function(e,t){return e.rowHeight=I[t],e})),M=F()(b).call(b,(function(e,t){return e.columnWidth=B[t],e})),L=R()(a=F()(v).call(v,(function(e){var t=e.id,n=e.rowId,r=e.columnId;return t===p.id?[p.id,Gf(p,[Xe,_e,et,$e])]:xn()(w).call(w,t)?[t,Gf(Hn()(S).call(S,(function(e){return e.id===t})),[Ot])]:xn()(k).call(k,t)?[t,Gf(Hn()(M).call(M,(function(e){return e.id===t})),[Ut])]:xn()(w).call(w,n)&&xn()(k).call(k,r)?[t,(0,oe.c)({},Gf(Hn()(S).call(S,(function(e){return e.id===n})),[Ot],[et]),Gf(Hn()(M).call(M,(function(e){return e.id===r})),[Ut],[$e]))]:null}))).call(a,Boolean),T=R()(o=F()(v).call(v,(function(e){var t=e.id,n=(e.rowId,e.columnId,e.parentId),r=n?h.findControl(n):null;if(!r||!Lf(r))return null;var a=r.rowId,o=r.columnId;if(xn()(w).call(w,a)&&xn()(k).call(k,o)){var i={},l=df({field:r,dataContext:h}),c=l.width,u=l.height,s=h.findControlByCondition((function(e){return e.parentId===n}));return 1===s.length&&(0,oe.c)(i,{width:c,height:u}),[t,(0,oe.c)({},Gf(Hn()(S).call(S,(function(e){return e.id===a})),[Ot],[et]),Gf(Hn()(M).call(M,(function(e){return e.id===o})),[Ut],[$e]),i)]}}))).call(o,Boolean);return G()(i=[]).call(i,(0,yn.c)(L),(0,yn.c)(T))}({x:Le,y:Re,width:Ne,height:Fe,rows:be,columns:Be,dataContext:i,id:o});dt&&Ee.push.apply(Ee,(0,yn.c)(dt))}if(!Y().isEqual(De,ye)){var ft={};if(O()(rt).call(rt,(function(e){De[e]!==ye[e]&&(ft[e]=De[e])})),!Y().isEmpty(ft)){var gt=Y().cloneDeep(i.getData()).items,ht=Q()(gt).call(gt,(function(e,t){var n=t.id,r=(t.type,t.parentId),a=Hn()(gt).call(gt,(function(e){return e.id===r})),i=[];if(yf(t)&&r===o||yf(a)&&a.parentId===o){var l,c={};O()(l=ch()(ft)).call(l,(function(e){var n=(0,S.c)(e,2),r=n[0],a=n[1];r in t&&(c[r]=a)})),Y().isEmpty(c)||i.push([n,c])}return G()(e).call(e,i)}),[]);Ee.push.apply(Ee,(0,yn.c)(ht))}}if(!Y().isEqual(nt,Qe)){var vt,pt,mt,Ct=Y().cloneDeep(R()(vt=F()(ke).call(ke,(function(e){if(e.parentId===Te)return e}))).call(vt,Boolean)),yt=cf(Ct),Dt=(yt.columns,yt.cells),wt=yt.columnCount,kt=af(wt),At=R()(pt=F()(mt=m()(Qe)).call(mt,(function(e){return nt[e]&&Y().isEqual(Qe[e],nt[e])?void 0:e}))).call(pt,Boolean);O()(At).call(At,(function(e){var t,n=Qe[e],r=n.rowStart,a=n.rowLength,o=n.columnStart,i=n.columnLength,u=Hn()(Ct).call(Ct,(function(e){return e.id===Dt[kt(r,o)].id})),s=!0;Vn()(t=m()(bt)).call(t,(function(e){return u[e]}))||(Hn()(ke).call(ke,(function(e){return e.parentId===u.id}))||(s=!1));if(!s)for(var d=r;d<=r+a-1;d++)for(var f=function(){if(s)return 1;if(d!==r||g!==o){var e,t=Dt[kt(d,g)];if(Vn()(e=m()(bt)).call(e,(function(e){return t[e]}))){var n,a={};O()(n=m()(t)).call(n,(function(e){xn()(Mt).call(Mt,e)||(u[e]=t[e],a[e]=t[e])})),Ee.push([u.id,a]),s=!0}var i=Hn()(ke).call(ke,(function(e){return e.parentId===t.id}));if(i){var f=(0,oe.c)({},i,{parentId:u.id}),h=l.dataRef;f.key=(0,W.createUniqueKey)(f.key,f.type,h.current),h.current.push(f),c.current.push(f),s=!0}}},g=o;g<=o+i-1&&!f();g++);}))}var xt=Zf(Ee);if(1===xt.length){var It=(0,S.c)(xt[0],2);return{id:It[0],change:It[1]}}return xt}if(g&&g.id===f){var Bt="height"in a||"marginTop"in a||"marginBottom"in a,St="width"in a||"marginLeft"in a||"marginRight"in a,Lt=i.findControlByCondition((function(e){return"Footer"===e.type}))[0],Wt=i.findControlByCondition((function(e){return"Header"===e.type}))[0],zt=[[o,a]],Ht=a.height,Kt=a.width,Vt=a.marginTop,Yt=a.marginBottom,qt=a.marginLeft,Xt=a.marginRight;Ht=Y().isUndefined(Ht)?g.height:Ht,Kt=Y().isUndefined(Kt)?g.width:Kt,Vt=Y().isUndefined(Vt)?g.marginTop:Vt,Yt=Y().isUndefined(Yt)?g.marginBottom:Yt,qt=Y().isUndefined(qt)?g.marginLeft:qt,Xt=Y().isUndefined(Xt)?g.marginRight:Xt;var _t=Math.max(Ht-Math.max(Vt,0)-Math.max(Yt,0),0),$t=Math.max(Kt-Math.max(qt,0)-Math.max(Xt,0),0);if(Lt&&(Bt||St)){var en=Lt.height,tn=Lt.id;zt.push([tn,sh(sh({},Lt),{},{width:$t,y:_t-en})])}if(Wt&&St){var nn=Wt.id;zt.push([nn,sh(sh({},Wt),{},{width:$t})])}return zt}if(g&&ah(g)){if("height"in a){var rn=a.height,an=i.findControl(f),on=an.marginTop,ln=an.marginBottom,cn=an.height,un=Math.max(cn-Math.max(on,0)-Math.max(ln,0),0)-rn,sn=[[o,sh(sh({},a),{},{y:un})]],dn=i.findControlByCondition((function(e){return"Header"!==e.type&&"Footer"!==e.type&&e.parentId===f&&e.y+e.height>un}))||[],fn=F()(dn).call(dn,(function(e){return[e.id,{y:un-e.height}]}));return sn.push.apply(sn,(0,yn.c)(fn)),sn}return{id:o,change:a}}if(g&&rh(g)){if("height"in a){var gn=a.height,hn=[[o,a]],vn=i.findControlByCondition((function(e){return"Header"!==e.type&&"Footer"!==e.type&&e.parentId===f&&e.y<gn})),pn=vn&&F()(vn).call(vn,(function(e){return[e.id,{y:gn}]}));return hn.push.apply(hn,(0,yn.c)(pn)),hn}return{id:o,change:a}}if(g&&Bf(g)){var mn="mergeSummaryField"in a;if("mergeByField"in a&&a.mergeByField&&g.mergeByField){var Cn,Dn=a.mergeByFieldText,wn=a.mergeByField,An=wn?wn.split(";"):[],bn=g.id,In=g.mergeSummaryField,Bn=g.mergeSummaryFieldText,Mn=Bn?Bn.split(";"):[],Ln=[[o,a]],Rn=i.findControlByCondition((function(e){return Sf(e)&&e.rowId===bn})),Tn=R()(Cn=F()(Rn).call(Rn,(function(e){var t=e.mergeSummary,n=e.bindField,r=e.id;return En()(An).call(An,n)>-1&&t?[r,{mergeSummary:!1}]:null}))).call(Cn,Boolean);return Ln.push.apply(Ln,(0,yn.c)(Tn)),Ln.push([bn,{mergeSummaryField:R()(In).call(In,(function(e){return-1===En()(An).call(An,e)})),mergeSummaryFieldText:R()(Mn).call(Mn,(function(e){return!Sn()(Dn).call(Dn,e)})).join(";")}]),Ln}if(mn){var Fn,Nn=g.id,Gn=a.mergeSummaryField,Zn=[[o,a]],Qn=i.findControlByCondition((function(e){return Sf(e)&&e.rowId===Nn})),jn=R()(Fn=F()(Qn).call(Qn,(function(e){var t=e.mergeSummary,n=e.bindField,r=e.id,a=xn()(Gn).call(Gn,n);return a!==t?[r,{mergeSummary:a}]:null}))).call(Fn,Boolean);return Zn.push.apply(Zn,(0,yn.c)(jn)),Zn}return{id:o,change:a}}if(g&&Sf(g)){var Jn=g.bindField,Pn="bindField"in a;if("mergeSummary"in a&&Jn){var On=g.rowId,Un=g.viewText,Wn=a.mergeSummary,zn=Un.replace(/^=\$(\S+)$/g,"$1"),Kn=i.findControl(On),Yn=Kn.mergeSummaryField,qn=Kn.mergeSummaryFieldText,Xn=qn?qn.split(";"):[],_n=i.findControlByCondition((function(e){return Sf(e)&&e.rowId===On})),$n=R()(_n).call(_n,(function(e){return e.bindField===Jn})).length>1,er=[[o,a]];return Wn&&!xn()(Yn).call(Yn,Jn)?er.push([On,{mergeSummaryField:G()(Yn).call(Yn,Jn),mergeSummaryFieldText:G()(Xn).call(Xn,zn).join(";")}]):Wn||!xn()(Yn).call(Yn,Jn)||$n||er.push([On,{mergeSummaryField:R()(Yn).call(Yn,(function(e){return e!==Jn})),mergeSummaryFieldText:R()(Xn).call(Xn,(function(e){return e!==zn})).join(";")}]),er}if(Pn){var tr,nr,rr=g.viewText,ar=g.rowId,or=g.bindField,ir=g.mergeSummary,lr=rr.replace(/^=\$(\S+)$/g,"$1"),cr=i.findControl(ar),ur=cr.mergeSummaryField,sr=cr.mergeSummaryFieldText,dr=cr.mergeByFieldText,fr=cr.mergeByField,gr=sr?sr.split(";"):[],hr=dr?dr.split(";"):[],vr=fr?fr.split(";"):[],pr=i.findControlByCondition((function(e){return Sf(e)&&e.rowId===ar})),mr=R()(pr).call(pr,(function(e){return e.bindField===or})).length>1,Cr=[[o,a]];if(or&&xn()(vr).call(vr,or)&&!mr)Cr.push([ar,{mergeByField:G()(tr=R()(vr).call(vr,(function(e){return e!==Jn}))).call(tr,a.bindField).join(";"),mergeByFieldText:G()(nr=R()(hr).call(hr,(function(e){return e!==lr}))).call(nr,a.viewText.replace(/^=\$(\S+)$/g,"$1")).join(";")}]);return or&&ir&&xn()(ur).call(ur,or)&&!mr&&(Cr.push([ar,{mergeSummaryField:R()(ur).call(ur,(function(e){return e!==or})),mergeSummaryFieldText:R()(gr).call(gr,(function(e){return e!==lr})).join(";")}]),Cr.push([o,{mergeSummary:!1}])),Cr}}return{id:o,change:a}},fh=function(e,t,n){var r=Y().cloneDeep(e),a=[];return{items:Q()(r).call(r,(function(e,r){var o=(0,S.c)(r,2),i=o[0],l=o[1],c=t.findControl(i);return n(c,l,i,t)?(a.push(r),null==e?void 0:G()(e).call(e,c)):e}),[]),changes:a}},gh=function(e){var t=e.realChange,n=e.dataContext,r=fh(t,n,(function(e){return e&&(Ef(e)||kf(e))})),a=r.items,o=r.changes,i=fh(t,n,(function(e){return e&&wf(e)})),l=i.items,c=i.changes;null!=a&&a.length&&O()(a).call(a,(function(e,r){var a=(0,S.c)(o[r],2),i=(a[0],a[1]),l=e,c=(0,oe.c)({},Y().cloneDeep(e),i),u=c.x,s=c.y,d=c.subGridId,f=c.width,g=c.height,h=c.tableTailId,v=(c.hasTableTail,l.x),p=l.y,m=l.width,C=l.height;if(d&&d.length>0){var y=n.findControl(d);O()(y).call(y,(function(e){var n=e.subGridDirection,r=e.id,a={};"right"===n?(u===v&&f===m||(a.x=Hd(u+f,1)),s!==p&&(a.y=s)):(s===p&&g===C||(a.y=Hd(s+g,1)),u!==v&&(a.x=u)),Y().isEmpty(a)||t.push([r,a])}))}if(h){var D=n.findControl(h),E={x:u-v+D.x,y:s+g};(D.x<u||D.x>u+f)&&(E.x=u),t.push([h,E])}})),null!=l&&l.length&&O()(l).call(l,(function(e,r){var a=(0,S.c)(c[r],2),o=(a[0],a[1]),i=e,l=(0,oe.c)({},Y().cloneDeep(e),o),u=l.parentGridId,s=l.x,d=l.y,f=l.subGridDirection,g=i.x,h=i.y,v=n.findControl(u),p={};"right"===f?(s!==g&&(p.x=Hd(s-v.width,1)),d!==h&&(p.y=d)):(d!==h&&(p.y=Hd(d-v.height,1)),s!==g&&(p.x=s)),Y().isEmpty(p)||t.push([u,p])}))},hh=function(e,t,n){var r,a=e.dataContext,o=(e.selectionContext,e.globalConfig),i=e.action,l=a.getRootId(),c=i.value;if(c.length){if(1===c.length){var u=(0,S.c)(c,1),s=(0,S.c)(u[0],2),d=s[0],f=s[1];if(d===l&&"language"in f)return void W.eventBus.emit("beforeChangeLang",{resolve:t,reject:n,value:f.language});if("hasTableTail"in f)return void W.eventBus.emit("beforeChangeGridFooter",{resolve:t,reject:n,tableTail:f.hasTableTail,parentGridId:d});var g=a.findControl(d);if(g&&("x"in f||"y"in f)){var h=f.x,v=f.y,p=g.parentId,m=a.findControl(p)||{};if("TableTail"===m.type){var C=m.width,y=m.height,D=g.width,E=g.height;h+D>C&&(f.x=Math.max(C-D,0)),v+E>y&&(f.y=Math.max(y-E,0))}}}var w={current:[]},k=Zf(Q()(c).call(c,(function(e,t){var n=(0,S.c)(t,2),r=n[0],l=n[1],c=dh({change:l,id:r,globalConfig:o,dataContext:a,addActionRef:w,action:i});return Jn()(c)?e.push.apply(e,(0,yn.c)(c)):e.push([c.id,c.change]),e}),[])),A=fh(k,a,(function(e,t){return e&&(bf(e)||If(e))&&(Ot in t||Ut in t)})),x=A.items,b=A.changes;if(null!=x&&x.length){var I=a.findControl(x[0].parentId),B=I.id,M=a.findControlByCondition((function(e){return e.parentId===B&&(bf(e)||If(e))}));k.push([B,Yd(Q()(M).call(M,(function(e,t){var n,r=t.id,a=null===(n=Hn()(b).call(b,(function(e){return(0,S.c)(e,1)[0]===r})))||void 0===n?void 0:n[1],o=a?(0,oe.c)({},t,a):t;return bf(o)?Bf(o)&&I.fixedRowAtPage&&I.fixedRowCount>1?e.height+=o.rowHeight+o.rowHeight*Math.max(I.fixedRowCount-1,1):e.height+=o.rowHeight:e.width+=o.columnWidth,e}),{width:0,height:0}))]),k=Zf(k)}gh({realChange:k,dataContext:a}),function(e){var t=e.realChange,n=e.dataContext,r=[];if(Hn()(t).call(t,(function(e){var t=(0,S.c)(e,2),n=(t[0],t[1]);return n.fixedRowAtPage||!1===n.fixedRowAtPage||n.fixedRowCount})))return t;O()(t).call(t,(function(e){var t=(0,S.c)(e,2),a=t[0],o=t[1],i=n.findControl(a);if(i&&Rf(i)){var l=o.y;if(l||0===l){var c=i.parentGridId,u=n.findControl(c).height;r.push([c,{y:l-u}])}}})),t.push.apply(t,r)}({realChange:k,dataContext:a});var L=function(e,t){var n,r,a=fh(e,t,(function(e){return e&&Ff(e)})),o=a.items,i=(a.changes,Y().cloneDeep(t.getData()).items);O()(e).call(e,(function(e){var t,n=(0,S.c)(e,2),r=n[0],a=n[1],o=Hn()(i).call(i,(function(e){return e.id===r}));o&&O()(t=ch()(a)).call(t,(function(e){var t=(0,S.c)(e,2),n=t[0],r=t[1];o[n]=r}))}));var l=[];if(null===(n=o)||void 0===n||!n.length){var c,u,s=fh(e,t,(function(e,t,n,r){var a=e&&r.findControl(e.parentId);return a&&Ff(a)&&e&&(bf(e)||If(e))&&(Ot in t||Ut in t)})),d=s.items;null!=d&&d.length&&(o=R()(c=F()(u=(0,yn.c)(new(ua())(F()(d).call(d,(function(e){return e.parentId}))))).call(u,(function(e){return Hn()(i).call(i,(function(t){return t.id===e}))}))).call(c,Boolean))}return null!==(r=o)&&void 0!==r&&r.length&&O()(o).call(o,(function(e){var t,n=e.id,r=(Hn()(i).call(i,(function(e){return e.id===n})),R()(t=F()(i).call(i,(function(e){if(e.parentId===n)return e}))).call(t,Boolean)),a=cf(r).cells;O()(a).call(a,(function(e){var t=e.id,n=Hn()(i).call(i,(function(e){return e.parentId===t}));if(n){var r=df({field:e,dataContext:(0,W.createDataContext)(void 0,{items:i},{keywordMapping:{id:"id",type:"type",name:"name",key:"key",parentId:"parentId",items:"items"}})});if(r){var a=r.width,o=r.height,c=n.id,u=n.width,s=n.height,d={};u>a&&(d.width=a),s>o&&(d.height=o),Y().isEmpty(d)||l.push([c,d])}}}))})),l}(k,a);return R()(r=[{type:W.ActionType.UPDATE,value:Zf(G()(k).call(k,L))},w.current.length&&(0,W.createAddAction)(w.current)]).call(r,Boolean)}},vh=(U.Icon,(0,W.getLangMsg)("printd.grid.key0114"),(0,W.getLangMsg)("printd.grid.key0114"),U.Icon,(0,W.getLangMsg)("printd.grid.key0114"),(0,W.getLangMsg)("printd.grid.key0114"),U.Icon,(0,W.getLangMsg)("printd.grid.key0114"),(0,W.getLangMsg)("printd.grid.key0114"),U.Icon,(0,W.getLangMsg)("printd.grid.key0114"),(0,W.getLangMsg)("printd.grid.key0114"),U.Icon,(0,W.getLangMsg)("printd.grid.key0114"),(0,W.getLangMsg)("printd.grid.key0114"),{color:{top:"#000000",left:"#000000",bottom:"#000000",right:"#000000",inner:"#000000"},width:{top:.5,left:.5,bottom:.5,right:.5,inner:.5},style:{top:"solid",left:"solid",bottom:"solid",right:"solid",inner:"solid"}});function ph(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function mh(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?O()(n=ph(Object(a),!0)).call(n,(function(t){(0,M.c)(e,t,a[t])})):A()?b()(e,A()(a)):O()(r=ph(Object(a))).call(r,(function(t){B()(e,t,w()(a,t))}))}return e}var Ch=["color","width","style"],yh=["left","right"];function Dh(e,t,n){var r=e.globalConfig,a=e.dataContext,o=e.selectionContext,i=e.action,l=e.dataFactory,c=(e.modelFactory,r.showMessage),u=null,s=i.value,d=Jn()(s)?s:[s],f=Jn()(s)?s[0]:s,g=a.getRootId(),h=a.findControl(g),v=h.width,p=h.height,C=h.marginBottom,y=h.marginTop,D=h.marginLeft,E=h.marginRight,w=Math.max(p-Math.max(y,0)-Math.max(C,0),0),k=Math.max(v-Math.max(D,0)-Math.max(E,0),0),A=f.type,x=f.parentId,b=f.height,I=f.width,B=f.y,M=f.x,L=f.id,T=a.findControl(x),N=T.height,Z=T.type,j=a.findControlByCondition((function(e){return"Header"===e.type})),J=a.findControlByCondition((function(e){return"Footer"===e.type}));if(Jn()(s)||"DataGrid"!==A&&A!==ft)if("LayoutGrid"!==A){if("CardGrid"!==A){if(rh(f))if(j.length)c((0,W.getLangMsg)("printd.grid.key0043")),n((0,W.getLangMsg)("printd.grid.key0044"));else{x!==g&&n((0,W.getLangMsg)("printd.grid.key0042")),f.width=k,f.x=0,f.y=0;var P=a.findControlByCondition((function(e){return"Header"!==e.type&&"Footer"!==e.type&&e.parentId===g&&e.y<b}));u=P&&F()(P).call(P,(function(e){return[e.id,{y:b}]})),document.getElementById("printDesignerCanvasContainer").scrollTop=0}if(ah(f))if(J.length)c((0,W.getLangMsg)("printd.grid.key0046")),n((0,W.getLangMsg)("printd.grid.key0047"));else{x!==g&&n((0,W.getLangMsg)("printd.grid.key0045")),f.width=k,f.x=0,f.y=w-b;var U=a.findControlByCondition((function(e){return"Header"!==e.type&&"Footer"!==e.type&&e.parentId===g&&e.y+e.height>f.y}))||[];u=U&&F()(U).call(U,(function(e){var t=function(e,t){var n=e.height,r=e.subGridId;if(Ef(e)&&null!=r&&r.length){var a=t.findControl(r[0]),o=a.subGridDirection,i=a.height;if("bottom"===o)return Kd(n+i,1);if("right"===o)return Math.max(n,i)}if(wf(e)){var l=e.subGridDirection,c=e.parentGridId,u=t.findControl(c).height;if("right"===l)return Math.max(n,u)}return n}(e,a);return[e.id,{y:Kd(f.y-t,1)}]}));var z=document.getElementById("printDesignerCanvasContainer"),H=z.scrollHeight;z.scrollTop=H}if((rh(T)||ah(T)||Rf(T))&&B+b>N&&(u=b>=N?F()(d).call(d,(function(e){return[e.id,{y:0,height:N,width:Kd(N/b*I,1)}]})):F()(d).call(d,(function(e){return[e.id,{y:N-b}]}))),j.length&&!ah(f)&&x===g){var K=j[0].height;B<K&&(Ef(f)||Ff(s)?f.y=B+K:O()(d).call(d,(function(e){e.y+=K})))}if("1"===a.getData().bizType&&oh(f)&&(f.width=k),Lf(T)||Tf(T)){var V=df({field:T,dataContext:a}),q=V.width,X=V.height;a.findControlByCondition((function(e){return e.parentId===x})).length?n("error: fail to add control to layoutcell;accept only one children"):u=[[L,{x:0,y:0,width:q,height:X}]]}if(Df(f)){var _=R()(d).call(d,(function(e){return e.parentId===L&&"DataColumn"===e.type})),$=Q()(_).call(_,(function(e,t){return e.width=Kd(e.width+t.columnWidth,1),e}),{width:0});if(u=[[L,$]],Ef(f)){var ee=f.subGridId||[];O()(ee).call(ee,(function(e){var t=a.findControl(e),n=t.subGridDirection,r=t.x;"right"===n&&r!==Kd(M+$.width,1)&&u.push([e,{x:Kd(M+$.width,1)}])}))}}if(bf(f)){var te,ne,re=i.rowIndex,ae=i.index,ie=i.direction,le=f.parentId,ce=f.rowType,ue=Nf(a,le),se=ue.items,de=ue.gridData,fe=ue.allItems,ge=Y().cloneDeep(fe),he=Y().cloneDeep(se),ve=Y().cloneDeep(de),pe=cf(se),me=pe.rows,Ce=void 0===me?[]:me,ye=pe.columns,De=void 0===ye?[]:ye,Ee=(pe.cells,pe.rowData),we=(pe.columnData,pe.rowCount,{height:ve.height}),ke=[],Ae={};O()(rt).call(rt,(function(e){ve[e]&&(Ae[e]=ve[e])})),O()(te=i.value).call(te,(function(e){var t;we.height+=e.rowHeight,ve.height+=e.rowHeight;var n=F()(t=Ee[re]).call(t,(function(t,n){var r=t.type,a=t.border,o=t.backColor,c=mh({rowId:e.id,columnId:De[n].id,cellType:e.rowType},Ae);if(!(0===re&&"up"===i.direction||re===m()(Ee).length-1&&"bottom"===i.direction)){var u=Y().cloneDeep(vh),s="up"===i.direction?Ee[re-1][n]:Ee[re+1][n];Hn()(Ch).call(Ch,(function(e){return Hn()(yh).call(yh,(function(t){return a[e][t]!==s.border[e][t]}))}))||O()(Ch).call(Ch,(function(e){return O()(yh).call(yh,(function(t){return u[e][t]=a[e][t]}))})),(0,oe.c)(c,{border:u}),o===s.backColor&&(0,oe.c)(c,{backColor:o})}return l({type:r,parentId:le,transferData:c})}));ke.push.apply(ke,(0,yn.c)(n))})),la()(ge).apply(ge,G()(ne=[ae,0]).call(ne,(0,yn.c)(i.value))),ge.push.apply(ge,ke);var xe=ve.mergeConfig,be=void 0===xe?{}:xe;if(!Y().isEmpty(be)){var Ie,Be=i.value.length,Se=Q()(Ie=m()(be)).call(Ie,(function(e,t){var n,r,a=F()(n=t.split("_")).call(n,(function(e){return+e})),o=(0,S.c)(a,2),i=o[0],l=o[1],c=Ce[i].rowType,u=ce===c?Be:0,s=be[t],d=s.rowLength;s.columnLength;if(re<i)e[G()(r="".concat(i+Be,"_")).call(r,l)]=(0,oe.c)({},be[t],{rowStart:i+Be});else if(re===i&&"up"===ie){var f;e[G()(f="".concat(i+Be,"_")).call(f,l)]=(0,oe.c)({},be[t],{rowStart:i+Be})}else e[t]=re===i&&1!==d||re>i&&re<i+d-1||re===i+d-1&&"up"===ie?mh(mh({},be[t]),{},{rowLength:d+u}):mh({},be[t]);return e}),{});we.mergeConfig=Y().omitBy(Se,Y().isUndefined),ve.mergeConfig=we.mergeConfig}var Me=zf(ve,ge,he);O()(ke).call(ke,(function(e){var t=Hn()(Me).call(Me,(function(t){var n=(0,S.c)(t,2),r=n[0];n[1];return e.id===r}));t&&(0,oe.c)(e,t[1])}));var Le=[[le,we]];return gh({realChange:Le,dataContext:a}),[i,(0,W.createAddAction)(ke),(0,W.createUpdateAction)(G()(Me).call(Me,Le))]}if(If(f)){var Re,Te,Fe=i.columnIndex,Ne=i.index,Ge=i.direction,Ze=f.parentId,Qe=Nf(a,Ze),je=Qe.items,Je=Qe.gridData,Pe=Qe.allItems,Oe=Y().cloneDeep(Pe),Ue=Y().cloneDeep(je),We=Y().cloneDeep(Je),ze=cf(je),He=ze.rows,Ke=void 0===He?[]:He,Ve=(ze.columns,ze.cells,ze.rowData,ze.columnData),Ye=(ze.columnCount,{width:We.width}),qe=[],Xe={};O()(rt).call(rt,(function(e){We[e]&&(Xe[e]=We[e])})),O()(Re=i.value).call(Re,(function(e){var t;We.width+=e.columnWidth,Ye.width+=e.columnWidth,qe.push.apply(qe,(0,yn.c)(F()(t=Ve[Fe]).call(t,(function(t,n){var r=t.type;return l({type:r,parentId:Ze,transferData:mh({rowId:Ke[n].id,columnId:e.id,cellType:Ke[n].rowType},Xe)})}))))})),la()(Oe).apply(Oe,G()(Te=[Ne,0]).call(Te,(0,yn.c)(i.value))),Oe.push.apply(Oe,qe);var _e=We.mergeConfig,$e=void 0===_e?{}:_e;if(!Y().isEmpty($e)){var et,tt=i.value.length,nt=Q()(et=m()($e)).call(et,(function(e,t){var n,r,a=F()(n=t.split("_")).call(n,(function(e){return+e})),o=(0,S.c)(a,2),i=o[0],l=o[1],c=$e[t],u=(c.rowLength,c.columnLength);if(Fe<l)e[G()(r="".concat(i,"_")).call(r,l+tt)]=(0,oe.c)({},$e[t],{columnStart:l+tt});else if(Fe===l&&"up"===Ge){var s;e[G()(s="".concat(i,"_")).call(s,l+tt)]=(0,oe.c)({},$e[t],{columnStart:l+tt})}else e[t]=Fe===l&&1!==u||Fe>l&&Fe<l+u-1||Fe===l+u-1&&"up"===Ge?mh(mh({},$e[t]),{},{columnLength:u+tt}):mh({},$e[t]);return e}),{});Ye.mergeConfig=Y().omitBy(nt,Y().isUndefined),We.mergeConfig=Ye.mergeConfig}var at=zf(We,Oe,Ue);O()(qe).call(qe,(function(e){var t=Hn()(at).call(at,(function(t){var n=(0,S.c)(t,2),r=n[0];n[1];return e.id===r}));t&&(0,oe.c)(e,t[1])}));var ot=[[Ze,Ye]];return gh({realChange:ot,dataContext:a}),[i,(0,W.createAddAction)(qe),(0,W.createUpdateAction)(G()(at).call(at,ot))]}var it=[i];return u&&u.length&&it.push.apply(it,(0,yn.c)(hh({dataContext:a,selectionContext:o,action:{type:W.ActionType.UPDATE,value:u},globalConfig:r}))),it}x===g?W.eventBus.emit("card-setting",{resolve:t,reject:n}):"TableTail"===Z&&W.eventBus.emit("card-setting",{resolve:t,reject:n,parentId:x})}else x===g?W.eventBus.emit("layoutGrid-setting",{resolve:t,reject:n}):"TableTail"===Z&&W.eventBus.emit("layoutGrid-setting",{resolve:t,reject:n,parentId:x});else x===g&&W.eventBus.emit("grid-guide",{resolve:t,reject:n,controlType:A,transferData:i.transferData})}function Eh(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function wh(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?O()(n=Eh(Object(a),!0)).call(n,(function(t){(0,M.c)(e,t,a[t])})):A()?b()(e,A()(a)):O()(r=Eh(Object(a))).call(r,(function(t){B()(e,t,w()(a,t))}))}return e}var kh=function(e){return Jn()(e)?e:[e]},Ah=function(e){if(Y().isUndefined(e))return!0;var t=e.rowLength,n=e.columnLength;return 1===t&&1===n};function xh(e,t,n){e.globalConfig;var r,a=e.dataContext,o=(e.selectionContext,e.action),i=(e.dataFactory,e.modelFactory,Jn()(o.value)?o.value[0]:o.value),l=a.findControl(i),c=kh(o.value),u=a.findControl(c),s=[];if(bf(l)){var d,f=l.parentId,g=Nf(a,f),h=g.items,v=g.gridData,p=g.allItems,C=Y().cloneDeep(v),y=cf(h),D=y.rows,E=void 0===D?[]:D,w=(y.columns,y.cells,y.rowData),k=(y.columnData,y.rowCount,p),A=Y().cloneDeep(h),x={height:C.height},b=C.mergeConfig,I=void 0===b?{}:b;O()(d=kh(o.value)).call(d,(function(e){var t,n=de()(E).call(E,(function(t){return t.id===e})),r=E[n];x.height-=r.rowHeight,C.height-=r.rowHeight;var a=F()(t=w[n]).call(t,(function(e){return e.id}));if(k=R()(k).call(k,(function(e){var t=e.id;e.parentId;return r.id!==t&&!xn()(a).call(a,t)})),!Y().isEmpty(I)){var o,i=n;O()(o=m()(I)).call(o,(function(e){var t,n,r=F()(t=e.split("_")).call(t,(function(e){return+e})),a=(0,S.c)(r,2),o=a[0],l=a[1],c=I[e],u=c.rowLength;c.columnLength;if(i<o)I[G()(n="".concat(o-1,"_")).call(n,l)]=wh(wh({},I[e]),{},{rowStart:o-1}),I[e]=void 0;else if(i>o){var s=I[e],d=s.rowLength;s.columnLength;I[e]=wh(wh({},I[e]),{},{rowLength:o+d-1<i?d:d-1})}else{var f;if(1===u)I[e]=void 0;else I[G()(f="".concat(o,"_")).call(f,l)]=(0,oe.c)({},I[e],{rowStart:o,rowLength:u-1})}})),x.mergeConfig=Y().omitBy(I,Ah),C.mergeConfig=x.mergeConfig}}));var B=zf(C,k,A,!0),M=[[f,x]];return gh({realChange:M,dataContext:a}),[(0,W.createDeleteAction)(Y().difference(F()(p).call(p,(function(e){return e.id})),F()(k).call(k,(function(e){return e.id})))),(0,W.createUpdateAction)(G()(B).call(B,M))]}if(If(l)){var L,T,N,Z,j=l.parentId,J=Nf(a,j),P=J.items,U=J.gridData,z=J.allItems,H=Y().cloneDeep(U),K=cf(P),V=(K.rows,K.columns),q=void 0===V?[]:V,X=(K.cells,K.rowData,K.columnData),_=(K.rowCount,z),$=Y().cloneDeep(P),ee={width:H.width},te=H.mergeConfig,ne=void 0===te?{}:te,re=(null===(L=a.findControlByCondition((function(e){return(t=e).rowType===Et&&"DataRow"===t.type&&e.parentId===j;var t})))||void 0===L?void 0:L[0])||{},ae=null===(T=a.findControlByCondition((function(e){return e.columnId===l.id&&e.rowId===(null==re?void 0:re.id)})))||void 0===T?void 0:T[0],ie=ae||{},le=ie.bindField,ce=ie.viewText,ue=ie.mergeSummary,se=re||{},fe=se.mergeSummaryField,ge=se.mergeSummaryFieldText,he=se.mergeByField,ve=se.mergeByFieldText,pe=null==ce?void 0:ce.replace(/^=\$(\S+)$/g,"$1"),me=[],Ce=a.findControlByCondition((function(e){return Sf(e)&&e.rowId===(null==re?void 0:re.id)})),ye=ge?ge.split(";"):[],De=he?he.split(";"):[],Ee=ve?ve.split(";"):[],we=R()(Ce).call(Ce,(function(e){return e.bindField===le})).length>1;if(he&&xn()(De).call(De,le)&&!we){var ke=R()(De).call(De,(function(e){return e!==le})).join(";");ke?me.push([re.id,{mergeByField:ke,mergeByFieldText:R()(Ee).call(Ee,(function(e){return e!==pe})).join(";")}]):me.push([re.id,{mergeByField:"",mergeByFieldText:"",mergeSummaryField:[],mergeSummaryFieldText:""}])}else ue&&xn()(fe).call(fe,le)&&!we&&me.push([re.id,{mergeSummaryField:R()(fe).call(fe,(function(e){return e!==le})),mergeSummaryFieldText:R()(ye).call(ye,(function(e){return e!==pe})).join(";")}]);O()(N=kh(o.value)).call(N,(function(e){var t,n=de()(q).call(q,(function(t){return t.id===e})),r=q[n];ee.width-=r.columnWidth,H.width-=r.columnWidth;var a=F()(t=X[n]).call(t,(function(e){return e.id}));if(_=R()(_).call(_,(function(e){var t=e.id;e.parentId;return r.id!==t&&!xn()(a).call(a,t)})),!Y().isEmpty(ne)){var o,i=n;O()(o=m()(ne)).call(o,(function(e){var t,n,r=F()(t=e.split("_")).call(t,(function(e){return+e})),a=(0,S.c)(r,2),o=a[0],l=a[1],c=ne[e],u=(c.rowLength,c.columnLength);if(i<l)ne[G()(n="".concat(o,"_")).call(n,l-1)]=wh(wh({},ne[e]),{},{columnStart:l-1}),ne[e]=void 0;else if(i>l){var s=ne[e],d=(s.rowLength,s.columnLength);ne[e]=wh(wh({},ne[e]),{},{columnLength:l+d-1<i?d:d-1})}else{var f;if(1===u)ne[e]=void 0;else ne[G()(f="".concat(o,"_")).call(f,l)]=(0,oe.c)({},ne[e],{columnStart:l,columnLength:u-1})}})),ee.mergeConfig=Y().omitBy(ne,Ah),H.mergeConfig=ee.mergeConfig}}));var Ae=zf(H,_,$,!0),xe=[[j,ee]];return gh({realChange:xe,dataContext:a}),[(0,W.createDeleteAction)(Y().difference(F()(z).call(z,(function(e){return e.id})),F()(_).call(_,(function(e){return e.id})))),(0,W.createUpdateAction)(G()(Z=G()(Ae).call(Ae,xe)).call(Z,me))]}if(yf(l)){var be,Ie,Be,Se,Me=F()(be=o.value).call(be,(function(e){return[e,bt]})),Le={},Re=[],Te=[],Fe="";O()(u).call(u,(function(e){var t=e.parentId,n=(e.type,e.bindField),r=e.id;if(Te=Te||a.findControl(Fe),Fe=Fe||t,n){var o=e.viewText,i=e.rowId,l=e.mergeSummary,c=o.replace(/^=\$(\S+)$/g,"$1"),u=a.findControl(i),s=u.mergeSummaryField,d=u.mergeSummaryFieldText,f=u.mergeByField,g=u.mergeByFieldText;Le[i]||(Le[i]={mergeByField:f,mergeByFieldText:g,mergeSummaryField:s,mergeSummaryFieldText:d});var h=Le[i].mergeByField?Le[i].mergeByField.split(";"):[],v=Le[i].mergeByFieldText?Le[i].mergeByFieldText.split(";"):[],p=Le[i].mergeSummaryFieldText?Le[i].mergeSummaryFieldText.split(";"):[],m=a.findControlByCondition((function(e){return Sf(e)&&e.rowId===i})),C=R()(m).call(m,(function(e){return e.bindField===n})).length>1;if(Le[i].mergeByField&&xn()(h).call(h,n)&&!C){var y;Re=G()(y=[]).call(y,(0,yn.c)(Re),[[r,{mergeSummary:!1}]]);var D=R()(h).call(h,(function(e){return e!==n})).join(";");Le[i]=wh(wh({},Le[i]),{},D?{mergeByField:D,mergeByFieldText:R()(v).call(v,(function(e){return e!==c})).join(";")}:{mergeByField:"",mergeByFieldText:"",mergeSummaryField:[],mergeSummaryFieldText:""})}else l&&xn()(s).call(s,n)&&!C&&(Le[i]=wh(wh({},Le[i]),{},{mergeSummaryField:R()(s).call(s,(function(e){return e!==n})),mergeSummaryFieldText:R()(p).call(p,(function(e){return e!==c})).join(";")}),Me.push([r,{mergeSummary:!1}]))}}));var Ne=F()(Ie=m()(Le)).call(Ie,(function(e){return[e,Le[e]]}));Me=G()(Be=[]).call(Be,(0,yn.c)(Me),(0,yn.c)(Ne),(0,yn.c)(Re));var Ge=(Ef(Te)||wf(Te))&&!a.findControlByCondition((function(e){var t,n=e.parentId,r=e.cellType,a=e.bindField,i=e.id;return n===Fe&&"Detail"===r&&!(null!==(t=o.value)&&void 0!==t&&xn()(t).call(t,i))&&a&&"=getRowNumber()"!==a})).length;Ge&&Me.push([Fe,{dataSource:"",dataSourceText:""}]);var Ze=Q()(Se=o.value).call(Se,(function(e,t){var n,r=a.findControlByCondition((function(e){return e.parentId===t}))||[],o=F()(r).call(r,(function(e){return e.id}));return G()(n=[]).call(n,(0,yn.c)(e),(0,yn.c)(o))}),[]);return[(0,W.createUpdateAction)(Me),(0,W.createDeleteAction)(Ze)]}return Vn()(u).call(u,(function(e){return Ef(e)}))&&O()(u).call(u,(function(e){var t=e.subGridId,n=e.tableTailId;n&&s.push((0,W.createDeleteAction)(n)),t&&t.length>0&&s.push((0,W.createDeleteAction)(t))})),Vn()(u).call(u,(function(e){return kf(e)}))&&O()(u).call(u,(function(e){var t=e.tableTailId;t&&s.push((0,W.createDeleteAction)(t))})),Vn()(u).call(u,(function(e){return Rf(e)}))&&O()(u).call(u,(function(e){var t=e.parentGridId;t&&!xn()(c).call(c,t)&&s.push((0,W.createUpdateAction)([[t,{hasTableTail:"",tableTailId:""}]]))})),Vn()(u).call(u,(function(e){return wf(e)}))&&O()(u).call(u,(function(e){var t,n=e.parentGridId;n&&!xn()(c).call(c,n)&&s.push((0,W.createUpdateAction)([[n,{subGridId:R()(t=a.findControl(n).subGridId).call(t,(function(t){return t!==e.id}))}]]))})),G()(r=[o]).call(r,s)}function bh(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ih(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?O()(n=bh(Object(a),!0)).call(n,(function(t){(0,M.c)(e,t,a[t])})):A()?b()(e,A()(a)):O()(r=bh(Object(a))).call(r,(function(t){B()(e,t,w()(a,t))}))}return e}var Bh=function(e,t,n){var r=e.globalConfig,a=e.dataContext,o=e.selectionContext,i=e.action,l=e.dataFactory,c=e.modelFactory,u=i.value;if(u.length){var s=(0,S.c)(u,2),d=s[0],f=s[1],g=a.findControl(d),h=a.getRootId(),v=a.findControl(h),p=v.width-v.marginLeft-v.marginRight,m=a.findControl(d);if(kf(m)&&"switchDataSource"===(null==f?void 0:f.methodName)){var C,y=f.dataSource,D=f.dataSourceText,E=f.dsType,w=[[d,{dataSource:y,dataSourceText:D,dsType:E,tableTailId:""}]],k=a.findControlByCondition((function(e){return e.parentId===d&&"LayoutCell"===e.type})),A=g.tableTailId,x=F()(k).call(k,(function(e){return e.id}));return G()(C=[(0,W.createDeleteAction)(A)]).call(C,(0,yn.c)(xh({dataContext:a,selectionContext:o,action:{type:W.ActionType.DELETE,value:x},globalConfig:r})),(0,yn.c)(hh({dataContext:a,selectionContext:o,action:{type:W.ActionType.UPDATE,value:w},globalConfig:r})))}if((Ef(g)||wf(g))&&"dataSource"in f){var b,I,B,M,L=g.x,R=g.y,T=g.width,N=g.type,Z=g.parentGridId,Q=g.subGridDirection,j=g.subGridId,J={type:N,parentId:h},P=f.dataSource,O=Kg(l,c),U=(null===(b=P[0])||void 0===b?void 0:b.bindText)||"";U=U?U.replace(/(\S+)\.(\S+)(\.\S+)$/g,"$2"):"";var z={parentGridId:Z,subGridDirection:Q},H=null!=j&&j.length?{subGridId:j}:{},K=Ih(Ih({dataSource:(null===(I=P[0])||void 0===I?void 0:I.dataSource)||"",dataSourceText:U,width:"DataGrid"!==N||null!=j&&j.length?T:p},"DataGrid"===N?H:{}),"SubDataGrid"===N?z:{}),V=O((0,oe.c)({},J,{cellData:P,transferData:K}));V[0].x=L,V[0].y=R;var Y=Ef(g)?F()(B=V[0].subGridId||[]).call(B,(function(e){return"bottom"===a.findControl(e).subGridDirection?[e,{parentGridId:V[0].id,y:Kd(V[0].y+V[0].height,1)}]:[e,{parentGridId:V[0].id}]})):[];return G()(M=[(0,W.createDeleteAction)(d)]).call(M,(0,yn.c)(Dh({dataContext:a,selectionContext:o,action:(0,W.createAddAction)(V,{isDealPos:!1}),globalConfig:r})),[(0,W.createUpdateAction)(Y)])}return hh({dataContext:a,selectionContext:o,action:{type:W.ActionType.UPDATE,value:[u]},globalConfig:r})}};var Sh=function(e,t,n,r){for(var a,o=[e.x,e.y].join("-"),i=["DataCell","LayoutCell","DataRow","DataColumn","Header"];null!==(l=r[n])&&void 0!==l&&xn()(l).call(l,o)&&!xn()(i).call(i,e.type);){var l,c,u,s;if(null===(c=r[n])||void 0===c||!xn()(c).call(c,o))break;o=F()(u=o.split("-")).call(u,(function(e){return+e+5})).join("-");var d=F()(s=o.split("-")).call(s,(function(e){return+e})),f=(0,S.c)(d,2),g=f[0],h=f[1];if(t&&n){var v,p=g,m=h,C=!1,y=!1;if(g+e.width>t.width&&(C=!0,p=Math.max(t.width-e.width,0)),h+e.height>t.height&&(y=!0,m=Math.max(t.height-e.height,0)),o=G()(v="".concat(p,"-")).call(v,m),C&&y)break}}var D=F()(a=o.split("-")).call(a,(function(e){return+e})),E=(0,S.c)(D,2),w=E[0],k=E[1];return e.x=w,e.y=k,r[n]=r[n]||[],r[n].push([e.x,e.y].join("-")),e},Mh=["type","value"];function Lh(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rh(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?O()(n=Lh(Object(a),!0)).call(n,(function(t){(0,M.c)(e,t,a[t])})):A()?b()(e,A()(a)):O()(r=Lh(Object(a))).call(r,(function(t){B()(e,t,w()(a,t))}))}return e}var Th=(0,M.c)((0,M.c)((0,M.c)((0,M.c)({},W.ActionType.ADD,Dh),W.ActionType.UPDATE,hh),W.ActionType.CUSTOMUPDATE,Bh),W.ActionType.DELETE,xh),Fh=function(e){var t,n=e.action,r=e.dataContext,a=e.selectionContext,o=e.globalConfig,i=e.dataFactory,l=e.modelFactory,c=e.success,u=e.fail,s=(null===(t=o.positionRecordsRef)||void 0===t?void 0:t.current)||{},d=o.dataRef,f=o.keywordMapping,g=function(e){var t=[],n=F()(e).call(e,(function(e){var n=e.type,i=e.value,l=(0,Pn.c)(e,Mh),c=(l||{}).isDealPos,u=void 0===c||c;if(n===W.ActionType.ADD||n===W.ActionType.PASTE){if(Jn()(i)){if(O()(i).call(i,(function(e){e.key=(0,W.createUniqueKey)(e.key,e.type,d.current,f),d.current.push(e)})),wf(i[0])){var g,h=Af(r).width,v=i[0],p=v.parentGridId,m=v.subGridDirection,C=v.id,D=r.findControl(p),E=D.width,w=D.x,k=D.height,A=D.fixedRowAtPage,x=D.fixedRowCount,b=r.findControlByCondition((function(e){return e.parentId===p&&"Detail"===e.rowType}))[0],I=(null==b?void 0:b.rowHeight)*(x-1),B=A?{fixedRowAtPage:!1,height:k-I}:{};if("right"===m&&u&&0===w&&h-E<1){var M,L=hh({dataContext:r,selectionContext:a,globalConfig:o,action:(0,W.createUpdateAction)([[p,{width:Hd(h/2,1)}]])});null===(M=L[0])||void 0===M||null===(M=M.value)||void 0===M||O()(M).call(M,(function(e){var t=(0,S.c)(e,2),n=t[0],r=t[1];if(n===p){var a=r.width;a&&a!==E&&(i[0].x=a)}})),t.push.apply(t,(0,yn.c)(L))}var R="bottom"===m&&A?[[C,{y:Hd(y-I,1)}]]:[];t.push((0,W.createUpdateAction)(G()(g=[[p,Rh({subGridId:[C]},B)]]).call(g,R)))}var T=u?F()(i).call(i,(function(e){var t=e.parentId;return Sh(e,ih(r.findControl(t)),t,s)})):i;return"addField"===(null==l?void 0:l.addType)&&T[1]&&T[0].x+T[0].width+T[1].width<=Af(r).width&&(T[1].x=T[0].x+T[0].width,T[1].y=T[0].y),(0,W.createAddAction)(T,l)}i.key=(0,W.createUniqueKey)(i.key,i.type,d.current,f),d.current.push(i);var N=i.parentId;return(0,W.createAddAction)(Sh(i,ih(r.findControl(N)),N,s),l)}return e}));c(G()(n).call(n,t))},h=[],v=n.type,p=Th[v];if(p){var m=p({globalConfig:o,dataContext:r,selectionContext:a,action:n,dataFactory:i,modelFactory:l},g,u);m&&h.push.apply(h,(0,yn.c)(m))}else h.push(n);h.length&&g(h)},Nh="kd_print_kdcdc";function Gh(e,t){var n=R()(t).call(t,(function(e){return"string"==typeof e[1]}));return n.length?e+"?"+F()(n).call(n,(function(e){var t;return G()(t="".concat(e[0],"=")).call(t,e[1])})).join("&"):e}function Zh(){var e,t,n=window.location.href,r=(t={},(e=n)?(e.replace(/[?&]([^=&#]+)=([^&#]*)/g,(function(e,n,r){return void 0===t[n]&&""!==r&&(t[n]=r),""})),t):t),a=r.accountId,o=r.accountid,i=r.kdcdc,l=a||o||i,c=window.sessionStorage.getItem(Nh);return l&&window.sessionStorage.setItem(Nh,l),l||c}var Qh=["title"];function jh(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jh(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?O()(n=jh(Object(a),!0)).call(n,(function(t){(0,M.c)(e,t,a[t])})):A()?b()(e,A()(a)):O()(r=jh(Object(a))).call(r,(function(t){B()(e,t,w()(a,t))}))}return e}U.Collapse.Panel;var Ph=(0,H.memo)((function(e){var t=e.meta,n=void 0===t?[]:t,r=(0,H.useState)(!1),a=(0,S.c)(r,2),o=a[0],i=a[1],l=(0,H.useState)(!0),c=(0,S.c)(l,2),u=c[0],s=c[1],d=(0,H.useContext)(W.DataContext),f=(0,H.useContext)(W.SelectionContext),g=(0,H.useContext)(pn),h=g.setMessage,v=g.definition,p=void 0===v?{}:v,C=g.prefixCls,y="".concat(C,"-left-view"),D=(0,H.useState)(!1),E=(0,S.c)(D,2),w=(E[0],E[1],(0,H.useContext)(W.GlobalConfigContext)),k=w.handleOpenCustomDsModal,A=w.handleOpenRefDsModal,x=w.keywordMapping,b=d.getRootId(),I=(d.findControl(b).language,qd(d)),B=(0,H.useContext)(W.DataFactoryContext),M=B.dataFactory,L=B.modelFactory,R=B.controlMetaInfo,T=(0,W.useActivedSelectedId)({dataContext:d,selectionContext:f}).activedSelectId,F=Ln({dataContext:d,selectionContext:f,meta:n,activedSelectId:T,modelFactory:L}),N=M,Z=(0,H.useMemo)((function(){var e,t;return"SubDataGrid"===(null===(e=d.findControl(null===(t=d.findControl(T))||void 0===t?void 0:t.parentId))||void 0===e?void 0:e.type)?{isContainer:!1,accept:""}:(0,W.getControlIsContainer)(R,d.findControl(T),x)}),[T,R]),j=Z.isContainer,J=Z.accept,P=(0,H.useState)(0)[1];(0,H.useEffect)((function(){var e=d.addDataChangeListener((function(e){e.type;P((function(e){return e+1}))}));return function(){e&&e()}}),[]);return W.console.log("renderView DataSourceView"),K().createElement("div",{className:Wn()(y,"".concat(y,"-datasource"))},K().createElement("div",{className:Wn()("".concat(y,"-datasource-header"))},K().createElement("div",{className:Wn()("".concat(y,"-datasource-action"),{hide:I})},K().createElement("div",{onClick:A},K().createElement(U.Icon,{prefix:"printdesignericon",type:"guanlian"}),K().createElement("span",null,(0,W.getLangMsg)("printd.grid.key0099"))),K().createElement("div",{onClick:k},K().createElement(U.Icon,{prefix:"printdesignericon",type:"tianjia"}),K().createElement("span",null,(0,W.getLangMsg)("printd.grid.key0100")))),K().createElement(Jr,{draggable:!0,scrollToKey:F,meta:n,definition:p,onSelect:function(e,t,n){var r,a;W.console.log("dataSourceView--------",t);var o=d.getRootId(),i=(d.findControl(o).height,Y().last(G()(r=[o]).call(r,(0,yn.c)(f.getSelection())))),l=d.findControl(i),c=t.type,s=void 0===c?"Text":c,g=t.Items,v=t.InitAttr,C=void 0===v?{}:v,y=t.isDataGridDs;t.dsType,t.isSubDataGridDs;if(!g){var D=nr(t,p),E=D.title,w=(0,Pn.c)(D,Qh),k=(0,oe.c)({},Q()(a=m()(C)).call(a,(function(e,t){return e[Y().camelCase(t)]=C[t],e}),{}),w);if(l){var A=l.type,x=l.parentId,b=l.id,I=(l.cellType,or(d,b,"CardGrid"));if(I){var B=wr(I,p);if(!Ar(B,null==D?void 0:D.dataSource))return h((0,W.getLangMsg)("printd.grid.key0095"))}if("Text"===A){var S=d.findControl(x),M=S.type,L=S.cellType,R=S.parentId;if("DataCell"===M&&"Detail"===L){var T,F=d.findControl(R),Z=F.type,P=F.dataSource,O=["Entry","ReportEntry","Subentry","Workflow","Report","Approveline","Sys"],U=xn()(T=["=getGroupRowNumber()","=getRowNumber()"]).call(T,k.bindField),z=P&&(k.dataSource===P||!xn()(O).call(O,k.dsType));if("DataGrid"===Z&&!(U||z||!P&&y))return h((0,W.getLangMsg)("printd.grid.key0037"))}return d.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[i,Jh(Jh({},k),{},{viewText:"=$".concat(E)})]]))}if("DataCell"===A)return _g(t,l,d,{initAttr:k,title:E},h,p);if("LayoutCell"===A)return qg(b,d,Jh(Jh({},k),{},{viewText:"=$".concat(E)}))}if("Text"===s){var H=N({type:s,parentId:j?i:o,transferData:{bindText:E}}),K=u?{x:(+H.x||0)+(+H.width||0)}:{},V=N({type:s,parentId:j?i:o,transferData:(0,oe.c)({},k,Jh(Jh({},K),{},{viewText:"=$".concat(E)}))}),q=u?[H,V]:[V];d.addControl((0,W.createAddAction)(q,{addType:"addField"})).then((function(){f.setSelect(u?[H.id,V.id]:[V.id])}))}else{if(s===gn.richText&&j&&J&&!xn()(J).call(J,s))return;var X=N({type:s,parentId:j?i:o,transferData:k});d.addControl((0,W.createAddAction)(X)).then((function(){f.setSelect([X.id])}))}}},showDefinitionId:o,showDataSourceTitle:u})),K().createElement("div",{className:"".concat(y,"-datasource-checkbox")},K().createElement(U.Checkbox,{checked:o,onChange:function(e){var t=!!e.target.checked;i(t)}},(0,W.getLangMsg)("printd.grid.key0101")),K().createElement(U.Checkbox,{checked:u,onChange:function(e){var t=!!e.target.checked;s(t)}},(0,W.getLangMsg)("printd.grid.key0102"),K().createElement(U.Tooltip,{placement:"right",tip:(0,W.getLangMsg)("printd.grid.key0103"),style:{marginLeft:"5px"}},K().createElement(U.Icon,{prefix:"printdesignericon",type:"tishixinxi"})))))}));Ph.getTabName=function(){return(0,W.getLangMsg)("printd.grid.key0111")},Ph.tabKey="dataSource";var Oh=Ph;function Uh(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wh(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?O()(n=Uh(Object(a),!0)).call(n,(function(t){(0,M.c)(e,t,a[t])})):A()?b()(e,A()(a)):O()(r=Uh(Object(a))).call(r,(function(t){B()(e,t,w()(a,t))}))}return e}var zh=U.Collapse.Panel,Hh=function(e){var t=e.Categories,n=e.Controls;return F()(t).call(t,(function(e){var t=e.Id,r=R()(n).call(n,(function(e){return e.CategoryId===t}));return Wh(Wh({},e),{},{Controls:r})}))},Kh=function(e){var t=e.Id,n=(e.Name,e.createControlData),r=e.className,a=e.getOutlineItemIcon,o=e.activedSelectId,i=e.isContainer,l=e.env,c=e.Tips,u=e.Visible,s=void 0===u||u,d=(0,H.useState)(!1),f=(0,S.c)(d,2),g=f[0],h=f[1],v=(0,H.useContext)(W.DataContext),p=(0,H.useContext)(W.SelectionContext),m=v.getRootId(),C=(0,H.useCallback)((function(){var e=n({type:t,parentId:i?o:m});v.addControl((0,W.createAddAction)(e)).then((function(e){var t=e[0].value;p.setSelect(Jn()(t)?[t[0].id]:[t.id])}))}),[t,o]),y=(0,H.useCallback)((function(t){var n={type:"control",data:e};l[W.CONTROL_DRAG_DATA]=n,h(!1)}),[e]),D=(0,H.useCallback)((function(e){h(e)}),[]);return s?K().createElement("div",{className:"".concat(r,"-control")},c?K().createElement(U.Tooltip,{placement:"right",tip:c||"",visible:g,onVisibleChange:D},K().createElement("div",{className:"".concat(r,"-control-content"),draggable:!0,onDragStart:y,onClick:C},a(t),K().createElement("span",{title:e.Name},e.Name))):K().createElement("div",{className:"".concat(r,"-control-content"),draggable:!0,onDragStart:y,onClick:C},a(t),K().createElement("span",{title:e.Name},e.Name))):null},Vh=function(e){var t=e.meta,n=void 0===t?[]:t,r=(0,H.useContext)(W.ConfigContext).getPrefixCls,a=(0,H.useContext)(pn).prefixCls,o=(0,H.useRef)(null),i=(0,H.useState)(""),l=(0,S.c)(i,2),c=l[0],u=l[1],s=(0,H.useState)((function(){return Hh(n)})),d=(0,S.c)(s,2),f=d[0],g=d[1],h=(0,H.useState)(f),v=(0,S.c)(h,2),p=v[0],C=v[1],y=(0,H.useContext)(W.DataContext),D=(0,H.useContext)(W.SelectionContext),E=(0,W.useActivedSelectedId)({dataContext:y,selectionContext:D}).activedSelectId,w=(0,H.useContext)(W.GlobalConfigContext),k=w.getOutlineItemIcon,A=w.enableSearch,x=w.env,b=w.keywordMapping,I=r(a,"left-view"),B=(0,H.useContext)(W.DataFactoryContext),M=B.dataFactory,L=B.controlMetaInfo,T={getOutlineItemIcon:k,createControlData:M},N=(0,H.useMemo)((function(){var e,t,n;if("SubDataGrid"===(null===(e=y.findControl(null===(t=y.findControl(E))||void 0===t?void 0:t.parentId))||void 0===e?void 0:e.type))return{isContainer:!1,accept:""};var r=y.findControl(E);return xn()(n=m()(L)).call(n,r.type)?(0,W.getControlIsContainer)(L,r,b):{isContainer:!1,accept:""}}),[E]),G=N.isContainer,Z=N.accept,Q=(0,H.useMemo)((function(){return!!Z&&!p.length}),[Z,p]),j=(0,H.useMemo)((function(){var e;return c?R()(e=F()(p).call(p,(function(e){var t;if("HiddenControl"===e.Id)return null;var n=R()(t=e.Controls).call(t,(function(e){var t;return-1!==En()(t=e.Name).call(t,c)}));return 0===n.length?null:Wh(Wh({},e),{},{Controls:n})}))).call(e,Boolean):p}),[c,p]);(0,H.useEffect)((function(){g((function(){return Hh(n)}))}),[n]),(0,H.useEffect)((function(){C((function(){var e;if(!Z)return f;var t=R()(e=F()(f).call(f,(function(e){var t;if("HiddenControl"===e.Id)return null;var n=R()(t=e.Controls).call(t,(function(e){return xn()(Z).call(Z,e.Id)}));return 0===n.length?null:Wh(Wh({},e),{},{Controls:n})}))).call(e,Boolean);return t}))}),[Z,f]);var J=(0,H.useCallback)((function(){var e,t=null===(e=o.current)||void 0===e?void 0:e.value;u(t)}),[n,p]);return Q?K().createElement("div",{className:"".concat(I,"-props-empty")},K().createElement("img",{className:"".concat(I,"-props-empty-img"),src:Rn,width:"168",height:"96",alt:(0,W.getLangMsg)("printd.grid.key0104")}),K().createElement("div",{className:"".concat(I,"-props-empty-desc")},(0,W.getLangMsg)("printd.grid.key0002"))):K().createElement("div",{className:"".concat(I,"-control-tabs")},A&&K().createElement("div",{className:"".concat(I,"-control-search")},K().createElement(U.Input,{className:"".concat(I,"-control-search-input"),ref:o,placeholder:(0,W.getLangMsg)("printd.grid.key0097"),borderType:"bordered",onChange:_.debounce(J,250),allowClear:!0,suffix:K().createElement("div",{onClick:J},K().createElement(U.Icon,{type:"search"}))})),F()(j).call(j,(function(e){var t;return"HiddenControl"===e.Id?null:K().createElement(U.Collapse,{animatable:!1,name:"Collapse",key:e.Id,defaultActiveKey:e.Id,expandIconPosition:"right",className:"".concat(I,"-collapse")},K().createElement(zh,{header:e.Name,panelKey:e.Id},K().createElement("div",{className:"".concat(I,"-pane")},F()(t=(null==e?void 0:e.Controls)||[]).call(t,(function(e){return K().createElement(Kh,(0,oe.c)({key:e.Id},e,T,{className:I,activedSelectId:E,isContainer:G,env:x}))})))))})))},Yh=(0,H.memo)((function(e){var t=(0,H.useContext)(Dd).getPrefixCls,n=(0,H.useContext)(pn).prefixCls,r=(0,H.useContext)(W.DataContext),a=(t(n,"left-view"),r.getRootId()),o=(r.findControl(a).language,(0,H.useState)(0)[1]);return(0,H.useEffect)((function(){var e=r.addDataChangeListener((function(e){e.type;o((function(e){return e+1}))}));return function(){e&&e()}}),[]),K().createElement(Vh,e)}));Yh.tabKey="ControlView",Yh.getTabName=function(){return(0,W.getLangMsg)("printd.grid.key0106")};var qh=Yh,Xh=n(2480);function _h(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function $h(e,t){var n,r=null!==(n=null==e?void 0:e.current)&&void 0!==n?n:e;if(!r)return null;var a=t||{x:0,y:0},o=a.x,i=a.y,l={x:r.x()-o,y:r.y()-i,height:r.height(),width:r.width()},c=l.x,u=l.y,s=l.height,d=l.width;return Yd({x:Math.max(c,0),y:Math.max(u,0),left:Math.max(c,0),top:Math.max(u,0),width:d,height:s,right:c+d,bottom:u+s})}function ev(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0},r=n.x,a=n.y,o=null!==(t=null==e?void 0:e.current)&&void 0!==t?t:e;if(!o)return null;var i=o.height(),l=o.width(),c=function(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?O()(n=_h(Object(a),!0)).call(n,(function(t){(0,M.c)(e,t,a[t])})):A()?b()(e,A()(a)):O()(r=_h(Object(a))).call(r,(function(t){B()(e,t,w()(a,t))}))}return e}({},o.getAbsolutePosition()),u=c.x,s=c.y;return Yd({x:Math.max(u-r,0),y:Math.max(s-a,0),left:Math.max(u-r,0),top:Math.max(s-a,0),width:l,height:i,right:u-r+l,bottom:s-a+i})}var tv=function(e,t){var n=e.target;if((null==n?void 0:n.id())!==t)return!0},nv=function(e){var t=e.id,n=e.shapeRef,r=e.refLineRef,a=e.onDragStart,o=e.onDragMove,i=e.onDragEnd,l=e.parentId,c=e.context,u=e.scale,s=void 0===u?1:u,d=!1,f=(0,H.useRef)({}),g=(0,H.useRef)({}),h=(0,H.useRef)([]),v=function(e){var t=c.stageRef,r=c.rootControlRef,a=(c.rootId,c.selectionContext,t.current),o=r.current,i=a.findOne("#".concat(l)),u=$h(n),s=(u.width,u.height,g.current),d=s.topDis,f=s.bottomDis,h=s.leftDis,v=s.rightDis,p=Hd(o.width(),1),m=Hd(o.height(),1),C=Yd(ev(i||o)),y=C.x,D=void 0===y?0:y,E=C.y,w=void 0===E?0:E,k=C.right,A=void 0===k?p:k,x=C.bottom,b=void 0===x?m:x,I=e.x,B=e.y;return W.console.log("xxx",I,B,{topDis:d,bottomDis:f,leftDis:h,rightDis:v},$h(i)),h+v>p||f+d>m?(I-h<D&&(W.console.log("dragBoundFunc x",I),I=D+h,W.console.log("dragBoundFunc x",I,h,D)),B-d<w&&(W.console.log("dragBoundFunc y",B),B=w+d,W.console.log("dragBoundFunc y",B,d,w)),{x:I,y:B}):(I-h<D&&(W.console.log("dragBoundFunc x",I),I=D+h,W.console.log("dragBoundFunc x",I,h,D)),I+v>A&&(W.console.log("dragBoundFunc x1",I),I=A-v,W.console.log("dragBoundFunc x1",I,v,A)),B-d<w&&(W.console.log("dragBoundFunc y",B),B=w+d,W.console.log("dragBoundFunc y",B,d,w)),B+f>b&&(W.console.log("dragBoundFunc y1",B),B=b-f,W.console.log("dragBoundFunc y1",B,b,f)),{x:I,y:B})};return{dragBoundFunc:v,onDragStart:function(e){var r;if(!tv(e,t)){var o=e.target,i=c.stageRef,l=c.selectionContext,u=c.dataContext,s=(c.dragGroupRef,o.attrs),d=s.x,v=s.y,p=o.getAbsolutePosition(),C=p.x,y=p.y,D=l.getSelection(),E=(0,yn.c)(D),w=function(e){if(Ef(e)||kf(e)){var t=e.subGridId,n=e.tableTailId;n&&(E.push(n),h.current.push(n)),null!=t&&t.length&&O()(t).call(t,(function(e){xn()(D).call(D,e)||(E.push(e),h.current.push(e))}))}if(wf(e)){var r=e.parentGridId;r&&(xn()(D).call(D,r)||(E.push(r),h.current.push(r)))}if(Rf(e)){var a=e.parentGridId;E.push(a),h.current.push(a)}};w(u.findControl(t)),O()(D).call(D,(function(e){var t=u.findControl(e);w(t)}));var k=R()(r=F()(E).call(E,(function(e){var t=i.current.findOne("#".concat(e));return(null==t?void 0:t.draggable())&&t}))).call(r,Boolean),A=R()(k).call(k,(function(t){return t!==e.target}));W.console.log("onDragStart",A),i.current.dragStartMousePos=i.current.getPointerPosition();var x=Q()(A).call(A,(function(e,t){var n=t.attrs,r=n.id,a=(n.x,n.y,n.draggable),o=t.getAbsolutePosition(),i=o.x,l=o.y;return a?(e[r]={xDis:C-i,yDis:y-l},e):e}),{});f.current=x;var b=Q()(k).call(k,(function(e,t){var n=t.attrs,r=n.x,a=n.y,o=n.width,i=a,l=a+n.height,c=r,u=r+o;if(m()(e).length){var s=e,d=s.top,f=s.bottom,g=s.left,h=s.right;e={top:i<d?i:d,bottom:l>f?l:f,left:c<g?c:g,right:u>h?u:h}}else e={top:i,bottom:l,left:c,right:u};return e}),{});g.current={topDis:v-b.top,bottomDis:b.bottom-v,leftDis:d-b.left,rightDis:b.right-d};var I=$h(n);a&&a(I,e)}},onDragEnd:function(e){if(!tv(e,t)){var a=e.target.attrs,o=a.x,l=a.y,u=(c.dataContext,c.selectionContext,c.controlGroupRef,c.stageRef,(r.current||{}).hideRefLines),v=$h(n);if(u&&u(),Y().isEmpty(f.current))i&&i(v,e);else{var p,C,y=R()(p=F()(C=m()(f.current)).call(C,(function(e){var t,n=f.current[e],r=n.xDis,a=n.yDis;if(!xn()(t=h.current).call(t,e))return[e,{x:Wd(o-r,s),y:Wd(l-a,s)}]}))).call(p,Boolean);i&&i(v,e,y)}f.current={},g.current={},h.current=[],d&&(d=!1,window.requestIdleCallback?window.requestIdleCallback((function(){document.body.style.cursor="default"}),{timeout:30}):le()((function(){document.body.style.cursor="default"}),30))}},onDragMove:function(e){var r;if(!tv(e,t)){var a=e.target,i=c.stageRef,l=(c.selectionContext,c.getRedundancyXY),u=(c.rootControlRef,(c.rulerRef.current||{}).operateLine),s=o&&o(e,k,v),g=a.getAbsolutePosition(),h=g.x,p=g.y,C=(0,oe.c)({},s||{}),y=C.x,D=C.y,E=Y().isUndefined(y)?h:y,w=Y().isUndefined(D)?p:D;O()(r=m()(f.current)).call(r,(function(e){var t,n=f.current[e],r=n.xDis,a=n.yDis,o=i.current.findOne("#".concat(e));o.draggable()&&(o.setAbsolutePosition({x:E-r,y:w-a}),null===(t=i.current.findOne("#transformer_".concat(e)))||void 0===t||t.forceUpdate())})),d||(d=!0,window.requestIdleCallback?window.requestIdleCallback((function(){document.body.style.cursor="move"}),{timeout:30}):le()((function(){document.body.style.cursor="move"}),30));var k=ev(n,l());u&&u((0,oe.c)(k,{top:k.y,left:k.x}))}}}};function rv(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function av(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?O()(n=rv(Object(a),!0)).call(n,(function(t){(0,M.c)(e,t,a[t])})):A()?b()(e,A()(a)):O()(r=rv(Object(a))).call(r,(function(t){B()(e,t,w()(a,t))}))}return e}function ov(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=null!==(t=e.current)&&void 0!==t?t:e,o=null==a?void 0:a.scaleX(),i=null==a?void 0:a.scaleY(),l=av(av({},n?a.getAbsolutePosition():{x:Math.max(a.x()+a.getParent().x(),0),y:Math.max(a.y()+a.getParent().y(),0)}),{},{width:a.width()*o,height:a.height()*i}),c=l.height,u=l.width,s=l.x,d=l.y;return r&&(a.scaleX(1),a.scaleY(1),a.x(0),a.y(0),W.console.log(a)),{x:Math.max(s,0),y:Math.max(d,0),width:u,height:c,right:s+u,bottom:d+c,scaleX:o,scaleY:i}}var iv=function(e){var t=e.shapeRef,n=e.refLineRef,r=e.onTransform,a=e.onTransformEnd,o=e.context;e.id;return{onTransform:function(e){(n.current||{}).searchRefLines;var a=(o.rulerRef.current||{}).operateLine,i=(0,o.getRedundancyXY)(),l=i.x,c=i.y,u=ov(t,!0),s=(u.scaleX,u.scaleY,u.x,u.y,u.width,u.height,u.x-l),d=u.y-c;a&&a((0,oe.c)(u,{top:d,left:s,x:s,y:d})),r&&r(u,e)},onTransformEnd:function(e){var r=(n.current||{}).hideRefLines,i=(o.getRedundancyXY,o.marginLeft,o.marginTop,0),l=0,c=ov(t,!1,!0),u=c.scaleX,s=c.scaleY,d=c.x,f=c.y,g=c.width,h=c.height;W.console.log("onTransformEnd",{x:Math.max(d,0),y:Math.max(f,0),width:g,height:h,right:d+g,bottom:f+h,scaleX:u,scaleY:s},e);var v=c.x-i,p=c.y-l;a&&a((0,oe.c)(c,{top:p,left:v,x:v,y:p}),e),r&&r()}}},lv=function(e){e.isSelected,e.refs,e.pixelRatio,e.scale,e.currentProp},cv=function(e){return function(t,n){var r;Jn()(t.current)?O()(r=t.current).call(r,(function(t){return t[e]&&t[e](n)})):t.current&&t.current[e](n)}},uv=cv("strokeEnabled"),sv=cv("stroke"),dv=function(e){var t,n,r,a,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Jn()(e.current)?o?null===(t=e.current[0])||void 0===t||null===(t=t.getLayer())||void 0===t||t.batchDraw():O()(n=e.current).call(n,(function(e){return null==e?void 0:e.draw()})):o?null===(r=e.current)||void 0===r||r.getLayer().batchDraw():null===(a=e.current)||void 0===a||a.draw()},fv=function(e){var t=e.shapeRef,n=e.isSelected,r=e.shapeRefStroke,a=void 0===r?at:r,o=e.controlStrokeRef,i=e.strokeEnabled,l=!1,c=(0,H.useCallback)((function(){var e;n||(null===(e=o.current)||void 0===e||e.mouseEnter(ot),!i&&uv(t,!i),sv(t,ot),dv(t,!0),W.console.log("DEFAULT_HOVER_BORDER_COLOR",ot,t),W.console.log("DEFAULT_HOVER_BORDER_COLOR",t.current.stroke()));return!0}),[n,a,i,l]),u=(0,H.useCallback)((function(){var e,r;n||(!i&&uv(t,i),null===(e=o.current)||void 0===e||e.mouseLeave(),sv(t,""),a&&sv(t,a),W.console.log("onMouseOut",t,a,null===(r=t.current)||void 0===r?void 0:r.stroke()),dv(t,!0));return!0}),[n,a,i,l]);return(0,H.useEffect)((function(){var e;a&&(uv(t,i),null===(e=o.current)||void 0===e||e.mouseLeave(),sv(t,a),dv(t,!0))}),[n,a,i,l]),{onMouseOut:u,onMouseOver:c}},gv=function(e){var t=e.shapeRef,n=e.isNotNeed;(0,H.useEffect)((function(){var e=function(e){var n,r;(W.console.log("e.ctrlKe shapeRef.current?.stopDrag()"),null!==(n=t.current)&&void 0!==n&&n.isDragging())&&(null===(r=t.current)||void 0===r||r.stopDrag())};return!n&&document.addEventListener("keydown",e),function(){!n&&document.removeEventListener("keydown",e)}}),[n])},hv=function(e){var t=e.id,n=e.refLineRef;return(0,H.useCallback)((function(e,r,a){var o=(n.current||{}).searchRefLines,i=o&&o(t);if(i&&!Y().isEmpty(i)){var l=i.selectedNode,c=i.x,u=i.y,s=i.refX,d=i.refY,f=a({x:Y().isUndefined(s)?c:s,y:Y().isUndefined(d)?u:d}),g=f.x,h=f.y;return l.absolutePosition({x:g,y:h}),{x:g,y:h}}}),[])},vv=n(89280),pv=n(40900),mv=n.n(pv);function Cv(e,t,n){return t=(0,Kl.c)(t),(0,Hl.c)(e,yv()?zl()(t,n||[],(0,Kl.c)(e).constructor):t.apply(e,n))}function yv(){try{var e=!Boolean.prototype.valueOf.call(zl()(Boolean,[],(function(){})))}catch(e){}return(yv=function(){return!!e})()}var Dv=function(e){return"".concat(e).replace("#","")},Ev=function(e){function t(e){var n,r,a,o,i,l;return(0,ql.c)(this,t),(l=Cv(this,t,[e])).state={color:Dv(e.color),alpha:e.alpha,isCheck:!1},l.clickFunc=In()(n=l.clickFunc).call(n,(0,vv.c)(l)),l.changeColorFromItems=In()(r=l.changeColorFromItems).call(r,(0,vv.c)(l)),l.handleKeyDown=In()(a=l.handleKeyDown).call(a,(0,vv.c)(l)),l.handleChangeText=In()(o=l.handleChangeText).call(o,(0,vv.c)(l)),l.handleBlur=In()(i=l.handleBlur).call(i,(0,vv.c)(l)),l}return(0,Vl.c)(t,e),(0,Yl.c)(t,[{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.clickFunc)}},{key:"componentWillReceiveProps",value:function(e){this.props.color!==e.color&&this.setState({color:Dv(e.color)})}},{key:"componentDidUpdate",value:function(){this.props.showPanel?document.addEventListener("click",this.clickFunc):document.removeEventListener("click",this.clickFunc)}},{key:"clickFunc",value:function(e){for(var t=e.target;t;){if(t===Kr().findDOMNode(this))return;t=t.parentNode}this.closePanel()}},{key:"createColorItems",value:function(){var e=this;if(this.props.showPanel){var t=Y().flatten(this.props.colors);return F()(Y()).call(Y(),t,(function(t,n){var r={backgroundColor:t="current"===t?e.props.color||"#ffffff":t};return K().createElement("span",{key:n,className:Wn()("colorItem","kd-cq-color-picker-color-block"),title:t,style:r,onClick:function(n){return e.changeColorFromItems({color:t&&(nc()(t).call(t,"#")?kn()(t).call(t,1):t),alpha:e.state.alpha})}})}))}return null}},{key:"closePanel",value:function(){this.props.onClosePanel()}},{key:"changeColorFromItems",value:function(e){var t=e.color,n=e.alpha;this.state.isCheck||this.changeColor({color:t,alpha:n})}},{key:"changeColor",value:function(e){var t=this,n=e.color,r=e.alpha;this.setState({color:n,alpha:r},(function(){n.match(/^([0-9a-fA-F]{6}|[0-9a-fA-F]{3})$/)?t.props.onChange({color:"#"+n,alpha:r}):/^themeColor/.test(n)&&t.props.onChange({color:n,alpha:r})}))}},{key:"handleChangeText",value:function(e){var t=e.target.value;this.setState({color:t,alpha:this.state.alpha})}},{key:"handleChangeAlpha",value:function(e){var t=this.state.color,n=e.target.value;n<0||n>100||this.changeColor({color:t,alpha:n})}},{key:"handleKeyDown",value:function(e){13===e.keyCode&&this.changeColorFromItems({color:this.state.color,alpha:this.state.alpha})}},{key:"handleBlur",value:function(e){this.changeColorFromItems({color:this.state.color,alpha:this.state.alpha})}},{key:"render",value:function(){var e,t,n=this.props,r=(n.color,n.alpha),a=(n.defaultColor,n.poperContainer);this.state.isCheck;var o=null==a?void 0:a.current,i=null!==(e=null==a||null===(t=a.current)||void 0===t?void 0:t.getBoundingClientRect())&&void 0!==e?e:{},l=i.left,c=void 0===l?0:l,u=i.top,s=void 0===u?0:u;return o?Kr().createPortal(K().createElement("div",{ref:this.props.colorPickerRef,className:"colorPicker",style:{position:"absolute",top:s-77+39,left:c,zIndex:1050}},this.props.showPanel?K().createElement("div",{className:Wn()("colorPanel","kd-cq-color-picker kd-cq-printd-color-picker")},K().createElement("div",{className:"colors"},this.createColorItems(),K().createElement("div",{className:"footer"},K().createElement("div",{className:Wn()("colorInfo","kd-cq-color-picker-color-block"),style:{backgroundColor:"#".concat(this.state.color)}}),K().createElement("span",{className:"text"},(0,W.getLangMsg)("printd.grid.key0015")),K().createElement("div",{className:"customColorInput"},K().createElement("span",{className:"punctuation"},"#"),K().createElement("input",{placeholder:(0,W.getLangMsg)("printd.grid.key0016"),value:this.state.color,onChange:this.handleChangeText,onKeyDown:this.handleKeyDown,onBlur:this.handleBlur}))))):null),document.body):K().createElement("div",{className:"colorPicker"},this.props.showPanel?K().createElement("div",{className:Wn()("colorPanel","kd-cq-color-picker kd-cq-printd-color-picker")},K().createElement("div",{className:"colors"},this.createColorItems(),K().createElement("div",{className:"footer"},K().createElement("div",{className:Wn()("colorInfo","kd-cq-color-picker-color-block"),style:{backgroundColor:"#".concat(this.state.color)}}),K().createElement("span",{className:"text"},(0,W.getLangMsg)("printd.grid.key0015")," "),K().createElement("div",{className:"customColorInput"},K().createElement("span",{className:"punctuation"},"#"),K().createElement("input",{placeholder:(0,W.getLangMsg)("printd.grid.key0016"),value:this.state.color,onChange:this.handleChangeText,onKeyDown:this.handleKeyDown,onBlur:this.handleBlur}))))):null)}}]),t}(K().Component);Ev.propTypes={color:mv().string,alpha:mv().number,defaultColor:mv().string,onChange:mv().func},Ev.defaultProps={colors:[["#45cdff","#3dccc0","#40bd6e","#99d92b","#ffd52e","#ffb44a","#ff854d","#ff5257","#ff3b72","#9a4dff","#3987ed","#5797ff"],["#16b0f1","#16b8b1","#1ba854","#77c404","#fdc200","#ff991c","#ff5f1f","#fb2323","#f90d58","#701df0","#0e5fd8","#276ff5"],["#ffffff","#fafafa","#f5f5f5","#f2f2f2","#e5e5e5","#d9d9d9","#cccccc","#999999","#666666","#404040","#212121","#000000"]],alpha:100,color:"#ffffff",defaultColor:"#ffffff"};var wv=Ev,kv=function(e){var t=e.value,n=e.handleChange,r=e.enable,a=e.setColorPickVisible,o=e.setMoreBarVisible,i=(0,H.useState)(null),l=(0,S.c)(i,2),c=l[0],u=l[1],s=(0,H.useState)(an),d=(0,S.c)(s,2),f=d[0],g=(d[1],(0,H.useRef)(null)),h=(0,H.useRef)(null),v=(0,H.useRef)(null);return(0,W.useOnClickOutside)([g,v,h],(function(){})),(0,H.useEffect)((function(){r||(u(!1),a(!1),o(!1))}),[r]),(0,H.useEffect)((function(){r&&c&&a(!0)}),[c,r]),K().createElement(K().Fragment,null,K().createElement("svg",{ref:g,className:Wn()(["navtool-icon",{"editor-panel-visible":c}]),width:"200",height:"200",viewBox:"0 0 20 20",version:"1.1",xmlns:"http://www.w3.org/2000/svg",onClick:function(){u(!1)}},K().createElement("title",null,(0,W.getLangMsg)("printd.grid.key0014")),K().createElement("g",{id:"油漆桶",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},K().createElement("g",{id:"编组",transform:"translate(2.810513, 0.777902)"},K().createElement("rect",{id:"矩形备份-3",stroke:"#D9D9D9","stroke-width":"0.5",fill:t,x:"-0.060513479",y:"15.9720982",width:"14.5",height:"2.5",rx:"1"}),K().createElement("path",{d:"M7.35237743,0.219669914 L8.05948421,0.926776695 L8.06299995,0.931 L12.8033719,5.58910098 C13.6474203,6.41866449 13.6988871,7.75029176 12.9455484,8.64490829 L12.82651,8.7757058 L7.52324583,14.07897 C6.68640806,14.9158077 5.35438522,14.9556572 4.47038697,14.1985182 L4.34126532,14.07897 L0.658927543,10.3966322 C-0.177910225,9.55979443 -0.217759275,8.22777195 0.539946158,7.34320727 L0.659583703,7.21399633 L6.45599995,1.445 L6.29171726,1.28033009 C5.99882404,0.987436867 5.99882404,0.512563133 6.29171726,0.219669914 C6.58461048,-0.0732233047 7.05948421,-0.0732233047 7.35237743,0.219669914 Z M12.7772674,11.2000162 C12.8448732,11.2253684 12.8982166,11.2787118 12.9235688,11.3463177 L13.6628014,13.3176044 C13.8643815,13.8551514 13.5920265,14.4543322 13.0544796,14.6559123 C12.9377675,14.6996794 12.8141351,14.7220982 12.6894865,14.7220982 C12.1153861,14.7220982 11.6499858,14.2566979 11.6499858,13.6825975 C11.6499858,13.557949 11.6724047,13.4343165 11.7161717,13.3176044 L12.4554042,11.3463177 C12.5038843,11.2170376 12.6479873,11.1515362 12.7772674,11.2000162 Z M7.52128565,2.50147715 L2.77699995,7.222 L11.9757231,7.22266041 C11.9821309,7.05395544 11.9319029,6.8835921 11.8253092,6.74250292 L11.751965,6.65901613 L7.52128565,2.50147715 Z",id:"形状结合",fill:"#404040"})))),K().createElement(U.Icon,{ref:v,type:f,className:Wn()(["navtool-icon-arrow",{"editor-panel-visible":c}]),onClick:function(){r&&u(!c)}}),K().createElement(wv,{colorPickerRef:h,poperContainer:g,showPanel:c&&r,color:t,onClosePanel:function(){u(!1)},onChange:function(e){var r=e.color;t!==r&&n(r)}}))},Av=function(e){var t=e.value,n=e.handleChange,r=e.enable,a=e.setColorPickVisible,o=e.setMoreBarVisible,i=(0,H.useState)(null),l=(0,S.c)(i,2),c=l[0],u=l[1],s=(0,H.useState)(an),d=(0,S.c)(s,2),f=d[0],g=(d[1],(0,H.useRef)(null)),h=(0,H.useRef)(null),v=(0,H.useRef)(null);return(0,W.useOnClickOutside)([h,v,g],(function(){})),(0,H.useEffect)((function(){r||(u(!1),a(!1),o(!1))}),[r]),(0,H.useEffect)((function(){r&&c&&a(!0)}),[c,r]),K().createElement(K().Fragment,null,K().createElement("svg",(0,M.c)({ref:h,className:Wn()(["navtool-icon",{"editor-panel-visible":c}]),width:"200",height:"200",viewBox:"0 0 20 20",version:"1.1",xmlns:"http://www.w3.org/2000/svg",onClick:function(){}},"onClick",(function(){return u(!1)})),K().createElement("title",null,(0,W.getLangMsg)("printd.grid.key0017")),K().createElement("g",{id:"文字颜色",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},K().createElement("g",{id:"编组",transform:"translate(3.000000, 1.225936)"},K().createElement("path",{d:"M7.10199875,0.000488183945 C7.39408208,-0.0100860974 7.67791213,0.151661551 7.80920279,0.433215284 L7.80920279,0.433215284 L13.7258585,13.1215243 C13.9009127,13.4969293 13.7384963,13.9431646 13.3630913,14.1182188 C12.9876863,14.2932731 12.541451,14.1308567 12.3663968,13.7554517 L12.3663968,13.7554517 L10.2754569,9.274 L3.87745688,9.274 L1.7883667,13.7554517 C1.61331249,14.1308567 1.16707714,14.2932731 0.791672168,14.1182188 C0.416267191,13.9431646 0.253850808,13.4969293 0.428905024,13.1215243 L6.34556069,0.433215284 C6.48061111,0.143598729 6.77706251,-0.0192517453 7.07787471,0.00182180938 Z M7.07645688,2.413 L4.57645688,7.774 L9.57645688,7.774 L7.07645688,2.413 Z",id:"形状结合",fill:"#404040"}),K().createElement("rect",{id:"矩形备份-2",stroke:"#D9D9D9","stroke-width":"0.5",fill:t,x:"-0.25",y:"15.5240643",width:"14.5",height:"2.5",rx:"1"})))),K().createElement(U.Icon,{ref:v,type:f,className:Wn()(["navtool-icon-arrow",{"editor-panel-visible":c}]),onClick:function(){r&&u(!c)}}),K().createElement(wv,{colorPickerRef:g,poperContainer:h,showPanel:c&&r,color:t,onClosePanel:function(){u(!1)},onChange:function(e){var r=e.color;t!==r&&n(r)}}))},xv="nav-tool-fontsize",bv=function(e){var t=e.options,n=e.disabled,r=e.className,a=e.value,o=e.onChange,i=e.dropdownStyle,l=void 0===i?{}:i,c=e.bizType,u=(0,H.useRef)(null),s=(0,H.useRef)(null),d=(0,H.useState)(!1),f=(0,S.c)(d,2),g=f[0],h=f[1];(0,W.useOnClickOutside)([u,s],(function(e){for(var t=e.target;t;){var n;if(t.classList&&xn()(n=Fn()(t.classList)).call(n,"".concat(xv,"-dropdown")))return;t=t.parentNode}h(!1)}));var v=F()(t).call(t,(function(e){var t=e.label,n=e.value;return{key:n,label:t,selected:a===n}})),p=(0,H.useRef)(null);(0,H.useEffect)((function(){var e;null===(e=p.current)||void 0===e||e.focus(),le()((function(){var e;null===(e=p.current)||void 0===e||e.blur()}))}),[]);var m=(0,H.useState)(a),C=(0,S.c)(m,2),y=C[0],D=C[1];(0,H.useEffect)((function(){D(a)}),[a]);var E=(0,H.useCallback)((function(){p.current.select()}),[]);return K().createElement("div",{ref:u,className:Wn()(xv,r)},K().createElement(U.Dropdown,{key:"fontsize-dropdown-".concat(a),selectable:!0,defaultKey:a,getTriggerElement:function(){return s.current},popperClassName:"".concat(xv,"-dropdown"),className:"".concat(xv,"-dropdown"),disabled:n,dropdownStyle:l,menu:v,onItemClick:function(e){o(e),h(!1)},visible:g},K().createElement(U.InputNumber,{ref:p,disabled:n,borderType:"bordered",decimalLength:2,onFocus:E,value:y,onChange:function(e){if("1"!==c){var t=e.target.value;D(t||"")}},onBlur:function(e){var t=e.target.value;o(isNaN(+t)?6:+t)},className:"".concat(xv,"-input"),onPressEnter:function(){}})),K().createElement(U.Icon,{ref:s,type:an,onClick:function(){h(!g)}}))},Iv=n(74741),Bv=n.n(Iv);function Sv(){return"Mac68K"==window.navigator.platform||"MacPPC"==window.navigator.platform||"Macintosh"==window.navigator.platform||"MacIntel"==window.navigator.platform}function Mv(e){return Sv()?e.metaKey:e.ctrlKey}var Lv,Rv,Tv;function Fv(e,t){var n,r=e.findControl(t[0]);if(!yf(r)&&(n=r,!xn()(Dt).call(Dt,null==n?void 0:n.type)))return[];for(var a=[r[St]],o=1;o<t.length;){var i=e.findControl(t[o]);if(xn()(a).call(a,i[St]))break;a.push(i[St]),o++}return a}function Nv(e,t,n){var r,a,o=n[0],i=n[n.length-1],l=e.findControl(t[0])[Bt],c=null===(r=e.findControl(t[t.length-1]))||void 0===r?void 0:r[Bt],u=function(e,t){l===e[Bt]&&t.firstRowCells.push(e),c===e[Bt]&&t.lastRowCells.push(e),o===e[St]&&t.firstColCells.push(e),i===e[St]&&t.lastColCells.push(e)},s={firstRowCells:[],lastRowCells:[],firstColCells:[],lastColCells:[]},d=((null===(a=e.getParentControl)||void 0===a?void 0:a.call(e,o))||{}).mergeConfig;if(function(e){return m()(e||{}).length>0}(d))for(var f=function(e,t){var n=e.findControl(t[0]),r=n[Bt],a=-1,o=e.findControl(r);for(;xn()(mt).call(mt,null===(i=o)||void 0===i?void 0:i.type);){var i,l;o=null===(l=e.getPrevSibling(o.id))||void 0===l?void 0:l.control,a++}var c=n[St],u=-1,s=e.findControl(c);for(;xn()(Ct).call(Ct,null===(d=s)||void 0===d?void 0:d.type);){var d,f;s=null===(f=e.getPrevSibling(s.id))||void 0===f?void 0:f.control,u++}return{rowIndex:a,colIndex:u}}(e,t),g=n.length,h=t.length/g,v=function(e,t,n,r){var a,o=t.rowIndex,i=t.colIndex;return Q()(a=m()(e)).call(a,(function(t,a){var l=a.split("_"),c=(0,S.c)(l,2),u=c[0],s=c[1],d=Number(u),f=Number(s);return d>=o&&d<o+n&&f>=i&&f<i+r&&(t[a]=e[a]),t}),{})}(d,f,h,g),p=0,C=0;C<t.length;){for(var y=0;y<g&&C<t.length;){var D,E=e.findControl(t[C]);u(E,s);var w=f.rowIndex,k=f.colIndex,A=v[G()(D="".concat(w+p,"_")).call(D,k+y)];if(A){var x=A.rowLength,b=A.columnLength;p+x===h&&s.lastRowCells.push(E),y+b===g&&s.lastColCells.push(E)}C++,y++}p++}else s=Q()(t).call(t,(function(t,n){var r=e.findControl(n);return u(r,t),t}),s);return s}var Gv=["id","parentId"],Zv=["id","parentId"];function Qv(e,t){var n=void 0!==Gn()&&Qn()(e)||e["@@iterator"];if(!n){if(Jn()(e)||(n=function(e,t){var n;if(!e)return;if("string"==typeof e)return jv(e,t);var r=kn()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Fn()(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jv(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw o}}}}function jv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Jv(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pv(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?O()(n=Jv(Object(a),!0)).call(n,(function(t){(0,M.c)(e,t,a[t])})):A()?b()(e,A()(a)):O()(r=Jv(Object(a))).call(r,(function(t){B()(e,t,w()(a,t))}))}return e}var Ov=(0,W.getLangMsg)("printd.grid.key0049"),Uv=(0,W.getLangMsg)("printd.grid.key0050"),Wv=(0,W.getLangMsg)("printd.grid.key0051"),zv=(0,W.getLangMsg)("printd.grid.key0052"),Hv=function(e,t,n){var r=Y().cloneDeep(e);return r.parentId=t,r.key=(0,W.createUniqueKey)(e.key,e.type,n.current),r.id=(0,W.createUUid)(),r},Kv=function e(t){var n,r,a=t.selectItem,o=t.items,i=t.parentId,l=t.dataRef,c=a.id,u=a.parentId,s=((0,Pn.c)(a,Gv),Hv(a,i||u,l)),d=R()(n=F()(o).call(o,(function(e){if(e.parentId===c)return e}))).call(n,Boolean);return G()(r=[s]).call(r,Y().flattenDeep(F()(d).call(d,(function(t){return e({selectItem:t,items:o,parentId:s.id,dataRef:l})}))))},Vv=function(e){var t,n=e.selectItem,r=e.items,a=e.parentId,o=e.dataRef,i=n.id,l=n.parentId,c=((0,Pn.c)(n,Zv),Hv(n,a||l,o));c.parentId=a||l,c.subGridId=[];var u=R()(r).call(r,(function(e){return e.parentId===i})),s=cf(u),d=s.cells,f=s.rows,g=s.columns,h=F()(f).call(f,(function(e){return(0,oe.c)({},Y().cloneDeep(e),{id:(0,W.createUUid)(),key:(0,W.createUniqueKey)(e.key,e.type,o.current),parentId:c.id})})),v=F()(g).call(g,(function(e){return(0,oe.c)({},Y().cloneDeep(e),{id:(0,W.createUUid)(),key:(0,W.createUniqueKey)(e.key,e.type,o.current),parentId:c.id})})),p=F()(d).call(d,(function(e){return(0,oe.c)({},Y().cloneDeep(e),{id:(0,W.createUUid)(),key:(0,W.createUniqueKey)(e.key,e.type,o.current),parentId:c.id,rowId:h[de()(f).call(f,(function(t){return t.id===e.rowId}))].id,columnId:v[de()(g).call(g,(function(t){return t.id===e.columnId}))].id})})),m=Y().flattenDeep(F()(d).call(d,(function(e,t){var n,a=e.id,i=new(ta()),l=R()(n=F()(r).call(r,(function(e){if(e.parentId===a)return i.set(e,t),e}))).call(n,Boolean);return Y().flattenDeep(F()(l).call(l,(function(e){return Kv({selectItem:e,items:r,dataRef:o,parentId:p[i.get(e)].id})})))})));return G()(t=[c]).call(t,h,v,p,m)},Yv="align-shapes",qv=G()(Lv=[{name:Ne,margin:5},{name:Ge,margin:10},{name:Ze,margin:7}]).call(Lv,(0,yn.c)(F()(Rv=[Qe,je,Je]).call(Rv,(function(e){return{name:e,margin:4}}))),(0,yn.c)(F()(Tv=[Pe,Oe,Te,Re,Fe,Ue]).call(Tv,(function(e){return{name:e,margin:4}}))),[{name:Yv,margin:19}]),Xv=(0,H.memo)((0,H.forwardRef)((function(e,t){var n,r,a,o,i,l,c,u,s,d,f,g,h,v,p,C,y,D,E,w,k,A=e.meta,x=e.data,b=e.context,I=(e.onChangeProperty,(0,H.useContext)(W.ConfigContext)),B=I.getPrefixCls,L=I.prefixCls,T=((0,H.useRef)(null),(0,H.useState)(!1)),N=(0,S.c)(T,2),Z=N[0],Q=N[1],j=(0,H.useState)(!1),J=(0,S.c)(j,2),P=J[0],z=J[1],V=(0,H.useState)(!1),q=(0,S.c)(V,2),X=q[0],_=q[1],$=(0,H.useState)(!1),ee=(0,S.c)($,2),te=ee[0],ne=ee[1],re=(0,H.useState)(!1),ae=(0,S.c)(re,2),ie=ae[0],le=ae[1],ce=B(L,"nav-tool"),ue=(0,H.useState)("#000000"),se=(0,S.c)(ue,2),de=se[0],fe=se[1],ge=(0,H.useState)(ln),he=(0,S.c)(ge,2),ve=he[0],pe=he[1],me=(0,H.useState)(Gt),Ce=(0,S.c)(me,2),ye=Ce[0],De=Ce[1],Ee=b.dataContext,we=b.selectionContext,ke=b.canvasRef,Ae=b.activedSelectId,xe=b.globalConfig,be=b.scaleRef,Ie=b.asistantBorderRef,Be=b.isMultiKeyActiveWhenSelectedRef,Se=void 0===Be?(0,H.useRef)(!1):Be,Me=(0,H.useState)("1"===x.bizType),Le=(0,S.c)(Me,2),Xe=Le[0],_e=Le[1],$e=(0,H.useState)((function(){return(null==be?void 0:be.current)||"".concat(100)})),et=(0,S.c)($e,2),tt=et[0],nt=et[1],rt=(0,H.useContext)(W.DataFactoryContext),at=rt.dataFactory,ot=rt.modelFactory,it=Mn(Pv(Pv({meta:A},b),{},{activedSelectId:Ae,modelFactory:ot})),lt=it.modelData,ct=it.selectItem,st=it.isRootId,dt=it.rootId,ft=function(e){var t=e.selectionContext,n=e.dataContext,r=e.meta,a=e.globalConfig,o=t.getSelection(),i=o.length>1,l=F()(o).call(o,(function(e){return n.findControl(e)})),c=F()(l).call(l,(function(e){return e.type})),u=(0,H.useMemo)((function(){var e=(0,W.getCommonProperties)(c)(r,a),t=Bv()(e).call(e,(function(e){return e.Nodes||[]}));return F()(t).call(t,(function(e){return Y().camelCase(e.Id)}))}),[c,r]);return{commonProp:u,multiSelect:i,selection:o}}({selectionContext:we,dataContext:Ee,meta:A,globalConfig:xe}),gt=ft.commonProp,ht=ft.multiSelect,vt=ft.selection,pt=F()(vt).call(vt,(function(e){return Ee.findControl(e)})),mt=Hn()(lt).call(lt,(function(e){return"CommonGroup"===e.Id})),Ct=null==mt||null===(n=mt.Nodes)||void 0===n?void 0:Hn()(n).call(n,(function(e){return"FontName"===e.Id})),yt=null==mt||null===(r=mt.Nodes)||void 0===r?void 0:Hn()(r).call(r,(function(e){return"FontSize"===e.Id})),Dt=(0,H.useContext)(pn).setMessage,Et=we.getSelection(),wt=ct[Ue]||ut,kt=Vf(wt),At=(0,S.c)(kt,4),xt=At[0],bt=(At[1],At[2],At[3],1===xt.length&&xt[0],Df(ct)),It=(Vn()(a=we.getSelection()).call(a,(function(e){return yf(Ee.findControl(e))})),Ae!==dt),Bt=Vn()(o=we.getSelection()).call(o,(function(e){return xn()(tn).call(tn,Ee.findControl(e).type)})),St=It&&oa()(i=we.getSelection()).call(i,(function(e){return!xn()(en).call(en,Ee.findControl(e).type)})),Mt=It&&oa()(l=we.getSelection()).call(l,(function(e){return!xn()(rn).call(rn,Ee.findControl(e).type)})),Lt=It&&oa()(c=we.getSelection()).call(c,(function(e){return!xn()(nn).call(nn,Ee.findControl(e).type)})),Rt=(0,H.useCallback)((function(e){W.console.log("scale---change",e),e!==tt&&(nt(e),be&&(be.current=e),W.eventBus.emit("scale",+e/100))}),[tt]),Ot=F()(u=[80,100,150,200,300]).call(u,(function(e){return{label:"".concat(e,"%"),value:"".concat(e)}})),Ut=(0,H.useCallback)((function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.selection,r=t.items,a=Y().flattenDeep(F()(e=n||Et).call(e,(function(e){var t=r?Hn()(r).call(r,(function(t){return t.id===e})):Ee.findControl(e);r&&(t.parentId=Ee.getRootId());var n=r||Ee.getData().items;return Df(t)?Vv({selectItem:t,items:n,dataRef:xe.dataRef}):Kv({selectItem:t,items:n,dataRef:xe.dataRef})})));return a}),[st,A,Et,at,xe]),Wt=(0,H.useCallback)((function(e){var t,n,r;e=Jn()(e)?e:R()(t=[e]).call(t,Boolean);var a=F()(n=R()(e).call(e,(function(e){return rh(e)||ah(e)}))).call(n,(function(e){return e.id})),o=F()(r=R()(e).call(e,wf)).call(r,(function(e){return e.id})),i=R()(e).call(e,(function(e){return!(ah(e)||rh(e)||xn()(a).call(a,e.parentId))&&!(wf(e)||Rf(e)||xn()(o).call(o,e.parentId))}));i&&i.length&&Ee.addControl((0,W.createPasteAction)(i)).then((function(){var e,t=F()(i).call(i,(function(e){return e.id}));we.setSelect(F()(e=R()(i).call(i,(function(e){return!xn()(t).call(t,e.parentId)}))).call(e,(function(e){return e.id})))}))}),[]),zt=(0,H.useCallback)((function(){if(St){var e=Ut();e&&Wt(F()(e).call(e,(function(e){return delete e.tableTailId,e})))}}),[st,Et,A,St]),Ht=(0,H.useCallback)((function(){Ee.redo()}),[]),Kt=(0,H.useCallback)((function(){Ee.undo()}),[]),Vt=(0,H.useState)(!1),Yt=(0,S.c)(Vt,2),qt=Yt[0],Xt=Yt[1],_t=(0,H.useCallback)((function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";null!==(e=ke.current)&&void 0!==e&&null!==(e=e.content)&&void 0!==e&&e.style&&(ke.current.content.style.cursor=t)}),[]);(0,H.useEffect)((function(){return W.eventBus.on("format-done",(function(){qt&&(Xt(!1),_t(""),$t.current={})})),function(){W.eventBus.off("format-done")}}),[qt]);var $t=(0,H.useRef)({}),an=(0,H.useCallback)((function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!st){if(qt)return Xt(!1),$t.current={},void _t("");_t("url(".concat("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQflBRgDCh1Mv+qbAAABAklEQVQoz3XRPyuFYRzG8c/9PE8pf0rHyEApg3CykeGUt6BMJtlNJpMysRmkjEokbwElg5JkMB0ZSJGSjkN0zm05eNRxrd9v133d/UKJxJAe0W+CqjMvHMowZlNQk0+7LYtiSYaiihlvOVwzZ1KnZzFDohqvw8efhnvD9i05yPCoP2z4zOGoqKzPoIO0l1sfCg3wPbJsxagrpxmerTbAiFktiFrNGrJHciiKohTGTUsFQaJuxwkZRyipUTDgwVrtIs3NSXI/Xzelw246odEaRdmP0KVowaltRcdHTRqCujs3XgVNn/gnv0KU6Nan7c/ZchuenFv2jvPmQsW8EZlbl3nhCwJBSyl0EBnIAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIxLTA1LTI0VDAzOjEwOjI5KzAwOjAwjsqiaAAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMS0wNS0yNFQwMzoxMDoyOSswMDowMP+XGtQAAAAASUVORK5CYII=","),auto")),e?(Xt(!0),$t.current.isDoubleClick=!1):(Xt(!0),$t.current.isDoubleClick=!0),$t.current.selectItem=ct}}),[st,Ae,ct,qt]),on=(0,H.useCallback)((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t=e!==Te||t?t:1,Ae!==dt)if(ht){var r=F()(vt).call(vt,(function(n){return[n,(0,M.c)({},e,t)]}));Ee.batchUpdateControlPropertyValues((0,W.createUpdateAction)(r,n))}else Ee.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[Ae,(0,M.c)({},e,t)]],n))}),[Ae,dt,ht,vt,bt,ct]),sn=(0,H.useCallback)((function(){var e;if(Mt){var t=R()(e=we.getSelection()).call(e,(function(e){return e!==dt}));t.length&&(Ee.deleteControl((0,W.createDeleteAction)(t)),we.setSelect([]))}}),[dt,Mt]),dn="".concat(ce,"-dropdown-text"),fn={arrow:!1,arrowOffset:0,arrowSize:0,placement:"rightTop",popperClassName:"kds-dropdown"},gn="borderWidth",hn="borderColor",vn="dotted",mn="dashed",Cn=(0,H.useState)(!1),Dn=(0,S.c)(Cn,2),En=Dn[0],wn=Dn[1],An=(0,H.useState)(!1),bn=(0,S.c)(An,2),In=bn[0],Bn=bn[1],Sn=(U.Dropdown.Menu,U.Dropdown.Item,{marginRight:-5}),Ln=(0,H.useState)(1),Rn=(0,S.c)(Ln,2),Tn=Rn[0],Fn=Rn[1];(0,H.useEffect)((function(){Fn(Number(ct[Te])||1)}),[ct[Te]]);var Nn=function(e){var t,n=K().cloneElement(e,{},(0,yn.c)(F()(t=e.props.children.props.data).call(t,(function(e){return K().cloneElement(e,{},[e.props.children.props.data,K().createElement("div",{className:dn},e.props.children.props.itemTitle)])}))));return K().createElement("div",null,n,K().createElement("div",{className:"customInput"},K().createElement("span",{className:"label"},(0,W.getLangMsg)("printd.components.key0064")),K().createElement(U.InputNumber,{decimalLength:2,onChange:function(e){var t=e.target.value;if(!(t<=0&&""!==t))return t>50?Dt((0,W.getLangMsg)("printd.components.key0065")):void Fn(t)},onBlur:function(){on(Te,Number(Tn))},value:Tn,borderType:"bordered",max:50,min:1,minMark:"[",onClick:function(e){e.stopPropagation()},onKeyDown:function(e){13===e.keyCode&&on(Te,Number(Tn))},zeroShow:!1,showDecimalTailZero:!0})))},Gn={style:{},dropdownClassName:"kds-select",dropdownStyle:{minWidth:120},dropdownRender:function(e){var t,n=K().cloneElement(e,{},F()(t=e.props.children.props.data).call(t,(function(e){return[K().cloneElement(e,{},[e.props.children,K().createElement("div",{className:dn},e.props.children.props.itemTitle)])]})));return n}},Zn=(0,H.useCallback)((function(e){return pt.length&&oa()(pt).call(pt,(function(t){return e&&t[e]}))}),[pt]),Qn=(0,H.useCallback)((function(e,t){var n=(0,yn.c)(new(ua())(F()(pt).call(pt,(function(n){return n[e]||t}))));return 1===n.length?n[0]:t}),[pt]),jn=(0,H.useCallback)((function(e,t,n){var r;return Wn()((0,M.c)((0,M.c)((0,M.c)((0,M.c)((0,M.c)({},"".concat(ce,"-operation-btn"),!0),G()(r="".concat(ce,"-operation-btn-")).call(r,t),t),"".concat(ce,"-btn-enable"),e),"".concat(ce,"-btn-disable"),!e),"".concat(ce,"-btn-used"),Zn(t)||n))}),[ce,ct,Zn]),Pn=(0,H.useCallback)((function(e){return!xn()(gt).call(gt,e)}),[gt]),On=null!==(s=null==Ct||null===(d=Ct.Editor)||void 0===d||null===(d=d.Enum)||void 0===d?void 0:F()(d).call(d,(function(e){return{value:e.Value,label:e.Name,isCustom:e.IsCustom}})))&&void 0!==s?s:[{value:"default",label:(0,W.getLangMsg)("printd.grid.key0127")}],Un=null!==(f=null==Ct||null===(g=Ct.Editor)||void 0===g||null===(g=g.Enum)||void 0===g?void 0:F()(h=R()(g).call(g,(function(e){return!!e.IsCustom}))).call(h,(function(e){return{key:e.Value,label:e.Name,isCustom:e.IsCustom}})))&&void 0!==f?f:[],zn=null!==(v=null==yt||null===(p=yt.Editor)||void 0===p||null===(p=p.Enum)||void 0===p?void 0:F()(p).call(p,(function(e){return{value:e.Value,label:e.Name}})))&&void 0!==v?v:[{value:"default",label:12}],Kn=(0,H.useState)((function(){return qv})),Yn=(0,S.c)(Kn,2),qn=Yn[0],Xn=Yn[1],_n=(0,H.useState)((function(){return[]})),$n=(0,S.c)(_n,2),er=$n[0],tr=$n[1],nr=function(e,t,n,r){if(ht){var a;if(xn()(a=[Nt,Ft]).call(a,t)&&!1===Se.current){var o=Fv(Ee,vt);if(o.length){var i,l,c,u,s,d=function(e,t){var n=f(e,t),r=(0,S.c)(n,2),a=r[0],o=r[1];v[a]=o},f=function(t,a){var o,i,l=v[t.id]?v[t.id][Ue]:t[Ue],c=xn()(o=["dashed","dotted"]).call(o,n)?.5:g===Nt?2:n,u=xn()(i=["dashed","dotted"]).call(i,n)?n:"solid",s=pf(l,a,e,c,u);return[t.id,(0,M.c)((0,M.c)({scale:tt,changeBorderType:r},Ue,s),"gridBorder",{color:e,type:a,line:n})]},g=t,h=Nv(Ee,vt,o),v={};return O()(i=h.firstRowCells).call(i,(function(e){return d(e,jt)})),O()(l=h.lastRowCells).call(l,(function(e){return d(e,Pt)})),O()(c=h.firstColCells).call(c,(function(e){return d(e,Qt)})),O()(u=h.lastColCells).call(u,(function(e){return d(e,Jt)})),void Ee.batchUpdateControlPropertyValues((0,W.createUpdateAction)(F()(s=m()(v)).call(s,(function(e){return[e,v[e]]}))))}}var p=F()(vt).call(vt,(function(a){var o=Ee.findControl(a),i=o[Ue],l=Df(o);t="Line"===o.type?"allBorder":t;var c=vf(i,e,t,n);return[a,(0,M.c)((0,M.c)({scale:tt,changeBorderType:r},Ue,c),"gridBorder",l&&{color:e,type:t,line:n})]}));Ee.batchUpdateControlPropertyValues((0,W.createUpdateAction)(p))}else{t="Line"===ct.type?"allBorder":t;var C=vf(wt,e,t,n);Ee.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[Ae,(0,M.c)((0,M.c)({scale:tt,changeBorderType:r},Ue,C),"gridBorder",bt&&{color:e,type:t,line:n})]]))}},rr=[{value:Qt,label:K().createElement(U.Icon,{prefix:"printdesignericon",type:"zuobiankuang",itemTitle:(0,W.getLangMsg)("printd.grid.key0055"),title:Wv}),title:(0,W.getLangMsg)("printd.grid.key0055"),disabled:"Line"===ct.type},{value:Jt,label:K().createElement(U.Icon,{prefix:"printdesignericon",type:"youbiankuang",itemTitle:(0,W.getLangMsg)("printd.grid.key0056"),title:Wv}),title:(0,W.getLangMsg)("printd.grid.key0056"),disabled:"Line"===ct.type},{value:jt,label:K().createElement(U.Icon,{prefix:"printdesignericon",type:"shangbiankuang",itemTitle:(0,W.getLangMsg)("printd.grid.key0057"),title:Wv}),title:(0,W.getLangMsg)("printd.grid.key0057"),disabled:"Line"===ct.type},{value:Pt,label:K().createElement(U.Icon,{prefix:"printdesignericon",type:"xiabiankuang",itemTitle:(0,W.getLangMsg)("printd.grid.key0058"),title:Wv}),title:(0,W.getLangMsg)("printd.grid.key0058"),disabled:"Line"===ct.type},{value:Ft,label:K().createElement(U.Icon,{prefix:"printdesignericon",type:"waicebiankuang",itemTitle:(0,W.getLangMsg)("printd.grid.key0059"),title:Wv}),title:(0,W.getLangMsg)("printd.grid.key0059"),disabled:"Line"===ct.type},{value:Nt,label:K().createElement(U.Icon,{prefix:"printdesignericon",type:"cuwaibiankuang",itemTitle:(0,W.getLangMsg)("printd.grid.key0060"),title:Wv}),title:(0,W.getLangMsg)("printd.grid.key0060"),disabled:"Line"===ct.type},{value:Tt,label:K().createElement(U.Icon,{prefix:"printdesignericon",type:"neibiankuang",itemTitle:(0,W.getLangMsg)("printd.grid.key0061"),title:Wv}),title:(0,W.getLangMsg)("printd.grid.key0061"),disabled:"Line"===ct.type},{value:Gt,label:K().createElement(U.Icon,{prefix:"printdesignericon",type:"suoyoubiankuang",itemTitle:(0,W.getLangMsg)("printd.grid.key0062"),title:Wv}),title:(0,W.getLangMsg)("printd.grid.key0062"),disabled:"Line"===ct.type},{value:Zt,label:K().createElement(U.Icon,{prefix:"printdesignericon",type:"wubiankuang",itemTitle:(0,W.getLangMsg)("printd.grid.key0063"),title:Wv}),title:(0,W.getLangMsg)("printd.grid.key0063"),disabled:"Line"===ct.type}],ar=(C={},(0,M.c)((0,M.c)((0,M.c)((0,M.c)((0,M.c)((0,M.c)((0,M.c)((0,M.c)((0,M.c)((0,M.c)(C,Ne,(function(e,t){var n;return K().createElement(U.Select,(0,M.c)((0,M.c)((0,M.c)((0,M.c)({disabled:e,className:Wn()("".concat(ce,"-property-font-name"),G()(n="".concat(ce,"-editor-")).call(n,Y().kebabCase(Ne)),t,(0,M.c)((0,M.c)({},"".concat(ce,"-property-font-name-enable"),!Pn(Ne)),"".concat(ce,"-property-font-name-disabled"),Pn(Ne))),visible:P&&!e,onVisibleChange:function(e){z(e)},dropdownRender:function(e){var t;if(!Un.length)return e;var n=R()(t=e.props.children.props.data).call(t,(function(e){return!Hn()(Un).call(Un,(function(t){return e.props.value===t.key}))})),r=K().cloneElement(e,{},n);return K().createElement("div",null,r,K().createElement(U.Dropdown,(0,oe.c)({key:"dropdown",onItemClick:function(e){W.console.log("onItemClick"),on(Ne,e),P&&z(!1)}},fn,{popperStyle:{width:100},popperClassName:Wn()(fn.popperClassName,"kds-font-custom"),menu:Un}),K().createElement("div",{className:Wn()("kds-hover-panel")},K().createElement("span",{className:dn,style:{marginLeft:0}},(0,W.getLangMsg)("printd.grid.key0064")))))},dropdownStyle:{width:100},style:{width:86,height:28},onChange:function(e){on(Ne,e),P&&z(!1)}},"disabled",Pn(Ne)),"borderType","none"),"value",ct[Ne]||"default"),"options",On))})),Ge,(function(e,t){var n;return K().createElement(bv,{bizType:x.bizType,className:Wn()("".concat(ce,"-property-font-size"),t,G()(n="".concat(ce,"-editor-")).call(n,Y().kebabCase(Ge)),(0,M.c)((0,M.c)({},"".concat(ce,"-property-font-size-enable"),!Pn(Ge)),"".concat(ce,"-property-font-size-disabled"),Pn(Ge))),onChange:function(e){on(Ge,e)},value:+ct[Ge]||12,dropdownStyle:{width:100},disabled:Pn(Ge)||e,options:zn})})),Ze,(function(e,t){var n;return K().createElement("div",{title:(0,W.getLangMsg)("printd.grid.key0065"),className:Wn()(jn(It&&!Pn(Ze),Ze),t,G()(n="".concat(ce,"-editor-")).call(n,Y().kebabCase(Ze))),onClick:function(){on(Ze,!Zn(Ze))}},K().createElement(U.Icon,{prefix:"printdesignericon",type:"jiacu"}))})),Qe,(function(e,t){var n;return K().createElement("div",{title:(0,W.getLangMsg)("printd.grid.key0066"),className:Wn()(jn(It&&!Pn(Qe),Qe),t,G()(n="".concat(ce,"-editor-")).call(n,Y().kebabCase(Qe))),onClick:function(){on(Qe,!Zn(Qe))}},K().createElement(U.Icon,{prefix:"printdesignericon",type:"xieti"}))})),je,(function(e,t){var n;return K().createElement("div",{title:(0,W.getLangMsg)("printd.grid.key0067"),className:Wn()(jn(It&&!Pn(je),je),t,G()(n="".concat(ce,"-editor-")).call(n,Y().kebabCase(je))),onClick:function(){on(je,!Zn(je))}},K().createElement(U.Icon,{prefix:"printdesignericon",type:"xiahuaxian"}))})),Je,(function(e,t){var n;return K().createElement("div",{title:(0,W.getLangMsg)("printd.grid.key0068"),className:Wn()(jn(It&&!Pn(Je),Je),t,G()(n="".concat(ce,"-editor-")).call(n,Y().kebabCase(Je))),onClick:function(){on(Je,!Zn(Je))}},K().createElement("img",{src:"data:image/png;base64,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",style:{width:16}}))})),Pe,(function(e,t){var n;return K().createElement("div",{style:{width:40},className:Wn()(jn(It&&!Pn(Pe)),t,"".concat(ce,"-self-select"),G()(n="".concat(ce,"-editor-")).call(n,Y().kebabCase(Pe)))},K().createElement(Av,{handleChange:function(e){on(Pe,e)},setColorPickVisible:ne,setMoreBarVisible:_,enable:It&&!Pn(Pe)&&!e,value:ct[Pe]||"#000000"}))})),Oe,(function(e,t){var n;return K().createElement("div",{style:{width:40},className:Wn()(jn(It&&!Pn(Oe)),t,"".concat(ce,"-self-select"),G()(n="".concat(ce,"-editor-")).call(n,Y().kebabCase(Oe)))},K().createElement(kv,{value:ct[Oe]||"#ffffff",setColorPickVisible:ne,setMoreBarVisible:_,handleChange:function(e){on(Oe,e)},enable:It&&!Pn(Oe)&&!e}))})),Te,(function(e,t){var n,r;return K().createElement(U.Select,(0,oe.c)({},Gn,{disabled:Pn(Te)||e,dropdownClassName:Wn()("kds-select-border","kds-select","lineHeight"),className:Wn()(!Pn(Te)&&"".concat(ce,"-select-enable"),t,G()(n="".concat(ce,"-editor-")).call(n,Y().kebabCase(Te))),onChange:function(e){W.console.log(e),on(Te,e)},onVisibleChange:function(e){le(e)},onSelect:function(){le(!1),_(!1)},borderType:"none",value:xn()(r=[1,1.15,1.25,1.5,2]).call(r,Qn(Te,1))?Qn(Te,1):"default",options:[{value:"default",label:K().createElement(U.Icon,{prefix:"printdesignericon",type:"xingjushezhi",itemTitle:"1.0"}),title:(0,W.getLangMsg)("printd.grid.key0114")},{value:1,label:K().createElement(U.Icon,{prefix:"printdesignericon",type:"xingjushezhi",itemTitle:"1.0"}),title:(0,W.getLangMsg)("printd.grid.key0114")},{value:1.15,label:K().createElement(U.Icon,{prefix:"printdesignericon",type:"xingjushezhi",itemTitle:"1.15"}),title:(0,W.getLangMsg)("printd.grid.key0114")},{value:1.25,label:K().createElement(U.Icon,{prefix:"printdesignericon",type:"xingjushezhi",itemTitle:"1.25"}),title:(0,W.getLangMsg)("printd.grid.key0114")},{value:1.5,label:K().createElement(U.Icon,{prefix:"printdesignericon",type:"xingjushezhi",itemTitle:"1.5"}),title:(0,W.getLangMsg)("printd.grid.key0114")},{value:2,label:K().createElement(U.Icon,{prefix:"printdesignericon",type:"xingjushezhi",itemTitle:"2.0"}),title:(0,W.getLangMsg)("printd.grid.key0114")}],dropdownRender:Nn,defaultValue:1}))})),Re,(function(e,t){var n;return K().createElement(U.Select,(0,oe.c)({},Gn,{disabled:Pn(Re)||e,className:Wn()(!Pn(Re)&&"".concat(ce,"-select-enable"),t,G()(n="".concat(ce,"-editor-")).call(n,Y().kebabCase(Re))),onChange:function(e){W.console.log(e),on(Re,e)},borderType:"none",value:Qn(Re,"left"),options:[{value:"left",label:K().createElement(U.Icon,{prefix:"printdesignericon",type:"duanluo-zuoduiqi",itemTitle:(0,W.getLangMsg)("printd.grid.key0069"),title:Ov}),title:(0,W.getLangMsg)("printd.grid.key0069")},{value:"center",label:K().createElement(U.Icon,{prefix:"printdesignericon",type:"duanluo-juzhong",itemTitle:(0,W.getLangMsg)("printd.grid.key0070"),title:Ov}),title:(0,W.getLangMsg)("printd.grid.key0070")},{value:"right",label:K().createElement(U.Icon,{prefix:"printdesignericon",type:"duanluo-youduiqi",itemTitle:(0,W.getLangMsg)("printd.grid.key0071"),title:Ov}),title:(0,W.getLangMsg)("printd.grid.key0071")},{value:"justify",label:K().createElement(U.Icon,{prefix:"printdesignericon",type:"duanluo-quanbuliangduanduiqi",itemTitle:(0,W.getLangMsg)("printd.grid.key0072"),title:Ov}),title:(0,W.getLangMsg)("printd.grid.key0072"),disabled:"Image"===ct.type}]}))})),(0,M.c)((0,M.c)((0,M.c)(C,Ue,(function(e,t){var n;return K().createElement(U.Select,(0,oe.c)({},Gn,{dropdownStyle:{minWidth:120,overflow:"hidden"},className:Wn()(!Pn(Ue)&&"".concat(ce,"-select-enable"),t,G()(n="".concat(ce,"-editor-")).call(n,Y().kebabCase(Ue))),visible:Z&&!e,onVisibleChange:function(e){En||In||Q(e)},dropdownClassName:Wn()("kds-select-border","kds-select"),dropdownRender:function(e){return function(e,t,n){var r,a=K().cloneElement(e,{},(0,yn.c)(F()(r=e.props.children.props.data).call(r,(function(e){return e.props.value,K().cloneElement(e,{},[e.props.children,K().createElement("div",{className:dn},e.props.children.props.itemTitle)])})))),o=function(e,r){pe(e),nr(de,ye===Nt&&e!==un?Ft:ye,e),Bn(!1),t(!1),n(!1)};return K().createElement("div",null,a,K().createElement(U.Tooltip,(0,oe.c)({key:gn},fn,{gap:-6,visible:In,onVisibleChange:Bn,popperClassName:"kds-border-width-dropdown",popperStyle:{width:100,transition:"none"},tip:K().createElement("div",null,K().createElement("div",{className:Wn()(["kds-border-width-dropdown-item",{selected:ve===ln}]),key:ln,onClick:function(){return o(ln)}},K().createElement("span",{className:"kds-border-width-dropdown-item-changgui"})),K().createElement("div",{className:Wn()(["kds-border-width-dropdown-item",{selected:ve===cn}]),key:cn,onClick:function(){return o(cn)}},K().createElement("span",{className:"kds-border-width-dropdown-item-cu"})),K().createElement("div",{className:Wn()(["kds-border-width-dropdown-item",{selected:ve===un}]),key:un,onClick:function(){return o(un)}},K().createElement("span",{className:"kds-border-width-dropdown-item-jiacu"})),K().createElement("div",{className:Wn()(["kds-border-width-dropdown-item",{selected:ve===vn}]),key:vn,onClick:function(){return o(vn)}},K().createElement("span",{className:"kds-border-width-dropdown-item-dotted"},K().createElement("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEwAAAABCAYAAAB0UUiZAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAZiS0dEAP8A/wD/oL2nkwAAAB5JREFUGNNjdHBw+M/AwMBw4MABRgYoQBcb6XxkMQCOoUnBExsl8wAAAD5lWElmAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAATKADAAQAAAABAAAAAQAAAACZ+EYYAAAAAElFTkSuQmCC"}))),K().createElement("div",{className:Wn()(["kds-border-width-dropdown-item",{selected:ve===mn}]),key:mn,onClick:function(){return o(mn)}},K().createElement("span",{className:"kds-border-width-dropdown-item-dashed"},K().createElement("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAE0AAAABCAYAAACbkyOnAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAATaADAAQAAAABAAAAAQAAAAAxfJBbAAAAGklEQVQYGWN0cHD4z4AGDhw4wAgTGpXHDB8Apz4lwZkCeZgAAAAASUVORK5CYII="}))))}),K().createElement("div",{className:Wn()("kds-hover-panel")},K().createElement(U.Icon,{prefix:"printdesignericon",type:"shezhibiankuangcuxi"}),K().createElement("span",{className:dn,style:Sn},(0,W.getLangMsg)("printd.grid.key0053")),K().createElement(U.Icon,{type:"arrow-right-solid"}))),"1"!==x.bizType&&K().createElement(U.Tooltip,(0,oe.c)({key:hn},fn,{gap:-6,popperStyle:{width:244,height:92,transition:"none"},visible:En,onVisibleChange:wn,popperClassName:"kds-color-dropdown",tip:K().createElement(wv,{showPanel:En,color:"#ffffff",onClosePanel:function(){t(!1),wn(!1),n(!1)},onChange:function(e){var t=e.color;fe(t),nr(t,ye,ye===Nt?Nt:ve,"color")},onFocus:function(){!En&&wn(!0)},setPoperVisible:wn})}),K().createElement("div",{className:Wn()("kds-hover-panel")},K().createElement(U.Icon,{prefix:"printdesignericon",type:"xiantiaoyanse"}),K().createElement("span",{className:dn,style:Sn},(0,W.getLangMsg)("printd.grid.key0054")),K().createElement(U.Icon,{type:"arrow-right-solid"}))))}(e,Q,_)},disabled:Pn(Ue)||e,onSelect:function(e){De(e),nr(de,e,ye===Nt?un:ve),Q(!1),_(!1)},borderType:"none",defaultValue:Ft,options:rr}))})),Fe,(function(e,t){var n;return K().createElement(U.Select,(0,oe.c)({},Gn,{disabled:Pn(Fe)||e,onChange:function(e){on(Fe,e)},borderType:"none",className:Wn()(!Pn(Fe)&&"".concat(ce,"-select-enable"),t,G()(n="".concat(ce,"-editor-")).call(n,Y().kebabCase(Fe))),value:Qn(Fe,"middle"),options:[{value:"top",label:K().createElement(U.Icon,{prefix:"printdesignericon",type:"xinggaoduiqizhiding",itemTitle:(0,W.getLangMsg)("printd.grid.key0073"),title:Uv}),title:(0,W.getLangMsg)("printd.grid.key0073")},{value:"middle",label:K().createElement(U.Icon,{prefix:"printdesignericon",type:"xinggaoduiqijuzhong",itemTitle:(0,W.getLangMsg)("printd.grid.key0074"),title:Uv}),title:(0,W.getLangMsg)("printd.grid.key0074")},{value:"bottom",label:K().createElement(U.Icon,{prefix:"printdesignericon",type:"xinggaoduiqizhidi",itemTitle:(0,W.getLangMsg)("printd.grid.key0075"),title:Uv}),title:(0,W.getLangMsg)("printd.grid.key0075")}]}))})),Yv,(function(e,t){var n;return K().createElement(K().Fragment,null,(qn.length===qv.length||er.length>1)&&K().createElement("div",{className:Wn()("".concat(ce,"-operation-bar-split-line"),t)}),K().createElement(U.Select,(0,oe.c)({},Gn,{disabled:Et.length<2||Bt||e,className:Wn()(!(Et.length<2||Bt)&&"".concat(ce,"-select-enable"),t,G()(n="".concat(ce,"-editor-")).call(n,Y().kebabCase(Yv))),onChange:function(e){W.eventBus.emit("align-shapes",{type:e,ids:Et})},borderType:"none",value:We,options:[{value:We,label:K().createElement(U.Icon,{prefix:"printdesignericon",type:"zuoduiqi3",itemTitle:(0,W.getLangMsg)("printd.grid.key0076"),title:zv}),title:(0,W.getLangMsg)("printd.grid.key0076")},{value:Ve,label:K().createElement(U.Icon,{prefix:"printdesignericon",type:"zuoyoujuzhong",itemTitle:(0,W.getLangMsg)("printd.grid.key0077"),title:zv}),title:(0,W.getLangMsg)("printd.grid.key0077")},{value:Ye,label:K().createElement(U.Icon,{prefix:"printdesignericon",type:"shuipingfenbu",itemTitle:(0,W.getLangMsg)("printd.grid.key0078"),title:zv}),disabled:Et.length<3,title:(0,W.getLangMsg)("printd.grid.key0078")},{value:ze,label:K().createElement(U.Icon,{prefix:"printdesignericon",type:"youduiqi3",itemTitle:(0,W.getLangMsg)("printd.grid.key0079"),title:zv}),title:(0,W.getLangMsg)("printd.grid.key0079")},{value:"top",label:K().createElement(U.Icon,{prefix:"printdesignericon",type:"dingduiqi",itemTitle:(0,W.getLangMsg)("printd.grid.key0080"),title:zv}),title:(0,W.getLangMsg)("printd.grid.key0080")},{value:Ke,label:K().createElement(U.Icon,{prefix:"printdesignericon",type:"shangxiajuzhong",itemTitle:(0,W.getLangMsg)("printd.grid.key0081"),title:zv}),title:(0,W.getLangMsg)("printd.grid.key0081")},{value:qe,label:K().createElement(U.Icon,{prefix:"printdesignericon",type:"chuizhifenbu",itemTitle:(0,W.getLangMsg)("printd.grid.key0082"),title:zv}),disabled:Et.length<3,title:(0,W.getLangMsg)("printd.grid.key0082")},{value:He,label:K().createElement(U.Icon,{prefix:"printdesignericon",type:"diduiqi",itemTitle:(0,W.getLangMsg)("printd.grid.key0083"),title:zv}),title:(0,W.getLangMsg)("printd.grid.key0083")}]})))}))),or=(0,H.useRef)(null),ir=(0,H.useRef)(null),lr=(0,H.useRef)(null),cr=(0,H.useRef)(null),ur=(0,H.useCallback)((function(){var e=qv;if(W.console.log("count"),ir.current){var t=ir.current.offsetWidth;if(t<=32)return void(Y().isEqual(e,er)||tr(e));var n,r=0,a=[],o=[],i=Qv(qv);try{for(i.s();!(n=i.n()).done;){var l,c,u=n.value,s=ir.current.querySelector(G()(l=".".concat(ce,"-editor-")).call(l,Y().kebabCase(u.name))),d=(null!==(c=null==s?void 0:s.offsetWidth)&&void 0!==c?c:0)+(s?Jd()(getComputedStyle(s).marginLeft||0)+Jd()(getComputedStyle(s).marginRight||0):u.margin);if(!(t>=d)){t<32&&(a.pop(),t+=o.pop()||0,r--);break}a.push(u),t-=d,o.push(d),r++}}catch(e){i.e(e)}finally{i.f()}Y().isEqual(a,qn)||(Xn(a),tr(kn()(e).call(e,r)))}}),[qv,er,qn,ce]),sr=(0,H.useRef)(Y().debounce(ur));return(0,H.useEffect)((function(){sr.current(),W.eventBus.emit("contextStrokeEnabled","1"===x.bizType)}),[]),(0,H.useEffect)((function(){sr.current=Y().debounce(ur)}),[qv,er,qn,ce]),(0,H.useEffect)((function(){var e=function(){sr.current()};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[sr.current]),(0,H.useImperativeHandle)(t,(function(){return{formatControlInfoRef:$t,copyControl:Ut,pasteControl:Wt,copyAndPasteControl:zt,canvasRedo:Ht,canvasUndo:Kt}}),[$t,Ut,zt]),K().createElement("div",{className:ce,ref:or},K().createElement("div",{ref:cr},K().createElement("div",{className:"".concat(ce,"-operation-bar"),ref:lr},K().createElement("div",{title:G()(y="".concat((0,W.getLangMsg)("printd.grid.key0084"),"\n")).call(y,Sv()?"⌘+Z":"Ctrl+Z"),className:Wn()((0,M.c)((0,M.c)({},"".concat(ce,"-operation-disable"),!Ee.canUndo()),"".concat(ce,"-operation-btn"),!0)),onClick:Kt},K().createElement(U.Icon,{prefix:"printdesignericon",type:"chexiao"})),K().createElement("div",{title:G()(D="".concat((0,W.getLangMsg)("printd.grid.key0085"),"\n")).call(D,Sv()?"⌘+Y":"Ctrl+Y"),className:Wn()((0,M.c)((0,M.c)({},"".concat(ce,"-operation-disable"),!Ee.canRedo()),"".concat(ce,"-operation-btn"),!0)),onClick:Ht},K().createElement(U.Icon,{prefix:"printdesignericon",type:"zhongzuo"})),K().createElement("div",{className:"".concat(ce,"-operation-bar-split-line")}),K().createElement("div",{className:jn(St),onClick:zt,title:G()(E="".concat((0,W.getLangMsg)("printd.grid.key0086"),"\n")).call(E,Sv()?"⌘+D":"Ctrl+D")},K().createElement(U.Icon,{prefix:"printdesignericon",type:"fuzhi"})),K().createElement("div",{title:(0,W.getLangMsg)("printd.grid.key0087"),className:jn(Lt,"null",qt&&It),onClick:function(){an()},onDoubleClick:function(){an(!1)}},K().createElement(U.Icon,{prefix:"printdesignericon",type:"geshishua"})),K().createElement("div",{title:"".concat((0,W.getLangMsg)("printd.grid.key0088"),"\nDelete"),className:jn(Mt),onClick:sn},K().createElement(U.Icon,{prefix:"printdesignericon",type:"shanchu"})),K().createElement("div",{className:"".concat(ce,"-operation-bar-split-line")})),K().createElement("div",{className:"".concat(ce,"-property-operation-bar"),ref:ir},F()(w=R()(qv).call(qv,(function(e){return Hn()(qn).call(qn,(function(t){return t.name===e.name}))}))).call(w,(function(e){return ar[e.name](!1)})),er.length>0&&K().createElement(U.Tooltip,{popperClassName:"".concat(ce,"-operation-more-popper"),arrow:!1,arrowSize:0,placement:"bottomRight",visible:X,onVisibleChange:function(e){!ie&&!Z&&(!te||e)&&_(e)},tip:K().createElement("div",{className:"".concat(ce,"-more-property-bar")},F()(er).call(er,(function(e){var t=e.name;return ar[t](!1)}))),trigger:"click",popperStyle:{}},K().createElement("div",{className:Wn()("".concat(ce,"-operation-btn"),"".concat(ce,"-operation-more-btn"))},K().createElement(U.Icon,{type:"more"}))),F()(k=R()(qv).call(qv,(function(e){return!Hn()(qn).call(qn,(function(t){return t.name===e.name}))}))).call(k,(function(e){return ar[e.name](!0,"shadow-calc-dom")})))),K().createElement("div",null,K().createElement("div",{className:"".concat(ce,"-canvas-operation-bar")},K().createElement("div",{className:jn(!0,"",Xe),onClick:function(){_e(!Xe),Ie&&(Ie.current=!Xe),W.eventBus.emit("contextStrokeEnabled",!Xe)},title:(0,W.getLangMsg)("printd.grid.key0089")},K().createElement(U.Icon,{prefix:"printdesignericon",type:"kaiqifuzhuxian",onClick:function(){}})),K().createElement(U.Select,{style:{width:64},dropdownStyle:{width:100},title:(0,W.getLangMsg)("printd.grid.key0090"),borderType:"none",value:tt,options:Ot,onChange:Rt}))))}))),_v=Xv;function $v(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function ep(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?O()(n=$v(Object(a),!0)).call(n,(function(t){(0,M.c)(e,t,a[t])})):A()?b()(e,A()(a)):O()(r=$v(Object(a))).call(r,(function(t){B()(e,t,w()(a,t))}))}return e}var tp=at;var np=function(e){e.x,e.y;var t=e.id,n=e.width,r=e.height,a=e.border,o=void 0===a?{}:a,i=e.borderType,l=e.isSelected,c=e.contextStrokeEnabled,u=e.scale,s=Vf(o,i),d=(0,S.c)(s,4),f=d[0],g=d[1],h=d[2],v=g||"#B2B2B2",p=d[3]||1,m=!!c&&!(xn()(f).call(f,Ft)||xn()(f).call(f,Gt)),C=!(xn()(f).call(f,Ft)||xn()(f).call(f,Gt)),y=[3,3],D=(0,H.useRef)(null),E=o.width||{},w=E.top,k=void 0===w?0:w,A=E.left,x=void 0===A?0:A,b=E.right,I=void 0===b?0:b,B=E.bottom,M=void 0===B?0:B,L=o.color||{},R=L.top,T=L.left,F=L.right,N=L.bottom,G=o.style||{},Z=G.top,Q=G.left,j=G.right,J=G.bottom,P=Ud(n,u),U=Ud(r,u),W=[0,0,P,0],z=[0,0,0,U],V=[P,0,P,U],Y=[P,U,0,U],q=(0,H.useRef)(null),X=(0,H.useRef)(null),_=(0,H.useRef)(null),$=(0,H.useRef)(null);(0,H.useImperativeHandle)(D,(function(){return{mouseEnter:function(e){var t;O()(t=[q,X,_,$]).call(t,(function(t){var n,r;null===(n=t.current)||void 0===n||n.stroke(e),null===(r=t.current)||void 0===r||r.draw()}))},mouseLeave:function(){var e,t,n,r;null===(e=_.current)||void 0===e||e.stroke(R||tp),null===(t=q.current)||void 0===t||t.stroke(T||tp),null===(n=X.current)||void 0===n||n.stroke(F||tp),null===(r=$.current)||void 0===r||r.stroke(N||tp)}}}),[R,T,F,N]);var ee={borderTypes:f,stroke:v,strokeWidth:p,strokeEnabled:m,dashEnabled:C,defaultDash:y,controlStrokeRef:D},te={listening:!1,draggable:!1},ne=(0,H.useMemo)((function(){switch(h){case"dashed":return[3,1];case"dotted":return[2,2];default:return y}}),[h]),re=K().createElement(Xh.Group,te,0!==k&&K().createElement(Xh.Line,(0,oe.c)({key:"".concat(t,"_top_stroke"),ref:_,name:"".concat(t,"_top_border_line")},te,{stroke:R||tp,strokeWidth:2*(k||1),dashEnabled:"solid"!==Z,dash:ne,points:W})),0!==x&&K().createElement(Xh.Line,(0,oe.c)({key:"".concat(t,"_left_stroke"),ref:q,name:"".concat(t,"_left_border_line")},te,{stroke:T||tp,strokeWidth:2*(x||1),dashEnabled:"solid"!==Q,dash:ne,points:z})),0!==I&&K().createElement(Xh.Line,(0,oe.c)({key:"".concat(t,"_right_stroke"),ref:X,name:"".concat(t,"_right_border_line")},te,{stroke:F||tp,strokeWidth:2*(I||1),dashEnabled:"solid"!==j,dash:ne,points:V})),0!==M&&K().createElement(Xh.Line,(0,oe.c)({key:"".concat(t,"_bottom_stroke"),ref:$,name:"".concat(t,"_bottom_border_line")},te,{stroke:N||tp,strokeWidth:2*(M||1),dashEnabled:"solid"!==J,dash:ne,points:Y}))),ae=0!==k||0!==x||0!==I||0!==M;return ep(ep({},ee),{},{customedStrokeElement:!l&&ae&&re,dashEnabled:ee.dashEnabled&&!(0!==k&&0!==x&&0!==I&&0!==M)&&!l})},rp=["src","getImageSize","xPos","yPos","scale","pixelRatio","verAlignment","horAlignment"],ap=(0,H.forwardRef)((function(e,t){var n=e.src,r=e.getImageSize,a=(e.xPos,e.yPos,e.scale),o=(e.pixelRatio,e.verAlignment),i=e.horAlignment,l=(0,Pn.c)(e,rp),c=(0,H.useState)(null),u=(0,S.c)(c,2),s=u[0],d=u[1],f=(0,H.useState)({width:0,height:0,left:0,top:0}),g=(0,S.c)(f,2),h=g[0],v=g[1],p=h.width,m=h.height,C=h.left,y=h.top,D=(0,H.useRef)(null),E=t||D;return(0,H.useEffect)((function(){var e,t=function(){d(e)};return n&&((e=new Image).addEventListener("load",t),e.src=n),function(){var n;null===(n=e)||void 0===n||n.removeEventListener("load",t)}}),[n]),(0,H.useEffect)((function(){if(null!==s){var e=s.width,t=s.height,n=Wd(e,1),a=Wd(t,1);v(r(n,a,o,i))}}),[v,r,s,o,i]),s?K().createElement(Xh.Image,(0,oe.c)({ref:E,image:s,width:Ud(p,a),height:Ud(m,a),x:C?Ud(C,a):void 0,y:y?Ud(y,a):void 0},l,{name:Se})):null})),op=ap,ip=2.54;function lp(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function cp(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?O()(n=lp(Object(a),!0)).call(n,(function(t){(0,M.c)(e,t,a[t])})):A()?b()(e,A()(a)):O()(r=lp(Object(a))).call(r,(function(t){B()(e,t,w()(a,t))}))}return e}var up,sp=function(e,t,n){if(Ef(e)||kf(e)){var r=e.subGridId,a=e.tableTailId;null!=r&&r.length&&t.push.apply(t,(0,yn.c)(n.findControl(r))),a&&t.push(n.findControl(a))}if(wf(e)||Rf(e)){var o=e.parentGridId;o&&t.push(n.findControl(o))}};function dp(e,t){return function(n,r){var a,o,i,l=n.x,c=n.y,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=[],d=e.id,f=e.parentId,g=e.height,h=e.width,v=e.x,p=e.y,m=t.dataContext,C=t.selectionContext,y=t.getRedundancyXY,D=t.pageHeight,E=t.stageRef,w=t.rootId,k=t.scale,A=t.setMessage,x=t.forceUpdateTransformer,b=null===(a=E.current)||void 0===a?void 0:a.getPointerPosition(),I=null===(o=E.current)||void 0===o?void 0:o.findOne("#".concat(d)),B=(0,yn.c)(new(ua())(G()(i=[]).call(i,(0,yn.c)(C.getSelection()),[d]))),L=[];sp(e,L,m);var R=m.findControlByCondition((function(e){return xn()(B).call(B,e.id)})),T=(0,yn.c)(R);O()(R).call(R,(function(e){sp(e,T,m)}));var F=b.x,N=b.y,Z=y(),j=Z.x,J=Z.y,P=["Text","Image","QRCode","Barcode","LayoutGrid","Line"];F=Wd(F-j,k),N=Wd(N-J,k),l=Wd(l,k),c=Wd(c,k);var U,z=eh(cp(cp({},e),{},{x:l,y:c}),m),H=$g(cp(cp({},e),{},{x:l,y:c}),m),K=u.length?Q()(u).call(u,(function(e,t){var n=(0,S.c)(t,2),r=n[0],a=n[1],o=void 0===a?{}:a,i=m.findControl(r);return Math.min(eh(cp(cp({},i),o),m),e)}),z):z,V=u.length?Q()(u).call(u,(function(e,t){var n=(0,S.c)(t,2),r=n[0],a=n[1],o=void 0===a?{}:a,i=m.findControl(r);return Math.max($g(cp(cp({},i),o),m),e)}),H):H,Y=m.findControlByCondition((function(e){return"Header"===e.type})),q=m.findControlByCondition((function(e){return"Footer"===e.type})),X=m.findControlByCondition((function(e){return"TableTail"===e.type})),_=Y[0]||{},$=_.width,ee=void 0===$?0:$,te=_.height,ne=void 0===te?0:te,re=q[0]||{},ae=re.width,oe=void 0===ae?0:ae,ie=re.height,le=void 0===ie?0:ie,ce=re.y,ue=void 0===ce?0:ce,se=function(){return B.length>1?(O()(T).call(T,(function(e){var t,n=null===(t=E.current)||void 0===t?void 0:t.findOne("#".concat(e.id));null==n||n.position({x:Ud(e.x,k),y:Ud(e.y,k)})})),x(),A((0,W.getLangMsg)("printd.grid.key0023")),!0):Ef(e)||Ff(e)||wf(e)||Rf(e)||kf(e)?(null==I||I.position({x:Ud(v,k),y:Ud(p,k)}),O()(L).call(L,(function(e){var t,n=null===(t=E.current)||void 0===t?void 0:t.findOne("#".concat(e.id));null==n||n.position({x:Ud(e.x,k),y:Ud(e.y,k)})})),A((0,W.getLangMsg)("printd.grid.key0024")),!0):"RichText"===e.type?(null==I||I.position({x:Ud(v,k),y:Ud(p,k)}),A((0,W.getLangMsg)("printd.grid.key0025")),!0):void 0};if(f===w)if(Y.length&&F<ee&&N<ne){var de=Y[0].id;if(se())return;c+g>ne?g>=ne?s.push([d,{y:0,x:l,height:ne,width:ne/g*h,parentId:de}]):s.push([d,{y:ne-g,x:l,parentId:de}]):s.push([d,{x:l,y:c,parentId:de}])}else if(q.length&&F<oe&&N>D-le){var fe=q[0].id;if(se())return;N-ue+g>le&&g>=le?s.push([d,{y:0,x:l,height:le,width:le/g*h,parentId:fe}]):s.push([d,{y:c-ue,x:l,parentId:fe}])}else{if(ne>0&&K<ne)return O()(T).call(T,(function(e){var t,n=null===(t=E.current)||void 0===t?void 0:t.findOne("#".concat(e.id));null==n||n.position({x:Ud(e.x,k),y:Ud(e.y,k)})})),void x();if(ue>0&&V>ue)return O()(T).call(T,(function(e){var t,n=null===(t=E.current)||void 0===t?void 0:t.findOne("#".concat(e.id));null==n||n.position({x:Ud(e.x,k),y:Ud(e.y,k)})})),void x();if(X.length&&xn()(P).call(P,e.type)){var ge=Hn()(X).call(X,(function(e){var t=e.height,n=e.parentGridId,r=m.findControl(n),a=r.y,o=r.height,i=r.x,l=r.width;return o+a<N&&N<o+a+t&&i<F&&F<l+i}));if(ge){var he=Q()(B).call(B,(function(e,t){var n=m.findControl(t).type;return xn()(P).call(P,n)||e.add(n),e}),new(ua()));if(he.size){O()(T).call(T,(function(e){var t,n=null===(t=E.current)||void 0===t?void 0:t.findOne("#".concat(e.id));null==n||n.position({x:Ud(e.x,k),y:Ud(e.y,k)})})),x();var ve=(0,yn.c)(he),pe=(up||(up=(0,M.c)((0,M.c)((0,M.c)({},ht,(0,W.getLangMsg)("printd.grid.key0031")),gn.richText,(0,W.getLangMsg)("printd.components.key0062")),vt,(0,W.getLangMsg)("printd.components.key0063"))),up),me=Q()(ve).call(ve,(function(e,t){return pe[t]&&e.push(up[t]),e}),[]);return A((0,W.getLangMsg)({key:"printd.grid.key0124",variables:{detail:me.length?"：".concat(me.join(" ")):""}})),!0}U=!0;var Ce=ge.parentGridId,ye=ge.id,De=m.findControl(Ce),Ee=De.y,we=De.x,ke=De.height,Ae=E.current.dragStartMousePos,xe=Wd(Ae.x-j,k),be=Wd(Ae.y-J,k),Ie=Wd(b.x-j,k),Be=Wd(b.y-J,k);1===B.length?s.push([d,{x:l-we,y:c-ke-Ee,parentId:ye}]):O()(B).call(B,(function(e){var t=m.findControl(e),n=t.x,r=t.y,a=(t.type,xe-n),o=be-r,i=Ie-a<0?0:Ie-a,l=(Be-o<0?0:Be-o)-ke-Ee;s.push([e,{x:i-we,y:l<0?0:l,parentId:ye}])}))}else s.push([d,{x:l,y:c}])}else s.push([d,{x:l,y:c}])}else s.push([d,{x:l,y:c}]);if(U||(s.push.apply(s,(0,yn.c)(u)),U=!1),1===s.length){var Se=(0,S.c)(s[0],2),Me=Se[0],Le=Se[1];m.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[Me,Le]]))}else m.batchUpdateControlPropertyValues((0,W.createUpdateAction)(s))}}var fp=function(e,t,n){return Math.max(Ud(e,t,n),.1)},gp=function(){return(0,H.useCallback)((function(e,t,n){return 0!==e.evt.button||(t!==dt?(n(e),!0):void 0)}),[])},hp=n(48560),vp=n.n(hp),pp=function(e,t){return!(!vp()(e,t)&&!Y().isEqual(e,t))},mp=function(e,t){var n=t.x,r=t.y,a=t.width,o=t.height;return e.x<n||e.y<r||Kd(e.x+e.width,1)>Kd(n+a,1)||Kd(e.y+e.height,Kd)>Kd(r+o,1)},Cp=(0,H.memo)((0,H.forwardRef)((function(e,t){var n=e.stageRef,r=e.rootControlRef,a=e.selectedId,o=e.parentId,i=e.isCell,l=void 0!==i&&i,c=e.isSelected,u=void 0!==c&&c,s=e.isLastSelected,d=void 0!==s&&s,f=e.trRef,g=e.rotateEnabled,h=void 0!==g&&g,v=e.resizeEnabled,p=void 0===v||v,m=e.id,C=e.dataContext,y=e.enabledAnchors,D=void 0===y?["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"]:y,E=e.boundBoxFunc,w=e.controlGroupRef,k=e.isGlobal,A=void 0!==k&&k,x=e.refLineRef,b=void 0===x?{}:x,I=e.padding,B=(0,H.useRef)(null),L=f||B,R=E||function(e,t){var o,i,l=ev(n.current.findOne("#".concat(null===(o=C.findControl(a))||void 0===o?void 0:o.parentId))||r.current),c=l.x,u=l.y,s=l.width,d=l.height,f=l.bottom,g=Yd(e),h=Yd(t),v=(b.current||{}).searchRefLines,p=L.current.getActiveAnchor(),y=v&&v(a,!0,(0,oe.c)({},h,{activeAnchor:p}));(W.console.log("refPosition out",y),y&&!Y().isEmpty(y))&&(W.console.log("refPosition",y),W.console.log("refPosition",g,h),O()(i=ch()(y)).call(i,(function(e){var t=(0,S.c)(e,2),n=t[0],r=t[1];Y().isUndefined(r)||(h[n]=r)})));if(mp(g,l))return W.console.log("isShapeOverflow(oldBox, rootRect)",g,h,l,mp),C&&Df(C.findControl(m))?g.x>c+s||g.x<c||g.y<u||g.y>u+d?h:(0,oe.c)({},g,{width:g.width>s?Kd(c+s-g.x,1):g.width,height:g.height>d?Kd(u+d-g.y,1):g.height}):h;if(mp(h,l))return h.x!==g.x||h.y!==g.y?(0,oe.c)({},g,{x:h.x<l.x?l.x:g.x,y:h.y<l.y?l.y:g.y,width:h.x<l.x?Kd(h.width+(h.x-l.x),1):g.width,height:h.y<l.y?Kd(h.height+(h.y-l.y),1):g.height}):(0,oe.c)({},g,{width:Kd(h.x+h.width,1)>Kd(l.x+l.width,1)?Kd(l.x+l.width-h.x,1):g.width,height:Kd(h.y+h.height,1)>Kd(l.y+l.height,1)?Kd(l.y+l.height-h.y,1):g.height});var D=C&&C.findControl(a);if(D&&ah(D)){if(h.height>d)return g}else if(h.y+h.height>f)return g;return 0===h.height?g:h},T=(0,H.useRef)(!1),F=(0,H.useCallback)((function(){if(u){var e,t,r,o,i,l=null===(e=n.current)||void 0===e?void 0:e.findOne((function(e){var t,n=e.name().split(" ");return oa()(t=[a.toString(),Ae]).call(t,(function(e){return xn()(n).call(n,e)}))}));if(l){if(null===(t=L.current)||void 0===t||t.nodes([l]),null!=w&&w.current)null===(r=L.current)||void 0===r||r.zIndex(Math.max((null===(o=w.current)||void 0===o?void 0:o.children.length)-2,0))}else null===(i=L.current)||void 0===i||i.detach()}}),[u,a,o]);return K().useEffect((function(){A||F()}),[u,a,o,A]),(0,H.useEffect)((function(){var e=function(e){var t,n;(W.console.log("e.ctrlKe shapeRef.current?.stopDrag()"),null!==(t=L.current)&&void 0!==t&&t.isTransforming())&&(null===(n=L.current)||void 0===n||n.stopTransform())};return A&&document.addEventListener("keydown",e),function(){A&&document.removeEventListener("keydown",e)}}),[A]),A&&le()((function(){F()})),(0,H.useImperativeHandle)(t,(function(){return{showDash:function(){var e,t;!T.current&&u&&(null===(e=L.current)||void 0===e||e.borderDash([2,2]),null===(t=L.current)||void 0===t||t.forceUpdate(),T.current=!0)},hideDash:function(){var e,t;T.current&&u&&(null===(e=L.current)||void 0===e||e.borderDash([]),null===(t=L.current)||void 0===t||t.forceUpdate(),T.current=!1)},mouseEnter:function(e){var t,n,r;null===(t=L.current)||void 0===t||t.borderStroke(e),null===(n=L.current)||void 0===n||n.visible(!0),null===(r=L.current)||void 0===r||r.forceUpdate()},mouseLeave:function(){var e,t,n;null===(e=L.current)||void 0===e||e.borderStroke(it),null===(t=L.current)||void 0===t||t.visible(!1),null===(n=L.current)||void 0===n||n.forceUpdate()}}}),[u,a]),d&&W.console.log("isLastSelected",L),u?K().createElement(Xh.Transformer,(0,M.c)({ref:L,id:"transformer_".concat(a),resizeEnabled:p&&d&&!l,rotateEnabled:h,anchorStroke:it,keepRatio:!1,ignoreStroke:!0,padding:l?-1:0,anchorSize:7,enabledAnchors:D,borderStroke:it,borderStrokeWidth:l?2:1,boundBoxFunc:R},"padding",I)):null})),(function(e,t){return!e.isGlobal&&!t.isGlobal&&vp()(t,e)})),yp=Cp,Dp=["x","y","width","height","backColor","horAlignment","verAlignment","lineWrapRule","foreColor","padding","divideModel","divideCharNums","fontName","fontSize","children","wrap","bold","underLine","strike","italic","textFormat","textOverFlow","type","alpha","globalCompositeOperation","id","border","borderType","isCell","isTemplate","hasChildItems","childItems","isLastSelected","handleMouseDown","isSelected","parentId","dsType"];function Ep(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function wp(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?O()(n=Ep(Object(a),!0)).call(n,(function(t){(0,M.c)(e,t,a[t])})):A()?b()(e,A()(a)):O()(r=Ep(Object(a))).call(r,(function(t){B()(e,t,w()(a,t))}))}return e}var kp="bindText";function Ap(e,t,n){return e/t*n}function xp(e,t,n){var r=e/t;return Math.max(r,n)}var bp=function(e){var t=e.width,n=e.height,r=e.text,a=e.divideNums,o=Qd()(e),i=(e.verticalAlign,e.align),l=e.fontFamily,c=e.fontStyle,u=e.textDecoration,s=e.fontSize,d=e.divideLineEnable,f=e.divideLineColor,g=e.divideLineWidth,h=function(e,t,n){var r,a,o,i=Qd()(r=new Array(n)).call(r,""),l=[],c=Fn()(e).length;if(c>n)if("left"===t)l=G()(o=kn()(e).call(e,0,n-1).split("")).call(o,"...");else if("right"===t)(l=kn()(e).call(e,1-n).split("")).unshift("...");else if(1===n)l=["..."];else if(2===n)l=["...","..."];else{var u,s,d=Math.floor((c-n)/2+1);l=1===d?G()(u=[]).call(u,(0,yn.c)(kn()(e).call(e,0,n-1)),["..."]):G()(s=["..."]).call(s,(0,yn.c)(kn()(e).call(e,d,d+n-2)),["..."])}else if(c<n)if("left"===t)l=e.split("");else if("right"===t){var f;l=G()(f=kn()(i).call(i,0,-c)).apply(f,(0,yn.c)(e))}else{var g,h,v=Math.floor((n-c)/2);l=(0,yn.c)(i),la()(g=l).apply(g,G()(h=[v,c]).call(h,(0,yn.c)(e)))}else l=e.split("");return la()(i).apply(i,G()(a=[0,l.length]).call(a,(0,yn.c)(l))),i}(r,i,a),v=(0,H.useCallback)((function(e){return d&&e!==a&&0!==e}),[a,d]);return K().createElement(K().Fragment,null,F()(h).call(h,(function(e,r){var i,d,h,p;return K().createElement(K().Fragment,{key:G()(i="divide_".concat(e,"_")).call(i,r)},K().createElement(Xh.Text,{width:xp(t,a,s),height:n,key:G()(d="text_".concat(e,"_")).call(d,r),x:Ap(t,a,r),y:0,text:e,fill:o,verticalAlign:"middle",align:"center",name:G()(h="".concat(xe," ")).call(h,Ie),fontFamily:l,fontStyle:c,textDecoration:u,fontSize:s,wrap:"none",hitStrokeWidth:0,letterSpacing:0}),v(r)&&K().createElement(Xh.Line,{key:G()(p="line_".concat(e,"_")).call(p,r),x:Ap(t,a,r),y:0,stroke:f,strokeWidth:g,points:[0,n,0,0]}))})))},Ip=(0,H.memo)((0,H.forwardRef)((function(e,t){var n,r,a,o,i,l,c,u,s,d,f=(0,H.useContext)(vn),g=f.selectionContext,h=f.contextStrokeEnabled,v=(g.getSelection(),(0,H.useContext)(mn)),p=f.scale,C=void 0===p?1:p,y=f.pixelRatio,D=(f.getRedundancyXY,f.getInputSize),E=f.getTextSize,w=f.onValid,k=(f.globalTrRef,f.dataContext),A=v.gridState,x=(v.gridX,v.gridY,v.gridBorderType),b=v.isEditorGridState,I=void 0===b||b,B=v.removeGridSelection,L=gp(),T=((0,W.usePrevious)(A),(0,H.useRef)(null)),F=(0,H.useRef)(null),N=(0,H.useRef)(null),Z=e[kp],j=e.viewText||e[kp]||"",J=e[kp],P=e.bindField,O=e.dataSource,U=e.x,z=void 0===U?0:U,V=e.y,q=void 0===V?0:V,X=e.width,_=e.height,$=e.backColor,ee=e.horAlignment,te=void 0===ee?"left":ee,ne=e.verAlignment,re=void 0===ne?"middle":ne,ae=e.lineWrapRule,ie=void 0===ae?1:ae,le=e.foreColor,ce=void 0===le?"#333":le,se=e.padding,de=void 0===se?Lt:se,fe=e.divideModel,ge=e.divideCharNums,he=e.fontName,ve=void 0===he?"Arial":he,pe=e.fontSize,me=void 0===pe?12:pe,Ce=e.children,ye=e.wrap,De=void 0===ye?"none":ye,Ee=e.bold,we=void 0!==Ee&&Ee,Se=e.underLine,Me=void 0!==Se&&Se,Le=e.strike,Re=void 0!==Le&&Le,Te=e.italic,Fe=void 0!==Te&&Te,Ne=e.textFormat,Ge=e.textOverFlow,Ze=e.type,Qe=e.alpha,je=void 0===Qe?0:Qe,Je=e.globalCompositeOperation,Pe=void 0===Je?"multiply":Je,Oe=e.id,Ue=e.border,We=void 0===Ue?{}:Ue,ze=e.borderType,He=e.isCell,Ke=e.isTemplate,Ve=e.hasChildItems,Ye=e.childItems,qe=e.isLastSelected,Xe=e.handleMouseDown,_e=e.isSelected,$e=e.parentId,et=e.dsType,tt=((0,Pn.c)(e,Dp),e.lineSpace||1),nt=R()(n=ue()(de||Lt)).call(n,Boolean),rt=Q()(r=m()(de)).call(r,(function(e,t){return e[t]=de[t]*C,e}),{}),at=rt.top,ot=rt.left,it=rt.right,lt=rt.bottom,ct=(0,H.useState)((me||12)*C),ut=(0,S.c)(ct,2),st=ut[0],ft=ut[1],gt="normal";Re&&Me?gt="underline line-through":Re?gt="line-through":Me&&(gt="underline");var ht=R()(a=[Fe&&"italic",we&&"bold"]).call(a,Boolean).join(" "),vt={fontSize:st,fontFamily:Yt(ve),fontWeight:we?"700":"normal",fontStyle:Fe?"italic":"textDecoration",textDecoration:gt,backgroundColor:$,color:ce,paddingTop:at,paddingLeft:ot,paddingRight:it,paddingBottom:lt,align:te,verAlignment:re,lineHeight:tt,letterSpacing:0},pt=(0,H.useRef)(null),mt=!(He&&null!=Ce&&Ce.length),Ct=!((null==Ce||!Ce.length)&&!mt||Ke),yt=G()(o=G()(i=G()(l="".concat(Ke?"template_".concat(Oe,"}"):Oe," ")).call(l,Ae," ")).call(i,xe," ")).call(o,be),Dt=G()(c=G()(u=G()(s="".concat(He?Be:""," ")).call(s,ke," ")).call(u,Ae," ")).call(c,xe),Et=np({x:z,y:q,id:Oe,width:X,height:_,border:We,scale:C,contextStrokeEnabled:h,borderType:ze,isSelected:_e&&!Ke}),wt=Et.stroke,kt=Et.strokeWidth,At=Et.strokeEnabled,xt=Et.dashEnabled,bt=Et.defaultDash,It=Et.customedStrokeElement,Bt=Et.controlStrokeRef,St=Et.borderTypes,Mt=function(e,t){var n=e.dataSource,r=e.value,a=e.isFormulaMode,o=e.id,i=e.onValid,l=e.bindField,c=e.dataContext,u=(0,H.useState)(!1),s=(0,S.c)(u,2),d=s[0],f=s[1],g=(0,H.useRef)(!1),h=(0,H.useCallback)((function(e){var t=$n(r),i=t.isBindField,u=t.bindField;if(!i||a)f(!1);else{var s=c.findControl(o);if(!s)return void f(!1);var d=_n(u,e);if("$DsKey=[System]"===(null==s?void 0:s.dataSource)&&(d=!0),d)f(!1);else{var g,h=Yn(qn(n,l),e);if(!h&&-1!==(null==l||null===(g=En()(l))||void 0===g?void 0:g.call(l,"."))){var v=s.bindField.match(/w?\w*$/)[0];h=Yn(qn(s.dataSource,v),e)}f(!h)}}}),[n,r,a,l]);return(0,H.useEffect)((function(){var e,n;return W.eventBus.on(t,h),W.eventBus.on(G()(e="".concat(t,"_")).call(e,o),f),W.eventBus.on(G()(n="".concat(t,"_")).call(n,o,"_init"),h),g.current=!0,function(){var e,n;W.eventBus.off(t,h),W.eventBus.off(G()(e="".concat(t,"_")).call(e,o),f),W.eventBus.off(G()(n="".concat(t,"_")).call(n,o,"_init"),h)}}),[h,o,t]),(0,H.useEffect)((function(){var e;g.current&&(null==i||i(G()(e="".concat(t,"_")).call(e,o,"_init")))}),[g.current]),[d,f]}({onValid:w,dataSource:O,bindField:P,value:J,isFormulaMode:"Formula"===et,id:Oe,dataContext:f.dataContext},od),Rt=(0,S.c)(Mt,1)[0],Ft=function(e){var t=e.height,n=e.scale,r=e.offsetLeft,a=void 0===r?3:r,o=e.scaledFontSize,i=(0,H.useCallback)((function(){return{width:o/ip,height:o/ip}}),[o]),l=(0,H.useMemo)((function(){return(Ud(t,n)-1.5*o)/2}),[t,n,o]);return[K().createElement(op,{getImageSize:i,src:"data:image/png;base64,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",scale:n,x:a,y:l}),a,o/ip]}({height:_,scale:C,offsetLeft:3,scaledFontSize:st}),Nt=(0,S.c)(Ft,3),Zt=Nt[0],Qt=Nt[1],jt=Nt[2],Jt={stageRef:f.stageRef,rootControlRef:f.rootControlRef,selectedId:Oe,ref:pt,isSelected:_e&&!qe,isCell:He,resizeEnabled:!He},Pt=!Ke&&K().createElement(yp,Jt);gv({shapeRef:T,isNotNeed:He});nt.length>0&&Math.min.apply(Math,(0,yn.c)(nt));var Ot=fp(X,C),Ut=fp(_,C),Wt=Ud(z,C),zt=Ud(q,C),Ht=fe&&ge>0,Kt=xn()(St).call(St,Tt)||xn()(St).call(St,Gt);lv({isSelected:_e,refs:Ct?[]:[T],pixelRatio:y,scale:C,currentProp:{x:z,y:q,width:X,height:_,fill:$,align:te,textColor:ce,padding:de,divideModel:fe,divideCharNums:ge,fontFamily:ve,fontSize:me,wrap:De,bold:we,underLine:Me,strike:Re,italic:Fe,textFormat:Ne,textOverFlow:Ge,type:Ze,alpha:je,globalCompositeOperation:Pe,id:Oe,border:We,isCell:He,isTemplate:Ke,hasChildItems:Ve,childItems:Ye}});var Vt=fv({strokeEnabled:At,shapeRef:F,isSelected:qe,shapeRefStroke:wt,controlStrokeRef:Bt}),qt=Vt.onMouseOut,Xt=Vt.onMouseOver,_t=dp(e,f),$t=hv({id:Oe,refLineRef:f.refLineRef}),en=(0,H.useCallback)((function(e){var t=e.x,n=e.y,r=(e.scaleX,e.scaleY,e.width),a=e.height;f.dataContext.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[Oe,{x:Hd(Wd(t,C),1),y:Hd(Wd(n,C),1),width:Hd(Wd(r,C),1),height:Hd(Wd(a,C),1)}]]))}),[Oe,C]),tn=nv({id:Oe,shapeRef:T,refLineRef:f.refLineRef,context:f,onDragEnd:_t,onDragMove:$t,parentId:e.parentId,scale:C}),nn=tn.onDragStart,rn=tn.onDragMove,an=tn.onDragEnd,on=tn.dragBoundFunc,ln=iv({id:Oe,shapeRef:F,refLineRef:f.refLineRef,onTransformEnd:en,context:f}),cn=ln.onTransform,un=ln.onTransformEnd,sn=(0,H.useCallback)((function(e){Xe(e)}),[Xe]),dn=(0,H.useCallback)((function(e){if(A===dt&&!Ke&&A){var t=g.getSelection(),n=He?Oe:$e;xn()(t).call(t,n)||window.requestAnimationFrame((function(){B(),g.setSelect([n])}))}}),[Oe,He,Ke,A,$e]),gn=He||A?function(e){if(!Ve&&!L(e,A,Xe))if(A===dt){var t=f.showEditor,n=f.setEditorPosition,r=T.current,a=$h(r),o=a.height,i=a.width,l=r.getAbsolutePosition();n(wp({x:l.x,y:l.y,width:i,height:o,value:Z,shapeRef:T,id:Oe,isWrap:true,propertyName:kp},vt)),t()}else Xe(e)}:function(e){if(0===e.evt.button&&"RichText"!==Ze){var t=f.showEditor,n=f.setEditorPosition,r=T.current,a=$h(r),o=a.height,i=a.width,l=r.getAbsolutePosition();n(wp({x:l.x,y:l.y,width:i,height:o,value:Z,shapeRef:T,id:Oe,isWrap:true,propertyName:kp},vt)),t()}},hn=He?wp({},A===dt?{onMouseOver:Xt,onMouseOut:qt}:{}):{onDragStart:nn,onDragMove:Y().throttle(rn,100),onDragEnd:an,onMouseOver:Xt,onMouseOut:qt,dragBoundFunc:Y().throttle(on,100)},pn=He?{}:{onTransform:cn,onTransformEnd:un},Cn=1.5*st,Dn=3*(Qt+jt),wn=(0,H.useMemo)((function(){var e="Formula"===et,t={width:Ot-it-ot-(e?Cn:0)-(Rt?Dn:0),height:Ut-at-lt+0,x:ot+(e?Cn:0)+(Rt?Dn:0),y:at};if(!j)return t;var n=D(j,{width:t.width*C,fontSize:st,fontFamily:Yt(ve)},Oe);if(!n)return t;n.width;var r=n.height;if(r>Ut){var a="middle"===re?Ut/2-(at+lt+r)/2:"bottom"===re?Ut-(at+lt+r):at;return(0,oe.c)(t,{height:r+0,y:a})}return t}),[de,X,_,z,q,C,j,Wt,zt,et,Yt(ve),me,st,re,Rt,Qt,jt,Oe]);(0,H.useEffect)((function(){if(3===ie&&j&&/[\r\n]/g.test(j)){var e=j.replace(/[\r\n]/g,"");k.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[Oe,{bindText:e}]]))}}),[ie,Oe,j,k]);var kn=function(e){var t,n=e?"width":"height",r=st,a=Number(me||12)*C,o=function(e){var t=1.5*e,n=3*(Qt+e/2.54),r="Formula"===et;return{width:Ot-it-ot-(r?t:0)-(Rt?n:0),height:Ut-at-lt+0,x:ot+(r?t:0)+(Rt?n:0),y:at}}(r),i=o.width,l=(o.height,o[n]),c=function(){return E(wp({x:0,y:0,fontSize:r,width:e?null:i},u))[n]},u={wrap:fn[ie],textDecoration:gt,fontStyle:ht,text:j,perfectDrawEnabled:!1,hitStrokeWidth:0,verticalAlign:re,align:te,fontFamily:Yt(ve)};if(c()>l)for(;!t&&r>1;){r-=1;var s=c();if(s<=0)break;(s<=l||s<=6)&&(t=r)}else if(r<a)for(;!t&&r<100;){r+=1;var d=c();if(d<=0)break;if(d>=l||d>=18){var f=r-1;t=f>=a?a:f}}return t};(0,H.useEffect)((function(){var e=Number(me||12)*C;"ShrinkWrap"!==Ge&&e!==st&&ft(e)}),[Ge,me,C,st]),(0,H.useEffect)((function(){if(j&&"ShrinkWrap"===Ge&&1!==st){var e=kn(3===ie);e&&ft(e)}}),[de.top,de.left,de.right,de.bottom,X,_,C,j,et,ie,Yt(ve),me,st,Ge,re,Rt,Qt,jt]);var An=Ct?{}:{fill:$},bn=3===ie&&j&&/[\r\n]/g.test(j)?j.replace(/[\r\n]/g,""):j;return K().createElement(K().Fragment,null,K().createElement(Xh.Group,(0,oe.c)({height:Ut,width:Ot,clipX:0,clipY:0,clipWidth:Ot,clipHeight:Ut},hn,{scale:{x:1,y:1},ref:T,x:Wt,y:zt,id:Ke?"template_".concat(Oe):Oe,draggable:!He&&I,listening:!Ke,name:Dt}),Ct&&!!$&&K().createElement(Xh.Rect,{height:Ut,width:Ot,name:"rect-".concat(Oe,"-backColor"),fill:$,scale:{x:1,y:1}}),mt?Ht?K().createElement(bp,{width:Ot,height:Ut,text:bn,divideNums:ge,fill:ce,divideLineEnable:Kt,divideLineColor:wt,divideLineWidth:kt,align:te,fontFamily:Yt(ve),fontStyle:ht,textDecoration:gt,fontSize:st}):K().createElement(K().Fragment,null,Rt&&Zt,"Formula"===et?K().createElement(Xh.Text,{text:"fx",width:Cn,height:Ut,x:ot+(Rt?Dn:0),fill:"#B2B2B2",verticalAlign:"middle",align:"center",fontFamily:Yt(ve),fontStyle:ht,fontSize:st}):null,K().createElement(Xh.Text,(0,oe.c)({},wn,(0,M.c)((0,M.c)({perfectDrawEnabled:false,scale:{x:1,y:1},text:bn,letterSpacing:0,fill:ce,verticalAlign:re,align:te,name:"".concat(xe),fontFamily:Yt(ve),fontStyle:ht,textDecoration:gt,fontSize:st,wrap:fn[ie],ref:N,hitStrokeWidth:0},"name",Ie),"lineHeight",tt)))):null,K().createElement(Xh.Rect,(0,oe.c)({height:Ut,width:Ot,id:"".concat(Oe,"_rect"),name:yt},pn,{dashEnabled:He?xt&&!xn()(d=[Gt]).call(d,x):xt,listening:!Ke,dash:bt,onDblClick:gn,onMouseDown:sn,onContextMenu:dn,scale:{x:1,y:1},x:0,y:0,ref:F,stroke:wt,strokeWidth:kt,shadowForStrokeEnabled:!1,strokeScaleEnabled:!1,hitStrokeWidth:0,strokeEnabled:At},An)),Ce,It),Pt)})),pp),Bp=Ip,Sp=function(e,t){var n=e.selectionContext,r=e.activedSelectId,a=e.dataContext,o=e.rulerRef,i=e.navToolRef,l=e.beforeMouseDown,c=a.getRootId(),u=c===t,s=n.getSelection(),d=a.findControl(t),f=null==d?void 0:d.parentId,g=((0,H.useContext)(Cn)||{}).isMultiKeyActiveWhenSelectedRef,h=void 0===g?(0,H.useRef)(!1):g,v=(0,H.useCallback)((function(e){var t,n,r=(null!==(t=null===(n=i.current)||void 0===n?void 0:n.formatControlInfoRef)&&void 0!==t?t:{}).current||{},o=r.selectItem;r.isDoubleClick;if(W.console.log("formatControl",e,c,o,i),o){if(c===e)return void W.eventBus.emit("format-done");var l=a.findControl(e);W.console.log("formatControl",(0,oe.c)({},o,l),o,l),a.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[e,(0,oe.c)({formatBrush:!0},Q()(nt).call(nt,(function(e,t){var n;if(xn()(n=["DataCell","LayoutCell"]).call(n,o.type)&&"border"===t){if("border"in o&&"border"in l){var r=Y().cloneDeep(o.border);if(r.width.left&&r.width.top&&r.color.left===r.color.top&&r.width.left===r.width.top&&r.style.left===r.style.top){var a=["right","bottom"],i={color:Q()(ct).call(ct,(function(e,t){var n=xn()(a).call(a,t)&&r.width[t];return e[t]=n?r.color[t]:r.color.top,e}),{}),width:Q()(ct).call(ct,(function(e,t){var n=xn()(a).call(a,t)&&r.width[t];return e[t]=n?r.width[t]:r.width.top,e}),{}),style:Q()(ct).call(ct,(function(e,t){var n=xn()(a).call(a,t)&&r.width[t];return W.console.log(r.style.top),e[t]=n?r.style[t]:r.style.top,e}),{})};e.border=i}else e.border=o.border}}else t in o&&t in l&&(e[t]=o[t]);return e}),{}))]]))}}),[c]),p=t===r,m=xn()(s).call(s,t),C=(0,H.useCallback)((function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=arguments.length>2?arguments[2]:void 0,s=e;if(s.id().split("_")[0]!==t&&s.id()!==t&&null!=s&&s.getParent())W.console.log("handleMouseDown",t,s);else if(W.console.log("handleMouseDown"),(!l||!l(c))&&t){var d,g,h=(null!==(d=null===(g=i.current)||void 0===g?void 0:g.formatControlInfoRef)&&void 0!==d?d:{}).current||{},m=(h.selectItem,h.isDoubleClick);W.console.log("isMulti",r,t);var C=n.getSelection();if(r){if(u){var y;if(o)null===(y=o.current)||void 0===y||y.hideLine();return void W.eventBus.emit("format-done")}if(xn()(C).call(C,t)){var D=R()(C).call(C,(function(e){return e!==t}));n.setSelect(D)}else{var E=C.length?a.findControl(C[0]).parentId:"";f&&f!==E?n.setSelect([t]):n.appendSelect([t])}v(t)}else{if(W.console.log("id--------------",p,t),xn()(C).call(C,t)){var w;if(yf(a.findControl(t)))n.setSelect([t]);else n.setSelect(G()(w=R()(C).call(C,(function(e){return t!==e}))).call(w,t));return}(!p||C.length>1)&&(n.setSelect(u?[]:[t]),v(t))}!1===m&&W.eventBus.emit("format-done")}}),[u,t,p,c,l]),y=(0,H.useCallback)((function(e){var t,n=e.currentTarget;if(0===(null===(t=e.evt)||void 0===t?void 0:t.button)||0===e.button){var r=Mv(e.evt);window.requestAnimationFrame((function(){C(n,r,e),h.current=r}))}}),[C,u,t,p,c,l]);return{isRootId:u,selection:s,isSelected:m,activedSelectId:r,isLastSelected:p,handleMouseDown:y}},Mp=function(e){return(0,H.useCallback)((function(t){var n;if(W.console.log("grid cellItem onMouseDown",e),e&&xn()(n=[st,"2"]).call(n,e)&&"dblclick"!==(null==t?void 0:t.type))return!0}),[e])},Lp=["key"];function Rp(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tp(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?O()(n=Rp(Object(a),!0)).call(n,(function(t){(0,M.c)(e,t,a[t])})):A()?b()(e,A()(a)):O()(r=Rp(Object(a))).call(r,(function(t){B()(e,t,w()(a,t))}))}return e}var Fp=function(e){var t=e.data,n=e.children,r=(e.meta,t.key),a=(0,Pn.c)(t,Lp),o=(0,H.useContext)(vn),i=(0,H.useContext)(Cn),l=(0,H.useContext)(mn).gridState,c=t.id,u=i.activedSelectId,s=Sp(Tp(Tp({},o),{},{beforeMouseDown:Mp(l),activedSelectId:u}),c),d=s.handleMouseDown,f=s.isSelected,g=s.isLastSelected;return K().createElement(Bp,(0,oe.c)({id:c},a,{dataKey:r,isLastSelected:g,isSelected:f,handleMouseDown:d}),n)},Np=["x","y","width","height","border","displayMode","name","bindType","bindText","bindField","type","id","isLastSelected","handleMouseDown","isSelected","horAlignment","verAlignment"],Gp=(0,H.forwardRef)((function(e,t){var n,r,a,o,i,l,c=(0,H.useContext)(vn),u=c.globalConfig.previewImageUrl,s=(0,H.useContext)(mn),d=((0,H.useState)(0)[1],s.gridState),f=s.isEditorGridState,g=void 0===f||f,h=(c.selectionContext.getSelection(),c.scale),v=void 0===h?1:h,p=c.contextStrokeEnabled,m=c.pixelRatio,C=gp(),y=(0,H.useRef)(null),D=(0,H.useRef)(null);gv({shapeRef:y});var E=e.x,w=void 0===E?0:E,k=e.y,A=void 0===k?0:k,x=e.width,b=e.height,I=e.border,B=e.displayMode,S=void 0===B?"zoom":B,M=e.name,L=e.bindType,R=e.bindText,T=e.bindField,F=e.type,N=e.id,Z=e.isLastSelected,Q=e.handleMouseDown,j=e.isSelected,J=e.horAlignment,P=void 0===J?"left":J,O=e.verAlignment,U=void 0===O?"top":O,z=(0,Pn.c)(e,Np);W.console.log("image----PROPS",e),lv({isSelected:j,refs:[y],pixelRatio:m,scale:v,currentProp:{x:w,y:A,width:x,height:b,displayMode:S,name:M,bindType:L,bindText:R,bindField:T,type:F,id:N}});var V=np({x:w,y:A,id:N,width:x,height:b,border:I,scale:v,isSelected:j,contextStrokeEnabled:p}),Y=V.stroke,q=V.strokeWidth,X=V.strokeEnabled,_=V.dashEnabled,$=V.defaultDash,ee=V.customedStrokeElement,te=V.controlStrokeRef,ne=fv({strokeEnabled:X,shapeRef:D,isSelected:Z,shapeRefStroke:Y,controlStrokeRef:te}),re=ne.onMouseOut,ae=ne.onMouseOver,ie=$n(R).isBindField?"":T,le=ie?G()(n="".concat(u)).call(n,T):"data:image/png;base64,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",ce=fp(x,v),ue=fp(b,v),se=Ud(w,v),de=Ud(A,v),fe=(0,H.useCallback)((function(e,t,n,r){if(ie){var a="zoom"===S?e/t<x/b?{width:b/t*e,height:b}:{width:x,height:x/e*t}:{width:e,height:t},o=a.width,i=a.height,l=0,c=0;if(b-i>0)switch(n){case"middle":l=(b-i)/2;break;case"bottom":l=b-i}if(x-o>0)switch(r){case"center":c=(x-o)/2;break;case"right":c=x-o}return{height:i,width:o,top:l,left:c}}return{width:ie?e:x,height:ie?t:b,top:0,left:0}}),[x,b,S,ie,v]),ge=dp(e,c),he=hv({id:N,refLineRef:c.refLineRef}),ve=(0,H.useCallback)((function(e){var t=e.x,n=e.y,r=(e.scaleX,e.scaleY,e.width),a=e.height;c.dataContext.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[N,{x:Wd(t,v),y:Wd(n,v),width:Wd(r,v),height:Wd(a,v)}]]))}),[N,v]),pe=nv({id:N,shapeRef:y,refLineRef:c.refLineRef,context:c,onDragEnd:ge,onDragMove:he,parentId:e.parentId,scale:v}),me=pe.onDragStart,Ce=pe.onDragMove,ye=pe.onDragEnd,De=pe.dragBoundFunc,Ee=iv({id:N,shapeRef:D,refLineRef:c.refLineRef,onTransformEnd:ve,context:c}),we=Ee.onTransform,Ie=Ee.onTransformEnd,Be={stageRef:c.stageRef,rootControlRef:c.rootControlRef,selectedId:N,isSelected:j&&!Z};return K().createElement(K().Fragment,null,K().createElement(Xh.Group,(0,oe.c)({height:ue,width:ce,clipX:0,clipY:0,clipWidth:ce,clipHeight:ue,onDragStart:me,onDragMove:Ce,onDragEnd:ye,onMouseOut:re,onMouseOver:ae,onMouseDown:Q,onDblClick:function(e){W.console.log("image onDblClick"),C(e,d,Q)},ref:y},z,{x:se,y:de,dragBoundFunc:De,id:N,draggable:g,name:G()(r=G()(a="".concat(ke," ")).call(a,Ae," ")).call(r,xe)}),K().createElement(op,{getImageSize:fe,src:le,scale:v,horAlignment:P,verAlignment:U}),K().createElement(Xh.Rect,{height:ue,width:ce,name:G()(o=G()(i=G()(l="".concat(N," ")).call(l,Ae," ")).call(i,xe," ")).call(o,be),fill:"transparent",onTransform:we,onTransformEnd:Ie,dashEnabled:_,dash:$,scale:{x:1,y:1},ref:D,stroke:Y,strokeWidth:q,shadowForStrokeEnabled:!1,strokeScaleEnabled:!1,hitStrokeWidth:0,alpha:1,strokeEnabled:X}),ee),K().createElement(yp,Be))})),Zp=Gp,Qp=["key"];function jp(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jp(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?O()(n=jp(Object(a),!0)).call(n,(function(t){(0,M.c)(e,t,a[t])})):A()?b()(e,A()(a)):O()(r=jp(Object(a))).call(r,(function(t){B()(e,t,w()(a,t))}))}return e}var Pp=function(e){var t=e.data,n=t.key,r=(0,Pn.c)(t,Qp),a=(0,H.useContext)(vn),o=(0,H.useContext)(Cn),i=(0,H.useContext)(mn).gridState,l=t.id,c=o.activedSelectId,u=Sp(Jp(Jp({},a),{},{beforeMouseDown:Mp(i),activedSelectId:c}),l),s=u.handleMouseDown,d=u.isSelected,f=u.isLastSelected;return K().createElement(Zp,(0,oe.c)({},r,{dataKey:n,isLastSelected:f,isSelected:d,handleMouseDown:s}))},Op=["x","y","width","height","border","name","bindField","type","id","isLastSelected","handleMouseDown","isSelected"],Up=(0,H.memo)((0,H.forwardRef)((function(e,t){var n,r,a,o,i,l=(0,H.useContext)(vn),c=(l.selectionContext.getSelection(),l.scale),u=void 0===c?1:c,s=l.contextStrokeEnabled,d=l.pixelRatio,f=(0,H.useContext)(mn),g=f.gridState,h=f.isEditorGridState,v=void 0===h||h,p=(0,H.useRef)(null),m=(0,H.useRef)(null);W.console.log(l,l.refLineRef.searchRefLines);var C=gp();gv({shapeRef:p});var y=e.x,D=void 0===y?0:y,E=e.y,w=void 0===E?0:E,k=e.width,A=e.height,x=e.border,b=e.name,I=e.bindField,B=e.type,S=e.id,M=e.isLastSelected,L=e.handleMouseDown,R=e.isSelected,T=(0,Pn.c)(e,Op);W.console.log("qrcode----PROPS",e),lv({isSelected:R,refs:[p],pixelRatio:d,scale:u,currentProp:{x:D,y:w,width:k,height:A,name:b,bindField:I,type:B,id:S}});var F=np({x:D,y:w,id:S,width:k,height:A,border:x,scale:u,isSelected:R,contextStrokeEnabled:s}),N=F.stroke,Z=F.strokeWidth,Q=F.strokeEnabled,j=F.dashEnabled,J=F.defaultDash,P=F.customedStrokeElement,O=F.controlStrokeRef,U=fv({strokeEnabled:Q,shapeRef:m,isSelected:M,shapeRefStroke:N,controlStrokeRef:O}),z=U.onMouseOut,V=U.onMouseOver,Y=(0,H.useMemo)((function(){return"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjYwcHgiIGhlaWdodD0iNjBweCIgdmlld0JveD0iMCAwIDYwIDYwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHN0eWxlPSJiYWNrZ3JvdW5kOiAjZmZmOyI+DQogICAgPHRpdGxlPuS6jOe7tOeggTwvdGl0bGU+DQogICAgPGcgaWQ9IuS6jOe7tOeggSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+DQogICAgICAgIDxwYXRoIGQ9Ik0yMCw0MCBMMjAsNjAgTDAsNjAgTDAsNDAgTDIwLDQwIFogTTM5LDUzIEwzOSw1NyBMNDQsNTcgTDQ0LDYwIEwzMyw2MCBMMzMsNTcgTDM2LDU3IEwzNiw1MyBMMzksNTMgWiBNNjAsNTcgTDYwLDYwIEw1Nyw2MCBMNTcsNTcgTDYwLDU3IFogTTU0LDU3IEw1NCw2MCBMNTEsNjAgTDUxLDU3IEw1NCw1NyBaIE0yNyw0NyBMMjcsNTAgTDM2LDUwIEwzNiw1MyBMMjcsNTMgTDI3LDYwIEwyNCw2MCBMMjQsNDcgTDI3LDQ3IFogTTE3LDQzIEwzLDQzIEwzLDU3IEwxNyw1NyBMMTcsNDMgWiBNNjAsNDQgTDYwLDUwIEw1Nyw1MCBMNTcsNDcgTDU0LDQ3IEw1NCw1MCBMNTcsNTAgTDU3LDU3IEw1NCw1NyBMNTQsNTMgTDQ3LDUzIEw0Nyw1NiBMNDQsNTYgTDQ0LDUzIEw0Nyw1MyBMNDcsNTAgTDUxLDUwIEw1MSw0NyBMNTQsNDcgTDU0LDQ0IEw2MCw0NCBaIE0xNCw0NiBMMTQsNTQgTDYsNTQgTDYsNDYgTDE0LDQ2IFogTTQ1LDQ3IEw0NSw1MCBMMzYsNTAgTDM2LDQ3IEw0NSw0NyBaIE00OCw0MSBMNDgsNDQgTDUxLDQ0IEw1MSw0NyBMNDUsNDcgTDQ1LDQxIEw0OCw0MSBaIE0yNywzNSBMMjcsNDEgTDMwLDQxIEwzMCwzOCBMMzYsMzggTDM2LDM1IEw0NSwzNSBMNDUsNDEgTDQyLDQxIEw0MiwzOCBMMzYsMzggTDM2LDQxIEwzMyw0MSBMMzMsNDQgTDMwLDQ0IEwzMCw0NyBMMjcsNDcgTDI3LDQ0IEwyNCw0NCBMMjQsMzUgTDI3LDM1IFogTTQyLDQxIEw0Miw0NCBMMzYsNDQgTDM2LDQxIEw0Miw0MSBaIE01NCw0MSBMNTQsNDQgTDUxLDQ0IEw1MSw0MSBMNTQsNDEgWiBNNTEsMzggTDUxLDQxIEw0OCw0MSBMNDgsMzggTDUxLDM4IFogTTYwLDM4IEw2MCw0MSBMNTQsNDEgTDU0LDM4IEw2MCwzOCBaIE01NCwzNSBMNTQsMzggTDUxLDM4IEw1MSwzNSBMNTQsMzUgWiBNMjEsMzUgTDIxLDM4IEwxOCwzOCBMMTgsMzUgTDIxLDM1IFogTTE1LDM1IEwxNSwzOCBMMTIsMzggTDEyLDM1IEwxNSwzNSBaIE0xNSwyMyBMMTUsMjYgTDE4LDI2IEwxOCwyMyBMMjcsMjMgTDI3LDI2IEwyNCwyNiBMMjQsMjkgTDIxLDI5IEwyMSwyNiBMMTgsMjYgTDE4LDI5IEwyMSwyOSBMMjEsMzIgTDE4LDMyIEwxOCwzNSBMMTUsMzUgTDE1LDI5IEw5LDI5IEw5LDMyIEwxMiwzMiBMMTIsMzUgTDksMzUgTDksMzggTDMsMzggTDMsMzIgTDYsMzIgTDYsMjkgTDksMjkgTDksMjYgTDYsMjYgTDYsMjkgTDMsMjkgTDMsMjYgTDAsMjYgTDAsMjMgTDE1LDIzIFogTTUxLDMyIEw1MSwzNSBMNDgsMzUgTDQ4LDMyIEw1MSwzMiBaIE0yNCwzMiBMMjQsMzUgTDIxLDM1IEwyMSwzMiBMMjQsMzIgWiBNMzYsMzIgTDM2LDM1IEwzMywzNSBMMzMsMzIgTDM2LDMyIFogTTYwLDMyIEw2MCwzNSBMNTQsMzUgTDU0LDMyIEw2MCwzMiBaIE00OCwyOSBMNDgsMzIgTDQ1LDMyIEw0NSwyOSBMNDgsMjkgWiBNMzksMjYgTDM5LDMyIEwzNiwzMiBMMzYsMjYgTDM5LDI2IFogTTI3LDI5IEwyNywzMiBMMjQsMzIgTDI0LDI5IEwyNywyOSBaIE0zLDI5IEwzLDMyIEwwLDMyIEwwLDI5IEwzLDI5IFogTTMzLDI2IEwzMywyOSBMMjcsMjkgTDI3LDI2IEwzMywyNiBaIE00NSwyNiBMNDUsMjkgTDQyLDI5IEw0MiwyNiBMNDUsMjYgWiBNNTEsMjYgTDUxLDI5IEw0OCwyOSBMNDgsMjYgTDUxLDI2IFogTTYwLDIzIEw2MCwyOSBMNTQsMjkgTDU0LDI2IEw1NywyNiBMNTcsMjMgTDYwLDIzIFogTTM2LDIzIEwzNiwyNiBMMzMsMjYgTDMzLDIzIEwzNiwyMyBaIE00MiwyMyBMNDIsMjYgTDM5LDI2IEwzOSwyMyBMNDIsMjMgWiBNNTQsMjMgTDU0LDI2IEw1MSwyNiBMNTEsMjMgTDU0LDIzIFogTTQ4LDIzIEw0OCwyNiBMNDUsMjYgTDQ1LDIzIEw0OCwyMyBaIE0zMCwyMCBMMzAsMjMgTDI3LDIzIEwyNywyMCBMMzAsMjAgWiBNMjAsMCBMMjAsMjAgTDAsMjAgTDAsMCBMMjAsMCBaIE02MCwwIEw2MCwyMCBMNDAsMjAgTDQwLDAgTDYwLDAgWiBNMzMsMTcgTDMzLDIwIEwzMCwyMCBMMzAsMTcgTDMzLDE3IFogTTM5LDE3IEwzOSwyMCBMMzYsMjAgTDM2LDE3IEwzOSwxNyBaIE0yNywxNCBMMjcsMjAgTDI0LDIwIEwyNCwxNCBMMjcsMTQgWiBNMTcsMyBMMywzIEwzLDE3IEwxNywxNyBMMTcsMyBaIE01NywzIEw0MywzIEw0MywxNyBMNTcsMTcgTDU3LDMgWiBNMzYsMTQgTDM2LDE3IEwzMywxNyBMMzMsMTQgTDM2LDE0IFogTTE0LDYgTDE0LDE0IEw2LDE0IEw2LDYgTDE0LDYgWiBNMzcsMCBMMzcsMTEgTDM0LDExIEwzNCw5IEwzMSw5IEwzMSwxNCBMMjgsMTQgTDI4LDExIEwyNSwxMSBMMjUsOCBMMjgsOCBMMjgsNiBMMjIsNiBMMjIsMyBMMjgsMyBMMjgsMCBMMzcsMCBaIE01NCw2IEw1NCwxNCBMNDYsMTQgTDQ2LDYgTDU0LDYgWiBNMzQsMyBMMzEsMyBMMzEsNiBMMzQsNiBMMzQsMyBaIiBpZD0i5b2i54q257uT5ZCIIiBmaWxsPSIjMjEyMTIxIj48L3BhdGg+DQogICAgPC9nPg0KPC9zdmc+"}),[]),q=fp(k,u),X=fp(A,u),_=Ud(D,u),$=Ud(w,u),ee=(0,H.useMemo)((function(){return k>A?Ud((k-A)/2,u):0}),[k,A,u]),te=(0,H.useMemo)((function(){return A>k?Ud((A-k)/2,u):0}),[k,A,u]),ne=(0,H.useCallback)((function(){var e=k>A?A:k;return{width:e,height:e}}),[k,A]),re=dp(e,l),ae=hv({id:S,refLineRef:l.refLineRef}),ie=(0,H.useCallback)((function(e){var t=e.x,n=e.y,r=(e.scaleX,e.scaleY,e.width),a=e.height;l.dataContext.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[S,{x:Wd(t,u),y:Wd(n,u),width:Wd(r,u),height:Wd(a,u)}]]))}),[S,u]),le=nv({id:S,shapeRef:p,refLineRef:l.refLineRef,context:l,onDragEnd:re,onDragMove:ae,parentId:e.parentId,scale:u}),ce=le.onDragStart,ue=le.onDragMove,se=le.onDragEnd,de=le.dragBoundFunc,fe=iv({id:S,shapeRef:m,refLineRef:l.refLineRef,onTransformEnd:ie,context:l}),ge=fe.onTransform,he=fe.onTransformEnd,ve={stageRef:l.stageRef,rootControlRef:l.rootControlRef,selectedId:S,isSelected:R&&!M};return K().createElement(K().Fragment,null,K().createElement(Xh.Group,(0,oe.c)({height:X,width:q,clipX:0,clipY:0,clipWidth:q,clipHeight:X,onDragStart:ce,onDragMove:ue,onDragEnd:se,onMouseOut:z,onMouseOver:V,onDblClick:function(e){W.console.log("image onDblClick"),C(e,g,L)},scale:{x:1,y:1},onMouseDown:L,ref:p},T,{x:_,y:$,dragBoundFunc:de,id:S,draggable:v,name:G()(n=G()(r="".concat(ke," ")).call(r,Ae," ")).call(n,xe)}),K().createElement(op,{getImageSize:ne,src:Y,scale:u,x:ee,y:te}),K().createElement(Xh.Rect,{height:X,width:q,name:G()(a=G()(o=G()(i="".concat(S," ")).call(i,Ae," ")).call(o,xe," ")).call(a,be),fill:"transparent",onTransform:ge,onTransformEnd:he,dashEnabled:j,dash:J,scale:{x:1,y:1},ref:m,stroke:N,strokeWidth:Z,shadowForStrokeEnabled:!1,strokeScaleEnabled:!1,hitStrokeWidth:0,alpha:1,strokeEnabled:Q}),P),K().createElement(yp,ve))})),pp),Wp=Up,zp=["key"];function Hp(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kp(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?O()(n=Hp(Object(a),!0)).call(n,(function(t){(0,M.c)(e,t,a[t])})):A()?b()(e,A()(a)):O()(r=Hp(Object(a))).call(r,(function(t){B()(e,t,w()(a,t))}))}return e}var Vp=function(e){var t=e.data,n=t.key,r=(0,Pn.c)(t,zp),a=(0,H.useContext)(vn),o=(0,H.useContext)(Cn),i=(0,H.useContext)(mn).gridState,l=t.id,c=o.activedSelectId,u=Sp(Kp(Kp({},a),{},{beforeMouseDown:Mp(i),activedSelectId:c}),l),s=u.handleMouseDown,d=u.isSelected,f=u.isLastSelected;return K().createElement(Wp,(0,oe.c)({},r,{dataKey:n,isLastSelected:f,isSelected:d,handleMouseDown:s}))},Yp=["x","y","width","height","border","name","bindField","encodeMode","showLabel","rotate","id","isLastSelected","handleMouseDown","isSelected"];var qp=(0,H.memo)((0,H.forwardRef)((function(e,t){var n,r,a,o,i,l,c=(0,H.useContext)(vn),u=(0,H.useState)((function(){return function(){for(var e=[];e.length<13;){var t=Math.floor(10*Math.random());e.push(t)}return e.join("")}()}))[0],s=(c.selectionContext.getSelection(),c.scale),d=void 0===s?1:s,f=c.contextStrokeEnabled,g=c.pixelRatio,h=(0,H.useContext)(mn),v=h.gridState,p=h.isEditorGridState,m=void 0===p||p,C=(0,H.useRef)(null),y=(0,H.useRef)(null),D=gp();W.console.log(c,c.refLineRef.searchRefLines);var E=e.x,w=void 0===E?0:E,k=e.y,A=void 0===k?0:k,x=e.width,b=e.height,I=e.border,B=e.name,S=e.bindField,M=e.encodeMode,L=e.showLabel,R=e.rotate,T=e.id,F=e.isLastSelected,N=e.handleMouseDown,Z=e.isSelected,Q=(0,Pn.c)(e,Yp);lv({isSelected:Z,refs:[C],pixelRatio:g,scale:d,currentProp:{x:w,y:A,width:x,height:b,name:B,bindField:S,encodeMode:M,showLabel:L,rotate:R,id:T}});var j=np({x:w,y:A,id:T,width:x,height:b,border:I,scale:d,isSelected:Z,contextStrokeEnabled:f}),J=j.stroke,P=j.strokeWidth,O=j.strokeEnabled,U=j.dashEnabled,z=j.defaultDash,V=j.customedStrokeElement,Y=j.controlStrokeRef,q=fv({strokeEnabled:O,shapeRef:y,isSelected:F,shapeRefStroke:J,controlStrokeRef:Y}),X=q.onMouseOut,_=q.onMouseOver,$=fp(b,d),ee=fp(x,d),te=ee,ne=$,re=Ud(w,d),ae=Ud(A,d),ie=(0,H.useMemo)((function(){return{rotation:Number(R)||0}}),[R]),le=dp(e,c),ce=hv({id:T,refLineRef:c.refLineRef}),ue=(0,H.useCallback)((function(e){var t=e.x,n=e.y,r=(e.scaleX,e.scaleY,e.width),a=e.height;c.dataContext.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[T,{x:Wd(t,d),y:Wd(n,d),width:Wd(r,d),height:Wd(a,d)}]]))}),[T,d]),se=nv({id:T,shapeRef:C,refLineRef:c.refLineRef,context:c,onDragEnd:le,onDragMove:ce,parentId:e.parentId,scale:d}),de=se.onDragStart,fe=se.onDragMove,ge=se.onDragEnd,he=se.dragBoundFunc,ve=iv({id:T,shapeRef:y,refLineRef:c.refLineRef,onTransformEnd:ue,context:c}),pe=ve.onTransform,me=ve.onTransformEnd,Ce={stageRef:c.stageRef,rootControlRef:c.rootControlRef,selectedId:T,isSelected:Z&&!F},ye=(0,H.useMemo)((function(){var e=Number(R),t=Math.min(ee/9,.3*$);return 90===e||270===e?(t=Math.min($/9,.3*ee),{width:$,height:1.2*t,fontSize:t}):{width:ee,height:1.2*t,fontSize:t}}),[R,ee,$]),De=(0,H.useCallback)((function(){var e=Number(R);return 90===e||270===e?{width:b,height:L?Wd(ee-ye.height):x}:{width:x,height:L?Wd($-ye.height):b}}),[x,b,L,R]),Ee=(0,H.useMemo)((function(){switch(Number(R)){case 90:case 180:return ee;default:return 0}}),[R,ee,$]),we=(0,H.useMemo)((function(){switch(Number(R)){case 90:default:return 0;case 180:case 270:return $}}),[R,ee,$]),Be=(0,H.useMemo)((function(){switch(Number(R)){case 90:return ye.height;case 180:return ee;case 270:return ee-ye.height;default:return 0}}),[R,ee,$]),Se=(0,H.useMemo)((function(){switch(Number(R)){case 90:return 0;case 180:return ye.height;case 270:return $;default:return $-ye.height}}),[R,ee,$]);W.console.log("labelProps",ye);var Me=c.dataContext.getData().bizType;return K().createElement(K().Fragment,null,K().createElement(Xh.Group,(0,oe.c)({height:ne,width:te,clipX:0,clipY:0,clipWidth:te,clipHeight:ne,onDragStart:de,onDragMove:fe,onDragEnd:ge,onMouseOut:X,onMouseOver:_,onMouseDown:N,onDblClick:function(e){W.console.log("image onDblClick"),D(e,v,N)},ref:C},Q,{x:re,y:ae,dragBoundFunc:he,id:T,draggable:m,name:G()(n=G()(r="".concat(ke," ")).call(r,Ae," ")).call(n,xe)}),K().createElement(Xh.Group,{x:0,y:0,height:ne,width:te,name:ke},K().createElement(op,(0,oe.c)({getImageSize:De,src:"data:image/png;base64,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",scale:d,x:"1"===Me?(te-Ud(48,d))/2||0:Ee,width:"1"===Me?Ud(48):void 0,y:we},ie)),L&&K().createElement(Xh.Text,(0,oe.c)({},ye,{x:Be,y:Se,text:u,fill:"#000",verticalAlign:"middle",align:"center",name:G()(a="".concat(xe," ")).call(a,Ie),hitStrokeWidth:0},ie))),K().createElement(Xh.Rect,{height:ne,width:te,name:G()(o=G()(i=G()(l="".concat(T," ")).call(l,Ae," ")).call(i,xe," ")).call(o,be),fill:"transparent",onTransform:pe,onTransformEnd:me,dashEnabled:U,dash:z,scale:{x:1,y:1},ref:y,stroke:J,strokeWidth:P,shadowForStrokeEnabled:!1,strokeScaleEnabled:!1,hitStrokeWidth:0,alpha:1,strokeEnabled:O}),V),K().createElement(yp,Ce))}))),Xp=qp,_p=["key"];function $p(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function em(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?O()(n=$p(Object(a),!0)).call(n,(function(t){(0,M.c)(e,t,a[t])})):A()?b()(e,A()(a)):O()(r=$p(Object(a))).call(r,(function(t){B()(e,t,w()(a,t))}))}return e}var tm=function(e){var t=e.data,n=t.key,r=(0,Pn.c)(t,_p),a=(0,H.useContext)(vn),o=(0,H.useContext)(Cn),i=(0,H.useContext)(mn).gridState,l=t.id,c=o.activedSelectId,u=Sp(em(em({},a),{},{beforeMouseDown:Mp(i),activedSelectId:c}),l),s=u.handleMouseDown,d=u.isSelected,f=u.isLastSelected;return K().createElement(Xp,(0,oe.c)({},r,{dataKey:n,isLastSelected:f,isSelected:d,handleMouseDown:s}))},nm=n(57048),rm=n(25700),am=n.n(rm),om=function(e){var t=e.className;return K().createElement("div",{className:"".concat(t,"-empty")},K().createElement("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKgAAABgCAYAAACJ8DltAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAqKADAAQAAAABAAAAYAAAAACo6b7MAAADyUlEQVR4Ae2dP2vUYBzHn1QRoRQcRK9SXERQFwfxRfgmHJ0cuohOenUTFwcnwaVvwlfgJA66KIiLHHh1cCkt4mBMaofL3TWN3KX5ffP9HBR6Se7J98+HJ5e7cEmJBwmQAAmQAAmQAAmQAAmQAAmQAAmQAAmQAAmQAAmQAAmQQGcJZJ3tueUd53l+ZvRj72me0t2U5+st724pw+/sjLdu37w6XMpgPRlkpSc+ZmwcwJnnD1XgLA3keXry7sOX4YwZ4wW9BfRg5hQsFkirpfUWUKWZs1oJM+lkHv0FdNKl4P/MpP9KA9DA8AJpSgAaGNBSmjukABocUHdIAVQAUGdIAVQEUFdIAVQIUEdIAVQMUDdIAVQQUCdIAVQUUBdIAVQYUAdIe3u53bfxbnG9yOxjPB7PLpxaMhgMppbEf3p5sNbLLplB47NnrRBAreuPbx5A43dkrRBAreuPbx5A43dkrRBAreuPbx5A43dkrRBAreuPb/50fInLVaj4IfxyE9AajRlUqy87tQBqV7mWYQDV6stOLYDaVa5lGEC1+rJTa3cW3+Ryu8gUuH0K0ctrCEvAFrke9H8A/Tg6m16/PZd+7lcPRjtfP9UO8+D+rdr1i67cfrNfGSLL0tbnF6vDykKBJ9VUBQRHkzgPzmgaSz3lL5Rc29wbRtRWpwlA69JpsG565mzwks42UYQUQDvDpZsdq0Fqd5LUDRbt7fX5y/eVwZu8tz2ENCm8J7UD1O0suELvxBMVSDnET5Tm9m8JaXTPABq9IXN9AGoOQHT7ABq9IXN9AGoOQHT7dmfxy/8u/lL0jqX12QEq3dYc8U0+95zzMplFHOJlqvIUCqCevcu4BlCZqjyF8h60pd4vXrleO/L09Zq1GxuvtAOU7+K1aOcQr9WXnVoAtatcyzCAavVlpxZA7SrXMgygWn3ZqQVQu8q1DAOoVl92agHUrnItwwCq1ZedWgC1q1zLMIBq9WWnFkDtKtcyDKBafdmpBVC7yrUMA6hWX3ZqAdSuci3DAKrVl51aALWrXMswgGr1ZacWQO0q1zIMoFp92akFULvKtQwDqFZfdmoB1K5yLcMAqtWXnVoAtatcy3B/f/omy74X9/9b76qO4+7VedK6jvutqJPW03R/vZ1Bi7vkbjcNge3iJtBbQDcurD7OsuxZKmfSFh/n11ocvPWhs1Hru1hwB709xBdw/i6yeXT4t2BMR7/8xuavOyn9eVXcT3jj6K0irslGp7KVexGVoYkESIAESIAESIAESIAESIAESIAESIAESIAESIAEnBL4C2BywrT3uwIUAAAAAElFTkSuQmCC",width:"168",height:"96",alt:(0,W.getLangMsg)("printd.components.key0018")}),K().createElement("div",{className:"".concat(t,"-empty-text")},(0,W.getLangMsg)("printd.components.key0019")))},im=function(e){var t=e.visible,n=(e.meta,e.definition,e.onConfirm),r=e.onCancel,a=e.onClose,o="change-lang",i=function(){n()},l=K().createElement(K().Fragment,null,K().createElement("div",{className:"".concat(o,"-modal-footer-btns")},K().createElement(U.Button,{onClick:function(){r()},type:"second",className:"".concat(o,"-modal-cancel-btn")},(0,W.getLangMsg)("printd.components.key0020")),K().createElement(U.Button,{className:"".concat(o,"-modal-ok-btn"),type:"primary",onClick:i},(0,W.getLangMsg)("printd.components.key0021"))));return K().createElement(U.Modal,{body:K().createElement(om,{className:"".concat(o,"-body")}),maskClosable:!1,className:"".concat(o,"-modal"),footer:l,bodyStyle:{display:"flex",alignItems:"center",justifyContent:"center"},title:(0,W.getLangMsg)("printd.components.key0018"),type:"confirm",destroyOnClose:!0,onCancel:a,onOk:i,mask:!0,visible:t})},lm=function(e){var t,n=e.className,r=e.row,a=e.setRow,o=e.column,i=e.setColumn,l=e.errorTipShow,c=e.setErrorTipShow,u=(0,H.useState)(0),s=(0,S.c)(u,2),d=s[0],f=s[1],g=(0,H.useState)(0),h=(0,S.c)(g,2),v=h[0],p=h[1],m=(0,H.useContext)(W.DataContext),C=m.getRootId(),y=m.findControl(C).language,D=(0,H.useCallback)((function(){f(0),p(0)}),[]),E=(0,H.useCallback)((function(){return K().createElement("span",{className:"exceed-cell"},"...")}),[]),w=(0,H.useCallback)((function(e){var t=[1,2,3,4,5,6,7,8,9,10];return F()(t).call(t,(function(t){var n,l,c=e<=r&&t<=o,u=e<=d&&t<=v;return K().createElement("div",{className:Wn()({cell:!0,active:c,hover:!c&&u}),key:G()(n="".concat(e,"-")).call(n,t),onClick:function(){return function(e,t){e=String(e),t=String(t),a(e),i(t)}(e,t)},onMouseOver:function(){return function(e,t){f(e),p(t)}(e,t)}},(l=t,8===e&&r>8&&l<=o||10===l&&o>10&&e<=r?E():null))}))}),[r,o,d,v]);return K().createElement(K().Fragment,null,l&&K().createElement(U.Alert,{className:"".concat(n,"-alert"),message:(0,W.getLangMsg)("printd.components.key0030"),type:"error",delayOffTime:0,closable:!0,showIcon:!0,onClose:function(){return c(!1)}}),K().createElement("div",{className:n},K().createElement("div",{className:"grid-info"},K().createElement("div",{className:"grid-input"},K().createElement("div",{className:"label"},(0,W.getLangMsg)("printd.components.key0015")),K().createElement(U.InputNumber,{placeholder:"",value:r,style:"en_US"===y?{width:45}:{},onChange:function(e){a(e.target.value)}})),K().createElement("div",{className:"grid-input"},K().createElement("div",{className:"label"},(0,W.getLangMsg)("printd.components.key0016")),K().createElement(U.InputNumber,{placeholder:"",value:o,style:"en_US"===y?{width:45}:{},onChange:function(e){i(e.target.value)}}))),K().createElement("div",{className:"grid-main",onMouseLeave:D},(t=[1,2,3,4,5,6,7,8],F()(t).call(t,(function(e){return K().createElement("div",{className:"row",key:e},w(e))}))))))},cm=function(e){var t=e.visible,n=e.onCancel,r=(e.meta,e.definition,e.onConfirm),a=(0,H.useState)(""),o=(0,S.c)(a,2),i=o[0],l=o[1],c=(0,H.useState)(""),u=(0,S.c)(c,2),s=u[0],d=u[1],f=(0,H.useState)(!1),g=(0,S.c)(f,2),h=g[0],v=g[1],p="grid-settings",m=K().createElement(K().Fragment,null,K().createElement("div",{className:"".concat(p,"-modal-footer-btns")},K().createElement(U.Button,{onClick:n,type:"second",className:"".concat(p,"-modal-cancel-btn")},(0,W.getLangMsg)("printd.components.key0011")),K().createElement(U.Button,{className:"".concat(p,"-modal-ok-btn"),type:"primary",onClick:function(){if(!(Number(i)>0&&Number(s)>0))return W.console.log("errorTipShow",h),v(!0);h&&v(!1),r({row:i,column:s})}},(0,W.getLangMsg)("printd.components.key0012"))));return K().createElement(U.Modal,{body:K().createElement(lm,{className:"".concat(p,"-body"),row:i,setRow:l,column:s,setColumn:d,errorTipShow:h,setErrorTipShow:v}),titleIcon:null,maskClosable:!1,className:"".concat(p,"-modal"),footer:m,width:400,height:500,title:(0,W.getLangMsg)("printd.components.key0017"),destroyOnClose:!0,closable:!0,onCancel:n,onOk:function(){return null},mask:!0,visible:t})},um=function(e){var t,n=e.className,r=e.row,a=e.setRow,o=e.column,i=e.setColumn,l=e.errorTipShow,c=e.setErrorTipShow,u=(0,H.useState)(0),s=(0,S.c)(u,2),d=s[0],f=s[1],g=(0,H.useState)(0),h=(0,S.c)(g,2),v=h[0],p=h[1],m=(0,H.useContext)(W.DataContext),C=m.getRootId(),y=m.findControl(C).language,D=(0,H.useCallback)((function(){f(0),p(0)}),[]),E=(0,H.useCallback)((function(){return K().createElement("span",{className:"exceed-cell"},"...")}),[]),w=(0,H.useCallback)((function(e){var t=[1,2,3,4,5,6,7,8,9,10];return F()(t).call(t,(function(t){var n,l,c=e<=r&&t<=o,u=e<=d&&t<=v;return K().createElement("div",{className:Wn()({cell:!0,active:c,hover:!c&&u}),key:G()(n="".concat(e,"-")).call(n,t),onClick:function(){return function(e,t){e=String(e),t=String(t),a(e),i(t)}(e,t)},onMouseOver:function(){return function(e,t){f(e),p(t)}(e,t)}},(l=t,8===e&&r>8&&l<=o||10===l&&o>10&&e<=r?E():null))}))}),[r,o,d,v]);return K().createElement(K().Fragment,null,l&&K().createElement(U.Alert,{className:"".concat(n,"-alert"),message:(0,W.getLangMsg)("printd.components.key0014"),type:"error",delayOffTime:0,closable:!0,showIcon:!0,onClose:function(){return c(!1)}}),K().createElement("div",{className:n},K().createElement("div",{className:"grid-info"},K().createElement("div",{className:"grid-input"},K().createElement("div",{className:"label"},(0,W.getLangMsg)("printd.components.key0015")),K().createElement(U.InputNumber,{placeholder:"",value:r,style:"en_US"===y?{width:45}:{},onChange:function(e){a(e.target.value)}})),K().createElement("div",{className:"grid-input"},K().createElement("div",{className:"label"},(0,W.getLangMsg)("printd.components.key0016")),K().createElement(U.InputNumber,{placeholder:"",value:o,style:"en_US"===y?{width:45}:{},onChange:function(e){i(e.target.value)}}))),K().createElement("div",{className:"grid-main",onMouseLeave:D},(t=[1,2,3,4,5,6,7,8],F()(t).call(t,(function(e){return K().createElement("div",{className:"row",key:e},w(e))}))))))},sm=function(e){var t=e.visible,n=e.onCancel,r=(e.meta,e.definition,e.onConfirm),a=(0,H.useState)(""),o=(0,S.c)(a,2),i=o[0],l=o[1],c=(0,H.useState)(""),u=(0,S.c)(c,2),s=u[0],d=u[1],f=(0,H.useState)(!1),g=(0,S.c)(f,2),h=g[0],v=g[1],p="grid-settings",m=K().createElement(K().Fragment,null,K().createElement("div",{className:"".concat(p,"-modal-footer-btns")},K().createElement(U.Button,{onClick:n,type:"second",className:"".concat(p,"-modal-cancel-btn")},(0,W.getLangMsg)("printd.components.key0011")),K().createElement(U.Button,{className:"".concat(p,"-modal-ok-btn"),type:"primary",onClick:function(){if(!(Number(i)>0&&Number(s)>0))return W.console.log("errorTipShow",h),v(!0);h&&v(!1),r({row:i,column:s})}},(0,W.getLangMsg)("printd.components.key0012"))));return K().createElement(U.Modal,{body:K().createElement(um,{className:"".concat(p,"-body"),row:i,setRow:l,column:s,setColumn:d,errorTipShow:h,setErrorTipShow:v}),titleIcon:null,maskClosable:!1,className:"".concat(p,"-modal"),footer:m,width:400,height:500,title:(0,W.getLangMsg)("printd.components.key0017"),destroyOnClose:!0,closable:!0,onCancel:n,onOk:function(){return null},mask:!0,visible:t})};function dm(e,t){var n=void 0!==Gn()&&Qn()(e)||e["@@iterator"];if(!n){if(Jn()(e)||(n=function(e,t){var n;if(!e)return;if("string"==typeof e)return fm(e,t);var r=kn()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Fn()(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fm(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw o}}}}function fm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function gm(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function hm(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?O()(n=gm(Object(a),!0)).call(n,(function(t){(0,M.c)(e,t,a[t])})):A()?b()(e,A()(a)):O()(r=gm(Object(a))).call(r,(function(t){B()(e,t,w()(a,t))}))}return e}var vm="start",pm="ruler-split-line",mm="#5797FF",Cm="#D9D9D9",ym=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Me;return e%20==0?1*(n-16):e%10==0?1*(n-8):1*(n-4)},Dm=function(){return hm(hm({},function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Me;return"x"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"x")?{x:0,y:e}:{y:0,x:e}}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"x")),{},{stroke:Cm,strokeWidth:1,listening:!1})},Em=(0,H.memo)((0,H.forwardRef)((function(e,t){var n=e.direction,r=e.scale,a=void 0===r?1:r,o=e.pageSize,i=e.ruleWidth,l=void 0===i?Me:i,c=e.marginTop,u=void 0===c?0:c,s=e.marginLeft,d=void 0===s?0:s,f=e.marginBottom,g=void 0===f?0:f,h=e.marginRight,v=void 0===h?0:h,p=(0,H.useRef)(null),m=(0,H.useRef)(null),C=(0,H.useRef)(null),y=(0,H.useRef)(null),D=(0,H.useRef)(null),E=(0,H.useRef)(null),w=Od(a),k=Me+u*w,A=Me+d*w,x=(0,H.useRef)(null),b=(0,H.useRef)(null),I=(0,H.useRef)([]),B=(0,H.useRef)(null),S=(0,H.useRef)(null);(0,H.useImperativeHandle)(t,(function(){return{operateLine:function(e){var t,n,r,a,o,i,l,c,u,s=e.top,d=(e.bottom,e.left),f=(e.right,e.width),g=e.height;null===(t=D.current)||void 0===t||t.position({x:0,y:s+k}),null===(n=B.current)||void 0===n||n.points([d+A,Me,f+d+A,Me]),null===(r=B.current)||void 0===r||r.visible(!0),null===(a=D.current)||void 0===a||a.height(g),null===(o=E.current)||void 0===o||o.position({x:d+A,y:0}),null===(i=S.current)||void 0===i||i.points([Me,s+k,Me,s+k+g]),null===(l=S.current)||void 0===l||l.visible(!0),null===(c=E.current)||void 0===c||c.width(f);var h=[D,E];O()(u=[b,x]).call(u,(function(e,t){var n,r=null===(n=e.current)||void 0===n?void 0:Hn()(n).call(n,".".concat(pm)).toArray(),a=h[t].current;if(a){var o;O()(o=I.current).call(o,(function(e){e.stroke(Cm)})),I.current=[];var i,l=!1,c=dm(r);try{for(c.s();!(i=c.n()).done;){var u=i.value;if(am().Util.haveIntersection(a.getClientRect(),u.getClientRect()))l=!0,I.current.push(u),u.stroke(mm);else{if(l)break;u.stroke(Cm)}}}catch(e){c.e(e)}finally{c.f()}}})),O()(h).call(h,(function(e){var t,n;null===(t=e.current)||void 0===t||t.visible(!0),null===(n=e.current)||void 0===n||null===(n=n.getLayer())||void 0===n||n.batchDraw()}))},hideLine:function(){var e,t,n,r;null===(e=B.current)||void 0===e||e.visible(!1),null===(t=S.current)||void 0===t||t.visible(!1),O()(n=I.current).call(n,(function(e){e.stroke(Cm)})),O()(r=[D,E]).call(r,(function(e){var t,n;null===(t=e.current)||void 0===t||t.visible(!1),null===(n=e.current)||void 0===n||null===(n=n.getLayer())||void 0===n||n.batchDraw()}))},operateRuler:function(e){var t,n,r,a,o=e.top,i=e.left;void 0!==o&&(null===(t=b.current)||void 0===t||t.position({y:o}),null===(n=b.current)||void 0===n||n.batchDraw());void 0!==i&&(null===(r=x.current)||void 0===r||r.position({x:i}),null===(a=x.current)||void 0===a||a.batchDraw())}}}),[u,d,a]);var M=o.height,L=o.width,R=Math.max(M,u+g)+Le,T=Math.max(L,d+v)+Le;return"x"===n?K().createElement(Am,{direction:"x",highLineRef:S,scale:a,rectRef:D,marginStart:u,marginEnd:g,realLength:R,ruleWidth:l,frontRef:p,endRef:m,ref:b}):K().createElement(Am,{direction:"y",highLineRef:B,scale:a,rectRef:E,marginStart:d,marginEnd:v,realLength:T,ruleWidth:l,frontRef:C,endRef:y,ref:x})})));function wm(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Me;return{x:"x"===e?t:n+r+4,y:"x"===e?n+r+-3:t}}function km(e){var t=e.direction,n=e.scale,r=e.seq,a=e.marginLength,o=e.length,i=e.rulerWidth,l=void 0===i?Me:i,c={},u=Od(n);if("x"===t){var s,d={y:r===vm?0:o-a-Le,x:0,height:a};(0,oe.c)(c,Q()(s=m()(d)).call(s,(function(e,t){return e[t]=d[t]*u,"y"===t&&(e[t]+=l),e}),{}),{width:l})}else{var f,g={x:r===vm?0:o-a-Le,y:0,width:a};(0,oe.c)(c,Q()(f=m()(g)).call(f,(function(e,t){return e[t]=g[t]*u,"x"===t&&(e[t]+=l),e}),{}),{height:l})}return(0,oe.c)(c,{listening:!1,fill:"#000000",opacity:.1})}var Am=(0,H.memo)((0,H.forwardRef)((function(e,t){var n=e.direction,r=e.scale,a=e.marginStart,o=e.marginEnd,i=e.realLength,l=e.ruleWidth,c=void 0===l?Me:l,u=e.frontRef,s=e.endRef,d=e.rectRef,f=e.highLineRef,g=[],h=[],v=Od(r),p=km({direction:n,scale:r,seq:vm,marginLength:a,length:i}),m=km({direction:n,scale:r,seq:"end",marginLength:o,length:i}),C="x"===n?[m.x,p.y+p.height,p.x+p.width,p.y+p.height]:[p.x+p.width,0,p.x+p.width,p.height],y="x"===n?[m.x,m.y,m.x+m.width,m.y]:[m.x,0,m.x,m.height];h.push(K().createElement(Xh.Line,(0,oe.c)({},p,{opacity:1,fill:"#0E5FD8",dash:[2,2],x:0,y:0,stroke:"#0E5FD8",strokeWidth:2,points:C,key:"".concat("x"===n?"rect_horizontal_start":"rect_vertical_start")})),K().createElement(Xh.Line,(0,oe.c)({},m,{opacity:1,fill:"#0E5FD8",dash:[2,2],x:0,y:0,stroke:"#0E5FD8",strokeWidth:2,points:y,key:"".concat("x"===n?"rect_horizontal_end":"rect_vertical_end")})),K().createElement(Xh.Rect,(0,oe.c)({ref:d,visible:!1},(0,M.c)((0,M.c)({listening:!1,opacity:1},"x"===n?"width":"height",c),"x"!==n?"width":"height",c),{key:"".concat("x"===n?"rect_horizontal_control":"rect_vertical_control"),fill:"#C7E5FF",x:0,y:0,id:"".concat("x"===n?"rect_horizontal_control":"rect_vertical_control")})));for(var D=0;D<i;D+=2){var E,w=D*v,k="x"===n?[ym(D,i),w,c,w]:[w,ym(D,i),w,c];g.push(K().createElement(Xh.Line,(0,oe.c)({},Dm(n),{key:G()(E="".concat(n,"_")).call(E,D),points:k,name:pm})));if(D%20==0&&D<i-Le){var A,x=wm(n,4.5,w);g.push(K().createElement(Xh.Text,(0,oe.c)({letterSpacing:2,fill:"#999999",rotation:"x"===n?-90:0,fontSize:10,align:"right",text:Math.round(D/1)+"",key:G()(A="text_".concat("x"===n?"horizontal":"vertical","_")).call(A,D),listening:!1},x)))}}var b="x"===n?[0,0,c,0]:[0,0,0,c];return g.push(K().createElement(Xh.Line,(0,oe.c)({},Dm(n),{points:b,ref:u,visible:!1,key:"x"===n?"top-line":"left-line"}))),g.push(K().createElement(Xh.Line,(0,oe.c)({},Dm(n),{points:b,ref:s,visible:!1,key:"x"===n?"bottom-line":"right-line"}))),g.push(K().createElement(Xh.Line,{stroke:mm,points:"x"===n?[c,0,c,1]:[0,c,1,c],ref:f,visible:!1,key:"x"===n?"left-high-line":"top-high-line"})),K().createElement(K().Fragment,null,K().createElement(Xh.Layer,{ref:t,listening:!1,key:"ruler_".concat(n)},K().createElement(Xh.Group,null,(0,W.toArray)(G()(h).call(h,g)))))}))),xm=Em,bm=n(75240),Im=n(92192),Bm=n.n(Im);function Sm(e,t){var n=void 0!==Gn()&&Qn()(e)||e["@@iterator"];if(!n){if(Jn()(e)||(n=function(e,t){var n;if(!e)return;if("string"==typeof e)return Mm(e,t);var r=kn()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Fn()(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Mm(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw o}}}}function Mm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Lm=.09,Rm={hLine:[],vLine:[]},Tm="LEFT",Fm="RIGHT",Nm="BOTTOM",Gm="TOP",Zm={x:0,y:0,stroke:"#FB2323",fill:"#FB2323",shadowEnabled:!1,strokeWidth:.5,listening:!1};function Qm(e){var t={length:0,origin:0,position:0,distance:Bm()};if(!e.length)return[t,-1];var n=Bm(),r=Q()(e).call(e,(function(e,t){var r=(0,bm.c)(t),a=r[0],o=r[1],i=kn()(r).call(r,2);if(i.length){var l=Math.max.apply(Math,(0,yn.c)(i))-Math.min.apply(Math,(0,yn.c)(i)),c=Math.min.apply(Math,(0,yn.c)(i));return o<n&&(n=o),G()(e).call(e,[{length:l,origin:c,position:a,distance:o}])}return e}),[]),a=de()(r).call(r,(function(e){var t=e.distance;return n===t}));return[-1!==a?r[a]:t,a]}function jm(e,t,n){var r=n.x,a=n.y,o=e.position,i=e.origin,l=e.lineLength;return"x"===t?[o-r,i-a,o-r,i+l-a]:[i-r,o-a,i+l-r,o-a]}var Jm=(0,H.memo)((0,H.forwardRef)((function(e,t){var n,r,a=e.lines,o=void 0===a?Rm:a,i=e.stageRef,l=(e.marginTop,e.marginLeft,e.rootControlRef),c=e.selectionContext,u=e.getRedundancyXY,s=e.dataContext,d=e.controlGroupRef,f=(0,H.useState)(!0),g=(0,S.c)(f,2),h=g[0],v=g[1],p=(0,H.useState)(o),m=(0,S.c)(p,2),C=m[0],y=m[1];(0,H.useEffect)((function(){return W.eventBus.on("refline",(function(e){h!==e&&v(e)})),function(){W.eventBus.off("refline")}}),[h]);var D=(0,H.useCallback)((function(e){var t=e.selectedNode,n=e.posInfo,r=e.isTransformAction,a=void 0!==r&&r,o=(e.selectedId,e.transformerNewBox),i=n.top,l=n.left,c=n.width,u=n.height,s=n.isNotChangeTopLeft,d=void 0!==s&&s,f={};if(h){if(void 0!==i)if(a){var g=o.x,v=o.height,p=o.rotation,m=o.width,C=o.y;f.rotation=p,f.x=g,f.y=d?C:i,f.height=u,f.width=m,W.console.log("transformer resBox update",{y:i,x:g,height:u,heightArr:[v,u]})}else{var y=t.absolutePosition().x;f.x=y,f.refY=i,f.selectedNode=t}else if(void 0!==l)if(a){var D=o.y,E=o.width,w=o.rotation,k=o.height,A=o.x;f.rotation=w,f.x=d?A:l,f.y=D,f.width=c,f.height=k,W.console.log("transformer resBox update",{y:D,x:l,width:c,widthArr:[E,c]})}else{var x=t.absolutePosition().y;f.refX=l,f.y=x,f.selectedNode=t}return f}}),[h]),E=(0,H.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;if(h&&e){var r,a,o,u,f={},g="",v=s.findControl(null===(r=s.findControl(e))||void 0===r?void 0:r.parentId);if(xn()(on).call(on,null==v?void 0:v.type))return;var p=i.current,m=l.current,C=ev(m),E=null==p?void 0:p.findOne("#".concat(e));if(!E)return void W.console.log("error selectedNode selectedId",E,e);W.console.log("selectedNode",E);var w=(0,oe.c)({},ev(E));if(t){var k=n.x,A=n.y,x=n.height,b=n.width,I=n.activeAnchor;g=I,(0,oe.c)(w,Yd((0,oe.c)({},n,{left:k,top:A,right:k+b,bottom:A+x})))}var B=!t&&mp(ev(E),ev(l.current)),M=w.width,L=w.height,T=w.x,N=w.y,Z=T,Q=T+M,j=N,P=N+L,O={x:Math.max(T-6,0),y:C.y,width:Math.min(M+12,C.width),height:C.height},U={x:C.x,y:Math.max(N-6,0),width:C.width,height:Math.min(L+12,C.height)},z=Qd()(a=new Array(6)).call(a,{visible:!1,position:0,origin:0,lineLength:0}),H={vLine:JSON.parse(J()(z)),hLine:JSON.parse(J()(z))},K=(null===(o=d.current)||void 0===o?void 0:o.getChildren((function(e){var t;return xn()(t=e.name().split(" ")).call(t,ke)})))||[],V=c.getSelection(),Y=[],q=s.findControl(e);if(!t&&wf(q)){var X=q.parentGridId;X&&Y.push(X)}if(!t&&Ef(q)){var $=q.subGridId;null!=$&&$.length&&Y.push.apply(Y,(0,yn.c)($))}var ee,te=G()(u=[]).call(u,(0,yn.c)(B?K:R()(K).call(K,(function(e){var n;return Vn()(n=[O,U]).call(n,(function(n){var r=e.name().split(" "),a=e.id();return!(r.length>0&&xn()(r).call(r,Be))&&(!!t||!xn()(V).call(V,a))&&!xn()(Y).call(Y,a)&&am().Util.haveIntersection(n,ev(e))}))}))),[m]),ne={value:{x:[[],[],[],[],[],[]],y:[[],[],[],[],[],[]]},snapPosConfig:{x:[[],[],[],[],[],[]],y:[[],[],[],[],[],[]]},visible:[],position:[]},re=!1,ae=Sm(te);try{for(ae.s();!(ee=ae.n()).done;){var ie=ee.value,le=ie===m;if(ie.id()!=="".concat(e)||le){var ce=ev(ie),ue=ce.width,se=ce.height,de=ce.x,fe=ce.y,ge=de+ue,he=fe+se,ve=!1,pe=!1,me=j+L/2-(fe+se/2),Ce=Math.abs(me),ye=Z+M/2-(de+ue/2),De=Math.abs(ye),Ee=fe-P,we=Math.abs(Ee);W.console.log("refLines",fe,P,Ee,we);var Ae=he-P,xe=Math.abs(Ae),be=fe-j,Ie=Math.abs(be),Se=he-j,Me=Math.abs(Se),Le=de-Q,Re=Math.abs(Le),Te=ge-Q,Fe=Math.abs(Te),Ne=de-Z,Ge=Math.abs(Ne),Ze=ge-Z,Qe=Math.abs(Ze),je=[De,Re,Fe,Ge,Qe],Je=[Ce,we,xe,Ie,Me],Pe=(Math.min.apply(Math,je),Math.min.apply(Math,Je),Ce<=5),Oe=De<=5,Ue=we<=5&&!le,We=xe<=5&&!le,ze=Ie<=5&&!le,He=Me<=5&&!le,Ke=Re<=5&&!le,Ve=Fe<=5&&!le,Ye=Ge<=5&&!le,qe=Qe<=5&&!le,Xe=function(e){if(!t)return!0;switch(g){case"top-left":var n;return xn()(n=[Gm,Tm]).call(n,e);case"top-center":var r;return xn()(r=[Gm]).call(r,e);case"top-right":var a;return xn()(a=[Gm,Fm]).call(a,e);case"bottom-left":var o;return xn()(o=[Nm,Tm]).call(o,e);case"bottom-center":var i;return xn()(i=[Nm]).call(i,e);case"bottom-right":var l;return xn()(l=[Nm,Fm]).call(l,e);case"middle-left":var c;return xn()(c=[Tm]).call(c,e);case"middle-right":var u;return xn()(u=[Fm]).call(u,e);default:return!1}};if(W.console.log(Re,Fe,g),ne.visible=[Ue,We,ze,He,Pe,Pe,Ke,Ve,Ye,qe,Oe,Oe],ne.position=[fe,he,fe,he,fe+se/2,fe+se/2,de,ge,de,ge,de+ue/2,de+ue/2],Ue||t&&we<=Lm&&!le){var _e={top:fe-L,height:fe-j,isNotChangeTopLeft:!0};W.console.log("refline ts",_e);var $e=!1;!ve&&Xe(Nm)&&(ne.snapPosConfig.y[0].push(_e),ve=!0,$e=!0),($e||we<=Lm)&&!le&&ne.value.y[0].push([fe,we,de,ge,Z,Q])}if(ze||t&&Ie<=Lm&&!le){var et={top:fe,height:P-fe};W.console.log("refline bs",et);var tt=!1;!ve&&Xe(Gm)&&(ne.snapPosConfig.y[3].push(et),ve=!0,tt=!0),(tt||Ie<=Lm&&!le)&&ne.value.y[3].push([fe,Ie,de,ge,Z,Q])}if(We||t&&xe<=Lm&&!le){var nt={top:he-L,height:he-j,isNotChangeTopLeft:!0};W.console.log("refline ts",nt);var rt=!1;!ve&&Xe(Nm)&&(ne.snapPosConfig.y[1].push(nt),ve=!0,rt=!0),(rt||xe<=Lm&&!le)&&ne.value.y[1].push([he,xe,de,ge,Z,Q])}if(He||t&&Me<=Lm&&!le){var at={top:he,height:P-he};W.console.log("refline bs",at);var ot=!1;!ve&&Xe(Gm)&&(ne.snapPosConfig.y[4].push(at),ve=!0,ot=!0),(ot||Me<=Lm&&!le)&&ne.value.y[4].push([he,Me,de,ge,Z,Q])}if(Ke||t&&Re<=Lm&&!le){var it={left:de-M,width:de-Z,isNotChangeTopLeft:!0};W.console.log("refline ls",it);var lt=!1;!pe&&Xe(Fm)&&(ne.snapPosConfig.x[0].push(it),pe=!0,lt=!0),(lt||Re<=Lm&&!le)&&ne.value.x[0].push([de,Re,fe,he,j,P])}if(Ye||t&&Ge<=Lm&&!le){var ct={left:de,width:Q-de};W.console.log("refline rs",ct);var ut=!1;!pe&&Xe(Tm)&&(ne.snapPosConfig.x[3].push(ct),pe=!0,ut=!0),(ut||Ge<=Lm&&!le)&&ne.value.x[3].push([de,Ge,fe,he,j,P])}if(Ve||t&&Fe<=Lm&&!le){var st={left:ge-M,width:ge-Z,isNotChangeTopLeft:!0};W.console.log("refline ls",st);var dt=!1;!pe&&Xe(Fm)&&(ne.snapPosConfig.x[1].push(st),pe=!0,dt=!0),(dt||Fe<=Lm&&!le)&&ne.value.x[1].push([ge,Fe,fe,he,j,P])}if(qe||t&&Qe<=Lm&&!le){var ft={left:ge,width:Q-ge};W.console.log("refline rs",ft);var gt=!1;!pe&&Xe(Tm)&&(ne.snapPosConfig.x[4].push(ft),pe=!0,gt=!0),(gt||Qe<=Lm&&!le)&&ne.value.x[4].push([ge,Qe,fe,he,j,P])}if(!t&&Pe||Ce<=Lm){var ht={top:fe+se/2-L/2};W.console.log("refline hc",ht);var vt=!1;!ve&&Xe("")&&(ne.snapPosConfig.y[2].push(ht),ve=!0,vt=!0),(vt||Ce<=Lm)&&ne.value.y[2].push([fe+se/2,Ce,de,ge,Z,Q])}if(!t&&(Oe||De<=Lm)){var pt={left:de+ue/2-M/2};W.console.log("refline vc",pt);var mt=!1;!pe&&Xe("")&&(ne.snapPosConfig.x[5].push(pt),pe=!0,mt=!0),(mt||De<=Lm)&&ne.value.x[5].push([de+ue/2,De,fe,he,j,P])}}}}catch(e){ae.e(e)}finally{ae.f()}for(var Ct=[0,1,3,4,2,0,1,3,4,5],yt={0:1,3:4,1:0,4:3},Dt={x_0:[5,3,4],x_1:[5,3,4],x_5:[0,1,3,4],x_3:[0,1,5],x_4:[0,1,5],y_0:[3,4,2],y_1:[3,4,2],y_3:[0,1,2],y_4:[0,1,2],y_2:[0,1,3,4]},Et=function(){var r=wt<Ct.length/2?"y":"x",a=wt<Ct.length/2?"hLine":"vLine",o=Qm(ne.value[r][Ct[wt]]),i=(0,S.c)(o,2),l=i[0],c=l.origin,u=l.length,s=l.position,d=l.distance,g=i[1],h=g;if(!t&&-1!==h){var v,p,m,C,y=yt[Ct[wt]],w=Dt[G()(v="".concat(r,"_")).call(v,Ct[wt])],k=_.isUndefined(y)?[{distance:d},h]:Qm(ne.value[r][y]),A=(0,S.c)(k,2),x=A[0].distance,b=A[1],I=F()(p=R()(m=F()(w).call(w,(function(e){return Qm(ne.value[r][e])}))).call(m,(function(e){var t=(0,S.c)(e,2);t[0];return-1!==t[1]}))).call(p,(function(e){return(0,S.c)(e,1)[0].distance}));if(-1!==b&&x<d&&d>Lm&&(h=-1),-1!==h&&I.length>0&&d>Lm)if(Vn()(I).call(I,(function(e){return e<=d})))if(h=-1,Math.min.apply(Math,(0,yn.c)(I))===d)xn()(C=[3,4]).call(C,Ct[wt])&&(h=g)}if(0!==c&&0!==u&&-1!==h){!re&&(re=!0);var B=ne.snapPosConfig[r][Ct[wt]][g];B&&function(t,r,a){W.console.log("transformer newBox",(0,oe.c)({},n));var o=D({selectedNode:t,posInfo:r,isTransformAction:a,selectedId:e,transformerNewBox:(0,oe.c)({},_.isEmpty(f)?n:f)});(0,oe.c)(f,o)}(E,B,t),H[a][Ct[wt]].visible=!0,H[a][Ct[wt]].position=s,H[a][Ct[wt]].origin=c,H[a][Ct[wt]].lineLength=u}},wt=0;wt<Ct.length;wt++)Et();return W.console.log("refLines",H),y(re?function(){return H}:function(){return Rm}),f}}),[h]),w=(0,H.useCallback)((function(){h&&y((function(){return Rm}))}),[h]);if((0,H.useImperativeHandle)(t,(function(){return{setRefLines:y,searchRefLines:E,hideRefLines:w}}),[h]),!h)return null;W.console.log("refline",C);var k=u(),A={x:k.x,y:k.y};return K().createElement(K().Fragment,null,F()(n=C.vLine).call(n,(function(e,t){var n=jm(e,"x",A);return K().createElement(Xh.Line,(0,oe.c)({},Zm,{name:"ref_line_y_".concat(t),key:"ref_line_y_".concat(t),points:n,visible:e.visible}))})),F()(r=C.hLine).call(r,(function(e,t){var n=jm(e,"y",A);return K().createElement(Xh.Line,(0,oe.c)({},Zm,{name:"ref_line_x_".concat(t),key:"ref_line_x_".concat(t),points:n,visible:e.visible}))})))}))),Pm=Jm,Om=["getEditor","dataContext","definition"];function Um(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wm(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?O()(n=Um(Object(a),!0)).call(n,(function(t){(0,M.c)(e,t,a[t])})):A()?b()(e,A()(a)):O()(r=Um(Object(a))).call(r,(function(t){B()(e,t,w()(a,t))}))}return e}var zm=(0,H.memo)((0,H.forwardRef)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=e.x,r=void 0===n?0:n,a=e.y,o=void 0===a?0:a,i=(e.marginLeft,e.offsetTop,e.offsetLeft,e.marginTop,e.height),l=e.width,c=e.value,u=e.show,s=e.id,d=e.propertyName,f=e.onSave,g=e.saveBySelf,h=e.hideEditor,v=e.isWrap,p=e.fontSize,m=void 0===p?12:p,C=e.fontFamily,y=void 0===C?"SimSun, arial, sans-serif":C,D=e.fontWeight,E=e.fontStyle,w=e.textDecoration,k=e.paddingTop,A=e.paddingLeft,x=e.paddingRight,b=e.paddingBottom,I=e.backgroundColor,B=e.color,L=e.maxLength,R=e.align,T=(e.verAlignment,e.lineSpace),F=e.letterSpacing;e.save;if(!u)return null;var N=(0,H.useRef)(null),G=(0,H.useState)(c),Z=(0,S.c)(G,2),Q=Z[0],j=Z[1];(0,H.useEffect)((function(){j(c)}),[c]);var J=(0,H.useCallback)((function(){u&&c!==Q&&(j(Q),g?g(s,Q):f(s,(0,M.c)({},d,Q)))}),[u,Q,c]);(0,H.useImperativeHandle)(t,(function(){return{save:J,isInputShow:function(){return!!N.current}}}),[u,Q,c]),(0,H.useEffect)((function(){var e;null===(e=N.current)||void 0===e||e.focus()}),[]);var P=(0,H.useRef)(null);(0,H.useEffect)((function(){var e=function(){J(),h&&h()},t=function(t){if(N.current){for(var n=t.target;n;){if(n===P.current)return;n=n.parentNode}e()}};return document.addEventListener("mousedown",t),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e),document.removeEventListener("mousedown",t)}}),[J]);(0,H.useRef)(c);return K().createElement("div",{ref:P,className:"kdesigner-text-editor",style:{left:r+Wt,top:o+Wt,position:"absolute",height:i,width:l,backgroundColor:I||"#fff",border:"1px solid ".concat(ot),overflow:"hidden",boxSizing:"border-box"}},K().createElement("div",{style:{height:i,width:l,fontSize:m,fontFamily:y,wordBreak:v?"break-all":"normal",fontWeight:D,fontStyle:E,textDecoration:w,color:B,paddingLeft:A,paddingTop:k,paddingRight:x,paddingBottom:b,boxSizing:"border-box",outline:"none",display:"flex",alignItems:"flex-start"}},K().createElement(U.TextArea,{autoSize:!0,borderType:"none",value:Q,className:"kdesigner-text-editor",style:{height:"100%",width:"100%",textAlign:R,lineSpace:T,letterSpacing:F,fontSize:m,fontFamily:y,wordBreak:v?"break-all":"normal",fontWeight:D,fontStyle:E,textDecoration:w,color:B,paddingTop:2,paddingLeft:2,paddingRight:0,paddingBottom:0,backgroundColor:I||"#fff"},onChange:function(e){j(e.target.value||"")},maxLength:L,count:!!L,onBlur:function(e){J()},ref:N,pressEnterSwitch:!1,onFocus:function(e){var t;null===(t=e.target)||void 0===t||t.setSelectionRange((null==Q?void 0:Q.length)||0,(null==Q?void 0:Q.length)||0)}})))}))),Hm=function(e){var t=e.getEditor,n=void 0===t?function(){return zm}:t,r=e.dataContext,a=e.definition,o=(0,Pn.c)(e,Om),i=(0,H.useCallback)((function(e,t){var n=r.findControl(e),o=n.dsType;if(3===n.lineWrapRule&&t.bindText&&(t.bindText=t.bindText.replace(/[\r\n]/g,"")),"Formula"===o)return r.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[e,Wm(Wm({},t),{},{viewText:""})]]));var i=$n(t),l=i.isBindField,c=i.bindField,u=Wm(Wm({},t),{},{bindField:"",dataSource:"",viewText:"",dsType:""});if(l){var s=_n(c,a);if(!s)return W.eventBus.emit("input-query",{id:e,value:!0}),void r.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[e,u]]));W.eventBus.emit("input-query",{id:e,value:!1});var d=s.dataSource,f=s.key,g=s.viewText,h=s.dsType;r.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[e,Wm(Wm({},t),{},{bindField:f,dataSource:d,viewText:"=$".concat(g),dsType:h})]]))}else W.eventBus.emit("input-query",{id:e,value:!1}),r.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[e,u]]))}),[r]),l=(0,H.useState)(!1),c=(0,S.c)(l,2),u=c[0],s=c[1],d=(0,H.useState)({}),f=(0,S.c)(d,2),g=f[0],h=f[1],v=(0,H.useRef)(null),p=(0,H.useRef)(null),m=(0,H.useCallback)((function(){s(!0)}),[]),C=(0,H.useCallback)((function(){var e,t;null!==(e=p.current)&&void 0!==e&&e.isInputShow()&&(null===(t=p.current)||void 0===t||t.save(),s(!1))}),[]),y=(0,H.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.shapeRef;v.current=null==t?void 0:t.current,h(e)}),[]),D=n();return{showEditor:m,hideEditor:C,editorElement:K().createElement(D,(0,oe.c)({ref:p,show:u,onSave:i,hideEditor:C},o,g)),setEditorPosition:y,inputNodeRef:v}},Km={0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,TAB:9,ENTER:13,SHIFT:16,CONTROL:17,ALT:18,ESCAPE:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,ARROWLEFT:37,ARROWUP:38,ARROWRIGHT:39,ARROWDOWN:40,BACKSPACE:8,DELETE:46,META:91,"*":106,"+":107,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"]":221,CTRL:17,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,SEMICOLON:186,EQUAL:187,COMMA:188,MINUS:189,PERIOD:190,SLASH:191,BACKQUOTE:192,BRACKETLEFT:219,BRACKETRIGHT:221,BACKSLASH:11,QUOTE:229,PAD0:96,PAD1:97,PAD2:98,PAD3:99,PAD4:100,PAD5:101,PAD6:102,PAD7:103,PAD8:104,PAD9:105};window,document;var Vm,Ym,qm,Xm="";window.addEventListener?(Vm="addEventListener",qm="removeEventListener"):(Vm="attachEvent",qm="detachEvent",Xm="on"),Ym="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";var _m=function(e){return function(t){!t&&(t=window.event);var n={originalEvent:t,target:t.target||t.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==t.type?0:1,deltaX:0,deltaZ:0,preventDefault:function(){t.preventDefault?t.preventDefault():t.returnValue=!1}};return"mousewheel"==Ym?(n.deltaY=-1/40*t.wheelDelta,t.wheelDeltaX&&(n.deltaX=-1/40*t.wheelDeltaX)):n.deltaY=t.detail,e(n)}};function $m(e,t,n,r){var a=_m(n);return e[Vm](Xm+t,"wheel"==Ym?n:a,r||!1),function(){e[qm](Xm+t,"wheel"==Ym?n:a,r||!1)}}var eC=function(e,t){(0,H.useEffect)((function(){t();var e=function(e,t,n){return $m(e,"DOMMouseScroll"==Ym?"MozMousePixelScroll":Ym,t,n)}(document,(function(e){Mv(e)&&t()})),n=function(e){var n,r=e.keyCode||e.which;Mv(e)&&xn()(n=[Km[0],Km["+"],Km["-"]]).call(n,r)&&t()};return document.addEventListener("keydown",n),function(){e&&e(),document.removeEventListener("keydown",n)}}),e)},tC=["title"];function nC(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function rC(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?O()(n=nC(Object(a),!0)).call(n,(function(t){(0,M.c)(e,t,a[t])})):A()?b()(e,A()(a)):O()(r=nC(Object(a))).call(r,(function(t){B()(e,t,w()(a,t))}))}return e}var aC=-100;function oC(e,t){var n;return[e,Y().flattenDeep(R()(n=F()(t).call(t,(function(n){var r=n.id;if(n.parentId===e)return oC(r,t)}))).call(n,Boolean))]}var iC=function(e,t,n,r){var a,o,i;if(!(e.length<=2)){var l=ra()(a=kn()(e).call(e)).call(a),c=Math.max.apply(null,F()(e).call(e,(function(e){return e[n]+e[r]}))),u=Hn()(l).call(l,(function(e){return e[n]+e[r]===c})),s=Math.min.apply(null,F()(e).call(e,(function(e){return e[n]}))),d=Hn()(e).call(e,(function(e){return e[n]===s})),f=_d()(o=kn()(i=R()(e).call(e,(function(e){var t;return!xn()(t=[d[tt],u[tt]]).call(t,e[tt])}))).call(i)).call(o,(function(e,t){return e[n]-t[n]})),g=Q()(e).call(e,(function(e,t){return e+t[r]}),0),h=s+d[r],v=c-s,p=0;if(g>v){var m=v/(e.length-1),C=F()(f).call(f,(function(e,t){var r=Hd(s+m*(t+1),1);return r===e[n]&&p++,[e[tt],(0,M.c)({},n,r)]}));if(p===f.length)return;t.batchUpdateControlPropertyValues((0,W.createUpdateAction)(C))}else{var y=(v-d[r]-u[r]-Q()(f).call(f,(function(e,t){return e+t[r]}),0))/(2+f.length-1),D=h,E=F()(f).call(f,(function(e,t){var a=Hd(D+y,1);return D+=y+e[r],e[n]===a&&p++,[e[tt],(0,M.c)({},n,a)]}));if(p===f.length)return;t.batchUpdateControlPropertyValues((0,W.createUpdateAction)(E))}}},lC=(0,H.memo)((0,H.forwardRef)((function(e,t){var n,r,a,o,i,l,c,u,s,d=(0,H.useContext)(pn),f=d.setMessage,g=(d.scaleRef,d.asistantBorderRef),h=d.handlePassGridActionGuide,v=d.isFirstUseGrid,p=d.onValid,C=(0,H.useContext)(W.GlobalConfigContext),y=C.env,D=C.keywordMapping,E=(0,H.useState)(1),w=(0,S.c)(E,2),k=w[0],A=w[1],x=(0,H.useState)((function(){return+(window.devicePixelRatio||1).toFixed(2)})),b=(0,S.c)(x,2),I=b[0],B=b[1],L=(0,H.useRef)(null),T=((0,H.useRef)(null),(0,H.useRef)(null)),N=(0,H.useRef)(null),Z=(0,H.useRef)(null),j=(0,H.useRef)(null),P=(0,H.useRef)(null),z=(0,H.useRef)(null),V=(0,H.useRef)(null),q=(0,H.useRef)(null),X=(0,H.useRef)(null),_=(0,H.useRef)(null),$=(0,H.useRef)(null),ee=(0,H.useRef)(null),te=(0,H.useRef)({isDrag:!1,yPos:0}),ne=(0,H.useRef)(null),re=(0,H.useRef)(null),ae=(0,H.useContext)(W.GlobalConfigContext),ie=ae.previewImageUrl,ce=(ae.uploadImageUrl,e.fieldSizeCacher),ue=ce.setFieldSizeCache,se=ce.getFieldSizeCache,de=null==e?void 0:e.data.key,fe=(0,H.useMemo)((function(){return se(de)||{}}),[de]),ge=(0,H.useCallback)((function(e){var t=new(am().Stage)({container:"shadowCanvas",width:window.innerWidth,height:window.innerHeight}),n=new(am().Layer);t.add(n);var r=new(am().Text)(e);return{height:r.height(),width:r.width()}}),[]),he=(0,H.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;if(ne.current){var r;if(fe[n]){var a=fe[n],o=a.offsetWidth,i=a.offsetHeight,l=a.text,c=a.style.width,u=t.width;if(l===e&&c===u)return{width:o,height:i}}ne.current.innerText=e,O()(r=m()(t)).call(r,(function(e){ne.current.style[e]=Y().isString(t[e])?t[e]:t[e]+"px"}));var s=ne.current,d=s.offsetWidth,f=s.offsetHeight;return fe[n]={text:e,style:t,width:d,height:f},ue(de,fe),{width:d,height:f}}}),[ce]),ve=(0,H.useRef)(null),pe=(0,H.useContext)(W.DataFactoryContext),me=pe.dataFactory,Ce=pe.modelFactory,ye=pe.controlMetaInfo,De=ve.current||{},Ee=De.offsetHeight,we=De.offsetWidth,Ae=(0,H.useState)({show:!1}),xe=(0,S.c)(Ae,2),be=xe[0],Ie=xe[1],Be=(0,H.useState)({show:!1}),Se=(0,S.c)(Be,2),Re=Se[0],Te=Se[1],Fe=(0,H.useState)({show:!1}),Ne=(0,S.c)(Fe,2),Ge=Ne[0],Ze=Ne[1],Qe=(0,H.useState)({show:!1}),je=(0,S.c)(Qe,2),Je=je[0],Pe=je[1],Oe=e.children,Ue=e.appState,We=e.deleteSelectionControl,nt=e.data,rt=nt.id,at=nt.width,ot=nt.height,it=nt.marginTop,lt=nt.marginLeft,ct=nt.marginBottom,ut=nt.marginRight,st=(nt.paperDirection,nt.bgImgRcId),dt=Math.max(ot-Math.max(it,0)-Math.max(ct,0),0),ht=Math.max(at-Math.max(lt,0)-Math.max(ut,0),0),vt=Math.max(Ud(at,k),we?we-20:0),pt=Math.max(Ud(ot,k),Ee?Ee-20:0),mt=Math.max(dt,0)+Math.max(it,0)+Math.max(ct,0),Ct=Math.max(ht,0)+Math.max(lt,0)+Math.max(ut,0),yt=Ue.navToolRef,Dt=void 0===yt?{}:yt,Et=Ue.canvasRef,wt=Ue.meta,kt=void 0===wt?[]:wt,At=Ue.definition,xt=void 0===At?{}:At,bt=Ue.activedSelectId,It=Ue.isMultiKeyActiveWhenSelectedRef,Bt=st?G()(n="".concat(ie)).call(n,st):"";(0,H.useEffect)((function(){var e=ve.current||{},t=e.offsetHeight,n=e.offsetWidth;N.current.style.width=Math.max(Ud(ht,k),null!=n?n:0),N.current.style.height=Math.max(Ud(dt,k),null!=t?t:0),Gn((function(e){return e+1}))}),[]);var St=(0,H.useContext)(W.SelectionContext),Mt=(0,H.useContext)(W.DataContext),Lt=Mt.getRootId(),Rt=me,Tt=Sp({selectionContext:St,dataContext:Mt,rulerRef:jn,navToolRef:Dt,activedSelectId:bt},Lt).handleMouseDown,Ft=(0,H.useMemo)((function(){var e,t;return"SubDataGrid"===(null===(e=Mt.findControl(null===(t=Mt.findControl(bt))||void 0===t?void 0:t.parentId))||void 0===e?void 0:e.type)?{isContainer:!1,accept:""}:(0,W.getControlIsContainer)(ye,Mt.findControl(bt),D)}),[bt,ye]),Nt=(Ft.isContainer,Ft.accept),Gt=(0,H.useContext)(Dd),Zt=(0,Gt.getPrefixCls)(Gt.prefixCls,"print-designer"),Qt=(0,H.useRef)({isDragging:!1,startX:0,startY:0}),jt=(0,H.useRef)(null),Jt=(0,H.useRef)(null),Pt=(0,H.useRef)(null),Ot=function(e,t){var n,r;if("CardGrid"===(null==be?void 0:be.controlType)){var a=(null==be?void 0:be.gridInfo)||{};return Ut(e,a),zt(),void Ie({show:!1})}var o=e.length,i=function(e){return(null==t?void 0:t[e])||be[e]},l=i("controlType"),c=i("transferData");if("DataGrid"===l&&ht/o<5)return f((0,W.getLangMsg)("printd.grid.key0092"));if(c){var u=c.width;"right"===c.subGridDirection&&u/o<10&&(c.width=10*o)}var s=F()(e).call(e,(function(e){var t,n=e.key,r=e.InitAttr,a=void 0===r?{}:r,o=Yn(n,xt);if(!o)return{};var i=o.dataSource,l=o.dataSourceText,c=o.ancestorTitle,u=o.key,s=o.title,d=o.dsType,f=o.IgnoreZero,g=o.IgnoreTailZero,h=Q()(t=m()(a)).call(t,(function(e,t){return e[Y().camelCase(t)]=a[t],e}),{});return h.ignoreZero=f,h.ignoreTailZero=g,rC({bindText:"=$".concat(c),bindField:u,dataSource:i,dataSourceText:l,viewText:"=$".concat(s),dsType:d},h)})),d=Kg(me,Ce),g=Mt.findControlByCondition((function(e){return"Header"===e.type})),h=te.current,v=h.isDrag,p=h.yPos,C=rC({dataSource:(null===(n=s[0])||void 0===n?void 0:n.dataSource)||"",dataSourceText:(null===(r=s[0])||void 0===r?void 0:r.dataSourceText)||"",width:ht},v?{y:p}:{}),y=Mt.findControl(bt),D=Rf(y)&&y.id,E=d({type:i("controlType")||"DataGrid",parentId:D||Lt,parentItem:ih(Mt.findControl(Lt)),cellData:s,transferData:c?(0,oe.c)(C,c):C});g&&g.length&&E[0].y<g[0].height&&(E[0].y=g[0].height+E[0].y),i("resolve")([{type:W.ActionType.ADD,value:E}]),zt(),Ie({show:!1})},Ut=function(e,t){var n=t.row,r=t.column;if(ht/r<5)return f((0,W.getLangMsg)("printd.grid.key0094"));var a=Vg(me,Ce),o=Mt.findControlByCondition((function(e){return"Header"===e.type})),i=te.current,l=i.isDrag,c=i.yPos,u=e.dataSource,s=e.dataSourceText,d=rC({width:ht,height:8*n,dataSource:u,dataSourceText:s},l?{y:c}:{}),g=a({type:"CardGrid",parentId:Lt,gridInfo:t,transferData:d});o&&o.length&&g[0].y<o[0].height&&(g[0].y=o[0].height+g[0].y),(0,be.resolve)([{type:W.ActionType.ADD,value:g}])},zt=function(){te.current={isDrag:!1,yPos:0}};(0,H.useEffect)((function(){return W.eventBus.on("grid-guide",(function(e){!function(e,t){qd(Mt)?Ot([{},{},{}],t):e(rC({show:!0},t))}(Ie,e)})),W.eventBus.on("layoutGrid-setting",(function(e){Te(rC({show:!0},e))})),W.eventBus.on("beforeChangeLang",(function(e){Ze(rC({show:!0},e))})),W.eventBus.on("card-setting",(function(e){Pe(rC({show:!0},e))})),W.eventBus.on("beforeChangeGridFooter",(function(e){var t=e.parentGridId,n=e.tableTail,r=e.resolve;e.reject;if(n){var a=Mt.findControl(t),o=Rt({type:"TableTail",parentId:Lt,transferData:{x:a.x,y:a.y+a.height,width:a.width,parentGridId:t}});r([{type:W.ActionType.ADD,value:o},{type:W.ActionType.UPDATE,value:[[a.id,{hasTableTail:n,tableTailId:o.id}]]}])}else{var i=Mt.findControl(t);r([{type:W.ActionType.DELETE,value:i.tableTailId},{type:W.ActionType.UPDATE,value:[[i.id,{hasTableTail:n,tableTailId:""}]]}])}})),function(){W.eventBus.off("grid-guide"),W.eventBus.off("layoutGrid-setting"),W.eventBus.off("beforeChangeLang"),W.eventBus.off("card-setting"),W.eventBus.off("beforeChangeGridFooter")}}),[bt,Ot]);var Ht=(0,H.useCallback)((function(){var e=jt.current;if(e){var t,n,r,a=e.offsetTop,o=e.offsetLeft;(0,oe.c)(Yt.current,{offsetTop:a,offsetLeft:o}),V.current.style.top=Math.max(null!=a?a:0,Wt)+"px",X.current.style.left=Math.max(null!=o?o:0,Wt)+"px",null===(t=Z.current)||void 0===t||t.x(o-Wt),null===(n=Z.current)||void 0===n||n.y(a-Wt),null===(r=Z.current)||void 0===r||r.batchDraw(),Gn((function(e){return e+1}))}}),[]);(0,H.useEffect)((function(){Ht()}),[]),(0,W.useResizeObserver)(jt.current,Ht),(0,W.useResizeObserver)(ve.current,Ht);var Kt=[Pt,L,Jt,$],Vt=function(e){return Vn()(Kt).call(Kt,(function(t){return t.current===e}))},Yt=(0,H.useRef)({offsetLeft:0,offsetTop:0}),_t=(0,H.useCallback)((function(){var e,t,n,r;return{x:(null!==(e=null===(t=Yt.current)||void 0===t?void 0:t.offsetLeft)&&void 0!==e?e:0)-Wt+Ud(lt,k),y:(null!==(n=null===(r=Yt.current)||void 0===r?void 0:r.offsetTop)&&void 0!==n?n:0)-Wt+Ud(it,k)}}),[lt,it,k]),en=function(){var e=localStorage.getItem(dn);if(e){var t=JSON.parse(e),n=t.dataSource,r=t.bindField,a=t.bindText,o=t.viewText,i=tr(qn(n,r),xt);i?function(e,t,n,r,a){var o=e.isDataGridDs,i=e.dsType,l=e.isSubDataGridDs,c=e.ViewName,u=e.Name,s=e.bindField,d=e.dataSource,f=e.dataSourceText,g=t.statType,h=t.cellType,v=t.parentId,p=t.id,m=r.viewText,C=c||u,y=Xg[h],D=n.findControl(v),E=n.findControl(v),w=E.type,k=E.dataSource;if(Ef(D)||wf(D)){var A,x;if("Normal"===h&&!xn()(y).call(y,i))return a((0,W.getLangMsg)("printd.grid.key0039"));if("Normal"!==h&&"Statistic"!==h||n.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[p,Ug(Ug({},r),{},{viewText:"Statistic"===h&&"noStat"!==g?G()(x="=".concat(g,"(")).call(x,C,")"):m})]])),xn()(A=["Detail","Group"]).call(A,h)){if("DataGrid"===w&&!("=getRowNumber()"===s||k&&d===k||!k&&o))return a((0,W.getLangMsg)("printd.grid.key0040"));if("SubDataGrid"===w&&!("=getRowNumber()"===s||k&&d===k||!k&&l))return a((0,W.getLangMsg)("printd.grid.key0041"));var b=[[p,r]];k||b.push([v,{dataSource:d,dataSourceText:f}]),n.batchUpdateControlPropertyValues((0,W.createUpdateAction)(b))}}else n.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[p,r]]))}(i,Kn,Mt,{dataSource:n,bindField:r,bindText:a,viewText:o},f):Mt.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[bt,{dataSource:n,bindField:r,bindText:a,viewText:o}]]))}},tn=(0,H.useCallback)((function(e){var t=e.keyCode||e.which,n=Mv(e),r=St.getSelection(),a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;return R()(e).call(e,(function(e){var t,n=Mt.findControl(e);return!Vn()(t=[rh,yf,ah,wf]).call(t,(function(e){return e(n)}))}))},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.x,r=void 0===n?0:n,a=t.y,o=void 0===a?0:a,i=Mt.findControl(e),l=i.x,c=i.y,u=i.parentId;return function(e){var t=e.position,n=e.id,r=e.parentId,a=e.rootId,o=e.dataContext,i=xf(o,n),l=i.width,c=void 0===l?0:l,u=i.height,s=void 0===u?0:u,d=Af(o),f=d.width,g=d.height,h=Yd(r!==a?xf(o,r):Af(o)),v=h.x,p=void 0===v?0:v,m=h.y,C=void 0===m?0:m,y=h.right,D=void 0===y?f:y,E=h.bottom,w=void 0===E?g:E,k=t.x,A=t.y;if(c>f||s>g)return{x:k,y:A};k<p&&(k=p),k+c>D&&(k=D-c);var x=A+C;return A+C<C&&(x=0),A+C>C&&(x-=C),A+C+s>w&&(x=w-C-s),{x:k,y:x}}({position:{x:l+r,y:c+o},id:e,rootId:Lt,parentId:u,dataContext:Mt,addXY:{x:r,y:o}})},i=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;return Vn()(e=Mt.findControl(t)).call(e,yf)};switch(t){case Km.BACKSPACE:case Km.DELETE:We();break;case Km.A:if(n){var l,c=Mt.getData().items;St.setSelect(F()(l=R()(c).call(c,(function(e){return e.parentId===Lt}))).call(l,(function(e){return e.id})))}break;case Km.C:if(n){var u=St.getSelection();if(u.length){if(i())return 1===u.length?function(){try{localStorage.setItem(dn,J()(Kn))}catch(e){localStorage.clear(),localStorage.setItem(dn,Kn)}}():localStorage.removeItem(sn);var s=Mt.getData().items,d=Y().flattenDeep(F()(u).call(u,(function(e){return oC(e,s)}))),f=J()({selection:u,items:F()(d).call(d,(function(e){return Mt.findControl(e)}))});try{localStorage.setItem(sn,f)}catch(e){localStorage.removeItem(sn),localStorage.setItem(sn,f)}}}break;case Km.V:if(n){var g=St.getSelection();if(i())return 1===g.length&&en();var h=localStorage.getItem(sn);if(h){var v=JSON.parse(h),p=v.selection,C=v.items,y=Dt.current.copyControl({selection:p,items:F()(C).call(C,(function(e){return e.tableTailId&&(e.tableTailId=""),e}))}),D=R()(y).call(y,(function(e){var t;return xn()(t=m()(ye)).call(t,e.type)}));(null==D?void 0:D.length)>0&&Dt.current.pasteControl(D)}}break;case Km.D:n&&Dt.current.copyAndPasteControl();break;case Km.Z:n&&(Dt.current.canvasUndo(),le()((function(){N.current.focus()})));break;case Km.Y:n&&(Dt.current.canvasRedo(),le()((function(){N.current.focus()})));break;case Km.ARROWUP:var E;if(i())return;Mt.batchUpdateControlPropertyValues((0,W.createUpdateAction)(F()(E=a()).call(E,(function(e){var t=o(e,{y:-1}),n=(t.x,t.y),r=Mt.findControl(e),a=r.parentId,i=r.y;return"TableTail"===(Mt.findControl(a)||{}).type&&(n=i-1>0?i-1:0),[e,{y:n}]}))));break;case Km.ARROWDOWN:var w;if(i())return;Mt.batchUpdateControlPropertyValues((0,W.createUpdateAction)(F()(w=a()).call(w,(function(e){var t=o(e,{y:1}),n=(t.x,t.y),r=Mt.findControl(e),a=r.parentId,i=r.y,l=r.height,c=Mt.findControl(a)||{},u=c.height;return"TableTail"===c.type&&(n=l+i+1>u?i:+i+1),[e,{y:n}]}))));break;case Km.ARROWLEFT:var k;if(i())return;Mt.batchUpdateControlPropertyValues((0,W.createUpdateAction)(F()(k=a()).call(k,(function(e){var t=o(e,{x:-1}),n=t.x;t.y;return[e,{x:n}]}))));break;case Km.ARROWRIGHT:var A;if(i())return;Mt.batchUpdateControlPropertyValues((0,W.createUpdateAction)(F()(A=a()).call(A,(function(e){var t=o(e,{x:1}),n=t.x;t.y;return[e,{x:n}]}))))}}),[bt]),nn=(0,H.useCallback)(Y().throttle(tn,200,{trailing:!0}),[tn]),rn=function(e){var t,n=e?Mt.findControl(e):null,r=(0,W.getControlIsContainer)(ye,n||{},D).isContainer;if("SubDataGrid"===(null===(t=Mt.findControl(Mt.findControl(bt).parentId))||void 0===t?void 0:t.type))return!1;for(;n&&!r&&n.parentId!==Lt;){n=Mt.findControl(n.parentId)}return n},an=function(e,t,n){var r,a,o,i=e.Id,l=(t.offsetX,t.offsetY,null==n||null===(r=n.attrs)||void 0===r?void 0:r.id),c=rn(l),u=(0,W.getControlIsContainer)(ye,c||{},D),s=u.isContainer,d=u.accept;if("SubDataGrid"===(null===(a=Mt.findControl(null===(o=Mt.findControl(l))||void 0===o?void 0:o.parentId))||void 0===a?void 0:a.type)&&((0,nm.c)("isContainer"),(0,nm.c)("accept")),!s||!d||xn()(d).call(d,i)){var f=Rt({type:i,parentId:s?c.id:Lt,transferData:{x:t.x,y:s?t.y-c.y:t.y}});if(f){var g=f.x,h=f.y,v=f.width,p=f.height;g+v>=ht&&(f.x=ht-v),h+p>dt&&(f.y=dt-p);var m=Mt.findControlByCondition((function(e){return"Footer"===e.type}))[0];m&&f.parentId===Lt&&h+p>m.y&&Hg([f],"y",m.y-p),f.x=f.x<0?0:f.x,Mt.addControl((0,W.createAddAction)(f)).then((function(e){var t=e[0].value;St.setSelect(Jn()(t)?[t[0].id]:[t.id])}))}}},on=function(e,t,n,r){var a,o,i;e.key=e.nodeKey;var l=e.type,c=void 0===l?"Text":l,u=e.Items,s=e.InitAttr,d=void 0===s?{}:s;if(!u){var g=nr(e,xt),h=g.title,v=(0,Pn.c)(g,tC),p=(0,oe.c)({},Q()(a=m()(d)).call(a,(function(e,t){return e[Y().camelCase(t)]=d[t],e}),{}),v),C=null==n||null===(o=n.attrs)||void 0===o?void 0:o.id,y=rn(C),E=(0,W.getControlIsContainer)(ye,y||{},D),w=E.isContainer,k=E.accept;if("SubDataGrid"===(null===(i=Mt.findControl(Mt.findControl(bt).parentId))||void 0===i?void 0:i.type)&&(w=!1,k=""),"Text"===c){if(y&&Tf(y))return _g(e,y,Mt,{initAttr:p,title:h},f,xt);if(w&&k&&!xn()(k).call(k,c))return;if(y&&Lf(y)){var A=or(Mt,C,"CardGrid");if(A){var x=wr(A,xt);if(!Ar(x,null==g?void 0:g.dataSource))return f((0,W.getLangMsg)("printd.grid.key0095"))}return qg(C,Mt,rC(rC({},p),{},{viewText:"=$".concat(h)}))}var b=[];if(r){var I=Rt({type:c,parentId:w?y.id:Lt,transferData:{bindText:h,x:t.x,y:w?t.y-y.y:t.y}}),B=I.x,S=I.y,M=I.width,L=I.height;B+M>=ht&&(I.x=ht-2*M),S+L>dt&&(I.y=dt-L);var R=Rt({type:c,parentId:w?y.id:Lt,transferData:(0,oe.c)({},p,{x:(+I.x||0)+(+I.width||0),y:+I.y||0,viewText:"=$".concat(h)})});b=[I,R]}else{var T=Rt({type:c,parentId:w?y.id:Lt,transferData:rC(rC({},p),{},{x:t.x,y:w?t.y-y.y:t.y,viewText:"=$".concat(h)})}),N=T.x,G=T.y,Z=T.width,j=T.height;N+Z>=ht&&(T.x=ht-Z),G+j>dt&&(T.y=dt-j),b=[T]}var J=Mt.findControlByCondition((function(e){return"Footer"===e.type}))[0],P=b[0],O=P.y,U=P.height;J&&b[0].parentId===Lt&&O+U>J.y&&Hg(b,"y",J.y-U),Mt.addControl((0,W.createAddAction)(b,{addType:"addField"})).then((function(){St.setSelect(F()(b).call(b,(function(e){return e.id})))}))}else{if(c===gn.richText&&y){if(Tf(y))return _g(e,y,Mt,{initAttr:p,title:h},f,xt);if(Lf(y)){var z=or(Mt,C,"CardGrid");if(z){var H=wr(z,xt);if(!Ar(H,null==g?void 0:g.dataSource))return f((0,W.getLangMsg)("printd.grid.key0095"))}return qg(C,Mt,rC(rC({},p),{},{viewText:"=$".concat(h)}))}}if(y&&Lf(y)){var K=y.id,V=or(Mt,K,"CardGrid");if(V){var q=wr(V,xt);if(!Ar(q,null==g?void 0:g.dataSource))return f((0,W.getLangMsg)("printd.grid.key0096"))}}if(w&&Nt&&!xn()(Nt).call(Nt,c))return;var X=Rt({type:c,parentId:w?y.id:Lt,transferData:rC(rC({},p),{},{x:t.x,y:w?t.y-y.y:t.y})}),_=X.x,$=X.y,ee=X.width,te=X.height;_+ee>=ht&&(X.x=ht-ee),$+te>dt&&(X.y=dt-te),Mt.addControl((0,W.createAddAction)(X)).then((function(){St.setSelect([X.id])}))}}},ln=(0,H.useRef)({isOutMouseUp:!1}),cn=(0,H.useCallback)((function(){if(!0===Qt.current.isDragging){var e,t,n,r;Qt.current.isDragging=!1;var a=_.current,o=ev(a),i=null===(e=L.current)||void 0===e?void 0:Hn()(e).call(e,".".concat(ke)).toArray(),l=R()(t=F()(n=R()(i).call(i,(function(e){e.name().split(" ");return am().Util.haveIntersection(o,ev(e))&&e.getParent()===j.current}))).call(n,(function(e){return e.id()}))).call(t,Boolean);l.length>0&&St.setSelect(l),a.x(aC),a.y(aC),a.width(aC),a.height(aC),a.visible(!1),null==a||null===(r=a.getLayer())||void 0===r||r.batchDraw()}}),[]);(0,H.useEffect)((function(){var e,t=function(){ln.current.isOutMouseUp=!0},n=function(e){var t,n,r,a,o,i;if(("INPUT"!==(null===(t=e.target)||void 0===t?void 0:t.tagName)||"checkbox"===(null===(n=e.target)||void 0===n?void 0:n.type))&&"TEXTAREA"!==(null===(r=e.target)||void 0===r?void 0:r.tagName)&&"true"!==(null===(a=e.target)||void 0===a?void 0:a.contentEditable)){var l=e.keyCode||e.which,c=Mv(e);(xn()(o=[Km.ARROWDOWN,Km.ARROWLEFT,Km.ARROWRIGHT,Km.ARROWUP,Km.DELETE,Km.BACKSPACE]).call(o,l)||c&&xn()(i=[Km.D,Km.A]).call(i,l))&&e.preventDefault(),nn(e)}};return null===(e=document.querySelector(".print-designer-root"))||void 0===e||e.addEventListener("keydown",n),window.addEventListener("mouseup",t),function(){var e;null===(e=document.querySelector(".print-designer-root"))||void 0===e||e.removeEventListener("keydown",n),window.removeEventListener("mouseup",t)}}),[bt,Lt,cn,nn]),(0,H.useEffect)((function(){var e=function(e){e.stopPropagation()};return window.addEventListener("drop",e),function(){window.removeEventListener("drop",e)}}),[]),(0,H.useEffect)((function(){return W.eventBus.on("scale",(function(e){e!==k&&A(e)})),function(){W.eventBus.off("scale")}}),[k]);var un=(0,H.useState)((function(){return(null==g?void 0:g.current)||!1})),fn=(0,S.c)(un,2),hn=fn[0],mn=fn[1];(0,H.useEffect)((function(){return W.eventBus.on("contextStrokeEnabled",(function(e){e!==hn&&mn(e)})),function(){W.eventBus.off("contextStrokeEnabled")}}),[hn]);var yn=(0,H.useCallback)((function(){var e=ve.current,t=e.offsetWidth,n=e.offsetHeight;if(e){var r,a=function(e,t,n,r){return{justifyContent:e&&e<n?"flex-start":"center",alignItems:t&&t<r?"flex-start":"center"}}(t,n,Ud(Ct,k),Ud(mt,k)),o=a.justifyContent,i=a.alignItems,l=!1;e.style.justifyContent!==o&&(e.style.justifyContent=o,l=!0),e.style.alignItems!==i&&(e.style.alignItems=i,l=!0),l&&Gn((function(e){return e+1})),O()(r=An.current).call(r,(function(e){return e()})),Ht(),wn()}}),[k,Ct,mt]);(0,H.useEffect)((function(){return window.addEventListener("resize",yn),function(){window.removeEventListener("resize",yn)}}),[ht,dt,k,I,Ct,mt]),(0,H.useEffect)((function(){yn()}),[k,ht,dt,Ct,mt]);var Dn=(0,H.useRef)([]),En=(0,H.useCallback)((function(){var e,t=(window.devicePixelRatio||1).toFixed(2);Y().isEqual(+t,+I)||B(+t),yn(),wn(),O()(e=Dn.current).call(e,(function(e){return e(k)}))}),[I,ht,dt,k,Ct,mt]);eC([I,ht,dt,k,Ct,mt],En),(0,H.useImperativeHandle)(t,(function(){return{stage:L.current}}),[]);var wn=(0,H.useCallback)((function(){le()((function(){var e,t;null===(e=L.current)||void 0===e||O()(t=Hn()(e).call(e,"Transformer").toArray()).call(t,(function(e){null==e||e.forceUpdate()}))}))}),[]);(0,H.useEffect)((function(){var e=function(){var e;if(bt!==Lt){var t=null===(e=L.current)||void 0===e?void 0:e.findOne("#".concat(bt));le()((function(){var e,n,r=ev(t,_t());r&&Mt.findControl(bt)?null===(e=jn.current)||void 0===e||e.operateLine(r):null===(n=jn.current)||void 0===n||n.hideLine();wn()}))}else{var n;null===(n=jn.current)||void 0===n||n.hideLine()}};e();var t=Mt.addDataChangeListener(e);return function(){t()}}),[bt,k,Lt,wn]),(0,H.useEffect)((function(){return W.eventBus.on("align-shapes",(function(e){var t=e.type,n=e.ids,r=Mt.findControl(n);switch(t){case"top":var a=(0,M.c)({},_e,Math.min.apply(null,F()(r).call(r,(function(e){return e[_e]}))));Mt.batchUpdateControlPropertyValues((0,W.createUpdateAction)(F()(r).call(r,(function(e){return[e[tt],a]}))));break;case Ke:var o=(0,M.c)({},_e,Hd((Math.min.apply(null,F()(r).call(r,(function(e){return e[_e]})))+Math.max.apply(null,F()(r).call(r,(function(e){return e[_e]+e[et]}))))/2,1));Mt.batchUpdateControlPropertyValues((0,W.createUpdateAction)(F()(r).call(r,(function(e){return[e[tt],(0,M.c)({},_e,Hd(o[_e]-e[et]/2,1))]}))));break;case qe:iC(r,Mt,_e,et);break;case Ye:iC(r,Mt,Xe,$e);break;case Ve:var i=(0,M.c)({},Xe,Hd((Math.max.apply(null,F()(r).call(r,(function(e){return e[Xe]+e[$e]})))+Math.min.apply(null,F()(r).call(r,(function(e){return e[Xe]}))))/2,1));Mt.batchUpdateControlPropertyValues((0,W.createUpdateAction)(F()(r).call(r,(function(e){return[e[tt],(0,M.c)({},Xe,Hd(i[Xe]-e[$e]/2,1))]}))));break;case ze:var l=Q()(r).call(r,(function(e,t){var n=t[Xe]+t[$e];return n>e?n:e}),0);Mt.batchUpdateControlPropertyValues((0,W.createUpdateAction)(F()(r).call(r,(function(e){return[e[tt],(0,M.c)({},Xe,e[Xe]+(l-(e[Xe]+e[$e])))]}))));break;case He:var c=Q()(r).call(r,(function(e,t){var n=t[_e]+t[et];return n>e?n:e}),0);Mt.batchUpdateControlPropertyValues((0,W.createUpdateAction)(F()(r).call(r,(function(e){return[e[tt],(0,M.c)({},_e,e[_e]+(c-(e[_e]+e[et])))]}))));break;default:var u=(0,M.c)({},Xe,Math.min.apply(null,F()(r).call(r,(function(e){return e[Xe]}))));Mt.batchUpdateControlPropertyValues((0,W.createUpdateAction)(F()(r).call(r,(function(e){return[e[tt],u]}))))}})),function(){W.eventBus.off("align-shapes")}}),[]);var kn=(0,H.useRef)([]),An=(0,H.useRef)([]),bn=(0,H.useCallback)((function(e){var t,n=e.currentTarget,r=n.scrollLeft,a=n.scrollTop;X.current.style.transform="translateX(".concat(-r+"px",")"),V.current.style.transform="translateY(".concat(-a+"px",")"),O()(t=kn.current).call(t,(function(e){e&&e({scrollLeft:r,scrollTop:a})}))}),[]),In=(Ud(ot,k),Ud(at,k),Ud(Math.max(ot,it+ct),k)),Bn=Ud(Math.max(at,lt+ut),k),Sn=_t(),Mn=(Sn.x,Sn.y,Hm({offsetTop:null!==(r=null===(a=jt.current)||void 0===a?void 0:a.offsetTop)&&void 0!==r?r:0,offsetLeft:null!==(o=null===(i=jt.current)||void 0===i?void 0:i.offsetLeft)&&void 0!==o?o:0,marginLeft:Ud(lt,k),marginTop:Ud(it,k),definition:xt,dataContext:Mt,id:rt})),Ln=Mn.showEditor,Rn=Mn.hideEditor,Tn=Mn.editorElement,Fn=Mn.setEditorPosition,Nn=Mn.inputNodeRef,Gn=(0,H.useState)(0)[1];(0,H.useEffect)((function(){var e=function(){if(Z.current&&jt.current){var e=jt.current||{},t=e.offsetLeft,n=e.offsetTop;Z.current.position({x:(null!=t?t:0)-Wt,y:(null!=n?n:0)-Wt})}};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[Fn]);var Zn,Qn,jn=(0,H.useMemo)((function(){return{current:{operateLine:function(){for(var e,t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];null===(e=z.current)||void 0===e||e.operateLine.apply(e,r),null===(t=q.current)||void 0===t||t.operateLine.apply(t,r)},hideLine:function(){var e,t;null===(e=z.current)||void 0===e||e.hideLine(),null===(t=q.current)||void 0===t||t.hideLine()}}}}),[]),On=(0,H.useCallback)((function(){var e,t,n,r;return{scrollTop:null!==(e=null===(t=ve.current)||void 0===t?void 0:t.scrollTop)&&void 0!==e?e:0,scrollLeft:null!==(n=null===(r=ve.current)||void 0===r?void 0:r.scrollLeft)&&void 0!==n?n:0}}),[]),Un=(0,H.useCallback)((function(e,t){return e>at?{width:at,height:t*at/e}:{width:e,height:t}}),[at,ot,k]),zn=(0,H.useRef)(null),Kn=Mt.findControl(bt)||{},Xn=(Zn=Kn,"1"===(Qn=Ue.data.bizType)&&"Barcode"===Zn.type?{enabledAnchors:["bottom-center","top-center"]}:"1"===Qn&&"QRCode"===Zn.type?{enabledAnchors:[]}:Zn.type===Xt?{enabledAnchors:["top-center"]}:Zn.type===qt?{enabledAnchors:["bottom-center"]}:Zn.type===ft?{enabledAnchors:["bottom-center","middle-right","bottom-right"]}:Zn.type===gt?{enabledAnchors:["middle-left","bottom-left","bottom-center","middle-right","bottom-right"]}:Zn.type===$t?{enabledAnchors:["middle-right","middle-left","bottom-center","top-center"],padding:3}:{}),_n=rC({isGlobal:!0,stageRef:L,rootControlRef:Pt,selectedId:bt,parentId:null==Kn?void 0:Kn.parentId,ref:zn,controlGroupRef:j,isCell:yf(Kn),isSelected:bt!==Lt,isLastSelected:bt!==Lt,dataContext:Mt,refLineRef:T},Xn),$n=(0,H.useMemo)((function(){var e,t,n,r;return{refLineRef:T,rulerRef:jn,stageRef:L,rootControlRef:Pt,xRulerRef:z,yRulerRef:q,showEditor:Ln,globalTrRef:zn,pageHeight:dt,pageWidth:ht,pixelRatio:I,setMessage:f,hideEditor:Rn,setEditorPosition:Fn,marginLeft:Ud(lt,k),marginTop:Ud(it,k),selectionContext:St,navToolRef:Dt,canvasAbsolutePosRef:ee,deleteSelectionControl:We,getContainerDomScroll:On,canvasBoxRef:jt,rulerWidth:Me,offsetTop:(null!==(e=null===(t=jt.current)||void 0===t?void 0:t.offsetTop)&&void 0!==e?e:0)+Me,offsetLeft:(null!==(n=null===(r=jt.current)||void 0===r?void 0:r.offsetLeft)&&void 0!==n?n:0)+Me,dataContext:Mt,isNeedDashBorder:!1,scrollCallbackRef:kn,scale:k,contextStrokeEnabled:hn,containerDomRef:ve,getRedundancyXY:_t,rootId:Lt,getInputSize:he,getTextSize:ge,controlGroupRef:j,dataFactory:me,dragGroupRef:P,globalConfig:ae,sizeAndPixelRatioChangeCbRef:Dn,forceUpdateTransformer:wn,canvasResizeCallbackRef:An,handlePassGridActionGuide:h,isFirstUseGrid:v,onValid:p}}),[jn,Ln,dt,ht,I,f,Rn,Fn,lt,it,We,On,Me,k,hn,_t,Lt,he,ge,me,ae,h,v,p]),er=(0,H.useMemo)((function(){return{activedSelectId:bt,isMultiKeyActiveWhenSelectedRef:It}}),[bt]);(0,H.useEffect)((function(){Et.current=L.current}),[L.current]);var rr={position:"absolute",zIndex:1,backgroundColor:"#ffffff"};return K().createElement(K().Fragment,null,K().createElement("div",{className:Wn()("".concat(Zt,"-canvas-ruler"),"".concat(Zt,"-canvas-ruler-x")),style:rC(rC({},rr),{},{width:Me,height:In+Le+Me}),ref:V},K().createElement(Xh.Stage,{width:Me,height:In+Me+Le},K().createElement(xm,{direction:"x",scale:k,marginLeft:lt,marginTop:it,marginRight:ut,marginBottom:ct,pageSize:{width:at,height:ot},dataContext:Mt,ref:z}))),K().createElement("div",{className:"".concat(Zt,"-canvas-and-ruler"),ref:ee},K().createElement("div",{className:"".concat(Zt,"-lock")},K().createElement(U.Icon,{type:"lock"})),K().createElement("div",{className:Wn()("".concat(Zt,"-canvas-ruler"),"".concat(Zt,"-canvas-ruler-y")),style:rC(rC({},rr),{},{width:Bn+Le+Me,height:Me}),ref:X},K().createElement(Xh.Stage,{width:Bn+Le+Me,height:Me},K().createElement(xm,{direction:"y",scale:k,marginLeft:lt,marginTop:it,marginRight:ut,marginBottom:ct,pageSize:{width:at,height:ot},dataContext:Mt,ref:q}))),K().createElement("div",{className:Wn()("".concat(Zt,"-canvas-container"),"".concat(Zt,"-shadow-canvas-container")),id:"printDesignerCanvasContainer",ref:function(e){e&&(ve.current=e)},onScroll:bn},K().createElement("div",{className:"".concat(Zt,"-canvas-container-border-left")}),K().createElement("div",{className:"".concat(Zt,"-canvas-container-border-top")}),K().createElement("div",{className:Wn()("".concat(Zt,"-canvas-box"),"".concat(Zt,"-shadow-canvas-box")),ref:jt,style:{position:"relative",height:Ud(dt,k),width:Ud(ht,k),paddingLeft:Ud(lt,k),paddingRight:Ud(ut,k),paddingTop:Ud(it,k),paddingBottom:Ud(ct,k),boxSizing:"content-box"}}),K().createElement("div",{className:"".concat(Zt,"-canvas-paper"),ref:N,onDragOver:function(e){if(ve.current){var t=ve.current.getBoundingClientRect(),n=t.left,r=t.top,a=(t.height,t.width,ve.current),o=a.scrollLeft,i=a.scrollTop,l=_t(),c=l.x,u=l.y,s=e.pageX,d=e.pageY;s>=n+Math.max(c-o,0)&&s<=n+Math.max(c-o,0)+Ud(ht,k)&&d>=r+Math.max(u-i,0)&&d<=r+Math.max(u-i,0)+Ud(dt,k)&&e.preventDefault()}},onDrop:function(e){e.preventDefault();var t=window.event,n=t.offsetX,r=t.offsetY,a=_t(),o=a.x,i=a.y,l={offsetX:n-o,offsetY:r-i,x:Wd(n-o,k),y:Wd(r-i,k)};te.current={isDrag:!0,yPos:l.y};var c=y[W.CONTROL_DRAG_DATA]||{};if(m()(c).length){var u=c.type,s=c.data,d=c.showDataSourceTitle;null==L||L.current.fire("drop",{dropType:u,target:L.current,evt:window.event,controlData:s,position:l,showDataSourceTitle:d},!1),delete y[W.CONTROL_DRAG_DATA]}},style:{width:Math.ceil(vt),height:Math.ceil(pt)},tabIndex:-1},K().createElement("div",{className:"".concat(Zt,"-shadow-input"),ref:ne}),K().createElement("canvas",{ref:re,style:{display:"none"}}),K().createElement("div",{id:"shadowCanvas",style:{display:"none"}}),K().createElement(Xh.Stage,{ref:L,className:"".concat(Zt,"-paper"),width:Math.ceil(vt),height:Math.ceil(pt),scale:{x:Math.ceil(vt)/vt,y:Math.ceil(pt)/pt},onMouseDown:function(e){var t=e.target;if(0===e.evt.button){t!==(null==Nn?void 0:Nn.current)&&Rn&&Rn(),Vt(t)&&(Qt.current.isDragging=!0);var n=e.evt,r=n.layerX,a=n.layerY;Qt.current.startX=r,Qt.current.startY=a,Vt(t)&&Tt(e)}},onMouseMove:function(e){var t;if(ln.current.isOutMouseUp)return cn(e),void(ln.current.isOutMouseUp=!1);if(Qt.current.isDragging){var n=e.evt,r=n.layerX,a=n.layerY,o=Qt.current,i=o.startX,l=o.startY,c=[Math.min(r,i),Math.min(a,l),Math.abs(r-i),Math.abs(a-l)],u=c[0],s=c[1],d=c[2],f=c[3],g=_.current,h=_t(),v=h.x,p=h.y;g.x(u-v),g.y(s-p),g.width(d),g.height(f),g.visible(!0),null==g||null===(t=g.getLayer())||void 0===t||t.batchDraw()}},onMouseUp:cn,onDrop:function(e){var t=e.dropType,n=e.evt,r=e.controlData,a=e.position,o=e.showDataSourceTitle,i={x:n.offsetX,y:n.offsetY},l=L.current.getIntersection(i,"Group");"control"===t?an(r,a,l):on(r,a,l,o)}},K().createElement(vn.Provider,{value:$n},K().createElement(Cn.Provider,{value:er},K().createElement(Xh.Layer,{ref:Z,x:(null!==(l=null===(c=jt.current)||void 0===c?void 0:c.offsetLeft)&&void 0!==l?l:0)-Wt,y:(null!==(u=null===(s=jt.current)||void 0===s?void 0:s.offsetTop)&&void 0!==u?u:0)-Wt},K().createElement(Xh.Rect,{id:"".concat(rt,"_outter"),ref:Jt,name:"".concat(rt,"_outter_rect"),x:0,y:0,width:Ud(at,k),height:Ud(ot,k),draggable:!1,strokeWidth:1,fill:"#ffffff",shadowColor:"#000",shadowBlur:10,shadowOpacity:.1,shadowOffset:{x:0,y:2},shadowEnabled:!0}),K().createElement(op,{key:Bt,id:"unique_draw_background",ref:$,getImageSize:Un,src:Bt,scale:k}),K().createElement(Xh.Group,{x:Ud(lt,k),ref:j,name:"".concat(rt,"_group"),y:Ud(it,k)},K().createElement(Xh.Rect,{id:"".concat(rt),ref:Pt,name:"".concat(rt,"_dotted_rect"),width:Ud(ht,k),height:Ud(dt,k),draggable:!1,dash:[2.5,2.5],stroke:"#D9D9D9",dashEnabled:!0}),(0,W.toArray)(Oe,{context:$n}),K().createElement(yp,(0,oe.c)({},_n,{key:"global-transformer"})),K().createElement(Xh.Rect,{key:"unique_draw_region",id:"unique_draw_region",ref:_,x:aC,y:aC,height:aC,width:aC,visible:!1,stroke:"#0E5FD8",strokeWidth:1,shadowForStrokeEnabled:!1,strokeScaleEnabled:!1,hitStrokeWidth:0,alpha:1,strokeEnabled:!0}),K().createElement(Pm,{dataContext:Mt,marginTop:Ud(it,k),marginLeft:Ud(lt,k),getRedundancyXY:_t,controlGroupRef:j,key:"unique_refline",rootControlRef:Pt,ref:T,stageRef:L,selectedId:bt,selectionContext:St}))))))),Tn)),be.show&&K().createElement(Gd,{meta:kt,controlType:be.controlType,transferData:be.transferData,definition:xt,visible:be.show,onCancel:function(){var e=be.reject;e&&e("error: cancel add DataGrid"),Ie({show:!1})},onSelect:Ot,activedSelectId:bt}),Re.show&&K().createElement(cm,{meta:kt,definition:xt,visible:Re.show,onCancel:function(){var e=Re.reject;e&&e("error: cancel add layoutGrid"),Te({show:!1})},onConfirm:function(e){var t=e.row,n=e.column;if(ht/n<5)return f((0,W.getLangMsg)("printd.grid.key0093"));var r=Vg(me,Ce),a=Mt.findControlByCondition((function(e){return"Header"===e.type})),o=te.current,i=o.isDrag,l=o.yPos,c=Re.resolve,u=Re.parentId,s=rC({width:ht,height:8*t},i?{y:l}:{}),d=null;if(u){var g=Mt.findControl(u),h=g.width,v=g.y,p=g.height,m=g.type;s.width=h,s.y=i?s.y-v:0,"TableTail"===m&&p<8*t&&(d={type:W.ActionType.UPDATE,value:[[u,{height:8*t}]]})}var C=r({type:"LayoutGrid",parentId:u||Lt,gridInfo:e,transferData:s});a&&a.length&&C[0].y<a[0].height&&(C[0].y=a[0].height+C[0].y);var y=[{type:W.ActionType.ADD,value:C}];d&&y.push(d),c(y),zt(),Te({show:!1})}}),Je.show&&K().createElement(sm,{meta:kt,definition:xt,visible:Je.show,onCancel:function(){var e=Je.reject;e&&e("error: cancel add layoutGrid"),Pe({show:!1})},onConfirm:function(e){Pe({show:!1});var t=Je.resolve,n=Je.reject;Ie({controlType:"CardGrid",reject:n,resolve:t,show:!0,gridInfo:e})}}),K().createElement(im,{meta:kt,definition:xt,visible:Ge.show,onCancel:function(){var e=Ge.value;Ge.resolve,Ge.reject;W.eventBus.emit("change-lang",e,!1),Ze({show:!1})},onConfirm:function(){var e=Ge.value;Ge.resolve,Ge.reject;W.eventBus.emit("change-lang",e,!0),Ze({show:!1})},onClose:function(){Ge.value,Ge.resolve;(0,Ge.reject)((0,W.getLangMsg)("printd.grid.key0091")),Ze({show:!1})}}))}))),cC=(0,W.ErrorBoundaryWrap)(lC,"print-main-view"),uC=function(e){var t=(0,H.useRef)({}),n=(0,H.useContext)(W.SelectionContext),r=(0,H.useContext)(W.DataContext),a=(0,H.useCallback)((function(e){var n;return(null===(n=t.current)||void 0===n?void 0:n[e])||{}}),[]),o=(0,H.useCallback)((function(e,n){t.current[e]=n}),[]),i=(0,H.useMemo)((function(){return{setFieldSizeCache:o,getFieldSizeCache:a}}),[]),l=(0,H.useCallback)((function(e,t,n){oa()(e).call(e,(function(e){return yf(e)}))||t.setSelect(n)}),[]),c=(0,H.useCallback)((function(){var e;W.console.log("deleteSelectionControl");var t=r.getRootId(),a=R()(e=n.getSelection()).call(e,(function(e){return e!==t})),o=a,i=F()(a).call(a,(function(e){return r.findControl(e)}));if(o.length){if(1===i.length){var c=i[0];l(i,n,c.parentId!==t?[c.parentId]:[])}else l(i,n,[]);r.deleteControl((0,W.createDeleteAction)(o))}}),[]);return K().createElement(cC,(0,oe.c)({deleteSelectionControl:c,fieldSizeCacher:i},e))},sC=function(e){var t,n=e.portalRef,r=e.children,a=e.position,o=e.style,i=(0,H.useState)(document.createElement("div")),l=(0,S.c)(i,1)[0],c=(0,H.useRef)(!1),u=(0,H.useRef)(!1);(l.style.position=a||"absolute",l.style.top="0px",l.style.left="0px",l.style.zIndex="1050",o)&&O()(t=ch()(o)).call(t,(function(e){var t=(0,S.c)(e,2),n=t[0],r=t[1];l.style[n]=r}));var s=(0,H.useCallback)((function(){if(u.current){var e;if(Kr().unmountComponentAtNode(l),c.current)document.body.removeChild(l);else null===(e=n.current)||void 0===e||e.removeChild(l);u.current=!1}}),[]);(0,H.useEffect)((function(){return c.current=!1,null!=n&&n.current?n.current.appendChild(l):(document.body.appendChild(l),c.current=!0),u.current=!0,s}),[]),r?Kr().render(r,l):s()},dC="up",fC="bottom",gC=(0,H.forwardRef)((function(e,t){var n=e.x,r=e.y,a=e.portalRef,o=e.rowData,i=e.gridType,l=e.originCells,c=e.getCellIdx,u=e.mergeConfig,s=e.gridSelectionContext,d=e.hideContextMenu,f=e.addRow,g=e.addColumn,h=e.deleteRow,v=e.deleteColumn,p=e.addMerge,m=e.removeMerge,C=e.calcSelectionCanMerge,y=e.rowCount,D=e.columnCount,E=e.rows,w=e.subGridId,k=e.dataContext,A=e.selectionContext,x=1===A.getSelection().length&&yf(k.findControl(A.getSelection()[0])),b=C(),I=!x&&!b,B=function(){var e=s.selection,t=e.minRowNum,n=e.maxRowNum,r=e.minColumnNum,a=e.maxColumnNum;if(void 0===t||void 0===n||void 0===r||void 0===a){if(!b)return!1;var o=b.isSameRowType,i=b.isOnlyOneRowData;return o&&!i}for(var u=l[c(t,0)].row,d=E[u].rowType,f=t+1;f<=n;f++){var g=l[c(f,0)].row;if(d!==E[g].rowType)return!1}var h=l[c(t,r)].mergeConfig;if(h){for(var v=t;v<=n;v++)for(var p=r;p<=a;p++){var m=l[c(v,p)].mergeConfig;if(!Y().isEqual(m,h))return!0}return!1}return!0}(),S=function(){var e,t,n=s.contextRowIndex,r=s.contextColumnIndex,a=s.operationRowIndex,o=s.operationColumnIndex,i=s.selection,d=i.minRowNum,f=i.maxRowNum,g=i.minColumnNum,h=i.maxColumnNum;if(void 0!==d&&void 0!==f&&void 0!==g&&void 0!==h){for(var v=d;v<=f;v++)for(var p=g;p<=h;p++){if(l[c(v,p)].mergeConfig)return!0}return!1}if(void 0!==a){for(var m=0;m<D;m++){if(l[c(a,m)].mergeConfig)return!0}return!1}if(void 0!==o){for(var C=0;C<y;C++){if(l[c(C,o)].mergeConfig)return!0}return!1}return void 0!==n&&void 0!==r&&(!!u[G()(e="".concat(n,"_")).call(e,r)]||!(null===(t=l[c(n,r)])||void 0===t||!t.mergeConfig))}(),M=function(e){if(b)return e===dC?b.minRowNum:b.maxRowNum;if(S&&"cell"===s.operationType){var t,n,r=s.contextRowIndex,a=s.contextColumnIndex,o=u[G()(t="".concat(r,"_")).call(t,a)]||(null===(n=l[c(r,a)])||void 0===n?void 0:n.mergeConfig);if(e===dC&&o)return o.rowStart;if(o)return o.rowStart+o.rowLength-1}return"cell"===s.operationType?s.contextRowIndex:s.operationRowIndex},L=function(e){if(b)return e===dC?b.minColumnNum:b.maxColumnNum;if(S&&"cell"===s.operationType){var t,n,r=s.contextRowIndex,a=s.contextColumnIndex,o=u[G()(t="".concat(r,"_")).call(t,a)]||(null===(n=l[c(r,a)])||void 0===n?void 0:n.mergeConfig);if(e===dC&&o)return o.columnStart;if(o)return o.columnStart+o.columnLength-1}return"cell"===s.operationType?s.contextColumnIndex:s.operationColumnIndex},T=(0,H.useCallback)((function(e,t){if("LayoutGrid"===i||"CardGrid"===i)return At;var n=de()(o).call(o,(function(e){return Bf(e.row)}));return-1===n||e<n?wt:e>n?kt:t===dC?wt:kt}),[i,o]),F=!!R()(o).call(o,(function(e){return e.row.rowType===wt||e.row.rowType===At})).length,N=!!R()(o).call(o,(function(e){return e.row.rowType===kt})).length,Z=!!R()(o).call(o,(function(e){return e.row.rowType===At})).length,Q=!!R()(o).call(o,(function(e){var t,n=e.row;return n.rowType===Et&&(null===(t=n.mergeSummaryField)||void 0===t?void 0:t.length)})).length,j=(s.operationType,s.operationType,"row"===s.operationType),J="column"===s.operationType,P=!("DataGrid"!==i||R()(o).call(o,(function(e){return e.row.rowType===xt})).length||null!=w&&w.length||Q),O=!I&&!0,U=!I&&!0,z=!!s.operationMultiple;W.console.log(n,r,"GridContextMenu",B,S,s);var V=function(){return(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(B||S)?{borderBottom:"1px solid #D9D9D9"}:{}},q=I&&"cell"===s.operationType,X=(0,H.useMemo)((function(){var e=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;if(z)return{top:r,left:n};var t=16;return U&&(t+=P?96:64),O&&(t+=64),j&&(t+=32),J&&(t+=32),B&&(t+=32),S&&(t+=32),r+t>e?{top:r-t,left:n}:{top:r,left:n}}),[j,J,B,S,z]);return sC({portalRef:a,position:"fixed",children:!q&&K().createElement("div",{className:"grid-context-menu",ref:t,style:X},z?K().createElement(K().Fragment,null,K().createElement("span",{onClick:function(){d()}},(0,W.getLangMsg)("printd.components.key0031"))):K().createElement(K().Fragment,null,U&&K().createElement("span",{onClick:function(){var e=de()(o).call(o,(function(e){return Bf(e.row)})),t=de()(o).call(o,(function(e){return Mf(e.row)})),n=M(dC);d(),t>-1&&n===e&&(n=t),f(n,dC,T(n,dC))}},(0,W.getLangMsg)("printd.components.key0032")),U&&K().createElement("span",{onClick:function(){var e=de()(o).call(o,(function(e){return Mf(e.row)})),t=M(fC),n=de()(o).call(o,(function(e){return Bf(e.row)}));d(),e===t?f(n,fC,kt):f(M(fC),fC,T(t,fC))}},(0,W.getLangMsg)("printd.components.key0033")),U&&P&&K().createElement("span",{onClick:function(){var e=de()(o).call(o,(function(e){return Bf(e.row)}));d(),f(e,dC,xt,!1,1,!0)}},(0,W.getLangMsg)("printd.components.key0034")),j&&K().createElement("span",{onClick:function(){d(),h(M())}},(0,W.getLangMsg)("printd.components.key0035")),O&&K().createElement("span",{onClick:function(){d(),g(L(dC))}},(0,W.getLangMsg)("printd.components.key0036")),O&&K().createElement("span",{style:V(!J),onClick:function(){d(),g(L(fC),fC)}},(0,W.getLangMsg)("printd.components.key0037")),J&&K().createElement("span",{style:V(),onClick:function(){d(),v(L())}},(0,W.getLangMsg)("printd.components.key0038")),B&&K().createElement("span",{onClick:function(){d();var e={};if(Y().isObject(b)){var t=b;(0,oe.c)(e,t)}else(0,oe.c)(e,s.selection);var n=e.minRowNum,r=e.minColumnNum;p({rowStart:n,rowLength:e.maxRowNum-n+1,columnStart:r,columnLength:e.maxColumnNum-r+1})}},(0,W.getLangMsg)("printd.components.key0039")),S&&K().createElement("span",{onClick:function(){var e;d();var t=s.selection,n=t.minRowNum,r=t.maxRowNum,a=t.minColumnNum,o=t.maxColumnNum,i=s.contextRowIndex,f=s.contextColumnIndex,g=s.operationRowIndex,h=s.operationColumnIndex;if(void 0!==n&&void 0!==r&&void 0!==a&&void 0!==o)m({rowStart:n,rowLength:r-n+1,columnStart:a,columnLength:o-a+1});else if(void 0!==g)m({rowStart:g,rowLength:1,columnStart:0,columnLength:D});else if(void 0!==h)m({rowStart:0,rowLength:y,columnStart:h,columnLength:1});else if(Y().isObject(b)){var v=b.minRowNum,p=b.maxRowNum,C=b.minColumnNum,E=b.maxColumnNum;m({rowStart:v,rowLength:p-v+1,columnStart:C,columnLength:E-C+1})}else if(u[G()(e="".concat(i,"_")).call(e,f)]){var w,k=u[G()(w="".concat(i,"_")).call(w,f)],A=k.rowLength,x=k.columnLength;m({rowStart:void 0===n?s.contextRowIndex:n,rowLength:void 0===n?A:r-n+1,columnStart:void 0===a?s.contextColumnIndex:a,columnLength:void 0===a?x:o-a+1})}else if(l[c(i,f)].mergeConfig){var I=l[c(i,f)].mergeConfig,B=I.rowStart,S=I.columnStart,M=I.rowLength,L=I.columnLength;m({rowStart:void 0===n?B:n,rowLength:void 0===n?M:r-n+1,columnStart:void 0===a?S:a,columnLength:void 0===a?L:o-a+1})}}},(0,W.getLangMsg)("printd.components.key0040"))))}),null})),hC=gC,vC=function(e){var t=e.scrollCallbackRef,n=e.refs,r=e.canvasResizeCallbackRef,a=(0,H.useState)(0)[1];(0,H.useEffect)((function(){var e,o,i=function(e){var t,r,a=e.scrollLeft,o=e.scrollTop;O()(t=R()(r=F()(n).call(n,(function(e){return e.current}))).call(r,Boolean)).call(t,(function(e){var t;e.style.transform=G()(t="translate(".concat(-a+"px",", ")).call(t,-o+"px",")")}))},l=function(){a((function(e){return e+1}))};return null===(e=r.current)||void 0===e||e.push(l),null===(o=t.current)||void 0===o||o.push(i),function(){var e,n;t.current=R()(e=t.current).call(e,(function(e){return e!==i})),r.current=R()(n=r.current).call(n,(function(e){return e!==l}))}}),[t])},pC=!1,mC=(0,H.forwardRef)((function(e,t){var n,r,a,o,i,l,c,u,s,d=e.x,f=e.y,g=e.portalRef,h=(0,H.useState)(pC),v=(0,S.c)(h,2),p=v[0],m=v[1],C=(0,H.useState)(!1),y=(0,S.c)(C,2),D=y[0],E=y[1];(0,H.useEffect)((function(){E(!0)}),[]),pC=!0;var w=(0,H.useContext)(vn),k=w.scrollCallbackRef,A=w.containerDomRef,x=(w.pageHeight,w.canvasBoxRef),b=w.rulerWidth,I=(w.pageWidth,w.canvasResizeCallbackRef),B=w.handlePassGridActionGuide,M=d+(null!==(n=null===(r=x.current)||void 0===r?void 0:r.offsetLeft)&&void 0!==n?n:0)+b,L=f+(null!==(a=null===(o=x.current)||void 0===o?void 0:o.offsetTop)&&void 0!==a?a:0)+b,R=(0,H.useRef)(null);vC({scrollCallbackRef:k,refs:[R],canvasResizeCallbackRef:I});var T=(0,H.useCallback)((function(){p||(B&&B(),m(!0))}),[B,p]),F=D&&!p&&K().createElement("div",{onClick:T,title:(0,W.getLangMsg)("printd.components.key0042"),className:"print-grid-action-guide",ref:R,style:{position:"absolute",transform:G()(i="translate(".concat((null!==(l=-(null===(c=A.current)||void 0===c?void 0:c.scrollLeft))&&void 0!==l?l:0)+"px",", ")).call(i,(null!==(u=-(null===(s=A.current)||void 0===s?void 0:s.scrollTop))&&void 0!==u?u:0)+"px",")"),left:M,top:L-44}},(0,W.getLangMsg)("printd.components.key0066"));return(0,H.useImperativeHandle)(t,(function(){return{handlePassGridActionGuide:T}}),[T]),sC({portalRef:g,children:F,style:{width:"1000px"}}),null})),CC=mC,yC="grid-title",DC=function(e){var t,n=e.text,r=e.width,a=e.height,o=e.type,i=e.lineRef,l=e.index,c=e.change,u=e.handleGridSelection,s=(e.length,e.isSelected),d=e.onContextMenu,f=e.templateRowData,g=(e.templateRowHeight,e.scale),h=e.maxLimitWidthChange,v=e.maxLimitHeightChange,p=e.isNextSelected,m=(0,H.useRef)(null);(0,W.useOnClickOutside)([m],(function(e){var t=i.current.dataset.canDrag;!t||JSON.parse(t)}),!1);(0,H.useEffect)((function(){var e=function(e){W.console.log("e.ctrlKe shapeRef.current?.stopDrag()");var t=m.current,n=i.current;t&&(t.dataset.dragging=!1),n&&(n.style.display="none",n.style.transform="",n.dataset.canDrag=!1)};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]),(0,H.useEffect)((function(){var e=function(e){var t=m.current,n=i.current;if(t&&n&&t.dataset.dragging&&JSON.parse(t.dataset.dragging)){var r,a=n.dataset["".concat(o,"DragStart")],l=("row"!==o?e.clientX:e.clientY)-+a;n.style.transform=G()(r="translate".concat("row"===o?"Y":"X","(")).call(r,l,"px)")}};return window.addEventListener("mousemove",e),function(){window.removeEventListener("mousemove",e)}}),[]);var C="row"===o?Ud(3,g)-a:Ud(5,g)-r,y=Ud("row"===o?v:h,g);(0,H.useEffect)((function(){var e=function(e){var t=i.current,n=m.current;if(t&&n){var r=n.dataset.dragging;if(r&&JSON.parse(r)){var a=t.dataset["".concat(o,"DragStart")],u=("row"!==o?e.clientX:e.clientY)-+a;if(t.style.display="none",t.style.transform="",!isNaN(u)){var s=u>y?y:u<C?C:u;W.console.log("handleMouseUp",u,e.clientX,e.clientY,+a,[s,y,C]),c(l,f?s/(f.length+1):s,s,u)}}t.dataset.canDrag=!1,n.dataset.dragging=!1}};return window.addEventListener("mouseup",e),function(){window.removeEventListener("mouseup",e)}}),[c,f]);return K().createElement("div",{ref:m,className:Wn()("".concat(yC,"-cell"),(0,M.c)((0,M.c)({},"".concat(yC,"-cell-selectable"),s),G()(t="".concat(yC,"-cell-")).call(t,o,"-next-selectable"),p)),style:{width:"row"===o?r:r+(0===l?1:0),fontSize:12*g,lineHeight:1.5,height:"row"!==o?a:a+(0===l?1:0)},onContextMenu:d,onMouseMove:function(e){var t=m.current,n=i.current;if(t&&n){var r="row"===o?e.nativeEvent.offsetY:e.nativeEvent.offsetX,a="row"===o?t.offsetHeight:t.offsetWidth;W.console.log("handleMouseMove",r,8,a,r+8>=a),t.dataset.dragging&&JSON.parse(t.dataset.dragging)||(r+8>=a?(n.dataset.canDrag=!0,t.style.cursor="row"===o?"ns-resize":"ew-resize"):(n.dataset.canDrag=!1,t.style.cursor=""))}},onMouseDown:function(e){var t=i.current,n=m.current,r=t.dataset.canDrag;t&&r&&JSON.parse(r)&&n?(n.dataset.dragging=!0,t.dataset["".concat(o,"DragStart")]="row"!==o?e.clientX:e.clientY,t.style["row"===o?"top":"left"]="".concat(n["row"===o?"offsetTop":"offsetLeft"]+n["row"===o?"offsetHeight":"offsetWidth"],"px"),W.console.log("handleMouseDown",t,m.current),t.style["row"===o?"top":"left"]="row"===o?e.clientX:e.clientY,t.style.display="block",null==e||e.stopPropagation()):Mv(e)?u({type:o,index:l,isMult:!0}):u({type:o,index:l,isMult:!1})}},K().createElement("span",{className:"".concat(yC,"-cell-text")},n))},EC=function(e){var t,n,r,a,o,i,l,c,u,s,d,f,g,h,v,p,m,C,y,D,E,w,k,A,x=e.columns,b=e.scale,I=e.x,B=e.y,S=e.portalRef,M=e.rows,L=(e.scrollTop,e.scrollLeft,e.gridType),R=e.templateRowData,T=e.maxLimitWidthChange,N=e.maxLimitHeightChange,Z=e.changeRow,Q=e.changeColumn,j=e.handleGridSelection,J=e.onContextMenu,P=e.rowTitleSelection,O=e.columnTitleSelection,z=e.templateRowHeight,V=e.containerHeight,Y=e.containerWidth,q=e.subGridId,X=e.addSubDataGrid,_=e.gridState,$=e.isShowAddSubGridBtn,ee=e.tableTailId,te=60*b,ne=25*b,re=104*b,ae=40*b,oe=2*b,ie=((0,H.useRef)(null),(0,H.useRef)(null)),le=(0,H.useRef)(null),ce=(0,H.useRef)(null),ue=(0,H.useRef)(null),se=(0,H.useRef)(null),de=(0,H.useRef)(null),fe=(0,H.useContext)(vn),ge=fe.scrollCallbackRef,he=fe.containerDomRef,ve=(fe.pageHeight,fe.canvasBoxRef),pe=fe.rulerWidth,me=(fe.pageWidth,fe.canvasResizeCallbackRef),Ce=I+(null!==(t=null===(n=ve.current)||void 0===n?void 0:n.offsetLeft)&&void 0!==t?t:0)+pe,ye=B+(null!==(r=null===(a=ve.current)||void 0===a?void 0:a.offsetTop)&&void 0!==r?r:0)+pe;vC({scrollCallbackRef:ge,refs:[ue,ce,se,de],canvasResizeCallbackRef:me});var De=Hn()(M).call(M,(function(e){return"Group"===e.rowType}));W.console.log("gridTitle",Ce,ye,ne,Ud(of(M,z),b));var Ee=_===dt,we=!(!$||L!==ht||"2"!==_&&_!==dt||null!=q&&q.length),ke=function(e,t,n,r){var a,o=!(null===(a=e[t])||void 0===a||!a.visible),i=!o;if(n<r.length-1){var l,c=r[n+1].id;i=i&&!(null===(l=e[c])||void 0===l||!l.visible)}else i=!1;return{isSelected:o,isNextSelected:i}};return sC({portalRef:S,children:K().createElement(K().Fragment,null,Ee&&K().createElement("div",{tabIndex:-1,className:Wn()("".concat(yC,"-column"),yC),ref:ue,style:{width:Y,height:ne+0,transform:G()(o="translate(".concat((null!==(i=-(null===(l=he.current)||void 0===l?void 0:l.scrollLeft))&&void 0!==i?i:0)+"px",", ")).call(o,(null!==(c=-(null===(u=he.current)||void 0===u?void 0:u.scrollTop))&&void 0!==c?c:0)+"px",")"),left:Ce+1,top:ye-ne}},F()(x).call(x,(function(e,t){var n=function(e){if(e<=0)return"";for(var t=[];e;){var n=e%26?e%26:26;t.unshift(String.fromCharCode(n+64)),e=Math.floor((e-n)/26)}return t.join("")}(t+1),r=e.id,a=ke(O,r,t,x),o=a.isSelected,i=a.isNextSelected;return K().createElement(DC,{maxLimitWidthChange:T,maxLimitHeightChange:N,scale:b,onContextMenu:J,isSelected:o,isNextSelected:i,handleGridSelection:j,length:M.length,index:t,change:Q,key:"grid-column-".concat(e.id),text:n,lineRef:ie,type:"column",width:Ud(e.columnWidth,b),height:ne})})),K().createElement("div",{ref:ie,className:"".concat(yC,"-column-drag-line"),style:{height:Ud(of(M,z),b)+ne}})),Ee&&K().createElement("div",{tabIndex:-1,className:Wn()("".concat(yC,"-row"),yC),ref:ce,style:{width:te,height:V+ne,transform:G()(s="translate(".concat((null!==(d=-(null===(f=he.current)||void 0===f?void 0:f.scrollLeft))&&void 0!==d?d:0)+"px",", ")).call(s,(null!==(g=-(null===(h=he.current)||void 0===h?void 0:h.scrollTop))&&void 0!==g?g:0)+"px",")"),left:Ce-te+1+0,top:ye-ne}},K().createElement("div",{className:"".concat(yC,"-frozen-cell"),style:{width:te,height:ne}},K().createElement("div",{className:"".concat(yC,"-frozen-cell-line"),style:{width:60*b}})),F()(M).call(M,(function(e,t){var n=function(e,t,n){if("LayoutGrid"===t||"CardGrid"===t)return n+1;switch((e||{}).rowType){case wt:return(0,W.getLangMsg)("printd.components.key0043");case Et:return(0,W.getLangMsg)("printd.components.key0044");case kt:return(0,W.getLangMsg)("printd.components.key0045");case At:return(0,W.getLangMsg)("printd.components.key0046");case xt:return(0,W.getLangMsg)("printd.components.key0047");default:return e.name}}(e,L,t),r=e.id,a=e.rowType,o=e.rowHeight,i=Ud(o,b);a===Et&&R.length&&(i+=R.length*i);var l=ke(P,r,t,M),c=l.isSelected,u=l.isNextSelected;return K().createElement(DC,{maxLimitWidthChange:T,templateRowHeight:z,maxLimitHeightChange:N,scale:b,onContextMenu:J,templateRowData:a===Et&&R,isSelected:c,isNextSelected:u,handleGridSelection:j,length:x.length,index:t,change:Z,key:"grid-row-".concat(e.id),text:n,type:"row",lineRef:le,width:te,height:i})})),K().createElement("div",{ref:le,className:"".concat(yC,"-row-drag-line"),style:{width:Ud(of(x),b)+te}})),we&&!De&&!ee&&K().createElement("div",{className:"".concat(yC,"-subgrid-right"),ref:se,style:{width:re,height:V+1,transform:G()(v="translate(".concat((null!==(p=-(null===(m=he.current)||void 0===m?void 0:m.scrollLeft))&&void 0!==p?p:0)+"px",", ")).call(v,(null!==(C=-(null===(y=he.current)||void 0===y?void 0:y.scrollTop))&&void 0!==C?C:0)+"px",")"),left:Ce+Y+1+0+oe,top:ye},onClick:function(){X("right")}},K().createElement(U.Icon,{type:"add"}),(0,W.getLangMsg)("printd.grid.key0032")),we&&!De&&!ee&&K().createElement("div",{className:"".concat(yC,"-subgrid-bottom"),ref:de,style:{width:Y,height:ae+1,transform:G()(D="translate(".concat((null!==(E=-(null===(w=he.current)||void 0===w?void 0:w.scrollLeft))&&void 0!==E?E:0)+"px",", ")).call(D,(null!==(k=-(null===(A=he.current)||void 0===A?void 0:A.scrollTop))&&void 0!==k?k:0)+"px",")"),left:Ce+1+0,top:ye+V+oe},onClick:function(){X("bottom")}},K().createElement(U.Icon,{type:"add"}),(0,W.getLangMsg)("printd.grid.key0032")))}),null};function wC(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function kC(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?O()(n=wC(Object(a),!0)).call(n,(function(t){(0,M.c)(e,t,a[t])})):A()?b()(e,A()(a)):O()(r=wC(Object(a))).call(r,(function(t){B()(e,t,w()(a,t))}))}return e}var AC=function(e){var t=(0,H.useContext)(vn),n=(t.scale,t.dataContext),r=((0,H.useRef)(null),(0,H.useRef)(null),e.x,e.y,e.id),a=(e.width,e.height,e.config,e.isTemplate),o=e.cellBackColor,i=e.backColor,l=a?[]:n.findControlByCondition((function(e){return e.parentId===r}))||[],c=!a&&(!!l&&!!l.length);return K().createElement(Fp,{data:kC(kC({},e),{},{isCell:!0,hasChildItems:c,isTemplate:a,backColor:o||i,childItems:l})},l&&ky(l,!0))},xC=function(e){e.row;var t=e.cells,n=e.isTemplate,r=e.cellBackColor;return K().createElement(K().Fragment,null,F()(t).call(t,(function(e){e.row,e.column;var t,a,o=e.cellKey,i=e.id;return K().createElement(AC,(0,oe.c)({},e,{isTemplate:n,key:G()(t=G()(a="".concat(n?"tempalte_":"")).call(a,o,"_")).call(t,i),cellBackColor:r}))})))},bC=function(e){return Q()(e).call(e,(function(e,t,n){return e[t.id]={id:t.id,visible:!1,index:n,data:t},e}),{})},IC=(0,H.memo)((function(e){var t,n,r,a,o,i,l,c,u,s,d,f,g=(0,H.useState)(st),h=(0,S.c)(g,2),v=h[0],p=h[1],C=(0,H.useContext)(vn),y=C.contextStrokeEnabled,D=(0,H.useRef)(null),E=(0,H.useRef)(null),w=(0,H.useRef)(null),k=(0,H.useRef)(null),A=(0,H.useRef)(null),x=(0,H.useRef)(null);gv({shapeRef:D});var b=(0,H.useState)(!1),I=(0,S.c)(b,2),B=I[0],L=I[1],T=(0,H.useState)({}),N=(0,S.c)(T,2),Z=N[0],j=N[1],J=(0,H.useCallback)((function(){B&&L(!1)}),[B]);(0,H.useEffect)((function(){return window.addEventListener("resize",J),function(){window.removeEventListener("resize",J)}}),[J]);var P=C.scale,O=void 0===P?1:P,U=C.canvasAbsolutePosRef,z=C.selectionContext,V=C.dataContext,q=C.marginLeft,X=C.marginTop,_=C.getContainerDomScroll,$=C.scrollCallbackRef,ee=C.getRedundancyXY,te=C.controlGroupRef,ne=C.pixelRatio,re=C.sizeAndPixelRatioChangeCbRef,ae=C.isFirstUseGrid,ie=(z.getSelection(),V.getRootId()),ce=_(),ue=ce.scrollTop,se=ce.scrollLeft;(0,H.useEffect)((function(){var e;return null===(e=$.current)||void 0===e||e.push(J),function(){var e;$.current=R()(e=$.current).call(e,(function(e){return e!==J}))}}),[B,J]);var de=e.id,fe=e.rows,ge=void 0===fe?[]:fe,he=e.columns,ve=void 0===he?[]:he,pe=(e.cells,e.mergeConfig),me=void 0===pe?{}:pe,Ce=e.width,ye=e.height,De=e.x,Ee=e.y,we=e.type,Ie=e.border,Be=e.templateRowData,Me=e.originCells,Le=e.rowCount,Re=e.columnCount,Te=e.rowData,Fe=e.templateRowHeight,Ne=e.templateRowIndex,Ge=e.getCellPosition,Ze=e.getCellIdx,Qe=e.templateRowY,je=e.addRow,Je=e.getRowIndexlocateByPosition,Pe=e.getColumnIndexlocateByPosition,Oe=e.addColumn,Ue=e.changeRow,We=e.deleteRow,ze=e.changeColumn,He=e.deleteColumn,Ke=e.addMerge,Ve=e.removeMerge,Ye=e.maxLimitWidthChange,qe=e.maxLimitHeightChange,Xe=e.gridBorderType,_e=e.handleMouseDown,$e=e.isSelected,et=e.isLastSelected,tt=e.subGridId,nt=e.addSubDataGrid,rt=e.isShowAddSubGridBtn,at=null===(t=V.findControl(de))||void 0===t?void 0:t.tableTailId,ot=V.findControl(e.parentId),it=(0,H.useState)((function(){return bC(ge)})),lt=(0,S.c)(it,2),ct=lt[0],ut=lt[1],ft=(0,H.useState)((function(){return bC(ve)})),gt=(0,S.c)(ft,2),ht=gt[0],vt=gt[1];(0,H.useEffect)((function(){m()(ct).length!==ge.length&&ut(bC(ge))}),[e]),(0,H.useEffect)((function(){m()(ht).length!==ve.length&&vt(bC(ve))}),[e]);var pt=fp(Ce,O),mt=fp(ye,O),Ct=Ud(De,O),yt=Ud(Ee,O),Dt=np({x:De,y:Ee,id:de,width:Ce,height:ye,border:Ie,scale:O,contextStrokeEnabled:y,isSelected:$e}),Et=Dt.stroke,wt=Dt.strokeWidth,kt=(Dt.strokeEnabled,Dt.dashEnabled),At=Dt.defaultDash,xt=Dt.customedStrokeElement,bt=Dt.controlStrokeRef;lv({isSelected:$e,refs:[D],pixelRatio:ne,scale:O,currentProp:{id:de,width:Ce,height:ye,x:De,y:Ee,gridState:v,templateRowData:Be,gridBorderType:Xe,rowData:Te,stroke:Et,dashEnabled:kt,strokeWidth:wt,rowGridSelectionState:ct,columnGridSelectionState:ht}});var It=fv({shapeRef:w,isSelected:et,shapeRefStroke:"#fff",strokeEnabled:!1,controlStrokeRef:bt}),Bt=It.onMouseOut,St=It.onMouseOver;(0,H.useEffect)((function(){var e,t,n,r,a,o=null===(e=D.current)||void 0===e?void 0:e.zIndex(),i=!1;v!==dt||Y().isUndefined(o)||(null===(t=D.current)||void 0===t||t.zIndex(((null===(n=te.current)||void 0===n?void 0:n.children.length)||F()(r=V.getData().items).call(r,(function(e){return e.parentId===ie})).length)-2),null===(a=D.current)||void 0===a||a.draw(),i=!0);return function(){var e;i&&!Y().isUndefined(o)&&(null===(e=D.current)||void 0===e||e.zIndex(o))}}),[v,ie]);var Mt=dp(e,C),Lt=hv({id:de,refLineRef:C.refLineRef}),Rt=(0,H.useCallback)((function(e){var t=e.x,n=e.y,r=(e.scaleX,e.scaleY,e.width),a=e.height,o=C.dataContext,i=Wd(r,O),l=Wd(a,O);o.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[de,{x:Wd(t,O),y:Wd(n,O),width:i,height:l}]]))}),[de,O]),Tt=nv({id:de,shapeRef:D,refLineRef:C.refLineRef,context:C,onDragEnd:Mt,onDragMove:Lt,parentId:e.parentId,scale:O}),Ft=Tt.onDragStart,Nt=Tt.onDragMove,Gt=Tt.onDragEnd,Zt=Tt.dragBoundFunc,Qt=iv({id:de,shapeRef:E,refLineRef:C.refLineRef,onTransformEnd:Rt,context:C}),jt=Qt.onTransform,Jt=Qt.onTransformEnd,Pt=(0,H.useRef)(null),Ot={stageRef:C.stageRef,rootControlRef:C.rootControlRef,selectedId:v!==dt&&de,id:de,dataContext:V,ref:Pt,isSelected:v!==dt&&$e&&!et},Ut=function(e){var t=e.evt||e;if(t.preventDefault(),v===dt){V.findControl(ie).language;var n=t.pageX,r=t.pageY;j({x:n,y:r}),B||(L(!0),e.evt&&Vt())}},Wt=(0,H.useRef)({isSelection:!1,rowIndex:-1,columnIndex:-1,selection:{},operationType:"cell",operationMultiple:!1,contextRowIndex:void 0,contextColumnIndex:void 0,operationRowIndex:void 0,operationColumnIndex:void 0}),zt=function(e){e.current.contextRowIndex=void 0,e.current.contextColumnIndex=void 0},Ht=(0,H.useCallback)((function(){var e=z.getSelection(),t=V.findControl(e);if(oa()(t).call(t,(function(e){return yf(e)}))&&e.length>1){var n,r=Q()(Te).call(Te,(function(t,n){var r=n.cells;return G()(t).call(t,R()(r).call(r,(function(t){var n=t.id;return xn()(e).call(e,n)})))}),[]),a=!1;1===r.length&&(a=!0);for(var o=new(ua()),i=new(ua()),l=new(ua()),c=new(ua()),u=new(ua()),s=!0,d=0;d<Me.length;d++){var f=Me[d],g=f.id,h=(f.rowId,f.columnId,f.row),v=f.column,p=f.mergeConfig;if(xn()(e).call(e,g)&&(u.add(g),o.add(h),c.add(ge[h].rowType),c.size>1&&(s=!1),i.add(v),l.add(g),p))for(var m=p.rowStart,C=p.columnStart,y=p.rowLength,D=p.columnLength,E=m;E<=m+y-1;E++)for(var w=C;w<=C+D-1;w++){var k=Me[Ze(E,w)];if(k){var A=k.id,x=k.row,b=k.column;l.add(A),o.add(x),i.add(b)}}if(u.size===e.length)break}var I=(0,yn.c)(o),B=(0,yn.c)(i);if(Vn()(n=[I,B]).call(n,(function(e){return!function(e){if(0===e.length)return!1;if(1===e.length)return!0;for(var t=0;t<e.length-1;t++)if(e[t]!==e[t+1]-1)return!1;return!0}(e)})))return!1;if(I.length*B.length===(0,yn.c)(l).length&&I.length*B.length!=1)return{minRowNum:Math.min.apply(Math,(0,yn.c)(I)),minColumnNum:Math.min.apply(Math,(0,yn.c)(i)),maxRowNum:Math.max.apply(Math,(0,yn.c)(I)),maxColumnNum:Math.max.apply(Math,(0,yn.c)(i)),isSameRowType:s,isOnlyOneRowData:a}}return!1}),[de,Me,ge,Te]),Kt=function(e){var t,n,r,a,o,i,l=e.minRowNum,c=e.maxRowNum,u=e.minColumnNum,s=e.maxColumnNum,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O;if(void 0!==l&&void 0!==c&&void 0!==u&&void 0!==s){(0,oe.c)(Wt.current.selection,{minRowNum:l,maxRowNum:c,minColumnNum:u,maxColumnNum:s});for(var f=Me[Ze(l,u)],g=f.row,h=f.id,v=Hn()(t=Te[g].cells).call(t,(function(e){return e.id===h})),p=v.x,m=v.y,C=0,y=0,D=l;D<=c;D++){var E=Ge({row:D,column:u});E.width;y+=E.height}for(var w=u;w<=s;w++){var k=Ge({row:l,column:w}),A=k.width;k.height;C+=A}C=Ud(C,d),y=Ud(y,d),null===(n=x.current)||void 0===n||n.position({x:Ud(p,d),y:Ud(m,d)}),null===(r=x.current)||void 0===r||r.width(C),null===(a=x.current)||void 0===a||a.height(y),null===(o=x.current)||void 0===o||o.visible(!0),null===(i=x.current)||void 0===i||null===(i=i.getLayer())||void 0===i||i.batchDraw()}},Vt=function(){var e=bC(ge),t=bC(ve),n=!1;return Wt.current.operationType="cell",Wt.current.operationRowIndex=void 0,Wt.current.operationColumnIndex=void 0,Y().isEqual(e,ct)||(ut(e),n=!0),Y().isEqual(t,ht)||(vt(t),n=!0),n},Yt=function(e){var t=e.type,n=e.index,r=e.isMult,a=e.reset,o=void 0!==a&&a,i=e.isSelectedGrid,l=void 0!==i&&i;if(zt(Wt),o){Vt()&&l&&z.setSelect([de])}else{J(),qt();var c,u,s,d,f=[],g=[],h=!1;if("row"===t)Wt.current.operationType="row",Wt.current.operationRowIndex=n,Wt.current.operationColumnIndex=void 0,r?ut((function(e){return h=!e[ge[n].id].visible,e[ge[n].id].visible=h,Y().cloneDeep(e)})):(ut((function(){var e=bC(ge);return h=!e[ge[n].id].visible,e[ge[n].id].visible=h,Y().cloneDeep(e)})),vt(bC(ve))),f=F()(c=Qd()(u=new Array(Re)).call(u,0)).call(c,(function(e,t){return Me[Ze(n,t)].id}));else Wt.current.operationType="column",Wt.current.operationColumnIndex=n,Wt.current.operationRowIndex=void 0,r?vt((function(e){return h=!e[ve[n].id].visible,e[ve[n].id].visible=h,Y().cloneDeep(e)})):(vt((function(){var e=bC(ve);return h=!e[ve[n].id].visible,e[ve[n].id].visible=h,Y().cloneDeep(e)})),ut(bC(ge))),f=F()(s=Qd()(d=new Array(Le)).call(d,0)).call(s,(function(e,t){return Me[Ze(t,n)].id}));if(r)Wt.current.operationMultiple=!0;else{Wt.current.operationMultiple=!1;var v=z.getSelection();g=R()(v).call(v,(function(e){return e!==de}))}if(h){var p,m,C=z.getSelection(),y=R()(p=(0,yn.c)(new(ua())(G()(m=R()(C).call(C,(function(e){return!xn()(g).call(g,e)}))).call(m,f)))).call(p,(function(e){return e!==de}));z.setSelect(y)}else{var D,E,w=V.getRootId(),k=R()(D=z.getSelection()).call(D,(function(e){return!xn()(g).call(g,e)})),A=R()(E=R()(k).call(k,(function(e){return!xn()(f).call(f,e)}))).call(E,(function(e){return e!==de}));z.setSelect(A.length>0?A:[w])}}},qt=(0,H.useCallback)((function(){var e,t;(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(Wt.current.selection={}),null===(e=x.current)||void 0===e||e.visible(!1),null===(t=x.current)||void 0===t||t.draw(),Wt.current.isSelection=!1}),[]);(0,H.useEffect)((function(){var e=function(e){qt(!1),le()((function(){var t=Wt.current.selection;Kt(t,e)}))};return re.current.push(e),function(){var t;re.current=R()(t=re.current).call(t,(function(t){return t!==e}))}}),[Kt,qt,O]),(0,H.useEffect)((function(){var e=z.addSelectChangeListener((function(e){var t=e.value;if(Vn()(t).call(t,(function(e){for(var t=V.findControl(e).parentId,n=e;t;){if(t===de||de===n)return!1;if(t===ie)return!0;var r=V.findControl(t);t=null==r?void 0:r.parentId,n=null==r?void 0:r.id}return!1}))||0===t.length)return v!==st&&(p(st),qt()),void Yt({reset:!0})})),t=V.addDataChangeListener((function(){le()((function(){qt(!1)}))}));return function(){t(),e()}}),[de,v,Yt,e,ie,Kt,qt]);var Xt=(0,H.useCallback)((function(){if(Wt.current.isSelection){var e,t=[],n=Wt.current.selection,r=n.minRowNum,a=n.maxRowNum,o=n.minColumnNum,i=n.maxColumnNum;if(oa()(e=[r,a,o,i]).call(e,(function(e){return!Y().isUndefined(e)}))){for(var l=function(e,t,n,r,a){for(var o=$f(e,t,r,a),i=function(e,t){var n=t.mergeConfig;if(!n)return e;var r=n.columnStart,a=n.columnLength;return Math.max(e,r+a-1)},l=n,c=o(l,i);c>l;)c=o(l=c,i);return l}(r,a,i,Me,Ze),c=function(e,t,n,r,a){for(var o=$f(e,t,r,a),i=function(e,t){var n=t.mergeConfig;if(!n)return e;var r=n.columnStart;return Math.min(e,r)},l=n,c=o(l,i);c<l;)c=o(l=c,i);return l}(r,a,o,Me,Ze),u=r;u<=a;u++)for(var s=c;s<=l;s++)t.push(Me[Ze(u,s)].id);Y().isEqual(t,z.getSelection())||z.setSelect(t)}}Wt.current.isSelection=!1}),[Me]);(0,W.useOnClickOutside)([k],(function(){J()}),!1),(0,H.useEffect)((function(){var e=function(){Xt()};return window.addEventListener("mouseup",e),function(){window.removeEventListener("mouseup",e)}}),[Xt]),(0,H.useEffect)((function(){var e;(v!==dt&&qt(),v!==st)&&(null===(e=A.current)||void 0===e||e.handlePassGridActionGuide())}),[v]);var _t=function(e,t,n,r){Ue(e,t,n,r),qt()},$t=function(e,t,n,r){ze(e,t,n,r),qt()},en=F()(Be).call(Be,(function(e,t){return K().createElement(xC,{key:"tempalte_row_".concat(t),cells:e,isTemplate:!0,cellBackColor:"#F5F8FC"})})),tn=F()(Te).call(Te,(function(e,t){var n;return K().createElement(xC,{key:G()(n="".concat(e.row.id,"_row_")).call(n,t),cells:e.cells,row:e.row})})),nn=(0,H.useMemo)((function(){return{gridState:v,gridX:Ct,gridY:yt,gridBorderType:Xe,isEditorGridState:v===dt,removeGridSelection:qt}}),[v,Ct,yt,Xe,qt]);return K().createElement(K().Fragment,null,K().createElement(Xh.Group,{draggable:v!==dt,width:pt,height:mt,x:Ct,y:yt,scale:{x:1,y:1},onDragStart:Ft,onDragMove:Nt,onDragEnd:Gt,onMouseOver:St,onMouseOut:Bt,onContextMenu:Ut,onDblClick:function(e){v!==dt&&(p(dt),e.cancelBubble=!0)},onMouseDown:function(e){J(),v!==dt&&p("2"),v!==dt&&_e(e),function(e){if(0===e.evt.button||2===e.evt.button){var t=null==e?void 0:e.target;if(v===dt){var n,r,a,o=null===(n=t.id().split("_"))||void 0===n?void 0:n[0];if(o&&!yf(V.findControl(o)))return;var i=e.evt,l=i.layerX,c=i.layerY,u=ee(),s=u.x,d=u.y,f=Ud((null==ot?void 0:ot.y)||0,O),g=Je(c-yt-d-f,Qe,Fe),h=Pe(l-Ct-s);if(-1===g||-1===h)return;if(2===e.evt.button)return Wt.current.contextRowIndex=g,void(Wt.current.contextColumnIndex=h);zt(Wt),Wt.current.isSelection=!0;var p=Wt.current.selection;Wt.current.rowIndex=g,Wt.current.columnIndex=h,p.rowStart=Wt.current.rowIndex,p.columnStart=Wt.current.columnIndex,p.minRowNum=void 0,p.maxRowNum=void 0,p.minColumnNum=void 0,p.maxColumnNum=void 0,Wt.current.operationType="cell",Wt.current.operationMultiple=!1,null===(r=x.current)||void 0===r||r.visible(!1),null===(a=x.current)||void 0===a||a.draw(),Yt({reset:!0})}}}(e)},onMouseMove:function(e){if(Wt.current.isSelection){var t=e.evt,n=t.layerX,r=t.layerY,a=ee(),o=a.x,i=a.y,l=Ud((null==ot?void 0:ot.y)||0,O),c=Je(r-yt-i-l,Qe,Fe),u=Pe(n-Ct-o);if(-1===c||-1===u)return;var s=Wt.current.selection,d=c,f=u;if(d===s.rowEnd&&f===s.columnEnd)return;s.rowEnd=d,s.columnEnd=f;var g,h,v=s.rowStart,p=void 0===v?0:v,m=s.columnStart,C=void 0===m?0:m,y=s.rowEnd,D=void 0===y?0:y,E=s.columnEnd,w=void 0===E?0:E;if(p===D&&C===w)return null===(g=x.current)||void 0===g||g.visible(!1),void(null===(h=x.current)||void 0===h||h.draw());for(var k=Math.min(p,D),A=Math.min(C,w),b=Math.max(p,D),I=Math.max(C,w),B=k,S=b,M=A,L=I,R=k;R<=b;R++)for(var T=A;T<=I;T++){var F=Me[Ze(R,T)].mergeConfig;if(F){var N=F.rowStart,G=F.columnStart,Z=F.rowLength,Q=F.columnLength;B=Math.min(B,N),S=Math.max(S,N+Z-1),M=Math.min(M,G),L=Math.max(L,G+Q-1)}}(0,oe.c)(s,{minRowNum:B,minColumnNum:M,maxRowNum:S,maxColumnNum:L}),Kt(s)}},onMouseUp:Xt,ref:D,id:de,dragBoundFunc:Zt,name:G()(n=G()(r=G()(a="".concat("grid"," ")).call(a,ke," ")).call(r,Ae," ")).call(n,xe)},K().createElement(Xh.Rect,{width:pt,height:mt,scale:{x:1,y:1},onTransform:jt,onTransformEnd:Jt,ref:E,strokeEnabled:!1,name:G()(o=G()(i="".concat(de," ")).call(i,Ae," ")).call(o,xe)}),K().createElement(mn.Provider,{value:nn},en,Be.length>0&&K().createElement(Xh.Text,{key:"grid-template-text",name:"grid-template-text",listening:!1,verticalAlign:"middle",align:"center",text:(0,W.getLangMsg)("printd.components.key0041"),opacity:1,fill:"#E45D5D",fontSize:18,x:0,y:Ud(Qe,O),width:pt,height:Ud(Fe,O),onContextMenu:function(e){"Text"===e.currentTarget.getType()&&(e.cancelBubble=!0)}}),tn),K().createElement(Xh.Rect,{key:"grid-selection-rect",name:"grid-selection-rect ".concat(Se),ref:x,listening:!1,visible:!1,x:0,y:0,width:0,height:0,fill:"#99CCFF",strokeEnabled:!0,stroke:"#0E5FD8",strokeWidth:1,hitStrokeWidth:0,opacity:.4,strokeHitEnabled:!1}),R()(l=F()(c=m()(ct)).call(c,(function(e){var t,n=ct[e],r=n.id,a=n.visible,o=n.index,i=(n.data,"grid-selection-row-".concat(r));if(!ge[o])return null;var l=0;Ne>-1&&o>Ne&&Fe&&(l=Fe);var c={x:0,y:Ud(o&&of(kn()(ge).call(ge,0,o)),O)+Ud(l,O),width:Ud(of(ve),O),height:Ud(ge[o].rowHeight,O)};return a&&K().createElement(Xh.Rect,(0,oe.c)({key:i,name:G()(t="".concat(i," ")).call(t,Se),listening:!1,visible:a},c,{fill:"#99CCFF",strokeEnabled:!0,stroke:"#0E5FD8",strokeWidth:1,hitStrokeWidth:0,opacity:.4,strokeHitEnabled:!1}))}))).call(l,Boolean),R()(u=F()(s=m()(ht)).call(s,(function(e){var t,n=ht[e],r=n.id,a=n.visible,o=n.index,i=(n.data,"grid-selection-column-".concat(r));if(!ve[o])return null;var l={y:0,x:Ud(o&&of(kn()(ve).call(ve,0,o)),O),height:Ud(of(ge),O)+Ud(Fe,O),width:Ud(ve[o].columnWidth,O)};return a&&K().createElement(Xh.Rect,(0,oe.c)({key:i,name:G()(t="".concat(i," ")).call(t,Se),listening:!1,visible:a},l,{fill:"#99CCFF",strokeEnabled:!0,stroke:"#0E5FD8",strokeWidth:1,hitStrokeWidth:0,opacity:.4,strokeHitEnabled:!1}))}))).call(u,Boolean),K().createElement(Xh.Rect,{width:pt,height:mt,visible:!0,listening:!1,scale:{x:1,y:1},dash:At,ref:w,stroke:Et,dashEnabled:kt,strokeWidth:wt,shadowForStrokeEnabled:!1,strokeScaleEnabled:!1,hitStrokeWidth:0,strokeEnabled:!xt,name:G()(d=" ".concat(xe," ")).call(d,be)})),K().createElement(yp,Ot),v===dt&&K().createElement(EC,(f={gridType:we,maxLimitWidthChange:Ye,maxLimitHeightChange:qe,x:!0},(0,M.c)((0,M.c)((0,M.c)((0,M.c)((0,M.c)((0,M.c)((0,M.c)((0,M.c)((0,M.c)((0,M.c)(f,"x",q+Ct+(Rf(ot)?Ud(ot.x,O):0)),"y",X+yt+(Rf(ot)?Ud(ot.y,O):0)),"containerWidth",pt),"containerHeight",mt),"templateRowData",Be),"templateRowHeight",Fe),"scrollTop",se),"scrollLeft",ue),"rowTitleSelection",ct),"columnTitleSelection",ht),(0,M.c)((0,M.c)((0,M.c)((0,M.c)((0,M.c)((0,M.c)((0,M.c)((0,M.c)((0,M.c)((0,M.c)(f,"changeRow",_t),"tableTailId",at),"changeColumn",$t),"handleGridSelection",Yt),"onContextMenu",Ut),"portalRef",U),"scale",O),"rows",ge),"columns",ve),"subGridId",tt),(0,M.c)((0,M.c)((0,M.c)(f,"addSubDataGrid",nt),"gridState",v),"isShowAddSubGridBtn",rt))),ae&&K().createElement(CC,{x:q+Ct,y:X+yt,portalRef:U,ref:A}),v===dt&&B&&K().createElement(hC,(0,oe.c)({ref:k},Z,{gridSelectionContext:Wt.current,addRow:je,hideContextMenu:J,addColumn:Oe,mergeConfig:me,gridType:we,rowData:Te,deleteRow:We,deleteColumn:He,originCells:Me,getCellIdx:Ze,changeRow:_t,changeColumn:$t,addMerge:function(){Ke.apply(void 0,arguments),qt(!0)},removeMerge:function(){Ve.apply(void 0,arguments),qt()},calcSelectionCanMerge:Ht,rowCount:Le,columnCount:Re,rows:ge,subGridId:tt,selectionContext:z,dataContext:V})))}),(function(e,t){return pp(e,t)})),BC=IC,SC=function(e){var t=(0,H.useRef)(null);return!!_.isEqual(e,t.current)},MC=["key"];function LC(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function RC(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?O()(n=LC(Object(a),!0)).call(n,(function(t){(0,M.c)(e,t,a[t])})):A()?b()(e,A()(a)):O()(r=LC(Object(a))).call(r,(function(t){B()(e,t,w()(a,t))}))}return e}var TC=function(e){return"up"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"up")?e:e+1},FC=function(e,t){return rr(e.definition,(function(e){if(e.dataSource===t)return!0}))},NC=function(e,t,n,r,a,o,i){for(var l=t;l<=t+n-1;l++)for(var c=r;c<=r+a-1;c++){var u,s;if(null!==(u=o[i(l,c)])&&void 0!==u&&u.mergeConfig){var d,f=o[i(l,c)].mergeConfig,g=f.rowStart,h=f.columnStart;e[G()(d="".concat(g,"_")).call(d,h)]=void 0}e[G()(s="".concat(l,"_")).call(s,c)]=void 0}},GC=[],ZC=function(e){var t=e.data,n=(0,H.useContext)(Cn),r=(0,H.useContext)(vn),a=n.activedSelectId,o=t.mergeConfig,i=void 0===o?{}:o,l=t.id,c=t.fixedRowAtPage,u=t.fixedRowCount,s=void 0===u?1:u,d=t.height,f=t.width,g=t.x,h=t.y,v=t.borderType,p=t.subGridId,m=t.dataSource,C=(t.key,(0,Pn.c)(t,MC)),y=r.globalConfig,D=r.dataContext,E=Ef(t),w=D.getRootId(),k=D.findControl(w).language,A=(0,H.useState)((function(){var e;return E&&!c&&!!m&&!(null===(e=FC(y,m))||void 0===e||null===(e=e.SubEntryList)||void 0===e||!e.length)})),x=(0,S.c)(A,2),b=x[0],I=x[1];(0,H.useEffect)((function(){var e,t=E&&!c&&!!m&&!(null===(e=FC(y,m))||void 0===e||null===(e=e.SubEntryList)||void 0===e||!e.length);t!==b&&I(t)}),[b,m,y,qd(D),E,k,c]);var B=Sp(RC(RC({},r),{},{activedSelectId:a}),l),L=B.handleMouseDown,T=B.isSelected,N=B.isLastSelected,Z=r.scale,Q=void 0===Z?1:Z,j=r.selectionContext,P=r.setMessage,O=r.pageWidth,U=r.pageHeight,z=r.dataFactory,V=(D.getMeta(),Nf(D,l)),q=V.items,X=V.allItems,_=Hd(O-f-g,1)>=0?Hd(O-f-g,1):Bm(),$=Hd(U-d-h,1)>=0?Hd(U-d-h,1):Bm(),ee=z;W.console.log("KDgrid",q);var te=cf(q),ne=te.rows,re=void 0===ne?[]:ne,ae=te.columns,ie=void 0===ae?[]:ae,le=te.cells,ce=void 0===le?[]:le,ue=te.rowData,se=te.columnData,fe=SC(ce),ge=SC(t),he=SC(X),ve=(0,H.useMemo)((function(){return Ff(t)?F()(ce).call(ce,(function(e){var t=e.id;return R()(X).call(X,(function(e){return e.parentId===t}))})):GC}),[ge,fe,he]),pe=F()(ve).call(ve,(function(e){return e.id})),me=F()(ce).call(ce,(function(e){return e.id})),Ce=(0,H.useState)((function(){var e;return R()(e=j.getSelection()).call(e,(function(e){if(xn()(me).call(me,e)||xn()(pe).call(pe,e))return e}))})),ye=(0,S.c)(Ce,2),De=ye[0],Ee=ye[1];(0,H.useEffect)((function(){var e=j.addSelectChangeListener((function(){var e,t=R()(e=j.getSelection()).call(e,(function(e){if(xn()(me).call(me,e)||xn()(pe).call(pe,e))return e}));_d()(t).call(t)!==_d()(De).call(De)&&Ee(t)}));return function(){e&&e()}}),[De,pe,me]);var we=lf({columns:ie,rows:re,cells:ce,mergeConfig:i,templateRowCount:s,fixedRowAtPage:c,allItems:X,gridData:t}),ke=we.templateRowData,Ae=we.originCells,xe=we.rowData,be=we.templateRowHeight,Ie=we.templateRowIndex,Be=we.templateRowY,Se=we.rowCount,Me=we.columnCount,Le=J()(re),Re=J()(ie),Te=(0,H.useCallback)(nf({rows:re,columns:ie}),[Le,Re]),Fe=(0,H.useCallback)(function(e){return af(e)}(Me),[Me]),Ne=(0,H.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"up",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:wt,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5?arguments[5]:void 0,i=D.getData().items,c=e,u=t;!1===r&&(n===wt?(c=0,u="up"):n===kt&&(c=re.length-1,u="down"));for(var s=re[c],d=Y().cloneDeep(s).id,f=(0,M.c)((0,M.c)((0,M.c)((0,M.c)((0,M.c)({},wt,(0,W.getLangMsg)("printd.components.key0043")),Et,(0,W.getLangMsg)("printd.components.key0044")),kt,(0,W.getLangMsg)("printd.components.key0045")),At,(0,W.getLangMsg)("printd.components.key0046")),xt,(0,W.getLangMsg)("printd.components.key0047")),g=(Hn()(i).call(i,(function(e){return e.id===l})),[]),h=de()(i).call(i,(function(e){return e.id===d})),v=0;v<a;v++){var p=ee({type:"DataRow",parentId:l,transferData:{name:f[n],rowType:n}});g.push(p)}D.addControl((0,W.createAddAction)(g,{index:TC(h,u),rowIndex:c,direction:u})).then((function(e){if(o){var t=Hn()(e).call(e,(function(e){return"DataCell"===e.value[0].type})).value;j.setSelect(F()(t).call(t,(function(e){return e.id})))}}))}),[Le,l]),Ge=(0,H.useCallback)((function(e){var t=re[e],n=t.id;return"Detail"===t.rowType?(P((0,W.getLangMsg)("printd.components.key0048")),void W.console.error((0,W.getLangMsg)("printd.components.key0048"))):1===re.length?(0!==e&&W.console.error("unreachable error deleteRow action"),void D.deleteControl((0,W.createDeleteAction)(l)).then((function(){j.setSelect([])}))):(j.setSelect([l]),void D.deleteControl((0,W.createDeleteAction)(n)).then((function(){})))}),[Le,l]);W.console.log("maxLimitWidthChange max",[_,O,f,g],[$,U,d,h]);var Ze=(0,H.useCallback)((function(e){for(var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"up",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=ie[e],i=Y().cloneDeep(o),c=i.type,u=i.id,s=D.getData().items,d=(Hn()(s).call(s,(function(e){return e.id===l})),[]),f=de()(s).call(s,(function(e){return e.id===u})),g=0;g<a;g++)if(n=void 0,n=ee({type:c,parentId:l}),t=void d.push(n))return t.v;D.addControl((0,W.createAddAction)(d,{index:TC(f,r),columnIndex:e,direction:r}))}),[Re,l]),Qe=(0,H.useCallback)((function(e){var t=ie[e].id;if(1===ie.length)return 0!==e&&W.console.error("unreachable error deleteRow action"),void D.deleteControl((0,W.createDeleteAction)(l)).then((function(){j.setSelect([])}));j.setSelect([l]),D.deleteControl((0,W.createDeleteAction)(t)).then((function(){}))}),[Re,l]),je=(0,H.useCallback)((function(e){return function(t,n,r,a){var o="row"===e?re:ie,i=o[t].id,c="row"===e?"rowHeight":"columnWidth",u="row"===e?"height":"width",s=(D.findControl(l)[u],o[t][c]),d=D.getData().items,f=[],g="row"===e?0===$:0===_;if(a&&g&&t!==o.length-1&&g){var h="row"===e?3:5;if(a>0){var v=kn()(o).call(o,t+1),p=of(v),m=Math.min(Wd(a,Q),p-h*v.length),C=Y().cloneDeep(Hn()(d).call(d,(function(e){return e.id===o[t].id})));C[c]=Hd(C[c]+m,1),f.push([C.id,(0,M.c)({},c,C[c])]);for(var y=function(e){if(0===m)return 1;var t=Y().cloneDeep(Hn()(d).call(d,(function(t){return t.id===o[e].id})));t[c]-h>=m?(t[c]=Hd(t[c]-m,1),f.push([t.id,(0,M.c)({},c,t[c])]),m-=m):(m=Hd(m-t[c]+h,1),t[c]=h,f.push([t.id,(0,M.c)({},c,t[c])]))},E=t+1;E<o.length&&!y(E);E++);}else{var w=Y().cloneDeep(Hn()(d).call(d,(function(e){return e.id===o[t].id}))),k=Hd(Math.max(w[c]+Wd(a,Q),h),1),A=w[c]-k;w[c]=k,f.push([w.id,(0,M.c)({},c,w[c])]);var x=Y().cloneDeep(Hn()(d).call(d,(function(e){return e.id===o[t+1].id})));x[c]=Hd(x[c]+A,1),f.push([x.id,(0,M.c)({},c,x[c])])}D.batchUpdateControlPropertyValues((0,W.createUpdateAction)(f))}else{var b=Y().cloneDeep(Hn()(d).call(d,(function(e){return e.id===i})));b[c]=Hd(s+Wd(n,Q),1),f.push([b.id,(0,M.c)({},c,b[c])]),D.batchUpdateControlPropertyValues((0,W.createUpdateAction)(f))}}}),[l,Q,$,_,Le,Re]),Je=(0,H.useCallback)(je("row"),[je]),Pe=(0,H.useCallback)(je("column"),[je]),Oe=(0,H.useCallback)((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=0,a=Ud(t,Q),o=Ud(n,Q);W.console.log("getRowIndexlocateByPosition",e,re,te,q,D.getData());for(var i=de()(re).call(re,(function(e){return e.rowType===Et})),l=0;l<re.length;l++){var c=re[l].rowHeight,u=Ud(c,Q);if(a>-1&&o>0){if(e>a&&e<a+o)return-1;if(l>i){if(e>=r+o&&e<=u+r+o)return l}else if(e>=r&&e<=u+r)return l}else if(e>=r&&e<=u+r)return l;r+=u}return-1}),[Q,Le]),Ue=(0,H.useCallback)((function(e){var t=0;W.console.log("getRowIndexlocateByPosition getColumnIndexlocateByPosition",e);for(var n=0;n<ie.length;n++){var r=ie[n].columnWidth,a=Ud(r,Q);if(e>=t&&e<=a+t)return n;t+=a}return-1}),[Q,Re]),We=(0,H.useCallback)((function(e){var t,n=e.rowStart,r=e.rowLength,a=e.columnStart,o=e.columnLength,i=D.findControl(l),c=D.getData().items,u=Y().cloneDeep(i.mergeConfig||{});NC(u,n,r,a,o,Ae,Fe);var s={mergeConfig:(0,oe.c)({},u,(0,M.c)({},G()(t="".concat(n,"_")).call(t,a),{rowStart:n,rowLength:r,columnStart:a,columnLength:o}))};s.mergeConfig=Y().omitBy(s.mergeConfig,Y().isUndefined);var d=Y().cloneDeep(Hn()(c).call(c,(function(e){return e.id===l})));d.mergeConfig=s.mergeConfig;var f=Wf(d,c);D.batchUpdateControlPropertyValues((0,W.createUpdateAction)(G()(f).call(f,[[l,s]]))).then((function(){j.setSelect([Ae[Fe(n,a)].id])}))}),[xe,l,Ae,Fe]),ze=(0,H.useCallback)((function(e){var t=e.rowStart,n=e.rowLength,r=e.columnStart,a=e.columnLength,o=D.findControl(l),i=D.getData().items,c=Y().cloneDeep(o.mergeConfig||{});NC(c,t,n,r,a,Ae,Fe);var u=Y().cloneDeep(Hn()(i).call(i,(function(e){return e.id===l}))),s={mergeConfig:Y().omitBy((0,oe.c)({},o.mergeConfig,c),Y().isUndefined)};u.mergeConfig=s.mergeConfig;var d=Wf(u,i,!0);D.batchUpdateControlPropertyValues((0,W.createUpdateAction)(G()(d).call(d,[[l,s]])))}),[l,Ae]),He=(0,H.useCallback)((function(e){var t=Af(D).width,n=Hd(t/2,1),r=0===g&&t-f<1,a="right"===e?{x:r?n:Hd(g+f,1),y:h,width:r?n:Hd(t-g-f,1)}:{x:g,y:Hd(h+d,1),width:f},o=RC(RC({parentGridId:l},a),{},{subGridDirection:e}),i=ee({type:ft,parentId:D.getRootId(),transferData:o});D.addControl((0,W.createAddAction)(i,{transferData:o})).then((function(e){var t;W.console.log("addSubDataGrid",e),(null===(t=e[0])||void 0===t||null===(t=t.value)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.id)&&j.setSelect([e[0].value[0].id])}))}),[l,g,h,d,f]);return K().createElement(BC,(0,oe.c)({},e,te,C,{gridBorderType:v,templateRowData:ke,rowItemData:ue,columnItemData:se,addRow:Ne,originCells:Ae,rowCount:Se,columnCount:Me,rowData:xe,templateRowHeight:be,templateRowIndex:Ie,getCellPosition:Te,getCellIdx:Fe,templateRowY:Be,changeRow:Je,deleteRow:Ge,addColumn:Ze,changeColumn:Pe,deleteColumn:Qe,removeMerge:ze,addMerge:We,getRowIndexlocateByPosition:Oe,getColumnIndexlocateByPosition:Ue,maxLimitWidthChange:_,maxLimitHeightChange:$,handleMouseDown:L,isSelected:T,isLastSelected:N,cellItems:ve,subGridId:p,addSubDataGrid:He,isShowAddSubGridBtn:b,scale:Q,cellItemsSelection:De}))},QC=["x","y","width","height","border","name","id","childItems","isLastSelected","handleMouseDown","isSelected"];var jC=(0,H.memo)((0,H.forwardRef)((function(e,t){var n,r,a,o,i,l,c=(0,H.useContext)(vn),u=c.selectionContext,s=c.dataContext,d=c.pageWidth,f=(u.getSelection(),c.scale),g=void 0===f?1:f,h=c.contextStrokeEnabled,v=c.pixelRatio,p=(0,H.useRef)(null),m=(0,H.useRef)(null);W.console.log(c,c.refLineRef.searchRefLines);var C=e.x,y=void 0===C?0:C,D=e.y,E=void 0===D?0:D,w=e.width,k=e.height,A=e.border,x=e.name,b=e.id,I=e.childItems,B=void 0===I?[]:I,S=e.isLastSelected,M=e.handleMouseDown,L=e.isSelected,R=(0,Pn.c)(e,QC);lv({isSelected:L,refs:[p],pixelRatio:v,scale:g,currentProp:{x:y,y:E,width:w,height:k,name:x,id:b,childItems:B}});var T=np({x:y,y:E,id:b,width:w,height:k,border:A,scale:g,isSelected:L,contextStrokeEnabled:h}),N=T.stroke,Z=T.strokeWidth,j=(T.strokeEnabled,T.dashEnabled),J=T.defaultDash,P=T.customedStrokeElement,O=T.controlStrokeRef,U=fv({strokeEnabled:!0,shapeRef:m,isSelected:S,shapeRefStroke:N,controlStrokeRef:O}),z=U.onMouseOut,V=U.onMouseOver,Y=fp(k,g),q=fp(w,g),X=Y,_=Ud(y,g),$=Ud(E,g),ee=(0,H.useCallback)((function(e){var t=e.x,n=e.y;c.dataContext.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[b,{x:Wd(t,g),y:Wd(n,g)}]]))}),[b,g]),te=(0,H.useCallback)((function(e){e.x,e.y,e.scaleX,e.scaleY;var t,n,r=e.width,a=e.height,o=s.getRootId(),i=s.findControlByCondition((function(e){return e.parentId===b})),l=Q()(i).call(i,(function(e,t){var n=t.y,r=t.height;return n+r>e?n+r:e}),5),c=Wd(r,g);c!==d&&(c=d);var u=Wd(a,g);u<l?u=Math.min(l,80):u>80&&(u=80);var f=s.findControlByCondition((function(e){var t=e.y,n=e.type,r=e.parentId;return"Header"!==n&&"Footer"!==n&&r===o&&t<u})),h=F()(t=f||[]).call(t,(function(e){return[e.id,{y:u}]}));W.console.log("onTransformEndAction-------",u,h),s.batchUpdateControlPropertyValues((0,W.createUpdateAction)(G()(n=[[b,{x:0,y:0,width:c,height:u}]]).call(n,(0,yn.c)(h))))}),[b,g,s,d]),ne=nv({id:b,shapeRef:p,refLineRef:c.refLineRef,context:c,onDragEnd:ee,parentId:e.ParentId,scale:g}),re=(ne.onDragStart,ne.onDragMove,ne.onDragEnd,ne.dragBoundFunc,iv({id:b,shapeRef:m,refLineRef:c.refLineRef,onTransformEnd:te,context:c})),ae=re.onTransform,ie=re.onTransformEnd,le={stageRef:c.stageRef,rootControlRef:c.rootControlRef,selectedId:b,isSelected:L&&!S};return K().createElement(K().Fragment,null,K().createElement(Xh.Group,(0,oe.c)({height:X,width:q,clipX:0,clipY:0,clipWidth:q,clipHeight:X,onMouseOut:z,onMouseOver:V,ref:p},R,{x:_,y:$,draggable:!1,clipX:0,clipY:0,clipWidth:q,clipHeight:X,id:b,name:G()(n=G()(r="".concat(ke," ")).call(r,Ae," ")).call(n,xe)}),K().createElement(Xh.Text,{height:X,width:q,x:0,y:0,text:(0,W.getLangMsg)("printd.grid.key0033"),fill:"#E5E5E5",verticalAlign:"middle",align:"center",name:G()(a="".concat(xe," ")).call(a,Ie),fontSize:18,hitStrokeWidth:0}),K().createElement(Xh.Rect,{id:"".concat(b,"_rect"),height:X,width:q,name:G()(o=G()(i=G()(l="".concat(b," ")).call(l,Ae," ")).call(i,xe," ")).call(o,be),fill:"transparent",onTransform:ae,onTransformEnd:ie,onMouseDown:M,dashEnabled:j,dash:J,scale:{x:1,y:1},ref:m,stroke:N,strokeWidth:Z,shadowForStrokeEnabled:!1,strokeScaleEnabled:!1,hitStrokeWidth:0,alpha:1,strokeEnabled:!0}),B&&ky(B,!0),P),K().createElement(yp,(0,oe.c)({},le,{enabledAnchors:["bottom-center"]})))})),pp),JC=jC,PC=["key"];function OC(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function UC(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?O()(n=OC(Object(a),!0)).call(n,(function(t){(0,M.c)(e,t,a[t])})):A()?b()(e,A()(a)):O()(r=OC(Object(a))).call(r,(function(t){B()(e,t,w()(a,t))}))}return e}var WC=function(e){var t=(0,H.useContext)(vn),n=t.dataContext,r=t.scale,a=void 0===r?1:r,o=e.data,i=o.key,l=(0,Pn.c)(o,PC),c=o.id,u=(0,H.useContext)(vn),s=(0,H.useContext)(Cn).activedSelectId,d=Sp(UC(UC({},u),{},{activedSelectId:s}),c),f=d.handleMouseDown,g=d.isSelected,h=d.isLastSelected,v=n.findControlByCondition((function(e){return e.parentId===c}))||[];return K().createElement(JC,(0,oe.c)({},l,{dataKey:i,scale:a,childItems:v,isLastSelected:h,isSelected:g,handleMouseDown:f}))},zC=["x","y","width","height","border","name","id","childItems","isLastSelected","handleMouseDown","isSelected"],HC=(0,H.memo)((0,H.forwardRef)((function(e,t){var n,r,a,o,i,l=(0,H.useContext)(vn),c=l.selectionContext,u=l.dataContext,s=l.pageWidth,d=l.pageHeight,f=(c.getSelection(),l.scale),g=void 0===f?1:f,h=l.contextStrokeEnabled,v=l.pixelRatio,p=(0,H.useRef)(null),m=(0,H.useRef)(null);W.console.log(l,l.refLineRef.searchRefLines);var C=e.x,y=void 0===C?0:C,D=e.y,E=void 0===D?0:D,w=e.width,k=e.height,A=e.border,x=e.name,b=e.id,I=e.childItems,B=void 0===I?[]:I,S=e.isLastSelected,M=e.handleMouseDown,L=e.isSelected,T=(0,Pn.c)(e,zC);lv({isSelected:L,refs:[p],pixelRatio:v,scale:g,currentProp:{x:y,y:E,width:w,height:k,name:x,id:b,childItems:B}});var N=np({x:y,y:E,id:b,width:w,height:k,border:A,scale:g,isSelected:L,contextStrokeEnabled:h}),Z=N.stroke,j=N.strokeWidth,J=(N.strokeEnabled,N.dashEnabled),P=N.defaultDash,O=N.customedStrokeElement,U=N.controlStrokeRef,z=fv({strokeEnabled:!0,shapeRef:m,isSelected:S,shapeRefStroke:Z,controlStrokeRef:U}),V=z.onMouseOut,Y=z.onMouseOver,q=fp(k,g),X=fp(w,g),_=q,$=Ud(y,g),ee=Ud(E,g),te=(0,H.useCallback)((function(e){var t=e.x,n=e.y;l.dataContext.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[b,{x:Wd(t,g),y:Wd(n,g)}]]))}),[b,g]),ne=(0,H.useCallback)((function(e){e.x,e.y,e.scaleX,e.scaleY;var t,n,r,a=e.width,o=e.height,i=u.getRootId(),l=u.findControlByCondition((function(e){return e.parentId===b})),c=Wd(o,g),f=Wd(a,g),h=Q()(l).call(l,(function(e,t){var n=t.height;return n>e?n:e}),5);f!==s&&(f=s),c<=h?c=Math.min(h,80):c>80&&(c=80);var v=R()(t=F()(l).call(l,(function(e){var t=e.y,n=e.height,r=e.id;return t+n>c?[r,{y:c-n}]:null}))).call(t,Boolean),p=u.findControlByCondition((function(e){var t=e.y,n=e.type,r=e.height,a=e.parentId;return"Header"!==n&&"Footer"!==n&&a===i&&t+r>d-c})),m=F()(n=p||[]).call(n,(function(e){return[e.id,{y:d-c-e.height}]}));u.batchUpdateControlPropertyValues((0,W.createUpdateAction)(G()(r=[[b,{x:0,width:f,height:c}]]).call(r,(0,yn.c)(m),(0,yn.c)(v))))}),[b,s,d,u,g]),re=nv({id:b,shapeRef:p,refLineRef:l.refLineRef,context:l,onDragEnd:te,parentId:e.ParentId,scale:g}),ae=(re.onDragStart,re.onDragMove,re.onDragEnd,re.dragBoundFunc,iv({id:b,shapeRef:m,refLineRef:l.refLineRef,onTransformEnd:ne,context:l})),ie=ae.onTransform,le=ae.onTransformEnd,ce={dataContext:u,stageRef:l.stageRef,rootControlRef:l.rootControlRef,selectedId:b,isSelected:L&&!S};return K().createElement(K().Fragment,null,K().createElement(Xh.Group,(0,oe.c)({height:_,width:X,onMouseOut:V,onMouseOver:Y,ref:p},T,{x:$,y:ee,draggable:!1,clipX:0,clipY:0,clipWidth:X,clipHeight:_,id:b,name:G()(n=G()(r="".concat(ke," ")).call(r,Ae," ")).call(n,xe)}),K().createElement(Xh.Text,{height:_,width:X,x:0,y:0,text:(0,W.getLangMsg)("printd.grid.key0030"),fill:"#E5E5E5",verticalAlign:"middle",align:"center",name:"".concat(xe),fontSize:18,hitStrokeWidth:0}),K().createElement(Xh.Rect,{id:"".concat(b,"_rect"),x:0,y:0,height:_,width:X,name:G()(a=G()(o=G()(i="".concat(b," ")).call(i,Ae," ")).call(o,xe," ")).call(a,be),fill:"transparent",onTransform:ie,onTransformEnd:le,onMouseDown:M,dashEnabled:J,dash:P,scale:{x:1,y:1},ref:m,stroke:Z,strokeWidth:j,shadowForStrokeEnabled:!1,strokeScaleEnabled:!1,hitStrokeWidth:0,alpha:1,strokeEnabled:!0}),B&&ky(B,!0),O),K().createElement(yp,(0,oe.c)({},ce,{enabledAnchors:["top-center"]})))})),pp),KC=HC,VC=["key"];function YC(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function qC(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?O()(n=YC(Object(a),!0)).call(n,(function(t){(0,M.c)(e,t,a[t])})):A()?b()(e,A()(a)):O()(r=YC(Object(a))).call(r,(function(t){B()(e,t,w()(a,t))}))}return e}var XC=function(e){var t=(0,H.useContext)(vn),n=t.dataContext,r=t.scale,a=void 0===r?1:r,o=e.data,i=o.key,l=(0,Pn.c)(o,VC),c=o.id,u=(0,H.useContext)(vn),s=(0,H.useContext)(Cn).activedSelectId,d=Sp(qC(qC({},u),{},{activedSelectId:s}),c),f=d.handleMouseDown,g=d.isSelected,h=d.isLastSelected,v=n.findControlByCondition((function(e){return e.parentId===c}))||[];return K().createElement(KC,(0,oe.c)({},l,{dataKey:i,scale:a,childItems:v,isLastSelected:h,isSelected:g,handleMouseDown:f}))},_C=["x","y","width","height","border","name","id","isLastSelected","handleMouseDown","isSelected"],$C=(0,H.memo)((0,H.forwardRef)((function(e,t){var n,r,a,o,i,l,c=(0,H.useContext)(vn),u=c.scale,s=void 0===u?1:u,d=c.contextStrokeEnabled,f=c.pixelRatio,g=(0,H.useContext)(mn),h=g.gridState,v=g.isEditorGridState,p=void 0===v||v,m=gp(),C=(0,H.useRef)(null),y=(0,H.useRef)(null);W.console.log(c,c.refLineRef.searchRefLines);var D=e.x,E=void 0===D?0:D,w=e.y,k=void 0===w?0:w,A=e.width,x=e.height,b=e.border,I=e.name,B=e.id,S=e.isLastSelected,M=e.handleMouseDown,L=e.isSelected,R=(0,Pn.c)(e,_C);lv({isSelected:L,refs:[C],pixelRatio:f,scale:s,currentProp:{x:E,y:k,width:A,height:x,name:I,id:B}});var T=np({x:E,y:k,id:B,width:A,height:x,border:b,scale:s,isSelected:L,contextStrokeEnabled:d}),F=T.stroke,N=T.strokeWidth,Z=T.strokeEnabled,Q=T.dashEnabled,j=T.defaultDash,J=T.customedStrokeElement,P=T.controlStrokeRef,O=fv({strokeEnabled:Z,shapeRef:y,isSelected:S,shapeRefStroke:F,controlStrokeRef:P}),U=O.onMouseOut,z=O.onMouseOver,V=fp(x,s),Y=fp(A,s),q=V,X=(Ud(7,s),Ud(E,s)),_=Ud(k,s),$=dp(e,c),ee=hv({id:B,refLineRef:c.refLineRef}),te=(0,H.useCallback)((function(e){var t=e.x,n=e.y,r=(e.scaleX,e.scaleY,e.width),a=e.height;c.dataContext.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[B,{x:Wd(t,s),y:Wd(n,s),width:Wd(r,s),height:Wd(a,s)}]]))}),[B,s]),ne=nv({id:B,shapeRef:C,refLineRef:c.refLineRef,context:c,onDragEnd:$,onDragMove:ee,parentId:e.parentId,scale:s}),re=ne.onDragStart,ae=ne.onDragMove,ie=ne.onDragEnd,le=ne.dragBoundFunc,ce=iv({id:B,shapeRef:y,refLineRef:c.refLineRef,onTransformEnd:te,context:c}),ue=ce.onTransform,se=ce.onTransformEnd,de={stageRef:c.stageRef,rootControlRef:c.rootControlRef,selectedId:B,isSelected:L&&!S};return K().createElement(K().Fragment,null,K().createElement(Xh.Group,(0,oe.c)({height:q,width:Y,clipX:0,clipY:0,clipWidth:Y,clipHeight:q,onDragStart:re,onDragMove:ae,onDragEnd:ie,onMouseOut:U,onMouseOver:z,onMouseDown:M,onDblClick:function(e){m(e,h,M)},ref:C},R,{x:X,y:_,draggable:p,dragBoundFunc:le,clipX:0,clipY:0,clipWidth:Y,clipHeight:q,id:B,name:G()(n=G()(r="".concat(ke," ")).call(r,Ae," ")).call(n,xe)}),K().createElement(Xh.Rect,{width:Y,height:q,x:0,y:0,fill:"#f2f6ff"}),K().createElement(Xh.Text,{height:q,width:Y,x:0,y:0,text:(0,W.getLangMsg)("printd.components.key0062"),fill:"#212121",verticalAlign:"middle",align:"center",name:G()(a="".concat(xe," ")).call(a,Ie),fontSize:20,fontStyle:"bold",fontFamily:"Arial",hitStrokeWidth:0}),K().createElement(Xh.Rect,{id:"".concat(B,"_rect"),height:q,width:Y,name:G()(o=G()(i=G()(l="".concat(B," ")).call(l,Ae," ")).call(i,xe," ")).call(o,be),fill:"transparent",onTransform:ue,onTransformEnd:se,dashEnabled:Q,dash:j,scale:{x:1,y:1},ref:y,stroke:F,strokeWidth:N,shadowForStrokeEnabled:!1,strokeScaleEnabled:!1,hitStrokeWidth:0,alpha:1,strokeEnabled:!0}),J),K().createElement(yp,de))})),pp),ey=$C,ty=["key"];function ny(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function ry(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?O()(n=ny(Object(a),!0)).call(n,(function(t){(0,M.c)(e,t,a[t])})):A()?b()(e,A()(a)):O()(r=ny(Object(a))).call(r,(function(t){B()(e,t,w()(a,t))}))}return e}var ay=function(e){var t=e.data,n=t.key,r=(0,Pn.c)(t,ty),a=(0,H.useContext)(vn),o=(0,H.useContext)(Cn),i=(0,H.useContext)(mn).gridState,l=t.id,c=o.activedSelectId,u=Sp(ry(ry({},a),{},{beforeMouseDown:Mp(i),activedSelectId:c}),l),s=u.handleMouseDown,d=u.isSelected,f=u.isLastSelected;return K().createElement(ey,(0,oe.c)({},r,{dataKey:n,isLastSelected:f,isSelected:d,handleMouseDown:s}))},oy=["x","y","width","height","border","name","id","childItems","isLastSelected","handleMouseDown","isSelected","activedSelectId"],iy=(0,H.memo)((0,H.forwardRef)((function(e,t){var n,r,a,o,i,l=(0,H.useContext)(vn),c=l.selectionContext,u=l.dataContext,s=l.pageWidth,d=l.pageHeight,f=(c.getSelection(),l.scale),g=void 0===f?1:f,h=l.contextStrokeEnabled,v=l.pixelRatio,p=(0,H.useRef)(null),m=(0,H.useRef)(null);W.console.log(l,l.refLineRef.searchRefLines);var C=e.x,y=void 0===C?0:C,D=e.y,E=void 0===D?0:D,w=e.width,k=e.height,A=e.border,x=e.name,b=e.id,I=e.childItems,B=void 0===I?[]:I,S=e.isLastSelected,M=e.handleMouseDown,L=e.isSelected,R=e.activedSelectId,T=(0,Pn.c)(e,oy);lv({isSelected:L,refs:[p],pixelRatio:v,scale:g,currentProp:{x:y,y:E,width:w,height:k,name:x,id:b,childItems:B}});var F=np({x:y,y:E,id:b,width:w,height:k,border:A,scale:g,isSelected:L,contextStrokeEnabled:h}),N=F.stroke,Z=F.strokeWidth,j=(F.strokeEnabled,F.dashEnabled),J=F.defaultDash,P=F.customedStrokeElement,O=F.controlStrokeRef,U=fv({strokeEnabled:!0,shapeRef:m,isSelected:S,shapeRefStroke:N,controlStrokeRef:O}),z=U.onMouseOut,V=U.onMouseOver,Y=fp(k,g),q=fp(w,g),X=Y,_=Ud(y,g),$=Ud(E,g),ee=dp(e,l),te=(0,H.useCallback)((function(e){var t=e.x,n=(e.y,e.scaleX,e.scaleY,e.width),r=e.height,a=(u.getRootId(),u.findControl(b)),o=u.findControl(a.parentGridId),i=u.findControlByCondition((function(e){return e.parentId===b})),l=Wd(r,g),c=Wd(n,g),s=Q()(i).call(i,(function(e,t){var n=t.height;return n>e?n:e}),5);l<=s&&(l=Math.min(s,100)),o.width<c&&(c=o.width),u.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[b,{x:Wd(t),width:c,height:l}]]))}),[b,s,d,u,g]),ne=nv({id:b,shapeRef:p,refLineRef:l.refLineRef,context:l,onDragEnd:ee,parentId:e.ParentId,scale:g}),re=ne.onDragStart,ae=ne.onDragMove,ie=ne.onDragEnd,le=ne.dragBoundFunc,ce=iv({id:b,shapeRef:m,refLineRef:l.refLineRef,onTransformEnd:te,context:l}),ue=ce.onTransform,se=ce.onTransformEnd,de={stageRef:l.stageRef,rootControlRef:l.rootControlRef,selectedId:b,isSelected:L&&!S};return K().createElement(K().Fragment,null,K().createElement(Xh.Group,(0,oe.c)({height:X,width:q,onDragStart:re,onDragMove:ae,onDragEnd:ie,onMouseOut:z,onMouseOver:V,ref:p},T,{x:_,y:$,draggable:"LayoutCell"!==u.findControl(R).type,id:b,dragBoundFunc:le,name:G()(n=G()(r="".concat(ke," ")).call(r,Ae," ")).call(n,xe)}),K().createElement(Xh.Text,{height:X,width:q,x:0,y:0,text:(0,W.getLangMsg)("printd.components.key0002"),fill:"#E5E5E5",verticalAlign:"middle",align:"center",name:"".concat(xe),fontSize:18,hitStrokeWidth:0}),K().createElement(Xh.Rect,{id:"".concat(b,"_rect"),x:0,y:0,height:X,width:q,name:G()(a=G()(o=G()(i="".concat(b," ")).call(i,Ae," ")).call(o,xe," ")).call(a,be),fill:"transparent",onTransform:ue,onTransformEnd:se,onMouseDown:M,dashEnabled:j,dash:J,scale:{x:1,y:1},ref:m,stroke:N,strokeWidth:Z,shadowForStrokeEnabled:!1,strokeScaleEnabled:!1,hitStrokeWidth:0,alpha:1,strokeEnabled:!0}),B&&ky(B,!0),P),K().createElement(yp,(0,oe.c)({},de,{enabledAnchors:["top-center"]})))})),pp),ly=iy,cy=["key"];function uy(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function sy(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?O()(n=uy(Object(a),!0)).call(n,(function(t){(0,M.c)(e,t,a[t])})):A()?b()(e,A()(a)):O()(r=uy(Object(a))).call(r,(function(t){B()(e,t,w()(a,t))}))}return e}var dy=function(e){var t=(0,H.useContext)(vn),n=t.dataContext,r=t.scale,a=void 0===r?1:r,o=e.data,i=o.key,l=(0,Pn.c)(o,cy),c=o.id,u=(0,H.useContext)(vn),s=(0,H.useContext)(Cn).activedSelectId,d=Sp(sy(sy({},u),{},{activedSelectId:s}),c),f=d.handleMouseDown,g=d.isSelected,h=d.isLastSelected,v=n.findControlByCondition((function(e){return e.parentId===c}))||[];return K().createElement(ly,(0,oe.c)({},l,{dataKey:i,scale:a,childItems:v,activedSelectId:s,isLastSelected:h,isSelected:g,handleMouseDown:f}))},fy=["x","y","width","height","border","name","id","isLastSelected","handleMouseDown","isSelected","direction"],gy=(0,H.memo)((0,H.forwardRef)((function(e,t){var n,r,a,o,i,l,c,u=(0,H.useContext)(vn),s=u.scale,d=void 0===s?1:s,f=(u.contextStrokeEnabled,u.pixelRatio),g=u.setMessage,h=(0,H.useContext)(mn),v=h.gridState,p=h.isEditorGridState,m=void 0===p||p,C=gp(),y=(0,H.useRef)(null),D=(0,H.useRef)(null),E=e.x,w=void 0===E?0:E,k=e.y,A=void 0===k?0:k,x=e.width,b=e.height,I=e.border,B=e.name,S=e.id,M=e.isLastSelected,L=e.handleMouseDown,T=e.isSelected,F=e.direction,N=(0,Pn.c)(e,fy);lv({isSelected:T,refs:[y],pixelRatio:f,scale:d,currentProp:{x:w,y:A,width:x,height:b,name:B,id:S}});var Z,Q=np({x:w,y:A,id:S,width:x,height:b,border:I,scale:d,isSelected:T,contextStrokeEnabled:!1}),j=Q.stroke,J=Q.strokeWidth,P=Q.strokeEnabled,O=Q.dashEnabled,U=Q.defaultDash,z=(Q.customedStrokeElement,Q.controlStrokeRef),V=fv({strokeEnabled:P,shapeRef:D,isSelected:M,shapeRefStroke:j,controlStrokeRef:z}),Y=V.onMouseOut,q=V.onMouseOver,X=fp(b,d,2),_=fp(x,d,2),$=X,ee=(Ud(7,d),Ud(w,d)),te=Ud(A,d),ne=dp(e,u),re=hv({id:S,refLineRef:u.refLineRef}),ae=(0,H.useCallback)((function(e){var t=e.x,n=e.y,r=(e.scaleX,e.scaleY,e.width),a=e.height,o=Wd(t,d),i=Wd(n,d),l=Wd(r,d,2),c=Wd(a,d,2),s={x:o,y:i,width:l,height:c};"H"===F&&c>3&&(s.height=3,delete s.y,g((0,W.getLangMsg)("printd.grid.key0130"))),"V"===F&&l>3&&(s.width=3,delete s.x,g((0,W.getLangMsg)("printd.grid.key0130"))),u.dataContext.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[S,s]]))}),[S,d,F]),ie=nv({id:S,shapeRef:y,refLineRef:u.refLineRef,context:u,onDragEnd:ne,onDragMove:re,parentId:e.parentId,scale:d}),le=ie.onDragStart,ce=ie.onDragMove,se=ie.onDragEnd,de=ie.dragBoundFunc,fe=iv({id:S,shapeRef:D,refLineRef:u.refLineRef,onTransformEnd:ae,context:u}),ge=fe.onTransform,he=fe.onTransformEnd,ve=(u.stageRef,u.rootControlRef,I&&R()(n=ue()(I.color)).call(n,(function(e){return e}))[0]),pe=I&&R()(r=ue()(I.style)).call(r,(function(e){return e}))[0];return"dotted"===pe?Z=[2,2]:"dashed"===pe&&(Z=[4,4]),K().createElement(K().Fragment,null,K().createElement(Xh.Group,(0,oe.c)({height:$,width:_,clipX:-10,clipY:-10,clipWidth:_+20,clipHeight:$+20,onDragStart:le,onDragMove:ce,onDragEnd:se,onMouseOut:Y,onMouseOver:q,onMouseDown:L,onDblClick:function(e){if(C(e,v,L))return null},ref:y},N,{x:ee,y:te,draggable:m,dragBoundFunc:de,id:S,name:G()(a=G()(o="".concat(ke," ")).call(o,Ae," ")).call(a,xe)}),K().createElement(Xh.Line,{x:0,y:0,stroke:ve||"#000",strokeWidth:"H"===F?$:_,points:"H"===F?[0,$/2,_,$/2]:[_/2,$,_/2,0],dash:Z,hitStrokeWidth:20}),K().createElement(Xh.Rect,{id:"".concat(S,"_rect"),height:$,width:_,name:G()(i=G()(l=G()(c="".concat(S," ")).call(c,Ae," ")).call(l,xe," ")).call(i,be),fill:"transparent",onTransform:ge,onTransformEnd:he,dashEnabled:O,dash:U,scale:{x:1,y:1},ref:D,stroke:j,strokeWidth:J,shadowForStrokeEnabled:!1,strokeScaleEnabled:!1,alpha:1,strokeEnabled:!0})))})),pp),hy=gy,vy=["key"];function py(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function my(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?O()(n=py(Object(a),!0)).call(n,(function(t){(0,M.c)(e,t,a[t])})):A()?b()(e,A()(a)):O()(r=py(Object(a))).call(r,(function(t){B()(e,t,w()(a,t))}))}return e}var Cy={Text:Fp,RichText:ay,Image:Pp,Barcode:tm,QRCode:Vp,PrintTemplate:uC,PrintForm:uC,Paper:uC,DataGrid:ZC,CardGrid:ZC,LayoutGrid:ZC,Header:WC,Footer:XC,SubDataGrid:ZC,TableTail:dy,Line:function(e){var t=e.data,n=t.key,r=(0,Pn.c)(t,vy),a=(0,H.useContext)(vn),o=(0,H.useContext)(Cn),i=(0,H.useContext)(mn).gridState,l=t.id,c=o.activedSelectId,u=Sp(my(my({},a),{},{beforeMouseDown:Mp(i),activedSelectId:c}),l),s=u.handleMouseDown,d=u.isSelected,f=u.isLastSelected;return K().createElement(hy,(0,oe.c)({},r,{dataKey:n,isLastSelected:f,isSelected:d,handleMouseDown:s}))}};m()(Cy);function yy(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}var Dy=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=(arguments.length>4?arguments[4]:void 0)||e.type,a=Cy[r];if(!a)return null;var o={key:e.id||e.key};return K().createElement(a,function(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?O()(n=yy(Object(a),!0)).call(n,(function(t){(0,M.c)(e,t,a[t])})):A()?b()(e,A()(a)):O()(r=yy(Object(a))).call(r,(function(t){B()(e,t,w()(a,t))}))}return e}({data:e,appState:n,children:t},o))};function Ey(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function wy(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?O()(n=Ey(Object(a),!0)).call(n,(function(t){(0,M.c)(e,t,a[t])})):A()?b()(e,A()(a)):O()(r=Ey(Object(a))).call(r,(function(t){B()(e,t,w()(a,t))}))}return e}var ky=function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Y().isEmpty(n))return null;if(Jn()(n))return F()(n).call(n,(function(t){return e(t,!0)}));if(Df(n))return Dy(wy(wy({},n),a));var o=n.items&&!Y().isEmpty(n.items)?F()(t=ue()(n.items)).call(t,(function(t){return e(t,!0)})):[];return Dy(n,o,r,a)},Ay=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e},r=(t=t||{}).children,a=t.parent,o=t.id,i={},l={};if(r=r||"children",a=a||"parent",Y().isObject(e)||Y().isArray(e)){for(var c in e)Y().has(e,c)&&e[c]&&(i[e[c][o]]=e[c]);for(var u in i)if(Y().has(i,u))if(i[u][a]){var s,d=i[u][a];if(i[d]&&!i[d][r]&&(i[d][r]={}),i[d]&&!i[d][a])i[d]&&d!==i[u][o]&&(i[d][r][i[u][o]]=n(i[u]));else i[d]&&d!==i[u][o]&&i[d][a]&&-1==En()(s=i[d][a]).call(s,i[u][o])&&(i[d][r][i[u][o]]=n(i[u]))}else l[i[u][o]]=i[u];return l}},xy=["type"];function by(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}var Iy=(0,H.memo)((function(e){var t=(0,H.useContext)(W.DataContext),n=(0,H.useContext)(W.SelectionContext),r=(0,W.useActivedSelectedId)({dataContext:t,selectionContext:n}).activedSelectId,a=(0,H.useContext)(pn),o=a.meta,i=void 0===o?[]:o,l=a.definition,c=void 0===l?{}:l,u=a.pagesManageRef,s=a.pageManage,d=a.globalConfig,f=a.scaleRef,g=a.asistantBorderRef,h=(0,H.useState)(0)[1],v=(0,H.useRef)(null),p=(0,H.useRef)(!1);(0,H.useEffect)((function(){var e=t.addDataChangeListener((function(e){var t=e.type,n=(0,Pn.c)(e,xy);W.console.log(t,n),h((function(e){return e+1}))}));return function(){e&&e()}}),[]);var m=(0,H.useMemo)((function(){var e=t.getData();return ue()(Ay(JSON.parse(J()(e)).items,{children:"items",parent:"parentId",id:"id"}))[0]}),[t.getData()]);W.console.log("props",m);var C=(0,H.useContext)(W.ConfigContext),y=(0,C.getPrefixCls)(C.prefixCls),D=(0,H.useRef)(null),E=(0,H.useRef)(null),k=sr(),x=(0,S.c)(k,2),I=(x[0],x[1]),L=I.width,R=I.height,T=(t.findControl(t.getRootId()).language,"".concat(y,"-top-view-main"));return K().createElement(K().Fragment,null,K().createElement(W.ViewHeader,{content:K().createElement("div",{className:"".concat(y,"-main-view-toolbar"),id:"kdesigner-top-view-main"},K().createElement(_v,(0,oe.c)({},e,{ref:v,onChangeProperty:function(){},context:{dataContext:t,selectionContext:n,activedSelectId:r,canvasRef:D,globalConfig:d,scaleRef:f,asistantBorderRef:g,isMultiKeyActiveWhenSelectedRef:p}}))),portalId:T}),K().createElement("div",{className:"".concat(y,"-paper"),ref:E},ky(m,!1,function(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?O()(n=by(Object(a),!0)).call(n,(function(t){(0,M.c)(e,t,a[t])})):A()?b()(e,A()(a)):O()(r=by(Object(a))).call(r,(function(t){B()(e,t,w()(a,t))}))}return e}({width:L,height:R,navToolRef:v,canvasRef:D,meta:i,definition:c,activedSelectId:r,dataContext:t,isMultiKeyActiveWhenSelectedRef:p},e))),K().createElement("div",{className:"".concat(y,"-pages-manage"),ref:u},s))}));Iy.tabKey="PrintDesignerCore",Iy.getTabName=function(){return(0,W.getLangMsg)("printd.grid.key0109")};var By=Iy,Sy=K().memo((function(e){e.meta,e.data;var t=(0,H.useContext)(W.DataContext),n=(0,H.useContext)(W.SelectionContext),r=t.getRootId(),a=(0,W.useActivedSelectedId)({dataContext:t,selectionContext:n}).activedSelectId,o=(0,H.useState)(0)[1];return(0,H.useEffect)((function(){var e=t.addDataChangeListener((function(e){e.type;o((function(e){return e+1}))}));return function(){e&&e()}}),[]),K().createElement(W.PropertyView,(0,oe.c)({},e,{id:r,key:a||r}))}));Sy.tabKey="PrintSetting",Sy.getTabName=function(){return(0,W.getLangMsg)("printd.grid.key0107")};var My=Sy,Ly=function(e){var t=e.meta,n=void 0===t?{}:t,r=(0,H.useContext)(W.DataContext),a=(0,H.useContext)(W.SelectionContext),o=a.getSelection(),i=(0,H.useContext)(W.GlobalConfigContext),l=r.findControlByCondition((function(e){return xn()(o).call(o,e.id)})),c=function(e,t){var n=(0,yn.c)(new(ua())(F()(t).call(t,(function(e){return e.rowId||""}))));if(1!==n.length)return!1;var r=n[0];return!!r&&e.findControlByCondition((function(e){return e.rowId===r})).length===t.length}(r,l),u=c?l[0].rowId:"",s=(0,H.useContext)(W.DataFactoryContext).modelFactory,d=(0,W.useSelectModel)({dataContext:r,selectionContext:a,solidId:u,meta:n,activedSelectId:"",modelFactory:s,globalConfig:i}),f=d.modelData,g=d.field,h=(0,H.useContext)(W.ConfigContext),v=(0,h.getPrefixCls)(h.prefixCls,"right-view"),p=function(e,t,n,r){if(!e)return r;var a=n.findControl(t),o=a.parentId,i=a.rowType,l=n.findControl(o).type,c=!!n.findControlByCondition((function(e){return Mf(e)&&e.parentId===o})).length;return"Detail"!==i||!c&&"SubDataGrid"!==l?r:R()(r).call(r,(function(e){return"DataRowGroup"!==e.Id}))}(c,u,r,f);return c&&K().createElement(W.PropertyViewItemGroup,{modelData:p,PropertyViewItemRender:W.PropertyViewItem,className:v,field:g})},Ry=K().memo((function(e){var t=e.meta,n=void 0===t?{}:t,r=(0,H.useContext)(W.DataContext),a=(0,H.useContext)(W.SelectionContext),o=(0,H.useState)(0)[1];return(0,H.useEffect)((function(){var e=a.addSelectChangeListener((function(){o((function(e){return e+1}))})),t=r.addDataChangeListener((function(e){e.type;o((function(e){return e+1}))}));return function(){t&&t(),e&&e()}}),[]),K().createElement(W.PropertyView,{meta:n},K().createElement(Ly,{meta:n}))}));Ry.tabKey="PropertyView",Ry.getTabName=function(){return(0,W.getLangMsg)("printd.grid.key0108")};var Ty=Ry;function Fy(e,t){var n=m()(e);if(D()){var r=D()(e);t&&(r=R()(r).call(r,(function(t){return w()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ny(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?O()(n=Fy(Object(a),!0)).call(n,(function(t){(0,M.c)(e,t,a[t])})):A()?b()(e,A()(a)):O()(r=Fy(Object(a))).call(r,(function(t){B()(e,t,w()(a,t))}))}return e}var Gy=function e(t,n,r,a,o,i){var l;return null==t?void 0:R()(l=F()(t).call(t,(function(t){var l=t.Name,c=(t.Type,t.Items),u=t.Key,s=t.DsType,d=(t.Tag,t.IsDs),f=a,g=o;if(s&&(g=s),d||r)f=u;else if(!r&&!d){var h;f=f?G()(h="".concat(f,".")).call(h,u):u}var v,p=n,m=i||l;d&&(m=l,p=n?G()(v="".concat(n,".")).call(v,u):u);var C=c?{Items:e(c,p,d,f,g,m)}:{};return Ny(Ny({dataSource:p,dataSourceText:m,bindField:f,dsTypeKey:o},t),C)}))).call(l,Boolean)},Zy=function(){},Qy=(0,H.memo)((0,H.forwardRef)((function(e,t){var n=Zh(),r=e.data,a=void 0===r?{}:r,o=e.meta,i=void 0===o?{}:o,l=e.onData,c=e.showMessage,u=void 0===c?function(e){W.console.log("showMessage-------",e)}:c,s=e.definition,d=e.handleOpenCustomDsModal,f=void 0===d?Zy:d,g=e.handleOpenRefDsModal,h=void 0===g?Zy:g,v=e.handleChangePLang,p=void 0===v?Zy:v,m=e.pageManage,C=e.scaleRef,y=e.asistantBorderRef,D=e.dataRef,E=e.uploadImageUrl,w=void 0===E?Gh("api/print/upload.do",[[hn,n],["printtplid",""]]):E,k=e.previewImageUrl,A=void 0===k?Gh("api/print/download.do",[[hn,n],["rcId",""]]):k,x=e.handlePassGridActionGuide,b=void 0===x?Zy:x,I=e.handlePassPrintActionGuide,B=void 0===I?Zy:I,M=e.handleOpenDGridSortSettingEdModal,L=void 0===M?Zy:M,T=e.handleOpenDGridFilterSettingEdModal,N=void 0===T?Zy:T,Z=e.invokePrintDesignerCustomEvent,j=void 0===Z?Zy:Z,P=e.handleChangeFileName,z=e.isFirstUseGrid,V=e.isFirstVisit,Y=e.expressions,q=void 0===Y?[]:Y,X=e.getLangMsg,_="print-designer",$=(0,H.useRef)([]),ee=(0,H.useMemo)((function(){return Gy(s)}),[s]),te=(0,H.useState)(!1),ne=(0,S.c)(te,2),re=ne[0],oe=ne[1],ie=i.FontMapping;if(ie){var le,ce,ue=(null===(le=ie[0])||void 0===le?void 0:le.Code)||(null===(ce=ie[0])||void 0===ce?void 0:ce.Name);ue&&function(e){Kt!==e&&(Kt=e)}(ue),function(e){Vt!==e&&(Vt=e)}(Q()(ie).call(ie,(function(e,t){var n=t.Name,r=t.Code;return e[n]=r,e}),{}))}var se=(0,H.useCallback)((function(){W.eventBus.emit(od,ee)}),[ee]),de=(0,H.useCallback)((function(e){W.eventBus.emit(e,ee)}),[ee]),fe=function(e,t){try{var n,r,a=e[0],o=null===(n=ye.current)||void 0===n?void 0:n.dataContext;if(!a)return;r="filterSetting"===t?JSON.parse(a.condition).filterRow.length?{filterSettingValue:J()(a),filterSettingText:X("printd.grid.key0001")}:{filterSettingValue:"",filterSettingText:""}:"fileName"===t?{fileName:a.fileNameK}:{sortSettings:a.sortSettings,sortSettingsText:(l=a.sortSettings,null===(c=F()(l).call(l,(function(e){return e.bindName||e.bindField})))||void 0===c?void 0:c.join(";"))};var i=[[a.dataGridId||a.id,r]];o.batchUpdateControlPropertyValues((0,W.createUpdateAction)(i))}catch(e){W.console.error(e)}var l,c};(0,H.useImperativeHandle)(t,(function(){var e,t;return{pagesManageRef:Ce,attrActions:null===(e=ye.current)||void 0===e?void 0:e.attrActions,resetPatches:null===(t=ye.current)||void 0===t||null===(t=t.dataContext)||void 0===t?void 0:t.resetPatches,beforeSave:se,setProperty:fe}}));var ge=(0,H.useRef)({}),he=(0,H.useCallback)((function(e){switch(e){case"main":return{main:By};case"left":return{control:qh,definition:Oh};case"right":return{property:Ty,rootProperty:My};default:return{}}}),[]),ve=(0,H.useCallback)((function(e){var t=R()(e).call(e,(function(e){return"CommonGroup"===e.Id}))||[];return F()(t).call(t,(function(e){return Ny(Ny({},e),{},{Visible:!0})}))}),[]),me=(0,H.useMemo)((function(){return{definition:ee,getViews:he,getPropertyEditors:Qg,getCustomActions:ae,getValue:sf,preHandle:Fh,filterProperty:nh,activateTab:jg,handleOpenCustomDsModal:f,handleOpenRefDsModal:h,handleChangePLang:p,handleOpenDGridSortSettingEdModal:L,handleOpenDGridFilterSettingEdModal:N,handleChangeFileName:P,invokePrintDesignerCustomEvent:j,showMessage:u,getOutlineItemIcon:zg,enableSearch:!1,positionRecordsRef:ge,dataRef:D||$,uploadImageUrl:w,previewImageUrl:A,keywordMapping:{id:"id",type:"type",name:"name",key:"key",parentId:"parentId",items:"items"},enableDiffDefaultData:!1,isRootPropertyEmpty:!0,commonPropertyHandler:ve,getLangMsg:X}}),[ee,he,Qg,ae,sf,jg,f,h,L,N,P,j,p,u,zg,D,w,A]);W.console.log(e,me);var Ce=(0,H.useRef)(null);(0,H.useEffect)((function(){var e=function(e,t){p(e,t)};return W.eventBus.on("change-lang",e),function(){W.eventBus.off("change-lang",e)}}),[p]);var ye=(0,H.useRef)(null),De=(0,H.useCallback)((function(e){u&&u(e)}),[]),we=(0,H.useMemo)((function(){return{prefixCls:_,definition:ee,setMessage:De,meta:i,pagesManageRef:Ce,globalConfig:me,pageManage:m,scaleRef:C,asistantBorderRef:y,handlePassGridActionGuide:b,isFirstUseGrid:z,expressions:q,beforeSave:se,onValid:de}}),[ee,u,i,me,m,De,b,z,q,se,de]),ke=(0,H.useCallback)((function(e,t){var n=(e||{}).items,r=void 0===n?[]:n;ge.current={},O()(r).call(r,(function(e){var t=e||{},n=t.x,r=t.y,a=t.parentId,o=ge.current;a&&(o[a]=o[a]||[],o[a].push([n,r].join("-")))})),l&&l(e,t)}),[l]),Ae=(0,H.useMemo)((function(){return Ys(i,!0)}),[i]),xe=(0,H.useMemo)((function(){return Ys(i,!1)}),[i]),be=(0,H.useMemo)((function(){return{prefixCls:"print-designer",getPrefixCls:function(e,t,n){var r;return n||(e=e||"print-designer",t?G()(r="".concat(e,"-")).call(r,t):e)}}}),[]);(0,H.useEffect)((function(){var e;null!==(e=ye.current)&&void 0!==e&&e.dataContext&&ye.current.dataContext.resetData(a,!1)}),[a]),(0,H.useEffect)((function(){oe(!0)}),[]);var Ie=pe(),Be=(0,S.c)(Ie,1)[0];return K().createElement(K().Fragment,null,re&&V&&Be&&K().createElement(Ee,{handlePassPrintActionGuide:B}),K().createElement(U.ConfigProvider,{value:{prefixCls:"kdesigner"}},K().createElement(pn.Provider,{value:we},K().createElement(W.ConfigContext.Provider,{value:be},K().createElement(jy,{ref:ye,globalConfig:me,onData:ke,meta:i,data:a,prefixCls:_,dataFactory:xe,modelFactory:Ae})))))}))),jy=K().memo(z(),(function(){return!0}));Qy.displayName="PrintDesigner";var Jy=Qy,Py=!1,Oy={},Uy=function(e){var t;O()(t=ch()(e)).call(t,(function(e){var t=(0,S.c)(e,1)[0],n="阿里巴巴普惠体-R"===t?"阿里巴巴普惠体":t,r=document.createElement("div");r.style.position="fixed",r.style.opacity="0",r.style.zIndex="-1050",r.classList.add("cq-font-family-install-dummy-node"),r.textContent=n,r.style.fontFamily=zt(n),document.body.appendChild(r)}))},Wy=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,H.useState)(!e),n=(0,S.c)(t,2),r=n[0],a=n[1];if(e&&!r&&!Py)if(Py=!0,window.FontFace){var o;Xr().allSettled(F()(o=ch()(e)).call(o,(function(e){var t=(0,S.c)(e,2),n=t[0],r=t[1],a="阿里巴巴普惠体-R"===n?"阿里巴巴普惠体":n;return new(Xr())((function(e,t){le()((function(){e("not to wait loading font ".concat(a))}),5e3);new FontFace(a,"url(".concat(r,")")).load().then((function(t){t&&(Oy[a]=!0),document.fonts.add(t),e("install resolve ".concat(a))})).catch((function(){t("install reject ".concat(a))}))})).then((function(e){}),(function(e){}))}))).then((function(t){Uy(e),a(!0)})).catch((function(t){Uy(e),a(!0)}))}else{var i,l={method:"GET",mode:"cors",credentials:"include",headers:{"Cache-Control":"public, max-age=31536000"}};Xr().allSettled(F()(i=ch()(e)).call(i,(function(e){var t=(0,S.c)(e,2),n=t[0],r=t[1],a="阿里巴巴普惠体-R"===n?"阿里巴巴普惠体":n;return new(Xr())((function(e,t){le()((function(){e("not to wait loading font ".concat(a))}),5e3);window.fetch(r,l).then((function(e){return e.text()})).then((function(t){if(t){var n,o=document.createElement("style");o.type="text/css";var i=G()(n='\n              @font-face {\n                font-family: "'.concat(a,'";\n                src: url(')).call(n,r,");\n              }");o.styleSheet?o.styleSheet.cssText=i:o.appendChild(document.createTextNode(i)),Oy[a]=!0,document.head.appendChild(o),e("install resolve ".concat(a))}})).catch((function(e){t("install reject ".concat(a))}))})).then((function(e){}),(function(e){}))}))).then((function(t){Uy(e),a(!0)})).catch((function(){Uy(e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];a(!0)}))}return r}},19600:function(){}}]);