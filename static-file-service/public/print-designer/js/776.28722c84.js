(self.webpackChunkprint_designer=self.webpackChunkprint_designer||[]).push([[776,820,400],{85776:function(e,t,n){"use strict";n.r(t),n.d(t,{PrintDesigner:function(){return eE},useInstallFontFamilyOnline:function(){return aE}});var r={};n.r(r),n.d(r,{SetStatistic:function(){return X}});var a={};n.r(a),n.d(a,{InputQuery:function(){return Ms}});var o={};n.r(o),n.d(o,{InputQuery:function(){return Fs}});var i={};n.r(i),n.d(i,{GridCheckBox:function(){return kg},Query:function(){return Eg},SortSettings:function(){return Dg},filterSetting:function(){return Ag}});var l={};n.r(l),n.d(l,{InputQuery:function(){return wg}});var u={};n.r(u),n.d(u,{InputQuery:function(){return bg}});var c={};n.r(c),n.d(c,{ImageUpload:function(){return Ig},Query:function(){return xg}});var d={};n.r(d),n.d(d,{ImageUpload:function(){return Lg},PaperDirection:function(){return Bg}});var s={};n.r(s),n.d(s,{InputQuery:function(){return Tg},Query:function(){return Tg}});var f={};n.r(f),n.d(f,{InputQuery:function(){return Fs}});var g={};n.r(g),n.d(g,{Query:function(){return Eg}});var h={};n.r(h),n.d(h,{MergeByField:function(){return Pg},MergeSummaryField:function(){return Jg},Query:function(){return Qg}});var v={};n.r(v),n.d(v,{FileNameInput:function(){return th},Input:function(){return Xg},Radio:function(){return eh},Select:function(){return _g},TextInput:function(){return nh}});var p={};n.r(p),n.d(p,{DataMatrix:function(){return $p},PDF417:function(){return _p},QRCode:function(){return em},defaultQRCode:function(){return tm}});n(19600);var m=n(47976),C=n.n(m),E=n(39448),D=n.n(E),A=n(55748),k=n.n(A),w=n(54120),b=n.n(w),x=n(63808),S=n.n(x),I=n(45040),B=n.n(I),M=n(72048),L=n(30112),R=n(18860),F=n.n(R),T=n(75984),N=n.n(T),G=n(81744),Z=n.n(G),Q=n(45076),P=n.n(Q),J=n(39832),j=n.n(J),O=n(7312),U=n.n(O),z=(n(87964),n(54116)),W=n(18040),K=n.n(W),V=n(43400),H=n.n(V),q=n(45548),Y=n.n(q);function X(e,t){var n=e.Key,r=e.Value,a={};n=Y().camelCase(n),r=Y().camelCase(r);var o=t[n],i=t[r];return o?(/\S+\((\S+)\)$/.test(o)?a[n]="noStat"===i?"=$".concat(o.replace(/\S+\((\S+)\)$/g,"$1")):o.replace(/\S+\((\S+)\)$/g,"=".concat(i,"($1)")):a[n]=o.replace(/^\=\$(\S+)/,"=".concat(i,"($1)")),a):a}var $,ee,te,ne,re,ae,oe=function(){var e={dataActions:[],propertyActions:[]},t=[[r,"DataCell"],[r,"Text"],[r,"LayoutCell"]];return U()(t).call(t,(function(t){var n,r=(0,M.c)(t,2),a=r[0],o=r[1];U()(n=C()(a)).call(n,(function(t){e.dataActions.push([t,a[t],o])}))})),e},ie=n(80284),le=n(13760),ue=n.n(le),ce=n(41256),de=n.n(ce),se=n(29636),fe=n.n(se),ge=n.p+"images/10a6246291a0d3b504113bd071fd58d0.png",he=n.p+"images/a4a05f34e894ef1e8cd1b3e97e33a010.png",ve=n(44820),pe=n.n(ve),me=(n(35176),(0,n(19980).o)(!0)),Ce=function(e,t){var n=e.getBoundingClientRect(),r=n.left,a=n.top;t.style.top=a+"px",t.style.left=r+"px"},ye=function(e){e.style.opacity=0,e.style.visibility="hidden"},Ee=function(e,t){if(t){var n=t();return function(){n&&n()}}var r=document.querySelector(e);return r.style.opacity=1,r.style.visibility="visible",function(){ye(r)}},De={current:null},Ae=function(e){var t=e.handlePassPrintActionGuide,n=me(),r=(0,M.c)(n,2),a=r[0],o=r[1],i=(0,V.useRef)(null),l=(0,V.useRef)((function(){})),u=(0,V.useRef)(0),c="print-guide-title",d="print-guide-content",s="print-guide-progress",f="print-guide-card",g=".print-guide-mock-image-print-setting",h="print-guide-layer-mask",v=(0,V.useCallback)((function(e,t){var n;return Z()(n="<div class='".concat(t,"'>")).call(n,e,"</div>")}),[]),p=function(){var e=document.querySelector(".".concat(h));e&&document.body.removeChild(e)},m=(0,V.useMemo)((function(){var e;return[{element:g,title:v((0,W.getLangMsg)("printd.grid.key0107"),c),_image:he,_parent:'[data-portalid="print-designer-top-view-right"]',position:"left-center",intro:v((0,W.getLangMsg)("printd.components.key0050"),d)},{element:".print-guide-mock-image-control",title:v((0,W.getLangMsg)("printd.components.key0051"),c),_image:"data:image/png;base64,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EjJCRsgIGSEjISNkhIyQETJCRkJGyAgZISNkJGSEjJARMkJGyEjICBkhI2SEjISMkBEyQkbICBkJGSEjZISMkJGQETJCRsgIGSEjISNkhIyQETISMkJGyAgZISNkJGSEjJARMkJGQkbICBkhI2SEjISMkBEyQkbISMgIGSEjZISMkJGQETJCRsgIGQkZISNkhIyQETISMkJGyAgZISMhI2SEjJARMkJGQkbICBkhI2QkZISMkBEyQkbIuBGEjJARMkJGyEjICBkhI2SEjJBBRsgIGSEjZISMhIyQETJCRsgIGWSEjJARMkJGyEjICBkhI2SEjISMkBEyQkbICBkJGSEjZISMkJGQETJCRsgIGSEjISNkhIyQETISMkJGyAgZISNkJGSEjJARMkJGQkbICBkhI2SEjISMkBEyQkbISMgIGSEjZISMkJGQETJCRsgIGQkZISNkhIyQETISMkJGyAgZISMhI2SEjJARMkJGQkbICBkhI2QkZISMkBEyQkbISMgIGSEjZISMhIyQETJCRsgIGQkZISNkhIyQkZARMkJGyAgZISMhI2SEjJARMhIyQkbICBkhI2QkZISMkBEyQkZCRsgIGSEjZISMhIyQETJCRshIyAgZISNkhIyQkZARMkJGyAgZCRkhI2SEjJARMhIyQkbICBkhIyEjZISMkBEyQkZCRsgIGSEjZCRkhIyQETJCRshIyAgZISNkhIyEjJARMkJGyAgZCRkhI2SEjJCRkBEyQkbICBkhIyEjZISMkBEyEjJCRsgIGSEjZCRkhIyQETJCRkJGyAgZISNkhIyEjJARMkJGyEjICBkhI2SEjJBxIwgZISNkhIyQkZARMkJGyAgZIYOMkBEyQkbICBkJGSEjZISMkBEyyAgZISNkhIyQkZARMkJGyAgZCRkhI2SEjJARMhIyQkbICBkhIyEjZISMkBEyQkZCRsgIGSEjZCRkhIyQETJCRshIyAgZISNkhIyEjJARMkJGyAgZCRkhI2SEjJCRkBEyQkbICBkhIyEjZISMkBEyEjJCRsgIGSEjZCRkhIyQETJCRkJGyAgZISNkhIyEjJARMkJGyEjICBkhI2SEjJCRkBEyQkbICBkJGSEjZISMkBEyEjJCRsgIGSEjISNkhIyQETJCRkJGyAgZISNkJGSEjJARMkJGyEjICBkhI2SEjISMkBEyQkbICBkJGSEjZISMkJGQETJCRsgIGSEjISNkhIyQETISMkJGyAgZISNkJGSEjJARMkJGQkbICBkhI2SEjISMkBEyQkbISMgIGSEjZISMkJGQETJCRsgIGQkZISNkhIyQETISMkJGyAgZISMhI2SEjJARMkJGQkbICBkhI2QkZISMkBEyQkbISMgIGSEjZISMhIyQETJCRsgIGQkZISNkhIyQkZARMkJGyAgZIeNGEDJCRsgIGSEjISNkhIyQETJCBhkhI2SEjJARMhIyQkbICBkhI2SQETJCRsgIGSEjISNkhIyQETISMkJGyAgZISNkJGSEjJARMkJGQkbICBkhI2SEjISMkBEyQkbISMgIGSEjZISMkJGQETJCRsgIGQkZISNkhIyQETISMkJGyAgZISMhI2SEjJARMkJGQkbICBkhI2QkZISMkBEyQkbISMgIGSEjZISMhIyQETJCRsgIGQkZISNkhIyQkZARMkJGyAgZISMhI2SEjJARMhIyQkbICBkhI2QkZISMkBEyQkZCRsgIGSEjZISMhIyQETJCRshIyAgZISNkhIyQkZARMkJGyAgZCRkhI2SEjJARMhIyQkbICBkhIyEjZISMkBEyQkZCRsgIGSEjZCRkhIyQETJCRshIyAgZISNkhIyEjJARMkJGyAgZCRkhI2SEjJCRkBEyQkbICBkhIyEjZISMkBEyEjJCRsgIGSEjZCRkhIyQETJCRkJGyAgZISNkhIyEjJARMkJGyEjICBkhI2SEjJCRkBEyQkbICBkJGSEjZISMkBEyEjJCRsgIGSEjISNkhIyQETJCxo0gZISMkBEyQkZCRsgIGSEjZIQMMkJGyAgZISNkJGSEjJARMkJGyCAjZISMkBEyQkZCRsgIGSEjZCRkhIyQETJCRshIyAgZISNkhIyEjJARMkJGyAgZCRkhI2SEjJCRkBEyQkbICBkhIyEjZISMkBEyEjJCRsgIGSEjZCRkhIyQETJCRkJGyAgZISNkhIyEjJARMkJGyEjICBkhI2SEjJCRkBEyQkbICBkJGSEjZISMkBEyEjJCRsgIGSEjISNkhIyQETJCRkJGyAgZISNkJGSEjJARMkJGyEjICBkhI2SEjISMkBEyQkbICBkJGSEjZISMkJGQETJCRsgIGSEjISNkhIyQETISMkJGyAgZISNkJGSEjJARMkJGQkbICBkhI2R0vWSkLiGjzmT+D/QuigoVnf8fAAAAAElFTkSuQmCC",_parent:'[data-portalid="print-designer-top-view-left"]',position:"right-center",intro:v((0,W.getLangMsg)("printd.components.key0052"),d)},{element:".print-guide-mock-image-datasource",title:(0,W.getLangMsg)("printd.components.key0013"),_image:ge,_parent:'[data-portalid="print-designer-top-view-left"]',parent:".print-guide-mock-image",position:"right-center",intro:Z()(e="\n          <div>\n           ".concat(v((0,W.getLangMsg)("printd.components.key0053"),d),"\n           ")).call(e,v((0,W.getLangMsg)("printd.components.key0054"),d),"\n          </div>\n          ")},{element:".print-guide-mock-image-property",title:v((0,W.getLangMsg)("printd.grid.key0108"),c),_image:"data:image/png;base64,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hIyQETISMkJGyAgZISMhI2SEjJARMkJGQkbICBkhI2QkZISMkBEyQkbISMgIGSEjZISMhIyQETJCRsgIGQkZISNkhIyQkZARMkJGyAgZISMhI2SEjJARMhIyQkbICBkhI2QkZISMkBEyQkZCRsgIGSEjZISMhIyQETJCRshIyAgZISNkhIyQkZARMkJGyAgZCRkhI2SEjJARMhIyQkbICBkhIyEjZISMkBEyQkZCRsgIGSEjZCRkhIyQETJCRshIyAgZISNkhIyEjJARMkJGyAgZCRkhI2SEjJCRkBEyQkbICBkhIyEjZISMkBEyEjJCRsgIGSEjZCRkhIyQETJCRkJGyAgZISNkhIwZCBkhI2SEjJCRkBEyQkbICBkhg4yQETJCRsgIGQkZISNkhIyQkZARMkJGyAgZISMhI2SEjJARMhIyQkbICBkhI2QkZISMkBEyQkZCRsgIGSEjZISMhIyQETJCRshIyAgZISNkhIyQkZARMkJGyAgZCRkhI2SEjJARMhIyQkbICBkhIyEjZISMkBEyQkZCRsgIGSEjZCRkhIyQETJCRshIyAgZISNkhIyEjJARMkJGyAgZCRkhI2SEjJCRkBEyQkbICBkhIyEjZISMkBEyEjJCRsgIGSEjZCRkhIyQETJCRkJGyAgZISNkhIyEjJARMkJGyEjICBkhI2SEjJCRkBEyunT/A+RKXPPypoMLAAAAAElFTkSuQmCC",_parent:'[data-portalid="print-designer-top-view-right"]',position:"left-center",intro:v((0,W.getLangMsg)("printd.components.key0055"),d)},{element:"#kdesigner-top-view-main",_isDynamic:!0,title:v((0,W.getLangMsg)("printd.components.key0056"),c),_image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABtwAAABWCAMAAAB7GsJOAAAAS1BMVEXy8vLy8vLZ2dn////U2eNAQECysrLS0tLc3d3m5uaEhIRkZGQiIiKnp6fCxsFycnJaWlpLS0swMDCRkZH1QEBg1FeB3Xr2aGj6srJwgS/0AAAAAXRSTlOsn4Y3pQAAD5lJREFUeNrtnYmSozgWRQuyAEmAxDLTPf//pYPAxizCaHlgTN4TUZ0moxMMWo70tPAnAgAAAG7GHzwCAAAAkBsAAAAAuQEAAACQGwAAAAC5AQAAAJAbAAAAyA0AAACA3AAAAADIDQAAAIDcAAAAAMgNAAAA5AYAAABAbgAAAADkBu4FZywmgjFOdq3dcwEAblmuIDdAUixiYjjhtaA3AOjL8NXLFeQGCOgafPyHkK6csTfXcu4KIoUA2C3DNytXkBugaPOxH2LYVruQE/cDAQC3LFeQGwgnjn/IieOta/mANALgfRm+XbmC3ABBo4/Ty42bm4WcfAgPAHDHcgW5gWDYAR23ruvGzNfym4CJVALgXRm+X7mC3ADkBgDkBrkBsCQ+Rm6x+VoYdAOAvgzfr1xBbgByAwByg9wAgNwAgNwgNwC5QW4AQG6Q2/Kh3z1b8f3ptJz9PQiSHeIgN/C7RAC5QW6nZ6SsHEmdqm1ZLpEeX5ZlA07K2JUb/3sonCCNIDeKVs4xU8/SSkZAP4j0zDqJf9dTh9wuLrcsTybUmb2UqmSNclZb+sL+2rtyO9htBHb7rNxK8aJNs7MLoanK9KpGeZ0cUh9WSX39epZnG9CtEmZJwk6sk0RSQm5fJjcmpXeG4x5BMJfHt1CUvd3axIRj5uTpFPtytCO3w90WbrePyk3ME61K/QohV/kT4Vhlxja/26f0aE9ZnvfyduvEvkFNZrcsSTKaM1nVSXkioi9iUVxU1aF/qte/WP9O3VZuvB38oTxappnsK32ZHZCRHqHFl494V8t1BcPWMKaMWCWt4w2mr0hod59Ucvt7Al8st2xVHbZecpueJ7TK9KtGddHK6Et4pr1BZjexJaGwmhxyu5jc+np+Kbe+8XgzufFnkK18ZcHcMZ9MuzWP7MoYWUYam6jRS25td1hZ2s2UEV0yZ6wDKJ28x2DK87NVcJ5/uOMW3HX7pNykocftFT5phehqbtX9twytMr2q0TRcEVtua2syu+VbEsovHZbUA2BDqkhOIYJfI7cZd5RbmVRjq02kGcvKyrUtmOk+W8wjHstxQCq1mvLhJ7eoK9H6uOKWRdYkt0qI1PruNrCo5N7LjZ0hNxZaMAxuisbNlLOyzA6VW/2cBNSqIRztOTbQVX/ODiCTW5XkLdmo0MxtMpJkdsvKDQI7RdOW7tbnoA6nGlJFUSjHXm5xKxa0F9XBb5Vbm9QPt439NR3Hd7gv9uqv9X24bPjJqDJSlIo8z6uJ3PKkbss8sQwtmuVm3R49Um5//14/LmmSm2yK8UNHIg+U26TAlVtdN8vOk3O7nkpu3X2kLHENhdu5LSK02zFMJ3tsfQ5Bj2d2TzgTJE/YWm6ZIdpaZ5dMgYPkJsU0ejdtAk2PuHxNTmd0c4js5SZm493SKRCRzqaPyb7Op5SbWI2WSKehAJWoVTykSura/h6z9QQ52ymTt5Rb2wmt/1AWTStl2xTyFLn180uEp9zaR4jiE3LL9bUF4RDT1G293ZIL2+1ouekpY119rWgCv9Zy69IzX1BfNFp5zGxJUTRjNZfrRm4jDUepbv8+igxvmvPlJhZzubq2kPWskmwRgeztRii3roKruh6/mk4FyFRtLzfzbMlUQG5+cutclg89t6gp+pCkLJpz5Ka7brmn3HyGSYjkNkyGymi7btnEaNnF7XZsWHIs4iTzUa3lZshQInR08nvkxrtqYJQbr4pGiebhs9lRViSStUU99DMKuhUUtnITq3xR2WeU1dxBbTdCubXD1OtyNc/NurZSBre1EeTmKbemaX8GubWFGH5VFdlpclOecqs9liYRyU0Nof/HDzK3TWKR2m7XjIidIrfBbjlJr+BXyk1mjnIru+5YPcqt68PpcF1dJKujwWdVoWtQWVR092Qpt7XbDCrZrL3XU0e03UjlFoXJbdxbZDZNC3LzlFupBdfLTT3DkapIrx6W9JoHQiO37LGKRSZ0S3+X42xZfdF69Yyw5CMySRPx+gVyU8sGYjnM01L269xEUct0lFsz9MhkUcjlUVLoZGkLHbRIGsIGmJ3cTP15aV2CY8OGDdJ2ofNJchtNM/Wbs9z401X8e+XG6zG1ysq2YBjcNMgtTx6TJuvNnls9jsal1UcnlJRuK9wo5TYOtqnVsJ9Heow9tTKbZ+eE4Ly72dnnvBZyC/++rTBVODwfWwCpss3vlnIzjOWrV03qceWPya1MnOUmu7sb5ZYWBX9ITiyPmmbo6LVPw1HlK1u51WW/AntegqVLxf/KyP3a24vKTXmu3unvUd9R301lw9F39tzq56CvdYjgjdzG5QDbY25189CeLHKSpQCV51IAr0Y1idxe0yTleijbPT36XGXaUa4OP69FcNfnvBZhyaO+b/6cvygTarkZx/LbgCt/KizZ73LjMaFklJt4ppnSH+ZHXbu3/5hGWVFT5ivrntuwt5FXCV7IzW2LqpPllnvuL5k9ddbLLftmubGm6RMma2wnxu/LrcvA5ZbceNdy0z9ZU9Ms4laecst9ZnOQyK3LwM91UMmq6+aeHn0pe1+vep/XwlM+59US2/oX9H3laqVZv9pMTpsBQ7Qyrivr/G4pN9NYvgq58ofktu02W7nlxeO+Wz3MNj8SurvWz5KsC0mZr/44lRM1/63lNdh8zG21Vcm15Ca89ke4kdwi2ej2E7cPf+/KjSXzTtmcrLdalDScRm7G/SUtbsNh/u+s0yUNEXunkaLF5lPL8zmnx6Mw7G0F7nPeMt+gDDqvDj9u/Qt7DpV5Q5VZM73Oe9NY79bnsEPJaiyfRSFXPjksKUW5cJtSfnKrC/HUWbM84k1RKT0K1xZvq2vn9Pd/K4CwXxTktEn+x+Xm9TXvJLcuS+Z69pK0T6P3ckub55xJM2mh9HRKSbT9lrGZadHG95tNaJgC4jp41+Xf6UIota4i3NLjcTe7r7nwOK/V9lvu57WSm9dzKHddrNvpfSdLUtZJBrkxU7/B7cony63tx6+n/TZfuSXPwbSyKJZHEVdJU8mua9Z3l9ibs7mlv7fcXJbkyIA3KZ0qN55WifLKabeSmx7XdVlvsiM3VTQ7MyW764lV3NJhzG0ScBqWN66H3Wz6Ol7T8PO1NJTj4N1sYW9p6Ao6psfjS+y/wsn9vKnYIA07r0VY0vM52HVz29ah2+4blsxZ6JVPDkvqpf/lm5ikvdyamc7mR+MT06NuVVE0m2JxTH9fufHKYTMF7rJJ/gflJofwUOURJLiX3CJVFMIljd7IjddFzfem/XfXa2mWAsSZME6YtAlFKL+KcSkj1/n85bzLaNrDwi09hmxlM3zscV47s7qe13KdW9D3leWbtHcZb/WeUKJCr3yy3OKhRnzjNvuw5KizZnk0/r8qyppGtPV2Grulv6/clNMAReYfmDxTbrn/6ztuJrcoV05ptC031uiY4y65IlrnpkMnpnXc+3dR+dUyXTNv3hpileMuXovtEFpTeDR3F+/cbvrvBcl57YqS23mt17kFfN+378sTgrhOMiwFaI2hAXGN7bg2lgJou03d5huWrF6jbPXy6JFd9YwSPWXy7Q5cTunvKTfl2N6Q3nY7U25Di9tvRvjN5OaYRttyq94Pt5Ev4u5IDfu77ucinniGh/Tmb5OUzirHfa7Sxf/PqbYfnNqtrxPqS/QRguQWEnoke6WQ5yJur3WUH5ZbLKtKxuFyU6/J//ny6PmxfC55ywuaQUg/ublvQOptN8jtq+VWFsnP2XLLTDua2zgq9q82n52iPijqNipULfMb2ZtvXnZTg0Xry9ath2+/VRoWQ0Bue2FJXZqygI2TR7m1r8G3cnk0FD/tOz505FqicVUvuflsru1rN0u5cUMTOGK1W2YOl9sdFnGTyq0qkupBepbc+jkmznIr/av+tH/ZtXrMZqndOoDrZdt0b7552k09i2161br1aLnpWRH9iwEonuyvklvQWwFGufFxwy0dcpwfDXVvo09VfLzn5vfiCE+7OchNLxeqpvN9E8fJ3aFyu8X2W7Ry61/mNlCeJTdhejHA7k2IgF0iWDuuVKtbx+rYsKRGkHWxuJrMY8ivK7ejw5KpXvzYtX1pHoHnK2/qpIouy8Fyi1S/VTJrhtG2+VH0WMgdPVZxU731xkNuvi9F8rObg9yesx0nuHVvg+U2T9jfLbdgfOXWB6BaZ7lVQY16LluhlGil+9tO12tPYkUnoVKpcrzSrx1zU0nF9L4xvKLY6Mr7ZaWX7Tgf9bLSl9x4XRRV1RTDXizzo2jcdystkjKtCqJ8+scjn/gOy3rZzUVuES/b5x5Geo+d0vFyV5QbO8NtLLRgfFZu496SenvJfHjdsavc+KWrnsuQTR415dLjg8OSWdef7jdFYy3BrvP269zidmPPr18nt4jn+u1uynj02nerbN6tcztabiEvs/Wxm5PcXpbyej4BcotNcrOboPBebvwMufHQgvFZuRneM+sUPimHN93q+uf8WsV881c972x5AbHc9hdxhwmO7H12DjuUfA3HyG1R/2dbR5NklnRNAGe5Bc1Tlu6Lue32lpjHH0vPt2IFyI2vVJbZ7Z25J7fo+lHJj8otM7mtdBsbmPylc/XHlWl3J2XdXPj510iwhX7+MRJ6XrGxPyNBWHJ/+y3I7XS56an/z3/BcjsbZ7llQWJlh2Qkvhpr89uJNE/85wunBiyrx/cVIb98x+2jcovFepvD1HHgW3hIaVJlmrCuRvl/jASPqPP/GuHXrIYgt4vJTen5zUu56d+pO8vt/Idu0yNc7P1d+Rk4YPst3XVbYlmR7MjteLvx8DT6oNzicvk2E49ZXQGYX6li//dmuYV/L7PcrlrMTwhLRm17Zp0kkjL6Io6ZLQm5hWckHfCkGOnmacBf8zjzelvOntyOthsnSKNPyu27C+FP/D8DcXhYkkkD7CcC59RJXH7ZPUFuV5XbF8P37cIPmzPJOEkaQW4Acvvue4LcAIDcAIDcIDcAuUFuAEBukBuA3CA3ACA3yA1AbpAbAJAb5AaIYcfIjZmv5QVDKgHwrgzfr1xBbgByAwByg9wAWMJjTu+27qTma3nBkUoAvCvD9ytXkBsI54hBt61wPobcADiiDN+uXEFugKLZx6jdxrYahRwdNwCu0XW7drmC3AABLKaNTPI30XyGETcAjijDNytXkBv4WLvPs03I0W8D4PNl+OrlCnIDREWDMSqxsb0dLx2uxRjUBgB1Gf6GcgW5AQAAuB2QGwAAAMgNAAAAgNwAAAAAyA0AAACA3AAAAADIDQAAAOQGAAAAQG4AAAAA5AYAAABAbgAAAADkBgAAAHIDAAAAvlhuAAAAwO2IAQAAgJsBuQEAALgd/wczT3AO/ArSegAAAABJRU5ErkJggg==",_parent:"#kdesigner-top-view-main",position:"bottom",intro:v((0,W.getLangMsg)("printd.components.key0057"),d)}]}),[]),C=document.body.style.overflow,y=(0,V.useRef)({}),E=(0,V.useCallback)((function(){var e,n;document.body.style.overflow=C,i.current=null,l.current=null,l.current=null,U()(m).call(m,(function(e){var t=e._unmountContainer;t&&(t(),e._unmountContainer=null,e._container=null,e._parentDom=null)})),o(!1),U()(e=de()(y.current)).call(e,(function(e){return e&&e()})),null===(n=document.querySelector(".".concat(f)))||void 0===n||n.remove(),t&&t(),p()}),[]),D=(0,V.useCallback)((function(){U()(m).call(m,(function(e){var t=e._parentDom,n=e._container;t&&n&&Ce(t,n)}))}),[]),A=(0,V.useCallback)((function(e){l.current&&l.current(),u.current=e;var t=m[u.current],n=t.element;if(t._isDynamic){l.current=Ee(n,(function(){var e=document.querySelector(n);if(e){var t=e.style.pointerEvents;e.style.pointerEvents="none";var r=function(){e.style.pointerEvents=t};return y.current.removeDynamicEffect=r,r}}))}else l.current=Ee(n)}),[]),k=(0,V.useCallback)((function(e){ue()((function(){!function(e,t,n){if(!document.querySelector(".".concat(t))){var r=document.querySelector(e),a=document.createElement("span");a.classList.add(t),r?(r.insertBefore(a,r.firstElementChild),n&&n()):ue()((function(){var r=document.querySelector(e);r?(r.insertBefore(a,r.firstElementChild),n&&n()):W.console.log("createProgressText fail",e,t,n)}))}}(".driver-popover-footer",s,(function(){!function(e,t,n){var r;document.querySelector(".".concat(e)).textContent=Z()(r="".concat(t," / ")).call(r,n)}(s,e.currentStep+1,m.length),function(e,t,n){var r,a=document.querySelector(".".concat(e));U()(r=[t,n]).call(r,(function(e){var t=document.createElement("div");t.classList.add(e),null==a||a.appendChild(t)}))}(f,"print-guide-line-shape","print-guide-ball-shape")}))}),150)}),[]),w=(0,V.useRef)(!1);return(0,V.useEffect)((function(){if(a){U()(m).call(m,(function(e){var t=e.element,n=e._parent,r=e._image,a=e._isMount;if(!e._isDynamic){var o=function(e){var t=e._parent,n=e.element,r=e._isMount,a=e._image;if(r)W.console.log("createContainer isMount",t,n,r,a);else{var o=document.querySelector(t);if(o){var i=document.createElement("div");Ce(o,i),i.style.zIndex="1050",i.style.position="fixed",i.classList.add(n.substring(1)),o.appendChild(i);var l=o.style.position;o.style.position="relative";var u=document.createElement("div"),c=document.createElement("img");return c.src=a,u.classList.add("print-guide-mock-image"),u.appendChild(c),i.appendChild(u),ye(i),{_parentDom:o,_container:i,_unmountContainer:function(){null==o||o.removeChild(i),o.style.position=l||"static"}}}W.console.log("createContainer parent",t,n,r,a)}}({element:t,_parent:n,_isMount:a,_image:r});o&&(e._isMount=!0),(0,ie.c)(e,o)}})),De.current||ue()((function(){De.current=new(pe())({animate:!1,doneBtnText:(0,W.getLangMsg)("printd.components.key0058"),closeBtnText:(0,W.getLangMsg)("printd.components.key0059"),nextBtnText:(0,W.getLangMsg)("printd.components.key0060"),prevBtnText:(0,W.getLangMsg)("printd.components.key0061"),keyboardControl:!0,overlayClickNext:!1,padding:0,allowClose:!1,onNext:function(e){var t=e.options.element,n=fe()(m).call(m,(function(e){return t===e.element}));n===m.length-1?E():A(n+1),W.console.log("onNext",e)},onPrevious:function(e){var t=e.options.element,n=fe()(m).call(m,(function(e){return t===e.element}));0!==n&&A(n-1),W.console.log("onPrevious",e)},onDeselected:function(e){W.console.log("onDeselected",e),De.current.isActivated||(E(),p())},onHighlighted:function(){k(De.current),document.body.style.overflow="hidden",function(){if(!document.querySelector(".".concat(h))){var e=document.createElement("div");e.classList.add(h),document.body.appendChild(e)}}(),W.console.log("driver",De.current)},onHighlightStarted:function(){w.current||(A(0),w.current=!0)}}),De.current.defineSteps(N()(m).call(m,(function(e){var t,n,r=e.element,a=e.title,o=e.intro,i=e.position,l=Z()(t="".concat(r.substring(1),"-card ")).call(t,r!==g?f:Z()(n="".concat(f," ")).call(n,"print-guide-first-card"));return{element:r,popover:{className:l,title:a,description:o,position:i}}}))),ue()((function(){var e;null===(e=De.current)||void 0===e||e.start(0)}),500)}));var e=function(){var e;D(),null===(e=De.current)||void 0===e||e.refresh(),k(De.current)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}}),[]),null};function ke(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}var we="container_node_cls",be="scale_node_cls",xe="normal_node_cls",Se="hover_node_cls",Ie="text_node_cls",Be="cell_node_cls",Me="not_cache_node_cls",Le=17,Re=20,Fe="horAlignment",Te="lineSpace",Ne="verAlignment",Ge="fontName",Ze="fontSize",Qe="bold",Pe="italic",Je="underLine",je="strike",Oe="foreColor",Ue="backColor",ze="border",We="left",Ke="right",Ve="bottom",He="vertical_center",qe="horizontal_center",Ye="horizontal_distribution",Xe="vertical_distribution",_e="x",$e="y",et="width",tt="height",nt="id",rt=[Fe,Ne,Ge,Ze,Qe,Pe,Je,Oe,Ue,ze,je,Te],at=[Qe,Ze,Ge,Fe,Ne,Je,Oe,Ue,Pe,je,Te],ot="#666666",it="#5582F3",lt="#0E5FD8",ut=["top","bottom","left","right","inner"],ct=["top","bottom","left","right"],dt={color:P()(ut).call(ut,(function(e,t){return e[t]="",e}),{}),width:P()(ut).call(ut,(function(e,t){return e[t]=0,e}),{}),style:P()(ut).call(ut,(function(e,t){return e[t]="",e}),{})},st=(P()(ut).call(ut,(function(e,t){return e[t]=0,e}),{}),"1"),ft="3",gt="SubDataGrid",ht="TableTail",vt="DataGrid",pt="CardGrid",mt=["DataGrid","LayoutGrid",gt,"CardGrid"],Ct=["DataRow"],yt=["DataColumn"],Et=["DataCell","LayoutCell"],Dt=["SubDataCell"],At="Detail",kt="Normal",wt="Statistic",bt="Layout",xt="Group",St={bindField:"",bindText:"",viewText:"",dataSource:"",dsType:"",formulaData:null},It=[nt,"key","parentId"],Bt="rowId",Mt="columnId",Lt=Z()($=[]).call($,It,[Bt,Mt,ze]),Rt={left:0,right:0,top:0,bottom:0},Ft="borderType",Tt="innerBorder",Nt="outBorder",Gt="outBorderBlod",Zt="allBorder",Qt="noneBorder",Pt="left",Jt="top",jt="right",Ot="bottom",Ut="rowHeight",zt="columnWidth",Wt=10,Kt=function(e){var t;return Z()(t="".concat(e,", ")).call(t,"arial, sans-serif")},Vt={"思源宋体":["SourceHanSerifSC-Regular","otf"],"思源黑体":["SourceHanSansSC-Regular","otf"],"方正细圆简体":["FZXiYuan-M01S","ttf"],"方正兰亭黑简体":["FZLanTingHeiS-R-GB","ttf"],"阿里巴巴普惠体":["Alibaba-PuHuiTi-Regular","otf"]},Ht=(function(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?U()(n=ke(Object(a),!0)).call(n,(function(t){(0,L.c)(e,t,a[t])})):b()?S()(e,b()(a)):U()(r=ke(Object(a))).call(r,(function(t){B()(e,t,k()(a,t))}))}}({},P()(ee=C()(Vt)).call(ee,(function(e,t){var n=(0,M.c)(Vt[t],1)[0];return e[t]=Kt(n),e}),{})),"思源宋体 CN"),qt={},Yt=function(e){var t,n=qt[e];return Kt(Z()(t="".concat((n||"")+(n?", ":""))).call(t,Ht))},Xt="Header",_t="Footer",$t="SubDataGrid",en="Line",tn=Z()(te=[Xt,_t,$t]).call(te,Et,[ht]),nn=Z()(ne=[Xt,_t,$t]).call(ne,Et),rn=[Xt,_t,$t],an=Z()(re=[]).call(re,Et),on="arrow-down",ln=Z()(ae=[]).call(ae,Et),un=".5",cn="1",dn="2",sn="cq-print-designer-copy",fn="cq-print-designer-gridcell-copy",gn=["char","char","char","none"],hn={text:"Text",richText:"RichText"},vn="kdcdc",pn=66/130,mn={QR_CODE:1,PDF417:pn,Truncated_PDF417:pn,MicroPDF417:pn,Data_Matrix:1,GS1_Data_Matrix:1},Cn={QR_CODE:"QRCode",PDF417:"PDF417",Truncated_PDF417:"PDF417",MicroPDF417:"PDF417",Data_Matrix:"DataMatrix",GS1_Data_Matrix:"DataMatrix"},yn=(0,V.createContext)(null);yn.displayName="PrintRootContext";var En=(0,V.createContext)(null);En.displayName="PrintDesignerContext";En.displayName="DataSourceViewContext";var Dn=(0,V.createContext)({});Dn.displayName="DataGridContext";var An=(0,V.createContext)({});An.displayName="CanvasSelectContext";var kn=n(81043),wn=n(39568),bn=n.n(wn),xn=n(12640),Sn=n.n(xn),In=n(82600),Bn=n.n(In),Mn=n(37152),Ln=n.n(Mn),Rn=n(73400),Fn=n.n(Rn),Tn=function(e){var t=e.selectionContext,n=e.dataContext,r=(e.meta,e.activedSelectId),a=e.modelFactory,o=n.getRootId(),i=n.findControl(r||o);i||W.console.log("useLastSelectedModal",r,t.getSelection());var l=a({type:i.type});return{modelData:l.Properties,selectModel:l,activedSelectId:r,selectItem:i,rootId:o,isRootId:o===r}},Nn=function(e){var t,n=e.dataContext,r=e.selectionContext,a=e.meta,o=e.activedSelectId,i=e.modelFactory,l=Tn({dataContext:n,selectionContext:r,meta:a,activedSelectId:o,modelFactory:i}),u=l.selectItem;return!l.isRootId&&u&&u.dataSource&&u.bindField?(W.console.log("selectItem useScrollKey",u),Z()(t="".concat(u.dataSource,"-")).call(t,u.bindField)):""},Gn=n.p+"images/b7faef5a0338c01e97e8b6d7d8f7511f.png",Zn=n(89843),Qn=n.n(Zn),Pn=n(97440),Jn=n.n(Pn),jn=n(64248),On=n.n(jn),Un=n(12388),zn=n.n(Un),Wn=n(34984),Kn=n(58496),Vn=n(71252),Hn=n.n(Vn),qn=n(47332),Yn=n.n(qn),Xn=n(65624),_n=n.n(Xn),$n=function e(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,a=0;a<n.length;a++){var o=n[a],i=(o.isReportEntryGroup,o.Key,o.Name),l=o.ViewName,u=o.Items,c=(o.IsDs,o.ZeroShow),d=o.IgnoreTailZero,s=o.dataSource,f=o.bindField,g=o.dsTypeKey,h=o.dataSourceText,v="".concat(r?r+"."+i:i);if(t===er(s,f))return{dataSource:s,ancestorTitle:v,dataSourceText:h,key:f,dsType:g,title:l||i,ZeroShow:c,IgnoreTailZero:d};var p=e(t,u||[],v);if(p)return p}},er=function(e,t){var n,r,a=Z()(n=Z()(r="".concat(e||"")).call(r,e&&t&&"-")).call(n,t||"");if(tr(a)){var o,i=a.split("."),l="",u=F()(o=P()(i).call(i,(function(e,t,n){var r;-1!==bn()(t).call(t,"-")&&tr(t)?(l=Yn()(i).call(i,(function(e,t){return!tr(e)&&t>n})),e.push(Z()(r="".concat(t.split("-")[0],"-")).call(r,l))):tr(t)||e.push(t);return e}),[])).call(o,(function(e){return e!==l}));a=u.join(".")}return a},tr=function(e){return"string"==typeof e&&-1!==bn()(e).call(e,"reportEntryGroup")},nr=function e(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=t,a=0;a<n.length;a++){var o=n[a],i=(o.Key,o.Name),l=o.Items,u=(o.IsDs,o.dataSource),c=o.bindField,d=o.dsTypeKey,s=o.dataSourceText,f=o.ViewName,g=i;if(0===bn()(r).call(r,g)){var h=r.replace(i,"");if(""!==h){if("."!==h[0])continue;r=h.substring(1)}else r="";if(""===r)return l?null:{dsType:d,dataSource:u,viewText:f||i,key:c,dataSourceText:s};var v=e(r,l);if(v)return v}}},rr=function(e){if(!e)return{isBindField:!1,bindField:e};var t=/^\=\$.?/g.test(e);return{isBindField:t,bindField:t?e.replace(/^\=\$/,""):e}},ar=function(e){var t,n;return P()(t=F()(n=C()(e)).call(n,(function(e){return"undefined"!==e}))).call(t,(function(t,n){return t[n]=e[n],t}),{})},or=function e(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=0;r<n.length;r++){var a=n[r],o=(a.Key,a.Name,a.Items),i=(a.IsDs,a.dataSource),l=a.bindField;if(t===er(i,l))return a;var u=e(t,o||[]);if(u)return u}},ir=function(e,t){var n=e.type,r=e.key,a=$n(r,t);if(a){var o=a.ancestorTitle,i=a.key,l=a.dataSource,u=a.dataSourceText,c=a.title,d=a.dsType,s=a.ZeroShow,f=a.IgnoreTailZero;return"Text"===n?{bindText:"=$".concat(o),bindField:i,dataSource:l,dataSourceText:u,dsType:d,title:c,zeroShow:s,ignoreTailZero:f}:{bindText:"=$".concat(o),bindField:i,dataSource:l,dsType:d,title:c,zeroShow:s,ignoreTailZero:f}}return{}},lr=function e(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,r=0;r<t.length;r++){var a=t[r];if(n(a))return a;var o=e(a.Items,n);if(o)return o}},ur=function(e){var t=[];return function e(t,n){var r=t.key,a=t.Items,o=t.IsField,i=t.dataSource,l=t.bindField;r=r||er(i,l),!o&&a&&a.length||n.push(r),a&&U()(a).call(a,(function(t){return e(t,n)}))}(e,t),t},cr=function(e,t,n){var r=e.findControl(t)||{},a=["Text","Barcode","QRCode","Image"],o=e.findControl(r.parentId)||{};if(null!=r&&r.parentId&&Bn()(a).call(a,r.type)){var i=e.findControl(o.parentId)||{};if(i.type===n)return i.dataSource}else if(o.type===n)return o.dataSource},dr=n(82504),sr=n(74808),fr={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function gr(){var e=(0,V.useState)(null),t=(0,M.c)(e,2),n=t[0],r=t[1],a=(0,V.useState)(fr),o=(0,M.c)(a,2),i=o[0],l=o[1],u=(0,V.useMemo)((function(){return new dr.c((function(e){if(e[0]){var t=e[0].contentRect,n=t.x,r=t.y,a=t.width,o=t.height,i=t.top,u=t.left,c=t.bottom,d=t.right;l({x:n,y:r,width:a,height:o,top:i,left:u,bottom:c,right:d})}}))}),[]);return(0,sr.c)((function(){if(n)return u.observe(n),function(){u.disconnect()}}),[n]),[r,i]}function hr(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function vr(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?U()(n=hr(Object(a),!0)).call(n,(function(t){(0,L.c)(e,t,a[t])})):b()?S()(e,b()(a)):U()(r=hr(Object(a))).call(r,(function(t){B()(e,t,k()(a,t))}))}return e}var pr=function e(t,n,r){return P()(t).call(t,(function(t,a){var o=a.Items;return o&&(a=r&&r===a.DsType||!r?vr(vr({},a),{},{Items:e(o,n)}):a),(n(a)||a.Items&&a.Items.length)&&t.push(a),t}),[])},mr=function(e,t){return pr(e,(function(e){var n=e.Type;return n&&n!==t}))},Cr=function e(t){return function(n){return P()(n).call(n,(function(n,r){var a=r[t],o=r.Items;return!a&&o&&(r=vr(vr({},r),{},{Items:e(t)(o)})),(a||r.Items&&r.Items.length)&&n.push(r),n}),[])}},yr=Cr("IsDataGridDs"),Er=Cr("IsSubDataGridDs"),Dr=function e(t,n){if(!n)return t;var r=function(e,t){return"string"==typeof e?e===t:!!zn()(e)&&Bn()(e).call(e,t)},a=P()(t).call(t,(function(t,a){var o=a,i=o.dataSource,l=o.Items;return l&&!r(n,i)&&(a=vr(vr({},a),{},{Items:e(l,n)})),(i&&r(n,i)||a.Items&&a.Items.length)&&t.push(a),t}),[]);return a},Ar=function(e,t){return null!=t&&t.length?pr(e,(function(e){var n=e.bindField,r=e.dataSource,a=er(r,n);return a&&Bn()(t).call(t,a)})):e},kr=["Entry","ReportEntry","Subentry"];function wr(e,t){return P()(e).call(e,(function(e,n){var r=t===n.dataSource,a=n.Items;return!r&&a&&(n=vr(vr({},n),{},{Items:wr(a,t)})),(r||n.Items&&n.Items.length)&&e.push(n),e}),[])}var br=function(e,t){if(function(e,t){if(t=Yn()(t).call(t,(function(e){return"Main"===e.DsType})),!t)return;t=t.Items;return function t(n){return Yn()(n).call(n,(function(n){return e===n.dataSource||n.Items&&t(n.Items)}))}(t)}(e,t)){var n=[Yn()(t).call(t,(function(e){return"Main"===e.DsType}))];U()(t).call(t,(function(e){return("Ref"===e.DsType||"Custom"===e.DsType)&&n.push(e)})),t=function t(n){var r=P()(n).call(n,(function(n,r){var a=r.Items,o=r.DsType;return Bn()(kr).call(kr,o)||e===r.dataSource||(a?n.push(vr(vr({},r),{},{Items:t(a)})):n.push(r)),e===r.dataSource&&n.push(r),n}),[]);return r}(n)}else t=wr(t,e);return t};function xr(e){return function(t){return P()(t).call(t,(function(t,n){var r,a,o=n.DsType&&Bn()(e).call(e,n.DsType);return!o||null!=n&&null!==(r=n.Items)&&void 0!==r&&r.length||t.push(n),o&&(null==n||null===(a=n.Items)||void 0===a?void 0:a.length)>0&&t.push(vr(vr({},n),{},{Items:xr(e)(n.Items)})),t}),[])}}var Sr=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;return Yn()(t).call(t,(function(t){return n===t.dataSource||t.Items&&e(t.Items,n)}))},Ir=["controlType","draggable","checkable","meta","definition","onSelect","onCheck","checkedKeys","showDefinitionId","showDataSourceTitle","filterTreeData","emptyNode","onDataChange","scrollToKey","expandedKeys"];function Br(e,t){var n=void 0!==Jn()&&On()(e)||e["@@iterator"];if(!n){if(zn()(e)||(n=function(e,t){var n;if(!e)return;if("string"==typeof e)return Mr(e,t);var r=Sn()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Qn()(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Mr(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw o}}}}function Mr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Lr(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rr(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?U()(n=Lr(Object(a),!0)).call(n,(function(t){(0,L.c)(e,t,a[t])})):b()?S()(e,b()(a)):U()(r=Lr(Object(a))).call(r,(function(t){B()(e,t,k()(a,t))}))}return e}var Fr=function(e){var t=e.type,n=e.style,r=void 0===n?{}:n;return t?H().createElement(z.Icon,{prefix:"printdesignericon",type:t,style:r}):H().createElement(z.Icon,{prefix:"printdesignericon",type:"zidingyi",style:r})},Tr=function(e){return e},Nr=function(e){var t=e.name,n=e.type,r=e.isDsRoot,a=e.tag,o=void 0===a?{}:a,i=o.Color,l=o.Name;return H().createElement("span",{className:Hn()("kds-tree-node",{"kds-tree-node-tag":r})},H().createElement(Fr,{type:n}),H().createElement("span",{style:{marginLeft:3}},t),l&&H().createElement(z.Tag,{style:{marginLeft:16},type:"attribute",color:i,className:"kds-tree-tag"},l))},Gr=["Sys"],Zr=function e(t,n,r){var a,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],l=arguments.length>5?arguments[5]:void 0,u=arguments.length>6?arguments[6]:void 0,c=arguments.length>7?arguments[7]:void 0;return F()(a=N()(n).call(n,(function(n){var a,d=n.Name,s=n.Type,f=n.Items,g=n.Key,h=n.DsType,v=n.IsDataGridDs,p=n.IsSubDataGridDs,m=n.Tag,C=(n.IsDs,n.ViewName),y=n.dataSource,E=n.bindField,D=n.Icon,A=f?{children:e(t,f,r,o,!1,h||l,v||u,p||c)}:{},k=C||d;return Rr(Rr({key:er(y,E),title:H().createElement(Nr,{isDsRoot:i,type:D||s,name:r?(i?"Sys"===h:Bn()(Gr).call(Gr,l))?k:Z()(a="".concat(k,"(")).call(a,g,")"):k,tag:m}),type:s,dataSource:y,bindField:E,dsType:h||l,isDataGridDs:v||u,isSubDataGridDs:p||c,viewName:C},A),{},{checkable:o&&!(f&&f.length)&&"CardGrid"!==t,selectable:!f&&!o||"CardGrid"===t&&!(f&&f.length),expandOnClickNode:"CardGrid"===t},n)}))).call(a,Boolean)},Qr=function(e,t){var n=function e(t,n){return F()(t).call(t,(function(t){var r,a,o;"object"===(0,Kn.c)(t.Name)&&(t.Name=null===(o=t.Name)||void 0===o?void 0:o.zh_CN);if((-1!==(null===(r=t.ViewName||t.Name)||void 0===r?void 0:bn()(r).call(r,n))||bn()(a=t.Key.toLowerCase()).call(a,n)>-1)&&(!t.children||0===t.children.length))return!0;var i=t.children&&e(t.children,n);return(null==i?void 0:i.length)>0?(t.children=i,!0):void 0}))};return N()(e).call(e,(function(e){if(!(null==e?void 0:e.children))return e;var r=n(e.children,t);return Rr(Rr({},e),{},{children:r})}))},Pr=function(e){var t=[],n=function e(t,n){var r=t.key,a=t.Items,o=t.dataSource,i=t.bindField;r=r||er(o,i),n.push(r),a&&U()(a).call(a,(function(t){return e(t,n)}))};return U()(e).call(e,(function(e){n(e,t)})),t},Jr=function e(t,n){var r,a=Br(t);try{for(a.s();!(r=a.n()).done;){var o=r.value,i=o.key,l=o.children;if(n===i)return!0;if(l&&l.length){var u=e(l,n);if(u)return u}}}catch(e){a.e(e)}finally{a.f()}return!1};function jr(e){var t=e.className;return H().createElement("div",{className:"".concat(t,"-empty")},H().createElement("img",{className:"".concat(t,"-empty-img"),src:Gn,width:"168",height:"96",alt:(0,W.getLangMsg)("printd.grid.key0004")}),H().createElement("div",{className:"".concat(t,"-empty-text")},(0,W.getLangMsg)("printd.grid.key0004")))}var Or=(0,V.memo)((function(e){var t=e.controlType,n=e.draggable,r=e.checkable,a=(e.meta,e.definition),o=e.onSelect,i=e.onCheck,l=e.checkedKeys,u=void 0===l?[]:l,c=e.showDefinitionId,d=e.showDataSourceTitle,s=e.filterTreeData,f=void 0===s?Tr:s,g=e.emptyNode,h=e.onDataChange,v=e.scrollToKey,p=e.expandedKeys,m=(0,Wn.c)(e,Ir),C=(0,V.useRef)(null),y=(0,V.useRef)([]),E=(0,V.useState)(""),D=(0,M.c)(E,2),A=D[0],k=D[1],w=(0,V.useState)(!1),b=(0,M.c)(w,2),x=(b[0],b[1],(0,V.useState)([v])),S=(0,M.c)(x,2),I=S[0],B=S[1],L=(0,V.useContext)(W.SelectionContext),R=(0,V.useContext)(W.DataContext),T=(0,V.useState)(""),G=(0,M.c)(T,2),Q=(G[0],G[1]),P=(0,V.useContext)(W.GlobalConfigContext).env,J=L.getSelection(),j=(0,V.useState)((function(){return Zr(t,f(a),c,r)})),O=(0,M.c)(j,2),U=O[0],K=O[1],q=(0,V.useMemo)((function(){return v&&Jr(U,v)?{scrollToKey:v}:{}}),[v,U]),X=(0,V.useState)((function(){var e,t,n=[];m.expandAll?n=Pr(U):n=N()(t=U||[]).call(t,(function(e){return e.key}));return Z()(e=[]).call(e,(0,kn.c)(n),(0,kn.c)(p||[]))})),_=(0,M.c)(X,2),$=_[0],ee=_[1];(0,V.useEffect)((function(){t&&Q(t)}),[t]),(0,V.useEffect)((function(){var e=function(e){var t,n=R.findControl(e)||{},r=R.findControl(n.parentId)||{};if(n&&null!=n&&n.parentId&&Bn()(t=["Text","Barcode","QRCode","Image"]).call(t,n.type)){var a,o=R.findControl(r.parentId)||{},i="DataGrid"===o.type&&Bn()(a=["Detail","Group"]).call(a,r.cellType);return("CardGrid"===o.type||i)&&o.dataSource}var l,u="DataGrid"===r.type&&Bn()(l=["Detail","Group"]).call(l,n.cellType);return("CardGrid"===r.type||u)&&r.dataSource}(J[0]);e&&"SubDataGrid"!==t&&(a=br(e,a))}),[]),(0,V.useEffect)((function(){K((function(e){var n,o=Zr(t,f(a),c,r),i=N()(n=F()(o).call(o,(function(t){var n=N()(e).call(e,(function(e){return e.key}));return!Bn()(n).call(n,t.key)}))).call(n,(function(e){return e.key}));return ee((function(e){var t;return Z()(t=[]).call(t,(0,kn.c)(e),(0,kn.c)(i))})),o}))}),[a,r]),(0,V.useEffect)((function(){K((function(){var e=Zr(t,f(a),c,r),n=Qr(e,A);return"CardGrid"!==t&&(n=F()(n).call(n,(function(e){var t;return null==e||null===(t=e.children)||void 0===t?void 0:t.length}))),n}))}),[c]),(0,V.useEffect)((function(){h&&h(U)}),[U]),(0,V.useEffect)((function(){I.length&&!v&&B([])}),[J,v]);var te=(0,V.useCallback)((function(e){var t=e.event,n=e.node;if(((null==n?void 0:n.Items)||[]).length)return t.preventDefault();(t=t||window.event).currentTarget.style.backgroundColor="#fff",t.currentTarget.style.color="#000";var r={};for(var a in n)"function"!=typeof n[a]&&"title"!==a&&(r[a]=n[a]);var o={type:"dataSource",data:r,showDataSourceTitle:d};P[W.CONTROL_DRAG_DATA]=o}),[d]),ne=(0,V.useCallback)((function(e){var t=e.event;e.node;(t=t||window.event).currentTarget.style.backgroundColor="",t.currentTarget.style.color=""}),[]),re=(0,V.useCallback)((function(e){e.Key;var n=e.Items,r=e.key,a=e.DsType,o="print-tree-node";return!(n&&n.length)&&Bn()(r).call(r,".")&&(o+=" print-tree-node-children"),n&&n.length&&(o+=" print-tree-node-parent"),"CardGrid"===t||"Main"!==a&&"Custom"!==a&&"Sys"!==a&&"Ref"!==a||(o+=" print-tree-root"),o}),[U]),ae=gr(),oe=(0,M.c)(ae,2),le=oe[0],ue=oe[1];ue.height,ue.width;return A||null!=U&&U.length||!g?H().createElement(H().Fragment,null,H().createElement(z.Input,{style:{marginBottom:12,width:"100%"},ref:C,value:A,placeholder:(0,W.getLangMsg)("printd.components.key0022"),borderType:"bordered",onChange:function(e){var n=e.target.value,o=Zr(t,f(a),c,r);if(n){var i=Qr(o,n);"CardGrid"!==t&&(i=F()(i).call(i,(function(e){var t;return null==e||null===(t=e.children)||void 0===t?void 0:t.length}))),A||(y.current=$),K(i);var l=Pr(i);ee(l)}else Y().isEqual(o,U)||K(o),ee(y.current);k(n)},allowClear:!0,suffix:H().createElement("div",null,H().createElement(z.Icon,{type:"search",style:{cursor:"pointer"}}))}),!A||null!=U&&U.length?H().createElement("div",{className:"kd-datasource-tree",ref:le},H().createElement("div",{className:"tree-wrap"},H().createElement(z.Tree,(0,ie.c)({name:"definition",draggable:!!n,checkable:!!r,setTreeNodeClassName:re},q,{expandedKeys:$,showIcon:!1,style:{width:"100%"},onDragStart:te,onDragEnd:ne,onExpand:function(e,t){var n,r=t.expanded,a=t.node.key,o=F()(e).call(e,Boolean);o=r?Z()(n=[a]).call(n,(0,kn.c)(o)):F()(o).call(o,(function(e){return e!==a})),ee(o)},treeData:U,onSelect:function(e,n){var r=n.checked,a=n.node,i=n.event;B(e),"CardGrid"===t?(a.key=[a.key],o(a,t)):o(r,a,i)},selectedKeys:I,onCheck:i,checkedKeys:u,virtual:!1})))):H().createElement(jr,{className:"left-datasource"})):g})),Ur=Or;function zr(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wr(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?U()(n=zr(Object(a),!0)).call(n,(function(t){(0,L.c)(e,t,a[t])})):b()?S()(e,b()(a)):U()(r=zr(Object(a))).call(r,(function(t){B()(e,t,k()(a,t))}))}return e}function Kr(e){var t=e.className;return H().createElement("div",{className:"".concat(t,"-empty")},H().createElement("img",{className:"".concat(t,"-empty-img"),src:Gn,width:"168",height:"96",alt:(0,W.getLangMsg)("printd.grid.key0004")}),H().createElement("div",{className:"".concat(t,"-empty-text")},(0,W.getLangMsg)("printd.grid.key0004")))}var Vr=function(e){var t=e.visible,n=e.checkable,r=e.meta,a=e.definition,o=e.onSelect,i=e.className,l=e.emptyNode,u=void 0===l?H().createElement(Kr,{className:"left-datasource"}):l,c=e.expandedKeys,d=void 0===c?[]:c,s=e.selectedKey,f=e.filterTreeData,g=e.activedSelectId,h=e.checkedKeys,v=void 0===h?[]:h,p=e.modalTitle,m=e.onCancel,C=(0,V.useState)(!1),y=(0,M.c)(C,2),E=y[0],D=y[1],A=(0,V.useState)(!0),k=(0,M.c)(A,2),w=k[0],b=k[1],x=(0,V.useState)([]),S=(0,M.c)(x,2),I=S[0],B=S[1],L=(0,V.useState)(v),R=(0,M.c)(L,2),T=R[0],G=R[1],Q=(0,V.useRef)(null),P=(0,V.useContext)(W.DataContext),J=(0,V.useContext)(W.SelectionContext),j=(0,V.useContext)(W.DataFactoryContext).modelFactory,O=P.getRootId(),U=(P.findControl(O).language,s||Nn({dataContext:P,selectionContext:J,meta:r,activedSelectId:g,modelFactory:j})),K=(0,V.useCallback)((function(e,t){var n,r,o,i=t.checked,l=t.node,u=(t.event,ur(l)),c=i?Z()(n=[]).call(n,(0,kn.c)(T),(0,kn.c)(u)):F()(T).call(T,(function(e){return!Bn()(u).call(u,e)})),d=F()(r=N()(o=F()(c).call(c,Boolean)).call(o,(function(e){return Wr({key:e},or(e,a))}))).call(r,(function(e){var t=e.dataSource,n=e.Key,r=e.Items;return!r||!r.length||!(Fn()(t).call(t,n)||r&&r.length)})),s=N()(d).call(d,(function(e){return e.key}));G(s),B(d)}),[T,G]);(0,V.useEffect)((function(){if(t){G(v);var e=N()(v).call(v,(function(e){return Wr({key:e},or(e,a))}));B(e)}}),[t]);var q=H().createElement(H().Fragment,null,!w&&H().createElement(z.Checkbox,{className:"".concat(i,"-modal-footer-checkbox"),checked:E,onChange:function(e){var t=!!e.target.checked;D(t)}},(0,W.getLangMsg)("printd.grid.key0101")),H().createElement("div",{className:"".concat(i,"-modal-footer-btns")},H().createElement(z.Button,{onClick:m,type:"second",className:"".concat(i,"-modal-cancel-btn")},(0,W.getLangMsg)("printd.components.key0011")),H().createElement(z.Button,{onClick:function(){if(n)o(I);else{var e=Q.current;o(e)}},type:"primary",className:"".concat(i,"-modal-ok-btn")},(0,W.getLangMsg)("printd.components.key0012"))));return H().createElement(z.Modal,{body:H().createElement(Ur,{checkable:!!n,scrollToKey:U,meta:r,definition:a,filterTreeData:f,onSelect:function(e,t,n){Q.current=t},showDefinitionId:E,emptyNode:u,onDataChange:function(e){var t=!(e&&e.length);b(t)},expandedKeys:d,onCheck:K,checkedKeys:T}),bodyStyle:{justifyContent:"start",alignItems:"start",overflowX:"hidden",overflowY:"auto",flexDirection:"column"},titleIcon:null,className:"".concat(i,"-modal"),footer:q,maskClosable:!1,width:512,height:614,title:p||(0,W.getLangMsg)("printd.components.key0001"),closable:!0,destroyOnClose:!0,onCancel:m,onOk:m,mask:!0,visible:t})},Hr=n(52484),qr=n(71536),Yr=n.n(qr),Xr=(0,V.memo)((0,V.forwardRef)((function(e,t){var n,r,a=e.className,o=e.children,i=e.tipText,l=(0,V.useState)(!1),u=(0,M.c)(l,2),c=u[0],d=u[1],s=(0,V.useState)(!1),f=(0,M.c)(s,2),g=f[0],h=f[1],v=(0,V.useState)(0)[1];(0,V.useImperativeHandle)(t,(function(){return{show:function(){!c&&d(!0)},hide:function(){c&&d(!1)}}}),[c]),(0,V.useEffect)((function(){var e=function(){v((function(e){return e+1}))};return window.addEventListener("scroll",e),window.addEventListener("resize",e),function(){window.removeEventListener("scroll",e),window.addEventListener("resize",e)}}),[c]);var p=(0,V.useRef)(0),m=(0,V.useRef)(0),C=(0,V.useRef)(null),y=(0,V.useRef)(null),E=H().cloneElement(o,{ref:C});(0,V.useEffect)((function(){h(!0)}),[o]);var D,A=(0,Hr.c)(C,{rootMargin:"0px",threshold:1});(D=null==A?void 0:A.isIntersecting)&&c&&ue()((function(){y.current&&(y.current.style.display=D?"flex":"none")}));var k=(0,V.useRef)(null),w=(0,V.useRef)(null),b=function e(){if(c&&!w.current){if(y.current&&C.current){var t,n,r=null!==(t=null===(n=C.current)||void 0===n?void 0:n.getBoundingClientRect())&&void 0!==t?t:{left:0,top:0};!function(e,t){e-1===p.current&&m.current===t+35||(p.current=e-1,m.current=t+35,y.current&&(y.current.style.left="".concat(e-1,"px"),y.current.style.top="".concat(t+35,"px")))}(r.left,r.top)}else W.console.error("miss errorDivRef or inputRef",y,C);window.cancelAnimationFrame(k.current),k.current=window.requestAnimationFrame((function(){e()}))}};0!==(null==A?void 0:A.intersectionRatio)&&ue()((function(){window.cancelAnimationFrame(k.current),b()}),0),(0,V.useEffect)((function(){return function(){window.cancelAnimationFrame(k.current),w.current=!0}}),[]);var x=null!==(n=null===(r=C.current)||void 0===r?void 0:r.getBoundingClientRect())&&void 0!==n?n:{left:0,top:0},S=x.left,I=x.top;return g&&H().createElement(H().Fragment,null,E,C.current&&c&&Yr().createPortal(H().createElement("div",{ref:y,className:"".concat(a,"-tooltip"),style:{display:c?"flex":"none",left:S-1,top:I+35}},i||(0,W.getLangMsg)("printd.grid.key0005")),document.body))}))),_r=Xr,$r=n(2992),ea=n.n($r),ta=n(85344),na=n.n(ta),ra=n(89472),aa=n.n(ra),oa=n(96416),ia=n.n(oa),la=n(30479),ua=n.n(la),ca=n(11872),da=n.n(ca),sa=n(59312),fa=n.n(sa),ga=n(53684),ha=n.n(ga),va=n(30856),pa=n.n(va),ma=n(83789),Ca=na().mark(Zi),ya=na().mark(Ui),Ea=na().mark(_i);function Da(e,t){var n=void 0!==Jn()&&On()(e)||e["@@iterator"];if(!n){if(zn()(e)||(n=function(e,t){var n;if(!e)return;if("string"==typeof e)return Aa(e,t);var r=Sn()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Qn()(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Aa(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw o}}}}function Aa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ka=function(e,t){var n=e.current,r=e.affinity;if(null!=n){var a=Fa.transform(n,t,{affinity:r});e.current=a,null==a&&e.unref()}},wa=function(e,t){var n=e.current,r=e.affinity;if(null!=n){var a=ro.transform(n,t,{affinity:r});e.current=a,null==a&&e.unref()}},ba=function(e,t){var n=e.current,r=e.affinity;if(null!=n){var a=Oa.transform(n,t,{affinity:r});e.current=a,null==a&&e.unref()}},xa=new(aa()),Sa=new(aa()),Ia=new(aa()),Ba=new(aa()),Ma=new(aa()),La=new(aa()),Ra=new(aa()),Fa={ancestors:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=ia()(t),r=void 0!==n&&n,a=Fa.levels(e,t);return a=r?Sn()(a).call(a,1):Sn()(a).call(a,0,-1)},common:function(e,t){for(var n=[],r=0;r<e.length&&r<t.length;r++){var a=e[r];if(a!==t[r])break;n.push(a)}return n},compare:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1}return 0},endsAfter:function(e,t){var n=e.length-1,r=Sn()(e).call(e,0,n),a=Sn()(t).call(t,0,n),o=e[n],i=t[n];return Fa.equals(r,a)&&o>i},endsAt:function(e,t){var n=e.length,r=Sn()(e).call(e,0,n),a=Sn()(t).call(t,0,n);return Fa.equals(r,a)},endsBefore:function(e,t){var n=e.length-1,r=Sn()(e).call(e,0,n),a=Sn()(t).call(t,0,n),o=e[n],i=t[n];return Fa.equals(r,a)&&o<i},equals:function(e,t){return e.length===t.length&&ua()(e).call(e,(function(e,n){return e===t[n]}))},hasPrevious:function(e){return e[e.length-1]>0},isAfter:function(e,t){return 1===Fa.compare(e,t)},isAncestor:function(e,t){return e.length<t.length&&0===Fa.compare(e,t)},isBefore:function(e,t){return-1===Fa.compare(e,t)},isChild:function(e,t){return e.length===t.length+1&&0===Fa.compare(e,t)},isCommon:function(e,t){return e.length<=t.length&&0===Fa.compare(e,t)},isDescendant:function(e,t){return e.length>t.length&&0===Fa.compare(e,t)},isParent:function(e,t){return e.length+1===t.length&&0===Fa.compare(e,t)},isPath:function(e){return zn()(e)&&(0===e.length||"number"==typeof e[0])},isSibling:function(e,t){if(e.length!==t.length)return!1;var n=Sn()(e).call(e,0,-1),r=Sn()(t).call(t,0,-1);return e[e.length-1]!==t[t.length-1]&&Fa.equals(n,r)},levels:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=ia()(t),r=void 0!==n&&n,a=[],o=0;o<=e.length;o++)a.push(Sn()(e).call(e,0,o));return r&&ia()(a).call(a),a},next:function(e){var t;if(0===e.length)throw new Error("Cannot get the next path of a root path [".concat(e,"], because it has no next index."));var n=e[e.length-1];return Z()(t=Sn()(e).call(e,0,-1)).call(t,n+1)},operationCanTransformPath:function(e){switch(e.type){case"insert_node":case"remove_node":case"merge_node":case"split_node":case"move_node":return!0;default:return!1}},parent:function(e){if(0===e.length)throw new Error("Cannot get the parent path of the root path [".concat(e,"]."));return Sn()(e).call(e,0,-1)},previous:function(e){var t;if(0===e.length)throw new Error("Cannot get the previous path of a root path [".concat(e,"], because it has no previous index."));var n=e[e.length-1];if(n<=0)throw new Error("Cannot get the previous path of a first child path [".concat(e,"] because it would result in a negative index."));return Z()(t=Sn()(e).call(e,0,-1)).call(t,n-1)},relative:function(e,t){var n;if(!Fa.isAncestor(t,e)&&!Fa.equals(e,t))throw new Error(Z()(n="Cannot get the relative path of [".concat(e,"] inside ancestor [")).call(n,t,"], because it is not above or equal to the path."));return Sn()(e).call(e,t.length)},transform:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)return null;var r=(0,kn.c)(e),a=n.affinity,o=void 0===a?"forward":a;if(0===e.length)return r;switch(t.type){case"insert_node":var i=t.path;(Fa.equals(i,r)||Fa.endsBefore(i,r)||Fa.isAncestor(i,r))&&(r[i.length-1]+=1);break;case"remove_node":var l=t.path;if(Fa.equals(l,r)||Fa.isAncestor(l,r))return null;Fa.endsBefore(l,r)&&(r[l.length-1]-=1);break;case"merge_node":var u=t.path,c=t.position;Fa.equals(u,r)||Fa.endsBefore(u,r)?r[u.length-1]-=1:Fa.isAncestor(u,r)&&(r[u.length-1]-=1,r[u.length]+=c);break;case"split_node":var d=t.path,s=t.position;if(Fa.equals(d,r)){if("forward"===o)r[r.length-1]+=1;else if("backward"!==o)return null}else Fa.endsBefore(d,r)?r[d.length-1]+=1:Fa.isAncestor(d,r)&&e[d.length]>=s&&(r[d.length-1]+=1,r[d.length]-=s);break;case"move_node":var f=t.path,g=t.newPath;if(Fa.equals(f,g))return r;if(Fa.isAncestor(f,r)||Fa.equals(f,r)){var h=Sn()(g).call(g);return Fa.endsBefore(f,g)&&f.length<g.length&&(h[f.length-1]-=1),Z()(h).call(h,Sn()(r).call(r,f.length))}Fa.isSibling(f,g)&&(Fa.isAncestor(g,r)||Fa.equals(g,r))?Fa.endsBefore(f,r)?r[f.length-1]-=1:r[f.length-1]+=1:Fa.endsBefore(g,r)||Fa.equals(g,r)||Fa.isAncestor(g,r)?(Fa.endsBefore(f,r)&&(r[f.length-1]-=1),r[g.length-1]+=1):Fa.endsBefore(f,r)&&(Fa.equals(g,r)&&(r[g.length-1]+=1),r[f.length-1]-=1)}return r}};function Ta(e,t,n){return t in e?B()(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Na(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ga(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)U()(n=Na(Object(r),!0)).call(n,(function(t){Ta(e,t,r[t])}));else if(b())S()(e,b()(r));else{var a;U()(a=Na(Object(r))).call(a,(function(t){B()(e,t,k()(r,t))}))}}return e}var Za={transform:function(e,t){e.children=(0,ma.eQ)(e.children);var n=e.selection&&(0,ma.eQ)(e.selection);try{n=function(e,t,n){switch(n.type){case"insert_node":var r,a=n.path,o=n.node,i=Ha.parent(e,a),l=a[a.length-1];if(l>i.children.length)throw new Error('Cannot apply an "insert_node" operation at path ['.concat(a,"] because the destination is past the end of the node."));if(da()(r=i.children).call(r,l,0,o),t){var u,c=Da(Oa.points(t));try{for(c.s();!(u=c.n()).done;){var d=(0,M.c)(u.value,2),s=d[0];t[d[1]]=ro.transform(s,n)}}catch(e){c.e(e)}finally{c.f()}}break;case"insert_text":var f,g,h=n.path,v=n.offset,p=n.text;if(0===p.length)break;var m=Ha.leaf(e,h),C=Sn()(f=m.text).call(f,0,v),y=Sn()(g=m.text).call(g,v);if(m.text=C+p+y,t){var E,D=Da(Oa.points(t));try{for(D.s();!(E=D.n()).done;){var A=(0,M.c)(E.value,2),k=A[0];t[A[1]]=ro.transform(k,n)}}catch(e){D.e(e)}finally{D.f()}}break;case"merge_node":var w,b=n.path,x=Ha.get(e,b),S=Fa.previous(b),I=Ha.get(e,S),B=Ha.parent(e,b),L=b[b.length-1];if(fo.isText(x)&&fo.isText(I))I.text+=x.text;else{var R,F,T;if(fo.isText(x)||fo.isText(I))throw new Error(Z()(R=Z()(F='Cannot apply a "merge_node" operation at path ['.concat(b,"] to nodes of different interfaces: ")).call(F,oo.stringify(x)," ")).call(R,oo.stringify(I)));(T=I.children).push.apply(T,(0,kn.c)(x.children))}if(da()(w=B.children).call(w,L,1),t){var N,G=Da(Oa.points(t));try{for(G.s();!(N=G.n()).done;){var Q=(0,M.c)(N.value,2),P=Q[0];t[Q[1]]=ro.transform(P,n)}}catch(e){G.e(e)}finally{G.f()}}break;case"move_node":var J,j,O,U=n.path,z=n.newPath;if(Fa.isAncestor(U,z))throw new Error(Z()(O="Cannot move a path [".concat(U,"] to new path [")).call(O,z,"] because the destination is inside itself."));var W=Ha.get(e,U),K=Ha.parent(e,U),V=U[U.length-1];da()(J=K.children).call(J,V,1);var H=Fa.transform(U,n),q=Ha.get(e,Fa.parent(H)),Y=H[H.length-1];if(da()(j=q.children).call(j,Y,0,W),t){var X,_=Da(Oa.points(t));try{for(_.s();!(X=_.n()).done;){var $=(0,M.c)(X.value,2),ee=$[0];t[$[1]]=ro.transform(ee,n)}}catch(e){_.e(e)}finally{_.f()}}break;case"remove_node":var te,ne=n.path,re=ne[ne.length-1],ae=Ha.parent(e,ne);if(da()(te=ae.children).call(te,re,1),t){var oe,ie=Da(Oa.points(t));try{for(ie.s();!(oe=ie.n()).done;){var le=(0,M.c)(oe.value,2),ue=le[0],ce=le[1],de=ro.transform(ue,n);if(null!=t&&null!=de)t[ce]=de;else{var se,fe=void 0,ge=void 0,he=Da(Ha.texts(e));try{for(he.s();!(se=he.n()).done;){var ve=(0,M.c)(se.value,2),pe=ve[0],me=ve[1];if(-1!==Fa.compare(me,ne)){ge=[pe,me];break}fe=[pe,me]}}catch(e){he.e(e)}finally{he.f()}var Ce=!1;fe&&ge&&(Ce=Fa.equals(ge[1],ne)?!Fa.hasPrevious(ge[1]):Fa.common(fe[1],ne).length<Fa.common(ge[1],ne).length),fe&&!Ce?(ue.path=fe[1],ue.offset=fe[0].text.length):ge?(ue.path=ge[1],ue.offset=0):t=null}}}catch(e){ie.e(e)}finally{ie.f()}}break;case"remove_text":var ye,Ee,De=n.path,Ae=n.offset,ke=n.text;if(0===ke.length)break;var we=Ha.leaf(e,De),be=Sn()(ye=we.text).call(ye,0,Ae),xe=Sn()(Ee=we.text).call(Ee,Ae+ke.length);if(we.text=be+xe,t){var Se,Ie=Da(Oa.points(t));try{for(Ie.s();!(Se=Ie.n()).done;){var Be=(0,M.c)(Se.value,2),Me=Be[0];t[Be[1]]=ro.transform(Me,n)}}catch(e){Ie.e(e)}finally{Ie.f()}}break;case"set_node":var Le=n.path,Re=n.properties,Fe=n.newProperties;if(0===Le.length)throw new Error("Cannot set properties on the root node!");var Te=Ha.get(e,Le);for(var Ne in Fe){if("children"===Ne||"text"===Ne)throw new Error('Cannot set the "'.concat(Ne,'" property of nodes!'));var Ge=Fe[Ne];null==Ge?delete Te[Ne]:Te[Ne]=Ge}for(var Ze in Re)Fe.hasOwnProperty(Ze)||delete Te[Ze];break;case"set_selection":var Qe=n.newProperties;if(null==Qe)t=Qe;else{if(null==t){if(!Oa.isRange(Qe))throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat(oo.stringify(Qe)," when there is no current selection."));t=Ga({},Qe)}for(var Pe in Qe){var Je=Qe[Pe];if(null==Je){if("anchor"===Pe||"focus"===Pe)throw new Error('Cannot remove the "'.concat(Pe,'" selection property'));delete t[Pe]}else t[Pe]=Je}}break;case"split_node":var je,Oe=n.path,Ue=n.position,ze=n.properties;if(0===Oe.length)throw new Error('Cannot apply a "split_node" operation at path ['.concat(Oe,"] because the root node cannot be split."));var We,Ke=Ha.get(e,Oe),Ve=Ha.parent(e,Oe),He=Oe[Oe.length-1];if(fo.isText(Ke)){var qe,Ye,Xe=Sn()(qe=Ke.text).call(qe,0,Ue),_e=Sn()(Ye=Ke.text).call(Ye,Ue);Ke.text=Xe,We=Ga(Ga({},ze),{},{text:_e})}else{var $e,et,tt=Sn()($e=Ke.children).call($e,0,Ue),nt=Sn()(et=Ke.children).call(et,Ue);Ke.children=tt,We=Ga(Ga({},ze),{},{children:nt})}if(da()(je=Ve.children).call(je,He+1,0,We),t){var rt,at=Da(Oa.points(t));try{for(at.s();!(rt=at.n()).done;){var ot=(0,M.c)(rt.value,2),it=ot[0];t[ot[1]]=ro.transform(it,n)}}catch(e){at.e(e)}finally{at.f()}}}return t}(e,n,t)}finally{e.children=(0,ma.o7)(e.children),e.selection=n?(0,ma.Wl)(n)?(0,ma.o7)(n):n:null}}},Qa=function e(t,n){for(var r in t){var a=t[r],o=n[r];if(pa()(a)&&pa()(o)){if(!e(a,o))return!1}else if(zn()(a)&&zn()(o)){if(a.length!==o.length)return!1;for(var i=0;i<a.length;i++)if(a[i]!==o[i])return!1}else if(a!==o)return!1}for(var l in n)if(void 0===t[l]&&void 0!==n[l])return!1;return!0};function Pa(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=C()(e);for(r=0;r<o.length;r++)n=o[r],bn()(t).call(t,n)>=0||(a[n]=e[n]);return a}(e,t);if(D()){var o=D()(e);for(r=0;r<o.length;r++)n=o[r],bn()(t).call(t,n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Ja=["anchor","focus"];function ja(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}var Oa={edges:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=ia()(t),r=void 0!==n&&n,a=e.anchor,o=e.focus;return Oa.isBackward(e)===r?[a,o]:[o,a]},end:function(e){var t=Oa.edges(e),n=(0,M.c)(t,2)[1];return n},equals:function(e,t){return ro.equals(e.anchor,t.anchor)&&ro.equals(e.focus,t.focus)},includes:function(e,t){if(Oa.isRange(t)){if(Bn()(Oa).call(Oa,e,t.anchor)||Bn()(Oa).call(Oa,e,t.focus))return!0;var n=Oa.edges(e),r=(0,M.c)(n,2),a=r[0],o=r[1],i=Oa.edges(t),l=(0,M.c)(i,2),u=l[0],c=l[1];return ro.isBefore(a,u)&&ro.isAfter(o,c)}var d=Oa.edges(e),s=(0,M.c)(d,2),f=s[0],g=s[1],h=!1,v=!1;return ro.isPoint(t)?(h=ro.compare(t,f)>=0,v=ro.compare(t,g)<=0):(h=Fa.compare(t,f.path)>=0,v=Fa.compare(t,g.path)<=0),h&&v},intersection:function(e,t){var n=Pa(e,Ja),r=Oa.edges(e),a=(0,M.c)(r,2),o=a[0],i=a[1],l=Oa.edges(t),u=(0,M.c)(l,2),c=u[0],d=u[1],s=ro.isBefore(o,c)?c:o,f=ro.isBefore(i,d)?i:d;return ro.isBefore(f,s)?null:function(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)U()(n=ja(Object(r),!0)).call(n,(function(t){Ta(e,t,r[t])}));else if(b())S()(e,b()(r));else{var a;U()(a=ja(Object(r))).call(a,(function(t){B()(e,t,k()(r,t))}))}}return e}({anchor:s,focus:f},n)},isBackward:function(e){var t=e.anchor,n=e.focus;return ro.isAfter(t,n)},isCollapsed:function(e){var t=e.anchor,n=e.focus;return ro.equals(t,n)},isExpanded:function(e){return!Oa.isCollapsed(e)},isForward:function(e){return!Oa.isBackward(e)},isRange:function(e){return pa()(e)&&ro.isPoint(e.anchor)&&ro.isPoint(e.focus)},points:na().mark((function e(t){return na().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,[t.anchor,"anchor"];case 2:return e.next=4,[t.focus,"focus"];case 4:case"end":return e.stop()}}),e)})),start:function(e){var t=Oa.edges(e),n=(0,M.c)(t,1)[0];return n},transform:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,ma.Ut)(e,(function(e){if(null===e)return null;var r,a,o=n.affinity,i=void 0===o?"inward":o;if("inward"===i){var l=Oa.isCollapsed(e);Oa.isForward(e)?(r="forward",a=l?r:"backward"):(r="backward",a=l?r:"forward")}else"outward"===i?Oa.isForward(e)?(r="backward",a="forward"):(r="forward",a="backward"):(r=i,a=i);var u=ro.transform(e.anchor,t,{affinity:r}),c=ro.transform(e.focus,t,{affinity:a});if(!u||!c)return null;e.anchor=u,e.focus=c}))}},Ua=function(e){return pa()(e)&&Ha.isNodeList(e.children)&&!$a.isEditor(e)},za={isAncestor:function(e){return pa()(e)&&Ha.isNodeList(e.children)},isElement:Ua,isElementList:function(e){return zn()(e)&&ua()(e).call(e,(function(e){return za.isElement(e)}))},isElementProps:function(e){return void 0!==e.children},isElementType:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"type";return Ua(e)&&e[n]===t},matches:function(e,t){for(var n in t)if("children"!==n&&e[n]!==t[n])return!1;return!0}},Wa=["children"],Ka=["text"],Va=new(aa()),Ha={ancestor:function(e,t){var n,r=Ha.get(e,t);if(fo.isText(r))throw new Error(Z()(n="Cannot get the ancestor node at path [".concat(t,"] because it refers to a text node instead: ")).call(n,oo.stringify(r)));return r},ancestors:na().mark((function e(t,n){var r,a,o,i,l,u,c=arguments;return na().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=c.length>2&&void 0!==c[2]?c[2]:{},a=Da(Fa.ancestors(n,r)),e.prev=2,a.s();case 4:if((o=a.n()).done){e.next=12;break}return i=o.value,l=Ha.ancestor(t,i),u=[l,i],e.next=10,u;case 10:e.next=4;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),a.e(e.t0);case 17:return e.prev=17,a.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[2,14,17,20]])})),child:function(e,t){if(fo.isText(e))throw new Error("Cannot get the child of a text node: ".concat(oo.stringify(e)));var n,r=e.children[t];if(null==r)throw new Error(Z()(n="Cannot get child at index `".concat(t,"` in node: ")).call(n,oo.stringify(e)));return r},children:na().mark((function(e,t){var n,r,a,o,i,l,u,c,d=arguments;return na().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:n=d.length>2&&void 0!==d[2]?d[2]:{},r=ia()(n),a=void 0!==r&&r,o=Ha.ancestor(e,t),i=o.children,l=a?i.length-1:0;case 5:if(!(a?l>=0:l<i.length)){s.next=13;break}return u=Ha.child(o,l),c=Z()(t).call(t,l),s.next=10,[u,c];case 10:l=a?l-1:l+1,s.next=5;break;case 13:case"end":return s.stop()}}),i)})),common:function(e,t,n){var r=Fa.common(t,n);return[Ha.get(e,r),r]},descendant:function(e,t){var n,r=Ha.get(e,t);if($a.isEditor(r))throw new Error(Z()(n="Cannot get the descendant node at path [".concat(t,"] because it refers to the root editor node instead: ")).call(n,oo.stringify(r)));return r},descendants:na().mark((function e(t){var n,r,a,o,i,l,u=arguments;return na().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=u.length>1&&void 0!==u[1]?u[1]:{},r=Da(Ha.nodes(t,n)),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=11;break}if(o=(0,M.c)(a.value,2),i=o[0],0===(l=o[1]).length){e.next=9;break}return e.next=9,[i,l];case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),r.e(e.t0);case 16:return e.prev=16,r.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,13,16,19]])})),elements:na().mark((function e(t){var n,r,a,o,i,l,u=arguments;return na().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=u.length>1&&void 0!==u[1]?u[1]:{},r=Da(Ha.nodes(t,n)),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=11;break}if(o=(0,M.c)(a.value,2),i=o[0],l=o[1],!za.isElement(i)){e.next=9;break}return e.next=9,[i,l];case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),r.e(e.t0);case 16:return e.prev=16,r.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,13,16,19]])})),extractProps:function(e){return za.isAncestor(e)?Pa(e,Wa):Pa(e,Ka)},first:function(e,t){for(var n=Sn()(t).call(t),r=Ha.get(e,n);r&&!fo.isText(r)&&0!==r.children.length;)r=r.children[0],n.push(0);return[r,n]},fragment:function(e,t){if(fo.isText(e))throw new Error("Cannot get a fragment starting from a root text node: ".concat(oo.stringify(e)));var n=(0,ma.Ut)({children:e.children},(function(e){var n,r=Oa.edges(t),a=(0,M.c)(r,2),o=a[0],i=a[1],l=Ha.nodes(e,{reverse:!0,pass:function(e){var n=(0,M.c)(e,2)[1];return!Bn()(Oa).call(Oa,t,n)}}),u=Da(l);try{for(u.s();!(n=u.n()).done;){var c=(0,M.c)(n.value,2)[1];if(!Bn()(Oa).call(Oa,t,c)){var d,s=Ha.parent(e,c),f=c[c.length-1];da()(d=s.children).call(d,f,1)}if(Fa.equals(c,i.path)){var g,h=Ha.leaf(e,c);h.text=Sn()(g=h.text).call(g,0,i.offset)}if(Fa.equals(c,o.path)){var v,p=Ha.leaf(e,c);p.text=Sn()(v=p.text).call(v,o.offset)}}}catch(e){u.e(e)}finally{u.f()}$a.isEditor(e)&&(e.selection=null)}));return n.children},get:function(e,t){for(var n=e,r=0;r<t.length;r++){var a,o=t[r];if(fo.isText(n)||!n.children[o])throw new Error(Z()(a="Cannot find a descendant at path [".concat(t,"] in node: ")).call(a,oo.stringify(e)));n=n.children[o]}return n},has:function(e,t){for(var n=e,r=0;r<t.length;r++){var a=t[r];if(fo.isText(n)||!n.children[a])return!1;n=n.children[a]}return!0},isNode:function(e){return fo.isText(e)||za.isElement(e)||$a.isEditor(e)},isNodeList:function(e){if(!zn()(e))return!1;var t=Va.get(e);if(void 0!==t)return t;var n=ua()(e).call(e,(function(e){return Ha.isNode(e)}));return Va.set(e,n),n},last:function(e,t){for(var n=Sn()(t).call(t),r=Ha.get(e,n);r&&!fo.isText(r)&&0!==r.children.length;){var a=r.children.length-1;r=r.children[a],n.push(a)}return[r,n]},leaf:function(e,t){var n,r=Ha.get(e,t);if(!fo.isText(r))throw new Error(Z()(n="Cannot get the leaf node at path [".concat(t,"] because it refers to a non-leaf node: ")).call(n,oo.stringify(r)));return r},levels:na().mark((function e(t,n){var r,a,o,i,l,u=arguments;return na().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=u.length>2&&void 0!==u[2]?u[2]:{},a=Da(Fa.levels(n,r)),e.prev=2,a.s();case 4:if((o=a.n()).done){e.next=11;break}return i=o.value,l=Ha.get(t,i),e.next=9,[l,i];case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),a.e(e.t0);case 16:return e.prev=16,a.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,13,16,19]])})),matches:function(e,t){return za.isElement(e)&&za.isElementProps(t)&&za.matches(e,t)||fo.isText(e)&&fo.isTextProps(t)&&fo.matches(e,t)},nodes:na().mark((function e(t){var n,r,a,o,i,l,u,c,d,s,f,g,h,v=arguments;return na().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=(n=v.length>1&&void 0!==v[1]?v[1]:{}).pass,a=ia()(n),o=void 0!==a&&a,i=n.from,l=void 0===i?[]:i,u=n.to,c=new(fa()),d=[],s=t;case 6:if(!u||!(o?Fa.isBefore(d,u):Fa.isAfter(d,u))){e.next=9;break}return e.abrupt("break",37);case 9:if(c.has(s)){e.next=12;break}return e.next=12,[s,d];case 12:if(c.has(s)||fo.isText(s)||0===s.children.length||null!=r&&!1!==r([s,d])){e.next=19;break}return c.add(s),f=o?s.children.length-1:0,Fa.isAncestor(d,l)&&(f=l[d.length]),d=Z()(d).call(d,f),s=Ha.get(t,d),e.abrupt("continue",6);case 19:if(0!==d.length){e.next=21;break}return e.abrupt("break",37);case 21:if(o){e.next=27;break}if(g=Fa.next(d),!Ha.has(t,g)){e.next=27;break}return d=g,s=Ha.get(t,d),e.abrupt("continue",6);case 27:if(!o||0===d[d.length-1]){e.next=32;break}return h=Fa.previous(d),d=h,s=Ha.get(t,d),e.abrupt("continue",6);case 32:d=Fa.parent(d),s=Ha.get(t,d),c.add(s),e.next=6;break;case 37:case"end":return e.stop()}}),e)})),parent:function(e,t){var n=Fa.parent(t),r=Ha.get(e,n);if(fo.isText(r))throw new Error("Cannot get the parent of path [".concat(t,"] because it does not exist in the root."));return r},string:function(e){return fo.isText(e)?e.text:N()(t=e.children).call(t,Ha.string).join("");var t},texts:na().mark((function e(t){var n,r,a,o,i,l,u=arguments;return na().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=u.length>1&&void 0!==u[1]?u[1]:{},r=Da(Ha.nodes(t,n)),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=11;break}if(o=(0,M.c)(a.value,2),i=o[0],l=o[1],!fo.isText(i)){e.next=9;break}return e.next=9,[i,l];case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),r.e(e.t0);case 16:return e.prev=16,r.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,13,16,19]])}))};function qa(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ya(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)U()(n=qa(Object(r),!0)).call(n,(function(t){Ta(e,t,r[t])}));else if(b())S()(e,b()(r));else{var a;U()(a=qa(Object(r))).call(a,(function(t){B()(e,t,k()(r,t))}))}}return e}var Xa={isNodeOperation:function(e){var t;return Xa.isOperation(e)&&Fn()(t=e.type).call(t,"_node")},isOperation:function(e){if(!pa()(e))return!1;switch(e.type){case"insert_node":case"remove_node":return Fa.isPath(e.path)&&Ha.isNode(e.node);case"insert_text":case"remove_text":return"number"==typeof e.offset&&"string"==typeof e.text&&Fa.isPath(e.path);case"merge_node":return"number"==typeof e.position&&Fa.isPath(e.path)&&pa()(e.properties);case"move_node":return Fa.isPath(e.path)&&Fa.isPath(e.newPath);case"set_node":return Fa.isPath(e.path)&&pa()(e.properties)&&pa()(e.newProperties);case"set_selection":return null===e.properties&&Oa.isRange(e.newProperties)||null===e.newProperties&&Oa.isRange(e.properties)||pa()(e.properties)&&pa()(e.newProperties);case"split_node":return Fa.isPath(e.path)&&"number"==typeof e.position&&pa()(e.properties);default:return!1}},isOperationList:function(e){return zn()(e)&&ua()(e).call(e,(function(e){return Xa.isOperation(e)}))},isSelectionOperation:function(e){var t;return Xa.isOperation(e)&&Fn()(t=e.type).call(t,"_selection")},isTextOperation:function(e){var t;return Xa.isOperation(e)&&Fn()(t=e.type).call(t,"_text")},inverse:function(e){switch(e.type){case"insert_node":return Ya(Ya({},e),{},{type:"remove_node"});case"insert_text":return Ya(Ya({},e),{},{type:"remove_text"});case"merge_node":return Ya(Ya({},e),{},{type:"split_node",path:Fa.previous(e.path)});case"move_node":var t=e.newPath,n=e.path;if(Fa.equals(t,n))return e;if(Fa.isSibling(n,t))return Ya(Ya({},e),{},{path:t,newPath:n});var r=Fa.transform(n,e),a=Fa.transform(Fa.next(n),e);return Ya(Ya({},e),{},{path:r,newPath:a});case"remove_node":return Ya(Ya({},e),{},{type:"insert_node"});case"remove_text":return Ya(Ya({},e),{},{type:"insert_text"});case"set_node":var o=e.properties,i=e.newProperties;return Ya(Ya({},e),{},{properties:i,newProperties:o});case"set_selection":var l=e.properties,u=e.newProperties;return Ya(Ya({},e),{},null==l?{properties:u,newProperties:null}:null==u?{properties:null,newProperties:l}:{properties:u,newProperties:l});case"split_node":return Ya(Ya({},e),{},{type:"merge_node",path:Fa.next(e.path)})}}},_a=new(aa()),$a={above:function(e,t){return e.above(t)},addMark:function(e,t,n){e.addMark(t,n)},after:function(e,t,n){return e.after(t,n)},before:function(e,t,n){return e.before(t,n)},deleteBackward:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).unit,n=void 0===t?"character":t;e.deleteBackward(n)},deleteForward:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).unit,n=void 0===t?"character":t;e.deleteForward(n)},deleteFragment:function(e,t){e.deleteFragment(t)},edges:function(e,t){return e.edges(t)},elementReadOnly:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.elementReadOnly(t)},end:function(e,t){return e.end(t)},first:function(e,t){return e.first(t)},fragment:function(e,t){return e.fragment(t)},hasBlocks:function(e,t){return e.hasBlocks(t)},hasInlines:function(e,t){return e.hasInlines(t)},hasPath:function(e,t){return e.hasPath(t)},hasTexts:function(e,t){return e.hasTexts(t)},insertBreak:function(e){e.insertBreak()},insertFragment:function(e,t,n){e.insertFragment(t,n)},insertNode:function(e,t){e.insertNode(t)},insertSoftBreak:function(e){e.insertSoftBreak()},insertText:function(e,t){e.insertText(t)},isBlock:function(e,t){return e.isBlock(t)},isEdge:function(e,t,n){return e.isEdge(t,n)},isEditor:function(e){return function(e){var t=_a.get(e);if(void 0!==t)return t;if(!pa()(e))return!1;var n="function"==typeof e.addMark&&"function"==typeof e.apply&&"function"==typeof e.deleteFragment&&"function"==typeof e.insertBreak&&"function"==typeof e.insertSoftBreak&&"function"==typeof e.insertFragment&&"function"==typeof e.insertNode&&"function"==typeof e.insertText&&"function"==typeof e.isElementReadOnly&&"function"==typeof e.isInline&&"function"==typeof e.isSelectable&&"function"==typeof e.isVoid&&"function"==typeof e.normalizeNode&&"function"==typeof e.onChange&&"function"==typeof e.removeMark&&"function"==typeof e.getDirtyPaths&&(null===e.marks||pa()(e.marks))&&(null===e.selection||Oa.isRange(e.selection))&&Ha.isNodeList(e.children)&&Xa.isOperationList(e.operations);return _a.set(e,n),n}(e)},isElementReadOnly:function(e,t){return e.isElementReadOnly(t)},isEmpty:function(e,t){return e.isEmpty(t)},isEnd:function(e,t,n){return e.isEnd(t,n)},isInline:function(e,t){return e.isInline(t)},isNormalizing:function(e){return e.isNormalizing()},isSelectable:function(e,t){return e.isSelectable(t)},isStart:function(e,t,n){return e.isStart(t,n)},isVoid:function(e,t){return e.isVoid(t)},last:function(e,t){return e.last(t)},leaf:function(e,t,n){return e.leaf(t,n)},levels:function(e,t){return e.levels(t)},marks:function(e){return e.getMarks()},next:function(e,t){return e.next(t)},node:function(e,t,n){return e.node(t,n)},nodes:function(e,t){return e.nodes(t)},normalize:function(e,t){e.normalize(t)},parent:function(e,t,n){return e.parent(t,n)},path:function(e,t,n){return e.path(t,n)},pathRef:function(e,t,n){return e.pathRef(t,n)},pathRefs:function(e){return e.pathRefs()},point:function(e,t,n){return e.point(t,n)},pointRef:function(e,t,n){return e.pointRef(t,n)},pointRefs:function(e){return e.pointRefs()},positions:function(e,t){return e.positions(t)},previous:function(e,t){return e.previous(t)},range:function(e,t,n){return e.range(t,n)},rangeRef:function(e,t,n){return e.rangeRef(t,n)},rangeRefs:function(e){return e.rangeRefs()},removeMark:function(e,t){e.removeMark(t)},setNormalizing:function(e,t){e.setNormalizing(t)},start:function(e,t){return e.start(t)},string:function(e,t,n){return e.string(t,n)},unhangRange:function(e,t,n){return e.unhangRange(t,n)},void:function(e,t){return e.void(t)},withoutNormalizing:function(e,t){e.withoutNormalizing(t)}},eo={isSpan:function(e){return zn()(e)&&2===e.length&&ua()(e).call(e,Fa.isPath)}};function to(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function no(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)U()(n=to(Object(r),!0)).call(n,(function(t){Ta(e,t,r[t])}));else if(b())S()(e,b()(r));else{var a;U()(a=to(Object(r))).call(a,(function(t){B()(e,t,k()(r,t))}))}}return e}var ro={compare:function(e,t){var n=Fa.compare(e.path,t.path);return 0===n?e.offset<t.offset?-1:e.offset>t.offset?1:0:n},isAfter:function(e,t){return 1===ro.compare(e,t)},isBefore:function(e,t){return-1===ro.compare(e,t)},equals:function(e,t){return e.offset===t.offset&&Fa.equals(e.path,t.path)},isPoint:function(e){return pa()(e)&&"number"==typeof e.offset&&Fa.isPath(e.path)},transform:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,ma.Ut)(e,(function(e){if(null===e)return null;var r=n.affinity,a=void 0===r?"forward":r,o=e.path,i=e.offset;switch(t.type){case"insert_node":case"move_node":e.path=Fa.transform(o,t,n);break;case"insert_text":Fa.equals(t.path,o)&&(t.offset<i||t.offset===i&&"forward"===a)&&(e.offset+=t.text.length);break;case"merge_node":Fa.equals(t.path,o)&&(e.offset+=t.position),e.path=Fa.transform(o,t,n);break;case"remove_text":Fa.equals(t.path,o)&&t.offset<=i&&(e.offset-=Math.min(i-t.offset,t.text.length));break;case"remove_node":if(Fa.equals(t.path,o)||Fa.isAncestor(t.path,o))return null;e.path=Fa.transform(o,t,n);break;case"split_node":if(Fa.equals(t.path,o)){if(t.position===i&&null==a)return null;(t.position<i||t.position===i&&"forward"===a)&&(e.offset-=t.position,e.path=Fa.transform(o,t,no(no({},n),{},{affinity:"forward"})))}else e.path=Fa.transform(o,t,n)}}))}},ao=void 0,oo={setScrubber:function(e){ao=e},stringify:function(e){return j()(e,ao)}},io=["text"],lo=["anchor","focus"];function uo(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function co(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)U()(n=uo(Object(r),!0)).call(n,(function(t){Ta(e,t,r[t])}));else if(b())S()(e,b()(r));else{var a;U()(a=uo(Object(r))).call(a,(function(t){B()(e,t,k()(r,t))}))}}return e}var so,fo={equals:function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).loose,r=void 0!==n&&n;function a(e){return Pa(e,io)}return Qa(r?a(e):e,r?a(t):t)},isText:function(e){return pa()(e)&&"string"==typeof e.text},isTextList:function(e){return zn()(e)&&ua()(e).call(e,(function(e){return fo.isText(e)}))},isTextProps:function(e){return void 0!==e.text},matches:function(e,t){for(var n in t)if("text"!==n&&(!e.hasOwnProperty(n)||e[n]!==t[n]))return!1;return!0},decorations:function(e,t){var n,r=[co({},e)],a=Da(t);try{for(a.s();!(n=a.n()).done;){var o,i=n.value,l=Pa(i,lo),u=Oa.edges(i),c=(0,M.c)(u,2),d=c[0],s=c[1],f=[],g=0,h=d.offset,v=s.offset,p=Da(r);try{for(p.s();!(o=p.n()).done;){var m=o.value,C=m.text.length,y=g;if(g+=C,h<=y&&g<=v)(0,ie.c)(m,l),f.push(m);else if(h!==v&&(h===g||v===y)||h>g||v<y||v===y&&0!==y)f.push(m);else{var E=m,D=void 0,A=void 0;if(v<g){var k,w,b=v-y;A=co(co({},E),{},{text:Sn()(k=E.text).call(k,b)}),E=co(co({},E),{},{text:Sn()(w=E.text).call(w,0,b)})}if(h>y){var x,S,I=h-y;D=co(co({},E),{},{text:Sn()(x=E.text).call(x,0,I)}),E=co(co({},E),{},{text:Sn()(S=E.text).call(S,I)})}(0,ie.c)(E,l),D&&f.push(D),f.push(E),A&&f.push(A)}}}catch(e){p.e(e)}finally{p.f()}r=f}}catch(e){a.e(e)}finally{a.f()}return r}},go=function(e){return e.selection?e.selection:e.children.length>0?$a.end(e,[]):[0]},ho=function(e,t){var n=$a.node(e,t),r=(0,M.c)(n,1)[0];return function(e){return e===r}},vo=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!n,a=n?Ao(e):e,o=so.None,i=so.None,l=0,u=null,c=Da(a);try{for(c.s();!(t=c.n()).done;){var d=t.value,s=ha()(d).call(d,0);if(!s)break;var f=To(d,s),g=r?[i,f]:[f,o],h=(0,M.c)(g,2);if(o=h[0],i=h[1],No(o,so.ZWJ)&&No(i,so.ExtPict)&&!Po(r?e.substring(0,l):e.substring(0,e.length-l)))break;if(No(o,so.RI)&&No(i,so.RI)&&!(u=null!==u?!u:!!r||jo(e.substring(0,e.length-l))))break;if(o!==so.None&&i!==so.None&&Zo(o,i))break;l+=d.length}}catch(e){c.e(e)}finally{c.f()}return l||1},po=/\s/,mo=/[\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,Co=/['\u2018\u2019]/,yo=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=0,r=!1;e.length>0;){var a=vo(e,t),o=Eo(e,a,t),i=(0,M.c)(o,2),l=i[0],u=i[1];if(Do(l,u,t))r=!0,n+=a;else{if(r)break;n+=a}e=u}return n},Eo=function(e,t,n){if(n){var r=e.length-t;return[Sn()(e).call(e,r,e.length),Sn()(e).call(e,0,r)]}return[Sn()(e).call(e,0,t),Sn()(e).call(e,t)]},Do=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(po.test(t))return!1;if(Co.test(t)){var a=vo(n,r),o=Eo(n,a,r),i=(0,M.c)(o,2);if(e(i[0],i[1],r))return!0}return!mo.test(t)},Ao=na().mark((function e(t){var n,r,a,o;return na().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.length-1,r=0;case 2:if(!(r<t.length)){e.next=16;break}if(a=t.charAt(n-r),!wo(a.charCodeAt(0))){e.next=11;break}if(o=t.charAt(n-r-1),!ko(o.charCodeAt(0))){e.next=11;break}return e.next=9,o+a;case 9:return r++,e.abrupt("continue",13);case 11:return e.next=13,a;case 13:r++,e.next=2;break;case 16:case"end":return e.stop()}}),e)})),ko=function(e){return e>=55296&&e<=56319},wo=function(e){return e>=56320&&e<=57343};!function(e){e[e.None=0]="None",e[e.Extend=1]="Extend",e[e.ZWJ=2]="ZWJ",e[e.RI=4]="RI",e[e.Prepend=8]="Prepend",e[e.SpacingMark=16]="SpacingMark",e[e.L=32]="L",e[e.V=64]="V",e[e.T=128]="T",e[e.LV=256]="LV",e[e.LVT=512]="LVT",e[e.ExtPict=1024]="ExtPict",e[e.Any=2048]="Any"}(so||(so={}));var bo=/^(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1AC0\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDF46-\uDF50]|\uD804[\uDC01\uDC38-\uDC46\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD30-\uDD36\uDEEC-\uDEEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])$/,xo=/^(?:[\u0600-\u0605\u06DD\u070F\u0890\u0891\u08E2\u0D4E]|\uD804[\uDCBD\uDCCD\uDDC2\uDDC3]|\uD806[\uDD3F\uDD41\uDE3A\uDE84-\uDE89]|\uD807\uDD46)$/,So=/^(?:[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E\u094F\u0982\u0983\u09BF\u09C0\u09C7\u09C8\u09CB\u09CC\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB\u0ACC\u0B02\u0B03\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0C01-\u0C03\u0C41-\u0C44\u0C82\u0C83\u0CBE\u0CC0\u0CC1\u0CC3\u0CC4\u0CC7\u0CC8\u0CCA\u0CCB\u0D02\u0D03\u0D3F\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D82\u0D83\u0DD0\u0DD1\u0DD8-\u0DDE\u0DF2\u0DF3\u0E33\u0EB3\u0F3E\u0F3F\u0F7F\u1031\u103B\u103C\u1056\u1057\u1084\u1715\u1734\u17B6\u17BE-\u17C5\u17C7\u17C8\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1A19\u1A1A\u1A55\u1A57\u1A6D-\u1A72\u1B04\u1B3B\u1B3D-\u1B41\u1B43\u1B44\u1B82\u1BA1\u1BA6\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1C24-\u1C2B\u1C34\u1C35\u1CE1\u1CF7\uA823\uA824\uA827\uA880\uA881\uA8B4-\uA8C3\uA952\uA953\uA983\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9C0\uAA2F\uAA30\uAA33\uAA34\uAA4D\uAAEB\uAAEE\uAAEF\uAAF5\uABE3\uABE4\uABE6\uABE7\uABE9\uABEA\uABEC]|\uD804[\uDC00\uDC02\uDC82\uDCB0-\uDCB2\uDCB7\uDCB8\uDD2C\uDD45\uDD46\uDD82\uDDB3-\uDDB5\uDDBF\uDDC0\uDDCE\uDE2C-\uDE2E\uDE32\uDE33\uDE35\uDEE0-\uDEE2\uDF02\uDF03\uDF3F\uDF41-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF62\uDF63]|\uD805[\uDC35-\uDC37\uDC40\uDC41\uDC45\uDCB1\uDCB2\uDCB9\uDCBB\uDCBC\uDCBE\uDCC1\uDDB0\uDDB1\uDDB8-\uDDBB\uDDBE\uDE30-\uDE32\uDE3B\uDE3C\uDE3E\uDEAC\uDEAE\uDEAF\uDEB6\uDF26]|\uD806[\uDC2C-\uDC2E\uDC38\uDD31-\uDD35\uDD37\uDD38\uDD3D\uDD40\uDD42\uDDD1-\uDDD3\uDDDC-\uDDDF\uDDE4\uDE39\uDE57\uDE58\uDE97]|\uD807[\uDC2F\uDC3E\uDCA9\uDCB1\uDCB4\uDD8A-\uDD8E\uDD93\uDD94\uDD96\uDEF5\uDEF6]|\uD81B[\uDF51-\uDF87\uDFF0\uDFF1]|\uD834[\uDD66\uDD6D])$/,Io=/^[\u1100-\u115F\uA960-\uA97C]$/,Bo=/^[\u1160-\u11A7\uD7B0-\uD7C6]$/,Mo=/^[\u11A8-\u11FF\uD7CB-\uD7FB]$/,Lo=/^[\uAC00\uAC1C\uAC38\uAC54\uAC70\uAC8C\uACA8\uACC4\uACE0\uACFC\uAD18\uAD34\uAD50\uAD6C\uAD88\uADA4\uADC0\uADDC\uADF8\uAE14\uAE30\uAE4C\uAE68\uAE84\uAEA0\uAEBC\uAED8\uAEF4\uAF10\uAF2C\uAF48\uAF64\uAF80\uAF9C\uAFB8\uAFD4\uAFF0\uB00C\uB028\uB044\uB060\uB07C\uB098\uB0B4\uB0D0\uB0EC\uB108\uB124\uB140\uB15C\uB178\uB194\uB1B0\uB1CC\uB1E8\uB204\uB220\uB23C\uB258\uB274\uB290\uB2AC\uB2C8\uB2E4\uB300\uB31C\uB338\uB354\uB370\uB38C\uB3A8\uB3C4\uB3E0\uB3FC\uB418\uB434\uB450\uB46C\uB488\uB4A4\uB4C0\uB4DC\uB4F8\uB514\uB530\uB54C\uB568\uB584\uB5A0\uB5BC\uB5D8\uB5F4\uB610\uB62C\uB648\uB664\uB680\uB69C\uB6B8\uB6D4\uB6F0\uB70C\uB728\uB744\uB760\uB77C\uB798\uB7B4\uB7D0\uB7EC\uB808\uB824\uB840\uB85C\uB878\uB894\uB8B0\uB8CC\uB8E8\uB904\uB920\uB93C\uB958\uB974\uB990\uB9AC\uB9C8\uB9E4\uBA00\uBA1C\uBA38\uBA54\uBA70\uBA8C\uBAA8\uBAC4\uBAE0\uBAFC\uBB18\uBB34\uBB50\uBB6C\uBB88\uBBA4\uBBC0\uBBDC\uBBF8\uBC14\uBC30\uBC4C\uBC68\uBC84\uBCA0\uBCBC\uBCD8\uBCF4\uBD10\uBD2C\uBD48\uBD64\uBD80\uBD9C\uBDB8\uBDD4\uBDF0\uBE0C\uBE28\uBE44\uBE60\uBE7C\uBE98\uBEB4\uBED0\uBEEC\uBF08\uBF24\uBF40\uBF5C\uBF78\uBF94\uBFB0\uBFCC\uBFE8\uC004\uC020\uC03C\uC058\uC074\uC090\uC0AC\uC0C8\uC0E4\uC100\uC11C\uC138\uC154\uC170\uC18C\uC1A8\uC1C4\uC1E0\uC1FC\uC218\uC234\uC250\uC26C\uC288\uC2A4\uC2C0\uC2DC\uC2F8\uC314\uC330\uC34C\uC368\uC384\uC3A0\uC3BC\uC3D8\uC3F4\uC410\uC42C\uC448\uC464\uC480\uC49C\uC4B8\uC4D4\uC4F0\uC50C\uC528\uC544\uC560\uC57C\uC598\uC5B4\uC5D0\uC5EC\uC608\uC624\uC640\uC65C\uC678\uC694\uC6B0\uC6CC\uC6E8\uC704\uC720\uC73C\uC758\uC774\uC790\uC7AC\uC7C8\uC7E4\uC800\uC81C\uC838\uC854\uC870\uC88C\uC8A8\uC8C4\uC8E0\uC8FC\uC918\uC934\uC950\uC96C\uC988\uC9A4\uC9C0\uC9DC\uC9F8\uCA14\uCA30\uCA4C\uCA68\uCA84\uCAA0\uCABC\uCAD8\uCAF4\uCB10\uCB2C\uCB48\uCB64\uCB80\uCB9C\uCBB8\uCBD4\uCBF0\uCC0C\uCC28\uCC44\uCC60\uCC7C\uCC98\uCCB4\uCCD0\uCCEC\uCD08\uCD24\uCD40\uCD5C\uCD78\uCD94\uCDB0\uCDCC\uCDE8\uCE04\uCE20\uCE3C\uCE58\uCE74\uCE90\uCEAC\uCEC8\uCEE4\uCF00\uCF1C\uCF38\uCF54\uCF70\uCF8C\uCFA8\uCFC4\uCFE0\uCFFC\uD018\uD034\uD050\uD06C\uD088\uD0A4\uD0C0\uD0DC\uD0F8\uD114\uD130\uD14C\uD168\uD184\uD1A0\uD1BC\uD1D8\uD1F4\uD210\uD22C\uD248\uD264\uD280\uD29C\uD2B8\uD2D4\uD2F0\uD30C\uD328\uD344\uD360\uD37C\uD398\uD3B4\uD3D0\uD3EC\uD408\uD424\uD440\uD45C\uD478\uD494\uD4B0\uD4CC\uD4E8\uD504\uD520\uD53C\uD558\uD574\uD590\uD5AC\uD5C8\uD5E4\uD600\uD61C\uD638\uD654\uD670\uD68C\uD6A8\uD6C4\uD6E0\uD6FC\uD718\uD734\uD750\uD76C\uD788]$/,Ro=/^[\uAC01-\uAC1B\uAC1D-\uAC37\uAC39-\uAC53\uAC55-\uAC6F\uAC71-\uAC8B\uAC8D-\uACA7\uACA9-\uACC3\uACC5-\uACDF\uACE1-\uACFB\uACFD-\uAD17\uAD19-\uAD33\uAD35-\uAD4F\uAD51-\uAD6B\uAD6D-\uAD87\uAD89-\uADA3\uADA5-\uADBF\uADC1-\uADDB\uADDD-\uADF7\uADF9-\uAE13\uAE15-\uAE2F\uAE31-\uAE4B\uAE4D-\uAE67\uAE69-\uAE83\uAE85-\uAE9F\uAEA1-\uAEBB\uAEBD-\uAED7\uAED9-\uAEF3\uAEF5-\uAF0F\uAF11-\uAF2B\uAF2D-\uAF47\uAF49-\uAF63\uAF65-\uAF7F\uAF81-\uAF9B\uAF9D-\uAFB7\uAFB9-\uAFD3\uAFD5-\uAFEF\uAFF1-\uB00B\uB00D-\uB027\uB029-\uB043\uB045-\uB05F\uB061-\uB07B\uB07D-\uB097\uB099-\uB0B3\uB0B5-\uB0CF\uB0D1-\uB0EB\uB0ED-\uB107\uB109-\uB123\uB125-\uB13F\uB141-\uB15B\uB15D-\uB177\uB179-\uB193\uB195-\uB1AF\uB1B1-\uB1CB\uB1CD-\uB1E7\uB1E9-\uB203\uB205-\uB21F\uB221-\uB23B\uB23D-\uB257\uB259-\uB273\uB275-\uB28F\uB291-\uB2AB\uB2AD-\uB2C7\uB2C9-\uB2E3\uB2E5-\uB2FF\uB301-\uB31B\uB31D-\uB337\uB339-\uB353\uB355-\uB36F\uB371-\uB38B\uB38D-\uB3A7\uB3A9-\uB3C3\uB3C5-\uB3DF\uB3E1-\uB3FB\uB3FD-\uB417\uB419-\uB433\uB435-\uB44F\uB451-\uB46B\uB46D-\uB487\uB489-\uB4A3\uB4A5-\uB4BF\uB4C1-\uB4DB\uB4DD-\uB4F7\uB4F9-\uB513\uB515-\uB52F\uB531-\uB54B\uB54D-\uB567\uB569-\uB583\uB585-\uB59F\uB5A1-\uB5BB\uB5BD-\uB5D7\uB5D9-\uB5F3\uB5F5-\uB60F\uB611-\uB62B\uB62D-\uB647\uB649-\uB663\uB665-\uB67F\uB681-\uB69B\uB69D-\uB6B7\uB6B9-\uB6D3\uB6D5-\uB6EF\uB6F1-\uB70B\uB70D-\uB727\uB729-\uB743\uB745-\uB75F\uB761-\uB77B\uB77D-\uB797\uB799-\uB7B3\uB7B5-\uB7CF\uB7D1-\uB7EB\uB7ED-\uB807\uB809-\uB823\uB825-\uB83F\uB841-\uB85B\uB85D-\uB877\uB879-\uB893\uB895-\uB8AF\uB8B1-\uB8CB\uB8CD-\uB8E7\uB8E9-\uB903\uB905-\uB91F\uB921-\uB93B\uB93D-\uB957\uB959-\uB973\uB975-\uB98F\uB991-\uB9AB\uB9AD-\uB9C7\uB9C9-\uB9E3\uB9E5-\uB9FF\uBA01-\uBA1B\uBA1D-\uBA37\uBA39-\uBA53\uBA55-\uBA6F\uBA71-\uBA8B\uBA8D-\uBAA7\uBAA9-\uBAC3\uBAC5-\uBADF\uBAE1-\uBAFB\uBAFD-\uBB17\uBB19-\uBB33\uBB35-\uBB4F\uBB51-\uBB6B\uBB6D-\uBB87\uBB89-\uBBA3\uBBA5-\uBBBF\uBBC1-\uBBDB\uBBDD-\uBBF7\uBBF9-\uBC13\uBC15-\uBC2F\uBC31-\uBC4B\uBC4D-\uBC67\uBC69-\uBC83\uBC85-\uBC9F\uBCA1-\uBCBB\uBCBD-\uBCD7\uBCD9-\uBCF3\uBCF5-\uBD0F\uBD11-\uBD2B\uBD2D-\uBD47\uBD49-\uBD63\uBD65-\uBD7F\uBD81-\uBD9B\uBD9D-\uBDB7\uBDB9-\uBDD3\uBDD5-\uBDEF\uBDF1-\uBE0B\uBE0D-\uBE27\uBE29-\uBE43\uBE45-\uBE5F\uBE61-\uBE7B\uBE7D-\uBE97\uBE99-\uBEB3\uBEB5-\uBECF\uBED1-\uBEEB\uBEED-\uBF07\uBF09-\uBF23\uBF25-\uBF3F\uBF41-\uBF5B\uBF5D-\uBF77\uBF79-\uBF93\uBF95-\uBFAF\uBFB1-\uBFCB\uBFCD-\uBFE7\uBFE9-\uC003\uC005-\uC01F\uC021-\uC03B\uC03D-\uC057\uC059-\uC073\uC075-\uC08F\uC091-\uC0AB\uC0AD-\uC0C7\uC0C9-\uC0E3\uC0E5-\uC0FF\uC101-\uC11B\uC11D-\uC137\uC139-\uC153\uC155-\uC16F\uC171-\uC18B\uC18D-\uC1A7\uC1A9-\uC1C3\uC1C5-\uC1DF\uC1E1-\uC1FB\uC1FD-\uC217\uC219-\uC233\uC235-\uC24F\uC251-\uC26B\uC26D-\uC287\uC289-\uC2A3\uC2A5-\uC2BF\uC2C1-\uC2DB\uC2DD-\uC2F7\uC2F9-\uC313\uC315-\uC32F\uC331-\uC34B\uC34D-\uC367\uC369-\uC383\uC385-\uC39F\uC3A1-\uC3BB\uC3BD-\uC3D7\uC3D9-\uC3F3\uC3F5-\uC40F\uC411-\uC42B\uC42D-\uC447\uC449-\uC463\uC465-\uC47F\uC481-\uC49B\uC49D-\uC4B7\uC4B9-\uC4D3\uC4D5-\uC4EF\uC4F1-\uC50B\uC50D-\uC527\uC529-\uC543\uC545-\uC55F\uC561-\uC57B\uC57D-\uC597\uC599-\uC5B3\uC5B5-\uC5CF\uC5D1-\uC5EB\uC5ED-\uC607\uC609-\uC623\uC625-\uC63F\uC641-\uC65B\uC65D-\uC677\uC679-\uC693\uC695-\uC6AF\uC6B1-\uC6CB\uC6CD-\uC6E7\uC6E9-\uC703\uC705-\uC71F\uC721-\uC73B\uC73D-\uC757\uC759-\uC773\uC775-\uC78F\uC791-\uC7AB\uC7AD-\uC7C7\uC7C9-\uC7E3\uC7E5-\uC7FF\uC801-\uC81B\uC81D-\uC837\uC839-\uC853\uC855-\uC86F\uC871-\uC88B\uC88D-\uC8A7\uC8A9-\uC8C3\uC8C5-\uC8DF\uC8E1-\uC8FB\uC8FD-\uC917\uC919-\uC933\uC935-\uC94F\uC951-\uC96B\uC96D-\uC987\uC989-\uC9A3\uC9A5-\uC9BF\uC9C1-\uC9DB\uC9DD-\uC9F7\uC9F9-\uCA13\uCA15-\uCA2F\uCA31-\uCA4B\uCA4D-\uCA67\uCA69-\uCA83\uCA85-\uCA9F\uCAA1-\uCABB\uCABD-\uCAD7\uCAD9-\uCAF3\uCAF5-\uCB0F\uCB11-\uCB2B\uCB2D-\uCB47\uCB49-\uCB63\uCB65-\uCB7F\uCB81-\uCB9B\uCB9D-\uCBB7\uCBB9-\uCBD3\uCBD5-\uCBEF\uCBF1-\uCC0B\uCC0D-\uCC27\uCC29-\uCC43\uCC45-\uCC5F\uCC61-\uCC7B\uCC7D-\uCC97\uCC99-\uCCB3\uCCB5-\uCCCF\uCCD1-\uCCEB\uCCED-\uCD07\uCD09-\uCD23\uCD25-\uCD3F\uCD41-\uCD5B\uCD5D-\uCD77\uCD79-\uCD93\uCD95-\uCDAF\uCDB1-\uCDCB\uCDCD-\uCDE7\uCDE9-\uCE03\uCE05-\uCE1F\uCE21-\uCE3B\uCE3D-\uCE57\uCE59-\uCE73\uCE75-\uCE8F\uCE91-\uCEAB\uCEAD-\uCEC7\uCEC9-\uCEE3\uCEE5-\uCEFF\uCF01-\uCF1B\uCF1D-\uCF37\uCF39-\uCF53\uCF55-\uCF6F\uCF71-\uCF8B\uCF8D-\uCFA7\uCFA9-\uCFC3\uCFC5-\uCFDF\uCFE1-\uCFFB\uCFFD-\uD017\uD019-\uD033\uD035-\uD04F\uD051-\uD06B\uD06D-\uD087\uD089-\uD0A3\uD0A5-\uD0BF\uD0C1-\uD0DB\uD0DD-\uD0F7\uD0F9-\uD113\uD115-\uD12F\uD131-\uD14B\uD14D-\uD167\uD169-\uD183\uD185-\uD19F\uD1A1-\uD1BB\uD1BD-\uD1D7\uD1D9-\uD1F3\uD1F5-\uD20F\uD211-\uD22B\uD22D-\uD247\uD249-\uD263\uD265-\uD27F\uD281-\uD29B\uD29D-\uD2B7\uD2B9-\uD2D3\uD2D5-\uD2EF\uD2F1-\uD30B\uD30D-\uD327\uD329-\uD343\uD345-\uD35F\uD361-\uD37B\uD37D-\uD397\uD399-\uD3B3\uD3B5-\uD3CF\uD3D1-\uD3EB\uD3ED-\uD407\uD409-\uD423\uD425-\uD43F\uD441-\uD45B\uD45D-\uD477\uD479-\uD493\uD495-\uD4AF\uD4B1-\uD4CB\uD4CD-\uD4E7\uD4E9-\uD503\uD505-\uD51F\uD521-\uD53B\uD53D-\uD557\uD559-\uD573\uD575-\uD58F\uD591-\uD5AB\uD5AD-\uD5C7\uD5C9-\uD5E3\uD5E5-\uD5FF\uD601-\uD61B\uD61D-\uD637\uD639-\uD653\uD655-\uD66F\uD671-\uD68B\uD68D-\uD6A7\uD6A9-\uD6C3\uD6C5-\uD6DF\uD6E1-\uD6FB\uD6FD-\uD717\uD719-\uD733\uD735-\uD74F\uD751-\uD76B\uD76D-\uD787\uD789-\uD7A3]$/,Fo=/^(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])$/,To=function(e,t){var n=so.Any;return-1!==e.search(bo)&&(n|=so.Extend),8205===t&&(n|=so.ZWJ),t>=127462&&t<=127487&&(n|=so.RI),-1!==e.search(xo)&&(n|=so.Prepend),-1!==e.search(So)&&(n|=so.SpacingMark),-1!==e.search(Io)&&(n|=so.L),-1!==e.search(Bo)&&(n|=so.V),-1!==e.search(Mo)&&(n|=so.T),-1!==e.search(Lo)&&(n|=so.LV),-1!==e.search(Ro)&&(n|=so.LVT),-1!==e.search(Fo)&&(n|=so.ExtPict),n};function No(e,t){return 0!=(e&t)}var Go=[[so.L,so.L|so.V|so.LV|so.LVT],[so.LV|so.V,so.V|so.T],[so.LVT|so.T,so.T],[so.Any,so.Extend|so.ZWJ],[so.Any,so.SpacingMark],[so.Prepend,so.Any],[so.ZWJ,so.ExtPict],[so.RI,so.RI]];function Zo(e,t){return-1===fe()(Go).call(Go,(function(n){return No(e,n[0])&&No(t,n[1])}))}var Qo=/(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1AC0\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDF46-\uDF50]|\uD804[\uDC01\uDC38-\uDC46\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD30-\uDD36\uDEEC-\uDEEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])*\u200D$/,Po=function(e){return-1!==e.search(Qo)},Jo=/(?:\uD83C[\uDDE6-\uDDFF])+$/g,jo=function(e){var t=e.match(Jo);return null!==t&&t[0].length/2%2==1},Oo={delete:function(e,t){e.delete(t)},insertFragment:function(e,t,n){e.insertFragment(t,n)},insertText:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};$a.withoutNormalizing(e,(function(){var r=n.voids,a=void 0!==r&&r,o=n.at,i=void 0===o?go(e):o;if(Fa.isPath(i)&&(i=$a.range(e,i)),Oa.isRange(i))if(Oa.isCollapsed(i))i=i.anchor;else{var l=Oa.end(i);if(!a&&$a.void(e,{at:l}))return;var u=Oa.start(i),c=$a.pointRef(e,u),d=$a.pointRef(e,l);Wo.delete(e,{at:i,voids:a});var s=c.unref(),f=d.unref();i=s||f,Wo.setSelection(e,{anchor:i,focus:i})}if(!(!a&&$a.void(e,{at:i})||$a.elementReadOnly(e,{at:i}))){var g=i,h=g.path,v=g.offset;t.length>0&&e.apply({type:"insert_text",path:h,offset:v,text:t})}}))}};function Uo(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function zo(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)U()(n=Uo(Object(r),!0)).call(n,(function(t){Ta(e,t,r[t])}));else if(b())S()(e,b()(r));else{var a;U()(a=Uo(Object(r))).call(a,(function(t){B()(e,t,k()(r,t))}))}}return e}var Wo=zo(zo(zo(zo({},Za),{insertNodes:function(e,t,n){e.insertNodes(t,n)},liftNodes:function(e,t){e.liftNodes(t)},mergeNodes:function(e,t){e.mergeNodes(t)},moveNodes:function(e,t){e.moveNodes(t)},removeNodes:function(e,t){e.removeNodes(t)},setNodes:function(e,t,n){e.setNodes(t,n)},splitNodes:function(e,t){e.splitNodes(t)},unsetNodes:function(e,t,n){e.unsetNodes(t,n)},unwrapNodes:function(e,t){e.unwrapNodes(t)},wrapNodes:function(e,t,n){e.wrapNodes(t,n)}}),{collapse:function(e,t){e.collapse(t)},deselect:function(e){e.deselect()},move:function(e,t){e.move(t)},select:function(e,t){e.select(t)},setPoint:function(e,t,n){e.setPoint(t,n)},setSelection:function(e,t){e.setSelection(t)}}),Oo),Ko=function(e,t){var n,r=Da($a.pathRefs(e));try{for(r.s();!(n=r.n()).done;){var a=n.value;ka(a,t)}}catch(e){r.e(e)}finally{r.f()}var o,i=Da($a.pointRefs(e));try{for(i.s();!(o=i.n()).done;){var l=o.value;wa(l,t)}}catch(e){i.e(e)}finally{i.f()}var u,c=Da($a.rangeRefs(e));try{for(c.s();!(u=c.n()).done;){var d=u.value;ba(d,t)}}catch(e){c.e(e)}finally{c.f()}var s,f,g=xa.get(e)||[],h=Sa.get(e)||new(fa()),v=function(e){if(e){var t=e.join(",");f.has(t)||(f.add(t),s.push(e))}};if(Fa.operationCanTransformPath(t)){s=[],f=new(fa());var p,m=Da(g);try{for(m.s();!(p=m.n()).done;){var C=p.value;v(Fa.transform(C,t))}}catch(e){m.e(e)}finally{m.f()}}else s=g,f=h;var y,E=Da(e.getDirtyPaths(t));try{for(E.s();!(y=E.n()).done;){v(y.value)}}catch(e){E.e(e)}finally{E.f()}xa.set(e,s),Sa.set(e,f),Wo.transform(e,t),e.operations.push(t),$a.normalize(e,{operation:t}),"set_selection"===t.type&&(e.marks=null),Ia.get(e)||(Ia.set(e,!0),ea().resolve().then((function(){Ia.set(e,!1),e.onChange({operation:t}),e.operations=[]})))},Vo=function(e,t){switch(t.type){case"insert_text":case"remove_text":case"set_node":var n=t.path;return Fa.levels(n);case"insert_node":var r,a=t.node,o=t.path,i=Fa.levels(o),l=fo.isText(a)?[]:Qn()(Ha.nodes(a),(function(e){var t=(0,M.c)(e,2)[1];return Z()(o).call(o,t)}));return Z()(r=[]).call(r,(0,kn.c)(i),(0,kn.c)(l));case"merge_node":var u,c=t.path,d=Fa.ancestors(c),s=Fa.previous(c);return Z()(u=[]).call(u,(0,kn.c)(d),[s]);case"move_node":var f,g=t.path,h=t.newPath;if(Fa.equals(g,h))return[];var v,p=[],m=[],C=Da(Fa.ancestors(g));try{for(C.s();!(v=C.n()).done;){var y=v.value,E=Fa.transform(y,t);p.push(E)}}catch(e){C.e(e)}finally{C.f()}var D,A=Da(Fa.ancestors(h));try{for(A.s();!(D=A.n()).done;){var k=D.value,w=Fa.transform(k,t);m.push(w)}}catch(e){A.e(e)}finally{A.f()}var b=m[m.length-1],x=h[h.length-1],S=Z()(b).call(b,x);return Z()(f=[]).call(f,p,m,[S]);case"remove_node":var I=t.path,B=Fa.ancestors(I);return(0,kn.c)(B);case"split_node":var L,R=t.path,F=Fa.levels(R),T=Fa.next(R);return Z()(L=[]).call(L,(0,kn.c)(F),[T]);default:return[]}},Ho=function(e){var t=e.selection;return t?Ha.fragment(e,t):[]},qo=function(e,t){var n=(0,M.c)(t,2),r=n[0],a=n[1];if(!fo.isText(r))if(za.isElement(r)&&0===r.children.length){Wo.insertNodes(e,{text:""},{at:Z()(a).call(a,0),voids:!0})}else for(var o=!$a.isEditor(r)&&(za.isElement(r)&&(e.isInline(r)||0===r.children.length||fo.isText(r.children[0])||e.isInline(r.children[0]))),i=0,l=0;l<r.children.length;l++,i++){var u=Ha.get(e,a);if(!fo.isText(u)){var c=u.children[i],d=u.children[i-1],s=l===r.children.length-1;if((fo.isText(c)||za.isElement(c)&&e.isInline(c))!==o)Wo.removeNodes(e,{at:Z()(a).call(a,i),voids:!0}),i--;else if(za.isElement(c)){if(e.isInline(c))if(null!=d&&fo.isText(d)){if(s){Wo.insertNodes(e,{text:""},{at:Z()(a).call(a,i+1),voids:!0}),i++}}else{Wo.insertNodes(e,{text:""},{at:Z()(a).call(a,i),voids:!0}),i++}}else null!=d&&fo.isText(d)&&(fo.equals(c,d,{loose:!0})?(Wo.mergeNodes(e,{at:Z()(a).call(a,i),voids:!0}),i--):""===d.text?(Wo.removeNodes(e,{at:Z()(a).call(a,i-1),voids:!0}),i--):""===c.text&&(Wo.removeNodes(e,{at:Z()(a).call(a,i),voids:!0}),i--))}}},Yo=function(e,t){var n=t.iteration,r=42*t.initialDirtyPathsLength;if(n>r)throw new Error("Could not completely normalize the editor after ".concat(r," iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state."));return!0},Xo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.voids,r=void 0!==n&&n,a=t.mode,o=void 0===a?"lowest":a,i=t.at,l=void 0===i?e.selection:i,u=t.match;if(l){var c,d=$a.path(e,l),s="lowest"===o,f=Da($a.levels(e,{at:d,voids:r,match:u,reverse:s}));try{for(f.s();!(c=f.n()).done;){var g=(0,M.c)(c.value,2),h=g[0],v=g[1];if(!fo.isText(h))if(Oa.isRange(l)){if(Fa.isAncestor(v,l.anchor.path)&&Fa.isAncestor(v,l.focus.path))return[h,v]}else if(!Fa.equals(d,v))return[h,v]}}catch(e){f.e(e)}finally{f.f()}}};function _o(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function $o(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)U()(n=_o(Object(r),!0)).call(n,(function(t){Ta(e,t,r[t])}));else if(b())S()(e,b()(r));else{var a;U()(a=_o(Object(r))).call(a,(function(t){B()(e,t,k()(r,t))}))}}return e}var ei=function(e,t,n){var r=e.selection;if(r){var a=function(t,n){if(!fo.isText(t))return!1;var r=$a.parent(e,n),a=(0,M.c)(r,2),o=a[0];a[1];return!e.isVoid(o)||e.markableVoid(o)},o=Oa.isExpanded(r),i=!1;if(!o){var l=$a.node(e,r),u=(0,M.c)(l,2),c=u[0],d=u[1];if(c&&a(c,d)){var s=$a.parent(e,d),f=(0,M.c)(s,1)[0];i=f&&e.markableVoid(f)}}if(o||i)Wo.setNodes(e,(0,L.c)({},t,n),{match:a,split:!0,voids:!0});else{var g=$o($o({},$a.marks(e)||{}),{},(0,L.c)({},t,n));e.marks=g,Ia.get(e)||e.onChange()}}};function ti(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function ni(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)U()(n=ti(Object(r),!0)).call(n,(function(t){Ta(e,t,r[t])}));else if(b())S()(e,b()(r));else{var a;U()(a=ti(Object(r))).call(a,(function(t){B()(e,t,k()(r,t))}))}}return e}var ri=function(e,t){var n,r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o={anchor:$a.point(e,t,{edge:"end"}),focus:$a.end(e,[])},i=a.distance,l=void 0===i?1:i,u=0,c=Da($a.positions(e,ni(ni({},a),{},{at:o})));try{for(c.s();!(r=c.n()).done;){var d=r.value;if(u>l)break;0!==u&&(n=d),u++}}catch(e){c.e(e)}finally{c.f()}return n};function ai(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function oi(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)U()(n=ai(Object(r),!0)).call(n,(function(t){Ta(e,t,r[t])}));else if(b())S()(e,b()(r));else{var a;U()(a=ai(Object(r))).call(a,(function(t){B()(e,t,k()(r,t))}))}}return e}var ii=function(e,t){var n,r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o={anchor:$a.start(e,[]),focus:$a.point(e,t,{edge:"start"})},i=a.distance,l=void 0===i?1:i,u=0,c=Da($a.positions(e,oi(oi({},a),{},{at:o,reverse:!0})));try{for(c.s();!(r=c.n()).done;){var d=r.value;if(u>l)break;0!==u&&(n=d),u++}}catch(e){c.e(e)}finally{c.f()}return n},li=function(e,t){var n=e.selection;n&&Oa.isCollapsed(n)&&Wo.delete(e,{unit:t,reverse:!0})},ui=function(e,t){var n=e.selection;n&&Oa.isCollapsed(n)&&Wo.delete(e,{unit:t})},ci=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).direction,n=void 0===t?"forward":t,r=e.selection;r&&Oa.isExpanded(r)&&Wo.delete(e,{reverse:"backward"===n})},di=function(e,t){return[$a.start(e,t),$a.end(e,t)]};function si(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function fi(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)U()(n=si(Object(r),!0)).call(n,(function(t){Ta(e,t,r[t])}));else if(b())S()(e,b()(r));else{var a;U()(a=si(Object(r))).call(a,(function(t){B()(e,t,k()(r,t))}))}}return e}var gi=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return $a.above(e,fi(fi({},t),{},{match:function(t){return za.isElement(t)&&$a.isElementReadOnly(e,t)}}))},hi=function(e,t){return $a.point(e,t,{edge:"end"})},vi=function(e,t){var n=$a.path(e,t,{edge:"start"});return $a.node(e,n)},pi=function(e,t){var n=$a.range(e,t);return Ha.fragment(e,n)};function mi(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ci(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)U()(n=mi(Object(r),!0)).call(n,(function(t){Ta(e,t,r[t])}));else if(b())S()(e,b()(r));else{var a;U()(a=mi(Object(r))).call(a,(function(t){B()(e,t,k()(r,t))}))}}return e}var yi=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return $a.above(e,Ci(Ci({},t),{},{match:function(t){return za.isElement(t)&&$a.isVoid(e,t)}}))},Ei=function(e,t){var n;return _n()(n=t.children).call(n,(function(t){return za.isElement(t)&&$a.isBlock(e,t)}))},Di=function(e,t){var n;return _n()(n=t.children).call(n,(function(t){return fo.isText(t)||$a.isInline(e,t)}))},Ai=function(e,t){return Ha.has(e,t)},ki=function(e,t){var n;return ua()(n=t.children).call(n,(function(e){return fo.isText(e)}))},wi=function(e){Wo.splitNodes(e,{always:!0})},bi=function(e,t,n){Wo.insertNodes(e,t,n)},xi=function(e){Wo.splitNodes(e,{always:!0})};function Si(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}var Ii=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.selection,a=e.marks;if(r){if(a){var o=function(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)U()(n=Si(Object(r),!0)).call(n,(function(t){Ta(e,t,r[t])}));else if(b())S()(e,b()(r));else{var a;U()(a=Si(Object(r))).call(a,(function(t){B()(e,t,k()(r,t))}))}}return e}({text:t},a);Wo.insertNodes(e,o,{at:n.at,voids:n.voids})}else Wo.insertText(e,t,n);e.marks=null}},Bi=function(e,t){return!e.isInline(t)},Mi=function(e,t,n){return $a.isStart(e,t,n)||$a.isEnd(e,t,n)},Li=function(e,t){var n=t.children,r=(0,M.c)(n,1)[0];return 0===n.length||1===n.length&&fo.isText(r)&&""===r.text&&!e.isVoid(t)},Ri=function(e,t,n){var r=$a.end(e,n);return ro.equals(t,r)},Fi=function(e){var t=Ba.get(e);return void 0===t||t},Ti=function(e,t,n){if(0!==t.offset)return!1;var r=$a.start(e,n);return ro.equals(t,r)},Ni=function(e,t){var n=$a.path(e,t,{edge:"end"});return $a.node(e,n)},Gi=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=$a.path(e,t,n);return[Ha.leaf(e,r),r]};function Zi(e){var t,n,r,a,o,i,l,u,c,d,s,f,g,h,v,p=arguments;return na().wrap((function(m){for(;;)switch(m.prev=m.next){case 0:if(n=(t=p.length>1&&void 0!==p[1]?p[1]:{}).at,r=void 0===n?e.selection:n,a=ia()(t),o=void 0!==a&&a,i=t.voids,l=void 0!==i&&i,null==(u=t.match)&&(u=function(){return!0}),r){m.next=6;break}return m.abrupt("return");case 6:c=[],d=$a.path(e,r),s=Da(Ha.levels(e,d)),m.prev=9,s.s();case 11:if((f=s.n()).done){m.next=20;break}if(g=(0,M.c)(f.value,2),h=g[0],v=g[1],u(h,v)){m.next=15;break}return m.abrupt("continue",18);case 15:if(c.push([h,v]),l||!za.isElement(h)||!$a.isVoid(e,h)){m.next=18;break}return m.abrupt("break",20);case 18:m.next=11;break;case 20:m.next=25;break;case 22:m.prev=22,m.t0=m.catch(9),s.e(m.t0);case 25:return m.prev=25,s.f(),m.finish(25);case 28:return o&&ia()(c).call(c),m.delegateYield(c,"t1",30);case 30:case"end":return m.stop()}}),Ca,null,[[9,22,25,28]])}var Qi=["text"],Pi=["text"],Ji=function(e){var t=e.marks,n=e.selection;if(!n)return null;if(t)return t;if(Oa.isExpanded(n)){var r=$a.nodes(e,{match:fo.isText}),a=(0,M.c)(r,1)[0];return a?Pa((0,M.c)(a,1)[0],Qi):{}}var o=n.anchor,i=o.path,l=$a.leaf(e,i),u=(0,M.c)(l,1)[0];if(0===o.offset){var c=$a.previous(e,{at:i,match:fo.isText}),d=$a.above(e,{match:function(t){return za.isElement(t)&&$a.isVoid(e,t)&&e.markableVoid(t)}});if(!d){var s=$a.above(e,{match:function(t){return za.isElement(t)&&$a.isBlock(e,t)}});if(c&&s){var f=(0,M.c)(c,2),g=f[0],h=f[1],v=(0,M.c)(s,2)[1];Fa.isAncestor(v,h)&&(u=g)}}}return Pa(u,Pi)},ji=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.mode,r=void 0===n?"lowest":n,a=t.voids,o=void 0!==a&&a,i=t.match,l=t.at,u=void 0===l?e.selection:l;if(u){var c=$a.after(e,u,{voids:o});if(c){var d=$a.last(e,[]),s=(0,M.c)(d,2)[1],f=[c.path,s];if(Fa.isPath(u)&&0===u.length)throw new Error("Cannot get the next node from the root node!");if(null==i)if(Fa.isPath(u)){var g=$a.parent(e,u),h=(0,M.c)(g,1)[0];i=function(e){var t;return Bn()(t=h.children).call(t,e)}}else i=function(){return!0};var v=$a.nodes(e,{at:f,match:i,mode:r,voids:o}),p=(0,M.c)(v,1)[0];return p}}},Oi=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=$a.path(e,t,n),a=Ha.get(e,r);return[a,r]};function Ui(e){var t,n,r,a,o,i,l,u,c,d,s,f,g,h,v,p,m,C,y,E,D,A,k,w,b,x,S,I,B=arguments;return na().wrap((function(L){for(;;)switch(L.prev=L.next){case 0:if(n=(t=B.length>1&&void 0!==B[1]?B[1]:{}).at,r=void 0===n?e.selection:n,a=t.mode,o=void 0===a?"all":a,i=t.universal,l=void 0!==i&&i,u=ia()(t),c=void 0!==u&&u,d=t.voids,s=void 0!==d&&d,f=t.ignoreNonSelectable,g=void 0!==f&&f,(h=t.match)||(h=function(){return!0}),r){L.next=6;break}return L.abrupt("return");case 6:eo.isSpan(r)?(v=r[0],p=r[1]):(m=$a.path(e,r,{edge:"start"}),C=$a.path(e,r,{edge:"end"}),v=c?C:m,p=c?m:C),y=Ha.nodes(e,{reverse:c,from:v,to:p,pass:function(t){var n=(0,M.c)(t,1)[0];return!!za.isElement(n)&&(!(s||!$a.isVoid(e,n)&&!$a.isElementReadOnly(e,n))||!(!g||$a.isSelectable(e,n)))}}),E=[],A=Da(y),L.prev=10,A.s();case 12:if((k=A.n()).done){L.next=39;break}if(w=(0,M.c)(k.value,2),b=w[0],x=w[1],!g||!za.isElement(b)||$a.isSelectable(e,b)){L.next=16;break}return L.abrupt("continue",37);case 16:if(S=D&&0===Fa.compare(x,D[1]),"highest"!==o||!S){L.next=19;break}return L.abrupt("continue",37);case 19:if(h(b,x)){L.next=25;break}if(!l||S||!fo.isText(b)){L.next=24;break}return L.abrupt("return");case 24:return L.abrupt("continue",37);case 25:if("lowest"!==o||!S){L.next=28;break}return D=[b,x],L.abrupt("continue",37);case 28:if(!(I="lowest"===o?D:[b,x])){L.next=36;break}if(!l){L.next=34;break}E.push(I),L.next=36;break;case 34:return L.next=36,I;case 36:D=[b,x];case 37:L.next=12;break;case 39:L.next=44;break;case 41:L.prev=41,L.t0=L.catch(10),A.e(L.t0);case 44:return L.prev=44,A.f(),L.finish(44);case 47:if("lowest"!==o||!D){L.next=54;break}if(!l){L.next=52;break}E.push(D),L.next=54;break;case 52:return L.next=54,D;case 54:if(!l){L.next=56;break}return L.delegateYield(E,"t1",56);case 56:case"end":return L.stop()}}),ya,null,[[10,41,44,47]])}var zi=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.force,r=void 0!==n&&n,a=t.operation,o=function(e){return xa.get(e)||[]},i=function(e){var t=o(e).pop(),n=t.join(",");return function(e){return Sa.get(e)||new(fa())}(e).delete(n),t};if($a.isNormalizing(e)){if(r){var l=Qn()(Ha.nodes(e),(function(e){return(0,M.c)(e,2)[1]})),u=new(fa())(N()(l).call(l,(function(e){return e.join(",")})));xa.set(e,l),Sa.set(e,u)}0!==o(e).length&&$a.withoutNormalizing(e,(function(){var t,n=Da(o(e));try{for(n.s();!(t=n.n()).done;){var r=t.value;if(Ha.has(e,r)){var l=$a.node(e,r),u=l,c=(0,M.c)(u,2),d=c[0];c[1];za.isElement(d)&&0===d.children.length&&e.normalizeNode(l,{operation:a})}}}catch(e){n.e(e)}finally{n.f()}for(var s=o(e),f=s.length,g=0;0!==s.length;){if(!e.shouldNormalize({dirtyPaths:s,iteration:g,initialDirtyPathsLength:f,operation:a}))return;var h=i(e);if(Ha.has(e,h)){var v=$a.node(e,h);e.normalizeNode(v,{operation:a})}g++,s=o(e)}}))}},Wi=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=$a.path(e,t,n),a=Fa.parent(r);return $a.node(e,a)},Ki=function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).affinity,r={current:t,affinity:void 0===n?"forward":n,unref:function(){var t=r.current;return $a.pathRefs(e).delete(r),r.current=null,t}};return $a.pathRefs(e).add(r),r},Vi=function(e){var t=Ma.get(e);return t||(t=new(fa()),Ma.set(e,t)),t},Hi=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.depth,a=n.edge;if(Fa.isPath(t))if("start"===a){var o=Ha.first(e,t);t=(0,M.c)(o,2)[1]}else if("end"===a){var i=Ha.last(e,t);t=(0,M.c)(i,2)[1]}return Oa.isRange(t)&&(t="start"===a?Oa.start(t):"end"===a?Oa.end(t):Fa.common(t.anchor.path,t.focus.path)),ro.isPoint(t)&&(t=t.path),null!=r&&(t=Sn()(t).call(t,0,r)),t},qi=function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).affinity,r={current:t,affinity:void 0===n?"forward":n,unref:function(){var t=r.current;return $a.pointRefs(e).delete(r),r.current=null,t}};return $a.pointRefs(e).add(r),r},Yi=function(e){var t=La.get(e);return t||(t=new(fa()),La.set(e,t)),t},Xi=function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).edge,r=void 0===n?"start":n;if(Fa.isPath(t)){var a;if("end"===r){var o=Ha.last(e,t);a=(0,M.c)(o,2)[1]}else{var i=Ha.first(e,t);a=(0,M.c)(i,2)[1]}var l,u,c=Ha.get(e,a);if(!fo.isText(c))throw new Error(Z()(l=Z()(u="Cannot get the ".concat(r," point in the node at path [")).call(u,t,"] because it has no ")).call(l,r," text node."));return{path:a,offset:"end"===r?c.text.length:0}}if(Oa.isRange(t)){var d=Oa.edges(t),s=(0,M.c)(d,2),f=s[0],g=s[1];return"start"===r?f:g}return t};function _i(e){var t,n,r,a,o,i,l,u,c,d,s,f,g,h,v,p,m,C,y,E,D,A,k,w,b,x,S,I,B,L,R,F=arguments;return na().wrap((function(T){for(;;)switch(T.prev=T.next){case 0:if(R=function(e,t,n){return"character"===t?vo(e,n):"word"===t?yo(e,n):"line"===t||"block"===t?e.length:1},n=(t=F.length>1&&void 0!==F[1]?F[1]:{}).at,r=void 0===n?e.selection:n,a=t.unit,o=void 0===a?"offset":a,i=ia()(t),l=void 0!==i&&i,u=t.voids,c=void 0!==u&&u,d=t.ignoreNonSelectable,s=void 0!==d&&d,r){T.next=5;break}return T.abrupt("return");case 5:f=$a.range(e,r),g=Oa.edges(f),h=(0,M.c)(g,2),v=h[0],p=h[1],m=l?p:v,C=!1,y="",E=0,D=0,A=0,k=Da($a.nodes(e,{at:r,reverse:l,voids:c,ignoreNonSelectable:s})),T.prev=14,k.s();case 16:if((w=k.n()).done){T.next=51;break}if(b=(0,M.c)(w.value,2),x=b[0],S=b[1],!za.isElement(x)){T.next=26;break}if(c||!e.isVoid(x)&&!e.isElementReadOnly(x)){T.next=23;break}return T.next=22,$a.start(e,S);case 22:return T.abrupt("continue",49);case 23:if(!e.isInline(x)){T.next=25;break}return T.abrupt("continue",49);case 25:$a.hasInlines(e,x)&&(I=Fa.isAncestor(S,p.path)?p:$a.end(e,S),B=Fa.isAncestor(S,v.path)?v:$a.start(e,S),y=$a.string(e,{anchor:B,focus:I},{voids:c}),C=!0);case 26:if(!fo.isText(x)){T.next=49;break}if((L=Fa.equals(S,m.path))?(D=l?m.offset:x.text.length-m.offset,A=m.offset):(D=x.text.length,A=l?D:0),!L&&!C&&"offset"!==o){T.next=33;break}return T.next=32,{path:S,offset:A};case 32:C=!1;case 33:if(0!==E){T.next=39;break}if(""!==y){T.next=37;break}return T.abrupt("break",49);case 37:E=R(y,o,l),y=Eo(y,E,l)[1];case 39:if(A=l?A-E:A+E,!((D-=E)<0)){T.next=44;break}return E=-D,T.abrupt("break",49);case 44:return E=0,T.next=47,{path:S,offset:A};case 47:T.next=33;break;case 49:T.next=16;break;case 51:T.next=56;break;case 53:T.prev=53,T.t0=T.catch(14),k.e(T.t0);case 56:return T.prev=56,k.f(),T.finish(56);case 59:case"end":return T.stop()}}),Ea,null,[[14,53,56,59]])}var $i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.mode,r=void 0===n?"lowest":n,a=t.voids,o=void 0!==a&&a,i=t.match,l=t.at,u=void 0===l?e.selection:l;if(u){var c=$a.before(e,u,{voids:o});if(c){var d=$a.first(e,[]),s=(0,M.c)(d,2)[1],f=[c.path,s];if(Fa.isPath(u)&&0===u.length)throw new Error("Cannot get the previous node from the root node!");if(null==i)if(Fa.isPath(u)){var g=$a.parent(e,u),h=(0,M.c)(g,1)[0];i=function(e){var t;return Bn()(t=h.children).call(t,e)}}else i=function(){return!0};var v=$a.nodes(e,{reverse:!0,at:f,match:i,mode:r,voids:o}),p=(0,M.c)(v,1)[0];return p}}},el=function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).affinity,r={current:t,affinity:void 0===n?"forward":n,unref:function(){var t=r.current;return $a.rangeRefs(e).delete(r),r.current=null,t}};return $a.rangeRefs(e).add(r),r},tl=function(e){var t=Ra.get(e);return t||(t=new(fa()),Ra.set(e,t)),t},nl=function(e,t,n){return Oa.isRange(t)&&!n?t:{anchor:$a.start(e,t),focus:$a.end(e,n||t)}};function rl(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}var al=function(e,t){var n=e.selection;if(n){var r=function(t,n){if(!fo.isText(t))return!1;var r=$a.parent(e,n),a=(0,M.c)(r,2),o=a[0];a[1];return!e.isVoid(o)||e.markableVoid(o)},a=Oa.isExpanded(n),o=!1;if(!a){var i=$a.node(e,n),l=(0,M.c)(i,2),u=l[0],c=l[1];if(u&&r(u,c)){var d=$a.parent(e,c),s=(0,M.c)(d,1)[0];o=s&&e.markableVoid(s)}}if(a||o)Wo.unsetNodes(e,t,{match:r,split:!0,voids:!0});else{var f=function(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)U()(n=rl(Object(r),!0)).call(n,(function(t){Ta(e,t,r[t])}));else if(b())S()(e,b()(r));else{var a;U()(a=rl(Object(r))).call(a,(function(t){B()(e,t,k()(r,t))}))}}return e}({},$a.marks(e)||{});delete f[t],e.marks=f,Ia.get(e)||e.onChange()}}},ol=function(e,t){Ba.set(e,t)},il=function(e,t){return $a.point(e,t,{edge:"start"})},ll=function(e,t){var n,r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).voids,a=void 0!==r&&r,o=$a.range(e,t),i=Oa.edges(o),l=(0,M.c)(i,2),u=l[0],c=l[1],d="",s=Da($a.nodes(e,{at:o,match:fo.isText,voids:a}));try{for(s.s();!(n=s.n()).done;){var f=(0,M.c)(n.value,2),g=f[0],h=f[1],v=g.text;Fa.equals(h,c.path)&&(v=Sn()(v).call(v,0,c.offset)),Fa.equals(h,u.path)&&(v=Sn()(v).call(v,u.offset)),d+=v}}catch(e){s.e(e)}finally{s.f()}return d},ul=function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).voids,r=void 0!==n&&n,a=Oa.edges(t),o=(0,M.c)(a,2),i=o[0],l=o[1];if(0!==i.offset||0!==l.offset||Oa.isCollapsed(t)||Fa.hasPrevious(l.path))return t;var u,c=$a.above(e,{at:l,match:function(t){return za.isElement(t)&&$a.isBlock(e,t)},voids:r}),d=c?c[1]:[],s={anchor:$a.start(e,i),focus:l},f=!0,g=Da($a.nodes(e,{at:s,match:fo.isText,reverse:!0,voids:r}));try{for(g.s();!(u=g.n()).done;){var h=(0,M.c)(u.value,2),v=h[0],p=h[1];if(f)f=!1;else if(""!==v.text||Fa.isBefore(p,d)){l={path:p,offset:v.text.length};break}}}catch(e){g.e(e)}finally{g.f()}return{anchor:i,focus:l}},cl=function(e,t){var n=$a.isNormalizing(e);$a.setNormalizing(e,!1);try{t()}finally{$a.setNormalizing(e,n)}$a.normalize(e)},dl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};$a.withoutNormalizing(e,(function(){var n,r,a,o,i,l=ia()(t),u=void 0!==l&&l,c=t.unit,d=void 0===c?"character":c,s=t.distance,f=void 0===s?1:s,g=t.voids,h=void 0!==g&&g,v=t.at,p=void 0===v?e.selection:v,m=t.hanging,C=void 0!==m&&m;if(p){var y=!1;if(Oa.isRange(p)&&Oa.isCollapsed(p)&&(y=!0,p=p.anchor),ro.isPoint(p)){var E=$a.void(e,{at:p,mode:"highest"});if(!h&&E){p=(0,M.c)(E,2)[1]}else{var D={unit:d,distance:f};p={anchor:p,focus:u?$a.before(e,p,D)||$a.start(e,[]):$a.after(e,p,D)||$a.end(e,[])},C=!0}}if(Fa.isPath(p))Wo.removeNodes(e,{at:p,voids:h});else if(!Oa.isCollapsed(p)){if(!C){var A=Oa.edges(p),k=(0,M.c)(A,2)[1],w=$a.end(e,[]);ro.equals(k,w)||(p=$a.unhangRange(e,p,{voids:h}))}var b=Oa.edges(p),x=(0,M.c)(b,2),S=x[0],I=x[1],B=$a.above(e,{match:function(t){return za.isElement(t)&&$a.isBlock(e,t)},at:S,voids:h}),L=$a.above(e,{match:function(t){return za.isElement(t)&&$a.isBlock(e,t)},at:I,voids:h}),R=B&&L&&!Fa.equals(B[1],L[1]),T=Fa.equals(S.path,I.path),G=h?null:null!==(o=$a.void(e,{at:S,mode:"highest"}))&&void 0!==o?o:$a.elementReadOnly(e,{at:S,mode:"highest"}),Z=h?null:null!==(i=$a.void(e,{at:I,mode:"highest"}))&&void 0!==i?i:$a.elementReadOnly(e,{at:I,mode:"highest"});if(G){var Q=$a.before(e,S);Q&&B&&Fa.isAncestor(B[1],Q.path)&&(S=Q)}if(Z){var P=$a.after(e,I);P&&L&&Fa.isAncestor(L[1],P.path)&&(I=P)}var J,j,O=[],z=Da($a.nodes(e,{at:p,voids:h}));try{for(z.s();!(j=z.n()).done;){var W=j.value,K=W,V=(0,M.c)(K,2),H=V[0],q=V[1];J&&0===Fa.compare(q,J)||(!h&&za.isElement(H)&&($a.isVoid(e,H)||$a.isElementReadOnly(e,H))||!Fa.isCommon(q,S.path)&&!Fa.isCommon(q,I.path))&&(O.push(W),J=q)}}catch(e){z.e(e)}finally{z.f()}var Y=Qn()(O,(function(t){var n=(0,M.c)(t,2)[1];return $a.pathRef(e,n)})),X=$a.pointRef(e,S),_=$a.pointRef(e,I),$="";if(!T&&!G){var ee,te=X.current,ne=$a.leaf(e,te),re=(0,M.c)(ne,1)[0],ae=te.path,oe=S.offset,ie=Sn()(ee=re.text).call(ee,oe);ie.length>0&&(e.apply({type:"remove_text",path:ae,offset:oe,text:ie}),$=ie)}if(U()(n=F()(r=N()(a=ia()(Y).call(Y)).call(a,(function(e){return e.unref()}))).call(r,(function(e){return null!==e}))).call(n,(function(t){return Wo.removeNodes(e,{at:t,voids:h})})),!Z){var le,ue=_.current,ce=$a.leaf(e,ue),de=(0,M.c)(ce,1)[0],se=ue.path,fe=T?S.offset:0,ge=Sn()(le=de.text).call(le,fe,I.offset);ge.length>0&&(e.apply({type:"remove_text",path:se,offset:fe,text:ge}),$=ge)}!T&&R&&_.current&&X.current&&Wo.mergeNodes(e,{at:_.current,hanging:!0,voids:h}),y&&u&&"character"===d&&$.length>1&&$.match(/[\u0E00-\u0E7F]+/)&&Wo.insertText(e,Sn()($).call($,0,$.length-f));var he=X.unref(),ve=_.unref(),pe=u?he||ve:ve||he;null==t.at&&pe&&Wo.select(e,pe)}}}))},sl=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};$a.withoutNormalizing(e,(function(){var r=n.hanging,a=void 0!==r&&r,o=n.voids,i=void 0!==o&&o,l=n.at,u=void 0===l?go(e):l;if(t.length){if(Oa.isRange(u))if(a||(u=$a.unhangRange(e,u,{voids:i})),Oa.isCollapsed(u))u=u.anchor;else{var c=Oa.edges(u),d=(0,M.c)(c,2)[1];if(!i&&$a.void(e,{at:d}))return;var s=$a.pointRef(e,d);Wo.delete(e,{at:u}),u=s.unref()}else Fa.isPath(u)&&(u=$a.start(e,u));if(i||!$a.void(e,{at:u})){var f=$a.above(e,{at:u,match:function(t){return za.isElement(t)&&$a.isInline(e,t)},mode:"highest",voids:i});if(f){var g=(0,M.c)(f,2)[1];if($a.isEnd(e,u,g))u=$a.after(e,g);else if($a.isStart(e,u,g)){u=$a.before(e,g)}}var h,v=$a.above(e,{match:function(t){return za.isElement(t)&&$a.isBlock(e,t)},at:u,voids:i}),p=(0,M.c)(v,2)[1],m=$a.isStart(e,u,p),C=$a.isEnd(e,u,p),y=m&&C,E=!m||m&&C,D=!C,A=Ha.first({children:t},[]),k=(0,M.c)(A,2)[1],w=Ha.last({children:t},[]),b=(0,M.c)(w,2)[1],x=[],S=function(t){var n=(0,M.c)(t,2),r=n[0],a=n[1];return!(0===a.length)&&(!!y||!(E&&Fa.isAncestor(a,k)&&za.isElement(r)&&!e.isVoid(r)&&!e.isInline(r))&&!(D&&Fa.isAncestor(a,b)&&za.isElement(r)&&!e.isVoid(r)&&!e.isInline(r)))},I=Da(Ha.nodes({children:t},{pass:S}));try{for(I.s();!(h=I.n()).done;){var B=h.value;S(B)&&x.push(B)}}catch(e){I.e(e)}finally{I.f()}for(var L=[],R=[],F=[],T=!0,N=!1,G=0,Z=x;G<Z.length;G++){var Q=(0,M.c)(Z[G],1)[0];za.isElement(Q)&&!e.isInline(Q)?(T=!1,N=!0,R.push(Q)):T?L.push(Q):F.push(Q)}var P=$a.nodes(e,{at:u,match:function(t){return fo.isText(t)||$a.isInline(e,t)},mode:"highest",voids:i}),J=(0,M.c)(P,1)[0],j=(0,M.c)(J,2)[1],O=$a.isStart(e,u,j),U=$a.isEnd(e,u,j),z=$a.pathRef(e,C&&!F.length?Fa.next(p):p),W=$a.pathRef(e,U?Fa.next(j):j);Wo.splitNodes(e,{at:u,match:function(t){return N?za.isElement(t)&&$a.isBlock(e,t):fo.isText(t)||$a.isInline(e,t)},mode:N?"lowest":"highest",always:N&&(!m||L.length>0)&&(!C||F.length>0),voids:i});var K,V=$a.pathRef(e,!O||O&&U?Fa.next(j):j);if(Wo.insertNodes(e,L,{at:V.current,match:function(t){return fo.isText(t)||$a.isInline(e,t)},mode:"highest",voids:i}),y&&!L.length&&R.length&&!F.length&&Wo.delete(e,{at:p,voids:i}),Wo.insertNodes(e,R,{at:z.current,match:function(t){return za.isElement(t)&&$a.isBlock(e,t)},mode:"lowest",voids:i}),Wo.insertNodes(e,F,{at:W.current,match:function(t){return fo.isText(t)||$a.isInline(e,t)},mode:"highest",voids:i}),!n.at)if(F.length>0&&W.current?K=Fa.previous(W.current):R.length>0&&z.current?K=Fa.previous(z.current):V.current&&(K=Fa.previous(V.current)),K){var H=$a.end(e,K);Wo.select(e,H)}V.unref(),z.unref(),W.unref()}}}))},fl=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).edge,n=void 0===t?"anchor":t,r=e.selection;if(r)if("anchor"===n)Wo.select(e,r.anchor);else if("focus"===n)Wo.select(e,r.focus);else if("start"===n){var a=Oa.edges(r),o=(0,M.c)(a,1)[0];Wo.select(e,o)}else if("end"===n){var i=Oa.edges(r),l=(0,M.c)(i,2)[1];Wo.select(e,l)}},gl=function(e){var t=e.selection;t&&e.apply({type:"set_selection",properties:t,newProperties:null})},hl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.selection,r=t.distance,a=void 0===r?1:r,o=t.unit,i=void 0===o?"character":o,l=ia()(t),u=void 0!==l&&l,c=t.edge,d=void 0===c?null:c;if(n){"start"===d&&(d=Oa.isBackward(n)?"focus":"anchor"),"end"===d&&(d=Oa.isBackward(n)?"anchor":"focus");var s=n.anchor,f=n.focus,g={distance:a,unit:i,ignoreNonSelectable:!0},h={};if(null==d||"anchor"===d){var v=u?$a.before(e,s,g):$a.after(e,s,g);v&&(h.anchor=v)}if(null==d||"focus"===d){var p=u?$a.before(e,f,g):$a.after(e,f,g);p&&(h.focus=p)}Wo.setSelection(e,h)}},vl=function(e,t){var n=e.selection;if(t=$a.range(e,t),n)Wo.setSelection(e,t);else{if(!Oa.isRange(t))throw new Error("When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: ".concat(oo.stringify(t)));e.apply({type:"set_selection",properties:n,newProperties:t})}};function pl(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function ml(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)U()(n=pl(Object(r),!0)).call(n,(function(t){Ta(e,t,r[t])}));else if(b())S()(e,b()(r));else{var a;U()(a=pl(Object(r))).call(a,(function(t){B()(e,t,k()(r,t))}))}}return e}var Cl=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.selection,a=n.edge,o=void 0===a?"both":a;if(r){"start"===o&&(o=Oa.isBackward(r)?"focus":"anchor"),"end"===o&&(o=Oa.isBackward(r)?"anchor":"focus");var i=r.anchor,l=r.focus,u="anchor"===o?i:l;Wo.setSelection(e,(0,L.c)({},"anchor"===o?"anchor":"focus",ml(ml({},u),t)))}},yl=function(e,t){var n=e.selection,r={},a={};if(n){for(var o in t)("anchor"===o&&null!=t.anchor&&!ro.equals(t.anchor,n.anchor)||"focus"===o&&null!=t.focus&&!ro.equals(t.focus,n.focus)||"anchor"!==o&&"focus"!==o&&t[o]!==n[o])&&(r[o]=n[o],a[o]=t[o]);C()(r).length>0&&e.apply({type:"set_selection",properties:r,newProperties:a})}},El=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};$a.withoutNormalizing(e,(function(){var r=n.hanging,a=void 0!==r&&r,o=n.voids,i=void 0!==o&&o,l=n.mode,u=void 0===l?"lowest":l,c=n.at,d=n.match,s=n.select;if(Ha.isNode(t)&&(t=[t]),0!==t.length){var f=t,g=(0,M.c)(f,1)[0];if(c||(c=go(e),s=!0),null==s&&(s=!1),Oa.isRange(c))if(a||(c=$a.unhangRange(e,c,{voids:i})),Oa.isCollapsed(c))c=c.anchor;else{var h=Oa.edges(c),v=(0,M.c)(h,2)[1],p=$a.pointRef(e,v);Wo.delete(e,{at:c}),c=p.unref()}if(ro.isPoint(c)){null==d&&(d=fo.isText(g)?function(e){return fo.isText(e)}:e.isInline(g)?function(t){return fo.isText(t)||$a.isInline(e,t)}:function(t){return za.isElement(t)&&$a.isBlock(e,t)});var m=$a.nodes(e,{at:c.path,match:d,mode:u,voids:i}),C=(0,M.c)(m,1)[0];if(!C)return;var y=(0,M.c)(C,2)[1],E=$a.pathRef(e,y),D=$a.isEnd(e,c,y);Wo.splitNodes(e,{at:c,match:d,mode:u,voids:i});var A=E.unref();c=D?Fa.next(A):A}var k=Fa.parent(c),w=c[c.length-1];if(i||!$a.void(e,{at:k})){var b,x=Da(t);try{for(x.s();!(b=x.n()).done;){var S=b.value,I=Z()(k).call(k,w);w++,e.apply({type:"insert_node",path:I,node:S}),c=Fa.next(c)}}catch(e){x.e(e)}finally{x.f()}if(c=Fa.previous(c),s){var B=$a.end(e,c);B&&Wo.select(e,B)}}}}))},Dl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};$a.withoutNormalizing(e,(function(){var n=t.at,r=void 0===n?e.selection:n,a=t.mode,o=void 0===a?"lowest":a,i=t.voids,l=void 0!==i&&i,u=t.match;if(null==u&&(u=Fa.isPath(r)?ho(e,r):function(t){return za.isElement(t)&&$a.isBlock(e,t)}),r){var c,d=$a.nodes(e,{at:r,match:u,mode:o,voids:l}),s=Da(Qn()(d,(function(t){var n=(0,M.c)(t,2)[1];return $a.pathRef(e,n)})));try{for(s.s();!(c=s.n()).done;){var f=c.value.unref();if(f.length<2)throw new Error("Cannot lift node at a path [".concat(f,"] because it has a depth of less than `2`."));var g=$a.node(e,Fa.parent(f)),h=(0,M.c)(g,2),v=h[0],p=h[1],m=f[f.length-1],C=v.children.length;if(1===C){var y=Fa.next(p);Wo.moveNodes(e,{at:f,to:y,voids:l}),Wo.removeNodes(e,{at:p,voids:l})}else if(0===m)Wo.moveNodes(e,{at:f,to:p,voids:l});else if(m===C-1){var E=Fa.next(p);Wo.moveNodes(e,{at:f,to:E,voids:l})}else{var D=Fa.next(f),A=Fa.next(p);Wo.splitNodes(e,{at:D,voids:l}),Wo.moveNodes(e,{at:f,to:A,voids:l})}}}catch(e){s.e(e)}finally{s.f()}}}))},Al=["text"],kl=["children"],wl=function e(t,n){if(za.isElement(n)){var r=n;return!!$a.isVoid(t,n)||1===r.children.length&&e(t,r.children[0])}return!$a.isEditor(n)},bl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};$a.withoutNormalizing(e,(function(){var n,r,a=t.match,o=t.at,i=void 0===o?e.selection:o,l=t.hanging,u=void 0!==l&&l,c=t.voids,d=void 0!==c&&c,s=t.mode,f=void 0===s?"lowest":s;if(i){if(null==a)if(Fa.isPath(i)){var g=$a.parent(e,i),h=(0,M.c)(g,1)[0];a=function(e){var t;return Bn()(t=h.children).call(t,e)}}else a=function(t){return za.isElement(t)&&$a.isBlock(e,t)};if(!u&&Oa.isRange(i)&&(i=$a.unhangRange(e,i,{voids:d})),Oa.isRange(i))if(Oa.isCollapsed(i))i=i.anchor;else{var v=Oa.edges(i),p=(0,M.c)(v,2)[1],m=$a.pointRef(e,p);Wo.delete(e,{at:i}),i=m.unref(),null==t.at&&Wo.select(e,i)}var C=$a.nodes(e,{at:i,match:a,voids:d,mode:f}),y=(0,M.c)(C,1)[0],E=$a.previous(e,{at:i,match:a,voids:d,mode:f});if(y&&E){var D=(0,M.c)(y,2),A=D[0],k=D[1],w=(0,M.c)(E,2),b=w[0],x=w[1];if(0!==k.length&&0!==x.length){var S,I,B=Fa.next(x),L=Fa.common(k,x),R=Fa.isSibling(k,x),F=Sn()(n=Sn()(r=Qn()($a.levels(e,{at:k}),(function(e){return(0,M.c)(e,1)[0]}))).call(r,L.length)).call(n,0,-1),T=$a.above(e,{at:k,mode:"highest",match:function(t){return Bn()(F).call(F,t)&&wl(e,t)}}),N=T&&$a.pathRef(e,T[1]);if(fo.isText(A)&&fo.isText(b)){var G=Pa(A,Al);I=b.text.length,S=G}else{var Q,P;if(!za.isElement(A)||!za.isElement(b))throw new Error(Z()(Q=Z()(P="Cannot merge the node at path [".concat(k,"] with the previous sibling because it is not the same kind: ")).call(P,oo.stringify(A)," ")).call(Q,oo.stringify(b)));G=Pa(A,kl);I=b.children.length,S=G}R||Wo.moveNodes(e,{at:k,to:B,voids:d}),N&&Wo.removeNodes(e,{at:N.current,voids:d}),za.isElement(b)&&$a.isEmpty(e,b)||fo.isText(b)&&""===b.text&&0!==x[x.length-1]?Wo.removeNodes(e,{at:x,voids:d}):e.apply({type:"merge_node",path:B,position:I,properties:S}),N&&N.unref()}}}}))},xl=function(e,t){$a.withoutNormalizing(e,(function(){var n=t.to,r=t.at,a=void 0===r?e.selection:r,o=t.mode,i=void 0===o?"lowest":o,l=t.voids,u=void 0!==l&&l,c=t.match;if(a){null==c&&(c=Fa.isPath(a)?ho(e,a):function(t){return za.isElement(t)&&$a.isBlock(e,t)});var d,s=$a.pathRef(e,n),f=$a.nodes(e,{at:a,match:c,mode:i,voids:u}),g=Da(Qn()(f,(function(t){var n=(0,M.c)(t,2)[1];return $a.pathRef(e,n)})));try{for(g.s();!(d=g.n()).done;){var h=d.value.unref(),v=s.current;0!==h.length&&e.apply({type:"move_node",path:h,newPath:v}),s.current&&Fa.isSibling(v,h)&&Fa.isAfter(v,h)&&(s.current=Fa.next(s.current))}}catch(e){g.e(e)}finally{g.f()}s.unref()}}))},Sl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};$a.withoutNormalizing(e,(function(){var n=t.hanging,r=void 0!==n&&n,a=t.voids,o=void 0!==a&&a,i=t.mode,l=void 0===i?"lowest":i,u=t.at,c=void 0===u?e.selection:u,d=t.match;if(c){null==d&&(d=Fa.isPath(c)?ho(e,c):function(t){return za.isElement(t)&&$a.isBlock(e,t)}),!r&&Oa.isRange(c)&&(c=$a.unhangRange(e,c,{voids:o}));var s,f=$a.nodes(e,{at:c,match:d,mode:l,voids:o}),g=Da(Qn()(f,(function(t){var n=(0,M.c)(t,2)[1];return $a.pathRef(e,n)})));try{for(g.s();!(s=g.n()).done;){var h=s.value.unref();if(h){var v=$a.node(e,h),p=(0,M.c)(v,1)[0];e.apply({type:"remove_node",path:h,node:p})}}}catch(e){g.e(e)}finally{g.f()}}}))},Il=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};$a.withoutNormalizing(e,(function(){var r=n.match,a=n.at,o=void 0===a?e.selection:a,i=n.compare,l=n.merge,u=n.hanging,c=void 0!==u&&u,d=n.mode,s=void 0===d?"lowest":d,f=n.split,g=void 0!==f&&f,h=n.voids,v=void 0!==h&&h;if(o){if(null==r&&(r=Fa.isPath(o)?ho(e,o):function(t){return za.isElement(t)&&$a.isBlock(e,t)}),!c&&Oa.isRange(o)&&(o=$a.unhangRange(e,o,{voids:v})),g&&Oa.isRange(o)){if(Oa.isCollapsed(o)&&$a.leaf(e,o.anchor)[0].text.length>0)return;var p=$a.rangeRef(e,o,{affinity:"inward"}),m=Oa.edges(o),C=(0,M.c)(m,2),y=C[0],E=C[1],D="lowest"===s?"lowest":"highest",A=$a.isEnd(e,E,E.path);Wo.splitNodes(e,{at:E,match:r,mode:D,voids:v,always:!A});var k=$a.isStart(e,y,y.path);Wo.splitNodes(e,{at:y,match:r,mode:D,voids:v,always:!k}),o=p.unref(),null==n.at&&Wo.select(e,o)}i||(i=function(e,t){return e!==t});var w,b=Da($a.nodes(e,{at:o,match:r,mode:s,voids:v}));try{for(b.s();!(w=b.n()).done;){var x=(0,M.c)(w.value,2),S=x[0],I=x[1],B={},L={};if(0!==I.length){var R=!1;for(var F in t)"children"!==F&&"text"!==F&&i(t[F],S[F])&&(R=!0,S.hasOwnProperty(F)&&(B[F]=S[F]),l?null!=t[F]&&(L[F]=l(S[F],t[F])):null!=t[F]&&(L[F]=t[F]));R&&e.apply({type:"set_node",path:I,properties:B,newProperties:L})}}}catch(e){b.e(e)}finally{b.f()}}}))},Bl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};$a.withoutNormalizing(e,(function(){var n=t.mode,r=void 0===n?"lowest":n,a=t.voids,o=void 0!==a&&a,i=t.match,l=t.at,u=void 0===l?e.selection:l,c=t.height,d=void 0===c?0:c,s=t.always,f=void 0!==s&&s;if(null==i&&(i=function(t){return za.isElement(t)&&$a.isBlock(e,t)}),Oa.isRange(u)&&(u=function(e,t){if(Oa.isCollapsed(t))return t.anchor;var n=Oa.edges(t),r=(0,M.c)(n,2)[1],a=$a.pointRef(e,r);return Wo.delete(e,{at:t}),a.unref()}(e,u)),Fa.isPath(u)){var g=u,h=$a.point(e,g),v=$a.parent(e,g),p=(0,M.c)(v,1)[0];i=function(e){return e===p},d=h.path.length-g.length+1,u=h,f=!0}if(u){var m,C=$a.pointRef(e,u,{affinity:"backward"});try{var y,E=$a.nodes(e,{at:u,match:i,mode:r,voids:o}),D=(0,M.c)(E,1)[0];if(!D)return;var A=$a.void(e,{at:u,mode:"highest"});if(!o&&A){var k=(0,M.c)(A,2),w=k[0],b=k[1];if(za.isElement(w)&&e.isInline(w)){var x=$a.after(e,b);if(!x){var S=Fa.next(b);Wo.insertNodes(e,{text:""},{at:S,voids:o}),x=$a.point(e,S)}u=x,f=!0}d=u.path.length-b.length+1,f=!0}m=$a.pointRef(e,u);var I,B=u.path.length-d,L=(0,M.c)(D,2)[1],R=Sn()(y=u.path).call(y,0,B),F=0===d?u.offset:u.path[B]+0,T=Da($a.levels(e,{at:R,reverse:!0,voids:o}));try{for(T.s();!(I=T.n()).done;){var N=(0,M.c)(I.value,2),G=N[0],Z=N[1],Q=!1;if(Z.length<L.length||0===Z.length||!o&&za.isElement(G)&&$a.isVoid(e,G))break;var P=C.current,J=$a.isEnd(e,P,Z);if(f||!C||!$a.isEdge(e,P,Z)){Q=!0;var j=Ha.extractProps(G);e.apply({type:"split_node",path:Z,position:F,properties:j})}F=Z[Z.length-1]+(Q||J?1:0)}}catch(e){T.e(e)}finally{T.f()}if(null==t.at){var O=m.current||$a.end(e,[]);Wo.select(e,O)}}finally{var U;C.unref(),null===(U=m)||void 0===U||U.unref()}}}))},Ml=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};zn()(t)||(t=[t]);var r,a={},o=Da(t);try{for(o.s();!(r=o.n()).done;){a[r.value]=null}}catch(e){o.e(e)}finally{o.f()}Wo.setNodes(e,a,n)},Ll=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};$a.withoutNormalizing(e,(function(){var n,r=t.mode,a=void 0===r?"lowest":r,o=t.split,i=void 0!==o&&o,l=t.voids,u=void 0!==l&&l,c=t.at,d=void 0===c?e.selection:c,s=t.match;if(d){null==s&&(s=Fa.isPath(d)?ho(e,d):function(t){return za.isElement(t)&&$a.isBlock(e,t)}),Fa.isPath(d)&&(d=$a.range(e,d));var f,g=Oa.isRange(d)?$a.rangeRef(e,d):null,h=$a.nodes(e,{at:d,match:s,mode:a,voids:u}),v=function(t){var n=t.unref(),r=$a.node(e,n),a=(0,M.c)(r,1)[0],o=$a.range(e,n);i&&g&&(o=Oa.intersection(g.current,o)),Wo.liftNodes(e,{at:o,match:function(e){var t;return za.isAncestor(a)&&Bn()(t=a.children).call(t,e)},voids:u})},p=Da(ia()(n=Qn()(h,(function(t){var n=(0,M.c)(t,2)[1];return $a.pathRef(e,n)}))).call(n));try{for(p.s();!(f=p.n()).done;){v(f.value)}}catch(e){p.e(e)}finally{p.f()}g&&g.unref()}}))};function Rl(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fl(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)U()(n=Rl(Object(r),!0)).call(n,(function(t){Ta(e,t,r[t])}));else if(b())S()(e,b()(r));else{var a;U()(a=Rl(Object(r))).call(a,(function(t){B()(e,t,k()(r,t))}))}}return e}var Tl=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};$a.withoutNormalizing(e,(function(){var r=n.mode,a=void 0===r?"lowest":r,o=n.split,i=void 0!==o&&o,l=n.voids,u=void 0!==l&&l,c=n.match,d=n.at,s=void 0===d?e.selection:d;if(s){if(null==c&&(c=Fa.isPath(s)?ho(e,s):e.isInline(t)?function(t){return za.isElement(t)&&$a.isInline(e,t)||fo.isText(t)}:function(t){return za.isElement(t)&&$a.isBlock(e,t)}),i&&Oa.isRange(s)){var f=Oa.edges(s),g=(0,M.c)(f,2),h=g[0],v=g[1],p=$a.rangeRef(e,s,{affinity:"inward"});Wo.splitNodes(e,{at:v,match:c,voids:u}),Wo.splitNodes(e,{at:h,match:c,voids:u}),s=p.unref(),null==n.at&&Wo.select(e,s)}var m,C=Qn()($a.nodes(e,{at:s,match:e.isInline(t)?function(t){return za.isElement(t)&&$a.isBlock(e,t)}:function(e){return $a.isEditor(e)},mode:"lowest",voids:u})),y=Da(C);try{for(y.s();!(m=y.n()).done;){var E=(0,M.c)(m.value,2)[1],D=Oa.isRange(s)?Oa.intersection(s,$a.range(e,E)):s;if(D){var A=Qn()($a.nodes(e,{at:D,match:c,mode:a,voids:u}));if(A.length>0){var k=function(){var n=A,r=(0,M.c)(n,1)[0],a=A[A.length-1],o=(0,M.c)(r,2)[1],i=(0,M.c)(a,2)[1];if(0===o.length&&0===i.length)return"continue";var l=Fa.equals(o,i)?Fa.parent(o):Fa.common(o,i),c=$a.range(e,o,i),d=$a.node(e,l),s=(0,M.c)(d,1)[0],f=l.length+1,g=Fa.next(Sn()(i).call(i,0,f)),h=Fl(Fl({},t),{},{children:[]});Wo.insertNodes(e,h,{at:g,voids:u}),Wo.moveNodes(e,{at:c,match:function(e){var t;return za.isAncestor(s)&&Bn()(t=s.children).call(t,e)},to:Z()(g).call(g,0),voids:u})}();if("continue"===k)continue}}}}catch(e){y.e(e)}finally{y.f()}}}))},Nl=function(){var e={children:[],operations:[],selection:null,marks:null,isElementReadOnly:function(){return!1},isInline:function(){return!1},isSelectable:function(){return!0},isVoid:function(){return!1},markableVoid:function(){return!1},onChange:function(){},apply:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Ko.apply(void 0,Z()(t=[e]).call(t,r))},addMark:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return ei.apply(void 0,Z()(t=[e]).call(t,r))},deleteBackward:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return li.apply(void 0,Z()(t=[e]).call(t,r))},deleteForward:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return ui.apply(void 0,Z()(t=[e]).call(t,r))},deleteFragment:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return ci.apply(void 0,Z()(t=[e]).call(t,r))},getFragment:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Ho.apply(void 0,Z()(t=[e]).call(t,r))},insertBreak:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return wi.apply(void 0,Z()(t=[e]).call(t,r))},insertSoftBreak:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return xi.apply(void 0,Z()(t=[e]).call(t,r))},insertFragment:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return sl.apply(void 0,Z()(t=[e]).call(t,r))},insertNode:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return bi.apply(void 0,Z()(t=[e]).call(t,r))},insertText:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Ii.apply(void 0,Z()(t=[e]).call(t,r))},normalizeNode:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return qo.apply(void 0,Z()(t=[e]).call(t,r))},removeMark:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return al.apply(void 0,Z()(t=[e]).call(t,r))},getDirtyPaths:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Vo.apply(void 0,Z()(t=[e]).call(t,r))},shouldNormalize:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Yo.apply(void 0,Z()(t=[e]).call(t,r))},above:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Xo.apply(void 0,Z()(t=[e]).call(t,r))},after:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return ri.apply(void 0,Z()(t=[e]).call(t,r))},before:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return ii.apply(void 0,Z()(t=[e]).call(t,r))},collapse:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return fl.apply(void 0,Z()(t=[e]).call(t,r))},delete:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return dl.apply(void 0,Z()(t=[e]).call(t,r))},deselect:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return gl.apply(void 0,Z()(t=[e]).call(t,r))},edges:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return di.apply(void 0,Z()(t=[e]).call(t,r))},elementReadOnly:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return gi.apply(void 0,Z()(t=[e]).call(t,r))},end:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return hi.apply(void 0,Z()(t=[e]).call(t,r))},first:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return vi.apply(void 0,Z()(t=[e]).call(t,r))},fragment:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return pi.apply(void 0,Z()(t=[e]).call(t,r))},getMarks:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Ji.apply(void 0,Z()(t=[e]).call(t,r))},hasBlocks:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Ei.apply(void 0,Z()(t=[e]).call(t,r))},hasInlines:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Di.apply(void 0,Z()(t=[e]).call(t,r))},hasPath:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Ai.apply(void 0,Z()(t=[e]).call(t,r))},hasTexts:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return ki.apply(void 0,Z()(t=[e]).call(t,r))},insertNodes:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return El.apply(void 0,Z()(t=[e]).call(t,r))},isBlock:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Bi.apply(void 0,Z()(t=[e]).call(t,r))},isEdge:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Mi.apply(void 0,Z()(t=[e]).call(t,r))},isEmpty:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Li.apply(void 0,Z()(t=[e]).call(t,r))},isEnd:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Ri.apply(void 0,Z()(t=[e]).call(t,r))},isNormalizing:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Fi.apply(void 0,Z()(t=[e]).call(t,r))},isStart:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Ti.apply(void 0,Z()(t=[e]).call(t,r))},last:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Ni.apply(void 0,Z()(t=[e]).call(t,r))},leaf:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Gi.apply(void 0,Z()(t=[e]).call(t,r))},levels:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Zi.apply(void 0,Z()(t=[e]).call(t,r))},liftNodes:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Dl.apply(void 0,Z()(t=[e]).call(t,r))},mergeNodes:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return bl.apply(void 0,Z()(t=[e]).call(t,r))},move:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return hl.apply(void 0,Z()(t=[e]).call(t,r))},moveNodes:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return xl.apply(void 0,Z()(t=[e]).call(t,r))},next:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return ji.apply(void 0,Z()(t=[e]).call(t,r))},node:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Oi.apply(void 0,Z()(t=[e]).call(t,r))},nodes:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Ui.apply(void 0,Z()(t=[e]).call(t,r))},normalize:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return zi.apply(void 0,Z()(t=[e]).call(t,r))},parent:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Wi.apply(void 0,Z()(t=[e]).call(t,r))},path:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Hi.apply(void 0,Z()(t=[e]).call(t,r))},pathRef:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Ki.apply(void 0,Z()(t=[e]).call(t,r))},pathRefs:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Vi.apply(void 0,Z()(t=[e]).call(t,r))},point:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Xi.apply(void 0,Z()(t=[e]).call(t,r))},pointRef:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return qi.apply(void 0,Z()(t=[e]).call(t,r))},pointRefs:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Yi.apply(void 0,Z()(t=[e]).call(t,r))},positions:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return _i.apply(void 0,Z()(t=[e]).call(t,r))},previous:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return $i.apply(void 0,Z()(t=[e]).call(t,r))},range:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return nl.apply(void 0,Z()(t=[e]).call(t,r))},rangeRef:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return el.apply(void 0,Z()(t=[e]).call(t,r))},rangeRefs:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return tl.apply(void 0,Z()(t=[e]).call(t,r))},removeNodes:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Sl.apply(void 0,Z()(t=[e]).call(t,r))},select:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return vl.apply(void 0,Z()(t=[e]).call(t,r))},setNodes:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Il.apply(void 0,Z()(t=[e]).call(t,r))},setNormalizing:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return ol.apply(void 0,Z()(t=[e]).call(t,r))},setPoint:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Cl.apply(void 0,Z()(t=[e]).call(t,r))},setSelection:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return yl.apply(void 0,Z()(t=[e]).call(t,r))},splitNodes:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Bl.apply(void 0,Z()(t=[e]).call(t,r))},start:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return il.apply(void 0,Z()(t=[e]).call(t,r))},string:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return ll.apply(void 0,Z()(t=[e]).call(t,r))},unhangRange:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return ul.apply(void 0,Z()(t=[e]).call(t,r))},unsetNodes:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Ml.apply(void 0,Z()(t=[e]).call(t,r))},unwrapNodes:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Ll.apply(void 0,Z()(t=[e]).call(t,r))},void:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return yi.apply(void 0,Z()(t=[e]).call(t,r))},withoutNormalizing:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return cl.apply(void 0,Z()(t=[e]).call(t,r))},wrapNodes:function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Tl.apply(void 0,Z()(t=[e]).call(t,r))}};return e};function Gl(e,t){var n=void 0!==Jn()&&On()(e)||e["@@iterator"];if(!n){if(zn()(e)||(n=function(e,t){var n;if(!e)return;if("string"==typeof e)return Zl(e,t);var r=Sn()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Qn()(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Zl(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw o}}}}function Zl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ql=function(e){return pa()(e)&&zn()(e.redos)&&zn()(e.undos)&&(0===e.redos.length||Xa.isOperationList(e.redos[0]))&&(0===e.undos.length||Xa.isOperationList(e.undos[0]))},Pl=(new(aa()),new(aa())),Jl=new(aa()),jl={isHistoryEditor:function(e){return Ql(e.history)&&$a.isEditor(e)},isMerging:function(e){return Jl.get(e)},isSaving:function(e){return Pl.get(e)},redo:function(e){e.redo()},undo:function(e){e.undo()},withoutMerging:function(e,t){var n=jl.isMerging(e);Jl.set(e,!1),t(),Jl.set(e,n)},withoutSaving:function(e,t){var n=jl.isSaving(e);Pl.set(e,!1),t(),Pl.set(e,n)}},Ol=function(e){var t=e,n=t.apply;return t.history={undos:[],redos:[]},t.redo=function(){var e=t.history,n=e.redos;if(n.length>0){var r=n[n.length-1];jl.withoutSaving(t,(function(){$a.withoutNormalizing(t,(function(){var e,n=Gl(r);try{for(n.s();!(e=n.n()).done;){var a=e.value;t.apply(a)}}catch(e){n.e(e)}finally{n.f()}}))})),e.redos.pop(),e.undos.push(r)}},t.undo=function(){var e=t.history,n=e.undos;if(n.length>0){var r=n[n.length-1];jl.withoutSaving(t,(function(){$a.withoutNormalizing(t,(function(){var e,n,a=Gl(ia()(e=N()(r).call(r,Xa.inverse)).call(e));try{for(a.s();!(n=a.n()).done;){var o=n.value;t.apply(o)}}catch(e){a.e(e)}finally{a.f()}}))})),e.redos.push(r),e.undos.pop()}},t.apply=function(e){var r=t.operations,a=t.history,o=a.undos,i=o[o.length-1],l=i&&i[i.length-1],u=Wl(e,l),c=jl.isSaving(t),d=jl.isMerging(t);if(null==c&&(c=zl(e)),c){if(null==d&&(d=null!=i&&(0!==r.length||(Ul(e,l)||u))),i&&d)u&&i.pop(),i.push(e);else{var s=[e];o.push(s)}for(;o.length>100;)o.shift();Kl(e)&&(a.redos=[])}n(e)},t},Ul=function(e,t){return"set_selection"===e.type||(!(!t||"insert_text"!==e.type||"insert_text"!==t.type||e.offset!==t.offset+t.text.length||!Fa.equals(e.path,t.path))||!(!t||"remove_text"!==e.type||"remove_text"!==t.type||e.offset+e.text.length!==t.offset||!Fa.equals(e.path,t.path)))},zl=function(e,t){return"set_selection"!==e.type||null!=e.properties&&null!=e.newProperties},Wl=function(e,t){return!(!t||"set_selection"!==e.type||"set_selection"!==t.type)},Kl=function(e){return"set_selection"!==e.type},Vl=n(11984),Hl=n.n(Vl),ql=n(54895),Yl=n(77284),Xl=n(43840),_l=n(27688),$l=n(3460),eu=n(97552),tu=n.n(eu),nu=n(57548),ru=n.n(nu),au=n(49464),ou=n.n(au),iu=n(20484),lu=n.n(iu),uu=n(52360),cu=n.n(uu),du=n(6220),su=n.n(du),fu=n(94608),gu=n.n(fu),hu=n(5800),vu=n.n(hu),pu=n(76232),mu=n(90352);function Cu(e,t,n){return t=(0,Yl.c)(t),(0,ql.c)(e,yu()?Hl()(t,n||[],(0,Yl.c)(e).constructor):t.apply(e,n))}function yu(){try{var e=!Boolean.prototype.valueOf.call(Hl()(Boolean,[],(function(){})))}catch(e){}return(yu=function(){return!!e})()}function Eu(e,t){var n=void 0!==Jn()&&On()(e)||e["@@iterator"];if(!n){if(zn()(e)||(n=function(e,t){var n;if(!e)return;if("string"==typeof e)return Du(e,t);var r=Sn()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Qn()(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Du(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw o}}}}function Du(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Au(e,t,n){return t in e?B()(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ku(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=C()(e);for(r=0;r<o.length;r++)n=o[r],bn()(t).call(t,n)>=0||(a[n]=e[n]);return a}(e,t);if(D()){var o=D()(e);for(r=0;r<o.length;r++)n=o[r],bn()(t).call(t,n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var wu=(0,V.createContext)(null),bu=function(){var e=(0,V.useContext)(wu);if(!e)throw new Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return e},xu=tu()(H().version.split(".")[0],10),Su="undefined"!=typeof navigator&&"undefined"!=typeof window&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Iu="undefined"!=typeof navigator&&/Mac OS X/.test(navigator.userAgent),Bu="undefined"!=typeof navigator&&/Android/.test(navigator.userAgent),Mu="undefined"!=typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),Lu="undefined"!=typeof navigator&&/AppleWebKit(?!.*Chrome)/i.test(navigator.userAgent),Ru="undefined"!=typeof navigator&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent),Fu="undefined"!=typeof navigator&&/Chrome/i.test(navigator.userAgent),Tu="undefined"!=typeof navigator&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent),Nu=Bu&&"undefined"!=typeof navigator&&/Chrome?\/(?:[0-5]?\d)(?:\.)/i.test(navigator.userAgent),Gu="undefined"!=typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent),Zu="undefined"!=typeof navigator&&/.*UCBrowser/.test(navigator.userAgent),Qu="undefined"!=typeof navigator&&/.*Wechat/.test(navigator.userAgent)&&!/.*MacWechat/.test(navigator.userAgent),Pu=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),Ju=(!Tu||!Nu)&&!Ru&&void 0!==ru()&&ru().InputEvent&&"function"==typeof ru().InputEvent.prototype.getTargetRanges,ju=new(aa()),Ou=new(aa()),Uu=new(aa()),zu=new(aa()),Wu=new(aa()),Ku=new(aa()),Vu=new(aa()),Hu=new(aa()),qu=new(aa()),Yu=new(aa()),Xu=new(aa()),_u=new(aa()),$u=new(aa()),ec=new(aa()),tc=new(aa()),nc=new(aa()),rc=new(aa()),ac=new(aa()),oc=new(aa()),ic=new(aa()),lc=new(aa()),uc=Jn()("placeholder"),cc=Jn()("mark-placeholder"),dc=ru().Text,sc=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||null},fc=function(e){return gc(e)&&1===e.nodeType},gc=function(e){var t=sc(e);return!!t&&e instanceof t.Node},hc=function(e){var t=e&&e.anchorNode&&sc(e.anchorNode);return!!t&&e instanceof t.Selection},vc=function(e){return gc(e)&&3===e.nodeType},pc=function(e,t,n){for(var r,a=e.childNodes,o=a[t],i=t,l=!1,u=!1;(gc(r=o)&&8===r.nodeType||fc(o)&&0===o.childNodes.length||fc(o)&&"false"===o.getAttribute("contenteditable"))&&(!l||!u);)i>=a.length?(l=!0,i=t-1,n="backward"):i<0?(u=!0,i=t+1,n="forward"):(o=a[i],t=i,i+="forward"===n?1:-1);return[o,t]},mc=function(e,t,n){var r=pc(e,t,n);return(0,M.c)(r,1)[0]},Cc=function e(t){var n="";if(vc(t)&&t.nodeValue)return t.nodeValue;if(fc(t)){for(var r=0,a=Qn()(t.childNodes);r<a.length;r++){n+=e(a[r])}var o=getComputedStyle(t).getPropertyValue("display");"block"!==o&&"list"!==o&&"BR"!==t.tagName||(n+="\n")}return n},yc=/data-slate-fragment="(.+?)"/m,Ec=function e(t,n,r){var a=n.target;if(fc(a)&&a.matches('[contentEditable="false"]'))return!1;if(kc.getWindow(t).document.contains(a))return kc.hasDOMNode(t,a,{editable:!0});var o=Yn()(r).call(r,(function(e){var t,n=e.addedNodes,r=e.removedNodes,o=Eu(n);try{for(o.s();!(t=o.n()).done;){var i=t.value;if(i===a||i.contains(a))return!0}}catch(e){o.e(e)}finally{o.f()}var l,u=Eu(r);try{for(u.s();!(l=u.n()).done;){var c=l.value;if(c===a||c.contains(a))return!0}}catch(e){u.e(e)}finally{u.f()}}));return!(!o||o===n)&&e(t,o,r)},Dc=0,Ac=(0,_l.c)((function e(){(0,$l.c)(this,e),this.id="".concat(Dc++)})),kc={androidPendingDiffs:function(e){return ac.get(e)},androidScheduleFlush:function(e){var t;null===(t=tc.get(e))||void 0===t||t()},blur:function(e){var t=kc.toDOMNode(e,e),n=kc.findDocumentOrShadowRoot(e);Xu.set(e,!1),n.activeElement===t&&t.blur()},deselect:function(e){var t=e.selection,n=kc.findDocumentOrShadowRoot(e).getSelection();n&&n.rangeCount>0&&n.removeAllRanges(),t&&Wo.deselect(e)},findDocumentOrShadowRoot:function(e){var t=kc.toDOMNode(e,e),n=t.getRootNode();return(n instanceof Document||n instanceof ShadowRoot)&&null!=n.getSelection?n:t.ownerDocument},findEventRange:function(e,t){"nativeEvent"in t&&(t=t.nativeEvent);var n=t,r=n.clientX,a=n.clientY,o=n.target;if(null==r||null==a)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(t));var i,l=kc.toSlateNode(e,t.target),u=kc.findPath(e,l);if(za.isElement(l)&&$a.isVoid(e,l)){var c=o.getBoundingClientRect(),d=e.isInline(l)?r-c.left<c.left+c.width-r:a-c.top<c.top+c.height-a,s=$a.point(e,u,{edge:d?"start":"end"}),f=d?$a.before(e,s):$a.after(e,s);if(f)return $a.range(e,f)}var g=kc.getWindow(e).document;if(g.caretRangeFromPoint)i=g.caretRangeFromPoint(r,a);else{var h=g.caretPositionFromPoint(r,a);h&&((i=g.createRange()).setStart(h.offsetNode,h.offset),i.setEnd(h.offsetNode,h.offset))}if(!i)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(t));return kc.toSlateRange(e,i,{exactMatch:!1,suppressThrow:!1})},findKey:function(e,t){var n=Hu.get(t);return n||(n=new Ac,Hu.set(t,n)),n},findPath:function(e,t){for(var n=[],r=t;;){var a=Ou.get(r);if(null==a){if($a.isEditor(r))return n;break}var o=ju.get(r);if(null==o)break;n.unshift(o),r=a}throw new Error("Unable to find the path for Slate node: ".concat(oo.stringify(t)))},focus:function(e){var t=kc.toDOMNode(e,e),n=kc.findDocumentOrShadowRoot(e);Xu.set(e,!0),n.activeElement!==t&&t.focus({preventScroll:!0})},getWindow:function(e){var t=Uu.get(e);if(!t)throw new Error("Unable to find a host window element for this editor");return t},hasDOMNode:function(e,t){var n,r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).editable,a=void 0!==r&&r,o=kc.toDOMNode(e,e);try{n=fc(t)?t:t.parentElement}catch(e){var i;if(!Bn()(i=e.message).call(i,'Permission denied to access property "nodeType"'))throw e}return!!n&&!(n.closest("[data-slate-editor]")!==o||a&&!n.isContentEditable&&("boolean"!=typeof n.isContentEditable||n.closest('[contenteditable="false"]')!==o)&&!n.getAttribute("data-slate-zero-width"))},hasEditableTarget:function(e,t){return gc(t)&&kc.hasDOMNode(e,t,{editable:!0})},hasRange:function(e,t){var n=t.anchor,r=t.focus;return $a.hasPath(e,n.path)&&$a.hasPath(e,r.path)},hasSelectableTarget:function(e,t){return kc.hasEditableTarget(e,t)||kc.isTargetInsideNonReadonlyVoid(e,t)},hasTarget:function(e,t){return gc(t)&&kc.hasDOMNode(e,t)},insertData:function(e,t){e.insertData(t)},insertFragmentData:function(e,t){return e.insertFragmentData(t)},insertTextData:function(e,t){return e.insertTextData(t)},isComposing:function(e){return!!_u.get(e)},isFocused:function(e){return!!Xu.get(e)},isReadOnly:function(e){return!!Yu.get(e)},isTargetInsideNonReadonlyVoid:function(e,t){if(Yu.get(e))return!1;var n=kc.hasTarget(e,t)&&kc.toSlateNode(e,t);return za.isElement(n)&&$a.isVoid(e,n)},setFragmentData:function(e,t,n){return e.setFragmentData(t,n)},toDOMNode:function(e,t){var n=qu.get(e),r=$a.isEditor(t)?zu.get(e):null==n?void 0:n.get(kc.findKey(e,t));if(!r)throw new Error("Cannot resolve a DOM node from Slate node: ".concat(oo.stringify(t)));return r},toDOMPoint:function(e,t){var n,r=$a.node(e,t.path),a=(0,M.c)(r,1)[0],o=kc.toDOMNode(e,a);$a.void(e,{at:t})&&(t={path:t.path,offset:0});for(var i=Qn()(o.querySelectorAll("[data-slate-string], [data-slate-zero-width]")),l=0,u=0;u<i.length;u++){var c=i[u],d=c.childNodes[0];if(null!=d&&null!=d.textContent){var s=d.textContent.length,f=c.getAttribute("data-slate-length"),g=l+(null==f?s:tu()(f,10)),h=i[u+1];if(t.offset===g&&null!=h&&h.hasAttribute("data-slate-mark-placeholder")){var v,p=h.childNodes[0];n=[p instanceof dc?p:h,null!==(v=h.textContent)&&void 0!==v&&ou()(v).call(v,"\ufeff")?1:0];break}if(t.offset<=g){n=[d,Math.min(s,Math.max(0,t.offset-l))];break}l=g}}if(!n)throw new Error("Cannot resolve a DOM point from Slate point: ".concat(oo.stringify(t)));return n},toDOMRange:function(e,t){var n=t.anchor,r=t.focus,a=Oa.isBackward(t),o=kc.toDOMPoint(e,n),i=Oa.isCollapsed(t)?o:kc.toDOMPoint(e,r),l=kc.getWindow(e).document.createRange(),u=a?i:o,c=(0,M.c)(u,2),d=c[0],s=c[1],f=a?o:i,g=(0,M.c)(f,2),h=g[0],v=g[1],p=!!(fc(d)?d:d.parentElement).getAttribute("data-slate-zero-width"),m=!!(fc(h)?h:h.parentElement).getAttribute("data-slate-zero-width");return l.setStart(d,p?1:s),l.setEnd(h,m?1:v),l},toSlateNode:function(e,t){var n=fc(t)?t:t.parentElement;n&&!n.hasAttribute("data-slate-node")&&(n=n.closest("[data-slate-node]"));var r=n?Ku.get(n):null;if(!r)throw new Error("Cannot resolve a Slate node from DOM node: ".concat(n));return r},toSlatePoint:function(e,t,n){var r=n.exactMatch,a=n.suppressThrow,o=r?t:function(e){var t=(0,M.c)(e,2),n=t[0],r=t[1];if(fc(n)&&n.childNodes.length){var a=r===n.childNodes.length,o=a?r-1:r,i=pc(n,o,a?"backward":"forward"),l=(0,M.c)(i,2);for(n=l[0],a=(o=l[1])<r;fc(n)&&n.childNodes.length;){var u=a?n.childNodes.length-1:0;n=mc(n,u,a?"backward":"forward")}r=a&&null!=n.textContent?n.textContent.length:0}return[n,r]}(t),i=(0,M.c)(o,2),l=i[0],u=i[1],c=l.parentNode,d=null,s=0;if(c){var f,g,h=kc.toDOMNode(e,e),v=c.closest('[data-slate-void="true"]'),p=v&&h.contains(v)?v:null,m=c.closest("[data-slate-leaf]"),C=null;if(m){if(d=m.closest('[data-slate-node="text"]')){var y,E=kc.getWindow(e).document.createRange();E.setStart(d,0),E.setEnd(l,u);var D=E.cloneContents(),A=Z()(y=[]).call(y,(0,kn.c)(Sn()(Array.prototype).call(D.querySelectorAll("[data-slate-zero-width]"))),(0,kn.c)(Sn()(Array.prototype).call(D.querySelectorAll("[contenteditable=false]"))));U()(A).call(A,(function(e){var t,n;Bu&&!r&&e.hasAttribute("data-slate-zero-width")&&e.textContent.length>0&&"\ufeff"!==e.textContext?ou()(t=e.textContent).call(t,"\ufeff")&&(e.textContent=Sn()(n=e.textContent).call(n,1)):e.parentNode.removeChild(e)})),s=D.textContent.length,C=d}}else if(p){for(var k,w=p.querySelectorAll("[data-slate-leaf]"),b=0;b<w.length;b++){var x=w[b];if(kc.hasDOMNode(e,x)){m=x;break}}if(m)d=m.closest('[data-slate-node="text"]'),s=(C=m).textContent.length,U()(k=C.querySelectorAll("[data-slate-zero-width]")).call(k,(function(e){s-=e.textContent.length}));else s=1}C&&s===C.textContent.length&&Bu&&"z"===C.getAttribute("data-slate-zero-width")&&null!==(f=C.textContent)&&void 0!==f&&ou()(f).call(f,"\ufeff")&&(c.hasAttribute("data-slate-zero-width")||Mu&&null!==(g=C.textContent)&&void 0!==g&&Fn()(g).call(g,"\n\n"))&&s--}if(Bu&&!d&&!r){var S=c.hasAttribute("data-slate-node")?c:c.closest("[data-slate-node]");if(S&&kc.hasDOMNode(e,S,{editable:!0})){var I=kc.toSlateNode(e,S),B=$a.start(e,kc.findPath(e,I)),L=B.path,R=B.offset;return S.querySelector("[data-slate-leaf]")||(R=u),{path:L,offset:R}}}if(!d){if(a)return null;throw new Error("Cannot resolve a Slate point from DOM point: ".concat(t))}var F=kc.toSlateNode(e,d);return{path:kc.findPath(e,F),offset:s}},toSlateRange:function(e,t,n){var r,a,o,i,l,u,c=n.exactMatch,d=n.suppressThrow;if(hc(t)?t.anchorNode:t.startContainer)if(hc(t)){if(Mu&&t.rangeCount>1){o=t.focusNode;var s=t.getRangeAt(0),f=t.getRangeAt(t.rangeCount-1);if(o instanceof HTMLTableRowElement&&s.startContainer instanceof HTMLTableRowElement&&f.startContainer instanceof HTMLTableRowElement){var g=function e(t){return t.childElementCount>0?e(t.children[0]):t},h=s.startContainer,v=f.startContainer,p=g(h.children[s.startOffset]),m=g(v.children[f.startOffset]);i=0,r=m.childNodes.length>0?m.childNodes[0]:m,o=p.childNodes.length>0?p.childNodes[0]:p,a=m instanceof HTMLElement?m.innerHTML.length:0}else s.startContainer===o?(r=f.endContainer,a=f.endOffset,i=s.startOffset):(r=s.startContainer,a=s.endOffset,i=f.startOffset)}else r=t.anchorNode,a=t.anchorOffset,o=t.focusNode,i=t.focusOffset;l=Fu&&function(e){for(var t=e&&e.parentNode;t;){if("[object ShadowRoot]"===t.toString())return!0;t=t.parentNode}return!1}(r)||Mu?t.anchorNode===t.focusNode&&t.anchorOffset===t.focusOffset:t.isCollapsed}else r=t.startContainer,a=t.startOffset,o=t.endContainer,i=t.endOffset,l=t.collapsed;if(null==r||null==o||null==a||null==i)throw new Error("Cannot resolve a Slate range from DOM range: ".concat(t));"getAttribute"in o&&"false"===o.getAttribute("contenteditable")&&"true"!==o.getAttribute("data-slate-void")&&(o=r,i=(null===(u=r.textContent)||void 0===u?void 0:u.length)||0);var C=kc.toSlatePoint(e,[r,a],{exactMatch:c,suppressThrow:d});if(!C)return null;var y=l?C:kc.toSlatePoint(e,[o,i],{exactMatch:c,suppressThrow:d});if(!y)return null;var E={anchor:C,focus:y};return Oa.isExpanded(E)&&Oa.isForward(E)&&fc(o)&&$a.void(e,{at:E.focus,mode:"highest"})&&(E=$a.unhangRange(e,E,{voids:!0})),E}};function wc(e,t){var n,r=t.path,a=t.diff;if(!$a.hasPath(e,r))return!1;var o,i=Ha.get(e,r);if(!fo.isText(i))return!1;if(a.start!==i.text.length||0===a.text.length)return Sn()(o=i.text).call(o,a.start,a.start+a.text.length)===a.text;var l=Fa.next(r);if(!$a.hasPath(e,l))return!1;var u=Ha.get(e,l);return fo.isText(u)&&ou()(n=u.text).call(n,a.text)}function bc(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return P()(n).call(n,(function(e,t){return Sn()(e).call(e,0,t.start)+t.text+Sn()(e).call(e,t.end)}),e)}function xc(e,t){var n=t.start,r=t.end,a=t.text,o=Sn()(e).call(e,n,r),i=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++)if(e.charAt(r)!==t.charAt(r))return r;return n}(o,a),l=function(e,t,n){for(var r=Math.min(e.length,t.length,n),a=0;a<r;a++)if(e.charAt(e.length-a-1)!==t.charAt(t.length-a-1))return a;return r}(o,a,Math.min(o.length-i,a.length-i)),u={start:n+i,end:r-l,text:Sn()(a).call(a,i,a.length-l)};return u.start===u.end&&0===u.text.length?null:u}function Sc(e){var t=e.path,n=e.diff;return{anchor:{path:t,offset:n.start},focus:{path:t,offset:n.end}}}function Ic(e,t){var n=t.path,r=t.offset;if(!$a.hasPath(e,n))return null;var a=Ha.get(e,n);if(!fo.isText(a))return null;var o=$a.above(e,{match:function(t){return za.isElement(t)&&$a.isBlock(e,t)},at:n});if(!o)return null;for(;r>a.text.length;){var i=$a.next(e,{at:n,match:fo.isText});if(!i||!Fa.isDescendant(i[1],o[1]))return null;r-=a.text.length,a=i[0],n=i[1]}return{path:n,offset:r}}function Bc(e,t){var n=Ic(e,t.anchor);if(!n)return null;if(Oa.isCollapsed(t))return{anchor:n,focus:n};var r=Ic(e,t.focus);return r?{anchor:n,focus:r}:null}function Mc(e,t,n){var r=ac.get(e),a=null==r?void 0:Yn()(r).call(r,(function(e){var n=e.path;return Fa.equals(n,t.path)}));if(!a||t.offset<=a.diff.start)return ro.transform(t,n,{affinity:"backward"});var o=a.diff;if(t.offset<=o.start+o.text.length){var i={path:t.path,offset:o.start},l=ro.transform(i,n,{affinity:"backward"});return l?{path:l.path,offset:l.offset+t.offset-o.start}:null}var u={path:t.path,offset:t.offset-o.text.length+o.end-o.start},c=ro.transform(u,n,{affinity:"backward"});return c?"split_node"===n.type&&Fa.equals(n.path,t.path)&&u.offset<n.position&&o.start<n.position?c:{path:c.path,offset:c.offset+o.text.length-o.end+o.start}:null}function Lc(e,t,n){var r=Mc(e,t.anchor,n);if(!r)return null;if(Oa.isCollapsed(t))return{anchor:r,focus:r};var a=Mc(e,t.focus,n);return a?{anchor:r,focus:a}:null}function Rc(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fc(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)U()(n=Rc(Object(r),!0)).call(n,(function(t){Au(e,t,r[t])}));else if(b())S()(e,b()(r));else{var a;U()(a=Rc(Object(r))).call(a,(function(t){B()(e,t,k()(r,t))}))}}return e}function Tc(e){var t=e.editor,n=e.scheduleOnDOMSelectionChange,r=e.onDOMSelectionChange,a=!1,o=null,i=null,l=null,u=0,c=!1,d=function(){var e=ic.get(t);if(ic.delete(t),e){var n=t.selection,r=Bc(t,e);!r||n&&Oa.equals(r,n)||Wo.select(t,r)}},s=function(){if(i&&(clearTimeout(i),i=null),l&&(clearTimeout(l),l=null),p()||v()){a||(a=!0,ue()((function(){return a=!1}))),v()&&(a="action");var e=t.selection&&$a.rangeRef(t,t.selection,{affinity:"forward"});rc.set(t,t.marks),oc.get(t),ac.get(t);for(var o,u=p();o=null===(s=ac.get(t))||void 0===s?void 0:s[0];){var s,f,g=nc.get(t);void 0!==g&&(nc.delete(t),t.marks=g),g&&!1===c&&(c=null);var h=Sc(o);t.selection&&Oa.equals(t.selection,h)||Wo.select(t,h),o.diff.text?$a.insertText(t,o.diff.text):$a.deleteFragment(t),ac.set(t,null===(f=ac.get(t))||void 0===f?void 0:F()(f).call(f,(function(e){return e.id!==o.id}))),wc(t,o)||(u=!1,oc.delete(t),rc.delete(t),a="action",ic.delete(t),n.cancel(),r.cancel(),null==e||e.unref())}var m=null==e?void 0:e.unref();if(!m||ic.get(t)||t.selection&&Oa.equals(m,t.selection)||Wo.select(t,m),v())!function(){var e=oc.get(t);if(oc.delete(t),e){if(e.at){var n=ro.isPoint(e.at)?Ic(t,e.at):Bc(t,e.at);if(!n)return;var r=$a.range(t,n);t.selection&&Oa.equals(t.selection,r)||Wo.select(t,n)}e.run()}}();else{u&&n(),n.flush(),r.flush(),d();var C=rc.get(t);rc.delete(t),void 0!==C&&(t.marks=C,t.onChange())}}else d()},f=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=Wu.get(t);n&&(p()||e?n.style.display="none":n.style.removeProperty("display"))},g=function(e,n){var r,a=null!==(r=ac.get(t))&&void 0!==r?r:[];ac.set(t,a);var o=Ha.leaf(t,e),i=fe()(a).call(a,(function(t){return Fa.equals(t.path,e)}));if(i<0)return xc(o.text,n)&&a.push({path:e,diff:n,id:u++}),void f();var l=function(e,t,n){var r=Math.min(t.start,n.start),a=Math.max(0,Math.min(t.start+t.text.length,n.end)-n.start),o=bc(e,t,n),i=Math.max(n.start+n.text.length,t.start+t.text.length+(t.start+t.text.length>n.start?n.text.length:0)-a),l=Sn()(o).call(o,r,i);return xc(e,{start:r,end:Math.max(t.end,n.end-t.text.length+(t.end-t.start)),text:l})}(o.text,a[i].diff,n);if(!l)return da()(a).call(a,i,1),void f();a[i]=Fc(Fc({},a[i]),{},{diff:l})},h=function(e){var a=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).at;c=!1,ic.delete(t),n.cancel(),r.cancel(),v()&&s(),oc.set(t,{at:a,run:e}),l=ue()(s)},v=function(){return!!oc.get(t)},p=function(){var e;return!(null===(e=ac.get(t))||void 0===e||!e.length)},m=function(e){var n,r;ic.set(t,e),i&&(clearTimeout(i),i=null);var a=t.selection;if(e){var o=!a||!Fa.equals(a.anchor.path,e.anchor.path),l=!a||!Fa.equals(Sn()(n=a.anchor.path).call(n,0,-1),Sn()(r=e.anchor.path).call(r,0,-1));(o&&c||l)&&(c=!1),(o||p())&&(i=ue()(s,200))}},C=function(){v()||(l=ue()(s))};return{flush:s,scheduleFlush:C,hasPendingDiffs:p,hasPendingAction:v,hasPendingChanges:function(){return v()||p()},isFlushing:function(){return a},handleUserSelect:m,handleCompositionEnd:function(e){o&&clearTimeout(o),o=ue()((function(){_u.set(t,!1),s()}),25)},handleCompositionStart:function(e){_u.set(t,!0),o&&(clearTimeout(o),o=null)},handleDOMBeforeInput:function(e){var n;i&&(clearTimeout(i),i=null);var r=e.inputType,a=null,o=e.dataTransfer||e.data||void 0;!1!==c&&"insertText"!==r&&"insertCompositionText"!==r&&(c=!1);var l=e.getTargetRanges(),u=(0,M.c)(l,1)[0];u&&(a=kc.toSlateRange(t,u,{exactMatch:!1,suppressThrow:!0}));var d=kc.getWindow(t).getSelection();if(!a&&d&&(u=d,a=kc.toSlateRange(t,d,{exactMatch:!1,suppressThrow:!0})),a=null!==(n=a)&&void 0!==n?n:t.selection){var s,f=!0;if(ou()(r).call(r,"delete")){var v;if(Oa.isExpanded(a)){var p=Oa.edges(a),y=(0,M.c)(p,2),E=y[0],D=y[1];if(Ha.leaf(t,E.path).text.length===E.offset&&0===D.offset){var A=$a.next(t,{at:E.path,match:fo.isText});A&&Fa.equals(A[1],D.path)&&(a={anchor:D,focus:D})}}var k=Fn()(r).call(r,"Backward")?"backward":"forward",w=Oa.edges(a),b=(0,M.c)(w,2),x=b[0],S=b[1],I=$a.leaf(t,x.path),B=(0,M.c)(I,2),L=B[0],R=B[1],F={text:"",start:x.offset,end:S.offset},T=ac.get(t),N=null==T?void 0:Yn()(T).call(T,(function(e){return Fa.equals(e.path,R)})),G=N?[N.diff,F]:[F];if(0===bc.apply(void 0,Z()(v=[L.text]).call(v,G)).length&&(f=!1),Oa.isExpanded(a)){if(f&&Fa.equals(a.anchor.path,a.focus.path)){var Q={path:a.anchor.path,offset:x.offset},P=$a.range(t,Q,Q);return m(P),g(a.anchor.path,{text:"",end:S.offset,start:x.offset})}return h((function(){return $a.deleteFragment(t,{direction:k})}),{at:a})}}switch(r){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":return h((function(){return $a.deleteFragment(t)}),{at:a});case"deleteContent":case"deleteContentForward":var J=a.anchor;if(f&&Oa.isCollapsed(a)){var j=Ha.leaf(t,J.path);if(J.offset<j.text.length)return g(J.path,{text:"",start:J.offset,end:J.offset+1})}return h((function(){return $a.deleteForward(t)}),{at:a});case"deleteContentBackward":var O,z=a.anchor,W=hc(u)?u.isCollapsed:!(null===(O=u)||void 0===O||!O.collapsed);return f&&W&&Oa.isCollapsed(a)&&z.offset>0?g(z.path,{text:"",start:z.offset-1,end:z.offset}):h((function(){return $a.deleteBackward(t)}),{at:a});case"deleteEntireSoftLine":return h((function(){$a.deleteBackward(t,{unit:"line"}),$a.deleteForward(t,{unit:"line"})}),{at:a});case"deleteHardLineBackward":return h((function(){return $a.deleteBackward(t,{unit:"block"})}),{at:a});case"deleteSoftLineBackward":return h((function(){return $a.deleteBackward(t,{unit:"line"})}),{at:a});case"deleteHardLineForward":return h((function(){return $a.deleteForward(t,{unit:"block"})}),{at:a});case"deleteSoftLineForward":return h((function(){return $a.deleteForward(t,{unit:"line"})}),{at:a});case"deleteWordBackward":return h((function(){return $a.deleteBackward(t,{unit:"word"})}),{at:a});case"deleteWordForward":return h((function(){return $a.deleteForward(t,{unit:"word"})}),{at:a});case"insertLineBreak":return h((function(){return $a.insertSoftBreak(t)}),{at:a});case"insertParagraph":return h((function(){return $a.insertBreak(t)}),{at:a});case"insertCompositionText":case"deleteCompositionText":case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":if("DataTransfer"===(null==(s=o)?void 0:s.constructor.name))return h((function(){return kc.insertData(t,o)}),{at:a});var K=null!=o?o:"";if(nc.get(t)&&(K=K.replace("\ufeff","")),"insertText"===r&&/.*\n.*\n$/.test(K)&&(K=Sn()(K).call(K,0,-1)),Bn()(K).call(K,"\n"))return h((function(){var e=K.split("\n");U()(e).call(e,(function(n,r){n&&$a.insertText(t,n),r!==e.length-1&&$a.insertSoftBreak(t)}))}),{at:a});if(Fa.equals(a.anchor.path,a.focus.path)){var V=Oa.edges(a),H=(0,M.c)(V,2),q=H[0],Y=H[1],X={start:q.offset,end:Y.offset,text:K};if(K&&c&&"insertCompositionText"===r){var _=c.start+c.text.search(/\S|$/);X.start+X.text.search(/\S|$/)===_+1&&X.end===c.start+c.text.length?(X.start-=1,c=null,C()):c=!1}else c="insertText"===r&&(null===c?X:!(!c||!Oa.isCollapsed(a)||c.end+c.text.length!==q.offset)&&Fc(Fc({},c),{},{text:c.text+K}));if(f)return void g(q.path,X)}return h((function(){return $a.insertText(t,K)}),{at:a})}}},handleKeyDown:function(e){p()||(f(!0),ue()(f))},handleDomMutations:function(e){var n;p()||v()||_n()(e).call(e,(function(n){return Ec(t,n,e)}))&&(null===(n=lc.get(t))||void 0===n||n())},handleInput:function(){!v()&&p()||s()}}}var Nc=Pu?V.useLayoutEffect:V.useEffect;var Gc=["node"];function Zc(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}var Qc={subtree:!0,childList:!0,characterData:!0},Pc=Bu?function(e){var t=e.node,n=ku(e,Gc);if(!Bu)return null;var r,a=bu(),o=(r=(0,V.useRef)(!1),(0,V.useEffect)((function(){return r.current=!0,function(){r.current=!1}}),[]),r.current),i=(0,V.useState)((function(){return Tc(function(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)U()(n=Zc(Object(r),!0)).call(n,(function(t){Au(e,t,r[t])}));else if(b())S()(e,b()(r));else{var a;U()(a=Zc(Object(r))).call(a,(function(t){B()(e,t,k()(r,t))}))}}return e}({editor:a},n))})),l=(0,M.c)(i,1)[0];return function(e,t,n){var r=(0,V.useState)((function(){return new MutationObserver(t)})),a=(0,M.c)(r,1)[0];Nc((function(){a.takeRecords()})),(0,V.useEffect)((function(){if(!e.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");return a.observe(e.current,n),function(){return a.disconnect()}}),[a,e,n])}(t,l.handleDomMutations,Qc),tc.set(a,l.scheduleFlush),o&&l.flush(),l}:function(){return null},Jc=["anchor","focus"],jc=["anchor","focus"],Oc=function(e,t){var n,r,a,o=ku(e,Jc),i=ku(t,jc);return e[uc]===t[uc]&&(n=o,r=i,C()(n).length===C()(r).length&&ua()(a=C()(n)).call(a,(function(e){return r.hasOwnProperty(e)&&n[e]===r[e]})))},Uc=function(e){var t,n=e.isLast,r=e.leaf,a=e.parent,o=e.text,i=bu(),l=kc.findPath(i,o),u=Fa.parent(l),c=!0===r[cc];return i.isVoid(a)?H().createElement(Kc,{length:Ha.string(a).length}):""!==r.text||a.children[a.children.length-1]!==o||i.isInline(a)||""!==$a.string(i,u)?""===r.text?H().createElement(Kc,{isMarkPlaceholder:c}):n&&"\n"===Sn()(t=r.text).call(t,-1)?H().createElement(zc,{isTrailing:!0,text:r.text}):H().createElement(zc,{text:r.text}):H().createElement(Kc,{isLineBreak:!0,isMarkPlaceholder:c})},zc=function(e){var t=e.text,n=e.isTrailing,r=void 0!==n&&n,a=(0,V.useRef)(null),o=function(){var e;return Z()(e="".concat(null!=t?t:"")).call(e,r?"\n":"")},i=(0,V.useState)(o),l=(0,M.c)(i,1)[0];return Nc((function(){var e=o();a.current&&a.current.textContent!==e&&(a.current.textContent=e)})),H().createElement(Wc,{ref:a},l)},Wc=(0,V.memo)((0,V.forwardRef)((function(e,t){return H().createElement("span",{"data-slate-string":!0,ref:t},e.children)}))),Kc=function(e){var t=e.length,n=void 0===t?0:t,r=e.isLineBreak,a=void 0!==r&&r,o=e.isMarkPlaceholder,i={"data-slate-zero-width":a?"n":"z","data-slate-length":n};return void 0!==o&&o&&(i["data-slate-mark-placeholder"]=!0),H().createElement("span",(0,ie.c)({},i),Bu&&a?null:"\ufeff",a?H().createElement("br",null):null)};function Vc(e){e.current&&(clearTimeout(e.current),e.current=null)}var Hc=function(e){var t=e.leaf,n=e.isLast,r=e.text,a=e.parent,o=e.renderPlaceholder,i=e.renderLeaf,l=void 0===i?function(e){return H().createElement(Yc,(0,ie.c)({},e))}:i,u=bu(),c=(0,V.useRef)(null),d=(0,V.useRef)(null),s=(0,V.useState)(!1),f=(0,M.c)(s,2),g=f[0],h=f[1],v=(0,V.useRef)(null),p=(0,V.useCallback)((function(e){if(function(e,t){e.current&&(e.current.disconnect(),t&&(e.current=null))}(c,null==e),null==e){var n;Wu.delete(u),null===(n=t.onPlaceholderResize)||void 0===n||n.call(t,null)}else{if(Wu.set(u,e),!c.current){var r=window.ResizeObserver||ResizeObserver;c.current=new r((function(){var n;null===(n=t.onPlaceholderResize)||void 0===n||n.call(t,e)}))}c.current.observe(e),d.current=e}}),[d,t,u]),m=H().createElement(Uc,{isLast:n,leaf:t,parent:a,text:r}),C=t[uc];if((0,V.useEffect)((function(){return C?v.current||(v.current=ue()((function(){h(!0),v.current=null}),300)):(Vc(v),h(!1)),function(){return Vc(v)}}),[C,h]),C&&g){var y={children:t.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",top:0,pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none",WebkitUserModify:Lu?"inherit":void 0},contentEditable:!1,ref:p}};m=H().createElement(H().Fragment,null,o(y),m)}return l({attributes:{"data-slate-leaf":!0},children:m,leaf:t,text:r})},qc=H().memo(Hc,(function(e,t){return t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&fo.equals(t.leaf,e.leaf)&&t.leaf[uc]===e.leaf[uc]})),Yc=function(e){var t=e.attributes,n=e.children;return H().createElement("span",(0,ie.c)({},t),n)},Xc=function(e){for(var t=e.decorations,n=e.isLast,r=e.parent,a=e.renderPlaceholder,o=e.renderLeaf,i=e.text,l=bu(),u=(0,V.useRef)(null),c=fo.decorations(i,t),d=kc.findKey(l,i),s=[],f=0;f<c.length;f++){var g,h=c[f];s.push(H().createElement(qc,{isLast:n&&f===c.length-1,key:Z()(g="".concat(d.id,"-")).call(g,f),renderPlaceholder:a,leaf:h,text:i,parent:r,renderLeaf:o}))}var v=(0,V.useCallback)((function(e){var t=qu.get(l);e?(null==t||t.set(d,e),Vu.set(i,e),Ku.set(e,i)):(null==t||t.delete(d),Vu.delete(i),u.current&&Ku.delete(u.current)),u.current=e}),[u,l,d,i]);return H().createElement("span",{"data-slate-node":"text",ref:v},s)},_c=H().memo(Xc,(function(e,t){return t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++){var r=e[n],a=t[n];if(r.anchor.offset!==a.anchor.offset||r.focus.offset!==a.focus.offset||!Oc(r,a))return!1}return!0}(t.decorations,e.decorations)})),$c=function(e){var t=e.decorations,n=e.element,r=e.renderElement,a=void 0===r?function(e){return H().createElement(td,(0,ie.c)({},e))}:r,o=e.renderPlaceholder,i=e.renderLeaf,l=e.selection,u=bu(),c=ld(),d=u.isInline(n),s=kc.findKey(u,n),f=(0,V.useCallback)((function(e){var t=qu.get(u);e?(null==t||t.set(s,e),Vu.set(n,e),Ku.set(e,n)):(null==t||t.delete(s),Vu.delete(n))}),[u,s,n]),g=od({decorations:t,node:n,renderElement:a,renderPlaceholder:o,renderLeaf:i,selection:l}),h={"data-slate-node":"element",ref:f};if(d&&(h["data-slate-inline"]=!0),!d&&$a.hasInlines(u,n)){var v=Ha.string(n),p=su()(v);"rtl"===p&&(h.dir=p)}if($a.isVoid(u,n)){h["data-slate-void"]=!0,!c&&d&&(h.contentEditable=!1);var m=d?"span":"div",C=Ha.texts(n),y=(0,M.c)(C,1),E=(0,M.c)(y[0],1)[0];g=H().createElement(m,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},H().createElement(_c,{renderPlaceholder:o,decorations:[],isLast:!1,parent:n,text:E})),ju.set(E,0),Ou.set(E,n)}return a({attributes:h,children:g,element:n})},ed=H().memo($c,(function(e,t){return e.element===t.element&&e.renderElement===t.renderElement&&e.renderLeaf===t.renderLeaf&&e.renderPlaceholder===t.renderPlaceholder&&function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++){var r=e[n],a=t[n];if(!Oa.equals(r,a)||!Oc(r,a))return!1}return!0}(e.decorations,t.decorations)&&(e.selection===t.selection||!!e.selection&&!!t.selection&&Oa.equals(e.selection,t.selection))})),td=function(e){var t=e.attributes,n=e.children,r=e.element,a=bu().isInline(r)?"span":"div";return H().createElement(a,(0,ie.c)({},t,{style:{position:"relative"}}),n)},nd=(0,V.createContext)((function(){return[]})),rd=(0,V.createContext)(!1),ad=function(){return(0,V.useContext)(rd)},od=function(e){for(var t=e.decorations,n=e.node,r=e.renderElement,a=e.renderPlaceholder,o=e.renderLeaf,i=e.selection,l=(0,V.useContext)(nd),u=bu(),c=kc.findPath(u,n),d=[],s=za.isElement(n)&&!u.isInline(n)&&$a.hasInlines(u,n),f=0;f<n.children.length;f++){var g,h=Z()(c).call(c,f),v=n.children[f],p=kc.findKey(u,v),m=$a.range(u,h),C=i&&Oa.intersection(m,i),y=l([v,h]),E=Eu(t);try{for(E.s();!(g=E.n()).done;){var D=g.value,A=Oa.intersection(D,m);A&&y.push(A)}}catch(e){E.e(e)}finally{E.f()}za.isElement(v)?d.push(H().createElement(rd.Provider,{key:"provider-".concat(p.id),value:!!C},H().createElement(ed,{decorations:y,element:v,key:p.id,renderElement:r,renderPlaceholder:a,renderLeaf:o,selection:C}))):d.push(H().createElement(_c,{decorations:y,key:p.id,isLast:s&&f===n.children.length-1,parent:n,renderPlaceholder:a,renderLeaf:o,text:v})),ju.set(v,f),Ou.set(v,n)}return d},id=(0,V.createContext)(!1),ld=function(){return(0,V.useContext)(id)},ud=(0,V.createContext)(null);var cd={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",insertSoftBreak:"shift+enter",splitBlock:"enter",undo:"mod+z"},dd={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},sd={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},fd=function(e){var t=cd[e],n=dd[e],r=sd[e],a=t&&(0,mu.g5)(t),o=n&&(0,mu.g5)(n),i=r&&(0,mu.g5)(r);return function(e){return!(!a||!a(e))||(!!(Iu&&o&&o(e))||!(Iu||!i||!i(e)))}},gd={isBold:fd("bold"),isCompose:fd("compose"),isMoveBackward:fd("moveBackward"),isMoveForward:fd("moveForward"),isDeleteBackward:fd("deleteBackward"),isDeleteForward:fd("deleteForward"),isDeleteLineBackward:fd("deleteLineBackward"),isDeleteLineForward:fd("deleteLineForward"),isDeleteWordBackward:fd("deleteWordBackward"),isDeleteWordForward:fd("deleteWordForward"),isExtendBackward:fd("extendBackward"),isExtendForward:fd("extendForward"),isExtendLineBackward:fd("extendLineBackward"),isExtendLineForward:fd("extendLineForward"),isItalic:fd("italic"),isMoveLineBackward:fd("moveLineBackward"),isMoveLineForward:fd("moveLineForward"),isMoveWordBackward:fd("moveWordBackward"),isMoveWordForward:fd("moveWordForward"),isRedo:fd("redo"),isSoftBreak:fd("insertSoftBreak"),isSplitBlock:fd("splitBlock"),isTransposeCharacter:fd("transposeCharacter"),isUndo:fd("undo")},hd={subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0},vd=function(e){function t(){var e;return(0,$l.c)(this,t),(e=Cu(this,t,arguments)).context=null,e.manager=null,e.mutationObserver=null,e}return(0,Xl.c)(t,e),(0,_l.c)(t,[{key:"observe",value:function(){var e,t=this.props.node;if(!t.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");null===(e=this.mutationObserver)||void 0===e||e.observe(t.current,hd)}},{key:"componentDidMount",value:function(){var e=this.props.receivedUserInput,t=this.context;this.manager=function(e,t){var n=[],r=function(){n=[]};return{registerMutations:function(r){var a;if(t.current){var o=F()(r).call(r,(function(t){return Ec(e,t,r)}));(a=n).push.apply(a,(0,kn.c)(o))}},restoreDOM:function(){var e;n.length>0&&(U()(e=ia()(n).call(n)).call(e,(function(e){var t,n;"characterData"!==e.type&&(U()(t=e.removedNodes).call(t,(function(t){e.target.insertBefore(t,e.nextSibling)})),U()(n=e.addedNodes).call(n,(function(t){e.target.removeChild(t)})))})),r())},clear:r}}(t,e),this.mutationObserver=new MutationObserver(this.manager.registerMutations),this.observe()}},{key:"getSnapshotBeforeUpdate",value:function(){var e,t,n,r,a=null===(e=this.mutationObserver)||void 0===e?void 0:e.takeRecords();null!=a&&a.length&&(null===(r=this.manager)||void 0===r||r.registerMutations(a));return null===(t=this.mutationObserver)||void 0===t||t.disconnect(),null===(n=this.manager)||void 0===n||n.restoreDOM(),null}},{key:"componentDidUpdate",value:function(){var e;null===(e=this.manager)||void 0===e||e.clear(),this.observe()}},{key:"componentWillUnmount",value:function(){var e;null===(e=this.mutationObserver)||void 0===e||e.disconnect()}},{key:"render",value:function(){return this.props.children}}]),t}(V.Component);vd.contextType=wu;var pd=Bu?vd:function(e){var t=e.children;return H().createElement(H().Fragment,null,t)},md=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","renderPlaceholder","scrollSelectionIntoView","style","as","disableDefaultStyles"],Cd=["text"];function yd(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ed(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)U()(n=yd(Object(r),!0)).call(n,(function(t){Au(e,t,r[t])}));else if(b())S()(e,b()(r));else{var a;U()(a=yd(Object(r))).call(a,(function(t){B()(e,t,k()(r,t))}))}}return e}var Dd=function(e){return H().createElement(H().Fragment,null,od(e))},Ad=function(e){var t=(0,V.useCallback)((function(e){return H().createElement(kd,(0,ie.c)({},e))}),[]),n=e.autoFocus,r=e.decorate,a=void 0===r?wd:r,o=e.onDOMBeforeInput,i=e.placeholder,l=e.readOnly,u=void 0!==l&&l,c=e.renderElement,d=e.renderLeaf,s=e.renderPlaceholder,f=void 0===s?t:s,g=e.scrollSelectionIntoView,h=void 0===g?bd:g,v=e.style,p=void 0===v?{}:v,m=e.as,y=void 0===m?"div":m,E=e.disableDefaultStyles,D=void 0!==E&&E,A=ku(e,md),k=function(){var e=(0,V.useContext)(ud);if(!e)throw new Error("The `useSlate` hook must be used inside the <Slate> component's context.");return e.editor}(),w=(0,V.useState)(!1),b=(0,M.c)(w,2),x=b[0],S=b[1],I=(0,V.useRef)(null),B=(0,V.useRef)([]),R=(0,V.useState)(),F=(0,M.c)(R,2),T=F[0],G=F[1],Z=function(){var e=bu(),t=(0,V.useRef)(!1),n=(0,V.useRef)(0),r=(0,V.useCallback)((function(){if(!t.current){t.current=!0;var r=kc.getWindow(e);r.cancelAnimationFrame(n.current),n.current=r.requestAnimationFrame((function(){t.current=!1}))}}),[e]);return(0,V.useEffect)((function(){return function(){return cancelAnimationFrame(n.current)}}),[]),{receivedUserInput:t,onUserInput:r}}(),Q=Z.onUserInput,P=Z.receivedUserInput,J=(0,V.useReducer)((function(e){return e+1}),0),j=(0,M.c)(J,2)[1];lc.set(k,j),Yu.set(k,u);var O=(0,V.useMemo)((function(){return{isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null,hasMarkPlaceholder:!1}}),[]);(0,V.useEffect)((function(){I.current&&n&&I.current.focus()}),[n]);var U=(0,V.useRef)(),z=(0,V.useMemo)((function(){return vu()((function(){var e=U.current;if((Bu||!kc.isComposing(k))&&(!O.isUpdatingSelection||null!=e&&e.isFlushing())&&!O.isDraggingInternally){var t=kc.findDocumentOrShadowRoot(k),n=t.activeElement,r=kc.toDOMNode(k,k),a=t.getSelection();if(n===r?(O.latestElement=n,Xu.set(k,!0)):Xu.delete(k),!a)return Wo.deselect(k);var o=a.anchorNode,i=a.focusNode,l=kc.hasEditableTarget(k,o)||kc.isTargetInsideNonReadonlyVoid(k,o),c=kc.hasEditableTarget(k,i)||kc.isTargetInsideNonReadonlyVoid(k,i);if(l&&c){var d=kc.toSlateRange(k,a,{exactMatch:!1,suppressThrow:!0});d&&(kc.isComposing(k)||null!=e&&e.hasPendingChanges()||null!=e&&e.isFlushing()?null==e||e.handleUserSelect(d):Wo.select(k,d))}!u||l&&c||Wo.deselect(k)}}),100)}),[k,u,O]),W=(0,V.useMemo)((function(){return gu()(z,0)}),[z]);U.current=Pc({node:I,onDOMSelectionChange:z,scheduleOnDOMSelectionChange:W}),Nc((function(){var e,t,n;I.current&&(n=sc(I.current))?(Uu.set(k,n),zu.set(k,I.current),Vu.set(k,I.current),Ku.set(I.current,k)):Vu.delete(k);var r=k.selection,a=kc.findDocumentOrShadowRoot(k).getSelection();if(a&&kc.isFocused(k)&&(null===(e=U.current)||void 0===e||!e.hasPendingAction())){var o=function(e){var t="None"!==a.type;if(r||t){var n,o=a.focusNode;if(Mu&&a.rangeCount>1){var i=a.getRangeAt(0),l=a.getRangeAt(a.rangeCount-1);n=i.startContainer===o?l.endContainer:i.startContainer}else n=a.anchorNode;var u=zu.get(k),c=!1;if(u.contains(n)&&u.contains(o)&&(c=!0),t&&c&&r&&!e){var d=kc.toSlateRange(k,a,{exactMatch:!0,suppressThrow:!0});if(d&&Oa.equals(d,r)){var s,f;if(!O.hasMarkPlaceholder)return;if(null!==(s=n)&&void 0!==s&&null!==(f=s.parentElement)&&void 0!==f&&f.hasAttribute("data-slate-mark-placeholder"))return}}if(!r||kc.hasRange(k,r)){O.isUpdatingSelection=!0;var g=r&&kc.toDOMRange(k,r);return g?(kc.isComposing(k)&&!Bu?a.collapseToEnd():Oa.isBackward(r)?a.setBaseAndExtent(g.endContainer,g.endOffset,g.startContainer,g.startOffset):a.setBaseAndExtent(g.startContainer,g.startOffset,g.endContainer,g.endOffset),h(k,g)):a.removeAllRanges(),g}k.selection=kc.toSlateRange(k,a,{exactMatch:!1,suppressThrow:!0})}};a.rangeCount<=1&&o();var i="action"===(null===(t=U.current)||void 0===t?void 0:t.isFlushing());if(Bu&&i){var l=null,u=requestAnimationFrame((function(){if(i){var e=function(e){try{kc.toDOMNode(k,k).focus(),o(e)}catch(e){}};e(),l=ue()((function(){e(!0),O.isUpdatingSelection=!1}))}}));return function(){cancelAnimationFrame(u),l&&clearTimeout(l)}}ue()((function(){O.isUpdatingSelection=!1}))}}));var K=(0,V.useCallback)((function(e){if(Q(),!u&&kc.hasEditableTarget(k,e.target)&&!Id(e,o)){var t;if(U.current)return U.current.handleDOMBeforeInput(e);W.flush(),z.flush();var n=k.selection,r=e.inputType,a=e.dataTransfer||e.data||void 0,i="insertCompositionText"===r||"deleteCompositionText"===r;if(i&&kc.isComposing(k))return;var l=!1;if("insertText"===r&&n&&Oa.isCollapsed(n)&&e.data&&1===e.data.length&&/[a-z ]/i.test(e.data)&&0!==n.anchor.offset){var c,d;l=!0,k.marks&&(l=!1);var s=n.anchor,f=kc.toDOMPoint(k,s),g=(0,M.c)(f,2),h=g[0],v=g[1],p=null===(c=h.parentElement)||void 0===c?void 0:c.closest("a"),m=kc.getWindow(k);if(l&&p&&kc.hasDOMNode(k,p)){var C,y=null==m?void 0:m.document.createTreeWalker(p,NodeFilter.SHOW_TEXT).lastChild();y===h&&(null===(C=y.textContent)||void 0===C?void 0:C.length)===v&&(l=!1)}if(l&&h.parentElement&&"pre"===(null==m||null===(d=m.getComputedStyle(h.parentElement))||void 0===d?void 0:d.whiteSpace)){var E,D=$a.above(k,{at:s.path,match:function(e){return za.isElement(e)&&$a.isBlock(k,e)}});D&&Bn()(E=Ha.string(D[0])).call(E,"\t")&&(l=!1)}}if(!ou()(r).call(r,"delete")||ou()(r).call(r,"deleteBy")){var A=e.getTargetRanges(),w=(0,M.c)(A,1)[0];if(w){var b=kc.toSlateRange(k,w,{exactMatch:!1,suppressThrow:!1});if(!n||!Oa.equals(n,b)){l=!1;var x=!i&&k.selection&&$a.rangeRef(k,k.selection);Wo.select(k,b),x&&$u.set(k,x)}}}if(i)return;if(l||e.preventDefault(),n&&Oa.isExpanded(n)&&ou()(r).call(r,"delete")){var I=Fn()(r).call(r,"Backward")?"backward":"forward";return void $a.deleteFragment(k,{direction:I})}switch(r){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":$a.deleteFragment(k);break;case"deleteContent":case"deleteContentForward":$a.deleteForward(k);break;case"deleteContentBackward":$a.deleteBackward(k);break;case"deleteEntireSoftLine":$a.deleteBackward(k,{unit:"line"}),$a.deleteForward(k,{unit:"line"});break;case"deleteHardLineBackward":$a.deleteBackward(k,{unit:"block"});break;case"deleteSoftLineBackward":$a.deleteBackward(k,{unit:"line"});break;case"deleteHardLineForward":$a.deleteForward(k,{unit:"block"});break;case"deleteSoftLineForward":$a.deleteForward(k,{unit:"line"});break;case"deleteWordBackward":$a.deleteBackward(k,{unit:"word"});break;case"deleteWordForward":$a.deleteForward(k,{unit:"word"});break;case"insertLineBreak":$a.insertSoftBreak(k);break;case"insertParagraph":$a.insertBreak(k);break;case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":"insertFromComposition"===r&&kc.isComposing(k)&&(S(!1),_u.set(k,!1)),"DataTransfer"===(null==a?void 0:a.constructor.name)?kc.insertData(k,a):"string"==typeof a&&(l?B.current.push((function(){return $a.insertText(k,a)})):$a.insertText(k,a))}var L=null===(t=$u.get(k))||void 0===t?void 0:t.unref();$u.delete(k),!L||k.selection&&Oa.equals(k.selection,L)||Wo.select(k,L)}}),[k,z,Q,o,u,W]),q=(0,V.useCallback)((function(e){null==e?(z.cancel(),W.cancel(),zu.delete(k),Vu.delete(k),I.current&&Ju&&I.current.removeEventListener("beforeinput",K)):Ju&&e.addEventListener("beforeinput",K),I.current=e}),[z,W,k,K]);Nc((function(){var e=kc.getWindow(k);return e.document.addEventListener("selectionchange",W),function(){e.document.removeEventListener("selectionchange",W)}}),[W]);var Y=a([k,[]]),X=i&&1===k.children.length&&1===Qn()(Ha.texts(k)).length&&""===Ha.string(k)&&!x,_=(0,V.useCallback)((function(e){var t;e&&X?G(null===(t=e.getBoundingClientRect())||void 0===t?void 0:t.height):G(void 0)}),[X]);if(X){var $=$a.start(k,[]);Y.push((0,L.c)((0,L.c)((0,L.c)((0,L.c)((0,L.c)({},uc,!0),"placeholder",i),"onPlaceholderResize",_),"anchor",$),"focus",$))}var ee=k.marks;if(O.hasMarkPlaceholder=!1,k.selection&&Oa.isCollapsed(k.selection)&&ee){var te=k.selection.anchor,ne=Ha.leaf(k,te.path),re=ku(ne,Cd);if(!fo.equals(ne,ee,{loose:!0})){var ae;O.hasMarkPlaceholder=!0;var oe=lu()(N()(ae=C()(re)).call(ae,(function(e){return[e,null]})));Y.push(Ed(Ed(Ed((0,L.c)({},cc,!0),oe),ee),{},{anchor:te,focus:te}))}}return(0,V.useEffect)((function(){ue()((function(){var e=k.selection;if(e){var t=e.anchor,n=Ha.leaf(k,t.path);if(ee&&!fo.equals(n,ee,{loose:!0}))return void nc.set(k,ee)}nc.delete(k)}))})),H().createElement(id.Provider,{value:u},H().createElement(nd.Provider,{value:a},H().createElement(pd,{node:I,receivedUserInput:P},H().createElement(y,(0,ie.c)({role:u?void 0:"textbox","aria-multiline":!u||void 0},A,{spellCheck:!(!Ju&&Pu)&&A.spellCheck,autoCorrect:Ju||!Pu?A.autoCorrect:"false",autoCapitalize:Ju||!Pu?A.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:!u,zindex:-1,suppressContentEditableWarning:!0,ref:q,style:Ed(Ed({},D?{}:Ed({position:"relative",whiteSpace:"pre-wrap",wordWrap:"break-word"},T?{minHeight:T}:{})),p),onBeforeInput:(0,V.useCallback)((function(e){if(!Ju&&!u&&!xd(e,A.onBeforeInput)&&kc.hasSelectableTarget(k,e.target)&&(e.preventDefault(),!kc.isComposing(k))){var t=e.data;$a.insertText(k,t)}}),[A.onBeforeInput,k,u]),onInput:(0,V.useCallback)((function(e){if(!xd(e,A.onInput))if(U.current)U.current.handleInput();else{var t,n=Eu(B.current);try{for(n.s();!(t=n.n()).done;){(0,t.value)()}}catch(e){n.e(e)}finally{n.f()}B.current=[]}}),[A.onInput]),onBlur:(0,V.useCallback)((function(e){if(!u&&!O.isUpdatingSelection&&kc.hasSelectableTarget(k,e.target)&&!xd(e,A.onBlur)){var t=kc.findDocumentOrShadowRoot(k);if(O.latestElement!==t.activeElement){var n=e.relatedTarget;if(!(n===kc.toDOMNode(k,k)||fc(n)&&n.hasAttribute("data-slate-spacer"))){if(null!=n&&gc(n)&&kc.hasDOMNode(k,n)){var r=kc.toSlateNode(k,n);if(za.isElement(r)&&!k.isVoid(r))return}if(Lu){var a=t.getSelection();null==a||a.removeAllRanges()}Xu.delete(k)}}}}),[u,O.isUpdatingSelection,O.latestElement,k,A.onBlur]),onClick:(0,V.useCallback)((function(e){if(kc.hasTarget(k,e.target)&&!xd(e,A.onClick)&&gc(e.target)){var t=kc.toSlateNode(k,e.target),n=kc.findPath(k,t);if(!$a.hasPath(k,n)||Ha.get(k,n)!==t)return;if(3===e.detail&&n.length>=1){var r=n;if(!za.isElement(t)||!$a.isBlock(k,t)){var a,o=$a.above(k,{match:function(e){return za.isElement(e)&&$a.isBlock(k,e)},at:n});r=null!==(a=null==o?void 0:o[1])&&void 0!==a?a:Sn()(n).call(n,0,1)}var i=$a.range(k,r);return void Wo.select(k,i)}if(u)return;var l=$a.start(k,n),c=$a.end(k,n),d=$a.void(k,{at:l}),s=$a.void(k,{at:c});if(d&&s&&Fa.equals(d[1],s[1])){var f=$a.range(k,l);Wo.select(k,f)}}}),[k,A.onClick,u]),onCompositionEnd:(0,V.useCallback)((function(e){if(kc.hasSelectableTarget(k,e.target)){var t;if(kc.isComposing(k)&&(S(!1),_u.set(k,!1)),null===(t=U.current)||void 0===t||t.handleCompositionEnd(e),xd(e,A.onCompositionEnd)||Bu)return;if(!Lu&&!Gu&&!Su&&!Qu&&!Zu&&e.data){var n=nc.get(k);nc.delete(k),void 0!==n&&(rc.set(k,k.marks),k.marks=n),$a.insertText(k,e.data);var r=rc.get(k);rc.delete(k),void 0!==r&&(k.marks=r)}}}),[A.onCompositionEnd,k]),onCompositionUpdate:(0,V.useCallback)((function(e){kc.hasSelectableTarget(k,e.target)&&!xd(e,A.onCompositionUpdate)&&(kc.isComposing(k)||(S(!0),_u.set(k,!0)))}),[A.onCompositionUpdate,k]),onCompositionStart:(0,V.useCallback)((function(e){if(kc.hasSelectableTarget(k,e.target)){var t;if(null===(t=U.current)||void 0===t||t.handleCompositionStart(e),xd(e,A.onCompositionStart)||Bu)return;S(!0);var n=k.selection;if(n){if(Oa.isExpanded(n))return void $a.deleteFragment(k);var r=$a.above(k,{match:function(e){return za.isElement(e)&&$a.isInline(k,e)},mode:"highest"});if(r){var a=(0,M.c)(r,2)[1];if($a.isEnd(k,n.anchor,a)){var o=$a.after(k,a);Wo.setSelection(k,{anchor:o,focus:o})}}}}}),[A.onCompositionStart,k]),onCopy:(0,V.useCallback)((function(e){!kc.hasSelectableTarget(k,e.target)||xd(e,A.onCopy)||Sd(e)||(e.preventDefault(),kc.setFragmentData(k,e.clipboardData,"copy"))}),[A.onCopy,k]),onCut:(0,V.useCallback)((function(e){if(!u&&kc.hasSelectableTarget(k,e.target)&&!xd(e,A.onCut)&&!Sd(e)){e.preventDefault(),kc.setFragmentData(k,e.clipboardData,"cut");var t=k.selection;if(t)if(Oa.isExpanded(t))$a.deleteFragment(k);else{var n=Ha.parent(k,t.anchor.path);$a.isVoid(k,n)&&Wo.delete(k)}}}),[u,k,A.onCut]),onDragOver:(0,V.useCallback)((function(e){if(kc.hasTarget(k,e.target)&&!xd(e,A.onDragOver)){var t=kc.toSlateNode(k,e.target);za.isElement(t)&&$a.isVoid(k,t)&&e.preventDefault()}}),[A.onDragOver,k]),onDragStart:(0,V.useCallback)((function(e){if(!u&&kc.hasTarget(k,e.target)&&!xd(e,A.onDragStart)){var t=kc.toSlateNode(k,e.target),n=kc.findPath(k,t);if(za.isElement(t)&&$a.isVoid(k,t)||$a.void(k,{at:n,voids:!0})){var r=$a.range(k,n);Wo.select(k,r)}O.isDraggingInternally=!0,kc.setFragmentData(k,e.dataTransfer,"drag")}}),[u,k,A.onDragStart,O]),onDrop:(0,V.useCallback)((function(e){if(!u&&kc.hasTarget(k,e.target)&&!xd(e,A.onDrop)){e.preventDefault();var t=k.selection,n=kc.findEventRange(k,e),r=e.dataTransfer;Wo.select(k,n),O.isDraggingInternally&&(!t||Oa.equals(t,n)||$a.void(k,{at:n,voids:!0})||Wo.delete(k,{at:t})),kc.insertData(k,r),kc.isFocused(k)||kc.focus(k)}O.isDraggingInternally=!1}),[u,k,A.onDrop,O]),onDragEnd:(0,V.useCallback)((function(e){!u&&O.isDraggingInternally&&A.onDragEnd&&kc.hasTarget(k,e.target)&&A.onDragEnd(e),O.isDraggingInternally=!1}),[u,O,A,k]),onFocus:(0,V.useCallback)((function(e){if(!u&&!O.isUpdatingSelection&&kc.hasEditableTarget(k,e.target)&&!xd(e,A.onFocus)){var t=kc.toDOMNode(k,k),n=kc.findDocumentOrShadowRoot(k);if(O.latestElement=n.activeElement,Mu&&e.target!==t)return void t.focus();Xu.set(k,!0)}}),[u,O,k,A.onFocus]),onKeyDown:(0,V.useCallback)((function(e){if(!u&&kc.hasEditableTarget(k,e.target)){var t;null===(t=U.current)||void 0===t||t.handleKeyDown(e);var n=e.nativeEvent;if(kc.isComposing(k)&&!1===n.isComposing&&(_u.set(k,!1),S(!1)),xd(e,A.onKeyDown)||kc.isComposing(k))return;var r=k.selection,a=k.children[null!==r?r.focus.path[0]:0],o="rtl"===su()(Ha.string(a));if(gd.isRedo(n)){e.preventDefault();var i=k;return void("function"==typeof i.redo&&i.redo())}if(gd.isUndo(n)){e.preventDefault();var l=k;return void("function"==typeof l.undo&&l.undo())}if(gd.isMoveLineBackward(n))return e.preventDefault(),void Wo.move(k,{unit:"line",reverse:!0});if(gd.isMoveLineForward(n))return e.preventDefault(),void Wo.move(k,{unit:"line"});if(gd.isExtendLineBackward(n))return e.preventDefault(),void Wo.move(k,{unit:"line",edge:"focus",reverse:!0});if(gd.isExtendLineForward(n))return e.preventDefault(),void Wo.move(k,{unit:"line",edge:"focus"});if(gd.isMoveBackward(n))return e.preventDefault(),void(r&&Oa.isCollapsed(r)?Wo.move(k,{reverse:!o}):Wo.collapse(k,{edge:"start"}));if(gd.isMoveForward(n))return e.preventDefault(),void(r&&Oa.isCollapsed(r)?Wo.move(k,{reverse:o}):Wo.collapse(k,{edge:"end"}));if(gd.isMoveWordBackward(n))return e.preventDefault(),r&&Oa.isExpanded(r)&&Wo.collapse(k,{edge:"focus"}),void Wo.move(k,{unit:"word",reverse:!o});if(gd.isMoveWordForward(n))return e.preventDefault(),r&&Oa.isExpanded(r)&&Wo.collapse(k,{edge:"focus"}),void Wo.move(k,{unit:"word",reverse:o});if(Ju){if((Fu||Lu)&&r&&(gd.isDeleteBackward(n)||gd.isDeleteForward(n))&&Oa.isCollapsed(r)){var c=Ha.parent(k,r.anchor.path);if(za.isElement(c)&&$a.isVoid(k,c)&&($a.isInline(k,c)||$a.isBlock(k,c)))return e.preventDefault(),void $a.deleteBackward(k,{unit:"block"})}}else{if(gd.isBold(n)||gd.isItalic(n)||gd.isTransposeCharacter(n))return void e.preventDefault();if(gd.isSoftBreak(n))return e.preventDefault(),void $a.insertSoftBreak(k);if(gd.isSplitBlock(n))return e.preventDefault(),void $a.insertBreak(k);if(gd.isDeleteBackward(n))return e.preventDefault(),void(r&&Oa.isExpanded(r)?$a.deleteFragment(k,{direction:"backward"}):$a.deleteBackward(k));if(gd.isDeleteForward(n))return e.preventDefault(),void(r&&Oa.isExpanded(r)?$a.deleteFragment(k,{direction:"forward"}):$a.deleteForward(k));if(gd.isDeleteLineBackward(n))return e.preventDefault(),void(r&&Oa.isExpanded(r)?$a.deleteFragment(k,{direction:"backward"}):$a.deleteBackward(k,{unit:"line"}));if(gd.isDeleteLineForward(n))return e.preventDefault(),void(r&&Oa.isExpanded(r)?$a.deleteFragment(k,{direction:"forward"}):$a.deleteForward(k,{unit:"line"}));if(gd.isDeleteWordBackward(n))return e.preventDefault(),void(r&&Oa.isExpanded(r)?$a.deleteFragment(k,{direction:"backward"}):$a.deleteBackward(k,{unit:"word"}));if(gd.isDeleteWordForward(n))return e.preventDefault(),void(r&&Oa.isExpanded(r)?$a.deleteFragment(k,{direction:"forward"}):$a.deleteForward(k,{unit:"word"}))}}}),[u,k,A.onKeyDown]),onPaste:(0,V.useCallback)((function(e){u||!kc.hasEditableTarget(k,e.target)||xd(e,A.onPaste)||(!Ju||function(e){return e.clipboardData&&""!==e.clipboardData.getData("text/plain")&&1===e.clipboardData.types.length}(e.nativeEvent)||Lu)&&(e.preventDefault(),kc.insertData(k,e.clipboardData))}),[u,k,A.onPaste])}),H().createElement(Dd,{decorations:Y,node:k,renderElement:c,renderPlaceholder:f,renderLeaf:d,selection:k.selection})))))},kd=function(e){var t=e.attributes,n=e.children;return H().createElement("span",(0,ie.c)({},t),n,Bu&&H().createElement("br",null))},wd=function(){return[]},bd=function(e,t){if(t.getBoundingClientRect&&(!e.selection||e.selection&&Oa.isCollapsed(e.selection))){var n,r=t.startContainer.parentElement;r.getBoundingClientRect=Ln()(n=t.getBoundingClientRect).call(n,t),(0,pu.c)(r,{scrollMode:"if-needed"}),delete r.getBoundingClientRect}},xd=function(e,t){if(!t)return!1;var n=t(e);return null!=n?n:e.isDefaultPrevented()||e.isPropagationStopped()},Sd=function(e){return gc(e.target)&&(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement)},Id=function(e,t){if(!t)return!1;var n=t(e);return null!=n?n:e.defaultPrevented},Bd=(0,V.createContext)(!1),Md=function(){return(0,V.useContext)(Bd)};var Ld=(0,V.createContext)({});var Rd=["editor","children","onChange","value"],Fd=function(e){var t=e.editor,n=e.children,r=e.onChange,a=e.value,o=ku(e,Rd),i=H().useState((function(){if(!Ha.isNodeList(a))throw new Error("[Slate] initialValue is invalid! Expected a list of elements but got: ".concat(oo.stringify(a)));if(!$a.isEditor(t))throw new Error("[Slate] editor is invalid! You passed: ".concat(oo.stringify(t)));return t.children=a,(0,ie.c)(t,o),{v:0,editor:t}})),l=(0,M.c)(i,2),u=l[0],c=l[1],d=function(e){var t=(0,V.useRef)([]).current,n=(0,V.useRef)({editor:e}).current,r=(0,V.useCallback)((function(e){n.editor=e,U()(t).call(t,(function(t){return t(e)}))}),[t,n]);return{selectorContext:(0,V.useMemo)((function(){return{getSlate:function(){return n.editor},addEventListener:function(e){return t.push(e),function(){da()(t).call(t,bn()(t).call(t,e),1)}}}}),[t,n]),onChange:r}}(t),s=d.selectorContext,f=d.onChange,g=(0,V.useCallback)((function(){r&&r(t.children),c((function(e){return{v:e.v+1,editor:t}})),f(t)}),[t,f,r]);(0,V.useEffect)((function(){return ec.set(t,g),function(){ec.set(t,(function(){}))}}),[t,g]);var h=(0,V.useState)(kc.isFocused(t)),v=(0,M.c)(h,2),p=v[0],m=v[1];return(0,V.useEffect)((function(){m(kc.isFocused(t))}),[t]),Nc((function(){var e=function(){return m(kc.isFocused(t))};return xu>=17?(document.addEventListener("focusin",e),document.addEventListener("focusout",e),function(){document.removeEventListener("focusin",e),document.removeEventListener("focusout",e)}):(document.addEventListener("focus",e,!0),document.addEventListener("blur",e,!0),function(){document.removeEventListener("focus",e,!0),document.removeEventListener("blur",e,!0)})}),[]),H().createElement(Ld.Provider,{value:s},H().createElement(ud.Provider,{value:u},H().createElement(wu.Provider,{value:u.editor},H().createElement(Bd.Provider,{value:p},n))))},Td=function(e,t){var n=(t.top+t.bottom)/2;return e.top<=n&&e.bottom>=n},Nd=function(e,t,n){var r=kc.toDOMRange(e,t).getBoundingClientRect(),a=kc.toDOMRange(e,n).getBoundingClientRect();return Td(r,a)&&Td(a,r)};function Gd(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zd(e){for(var t=1;t<arguments.length;t++){var n,r=null!=arguments[t]?arguments[t]:{};if(t%2)U()(n=Gd(Object(r),!0)).call(n,(function(t){Au(e,t,r[t])}));else if(b())S()(e,b()(r));else{var a;U()(a=Gd(Object(r))).call(a,(function(t){B()(e,t,k()(r,t))}))}}return e}var Qd=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x-slate-fragment",n=e,r=n.apply,a=n.onChange,o=n.deleteBackward,i=n.addMark,l=n.removeMark;return qu.set(n,new(aa())),n.addMark=function(e,t){var r,a;null===(r=tc.get(n))||void 0===r||r(),!nc.get(n)&&null!==(a=ac.get(n))&&void 0!==a&&a.length&&nc.set(n,null),rc.delete(n),i(e,t)},n.removeMark=function(e){var t;!nc.get(n)&&null!==(t=ac.get(n))&&void 0!==t&&t.length&&nc.set(n,null),rc.delete(n),l(e)},n.deleteBackward=function(e){if("line"!==e)return o(e);if(n.selection&&Oa.isCollapsed(n.selection)){var t=$a.above(n,{match:function(e){return za.isElement(e)&&$a.isBlock(n,e)},at:n.selection});if(t){var r=(0,M.c)(t,2)[1],a=$a.range(n,r,n.selection.anchor),i=function(e,t){var n=$a.range(e,Oa.end(t)),r=Qn()($a.positions(e,{at:t})),a=0,o=r.length,i=Math.floor(o/2);if(Nd(e,$a.range(e,r[a]),n))return $a.range(e,r[a],n);if(r.length<2)return $a.range(e,r[r.length-1],n);for(;i!==r.length&&i!==a;)Nd(e,$a.range(e,r[i]),n)?o=i:a=i,i=Math.floor((a+o)/2);return $a.range(e,r[o],n)}(n,a);Oa.isCollapsed(i)||Wo.delete(n,{at:i})}}},n.apply=function(e){var t=[],a=ac.get(n);if(null!=a&&a.length){var o,i=F()(o=N()(a).call(a,(function(t){return function(e,t){var n=e.path,r=e.diff,a=e.id;switch(t.type){case"insert_text":return!Fa.equals(t.path,n)||t.offset>=r.end?e:t.offset<=r.start?{diff:{start:t.text.length+r.start,end:t.text.length+r.end,text:r.text},id:a,path:n}:{diff:{start:r.start,end:r.end+t.text.length,text:r.text},id:a,path:n};case"remove_text":return!Fa.equals(t.path,n)||t.offset>=r.end?e:t.offset+t.text.length<=r.start?{diff:{start:r.start-t.text.length,end:r.end-t.text.length,text:r.text},id:a,path:n}:{diff:{start:r.start,end:r.end-t.text.length,text:r.text},id:a,path:n};case"split_node":return!Fa.equals(t.path,n)||t.position>=r.end?{diff:r,id:a,path:Fa.transform(n,t,{affinity:"backward"})}:t.position>r.start?{diff:{start:r.start,end:Math.min(t.position,r.end),text:r.text},id:a,path:n}:{diff:{start:r.start-t.position,end:r.end-t.position,text:r.text},id:a,path:Fa.transform(n,t,{affinity:"forward"})};case"merge_node":return Fa.equals(t.path,n)?{diff:{start:r.start+t.position,end:r.end+t.position,text:r.text},id:a,path:Fa.transform(n,t)}:{diff:r,id:a,path:Fa.transform(n,t)}}var o=Fa.transform(n,t);return o?{diff:r,path:o,id:a}:null}(t,e)}))).call(o,Boolean);ac.set(n,i)}var l=ic.get(n);l&&ic.set(n,Lc(n,l,e));var u=oc.get(n);if(null!=u&&u.at){var c=ro.isPoint(null==u?void 0:u.at)?Mc(n,u.at,e):Lc(n,u.at,e);oc.set(n,c?Zd(Zd({},u),{},{at:c}):null)}switch(e.type){case"insert_text":case"remove_text":case"set_node":case"split_node":t.push.apply(t,(0,kn.c)(Pd(n,e.path)));break;case"set_selection":var d;null===(d=$u.get(n))||void 0===d||d.unref(),$u.delete(n);break;case"insert_node":case"remove_node":t.push.apply(t,(0,kn.c)(Pd(n,Fa.parent(e.path))));break;case"merge_node":var s=Fa.previous(e.path);t.push.apply(t,(0,kn.c)(Pd(n,s)));break;case"move_node":var f=Fa.common(Fa.parent(e.path),Fa.parent(e.newPath));t.push.apply(t,(0,kn.c)(Pd(n,f)))}r(e);for(var g=0,h=t;g<h.length;g++){var v=(0,M.c)(h[g],2),p=v[0],m=v[1],C=$a.node(n,p),y=(0,M.c)(C,1)[0];Hu.set(y,m)}},n.setFragmentData=function(e){var r,a,o=n.selection;if(o){var i=Oa.edges(o),l=(0,M.c)(i,2),u=l[0],c=l[1],d=$a.void(n,{at:u.path}),s=$a.void(n,{at:c.path});if(!Oa.isCollapsed(o)||d){var f=kc.toDOMRange(n,o),g=f.cloneContents(),h=g.childNodes[0];if(U()(r=g.childNodes).call(r,(function(e){var t;e.textContent&&""!==cu()(t=e.textContent).call(t)&&(h=e)})),s){var v=(0,M.c)(s,1)[0],p=f.cloneRange(),m=kc.toDOMNode(n,v);p.setEndAfter(m),g=p.cloneContents()}if(d&&(h=g.querySelector("[data-slate-spacer]")),U()(a=Qn()(g.querySelectorAll("[data-slate-zero-width]"))).call(a,(function(e){var t="n"===e.getAttribute("data-slate-zero-width");e.textContent=t?"\n":""})),vc(h)){var C=h.ownerDocument.createElement("span");C.style.whiteSpace="pre",C.appendChild(h),g.appendChild(C),h=C}var y=n.getFragment(),E=j()(y),D=window.btoa(encodeURIComponent(E));h.setAttribute("data-slate-fragment",D),e.setData("application/".concat(t),D);var A=g.ownerDocument.createElement("div");return A.appendChild(g),A.setAttribute("hidden","true"),g.ownerDocument.body.appendChild(A),e.setData("text/html",A.innerHTML),e.setData("text/plain",Cc(A)),g.ownerDocument.body.removeChild(A),e}}},n.insertData=function(e){n.insertFragmentData(e)||n.insertTextData(e)},n.insertFragmentData=function(e){var r,a=e.getData("application/".concat(t))||(r=e.getData("text/html").match(yc)||[],(0,M.c)(r,2)[1]);if(a){var o=decodeURIComponent(window.atob(a)),i=JSON.parse(o);return n.insertFragment(i),!0}return!1},n.insertTextData=function(e){var t=e.getData("text/plain");if(t){var r,a=!1,o=Eu(t.split(/\r\n|\r|\n/));try{for(o.s();!(r=o.n()).done;){var i=r.value;a&&Wo.splitNodes(n,{always:!0}),n.insertText(i),a=!0}}catch(e){o.e(e)}finally{o.f()}return!0}return!1},n.onChange=function(e){(xu<18?Yr().unstable_batchedUpdates:function(e){return e()})((function(){var t=ec.get(n);t&&t(),a(e)}))},n},Pd=function(e,t){var n,r=[],a=Eu($a.levels(e,{at:t}));try{for(a.s();!(n=a.n()).done;){var o=(0,M.c)(n.value,2),i=o[0],l=o[1],u=kc.findKey(e,i);r.push([l,u])}}catch(e){a.e(e)}finally{a.f()}return r};function Jd(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function jd(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?U()(n=Jd(Object(a),!0)).call(n,(function(t){(0,L.c)(e,t,a[t])})):b()?S()(e,b()(a)):U()(r=Jd(Object(a))).call(r,(function(t){B()(e,t,k()(a,t))}))}return e}function Od(e){var t=e.className;return H().createElement("div",{className:"".concat(t,"-empty")},H().createElement("img",{className:"".concat(t,"-empty-img"),src:Gn,width:"168",height:"96",alt:(0,W.getLangMsg)("printd.grid.key0004")}),H().createElement("div",{className:"".concat(t,"-empty-text")},(0,W.getLangMsg)("printd.grid.key0004")))}var Ud=function(e){var t=e.onSelect,n=e.onShowDescription,r=(0,V.useContext)(En).expressions,a=(0,V.useState)(""),o=(0,M.c)(a,2),i=o[0],l=o[1],u=(0,V.useState)(null),c=(0,M.c)(u,2),d=c[0],s=c[1],f=(0,V.useState)(""),g=(0,M.c)(f,2),h=g[0],v=g[1],p=(0,V.useState)(r),m=(0,M.c)(p,2),C=m[0],y=m[1];return H().createElement("div",{className:"kd-expression-tree-wrap"},H().createElement(z.Input,{style:{marginBottom:12,width:"100%"},value:i,placeholder:(0,W.getLangMsg)("printd.components.key0029"),borderType:"bordered",onChange:function(e){var t=e.target.value;l(t),y((function(){var e=function(e,t){var n;return F()(n=N()(e).call(e,(function(e){var n=e.items,r=F()(n).call(n,(function(e){var n;return Bn()(n=e.name).call(n,t)}));return r.length?jd(jd({},e),{},{items:r}):null}))).call(n,Boolean)}(r,t);return e}))},allowClear:!0,suffix:H().createElement("div",null,H().createElement(z.Icon,{type:"search",style:{cursor:"pointer"}}))}),!i||null!=C&&C.length?H().createElement("div",{className:"kd-expression-tree"},N()(C).call(C,(function(e){var r=e.items,a=e.name;return H().createElement(z.Collapse,{name:"Collapse",key:e.type,defaultActiveKey:e.type},H().createElement(z.Collapse.Panel,{header:a,panelKey:e.type},N()(r).call(r,(function(r){var a;return H().createElement("div",{key:Z()(a="".concat(e.type,"-")).call(a,r.key),className:Hn()(["expression-item",{"is-active":r.key===h}]),onClick:function(){return function(e){var r=e.key;t(r),v(r),s(e),n(e)}(r)},onMouseOver:function(){return n(r)},onMouseLeave:function(){return n(d)}},r.name)}))))}))):H().createElement(Od,{className:"left-datasource"}))},zd="object"==("undefined"==typeof self?"undefined":(0,Kn.c)(self))&&self.self===self&&self||"object"==(void 0===n.g?"undefined":(0,Kn.c)(n.g))&&n.g.global===n.g&&n.g||{},Wd="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function Kd(e){var t,n;for(t=[],n=0;n<e.length;n++)t.push(Wd[e[n]%62]);return t.join("")}var Vd=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;if(void 0!==zd.crypto)return Kd(zd.crypto.getRandomValues(new Uint8Array(e)));for(var t=new Array(e),n=0;n<e;n++)t[n]=Math.floor(256*Math.random());return Kd(t)};var Hd=function(e,t,n){var r;return Y().isUndefined(e)?Y().isUndefined(null==t||null===(r=t[0])||void 0===r?void 0:r.Value)?function(e){switch(e){case"String":default:return"";case"Integer":return 0;case"Boolean":return!1}}(n):t[0].Value:e},qd=Y().memoize((function(e,t){for(var n={},r=0;r<e.Categories.length;r++){var a,o=e.Categories[r],i=Yn()(a=o.Controls).call(a,(function(e){return e.Id===t}));i&&(0,ie.c)(n,i)}return n}),(function(e,t){return j()({meta:e,type:t})})),Yd=Y().memoize((function(e){var t={},n=e.Nodes;if(n)U()(n).call(n,(function(e){var n=Y().camelCase(e.Id),r=e.Editor;if(r){var a=r.DataType,o=r.Default,i=(r.Min,r.Enum);t[n]=Hd(o,i,a)}else t[n]="not editor property: err"}));else{var r=e.Editor,a=r.DataType,o=r.Default,i=(r.Min,r.Enum),l=Y().camelCase(e.Id);t[l]=r?Hd(o,i,a):"not editor property: err"}return t}));function Xd(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n){var r,a=n.type,o=n.parentId,i=n.transferData,l={},u={};if(t&&i)(0,ie.c)(u,i);else{var c=qd(e,a);c&&(0,ie.c)(u,c)}return t?u:(o&&(l.parentId=o),U()(r=u.Properties).call(r,(function(e){(0,ie.c)(l,Yd(e))})),l.id=Vd(),l.name=u.Name,l.type=u.Id,!t&&i&&(0,ie.c)(l,i),l)}}function _d(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function $d(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?U()(n=_d(Object(a),!0)).call(n,(function(t){(0,L.c)(e,t,a[t])})):b()?S()(e,b()(a)):U()(r=_d(Object(a))).call(r,(function(t){B()(e,t,k()(a,t))}))}return e}var es=[{type:"paragraph",children:[{text:""}]}],ts=(0,W.ErrorBoundaryWrap)(Fd,"slate");function ns(e){return H().createElement("p",e.attributes,e.children)}function rs(e){var t=ad(),n=Md(),r=e.element.textFormat,a="Date"===r?"#FFF1D4":"Number"===r||"Amount"===r?"#DCFAE4":"#E0EFFF";return(0,V.useEffect)((function(){if(t&&n){var r=e.element.key;(0,e.setActiveDataSourceKey)(r)}}),[t,n]),H().createElement("span",(0,ie.c)({},e.attributes,{contentEditable:!1,style:{padding:"1px 8px",margin:"0 3px",verticalAlign:"baseline",display:"inline-block",borderRadius:"2px",backgroundColor:a,fontSize:"12px",cursor:"pointer",boxShadow:t&&n?"0 0 0 2px #B4D5FF":"none",lineHeight:"18px"}}),e.element.formulaName,e.children)}var as=(0,V.forwardRef)((function(e,t){var n=e.meta,r=e.definition,a=e.expandedKeys,o=e.formulaData,i=e.activedSelectId,l=e.filterTreeData,u=e.showDefinitionId,c=(0,V.useState)(null),d=(0,M.c)(c,2),s=d[0],f=d[1],g=(0,V.useState)(""),h=(0,M.c)(g,2),v=h[0],p=h[1],m=(0,V.useRef)(null),C=(0,V.useState)((function(){if(o&&o.length){var e=[],t={type:"paragraph",children:[{text:""}]};return U()(o).call(o,(function(n,r){if("_enter_"!==n){var a=r===o.length-1;a&&e.push($d({},t)),"string"==typeof n?t.children.push({text:n}):t.children.push({text:""},$d($d({},n),{},{type:"label",children:[{text:""}]}),{text:""}),t=a?{type:"paragraph",children:[]}:t}else e.push($d({},t)),t={type:"paragraph",children:[{text:""}]}})),e}return es})),y=(0,M.c)(C,2),E=y[0],D=y[1],A=(0,V.useMemo)((function(){return j()(E)===j()(es)}),[E]),k=(0,V.useState)({visible:!1,msg:"",type:"success"}),w=(0,M.c)(k,2),b=w[0],x=w[1],S=(0,V.useContext)(W.DataContext),I=S.findControl(i),B=I.cellType,L=I.parentId,R=S.findControl(L),T=(0,V.useMemo)((function(){return function(e){var t=e.isVoid,n=e.isInline;return e.isInline=function(e){return"label"===e.type||n(e)},e.isVoid=function(e){return"label"===e.type||t(e)},e}(Qd(Ol(Nl())))}),[]),G=function(){var e=[];U()(E).call(E,(function(t,n){var r,a=t.children,o=F()(r=N()(a).call(a,(function(e){var t=e.type,n=e.text;return"label"===t?e:n}))).call(r,(function(e){return""!==e}));e.push.apply(e,(0,kn.c)(o)),n!==E.length-1&&e.push("_enter_")}));var t=S.getData(),n=null==t?void 0:t.version;return{formulaData:e,tplVersion:n}},Z=function(){var e=G();return window.fetch("api/print/validatePrintFormula.do",{method:"POST",headers:{"Content-Type":"application/jsoncharset=utf-8"},body:j()(e),mode:"cors",credentials:"include"}).then((function(e){if(e.ok)return e.json();throw new Error(e.statusText)})).then((function(t){var n=t.result,r=t.msg;return x((function(){return{type:"fail"===n?"error":"success",visible:!0,msg:r}})),"success"===n?(m.current=ue()((function(){m.current&&clearTimeout(m.current),x((function(e){return $d($d({},e),{},{visible:!1})}))}),1100),$d({curTab:"2"},e)):"fail"})).catch((function(e){return!1}))};(0,V.useImperativeHandle)(t,(function(){return{getFormulaData:G,onExpressionSave:Z,onAutoFocus:O}}));var Q=(0,V.useCallback)((function(e){return"label"===e.element.type?H().createElement(rs,(0,ie.c)({},e,{setActiveDataSourceKey:p})):H().createElement(ns,e)}),[]),P=(0,V.useRef)(null),J=function(e){P.current&&(Wo.select(T,P.current),Wo.insertText(T,e),kc.focus(T))},O=(0,V.useCallback)((function(){var e,t,n=null===(e=T.children[0])||void 0===e||null===(e=e.children)||void 0===e?void 0:e.length,r=null===(t=T.children[0])||void 0===t||null===(t=t.children[n-1])||void 0===t||null===(t=t.text)||void 0===t?void 0:t.length,a={anchor:{path:[0,n-1],offset:r},focus:{path:[0,n-1],offset:r}};Wo.select(T,a),kc.focus(T)}),[T]);return H().createElement(H().Fragment,null,H().createElement("div",{className:"expression-left"},H().createElement("div",{className:"block-title"},(0,W.getLangMsg)("printd.components.key0013")),H().createElement("div",{className:"block-main"},H().createElement(Ur,{meta:n,definition:r,onSelect:function(e,t,n){var r;if(P.current){var a=t.Name,o=t.ViewName,i=t.bindField,l=t.dataSource,u=t.dsTypeKey,c=t.key,d=t.InitAttr,s=void 0===d?{TextFormat:"Text"}:d,f=o||a;if(P.current)Wo.select(T,P.current);else{var g,h=E[0].children.length-1,v=[0,h],m=(null===(g=E[0].children[h])||void 0===g||null===(g=g.text)||void 0===g?void 0:g.length)||0;Wo.select(T,{focus:{path:v,offset:m},anchor:{path:v,offset:m}})}var C={id:Vd(),type:"label",formulaName:f,bindField:(null==i?void 0:F()(r=i.split(".")).call(r,(function(e){return!Bn()(e).call(e,"$reportEntryGroup$")})).join("."))||"",dataSource:l,dsType:u,key:c,textFormat:s.TextFormat,children:[{text:""}]};p(c),Wo.insertNodes(T,C),Wo.move(T),kc.focus(T)}},expandedKeys:a,scrollToKey:v,filterTreeData:function(e){var t=cr(S,i,"DataGrid");return t?br(t,e):l(e)},showDefinitionId:u}))),H().createElement("div",{className:"expression-main"},H().createElement("div",{className:"editor-area"},H().createElement("div",{className:"editor-toolbar"},H().createElement("span",{onClick:function(){return J("+")}},H().createElement(z.Icon,{type:"add"})),H().createElement("span",{onClick:function(){return J("-")}},H().createElement(z.Icon,{type:"reduce"})),H().createElement("span",{onClick:function(){return J("*")}},H().createElement(z.Icon,{prefix:"printdesignericon",type:"chengyi"})),H().createElement("span",{onClick:function(){return J("/")}},H().createElement(z.Icon,{prefix:"printdesignericon",type:"xiegang"})),H().createElement("span",{onClick:function(){return J(">")}},H().createElement(z.Icon,{prefix:"printdesignericon",type:"dayu"})),H().createElement("span",{onClick:function(){return J("<")}},H().createElement(z.Icon,{prefix:"printdesignericon",type:"xiaoyu"})),H().createElement("span",{onClick:function(){return J(">=")}},H().createElement(z.Icon,{prefix:"printdesignericon",type:"dayudengyu"})),H().createElement("span",{onClick:function(){return J("<=")}},H().createElement(z.Icon,{prefix:"printdesignericon",type:"xiaoyudengyu"})),H().createElement("span",{onClick:function(){return J("=")}},H().createElement(z.Icon,{prefix:"printdesignericon",type:"dengyu3"})),H().createElement("span",{onClick:function(){return J("!=")}},H().createElement(z.Icon,{prefix:"printdesignericon",type:"budengyu"}))),H().createElement("div",{className:"editor"},H().createElement(ts,{value:E,editor:T,onChange:function(e){D(e)}},H().createElement(Ad,{placeholder:(0,W.getLangMsg)("printd.components.key0005"),id:"slate-editor",renderElement:Q,onKeyDown:function(e){if("("===e.key&&(e.preventDefault(),T.insertText("()"),Wo.move(T,{distance:1,unit:"offset",reverse:!0})),13===e.keyCode){var t=S.getData(),n=null==t?void 0:t.version;(!n||Number(n)<6)&&e.preventDefault()}},autoFocus:!0,onBlur:function(e){e.persist();var t=e.relatedTarget;if("INPUT"!==(null==t?void 0:t.tagName)){var n=T.selection,r={};for(var a in n){var o=n[a],i=o.path,l=o.offset;r[a]={path:Sn()(i).call(i,0,2),offset:l}}P.current=r,Wo.select(T,r),kc.focus(T)}}})),H().createElement("div",{className:"editor-bottom"},H().createElement("span",{className:Hn()(["verify-btn",{disabled:A}]),onClick:function(){if(!A){var e=G(),t=$d($d({},"Detail"===B?{cellType:B,dataSource:R.dataSource}:{}),e);window.fetch("api/print/validatePrintFormula.do",{method:"POST",headers:{"Content-Type":"application/jsoncharset=utf-8"},body:j()(t),mode:"cors",credentials:"include"}).then((function(e){if(e.ok)return e.json();throw new Error(e.statusText)})).then((function(e){var t=e.result,n=e.msg;x((function(){return{type:"fail"===t?"error":"success",visible:!0,msg:n}})),"success"===t&&(m.current=ue()((function(){m.current&&clearTimeout(m.current),x((function(e){return $d($d({},e),{},{visible:!1})}))}),1100))})).catch((function(e){}))}}},(0,W.getLangMsg)("printd.components.key0010"))))),H().createElement("div",{className:"description-area"},b.visible&&H().createElement(z.Alert,{message:b.msg,showIcon:!0,closable:!0,type:b.type,delayOffTime:"success"===b.type?1e3:0,onClose:function(){return x((function(e){return $d($d({},e),{},{visible:!1})}))}}),s?H().createElement("div",{className:"description-content"},H().createElement("div",{className:"description-title"},(null==s?void 0:s.title)||""),H().createElement("div",{className:"description-detail"},(null==s?void 0:s.description)||"")):H().createElement("div",{className:"description-content"},(0,W.getLangMsg)("printd.components.key0023"),H().createElement("br",null),(0,W.getLangMsg)("printd.components.key0024"),H().createElement("br",null),(0,W.getLangMsg)("printd.components.key0025"),H().createElement("br",null),(0,W.getLangMsg)("printd.components.key0026")))),H().createElement("div",{className:"expression-right"},H().createElement("div",{className:"block-title"},(0,W.getLangMsg)("printd.components.key0028")),H().createElement("div",{className:"block-main"},H().createElement(Ud,{onSelect:function(e){P.current&&(Wo.select(T,P.current),Wo.insertText(T,e+"()"),Wo.move(T,{distance:1,unit:"offset",reverse:!0}),kc.focus(T))},onShowDescription:f}))))})),os=(0,V.forwardRef)((function(e,t){var n,r=e.meta,a=e.definition,o=e.expandedKeys,i=void 0===o?[]:o,l=e.scrollToKey,u=e.filterTreeData,c=e.activedSelectId,d=e.showDefinitionId,s=e.activeTab,f=e.formulaData,g=e.filterExpressionTreeData,h=e.DataSourceOption,v=(0,V.useRef)(null),p=(0,V.useRef)(null),m=(0,V.useRef)(null),C=(0,V.useState)(s),y=(0,M.c)(C,2),E=y[0],D=y[1],A=null===(n=(0,V.useContext)(W.DataContext).getData())||void 0===n?void 0:n.version,k="expression-modal";(0,V.useImperativeHandle)(t,(function(){return{getDataSource:function(){return new(ea())((function(e,t){var n;"1"===E?e({curTab:E,selectNode:v.current}):null===(n=p.current)||void 0===n||n.onExpressionSave().then(e)}))}}}));(0,V.useEffect)((function(){var e;E&&(null===(e=p.current)||void 0===e||e.onAutoFocus())}),[E]);var w=(0,V.useMemo)((function(){var e=A&&Number(A)>=6;return[H().createElement("span",null,(0,W.getLangMsg)("printd.grid.key0003"),e?H().createElement("label",{className:"".concat(k,"-new-tag")},"NEW"):null),e]}),[A]),b=(0,M.c)(w,2),x=b[0],S=b[1];return H().createElement("div",{className:"".concat(k,"-tab-wrapper")},H().createElement(z.Tabs,{type:"dynamic",activeKey:E,onChange:function(e){D(e)}},H().createElement(z.Tabs.TabPane,{key:"1",tab:(0,W.getLangMsg)("printd.components.key0027")},H().createElement("div",{className:"body-left"},H().createElement(Ur,{scrollToKey:l,meta:r,definition:a,onSelect:function(e,t,n){v.current=t},showDefinitionId:d,expandedKeys:i,filterTreeData:u}))),!1===(null==h?void 0:h.AllowFormula)?H().createElement("div",null):H().createElement(z.Tabs.TabPane,{key:"2",tab:x},H().createElement("div",{className:"body-right",ref:m},H().createElement(as,{meta:r,definition:a,expandedKeys:i,ref:p,formulaData:f,activedSelectId:c,filterTreeData:g,showDefinitionId:d}))),S?H().createElement(z.Tabs.TabPane,{specialPane:"right"},H().createElement(z.Link,{target:"_blank",rel:"noreferrer",href:"https://vip.kingdee.com/article/609740912138348800"},(0,W.getLangMsg)("printd.grid.key0129"))):null))})),is=function(e){var t=e.visible,n=e.setVisible,r=e.meta,a=e.definition,o=e.onSelect,i=(e.emptyNode,e.expandedKeys),l=void 0===i?[]:i,u=e.activeTab,c=e.DataSourceOption,d=e.filterTreeData,s=e.activedSelectId,f=e.formulaData,g=e.filterExpressionTreeData,h="expression",v=(0,V.useState)(!1),p=(0,M.c)(v,2),m=p[0],C=p[1],y=(0,V.useState)(!0),E=(0,M.c)(y,2),D=(E[0],E[1],(0,V.useRef)(null)),A=(0,V.useContext)(W.DataContext),k=(0,V.useContext)(W.SelectionContext),w=(0,V.useContext)(W.DataFactoryContext).modelFactory,b=A.getRootId(),x=(A.findControl(b).language,Nn({dataContext:A,selectionContext:k,meta:r,activedSelectId:s,modelFactory:w})),S=H().createElement(H().Fragment,null,H().createElement(z.Checkbox,{className:"".concat(h,"-modal-footer-checkbox"),checked:m,onChange:function(e){var t=!!e.target.checked;C(t)}},(0,W.getLangMsg)("printd.grid.key0101")),H().createElement("div",{className:"".concat(h,"-modal-footer-btns")},H().createElement(z.Button,{onClick:function(){return n(!1)},type:"second",className:"".concat(h,"-modal-cancel-btn")},(0,W.getLangMsg)("printd.components.key0011")),H().createElement(z.Button,{onClick:function(){var e;null===(e=D.current)||void 0===e||e.getDataSource().then((function(e){"fail"!==e&&o(e)}))},type:"primary",className:"".concat(h,"-modal-ok-btn")},(0,W.getLangMsg)("printd.components.key0012"))));return H().createElement(z.Modal,{body:H().createElement(os,{scrollToKey:x,activeTab:u,formulaData:f,meta:r,definition:a,showDefinitionId:m,expandedKeys:l,ref:D,filterTreeData:d,activedSelectId:s,filterExpressionTreeData:g,DataSourceOption:c}),bodyStyle:{justifyContent:"start",alignItems:"start",overflowX:"hidden",overflowY:"auto",flexDirection:"column"},titleIcon:null,className:"".concat(h,"-modal"),footer:S,maskClosable:!1,width:1e3,height:614,title:(0,W.getLangMsg)("printd.components.key0001"),closable:!0,destroyOnClose:!0,onCancel:function(){return n(!1)},onOk:function(){return n(!1)},mask:!0,visible:t})},ls="beforeSave";function us(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function cs(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?U()(n=us(Object(a),!0)).call(n,(function(t){(0,L.c)(e,t,a[t])})):b()?S()(e,b()(a)):U()(r=us(Object(a))).call(r,(function(t){B()(e,t,k()(a,t))}))}return e}function ds(e,t){if(!t)return e;t.ShowType;var n=t.DsType,r=t.FieldType,a=n.Hide,o=(n.OnlyShow,r.Hide,r.OnlyShow);return(null==a?void 0:a.length)>0&&(e=fs(e,a)),(null==o?void 0:o.length)>0&&(e=ss(e,o)),e}function ss(e,t){return P()(e).call(e,(function(e,n){var r=n,a=r.Items,o=r.Type,i=Bn()(t).call(t,o);return!i&&a&&(n=cs(cs({},n),{},{Items:ss(a,t)})),(i||n.Items&&n.Items.length)&&e.push(n),e}),[])}function fs(e,t){return P()(e).call(e,(function(e,n){var r=n.Items,a=n.DsType;return Bn()(t).call(t,a)||(r?e.push(cs(cs({},n),{},{Items:fs(r,t)})):e.push(n)),e}),[])}var gs={locale:"zh-CN","global.selectholder":"请选择","global.placeholder":"请输入...","global.cancel":"取消","global.confirm":"确定"};function hs(e,t){var n=void 0!==Jn()&&On()(e)||e["@@iterator"];if(!n){if(zn()(e)||(n=function(e,t){var n;if(!e)return;if("string"==typeof e)return vs(e,t);var r=Sn()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Qn()(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vs(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw o}}}}function vs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ps=function(){function e(t,n){(0,$l.c)(this,e),(0,L.c)(this,"localesData",void 0),(0,L.c)(this,"locale",void 0),this.locale=n||gs.locale,this.localesData=t}return(0,_l.c)(e,[{key:"setLocalesData",value:function(e,t){var n=t||this.localesData[e];if(n)return this.locale=e,this.localesData[e]=n,t}},{key:"getLocalData",value:function(){return this.localesData[this.locale]}},{key:"getLocal",value:function(){return this.locale}},{key:"getLocalesData",value:function(){return this.localesData}}]),e}(),ms=new ps((0,L.c)({},gs.locale,gs)),Cs=function(e,t,n){var r,a=ms.getLocalData();return function(e,t){var n,r=/{[\w\W]*?}/g,a=e.match(r)||[],o=function(e){return"object"===(0,Kn.c)(e)||"function"==typeof e},i=function(e){var t=e.length;return Sn()(e).call(e,1,t-1)},l=[],u=[],c=hs(a);try{for(c.s();!(n=c.n()).done;){var d=i(n.value),s=t[d];o(s)?u.push({k:d,v:s}):l.push({k:d,v:s})}}catch(e){c.e(e)}finally{c.f()}e=function(e,t){return U()(t).call(t,(function(t){var n=t.k,r=t.v,a=new RegExp("{"+n+"}","g");e=e.replace(a,r)})),e}(e,l);var f=[];u.length>0&&(f=function(e,t){var n=function(e){var t,n=[],r={t:0,v:""},a=e.length;return U()(t=e.split("")).call(t,(function(e,t){"{"===e?(n.push(r),r={t:1,v:""}):"}"===e?(n.push(r),r={t:0,v:""}):r.v=r.v+e,t===a-1&&n.push(r)})),n},r=[],a=n(e);return U()(a).call(a,(function(e,n){var a=e.t,o=e.v;0===a&&""!==o?r.push(H().createElement("span",{key:n},o)):1===a&&r.push(H().cloneElement(t[o],{key:n}))})),r}(e,t));return u.length>0?f:e}(a[Z()(r="".concat(e,".")).call(r,t)]||a["global.".concat(t)]||"",n)};var ys,Es={getPrefixCls:function(e,t,n){var r;return n||(e=e||"kdesigner",t?Z()(r="".concat(e,"-")).call(r,t):e)},prefixCls:"kdesigner",locale:{getLangMsg:Cs,getCompLangMsg:function(e,t,n){var r=e.componentName,a=e.labels,o=e.labelParams;if(o=o||{},n=n||gs,!(a=a||[]).length)for(var i in n){var l=i.split(".");r===l[0]&&l[1]&&a.push(l[1])}var u={};return U()(a).call(a,(function(e){u[e]=t&&"function"==typeof t?t(r,e,o[e]||{}):Cs(r,e,o[e]||{})})),u}}},Ds=Es,As=(0,V.createContext)(Ds);function ks(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function ws(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?U()(n=ks(Object(a),!0)).call(n,(function(t){(0,L.c)(e,t,a[t])})):b()?S()(e,b()(a)):U()(r=ks(Object(a))).call(r,(function(t){B()(e,t,k()(a,t))}))}return e}var bs=Z()(ys=[hn.text]).call(ys,(0,kn.c)(Et),(0,kn.c)(Dt)),xs=function(e){var t=e.id,n=e.propName,r=e.dataContext,a=(e.activedSelectId,e.RelationKey),o=e.RelationViewText,i=e.RelationDataSource,l=e.DataSourceOption,u=e.value,c=e.className,d=e.Editor,s=void 0===d?{}:d,f=e.field,g=e.readOnly,h=e.modalTitle,v=e.clearable,p=void 0!==v&&v,m=e.onClear,y=e.onSelect,E=e.handleInputChange,D=e.filterTreeData,A=e.expandedKeys,k=e.checkedKeys,w=e.selectedKey,b=e.modalType,x=e.Name,S=e.Tips,I=e.checkable,B=e.filterExpressionTreeData,R=e.DataSourceInfo,F=(0,V.useState)(!1),T=(0,M.c)(F,2),N=T[0],G=T[1],Q=(0,V.useState)(!1),J=(0,M.c)(Q,2),j=J[0],O=J[1],U=(0,V.useState)(!1),K=(0,M.c)(U,2),q=K[0],X=K[1],_=(0,V.useState)("1"),$=(0,M.c)(_,2),ee=$[0],te=$[1],ne=(0,V.useRef)(null),re=s.MaxLength,ae=s.Tips,oe=s.NameHidden,le=(0,V.useContext)(En),ce=f.formulaData,de="Formula"===f.dsType&&x===(0,W.getLangMsg)({key:"printd.grid.key0128"}),se=(le.meta,le.definition),fe=le.setMessage,ge="left-datasource",he=["=now()","=getUserName()"],ve=function(e){ue()((function(){var t,n;e?null===(t=ne.current)||void 0===t||t.show():null===(n=ne.current)||void 0===n||n.hide()}),0)},pe=(0,V.useState)(u),me=(0,M.c)(pe,2),Ce=me[0],ye=me[1];!function(e,t){(0,V.useEffect)((function(){var n=function(n){var r=n.id,a=n.value;r===e&&t(a)};return W.eventBus.on("input-query",n),function(){W.eventBus.off("input-query",n)}}),[e])}(t,ve),(0,V.useEffect)((function(){ye(u)}),[u]),(0,V.useEffect)((function(){var e=rr(u),t=e.isBindField,n=e.bindField;if(!t||de)ve(!1),Ee(!1);else{var r=nr(n,se);if("$DsKey=[System]"===f.dataSource&&(r=!0),r)ve(!1),Ee(!1);else{var a,o,i;if(f.dataSource||f.bindField||!f.anchorField)i=$n(er(f.dataSource,f.bindField),se);else{var l=f.anchorField,c=l.bindField,d=l.dataSource;i=$n(er(d,c),se)}if(!i&&-1!==(null==f||null===(a=f.bindField)||void 0===a||null===(o=bn()(a))||void 0===o?void 0:o.call(a,"."))){var s=f.bindField.match(/w?\w*$/)[0];i=$n(er(f.dataSource,s),se)}i?(ve(!1),Ee(!1)):(ve(!0),Ee(!0))}}}),[u,se,de]);var Ee=function(e){var n;W.eventBus.emit(Z()(n="".concat(ls,"_")).call(n,t),e)},De=(0,V.useCallback)((function(e){if(e!==u){if(de)return r.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[t,ar((0,L.c)((0,L.c)({},n,e),"viewText",""))]]));var o,l=rr(e),c=l.isBindField,d=l.bindField;if(W.console.log("isBindField",c),o=ar(R?(0,L.c)((0,L.c)({},n,e),R,""):(0,L.c)((0,L.c)((0,L.c)((0,L.c)((0,L.c)({},n,e),Y().camelCase(a),""),Y().camelCase(i),""),"viewText",""),"dsType","")),c){var s=nr(d,se);if(!s)return ve(!0),r.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[t,o]])),void W.console.error("queryDataSourceAndAncestorByName has no res",d,se);ve(!1);var f=s.dataSource,g=s.key,h=s.viewText,v=s.dsType;W.console.log("bindField, definition, res"),W.console.log(d,se,s),r.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[t,ar((0,L.c)((0,L.c)((0,L.c)((0,L.c)((0,L.c)({},n,e),Y().camelCase(a),g),Y().camelCase(i),f),"viewText","=$".concat(h)),"dsType",v))]]))}else ve(!1),r.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[t,o]]))}}),[t,u,n,a,i,se,de]),Ae=(0,V.useCallback)((function(e){var l=e.curTab;if(e)if("2"===l){var u=e.formulaData,c=de?{formulaData:u}:(0,L.c)((0,L.c)((0,L.c)((0,L.c)((0,L.c)((0,L.c)({},n,(0,W.getLangMsg)("printd.grid.key0003")),Y().camelCase(a),""),Y().camelCase(i),""),Y().camelCase(o),""),"dsType","Formula"),"formulaData",u);r.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[t,ar(c)]]))}else{var d=e.selectNode;ke(d)}else{r.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[t,{bindField:"",bindText:"",dataSource:"",dsType:"",formulaData:[],viewText:""}]]))}X(!1)}),[t,n,se,o,i,a,n,b,de,f]),ke=(0,V.useCallback)((function(e){var l;if(e){var u=e.key,c=e.InitAttr,d=void 0===c?{}:c,s=$n(u,se);if(s){var g=s.dataSource,h=s.ancestorTitle,v=s.key,p=s.title,m=s.dsType,y=s.ZeroShow,E=s.IgnoreTailZero,D=P()(l=C()(d)).call(l,(function(e,t){return e[Y().camelCase(t)]=d[t],e}),{});D.zeroShow=y,D.ignoreTailZero=E;var A=f.cellType,k=f.statType,w=f.parentId,b="=$".concat(p);if("Layout"===A){var x,S=r.findControl(w).parentId,I=r.findControl(S);if(I&&"TableTail"===I.type)b="noStat"!==k?Z()(x="=".concat(k,"(")).call(x,p,")"):"=$".concat(p)}R?r.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[t,ar((0,L.c)((0,L.c)({},n,"=$".concat(h)),R,ar((0,L.c)((0,L.c)((0,L.c)((0,L.c)({},Y().camelCase(a),v),Y().camelCase(i),g),Y().camelCase(o),b),"dsType",m))))]])):r.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[t,ar(ws((0,L.c)((0,L.c)((0,L.c)((0,L.c)((0,L.c)((0,L.c)({},n,"=$".concat(h)),Y().camelCase(a),v),Y().camelCase(i),g),Y().camelCase(o),b),"dsType",m),"formulaData",null),D))]]))}else W.console.error("queryDataSourceAndAncestorByKey has no res",u,se)}}),[t,n,se,o,i,a,n,R,f]),we=(0,V.useCallback)((function(){O(!1)}),[]),be=function(){te((function(){return de?"2":"1"})),"expression"===b?X(!0):O(!0)},xe=(0,V.useCallback)((function(e){return"function"==typeof B&&(e=B(e)),function(e,t){return null!=t&&t.length?pr(e,(function(e){var n=e.bindField;return n&&Bn()(t).call(t,n)}),"Sys"):e}(e,he)}),[B]),Se=(0,V.useContext)(W.GlobalConfigContext).invokePrintDesignerCustomEvent,Ie=(0,V.useCallback)((function(e){Se("clickTipsLink",e)}),[Se]),Be=(0,V.useCallback)((function(e){return D(ds(e,l))}),[l]);return H().createElement(H().Fragment,null,H().createElement(W.NameTipWrapper,{nameHidden:oe,className:c,name:x,tips:S,onLinkClick:Ie}),H().createElement(_r,{ref:ne,className:c},H().createElement("div",{onMouseOver:function(){p&&Ce&&G(!0)},onMouseLeave:function(){N&&G(!1)}},H().createElement(z.Input,{onChange:function(e){var t=e.target.value||"";ye(t)},readOnly:g,onPressEnter:function(){},onBlur:function(e){var t=e.target.value||"",n=E||De;re&&t.length>re&&((null==ae?void 0:ae.MaxLength)&&fe(ae.MaxLength),t=Sn()(t).call(t,0,re),ye(t)),n(t,ve)},value:Ce,title:u,type:"string",placeholder:(0,W.getLangMsg)("printd.grid.key0002"),borderType:"bordered",prefix:de?H().createElement("span",{className:"formula-prefix"},"fx"):null,onClick:function(){g&&be()},suffix:H().createElement(H().Fragment,null,N&&H().createElement(z.Icon,{type:"close",style:{cursor:"pointer"},onClick:m}),H().createElement(z.Icon,{type:"more",style:{cursor:"pointer"},onClick:be}))}),de&&Bn()(bs).call(bs,f.type)?H().createElement(Bs,null):null)),H().createElement(Vr,(0,ie.c)({activedSelectId:t,visible:j,modalTitle:h},le,{filterTreeData:D,expandedKeys:A,selectedKey:w,checkedKeys:k,onSelect:y?Ln()(y).call(y,null,O):function(e){ke(e),O(!1)},onCancel:we,className:ge,emptyNode:H().createElement(Ss,{className:"left-datasource"}),checkable:I})),H().createElement(is,(0,ie.c)({activedSelectId:t,visible:q,activeTab:ee,formulaData:ce},le,{filterTreeData:Be,filterExpressionTreeData:xe,expandedKeys:A,setVisible:X,onSelect:y?Ln()(y).call(y,null,X):Ae,className:ge,DataSourceOption:l})))};function Ss(e){var t=e.className;return H().createElement("div",{className:"".concat(t,"-empty")},H().createElement("img",{className:"".concat(t,"-empty-img"),src:Gn,width:"168",height:"96",alt:(0,W.getLangMsg)("printd.grid.key0004")}),H().createElement("div",{className:"".concat(t,"-empty-text")},(0,W.getLangMsg)("printd.grid.key0004")))}var Is=" ";function Bs(){var e=(0,V.useContext)(As),t=e.getPrefixCls,n=e.prefixCls,r=t?t(n,"print-designer"):"";return H().createElement("div",{className:"".concat(r,"-formula-helper-text")},H().createElement("span",null,(0,W.getLangMsg)("printd.grid.key0125")+Is),H().createElement("a",{href:"https://vip.kingdee.com/article/583309331983209728",target:"_blank",rel:"noreferrer"},(0,W.getLangMsg)("printd.grid.key0126")))}var Ms=function(e){var t,n=e.dataContext,r=e.field,a=null==e||null===(t=e.field)||void 0===t?void 0:t.type,o="LayoutCell"!==a,i=n.findControl(r.parentId)||{},l=i.id,u=(i.dataSource,i.type,(0,V.useCallback)((function(e){var t=n.findControl(l);null==t||t.cellType,n.findControl(null==t?void 0:t.parentId);return e=F()(e).call(e,(function(e){return"Sys"!==e.DsType})),o?mr(e,"Image"):e}),[a])),c=(0,V.useCallback)((function(e){return o?mr(e,"Image"):e}),[]);return H().createElement(xs,(0,ie.c)({},e,{modalType:"expression",filterTreeData:u,filterExpressionTreeData:c}))};function Ls(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rs(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?U()(n=Ls(Object(a),!0)).call(n,(function(t){(0,L.c)(e,t,a[t])})):b()?S()(e,b()(a)):U()(r=Ls(Object(a))).call(r,(function(t){B()(e,t,k()(a,t))}))}return e}var Fs=function(e){e.Name;var t,n,r,a=e.id,o=e.propName,i=e.DataSourceInfo,l=e.dataContext,u=e.RelationKey,c=e.RelationViewText,d=e.RelationDataSource,s=e.value,f=e.field;e.className;W.console.log("datacell------",e);(0,V.useRef)(null);var g=(0,V.useContext)(En),h=f.statType||"",v=f.dsType,p=f.cellType,m="Formula"===v,y=l.findControl(f.parentId),E=y.id,D=y.dataSource,A=y.type,k=(Bn()(t=["Detail","Group"]).call(t,p)?D:"").replace(/^(\S+\.)?(\S+)$/g,"$2"),w=Bn()(n=["Detail","Group"]).call(n,p)?[Z()(r="".concat(D,"-")).call(r,k)]:[],b=(g.meta,g.definition),x="SubDataGrid"===A&&"Detail"===p?null:"expression",S=function(e){var t,n=e.key,r=e.InitAttr,c=void 0===r?{}:r,s=$n(n,b);if(s){var f,g,v,m=s.dataSource,y=s.ancestorTitle,A=s.key,k=s.title,w=s.dsType,x=s.ZeroShow,S=s.IgnoreTailZero,I="=$".concat(y),B=P()(t=C()(c)).call(t,(function(e,t){return e[Y().camelCase(t)]=c[t],e}),{});if(B.zeroShow=x,B.ignoreTailZero=S,i)f=[[a,ar((0,L.c)((0,L.c)({},o,I),i,ar(Rs((0,L.c)((0,L.c)((0,L.c)((0,L.c)({},Y().camelCase(u),A),Y().camelCase(d),m),"viewText","Statistic"===p&&"noStat"!==h?Z()(g="=".concat(h,"(")).call(g,k,")"):"=$".concat(k)),"dsType",w),B))))]];else f=[[a,ar(Rs((0,L.c)((0,L.c)((0,L.c)((0,L.c)((0,L.c)({},o,I),Y().camelCase(u),A),Y().camelCase(d),m),"viewText","Statistic"===p&&"noStat"!==h?Z()(v="=".concat(h,"(")).call(v,k,")"):"=$".concat(k)),"dsType",w),B))]];D||f.push([E,{dataSource:m,dataSourceText:I?I.replace(/(\S+)\.(\S+)(\.\S+)$/g,"$2"):""}]),l.batchUpdateControlPropertyValues((0,W.createUpdateAction)(f))}else W.console.error("queryDataSourceAndAncestorByKey has no res",n,b)},I=(0,V.useCallback)((function(e){return e=F()(e).call(e,(function(e){return"Sys"!==e.DsType}))}),[p,D,f]);return H().createElement(xs,(0,ie.c)({},e,{modalType:x,filterTreeData:I,expandedKeys:w,onSelect:"expression"===x?function(e,t){if(t)if("2"===t.curTab){var n,r=t.formulaData,i=m?{formulaData:r}:(0,L.c)((0,L.c)((0,L.c)((0,L.c)((0,L.c)((0,L.c)({},o,(0,W.getLangMsg)("printd.grid.key0003")),Y().camelCase(u),""),Y().camelCase(d),""),Y().camelCase(c),""),"dsType","Formula"),"formulaData",r);n=null!=r&&r[0]||1!==(null==r?void 0:r.length)?ar(i):Rs(Rs({},ar(i)),{},{bindText:"",dsType:""}),l.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[a,n]]))}else{var s=t.selectNode;S(s)}else{l.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[a,{bindField:"",bindText:"",dataSource:"",dsType:"",formulaData:[],viewText:""}]]))}e(!1)}:function(e,t){S(t),e(!1)},handleInputChange:function(e,t){if(e!==s){if(m)return l.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[a,ar((0,L.c)((0,L.c)({},o,e),"viewText",""))]]));var n=rr(s),r=n.isBindField,f=n.bindField;if(r){var g,v=nr(f,b);if(!v)return t(!0),l.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[a,ar((0,L.c)((0,L.c)((0,L.c)((0,L.c)((0,L.c)({},o,e),Y().camelCase(u),""),Y().camelCase(d),""),Y().camelCase(c),""),"dsType",""))]])),void W.console.error("queryDataSourceAndAncestorByName has no res",f,b);t(!1);var C=v.dataSource,y=v.key,A=v.viewText,k=v.dataSourceText,w=v.dsType;W.console.log("bindField, definition, res"),W.console.log(f,b,v);var x,S="Statistic"===p?(0,L.c)({},Y().camelCase(c),Z()(g="=".concat(h,"(")).call(g,A,")")):(0,L.c)({},Y().camelCase(c),"=$".concat(A));x=i?[[a,ar((0,L.c)((0,L.c)({},o,e),i,""))]]:[[a,ar(Rs((0,L.c)((0,L.c)((0,L.c)((0,L.c)({},o,e),Y().camelCase(u),y),Y().camelCase(d),C),"dsType",w),S))]],D||x.push([E,{dataSource:C,dataSourceText:k}]),l.batchUpdateControlPropertyValues((0,W.createUpdateAction)(x))}else t(!1),l.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[a,(0,L.c)({},o,e)]]))}}}))};function Ts(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ns(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?U()(n=Ts(Object(a),!0)).call(n,(function(t){(0,L.c)(e,t,a[t])})):b()?S()(e,b()(a)):U()(r=Ts(Object(a))).call(r,(function(t){B()(e,t,k()(a,t))}))}return e}var Gs,Zs=function(e){var t=e.className,n=e.scrollToKey,r=e.errorTipShow,a=e.setErrorTipShow,o=e.checkable,i=e.meta,l=e.definition,u=e.showDefinitionId,c=e.filterTreeData,d=e.onCheck,s=e.checkedKeys,f=e.checkedNodes,g=e.emptyNode,h=e.handleDelete,v=e.handleClear,p=e.setCheckedNodes,m=e.setCheckedNodeKeys,C=e.controlType,y=e.onSelect,E=f.length||0,D=(0,V.useState)(null),A=(0,M.c)(D,2),k=A[0],w=A[1],b=(0,V.useState)(!1),x=(0,M.c)(b,2),S=x[0],I=x[1],B=(0,V.useCallback)((function(e,t,n){return e[t]=da()(e).call(e,n,1,e[t])[0],e}),[]),L=function(e){e.preventDefault()},R=function(e){I(!1)};return H().createElement(H().Fragment,null,r&&H().createElement(z.Alert,{className:"".concat(t,"-alert"),message:(0,W.getLangMsg)("printd.components.key0007"),type:"error",delayOffTime:0,closable:!0,showIcon:!0,onClose:function(){return a(!1)}}),H().createElement("div",{className:t},H().createElement("div",{className:"".concat(t,"-left")},H().createElement(Ur,{controlType:C,onSelect:y,checkable:!!o&&"CardGrid"!==C,scrollToKey:n,meta:i,definition:l,showDefinitionId:u,filterTreeData:c,onCheck:d,checkedKeys:s,emptyNode:g})),"CardGrid"!==C&&H().createElement("div",{className:"".concat(t,"-right")},H().createElement("div",{className:"right-header"},H().createElement("div",{className:"total"},(0,W.getLangMsg)("printd.components.key0008"),"（",E,"）"),H().createElement("div",{className:Hn()({"clear-all":!0,disabled:0===E}),onClick:v},(0,W.getLangMsg)("printd.components.key0009"))),H().createElement("ul",{className:Hn()("checked-list",{"is-drag":S}),onDragOver:L,onDragEnter:L},N()(f).call(f,(function(e,t){return H().createElement("li",{className:Hn()("checked-item",{"is-active":k===t}),key:t,draggable:!0,onDragStart:function(e){return function(e,t){e.stopPropagation(),w(t),I(!0)}(e,t)},onDragEnd:R,onDragOver:function(e){return function(e,t){if(t!==k){var n=B(f,t,k);p(n),m(N()(n).call(n,(function(e){return e.key}))),w(t)}}(0,t)},onMouseOver:function(e){return function(e,t){w(t)}(0,t)},onMouseLeave:function(e){w(null)}},H().createElement("span",{className:"item-name"},e.ViewName||e.Name||""),H().createElement(z.Icon,{type:"close",onClick:function(){return h(e.key)}}))}))))))},Qs=function(e){var t=e.visible,n=e.onCancel,r=e.meta,a=e.definition,o=e.checkedKeys,i=void 0===o?[]:o,l=e.onSelect,u=e.emptyNode,c=(e.activedSelectId,e.controlType),d=void 0===c?"DataGrid":c,s=e.transferData,f=(0,V.useState)(!1),g=(0,M.c)(f,2),h=g[0],v=g[1],p=(0,V.useState)(!1),m=(0,M.c)(p,2),C=m[0],y=m[1],E=(0,V.useState)([]),D=(0,M.c)(E,2),A=D[0],k=D[1],w=(0,V.useState)(i),b=(0,M.c)(w,2),x=b[0],S=b[1],I=!x.length,B=(0,V.useContext)(W.DataContext),L=((0,V.useContext)(W.SelectionContext),(0,V.useContext)(W.DataFactoryContext).modelFactory,B.getRootId()),R=(B.findControl(L).language,d===gt?null==s?void 0:s.parentGridId:""),T="grid-guide",G=(0,V.useCallback)((function(e,t){var n,r,o,i,l,u=t.checked,c=t.node;t.event;W.console.log("checkedKeys",u,e,c);var d=ur(c);W.console.log("fieldKeys--------",d,x);var s=u?Z()(n=[]).call(n,(0,kn.c)(x),(0,kn.c)(d)):F()(x).call(x,(function(e){return!Bn()(d).call(d,e)}));W.console.log("checkedKeys--------",s);var f=F()(r=N()(o=F()(s).call(s,Boolean)).call(o,(function(e){return Ns({key:e},or(e,a))}))).call(r,(function(e){var t=e.dataSource,n=e.Key,r=e.Items;return!r||!r.length||!(Fn()(t).call(t,n)||r&&r.length)}));W.console.log("nodes------",f,N()(i=F()(s).call(s,Boolean)).call(i,(function(e){return Ns({key:e},or(e,a))})));var g=F()(f).call(f,(function(e){return"=getRowNumber()"!==e.Key})),h=(null===(l=F()(g).call(g,(function(e){return e}))[0])||void 0===l?void 0:l.dataSource)||"",p=(0,kn.c)(new(fa())(N()(g).call(g,(function(e){return e.dataSource})))),m=p.length>1;v(m),W.console.log("nodes---------",f),f=F()(f).call(f,(function(e){return"=getRowNumber()"===e.Key||e.dataSource===h}));var C=N()(f).call(f,(function(e){return e.key}));S(C),k(f),W.console.log("checkedNodes.current",f)}),[x,S,v]),Q=function(){k([]),S([])},P=function(){v(!1),n()},J=["Entry","ReportEntry","Custom","Ref","Subentry","Workflow","Head","Main","Report","Approveline"],j=(0,V.useCallback)((function(e){if("CardGrid"===d)return xr(J)(e);if(d===gt){var t,n=B.findControl(R).dataSource,r=(null===(t=lr(e,(function(e){if(e.dataSource===n)return!0})))||void 0===t?void 0:t.SubEntryList)||[];return e=Er(e),Dr(e,r)}var a=null==s?void 0:s.subGridId;if(null!=a&&a.length){var o=s.dataSource;return Dr(e,o)}var i=yr(e);try{var l,u,c=null==i||null===(l=Yn()(i).call(i,(function(e){return"Ref"===e.DsType})))||void 0===l||null===(l=Yn()(u=l.Items).call(u,(function(e){return"Workflow"===e.DsType})))||void 0===l?void 0:l.Items;if((null==c?void 0:c.length)>1){var f=fe()(c).call(c,(function(e){return"Approveactivity"===e.DsType}));-1!==f&&da()(c).call(c,f,1)}}catch(e){}return i}),[d]);(0,V.useEffect)((function(){}),[x]),(0,V.useEffect)((function(){if(t)if(Sr(a,null==s?void 0:s.dataSource)||"CardGrid"===d){S(i);var e=N()(i).call(i,(function(e){return Ns({key:e},or(e,a))}));k(e)}else Q()}),[t,a.length,null==s?void 0:s.dataSource,d]);var O=H().createElement(H().Fragment,null,H().createElement(z.Checkbox,{className:"".concat(T,"-modal-footer-checkbox"),checked:C,onChange:function(e){var t=!!e.target.checked;y(t)}},(0,W.getLangMsg)("printd.grid.key0101")),H().createElement("div",{className:"".concat(T,"-modal-footer-btns")},H().createElement(z.Button,{onClick:P,type:"second",className:"".concat(T,"-modal-cancel-btn")},(0,W.getLangMsg)("printd.components.key0011")),H().createElement(z.Button,{className:"".concat(T,"-modal-ok-btn"),type:"primary",disabled:I,onClick:function(){l(A,d)}},(0,W.getLangMsg)("printd.components.key0012"))));return H().createElement(z.Modal,{body:H().createElement(Zs,{checkable:!0,className:"".concat(T,"-body"),errorTipShow:h,setErrorTipShow:v,meta:r,definition:a,showDefinitionId:C,filterTreeData:j,onCheck:G,checkedKeys:x,checkedNodes:A,handleDelete:function(e){k((function(t){return F()(t).call(t,(function(t){return t.key!==e}))})),S((function(t){return F()(t).call(t,(function(t){return t!==e}))}))},handleClear:Q,emptyNode:u,setCheckedNodes:k,setCheckedNodeKeys:S,controlType:d,onSelect:function(e){k(e),S(e.key)}}),titleIcon:null,maskClosable:!1,className:"".concat(T,"-modal"),footer:O,width:688,height:500,title:(0,W.getLangMsg)("printd.components.key0013"),closable:!0,destroyOnClose:!0,onCancel:P,onOk:P,mask:!0,visible:t})},Ps=n(1508),Js=n.n(Ps),js=n(7224),Os=n.n(js);function Us(){if(Gs)return Gs;if(Gs={},null!=window.screen.deviceXDPI)Gs.x=window.screen.deviceXDPI,Gs.y=window.screen.deviceYDPI;else{var e=document.createElement("div");e.style.cssText="width:1in;height:1in;position:absolute;left:0;top:0;z-index:0;visibility:hidden",document.body.appendChild(e),Gs.x=tu()(e.offsetWidth),Gs.y=tu()(e.offsetHeight),e.parentNode.removeChild(e)}return Gs}var zs=function(){return Vs(1,"x",arguments.length>0&&void 0!==arguments[0]?arguments[0]:1)},Ws=function(e){var t=arguments.length>2?arguments[2]:void 0;return Hs(e*Vs(1,"x",arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),null!=t?t:1)},Ks=function(e){var t=arguments.length>2?arguments[2]:void 0;return Hs(e/Vs(1,"x",arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),null!=t?t:1)};function Vs(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"mm";"string"==typeof e&&(t=e.substr(e.length-2,2)),t=t||a,e=Os()(e);var o=Us()[n];switch(t){case"cm":return Hs(e*o/2.54,1)*r;case"mm":return Hs(e*o/25.4,1)*r;default:return e*r}}function Hs(e,t){if(!t)return e;var n=Math.pow(10,t);return Math.round(e*n)/n}function qs(e,t){if(!t)return e;var n=Math.pow(10,t);return Math.floor(e*n)/n}var Ys=["fontSize","width","height"],Xs=function(e){var t;return P()(t=C()(e)).call(t,(function(t,n){if(e.lineSpace)return t[n]=e[n],t;var r=Yn()(Ys).call(Ys,(function(t){return null==e?void 0:e[t]}))?2:1;return t[n]=Y().isNumber(e[n])?Hs(e[n],r):e[n],t}),{})},_s=function(e){var t;return"PrintMetadata"!==(null===(t=e.getData())||void 0===t?void 0:t.type)},$s=n(6908),ef=n.n($s);function tf(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function nf(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?U()(n=tf(Object(a),!0)).call(n,(function(t){(0,L.c)(e,t,a[t])})):b()?S()(e,b()(a)):U()(r=tf(Object(a))).call(r,(function(t){B()(e,t,k()(a,t))}))}return e}var rf=function(e){var t=e.columns,n=e.rows;return function(e){var r=e.row,a=e.column;return{x:uf(Sn()(t).call(t,0,a)),y:uf(Sn()(n).call(n,0,r)),width:t[a].columnWidth,height:n[r].rowHeight}}},af=rf,of=function(e,t){var n;return Z()(n="".concat(e,"-")).call(n,t)},lf=function(e){return function(t,n){return t*e+n}},uf=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.length?Hs(P()(e).call(e,(function(e,n){return"DataRow"===n.type?n.rowType===At||n.rowType===bt?e+n.rowHeight+t:e+n.rowHeight:e+n.columnWidth}),0),1):0},cf=function(e){var t,n,r,a,o=e.columns,i=e.rows,l=e.cells,u=e.mergeConfig,c=e.templateRowCount,d=e.fixedRowAtPage,s=e.allItems,f=void 0===s?[]:s,g=e.gridData,h=Y().cloneDeep(f),v=[],p=N()(t=Js()(n=new Array(i.length)).call(n,0)).call(t,(function(){return{cells:[],row:{}}})),m=o.length,y=i.length,E=Y().cloneDeep(l),D={},A=rf({columns:o,rows:i}),k=lf(m),w=Pf(null!=g?g:{}),b=jf(null!=g?g:{});U()(r=C()(u)).call(r,(function(e){for(var t=e.split("-"),n=(0,M.c)(t,2),r=(n[0],n[1],u[e]),a=r.rowStart,o=r.rowLength,i=r.columnStart,l=r.columnLength,c=a;c<a+o;c++)for(var d=i;d<i+l;d++)E[k(c,d)].mergeConfig=u[e]})),U()(E).call(E,(function(e,t){var n=e.row,r=e.column,a=e.border,o=void 0===a?DEFUALT_BORDER_DATA:a,l=e.id;if(e.mergeConfig){var u=e.mergeConfig,c=u.rowStart,d=u.columnStart,s=(u.rowLength,u.columnLength,of(c,d));if(s in D){var f=D[s],g=A({row:n,column:r}),m=g.width,C=g.height;n!==c&&r===d&&(v[f].height+=C),r!==d&&n===c&&(v[f].width+=m)}else{var y=nf(nf(nf({},e),A({row:n,column:r})),{},{cellKey:of(n,r),border:o,childItems:(null==h?void 0:F()(h).call(h,(function(e){return e.parentId===l})))||[]});v.push(y),p[n]=p[n]||{cells:[]},p[n].row=i[n],p[n].cells.push(y),D[s]=v.length-1}}else{var E=nf(nf(nf({},e),A({row:n,column:r})),{},{cellKey:of(n,r),border:o});v.push(E),p[n]=p[n]||{cells:[]},p[n].row=i[n],p[n].cells.push(E)}})),W.console.log("cellDataWithMergeCell",p,v,D);var x=[],S=-1,I=0,B=-1;if(d&&c>1){var L,R,T,G=c-1;w?(S=fe()(p).call(p,(function(e){return e.row.rowType===At})),L=p[S]):b&&(L=p[p.length-1]),L&&(R=L.cells,T=L.row.rowHeight,I=b?P()(p).call(p,(function(e,t){return e+t.row.rowHeight*G}),0):T*G,R&&(x=Qn()({length:G},(function(e,t){return N()(R).call(R,(function(e){var n=e.y+T*(t+1);return 0===t&&(B=n),nf(nf(nf({},e),St),{},{y:n})}))}))))}if(S>-1&&0!==I&&U()(p).call(p,(function(e,t){var n=e.cells;t>S&&U()(n).call(n,(function(e){(0,ie.c)(e,{y:e.y+I})}))})),g&&x.length&&-1!==S&&!Bn()(a=[Qt,Zt]).call(a,g[Ft])){var Q,J,j=Y().cloneDeep(p[S]);U()(Q=j.cells).call(Q,(function(e){e.row=0})),U()(x).call(x,(function(e,t){U()(e).call(e,(function(e){e.row=t+1}))}));var O=dg(g,Z()(J=[j]).call(J,(0,kn.c)(N()(x).call(x,(function(e){return{cells:e}})))),c,m).newRowData;if(O){var z,K,V,H=fg(g[ze]),q=(0,M.c)(H,4),X=q[0],_=q[1],$=q[2],ee=q[3],te=X;if(0!==S){var ne,re,ae;if(Bn()(te).call(te,Tt))U()(ne=O[0].cells).call(ne,(function(e){e[ze]=Nf(e[ze],Jt,ee,_,$)}));if(Bn()(te).call(te,Jt))U()(re=O[0].cells).call(re,(function(e){e[ze]=Nf(e[ze],Jt,0,_,$)}));if(Bn()(te).call(te,Nt))U()(ae=O[0].cells).call(ae,(function(e){e[ze]=Nf(e[ze],Jt,0,_,$)}))}if(S!==y-1){var oe,le;if(Bn()(te).call(te,Tt),Bn()(te).call(te,Ot))U()(oe=O[O.length-1].cells).call(oe,(function(e){e[ze]=Nf(e[ze],Ot,0,_,$)}));if(Bn()(te).call(te,Nt))U()(le=O[O.length-1].cells).call(le,(function(e){e[ze]=Nf(e[ze],Ot,0,_,$)}))}return{originCells:E,rowData:Z()(z=Z()(K=Sn()(p).call(p,0,S)).call(K,O[0])).call(z,Sn()(p).call(p,S+1)),templateRowData:N()(V=Sn()(O).call(O,1)).call(V,(function(e){return e.cells})),templateRowHeight:I,templateRowIndex:S,templateRowY:B,rowCount:y,columnCount:m}}}return{originCells:E,rowData:p,templateRowData:x,templateRowHeight:I,templateRowIndex:S,templateRowY:B,rowCount:y,columnCount:m}},df=Y().memoize((function(e){var t,n,r,a,o=P()(t=Y().cloneDeep(e)).call(t,(function(e,t){var n=t.type;t.id;switch(n){case"DataRow":return e.rows.push(t),e;case"DataColumn":return e.columns.push(t),e;default:return e.cells.push(t),e}}),{columnData:{},rowData:{},cells:[],columns:[],rows:[]}),i=(o.columns.length,o.rows),l=o.columns;return U()(n=o.cells).call(n,(function(e,t){e.id;var n=e.rowId,r=e.columnId,a=fe()(i).call(i,(function(e){return e.id===n})),u=fe()(l).call(l,(function(e){return e.id===r}));o.cells[t]=nf(nf({},e),{},{row:a,column:u}),o.rowData[a]=o.rowData[a]||[],o.rowData[a].push(e),o.columnData[u]=o.columnData[u]||[],o.columnData[u].push(e)})),ef()(r=o.cells).call(r,(function(e,t){var n=e.row,r=e.column,a=t.row,o=t.column;return n-a==0?r-o:n-a})),W.console.log("originCells",o.cells),W.console.log("originCells id",N()(a=o.cells).call(a,(function(e){return{row:e.row,column:e.column}}))),o.rowCount=i.length,o.columnCount=l.length,o}),j()),sf=function(e,t,n){var r={};return P()(t).call(t,(function(t,a){var o=a.rowId,i=a.columnId,l="height"===n?o:i;return r[l]?(r[l]=!0,Hs(t,1)):(r[l]=!0,Hs(t+e.findControl(l)["height"===n?Ut:zt],1))}),0)},ff=function(e){var t=e.isMultiSelected,n=e.field,r=e.dataContext,a=e.selectionContext,o=e.propName,i=(n.id,n.parentId),l=n.rowId,u=n.columnId,c=a.getSelection();if(t){var d=N()(c).call(c,(function(e){return r.findControl(e)})),s=F()(d).call(d,Zf);if(s.length===d.length&&("width"===o||"height"===o)){var f=N()(s).call(s,(function(e){return gf({dataContext:r,field:e})[o]}));return 1===new(fa())(f).size?f[0]:""}return 1===new(fa())(N()(d).call(d,(function(e){return e[o]}))).size?n[o]:""}if(Zf(n)&&("width"===o||"height"===o)){var g,h,v,p,m=r.findControl(i);if(m.mergeConfig){var C=hg({items:r.getData().items,gridData:m,rowId:l,columnId:u});if(C.length)return sf(r,C,o)}return"width"===o?null!==(g=null===(h=r.findControl(u))||void 0===h?void 0:h.columnWidth)&&void 0!==g?g:"":null!==(v=null===(p=r.findControl(l))||void 0===p?void 0:p.rowHeight)&&void 0!==v?v:""}return n[o]},gf=function(e){var t=e.field,n=e.dataContext,r=(t.id,t.parentId),a=t.rowId,o=t.columnId;if(Zf(t)){var i=n.findControl(r);if(i.mergeConfig){var l=hg({items:n.getData().items,gridData:i,rowId:a,columnId:o});if(l.length)return{width:sf(n,l,"width"),height:sf(n,l,"height")};var u=n.findControl(a);return{width:n.findControl(o).columnWidth,height:u.rowHeight}}}},hf=["Id","Count","CellType","Name"],vf=["Id","Count","CellType","Name"];function pf(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function mf(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?U()(n=pf(Object(a),!0)).call(n,(function(t){(0,L.c)(e,t,a[t])})):b()?S()(e,b()(a)):U()(r=pf(Object(a))).call(r,(function(t){B()(e,t,k()(a,t))}))}return e}var Cf=function(){return H().createElement("svg",{className:"icon",width:"200",height:"200",viewBox:"0 0 28 28",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},H().createElement("title",null,(0,W.getLangMsg)("printd.grid.key0026")),H().createElement("g",{id:"文本备份",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},H().createElement("path",{d:"M5.5,24 L22.5,24 L22.5,22.5 L23.999,22.5 L24,5.5 L22.5,5.5 L22.5,4 L5.5,4 L5.5,5.5 L4,5.5 L3.999,22.5 L5.5,22.5 L5.5,24 Z M4.5,23.5 L2.5,23.5 L2.5,25.5 L4.5,25.5 L4.5,23.5 Z M25.5,23.5 L23.5,23.5 L23.5,25.5 L25.5,25.5 L25.5,23.5 Z M4.5,2.5 L2.5,2.5 L2.5,4.5 L4.5,4.5 L4.5,2.5 Z M25.5,2.5 L23.5,2.5 L23.5,4.5 L25.5,4.5 L25.5,2.5 Z M5.5,26.5 L1.5,26.5 L1.5,22.5 L2.999,22.5 L3,5.5 L1.5,5.5 L1.5,1.5 L5.5,1.5 L5.5,3 L22.5,3 L22.5,1.5 L26.5,1.5 L26.5,5.5 L25,5.5 L24.999,22.5 L26.5,22.5 L26.5,26.5 L22.5,26.5 L22.5,25 L5.5,25 L5.5,26.5 Z",id:"形状结合",fill:"#404040","fill-rule":"nonzero"}),H().createElement("path",{d:"M20.5234375,19.924 C20.7995799,19.924 21.0234375,20.1478576 21.0234375,20.424 C21.0234375,20.6694599 20.8465623,20.8736084 20.6133131,20.9159443 L20.5234375,20.924 L7.55200195,20.924 C7.27585958,20.924 7.05200195,20.7001424 7.05200195,20.424 C7.05200195,20.1785401 7.22887711,19.9743916 7.46212632,19.9320557 L7.55200195,19.924 L20.5234375,19.924 Z M20.5,17.424 C20.7761424,17.424 21,17.6478576 21,17.924 C21,18.1694599 20.8231248,18.3736084 20.5898756,18.4159443 L20.5,18.424 L15.5,18.424 C15.2238576,18.424 15,18.2001424 15,17.924 C15,17.6785401 15.1768752,17.4743916 15.4101244,17.4320557 L15.5,17.424 L20.5,17.424 Z M20.5,14.424 C20.7761424,14.424 21,14.6478576 21,14.924 C21,15.1694599 20.8231248,15.3736084 20.5898756,15.4159443 L20.5,15.424 L15.5,15.424 C15.2238576,15.424 15,15.2001424 15,14.924 C15,14.6785401 15.1768752,14.4743916 15.4101244,14.4320557 L15.5,14.424 L20.5,14.424 Z",id:"形状结合",fill:"#979797","fill-rule":"nonzero"}),H().createElement("path",{d:"M12.6,17.6699621 L12.6,8.03204346 L12.6,8.03204346 L16.1159783,8.03204346 C16.4009692,8.03204346 16.632,7.80101266 16.632,7.51602173 C16.632,7.2310308 16.4009692,7 16.1159783,7 L7.78802173,7 C7.5030308,7 7.272,7.2310308 7.272,7.51602173 C7.272,7.80101266 7.5030308,8.03204346 7.78802173,8.03204346 L11.304,8.03204346 L11.304,8.03204346 L11.304,17.7739187 C11.304,18.1053028 11.57264,18.3739428 11.9040241,18.3739428 C11.9200353,18.3739428 11.9360401,18.3733019 11.952,18.3720217 C12.3179691,18.3426661 12.6,18.0371067 12.6,17.6699621 Z",id:"T",fill:"#404040","fill-rule":"nonzero"})))},yf=function(e){switch(e){case"Text":return H().createElement("svg",{className:"icon",width:"200",height:"200",viewBox:"0 0 28 28",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},H().createElement("title",null,(0,W.getLangMsg)("printd.grid.key0026")),H().createElement("g",{id:"文本备份",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},H().createElement("path",{d:"M5.5,24 L22.5,24 L22.5,22.5 L23.999,22.5 L24,5.5 L22.5,5.5 L22.5,4 L5.5,4 L5.5,5.5 L4,5.5 L3.999,22.5 L5.5,22.5 L5.5,24 Z M4.5,23.5 L2.5,23.5 L2.5,25.5 L4.5,25.5 L4.5,23.5 Z M25.5,23.5 L23.5,23.5 L23.5,25.5 L25.5,25.5 L25.5,23.5 Z M4.5,2.5 L2.5,2.5 L2.5,4.5 L4.5,4.5 L4.5,2.5 Z M25.5,2.5 L23.5,2.5 L23.5,4.5 L25.5,4.5 L25.5,2.5 Z M5.5,26.5 L1.5,26.5 L1.5,22.5 L2.999,22.5 L3,5.5 L1.5,5.5 L1.5,1.5 L5.5,1.5 L5.5,3 L22.5,3 L22.5,1.5 L26.5,1.5 L26.5,5.5 L25,5.5 L24.999,22.5 L26.5,22.5 L26.5,26.5 L22.5,26.5 L22.5,25 L5.5,25 L5.5,26.5 Z",id:"形状结合",fill:"#404040","fill-rule":"nonzero"}),H().createElement("path",{d:"M20.5234375,19.924 C20.7995799,19.924 21.0234375,20.1478576 21.0234375,20.424 C21.0234375,20.6694599 20.8465623,20.8736084 20.6133131,20.9159443 L20.5234375,20.924 L7.55200195,20.924 C7.27585958,20.924 7.05200195,20.7001424 7.05200195,20.424 C7.05200195,20.1785401 7.22887711,19.9743916 7.46212632,19.9320557 L7.55200195,19.924 L20.5234375,19.924 Z M20.5,17.424 C20.7761424,17.424 21,17.6478576 21,17.924 C21,18.1694599 20.8231248,18.3736084 20.5898756,18.4159443 L20.5,18.424 L15.5,18.424 C15.2238576,18.424 15,18.2001424 15,17.924 C15,17.6785401 15.1768752,17.4743916 15.4101244,17.4320557 L15.5,17.424 L20.5,17.424 Z M20.5,14.424 C20.7761424,14.424 21,14.6478576 21,14.924 C21,15.1694599 20.8231248,15.3736084 20.5898756,15.4159443 L20.5,15.424 L15.5,15.424 C15.2238576,15.424 15,15.2001424 15,14.924 C15,14.6785401 15.1768752,14.4743916 15.4101244,14.4320557 L15.5,14.424 L20.5,14.424 Z",id:"形状结合",fill:"#979797","fill-rule":"nonzero"}),H().createElement("path",{d:"M12.6,17.6699621 L12.6,8.03204346 L12.6,8.03204346 L16.1159783,8.03204346 C16.4009692,8.03204346 16.632,7.80101266 16.632,7.51602173 C16.632,7.2310308 16.4009692,7 16.1159783,7 L7.78802173,7 C7.5030308,7 7.272,7.2310308 7.272,7.51602173 C7.272,7.80101266 7.5030308,8.03204346 7.78802173,8.03204346 L11.304,8.03204346 L11.304,8.03204346 L11.304,17.7739187 C11.304,18.1053028 11.57264,18.3739428 11.9040241,18.3739428 C11.9200353,18.3739428 11.9360401,18.3733019 11.952,18.3720217 C12.3179691,18.3426661 12.6,18.0371067 12.6,17.6699621 Z",id:"T",fill:"#404040","fill-rule":"nonzero"})));case"RichText":return H().createElement("svg",{className:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},H().createElement("path",{d:"M821.428571 107.142857C860.877482 107.142857 892.857143 139.122518 892.857143 178.571429L892.857143 821.428571C892.857143 860.877482 860.877482 892.857143 821.428571 892.857143L178.571429 892.857143C139.122518 892.857143 107.142857 860.877482 107.142857 821.428571L107.142857 178.571429C107.142857 139.122518 139.122518 107.142857 178.571429 107.142857L821.428571 107.142857zM821.428571 142.857143L178.571429 142.857143C160.255863 142.857143 145.160459 156.644293 143.097419 174.406388L142.857143 178.571429L142.857143 821.428571C142.857143 839.744136 156.644293 854.839543 174.406388 856.902582L178.571429 857.142857L821.428571 857.142857C839.744136 857.142857 854.839543 843.355707 856.902582 825.593611L857.142857 821.428571L857.142857 178.571429C857.142857 160.255863 843.355707 145.160459 825.593611 143.097419L821.428571 142.857143zM742.093161 706.857143C751.955389 706.857143 759.950304 714.852057 759.950304 724.714286C759.950304 733.480711 753.633332 740.771729 745.303004 742.283725L742.093161 742.571429L267.857143 742.571429C257.994915 742.571429 250 734.576514 250 724.714286C250 715.947861 256.31697 708.656843 264.647299 707.144846L267.857143 706.857143L742.093161 706.857143zM742.093161 564C751.955389 564 759.950304 571.994914 759.950304 581.857143C759.950304 590.623568 753.633332 597.914586 745.303004 599.426582L742.093161 599.714286L563.521732 599.714286C553.659504 599.714286 545.664589 591.719371 545.664589 581.857143C545.664589 573.090718 551.981557 565.7997 560.311886 564.287704L563.521732 564L742.093161 564zM364.307446 267.857143C370.307446 267.857143 375.164589 269.214286 378.878875 271.928571C381.664589 273.964286 383.807446 276.522321 385.307446 279.602679L386.593161 282.857143L477.021732 545.571429C479.307446 552.428571 479.450304 558.214286 477.450304 562.928571C475.450304 567.642857 470.736018 570 463.307446 570C458.450304 570.285714 454.521732 568.928571 451.521732 565.928571C449.271732 563.678571 447.463696 560.90625 446.097625 557.611607L444.878875 554.142857L421.307446 488.571429L307.736017 488.571429L290.164589 537.857143C288.736017 541.857143 287.307446 545.714286 285.878874 549.428571C284.450303 553.142857 282.807446 556.571429 280.950303 559.714286C279.09316 562.857143 276.950303 565.357143 274.521731 567.214286C272.09316 569.071429 269.307446 570 266.164589 570C260.450303 570 256.021731 568.214286 252.878874 564.642857C250.184997 561.581632 249.800157 556.26385 251.724355 548.689504L252.878874 544.714286L342.878874 282.857143C344.307446 278.285714 346.807446 274.642857 350.378874 271.928571C353.950303 269.214286 358.593161 267.857143 364.307446 267.857143zM364.736018 311.571429L315.878874 458.571429L413.593161 458.571429L364.736018 311.571429zM742.093161 421.142857C751.955389 421.142857 759.950304 429.137771 759.950304 439C759.950304 447.766425 753.633332 455.057443 745.303004 456.569439L742.093161 456.857143L563.521732 456.857143C553.659504 456.857143 545.664589 448.862229 545.664589 439C545.664589 430.233575 551.981557 422.942557 560.311886 421.430561L563.521732 421.142857L742.093161 421.142857zM742.093161 278.285714C751.955389 278.285714 759.950304 286.28063 759.950304 296.142857C759.950304 304.909282 753.633332 312.200299 745.303004 313.712298L742.093161 314L563.521732 314C553.659504 314 545.664589 306.005085 545.664589 296.142857C545.664589 287.376433 551.981557 280.085415 560.311886 278.573417L563.521732 278.285714L742.093161 278.285714z"}));case"Image":return H().createElement("svg",{className:"icon",width:"200",height:"200",viewBox:"0 0 28 28",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},H().createElement("title",null,(0,W.getLangMsg)("printd.grid.key0027")),H().createElement("g",{id:"图片",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},H().createElement("path",{d:"M19.0635867,11.8647461 C20.8536504,11.8647461 22.8005418,13.7442816 24.9042609,17.5033525 L25.2664347,18.1661764 C25.5089081,18.6203335 25.7534299,19.0990397 26,19.6022949 L26,23 C26,24.1045695 25.1045695,25 24,25 L4,25 C2.8954305,25 2,24.1045695 2,23 L2,17.8845201 C4.66666667,15.29484 6.66666667,14 8,14 C10,14 10.8910175,16.4140625 12.9127329,16.4140625 C13.6708761,16.4140625 14.2999834,15.7743149 14.9497399,14.9746304 L15.6119234,14.1394043 C16.5187958,13.0020752 17.5510805,11.8647461 19.0635867,11.8647461 Z M19.0635867,12.8647461 C18.2328992,12.8647461 17.5590201,13.3424069 16.5714275,14.5433547 L15.7888437,15.5273213 L15.5490143,15.8193286 C15.5112838,15.8641349 15.474257,15.9074927 15.4373086,15.9501251 C14.6063027,16.9089708 13.8692177,17.4140625 12.9127329,17.4140625 C11.8290264,17.4140625 11.1560903,17.0708566 10.03841,16.1646156 L9.78761095,15.9582593 C8.89476212,15.2155435 8.5141519,15 8,15 C7.33313035,15 6.2739504,15.5469592 4.88524327,16.6528567 L4.43582359,17.0206811 L3.96493565,17.4257486 C3.88468972,17.4963682 3.80356758,17.568543 3.72157839,17.6422748 L3.21931187,18.1033643 L3,18.309 L3,23 C3,23.5128358 3.38604019,23.9355072 3.88337887,23.9932723 L4,24 L24,24 C24.5128358,24 24.9355072,23.6139598 24.9932723,23.1166211 L25,23 L25,19.838 L24.9249973,19.6846648 C22.6893998,15.2138574 20.6966562,12.9807295 19.1821547,12.8691495 L19.0635867,12.8647461 Z",id:"矩形",fill:"#979797","fill-rule":"nonzero"}),H().createElement("path",{d:"M24,3 C25.1045695,3 26,3.8954305 26,5 L26,23 C26,24.1045695 25.1045695,25 24,25 L4,25 C2.8954305,25 2,24.1045695 2,23 L2,5 C2,3.8954305 2.8954305,3 4,3 L24,3 Z M24,4 L4,4 C3.48716416,4 3.06449284,4.38604019 3.00672773,4.88337887 L3,5 L3,23 C3,23.5128358 3.38604019,23.9355072 3.88337887,23.9932723 L4,24 L24,24 C24.5128358,24 24.9355072,23.6139598 24.9932723,23.1166211 L25,23 L25,5 C25,4.48716416 24.6139598,4.06449284 24.1166211,4.00672773 L24,4 Z",id:"矩形备份",fill:"#404040","fill-rule":"nonzero"}),H().createElement("path",{d:"M8,6.5 C6.61928813,6.5 5.5,7.61928813 5.5,9 C5.5,10.3807119 6.61928813,11.5 8,11.5 C9.38071187,11.5 10.5,10.3807119 10.5,9 C10.5,7.61928813 9.38071187,6.5 8,6.5 Z M8,7.5 C8.82842712,7.5 9.5,8.17157288 9.5,9 C9.5,9.82842712 8.82842712,10.5 8,10.5 C7.17157288,10.5 6.5,9.82842712 6.5,9 C6.5,8.17157288 7.17157288,7.5 8,7.5 Z",id:"椭圆形",fill:"#404040","fill-rule":"nonzero"})));case"Barcode":return H().createElement("svg",{className:"icon",width:"200",height:"200",viewBox:"0 0 28 28",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},H().createElement("title",null,(0,W.getLangMsg)("printd.grid.key0028")),H().createElement("g",{id:"条形码",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},H().createElement("path",{d:"M2.45361328,18.5048828 C2.72975566,18.5048828 2.95361328,18.7287404 2.95361328,19.0048828 L2.95361328,19.0048828 L2.95361328,21.3505859 L2.96047986,21.4950459 C3.0331646,22.2556979 3.67391716,22.8505859 4.45361328,22.8505859 L4.45361328,22.8505859 L7,22.8505859 L7.08987563,22.8586416 C7.32312484,22.9009776 7.5,23.105126 7.5,23.3505859 C7.5,23.6267283 7.27614237,23.8505859 7,23.8505859 L7,23.8505859 L4.45361328,23.8505859 L4.28923759,23.8452683 C2.98514922,23.7606246 1.95361328,22.6760693 1.95361328,21.3505859 L1.95361328,21.3505859 L1.95361328,19.0048828 L1.96166895,18.9150072 C2.00400491,18.681758 2.20815339,18.5048828 2.45361328,18.5048828 Z M26,18.5048828 C26.2454599,18.5048828 26.4496084,18.681758 26.4919443,18.9150072 L26.5,19.0048828 L26.5,21.3505859 C26.5,22.6760693 25.4684641,23.7606246 24.1643757,23.8452683 L24,23.8505859 L21.4536133,23.8505859 C21.1774709,23.8505859 20.9536133,23.6267283 20.9536133,23.3505859 C20.9536133,23.105126 21.1304884,22.9009776 21.3637376,22.8586416 L21.4536133,22.8505859 L24,22.8505859 C24.7796961,22.8505859 25.4204487,22.2556979 25.4931334,21.4950459 L25.5,21.3505859 L25.5,19.0048828 C25.5,18.7287404 25.7238576,18.5048828 26,18.5048828 Z M7,4.50488281 C7.27614237,4.50488281 7.5,4.72874044 7.5,5.00488281 C7.5,5.2503427 7.32312484,5.45449118 7.08987563,5.49682714 L7,5.50488281 L4.45361328,5.50488281 C3.67391716,5.50488281 3.0331646,6.0997709 2.96047986,6.8604228 L2.95361328,7.00488281 L2.95361328,9.35058594 C2.95361328,9.62672831 2.72975566,9.85058594 2.45361328,9.85058594 C2.20815339,9.85058594 2.00400491,9.67371078 1.96166895,9.44046157 L1.95361328,9.35058594 L1.95361328,7.00488281 C1.95361328,5.67939941 2.98514922,4.59484414 4.28923759,4.51020049 L4.45361328,4.50488281 L7,4.50488281 Z M24,4.50488281 L24.1643757,4.51020049 C25.4684641,4.59484414 26.5,5.67939941 26.5,7.00488281 L26.5,7.00488281 L26.5,9.35058594 L26.4919443,9.44046157 C26.4496084,9.67371078 26.2454599,9.85058594 26,9.85058594 C25.7238576,9.85058594 25.5,9.62672831 25.5,9.35058594 L25.5,9.35058594 L25.5,7.00488281 L25.4931334,6.8604228 C25.4204487,6.0997709 24.7796961,5.50488281 24,5.50488281 L24,5.50488281 L21.4536133,5.50488281 L21.3637376,5.49682714 C21.1304884,5.45449118 20.9536133,5.2503427 20.9536133,5.00488281 C20.9536133,4.72874044 21.1774709,4.50488281 21.4536133,4.50488281 L21.4536133,4.50488281 L24,4.50488281 Z",id:"形状结合",fill:"#404040","fill-rule":"nonzero"}),H().createElement("path",{d:"M18,15 C18.2761424,15 18.5,15.2238576 18.5,15.5 L18.5,18.5 C18.5,18.7761424 18.2761424,19 18,19 C17.7238576,19 17.5,18.7761424 17.5,18.5 L17.5,15.5 C17.5,15.2238576 17.7238576,15 18,15 Z M6,13 C6.27614237,13 6.5,13.2238576 6.5,13.5 L6.5,18.5 C6.5,18.7761424 6.27614237,19 6,19 C5.72385763,19 5.5,18.7761424 5.5,18.5 L5.5,13.5 C5.5,13.2238576 5.72385763,13 6,13 Z M10,15 C10.2761424,15 10.5,15.2238576 10.5,15.5 L10.5,18.5 C10.5,18.7761424 10.2761424,19 10,19 C9.72385763,19 9.5,18.7761424 9.5,18.5 L9.5,15.5 C9.5,15.2238576 9.72385763,15 10,15 Z M22,17 C22.2761424,17 22.5,17.2238576 22.5,17.5 L22.5,18.5 C22.5,18.7761424 22.2761424,19 22,19 C21.7238576,19 21.5,18.7761424 21.5,18.5 L21.5,17.5 C21.5,17.2238576 21.7238576,17 22,17 Z M14,13 C14.2761424,13 14.5,13.2238576 14.5,13.5 L14.5,18.5 C14.5,18.7761424 14.2761424,19 14,19 C13.7238576,19 13.5,18.7761424 13.5,18.5 L13.5,13.5 C13.5,13.2238576 13.7238576,13 14,13 Z M22,9 C22.2761424,9 22.5,9.22385763 22.5,9.5 L22.5,15.5 C22.5,15.7761424 22.2761424,16 22,16 C21.7238576,16 21.5,15.7761424 21.5,15.5 L21.5,9.5 C21.5,9.22385763 21.7238576,9 22,9 Z M10,9 C10.2761424,9 10.5,9.22385763 10.5,9.5 L10.5,13.5 C10.5,13.7761424 10.2761424,14 10,14 C9.72385763,14 9.5,13.7761424 9.5,13.5 L9.5,9.5 C9.5,9.22385763 9.72385763,9 10,9 Z M18,9 C18.2761424,9 18.5,9.22385763 18.5,9.5 L18.5,13.5 C18.5,13.7761424 18.2761424,14 18,14 C17.7238576,14 17.5,13.7761424 17.5,13.5 L17.5,9.5 C17.5,9.22385763 17.7238576,9 18,9 Z M6,9 C6.27614237,9 6.5,9.22385763 6.5,9.5 L6.5,11.5 C6.5,11.7761424 6.27614237,12 6,12 C5.72385763,12 5.5,11.7761424 5.5,11.5 L5.5,9.5 C5.5,9.22385763 5.72385763,9 6,9 Z M14,9 C14.2761424,9 14.5,9.22385763 14.5,9.5 L14.5,11.5 C14.5,11.7761424 14.2761424,12 14,12 C13.7238576,12 13.5,11.7761424 13.5,11.5 L13.5,9.5 C13.5,9.22385763 13.7238576,9 14,9 Z",id:"形状结合",fill:"#404040","fill-rule":"nonzero"}),H().createElement("rect",{id:"矩形备份-21",x:"16.5",y:"18",width:"1",height:"1",rx:"0.5"})));case"QRCode":return H().createElement("svg",{className:"icon",width:"200",height:"200",viewBox:"0 0 28 28",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},H().createElement("title",null,(0,W.getLangMsg)("printd.grid.key0029")),H().createElement("g",{id:"二维码",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},H().createElement("path",{d:"M11,3 C12.1045695,3 13,3.8954305 13,5 L13,11 C13,12.1045695 12.1045695,13 11,13 L5,13 C3.8954305,13 3,12.1045695 3,11 L3,5 C3,3.8954305 3.8954305,3 5,3 L11,3 Z M11,4 L5,4 C4.48716416,4 4.06449284,4.38604019 4.00672773,4.88337887 L4,5 L4,11 C4,11.5128358 4.38604019,11.9355072 4.88337887,11.9932723 L5,12 L11,12 C11.5128358,12 11.9355072,11.6139598 11.9932723,11.1166211 L12,11 L12,5 C12,4.48716416 11.6139598,4.06449284 11.1166211,4.00672773 L11,4 Z",id:"矩形",fill:"#404040","fill-rule":"nonzero"}),H().createElement("path",{d:"M11,15 C12.1045695,15 13,15.8954305 13,17 L13,23 C13,24.1045695 12.1045695,25 11,25 L5,25 C3.8954305,25 3,24.1045695 3,23 L3,17 C3,15.8954305 3.8954305,15 5,15 L11,15 Z M11,16 L5,16 C4.48716416,16 4.06449284,16.3860402 4.00672773,16.8833789 L4,17 L4,23 C4,23.5128358 4.38604019,23.9355072 4.88337887,23.9932723 L5,24 L11,24 C11.5128358,24 11.9355072,23.6139598 11.9932723,23.1166211 L12,23 L12,17 C12,16.4871642 11.6139598,16.0644928 11.1166211,16.0067277 L11,16 Z",id:"矩形备份-2",fill:"#404040","fill-rule":"nonzero"}),H().createElement("path",{d:"M23,3 C24.1045695,3 25,3.8954305 25,5 L25,11 C25,12.1045695 24.1045695,13 23,13 L17,13 C15.8954305,13 15,12.1045695 15,11 L15,5 C15,3.8954305 15.8954305,3 17,3 L23,3 Z M23,4 L17,4 C16.4871642,4 16.0644928,4.38604019 16.0067277,4.88337887 L16,5 L16,11 C16,11.5128358 16.3860402,11.9355072 16.8833789,11.9932723 L17,12 L23,12 C23.5128358,12 23.9355072,11.6139598 23.9932723,11.1166211 L24,11 L24,5 C24,4.48716416 23.6139598,4.06449284 23.1166211,4.00672773 L23,4 Z",id:"矩形备份",fill:"#404040","fill-rule":"nonzero"}),H().createElement("path",{d:"M9,5.5 L7,5.5 C6.17157288,5.5 5.5,6.17157288 5.5,7 L5.5,9 C5.5,9.82842712 6.17157288,10.5 7,10.5 L9,10.5 C9.82842712,10.5 10.5,9.82842712 10.5,9 L10.5,7 C10.5,6.17157288 9.82842712,5.5 9,5.5 Z M7,6.5 L9,6.5 C9.27614237,6.5 9.5,6.72385763 9.5,7 L9.5,9 C9.5,9.27614237 9.27614237,9.5 9,9.5 L7,9.5 C6.72385763,9.5 6.5,9.27614237 6.5,9 L6.5,7 C6.5,6.72385763 6.72385763,6.5 7,6.5 Z",id:"矩形",fill:"#979797","fill-rule":"nonzero"}),H().createElement("path",{d:"M21,5.5 L19,5.5 C18.1715729,5.5 17.5,6.17157288 17.5,7 L17.5,9 C17.5,9.82842712 18.1715729,10.5 19,10.5 L21,10.5 C21.8284271,10.5 22.5,9.82842712 22.5,9 L22.5,7 C22.5,6.17157288 21.8284271,5.5 21,5.5 Z M19,6.5 L21,6.5 C21.2761424,6.5 21.5,6.72385763 21.5,7 L21.5,9 C21.5,9.27614237 21.2761424,9.5 21,9.5 L19,9.5 C18.7238576,9.5 18.5,9.27614237 18.5,9 L18.5,7 C18.5,6.72385763 18.7238576,6.5 19,6.5 Z",id:"矩形备份-3",fill:"#979797","fill-rule":"nonzero"}),H().createElement("path",{d:"M9,17.5 L7,17.5 C6.17157288,17.5 5.5,18.1715729 5.5,19 L5.5,21 C5.5,21.8284271 6.17157288,22.5 7,22.5 L9,22.5 C9.82842712,22.5 10.5,21.8284271 10.5,21 L10.5,19 C10.5,18.1715729 9.82842712,17.5 9,17.5 Z M7,18.5 L9,18.5 C9.27614237,18.5 9.5,18.7238576 9.5,19 L9.5,21 C9.5,21.2761424 9.27614237,21.5 9,21.5 L7,21.5 C6.72385763,21.5 6.5,21.2761424 6.5,21 L6.5,19 C6.5,18.7238576 6.72385763,18.5 7,18.5 Z",id:"矩形备份-4",fill:"#979797","fill-rule":"nonzero"}),H().createElement("path",{d:"M15.5,18 C15.7761424,18 16,18.2238576 16,18.5 L16,24.5 C16,24.7761424 15.7761424,25 15.5,25 C15.2238576,25 15,24.7761424 15,24.5 L15,18.5 C15,18.2238576 15.2238576,18 15.5,18 Z M18.5,19 C18.7761424,19 19,19.2238576 19,19.5 L19,24.5 C19,24.7761424 18.7761424,25 18.5,25 C18.2238576,25 18,24.7761424 18,24.5 L18,19.5 C18,19.2238576 18.2238576,19 18.5,19 Z M21.5,21 C21.7761424,21 22,21.2238576 22,21.5 L22,24.5 C22,24.7761424 21.7761424,25 21.5,25 C21.2238576,25 21,24.7761424 21,24.5 L21,21.5 C21,21.2238576 21.2238576,21 21.5,21 Z M24.5,19 C24.7761424,19 25,19.2238576 25,19.5 L25,24.5 C25,24.7761424 24.7761424,25 24.5,25 C24.2238576,25 24,24.7761424 24,24.5 L24,19.5 C24,19.2238576 24.2238576,19 24.5,19 Z M21.5,15 C21.7761424,15 22,15.2238576 22,15.5 L22,19.5 C22,19.7761424 21.7761424,20 21.5,20 C21.2238576,20 21,19.7761424 21,19.5 L21,15.5 C21,15.2238576 21.2238576,15 21.5,15 Z M18.5,15 C18.7761424,15 19,15.2238576 19,15.5 L19,17.5 C19,17.7761424 18.7761424,18 18.5,18 C18.2238576,18 18,17.7761424 18,17.5 L18,15.5 C18,15.2238576 18.2238576,15 18.5,15 Z M24.5,15 C24.7761424,15 25,15.2238576 25,15.5 L25,17.5 C25,17.7761424 24.7761424,18 24.5,18 C24.2238576,18 24,17.7761424 24,17.5 L24,15.5 C24,15.2238576 24.2238576,15 24.5,15 Z M15.5,15 C15.7761424,15 16,15.2238576 16,15.5 L16,16.5 C16,16.7761424 15.7761424,17 15.5,17 C15.2238576,17 15,16.7761424 15,16.5 L15,15.5 C15,15.2238576 15.2238576,15 15.5,15 Z",id:"形状结合",fill:"#404040","fill-rule":"nonzero"})));case"Footer":return H().createElement("svg",{className:"icon",width:"200",height:"200",viewBox:"0 0 28 28",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},H().createElement("title",null,(0,W.getLangMsg)("printd.grid.key0030")),H().createElement("g",{id:"页脚",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},H().createElement("g",{id:"编组",transform:"translate(4.000000, 1.967985)","fill-rule":"nonzero"},H().createElement("path",{d:"M1,19.532015 L2.70000005,19.532015 L2.70000005,18.532015 L1,18.532015 L1,19.532015 Z M4.4000001,19.532015 L6.10000014,19.532015 L6.10000014,18.532015 L4.4000001,18.532015 L4.4000001,19.532015 Z M7.80000019,19.532015 L9.50000024,19.532015 L9.50000024,18.532015 L7.80000019,18.532015 L7.80000019,19.532015 Z M11.2000003,19.532015 L12.9000003,19.532015 L12.9000003,18.532015 L11.2000003,18.532015 L11.2000003,19.532015 Z M14.6000004,19.532015 L16.3000004,19.532015 L16.3000004,18.532015 L14.6000004,18.532015 L14.6000004,19.532015 Z M18.0000005,19.532015 L19.5361328,19.532015 L19.5361328,18.532015 L18.0000005,18.532015 L18.0000005,19.532015 Z",id:"路径-20备份-3",fill:"#404040"}),H().createElement("path",{d:"M12.947418,0 L19.9931943,8.10498047 L19.938,8.152 L20,8.15262042 L20,22.032015 C20,23.1365845 19.1045695,24.032015 18,24.032015 L2,24.032015 C0.8954305,24.032015 0,23.1365845 0,22.032015 L0,2.03201496 C0,0.927445456 0.8954305,0.0320149557 2,0.0320149557 L12.91,0.032 L12.947418,0 Z M11.958,1.03201496 L2,1.03201496 C1.48716416,1.03201496 1.06449284,1.41805515 1.00672773,1.91539383 L1,2.03201496 L1,22.032015 C1,22.5448508 1.38604019,22.9675221 1.88337887,23.0252872 L2,23.032015 L18,23.032015 C18.5128358,23.032015 18.9355072,22.6459748 18.9932723,22.1486361 L19,22.032015 L19,9.15201496 L14.9587268,9.15262042 C13.3610459,9.15262042 12.0550659,7.90370046 11.9638195,6.32889321 L11.9587268,6.15262042 L11.958,1.03201496 Z M18.709,8.152 L12.958,1.537 L12.9587268,6.15262042 C12.9587268,7.25718992 13.8541573,8.15262042 14.9587268,8.15262042 L18.709,8.152 Z",id:"形状结合",fill:"#404040"}),H().createElement("rect",{id:"矩形备份-24",fill:"#979797",transform:"translate(10.000000, 15.532015) scale(1, -1) rotate(-180.000000) translate(-10.000000, -15.532015) ",x:"5",y:"15.032015",width:"10",height:"1",rx:"0.5"}),H().createElement("rect",{id:"矩形备份-25",fill:"#979797",transform:"translate(10.000000, 11.532015) scale(1, -1) rotate(-180.000000) translate(-10.000000, -11.532015) ",x:"5",y:"11.032015",width:"10",height:"1",rx:"0.5"}))));case"DataGrid":return H().createElement("svg",{className:"icon",width:"200",height:"200",viewBox:"0 0 28 28",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},H().createElement("title",null,(0,W.getLangMsg)("printd.grid.key0031")),H().createElement("g",{id:"数据表格",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},H().createElement("g",{id:"编组备份-5",transform:"translate(3.000000, 3.000000)"},H().createElement("path",{d:"M7.5,7.5 L7.5,12 L14.5,11.999 L14.5,7.5 L15.5,7.5 L15.5,11.999 L21,12 L21,13 L15.5,12.999 L15.5,16.999 L21,17 L21,18 L15.5,17.999 L15.5,21.5 L14.5,21.5 L14.5,17.999 L7.5,18 L7.5,21.5 L6.5,21.5 L6.5,18 L1,18 L1,17 L6.5,17 L6.5,13 L1,13 L1,12 L6.5,12 L6.5,7.5 L7.5,7.5 Z M14.5,12.999 L7.5,13 L7.5,17 L14.5,16.999 L14.5,12.999 Z",id:"形状结合",fill:"#979797"}),H().createElement("path",{d:"M20,0 C21.1045695,0 22,0.8954305 22,2 L22,20 C22,21.1045695 21.1045695,22 20,22 L2,22 C0.8954305,22 0,21.1045695 0,20 L0,2 C0,0.8954305 0.8954305,0 2,0 L20,0 Z M1,8 L1,20 C1,20.5128358 1.38604019,20.9355072 1.88337887,20.9932723 L2,21 L20,21 C20.5128358,21 20.9355072,20.6139598 20.9932723,20.1166211 L21,20 L21,8 L1,8 Z M1,7 L21,7 L21,2 C21,1.48716416 20.6139598,1.06449284 20.1166211,1.00672773 L20,1 L2,1 C1.48716416,1 1.06449284,1.38604019 1.00672773,1.88337887 L1,2 L1,7 Z",id:"形状结合",fill:"#404040","fill-rule":"nonzero"}))));case"SubDateGrid":return H().createElement("svg",{className:"icon",width:"200",height:"200",viewBox:"0 0 28 28",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},H().createElement("title",null,(0,W.getLangMsg)("printd.grid.key0032")),H().createElement("g",{id:"子数据表格",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},H().createElement("g",{id:"编组",transform:"translate(3.000000, 3.000000)","fill-rule":"nonzero"},H().createElement("path",{d:"M20,0 C21.1045695,0 22,0.8954305 22,2 L22,20 C22,21.1045695 21.1045695,22 20,22 L2,22 C0.8954305,22 0,21.1045695 0,20 L0,2 C0,0.8954305 0.8954305,0 2,0 L20,0 Z M20,1 L2,1 C1.48716416,1 1.06449284,1.38604019 1.00672773,1.88337887 L1,2 L1,20 C1,20.5128358 1.38604019,20.9355072 1.88337887,20.9932723 L2,21 L20,21 C20.5128358,21 20.9355072,20.6139598 20.9932723,20.1166211 L21,20 L21,2 C21,1.48716416 20.6139598,1.06449284 20.1166211,1.00672773 L20,1 Z",id:"矩形备份",fill:"#404040"}),H().createElement("path",{d:"M18,4.5 L4,4.5 C3.17157288,4.5 2.5,5.17157288 2.5,6 L2.5,8 C2.5,8.82842712 3.17157288,9.5 4,9.5 L18,9.5 C18.8284271,9.5 19.5,8.82842712 19.5,8 L19.5,6 C19.5,5.17157288 18.8284271,4.5 18,4.5 Z M4,5.5 L18,5.5 C18.2761424,5.5 18.5,5.72385763 18.5,6 L18.5,8 C18.5,8.27614237 18.2761424,8.5 18,8.5 L4,8.5 C3.72385763,8.5 3.5,8.27614237 3.5,8 L3.5,6 C3.5,5.72385763 3.72385763,5.5 4,5.5 Z",id:"矩形",fill:"#979797"}),H().createElement("path",{d:"M7,12.5 C7.82842712,12.5 8.5,13.1715729 8.5,14 L8.5,14 L8.5,17 C8.5,17.8284271 7.82842712,18.5 7,18.5 L7,18.5 L4,18.5 C3.17157288,18.5 2.5,17.8284271 2.5,17 L2.5,17 L2.5,14 C2.5,13.1715729 3.17157288,12.5 4,12.5 L4,12.5 Z M18.5,17 C18.7761424,17 19,17.2238576 19,17.5 C19,17.7761424 18.7761424,18 18.5,18 L18.5,18 L11.5,18 C11.2238576,18 11,17.7761424 11,17.5 C11,17.2238576 11.2238576,17 11.5,17 L11.5,17 Z M7,13.5 L4,13.5 C3.72385763,13.5 3.5,13.7238576 3.5,14 L3.5,14 L3.5,17 C3.5,17.2761424 3.72385763,17.5 4,17.5 L4,17.5 L7,17.5 C7.27614237,17.5 7.5,17.2761424 7.5,17 L7.5,17 L7.5,14 C7.5,13.7238576 7.27614237,13.5 7,13.5 L7,13.5 Z M18.5,13 C18.7761424,13 19,13.2238576 19,13.5 C19,13.7761424 18.7761424,14 18.5,14 L18.5,14 L11.5,14 C11.2238576,14 11,13.7761424 11,13.5 C11,13.2238576 11.2238576,13 11.5,13 L11.5,13 Z",id:"形状结合",fill:"#404040"}))));case"Header":return H().createElement("svg",{className:"icon",width:"200",height:"200",viewBox:"0 0 28 28",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},H().createElement("title",null,(0,W.getLangMsg)("printd.grid.key0033")),H().createElement("g",{id:"页眉",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},H().createElement("path",{d:"M16.947418,1.96798504 L23.9931943,10.0729655 L23.938,10.119985 L24,10.1206055 L24,24 C24,25.1045695 23.1045695,26 22,26 L6,26 C4.8954305,26 4,25.1045695 4,24 L4,4 C4,2.8954305 4.8954305,2 6,2 L16.91,1.99998504 L16.947418,1.96798504 Z M15.958,3 L6,3 C5.48716416,3 5.06449284,3.38604019 5.00672773,3.88337887 L5,4 L5,24 C5,24.5128358 5.38604019,24.9355072 5.88337887,24.9932723 L6,25 L22,25 C22.5128358,25 22.9355072,24.6139598 22.9932723,24.1166211 L23,24 L23,11.12 L18.9587268,11.1206055 C17.3610459,11.1206055 16.0550659,9.8716855 15.9638195,8.29687826 L15.9587268,8.12060547 L15.958,3 Z M22.709,10.119985 L16.958,3.50498504 L16.9587268,8.12060547 C16.9587268,9.22517497 17.8541573,10.1206055 18.9587268,10.1206055 L22.709,10.119985 Z",id:"形状结合",fill:"#404040","fill-rule":"nonzero"}),H().createElement("rect",{id:"矩形备份-9",fill:"#979797",transform:"translate(14.000000, 17.500000) scale(1, -1) rotate(-180.000000) translate(-14.000000, -17.500000) ",x:"9",y:"17",width:"10",height:"1",rx:"0.5"}),H().createElement("rect",{id:"矩形备份-10",fill:"#979797",transform:"translate(14.000000, 13.500000) scale(1, -1) rotate(-180.000000) translate(-14.000000, -13.500000) ",x:"9",y:"13",width:"10",height:"1",rx:"0.5"}),H().createElement("path",{d:"M5,7.5 L6.5,7.5 L6.5,6.5 L5,6.5 L5,7.5 Z M8,7.5 L9.5,7.5 L9.5,6.5 L8,6.5 L8,7.5 Z M11,7.5 L12.5,7.5 L12.5,6.5 L11,6.5 L11,7.5 Z M14,7.5 L15.5,7.5 L15.5,6.5 L14,6.5 L14,7.5 Z",id:"路径-20",fill:"#404040","fill-rule":"nonzero"})));case"LayoutGrid":return H().createElement("svg",{className:"icon",width:"200",height:"200",viewBox:"0 0 28 28",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},H().createElement("title",null,(0,W.getLangMsg)("printd.grid.key0034")),H().createElement("g",{id:"网格",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},H().createElement("rect",{id:"矩形",stroke:"#404040",x:"3.5",y:"3.5",width:"21",height:"21",rx:"2"}),H().createElement("path",{d:"M11,4 L11,10 L24,10 L24,11 L11,11 L11,24 L10,24 L10,11 L4,11 L4,10 L10,10 L10,4 L11,4 Z",id:"形状结合",fill:"#404040"}),H().createElement("path",{d:"M11,4 L11,10 L24,10 L24,11 L11,11 L11,24 L10,24 L10,11 L4,11 L4,10 L10,10 L10,4 L11,4 Z",id:"形状结合",fill:"#979797",transform:"translate(14.000000, 14.000000) scale(-1, -1) translate(-14.000000, -14.000000) "})));case"CardGrid":return H().createElement("svg",{className:"icon",width:"28px",height:"28px",viewBox:"0 0 28 28",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},H().createElement("title",null,(0,W.getLangMsg)("printd.grid.key0112")),H().createElement("g",{id:"布局",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},H().createElement("g",{transform:"translate(4.000000, 4.000000)",fill:"#404040","fill-rule":"nonzero",id:"形状结合"},H().createElement("path",{d:"M19,14 L13,14 C11.8954305,14 11,14.8954305 11,16 L11,19 C11,20.1045695 11.8954305,21 13,21 L19,21 C20.1045695,21 21,20.1045695 21,19 L21,16 C21,14.8954305 20.1045695,14 19,14 Z M19,15 C19.5522847,15 20,15.4477153 20,16 L20,19 C20,19.5522847 19.5522847,20 19,20 L13,20 C12.4477153,20 12,19.5522847 12,19 L12,16 C12,15.4477153 12.4477153,15 13,15 L19,15 Z M7,-1 L1,-1 C-0.1045695,-1 -1,-0.1045695 -1,1 L-1,7 C-1,8.1045695 -0.1045695,9 1,9 L7,9 C8.1045695,9 9,8.1045695 9,7 L9,1 C9,-0.1045695 8.1045695,-1 7,-1 Z M7,0 C7.55228475,0 8,0.44771525 8,1 L8,7 C8,7.55228475 7.55228475,8 7,8 L1,8 C0.44771525,8 0,7.55228475 0,7 L0,1 C0,0.44771525 0.44771525,0 1,0 L7,0 Z M19,-1 L13,-1 C11.8954305,-1 11,-0.1045695 11,1 L11,10 C11,11.1045695 11.8954305,12 13,12 L19,12 C20.1045695,12 21,11.1045695 21,10 L21,1 C21,-0.1045695 20.1045695,-1 19,-1 Z M19,0 C19.5522847,0 20,0.44771525 20,1 L20,10 C20,10.5522847 19.5522847,11 19,11 L13,11 C12.4477153,11 12,10.5522847 12,10 L12,1 C12,0.44771525 12.4477153,0 13,0 L19,0 Z M7,11 L1,11 C-0.1045695,11 -1,11.8954305 -1,13 L-1,19 C-1,20.1045695 -0.1045695,21 1,21 L7,21 C8.1045695,21 9,20.1045695 9,19 L9,13 C9,11.8954305 8.1045695,11 7,11 Z M7,12 C7.55228475,12 8,12.4477153 8,13 L8,19 C8,19.5522847 7.55228475,20 7,20 L1,20 C0.44771525,20 0,19.5522847 0,19 L0,13 C0,12.4477153 0.44771525,12 1,12 L7,12 Z"}))));case"Line":return H().createElement("svg",{className:"icon",width:"28px",height:"28px",viewBox:"0 0 28 28",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},H().createElement("title",null,"直线"),H().createElement("g",{id:"直线",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},H().createElement("path",{d:"M6.5,15.5046212 C5.67157288,15.5046212 5,14.8330483 5,14.0046212 C5,13.1761941 5.67157288,12.5046212 6.5,12.5046212 C7.15321869,12.5046212 7.70891488,12.9221647 7.91475048,13.5049137 L20.0852495,13.5049137 C20.2910851,12.9221647 20.8467813,12.5046212 21.5,12.5046212 C22.3284271,12.5046212 23,13.1761941 23,14.0046212 C23,14.8330483 22.3284271,15.5046212 21.5,15.5046212 C20.8471533,15.5046212 20.2917181,15.0875531 20.0856015,14.5053242 L7.91439849,14.5053242 C7.70828193,15.0875531 7.1528467,15.5046212 6.5,15.5046212 Z M21.5,13.5046212 C21.2238576,13.5046212 21,13.7284788 21,14.0046212 C21,14.2807636 21.2238576,14.5046212 21.5,14.5046212 C21.7761424,14.5046212 22,14.2807636 22,14.0046212 C22,13.7284788 21.7761424,13.5046212 21.5,13.5046212 Z M6.5,13.5046212 C6.22385763,13.5046212 6,13.7284788 6,14.0046212 C6,14.2807636 6.22385763,14.5046212 6.5,14.5046212 C6.77614237,14.5046212 7,14.2807636 7,14.0046212 C7,13.7284788 6.77614237,13.5046212 6.5,13.5046212 Z",id:"形状结合",fill:"#404040","fill-rule":"nonzero",transform:"translate(14, 14.0046) rotate(-45) translate(-14, -14.0046)"}),H().createElement("path",{d:"M23,3 C24.1045695,3 25,3.8954305 25,5 L25,23 C25,24.1045695 24.1045695,25 23,25 L5,25 C3.8954305,25 3,24.1045695 3,23 L3,5 C3,3.8954305 3.8954305,3 5,3 L23,3 Z M23,4 L5,4 C4.48716416,4 4.06449284,4.38604019 4.00672773,4.88337887 L4,5 L4,23 C4,23.5128358 4.38604019,23.9355072 4.88337887,23.9932723 L5,24 L23,24 C23.5128358,24 23.9355072,23.6139598 23.9932723,23.1166211 L24,23 L24,5 C24,4.48716416 23.6139598,4.06449284 23.1166211,4.00672773 L23,4 Z",id:"矩形备份",fill:"#404040","fill-rule":"nonzero"})));default:return H().createElement(Cf,null)}},Ef=function(e,t,n){zn()(e)?U()(e).call(e,(function(e){e[t]=n})):e[t]=n};function Df(e,t){return function(n){var r=n.type,a=n.parentId,o=n.transferData,i=n.cellData,l=void 0===i?[]:i,u=n.parentItem,c=e({type:r,parentId:a,transferData:o,parentItem:u}),d=t({type:r});if("DataGrid"===d.Id||d.Id===gt){var s=d.Default,f=0,g=[],h=[],v=[];c.items=_.flatten(N()(s).call(s,(function(t){var n,r,a,i=t.Id,u=t.Count,d=t.CellType,s=t.Name,p=(0,Wn.c)(t,hf),m={};o&&o.width&&(m={columnWidth:qs(o.width/l.length,1)});var y=_.isEmpty(p)?p:P()(n=C()(p)).call(n,(function(e,t){return e[_.camelCase(t)]=p[t],e}),{}),E=0,D=N()(r=Js()(a=new Array("DataRow"!==i?l.length:u)).call(a,0)).call(r,(function(t,n,r){n%r.length==r.length-1&&(E||(E=Os()((o.width-qs(o.width/r.length,1)*(r.length-1)).toFixed(1))),m={columnWidth:E});var a=l[n]||{},u=a.viewText,v=void 0===u?"":u,p={Detail:a,Normal:{bindText:v?v.replace(/=\$(.+)$/g,"$1"):""}};return e({type:i,parentId:c.id,transferData:"DataCell"===i?mf(mf(mf(mf({rowId:g[f].id,columnId:h[n].id,width:h[n].columnWidth,height:g[f].rowHeight,cellType:d},y),s?{name:s}:{}),p[d]||{}),m):mf(mf(mf({},y),s?{name:s}:{}),"DataColumn"===i?m:{})})}));return"DataRow"===i?g.push.apply(g,(0,kn.c)(D)):"DataColumn"===i&&h.push.apply(h,(0,kn.c)(D)),"DataCell"===i&&(f++,v.push.apply(v,(0,kn.c)(D))),D})))}return o&&(0,ie.c)(c,o),null!=o&&o.width&&(c.width=o.width),kf(c)}}function Af(e,t){return function(n){var r=n.type,a=n.parentId,o=n.transferData,i=n.gridInfo,l=void 0===i?{}:i,u=n.parentItem,c=e({type:r,parentId:a,transferData:o,parentItem:u}),d=t({type:r}),s=l.row,f=void 0===s?1:s,g=l.column,h=void 0===g?1:g;if(f=tu()(f),h=tu()(h),"LayoutGrid"===d.Id||"CardGrid"===d.Id){var v=d.Default,p=[],m=[];c.items=_.flatten(N()(v).call(v,(function(t){var n,r,a,i=t.Id,l=(t.Count,t.CellType),u=t.Name,d=(0,Wn.c)(t,vf),s={};o&&o.width&&(s={columnWidth:qs(o.width/h,1)});var g=_.isEmpty(d)?d:P()(n=C()(d)).call(n,(function(e,t){return e[_.camelCase(t)]=d[t],e}),{}),v=0,y=N()(r=Js()(a=new Array(function(e){return"DataRow"===e?f:"DataColumn"===e?h:"LayoutCell"===e?f*h:void 0}(i))).call(a,0)).call(r,(function(t,n,r){return n%r.length==r.length-1&&(v||(v=Os()((o.width-qs(o.width/h,1)*(h-1)).toFixed(1))),s={columnWidth:v}),e({type:i,parentId:c.id,transferData:"LayoutCell"===i?mf(mf({rowId:p[Math.floor(n/h)].id,columnId:m[n%h].id,width:m[n%h].columnWidth,height:p[Math.floor(n/h)].rowHeight,cellType:l},g),s):mf(mf(mf({},g),u?{name:u}:{}),"DataColumn"===i?s:{})})}));return"DataRow"===i?p.push.apply(p,(0,kn.c)(y)):"DataColumn"===i&&m.push.apply(m,(0,kn.c)(y)),y})))}return o&&(0,ie.c)(c,o),null!=o&&o.width&&(c.width=o.width),kf(c)}}function kf(e){if(e.items){var t,n=e.items;return e.items=void 0,lg(e,n,!0),Z()(t=[e]).call(t,(0,kn.c)(n))}return e}function wf(e,t,n){t.findControlByCondition((function(t){return t.parentId===e})).length||t.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[e,n]]))}var bf={Normal:["Sys","Head","Import","Main","Entry"]};function xf(e,t,n,r,a,o){var i,l,u=e.isDataGridDs,c=e.dsType,d=e.isSubDataGridDs,s=(e.dataSource,e.bindField),f=t.statType,g=t.cellType,h=t.parentId,v=t.id,p=r.initAttr,m=r.title,C=bf[g],y=n.findControl(h),E=y.type;y.parentControl;if("Sys"===c&&!Bn()(i=["=getGroupRowNumber()","=getRowNumber()"]).call(i,s))return a((0,W.getLangMsg)("printd.grid.key0113"));var D,A=cr(n,v,"DataGrid")||cr(n,v,"SubDataGrid");if(!Sr(o,A))return a((0,W.getLangMsg)("printd.grid.key0035"));if("Normal"===g&&!Bn()(C).call(C,c))return a((0,W.getLangMsg)("printd.grid.key0036"));"Normal"!==g&&"Statistic"!==g||n.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[v,mf(mf({},p),{},{viewText:"Statistic"===g&&"noStat"!==f?Z()(D="=".concat(f,"(")).call(D,m,")"):"=$".concat(m)})]]));if(Bn()(l=["Detail","Group"]).call(l,g)){var k,w=n.findControl(h).dataSource,b=["Entry","ReportEntry","Subentry","Workflow","Report","Approveline"];if("DataGrid"===E&&!(Bn()(k=["=getGroupRowNumber()","=getRowNumber()"]).call(k,p.bindField)||w&&(p.dataSource===w||!Bn()(b).call(b,p.dsType))||!w&&u))return a((0,W.getLangMsg)("printd.grid.key0037"));if("SubDataGrid"===E&&!("=getRowNumber()"===p.bindField||w&&p.dataSource===w||!w&&d))return a((0,W.getLangMsg)("printd.grid.key0038"));var x=[[v,mf(mf({},p),{},{viewText:"=$".concat(m)})]];w||x.push([h,{dataSource:p.dataSource,dataSourceText:p.dataSourceText}]),n.batchUpdateControlPropertyValues((0,W.createUpdateAction)(x))}}var Sf=function(e,t){var n=e.y,r=e.height,a=e.subGridId,o=e.tableTailId;if(Pf(e)&&null!=a&&a.length){var i=t.findControl(a[0]),l=i.subGridDirection,u=i.height;if("bottom"===l)return qs(n+r+u,1);if("right"===l)return qs(n+Math.max(r,u),1)}if((Pf(e)||jf(e))&&o)return qs(n+r+t.findControl(o).height,1);if(Jf(e)){var c=e.subGridDirection,d=e.parentGridId;if("right"===c){var s=t.findControl(d).height;return qs(n+Math.max(r,s),1)}}return qs(n+r,1)},If=function(e,t){var n=e.y;if(Jf(e)){var r=e.subGridDirection,a=e.parentGridId;if("bottom"===r)return qs(n-t.findControl(a).height,1)}return n},Bf=function(e,t){var n,r,a=N()(n=Js()(r=Array(t.length)).call(r,null)).call(n,(function(){return[]}));return e.mapping((function(e){U()(t).call(t,(function(t,n){t(e)&&a[n].push(e)}))})),a};function Mf(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lf(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?U()(n=Mf(Object(a),!0)).call(n,(function(t){(0,L.c)(e,t,a[t])})):b()?S()(e,b()(a)):U()(r=Mf(Object(a))).call(r,(function(t){B()(e,t,k()(a,t))}))}return e}function Rf(e,t){return P()(ut).call(ut,(function(n,r){return t&&t(n,r)||(n[r]=e),n}),{})}var Ff=function(e,t,n,r){var a,o,i=Bn()(a=["dashed","dotted"]).call(a,r)?.5:n===Gt?2:r,l=Bn()(o=["dashed","dotted"]).call(o,r)?r:"solid";return Tf(e,n,t,i,l)},Tf=function(e,t,n,r,a){var o=Y().cloneDeep(e);switch(t){case Qt:o.width.left=0,o.width.right=0,o.width.top=0,o.width.bottom=0,o.width.inner=0;break;case Pt:o.width.left=r,o.color.left=n,o.style.left=a;break;case jt:o.width.right=r,o.color.right=n,o.style.right=a;break;case Jt:o.color.top=n,o.width.top=r,o.style.top=a;break;case Ot:o.color.bottom=n,o.width.bottom=r,o.style.bottom=a;break;case Tt:o.color.inner=n,o.width.inner=r,o.style.inner=a;break;default:o.width=P()(ut).call(ut,(function(e,n){return"inner"===n&&t!==Zt||(e[n]=r),e}),{}),o.color=P()(ut).call(ut,(function(e,r){return"inner"===r&&t!==Zt||(e[r]=n),e}),{}),o.style=P()(ut).call(ut,(function(e,n){return"inner"===n&&t!==Zt||(e[n]=a),e}),{})}return o},Nf=function(e,t,n,r,a,o,i){var l=Y().cloneDeep(e);if(n&&!i&&(l.width=Rf(n||.5,(function(e,t){if(!l.width[t])return e[t]=l.width[t],!0}))),r&&(l.color=Rf(r)),a&&(l.style=Rf(a)),!t)return l;var u=Y().isUndefined(n)?l.width.top||l.width.left||l.width.right||l.width.bottom||l.width.inner||.5:n,c=Y().isUndefined(a)?l.style.top||l.style.left||l.style.right||l.style.bottom||l.style.inner:a,d=Y().isUndefined(r)?l.color.top||l.color.left||l.color.right||l.color.bottom||l.color.inner:r;switch(t){case Qt:o?(l.width.left=0,l.width.right=0,l.width.top=0,l.width.bottom=0,void 0===l.width.inner&&(l.width.inner=0)):l.width=P()(ut).call(ut,(function(e,t){return e[t]=0,e}),{});break;case Pt:var s=u,f=d,g=c;l.width.left=s,l.color.left=f,l.style.left=g;break;case jt:var h=u,v=d,p=c;l.color.right=v,l.width.right=h,l.style.right=p;break;case Jt:var m=u,C=d,y=c;l.color.top=C,l.width.top=m,l.style.top=y;break;case Ot:var E=u,D=d,A=c;l.color.bottom=D,l.width.bottom=E,l.style.bottom=A;break;case Zt:var k=u,w=d,b=c;l.width=P()(ut).call(ut,(function(e,t){return e[t]=k,e}),{}),l.color=P()(ut).call(ut,(function(e,t){return e[t]=w,e}),{}),l.style=P()(ct).call(ct,(function(e,t){return e[t]=b,e}),{});break;case Tt:var x=u,S=d,I=c;l.color.inner=S,l.width.inner=x,l.style.inner=I;break;default:var B=u,M=d,L=c;l.width=(0,ie.c)(l.width,P()(ct).call(ct,(function(e,t){return e[t]=B,e}),{})),l.color=(0,ie.c)(l.color,P()(ct).call(ct,(function(e,t){return e[t]=M,e}),{})),l.style=(0,ie.c)(l.style,P()(ct).call(ct,(function(e,t){return e[t]=L,e}),{}))}return l},Gf=function e(t,n){var r=Y().cloneDeep(t);if(zn()(n))return P()(n).call(n,(function(t,n){return e(t,n)}),r);switch(n){case Pt:r.width.left=0;break;case jt:r.width.right=0;break;case Jt:r.width.top=0;break;case Ot:r.width.bottom=0;break;default:return r}return r},Zf=function(e){return Bn()(Et).call(Et,null==e?void 0:e.type)},Qf=function(e){return Bn()(mt).call(mt,null==e?void 0:e.type)},Pf=function(e){return"DataGrid"===e.type},Jf=function(e){return(null==e?void 0:e.type)===gt},jf=function(e){return"CardGrid"===e.type},Of=function(e){var t=e.findControl(e.getRootId()),n=t.width-t.marginLeft-t.marginRight,r=t.height-t.marginTop-t.marginBottom;return{x:0,y:0,width:n,height:r,left:0,top:0,right:n,bottom:r}},Uf=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.x,a=void 0===r?0:r,o=n.y,i=void 0===o?0:o,l=e.findControl(t),u=l.width,c=l.height,d=l.x,s=l.y;return{x:d+=a,y:s+=i,width:u,height:c,left:d,top:s,right:d+u,bottom:s+c}},zf=function(e){return Bn()(Ct).call(Ct,e.type)},Wf=function(e){return Bn()(yt).call(yt,e.type)},Kf=function(e){return e.rowType===At},Vf=function(e){if(!e)return!1;var t=e.type,n=e.cellType;return"DataCell"===t&&"Detail"===n},Hf=function(e){return e.rowType===xt},qf=function(e){return!!e&&"LayoutCell"===e.type},Yf=function(e){return"TableTail"===e.type},Xf=function(e){return!!e&&"DataCell"===e.type},_f=function(e){if(!e)return!1;var t=e.type;return"LayoutGrid"===t||"CardGrid"===t},$f=function(e,t){var n=e.getData().items;return{items:F()(n).call(n,(function(e){return e.parentId===t})),gridData:Yn()(n).call(n,(function(e){return e.id===t})),allItems:n}},eg=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return P()(t).call(t,(function(t,r,a){return(n[a]||r)&&(t[n[a]||r]=e[r]),t}),{})},tg=function(e){var t,n={};U()(e).call(e,(function(e){var t=(0,M.c)(e,2),r=t[0],a=t[1];n[r]=n[r]||[],n[r].push(a)}));var r={};return F()(t=N()(e).call(e,(function(e){var t,a=(0,M.c)(e,2),o=a[0];a[1];if(!r[o])return r[o]=!0,[o,P()(t=n[o]).call(t,(function(e,t){return(0,ie.c)(e,Xs(t))}),{})]}))).call(t,Boolean)},ng=function(e){var t=e.mergeConfig,n=e.row,r=e.column,a=n,o=r;t&&(a+=t.rowLength-1,o+=t.columnLength-1);return a===n&&(a=null),o===r&&(o=null),{realRowIdx:n,realCellIdx:r,rightRowIdx:a,bottomCellIdx:o}},rg=function(e){e.rowIdx,e.cellIdx;var t,n,r=e.cell,a=(e.cells,e.borderConfig),o=e.handleBorderTypes,i=e.columnLength,l=ng(r),u=l.realCellIdx,c=l.bottomCellIdx,d=a.borderColor,s=a.borderStyle,f=a.borderWidth,g=(0,M.c)(o,3),h=g[0],v=g[1],p=g[2];Bn()(t=[u,c]).call(t,0)&&(r[ze]=P()(h).call(h,(function(e,t){return Nf(e,t,f,d,s,!1,!0)}),r[ze])),Bn()(n=[u,c]).call(n,i-1)&&(r[ze]=P()(p).call(p,(function(e,t){return Nf(e,t,f,d,s,!1,!0)}),r[ze])),(0!==u||c!==i-1||(0,q.isNumber)(c)&&c!==i-1)&&(r[ze]=P()(v).call(v,(function(e,t){return Nf(e,t,f,d,s,!1,!0)}),r[ze]))},ag=function e(t,n,r,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];if(0===n.length)return null;if(zn()(t))return P()(t).call(t,(function(t,n){return e(n,t,r,a,o)}),n);var i=r.borderColor,l=r.borderStyle,u=r.borderWidth,c=a.rowLength,d=a.columnLength;switch(t){case Zt:return U()(n).call(n,(function(e,t,n){var r=e.cells;U()(r).call(r,(function(e,t,n){var r,a,o,s,f,g,h=ng(e),v=h.realRowIdx,p=h.realCellIdx,m=h.rightRowIdx,C=h.bottomCellIdx;Bn()(r=[v,m]).call(r,c-1)?Bn()(a=[p,C]).call(a,d-1)?e[ze]=Nf(e[ze],Nt,u,i,l):(e[ze]=Gf(e[ze],jt),e[ze]=P()(o=[Pt,Jt,Ot]).call(o,(function(e,t){return Nf(e,t,u,i,l)}),e[ze])):Bn()(s=[p,C]).call(s,d-1)?(e[ze]=Gf(e[ze],Ot),e[ze]=P()(f=[Pt,Jt,jt]).call(f,(function(e,t){return Nf(e,t,u,i,l)}),e[ze])):(e[ze]=Gf(e[ze],[Ot,jt]),e[ze]=P()(g=[Pt,Jt]).call(g,(function(e,t){return Nf(e,t,u,i,l)}),e[ze]))}))})),n;case Nt:for(var s=0;s<n.length;s++)for(var f=n[s].cells,g=0;g<f.length;g++){var h,v,p=f[g],m=ng(p),C=m.realRowIdx,y=(m.realCellIdx,m.rightRowIdx);m.bottomCellIdx;Bn()(h=[C,y]).call(h,0)&&rg({rowIdx:s,cellIdx:g,cell:p,cells:f,borderConfig:r,handleBorderTypes:[[Pt,Jt],[Jt],[jt,Jt]],columnLength:d}),Bn()(v=[C,y]).call(v,c-1)&&rg({rowIdx:s,cellIdx:g,cell:p,cells:f,borderConfig:r,handleBorderTypes:[[Pt,Ot],[Ot],[jt,Ot]],columnLength:d}),(0!==C||C!==c-1||(0,q.isNumber)(y)&&y!==c-1)&&rg({rowIdx:s,cellIdx:g,cell:p,cells:f,borderConfig:r,handleBorderTypes:[[Pt],[],[jt]],columnLength:d})}return n;case Qt:return U()(n).call(n,(function(e,t,n){var r=e.cells;U()(r).call(r,(function(e,t,n){e[ze]=Nf(e[ze],Qt,u,i,l,!0)}))})),n;case Pt:return U()(n).call(n,(function(e,t,n){var r=e.cells;U()(r).call(r,(function(e,t,n){var r=ng(e),a=(r.realRowIdx,r.realCellIdx),o=r.rightRowIdx;r.bottomCellIdx;0!==a&&0!==o||(e[ze]=Nf(e[ze],Pt,u,i,l))}))})),n;case Jt:var E=n[0].cells;return U()(E).call(E,(function(e){e[ze]=Nf(e[ze],Jt,u,i,l)})),n;case jt:return U()(n).call(n,(function(e,t,n){var r=e.cells;U()(r).call(r,(function(e){var t,n=ng(e),r=(n.realRowIdx,n.realCellIdx),a=(n.rightRowIdx,n.bottomCellIdx);Bn()(t=[r,a]).call(t,d-1)&&(e[ze]=Nf(e[ze],jt,u,i,l))}))})),n;case Ot:return U()(n).call(n,(function(e,t,n){var r=e.cells;U()(r).call(r,(function(e){var t,n=ng(e),r=n.realRowIdx,a=(n.realCellIdx,n.rightRowIdx);n.bottomCellIdx;Bn()(t=[r,a]).call(t,c-1)&&(e[ze]=Nf(e[ze],Ot,u,i,l))}))})),n;case Tt:return U()(n).call(n,(function(e,t,n){var r=e.cells;U()(r).call(r,(function(e,t,n){var r,a,o,c,d=ng(e),s=d.realRowIdx,f=d.realCellIdx,g=d.rightRowIdx,h=d.bottomCellIdx;Bn()(r=[s,g]).call(r,0)?Bn()(a=[f,h]).call(a,0)||(e[ze]=Nf(e[ze],Pt,u,i,l)):Bn()(o=[f,h]).call(o,0)?e[ze]=Nf(e[ze],Jt,u,i,l):e[ze]=P()(c=[Pt,Jt]).call(c,(function(e,t){return Nf(e,t,u,i,l)}),e[ze])}))})),n;default:W.console.error("unreachable action error")}},og=function(e,t,n,r,a){return U()(n).call(n,(function(e,n,o){var i=e.cells;U()(i).call(i,(function(e,n,o){var i,l,u,c=ng(e),d=c.realRowIdx,s=c.realCellIdx,f=c.rightRowIdx,g=c.bottomCellIdx,h=Yn()(t).call(t,(function(t){return t.id===e.id}));(h&&(e[ze]=h[ze]),Bn()(i=[d,f]).call(i,r-1))?Bn()(l=[s,g]).call(l,a-1)||(e[ze]=Gf(e[ze],jt)):Bn()(u=[s,g]).call(u,a-1)?e[ze]=Gf(e[ze],Ot):e[ze]=Gf(e[ze],[Ot,jt])}))})),n},ig=function(e,t,n,r,a){return U()(n).call(n,(function(e,n,o){var i=e.cells;U()(i).call(i,(function(e,n,o){var i,l,u=ng(e),c=u.realRowIdx,d=u.realCellIdx,s=u.rightRowIdx,f=u.bottomCellIdx,g=Yn()(t).call(t,(function(t){return t.id===e.id}));if(g&&(e[ze]=g[ze]),Bn()(i=[c,s]).call(i,r-1)){var h=Y().findLast(t,(function(e){return"DataRow"===e.type}));if(h&&h.id!==e.rowId){var v,p=Yn()(t).call(t,(function(t){return t.rowId===h.id&&t.columnId===e.columnId})).border;if(null!=p&&null!==(v=p.width)&&void 0!==v&&v.bottom){var m=fg(e[ze])[1],C=fg(e[ze])[2],y=fg(e[ze])[3];e[ze]=Nf(e[ze],Ot,y,m,C)}}}if(Bn()(l=[d,f]).call(l,a-1)){var E=Y().findLast(t,(function(e){return"DataColumn"===e.type}));if(E&&E.id!==e.columnId){var D,A=Yn()(t).call(t,(function(t){return t.columnId===E.id&&t.rowId===e.rowId})).border;if(null!=A&&null!==(D=A.width)&&void 0!==D&&D.right){var k=fg(e[ze])[1],w=fg(e[ze])[2],b=fg(e[ze])[3];e[ze]=Nf(e[ze],jt,b,k,w)}}}}))})),n},lg=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=Y().cloneDeep(e),o=a.borderType,i=a.border,l=a.mergeConfig,u=void 0===l?{}:l,c=(r?function(e){return e}:Y().cloneDeep)(F()(t).call(t,(function(t){return t.parentId===e.id}))),d=df(c),s=d.columns,f=d.rows,g=d.cells,h=cf(Lf(Lf({columns:s,rows:f,cells:g},a),{},{mergeConfig:u})).rowData,v=gg(i,o,h,f.length,s.length),p=[];v&&U()(n=P()(v).call(v,(function(e,t){return Z()(e).call(e,t.cells)}),[])).call(n,(function(e){var t=e.id,n=e.border,a=Yn()(c).call(c,(function(e){return e.id===t}));a&&r&&(a.border=n,p.push([a.id,{border:n}]))}));return p},ug=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Y().cloneDeep(e),a=(r.borderType,r.border,r.mergeConfig),o=void 0===a?{}:a,i=(0,Y().cloneDeep)(F()(t).call(t,(function(t){return t.parentId===e.id}))),l=df(i),u=l.columns,c=l.rows,d=l.cells,s=cf(Lf(Lf({columns:u,rows:c,cells:d},r),{},{mergeConfig:o})).rowData,f=[];f=n?og(0,i,s,c.length,u.length):ig(0,i,s,c.length,u.length);var g,h=[];f&&U()(g=P()(f).call(f,(function(e,t){return Z()(e).call(e,t.cells)}),[])).call(g,(function(e){var t=e.id,n=e.border,r=Yn()(i).call(i,(function(e){return e.id===t}));r&&h.push([r.id,{border:n}])}));return h},cg=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Y().cloneDeep(e),o=a.borderType,i=a.border,l=a.mergeConfig,u=void 0===l?{}:l,c=(0,Y().cloneDeep)(F()(t).call(t,(function(t){return t.parentId===e.id}))),d=F()(n).call(n,(function(t){return t.parentId===e.id})),s=df(c),f=s.columns,g=s.rows,h=s.cells,v=cf(Lf(Lf({columns:f,rows:g,cells:h},a),{},{mergeConfig:u})).rowData,p=gg(i,o,v,g.length,f.length);p=r?ig(0,d,v,g.length,f.length):og(0,n,v,g.length,f.length);var m,C=[];p&&U()(m=P()(p).call(p,(function(e,t){return Z()(e).call(e,t.cells)}),[])).call(m,(function(e){var t=e.id,n=e.border,r=Yn()(c).call(c,(function(e){return e.id===t}));r&&(r.border=n,C.push([r.id,{border:n}]))}));return C},dg=function(e,t,n,r){var a=e.borderType,o=e.border;e.mergeConfig;return{newRowData:gg(o,a,t,n,r)}},sg=[un,cn,dn],fg=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=de()(n.width||{}),a=n.width||{},o=a.left,i=a.right,l=a.top,u=a.bottom,c=!a.inner&&o&&i&&l&&u,d=(de()(n.color||{}),de()(n.style||{}),F()(r).call(r,Boolean).length);if(0===d)return[[Qt]];if(5===d)return[[Zt],n.color.top,n.style.top,+(null!==(e=Yn()(sg).call(sg,(function(e){return+e==+n.width.top})))&&void 0!==e?e:un),{color:n.color.inner,width:n.width.inner,style:n.style.inner}];if(c)return[[Nt],n.color.top,n.style.top,+(null!==(t=Yn()(sg).call(sg,(function(e){return+e==+n.width.top})))&&void 0!==t?t:un)];var s=[];return n.width.top&&s.push(Jt),n.width.left&&s.push(Pt),n.width.right&&s.push(jt),n.width.bottom&&s.push(Ot),n.width.inner&&s.push(Tt),[s,n.color.top||n.color.bottom||n.color.left||n.color.right||n.color.inner,n.style.top||n.style.bottom||n.style.left||n.style.right||n.style.inner,+(n.width.top||n.width.bottom||n.width.left||n.width.right||n.width.inner||un),{color:n.color.inner,width:n.width.inner,style:n.style.inner}]},gg=Y().memoize((function(e,t,n,r,a){var o=fg(e),i=(0,M.c)(o,4),l=i[0],u=i[1],c=i[2],d=i[3],s=Bn()(l).call(l,Tt)?[Tt]:l,f=ag(s,Y().cloneDeep(n),{borderColor:u,borderStyle:c,borderWidth:d},{rowLength:r,columnLength:a},F()(l).call(l,(function(e){return e!==Tt})));return f}),(function(e,t,n,r,a){return j()({value:e,type:t,rowData:n,rowLength:r,columnLength:a})})),hg=function(e){var t,n=e.items,r=e.rowId,a=e.columnId,o=e.gridData,i=Y().cloneDeep(o),l=(i.borderType,i.border,i.mergeConfig),u=void 0===l?{}:l;if(Y().isEmpty(u))return[];var c=F()(n).call(n,(function(e){return e.parentId===o.id})),d=df(c),s=d.columns,f=d.rows,g=d.cells,h=d.columnCount,v=lf(h),p=Z()(t="".concat(fe()(f).call(f,(function(e){return e.id===r})),"_")).call(t,fe()(s).call(s,(function(e){return e.id===a}))),m=[];if(u[p])for(var C=u[p],y=C.rowStart,E=C.rowLength,D=C.columnStart,A=C.columnLength,k=y;k<y+E;k++)for(var w=D;w<D+A;w++){var b=g[v(k,w)];b.rowId!==r&&b.columnId!==a||m.push(b)}return m},vg=function(e,t){var n=P()(e).call(e,(function(e,t){return e+t}),0),r=t-n;return N()(e).call(e,(function(t){return qs(t+(0===n?r/e.length:r*t/n),1)}))},pg=function(e,t){if((null==e?void 0:e.length)>1){var n=P()(e).call(e,(function(e,t){return e+t}),0);e[e.length-1]=e[e.length-1]+qs(t-n,1)}return e};var mg=function(e,t,n,r){return function(a,o){for(var i=a,l=e;l<=t;l++){i=o(i,n[r(l,a)])}return i}};function Cg(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function yg(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?U()(n=Cg(Object(a),!0)).call(n,(function(t){(0,L.c)(e,t,a[t])})):b()?S()(e,b()(a)):U()(r=Cg(Object(a))).call(r,(function(t){B()(e,t,k()(a,t))}))}return e}var Eg=function(e){e.Name;var t,n=e.id,r=e.dataContext,a=e.value,o=e.field,i=e.className,l=e.selectionContext,u=e.Name,c=e.Tips,d=e.Editor,s=(void 0===d?{}:d).NameHidden,f=(0,V.useState)(!1),g=(0,M.c)(f,2),h=g[0],v=g[1],p=(0,V.useState)([]),m=(0,M.c)(p,2),y=m[0],E=m[1],D=(0,V.useContext)(En),A=D.meta,k=D.definition,w=D.setMessage,b=r.getRootId(),x=(Y().last(Z()(t=[b]).call(t,(0,kn.c)(l.getSelection()))),(0,V.useContext)(W.GlobalConfigContext).invokePrintDesignerCustomEvent),S=(0,V.useCallback)((function(e){x("clickTipsLink",e)}),[x]);return H().createElement(H().Fragment,null,H().createElement(W.NameTipWrapper,{nameHidden:s,className:i,name:u,tips:c,onLinkClick:S}),H().createElement("div",{className:"".concat(i,"-query"),onClick:function(){var e,t=o.id,n=r.findControlByCondition((function(e){return e.parentId===t&&"Detail"===e.cellType})),a=F()(e=N()(n).call(n,(function(e){var t=e.bindField,n=e.dataSource;return er(n,t)}))).call(e,Boolean);E(a),v(!0)}},H().createElement("div",{className:Hn()(["".concat(i,"-query-text"),(0,L.c)({},"".concat(i,"-query-text-empty"),!a)])},a||(0,W.getLangMsg)("printd.grid.key0008")),H().createElement("div",{className:"".concat(i,"-query-btn")},H().createElement(z.Icon,{type:"more",style:{cursor:"pointer"}}))),H().createElement(Qs,{activedSelectId:n,meta:A,definition:k,visible:h,onCancel:function(){return v(!1)},onSelect:function(e,t){if("CardGrid"===t){var a=(null==e?void 0:e.key)||[],i=$n(null==a?void 0:a[0],k);if(!i)return;var u=i.dataSource,c=i.dataSourceText,d=i.dsType,s=i.ZeroShow,f=i.IgnoreTailZero,g=[n,{dataSource:u,dataSourceText:c,dsType:d,methodName:"switchDataSource",zeroShow:s,ignoreTailZero:f}],h=o.tableTailId;return r.batchUpdateControlPropertyValues((0,W.createCustomUpdateAction)(g)).then((function(){h&&r.deleteControl((0,W.createDeleteAction)(h))})),void v(!1)}var p=r.findControl(b);if((p.width-p.marginLeft-p.marginRight)/e.length<5)return w((0,W.getLangMsg)("printd.grid.key0004"));var m,E=N()(e).call(e,(function(e){var t,n=e.key,r=e.InitAttr,a=void 0===r?{}:r,o=$n(n,k);if(!o)return{};var i=o.dataSource,l=o.ancestorTitle,u=o.key,c=o.title,d=o.dsType,s=o.ZeroShow,f=o.IgnoreTailZero,g=P()(t=C()(a)).call(t,(function(e,t){return e[Y().camelCase(t)]=a[t],e}),{});return g.zeroShow=s,g.ignoreTailZero=f,yg({bindText:"=$".concat(l),bindField:u,dataSource:i,viewText:"=$".concat(c),dsType:d},g)})),D=N()(E).call(E,(function(e){return er(e.dataSource,e.bindField)}));if(!(m=y,D.join("")===m.join(""))){l.setSelect([]);var A=o.tableTailId;r.batchUpdateControlPropertyValues((0,W.createCustomUpdateAction)([n,{dataSource:E}])).then((function(e){A&&r.deleteControl((0,W.createDeleteAction)(A));var t=e[1].value;l.setSelect(zn()(t)?[t[0].id]:[t.id])}))}v(!1)},checkedKeys:y,controlType:o.type,transferData:o}))},Dg=function(e){e.Name,e.id;var t=e.dataContext,n=e.value,r=e.field,a=e.className,o=e.Name,i=e.Tips,l=e.Editor,u=(void 0===l?{}:l).NameHidden,c=(0,V.useContext)(W.GlobalConfigContext).handleOpenDGridSortSettingEdModal,d=(0,V.useCallback)((function(){var e=t.findControlByCondition((function(e){return Vf(e)&&e.parentId===r.id})),a=N()(e).call(e,(function(e){return{dataSource:e.dataSource,bindField:e.bindField}}));null==c||c(yg(yg({},r),{},{sortSettingsText:n,dsList:a}))}),[c,r,n]),s=(0,V.useContext)(W.GlobalConfigContext).invokePrintDesignerCustomEvent,f=(0,V.useCallback)((function(e){s("clickTipsLink",e)}),[s]);return H().createElement(H().Fragment,null,H().createElement(W.NameTipWrapper,{nameHidden:u,className:a,name:o,tips:i,onLinkClick:f}),H().createElement("div",{className:"".concat(a,"-query"),onClick:d},H().createElement("div",{className:Hn()(["".concat(a,"-query-text"),(0,L.c)({},"".concat(a,"-query-text-empty"),!n)])},n||(0,W.getLangMsg)("printd.grid.key0008")),H().createElement("div",{className:"".concat(a,"-query-btn")},H().createElement(z.Icon,{type:"more",style:{cursor:"pointer"}}))))},Ag=function(e){e.Name,e.id,e.dataContext;var t,n=e.value,r=e.field,a=e.className,o=e.Name,i=e.Tips,l=e.Editor,u=(void 0===l?{}:l).NameHidden,c=(0,V.useContext)(W.GlobalConfigContext).handleOpenDGridFilterSettingEdModal,d=(0,V.useCallback)((function(){null==c||c(yg({},r))}),[c,r,n]),s=(0,V.useContext)(En).definition,f=void 0===s?{}:s,g=function(e){var t;return function n(r){return _n()(r).call(r,(function(r){var a=r.dataSource===e;return t=a&&r.DsType,a||r.Items&&n(r.Items)})),t}}(r.dataSource)(f),h=Bn()(t=["ReportEntry","Approveline","Approveactivity","Custom","Workflow","Ref","Attach"]).call(t,g),v=(0,V.useContext)(W.GlobalConfigContext).invokePrintDesignerCustomEvent,p=(0,V.useCallback)((function(e){v("clickTipsLink",e)}),[v]);return H().createElement(H().Fragment,null,!h&&H().createElement(H().Fragment,null,H().createElement(W.NameTipWrapper,{nameHidden:u,className:a,name:o,tips:i,onLinkClick:p}),H().createElement("div",{className:"".concat(a,"-query"),onClick:d},H().createElement("div",{className:Hn()(["".concat(a,"-query-text"),(0,L.c)({},"".concat(a,"-query-text-empty"),!(n||r.filterSettingValue))])},n||r.filterSettingValue?(0,W.getLangMsg)("printd.grid.key0001"):(0,W.getLangMsg)("printd.grid.key0009")),H().createElement("div",{className:"".concat(a,"-query-btn")},H().createElement(z.Icon,{type:"more",style:{cursor:"pointer"}})))))},kg=function(e){var t,n=e.id,r=e.locked,a=e.className,o=e.editor,i=e.Name,l=e.Tips,u=e.dataContext,c=e.field,d=o.NameHidden,s=o.Required;if((null===(t=c.subGridId)||void 0===t?void 0:t.length)>0)return H().createElement(H().Fragment,null);var f=(0,V.useContext)(W.GlobalConfigContext).invokePrintDesignerCustomEvent,g=(0,V.useCallback)((function(e){f("clickTipsLink",e)}),[f]);return H().createElement(H().Fragment,null,H().createElement(z.Checkbox,{checked:!!c.tableTailId,disabled:r,onChange:function(e){var t,r;t=e.target.checked,r=[[n,{hasTableTail:t}]],u.batchUpdateControlPropertyValues((0,W.createUpdateAction)(r))}},H().createElement(W.NameTipWrapper,{nameHidden:d,className:a,name:i,tips:l,required:s,onLinkClick:g})))},wg=function(e){var t,n=(0,V.useCallback)((function(e){return e=F()(e).call(e,(function(e){return"Sys"!==e.DsType})),mr(e,"Image")}),[]),r=(0,V.useCallback)((function(e){return mr(e,"Image")}),[]);return H().createElement(xs,(0,ie.c)({filterTreeData:n,filterExpressionTreeData:r},e,{modalType:(null==e||null===(t=e.editor)||void 0===t?void 0:t.SupportFx)&&"expression"}))},bg=function(e){var t,n=(0,V.useCallback)((function(e){return e=F()(e).call(e,(function(e){return"Sys"!==e.DsType})),mr(e,"Image")}),[]),r=(0,V.useCallback)((function(e){return mr(e,"Image")}),[]);return H().createElement(xs,(0,ie.c)({},e,{filterTreeData:n,filterExpressionTreeData:r,modalType:(null==e||null===(t=e.editor)||void 0===t?void 0:t.SupportFx)&&"expression"}))},xg=function(e){var t=e.id,n=e.propName,r=e.dataContext,a=e.value,o=e.className,i=(e.activedSelectId,(0,V.useState)(!1)),l=(0,M.c)(i,2),u=l[0],c=l[1],d=(0,V.useContext)(En),s=d.definition,f=(0,V.useCallback)((function(e){e||c(!1);var a=e.key,o=$n(a,s);if(W.console.log("onSelect-----",e,o),o){var i=o.dataSource,l=o.ancestorTitle,u=o.key,d=o.dsType;r.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[t,(0,L.c)((0,L.c)((0,L.c)((0,L.c)({},n,"=$".concat(l)),"dsType",d),"bindField",u),"dataSource",i)]])),c(!1)}else W.console.error("queryDataSourceAndAncestorByKey has no res",a,s)}),[t,n,s]),g=(0,V.useCallback)((function(e){return function(e,t){return pr(e,(function(e){var n=e.Type;return n&&n===t}))}(e,"Image")}),[]),h=(0,V.useCallback)((function(){c(!1)}),[]);return H().createElement(H().Fragment,null,H().createElement("div",{className:"".concat(o,"-query"),onClick:function(){return c(!0)}},H().createElement("div",{className:Hn()(["".concat(o,"-query-text"),(0,L.c)({},"".concat(o,"-query-text-empty"),!a)])},a||(0,W.getLangMsg)("printd.grid.key0010")),H().createElement("div",{className:"".concat(o,"-query-btn")},H().createElement(z.Icon,{type:"more",style:{cursor:"pointer"}}))),H().createElement(Vr,(0,ie.c)({activedSelectId:t,visible:u,filterTreeData:g},d,{setVisible:c,onSelect:f,onCancel:h,className:"left-datasource",emptyNode:H().createElement(Sg,{className:"left-datasource"})})))};function Sg(e){var t=e.className;return H().createElement("div",{className:"".concat(t,"-empty")},H().createElement("img",{className:"".concat(t,"-empty-img"),src:Gn,width:"168",height:"96",alt:(0,W.getLangMsg)("printd.grid.key0011")}),H().createElement("div",{className:"".concat(t,"-empty-text")},(0,W.getLangMsg)("printd.grid.key0011")))}var Ig=function(e){var t,n=e.id,r=(e.handleChange,e.value),a=(e.className,e.rootId,e.field,e.dataContext),o=e.locked,i=e.propName,l="kdesigner-image-upload",u=(0,V.useState)([]),c=(0,M.c)(u,2),d=c[0],s=c[1],f=(0,V.useState)(""),g=(0,M.c)(f,2),h=g[0],v=g[1],p=(0,V.useRef)(null),m=(0,V.useContext)(W.GlobalConfigContext).uploadImageUrl,C=(0,V.useContext)(En).setMessage,y=a.getData().id||"";(0,V.useEffect)((function(){var e;e="error"===h,ue()((function(){var t,n;e?null===(t=p.current)||void 0===t||t.show():null===(n=p.current)||void 0===n||n.hide()}),0)}),[h]),(0,V.useEffect)((function(){rr(r).isBindField&&a.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[n,(0,L.c)((0,L.c)((0,L.c)({},i,""),"bindField",""),"dataSource","")]]))}),[]);var E=Z()(t="".concat(m)).call(t,y);return H().createElement(z.Upload,{disabled:o,action:E,className:"".concat(l,"-wrapper"),accept:".jpg,.jpeg,.png,.bmp",fileList:d,onChange:function(e){var t=e.file.status,r=(0,kn.c)(e.fileList);r=Sn()(r).call(r,-1),r=N()(r).call(r,(function(e){var r=e.response;if(r){var o=r.rcId,l=r.fileName,u=r.status,c=r.message;"1"===u?(a.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[n,(0,L.c)((0,L.c)((0,L.c)({},i,l),"bindField",o),"dataSource","")]])),t="success"):(t="error",C(c||(0,W.getLangMsg)("printd.grid.key0012")))}return e})),s(r),W.console.log("upload------",t),v((function(){return"error"===t?"error":"success"}))}},H().createElement("div",{className:l},H().createElement("div",{className:Hn()(["".concat(l,"-value"),(0,L.c)({},"".concat(l,"-value-empty"),!r)])},r||(0,W.getLangMsg)("printd.grid.key0013")),H().createElement(z.Icon,{type:"shangchuan",prefix:"designericon",className:"".concat(l,"-icon")})))},Bg=function(e){e.className;var t=e.Editor,n=e.value,r=e.handleChange;n||W.console.error("PaperDirection value is null");var a=t.Enum,o="editor";return H().createElement(H().Fragment,null,H().createElement("div",{style:{opacity:1,visibility:"hidden",height:"16px"}},(0,W.getLangMsg)("printd.grid.key0020")),H().createElement("div",{className:"".concat(o,"-page-direction")},N()(a).call(a,(function(e){var t=e.Value;return H().createElement("div",{className:Hn()((0,L.c)({},"".concat(o,"-page-direction-enable"),t===n)),onClick:function(){r(t)},title:"horizontal"===t?(0,W.getLangMsg)("printd.grid.key0021"):(0,W.getLangMsg)("printd.grid.key0022"),key:t},H().createElement("div",{className:Hn()((0,L.c)((0,L.c)({},"".concat(o,"-page-direction-horizontal"),"horizontal"===t),"".concat(o,"-page-direction-veritical"),"vertical"===t))}))}))))},Mg=n(85640),Lg=function(e){var t,n=e.handleChange,r=e.value,a=e.className,o=(e.rootId,e.Name),i=e.dataContext,l=(e.propName,(0,V.useContext)(W.GlobalConfigContext)),u=l.previewImageUrl,c=l.uploadImageUrl,d="editor",s=(0,V.useState)([]),f=(0,M.c)(s,2),g=f[0],h=f[1],v=(0,V.useState)(""),p=(0,M.c)(v,2),m=(p[0],p[1]),C=(0,V.useState)((function(){var e,t=r||"";return t?Z()(e="".concat(u)).call(e,t):""})),y=(0,M.c)(C,2),E=y[0],D=y[1],A=(0,V.useContext)(En).setMessage,k=i.getData().id||"",w=function(e){return new(ea())((function(t,n){var r=i.getRootId(),a=i.findControl(r),o=a.width,l=(a.height,new Image);l.src=e;l.onload=function(){var e=l.width,n=l.height;e=Ks(e,1),n=Ks(n,1),t(e>o?{width:o,height:n*o/e}:{width:e,height:n})}}))},b=function(){var e=(0,Mg.c)(na().mark((function e(t){var r,a,o,i,l,c,d;return na().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.file.status,a=(0,kn.c)(t.fileList),a=Sn()(a).call(a,-1),a=N()(a).call(a,(function(e){var t=e.response;if(t){var n=t.rcId,a=t.fileName,i=t.status,l=t.message;"1"===i?(o={rcId:n,name:a},r="success"):(r="error",A(l||(0,W.getLangMsg)("printd.grid.key0019")))}return e})),!o){e.next=14;break}return l=o.rcId,c=Z()(i="".concat(u)).call(i,l),e.next=9,w(c);case 9:d=e.sent,d.width,d.height,D(c),n(l);case 14:h(a),m((function(){return"error"===r?"error":"success"}));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,V.useEffect)((function(){var e,t=r||"";D(t?Z()(e="".concat(u)).call(e,t):"")}),[r]);var x=Z()(t="".concat(c)).call(t,k);return H().createElement(H().Fragment,null,H().createElement("div",{className:Hn()((0,L.c)({},"".concat(a,"-title"),!0))},o),E?H().createElement("div",{className:"".concat(d,"-upload-preview")},H().createElement("img",{src:E,alt:""}),E&&H().createElement("div",{className:"".concat(d,"-upload-preview-bg"),onClick:function(){D(""),h([]),n("")}},H().createElement(z.Icon,{prefix:"printdesignericon",type:"shanchu"}))):H().createElement(z.Upload,{className:"".concat(a,"-background-upload"),action:x,accept:".jpg,.jpeg,.png,.bmp",fileList:g,onChange:b},H().createElement("div",{className:"".concat(d,"-upload")},H().createElement(z.Icon,{type:"add"}))))};function Rg(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fg(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?U()(n=Rg(Object(a),!0)).call(n,(function(t){(0,L.c)(e,t,a[t])})):b()?S()(e,b()(a)):U()(r=Rg(Object(a))).call(r,(function(t){B()(e,t,k()(a,t))}))}return e}var Tg=function(e){var t=e.id,n=e.propName,r=e.dataContext,a=e.value,o=e.className,i=(e.activedSelectId,e.RelationKey),l=e.RelationDataSource,u=e.RelationViewText,c=e.Name,d=e.Tips,s=e.Editor,f=void 0===s?{}:s,g=e.field,h=f.NameHidden,v=(0,V.useState)(!1),p=(0,M.c)(v,2),m=p[0],y=p[1],E=(0,V.useContext)(En),D=(E.meta,E.definition),A=(0,V.useCallback)((function(e){var a;e||y(!1);var o=e.key,c=e.InitAttr,d=void 0===c?{}:c,s=$n(o,D);if(s){var f=s.dataSource,g=s.ancestorTitle,h=s.key,v=s.title,p=s.dsType,m=s.ZeroShow,E=s.IgnoreTailZero,A=P()(a=C()(d)).call(a,(function(e,t){return e[Y().camelCase(t)]=d[t],e}),{});A.zeroShow=m,A.ignoreTailZero=E,r.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[t,ar(Fg((0,L.c)((0,L.c)((0,L.c)((0,L.c)((0,L.c)({},n,"=$".concat(g)),Y().camelCase(i),h),Y().camelCase(l),f),Y().camelCase(u),"=$".concat(v)),"dsType",p),A))]])),y(!1)}else W.console.error("queryDataSourceAndAncestorByKey has no res",o,D)}),[t,n,D,u,l,i,n]),k=(0,V.useCallback)((function(){y(!1)}),[]),w=(0,V.useCallback)((function(e){return"RichText"===g.type&&(e=pr(e,(function(){}),"Sys")),function(e,t){return pr(e,(function(e){var n=e.Type,r=e.InitAttr;return n&&Bn()(t).call(t,n)&&Bn()(t).call(t,null==r?void 0:r.TextFormat)}))}(e,["Text","RichText"])}),[g.type]),b=(0,V.useContext)(W.GlobalConfigContext).invokePrintDesignerCustomEvent,x=(0,V.useCallback)((function(e){b("clickTipsLink",e)}),[b]);return H().createElement(H().Fragment,null,H().createElement(W.NameTipWrapper,{nameHidden:h,className:o,name:c,tips:d,onLinkClick:x}),H().createElement("div",{className:"".concat(o,"-query"),onClick:function(){return y(!0)}},H().createElement("div",{className:Hn()(["".concat(o,"-query-text"),(0,L.c)({},"".concat(o,"-query-text-empty"),!a)])},a||(0,W.getLangMsg)("printd.grid.key0014")),H().createElement("div",{className:"".concat(o,"-query-btn")},H().createElement(z.Icon,{type:"more",style:{cursor:"pointer"}}))),H().createElement(Vr,(0,ie.c)({activedSelectId:t,visible:m,filterTreeData:w},E,{onSelect:A,onCancel:k,className:"left-datasource",emptyNode:H().createElement(Ng,{className:"left-datasource"})})))};function Ng(e){var t=e.className;return H().createElement("div",{className:"".concat(t,"-empty")},H().createElement("img",{className:"".concat(t,"-empty-img"),src:Gn,width:"168",height:"96",alt:(0,W.getLangMsg)("printd.grid.key0014")}),H().createElement("div",{className:"".concat(t,"-empty-text")},(0,W.getLangMsg)("printd.grid.key0014")))}function Gg(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zg(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?U()(n=Gg(Object(a),!0)).call(n,(function(t){(0,L.c)(e,t,a[t])})):b()?S()(e,b()(a)):U()(r=Gg(Object(a))).call(r,(function(t){B()(e,t,k()(a,t))}))}return e}var Qg=function(e){var t,n,r=e.id,a=e.propName,o=e.dataContext,i=e.RelationKey,l=e.value,u=e.field,c=(0,V.useContext)(En),d=u.parentId,s=u.groupField,f=o.findControl(d).dataSource,g=f.replace(/^(\S+\.)?(\S+)$/g,"$2"),h=[Z()(t="".concat(f,"-")).call(t,g)],v=Z()(n="".concat(f,"-")).call(n,s),p=c.definition,m=(0,V.useCallback)((function(e){return e=yr(e),e=Dr(e,f)}),[f]);return H().createElement(xs,(0,ie.c)({},e,{readOnly:!0,filterTreeData:m,selectedKey:v,expandedKeys:h,onSelect:function(e,t){var n,l=t.key,u=t.InitAttr,c=void 0===u?{}:u,d=$n(l,p);if(d){var s=d.ancestorTitle,f=d.key,g=d.dsType,h=d.ZeroShow,v=d.IgnoreTailZero,m="=$".concat(s),y=P()(n=C()(c)).call(n,(function(e,t){return e[(0,q.camelCase)(t)]=c[t],e}),{});y.zeroShow=h,y.ignoreTailZero=v;var E=[[r,ar(Zg((0,L.c)((0,L.c)((0,L.c)({},a,m),(0,q.camelCase)(i),f),"dsType",g),y))]];o.batchUpdateControlPropertyValues((0,W.createUpdateAction)(E)),e(!1)}},handleInputChange:function(e,t){if(e!==l){var n=rr(e),u=n.isBindField,c=n.bindField;if(u){var d=nr(c,p);if(!d)return t(!0),void o.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[r,ar((0,L.c)((0,L.c)((0,L.c)({},a,e),(0,q.camelCase)(i),""),"dsType",""))]]));t(!1);var s=d.key,f=d.dsType,g=[[r,ar((0,L.c)((0,L.c)((0,L.c)({},a,e),(0,q.camelCase)(i),s),"dsType",f))]];o.batchUpdateControlPropertyValues((0,W.createUpdateAction)(g))}else t(!1),o.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[r,(0,L.c)((0,L.c)((0,L.c)({},a,e),(0,q.camelCase)(i),""),"dsType","")]]))}}}))},Pg=function(e){var t,n,r=e.id,a=e.propName,o=(e.className,e.Name),i=e.dataContext,l=e.RelationKey,u=e.value,c=e.field,d=(0,V.useContext)(En).definition,s=c.parentId,f=c.mergeByField,g=c.mergeSummaryField,h=i.findControl(s),v=h.id,p=h.dataSource,m=p.replace(/^(\S+\.)?(\S+)$/g,"$2"),y=[Z()(t="".concat(p,"-")).call(t,m)],E=[function(e){return e.parentId===v&&"Detail"===e.cellType},function(e){return Hf(e)&&e.parentId===s},function(e){return Jf(e)&&e.parentGridId===s}],D=Bf(i,E),A=(0,M.c)(D,3),k=A[0],w=A[1],b=A[2],x=!!w.length,S=!!b.length,I=(0,kn.c)(new(fa())(F()(n=N()(k).call(k,(function(e){var t=e.bindField,n=e.dataSource;return er(n,t)}))).call(n,Boolean))),B=(0,V.useMemo)((function(){var e,t=Ar(d,I),n=f?null==f?void 0:N()(e=f.split(";")).call(e,(function(e){var t;return Z()(t="".concat(p,"-")).call(t,e)})):[];return N()(n).call(n,(function(e){var n=e;return jg(t,e)||Ug(t,e.split("-")[1],(function(e){var t,r=e.dataSource,a=e.bindField;n=Z()(t="".concat(r,"-")).call(t,a)})),n}))}),[I,f,p]);return x||Jf(h)||S?null:H().createElement(xs,(0,ie.c)({},e,{readOnly:!0,clearable:!0,modalTitle:o,filterTreeData:function(e){return p?e=Og(e=Ar(e,I)):[]},expandedKeys:y,checkedKeys:B,onSelect:function(e,t){var n=N()(t).call(t,(function(e){var t,n=e.key,r=e.InitAttr,a=void 0===r?{}:r,o=$n(n,d);if(!o)return{};var i=o.dataSource,l=o.ancestorTitle,u=o.key,c=o.title,s=o.dsType,f=o.ZeroShow,g=o.IgnoreTailZero,h=P()(t=C()(a)).call(t,(function(e,t){return e[(0,q.camelCase)(t)]=a[t],e}),{});return h.zeroShow=f,h.ignoreTailZero=g,Zg({bindText:"=$".concat(l),bindField:u,dataSource:i,viewText:"=$".concat(c),title:c,dsType:s},h)})),o=ar((0,L.c)((0,L.c)({},a,N()(n).call(n,(function(e){return e.title})).join(";")),(0,q.camelCase)(l),N()(n).call(n,(function(e){return e.bindField})).join(";")));i.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[r,o]])),e(!1)},onClear:function(){var e=g.length?{mergeSummaryField:[],mergeSummaryFieldText:""}:{};i.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[r,ar(Zg((0,L.c)((0,L.c)({},a,""),(0,q.camelCase)(l),""),e))]]))},handleInputChange:function(e,t){if(e!==u){var n=rr(e),o=n.isBindField,c=n.bindField;if(o){var s=nr(c,d);if(!s)return t(!0),void i.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[r,ar((0,L.c)((0,L.c)({},a,e),(0,q.camelCase)(l),""))]]));t(!1);var f=s.key,g=[[r,ar((0,L.c)((0,L.c)({},a,e),(0,q.camelCase)(l),f))]];i.batchUpdateControlPropertyValues((0,W.createUpdateAction)(g))}else t(!1),i.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[r,(0,L.c)((0,L.c)({},a,e),(0,q.camelCase)(l),"")]]))}},checkable:!0}))},Jg=function(e){var t,n,r=e.Name,a=e.id,o=e.propName,i=e.dataContext,l=e.RelationKey,u=e.value,c=e.field,d=e.className,s=(e.selectionContext,(0,V.useState)(!1)),f=(0,M.c)(s,2),g=f[0],h=f[1],v=(0,V.useState)(!1),p=(0,M.c)(v,2),m=p[0],y=p[1],E=(0,V.useState)([]),D=(0,M.c)(E,2),A=D[0],k=D[1],w=(0,V.useContext)(En),b=c.mergeSummaryField,x=c.parentId,S=c.mergeByField,I=i.findControl(x),B=I.id,R=I.dataSource,T=(I.type,R.replace(/^(\S+\.)?(\S+)$/g,"$2")),G=[Z()(t="".concat(R,"-")).call(t,T)],Q=[function(e){return e.parentId===B&&"Detail"===e.cellType},function(e){return Hf(e)&&e.parentId===x},function(e){return Jf(e)&&e.parentGridId===x}],J=Bf(i,Q),j=(0,M.c)(J,3),O=j[0],U=j[1],K=j[2],Y=!!U.length,X=!!K.length,_=(0,kn.c)(new(fa())(F()(n=N()(O).call(O,(function(e){var t=e.bindField,n=e.dataSource;return er(n,t)}))).call(n,Boolean))),$=!S,ee=w.meta,te=w.definition,ne=(0,V.useMemo)((function(){var e,t=Ar(te,_),n=S?null==S?void 0:N()(e=S.split(";")).call(e,(function(e){var t;return Z()(t="".concat(R,"-")).call(t,e)})):[];return N()(n).call(n,(function(e){var n=e;return jg(t,e)||Ug(t,e.split("-")[1],(function(e){var t,r=e.dataSource,a=e.bindField;n=Z()(t="".concat(r,"-")).call(t,a)})),n}))}),[_,S,R]);return Y||Jf(I)||X?null:H().createElement(H().Fragment,null,H().createElement("div",{className:"".concat(d,"-title")},r),H().createElement("div",{className:Hn()(["".concat(d,"-query"),{"is-disabled":$}]),onMouseOver:function(e){u&&h(!0)},onMouseLeave:function(e){g&&h(!1)},onClick:function(){if(!$){var e=b?N()(b).call(b,(function(e){var t;return Z()(t="".concat(R,"-")).call(t,e)})):[];k(e),y(!0)}}},H().createElement("div",{className:Hn()(["".concat(d,"-query-text"),(0,L.c)({},"".concat(d,"-query-text-empty"),!u)])},u||(0,W.getLangMsg)("printd.grid.key0008")),H().createElement("div",{className:"".concat(d,"-query-btn")},!$&&g&&H().createElement(z.Icon,{type:"close",style:{cursor:"pointer"},onClick:function(e){e.stopPropagation(),i.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[a,ar((0,L.c)((0,L.c)({},o,""),(0,q.camelCase)(l),[]))]]))}}),H().createElement(z.Icon,{type:"more",style:{cursor:$?"not-allowed":"pointer"}}))),H().createElement(Vr,{checkable:!0,className:"left-datasource",activedSelectId:a,modalTitle:r,meta:ee,definition:te,visible:m,onCancel:function(){return y(!1)},onSelect:function(e){var t=N()(e).call(e,(function(e){var t,n=e.key,r=e.InitAttr,a=void 0===r?{}:r,o=$n(n,te);if(!o)return{};var i=o.dataSource,l=o.ancestorTitle,u=o.key,c=o.title,d=o.dsType,s=o.ZeroShow,f=o.IgnoreTailZero,g=P()(t=C()(a)).call(t,(function(e,t){return e[(0,q.camelCase)(t)]=a[t],e}),{});return g.zeroShow=s,g.ignoreTailZero=f,Zg({bindText:"=$".concat(l),bindField:u,dataSource:i,viewText:"=$".concat(c),title:c,dsType:d},g)})),n=(0,L.c)((0,L.c)({},o,N()(t).call(t,(function(e){return e.title})).join(";")),(0,q.camelCase)(l),N()(t).call(t,(function(e){return e.bindField})));i.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[a,n]])),y(!1)},expandedKeys:G,checkedKeys:A,filterTreeData:function(e){return R?(e=function(e,t){return null!=t&&t.length?pr(e,(function(e){var n=e.bindField,r=e.dataSource,a=er(r,n);return a&&!Bn()(t).call(t,a)})):e}(e=Ar(e,_),ne),e=Og(e)):[]}}))};function jg(e,t){return Yn()(e).call(e,(function(e){var n=e.bindField,r=e.dataSource,a=e.Items;return r+"-"+n===t||(null==a?void 0:a.length)&&jg(a,t)}))}function Og(e){return P()(e).call(e,(function(e,t){var n=t.DsType,r=t.Items;return r&&(t.Items=Og(r)),"Attach"!==n&&e.push(t),e}),[])}function Ug(e,t,n){return Yn()(e).call(e,(function(e){var r=e.bindField,a=e.Items,o=r===t;return o&&n(e),o||a&&Ug(a,t,n)}))}function zg(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wg(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?U()(n=zg(Object(a),!0)).call(n,(function(t){(0,L.c)(e,t,a[t])})):b()?S()(e,b()(a)):U()(r=zg(Object(a))).call(r,(function(t){B()(e,t,k()(a,t))}))}return e}function Kg(e){var t=e.visible,n=e.onCancel,r=e.selectList,a=e.fileName,o=e.id,i=(0,V.useContext)(W.DataContext),l=(0,V.useState)(!1),u=(0,M.c)(l,2),c=u[0],d=u[1],s=(0,V.useState)([]),f=(0,M.c)(s,2),g=f[0],h=f[1],v=(0,V.useRef)(null),p="grid-guide",m=["\\","/",":","*","?","<",">","|"],C=function(){d(!1),n()};return H().createElement(z.Modal,{body:H().createElement(Vg,{checkable:!0,className:"".concat(p,"-body"),errorTipShow:c,setErrorTipShow:d,checkedNodes:g,setCheckedNodes:h,selectList:r,fileName:a,ref:v}),titleIcon:null,maskClosable:!1,className:"".concat(p,"-modal"),footer:H().createElement(H().Fragment,null,H().createElement("div",{className:"".concat(p,"-modal-footer-btns")},H().createElement(z.Button,{onClick:C,type:"second",className:"".concat(p,"-modal-cancel-btn")},(0,W.getLangMsg)("printd.components.key0011")),H().createElement(z.Button,{className:"".concat(p,"-modal-ok-btn"),type:"primary",onClick:function(){var e,t,n=null===(e=v.current)||void 0===e?void 0:e.getFormulaData();(null===(t=v.current)||void 0===t?void 0:t.getDataLen())<=100?!function(e){if(null!=e&&e.length)return Yn()(e).call(e,(function(e){return"string"==typeof e&&Yn()(m).call(m,(function(t){return Bn()(e).call(e,t)}))}))}(n)?(i.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[o,{fileName:n}]])),C()):d("existSpecialStr"):d(!0)}},(0,W.getLangMsg)("printd.components.key0012")))),width:480,height:320,title:(0,W.getLangMsg)("printd.grid.key0121"),closable:!0,destroyOnClose:!0,onCancel:C,onOk:C,mask:!0,visible:t})}var Vg=(0,V.forwardRef)((function(e,t){var n=(0,V.useRef)(),r=function(){var e;return null===(e=n.current)||void 0===e?void 0:e.getFormulaData()},a=function(){var e;return null===(e=n.current)||void 0===e?void 0:e.getDataLen()};return(0,V.useImperativeHandle)(t,(function(){return{getFormulaData:r,getDataLen:a}})),(0,V.useEffect)((function(){n.current.onAutoFocus()}),[]),H().createElement("div",{className:"".concat(e.className," fileNameRoot")},H().createElement(Hg,(0,ie.c)({ref:n},e)))}));Vg.displayName="FileNameModalBody";var Hg=(0,V.forwardRef)((function(e,t){var n=(0,V.useMemo)((function(){return function(e){var t=e.isVoid,n=e.isInline;return e.isInline=function(e){return"label"===e.type||n(e)},e.isVoid=function(e){return"label"===e.type||t(e)},e}(Qd(Ol(Nl())))}),[]),r=e.fileName,a=e.errorTipShow,o=e.className,i=e.setErrorTipShow,l=(0,V.useState)(!1),u=(0,M.c)(l,2),c=u[0],d=u[1],s=(0,V.useState)(""),f=(0,M.c)(s,2),g=f[0],h=f[1],v=(0,V.useState)(0),p=(0,M.c)(v,2),m=p[0],C=p[1],y=(0,V.useRef)(null),E=(0,V.useState)((function(){if(null!=r&&r.length){var e=[],t={type:"paragraph",children:[{text:""}]};return U()(r).call(r,(function(n,a){var o=a===r.length-1;o&&e.push(Wg({},t)),"string"==typeof n?t.children.push({text:n}):t.children.push({text:""},Wg(Wg({},n),{},{type:"label",children:[{text:""}]}),{text:""}),t=o?{type:"paragraph",children:[]}:t})),e}return[{type:"paragraph",children:[{text:""}]}]})),D=(0,M.c)(E,2),A=D[0],k=D[1],w=(0,V.useMemo)((function(){var t;return F()(t=e.selectList).call(t,(function(e){var t=e.name,n=e.key;return-1!==bn()(t).call(t,g)||-1!==bn()(n).call(n,g)}))}),[e.selectList,g]);(0,V.useEffect)((function(){return document.addEventListener("mousedown",S),function(){document.removeEventListener("mousedown",S)}}),[c]),(0,V.useImperativeHandle)(t,(function(){return{getFormulaData:x,onAutoFocus:L,getDataLen:b}}));var b=function(e){var t=((null==e?void 0:e[0])||(null==A?void 0:A[0])).children,n=0;return U()(t).call(t,(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.type,a=t.text;n+="label"===r?null==t||null===(e=t.name)||void 0===e?void 0:e.length:null==a?void 0:a.length})),n},x=function(){var e,t=(A[0]||{}).children;return F()(e=N()(t).call(t,(function(e){var t=e.type,n=e.text;return"label"===t?e:n}))).call(e,(function(e){return""!==e}))},S=function(e){if(c){var t=e.target,n=document.getElementById("kdPrintDesignerFileNameList"),r=document.getElementById("kdPrintDesignerFileNameBtn");n.contains(t)||r.contains(t)||d(!1)}},I=function(e){var t=e.target.value;h(t)},B=function(e){var t=e.name,r=e.key,a=e.type;if(y.current){Wo.select(n,y.current);var o={type:"label",name:t,key:r,textFormat:a,children:[{text:""}],id:Vd()};Wo.insertNodes(n,o),Wo.move(n),kc.focus(n)}},L=function(){var e,t,r=null===(e=n.children[0])||void 0===e||null===(e=e.children)||void 0===e?void 0:e.length,a=null===(t=n.children[0])||void 0===t||null===(t=t.children[r-1])||void 0===t||null===(t=t.text)||void 0===t?void 0:t.length,o={anchor:{path:[0,r-1],offset:a},focus:{path:[0,r-1],offset:a}};Wo.select(n,o),kc.focus(n)},R=(0,V.useMemo)((function(){return H().createElement(z.Dropdown.Menu,{id:"kdPrintDesignerFileNameList"},H().createElement("div",{className:"searchInput"},H().createElement(z.Input,{style:{marginBottom:8,marginRight:8,paddingRight:28},placeholder:(0,W.getLangMsg)("printd.grid.key0115"),borderType:"bordered",onChange:I}),H().createElement("div",{className:"image"},H().createElement("img",{src:"data:image/png;base64,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"}))),N()(w).call(w,(function(e,t){var n=e.fileViewName,r=e.key;return H().createElement(z.Dropdown.Item,{className:"".concat(0===t?"firstItem":""),key:r}," ",n)})),!w.length&&H().createElement("div",{className:"noData"},(0,W.getLangMsg)(" printd.grid.key0116")))}),[w]),T=(0,V.useCallback)((function(e){return"label"===e.element.type?H().createElement(Yg,e):H().createElement(qg,e)}),[]);return H().createElement(H().Fragment,null,a&&H().createElement(z.Alert,{className:"".concat(o,"-alert"),message:(0,W.getLangMsg)("existSpecialStr"!==a?"printd.grid.key0117":"printd.grid.key0122"),type:"error",delayOffTime:0,closable:!0,showIcon:!0,onClose:function(){return i(!1)}}),H().createElement("span",{className:"fileName"},(0,W.getLangMsg)("printd.grid.key0118")),H().createElement("div",{className:"editor"},H().createElement(Fd,{value:A,editor:n,onChange:function(e){var t=b(e);C(t),k(e)}},H().createElement(Ad,{placeholder:(0,W.getLangMsg)("printd.grid.key0119"),id:"slate-editor",renderElement:T,onKeyDown:function(e){"("===e.key&&(e.preventDefault(),n.insertText("()"),Wo.move(n,{distance:1,unit:"offset",reverse:!0}))},autoFocus:!0,onBlur:function(e){e.persist();var t=e.relatedTarget;if("INPUT"!==(null==t?void 0:t.tagName)){var r=n.selection,a={};for(var o in r){var i=r[o],l=i.path,u=i.offset;a[o]={path:Sn()(l).call(l,0,2),offset:u}}y.current=a,Wo.select(n,a),kc.focus(n)}}}))),H().createElement("div",{className:"count"},H().createElement("div",{class:"kd-input-textarea-mark"},"".concat(m,"/100"))),H().createElement("div",null,H().createElement(z.Button,{icon:H().createElement(z.Icon,{type:"add"}),onClick:function(){d(!c)},title:(0,W.getLangMsg)("printd.grid.key0120"),className:"button-basic-left",style:{marginTop:8,minWidth:85,maxWidth:200},id:"kdPrintDesignerFileNameBtn"},(0,W.getLangMsg)("printd.grid.key0120"))),H().createElement("div",{className:"helpText"},(0,W.getLangMsg)("printd.grid.key0123")," "),H().createElement(z.Dropdown,{menu:R,visible:c,onItemClick:function(e){B(Yn()(w).call(w,(function(t){return e===t.key})))}}))}));function qg(e){return H().createElement("p",e.attributes,e.children)}function Yg(e){var t=ad(),n=Md(),r=e.element.textFormat,a="Date"===r?"#FFF1D4":"Number"===r||"Amount"===r?"#DCFAE4":"#E0EFFF";return H().createElement("span",(0,ie.c)({},e.attributes,{contentEditable:!1,style:{padding:"1px 8px",margin:"0 3px",verticalAlign:"baseline",display:"inline-block",borderRadius:"2px",backgroundColor:a,fontSize:"12px",cursor:"pointer",boxShadow:t&&n?"0 0 0 2px #B4D5FF":"none",lineHeight:"18px"}}),e.element.name,e.children)}Hg.displayName="FileNameExpressionView";var Xg=function(e){var t=(0,V.useRef)(null),n=e.handleChange,r=e.value,a=e.Id,o=e.className,i=e.locked,l=e.Editor,u=e.Name,c=e.Tips,d=e.dataContext,s=e.field,f=e.Id,g=e.inputStyle,h=l.NameHidden,v=l.DataScope,p=void 0===v?[]:v,m=l.Tips,C=l.MaxLength,y=l.Min,E=l.Max,D=(0,V.useContext)(W.GlobalConfigContext).showMessage,A=(0,V.useState)(r),k=(0,M.c)(A,2),w=k[0],b=k[1],x=(0,V.useState)(""),S=(0,M.c)(x,2),I=(S[0],S[1]),B="String"===l.DataType?"string":"number",L={style:g,placeholder:(0,W.getLangMsg)("printd.grid.key0002"),borderType:"bordered",suffix:e.Unit};(0,V.useEffect)((function(){b(r)}),[r]);var R=function(e){var t="string"===B?e.target.value:""===e.target.value?"":+e.target.value;if(r!==t)if(""!==t||"number"!==B){var a,o=(0,M.c)(p,1)[0];if(!Y().isEmpty(p)&&!Y().isUndefined(o)&&t<o?(D(m.DataScope),t=o):!Y().isUndefined(y)&&t<y&&(D(m.Min),t=y),"X"===f||"Y"===f||"Height"===f||"Width"===f){var i=s.parentId,l=d.findControl(i)||{};if("TableTail"===l.type){var u=l.width,c=l.height,g=s.width,h=s.height;"X"===f&&t+g>u&&b(t=u-g),"Y"===f&&t+h>c&&b(t=c-h),"Height"===f&&t>c&&b(t=c),"Width"===f&&t>u&&b(t=u)}}a=t,n("number"!==B||a?a:0)}else b(r)},F={};if("number"===B){if(p.length){var T=(0,M.c)(p,2),N=T[0],G=T[1];F.min=N,F.max=G}Y().isUndefined(y)||(F.min=y),Y().isUndefined(E)||(F.max=E),s.type===en&&("H"===s.direction&&"Height"===a&&(F.max=3),"V"===s.direction&&"Width"===a&&(F.max=3))}var Z=(0,V.useContext)(W.GlobalConfigContext).invokePrintDesignerCustomEvent,Q=(0,V.useCallback)((function(e){Z("clickTipsLink",e)}),[Z]);return H().createElement(H().Fragment,null,H().createElement(W.NameTipWrapper,{nameHidden:h,className:o,name:u,tips:c,onLinkClick:Q}),H().createElement(z.Input,(0,ie.c)({},L,{type:B,ref:t,value:w,onKeyPress:function(e){if("string"!==B){var t=["-","+","e","E"];-1!==bn()(t).call(t,e.key)&&e.preventDefault()}},onChange:function(e){var t=e.target.value;if(""===t)return b(t);var n="string"===B?t:+t;if(C&&n.length>C&&(D(m.MaxLength),n=Sn()(n).call(n,0,C)),w!==n){if("string"===B)return b(n);var r=p[1];!Y().isUndefined(r)&&n>r?(D(m.DataScope),b(r)):!Y().isUndefined(E)&&n>E?(D(m.Max),b(E)):n>F.max&&s.type===en?(D((0,W.getLangMsg)("printd.grid.key0130")),b(F.max)):b(n)}},onFocus:function(e){return function(e){"number"===B&&t.current.select(),I("string"===B?e.target.value:""===e.target.value?"":+e.target.value)}(e)},onPressEnter:function(){},onBlur:R,onClick:function(e){var n;null===(n=t.current)||void 0===n||n.focus(),R(e)},disabled:i},F)))},_g=function(e){var t,n,r,a=e.handleChange,o=e.value,i=e.className,l=e.editor,u=e.locked,c=(e.field,l.Enum),d=l.Default,s=l.NameHidden,f=(0,V.useState)(!1),g=(0,M.c)(f,2),h=g[0],v=g[1],p=d||c&&(null!==(t=null===(n=c[0])||void 0===n?void 0:n.Value)&&void 0!==t?t:null===(r=c[0])||void 0===r?void 0:r.Id);if(null==p)return"selectValue: ".concat(p);var m=N()(c).call(c,(function(e){var t;return{value:null!==(t=e.Value)&&void 0!==t?t:e.Id,label:e.Name,disabled:!1===e.Visible}})),C=e.Name,y=e.Tips;(0,V.useRef)(null);(0,V.useEffect)((function(){var e=function(e){for(var t=e.target;t&&t!==document;){if(t.classList.contains("kds-scroll-select-panel"))return;t=t.parentNode}v(!1)};return document.addEventListener("scroll",e,!0),function(){document.removeEventListener("scroll",e,!0)}}),[]);var E=(0,V.useContext)(W.GlobalConfigContext).invokePrintDesignerCustomEvent,D=(0,V.useCallback)((function(e){E("clickTipsLink",e)}),[E]);return H().createElement(H().Fragment,null,H().createElement(W.NameTipWrapper,{nameHidden:s,className:i,name:C,tips:y,onLinkClick:D}),H().createElement(z.Select,{disabled:u,placeholder:(0,W.getLangMsg)("printd.grid.key0002"),borderType:"bordered",value:Y().isUndefined(o)?p:o,onChange:function(e){v(!1),a(e)},options:m,visible:h,onVisibleChange:function(e){v(e)},popperClassName:"kds-scroll-select-panel"}))},$g=z.Radio.Group,eh=function(e){var t=e.handleChange,n=e.value,r=e.className,a=e.editor,o=e.locked,i=e.Id,l=e.field,u=a.Enum,c=a.NameHidden,d=a.DataType,s=a.Required,f=e.Name,g=e.Tips,h=(0,V.useContext)(En).definition;if("MergePrint"===i){var v,p,m,C=l.dataSource;if(Bn()(v=C.split(".")).call(v,"workflow"))return null;var y=wr(h,C),E=null==y||null===(p=y[0])||void 0===p?void 0:p.DsType;if(Bn()(m=["Ref","Custom"]).call(m,E))return null}var D=(0,V.useContext)(W.GlobalConfigContext).invokePrintDesignerCustomEvent,A=(0,V.useCallback)((function(e){D("clickTipsLink",e)}),[D]);if("object"===(0,Kn.c)(u[0])){var k=N()(u).call(u,(function(e){return{label:e.Name,value:e.Value}}));return H().createElement(H().Fragment,null,H().createElement(W.NameTipWrapper,{nameHidden:c,className:r,name:f,tips:g,required:s,onLinkClick:A}),H().createElement($g,{disabled:o,value:null==n?void 0:n.toString(),onChange:function(e){"Boolean"===d?"false"===e.target.value?t(!1):t(!0):t(e.target.value)},options:k}))}return H().createElement(W.CheckboxPropertyEditor,(0,ie.c)({},e,{onLinkClick:A}))},th=function(e){var t=e.id,n=e.field,r=e.className,a=e.Name,o=e.Tips,i=e.Editor,l=void 0===i?{}:i,u=(0,V.useContext)(En).definition,c=["Entry","ReportEntry","Attach","Custom","Ref","Subentry","Workflow","Head","Report","Approveline","Sys"],d=(0,V.useMemo)((function(){var e,t=Yn()(u).call(u,(function(e){return"Main"===e.DsType})),n=t?N()(e=rh([t],c)).call(e,(function(e){var t,n=e.bindField,r=e.Name,a=e.ViewName;return{name:a||r,key:n,fileViewName:Z()(t="".concat(a||r,"(")).call(t,n,")")}})):[];return n.push({name:"打印人",key:"$sys.printer",fileViewName:"打印人(sys.printer)"}),n.push({name:"打印时间",key:"$sys.printTime",fileViewName:"打印时间(sys.printTime)"}),n}),[u]),s=n.fileName,f=l.NameHidden,g=(0,V.useState)(!1),h=(0,M.c)(g,2),v=h[0],p=h[1],m=(0,V.useMemo)((function(){if(null!=s&&s.length)return P()(s).call(s,(function(e,t){return"string"==typeof t?e.push(t):t.name&&e.push("{".concat(t.name,"}")),e}),[]).join("")}),[s,null==s?void 0:s.length]);return H().createElement(H().Fragment,null,H().createElement(W.NameTipWrapper,{nameHidden:f,className:r,name:a,tips:o}),H().createElement("div",{className:"".concat(r,"-query"),onClick:function(){p(!v)}},H().createElement("div",{className:Hn()(["".concat(r,"-query-text"),(0,L.c)({},"".concat(r,"-query-text-empty"),!m)])},m||(0,W.getLangMsg)("printd.grid.key0002")),H().createElement("div",{className:"".concat(r,"-query-btn")},H().createElement(z.Icon,{type:"more",style:{cursor:"pointer"}}))),H().createElement(Kg,{visible:v,selectList:d,onCancel:function(){p(!1)},onConfirm:function(){p(!1)},fileName:s,id:t}))},nh=function(e){var t;return H().createElement("div",{className:Z()(t="".concat(e.className,"-title ")).call(t,e.className,"-TextInput")},H().createElement("span",{style:{marginRight:4}},e.Name),H().createElement(Xg,(0,ie.c)({},e,{Name:""},{inputStyle:{flex:1}})))};function rh(e,t){return P()(e).call(e,(function(e,n){if(!n)return[];var r=n.Items,a=n.DsType,o=n.Type,i=n.Icon;return r||Bn()(t).call(t,a)||"Image"===o||"fujian"===i||e.push(n),r&&!Bn()(t).call(t,a)&&"Image"!==o&&"fujian"!==i&&e.push.apply(e,(0,kn.c)(rh(r,t))),e}),[])}var ah=function(){var e=[],t=[[a,"Text"],[i,"CardGrid"],[a,"LayoutCell"],[a,"CardCell"],[s,"RichText"],[o,"DataCell"],[i,"DataGrid"],[g,"SubDataGrid"],[f,"SubDataCell"],[l,"QRCode"],[u,"Barcode"],[c,"Image"],[d,"Paper"],[h,"DataRow"],[v]];return U()(t).call(t,(function(t){var n,r=(0,M.c)(t,2),a=r[0],o=r[1];U()(n=C()(a)).call(n,(function(t){e.push([t,a[t],o])}))})),e};function oh(e,t){var n=e.dataContext,r=e.selectionContext;if("right"===t){var a,o=n.getRootId();return Y().last(Z()(a=[o]).call(a,(0,kn.c)(r.getSelection())))===o?"PrintSetting":"PropertyView"}}var ih=["FontName","FontSize","Bold","Italic","UnderLine","ForeColor","BackColor","HorAlignment","Border","BorderType","VerAlignment","Padding","Strike","LineSpace"],lh=function(e,t){var n=t.Id;return Bn()(ih).call(ih,n)},uh=function(e){return"Header"===e.type},ch=function(e){return"Footer"===e.type},dh=function(e){return"Barcode"===e.type},sh=function(e){return e?e.parentId?e:(0,ie.c)({},e,{width:Math.max(e.width-(e.marginLeft+e.marginRight),e.marginLeft+e.marginRight),height:Math.max(e.height-(e.marginTop+e.marginBottom),e.marginTop+e.marginBottom),x:0,y:0}):e},fh=n(31408),gh=n.n(fh);function hh(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function vh(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?U()(n=hh(Object(a),!0)).call(n,(function(t){(0,L.c)(e,t,a[t])})):b()?S()(e,b()(a)):U()(r=hh(Object(a))).call(r,(function(t){B()(e,t,k()(a,t))}))}return e}var ph=function(e){var t,n,r,a=e.change,o=e.id,i=e.dataContext,l=e.globalConfig,u=e.addActionRef,c=e.action,d=(l.definition,l.dataRef),s=l.showMessage,f=i.getRootId(),g=i.findControl(o);if("key"in a){var h,v=N()(h=d.current).call(h,(function(e){return e.key}));if(Bn()(v).call(v,a.key))return s((0,W.getLangMsg)("printd.grid.key0048")),{change:g.key,id:o}}if(Zf(g)){var p="height"in a,m="width"in a;if(p||m){var y=p?tt:et,E=y===tt,D=(g[y],a[y]),A=g.parentId,k=g.rowId,w=g.columnId,b=i.findControl(k),x=i.findControl(w),S=[[o,(0,L.c)({},y,D)],E?[b.id,{rowHeight:D}]:[x.id,{columnWidth:D}]],I=i.findControl(A);if(I.mergeConfig){var B=hg({items:i.getData().items,gridData:I,rowId:k,columnId:w});if(B.length){var R,T,G=new(fa());m?U()(B).call(B,(function(e){G.add(e.columnId)})):U()(B).call(B,(function(e){G.add(e.rowId)}));var Q=N()(R=(0,kn.c)(G)).call(R,(function(e){return i.findControl(e)})),J=m?a.width:a.height,j=m?"columnWidth":"rowHeight",O=N()(T=vg(N()(Q).call(Q,(function(e){return e[j]})),J)).call(T,(function(e,t){return[Q[t].id,(0,L.c)({},j,e)]}));return O.unshift.apply(O,S),W.console.log(Y().cloneDeep(O),"afterChange",tg(O)),tg(O)}}return tg(S)}}if(g&&function(e){return"Line"===e.type}(g)){if(a.border){var z,K=F()(z=de()(a.border.width)).call(z,(function(e){return e}))[0];if("color"!==a.changeBorderType){var V,H;a.height=Ks(K,a.scale/100,2);var q=["dashed","dotted"],X=a.border&&F()(V=de()(a.border.style)).call(V,(function(e){return e}))[0],_=g.border&&F()(H=de()(g.border.style)).call(H,(function(e){return e}))[0];if(Bn()(q).call(q,X)&&Bn()(q).call(q,_)||"solid"===X&&"solid"===_);else{var $,ee,te,ne,re=g.border&&F()($=de()(g.border.color)).call($,(function(e){return e}))[0],ae=g.border&&F()(ee=de()(g.border.width)).call(ee,(function(e){return e}))[0];U()(te=C()(g.border.color)).call(te,(function(e){a.border.color[e]=re})),U()(ne=C()(g.border.width)).call(ne,(function(e){a.border.width[e]=ae}))}}else{var oe,le,ue=g.border&&F()(oe=de()(g.border.style)).call(oe,(function(e){return e}))[0];U()(le=C()(g.border.style)).call(le,(function(e){a.border.style[e]=ue}))}"V"===g.direction&&(a.width=a.height||g.width,a.height=g.height)}return a.direction&&a.direction!==g.direction&&(a.width=g.height,a.height=g.width),{change:a,id:o}}if(g&&dh(g)&&"rotate"in a){var ce=g.width,se=g.height,fe=g.x,ge=g.y;if(t=g,n=a.rotate,r=t.rotate,Math.abs(n-r)%180==90){a.width=se,a.height=ce;var he={x:qs(fe+ce/2-se/2),y:qs(ge+se/2-ce/2)};a.x=he.x,a.y=he.y}return{id:o,change:a}}if(g&&function(e){return!!e&&"Text"===e.type}(g)&&ze in a){var ve=c[Ft]||g[Ft];a[Ft]=ve||g[Ft]}if(Qf(g)){var pe=Y().cloneDeep(g),me=Y().cloneDeep((0,ie.c)({},pe,a)),Ce=[[o,a]],ye=i.getData().items,Ee=F()(ye).call(ye,(function(e){return e.parentId===o})),De=df(Ee),Ae=De.rows,ke=void 0===Ae?[]:Ae,we=De.columns,be=void 0===we?[]:we,xe=De.cells,Se=void 0===xe?[]:xe,Ie=(De.rowData,De.columnData,me.x),Be=me.y,Me=me.id,Le=me.height,Re=me.width,Fe=(me.detailRowHeight,me.fixedRowAtPage),Te=me.fixedRowCount,Ne=me.mergeConfig,Ge=(me.subGridId,me.parentGridId,me.subGridDirection,me.pagePrintN),Ze=me.pagePrint,Qe=Pf(g),Pe=(jf(g),Qe?Te:Ge),Je=Qe?Fe:Ze,je=cf({columns:be,rows:ke,cells:Se,mergeConfig:Ne,templateRowCount:Pe,fixedRowAtPage:Je,allItems:i.getData().items}).rowData;if(ze in a){var Oe,Ue,We=c.changeType,Ke=a.gridBorder,Ve=a[ze];g[ze];if(Ke)Ue=function(e,t,n,r,a){var o,i;if(!r.length)return null;var l=a.rc,u=a.cc,c=Bn()(o=["dashed","dotted"]).call(o,n)?.5:t===Gt?2:n,d=Bn()(i=["dashed","dotted"]).call(i,n)?n:"solid",s=t===Nt||t===Gt;return U()(r).call(r,(function(n){var r=n.cells;U()(r).call(r,(function(n){var r=n.row,a=n.column,o=n.mergeConfig||{},i=o.columnLength,f=o.columnStart,g=o.rowLength,h=o.rowStart;(t===Pt||s)&&0===a&&(n[ze].width.left=c,n[ze].color.left=e,n[ze].style.left=d),(t===jt||s)&&(a!==u-1&&i+f!==u||(n[ze].width.right=c,n[ze].color.right=e,n[ze].style.right=d)),(t===Jt||s)&&0===r&&(n[ze].width.top=c,n[ze].color.top=e,n[ze].style.top=d),(t===Ot||s)&&(r!==l-1&&g+h!==l||(n[ze].width.bottom=c,n[ze].color.bottom=e,n[ze].style.bottom=d)),t===Qt&&U()(ut).call(ut,(function(e){n[ze].width[e]=0})),t===Zt&&(n[ze].width.left=c,n[ze].color.left=e,n[ze].style.left=d,n[ze].width.top=c,n[ze].color.top=e,n[ze].style.top=d,r!==l-1&&g+h!==l||(n[ze].width.bottom=c,n[ze].color.bottom=e,n[ze].style.bottom=d),a!==u-1&&i+f!==u||(n[ze].width.right=c,n[ze].color.right=e,n[ze].style.right=d)),t===Tt&&(0!==a&&(n[ze].width.left=c,n[ze].color.left=e,n[ze].style.left=d),0!==r&&(n[ze].width.top=c,n[ze].color.top=e,n[ze].style.top=d))}))})),r}(Ke.color,Ke.type,Ke.line,je,{rc:ke.length,cc:be.length}),delete a.gridBorder;else"borderWidth"===We?Ue=function(e,t){var n=fg(e)[3];return U()(t).call(t,(function(e){var t=e.cells;U()(t).call(t,(function(e){e[ze]=Nf(e[ze],void 0,n,void 0,"solid")}))})),t}(Ve,je):"borderColor"===We?Ue=function(e,t){var n=fg(e)[1];return U()(t).call(t,(function(e){var t=e.cells;U()(t).call(t,(function(e){e[ze]=Nf(e[ze],void 0,void 0,n,void 0)}))})),t}(Ve,je):"borderStyle"===We?Ue=function(e,t){var n=fg(e)[2];return U()(t).call(t,(function(e){var t=e.cells;U()(t).call(t,(function(e){e[ze]=Nf(e[ze],void 0,void 0,void 0,n)}))})),t}(Ve,je):a.formatBrush?(Ue=function(e,t,n){var r=n.rc,a=n.cc;return U()(e).call(e,(function(e){var n=e.cells;U()(n).call(n,(function(e){var n=e.row,o=e.column,i=e.mergeConfig||{},l=i.columnLength,u=i.columnStart,c=i.rowLength,d=i.rowStart;0===o&&(e[ze].width.left=t.width.left,e[ze].color.left=t.color.left,e[ze].style.left=t.style.left),o!==a-1&&l+u!==a||(e[ze].width.right=t.width.right,e[ze].color.right=t.color.right,e[ze].style.right=t.style.right),0===n&&(e[ze].width.top=t.width.top,e[ze].color.top=t.color.top,e[ze].style.top=t.style.top),n!==r-1&&c+d!==r||(e[ze].width.bottom=t.width.bottom,e[ze].color.bottom=t.color.bottom,e[ze].style.bottom=t.style.bottom)}))})),e}(Y().cloneDeep(je),a.border,{rc:ke.length,cc:be.length}),delete a.formatBrush):Ue=gg(Ve,void 0,je,ke.length,be.length);return Ue?Z()(Ce).call(Ce,N()(Oe=P()(Ue).call(Ue,(function(e,t){return Z()(e).call(e,t.cells)}),[])).call(Oe,(function(e){return[e.id,{border:e.border}]}))):Ce}var He=pe.x,qe=pe.y,Ye=pe.fixedRowAtPage,Xe=pe.height,nt=pe.width,rt=(pe.detailRowHeight,pe.fixedRowCount),ot=pe.mergeConfig,it=pe.tableTailId,lt=pe.pagePrint,ct=pe.pagePrintN,dt=Qe?Ye:lt,st=Qe?rt:ct,ft=Of(i).height,gt=it?i.findControl(it).height:0,ht=function(e){ft-qe-e-gt<0&&s((0,W.getLangMsg)("printd.grid.key0131"))};if(dt!==Je){var vt;if(Qe){var pt=Yn()(ke).call(ke,(function(e){return e.rowType===At}));vt=(null==pt?void 0:pt.rowHeight)*(Te-1)}else vt=P()(je).call(je,(function(e,t){return e+t.row.rowHeight}),0)*(Pe-1);var mt=Je?Le+vt:Le-vt;it&&Ce.push([it,{y:mt+qe,isfixedRowAtPage:!0}]),Ce.push([o,{height:mt,x:He,y:qe,isfixedRowAtPage:!0}]),ht(mt)}if(Pe!==st){var Ct,yt=Pe-st;if(Qe){var Et=Yn()(ke).call(ke,(function(e){return e.rowType===At}));Ct=(null==Et?void 0:Et.rowHeight)*yt}else Ct=P()(je).call(je,(function(e,t){return e+t.row.rowHeight}),0)*yt;var Dt=Le+Ct;Ce.push([o,{height:Dt}]),ht(Dt)}if(Xe!==Le||nt!==Re){var kt=function(e){var t,n,r,a,o,i,l,u,c=e.x,d=e.y,s=e.width,f=e.height,g=e.id,h=e.rows,v=e.columns,p=e.dataContext,m=Y().cloneDeep(p.getData()).items,C=Yn()(m).call(m,(function(e){return e.id===g})),y=C.width,E=C.height,D=C.fixedRowAtPage,A=C.fixedRowCount,k=C.pagePrint,w=C.pagePrintN;C.x=void 0===c?C.x:c,C.y=void 0===d?C.y:d,C.width=s,C.height=f;var b=f,x=N()(h).call(h,(function(e){return e.id})),S=N()(v).call(v,(function(e){return e.id})),I=F()(m).call(m,(function(e){return Bn()(x).call(x,e.id)})),B=Yn()(I).call(I,(function(e){return e.rowType===At})),M=F()(m).call(m,(function(e){return Bn()(S).call(S,e.id)})),L=Pf(C)?D&&A>1?N()(t=Js()(n=new Array(A-1)).call(n,0)).call(t,(function(){return B.rowHeight})):[]:k&&w>1?N()(r=Js()(a=new Array(h.length*(w-1))).call(a,0)).call(r,(function(e,t){return h[t%h.length].rowHeight})):[],R=pg(vg(Z()(o=N()(I).call(I,(function(e){return e.rowHeight}))).call(o,L),b),f),T=pg(vg(N()(M).call(M,(function(e){return e.columnWidth})),s),s);if(Y().isEqual(Sn()(R).call(R,0,I.length),N()(I).call(I,(function(e){return e.rowHeight})))&&Y().isEqual(T,N()(M).call(M,(function(e){return e.columnWidth}))))return[[g,{width:y,height:E}]];var G=N()(I).call(I,(function(e,t){return e.rowHeight=R[t],e})),Q=N()(M).call(M,(function(e,t){return e.columnWidth=T[t],e})),P=F()(i=N()(m).call(m,(function(e){var t=e.id,n=e.rowId,r=e.columnId;return t===C.id?[C.id,eg(C,[_e,$e,tt,et])]:Bn()(x).call(x,t)?[t,eg(Yn()(G).call(G,(function(e){return e.id===t})),[Ut])]:Bn()(S).call(S,t)?[t,eg(Yn()(Q).call(Q,(function(e){return e.id===t})),[zt])]:Bn()(x).call(x,n)&&Bn()(S).call(S,r)?[t,(0,ie.c)({},eg(Yn()(G).call(G,(function(e){return e.id===n})),[Ut],[tt]),eg(Yn()(Q).call(Q,(function(e){return e.id===r})),[zt],[et]))]:null}))).call(i,Boolean),J=F()(l=N()(m).call(m,(function(e){var t=e.id,n=(e.rowId,e.columnId,e.parentId),r=n?p.findControl(n):null;if(!r||!qf(r))return null;var a=r.rowId,o=r.columnId;if(Bn()(x).call(x,a)&&Bn()(S).call(S,o)){var i={},l=gf({field:r,dataContext:p}),u=l.width,c=l.height,d=p.findControlByCondition((function(e){return e.parentId===n}));return 1===d.length&&(0,ie.c)(i,{width:u,height:c}),[t,(0,ie.c)({},eg(Yn()(G).call(G,(function(e){return e.id===a})),[Ut],[tt]),eg(Yn()(Q).call(Q,(function(e){return e.id===o})),[zt],[et]),i)]}}))).call(l,Boolean);return Z()(u=[]).call(u,(0,kn.c)(P),(0,kn.c)(J))}({x:Ie,y:Be,width:Re,height:Le,rows:ke,columns:be,dataContext:i,id:o});kt&&Ce.push.apply(Ce,(0,kn.c)(kt))}if(!Y().isEqual(me,pe)){var wt={};if(U()(at).call(at,(function(e){me[e]!==pe[e]&&(wt[e]=me[e])})),!Y().isEmpty(wt)){var bt=Y().cloneDeep(i.getData()).items,xt=P()(bt).call(bt,(function(e,t){var n=t.id,r=(t.type,t.parentId),a=Yn()(bt).call(bt,(function(e){return e.id===r})),i=[];if(Zf(t)&&r===o||Zf(a)&&a.parentId===o){var l,u={};U()(l=gh()(wt)).call(l,(function(e){var n=(0,M.c)(e,2),r=n[0],a=n[1];r in t&&(u[r]=a)})),Y().isEmpty(u)||i.push([n,u])}return Z()(e).call(e,i)}),[]);Ce.push.apply(Ce,(0,kn.c)(xt))}}if(!Y().isEqual(ot,Ne)){var It,Bt,Mt,Rt=Y().cloneDeep(F()(It=N()(Ee).call(Ee,(function(e){if(e.parentId===Me)return e}))).call(It,Boolean)),Wt=df(Rt),Kt=(Wt.columns,Wt.cells),Vt=Wt.columnCount,Ht=lf(Vt),qt=F()(Bt=N()(Mt=C()(Ne)).call(Mt,(function(e){return ot[e]&&Y().isEqual(Ne[e],ot[e])?void 0:e}))).call(Bt,Boolean);U()(qt).call(qt,(function(e){var t,n=Ne[e],r=n.rowStart,a=n.rowLength,o=n.columnStart,i=n.columnLength,c=Yn()(Rt).call(Rt,(function(e){return e.id===Kt[Ht(r,o)].id})),d=!0;_n()(t=C()(St)).call(t,(function(e){return c[e]}))||(Yn()(Ee).call(Ee,(function(e){return e.parentId===c.id}))||(d=!1));if(!d)for(var s=r;s<=r+a-1;s++)for(var f=function(){if(d)return 1;if(s!==r||g!==o){var e,t=Kt[Ht(s,g)];if(_n()(e=C()(St)).call(e,(function(e){return t[e]}))){var n,a={};U()(n=C()(t)).call(n,(function(e){Bn()(Lt).call(Lt,e)||(c[e]=t[e],a[e]=t[e])})),Ce.push([c.id,a]),d=!0}var i=Yn()(Ee).call(Ee,(function(e){return e.parentId===t.id}));if(i){var f=(0,ie.c)({},i,{parentId:c.id}),h=l.dataRef;f.key=(0,W.createUniqueKey)(f.key,f.type,h.current),h.current.push(f),u.current.push(f),d=!0}}},g=o;g<=o+i-1&&!f();g++);}))}var Yt=tg(Ce);if(1===Yt.length){var Xt=(0,M.c)(Yt[0],2);return{id:Xt[0],change:Xt[1]}}return Yt}if(g&&g.id===f){var _t="height"in a||"marginTop"in a||"marginBottom"in a,$t="width"in a||"marginLeft"in a||"marginRight"in a,en=i.findControlByCondition((function(e){return"Footer"===e.type}))[0],tn=i.findControlByCondition((function(e){return"Header"===e.type}))[0],nn=[[o,a]],rn=a.height,an=a.width,on=a.marginTop,ln=a.marginBottom,un=a.marginLeft,cn=a.marginRight;rn=Y().isUndefined(rn)?g.height:rn,an=Y().isUndefined(an)?g.width:an,on=Y().isUndefined(on)?g.marginTop:on,ln=Y().isUndefined(ln)?g.marginBottom:ln,un=Y().isUndefined(un)?g.marginLeft:un,cn=Y().isUndefined(cn)?g.marginRight:cn;var dn=Math.max(rn-Math.max(on,0)-Math.max(ln,0),0),sn=Math.max(an-Math.max(un,0)-Math.max(cn,0),0);if(en&&(_t||$t)){var fn=en.height,gn=en.id;nn.push([gn,vh(vh({},en),{},{width:sn,y:dn-fn})])}if(tn&&$t){var hn=tn.id;nn.push([hn,vh(vh({},tn),{},{width:sn})])}return nn}if(g&&ch(g)){if("height"in a){var vn=a.height,pn=i.findControl(f),mn=pn.marginTop,Cn=pn.marginBottom,yn=pn.height,En=Math.max(yn-Math.max(mn,0)-Math.max(Cn,0),0)-vn,Dn=[[o,vh(vh({},a),{},{y:En})]],An=i.findControlByCondition((function(e){return"Header"!==e.type&&"Footer"!==e.type&&e.parentId===f&&e.y+e.height>En}))||[],wn=N()(An).call(An,(function(e){return[e.id,{y:En-e.height}]}));return Dn.push.apply(Dn,(0,kn.c)(wn)),Dn}return{id:o,change:a}}if(g&&uh(g)){if("height"in a){var xn=a.height,In=[[o,a]],Mn=i.findControlByCondition((function(e){return"Header"!==e.type&&"Footer"!==e.type&&e.parentId===f&&e.y<xn})),Ln=Mn&&N()(Mn).call(Mn,(function(e){return[e.id,{y:xn}]}));return In.push.apply(In,(0,kn.c)(Ln)),In}return{id:o,change:a}}if(g&&Kf(g)){var Rn="mergeSummaryField"in a;if("mergeByField"in a&&a.mergeByField&&g.mergeByField){var Tn,Nn=a.mergeByFieldText,Gn=a.mergeByField,Zn=Gn?Gn.split(";"):[],Qn=g.id,Pn=g.mergeSummaryField,Jn=g.mergeSummaryFieldText,jn=Jn?Jn.split(";"):[],On=[[o,a]],Un=i.findControlByCondition((function(e){return Vf(e)&&e.rowId===Qn})),zn=F()(Tn=N()(Un).call(Un,(function(e){var t=e.mergeSummary,n=e.bindField,r=e.id;return bn()(Zn).call(Zn,n)>-1&&t?[r,{mergeSummary:!1}]:null}))).call(Tn,Boolean);return On.push.apply(On,(0,kn.c)(zn)),On.push([Qn,{mergeSummaryField:F()(Pn).call(Pn,(function(e){return-1===bn()(Zn).call(Zn,e)})),mergeSummaryFieldText:F()(jn).call(jn,(function(e){return!Fn()(Nn).call(Nn,e)})).join(";")}]),On}if(Rn){var Wn,Kn=g.id,Vn=a.mergeSummaryField,Hn=[[o,a]],qn=i.findControlByCondition((function(e){return Vf(e)&&e.rowId===Kn})),Xn=F()(Wn=N()(qn).call(qn,(function(e){var t=e.mergeSummary,n=e.bindField,r=e.id,a=Bn()(Vn).call(Vn,n);return a!==t?[r,{mergeSummary:a}]:null}))).call(Wn,Boolean);return Hn.push.apply(Hn,(0,kn.c)(Xn)),Hn}return{id:o,change:a}}if(g&&Vf(g)){var $n=g.bindField,er="bindField"in a;if("mergeSummary"in a&&$n){var tr=g.rowId,nr=g.viewText,rr=a.mergeSummary,ar=nr.replace(/^=\$(\S+)$/g,"$1"),or=i.findControl(tr),ir=or.mergeSummaryField,lr=or.mergeSummaryFieldText,ur=lr?lr.split(";"):[],cr=i.findControlByCondition((function(e){return Vf(e)&&e.rowId===tr})),dr=F()(cr).call(cr,(function(e){return e.bindField===$n})).length>1,sr=[[o,a]];return rr&&!Bn()(ir).call(ir,$n)?sr.push([tr,{mergeSummaryField:Z()(ir).call(ir,$n),mergeSummaryFieldText:Z()(ur).call(ur,ar).join(";")}]):rr||!Bn()(ir).call(ir,$n)||dr||sr.push([tr,{mergeSummaryField:F()(ir).call(ir,(function(e){return e!==$n})),mergeSummaryFieldText:F()(ur).call(ur,(function(e){return e!==ar})).join(";")}]),sr}if(er){var fr,gr,hr=g.viewText,vr=g.rowId,pr=g.bindField,mr=g.mergeSummary,Cr=hr.replace(/^=\$(\S+)$/g,"$1"),yr=i.findControl(vr),Er=yr.mergeSummaryField,Dr=yr.mergeSummaryFieldText,Ar=yr.mergeByFieldText,kr=yr.mergeByField,wr=Dr?Dr.split(";"):[],br=Ar?Ar.split(";"):[],xr=kr?kr.split(";"):[],Sr=i.findControlByCondition((function(e){return Vf(e)&&e.rowId===vr})),Ir=F()(Sr).call(Sr,(function(e){return e.bindField===pr})).length>1,Br=[[o,a]];if(pr&&Bn()(xr).call(xr,pr)&&!Ir)Br.push([vr,{mergeByField:Z()(fr=F()(xr).call(xr,(function(e){return e!==$n}))).call(fr,a.bindField).join(";"),mergeByFieldText:Z()(gr=F()(br).call(br,(function(e){return e!==Cr}))).call(gr,a.viewText.replace(/^=\$(\S+)$/g,"$1")).join(";")}]);return pr&&mr&&Bn()(Er).call(Er,pr)&&!Ir&&(Br.push([vr,{mergeSummaryField:F()(Er).call(Er,(function(e){return e!==pr})),mergeSummaryFieldText:F()(wr).call(wr,(function(e){return e!==Cr})).join(";")}]),Br.push([o,{mergeSummary:!1}])),Br}}return{id:o,change:a}},mh=function(e,t,n){var r=Y().cloneDeep(e),a=[];return{items:P()(r).call(r,(function(e,r){var o=(0,M.c)(r,2),i=o[0],l=o[1],u=t.findControl(i);return n(u,l,i,t)?(a.push(r),null==e?void 0:Z()(e).call(e,u)):e}),[]),changes:a}},Ch=function(e){var t=e.realChange,n=e.dataContext,r=mh(t,n,(function(e){return e&&(Pf(e)||jf(e))})),a=r.items,o=r.changes,i=mh(t,n,(function(e){return e&&Jf(e)})),l=i.items,u=i.changes,c=mh(t,n,(function(e){return e&&Yf(e)})),d=c.items,s=c.changes;null!=a&&a.length&&U()(a).call(a,(function(e,r){var a=(0,M.c)(o[r],2),i=(a[0],a[1]),l=e,u=(0,ie.c)({},Y().cloneDeep(e),i),c=u.x,d=u.y,s=u.subGridId,f=u.width,g=u.height,h=u.tableTailId,v=(u.hasTableTail,l.x),p=l.y,m=l.width,C=l.height;if(s&&s.length>0){var y=n.findControl(s);U()(y).call(y,(function(e){var n=e.subGridDirection,r=e.id,a={};"right"===n?(c===v&&f===m||(a.x=Hs(c+f,1)),d!==p&&(a.y=d)):(d===p&&g===C||(a.y=Hs(d+g,1)),c!==v&&(a.x=c)),Y().isEmpty(a)||t.push([r,a])}))}if(h){var E=n.findControl(h),D={x:c-v+E.x,y:d+g};(E.x<c||E.x>c+f)&&(D.x=c),t.push([h,D])}})),null!=l&&l.length&&U()(l).call(l,(function(e,r){var a=(0,M.c)(u[r],2),o=(a[0],a[1]),i=e,l=(0,ie.c)({},Y().cloneDeep(e),o),c=l.parentGridId,d=l.x,s=l.y,f=l.subGridDirection,g=i.x,h=i.y,v=n.findControl(c),p={};"right"===f?(d!==g&&(p.x=Hs(d-v.width,1)),s!==h&&(p.y=s)):(s!==h&&(p.y=Hs(s-v.height,1)),d!==g&&(p.x=d)),Y().isEmpty(p)||t.push([c,p])})),null!=a&&a.length||null==d||!d.length||U()(d).call(d,(function(e,r){var a=(0,M.c)(s[r],2),o=(a[0],a[1]),i=e,l=(0,ie.c)({},e,o),u=l.parentGridId,c=l.y,d=i.y,f=n.findControl(u),g={};c!==d&&(g.y=Hs(c-f.height,1)),Y().isEmpty(g)||t.push([u,g])}))},yh=function(e,t,n){var r,a=e.dataContext,o=(e.selectionContext,e.globalConfig),i=e.action,l=a.getRootId(),u=i.value;if(u.length){if(1===u.length){var c=(0,M.c)(u,1),d=(0,M.c)(c[0],2),s=d[0],f=d[1];if(s===l&&"language"in f)return void W.eventBus.emit("beforeChangeLang",{resolve:t,reject:n,value:f.language});if("hasTableTail"in f)return void W.eventBus.emit("beforeChangeGridFooter",{resolve:t,reject:n,tableTail:f.hasTableTail,parentGridId:s});var g=a.findControl(s);if(g&&("x"in f||"y"in f)){var h=f.x,v=f.y,p=g.parentId,m=a.findControl(p)||{};if("TableTail"===m.type){var C=m.width,y=m.height,E=g.width,D=g.height;h+E>C&&(f.x=Math.max(C-E,0)),v+D>y&&(f.y=Math.max(y-D,0))}}}var A={current:[]},k=tg(P()(u).call(u,(function(e,t){var n=(0,M.c)(t,2),r=n[0],l=n[1],u=ph({change:l,id:r,globalConfig:o,dataContext:a,addActionRef:A,action:i});return zn()(u)?e.push.apply(e,(0,kn.c)(u)):e.push([u.id,u.change]),e}),[])),w=mh(k,a,(function(e,t){return e&&(zf(e)||Wf(e))&&(Ut in t||zt in t)})),b=w.items,x=w.changes;if(null!=b&&b.length){var S=a.findControl(b[0].parentId),I=S.id,B=a.findControlByCondition((function(e){return e.parentId===I&&(zf(e)||Wf(e))})),L=Pf(S),R=jf(S);k.push([I,Xs(P()(B).call(B,(function(e,t){var n,r=t.id,a=null===(n=Yn()(x).call(x,(function(e){return(0,M.c)(e,1)[0]===r})))||void 0===n?void 0:n[1],o=a?(0,ie.c)({},t,a):t;return zf(o)?Kf(o)&&L&&S.fixedRowAtPage&&S.fixedRowCount>1?e.height+=o.rowHeight+o.rowHeight*Math.max(S.fixedRowCount-1,1):R&&S.pagePrint&&S.pagePrintN>1?e.height+=o.rowHeight+o.rowHeight*Math.max(S.pagePrintN-1,1):e.height+=o.rowHeight:e.width+=o.columnWidth,e}),{width:0,height:0}))]),k=tg(k)}Ch({realChange:k,dataContext:a});var T=function(e,t){var n,r,a=mh(e,t,(function(e){return e&&_f(e)})),o=a.items,i=(a.changes,Y().cloneDeep(t.getData()).items);U()(e).call(e,(function(e){var t,n=(0,M.c)(e,2),r=n[0],a=n[1],o=Yn()(i).call(i,(function(e){return e.id===r}));o&&U()(t=gh()(a)).call(t,(function(e){var t=(0,M.c)(e,2),n=t[0],r=t[1];o[n]=r}))}));var l=[];if(null===(n=o)||void 0===n||!n.length){var u,c,d=mh(e,t,(function(e,t,n,r){var a=e&&r.findControl(e.parentId);return a&&_f(a)&&e&&(zf(e)||Wf(e))&&(Ut in t||zt in t)})),s=d.items;null!=s&&s.length&&(o=F()(u=N()(c=(0,kn.c)(new(fa())(N()(s).call(s,(function(e){return e.parentId}))))).call(c,(function(e){return Yn()(i).call(i,(function(t){return t.id===e}))}))).call(u,Boolean))}return null!==(r=o)&&void 0!==r&&r.length&&U()(o).call(o,(function(e){var t,n=e.id,r=(Yn()(i).call(i,(function(e){return e.id===n})),F()(t=N()(i).call(i,(function(e){if(e.parentId===n)return e}))).call(t,Boolean)),a=df(r).cells;U()(a).call(a,(function(e){var t=e.id,n=Yn()(i).call(i,(function(e){return e.parentId===t}));if(n){var r=gf({field:e,dataContext:(0,W.createDataContext)(void 0,{items:i},{keywordMapping:{id:"id",type:"type",name:"name",key:"key",parentId:"parentId",items:"items"}})});if(r){var a=r.width,o=r.height,u=n.id,c=n.width,d=n.height,s={};c>a&&(s.width=a),d>o&&(s.height=o),Y().isEmpty(s)||l.push([u,s])}}}))})),l}(k,a);return F()(r=[{type:W.ActionType.UPDATE,value:tg(Z()(k).call(k,T))},A.current.length&&(0,W.createAddAction)(A.current)]).call(r,Boolean)}},Eh=(z.Icon,(0,W.getLangMsg)("printd.grid.key0114"),(0,W.getLangMsg)("printd.grid.key0114"),z.Icon,(0,W.getLangMsg)("printd.grid.key0114"),(0,W.getLangMsg)("printd.grid.key0114"),z.Icon,(0,W.getLangMsg)("printd.grid.key0114"),(0,W.getLangMsg)("printd.grid.key0114"),z.Icon,(0,W.getLangMsg)("printd.grid.key0114"),(0,W.getLangMsg)("printd.grid.key0114"),z.Icon,(0,W.getLangMsg)("printd.grid.key0114"),(0,W.getLangMsg)("printd.grid.key0114"),{color:{top:"#000000",left:"#000000",bottom:"#000000",right:"#000000",inner:"#000000"},width:{top:.5,left:.5,bottom:.5,right:.5,inner:.5},style:{top:"solid",left:"solid",bottom:"solid",right:"solid",inner:"solid"}});function Dh(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ah(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?U()(n=Dh(Object(a),!0)).call(n,(function(t){(0,L.c)(e,t,a[t])})):b()?S()(e,b()(a)):U()(r=Dh(Object(a))).call(r,(function(t){B()(e,t,k()(a,t))}))}return e}var kh=["color","width","style"],wh=["left","right"];function bh(e,t,n){var r=e.globalConfig,a=e.dataContext,o=e.selectionContext,i=e.action,l=e.dataFactory,u=(e.modelFactory,r.showMessage),c=null,d=i.value,s=zn()(d)?d:[d],f=zn()(d)?d[0]:d,g=a.getRootId(),h=a.findControl(g),v=h.width,p=h.height,m=h.marginBottom,y=h.marginTop,E=h.marginLeft,D=h.marginRight,A=Math.max(p-Math.max(y,0)-Math.max(m,0),0),k=Math.max(v-Math.max(E,0)-Math.max(D,0),0),w=f.type,b=f.parentId,x=f.height,S=f.width,I=f.y,B=f.x,L=f.id,R=a.findControl(b),T=R.height,G=R.type,Q=a.findControlByCondition((function(e){return"Header"===e.type})),J=a.findControlByCondition((function(e){return"Footer"===e.type}));if(zn()(d)||"DataGrid"!==w&&w!==gt)if("LayoutGrid"!==w){if("CardGrid"!==w){if(uh(f))if(Q.length)u((0,W.getLangMsg)("printd.grid.key0043")),n((0,W.getLangMsg)("printd.grid.key0044"));else{b!==g&&n((0,W.getLangMsg)("printd.grid.key0042")),f.width=k,f.x=0,f.y=0;var j=a.findControlByCondition((function(e){return"Header"!==e.type&&"Footer"!==e.type&&e.parentId===g&&e.y<x}));c=j&&N()(j).call(j,(function(e){return[e.id,{y:x}]})),document.getElementById("printDesignerCanvasContainer").scrollTop=0}if(ch(f))if(J.length)u((0,W.getLangMsg)("printd.grid.key0046")),n((0,W.getLangMsg)("printd.grid.key0047"));else{b!==g&&n((0,W.getLangMsg)("printd.grid.key0045")),f.width=k,f.x=0,f.y=A-x;var O=a.findControlByCondition((function(e){return"Header"!==e.type&&"Footer"!==e.type&&e.parentId===g&&e.y+e.height>f.y}))||[];c=O&&N()(O).call(O,(function(e){var t=function(e,t){var n=e.height,r=e.subGridId;if(Pf(e)&&null!=r&&r.length){var a=t.findControl(r[0]),o=a.subGridDirection,i=a.height;if("bottom"===o)return qs(n+i,1);if("right"===o)return Math.max(n,i)}if(Jf(e)){var l=e.subGridDirection,u=e.parentGridId,c=t.findControl(u).height;if("right"===l)return Math.max(n,c)}return n}(e,a);return[e.id,{y:qs(f.y-t,1)}]}));var z=document.getElementById("printDesignerCanvasContainer"),K=z.scrollHeight;z.scrollTop=K}if((uh(R)||ch(R)||Yf(R))&&I+x>T&&(c=x>=T?N()(s).call(s,(function(e){return[e.id,{y:0,height:T,width:qs(T/x*S,1)}]})):N()(s).call(s,(function(e){return[e.id,{y:T-x}]}))),Q.length&&!ch(f)&&b===g){var V=Q[0].height;I<V&&(Pf(f)||_f(d)?f.y=I+V:U()(s).call(s,(function(e){e.y+=V})))}if("1"===a.getData().bizType&&dh(f)&&(f.width=k),qf(R)||Xf(R)){var H=gf({field:R,dataContext:a}),q=H.width,X=H.height;a.findControlByCondition((function(e){return e.parentId===b})).length?n("error: fail to add control to layoutcell;accept only one children"):c=[[L,{x:0,y:0,width:q,height:X}]]}if(Qf(f)){var _=F()(s).call(s,(function(e){return e.parentId===L&&"DataColumn"===e.type})),$=P()(_).call(_,(function(e,t){return e.width=qs(e.width+t.columnWidth,1),e}),{width:0});if(c=[[L,$]],Pf(f)){var ee=f.subGridId||[];U()(ee).call(ee,(function(e){var t=a.findControl(e),n=t.subGridDirection,r=t.x;"right"===n&&r!==qs(B+$.width,1)&&c.push([e,{x:qs(B+$.width,1)}])}))}}if(zf(f)){var te,ne,re=i.rowIndex,ae=i.index,oe=i.direction,le=f.parentId,ue=f.rowType,ce=$f(a,le),de=ce.items,se=ce.gridData,fe=ce.allItems,ge=Y().cloneDeep(fe),he=Y().cloneDeep(de),ve=Y().cloneDeep(se),pe=df(de),me=pe.rows,Ce=void 0===me?[]:me,ye=pe.columns,Ee=void 0===ye?[]:ye,De=(pe.cells,pe.rowData),Ae=(pe.columnData,pe.rowCount,{height:ve.height}),ke=[],we={};U()(at).call(at,(function(e){ve[e]&&(we[e]=ve[e])}));var be=jf(ve)&&ve.pagePrint?ve.pagePrintN:1;U()(te=i.value).call(te,(function(e,t){var n;Ae.height+=e.rowHeight*be,ve.height+=e.rowHeight*be;var r=N()(n=De[re]).call(n,(function(t,n){var r=t.type,a=t.border,o=t.backColor,u=Ah({rowId:e.id,columnId:Ee[n].id,cellType:e.rowType},we);if(!(0===re&&"up"===i.direction||re===C()(De).length-1&&"bottom"===i.direction)){var c=Y().cloneDeep(Eh),d="up"===i.direction?De[re-1][n]:De[re+1][n];Yn()(kh).call(kh,(function(e){return Yn()(wh).call(wh,(function(t){return a[e][t]!==d.border[e][t]}))}))||U()(kh).call(kh,(function(e){return U()(wh).call(wh,(function(t){return c[e][t]=a[e][t]}))})),(0,ie.c)(u,{border:c}),o===d.backColor&&(0,ie.c)(u,{backColor:o})}return l({type:r,parentId:le,transferData:u})}));ke.push.apply(ke,(0,kn.c)(r))})),da()(ge).apply(ge,Z()(ne=[ae,0]).call(ne,(0,kn.c)(i.value))),ge.push.apply(ge,ke);var xe=ve.mergeConfig,Se=void 0===xe?{}:xe;if(!Y().isEmpty(Se)){var Ie,Be=i.value.length,Me=P()(Ie=C()(Se)).call(Ie,(function(e,t){var n,r,a=N()(n=t.split("_")).call(n,(function(e){return+e})),o=(0,M.c)(a,2),i=o[0],l=o[1],u=Ce[i].rowType,c=ue===u?Be:0,d=Se[t],s=d.rowLength;d.columnLength;if(re<i)e[Z()(r="".concat(i+Be,"_")).call(r,l)]=(0,ie.c)({},Se[t],{rowStart:i+Be});else if(re===i&&"up"===oe){var f;e[Z()(f="".concat(i+Be,"_")).call(f,l)]=(0,ie.c)({},Se[t],{rowStart:i+Be})}else e[t]=re===i&&1!==s||re>i&&re<i+s-1||re===i+s-1&&"up"===oe?Ah(Ah({},Se[t]),{},{rowLength:s+c}):Ah({},Se[t]);return e}),{});Ae.mergeConfig=Y().omitBy(Me,Y().isUndefined),ve.mergeConfig=Ae.mergeConfig}var Le=cg(ve,ge,he);U()(ke).call(ke,(function(e){var t=Yn()(Le).call(Le,(function(t){var n=(0,M.c)(t,2),r=n[0];n[1];return e.id===r}));t&&(0,ie.c)(e,t[1])}));var Re=[[le,Ae]];return Ch({realChange:Re,dataContext:a}),[i,(0,W.createAddAction)(ke),(0,W.createUpdateAction)(Z()(Le).call(Le,Re))]}if(Wf(f)){var Fe,Te,Ne=i.columnIndex,Ge=i.index,Ze=i.direction,Qe=f.parentId,Pe=$f(a,Qe),Je=Pe.items,je=Pe.gridData,Oe=Pe.allItems,Ue=Y().cloneDeep(Oe),ze=Y().cloneDeep(Je),We=Y().cloneDeep(je),Ke=df(Je),Ve=Ke.rows,He=void 0===Ve?[]:Ve,qe=(Ke.columns,Ke.cells,Ke.rowData,Ke.columnData),Ye=(Ke.columnCount,{width:We.width}),Xe=[],_e={};U()(at).call(at,(function(e){We[e]&&(_e[e]=We[e])})),U()(Fe=i.value).call(Fe,(function(e){var t;We.width+=e.columnWidth,Ye.width+=e.columnWidth,Xe.push.apply(Xe,(0,kn.c)(N()(t=qe[Ne]).call(t,(function(t,n){var r=t.type;return l({type:r,parentId:Qe,transferData:Ah({rowId:He[n].id,columnId:e.id,cellType:He[n].rowType},_e)})}))))})),da()(Ue).apply(Ue,Z()(Te=[Ge,0]).call(Te,(0,kn.c)(i.value))),Ue.push.apply(Ue,Xe);var $e=We.mergeConfig,et=void 0===$e?{}:$e;if(!Y().isEmpty(et)){var tt,nt=i.value.length,rt=P()(tt=C()(et)).call(tt,(function(e,t){var n,r,a=N()(n=t.split("_")).call(n,(function(e){return+e})),o=(0,M.c)(a,2),i=o[0],l=o[1],u=et[t],c=(u.rowLength,u.columnLength);if(Ne<l)e[Z()(r="".concat(i,"_")).call(r,l+nt)]=(0,ie.c)({},et[t],{columnStart:l+nt});else if(Ne===l&&"up"===Ze){var d;e[Z()(d="".concat(i,"_")).call(d,l+nt)]=(0,ie.c)({},et[t],{columnStart:l+nt})}else e[t]=Ne===l&&1!==c||Ne>l&&Ne<l+c-1||Ne===l+c-1&&"up"===Ze?Ah(Ah({},et[t]),{},{columnLength:c+nt}):Ah({},et[t]);return e}),{});Ye.mergeConfig=Y().omitBy(rt,Y().isUndefined),We.mergeConfig=Ye.mergeConfig}var ot=cg(We,Ue,ze);U()(Xe).call(Xe,(function(e){var t=Yn()(ot).call(ot,(function(t){var n=(0,M.c)(t,2),r=n[0];n[1];return e.id===r}));t&&(0,ie.c)(e,t[1])}));var it=[[Qe,Ye]];return Ch({realChange:it,dataContext:a}),[i,(0,W.createAddAction)(Xe),(0,W.createUpdateAction)(Z()(ot).call(ot,it))]}var lt=[i];return c&&c.length&&lt.push.apply(lt,(0,kn.c)(yh({dataContext:a,selectionContext:o,action:{type:W.ActionType.UPDATE,value:c},globalConfig:r}))),lt}b===g?W.eventBus.emit("card-setting",{resolve:t,reject:n}):"TableTail"===G&&W.eventBus.emit("card-setting",{resolve:t,reject:n,parentId:b})}else b===g?W.eventBus.emit("layoutGrid-setting",{resolve:t,reject:n}):"TableTail"===G&&W.eventBus.emit("layoutGrid-setting",{resolve:t,reject:n,parentId:b});else b===g&&W.eventBus.emit("grid-guide",{resolve:t,reject:n,controlType:w,transferData:i.transferData})}function xh(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sh(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?U()(n=xh(Object(a),!0)).call(n,(function(t){(0,L.c)(e,t,a[t])})):b()?S()(e,b()(a)):U()(r=xh(Object(a))).call(r,(function(t){B()(e,t,k()(a,t))}))}return e}var Ih=function(e){return zn()(e)?e:[e]},Bh=function(e){if(Y().isUndefined(e))return!0;var t=e.rowLength,n=e.columnLength;return 1===t&&1===n};function Mh(e,t,n){e.globalConfig;var r,a=e.dataContext,o=(e.selectionContext,e.action),i=(e.dataFactory,e.modelFactory,zn()(o.value)?o.value[0]:o.value),l=a.findControl(i),u=Ih(o.value),c=a.findControl(u),d=[];if(zf(l)){var s,f=l.parentId,g=$f(a,f),h=g.items,v=g.gridData,p=g.allItems,m=Y().cloneDeep(v),y=df(h),E=y.rows,D=void 0===E?[]:E,A=(y.columns,y.cells,y.rowData),k=(y.columnData,y.rowCount,p),w=Y().cloneDeep(h),b={height:m.height},x=m.mergeConfig,S=void 0===x?{}:x,I=jf(m)&&m.pagePrint?m.pagePrintN:1;U()(s=Ih(o.value)).call(s,(function(e){var t,n=fe()(D).call(D,(function(t){return t.id===e})),r=D[n];b.height-=r.rowHeight*I,m.height-=r.rowHeight*I;var a=N()(t=A[n]).call(t,(function(e){return e.id}));if(k=F()(k).call(k,(function(e){var t=e.id;e.parentId;return r.id!==t&&!Bn()(a).call(a,t)})),!Y().isEmpty(S)){var o,i=n;U()(o=C()(S)).call(o,(function(e){var t,n,r=N()(t=e.split("_")).call(t,(function(e){return+e})),a=(0,M.c)(r,2),o=a[0],l=a[1],u=S[e],c=u.rowLength;u.columnLength;if(i<o)S[Z()(n="".concat(o-1,"_")).call(n,l)]=Sh(Sh({},S[e]),{},{rowStart:o-1}),S[e]=void 0;else if(i>o){var d=S[e],s=d.rowLength;d.columnLength;S[e]=Sh(Sh({},S[e]),{},{rowLength:o+s-1<i?s:s-1})}else{var f;if(1===c)S[e]=void 0;else S[Z()(f="".concat(o,"_")).call(f,l)]=(0,ie.c)({},S[e],{rowStart:o,rowLength:c-1})}})),b.mergeConfig=Y().omitBy(S,Bh),m.mergeConfig=b.mergeConfig}}));var B=cg(m,k,w,!0),L=[[f,b]];return Ch({realChange:L,dataContext:a}),[(0,W.createDeleteAction)(Y().difference(N()(p).call(p,(function(e){return e.id})),N()(k).call(k,(function(e){return e.id})))),(0,W.createUpdateAction)(Z()(B).call(B,L))]}if(Wf(l)){var R,T,G,Q,J=l.parentId,j=$f(a,J),O=j.items,z=j.gridData,K=j.allItems,V=Y().cloneDeep(z),H=df(O),q=(H.rows,H.columns),X=void 0===q?[]:q,_=(H.cells,H.rowData,H.columnData),$=(H.rowCount,K),ee=Y().cloneDeep(O),te={width:V.width},ne=V.mergeConfig,re=void 0===ne?{}:ne,ae=(null===(R=a.findControlByCondition((function(e){return(t=e).rowType===At&&"DataRow"===t.type&&e.parentId===J;var t})))||void 0===R?void 0:R[0])||{},oe=null===(T=a.findControlByCondition((function(e){return e.columnId===l.id&&e.rowId===(null==ae?void 0:ae.id)})))||void 0===T?void 0:T[0],le=oe||{},ue=le.bindField,ce=le.viewText,de=le.mergeSummary,se=ae||{},ge=se.mergeSummaryField,he=se.mergeSummaryFieldText,ve=se.mergeByField,pe=se.mergeByFieldText,me=null==ce?void 0:ce.replace(/^=\$(\S+)$/g,"$1"),Ce=[],ye=a.findControlByCondition((function(e){return Vf(e)&&e.rowId===(null==ae?void 0:ae.id)})),Ee=he?he.split(";"):[],De=ve?ve.split(";"):[],Ae=pe?pe.split(";"):[],ke=F()(ye).call(ye,(function(e){return e.bindField===ue})).length>1;if(ve&&Bn()(De).call(De,ue)&&!ke){var we=F()(De).call(De,(function(e){return e!==ue})).join(";");we?Ce.push([ae.id,{mergeByField:we,mergeByFieldText:F()(Ae).call(Ae,(function(e){return e!==me})).join(";")}]):Ce.push([ae.id,{mergeByField:"",mergeByFieldText:"",mergeSummaryField:[],mergeSummaryFieldText:""}])}else de&&Bn()(ge).call(ge,ue)&&!ke&&Ce.push([ae.id,{mergeSummaryField:F()(ge).call(ge,(function(e){return e!==ue})),mergeSummaryFieldText:F()(Ee).call(Ee,(function(e){return e!==me})).join(";")}]);U()(G=Ih(o.value)).call(G,(function(e){var t,n=fe()(X).call(X,(function(t){return t.id===e})),r=X[n];te.width-=r.columnWidth,V.width-=r.columnWidth;var a=N()(t=_[n]).call(t,(function(e){return e.id}));if($=F()($).call($,(function(e){var t=e.id;e.parentId;return r.id!==t&&!Bn()(a).call(a,t)})),!Y().isEmpty(re)){var o,i=n;U()(o=C()(re)).call(o,(function(e){var t,n,r=N()(t=e.split("_")).call(t,(function(e){return+e})),a=(0,M.c)(r,2),o=a[0],l=a[1],u=re[e],c=(u.rowLength,u.columnLength);if(i<l)re[Z()(n="".concat(o,"_")).call(n,l-1)]=Sh(Sh({},re[e]),{},{columnStart:l-1}),re[e]=void 0;else if(i>l){var d=re[e],s=(d.rowLength,d.columnLength);re[e]=Sh(Sh({},re[e]),{},{columnLength:l+s-1<i?s:s-1})}else{var f;if(1===c)re[e]=void 0;else re[Z()(f="".concat(o,"_")).call(f,l)]=(0,ie.c)({},re[e],{columnStart:l,columnLength:c-1})}})),te.mergeConfig=Y().omitBy(re,Bh),V.mergeConfig=te.mergeConfig}}));var be=cg(V,$,ee,!0),xe=[[J,te]];return Ch({realChange:xe,dataContext:a}),[(0,W.createDeleteAction)(Y().difference(N()(K).call(K,(function(e){return e.id})),N()($).call($,(function(e){return e.id})))),(0,W.createUpdateAction)(Z()(Q=Z()(be).call(be,xe)).call(Q,Ce))]}if(Zf(l)){var Se,Ie,Be,Me,Le=N()(Se=o.value).call(Se,(function(e){return[e,St]})),Re={},Fe=[],Te=[],Ne="";U()(c).call(c,(function(e){var t=e.parentId,n=(e.type,e.bindField),r=e.id;if(Te=Te||a.findControl(Ne),Ne=Ne||t,n){var o=e.viewText,i=e.rowId,l=e.mergeSummary,u=o.replace(/^=\$(\S+)$/g,"$1"),c=a.findControl(i),d=c.mergeSummaryField,s=c.mergeSummaryFieldText,f=c.mergeByField,g=c.mergeByFieldText;Re[i]||(Re[i]={mergeByField:f,mergeByFieldText:g,mergeSummaryField:d,mergeSummaryFieldText:s});var h=Re[i].mergeByField?Re[i].mergeByField.split(";"):[],v=Re[i].mergeByFieldText?Re[i].mergeByFieldText.split(";"):[],p=Re[i].mergeSummaryFieldText?Re[i].mergeSummaryFieldText.split(";"):[],m=a.findControlByCondition((function(e){return Vf(e)&&e.rowId===i})),C=F()(m).call(m,(function(e){return e.bindField===n})).length>1;if(Re[i].mergeByField&&Bn()(h).call(h,n)&&!C){var y;Fe=Z()(y=[]).call(y,(0,kn.c)(Fe),[[r,{mergeSummary:!1}]]);var E=F()(h).call(h,(function(e){return e!==n})).join(";");Re[i]=Sh(Sh({},Re[i]),{},E?{mergeByField:E,mergeByFieldText:F()(v).call(v,(function(e){return e!==u})).join(";")}:{mergeByField:"",mergeByFieldText:"",mergeSummaryField:[],mergeSummaryFieldText:""})}else l&&Bn()(d).call(d,n)&&!C&&(Re[i]=Sh(Sh({},Re[i]),{},{mergeSummaryField:F()(d).call(d,(function(e){return e!==n})),mergeSummaryFieldText:F()(p).call(p,(function(e){return e!==u})).join(";")}),Le.push([r,{mergeSummary:!1}]))}}));var Ge=N()(Ie=C()(Re)).call(Ie,(function(e){return[e,Re[e]]}));Le=Z()(Be=[]).call(Be,(0,kn.c)(Le),(0,kn.c)(Ge),(0,kn.c)(Fe));var Ze=(Pf(Te)||Jf(Te))&&!a.findControlByCondition((function(e){var t,n=e.parentId,r=e.cellType,a=e.bindField,i=e.id;return n===Ne&&"Detail"===r&&!(null!==(t=o.value)&&void 0!==t&&Bn()(t).call(t,i))&&a&&"=getRowNumber()"!==a})).length;Ze&&Le.push([Ne,{dataSource:"",dataSourceText:""}]);var Qe=P()(Me=o.value).call(Me,(function(e,t){var n,r=a.findControlByCondition((function(e){return e.parentId===t}))||[],o=N()(r).call(r,(function(e){return e.id}));return Z()(n=[]).call(n,(0,kn.c)(e),(0,kn.c)(o))}),[]);return[(0,W.createUpdateAction)(Le),(0,W.createDeleteAction)(Qe)]}return _n()(c).call(c,(function(e){return Pf(e)}))&&U()(c).call(c,(function(e){var t=e.subGridId,n=e.tableTailId;n&&d.push((0,W.createDeleteAction)(n)),t&&t.length>0&&d.push((0,W.createDeleteAction)(t))})),_n()(c).call(c,(function(e){return jf(e)}))&&U()(c).call(c,(function(e){var t=e.tableTailId;t&&d.push((0,W.createDeleteAction)(t))})),_n()(c).call(c,(function(e){return Yf(e)}))&&U()(c).call(c,(function(e){var t=e.parentGridId;t&&!Bn()(u).call(u,t)&&d.push((0,W.createUpdateAction)([[t,{hasTableTail:"",tableTailId:""}]]))})),_n()(c).call(c,(function(e){return Jf(e)}))&&U()(c).call(c,(function(e){var t,n=e.parentGridId;n&&!Bn()(u).call(u,n)&&d.push((0,W.createUpdateAction)([[n,{subGridId:F()(t=a.findControl(n).subGridId).call(t,(function(t){return t!==e.id}))}]]))})),Z()(r=[o]).call(r,d)}function Lh(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rh(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?U()(n=Lh(Object(a),!0)).call(n,(function(t){(0,L.c)(e,t,a[t])})):b()?S()(e,b()(a)):U()(r=Lh(Object(a))).call(r,(function(t){B()(e,t,k()(a,t))}))}return e}var Fh=function(e,t,n){var r=e.globalConfig,a=e.dataContext,o=e.selectionContext,i=e.action,l=e.dataFactory,u=e.modelFactory,c=i.value;if(c.length){var d=(0,M.c)(c,2),s=d[0],f=d[1],g=a.findControl(s),h=a.getRootId(),v=a.findControl(h),p=v.width-v.marginLeft-v.marginRight,m=a.findControl(s);if(jf(m)&&"switchDataSource"===(null==f?void 0:f.methodName)){var C,y=f.dataSource,E=f.dataSourceText,D=f.dsType,A=[[s,{dataSource:y,dataSourceText:E,dsType:D,tableTailId:""}]],k=a.findControlByCondition((function(e){return e.parentId===s&&"LayoutCell"===e.type})),w=g.tableTailId,b=N()(k).call(k,(function(e){return e.id}));return Z()(C=[(0,W.createDeleteAction)(w)]).call(C,(0,kn.c)(Mh({dataContext:a,selectionContext:o,action:{type:W.ActionType.DELETE,value:b},globalConfig:r})),(0,kn.c)(yh({dataContext:a,selectionContext:o,action:{type:W.ActionType.UPDATE,value:A},globalConfig:r})))}if((Pf(g)||Jf(g))&&"dataSource"in f){var x,S,I,B,L=g.x,R=g.y,F=g.width,T=g.type,G=g.parentGridId,Q=g.subGridDirection,P=g.subGridId,J={type:T,parentId:h},j=f.dataSource,O=Df(l,u),U=(null===(x=j[0])||void 0===x?void 0:x.bindText)||"";U=U?U.replace(/(\S+)\.(\S+)(\.\S+)$/g,"$2"):"";var z={parentGridId:G,subGridDirection:Q},K=null!=P&&P.length?{subGridId:P}:{},V=Rh(Rh({dataSource:(null===(S=j[0])||void 0===S?void 0:S.dataSource)||"",dataSourceText:U,width:"DataGrid"!==T||null!=P&&P.length?F:p},"DataGrid"===T?K:{}),"SubDataGrid"===T?z:{}),H=O((0,ie.c)({},J,{cellData:j,transferData:V}));H[0].x=L,H[0].y=R;var q=Pf(g)?N()(I=H[0].subGridId||[]).call(I,(function(e){return"bottom"===a.findControl(e).subGridDirection?[e,{parentGridId:H[0].id,y:qs(H[0].y+H[0].height,1)}]:[e,{parentGridId:H[0].id}]})):[];return Z()(B=[(0,W.createDeleteAction)(s)]).call(B,(0,kn.c)(bh({dataContext:a,selectionContext:o,action:(0,W.createAddAction)(H,{isDealPos:!1}),globalConfig:r})),[(0,W.createUpdateAction)(q)])}return yh({dataContext:a,selectionContext:o,action:{type:W.ActionType.UPDATE,value:[c]},globalConfig:r})}};var Th=function(e,t,n,r){for(var a,o=[e.x,e.y].join("-"),i=["DataCell","LayoutCell","DataRow","DataColumn","Header"];null!==(l=r[n])&&void 0!==l&&Bn()(l).call(l,o)&&!Bn()(i).call(i,e.type);){var l,u,c,d;if(null===(u=r[n])||void 0===u||!Bn()(u).call(u,o))break;o=N()(c=o.split("-")).call(c,(function(e){return+e+5})).join("-");var s=N()(d=o.split("-")).call(d,(function(e){return+e})),f=(0,M.c)(s,2),g=f[0],h=f[1];if(t&&n){var v,p=g,m=h,C=!1,y=!1;if(g+e.width>t.width&&(C=!0,p=Math.max(t.width-e.width,0)),h+e.height>t.height&&(y=!0,m=Math.max(t.height-e.height,0)),o=Z()(v="".concat(p,"-")).call(v,m),C&&y)break}}var E=N()(a=o.split("-")).call(a,(function(e){return+e})),D=(0,M.c)(E,2),A=D[0],k=D[1];return e.x=A,e.y=k,r[n]=r[n]||[],r[n].push([e.x,e.y].join("-")),e},Nh=["type","value"];function Gh(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zh(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?U()(n=Gh(Object(a),!0)).call(n,(function(t){(0,L.c)(e,t,a[t])})):b()?S()(e,b()(a)):U()(r=Gh(Object(a))).call(r,(function(t){B()(e,t,k()(a,t))}))}return e}var Qh=(0,L.c)((0,L.c)((0,L.c)((0,L.c)({},W.ActionType.ADD,bh),W.ActionType.UPDATE,yh),W.ActionType.CUSTOMUPDATE,Fh),W.ActionType.DELETE,Mh),Ph=function(e){var t,n=e.action,r=e.dataContext,a=e.selectionContext,o=e.globalConfig,i=e.dataFactory,l=e.modelFactory,u=e.success,c=e.fail,d=(null===(t=o.positionRecordsRef)||void 0===t?void 0:t.current)||{},s=o.dataRef,f=o.keywordMapping,g=function(e){var t=[],n=N()(e).call(e,(function(e){var n=e.type,i=e.value,l=(0,Wn.c)(e,Nh),u=(l||{}).isDealPos,c=void 0===u||u;if(n===W.ActionType.ADD||n===W.ActionType.PASTE){if(zn()(i)){if(U()(i).call(i,(function(e){e.key=(0,W.createUniqueKey)(e.key,e.type,s.current,f),s.current.push(e)})),Jf(i[0])){var g,h=Of(r).width,v=i[0],p=v.parentGridId,m=v.subGridDirection,C=v.id,E=r.findControl(p),D=E.width,A=E.x,k=E.height,w=E.fixedRowAtPage,b=E.fixedRowCount,x=r.findControlByCondition((function(e){return e.parentId===p&&"Detail"===e.rowType}))[0],S=(null==x?void 0:x.rowHeight)*(b-1),I=w?{fixedRowAtPage:!1,height:k-S}:{};if("right"===m&&c&&0===A&&h-D<1){var B,L=yh({dataContext:r,selectionContext:a,globalConfig:o,action:(0,W.createUpdateAction)([[p,{width:Hs(h/2,1)}]])});null===(B=L[0])||void 0===B||null===(B=B.value)||void 0===B||U()(B).call(B,(function(e){var t=(0,M.c)(e,2),n=t[0],r=t[1];if(n===p){var a=r.width;a&&a!==D&&(i[0].x=a)}})),t.push.apply(t,(0,kn.c)(L))}var R="bottom"===m&&w?[[C,{y:Hs(y-S,1)}]]:[];t.push((0,W.createUpdateAction)(Z()(g=[[p,Zh({subGridId:[C]},I)]]).call(g,R)))}var F=c?N()(i).call(i,(function(e){var t=e.parentId;return Th(e,sh(r.findControl(t)),t,d)})):i;return"addField"===(null==l?void 0:l.addType)&&F[1]&&F[0].x+F[0].width+F[1].width<=Of(r).width&&(F[1].x=F[0].x+F[0].width,F[1].y=F[0].y),(0,W.createAddAction)(F,l)}i.key=(0,W.createUniqueKey)(i.key,i.type,s.current,f),s.current.push(i);var T=i.parentId;return(0,W.createAddAction)(Th(i,sh(r.findControl(T)),T,d),l)}return e}));u(Z()(n).call(n,t))},h=[],v=n.type,p=Qh[v];if(p){var m=p({globalConfig:o,dataContext:r,selectionContext:a,action:n,dataFactory:i,modelFactory:l},g,c);m&&h.push.apply(h,(0,kn.c)(m))}else h.push(n);h.length&&g(h)},Jh="kd_print_kdcdc";function jh(e,t){var n=F()(t).call(t,(function(e){return"string"==typeof e[1]}));return n.length?e+"?"+N()(n).call(n,(function(e){var t;return Z()(t="".concat(e[0],"=")).call(t,e[1])})).join("&"):e}function Oh(){var e,t,n=window.location.href,r=(t={},(e=n)?(e.replace(/[?&]([^=&#]+)=([^&#]*)/g,(function(e,n,r){return void 0===t[n]&&""!==r&&(t[n]=r),""})),t):t),a=r.accountId,o=r.accountid,i=r.kdcdc,l=a||o||i,u=window.sessionStorage.getItem(Jh);return l&&window.sessionStorage.setItem(Jh,l),l||u}var Uh=["title"];function zh(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wh(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?U()(n=zh(Object(a),!0)).call(n,(function(t){(0,L.c)(e,t,a[t])})):b()?S()(e,b()(a)):U()(r=zh(Object(a))).call(r,(function(t){B()(e,t,k()(a,t))}))}return e}z.Collapse.Panel;var Kh=(0,V.memo)((function(e){var t,n=e.meta,r=void 0===n?[]:n,a=(0,V.useState)(!1),o=(0,M.c)(a,2),i=o[0],l=o[1],u=(0,V.useState)(!0),c=(0,M.c)(u,2),d=c[0],s=c[1],f=(0,V.useContext)(W.DataContext),g=(0,V.useContext)(W.SelectionContext),h=(0,V.useContext)(En),v=h.setMessage,p=h.definition,m=void 0===p?{}:p,y=h.prefixCls,E="".concat(y,"-left-view"),D=(0,V.useState)(!1),A=(0,M.c)(D,2),k=(A[0],A[1],(0,V.useContext)(W.GlobalConfigContext)),w=k.handleOpenCustomDsModal,b=k.handleOpenRefDsModal,x=k.keywordMapping,S=f.getRootId(),I=(f.findControl(S).language,_s(f)),B=(0,V.useContext)(W.DataFactoryContext),L=B.dataFactory,R=B.modelFactory,F=B.controlMetaInfo,T=(0,W.useActivedSelectedId)({dataContext:f,selectionContext:g}).activedSelectId,N=Nn({dataContext:f,selectionContext:g,meta:r,activedSelectId:T,modelFactory:R}),G=L,Q=(0,V.useMemo)((function(){var e,t;return"SubDataGrid"===(null===(e=f.findControl(null===(t=f.findControl(T))||void 0===t?void 0:t.parentId))||void 0===e?void 0:e.type)?{isContainer:!1,accept:""}:(0,W.getControlIsContainer)(F,f.findControl(T),x)}),[T,F]),J=Q.isContainer,j=Q.accept,O=(0,V.useState)(0)[1];(0,V.useEffect)((function(){var e=f.addDataChangeListener((function(e){e.type;O((function(e){return e+1}))}));return function(){e&&e()}}),[]);return W.console.log("renderView DataSourceView"),H().createElement("div",{className:Hn()(E,"".concat(E,"-datasource"))},H().createElement("div",{className:Hn()("".concat(E,"-datasource-header"))},H().createElement("div",{className:Hn()("".concat(E,"-datasource-action"),{hide:I})},H().createElement("div",{onClick:b},H().createElement(z.Icon,{prefix:"printdesignericon",type:"guanlian"}),H().createElement("span",null,(0,W.getLangMsg)("printd.grid.key0099"))),H().createElement("div",{onClick:w},H().createElement(z.Icon,{prefix:"printdesignericon",type:"tianjia"}),H().createElement("span",null,(0,W.getLangMsg)("printd.grid.key0100")))),H().createElement(Ur,{draggable:!0,scrollToKey:N,meta:r,definition:m,onSelect:function(e,t,n){var r,a;W.console.log("dataSourceView--------",t);var o=f.getRootId(),i=(f.findControl(o).height,Y().last(Z()(r=[o]).call(r,(0,kn.c)(g.getSelection())))),l=f.findControl(i),u=t.type,c=void 0===u?"Text":u,s=t.Items,h=t.InitAttr,p=void 0===h?{}:h,y=t.isDataGridDs;t.dsType,t.isSubDataGridDs;if(!s){var E=ir(t,m),D=E.title,A=(0,Wn.c)(E,Uh),k=(0,ie.c)({},P()(a=C()(p)).call(a,(function(e,t){return e[Y().camelCase(t)]=p[t],e}),{}),A);if(l){var w=l.type,b=l.parentId,x=l.id,S=(l.cellType,l.statType),I=cr(f,x,"CardGrid");if(I){var B=br(I,m);if(!Sr(B,null==E?void 0:E.dataSource))return v((0,W.getLangMsg)("printd.grid.key0095"))}if("Text"===w){var M=f.findControl(b),L=M.type,R=M.cellType,F=M.parentId;if("DataCell"===L&&"Detail"===R){var T,N=f.findControl(F),Q=N.type,O=N.dataSource,U=["Entry","ReportEntry","Subentry","Workflow","Report","Approveline","Sys"],z=Bn()(T=["=getGroupRowNumber()","=getRowNumber()"]).call(T,k.bindField),K=O&&(k.dataSource===O||!Bn()(U).call(U,k.dsType));if("DataGrid"===Q&&!(z||K||!O&&y))return v((0,W.getLangMsg)("printd.grid.key0037"))}return f.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[i,Wh(Wh({},k),{},{viewText:"=$".concat(D)})]]))}if("DataCell"===w)return xf(t,l,f,{initAttr:k,title:D},v,m);if("LayoutCell"===w){var V,H=f.findControl(b).parentId,q=f.findControl(H),X="=$".concat(D);if(q&&"TableTail"===q.type)X="noStat"!==S?Z()(V="=".concat(S,"(")).call(V,D,")"):"=$".concat(D);return wf(x,f,Wh(Wh({},k),{},{viewText:X}))}}if("Text"===c){var _=G({type:c,parentId:J?i:o,transferData:{bindText:D}}),$=d?{x:(+_.x||0)+(+_.width||0)}:{},ee=G({type:c,parentId:J?i:o,transferData:(0,ie.c)({},k,Wh(Wh({},$),{},{viewText:"=$".concat(D)}))}),te=d?[_,ee]:[ee];f.addControl((0,W.createAddAction)(te,{addType:"addField"})).then((function(){g.setSelect(d?[_.id,ee.id]:[ee.id])}))}else{if(c===hn.richText&&J&&j&&!Bn()(j).call(j,c))return;var ne=G({type:c,parentId:J?i:o,transferData:k});f.addControl((0,W.createAddAction)(ne)).then((function(){g.setSelect([ne.id])}))}}},showDefinitionId:i,showDataSourceTitle:d})),H().createElement("div",{className:Z()(t="".concat(E,"-datasource-checkbox ")).call(t,E,"-datasource-checkbox-limit-width")},H().createElement(z.Checkbox,{checked:i,onChange:function(e){var t=!!e.target.checked;l(t)}},H().createElement("span",{title:(0,W.getLangMsg)("printd.grid.key0101")},(0,W.getLangMsg)("printd.grid.key0101"))),H().createElement(z.Checkbox,{checked:d,onChange:function(e){var t=!!e.target.checked;s(t)}},H().createElement("span",{title:(0,W.getLangMsg)("printd.grid.key0102")},(0,W.getLangMsg)("printd.grid.key0102")),H().createElement(z.Tooltip,{placement:"right",tip:(0,W.getLangMsg)("printd.grid.key0103"),style:{marginLeft:"5px"}},H().createElement(z.Icon,{prefix:"printdesignericon",type:"tishixinxi"})))))}));Kh.getTabName=function(){return(0,W.getLangMsg)("printd.grid.key0111")},Kh.tabKey="dataSource";var Vh=Kh;function Hh(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function qh(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?U()(n=Hh(Object(a),!0)).call(n,(function(t){(0,L.c)(e,t,a[t])})):b()?S()(e,b()(a)):U()(r=Hh(Object(a))).call(r,(function(t){B()(e,t,k()(a,t))}))}return e}var Yh=z.Collapse.Panel,Xh=function(e){var t=e.Categories,n=e.Controls;return N()(t).call(t,(function(e){var t=e.Id,r=F()(n).call(n,(function(e){return e.CategoryId===t}));return qh(qh({},e),{},{Controls:r})}))},_h=function(e){var t=e.Id,n=(e.Name,e.createControlData),r=e.className,a=e.getOutlineItemIcon,o=e.activedSelectId,i=e.isContainer,l=e.env,u=e.Tips,c=e.Visible,d=void 0===c||c,s=(0,V.useState)(!1),f=(0,M.c)(s,2),g=f[0],h=f[1],v=(0,V.useContext)(W.DataContext),p=(0,V.useContext)(W.SelectionContext),m=v.getRootId(),C=(0,V.useCallback)((function(){var e=n({type:t,parentId:i?o:m});v.addControl((0,W.createAddAction)(e)).then((function(e){var t=e[0].value;p.setSelect(zn()(t)?[t[0].id]:[t.id])}))}),[t,o]),y=(0,V.useCallback)((function(t){var n={type:"control",data:e};l[W.CONTROL_DRAG_DATA]=n,h(!1)}),[e]),E=(0,V.useCallback)((function(e){h(e)}),[]);return d?H().createElement("div",{className:"".concat(r,"-control")},u?H().createElement(z.Tooltip,{placement:"right",tip:u||"",visible:g,onVisibleChange:E},H().createElement("div",{className:"".concat(r,"-control-content"),draggable:!0,onDragStart:y,onClick:C},a(t),H().createElement("span",{title:e.Name},e.Name))):H().createElement("div",{className:"".concat(r,"-control-content"),draggable:!0,onDragStart:y,onClick:C},a(t),H().createElement("span",{title:e.Name},e.Name))):null},$h=function(e){var t=e.meta,n=void 0===t?[]:t,r=(0,V.useContext)(W.ConfigContext).getPrefixCls,a=(0,V.useContext)(En).prefixCls,o=(0,V.useRef)(null),i=(0,V.useState)(""),l=(0,M.c)(i,2),u=l[0],c=l[1],d=(0,V.useState)((function(){return Xh(n)})),s=(0,M.c)(d,2),f=s[0],g=s[1],h=(0,V.useState)(f),v=(0,M.c)(h,2),p=v[0],m=v[1],y=(0,V.useContext)(W.DataContext),E=(0,V.useContext)(W.SelectionContext),D=(0,W.useActivedSelectedId)({dataContext:y,selectionContext:E}).activedSelectId,A=(0,V.useContext)(W.GlobalConfigContext),k=A.getOutlineItemIcon,w=A.enableSearch,b=A.env,x=A.keywordMapping,S=r(a,"left-view"),I=(0,V.useContext)(W.DataFactoryContext),B=I.dataFactory,L=I.controlMetaInfo,R={getOutlineItemIcon:k,createControlData:B},T=(0,V.useMemo)((function(){var e,t,n;if("SubDataGrid"===(null===(e=y.findControl(null===(t=y.findControl(D))||void 0===t?void 0:t.parentId))||void 0===e?void 0:e.type))return{isContainer:!1,accept:""};var r=y.findControl(D);return Bn()(n=C()(L)).call(n,r.type)?(0,W.getControlIsContainer)(L,r,x):{isContainer:!1,accept:""}}),[D]),G=T.isContainer,Z=T.accept,Q=(0,V.useMemo)((function(){return!!Z&&!p.length}),[Z,p]),P=(0,V.useMemo)((function(){var e;return u?F()(e=N()(p).call(p,(function(e){var t;if("HiddenControl"===e.Id)return null;var n=F()(t=e.Controls).call(t,(function(e){var t;return-1!==bn()(t=e.Name).call(t,u)}));return 0===n.length?null:qh(qh({},e),{},{Controls:n})}))).call(e,Boolean):p}),[u,p]);(0,V.useEffect)((function(){g((function(){return Xh(n)}))}),[n]),(0,V.useEffect)((function(){m((function(){var e;if(!Z)return f;var t=F()(e=N()(f).call(f,(function(e){var t;if("HiddenControl"===e.Id)return null;var n=F()(t=e.Controls).call(t,(function(e){return Bn()(Z).call(Z,e.Id)}));return 0===n.length?null:qh(qh({},e),{},{Controls:n})}))).call(e,Boolean);return t}))}),[Z,f]);var J=(0,V.useCallback)((function(){var e,t=null===(e=o.current)||void 0===e?void 0:e.value;c(t)}),[n,p]);return Q?H().createElement("div",{className:"".concat(S,"-props-empty")},H().createElement("img",{className:"".concat(S,"-props-empty-img"),src:Gn,width:"168",height:"96",alt:(0,W.getLangMsg)("printd.grid.key0104")}),H().createElement("div",{className:"".concat(S,"-props-empty-desc")},(0,W.getLangMsg)("printd.grid.key0002"))):H().createElement("div",{className:"".concat(S,"-control-tabs")},w&&H().createElement("div",{className:"".concat(S,"-control-search")},H().createElement(z.Input,{className:"".concat(S,"-control-search-input"),ref:o,placeholder:(0,W.getLangMsg)("printd.grid.key0097"),borderType:"bordered",onChange:_.debounce(J,250),allowClear:!0,suffix:H().createElement("div",{onClick:J},H().createElement(z.Icon,{type:"search"}))})),N()(P).call(P,(function(e){var t;return"HiddenControl"===e.Id?null:H().createElement(z.Collapse,{animatable:!1,name:"Collapse",key:e.Id,defaultActiveKey:e.Id,expandIconPosition:"right",className:"".concat(S,"-collapse")},H().createElement(Yh,{header:e.Name,panelKey:e.Id},H().createElement("div",{className:"".concat(S,"-pane")},N()(t=(null==e?void 0:e.Controls)||[]).call(t,(function(e){return H().createElement(_h,(0,ie.c)({key:e.Id},e,R,{className:S,activedSelectId:D,isContainer:G,env:b}))})))))})))},ev=(0,V.memo)((function(e){var t=(0,V.useContext)(As).getPrefixCls,n=(0,V.useContext)(En).prefixCls,r=(0,V.useContext)(W.DataContext),a=(t(n,"left-view"),r.getRootId()),o=(r.findControl(a).language,(0,V.useState)(0)[1]);return(0,V.useEffect)((function(){var e=r.addDataChangeListener((function(e){e.type;o((function(e){return e+1}))}));return function(){e&&e()}}),[]),H().createElement($h,e)}));ev.tabKey="ControlView",ev.getTabName=function(){return(0,W.getLangMsg)("printd.grid.key0106")};var tv=ev,nv=n(2480);function rv(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function av(e,t){var n,r=null!==(n=null==e?void 0:e.current)&&void 0!==n?n:e;if(!r)return null;var a=t||{x:0,y:0},o=a.x,i=a.y,l={x:r.x()-o,y:r.y()-i,height:r.height(),width:r.width()},u=l.x,c=l.y,d=l.height,s=l.width;return Xs({x:Math.max(u,0),y:Math.max(c,0),left:Math.max(u,0),top:Math.max(c,0),width:s,height:d,right:u+s,bottom:c+d})}function ov(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0},r=n.x,a=n.y,o=null!==(t=null==e?void 0:e.current)&&void 0!==t?t:e;if(!o)return null;var i=o.height(),l=o.width(),u=function(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?U()(n=rv(Object(a),!0)).call(n,(function(t){(0,L.c)(e,t,a[t])})):b()?S()(e,b()(a)):U()(r=rv(Object(a))).call(r,(function(t){B()(e,t,k()(a,t))}))}return e}({},o.getAbsolutePosition()),c=u.x,d=u.y;return Xs({x:Math.max(c-r,0),y:Math.max(d-a,0),left:Math.max(c-r,0),top:Math.max(d-a,0),width:l,height:i,right:c-r+l,bottom:d-a+i})}var iv=function(e,t){var n=e.target;if((null==n?void 0:n.id())!==t)return!0},lv=function(e){var t=e.id,n=e.shapeRef,r=e.refLineRef,a=e.onDragStart,o=e.onDragMove,i=e.onDragEnd,l=e.parentId,u=e.context,c=e.scale,d=void 0===c?1:c,s=!1,f=(0,V.useRef)({}),g=(0,V.useRef)({}),h=(0,V.useRef)([]),v=function(e){var t=u.stageRef,r=u.rootControlRef,a=(u.rootId,u.selectionContext,t.current),o=r.current,i=a.findOne("#".concat(l)),c=av(n),d=(c.width,c.height,g.current),s=d.topDis,f=d.bottomDis,h=d.leftDis,v=d.rightDis,p=Hs(o.width(),1),m=Hs(o.height(),1),C=Xs(ov(i||o)),y=C.x,E=void 0===y?0:y,D=C.y,A=void 0===D?0:D,k=C.right,w=void 0===k?p:k,b=C.bottom,x=void 0===b?m:b,S=e.x,I=e.y;return W.console.log("xxx",S,I,{topDis:s,bottomDis:f,leftDis:h,rightDis:v},av(i)),h+v>p||f+s>m?(S-h<E&&(W.console.log("dragBoundFunc x",S),S=E+h,W.console.log("dragBoundFunc x",S,h,E)),I-s<A&&(W.console.log("dragBoundFunc y",I),I=A+s,W.console.log("dragBoundFunc y",I,s,A)),{x:S,y:I}):(S-h<E&&(W.console.log("dragBoundFunc x",S),S=E+h,W.console.log("dragBoundFunc x",S,h,E)),S+v>w&&(W.console.log("dragBoundFunc x1",S),S=w-v,W.console.log("dragBoundFunc x1",S,v,w)),I-s<A&&(W.console.log("dragBoundFunc y",I),I=A+s,W.console.log("dragBoundFunc y",I,s,A)),I+f>x&&(W.console.log("dragBoundFunc y1",I),I=x-f,W.console.log("dragBoundFunc y1",I,x,f)),{x:S,y:I})};return{dragBoundFunc:v,onDragStart:function(e){var r;if(!iv(e,t)){var o=e.target,i=u.stageRef,l=u.selectionContext,c=u.dataContext,d=(u.dragGroupRef,o.attrs),s=d.x,v=d.y,p=o.getAbsolutePosition(),m=p.x,y=p.y,E=l.getSelection(),D=(0,kn.c)(E),A=function(e){if(Pf(e)||jf(e)){var t=e.subGridId,n=e.tableTailId;n&&(D.push(n),h.current.push(n)),null!=t&&t.length&&U()(t).call(t,(function(e){Bn()(E).call(E,e)||(D.push(e),h.current.push(e))}))}if(Jf(e)){var r=e.parentGridId;r&&(Bn()(E).call(E,r)||(D.push(r),h.current.push(r)))}if(Yf(e)){var a=e.parentGridId;D.push(a),h.current.push(a)}};A(c.findControl(t)),U()(E).call(E,(function(e){var t=c.findControl(e);A(t)}));var k=F()(r=N()(D).call(D,(function(e){var t=i.current.findOne("#".concat(e));return(null==t?void 0:t.draggable())&&t}))).call(r,Boolean),w=F()(k).call(k,(function(t){return t!==e.target}));W.console.log("onDragStart",w),i.current.dragStartMousePos=i.current.getPointerPosition();var b=P()(w).call(w,(function(e,t){var n=t.attrs,r=n.id,a=(n.x,n.y,n.draggable),o=t.getAbsolutePosition(),i=o.x,l=o.y;return a?(e[r]={xDis:m-i,yDis:y-l},e):e}),{});f.current=b;var x=P()(k).call(k,(function(e,t){var n=t.attrs,r=n.x,a=n.y,o=n.width,i=a,l=a+n.height,u=r,c=r+o;if(C()(e).length){var d=e,s=d.top,f=d.bottom,g=d.left,h=d.right;e={top:i<s?i:s,bottom:l>f?l:f,left:u<g?u:g,right:c>h?c:h}}else e={top:i,bottom:l,left:u,right:c};return e}),{});g.current={topDis:v-x.top,bottomDis:x.bottom-v,leftDis:s-x.left,rightDis:x.right-s};var S=av(n);a&&a(S,e)}},onDragEnd:function(e){if(!iv(e,t)){var a=e.target.attrs,o=a.x,l=a.y,c=(u.dataContext,u.selectionContext,u.controlGroupRef,u.stageRef,(r.current||{}).hideRefLines),v=av(n);if(c&&c(),Y().isEmpty(f.current))i&&i(v,e);else{var p,m,y=F()(p=N()(m=C()(f.current)).call(m,(function(e){var t,n=f.current[e],r=n.xDis,a=n.yDis;if(!Bn()(t=h.current).call(t,e))return[e,{x:Ks(o-r,d),y:Ks(l-a,d)}]}))).call(p,Boolean);i&&i(v,e,y)}f.current={},g.current={},h.current=[],s&&(s=!1,window.requestIdleCallback?window.requestIdleCallback((function(){document.body.style.cursor="default"}),{timeout:30}):ue()((function(){document.body.style.cursor="default"}),30))}},onDragMove:function(e){var r;if(!iv(e,t)){var a=e.target,i=u.stageRef,l=(u.selectionContext,u.getRedundancyXY),c=(u.rootControlRef,(u.rulerRef.current||{}).operateLine),d=o&&o(e,k,v),g=a.getAbsolutePosition(),h=g.x,p=g.y,m=(0,ie.c)({},d||{}),y=m.x,E=m.y,D=Y().isUndefined(y)?h:y,A=Y().isUndefined(E)?p:E;U()(r=C()(f.current)).call(r,(function(e){var t,n=f.current[e],r=n.xDis,a=n.yDis,o=i.current.findOne("#".concat(e));o.draggable()&&(o.setAbsolutePosition({x:D-r,y:A-a}),null===(t=i.current.findOne("#transformer_".concat(e)))||void 0===t||t.forceUpdate())})),s||(s=!0,window.requestIdleCallback?window.requestIdleCallback((function(){document.body.style.cursor="move"}),{timeout:30}):ue()((function(){document.body.style.cursor="move"}),30));var k=ov(n,l());c&&c((0,ie.c)(k,{top:k.y,left:k.x}))}}}};function uv(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function cv(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?U()(n=uv(Object(a),!0)).call(n,(function(t){(0,L.c)(e,t,a[t])})):b()?S()(e,b()(a)):U()(r=uv(Object(a))).call(r,(function(t){B()(e,t,k()(a,t))}))}return e}function dv(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=null!==(t=e.current)&&void 0!==t?t:e,o=null==a?void 0:a.scaleX(),i=null==a?void 0:a.scaleY(),l=cv(cv({},n?a.getAbsolutePosition():{x:Math.max(a.x()+a.getParent().x(),0),y:Math.max(a.y()+a.getParent().y(),0)}),{},{width:a.width()*o,height:a.height()*i}),u=l.height,c=l.width,d=l.x,s=l.y;return r&&(a.scaleX(1),a.scaleY(1),a.x(0),a.y(0),W.console.log(a)),{x:Math.max(d,0),y:Math.max(s,0),width:c,height:u,right:d+c,bottom:s+u,scaleX:o,scaleY:i}}var sv=function(e){var t=e.shapeRef,n=e.refLineRef,r=e.onTransform,a=e.onTransformEnd,o=e.context;e.id;return{onTransform:function(e){(n.current||{}).searchRefLines;var a=(o.rulerRef.current||{}).operateLine,i=(0,o.getRedundancyXY)(),l=i.x,u=i.y,c=dv(t,!0),d=(c.scaleX,c.scaleY,c.x,c.y,c.width,c.height,c.x-l),s=c.y-u;a&&a((0,ie.c)(c,{top:s,left:d,x:d,y:s})),r&&r(c,e)},onTransformEnd:function(e){var r=(n.current||{}).hideRefLines,i=(o.getRedundancyXY,o.marginLeft,o.marginTop,0),l=0,u=dv(t,!1,!0),c=u.scaleX,d=u.scaleY,s=u.x,f=u.y,g=u.width,h=u.height;W.console.log("onTransformEnd",{x:Math.max(s,0),y:Math.max(f,0),width:g,height:h,right:s+g,bottom:f+h,scaleX:c,scaleY:d},e);var v=u.x-i,p=u.y-l;a&&a((0,ie.c)(u,{top:p,left:v,x:v,y:p}),e),r&&r()}}},fv=function(e){e.isSelected,e.refs,e.pixelRatio,e.scale,e.currentProp},gv=function(e){return function(t,n){var r;zn()(t.current)?U()(r=t.current).call(r,(function(t){return t[e]&&t[e](n)})):t.current&&t.current[e](n)}},hv=gv("strokeEnabled"),vv=gv("stroke"),pv=function(e){var t,n,r,a,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];zn()(e.current)?o?null===(t=e.current[0])||void 0===t||null===(t=t.getLayer())||void 0===t||t.batchDraw():U()(n=e.current).call(n,(function(e){return null==e?void 0:e.draw()})):o?null===(r=e.current)||void 0===r||r.getLayer().batchDraw():null===(a=e.current)||void 0===a||a.draw()},mv=function(e){var t=e.shapeRef,n=e.isSelected,r=e.shapeRefStroke,a=void 0===r?ot:r,o=e.controlStrokeRef,i=e.strokeEnabled,l=!1,u=(0,V.useCallback)((function(){var e;n||(null===(e=o.current)||void 0===e||e.mouseEnter(it),!i&&hv(t,!i),vv(t,it),pv(t,!0),W.console.log("DEFAULT_HOVER_BORDER_COLOR",it,t),W.console.log("DEFAULT_HOVER_BORDER_COLOR",t.current.stroke()));return!0}),[n,a,i,l]),c=(0,V.useCallback)((function(){var e,r;n||(!i&&hv(t,i),null===(e=o.current)||void 0===e||e.mouseLeave(),vv(t,""),a&&vv(t,a),W.console.log("onMouseOut",t,a,null===(r=t.current)||void 0===r?void 0:r.stroke()),pv(t,!0));return!0}),[n,a,i,l]);return(0,V.useEffect)((function(){var e;a&&(hv(t,i),null===(e=o.current)||void 0===e||e.mouseLeave(),vv(t,a),pv(t,!0))}),[n,a,i,l]),{onMouseOut:c,onMouseOver:u}},Cv=function(e){var t=e.shapeRef,n=e.isNotNeed;(0,V.useEffect)((function(){var e=function(e){var n,r;(W.console.log("e.ctrlKe shapeRef.current?.stopDrag()"),null!==(n=t.current)&&void 0!==n&&n.isDragging())&&(null===(r=t.current)||void 0===r||r.stopDrag())};return!n&&document.addEventListener("keydown",e),function(){!n&&document.removeEventListener("keydown",e)}}),[n])},yv=function(e){var t=e.id,n=e.refLineRef;return(0,V.useCallback)((function(e,r,a){var o=(n.current||{}).searchRefLines,i=o&&o(t);if(i&&!Y().isEmpty(i)){var l=i.selectedNode,u=i.x,c=i.y,d=i.refX,s=i.refY,f=a({x:Y().isUndefined(d)?u:d,y:Y().isUndefined(s)?c:s}),g=f.x,h=f.y;return l.absolutePosition({x:g,y:h}),{x:g,y:h}}}),[])},Ev=n(89280),Dv=n(40900),Av=n.n(Dv);function kv(e,t,n){return t=(0,Yl.c)(t),(0,ql.c)(e,wv()?Hl()(t,n||[],(0,Yl.c)(e).constructor):t.apply(e,n))}function wv(){try{var e=!Boolean.prototype.valueOf.call(Hl()(Boolean,[],(function(){})))}catch(e){}return(wv=function(){return!!e})()}var bv=function(e){return"".concat(e).replace("#","")},xv=function(e){function t(e){var n,r,a,o,i,l;return(0,$l.c)(this,t),(l=kv(this,t,[e])).state={color:bv(e.color),alpha:e.alpha,isCheck:!1},l.clickFunc=Ln()(n=l.clickFunc).call(n,(0,Ev.c)(l)),l.changeColorFromItems=Ln()(r=l.changeColorFromItems).call(r,(0,Ev.c)(l)),l.handleKeyDown=Ln()(a=l.handleKeyDown).call(a,(0,Ev.c)(l)),l.handleChangeText=Ln()(o=l.handleChangeText).call(o,(0,Ev.c)(l)),l.handleBlur=Ln()(i=l.handleBlur).call(i,(0,Ev.c)(l)),l}return(0,Xl.c)(t,e),(0,_l.c)(t,[{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.clickFunc)}},{key:"componentWillReceiveProps",value:function(e){this.props.color!==e.color&&this.setState({color:bv(e.color)})}},{key:"componentDidUpdate",value:function(){this.props.showPanel?document.addEventListener("click",this.clickFunc):document.removeEventListener("click",this.clickFunc)}},{key:"clickFunc",value:function(e){for(var t=e.target;t;){if(t===Yr().findDOMNode(this))return;t=t.parentNode}this.closePanel()}},{key:"createColorItems",value:function(){var e=this;if(this.props.showPanel){var t=Y().flatten(this.props.colors);return N()(Y()).call(Y(),t,(function(t,n){var r={backgroundColor:t="current"===t?e.props.color||"#ffffff":t};return H().createElement("span",{key:n,className:Hn()("colorItem","kd-cq-color-picker-color-block"),title:t,style:r,onClick:function(n){return e.changeColorFromItems({color:t&&(ou()(t).call(t,"#")?Sn()(t).call(t,1):t),alpha:e.state.alpha})}})}))}return null}},{key:"closePanel",value:function(){this.props.onClosePanel()}},{key:"changeColorFromItems",value:function(e){var t=e.color,n=e.alpha;this.state.isCheck||this.changeColor({color:t,alpha:n})}},{key:"changeColor",value:function(e){var t=this,n=e.color,r=e.alpha;this.setState({color:n,alpha:r},(function(){n.match(/^([0-9a-fA-F]{6}|[0-9a-fA-F]{3})$/)?t.props.onChange({color:"#"+n,alpha:r}):/^themeColor/.test(n)&&t.props.onChange({color:n,alpha:r})}))}},{key:"handleChangeText",value:function(e){var t=e.target.value;this.setState({color:t,alpha:this.state.alpha})}},{key:"handleChangeAlpha",value:function(e){var t=this.state.color,n=e.target.value;n<0||n>100||this.changeColor({color:t,alpha:n})}},{key:"handleKeyDown",value:function(e){13===e.keyCode&&this.changeColorFromItems({color:this.state.color,alpha:this.state.alpha})}},{key:"handleBlur",value:function(e){this.changeColorFromItems({color:this.state.color,alpha:this.state.alpha})}},{key:"render",value:function(){var e,t,n=this.props,r=(n.color,n.alpha),a=(n.defaultColor,n.poperContainer);this.state.isCheck;var o=null==a?void 0:a.current,i=null!==(e=null==a||null===(t=a.current)||void 0===t?void 0:t.getBoundingClientRect())&&void 0!==e?e:{},l=i.left,u=void 0===l?0:l,c=i.top,d=void 0===c?0:c;return o?Yr().createPortal(H().createElement("div",{ref:this.props.colorPickerRef,className:"colorPicker",style:{position:"absolute",top:d-77+39,left:u,zIndex:1050}},this.props.showPanel?H().createElement("div",{className:Hn()("colorPanel","kd-cq-color-picker kd-cq-printd-color-picker")},H().createElement("div",{className:"colors"},this.createColorItems(),H().createElement("div",{className:"footer"},H().createElement("div",{className:Hn()("colorInfo","kd-cq-color-picker-color-block"),style:{backgroundColor:"#".concat(this.state.color)}}),H().createElement("span",{className:"text"},(0,W.getLangMsg)("printd.grid.key0015")),H().createElement("div",{className:"customColorInput"},H().createElement("span",{className:"punctuation"},"#"),H().createElement("input",{placeholder:(0,W.getLangMsg)("printd.grid.key0016"),value:this.state.color,onChange:this.handleChangeText,onKeyDown:this.handleKeyDown,onBlur:this.handleBlur}))))):null),document.body):H().createElement("div",{className:"colorPicker"},this.props.showPanel?H().createElement("div",{className:Hn()("colorPanel","kd-cq-color-picker kd-cq-printd-color-picker")},H().createElement("div",{className:"colors"},this.createColorItems(),H().createElement("div",{className:"footer"},H().createElement("div",{className:Hn()("colorInfo","kd-cq-color-picker-color-block"),style:{backgroundColor:"#".concat(this.state.color)}}),H().createElement("span",{className:"text"},(0,W.getLangMsg)("printd.grid.key0015")," "),H().createElement("div",{className:"customColorInput"},H().createElement("span",{className:"punctuation"},"#"),H().createElement("input",{placeholder:(0,W.getLangMsg)("printd.grid.key0016"),value:this.state.color,onChange:this.handleChangeText,onKeyDown:this.handleKeyDown,onBlur:this.handleBlur}))))):null)}}]),t}(H().Component);xv.propTypes={color:Av().string,alpha:Av().number,defaultColor:Av().string,onChange:Av().func},xv.defaultProps={colors:[["#45cdff","#3dccc0","#40bd6e","#99d92b","#ffd52e","#ffb44a","#ff854d","#ff5257","#ff3b72","#9a4dff","#3987ed","#5797ff"],["#16b0f1","#16b8b1","#1ba854","#77c404","#fdc200","#ff991c","#ff5f1f","#fb2323","#f90d58","#701df0","#0e5fd8","#276ff5"],["#ffffff","#fafafa","#f5f5f5","#f2f2f2","#e5e5e5","#d9d9d9","#cccccc","#999999","#666666","#404040","#212121","#000000"]],alpha:100,color:"#ffffff",defaultColor:"#ffffff"};var Sv=xv,Iv=function(e){var t=e.value,n=e.handleChange,r=e.enable,a=e.setColorPickVisible,o=e.setMoreBarVisible,i=(0,V.useState)(null),l=(0,M.c)(i,2),u=l[0],c=l[1],d=(0,V.useState)(on),s=(0,M.c)(d,2),f=s[0],g=(s[1],(0,V.useRef)(null)),h=(0,V.useRef)(null),v=(0,V.useRef)(null);return(0,W.useOnClickOutside)([g,v,h],(function(){})),(0,V.useEffect)((function(){r||(c(!1),a(!1),o(!1))}),[r]),(0,V.useEffect)((function(){r&&u&&a(!0)}),[u,r]),H().createElement(H().Fragment,null,H().createElement("svg",{ref:g,className:Hn()(["navtool-icon",{"editor-panel-visible":u}]),width:"200",height:"200",viewBox:"0 0 20 20",version:"1.1",xmlns:"http://www.w3.org/2000/svg",onClick:function(){c(!1),n(t)}},H().createElement("title",null,(0,W.getLangMsg)("printd.grid.key0014")),H().createElement("g",{id:"油漆桶",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},H().createElement("g",{id:"编组",transform:"translate(2.810513, 0.777902)"},H().createElement("rect",{id:"矩形备份-3",stroke:"#D9D9D9","stroke-width":"0.5",fill:t,x:"-0.060513479",y:"15.9720982",width:"14.5",height:"2.5",rx:"1"}),H().createElement("path",{d:"M7.35237743,0.219669914 L8.05948421,0.926776695 L8.06299995,0.931 L12.8033719,5.58910098 C13.6474203,6.41866449 13.6988871,7.75029176 12.9455484,8.64490829 L12.82651,8.7757058 L7.52324583,14.07897 C6.68640806,14.9158077 5.35438522,14.9556572 4.47038697,14.1985182 L4.34126532,14.07897 L0.658927543,10.3966322 C-0.177910225,9.55979443 -0.217759275,8.22777195 0.539946158,7.34320727 L0.659583703,7.21399633 L6.45599995,1.445 L6.29171726,1.28033009 C5.99882404,0.987436867 5.99882404,0.512563133 6.29171726,0.219669914 C6.58461048,-0.0732233047 7.05948421,-0.0732233047 7.35237743,0.219669914 Z M12.7772674,11.2000162 C12.8448732,11.2253684 12.8982166,11.2787118 12.9235688,11.3463177 L13.6628014,13.3176044 C13.8643815,13.8551514 13.5920265,14.4543322 13.0544796,14.6559123 C12.9377675,14.6996794 12.8141351,14.7220982 12.6894865,14.7220982 C12.1153861,14.7220982 11.6499858,14.2566979 11.6499858,13.6825975 C11.6499858,13.557949 11.6724047,13.4343165 11.7161717,13.3176044 L12.4554042,11.3463177 C12.5038843,11.2170376 12.6479873,11.1515362 12.7772674,11.2000162 Z M7.52128565,2.50147715 L2.77699995,7.222 L11.9757231,7.22266041 C11.9821309,7.05395544 11.9319029,6.8835921 11.8253092,6.74250292 L11.751965,6.65901613 L7.52128565,2.50147715 Z",id:"形状结合",fill:"#404040"})))),H().createElement(z.Icon,{ref:v,type:f,className:Hn()(["navtool-icon-arrow",{"editor-panel-visible":u}]),onClick:function(){r&&c(!u)}}),H().createElement(Sv,{colorPickerRef:h,poperContainer:g,showPanel:u&&r,color:t,onClosePanel:function(){c(!1)},onChange:function(e){var t=e.color;n(t)}}))},Bv=function(e){var t=e.value,n=e.handleChange,r=e.enable,a=e.setColorPickVisible,o=e.setMoreBarVisible,i=(0,V.useState)(null),l=(0,M.c)(i,2),u=l[0],c=l[1],d=(0,V.useState)(on),s=(0,M.c)(d,2),f=s[0],g=(s[1],(0,V.useRef)(null)),h=(0,V.useRef)(null),v=(0,V.useRef)(null);return(0,W.useOnClickOutside)([h,v,g],(function(){})),(0,V.useEffect)((function(){r||(c(!1),a(!1),o(!1))}),[r]),(0,V.useEffect)((function(){r&&u&&a(!0)}),[u,r]),H().createElement(H().Fragment,null,H().createElement("svg",(0,L.c)({ref:h,className:Hn()(["navtool-icon",{"editor-panel-visible":u}]),width:"200",height:"200",viewBox:"0 0 20 20",version:"1.1",xmlns:"http://www.w3.org/2000/svg",onClick:function(){}},"onClick",(function(){c(!1),n(t)})),H().createElement("title",null,(0,W.getLangMsg)("printd.grid.key0017")),H().createElement("g",{id:"文字颜色",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},H().createElement("g",{id:"编组",transform:"translate(3.000000, 1.225936)"},H().createElement("path",{d:"M7.10199875,0.000488183945 C7.39408208,-0.0100860974 7.67791213,0.151661551 7.80920279,0.433215284 L7.80920279,0.433215284 L13.7258585,13.1215243 C13.9009127,13.4969293 13.7384963,13.9431646 13.3630913,14.1182188 C12.9876863,14.2932731 12.541451,14.1308567 12.3663968,13.7554517 L12.3663968,13.7554517 L10.2754569,9.274 L3.87745688,9.274 L1.7883667,13.7554517 C1.61331249,14.1308567 1.16707714,14.2932731 0.791672168,14.1182188 C0.416267191,13.9431646 0.253850808,13.4969293 0.428905024,13.1215243 L6.34556069,0.433215284 C6.48061111,0.143598729 6.77706251,-0.0192517453 7.07787471,0.00182180938 Z M7.07645688,2.413 L4.57645688,7.774 L9.57645688,7.774 L7.07645688,2.413 Z",id:"形状结合",fill:"#404040"}),H().createElement("rect",{id:"矩形备份-2",stroke:"#D9D9D9","stroke-width":"0.5",fill:t,x:"-0.25",y:"15.5240643",width:"14.5",height:"2.5",rx:"1"})))),H().createElement(z.Icon,{ref:v,type:f,className:Hn()(["navtool-icon-arrow",{"editor-panel-visible":u}]),onClick:function(){r&&c(!u)}}),H().createElement(Sv,{colorPickerRef:g,poperContainer:h,showPanel:u&&r,color:t,onClosePanel:function(){c(!1)},onChange:function(e){var t=e.color;n(t)}}))},Mv="nav-tool-fontsize",Lv=function(e){var t=e.options,n=e.disabled,r=e.className,a=e.value,o=e.onChange,i=e.dropdownStyle,l=void 0===i?{}:i,u=e.bizType,c=(0,V.useRef)(null),d=(0,V.useRef)(null),s=(0,V.useState)(!1),f=(0,M.c)(s,2),g=f[0],h=f[1];(0,W.useOnClickOutside)([c,d],(function(e){for(var t=e.target;t;){var n;if(t.classList&&Bn()(n=Qn()(t.classList)).call(n,"".concat(Mv,"-dropdown")))return;t=t.parentNode}h(!1)}));var v=N()(t).call(t,(function(e){var t=e.label,n=e.value;return{key:n,label:t,selected:a===n}})),p=(0,V.useRef)(null);(0,V.useEffect)((function(){var e;null===(e=p.current)||void 0===e||e.focus(),ue()((function(){var e;null===(e=p.current)||void 0===e||e.blur()}))}),[]);var m=(0,V.useState)(a),C=(0,M.c)(m,2),y=C[0],E=C[1];(0,V.useEffect)((function(){E(a)}),[a]);var D=(0,V.useCallback)((function(){p.current.select()}),[]);return H().createElement("div",{ref:c,className:Hn()(Mv,r)},H().createElement(z.Dropdown,{key:"fontsize-dropdown-".concat(a),selectable:!0,defaultKey:a,getTriggerElement:function(){return d.current},popperClassName:"".concat(Mv,"-dropdown"),className:"".concat(Mv,"-dropdown"),disabled:n,dropdownStyle:l,menu:v,onItemClick:function(e){o(e),h(!1)},visible:g},H().createElement(z.InputNumber,{ref:p,disabled:n,borderType:"bordered",decimalLength:2,onFocus:D,value:y,onChange:function(e){if("1"!==u){var t=e.target.value;E(t||"")}},onBlur:function(e){var t=e.target.value;o(isNaN(+t)?6:+t)},className:"".concat(Mv,"-input"),onPressEnter:function(){}})),H().createElement(z.Icon,{ref:d,type:on,onClick:function(){h(!g)}}))},Rv=n(74741),Fv=n.n(Rv);function Tv(){return"Mac68K"==window.navigator.platform||"MacPPC"==window.navigator.platform||"Macintosh"==window.navigator.platform||"MacIntel"==window.navigator.platform}function Nv(e){return Tv()?e.metaKey:e.ctrlKey}function Gv(e){return e.shiftKey}var Zv,Qv,Pv;function Jv(e,t){var n,r=e.findControl(t[0]);if(!Zf(r)&&(n=r,!Bn()(Dt).call(Dt,null==n?void 0:n.type)))return[];for(var a=[r[Mt]],o=1;o<t.length;){var i=e.findControl(t[o]);if(Bn()(a).call(a,i[Mt]))break;a.push(i[Mt]),o++}return a}function jv(e,t,n){var r,a,o=n[0],i=n[n.length-1],l=e.findControl(t[0])[Bt],u=null===(r=e.findControl(t[t.length-1]))||void 0===r?void 0:r[Bt],c=function(e,t){l===e[Bt]&&t.firstRowCells.push(e),u===e[Bt]&&t.lastRowCells.push(e),o===e[Mt]&&t.firstColCells.push(e),i===e[Mt]&&t.lastColCells.push(e)},d={firstRowCells:[],lastRowCells:[],firstColCells:[],lastColCells:[]},s=((null===(a=e.getParentControl)||void 0===a?void 0:a.call(e,o))||{}).mergeConfig;if(function(e){return C()(e||{}).length>0}(s))for(var f=function(e,t){var n=e.findControl(t[0]),r=n[Bt],a=-1,o=e.findControl(r);for(;Bn()(Ct).call(Ct,null===(i=o)||void 0===i?void 0:i.type);){var i,l;o=null===(l=e.getPrevSibling(o.id))||void 0===l?void 0:l.control,a++}var u=n[Mt],c=-1,d=e.findControl(u);for(;Bn()(yt).call(yt,null===(s=d)||void 0===s?void 0:s.type);){var s,f;d=null===(f=e.getPrevSibling(d.id))||void 0===f?void 0:f.control,c++}return{rowIndex:a,colIndex:c}}(e,t),g=n.length,h=t.length/g,v=function(e,t,n,r){var a,o=t.rowIndex,i=t.colIndex;return P()(a=C()(e)).call(a,(function(t,a){var l=a.split("_"),u=(0,M.c)(l,2),c=u[0],d=u[1],s=Number(c),f=Number(d);return s>=o&&s<o+n&&f>=i&&f<i+r&&(t[a]=e[a]),t}),{})}(s,f,h,g),p=0,m=0;m<t.length;){for(var y=0;y<g&&m<t.length;){var E,D=e.findControl(t[m]);c(D,d);var A=f.rowIndex,k=f.colIndex,w=v[Z()(E="".concat(A+p,"_")).call(E,k+y)];if(w){var b=w.rowLength,x=w.columnLength;p+b===h&&d.lastRowCells.push(D),y+x===g&&d.lastColCells.push(D)}m++,y++}p++}else d=P()(t).call(t,(function(t,n){var r=e.findControl(n);return c(r,t),t}),d);return d}var Ov=["id","parentId"],Uv=["id","parentId"];function zv(e,t){var n=void 0!==Jn()&&On()(e)||e["@@iterator"];if(!n){if(zn()(e)||(n=function(e,t){var n;if(!e)return;if("string"==typeof e)return Wv(e,t);var r=Sn()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Qn()(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wv(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw o}}}}function Wv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Kv(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vv(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?U()(n=Kv(Object(a),!0)).call(n,(function(t){(0,L.c)(e,t,a[t])})):b()?S()(e,b()(a)):U()(r=Kv(Object(a))).call(r,(function(t){B()(e,t,k()(a,t))}))}return e}var Hv=(0,W.getLangMsg)("printd.grid.key0049"),qv=(0,W.getLangMsg)("printd.grid.key0050"),Yv=(0,W.getLangMsg)("printd.grid.key0051"),Xv=(0,W.getLangMsg)("printd.grid.key0052"),_v=function(e,t,n){var r=Y().cloneDeep(e);return r.parentId=t,r.key=(0,W.createUniqueKey)(e.key,e.type,n.current),r.id=(0,W.createUUid)(),r},$v=function e(t){var n,r,a=t.selectItem,o=t.items,i=t.parentId,l=t.dataRef,u=a.id,c=a.parentId,d=((0,Wn.c)(a,Ov),_v(a,i||c,l)),s=F()(n=N()(o).call(o,(function(e){if(e.parentId===u)return e}))).call(n,Boolean);return Z()(r=[d]).call(r,Y().flattenDeep(N()(s).call(s,(function(t){return e({selectItem:t,items:o,parentId:d.id,dataRef:l})}))))},ep=function(e){var t,n=e.selectItem,r=e.items,a=e.parentId,o=e.dataRef,i=n.id,l=n.parentId,u=((0,Wn.c)(n,Uv),_v(n,a||l,o));u.parentId=a||l,u.subGridId=[];var c=F()(r).call(r,(function(e){return e.parentId===i})),d=df(c),s=d.cells,f=d.rows,g=d.columns,h=N()(f).call(f,(function(e){return(0,ie.c)({},Y().cloneDeep(e),{id:(0,W.createUUid)(),key:(0,W.createUniqueKey)(e.key,e.type,o.current),parentId:u.id})})),v=N()(g).call(g,(function(e){return(0,ie.c)({},Y().cloneDeep(e),{id:(0,W.createUUid)(),key:(0,W.createUniqueKey)(e.key,e.type,o.current),parentId:u.id})})),p=N()(s).call(s,(function(e){return(0,ie.c)({},Y().cloneDeep(e),{id:(0,W.createUUid)(),key:(0,W.createUniqueKey)(e.key,e.type,o.current),parentId:u.id,rowId:h[fe()(f).call(f,(function(t){return t.id===e.rowId}))].id,columnId:v[fe()(g).call(g,(function(t){return t.id===e.columnId}))].id})})),m=Y().flattenDeep(N()(s).call(s,(function(e,t){var n,a=e.id,i=new(aa()),l=F()(n=N()(r).call(r,(function(e){if(e.parentId===a)return i.set(e,t),e}))).call(n,Boolean);return Y().flattenDeep(N()(l).call(l,(function(e){return $v({selectItem:e,items:r,dataRef:o,parentId:p[i.get(e)].id})})))})));return Z()(t=[u]).call(t,h,v,p,m)},tp="align-shapes",np=Z()(Zv=[{name:Ge,margin:5},{name:Ze,margin:10},{name:Qe,margin:7}]).call(Zv,(0,kn.c)(N()(Qv=[Pe,Je,je]).call(Qv,(function(e){return{name:e,margin:4}}))),(0,kn.c)(N()(Pv=[Oe,Ue,Te,Fe,Ne,ze]).call(Pv,(function(e){return{name:e,margin:4}}))),[{name:tp,margin:19}]),rp=(0,V.memo)((0,V.forwardRef)((function(e,t){var n,r,a,o,i,l,u,c,d,s,f,g,h,v,p,m,y,E,D,A,k,w=e.meta,b=e.data,x=e.context,S=(e.onChangeProperty,(0,V.useContext)(W.ConfigContext)),I=S.getPrefixCls,B=S.prefixCls,R=((0,V.useRef)(null),(0,V.useState)(!1)),T=(0,M.c)(R,2),G=T[0],Q=T[1],P=(0,V.useState)(!1),J=(0,M.c)(P,2),j=J[0],O=J[1],K=(0,V.useState)(!1),q=(0,M.c)(K,2),X=q[0],_=q[1],$=(0,V.useState)(!1),ee=(0,M.c)($,2),te=ee[0],ne=ee[1],re=(0,V.useState)(!1),ae=(0,M.c)(re,2),oe=ae[0],le=ae[1],ue=I(B,"nav-tool"),ce=(0,V.useState)("#000000"),de=(0,M.c)(ce,2),se=de[0],fe=de[1],ge=(0,V.useState)(un),he=(0,M.c)(ge,2),ve=he[0],pe=he[1],me=(0,V.useState)(Zt),Ce=(0,M.c)(me,2),ye=Ce[0],Ee=Ce[1],De=x.dataContext,Ae=x.selectionContext,ke=x.canvasRef,we=x.activedSelectId,be=x.globalConfig,xe=x.scaleRef,Se=x.asistantBorderRef,Ie=x.isMultiKeyActiveWhenSelectedRef,Be=void 0===Ie?(0,V.useRef)(!1):Ie,Me=(0,V.useState)("1"===b.bizType),Le=(0,M.c)(Me,2),Re=Le[0],_e=Le[1],$e=(0,V.useState)((function(){return(null==xe?void 0:xe.current)||"".concat(100)})),et=(0,M.c)($e,2),tt=et[0],nt=et[1],rt=(0,V.useContext)(W.DataFactoryContext),at=rt.dataFactory,ot=rt.modelFactory,it=Tn(Vv(Vv({meta:w},x),{},{activedSelectId:we,modelFactory:ot})),lt=it.modelData,ut=it.selectItem,ct=it.isRootId,st=it.rootId,ft=function(e){var t=e.selectionContext,n=e.dataContext,r=e.meta,a=e.globalConfig,o=t.getSelection(),i=o.length>1,l=N()(o).call(o,(function(e){return n.findControl(e)})),u=N()(l).call(l,(function(e){return e.type})),c=(0,V.useMemo)((function(){var e=(0,W.getCommonProperties)(u)(r,a),t=Fv()(e).call(e,(function(e){return e.Nodes||[]}));return N()(t).call(t,(function(e){return Y().camelCase(e.Id)}))}),[u,r]);return{commonProp:c,multiSelect:i,selection:o}}({selectionContext:Ae,dataContext:De,meta:w,globalConfig:be}),gt=ft.commonProp,ht=ft.multiSelect,vt=ft.selection,pt=N()(vt).call(vt,(function(e){return De.findControl(e)})),mt=Yn()(lt).call(lt,(function(e){return"CommonGroup"===e.Id})),Ct=null==mt||null===(n=mt.Nodes)||void 0===n?void 0:Yn()(n).call(n,(function(e){return"FontName"===e.Id})),yt=null==mt||null===(r=mt.Nodes)||void 0===r?void 0:Yn()(r).call(r,(function(e){return"FontSize"===e.Id})),Et=(0,V.useContext)(En).setMessage,Dt=Ae.getSelection(),At=ut[ze]||dt,kt=fg(At),wt=(0,M.c)(kt,4),bt=wt[0],xt=(wt[1],wt[2],wt[3],1===bt.length&&bt[0],Qf(ut)),St=(_n()(a=Ae.getSelection()).call(a,(function(e){return Zf(De.findControl(e))})),we!==st),It=_n()(o=Ae.getSelection()).call(o,(function(e){return Bn()(nn).call(nn,De.findControl(e).type)})),Bt=St&&ua()(i=Ae.getSelection()).call(i,(function(e){return!Bn()(tn).call(tn,De.findControl(e).type)})),Mt=St&&ua()(l=Ae.getSelection()).call(l,(function(e){return!Bn()(an).call(an,De.findControl(e).type)})),Lt=St&&ua()(u=Ae.getSelection()).call(u,(function(e){return!Bn()(rn).call(rn,De.findControl(e).type)})),Rt=(0,V.useCallback)((function(e){W.console.log("scale---change",e),e!==tt&&(nt(e),xe&&(xe.current=e),W.eventBus.emit("scale",+e/100))}),[tt]),Ft=N()(c=[80,100,150,200,300]).call(c,(function(e){return{label:"".concat(e,"%"),value:"".concat(e)}})),Ut=(0,V.useCallback)((function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.selection,r=t.items,a=Y().flattenDeep(N()(e=n||Dt).call(e,(function(e){var t=r?Yn()(r).call(r,(function(t){return t.id===e})):De.findControl(e);r&&(t.parentId=De.getRootId());var n=r||De.getData().items;return Qf(t)?ep({selectItem:t,items:n,dataRef:be.dataRef}):$v({selectItem:t,items:n,dataRef:be.dataRef})})));return a}),[ct,w,Dt,at,be]),zt=(0,V.useCallback)((function(e){var t,n,r;e=zn()(e)?e:F()(t=[e]).call(t,Boolean);var a=N()(n=F()(e).call(e,(function(e){return uh(e)||ch(e)}))).call(n,(function(e){return e.id})),o=N()(r=F()(e).call(e,Jf)).call(r,(function(e){return e.id})),i=F()(e).call(e,(function(e){return!(ch(e)||uh(e)||Bn()(a).call(a,e.parentId))&&!(Jf(e)||Yf(e)||Bn()(o).call(o,e.parentId))}));i&&i.length&&De.addControl((0,W.createPasteAction)(i)).then((function(){var e,t=N()(i).call(i,(function(e){return e.id}));Ae.setSelect(N()(e=F()(i).call(i,(function(e){return!Bn()(t).call(t,e.parentId)}))).call(e,(function(e){return e.id})))}))}),[]),Wt=(0,V.useCallback)((function(){if(Bt){var e=Ut();e&&zt(N()(e).call(e,(function(e){return delete e.tableTailId,e})))}}),[ct,Dt,w,Bt]),Kt=(0,V.useCallback)((function(){De.redo()}),[]),Vt=(0,V.useCallback)((function(){De.undo()}),[]),Ht=(0,V.useState)(!1),qt=(0,M.c)(Ht,2),Yt=qt[0],Xt=qt[1],_t=(0,V.useCallback)((function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";null!==(e=ke.current)&&void 0!==e&&null!==(e=e.content)&&void 0!==e&&e.style&&(ke.current.content.style.cursor=t)}),[]);(0,V.useEffect)((function(){return W.eventBus.on("format-done",(function(){Yt&&(Xt(!1),_t(""),$t.current={})})),function(){W.eventBus.off("format-done")}}),[Yt]);var $t=(0,V.useRef)({}),en=(0,V.useCallback)((function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!ct){if(Yt)return Xt(!1),$t.current={},void _t("");_t("url(".concat("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQflBRgDCh1Mv+qbAAABAklEQVQoz3XRPyuFYRzG8c/9PE8pf0rHyEApg3CykeGUt6BMJtlNJpMysRmkjEokbwElg5JkMB0ZSJGSjkN0zm05eNRxrd9v133d/UKJxJAe0W+CqjMvHMowZlNQk0+7LYtiSYaiihlvOVwzZ1KnZzFDohqvw8efhnvD9i05yPCoP2z4zOGoqKzPoIO0l1sfCg3wPbJsxagrpxmerTbAiFktiFrNGrJHciiKohTGTUsFQaJuxwkZRyipUTDgwVrtIs3NSXI/Xzelw246odEaRdmP0KVowaltRcdHTRqCujs3XgVNn/gnv0KU6Nan7c/ZchuenFv2jvPmQsW8EZlbl3nhCwJBSyl0EBnIAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIxLTA1LTI0VDAzOjEwOjI5KzAwOjAwjsqiaAAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMS0wNS0yNFQwMzoxMDoyOSswMDowMP+XGtQAAAAASUVORK5CYII=","),auto")),e?(Xt(!0),$t.current.isDoubleClick=!1):(Xt(!0),$t.current.isDoubleClick=!0),$t.current.selectItem=ut}}),[ct,we,ut,Yt]),on=(0,V.useCallback)((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t=e!==Te||t?t:1,we!==st)if(ht){var r=N()(vt).call(vt,(function(n){return[n,(0,L.c)({},e,t)]}));De.batchUpdateControlPropertyValues((0,W.createUpdateAction)(r,n))}else De.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[we,(0,L.c)({},e,t)]],n))}),[we,st,ht,vt,xt,ut]),ln=(0,V.useCallback)((function(){var e;if(Mt){var t=F()(e=Ae.getSelection()).call(e,(function(e){return e!==st}));t.length&&(De.deleteControl((0,W.createDeleteAction)(t)),Ae.setSelect([]))}}),[st,Mt]),sn="".concat(ue,"-dropdown-text"),fn={arrow:!1,arrowOffset:0,arrowSize:0,placement:"rightTop",popperClassName:"kds-dropdown"},gn="borderWidth",hn="borderColor",vn="dotted",pn="dashed",mn=(0,V.useState)(!1),Cn=(0,M.c)(mn,2),yn=Cn[0],Dn=Cn[1],An=(0,V.useState)(!1),wn=(0,M.c)(An,2),bn=wn[0],xn=wn[1],In=(z.Dropdown.Menu,z.Dropdown.Item,{marginRight:-5}),Mn=(0,V.useState)(1),Ln=(0,M.c)(Mn,2),Rn=Ln[0],Fn=Ln[1];(0,V.useEffect)((function(){Fn(Number(ut[Te])||1)}),[ut[Te]]);var Nn=function(e){var t,n=H().cloneElement(e,{},(0,kn.c)(N()(t=e.props.children.props.data).call(t,(function(e){return H().cloneElement(e,{},[e.props.children.props.data,H().createElement("div",{className:sn},e.props.children.props.itemTitle)])}))));return H().createElement("div",null,n,H().createElement("div",{className:"customInput"},H().createElement("span",{className:"label"},(0,W.getLangMsg)("printd.components.key0064")),H().createElement(z.InputNumber,{decimalLength:2,onChange:function(e){var t=e.target.value;if(!(t<=0&&""!==t))return t>50?Et((0,W.getLangMsg)("printd.components.key0065")):void Fn(t)},onBlur:function(){on(Te,Number(Rn))},value:Rn,borderType:"bordered",max:50,min:1,minMark:"[",onClick:function(e){e.stopPropagation()},onKeyDown:function(e){13===e.keyCode&&on(Te,Number(Rn))},zeroShow:!1,showDecimalTailZero:!0})))},Gn={style:{},dropdownClassName:"kds-select",dropdownStyle:{minWidth:120},dropdownRender:function(e){var t,n=H().cloneElement(e,{},N()(t=e.props.children.props.data).call(t,(function(e){return[H().cloneElement(e,{},[e.props.children,H().createElement("div",{className:sn},e.props.children.props.itemTitle)])]})));return n}},Zn=(0,V.useCallback)((function(e){return pt.length&&ua()(pt).call(pt,(function(t){return e&&t[e]}))}),[pt]),Qn=(0,V.useCallback)((function(e,t){var n=(0,kn.c)(new(fa())(N()(pt).call(pt,(function(n){return n[e]||t}))));return 1===n.length?n[0]:t}),[pt]),Pn=(0,V.useCallback)((function(e,t,n){var r;return Hn()((0,L.c)((0,L.c)((0,L.c)((0,L.c)((0,L.c)({},"".concat(ue,"-operation-btn"),!0),Z()(r="".concat(ue,"-operation-btn-")).call(r,t),t),"".concat(ue,"-btn-enable"),e),"".concat(ue,"-btn-disable"),!e),"".concat(ue,"-btn-used"),Zn(t)||n))}),[ue,ut,Zn]),Jn=(0,V.useCallback)((function(e){return!Bn()(gt).call(gt,e)}),[gt]),jn=null!==(d=null==Ct||null===(s=Ct.Editor)||void 0===s||null===(s=s.Enum)||void 0===s?void 0:N()(s).call(s,(function(e){return{value:e.Value,label:e.Name,isCustom:e.IsCustom}})))&&void 0!==d?d:[{value:"default",label:(0,W.getLangMsg)("printd.grid.key0127")}],On=null!==(f=null==Ct||null===(g=Ct.Editor)||void 0===g||null===(g=g.Enum)||void 0===g?void 0:N()(h=F()(g).call(g,(function(e){return!!e.IsCustom}))).call(h,(function(e){return{key:e.Value,label:e.Name,isCustom:e.IsCustom}})))&&void 0!==f?f:[],Un=null!==(v=null==yt||null===(p=yt.Editor)||void 0===p||null===(p=p.Enum)||void 0===p?void 0:N()(p).call(p,(function(e){return{value:e.Value,label:e.Name}})))&&void 0!==v?v:[{value:"default",label:12}],Wn=(0,V.useState)((function(){return np})),Kn=(0,M.c)(Wn,2),Vn=Kn[0],qn=Kn[1],Xn=(0,V.useState)((function(){return[]})),$n=(0,M.c)(Xn,2),er=$n[0],tr=$n[1],nr=function(e,t,n,r){if(ht){var a;if(Bn()(a=[Gt,Nt]).call(a,t)&&!1===Be.current){var o=Jv(De,vt);if(o.length){var i,l,u,c,d,s=function(e,t){var n=f(e,t),r=(0,M.c)(n,2),a=r[0],o=r[1];v[a]=o},f=function(t,a){var o,i,l=v[t.id]?v[t.id][ze]:t[ze],u=Bn()(o=["dashed","dotted"]).call(o,n)?.5:g===Gt?2:n,c=Bn()(i=["dashed","dotted"]).call(i,n)?n:"solid",d=Tf(l,a,e,u,c);return[t.id,(0,L.c)((0,L.c)({scale:tt,changeBorderType:r},ze,d),"gridBorder",{color:e,type:a,line:n})]},g=t,h=jv(De,vt,o),v={};return U()(i=h.firstRowCells).call(i,(function(e){return s(e,Jt)})),U()(l=h.lastRowCells).call(l,(function(e){return s(e,Ot)})),U()(u=h.firstColCells).call(u,(function(e){return s(e,Pt)})),U()(c=h.lastColCells).call(c,(function(e){return s(e,jt)})),void De.batchUpdateControlPropertyValues((0,W.createUpdateAction)(N()(d=C()(v)).call(d,(function(e){return[e,v[e]]}))))}}var p=N()(vt).call(vt,(function(a){var o=De.findControl(a),i=o[ze],l=Qf(o);t="Line"===o.type?"allBorder":t;var u=Ff(i,e,t,n);return[a,(0,L.c)((0,L.c)({scale:tt,changeBorderType:r},ze,u),"gridBorder",l&&{color:e,type:t,line:n})]}));De.batchUpdateControlPropertyValues((0,W.createUpdateAction)(p))}else{t="Line"===ut.type?"allBorder":t;var m=Ff(At,e,t,n);De.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[we,(0,L.c)((0,L.c)({scale:tt,changeBorderType:r},ze,m),"gridBorder",xt&&{color:e,type:t,line:n})]]))}},rr=[{value:Pt,label:H().createElement(z.Icon,{prefix:"printdesignericon",type:"zuobiankuang",itemTitle:(0,W.getLangMsg)("printd.grid.key0055"),title:Yv}),title:(0,W.getLangMsg)("printd.grid.key0055"),disabled:"Line"===ut.type},{value:jt,label:H().createElement(z.Icon,{prefix:"printdesignericon",type:"youbiankuang",itemTitle:(0,W.getLangMsg)("printd.grid.key0056"),title:Yv}),title:(0,W.getLangMsg)("printd.grid.key0056"),disabled:"Line"===ut.type},{value:Jt,label:H().createElement(z.Icon,{prefix:"printdesignericon",type:"shangbiankuang",itemTitle:(0,W.getLangMsg)("printd.grid.key0057"),title:Yv}),title:(0,W.getLangMsg)("printd.grid.key0057"),disabled:"Line"===ut.type},{value:Ot,label:H().createElement(z.Icon,{prefix:"printdesignericon",type:"xiabiankuang",itemTitle:(0,W.getLangMsg)("printd.grid.key0058"),title:Yv}),title:(0,W.getLangMsg)("printd.grid.key0058"),disabled:"Line"===ut.type},{value:Nt,label:H().createElement(z.Icon,{prefix:"printdesignericon",type:"waicebiankuang",itemTitle:(0,W.getLangMsg)("printd.grid.key0059"),title:Yv}),title:(0,W.getLangMsg)("printd.grid.key0059"),disabled:"Line"===ut.type},{value:Gt,label:H().createElement(z.Icon,{prefix:"printdesignericon",type:"cuwaibiankuang",itemTitle:(0,W.getLangMsg)("printd.grid.key0060"),title:Yv}),title:(0,W.getLangMsg)("printd.grid.key0060"),disabled:"Line"===ut.type},{value:Tt,label:H().createElement(z.Icon,{prefix:"printdesignericon",type:"neibiankuang",itemTitle:(0,W.getLangMsg)("printd.grid.key0061"),title:Yv}),title:(0,W.getLangMsg)("printd.grid.key0061"),disabled:"Line"===ut.type},{value:Zt,label:H().createElement(z.Icon,{prefix:"printdesignericon",type:"suoyoubiankuang",itemTitle:(0,W.getLangMsg)("printd.grid.key0062"),title:Yv}),title:(0,W.getLangMsg)("printd.grid.key0062"),disabled:"Line"===ut.type},{value:Qt,label:H().createElement(z.Icon,{prefix:"printdesignericon",type:"wubiankuang",itemTitle:(0,W.getLangMsg)("printd.grid.key0063"),title:Yv}),title:(0,W.getLangMsg)("printd.grid.key0063"),disabled:"Line"===ut.type}],ar=(m={},(0,L.c)((0,L.c)((0,L.c)((0,L.c)((0,L.c)((0,L.c)((0,L.c)((0,L.c)((0,L.c)((0,L.c)(m,Ge,(function(e,t){var n;return H().createElement(z.Select,(0,L.c)((0,L.c)((0,L.c)((0,L.c)({disabled:e,className:Hn()("".concat(ue,"-property-font-name"),Z()(n="".concat(ue,"-editor-")).call(n,Y().kebabCase(Ge)),t,(0,L.c)((0,L.c)({},"".concat(ue,"-property-font-name-enable"),!Jn(Ge)),"".concat(ue,"-property-font-name-disabled"),Jn(Ge))),visible:j&&!e,onVisibleChange:function(e){O(e)},dropdownRender:function(e){var t;if(!On.length)return e;var n=F()(t=e.props.children.props.data).call(t,(function(e){return!Yn()(On).call(On,(function(t){return e.props.value===t.key}))})),r=H().cloneElement(e,{},n);return H().createElement("div",null,r,H().createElement(z.Dropdown,(0,ie.c)({key:"dropdown",onItemClick:function(e){W.console.log("onItemClick"),on(Ge,e),j&&O(!1)}},fn,{popperStyle:{width:100},popperClassName:Hn()(fn.popperClassName,"kds-font-custom"),menu:On}),H().createElement("div",{className:Hn()("kds-hover-panel")},H().createElement("span",{className:sn,style:{marginLeft:0}},(0,W.getLangMsg)("printd.grid.key0064")))))},dropdownStyle:{width:100},style:{width:86,height:28},onChange:function(e){on(Ge,e),j&&O(!1)}},"disabled",Jn(Ge)),"borderType","none"),"value",ut[Ge]||"default"),"options",jn))})),Ze,(function(e,t){var n;return H().createElement(Lv,{bizType:b.bizType,className:Hn()("".concat(ue,"-property-font-size"),t,Z()(n="".concat(ue,"-editor-")).call(n,Y().kebabCase(Ze)),(0,L.c)((0,L.c)({},"".concat(ue,"-property-font-size-enable"),!Jn(Ze)),"".concat(ue,"-property-font-size-disabled"),Jn(Ze))),onChange:function(e){on(Ze,e)},value:+ut[Ze]||12,dropdownStyle:{width:100},disabled:Jn(Ze)||e,options:Un})})),Qe,(function(e,t){var n;return H().createElement("div",{title:(0,W.getLangMsg)("printd.grid.key0065"),className:Hn()(Pn(St&&!Jn(Qe),Qe),t,Z()(n="".concat(ue,"-editor-")).call(n,Y().kebabCase(Qe))),onClick:function(){on(Qe,!Zn(Qe))}},H().createElement(z.Icon,{prefix:"printdesignericon",type:"jiacu"}))})),Pe,(function(e,t){var n;return H().createElement("div",{title:(0,W.getLangMsg)("printd.grid.key0066"),className:Hn()(Pn(St&&!Jn(Pe),Pe),t,Z()(n="".concat(ue,"-editor-")).call(n,Y().kebabCase(Pe))),onClick:function(){on(Pe,!Zn(Pe))}},H().createElement(z.Icon,{prefix:"printdesignericon",type:"xieti"}))})),Je,(function(e,t){var n;return H().createElement("div",{title:(0,W.getLangMsg)("printd.grid.key0067"),className:Hn()(Pn(St&&!Jn(Je),Je),t,Z()(n="".concat(ue,"-editor-")).call(n,Y().kebabCase(Je))),onClick:function(){on(Je,!Zn(Je))}},H().createElement(z.Icon,{prefix:"printdesignericon",type:"xiahuaxian"}))})),je,(function(e,t){var n;return H().createElement("div",{title:(0,W.getLangMsg)("printd.grid.key0068"),className:Hn()(Pn(St&&!Jn(je),je),t,Z()(n="".concat(ue,"-editor-")).call(n,Y().kebabCase(je))),onClick:function(){on(je,!Zn(je))}},H().createElement("img",{src:"data:image/png;base64,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",style:{width:16}}))})),Oe,(function(e,t){var n;return H().createElement("div",{style:{width:40},className:Hn()(Pn(St&&!Jn(Oe)),t,"".concat(ue,"-self-select"),Z()(n="".concat(ue,"-editor-")).call(n,Y().kebabCase(Oe)))},H().createElement(Bv,{handleChange:function(e){on(Oe,e)},setColorPickVisible:ne,setMoreBarVisible:_,enable:St&&!Jn(Oe)&&!e,value:ut[Oe]||"#000000"}))})),Ue,(function(e,t){var n;return H().createElement("div",{style:{width:40},className:Hn()(Pn(St&&!Jn(Ue)),t,"".concat(ue,"-self-select"),Z()(n="".concat(ue,"-editor-")).call(n,Y().kebabCase(Ue)))},H().createElement(Iv,{value:ut[Ue]||"#ffffff",setColorPickVisible:ne,setMoreBarVisible:_,handleChange:function(e){on(Ue,e)},enable:St&&!Jn(Ue)&&!e}))})),Te,(function(e,t){var n,r;return H().createElement(z.Select,(0,ie.c)({},Gn,{disabled:Jn(Te)||e,dropdownClassName:Hn()("kds-select-border","kds-select","lineHeight"),className:Hn()(!Jn(Te)&&"".concat(ue,"-select-enable"),t,Z()(n="".concat(ue,"-editor-")).call(n,Y().kebabCase(Te))),onChange:function(e){W.console.log(e),on(Te,e)},onVisibleChange:function(e){le(e)},onSelect:function(){le(!1),_(!1)},borderType:"none",value:Bn()(r=[1,1.15,1.25,1.5,2]).call(r,Qn(Te,1))?Qn(Te,1):"default",options:[{value:"default",label:H().createElement(z.Icon,{prefix:"printdesignericon",type:"xingjushezhi",itemTitle:"1.0"}),title:(0,W.getLangMsg)("printd.grid.key0114")},{value:1,label:H().createElement(z.Icon,{prefix:"printdesignericon",type:"xingjushezhi",itemTitle:"1.0"}),title:(0,W.getLangMsg)("printd.grid.key0114")},{value:1.15,label:H().createElement(z.Icon,{prefix:"printdesignericon",type:"xingjushezhi",itemTitle:"1.15"}),title:(0,W.getLangMsg)("printd.grid.key0114")},{value:1.25,label:H().createElement(z.Icon,{prefix:"printdesignericon",type:"xingjushezhi",itemTitle:"1.25"}),title:(0,W.getLangMsg)("printd.grid.key0114")},{value:1.5,label:H().createElement(z.Icon,{prefix:"printdesignericon",type:"xingjushezhi",itemTitle:"1.5"}),title:(0,W.getLangMsg)("printd.grid.key0114")},{value:2,label:H().createElement(z.Icon,{prefix:"printdesignericon",type:"xingjushezhi",itemTitle:"2.0"}),title:(0,W.getLangMsg)("printd.grid.key0114")}],dropdownRender:Nn,defaultValue:1}))})),Fe,(function(e,t){var n;return H().createElement(z.Select,(0,ie.c)({},Gn,{disabled:Jn(Fe)||e,className:Hn()(!Jn(Fe)&&"".concat(ue,"-select-enable"),t,Z()(n="".concat(ue,"-editor-")).call(n,Y().kebabCase(Fe))),onChange:function(e){W.console.log(e),on(Fe,e)},borderType:"none",value:Qn(Fe,"left"),options:[{value:"left",label:H().createElement(z.Icon,{prefix:"printdesignericon",type:"duanluo-zuoduiqi",itemTitle:(0,W.getLangMsg)("printd.grid.key0069"),title:Hv}),title:(0,W.getLangMsg)("printd.grid.key0069")},{value:"center",label:H().createElement(z.Icon,{prefix:"printdesignericon",type:"duanluo-juzhong",itemTitle:(0,W.getLangMsg)("printd.grid.key0070"),title:Hv}),title:(0,W.getLangMsg)("printd.grid.key0070")},{value:"right",label:H().createElement(z.Icon,{prefix:"printdesignericon",type:"duanluo-youduiqi",itemTitle:(0,W.getLangMsg)("printd.grid.key0071"),title:Hv}),title:(0,W.getLangMsg)("printd.grid.key0071")},{value:"justify",label:H().createElement(z.Icon,{prefix:"printdesignericon",type:"duanluo-quanbuliangduanduiqi",itemTitle:(0,W.getLangMsg)("printd.grid.key0072"),title:Hv}),title:(0,W.getLangMsg)("printd.grid.key0072"),disabled:"Image"===ut.type}]}))})),(0,L.c)((0,L.c)((0,L.c)(m,ze,(function(e,t){var n;return H().createElement(z.Select,(0,ie.c)({},Gn,{dropdownStyle:{minWidth:120,overflow:"hidden"},className:Hn()(!Jn(ze)&&"".concat(ue,"-select-enable"),t,Z()(n="".concat(ue,"-editor-")).call(n,Y().kebabCase(ze))),visible:G&&!e,onVisibleChange:function(e){yn||bn||Q(e)},dropdownClassName:Hn()("kds-select-border","kds-select"),dropdownRender:function(e){return function(e,t,n){var r,a=H().cloneElement(e,{},(0,kn.c)(N()(r=e.props.children.props.data).call(r,(function(e){return e.props.value,H().cloneElement(e,{},[e.props.children,H().createElement("div",{className:sn},e.props.children.props.itemTitle)])})))),o=function(e,r){pe(e),nr(se,ye===Gt&&e!==dn?Nt:ye,e),xn(!1),t(!1),n(!1)};return H().createElement("div",null,a,H().createElement(z.Tooltip,(0,ie.c)({key:gn},fn,{gap:-6,visible:bn,onVisibleChange:xn,popperClassName:"kds-border-width-dropdown",popperStyle:{width:100,transition:"none"},tip:H().createElement("div",null,H().createElement("div",{className:Hn()(["kds-border-width-dropdown-item",{selected:ve===un}]),key:un,onClick:function(){return o(un)}},H().createElement("span",{className:"kds-border-width-dropdown-item-changgui"})),H().createElement("div",{className:Hn()(["kds-border-width-dropdown-item",{selected:ve===cn}]),key:cn,onClick:function(){return o(cn)}},H().createElement("span",{className:"kds-border-width-dropdown-item-cu"})),H().createElement("div",{className:Hn()(["kds-border-width-dropdown-item",{selected:ve===dn}]),key:dn,onClick:function(){return o(dn)}},H().createElement("span",{className:"kds-border-width-dropdown-item-jiacu"})),H().createElement("div",{className:Hn()(["kds-border-width-dropdown-item",{selected:ve===vn}]),key:vn,onClick:function(){return o(vn)}},H().createElement("span",{className:"kds-border-width-dropdown-item-dotted"},H().createElement("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEwAAAABCAYAAAB0UUiZAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAZiS0dEAP8A/wD/oL2nkwAAAB5JREFUGNNjdHBw+M/AwMBw4MABRgYoQBcb6XxkMQCOoUnBExsl8wAAAD5lWElmAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAATKADAAQAAAABAAAAAQAAAACZ+EYYAAAAAElFTkSuQmCC"}))),H().createElement("div",{className:Hn()(["kds-border-width-dropdown-item",{selected:ve===pn}]),key:pn,onClick:function(){return o(pn)}},H().createElement("span",{className:"kds-border-width-dropdown-item-dashed"},H().createElement("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAE0AAAABCAYAAACbkyOnAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAATaADAAQAAAABAAAAAQAAAAAxfJBbAAAAGklEQVQYGWN0cHD4z4AGDhw4wAgTGpXHDB8Apz4lwZkCeZgAAAAASUVORK5CYII="}))))}),H().createElement("div",{className:Hn()("kds-hover-panel")},H().createElement(z.Icon,{prefix:"printdesignericon",type:"shezhibiankuangcuxi"}),H().createElement("span",{className:sn,style:In},(0,W.getLangMsg)("printd.grid.key0053")),H().createElement(z.Icon,{type:"arrow-right-solid"}))),"1"!==b.bizType&&H().createElement(z.Tooltip,(0,ie.c)({key:hn},fn,{gap:-6,popperStyle:{width:244,height:92,transition:"none"},visible:yn,onVisibleChange:Dn,popperClassName:"kds-color-dropdown",tip:H().createElement(Sv,{showPanel:yn,color:"#ffffff",onClosePanel:function(){t(!1),Dn(!1),n(!1)},onChange:function(e){var t=e.color;fe(t),nr(t,ye,ye===Gt?Gt:ve,"color")},onFocus:function(){!yn&&Dn(!0)},setPoperVisible:Dn})}),H().createElement("div",{className:Hn()("kds-hover-panel")},H().createElement(z.Icon,{prefix:"printdesignericon",type:"xiantiaoyanse"}),H().createElement("span",{className:sn,style:In},(0,W.getLangMsg)("printd.grid.key0054")),H().createElement(z.Icon,{type:"arrow-right-solid"}))))}(e,Q,_)},disabled:Jn(ze)||e,onSelect:function(e){Ee(e),nr(se,e,ye===Gt?dn:ve),Q(!1),_(!1)},borderType:"none",defaultValue:Nt,options:rr}))})),Ne,(function(e,t){var n;return H().createElement(z.Select,(0,ie.c)({},Gn,{disabled:Jn(Ne)||e,onChange:function(e){on(Ne,e)},borderType:"none",className:Hn()(!Jn(Ne)&&"".concat(ue,"-select-enable"),t,Z()(n="".concat(ue,"-editor-")).call(n,Y().kebabCase(Ne))),value:Qn(Ne,"middle"),options:[{value:"top",label:H().createElement(z.Icon,{prefix:"printdesignericon",type:"xinggaoduiqizhiding",itemTitle:(0,W.getLangMsg)("printd.grid.key0073"),title:qv}),title:(0,W.getLangMsg)("printd.grid.key0073")},{value:"middle",label:H().createElement(z.Icon,{prefix:"printdesignericon",type:"xinggaoduiqijuzhong",itemTitle:(0,W.getLangMsg)("printd.grid.key0074"),title:qv}),title:(0,W.getLangMsg)("printd.grid.key0074")},{value:"bottom",label:H().createElement(z.Icon,{prefix:"printdesignericon",type:"xinggaoduiqizhidi",itemTitle:(0,W.getLangMsg)("printd.grid.key0075"),title:qv}),title:(0,W.getLangMsg)("printd.grid.key0075")}]}))})),tp,(function(e,t){var n;return H().createElement(H().Fragment,null,(Vn.length===np.length||er.length>1)&&H().createElement("div",{className:Hn()("".concat(ue,"-operation-bar-split-line"),t)}),H().createElement(z.Select,(0,ie.c)({},Gn,{disabled:Dt.length<2||It||e,className:Hn()(!(Dt.length<2||It)&&"".concat(ue,"-select-enable"),t,Z()(n="".concat(ue,"-editor-")).call(n,Y().kebabCase(tp))),onChange:function(e){W.eventBus.emit("align-shapes",{type:e,ids:Dt})},borderType:"none",value:We,options:[{value:We,label:H().createElement(z.Icon,{prefix:"printdesignericon",type:"zuoduiqi3",itemTitle:(0,W.getLangMsg)("printd.grid.key0076"),title:Xv}),title:(0,W.getLangMsg)("printd.grid.key0076")},{value:qe,label:H().createElement(z.Icon,{prefix:"printdesignericon",type:"zuoyoujuzhong",itemTitle:(0,W.getLangMsg)("printd.grid.key0077"),title:Xv}),title:(0,W.getLangMsg)("printd.grid.key0077")},{value:Ye,label:H().createElement(z.Icon,{prefix:"printdesignericon",type:"shuipingfenbu",itemTitle:(0,W.getLangMsg)("printd.grid.key0078"),title:Xv}),disabled:Dt.length<3,title:(0,W.getLangMsg)("printd.grid.key0078")},{value:Ke,label:H().createElement(z.Icon,{prefix:"printdesignericon",type:"youduiqi3",itemTitle:(0,W.getLangMsg)("printd.grid.key0079"),title:Xv}),title:(0,W.getLangMsg)("printd.grid.key0079")},{value:"top",label:H().createElement(z.Icon,{prefix:"printdesignericon",type:"dingduiqi",itemTitle:(0,W.getLangMsg)("printd.grid.key0080"),title:Xv}),title:(0,W.getLangMsg)("printd.grid.key0080")},{value:He,label:H().createElement(z.Icon,{prefix:"printdesignericon",type:"shangxiajuzhong",itemTitle:(0,W.getLangMsg)("printd.grid.key0081"),title:Xv}),title:(0,W.getLangMsg)("printd.grid.key0081")},{value:Xe,label:H().createElement(z.Icon,{prefix:"printdesignericon",type:"chuizhifenbu",itemTitle:(0,W.getLangMsg)("printd.grid.key0082"),title:Xv}),disabled:Dt.length<3,title:(0,W.getLangMsg)("printd.grid.key0082")},{value:Ve,label:H().createElement(z.Icon,{prefix:"printdesignericon",type:"diduiqi",itemTitle:(0,W.getLangMsg)("printd.grid.key0083"),title:Xv}),title:(0,W.getLangMsg)("printd.grid.key0083")}]})))}))),or=(0,V.useRef)(null),ir=(0,V.useRef)(null),lr=(0,V.useRef)(null),ur=(0,V.useRef)(null),cr=(0,V.useCallback)((function(){var e=np;if(W.console.log("count"),ir.current){var t=ir.current.offsetWidth;if(t<=32)return void(Y().isEqual(e,er)||tr(e));var n,r=0,a=[],o=[],i=zv(np);try{for(i.s();!(n=i.n()).done;){var l,u,c=n.value,d=ir.current.querySelector(Z()(l=".".concat(ue,"-editor-")).call(l,Y().kebabCase(c.name))),s=(null!==(u=null==d?void 0:d.offsetWidth)&&void 0!==u?u:0)+(d?Os()(getComputedStyle(d).marginLeft||0)+Os()(getComputedStyle(d).marginRight||0):c.margin);if(!(t>=s)){t<32&&(a.pop(),t+=o.pop()||0,r--);break}a.push(c),t-=s,o.push(s),r++}}catch(e){i.e(e)}finally{i.f()}Y().isEqual(a,Vn)||(qn(a),tr(Sn()(e).call(e,r)))}}),[np,er,Vn,ue]),dr=(0,V.useRef)(Y().debounce(cr));return(0,V.useEffect)((function(){dr.current(),W.eventBus.emit("contextStrokeEnabled","1"===b.bizType)}),[]),(0,V.useEffect)((function(){dr.current=Y().debounce(cr)}),[np,er,Vn,ue]),(0,V.useEffect)((function(){var e=function(){dr.current()};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[dr.current]),(0,V.useImperativeHandle)(t,(function(){return{formatControlInfoRef:$t,copyControl:Ut,pasteControl:zt,copyAndPasteControl:Wt,canvasRedo:Kt,canvasUndo:Vt}}),[$t,Ut,Wt]),H().createElement("div",{className:ue,ref:or},H().createElement("div",{ref:ur},H().createElement("div",{className:"".concat(ue,"-operation-bar"),ref:lr},H().createElement("div",{title:Z()(y="".concat((0,W.getLangMsg)("printd.grid.key0084"),"\n")).call(y,Tv()?"⌘+Z":"Ctrl+Z"),className:Hn()((0,L.c)((0,L.c)({},"".concat(ue,"-operation-disable"),!De.canUndo()),"".concat(ue,"-operation-btn"),!0)),onClick:Vt},H().createElement(z.Icon,{prefix:"printdesignericon",type:"chexiao"})),H().createElement("div",{title:Z()(E="".concat((0,W.getLangMsg)("printd.grid.key0085"),"\n")).call(E,Tv()?"⌘+Y":"Ctrl+Y"),className:Hn()((0,L.c)((0,L.c)({},"".concat(ue,"-operation-disable"),!De.canRedo()),"".concat(ue,"-operation-btn"),!0)),onClick:Kt},H().createElement(z.Icon,{prefix:"printdesignericon",type:"zhongzuo"})),H().createElement("div",{className:"".concat(ue,"-operation-bar-split-line")}),H().createElement("div",{className:Pn(Bt),onClick:Wt,title:Z()(D="".concat((0,W.getLangMsg)("printd.grid.key0086"),"\n")).call(D,Tv()?"⌘+D":"Ctrl+D")},H().createElement(z.Icon,{prefix:"printdesignericon",type:"fuzhi"})),H().createElement("div",{title:(0,W.getLangMsg)("printd.grid.key0087"),className:Pn(Lt,"null",Yt&&St),onClick:function(){en()},onDoubleClick:function(){en(!1)}},H().createElement(z.Icon,{prefix:"printdesignericon",type:"geshishua"})),H().createElement("div",{title:"".concat((0,W.getLangMsg)("printd.grid.key0088"),"\nDelete"),className:Pn(Mt),onClick:ln},H().createElement(z.Icon,{prefix:"printdesignericon",type:"shanchu"})),H().createElement("div",{className:"".concat(ue,"-operation-bar-split-line")})),H().createElement("div",{className:"".concat(ue,"-property-operation-bar"),ref:ir},N()(A=F()(np).call(np,(function(e){return Yn()(Vn).call(Vn,(function(t){return t.name===e.name}))}))).call(A,(function(e){return ar[e.name](!1)})),er.length>0&&H().createElement(z.Tooltip,{popperClassName:"".concat(ue,"-operation-more-popper"),arrow:!1,arrowSize:0,placement:"bottomRight",visible:X,onVisibleChange:function(e){!oe&&!G&&(!te||e)&&_(e)},tip:H().createElement("div",{className:"".concat(ue,"-more-property-bar")},N()(er).call(er,(function(e){var t=e.name;return ar[t](!1)}))),trigger:"click",popperStyle:{}},H().createElement("div",{className:Hn()("".concat(ue,"-operation-btn"),"".concat(ue,"-operation-more-btn"))},H().createElement(z.Icon,{type:"more"}))),N()(k=F()(np).call(np,(function(e){return!Yn()(Vn).call(Vn,(function(t){return t.name===e.name}))}))).call(k,(function(e){return ar[e.name](!0,"shadow-calc-dom")})))),H().createElement("div",null,H().createElement("div",{className:"".concat(ue,"-canvas-operation-bar")},H().createElement("div",{className:Pn(!0,"",Re),onClick:function(){_e(!Re),Se&&(Se.current=!Re),W.eventBus.emit("contextStrokeEnabled",!Re)},title:(0,W.getLangMsg)("printd.grid.key0089")},H().createElement(z.Icon,{prefix:"printdesignericon",type:"kaiqifuzhuxian",onClick:function(){}})),H().createElement(z.Select,{style:{width:64},dropdownStyle:{width:100},title:(0,W.getLangMsg)("printd.grid.key0090"),borderType:"none",value:tt,options:Ft,onChange:Rt}))))}))),ap=rp;function op(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function ip(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?U()(n=op(Object(a),!0)).call(n,(function(t){(0,L.c)(e,t,a[t])})):b()?S()(e,b()(a)):U()(r=op(Object(a))).call(r,(function(t){B()(e,t,k()(a,t))}))}return e}var lp=ot,up=[3,3];var cp=function(e){e.x,e.y;var t=e.id,n=e.width,r=e.height,a=e.border,o=void 0===a?{}:a,i=e.borderType,l=e.isSelected,u=e.contextStrokeEnabled,c=e.scale,d=fg(o,i),s=(0,M.c)(d,5),f=s[0],g=s[1],h=s[2],v=s[3],p=s[4],m=g||"#B2B2B2",C=v||1,y=h||"solid",E=!!u&&!(Bn()(f).call(f,Nt)||Bn()(f).call(f,Zt)),D=!(Bn()(f).call(f,Nt)||Bn()(f).call(f,Zt)),A=(0,V.useRef)(null),k=o.width||{},w=k.top,b=void 0===w?0:w,x=k.left,S=void 0===x?0:x,I=k.right,B=void 0===I?0:I,L=k.bottom,R=void 0===L?0:L,F=o.color||{},T=F.top,N=F.left,G=F.right,Z=F.bottom,Q=o.style||{},P=Q.top,J=Q.left,j=Q.right,O=Q.bottom,z=Ws(n,c),W=Ws(r,c),K=[0,0,z,0],q=[0,0,0,W],Y=[z,0,z,W],X=[z,W,0,W],_=(0,V.useRef)(null),$=(0,V.useRef)(null),ee=(0,V.useRef)(null),te=(0,V.useRef)(null);(0,V.useImperativeHandle)(A,(function(){return{mouseEnter:function(e){var t;U()(t=[_,$,ee,te]).call(t,(function(t){var n,r;null===(n=t.current)||void 0===n||n.stroke(e),null===(r=t.current)||void 0===r||r.draw()}))},mouseLeave:function(){var e,t,n,r;null===(e=ee.current)||void 0===e||e.stroke(T||lp),null===(t=_.current)||void 0===t||t.stroke(N||lp),null===(n=$.current)||void 0===n||n.stroke(G||lp),null===(r=te.current)||void 0===r||r.stroke(Z||lp)}}}),[T,N,G,Z]);var ne={borderTypes:f,stroke:m,strokeWidth:C,strokeStyle:y,strokeEnabled:E,dashEnabled:D,defaultDash:up,controlStrokeRef:A,innerConfig:p},re={listening:!1,draggable:!1},ae=(0,V.useMemo)((function(){switch(h){case"dashed":return[3,1];case"dotted":return[2,2];default:return up}}),[h]),oe=H().createElement(nv.Group,re,0!==b&&H().createElement(nv.Line,(0,ie.c)({key:"".concat(t,"_top_stroke"),ref:ee,name:"".concat(t,"_top_border_line")},re,{stroke:T||lp,strokeWidth:2*(b||1),dashEnabled:"solid"!==P,dash:ae,points:K})),0!==S&&H().createElement(nv.Line,(0,ie.c)({key:"".concat(t,"_left_stroke"),ref:_,name:"".concat(t,"_left_border_line")},re,{stroke:N||lp,strokeWidth:2*(S||1),dashEnabled:"solid"!==J,dash:ae,points:q})),0!==B&&H().createElement(nv.Line,(0,ie.c)({key:"".concat(t,"_right_stroke"),ref:$,name:"".concat(t,"_right_border_line")},re,{stroke:G||lp,strokeWidth:2*(B||1),dashEnabled:"solid"!==j,dash:ae,points:Y})),0!==R&&H().createElement(nv.Line,(0,ie.c)({key:"".concat(t,"_bottom_stroke"),ref:te,name:"".concat(t,"_bottom_border_line")},re,{stroke:Z||lp,strokeWidth:2*(R||1),dashEnabled:"solid"!==O,dash:ae,points:X}))),le=0!==b||0!==S||0!==B||0!==R;return ip(ip({},ne),{},{customedStrokeElement:!l&&le&&oe,dashEnabled:ne.dashEnabled&&!(0!==b&&0!==S&&0!==B&&0!==R)&&!l})},dp=["src","getImageSize","xPos","yPos","scale","pixelRatio","verAlignment","horAlignment"],sp=(0,V.forwardRef)((function(e,t){var n=e.src,r=e.getImageSize,a=(e.xPos,e.yPos,e.scale),o=(e.pixelRatio,e.verAlignment),i=e.horAlignment,l=(0,Wn.c)(e,dp),u=(0,V.useState)(null),c=(0,M.c)(u,2),d=c[0],s=c[1],f=(0,V.useState)({width:0,height:0,left:0,top:0}),g=(0,M.c)(f,2),h=g[0],v=g[1],p=h.width,m=h.height,C=h.left,y=h.top,E=(0,V.useRef)(null),D=t||E;return(0,V.useEffect)((function(){var e,t=function(){s(e)};return n&&((e=new Image).addEventListener("load",t),e.src=n),function(){var n;null===(n=e)||void 0===n||n.removeEventListener("load",t)}}),[n]),(0,V.useEffect)((function(){if(null!==d){var e=d.width,t=d.height,n=Ks(e,1),a=Ks(t,1);v(r(n,a,o,i))}}),[v,r,d,o,i]),d?H().createElement(nv.Image,(0,ie.c)({ref:D,image:d,width:Ws(p,a),height:Ws(m,a),x:C?Ws(C,a):void 0,y:y?Ws(y,a):void 0},l,{name:Me})):null})),fp=sp,gp=2.54;function hp(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function vp(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?U()(n=hp(Object(a),!0)).call(n,(function(t){(0,L.c)(e,t,a[t])})):b()?S()(e,b()(a)):U()(r=hp(Object(a))).call(r,(function(t){B()(e,t,k()(a,t))}))}return e}var pp,mp=function(e,t,n){if(Pf(e)||jf(e)){var r=e.subGridId,a=e.tableTailId;null!=r&&r.length&&t.push.apply(t,(0,kn.c)(n.findControl(r))),a&&t.push(n.findControl(a))}if(Jf(e)||Yf(e)){var o=e.parentGridId;o&&t.push(n.findControl(o))}};function Cp(e,t){return function(n,r){var a,o,i,l=n.x,u=n.y,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],d=[],s=e.id,f=e.parentId,g=e.height,h=e.width,v=e.x,p=e.y,m=t.dataContext,C=t.selectionContext,y=t.getRedundancyXY,E=t.pageHeight,D=t.stageRef,A=t.rootId,k=t.scale,w=t.setMessage,b=t.forceUpdateTransformer,x=null===(a=D.current)||void 0===a?void 0:a.getPointerPosition(),S=null===(o=D.current)||void 0===o?void 0:o.findOne("#".concat(s)),I=(0,kn.c)(new(fa())(Z()(i=[]).call(i,(0,kn.c)(C.getSelection()),[s]))),B=[];mp(e,B,m);var R=m.findControlByCondition((function(e){return Bn()(I).call(I,e.id)})),F=(0,kn.c)(R);U()(R).call(R,(function(e){mp(e,F,m)}));var T=x.x,N=x.y,G=y(),Q=G.x,J=G.y,j=["Text","Image","QRCode","Barcode","LayoutGrid","Line"];T=Ks(T-Q,k),N=Ks(N-J,k),l=Ks(l,k),u=Ks(u,k);var O,z=If(vp(vp({},e),{},{x:l,y:u}),m),K=Sf(vp(vp({},e),{},{x:l,y:u}),m),V=c.length?P()(c).call(c,(function(e,t){var n=(0,M.c)(t,2),r=n[0],a=n[1],o=void 0===a?{}:a,i=m.findControl(r);return Math.min(If(vp(vp({},i),o),m),e)}),z):z,H=c.length?P()(c).call(c,(function(e,t){var n=(0,M.c)(t,2),r=n[0],a=n[1],o=void 0===a?{}:a,i=m.findControl(r);return Math.max(Sf(vp(vp({},i),o),m),e)}),K):K,q=m.findControlByCondition((function(e){return"Header"===e.type})),Y=m.findControlByCondition((function(e){return"Footer"===e.type})),X=m.findControlByCondition((function(e){return"TableTail"===e.type})),_=q[0]||{},$=_.width,ee=void 0===$?0:$,te=_.height,ne=void 0===te?0:te,re=Y[0]||{},ae=re.width,oe=void 0===ae?0:ae,ie=re.height,le=void 0===ie?0:ie,ue=re.y,ce=void 0===ue?0:ue,de=function(){return I.length>1?(U()(F).call(F,(function(e){var t,n=null===(t=D.current)||void 0===t?void 0:t.findOne("#".concat(e.id));null==n||n.position({x:Ws(e.x,k),y:Ws(e.y,k)})})),b(),w((0,W.getLangMsg)("printd.grid.key0023")),!0):Pf(e)||_f(e)||Jf(e)||Yf(e)||jf(e)?(null==S||S.position({x:Ws(v,k),y:Ws(p,k)}),U()(B).call(B,(function(e){var t,n=null===(t=D.current)||void 0===t?void 0:t.findOne("#".concat(e.id));null==n||n.position({x:Ws(e.x,k),y:Ws(e.y,k)})})),w((0,W.getLangMsg)("printd.grid.key0024")),!0):"RichText"===e.type?(null==S||S.position({x:Ws(v,k),y:Ws(p,k)}),w((0,W.getLangMsg)("printd.grid.key0025")),!0):void 0};if(f===A)if(q.length&&T<ee&&N<ne){var se=q[0].id;if(de())return;u+g>ne?g>=ne?d.push([s,{y:0,x:l,height:ne,width:ne/g*h,parentId:se}]):d.push([s,{y:ne-g,x:l,parentId:se}]):d.push([s,{x:l,y:u,parentId:se}])}else if(Y.length&&T<oe&&N>E-le){var fe=Y[0].id;if(de())return;N-ce+g>le&&g>=le?d.push([s,{y:0,x:l,height:le,width:le/g*h,parentId:fe}]):d.push([s,{y:u-ce,x:l,parentId:fe}])}else{if(ne>0&&V<ne)return U()(F).call(F,(function(e){var t,n=null===(t=D.current)||void 0===t?void 0:t.findOne("#".concat(e.id));null==n||n.position({x:Ws(e.x,k),y:Ws(e.y,k)})})),void b();if(ce>0&&H>ce)return U()(F).call(F,(function(e){var t,n=null===(t=D.current)||void 0===t?void 0:t.findOne("#".concat(e.id));null==n||n.position({x:Ws(e.x,k),y:Ws(e.y,k)})})),void b();if(X.length&&Bn()(j).call(j,e.type)){var ge=Yn()(X).call(X,(function(e){var t=e.height,n=e.parentGridId,r=m.findControl(n),a=r.y,o=r.height,i=r.x,l=r.width;return o+a<N&&N<o+a+t&&i<T&&T<l+i}));if(ge){var he=P()(I).call(I,(function(e,t){var n=m.findControl(t).type;return Bn()(j).call(j,n)||e.add(n),e}),new(fa()));if(he.size){U()(F).call(F,(function(e){var t,n=null===(t=D.current)||void 0===t?void 0:t.findOne("#".concat(e.id));null==n||n.position({x:Ws(e.x,k),y:Ws(e.y,k)})})),b();var ve=(0,kn.c)(he),pe=(pp||(pp=(0,L.c)((0,L.c)((0,L.c)({},vt,(0,W.getLangMsg)("printd.grid.key0031")),hn.richText,(0,W.getLangMsg)("printd.components.key0062")),pt,(0,W.getLangMsg)("printd.components.key0063"))),pp),me=P()(ve).call(ve,(function(e,t){return pe[t]&&e.push(pp[t]),e}),[]);return w((0,W.getLangMsg)({key:"printd.grid.key0124",variables:{detail:me.length?"：".concat(me.join(" ")):""}})),!0}O=!0;var Ce=ge.parentGridId,ye=ge.id,Ee=m.findControl(Ce),De=Ee.y,Ae=Ee.x,ke=Ee.height,we=D.current.dragStartMousePos,be=Ks(we.x-Q,k),xe=Ks(we.y-J,k),Se=Ks(x.x-Q,k),Ie=Ks(x.y-J,k);1===I.length?d.push([s,{x:l-Ae,y:u-ke-De,parentId:ye}]):U()(I).call(I,(function(e){var t=m.findControl(e),n=t.x,r=t.y,a=(t.type,be-n),o=xe-r,i=Se-a<0?0:Se-a,l=(Ie-o<0?0:Ie-o)-ke-De;d.push([e,{x:i-Ae,y:l<0?0:l,parentId:ye}])}))}else d.push([s,{x:l,y:u}])}else d.push([s,{x:l,y:u}])}else d.push([s,{x:l,y:u}]);if(O||(d.push.apply(d,(0,kn.c)(c)),O=!1),1===d.length){var Be=(0,M.c)(d[0],2),Me=Be[0],Le=Be[1];m.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[Me,Le]]))}else m.batchUpdateControlPropertyValues((0,W.createUpdateAction)(d))}}var yp=function(e,t,n){return Math.max(Ws(e,t,n),.1)},Ep=function(){return(0,V.useCallback)((function(e,t,n){return 0!==e.evt.button||(t!==ft?(n(e),!0):void 0)}),[])},Dp=n(48560),Ap=n.n(Dp),kp=function(e,t){return!(!Ap()(e,t)&&!Y().isEqual(e,t))},wp=function(e,t){var n=t.x,r=t.y,a=t.width,o=t.height;return e.x<n||e.y<r||qs(e.x+e.width,1)>qs(n+a,1)||qs(e.y+e.height,qs)>qs(r+o,1)},bp=(0,V.memo)((0,V.forwardRef)((function(e,t){var n=e.stageRef,r=e.rootControlRef,a=e.selectedId,o=e.parentId,i=e.isCell,l=void 0!==i&&i,u=e.isSelected,c=void 0!==u&&u,d=e.isLastSelected,s=void 0!==d&&d,f=e.trRef,g=e.rotateEnabled,h=void 0!==g&&g,v=e.resizeEnabled,p=void 0===v||v,m=e.id,C=e.dataContext,y=e.enabledAnchors,E=void 0===y?["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"]:y,D=e.boundBoxFunc,A=e.controlGroupRef,k=e.isGlobal,w=void 0!==k&&k,b=e.refLineRef,x=void 0===b?{}:b,S=e.padding,I=(0,V.useRef)(null),B=f||I,R=D||function(e,t){var o,i,l=ov(n.current.findOne("#".concat(null===(o=C.findControl(a))||void 0===o?void 0:o.parentId))||r.current),u=l.x,c=l.y,d=l.width,s=l.height,f=l.bottom,g=Xs(e),h=Xs(t),v=(x.current||{}).searchRefLines,p=B.current.getActiveAnchor(),y=v&&v(a,!0,(0,ie.c)({},h,{activeAnchor:p}));(W.console.log("refPosition out",y),y&&!Y().isEmpty(y))&&(W.console.log("refPosition",y),W.console.log("refPosition",g,h),U()(i=gh()(y)).call(i,(function(e){var t=(0,M.c)(e,2),n=t[0],r=t[1];Y().isUndefined(r)||(h[n]=r)})));if(wp(g,l))return W.console.log("isShapeOverflow(oldBox, rootRect)",g,h,l,wp),C&&Qf(C.findControl(m))?g.x>u+d||g.x<u||g.y<c||g.y>c+s?h:(0,ie.c)({},g,{width:g.width>d?qs(u+d-g.x,1):g.width,height:g.height>s?qs(c+s-g.y,1):g.height}):h;if(wp(h,l))return h.x!==g.x||h.y!==g.y?(0,ie.c)({},g,{x:h.x<l.x?l.x:g.x,y:h.y<l.y?l.y:g.y,width:h.x<l.x?qs(h.width+(h.x-l.x),1):g.width,height:h.y<l.y?qs(h.height+(h.y-l.y),1):g.height}):(0,ie.c)({},g,{width:qs(h.x+h.width,1)>qs(l.x+l.width,1)?qs(l.x+l.width-h.x,1):g.width,height:qs(h.y+h.height,1)>qs(l.y+l.height,1)?qs(l.y+l.height-h.y,1):g.height});var E=C&&C.findControl(a);if(E&&ch(E)){if(h.height>s)return g}else if(h.y+h.height>f)return g;return 0===h.height?g:h},F=(0,V.useRef)(!1),T=(0,V.useCallback)((function(){if(c){var e,t,r,o,i,l=null===(e=n.current)||void 0===e?void 0:e.findOne((function(e){var t,n=e.name().split(" ");return ua()(t=[a.toString(),be]).call(t,(function(e){return Bn()(n).call(n,e)}))}));if(l){if(null===(t=B.current)||void 0===t||t.nodes([l]),null!=A&&A.current)null===(r=B.current)||void 0===r||r.zIndex(Math.max((null===(o=A.current)||void 0===o?void 0:o.children.length)-2,0))}else null===(i=B.current)||void 0===i||i.detach()}}),[c,a,o]);return H().useEffect((function(){w||T()}),[c,a,o,w]),(0,V.useEffect)((function(){var e=function(e){var t,n;(W.console.log("e.ctrlKe shapeRef.current?.stopDrag()"),null!==(t=B.current)&&void 0!==t&&t.isTransforming())&&(null===(n=B.current)||void 0===n||n.stopTransform())};return w&&document.addEventListener("keydown",e),function(){w&&document.removeEventListener("keydown",e)}}),[w]),w&&ue()((function(){T()})),(0,V.useImperativeHandle)(t,(function(){return{showDash:function(){var e,t;!F.current&&c&&(null===(e=B.current)||void 0===e||e.borderDash([2,2]),null===(t=B.current)||void 0===t||t.forceUpdate(),F.current=!0)},hideDash:function(){var e,t;F.current&&c&&(null===(e=B.current)||void 0===e||e.borderDash([]),null===(t=B.current)||void 0===t||t.forceUpdate(),F.current=!1)},mouseEnter:function(e){var t,n,r;null===(t=B.current)||void 0===t||t.borderStroke(e),null===(n=B.current)||void 0===n||n.visible(!0),null===(r=B.current)||void 0===r||r.forceUpdate()},mouseLeave:function(){var e,t,n;null===(e=B.current)||void 0===e||e.borderStroke(lt),null===(t=B.current)||void 0===t||t.visible(!1),null===(n=B.current)||void 0===n||n.forceUpdate()}}}),[c,a]),s&&W.console.log("isLastSelected",B),c?H().createElement(nv.Transformer,(0,L.c)({ref:B,id:"transformer_".concat(a),resizeEnabled:p&&s&&!l,rotateEnabled:h,anchorStroke:lt,keepRatio:!1,ignoreStroke:!0,padding:l?-1:0,anchorSize:7,enabledAnchors:E,borderStroke:lt,borderStrokeWidth:l?2:1,boundBoxFunc:R},"padding",S)):null})),(function(e,t){return!e.isGlobal&&!t.isGlobal&&Ap()(t,e)})),xp=bp,Sp=["x","y","width","height","backColor","horAlignment","verAlignment","lineWrapRule","foreColor","padding","divideModel","divideCharNums","fontName","fontSize","children","wrap","bold","underLine","strike","italic","textFormat","textOverFlow","type","alpha","globalCompositeOperation","id","border","borderType","isCell","isTemplate","hasChildItems","childItems","isLastSelected","handleMouseDown","isSelected","parentId","dsType"];function Ip(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bp(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?U()(n=Ip(Object(a),!0)).call(n,(function(t){(0,L.c)(e,t,a[t])})):b()?S()(e,b()(a)):U()(r=Ip(Object(a))).call(r,(function(t){B()(e,t,k()(a,t))}))}return e}var Mp="bindText";function Lp(e,t,n){return e/t*n}function Rp(e,t,n){var r=e/t;return Math.max(r,n)}var Fp=function(e){var t=e.width,n=e.height,r=e.text,a=e.divideNums,o=Js()(e),i=(e.verticalAlign,e.align),l=e.fontFamily,u=e.fontStyle,c=e.textDecoration,d=e.fontSize,s=e.divideLineEnable,f=e.divideLineColor,g=e.divideLineWidth,h=e.divideLineStyle,v=function(e,t,n){var r,a,o,i=Js()(r=new Array(n)).call(r,""),l=[],u=Qn()(e).length;if(u>n)if("left"===t)l=Z()(o=Sn()(e).call(e,0,n-1).split("")).call(o,"...");else if("right"===t)(l=Sn()(e).call(e,1-n).split("")).unshift("...");else if(1===n)l=["..."];else if(2===n)l=["...","..."];else{var c,d,s=Math.floor((u-n)/2+1);l=1===s?Z()(c=[]).call(c,(0,kn.c)(Sn()(e).call(e,0,n-1)),["..."]):Z()(d=["..."]).call(d,(0,kn.c)(Sn()(e).call(e,s,s+n-2)),["..."])}else if(u<n)if("left"===t)l=e.split("");else if("right"===t){var f;l=Z()(f=Sn()(i).call(i,0,-u)).apply(f,(0,kn.c)(e))}else{var g,h,v=Math.floor((n-u)/2);l=(0,kn.c)(i),da()(g=l).apply(g,Z()(h=[v,u]).call(h,(0,kn.c)(e)))}else l=e.split("");return da()(i).apply(i,Z()(a=[0,l.length]).call(a,(0,kn.c)(l))),i}(r,i,a),p=(0,V.useCallback)((function(e){return s&&e!==a&&0!==e}),[a,s]),m=(0,V.useMemo)((function(){var e="solid"!==h,t=up;switch(h){case"dashed":t=[3,1];break;case"dotted":t=[2,2]}return[t,e]}),[h]),C=(0,M.c)(m,2),y=C[0],E=C[1];return H().createElement(H().Fragment,null,N()(v).call(v,(function(e,r){var i,s,h,v;return H().createElement(H().Fragment,{key:Z()(i="divide_".concat(e,"_")).call(i,r)},H().createElement(nv.Text,{width:Rp(t,a,d),height:n,key:Z()(s="text_".concat(e,"_")).call(s,r),x:Lp(t,a,r),y:0,text:e,fill:o,verticalAlign:"middle",align:"center",name:Z()(h="".concat(xe," ")).call(h,Ie),fontFamily:l,fontStyle:u,textDecoration:c,fontSize:d,wrap:"none",hitStrokeWidth:0,letterSpacing:0}),p(r)&&H().createElement(nv.Line,{key:Z()(v="line_".concat(e,"_")).call(v,r),x:Lp(t,a,r),y:0,stroke:f,dash:y,dashEnabled:E,strokeWidth:g,points:[0,n,0,0]}))})))},Tp=(0,V.memo)((0,V.forwardRef)((function(e,t){var n,r,a,o,i,l,u,c,d,s,f=(0,V.useContext)(yn),g=f.selectionContext,h=f.contextStrokeEnabled,v=(g.getSelection(),(0,V.useContext)(Dn)),p=f.scale,m=void 0===p?1:p,y=f.pixelRatio,E=(f.getRedundancyXY,f.getInputSize),D=f.getTextSize,A=f.onValid,k=(f.globalTrRef,f.dataContext),w=v.gridState,b=(v.gridX,v.gridY,v.gridBorderType),x=v.isEditorGridState,S=void 0===x||x,I=v.removeGridSelection,B=Ep(),R=((0,W.usePrevious)(w),(0,V.useRef)(null)),T=(0,V.useRef)(null),N=(0,V.useRef)(null),G=e[Mp],Q=e.viewText||e[Mp]||"",J=e[Mp],j=e.bindField,O=e.dataSource,U=e.x,z=void 0===U?0:U,K=e.y,q=void 0===K?0:K,X=e.width,_=e.height,$=e.backColor,ee=e.horAlignment,te=void 0===ee?"left":ee,ne=e.verAlignment,re=void 0===ne?"middle":ne,ae=e.lineWrapRule,oe=void 0===ae?1:ae,le=e.foreColor,ue=void 0===le?"#333":le,ce=e.padding,se=void 0===ce?Rt:ce,fe=e.divideModel,ge=e.divideCharNums,he=e.fontName,ve=void 0===he?"Arial":he,pe=e.fontSize,me=void 0===pe?12:pe,Ce=e.children,ye=e.wrap,Ee=void 0===ye?"none":ye,De=e.bold,Ae=void 0!==De&&De,ke=e.underLine,Me=void 0!==ke&&ke,Le=e.strike,Re=void 0!==Le&&Le,Fe=e.italic,Te=void 0!==Fe&&Fe,Ne=e.textFormat,Ge=e.textOverFlow,Ze=e.type,Qe=e.alpha,Pe=void 0===Qe?0:Qe,Je=e.globalCompositeOperation,je=void 0===Je?"multiply":Je,Oe=e.id,Ue=e.border,ze=void 0===Ue?{}:Ue,We=e.borderType,Ke=e.isCell,Ve=e.isTemplate,He=e.hasChildItems,qe=e.childItems,Ye=e.isLastSelected,Xe=e.handleMouseDown,_e=e.isSelected,$e=e.parentId,et=e.dsType,tt=((0,Wn.c)(e,Sp),e.lineSpace||1),nt=F()(n=de()(se||Rt)).call(n,Boolean),rt=P()(r=C()(se)).call(r,(function(e,t){return e[t]=se[t]*m,e}),{}),at=rt.top,ot=rt.left,it=rt.right,lt=rt.bottom,ut=(0,V.useState)((me||12)*m),ct=(0,M.c)(ut,2),dt=ct[0],st=ct[1],gt="normal";Re&&Me?gt="underline line-through":Re?gt="line-through":Me&&(gt="underline");var ht=F()(a=[Te&&"italic",Ae&&"bold"]).call(a,Boolean).join(" "),vt={fontSize:dt,fontFamily:Yt(ve),fontWeight:Ae?"700":"normal",fontStyle:Te?"italic":"textDecoration",textDecoration:gt,backgroundColor:$,color:ue,paddingTop:at,paddingLeft:ot,paddingRight:it,paddingBottom:lt,align:te,verAlignment:re,lineHeight:tt,letterSpacing:0},pt=(0,V.useRef)(null),mt=!(Ke&&null!=Ce&&Ce.length),Ct=!((null==Ce||!Ce.length)&&!mt||Ve),yt=Z()(o=Z()(i=Z()(l="".concat(Ve?"template_".concat(Oe,"}"):Oe," ")).call(l,be," ")).call(i,xe," ")).call(o,Se),Et=Z()(u=Z()(c=Z()(d="".concat(Ke?Be:""," ")).call(d,we," ")).call(c,be," ")).call(u,xe),Dt=cp({x:z,y:q,id:Oe,width:X,height:_,border:ze,scale:m,contextStrokeEnabled:h,borderType:We,isSelected:_e&&!Ve}),At=Dt.stroke,kt=Dt.strokeWidth,wt=Dt.strokeEnabled,bt=Dt.strokeStyle,xt=Dt.dashEnabled,St=Dt.defaultDash,It=Dt.customedStrokeElement,Bt=Dt.controlStrokeRef,Mt=Dt.borderTypes,Lt=Dt.innerConfig,Ft=function(e,t){var n=e.dataSource,r=e.value,a=e.isFormulaMode,o=e.id,i=e.onValid,l=e.bindField,u=e.dataContext,c=(0,V.useState)(!1),d=(0,M.c)(c,2),s=d[0],f=d[1],g=(0,V.useRef)(!1),h=(0,V.useCallback)((function(e){var t=rr(r),i=t.isBindField,c=t.bindField;if(!i||a)f(!1);else{var d=u.findControl(o);if(!d)return void f(!1);var s=nr(c,e);if("$DsKey=[System]"===(null==d?void 0:d.dataSource)&&(s=!0),s)f(!1);else{var g,h=$n(er(n,l),e);if(!h&&-1!==(null==l||null===(g=bn()(l))||void 0===g?void 0:g.call(l,"."))){var v=d.bindField.match(/w?\w*$/)[0];h=$n(er(d.dataSource,v),e)}f(!h)}}}),[n,r,a,l]);return(0,V.useEffect)((function(){var e,n;return W.eventBus.on(t,h),W.eventBus.on(Z()(e="".concat(t,"_")).call(e,o),f),W.eventBus.on(Z()(n="".concat(t,"_")).call(n,o,"_init"),h),g.current=!0,function(){var e,n;W.eventBus.off(t,h),W.eventBus.off(Z()(e="".concat(t,"_")).call(e,o),f),W.eventBus.off(Z()(n="".concat(t,"_")).call(n,o,"_init"),h)}}),[h,o,t]),(0,V.useEffect)((function(){var e;g.current&&(null==i||i(Z()(e="".concat(t,"_")).call(e,o,"_init")))}),[g.current]),[s,f]}({onValid:A,dataSource:O,bindField:j,value:J,isFormulaMode:"Formula"===et,id:Oe,dataContext:f.dataContext},ls),Nt=(0,M.c)(Ft,1)[0],Gt=function(e){var t=e.height,n=e.scale,r=e.offsetLeft,a=void 0===r?3:r,o=e.scaledFontSize,i=(0,V.useCallback)((function(){return{width:o/gp,height:o/gp}}),[o]),l=(0,V.useMemo)((function(){return(Ws(t,n)-1.5*o)/2}),[t,n,o]);return[H().createElement(fp,{getImageSize:i,src:"data:image/png;base64,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",scale:n,x:a,y:l}),a,o/gp]}({height:_,scale:m,offsetLeft:3,scaledFontSize:dt}),Qt=(0,M.c)(Gt,3),Pt=Qt[0],Jt=Qt[1],jt=Qt[2],Ot={stageRef:f.stageRef,rootControlRef:f.rootControlRef,selectedId:Oe,ref:pt,isSelected:_e&&!Ye,isCell:Ke,resizeEnabled:!Ke},Ut=!Ve&&H().createElement(xp,Ot);Cv({shapeRef:R,isNotNeed:Ke});nt.length>0&&Math.min.apply(Math,(0,kn.c)(nt));var zt=yp(X,m),Wt=yp(_,m),Kt=Ws(z,m),Vt=Ws(q,m),Ht=fe&&ge>0,qt=Bn()(Mt).call(Mt,Tt)||Bn()(Mt).call(Mt,Zt);fv({isSelected:_e,refs:Ct?[]:[R],pixelRatio:y,scale:m,currentProp:{x:z,y:q,width:X,height:_,fill:$,align:te,textColor:ue,padding:se,divideModel:fe,divideCharNums:ge,fontFamily:ve,fontSize:me,wrap:Ee,bold:Ae,underLine:Me,strike:Re,italic:Te,textFormat:Ne,textOverFlow:Ge,type:Ze,alpha:Pe,globalCompositeOperation:je,id:Oe,border:ze,isCell:Ke,isTemplate:Ve,hasChildItems:He,childItems:qe}});var Xt=mv({strokeEnabled:wt,shapeRef:T,isSelected:Ye,shapeRefStroke:At,controlStrokeRef:Bt}),_t=Xt.onMouseOut,$t=Xt.onMouseOver,en=Cp(e,f),tn=yv({id:Oe,refLineRef:f.refLineRef}),nn=(0,V.useMemo)((function(){if(!Lt)return[At,kt,bt];var e=Lt.color,t=Lt.width,n=Lt.style;return[e||At,t||kt,n||bt]}),[Lt,At,kt,bt]),rn=(0,M.c)(nn,3),an=rn[0],on=rn[1],ln=rn[2],un=(0,V.useCallback)((function(e){var t=e.x,n=e.y,r=(e.scaleX,e.scaleY,e.width),a=e.height;f.dataContext.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[Oe,{x:Hs(Ks(t,m),1),y:Hs(Ks(n,m),1),width:Hs(Ks(r,m),1),height:Hs(Ks(a,m),1)}]]))}),[Oe,m]),cn=lv({id:Oe,shapeRef:R,refLineRef:f.refLineRef,context:f,onDragEnd:en,onDragMove:tn,parentId:e.parentId,scale:m}),dn=cn.onDragStart,sn=cn.onDragMove,fn=cn.onDragEnd,hn=cn.dragBoundFunc,vn=sv({id:Oe,shapeRef:T,refLineRef:f.refLineRef,onTransformEnd:un,context:f}),pn=vn.onTransform,mn=vn.onTransformEnd,Cn=(0,V.useCallback)((function(e){Xe(e)}),[Xe]),En=(0,V.useCallback)((function(e){if(w===ft&&!Ve&&w){var t=g.getSelection(),n=Ke?Oe:$e;Bn()(t).call(t,n)||window.requestAnimationFrame((function(){I(),g.setSelect([n])}))}}),[Oe,Ke,Ve,w,$e]),An=Ke||w?function(e){if(!He&&!B(e,w,Xe))if(w===ft){var t=f.showEditor,n=f.setEditorPosition,r=R.current,a=av(r),o=a.height,i=a.width,l=r.getAbsolutePosition();n(Bp({x:l.x,y:l.y,width:i,height:o,value:G,shapeRef:R,id:Oe,isWrap:true,propertyName:Mp},vt)),t()}else Xe(e)}:function(e){if(0===e.evt.button&&"RichText"!==Ze){var t=f.showEditor,n=f.setEditorPosition,r=R.current,a=av(r),o=a.height,i=a.width,l=r.getAbsolutePosition();n(Bp({x:l.x,y:l.y,width:i,height:o,value:G,shapeRef:R,id:Oe,isWrap:true,propertyName:Mp},vt)),t()}},wn=Ke?Bp({},w===ft?{onMouseOver:$t,onMouseOut:_t}:{}):{onDragStart:dn,onDragMove:Y().throttle(sn,100),onDragEnd:fn,onMouseOver:$t,onMouseOut:_t,dragBoundFunc:Y().throttle(hn,100)},xn=Ke?{}:{onTransform:pn,onTransformEnd:mn},Sn=1.5*dt,In=3*(Jt+jt),Mn=(0,V.useMemo)((function(){var e="Formula"===et,t={width:zt-it-ot-(e?Sn:0)-(Nt?In:0),height:Wt-at-lt+0,x:ot+(e?Sn:0)+(Nt?In:0),y:at};if(!Q)return t;var n=E(Q,{width:t.width*m,fontSize:dt,fontFamily:Yt(ve)},Oe);if(!n)return t;n.width;var r=n.height;if(r>Wt){var a="middle"===re?Wt/2-(at+lt+r)/2:"bottom"===re?Wt-(at+lt+r):at;return(0,ie.c)(t,{height:r+0,y:a})}return t}),[se,X,_,z,q,m,Q,Kt,Vt,et,Yt(ve),me,dt,re,Nt,Jt,jt,Oe]);(0,V.useEffect)((function(){if(3===oe&&Q&&/[\r\n]/g.test(Q)){var e=Q.replace(/[\r\n]/g,"");k.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[Oe,{bindText:e}]]))}}),[oe,Oe,Q,k]);var Ln=function(e){var t,n=e?"width":"height",r=dt,a=Number(me||12)*m,o=function(e){var t=1.5*e,n=3*(Jt+e/2.54),r="Formula"===et;return{width:zt-it-ot-(r?t:0)-(Nt?n:0),height:Wt-at-lt+0,x:ot+(r?t:0)+(Nt?n:0),y:at}}(r),i=o.width,l=(o.height,o[n]),u=function(){return D(Bp({x:0,y:0,fontSize:r,width:e?null:i},c))[n]},c={wrap:gn[oe],textDecoration:gt,fontStyle:ht,text:Q,perfectDrawEnabled:!1,hitStrokeWidth:0,verticalAlign:re,align:te,fontFamily:Yt(ve)};if(u()>l)for(;!t&&r>1;){r-=1;var d=u();if(d<=0)break;(d<=l||d<=6)&&(t=r)}else if(r<a)for(;!t&&r<100;){r+=1;var s=u();if(s<=0)break;if(s>=l||s>=18){var f=r-1;t=f>=a?a:f}}return t};(0,V.useEffect)((function(){var e=Number(me||12)*m;"ShrinkWrap"!==Ge&&e!==dt&&st(e)}),[Ge,me,m,dt]),(0,V.useEffect)((function(){if(Q&&"ShrinkWrap"===Ge&&1!==dt){var e=Ln(3===oe);e&&st(e)}}),[se.top,se.left,se.right,se.bottom,X,_,m,Q,et,oe,Yt(ve),me,dt,Ge,re,Nt,Jt,jt]);var Rn=Ct?{}:{fill:$},Fn=3===oe&&Q&&/[\r\n]/g.test(Q)?Q.replace(/[\r\n]/g,""):Q;return H().createElement(H().Fragment,null,H().createElement(nv.Group,(0,ie.c)({height:Wt,width:zt,clipX:0,clipY:0,clipWidth:zt,clipHeight:Wt},wn,{scale:{x:1,y:1},ref:R,x:Kt,y:Vt,id:Ve?"template_".concat(Oe):Oe,draggable:!Ke&&S,listening:!Ve,name:Et}),Ct&&!!$&&H().createElement(nv.Rect,{height:Wt,width:zt,name:"rect-".concat(Oe,"-backColor"),fill:$,scale:{x:1,y:1}}),mt?Ht?H().createElement(Fp,{width:zt,height:Wt,text:Fn,divideNums:ge,fill:ue,divideLineEnable:qt,divideLineColor:an,divideLineWidth:on,divideLineStyle:ln,align:te,fontFamily:Yt(ve),fontStyle:ht,textDecoration:gt,fontSize:dt}):H().createElement(H().Fragment,null,Nt&&Pt,"Formula"===et?H().createElement(nv.Text,{text:"fx",width:Sn,height:Wt,x:ot+(Nt?In:0),fill:"#B2B2B2",verticalAlign:"middle",align:"center",fontFamily:Yt(ve),fontStyle:ht,fontSize:dt}):null,H().createElement(nv.Text,(0,ie.c)({},Mn,(0,L.c)((0,L.c)({perfectDrawEnabled:false,scale:{x:1,y:1},text:Fn,letterSpacing:0,fill:ue,verticalAlign:re,align:te,name:"".concat(xe),fontFamily:Yt(ve),fontStyle:ht,textDecoration:gt,fontSize:dt,wrap:gn[oe],ref:N,hitStrokeWidth:0},"name",Ie),"lineHeight",tt)))):null,H().createElement(nv.Rect,(0,ie.c)({height:Wt,width:zt,id:"".concat(Oe,"_rect"),name:yt},xn,{dashEnabled:Ke?xt&&!Bn()(s=[Zt]).call(s,b):xt,listening:!Ve,dash:St,onDblClick:An,onMouseDown:Cn,onContextMenu:En,scale:{x:1,y:1},x:0,y:0,ref:T,stroke:At,strokeWidth:kt,shadowForStrokeEnabled:!1,strokeScaleEnabled:!1,hitStrokeWidth:0,strokeEnabled:wt},Rn)),Ce,It),Ut)})),kp),Np=Tp;function Gp(e,t){var n=void 0!==Jn()&&On()(e)||e["@@iterator"];if(!n){if(zn()(e)||(n=function(e,t){var n;if(!e)return;if("string"==typeof e)return Zp(e,t);var r=Sn()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Qn()(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Zp(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw o}}}}function Zp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Qp=null,Pp=function(e,t){var n=e.selectionContext,r=e.activedSelectId,a=e.dataContext,o=e.rulerRef,i=e.navToolRef,l=e.beforeMouseDown,u=a.getRootId(),c=u===t,d=n.getSelection(),s=a.findControl(t),f=null==s?void 0:s.parentId,g=((0,V.useContext)(An)||{}).isMultiKeyActiveWhenSelectedRef,h=void 0===g?(0,V.useRef)(!1):g,v=(0,V.useCallback)((function(e){var t,n,r=((null!==(t=null===(n=i.current)||void 0===n?void 0:n.formatControlInfoRef)&&void 0!==t?t:{}).current||{}).selectItem;if(W.console.log("formatControl",e,u,r,i),r){if(u===e)return void W.eventBus.emit("format-done");var o=a.findControl(e);W.console.log("formatControl",(0,ie.c)({},r,o),r,o),a.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[e,(0,ie.c)({formatBrush:!0},P()(rt).call(rt,(function(e,t){var n;if(Bn()(n=["DataCell","LayoutCell"]).call(n,r.type)&&"border"===t){if("border"in r&&"border"in o){var a=Y().cloneDeep(r.border);if(a.width.left&&a.width.top&&a.color.left===a.color.top&&a.width.left===a.width.top&&a.style.left===a.style.top){var i=["right","bottom"],l={color:P()(BORDER_PROPS).call(BORDER_PROPS,(function(e,t){var n=Bn()(i).call(i,t)&&a.width[t];return e[t]=n?a.color[t]:a.color.top,e}),{}),width:P()(BORDER_PROPS).call(BORDER_PROPS,(function(e,t){var n=Bn()(i).call(i,t)&&a.width[t];return e[t]=n?a.width[t]:a.width.top,e}),{}),style:P()(BORDER_PROPS).call(BORDER_PROPS,(function(e,t){var n=Bn()(i).call(i,t)&&a.width[t];return W.console.log(a.style.top),e[t]=n?a.style[t]:a.style.top,e}),{})};e.border=l}else e.border=r.border}}else t in r&&t in o&&(e[t]=r[t]);return e}),{}))]]))}}),[u]),p=t===r,m=Bn()(d).call(d,t),C=f?a.findControl(f):{},y=(0,V.useMemo)((function(){if(C&&Qf(C)){var e=$f(a,f).items,t=df(e),n=t.cells,r=t.columnData,o=t.columns,i=t.rows,l=Y().keyBy(n,"id"),u=function(e,t,n){var r=[],a={};for(var o in e){var i,l=Gp(e[o]);try{for(l.s();!(i=l.n()).done;){var u=i.value;a[u.columnId]||(a[u.columnId]=[]),a[u.columnId].push(u)}}catch(e){l.e(e)}finally{l.f()}}var c,d=Gp(t);try{for(d.s();!(c=d.n()).done;){var s,f=a[c.value.id]||[],g={},h=Gp(f);try{for(h.s();!(s=h.n()).done;){var v=s.value;g[v.rowId]||(g[v.rowId]=[]),g[v.rowId].push(v)}}catch(e){h.e(e)}finally{h.f()}var p,m=[],C=Gp(n);try{for(C.s();!(p=C.n()).done;){var y=p.value.id;g[y]&&m.push.apply(m,(0,kn.c)(g[y]))}}catch(e){C.e(e)}finally{C.f()}r.push(m)}}catch(e){d.e(e)}finally{d.f()}return r}(r,o,i);return{gridData:u,cellsMap:l}}return{}}),[C]),E=y.gridData,D=y.cellsMap,A=(0,V.useCallback)((function(e){var u=arguments.length>1&&void 0!==arguments[1]&&arguments[1],d=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,g=e;if(g.id().split("_")[0]!==t&&g.id()!==t&&null!=g&&g.getParent())W.console.log("handleMouseDown",t,g);else if(W.console.log("handleMouseDown"),(!l||!l(d))&&t){var h,m,C=(null!==(h=null===(m=i.current)||void 0===m?void 0:m.formatControlInfoRef)&&void 0!==h?h:{}).current||{},y=(C.selectItem,C.isDoubleClick);W.console.log("isMulti",u,r,t);var A=n.getSelection();if(s||(Qp=t),u){if(c){var k;if(o)null===(k=o.current)||void 0===k||k.hideLine();return void W.eventBus.emit("format-done")}if(Bn()(A).call(A,t)){var w=F()(A).call(A,(function(e){return e!==t}));n.setSelect(w)}else{var b=A.length?a.findControl(A[0]).parentId:"";f&&f!==b?n.setSelect([t]):n.appendSelect([t])}v(t)}else if(s&&E&&D[Qp]){for(var x=D[Qp],S=x.column,I=x.row,B=D[t],M=B.column,L=B.row,R=Math.min(I,L),T=Math.max(I,L),N=Math.min(S,M),G=Math.max(S,M),Q=[],P=R;P<=T;P++)for(var J=N;J<=G;J++)Q.push(E[J][P].id);n.setSelect(Q),v(t)}else{if(W.console.log("id--------------",p,t),Bn()(A).call(A,t)){var j;if(Zf(a.findControl(t)))n.setSelect([t]);else n.setSelect(Z()(j=F()(A).call(A,(function(e){return t!==e}))).call(j,t));return}(!p||A.length>1)&&(n.setSelect(c?[]:[t]),v(t))}!1===y&&W.eventBus.emit("format-done")}}),[c,t,p,u,l,E]),k=(0,V.useCallback)((function(e){var t,n=e.currentTarget;if(0===(null===(t=e.evt)||void 0===t?void 0:t.button)||0===e.button){var r=Nv(e.evt),a=Gv(e.evt);window.requestAnimationFrame((function(){A(n,r,e,a),h.current=r}))}}),[A,c,t,p,u,l]);return{isRootId:c,selection:d,isSelected:m,activedSelectId:r,isLastSelected:p,handleMouseDown:k}},Jp=function(e){return(0,V.useCallback)((function(t){var n;if(W.console.log("grid cellItem onMouseDown",e),e&&Bn()(n=[st,"2"]).call(n,e)&&"dblclick"!==(null==t?void 0:t.type))return!0}),[e])},jp=["key"];function Op(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Up(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?U()(n=Op(Object(a),!0)).call(n,(function(t){(0,L.c)(e,t,a[t])})):b()?S()(e,b()(a)):U()(r=Op(Object(a))).call(r,(function(t){B()(e,t,k()(a,t))}))}return e}var zp=function(e){var t=e.data,n=e.children,r=(e.meta,t.key),a=(0,Wn.c)(t,jp),o=(0,V.useContext)(yn),i=(0,V.useContext)(An),l=(0,V.useContext)(Dn).gridState,u=t.id,c=i.activedSelectId,d=Pp(Up(Up({},o),{},{beforeMouseDown:Jp(l),activedSelectId:c}),u),s=d.handleMouseDown,f=d.isSelected,g=d.isLastSelected;return H().createElement(Np,(0,ie.c)({id:u},a,{dataKey:r,isLastSelected:g,isSelected:f,handleMouseDown:s}),n)},Wp=["x","y","width","height","border","displayMode","name","bindType","bindText","bindField","type","id","isLastSelected","handleMouseDown","isSelected","horAlignment","verAlignment"],Kp=(0,V.forwardRef)((function(e,t){var n,r,a,o,i,l,u=(0,V.useContext)(yn),c=u.globalConfig.previewImageUrl,d=(0,V.useContext)(Dn),s=((0,V.useState)(0)[1],d.gridState),f=d.isEditorGridState,g=void 0===f||f,h=(u.selectionContext.getSelection(),u.scale),v=void 0===h?1:h,p=u.contextStrokeEnabled,m=u.pixelRatio,C=Ep(),y=(0,V.useRef)(null),E=(0,V.useRef)(null);Cv({shapeRef:y});var D=e.x,A=void 0===D?0:D,k=e.y,w=void 0===k?0:k,b=e.width,x=e.height,S=e.border,I=e.displayMode,B=void 0===I?"zoom":I,M=e.name,L=e.bindType,R=e.bindText,F=e.bindField,T=e.type,N=e.id,G=e.isLastSelected,Q=e.handleMouseDown,P=e.isSelected,J=e.horAlignment,j=void 0===J?"left":J,O=e.verAlignment,U=void 0===O?"top":O,z=(0,Wn.c)(e,Wp);W.console.log("image----PROPS",e),fv({isSelected:P,refs:[y],pixelRatio:m,scale:v,currentProp:{x:A,y:w,width:b,height:x,displayMode:B,name:M,bindType:L,bindText:R,bindField:F,type:T,id:N}});var K=cp({x:A,y:w,id:N,width:b,height:x,border:S,scale:v,isSelected:P,contextStrokeEnabled:p}),q=K.stroke,Y=K.strokeWidth,X=K.strokeEnabled,_=K.dashEnabled,$=K.defaultDash,ee=K.customedStrokeElement,te=K.controlStrokeRef,ne=mv({strokeEnabled:X,shapeRef:E,isSelected:G,shapeRefStroke:q,controlStrokeRef:te}),re=ne.onMouseOut,ae=ne.onMouseOver,oe=rr(R).isBindField?"":F,le=oe?Z()(n="".concat(c)).call(n,F):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAMmElEQVR4Xu2d6XIV1xHH/6MNMGAjgVmFQSwOTpzCCaGymQr2h1TZlRfwi/gh/CD2A4Syq/zBJrGzFY7LVBwVCYswyBIQIRYLBNpuqhlUXKS7nOnpO0uf/1TxBaZ7pn89P+7ce86cSQDg44uN0ZVFfADgdKOBPfJ33EggRgJJgmkAZ/sG8f67R5PJ5IkcCzjfAEZiBMKaSaAVgQSY7RvC8eTMeOPDRgPvERMJkMDzBJIEH4kgU7yt4qVBAusJyO1W8sd/NxqEQwIk0JoABeGVQQIdCFAQXh4kQEF4DZCAjgA/QXTcGBUJAQoSSaNZpo4ABdFxY1QkBChIJI1mmToCFETHjVGREKAgkTSaZeoIUBAdN0ZFQoCCRNJolqkjQEF03BgVCQEKEkmjWaaOAAXRcWNUJAQoSCSNZpk6AhREx41RkRCgIJE0mmXqCFAQHTdGRUKAgkTSaJapI0BBdNwYFQkBChJJo1mmjgAF0XFjVCQEKEgkjWaZOgIURMeNUZEQoCCRNJpl6ghQEB03RkVCgIJE0miWqSNAQXTcGBUJAQoSSaNZpo4ABdFxY1QkBChIJI1mmToCFETHjVGREKAgkTSaZeoIUBAdN0ZFQoCCRNJolqkjQEF03BgVCQEKEkmjWaaOAAXRcWNUJAQoSCSNZpk6AhREx41RkRCgIJE0mmXqCFAQHTdGRUKAgkTSaJapI0BBdNwYFQkBChJJo1mmjgAF0XFjVCQEKEgkjWaZOgIURMeNUZEQoCCRNJpl6ghQEB03RkVCgIJE0miWqSNAQXTcGBUJAQoSSaNZpo4ABdFxY1QkBChIJI1mmToCFETHjVGREKAgkTSaZeoIuBYkAbB9M7B5CBjqBxL5C265CTQawMIy8GABuP0AaOTOWN0ELgUZ6AMO7wDGhoGB/urC93BmS8vAxB3g8gywtOKhoudrcCfIliHg5Cvppwa34gjIp8m5a8DcQnHHLOJIrgTZOACcOgRsGCgCHY+xlsDjJeCLK8CjJT9sXAnyqwPAjs1+mlPHSmYeAH//ro5n3vqc3Qjy8mbglwf8NKbOlYggIoqHzY0gx/cC+7d5aEn9a7h+Fzg/Vf86pAI3grx1hF/Mq3JJyhf2zy9V5WzynYcbQd45BvT3tYcxv+jzZ8h87ddFy8/omwbbxy6vAJ9c0OWuWpQbQf7w485o/zkJTN+vGv56ns+eF4ETo53P/cx4PWtbe9YUxEcfC62CghSK2+Zg/ASx4RiShYKEUKrYPhSkuIZQkOJYmx2Jgpih7JqIgnRFVL0dKEhxPaEgxbE2OxIFMUPZNREF6YqoejtQkOJ6QkGKY212JArSHqU8LLb7xXQi56anM53nl9L5UjI2tLicrQ0UJBuvSuxNQVq34cgOQP7I6HerTR5yujST/gndKEgoqQrtR0Geb0Zfko5279oa1qSbPwAy22Al4PlZChLGtFJ7UZDn26GZ3Rw6C5eCVOrSDzsZCvKMk3zXkIfHNFvIsxwUREO25BgK8qwBeZ6sDHkikIKUfLFrDk9BUmqD/cDvX9UvcSRL+nz6386/bFEQzRVacgwFSRswvAn47Vi+ZvxlArgz3z4HBcnHt5RoCpJi37UlXfYozybL99ycoyBCgM+D5LmSAPQnwI92AhsHgYnbnf/nzXmooHB+ggRhCt6JggSjar3jz/YB+15K/00eNZXbk/uPcybNEc7vIDngtQilIDl4btsEvLnmfv/hQrp42mKJy3DyV6wcTV0TSkFysPzNQWDkhfUJ/jcH/ONajsQ5QzkOkhNgUzgFUbLcsxU4sb99sMxtunBLmdwgjCPpBhD5JV0HUd6icDpgHa6vrgM3ftAdI28U52LlJZjG8xNEwXFsBPjJ7u6BMlP2yyvlrnjO2bzd+9RpDwqSkZ9MG3/7aPpCnpBt7jHw5US5i9Z1eh7kxv30ZThZNg4UZqFVkX2LGih8bRdweHu2ouU2S263vGwUpIadLEIQWW7z9OHOS5y2Q/efW8DFDA8lVbkFFKTK3WlzbkUI8vN9wN6ng4JZEckkwHPXgVsdpnBkzRm6//YX0lfSyVu3rs4CE7Ohka33oyD5+JUS3WtBtm0E3jyUrzR59lsGER8u5ssTGi1ivPpy+iLT5u1vV4HbD0OzrN+PgujZlRbZa0HaDQpmLfj+o3Q6ynLAo61Zc6/u306M1X+/Nw98MaHNDlAQPbvSInspyO6twC86DApmLXrqHvD191mjuu/fTYzmDN98D0ze656z1R4URMet1KheCSKDgr87DGzZYFve+E3gym2bnFnEWD2ivC9FXnITskjD2rOkIDZ9KzRLrwQ5OAK8HjAomLVY+dIuz3/n+S6gEaP5PC/cBC4pJKUgWbtdgf17IciTQcEjwFCPXiu9sAT8WfHa5LxirLZLfjSQTxEOFLa/gDmS3kHu13amP4/2crs7D/z1atitjpUYzfXIz77f3shWIT9BsvGqxN7WnyB5BgWzAum2HlUvxFg9R/kO8qfLgLx4M3SjIKGkKrSftSDNTwoWUea/poHv7jx/pF6K0XwkmY/11WR4lRQknFVl9rQU5CUZFBzTL52jgSL/k8sAnqwmUpQYzecpt3mzgYOHFETT4ZJjLAX59YH1o89FlPdoMb3VWTvyXcSxRUwZwAzZKEgIpYrtYyWILPZ80nBQsGKYOp7O15PAVMCrsilInbr69FwtBOnVoGBdcMqCE/Kzb7dZMBSkLh1tOk8LQQ4OA6/vqWHxhqc8fgO40mW2LwUxBF5UqryCyKDgW0eADT0aFCyKQ97jyKDh5xc7L1tEQfJSLiE+ryDHdqZvYuKWzhGTuWLtNgpSw6skjyAbB9JPj/42rymrIY5cpyw/OZ+91P65FQqSC285wXkEeWMfMKp8UrCcant/1E5T8ilI7/mbH0ErSBmDgubF9yihrMYic8XWbhSkR8B7mVYrSJ51bHtZTxVyy8i6jLBTkCp0I+c5aASxeJdGztOufHir1SH5CVL5tq0/wayCxD4oGNpiWfhOZvs2Dx5SkFB6FdovqyAHhoGfRj4oGNq+b6eBq00zjSlIKLkK7ZdFEPk5V54UjH1QMLR98uTjZ5eeLZ9KQULJVWi/LILIK9OOclAwU/eaX+dAQTKhq8bOoYJwUFDXL3m9nExkfLTEdbF0BEuOChXkjb3A6LaST7amh5+8C3wzRUFq2b4QQeRhpFMFPylYS5htTlqWKpIVGWWN3xOjnSs7M+6j8qhWNZFfruT9fdz0BGYepM/OUxA9w1Iiu32CyMoh+3lrZdKbEJb8BDFBbZfknWOdZ+PK7UEio4PcchPoxlK+0H9yIfdhKpHAzS2WTFeXe2Nu5ROQ73ryi5eHzY0gmtcee2hgFWvothBeFc+53Tm5EUS+fMvMXG7lE5BFueXLvIfNjSDSDE5dL/+SFDFEEC+bK0FklPzUIc6xKuvifLyUvmJORtu9bK4EkaZsGQJOvsIv7EVfoPLF/Nw1YC7DIthFn6PmeO4EEQiyhI+8tmBsGBjo12BhTCiBpWVg4g5weebZbN/Q2Drs51KQVfAy7CHr3MrPv0P9HAexuiBlHETWz5JPjdsPuq/EaHXcMvK4FqQMoDymLwIUxFc/WY0xAQpiDJTpfBGgIL76yWqMCVAQY6BM54sABfHVT1ZjTICCGANlOl8EKIivfrIaYwIUxBgo0/kiQEF89ZPVGBOgIMZAmc4XAQriq5+sxpgABTEGynS+CFAQX/1kNcYEKIgxUKbzRYCC+OonqzEmQEGMgTKdLwIUxFc/WY0xAQpiDJTpfBGgIL76yWqMCVAQY6BM54sABfHVT1ZjTICCGANlOl8EKIivfrIaYwIUxBgo0/kiQEF89ZPVGBOgIMZAmc4XAQriq5+sxpgABTEGynS+CFAQX/1kNcYEKIgxUKbzRYCC+OonqzEmQEGMgTKdLwIUxFc/WY0xAQpiDJTpfBGgIL76yWqMCVAQY6BM54sABfHVT1ZjTICCGANlOl8EKIivfrIaYwIUxBgo0/kiQEF89ZPVGBOgIMZAmc4XAQriq5+sxpgABTEGynS+CFAQX/1kNcYEKIgxUKbzRYCC+OonqzEmQEGMgTKdLwIUxFc/WY0xAQpiDJTpfBGgIL76yWqMCVAQY6BM54sABfHVT1ZjTICCGANlOl8EKIivfrIaYwIUxBgo0/kiQEF89ZPVGBNIzow3phoN7DHOy3QkUHsCSYJpEeTDRgPv1b4aFkACxgSSBB8lH19sjK4s4HwDGDHOz3QkUFsCCTDbN4TjiVTwRJJFfADgNG+3attTnrgBAbmtAnC2bxDvv3s0mfw/x8T2KF/ALM8AAAAASUVORK5CYII=",ue=yp(b,v),ce=yp(x,v),de=Ws(A,v),se=Ws(w,v),fe=(0,V.useCallback)((function(e,t,n,r){if(oe){var a="zoom"===B?e/t<b/x?{width:x/t*e,height:x}:{width:b,height:b/e*t}:{width:e,height:t},o=a.width,i=a.height,l=0,u=0;if(x-i>0)switch(n){case"middle":l=(x-i)/2;break;case"bottom":l=x-i}if(b-o>0)switch(r){case"center":u=(b-o)/2;break;case"right":u=b-o}return{height:i,width:o,top:l,left:u}}return{width:oe?e:b,height:oe?t:x,top:0,left:0}}),[b,x,B,oe,v]),ge=Cp(e,u),he=yv({id:N,refLineRef:u.refLineRef}),ve=(0,V.useCallback)((function(e){var t=e.x,n=e.y,r=(e.scaleX,e.scaleY,e.width),a=e.height;u.dataContext.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[N,{x:Ks(t,v),y:Ks(n,v),width:Ks(r,v),height:Ks(a,v)}]]))}),[N,v]),pe=lv({id:N,shapeRef:y,refLineRef:u.refLineRef,context:u,onDragEnd:ge,onDragMove:he,parentId:e.parentId,scale:v}),me=pe.onDragStart,Ce=pe.onDragMove,ye=pe.onDragEnd,Ee=pe.dragBoundFunc,De=sv({id:N,shapeRef:E,refLineRef:u.refLineRef,onTransformEnd:ve,context:u}),Ae=De.onTransform,ke=De.onTransformEnd,Ie={stageRef:u.stageRef,rootControlRef:u.rootControlRef,selectedId:N,isSelected:P&&!G};return H().createElement(H().Fragment,null,H().createElement(nv.Group,(0,ie.c)({height:ce,width:ue,clipX:0,clipY:0,clipWidth:ue,clipHeight:ce,onDragStart:me,onDragMove:Ce,onDragEnd:ye,onMouseOut:re,onMouseOver:ae,onMouseDown:Q,onDblClick:function(e){W.console.log("image onDblClick"),C(e,s,Q)},ref:y},z,{x:de,y:se,dragBoundFunc:Ee,id:N,draggable:g,name:Z()(r=Z()(a="".concat(we," ")).call(a,be," ")).call(r,xe)}),H().createElement(fp,{getImageSize:fe,src:le,scale:v,horAlignment:j,verAlignment:U}),H().createElement(nv.Rect,{height:ce,width:ue,name:Z()(o=Z()(i=Z()(l="".concat(N," ")).call(l,be," ")).call(i,xe," ")).call(o,Se),fill:"transparent",onTransform:Ae,onTransformEnd:ke,dashEnabled:_,dash:$,scale:{x:1,y:1},ref:E,stroke:q,strokeWidth:Y,shadowForStrokeEnabled:!1,strokeScaleEnabled:!1,hitStrokeWidth:0,alpha:1,strokeEnabled:X}),ee),H().createElement(xp,Ie))})),Vp=Kp,Hp=["key"];function qp(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yp(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?U()(n=qp(Object(a),!0)).call(n,(function(t){(0,L.c)(e,t,a[t])})):b()?S()(e,b()(a)):U()(r=qp(Object(a))).call(r,(function(t){B()(e,t,k()(a,t))}))}return e}var Xp=function(e){var t=e.data,n=t.key,r=(0,Wn.c)(t,Hp),a=(0,V.useContext)(yn),o=(0,V.useContext)(An),i=(0,V.useContext)(Dn).gridState,l=t.id,u=o.activedSelectId,c=Pp(Yp(Yp({},a),{},{beforeMouseDown:Jp(i),activedSelectId:u}),l),d=c.handleMouseDown,s=c.isSelected,f=c.isLastSelected;return H().createElement(Vp,(0,ie.c)({},r,{dataKey:n,isLastSelected:f,isSelected:s,handleMouseDown:d}))},_p="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIIAAABCAQMAAAChJZwKAAAABlBMVEUAAAAAAAClZ7nPAAAAAXRSTlMAQObYZgAAAKVJREFUeNpj+J/br25jNifhR/Hyy3vkv8kdYKCpyKpzRs4SJ3mOn1hEc5Feyw8GlxPO+7bP9qe9yOwzZvkSB/eknX1Ac5Gej00Gbgy/eNjPHaa5SJ/LGaPJCQ8L3ILyaS7Ss1jCjCfhB0/bwTaai/SmsRkIVxxLT/+UT3ORvn6Q7Tc3tB+cQ3ORXr0yk2aJSzxpE9JoLtIn5GBwRuGxQZvmN9qKAAAoFDTTdduhGwAAAABJRU5ErkJggg==",$p="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIQAAACEAQMAAABrihHkAAAABlBMVEUAAAAAAAClZ7nPAAAAAXRSTlMAQObYZgAAAKZJREFUeNrN1UEKxSAMBNABD+D9b+kBAmkm0dr/oUuZWij4Ng3JaOEONEO83ProAxBLGJeR0H18QLjhHlgVCiXLa1ki7bhMtf31X4Hn9GqOx8WbZTtiMS5iCQrJ586zUlDJjRIZ3pleoTxGGFtALdGwSvcjUVJBNisnODMmlTzYtN1DraDadV9/R6VVfHm4X2T9rGwn6qCsq4/H+xOyL34fcvlbQysXaMC43QnP9IEAAAAASUVORK5CYII=",em="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACAAQMAAAD58POIAAAABlBMVEUAAAAAAAClZ7nPAAAAAXRSTlMAQObYZgAAANVJREFUeNq1lUEOhCAMRUtYuPQIPYo3c5zMxTwKR3DJwsyflmJG9/yGGHguKp/PV+BVVpF1alOhgFNEpvKquk3FpgsJzDgNAF9/HlSwtsEGCWTQJIy2N03ZoPvDwcMwY8FVusmzhgIc1rk0oHv7DgYwCXNVY6nKkuPkxgM7m1g5AHYWEFRzBN7WXGYSMAnPSAd7lUPT8SDKks4uVZeQAMLayQeQTUIK6HmKuKP/gGWDHn1AVYdM4P4wTW3BBCk2lw8hgZ6nvrlmQQq4fuL6qbrfUnso+AFlA+5pQALjxgAAAABJRU5ErkJggg==",tm=em,nm=["x","y","width","height","border","name","bindField","type","id","isLastSelected","handleMouseDown","isSelected","encodeMode"],rm=(0,V.memo)((0,V.forwardRef)((function(e,t){var n,r,a,o,i,l=(0,V.useContext)(yn),u=(l.selectionContext.getSelection(),l.scale),c=void 0===u?1:u,d=l.contextStrokeEnabled,s=l.pixelRatio,f=(0,V.useContext)(Dn),g=f.gridState,h=f.isEditorGridState,v=void 0===h||h,m=(0,V.useRef)(null),C=(0,V.useRef)(null);W.console.log(l,l.refLineRef.searchRefLines);var y=Ep();Cv({shapeRef:m});var E=e.x,D=void 0===E?0:E,A=e.y,k=void 0===A?0:A,w=e.width,b=e.height,x=e.border,S=e.name,I=e.bindField,B=e.type,M=e.id,L=e.isLastSelected,R=e.handleMouseDown,F=e.isSelected,T=e.encodeMode,N=(0,Wn.c)(e,nm);W.console.log("qrcode----PROPS",e),fv({isSelected:F,refs:[m],pixelRatio:s,scale:c,currentProp:{x:D,y:k,width:w,height:b,name:S,bindField:I,type:B,id:M}});var G=cp({x:D,y:k,id:M,width:w,height:b,border:x,scale:c,isSelected:F,contextStrokeEnabled:d}),Q=G.stroke,P=G.strokeWidth,J=G.strokeEnabled,j=G.dashEnabled,O=G.defaultDash,U=G.customedStrokeElement,z=G.controlStrokeRef,K=mv({strokeEnabled:J,shapeRef:C,isSelected:L,shapeRefStroke:Q,controlStrokeRef:z}),q=K.onMouseOut,Y=K.onMouseOver,X=(0,V.useMemo)((function(){var e;return null!==(e=p[Cn[T]])&&void 0!==e?e:tm}),[T]),_=yp(w,c),$=yp(b,c),ee=Ws(D,c),te=Ws(k,c),ne=(0,V.useMemo)((function(){var e=w,t=b;if(1!==mn[T]&&T)for(t=w*mn[T];t>b;)t=b,e=b/mn[T];else e=t=w>b?b:w;return{width:e,height:t}}),[w,b,T]),re=(0,V.useCallback)((function(){return ne}),[ne]),ae=(0,V.useMemo)((function(){return w>ne.height?Ws((w-ne.width)/2,c):0}),[ne,c]),oe=(0,V.useMemo)((function(){return b>ne.height?Ws((b-ne.height)/2,c):0}),[ne,c]),le=Cp(e,l),ue=yv({id:M,refLineRef:l.refLineRef}),ce=(0,V.useCallback)((function(e){var t=e.x,n=e.y,r=(e.scaleX,e.scaleY,e.width),a=e.height;l.dataContext.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[M,{x:Ks(t,c),y:Ks(n,c),width:Ks(r,c),height:Ks(a,c)}]]))}),[M,c]),de=lv({id:M,shapeRef:m,refLineRef:l.refLineRef,context:l,onDragEnd:le,onDragMove:ue,parentId:e.parentId,scale:c}),se=de.onDragStart,fe=de.onDragMove,ge=de.onDragEnd,he=de.dragBoundFunc,ve=sv({id:M,shapeRef:C,refLineRef:l.refLineRef,onTransformEnd:ce,context:l}),pe=ve.onTransform,me=ve.onTransformEnd,Ce={stageRef:l.stageRef,rootControlRef:l.rootControlRef,selectedId:M,isSelected:F&&!L};return H().createElement(H().Fragment,null,H().createElement(nv.Group,(0,ie.c)({height:$,width:_,clipX:0,clipY:0,clipWidth:_,clipHeight:$,onDragStart:se,onDragMove:fe,onDragEnd:ge,onMouseOut:q,onMouseOver:Y,onDblClick:function(e){W.console.log("image onDblClick"),y(e,g,R)},scale:{x:1,y:1},onMouseDown:R,ref:m},N,{x:ee,y:te,dragBoundFunc:he,id:M,draggable:v,name:Z()(n=Z()(r="".concat(we," ")).call(r,be," ")).call(n,xe)}),H().createElement(fp,{getImageSize:re,src:X,scale:c,x:ae,y:oe}),H().createElement(nv.Rect,{height:$,width:_,name:Z()(a=Z()(o=Z()(i="".concat(M," ")).call(i,be," ")).call(o,xe," ")).call(a,Se),fill:"transparent",onTransform:pe,onTransformEnd:me,dashEnabled:j,dash:O,scale:{x:1,y:1},ref:C,stroke:Q,strokeWidth:P,shadowForStrokeEnabled:!1,strokeScaleEnabled:!1,hitStrokeWidth:0,alpha:1,strokeEnabled:J}),U),H().createElement(xp,Ce))})),kp),am=rm,om=["key"];function im(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function lm(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?U()(n=im(Object(a),!0)).call(n,(function(t){(0,L.c)(e,t,a[t])})):b()?S()(e,b()(a)):U()(r=im(Object(a))).call(r,(function(t){B()(e,t,k()(a,t))}))}return e}var um=function(e){var t=e.data,n=t.key,r=(0,Wn.c)(t,om),a=(0,V.useContext)(yn),o=(0,V.useContext)(An),i=(0,V.useContext)(Dn).gridState,l=t.id,u=o.activedSelectId,c=Pp(lm(lm({},a),{},{beforeMouseDown:Jp(i),activedSelectId:u}),l),d=c.handleMouseDown,s=c.isSelected,f=c.isLastSelected;return H().createElement(am,(0,ie.c)({},r,{dataKey:n,isLastSelected:f,isSelected:s,handleMouseDown:d}))},cm=["x","y","width","height","border","name","bindField","encodeMode","showLabel","rotate","id","isLastSelected","handleMouseDown","isSelected"];var dm=(0,V.memo)((0,V.forwardRef)((function(e,t){var n,r,a,o,i,l,u=(0,V.useContext)(yn),c=(0,V.useState)((function(){return function(){for(var e=[];e.length<13;){var t=Math.floor(10*Math.random());e.push(t)}return e.join("")}()}))[0],d=(u.selectionContext.getSelection(),u.scale),s=void 0===d?1:d,f=u.contextStrokeEnabled,g=u.pixelRatio,h=(0,V.useContext)(Dn),v=h.gridState,p=h.isEditorGridState,m=void 0===p||p,C=(0,V.useRef)(null),y=(0,V.useRef)(null),E=Ep();W.console.log(u,u.refLineRef.searchRefLines);var D=e.x,A=void 0===D?0:D,k=e.y,w=void 0===k?0:k,b=e.width,x=e.height,S=e.border,I=e.name,B=e.bindField,M=e.encodeMode,L=e.showLabel,R=e.rotate,F=e.id,T=e.isLastSelected,N=e.handleMouseDown,G=e.isSelected,Q=(0,Wn.c)(e,cm);fv({isSelected:G,refs:[C],pixelRatio:g,scale:s,currentProp:{x:A,y:w,width:b,height:x,name:I,bindField:B,encodeMode:M,showLabel:L,rotate:R,id:F}});var P=cp({x:A,y:w,id:F,width:b,height:x,border:S,scale:s,isSelected:G,contextStrokeEnabled:f}),J=P.stroke,j=P.strokeWidth,O=P.strokeEnabled,U=P.dashEnabled,z=P.defaultDash,K=P.customedStrokeElement,q=P.controlStrokeRef,Y=mv({strokeEnabled:O,shapeRef:y,isSelected:T,shapeRefStroke:J,controlStrokeRef:q}),X=Y.onMouseOut,_=Y.onMouseOver,$=yp(x,s),ee=yp(b,s),te=ee,ne=$,re=Ws(A,s),ae=Ws(w,s),oe=(0,V.useMemo)((function(){return{rotation:Number(R)||0}}),[R]),le=Cp(e,u),ue=yv({id:F,refLineRef:u.refLineRef}),ce=(0,V.useCallback)((function(e){var t=e.x,n=e.y,r=(e.scaleX,e.scaleY,e.width),a=e.height;u.dataContext.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[F,{x:Ks(t,s),y:Ks(n,s),width:Ks(r,s),height:Ks(a,s)}]]))}),[F,s]),de=lv({id:F,shapeRef:C,refLineRef:u.refLineRef,context:u,onDragEnd:le,onDragMove:ue,parentId:e.parentId,scale:s}),se=de.onDragStart,fe=de.onDragMove,ge=de.onDragEnd,he=de.dragBoundFunc,ve=sv({id:F,shapeRef:y,refLineRef:u.refLineRef,onTransformEnd:ce,context:u}),pe=ve.onTransform,me=ve.onTransformEnd,Ce={stageRef:u.stageRef,rootControlRef:u.rootControlRef,selectedId:F,isSelected:G&&!T},ye=(0,V.useMemo)((function(){var e=Number(R),t=Math.min(ee/9,.3*$);return 90===e||270===e?(t=Math.min($/9,.3*ee),{width:$,height:1.2*t,fontSize:t}):{width:ee,height:1.2*t,fontSize:t}}),[R,ee,$]),Ee=(0,V.useCallback)((function(){var e=Number(R);return 90===e||270===e?{width:x,height:L?Ks(ee-ye.height):b}:{width:b,height:L?Ks($-ye.height):x}}),[b,x,L,R]),De=(0,V.useMemo)((function(){switch(Number(R)){case 90:case 180:return ee;default:return 0}}),[R,ee,$]),Ae=(0,V.useMemo)((function(){switch(Number(R)){case 90:default:return 0;case 180:case 270:return $}}),[R,ee,$]),ke=(0,V.useMemo)((function(){switch(Number(R)){case 90:return ye.height;case 180:return ee;case 270:return ee-ye.height;default:return 0}}),[R,ee,$]),Be=(0,V.useMemo)((function(){switch(Number(R)){case 90:return 0;case 180:return ye.height;case 270:return $;default:return $-ye.height}}),[R,ee,$]);W.console.log("labelProps",ye);var Me=u.dataContext.getData().bizType;return H().createElement(H().Fragment,null,H().createElement(nv.Group,(0,ie.c)({height:ne,width:te,clipX:0,clipY:0,clipWidth:te,clipHeight:ne,onDragStart:se,onDragMove:fe,onDragEnd:ge,onMouseOut:X,onMouseOver:_,onMouseDown:N,onDblClick:function(e){W.console.log("image onDblClick"),E(e,v,N)},ref:C},Q,{x:re,y:ae,dragBoundFunc:he,id:F,draggable:m,name:Z()(n=Z()(r="".concat(we," ")).call(r,be," ")).call(n,xe)}),H().createElement(nv.Group,{x:0,y:0,height:ne,width:te,name:we},H().createElement(fp,(0,ie.c)({getImageSize:Ee,src:"data:image/png;base64,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",scale:s,x:"1"===Me?(te-Ws(48,s))/2||0:De,width:"1"===Me?Ws(48):void 0,y:Ae},oe)),L&&H().createElement(nv.Text,(0,ie.c)({},ye,{x:ke,y:Be,text:c,fill:"#000",verticalAlign:"middle",align:"center",name:Z()(a="".concat(xe," ")).call(a,Ie),hitStrokeWidth:0},oe))),H().createElement(nv.Rect,{height:ne,width:te,name:Z()(o=Z()(i=Z()(l="".concat(F," ")).call(l,be," ")).call(i,xe," ")).call(o,Se),fill:"transparent",onTransform:pe,onTransformEnd:me,dashEnabled:U,dash:z,scale:{x:1,y:1},ref:y,stroke:J,strokeWidth:j,shadowForStrokeEnabled:!1,strokeScaleEnabled:!1,hitStrokeWidth:0,alpha:1,strokeEnabled:O}),K),H().createElement(xp,Ce))}))),sm=dm,fm=["key"];function gm(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function hm(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?U()(n=gm(Object(a),!0)).call(n,(function(t){(0,L.c)(e,t,a[t])})):b()?S()(e,b()(a)):U()(r=gm(Object(a))).call(r,(function(t){B()(e,t,k()(a,t))}))}return e}var vm=function(e){var t=e.data,n=t.key,r=(0,Wn.c)(t,fm),a=(0,V.useContext)(yn),o=(0,V.useContext)(An),i=(0,V.useContext)(Dn).gridState,l=t.id,u=o.activedSelectId,c=Pp(hm(hm({},a),{},{beforeMouseDown:Jp(i),activedSelectId:u}),l),d=c.handleMouseDown,s=c.isSelected,f=c.isLastSelected;return H().createElement(sm,(0,ie.c)({},r,{dataKey:n,isLastSelected:f,isSelected:s,handleMouseDown:d}))},pm=n(57048),mm=n(25700),Cm=n.n(mm),ym=function(e){var t=e.className;return H().createElement("div",{className:"".concat(t,"-empty")},H().createElement("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKgAAABgCAYAAACJ8DltAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAqKADAAQAAAABAAAAYAAAAACo6b7MAAADyUlEQVR4Ae2dP2vUYBzHn1QRoRQcRK9SXERQFwfxRfgmHJ0cuohOenUTFwcnwaVvwlfgJA66KIiLHHh1cCkt4mBMaofL3TWN3KX5ffP9HBR6Se7J98+HJ5e7cEmJBwmQAAmQAAmQAAmQAAmQAAmQAAmQAAmQAAmQAAmQAAmQQGcJZJ3tueUd53l+ZvRj72me0t2U5+st724pw+/sjLdu37w6XMpgPRlkpSc+ZmwcwJnnD1XgLA3keXry7sOX4YwZ4wW9BfRg5hQsFkirpfUWUKWZs1oJM+lkHv0FdNKl4P/MpP9KA9DA8AJpSgAaGNBSmjukABocUHdIAVQAUGdIAVQEUFdIAVQIUEdIAVQMUDdIAVQQUCdIAVQUUBdIAVQYUAdIe3u53bfxbnG9yOxjPB7PLpxaMhgMppbEf3p5sNbLLplB47NnrRBAreuPbx5A43dkrRBAreuPbx5A43dkrRBAreuPbx5A43dkrRBAreuPb/50fInLVaj4IfxyE9AajRlUqy87tQBqV7mWYQDV6stOLYDaVa5lGEC1+rJTa3cW3+Ryu8gUuH0K0ctrCEvAFrke9H8A/Tg6m16/PZd+7lcPRjtfP9UO8+D+rdr1i67cfrNfGSLL0tbnF6vDykKBJ9VUBQRHkzgPzmgaSz3lL5Rc29wbRtRWpwlA69JpsG565mzwks42UYQUQDvDpZsdq0Fqd5LUDRbt7fX5y/eVwZu8tz2ENCm8J7UD1O0suELvxBMVSDnET5Tm9m8JaXTPABq9IXN9AGoOQHT7ABq9IXN9AGoOQHT7dmfxy/8u/lL0jqX12QEq3dYc8U0+95zzMplFHOJlqvIUCqCevcu4BlCZqjyF8h60pd4vXrleO/L09Zq1GxuvtAOU7+K1aOcQr9WXnVoAtatcyzCAavVlpxZA7SrXMgygWn3ZqQVQu8q1DAOoVl92agHUrnItwwCq1ZedWgC1q1zLMIBq9WWnFkDtKtcyDKBafdmpBVC7yrUMA6hWX3ZqAdSuci3DAKrVl51aALWrXMswgGr1ZacWQO0q1zIMoFp92akFULvKtQwDqFZfdmoB1K5yLcMAqtWXnVoAtatcy3B/f/omy74X9/9b76qO4+7VedK6jvutqJPW03R/vZ1Bi7vkbjcNge3iJtBbQDcurD7OsuxZKmfSFh/n11ocvPWhs1Hru1hwB709xBdw/i6yeXT4t2BMR7/8xuavOyn9eVXcT3jj6K0irslGp7KVexGVoYkESIAESIAESIAESIAESIAESIAESIAESIAESIAEnBL4C2BywrT3uwIUAAAAAElFTkSuQmCC",width:"168",height:"96",alt:(0,W.getLangMsg)("printd.components.key0018")}),H().createElement("div",{className:"".concat(t,"-empty-text")},(0,W.getLangMsg)("printd.components.key0019")))},Em=function(e){var t=e.visible,n=(e.meta,e.definition,e.onConfirm),r=e.onCancel,a=e.onClose,o="change-lang",i=function(){n()},l=H().createElement(H().Fragment,null,H().createElement("div",{className:"".concat(o,"-modal-footer-btns")},H().createElement(z.Button,{onClick:function(){r()},type:"second",className:"".concat(o,"-modal-cancel-btn")},(0,W.getLangMsg)("printd.components.key0020")),H().createElement(z.Button,{className:"".concat(o,"-modal-ok-btn"),type:"primary",onClick:i},(0,W.getLangMsg)("printd.components.key0021"))));return H().createElement(z.Modal,{body:H().createElement(ym,{className:"".concat(o,"-body")}),maskClosable:!1,className:"".concat(o,"-modal"),footer:l,bodyStyle:{display:"flex",alignItems:"center",justifyContent:"center"},title:(0,W.getLangMsg)("printd.components.key0018"),type:"confirm",destroyOnClose:!0,onCancel:a,onOk:i,mask:!0,visible:t})},Dm=function(e){var t,n=e.className,r=e.row,a=e.setRow,o=e.column,i=e.setColumn,l=e.errorTipShow,u=e.setErrorTipShow,c=(0,V.useState)(0),d=(0,M.c)(c,2),s=d[0],f=d[1],g=(0,V.useState)(0),h=(0,M.c)(g,2),v=h[0],p=h[1],m=(0,V.useContext)(W.DataContext),C=m.getRootId(),y=m.findControl(C).language,E=(0,V.useCallback)((function(){f(0),p(0)}),[]),D=(0,V.useCallback)((function(){return H().createElement("span",{className:"exceed-cell"},"...")}),[]),A=(0,V.useCallback)((function(e){var t=[1,2,3,4,5,6,7,8,9,10];return N()(t).call(t,(function(t){var n,l,u=e<=r&&t<=o,c=e<=s&&t<=v;return H().createElement("div",{className:Hn()({cell:!0,active:u,hover:!u&&c}),key:Z()(n="".concat(e,"-")).call(n,t),onClick:function(){return function(e,t){e=String(e),t=String(t),a(e),i(t)}(e,t)},onMouseOver:function(){return function(e,t){f(e),p(t)}(e,t)}},(l=t,8===e&&r>8&&l<=o||10===l&&o>10&&e<=r?D():null))}))}),[r,o,s,v]);return H().createElement(H().Fragment,null,l&&H().createElement(z.Alert,{className:"".concat(n,"-alert"),message:(0,W.getLangMsg)("printd.components.key0030"),type:"error",delayOffTime:0,closable:!0,showIcon:!0,onClose:function(){return u(!1)}}),H().createElement("div",{className:n},H().createElement("div",{className:"grid-info"},H().createElement("div",{className:"grid-input"},H().createElement("div",{className:"label"},(0,W.getLangMsg)("printd.components.key0015")),H().createElement(z.InputNumber,{placeholder:"",value:r,style:"en_US"===y?{width:45}:{},onChange:function(e){a(e.target.value)}})),H().createElement("div",{className:"grid-input"},H().createElement("div",{className:"label"},(0,W.getLangMsg)("printd.components.key0016")),H().createElement(z.InputNumber,{placeholder:"",value:o,style:"en_US"===y?{width:45}:{},onChange:function(e){i(e.target.value)}}))),H().createElement("div",{className:"grid-main",onMouseLeave:E},(t=[1,2,3,4,5,6,7,8],N()(t).call(t,(function(e){return H().createElement("div",{className:"row",key:e},A(e))}))))))},Am=function(e){var t=e.visible,n=e.onCancel,r=(e.meta,e.definition,e.onConfirm),a=(0,V.useState)(""),o=(0,M.c)(a,2),i=o[0],l=o[1],u=(0,V.useState)(""),c=(0,M.c)(u,2),d=c[0],s=c[1],f=(0,V.useState)(!1),g=(0,M.c)(f,2),h=g[0],v=g[1],p="grid-settings",m=H().createElement(H().Fragment,null,H().createElement("div",{className:"".concat(p,"-modal-footer-btns")},H().createElement(z.Button,{onClick:n,type:"second",className:"".concat(p,"-modal-cancel-btn")},(0,W.getLangMsg)("printd.components.key0011")),H().createElement(z.Button,{className:"".concat(p,"-modal-ok-btn"),type:"primary",onClick:function(){if(!(Number(i)>0&&Number(d)>0))return W.console.log("errorTipShow",h),v(!0);h&&v(!1),r({row:i,column:d})}},(0,W.getLangMsg)("printd.components.key0012"))));return H().createElement(z.Modal,{body:H().createElement(Dm,{className:"".concat(p,"-body"),row:i,setRow:l,column:d,setColumn:s,errorTipShow:h,setErrorTipShow:v}),titleIcon:null,maskClosable:!1,className:"".concat(p,"-modal"),footer:m,width:400,height:500,title:(0,W.getLangMsg)("printd.components.key0017"),destroyOnClose:!0,closable:!0,onCancel:n,onOk:function(){return null},mask:!0,visible:t})},km=function(e){var t,n=e.className,r=e.row,a=e.setRow,o=e.column,i=e.setColumn,l=e.errorTipShow,u=e.setErrorTipShow,c=(0,V.useState)(0),d=(0,M.c)(c,2),s=d[0],f=d[1],g=(0,V.useState)(0),h=(0,M.c)(g,2),v=h[0],p=h[1],m=(0,V.useContext)(W.DataContext),C=m.getRootId(),y=m.findControl(C).language,E=(0,V.useCallback)((function(){f(0),p(0)}),[]),D=(0,V.useCallback)((function(){return H().createElement("span",{className:"exceed-cell"},"...")}),[]),A=(0,V.useCallback)((function(e){var t=[1,2,3,4,5,6,7,8,9,10];return N()(t).call(t,(function(t){var n,l,u=e<=r&&t<=o,c=e<=s&&t<=v;return H().createElement("div",{className:Hn()({cell:!0,active:u,hover:!u&&c}),key:Z()(n="".concat(e,"-")).call(n,t),onClick:function(){return function(e,t){e=String(e),t=String(t),a(e),i(t)}(e,t)},onMouseOver:function(){return function(e,t){f(e),p(t)}(e,t)}},(l=t,8===e&&r>8&&l<=o||10===l&&o>10&&e<=r?D():null))}))}),[r,o,s,v]);return H().createElement(H().Fragment,null,l&&H().createElement(z.Alert,{className:"".concat(n,"-alert"),message:(0,W.getLangMsg)("printd.components.key0014"),type:"error",delayOffTime:0,closable:!0,showIcon:!0,onClose:function(){return u(!1)}}),H().createElement("div",{className:n},H().createElement("div",{className:"grid-info"},H().createElement("div",{className:"grid-input"},H().createElement("div",{className:"label"},(0,W.getLangMsg)("printd.components.key0015")),H().createElement(z.InputNumber,{placeholder:"",value:r,style:"en_US"===y?{width:45}:{},onChange:function(e){a(e.target.value)}})),H().createElement("div",{className:"grid-input"},H().createElement("div",{className:"label"},(0,W.getLangMsg)("printd.components.key0016")),H().createElement(z.InputNumber,{placeholder:"",value:o,style:"en_US"===y?{width:45}:{},onChange:function(e){i(e.target.value)}}))),H().createElement("div",{className:"grid-main",onMouseLeave:E},(t=[1,2,3,4,5,6,7,8],N()(t).call(t,(function(e){return H().createElement("div",{className:"row",key:e},A(e))}))))))},wm=function(e){var t=e.visible,n=e.onCancel,r=(e.meta,e.definition,e.onConfirm),a=(0,V.useState)(""),o=(0,M.c)(a,2),i=o[0],l=o[1],u=(0,V.useState)(""),c=(0,M.c)(u,2),d=c[0],s=c[1],f=(0,V.useState)(!1),g=(0,M.c)(f,2),h=g[0],v=g[1],p="grid-settings",m=H().createElement(H().Fragment,null,H().createElement("div",{className:"".concat(p,"-modal-footer-btns")},H().createElement(z.Button,{onClick:n,type:"second",className:"".concat(p,"-modal-cancel-btn")},(0,W.getLangMsg)("printd.components.key0011")),H().createElement(z.Button,{className:"".concat(p,"-modal-ok-btn"),type:"primary",onClick:function(){if(!(Number(i)>0&&Number(d)>0))return W.console.log("errorTipShow",h),v(!0);h&&v(!1),r({row:i,column:d})}},(0,W.getLangMsg)("printd.components.key0012"))));return H().createElement(z.Modal,{body:H().createElement(km,{className:"".concat(p,"-body"),row:i,setRow:l,column:d,setColumn:s,errorTipShow:h,setErrorTipShow:v}),titleIcon:null,maskClosable:!1,className:"".concat(p,"-modal"),footer:m,width:400,height:500,title:(0,W.getLangMsg)("printd.components.key0017"),destroyOnClose:!0,closable:!0,onCancel:n,onOk:function(){return null},mask:!0,visible:t})};function bm(e,t){var n=void 0!==Jn()&&On()(e)||e["@@iterator"];if(!n){if(zn()(e)||(n=function(e,t){var n;if(!e)return;if("string"==typeof e)return xm(e,t);var r=Sn()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Qn()(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xm(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw o}}}}function xm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Sm(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Im(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?U()(n=Sm(Object(a),!0)).call(n,(function(t){(0,L.c)(e,t,a[t])})):b()?S()(e,b()(a)):U()(r=Sm(Object(a))).call(r,(function(t){B()(e,t,k()(a,t))}))}return e}var Bm="start",Mm="ruler-split-line",Lm="#5797FF",Rm="#D9D9D9",Fm=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Le;return e%20==0?1*(n-16):e%10==0?1*(n-8):1*(n-4)},Tm=function(){return Im(Im({},function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Le;return"x"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"x")?{x:0,y:e}:{y:0,x:e}}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"x")),{},{stroke:Rm,strokeWidth:1,listening:!1})},Nm=(0,V.memo)((0,V.forwardRef)((function(e,t){var n=e.direction,r=e.scale,a=void 0===r?1:r,o=e.pageSize,i=e.ruleWidth,l=void 0===i?Le:i,u=e.marginTop,c=void 0===u?0:u,d=e.marginLeft,s=void 0===d?0:d,f=e.marginBottom,g=void 0===f?0:f,h=e.marginRight,v=void 0===h?0:h,p=(0,V.useRef)(null),m=(0,V.useRef)(null),C=(0,V.useRef)(null),y=(0,V.useRef)(null),E=(0,V.useRef)(null),D=(0,V.useRef)(null),A=zs(a),k=Le+c*A,w=Le+s*A,b=(0,V.useRef)(null),x=(0,V.useRef)(null),S=(0,V.useRef)([]),I=(0,V.useRef)(null),B=(0,V.useRef)(null);(0,V.useImperativeHandle)(t,(function(){return{operateLine:function(e){var t,n,r,a,o,i,l,u,c,d=e.top,s=(e.bottom,e.left),f=(e.right,e.width),g=e.height;null===(t=E.current)||void 0===t||t.position({x:0,y:d+k}),null===(n=I.current)||void 0===n||n.points([s+w,Le,f+s+w,Le]),null===(r=I.current)||void 0===r||r.visible(!0),null===(a=E.current)||void 0===a||a.height(g),null===(o=D.current)||void 0===o||o.position({x:s+w,y:0}),null===(i=B.current)||void 0===i||i.points([Le,d+k,Le,d+k+g]),null===(l=B.current)||void 0===l||l.visible(!0),null===(u=D.current)||void 0===u||u.width(f);var h=[E,D];U()(c=[x,b]).call(c,(function(e,t){var n,r=null===(n=e.current)||void 0===n?void 0:Yn()(n).call(n,".".concat(Mm)).toArray(),a=h[t].current;if(a){var o;U()(o=S.current).call(o,(function(e){e.stroke(Rm)})),S.current=[];var i,l=!1,u=bm(r);try{for(u.s();!(i=u.n()).done;){var c=i.value;if(Cm().Util.haveIntersection(a.getClientRect(),c.getClientRect()))l=!0,S.current.push(c),c.stroke(Lm);else{if(l)break;c.stroke(Rm)}}}catch(e){u.e(e)}finally{u.f()}}})),U()(h).call(h,(function(e){var t,n;null===(t=e.current)||void 0===t||t.visible(!0),null===(n=e.current)||void 0===n||null===(n=n.getLayer())||void 0===n||n.batchDraw()}))},hideLine:function(){var e,t,n,r;null===(e=I.current)||void 0===e||e.visible(!1),null===(t=B.current)||void 0===t||t.visible(!1),U()(n=S.current).call(n,(function(e){e.stroke(Rm)})),U()(r=[E,D]).call(r,(function(e){var t,n;null===(t=e.current)||void 0===t||t.visible(!1),null===(n=e.current)||void 0===n||null===(n=n.getLayer())||void 0===n||n.batchDraw()}))},operateRuler:function(e){var t,n,r,a,o=e.top,i=e.left;void 0!==o&&(null===(t=x.current)||void 0===t||t.position({y:o}),null===(n=x.current)||void 0===n||n.batchDraw());void 0!==i&&(null===(r=b.current)||void 0===r||r.position({x:i}),null===(a=b.current)||void 0===a||a.batchDraw())}}}),[c,s,a]);var M=o.height,L=o.width,R=Math.max(M,c+g)+Re,F=Math.max(L,s+v)+Re;return"x"===n?H().createElement(Qm,{direction:"x",highLineRef:B,scale:a,rectRef:E,marginStart:c,marginEnd:g,realLength:R,ruleWidth:l,frontRef:p,endRef:m,ref:x}):H().createElement(Qm,{direction:"y",highLineRef:I,scale:a,rectRef:D,marginStart:s,marginEnd:v,realLength:F,ruleWidth:l,frontRef:C,endRef:y,ref:b})})));function Gm(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Le;return{x:"x"===e?t:n+r+4,y:"x"===e?n+r+-3:t}}function Zm(e){var t=e.direction,n=e.scale,r=e.seq,a=e.marginLength,o=e.length,i=e.rulerWidth,l=void 0===i?Le:i,u={},c=zs(n);if("x"===t){var d,s={y:r===Bm?0:o-a-Re,x:0,height:a};(0,ie.c)(u,P()(d=C()(s)).call(d,(function(e,t){return e[t]=s[t]*c,"y"===t&&(e[t]+=l),e}),{}),{width:l})}else{var f,g={x:r===Bm?0:o-a-Re,y:0,width:a};(0,ie.c)(u,P()(f=C()(g)).call(f,(function(e,t){return e[t]=g[t]*c,"x"===t&&(e[t]+=l),e}),{}),{height:l})}return(0,ie.c)(u,{listening:!1,fill:"#000000",opacity:.1})}var Qm=(0,V.memo)((0,V.forwardRef)((function(e,t){var n=e.direction,r=e.scale,a=e.marginStart,o=e.marginEnd,i=e.realLength,l=e.ruleWidth,u=void 0===l?Le:l,c=e.frontRef,d=e.endRef,s=e.rectRef,f=e.highLineRef,g=[],h=[],v=zs(r),p=Zm({direction:n,scale:r,seq:Bm,marginLength:a,length:i}),m=Zm({direction:n,scale:r,seq:"end",marginLength:o,length:i}),C="x"===n?[m.x,p.y+p.height,p.x+p.width,p.y+p.height]:[p.x+p.width,0,p.x+p.width,p.height],y="x"===n?[m.x,m.y,m.x+m.width,m.y]:[m.x,0,m.x,m.height];h.push(H().createElement(nv.Line,(0,ie.c)({},p,{opacity:1,fill:"#0E5FD8",dash:[2,2],x:0,y:0,stroke:"#0E5FD8",strokeWidth:2,points:C,key:"".concat("x"===n?"rect_horizontal_start":"rect_vertical_start")})),H().createElement(nv.Line,(0,ie.c)({},m,{opacity:1,fill:"#0E5FD8",dash:[2,2],x:0,y:0,stroke:"#0E5FD8",strokeWidth:2,points:y,key:"".concat("x"===n?"rect_horizontal_end":"rect_vertical_end")})),H().createElement(nv.Rect,(0,ie.c)({ref:s,visible:!1},(0,L.c)((0,L.c)({listening:!1,opacity:1},"x"===n?"width":"height",u),"x"!==n?"width":"height",u),{key:"".concat("x"===n?"rect_horizontal_control":"rect_vertical_control"),fill:"#C7E5FF",x:0,y:0,id:"".concat("x"===n?"rect_horizontal_control":"rect_vertical_control")})));for(var E=0;E<i;E+=2){var D,A=E*v,k="x"===n?[Fm(E,i),A,u,A]:[A,Fm(E,i),A,u];g.push(H().createElement(nv.Line,(0,ie.c)({},Tm(n),{key:Z()(D="".concat(n,"_")).call(D,E),points:k,name:Mm})));if(E%20==0&&E<i-Re){var w,b=Gm(n,4.5,A);g.push(H().createElement(nv.Text,(0,ie.c)({letterSpacing:2,fill:"#999999",rotation:"x"===n?-90:0,fontSize:10,align:"right",text:Math.round(E/1)+"",key:Z()(w="text_".concat("x"===n?"horizontal":"vertical","_")).call(w,E),listening:!1},b)))}}var x="x"===n?[0,0,u,0]:[0,0,0,u];return g.push(H().createElement(nv.Line,(0,ie.c)({},Tm(n),{points:x,ref:c,visible:!1,key:"x"===n?"top-line":"left-line"}))),g.push(H().createElement(nv.Line,(0,ie.c)({},Tm(n),{points:x,ref:d,visible:!1,key:"x"===n?"bottom-line":"right-line"}))),g.push(H().createElement(nv.Line,{stroke:Lm,points:"x"===n?[u,0,u,1]:[0,u,1,u],ref:f,visible:!1,key:"x"===n?"left-high-line":"top-high-line"})),H().createElement(H().Fragment,null,H().createElement(nv.Layer,{ref:t,listening:!1,key:"ruler_".concat(n)},H().createElement(nv.Group,null,(0,W.toArray)(Z()(h).call(h,g)))))}))),Pm=Nm,Jm=n(75240),jm=n(92192),Om=n.n(jm);function Um(e,t){var n=void 0!==Jn()&&On()(e)||e["@@iterator"];if(!n){if(zn()(e)||(n=function(e,t){var n;if(!e)return;if("string"==typeof e)return zm(e,t);var r=Sn()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Qn()(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zm(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw o}}}}function zm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Wm=.09,Km={hLine:[],vLine:[]},Vm="LEFT",Hm="RIGHT",qm="BOTTOM",Ym="TOP",Xm={x:0,y:0,stroke:"#FB2323",fill:"#FB2323",shadowEnabled:!1,strokeWidth:.5,listening:!1};function _m(e){var t={length:0,origin:0,position:0,distance:Om()};if(!e.length)return[t,-1];var n=Om(),r=P()(e).call(e,(function(e,t){var r=(0,Jm.c)(t),a=r[0],o=r[1],i=Sn()(r).call(r,2);if(i.length){var l=Math.max.apply(Math,(0,kn.c)(i))-Math.min.apply(Math,(0,kn.c)(i)),u=Math.min.apply(Math,(0,kn.c)(i));return o<n&&(n=o),Z()(e).call(e,[{length:l,origin:u,position:a,distance:o}])}return e}),[]),a=fe()(r).call(r,(function(e){var t=e.distance;return n===t}));return[-1!==a?r[a]:t,a]}function $m(e,t,n){var r=n.x,a=n.y,o=e.position,i=e.origin,l=e.lineLength;return"x"===t?[o-r,i-a,o-r,i+l-a]:[i-r,o-a,i+l-r,o-a]}var eC=(0,V.memo)((0,V.forwardRef)((function(e,t){var n,r,a=e.lines,o=void 0===a?Km:a,i=e.stageRef,l=(e.marginTop,e.marginLeft,e.rootControlRef),u=e.selectionContext,c=e.getRedundancyXY,d=e.dataContext,s=e.controlGroupRef,f=(0,V.useState)(!0),g=(0,M.c)(f,2),h=g[0],v=g[1],p=(0,V.useState)(o),m=(0,M.c)(p,2),C=m[0],y=m[1];(0,V.useEffect)((function(){return W.eventBus.on("refline",(function(e){h!==e&&v(e)})),function(){W.eventBus.off("refline")}}),[h]);var E=(0,V.useCallback)((function(e){var t=e.selectedNode,n=e.posInfo,r=e.isTransformAction,a=void 0!==r&&r,o=(e.selectedId,e.transformerNewBox),i=n.top,l=n.left,u=n.width,c=n.height,d=n.isNotChangeTopLeft,s=void 0!==d&&d,f={};if(h){if(void 0!==i)if(a){var g=o.x,v=o.height,p=o.rotation,m=o.width,C=o.y;f.rotation=p,f.x=g,f.y=s?C:i,f.height=c,f.width=m,W.console.log("transformer resBox update",{y:i,x:g,height:c,heightArr:[v,c]})}else{var y=t.absolutePosition().x;f.x=y,f.refY=i,f.selectedNode=t}else if(void 0!==l)if(a){var E=o.y,D=o.width,A=o.rotation,k=o.height,w=o.x;f.rotation=A,f.x=s?w:l,f.y=E,f.width=u,f.height=k,W.console.log("transformer resBox update",{y:E,x:l,width:u,widthArr:[D,u]})}else{var b=t.absolutePosition().y;f.refX=l,f.y=b,f.selectedNode=t}return f}}),[h]),D=(0,V.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;if(h&&e){var r,a,o,c,f={},g="",v=d.findControl(null===(r=d.findControl(e))||void 0===r?void 0:r.parentId);if(Bn()(ln).call(ln,null==v?void 0:v.type))return;var p=i.current,m=l.current,C=ov(m),D=null==p?void 0:p.findOne("#".concat(e));if(!D)return void W.console.log("error selectedNode selectedId",D,e);W.console.log("selectedNode",D);var A=(0,ie.c)({},ov(D));if(t){var k=n.x,w=n.y,b=n.height,x=n.width,S=n.activeAnchor;g=S,(0,ie.c)(A,Xs((0,ie.c)({},n,{left:k,top:w,right:k+x,bottom:w+b})))}var I=!t&&wp(ov(D),ov(l.current)),B=A.width,L=A.height,R=A.x,T=A.y,G=R,Q=R+B,P=T,J=T+L,O={x:Math.max(R-6,0),y:C.y,width:Math.min(B+12,C.width),height:C.height},U={x:C.x,y:Math.max(T-6,0),width:C.width,height:Math.min(L+12,C.height)},z=Js()(a=new Array(6)).call(a,{visible:!1,position:0,origin:0,lineLength:0}),K={vLine:JSON.parse(j()(z)),hLine:JSON.parse(j()(z))},V=(null===(o=s.current)||void 0===o?void 0:o.getChildren((function(e){var t;return Bn()(t=e.name().split(" ")).call(t,we)})))||[],H=u.getSelection(),q=[],Y=d.findControl(e);if(!t&&Jf(Y)){var X=Y.parentGridId;X&&q.push(X)}if(!t&&Pf(Y)){var $=Y.subGridId;null!=$&&$.length&&q.push.apply(q,(0,kn.c)($))}var ee,te=Z()(c=[]).call(c,(0,kn.c)(I?V:F()(V).call(V,(function(e){var n;return _n()(n=[O,U]).call(n,(function(n){var r=e.name().split(" "),a=e.id();return!(r.length>0&&Bn()(r).call(r,Be))&&(!!t||!Bn()(H).call(H,a))&&!Bn()(q).call(q,a)&&Cm().Util.haveIntersection(n,ov(e))}))}))),[m]),ne={value:{x:[[],[],[],[],[],[]],y:[[],[],[],[],[],[]]},snapPosConfig:{x:[[],[],[],[],[],[]],y:[[],[],[],[],[],[]]},visible:[],position:[]},re=!1,ae=Um(te);try{for(ae.s();!(ee=ae.n()).done;){var oe=ee.value,le=oe===m;if(oe.id()!=="".concat(e)||le){var ue=ov(oe),ce=ue.width,de=ue.height,se=ue.x,fe=ue.y,ge=se+ce,he=fe+de,ve=!1,pe=!1,me=P+L/2-(fe+de/2),Ce=Math.abs(me),ye=G+B/2-(se+ce/2),Ee=Math.abs(ye),De=fe-J,Ae=Math.abs(De);W.console.log("refLines",fe,J,De,Ae);var ke=he-J,be=Math.abs(ke),xe=fe-P,Se=Math.abs(xe),Ie=he-P,Me=Math.abs(Ie),Le=se-Q,Re=Math.abs(Le),Fe=ge-Q,Te=Math.abs(Fe),Ne=se-G,Ge=Math.abs(Ne),Ze=ge-G,Qe=Math.abs(Ze),Pe=[Ee,Re,Te,Ge,Qe],Je=[Ce,Ae,be,Se,Me],je=(Math.min.apply(Math,Pe),Math.min.apply(Math,Je),Ce<=5),Oe=Ee<=5,Ue=Ae<=5&&!le,ze=be<=5&&!le,We=Se<=5&&!le,Ke=Me<=5&&!le,Ve=Re<=5&&!le,He=Te<=5&&!le,qe=Ge<=5&&!le,Ye=Qe<=5&&!le,Xe=function(e){if(!t)return!0;switch(g){case"top-left":var n;return Bn()(n=[Ym,Vm]).call(n,e);case"top-center":var r;return Bn()(r=[Ym]).call(r,e);case"top-right":var a;return Bn()(a=[Ym,Hm]).call(a,e);case"bottom-left":var o;return Bn()(o=[qm,Vm]).call(o,e);case"bottom-center":var i;return Bn()(i=[qm]).call(i,e);case"bottom-right":var l;return Bn()(l=[qm,Hm]).call(l,e);case"middle-left":var u;return Bn()(u=[Vm]).call(u,e);case"middle-right":var c;return Bn()(c=[Hm]).call(c,e);default:return!1}};if(W.console.log(Re,Te,g),ne.visible=[Ue,ze,We,Ke,je,je,Ve,He,qe,Ye,Oe,Oe],ne.position=[fe,he,fe,he,fe+de/2,fe+de/2,se,ge,se,ge,se+ce/2,se+ce/2],Ue||t&&Ae<=Wm&&!le){var _e={top:fe-L,height:fe-P,isNotChangeTopLeft:!0};W.console.log("refline ts",_e);var $e=!1;!ve&&Xe(qm)&&(ne.snapPosConfig.y[0].push(_e),ve=!0,$e=!0),($e||Ae<=Wm)&&!le&&ne.value.y[0].push([fe,Ae,se,ge,G,Q])}if(We||t&&Se<=Wm&&!le){var et={top:fe,height:J-fe};W.console.log("refline bs",et);var tt=!1;!ve&&Xe(Ym)&&(ne.snapPosConfig.y[3].push(et),ve=!0,tt=!0),(tt||Se<=Wm&&!le)&&ne.value.y[3].push([fe,Se,se,ge,G,Q])}if(ze||t&&be<=Wm&&!le){var nt={top:he-L,height:he-P,isNotChangeTopLeft:!0};W.console.log("refline ts",nt);var rt=!1;!ve&&Xe(qm)&&(ne.snapPosConfig.y[1].push(nt),ve=!0,rt=!0),(rt||be<=Wm&&!le)&&ne.value.y[1].push([he,be,se,ge,G,Q])}if(Ke||t&&Me<=Wm&&!le){var at={top:he,height:J-he};W.console.log("refline bs",at);var ot=!1;!ve&&Xe(Ym)&&(ne.snapPosConfig.y[4].push(at),ve=!0,ot=!0),(ot||Me<=Wm&&!le)&&ne.value.y[4].push([he,Me,se,ge,G,Q])}if(Ve||t&&Re<=Wm&&!le){var it={left:se-B,width:se-G,isNotChangeTopLeft:!0};W.console.log("refline ls",it);var lt=!1;!pe&&Xe(Hm)&&(ne.snapPosConfig.x[0].push(it),pe=!0,lt=!0),(lt||Re<=Wm&&!le)&&ne.value.x[0].push([se,Re,fe,he,P,J])}if(qe||t&&Ge<=Wm&&!le){var ut={left:se,width:Q-se};W.console.log("refline rs",ut);var ct=!1;!pe&&Xe(Vm)&&(ne.snapPosConfig.x[3].push(ut),pe=!0,ct=!0),(ct||Ge<=Wm&&!le)&&ne.value.x[3].push([se,Ge,fe,he,P,J])}if(He||t&&Te<=Wm&&!le){var dt={left:ge-B,width:ge-G,isNotChangeTopLeft:!0};W.console.log("refline ls",dt);var st=!1;!pe&&Xe(Hm)&&(ne.snapPosConfig.x[1].push(dt),pe=!0,st=!0),(st||Te<=Wm&&!le)&&ne.value.x[1].push([ge,Te,fe,he,P,J])}if(Ye||t&&Qe<=Wm&&!le){var ft={left:ge,width:Q-ge};W.console.log("refline rs",ft);var gt=!1;!pe&&Xe(Vm)&&(ne.snapPosConfig.x[4].push(ft),pe=!0,gt=!0),(gt||Qe<=Wm&&!le)&&ne.value.x[4].push([ge,Qe,fe,he,P,J])}if(!t&&je||Ce<=Wm){var ht={top:fe+de/2-L/2};W.console.log("refline hc",ht);var vt=!1;!ve&&Xe("")&&(ne.snapPosConfig.y[2].push(ht),ve=!0,vt=!0),(vt||Ce<=Wm)&&ne.value.y[2].push([fe+de/2,Ce,se,ge,G,Q])}if(!t&&(Oe||Ee<=Wm)){var pt={left:se+ce/2-B/2};W.console.log("refline vc",pt);var mt=!1;!pe&&Xe("")&&(ne.snapPosConfig.x[5].push(pt),pe=!0,mt=!0),(mt||Ee<=Wm)&&ne.value.x[5].push([se+ce/2,Ee,fe,he,P,J])}}}}catch(e){ae.e(e)}finally{ae.f()}for(var Ct=[0,1,3,4,2,0,1,3,4,5],yt={0:1,3:4,1:0,4:3},Et={x_0:[5,3,4],x_1:[5,3,4],x_5:[0,1,3,4],x_3:[0,1,5],x_4:[0,1,5],y_0:[3,4,2],y_1:[3,4,2],y_3:[0,1,2],y_4:[0,1,2],y_2:[0,1,3,4]},Dt=function(){var r=At<Ct.length/2?"y":"x",a=At<Ct.length/2?"hLine":"vLine",o=_m(ne.value[r][Ct[At]]),i=(0,M.c)(o,2),l=i[0],u=l.origin,c=l.length,d=l.position,s=l.distance,g=i[1],h=g;if(!t&&-1!==h){var v,p,m,C,y=yt[Ct[At]],A=Et[Z()(v="".concat(r,"_")).call(v,Ct[At])],k=_.isUndefined(y)?[{distance:s},h]:_m(ne.value[r][y]),w=(0,M.c)(k,2),b=w[0].distance,x=w[1],S=N()(p=F()(m=N()(A).call(A,(function(e){return _m(ne.value[r][e])}))).call(m,(function(e){var t=(0,M.c)(e,2);t[0];return-1!==t[1]}))).call(p,(function(e){return(0,M.c)(e,1)[0].distance}));if(-1!==x&&b<s&&s>Wm&&(h=-1),-1!==h&&S.length>0&&s>Wm)if(_n()(S).call(S,(function(e){return e<=s})))if(h=-1,Math.min.apply(Math,(0,kn.c)(S))===s)Bn()(C=[3,4]).call(C,Ct[At])&&(h=g)}if(0!==u&&0!==c&&-1!==h){!re&&(re=!0);var I=ne.snapPosConfig[r][Ct[At]][g];I&&function(t,r,a){W.console.log("transformer newBox",(0,ie.c)({},n));var o=E({selectedNode:t,posInfo:r,isTransformAction:a,selectedId:e,transformerNewBox:(0,ie.c)({},_.isEmpty(f)?n:f)});(0,ie.c)(f,o)}(D,I,t),K[a][Ct[At]].visible=!0,K[a][Ct[At]].position=d,K[a][Ct[At]].origin=u,K[a][Ct[At]].lineLength=c}},At=0;At<Ct.length;At++)Dt();return W.console.log("refLines",K),y(re?function(){return K}:function(){return Km}),f}}),[h]),A=(0,V.useCallback)((function(){h&&y((function(){return Km}))}),[h]);if((0,V.useImperativeHandle)(t,(function(){return{setRefLines:y,searchRefLines:D,hideRefLines:A}}),[h]),!h)return null;W.console.log("refline",C);var k=c(),w={x:k.x,y:k.y};return H().createElement(H().Fragment,null,N()(n=C.vLine).call(n,(function(e,t){var n=$m(e,"x",w);return H().createElement(nv.Line,(0,ie.c)({},Xm,{name:"ref_line_y_".concat(t),key:"ref_line_y_".concat(t),points:n,visible:e.visible}))})),N()(r=C.hLine).call(r,(function(e,t){var n=$m(e,"y",w);return H().createElement(nv.Line,(0,ie.c)({},Xm,{name:"ref_line_x_".concat(t),key:"ref_line_x_".concat(t),points:n,visible:e.visible}))})))}))),tC=eC,nC=["getEditor","dataContext","definition"];function rC(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function aC(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?U()(n=rC(Object(a),!0)).call(n,(function(t){(0,L.c)(e,t,a[t])})):b()?S()(e,b()(a)):U()(r=rC(Object(a))).call(r,(function(t){B()(e,t,k()(a,t))}))}return e}var oC=(0,V.memo)((0,V.forwardRef)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=e.x,r=void 0===n?0:n,a=e.y,o=void 0===a?0:a,i=(e.marginLeft,e.offsetTop,e.offsetLeft,e.marginTop,e.height),l=e.width,u=e.value,c=e.show,d=e.id,s=e.propertyName,f=e.onSave,g=e.saveBySelf,h=e.hideEditor,v=e.isWrap,p=e.fontSize,m=void 0===p?12:p,C=e.fontFamily,y=void 0===C?"SimSun, arial, sans-serif":C,E=e.fontWeight,D=e.fontStyle,A=e.textDecoration,k=e.paddingTop,w=e.paddingLeft,b=e.paddingRight,x=e.paddingBottom,S=e.backgroundColor,I=e.color,B=e.maxLength,R=e.align,F=(e.verAlignment,e.lineSpace),T=e.letterSpacing;e.save;if(!c)return null;var N=(0,V.useRef)(null),G=(0,V.useState)(u),Z=(0,M.c)(G,2),Q=Z[0],P=Z[1];(0,V.useEffect)((function(){P(u)}),[u]);var J=(0,V.useCallback)((function(){c&&u!==Q&&(P(Q),g?g(d,Q):f(d,(0,L.c)({},s,Q)))}),[c,Q,u]);(0,V.useImperativeHandle)(t,(function(){return{save:J,isInputShow:function(){return!!N.current}}}),[c,Q,u]),(0,V.useEffect)((function(){var e;null===(e=N.current)||void 0===e||e.focus()}),[]);var j=(0,V.useRef)(null);(0,V.useEffect)((function(){var e=function(){J(),h&&h()},t=function(t){if(N.current){for(var n=t.target;n;){if(n===j.current)return;n=n.parentNode}e()}};return document.addEventListener("mousedown",t),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e),document.removeEventListener("mousedown",t)}}),[J]);(0,V.useRef)(u);return H().createElement("div",{ref:j,className:"kdesigner-text-editor",style:{left:r+Wt,top:o+Wt,position:"absolute",height:i,width:l,backgroundColor:S||"#fff",border:"1px solid ".concat(it),overflow:"hidden",boxSizing:"border-box"}},H().createElement("div",{style:{height:i,width:l,fontSize:m,fontFamily:y,wordBreak:v?"break-all":"normal",fontWeight:E,fontStyle:D,textDecoration:A,color:I,paddingLeft:w,paddingTop:k,paddingRight:b,paddingBottom:x,boxSizing:"border-box",outline:"none",display:"flex",alignItems:"flex-start"}},H().createElement(z.TextArea,{autoSize:!0,borderType:"none",value:Q,className:"kdesigner-text-editor",style:{height:"100%",width:"100%",textAlign:R,lineSpace:F,letterSpacing:T,fontSize:m,fontFamily:y,wordBreak:v?"break-all":"normal",fontWeight:E,fontStyle:D,textDecoration:A,color:I,paddingTop:2,paddingLeft:2,paddingRight:0,paddingBottom:0,backgroundColor:S||"#fff"},onChange:function(e){P(e.target.value||"")},maxLength:B,count:!!B,onBlur:function(e){J()},ref:N,pressEnterSwitch:!1,onFocus:function(e){var t;null===(t=e.target)||void 0===t||t.setSelectionRange((null==Q?void 0:Q.length)||0,(null==Q?void 0:Q.length)||0)}})))}))),iC=function(e){var t=e.getEditor,n=void 0===t?function(){return oC}:t,r=e.dataContext,a=e.definition,o=(0,Wn.c)(e,nC),i=(0,V.useCallback)((function(e,t){var n=r.findControl(e),o=n.dsType;if(3===n.lineWrapRule&&t.bindText&&(t.bindText=t.bindText.replace(/[\r\n]/g,"")),"Formula"===o)return r.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[e,aC(aC({},t),{},{viewText:""})]]));var i=rr(t),l=i.isBindField,u=i.bindField,c=aC(aC({},t),{},{bindField:"",dataSource:"",viewText:"",dsType:""});if(l){var d=nr(u,a);if(!d)return W.eventBus.emit("input-query",{id:e,value:!0}),void r.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[e,c]]));W.eventBus.emit("input-query",{id:e,value:!1});var s=d.dataSource,f=d.key,g=d.viewText,h=d.dsType;r.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[e,aC(aC({},t),{},{bindField:f,dataSource:s,viewText:"=$".concat(g),dsType:h})]]))}else W.eventBus.emit("input-query",{id:e,value:!1}),r.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[e,c]]))}),[r]),l=(0,V.useState)(!1),u=(0,M.c)(l,2),c=u[0],d=u[1],s=(0,V.useState)({}),f=(0,M.c)(s,2),g=f[0],h=f[1],v=(0,V.useRef)(null),p=(0,V.useRef)(null),m=(0,V.useCallback)((function(){d(!0)}),[]),C=(0,V.useCallback)((function(){var e,t;null!==(e=p.current)&&void 0!==e&&e.isInputShow()&&(null===(t=p.current)||void 0===t||t.save(),d(!1))}),[]),y=(0,V.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.shapeRef;v.current=null==t?void 0:t.current,h(e)}),[]),E=n();return{showEditor:m,hideEditor:C,editorElement:H().createElement(E,(0,ie.c)({ref:p,show:c,onSave:i,hideEditor:C},o,g)),setEditorPosition:y,inputNodeRef:v}},lC={0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,TAB:9,ENTER:13,SHIFT:16,CONTROL:17,ALT:18,ESCAPE:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,ARROWLEFT:37,ARROWUP:38,ARROWRIGHT:39,ARROWDOWN:40,BACKSPACE:8,DELETE:46,META:91,"*":106,"+":107,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"]":221,CTRL:17,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,SEMICOLON:186,EQUAL:187,COMMA:188,MINUS:189,PERIOD:190,SLASH:191,BACKQUOTE:192,BRACKETLEFT:219,BRACKETRIGHT:221,BACKSLASH:11,QUOTE:229,PAD0:96,PAD1:97,PAD2:98,PAD3:99,PAD4:100,PAD5:101,PAD6:102,PAD7:103,PAD8:104,PAD9:105};window,document;var uC,cC,dC,sC="";window.addEventListener?(uC="addEventListener",dC="removeEventListener"):(uC="attachEvent",dC="detachEvent",sC="on"),cC="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";var fC=function(e){return function(t){!t&&(t=window.event);var n={originalEvent:t,target:t.target||t.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==t.type?0:1,deltaX:0,deltaZ:0,preventDefault:function(){t.preventDefault?t.preventDefault():t.returnValue=!1}};return"mousewheel"==cC?(n.deltaY=-1/40*t.wheelDelta,t.wheelDeltaX&&(n.deltaX=-1/40*t.wheelDeltaX)):n.deltaY=t.detail,e(n)}};function gC(e,t,n,r){var a=fC(n);return e[uC](sC+t,"wheel"==cC?n:a,r||!1),function(){e[dC](sC+t,"wheel"==cC?n:a,r||!1)}}var hC=function(e,t){(0,V.useEffect)((function(){t();var e=function(e,t,n){return gC(e,"DOMMouseScroll"==cC?"MozMousePixelScroll":cC,t,n)}(document,(function(e){Nv(e)&&t()})),n=function(e){var n,r=e.keyCode||e.which;Nv(e)&&Bn()(n=[lC[0],lC["+"],lC["-"]]).call(n,r)&&t()};return document.addEventListener("keydown",n),function(){e&&e(),document.removeEventListener("keydown",n)}}),e)},vC=["title"];function pC(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function mC(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?U()(n=pC(Object(a),!0)).call(n,(function(t){(0,L.c)(e,t,a[t])})):b()?S()(e,b()(a)):U()(r=pC(Object(a))).call(r,(function(t){B()(e,t,k()(a,t))}))}return e}var CC=-100;function yC(e,t){var n;return[e,Y().flattenDeep(F()(n=N()(t).call(t,(function(n){var r=n.id;if(n.parentId===e)return yC(r,t)}))).call(n,Boolean))]}var EC=function(e,t,n,r){var a,o,i;if(!(e.length<=2)){var l=ia()(a=Sn()(e).call(e)).call(a),u=Math.max.apply(null,N()(e).call(e,(function(e){return e[n]+e[r]}))),c=Yn()(l).call(l,(function(e){return e[n]+e[r]===u})),d=Math.min.apply(null,N()(e).call(e,(function(e){return e[n]}))),s=Yn()(e).call(e,(function(e){return e[n]===d})),f=ef()(o=Sn()(i=F()(e).call(e,(function(e){var t;return!Bn()(t=[s[nt],c[nt]]).call(t,e[nt])}))).call(i)).call(o,(function(e,t){return e[n]-t[n]})),g=P()(e).call(e,(function(e,t){return e+t[r]}),0),h=d+s[r],v=u-d,p=0;if(g>v){var m=v/(e.length-1),C=N()(f).call(f,(function(e,t){var r=Hs(d+m*(t+1),1);return r===e[n]&&p++,[e[nt],(0,L.c)({},n,r)]}));if(p===f.length)return;t.batchUpdateControlPropertyValues((0,W.createUpdateAction)(C))}else{var y=(v-s[r]-c[r]-P()(f).call(f,(function(e,t){return e+t[r]}),0))/(2+f.length-1),E=h,D=N()(f).call(f,(function(e,t){var a=Hs(E+y,1);return E+=y+e[r],e[n]===a&&p++,[e[nt],(0,L.c)({},n,a)]}));if(p===f.length)return;t.batchUpdateControlPropertyValues((0,W.createUpdateAction)(D))}}},DC=(0,V.memo)((0,V.forwardRef)((function(e,t){var n,r,a,o,i,l,u,c,d,s=(0,V.useContext)(En),f=s.setMessage,g=(s.scaleRef,s.asistantBorderRef),h=s.handlePassGridActionGuide,v=s.isFirstUseGrid,p=s.onValid,m=(0,V.useContext)(W.GlobalConfigContext),y=m.env,E=m.keywordMapping,D=(0,V.useState)(1),A=(0,M.c)(D,2),k=A[0],w=A[1],b=(0,V.useState)((function(){return+(window.devicePixelRatio||1).toFixed(2)})),x=(0,M.c)(b,2),S=x[0],I=x[1],B=(0,V.useRef)(null),R=((0,V.useRef)(null),(0,V.useRef)(null)),T=(0,V.useRef)(null),G=(0,V.useRef)(null),Q=(0,V.useRef)(null),J=(0,V.useRef)(null),O=(0,V.useRef)(null),K=(0,V.useRef)(null),q=(0,V.useRef)(null),X=(0,V.useRef)(null),_=(0,V.useRef)(null),$=(0,V.useRef)(null),ee=(0,V.useRef)(null),te=(0,V.useRef)({isDrag:!1,yPos:0}),ne=(0,V.useRef)(null),re=(0,V.useRef)(null),ae=(0,V.useContext)(W.GlobalConfigContext),oe=ae.previewImageUrl,le=(ae.uploadImageUrl,e.fieldSizeCacher),ce=le.setFieldSizeCache,de=le.getFieldSizeCache,se=null==e?void 0:e.data.key,fe=(0,V.useMemo)((function(){return de(se)||{}}),[se]),ge=(0,V.useCallback)((function(e){var t=new(Cm().Stage)({container:"shadowCanvas",width:window.innerWidth,height:window.innerHeight}),n=new(Cm().Layer);t.add(n);var r=new(Cm().Text)(e),a=r.height(),o=r.width();return t.destroy(),{height:a,width:o}}),[]),he=(0,V.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;if(ne.current){var r;if(fe[n]){var a=fe[n],o=a.offsetWidth,i=a.offsetHeight,l=a.text,u=a.style.width,c=t.width;if(l===e&&u===c)return{width:o,height:i}}ne.current.innerText=e,U()(r=C()(t)).call(r,(function(e){ne.current.style[e]=Y().isString(t[e])?t[e]:t[e]+"px"}));var d=ne.current,s=d.offsetWidth,f=d.offsetHeight;return fe[n]={text:e,style:t,width:s,height:f},ce(se,fe),{width:s,height:f}}}),[le]),ve=(0,V.useRef)(null),pe=(0,V.useContext)(W.DataFactoryContext),me=pe.dataFactory,Ce=pe.modelFactory,ye=pe.controlMetaInfo,Ee=ve.current||{},De=Ee.offsetHeight,Ae=Ee.offsetWidth,ke=(0,V.useState)({show:!1}),be=(0,M.c)(ke,2),xe=be[0],Se=be[1],Ie=(0,V.useState)({show:!1}),Be=(0,M.c)(Ie,2),Me=Be[0],Fe=Be[1],Te=(0,V.useState)({show:!1}),Ne=(0,M.c)(Te,2),Ge=Ne[0],Ze=Ne[1],Qe=(0,V.useState)({show:!1}),Pe=(0,M.c)(Qe,2),Je=Pe[0],je=Pe[1],Oe=e.children,Ue=e.appState,ze=e.deleteSelectionControl,We=e.data,rt=We.id,at=We.width,ot=We.height,it=We.marginTop,lt=We.marginLeft,ut=We.marginBottom,ct=We.marginRight,dt=(We.paperDirection,We.bgImgRcId),st=Math.max(ot-Math.max(it,0)-Math.max(ut,0),0),ft=Math.max(at-Math.max(lt,0)-Math.max(ct,0),0),vt=Math.max(Ws(at,k),Ae?Ae-20:0),pt=Math.max(Ws(ot,k),De?De-20:0),mt=Math.max(st,0)+Math.max(it,0)+Math.max(ut,0),Ct=Math.max(ft,0)+Math.max(lt,0)+Math.max(ct,0),yt=Ue.navToolRef,Et=void 0===yt?{}:yt,Dt=Ue.canvasRef,At=Ue.meta,kt=void 0===At?[]:At,wt=Ue.definition,bt=void 0===wt?{}:wt,xt=Ue.activedSelectId,St=Ue.isMultiKeyActiveWhenSelectedRef,It=dt?Z()(n="".concat(oe)).call(n,dt):"";(0,V.useEffect)((function(){var e=ve.current||{},t=e.offsetHeight,n=e.offsetWidth;T.current.style.width=Math.max(Ws(ft,k),null!=n?n:0),T.current.style.height=Math.max(Ws(st,k),null!=t?t:0),Gn((function(e){return e+1}))}),[]);var Bt=(0,V.useContext)(W.SelectionContext),Mt=(0,V.useContext)(W.DataContext),Lt=Mt.getRootId(),Rt=me,Ft=Pp({selectionContext:Bt,dataContext:Mt,rulerRef:Pn,navToolRef:Et,activedSelectId:xt},Lt).handleMouseDown,Tt=(0,V.useMemo)((function(){var e,t;return"SubDataGrid"===(null===(e=Mt.findControl(null===(t=Mt.findControl(xt))||void 0===t?void 0:t.parentId))||void 0===e?void 0:e.type)?{isContainer:!1,accept:""}:(0,W.getControlIsContainer)(ye,Mt.findControl(xt),E)}),[xt,ye]),Nt=(Tt.isContainer,Tt.accept),Gt=(0,V.useContext)(As),Zt=(0,Gt.getPrefixCls)(Gt.prefixCls,"print-designer"),Qt=(0,V.useRef)({isDragging:!1,startX:0,startY:0}),Pt=(0,V.useRef)(null),Jt=(0,V.useRef)(null),jt=(0,V.useRef)(null),Ot=function(e,t){var n,r;if("CardGrid"===(null==xe?void 0:xe.controlType)){var a=(null==xe?void 0:xe.gridInfo)||{};return Ut(e,a),zt(),void Se({show:!1})}var o=e.length,i=function(e){return(null==t?void 0:t[e])||xe[e]},l=i("controlType"),u=i("transferData");if("DataGrid"===l&&ft/o<5)return f((0,W.getLangMsg)("printd.grid.key0092"));if(u){var c=u.width;"right"===u.subGridDirection&&c/o<10&&(u.width=10*o)}var d=N()(e).call(e,(function(e){var t,n=e.key,r=e.InitAttr,a=void 0===r?{}:r,o=$n(n,bt);if(!o)return{};var i=o.dataSource,l=o.dataSourceText,u=o.ancestorTitle,c=o.key,d=o.title,s=o.dsType,f=o.ZeroShow,g=o.IgnoreTailZero,h=P()(t=C()(a)).call(t,(function(e,t){return e[Y().camelCase(t)]=a[t],e}),{});return h.zeroShow=f,h.ignoreTailZero=g,mC({bindText:"=$".concat(u),bindField:c,dataSource:i,dataSourceText:l,viewText:"=$".concat(d),dsType:s},h)})),s=Df(me,Ce),g=Mt.findControlByCondition((function(e){return"Header"===e.type})),h=te.current,v=h.isDrag,p=h.yPos,m=mC({dataSource:(null===(n=d[0])||void 0===n?void 0:n.dataSource)||"",dataSourceText:(null===(r=d[0])||void 0===r?void 0:r.dataSourceText)||"",width:ft},v?{y:p}:{}),y=Mt.findControl(xt),E=Yf(y)&&y.id,D=s({type:i("controlType")||"DataGrid",parentId:E||Lt,parentItem:sh(Mt.findControl(Lt)),cellData:d,transferData:u?(0,ie.c)(m,u):m});g&&g.length&&D[0].y<g[0].height&&(D[0].y=g[0].height+D[0].y),i("resolve")([{type:W.ActionType.ADD,value:D}]),zt(),Se({show:!1})},Ut=function(e,t){var n=t.row,r=t.column;if(ft/r<5)return f((0,W.getLangMsg)("printd.grid.key0094"));var a=Af(me,Ce),o=Mt.findControlByCondition((function(e){return"Header"===e.type})),i=te.current,l=i.isDrag,u=i.yPos,c=e.dataSource,d=e.dataSourceText,s=mC({width:ft,height:8*n,dataSource:c,dataSourceText:d},l?{y:u}:{}),g=a({type:"CardGrid",parentId:Lt,gridInfo:t,transferData:s});o&&o.length&&g[0].y<o[0].height&&(g[0].y=o[0].height+g[0].y),(0,xe.resolve)([{type:W.ActionType.ADD,value:g}])},zt=function(){te.current={isDrag:!1,yPos:0}};(0,V.useEffect)((function(){return W.eventBus.on("grid-guide",(function(e){!function(e,t){_s(Mt)?Ot([{},{},{}],t):e(mC({show:!0},t))}(Se,e)})),W.eventBus.on("layoutGrid-setting",(function(e){Fe(mC({show:!0},e))})),W.eventBus.on("beforeChangeLang",(function(e){Ze(mC({show:!0},e))})),W.eventBus.on("card-setting",(function(e){je(mC({show:!0},e))})),W.eventBus.on("beforeChangeGridFooter",(function(e){var t=e.parentGridId,n=e.tableTail,r=e.resolve;e.reject;if(n){var a=Mt.findControl(t),o=Rt({type:"TableTail",parentId:Lt,transferData:{x:a.x,y:a.y+a.height,width:a.width,parentGridId:t}});r([{type:W.ActionType.ADD,value:o},{type:W.ActionType.UPDATE,value:[[a.id,{hasTableTail:n,tableTailId:o.id}]]}])}else{var i=Mt.findControl(t);r([{type:W.ActionType.DELETE,value:i.tableTailId},{type:W.ActionType.UPDATE,value:[[i.id,{hasTableTail:n,tableTailId:""}]]}])}})),function(){W.eventBus.off("grid-guide"),W.eventBus.off("layoutGrid-setting"),W.eventBus.off("beforeChangeLang"),W.eventBus.off("card-setting"),W.eventBus.off("beforeChangeGridFooter")}}),[xt,Ot]);var Kt=(0,V.useCallback)((function(){var e=Pt.current;if(e){var t,n,r,a=e.offsetTop,o=e.offsetLeft;(0,ie.c)(qt.current,{offsetTop:a,offsetLeft:o}),K.current.style.top=Math.max(null!=a?a:0,Wt)+"px",X.current.style.left=Math.max(null!=o?o:0,Wt)+"px",null===(t=G.current)||void 0===t||t.x(o-Wt),null===(n=G.current)||void 0===n||n.y(a-Wt),null===(r=G.current)||void 0===r||r.batchDraw(),Gn((function(e){return e+1}))}}),[]);(0,V.useEffect)((function(){Kt()}),[]),(0,W.useResizeObserver)(Pt.current,Kt),(0,W.useResizeObserver)(ve.current,Kt);var Vt=[jt,B,Jt,$],Ht=function(e){return _n()(Vt).call(Vt,(function(t){return t.current===e}))},qt=(0,V.useRef)({offsetLeft:0,offsetTop:0}),Yt=(0,V.useCallback)((function(){var e,t,n,r;return{x:(null!==(e=null===(t=qt.current)||void 0===t?void 0:t.offsetLeft)&&void 0!==e?e:0)-Wt+Ws(lt,k),y:(null!==(n=null===(r=qt.current)||void 0===r?void 0:r.offsetTop)&&void 0!==n?n:0)-Wt+Ws(it,k)}}),[lt,it,k]),$t=function(){var e=localStorage.getItem(fn);if(e){var t=JSON.parse(e),n=t.dataSource,r=t.bindField,a=t.bindText,o=t.viewText,i=or(er(n,r),bt);i?function(e,t,n,r,a){var o=e.isDataGridDs,i=e.dsType,l=e.isSubDataGridDs,u=e.ViewName,c=e.Name,d=e.bindField,s=e.dataSource,f=e.dataSourceText,g=t.statType,h=t.cellType,v=t.parentId,p=t.id,m=r.viewText,C=u||c,y=bf[h],E=n.findControl(v),D=n.findControl(v),A=D.type,k=D.dataSource;if(Pf(E)||Jf(E)){var w,b;if("Normal"===h&&!Bn()(y).call(y,i))return a((0,W.getLangMsg)("printd.grid.key0039"));if("Normal"!==h&&"Statistic"!==h||n.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[p,mf(mf({},r),{},{viewText:"Statistic"===h&&"noStat"!==g?Z()(b="=".concat(g,"(")).call(b,C,")"):m})]])),Bn()(w=["Detail","Group"]).call(w,h)){if("DataGrid"===A&&!("=getRowNumber()"===d||k&&s===k||!k&&o))return a((0,W.getLangMsg)("printd.grid.key0040"));if("SubDataGrid"===A&&!("=getRowNumber()"===d||k&&s===k||!k&&l))return a((0,W.getLangMsg)("printd.grid.key0041"));var x=[[p,r]];k||x.push([v,{dataSource:s,dataSourceText:f}]),n.batchUpdateControlPropertyValues((0,W.createUpdateAction)(x))}}else n.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[p,r]]))}(i,Un,Mt,{dataSource:n,bindField:r,bindText:a,viewText:o},f):Mt.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[xt,{dataSource:n,bindField:r,bindText:a,viewText:o}]]))}},tn=(0,V.useCallback)((function(e){var t=e.keyCode||e.which,n=Nv(e),r=Bt.getSelection(),a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;return F()(e).call(e,(function(e){var t,n=Mt.findControl(e);return!_n()(t=[uh,Zf,ch,Jf]).call(t,(function(e){return e(n)}))}))},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.x,r=void 0===n?0:n,a=t.y,o=void 0===a?0:a,i=Mt.findControl(e),l=i.x,u=i.y,c=i.parentId;return function(e){var t=e.position,n=e.id,r=e.parentId,a=e.rootId,o=e.dataContext,i=Uf(o,n),l=i.width,u=void 0===l?0:l,c=i.height,d=void 0===c?0:c,s=Of(o),f=s.width,g=s.height,h=Xs(r!==a?Uf(o,r):Of(o)),v=h.x,p=void 0===v?0:v,m=h.y,C=void 0===m?0:m,y=h.right,E=void 0===y?f:y,D=h.bottom,A=void 0===D?g:D,k=t.x,w=t.y;if(u>f||d>g)return{x:k,y:w};k<p&&(k=p),k+u>E&&(k=E-u);var b=w+C;return w+C<C&&(b=0),w+C>C&&(b-=C),w+C+d>A&&(b=A-C-d),{x:k,y:b}}({position:{x:l+r,y:u+o},id:e,rootId:Lt,parentId:c,dataContext:Mt,addXY:{x:r,y:o}})},i=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;return _n()(e=Mt.findControl(t)).call(e,Zf)};switch(t){case lC.BACKSPACE:case lC.DELETE:ze();break;case lC.A:if(n){var l,u=Mt.getData().items;Bt.setSelect(N()(l=F()(u).call(u,(function(e){return e.parentId===Lt}))).call(l,(function(e){return e.id})))}break;case lC.C:if(n){var c=Bt.getSelection();if(c.length){if(i())return 1===c.length?function(){try{localStorage.setItem(fn,j()(Un))}catch(e){localStorage.clear(),localStorage.setItem(fn,Un)}}():localStorage.removeItem(sn);var d=Mt.getData().items,s=Y().flattenDeep(N()(c).call(c,(function(e){return yC(e,d)}))),f=j()({selection:c,items:N()(s).call(s,(function(e){return Mt.findControl(e)}))});try{localStorage.setItem(sn,f)}catch(e){localStorage.removeItem(sn),localStorage.setItem(sn,f)}}}break;case lC.V:if(n){var g=Bt.getSelection();if(i())return 1===g.length&&$t();var h=localStorage.getItem(sn);if(h){var v=JSON.parse(h),p=v.selection,m=v.items,y=Et.current.copyControl({selection:p,items:N()(m).call(m,(function(e){return e.tableTailId&&(e.tableTailId=""),e}))}),E=F()(y).call(y,(function(e){var t;return Bn()(t=C()(ye)).call(t,e.type)}));(null==E?void 0:E.length)>0&&Et.current.pasteControl(E)}}break;case lC.D:n&&Et.current.copyAndPasteControl();break;case lC.Z:n&&(Et.current.canvasUndo(),ue()((function(){T.current.focus()})));break;case lC.Y:n&&(Et.current.canvasRedo(),ue()((function(){T.current.focus()})));break;case lC.ARROWUP:var D;if(i())return;Mt.batchUpdateControlPropertyValues((0,W.createUpdateAction)(N()(D=a()).call(D,(function(e){var t=o(e,{y:-1}),n=(t.x,t.y),r=Mt.findControl(e),a=r.parentId,i=r.y;return"TableTail"===(Mt.findControl(a)||{}).type&&(n=i-1>0?i-1:0),[e,{y:n}]}))));break;case lC.ARROWDOWN:var A;if(i())return;Mt.batchUpdateControlPropertyValues((0,W.createUpdateAction)(N()(A=a()).call(A,(function(e){var t=o(e,{y:1}),n=(t.x,t.y),r=Mt.findControl(e),a=r.parentId,i=r.y,l=r.height,u=Mt.findControl(a)||{},c=u.height;return"TableTail"===u.type&&(n=l+i+1>c?i:+i+1),[e,{y:n}]}))));break;case lC.ARROWLEFT:var k;if(i())return;Mt.batchUpdateControlPropertyValues((0,W.createUpdateAction)(N()(k=a()).call(k,(function(e){var t=o(e,{x:-1}),n=t.x;t.y;return[e,{x:n}]}))));break;case lC.ARROWRIGHT:var w;if(i())return;Mt.batchUpdateControlPropertyValues((0,W.createUpdateAction)(N()(w=a()).call(w,(function(e){var t=o(e,{x:1}),n=t.x;t.y;return[e,{x:n}]}))))}}),[xt]),nn=(0,V.useCallback)(Y().throttle(tn,200,{trailing:!0}),[tn]),rn=function(e){var t,n=e?Mt.findControl(e):null,r=(0,W.getControlIsContainer)(ye,n||{},E).isContainer;if("SubDataGrid"===(null===(t=Mt.findControl(Mt.findControl(xt).parentId))||void 0===t?void 0:t.type))return!1;for(;n&&!r&&n.parentId!==Lt;){n=Mt.findControl(n.parentId)}return n},an=function(e,t,n){var r,a,o,i=e.Id,l=(t.offsetX,t.offsetY,null==n||null===(r=n.attrs)||void 0===r?void 0:r.id),u=rn(l),c=(0,W.getControlIsContainer)(ye,u||{},E),d=c.isContainer,s=c.accept;if("SubDataGrid"===(null===(a=Mt.findControl(null===(o=Mt.findControl(l))||void 0===o?void 0:o.parentId))||void 0===a?void 0:a.type)&&((0,pm.c)("isContainer"),(0,pm.c)("accept")),!d||!s||Bn()(s).call(s,i)){var f=Rt({type:i,parentId:d?u.id:Lt,transferData:{x:t.x,y:d?t.y-u.y:t.y}});if(f){var g=f.x,h=f.y,v=f.width,p=f.height;g+v>=ft&&(f.x=ft-v),h+p>st&&(f.y=st-p);var m=Mt.findControlByCondition((function(e){return"Footer"===e.type}))[0];m&&f.parentId===Lt&&h+p>m.y&&Ef([f],"y",m.y-p),f.x=f.x<0?0:f.x,Mt.addControl((0,W.createAddAction)(f)).then((function(e){var t=e[0].value;Bt.setSelect(zn()(t)?[t[0].id]:[t.id])}))}}},on=function(e,t,n,r){var a,o,i;e.key=e.nodeKey;var l=e.type,u=void 0===l?"Text":l,c=e.Items,d=e.InitAttr,s=void 0===d?{}:d;if(!c){var g=ir(e,bt),h=g.title,v=(0,Wn.c)(g,vC),p=(0,ie.c)({},P()(a=C()(s)).call(a,(function(e,t){return e[Y().camelCase(t)]=s[t],e}),{}),v),m=null==n||null===(o=n.attrs)||void 0===o?void 0:o.id,y=rn(m),D=(0,W.getControlIsContainer)(ye,y||{},E),A=D.isContainer,k=D.accept;if("SubDataGrid"===(null===(i=Mt.findControl(Mt.findControl(xt).parentId))||void 0===i?void 0:i.type)&&(A=!1,k=""),"Text"===u){if(y&&Xf(y))return xf(e,y,Mt,{initAttr:p,title:h},f,bt);if(A&&k&&!Bn()(k).call(k,u))return;if(y&&qf(y)){var w=cr(Mt,m,"CardGrid");if(w){var b=br(w,bt);if(!Sr(b,null==g?void 0:g.dataSource))return f((0,W.getLangMsg)("printd.grid.key0095"))}var x,S=y.parentId,I=y.statType,B=Mt.findControl(S).parentId,M=Mt.findControl(B),L="=$".concat(h);if(M&&"TableTail"===M.type)L="noStat"!==I?Z()(x="=".concat(I,"(")).call(x,h,")"):"=$".concat(h);return wf(m,Mt,mC(mC({},p),{},{viewText:L}))}var R=[];if(r){var F=Rt({type:u,parentId:A?y.id:Lt,transferData:{bindText:h,x:t.x,y:A?t.y-y.y:t.y}}),T=F.x,G=F.y,Q=F.width,J=F.height;T+Q>=ft&&(F.x=ft-2*Q),G+J>st&&(F.y=st-J);var j=Rt({type:u,parentId:A?y.id:Lt,transferData:(0,ie.c)({},p,{x:(+F.x||0)+(+F.width||0),y:+F.y||0,viewText:"=$".concat(h)})});R=[F,j]}else{var O=Rt({type:u,parentId:A?y.id:Lt,transferData:mC(mC({},p),{},{x:t.x,y:A?t.y-y.y:t.y,viewText:"=$".concat(h)})}),U=O.x,z=O.y,K=O.width,V=O.height;U+K>=ft&&(O.x=ft-K),z+V>st&&(O.y=st-V),R=[O]}var H=Mt.findControlByCondition((function(e){return"Footer"===e.type}))[0],q=R[0],X=q.y,_=q.height;H&&R[0].parentId===Lt&&X+_>H.y&&Ef(R,"y",H.y-_),Mt.addControl((0,W.createAddAction)(R,{addType:"addField"})).then((function(){Bt.setSelect(N()(R).call(R,(function(e){return e.id})))}))}else{if(u===hn.richText&&y){if(Xf(y))return xf(e,y,Mt,{initAttr:p,title:h},f,bt);if(qf(y)){var $=cr(Mt,m,"CardGrid");if($){var ee=br($,bt);if(!Sr(ee,null==g?void 0:g.dataSource))return f((0,W.getLangMsg)("printd.grid.key0095"))}return wf(m,Mt,mC(mC({},p),{},{viewText:"=$".concat(h)}))}}if(y&&qf(y)){var te=y.id,ne=cr(Mt,te,"CardGrid");if(ne){var re=br(ne,bt);if(!Sr(re,null==g?void 0:g.dataSource))return f((0,W.getLangMsg)("printd.grid.key0096"))}}if(A&&Nt&&!Bn()(Nt).call(Nt,u))return;var ae=Rt({type:u,parentId:A?y.id:Lt,transferData:mC(mC({},p),{},{x:t.x,y:A?t.y-y.y:t.y})}),oe=ae.x,le=ae.y,ue=ae.width,ce=ae.height;oe+ue>=ft&&(ae.x=ft-ue),le+ce>st&&(ae.y=st-ce),Mt.addControl((0,W.createAddAction)(ae)).then((function(){Bt.setSelect([ae.id])}))}}},ln=(0,V.useRef)({isOutMouseUp:!1}),un=(0,V.useCallback)((function(){if(!0===Qt.current.isDragging){var e,t,n,r;Qt.current.isDragging=!1;var a=_.current,o=ov(a),i=null===(e=B.current)||void 0===e?void 0:Yn()(e).call(e,".".concat(we)).toArray(),l=F()(t=N()(n=F()(i).call(i,(function(e){e.name().split(" ");return Cm().Util.haveIntersection(o,ov(e))&&e.getParent()===Q.current}))).call(n,(function(e){return e.id()}))).call(t,Boolean);l.length>0&&Bt.setSelect(l),a.x(CC),a.y(CC),a.width(CC),a.height(CC),a.visible(!1),null==a||null===(r=a.getLayer())||void 0===r||r.batchDraw()}}),[]);(0,V.useEffect)((function(){var e,t=function(){ln.current.isOutMouseUp=!0},n=function(e){var t,n,r,a,o,i;if(("INPUT"!==(null===(t=e.target)||void 0===t?void 0:t.tagName)||"checkbox"===(null===(n=e.target)||void 0===n?void 0:n.type))&&"TEXTAREA"!==(null===(r=e.target)||void 0===r?void 0:r.tagName)&&"true"!==(null===(a=e.target)||void 0===a?void 0:a.contentEditable)){var l=e.keyCode||e.which,u=Nv(e);(Bn()(o=[lC.ARROWDOWN,lC.ARROWLEFT,lC.ARROWRIGHT,lC.ARROWUP,lC.DELETE,lC.BACKSPACE]).call(o,l)||u&&Bn()(i=[lC.D,lC.A]).call(i,l))&&e.preventDefault(),nn(e)}};return null===(e=document.querySelector(".print-designer-root"))||void 0===e||e.addEventListener("keydown",n),window.addEventListener("mouseup",t),function(){var e;null===(e=document.querySelector(".print-designer-root"))||void 0===e||e.removeEventListener("keydown",n),window.removeEventListener("mouseup",t)}}),[xt,Lt,un,nn]),(0,V.useEffect)((function(){var e=function(e){e.stopPropagation()};return window.addEventListener("drop",e),function(){window.removeEventListener("drop",e)}}),[]),(0,V.useEffect)((function(){return W.eventBus.on("scale",(function(e){e!==k&&w(e)})),function(){W.eventBus.off("scale")}}),[k]);var cn=(0,V.useState)((function(){return(null==g?void 0:g.current)||!1})),dn=(0,M.c)(cn,2),gn=dn[0],vn=dn[1];(0,V.useEffect)((function(){return W.eventBus.on("contextStrokeEnabled",(function(e){e!==gn&&vn(e)})),function(){W.eventBus.off("contextStrokeEnabled")}}),[gn]);var pn=(0,V.useCallback)((function(){var e=ve.current,t=e.offsetWidth,n=e.offsetHeight;if(e){var r,a=function(e,t,n,r){return{justifyContent:e&&e<n?"flex-start":"center",alignItems:t&&t<r?"flex-start":"center"}}(t,n,Ws(Ct,k),Ws(mt,k)),o=a.justifyContent,i=a.alignItems,l=!1;e.style.justifyContent!==o&&(e.style.justifyContent=o,l=!0),e.style.alignItems!==i&&(e.style.alignItems=i,l=!0),l&&Gn((function(e){return e+1})),U()(r=wn.current).call(r,(function(e){return e()})),Kt(),Dn()}}),[k,Ct,mt]);(0,V.useEffect)((function(){return window.addEventListener("resize",pn),function(){window.removeEventListener("resize",pn)}}),[ft,st,k,S,Ct,mt]),(0,V.useEffect)((function(){pn()}),[k,ft,st,Ct,mt]);var mn=(0,V.useRef)([]),Cn=(0,V.useCallback)((function(){var e,t=(window.devicePixelRatio||1).toFixed(2);Y().isEqual(+t,+S)||I(+t),pn(),Dn(),U()(e=mn.current).call(e,(function(e){return e(k)}))}),[S,ft,st,k,Ct,mt]);hC([S,ft,st,k,Ct,mt],Cn),(0,V.useImperativeHandle)(t,(function(){return{stage:B.current}}),[]);var Dn=(0,V.useCallback)((function(){ue()((function(){var e,t;null===(e=B.current)||void 0===e||U()(t=Yn()(e).call(e,"Transformer").toArray()).call(t,(function(e){null==e||e.forceUpdate()}))}))}),[]);(0,V.useEffect)((function(){var e=function(){var e;if(xt!==Lt){var t=null===(e=B.current)||void 0===e?void 0:e.findOne("#".concat(xt));ue()((function(){var e,n,r=ov(t,Yt());r&&Mt.findControl(xt)?null===(e=Pn.current)||void 0===e||e.operateLine(r):null===(n=Pn.current)||void 0===n||n.hideLine();Dn()}))}else{var n;null===(n=Pn.current)||void 0===n||n.hideLine()}};e();var t=Mt.addDataChangeListener(e);return function(){t()}}),[xt,k,Lt,Dn]),(0,V.useEffect)((function(){return W.eventBus.on("align-shapes",(function(e){var t=e.type,n=e.ids,r=Mt.findControl(n);switch(t){case"top":var a=(0,L.c)({},$e,Math.min.apply(null,N()(r).call(r,(function(e){return e[$e]}))));Mt.batchUpdateControlPropertyValues((0,W.createUpdateAction)(N()(r).call(r,(function(e){return[e[nt],a]}))));break;case He:var o=(0,L.c)({},$e,Hs((Math.min.apply(null,N()(r).call(r,(function(e){return e[$e]})))+Math.max.apply(null,N()(r).call(r,(function(e){return e[$e]+e[tt]}))))/2,1));Mt.batchUpdateControlPropertyValues((0,W.createUpdateAction)(N()(r).call(r,(function(e){return[e[nt],(0,L.c)({},$e,Hs(o[$e]-e[tt]/2,1))]}))));break;case Xe:EC(r,Mt,$e,tt);break;case Ye:EC(r,Mt,_e,et);break;case qe:var i=(0,L.c)({},_e,Hs((Math.max.apply(null,N()(r).call(r,(function(e){return e[_e]+e[et]})))+Math.min.apply(null,N()(r).call(r,(function(e){return e[_e]}))))/2,1));Mt.batchUpdateControlPropertyValues((0,W.createUpdateAction)(N()(r).call(r,(function(e){return[e[nt],(0,L.c)({},_e,Hs(i[_e]-e[et]/2,1))]}))));break;case Ke:var l=P()(r).call(r,(function(e,t){var n=t[_e]+t[et];return n>e?n:e}),0);Mt.batchUpdateControlPropertyValues((0,W.createUpdateAction)(N()(r).call(r,(function(e){return[e[nt],(0,L.c)({},_e,e[_e]+(l-(e[_e]+e[et])))]}))));break;case Ve:var u=P()(r).call(r,(function(e,t){var n=t[$e]+t[tt];return n>e?n:e}),0);Mt.batchUpdateControlPropertyValues((0,W.createUpdateAction)(N()(r).call(r,(function(e){return[e[nt],(0,L.c)({},$e,e[$e]+(u-(e[$e]+e[tt])))]}))));break;default:var c=(0,L.c)({},_e,Math.min.apply(null,N()(r).call(r,(function(e){return e[_e]}))));Mt.batchUpdateControlPropertyValues((0,W.createUpdateAction)(N()(r).call(r,(function(e){return[e[nt],c]}))))}})),function(){W.eventBus.off("align-shapes")}}),[]);var kn=(0,V.useRef)([]),wn=(0,V.useRef)([]),bn=(0,V.useCallback)((function(e){var t,n=e.currentTarget,r=n.scrollLeft,a=n.scrollTop;X.current.style.transform="translateX(".concat(-r+"px",")"),K.current.style.transform="translateY(".concat(-a+"px",")"),U()(t=kn.current).call(t,(function(e){e&&e({scrollLeft:r,scrollTop:a})}))}),[]),xn=(Ws(ot,k),Ws(at,k),Ws(Math.max(ot,it+ut),k)),Sn=Ws(Math.max(at,lt+ct),k),In=Yt(),Mn=(In.x,In.y,iC({offsetTop:null!==(r=null===(a=Pt.current)||void 0===a?void 0:a.offsetTop)&&void 0!==r?r:0,offsetLeft:null!==(o=null===(i=Pt.current)||void 0===i?void 0:i.offsetLeft)&&void 0!==o?o:0,marginLeft:Ws(lt,k),marginTop:Ws(it,k),definition:bt,dataContext:Mt,id:rt})),Ln=Mn.showEditor,Rn=Mn.hideEditor,Fn=Mn.editorElement,Tn=Mn.setEditorPosition,Nn=Mn.inputNodeRef,Gn=(0,V.useState)(0)[1];(0,V.useEffect)((function(){var e=function(){if(G.current&&Pt.current){var e=Pt.current||{},t=e.offsetLeft,n=e.offsetTop;G.current.position({x:(null!=t?t:0)-Wt,y:(null!=n?n:0)-Wt})}};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[Tn]);var Zn,Qn,Pn=(0,V.useMemo)((function(){return{current:{operateLine:function(){for(var e,t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];null===(e=O.current)||void 0===e||e.operateLine.apply(e,r),null===(t=q.current)||void 0===t||t.operateLine.apply(t,r)},hideLine:function(){var e,t;null===(e=O.current)||void 0===e||e.hideLine(),null===(t=q.current)||void 0===t||t.hideLine()}}}}),[]),Jn=(0,V.useCallback)((function(){var e,t,n,r;return{scrollTop:null!==(e=null===(t=ve.current)||void 0===t?void 0:t.scrollTop)&&void 0!==e?e:0,scrollLeft:null!==(n=null===(r=ve.current)||void 0===r?void 0:r.scrollLeft)&&void 0!==n?n:0}}),[]),jn=(0,V.useCallback)((function(e,t){return e>at?{width:at,height:t*at/e}:{width:e,height:t}}),[at,ot,k]),On=(0,V.useRef)(null),Un=Mt.findControl(xt)||{},Kn=(Zn=Un,"1"===(Qn=Ue.data.bizType)&&"Barcode"===Zn.type?{enabledAnchors:["bottom-center","top-center"]}:"1"===Qn&&"QRCode"===Zn.type?{enabledAnchors:[]}:Zn.type===_t?{enabledAnchors:["top-center"]}:Zn.type===Xt?{enabledAnchors:["bottom-center"]}:Zn.type===gt?{enabledAnchors:["bottom-center","middle-right","bottom-right"]}:Zn.type===ht?{enabledAnchors:["middle-left","bottom-left","bottom-center","middle-right","bottom-right"]}:Zn.type===en?{enabledAnchors:["middle-right","middle-left","bottom-center","top-center"],padding:3}:{}),Vn=mC({isGlobal:!0,stageRef:B,rootControlRef:jt,selectedId:xt,parentId:null==Un?void 0:Un.parentId,ref:On,controlGroupRef:Q,isCell:Zf(Un),isSelected:xt!==Lt,isLastSelected:xt!==Lt,dataContext:Mt,refLineRef:R},Kn),qn=(0,V.useMemo)((function(){var e,t,n,r;return{refLineRef:R,rulerRef:Pn,stageRef:B,rootControlRef:jt,xRulerRef:O,yRulerRef:q,showEditor:Ln,globalTrRef:On,pageHeight:st,pageWidth:ft,pixelRatio:S,setMessage:f,hideEditor:Rn,setEditorPosition:Tn,marginLeft:Ws(lt,k),marginTop:Ws(it,k),selectionContext:Bt,navToolRef:Et,canvasAbsolutePosRef:ee,deleteSelectionControl:ze,getContainerDomScroll:Jn,canvasBoxRef:Pt,rulerWidth:Le,offsetTop:(null!==(e=null===(t=Pt.current)||void 0===t?void 0:t.offsetTop)&&void 0!==e?e:0)+Le,offsetLeft:(null!==(n=null===(r=Pt.current)||void 0===r?void 0:r.offsetLeft)&&void 0!==n?n:0)+Le,dataContext:Mt,isNeedDashBorder:!1,scrollCallbackRef:kn,scale:k,contextStrokeEnabled:gn,containerDomRef:ve,getRedundancyXY:Yt,rootId:Lt,getInputSize:he,getTextSize:ge,controlGroupRef:Q,dataFactory:me,dragGroupRef:J,globalConfig:ae,sizeAndPixelRatioChangeCbRef:mn,forceUpdateTransformer:Dn,canvasResizeCallbackRef:wn,handlePassGridActionGuide:h,isFirstUseGrid:v,onValid:p}}),[Pn,Ln,st,ft,S,f,Rn,Tn,lt,it,ze,Jn,Le,k,gn,Yt,Lt,he,ge,me,ae,h,v,p]),Xn=(0,V.useMemo)((function(){return{activedSelectId:xt,isMultiKeyActiveWhenSelectedRef:St}}),[xt]);(0,V.useEffect)((function(){Dt.current=B.current}),[B.current]);var tr={position:"absolute",zIndex:1,backgroundColor:"#ffffff"};return H().createElement(H().Fragment,null,H().createElement("div",{className:Hn()("".concat(Zt,"-canvas-ruler"),"".concat(Zt,"-canvas-ruler-x")),style:mC(mC({},tr),{},{width:Le,height:xn+Re+Le}),ref:K},H().createElement(nv.Stage,{width:Le,height:xn+Le+Re},H().createElement(Pm,{direction:"x",scale:k,marginLeft:lt,marginTop:it,marginRight:ct,marginBottom:ut,pageSize:{width:at,height:ot},dataContext:Mt,ref:O}))),H().createElement("div",{className:"".concat(Zt,"-canvas-and-ruler"),ref:ee},H().createElement("div",{className:"".concat(Zt,"-lock")},H().createElement(z.Icon,{type:"lock"})),H().createElement("div",{className:Hn()("".concat(Zt,"-canvas-ruler"),"".concat(Zt,"-canvas-ruler-y")),style:mC(mC({},tr),{},{width:Sn+Re+Le,height:Le}),ref:X},H().createElement(nv.Stage,{width:Sn+Re+Le,height:Le},H().createElement(Pm,{direction:"y",scale:k,marginLeft:lt,marginTop:it,marginRight:ct,marginBottom:ut,pageSize:{width:at,height:ot},dataContext:Mt,ref:q}))),H().createElement("div",{className:Hn()("".concat(Zt,"-canvas-container"),"".concat(Zt,"-shadow-canvas-container")),id:"printDesignerCanvasContainer",ref:function(e){e&&(ve.current=e)},onScroll:bn},H().createElement("div",{className:"".concat(Zt,"-canvas-container-border-left")}),H().createElement("div",{className:"".concat(Zt,"-canvas-container-border-top")}),H().createElement("div",{className:Hn()("".concat(Zt,"-canvas-box"),"".concat(Zt,"-shadow-canvas-box")),ref:Pt,style:{position:"relative",height:Ws(st,k),width:Ws(ft,k),paddingLeft:Ws(lt,k),paddingRight:Ws(ct,k),paddingTop:Ws(it,k),paddingBottom:Ws(ut,k),boxSizing:"content-box"}}),H().createElement("div",{className:"".concat(Zt,"-canvas-paper"),ref:T,onDragOver:function(e){if(ve.current){var t=ve.current.getBoundingClientRect(),n=t.left,r=t.top,a=(t.height,t.width,ve.current),o=a.scrollLeft,i=a.scrollTop,l=Yt(),u=l.x,c=l.y,d=e.pageX,s=e.pageY;d>=n+Math.max(u-o,0)&&d<=n+Math.max(u-o,0)+Ws(ft,k)&&s>=r+Math.max(c-i,0)&&s<=r+Math.max(c-i,0)+Ws(st,k)&&e.preventDefault()}},onDrop:function(e){e.preventDefault();var t=window.event,n=t.offsetX,r=t.offsetY,a=Yt(),o=a.x,i=a.y,l={offsetX:n-o,offsetY:r-i,x:Ks(n-o,k),y:Ks(r-i,k)};te.current={isDrag:!0,yPos:l.y};var u=y[W.CONTROL_DRAG_DATA]||{};if(C()(u).length){var c=u.type,d=u.data,s=u.showDataSourceTitle;null==B||B.current.fire("drop",{dropType:c,target:B.current,evt:window.event,controlData:d,position:l,showDataSourceTitle:s},!1),delete y[W.CONTROL_DRAG_DATA]}},style:{width:Math.ceil(vt),height:Math.ceil(pt)},tabIndex:-1},H().createElement("div",{className:"".concat(Zt,"-shadow-input"),ref:ne}),H().createElement("canvas",{ref:re,style:{display:"none"}}),H().createElement("div",{id:"shadowCanvas",style:{display:"none"}}),H().createElement(nv.Stage,{ref:B,className:"".concat(Zt,"-paper"),width:Math.ceil(vt),height:Math.ceil(pt),scale:{x:Math.ceil(vt)/vt,y:Math.ceil(pt)/pt},onMouseDown:function(e){var t=e.target;if(0===e.evt.button){t!==(null==Nn?void 0:Nn.current)&&Rn&&Rn(),Ht(t)&&(Qt.current.isDragging=!0);var n=e.evt,r=n.layerX,a=n.layerY;Qt.current.startX=r,Qt.current.startY=a,Ht(t)&&Ft(e)}},onMouseMove:function(e){var t;if(ln.current.isOutMouseUp)return un(e),void(ln.current.isOutMouseUp=!1);if(Qt.current.isDragging){var n=e.evt,r=n.layerX,a=n.layerY,o=Qt.current,i=o.startX,l=o.startY,u=[Math.min(r,i),Math.min(a,l),Math.abs(r-i),Math.abs(a-l)],c=u[0],d=u[1],s=u[2],f=u[3],g=_.current,h=Yt(),v=h.x,p=h.y;g.x(c-v),g.y(d-p),g.width(s),g.height(f),g.visible(!0),null==g||null===(t=g.getLayer())||void 0===t||t.batchDraw()}},onMouseUp:un,onDrop:function(e){var t=e.dropType,n=e.evt,r=e.controlData,a=e.position,o=e.showDataSourceTitle,i={x:n.offsetX,y:n.offsetY},l=B.current.getIntersection(i,"Group");"control"===t?an(r,a,l):on(r,a,l,o)}},H().createElement(yn.Provider,{value:qn},H().createElement(An.Provider,{value:Xn},H().createElement(nv.Layer,{ref:G,x:(null!==(l=null===(u=Pt.current)||void 0===u?void 0:u.offsetLeft)&&void 0!==l?l:0)-Wt,y:(null!==(c=null===(d=Pt.current)||void 0===d?void 0:d.offsetTop)&&void 0!==c?c:0)-Wt},H().createElement(nv.Rect,{id:"".concat(rt,"_outter"),ref:Jt,name:"".concat(rt,"_outter_rect"),x:0,y:0,width:Ws(at,k),height:Ws(ot,k),draggable:!1,strokeWidth:1,fill:"#ffffff",shadowColor:"#000",shadowBlur:10,shadowOpacity:.1,shadowOffset:{x:0,y:2},shadowEnabled:!0}),H().createElement(fp,{key:It,id:"unique_draw_background",ref:$,getImageSize:jn,src:It,scale:k}),H().createElement(nv.Group,{x:Ws(lt,k),ref:Q,name:"".concat(rt,"_group"),y:Ws(it,k)},H().createElement(nv.Rect,{id:"".concat(rt),ref:jt,name:"".concat(rt,"_dotted_rect"),width:Ws(ft,k),height:Ws(st,k),draggable:!1,dash:[2.5,2.5],stroke:"#D9D9D9",dashEnabled:!0}),(0,W.toArray)(Oe,{context:qn}),H().createElement(xp,(0,ie.c)({},Vn,{key:"global-transformer"})),H().createElement(nv.Rect,{key:"unique_draw_region",id:"unique_draw_region",ref:_,x:CC,y:CC,height:CC,width:CC,visible:!1,stroke:"#0E5FD8",strokeWidth:1,shadowForStrokeEnabled:!1,strokeScaleEnabled:!1,hitStrokeWidth:0,alpha:1,strokeEnabled:!0}),H().createElement(tC,{dataContext:Mt,marginTop:Ws(it,k),marginLeft:Ws(lt,k),getRedundancyXY:Yt,controlGroupRef:Q,key:"unique_refline",rootControlRef:jt,ref:R,stageRef:B,selectedId:xt,selectionContext:Bt}))))))),Fn)),xe.show&&H().createElement(Qs,{meta:kt,controlType:xe.controlType,transferData:xe.transferData,definition:bt,visible:xe.show,onCancel:function(){var e=xe.reject;e&&e("error: cancel add DataGrid"),Se({show:!1})},onSelect:Ot,activedSelectId:xt}),Me.show&&H().createElement(Am,{meta:kt,definition:bt,visible:Me.show,onCancel:function(){var e=Me.reject;e&&e("error: cancel add layoutGrid"),Fe({show:!1})},onConfirm:function(e){var t=e.row,n=e.column;if(ft/n<5)return f((0,W.getLangMsg)("printd.grid.key0093"));var r=Af(me,Ce),a=Mt.findControlByCondition((function(e){return"Header"===e.type})),o=te.current,i=o.isDrag,l=o.yPos,u=Me.resolve,c=Me.parentId,d=mC({width:ft,height:8*t},i?{y:l}:{}),s=null;if(c){var g=Mt.findControl(c),h=g.width,v=g.y,p=g.height,m=g.type;d.width=h,d.y=i?d.y-v:0,"TableTail"===m&&p<8*t&&(s={type:W.ActionType.UPDATE,value:[[c,{height:8*t}]]})}var C=r({type:"LayoutGrid",parentId:c||Lt,gridInfo:e,transferData:d});a&&a.length&&C[0].y<a[0].height&&c===Lt&&(C[0].y=a[0].height+C[0].y);var y=[{type:W.ActionType.ADD,value:C}];s&&y.push(s),u(y),zt(),Fe({show:!1})}}),Je.show&&H().createElement(wm,{meta:kt,definition:bt,visible:Je.show,onCancel:function(){var e=Je.reject;e&&e("error: cancel add layoutGrid"),je({show:!1})},onConfirm:function(e){je({show:!1});var t=Je.resolve,n=Je.reject;Se({controlType:"CardGrid",reject:n,resolve:t,show:!0,gridInfo:e})}}),H().createElement(Em,{meta:kt,definition:bt,visible:Ge.show,onCancel:function(){var e=Ge.value;Ge.resolve,Ge.reject;W.eventBus.emit("change-lang",e,!1),Ze({show:!1})},onConfirm:function(){var e=Ge.value;Ge.resolve,Ge.reject;W.eventBus.emit("change-lang",e,!0),Ze({show:!1})},onClose:function(){Ge.value,Ge.resolve;(0,Ge.reject)((0,W.getLangMsg)("printd.grid.key0091")),Ze({show:!1})}}))}))),AC=(0,W.ErrorBoundaryWrap)(DC,"print-main-view"),kC=function(e){var t=(0,V.useRef)({}),n=(0,V.useContext)(W.SelectionContext),r=(0,V.useContext)(W.DataContext),a=(0,V.useCallback)((function(e){var n;return(null===(n=t.current)||void 0===n?void 0:n[e])||{}}),[]),o=(0,V.useCallback)((function(e,n){t.current[e]=n}),[]),i=(0,V.useMemo)((function(){return{setFieldSizeCache:o,getFieldSizeCache:a}}),[]),l=(0,V.useCallback)((function(e,t,n){ua()(e).call(e,(function(e){return Zf(e)}))||t.setSelect(n)}),[]),u=(0,V.useCallback)((function(){var e;W.console.log("deleteSelectionControl");var t=r.getRootId(),a=F()(e=n.getSelection()).call(e,(function(e){return e!==t})),o=a,i=N()(a).call(a,(function(e){return r.findControl(e)}));if(o.length){if(1===i.length){var u=i[0];l(i,n,u.parentId!==t?[u.parentId]:[])}else l(i,n,[]);r.deleteControl((0,W.createDeleteAction)(o))}}),[]);return H().createElement(AC,(0,ie.c)({deleteSelectionControl:u,fieldSizeCacher:i},e))},wC=function(e){var t,n=e.portalRef,r=e.children,a=e.position,o=e.style,i=(0,V.useState)(document.createElement("div")),l=(0,M.c)(i,1)[0],u=(0,V.useRef)(!1),c=(0,V.useRef)(!1);(l.style.position=a||"absolute",l.style.top="0px",l.style.left="0px",l.style.zIndex="1050",o)&&U()(t=gh()(o)).call(t,(function(e){var t=(0,M.c)(e,2),n=t[0],r=t[1];l.style[n]=r}));var d=(0,V.useCallback)((function(){if(c.current){var e;if(Yr().unmountComponentAtNode(l),u.current)document.body.removeChild(l);else null===(e=n.current)||void 0===e||e.removeChild(l);c.current=!1}}),[]);(0,V.useEffect)((function(){return u.current=!1,null!=n&&n.current?n.current.appendChild(l):(document.body.appendChild(l),u.current=!0),c.current=!0,d}),[]),r?Yr().render(r,l):d()},bC="up",xC="bottom",SC=(0,V.forwardRef)((function(e,t){var n=e.x,r=e.y,a=e.portalRef,o=e.rowData,i=e.gridType,l=e.originCells,u=e.getCellIdx,c=e.mergeConfig,d=e.gridSelectionContext,s=e.hideContextMenu,f=e.addRow,g=e.addColumn,h=e.deleteRow,v=e.deleteColumn,p=e.addMerge,m=e.removeMerge,C=e.calcSelectionCanMerge,y=e.rowCount,E=e.columnCount,D=e.rows,A=e.subGridId,k=e.dataContext,w=e.selectionContext,b=1===w.getSelection().length&&Zf(k.findControl(w.getSelection()[0])),x=C(),S=!b&&!x,I=function(){var e=d.selection,t=e.minRowNum,n=e.maxRowNum,r=e.minColumnNum,a=e.maxColumnNum;if(void 0===t||void 0===n||void 0===r||void 0===a){if(!x)return!1;var o=x.isSameRowType,i=x.isOnlyOneRowData;return o&&!i}for(var c=l[u(t,0)].row,s=D[c].rowType,f=t+1;f<=n;f++){var g=l[u(f,0)].row;if(s!==D[g].rowType)return!1}var h=l[u(t,r)].mergeConfig;if(h){for(var v=t;v<=n;v++)for(var p=r;p<=a;p++){var m=l[u(v,p)].mergeConfig;if(!Y().isEqual(m,h))return!0}return!1}return!0}(),B=function(){var e,t,n=d.contextRowIndex,r=d.contextColumnIndex,a=d.operationRowIndex,o=d.operationColumnIndex,i=d.selection,s=i.minRowNum,f=i.maxRowNum,g=i.minColumnNum,h=i.maxColumnNum;if(void 0!==s&&void 0!==f&&void 0!==g&&void 0!==h){for(var v=s;v<=f;v++)for(var p=g;p<=h;p++){if(l[u(v,p)].mergeConfig)return!0}return!1}if(void 0!==a){for(var m=0;m<E;m++){if(l[u(a,m)].mergeConfig)return!0}return!1}if(void 0!==o){for(var C=0;C<y;C++){if(l[u(C,o)].mergeConfig)return!0}return!1}return void 0!==n&&void 0!==r&&(!!c[Z()(e="".concat(n,"_")).call(e,r)]||!(null===(t=l[u(n,r)])||void 0===t||!t.mergeConfig))}(),M=function(e){if(x)return e===bC?x.minRowNum:x.maxRowNum;if(B&&"cell"===d.operationType){var t,n,r=d.contextRowIndex,a=d.contextColumnIndex,o=c[Z()(t="".concat(r,"_")).call(t,a)]||(null===(n=l[u(r,a)])||void 0===n?void 0:n.mergeConfig);if(e===bC&&o)return o.rowStart;if(o)return o.rowStart+o.rowLength-1}return"cell"===d.operationType?d.contextRowIndex:d.operationRowIndex},L=function(e){if(x)return e===bC?x.minColumnNum:x.maxColumnNum;if(B&&"cell"===d.operationType){var t,n,r=d.contextRowIndex,a=d.contextColumnIndex,o=c[Z()(t="".concat(r,"_")).call(t,a)]||(null===(n=l[u(r,a)])||void 0===n?void 0:n.mergeConfig);if(e===bC&&o)return o.columnStart;if(o)return o.columnStart+o.columnLength-1}return"cell"===d.operationType?d.contextColumnIndex:d.operationColumnIndex},R=(0,V.useCallback)((function(e,t){if("LayoutGrid"===i||"CardGrid"===i)return bt;var n=fe()(o).call(o,(function(e){return Kf(e.row)}));return-1===n||e<n?kt:e>n?wt:t===bC?kt:wt}),[i,o]),T=!!F()(o).call(o,(function(e){return e.row.rowType===kt||e.row.rowType===bt})).length,N=!!F()(o).call(o,(function(e){return e.row.rowType===wt})).length,G=!!F()(o).call(o,(function(e){return e.row.rowType===bt})).length,Q=!!F()(o).call(o,(function(e){var t,n=e.row;return n.rowType===At&&(null===(t=n.mergeSummaryField)||void 0===t?void 0:t.length)})).length,P=(d.operationType,d.operationType,"row"===d.operationType),J="column"===d.operationType,j=!("DataGrid"!==i||F()(o).call(o,(function(e){return e.row.rowType===xt})).length||null!=A&&A.length||Q),O=!S&&!0,U=!S&&!0,z=!!d.operationMultiple;W.console.log(n,r,"GridContextMenu",I,B,d);var K=function(){return(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(I||B)?{borderBottom:"1px solid #D9D9D9"}:{}},q=S&&"cell"===d.operationType,X=(0,V.useMemo)((function(){var e=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;if(z)return{top:r,left:n};var t=16;return U&&(t+=j?96:64),O&&(t+=64),P&&(t+=32),J&&(t+=32),I&&(t+=32),B&&(t+=32),r+t>e?{top:r-t,left:n}:{top:r,left:n}}),[P,J,I,B,z]);return wC({portalRef:a,position:"fixed",children:!q&&H().createElement("div",{className:"grid-context-menu",ref:t,style:X},z?H().createElement(H().Fragment,null,H().createElement("span",{onClick:function(){s()}},(0,W.getLangMsg)("printd.components.key0031"))):H().createElement(H().Fragment,null,U&&H().createElement("span",{onClick:function(){var e=fe()(o).call(o,(function(e){return Kf(e.row)})),t=fe()(o).call(o,(function(e){return Hf(e.row)})),n=M(bC);s(),t>-1&&n===e&&(n=t),f(n,bC,R(n,bC))}},(0,W.getLangMsg)("printd.components.key0032")),U&&H().createElement("span",{onClick:function(){var e=fe()(o).call(o,(function(e){return Hf(e.row)})),t=M(xC),n=fe()(o).call(o,(function(e){return Kf(e.row)}));s(),e===t?f(n,xC,wt):f(M(xC),xC,R(t,xC))}},(0,W.getLangMsg)("printd.components.key0033")),U&&j&&H().createElement("span",{onClick:function(){var e=fe()(o).call(o,(function(e){return Kf(e.row)}));s(),f(e,bC,xt,!1,1,!0)}},(0,W.getLangMsg)("printd.components.key0034")),P&&H().createElement("span",{onClick:function(){s(),h(M())}},(0,W.getLangMsg)("printd.components.key0035")),O&&H().createElement("span",{onClick:function(){s(),g(L(bC))}},(0,W.getLangMsg)("printd.components.key0036")),O&&H().createElement("span",{style:K(!J),onClick:function(){s(),g(L(xC),xC)}},(0,W.getLangMsg)("printd.components.key0037")),J&&H().createElement("span",{style:K(),onClick:function(){s(),v(L())}},(0,W.getLangMsg)("printd.components.key0038")),I&&H().createElement("span",{onClick:function(){s();var e={};if(Y().isObject(x)){var t=x;(0,ie.c)(e,t)}else(0,ie.c)(e,d.selection);var n=e.minRowNum,r=e.minColumnNum;p({rowStart:n,rowLength:e.maxRowNum-n+1,columnStart:r,columnLength:e.maxColumnNum-r+1})}},(0,W.getLangMsg)("printd.components.key0039")),B&&H().createElement("span",{onClick:function(){var e;s();var t=d.selection,n=t.minRowNum,r=t.maxRowNum,a=t.minColumnNum,o=t.maxColumnNum,i=d.contextRowIndex,f=d.contextColumnIndex,g=d.operationRowIndex,h=d.operationColumnIndex;if(void 0!==n&&void 0!==r&&void 0!==a&&void 0!==o)m({rowStart:n,rowLength:r-n+1,columnStart:a,columnLength:o-a+1});else if(void 0!==g)m({rowStart:g,rowLength:1,columnStart:0,columnLength:E});else if(void 0!==h)m({rowStart:0,rowLength:y,columnStart:h,columnLength:1});else if(Y().isObject(x)){var v=x.minRowNum,p=x.maxRowNum,C=x.minColumnNum,D=x.maxColumnNum;m({rowStart:v,rowLength:p-v+1,columnStart:C,columnLength:D-C+1})}else if(c[Z()(e="".concat(i,"_")).call(e,f)]){var A,k=c[Z()(A="".concat(i,"_")).call(A,f)],w=k.rowLength,b=k.columnLength;m({rowStart:void 0===n?d.contextRowIndex:n,rowLength:void 0===n?w:r-n+1,columnStart:void 0===a?d.contextColumnIndex:a,columnLength:void 0===a?b:o-a+1})}else if(l[u(i,f)].mergeConfig){var S=l[u(i,f)].mergeConfig,I=S.rowStart,B=S.columnStart,M=S.rowLength,L=S.columnLength;m({rowStart:void 0===n?I:n,rowLength:void 0===n?M:r-n+1,columnStart:void 0===a?B:a,columnLength:void 0===a?L:o-a+1})}}},(0,W.getLangMsg)("printd.components.key0040"))))}),null})),IC=SC,BC=function(e){var t=e.scrollCallbackRef,n=e.refs,r=e.canvasResizeCallbackRef,a=(0,V.useState)(0)[1];(0,V.useEffect)((function(){var e,o,i=function(e){var t,r,a=e.scrollLeft,o=e.scrollTop;U()(t=F()(r=N()(n).call(n,(function(e){return e.current}))).call(r,Boolean)).call(t,(function(e){var t;e.style.transform=Z()(t="translate(".concat(-a+"px",", ")).call(t,-o+"px",")")}))},l=function(){a((function(e){return e+1}))};return null===(e=r.current)||void 0===e||e.push(l),null===(o=t.current)||void 0===o||o.push(i),function(){var e,n;t.current=F()(e=t.current).call(e,(function(e){return e!==i})),r.current=F()(n=r.current).call(n,(function(e){return e!==l}))}}),[t])},MC=!1,LC=(0,V.forwardRef)((function(e,t){var n,r,a,o,i,l,u,c,d,s=e.x,f=e.y,g=e.portalRef,h=(0,V.useState)(MC),v=(0,M.c)(h,2),p=v[0],m=v[1],C=(0,V.useState)(!1),y=(0,M.c)(C,2),E=y[0],D=y[1];(0,V.useEffect)((function(){D(!0)}),[]),MC=!0;var A=(0,V.useContext)(yn),k=A.scrollCallbackRef,w=A.containerDomRef,b=(A.pageHeight,A.canvasBoxRef),x=A.rulerWidth,S=(A.pageWidth,A.canvasResizeCallbackRef),I=A.handlePassGridActionGuide,B=s+(null!==(n=null===(r=b.current)||void 0===r?void 0:r.offsetLeft)&&void 0!==n?n:0)+x,L=f+(null!==(a=null===(o=b.current)||void 0===o?void 0:o.offsetTop)&&void 0!==a?a:0)+x,R=(0,V.useRef)(null);BC({scrollCallbackRef:k,refs:[R],canvasResizeCallbackRef:S});var F=(0,V.useCallback)((function(){p||(I&&I(),m(!0))}),[I,p]),T=E&&!p&&H().createElement("div",{onClick:F,title:(0,W.getLangMsg)("printd.components.key0042"),className:"print-grid-action-guide",ref:R,style:{position:"absolute",transform:Z()(i="translate(".concat((null!==(l=-(null===(u=w.current)||void 0===u?void 0:u.scrollLeft))&&void 0!==l?l:0)+"px",", ")).call(i,(null!==(c=-(null===(d=w.current)||void 0===d?void 0:d.scrollTop))&&void 0!==c?c:0)+"px",")"),left:B,top:L-44}},(0,W.getLangMsg)("printd.components.key0066"));return(0,V.useImperativeHandle)(t,(function(){return{handlePassGridActionGuide:F}}),[F]),wC({portalRef:g,children:T,style:{width:"1000px"}}),null})),RC=LC,FC="grid-title",TC=function(e){var t,n=e.gridSelectionContext,r=e.text,a=e.width,o=e.height,i=e.type,l=e.lineRef,u=e.index,c=e.change,d=e.handleGridSelection,s=(e.length,e.isSelected),f=e.onContextMenu,g=e.templateRowData,h=(e.templateRowHeight,e.scale),v=e.maxLimitWidthChange,p=e.maxLimitHeightChange,m=e.isNextSelected,C=(0,V.useRef)(null);(0,W.useOnClickOutside)([C],(function(e){var t=l.current.dataset.canDrag;!t||JSON.parse(t)}),!1);(0,V.useEffect)((function(){var e=function(e){W.console.log("e.ctrlKe shapeRef.current?.stopDrag()");var t=C.current,n=l.current;t&&(t.dataset.dragging=!1),n&&(n.style.display="none",n.style.transform="",n.dataset.canDrag=!1)};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[]),(0,V.useEffect)((function(){var e=function(e){var t=C.current,n=l.current;if(t&&n&&t.dataset.dragging&&JSON.parse(t.dataset.dragging)){var r,a=n.dataset["".concat(i,"DragStart")],o=("row"!==i?e.clientX:e.clientY)-+a;n.style.transform=Z()(r="translate".concat("row"===i?"Y":"X","(")).call(r,o,"px)")}};return window.addEventListener("mousemove",e),function(){window.removeEventListener("mousemove",e)}}),[]);var y="row"===i?Ws(3,h)-o:Ws(5,h)-a,E=Ws("row"===i?p:v,h);(0,V.useEffect)((function(){var e=function(e){var t=l.current,n=C.current;if(t&&n){var r=n.dataset.dragging;if(r&&JSON.parse(r)){var a=t.dataset["".concat(i,"DragStart")],o=("row"!==i?e.clientX:e.clientY)-+a;if(t.style.display="none",t.style.transform="",!isNaN(o)){var d=o>E?E:o<y?y:o;W.console.log("handleMouseUp",o,e.clientX,e.clientY,+a,[d,E,y]),c(u,g?d/(g.length+1):d,d,o)}}t.dataset.canDrag=!1,n.dataset.dragging=!1}};return window.addEventListener("mouseup",e),function(){window.removeEventListener("mouseup",e)}}),[c,g]);return H().createElement("div",{ref:C,className:Hn()("".concat(FC,"-cell"),(0,L.c)((0,L.c)({},"".concat(FC,"-cell-selectable"),s),Z()(t="".concat(FC,"-cell-")).call(t,i,"-next-selectable"),m)),style:{width:"row"===i?a:a+(0===u?1:0),fontSize:12*h,lineHeight:1.5,height:"row"!==i?o:o+(0===u?1:0)},onContextMenu:f,onMouseMove:function(e){var t=C.current,n=l.current;if(t&&n){var r="row"===i?e.nativeEvent.offsetY:e.nativeEvent.offsetX,a="row"===i?t.offsetHeight:t.offsetWidth;W.console.log("handleMouseMove",r,8,a,r+8>=a),t.dataset.dragging&&JSON.parse(t.dataset.dragging)||(r+8>=a?(n.dataset.canDrag=!0,t.style.cursor="row"===i?"ns-resize":"ew-resize"):(n.dataset.canDrag=!1,t.style.cursor=""))}},onMouseDown:function(e){var t=l.current,r=C.current,a=t.dataset.canDrag;t&&a&&JSON.parse(a)&&r?(r.dataset.dragging=!0,t.dataset["".concat(i,"DragStart")]="row"!==i?e.clientX:e.clientY,t.style["row"===i?"top":"left"]="".concat(r["row"===i?"offsetTop":"offsetLeft"]+r["row"===i?"offsetHeight":"offsetWidth"],"px"),W.console.log("handleMouseDown",t,C.current),t.style["row"===i?"top":"left"]="row"===i?e.clientX:e.clientY,t.style.display="block",null==e||e.stopPropagation()):(Gv(e)||(n.originClickType="title",n.originTitleIndex=u),Nv(e)?d({type:i,index:u,isMult:!0}):Gv(e)?d({type:i,index:u,isMult:!1,isShiftKey:!0}):d({type:i,index:u,isMult:!1}))}},H().createElement("span",{className:"".concat(FC,"-cell-text")},r))},NC=function(e){var t,n,r,a,o,i,l,u,c,d,s,f,g,h,v,p,m,C,y,E,D,A,k,w,b,x=e.columns,S=e.scale,I=e.x,B=e.y,M=e.portalRef,L=e.rows,R=(e.scrollTop,e.scrollLeft,e.gridType),F=e.templateRowData,T=e.maxLimitWidthChange,G=e.maxLimitHeightChange,Q=e.changeRow,P=e.changeColumn,J=e.handleGridSelection,j=e.onContextMenu,O=e.rowTitleSelection,U=e.columnTitleSelection,K=e.templateRowHeight,q=e.containerHeight,Y=e.containerWidth,X=e.subGridId,_=e.addSubDataGrid,$=e.gridState,ee=e.isShowAddSubGridBtn,te=e.tableTailId,ne=e.gridSelectionContext,re=60*S,ae=25*S,oe=104*S,ie=40*S,le=2*S,ue=((0,V.useRef)(null),(0,V.useRef)(null)),ce=(0,V.useRef)(null),de=(0,V.useRef)(null),se=(0,V.useRef)(null),fe=(0,V.useRef)(null),ge=(0,V.useRef)(null),he=(0,V.useContext)(yn),ve=he.scrollCallbackRef,pe=he.containerDomRef,me=(he.pageHeight,he.canvasBoxRef),Ce=he.rulerWidth,ye=(he.pageWidth,he.canvasResizeCallbackRef),Ee=I+(null!==(t=null===(n=me.current)||void 0===n?void 0:n.offsetLeft)&&void 0!==t?t:0)+Ce,De=B+(null!==(r=null===(a=me.current)||void 0===a?void 0:a.offsetTop)&&void 0!==r?r:0)+Ce;BC({scrollCallbackRef:ve,refs:[se,de,fe,ge],canvasResizeCallbackRef:ye});var Ae=Yn()(L).call(L,(function(e){return"Group"===e.rowType})),ke=Yn()(L).call(L,(function(e){return"Detail"===e.rowType})),we=!(null==ke||null===(o=ke.mergeSummaryField)||void 0===o||!o.length)||!(null==ke||!ke.mergeByField);W.console.log("gridTitle",Ee,De,ae,Ws(uf(L,K),S));var be=$===ft,xe=!(!ee||R!==vt||"2"!==$&&$!==ft||null!=X&&X.length)&&!Ae&&!we&&!te,Se=function(e,t,n,r){var a,o=!(null===(a=e[t])||void 0===a||!a.visible),i=!o;if(n<r.length-1){var l,u=r[n+1].id;i=i&&!(null===(l=e[u])||void 0===l||!l.visible)}else i=!1;return{isSelected:o,isNextSelected:i}};return wC({portalRef:M,children:H().createElement(H().Fragment,null,be&&H().createElement("div",{tabIndex:-1,className:Hn()("".concat(FC,"-column"),FC),ref:se,style:{width:Y,height:ae+0,transform:Z()(i="translate(".concat((null!==(l=-(null===(u=pe.current)||void 0===u?void 0:u.scrollLeft))&&void 0!==l?l:0)+"px",", ")).call(i,(null!==(c=-(null===(d=pe.current)||void 0===d?void 0:d.scrollTop))&&void 0!==c?c:0)+"px",")"),left:Ee+1,top:De-ae}},N()(x).call(x,(function(e,t){var n=function(e){if(e<=0)return"";for(var t=[];e;){var n=e%26?e%26:26;t.unshift(String.fromCharCode(n+64)),e=Math.floor((e-n)/26)}return t.join("")}(t+1),r=e.id,a=Se(U,r,t,x),o=a.isSelected,i=a.isNextSelected;return H().createElement(TC,{gridSelectionContext:ne,maxLimitWidthChange:T,maxLimitHeightChange:G,scale:S,onContextMenu:j,isSelected:o,isNextSelected:i,handleGridSelection:J,length:L.length,index:t,change:P,key:"grid-column-".concat(e.id),text:n,lineRef:ue,type:"column",width:Ws(e.columnWidth,S),height:ae})})),H().createElement("div",{ref:ue,className:"".concat(FC,"-column-drag-line"),style:{height:Ws(uf(L,K),S)+ae}})),be&&H().createElement("div",{tabIndex:-1,className:Hn()("".concat(FC,"-row"),FC),ref:de,style:{width:re,height:q+ae,transform:Z()(s="translate(".concat((null!==(f=-(null===(g=pe.current)||void 0===g?void 0:g.scrollLeft))&&void 0!==f?f:0)+"px",", ")).call(s,(null!==(h=-(null===(v=pe.current)||void 0===v?void 0:v.scrollTop))&&void 0!==h?h:0)+"px",")"),left:Ee-re+1+0,top:De-ae}},H().createElement("div",{className:"".concat(FC,"-frozen-cell"),style:{width:re,height:ae}},H().createElement("div",{className:"".concat(FC,"-frozen-cell-line"),style:{width:60*S}})),N()(L).call(L,(function(e,t){var n=function(e,t,n){if("LayoutGrid"===t||"CardGrid"===t)return n+1;switch((e||{}).rowType){case kt:return(0,W.getLangMsg)("printd.components.key0043");case At:return(0,W.getLangMsg)("printd.components.key0044");case wt:return(0,W.getLangMsg)("printd.components.key0045");case bt:return(0,W.getLangMsg)("printd.components.key0046");case xt:return(0,W.getLangMsg)("printd.components.key0047");default:return e.name}}(e,R,t),r=e.id,a=e.rowType,o=e.rowHeight,i=Ws(o,S);a===At&&F.length&&(i+=F.length*i);var l=Se(O,r,t,L),u=l.isSelected,c=l.isNextSelected;return H().createElement(TC,{gridSelectionContext:ne,maxLimitWidthChange:T,templateRowHeight:K,maxLimitHeightChange:G,scale:S,onContextMenu:j,templateRowData:a===At&&F,isSelected:u,isNextSelected:c,handleGridSelection:J,length:x.length,index:t,change:Q,key:"grid-row-".concat(e.id),text:n,type:"row",lineRef:ce,width:re,height:i})})),H().createElement("div",{ref:ce,className:"".concat(FC,"-row-drag-line"),style:{width:Ws(uf(x),S)+re}})),xe&&H().createElement("div",{className:"".concat(FC,"-subgrid-right"),ref:fe,style:{width:oe,height:q+1,transform:Z()(p="translate(".concat((null!==(m=-(null===(C=pe.current)||void 0===C?void 0:C.scrollLeft))&&void 0!==m?m:0)+"px",", ")).call(p,(null!==(y=-(null===(E=pe.current)||void 0===E?void 0:E.scrollTop))&&void 0!==y?y:0)+"px",")"),left:Ee+Y+1+0+le,top:De},onClick:function(){_("right")}},H().createElement(z.Icon,{type:"add"}),(0,W.getLangMsg)("printd.grid.key0032")),xe&&H().createElement("div",{className:"".concat(FC,"-subgrid-bottom"),ref:ge,style:{width:Y,height:ie+1,transform:Z()(D="translate(".concat((null!==(A=-(null===(k=pe.current)||void 0===k?void 0:k.scrollLeft))&&void 0!==A?A:0)+"px",", ")).call(D,(null!==(w=-(null===(b=pe.current)||void 0===b?void 0:b.scrollTop))&&void 0!==w?w:0)+"px",")"),left:Ee+1+0,top:De+q+le},onClick:function(){_("bottom")}},H().createElement(z.Icon,{type:"add"}),(0,W.getLangMsg)("printd.grid.key0032")))}),null};function GC(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function ZC(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?U()(n=GC(Object(a),!0)).call(n,(function(t){(0,L.c)(e,t,a[t])})):b()?S()(e,b()(a)):U()(r=GC(Object(a))).call(r,(function(t){B()(e,t,k()(a,t))}))}return e}var QC=function(e){var t=(0,V.useContext)(yn),n=(t.scale,t.dataContext),r=((0,V.useRef)(null),(0,V.useRef)(null),e.x,e.y,e.id),a=(e.width,e.height,e.config,e.isTemplate),o=e.cellBackColor,i=e.backColor,l=a?[]:n.findControlByCondition((function(e){return e.parentId===r}))||[],u=!a&&(!!l&&!!l.length);return H().createElement(zp,{data:ZC(ZC({},e),{},{isCell:!0,hasChildItems:u,isTemplate:a,backColor:o||i,childItems:l})},l&&Zy(l,!0))},PC=function(e){e.row;var t=e.cells,n=e.isTemplate,r=e.cellBackColor;return H().createElement(H().Fragment,null,N()(t).call(t,(function(e){e.row,e.column;var t,a,o=e.cellKey,i=e.id;return H().createElement(QC,(0,ie.c)({},e,{isTemplate:n,key:Z()(t=Z()(a="".concat(n?"tempalte_":"")).call(a,o,"_")).call(t,i),cellBackColor:r}))})))},JC=function(e){return P()(e).call(e,(function(e,t,n){return e[t.id]={id:t.id,visible:!1,index:n,data:t},e}),{})},jC=(0,V.memo)((function(e){var t,n,r,a,o,i,l,u,c,d,s,f,g=(0,V.useState)(st),h=(0,M.c)(g,2),v=h[0],p=h[1],m=(0,V.useContext)(yn),y=m.contextStrokeEnabled,E=(0,V.useRef)(null),D=(0,V.useRef)(null),A=(0,V.useRef)(null),k=(0,V.useRef)(null),w=(0,V.useRef)(null),b=(0,V.useRef)(null);Cv({shapeRef:E});var x=(0,V.useState)(!1),S=(0,M.c)(x,2),I=S[0],B=S[1],R=(0,V.useState)({}),T=(0,M.c)(R,2),G=T[0],Q=T[1],J=(0,V.useCallback)((function(){I&&B(!1)}),[I]);(0,V.useEffect)((function(){return window.addEventListener("resize",J),function(){window.removeEventListener("resize",J)}}),[J]);var j=m.scale,O=void 0===j?1:j,U=m.canvasAbsolutePosRef,z=m.selectionContext,K=m.dataContext,q=m.marginLeft,X=m.marginTop,_=m.getContainerDomScroll,$=m.scrollCallbackRef,ee=m.getRedundancyXY,te=m.controlGroupRef,ne=m.pixelRatio,re=m.sizeAndPixelRatioChangeCbRef,ae=m.isFirstUseGrid,oe=(z.getSelection(),K.getRootId()),le=_(),ce=le.scrollTop,de=le.scrollLeft;(0,V.useEffect)((function(){var e;return null===(e=$.current)||void 0===e||e.push(J),function(){var e;$.current=F()(e=$.current).call(e,(function(e){return e!==J}))}}),[I,J]);var se=e.id,fe=e.rows,ge=void 0===fe?[]:fe,he=e.columns,ve=void 0===he?[]:he,pe=(e.cells,e.mergeConfig),me=void 0===pe?{}:pe,Ce=e.width,ye=e.height,Ee=e.x,De=e.y,Ae=e.type,ke=e.border,Ie=e.templateRowData,Be=e.originCells,Le=e.rowCount,Re=e.columnCount,Fe=e.rowData,Te=e.templateRowHeight,Ne=e.templateRowIndex,Ge=e.getCellPosition,Ze=e.getCellIdx,Qe=e.templateRowY,Pe=e.addRow,Je=e.getRowIndexlocateByPosition,je=e.getColumnIndexlocateByPosition,Oe=e.addColumn,Ue=e.changeRow,ze=e.deleteRow,We=e.changeColumn,Ke=e.deleteColumn,Ve=e.addMerge,He=e.removeMerge,qe=e.maxLimitWidthChange,Ye=e.maxLimitHeightChange,Xe=e.gridBorderType,_e=e.handleMouseDown,$e=e.isSelected,et=e.isLastSelected,tt=e.subGridId,nt=e.addSubDataGrid,rt=e.isShowAddSubGridBtn,at=null===(t=K.findControl(se))||void 0===t?void 0:t.tableTailId,ot=K.findControl(e.parentId),it=Pf({type:Ae}),lt=jf({type:Ae}),ut=(0,V.useState)((function(){return JC(ge)})),ct=(0,M.c)(ut,2),dt=ct[0],gt=ct[1],ht=(0,V.useState)((function(){return JC(ve)})),vt=(0,M.c)(ht,2),pt=vt[0],mt=vt[1];(0,V.useEffect)((function(){C()(dt).length!==ge.length&&gt(JC(ge))}),[e]),(0,V.useEffect)((function(){C()(pt).length!==ve.length&&mt(JC(ve))}),[e]);var Ct=yp(Ce,O),yt=yp(ye,O),Et=Ws(Ee,O),Dt=Ws(De,O),At=cp({x:Ee,y:De,id:se,width:Ce,height:ye,border:ke,scale:O,contextStrokeEnabled:y,isSelected:$e}),kt=At.stroke,wt=At.strokeWidth,bt=(At.strokeEnabled,At.dashEnabled),xt=At.defaultDash,St=At.customedStrokeElement,It=At.controlStrokeRef;fv({isSelected:$e,refs:[E],pixelRatio:ne,scale:O,currentProp:{id:se,width:Ce,height:ye,x:Ee,y:De,gridState:v,templateRowData:Ie,gridBorderType:Xe,rowData:Fe,stroke:kt,dashEnabled:bt,strokeWidth:wt,rowGridSelectionState:dt,columnGridSelectionState:pt}});var Bt=mv({shapeRef:A,isSelected:et,shapeRefStroke:"#fff",strokeEnabled:!1,controlStrokeRef:It}),Mt=Bt.onMouseOut,Lt=Bt.onMouseOver;(0,V.useEffect)((function(){var e,t,n,r,a,o=null===(e=E.current)||void 0===e?void 0:e.zIndex(),i=!1;v!==ft||Y().isUndefined(o)||(null===(t=E.current)||void 0===t||t.zIndex(((null===(n=te.current)||void 0===n?void 0:n.children.length)||N()(r=K.getData().items).call(r,(function(e){return e.parentId===oe})).length)-2),null===(a=E.current)||void 0===a||a.draw(),i=!0);return function(){var e;i&&!Y().isUndefined(o)&&(null===(e=E.current)||void 0===e||e.zIndex(o))}}),[v,oe]);var Rt=Cp(e,m),Ft=yv({id:se,refLineRef:m.refLineRef}),Tt=(0,V.useCallback)((function(e){var t=e.x,n=e.y,r=(e.scaleX,e.scaleY,e.width),a=e.height,o=m.dataContext,i=Ks(r,O),l=Ks(a,O);o.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[se,{x:Ks(t,O),y:Ks(n,O),width:i,height:l}]]))}),[se,O]),Nt=lv({id:se,shapeRef:E,refLineRef:m.refLineRef,context:m,onDragEnd:Rt,onDragMove:Ft,parentId:e.parentId,scale:O}),Gt=Nt.onDragStart,Zt=Nt.onDragMove,Qt=Nt.onDragEnd,Pt=Nt.dragBoundFunc,Jt=sv({id:se,shapeRef:D,refLineRef:m.refLineRef,onTransformEnd:Tt,context:m}),jt=Jt.onTransform,Ot=Jt.onTransformEnd,Ut=(0,V.useRef)(null),zt={stageRef:m.stageRef,rootControlRef:m.rootControlRef,selectedId:v!==ft&&se,id:se,dataContext:K,ref:Ut,isSelected:v!==ft&&$e&&!et},Wt=function(e){var t=e.evt||e;if(t.preventDefault(),v===ft){K.findControl(oe).language;var n=t.pageX,r=t.pageY;Q({x:n,y:r}),I||(B(!0),e.evt&&Yt())}},Kt=(0,V.useRef)({isSelection:!1,rowIndex:-1,columnIndex:-1,selection:{},operationType:"cell",operationMultiple:!1,contextRowIndex:void 0,contextColumnIndex:void 0,operationRowIndex:void 0,operationColumnIndex:void 0}),Vt=function(e){e.current.contextRowIndex=void 0,e.current.contextColumnIndex=void 0},Ht=(0,V.useCallback)((function(){var e=z.getSelection(),t=K.findControl(e);if(ua()(t).call(t,(function(e){return Zf(e)}))&&e.length>1){var n,r=P()(Fe).call(Fe,(function(t,n){var r=n.cells;return Z()(t).call(t,F()(r).call(r,(function(t){var n=t.id;return Bn()(e).call(e,n)})))}),[]),a=!1;1===r.length&&(a=!0);for(var o=new(fa()),i=new(fa()),l=new(fa()),u=new(fa()),c=new(fa()),d=!0,s=0;s<Be.length;s++){var f=Be[s],g=f.id,h=(f.rowId,f.columnId,f.row),v=f.column,p=f.mergeConfig;if(Bn()(e).call(e,g)&&(c.add(g),o.add(h),u.add(ge[h].rowType),u.size>1&&(d=!1),i.add(v),l.add(g),p))for(var m=p.rowStart,C=p.columnStart,y=p.rowLength,E=p.columnLength,D=m;D<=m+y-1;D++)for(var A=C;A<=C+E-1;A++){var k=Be[Ze(D,A)];if(k){var w=k.id,b=k.row,x=k.column;l.add(w),o.add(b),i.add(x)}}if(c.size===e.length)break}var S=(0,kn.c)(o),I=(0,kn.c)(i);if(_n()(n=[S,I]).call(n,(function(e){return!function(e){if(0===e.length)return!1;if(1===e.length)return!0;for(var t=0;t<e.length-1;t++)if(e[t]!==e[t+1]-1)return!1;return!0}(e)})))return!1;if(S.length*I.length===(0,kn.c)(l).length&&S.length*I.length!=1)return{minRowNum:Math.min.apply(Math,(0,kn.c)(S)),minColumnNum:Math.min.apply(Math,(0,kn.c)(i)),maxRowNum:Math.max.apply(Math,(0,kn.c)(S)),maxColumnNum:Math.max.apply(Math,(0,kn.c)(i)),isSameRowType:d,isOnlyOneRowData:a}}return!1}),[se,Be,ge,Fe]),qt=function(e){var t,n,r,a,o,i,l=e.minRowNum,u=e.maxRowNum,c=e.minColumnNum,d=e.maxColumnNum,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O;if(void 0!==l&&void 0!==u&&void 0!==c&&void 0!==d){(0,ie.c)(Kt.current.selection,{minRowNum:l,maxRowNum:u,minColumnNum:c,maxColumnNum:d});for(var f=Be[Ze(l,c)],g=f.row,h=f.id,v=Yn()(t=Fe[g].cells).call(t,(function(e){return e.id===h})),p=v.x,m=v.y,C=0,y=0,E=l;E<=u;E++){var D=Ge({row:E,column:c});D.width;y+=D.height}for(var A=c;A<=d;A++){var k=Ge({row:l,column:A}),w=k.width;k.height;C+=w}C=Ws(C,s),y=Ws(y,s),null===(n=b.current)||void 0===n||n.position({x:Ws(p,s),y:Ws(m,s)}),null===(r=b.current)||void 0===r||r.width(C),null===(a=b.current)||void 0===a||a.height(y),null===(o=b.current)||void 0===o||o.visible(!0),null===(i=b.current)||void 0===i||null===(i=i.getLayer())||void 0===i||i.batchDraw()}},Yt=function(){var e=JC(ge),t=JC(ve),n=!1;return Kt.current.operationType="cell",Kt.current.operationRowIndex=void 0,Kt.current.operationColumnIndex=void 0,Y().isEqual(e,dt)||(gt(e),n=!0),Y().isEqual(t,pt)||(mt(t),n=!0),n},Xt=function(e){var t=e.type,n=e.index,r=e.isMult,a=e.reset,o=void 0!==a&&a,i=(e.isSelectedGrid,e.isShiftKey),l=void 0!==i&&i;if(Vt(Kt),o)Yt();else{J(),_t();var u=[],c=[],d=!1,s=Kt.current,f=s.rowIndex,g=s.columnIndex,h=s.originClickType,v=s.originTitleIndex,p="row"===t,m="cell"===h?p?f:g:v;Kt.current.operationType=p?"row":"column",Kt.current.operationRowIndex=p?n:void 0,Kt.current.operationColumnIndex=p?void 0:n;var C=function(e,t,n){for(var r=JC(e),a=t;a<=n;a++)r[e[a].id].visible=!0;return Y().cloneDeep(r)};if(l){var y=Math.min(m,n),E=Math.max(m,n);if(p){gt((function(){return C(ge,y,E)})),mt(JC(ve));for(var D=function(e){var t;(t=u).push.apply(t,(0,kn.c)(Qn()({length:Re},(function(t,n){return Be[Ze(e,n)].id}))))},A=y;A<=E;A++)D(A)}else{mt((function(){return C(ve,y,E)})),gt(JC(ge));for(var k=function(e){var t;(t=u).push.apply(t,(0,kn.c)(Qn()({length:Le},(function(t,n){return Be[Ze(n,e)].id}))))},w=y;w<=E;w++)k(w)}}else{var b=p?ge[n]:ve[n];r?(p?gt:mt)((function(e){return d=!e[b.id].visible,e[b.id].visible=d,Y().cloneDeep(e)})):p?(gt((function(){var e=JC(ge);return d=!e[b.id].visible,e[b.id].visible=d,Y().cloneDeep(e)})),mt(JC(ve))):(mt((function(){var e=JC(ve);return d=!e[b.id].visible,e[b.id].visible=d,Y().cloneDeep(e)})),gt(JC(ge))),u=Qn()({length:p?Re:Le},(function(e,t){return Be[Ze(p?n:t,p?t:n)].id}))}if(r||l)Kt.current.operationMultiple=!0;else{Kt.current.operationMultiple=!1;var x=z.getSelection();c=F()(x).call(x,(function(e){return e!==se}))}if(l)z.setSelect(u);else{var S,I,B,M,L=F()(S=z.getSelection()).call(S,(function(e){return!Bn()(c).call(c,e)})),R=d?F()(I=(0,kn.c)(new(fa())(Z()(B=[]).call(B,(0,kn.c)(L),(0,kn.c)(u))))).call(I,(function(e){return e!==se})):F()(M=F()(L).call(L,(function(e){return!Bn()(u).call(u,e)}))).call(M,(function(e){return e!==se}));z.setSelect(R.length>0?R:[K.getRootId()])}}},_t=(0,V.useCallback)((function(){var e,t;(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(Kt.current.selection={}),null===(e=b.current)||void 0===e||e.visible(!1),null===(t=b.current)||void 0===t||t.draw(),Kt.current.isSelection=!1}),[]);(0,V.useEffect)((function(){var e=function(e){_t(!1),ue()((function(){var t=Kt.current.selection;qt(t,e)}))};return re.current.push(e),function(){var t;re.current=F()(t=re.current).call(t,(function(t){return t!==e}))}}),[qt,_t,O]),(0,V.useEffect)((function(){var e=z.addSelectChangeListener((function(e){var t=e.value;if(_n()(t).call(t,(function(e){for(var t=K.findControl(e).parentId,n=e;t;){if(t===se||se===n)return!1;if(t===oe)return!0;var r=K.findControl(t);t=null==r?void 0:r.parentId,n=null==r?void 0:r.id}return!1}))||0===t.length)return v!==st&&(p(st),_t()),void Xt({reset:!0})})),t=K.addDataChangeListener((function(){ue()((function(){_t(!1)}))}));return function(){t(),e()}}),[se,v,Xt,e,oe,qt,_t]);var $t=(0,V.useCallback)((function(){if(Kt.current.isSelection){var e,t=[],n=Kt.current.selection,r=n.minRowNum,a=n.maxRowNum,o=n.minColumnNum,i=n.maxColumnNum;if(ua()(e=[r,a,o,i]).call(e,(function(e){return!Y().isUndefined(e)}))){for(var l=function(e,t,n,r,a){for(var o=mg(e,t,r,a),i=function(e,t){var n=t.mergeConfig;if(!n)return e;var r=n.columnStart,a=n.columnLength;return Math.max(e,r+a-1)},l=n,u=o(l,i);u>l;)u=o(l=u,i);return l}(r,a,i,Be,Ze),u=function(e,t,n,r,a){for(var o=mg(e,t,r,a),i=function(e,t){var n=t.mergeConfig;if(!n)return e;var r=n.columnStart;return Math.min(e,r)},l=n,u=o(l,i);u<l;)u=o(l=u,i);return l}(r,a,o,Be,Ze),c=r;c<=a;c++)for(var d=u;d<=l;d++)t.push(Be[Ze(c,d)].id);Y().isEqual(t,z.getSelection())||z.setSelect(t)}}Kt.current.isSelection=!1}),[Be]);(0,W.useOnClickOutside)([k],(function(){J()}),!1),(0,V.useEffect)((function(){var e=function(){$t()};return window.addEventListener("mouseup",e),function(){window.removeEventListener("mouseup",e)}}),[$t]),(0,V.useEffect)((function(){var e;(v!==ft&&_t(),v!==st)&&(null===(e=w.current)||void 0===e||e.handlePassGridActionGuide())}),[v]);var en=function(e,t,n,r){Ue(e,t,n,r),_t()},tn=function(e,t,n,r){We(e,t,n,r),_t()},nn=(0,V.useMemo)((function(){return Ie.length&&it?N()(Ie).call(Ie,(function(e,t){return H().createElement(PC,{key:"tempalte_row_".concat(t),cells:e,isTemplate:!0,cellBackColor:"#F5F8FC"})})):null}),[Ie,it]),rn=N()(Fe).call(Fe,(function(e,t){var n;return H().createElement(PC,{key:Z()(n="".concat(e.row.id,"_row_")).call(n,t),cells:e.cells,row:e.row})})),an=(0,V.useMemo)((function(){return{gridState:v,gridX:Et,gridY:Dt,gridBorderType:Xe,isEditorGridState:v===ft,removeGridSelection:_t}}),[v,Et,Dt,Xe,_t]);return H().createElement(H().Fragment,null,H().createElement(nv.Group,{draggable:v!==ft,width:Ct,height:yt,x:Et,y:Dt,scale:{x:1,y:1},onDragStart:Gt,onDragMove:Zt,onDragEnd:Qt,onMouseOver:Lt,onMouseOut:Mt,onContextMenu:Wt,onDblClick:function(e){v!==ft&&(p(ft),e.cancelBubble=!0)},onMouseDown:function(e){J(),v!==ft&&p("2"),v!==ft&&_e(e),function(e){if(0===e.evt.button||2===e.evt.button){var t=null==e?void 0:e.target;if(v===ft){var n,r,a,o=null===(n=t.id().split("_"))||void 0===n?void 0:n[0];if(o&&!Zf(K.findControl(o)))return;var i=e.evt,l=i.layerX,u=i.layerY,c=ee(),d=c.x,s=c.y,f=Ws((null==ot?void 0:ot.y)||0,O),g=Je(u-Dt-s-f,Qe,Te),h=je(l-Et-d);if(-1===g||-1===h)return;if(2===e.evt.button)return Kt.current.contextRowIndex=g,void(Kt.current.contextColumnIndex=h);Vt(Kt),Kt.current.isSelection=!0;var p=Kt.current.selection;Kt.current.rowIndex=g,Kt.current.columnIndex=h,Kt.current.originClickType="cell",p.rowStart=Kt.current.rowIndex,p.columnStart=Kt.current.columnIndex,p.minRowNum=void 0,p.maxRowNum=void 0,p.minColumnNum=void 0,p.maxColumnNum=void 0,Kt.current.operationType="cell",Kt.current.operationMultiple=!1,null===(r=b.current)||void 0===r||r.visible(!1),null===(a=b.current)||void 0===a||a.draw(),Xt({reset:!0})}}}(e)},onMouseMove:function(e){if(Kt.current.isSelection){var t=e.evt,n=t.layerX,r=t.layerY,a=ee(),o=a.x,i=a.y,l=Ws((null==ot?void 0:ot.y)||0,O),u=Je(r-Dt-i-l,Qe,Te),c=je(n-Et-o);if(-1===u||-1===c)return;var d=Kt.current.selection,s=u,f=c;if(s===d.rowEnd&&f===d.columnEnd)return;d.rowEnd=s,d.columnEnd=f;var g,h,v=d.rowStart,p=void 0===v?0:v,m=d.columnStart,C=void 0===m?0:m,y=d.rowEnd,E=void 0===y?0:y,D=d.columnEnd,A=void 0===D?0:D;if(p===E&&C===A)return null===(g=b.current)||void 0===g||g.visible(!1),void(null===(h=b.current)||void 0===h||h.draw());for(var k=Math.min(p,E),w=Math.min(C,A),x=Math.max(p,E),S=Math.max(C,A),I=k,B=x,M=w,L=S,R=k;R<=x;R++)for(var F=w;F<=S;F++){var T=Be[Ze(R,F)].mergeConfig;if(T){var N=T.rowStart,G=T.columnStart,Z=T.rowLength,Q=T.columnLength;I=Math.min(I,N),B=Math.max(B,N+Z-1),M=Math.min(M,G),L=Math.max(L,G+Q-1)}}(0,ie.c)(d,{minRowNum:I,minColumnNum:M,maxRowNum:B,maxColumnNum:L}),qt(d)}},onMouseUp:$t,ref:E,id:se,dragBoundFunc:Pt,name:Z()(n=Z()(r=Z()(a="".concat("grid"," ")).call(a,we," ")).call(r,be," ")).call(n,xe)},H().createElement(nv.Rect,{width:Ct,height:yt,scale:{x:1,y:1},onTransform:jt,onTransformEnd:Ot,ref:D,strokeEnabled:!1,name:Z()(o=Z()(i="".concat(se," ")).call(i,be," ")).call(o,xe)}),H().createElement(Dn.Provider,{value:an},nn,Ie.length>0&&lt&&H().createElement(nv.Rect,{key:"grid-temp-rect",name:"grid-temp-rect",listening:!1,opacity:1,fill:"#F5F8FC",x:0,y:Ws(Qe,O),width:Ct,height:Ws(Te,O)}),Ie.length>0&&H().createElement(nv.Text,{key:"grid-template-text",name:"grid-template-text",listening:!1,verticalAlign:"middle",align:"center",text:it?(0,W.getLangMsg)("printd.components.key0041"):(0,W.getLangMsg)("printd.components.key0069"),opacity:1,fill:"#E45D5D",fontSize:18,x:0,y:Ws(Qe,O),width:Ct,height:Ws(Te,O),onContextMenu:function(e){"Text"===e.currentTarget.getType()&&(e.cancelBubble=!0)}}),rn),H().createElement(nv.Rect,{key:"grid-selection-rect",name:"grid-selection-rect ".concat(Me),ref:b,listening:!1,visible:!1,x:0,y:0,width:0,height:0,fill:"#99CCFF",strokeEnabled:!0,stroke:"#0E5FD8",strokeWidth:1,hitStrokeWidth:0,opacity:.4,strokeHitEnabled:!1}),F()(l=N()(u=C()(dt)).call(u,(function(e){var t,n=dt[e],r=n.id,a=n.visible,o=n.index,i=(n.data,"grid-selection-row-".concat(r));if(!ge[o])return null;var l=0;Ne>-1&&o>Ne&&Te&&(l=Te);var u={x:0,y:Ws(o&&uf(Sn()(ge).call(ge,0,o)),O)+Ws(l,O),width:Ws(uf(ve),O),height:Ws(ge[o].rowHeight,O)};return a&&H().createElement(nv.Rect,(0,ie.c)({key:i,name:Z()(t="".concat(i," ")).call(t,Me),listening:!1,visible:a},u,{fill:"#99CCFF",strokeEnabled:!0,stroke:"#0E5FD8",strokeWidth:1,hitStrokeWidth:0,opacity:.4,strokeHitEnabled:!1}))}))).call(l,Boolean),F()(c=N()(d=C()(pt)).call(d,(function(e){var t,n=pt[e],r=n.id,a=n.visible,o=n.index,i=(n.data,"grid-selection-column-".concat(r));if(!ve[o])return null;var l={y:0,x:Ws(o&&uf(Sn()(ve).call(ve,0,o)),O),height:Ws(uf(ge),O)+Ws(Te,O),width:Ws(ve[o].columnWidth,O)};return a&&H().createElement(nv.Rect,(0,ie.c)({key:i,name:Z()(t="".concat(i," ")).call(t,Me),listening:!1,visible:a},l,{fill:"#99CCFF",strokeEnabled:!0,stroke:"#0E5FD8",strokeWidth:1,hitStrokeWidth:0,opacity:.4,strokeHitEnabled:!1}))}))).call(c,Boolean),H().createElement(nv.Rect,{width:Ct,height:yt,visible:!0,listening:!1,scale:{x:1,y:1},dash:xt,ref:A,stroke:kt,dashEnabled:bt,strokeWidth:wt,shadowForStrokeEnabled:!1,strokeScaleEnabled:!1,hitStrokeWidth:0,strokeEnabled:!St,name:Z()(s=" ".concat(xe," ")).call(s,Se)})),H().createElement(xp,zt),v===ft&&H().createElement(NC,(f={gridType:Ae,gridSelectionContext:Kt.current,maxLimitWidthChange:qe,maxLimitHeightChange:Ye,x:!0},(0,L.c)((0,L.c)((0,L.c)((0,L.c)((0,L.c)((0,L.c)((0,L.c)((0,L.c)((0,L.c)((0,L.c)(f,"x",q+Et+(Yf(ot)?Ws(ot.x,O):0)),"y",X+Dt+(Yf(ot)?Ws(ot.y,O):0)),"containerWidth",Ct),"containerHeight",yt),"templateRowData",Ie),"templateRowHeight",Te),"scrollTop",de),"scrollLeft",ce),"rowTitleSelection",dt),"columnTitleSelection",pt),(0,L.c)((0,L.c)((0,L.c)((0,L.c)((0,L.c)((0,L.c)((0,L.c)((0,L.c)((0,L.c)((0,L.c)(f,"changeRow",en),"tableTailId",at),"changeColumn",tn),"handleGridSelection",Xt),"onContextMenu",Wt),"portalRef",U),"scale",O),"rows",ge),"columns",ve),"subGridId",tt),(0,L.c)((0,L.c)((0,L.c)(f,"addSubDataGrid",nt),"gridState",v),"isShowAddSubGridBtn",rt))),ae&&H().createElement(RC,{x:q+Et,y:X+Dt,portalRef:U,ref:w}),v===ft&&I&&H().createElement(IC,(0,ie.c)({ref:k},G,{gridSelectionContext:Kt.current,addRow:Pe,hideContextMenu:J,addColumn:Oe,mergeConfig:me,gridType:Ae,rowData:Fe,deleteRow:ze,deleteColumn:Ke,originCells:Be,getCellIdx:Ze,changeRow:en,changeColumn:tn,addMerge:function(){Ve.apply(void 0,arguments),_t(!0)},removeMerge:function(){He.apply(void 0,arguments),_t()},calcSelectionCanMerge:Ht,rowCount:Le,columnCount:Re,rows:ge,subGridId:tt,selectionContext:z,dataContext:K})))}),(function(e,t){return kp(e,t)})),OC=jC,UC=function(e){var t=(0,V.useRef)(null);return!!_.isEqual(e,t.current)},zC=["key"];function WC(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function KC(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?U()(n=WC(Object(a),!0)).call(n,(function(t){(0,L.c)(e,t,a[t])})):b()?S()(e,b()(a)):U()(r=WC(Object(a))).call(r,(function(t){B()(e,t,k()(a,t))}))}return e}var VC=function(e){return"up"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"up")?e:e+1},HC=function(e,t){return lr(e.definition,(function(e){if(e.dataSource===t)return!0}))},qC=function(e,t,n,r,a,o,i){for(var l=t;l<=t+n-1;l++)for(var u=r;u<=r+a-1;u++){var c,d;if(null!==(c=o[i(l,u)])&&void 0!==c&&c.mergeConfig){var s,f=o[i(l,u)].mergeConfig,g=f.rowStart,h=f.columnStart;e[Z()(s="".concat(g,"_")).call(s,h)]=void 0}e[Z()(d="".concat(l,"_")).call(d,u)]=void 0}},YC=[],XC=function(e){var t=e.data,n=(0,V.useContext)(An),r=(0,V.useContext)(yn),a=n.activedSelectId,o=t.mergeConfig,i=void 0===o?{}:o,l=t.id,u=t.fixedRowAtPage,c=t.fixedRowCount,d=void 0===c?1:c,s=t.height,f=t.width,g=t.x,h=t.y,v=t.borderType,p=t.subGridId,m=t.dataSource,C=(t.type,t.pagePrint),y=t.pagePrintN,E=(t.key,(0,Wn.c)(t,zC)),D=r.globalConfig,A=r.dataContext,k=Pf(t),w=A.getRootId(),b=A.findControl(w).language,x=(0,V.useState)((function(){var e;return k&&!u&&!!m&&!(null===(e=HC(D,m))||void 0===e||null===(e=e.SubEntryList)||void 0===e||!e.length)})),S=(0,M.c)(x,2),I=S[0],B=S[1];(0,V.useEffect)((function(){var e,t=k&&!u&&!!m&&!(null===(e=HC(D,m))||void 0===e||null===(e=e.SubEntryList)||void 0===e||!e.length);t!==I&&B(t)}),[I,m,D,_s(A),k,b,u]);var R=Pp(KC(KC({},r),{},{activedSelectId:a}),l),T=R.handleMouseDown,G=R.isSelected,Q=R.isLastSelected,P=r.scale,J=void 0===P?1:P,O=r.selectionContext,U=r.setMessage,z=r.pageWidth,K=r.pageHeight,q=r.dataFactory,X=(A.getMeta(),$f(A,l)),_=X.items,$=X.allItems,ee=Hs(z-f-g,1)>=0?Hs(z-f-g,1):Om(),te=Hs(K-s-h,1)>=0?Hs(K-s-h,1):Om(),ne=q;W.console.log("KDgrid",_);var re=df(_),ae=re.rows,oe=void 0===ae?[]:ae,le=re.columns,ue=void 0===le?[]:le,ce=re.cells,de=void 0===ce?[]:ce,se=re.rowData,ge=re.columnData,he=UC(de),ve=UC(t),pe=UC($),me=(0,V.useMemo)((function(){return _f(t)?N()(de).call(de,(function(e){var t=e.id;return F()($).call($,(function(e){return e.parentId===t}))})):YC}),[ve,he,pe]),Ce=N()(me).call(me,(function(e){return e.id})),ye=N()(de).call(de,(function(e){return e.id})),Ee=(0,V.useState)((function(){var e;return F()(e=O.getSelection()).call(e,(function(e){if(Bn()(ye).call(ye,e)||Bn()(Ce).call(Ce,e))return e}))})),De=(0,M.c)(Ee,2),Ae=De[0],ke=De[1];(0,V.useEffect)((function(){var e=O.addSelectChangeListener((function(){var e,t=F()(e=O.getSelection()).call(e,(function(e){if(Bn()(ye).call(ye,e)||Bn()(Ce).call(Ce,e))return e}));ef()(t).call(t)!==ef()(Ae).call(Ae)&&ke(t)}));return function(){e&&e()}}),[Ae,Ce,ye]);var we=(0,V.useMemo)((function(){return{templateRowCount:k?d:y,fixedRowAtPage:k?u:C}}),[k,d,u,y,C]),be=cf(KC({columns:ue,rows:oe,cells:de,mergeConfig:i,allItems:$,gridData:t},we)),xe=be.templateRowData,Se=be.originCells,Ie=be.rowData,Be=be.templateRowHeight,Me=be.templateRowIndex,Le=be.templateRowY,Re=be.rowCount,Fe=be.columnCount,Te=j()(oe),Ne=j()(ue),Ge=(0,V.useCallback)(af({rows:oe,columns:ue}),[Te,Ne]),Ze=(0,V.useCallback)(function(e){return lf(e)}(Fe),[Fe]),Qe=(0,V.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"up",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:kt,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5?arguments[5]:void 0,i=A.getData().items,u=e,c=t;!1===r&&(n===kt?(u=0,c="up"):n===wt&&(u=oe.length-1,c="down"));for(var d=oe[u],s=Y().cloneDeep(d).id,f=(0,L.c)((0,L.c)((0,L.c)((0,L.c)((0,L.c)({},kt,(0,W.getLangMsg)("printd.components.key0043")),At,(0,W.getLangMsg)("printd.components.key0044")),wt,(0,W.getLangMsg)("printd.components.key0045")),bt,(0,W.getLangMsg)("printd.components.key0046")),xt,(0,W.getLangMsg)("printd.components.key0047")),g=(Yn()(i).call(i,(function(e){return e.id===l})),[]),h=fe()(i).call(i,(function(e){return e.id===s})),v=0;v<a;v++){var p=ne({type:"DataRow",parentId:l,transferData:{name:f[n],rowType:n}});g.push(p)}A.addControl((0,W.createAddAction)(g,{index:VC(h,c),rowIndex:u,direction:c})).then((function(e){if(o){var t=Yn()(e).call(e,(function(e){return"DataCell"===e.value[0].type})).value;O.setSelect(N()(t).call(t,(function(e){return e.id})))}}))}),[Te,l]),Pe=(0,V.useCallback)((function(e){var t=oe[e],n=t.id;return"Detail"===t.rowType?(U((0,W.getLangMsg)("printd.components.key0048")),void W.console.error((0,W.getLangMsg)("printd.components.key0048"))):1===oe.length?(0!==e&&W.console.error("unreachable error deleteRow action"),void A.deleteControl((0,W.createDeleteAction)(l)).then((function(){O.setSelect([])}))):(O.setSelect([l]),void A.deleteControl((0,W.createDeleteAction)(n)).then((function(){})))}),[Te,l]);W.console.log("maxLimitWidthChange max",[ee,z,f,g],[te,K,s,h]);var Je=(0,V.useCallback)((function(e){for(var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"up",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=ue[e],i=Y().cloneDeep(o),u=i.type,c=i.id,d=A.getData().items,s=(Yn()(d).call(d,(function(e){return e.id===l})),[]),f=fe()(d).call(d,(function(e){return e.id===c})),g=0;g<a;g++)if(n=void 0,n=ne({type:u,parentId:l}),t=void s.push(n))return t.v;A.addControl((0,W.createAddAction)(s,{index:VC(f,r),columnIndex:e,direction:r}))}),[Ne,l]),je=(0,V.useCallback)((function(e){var t=ue[e].id;if(1===ue.length)return 0!==e&&W.console.error("unreachable error deleteRow action"),void A.deleteControl((0,W.createDeleteAction)(l)).then((function(){O.setSelect([])}));O.setSelect([l]),A.deleteControl((0,W.createDeleteAction)(t)).then((function(){}))}),[Ne,l]),Oe=(0,V.useCallback)((function(e){return function(t,n,r,a){var o="row"===e?oe:ue,i=o[t].id,u="row"===e?"rowHeight":"columnWidth",c="row"===e?"height":"width",d=(A.findControl(l)[c],o[t][u]),s=A.getData().items,f=[],g="row"===e?0===te:0===ee;if(a&&g&&t!==o.length-1&&g){var h="row"===e?3:5;if(a>0){var v=Sn()(o).call(o,t+1),p=uf(v),m=Math.min(Ks(a,J),p-h*v.length),C=Y().cloneDeep(Yn()(s).call(s,(function(e){return e.id===o[t].id})));C[u]=Hs(C[u]+m,1),f.push([C.id,(0,L.c)({},u,C[u])]);for(var y=function(e){if(0===m)return 1;var t=Y().cloneDeep(Yn()(s).call(s,(function(t){return t.id===o[e].id})));t[u]-h>=m?(t[u]=Hs(t[u]-m,1),f.push([t.id,(0,L.c)({},u,t[u])]),m-=m):(m=Hs(m-t[u]+h,1),t[u]=h,f.push([t.id,(0,L.c)({},u,t[u])]))},E=t+1;E<o.length&&!y(E);E++);}else{var D=Y().cloneDeep(Yn()(s).call(s,(function(e){return e.id===o[t].id}))),k=Hs(Math.max(D[u]+Ks(a,J),h),1),w=D[u]-k;D[u]=k,f.push([D.id,(0,L.c)({},u,D[u])]);var b=Y().cloneDeep(Yn()(s).call(s,(function(e){return e.id===o[t+1].id})));b[u]=Hs(b[u]+w,1),f.push([b.id,(0,L.c)({},u,b[u])])}A.batchUpdateControlPropertyValues((0,W.createUpdateAction)(f))}else{var x=Y().cloneDeep(Yn()(s).call(s,(function(e){return e.id===i})));x[u]=Hs(d+Ks(n,J),1),f.push([x.id,(0,L.c)({},u,x[u])]),A.batchUpdateControlPropertyValues((0,W.createUpdateAction)(f))}}}),[l,J,te,ee,Te,Ne]),Ue=(0,V.useCallback)(Oe("row"),[Oe]),ze=(0,V.useCallback)(Oe("column"),[Oe]),We=(jf(t),(0,V.useCallback)((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=0,a=Ws(t,J),o=Ws(n,J);W.console.log("getRowIndexlocateByPosition",e,oe,re,_,A.getData());for(var i=k?fe()(oe).call(oe,(function(e){return e.rowType===At})):oe.length-1,l=0;l<oe.length;l++){var u=oe[l].rowHeight,c=Ws(u,J);if(a>-1&&o>0){if(e>a&&e<a+o)return-1;if(l>i){if(e>=r+o&&e<=c+r+o)return l}else if(e>=r&&e<=c+r)return l}else if(e>=r&&e<=c+r)return l;r+=c}return-1}),[J,Te])),Ke=(0,V.useCallback)((function(e){var t=0;W.console.log("getRowIndexlocateByPosition getColumnIndexlocateByPosition",e);for(var n=0;n<ue.length;n++){var r=ue[n].columnWidth,a=Ws(r,J);if(e>=t&&e<=a+t)return n;t+=a}return-1}),[J,Ne]),Ve=(0,V.useCallback)((function(e){var t,n=e.rowStart,r=e.rowLength,a=e.columnStart,o=e.columnLength,i=A.findControl(l),u=A.getData().items,c=Y().cloneDeep(i.mergeConfig||{});qC(c,n,r,a,o,Se,Ze);var d={mergeConfig:(0,ie.c)({},c,(0,L.c)({},Z()(t="".concat(n,"_")).call(t,a),{rowStart:n,rowLength:r,columnStart:a,columnLength:o}))};d.mergeConfig=Y().omitBy(d.mergeConfig,Y().isUndefined);var s=Y().cloneDeep(Yn()(u).call(u,(function(e){return e.id===l})));s.mergeConfig=d.mergeConfig;var f=ug(s,u);A.batchUpdateControlPropertyValues((0,W.createUpdateAction)(Z()(f).call(f,[[l,d]]))).then((function(){O.setSelect([Se[Ze(n,a)].id])}))}),[Ie,l,Se,Ze]),He=(0,V.useCallback)((function(e){var t=e.rowStart,n=e.rowLength,r=e.columnStart,a=e.columnLength,o=A.findControl(l),i=A.getData().items,u=Y().cloneDeep(o.mergeConfig||{});qC(u,t,n,r,a,Se,Ze);var c=Y().cloneDeep(Yn()(i).call(i,(function(e){return e.id===l}))),d={mergeConfig:Y().omitBy((0,ie.c)({},o.mergeConfig,u),Y().isUndefined)};c.mergeConfig=d.mergeConfig;var s=ug(c,i,!0);A.batchUpdateControlPropertyValues((0,W.createUpdateAction)(Z()(s).call(s,[[l,d]])))}),[l,Se]),qe=(0,V.useCallback)((function(e){var t=Of(A).width,n=Hs(t/2,1),r=0===g&&t-f<1,a="right"===e?{x:r?n:Hs(g+f,1),y:h,width:r?n:Hs(t-g-f,1)}:{x:g,y:Hs(h+s,1),width:f},o=KC(KC({parentGridId:l},a),{},{subGridDirection:e}),i=ne({type:gt,parentId:A.getRootId(),transferData:o});A.addControl((0,W.createAddAction)(i,{transferData:o})).then((function(e){var t;W.console.log("addSubDataGrid",e),(null===(t=e[0])||void 0===t||null===(t=t.value)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.id)&&O.setSelect([e[0].value[0].id])}))}),[l,g,h,s,f]);return H().createElement(OC,(0,ie.c)({},e,re,E,{gridBorderType:v,templateRowData:xe,rowItemData:se,columnItemData:ge,addRow:Qe,originCells:Se,rowCount:Re,columnCount:Fe,rowData:Ie,templateRowHeight:Be,templateRowIndex:Me,getCellPosition:Ge,getCellIdx:Ze,templateRowY:Le,changeRow:Ue,deleteRow:Pe,addColumn:Je,changeColumn:ze,deleteColumn:je,removeMerge:He,addMerge:Ve,getRowIndexlocateByPosition:We,getColumnIndexlocateByPosition:Ke,maxLimitWidthChange:ee,maxLimitHeightChange:te,handleMouseDown:T,isSelected:G,isLastSelected:Q,cellItems:me,subGridId:p,addSubDataGrid:qe,isShowAddSubGridBtn:I,scale:J,cellItemsSelection:Ae}))},_C=["x","y","width","height","border","name","id","childItems","isLastSelected","handleMouseDown","isSelected"];var $C=(0,V.memo)((0,V.forwardRef)((function(e,t){var n,r,a,o,i,l,u=(0,V.useContext)(yn),c=u.selectionContext,d=u.dataContext,s=u.pageWidth,f=(c.getSelection(),u.scale),g=void 0===f?1:f,h=u.contextStrokeEnabled,v=u.pixelRatio,p=(0,V.useRef)(null),m=(0,V.useRef)(null);W.console.log(u,u.refLineRef.searchRefLines);var C=e.x,y=void 0===C?0:C,E=e.y,D=void 0===E?0:E,A=e.width,k=e.height,w=e.border,b=e.name,x=e.id,S=e.childItems,I=void 0===S?[]:S,B=e.isLastSelected,M=e.handleMouseDown,L=e.isSelected,R=(0,Wn.c)(e,_C);fv({isSelected:L,refs:[p],pixelRatio:v,scale:g,currentProp:{x:y,y:D,width:A,height:k,name:b,id:x,childItems:I}});var F=cp({x:y,y:D,id:x,width:A,height:k,border:w,scale:g,isSelected:L,contextStrokeEnabled:h}),T=F.stroke,G=F.strokeWidth,Q=(F.strokeEnabled,F.dashEnabled),J=F.defaultDash,j=F.customedStrokeElement,O=F.controlStrokeRef,U=mv({strokeEnabled:!0,shapeRef:m,isSelected:B,shapeRefStroke:T,controlStrokeRef:O}),z=U.onMouseOut,K=U.onMouseOver,q=yp(k,g),Y=yp(A,g),X=q,_=Ws(y,g),$=Ws(D,g),ee=(0,V.useCallback)((function(e){var t=e.x,n=e.y;u.dataContext.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[x,{x:Ks(t,g),y:Ks(n,g)}]]))}),[x,g]),te=(0,V.useCallback)((function(e){e.x,e.y,e.scaleX,e.scaleY;var t,n,r=e.width,a=e.height,o=d.getRootId(),i=d.findControlByCondition((function(e){return e.parentId===x})),l=P()(i).call(i,(function(e,t){var n=t.y,r=t.height;return n+r>e?n+r:e}),5),u=Ks(r,g);u!==s&&(u=s);var c=Ks(a,g);c<l?c=Math.min(l,80):c>80&&(c=80);var f=d.findControlByCondition((function(e){var t=e.y,n=e.type,r=e.parentId;return"Header"!==n&&"Footer"!==n&&r===o&&t<c})),h=N()(t=f||[]).call(t,(function(e){return[e.id,{y:c}]}));W.console.log("onTransformEndAction-------",c,h),d.batchUpdateControlPropertyValues((0,W.createUpdateAction)(Z()(n=[[x,{x:0,y:0,width:u,height:c}]]).call(n,(0,kn.c)(h))))}),[x,g,d,s]),ne=lv({id:x,shapeRef:p,refLineRef:u.refLineRef,context:u,onDragEnd:ee,parentId:e.ParentId,scale:g}),re=(ne.onDragStart,ne.onDragMove,ne.onDragEnd,ne.dragBoundFunc,sv({id:x,shapeRef:m,refLineRef:u.refLineRef,onTransformEnd:te,context:u})),ae=re.onTransform,oe=re.onTransformEnd,le={stageRef:u.stageRef,rootControlRef:u.rootControlRef,selectedId:x,isSelected:L&&!B};return H().createElement(H().Fragment,null,H().createElement(nv.Group,(0,ie.c)({height:X,width:Y,clipX:0,clipY:0,clipWidth:Y,clipHeight:X,onMouseOut:z,onMouseOver:K,ref:p},R,{x:_,y:$,draggable:!1,clipX:0,clipY:0,clipWidth:Y,clipHeight:X,id:x,name:Z()(n=Z()(r="".concat(we," ")).call(r,be," ")).call(n,xe)}),H().createElement(nv.Text,{height:X,width:Y,x:0,y:0,text:(0,W.getLangMsg)("printd.grid.key0033"),fill:"#E5E5E5",verticalAlign:"middle",align:"center",name:Z()(a="".concat(xe," ")).call(a,Ie),fontSize:18,hitStrokeWidth:0}),H().createElement(nv.Rect,{id:"".concat(x,"_rect"),height:X,width:Y,name:Z()(o=Z()(i=Z()(l="".concat(x," ")).call(l,be," ")).call(i,xe," ")).call(o,Se),fill:"transparent",onTransform:ae,onTransformEnd:oe,onMouseDown:M,dashEnabled:Q,dash:J,scale:{x:1,y:1},ref:m,stroke:T,strokeWidth:G,shadowForStrokeEnabled:!1,strokeScaleEnabled:!1,hitStrokeWidth:0,alpha:1,strokeEnabled:!0}),I&&Zy(I,!0),j),H().createElement(xp,(0,ie.c)({},le,{enabledAnchors:["bottom-center"]})))})),kp),ey=$C,ty=["key"];function ny(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function ry(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?U()(n=ny(Object(a),!0)).call(n,(function(t){(0,L.c)(e,t,a[t])})):b()?S()(e,b()(a)):U()(r=ny(Object(a))).call(r,(function(t){B()(e,t,k()(a,t))}))}return e}var ay=function(e){var t=(0,V.useContext)(yn),n=t.dataContext,r=t.scale,a=void 0===r?1:r,o=e.data,i=o.key,l=(0,Wn.c)(o,ty),u=o.id,c=(0,V.useContext)(yn),d=(0,V.useContext)(An).activedSelectId,s=Pp(ry(ry({},c),{},{activedSelectId:d}),u),f=s.handleMouseDown,g=s.isSelected,h=s.isLastSelected,v=n.findControlByCondition((function(e){return e.parentId===u}))||[];return H().createElement(ey,(0,ie.c)({},l,{dataKey:i,scale:a,childItems:v,isLastSelected:h,isSelected:g,handleMouseDown:f}))},oy=["x","y","width","height","border","name","id","childItems","isLastSelected","handleMouseDown","isSelected"],iy=(0,V.memo)((0,V.forwardRef)((function(e,t){var n,r,a,o,i,l=(0,V.useContext)(yn),u=l.selectionContext,c=l.dataContext,d=l.pageWidth,s=l.pageHeight,f=(u.getSelection(),l.scale),g=void 0===f?1:f,h=l.contextStrokeEnabled,v=l.pixelRatio,p=(0,V.useRef)(null),m=(0,V.useRef)(null);W.console.log(l,l.refLineRef.searchRefLines);var C=e.x,y=void 0===C?0:C,E=e.y,D=void 0===E?0:E,A=e.width,k=e.height,w=e.border,b=e.name,x=e.id,S=e.childItems,I=void 0===S?[]:S,B=e.isLastSelected,M=e.handleMouseDown,L=e.isSelected,R=(0,Wn.c)(e,oy);fv({isSelected:L,refs:[p],pixelRatio:v,scale:g,currentProp:{x:y,y:D,width:A,height:k,name:b,id:x,childItems:I}});var T=cp({x:y,y:D,id:x,width:A,height:k,border:w,scale:g,isSelected:L,contextStrokeEnabled:h}),G=T.stroke,Q=T.strokeWidth,J=(T.strokeEnabled,T.dashEnabled),j=T.defaultDash,O=T.customedStrokeElement,U=T.controlStrokeRef,z=mv({strokeEnabled:!0,shapeRef:m,isSelected:B,shapeRefStroke:G,controlStrokeRef:U}),K=z.onMouseOut,q=z.onMouseOver,Y=yp(k,g),X=yp(A,g),_=Y,$=Ws(y,g),ee=Ws(D,g),te=(0,V.useCallback)((function(e){var t=e.x,n=e.y;l.dataContext.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[x,{x:Ks(t,g),y:Ks(n,g)}]]))}),[x,g]),ne=(0,V.useCallback)((function(e){e.x,e.y,e.scaleX,e.scaleY;var t,n,r,a=e.width,o=e.height,i=c.getRootId(),l=c.findControlByCondition((function(e){return e.parentId===x})),u=Ks(o,g),f=Ks(a,g),h=P()(l).call(l,(function(e,t){var n=t.height;return n>e?n:e}),5);f!==d&&(f=d),u<=h?u=Math.min(h,80):u>80&&(u=80);var v=F()(t=N()(l).call(l,(function(e){var t=e.y,n=e.height,r=e.id;return t+n>u?[r,{y:u-n}]:null}))).call(t,Boolean),p=c.findControlByCondition((function(e){var t=e.y,n=e.type,r=e.height,a=e.parentId;return"Header"!==n&&"Footer"!==n&&a===i&&t+r>s-u})),m=N()(n=p||[]).call(n,(function(e){return[e.id,{y:s-u-e.height}]}));c.batchUpdateControlPropertyValues((0,W.createUpdateAction)(Z()(r=[[x,{x:0,width:f,height:u}]]).call(r,(0,kn.c)(m),(0,kn.c)(v))))}),[x,d,s,c,g]),re=lv({id:x,shapeRef:p,refLineRef:l.refLineRef,context:l,onDragEnd:te,parentId:e.ParentId,scale:g}),ae=(re.onDragStart,re.onDragMove,re.onDragEnd,re.dragBoundFunc,sv({id:x,shapeRef:m,refLineRef:l.refLineRef,onTransformEnd:ne,context:l})),oe=ae.onTransform,le=ae.onTransformEnd,ue={dataContext:c,stageRef:l.stageRef,rootControlRef:l.rootControlRef,selectedId:x,isSelected:L&&!B};return H().createElement(H().Fragment,null,H().createElement(nv.Group,(0,ie.c)({height:_,width:X,onMouseOut:K,onMouseOver:q,ref:p},R,{x:$,y:ee,draggable:!1,clipX:0,clipY:0,clipWidth:X,clipHeight:_,id:x,name:Z()(n=Z()(r="".concat(we," ")).call(r,be," ")).call(n,xe)}),H().createElement(nv.Text,{height:_,width:X,x:0,y:0,text:(0,W.getLangMsg)("printd.grid.key0030"),fill:"#E5E5E5",verticalAlign:"middle",align:"center",name:"".concat(xe),fontSize:18,hitStrokeWidth:0}),H().createElement(nv.Rect,{id:"".concat(x,"_rect"),x:0,y:0,height:_,width:X,name:Z()(a=Z()(o=Z()(i="".concat(x," ")).call(i,be," ")).call(o,xe," ")).call(a,Se),fill:"transparent",onTransform:oe,onTransformEnd:le,onMouseDown:M,dashEnabled:J,dash:j,scale:{x:1,y:1},ref:m,stroke:G,strokeWidth:Q,shadowForStrokeEnabled:!1,strokeScaleEnabled:!1,hitStrokeWidth:0,alpha:1,strokeEnabled:!0}),I&&Zy(I,!0),O),H().createElement(xp,(0,ie.c)({},ue,{enabledAnchors:["top-center"]})))})),kp),ly=iy,uy=["key"];function cy(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function dy(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?U()(n=cy(Object(a),!0)).call(n,(function(t){(0,L.c)(e,t,a[t])})):b()?S()(e,b()(a)):U()(r=cy(Object(a))).call(r,(function(t){B()(e,t,k()(a,t))}))}return e}var sy=function(e){var t=(0,V.useContext)(yn),n=t.dataContext,r=t.scale,a=void 0===r?1:r,o=e.data,i=o.key,l=(0,Wn.c)(o,uy),u=o.id,c=(0,V.useContext)(yn),d=(0,V.useContext)(An).activedSelectId,s=Pp(dy(dy({},c),{},{activedSelectId:d}),u),f=s.handleMouseDown,g=s.isSelected,h=s.isLastSelected,v=n.findControlByCondition((function(e){return e.parentId===u}))||[];return H().createElement(ly,(0,ie.c)({},l,{dataKey:i,scale:a,childItems:v,isLastSelected:h,isSelected:g,handleMouseDown:f}))},fy=["x","y","width","height","border","name","id","isLastSelected","handleMouseDown","isSelected"],gy=(0,V.memo)((0,V.forwardRef)((function(e,t){var n,r,a,o,i,l,u=(0,V.useContext)(yn),c=u.scale,d=void 0===c?1:c,s=u.contextStrokeEnabled,f=u.pixelRatio,g=(0,V.useContext)(Dn),h=g.gridState,v=g.isEditorGridState,p=void 0===v||v,m=Ep(),C=(0,V.useRef)(null),y=(0,V.useRef)(null);W.console.log(u,u.refLineRef.searchRefLines);var E=e.x,D=void 0===E?0:E,A=e.y,k=void 0===A?0:A,w=e.width,b=e.height,x=e.border,S=e.name,I=e.id,B=e.isLastSelected,M=e.handleMouseDown,L=e.isSelected,R=(0,Wn.c)(e,fy);fv({isSelected:L,refs:[C],pixelRatio:f,scale:d,currentProp:{x:D,y:k,width:w,height:b,name:S,id:I}});var F=cp({x:D,y:k,id:I,width:w,height:b,border:x,scale:d,isSelected:L,contextStrokeEnabled:s}),T=F.stroke,N=F.strokeWidth,G=F.strokeEnabled,Q=F.dashEnabled,P=F.defaultDash,J=F.customedStrokeElement,j=F.controlStrokeRef,O=mv({strokeEnabled:G,shapeRef:y,isSelected:B,shapeRefStroke:T,controlStrokeRef:j}),U=O.onMouseOut,z=O.onMouseOver,K=yp(b,d),q=yp(w,d),Y=K,X=(Ws(7,d),Ws(D,d)),_=Ws(k,d),$=Cp(e,u),ee=yv({id:I,refLineRef:u.refLineRef}),te=(0,V.useCallback)((function(e){var t=e.x,n=e.y,r=(e.scaleX,e.scaleY,e.width),a=e.height;u.dataContext.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[I,{x:Ks(t,d),y:Ks(n,d),width:Ks(r,d),height:Ks(a,d)}]]))}),[I,d]),ne=lv({id:I,shapeRef:C,refLineRef:u.refLineRef,context:u,onDragEnd:$,onDragMove:ee,parentId:e.parentId,scale:d}),re=ne.onDragStart,ae=ne.onDragMove,oe=ne.onDragEnd,le=ne.dragBoundFunc,ue=sv({id:I,shapeRef:y,refLineRef:u.refLineRef,onTransformEnd:te,context:u}),ce=ue.onTransform,de=ue.onTransformEnd,se={stageRef:u.stageRef,rootControlRef:u.rootControlRef,selectedId:I,isSelected:L&&!B};return H().createElement(H().Fragment,null,H().createElement(nv.Group,(0,ie.c)({height:Y,width:q,clipX:0,clipY:0,clipWidth:q,clipHeight:Y,onDragStart:re,onDragMove:ae,onDragEnd:oe,onMouseOut:U,onMouseOver:z,onMouseDown:M,onDblClick:function(e){m(e,h,M)},ref:C},R,{x:X,y:_,draggable:p,dragBoundFunc:le,clipX:0,clipY:0,clipWidth:q,clipHeight:Y,id:I,name:Z()(n=Z()(r="".concat(we," ")).call(r,be," ")).call(n,xe)}),H().createElement(nv.Rect,{width:q,height:Y,x:0,y:0,fill:"#f2f6ff"}),H().createElement(nv.Text,{height:Y,width:q,x:0,y:0,text:(0,W.getLangMsg)("printd.components.key0062"),fill:"#212121",verticalAlign:"middle",align:"center",name:Z()(a="".concat(xe," ")).call(a,Ie),fontSize:20,fontStyle:"bold",fontFamily:"Arial",hitStrokeWidth:0}),H().createElement(nv.Rect,{id:"".concat(I,"_rect"),height:Y,width:q,name:Z()(o=Z()(i=Z()(l="".concat(I," ")).call(l,be," ")).call(i,xe," ")).call(o,Se),fill:"transparent",onTransform:ce,onTransformEnd:de,dashEnabled:Q,dash:P,scale:{x:1,y:1},ref:y,stroke:T,strokeWidth:N,shadowForStrokeEnabled:!1,strokeScaleEnabled:!1,hitStrokeWidth:0,alpha:1,strokeEnabled:!0}),J),H().createElement(xp,se))})),kp),hy=gy,vy=["key"];function py(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function my(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?U()(n=py(Object(a),!0)).call(n,(function(t){(0,L.c)(e,t,a[t])})):b()?S()(e,b()(a)):U()(r=py(Object(a))).call(r,(function(t){B()(e,t,k()(a,t))}))}return e}var Cy=function(e){var t=e.data,n=t.key,r=(0,Wn.c)(t,vy),a=(0,V.useContext)(yn),o=(0,V.useContext)(An),i=(0,V.useContext)(Dn).gridState,l=t.id,u=o.activedSelectId,c=Pp(my(my({},a),{},{beforeMouseDown:Jp(i),activedSelectId:u}),l),d=c.handleMouseDown,s=c.isSelected,f=c.isLastSelected;return H().createElement(hy,(0,ie.c)({},r,{dataKey:n,isLastSelected:f,isSelected:s,handleMouseDown:d}))},yy=["x","y","width","height","border","name","id","childItems","isLastSelected","handleMouseDown","isSelected","activedSelectId"],Ey=(0,V.memo)((0,V.forwardRef)((function(e,t){var n,r,a,o,i,l=(0,V.useContext)(yn),u=l.selectionContext,c=l.dataContext,d=l.pageWidth,s=l.pageHeight,f=(u.getSelection(),l.scale),g=void 0===f?1:f,h=l.contextStrokeEnabled,v=l.pixelRatio,p=(0,V.useRef)(null),m=(0,V.useRef)(null);W.console.log(l,l.refLineRef.searchRefLines);var C=e.x,y=void 0===C?0:C,E=e.y,D=void 0===E?0:E,A=e.width,k=e.height,w=e.border,b=e.name,x=e.id,S=e.childItems,I=void 0===S?[]:S,B=e.isLastSelected,M=e.handleMouseDown,L=e.isSelected,R=e.activedSelectId,F=(0,Wn.c)(e,yy);fv({isSelected:L,refs:[p],pixelRatio:v,scale:g,currentProp:{x:y,y:D,width:A,height:k,name:b,id:x,childItems:I}});var T=cp({x:y,y:D,id:x,width:A,height:k,border:w,scale:g,isSelected:L,contextStrokeEnabled:h}),N=T.stroke,G=T.strokeWidth,Q=(T.strokeEnabled,T.dashEnabled),J=T.defaultDash,j=T.customedStrokeElement,O=T.controlStrokeRef,U=mv({strokeEnabled:!0,shapeRef:m,isSelected:B,shapeRefStroke:N,controlStrokeRef:O}),z=U.onMouseOut,K=U.onMouseOver,q=yp(k,g),Y=yp(A,g),X=q,_=Ws(y,g),$=Ws(D,g),ee=Cp(e,l),te=(0,V.useCallback)((function(e){var t=e.x,n=(e.y,e.scaleX,e.scaleY,e.width),r=e.height,a=(c.getRootId(),c.findControl(x)),o=c.findControl(a.parentGridId),i=c.findControlByCondition((function(e){return e.parentId===x})),l=Ks(r,g),u=Ks(n,g),d=P()(i).call(i,(function(e,t){var n=t.height;return n>e?n:e}),5);l<=d&&(l=Math.min(d,100)),o.width<u&&(u=o.width),c.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[x,{x:Ks(t),width:u,height:l}]]))}),[x,d,s,c,g]),ne=lv({id:x,shapeRef:p,refLineRef:l.refLineRef,context:l,onDragEnd:ee,parentId:e.ParentId,scale:g}),re=ne.onDragStart,ae=ne.onDragMove,oe=ne.onDragEnd,le=ne.dragBoundFunc,ue=sv({id:x,shapeRef:m,refLineRef:l.refLineRef,onTransformEnd:te,context:l}),ce=ue.onTransform,de=ue.onTransformEnd,se={stageRef:l.stageRef,rootControlRef:l.rootControlRef,selectedId:x,isSelected:L&&!B};return H().createElement(H().Fragment,null,H().createElement(nv.Group,(0,ie.c)({height:X,width:Y,onDragStart:re,onDragMove:ae,onDragEnd:oe,onMouseOut:z,onMouseOver:K,ref:p},F,{x:_,y:$,draggable:"LayoutCell"!==c.findControl(R).type,id:x,dragBoundFunc:le,name:Z()(n=Z()(r="".concat(we," ")).call(r,be," ")).call(n,xe)}),H().createElement(nv.Text,{height:X,width:Y,x:0,y:0,text:(0,W.getLangMsg)("printd.components.key0002"),fill:"#E5E5E5",verticalAlign:"middle",align:"center",name:"".concat(xe),fontSize:18,hitStrokeWidth:0}),H().createElement(nv.Rect,{id:"".concat(x,"_rect"),x:0,y:0,height:X,width:Y,name:Z()(a=Z()(o=Z()(i="".concat(x," ")).call(i,be," ")).call(o,xe," ")).call(a,Se),fill:"transparent",onTransform:ce,onTransformEnd:de,onMouseDown:M,dashEnabled:Q,dash:J,scale:{x:1,y:1},ref:m,stroke:N,strokeWidth:G,shadowForStrokeEnabled:!1,strokeScaleEnabled:!1,hitStrokeWidth:0,alpha:1,strokeEnabled:!0}),I&&Zy(I,!0),j),H().createElement(xp,(0,ie.c)({},se,{enabledAnchors:["top-center"]})))})),kp),Dy=Ey,Ay=["key"];function ky(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function wy(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?U()(n=ky(Object(a),!0)).call(n,(function(t){(0,L.c)(e,t,a[t])})):b()?S()(e,b()(a)):U()(r=ky(Object(a))).call(r,(function(t){B()(e,t,k()(a,t))}))}return e}var by=function(e){var t=(0,V.useContext)(yn),n=t.dataContext,r=t.scale,a=void 0===r?1:r,o=e.data,i=o.key,l=(0,Wn.c)(o,Ay),u=o.id,c=(0,V.useContext)(yn),d=(0,V.useContext)(An).activedSelectId,s=Pp(wy(wy({},c),{},{activedSelectId:d}),u),f=s.handleMouseDown,g=s.isSelected,h=s.isLastSelected,v=n.findControlByCondition((function(e){return e.parentId===u}))||[];return H().createElement(Dy,(0,ie.c)({},l,{dataKey:i,scale:a,childItems:v,activedSelectId:d,isLastSelected:h,isSelected:g,handleMouseDown:f}))},xy=["x","y","width","height","border","name","id","isLastSelected","handleMouseDown","isSelected","direction"],Sy=(0,V.memo)((0,V.forwardRef)((function(e,t){var n,r,a,o,i,l,u,c=(0,V.useContext)(yn),d=c.scale,s=void 0===d?1:d,f=(c.contextStrokeEnabled,c.pixelRatio),g=c.setMessage,h=(0,V.useContext)(Dn),v=h.gridState,p=h.isEditorGridState,m=void 0===p||p,C=Ep(),y=(0,V.useRef)(null),E=(0,V.useRef)(null),D=e.x,A=void 0===D?0:D,k=e.y,w=void 0===k?0:k,b=e.width,x=e.height,S=e.border,I=e.name,B=e.id,M=e.isLastSelected,L=e.handleMouseDown,R=e.isSelected,T=e.direction,N=(0,Wn.c)(e,xy);fv({isSelected:R,refs:[y],pixelRatio:f,scale:s,currentProp:{x:A,y:w,width:b,height:x,name:I,id:B}});var G,Q=cp({x:A,y:w,id:B,width:b,height:x,border:S,scale:s,isSelected:R,contextStrokeEnabled:!1}),P=Q.stroke,J=Q.strokeWidth,j=Q.strokeEnabled,O=Q.dashEnabled,U=Q.defaultDash,z=(Q.customedStrokeElement,Q.controlStrokeRef),K=mv({strokeEnabled:j,shapeRef:E,isSelected:M,shapeRefStroke:P,controlStrokeRef:z}),q=K.onMouseOut,Y=K.onMouseOver,X=yp(x,s,2),_=yp(b,s,2),$=X,ee=(Ws(7,s),Ws(A,s)),te=Ws(w,s),ne=Cp(e,c),re=yv({id:B,refLineRef:c.refLineRef}),ae=(0,V.useCallback)((function(e){var t=e.x,n=e.y,r=(e.scaleX,e.scaleY,e.width),a=e.height,o=Ks(t,s),i=Ks(n,s),l=Ks(r,s,2),u=Ks(a,s,2),d={x:o,y:i,width:l,height:u};"H"===T&&u>3&&(d.height=3,delete d.y,g((0,W.getLangMsg)("printd.grid.key0130"))),"V"===T&&l>3&&(d.width=3,delete d.x,g((0,W.getLangMsg)("printd.grid.key0130"))),c.dataContext.batchUpdateControlPropertyValues((0,W.createUpdateAction)([[B,d]]))}),[B,s,T]),oe=lv({id:B,shapeRef:y,refLineRef:c.refLineRef,context:c,onDragEnd:ne,onDragMove:re,parentId:e.parentId,scale:s}),le=oe.onDragStart,ue=oe.onDragMove,ce=oe.onDragEnd,se=oe.dragBoundFunc,fe=sv({id:B,shapeRef:E,refLineRef:c.refLineRef,onTransformEnd:ae,context:c}),ge=fe.onTransform,he=fe.onTransformEnd,ve=(c.stageRef,c.rootControlRef,S&&F()(n=de()(S.color)).call(n,(function(e){return e}))[0]),pe=S&&F()(r=de()(S.style)).call(r,(function(e){return e}))[0];return"dotted"===pe?G=[2,2]:"dashed"===pe&&(G=[4,4]),H().createElement(H().Fragment,null,H().createElement(nv.Group,(0,ie.c)({height:$,width:_,clipX:-10,clipY:-10,clipWidth:_+20,clipHeight:$+20,onDragStart:le,onDragMove:ue,onDragEnd:ce,onMouseOut:q,onMouseOver:Y,onMouseDown:L,onDblClick:function(e){if(C(e,v,L))return null},ref:y},N,{x:ee,y:te,draggable:m,dragBoundFunc:se,id:B,name:Z()(a=Z()(o="".concat(we," ")).call(o,be," ")).call(a,xe)}),H().createElement(nv.Line,{x:0,y:0,stroke:ve||"#000",strokeWidth:"H"===T?$:_,points:"H"===T?[0,$/2,_,$/2]:[_/2,$,_/2,0],dash:G,hitStrokeWidth:20}),H().createElement(nv.Rect,{id:"".concat(B,"_rect"),height:$,width:_,name:Z()(i=Z()(l=Z()(u="".concat(B," ")).call(u,be," ")).call(l,xe," ")).call(i,Se),fill:"transparent",onTransform:ge,onTransformEnd:he,dashEnabled:O,dash:U,scale:{x:1,y:1},ref:E,stroke:P,strokeWidth:J,shadowForStrokeEnabled:!1,strokeScaleEnabled:!1,alpha:1,strokeEnabled:!0})))})),kp),Iy=Sy,By=["key"];function My(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ly(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?U()(n=My(Object(a),!0)).call(n,(function(t){(0,L.c)(e,t,a[t])})):b()?S()(e,b()(a)):U()(r=My(Object(a))).call(r,(function(t){B()(e,t,k()(a,t))}))}return e}var Ry={Text:zp,RichText:Cy,Image:Xp,Barcode:vm,QRCode:um,PrintTemplate:kC,PrintForm:kC,Paper:kC,DataGrid:XC,CardGrid:XC,LayoutGrid:XC,Header:ay,Footer:sy,SubDataGrid:XC,TableTail:by,Line:function(e){var t=e.data,n=t.key,r=(0,Wn.c)(t,By),a=(0,V.useContext)(yn),o=(0,V.useContext)(An),i=(0,V.useContext)(Dn).gridState,l=t.id,u=o.activedSelectId,c=Pp(Ly(Ly({},a),{},{beforeMouseDown:Jp(i),activedSelectId:u}),l),d=c.handleMouseDown,s=c.isSelected,f=c.isLastSelected;return H().createElement(Iy,(0,ie.c)({},r,{dataKey:n,isLastSelected:f,isSelected:s,handleMouseDown:d}))}};C()(Ry);function Fy(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}var Ty=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=(arguments.length>4?arguments[4]:void 0)||e.type,a=Ry[r];if(!a)return null;var o={key:e.id||e.key};return H().createElement(a,function(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?U()(n=Fy(Object(a),!0)).call(n,(function(t){(0,L.c)(e,t,a[t])})):b()?S()(e,b()(a)):U()(r=Fy(Object(a))).call(r,(function(t){B()(e,t,k()(a,t))}))}return e}({data:e,appState:n,children:t},o))};function Ny(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gy(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?U()(n=Ny(Object(a),!0)).call(n,(function(t){(0,L.c)(e,t,a[t])})):b()?S()(e,b()(a)):U()(r=Ny(Object(a))).call(r,(function(t){B()(e,t,k()(a,t))}))}return e}var Zy=function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Y().isEmpty(n))return null;if(zn()(n))return N()(n).call(n,(function(t){return e(t,!0)}));if(Qf(n))return Ty(Gy(Gy({},n),a));var o=n.items&&!Y().isEmpty(n.items)?N()(t=de()(n.items)).call(t,(function(t){return e(t,!0)})):[];return Ty(n,o,r,a)},Qy=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e},r=(t=t||{}).children,a=t.parent,o=t.id,i={},l={};if(r=r||"children",a=a||"parent",Y().isObject(e)||Y().isArray(e)){for(var u in e)Y().has(e,u)&&e[u]&&(i[e[u][o]]=e[u]);for(var c in i)if(Y().has(i,c))if(i[c][a]){var d,s=i[c][a];if(i[s]&&!i[s][r]&&(i[s][r]={}),i[s]&&!i[s][a])i[s]&&s!==i[c][o]&&(i[s][r][i[c][o]]=n(i[c]));else i[s]&&s!==i[c][o]&&i[s][a]&&-1==bn()(d=i[s][a]).call(d,i[c][o])&&(i[s][r][i[c][o]]=n(i[c]))}else l[i[c][o]]=i[c];return l}},Py=["type"];function Jy(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}var jy=(0,V.memo)((function(e){var t=(0,V.useContext)(W.DataContext),n=(0,V.useContext)(W.SelectionContext),r=(0,W.useActivedSelectedId)({dataContext:t,selectionContext:n}).activedSelectId,a=(0,V.useContext)(En),o=a.meta,i=void 0===o?[]:o,l=a.definition,u=void 0===l?{}:l,c=a.pagesManageRef,d=a.pageManage,s=a.globalConfig,f=a.scaleRef,g=a.asistantBorderRef,h=(0,V.useState)(0)[1],v=(0,V.useRef)(null),p=(0,V.useRef)(!1);(0,V.useEffect)((function(){var e=t.addDataChangeListener((function(e){var t=e.type,n=(0,Wn.c)(e,Py);W.console.log(t,n),h((function(e){return e+1}))}));return function(){e&&e()}}),[]);var m=(0,V.useMemo)((function(){var e=t.getData();return de()(Qy(JSON.parse(j()(e)).items,{children:"items",parent:"parentId",id:"id"}))[0]}),[t.getData()]);W.console.log("props",m);var C=(0,V.useContext)(W.ConfigContext),y=(0,C.getPrefixCls)(C.prefixCls),E=(0,V.useRef)(null),D=(0,V.useRef)(null),A=gr(),w=(0,M.c)(A,2),x=(w[0],w[1]),I=x.width,R=x.height,F=(t.findControl(t.getRootId()).language,"".concat(y,"-top-view-main"));return H().createElement(H().Fragment,null,H().createElement(W.ViewHeader,{content:H().createElement("div",{className:"".concat(y,"-main-view-toolbar"),id:"kdesigner-top-view-main"},H().createElement(ap,(0,ie.c)({},e,{ref:v,onChangeProperty:function(){},context:{dataContext:t,selectionContext:n,activedSelectId:r,canvasRef:E,globalConfig:s,scaleRef:f,asistantBorderRef:g,isMultiKeyActiveWhenSelectedRef:p}}))),portalId:F}),H().createElement("div",{className:"".concat(y,"-paper"),ref:D},Zy(m,!1,function(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?U()(n=Jy(Object(a),!0)).call(n,(function(t){(0,L.c)(e,t,a[t])})):b()?S()(e,b()(a)):U()(r=Jy(Object(a))).call(r,(function(t){B()(e,t,k()(a,t))}))}return e}({width:I,height:R,navToolRef:v,canvasRef:E,meta:i,definition:u,activedSelectId:r,dataContext:t,isMultiKeyActiveWhenSelectedRef:p},e))),H().createElement("div",{className:"".concat(y,"-pages-manage"),ref:c},d))}));jy.tabKey="PrintDesignerCore",jy.getTabName=function(){return(0,W.getLangMsg)("printd.grid.key0109")};var Oy=jy,Uy=H().memo((function(e){e.meta,e.data;var t=(0,V.useContext)(W.DataContext),n=(0,V.useContext)(W.SelectionContext),r=t.getRootId(),a=(0,W.useActivedSelectedId)({dataContext:t,selectionContext:n}).activedSelectId,o=(0,V.useState)(0)[1];return(0,V.useEffect)((function(){var e=t.addDataChangeListener((function(e){e.type;o((function(e){return e+1}))}));return function(){e&&e()}}),[]),H().createElement(W.PropertyView,(0,ie.c)({},e,{id:r,key:a||r}))}));Uy.tabKey="PrintSetting",Uy.getTabName=function(){return(0,W.getLangMsg)("printd.grid.key0107")};var zy=Uy,Wy=function(e){var t=e.meta,n=void 0===t?{}:t,r=(0,V.useContext)(W.DataContext),a=(0,V.useContext)(W.SelectionContext),o=a.getSelection(),i=(0,V.useContext)(W.GlobalConfigContext),l=r.findControlByCondition((function(e){return Bn()(o).call(o,e.id)})),u=function(e,t){var n=(0,kn.c)(new(fa())(N()(t).call(t,(function(e){return e.rowId||""}))));if(1!==n.length)return!1;var r=n[0];return!!r&&e.findControlByCondition((function(e){return e.rowId===r})).length===t.length}(r,l),c=u?l[0].rowId:"",d=(0,V.useContext)(W.DataFactoryContext).modelFactory,s=(0,W.useSelectModel)({dataContext:r,selectionContext:a,solidId:c,meta:n,activedSelectId:"",modelFactory:d,globalConfig:i}),f=s.modelData,g=s.field,h=(0,V.useContext)(W.ConfigContext),v=(0,h.getPrefixCls)(h.prefixCls,"right-view"),p=function(e,t,n,r){if(!e)return r;var a=n.findControl(t),o=a.parentId,i=a.rowType,l=n.findControl(o).type,u=[function(e){return Hf(e)&&e.parentId===o},function(e){return Jf(e)&&e.parentGridId===o}],c=Bf(n,u),d=(0,M.c)(c,2),s=d[0],f=d[1],g=!!s.length,h=!!f.length;return"Detail"===i&&(g||"SubDataGrid"===l||h)?F()(r).call(r,(function(e){return"DataRowGroup"!==e.Id})):r}(u,c,r,f);return u&&H().createElement(W.PropertyViewItemGroup,{modelData:p,PropertyViewItemRender:W.PropertyViewItem,className:v,field:g})},Ky=H().memo((function(e){var t=e.meta,n=void 0===t?{}:t,r=(0,V.useContext)(W.DataContext),a=(0,V.useContext)(W.SelectionContext),o=(0,V.useState)(0)[1];return(0,V.useEffect)((function(){var e=a.addSelectChangeListener((function(){o((function(e){return e+1}))})),t=r.addDataChangeListener((function(e){e.type;o((function(e){return e+1}))}));return function(){t&&t(),e&&e()}}),[]),H().createElement(W.PropertyView,{meta:n},H().createElement(Wy,{meta:n}))}));Ky.tabKey="PropertyView",Ky.getTabName=function(){return(0,W.getLangMsg)("printd.grid.key0108")};var Vy=Ky;function Hy(e,t){var n=C()(e);if(D()){var r=D()(e);t&&(r=F()(r).call(r,(function(t){return k()(e,t).enumerable}))),n.push.apply(n,r)}return n}function qy(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?U()(n=Hy(Object(a),!0)).call(n,(function(t){(0,L.c)(e,t,a[t])})):b()?S()(e,b()(a)):U()(r=Hy(Object(a))).call(r,(function(t){B()(e,t,k()(a,t))}))}return e}var Yy=function e(t,n,r,a,o,i){var l;return null==t?void 0:F()(l=N()(t).call(t,(function(t){var l=t.Name,u=(t.Type,t.Items),c=t.Key,d=t.DsType,s=(t.Tag,t.IsDs),f=a,g=o;if(d&&(g=d),s||r)f=c;else if(!r&&!s){var h;f=f?Z()(h="".concat(f,".")).call(h,c):c}var v,p=n,m=i||l;s&&(m=l,p=n?Z()(v="".concat(n,".")).call(v,c):c);var C=u?{Items:e(u,p,s,f,g,m)}:{};return qy(qy({dataSource:p,dataSourceText:m,bindField:f,dsTypeKey:o},t),C)}))).call(l,Boolean)},Xy=function(){},_y=(0,V.memo)((0,V.forwardRef)((function(e,t){var n=Oh(),r=e.data,a=void 0===r?{}:r,o=e.meta,i=void 0===o?{}:o,l=e.onData,u=e.showMessage,c=void 0===u?function(e){W.console.log("showMessage-------",e)}:u,d=e.definition,s=e.handleOpenCustomDsModal,f=void 0===s?Xy:s,g=e.handleOpenRefDsModal,h=void 0===g?Xy:g,v=e.handleChangePLang,p=void 0===v?Xy:v,m=e.pageManage,C=e.scaleRef,y=e.asistantBorderRef,E=e.dataRef,D=e.uploadImageUrl,A=void 0===D?jh("api/print/upload.do",[[vn,n],["printtplid",""]]):D,k=e.previewImageUrl,w=void 0===k?jh("api/print/download.do",[[vn,n],["rcId",""]]):k,b=e.handlePassGridActionGuide,x=void 0===b?Xy:b,S=e.handlePassPrintActionGuide,I=void 0===S?Xy:S,B=e.handleOpenDGridSortSettingEdModal,L=void 0===B?Xy:B,R=e.handleOpenDGridFilterSettingEdModal,T=void 0===R?Xy:R,G=e.invokePrintDesignerCustomEvent,Q=void 0===G?Xy:G,J=e.handleChangeFileName,O=e.isFirstUseGrid,K=e.isFirstVisit,q=e.expressions,Y=void 0===q?[]:q,X=e.getLangMsg,_="print-designer",$=(0,V.useRef)([]),ee=(0,V.useMemo)((function(){return Yy(d)}),[d]),te=(0,V.useState)(!1),ne=(0,M.c)(te,2),re=ne[0],ae=ne[1],ie=i.FontMapping;if(ie){var le,ue,ce=(null===(le=ie[0])||void 0===le?void 0:le.Code)||(null===(ue=ie[0])||void 0===ue?void 0:ue.Name);ce&&function(e){Ht!==e&&(Ht=e)}(ce),function(e){qt!==e&&(qt=e)}(P()(ie).call(ie,(function(e,t){var n=t.Name,r=t.Code;return e[n]=r,e}),{}))}var de=(0,V.useCallback)((function(){W.eventBus.emit(ls,ee)}),[ee]),se=(0,V.useCallback)((function(e){W.eventBus.emit(e,ee)}),[ee]),fe=function(e,t){try{var n,r,a=e[0],o=null===(n=ye.current)||void 0===n?void 0:n.dataContext;if(!a)return;r="filterSetting"===t?JSON.parse(a.condition).filterRow.length?{filterSettingValue:j()(a),filterSettingText:X("printd.grid.key0001")}:{filterSettingValue:"",filterSettingText:""}:"fileName"===t?{fileName:a.fileNameK}:{sortSettings:a.sortSettings,sortSettingsText:(l=a.sortSettings,null===(u=N()(l).call(l,(function(e){return e.bindName||e.bindField})))||void 0===u?void 0:u.join(";"))};var i=[[a.dataGridId||a.id,r]];o.batchUpdateControlPropertyValues((0,W.createUpdateAction)(i))}catch(e){W.console.error(e)}var l,u};(0,V.useImperativeHandle)(t,(function(){var e,t,n,r;return{pagesManageRef:Ce,attrActions:null===(e=ye.current)||void 0===e?void 0:e.attrActions,resetPatches:null===(t=ye.current)||void 0===t||null===(t=t.dataContext)||void 0===t?void 0:t.resetPatches,beforeSave:de,setProperty:fe,pushUndoPatch:null===(n=ye.current)||void 0===n||null===(n=n.dataContext)||void 0===n?void 0:n.pushUndoPatch,resetData:null===(r=ye.current)||void 0===r||null===(r=r.dataContext)||void 0===r?void 0:r.resetData}}));var ge=(0,V.useRef)({}),he=(0,V.useCallback)((function(e){switch(e){case"main":return{main:Oy};case"left":return{control:tv,definition:Vh};case"right":return{property:Vy,rootProperty:zy};default:return{}}}),[]),ve=(0,V.useCallback)((function(e){var t=F()(e).call(e,(function(e){return"CommonGroup"===e.Id}))||[];return N()(t).call(t,(function(e){return qy(qy({},e),{},{Visible:!0})}))}),[]),pe=(0,V.useMemo)((function(){return{definition:ee,getViews:he,getPropertyEditors:ah,getCustomActions:oe,getValue:ff,preHandle:Ph,filterProperty:lh,activateTab:oh,handleOpenCustomDsModal:f,handleOpenRefDsModal:h,handleChangePLang:p,handleOpenDGridSortSettingEdModal:L,handleOpenDGridFilterSettingEdModal:T,handleChangeFileName:J,invokePrintDesignerCustomEvent:Q,showMessage:c,getOutlineItemIcon:yf,enableSearch:!1,positionRecordsRef:ge,dataRef:E||$,uploadImageUrl:A,previewImageUrl:w,keywordMapping:{id:"id",type:"type",name:"name",key:"key",parentId:"parentId",items:"items"},enableDiffDefaultData:!1,isRootPropertyEmpty:!0,commonPropertyHandler:ve,getLangMsg:X}}),[ee,he,ah,oe,ff,oh,f,h,L,T,J,Q,p,c,yf,E,A,w]);W.console.log(e,pe);var Ce=(0,V.useRef)(null);(0,V.useEffect)((function(){var e=function(e,t){p(e,t)};return W.eventBus.on("change-lang",e),function(){W.eventBus.off("change-lang",e)}}),[p]);var ye=(0,V.useRef)(null),Ee=(0,V.useCallback)((function(e){c&&c(e)}),[]),De=(0,V.useMemo)((function(){return{prefixCls:_,definition:ee,setMessage:Ee,meta:i,pagesManageRef:Ce,globalConfig:pe,pageManage:m,scaleRef:C,asistantBorderRef:y,handlePassGridActionGuide:x,isFirstUseGrid:O,expressions:Y,beforeSave:de,onValid:se}}),[ee,c,i,pe,m,Ee,x,O,Y,de,se]),ke=(0,V.useCallback)((function(e,t){var n=(e||{}).items,r=void 0===n?[]:n;ge.current={},U()(r).call(r,(function(e){var t=e||{},n=t.x,r=t.y,a=t.parentId,o=ge.current;a&&(o[a]=o[a]||[],o[a].push([n,r].join("-")))})),l&&l(e,t)}),[l]),we=(0,V.useMemo)((function(){return Xd(i,!0)}),[i]),be=(0,V.useMemo)((function(){return Xd(i,!1)}),[i]),xe=(0,V.useMemo)((function(){return{prefixCls:"print-designer",getPrefixCls:function(e,t,n){var r;return n||(e=e||"print-designer",t?Z()(r="".concat(e,"-")).call(r,t):e)}}}),[]);(0,V.useEffect)((function(){ae(!0)}),[]);var Se=me(),Ie=(0,M.c)(Se,1)[0];return H().createElement(H().Fragment,null,re&&K&&Ie&&H().createElement(Ae,{handlePassPrintActionGuide:I}),H().createElement(z.ConfigProvider,{value:{prefixCls:"kdesigner"}},H().createElement(En.Provider,{value:De},H().createElement(W.ConfigContext.Provider,{value:xe},H().createElement($y,{ref:ye,globalConfig:pe,onData:ke,meta:i,data:a,prefixCls:_,dataFactory:be,modelFactory:we})))))}))),$y=H().memo(K(),(function(){return!0}));_y.displayName="PrintDesigner";var eE=_y,tE=!1,nE={},rE=function(e){var t;U()(t=gh()(e)).call(t,(function(e){var t=(0,M.c)(e,1)[0],n="阿里巴巴普惠体-R"===t?"阿里巴巴普惠体":t,r=document.createElement("div");r.style.position="fixed",r.style.opacity="0",r.style.zIndex="-1050",r.classList.add("cq-font-family-install-dummy-node"),r.textContent=n,r.style.fontFamily=Kt(n),document.body.appendChild(r)}))},aE=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,V.useState)(!e),n=(0,M.c)(t,2),r=n[0],a=n[1];if(e&&!r&&!tE)if(tE=!0,window.FontFace){var o;ea().allSettled(N()(o=gh()(e)).call(o,(function(e){var t=(0,M.c)(e,2),n=t[0],r=t[1],a="阿里巴巴普惠体-R"===n?"阿里巴巴普惠体":n;return new(ea())((function(e,t){ue()((function(){e("not to wait loading font ".concat(a))}),5e3);new FontFace(a,"url(".concat(r,")")).load().then((function(t){t&&(nE[a]=!0),document.fonts.add(t),e("install resolve ".concat(a))})).catch((function(){t("install reject ".concat(a))}))})).then((function(e){}),(function(e){}))}))).then((function(t){rE(e),a(!0)})).catch((function(t){rE(e),a(!0)}))}else{var i,l={method:"GET",mode:"cors",credentials:"include",headers:{"Cache-Control":"public, max-age=31536000"}};ea().allSettled(N()(i=gh()(e)).call(i,(function(e){var t=(0,M.c)(e,2),n=t[0],r=t[1],a="阿里巴巴普惠体-R"===n?"阿里巴巴普惠体":n;return new(ea())((function(e,t){ue()((function(){e("not to wait loading font ".concat(a))}),5e3);window.fetch(r,l).then((function(e){return e.text()})).then((function(t){if(t){var n,o=document.createElement("style");o.type="text/css";var i=Z()(n='\n              @font-face {\n                font-family: "'.concat(a,'";\n                src: url(')).call(n,r,");\n              }");o.styleSheet?o.styleSheet.cssText=i:o.appendChild(document.createTextNode(i)),nE[a]=!0,document.head.appendChild(o),e("install resolve ".concat(a))}})).catch((function(e){t("install reject ".concat(a))}))})).then((function(e){}),(function(e){}))}))).then((function(t){rE(e),a(!0)})).catch((function(){rE(e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];a(!0)}))}return r}},19600:function(){}}]);