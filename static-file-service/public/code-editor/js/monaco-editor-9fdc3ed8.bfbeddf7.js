(self.webpackChunkcode_editor=self.webpackChunkcode_editor||[]).push([[5809],{15644:function(e,t,o){"use strict";var i=o(52040),n=o(50580),r=o(84140),s=(o(61572),o(27440)),a=o(95664),c=o(25900),d=o(38744),l=o(93636),h=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},u=function(e,t){return function(o,i){t(o,i,e)}},g=function(e,t,o,i){return new(o||(o=Promise))((function(n,r){function s(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};const p=new l.uS("selectionAnchorSet",!1);let m=class e{static get(t){return t.getContribution(e.ID)}constructor(e,t){this.editor=e,this.selectionAnchorSetContextKey=p.bindTo(t),this.modelChangeListener=e.onDidChangeModel((()=>this.selectionAnchorSetContextKey.reset()))}setSelectionAnchor(){if(this.editor.hasModel()){const e=this.editor.getPosition();this.editor.changeDecorations((t=>{this.decorationId&&t.removeDecoration(this.decorationId),this.decorationId=t.addDecoration(a.G.fromPositions(e,e),{description:"selection-anchor",stickiness:1,hoverMessage:(new n.qE).appendText((0,d.uy)("selectionAnchor","Selection Anchor")),className:"selection-anchor"})})),this.selectionAnchorSetContextKey.set(!!this.decorationId),(0,i.Qb)((0,d.uy)("anchorSet","Anchor set at {0}:{1}",e.lineNumber,e.column))}}goToSelectionAnchor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);e&&this.editor.setPosition(e.getStartPosition())}}selectFromAnchorToCursor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);if(e){const t=this.editor.getPosition();this.editor.setSelection(a.G.fromPositions(e.getStartPosition(),t)),this.cancelSelectionAnchor()}}}cancelSelectionAnchor(){if(this.decorationId){const e=this.decorationId;this.editor.changeDecorations((t=>{t.removeDecoration(e),this.decorationId=void 0})),this.selectionAnchorSetContextKey.set(!1)}}dispose(){this.cancelSelectionAnchor(),this.modelChangeListener.dispose()}};m.ID="editor.contrib.selectionAnchorController",m=h([u(1,l.KK)],m);class f extends s.ay{constructor(){super({id:"editor.action.setSelectionAnchor",label:(0,d.uy)("setSelectionAnchor","Set Selection Anchor"),alias:"Set Selection Anchor",precondition:void 0,kbOpts:{kbExpr:c.y.editorTextFocus,primary:(0,r.uS)(2089,2080),weight:100}})}run(e,t){var o;return g(this,void 0,void 0,(function*(){null===(o=m.get(t))||void 0===o||o.setSelectionAnchor()}))}}class _ extends s.ay{constructor(){super({id:"editor.action.goToSelectionAnchor",label:(0,d.uy)("goToSelectionAnchor","Go to Selection Anchor"),alias:"Go to Selection Anchor",precondition:p})}run(e,t){var o;return g(this,void 0,void 0,(function*(){null===(o=m.get(t))||void 0===o||o.goToSelectionAnchor()}))}}class v extends s.ay{constructor(){super({id:"editor.action.selectFromAnchorToCursor",label:(0,d.uy)("selectFromAnchorToCursor","Select from Anchor to Cursor"),alias:"Select from Anchor to Cursor",precondition:p,kbOpts:{kbExpr:c.y.editorTextFocus,primary:(0,r.uS)(2089,2089),weight:100}})}run(e,t){var o;return g(this,void 0,void 0,(function*(){null===(o=m.get(t))||void 0===o||o.selectFromAnchorToCursor()}))}}class C extends s.ay{constructor(){super({id:"editor.action.cancelSelectionAnchor",label:(0,d.uy)("cancelSelectionAnchor","Cancel Selection Anchor"),alias:"Cancel Selection Anchor",precondition:p,kbOpts:{kbExpr:c.y.editorTextFocus,primary:9,weight:100}})}run(e,t){var o;return g(this,void 0,void 0,(function*(){null===(o=m.get(t))||void 0===o||o.cancelSelectionAnchor()}))}}(0,s._U)(m.ID,m,4),(0,s.K_)(f),(0,s.K_)(_),(0,s.K_)(v),(0,s.K_)(C)},35880:function(e,t,o){"use strict";var i=o(81564),n=o(39048),r=(o(79004),o(27440)),s=o(4400),a=o(90836),c=o(95664),d=o(25900),l=o(29608),h=o(33568),u=o(38744),g=o(39548),p=o(76),m=o(68992);const f=(0,p.ScB)("editorOverviewRuler.bracketMatchForeground",{dark:"#A0A0A0",light:"#A0A0A0",hcDark:"#A0A0A0",hcLight:"#A0A0A0"},u.uy("overviewRulerBracketMatchForeground","Overview ruler marker color for matching brackets."));class _ extends r.ay{constructor(){super({id:"editor.action.jumpToBracket",label:u.uy("smartSelect.jumpBracket","Go to Bracket"),alias:"Go to Bracket",precondition:void 0,kbOpts:{kbExpr:d.y.editorTextFocus,primary:3165,weight:100}})}run(e,t){var o;null===(o=y.get(t))||void 0===o||o.jumpToBracket()}}class v extends r.ay{constructor(){super({id:"editor.action.selectToBracket",label:u.uy("smartSelect.selectToBracket","Select to Bracket"),alias:"Select to Bracket",precondition:void 0,description:{description:"Select to Bracket",args:[{name:"args",schema:{type:"object",properties:{selectBrackets:{type:"boolean",default:!0}}}}]}})}run(e,t,o){var i;let n=!0;o&&!1===o.selectBrackets&&(n=!1),null===(i=y.get(t))||void 0===i||i.selectToBracket(n)}}class C extends r.ay{constructor(){super({id:"editor.action.removeBrackets",label:u.uy("smartSelect.removeBrackets","Remove Brackets"),alias:"Remove Brackets",precondition:void 0,kbOpts:{kbExpr:d.y.editorTextFocus,primary:2561,weight:100}})}run(e,t){var o;null===(o=y.get(t))||void 0===o||o.removeBrackets(this.id)}}class b{constructor(e,t,o){this.position=e,this.brackets=t,this.options=o}}class y extends n.CC{static get(e){return e.getContribution(y.ID)}constructor(e){super(),this._editor=e,this._lastBracketsData=[],this._lastVersionId=0,this._decorations=this._editor.createDecorationsCollection(),this._updateBracketsSoon=this._register(new i.sR((()=>this._updateBrackets()),50)),this._matchBrackets=this._editor.getOption(69),this._updateBracketsSoon.schedule(),this._register(e.onDidChangeCursorPosition((e=>{"never"!==this._matchBrackets&&this._updateBracketsSoon.schedule()}))),this._register(e.onDidChangeModelContent((e=>{this._updateBracketsSoon.schedule()}))),this._register(e.onDidChangeModel((e=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()}))),this._register(e.onDidChangeModelLanguageConfiguration((e=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()}))),this._register(e.onDidChangeConfiguration((e=>{e.hasChanged(69)&&(this._matchBrackets=this._editor.getOption(69),this._decorations.clear(),this._lastBracketsData=[],this._lastVersionId=0,this._updateBracketsSoon.schedule())}))),this._register(e.onDidBlurEditorWidget((()=>{this._updateBracketsSoon.schedule()}))),this._register(e.onDidFocusEditorWidget((()=>{this._updateBracketsSoon.schedule()})))}jumpToBracket(){if(!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getSelections().map((t=>{const o=t.getStartPosition(),i=e.bracketPairs.matchBracket(o);let n=null;if(i)i[0].containsPosition(o)&&!i[1].containsPosition(o)?n=i[1].getStartPosition():i[1].containsPosition(o)&&(n=i[0].getStartPosition());else{const t=e.bracketPairs.findEnclosingBrackets(o);if(t)n=t[1].getStartPosition();else{const t=e.bracketPairs.findNextBracket(o);t&&t.range&&(n=t.range.getStartPosition())}}return n?new c.G(n.lineNumber,n.column,n.lineNumber,n.column):new c.G(o.lineNumber,o.column,o.lineNumber,o.column)}));this._editor.setSelections(t),this._editor.revealRange(t[0])}selectToBracket(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),o=[];this._editor.getSelections().forEach((i=>{const n=i.getStartPosition();let r=t.bracketPairs.matchBracket(n);if(!r&&(r=t.bracketPairs.findEnclosingBrackets(n),!r)){const e=t.bracketPairs.findNextBracket(n);e&&e.range&&(r=t.bracketPairs.matchBracket(e.range.getStartPosition()))}let s=null,d=null;if(r){r.sort(a.E.compareRangesUsingStarts);const[t,o]=r;if(s=e?t.getStartPosition():t.getEndPosition(),d=e?o.getEndPosition():o.getStartPosition(),o.containsPosition(n)){const e=s;s=d,d=e}}s&&d&&o.push(new c.G(s.lineNumber,s.column,d.lineNumber,d.column))})),o.length>0&&(this._editor.setSelections(o),this._editor.revealRange(o[0]))}removeBrackets(e){if(!this._editor.hasModel())return;const t=this._editor.getModel();this._editor.getSelections().forEach((o=>{const i=o.getPosition();let n=t.bracketPairs.matchBracket(i);n||(n=t.bracketPairs.findEnclosingBrackets(i)),n&&(this._editor.pushUndoStop(),this._editor.executeEdits(e,[{range:n[0],text:""},{range:n[1],text:""}]),this._editor.pushUndoStop())}))}_updateBrackets(){if("never"===this._matchBrackets)return;this._recomputeBrackets();const e=[];let t=0;for(const o of this._lastBracketsData){const i=o.brackets;i&&(e[t++]={range:i[0],options:o.options},e[t++]={range:i[1],options:o.options})}this._decorations.set(e)}_recomputeBrackets(){if(!this._editor.hasModel()||!this._editor.hasWidgetFocus())return this._lastBracketsData=[],void(this._lastVersionId=0);const e=this._editor.getSelections();if(e.length>100)return this._lastBracketsData=[],void(this._lastVersionId=0);const t=this._editor.getModel(),o=t.getVersionId();let i=[];this._lastVersionId===o&&(i=this._lastBracketsData);const n=[];let r=0;for(let t=0,o=e.length;t<o;t++){const o=e[t];o.isEmpty()&&(n[r++]=o.getStartPosition())}n.length>1&&n.sort(s.J.compare);const a=[];let c=0,d=0;const l=i.length;for(let e=0,o=n.length;e<o;e++){const o=n[e];for(;d<l&&i[d].position.isBefore(o);)d++;if(d<l&&i[d].position.equals(o))a[c++]=i[d];else{let e=t.bracketPairs.matchBracket(o,20),i=y._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;e||"always"!==this._matchBrackets||(e=t.bracketPairs.findEnclosingBrackets(o,20),i=y._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER),a[c++]=new b(o,e,i)}}this._lastBracketsData=a,this._lastVersionId=o}}y.ID="editor.contrib.bracketMatchingController",y._DECORATION_OPTIONS_WITH_OVERVIEW_RULER=h.uw.register({description:"bracket-match-overview",stickiness:1,className:"bracket-match",overviewRuler:{color:(0,m.gX)(f),position:l.Mn.Center}}),y._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER=h.uw.register({description:"bracket-match-no-overview",stickiness:1,className:"bracket-match"}),(0,r._U)(y.ID,y,1),(0,r.K_)(v),(0,r.K_)(_),(0,r.K_)(C),g.e8.appendMenuItem(g.e.MenubarGoMenu,{group:"5_infile_nav",command:{id:"editor.action.jumpToBracket",title:u.uy({key:"miGoToBracket",comment:["&& denotes a mnemonic"]},"Go to &&Bracket")},order:2})},19908:function(e,t,o){"use strict";var i=o(27440),n=o(25900),r=o(90836),s=o(95664);class a{constructor(e,t){this._selection=e,this._isMovingLeft=t}getEditOperations(e,t){if(this._selection.startLineNumber!==this._selection.endLineNumber||this._selection.isEmpty())return;const o=this._selection.startLineNumber,i=this._selection.startColumn,n=this._selection.endColumn;if((!this._isMovingLeft||1!==i)&&(this._isMovingLeft||n!==e.getLineMaxColumn(o)))if(this._isMovingLeft){const s=new r.E(o,i-1,o,i),a=e.getValueInRange(s);t.addEditOperation(s,null),t.addEditOperation(new r.E(o,n,o,n),a)}else{const s=new r.E(o,n,o,n+1),a=e.getValueInRange(s);t.addEditOperation(s,null),t.addEditOperation(new r.E(o,i,o,i),a)}}computeCursorState(e,t){return this._isMovingLeft?new s.G(this._selection.startLineNumber,this._selection.startColumn-1,this._selection.endLineNumber,this._selection.endColumn-1):new s.G(this._selection.startLineNumber,this._selection.startColumn+1,this._selection.endLineNumber,this._selection.endColumn+1)}}var c=o(38744);class d extends i.ay{constructor(e,t){super(t),this.left=e}run(e,t){if(!t.hasModel())return;const o=[],i=t.getSelections();for(const e of i)o.push(new a(e,this.left));t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}(0,i.K_)(class extends d{constructor(){super(!0,{id:"editor.action.moveCarretLeftAction",label:c.uy("caret.moveLeft","Move Selected Text Left"),alias:"Move Selected Text Left",precondition:n.y.writable})}}),(0,i.K_)(class extends d{constructor(){super(!1,{id:"editor.action.moveCarretRightAction",label:c.uy("caret.moveRight","Move Selected Text Right"),alias:"Move Selected Text Right",precondition:n.y.writable})}})},17664:function(e,t,o){"use strict";var i=o(27440),n=o(83980),r=o(31052),s=o(90836),a=o(25900),c=o(38744);class d extends i.ay{constructor(){super({id:"editor.action.transposeLetters",label:c.uy("transposeLetters.label","Transpose Letters"),alias:"Transpose Letters",precondition:a.y.writable,kbOpts:{kbExpr:a.y.textInputFocus,primary:0,mac:{primary:306},weight:100}})}run(e,t){if(!t.hasModel())return;const o=t.getModel(),i=[],a=t.getSelections();for(const e of a){if(!e.isEmpty())continue;const t=e.startLineNumber,a=e.startColumn,c=o.getLineMaxColumn(t);if(1===t&&(1===a||2===a&&2===c))continue;const d=a===c?e.getPosition():r.u.rightPosition(o,e.getPosition().lineNumber,e.getPosition().column),l=r.u.leftPosition(o,d),h=r.u.leftPosition(o,l),u=o.getValueInRange(s.E.fromPositions(h,l)),g=o.getValueInRange(s.E.fromPositions(l,d)),p=s.E.fromPositions(h,d);i.push(new n._A(p,g+u))}i.length>0&&(t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop())}}(0,i.K_)(d)},94472:function(e,t,o){"use strict";var i=o(13100),n=o(58776),r=o(66989),s=o(27440),a=o(85432),c=o(25900),d=o(38744),l=o(39548),h=o(17400),u=o(93636),g=function(e,t,o,i){return new(o||(o=Promise))((function(n,r){function s(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};const p="9_cutcopypaste",m=n.DS||document.queryCommandSupported("cut"),f=n.DS||document.queryCommandSupported("copy"),_=void 0!==navigator.clipboard&&!i.isFirefox||document.queryCommandSupported("paste");function v(e){return e.register(),e}const C=m?v(new s.Wo({id:"editor.action.clipboardCutAction",precondition:void 0,kbOpts:n.DS?{primary:2102,win:{primary:2102,secondary:[1044]},weight:100}:void 0,menuOpts:[{menuId:l.e.MenubarEditMenu,group:"2_ccp",title:d.uy({key:"miCut",comment:["&& denotes a mnemonic"]},"Cu&&t"),order:1},{menuId:l.e.EditorContext,group:p,title:d.uy("actions.clipboard.cutLabel","Cut"),when:c.y.writable,order:1},{menuId:l.e.CommandPalette,group:"",title:d.uy("actions.clipboard.cutLabel","Cut"),order:1},{menuId:l.e.SimpleEditorContext,group:p,title:d.uy("actions.clipboard.cutLabel","Cut"),when:c.y.writable,order:1}]})):void 0,b=f?v(new s.Wo({id:"editor.action.clipboardCopyAction",precondition:void 0,kbOpts:n.DS?{primary:2081,win:{primary:2081,secondary:[2067]},weight:100}:void 0,menuOpts:[{menuId:l.e.MenubarEditMenu,group:"2_ccp",title:d.uy({key:"miCopy",comment:["&& denotes a mnemonic"]},"&&Copy"),order:2},{menuId:l.e.EditorContext,group:p,title:d.uy("actions.clipboard.copyLabel","Copy"),order:2},{menuId:l.e.CommandPalette,group:"",title:d.uy("actions.clipboard.copyLabel","Copy"),order:1},{menuId:l.e.SimpleEditorContext,group:p,title:d.uy("actions.clipboard.copyLabel","Copy"),order:2}]})):void 0;l.e8.appendMenuItem(l.e.MenubarEditMenu,{submenu:l.e.MenubarCopy,title:{value:d.uy("copy as","Copy As"),original:"Copy As"},group:"2_ccp",order:3}),l.e8.appendMenuItem(l.e.EditorContext,{submenu:l.e.EditorContextCopy,title:{value:d.uy("copy as","Copy As"),original:"Copy As"},group:p,order:3}),l.e8.appendMenuItem(l.e.EditorContext,{submenu:l.e.EditorContextShare,title:{value:d.uy("share","Share"),original:"Share"},group:"11_share",order:-1,when:u.cU.and(u.cU.notEquals("resourceScheme","output"),c.y.editorTextFocus)}),l.e8.appendMenuItem(l.e.EditorTitleContext,{submenu:l.e.EditorTitleContextShare,title:{value:d.uy("share","Share"),original:"Share"},group:"11_share",order:-1}),l.e8.appendMenuItem(l.e.ExplorerContext,{submenu:l.e.ExplorerContextShare,title:{value:d.uy("share","Share"),original:"Share"},group:"11_share",order:-1});const y=_?v(new s.Wo({id:"editor.action.clipboardPasteAction",precondition:void 0,kbOpts:n.DS?{primary:2100,win:{primary:2100,secondary:[1043]},linux:{primary:2100,secondary:[1043]},weight:100}:void 0,menuOpts:[{menuId:l.e.MenubarEditMenu,group:"2_ccp",title:d.uy({key:"miPaste",comment:["&& denotes a mnemonic"]},"&&Paste"),order:4},{menuId:l.e.EditorContext,group:p,title:d.uy("actions.clipboard.pasteLabel","Paste"),when:c.y.writable,order:4},{menuId:l.e.CommandPalette,group:"",title:d.uy("actions.clipboard.pasteLabel","Paste"),order:1},{menuId:l.e.SimpleEditorContext,group:p,title:d.uy("actions.clipboard.pasteLabel","Paste"),when:c.y.writable,order:4}]})):void 0;class w extends s.ay{constructor(){super({id:"editor.action.clipboardCopyWithSyntaxHighlightingAction",label:d.uy("actions.clipboard.copyWithSyntaxHighlightingLabel","Copy With Syntax Highlighting"),alias:"Copy With Syntax Highlighting",precondition:void 0,kbOpts:{kbExpr:c.y.textInputFocus,primary:0,weight:100}})}run(e,t){if(!t.hasModel())return;!t.getOption(35)&&t.getSelection().isEmpty()||(r.KI.forceCopyWithSyntaxHighlighting=!0,t.focus(),document.execCommand("copy"),r.KI.forceCopyWithSyntaxHighlighting=!1)}}function k(e,t){e&&(e.addImplementation(1e4,"code-editor",((e,o)=>{const i=e.get(a.i).getFocusedCodeEditor();if(i&&i.hasTextFocus()){const e=i.getOption(35),o=i.getSelection();return o&&o.isEmpty()&&!e||document.execCommand(t),!0}return!1})),e.addImplementation(0,"generic-dom",((e,o)=>(document.execCommand(t),!0))))}k(C,"cut"),k(b,"copy"),y&&(y.addImplementation(1e4,"code-editor",((e,t)=>{const o=e.get(a.i),i=e.get(h.i),s=o.getFocusedCodeEditor();if(s&&s.hasTextFocus()){return!(!document.execCommand("paste")&&n.e6)||g(void 0,void 0,void 0,(function*(){const e=yield i.readText();if(""!==e){const t=r.mw.INSTANCE.get(e);let o=!1,i=null,n=null;t&&(o=s.getOption(35)&&!!t.isFromEmptySelection,i=void 0!==t.multicursorText?t.multicursorText:null,n=t.mode),s.trigger("keyboard","paste",{text:e,pasteOnNewLine:o,multicursorText:i,mode:n})}}))}return!1})),y.addImplementation(0,"generic-dom",((e,t)=>(document.execCommand("paste"),!0)))),f&&(0,s.K_)(w)},30792:function(e,t,o){"use strict";o.d(t,{Ar:function(){return A},EL:function(){return k},Ex:function(){return E},WK:function(){return L},_m:function(){return x},a6:function(){return I},ey:function(){return y},kP:function(){return w},q8:function(){return N},wp:function(){return S}});var i=o(14372),n=o(31972),r=o(32096),s=o(39048),a=o(70660),c=o(22980),d=o(90836),l=o(95664),h=o(42792),u=o(54780),g=o(66692),p=o(38744),m=o(8296),f=o(41972),_=o(77483),v=o(38356),C=o(90608),b=function(e,t,o,i){return new(o||(o=Promise))((function(n,r){function s(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};const y="editor.action.codeAction",w="editor.action.quickFix",k="editor.action.autoFix",S="editor.action.refactor",x="editor.action.sourceAction",A="editor.action.organizeImports",L="editor.action.fixAll";class P extends s.CC{static codeActionsPreferredComparator(e,t){return e.isPreferred&&!t.isPreferred?-1:!e.isPreferred&&t.isPreferred?1:0}static codeActionsComparator({action:e},{action:t}){return(0,i.gl)(e.diagnostics)?(0,i.gl)(t.diagnostics)?P.codeActionsPreferredComparator(e,t):-1:(0,i.gl)(t.diagnostics)?1:P.codeActionsPreferredComparator(e,t)}constructor(e,t,o){super(),this.documentation=t,this._register(o),this.allActions=[...e].sort(P.codeActionsComparator),this.validActions=this.allActions.filter((({action:e})=>!e.disabled))}get hasAutoFix(){return this.validActions.some((({action:e})=>!!e.kind&&C.o1.QuickFix.contains(new C.o1(e.kind))&&!!e.isPreferred))}}const D={actions:[],documentation:void 0};function I(e,t,o,n,a,c){var d;return b(this,void 0,void 0,(function*(){const l=n.filter||{},h={only:null===(d=l.include)||void 0===d?void 0:d.value,trigger:n.type},u=new g.gZ(t,c),p=function(e,t,o){return e.all(t).filter((e=>!e.providedCodeActionKinds||e.providedCodeActionKinds.some((e=>(0,C.gI)(o,new C.o1(e))))))}(e,t,l),m=new s.Y1,f=p.map((e=>b(this,void 0,void 0,(function*(){try{a.report(e);const i=yield e.provideCodeActions(t,o,h,u.token);if(i&&m.add(i),u.token.isCancellationRequested)return D;const n=((null==i?void 0:i.actions)||[]).filter((e=>e&&(0,C.MR)(l,e))),r=function(e,t,o){if(!e.documentation)return;const i=e.documentation.map((e=>({kind:new C.o1(e.kind),command:e.command})));if(o){let e;for(const t of i)t.kind.contains(o)&&(e?e.kind.contains(t.kind)&&(e=t):e=t);if(e)return null==e?void 0:e.command}for(const e of t)if(e.kind)for(const t of i)if(t.kind.contains(new C.o1(e.kind)))return t.command;return}(e,n,l.include);return{actions:n.map((t=>new C.mS(t,e))),documentation:r}}catch(e){if((0,r.A9)(e))throw e;return(0,r.i4)(e),D}})))),_=e.onDidChange((()=>{const o=e.all(t);(0,i.yK)(o,p)||u.cancel()}));try{const o=yield Promise.all(f),r=o.map((e=>e.actions)).flat(),s=[...(0,i.oN)(o.map((e=>e.documentation))),...M(e,t,n,r)];return new P(r,s,m)}finally{_.dispose(),u.dispose()}}))}function*M(e,t,o,i){var n,r,s;if(t&&i.length)for(const a of e.all(t))a._getAdditionalMenuItems&&(yield*null===(n=a._getAdditionalMenuItems)||void 0===n?void 0:n.call(a,{trigger:o.type,only:null===(s=null===(r=o.filter)||void 0===r?void 0:r.include)||void 0===s?void 0:s.value},i.map((e=>e.action))))}var E;function N(e,t,o,i,r=n.I.None){var s;return b(this,void 0,void 0,(function*(){const n=e.get(c.iI),a=e.get(m.a),d=e.get(v.L),l=e.get(f.sx);if(d.publicLog2("codeAction.applyCodeAction",{codeActionTitle:t.action.title,codeActionKind:t.action.kind,codeActionIsPreferred:!!t.action.isPreferred,reason:o}),yield t.resolve(r),!r.isCancellationRequested){if(null===(s=t.action.edit)||void 0===s?void 0:s.edits.length){if(!(yield n.apply(t.action.edit,{editor:null==i?void 0:i.editor,label:t.action.title,quotableLabel:t.action.title,code:"undoredo.codeAction",respectAutoSaveConfig:o!==E.OnSave,showPreview:null==i?void 0:i.preview})).isApplied)return}if(t.action.command)try{yield a.executeCommand(t.action.command.id,...t.action.command.arguments||[])}catch(e){const t=function(e){return"string"==typeof e?e:e instanceof Error&&"string"==typeof e.message?e.message:void 0}(e);l.error("string"==typeof t?t:p.uy("applyCodeActionFailed","An unknown error occurred while applying the code action"))}}}))}!function(e){e.OnSave="onSave",e.FromProblemsView="fromProblemsView",e.FromCodeActions="fromCodeActions"}(E||(E={})),m.y.registerCommand("_executeCodeActionProvider",(function(e,t,o,i,s){return b(this,void 0,void 0,(function*(){if(!(t instanceof a.K))throw(0,r.wJ)();const{codeActionProvider:c}=e.get(h.w),g=e.get(u.o).getModel(t);if(!g)throw(0,r.wJ)();const p=l.G.isISelection(o)?l.G.liftSelection(o):d.E.isIRange(o)?g.validateRange(o):void 0;if(!p)throw(0,r.wJ)();const m="string"==typeof i?new C.o1(i):void 0,f=yield I(c,g,p,{type:1,triggerAction:C.q_.Default,filter:{includeSourceActions:!0,include:m}},_.b$.None,n.I.None),v=[],b=Math.min(f.validActions.length,"number"==typeof s?s:0);for(let e=0;e<b;e++)v.push(f.validActions[e].resolve(n.I.None));try{return yield Promise.all(v),f.validActions.map((e=>e.action))}finally{setTimeout((()=>f.dispose()),100)}}))}))},76146:function(e,t,o){"use strict";var i=o(27440),n=o(62864),r=o(2443),s=o(25900),a=o(30792),c=o(38744),d=o(93636),l=o(90608),h=o(66512),u=o(32808);function g(e){return d.cU.regex(u.YR.keys()[0],new RegExp("(\\s|^)"+(0,r.q0)(e.value)+"\\b"))}const p={type:"object",defaultSnippets:[{body:{kind:""}}],properties:{kind:{type:"string",description:c.uy("args.schema.kind","Kind of the code action to run.")},apply:{type:"string",description:c.uy("args.schema.apply","Controls when the returned actions are applied."),default:"ifSingle",enum:["first","ifSingle","never"],enumDescriptions:[c.uy("args.schema.apply.first","Always apply the first returned code action."),c.uy("args.schema.apply.ifSingle","Apply the first returned code action if it is the only one."),c.uy("args.schema.apply.never","Do not apply the returned code actions.")]},preferred:{type:"boolean",default:!1,description:c.uy("args.schema.preferred","Controls if only preferred code actions should be returned.")}}};function m(e,t,o,i,n=l.q_.Default){if(e.hasModel()){const r=h.y.get(e);null==r||r.manualTriggerAtCurrentPosition(t,n,o,i)}}class f extends i.ay{constructor(){super({id:a.kP,label:c.uy("quickfix.trigger.label","Quick Fix..."),alias:"Quick Fix...",precondition:d.cU.and(s.y.writable,s.y.hasCodeActionsProvider),kbOpts:{kbExpr:s.y.textInputFocus,primary:2137,weight:100}})}run(e,t){return m(t,c.uy("editor.action.quickFix.noneMessage","No code actions available"),void 0,void 0,l.q_.QuickFix)}}class _ extends i.gd{constructor(){super({id:a.ey,precondition:d.cU.and(s.y.writable,s.y.hasCodeActionsProvider),description:{description:"Trigger a code action",args:[{name:"args",schema:p}]}})}runEditorCommand(e,t,o){const i=l.ic.fromUser(o,{kind:l.o1.Empty,apply:"ifSingle"});return m(t,"string"==typeof(null==o?void 0:o.kind)?i.preferred?c.uy("editor.action.codeAction.noneMessage.preferred.kind","No preferred code actions for '{0}' available",o.kind):c.uy("editor.action.codeAction.noneMessage.kind","No code actions for '{0}' available",o.kind):i.preferred?c.uy("editor.action.codeAction.noneMessage.preferred","No preferred code actions available"):c.uy("editor.action.codeAction.noneMessage","No code actions available"),{include:i.kind,includeSourceActions:!0,onlyIncludePreferredActions:i.preferred},i.apply)}}class v extends i.ay{constructor(){super({id:a.wp,label:c.uy("refactor.label","Refactor..."),alias:"Refactor...",precondition:d.cU.and(s.y.writable,s.y.hasCodeActionsProvider),kbOpts:{kbExpr:s.y.textInputFocus,primary:3120,mac:{primary:1328},weight:100},contextMenuOpts:{group:"1_modification",order:2,when:d.cU.and(s.y.writable,g(l.o1.Refactor))},description:{description:"Refactor...",args:[{name:"args",schema:p}]}})}run(e,t,o){const i=l.ic.fromUser(o,{kind:l.o1.Refactor,apply:"never"});return m(t,"string"==typeof(null==o?void 0:o.kind)?i.preferred?c.uy("editor.action.refactor.noneMessage.preferred.kind","No preferred refactorings for '{0}' available",o.kind):c.uy("editor.action.refactor.noneMessage.kind","No refactorings for '{0}' available",o.kind):i.preferred?c.uy("editor.action.refactor.noneMessage.preferred","No preferred refactorings available"):c.uy("editor.action.refactor.noneMessage","No refactorings available"),{include:l.o1.Refactor.contains(i.kind)?i.kind:l.o1.None,onlyIncludePreferredActions:i.preferred},i.apply,l.q_.Refactor)}}class C extends i.ay{constructor(){super({id:a._m,label:c.uy("source.label","Source Action..."),alias:"Source Action...",precondition:d.cU.and(s.y.writable,s.y.hasCodeActionsProvider),contextMenuOpts:{group:"1_modification",order:2.1,when:d.cU.and(s.y.writable,g(l.o1.Source))},description:{description:"Source Action...",args:[{name:"args",schema:p}]}})}run(e,t,o){const i=l.ic.fromUser(o,{kind:l.o1.Source,apply:"never"});return m(t,"string"==typeof(null==o?void 0:o.kind)?i.preferred?c.uy("editor.action.source.noneMessage.preferred.kind","No preferred source actions for '{0}' available",o.kind):c.uy("editor.action.source.noneMessage.kind","No source actions for '{0}' available",o.kind):i.preferred?c.uy("editor.action.source.noneMessage.preferred","No preferred source actions available"):c.uy("editor.action.source.noneMessage","No source actions available"),{include:l.o1.Source.contains(i.kind)?i.kind:l.o1.None,includeSourceActions:!0,onlyIncludePreferredActions:i.preferred},i.apply,l.q_.SourceAction)}}class b extends i.ay{constructor(){super({id:a.Ar,label:c.uy("organizeImports.label","Organize Imports"),alias:"Organize Imports",precondition:d.cU.and(s.y.writable,g(l.o1.SourceOrganizeImports)),kbOpts:{kbExpr:s.y.textInputFocus,primary:1581,weight:100}})}run(e,t){return m(t,c.uy("editor.action.organize.noneMessage","No organize imports action available"),{include:l.o1.SourceOrganizeImports,includeSourceActions:!0},"ifSingle",l.q_.OrganizeImports)}}class y extends i.ay{constructor(){super({id:a.WK,label:c.uy("fixAll.label","Fix All"),alias:"Fix All",precondition:d.cU.and(s.y.writable,g(l.o1.SourceFixAll))})}run(e,t){return m(t,c.uy("fixAll.noneMessage","No fix all action available"),{include:l.o1.SourceFixAll,includeSourceActions:!0},"ifSingle",l.q_.FixAll)}}class w extends i.ay{constructor(){super({id:a.EL,label:c.uy("autoFix.label","Auto Fix..."),alias:"Auto Fix...",precondition:d.cU.and(s.y.writable,g(l.o1.QuickFix)),kbOpts:{kbExpr:s.y.textInputFocus,primary:1625,mac:{primary:2649},weight:100}})}run(e,t){return m(t,c.uy("editor.action.autoFix.noneMessage","No auto fixes available"),{include:l.o1.QuickFix,onlyIncludePreferredActions:!0},"ifSingle",l.q_.AutoFix)}}var k=o(66256),S=o(19120),x=o(60900);(0,i._U)(h.y.ID,h.y,3),(0,i._U)(k._.ID,k._,4),(0,i.K_)(f),(0,i.K_)(v),(0,i.K_)(C),(0,i.K_)(b),(0,i.K_)(w),(0,i.K_)(y),(0,i.SU)(new _),x.o.as(S.kh.Configuration).registerConfiguration(Object.assign(Object.assign({},n.Q5),{properties:{"editor.codeActionWidget.showHeaders":{type:"boolean",scope:5,description:c.uy("showCodeActionHeaders","Enable/disable showing group headers in the Code Action menu."),default:!0}}}))},66512:function(e,t,o){"use strict";o.d(t,{y:function(){return W}});var i=o(41703),n=o(39048),r=o(42792),s=o(30792),a=o(69040),c=o(32096),d=o(4400),l=o(90608),h=o(26272),u=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},g=function(e,t){return function(o,i){t(o,i,e)}};let p=class e{constructor(e){this.keybindingService=e}getResolver(){const t=new i.o((()=>this.keybindingService.getKeybindings().filter((t=>e.codeActionCommands.indexOf(t.command)>=0)).filter((e=>e.resolvedKeybinding)).map((e=>{let t=e.commandArgs;return e.command===s.Ar?t={kind:l.o1.SourceOrganizeImports.value}:e.command===s.WK&&(t={kind:l.o1.SourceFixAll.value}),Object.assign({resolvedKeybinding:e.resolvedKeybinding},l.ic.fromUser(t,{kind:l.o1.None,apply:"never"}))}))));return e=>{if(e.kind){const o=this.bestKeybindingForCodeAction(e,t.value);return null==o?void 0:o.resolvedKeybinding}}}bestKeybindingForCodeAction(e,t){if(!e.kind)return;const o=new l.o1(e.kind);return t.filter((e=>e.kind.contains(o))).filter((t=>!t.preferred||e.isPreferred)).reduceRight(((e,t)=>e?e.kind.contains(t.kind)?t:e:t),void 0)}};p.codeActionCommands=[s.wp,s.ey,s._m,s.Ar,s.WK],p=u([g(0,h.M)],p);o(72397);var m=o(51708),f=(o(64952),o(38744));const _=Object.freeze({kind:l.o1.Empty,title:(0,f.uy)("codeAction.widget.id.more","More Actions...")}),v=Object.freeze([{kind:l.o1.QuickFix,title:(0,f.uy)("codeAction.widget.id.quickfix","Quick Fix...")},{kind:l.o1.RefactorExtract,title:(0,f.uy)("codeAction.widget.id.extract","Extract..."),icon:m.C.wrench},{kind:l.o1.RefactorInline,title:(0,f.uy)("codeAction.widget.id.inline","Inline..."),icon:m.C.wrench},{kind:l.o1.RefactorRewrite,title:(0,f.uy)("codeAction.widget.id.convert","Rewrite..."),icon:m.C.wrench},{kind:l.o1.RefactorMove,title:(0,f.uy)("codeAction.widget.id.move","Move..."),icon:m.C.wrench},{kind:l.o1.SurroundWith,title:(0,f.uy)("codeAction.widget.id.surround","Surround With..."),icon:m.C.symbolSnippet},{kind:l.o1.Source,title:(0,f.uy)("codeAction.widget.id.source","Source Action..."),icon:m.C.symbolFile},_]);var C,b=o(88436),y=o(53988),w=o(8296),k=o(91188),S=o(34572),x=o(66256),A=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},L=function(e,t){return function(o,i){t(o,i,e)}},P=function(e,t,o,i){return new(o||(o=Promise))((function(n,r){function s(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))},D=function(e,t,o,i,n){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?n.call(e,o):n?n.value=o:t.set(e,o),o},I=function(e,t,o,i){if("a"===o&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===o?i:"a"===o?i.call(e):i?i.value:t.get(e)};let M=class extends n.CC{constructor(e,t,o,r,s,a){super(),this._editor=e,this.delegate=t,this._configurationService=r,this._actionWidgetService=s,this._commandService=a,this._activeCodeActions=this._register(new n.Qb),C.set(this,!1),this._showDisabled=!1,this._lightBulbWidget=new i.o((()=>{const e=this._editor.getContribution(x._.ID);return e&&this._register(e.onClick((e=>this.showCodeActionList(e.actions,e,{includeDisabledActions:!1,fromLightbulb:!0})))),e})),this._resolver=o.createInstance(p),this._register(this._editor.onDidLayoutChange((()=>this._actionWidgetService.hide())))}dispose(){D(this,C,!0,"f"),super.dispose()}update(e){var t,o,i,n,r,s,a;return P(this,void 0,void 0,(function*(){if(1!==e.type)return void(null===(t=this._lightBulbWidget.rawValue)||void 0===t||t.hide());let d;try{d=yield e.actions}catch(e){return void(0,c.eU)(e)}if(!I(this,C,"f"))if(null===(o=this._lightBulbWidget.value)||void 0===o||o.update(d,e.trigger,e.position),1===e.trigger.type){if(null===(i=e.trigger.filter)||void 0===i?void 0:i.include){const t=this.tryGetValidActionToApply(e.trigger,d);if(t){try{null===(n=this._lightBulbWidget.value)||void 0===n||n.hide(),yield this.delegate.applyCodeAction(t,!1,!1)}finally{d.dispose()}return}if(e.trigger.context){const t=this.getInvalidActionThatWouldHaveBeenApplied(e.trigger,d);if(t&&t.action.disabled)return null===(r=b.I.get(this._editor))||void 0===r||r.showMessage(t.action.disabled,e.trigger.context.position),void d.dispose()}}const t=!!(null===(s=e.trigger.filter)||void 0===s?void 0:s.include);if(e.trigger.context&&(!d.allActions.length||!t&&!d.validActions.length))return null===(a=b.I.get(this._editor))||void 0===a||a.showMessage(e.trigger.context.notAvailableMessage,e.trigger.context.position),this._activeCodeActions.value=d,void d.dispose();this._activeCodeActions.value=d,this.showCodeActionList(d,this.toCoords(e.position),{includeDisabledActions:t,fromLightbulb:!1})}else this._actionWidgetService.isVisible?d.dispose():this._activeCodeActions.value=d}))}getInvalidActionThatWouldHaveBeenApplied(e,t){if(t.allActions.length)return"first"===e.autoApply&&0===t.validActions.length||"ifSingle"===e.autoApply&&1===t.allActions.length?t.allActions.find((({action:e})=>e.disabled)):void 0}tryGetValidActionToApply(e,t){if(t.validActions.length)return"first"===e.autoApply&&t.validActions.length>0||"ifSingle"===e.autoApply&&1===t.validActions.length?t.validActions[0]:void 0}showCodeActionList(e,t,o){return P(this,void 0,void 0,(function*(){const i=this._editor.getDomNode();if(!i)return;const n=o.includeDisabledActions&&(this._showDisabled||0===e.validActions.length)?e.allActions:e.validActions;if(!n.length)return;const r=d.J.isIPosition(t)?this.toCoords(t):t,s={onSelect:(e,t)=>P(this,void 0,void 0,(function*(){this.delegate.applyCodeAction(e,!0,!!t),this._actionWidgetService.hide()})),onHide:()=>{var e;null===(e=this._editor)||void 0===e||e.focus()}};this._actionWidgetService.show("codeActionWidget",!0,function(e,t,o){if(!t)return e.map((e=>({kind:"action",item:e,group:_,disabled:!!e.action.disabled,label:e.action.disabled||e.action.title})));const i=v.map((e=>({group:e,actions:[]})));for(const t of e){const e=t.action.kind?new l.o1(t.action.kind):l.o1.None;for(const o of i)if(o.group.kind.contains(e)){o.actions.push(t);break}}const n=[];for(const e of i)if(e.actions.length){n.push({kind:"header",group:e.group});for(const t of e.actions)n.push({kind:"action",item:t,group:e.group,label:t.action.title,disabled:!!t.action.disabled,keybinding:o(t.action)})}return n}(n,this._shouldShowHeaders(),this._resolver.getResolver()),s,r,i,this._getActionBarActions(e,t,o))}))}toCoords(e){if(!this._editor.hasModel())return{x:0,y:0};this._editor.revealPosition(e,1),this._editor.render();const t=this._editor.getScrolledVisiblePosition(e),o=(0,a.HT)(this._editor.getDomNode());return{x:o.left+t.left,y:o.top+t.top+t.height}}_shouldShowHeaders(){var e;const t=null===(e=this._editor)||void 0===e?void 0:e.getModel();return this._configurationService.getValue("editor.codeActionWidget.showHeaders",{resource:null==t?void 0:t.uri})}_getActionBarActions(e,t,o){if(o.fromLightbulb)return[];const i=e.documentation.map((e=>{var t;return{id:e.id,label:e.title,tooltip:null!==(t=e.tooltip)&&void 0!==t?t:"",class:void 0,enabled:!0,run:()=>{var t;return this._commandService.executeCommand(e.id,...null!==(t=e.arguments)&&void 0!==t?t:[])}}}));return o.includeDisabledActions&&e.validActions.length>0&&e.allActions.length!==e.validActions.length&&i.push(this._showDisabled?{id:"hideMoreActions",label:(0,f.uy)("hideMoreActions","Hide Disabled"),enabled:!0,tooltip:"",class:void 0,run:()=>(this._showDisabled=!1,this.showCodeActionList(e,t,o))}:{id:"showMoreActions",label:(0,f.uy)("showMoreActions","Show Disabled"),enabled:!0,tooltip:"",class:void 0,run:()=>(this._showDisabled=!0,this.showCodeActionList(e,t,o))}),i}};C=new WeakMap,M=A([L(2,S.U9),L(3,k.Ci),L(4,y.e),L(5,w.a)],M);var E=o(93636),N=o(4904),O=o(77483),R=o(32808),T=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},F=function(e,t){return function(o,i){t(o,i,e)}},B=function(e,t,o,i){return new(o||(o=Promise))((function(n,r){function s(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};let W=class e extends n.CC{static get(t){return t.getContribution(e.ID)}constructor(e,t,o,n,r,s){super(),this._instantiationService=r,this._editor=e,this._model=this._register(new R.ov(this._editor,s.codeActionProvider,t,o,n)),this._register(this._model.onDidChangeState((e=>this._ui.value.update(e)))),this._ui=new i.o((()=>this._register(r.createInstance(M,e,{applyCodeAction:(e,t,o)=>B(this,void 0,void 0,(function*(){try{yield this._applyCodeAction(e,o)}finally{t&&this._trigger({type:2,triggerAction:l.q_.QuickFix,filter:{}})}}))}))))}showCodeActions(e,t,o){return this._ui.value.showCodeActionList(t,o,{includeDisabledActions:!1,fromLightbulb:!1})}manualTriggerAtCurrentPosition(e,t,o,i){var n;if(!this._editor.hasModel())return;null===(n=b.I.get(this._editor))||void 0===n||n.closeMessage();const r=this._editor.getPosition();this._trigger({type:1,triggerAction:t,filter:o,autoApply:i,context:{notAvailableMessage:e,position:r}})}_trigger(e){return this._model.trigger(e)}_applyCodeAction(e,t){return this._instantiationService.invokeFunction(s.q8,e,s.Ex.FromCodeActions,{preview:t,editor:this._editor})}};W.ID="editor.contrib.codeActionController",W=T([F(1,N.BX),F(2,E.KK),F(3,O.qA),F(4,S.U9),F(5,r.w)],W)},32808:function(e,t,o){"use strict";o.d(t,{YR:function(){return m},ov:function(){return C}});var i,n=o(81564),r=o(32096),s=o(50420),a=o(39048),c=o(33127),d=o(93636),l=o(77483),h=o(90608),u=o(30792),g=function(e,t,o,i){if("a"===o&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===o?i:"a"===o?i.call(e):i?i.value:t.get(e)},p=function(e,t,o,i,n){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?n.call(e,o):n?n.value=o:t.set(e,o),o};const m=new d.uS("supportedCodeAction","");class f extends a.CC{constructor(e,t,o,i=250){super(),this._editor=e,this._markerService=t,this._signalChange=o,this._delay=i,this._autoTriggerTimer=this._register(new n.qF),this._register(this._markerService.onMarkerChanged((e=>this._onMarkerChanges(e)))),this._register(this._editor.onDidChangeCursorPosition((()=>this._tryAutoTrigger())))}trigger(e){const t=this._getRangeOfSelectionUnlessWhitespaceEnclosed(e);this._signalChange(t?{trigger:e,selection:t}:void 0)}_onMarkerChanges(e){const t=this._editor.getModel();t&&e.some((e=>(0,c.Ev)(e,t.uri)))&&this._tryAutoTrigger()}_tryAutoTrigger(){this._autoTriggerTimer.cancelAndSet((()=>{this.trigger({type:2,triggerAction:h.q_.Default})}),this._delay)}_getRangeOfSelectionUnlessWhitespaceEnclosed(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),o=this._editor.getSelection();if(o.isEmpty()&&2===e.type){const{lineNumber:e,column:i}=o.getPosition(),n=t.getLineContent(e);if(0===n.length)return;if(1===i){if(/\s/.test(n[0]))return}else if(i===t.getLineMaxColumn(e)){if(/\s/.test(n[n.length-1]))return}else if(/\s/.test(n[i-2])&&/\s/.test(n[i-1]))return}return o}}var _;!function(e){e.Empty={type:0};e.Triggered=class{constructor(e,t,o){this.trigger=e,this.position=t,this._cancellablePromise=o,this.type=1,this.actions=o.catch((e=>{if((0,r.A9)(e))return v;throw e}))}cancel(){this._cancellablePromise.cancel()}}}(_||(_={}));const v=Object.freeze({allActions:[],validActions:[],dispose:()=>{},documentation:[],hasAutoFix:!1});class C extends a.CC{constructor(e,t,o,n,r){super(),this._editor=e,this._registry=t,this._markerService=o,this._progressService=r,this._codeActionOracle=this._register(new a.Qb),this._state=_.Empty,this._onDidChangeState=this._register(new s.sl),this.onDidChangeState=this._onDidChangeState.event,i.set(this,!1),this._supportedCodeActions=m.bindTo(n),this._register(this._editor.onDidChangeModel((()=>this._update()))),this._register(this._editor.onDidChangeModelLanguage((()=>this._update()))),this._register(this._registry.onDidChange((()=>this._update()))),this._update()}dispose(){g(this,i,"f")||(p(this,i,!0,"f"),super.dispose(),this.setState(_.Empty,!0))}_update(){if(g(this,i,"f"))return;this._codeActionOracle.value=void 0,this.setState(_.Empty);const e=this._editor.getModel();if(e&&this._registry.has(e)&&!this._editor.getOption(87)){const t=this._registry.all(e).flatMap((e=>{var t;return null!==(t=e.providedCodeActionKinds)&&void 0!==t?t:[]}));this._supportedCodeActions.set(t.join(" ")),this._codeActionOracle.value=new f(this._editor,this._markerService,(t=>{var o;if(!t)return void this.setState(_.Empty);const i=(0,n.ec)((o=>(0,u.a6)(this._registry,e,t.selection,t.trigger,l.b$.None,o)));1===t.trigger.type&&(null===(o=this._progressService)||void 0===o||o.showWhile(i,250)),this.setState(new _.Triggered(t.trigger,t.selection.getStartPosition(),i))}),void 0),this._codeActionOracle.value.trigger({type:2,triggerAction:h.q_.Default})}else this._supportedCodeActions.reset()}trigger(e){var t;null===(t=this._codeActionOracle.value)||void 0===t||t.trigger(e)}setState(e,t){e!==this._state&&(1===this._state.type&&this._state.cancel(),this._state=e,t||g(this,i,"f")||this._onDidChangeState.fire(e))}}i=new WeakMap},66256:function(e,t,o){"use strict";o.d(t,{_:function(){return _}});var i,n=o(69040),r=o(11340),s=o(51708),a=o(50420),c=o(39048),d=o(80120),l=o(96196),h=(o(38328),o(62928)),u=o(30792),g=o(38744),p=o(26272),m=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},f=function(e,t){return function(o,i){t(o,i,e)}};!function(e){e.Hidden={type:0};e.Showing=class{constructor(e,t,o,i){this.actions=e,this.trigger=t,this.editorPosition=o,this.widgetPosition=i,this.type=1}}}(i||(i={}));let _=class e extends c.CC{constructor(e,t){super(),this._editor=e,this._onClick=this._register(new a.sl),this.onClick=this._onClick.event,this._state=i.Hidden,this._domNode=n.$("div.lightBulbWidget"),this._register(r.K.ignoreTarget(this._domNode)),this._editor.addContentWidget(this),this._register(this._editor.onDidChangeModelContent((e=>{const t=this._editor.getModel();(1!==this.state.type||!t||this.state.editorPosition.lineNumber>=t.getLineCount())&&this.hide()}))),this._register(n.Ul(this._domNode,(e=>{if(1!==this.state.type)return;this._editor.focus(),e.preventDefault();const{top:t,height:o}=n.HT(this._domNode),i=this._editor.getOption(64);let r=Math.floor(i/3);null!==this.state.widgetPosition.position&&this.state.widgetPosition.position.lineNumber<this.state.editorPosition.lineNumber&&(r+=i),this._onClick.fire({x:e.posx,y:t+o+r,actions:this.state.actions,trigger:this.state.trigger})}))),this._register(n.Wq(this._domNode,"mouseenter",(e=>{1==(1&e.buttons)&&this.hide()}))),this._register(this._editor.onDidChangeConfiguration((e=>{e.hasChanged(62)&&!this._editor.getOption(62).enabled&&this.hide()}))),this._register(a.im.runAndSubscribe(t.onDidUpdateKeybindings,(()=>{var e,o;this._preferredKbLabel=(0,l.uy)(null===(e=t.lookupKeybinding(u.EL))||void 0===e?void 0:e.getLabel()),this._quickFixKbLabel=(0,l.uy)(null===(o=t.lookupKeybinding(u.kP))||void 0===o?void 0:o.getLabel()),this._updateLightBulbTitleAndIcon()})))}dispose(){super.dispose(),this._editor.removeContentWidget(this)}getId(){return"LightBulbWidget"}getDomNode(){return this._domNode}getPosition(){return 1===this._state.type?this._state.widgetPosition:null}update(t,o,n){if(t.validActions.length<=0)return this.hide();const r=this._editor.getOptions();if(!r.get(62).enabled)return this.hide();const s=this._editor.getModel();if(!s)return this.hide();const{lineNumber:a,column:c}=s.validatePosition(n),d=s.getOptions().tabSize,l=r.get(48),u=s.getLineContent(a),g=(0,h.w)(u,d),p=e=>e>2&&this._editor.getTopForLineNumber(e)===this._editor.getTopForLineNumber(e-1);let m=a;if(!(l.spaceWidth*g>22))if(a>1&&!p(a-1))m-=1;else if(p(a+1)){if(c*l.spaceWidth<22)return this.hide()}else m+=1;this.state=new i.Showing(t,o,n,{position:{lineNumber:m,column:1},preference:e._posPref}),this._editor.layoutContentWidget(this)}hide(){this.state!==i.Hidden&&(this.state=i.Hidden,this._editor.layoutContentWidget(this))}get state(){return this._state}set state(e){this._state=e,this._updateLightBulbTitleAndIcon()}_updateLightBulbTitleAndIcon(){1===this.state.type&&this.state.actions.hasAutoFix&&(this._domNode.classList.remove(...d.g.asClassNameArray(s.C.lightBulb)),this._domNode.classList.add(...d.g.asClassNameArray(s.C.lightbulbAutofix)),this._preferredKbLabel)?this.title=g.uy("preferredcodeActionWithKb","Show Code Actions. Preferred Quick Fix Available ({0})",this._preferredKbLabel):(this._domNode.classList.remove(...d.g.asClassNameArray(s.C.lightbulbAutofix)),this._domNode.classList.add(...d.g.asClassNameArray(s.C.lightBulb)),this._quickFixKbLabel?this.title=g.uy("codeActionWithKb","Show Code Actions ({0})",this._quickFixKbLabel):this.title=g.uy("codeAction","Show Code Actions"))}set title(e){this._domNode.title=e}};_.ID="editor.contrib.lightbulbWidget",_._posPref=[0],_=m([f(1,p.M)],_)},90608:function(e,t,o){"use strict";o.d(t,{MR:function(){return c},gI:function(){return a},ic:function(){return l},mS:function(){return h},o1:function(){return s},q_:function(){return i}});var i,n=o(32096),r=function(e,t,o,i){return new(o||(o=Promise))((function(n,r){function s(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class s{constructor(e){this.value=e}equals(e){return this.value===e.value}contains(e){return this.equals(e)||""===this.value||e.value.startsWith(this.value+s.sep)}intersects(e){return this.contains(e)||e.contains(this)}append(e){return new s(this.value+s.sep+e)}}function a(e,t){return!(e.include&&!e.include.intersects(t))&&((!e.excludes||!e.excludes.some((o=>d(t,o,e.include))))&&!(!e.includeSourceActions&&s.Source.contains(t)))}function c(e,t){const o=t.kind?new s(t.kind):void 0;return!!(!e.include||o&&e.include.contains(o))&&(!(e.excludes&&o&&e.excludes.some((t=>d(o,t,e.include))))&&(!(!e.includeSourceActions&&o&&s.Source.contains(o))&&!(e.onlyIncludePreferredActions&&!t.isPreferred)))}function d(e,t,o){return!!t.contains(e)&&(!o||!t.contains(o))}s.sep=".",s.None=new s("@@none@@"),s.Empty=new s(""),s.QuickFix=new s("quickfix"),s.Refactor=new s("refactor"),s.RefactorExtract=s.Refactor.append("extract"),s.RefactorInline=s.Refactor.append("inline"),s.RefactorMove=s.Refactor.append("move"),s.RefactorRewrite=s.Refactor.append("rewrite"),s.Source=new s("source"),s.SourceOrganizeImports=s.Source.append("organizeImports"),s.SourceFixAll=s.Source.append("fixAll"),s.SurroundWith=s.Refactor.append("surround"),function(e){e.Refactor="refactor",e.RefactorPreview="refactor preview",e.Lightbulb="lightbulb",e.Default="other (default)",e.SourceAction="source action",e.QuickFix="quick fix action",e.FixAll="fix all",e.OrganizeImports="organize imports",e.AutoFix="auto fix",e.QuickFixHover="quick fix hover window",e.OnSave="save participants",e.ProblemsView="problems view"}(i||(i={}));class l{static fromUser(e,t){return e&&"object"==typeof e?new l(l.getKindFromUser(e,t.kind),l.getApplyFromUser(e,t.apply),l.getPreferredUser(e)):new l(t.kind,t.apply,!1)}static getApplyFromUser(e,t){switch("string"==typeof e.apply?e.apply.toLowerCase():""){case"first":return"first";case"never":return"never";case"ifsingle":return"ifSingle";default:return t}}static getKindFromUser(e,t){return"string"==typeof e.kind?new s(e.kind):t}static getPreferredUser(e){return"boolean"==typeof e.preferred&&e.preferred}constructor(e,t,o){this.kind=e,this.apply=t,this.preferred=o}}class h{constructor(e,t){this.action=e,this.provider=t}resolve(e){var t;return r(this,void 0,void 0,(function*(){if((null===(t=this.provider)||void 0===t?void 0:t.resolveCodeAction)&&!this.action.edit){let t;try{t=yield this.provider.resolveCodeAction(this.action,e)}catch(e){(0,n.i4)(e)}t&&(this.action.edit=t.edit)}return this}))}}},20664:function(e,t,o){"use strict";var i=o(81564),n=o(32096),r=o(39048),s=o(43516),a=o(27440),c=o(5872),d=o(25900),l=o(31972),h=o(96196),u=o(70660),g=o(54780),p=o(8296),m=o(42792),f=function(e,t,o,i){return new(o||(o=Promise))((function(n,r){function s(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class _{constructor(){this.lenses=[],this._disposables=new r.Y1}dispose(){this._disposables.dispose()}get isDisposed(){return this._disposables.isDisposed}add(e,t){this._disposables.add(e);for(const o of e.lenses)this.lenses.push({symbol:o,provider:t})}}function v(e,t,o){return f(this,void 0,void 0,(function*(){const i=e.ordered(t),r=new Map,s=new _,a=i.map(((e,i)=>f(this,void 0,void 0,(function*(){r.set(e,i);try{const i=yield Promise.resolve(e.provideCodeLenses(t,o));i&&s.add(i,e)}catch(e){(0,n.i4)(e)}}))));return yield Promise.all(a),s.lenses=s.lenses.sort(((e,t)=>e.symbol.range.startLineNumber<t.symbol.range.startLineNumber?-1:e.symbol.range.startLineNumber>t.symbol.range.startLineNumber?1:r.get(e.provider)<r.get(t.provider)?-1:r.get(e.provider)>r.get(t.provider)?1:e.symbol.range.startColumn<t.symbol.range.startColumn?-1:e.symbol.range.startColumn>t.symbol.range.startColumn?1:0)),s}))}p.y.registerCommand("_executeCodeLensProvider",(function(e,...t){let[o,i]=t;(0,h.GE)(u.K.isUri(o)),(0,h.GE)("number"==typeof i||!i);const{codeLensProvider:s}=e.get(m.w),a=e.get(g.o).getModel(o);if(!a)throw(0,n.wJ)();const c=[],d=new r.Y1;return v(s,a,l.I.None).then((e=>{d.add(e);const t=[];for(const o of e.lenses)null==i||Boolean(o.symbol.command)?c.push(o.symbol):i-- >0&&o.provider.resolveCodeLens&&t.push(Promise.resolve(o.provider.resolveCodeLens(a,o.symbol,l.I.None)).then((e=>c.push(e||o.symbol))));return Promise.all(t)})).then((()=>c)).finally((()=>{setTimeout((()=>d.dispose()),100)}))}));var C=o(48117),b=o(75736),y=o(90836),w=o(47004),k=o(34572),S=o(67520),x=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},A=function(e,t){return function(o,i){t(o,i,e)}};const L=(0,k.eA)("ICodeLensCache");class P{constructor(e,t){this.lineCount=e,this.data=t}}let D=class{constructor(e){this._fakeProvider=new class{provideCodeLenses(){throw new Error("not supported")}},this._cache=new b.or(20,.75);(0,i.kp)((()=>e.remove("codelens/cache",1)));const t="codelens/cache2",o=e.get(t,1,"{}");this._deserialize(o),(0,C.q)(e.onWillSaveState)((o=>{o.reason===S.AP.SHUTDOWN&&e.store(t,this._serialize(),1,1)}))}put(e,t){const o=t.lenses.map((e=>{var t;return{range:e.symbol.range,command:e.symbol.command&&{id:"",title:null===(t=e.symbol.command)||void 0===t?void 0:t.title}}})),i=new _;i.add({lenses:o,dispose:()=>{}},this._fakeProvider);const n=new P(e.getLineCount(),i);this._cache.set(e.uri.toString(),n)}get(e){const t=this._cache.get(e.uri.toString());return t&&t.lineCount===e.getLineCount()?t.data:void 0}delete(e){this._cache.delete(e.uri.toString())}_serialize(){const e=Object.create(null);for(const[t,o]of this._cache){const i=new Set;for(const e of o.data.lenses)i.add(e.symbol.range.startLineNumber);e[t]={lineCount:o.lineCount,lines:[...i.values()]}}return JSON.stringify(e)}_deserialize(e){try{const t=JSON.parse(e);for(const e in t){const o=t[e],i=[];for(const e of o.lines)i.push({range:new y.E(e,1,e,11)});const n=new _;n.add({lenses:i,dispose(){}},this._fakeProvider),this._cache.set(e,new P(o.lineCount,n))}}catch(e){}}};D=x([A(0,S.oJ)],D),(0,w.G)(L,D,1);var I=o(69040),M=o(63280),E=(o(80580),o(33568));class N{constructor(e,t,o){this.afterColumn=1073741824,this.afterLineNumber=e,this.heightInPx=t,this._onHeight=o,this.suppressMouseDown=!0,this.domNode=document.createElement("div")}onComputedHeight(e){void 0===this._lastHeight?this._lastHeight=e:this._lastHeight!==e&&(this._lastHeight=e,this._onHeight())}isVisible(){return 0!==this._lastHeight&&this.domNode.hasAttribute("monaco-visible-view-zone")}}class O{constructor(e,t){this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this._commands=new Map,this._isEmpty=!0,this._editor=e,this._id="codelens.widget-"+O._idPool++,this.updatePosition(t),this._domNode=document.createElement("span"),this._domNode.className="codelens-decoration"}withCommands(e,t){this._commands.clear();const o=[];let i=!1;for(let t=0;t<e.length;t++){const n=e[t];if(n&&(i=!0,n.command)){const i=(0,M.g)(n.command.title.trim());n.command.id?(o.push(I.$("a",{id:String(t),title:n.command.tooltip,role:"button"},...i)),this._commands.set(String(t),n.command)):o.push(I.$("span",{title:n.command.tooltip},...i)),t+1<e.length&&o.push(I.$("span",void 0," | "))}}i?(I.a_(this._domNode,...o),this._isEmpty&&t&&this._domNode.classList.add("fadein"),this._isEmpty=!1):I.a_(this._domNode,I.$("span",void 0,"no commands"))}getCommand(e){return e.parentElement===this._domNode?this._commands.get(e.id):void 0}getId(){return this._id}getDomNode(){return this._domNode}updatePosition(e){const t=this._editor.getModel().getLineFirstNonWhitespaceColumn(e);this._widgetPosition={position:{lineNumber:e,column:t},preference:[1]}}getPosition(){return this._widgetPosition||null}}O._idPool=0;class R{constructor(){this._removeDecorations=[],this._addDecorations=[],this._addDecorationsCallbacks=[]}addDecoration(e,t){this._addDecorations.push(e),this._addDecorationsCallbacks.push(t)}removeDecoration(e){this._removeDecorations.push(e)}commit(e){const t=e.deltaDecorations(this._removeDecorations,this._addDecorations);for(let e=0,o=t.length;e<o;e++)this._addDecorationsCallbacks[e](t[e])}}const T=E.uw.register({collapseOnReplaceEdit:!0,description:"codelens"});class F{constructor(e,t,o,i,n,r){let s;this._isDisposed=!1,this._editor=t,this._data=e,this._decorationIds=[];const a=[];this._data.forEach(((e,t)=>{e.symbol.command&&a.push(e.symbol),o.addDecoration({range:e.symbol.range,options:T},(e=>this._decorationIds[t]=e)),s=s?y.E.plusRange(s,e.symbol.range):y.E.lift(e.symbol.range)})),this._viewZone=new N(s.startLineNumber-1,n,r),this._viewZoneId=i.addZone(this._viewZone),a.length>0&&(this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(a,!1))}_createContentWidgetIfNecessary(){this._contentWidget?this._editor.layoutContentWidget(this._contentWidget):(this._contentWidget=new O(this._editor,this._viewZone.afterLineNumber+1),this._editor.addContentWidget(this._contentWidget))}dispose(e,t){this._decorationIds.forEach(e.removeDecoration,e),this._decorationIds=[],null==t||t.removeZone(this._viewZoneId),this._contentWidget&&(this._editor.removeContentWidget(this._contentWidget),this._contentWidget=void 0),this._isDisposed=!0}isDisposed(){return this._isDisposed}isValid(){return this._decorationIds.some(((e,t)=>{const o=this._editor.getModel().getDecorationRange(e),i=this._data[t].symbol;return!(!o||y.E.isEmpty(i.range)!==o.isEmpty())}))}updateCodeLensSymbols(e,t){this._decorationIds.forEach(t.removeDecoration,t),this._decorationIds=[],this._data=e,this._data.forEach(((e,o)=>{t.addDecoration({range:e.symbol.range,options:T},(e=>this._decorationIds[o]=e))}))}updateHeight(e,t){this._viewZone.heightInPx=e,t.layoutZone(this._viewZoneId),this._contentWidget&&this._editor.layoutContentWidget(this._contentWidget)}computeIfNecessary(e){if(!this._viewZone.isVisible())return null;for(let t=0;t<this._decorationIds.length;t++){const o=e.getDecorationRange(this._decorationIds[t]);o&&(this._data[t].symbol.range=o)}return this._data}updateCommands(e){this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(e,!0);for(let t=0;t<this._data.length;t++){const o=e[t];if(o){const{symbol:e}=this._data[t];e.command=o.command||e.command}}}getCommand(e){var t;return null===(t=this._contentWidget)||void 0===t?void 0:t.getCommand(e)}getLineNumber(){const e=this._editor.getModel().getDecorationRange(this._decorationIds[0]);return e?e.startLineNumber:-1}update(e){if(this.isValid()){const t=this._editor.getModel().getDecorationRange(this._decorationIds[0]);t&&(this._viewZone.afterLineNumber=t.startLineNumber-1,e.layoutZone(this._viewZoneId),this._contentWidget&&(this._contentWidget.updatePosition(t.startLineNumber),this._editor.layoutContentWidget(this._contentWidget)))}}}var B=o(38744),W=o(41972),U=o(44120),V=o(944),H=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},K=function(e,t){return function(o,i){t(o,i,e)}},j=function(e,t,o,i){return new(o||(o=Promise))((function(n,r){function s(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};let q=class{constructor(e,t,o,n,s,a){this._editor=e,this._languageFeaturesService=t,this._commandService=n,this._notificationService=s,this._codeLensCache=a,this._disposables=new r.Y1,this._localToDispose=new r.Y1,this._lenses=[],this._oldCodeLensModels=new r.Y1,this._provideCodeLensDebounce=o.for(t.codeLensProvider,"CodeLensProvide",{min:250}),this._resolveCodeLensesDebounce=o.for(t.codeLensProvider,"CodeLensResolve",{min:250,salt:"resolve"}),this._resolveCodeLensesScheduler=new i.sR((()=>this._resolveCodeLensesInViewport()),this._resolveCodeLensesDebounce.default()),this._disposables.add(this._editor.onDidChangeModel((()=>this._onModelChange()))),this._disposables.add(this._editor.onDidChangeModelLanguage((()=>this._onModelChange()))),this._disposables.add(this._editor.onDidChangeConfiguration((e=>{(e.hasChanged(48)||e.hasChanged(17)||e.hasChanged(16))&&this._updateLensStyle(),e.hasChanged(15)&&this._onModelChange()}))),this._disposables.add(t.codeLensProvider.onDidChange(this._onModelChange,this)),this._onModelChange(),this._updateLensStyle()}dispose(){var e;this._localDispose(),this._disposables.dispose(),this._oldCodeLensModels.dispose(),null===(e=this._currentCodeLensModel)||void 0===e||e.dispose()}_getLayoutInfo(){const e=Math.max(1.3,this._editor.getOption(64)/this._editor.getOption(50));let t=this._editor.getOption(17);return(!t||t<5)&&(t=.9*this._editor.getOption(50)|0),{fontSize:t,codeLensHeight:t*e|0}}_updateLensStyle(){const{codeLensHeight:e,fontSize:t}=this._getLayoutInfo(),o=this._editor.getOption(16),i=this._editor.getOption(48),{style:n}=this._editor.getContainerDomNode();n.setProperty("--vscode-editorCodeLens-lineHeight",`${e}px`),n.setProperty("--vscode-editorCodeLens-fontSize",`${t}px`),n.setProperty("--vscode-editorCodeLens-fontFeatureSettings",i.fontFeatureSettings),o&&(n.setProperty("--vscode-editorCodeLens-fontFamily",o),n.setProperty("--vscode-editorCodeLens-fontFamilyDefault",c.IZ.fontFamily)),this._editor.changeViewZones((t=>{for(const o of this._lenses)o.updateHeight(e,t)}))}_localDispose(){var e,t,o;null===(e=this._getCodeLensModelPromise)||void 0===e||e.cancel(),this._getCodeLensModelPromise=void 0,null===(t=this._resolveCodeLensesPromise)||void 0===t||t.cancel(),this._resolveCodeLensesPromise=void 0,this._localToDispose.clear(),this._oldCodeLensModels.clear(),null===(o=this._currentCodeLensModel)||void 0===o||o.dispose()}_onModelChange(){this._localDispose();const e=this._editor.getModel();if(!e)return;if(!this._editor.getOption(15))return;const t=this._codeLensCache.get(e);if(t&&this._renderCodeLensSymbols(t),!this._languageFeaturesService.codeLensProvider.has(e))return void(t&&this._localToDispose.add((0,i.oF)((()=>{const o=this._codeLensCache.get(e);t===o&&(this._codeLensCache.delete(e),this._onModelChange())}),3e4)));for(const t of this._languageFeaturesService.codeLensProvider.all(e))if("function"==typeof t.onDidChange){const e=t.onDidChange((()=>o.schedule()));this._localToDispose.add(e)}const o=new i.sR((()=>{var t;const r=Date.now();null===(t=this._getCodeLensModelPromise)||void 0===t||t.cancel(),this._getCodeLensModelPromise=(0,i.ec)((t=>v(this._languageFeaturesService.codeLensProvider,e,t))),this._getCodeLensModelPromise.then((t=>{this._currentCodeLensModel&&this._oldCodeLensModels.add(this._currentCodeLensModel),this._currentCodeLensModel=t,this._codeLensCache.put(e,t);const i=this._provideCodeLensDebounce.update(e,Date.now()-r);o.delay=i,this._renderCodeLensSymbols(t),this._resolveCodeLensesInViewportSoon()}),n.eU)}),this._provideCodeLensDebounce.get(e));this._localToDispose.add(o),this._localToDispose.add((0,r.eC)((()=>this._resolveCodeLensesScheduler.cancel()))),this._localToDispose.add(this._editor.onDidChangeModelContent((()=>{var e;this._editor.changeDecorations((e=>{this._editor.changeViewZones((t=>{const o=[];let i=-1;this._lenses.forEach((e=>{e.isValid()&&i!==e.getLineNumber()?(e.update(t),i=e.getLineNumber()):o.push(e)}));const n=new R;o.forEach((e=>{e.dispose(n,t),this._lenses.splice(this._lenses.indexOf(e),1)})),n.commit(e)}))})),o.schedule(),this._resolveCodeLensesScheduler.cancel(),null===(e=this._resolveCodeLensesPromise)||void 0===e||e.cancel(),this._resolveCodeLensesPromise=void 0}))),this._localToDispose.add(this._editor.onDidFocusEditorWidget((()=>{o.schedule()}))),this._localToDispose.add(this._editor.onDidScrollChange((e=>{e.scrollTopChanged&&this._lenses.length>0&&this._resolveCodeLensesInViewportSoon()}))),this._localToDispose.add(this._editor.onDidLayoutChange((()=>{this._resolveCodeLensesInViewportSoon()}))),this._localToDispose.add((0,r.eC)((()=>{if(this._editor.getModel()){const e=s.O.capture(this._editor);this._editor.changeDecorations((e=>{this._editor.changeViewZones((t=>{this._disposeAllLenses(e,t)}))})),e.restore(this._editor)}else this._disposeAllLenses(void 0,void 0)}))),this._localToDispose.add(this._editor.onMouseDown((e=>{if(9!==e.target.type)return;let t=e.target.element;if("SPAN"===(null==t?void 0:t.tagName)&&(t=t.parentElement),"A"===(null==t?void 0:t.tagName))for(const e of this._lenses){const o=e.getCommand(t);if(o){this._commandService.executeCommand(o.id,...o.arguments||[]).catch((e=>this._notificationService.error(e)));break}}}))),o.schedule()}_disposeAllLenses(e,t){const o=new R;for(const e of this._lenses)e.dispose(o,t);e&&o.commit(e),this._lenses.length=0}_renderCodeLensSymbols(e){if(!this._editor.hasModel())return;const t=this._editor.getModel().getLineCount(),o=[];let i;for(const n of e.lenses){const e=n.symbol.range.startLineNumber;e<1||e>t||(i&&i[i.length-1].symbol.range.startLineNumber===e?i.push(n):(i=[n],o.push(i)))}if(!o.length&&!this._lenses.length)return;const n=s.O.capture(this._editor),r=this._getLayoutInfo();this._editor.changeDecorations((e=>{this._editor.changeViewZones((t=>{const i=new R;let n=0,s=0;for(;s<o.length&&n<this._lenses.length;){const e=o[s][0].symbol.range.startLineNumber,a=this._lenses[n].getLineNumber();a<e?(this._lenses[n].dispose(i,t),this._lenses.splice(n,1)):a===e?(this._lenses[n].updateCodeLensSymbols(o[s],i),s++,n++):(this._lenses.splice(n,0,new F(o[s],this._editor,i,t,r.codeLensHeight,(()=>this._resolveCodeLensesInViewportSoon()))),n++,s++)}for(;n<this._lenses.length;)this._lenses[n].dispose(i,t),this._lenses.splice(n,1);for(;s<o.length;)this._lenses.push(new F(o[s],this._editor,i,t,r.codeLensHeight,(()=>this._resolveCodeLensesInViewportSoon()))),s++;i.commit(e)}))})),n.restore(this._editor)}_resolveCodeLensesInViewportSoon(){this._editor.getModel()&&this._resolveCodeLensesScheduler.schedule()}_resolveCodeLensesInViewport(){var e;null===(e=this._resolveCodeLensesPromise)||void 0===e||e.cancel(),this._resolveCodeLensesPromise=void 0;const t=this._editor.getModel();if(!t)return;const o=[],r=[];if(this._lenses.forEach((e=>{const i=e.computeIfNecessary(t);i&&(o.push(i),r.push(e))})),0===o.length)return;const s=Date.now(),a=(0,i.ec)((e=>{const i=o.map(((o,i)=>{const s=new Array(o.length),a=o.map(((o,i)=>o.symbol.command||"function"!=typeof o.provider.resolveCodeLens?(s[i]=o.symbol,Promise.resolve(void 0)):Promise.resolve(o.provider.resolveCodeLens(t,o.symbol,e)).then((e=>{s[i]=e}),n.i4)));return Promise.all(a).then((()=>{e.isCancellationRequested||r[i].isDisposed()||r[i].updateCommands(s)}))}));return Promise.all(i)}));this._resolveCodeLensesPromise=a,this._resolveCodeLensesPromise.then((()=>{const e=this._resolveCodeLensesDebounce.update(t,Date.now()-s);this._resolveCodeLensesScheduler.delay=e,this._currentCodeLensModel&&this._codeLensCache.put(t,this._currentCodeLensModel),this._oldCodeLensModels.clear(),a===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)}),(e=>{(0,n.eU)(e),a===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)}))}getModel(){return this._currentCodeLensModel}};q.ID="css.editor.codeLens",q=H([K(1,m.w),K(2,V.s),K(3,p.a),K(4,W.sx),K(5,L)],q),(0,a._U)(q.ID,q,1),(0,a.K_)(class extends a.ay{constructor(){super({id:"codelens.showLensesInCurrentLine",precondition:d.y.hasCodeLensProvider,label:(0,B.uy)("showLensOnLine","Show CodeLens Commands For Current Line"),alias:"Show CodeLens Commands For Current Line"})}run(e,t){return j(this,void 0,void 0,(function*(){if(!t.hasModel())return;const o=e.get(U.yO),i=e.get(p.a),n=e.get(W.sx),r=t.getSelection().positionLineNumber,s=t.getContribution(q.ID);if(!s)return;const a=s.getModel();if(!a)return;const c=[];for(const e of a.lenses)e.symbol.command&&e.symbol.range.startLineNumber===r&&c.push({label:e.symbol.command.title,command:e.symbol.command});if(0===c.length)return;const d=yield o.pick(c,{canPickMany:!1});if(d){if(a.isDisposed)return yield i.executeCommand(this.id);try{yield i.executeCommand(d.command.id,...d.command.arguments||[])}catch(e){n.error(e)}}}))}})},77360:function(e,t,o){"use strict";o.d(t,{A:function(){return p},O:function(){return g}});var i=o(31972),n=o(32096),r=o(70660),s=o(90836),a=o(54780),c=o(8296),d=o(42792),l=o(45184),h=o(91188),u=function(e,t,o,i){return new(o||(o=Promise))((function(n,r){function s(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};function g(e,t,o,i=!0){return u(this,void 0,void 0,(function*(){return v(new m,e,t,o,i)}))}function p(e,t,o,i){return Promise.resolve(o.provideColorPresentations(e,t,i))}class m{constructor(){}compute(e,t,o,i){return u(this,void 0,void 0,(function*(){const n=yield e.provideDocumentColors(t,o);if(Array.isArray(n))for(const t of n)i.push({colorInfo:t,provider:e});return Array.isArray(n)}))}}class f{constructor(){}compute(e,t,o,i){return u(this,void 0,void 0,(function*(){const n=yield e.provideDocumentColors(t,o);if(Array.isArray(n))for(const e of n)i.push({range:e.range,color:[e.color.red,e.color.green,e.color.blue,e.color.alpha]});return Array.isArray(n)}))}}class _{constructor(e){this.colorInfo=e}compute(e,t,o,n){return u(this,void 0,void 0,(function*(){const o=yield e.provideColorPresentations(t,this.colorInfo,i.I.None);return Array.isArray(o)&&n.push(...o),Array.isArray(o)}))}}function v(e,t,o,i,r){return u(this,void 0,void 0,(function*(){let s,a=!1;const c=[],d=t.ordered(o);for(let t=d.length-1;t>=0;t--){const r=d[t];if(r instanceof l.M)s=r;else try{a||(a=yield e.compute(r,o,i,c))}catch(e){(0,n.i4)(e)}}return a?c:s&&r?(yield e.compute(s,o,i,c),c):[]}))}function C(e,t){const{colorProvider:o}=e.get(d.w),i=e.get(a.o).getModel(t);if(!i)throw(0,n.wJ)();return{model:i,colorProviderRegistry:o,isDefaultColorDecoratorsEnabled:e.get(h.Ci).getValue("editor.defaultColorDecorators",{resource:t})}}c.y.registerCommand("_executeDocumentColorProvider",(function(e,...t){const[o]=t;if(!(o instanceof r.K))throw(0,n.wJ)();const{model:s,colorProviderRegistry:a,isDefaultColorDecoratorsEnabled:c}=C(e,o);return v(new f,a,s,i.I.None,c)})),c.y.registerCommand("_executeColorPresentationProvider",(function(e,...t){const[o,a]=t,{uri:c,range:d}=a;if(!(c instanceof r.K&&Array.isArray(o)&&4===o.length&&s.E.isIRange(d)))throw(0,n.wJ)();const{model:l,colorProviderRegistry:h,isDefaultColorDecoratorsEnabled:u}=C(e,c),[g,p,m,f]=o;return v(new _({range:d,color:{red:g,green:p,blue:m,alpha:f}}),h,l,i.I.None,u)}))},2268:function(e,t,o){"use strict";var i=o(39048),n=o(27440),r=o(90836),s=o(93840),a=o(94572),c=o(29680),d=o(26288);class l extends i.CC{constructor(e){super(),this._editor=e,this._register(e.onMouseDown((e=>this.onMouseDown(e))))}dispose(){super.dispose()}onMouseDown(e){const t=e.target;if(6!==t.type)return;if(!t.detail.injectedText)return;if(t.detail.injectedText.options.attachedData!==s.MN)return;if(!t.range)return;const o=this._editor.getContribution(c.u.ID);if(o&&!o.isColorPickerVisible()){const e=new r.E(t.range.startLineNumber,t.range.startColumn+1,t.range.endLineNumber,t.range.endColumn+1);o.showContentHover(e,1,0,!1)}}}l.ID="editor.contrib.colorContribution",(0,n._U)(l.ID,l,2),d.y0.register(a.g1)},93840:function(e,t,o){"use strict";o.d(t,{MN:function(){return y},Qj:function(){return w}});var i=o(81564),n=o(54752),r=o(32096),s=o(50420),a=o(39048),c=o(30096),d=o(2443),l=o(56016),h=o(27440),u=o(90836),g=o(33568),p=o(944),m=o(42792),f=o(77360),_=o(91188),v=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},C=function(e,t){return function(o,i){t(o,i,e)}},b=function(e,t,o,i){return new(o||(o=Promise))((function(n,r){function s(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};const y=Object.create({});let w=class e extends a.CC{constructor(t,o,i,n){super(),this._editor=t,this._configurationService=o,this._languageFeaturesService=i,this._localToDispose=this._register(new a.Y1),this._decorationsIds=[],this._colorDatas=new Map,this._colorDecoratorIds=this._editor.createDecorationsCollection(),this._ruleFactory=new l.o7(this._editor),this._decoratorLimitReporter=new k,this._colorDecorationClassRefs=this._register(new a.Y1),this._debounceInformation=n.for(i.colorProvider,"Document Colors",{min:e.RECOMPUTE_TIME}),this._register(t.onDidChangeModel((()=>{this._isColorDecoratorsEnabled=this.isEnabled(),this.updateColors()}))),this._register(t.onDidChangeModelLanguage((()=>this.updateColors()))),this._register(i.colorProvider.onDidChange((()=>this.updateColors()))),this._register(t.onDidChangeConfiguration((e=>{const t=this._isColorDecoratorsEnabled;this._isColorDecoratorsEnabled=this.isEnabled(),this._isDefaultColorDecoratorsEnabled=this._editor.getOption(141);const o=t!==this._isColorDecoratorsEnabled||e.hasChanged(19),i=e.hasChanged(141);(o||i)&&(this._isColorDecoratorsEnabled?this.updateColors():this.removeAllDecorations())}))),this._timeoutTimer=null,this._computePromise=null,this._isColorDecoratorsEnabled=this.isEnabled(),this._isDefaultColorDecoratorsEnabled=this._editor.getOption(141),this.updateColors()}isEnabled(){const e=this._editor.getModel();if(!e)return!1;const t=e.getLanguageId(),o=this._configurationService.getValue(t);if(o&&"object"==typeof o){const e=o.colorDecorators;if(e&&void 0!==e.enable&&!e.enable)return e.enable}return this._editor.getOption(18)}static get(e){return e.getContribution(this.ID)}dispose(){this.stop(),this.removeAllDecorations(),super.dispose()}updateColors(){if(this.stop(),!this._isColorDecoratorsEnabled)return;const e=this._editor.getModel();e&&this._languageFeaturesService.colorProvider.has(e)&&(this._localToDispose.add(this._editor.onDidChangeModelContent((()=>{this._timeoutTimer||(this._timeoutTimer=new i.qF,this._timeoutTimer.cancelAndSet((()=>{this._timeoutTimer=null,this.beginCompute()}),this._debounceInformation.get(e)))}))),this.beginCompute())}beginCompute(){return b(this,void 0,void 0,(function*(){this._computePromise=(0,i.ec)((e=>b(this,void 0,void 0,(function*(){const t=this._editor.getModel();if(!t)return[];const o=new c.U(!1),i=yield(0,f.O)(this._languageFeaturesService.colorProvider,t,e,this._isDefaultColorDecoratorsEnabled);return this._debounceInformation.update(t,o.elapsed()),i}))));try{const e=yield this._computePromise;this.updateDecorations(e),this.updateColorDecorators(e),this._computePromise=null}catch(e){(0,r.eU)(e)}}))}stop(){this._timeoutTimer&&(this._timeoutTimer.cancel(),this._timeoutTimer=null),this._computePromise&&(this._computePromise.cancel(),this._computePromise=null),this._localToDispose.clear()}updateDecorations(e){const t=e.map((e=>({range:{startLineNumber:e.colorInfo.range.startLineNumber,startColumn:e.colorInfo.range.startColumn,endLineNumber:e.colorInfo.range.endLineNumber,endColumn:e.colorInfo.range.endColumn},options:g.uw.EMPTY})));this._editor.changeDecorations((o=>{this._decorationsIds=o.deltaDecorations(this._decorationsIds,t),this._colorDatas=new Map,this._decorationsIds.forEach(((t,o)=>this._colorDatas.set(t,e[o])))}))}updateColorDecorators(e){this._colorDecorationClassRefs.clear();const t=[],o=this._editor.getOption(19);for(let i=0;i<e.length&&t.length<o;i++){const{red:o,green:r,blue:s,alpha:a}=e[i].colorInfo.color,c=new n.EL(Math.round(255*o),Math.round(255*r),Math.round(255*s),a),l=`rgba(${c.r}, ${c.g}, ${c.b}, ${c.a})`,h=this._colorDecorationClassRefs.add(this._ruleFactory.createClassNameRef({backgroundColor:l}));t.push({range:{startLineNumber:e[i].colorInfo.range.startLineNumber,startColumn:e[i].colorInfo.range.startColumn,endLineNumber:e[i].colorInfo.range.endLineNumber,endColumn:e[i].colorInfo.range.endColumn},options:{description:"colorDetector",before:{content:d.ER,inlineClassName:`${h.className} colorpicker-color-decoration`,inlineClassNameAffectsLetterSpacing:!0,attachedData:y}}})}const i=o<e.length&&o;this._decoratorLimitReporter.update(e.length,i),this._colorDecoratorIds.set(t)}removeAllDecorations(){this._editor.removeDecorations(this._decorationsIds),this._decorationsIds=[],this._colorDecoratorIds.clear(),this._colorDecorationClassRefs.clear()}getColorData(e){const t=this._editor.getModel();if(!t)return null;const o=t.getDecorationsInRange(u.E.fromPositions(e,e)).filter((e=>this._colorDatas.has(e.id)));return 0===o.length?null:this._colorDatas.get(o[0].id)}isColorDecoration(e){return this._colorDecoratorIds.has(e)}};w.ID="editor.contrib.colorDetector",w.RECOMPUTE_TIME=1e3,w=v([C(1,_.Ci),C(2,m.w),C(3,p.s)],w);class k{constructor(){this._onDidChange=new s.sl,this._computed=0,this._limited=!1}update(e,t){e===this._computed&&t===this._limited||(this._computed=e,this._limited=t,this._onDidChange.fire())}}(0,h._U)(w.ID,w,1)},94572:function(e,t,o){"use strict";o.d(t,{g1:function(){return T},Em:function(){return B}});var i=o(81564),n=o(31972),r=o(54752),s=o(39048),a=o(90836),c=o(77360),d=o(93840),l=o(50420);class h{get color(){return this._color}set color(e){this._color.equals(e)||(this._color=e,this._onDidChangeColor.fire(e))}get presentation(){return this.colorPresentations[this.presentationIndex]}get colorPresentations(){return this._colorPresentations}set colorPresentations(e){this._colorPresentations=e,this.presentationIndex>e.length-1&&(this.presentationIndex=0),this._onDidChangePresentation.fire(this.presentation)}constructor(e,t,o){this.presentationIndex=o,this._onColorFlushed=new l.sl,this.onColorFlushed=this._onColorFlushed.event,this._onDidChangeColor=new l.sl,this.onDidChangeColor=this._onDidChangeColor.event,this._onDidChangePresentation=new l.sl,this.onDidChangePresentation=this._onDidChangePresentation.event,this.originalColor=e,this._color=e,this._colorPresentations=t}selectNextColorPresentation(){this.presentationIndex=(this.presentationIndex+1)%this.colorPresentations.length,this.flushColor(),this._onDidChangePresentation.fire(this.presentation)}guessColorPresentation(e,t){let o=-1;for(let e=0;e<this.colorPresentations.length;e++)if(t.toLowerCase()===this.colorPresentations[e].label){o=e;break}if(-1===o){const e=t.split("(")[0].toLowerCase();for(let t=0;t<this.colorPresentations.length;t++)if(this.colorPresentations[t].label.toLowerCase().startsWith(e)){o=t;break}}-1!==o&&o!==this.presentationIndex&&(this.presentationIndex=o,this._onDidChangePresentation.fire(this.presentation))}flushColor(){this._onColorFlushed.fire(this._color)}}var u=o(13100),g=o(69040),p=o(48892),m=o(15104),f=o(51708),_=o(80120),v=(o(32004),o(38744)),C=o(76),b=o(23600);const y=g.$;class w extends s.CC{constructor(e,t,o,i=!1){super(),this.model=t,this.showingStandaloneColorPicker=i,this._closeButton=null,this._domNode=y(".colorpicker-header"),g.IR(e,this._domNode),this._pickedColorNode=g.IR(this._domNode,y(".picked-color"));const n=(0,v.uy)("clickToToggleColorOptions","Click to toggle color options (rgb/hsl/hex)");this._pickedColorNode.setAttribute("title",n),this._originalColorNode=g.IR(this._domNode,y(".original-color")),this._originalColorNode.style.backgroundColor=r.gC.Format.CSS.format(this.model.originalColor)||"",this.backgroundColor=o.getColorTheme().getColor(C.M1x)||r.gC.white,this._register(o.onDidColorThemeChange((e=>{this.backgroundColor=e.getColor(C.M1x)||r.gC.white}))),this._register(g.Wq(this._pickedColorNode,g.Wi.CLICK,(()=>this.model.selectNextColorPresentation()))),this._register(g.Wq(this._originalColorNode,g.Wi.CLICK,(()=>{this.model.color=this.model.originalColor,this.model.flushColor()}))),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this._register(t.onDidChangePresentation(this.onDidChangePresentation,this)),this._pickedColorNode.style.backgroundColor=r.gC.Format.CSS.format(t.color)||"",this._pickedColorNode.classList.toggle("light",t.color.rgba.a<.5?this.backgroundColor.isLighter():t.color.isLighter()),this.onDidChangeColor(this.model.color),this.showingStandaloneColorPicker&&(this._domNode.classList.add("standalone-colorpicker"),this._closeButton=this._register(new k(this._domNode)))}get closeButton(){return this._closeButton}get pickedColorNode(){return this._pickedColorNode}get originalColorNode(){return this._originalColorNode}onDidChangeColor(e){this._pickedColorNode.style.backgroundColor=r.gC.Format.CSS.format(e)||"",this._pickedColorNode.classList.toggle("light",e.rgba.a<.5?this.backgroundColor.isLighter():e.isLighter()),this.onDidChangePresentation()}onDidChangePresentation(){this._pickedColorNode.textContent=this.model.presentation?this.model.presentation.label:"",this._pickedColorNode.prepend(y(".codicon.codicon-color-mode"))}}class k extends s.CC{constructor(e){super(),this._onClicked=this._register(new l.sl),this.onClicked=this._onClicked.event,this._button=document.createElement("div"),this._button.classList.add("close-button"),g.IR(e,this._button);const t=document.createElement("div");t.classList.add("close-button-inner-div"),g.IR(this._button,t);g.IR(t,y(".button"+_.g.asCSSSelector((0,b._n)("color-picker-close",f.C.close,(0,v.uy)("closeIcon","Icon to close the color picker"))))).classList.add("close-icon"),this._button.onclick=()=>{this._onClicked.fire()}}}class S extends s.CC{constructor(e,t,o,i=!1){super(),this.model=t,this.pixelRatio=o,this._insertButton=null,this._domNode=y(".colorpicker-body"),g.IR(e,this._domNode),this._saturationBox=new x(this._domNode,this.model,this.pixelRatio),this._register(this._saturationBox),this._register(this._saturationBox.onDidChange(this.onDidSaturationValueChange,this)),this._register(this._saturationBox.onColorFlushed(this.flushColor,this)),this._opacityStrip=new L(this._domNode,this.model,i),this._register(this._opacityStrip),this._register(this._opacityStrip.onDidChange(this.onDidOpacityChange,this)),this._register(this._opacityStrip.onColorFlushed(this.flushColor,this)),this._hueStrip=new P(this._domNode,this.model,i),this._register(this._hueStrip),this._register(this._hueStrip.onDidChange(this.onDidHueChange,this)),this._register(this._hueStrip.onColorFlushed(this.flushColor,this)),i&&(this._insertButton=this._register(new D(this._domNode)),this._domNode.classList.add("standalone-colorpicker"))}flushColor(){this.model.flushColor()}onDidSaturationValueChange({s:e,v:t}){const o=this.model.color.hsva;this.model.color=new r.gC(new r.cx(o.h,e,t,o.a))}onDidOpacityChange(e){const t=this.model.color.hsva;this.model.color=new r.gC(new r.cx(t.h,t.s,t.v,e))}onDidHueChange(e){const t=this.model.color.hsva,o=360*(1-e);this.model.color=new r.gC(new r.cx(360===o?0:o,t.s,t.v,t.a))}get domNode(){return this._domNode}get saturationBox(){return this._saturationBox}get enterButton(){return this._insertButton}layout(){this._saturationBox.layout(),this._opacityStrip.layout(),this._hueStrip.layout()}}class x extends s.CC{constructor(e,t,o){super(),this.model=t,this.pixelRatio=o,this._onDidChange=new l.sl,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new l.sl,this.onColorFlushed=this._onColorFlushed.event,this._domNode=y(".saturation-wrap"),g.IR(e,this._domNode),this._canvas=document.createElement("canvas"),this._canvas.className="saturation-box",g.IR(this._domNode,this._canvas),this.selection=y(".saturation-selection"),g.IR(this._domNode,this.selection),this.layout(),this._register(g.Wq(this._domNode,g.Wi.POINTER_DOWN,(e=>this.onPointerDown(e)))),this._register(this.model.onDidChangeColor(this.onDidChangeColor,this)),this.monitor=null}get domNode(){return this._domNode}onPointerDown(e){if(!(e.target&&e.target instanceof Element))return;this.monitor=this._register(new p.k);const t=g.HT(this._domNode);e.target!==this.selection&&this.onDidChangePosition(e.offsetX,e.offsetY),this.monitor.startMonitoring(e.target,e.pointerId,e.buttons,(e=>this.onDidChangePosition(e.pageX-t.left,e.pageY-t.top)),(()=>null));const o=g.Wq(document,g.Wi.POINTER_UP,(()=>{this._onColorFlushed.fire(),o.dispose(),this.monitor&&(this.monitor.stopMonitoring(!0),this.monitor=null)}),!0)}onDidChangePosition(e,t){const o=Math.max(0,Math.min(1,e/this.width)),i=Math.max(0,Math.min(1,1-t/this.height));this.paintSelection(o,i),this._onDidChange.fire({s:o,v:i})}layout(){this.width=this._domNode.offsetWidth,this.height=this._domNode.offsetHeight,this._canvas.width=this.width*this.pixelRatio,this._canvas.height=this.height*this.pixelRatio,this.paint();const e=this.model.color.hsva;this.paintSelection(e.s,e.v)}paint(){const e=this.model.color.hsva,t=new r.gC(new r.cx(e.h,1,1,1)),o=this._canvas.getContext("2d"),i=o.createLinearGradient(0,0,this._canvas.width,0);i.addColorStop(0,"rgba(255, 255, 255, 1)"),i.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),i.addColorStop(1,"rgba(255, 255, 255, 0)");const n=o.createLinearGradient(0,0,0,this._canvas.height);n.addColorStop(0,"rgba(0, 0, 0, 0)"),n.addColorStop(1,"rgba(0, 0, 0, 1)"),o.rect(0,0,this._canvas.width,this._canvas.height),o.fillStyle=r.gC.Format.CSS.format(t),o.fill(),o.fillStyle=i,o.fill(),o.fillStyle=n,o.fill()}paintSelection(e,t){this.selection.style.left=e*this.width+"px",this.selection.style.top=this.height-t*this.height+"px"}onDidChangeColor(){this.monitor&&this.monitor.isMonitoring()||this.paint()}}class A extends s.CC{constructor(e,t,o=!1){super(),this.model=t,this._onDidChange=new l.sl,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new l.sl,this.onColorFlushed=this._onColorFlushed.event,o?(this.domNode=g.IR(e,y(".standalone-strip")),this.overlay=g.IR(this.domNode,y(".standalone-overlay"))):(this.domNode=g.IR(e,y(".strip")),this.overlay=g.IR(this.domNode,y(".overlay"))),this.slider=g.IR(this.domNode,y(".slider")),this.slider.style.top="0px",this._register(g.Wq(this.domNode,g.Wi.POINTER_DOWN,(e=>this.onPointerDown(e)))),this.layout()}layout(){this.height=this.domNode.offsetHeight-this.slider.offsetHeight;const e=this.getValue(this.model.color);this.updateSliderPosition(e)}onPointerDown(e){if(!(e.target&&e.target instanceof Element))return;const t=this._register(new p.k),o=g.HT(this.domNode);this.domNode.classList.add("grabbing"),e.target!==this.slider&&this.onDidChangeTop(e.offsetY),t.startMonitoring(e.target,e.pointerId,e.buttons,(e=>this.onDidChangeTop(e.pageY-o.top)),(()=>null));const i=g.Wq(document,g.Wi.POINTER_UP,(()=>{this._onColorFlushed.fire(),i.dispose(),t.stopMonitoring(!0),this.domNode.classList.remove("grabbing")}),!0)}onDidChangeTop(e){const t=Math.max(0,Math.min(1,1-e/this.height));this.updateSliderPosition(t),this._onDidChange.fire(t)}updateSliderPosition(e){this.slider.style.top=(1-e)*this.height+"px"}}class L extends A{constructor(e,t,o=!1){super(e,t,o),this.domNode.classList.add("opacity-strip"),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this.onDidChangeColor(this.model.color)}onDidChangeColor(e){const{r:t,g:o,b:i}=e.rgba,n=new r.gC(new r.EL(t,o,i,1)),s=new r.gC(new r.EL(t,o,i,0));this.overlay.style.background=`linear-gradient(to bottom, ${n} 0%, ${s} 100%)`}getValue(e){return e.hsva.a}}class P extends A{constructor(e,t,o=!1){super(e,t,o),this.domNode.classList.add("hue-strip")}getValue(e){return 1-e.hsva.h/360}}class D extends s.CC{constructor(e){super(),this._onClicked=this._register(new l.sl),this.onClicked=this._onClicked.event,this._button=g.IR(e,document.createElement("button")),this._button.classList.add("insert-button"),this._button.textContent="Insert",this._button.onclick=e=>{this._onClicked.fire()}}get button(){return this._button}}class I extends m.M{constructor(e,t,o,i,n=!1){super(),this.model=t,this.pixelRatio=o,this._register(u.PixelRatio.onDidChange((()=>this.layout())));const r=y(".colorpicker-widget");e.appendChild(r),this.header=this._register(new w(r,this.model,i,n)),this.body=this._register(new S(r,this.model,this.pixelRatio,n))}layout(){this.body.layout()}}var M=o(68992),E=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},N=function(e,t){return function(o,i){t(o,i,e)}},O=function(e,t,o,i){return new(o||(o=Promise))((function(n,r){function s(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class R{constructor(e,t,o,i){this.owner=e,this.range=t,this.model=o,this.provider=i,this.forceShowAtRange=!0}isValidForHoverAnchor(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let T=class{constructor(e,t){this._editor=e,this._themeService=t,this.hoverOrdinal=2}computeSync(e,t){return[]}computeAsync(e,t,o){return i.qq.fromPromise(this._computeAsync(e,t,o))}_computeAsync(e,t,o){return O(this,void 0,void 0,(function*(){if(!this._editor.hasModel())return[];const e=d.Qj.get(this._editor);if(!e)return[];for(const o of t){if(!e.isColorDecoration(o))continue;const t=e.getColorData(o.range.getStartPosition());if(t){return[yield W(this,this._editor.getModel(),t.colorInfo,t.provider)]}}return[]}))}renderHoverParts(e,t){return U(this,this._editor,this._themeService,t,e)}};T=E([N(1,M.q0)],T);class F{constructor(e,t,o,i){this.owner=e,this.range=t,this.model=o,this.provider=i}}let B=class{constructor(e,t){this._editor=e,this._themeService=t,this._color=null}createColorHover(e,t,o){return O(this,void 0,void 0,(function*(){if(!this._editor.hasModel())return null;if(!d.Qj.get(this._editor))return null;const i=yield(0,c.O)(o,this._editor.getModel(),n.I.None);let r=null,s=null;for(const t of i){const o=t.colorInfo;a.E.containsRange(o.range,e.range)&&(r=o,s=t.provider)}const l=null!=r?r:e,h=null!=s?s:t,u=!!r;return{colorHover:yield W(this,this._editor.getModel(),l,h),foundInEditor:u}}))}updateEditorModel(e){return O(this,void 0,void 0,(function*(){if(!this._editor.hasModel())return;const t=e.model;let o=new a.E(e.range.startLineNumber,e.range.startColumn,e.range.endLineNumber,e.range.endColumn);this._color&&(yield H(this._editor.getModel(),t,this._color,o,e),o=V(this._editor,o,t))}))}renderHoverParts(e,t){return U(this,this._editor,this._themeService,t,e)}set color(e){this._color=e}get color(){return this._color}};function W(e,t,o,i){return O(this,void 0,void 0,(function*(){const s=t.getValueInRange(o.range),{red:d,green:l,blue:u,alpha:g}=o.color,p=new r.EL(Math.round(255*d),Math.round(255*l),Math.round(255*u),g),m=new r.gC(p),f=yield(0,c.A)(t,o,i,n.I.None),_=new h(m,[],0);return _.colorPresentations=f||[],_.guessColorPresentation(m,s),e instanceof T?new R(e,a.E.lift(o.range),_,i):new F(e,a.E.lift(o.range),_,i)}))}function U(e,t,o,i,n){if(0===i.length||!t.hasModel())return s.CC.None;const r=new s.Y1,c=i[0],d=t.getModel(),l=c.model,h=r.add(new I(n.fragment,l,t.getOption(137),o,e instanceof B));n.setColorPicker(h);let u=new a.E(c.range.startLineNumber,c.range.startColumn,c.range.endLineNumber,c.range.endColumn);if(e instanceof B){const t=i[0].model.color;e.color=t,H(d,l,t,u,c),r.add(l.onColorFlushed((t=>{e.color=t})))}else r.add(l.onColorFlushed((e=>O(this,void 0,void 0,(function*(){yield H(d,l,e,u,c),u=V(t,u,l,n)})))));return r.add(l.onDidChangeColor((e=>{H(d,l,e,u,c)}))),r}function V(e,t,o,i){let n,r;if(o.presentation.textEdit){n=[o.presentation.textEdit],r=new a.E(o.presentation.textEdit.range.startLineNumber,o.presentation.textEdit.range.startColumn,o.presentation.textEdit.range.endLineNumber,o.presentation.textEdit.range.endColumn);const t=e.getModel()._setTrackedRange(null,r,3);e.pushUndoStop(),e.executeEdits("colorpicker",n),r=e.getModel()._getTrackedRange(t)||r}else n=[{range:t,text:o.presentation.label,forceMoveMarkers:!1}],r=t.setEndPosition(t.endLineNumber,t.startColumn+o.presentation.label.length),e.pushUndoStop(),e.executeEdits("colorpicker",n);return o.presentation.additionalTextEdits&&(n=[...o.presentation.additionalTextEdits],e.executeEdits("colorpicker",n),i&&i.hide()),e.pushUndoStop(),r}function H(e,t,o,i,r){return O(this,void 0,void 0,(function*(){const s=yield(0,c.A)(e,{range:i,color:{red:o.rgba.r/255,green:o.rgba.g/255,blue:o.rgba.b/255,alpha:o.rgba.a}},r.provider,n.I.None);t.colorPresentations=s||[]}))}B=E([N(1,M.q0)],B)},45184:function(e,t,o){"use strict";o.d(t,{M:function(){return g}});var i=o(54752),n=o(33412),r=o(54780),s=o(71456),a=o(39048),c=o(42792),d=o(68468),l=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},h=function(e,t){return function(o,i){t(o,i,e)}},u=function(e,t,o,i){return new(o||(o=Promise))((function(n,r){function s(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class g{constructor(e,t){this._editorWorkerClient=new n.Wn(e,!1,"editorWorkerService",t)}provideDocumentColors(e,t){return u(this,void 0,void 0,(function*(){return this._editorWorkerClient.computeDefaultDocumentColors(e.uri)}))}provideColorPresentations(e,t,o){const n=t.range,r=t.color,s=r.alpha,a=new i.gC(new i.EL(Math.round(255*r.red),Math.round(255*r.green),Math.round(255*r.blue),s)),c=s?i.gC.Format.CSS.formatRGB(a):i.gC.Format.CSS.formatRGBA(a),d=s?i.gC.Format.CSS.formatHSL(a):i.gC.Format.CSS.formatHSLA(a),l=s?i.gC.Format.CSS.formatHex(a):i.gC.Format.CSS.formatHexA(a),h=[];return h.push({label:c,textEdit:{range:n,text:c}}),h.push({label:d,textEdit:{range:n,text:d}}),h.push({label:l,textEdit:{range:n,text:l}}),h}}let p=class extends a.CC{constructor(e,t,o){super(),this._register(o.colorProvider.register("*",new g(e,t)))}};p=l([h(0,r.o),h(1,s.Gw),h(2,c.w)],p),(0,d.e)(p)},28232:function(e,t,o){"use strict";var i=o(27440),n=o(38744),r=o(39048),s=o(94572),a=o(34572),c=o(78556),d=o(26272),l=o(50420),h=o(42792),u=o(25900),g=o(93636),p=o(54780),m=o(71456),f=o(45184),_=o(69040),v=(o(32004),function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s}),C=function(e,t){return function(o,i){t(o,i,e)}},b=function(e,t,o,i){return new(o||(o=Promise))((function(n,r){function s(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};let y=class e extends r.CC{constructor(e,t,o,i,n,r,s){super(),this._editor=e,this._modelService=o,this._keybindingService=i,this._instantiationService=n,this._languageFeatureService=r,this._languageConfigurationService=s,this._standaloneColorPickerWidget=null,this._standaloneColorPickerVisible=u.y.standaloneColorPickerVisible.bindTo(t),this._standaloneColorPickerFocused=u.y.standaloneColorPickerFocused.bindTo(t)}showOrFocus(){var e;this._editor.hasModel()&&(this._standaloneColorPickerVisible.get()?this._standaloneColorPickerFocused.get()||null===(e=this._standaloneColorPickerWidget)||void 0===e||e.focus():this._standaloneColorPickerWidget=new w(this._editor,this._standaloneColorPickerVisible,this._standaloneColorPickerFocused,this._instantiationService,this._modelService,this._keybindingService,this._languageFeatureService,this._languageConfigurationService))}hide(){var e;this._standaloneColorPickerFocused.set(!1),this._standaloneColorPickerVisible.set(!1),null===(e=this._standaloneColorPickerWidget)||void 0===e||e.hide(),this._editor.focus()}insertColor(){var e;null===(e=this._standaloneColorPickerWidget)||void 0===e||e.updateEditor(),this.hide()}static get(t){return t.getContribution(e.ID)}};y.ID="editor.contrib.standaloneColorPickerController",y=v([C(1,g.KK),C(2,p.o),C(3,d.M),C(4,a.U9),C(5,h.w),C(6,m.Gw)],y),(0,i._U)(y.ID,y,1);let w=class e extends r.CC{constructor(e,t,o,i,n,r,a,c){var d;super(),this._editor=e,this._standaloneColorPickerVisible=t,this._standaloneColorPickerFocused=o,this._modelService=n,this._keybindingService=r,this._languageFeaturesService=a,this._languageConfigurationService=c,this.body=document.createElement("div"),this._position=void 0,this._colorHover=null,this._selectionSetInEditor=!1,this._onResult=this._register(new l.sl),this.onResult=this._onResult.event,this._standaloneColorPickerVisible.set(!0),this._standaloneColorPickerParticipant=i.createInstance(s.Em,this._editor),this._position=null===(d=this._editor._getViewModel())||void 0===d?void 0:d.getPrimaryCursorState().viewState.position;const h=this._editor.getSelection(),u=h?{startLineNumber:h.startLineNumber,startColumn:h.startColumn,endLineNumber:h.endLineNumber,endColumn:h.endColumn}:{startLineNumber:0,endLineNumber:0,endColumn:0,startColumn:0},g=this._register(_.UF(this.body));this._register(g.onDidBlur((e=>{this.hide()}))),this._register(g.onDidFocus((e=>{this.focus()}))),this._register(this._editor.onDidChangeCursorPosition((()=>{this._selectionSetInEditor?this._selectionSetInEditor=!1:this.hide()}))),this._register(this._editor.onMouseMove((e=>{var t;const o=null===(t=e.target.element)||void 0===t?void 0:t.classList;o&&o.contains("colorpicker-color-decoration")&&this.hide()}))),this._register(this.onResult((e=>{this._render(e.value,e.foundInEditor)}))),this._start(u),this._editor.addContentWidget(this)}updateEditor(){this._colorHover&&this._standaloneColorPickerParticipant.updateEditorModel(this._colorHover)}getId(){return e.ID}getDomNode(){return this.body}getPosition(){if(!this._position)return null;const e=this._editor.getOption(58).above;return{position:this._position,secondaryPosition:this._position,preference:e?[1,2]:[2,1],positionAffinity:2}}hide(){this.dispose(),this._standaloneColorPickerVisible.set(!1),this._standaloneColorPickerFocused.set(!1),this._editor.removeContentWidget(this),this._editor.focus()}focus(){this._standaloneColorPickerFocused.set(!0),this.body.focus()}_start(e){return b(this,void 0,void 0,(function*(){const t=yield this._computeAsync(e);t&&this._onResult.fire(new k(t.result,t.foundInEditor))}))}_computeAsync(e){return b(this,void 0,void 0,(function*(){if(!this._editor.hasModel())return null;const t={range:e,color:{red:0,green:0,blue:0,alpha:1}},o=yield this._standaloneColorPickerParticipant.createColorHover(t,new f.M(this._modelService,this._languageConfigurationService),this._languageFeaturesService.colorProvider);return o?{result:o.colorHover,foundInEditor:o.foundInEditor}:null}))}_render(e,t){const o=document.createDocumentFragment();let i;const n={fragment:o,statusBar:this._register(new c.aq(this._keybindingService)),setColorPicker:e=>i=e,onContentsChanged:()=>{},hide:()=>this.hide()};if(this._colorHover=e,this._register(this._standaloneColorPickerParticipant.renderHoverParts(n,[e])),void 0===i)return;this.body.classList.add("standalone-colorpicker-body"),this.body.style.maxHeight=Math.max(this._editor.getLayoutInfo().height/4,250)+"px",this.body.style.maxWidth=Math.max(.66*this._editor.getLayoutInfo().width,500)+"px",this.body.tabIndex=0,this.body.appendChild(o),i.layout();const r=i.body,s=r.saturationBox.domNode.clientWidth,a=r.domNode.clientWidth-s-22-8,d=i.body.enterButton;null==d||d.onClicked((()=>{this.updateEditor(),this.hide()}));const l=i.header;l.pickedColorNode.style.width=s+8+"px";l.originalColorNode.style.width=a+"px";const h=i.header.closeButton;null==h||h.onClicked((()=>{this.hide()})),t&&(d&&(d.button.textContent="Replace"),this._selectionSetInEditor=!0,this._editor.setSelection(e.range)),this._editor.layoutContentWidget(this)}};w.ID="editor.contrib.standaloneColorPickerWidget",w=v([C(3,a.U9),C(4,p.o),C(5,d.M),C(6,h.w),C(7,m.Gw)],w);class k{constructor(e,t){this.value=e,this.foundInEditor=t}}var S=o(39548);class x extends i.CA{constructor(){super({id:"editor.action.showOrFocusStandaloneColorPicker",title:{value:(0,n.uy)("showOrFocusStandaloneColorPicker","Show or Focus Standalone Color Picker"),mnemonicTitle:(0,n.uy)({key:"mishowOrFocusStandaloneColorPicker",comment:["&& denotes a mnemonic"]},"&&Show or Focus Standalone Color Picker"),original:"Show or Focus Standalone Color Picker"},precondition:void 0,menu:[{id:S.e.CommandPalette}]})}runEditorCommand(e,t){var o;null===(o=y.get(t))||void 0===o||o.showOrFocus()}}class A extends i.ay{constructor(){super({id:"editor.action.hideColorPicker",label:(0,n.uy)({key:"hideColorPicker",comment:["Action that hides the color picker"]},"Hide the Color Picker"),alias:"Hide the Color Picker",precondition:u.y.standaloneColorPickerVisible.isEqualTo(!0),kbOpts:{primary:9,weight:100}})}run(e,t){var o;null===(o=y.get(t))||void 0===o||o.hide()}}class L extends i.ay{constructor(){super({id:"editor.action.insertColorWithStandaloneColorPicker",label:(0,n.uy)({key:"insertColorWithStandaloneColorPicker",comment:["Action that inserts color with standalone color picker"]},"Insert Color with Standalone Color Picker"),alias:"Insert Color with Standalone Color Picker",precondition:u.y.standaloneColorPickerFocused.isEqualTo(!0),kbOpts:{primary:3,weight:100}})}run(e,t){var o;null===(o=y.get(t))||void 0===o||o.insertColor()}}(0,i.K_)(A),(0,i.K_)(L),(0,S.oN)(x)},6048:function(e,t,o){"use strict";var i=o(84140),n=o(27440),r=o(90836),s=o(25900),a=o(71456),c=o(49356),d=o(4400),l=o(95664);class h{constructor(e,t,o){this.languageConfigurationService=o,this._selection=e,this._insertSpace=t,this._usedEndToken=null}static _haystackHasNeedleAtOffset(e,t,o){if(o<0)return!1;const i=t.length;if(o+i>e.length)return!1;for(let n=0;n<i;n++){const i=e.charCodeAt(o+n),r=t.charCodeAt(n);if(i!==r&&!(i>=65&&i<=90&&i+32===r||r>=65&&r<=90&&r+32===i))return!1}return!0}_createOperationsForBlockComment(e,t,o,i,n,s){const a=e.startLineNumber,c=e.startColumn,d=e.endLineNumber,l=e.endColumn,u=n.getLineContent(a),g=n.getLineContent(d);let p,m=u.lastIndexOf(t,c-1+t.length),f=g.indexOf(o,l-1-o.length);if(-1!==m&&-1!==f)if(a===d){u.substring(m+t.length,f).indexOf(o)>=0&&(m=-1,f=-1)}else{const e=u.substring(m+t.length),i=g.substring(0,f);(e.indexOf(o)>=0||i.indexOf(o)>=0)&&(m=-1,f=-1)}-1!==m&&-1!==f?(i&&m+t.length<u.length&&32===u.charCodeAt(m+t.length)&&(t+=" "),i&&f>0&&32===g.charCodeAt(f-1)&&(o=" "+o,f-=1),p=h._createRemoveBlockCommentOperations(new r.E(a,m+t.length+1,d,f+1),t,o)):(p=h._createAddBlockCommentOperations(e,t,o,this._insertSpace),this._usedEndToken=1===p.length?o:null);for(const e of p)s.addTrackedEditOperation(e.range,e.text)}static _createRemoveBlockCommentOperations(e,t,o){const i=[];return r.E.isEmpty(e)?i.push(c.e.delete(new r.E(e.startLineNumber,e.startColumn-t.length,e.endLineNumber,e.endColumn+o.length))):(i.push(c.e.delete(new r.E(e.startLineNumber,e.startColumn-t.length,e.startLineNumber,e.startColumn))),i.push(c.e.delete(new r.E(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn+o.length)))),i}static _createAddBlockCommentOperations(e,t,o,i){const n=[];return r.E.isEmpty(e)?n.push(c.e.replace(new r.E(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),t+"  "+o)):(n.push(c.e.insert(new d.J(e.startLineNumber,e.startColumn),t+(i?" ":""))),n.push(c.e.insert(new d.J(e.endLineNumber,e.endColumn),(i?" ":"")+o))),n}getEditOperations(e,t){const o=this._selection.startLineNumber,i=this._selection.startColumn;e.tokenization.tokenizeIfCheap(o);const n=e.getLanguageIdAtPosition(o,i),r=this.languageConfigurationService.getLanguageConfiguration(n).comments;r&&r.blockCommentStartToken&&r.blockCommentEndToken&&this._createOperationsForBlockComment(this._selection,r.blockCommentStartToken,r.blockCommentEndToken,this._insertSpace,e,t)}computeCursorState(e,t){const o=t.getInverseEditOperations();if(2===o.length){const e=o[0],t=o[1];return new l.G(e.range.endLineNumber,e.range.endColumn,t.range.startLineNumber,t.range.startColumn)}{const e=o[0].range,t=this._usedEndToken?-this._usedEndToken.length-1:0;return new l.G(e.endLineNumber,e.endColumn+t,e.endLineNumber,e.endColumn+t)}}}var u=o(2443);class g{constructor(e,t,o,i,n,r,s){this.languageConfigurationService=e,this._selection=t,this._tabSize=o,this._type=i,this._insertSpace=n,this._selectionId=null,this._deltaColumn=0,this._moveEndPositionDown=!1,this._ignoreEmptyLines=r,this._ignoreFirstLine=s||!1}static _gatherPreflightCommentStrings(e,t,o,i){e.tokenization.tokenizeIfCheap(t);const n=e.getLanguageIdAtPosition(t,1),r=i.getLanguageConfiguration(n).comments,s=r?r.lineCommentToken:null;if(!s)return null;const a=[];for(let e=0,i=o-t+1;e<i;e++)a[e]={ignore:!1,commentStr:s,commentStrOffset:0,commentStrLength:s.length};return a}static _analyzeLines(e,t,o,i,n,r,s,a){let c,d=!0;c=0===e||1!==e;for(let a=0,l=i.length;a<l;a++){const l=i[a],g=n+a;if(g===n&&s){l.ignore=!0;continue}const p=o.getLineContent(g),m=u.cX(p);if(-1!==m){if(d=!1,l.ignore=!1,l.commentStrOffset=m,c&&!h._haystackHasNeedleAtOffset(p,l.commentStr,m)&&(0===e?c=!1:1===e||(l.ignore=!0)),c&&t){const e=m+l.commentStrLength;e<p.length&&32===p.charCodeAt(e)&&(l.commentStrLength+=1)}}else l.ignore=r,l.commentStrOffset=p.length}if(0===e&&d){c=!1;for(let e=0,t=i.length;e<t;e++)i[e].ignore=!1}return{supported:!0,shouldRemoveComments:c,lines:i}}static _gatherPreflightData(e,t,o,i,n,r,s,a){const c=g._gatherPreflightCommentStrings(o,i,n,a);return null===c?{supported:!1}:g._analyzeLines(e,t,o,c,i,r,s,a)}_executeLineComments(e,t,o,i){let n;o.shouldRemoveComments?n=g._createRemoveLineCommentsOperations(o.lines,i.startLineNumber):(g._normalizeInsertionPoint(e,o.lines,i.startLineNumber,this._tabSize),n=this._createAddLineCommentsOperations(o.lines,i.startLineNumber));const s=new d.J(i.positionLineNumber,i.positionColumn);for(let o=0,i=n.length;o<i;o++)if(t.addEditOperation(n[o].range,n[o].text),r.E.isEmpty(n[o].range)&&r.E.getStartPosition(n[o].range).equals(s)){e.getLineContent(s.lineNumber).length+1===s.column&&(this._deltaColumn=(n[o].text||"").length)}this._selectionId=t.trackSelection(i)}_attemptRemoveBlockComment(e,t,o,i){let n=t.startLineNumber,s=t.endLineNumber;const a=i.length+Math.max(e.getLineFirstNonWhitespaceColumn(t.startLineNumber),t.startColumn);let c=e.getLineContent(n).lastIndexOf(o,a-1),d=e.getLineContent(s).indexOf(i,t.endColumn-1-o.length);return-1!==c&&-1===d&&(d=e.getLineContent(n).indexOf(i,c+o.length),s=n),-1===c&&-1!==d&&(c=e.getLineContent(s).lastIndexOf(o,d),n=s),!t.isEmpty()||-1!==c&&-1!==d||(c=e.getLineContent(n).indexOf(o),-1!==c&&(d=e.getLineContent(n).indexOf(i,c+o.length))),-1!==c&&32===e.getLineContent(n).charCodeAt(c+o.length)&&(o+=" "),-1!==d&&32===e.getLineContent(s).charCodeAt(d-1)&&(i=" "+i,d-=1),-1!==c&&-1!==d?h._createRemoveBlockCommentOperations(new r.E(n,c+o.length+1,s,d+1),o,i):null}_executeBlockComment(e,t,o){e.tokenization.tokenizeIfCheap(o.startLineNumber);const i=e.getLanguageIdAtPosition(o.startLineNumber,1),n=this.languageConfigurationService.getLanguageConfiguration(i).comments;if(!n||!n.blockCommentStartToken||!n.blockCommentEndToken)return;const s=n.blockCommentStartToken,a=n.blockCommentEndToken;let c=this._attemptRemoveBlockComment(e,o,s,a);if(!c){if(o.isEmpty()){const t=e.getLineContent(o.startLineNumber);let i=u.cX(t);-1===i&&(i=t.length),c=h._createAddBlockCommentOperations(new r.E(o.startLineNumber,i+1,o.startLineNumber,t.length+1),s,a,this._insertSpace)}else c=h._createAddBlockCommentOperations(new r.E(o.startLineNumber,e.getLineFirstNonWhitespaceColumn(o.startLineNumber),o.endLineNumber,e.getLineMaxColumn(o.endLineNumber)),s,a,this._insertSpace);1===c.length&&(this._deltaColumn=s.length+1)}this._selectionId=t.trackSelection(o);for(const e of c)t.addEditOperation(e.range,e.text)}getEditOperations(e,t){let o=this._selection;if(this._moveEndPositionDown=!1,o.startLineNumber===o.endLineNumber&&this._ignoreFirstLine)return t.addEditOperation(new r.E(o.startLineNumber,e.getLineMaxColumn(o.startLineNumber),o.startLineNumber+1,1),o.startLineNumber===e.getLineCount()?"":"\n"),void(this._selectionId=t.trackSelection(o));o.startLineNumber<o.endLineNumber&&1===o.endColumn&&(this._moveEndPositionDown=!0,o=o.setEndPosition(o.endLineNumber-1,e.getLineMaxColumn(o.endLineNumber-1)));const i=g._gatherPreflightData(this._type,this._insertSpace,e,o.startLineNumber,o.endLineNumber,this._ignoreEmptyLines,this._ignoreFirstLine,this.languageConfigurationService);return i.supported?this._executeLineComments(e,t,i,o):this._executeBlockComment(e,t,o)}computeCursorState(e,t){let o=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(o=o.setEndPosition(o.endLineNumber+1,1)),new l.G(o.selectionStartLineNumber,o.selectionStartColumn+this._deltaColumn,o.positionLineNumber,o.positionColumn+this._deltaColumn)}static _createRemoveLineCommentsOperations(e,t){const o=[];for(let i=0,n=e.length;i<n;i++){const n=e[i];n.ignore||o.push(c.e.delete(new r.E(t+i,n.commentStrOffset+1,t+i,n.commentStrOffset+n.commentStrLength+1)))}return o}_createAddLineCommentsOperations(e,t){const o=[],i=this._insertSpace?" ":"";for(let n=0,r=e.length;n<r;n++){const r=e[n];r.ignore||o.push(c.e.insert(new d.J(t+n,r.commentStrOffset+1),r.commentStr+i))}return o}static nextVisibleColumn(e,t,o,i){return o?e+(t-e%t):e+i}static _normalizeInsertionPoint(e,t,o,i){let n,r,s=1073741824;for(let n=0,r=t.length;n<r;n++){if(t[n].ignore)continue;const r=e.getLineContent(o+n);let a=0;for(let e=0,o=t[n].commentStrOffset;a<s&&e<o;e++)a=g.nextVisibleColumn(a,i,9===r.charCodeAt(e),1);a<s&&(s=a)}s=Math.floor(s/i)*i;for(let a=0,c=t.length;a<c;a++){if(t[a].ignore)continue;const c=e.getLineContent(o+a);let d=0;for(n=0,r=t[a].commentStrOffset;d<s&&n<r;n++)d=g.nextVisibleColumn(d,i,9===c.charCodeAt(n),1);t[a].commentStrOffset=d>s?n-1:n}}}var p=o(38744),m=o(39548);class f extends n.ay{constructor(e,t){super(t),this._type=e}run(e,t){const o=e.get(a.Gw);if(!t.hasModel())return;const i=[],n=t.getModel().getOptions(),s=t.getOption(21),c=t.getSelections().map(((e,t)=>({selection:e,index:t,ignoreFirstLine:!1})));c.sort(((e,t)=>r.E.compareRangesUsingStarts(e.selection,t.selection)));let d=c[0];for(let e=1;e<c.length;e++){const t=c[e];d.selection.endLineNumber===t.selection.startLineNumber&&(d.index<t.index?t.ignoreFirstLine=!0:(d.ignoreFirstLine=!0,d=t))}for(const e of c)i.push(new g(o,e.selection,n.tabSize,this._type,s.insertSpace,s.ignoreEmptyLines,e.ignoreFirstLine));t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}}class _ extends n.ay{constructor(){super({id:"editor.action.blockComment",label:p.uy("comment.block","Toggle Block Comment"),alias:"Toggle Block Comment",precondition:s.y.writable,kbOpts:{kbExpr:s.y.editorTextFocus,primary:1567,linux:{primary:3103},weight:100},menuOpts:{menuId:m.e.MenubarEditMenu,group:"5_insert",title:p.uy({key:"miToggleBlockComment",comment:["&& denotes a mnemonic"]},"Toggle &&Block Comment"),order:2}})}run(e,t){const o=e.get(a.Gw);if(!t.hasModel())return;const i=t.getOption(21),n=[],r=t.getSelections();for(const e of r)n.push(new h(e,i.insertSpace,o));t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}}(0,n.K_)(class extends f{constructor(){super(0,{id:"editor.action.commentLine",label:p.uy("comment.line","Toggle Line Comment"),alias:"Toggle Line Comment",precondition:s.y.writable,kbOpts:{kbExpr:s.y.editorTextFocus,primary:2138,weight:100},menuOpts:{menuId:m.e.MenubarEditMenu,group:"5_insert",title:p.uy({key:"miToggleLineComment",comment:["&& denotes a mnemonic"]},"&&Toggle Line Comment"),order:1}})}}),(0,n.K_)(class extends f{constructor(){super(1,{id:"editor.action.addCommentLine",label:p.uy("comment.line.add","Add Line Comment"),alias:"Add Line Comment",precondition:s.y.writable,kbOpts:{kbExpr:s.y.editorTextFocus,primary:(0,i.uS)(2089,2081),weight:100}})}}),(0,n.K_)(class extends f{constructor(){super(2,{id:"editor.action.removeCommentLine",label:p.uy("comment.line.remove","Remove Line Comment"),alias:"Remove Line Comment",precondition:s.y.writable,kbOpts:{kbExpr:s.y.editorTextFocus,primary:(0,i.uS)(2089,2099),weight:100}})}}),(0,n.K_)(_)},25913:function(e,t,o){"use strict";var i=o(69040),n=o(88408),r=o(43236),s=o(39048),a=o(58776),c=o(27440),d=o(25900),l=o(38744),h=o(39548),u=o(93636),g=o(72716),p=o(26272),m=o(91188),f=o(94632),_=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},v=function(e,t){return function(o,i){t(o,i,e)}};let C=class e{static get(t){return t.getContribution(e.ID)}constructor(e,t,o,n,r,a,c,d){this._contextMenuService=t,this._contextViewService=o,this._contextKeyService=n,this._keybindingService=r,this._menuService=a,this._configurationService=c,this._workspaceContextService=d,this._toDispose=new s.Y1,this._contextMenuIsBeingShownCount=0,this._editor=e,this._toDispose.add(this._editor.onContextMenu((e=>this._onContextMenu(e)))),this._toDispose.add(this._editor.onMouseWheel((e=>{if(this._contextMenuIsBeingShownCount>0){const t=this._contextViewService.getContextViewElement(),o=e.srcElement;o.shadowRoot&&i.CG(t)===o.shadowRoot||this._contextViewService.hideContextView()}}))),this._toDispose.add(this._editor.onKeyDown((e=>{this._editor.getOption(22)&&58===e.keyCode&&(e.preventDefault(),e.stopPropagation(),this.showContextMenu())})))}_onContextMenu(e){if(!this._editor.hasModel())return;if(!this._editor.getOption(22))return this._editor.focus(),void(e.target.position&&!this._editor.getSelection().containsPosition(e.target.position)&&this._editor.setPosition(e.target.position));if(12===e.target.type)return;if(6===e.target.type&&e.target.detail.injectedText)return;if(e.event.preventDefault(),e.event.stopPropagation(),11===e.target.type)return this._showScrollbarContextMenu({x:e.event.posx-1,width:2,y:e.event.posy-1,height:2});if(6!==e.target.type&&7!==e.target.type&&1!==e.target.type)return;if(this._editor.focus(),e.target.position){let t=!1;for(const o of this._editor.getSelections())if(o.containsPosition(e.target.position)){t=!0;break}t||this._editor.setPosition(e.target.position)}let t=null;1!==e.target.type&&(t={x:e.event.posx-1,width:2,y:e.event.posy-1,height:2}),this.showContextMenu(t)}showContextMenu(e){if(!this._editor.getOption(22))return;if(!this._editor.hasModel())return;const t=this._getMenuActions(this._editor.getModel(),this._editor.isSimpleWidget?h.e.SimpleEditorContext:h.e.EditorContext);t.length>0&&this._doShowContextMenu(t,e)}_getMenuActions(e,t){const o=[],i=this._menuService.createMenu(t,this._contextKeyService),n=i.getActions({arg:e.uri});i.dispose();for(const t of n){const[,i]=t;let n=0;for(const t of i)if(t instanceof h.kg){const i=this._getMenuActions(e,t.item.submenu);i.length>0&&(o.push(new r.OW(t.id,t.label,i)),n++)}else o.push(t),n++;n&&o.push(new r.UL)}return o.length&&o.pop(),o}_doShowContextMenu(e,t=null){if(!this._editor.hasModel())return;const o=this._editor.getOption(58);if(this._editor.updateOptions({hover:{enabled:!1}}),!t){this._editor.revealPosition(this._editor.getPosition(),1),this._editor.render();const e=this._editor.getScrolledVisiblePosition(this._editor.getPosition()),o=i.HT(this._editor.getDomNode()),n=o.left+e.left,r=o.top+e.top+e.height;t={x:n,y:r}}const r=this._editor.getOption(122)&&!a.G8;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:r?this._editor.getDomNode():void 0,getAnchor:()=>t,getActions:()=>e,getActionViewItem:e=>{const t=this._keybindingFor(e);if(t)return new n.Of(e,e,{label:!0,keybinding:t.getLabel(),isMenu:!0});const o=e;return"function"==typeof o.getActionViewItem?o.getActionViewItem():new n.Of(e,e,{icon:!0,label:!0,isMenu:!0})},getKeyBinding:e=>this._keybindingFor(e),onHide:e=>{this._contextMenuIsBeingShownCount--,this._editor.updateOptions({hover:o})}})}_showScrollbarContextMenu(e){if(!this._editor.hasModel())return;if((0,f.yM)(this._workspaceContextService.getWorkspace()))return;const t=this._editor.getOption(70);let o=0;const i=e=>({id:"menu-action-"+ ++o,label:e.label,tooltip:"",class:void 0,enabled:void 0===e.enabled||e.enabled,checked:e.checked,run:e.run}),n=(e,t,n,s,a)=>{if(!t)return i({label:e,enabled:t,run:()=>{}});const c=e=>()=>{this._configurationService.updateValue(n,e)},d=[];for(const e of a)d.push(i({label:e.label,checked:s===e.value,run:c(e.value)}));return((e,t)=>new r.OW("menu-action-"+ ++o,e,t,void 0))(e,d)},s=[];s.push(i({label:l.uy("context.minimap.minimap","Minimap"),checked:t.enabled,run:()=>{this._configurationService.updateValue("editor.minimap.enabled",!t.enabled)}})),s.push(new r.UL),s.push(i({label:l.uy("context.minimap.renderCharacters","Render Characters"),enabled:t.enabled,checked:t.renderCharacters,run:()=>{this._configurationService.updateValue("editor.minimap.renderCharacters",!t.renderCharacters)}})),s.push(n(l.uy("context.minimap.size","Vertical size"),t.enabled,"editor.minimap.size",t.size,[{label:l.uy("context.minimap.size.proportional","Proportional"),value:"proportional"},{label:l.uy("context.minimap.size.fill","Fill"),value:"fill"},{label:l.uy("context.minimap.size.fit","Fit"),value:"fit"}])),s.push(n(l.uy("context.minimap.slider","Slider"),t.enabled,"editor.minimap.showSlider",t.showSlider,[{label:l.uy("context.minimap.slider.mouseover","Mouse Over"),value:"mouseover"},{label:l.uy("context.minimap.slider.always","Always"),value:"always"}]));const c=this._editor.getOption(122)&&!a.G8;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:c?this._editor.getDomNode():void 0,getAnchor:()=>e,getActions:()=>s,onHide:e=>{this._contextMenuIsBeingShownCount--,this._editor.focus()}})}_keybindingFor(e){return this._keybindingService.lookupKeybinding(e.id)}dispose(){this._contextMenuIsBeingShownCount>0&&this._contextViewService.hideContextView(),this._toDispose.dispose()}};C.ID="editor.contrib.contextmenu",C=_([v(1,g.A),v(2,g.s),v(3,u.KK),v(4,p.M),v(5,h.gZ),v(6,m.Ci),v(7,f.YD)],C);class b extends c.ay{constructor(){super({id:"editor.action.showContextMenu",label:l.uy("action.showContextMenu.label","Show Editor Context Menu"),alias:"Show Editor Context Menu",precondition:void 0,kbOpts:{kbExpr:d.y.textInputFocus,primary:1092,weight:100}})}run(e,t){var o;null===(o=C.get(t))||void 0===o||o.showContextMenu()}}(0,c._U)(C.ID,C,2),(0,c.K_)(b)},56459:function(e,t,o){"use strict";var i=o(27440),n=o(62864),r=o(69040),s=o(81564),a=o(22136),c=o(39048),d=o(58552),l=o(34656),h=o(11632),u=o(25068),g=o(22980),p=o(90836),m=o(95664),f=o(42792),_=o(66692),v=o(60608),C=o(6404),b=o(38744),y=o(17400),w=o(91188),k=o(34572),S=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},x=function(e,t){return function(o,i){t(o,i,e)}},A=function(e,t,o,i){return new(o||(o=Promise))((function(n,r){function s(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};const L="application/vnd.code.copyMetadata";let P=class extends c.CC{constructor(e,t,o,i,n,s){super(),this._bulkEditService=o,this._clipboardService=i,this._configurationService=n,this._languageFeaturesService=s,this.operationIdPool=0,this._editor=e;const a=e.getContainerDomNode();this._register((0,r.Wq)(a,"copy",(e=>this.handleCopy(e)))),this._register((0,r.Wq)(a,"cut",(e=>this.handleCopy(e)))),this._register((0,r.Wq)(a,"paste",(e=>this.handlePaste(e)),!0)),this._pasteProgressManager=this._register(new v.w("pasteIntoEditor",e,t))}arePasteActionsEnabled(e){return!!this._configurationService.getValue("editor.experimental.pasteActions.enabled",{resource:e.uri})||e.uri.scheme===l.eg.vscodeNotebookCell}handleCopy(e){var t;if(!e.clipboardData||!this._editor.hasTextFocus())return;const o=this._editor.getModel(),i=this._editor.getSelections();if(!o||!(null==i?void 0:i.length))return;if(!this.arePasteActionsEnabled(o))return;const n=[...i],r=i[0],a=r.isEmpty();if(a){if(!this._editor.getOption(35))return;n[0]=new p.E(r.startLineNumber,0,r.startLineNumber,o.getLineLength(r.startLineNumber))}const c=this._languageFeaturesService.documentPasteEditProvider.ordered(o).filter((e=>!!e.prepareDocumentPaste));if(!c.length)return void this.setCopyMetadata(e.clipboardData,{wasFromEmptySelection:a});const d=(0,u.Y)(e.clipboardData),l=(0,h.I)();this.setCopyMetadata(e.clipboardData,{id:l,wasFromEmptySelection:a});const g=(0,s.ec)((e=>A(this,void 0,void 0,(function*(){const t=yield Promise.all(c.map((t=>t.prepareDocumentPaste(o,n,d,e))));for(const e of t)null==e||e.forEach(((e,t)=>{d.replace(t,e)}));return d}))));null===(t=this._currentClipboardItem)||void 0===t||t.dataTransferPromise.cancel(),this._currentClipboardItem={handle:l,dataTransferPromise:g}}setCopyMetadata(e,t){e.setData(L,JSON.stringify(t))}handlePaste(e){var t,o;return A(this,void 0,void 0,(function*(){if(!e.clipboardData||!this._editor.hasTextFocus())return;const i=this.operationIdPool++;null===(t=this._currentOperation)||void 0===t||t.promise.cancel(),this._pasteProgressManager.clear();const n=this._editor.getSelections();if(!(null==n?void 0:n.length)||!this._editor.hasModel())return;const r=this._editor.getModel();if(!this.arePasteActionsEnabled(r))return;let c;const l=null===(o=e.clipboardData)||void 0===o?void 0:o.getData(L);l&&"string"==typeof l&&(c=JSON.parse(l));const h=this._languageFeaturesService.documentPasteEditProvider.ordered(r);if(!h.length)return;e.preventDefault(),e.stopImmediatePropagation();const p=(0,s.ec)((t=>A(this,void 0,void 0,(function*(){var o,s,l,p;const f=this._editor;if(!f.hasModel())return;const v=new _.wz(f,3,void 0,t);try{this._pasteProgressManager.setAtPosition(n[0].getEndPosition(),(0,b.uy)("pasteIntoEditorProgress","Running paste handlers. Click to cancel"),{cancel:()=>v.cancel()});const t=(0,u.Y)(e.clipboardData);if((null==c?void 0:c.id)&&(null===(o=this._currentClipboardItem)||void 0===o?void 0:o.handle)===c.id){const e=yield this._currentClipboardItem.dataTransferPromise;if(v.token.isCancellationRequested)return;e.forEach(((e,o)=>{t.replace(o,e)}))}if(!t.has(d.M.uriList)){const e=yield this._clipboardService.readResources();if(v.token.isCancellationRequested)return;e.length&&t.append(d.M.uriList,(0,a.wm)(a.yA.create(e)))}t.delete(L);const i=yield this.getProviderPasteEdit(h,t,r,n,v.token);if(v.token.isCancellationRequested)return;if(i){const e="string"==typeof i.insertText?C.o4.escape(i.insertText):i.insertText.snippet,t={edits:[new g.Iv(r.uri,{range:m.G.liftSelection(f.getSelection()),text:e,insertAsSnippet:!0}),...null!==(l=null===(s=i.additionalEdit)||void 0===s?void 0:s.edits)&&void 0!==l?l:[]]};return void(yield this._bulkEditService.apply(t,{editor:f}))}yield this.applyDefaultPasteHandler(t,c,v.token)}finally{v.dispose(),(null===(p=this._currentOperation)||void 0===p?void 0:p.id)===i&&(this._pasteProgressManager.clear(),this._currentOperation=void 0)}}))));this._currentOperation={id:i,promise:p}}))}getProviderPasteEdit(e,t,o,i,n){return(0,s.mE)((()=>A(this,void 0,void 0,(function*(){for(const r of e){if(n.isCancellationRequested)return;if(!D(r,t))continue;const e=yield r.provideDocumentPasteEdits(o,i,t,n);if(e)return e}})))(),n)}applyDefaultPasteHandler(e,t,o){var i;return A(this,void 0,void 0,(function*(){const n=null!==(i=e.get(d.M.text))&&void 0!==i?i:e.get("text");if(!n)return;const r=yield n.asString();o.isCancellationRequested||this._editor.trigger("keyboard","paste",{text:r,pasteOnNewLine:null==t?void 0:t.wasFromEmptySelection,multicursorText:null})}))}};function D(e,t){return e.pasteMimeTypes.some((e=>t.matches(e)))}P.ID="editor.contrib.copyPasteActionController",P=S([x(1,k.U9),x(2,g.iI),x(3,y.i),x(4,w.Ci),x(5,f.w)],P);var I=o(19120),M=o(60900);(0,i._U)(P.ID,P,0),M.o.as(I.kh.Configuration).registerConfiguration(Object.assign(Object.assign({},n.Q5),{properties:{"editor.experimental.pasteActions.enabled":{type:"boolean",scope:5,description:b.uy("pasteActions","Enable/disable running edits from extensions on paste."),default:!1}}}))},32520:function(e,t,o){"use strict";var i=o(39048),n=o(27440),r=o(25900),s=o(38744);class a{constructor(e){this.selections=e}equals(e){const t=this.selections.length;if(t!==e.selections.length)return!1;for(let o=0;o<t;o++)if(!this.selections[o].equalsSelection(e.selections[o]))return!1;return!0}}class c{constructor(e,t,o){this.cursorState=e,this.scrollTop=t,this.scrollLeft=o}}class d extends i.CC{static get(e){return e.getContribution(d.ID)}constructor(e){super(),this._editor=e,this._isCursorUndoRedo=!1,this._undoStack=[],this._redoStack=[],this._register(e.onDidChangeModel((e=>{this._undoStack=[],this._redoStack=[]}))),this._register(e.onDidChangeModelContent((e=>{this._undoStack=[],this._redoStack=[]}))),this._register(e.onDidChangeCursorSelection((t=>{if(this._isCursorUndoRedo)return;if(!t.oldSelections)return;if(t.oldModelVersionId!==t.modelVersionId)return;const o=new a(t.oldSelections);this._undoStack.length>0&&this._undoStack[this._undoStack.length-1].cursorState.equals(o)||(this._undoStack.push(new c(o,e.getScrollTop(),e.getScrollLeft())),this._redoStack=[],this._undoStack.length>50&&this._undoStack.shift())})))}cursorUndo(){this._editor.hasModel()&&0!==this._undoStack.length&&(this._redoStack.push(new c(new a(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._undoStack.pop()))}cursorRedo(){this._editor.hasModel()&&0!==this._redoStack.length&&(this._undoStack.push(new c(new a(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._redoStack.pop()))}_applyState(e){this._isCursorUndoRedo=!0,this._editor.setSelections(e.cursorState.selections),this._editor.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}),this._isCursorUndoRedo=!1}}d.ID="editor.contrib.cursorUndoRedoController";class l extends n.ay{constructor(){super({id:"cursorUndo",label:s.uy("cursor.undo","Cursor Undo"),alias:"Cursor Undo",precondition:void 0,kbOpts:{kbExpr:r.y.textInputFocus,primary:2099,weight:100}})}run(e,t,o){var i;null===(i=d.get(t))||void 0===i||i.cursorUndo()}}class h extends n.ay{constructor(){super({id:"cursorRedo",label:s.uy("cursor.redo","Cursor Redo"),alias:"Cursor Redo",precondition:void 0})}run(e,t,o){var i;null===(i=d.get(t))||void 0===i||i.cursorRedo()}}(0,n._U)(d.ID,d,0),(0,n.K_)(l),(0,n.K_)(h)},61572:function(e,t,o){var i=o(22108),n=o(12988);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.id,n,""]]);var r={insert:"head",singleton:!1};i(n,r);e.exports=n.locals||{}},79004:function(e,t,o){var i=o(22108),n=o(83824);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.id,n,""]]);var r={insert:"head",singleton:!1};i(n,r);e.exports=n.locals||{}},38328:function(e,t,o){var i=o(22108),n=o(19288);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.id,n,""]]);var r={insert:"head",singleton:!1};i(n,r);e.exports=n.locals||{}},80580:function(e,t,o){var i=o(22108),n=o(3160);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.id,n,""]]);var r={insert:"head",singleton:!1};i(n,r);e.exports=n.locals||{}},32004:function(e,t,o){var i=o(22108),n=o(20595);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[e.id,n,""]]);var r={insert:"head",singleton:!1};i(n,r);e.exports=n.locals||{}},12988:function(e,t,o){(e.exports=o(22587)(!1)).push([e.id,"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n.monaco-editor .selection-anchor {\n\tbackground-color: #007ACC;\n\twidth: 2px !important;\n}\n",""])},83824:function(e,t,o){(e.exports=o(22587)(!1)).push([e.id,"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n.monaco-editor .bracket-match {\n\tbox-sizing: border-box;\n\tbackground-color: var(--vscode-editorBracketMatch-background);\n\tborder: 1px solid var(--vscode-editorBracketMatch-border);\n}\n",""])},19288:function(e,t,o){(e.exports=o(22587)(!1)).push([e.id,"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n.monaco-editor .lightBulbWidget {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n.monaco-editor .lightBulbWidget:hover{\n\tcursor: pointer;\n}\n\n.monaco-editor .lightBulbWidget.codicon-light-bulb {\n\tcolor: var(--vscode-editorLightBulb-foreground);\n}\n\n.monaco-editor .lightBulbWidget.codicon-lightbulb-autofix {\n\tcolor: var(--vscode-editorLightBulbAutoFix-foreground, var(--vscode-editorLightBulb-foreground));\n}\n\n.monaco-editor .lightBulbWidget:before {\n\tposition: relative;\n\tz-index: 2;\n}\n\n.monaco-editor .lightBulbWidget:after {\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\tcontent: '';\n\tdisplay: block;\n\twidth: 100%;\n\theight: 100%;\n\topacity: 0.3;\n\tbackground-color: var(--vscode-editor-background);\n\tz-index: 1;\n}\n",""])},3160:function(e,t,o){(e.exports=o(22587)(!1)).push([e.id,"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n.monaco-editor .codelens-decoration {\n\toverflow: hidden;\n\tdisplay: inline-block;\n\ttext-overflow: ellipsis;\n\twhite-space: nowrap;\n\tcolor: var(--vscode-editorCodeLens-foreground);\n\tline-height: var(--vscode-editorCodeLens-lineHeight);\n\tfont-size: var(--vscode-editorCodeLens-fontSize);\n\tpadding-right: calc(var(--vscode-editorCodeLens-fontSize)*0.5);\n\tfont-feature-settings: var(--vscode-editorCodeLens-fontFeatureSettings);\n\tfont-family: var(--vscode-editorCodeLens-fontFamily), var(--vscode-editorCodeLens-fontFamilyDefault);\n}\n\n.monaco-editor .codelens-decoration>span,\n.monaco-editor .codelens-decoration>a {\n\tuser-select: none;\n\t-webkit-user-select: none;\n\twhite-space: nowrap;\n\tvertical-align: sub;\n}\n\n.monaco-editor .codelens-decoration>a {\n\ttext-decoration: none;\n}\n\n.monaco-editor .codelens-decoration>a:hover {\n\tcursor: pointer;\n\tcolor: var(--vscode-editorLink-activeForeground) !important;\n}\n\n.monaco-editor .codelens-decoration>a:hover .codicon {\n\tcolor: var(--vscode-editorLink-activeForeground) !important;\n}\n\n.monaco-editor .codelens-decoration .codicon {\n\tvertical-align: middle;\n\tcolor: currentColor !important;\n\tcolor: var(--vscode-editorCodeLens-foreground);\n\tline-height: var(--vscode-editorCodeLens-lineHeight);\n\tfont-size: var(--vscode-editorCodeLens-fontSize);\n}\n\n.monaco-editor .codelens-decoration>a:hover .codicon::before {\n\tcursor: pointer;\n}\n\n@keyframes fadein {\n\t0% {\n\t\topacity: 0;\n\t\tvisibility: visible;\n\t}\n\n\t100% {\n\t\topacity: 1;\n\t}\n}\n\n.monaco-editor .codelens-decoration.fadein {\n\tanimation: fadein 0.1s linear;\n}\n",""])},20595:function(e,t,o){(e.exports=o(22587)(!1)).push([e.id,'/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n.colorpicker-widget {\n\theight: 190px;\n\tuser-select: none;\n\t-webkit-user-select: none;\n}\n\n/* Decoration */\n\n.colorpicker-color-decoration,\n.hc-light .colorpicker-color-decoration {\n\tborder: solid 0.1em #000;\n\tbox-sizing: border-box;\n\tmargin: 0.1em 0.2em 0 0.2em;\n\twidth: 0.8em;\n\theight: 0.8em;\n\tline-height: 0.8em;\n\tdisplay: inline-block;\n\tcursor: pointer;\n}\n\n.hc-black .colorpicker-color-decoration,\n.vs-dark .colorpicker-color-decoration {\n\tborder: solid 0.1em #eee;\n}\n\n/* Header */\n\n.colorpicker-header {\n\tdisplay: flex;\n\theight: 24px;\n\tposition: relative;\n\tbackground: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAZdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuMTZEaa/1AAAAHUlEQVQYV2PYvXu3JAi7uLiAMaYAjAGTQBPYLQkAa/0Zef3qRswAAAAASUVORK5CYII=");\n\tbackground-size: 9px 9px;\n\timage-rendering: pixelated;\n}\n\n.colorpicker-header .picked-color {\n\twidth: 240px;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tline-height: 24px;\n\tcursor: pointer;\n\tcolor: white;\n\tflex: 1;\n}\n\n.colorpicker-header .picked-color .codicon {\n\tcolor: inherit;\n\tfont-size: 14px;\n\tposition: absolute;\n\tleft: 8px;\n}\n\n.colorpicker-header .picked-color.light {\n\tcolor: black;\n}\n\n.colorpicker-header .original-color {\n\twidth: 74px;\n\tz-index: inherit;\n\tcursor: pointer;\n}\n\n.standalone-colorpicker {\n\tcolor: var(--vscode-editorHoverWidget-foreground);\n\tbackground-color: var(--vscode-editorHoverWidget-background);\n\tborder: 1px solid var(--vscode-editorHoverWidget-border);\n}\n\n.colorpicker-header.standalone-colorpicker {\n\tborder-bottom: none;\n}\n\n.colorpicker-header .close-button {\n\tcursor: pointer;\n\tbackground-color: var(--vscode-editorHoverWidget-background);\n\tborder-left: 1px solid var(--vscode-editorHoverWidget-border);\n}\n\n.colorpicker-header .close-button-inner-div {\n\twidth: 100%;\n\theight: 100%;\n\ttext-align: center;\n}\n\n.colorpicker-header .close-button-inner-div:hover {\n\tbackground-color: var(--vscode-toolbar-hoverBackground);\n}\n\n.colorpicker-header .close-icon {\n\tpadding: 3px;\n}\n\n/* Body */\n\n.colorpicker-body {\n\tdisplay: flex;\n\tpadding: 8px;\n\tposition: relative;\n}\n\n.colorpicker-body .saturation-wrap {\n\toverflow: hidden;\n\theight: 150px;\n\tposition: relative;\n\tmin-width: 220px;\n\tflex: 1;\n}\n\n.colorpicker-body .saturation-box {\n\theight: 150px;\n\tposition: absolute;\n}\n\n.colorpicker-body .saturation-selection {\n\twidth: 9px;\n\theight: 9px;\n\tmargin: -5px 0 0 -5px;\n\tborder: 1px solid rgb(255, 255, 255);\n\tborder-radius: 100%;\n\tbox-shadow: 0px 0px 2px rgba(0, 0, 0, 0.8);\n\tposition: absolute;\n}\n\n.colorpicker-body .strip {\n\twidth: 25px;\n\theight: 150px;\n}\n\n.colorpicker-body .standalone-strip {\n\twidth: 25px;\n\theight: 122px;\n}\n\n.colorpicker-body .hue-strip {\n\tposition: relative;\n\tmargin-left: 8px;\n\tcursor: grab;\n\tbackground: linear-gradient(to bottom, #ff0000 0%, #ffff00 17%, #00ff00 33%, #00ffff 50%, #0000ff 67%, #ff00ff 83%, #ff0000 100%);\n}\n\n.colorpicker-body .opacity-strip {\n\tposition: relative;\n\tmargin-left: 8px;\n\tcursor: grab;\n\tbackground: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAZdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuMTZEaa/1AAAAHUlEQVQYV2PYvXu3JAi7uLiAMaYAjAGTQBPYLQkAa/0Zef3qRswAAAAASUVORK5CYII=");\n\tbackground-size: 9px 9px;\n\timage-rendering: pixelated;\n}\n\n.colorpicker-body .strip.grabbing {\n\tcursor: grabbing;\n}\n\n.colorpicker-body .slider {\n\tposition: absolute;\n\ttop: 0;\n\tleft: -2px;\n\twidth: calc(100% + 4px);\n\theight: 4px;\n\tbox-sizing: border-box;\n\tborder: 1px solid rgba(255, 255, 255, 0.71);\n\tbox-shadow: 0px 0px 1px rgba(0, 0, 0, 0.85);\n}\n\n.colorpicker-body .strip .overlay {\n\theight: 150px;\n\tpointer-events: none;\n}\n\n.colorpicker-body .standalone-strip .standalone-overlay {\n\theight: 122px;\n\tpointer-events: none;\n}\n\n.standalone-colorpicker-body {\n\tdisplay: block;\n\tborder: 1px solid transparent;\n\tborder-bottom: 1px solid var(--vscode-editorHoverWidget-border);\n\toverflow: hidden;\n}\n\n.colorpicker-body .insert-button {\n\theight: 20px;\n\twidth: 58px;\n\tposition: absolute;\n\tright: 8px;\n\tbottom: 8px;\n\tbackground: var(--vscode-button-background);\n\tcolor: var(--vscode-button-foreground);\n\tborder-radius: 2px;\n\tborder: none;\n\tcursor: pointer;\n}\n\n.colorpicker-body .insert-button:hover{\n\tbackground: var(--vscode-button-hoverBackground);\n}\n',""])}}]);