(self.webpackChunkcode_editor=self.webpackChunkcode_editor||[]).push([[8020],{15632:function(e,t,i){"use strict";var n=i(27440),o=i(5400),r=i(38744);class s extends n.ay{constructor(){super({id:"editor.action.fontZoomIn",label:r.uy("EditorFontZoomIn.label","Editor Font Zoom In"),alias:"Editor Font Zoom In",precondition:void 0})}run(e,t){o.U.setZoomLevel(o.U.getZoomLevel()+1)}}class a extends n.ay{constructor(){super({id:"editor.action.fontZoomOut",label:r.uy("EditorFontZoomOut.label","Editor Font Zoom Out"),alias:"Editor Font Zoom Out",precondition:void 0})}run(e,t){o.U.setZoomLevel(o.U.getZoomLevel()-1)}}class d extends n.ay{constructor(){super({id:"editor.action.fontZoomReset",label:r.uy("EditorFontZoomReset.label","Editor Font Zoom Reset"),alias:"Editor Font Zoom Reset",precondition:void 0})}run(e,t){o.U.setZoomLevel(0)}}(0,n.K_)(s),(0,n.K_)(a),(0,n.K_)(d)},15920:function(e,t,i){"use strict";i.d(t,{Mh:function(){return I},OG:function(){return R},aG:function(){return T},g5:function(){return E},sL:function(){return x}});var n=i(52040),o=i(14372),r=i(31972),s=i(32096),a=i(37096),d=i(15504),c=i(96196),l=i(70660),h=i(66692),u=i(25136),g=i(4400),p=i(90836),f=i(95664),m=i(8368),_=i(30092),v=i(23135),y=i(38744),w=i(8296),k=i(98424),b=i(34572),M=i(42792),C=i(8912),S=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{d(n.next(e))}catch(e){r(e)}}function a(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}d((n=n.apply(e,t||[])).next())}))};function x(e){if(!(e=e.filter((e=>e.range))).length)return;let{range:t}=e[0];for(let i=1;i<e.length;i++)t=p.E.plusRange(t,e[i].range);const{startLineNumber:i,endLineNumber:o}=t;i===o?1===e.length?(0,n.Qb)(y.uy("hint11","Made 1 formatting edit on line {0}",i)):(0,n.Qb)(y.uy("hintn1","Made {0} formatting edits on line {1}",e.length,i)):1===e.length?(0,n.Qb)(y.uy("hint1n","Made 1 formatting edit between lines {0} and {1}",i,o)):(0,n.Qb)(y.uy("hintnn","Made {0} formatting edits between lines {1} and {2}",e.length,i,o))}function D(e,t,i){const n=[],o=new k.W,r=e.ordered(i);for(const e of r)n.push(e),e.extensionId&&o.add(e.extensionId);const s=t.ordered(i);for(const e of s){if(e.extensionId){if(o.has(e.extensionId))continue;o.add(e.extensionId)}n.push({displayName:e.displayName,extensionId:e.extensionId,provideDocumentFormattingEdits(t,i,n){return e.provideDocumentRangeFormattingEdits(t,t.getFullModelRange(),i,n)}})}return n}class E{static setFormatterSelector(e){return{dispose:E._selectors.unshift(e)}}static select(e,t,i){return S(this,void 0,void 0,(function*(){if(0===e.length)return;const n=a.C.first(E._selectors);return n?yield n(e,t,i):void 0}))}}function R(e,t,i,n,o,r){return S(this,void 0,void 0,(function*(){const s=e.get(b.U9),{documentRangeFormattingEditProvider:a}=e.get(M.w),d=(0,u.cF)(t)?t.getModel():t,c=a.ordered(d),l=yield E.select(c,d,n);l&&(o.report(l),yield s.invokeFunction(P,l,t,i,r))}))}function P(e,t,i,n,r){var s,a;return S(this,void 0,void 0,(function*(){const d=e.get(m.g),c=e.get(C.u2);let l,g;(0,u.cF)(i)?(l=i.getModel(),g=new h.wz(i,5,void 0,r)):(l=i,g=new h.gZ(i,r));const _=[];let y=0;for(const e of(0,o.f4)(n).sort(p.E.compareRangesUsingStarts))y>0&&p.E.areIntersectingOrTouching(_[y-1],e)?_[y-1]=p.E.fromPositions(_[y-1].getStartPosition(),e.getEndPosition()):y=_.push(e);const w=e=>S(this,void 0,void 0,(function*(){var i,n;c.trace("[format][provideDocumentRangeFormattingEdits] (request)",null===(i=t.extensionId)||void 0===i?void 0:i.value,e);const o=(yield t.provideDocumentRangeFormattingEdits(l,e,l.getFormattingOptions(),g.token))||[];return c.trace("[format][provideDocumentRangeFormattingEdits] (response)",null===(n=t.extensionId)||void 0===n?void 0:n.value,o),o})),k=(e,t)=>{if(!e.length||!t.length)return!1;const i=e.reduce(((e,t)=>p.E.plusRange(e,t.range)),e[0].range);if(!t.some((e=>p.E.intersectRanges(i,e.range))))return!1;for(const i of e)for(const e of t)if(p.E.intersectRanges(i.range,e.range))return!0;return!1},b=[],M=[];try{if("function"==typeof t.provideDocumentRangesFormattingEdits){c.trace("[format][provideDocumentRangeFormattingEdits] (request)",null===(s=t.extensionId)||void 0===s?void 0:s.value,_);const e=(yield t.provideDocumentRangesFormattingEdits(l,_,l.getFormattingOptions(),g.token))||[];c.trace("[format][provideDocumentRangeFormattingEdits] (response)",null===(a=t.extensionId)||void 0===a?void 0:a.value,e),M.push(e)}else{for(const e of _){if(g.token.isCancellationRequested)return!0;M.push(yield w(e))}for(let e=0;e<_.length;++e)for(let t=e+1;t<_.length;++t){if(g.token.isCancellationRequested)return!0;if(k(M[e],M[t])){const i=p.E.plusRange(_[e],_[t]),n=yield w(i);_.splice(t,1),_.splice(e,1),_.push(i),M.splice(t,1),M.splice(e,1),M.push(n),e=0,t=0}}}for(const e of M){if(g.token.isCancellationRequested)return!0;const t=yield d.computeMoreMinimalEdits(l.uri,e);t&&b.push(...t)}}finally{g.dispose()}if(0===b.length)return!1;if((0,u.cF)(i))v.g.execute(i,b,!0),x(b),i.revealPositionInCenterIfOutsideViewport(i.getPosition(),1);else{const[{range:e}]=b,t=new f.G(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn);l.pushEditOperations([t],b.map((e=>({text:e.text,range:p.E.lift(e.range),forceMoveMarkers:!0}))),(e=>{for(const{range:i}of e)if(p.E.areIntersectingOrTouching(i,t))return[new f.G(i.startLineNumber,i.startColumn,i.endLineNumber,i.endColumn)];return null}))}return!0}))}function I(e,t,i,n,o){return S(this,void 0,void 0,(function*(){const r=e.get(b.U9),s=e.get(M.w),a=(0,u.cF)(t)?t.getModel():t,d=D(s.documentFormattingEditProvider,s.documentRangeFormattingEditProvider,a),c=yield E.select(d,a,i);c&&(n.report(c),yield r.invokeFunction(L,c,t,i,o))}))}function L(e,t,i,n,o){return S(this,void 0,void 0,(function*(){const r=e.get(m.g);let s,a,d;(0,u.cF)(i)?(s=i.getModel(),a=new h.wz(i,5,void 0,o)):(s=i,a=new h.gZ(i,o));try{const e=yield t.provideDocumentFormattingEdits(s,s.getFormattingOptions(),a.token);if(d=yield r.computeMoreMinimalEdits(s.uri,e),a.token.isCancellationRequested)return!0}finally{a.dispose()}if(!d||0===d.length)return!1;if((0,u.cF)(i))v.g.execute(i,d,2!==n),2!==n&&(x(d),i.revealPositionInCenterIfOutsideViewport(i.getPosition(),1));else{const[{range:e}]=d,t=new f.G(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn);s.pushEditOperations([t],d.map((e=>({text:e.text,range:p.E.lift(e.range),forceMoveMarkers:!0}))),(e=>{for(const{range:i}of e)if(p.E.areIntersectingOrTouching(i,t))return[new f.G(i.startLineNumber,i.startColumn,i.endLineNumber,i.endColumn)];return null}))}return!0}))}function T(e,t,i,n,o,r,a){const d=t.onTypeFormattingEditProvider.ordered(i);return 0===d.length||d[0].autoFormatTriggerCharacters.indexOf(o)<0?Promise.resolve(void 0):Promise.resolve(d[0].provideOnTypeFormattingEdits(i,n,o,r,a)).catch(s.i4).then((t=>e.computeMoreMinimalEdits(i.uri,t)))}E._selectors=new d.S,w.y.registerCommand("_executeFormatRangeProvider",(function(e,...t){return S(this,void 0,void 0,(function*(){const[i,n,a]=t;(0,c.GE)(l.K.isUri(i)),(0,c.GE)(p.E.isIRange(n));const d=e.get(_.B),h=e.get(m.g),u=e.get(M.w),g=yield d.createModelReference(i);try{return function(e,t,i,n,r,a){return S(this,void 0,void 0,(function*(){const d=t.documentRangeFormattingEditProvider.ordered(i);for(const t of d){const d=yield Promise.resolve(t.provideDocumentRangeFormattingEdits(i,n,r,a)).catch(s.i4);if((0,o.gl)(d))return yield e.computeMoreMinimalEdits(i.uri,d)}}))}(h,u,g.object.textEditorModel,p.E.lift(n),a,r.I.None)}finally{g.dispose()}}))})),w.y.registerCommand("_executeFormatDocumentProvider",(function(e,...t){return S(this,void 0,void 0,(function*(){const[i,n]=t;(0,c.GE)(l.K.isUri(i));const a=e.get(_.B),d=e.get(m.g),h=e.get(M.w),u=yield a.createModelReference(i);try{return function(e,t,i,n,r){return S(this,void 0,void 0,(function*(){const a=D(t.documentFormattingEditProvider,t.documentRangeFormattingEditProvider,i);for(const t of a){const a=yield Promise.resolve(t.provideDocumentFormattingEdits(i,n,r)).catch(s.i4);if((0,o.gl)(a))return yield e.computeMoreMinimalEdits(i.uri,a)}}))}(d,h,u.object.textEditorModel,n,r.I.None)}finally{u.dispose()}}))})),w.y.registerCommand("_executeFormatOnTypeProvider",(function(e,...t){return S(this,void 0,void 0,(function*(){const[i,n,o,s]=t;(0,c.GE)(l.K.isUri(i)),(0,c.GE)(g.J.isIPosition(n)),(0,c.GE)("string"==typeof o);const a=e.get(_.B),d=e.get(m.g),h=e.get(M.w),u=yield a.createModelReference(i);try{return T(d,h,u.object.textEditorModel,g.J.lift(n),o,s,r.I.None)}finally{u.dispose()}}))}))},21224:function(e,t,i){"use strict";var n=i(14372),o=i(31972),r=i(32096),s=i(84140),a=i(39048),d=i(27440),c=i(85432),l=i(10988),h=i(90836),u=i(25900),g=i(8368),p=i(42792),f=i(15920),m=i(23135),_=i(38744),v=i(8296),y=i(93636),w=i(34572),k=i(77483),b=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},M=function(e,t){return function(i,n){t(i,n,e)}},C=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{d(n.next(e))}catch(e){r(e)}}function a(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}d((n=n.apply(e,t||[])).next())}))};let S=class{constructor(e,t,i){this._editor=e,this._languageFeaturesService=t,this._workerService=i,this._disposables=new a.Y1,this._sessionDisposables=new a.Y1,this._disposables.add(t.onTypeFormattingEditProvider.onDidChange(this._update,this)),this._disposables.add(e.onDidChangeModel((()=>this._update()))),this._disposables.add(e.onDidChangeModelLanguage((()=>this._update()))),this._disposables.add(e.onDidChangeConfiguration((e=>{e.hasChanged(54)&&this._update()}))),this._update()}dispose(){this._disposables.dispose(),this._sessionDisposables.dispose()}_update(){if(this._sessionDisposables.clear(),!this._editor.getOption(54))return;if(!this._editor.hasModel())return;const e=this._editor.getModel(),[t]=this._languageFeaturesService.onTypeFormattingEditProvider.ordered(e);if(!t||!t.autoFormatTriggerCharacters)return;const i=new l.k;for(const e of t.autoFormatTriggerCharacters)i.add(e.charCodeAt(0));this._sessionDisposables.add(this._editor.onDidType((e=>{const t=e.charCodeAt(e.length-1);i.has(t)&&this._trigger(String.fromCharCode(t))})))}_trigger(e){if(!this._editor.hasModel())return;if(this._editor.getSelections().length>1||!this._editor.getSelection().isEmpty())return;const t=this._editor.getModel(),i=this._editor.getPosition(),r=new o.A,s=this._editor.onDidChangeModelContent((e=>{if(e.isFlush)return r.cancel(),void s.dispose();for(let t=0,n=e.changes.length;t<n;t++){if(e.changes[t].range.endLineNumber<=i.lineNumber)return r.cancel(),void s.dispose()}}));(0,f.aG)(this._workerService,this._languageFeaturesService,t,i,e,t.getFormattingOptions(),r.token).then((e=>{r.token.isCancellationRequested||(0,n.gl)(e)&&(m.g.execute(this._editor,e,!0),(0,f.sL)(e))})).finally((()=>{s.dispose()}))}};S.ID="editor.contrib.autoFormat",S=b([M(1,p.w),M(2,g.g)],S);let x=class{constructor(e,t,i){this.editor=e,this._languageFeaturesService=t,this._instantiationService=i,this._callOnDispose=new a.Y1,this._callOnModel=new a.Y1,this._callOnDispose.add(e.onDidChangeConfiguration((()=>this._update()))),this._callOnDispose.add(e.onDidChangeModel((()=>this._update()))),this._callOnDispose.add(e.onDidChangeModelLanguage((()=>this._update()))),this._callOnDispose.add(t.documentRangeFormattingEditProvider.onDidChange(this._update,this))}dispose(){this._callOnDispose.dispose(),this._callOnModel.dispose()}_update(){this._callOnModel.clear(),this.editor.getOption(53)&&this.editor.hasModel()&&this._languageFeaturesService.documentRangeFormattingEditProvider.has(this.editor.getModel())&&this._callOnModel.add(this.editor.onDidPaste((({range:e})=>this._trigger(e))))}_trigger(e){this.editor.hasModel()&&(this.editor.getSelections().length>1||this._instantiationService.invokeFunction(f.OG,this.editor,e,2,k.b$.None,o.I.None).catch(r.eU))}};x.ID="editor.contrib.formatOnPaste",x=b([M(1,p.w),M(2,w.U9)],x);class D extends d.ay{constructor(){super({id:"editor.action.formatDocument",label:_.uy("formatDocument.label","Format Document"),alias:"Format Document",precondition:y.cU.and(u.y.notInCompositeEditor,u.y.writable,u.y.hasDocumentFormattingProvider),kbOpts:{kbExpr:u.y.editorTextFocus,primary:1572,linux:{primary:3111},weight:100},contextMenuOpts:{group:"1_modification",order:1.3}})}run(e,t){return C(this,void 0,void 0,(function*(){if(t.hasModel()){const i=e.get(w.U9),n=e.get(k.qA);yield n.showWhile(i.invokeFunction(f.Mh,t,1,k.b$.None,o.I.None),250)}}))}}class E extends d.ay{constructor(){super({id:"editor.action.formatSelection",label:_.uy("formatSelection.label","Format Selection"),alias:"Format Selection",precondition:y.cU.and(u.y.writable,u.y.hasDocumentSelectionFormattingProvider),kbOpts:{kbExpr:u.y.editorTextFocus,primary:(0,s.uS)(2089,2084),weight:100},contextMenuOpts:{when:u.y.hasNonEmptySelection,group:"1_modification",order:1.31}})}run(e,t){return C(this,void 0,void 0,(function*(){if(!t.hasModel())return;const i=e.get(w.U9),n=t.getModel(),r=t.getSelections().map((e=>e.isEmpty()?new h.E(e.startLineNumber,1,e.startLineNumber,n.getLineMaxColumn(e.startLineNumber)):e)),s=e.get(k.qA);yield s.showWhile(i.invokeFunction(f.OG,t,r,1,k.b$.None,o.I.None),250)}))}}(0,d._U)(S.ID,S,2),(0,d._U)(x.ID,x,2),(0,d.K_)(D),(0,d.K_)(E),v.y.registerCommand("editor.action.format",(e=>C(void 0,void 0,void 0,(function*(){const t=e.get(c.i).getFocusedCodeEditor();if(!t||!t.hasModel())return;const i=e.get(v.a);t.getSelection().isEmpty()?yield i.executeCommand("editor.action.formatDocument"):yield i.executeCommand("editor.action.formatSelection")}))))},23135:function(e,t,i){"use strict";i.d(t,{g:function(){return s}});var n=i(49356),o=i(90836),r=i(43516);class s{static _handleEolEdits(e,t){let i;const n=[];for(const e of t)"number"==typeof e.eol&&(i=e.eol),e.range&&"string"==typeof e.text&&n.push(e);return"number"==typeof i&&e.hasModel()&&e.getModel().pushEOL(i),n}static _isFullModelReplaceEdit(e,t){if(!e.hasModel())return!1;const i=e.getModel(),n=i.validateRange(t.range);return i.getFullModelRange().equalsRange(n)}static execute(e,t,i){i&&e.pushUndoStop();const a=r.O.capture(e),d=s._handleEolEdits(e,t);1===d.length&&s._isFullModelReplaceEdit(e,d[0])?e.executeEdits("formatEditsCommand",d.map((e=>n.e.replace(o.E.lift(e.range),e.text)))):e.executeEdits("formatEditsCommand",d.map((e=>n.e.replaceMove(o.E.lift(e.range),e.text)))),i&&e.pushUndoStop(),a.restoreRelativeVerticalPositionOfCursor(e)}}},58464:function(e,t,i){"use strict";i.d(t,{b:function(){return ne},_:function(){return re}});var n=i(51708),o=i(39048),r=i(27440),s=i(85432),a=i(4400),d=i(90836),c=i(25900),l=i(14372),h=i(50420),u=i(15504),g=i(2443),p=i(70660),f=i(47004),m=i(34572),_=i(4904),v=i(91188),y=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},w=function(e,t){return function(i,n){t(i,n,e)}};class k{constructor(e,t,i){this.marker=e,this.index=t,this.total=i}}let b=class{constructor(e,t,i){this._markerService=t,this._configService=i,this._onDidChange=new h.sl,this.onDidChange=this._onDidChange.event,this._dispoables=new o.Y1,this._markers=[],this._nextIdx=-1,p.K.isUri(e)?this._resourceFilter=t=>t.toString()===e.toString():e&&(this._resourceFilter=e);const n=this._configService.getValue("problems.sortOrder"),r=(e,t)=>{let i=(0,g.Oo)(e.resource.toString(),t.resource.toString());return 0===i&&(i="position"===n?d.E.compareRangesUsingStarts(e,t)||_.Wk.compare(e.severity,t.severity):_.Wk.compare(e.severity,t.severity)||d.E.compareRangesUsingStarts(e,t)),i},s=()=>{this._markers=this._markerService.read({resource:p.K.isUri(e)?e:void 0,severities:_.Wk.Error|_.Wk.Warning|_.Wk.Info}),"function"==typeof e&&(this._markers=this._markers.filter((e=>this._resourceFilter(e.resource)))),this._markers.sort(r)};s(),this._dispoables.add(t.onMarkerChanged((e=>{this._resourceFilter&&!e.some((e=>this._resourceFilter(e)))||(s(),this._nextIdx=-1,this._onDidChange.fire())})))}dispose(){this._dispoables.dispose(),this._onDidChange.dispose()}matches(e){return!this._resourceFilter&&!e||!(!this._resourceFilter||!e)&&this._resourceFilter(e)}get selected(){const e=this._markers[this._nextIdx];return e&&new k(e,this._nextIdx+1,this._markers.length)}_initIdx(e,t,i){let n=!1,o=this._markers.findIndex((t=>t.resource.toString()===e.uri.toString()));o<0&&(o=(0,l.y)(this._markers,{resource:e.uri},((e,t)=>(0,g.Oo)(e.resource.toString(),t.resource.toString()))),o<0&&(o=~o));for(let i=o;i<this._markers.length;i++){let o=d.E.lift(this._markers[i]);if(o.isEmpty()){const t=e.getWordAtPosition(o.getStartPosition());t&&(o=new d.E(o.startLineNumber,t.startColumn,o.startLineNumber,t.endColumn))}if(t&&(o.containsPosition(t)||t.isBeforeOrEqual(o.getStartPosition()))){this._nextIdx=i,n=!0;break}if(this._markers[i].resource.toString()!==e.uri.toString())break}n||(this._nextIdx=i?0:this._markers.length-1),this._nextIdx<0&&(this._nextIdx=this._markers.length-1)}resetIndex(){this._nextIdx=-1}move(e,t,i){if(0===this._markers.length)return!1;const n=this._nextIdx;return-1===this._nextIdx?this._initIdx(t,i,e):e?this._nextIdx=(this._nextIdx+1)%this._markers.length:e||(this._nextIdx=(this._nextIdx-1+this._markers.length)%this._markers.length),n!==this._nextIdx}find(e,t){let i=this._markers.findIndex((t=>t.resource.toString()===e.toString()));if(!(i<0))for(;i<this._markers.length;i++)if(d.E.containsPosition(this._markers[i],t))return new k(this._markers[i],i+1,this._markers.length)}};b=y([w(1,_.BX),w(2,v.Ci)],b);const M=(0,m.eA)("IMarkerNavigationService");let C=class{constructor(e,t){this._markerService=e,this._configService=t,this._provider=new u.S}getMarkerList(e){for(const t of this._provider){const i=t.getMarkerList(e);if(i)return i}return new b(e,this._markerService,this._configService)}};C=y([w(0,_.BX),w(1,v.Ci)],C),(0,f.G)(M,C,1);var S=i(38744),x=i(39548),D=i(93636),E=i(23600),R=i(69040),P=i(66368),I=i(54752),L=i(33127),T=(i(76500),i(73808)),N=i(14684),O=i(33432),F=i(92368),K=i(7420),A=i(76),W=i(68992),U=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},B=function(e,t){return function(i,n){t(i,n,e)}};class G{constructor(e,t,i,n,r){this._openerService=n,this._labelService=r,this._lines=0,this._longestLineLength=0,this._relatedDiagnostics=new WeakMap,this._disposables=new o.Y1,this._editor=t;const s=document.createElement("div");s.className="descriptioncontainer",this._messageBlock=document.createElement("div"),this._messageBlock.classList.add("message"),this._messageBlock.setAttribute("aria-live","assertive"),this._messageBlock.setAttribute("role","alert"),s.appendChild(this._messageBlock),this._relatedBlock=document.createElement("div"),s.appendChild(this._relatedBlock),this._disposables.add(R.IB(this._relatedBlock,"click",(e=>{e.preventDefault();const t=this._relatedDiagnostics.get(e.target);t&&i(t)}))),this._scrollable=new P.eQ(s,{horizontal:1,vertical:1,useShadows:!1,horizontalScrollbarSize:6,verticalScrollbarSize:6}),e.appendChild(this._scrollable.getDomNode()),this._disposables.add(this._scrollable.onScroll((e=>{s.style.left=`-${e.scrollLeft}px`,s.style.top=`-${e.scrollTop}px`}))),this._disposables.add(this._scrollable)}dispose(){(0,o.Mt)(this._disposables)}update(e){const{source:t,message:i,relatedInformation:n,code:o}=e;let r=((null==t?void 0:t.length)||0)+2;o&&(r+="string"==typeof o?o.length:o.value.length);const s=(0,g.kX)(i);this._lines=s.length,this._longestLineLength=0;for(const e of s)this._longestLineLength=Math.max(e.length+r,this._longestLineLength);R.Wc(this._messageBlock),this._messageBlock.setAttribute("aria-label",this.getAriaLabel(e)),this._editor.applyFontInfo(this._messageBlock);let a=this._messageBlock;for(const e of s)a=document.createElement("div"),a.innerText=e,""===e&&(a.style.height=this._messageBlock.style.lineHeight),this._messageBlock.appendChild(a);if(t||o){const e=document.createElement("span");if(e.classList.add("details"),a.appendChild(e),t){const i=document.createElement("span");i.innerText=t,i.classList.add("source"),e.appendChild(i)}if(o)if("string"==typeof o){const t=document.createElement("span");t.innerText=`(${o})`,t.classList.add("code"),e.appendChild(t)}else{this._codeLink=R.$("a.code-link"),this._codeLink.setAttribute("href",`${o.target.toString()}`),this._codeLink.onclick=e=>{this._openerService.open(o.target,{allowCommands:!0}),e.preventDefault(),e.stopPropagation()};R.IR(this._codeLink,R.$("span")).innerText=o.value,e.appendChild(this._codeLink)}}if(R.Wc(this._relatedBlock),this._editor.applyFontInfo(this._relatedBlock),(0,l.gl)(n)){const e=this._relatedBlock.appendChild(document.createElement("div"));e.style.paddingTop=`${Math.floor(.66*this._editor.getOption(64))}px`,this._lines+=1;for(const t of n){const i=document.createElement("div"),n=document.createElement("a");n.classList.add("filename"),n.innerText=`${this._labelService.getUriBasenameLabel(t.resource)}(${t.startLineNumber}, ${t.startColumn}): `,n.title=this._labelService.getUriLabel(t.resource),this._relatedDiagnostics.set(n,t);const o=document.createElement("span");o.innerText=t.message,i.appendChild(n),i.appendChild(o),this._lines+=1,e.appendChild(i)}}const d=this._editor.getOption(48),c=Math.ceil(d.typicalFullwidthCharacterWidth*this._longestLineLength*.75),h=d.lineHeight*this._lines;this._scrollable.setScrollDimensions({scrollWidth:c,scrollHeight:h})}layout(e,t){this._scrollable.getDomNode().style.height=`${e}px`,this._scrollable.getDomNode().style.width=`${t}px`,this._scrollable.setScrollDimensions({width:t,height:e})}getHeightInLines(){return Math.min(17,this._lines)}getAriaLabel(e){let t="";switch(e.severity){case _.Wk.Error:t=S.uy("Error","Error");break;case _.Wk.Warning:t=S.uy("Warning","Warning");break;case _.Wk.Info:t=S.uy("Info","Info");break;case _.Wk.Hint:t=S.uy("Hint","Hint")}let i=S.uy("marker aria","{0} at {1}. ",t,e.startLineNumber+":"+e.startColumn);const n=this._editor.getModel();if(n&&e.startLineNumber<=n.getLineCount()&&e.startLineNumber>=1){i=`${n.getLineContent(e.startLineNumber)}, ${i}`}return i}}let V=class e extends T.GA{constructor(e,t,i,n,r,s,a){super(e,{showArrow:!0,showFrame:!0,isAccessible:!0,frameWidth:1},r),this._themeService=t,this._openerService=i,this._menuService=n,this._contextKeyService=s,this._labelService=a,this._callOnDispose=new o.Y1,this._onDidSelectRelatedInformation=new h.sl,this.onDidSelectRelatedInformation=this._onDidSelectRelatedInformation.event,this._severity=_.Wk.Warning,this._backgroundColor=I.gC.white,this._applyTheme(t.getColorTheme()),this._callOnDispose.add(t.onDidColorThemeChange(this._applyTheme.bind(this))),this.create()}_applyTheme(e){this._backgroundColor=e.getColor(X);let t=$,i=q;this._severity===_.Wk.Warning?(t=Z,i=Y):this._severity===_.Wk.Info&&(t=J,i=Q);const n=e.getColor(t),o=e.getColor(i);this.style({arrowColor:n,frameColor:n,headerBackgroundColor:o,primaryHeadingColor:e.getColor(T.mu),secondaryHeadingColor:e.getColor(T.Ax)})}_applyStyles(){this._parentContainer&&(this._parentContainer.style.backgroundColor=this._backgroundColor?this._backgroundColor.toString():""),super._applyStyles()}dispose(){this._callOnDispose.dispose(),super.dispose()}_fillHead(t){super._fillHead(t),this._disposables.add(this._actionbarWidget.actionRunner.onWillRun((e=>this.editor.focus())));const i=[],n=this._menuService.createMenu(e.TitleMenu,this._contextKeyService);(0,N.Uh)(n,void 0,i),this._actionbarWidget.push(i,{label:!1,icon:!0,index:0}),n.dispose()}_fillTitleIcon(e){this._icon=R.IR(e,R.$(""))}_fillBody(e){this._parentContainer=e,e.classList.add("marker-widget"),this._parentContainer.tabIndex=0,this._parentContainer.setAttribute("role","tooltip"),this._container=document.createElement("div"),e.appendChild(this._container),this._message=new G(this._container,this.editor,(e=>this._onDidSelectRelatedInformation.fire(e)),this._openerService,this._labelService),this._disposables.add(this._message)}show(){throw new Error("call showAtMarker")}showAtMarker(e,t,i){this._container.classList.remove("stale"),this._message.update(e),this._severity=e.severity,this._applyTheme(this._themeService.getColorTheme());const n=d.E.lift(e),o=this.editor.getPosition(),r=o&&n.containsPosition(o)?o:n.getStartPosition();super.show(r,this.computeRequiredHeight());const s=this.editor.getModel();if(s){const e=i>1?S.uy("problems","{0} of {1} problems",t,i):S.uy("change","{0} of {1} problem",t,i);this.setTitle((0,L.g1)(s.uri),e)}this._icon.className=`codicon ${K.k.className(_.Wk.toSeverity(this._severity))}`,this.editor.revealPositionNearTop(r,0),this.editor.focus()}updateMarker(e){this._container.classList.remove("stale"),this._message.update(e)}showStale(){this._container.classList.add("stale"),this._relayout()}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._heightInPixel=e,this._message.layout(e,t),this._container.style.height=`${e}px`}_onWidth(e){this._message.layout(this._heightInPixel,e)}_relayout(){super._relayout(this.computeRequiredHeight())}computeRequiredHeight(){return 3+this._message.getHeightInLines()}};V.TitleMenu=new x.e("gotoErrorTitleMenu"),V=U([B(1,W.q0),B(2,F.gP),B(3,x.gZ),B(4,m.U9),B(5,D.KK),B(6,O.O)],V);const z=(0,A.K2P)(A.o5h,A.EJM),j=(0,A.K2P)(A.g1m,A.uo9),H=(0,A.K2P)(A.khI,A.gd_),$=(0,A.ScB)("editorMarkerNavigationError.background",{dark:z,light:z,hcDark:A.ivo,hcLight:A.ivo},S.uy("editorMarkerNavigationError","Editor marker navigation widget error color.")),q=(0,A.ScB)("editorMarkerNavigationError.headerBackground",{dark:(0,A.K_B)($,.1),light:(0,A.K_B)($,.1),hcDark:null,hcLight:null},S.uy("editorMarkerNavigationErrorHeaderBackground","Editor marker navigation widget error heading background.")),Z=(0,A.ScB)("editorMarkerNavigationWarning.background",{dark:j,light:j,hcDark:A.ivo,hcLight:A.ivo},S.uy("editorMarkerNavigationWarning","Editor marker navigation widget warning color.")),Y=(0,A.ScB)("editorMarkerNavigationWarning.headerBackground",{dark:(0,A.K_B)(Z,.1),light:(0,A.K_B)(Z,.1),hcDark:"#0C141F",hcLight:(0,A.K_B)(Z,.2)},S.uy("editorMarkerNavigationWarningBackground","Editor marker navigation widget warning heading background.")),J=(0,A.ScB)("editorMarkerNavigationInfo.background",{dark:H,light:H,hcDark:A.ivo,hcLight:A.ivo},S.uy("editorMarkerNavigationInfo","Editor marker navigation widget info color.")),Q=(0,A.ScB)("editorMarkerNavigationInfo.headerBackground",{dark:(0,A.K_B)(J,.1),light:(0,A.K_B)(J,.1),hcDark:null,hcLight:null},S.uy("editorMarkerNavigationInfoHeaderBackground","Editor marker navigation widget info heading background.")),X=(0,A.ScB)("editorMarkerNavigation.background",{dark:A.eyL,light:A.eyL,hcDark:A.eyL,hcLight:A.eyL},S.uy("editorMarkerNavigationBackground","Editor marker navigation widget background."));var ee=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},te=function(e,t){return function(i,n){t(i,n,e)}},ie=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{d(n.next(e))}catch(e){r(e)}}function a(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}d((n=n.apply(e,t||[])).next())}))};let ne=class e{static get(t){return t.getContribution(e.ID)}constructor(e,t,i,n,r){this._markerNavigationService=t,this._contextKeyService=i,this._editorService=n,this._instantiationService=r,this._sessionDispoables=new o.Y1,this._editor=e,this._widgetVisible=ae.bindTo(this._contextKeyService)}dispose(){this._cleanUp(),this._sessionDispoables.dispose()}_cleanUp(){this._widgetVisible.reset(),this._sessionDispoables.clear(),this._widget=void 0,this._model=void 0}_getOrCreateModel(e){if(this._model&&this._model.matches(e))return this._model;let t=!1;return this._model&&(t=!0,this._cleanUp()),this._model=this._markerNavigationService.getMarkerList(e),t&&this._model.move(!0,this._editor.getModel(),this._editor.getPosition()),this._widget=this._instantiationService.createInstance(V,this._editor),this._widget.onDidClose((()=>this.close()),this,this._sessionDispoables),this._widgetVisible.set(!0),this._sessionDispoables.add(this._model),this._sessionDispoables.add(this._widget),this._sessionDispoables.add(this._editor.onDidChangeCursorPosition((e=>{var t,i,n;(null===(t=this._model)||void 0===t?void 0:t.selected)&&d.E.containsPosition(null===(i=this._model)||void 0===i?void 0:i.selected.marker,e.position)||null===(n=this._model)||void 0===n||n.resetIndex()}))),this._sessionDispoables.add(this._model.onDidChange((()=>{if(!this._widget||!this._widget.position||!this._model)return;const e=this._model.find(this._editor.getModel().uri,this._widget.position);e?this._widget.updateMarker(e.marker):this._widget.showStale()}))),this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation((e=>{this._editorService.openCodeEditor({resource:e.resource,options:{pinned:!0,revealIfOpened:!0,selection:d.E.lift(e).collapseToStart()}},this._editor),this.close(!1)}))),this._sessionDispoables.add(this._editor.onDidChangeModel((()=>this._cleanUp()))),this._model}close(e=!0){this._cleanUp(),e&&this._editor.focus()}showAtMarker(e){if(this._editor.hasModel()){const t=this._getOrCreateModel(this._editor.getModel().uri);t.resetIndex(),t.move(!0,this._editor.getModel(),new a.J(e.startLineNumber,e.startColumn)),t.selected&&this._widget.showAtMarker(t.selected.marker,t.selected.index,t.selected.total)}}nagivate(t,i){var n,o;return ie(this,void 0,void 0,(function*(){if(this._editor.hasModel()){const r=this._getOrCreateModel(i?void 0:this._editor.getModel().uri);if(r.move(t,this._editor.getModel(),this._editor.getPosition()),!r.selected)return;if(r.selected.marker.resource.toString()!==this._editor.getModel().uri.toString()){this._cleanUp();const s=yield this._editorService.openCodeEditor({resource:r.selected.marker.resource,options:{pinned:!1,revealIfOpened:!0,selectionRevealType:2,selection:r.selected.marker}},this._editor);s&&(null===(n=e.get(s))||void 0===n||n.close(),null===(o=e.get(s))||void 0===o||o.nagivate(t,i))}else this._widget.showAtMarker(r.selected.marker,r.selected.index,r.selected.total)}}))}};ne.ID="editor.contrib.markerController",ne=ee([te(1,M),te(2,D.KK),te(3,s.i),te(4,m.U9)],ne);class oe extends r.ay{constructor(e,t,i){super(i),this._next=e,this._multiFile=t}run(e,t){var i;return ie(this,void 0,void 0,(function*(){t.hasModel()&&(null===(i=ne.get(t))||void 0===i||i.nagivate(this._next,this._multiFile))}))}}class re extends oe{constructor(){super(!0,!1,{id:re.ID,label:re.LABEL,alias:"Go to Next Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:c.y.focus,primary:578,weight:100},menuOpts:{menuId:V.TitleMenu,title:re.LABEL,icon:(0,E._n)("marker-navigation-next",n.C.arrowDown,S.uy("nextMarkerIcon","Icon for goto next marker.")),group:"navigation",order:1}})}}re.ID="editor.action.marker.next",re.LABEL=S.uy("markerAction.next.label","Go to Next Problem (Error, Warning, Info)");class se extends oe{constructor(){super(!1,!1,{id:se.ID,label:se.LABEL,alias:"Go to Previous Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:c.y.focus,primary:1602,weight:100},menuOpts:{menuId:V.TitleMenu,title:se.LABEL,icon:(0,E._n)("marker-navigation-previous",n.C.arrowUp,S.uy("previousMarkerIcon","Icon for goto previous marker.")),group:"navigation",order:2}})}}se.ID="editor.action.marker.prev",se.LABEL=S.uy("markerAction.previous.label","Go to Previous Problem (Error, Warning, Info)");(0,r._U)(ne.ID,ne,4),(0,r.K_)(re),(0,r.K_)(se),(0,r.K_)(class extends oe{constructor(){super(!0,!0,{id:"editor.action.marker.nextInFiles",label:S.uy("markerAction.nextInFiles.label","Go to Next Problem in Files (Error, Warning, Info)"),alias:"Go to Next Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:c.y.focus,primary:66,weight:100},menuOpts:{menuId:x.e.MenubarGoMenu,title:S.uy({key:"miGotoNextProblem",comment:["&& denotes a mnemonic"]},"Next &&Problem"),group:"6_problem_nav",order:1}})}}),(0,r.K_)(class extends oe{constructor(){super(!1,!0,{id:"editor.action.marker.prevInFiles",label:S.uy("markerAction.previousInFiles.label","Go to Previous Problem in Files (Error, Warning, Info)"),alias:"Go to Previous Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:c.y.focus,primary:1090,weight:100},menuOpts:{menuId:x.e.MenubarGoMenu,title:S.uy({key:"miGotoPreviousProblem",comment:["&& denotes a mnemonic"]},"Previous &&Problem"),group:"6_problem_nav",order:2}})}});const ae=new D.uS("markersNavigationVisible",!1),de=r.gd.bindToContribution(ne.get);(0,r.SU)(new de({id:"closeMarkersNavigation",precondition:ae,handler:e=>e.close(),kbOpts:{weight:150,kbExpr:c.y.focus,primary:9,secondary:[1033]}}))},67156:function(e,t,i){"use strict";i.d(t,{oY:function(){return ie},Ux:function(){return te},__:function(){return ee}});var n=i(13100),o=i(52040),r=i(81564),s=i(84140),a=i(58776),d=i(96196),c=i(70660),l=i(66692),h=i(25136),u=i(27440),g=i(85432),p=i(57648),f=i(4400),m=i(90836),_=i(25900),v=i(62688),y=i(21868),w=i(74192),k=i(50420),b=i(39048),M=i(33127),C=i(38744),S=i(93636),x=i(47004),D=i(34572),E=i(26272),R=i(70296),P=i(41972),I=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},L=function(e,t){return function(i,n){t(i,n,e)}};const T=new S.uS("hasSymbols",!1,(0,C.uy)("hasSymbols","Whether there are symbol locations that can be navigated via keyboard-only.")),N=(0,D.eA)("ISymbolNavigationService");let O=class{constructor(e,t,i,n){this._editorService=t,this._notificationService=i,this._keybindingService=n,this._currentModel=void 0,this._currentIdx=-1,this._ignoreEditorChange=!1,this._ctxHasSymbols=T.bindTo(e)}reset(){var e,t;this._ctxHasSymbols.reset(),null===(e=this._currentState)||void 0===e||e.dispose(),null===(t=this._currentMessage)||void 0===t||t.dispose(),this._currentModel=void 0,this._currentIdx=-1}put(e){const t=e.parent.parent;if(t.references.length<=1)return void this.reset();this._currentModel=t,this._currentIdx=t.references.indexOf(e),this._ctxHasSymbols.set(!0),this._showMessage();const i=new F(this._editorService),n=i.onDidChange((e=>{if(this._ignoreEditorChange)return;const i=this._editorService.getActiveCodeEditor();if(!i)return;const n=i.getModel(),o=i.getPosition();if(!n||!o)return;let r=!1,s=!1;for(const e of t.references)if((0,M.Ev)(e.uri,n.uri))r=!0,s=s||m.E.containsPosition(e.range,o);else if(r)break;r&&s||this.reset()}));this._currentState=(0,b.x7)(i,n)}revealNext(e){if(!this._currentModel)return Promise.resolve();this._currentIdx+=1,this._currentIdx%=this._currentModel.references.length;const t=this._currentModel.references[this._currentIdx];return this._showMessage(),this._ignoreEditorChange=!0,this._editorService.openCodeEditor({resource:t.uri,options:{selection:m.E.collapseToStart(t.range),selectionRevealType:3}},e).finally((()=>{this._ignoreEditorChange=!1}))}_showMessage(){var e;null===(e=this._currentMessage)||void 0===e||e.dispose();const t=this._keybindingService.lookupKeybinding("editor.gotoNextSymbolFromResult"),i=t?(0,C.uy)("location.kb","Symbol {0} of {1}, {2} for next",this._currentIdx+1,this._currentModel.references.length,t.getLabel()):(0,C.uy)("location","Symbol {0} of {1}",this._currentIdx+1,this._currentModel.references.length);this._currentMessage=this._notificationService.status(i)}};O=I([L(0,S.KK),L(1,g.i),L(2,P.sx),L(3,E.M)],O),(0,x.G)(N,O,1),(0,u.SU)(new class extends u.gd{constructor(){super({id:"editor.gotoNextSymbolFromResult",precondition:T,kbOpts:{weight:100,primary:70}})}runEditorCommand(e,t){return e.get(N).revealNext(t)}}),R.y.registerCommandAndKeybindingRule({id:"editor.gotoNextSymbolFromResult.cancel",weight:100,when:T,primary:9,handler(e){e.get(N).reset()}});let F=class{constructor(e){this._listener=new Map,this._disposables=new b.Y1,this._onDidChange=new k.sl,this.onDidChange=this._onDidChange.event,this._disposables.add(e.onCodeEditorRemove(this._onDidRemoveEditor,this)),this._disposables.add(e.onCodeEditorAdd(this._onDidAddEditor,this)),e.listCodeEditors().forEach(this._onDidAddEditor,this)}dispose(){this._disposables.dispose(),this._onDidChange.dispose(),(0,b.Mt)(this._listener.values())}_onDidAddEditor(e){this._listener.set(e,(0,b.x7)(e.onDidChangeCursorPosition((t=>this._onDidChange.fire({editor:e}))),e.onDidChangeModelContent((t=>this._onDidChange.fire({editor:e})))))}_onDidRemoveEditor(e){var t;null===(t=this._listener.get(e))||void 0===t||t.dispose(),this._listener.delete(e)}};F=I([L(0,g.i)],F);var K,A,W,U,B,G,V,z,j=i(88436),H=i(73808),$=i(39548),q=i(8296),Z=i(77483),Y=i(55736),J=i(42792),Q=i(37096),X=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{d(n.next(e))}catch(e){r(e)}}function a(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}d((n=n.apply(e,t||[])).next())}))};$.e8.appendMenuItem($.e.EditorContext,{submenu:$.e.EditorContextPeek,title:C.uy("peek.submenu","Peek"),group:"navigation",order:100});class ee{static is(e){return!(!e||"object"!=typeof e)&&(e instanceof ee||!(!f.J.isIPosition(e.position)||!e.model))}constructor(e,t){this.model=e,this.position=t}}class te extends u.CA{static all(){return te._allSymbolNavigationCommands.values()}static _patchConfig(e){const t=Object.assign(Object.assign({},e),{f1:!0});if(t.menu)for(const i of Q.C.wrap(t.menu))i.id!==$.e.EditorContext&&i.id!==$.e.EditorContextPeek||(i.when=S.cU.and(e.precondition,i.when));return t}constructor(e,t){super(te._patchConfig(t)),this.configuration=e,te._allSymbolNavigationCommands.set(t.id,this)}runEditorCommand(e,t,i,n){if(!t.hasModel())return Promise.resolve(void 0);const s=e.get(P.sx),a=e.get(g.i),d=e.get(Z.qA),c=e.get(N),h=e.get(J.w),u=e.get(D.U9),p=t.getModel(),f=t.getPosition(),m=ee.is(i)?i:new ee(p,f),_=new l.wz(t,5),v=(0,r.mE)(this._getLocationModel(h,m.model,m.position,_.token),_.token).then((e=>X(this,void 0,void 0,(function*(){var r;if(!e||_.token.isCancellationRequested)return;let s;if((0,o.Qb)(e.ariaMessage),e.referenceAt(p.uri,f)){const e=this._getAlternativeCommand(t);!te._activeAlternativeCommands.has(e)&&te._allSymbolNavigationCommands.has(e)&&(s=te._allSymbolNavigationCommands.get(e))}const d=e.references.length;if(0===d){if(!this.configuration.muteMessage){const e=p.getWordAtPosition(f);null===(r=j.I.get(t))||void 0===r||r.showMessage(this._getNoResultFoundMessage(e),f)}}else{if(1!==d||!s)return this._onResult(a,c,t,e,n);te._activeAlternativeCommands.add(this.desc.id),u.invokeFunction((e=>s.runEditorCommand(e,t,i,n).finally((()=>{te._activeAlternativeCommands.delete(this.desc.id)}))))}}))),(e=>{s.error(e)})).finally((()=>{_.dispose()}));return d.showWhile(v,250),v}_onResult(e,t,i,n,o){return X(this,void 0,void 0,(function*(){const r=this._getGoToPreference(i);if(i instanceof p.g||!(this.configuration.openInPeek||"peek"===r&&n.references.length>1)){const s=n.firstReference(),a=n.references.length>1&&"gotoAndPeek"===r,d=yield this._openReference(i,e,s,this.configuration.openToSide,!a);a&&d?this._openInPeek(d,n,o):n.dispose(),"goto"===r&&t.put(s)}else this._openInPeek(i,n,o)}))}_openReference(e,t,i,n,o){return X(this,void 0,void 0,(function*(){let r;if((0,v.KY)(i)&&(r=i.targetSelectionRange),r||(r=i.range),!r)return;const s=yield t.openCodeEditor({resource:i.uri,options:{selection:m.E.collapseToStart(r),selectionRevealType:3,selectionSource:"code.jump"}},e,n);if(s){if(o){const e=s.getModel(),t=s.createDecorationsCollection([{range:r,options:{description:"symbol-navigate-action-highlight",className:"symbolHighlight"}}]);setTimeout((()=>{s.getModel()===e&&t.clear()}),350)}return s}}))}_openInPeek(e,t,i){const n=y.G.get(e);n&&e.hasModel()?n.toggleWidget(null!=i?i:e.getSelection(),(0,r.ec)((e=>Promise.resolve(t))),this.configuration.openInPeek):t.dispose()}}te._allSymbolNavigationCommands=new Map,te._activeAlternativeCommands=new Set;class ie extends te{_getLocationModel(e,t,i,n){return X(this,void 0,void 0,(function*(){return new w.kx(yield(0,Y.G4)(e.definitionProvider,t,i,n),C.uy("def.title","Definitions"))}))}_getNoResultFoundMessage(e){return e&&e.word?C.uy("noResultWord","No definition found for '{0}'",e.word):C.uy("generic.noResults","No definition found")}_getAlternativeCommand(e){return e.getOption(56).alternativeDefinitionCommand}_getGoToPreference(e){return e.getOption(56).multipleDefinitions}}const ne=a.e6&&!(0,n.isStandalone)()?2118:70;(0,$.oN)(((K=class e extends ie{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:e.id,title:{value:C.uy("actions.goToDecl.label","Go to Definition"),original:"Go to Definition",mnemonicTitle:C.uy({key:"miGotoDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Definition")},precondition:S.cU.and(_.y.hasDefinitionProvider,_.y.isInWalkThroughSnippet.toNegated()),keybinding:{when:_.y.editorTextFocus,primary:ne,weight:100},menu:[{id:$.e.EditorContext,group:"navigation",order:1.1},{id:$.e.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:2}]}),q.y.registerCommandAlias("editor.action.goToDeclaration",e.id)}}).id="editor.action.revealDefinition",K)),(0,$.oN)(((A=class e extends ie{constructor(){super({openToSide:!0,openInPeek:!1,muteMessage:!1},{id:e.id,title:{value:C.uy("actions.goToDeclToSide.label","Open Definition to the Side"),original:"Open Definition to the Side"},precondition:S.cU.and(_.y.hasDefinitionProvider,_.y.isInWalkThroughSnippet.toNegated()),keybinding:{when:_.y.editorTextFocus,primary:(0,s.uS)(2089,ne),weight:100}}),q.y.registerCommandAlias("editor.action.openDeclarationToTheSide",e.id)}}).id="editor.action.revealDefinitionAside",A)),(0,$.oN)(((W=class e extends ie{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:e.id,title:{value:C.uy("actions.previewDecl.label","Peek Definition"),original:"Peek Definition"},precondition:S.cU.and(_.y.hasDefinitionProvider,H.Kc.notInPeekEditor,_.y.isInWalkThroughSnippet.toNegated()),keybinding:{when:_.y.editorTextFocus,primary:582,linux:{primary:3140},weight:100},menu:{id:$.e.EditorContextPeek,group:"peek",order:2}}),q.y.registerCommandAlias("editor.action.previewDeclaration",e.id)}}).id="editor.action.peekDefinition",W));class oe extends te{_getLocationModel(e,t,i,n){return X(this,void 0,void 0,(function*(){return new w.kx(yield(0,Y.ke)(e.declarationProvider,t,i,n),C.uy("decl.title","Declarations"))}))}_getNoResultFoundMessage(e){return e&&e.word?C.uy("decl.noResultWord","No declaration found for '{0}'",e.word):C.uy("decl.generic.noResults","No declaration found")}_getAlternativeCommand(e){return e.getOption(56).alternativeDeclarationCommand}_getGoToPreference(e){return e.getOption(56).multipleDeclarations}}(0,$.oN)(((U=class e extends oe{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:e.id,title:{value:C.uy("actions.goToDeclaration.label","Go to Declaration"),original:"Go to Declaration",mnemonicTitle:C.uy({key:"miGotoDeclaration",comment:["&& denotes a mnemonic"]},"Go to &&Declaration")},precondition:S.cU.and(_.y.hasDeclarationProvider,_.y.isInWalkThroughSnippet.toNegated()),menu:[{id:$.e.EditorContext,group:"navigation",order:1.3},{id:$.e.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:3}]})}_getNoResultFoundMessage(e){return e&&e.word?C.uy("decl.noResultWord","No declaration found for '{0}'",e.word):C.uy("decl.generic.noResults","No declaration found")}}).id="editor.action.revealDeclaration",U)),(0,$.oN)(class extends oe{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.peekDeclaration",title:{value:C.uy("actions.peekDecl.label","Peek Declaration"),original:"Peek Declaration"},precondition:S.cU.and(_.y.hasDeclarationProvider,H.Kc.notInPeekEditor,_.y.isInWalkThroughSnippet.toNegated()),menu:{id:$.e.EditorContextPeek,group:"peek",order:3}})}});class re extends te{_getLocationModel(e,t,i,n){return X(this,void 0,void 0,(function*(){return new w.kx(yield(0,Y.sf)(e.typeDefinitionProvider,t,i,n),C.uy("typedef.title","Type Definitions"))}))}_getNoResultFoundMessage(e){return e&&e.word?C.uy("goToTypeDefinition.noResultWord","No type definition found for '{0}'",e.word):C.uy("goToTypeDefinition.generic.noResults","No type definition found")}_getAlternativeCommand(e){return e.getOption(56).alternativeTypeDefinitionCommand}_getGoToPreference(e){return e.getOption(56).multipleTypeDefinitions}}(0,$.oN)(((B=class e extends re{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:e.ID,title:{value:C.uy("actions.goToTypeDefinition.label","Go to Type Definition"),original:"Go to Type Definition",mnemonicTitle:C.uy({key:"miGotoTypeDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Type Definition")},precondition:S.cU.and(_.y.hasTypeDefinitionProvider,_.y.isInWalkThroughSnippet.toNegated()),keybinding:{when:_.y.editorTextFocus,primary:0,weight:100},menu:[{id:$.e.EditorContext,group:"navigation",order:1.4},{id:$.e.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:3}]})}}).ID="editor.action.goToTypeDefinition",B)),(0,$.oN)(((G=class e extends re{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:e.ID,title:{value:C.uy("actions.peekTypeDefinition.label","Peek Type Definition"),original:"Peek Type Definition"},precondition:S.cU.and(_.y.hasTypeDefinitionProvider,H.Kc.notInPeekEditor,_.y.isInWalkThroughSnippet.toNegated()),menu:{id:$.e.EditorContextPeek,group:"peek",order:4}})}}).ID="editor.action.peekTypeDefinition",G));class se extends te{_getLocationModel(e,t,i,n){return X(this,void 0,void 0,(function*(){return new w.kx(yield(0,Y.E3)(e.implementationProvider,t,i,n),C.uy("impl.title","Implementations"))}))}_getNoResultFoundMessage(e){return e&&e.word?C.uy("goToImplementation.noResultWord","No implementation found for '{0}'",e.word):C.uy("goToImplementation.generic.noResults","No implementation found")}_getAlternativeCommand(e){return e.getOption(56).alternativeImplementationCommand}_getGoToPreference(e){return e.getOption(56).multipleImplementations}}(0,$.oN)(((V=class e extends se{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:e.ID,title:{value:C.uy("actions.goToImplementation.label","Go to Implementations"),original:"Go to Implementations",mnemonicTitle:C.uy({key:"miGotoImplementation",comment:["&& denotes a mnemonic"]},"Go to &&Implementations")},precondition:S.cU.and(_.y.hasImplementationProvider,_.y.isInWalkThroughSnippet.toNegated()),keybinding:{when:_.y.editorTextFocus,primary:2118,weight:100},menu:[{id:$.e.EditorContext,group:"navigation",order:1.45},{id:$.e.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:4}]})}}).ID="editor.action.goToImplementation",V)),(0,$.oN)(((z=class e extends se{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:e.ID,title:{value:C.uy("actions.peekImplementation.label","Peek Implementations"),original:"Peek Implementations"},precondition:S.cU.and(_.y.hasImplementationProvider,H.Kc.notInPeekEditor,_.y.isInWalkThroughSnippet.toNegated()),keybinding:{when:_.y.editorTextFocus,primary:3142,weight:100},menu:{id:$.e.EditorContextPeek,group:"peek",order:5}})}}).ID="editor.action.peekImplementation",z));class ae extends te{_getNoResultFoundMessage(e){return e?C.uy("references.no","No references found for '{0}'",e.word):C.uy("references.noGeneric","No references found")}_getAlternativeCommand(e){return e.getOption(56).alternativeReferenceCommand}_getGoToPreference(e){return e.getOption(56).multipleReferences}}(0,$.oN)(class extends ae{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:"editor.action.goToReferences",title:{value:C.uy("goToReferences.label","Go to References"),original:"Go to References",mnemonicTitle:C.uy({key:"miGotoReference",comment:["&& denotes a mnemonic"]},"Go to &&References")},precondition:S.cU.and(_.y.hasReferenceProvider,H.Kc.notInPeekEditor,_.y.isInWalkThroughSnippet.toNegated()),keybinding:{when:_.y.editorTextFocus,primary:1094,weight:100},menu:[{id:$.e.EditorContext,group:"navigation",order:1.45},{id:$.e.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:5}]})}_getLocationModel(e,t,i,n){return X(this,void 0,void 0,(function*(){return new w.kx(yield(0,Y.Gf)(e.referenceProvider,t,i,!0,n),C.uy("ref.title","References"))}))}}),(0,$.oN)(class extends ae{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.referenceSearch.trigger",title:{value:C.uy("references.action.label","Peek References"),original:"Peek References"},precondition:S.cU.and(_.y.hasReferenceProvider,H.Kc.notInPeekEditor,_.y.isInWalkThroughSnippet.toNegated()),menu:{id:$.e.EditorContextPeek,group:"peek",order:6}})}_getLocationModel(e,t,i,n){return X(this,void 0,void 0,(function*(){return new w.kx(yield(0,Y.Gf)(e.referenceProvider,t,i,!1,n),C.uy("ref.title","References"))}))}});class de extends te{constructor(e,t,i){super(e,{id:"editor.action.goToLocation",title:{value:C.uy("label.generic","Go to Any Symbol"),original:"Go to Any Symbol"},precondition:S.cU.and(H.Kc.notInPeekEditor,_.y.isInWalkThroughSnippet.toNegated())}),this._references=t,this._gotoMultipleBehaviour=i}_getLocationModel(e,t,i,n){return X(this,void 0,void 0,(function*(){return new w.kx(this._references,C.uy("generic.title","Locations"))}))}_getNoResultFoundMessage(e){return e&&C.uy("generic.noResult","No results for '{0}'",e.word)||""}_getGoToPreference(e){var t;return null!==(t=this._gotoMultipleBehaviour)&&void 0!==t?t:e.getOption(56).multipleReferences}_getAlternativeCommand(){return""}}q.y.registerCommand({id:"editor.action.goToLocations",description:{description:"Go to locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:c.K},{name:"position",description:"The position at which to start",constraint:f.J.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"},{name:"noResultsMessage",description:"Human readable message that shows when locations is empty."}]},handler:(e,t,i,n,o,r,s)=>X(void 0,void 0,void 0,(function*(){(0,d.GE)(c.K.isUri(t)),(0,d.GE)(f.J.isIPosition(i)),(0,d.GE)(Array.isArray(n)),(0,d.GE)(void 0===o||"string"==typeof o),(0,d.GE)(void 0===s||"boolean"==typeof s);const a=e.get(g.i),l=yield a.openCodeEditor({resource:t},a.getFocusedCodeEditor());if((0,h.cF)(l))return l.setPosition(i),l.revealPositionInCenterIfOutsideViewport(i,0),l.invokeWithinContext((e=>{const t=new class extends de{_getNoResultFoundMessage(e){return r||super._getNoResultFoundMessage(e)}}({muteMessage:!Boolean(r),openInPeek:Boolean(s),openToSide:!1},n,o);e.get(D.U9).invokeFunction(t.run.bind(t),l)}))}))}),q.y.registerCommand({id:"editor.action.peekLocations",description:{description:"Peek locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:c.K},{name:"position",description:"The position at which to start",constraint:f.J.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"}]},handler:(e,t,i,n,o)=>X(void 0,void 0,void 0,(function*(){e.get(q.a).executeCommand("editor.action.goToLocations",t,i,n,o,void 0,!0)}))}),q.y.registerCommand({id:"editor.action.findReferences",handler:(e,t,i)=>{(0,d.GE)(c.K.isUri(t)),(0,d.GE)(f.J.isIPosition(i));const n=e.get(J.w),o=e.get(g.i);return o.openCodeEditor({resource:t},o.getFocusedCodeEditor()).then((e=>{if(!(0,h.cF)(e)||!e.hasModel())return;const t=y.G.get(e);if(!t)return;const o=(0,r.ec)((t=>(0,Y.Gf)(n.referenceProvider,e.getModel(),f.J.lift(i),!1,t).then((e=>new w.kx(e,C.uy("ref.title","References")))))),s=new m.E(i.lineNumber,i.column,i.lineNumber,i.column);return Promise.resolve(t.toggleWidget(s,o,!1))}))}}),q.y.registerCommandAlias("editor.action.showReferences","editor.action.peekLocations")},55736:function(e,t,i){"use strict";i.d(t,{E3:function(){return g},G4:function(){return h},Gf:function(){return f},ke:function(){return u},sf:function(){return p}});var n=i(14372),o=i(31972),r=i(32096),s=i(27440),a=i(42792),d=i(74192),c=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{d(n.next(e))}catch(e){r(e)}}function a(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}d((n=n.apply(e,t||[])).next())}))};function l(e,t,i,o){return c(this,void 0,void 0,(function*(){const s=i.ordered(e).map((i=>Promise.resolve(o(i,e,t)).then(void 0,(e=>{(0,r.i4)(e)})))),a=yield Promise.all(s);return(0,n.oN)(a.flat())}))}function h(e,t,i,n){return l(t,i,e,((e,t,i)=>e.provideDefinition(t,i,n)))}function u(e,t,i,n){return l(t,i,e,((e,t,i)=>e.provideDeclaration(t,i,n)))}function g(e,t,i,n){return l(t,i,e,((e,t,i)=>e.provideImplementation(t,i,n)))}function p(e,t,i,n){return l(t,i,e,((e,t,i)=>e.provideTypeDefinition(t,i,n)))}function f(e,t,i,n,o){return l(t,i,e,((e,t,i)=>c(this,void 0,void 0,(function*(){const r=yield e.provideReferences(t,i,{includeDeclaration:!0},o);if(!n||!r||2!==r.length)return r;const s=yield e.provideReferences(t,i,{includeDeclaration:!1},o);return s&&1===s.length?s:r}))))}function m(e){return c(this,void 0,void 0,(function*(){const t=yield e(),i=new d.kx(t,""),n=i.references.map((e=>e.link));return i.dispose(),n}))}(0,s.oz)("_executeDefinitionProvider",((e,t,i)=>{const n=h(e.get(a.w).definitionProvider,t,i,o.I.None);return m((()=>n))})),(0,s.oz)("_executeTypeDefinitionProvider",((e,t,i)=>{const n=p(e.get(a.w).typeDefinitionProvider,t,i,o.I.None);return m((()=>n))})),(0,s.oz)("_executeDeclarationProvider",((e,t,i)=>{const n=u(e.get(a.w).declarationProvider,t,i,o.I.None);return m((()=>n))})),(0,s.oz)("_executeReferenceProvider",((e,t,i)=>{const n=f(e.get(a.w).referenceProvider,t,i,!1,o.I.None);return m((()=>n))})),(0,s.oz)("_executeImplementationProvider",((e,t,i)=>{const n=g(e.get(a.w).implementationProvider,t,i,o.I.None);return m((()=>n))}))},85308:function(e,t,i){"use strict";i.d(t,{kh:function(){return h}});var n=i(50420),o=i(39048),r=i(58776);function s(e,t){return!!e[t]}class a{constructor(e,t){this.target=e.target,this.isLeftClick=e.event.leftButton,this.isMiddleClick=e.event.middleButton,this.isRightClick=e.event.rightButton,this.hasTriggerModifier=s(e.event,t.triggerModifier),this.hasSideBySideModifier=s(e.event,t.triggerSideBySideModifier),this.isNoneOrSingleMouseDown=e.event.detail<=1}}class d{constructor(e,t){this.keyCodeIsTriggerKey=e.keyCode===t.triggerKey,this.keyCodeIsSideBySideKey=e.keyCode===t.triggerSideBySideKey,this.hasTriggerModifier=s(e,t.triggerModifier)}}class c{constructor(e,t,i,n){this.triggerKey=e,this.triggerModifier=t,this.triggerSideBySideKey=i,this.triggerSideBySideModifier=n}equals(e){return this.triggerKey===e.triggerKey&&this.triggerModifier===e.triggerModifier&&this.triggerSideBySideKey===e.triggerSideBySideKey&&this.triggerSideBySideModifier===e.triggerSideBySideModifier}}function l(e){return"altKey"===e?r.sv?new c(57,"metaKey",6,"altKey"):new c(5,"ctrlKey",6,"altKey"):r.sv?new c(6,"altKey",57,"metaKey"):new c(6,"altKey",5,"ctrlKey")}class h extends o.CC{constructor(e,t){super(),this._onMouseMoveOrRelevantKeyDown=this._register(new n.sl),this.onMouseMoveOrRelevantKeyDown=this._onMouseMoveOrRelevantKeyDown.event,this._onExecute=this._register(new n.sl),this.onExecute=this._onExecute.event,this._onCancel=this._register(new n.sl),this.onCancel=this._onCancel.event,this._editor=e,this._alwaysFireExecuteOnMouseUp=t,this._opts=l(this._editor.getOption(75)),this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._register(this._editor.onDidChangeConfiguration((e=>{if(e.hasChanged(75)){const e=l(this._editor.getOption(75));if(this._opts.equals(e))return;this._opts=e,this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._onCancel.fire()}}))),this._register(this._editor.onMouseMove((e=>this._onEditorMouseMove(new a(e,this._opts))))),this._register(this._editor.onMouseDown((e=>this._onEditorMouseDown(new a(e,this._opts))))),this._register(this._editor.onMouseUp((e=>this._onEditorMouseUp(new a(e,this._opts))))),this._register(this._editor.onKeyDown((e=>this._onEditorKeyDown(new d(e,this._opts))))),this._register(this._editor.onKeyUp((e=>this._onEditorKeyUp(new d(e,this._opts))))),this._register(this._editor.onMouseDrag((()=>this._resetHandler()))),this._register(this._editor.onDidChangeCursorSelection((e=>this._onDidChangeCursorSelection(e)))),this._register(this._editor.onDidChangeModel((e=>this._resetHandler()))),this._register(this._editor.onDidChangeModelContent((()=>this._resetHandler()))),this._register(this._editor.onDidScrollChange((e=>{(e.scrollTopChanged||e.scrollLeftChanged)&&this._resetHandler()})))}_onDidChangeCursorSelection(e){e.selection&&e.selection.startColumn!==e.selection.endColumn&&this._resetHandler()}_onEditorMouseMove(e){this._lastMouseMoveEvent=e,this._onMouseMoveOrRelevantKeyDown.fire([e,null])}_onEditorMouseDown(e){this._hasTriggerKeyOnMouseDown=e.hasTriggerModifier,this._lineNumberOnMouseDown=e.target.position?e.target.position.lineNumber:0}_onEditorMouseUp(e){const t=e.target.position?e.target.position.lineNumber:0;(this._hasTriggerKeyOnMouseDown&&this._lineNumberOnMouseDown&&this._lineNumberOnMouseDown===t||this._alwaysFireExecuteOnMouseUp)&&this._onExecute.fire(e)}_onEditorKeyDown(e){this._lastMouseMoveEvent&&(e.keyCodeIsTriggerKey||e.keyCodeIsSideBySideKey&&e.hasTriggerModifier)?this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent,e]):e.hasTriggerModifier&&this._onCancel.fire()}_onEditorKeyUp(e){e.keyCodeIsTriggerKey&&this._onCancel.fire()}_resetHandler(){this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._onCancel.fire()}}},34608:function(e,t,i){"use strict";i.d(t,{y:function(){return C}});var n=i(81564),o=i(32096),r=i(50580),s=i(39048),a=i(96196),d=(i(60367),i(66692)),c=i(27440),l=i(90836),h=i(96372),u=i(30092),g=i(85308),p=i(73808),f=i(38744),m=i(93636),_=i(67156),v=i(55736),y=i(42792),w=i(33568),k=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},b=function(e,t){return function(i,n){t(i,n,e)}},M=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{d(n.next(e))}catch(e){r(e)}}function a(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}d((n=n.apply(e,t||[])).next())}))};let C=class e{constructor(e,t,i,n){this.textModelResolverService=t,this.languageService=i,this.languageFeaturesService=n,this.toUnhook=new s.Y1,this.toUnhookForKeyboard=new s.Y1,this.currentWordAtPosition=null,this.previousPromise=null,this.editor=e,this.linkDecorations=this.editor.createDecorationsCollection();const r=new g.kh(e);this.toUnhook.add(r),this.toUnhook.add(r.onMouseMoveOrRelevantKeyDown((([e,t])=>{this.startFindDefinitionFromMouse(e,(0,a.uy)(t))}))),this.toUnhook.add(r.onExecute((e=>{this.isEnabled(e)&&this.gotoDefinition(e.target.position,e.hasSideBySideModifier).catch((e=>{(0,o.eU)(e)})).finally((()=>{this.removeLinkDecorations()}))}))),this.toUnhook.add(r.onCancel((()=>{this.removeLinkDecorations(),this.currentWordAtPosition=null})))}static get(t){return t.getContribution(e.ID)}startFindDefinitionFromCursor(e){return M(this,void 0,void 0,(function*(){yield this.startFindDefinition(e),this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition((()=>{this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear()}))),this.toUnhookForKeyboard.add(this.editor.onKeyDown((e=>{e&&(this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear())})))}))}startFindDefinitionFromMouse(e,t){if(9===e.target.type&&this.linkDecorations.length>0)return;if(!this.editor.hasModel()||!this.isEnabled(e,t))return this.currentWordAtPosition=null,void this.removeLinkDecorations();const i=e.target.position;this.startFindDefinition(i)}startFindDefinition(e){var t;return M(this,void 0,void 0,(function*(){this.toUnhookForKeyboard.clear();const i=e?null===(t=this.editor.getModel())||void 0===t?void 0:t.getWordAtPosition(e):null;if(!i)return this.currentWordAtPosition=null,void this.removeLinkDecorations();if(this.currentWordAtPosition&&this.currentWordAtPosition.startColumn===i.startColumn&&this.currentWordAtPosition.endColumn===i.endColumn&&this.currentWordAtPosition.word===i.word)return;this.currentWordAtPosition=i;const s=new d.E7(this.editor,15);let a;this.previousPromise&&(this.previousPromise.cancel(),this.previousPromise=null),this.previousPromise=(0,n.ec)((t=>this.findDefinition(e,t)));try{a=yield this.previousPromise}catch(e){return void(0,o.eU)(e)}if(!a||!a.length||!s.validate(this.editor))return void this.removeLinkDecorations();const c=a[0].originSelectionRange?l.E.lift(a[0].originSelectionRange):new l.E(e.lineNumber,i.startColumn,e.lineNumber,i.endColumn);if(a.length>1){let e=c;for(const{originSelectionRange:t}of a)t&&(e=l.E.plusRange(e,t));this.addDecoration(e,(new r.qE).appendText(f.uy("multipleResults","Click to show {0} definitions.",a.length)))}else{const e=a[0];if(!e.uri)return;this.textModelResolverService.createModelReference(e.uri).then((t=>{if(!t.object||!t.object.textEditorModel)return void t.dispose();const{object:{textEditorModel:i}}=t,{startLineNumber:n}=e.range;if(n<1||n>i.getLineCount())return void t.dispose();const o=this.getPreviewValue(i,n,e),s=this.languageService.guessLanguageIdByFilepathOrFirstLine(i.uri);this.addDecoration(c,o?(new r.qE).appendCodeblock(s||"",o):void 0),t.dispose()}))}}))}getPreviewValue(t,i,n){let o=n.range;o.endLineNumber-o.startLineNumber>=e.MAX_SOURCE_PREVIEW_LINES&&(o=this.getPreviewRangeBasedOnIndentation(t,i));return this.stripIndentationFromPreviewRange(t,i,o)}stripIndentationFromPreviewRange(e,t,i){let n=e.getLineFirstNonWhitespaceColumn(t);for(let o=t+1;o<i.endLineNumber;o++){const t=e.getLineFirstNonWhitespaceColumn(o);n=Math.min(n,t)}return e.getValueInRange(i).replace(new RegExp(`^\\s{${n-1}}`,"gm"),"").trim()}getPreviewRangeBasedOnIndentation(t,i){const n=t.getLineFirstNonWhitespaceColumn(i),o=Math.min(t.getLineCount(),i+e.MAX_SOURCE_PREVIEW_LINES);let r=i+1;for(;r<o;r++){if(n===t.getLineFirstNonWhitespaceColumn(r))break}return new l.E(i,1,r+1,1)}addDecoration(e,t){const i={range:e,options:{description:"goto-definition-link",inlineClassName:"goto-definition-link",hoverMessage:t}};this.linkDecorations.set([i])}removeLinkDecorations(){this.linkDecorations.clear()}isEnabled(e,t){var i;return this.editor.hasModel()&&e.isLeftClick&&e.isNoneOrSingleMouseDown&&6===e.target.type&&!((null===(i=e.target.detail.injectedText)||void 0===i?void 0:i.options)instanceof w.Qj)&&(e.hasTriggerModifier||!!t&&t.keyCodeIsTriggerKey)&&this.languageFeaturesService.definitionProvider.has(this.editor.getModel())}findDefinition(e,t){const i=this.editor.getModel();return i?(0,v.G4)(this.languageFeaturesService.definitionProvider,i,e,t):Promise.resolve(null)}gotoDefinition(e,t){return this.editor.setPosition(e),this.editor.invokeWithinContext((e=>{const i=!t&&this.editor.getOption(84)&&!this.isInPeekEditor(e);return new _.oY({openToSide:t,openInPeek:i,muteMessage:!0},{title:{value:"",original:""},id:"",precondition:void 0}).run(e)}))}isInPeekEditor(e){const t=e.get(m.KK);return p.Kc.inPeekEditor.getValue(t)}dispose(){this.toUnhook.dispose(),this.toUnhookForKeyboard.dispose()}};C.ID="editor.contrib.gotodefinitionatposition",C.MAX_SOURCE_PREVIEW_LINES=8,C=k([b(1,u.B),b(2,h.P),b(3,y.w)],C),(0,c._U)(C.ID,C,2)},21868:function(e,t,i){"use strict";i.d(t,{G:function(){return le}});var n=i(81564),o=i(32096),r=i(84140),s=i(39048),a=i(85432),d=i(4400),c=i(90836),l=i(73808),h=i(38744),u=i(8296),g=i(91188),p=i(93636),f=i(34572),m=i(70296),_=i(15696),v=i(41972),y=i(67520),w=i(74192),k=i(69040),b=i(77460),M=i(54752),C=i(50420),S=i(34656),x=i(33127),D=(i(35416),i(57648)),E=i(33568),R=i(71456),P=i(41936),I=i(96372),L=i(30092),T=i(50808),N=i(60432),O=i(43308),F=i(17060),K=i(26272),A=i(33432),W=i(82760),U=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},B=function(e,t){return function(i,n){t(i,n,e)}};let G=class{constructor(e){this._resolverService=e}hasChildren(e){return e instanceof w.kx||e instanceof w.Oo}getChildren(e){if(e instanceof w.kx)return e.groups;if(e instanceof w.Oo)return e.resolve(this._resolverService).then((e=>e.children));throw new Error("bad tree")}};G=U([B(0,L.B)],G);class V{getHeight(){return 23}getTemplateId(e){return e instanceof w.Oo?$.id:Z.id}}let z=class{constructor(e){this._keybindingService=e}getKeyboardNavigationLabel(e){var t;if(e instanceof w.cL){const i=null===(t=e.parent.getPreview(e))||void 0===t?void 0:t.preview(e.range);if(i)return i.value}return(0,x.g1)(e.uri)}};z=U([B(0,K.M)],z);class j{getId(e){return e instanceof w.cL?e.id:e.uri}}let H=class extends s.CC{constructor(e,t){super(),this._labelService=t;const i=document.createElement("div");i.classList.add("reference-file"),this.file=this._register(new O.M(i,{supportHighlights:!0})),this.badge=new T.M(k.IR(i,k.$(".count")),{},W.kr),e.appendChild(i)}set(e,t){const i=(0,x.Jl)(e.uri);this.file.setLabel(this._labelService.getUriBasenameLabel(e.uri),this._labelService.getUriLabel(i,{relative:!0}),{title:this._labelService.getUriLabel(e.uri),matches:t});const n=e.children.length;this.badge.setCount(n),n>1?this.badge.setTitleFormat((0,h.uy)("referencesCount","{0} references",n)):this.badge.setTitleFormat((0,h.uy)("referenceCount","{0} reference",n))}};H=U([B(1,A.O)],H);let $=class e{constructor(t){this._instantiationService=t,this.templateId=e.id}renderTemplate(e){return this._instantiationService.createInstance(H,e)}renderElement(e,t,i){i.set(e.element,(0,F.oB)(e.filterData))}disposeTemplate(e){e.dispose()}};$.id="FileReferencesRenderer",$=U([B(0,f.U9)],$);class q{constructor(e){this.label=new N._(e)}set(e,t){var i;const n=null===(i=e.parent.getPreview(e))||void 0===i?void 0:i.preview(e.range);if(n&&n.value){const{value:e,highlight:i}=n;t&&!F.Sg.isDefault(t)?(this.label.element.classList.toggle("referenceMatch",!1),this.label.set(e,(0,F.oB)(t))):(this.label.element.classList.toggle("referenceMatch",!0),this.label.set(e,[i]))}else this.label.set(`${(0,x.g1)(e.uri)}:${e.range.startLineNumber+1}:${e.range.startColumn+1}`)}}class Z{constructor(){this.templateId=Z.id}renderTemplate(e){return new q(e)}renderElement(e,t,i){i.set(e.element,e.filterData)}disposeTemplate(){}}Z.id="OneReferenceRenderer";class Y{getWidgetAriaLabel(){return(0,h.uy)("treeAriaLabel","References")}getAriaLabel(e){return e.ariaMessage}}var J=i(68992),Q=i(66052),X=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},ee=function(e,t){return function(i,n){t(i,n,e)}},te=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{d(n.next(e))}catch(e){r(e)}}function a(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}d((n=n.apply(e,t||[])).next())}))};class ie{constructor(e,t){this._editor=e,this._model=t,this._decorations=new Map,this._decorationIgnoreSet=new Set,this._callOnDispose=new s.Y1,this._callOnModelChange=new s.Y1,this._callOnDispose.add(this._editor.onDidChangeModel((()=>this._onModelChanged()))),this._onModelChanged()}dispose(){this._callOnModelChange.dispose(),this._callOnDispose.dispose(),this.removeDecorations()}_onModelChanged(){this._callOnModelChange.clear();const e=this._editor.getModel();if(e)for(const t of this._model.references)if(t.uri.toString()===e.uri.toString())return void this._addDecorations(t.parent)}_addDecorations(e){if(!this._editor.hasModel())return;this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations((()=>this._onDecorationChanged())));const t=[],i=[];for(let n=0,o=e.children.length;n<o;n++){const o=e.children[n];this._decorationIgnoreSet.has(o.id)||o.uri.toString()===this._editor.getModel().uri.toString()&&(t.push({range:o.range,options:ie.DecorationOptions}),i.push(n))}this._editor.changeDecorations((n=>{const o=n.deltaDecorations([],t);for(let t=0;t<o.length;t++)this._decorations.set(o[t],e.children[i[t]])}))}_onDecorationChanged(){const e=[],t=this._editor.getModel();if(t){for(const[i,n]of this._decorations){const o=t.getDecorationRange(i);if(!o)continue;let r=!1;if(!c.E.equalsRange(o,n.range)){if(c.E.spansMultipleLines(o))r=!0;else{n.range.endColumn-n.range.startColumn!==o.endColumn-o.startColumn&&(r=!0)}r?(this._decorationIgnoreSet.add(n.id),e.push(i)):n.range=o}}for(let t=0,i=e.length;t<i;t++)this._decorations.delete(e[t]);this._editor.removeDecorations(e)}}removeDecorations(){this._editor.removeDecorations([...this._decorations.keys()]),this._decorations.clear()}}ie.DecorationOptions=E.uw.register({description:"reference-decoration",stickiness:1,className:"reference-decoration"});class ne{constructor(){this.ratio=.7,this.heightInLines=18}static fromJSON(e){let t,i;try{const n=JSON.parse(e);t=n.ratio,i=n.heightInLines}catch(e){}return{ratio:t||.7,heightInLines:i||18}}}class oe extends _.KS{}let re=class extends l.GA{constructor(e,t,i,n,o,r,a,d,c,l,h,u){super(e,{showFrame:!1,showArrow:!0,isResizeable:!0,isAccessible:!0,supportOnTitleClick:!0},r),this._defaultTreeKeyboardSupport=t,this.layoutData=i,this._textModelResolverService=o,this._instantiationService=r,this._peekViewService=a,this._uriLabel=d,this._undoRedoService=c,this._keybindingService=l,this._languageService=h,this._languageConfigurationService=u,this._disposeOnNewModel=new s.Y1,this._callOnDispose=new s.Y1,this._onDidSelectReference=new C.sl,this.onDidSelectReference=this._onDidSelectReference.event,this._dim=new k.Ml(0,0),this._applyTheme(n.getColorTheme()),this._callOnDispose.add(n.onDidColorThemeChange(this._applyTheme.bind(this))),this._peekViewService.addExclusiveWidget(e,this),this.create()}dispose(){this.setModel(void 0),this._callOnDispose.dispose(),this._disposeOnNewModel.dispose(),(0,s.Mt)(this._preview),(0,s.Mt)(this._previewNotAvailableMessage),(0,s.Mt)(this._tree),(0,s.Mt)(this._previewModelReference),this._splitView.dispose(),super.dispose()}_applyTheme(e){const t=e.getColor(l.Ai)||M.gC.transparent;this.style({arrowColor:t,frameColor:t,headerBackgroundColor:e.getColor(l.mE)||M.gC.transparent,primaryHeadingColor:e.getColor(l.mu),secondaryHeadingColor:e.getColor(l.Ax)})}show(e){super.show(e,this.layoutData.heightInLines||18)}focusOnReferenceTree(){this._tree.domFocus()}focusOnPreviewEditor(){this._preview.focus()}isPreviewEditorFocused(){return this._preview.hasTextFocus()}_onTitleClick(e){this._preview&&this._preview.getModel()&&this._onDidSelectReference.fire({element:this._getFocusedReference(),kind:e.ctrlKey||e.metaKey||e.altKey?"side":"open",source:"title"})}_fillBody(e){this.setCssClass("reference-zone-widget"),this._messageContainer=k.IR(e,k.$("div.messages")),k.WS(this._messageContainer),this._splitView=new b.s(e,{orientation:1}),this._previewContainer=k.IR(e,k.$("div.preview.inline"));this._preview=this._instantiationService.createInstance(D.g,this._previewContainer,{scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!1},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}},{},this.editor),k.WS(this._previewContainer),this._previewNotAvailableMessage=new E.mc(h.uy("missingPreviewMessage","no preview available"),P._G,E.mc.DEFAULT_CREATION_OPTIONS,null,this._undoRedoService,this._languageService,this._languageConfigurationService),this._treeContainer=k.IR(e,k.$("div.ref-tree.inline"));const t={keyboardSupport:this._defaultTreeKeyboardSupport,accessibilityProvider:new Y,keyboardNavigationLabelProvider:this._instantiationService.createInstance(z),identityProvider:new j,openOnSingleClick:!0,selectionNavigation:!0,overrideStyles:{listBackground:l.cl}};this._defaultTreeKeyboardSupport&&this._callOnDispose.add(k.IB(this._treeContainer,"keydown",(e=>{e.equals(9)&&(this._keybindingService.dispatchEvent(e,e.target),e.stopPropagation())}),!0)),this._tree=this._instantiationService.createInstance(oe,"ReferencesWidget",this._treeContainer,new V,[this._instantiationService.createInstance($),this._instantiationService.createInstance(Z)],this._instantiationService.createInstance(G),t),this._splitView.addView({onDidChange:C.im.None,element:this._previewContainer,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:e=>{this._preview.layout({height:this._dim.height,width:e})}},b.K.Distribute),this._splitView.addView({onDidChange:C.im.None,element:this._treeContainer,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:e=>{this._treeContainer.style.height=`${this._dim.height}px`,this._treeContainer.style.width=`${e}px`,this._tree.layout(this._dim.height,e)}},b.K.Distribute),this._disposables.add(this._splitView.onDidSashChange((()=>{this._dim.width&&(this.layoutData.ratio=this._splitView.getViewSize(0)/this._dim.width)}),void 0));const i=(e,t)=>{e instanceof w.cL&&("show"===t&&this._revealReference(e,!1),this._onDidSelectReference.fire({element:e,kind:t,source:"tree"}))};this._tree.onDidOpen((e=>{e.sideBySide?i(e.element,"side"):e.editorOptions.pinned?i(e.element,"goto"):i(e.element,"show")})),k.WS(this._treeContainer)}_onWidth(e){this._dim&&this._doLayoutBody(this._dim.height,e)}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._dim=new k.Ml(t,e),this.layoutData.heightInLines=this._viewZone?this._viewZone.heightInLines:this.layoutData.heightInLines,this._splitView.layout(t),this._splitView.resizeView(0,t*this.layoutData.ratio)}setSelection(e){return this._revealReference(e,!0).then((()=>{this._model&&(this._tree.setSelection([e]),this._tree.setFocus([e]))}))}setModel(e){return this._disposeOnNewModel.clear(),this._model=e,this._model?this._onNewModel():Promise.resolve()}_onNewModel(){return this._model?this._model.isEmpty?(this.setTitle(""),this._messageContainer.innerText=h.uy("noResults","No results"),k.WC(this._messageContainer),Promise.resolve(void 0)):(k.WS(this._messageContainer),this._decorationsManager=new ie(this._preview,this._model),this._disposeOnNewModel.add(this._decorationsManager),this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange((e=>this._tree.rerender(e)))),this._disposeOnNewModel.add(this._preview.onMouseDown((e=>{const{event:t,target:i}=e;if(2!==t.detail)return;const n=this._getFocusedReference();n&&this._onDidSelectReference.fire({element:{uri:n.uri,range:i.range},kind:t.ctrlKey||t.metaKey||t.altKey?"side":"open",source:"editor"})}))),this.container.classList.add("results-loaded"),k.WC(this._treeContainer),k.WC(this._previewContainer),this._splitView.layout(this._dim.width),this.focusOnReferenceTree(),this._tree.setInput(1===this._model.groups.length?this._model.groups[0]:this._model)):Promise.resolve(void 0)}_getFocusedReference(){const[e]=this._tree.getFocus();return e instanceof w.cL?e:e instanceof w.Oo&&e.children.length>0?e.children[0]:void 0}revealReference(e){return te(this,void 0,void 0,(function*(){yield this._revealReference(e,!1),this._onDidSelectReference.fire({element:e,kind:"goto",source:"tree"})}))}_revealReference(e,t){return te(this,void 0,void 0,(function*(){if(this._revealedReference===e)return;this._revealedReference=e,e.uri.scheme!==S.eg.inMemory?this.setTitle((0,x.Mx)(e.uri),this._uriLabel.getUriLabel((0,x.Jl)(e.uri))):this.setTitle(h.uy("peekView.alternateTitle","References"));const i=this._textModelResolverService.createModelReference(e.uri);this._tree.getInput()===e.parent||(t&&this._tree.reveal(e.parent),yield this._tree.expand(e.parent)),this._tree.reveal(e);const n=yield i;if(!this._model)return void n.dispose();(0,s.Mt)(this._previewModelReference);const o=n.object;if(o){const t=this._preview.getModel()===o.textEditorModel?0:1,i=c.E.lift(e.range).collapseToStart();this._previewModelReference=n,this._preview.setModel(o.textEditorModel),this._preview.setSelection(i),this._preview.revealRangeInCenter(i,t)}else this._preview.setModel(this._previewNotAvailableMessage),n.dispose()}))}};re=X([ee(3,J.q0),ee(4,L.B),ee(5,f.U9),ee(6,l.O2),ee(7,A.O),ee(8,Q.wp),ee(9,K.M),ee(10,I.P),ee(11,R.Gw)],re);var se=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},ae=function(e,t){return function(i,n){t(i,n,e)}},de=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{d(n.next(e))}catch(e){r(e)}}function a(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}d((n=n.apply(e,t||[])).next())}))};const ce=new p.uS("referenceSearchVisible",!1,h.uy("referenceSearchVisible","Whether reference peek is visible, like 'Peek References' or 'Peek Definition'"));let le=class e{static get(t){return t.getContribution(e.ID)}constructor(e,t,i,n,o,r,a,d){this._defaultTreeKeyboardSupport=e,this._editor=t,this._editorService=n,this._notificationService=o,this._instantiationService=r,this._storageService=a,this._configurationService=d,this._disposables=new s.Y1,this._requestIdPool=0,this._ignoreModelChangeEvent=!1,this._referenceSearchVisible=ce.bindTo(i)}dispose(){var e,t;this._referenceSearchVisible.reset(),this._disposables.dispose(),null===(e=this._widget)||void 0===e||e.dispose(),null===(t=this._model)||void 0===t||t.dispose(),this._widget=void 0,this._model=void 0}toggleWidget(e,t,i){let n;if(this._widget&&(n=this._widget.position),this.closeWidget(),n&&e.containsPosition(n))return;this._peekMode=i,this._referenceSearchVisible.set(!0),this._disposables.add(this._editor.onDidChangeModelLanguage((()=>{this.closeWidget()}))),this._disposables.add(this._editor.onDidChangeModel((()=>{this._ignoreModelChangeEvent||this.closeWidget()})));const o="peekViewLayout",r=ne.fromJSON(this._storageService.get(o,0,"{}"));this._widget=this._instantiationService.createInstance(re,this._editor,this._defaultTreeKeyboardSupport,r),this._widget.setTitle(h.uy("labelLoading","Loading...")),this._widget.show(e),this._disposables.add(this._widget.onDidClose((()=>{t.cancel(),this._widget&&(this._storageService.store(o,JSON.stringify(this._widget.layoutData),0,1),this._widget=void 0),this.closeWidget()}))),this._disposables.add(this._widget.onDidSelectReference((e=>{const{element:t,kind:n}=e;if(t)switch(n){case"open":"editor"===e.source&&this._configurationService.getValue("editor.stablePeek")||this.openReference(t,!1,!1);break;case"side":this.openReference(t,!0,!1);break;case"goto":i?this._gotoReference(t,!0):this.openReference(t,!1,!0)}})));const s=++this._requestIdPool;t.then((t=>{var i;if(s===this._requestIdPool&&this._widget)return null===(i=this._model)||void 0===i||i.dispose(),this._model=t,this._widget.setModel(this._model).then((()=>{if(this._widget&&this._model&&this._editor.hasModel()){this._model.isEmpty?this._widget.setMetaTitle(""):this._widget.setMetaTitle(h.uy("metaTitle.N","{0} ({1})",this._model.title,this._model.references.length));const t=this._editor.getModel().uri,i=new d.J(e.startLineNumber,e.startColumn),n=this._model.nearestReference(t,i);if(n)return this._widget.setSelection(n).then((()=>{this._widget&&"editor"===this._editor.getOption(83)&&this._widget.focusOnPreviewEditor()}))}}));t.dispose()}),(e=>{this._notificationService.error(e)}))}changeFocusBetweenPreviewAndReferences(){this._widget&&(this._widget.isPreviewEditorFocused()?this._widget.focusOnReferenceTree():this._widget.focusOnPreviewEditor())}goToNextOrPreviousReference(e){return de(this,void 0,void 0,(function*(){if(!this._editor.hasModel()||!this._model||!this._widget)return;const t=this._widget.position;if(!t)return;const i=this._model.nearestReference(this._editor.getModel().uri,t);if(!i)return;const n=this._model.nextOrPreviousReference(i,e),o=this._editor.hasTextFocus(),r=this._widget.isPreviewEditorFocused();yield this._widget.setSelection(n),yield this._gotoReference(n,!1),o?this._editor.focus():this._widget&&r&&this._widget.focusOnPreviewEditor()}))}revealReference(e){return de(this,void 0,void 0,(function*(){this._editor.hasModel()&&this._model&&this._widget&&(yield this._widget.revealReference(e))}))}closeWidget(e=!0){var t,i;null===(t=this._widget)||void 0===t||t.dispose(),null===(i=this._model)||void 0===i||i.dispose(),this._referenceSearchVisible.reset(),this._disposables.clear(),this._widget=void 0,this._model=void 0,e&&this._editor.focus(),this._requestIdPool+=1}_gotoReference(t,i){var r;null===(r=this._widget)||void 0===r||r.hide(),this._ignoreModelChangeEvent=!0;const s=c.E.lift(t.range).collapseToStart();return this._editorService.openCodeEditor({resource:t.uri,options:{selection:s,selectionSource:"code.jump",pinned:i}},this._editor).then((t=>{var i;if(this._ignoreModelChangeEvent=!1,t&&this._widget)if(this._editor===t)this._widget.show(s),this._widget.focusOnReferenceTree();else{const o=e.get(t),r=this._model.clone();this.closeWidget(),t.focus(),null==o||o.toggleWidget(s,(0,n.ec)((e=>Promise.resolve(r))),null!==(i=this._peekMode)&&void 0!==i&&i)}else this.closeWidget()}),(e=>{this._ignoreModelChangeEvent=!1,(0,o.eU)(e)}))}openReference(e,t,i){t||this.closeWidget();const{uri:n,range:o}=e;this._editorService.openCodeEditor({resource:n,options:{selection:o,selectionSource:"code.jump",pinned:i}},this._editor,t)}};function he(e,t){const i=(0,l.up)(e);if(!i)return;const n=le.get(i);n&&t(n)}le.ID="editor.contrib.referencesController",le=se([ae(2,p.KK),ae(3,a.i),ae(4,v.sx),ae(5,f.U9),ae(6,y.oJ),ae(7,g.Ci)],le),m.y.registerCommandAndKeybindingRule({id:"togglePeekWidgetFocus",weight:100,primary:(0,r.uS)(2089,60),when:p.cU.or(ce,l.Kc.inPeekEditor),handler(e){he(e,(e=>{e.changeFocusBetweenPreviewAndReferences()}))}}),m.y.registerCommandAndKeybindingRule({id:"goToNextReference",weight:90,primary:62,secondary:[70],when:p.cU.or(ce,l.Kc.inPeekEditor),handler(e){he(e,(e=>{e.goToNextOrPreviousReference(!0)}))}}),m.y.registerCommandAndKeybindingRule({id:"goToPreviousReference",weight:90,primary:1086,secondary:[1094],when:p.cU.or(ce,l.Kc.inPeekEditor),handler(e){he(e,(e=>{e.goToNextOrPreviousReference(!1)}))}}),u.y.registerCommandAlias("goToNextReferenceFromEmbeddedEditor","goToNextReference"),u.y.registerCommandAlias("goToPreviousReferenceFromEmbeddedEditor","goToPreviousReference"),u.y.registerCommandAlias("closeReferenceSearchEditor","closeReferenceSearch"),u.y.registerCommand("closeReferenceSearch",(e=>he(e,(e=>e.closeWidget())))),m.y.registerKeybindingRule({id:"closeReferenceSearch",weight:-1,primary:9,secondary:[1033],when:p.cU.and(l.Kc.inPeekEditor,p.cU.not("config.editor.stablePeek"))}),m.y.registerKeybindingRule({id:"closeReferenceSearch",weight:250,primary:9,secondary:[1033],when:p.cU.and(ce,p.cU.not("config.editor.stablePeek"))}),m.y.registerCommandAndKeybindingRule({id:"revealReference",weight:200,primary:3,mac:{primary:3,secondary:[2066]},when:p.cU.and(ce,_.Kk,_.pV.negate(),_.WW.negate()),handler(e){var t;const i=null===(t=e.get(_.yC).lastFocusedList)||void 0===t?void 0:t.getFocus();Array.isArray(i)&&i[0]instanceof w.cL&&he(e,(e=>e.revealReference(i[0])))}}),m.y.registerCommandAndKeybindingRule({id:"openReferenceToSide",weight:100,primary:2051,mac:{primary:259},when:p.cU.and(ce,_.Kk,_.pV.negate(),_.WW.negate()),handler(e){var t;const i=null===(t=e.get(_.yC).lastFocusedList)||void 0===t?void 0:t.getFocus();Array.isArray(i)&&i[0]instanceof w.cL&&he(e,(e=>e.openReference(i[0],!0,!0)))}}),u.y.registerCommand("openReference",(e=>{var t;const i=null===(t=e.get(_.yC).lastFocusedList)||void 0===t?void 0:t.getFocus();Array.isArray(i)&&i[0]instanceof w.cL&&he(e,(e=>e.openReference(i[0],!1,!0)))}))},74192:function(e,t,i){"use strict";i.d(t,{Oo:function(){return f},cL:function(){return g},kx:function(){return m}});var n=i(32096),o=i(50420),r=i(74224),s=i(39048),a=i(75736),d=i(33127),c=i(2443),l=i(90836),h=i(38744),u=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{d(n.next(e))}catch(e){r(e)}}function a(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}d((n=n.apply(e,t||[])).next())}))};class g{constructor(e,t,i,n){this.isProviderFirst=e,this.parent=t,this.link=i,this._rangeCallback=n,this.id=r.Y.nextId()}get uri(){return this.link.uri}get range(){var e,t;return null!==(t=null!==(e=this._range)&&void 0!==e?e:this.link.targetSelectionRange)&&void 0!==t?t:this.link.range}set range(e){this._range=e,this._rangeCallback(this)}get ariaMessage(){var e;const t=null===(e=this.parent.getPreview(this))||void 0===e?void 0:e.preview(this.range);return t?(0,h.uy)({key:"aria.oneReference.preview",comment:["Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code"]},"symbol in {0} on line {1} at column {2}, {3}",(0,d.g1)(this.uri),this.range.startLineNumber,this.range.startColumn,t.value):(0,h.uy)("aria.oneReference","symbol in {0} on line {1} at column {2}",(0,d.g1)(this.uri),this.range.startLineNumber,this.range.startColumn)}}class p{constructor(e){this._modelReference=e}dispose(){this._modelReference.dispose()}preview(e,t=8){const i=this._modelReference.object.textEditorModel;if(!i)return;const{startLineNumber:n,startColumn:o,endLineNumber:r,endColumn:s}=e,a=i.getWordUntilPosition({lineNumber:n,column:o-t}),d=new l.E(n,a.startColumn,n,o),c=new l.E(r,s,r,1073741824),h=i.getValueInRange(d).replace(/^\s+/,""),u=i.getValueInRange(e);return{value:h+u+i.getValueInRange(c).replace(/\s+$/,""),highlight:{start:h.length,end:h.length+u.length}}}}class f{constructor(e,t){this.parent=e,this.uri=t,this.children=[],this._previews=new a.CE}dispose(){(0,s.Mt)(this._previews.values()),this._previews.clear()}getPreview(e){return this._previews.get(e.uri)}get ariaMessage(){const e=this.children.length;return 1===e?(0,h.uy)("aria.fileReferences.1","1 symbol in {0}, full path {1}",(0,d.g1)(this.uri),this.uri.fsPath):(0,h.uy)("aria.fileReferences.N","{0} symbols in {1}, full path {2}",e,(0,d.g1)(this.uri),this.uri.fsPath)}resolve(e){return u(this,void 0,void 0,(function*(){if(0!==this._previews.size)return this;for(const t of this.children)if(!this._previews.has(t.uri))try{const i=yield e.createModelReference(t.uri);this._previews.set(t.uri,new p(i))}catch(e){(0,n.eU)(e)}return this}))}}class m{constructor(e,t){this.groups=[],this.references=[],this._onDidChangeReferenceRange=new o.sl,this.onDidChangeReferenceRange=this._onDidChangeReferenceRange.event,this._links=e,this._title=t;const[i]=e;let n;e.sort(m._compareReferences);for(const t of e)if(n&&d.MV.isEqual(n.uri,t.uri,!0)||(n=new f(this,t.uri),this.groups.push(n)),0===n.children.length||0!==m._compareReferences(t,n.children[n.children.length-1])){const e=new g(i===t,n,t,(e=>this._onDidChangeReferenceRange.fire(e)));this.references.push(e),n.children.push(e)}}dispose(){(0,s.Mt)(this.groups),this._onDidChangeReferenceRange.dispose(),this.groups.length=0}clone(){return new m(this._links,this._title)}get title(){return this._title}get isEmpty(){return 0===this.groups.length}get ariaMessage(){return this.isEmpty?(0,h.uy)("aria.result.0","No results found"):1===this.references.length?(0,h.uy)("aria.result.1","Found 1 symbol in {0}",this.references[0].uri.fsPath):1===this.groups.length?(0,h.uy)("aria.result.n1","Found {0} symbols in {1}",this.references.length,this.groups[0].uri.fsPath):(0,h.uy)("aria.result.nm","Found {0} symbols in {1} files",this.references.length,this.groups.length)}nextOrPreviousReference(e,t){const{parent:i}=e;let n=i.children.indexOf(e);const o=i.children.length,r=i.parent.groups.length;return 1===r||t&&n+1<o||!t&&n>0?(n=t?(n+1)%o:(n+o-1)%o,i.children[n]):(n=i.parent.groups.indexOf(i),t?(n=(n+1)%r,i.parent.groups[n].children[0]):(n=(n+r-1)%r,i.parent.groups[n].children[i.parent.groups[n].children.length-1]))}nearestReference(e,t){const i=this.references.map(((i,n)=>({idx:n,prefixLen:c.Qj(i.uri.toString(),e.toString()),offsetDist:100*Math.abs(i.range.startLineNumber-t.lineNumber)+Math.abs(i.range.startColumn-t.column)}))).sort(((e,t)=>e.prefixLen>t.prefixLen?-1:e.prefixLen<t.prefixLen?1:e.offsetDist<t.offsetDist?-1:e.offsetDist>t.offsetDist?1:0))[0];if(i)return this.references[i.idx]}referenceAt(e,t){for(const i of this.references)if(i.uri.toString()===e.toString()&&l.E.containsPosition(i.range,t))return i}firstReference(){for(const e of this.references)if(e.isProviderFirst)return e;return this.references[0]}static _compareReferences(e,t){return d.MV.compare(e.uri,t.uri)||l.E.compareRangesUsingStarts(e.range,t.range)}}},76500:function(e,t,i){var n=i(22108),o=i(24044);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,""]]);var r={insert:"head",singleton:!1};n(o,r);e.exports=o.locals||{}},60367:function(e,t,i){var n=i(22108),o=i(75520);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,""]]);var r={insert:"head",singleton:!1};n(o,r);e.exports=o.locals||{}},35416:function(e,t,i){var n=i(22108),o=i(52852);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,""]]);var r={insert:"head",singleton:!1};n(o,r);e.exports=o.locals||{}},24044:function(e,t,i){(e.exports=i(22587)(!1)).push([e.id,"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n/* marker zone */\n\n.monaco-editor .peekview-widget .head .peekview-title .severity-icon {\n\tdisplay: inline-block;\n\tvertical-align: text-top;\n\tmargin-right: 4px;\n}\n\n.monaco-editor .marker-widget {\n\ttext-overflow: ellipsis;\n\twhite-space: nowrap;\n}\n\n.monaco-editor .marker-widget > .stale {\n\topacity: 0.6;\n\tfont-style: italic;\n}\n\n.monaco-editor .marker-widget .title {\n\tdisplay: inline-block;\n\tpadding-right: 5px;\n}\n\n.monaco-editor .marker-widget .descriptioncontainer {\n\tposition: absolute;\n\twhite-space: pre;\n\tuser-select: text;\n\t-webkit-user-select: text;\n\tpadding: 8px 12px 0 20px;\n}\n\n.monaco-editor .marker-widget .descriptioncontainer .message {\n\tdisplay: flex;\n\tflex-direction: column;\n}\n\n.monaco-editor .marker-widget .descriptioncontainer .message .details {\n\tpadding-left: 6px;\n}\n\n.monaco-editor .marker-widget .descriptioncontainer .message .source,\n.monaco-editor .marker-widget .descriptioncontainer .message span.code {\n\topacity: 0.6;\n}\n\n.monaco-editor .marker-widget .descriptioncontainer .message a.code-link {\n\topacity: 0.6;\n\tcolor: inherit;\n}\n\n.monaco-editor .marker-widget .descriptioncontainer .message a.code-link:before {\n\tcontent: '(';\n}\n\n.monaco-editor .marker-widget .descriptioncontainer .message a.code-link:after {\n\tcontent: ')';\n}\n\n.monaco-editor .marker-widget .descriptioncontainer .message a.code-link > span {\n\ttext-decoration: underline;\n\t/** Hack to force underline to show **/\n\tborder-bottom: 1px solid transparent;\n\ttext-underline-position: under;\n\tcolor: var(--vscode-textLink-foreground);\n}\n\n.monaco-editor .marker-widget .descriptioncontainer .message a.code-link > span {\n\tcolor: var(--vscode-textLink-activeForeground);\n}\n\n.monaco-editor .marker-widget .descriptioncontainer .filename {\n\tcursor: pointer;\n}\n",""])},75520:function(e,t,i){(e.exports=i(22587)(!1)).push([e.id,"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n.monaco-editor .goto-definition-link {\n\ttext-decoration: underline;\n\tcursor: pointer;\n\tcolor: var(--vscode-editorLink-activeForeground) !important;\n}\n",""])},52852:function(e,t,i){(e.exports=i(22587)(!1)).push([e.id,"/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n/* -- zone widget */\n.monaco-editor .zone-widget .zone-widget-container.reference-zone-widget {\n\tborder-top-width: 1px;\n\tborder-bottom-width: 1px;\n}\n\n.monaco-editor .reference-zone-widget .inline {\n\tdisplay: inline-block;\n\tvertical-align: top;\n}\n\n.monaco-editor .reference-zone-widget .messages {\n\theight: 100%;\n\twidth: 100%;\n\ttext-align: center;\n\tpadding: 3em 0;\n}\n\n.monaco-editor .reference-zone-widget .ref-tree {\n\tline-height: 23px;\n\tbackground-color: var(--vscode-peekViewResult-background);\n\tcolor: var(--vscode-peekViewResult-lineForeground);\n}\n\n.monaco-editor .reference-zone-widget .ref-tree .reference {\n\ttext-overflow: ellipsis;\n\toverflow: hidden;\n}\n\n.monaco-editor .reference-zone-widget .ref-tree .reference-file {\n\tdisplay: inline-flex;\n\twidth: 100%;\n\theight: 100%;\n\tcolor: var(--vscode-peekViewResult-fileForeground);\n}\n\n.monaco-editor .reference-zone-widget .ref-tree .monaco-list:focus .selected .reference-file {\n\tcolor: inherit !important;\n}\n\n.monaco-editor .reference-zone-widget .ref-tree .monaco-list:focus .monaco-list-rows > .monaco-list-row.selected:not(.highlighted) {\n\tbackground-color: var(--vscode-peekViewResult-selectionBackground);\n\tcolor: var(--vscode-peekViewResult-selectionForeground) !important;\n}\n\n.monaco-editor .reference-zone-widget .ref-tree .reference-file .count {\n\tmargin-right: 12px;\n\tmargin-left: auto;\n}\n\n.monaco-editor .reference-zone-widget .ref-tree .referenceMatch .highlight {\n\tbackground-color: var(--vscode-peekViewResult-matchHighlightBackground);\n}\n\n.monaco-editor .reference-zone-widget .preview .reference-decoration {\n\tbackground-color: var(--vscode-peekViewEditor-matchHighlightBackground);\n\tborder: 2px solid var(--vscode-peekViewEditor-matchHighlightBorder);\n\tbox-sizing: border-box;\n}\n\n.monaco-editor .reference-zone-widget .preview .monaco-editor .monaco-editor-background,\n.monaco-editor .reference-zone-widget .preview .monaco-editor .inputarea.ime-input {\n\tbackground-color: var(--vscode-peekViewEditor-background);\n}\n\n.monaco-editor .reference-zone-widget .preview .monaco-editor .margin {\n\tbackground-color: var(--vscode-peekViewEditorGutter-background);\n}\n\n/* High Contrast Theming */\n\n.monaco-editor.hc-black .reference-zone-widget .ref-tree .reference-file,\n.monaco-editor.hc-light .reference-zone-widget .ref-tree .reference-file {\n\tfont-weight: bold;\n}\n\n.monaco-editor.hc-black .reference-zone-widget .ref-tree .referenceMatch .highlight,\n.monaco-editor.hc-light .reference-zone-widget .ref-tree .referenceMatch .highlight {\n\tborder: 1px dotted var(--vscode-contrastActiveBorder, transparent);\n\tbox-sizing: border-box;\n}\n",""])}}]);