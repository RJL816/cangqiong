"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackJsonp_bos-platform"] = self["webpackJsonp_bos-platform"] || []).push([[3320],{

/***/ "./src/action/actionname/control/modelDesigner/client/index.js":
/*!*********************************************************************!*\
  !*** ./src/action/actionname/control/modelDesigner/client/index.js ***!
  \*********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\n\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.TABLE_CLICK = exports.DESIGNERBAR_CLICK = exports.BTN_EDIT_CLICK = void 0;\n/**\n * showdoc\n * @catalog 控件指令/模型设计器/客户端\n * @title 设计器操作按钮点击\n * @description 点击设计器暂存、提交时发送请求\n * @ctrl_type 模型设计器\n * @method designerBarClick\n * @platform PC\n * @eg [{\"key\":\"datamodeldesignerap\",\"methodName\":\"designerBarClick\",\"args\":[\"submit\",\"\"],\"postData\":[{},[]]}]\n * @eg_p key string 控件的标识\n * @eg_p methodname string 方法名\n * @eg_p args array 参数列表\n * @version 6.0.0\n * @author haoshuo_chen\n */\nvar DESIGNERBAR_CLICK = exports.DESIGNERBAR_CLICK = 'designerBarClick';\nvar TABLE_CLICK = exports.TABLE_CLICK = 'tableClick';\n/**\n * showdoc\n * @catalog 控件指令/模型设计器/客户端\n * @title 设计器属性点击弹窗\n * @description btnEdit类型的属性，点击...时发送的请求\n * @ctrl_type 模型设计器\n * @method click\n * @platform PC\n * @eg [{\"key\":\"datamodeldesignerap\",\"methodName\":\"click\",\"args\":[\"Le07oIc9ie\",\"dmmeta\",\"RelStart\",{\"form\":{\"formId\":\"bos_dm_startnode\"},\"value\":{\"ParentId\":\"VTNfQyERcC\",\"_Type_\":\"RelNode\",\"Id\":\"kM1ObZ25dF\",\"RelTableId\":\"jgZmdH0W8U\"},\"context\":[{\"ParentId\":\"46UC+/6MGD0W\",\"TableName\":\"tk_kdtest_table2\",\"_Type_\":\"TableAp\",\"Id\":\"jgZmdH0W8U\",\"Key\":\"tk_kdtest_table2\",\"Name\":\"表\"},{\"ParentId\":\"jgZmdH0W8U\",\"ColumnName\":\"fk_kdtest_ffield_1\",\"_Type_\":\"ColumnAp\",\"ColumnType\":1,\"ColumnLength\":50,\"Id\":\"46UFYMOX1PRY\",\"ColumnPrimaryKey\":true,\"Key\":\"fk_kdtest_ffield_1\",\"Name\":\"fk_kdtest_ffield_1\"},{\"IndexName\":\"index_1\",\"ParentId\":\"jgZmdH0W8U\",\"IndexColumnAps\":[{\"ParentId\":\"46UFZ15Y+MQB\",\"_Type_\":\"RefColumnAp\",\"DMRefId\":\"46UFYMOX1PRY\",\"Id\":\"46UFZB+Y8SE=\"}],\"TableName\":\"tk_kdtest_table2\",\"_Type_\":\"IndexAp\",\"Id\":\"46UFZ15Y+MQB\",\"Key\":\"index_1\",\"Name\":\"index_1\"},{\"ParentId\":\"jgZmdH0W8U\",\"TableName\":\"tk_kdtest_table2\",\"_Type_\":\"PrimaryKeyAp\",\"PkColumnList\":[{\"ParentId\":\"46UFYW=OWSZV\",\"_Type_\":\"RefColumnAp\",\"DMRefId\":\"46UFYMOX1PRY\",\"Id\":\"46UFZB/05M=J\"}],\"Id\":\"46UFYW=OWSZV\",\"PK\":\"pk_1\",\"Key\":\"pk_1\",\"Name\":\"pk_1\"}],\"item\":{\"Id\":\"Le07oIc9ie\",\"_Type_\":\"RelationShipAp\"}}],\"postData\":[{},[]]}]\n * @eg_p key string 控件的标识\n * @eg_p methodname string 方法名\n * @eg_p args array 参数列表\n * @version 6.0.0\n * @author haoshuo_chen\n */\nvar BTN_EDIT_CLICK = exports.BTN_EDIT_CLICK = 'click';\n\n//# sourceURL=webpack://bos-platform/./src/action/actionname/control/modelDesigner/client/index.js?");

/***/ }),

/***/ "./src/action/actionname/control/modelDesigner/server/index.js":
/*!*********************************************************************!*\
  !*** ./src/action/actionname/control/modelDesigner/server/index.js ***!
  \*********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\n\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.SET_TABLE_INFO = exports.SET_PROPERTY = exports.SET_DESIGNERBAR_VISIBLE = exports.OPEN = void 0;\n/**\n * showdoc\n * @catalog 控件指令/模型设计器/服务端\n * @title 打开设计器元数据\n * @description 设置设计器的data数据到前端\n * @ctrl_type 模型设计器\n * @method open\n * @platform PC\n * @eg {\"p\":[{\"key\":\"datamodeldesignerap\",\"methodname\":\"open\",\"args\":[\"PhysicalDataModel\", {\"dmmeta\":{}, \"mergeVersion\": \"\"}],\"a\":\"InvokeControlMethod\"}\n * @eg_p key string 控件的标识\n * @eg_p methodname string 方法名\n * @eg_p args array 参数列表\n * @version 6.0.0\n * @author haoshuo_chen\n */\nvar OPEN = exports.OPEN = 'open';\nvar SET_TABLE_INFO = exports.SET_TABLE_INFO = 'setTableInfo';\n\n/**\n * showdoc\n * @catalog 控件指令/模型设计器/服务端\n * @title 设置设计器按钮可见性\n * @description 可动态设置表格列定义、可见性等属性\n * @ctrl_type 模型设计器\n * @method setDesignerBarVisible\n * @platform PC\n * @eg {\"p\":[{\"key\":\"datamodeldesignerap\",\"methodname\":\"setDesignerBarVisible\",\"args\":[{\"keys\":[\"submit\"], \"visible\":false}],\"a\":\"InvokeControlMethod\"}\n * @eg_p key string 控件的标识\n * @eg_p methodname string 方法名\n * @eg_p args array 参数列表\n * @version 6.0.0\n * @author haoshuo_chen\n */\nvar SET_DESIGNERBAR_VISIBLE = exports.SET_DESIGNERBAR_VISIBLE = 'setDesignerBarVisible';\n\n/**\n * showdoc\n * @catalog 控件指令/模型设计器/服务端\n * @title 设置关系连线的起点/终点\n * @description 可动态设置模型设计器中关系连线的起点/终点\n * @ctrl_type 模型设计器\n * @method setProperty\n * @platform PC\n * @eg {\"p\":[{\"key\":\"datamodeldesignerap\",\"methodname\":\"setProperty\",\"args\":[{itemId: \"UgiEpwVxxx\", propertyName: \"RelStart\", metatype: \"dmmeta\", value: {_Type_: \"RelNode\",…}}],\"a\":\"InvokeControlMethod\"}\n * @eg_p key string 控件的标识\n * @eg_p methodname string 方法名\n * @eg_p args array 参数列表\n * @version 6.0.0\n * @author xiaojing_yu\n */\nvar SET_PROPERTY = exports.SET_PROPERTY = 'setProperty';\n\n//# sourceURL=webpack://bos-platform/./src/action/actionname/control/modelDesigner/server/index.js?");

/***/ }),

/***/ "./src/action/modelDesignerAction.js":
/*!*******************************************!*\
  !*** ./src/action/modelDesignerAction.js ***!
  \*******************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\n\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.tableClick = exports.designerBarClick = exports.btnEditClick = void 0;\nvar _action = __webpack_require__(/*! ./action */ \"./src/action/action.js\");\nvar _appModelFunction = __webpack_require__(/*! @/model/appModelFunction */ \"./src/model/appModelFunction.js\");\nvar _client = __webpack_require__(/*! @/action/actionname/control/modelDesigner/client */ \"./src/action/actionname/control/modelDesigner/client/index.js\");\nvar designerBarClick = exports.designerBarClick = function designerBarClick(model, key) {\n  return function (dispatch, getState) {\n    var postData = (0, _appModelFunction.getPost)(model.pageId)(getState());\n    (0, _action.invokeControlService)(model, _client.DESIGNERBAR_CLICK, [key], postData, dispatch);\n  };\n};\nvar tableClick = exports.tableClick = function tableClick(model, table, fields) {\n  return function (dispatch, getState) {\n    var postData = (0, _appModelFunction.getPost)(model.pageId)(getState());\n    (0, _action.invokeControlService)(model, _client.TABLE_CLICK, [{\n      table: table,\n      fields: fields\n    }], postData, dispatch);\n  };\n};\nvar btnEditClick = exports.btnEditClick = function btnEditClick(model, params) {\n  return function (dispatch, getState) {\n    var postData = (0, _appModelFunction.getPost)(model.pageId)(getState());\n    (0, _action.invokeControlService)(model, _client.BTN_EDIT_CLICK, params, postData, dispatch);\n  };\n};\n\n//# sourceURL=webpack://bos-platform/./src/action/modelDesignerAction.js?");

/***/ }),

/***/ "./src/component/web/KDModelDesigner/DesignerHeader.jsx":
/*!**************************************************************!*\
  !*** ./src/component/web/KDModelDesigner/DesignerHeader.jsx ***!
  \**************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\n\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = DesignerHeader;\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.includes.js */ \"../../node_modules/core-js/modules/es.array.includes.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.string.includes.js */ \"../../node_modules/core-js/modules/es.string.includes.js\");\nvar _react = _interopRequireWildcard(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _DesignerHeader = _interopRequireDefault(__webpack_require__(/*! ./DesignerHeader.less */ \"./src/component/web/KDModelDesigner/DesignerHeader.less\"));\nvar _kdproformdesigner_logo = _interopRequireDefault(__webpack_require__(/*! @/component/web/img/default/kdproformdesigner_logo.png */ \"./src/component/web/img/default/kdproformdesigner_logo.png\"));\nvar _kdproformdesigner_logo_en_US = _interopRequireDefault(__webpack_require__(/*! @/component/web/img/default/kdproformdesigner_logo_en_US.png */ \"./src/component/web/img/default/kdproformdesigner_logo_en_US.png\"));\nvar _intlApi = __webpack_require__(/*! @/i18n/intlApi */ \"./src/i18n/intlApi.js\");\nvar _classnames = _interopRequireDefault(__webpack_require__(/*! classnames */ \"../../node_modules/classnames/index.js\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar HISTORY = 'history';\nvar SUBMIT = 'submit';\nvar TEMPORARY_STORAGE = 'temporaryStorage';\nfunction DesignerHeader(_ref) {\n  var lang = _ref.lang,\n    onBtnClick = _ref.onBtnClick,\n    _ref$hideBtnsKey = _ref.hideBtnsKey,\n    hideBtnsKey = _ref$hideBtnsKey === void 0 ? [] : _ref$hideBtnsKey,\n    customLogo = _ref.logo;\n  var historyIconClass = (0, _classnames[\"default\"])(_defineProperty({\n    'kdfont kdfont-congmouyiSVNlishibanbengengxin': true\n  }, _DesignerHeader[\"default\"].icon, true));\n  var logoSrc = (0, _react.useMemo)(function () {\n    if (customLogo) return customLogo;\n    // 根据lang返回对应的logo\n    return ['zh_CN', 'zh_TW'].includes(lang) ? _kdproformdesigner_logo[\"default\"] : _kdproformdesigner_logo_en_US[\"default\"];\n  }, [customLogo, lang]);\n  return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: _DesignerHeader[\"default\"]['designer-header']\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"img\", {\n    className: _DesignerHeader[\"default\"].logo,\n    src: logoSrc,\n    alt: \"logo\"\n  }), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: _DesignerHeader[\"default\"].toolbar\n  }, !hideBtnsKey.includes(HISTORY) && /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: _DesignerHeader[\"default\"]['text-item'],\n    onClick: function onClick(e) {\n      return onBtnClick(HISTORY);\n    }\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: historyIconClass\n  }), /*#__PURE__*/_react[\"default\"].createElement(\"div\", null, (0, _intlApi.getLangMsg)('DesignerHeader.history'))), !hideBtnsKey.includes(SUBMIT) && /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: _DesignerHeader[\"default\"]['btn-item'],\n    onClick: function onClick(e) {\n      return onBtnClick(SUBMIT);\n    },\n    title: (0, _intlApi.getLangMsg)('DesignerHeader.submitTips')\n  }, (0, _intlApi.getLangMsg)('DesignerHeader.submit')), !hideBtnsKey.includes(TEMPORARY_STORAGE) && /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: _DesignerHeader[\"default\"]['btn-item'],\n    onClick: function onClick(e) {\n      return onBtnClick(TEMPORARY_STORAGE);\n    },\n    title: (0, _intlApi.getLangMsg)('DesignerHeader.saveTips')\n  }, (0, _intlApi.getLangMsg)('DesignerHeader.save'))));\n}\n\n//# sourceURL=webpack://bos-platform/./src/component/web/KDModelDesigner/DesignerHeader.jsx?");

/***/ }),

/***/ "./src/component/web/KDModelDesigner/KDModelDesigner.jsx":
/*!***************************************************************!*\
  !*** ./src/component/web/KDModelDesigner/KDModelDesigner.jsx ***!
  \***************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.from.js */ \"../../node_modules/core-js/modules/es.array.from.js\");\n__webpack_require__(/*! core-js/modules/es.array.slice.js */ \"../../node_modules/core-js/modules/es.array.slice.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-string.js */ \"../../node_modules/core-js/modules/es.date.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.function.name.js */ \"../../node_modules/core-js/modules/es.function.name.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-properties.js */ \"../../node_modules/core-js/modules/es.object.define-properties.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptors.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptors.js\");\n__webpack_require__(/*! core-js/modules/es.object.keys.js */ \"../../node_modules/core-js/modules/es.object.keys.js\");\n__webpack_require__(/*! core-js/modules/es.regexp.exec.js */ \"../../node_modules/core-js/modules/es.regexp.exec.js\");\n__webpack_require__(/*! core-js/modules/es.regexp.to-string.js */ \"../../node_modules/core-js/modules/es.regexp.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = KDModelDesigner;\n__webpack_require__(/*! core-js/modules/es.array.concat.js */ \"../../node_modules/core-js/modules/es.array.concat.js\");\n__webpack_require__(/*! core-js/modules/es.array.filter.js */ \"../../node_modules/core-js/modules/es.array.filter.js\");\n__webpack_require__(/*! core-js/modules/es.array.for-each.js */ \"../../node_modules/core-js/modules/es.array.for-each.js\");\n__webpack_require__(/*! core-js/modules/es.array.includes.js */ \"../../node_modules/core-js/modules/es.array.includes.js\");\n__webpack_require__(/*! core-js/modules/es.array.is-array.js */ \"../../node_modules/core-js/modules/es.array.is-array.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.string.includes.js */ \"../../node_modules/core-js/modules/es.string.includes.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ \"../../node_modules/core-js/modules/web.dom-collections.for-each.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nvar _react = _interopRequireWildcard(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _useFederationModule = __webpack_require__(/*! @/hooks/useFederationModule.js */ \"./src/hooks/useFederationModule.js\");\nvar _intlApi = __webpack_require__(/*! @/i18n/intlApi */ \"./src/i18n/intlApi.js\");\nvar _KDModelDesigner = _interopRequireDefault(__webpack_require__(/*! ./KDModelDesigner.less */ \"./src/component/web/KDModelDesigner/KDModelDesigner.less\"));\nvar _DesignerHeader = _interopRequireDefault(__webpack_require__(/*! ./DesignerHeader */ \"./src/component/web/KDModelDesigner/DesignerHeader.jsx\"));\nvar _componentutil = __webpack_require__(/*! @/util/componentutil */ \"./src/util/componentutil.js\");\nvar _commonUtils = _interopRequireDefault(__webpack_require__(/*! @/component/common/commonUtils */ \"./src/component/common/commonUtils.js\"));\nvar _memoryCacher = __webpack_require__(/*! @/model/memoryCacher */ \"./src/model/memoryCacher.js\");\nvar _server = __webpack_require__(/*! @/action/actionname/control/modelDesigner/server */ \"./src/action/actionname/control/modelDesigner/server/index.js\");\nvar _api = __webpack_require__(/*! @/designer/utils/api.js */ \"./src/designer/utils/api.js\");\nvar _const = __webpack_require__(/*! @/constant/const */ \"./src/constant/const.js\");\nvar _modelDesignerAction = __webpack_require__(/*! @/action/modelDesignerAction */ \"./src/action/modelDesignerAction.js\");\nvar _appModelFunction = __webpack_require__(/*! @/model/appModelFunction */ \"./src/model/appModelFunction.js\");\nvar _serverproperties = __webpack_require__(/*! @/constant/serverproperties */ \"./src/constant/serverproperties.js\");\nvar _convertUpperCaseKeyToLowerCase = _interopRequireDefault(__webpack_require__(/*! ../designerCommonUtils/convertUpperCaseKeyToLowerCase */ \"./src/component/web/designerCommonUtils/convertUpperCaseKeyToLowerCase.js\"));\nvar _designeraction = __webpack_require__(/*! @/action/designeraction */ \"./src/action/designeraction.js\");\nvar _toolUtils = __webpack_require__(/*! @/util/toolUtils */ \"./src/util/toolUtils.js\");\nvar _UnSupportIE = _interopRequireDefault(__webpack_require__(/*! @/component/common/UnSupportIE */ \"./src/component/common/UnSupportIE.jsx\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nfunction KDModelDesigner(_ref) {\n  var _openArgs$, _openArgs$2;\n  var model = _ref.model,\n    dispatch = _ref.dispatch;\n  var _useState = (0, _react.useState)(),\n    _useState2 = _slicedToArray(_useState, 2),\n    openArgs = _useState2[0],\n    setOpenArgs = _useState2[1];\n  var _useState3 = (0, _react.useState)(),\n    _useState4 = _slicedToArray(_useState3, 2),\n    meta = _useState4[0],\n    setMeta = _useState4[1];\n  var _useState5 = (0, _react.useState)([]),\n    _useState6 = _slicedToArray(_useState5, 2),\n    hideBtnsKey = _useState6[0],\n    setHideBtnsKey = _useState6[1];\n  var dataRef = (0, _react.useRef)();\n  var modeldesignerRef = (0, _react.useRef)();\n  (0, _react.useEffect)(function () {\n    var pageId = model.pageId,\n      key = model.key;\n    var removeDirectivesListener = (0, _memoryCacher.subscribeControlMethod)(pageId, key, 'directives', function (pageData) {\n      if (pageData === undefined) {\n        return;\n      }\n      invokeControlMethods(pageData);\n    });\n    (0, _memoryCacher.setControlMount)(pageId, key, true);\n    return function () {\n      removeDirectivesListener === null || removeDirectivesListener === void 0 || removeDirectivesListener();\n    };\n  }, [hideBtnsKey]);\n  (0, _react.useEffect)(function () {\n    if (!openArgs) return;\n    var modelType = openArgs === null || openArgs === void 0 ? void 0 : openArgs[0];\n    dataRef.current = (openArgs === null || openArgs === void 0 ? void 0 : openArgs[1]) || {};\n    (0, _api.getUiMetadata)(modelType).then(function (meta) {\n      setMeta(meta);\n    });\n  }, [openArgs]);\n  var invokeControlMethods = function invokeControlMethods(events) {\n    events.forEach(function (event) {\n      var methodName = event.methodname,\n        args = event.args;\n      switch (methodName) {\n        case _server.OPEN:\n          setOpenArgs(args);\n          break;\n        case _server.SET_TABLE_INFO:\n          setTableInfo(args);\n          break;\n        case _server.SET_DESIGNERBAR_VISIBLE:\n          setDesignerBarVisible(args);\n          break;\n        case _server.SET_PROPERTY:\n          setProperty(args);\n          break;\n      }\n    });\n  };\n  var showMessage = function showMessage(msg) {\n    var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 2;\n    var pageId = model.pageId;\n    var messageData = {\n      type: type,\n      // 类型\n      content: msg,\n      duration: 2000,\n      level: _const.MSG_LEVEL.warning,\n      pageId: pageId\n    };\n    (0, _appModelFunction.setDataMessages)(pageId, messageData);\n  };\n  var onData = function onData(data) {\n    dataRef.current = (openArgs === null || openArgs === void 0 ? void 0 : openArgs[1]) || {};\n    dataRef.current.dmmeta = data;\n  };\n  var onApi = function onApi(kdesignerApi) {\n    modeldesignerRef.current = _objectSpread({}, kdesignerApi);\n  };\n  var onDesignerBarClick = function onDesignerBarClick(key) {\n    if (['temporaryStorage', 'submit'].includes(key)) {\n      dispatch((0, _appModelFunction.convertAppModelFunctionAction)((0, _appModelFunction.setControlPostValue)(model.pageId, model.key, dataRef.current)));\n    }\n    dispatch((0, _modelDesignerAction.designerBarClick)(model, key));\n  };\n  var onTableClick = function onTableClick(_ref2) {\n    var table = _ref2.table,\n      _ref2$fields = _ref2.fields,\n      fields = _ref2$fields === void 0 ? [] : _ref2$fields;\n    dispatch((0, _modelDesignerAction.tableClick)(model, table, fields));\n  };\n  var setTableInfo = (0, _react.useCallback)(function (args) {\n    if (modeldesignerRef.current) {\n      modeldesignerRef.current.setTableInfo(args);\n    }\n  }, []);\n  var setDesignerBarVisible = function setDesignerBarVisible() {\n    var args = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    var _args$ = args[0],\n      _args$$visible = _args$.visible,\n      visible = _args$$visible === void 0 ? true : _args$$visible,\n      _args$$keys = _args$.keys,\n      keys = _args$$keys === void 0 ? [] : _args$$keys;\n    var newHideBtnsKey = visible ? hideBtnsKey.filter(function (key) {\n      return !keys.includes(key);\n    }) : hideBtnsKey.concat(keys);\n    setHideBtnsKey(newHideBtnsKey);\n  };\n  var setProperty = (0, _react.useCallback)(function (args) {\n    if (modeldesignerRef.current) {\n      var _modeldesignerRef$cur;\n      (_modeldesignerRef$cur = modeldesignerRef.current) === null || _modeldesignerRef$cur === void 0 || _modeldesignerRef$cur.setProperty(args);\n    }\n  }, []);\n  var getInvokeActionParams = (0, _react.useCallback)(function (propName, field, editor) {\n    var itemId = field.Id;\n    var form = editor.Form;\n    var extendData = editor.Extenddata || {};\n    var context = [];\n    var valueObj = field[propName] ? {\n      value: field[propName]\n    } : {};\n    if (extendData.Type === 'tableInfo') {\n      var _valueObj$value;\n      var tableId = (_valueObj$value = valueObj.value) === null || _valueObj$value === void 0 ? void 0 : _valueObj$value.RelTableId;\n      context = modeldesignerRef.current.data.findControlByCondition(function (item) {\n        return item.Id === tableId || item.ParentId === tableId;\n      });\n    }\n    var param = _objectSpread(_objectSpread({\n      form: (0, _convertUpperCaseKeyToLowerCase[\"default\"])(form)\n    }, valueObj), {}, {\n      context: context,\n      item: {\n        Id: itemId,\n        _Type_: field._Type_\n      }\n    });\n    return [itemId, 'dmmeta', propName, param];\n  }, []);\n  var invokeAction = (0, _react.useCallback)(function (actionName, params) {\n    dispatch((0, _designeraction.property_editor_click)(model, actionName, params));\n  }, [model]);\n  var getPropertyAliasValue = (0, _react.useCallback)(function (propName, field, editor) {\n    if (editor.Editable === false) {\n      return;\n    }\n    var params = getInvokeActionParams(propName, field, editor);\n    invokeAction('getPropertyAlias', params);\n  }, []);\n  var handleCustomInputEditor = (0, _react.useCallback)(function (propName, field, editor) {\n    var params = getInvokeActionParams(propName, field, editor);\n    dispatch((0, _modelDesignerAction.btnEditClick)(model, params));\n  }, []);\n  var _useFederatedModule = (0, _useFederationModule.useFederatedModule)('model'),\n    module = _useFederatedModule.Component; // 模块联邦加载模型设计器\n  var _ref3 = module || {},\n    _ref3$ModelDesigner = _ref3.ModelDesigner,\n    ModelDesigner = _ref3$ModelDesigner === void 0 ? null : _ref3$ModelDesigner;\n  var style = (0, _componentutil.getCommonStyle)(model);\n  var commonClass = (0, _commonUtils[\"default\"])((0, _componentutil.getCommonClass)(model));\n  var rootClass = \"\".concat(_KDModelDesigner[\"default\"].root, \" \").concat(commonClass);\n  var lang = model.getUserLocale();\n  var data = openArgs === null || openArgs === void 0 || (_openArgs$ = openArgs[1]) === null || _openArgs$ === void 0 ? void 0 : _openArgs$.dmmeta;\n  var dataTypes = openArgs === null || openArgs === void 0 || (_openArgs$2 = openArgs[1]) === null || _openArgs$2 === void 0 ? void 0 : _openArgs$2.datatype;\n  var configItems = model.getMetaProperty(_serverproperties.CONFIG_ITEMS);\n  var logo = configItems === null || configItems === void 0 ? void 0 : configItems.get(_serverproperties.LOGO);\n  if ((0, _toolUtils.getBrowserData)() === 'ie') {\n    return /*#__PURE__*/_react[\"default\"].createElement(_UnSupportIE[\"default\"], null);\n  }\n  return ModelDesigner && meta && data ? /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: rootClass,\n    style: style\n  }, /*#__PURE__*/_react[\"default\"].createElement(_DesignerHeader[\"default\"], {\n    lang: lang,\n    onBtnClick: onDesignerBarClick,\n    hideBtnsKey: hideBtnsKey,\n    logo: logo\n  }), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: _KDModelDesigner[\"default\"]['designer-wrapper']\n  }, /*#__PURE__*/_react[\"default\"].createElement(ModelDesigner, {\n    getLangMsg: _intlApi.getLangMsg,\n    data: data,\n    meta: meta,\n    dataTypes: dataTypes,\n    showMessage: showMessage,\n    onData: onData,\n    onApi: onApi,\n    onTableClick: onTableClick,\n    handleCustomInputEditor: handleCustomInputEditor,\n    getPropertyAliasValue: getPropertyAliasValue\n  }))) : null;\n}\n\n//# sourceURL=webpack://bos-platform/./src/component/web/KDModelDesigner/KDModelDesigner.jsx?");

/***/ }),

/***/ "./src/component/web/KDModelDesigner/DesignerHeader.less":
/*!***************************************************************!*\
  !*** ./src/component/web/KDModelDesigner/DesignerHeader.less ***!
  \***************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\"designer-header\":\"DesignerHeader_designer-header_8jEl\",\"logo\":\"DesignerHeader_logo_3eDR\",\"toolbar\":\"DesignerHeader_toolbar_2t0G\",\"text-item\":\"DesignerHeader_text-item_6ku9\",\"icon\":\"DesignerHeader_icon_2kVo\",\"btn-item\":\"DesignerHeader_btn-item_ymen\"});\n\n//# sourceURL=webpack://bos-platform/./src/component/web/KDModelDesigner/DesignerHeader.less?");

/***/ }),

/***/ "./src/component/web/KDModelDesigner/KDModelDesigner.less":
/*!****************************************************************!*\
  !*** ./src/component/web/KDModelDesigner/KDModelDesigner.less ***!
  \****************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\"root\":\"KDModelDesigner_root_1j0n\",\"designer-wrapper\":\"KDModelDesigner_designer-wrapper_2KK_\"});\n\n//# sourceURL=webpack://bos-platform/./src/component/web/KDModelDesigner/KDModelDesigner.less?");

/***/ })

}]);