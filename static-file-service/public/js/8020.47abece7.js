"use strict";(self["webpackJsonp_bos-platform"]=self["webpackJsonp_bos-platform"]||[]).push([[8020,9860],{904732:function(t,e,n){n.r(e),e.default={"notification-wrapper":"NbJ0iyYR","notification-wrapper-mode0":"sdVyFlYU","notification-wrapper-mode1":"wa-Cr8gw",topLeft:"sSs5bbNE",topRight:"_3TixZar1",bottomRight:"_1SLM4NQt",bottomLeft:"_2S2yNJP1",NotificationLeftFadeIn:"_3iF3eCXM",NotificationFadeIn:"d1wlBOcn",fadeOut:"_2A7p-nTp",NotificationFadeOut:"_2c8zYoDt",header:"_1ZyBMy3g","header-icon":"_3DR706js",title:"_1fKJz73f",grey:"_2LbrY2CR","notification-custom-title":"_3YnBb2l0","notification-custom-content":"vmsw5l79","close-button":"_2ChttLBN",bottom:"HPyfAIcW",btn:"_2-_IXB2w","notification-main":"cWDeOrjv",content:"_3MHRi2NN",contentOverflow:"_1jq8BFJz"}},428020:function(t,e,n){function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}n(182320),n(909112),n(697060),n(360776),n(233696),n(505684),n(323784),n(693917),n(205960),n(976896),n(721300),n(846428),n(969e3),n(606200),n(534440),n(76152),n(76124),n(690512),n(776512),n(997308),Object.defineProperty(e,"__esModule",{value:!0}),e.clearNotificationService=C,e.default=void 0,e.notificationButtonClick=M,n(622676),n(443616),n(743924),n(835164),n(492948),n(70472),n(387912),n(804092),n(633768),n(78504),n(513640),n(977864),n(86744);var r=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=o(t)&&"function"!=typeof t)return{default:t};var n=v(e);if(n&&n.has(t))return n.get(t);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var u=i?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(r,a,u):r[a]=t[a]}return r.default=t,n&&n.set(t,r),r}(n(795520)),i=b(n(671252)),a=n(199860),u=n(369396),c=n(891052),l=n(211152),f=b(n(937344)),d=n(608008),s=n(218652),p=n(251536),m=n(559813),y=b(n(904732));function b(t){return t&&t.__esModule?t:{default:t}}function v(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(v=function(t){return t?n:e})(t)}function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach((function(e){O(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function w(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var o,r,i,a,u=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(o=i.call(n)).done)&&(u.push(o.value),u.length!==e);c=!0);}catch(t){l=!0,r=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw r}}return u}}(t,e)||_(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(t,e,n){var r;return r=function(t,e){if("object"!=o(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==o(r)?r:String(r))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _(t,e){if(t){if("string"==typeof t)return k(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(t,e):void 0}}function k(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}var j=["bottomRight","bottomLeft","topRight","topLeft"],S="bottomRight",E=0,P=40,N="ignore";function I(t,e){var n,o={},r=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=_(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,r=function(){};return{s:r,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}(t.replace(/([A-Z])/g,"-$1").toLowerCase().split("-"));try{for(r.s();!(n=r.n()).done;){o[n.value]=e}}catch(t){r.e(t)}finally{r.f()}return o}function C(t,e){return f.default.postApi("notification/clearNotifications.do",e).then((function(e){(0,p.doPostActions)(t,e,l.doGlobalDispatch,!0)})).catch((function(t){}))}function M(t,e){return f.default.postApi("notification/notificationButtonClick.do",e).then((function(e){(0,p.doPostActions)(t,e,l.doGlobalDispatch,!0)})).catch((function(t){}))}function T(t){var e=t.iconType,n=new Map([["success","kdfont kdfont-zhuangtai_wancheng"],["info","kdfont kdfont-zhuangtai_jingshi"],["warning","kdfont kdfont-zhuangtai_jingshi"],["error","kdfont kdfont-zhuangtai_cuowu"]]).get(e)||"",o=(0,i.default)(O(O(O(O(O(O({},y.default["header-icon"],!0),n,!0),"success-color","success"===e),"ongoing-color","info"===e),"warning-color","warning"===e),"error-color","error"===e));return n&&r.default.createElement("i",{className:o})}function A(t){var e=t.isHwStyle,n=t.title,o=t.iconType,a=t.handleClearAll,u=o&&e&&r.default.createElement(T,{iconType:o});return r.default.createElement("div",{className:(0,i.default)("kd-cq-sysnotification-header",O(O({},y.default.header,!0),"theme-bg",!e))},u,r.default.createElement("div",{className:(0,i.default)("kd-cq-sysnotification-header-title",O(O({},y.default.title,!0),y.default.grey,e)),title:n},n),r.default.createElement("i",{className:(0,i.default)(O(O({kdfont:!0,"kdfont-guanbiyulan":!0},y.default["close-button"],!0),y.default.grey,e)),onClick:a}))}function L(t){var e=t.total,n=t.page,o=t.renderButton,u=t.onPageChange,c=(0,r.useCallback)((function(){return e>1&&r.default.createElement(a.Pagination,{pageType:"simple",current:n,total:e,pageSize:1,showQuickJumper:!1,onChange:u})}),[e,n,u]);return r.default.createElement("div",{className:(0,i.default)("kd-cq-sysnotification-footer",y.default.bottom)},o(),c())}function R(t){var e=t.data,n=w((0,r.useState)(e),2),o=n[0],a=n[1],u=w((0,r.useState)(!0),2),f=u[0],d=u[1],p=w((0,r.useState)(1),2),b=p[0],v=p[1],g=(0,r.useRef)(),_=(0,r.useRef)(),k=o.offset,T=void 0===k?P:k,R=o.position,z=void 0===R?S:R,D=o.duration,B=o.notification,H=void 0===B?[]:B,q=o.iconType,x=(0,s.getRootPageId)()((0,l.getGlobalState)()),J=H.length,F=H[b-1],W=F||{},Y=W.title,G=void 0===Y?"":Y,U=W.content,Z=void 0===U?"":U,K=W.buttonInfo,Q=void 0===K?[]:K,X=W.notificationId,$=W.appId,V=W.mode,tt=void 0===V?E:V,et=1===tt,nt=j.includes(z)?z:S,ot=I(nt,T);(0,r.useEffect)((function(){var t=function(t){if(!t)return!1;var e=t.clientHeight;return t.scrollHeight>e}(g.current);d(t)}),[g.current,F]),(0,r.useEffect)((function(){var t=o.notification,n=e.notification;t=t.map((function(t){return t.notificationId})),n=n.map((function(t){return t.notificationId})),(0,c.is)((0,c.List)(t),(0,c.List)(n))||(a(e),v(1))}),[e]);var rt=(0,r.useRef)();(0,r.useEffect)((function(){return D&&"number"==typeof D&&(rt.current=setTimeout((function(){lt()}),D)),function(){clearTimeout(rt.current)}}),[]);var it=function(){rt.current&&clearTimeout(rt.current)},at=function(){clearTimeout(rt.current),D&&"number"==typeof D&&(rt.current=setTimeout((function(){lt()}),D))},ut=(0,r.useCallback)((function(t){v(t)}),[]),ct=(0,r.useCallback)((function(){var t=h({},o);t.notification=[],a(t)}),[o]),lt=(0,r.useCallback)((function(){ct();var t=H.reduce((function(t,e){var n=e.appId,o=e.notificationId;return t.appId?t.appId.notificationids.push(o):t.appId={appid:n,rootpageid:x,notificationids:[o]},t}),{});(t=Object.values(t)).length&&C(x,{params:t})}),[H,ct]),ft=function(t){var e,n={appid:$,rootpageid:x,notificationId:X,buttonKey:t,params:[]};t===N&&((e=h({},o)).notification=e.notification.filter((function(t){return t.notificationId!==X})),a(e),b===H.length&&v((function(t){return t-1}))),M(x,n)},dt=(0,r.useCallback)((function(){return r.default.createElement("div",{className:y.default["btn-wrapper"]},Q.map((function(t){var e=t.key,n=t.text;return r.default.createElement("a",{className:(0,i.default)("kd-cq-btn",O(O({},y.default.btn,!0),"link-color",!0)),key:e,onClick:function(){return ft(e)}},n)})))}),[Q]),st=(0,i.default)("kd-cq-sysnotification",O(O(O({},y.default["notification-wrapper"],!0),y.default["notification-wrapper-mode"+tt],!0),y.default[nt],!0)),pt=(0,i.default)(O(O({},y.default.content,!0),y.default.contentOverflow,f));if(2===tt){var mt=(0,m.sanitize)(G),yt=(0,m.sanitize)(Z);return J>0&&r.default.createElement("div",{className:st,style:ot,ref:_,id:"system-notification",onMouseOut:at,onMouseOver:it},r.default.createElement("div",{className:y.default["notification-custom-title"],dangerouslySetInnerHTML:{__html:mt}}),r.default.createElement("div",{className:y.default["notification-custom-content"],dangerouslySetInnerHTML:{__html:yt}}),r.default.createElement("i",{className:(0,i.default)(O({kdfont:!0,"kdfont-guanbiyulan":!0},y.default["close-button"],!0)),onClick:lt}),r.default.createElement(L,{total:J,page:b,renderButton:dt,onPageChange:ut,mode:tt}))}return J>0&&r.default.createElement("div",{className:st,style:ot,ref:_,id:"system-notification",onMouseOut:at,onMouseOver:it},r.default.createElement(A,{title:G,iconType:q,isHwStyle:et,handleClearAll:lt}),r.default.createElement("div",{className:(0,i.default)("kd-cq-sysnotification-content",y.default["notification-main"])},r.default.createElement("div",{className:pt,title:Z,ref:g},Z)),r.default.createElement(L,{total:J,page:b,renderButton:dt,onPageChange:ut}))}e.default=function(){var t=(0,r.useContext)(d.SystemUIContext).uiData,e=r.default.createElement(R,{data:t});return(0,u.createPortal)(e,document.body)}},559813:function(t,e,n){n(606200),Object.defineProperty(e,"__esModule",{value:!0}),e.sanitize=void 0,n(9692);var o,r=(o=n(645712))&&o.__esModule?o:{default:o},i=n(790832);var a={allowedTags:r.default.defaults.allowedTags.concat(["img"]),allowedAttributes:(0,i.extend)({},r.default.defaults.allowedAttributes,{"*":["style"],a:[]})};e.sanitize=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(0,r.default)(t,a)}}}]);