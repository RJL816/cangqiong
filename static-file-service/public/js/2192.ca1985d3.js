"use strict";(self["webpackJsonp_bos-platform"]=self["webpackJsonp_bos-platform"]||[]).push([[2192],{463752:function(t,e,n){n.r(e),e.default={"no-search-result":"_3in5hy4b","font-item":"_18Wv6t04","font-item-active":"_3J049guX",fontIconWrap:"_2SadPhQA","icon-name":"_3kKcJ37N","font-type":"_26fVapst",fontGroup:"_3wtEWAoX",fontselect:"_P_lVGu3","fontselect-contain":"_15djU4wV","fontselect-contain-list":"PcMXOUBI","fontselect-type":"TokgltCc","fontselect-type-list":"_12hqRRyI","fontselect-type-item":"_2xmX3vBO"}},452192:function(t,e,n){function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}n(182320),n(909112),n(697060),n(360776),n(505684),n(323784),n(743924),n(693917),n(205960),n(976896),n(297336),n(846428),n(336368),n(708896),n(969e3),n(606200),n(534440),n(76152),n(670864),n(76124),n(880920),n(836887),n(633768),n(690512),n(78504),n(977864),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n(9692),n(622676),n(305092),n(233696),n(241872),n(835164),n(721300),n(387912),n(571176),n(997308),n(86744);var o,a,c=O(n(795520)),i=O(n(671252)),u=(O(n(790832)),n(211152)),l=O(n(348896)),f=O(n(329132)),s=O(n(655240)),p=n(389120),y=n(439532),d=n(218652),v=O(n(385384)),m=O(n(149236)),b=O(n(548128)),h=O(n(463752)),g=n(331428);function O(t){return t&&t.__esModule?t:{default:t}}function k(){return k=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},k.apply(this,arguments)}function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function S(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(Object(n),!0).forEach((function(e){T(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function j(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return w(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,i=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return c=t.done,t},e:function(t){i=!0,a=t},f:function(){try{c||null==n.return||n.return()}finally{if(i)throw a}}}}function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,N(r.key),r)}}function P(t,e,n){return e=C(e),function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,I()?Reflect.construct(e,n||[],C(t).constructor):e.apply(t,n))}function I(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(I=function(){return!!t})()}function C(t){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},C(t)}function D(t,e){return D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},D(t,e)}function T(t,e,n){return(e=N(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function N(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==r(e)?e:String(e)}function A(t){var e=t.data,n=t.onIconClick,r=t.activeItem;return c.default.createElement("div",{className:h.default["fontselect-contain"]},e.map((function(t){var e=t.icons,o=t.key,a=t.layout,i=t.group_name,u=o?(0,g.getLangMsg)(o):i,l=e.length,f=l?"（".concat(l,"）"):"";return c.default.createElement("div",{key:"group_".concat(a),id:"group_".concat(a),className:"font-group"},c.default.createElement("div",{className:h.default.fontGroup},c.default.createElement("i",{className:"kdfont kdfont-bottom"}),"".concat(u).concat(f)),c.default.createElement(x,{icons:e,layout:a,onIconClick:n,activeItem:r}))})))}function x(t){var e=t.icons,n=t.layout,r=t.onIconClick,o=t.activeItem;return c.default.createElement("ul",{className:h.default["fontselect-contain-list"]},e.map((function(t,e){var a=t.key,u=t.fontClass,l=t.name,f=a?(0,g.getLangMsg)(a):l,p="".concat(n,"_").concat(e),y=o===p,d=(0,i.default)(h.default["font-item"],T({"kdfont-active":y},h.default["font-item-active"],y));return c.default.createElement("li",{key:"item_".concat(p),className:d,onClick:function(e){return r(e,p,t)},title:f},c.default.createElement("div",{className:h.default.fontIconWrap},c.default.createElement(s.default,{key:"icon_".concat(p),active:y,fontSelect:!0,fontClass:u})),c.default.createElement("span",{className:h.default["icon-name"],title:f},f))})))}var M=(o=(0,l.default)(!1),(0,v.default)(a=o(a=(0,m.default)(a=function(t){function e(t){var n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=P(this,e,[t])).observeActiveGroup=function(){r.intersectionObserver=new IntersectionObserver((function(t){if(r.observeEntries){var e,n=j(t);try{var o=function(){var t=e.value,n=t.intersectionRatio,o=t.target.id,a=parseInt(o.split("_")[1]||0);r.observeEntries.find((function(t){return t.currentType===a})).intersectionRatio=n};for(n.s();!(e=n.n()).done;)o()}catch(t){n.e(t)}finally{n.f()}}else r.observeEntries=t.map((function(t){var e=t.intersectionRatio,n=t.target.id;return{currentType:parseInt(n.split("_")[1]||0),intersectionRatio:e}}));if(r.shouldObserve){var a=r.observeEntries.find((function(t){return t.intersectionRatio>0}));if(a){var c=a.currentType;c!==r.state.currentType&&r.setState({currentType:c})}}}),{threshold:[1e-6],rootMargin:"0px 0px 0px 0px"}),document.querySelectorAll(".font-group").forEach((function(t){r.intersectionObserver.observe(t)}))},r.stopObserve=function(){r.intersectionObserver&&r.intersectionObserver.disconnect(),r.intersectionObserver=null,r.observeEntries=null},r.handleGroupClick=function(t,e){t.stopPropagation(),r.shouldObserve=!1,r.setState({currentType:e},(function(){var t="group_".concat(e);document.getElementById(t).scrollIntoView();var n=setTimeout((function(){r.shouldObserve=!0,clearTimeout(n),n=null}),0)}))},r.getTypes=function(t){var e=r.state.currentType;return t.map((function(t,n){var o=t.layout,a=t.key,u=t.group_name,l=(0,i.default)(h.default["fontselect-type-item"],{theme:!0,"list-box-item-hover":t.layout!==e,"list-box-item-active":t.layout===e}),f=a?(0,g.getLangMsg)(a):u;return c.default.createElement("li",{key:"type_".concat(n),className:l,onClick:function(t){return r.handleGroupClick(t,o)}},f)}))},r.getFilterData=function(t){var e=[];t=(t||"").toUpperCase();for(var n=0;n<r.fontData.length;n++){var o=r.fontData[n],a=o.icons,c=o.group_name,i=o.layout,u=o.key;a=a.filter((function(e){var n=e.key,r=e.fontClass,o=e.name,a=(n?(0,g.getLangMsg)(n):o).toUpperCase();return r=r.toUpperCase(),a.indexOf(t)>-1||r.indexOf(t)>-1})),a.length&&e.push({icons:a,group_name:c,layout:i,key:u})}return e},r.handleIconClick=function(t,e,n){t.stopPropagation(),r.setState({activeItem:e}),p.fontSelectClick&&r.props.dispatch((0,p.fontSelectClick)(r.props.model,n))};var o=t.model.getDataProperty("searchStr")||"",a=(0,d.getIconfontData)()((0,u.getGlobalState)());return r.fontData=b.default.concat(a).filter((function(t){return t.icons.length>0})).map((function(t,e){return S(S({},t),{},{layout:e})})),r.state={kdfontData:r.fontData,currentType:(null===(n=r.fontData[0])||void 0===n?void 0:n.layout)||0,searchStr:o,activeItem:""},r.observeEntries=null,r.shouldObserve=!0,r}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&D(t,e)}(e,t),n=e,(r=[{key:"componentDidMount",value:function(){this.observeActiveGroup()}},{key:"componentWillReceiveProps",value:function(t){var e=t.model.getDataProperty("searchStr")||"";e!==this.state.searchStr&&this.doFilter(e)}},{key:"componentWillUnmount",value:function(){this.stopObserve()}},{key:"doFilter",value:function(t){var e=this,n=this.getFilterData(t);this.stopObserve(),this.setState({kdfontData:[]},(function(){e.setState((function(){var e;return{searchStr:t,kdfontData:n,currentType:(null===(e=n[0])||void 0===e?void 0:e.layout)||0}}),(function(){e.observeActiveGroup()}))}))}},{key:"render",value:function(){var t=this.props.model,e=this.state,n=e.kdfontData,r=e.searchStr,o=e.activeItem,a=(0,y.getCommonStyle)(t),u=(0,y.getCommonClass)(t),l=(0,i.default)(h.default.fontselect,(0,f.default)(S({},u)));return r&&!n.length?c.default.createElement("div",{className:h.default["no-search-result"]},(0,g.getLangMsg)({key:"FontSelect.key001"})):c.default.createElement("div",k({className:l,style:a},this.props.attachData),c.default.createElement("div",{className:h.default["fontselect-type"]},c.default.createElement("ul",{className:h.default["fontselect-type-list"]},this.getTypes(n))),c.default.createElement(A,{data:n,onIconClick:this.handleIconClick,activeItem:o}))}}])&&E(n.prototype,r),o&&E(n,o),Object.defineProperty(n,"prototype",{writable:!1}),e}(c.default.Component))||a)||a)||a);e.default=M}}]);