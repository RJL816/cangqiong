"use strict";(self["webpackJsonp_bos-platform"]=self["webpackJsonp_bos-platform"]||[]).push([[2500],{684648:function(e,t,n){n.r(t),t.default={"wave-progress-box-wrap":"_31uaz04w","wave-progress-box":"krLleyVI",wave:"M0EIHuVV","wave-mask":"_3XszlMQ1",toRotate:"_2ZmOrEqO","percent-txt":"gPd9Usjk",percent:"_1jUR4tOP"}},232464:function(e,t,n){n.r(t),t.default={"icon-container":"_3PoLdV0S",right0:"_2q6ytENL",no:"_1nxmWA5c","amount-box":"_18bJAv4N"}},755532:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n(182320),n(909112),n(697060),n(505684),n(743924),n(693917),n(976896),n(721300),n(606200),n(534440),n(387912),n(633768),n(690512),n(78504),n(776512),n(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(323784),n(571176);var o,u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=r(e)&&"function"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var o={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=u?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(o,l,i):o[l]=e[l]}return o.default=e,n&&n.set(e,o),o}(n(795520)),l=(o=n(790832))&&o.__esModule?o:{default:o};function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,u,l,a=[],i=!0,c=!1;try{if(u=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=u.call(n)).done)&&(a.push(r.value),a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{if(!i&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var f=function(e,t,n,r,o,l,a,i,c){(0,u.useEffect)((function(){var u=function(u,a){var i,c=u,f=0,s=0,d=a||u.offsetWidth,p=u.offsetHeight;c.onmousedown=function(u){e&&e(!0),t(!0);var a=n.current,y=a.browserWidth,m=a.browserHeight;u=u||window.event;return i=u.clientX,f=u.clientX-this.offsetLeft,s=u.clientY-this.offsetTop,document.onmousemove=function(e){e=e||window.event;c.style.position="absolute",c.style.left=e.clientX-f+"px",c.style.right="auto",e.clientX-f<=0?c.style.left=0:d-f+e.clientX>=y&&(c.style.left=y-d+"px"),c.style.top=e.clientY-s+"px",e.clientY-s<=0?c.style.top=0:p-s+e.clientY>=m&&(c.style.top=m-p+"px"),r({left:c.style.left,top:c.style.top}),o({left:c.style.left,top:c.style.top,width:d,height:p})},document.onmouseup=function(n){e&&e(!1),t(!1),(n.clientX-i>3||n.clientX-i<-3)&&l&&l(!0),document.onmousemove=null,document.onmouseup=null},!1}};n.current.browserWidth=document.documentElement.clientWidth,n.current.browserHeight=document.documentElement.clientHeight,a.current&&c&&a.current.children[1]?u(a.current.children[1]):a.current&&a.current.firstElementChild&&u(a.current.firstElementChild,40)}),[c,i,a.current])},s=function(e,t,n,r,o){var a=function(t,n,o){var u,l,a=t.offsetLeft,i=t.offsetWidth,c=t.offsetHeight,f=t.offsetTop,s=e.current.browserWidth,d=e.current.browserHeight;a+i>e.current.browserWidth&&(u=s-i-(n-a-i)*s/n,t.style.left=u+"px"),f+c>e.current.browserHeight&&(l=d-c-(o-f-c)*d/o,t.style.top=l+"px"),r({left:u,top:l})};(0,u.useEffect)((function(){var r=l.default.throttle((function(){var r=e.current.browserWidth,o=e.current.browserHeight;e.current.browserWidth=document.documentElement.clientWidth,e.current.browserHeight=document.documentElement.clientHeight,t.current&&n&&t.current.children[1]?a(t.current.children[1],r,o):t.current&&t.current.firstElementChild&&a(t.current.firstElementChild,r,o)}),300);return window.addEventListener("resize",r),function(){window.removeEventListener("resize",r)}}),[n,o,t.current])};t.default=function(e){var t=e.children,n=e.getPosition,r=e.setDragFlag,o=e.reRenderFlag,l=e.size,a=e.setDragIngFlag,c=(0,u.useRef)(null),d=(0,u.useRef)({}),p=i((0,u.useState)({}),2),y=p[0],m=p[1],b=i((0,u.useState)(!1),2),v=b[0],h=b[1];return f(a,h,d,n,m,r,c,l,o),s(d,c,o,n,l),u.default.createElement("div",{ref:c},t,v?u.default.createElement("div",{style:{width:"500px",height:"500px",position:"absolute",left:"".concat(parseInt(y.left)-(500-y.width)/2,"px"),top:"".concat(parseInt(y.top)-(500-y.height)/2,"px"),zIndex:2}}):null)}},416936:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n(182320),n(909112),n(697060),n(743924),n(606200),n(534440),n(387912),n(78504),n(776512),n(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(571176);var o,u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=r(e)&&"function"!=typeof e)return{default:e};var n=a(t);if(n&&n.has(e))return n.get(e);var o={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var i=u?Object.getOwnPropertyDescriptor(e,l):null;i&&(i.get||i.set)?Object.defineProperty(o,l,i):o[l]=e[l]}return o.default=e,n&&n.set(e,o),o}(n(795520)),l=(o=n(684648))&&o.__esModule?o:{default:o};function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(a=function(e){return e?n:t})(e)}var i=function(e,t){var n=e.percent,r=e.doneRate,o="".concat(100===n?"-70":40-n,"%");return u.default.createElement("div",{className:l.default["wave-progress-box-wrap"]},u.default.createElement("div",{className:l.default["wave-progress-box"],ref:t},u.default.createElement("div",{className:l.default.wave}),u.default.createElement("div",{className:l.default["wave-mask"],style:{top:o}}),u.default.createElement("div",{className:"".concat(l.default["percent-txt"])},0===n?r:u.default.createElement(u.default.Fragment,null,parseInt(n),u.default.createElement("i",{className:l.default.percent},"%")))))};t.default=(0,u.forwardRef)(i)},232500:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n(182320),n(909112),n(697060),n(505684),n(743924),n(693917),n(976896),n(721300),n(606200),n(534440),n(633768),n(690512),n(78504),n(776512),n(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.useSystemTaskNotice=t.default=void 0,n(9692),n(622676),n(443616),n(323784),n(387912);var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=r(e)&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var o={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var a=u?Object.getOwnPropertyDescriptor(e,l):null;a&&(a.get||a.set)?Object.defineProperty(o,l,a):o[l]=e[l]}return o.default=e,n&&n.set(e,o),o}(n(795520)),u=p(n(369396)),l=p(n(232464)),a=p(n(123876)),i=p(n(416936)),c=n(608008),f=n(331428),s=p(n(755532)),d=p(n(790832));function p(e){return e&&e.__esModule?e:{default:e}}function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,u,l,a=[],i=!0,c=!1;try{if(u=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=u.call(n)).done)&&(a.push(r.value),a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{if(!i&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var v=t.useSystemTaskNotice=function(){var e=m((0,o.useState)(!1),2),t=e[0],n=e[1],r=m((0,o.useState)(!1),2),u=r[0],l=r[1],a=m((0,o.useState)(!1),2),i=a[0],c=a[1],f=m((0,o.useState)(!1),2),s=f[0],d=f[1],p=(0,o.useRef)(),y=(0,o.useRef)();return{showList:t,taskListRef:p,IconWrapRef:y,handleFollowPosition:function(e){t&&y&&y.current&&(y.current.style.left=e.left,y.current.style.top=e.top)},setDragFlag:c,setInDrag:d,inDrag:s,setShowAmount:l,dragFlag:i,handleListShow:function(){l(!1);var e=p&&p.current;e&&(e.style.display=t?"none":"block"),n((function(e){return!e}))},showAmount:u,setShowList:n}},h=function(e,t,n){(0,o.useEffect)((function(){var r=function(r){var o=e&&e.current;if(o){for(var u=r.target;u;){if(u===o||u.parentNode===o)return;u=u.parentNode}t&&(o.style.display="none",n(!1))}};return document.addEventListener("click",r),function(){document.removeEventListener("click",r)}}),[e,t,n])},g=function(e,t,n){(0,o.useEffect)((function(){var r=d.default.throttle((function(){var r=e&&e.current;r&&t&&(r.style.display="none",n(!1))}),300);return window.addEventListener("resize",r),function(){window.removeEventListener("resize",r)}}),[e,t])};t.default=function(){var e=(0,o.useContext)(c.SystemUIContext).uiData,t=v(),n=t.showList,r=t.taskListRef,d=t.IconWrapRef,p=t.handleFollowPosition,y=t.setDragFlag,m=t.setInDrag,b=t.inDrag,w=t.setShowAmount,S=t.dragFlag,_=t.handleListShow,E=t.showAmount,O=t.setShowList;h(r,n,O),g(r,n,O);var j=e.size,k=["RUNNING","BEGIN"],P=e.filter((function(e){return k.includes(e.get("status"))})).size||0,M=e.getIn([j-1,"progress"])/100*100,x="".concat(j-P,"/").concat(j);return j?u.default.createPortal(o.default.createElement(s.default,{getPosition:function(e){p(e)},setDragFlag:function(){y(!0)},reRenderFlag:n,size:e.size,setDragIngFlag:function(e){m(e)}},o.default.createElement("div",{className:"".concat(l.default["icon-container"]," ").concat(n?l.default.right0:""),onMouseEnter:function(){!b&&w(!0)},onMouseLeave:function(){w(!1)},onClick:function(e){e.stopPropagation(),S?y(!1):_()},ref:d},o.default.createElement(i.default,{percent:M,doneRate:x}),E&&P?o.default.createElement("div",{className:"".concat(l.default["amount-box"])},P,(0,f.getLangMsg)({key:"taskNotice.key0008"})):null),o.default.createElement(a.default,{taskList:e,isSystem:!0,ref:r,iconRef:d})),document.body,!0):null}}}]);