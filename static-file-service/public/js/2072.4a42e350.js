"use strict";(self["webpackJsonp_bos-platform"]=self["webpackJsonp_bos-platform"]||[]).push([[2072],{184300:function(t,e,n){n.r(e),e.default={"top-notification-wrapper":"_1TS84TB3","top-notification-main":"_3bxmn2M9","top-notification-content":"_1KnmGC5N","top-notification-button":"_16smK4R2","top-notification-details":"_3hLl1h8i","top-notification-close":"_1Y2TMJjh",fadeIn:"_1_sT9VQU",fadeout:"gpUwhBmV"}},282072:function(t,e,n){function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}n(182320),n(909112),n(697060),n(360776),n(505684),n(743924),n(693917),n(205960),n(976896),n(721300),n(846428),n(606200),n(534440),n(633768),n(690512),n(78504),n(776512),n(977864),Object.defineProperty(e,"__esModule",{value:!0}),e.clearNotificationService=I,e.default=void 0,e.notificationButtonClick=g,n(622676),n(323784),n(387912),n(86744);var i=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=o(t)&&"function"!=typeof t)return{default:t};var n=v(e);if(n&&n.has(t))return n.get(t);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if("default"!==a&&Object.prototype.hasOwnProperty.call(t,a)){var u=r?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(i,a,u):i[a]=t[a]}return i.default=t,n&&n.set(t,i),i}(n(795520)),r=m(n(671252)),a=n(211152),u=n(218652),f=n(674260),l=n(868256),c=n(608008),d=n(251536),s=m(n(937344)),p=m(n(184300));function m(t){return t&&t.__esModule?t:{default:t}}function v(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(v=function(t){return t?n:e})(t)}function y(t,e,n){var i;return i=function(t,e){if("object"!=o(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=o(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==o(i)?i:String(i))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var o,i,r,a,u=[],f=!0,l=!1;try{if(r=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;f=!1}else for(;!(f=(o=r.call(n)).done)&&(u.push(o.value),u.length!==e);f=!0);}catch(t){l=!0,i=t}finally{try{if(!f&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return u}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return O(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function I(t,e){return s.default.postApi("notification/clearNotifications.do",e).then((function(e){(0,d.doPostActions)(t,e,a.doGlobalDispatch,!0)})).catch((function(t){}))}function g(t,e){return s.default.postApi("notification/notificationButtonClick.do",e).then((function(e){(0,d.doPostActions)(t,e,a.doGlobalDispatch,!0)})).catch((function(t){}))}function h(t){var e,n=t.data,o=b((0,i.useState)(""),2),c=o[0],d=o[1],s=b((0,i.useState)(!1),2),m=s[0],v=s[1],O=(0,u.getRootPageId)()((0,a.getGlobalState)()),h=function(t){N.current&&clearTimeout(N.current);(0,f.updateData)(l.KEY_TOPNOTIFICATIONINFO,(function(e){return Array.isArray(t)?e.filter((function(e){return e.notificationId!==t[0]}))||[]:(e.pop(),e)})),_(!1)},_=function(t){t?v(!0):(v(!1),setTimeout((function(){d("")}),200))};(0,i.useEffect)((function(){var t=(0,f.getData)(l.KEY_TOPNOTIFICATIONINFO);if(t){var e=t[t.length-1];d(e),_(!0),S(null==e?void 0:e.duration)}}),[n]);var N=(0,i.useRef)(null),S=function(t){!t||"infinite"===t||"number"!=typeof t||isNaN(t)||t<0||(clearTimeout(N.current),N.current=setTimeout((function(){h()}),t))};(0,i.useEffect)((function(){var t=(0,f.addDataChangeListener)(l.KEY_TOPNOTIFICATIONCLOSE,h);return function(){t()}}),[]);var T=(0,r.default)(y({"kdfont kdfont-guanbiyulan":!0},p.default["top-notification-close"],!0)),w=(0,r.default)(y(y(y({},p.default["top-notification-wrapper"],!0),p.default.fadeIn,m),p.default.fadeout,!m));return c?i.default.createElement("div",{className:w,onMouseOver:function(){clearTimeout(N.current)},onMouseOut:function(){S(null==c?void 0:c.duration)}},i.default.createElement("div",{className:p.default["top-notification-main"]},i.default.createElement("div",{className:p.default["top-notification-content"]},c.content),i.default.createElement("div",{className:p.default["top-notification-button"]},i.default.createElement("div",{className:p.default["top-notification-details"],onClick:function(){var t,e=c.level,n=c.appId,o=c.notificationId,i=c.buttonInfo,r={appid:n,rootpageid:O,notificationId:o,level:e,buttonKey:null===(t=i[0])||void 0===t?void 0:t.key,params:[]};g(O,r),h()}},null===(e=c.buttonInfo[0])||void 0===e?void 0:e.text),i.default.createElement("div",{className:T,onClick:function(){var t=c.level,e=c.appId,n=c.notificationId;I(O,{params:[{appid:e,rootpageid:O,notificationids:[n],level:t}]}),h()}})))):null}e.default=function(){var t=(0,i.useContext)(c.SystemUIContext).uiData;return i.default.createElement(h,{data:t})}}}]);