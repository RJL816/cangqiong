(self["webpackJsonp_bos-platform"]=self["webpackJsonp_bos-platform"]||[]).push([[9056,9860],{625844:function(e,t,r){"use strict";function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}r(182320),r(909112),r(697060),r(743924),r(606200),r(534440),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={importCert:function(e,t){var r=e.pageId;try{c.certService.loadCertJs((function(){if(c.certService.topESAConfig())c.certService.selectCert(r,(function(e,r){if(e){var s={serialNumber:e.serialNumber(),issuer:e.issuer(),publicKey:e.toBase64(),begin:e.notBefore(),end:e.notAfter(),certName:l(e)};t({success:!0,data:s})}else{var n={success:!1,status:a.CERT_STATUS_NOCERT};t(n)}c.certService.closeDialog()}));else{var e={success:!1,status:a.CERT_STATUS_NOPLGUIN};t(e)}}))}catch(e){var s={success:!1,status:e.message};t(s)}},signCert:function(e,t){var r=e.pageId,s=e.serialNumber,f=e.signText,l=e.clearPin,p={},S=!0,v=!1===l;c.certService.loadCertJs((function(){if(!c.certService.topESAConfig()){var e={success:!1,status:a.CERT_STATUS_NOPLGUIN};return t(e)}var y=c.certService.getCurrentCert(s);if(null===y){var b={success:!1,status:a.CERT_STATUS_NOCERT};return t(b)}l&&(v=y&&c.certService.clearpin(y,r));try{var _=y.notAfter(),d=(0,i.getRootPageId)()((0,n.getGlobalState)());if((0,u.isDateExpired)(_)){var g={success:!1,status:a.CERT_STATUS_EXPIRE};return t(g)}(0,u.isLessThan30Days)(_)&&(0,i.setDataMessages)(d,{content:(0,o.getLangMsg)("cert.key0014"),type:2,duration:5e3}),Object.keys(f).forEach((function(e){if(p[e]=c.certService.sign(f[e],y),null===p[e])throw new Error}))}catch(e){S=!1}if(void 0===l&&(v=y&&c.certService.clearpin(y,r)),!S){var T={success:!1,status:a.CERT_STATUS_FAIL};return t(T)}if(null===p||!S||!v){var C={success:!1,status:a.CERT_STATUS_FAIL};return t(C)}t({success:!0,data:p})}))}};n.default[n.KD_PLUGIN]||(n.default[n.KD_PLUGIN]={});n.default[n.KD_PLUGIN]=Object.assign({},n.default[n.KD_PLUGIN],t)},r(233696),r(241872),r(336368),r(76124),r(387912),r(633768),r(218080),r(997308);var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=s(e)&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=c?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(211152)),c=r(111648),a=r(496260),u=r(471e3),o=r(331428),i=r(218652);function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}function l(e){for(var t=e.subject().match(/(S(?!N)|L|O(?!U)|OU|SN|CN|E)=([^=]+)(?=, |$)/g),r=0;r<t.length;r++)if(0===t[r].indexOf("CN="))return t[r].substr(3,t[r].length);return"defaultName"}},77240:function(e,t,r){e.exports=r(251656)(8375)}}]);