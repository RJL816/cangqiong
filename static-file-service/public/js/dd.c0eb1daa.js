"use strict";(self["webpackJsonp_bos-platform"]=self["webpackJsonp_bos-platform"]||[]).push([[5840],{604704:function(n,t,e){function o(n){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},o(n)}e(182320),e(909112),e(697060),e(505684),e(323784),e(743924),e(693917),e(721300),e(606200),e(534440),e(78504),e(776512),e(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(n,t){var e=n.loadjs,o=n.releaseResource,i={setWebViewTitle:function(n){window.dd.biz.navigation.setTitle({title:n,onSuccess:function(n){},onFail:function(){}})},rotateUI:function(n,t){"portrait"===["portrait","landscape"]["[object Object]"===Object.prototype.toString.call(n)?n.direction:n]?window.dd.device.screen.resetView({onSuccess:function(n){t(n)},onFail:function(n){t(n)}}):window.dd.device.screen.rotateView({showStatusBar:!0,clockwise:!0,onSuccess:function(n){t(n)},onFail:function(n){t(n)}})},previewImage:function(n,t){var e=n.current,o=n.urls,i=o.length>0?o:[e];e&&window.dd.biz.util.previewImage({urls:i,current:e,onSuccess:function(n){t(n)},onFail:function(n){t(n)}})},getDevicedLang:function(n,t){var e=window.navigator.userAgent.split(" ").find((function(n){return n.startsWith("language")}))||"language/zh-Hans";t({success:!0,data:/zh-Hant|zh-HK|zh-TW/.test(e)?"zh_TW":e.includes("zh")?"zh_CN":(0,s.getLanguage)(e)})},closeWebView:function(){window.dd.biz.navigation.close({onSuccess:function(){},onFail:function(n){a.default.error("close 关闭当前轻应用失败",n)}}),(0,d.isDdWindowDesktop)()&&window.dd.biz.navigation.quit({onSuccess:function(){},onFail:function(n){a.default.error("quit 关闭当前轻应用失败",n)}})},scanQRCode:function(n,t){window.dd.biz.util.scan({type:"all",onSuccess:function(n){var e={success:!0,data:{qrcode_str:n.text}};t(e)},onFail:function(n){a.default.log("扫码异常",n)}})},releasePageBeforeClose:function(n){(0,c.getMobileOS)().includes("Android")?document.addEventListener("backbutton",(function(t){var e=n.shouldCLoseWebView;if((0,n.requestClosePage)())t.preventDefault();else if(e&&e()){try{o()}catch(n){a.default.error(n)}window.dd.biz.navigation.close({onSuccess:function(){},onFail:function(n){a.default.log("关闭当前轻应用失败",n)}})}else window.history.length<=1&&window.dd.biz.navigation.close({onSuccess:function(){},onFail:function(n){a.default.log("关闭当前轻应用失败",n)}})})):(0,c.getMobileOS)().includes("iOS")&&window.dd.biz.navigation.setLeft({control:!0,text:"",onSuccess:function(t){var e=n.shouldCLoseWebView;if(!(0,n.requestClosePage)())if(e&&e()){try{o()}catch(n){a.default.error(n)}window.dd.biz.navigation.close({onSuccess:function(){},onFail:function(n){a.default.log("关闭当前轻应用失败",n)}})}else window.history.length<=1?window.dd.biz.navigation.close({onSuccess:function(){},onFail:function(n){a.default.log("关闭当前轻应用失败",n)}}):window.history.back()},onFail:function(n){a.default.log("返回失败",n)}})}},p={translateVoice:function(n,t){window.dd.device.audio.translateVoice({mediaId:n.mediaId,duration:n.duration,onSuccess:function(n){var e={success:!0,data:n.content};t(e)}})},startVoice:function(){var n=arguments.length>1?arguments[1]:void 0;window.dd.device.audio.startRecord({onSuccess:function(){},onFail:function(n){a.default.error("startRecord: ",n)}}),window.dd.device.audio.onRecordEnd({onSuccess:function(t){p.translateVoice(t,n)},onFail:function(n){a.default.error("onRecordEnd: ",n)}})},stopVoice:function(){var n=arguments.length>1?arguments[1]:void 0;window.dd.device.audio.stopRecord({onSuccess:function(t){p.translateVoice(t,n)},onFail:function(n){a.default.error("stopRecord: ",n)}})},setClipboardData:function(n){window.dd.biz.clipboardData.setData({text:n,onSuccess:function(n){a.default.log("copyToClipboard:",n)},onFail:function(n){a.default.error("copyToClipboard:",n)}})},newTab:function(n){var t=n.url;window.dd.biz.util.invokeWorkbench({app_url:t,app_info:{app_refresh_if_exist:!0,app_active_if_exist:!0},onSuccess:function(n){a.default.log("调用成功",n)},onFail:function(n){a.default.log("调用新窗口异常",n)}})}};e(window.__kd_cdnPath__+"/public/thirdjs/dd/dingtalk.open.js",{success:function(){a.default.log("钉钉SDK已经加载"),(0,f.loadDynamicPlugin)(i),t&&t(!0),(0,l.getRootConfigPromise)().then((function(n){(0,d.getAppTrdAuthData)(u.DING_TALK).then((function(n){(0,d.isAuthSuccess)(n)?function(n){var t,e=null==n?void 0:n.config,o=e.signature,i=e.timestamp,r=e.nonce,c=e.eid,u=e.agentId,d=window.clientApiList||[];window.dd.config({agentId:u,corpId:c,timeStamp:i,nonceStr:r,signature:o,jsApiList:["device.audio.startRecord","device.audio.stopRecord","device.audio.translateVoice","biz.clipboardData.setData","biz.util.invokeWorkbench"].concat((t=d,v(t)||b(t)||g(t)||w()))}),window.dd.error((function(n){a.default.error("dd 鉴权失败: "+n)})),window.dd.ready((function(n){a.default.log("钉钉鉴权成功: ",n),(0,f.loadDynamicPlugin)(p)}))}(n.data):r.default[r.KD_PLUGIN]&&(a.default.error("鉴权失败，getAppTrdAuthData.do接口返回数据：".concat(JSON.stringify(n))),r.default[r.KD_PLUGIN][u.AUTH_RESULT]=n,r.default[r.KD_PLUGIN][u.AUTH_API_WHITE_LIST]=["setClipboardData"])}))}))},error:function(){a.default.error("钉钉SDK加载失败"),t&&t(!1)}})},e(9692),e(305092),e(443616),e(976896),e(387912),e(633768),e(690512),e(660824),e(694904);var i,r=function(n,t){if(!t&&n&&n.__esModule)return n;if(null===n||"object"!=o(n)&&"function"!=typeof n)return{default:n};var e=p(t);if(e&&e.has(n))return e.get(n);var i={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in n)if("default"!==a&&Object.prototype.hasOwnProperty.call(n,a)){var c=r?Object.getOwnPropertyDescriptor(n,a):null;c&&(c.get||c.set)?Object.defineProperty(i,a,c):i[a]=n[a]}return i.default=n,e&&e.set(n,i),i}(e(211152)),a=(i=e(882976))&&i.__esModule?i:{default:i},c=e(589200),u=e(702776),d=e(747325),l=e(781456),s=e(331428),f=e(529040);function p(n){if("function"!=typeof WeakMap)return null;var t=new WeakMap,e=new WeakMap;return(p=function(n){return n?e:t})(n)}function w(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function g(n,t){if(n){if("string"==typeof n)return y(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(n):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?y(n,t):void 0}}function b(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}function v(n){if(Array.isArray(n))return y(n)}function y(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,o=new Array(t);e<t;e++)o[e]=n[e];return o}}}]);