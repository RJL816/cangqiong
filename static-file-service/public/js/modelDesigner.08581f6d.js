"use strict";(self["webpackJsonp_bos-platform"]=self["webpackJsonp_bos-platform"]||[]).push([[3320],{647868:function(e,t,n){n.r(t),t.default={"designer-header":"_8jElnKkr",logo:"_3eDRy8Yg",toolbar:"_2t0Gsiuz","text-item":"_6ku9sPct",icon:"_2kVoOWnC","btn-item":"ymen-2tU"}},835914:function(e,t,n){n.r(t),t.default={root:"_1j0n7QkL","designer-wrapper":"_2KK_01jk"}},354572:function(e,t,n){n(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.TABLE_CLICK=t.DESIGNERBAR_CLICK=t.BTN_EDIT_CLICK=void 0;t.DESIGNERBAR_CLICK="designerBarClick",t.TABLE_CLICK="tableClick",t.BTN_EDIT_CLICK="click"},794400:function(e,t,n){n(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.SET_TABLE_INFO=t.SET_PROPERTY=t.SET_DESIGNERBAR_VISIBLE=t.OPEN=void 0;t.OPEN="open",t.SET_TABLE_INFO="setTableInfo",t.SET_DESIGNERBAR_VISIBLE="setDesignerBarVisible",t.SET_PROPERTY="setProperty"},46400:function(e,t,n){n(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.tableClick=t.designerBarClick=t.btnEditClick=void 0;var r=n(251536),o=n(218652),i=n(354572);t.designerBarClick=function(e,t){return function(n,a){var l=(0,o.getPost)(e.pageId)(a());(0,r.invokeControlService)(e,i.DESIGNERBAR_CLICK,[t],l,n)}},t.tableClick=function(e,t,n){return function(a,l){var u=(0,o.getPost)(e.pageId)(l());(0,r.invokeControlService)(e,i.TABLE_CLICK,[{table:t,fields:n}],u,a)}},t.btnEditClick=function(e,t){return function(n,a){var l=(0,o.getPost)(e.pageId)(a());(0,r.invokeControlService)(e,i.BTN_EDIT_CLICK,t,l,n)}}},503320:function(e,t,n){n(697060),n(743924),n(606200),n(534440),n(78504),n(776512),n(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.lang,n=e.onBtnClick,c=e.hideBtnsKey,f=void 0===c?[]:c,v=e.logo,y=(0,u.default)(function(e,t,n){(t=function(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}({"kdfont kdfont-congmouyiSVNlishibanbengengxin":!0},o.default.icon,!0)),g=(0,r.useMemo)((function(){return v||(["zh_CN","zh_TW"].includes(t)?i.default:a.default)}),[v,t]);return r.default.createElement("div",{className:o.default["designer-header"]},r.default.createElement("img",{className:o.default.logo,src:g,alt:"logo"}),r.default.createElement("div",{className:o.default.toolbar},!f.includes(d)&&r.default.createElement("div",{className:o.default["text-item"],onClick:function(e){return n(d)}},r.default.createElement("div",{className:y}),r.default.createElement("div",null,(0,l.getLangMsg)("DesignerHeader.history"))),!f.includes(p)&&r.default.createElement("div",{className:o.default["btn-item"],onClick:function(e){return n(p)},title:(0,l.getLangMsg)("DesignerHeader.submitTips")},(0,l.getLangMsg)("DesignerHeader.submit")),!f.includes(b)&&r.default.createElement("div",{className:o.default["btn-item"],onClick:function(e){return n(b)},title:(0,l.getLangMsg)("DesignerHeader.saveTips")},(0,l.getLangMsg)("DesignerHeader.save"))))},n(182320),n(909112),n(360776),n(443616),n(205960),n(846428),n(387912),n(660824);var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=s(e)&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,n&&n.set(e,r),r}(n(795520)),o=c(n(647868)),i=c(n(135944)),a=c(n(763032)),l=n(331428),u=c(n(671252));function c(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}var d="history",p="submit",b="temporaryStorage"},669384:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n(182320),n(909112),n(697060),n(360776),n(505684),n(693917),n(205960),n(976896),n(721300),n(846428),n(969e3),n(606200),n(534440),n(76152),n(76124),n(633768),n(690512),n(78504),n(776512),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n,r=e.model,O=e.dispatch,S=j((0,o.useState)(),2),k=S[0],I=S[1],h=j((0,o.useState)(),2),T=h[0],M=h[1],w=j((0,o.useState)([]),2),L=w[0],B=w[1],N=(0,o.useRef)(),D=(0,o.useRef)();(0,o.useEffect)((function(){var e=r.pageId,t=r.key,n=(0,s.subscribeControlMethod)(e,t,"directives",(function(e){void 0!==e&&A(e)}));return(0,s.setControlMount)(e,t,!0),function(){null==n||n()}}),[L]),(0,o.useEffect)((function(){if(k){var e=null==k?void 0:k[0];N.current=(null==k?void 0:k[1])||{},(0,p.getUiMetadata)(e).then((function(e){M(e)}))}}),[k]);var A=function(e){e.forEach((function(e){var t=e.methodname,n=e.args;switch(t){case d.OPEN:I(n);break;case d.SET_TABLE_INFO:R(n);break;case d.SET_DESIGNERBAR_VISIBLE:K(n);break;case d.SET_PROPERTY:G(n)}}))},R=(0,o.useCallback)((function(e){D.current&&D.current.setTableInfo(e)}),[]),K=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[])[0],t=e.visible,n=void 0===t||t,r=e.keys,o=void 0===r?[]:r,i=n?L.filter((function(e){return!o.includes(e)})):L.concat(o);B(i)},G=(0,o.useCallback)((function(e){var t;D.current&&(null===(t=D.current)||void 0===t||t.setProperty(e))}),[]),V=(0,o.useCallback)((function(e,t,n){var r=t.Id,o=n.Form,i=n.Extenddata||{},a=[],l=t[e]?{value:t[e]}:{};if("tableInfo"===i.Type){var u,c=null===(u=l.value)||void 0===u?void 0:u.RelTableId;a=D.current.data.findControlByCondition((function(e){return e.Id===c||e.ParentId===c}))}return[r,"dmmeta",e,P(P({form:(0,m.default)(o)},l),{},{context:a,item:{Id:r,_Type_:t._Type_}})]}),[]),W=(0,o.useCallback)((function(e,t){O((0,_.property_editor_click)(r,e,t))}),[r]),F=(0,o.useCallback)((function(e,t,n){if(!1!==n.Editable){var r=V(e,t,n);W("getPropertyAlias",r)}}),[]),x=(0,o.useCallback)((function(e,t,n){var o=V(e,t,n);O((0,v.btnEditClick)(r,o))}),[]),H=((0,i.useFederatedModule)("model").Component||{}).ModelDesigner,U=void 0===H?null:H,Y=(0,c.getCommonStyle)(r),z=(0,f.default)((0,c.getCommonClass)(r)),J="".concat(l.default.root," ").concat(z),Q=r.getUserLocale(),$=null==k||null===(t=k[1])||void 0===t?void 0:t.dmmeta,q=null==k||null===(n=k[1])||void 0===n?void 0:n.datatype,X=r.getMetaProperty(g.CONFIG_ITEMS),Z=null==X?void 0:X.get(g.LOGO);if("ie"===(0,E.getBrowserData)())return o.default.createElement(C.default,null);return U&&T&&$?o.default.createElement("div",{className:J,style:Y},o.default.createElement(u.default,{lang:Q,onBtnClick:function(e){["temporaryStorage","submit"].includes(e)&&O((0,y.convertAppModelFunctionAction)((0,y.setControlPostValue)(r.pageId,r.key,N.current))),O((0,v.designerBarClick)(r,e))},hideBtnsKey:L,logo:Z}),o.default.createElement("div",{className:l.default["designer-wrapper"]},o.default.createElement(U,{getLangMsg:a.getLangMsg,data:$,meta:T,dataTypes:q,showMessage:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=r.pageId,o={type:t,content:e,duration:2e3,level:b.MSG_LEVEL.warning,pageId:n};(0,y.setDataMessages)(n,o)},onData:function(e){N.current=(null==k?void 0:k[1])||{},N.current.dmmeta=e},onApi:function(e){D.current=P({},e)},onTableClick:function(e){var t=e.table,n=e.fields,o=void 0===n?[]:n;O((0,v.tableClick)(r,t,o))},handleCustomInputEditor:x,getPropertyAliasValue:F}))):null},n(9692),n(622676),n(233696),n(443616),n(323784),n(743924),n(387912),n(660824),n(997308),n(977864);var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=r(e)&&"function"!=typeof e)return{default:e};var n=S(t);if(n&&n.has(e))return n.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,n&&n.set(e,o),o}(n(795520)),i=n(869504),a=n(331428),l=O(n(835914)),u=O(n(503320)),c=n(439532),f=O(n(329132)),s=n(738704),d=n(794400),p=n(525896),b=n(545072),v=n(46400),y=n(218652),g=n(290600),m=O(n(768696)),_=n(887084),E=n(589200),C=O(n(810972));function O(e){return e&&e.__esModule?e:{default:e}}function S(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(S=function(e){return e?n:t})(e)}function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){I(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(e,t,n){var o;return o=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==r(o)?o:String(o))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],u=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}}}]);