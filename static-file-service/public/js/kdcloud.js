"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackJsonp_bos-platform"] = self["webpackJsonp_bos-platform"] || []).push([[3920],{

/***/ "./src/plugin/mobile/kdcloud/plugin.js":
/*!*********************************************!*\
  !*** ./src/plugin/mobile/kdcloud/plugin.js ***!
  \*********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\n\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.filter.js */ \"../../node_modules/core-js/modules/es.array.filter.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-properties.js */ \"../../node_modules/core-js/modules/es.object.define-properties.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptors.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptors.js\");\n__webpack_require__(/*! core-js/modules/es.object.keys.js */ \"../../node_modules/core-js/modules/es.object.keys.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = main;\n__webpack_require__(/*! core-js/modules/es.array.find.js */ \"../../node_modules/core-js/modules/es.array.find.js\");\n__webpack_require__(/*! core-js/modules/es.array.for-each.js */ \"../../node_modules/core-js/modules/es.array.for-each.js\");\n__webpack_require__(/*! core-js/modules/es.array.includes.js */ \"../../node_modules/core-js/modules/es.array.includes.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-string.js */ \"../../node_modules/core-js/modules/es.date.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.promise.js */ \"../../node_modules/core-js/modules/es.promise.js\");\n__webpack_require__(/*! core-js/modules/es.regexp.to-string.js */ \"../../node_modules/core-js/modules/es.regexp.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.string.includes.js */ \"../../node_modules/core-js/modules/es.string.includes.js\");\n__webpack_require__(/*! core-js/modules/es.string.starts-with.js */ \"../../node_modules/core-js/modules/es.string.starts-with.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ \"../../node_modules/core-js/modules/web.dom-collections.for-each.js\");\nvar _console = _interopRequireDefault(__webpack_require__(/*! ../../../api/console */ \"./src/api/console.js\"));\nvar _PluginManager = __webpack_require__(/*! ../../PluginManager */ \"./src/plugin/PluginManager.js\");\nvar _intlApi = __webpack_require__(/*! @/i18n/intlApi */ \"./src/i18n/intlApi.js\");\nvar _PluginManager2 = __webpack_require__(/*! @/plugin/PluginManager */ \"./src/plugin/PluginManager.js\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); } /**\n *  云之家移动端插件\n * @author daosheng_chen\n */\n/**\n    *插件入口函数\n    *\n    * @param {*} loadjs:加载服务器文件api,\n    * @param {m} releaseResource:关闭轻应用前，释放对应服务器资源(后台用于性能优化),移动端用\n    * @param {*} callback 插件安装后，回调 ,callback必须调用，否则程序无法继续和加载运行\n    */\nfunction main(_ref, callback) {\n  var loadjs = _ref.loadjs,\n    releaseResource = _ref.releaseResource,\n    getRootConfigPromise = _ref.getRootConfigPromise;\n  var completeResolve;\n  (0, _PluginManager.setWaitPluninCompletePromise)(new Promise(function (resolve) {\n    completeResolve = resolve;\n  }));\n  var BASE_KDCLOUDAPPURL = 'https://app.kdcloud.com/staticPage/public/js/jsBridge/latest/kdcloud.min.js';\n  loadjs(BASE_KDCLOUDAPPURL, {\n    success: function success() {\n      _console[\"default\"].log('金蝶云插件加载成功');\n      completeResolve();\n    },\n    error: function error() {\n      _console[\"default\"].error('金蝶云插件加载失败');\n      completeResolve();\n    }\n  });\n  var plugin = {\n    setWebViewTitle: function setWebViewTitle(title) {\n      window.kdcloud.call('setWebViewTitle', {\n        title: title\n      });\n    },\n    // 隐藏页面标题\n    hideWebViewTitle: function hideWebViewTitle() {\n      window.kdcloud.call('hideWebViewTitle');\n    },\n    // 关闭轻应用界面\n    closeWebView: function closeWebView() {\n      try {\n        releaseResource(); // 通知释放服务器页面资源\n      } catch (error) {\n        _console[\"default\"].error('releaseResource', error);\n      }\n      window.kdcloud.call('closeWebView');\n    },\n    // 自定义右上角菜单\n    createPop: function createPop(_ref2, callback) {\n      var poptitle = _ref2.poptitle,\n        items = _ref2.items;\n      var data = {};\n      if (items && items.length > 0) {\n        if (items.length === 1) {\n          data.popTitle = items[0].title;\n          data.popTitleCallBackId = items[0].callbackId;\n        } else {\n          data.popTitle = poptitle || '...';\n          data.popTitleCallBackId = 'callbackId';\n          items.forEach(function (item) {\n            var title = item.title;\n            var callbackId = item.callbackId;\n            if (callbackId === 'refresh' || callbackId === 'openWithBrowser') {\n              data.menuList = data.menuList ? data.menuList : [];\n              data.menuList.push(callbackId);\n            } else {\n              data.items = data.items ? data.items : [];\n              data.items.push({\n                text: title,\n                callBackId: callbackId\n              });\n            }\n          });\n        }\n        window.kdcloud.call('createPop', _objectSpread(_objectSpread({}, data), {}, {\n          success: function success(result) {\n            callback(result);\n          }\n        }));\n      } else {\n        _console[\"default\"].error('items不存在');\n      }\n    },\n    // 关闭右上角菜单\n    closePop: function closePop() {\n      window.kdcloud.call('closePop');\n    },\n    // 旋转界面\n    rotateUI: function rotateUI(data, callbackToServer) {\n      // callYZJApi的参数是简单类型\n      // callAPPApi的参数是对象\n      var direction = Object.prototype.toString.call(data) === '[object Object]' ? data.direction : data;\n      var directions = ['portrait', 'landscape', 'sensor'];\n      window.kdcloud.call('rotateUI', {\n        orientation: directions[direction]\n      });\n    },\n    selectPic: function selectPic() {\n      var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var callback = arguments.length > 1 ? arguments[1] : undefined;\n      window.kdcloud.call('selectPic', _objectSpread(_objectSpread({}, data), {}, {\n        success: function success(result) {\n          callback(result);\n        }\n      }));\n    },\n    previewImage: function previewImage() {\n      var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var current = data.current,\n        urls = data.urls;\n      current && urls && window.kdcloud.call('previewImage', data);\n    },\n    savePic: function savePic() {\n      var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var callback = arguments.length > 1 ? arguments[1] : undefined;\n      window.kdcloud.call('savePic', _objectSpread(_objectSpread({}, data), {}, {\n        filePath: data.url,\n        success: function success(result) {\n          callback(result);\n        }\n      }));\n    },\n    showFile: function showFile(data) {\n      window.kdcloud.call('showFile', data);\n    },\n    releasePageBeforeClose: function releasePageBeforeClose(data) {\n      window.kdcloud.call('defback', {\n        success: function success() {\n          // 如果是page，并且page的config设置需要发送关闭请求到后端\n          var shouldCLoseWebView = data.shouldCLoseWebView;\n          var requestClosePage = data.requestClosePage;\n          if (requestClosePage()) {\n            // 请求服务器关闭页面\n            return;\n          }\n          if (shouldCLoseWebView && shouldCLoseWebView()) {\n            try {\n              releaseResource(); // 通知释放服务器页面资源\n            } catch (error) {\n              _console[\"default\"].error(error);\n            }\n            window.kdcloud.call('closeWebView');\n            return;\n          }\n          if (window.history.length <= 1) {\n            window.kdcloud.call('closeWebView');\n          } else {\n            window.history.back();\n          }\n        }\n      });\n      window.kdcloud.call('defClose', {\n        success: function success() {\n          try {\n            releaseResource(); // 通知释放服务器页面资源\n          } catch (error) {\n            _console[\"default\"].error('releaseResource', error);\n          }\n          window.kdcloud.call('closeWebView');\n        }\n      });\n    },\n    setClipboardData: function setClipboardData(data) {\n      window.kdcloud.call('clipBoard', {\n        type: 'setString',\n        string: data,\n        success: function success(res) {\n          _console[\"default\"].log('setClipboardData:', res.error);\n        }\n      });\n    },\n    getDevicedMsg: function getDevicedMsg(data, callback) {\n      window.kdcloud.call('getDevice', {\n        success: function success(res) {\n          _console[\"default\"].log('setClipboardData:', res.error);\n          var devicedMsg = {};\n          devicedMsg.deviceId = res.data.deviceId;\n          devicedMsg.deviceName = res.data.deviceName;\n          devicedMsg.os = res.data.os;\n          devicedMsg.brand = res.data.brand;\n          devicedMsg.model = res.data.model;\n          devicedMsg.clientId = res.data.clientId;\n          var callbackData = {\n            success: true,\n            data: devicedMsg\n          };\n          callback(callbackData);\n        }\n      });\n    },\n    // 获取设备语言信息\n    getDevicedLang: function getDevicedLang(data, callback) {\n      var qingUserAgent = window.navigator.userAgent;\n      var langMsg = qingUserAgent.split(';').find(function (item) {\n        return item.startsWith('lang:');\n      }) || 'lang:zh';\n      var lang = '';\n      if (langMsg.includes('zh-TW')) {\n        lang = 'zh_TW';\n      } else if (langMsg.includes('zh')) {\n        lang = 'zh_CN';\n      } else {\n        lang = (0, _intlApi.getLanguage)(langMsg);\n      }\n      var callbackData = {\n        success: true,\n        data: lang\n      };\n      callback(callbackData);\n    },\n    scanQRCode: function scanQRCode() {\n      var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var callback = arguments.length > 1 ? arguments[1] : undefined;\n      window.kdcloud.call('scanQRCode', _objectSpread(_objectSpread({}, data), {}, {\n        success: function success(result) {\n          callback(result);\n        }\n      }));\n    },\n    shareImage: function shareImage() {\n      var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var callback = arguments.length > 1 ? arguments[1] : undefined;\n      window.kdcloud.call('shareImage', _objectSpread(_objectSpread({}, data), {}, {\n        success: function success(result) {}\n      }));\n    },\n    shareUrl: function shareUrl() {\n      var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var callback = arguments.length > 1 ? arguments[1] : undefined;\n      window.kdcloud.call('shareUrl', _objectSpread(_objectSpread({}, data), {}, {\n        success: function success(result) {}\n      }));\n    },\n    openCamera: function openCamera() {\n      var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var callback = arguments.length > 1 ? arguments[1] : undefined;\n      window.kdcloud.call('openCamera', _objectSpread(_objectSpread({}, data), {}, {\n        success: function success(result) {\n          callback(result);\n        }\n      }));\n    }\n  };\n  (0, _PluginManager2.loadDynamicPlugin)(plugin); // 把插件api挂载在全局指定的插件名上\n  callback && callback(true);\n}\n\n//# sourceURL=webpack://bos-platform/./src/plugin/mobile/kdcloud/plugin.js?");

/***/ })

}]);