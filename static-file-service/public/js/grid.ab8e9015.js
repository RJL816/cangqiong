(self["webpackJsonp_bos-platform"]=self["webpackJsonp_bos-platform"]||[]).push([[816,3524,3724],{864484:function(e,t,r){"use strict";r.r(t),t.default={"grid-filter-modal":"_2mNgF-pk",icon:"_2wgLVsKq","search-headr":"_2jGcShsv","search-box":"_1Q67Bd2I","search-input":"_1ZLCORdx",splite:"_1zyeQN9e","search-btn":"L9pDC_yx","no-found-box":"_3PF2bm8P"}},220716:function(e,t,r){"use strict";r.r(t),t.default={"agregate-row-overlay":"_2nvAoGUC","agregate-row-fold-content":"_3mGfP99T",kdfont:"_33Wduyiy","tile-aggregate":"_2OMu1vjG"}},489480:function(e,t,r){"use strict";r.r(t),t.default={"toolbar-bottom":"AAhtLpym"}},452860:function(e,t,r){"use strict";r.r(t),t.default={"virtual-view-toolbar":"_3t4l7Cu2","toolbar-content":"_6Vj4GsXR","toolbar-selected-button":"_32XGM-6Z","pagination-info":"_1psvFvHz"}},234972:function(e,t,r){"use strict";r.r(t),t.default={"view-container":"_3rfkeAlZ","tile-content":"_1JH3JFUl",outline:"_1GkL3LVE","outline-item":"_2XNKVbZ5","norow-overlay":"_1NhKuhts","norow-overlay-img":"_1Wg7eBxe","outline-item-select":"_3JlXnk2w"}},542088:function(e,t,r){"use strict";r.r(t),t.default={"ag-shake-left-to-right":"_3kTH9VCG"}},913116:function(e,t,r){"use strict";r.r(t)},759016:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(743924),r(205960),r(297336),r(846428),r(708896),r(606200),r(534440),r(670864),r(880920),r(387912),r(836887),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(336368),r(571176);var o=P(r(795520));r(542088),r(913116);var i,a=T(r(790832)),l=T(r(671252)),u=r(891052),s=T(r(84904)),d=P(r(994104)),c=P(r(899760)),f=P(r(704424)),g=P(r(735696)),p=r(552032),y=r(251536),m=T(r(308344)),v=r(218652),h=r(439532),b=T(r(429208)),C=T(r(348896)),w=T(r(329132)),S=T(r(579320)),E=r(102139),I=r(457500),R=T(r(882976));function T(e){return e&&e.__esModule?e:{default:e}}function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(O=function(e){return e?r:t})(e)}function P(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=O(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}function D(){return D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},D.apply(this,arguments)}function A(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_(n.key),n)}}function _(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function M(e,t,r){return t=L(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,k()?Reflect.construct(t,r||[],L(e).constructor):t.apply(e,r))}function k(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(k=function(){return!!e})()}function L(e){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},L(e)}function j(e,t){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},j(e,t)}var N=(0,C.default)(!0,!0)(i=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=M(this,t,[e])).refresh=function(){r.setState({refreshStatus:!r.state.refreshStatus})},r.setGridReady=function(){r.setState({gridReady:!0,refreshStatus:!r.state.refreshStatus})},r.setGridInitialized=function(e){r.initialized=!0,r.gridContainer=e},r.getGridViewSize=function(e){r.gridViewSize=e,r.viewRefresh()},r.viewRefresh=function(){!r.clientVisible&&r.gridContainer&&r.gridViewSize&&r.gridViewSize.height>0&&(R.default.log("AgGrid: grid visible again and refresh"),r.setState({refreshStatus:!r.state.refreshStatus}))},r.setNotActivedSelectRowsRecord=function(e,t){e&&t&&(!1===r.props.isActived&&!0===e.isActived?r.notActivedSelectRowsRecord=t.getDataProperty(["slctState"]):!0===r.props.isActived&&!1===e.isActived&&(r.notActivedSelectRowsRecord=null))},r.getGridShell=function(e){var t=r.props,n=t.model,o=t.dispatch,i=n.getMetaProperty("hh");i=isNaN(parseInt(i))?32:parseInt(i);var a={minHeight:"190px"};a=Object.assign(a,e,(0,h.getVisibleStyle)(a,r.props.isVisible));var u,s,c,f=(0,h.getCommonClass)(n),g=f.Grow,p=f.Shrink,y=(0,l.default)((u={"ag-theme-material-kd":!0},s=b.default.gridContainer,c=!0,(s=_(s))in u?Object.defineProperty(u,s,{value:c,enumerable:!0,configurable:!0,writable:!0}):u[s]=c,u),(0,w.default)({Grow:g,Shrink:p}));return(0,S.default)({style:a,className:y,headerHeight:i,hasToolbar:!0,model:n,toolBarBtnClick:function(){return o(d.toolBarBtnClick.apply(d,arguments))},advGridId:r.props.parentModel&&r.props.parentModel.key})},r.getToolbarLocation=function(e){return(0,E.getGridMetaAndUIDefaultProps)(r.props.model,e,{metaPropertyPath:[I.gridPropNameMap[s.default.TOOLBAR_LOCATION][0]],uiPropertyPath:[s.default.TOOLBAR_LOCATION]})||"0"},r.getHasBorder=function(e){return(0,E.getGridMetaAndUIDefaultProps)(r.props.model,e,{metaPropertyPath:[I.gridPropNameMap[s.default.BORDERED][0]],uiPropertyPath:[s.default.BORDERED]})},r.state={refreshStatus:!1,gridReady:!1},r.clientVisible=!0,r.renderTimer=null,r.initialized=!1,r.calculagraph=a.default.throttle(r.refresh,200),r.forAutoTestActions={cellChange:d.cellChange,toolBarBtnClick:d.toolBarBtnClick,entryRowDoubleClick:d.entryRowDoubleClick,EntityRowClick:d.EntityRowClick,setAmountOperation:d.setAmountOperation,hyperLinkClick:d.hyperLinkClick,click:c.click},r}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j(e,t)}(t,e),r=t,n=[{key:"componentWillReceiveProps",value:function(e){var t=e.parentModel||e.model,r=this.props.parentModel||this.props.model,n=this.props.formStatus!==e.formStatus,o=this.props.isVisible!==e.isVisible;(0,u.is)(this.props.model.meta,e.model.meta)&&(0,u.is)(r.componentData,t.componentData)&&!n&&!o||this.calculagraph()}},{key:"shouldComponentUpdate",value:function(e,t,r){if(!this.gridRendered)return!0;var n=!1;this.state.refreshStatus!=t.refreshStatus&&(n=!0),!1!==this.initialized&&!1!==t.gridReady||(n=!1);var o=e.parentModel||e.model,i=this.props.parentModel||this.props.model;if(this.setNotActivedSelectRowsRecord(e,o),!0===n){if(!this.props.isVisible&&e.isVisible)return this.clientVisible=!0,!0;this.gridViewSize.height<=0?(this.clientVisible=!1,R.default.log("AgGrid: grid not visible and return"),n=!1):this.clientVisible||(this.clientVisible=!0,n=!0)}var a=i.pageId,l=(0,v.getTipForms)(a)(i.state),s=(0,v.getTipForms)(a)(o.state);return(0,u.is)(l,s)||(n=!0),this.props.isLocked!==e.isLocked&&(n=!0),n}},{key:"styleTransfer",value:function(e,t){var r={borderBottom:!0,borderLeft:!0,borderRight:!0,borderTop:!0,height:!0};for(var n in r)e[n]=t[n],r[n]&&delete t[n]}},{key:"render",value:function(){var e=this.props,t=e.model,r=e.dispatch,n=t.getMetaLocaleProperty("text"),i=t.getMetaProperty("collapsible"),a=t.getMetaProperty("defaultcollapse"),l=Object.assign({},(0,h.getCommonStyle)(t),(0,h.getVisibleStyle)({},this.props.isVisible)),s=t.getMetaProperty("gridtype"),v=this.getToolbarLocation(s),b=this.getHasBorder(s),C=t.getMetaProperty("keyFieldId"),w={};i?this.styleTransfer(w,l):w=l;var S=t.getMetaProperty("columns");if(null==S||!u.List.isList(S)||S.size<=0)return this.getGridShell(w);this.gridRendered=!0;var E=Object.assign({},d,c,y.updateContrlStatesByKey,f,g,{invokeCustomMethod:p.invokeCustomMethod});return o.default.createElement(m.default,D({},this.props,(0,h.createActions)(E,r),{pageId:t.pageId,alreadyReady:this.state.gridReady,setGridInitialized:this.setGridInitialized,setGridReady:this.setGridReady,getGridViewSize:this.getGridViewSize,Collapsible:i,defaultCollapse:a,Name:n,style:l,gridStyle:w,toolbarLocation:v,showFormByTips:function(){return r(f.showFormByTips.apply(f,arguments))},showFormByTipsInAction:function(){return r(f.showFormByTips.apply(f,arguments))},notActivedSelectRowsRecord:this.notActivedSelectRowsRecord,bordered:b,keyFieldId:C}))}},{key:"componentWillUnmount",value:function(){clearInterval(this.renderTimer)}}],n&&A(r.prototype,n),i&&A(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(o.Component))||i;t.default=N},308344:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(505684),r(205960),r(976896),r(721300),r(846428),r(708896),r(969e3),r(606200),r(534440),r(76152),r(670864),r(880920),r(836887),r(690512),r(776512),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(622676),r(305092),r(233696),r(443616),r(241872),r(323784),r(743924),r(835164),r(693917),r(704180),r(297336),r(336368),r(76124),r(387912),r(571176),r(633768),r(764840),r(660824),r(78504),r(513640),r(997308),r(977864),r(86744);var o,i,a=ve(r(795520)),l=ye(r(790832)),u=r(575400),s=r(891052),d=ye(r(585232)),c=ve(r(211152)),f=r(614912),g=r(837592),p=r(350960),y=r(102139),m=ye(r(352260)),v=r(439532),h=ye(r(329132)),b=ye(r(671252)),C=ye(r(429208)),w=ye(r(193928)),S=ye(r(197168)),E=ye(r(348896)),I=r(218652),R=ve(r(889960)),T=ye(r(36616)),O=ye(r(760700)),P=ye(r(139224)),D=ye(r(882976)),A=r(494184),_=r(867952),M=r(827912),k=r(905279),L=r(788876),j=r(738704),N=ye(r(801056)),V=ye(r(579320)),K=r(286076),F=r(993916),x=r(399992),G=ye(r(958232)),B=ye(r(94660)),H=ye(r(925908)),W=r(331428),z=r(273248),U=r(651604),q=ye(r(362964)),Y=r(94880),Z=ye(r(212352)),X=r(968392),$=r(317344),J=ye(r(343624)),Q=ye(r(7960)),ee=r(703188),te=r(663416),re=r(992928),ne=r(658092),oe=r(816880),ie=r(251536),ae=r(868256),le=r(674260),ue=r(545072),se=ye(r(873548)),de=ye(r(943688)),ce=r(235708),fe=r(633016),ge=ve(r(600192)),pe=r(359844);function ye(e){return e&&e.__esModule?e:{default:e}}function me(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(me=function(e){return e?r:t})(e)}function ve(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=me(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}function he(){return he=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},he.apply(this,arguments)}function be(e){return function(e){if(Array.isArray(e))return Re(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ie(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function we(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(r),!0).forEach((function(t){Se(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Se(e,t,r){return(t=Oe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||Ie(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ie(e,t){if(e){if("string"==typeof e)return Re(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Re(e,t):void 0}}function Re(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Te(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Oe(n.key),n)}}function Oe(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function Pe(e,t,r){return t=Ae(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _e(e)}(e,De()?Reflect.construct(t,r||[],Ae(e).constructor):t.apply(e,r))}function De(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(De=function(){return!!e})()}function Ae(e){return Ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ae(e)}function _e(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Me(e,t){return Me=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Me(e,t)}var ke=[],Le=(o=(0,E.default)(!0,!0),(0,S.default)(i=o(i=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Pe(this,t,[e])).updateSubGrid=function(e,t){var n=e.model,o=t.model;(0,s.is)(n.getDataProperty("subMeta"),o.getDataProperty("subMeta"))||(0,_.updateSubGridMeta)(t,r.gridContrlParams.rowDetailParams,r.api)},r.handleContextMenu=function(e){r.api.getEditingCells().length>0&&e.stopPropagation()},r.saveCacher=function(){var e=r.props.model,t=(0,j.getPageUIState)(e.pageId),n={},o={},i={},a=(t&&t.toJS&&t.toJS()||{})[e.key];a&&(n=a[z.SETTING_COLUMN_WIDTH]||{},i=a[z.SETTING_AUTOSIZE_COLUMN_WIDTH]||{},o=a[z.SETTING_COLUMN_MAX_WIDTH]||{}),(0,j.setPageUIState)(r.props.model,[z.SETTING_COLUMN_WIDTH],Object.assign(n,r.columnWidthSetting[z.SETTING_COLUMN_WIDTH])),(0,j.setPageUIState)(r.props.model,[z.SETTING_AUTOSIZE_COLUMN_WIDTH],Object.assign(i,r.columnWidthSetting[z.SETTING_AUTOSIZE_COLUMN_WIDTH])),(0,j.setPageUIState)(r.props.model,[z.SETTING_COLUMN_MAX_WIDTH],Object.assign(o,r.columnWidthSetting[z.SETTING_COLUMN_MAX_WIDTH]))},r._getSumData=function(){(0,F.getSumData)(_e(r))},r.handleGridStartEdit=function(e){var t=e.shiftKey,n=e.isModule,o=r.getFirstEditableCell(!n&&t);if(o){var i=o.rk,a=o.colId;return r.setFocusedCell([i,a]),void setTimeout((function(){r.setActiveCell({r:i,k:a})}))}n?(0,re.handleToNextModule)(t,r.gridContainer):(0,re.handleToNextField)(t,r.gridContainer)},r.setCellFocusAndActive=function(e,t){var n=t.toNext,o=void 0!==n&&n;if(e){var i=e.rowIndex,a=e.colId;o?f.modelFuncs.focusToNextCell(e,{api:r.api,columnApi:r.columnApi,colLockFunc:r.isCellLocked,toNextField:function(){return(0,re.handleToNextField)(!1,r.gridContainer)}}):f.modelFuncs.jumpToEditorCell(r.api,i,a,void 0)}},r.sortDataChangeHandle=function(){if(r.gridContrlParams.isVirtualView||r.gridContrlParams.isEntryEntity){var e=(0,j.getPageData)(r.props.model.pageId,[r.gridState.gridId,z.GRID_SORTED_DATA]);e&&r.postGridSorted(e),r.removeSortDataChangeListener=(0,j.addDataChangeListener)(r.props.model.pageId,[r.gridState.gridId,z.GRID_SORTED_DATA],r.postGridSorted)}},r.serverfilterDataChangeHandle=function(){var e=(0,j.getPageData)(r.props.model.pageId,[r.gridState.gridId,z.RESET_FILTER_DATA]);e&&r.delayFuncs.push((function(){return r.postGridServerFilter(e)})),r.removeServerFilterDataChangeListener=(0,j.addDataChangeListener)(r.props.model.pageId,[r.gridState.gridId,z.RESET_FILTER_DATA],r.postGridServerFilter)},r.handlePermission=function(e){e&&((0,M.buildColDefs)(r.props,_e(r)),r.resetCols())},r.forceUpdateOnThemeChanged=function(){(0,F.handleThemeChangedBeforeRefresh)(_e(r)),(0,M.buildProps)(r.props,_e(r),{isBuildColDefs:!0}),(0,U.setOperationColPinnedStatus)({gridState:r.gridState,columnApi:r.columnApi,gridContainerI:r.gridContainerI,setGridThisProp:r.setGridThisProp,getGridThisProp:r.getGridThisProp}),r.refresh((function(){r.delayAutoSizeColumns()}))},r.setEncodeData=function(e){e&&(r.encodeKeys=e,(0,M.buildColDefs)(r.props,_e(r)))},r.refresh=function(e){r.setState({refreshStatus:!r.state.refreshStatus},(function(){e&&e()}))},r.forceUpdate=function(){r.setState({refreshStatus:!r.state.refreshStatus,isForceUpdate:!0},(function(){r.props.setGridInitialized(r.gridContainer)}))},r.updateDisplayRows=function(){var e=r.api.getFirstDisplayedRow(),t=r.api.getLastDisplayedRow(),n=r.gridRows.slice(e,t+1);D.default.log("updateDisplayRows",n),r.api.updateRowData({update:n})},r.resetEntryEntityForDirtyData=function(){if(r.isEntryEntity()){var e=r.gridState,t=e.pageId,n=e.gridId;(0,j.getPageData)(t,[n,"dirtyCells"])&&r.api&&r.dataRows&&r.oldDataRows&&r.dataRows.size>0&&r.dataRows.size===r.oldDataRows.size&&(0,s.is)(r.dataRows,r.oldDataRows)&&(D.default.log("has dirty cell, fresh entry entity"),r.updateDisplayRows(),(0,j.setPageData)(t,[n,"dirtyCells"]))}},r.resetBillListForDirtyData=function(){if(r.gridContrlParams&&r.gridContrlParams.isListView){var e=r.gridState,t=e.pageId,n=e.gridId,o=(0,j.getPageData)(t,[n,"dirtyRowIndexs"]);o&&o.size>0&&r.api&&r.dataRows&&r.oldDataRows&&r.dataRows.size>0&&r.dataRows.size===r.oldDataRows.size&&(0,s.is)(r.dataRows,r.oldDataRows)&&(D.default.log("has dirty rows, fresh bill list"),r.updateDisplayRows()),o&&(0,j.setPageData)(t,[n,"dirtyRowIndexs"])}},r.clearCustomColInfos=function(){r[z.GRID_CUSTOM_COL_SCHEMA_INFOS]={}},r.hasNavigation=function(){var e=r.gridContrlParams,t=e.isVirtualView,n=e.isListView,o=e.showSelectionItem,i=e.hasSelectAllRow,a=e.isShowVirtualViewRowCount,l=r.dataDesc.phide,u=null!=l?!l:!r.gridContrlParams.hideNavigation,s="single"===r.gridOptions.rowSelection||t&&!o,d=!r.isLargeData||r.isShowLargeDataCount,c=a&&d&&r.dataDesc.datacount>0;return(n||t&&(i||c||d&&!s)||!0===r.dataDesc.isSplitPage)&&u},r.getNavigationDefaultHeight=function(){return!r.gridContrlParams.isListView||"1"!==r.props.toolbarLocation||r.gridState.config&&r.gridState.config.isf7?y.TOOLBARHEIGHT.min:y.TOOLBARHEIGHT.max},r.onToolbarSizeChanged=function(e){var t=e.height;t>0&&(r.navigationRenderHeight=t,r.gridContainerI.style.height=r.gridViewSize.height-t+"px")},r.getNavigationHeight=function(){return r.navigationRenderHeight||r.getNavigationDefaultHeight()},r.getNodeByRowKey=function(e){var t=null;if(!r.api)return t;if(t=r.api.getRowNode(e+""))return t;D.default.warn("getNodeByRowKey mismatched!",e);var n=r.gridState.rk;return r.api.forEachNode((function(r){t||e===(r.data&&r.data[n])&&(t=r)})),t},r.getNodeByRowIndex=function(e){var t=null;return r.api?(t=r.api.getDisplayedRowAtIndex(e))||null:t},r.resetCols=function(){r.api.setColumnDefs(r.gridState.columnDefs)},r.resetColsWithColumnsState=function(){r.columnApi.getColumnState().forEach((function(e){var t=(0,y.childrenLookUp)(r.gridState.columnDefs,(function(t){return t.field===e.colId}));t&&(t.width=e.width)})),r.api.setColumnDefs(r.gridState.columnDefs)},r.postHeaderTipsAction=function(){},r.getRowClass=function(e){return"my-class"},r.reSizeHeight=function(e){!r.gridContainer||r.gridContainer.offsetHeight<=0?r.delayFuncs.push((function(){return f.expandHeight.call(_e(r),e)})):f.expandHeight.call(_e(r),e)},r.reSizeHeightByLimit=function(e){r.gridContrlParams.autoHeight||r.reSizeHeight(e)},r.resetRowHeightsAndGridHeight=function(e){var t=r.api.getEditingCells()[0],n=r.api.getFocusedCell();if(e||0===e){var o=r.api.getRowNode(e);o.setRowHeight(),r.api.onRowHeightChanged(),r.gridContrlParams.isEntryEntity&&r.gridContrlParams.autoHeight&&(r.api.redrawRows({rowNodes:[o]}),r.resetEditingOrFocusedCell(t,n))}else r.api.resetRowHeights(),r.gridContrlParams.isEntryEntity&&(r.api.redrawRows(),r.resetEditingOrFocusedCell(t,n));setTimeout((function(){r.reSizeHeight({})}),0)},r.resetEditingOrFocusedCell=function(e,t){if(e||t){var n=e||t,o=n.rowIndex,i=n.column.colId;e?r.api.startEditingCell({rowIndex:o,colKey:i}):r.api.setFocusedCell(o,i)}},r.setColVisible=function(e){r.gridState.columnDefs=(0,p.modifyColDefs)(r.gridState.columnDefs,{action:"colVisb",gridOptions:r.gridOptions,gridContrlParams:r.gridContrlParams,localeId:r.gridState.localeId||r.gridState.defaultLocalId,defaultLocalId:r.gridState.defaultLocalId,meta:e.model.meta.toJS(),funcs:{getColProperty:r.getColProperty,getVisibleByNum:r.getVisibleByNum}}),r.gridContrlParams.mergeModel&&r.gridContrlParams.mergeModel.findBorderCols(r.gridState.columnDefs),r.gridContrlParams.mergeColumns.length>0&&(r.rightBorderMergeCols=(0,ne.getRightBorderMergeCols)(r.gridState.columnDefs,r.gridContrlParams.mergeColumns))},r.shouldUpdate=function(e,t){var n={delayFuncs:r.delayFuncs,updateFuncList:r.updateFuncList,getVisible:v.getVisible,dataMatched:!0},o=f.updateIntercept.call(_e(r),e,t,n);return void 0!==o.updateFlag?o.updateFlag:"none"===r.gridState.styles.display&&e.isVisible?(r.setVisible(e),!0):r.gridViewSize.height<=0||r.gridContainer.offsetHeight<=0?(r.clientVisible=!1,!1):r.clientVisible?r.state.refreshStatus!=t.refreshStatus||(!(!r.gridContrlParams.isVirtualView||n.dataMatched)||(r.props.isLocked!==e.isLocked||(void 0!==(o=f.simpleDataDiffer.call(_e(r),e,t,n)).updateFlag?(!0===o.updateFlag&&r.isEntryEntity()&&r.delayFuncs.push((function(){r.api.redrawRows({rowNodes:r.api.getRenderedNodes()})})),o.updateFlag):(r.updateFuncList.forEach((function(e){return e()})),r.updateFuncList=[],r.delayFuncs.forEach((function(e){return e({execSource:"onShouldComponentUpdate"})})),r.delayFuncs=[],!1)))):(r.clientVisible=!0,!0)},r.forceRefreshEntryEntity=function(){r.gridContrlParams.isEntryEntity&&(r._alreadyAddForceRefresh||(r.delayFuncs.unshift((function(){r.api&&r.api.redrawRows({rowNodes:r.api.getRenderedNodes()}),r._resetLayout(),r._alreadyAddForceRefresh=!1})),r._alreadyAddForceRefresh=!0))},r.postColumnFilter=function(e){e&&(e=e.toJS?e.toJS():e,r.publishRowSortFilter(e,"filter",!0))},r.postGridSorted=function(e){e||(e={}),r.sortFilterColumn.sortColumn=e,r.remindSortedChange(e)},r.postGridServerFilter=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(0===e.length){Object.keys(r.sortFilterColumn.filterColumn||{}).forEach((function(e){var t;return null===(t=r.api)||void 0===t?void 0:t.destroyFilter(e)}));var t={};r.sortFilterColumn.filterColumn=t,(0,j.setPageData)(r.gridState.pageId,[r.gridState.gridId,"filter"],t)}else{var n=Ee(e,1)[0];r.sortFilterColumn.filterColumn={},n.forEach((function(e){var t,n=e.cp,o=e.k,i=e.v,a=Array.isArray(i)?i:[""],l={colId:o,value:{type:n,filter:(0,y.isEnumColumn)(null===(t=r.columnApi)||void 0===t||null===(t=t.getColumn(o))||void 0===t?void 0:t.colDef)?a:a[0]}};r.sortFilterColumn.filterColumn[o]=l.value,(0,j.setPageData)(r.gridState.pageId,[r.gridState.gridId,o,"filter","data"],l)})),(0,j.setPageData)(r.gridState.pageId,[r.gridState.gridId,"filter"],r.sortFilterColumn.filterColumn)}},r.setGridThisProp=function(e,t){r[e]=t},r.getGridThisProp=function(e){if(e)return r[e]},r.getApi=function(){return r.api},r.getColumnApi=function(){return r.columnApi},r.startEditingCellAndRecord=function(e,t,n){var o,i;null===(o=r.api)||void 0===o||o.startEditingCell({rowIndex:e,colKey:t}),(0,y.isColumnOfNoEditor)(null===(i=r.columnApi)||void 0===i||null===(i=i.getColumn(t))||void 0===i?void 0:i.colDef.colType)&&r.setGridThisProp(z.LAST_EDIT_CELL,{rowIndex:e,rowKey:n,colId:t})},r.calculatePreferredColumnsWidthWrap=function(e,t){var n=(r.gridContrlParams||{}).columnResizeMode;return r.columnApi&&r.gridContainerI&&(0,f.calculatePreferredColumnsWidth)(e,r.columnApi,{eGridContainer:r.gridContainerI,ignoreMaxWidth:n===z.GRID_COLUMN_RESIZE_MODE.preset||"contextMenu"===t})},r.setColumnsWidthAndCacheByAutoSize=function(e,t){var n=_e(r),o=n.api,i=n.columnApi,a=n.gridContrlParams,l=n.gridState;if(o&&a){var u=(t||{}).isSetWidth,s=void 0===u||u;e.forEach((function(e){s&&i.setColumnWidth(e.colId,e.width,!1),e.colId!==l.seq&&(r.columnWidthSetting[z.SETTING_AUTOSIZE_COLUMN_WIDTH][e.colId]=e.width)}))}},r.autoSizeColumns=function(e){var t=e||{},n=t.columnByRightKey,o=t.columns,i=t.isAllCol,a=void 0===i||i,l=t.ignoreEditStatus,u=t.source,s=_e(r),d=s.api,c=s.columnApi,f=s.gridContrlParams;if(d&&f){var g=f.gridEditable,p=f.autoHeight,m=f.columnResizeMode;if(!p){var v=function(){var e=(0,y.getTargetColumnsForAutoSize)({api:d,columnApi:c,columnByRightKey:n,columns:o},a,{gridEditable:g,ignoreEditStatus:l,seq:r.gridState.seq,getColWidthFromSettings:r.getColWidthFromSettings}),t=r.calculatePreferredColumnsWidthWrap(e,u);return 0===d.getDisplayedRowCount()?t.map((function(e){var t=e.width;return e.colId!==r.gridState.seq&&(e.width=t+z.EMPTY_DATA_COL_PADDING),e})):t};if(m===z.GRID_COLUMN_RESIZE_MODE.adaptive||"contextMenu"===u)r.setColumnsWidthAndCacheByAutoSize(r.getGreedyAutoSizeColWidths({columnsWidthSet:v()}));else if(m===z.GRID_COLUMN_RESIZE_MODE.fit){var h=v();r.colWidthAutoFull({columnsWidthSet:h})?r.setColumnsWidthAndCacheByAutoSize(h,{isSetWidth:!1}):r.setColumnsWidthAndCacheByAutoSize(h)}else m===z.GRID_COLUMN_RESIZE_MODE.preset&&r.colWidthAutoFull();r.gridContrlParams.isTitleAutoHeight&&"contextMenu"===u&&setTimeout((function(){r.reSizeHeightByLimit({})}),0)}}},r.delayAutoSizeColumns=function(){window.requestAnimationFrame((function(){r.autoSizeColumns()}))},r.addEventForDelayAutoSizeColumns=function(){r.gridEventService.addEventListener(Q.default.animationQueueEmpty,r.delayAutoSizeColumns,{once:!0})},r.animationQueueEmpty=function(){if(r.lastFocusCell){var e=r.lastFocusCell,t=e.colId,n=e.rowKey,o=e.editing,i=r.api.getRowNode(n+"");if(i){var a=i.rowIndex;r.api.ensureIndexVisible(a),r.api.ensureColumnVisible(t),D.default.log("reset focus",t,o),o?r.api.startEditingCell({rowIndex:a,colKey:t}):r.api.setFocusedCell(a,t)}r.lastFocusCell=void 0}},r.addAnimationQueueEmptyListener=function(){r.gridEventService.addEventListener(Q.default.animationQueueEmpty,r.animationQueueEmpty,{once:!0})},r.updatePinnedRowDatas=function(){if(r.gridContrlParams.isEntryEntity){var e,t=r.props.model.getDataValue()||(null===(e=r.props.parentModel)||void 0===e?void 0:e.getDataValue());t&&(r.pinnedBottomRowData=r.buildPinnedRowDatas(t))}r.pinnedBottomRowData&&(0,_.setPinnedRowDatas)(r.api,r.pinnedBottomRowData)},r.buildPinnedRowDatas=function(e){var t,n=r.gridState,o=n.seq,i=n.rk;return(0,_.buildPinnedRowDatas)({dataindex:null===(t=e.get("dataindex"))||void 0===t?void 0:t.toJS(),rowdatas:e.get("rows"),gridContrlParams:r.gridContrlParams,getDataProperty:r.getDataProperty,datacount:e.get("datacount"),pagecount:e.get("pagecount"),api:r.api,sortFilterColumn:r.sortFilterColumn,postFilterData:r.postFilterData,seq:o,rk:i})},r.postFilterData=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!r._lastFilterData||!(0,y.compareObj)(r._lastFilterData,{rowKeys:e,reset:t})){var n=r.gridState,o={pageId:n.pageId,key:n.id},i=[[{rk:e,reset:t}]];r.props.postFilterData(o,i),r._lastFilterData={rowKeys:e,reset:t}}},r.getDataDescProp=function(e){return r.dataDesc[e]},r.onGridViewSizeChanged=function(e){var t=(r.gridContrlParams||{}).columnResizeMode,n=e.params||{},o=n.width,i=n.nextWidth;(0===o&&0!==i||o!==i&&0!==i&&(t===z.GRID_COLUMN_RESIZE_MODE.preset||t===z.GRID_COLUMN_RESIZE_MODE.fit))&&window.requestAnimationFrame(r.debounceAutoSizeColumns)},r.getViewportSize=function(){return r[z.VIEWPORT_SIZE]},r.setVieportSize=function(){var e=r.gridViewSize&&r.gridViewSize.height;r.hasNavigation()&&(e-=r.getNavigationHeight()),e-=r.gridOptions.headerHeight*r.gridContrlParams.maxLevel,r[z.VIEWPORT_SIZE]={height:e}},r.colWidthAutoFull=function(e){return(0,f.colWidthAutoFull)(_e(r),e)},r.getMergeModel=function(){return r.gridContrlParams.mergeModel},r.getRigntBorderCols=function(){return r.gridContrlParams.rightBorderCols},r.onCombinedItemClick=function(e){r.lastFocusCombinedItem=e},r.getFormDetailRenderDaemon=function(){return r.gridContrlParams.formDetailRenderDaemon},r.getMergeCurGpHeadRowkey=function(e,t){return(0,_.getCurrentGroupHeadRowkey)(r.gridContrlParams.mergeModel,t,e)},r.getColWidthFromSettings=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:z.SETTING_COLUMN_WIDTH;if(r.columnWidthSetting[t][e])return r.columnWidthSetting[t][e];var n=r.props.model.getPageSettingByKey();return n?n.getIn([t,e]):null},r.getParentGridWidth=function(){return r.gridContainerI&&(parseInt(r.gridContainerI.style.width)||r.gridContainerI.offsetWidth)||0},r.constructMinorFilter=function(e){var t=e.colId,n=e.minorFilter,o=e.isReset,i=r.minorFilterColumn||{};o?delete i[t]:i=Object.assign({},i,Se({},t,[n])),D.default.log("constructMinorFilter",i),r.minorFilterColumn=i},r.remindSortedChange=function(e){(0,j.setPageData)(r.gridState.pageId,[r.gridState.gridId,z.GRID_SORTED_CHANGE],e)},r.publishRowSortFilter=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=t+"Column",i=Object.assign({},r.sortFilterColumn&&r.sortFilterColumn[o]||{}),a=Object.keys(i),l=e.colId,u=e.value;if("sort"===t)r.sortFilterColumn[o]=Se({},l,u),(a.length>1||-1===a.indexOf(l))&&r.remindSortedChange(r.sortFilterColumn[o]);else if("filter"===t){var s=i[l]||{};s=Object.assign(s,u),r.constructMinorFilter(e),n&&(0,j.setPageData)(r.gridState.pageId,[r.gridState.gridId,l,t,"data"],e),e.isReset?delete i[l]:i=Object.assign({},i,Se({},l,s)),(0,j.setPageData)(r.gridState.pageId,[r.gridState.gridId,t],i),r.sortFilterColumn[o]=i}},r.recordEntryEntityFilterStatus=function(e){var t=e.isActive,n=e.colId,o=r.sortFilterColumn&&r.sortFilterColumn.filterColumn||{};r.sortFilterColumn.preActiveFilterColumns=Object.keys(o).filter((function(e){return o[e]})),r.sortFilterColumn.filterColumn=we(we({},o),{},Se({},n,t)),r.sortFilterColumn.activeFilterColumns=Object.keys(r.sortFilterColumn.filterColumn).filter((function(e){return r.sortFilterColumn.filterColumn[e]}))},r.getRowSortFilter=function(){var e=_e(r),t=e.sortFilterColumn,n=e.minorFilterColumn;return Object.assign({},t,{minorFilterColumn:n})},r.setRowFormatValue=function(e,t,n){if(arguments.length>3&&void 0!==arguments[3]&&arguments[3]){var o=r.formatRowsValue.$_pinnedFormat||{};o[t]=e,r.formatRowsValue.$_pinnedFormat=o}else{var i=r.formatRowsValue[t]||[];i[n]=e,r.formatRowsValue[t]=i}},r.getLastestGridModel=function(){if(r.latestProps)return r.latestProps.parentModel||r.latestProps.model},r.getActiveRowKey=function(){return r.activeRowKey},r.hasOtherView=function(){return r.gridContrlParams.viewParams.length>0},r.setActiveView=function(e){var t=r.gridState,n=t.pageId,o=t.gridId;r.activeView=e,(0,j.setPageData)(n,[o,"viewType"],e),r.resetGridContainerHeight(e)},r.resetGridContainerHeight=function(e){if("tiledView"===e){var t=r.gridState.styles.height;r.gridContainer.setAttribute("grid-height",r.gridContainer.offsetHeight),r.gridContainer.style["max-height"]=t||"567px",r.gridContainer.style.minHeight="",r.gridContainer.style.height=t||"auto"}else if("grid"===e){var n=r.gridContainer.getAttribute("grid-height");r.gridContainer.style["max-height"]="",r.gridContainer.style.minHeight=r.gridViewSize.height,r.gridContainer.style.height=n+"px",r.expandHeightFlagBySwithView&&(r.reSizeHeight({}),r.expandHeightFlagBySwithView=!1)}},r.getGridEditable=function(){return r.gridContrlParams.gridEditable},r.getColMetaByField=function(e){var t=r.props.model.meta.get("columns"),n=(0,y.childrenLookUp)(t.toJS&&t.toJS(),(function(t){return t.dataIndex===e}),!0);return n||D.default.warn("".concat(e," column meta not found!")),n},r.getMulLangListInRootPage=function(){var e=r.props.model,t=void 0===e?{}:e;return(0,I.getLangList)()(t.state)},r.isCellLocked=function(e,t){var n,o=t.colId,i=t.colDef;if(1===(null==i||null===(n=i.cellRendererParams)||void 0===n||null===(n=n.editor)||void 0===n?void 0:n.editStyle))return!0;var a=i&&i.editable;return!(!(0,U.isCellLocked)(r.getCellActions(r.props),r.dataDesc)(r.props.model.pageId,r.props.model.key,e,o,null==i?void 0:i.cellRendererParams.isPrivacy,null==i?void 0:i.cellRendererParams.realEditable)&&a)},r.autoAddRow=function(e){var t=e.rowIndex,n=e.colKey,o=t,i=r.api.getDisplayedRowAtIndex(t);i&&(o=i.data[r.gridState.rk]),r.props.handleGotoNextRow(r.props.model,[{r:o,k:n}])},r.gridKeyDown=function(e){var t=e.keyCode,n=e.shiftKey,o=e.ctrlKey,i=e.altKey,a=r.gridContrlParams,l=(a.gridEditable,a.supportEnterShortcut),u=a.autoAddRow,s=a.isEntryEntity,d=_e(r);switch(t){case ee.KEYS.UP:case ee.KEYS.DOWN:!0!==o&&!0!==i&&f.modelFuncs.setUpDownFocus(d.api,d.columnApi,t===ee.KEYS.UP,d.isCellLocked,{autoAddRow:u,canEdit:s,insert:d.autoAddRow,toNextField:function(){return(0,re.handleToNextField)(n,r.gridContainer)}});break;case ee.KEYS.ENTER:case ee.KEYS.TAB:if(t===ee.KEYS.ENTER&&!l)break;f.modelFuncs.setLeftRightFocus(d.api,d.columnApi,n,d.isCellLocked,{autoAddRow:u,canEdit:s,insert:d.autoAddRow,toNextField:function(){return(0,re.handleToNextField)(n,r.gridContainer)}});break;case ee.KEYS.DELETE:case ee.KEYS.BACKSPACE:var c=d.selectCellRanges,p=d.props.model;if(!(c&&c[0]&&(c[0].columns.length>1||Math.abs(c[0].endRow.rowIndex-c[0].startRow.rowIndex)>=1)))return;var y=(0,g.getSelectCellRangesInfo)(c,d.api,d.getCellIsLock);e.stopPropagation(),d.props.deleteCellRanges(p,y)}},r.refreshCells=function(e,t,n,o){if(r.api){var i=e.r,a=e.k,u=(0,pe.isServerFilterModeTablePage)(r.gridState.pageId)&&(0,y.isEntryWithoutTreeByGridContrlParams)(r.gridContrlParams)?(0,L.getRowIndexInGridDataByRowKey)(i)(o,r.gridState.rk):(0,L.transformAbsolute2Relative)(i)(o),s=r.api.getRowNode(i);if(s&&t[u]){var d=n[a],c=t[u][d],f=s.data;if(f&&!l.default.isEqual(f[a],c)){s.setDataValue(a,c);var g={rowNodes:[s],columns:[a],force:!1};r.api.refreshCells(g),r.gridContrlParams.visible||setTimeout((function(){(0,j.setPageData)(r.props.model.pageId,[(r.props.parentModel||r.props.model).key,"visible"],r.gridContrlParams.visible)}))}}}},r.refreshTieldView=function(){var e=r.gridState,t=e.pageId,n=e.id;(0,j.setPageData)(t,[n,"refreshTiledView"])},r.addRefreshCells=function(){var e,t=(0,s.Map)(),n=(0,s.Map)();return function(o){if(o){var i=o.r,a=o.k;t.get(i+a)||(n=n.set([i+a],o)),t=t.set([i+a],o),clearTimeout(e),e=setTimeout((function(){var e=r.dataDesc.dataindex,o=(r.latestProps.parentModel?r.latestProps.parentModel:r.latestProps.model).getDataValue(),i=o.get("rows",(0,s.List)()).toJS();r.refreshTieldViewDebounce(),n.mapKeys((function(t,n){r.refreshCells&&r.refreshCells(n,i,e,o)})),t=(0,s.Map)(),n=(0,s.Map)()}),100)}}},r.getGridMetaProperty=function(e){var t;return null===(t=r.props)||void 0===t?void 0:t.model.getMetaProperty(e)},r.getCellIsLock=function(e,t){var n=r.gridState,o=n.pageId,i=n.gridId,a=t.colId,l=t.cellRendererParams,u=l.isPrivacy,s=l.realEditable;return(0,U.isCellLocked)(r.getCellActions(r.props),r.dataDesc)(o,i,e,a,u,s)},r.getFirstEditableCell=function(e){return(0,g.getFirstEditableCell)({reverse:e,api:r.api,columnApi:r.columnApi,rowKey:r.gridState.rk,getCellIsLock:r.getCellIsLock,gridEditable:r.gridContrlParams.gridEditable})},r._handleCellChange=function(e,t){var n=Ee(t||[],1)[0]||{},o=n.r,i=n.k,a=n.v,l=e.pageId,u=e.key;(0,pe.setClientCellValueWhenPostValue)(l,u,{rowKey:o,colId:i,value:a}),r.props.cellChange(e,t)},r.getCellActions=function(e){var t=(0,M.getGridCellActions)(e,_e(r));return we({btnClick:e.gridBtnClick,detailBtnClick:e.gridDetailBtnClick,hyperLinkClick:r.hyperLinkClick,getMergeCurGpHeadRowkey:r.getMergeCurGpHeadRowkey,invokeCellChangeOnly:e.invokeCellChangeOnly,invokeCellChangeImmediately:e.invokeCellChangeImmediately,invokeControlMethodOnly:e.invokeControlMethodOnly,invokeControlMethodSingle:e.invokeControlMethodSingle,onCellChange:r._handleCellChange,toolBarBtnClick:e.toolBarBtnClick,getVirtualData:e.getVirtualData,getDetailGridData:e.getDetailGridData,invokeRowSelection:r.invokeRowSelection,postRowSelection:r.postRowSelection,getColProperty:r.getColProperty,getRowProperty:r.getRowProperty,getDataProperty:r.getDataProperty,getLockedByNum:r.getLockedByNum,getVisibleByNum:r.getVisibleByNum,getGridState:function(){return r.gridState},getMergeModel:r.getMergeModel,getRigntBorderCols:r.getRigntBorderCols,selectByGroup:r.selectByGroup,onCombinedItemClick:r.onCombinedItemClick,getFormDetailRenderDaemon:r.getFormDetailRenderDaemon,getNodeByRowKey:r.getNodeByRowKey,getNodeByRowIndex:r.getNodeByRowIndex,dispatch:r.props.dispatch,getGridContainer:function(){return r.gridContainer},showFormByTips:r.props.showFormByTipsInAction,getColWidthFromSettings:r.getColWidthFromSettings,getParentGridWidth:r.getParentGridWidth,pushDelayInvoke:r.pushDelayInvoke,publishRowSortFilter:r.publishRowSortFilter,recordEntryEntityFilterStatus:r.recordEntryEntityFilterStatus,setRowFormatValue:r.setRowFormatValue,getRowSortFilter:r.getRowSortFilter,getGridEditable:r.getGridEditable,getMulLangListInRootPage:r.getMulLangListInRootPage,getTelViaList:r.props.getTelViaList,getGridMetaProperty:r.getGridMetaProperty,setGridDisplayFun:r.setGridDisplayFun,invokeCustomMethod:r.props.invokeCustomMethod,setGridThisProp:r.setGridThisProp,getGridThisProp:r.getGridThisProp,gridKeyDown:r.gridKeyDown,addGirdPostData:r.props.addGirdPostData,invokeUpdateCells:r.props.invokeUpdateCells},t)},r.getGridRowData=function(){r.gridRows=[],r.pinnedBottomRowData=null;var e=r.props.model.getDataValue()||r.props.parentModel&&r.props.parentModel.getDataValue();if(e){var t;r.dataLoaded||(r.api&&r.api.hideOverlay(),r.dataLoaded=!0),r.oldDataRows=r.dataRows,r.dataRows=e.get("rows");var n=e.toJS();Object.assign(r.dataDesc,{dataindex:n.dataindex,isSplitPage:n.isSplitPage,datacount:n.datacount,billdatacount:n.billdatacount,pageindex:n.pageindex,pagerows:n.pagerows,pagecount:n.pagecount,rowcount:n.rowcount,realPageCount:n.realPageCount,isSelectedAll:n.isSelectedAll,islastpage:n.islastpage,postcols:n.postcols||[],isgetrealcount:n.isgetrealcount||!1,isgetsumdata:n.isgetsumdata||!1,isOutMaxDataCount:n.isOutMaxDataCount||!1,limitdatacount:n.limitdatacount,phide:n.phide});var o=n.rows;r.gridRows=r.takeRows(o,r.dataDesc),!r.gridContrlParams.isVirtualView&&!r.gridOptions.suppressNoRowsOverlay&&r.gridRows.length<=0&&r.api&&r.api.showNoRowsOverlay(),r.pinnedBottomRowData=r.buildPinnedRowDatas(e),r.refreshing&&null!==(t=r.pinnedBottomRowData)&&void 0!==t&&t[0]&&(r.pinnedBottomRowData=[we(we({},r.pinnedBottomRowData[0]),{},{_flag_:Math.random()})],r.refreshing=!1)}return r.api&&r.api.isAnyFilterPresent()&&r.delayFuncs.push((function(){0!==r.api.getDisplayedRowCount()?r.api.hideOverlay():r.api.showNoRowsOverlay()})),r.gridRows},r.takeRows=function(e,t){var n=[],o=!1;r.gridContrlParams.treeTable&&r.gridContrlParams.treeTable.isTreeTable&&(o=!0);var i=r.getStartIndex(t);n=f.modelFuncs.takeRows(e,i,t.dataindex,r.gridState.seq,o,!!r.gridContrlParams.treeVirtualView);var a=r.gridContrlParams.mergeModel;return a&&(0,_.entitySpanEngine)(a,n,r.gridState),o&&(r.gridContrlParams.treeTable.nodeNums=n.length,n=(0,$.buildTreeData)(n),n=(0,X.getTreeEntryData)(r.gridContrlParams.treeTable,n,r.gridState.rk,r.gridContrlParams.showTreeSeq)),n},r.getStartIndex=function(e){var t=e.pageindex,n=e.pagerows,o=e.isSplitPage,i=e.startIndex;return r.gridContrlParams.isVirtualView||(i=(t-1)*n,!1===o&&(i=0)),i},r.onNotCellClickHandle=function(e){r.gridContrlParams.isEntryEntity&&e.target&&e.target.getAttribute&&"row"===e.target.getAttribute("role")&&r.api.clearFocusedCell()},r.supressPostClick=function(e){var t=e.api,r=e.rowIndex;if(e.isListView){var n=t.getFocusedCell(),o=t.getEditingCells()[0];if(n&&o){var i=n.rowIndex,a=n.column,l=o.rowIndex,u=o.column;return i===r&&i===l&&a.code===u.code}}},r.clickOrDoubleClick=function(e){var t=e.node,n=e.data,o=e.event,i=e.api,a=e.rowIndex;if(!r.supressPostClick({api:i,rowIndex:a,isListView:r.gridContrlParams.isListView})){r.onNotCellClickHandle(o);var l=r.api.getFocusedCell(),u=l?l.column:null;if(r.gridContrlParams.isListView&&"multiple"===r.gridOptions.rowSelection&&r.lastClickedNode&&o.shiftKey)return(0,_.doShiftSelect)(t,r.lastClickedNode,{data:n,column:u,rk:r.gridState.rk,getNodeByRowKey:r.getNodeByRowKey,getNodeByRowIndex:r.getNodeByRowIndex,gridContrlParams:r.gridContrlParams,postRowSelection:r.postRowSelection}),void(r.lastClickedNode=t);if(!t||!t.rowPinned){t.group&&r.doGroupNodeClick(e);var s=l?u.colId==y.SELECTIONCOLID?"0":u.colId:"0";l&&u&&"combinedField"===u.colDef.cellRendererParams.type&&(s=r.lastFocusCombinedItem);var d=n[r.gridState.rk];r.lastClickedNode=t,r.clickTimer?(clearTimeout(r.clickTimer),r.clickTimer=null,r.lastClickedRow!=d||r.lastClickField!=s?(r.lastClickField=s,r.lastClickedRow=d,(0,_.doClickSelect)(e,d,u)(_e(r)),r.selectByGroup(e,null,!0,r.postRowSelection)):(r.selectByGroup(e,!0,!1,(function(){t.detail||r.gridContrlParams.suppressEntryRowClickSelect||t.setSelected(!0)})),r.onRowDoubleClicked(e,"doubleClick"))):(r.lastClickField=s,r.lastClickedRow=d,(0,_.doClickSelect)(e,d,u)(_e(r)),r.selectByGroup(e,null,!0,r.postRowSelection),r.clickTimer=setTimeout((function(){r.clickTimer=null}),300))}}},r.invokeRowSelection=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"single"==r.gridOptions.rowSelection&&t&&(n=!0),r.gridContrlParams.suppressEntryRowClickSelect||e.setSelected(t,n),o||r.postRowSelection()},r.postRowSelection=function(e){var t=[],n=[],o=[],i=r.gridState.rk;o=r.api.getSelectedRows();var a="",l=r.api.getFocusedCell(),u=!(!l||!l.column)&&l.column.colDef.editable,s=-1,d=r.gridContrlParams,c=d.mergeModel,f=d.suppressMergeSelection;if(l){var g;r.api.getSelectedNodes().forEach((function(e){e.rowIndex==l.rowIndex&&(s=e.data[i])}));var p=l.rowIndex,m=r.api.getDisplayedRowAtIndex(p);(r.gridContrlParams.suppressEntryRowClickSelect||null!=m&&null!==(g=m.data)&&void 0!==g&&null!==(g=g.cprop)&&void 0!==g&&g.disabled)&&(s=m&&m.data[i],r.gridContrlParams.suppressEntryRowClickSelect&&"XXfieldXX"===l.column.colId&&!m.selected&&(s=-1))}var v=l&&l.column?l.column.colId==y.SELECTIONCOLID?"0":l.column.colId:r.lastFocusField||"0";if(l&&l.column&&"combinedField"===l.column.colDef.cellRendererParams.type&&(v=r.lastFocusCombinedItem),o.map((function(e){if(t.push(e[r.gridState.rk]),r.dataDesc.postcols.length>0){var o=[];r.dataDesc.postcols.forEach((function(t){return o.push(e[t])})),n.push(o)}})),s=s>=0?s:t.length>0?t[0]:-1,l||!r.gridContrlParams.suppressEntryRowClickSelect&&!r.gridContrlParams.entryRowClickMultiSelect||e&&e.node&&e.node.data&&(s=e.node.data[i]),r.gridContrlParams.suppressEntryRowClickSelect||s!==r.lastFocusRowKey||v!==r.lastFocusField||!u||r.selectedRows.length!==o.length){if(r.recordSelectedRows(t),r.lastFocusRowKey=s,1==o.length){if(a=o[0][i],!r.gridContrlParams.suppressEntryRowClickSelect&&!r.gridContrlParams.isListView&&r.lastRowKey===a&&r.lastFocusField===v&&u)return;r.lastRowKey=a,r.lastFocusField=v}else r.lastRowKey=a="O",r.lastFocusField=v;if(r.gridContrlParams.hasSelectAllRow){var h=e&&e.node||r.getNodeByRowIndex(l&&l.rowIndex);r.differenceUpdateRowSelection(h)}else{var b=[s=(0,_.getRealRowKey)(s,c,f)];if(r.gridContrlParams.isListView){var C,w,S="XXfieldXX"===(null==l||null===(C=l.column)||void 0===C?void 0:C.colId)?"__selectByCheckBox__":(null==l||null===(w=l.column)||void 0===w?void 0:w.colId)||"";b.push(S)}var E=r.buildSelectedRowJson(t,s,n),R=r.props.parentModel||r.props.model;(0,j.setPageData)(r.gridState.pageId,[r.gridState.gridId,"postRowClick"],{postSelectRowCount:t.length}),r.props.dispatch((0,I.convertAppModelFunctionAction)((0,I.setControlPostValue)(R.pageId,R.key,E))),r.props.EntityRowClick(R,b)}}},r.differenceUpdateRowSelection=function(e,t){if(e){var n=r.api.getFocusedCell(),o=n&&n.column&&n.column.colId!==y.SELECTIONCOLID?n.column.colId:"0",i=e.data;if(i){var a=i[r.gridState.rk],l=r.api.getSelectedRows().some((function(e){return e[r.gridState.rk]===a})),u=t?"doubleClickRow":l?"addRowSelection":"clearRowSelection",s=[a],d=[i].map((function(e){return r.dataDesc.postcols.length>0?r.dataDesc.postcols.map((function(t){return e[t]})):[]}));r.postDifferenceUpdateRowSelection({methodName:u,selectedRowKeys:s,selectedData:d,fieldKey:o,rowKeyValue:a})}}},r.postDifferenceUpdateRowSelection=function(e){var t=e.methodName,n=e.selectedRowKeys,o=e.selectedData,i=e.fieldKey,a=e.rowKeyValue,l=r.props.parentModel||r.props.model,u=l.pageId,s=l.key,d={fieldKey:i,row:a,isClientNewRow:!1,clientNewRows:""};r.props.dispatch((0,I.convertAppModelFunctionAction)((0,I.setControlPostValue)(u,s,d))),ge.disableDisposeRequest({pageId:u,key:s,methodName:t},(function(){return r.props.invokeControlMethodOnly({pageId:u,key:s},t,[n,o])}))},r.reverseSelect=function(e){e&&e.node&&(e.node.detail?e.node.parent&&e.node.parent.setSelected(!0):r.gridContrlParams.isListView&&e.node.setSelected(!e.node.selected))},r.getAllSelectedInfo=function(e){var t=r.api.getSelectedRows(),n=[],o=[];return t.map((function(e){if(n.push(e[r.gridState.rk]),r.dataDesc.postcols.length>0){var t=[];r.dataDesc.postcols.forEach((function(r){return t.push(e[r])})),o.push(t)}})),r.buildSelectedRowJson(n,e,o)},r.selectByGroup=function(e,t,n,o){var i=r.gridContrlParams,a=i.mergeModel,l=i.suppressMergeSelection;if(null==a||a.suppress)return o(e);var u=r.gridState.rk,s=e.data[u],d=r.api.getFocusedCell()?r.api.getFocusedCell().column:null,c=(0,_.getClickColMergeGroup)(s,d,a,l);if(c.length<=1)return o();var f=e.node.selected;null!=t&&(f=!!t),(0,_.doGroupSelect)(c,f)(_e(r)),n&&r.postRowSelection()},r.recordSelectedRows=function(e){r.selectedRows=e||[],r.setActiveRowKey(r.selectedRows)},r.isEntryEntity=function(){var e=r.gridContrlParams,t=e.isListView,n=e.isVirtualView,o=e.treeTable;return!(t||n||o)},r.setActiveRowKey=function(e){if(r.isEntryEntity()&&(e.length>0?r.activeRowKey=r.selectedRows[0]:r.activeRowKey=r.gridRows.length?r.gridRows[0][r.gridState.rk]:0,"tiledView"===r.activeView)){var t=r.gridState,n=t.pageId,o=t.id;(0,j.setPageData)(n,[o,"setActiveRowKey"],r.activeRowKey)}},r.publishForceRefreshViews=function(){var e=r.gridState,t=e.pageId,n=e.id;r.hasOtherView()&&(0,j.setPageData)(t,[n,"refreshTiledView"])},r.ensureRowVisible=function(e){var t;return r.api&&r.api.ensureIndexVisible(e,null!==(t=r.gridContrlParams.treeTable)&&void 0!==t&&t.isLazyLoadTree?"middle":void 0)},r.scrollAfterUpdate=function(){if(r.lastScrollTop||0===r.lastScrollTop){var e=r.gridContainerI&&r.gridContainerI.querySelector(".ag-body-viewport");e&&(e.scrollTop=r.lastScrollTop),r.lastScrollTop=void 0}},r.setFocusedCell=function(e){if(null==e||e.length<=0||-1===e[0])r.api&&r.api.clearFocusedCell();else{var t=_e(r),n=(t.lastFocusField,e[0]),o=void 0!==e[1]?e[1]:"",i=t.gridState.rk;if("0"==o||""==o){var a=r.gridOptions.columnApi.getAllDisplayedColumns();if(0===a.length)return void D.default.warn("there are no columns !");if(!r.gridContrlParams.isListView&&!r.gridContrlParams.isVirtualView){var l=a.filter((function(e){return e.colDef&&!0===e.colDef.editable}));l.length>0&&(a=l)}o=(o="0"==a[0].colId?a[1]:a[0])&&o.colId}t.lastFocusField=i,r.hasSetFocusedCell=!0,r.lastFocusCell={colId:o,rowKey:n,editing:!1},setTimeout((function(){var e=r.api.getRowNode(n+"");if(void 0!==e){r.api.ensureColumnVisible(o);var t=e&&e.rowIndex;null==t&&(t=n),r.ensureRowVisible(t),r.api.setFocusedCell(t,o,null)}}),0)}},r.setSelectRows=function(e,t){Array.isArray(e)&&e[0]&&Array.isArray(e[0])&&(e=e[0]);var n=r.gridState.rk,o=0;if(r.api){r.api.clearFocusedCell(),r.lastFocusRowKey=-1,r.api.clearRangeSelection(),r.api.deselectAll();var i=e.length;if(i<=0)return r.lastRowKey="O",r.lastFocusField="",void r.recordSelectedRows([]);var a=function(){if(r.lastRowKey=1===i?e[0]:"O",r.gridContrlParams.isListView){var t=r.lastRowKey;r.lastRowKey=-1,r.postRowSelection(),r.lastRowKey=t,r.setSelectedRowsCount&&r.setSelectedRowsCount(o)}else o!=i&&r.recordSelectedRows(e)};setTimeout((function(){for(var t=new Set,l=new Set(e),u=r.api.getRenderedNodes(),s=0;s<u.length&&!(i<=o)&&!u[s].detail;s++)l.has(u[s].data[n])&&(u[s].setSelected(!0),o+=1,t.add(u[s].data[n]));var d=new Set(be(l).filter((function(e){return!t.has(e)})));l=null,d.size>0?setTimeout((function(){d.forEach((function(e){var t=r.api.getRowNode(e);if(t){if(i<=o)return;t.setSelected(!0),o+=1}})),a()}),0):a()}),0),r.updateSelectionCol(!0)}else r.recordSelectedRows(e)},r.setActiveCell=function(e){var t=e.k;if(null!=t&&""!==t){var n=e.r;if(!(null==n||n<0)){var o=r.getNodeByRowKey(n);o&&r.api.startEditingCell({rowIndex:o.rowIndex,colKey:t})}}},r.gridFinishedUpdate=function(e){null!=r.gridContrlParams&&r.reSizeHeightByLimit({oper:""})},r.handleAgCoreKeyDown=function(e){},r.handleCellRangesSum=function(){var e=r.api.getCellRanges(),t=r.gridState,n=t.pageId,o=t.gridId,i=1===e.length;if((0,g.isCellRangesOverlap)(e,{columnApi:r.columnApi,api:r.api}))return(0,g.cellRangesOverlapTips)(n),void r.api.clearRangeSelection();if((0,g.isCellRangesOutOfSize)(e,{api:r.api,seq:r.gridState.seq}))return(0,j.updatePageData)(n,[z.CELL_RANGES_SUM_RESULT,o],(function(e){return we(we({},e),{},{isValid:!1})})),void(0,g.cellRangesOutOfSizeTips)(n);if(i){var a=(0,g.getCellRangeId)(e[0],{api:r.api});r.cellRangeResultCacher[a]||(r.cellRangeResultCacher={})}var l=r.getCellRangesResult(e);(0,j.setPageData)(n,[z.CELL_RANGES_SUM_RESULT,o],l)},r.handleMouseUp=function(e){r.isMouseDownInGrid&&r.gridContrlParams.isCellRangesSum&&r.handleCellRangesSum()},r.handleMouseDown=function(e){r.isMouseDownInGrid=r.gridContainerI.contains(e.target)},r.clearSumResult=function(){var e=r.gridState,t=e.pageId,n=e.gridId,o={plus:new d.default(0),average:new d.default(0),count:0,numberCount:0};(0,j.setPageData)(t,[z.CELL_RANGES_SUM_RESULT,n],o),r.cellRangeResultCacher={}},r.getCellRangesResult=function(e){var t={plus:new d.default(0),average:new d.default(0),count:0,numberCount:0};return e.forEach((function(e){var n=(0,g.getCellRangeId)(e,{api:r.api});if(!r.cellRangeResultCacher[n]){var o=(0,g.getCellRangeCalculatedResult)(e,{getNodeByRowIndex:r.getNodeByRowIndex,seq:r.gridState.seq,api:r.api});r.cellRangeResultCacher[n]=o}t=(0,g.mergeCellRangesResult)(t,r.cellRangeResultCacher[n])})),t},r.handleAfterFilterChanged=function(e){var t,n=r.gridState,o=n.pageId,i=n.id;r.api.clearFocusedCell(),r.api.clearRangeSelection(),r.recalcMerge(),r.deselectAllRow(),(0,F.handleFilterChanged)(r.gridContrlParams,e,r.gridState.seq);var a=r.props.model.getDataValue()||(null===(t=r.props.parentModel)||void 0===t?void 0:t.getDataValue());a&&(r.pinnedBottomRowData=r.buildPinnedRowDatas(a),(0,_.setPinnedRowDatas)(r.api,r.pinnedBottomRowData),setTimeout((function(){var e=r.gridContrlParams.isEntryEntity?r.api.gridPanel.eGui.querySelector(".ag-overlay .gird-nodata-placeholder"):null;e&&(e.style["padding-bottom"]=r.pinnedBottomRowData.length?r.gridOptions.rowHeight+"px":"")}),0)),!(0,pe.isServerFilterModeTablePage)(r.gridState.pageId)&&r.gridContrlParams.isEntryEntity&&r.props.setFilterStatus({pageId:o,key:i},[[{hasFilter:r.api.isColumnFilterPresent()}]]),window.requestAnimationFrame((function(){r.autoSizeColumns(),r.reSizeHeight({}),r.gridContrlParams.isEntryEntity&&(0,F.checkValidateFailedCountOfHidden)(r.api,r.gridState,r.gridRows)}))},r.onAfterSortChanged=function(){r.recalcMerge(),r.api.clearRangeSelection(),r.gridContrlParams.showSeq&&r.api.refreshCells({columns:[r.gridState.seq]}),window.requestAnimationFrame((function(){r.autoSizeColumns()}))},r.columnResized=function(e){var t=e.column,n=e.finished,o=e.columns,i=e.source,a=n&&"gridOptionsChanged"!==i&&r.gridContrlParams.autoHeight;n&&"gridOptionsChanged"!==i&&(o||(t?[t]:[])).forEach((function(e){!function(e,t){var n=t.source,o=e.colId,i=e.actualWidth,a=(0,y.childrenLookUp)(r.gridState.columnDefs,(function(e){return e.field==o}));a&&o!==z.SETTING_COL&&(a.width=i,!a.cellRendererParams.colLocked||a.cellRendererParams.showEditButton||r.gridContrlParams.autoHeight||r.gridContrlParams.columnResizeMode===z.GRID_COLUMN_RESIZE_MODE.preset?r.columnWidthSetting[z.SETTING_COLUMN_WIDTH][o]=Math.round(i):"uiColumnDragged"===n&&(r.columnWidthSetting[z.SETTING_COLUMN_MAX_WIDTH][o]=Math.round(i)))}(e,{source:i})})),a&&r.resetRowHeightsAndGridHeight();var l=r.gridState,u=l.pageId,s=l.id,d=l.gridId,c=l.type,f=l.gridType;if(n&&"uiColumnDragged"===i){var g,p=r.props,m=p.invokeControlMethodOnly,v=p.parentModel,h=p.model,b=v||h,C=(0,oe.getGridTrackingType)({type:c,gridType:f});(0,oe.buriedPointOfColumnResize)({pageId:u,controlId:d||s,controlType:C}),r.saveCacher();var w=(null===(g=(0,j.getPageUIState)(u))||void 0===g||null===(g=g.get(h.key))||void 0===g?void 0:g.toJS())||{};setTimeout((function(){r.reSizeHeight({})}),0),m&&m(b,"saveGridViewWidth",[Se({},h.key,w)])}},r.columnMoved=function(e){f.onColumnMoved.call(_e(r),e),(0,U.setOperationColPinnedStatus)({gridState:r.gridState,columnApi:r.columnApi,gridContainerI:r.gridContainerI,setGridThisProp:r.setGridThisProp,getGridThisProp:r.getGridThisProp}),r.gridQuickFilterModelRef.setQuickFilterCols&&r.gridQuickFilterModelRef.setQuickFilterCols()},r.onDragStarted=function(e){r.colDefBeforeDrag=r.gridState.columnDefs},r.handleDragStopped=function(e){var t=r.gridState,n=t.columnDefs,o=r.props.parentModel||r.props.model;if(n&&r.colDefBeforeDrag!==n&&n&&(r.gridContrlParams.isListView||r.gridContrlParams.isEntryEntity&&r.gridContrlParams.hasSettingBtn)){var i=[],a=t.rk,l=t.seq;n.forEach((function(e){-1===[z.SETTING_COL,"XXfieldXX",a,l].indexOf(e.field)&&i.push({k:e.field,w:e.width})})),r.props.invokeControlMethodOnly(o,"postColsInfo",[i])}delete r.colDefBeforeDrag},r.onVirtualColumnsChanged=function(e){r.postHeaderTipsAction()},r.bindGridContainer=function(e){r.gridContainer=e},r.bindGridContainerI=function(e){r.gridContainerI=e},r.setGridDisplayFun=function(e,t){null!=e&&!r.gridDisplayFun[e]&&(r.gridDisplayFun[e]=t)},r.getGridDisplayFun=function(e){return r.gridDisplayFun[e]},r.setGridQuickFilterModelRefFun=function(e){r.gridQuickFilterModelRef=e},r.setQuickSearchCls=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];r.gridContainerI&&(e?r.gridContainerI.classList.remove("quick-search-model"):r.gridContainerI.classList.add("quick-search-model"))},r.setGridSizeModeCls=function(e){r.gridContainerI&&(e<=24?r.gridContainerI.classList.add("small-size-grid"):r.gridContainerI.classList.remove("small-size-grid"))},r.getGridInnerWrapClassName=function(){var e=r.gridOptions.headerHeight;return(0,b.default)("kd-cq-table-content",Se(Se(Se({},C.default.gridContainerI,!0),"grid-pinning-right",(0,F.isPinningRight)({gridContainerI:r.gridContainerI,columnApi:r.columnApi})),"small-size-grid",e<=24))},r.handleHorizontalScrollVisibilityChanged=function(e){var t=e.target;(0,F.isPinningRight)({gridContainerI:r.gridContainerI,columnApi:r.columnApi})?r.gridContainerI.classList.add("grid-pinning-right"):r.gridContainerI.classList.remove("grid-pinning-right"),parseInt(null==t?void 0:t.style.height)>0?r.gridContainerI.classList.add("grid-horizontal-scroll-display"):r.gridContainerI.classList.remove("grid-horizontal-scroll-display")},r.handleGridValidateTipVisibleChange=function(e){var t,n=parseInt((null===(t=r.gridState.styles)||void 0===t?void 0:t.marginTop)||0);r.gridContainer.style["margin-top"]=e?n+43+"px":n?n+"px":""},r.handleVirtualViewSelectAll=function(e){e?(r.api.forEachNode((function(e){return e.setSelected(!1)})),r.toolBarBtnClick([],"clearSelection")):(r.api.forEachNode((function(e){return e.setSelected(!0)})),r.toolBarBtnClick([],"selectAllRows"))},r.getTelCountry=function(e){var t=e.getMetaProperty("columns"),n=e.pageId,o=[];(0,fe.iterateColumns)(t.toJS(),(function(e){var t;"telephone"===(null===(t=e.editor)||void 0===t?void 0:t.type)&&o.push(e.dataIndex)})),!(0,le.getData)(ae.KEY_COUNTRU_VIA_DATA)&&o.length>0&&r.props.getTelViaList({pageId:n,key:o[0]})},r.latestProps=null,r.delayFuncs=[],r.state={refreshStatus:!0},r.rowStyleRules=[],r.gridState={pageId:"",id:"",gridId:"",colDefsGUID:"",columnDefs:[],rk:"",seq:"",styles:{minHeight:"190px"}},r.gridRows=[],r.clientVisible=!0,r.gridOptions=(0,M.buildGridOptions)(_e(r)),r.columnWidthSetting=Se(Se(Se({},z.SETTING_COLUMN_WIDTH,{}),z.SETTING_AUTOSIZE_COLUMN_WIDTH,{}),z.SETTING_COLUMN_MAX_WIDTH,{}),r.columnSequence=null,r.sortFilterColumn={},r.minorFilterColumn={},r.gridDisplayFun={},r.gridContrlParams={},r.gridContainer=null,r.lastQueryId=null,r.lastRowKey="O",r.lastFocusRowKey=-1,r.lastFocusField="",r.clickTimer=null,r.lastClickedRow=-1,r.lastClickedNode=null,r.lastFocusCombinedItem="",r.selectedRows=[],r.supposeFields=[],r.delayFuncs=[],r.updateFuncList=[],r.activeRowKey=0,r.activeView="grid",r.gridQuickFilterModelRef={},r.cellRangeResultCacher={},r.dataDesc={dataindex:{},isSplitPage:!1,datacount:0,pageindex:0,pagerows:0,pagecount:0,rowcount:0,realPageCount:0,islastpage:!1,postcols:[],isgetrealcount:"",isgetsumdata:!1,isOutMaxDataCount:!1,limitdatacount:0,phide:void 0},r.formatRowsValue={},r.onGridReady=r.onGridReady.bind(_e(r)),r.onSelectionChanged=l.default.debounce(r.onSelectionChanged.bind(_e(r)),0),r.onRowDoubleClicked=r.onRowDoubleClicked.bind(_e(r)),r.onRowGroupOpened=r.onRowGroupOpened.bind(_e(r)),r.hyperLinkClick=r.hyperLinkClick.bind(_e(r)),r.getColProperty=r.getColProperty.bind(_e(r)),r.getRowProperty=r.getRowProperty.bind(_e(r)),r.getLockedByNum=r.getLockedByNum.bind(_e(r)),r.getVisibleByNum=r.getVisibleByNum.bind(_e(r)),r.getDataProperty=r.getDataProperty.bind(_e(r)),r.childrenLoop=y.childrenLoop,r.childrenLookUp=y.childrenLookUp,r.getGridVisiable=r.getGridVisiable.bind(_e(r)),r.getPageDisplayRowCount=r.getPageDisplayRowCount.bind(_e(r)),r.getGridInfo=r.getGridInfo.bind(_e(r)),r.postHeaderTipsAction=l.default.debounce(r.postHeaderTipsAction,300,{trailing:!0}),r.pushDelayInvoke=(0,N.default)(50),r.dirtyCellCb=r.addRefreshCells(),r.refreshTieldViewDebounce=l.default.debounce(r.refreshTieldView),r.callbackProps=F.getCallBackProps.apply(_e(r)),r._onKeyDown=(0,F.onKeyDown)(_e(r)),r._resetLayout=f.resetLayout.bind(_e(r)),r.debounceAutoSizeColumns=l.default.debounce(r.autoSizeColumns,300),r.gridEventService=new J.default,r.gridKeyDown=l.default.debounce(r.gridKeyDown.bind(_e(r)),50,{trailing:!0}),r.getGreedyAutoSizeColWidths=f.getGreedyAutoSizeColWidths.bind(_e(r)),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Me(e,t)}(t,e),r=t,n=[{key:"componentWillMount",value:function(){this.latestProps=this.props,this.props.model.meta;var e=this.props.parentModel?this.props.parentModel.meta:this.props.model.meta;this.postColumnFilter((0,j.getPageData)(this.props.model.pageId,[e.get("id"),"setGridFilter"])),(0,M.buildProps)(this.props,this,{isBuildColDefs:!1})}},{key:"componentWillReceiveProps",value:function(e,t){this.latestProps=e;var r,n=!1,o=!1,i=!1,a=!1;(0,y.getValue)(e.model.meta,"colDefsGUID","")!=this.gridState.colDefsGUID?(this.recordSelectedRows([]),this.lastRowKey="O",this.setSelectedRowsCount&&this.setSelectedRowsCount(0),null===(r=this.api)||void 0===r||r.clearRangeSelection(),this.gridContrlParams.showSelectionItem&&(0,j.setPageData)(this.gridState.pageId,[this.gridState.gridId,"reselected"],{selectRowsCount:0}),this.clearCustomColInfos(),(0,M.buildProps)(e,this),this.gridDisplayFun={},a=n=o=i=!0,this.getTelCountry(e.model)):this.props.isVisible!==e.isVisible?(this.setVisible(e),n=!0):this.props.isLocked!==e.isLocked&&(this.setEditable(e),o=!0,a=!0);var l=this.props.parentModel||this.props.model,u=e.parentModel||e.model;(0,s.is)(l.getDataProperty(["colVisb"]),u.getDataProperty(["colVisb"]))||(this.clearCustomColInfos(),(0,M.buildProps)(e,this),i=!0,a=!0),(0,s.is)(l.getDataProperty(["colLock"]),u.getDataProperty(["colLock"]))||(a=!0);var d,c=this.props.formStatus!==e.formStatus;c&&(!n&&this.setVisible(e),!o&&this.setEditable(e),!i&&this.setColVisible(e),a=!0),"VIRTUALVIEWGRID"==u.meta.get("gridtype")&&(this.recordSelectedRows([]),this.lastRowKey="O",this.setSelectedRowsCount&&this.setSelectedRowsCount(0),null===(d=this.api)||void 0===d||d.clearRangeSelection(),this.gridContrlParams.showSelectionItem&&(0,j.setPageData)(this.gridState.pageId,[this.gridState.gridId,"reselected"],{selectRowsCount:0}),(0,M.buildVirtualDataSource)(this,this.props,e),this.props.model.getDataProperty(["value","queryId"])!==e.model.getDataProperty(["value","queryId"])&&this._getSumData(this)),(0,y.getValue)(l.meta,"mergerow")!=(0,y.getValue)(u.meta,"mergerow")&&(this.refreshSelectCol=!0),this.updateSubGrid(this.props,e),a&&this.publishForceRefreshViews(),(n||o||i||c)&&(this.addEventForDelayAutoSizeColumns(),(0,U.setOperationColPinnedStatus)({gridState:this.gridState,columnApi:this.columnApi,gridContainerI:this.gridContainerI,setGridThisProp:this.setGridThisProp,getGridThisProp:this.getGridThisProp})),this.gridContrlParams.isEntryEntity&&this.addAnimationQueueEmptyListener()}},{key:"shouldComponentUpdate",value:function(e,t,r){var n=this;this.latestProps=e;var o=this.shouldUpdate(e,t,r);if(!0===o&&(this.gridContrlParams.isEntryEntity&&(0,g.recordLastFocusCell)(this.api,this.gridState.rk,(function(e,t){n[e]=t}),this.getGridThisProp),this.cancelCellEditing(),this[z.MERGE_CACHE]={},this.gridContrlParams.treeTable&&this.gridContrlParams.treeTable.isTreeTable)){var i=this.gridContainerI&&this.gridContainerI.querySelector(".ag-body-viewport");this.lastScrollTop=null==i?void 0:i.scrollTop,this.delayFuncs.unshift((function(){(0,$.expandLastExpanded)(n.api,n.gridContrlParams,n.gridRows,n.gridState.rk)}))}return!!o}},{key:"componentDidMount",value:function(){var e=this,t=this.gridContainer;if(t){this.setInitialViewSize(t),this.watchGridViewSize();var r={delayFuncs:this.delayFuncs};if(f.delayFuncsWhenMount.call(this,r),setTimeout((function(){(0,M.buildColDefs)(e.props,e),e.forceUpdate(),e.setVieportSize()}),0),this.setLoadding(this.props.model),this.props.model&&this.props.model.pageId){this.removeListener=(0,j.addPageReleaseListener)(this.props.model.pageId,this.saveCacher),this.removeDirtyCellListener=(0,j.addDataChangeListener)(this.props.model.pageId,[this.gridState.gridId,"dirtyCells"],this.dirtyCellCb),this.postColumnFilterHandle=(0,j.addDataChangeListener)(this.props.model.pageId,[this.gridState.gridId,"setGridFilter"],this.postColumnFilter),this.getSumDataHandle=(0,j.addDataChangeListener)(this.props.model.pageId,[this.gridState.gridId,x.SERVERCBLISTENER,"getRealCount"],this._getSumData),this.getSumDataWithoutRealCountHandle=(0,j.addDataChangeListener)(this.props.model.pageId,[this.gridState.gridId,"getSumData"],this._getSumData),this.gridStartListener=(0,j.addDataChangeListener)(this.props.model.pageId,[this.gridState.gridId,te.M_GRID_START_EDIT],this.handleGridStartEdit);var n=(0,j.getPageData)(this.props.model.pageId,[this.gridState.gridId,x.SERVERCBLISTENER,"getRealCount"]),o=(0,j.getPageData)(this.props.model.pageId,[this.gridState.gridId,"getSumData"]);(n||o)&&this._getSumData(),this.getGridInfoHandle=(0,j.addDataChangeListener)(this.props.model.pageId,[this.gridState.gridId,z.GET_GRID_INFO_EVENT_NAME],(0,F.sendGridInfo)(this.props.model.pageId,this.props.model.key,this,this.props.invokeControlMethodOnly)),this.setGridSizeModeHandle=(0,j.addDataChangeListener)(this.props.model.pageId,[this.gridState.gridId,z.CONFIGURED_HEADER_HEIGHT_CHANGED],this.setGridSizeModeCls),this.removePermissionListener=(0,j.addDataChangeListener)(this.props.model.pageId,ue.PERMISSION_PARAMS,this.handlePermission),this.removeBase64Listener=(0,j.addDataChangeListener)(this.props.model.pageId,[this.gridState.gridId,ue.KDBASE64],this.setEncodeData);var i=(0,j.getPageData)(this.props.model.pageId,[this.gridState.gridId,ue.KDBASE64]);i&&this.setEncodeData(i)}this.gridContrlParams.isEntryEntity&&this.gridContainer.addEventListener("keydown",this._onKeyDown,!0),this.gridContainer.addEventListener("contextmenu",this.handleContextMenu,!0),window.addEventListener("mousedown",this.handleMouseDown,!0),window.addEventListener("mouseup",this.handleMouseUp,!0),this.sortDataChangeHandle(),this.serverfilterDataChangeHandle(),this.gridContainer&&(this.intersectionObserver=new window.IntersectionObserver((function(t){e.gridContrlParams.visible=t[0].isIntersecting,(0,j.setPageData)(e.props.model.pageId,[(e.props.parentModel||e.props.model).key,"visible"],e.gridContrlParams.visible)})),this.intersectionObserver.observe(this.gridContainer)),this.themeChangeRemover=(0,le.addDataChangeListener)(ae.KEY_MODIFY_THEME_ACTION,(function(e){})),this.themeChangeRemover=(0,le.addDataChangeListener)(ae.KEY_MODIFY_THEME_ACTION,(function(t){ke.includes(e.props.model.pageId)?e.forceUpdateOnThemeChanged():e.delayForceUpdateOnRevisble=!0})),this.removePageVisibleChangeListener=(0,le.addDataChangeListener)(ae.KEY_PAGE_VISIBLE_STATUS,(function(t){ke=(0,ce.getVisiblePages)(t),e.delayForceUpdateOnRevisble&&ke.includes(e.props.model.pageId)&&(e.delayForceUpdateOnRevisble=!1,e.forceUpdateOnThemeChanged())})),this.getTelCountry(this.props.model)}}},{key:"setLoadding",value:function(e){var t=(0,W.getLangMsg)("BusyLayer.loading"),r=Se(Se(Se({},e.getUserLocale(),t),"timeout",{time:600,methods:["entryRowClick"]}),"supportMethod",["loadChildrenData","next","previous","setPageIndex","setPageRows","getVirtualData","entryRowClick","selectAllRows","setColAllChecked","setRowDataByNumber","setRowSort","getGridDataByFilter"]);(0,j.setControlBusyTip)(e.pageId,e.key,r)}},{key:"componentDidUpdate",value:function(e){this.gridContainer&&(this.gridViewSize.height<=0&&(this.clientVisible=!1),void 0!==this.api&&null!==this.api&&(this.shouldForceUpdateEntryEntity&&(this.forceRefreshEntryEntity(),this.shouldForceUpdateEntryEntity=!1),this.delayFuncs.push(this.scrollAfterUpdate),this.delayFuncs.forEach((function(e){return e({execSource:"onComponentDidUpdate"})})),this.delayFuncs=[],this.syncSelection(),this.postHeaderTipsAction(),this.updatePinnedRowDatas(),this.resetEntryEntityForDirtyData(),this.resetBillListForDirtyData(),this.gridQuickFilterModelRef.setQuickFilterCols&&this.gridQuickFilterModelRef.setQuickFilterCols(),this.gridQuickFilterModelRef.resetSearchCache&&this.gridQuickFilterModelRef.resetSearchCache()))}},{key:"getGridInfo",value:function(){return{gt:this,meta:this.props.model.meta}}},{key:"componentWillUnmount",value:function(){var e,t;this.removeListener&&this.removeListener(),this.removeDirtyCellListener&&this.removeDirtyCellListener(),this.getRowTempDiv&&(_.calculateRowHeight.destroyDiv(this.getRowTempDiv),this.getRowTempDiv=null);var r=this.gridContrlParams.mergeModel;r&&r.destroy(),this.gridContrlParams.isVirtualView&&this.virtualDataCtrler&&this.virtualDataCtrler.clear(),this.resizeObserve.removeResizeObserve(),this.resizeObserve=null,!1===this.gridContrlParams.heightLimit&&this.stickTool&&this.stickTool.destory(),Z.default.remove(this.gridState.id+this.gridState.pageId),this.postColumnFilterHandle&&this.postColumnFilterHandle(),this.getSumDataHandle&&this.getSumDataHandle(),this.getSumDataWithoutRealCountHandle&&this.getSumDataWithoutRealCountHandle(),this.gridContainer.removeEventListener("keydown",this._onKeyDown,!0),this.gridContainer.removeEventListener("contextmenu",this.handleContextMenu,!0),window.removeEventListener("mousedown",this.handleMouseDown,!0),window.removeEventListener("mouseup",this.handleMouseUp,!0),this.delayFuncs=[],this.api=null,this.columnApi=null,this.gridDisplayFun={},this.gridEventService.cancel(),(0,F.willUnmountDo)(this),this.intersectionObserver&&this.intersectionObserver.disconnect(),this.intersectionObserver=null,this.getGridInfoHandle&&this.getGridInfoHandle(),this.setGridSizeModeHandle&&this.setGridSizeModeHandle(),this.horizantalScrollObserver&&this.horizantalScrollObserver.disconnect(),this.themeChangeRemover&&this.themeChangeRemover(),this.removePageVisibleChangeListener&&this.removePageVisibleChangeListener(),this.removePermissionListener&&this.removePermissionListener(),this.removeBase64Listener&&this.removeBase64Listener(),null===(e=this.removeSortDataChangeListener)||void 0===e||e.call(this),null===(t=this.removeServerFilterDataChangeListener)||void 0===t||t.call(this)}},{key:"setVisible",value:function(e){var t=Object.assign({},this.gridState.styles);t=Object.assign({},e.gridStyle,(0,v.getVisibleStyle)(t,e.isVisible)),this.gridState.styles=t}},{key:"setEditable",value:function(e){var t=(0,k.isEditable)(e);this.gridContrlParams.gridEditable=t,this.gridState.columnDefs=(0,p.modifyColDefs)(this.gridState.columnDefs,{action:"gridLock",gridOptions:this.gridOptions,meta:e.model.meta.toJS(),gridContrlParams:this.gridContrlParams,funcs:{getLockedByNum:this.getLockedByNum},localeId:this.gridState.localeId||this.gridState.defaultLocalId,defaultLocalId:this.gridState.defaultLocalId,cellActions:this.getCellActions(this.props),seq:this.gridState.seq})}},{key:"cancelCellEditing",value:function(){this.api&&this.api.stopEditing(!1)}},{key:"watchGridViewSize",value:function(){var e=this;this.resizeListener=function(t){if(e.gridContainer){var r=t.width,n=t.height;e.gridEventService.dispatchEvent({eventType:Q.default.gridViewSizeChanged,params:{width:e.gridViewSize.width,nextWidth:r}}),e.gridContainerI.style.height=(e.hasNavigation()?n-e.getNavigationHeight():n)+"px",0!==r&&(e.gridContainerI.style.width=r+"px"),e.gridViewSize={width:r,height:n},e[z.MERGE_CACHE]={},e.setVieportSize(),e.props.getGridViewSize(e.gridViewSize),!e.clientVisible&&n>0&&(e.columnApi&&e.autoSizeColumns(),e.gridContrlParams.isEntryEntity&&e.gridContrlParams.autoHeight?e.refresh((function(){e._resetLayout()})):e.refresh()),e.gridContrlParams.isEntryEntity&&0===n&&(e.clientVisible=!1),e.postHeaderTipsAction()}},this.resizeObserve=(0,P.default)(this.gridContainer,this.resizeListener)}},{key:"setInitialViewSize",value:function(e){var t=e.clientHeight;if(this.gridViewSize={width:e.clientWidth},e.offsetHeight<=0&&(this.clientVisible=!1),l.default.includes(e.style.height,"%")||""===e.style.height){var r=e.style["min-height"];l.default.includes(r,"%")||parseInt(r.replace("px",""))<=t?e.style.height=t+"px":(t=r,e.style.height=t)}this.gridViewSize.height=parseInt(t),this.props.getGridViewSize(this.gridViewSize),this.gridInitialSize=Object.assign({},this.gridViewSize),this.setVieportSize()}},{key:"hyperLinkClick",value:function(e,t,r){t=parseInt(t);var n={pageId:this.props.model.pageId,key:this.gridState.gridId};null==r?this.props.hyperLinkClick(n,e,t):this.props.mulHyperLinkClick(n,e,t,r)}},{key:"getColProperty",value:function(e,t){var r=this.latestProps.parentModel?this.latestProps.parentModel:this.latestProps.model,n="";switch(t){case"colCtrl":case"colVisb":case"colLock":n=e?[t,e]:[t]}var o=r.getDataProperty(n);return o=o?o.toJS():{}}},{key:"getRowProperty",value:function(e,t,r){var n=(this.latestProps.parentModel?this.latestProps.parentModel:this.latestProps.model).getDataValue();if(-1===(e=(0,pe.isServerFilterModeTablePage)(this.gridState.pageId)&&(0,y.isEntryWithoutTreeByGridContrlParams)(this.gridContrlParams)?(0,L.getRowIndexInGridDataByRowKey)(e)(n,this.gridState.rk):(0,L.transformAbsolute2Relative)(e)(n)))return{};var o=void 0===r?n.getIn(["rows",e,t]):n.getIn(["rows",e,t,r]);return o=o?o.toJS?o.toJS():o:{}}},{key:"getDataProperty",value:function(e){return(this.latestProps.parentModel?this.latestProps.parentModel:this.latestProps.model).getDataProperty(e)}},{key:"getLockedByNum",value:function(e){var t=this.latestProps.parentModel?this.latestProps.parentModel:this.latestProps.model;return(0,v.getLocked)(t,void 0,e)}},{key:"getVisibleByNum",value:function(e,t){var r=this.latestProps.parentModel?this.latestProps.parentModel:this.latestProps.model;return(0,v.getVisible)(r,e,t)}},{key:"getAfterFilterTreeTableRowsCount",value:function(){var e=0;return this.api.forEachNodeAfterFilterAndSort((function(t){var r;(null==t||null===(r=t.data)||void 0===r?void 0:r.isEmptyChildRow)||e++})),e}},{key:"onSelectionChanged",value:function(e){this.updateSelectionCol();var t=this.api.getSelectedRows();if(this.setSelectedRowsCount&&this.setSelectedRowsCount(t.length),this.gridContrlParams&&this.gridContrlParams.showSelectionItem){var r=this.gridRows.length,n=this.gridContrlParams,o=n.treeTable,i=n.isEntryEntity;if(o&&o.isTreeTable)r=this.getAfterFilterTreeTableRowsCount();else if(this.api&&this.api.isAnyFilterPresent()&&i){var a=this.api.getDisplayedRowCount();r=t.length>a?r:a}(0,j.setPageData)(this.gridState.pageId,[this.gridState.gridId,"reselected"],{selectRowsCount:t.length,gridRowsCount:r})}}},{key:"doGroupNodeClick",value:function(e){var t=!0,r=!0;this.gridContrlParams&&this.gridContrlParams.isVirtualView&&this.gridContrlParams.showSelectionItem&&(t=!e.node.selected,r=!1),this.invokeRowSelection(e.node,t,r)}},{key:"onRowDoubleClicked",value:function(e){if(this.gridContrlParams.hasSelectAllRow)this.differenceUpdateRowSelection(e&&e.node,!0);else{var t=this.gridState.rk,r=[],n=e.data[t],o=this.gridContrlParams,i=o.mergeModel,a=o.suppressMergeSelection;if(void 0===n&&(n=-1),n=(0,_.getRealRowKey)(n,i,a),r.push(n),this.dataDesc.postcols.length>0){var l=[];this.dataDesc.postcols.forEach((function(t){return l.push(e.data[t])})),[].push(l)}var u=this.getAllSelectedInfo(n),s=this.props.parentModel||this.props.model;this.props.dispatch((0,I.convertAppModelFunctionAction)((0,I.setControlPostValue)(s.pageId,s.key,u))),this.props.entryRowDoubleClick(s,r)}}},{key:"buildSelectedRowJson",value:function(e,t,r){var n=this.api.getFocusedCell(),o=n&&n.column?n.column.colId==y.SELECTIONCOLID?"0":n.column.colId:"0";n&&n.column&&"combinedField"===n.column.colDef.cellRendererParams.type&&(o=this.lastFocusCombinedItem);var i={fieldKey:o,row:t,selRows:e,isClientNewRow:!1,clientNewRows:""};if(r&&(i.selDatas=r),this.gridContrlParams.postRangeSelection){var a=(0,F.getGridPostData)(this.getLastestGridModel());a&&a.selectionRange&&(i=Object.assign(a,i))}return i}},{key:"syncSelection",value:function(){var e=this,t=this.selectedRows||[],r=0,n=null,o=t.length;t.forEach((function(t,i){(n=e.getNodeByRowKey(t))&&(r++,n.setSelected(!0),i===o-1&&!e.hasSetFocusedCell&&!e.gridContrlParams.isVirtualView&&e.ensureRowVisible(n.rowIndex))})),t.length!=r&&(0==r&&this.api.clearFocusedCell(),this.postRowSelection()),this.updateSelectionCol()}},{key:"updateSelectionCol",value:function(e){if(this.gridContrlParams&&this.gridContrlParams.showSelectionItem){var t={rowNodes:this.api.getRenderedNodes(),columns:[y.SELECTIONCOLID],force:!!e,volatile:!1};this.api.refreshCells(t)}}},{key:"onGridReady",value:function(e){if(this.api=e.api,this.columnApi=e.columnApi,"infinite"==this.gridOptions.rowModelType||this.dataLoaded||this.api.showLoadingOverlay(),this.props.setGridReady(),!1===this.gridContrlParams.heightLimit){var t=f.modelFuncs.getGridHeader(this.gridContainerI);t&&(t.style.position="relative",t.style.zIndex=111,t.style.marginTop="-1px",this.stickTool=new T.default(t),this.stickTool.start())}this.gridContrlParams.isVirtualView||this._resetLayout(),this.gridOptions.masterDetail&&this.gridRows.length>0&&this.columnApi.autoSizeColumn(z.DETAIL_EXPAND_COL_ID);var r=this.gridContainerI&&this.gridContainerI.querySelector(".ag-center-cols-viewport"),n=this.gridContainerI&&this.gridContainerI.querySelector(".ag-body-viewport");r&&r.setAttribute("tabindex","-1"),n&&n.setAttribute("tabindex","-1"),this.horizantalScrollObserver=(0,U.addHorizantalScrollObserver)({gridState:this.gridState,columnApi:this.columnApi,gridContainerI:this.gridContainerI,setGridThisProp:this.setGridThisProp,getGridThisProp:this.getGridThisProp}),(0,U.setOperationColPinnedStatus)({gridState:this.gridState,columnApi:this.columnApi,gridContainerI:this.gridContainerI,setGridThisProp:this.setGridThisProp,getGridThisProp:this.getGridThisProp}),(0,F.onGridReadyDo)(this)}},{key:"deselectAllRow",value:function(){this.api.deselectAll(),this.postRowSelection(),this.updateSelectionCol()}},{key:"recalcMerge",value:function(){var e=this.gridContrlParams.mergeModel;if(e){var t=[];this.api.forEachNodeAfterFilterAndSort((function(e){t.push(e.data)})),(0,_.entitySpanEngine)(e,t,this.gridState),this.api.redrawRows()}}},{key:"onRowGroupOpened",value:function(e){if(this.gridContrlParams.treeTable){var t=this.gridContrlParams.treeTable,r=this.props,n=r.model,o=r.invokeControlMethodOnly;(0,A.handleGroupRowOpended)(e,t,n,o,this.columnApi,this.api,this.gridState.rk);var i={rowNodes:e.api.getRenderedNodes(),columns:[this.gridState.seq]};e.api.refreshCells(i),this.reSizeHeight({})}(this.gridContrlParams.treeTable||this.gridContrlParams.treeVirtualView)&&this.addEventForDelayAutoSizeColumns(),this.gridOptions.masterDetail&&this.columnApi.autoSizeColumn(z.DETAIL_EXPAND_COL_ID)}},{key:"selectClick",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];"single"!=this.gridOptions.rowSelection&&(t?(0,y.hasFilterModel)(this.api)?this.api.deselectAllFiltered():this.api.deselectAll():(0,y.hasFilterModel)(this.api)?this.api.selectAllFiltered():this.api.selectAll(),r||this.postRowSelection(),this.updateSelectionCol())}},{key:"setAmountOperation",value:function(e,t){e=parseInt(e);var r={pageId:this.props.model.pageId,key:this.gridState.gridId};this.props.setAmountOperation(r,e,t)}},{key:"getRealPageCount",value:function(){var e={pageId:this.props.model.pageId,key:this.gridState.gridId};this.props.invokeControlMethodOnly(e,"getRealPageCount",[])}},{key:"toolBarBtnClick",value:function(e,t){var r={pageId:this.props.model.pageId,key:this.gridState.gridId};this.props.toolBarBtnClick(r,e,t)}},{key:"handleFuncs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var t in e)switch(t){case"setSelectedRowsCount":this.setSelectedRowsCount=e[t];break;case"setRealPageCount":this.setRealPageCount=e[t]}}},{key:"getGridVisiable",value:function(){return(null!=this.gridContainer?this.gridContainer.offsetHeight:0)>0}},{key:"getSelectRowBillCount",value:function(){if(this.api){var e=this.gridContrlParams.mergeModel;return(0,_.getMainEntityNum)(e,this.selectedRows)}}},{key:"getColHeaderName",value:function(e){if(this.api){var t=this.gridState.columnDefs.find((function(t){return t.field===e}));return t&&(t.cellRendererParams.originHeaderName||t.headerName)}return!1}},{key:"getNavigationBar",value:function(e){var t=this,r=this.props,n=r.parentModel,o=r.model,i=r.showFormByTipsInAction,l=r.invokeControlMethodOnly,u=r.invokeControlMethodSingle,d=n||o,c=this.gridContrlParams||{},f=c.isListView,g=c.isVirtualView,p=c.heightLimit,y=c.isSqlQuery,v=c.isIndexMode,h=c.enabledChangePageInFakeCount,b=c.suppressSelectAllRows,C=c.hasSummaryFields,w=c.isEntryEntity,S=c.showSelectionItem,E=c.isShowVirtualViewRowCount,I=d&&d.getMetaProperty("maxPageSize")||(f?z.DEFAULT_MAX_PAGE_SIZE:z.ENTRY_MAX_PAGE_SIZE),R=d&&d.getMetaProperty("pageRowOptions")||(0,s.List)(),T=null==d?void 0:d.getDataProperty([ue.TIME_STAMP_FRESH]),O="single"===this.gridOptions.rowSelection||g&&!S,P=!this.isLargeData||this.isShowLargeDataCount,D=E&&P;return g?a.default.createElement(B.default,{model:d,dataCount:this.dataDesc.datacount,hasSelectAllRow:this.gridContrlParams.hasSelectAllRow,handleVirtualViewSelectAll:this.handleVirtualViewSelectAll,resetSelectAllFlag:T,isSingleSelection:O,showRowCount:D,isRealDataCount:P}):a.default.createElement(m.default,{pageId:d.pageId,model:d,isGrid:!0,isListView:f,isVirtualView:g,isEntryEntity:w,isF7Form:this.gridState.config.isf7||!1,pageType:this.gridContrlParams.pageType,localeId:this.gridState.localeId,defaultLocalId:this.gridState.defaultLocalId,showFormByTips:i,isSplitPage:this.dataDesc.isSplitPage||!0,pageindex:this.dataDesc.pageindex||1,rowcount:this.getRealRowCount()||0,islastpage:this.dataDesc.islastpage||!1,datacount:this.dataDesc.datacount||0,billdatacount:this.dataDesc.billdatacount||0,pagerows:this.dataDesc.pagerows||0,pagecount:this.dataDesc.pagecount||1,isgetrealcount:this.dataDesc.isgetrealcount,isOutMaxDataCount:this.dataDesc.isOutMaxDataCount,limitdatacount:this.dataDesc.limitdatacount||0,realPageCount:null==this.dataDesc.realPageCount?0:this.dataDesc.realPageCount,rowSelection:this.gridOptions.rowSelection,selectClick:function(e,r,n){return t.selectClick(e,r,n)},gridKey:this.gridState.gridId,getSelectRowBillCount:this.getSelectRowBillCount.bind(this),toolBarBtnClick:this.toolBarBtnClick.bind(this),setAmountOperation:this.setAmountOperation.bind(this),getRealPageCount:this.getRealPageCount.bind(this),handleFuncs:this.handleFuncs.bind(this),heightLimit:p,getGridVisiable:this.getGridVisiable,getPageDisplayRowCount:this.getPageDisplayRowCount,invokeControlMethodOnly:l,getColHeaderName:this.getColHeaderName.bind(this),isSqlQuery:y,isIndexMode:v,maxPageSize:I,invokeControlMethodSingle:u,enabledChangePageInFakeCount:h,suppressSelectAllRows:b,navigationDefaultHeight:e,onToolbarSizeChanged:this.onToolbarSizeChanged,hasSummaryFields:C,pageMode:this.gridState.config.pageMode,pageRowOptions:R.toJS()})}},{key:"getRealRowCount",value:function(){return this.gridRows.length||this.dataDesc.rowcount}},{key:"getPageDisplayRowCount",value:function(){return this.api&&(0,y.hasFilterModel)(this.api)?this.api.getDisplayedRowCount():this.getRealRowCount()}},{key:"getGridClassName",value:function(){var e,t=(0,v.getCommonClass)(this.props.model),r=t.Grow,n=t.Shrink,o=this.gridContrlParams,i=o.isListView,a=o.isVirtualView,l=o.heightLimit,u=o.suppressCopy,s=o.postRangeSelection,d=o.maxLevel,f=o.suppressMergeSelection,g=o.columnResizeMode,p=o.verticalBordered;l||(n=0);var y=i||a;return(0,b.default)("kd-cq-table kd-cq-control",(Se(Se(Se(Se(Se(Se(Se(Se(Se(Se(e={},C.default.gridContainer,!0),"ag-theme-material-kd",!0),C.default.billEdit,!y),C.default.billView,i),C.default.billVirtual,a),C.default["grid-suppress-copy"],u),"billF7-theme",this.gridState.config&&this.gridState.config.isf7),"billView-theme",y),"billEdit-theme",!y),"report-view-theme",a),Se(Se(Se(Se(Se(Se(Se(e,"kd-grid-no-bordered",!1===this.props.bordered),"kd-grid-vertical-bordered",p),"kd-grid-post-range-selection",s),"kd-grid-with-column-groups",d>1),"kd-grid-partial-merge",f),"auto-column-resize-mode",g===z.GRID_COLUMN_RESIZE_MODE.adaptive||g===z.GRID_COLUMN_RESIZE_MODE.fit),C.default.ieSizeClass,c.default[c.IS_IE])),(0,h.default)({Grow:r,Shrink:n}))}},{key:"initialShell",value:function(e){var t={style:this.gridState.styles,className:e,headerHeight:this.gridOptions.headerHeight,bindGridContainer:this.bindGridContainer,bindGridContainerI:this.bindGridContainerI,hasToolbar:this.hasNavigation()};return(0,V.default)(t)}},{key:"render",value:function(){var e=this;this.latestProps=this.props;var t={},r=this.getGridClassName();if(!this.gridContainer)return this.initialShell(r);t=Object.assign({},{height:this.gridViewSize.height,width:this.gridViewSize.width}),this.getGridRowData();var n=this.props.toolbarLocation,o=null;if(this.hasNavigation()){r="1"!==n?r+" "+[w.default.billViewWithToolbar]:r+" "+[w.default.billViewWithBottomToolbar];var i=this.getNavigationDefaultHeight();t.height-=i,o=this.getNavigationBar(i)}this.gridState.styles.minHeight;var l=this.gridContrlParams,s=l.isAlternatelyRowsStyle,d=l.mergeModel,c=d&&!d.suppress?"grid-merge-zebra-stripe":"grid-zebra-stripe";r=(0,b.default)(Se(Se({},c,s),"grid-row-merged",d&&!d.suppress),r);var f={};f="serverSide"===this.gridOptions.rowModelType||"infinite"===this.gridOptions.rowModelType?{rowModelType:this.gridOptions.rowModelType}:this.gridOptions.masterDetail?{masterDetail:!!this.gridOptions.masterDetail,detailCellRendererParams:this.gridOptions.detailCellRendererParams,detailCellRenderer:this.gridOptions.detailCellRenderer,rowData:this.gridRows}:{rowData:this.gridRows},t.position="relative";var g=this.getGridInnerWrapClassName();return a.default.createElement("div",{id:this.gridState.id,"data-comtype":this.props.model.meta.get("type"),"data-shortcut":this.props.model.pageId,"data-gridtype":this.props.model.meta.get("gridtype"),ref:this.bindGridContainer,style:this.gridState.styles,className:r,onKeyDown:this.handleAgCoreKeyDown},a.default.createElement("div",{className:C.default.absoluteContainer},"1"!==n?o:null,a.default.createElement("div",{className:g,style:t,ref:this.bindGridContainerI},a.default.createElement(G.default,{gridContrlParams:this.gridContrlParams,toolBarBtnClick:this.props.toolBarBtnClick,getGridState:function(){return e.gridState},postRowSelection:this.postRowSelection,gridOptions:this.gridOptions,gridState:this.gridState}),a.default.createElement(u.AgGridReact,he({},f,{ref:function(t){return e.aggridcont=t},gridOptions:this.gridOptions,columnDefs:this.gridState.columnDefs,onGridReady:this.onGridReady,onFilterModified:function(e){D.default.log("filtermodify")},onFilterChanged:this.handleAfterFilterChanged,onSortChanged:this.onAfterSortChanged,onRowGroupOpened:this.onRowGroupOpened,onComponentStateChanged:this.gridFinishedUpdate,onRowClicked:this.clickOrDoubleClick,onSelectionChanged:this.onSelectionChanged,onColumnResized:this.columnResized,onColumnMoved:this.columnMoved,onDragStopped:this.handleDragStopped,onDragStarted:this.onDragStarted,onVirtualColumnsChanged:this.onVirtualColumnsChanged,pinnedBottomRowData:this.pinnedBottomRowData,suppressScrollLag:"true",scrollbarWidth:y.SCROLLBARWIDTH,groupHeaders:"true",deltaRowDataMode:this.gridContrlParams.isEntryEntity&&!this.gridContrlParams.treeTable},this.callbackProps,{popupParent:(0,Y.getRootContainter)()}))),"1"===n?o:null,a.default.createElement(_.RowDetailsContainer,{parentGridState:this.gridState,rowDetailParams:this.gridContrlParams.rowDetailParams,rowDetailType:this.gridContrlParams.rowDetailType,superProps:this.props,getCellActions:this.getCellActions,pushDelayInvoke:this.pushDelayInvoke,getGridThisProp:this.getGridThisProp}),this.gridContrlParams.headerTipsConfig.length>0?a.default.createElement(O.default,{tipsConfig:this.gridContrlParams.headerTipsConfig,pageId:this.gridState.pageId,gridId:this.gridState.gridId,localeId:this.gridState.localeId,showFormByTips:this.props.showFormByTipsInAction,model:this.props.model}):null,this.gridContrlParams.isEntryEntity?a.default.createElement(de.default,{pageId:this.gridState.pageId,gridId:this.gridState.gridId,api:this.api,columnApi:this.columnApi,gridEventService:this.gridEventService,pageIndex:this.dataDesc.pageindex,pageRows:this.dataDesc.pagerows,type:this.gridState.type,gridType:this.gridState.gridType}):null),this.gridContrlParams.viewParams.length>0?a.default.createElement(K.ViewManager,{viewParams:this.gridContrlParams.viewParams,getLastestGridModel:this.getLastestGridModel,pageId:this.gridState.pageId,id:this.gridState.id,getActiveRowKey:this.getActiveRowKey,setActiveView:this.setActiveView,getColMetaByField:this.getColMetaByField,mergeState:ie.mergeState,comfirmDelete:this.props.comfirmDelete,dispatch:this.props.dispatch,getGridDisplayFun:this.getGridDisplayFun,columnDefs:this.gridState.columnDefs,getColProperty:this.getColProperty,getDataProperty:this.getDataProperty}):null,this.gridContrlParams.isListView||this.gridContrlParams.isVirtualView?a.default.createElement(q.default,{rowKey:this.gridState.rk,getApi:this.getApi,getColumnApi:this.getColumnApi,setFocusedCell:this.setFocusedCell,gridContainer:this.gridContainer,getGridDisplayFun:this.getGridDisplayFun,setQuickSearchCls:this.setQuickSearchCls,setGridQuickFilterModelRefFun:this.setGridQuickFilterModelRefFun,gridContrlParams:this.gridContrlParams,columnDefs:this.gridState.columnDefs,type:this.gridState.type}):null,this.gridContrlParams.isCellRangesSum?a.default.createElement(H.default,{pageId:this.gridState.pageId,gridId:this.gridState.gridId}):null,a.default.createElement(_.PinnedRowSuspendSpace,{pageId:this.gridState.pageId,gridId:this.gridState.gridId,id:this.gridState.id,gridContrlParams:this.gridContrlParams,dataDesc:this.dataDesc,api:this.api,invokeControlMethodSingle:this.props.invokeControlMethodSingle,getGridThisProp:this.getGridThisProp,setGridThisProp:this.setGridThisProp}),a.default.createElement(se.default,{pageId:this.gridState.pageId,gridId:this.gridState.gridId,api:this.api,gridContrlParams:this.gridContrlParams,onVisibleChange:this.handleGridValidateTipVisibleChange,className:C.default["grid-validate-tip"],type:this.gridState.type,gridType:this.gridState.gridType}))}}],n&&Te(r.prototype,n),o&&Te(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(a.Component))||i)||i);t.default=Le;setTimeout((0,y.foy)(R),3)},943688:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(505684),r(693917),r(976896),r(721300),r(606200),r(534440),r(633768),r(690512),r(78504),r(776512),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.pageId,r=e.gridId,n=e.api,p=e.columnApi,y=e.gridEventService,v=e.pageIndex,S=void 0===v?1:v,E=e.pageRows,I=void 0===E?20:E,R=e.type,T=e.gridType,O=m((0,i.useState)(!0),2),P=O[0],D=O[1],A=m((0,i.useState)({top:!1,bottom:!1}),2),_=A[0],M=A[1],k=(0,i.useRef)({top:-1,bottom:Number.MAX_SAFE_INTEGER}),L=(0,i.useRef)(w(S,I)),j=(0,i.useRef)(null),N=(0,i.useCallback)((function(){return!n.isColumnFilterPresent()&&0===n.getSortModel().length}),[n]),V=(0,i.useCallback)((function(){if(!j.current){var e=n.gridPanel.eBodyViewport;j.current=new window.IntersectionObserver((function(e){e[0].isIntersecting&&K(),1===e[0].intersectionRatio&&(j.current.disconnect(),j.current=null)}),{threshold:[1e-6,.999999]}),e&&j.current.observe(e)}}),[n]),K=(0,i.useCallback)((0,a.debounce)((function(){var e=(0,l.getGridValidateData)(t,[r]);if(e){var o={top:!1,bottom:!1},i=n.gridPanel.eBodyViewport.getBoundingClientRect(),a=i.x,u=i.y,s=n.getVerticalPixelRange(),d=s.top,c=s.bottom,f=document.elementFromPoint(a+h,u+h),g=document.elementFromPoint(a+h,u+c-d-h);f&&g||V();var p=C(f),y=C(g);k.current.top=-1,k.current.bottom=Number.MAX_SAFE_INTEGER;for(var m=e.keys(),v=m.next();!v.done;){var b=v.value;if(b<L.current[0]||L>=L.current[1])v=m.next();else{var w=(n.getRowNode(b)||{}).rowIndex;null!=p&&w<p?(k.current.top=Math.max(k.current.top,b),o.top=!0):null!=y&&w>y&&(k.current.bottom=Math.min(k.current.bottom,b),o.bottom=!0),v=m.next()}}0===d&&(o.top=!1),M(o)}else M({top:!1,bottom:!1})}),300),[n,t,r]);(0,i.useEffect)((function(){var e=(0,a.debounce)((function(e){"vertical"===e.params.direction&&N()&&K()}),300);y.addEventListener(u.default.bodyScroll,e);var o=function(e){(e.tableId===r||void 0===e.tableId)&&void 0===e.rowKey&&null!=n&&n.gridPanel.isVerticalScrollShowing()&&N()&&K()},i=(0,d.addDataChangeListener)(t,[r,s.GRID_VALIDATE_CHANGE],o),l=(0,d.addDataChangeListener)(t,[s.VALIDATE_FINISH],(function(e){var t=e.tableId,n=e.rowKey;t&&t!==r||o({rowKey:n})})),c=function(){D(N())};return n&&(n.addEventListener("filterChanged",c),n.addEventListener("sortChanged",c)),function(){y&&y.removeEventListener(u.default.bodyScroll,e),i&&i(),l&&l(),n&&(n.removeEventListener("filterChanged",c),n.removeEventListener("sortChanged",c)),j.current&&(j.current.disconnect(),j.current=null)}}),[n]),(0,i.useEffect)((function(){var e=L.current;L.current=w(S,I),e[0]===L.current[0]&&e[1]===L.current[1]||K()}),[S,I]);var F=(0,a.throttle)((function(e){var o="";"top"===e.target.dataset.arrow?o=k.current.top:"bottom"===e.target.dataset.arrow&&(o=k.current.bottom);var i=(n.getRowNode(o)||{}).rowIndex;n.ensureIndexVisible(i,"middle");var a=(0,l.getGridValidateData)(t,[r,o]);if(a&&p){var u,s=(0,f.getNextValidateFailedCol)(p,null===(u=p.getAllDisplayedColumns()[0])||void 0===u?void 0:u.colId,a);s&&(n.ensureColumnVisible(s.colId),n.setFocusedCell(i,s.colId),n.startEditingCell({rowIndex:i,colKey:s.colId}))}var d=(0,c.getGridTrackingType)({type:R,gridType:T});(0,c.trackingOfValidateClick)({pageId:t,controlId:r,controlType:d,actionKey:e.target.dataset.arrow})}),100),x=0,G=0;n&&(x=parseInt(n.headerRootComp.eGui.style.height)+b,G=parseInt(n.gridPanel.eHorizontalScrollBody.style.height)+parseInt(n.gridPanel.eBottom.style.height)+b);return n&&P?o.default.createPortal(i.default.createElement(g.default,{arrow:_,topStyle:{top:x},bottomStyle:{bottom:G},handleClick:F}),n.gridPanel.eGui):null},r(323784),r(743924),r(846428),r(300116),r(387912),r(571176),r(977864);var o=y(r(369396)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(795520)),a=r(790832),l=r(218652),u=y(r(7960)),s=r(545072),d=r(738704),c=r(816880),f=r(837592),g=y(r(74384));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}function y(e){return e&&e.__esModule?e:{default:e}}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var h=2,b=2;function C(e){for(var t,r=e;r&&!t;){var n;t=null===(n=r)||void 0===n?void 0:n.getAttribute("row-index"),r=r.parentNode}return t}function w(e,t){return[(e-1)*t,e*t]}},873548:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(505684),r(743924),r(693917),r(976896),r(721300),r(606200),r(534440),r(633768),r(690512),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.pageId,r=e.gridId,n=e.api,o=e.gridContrlParams,d=e.onVisibleChange,f=e.className,g=e.type,p=e.gridType,y=c((0,i.useState)(0),2),m=y[0],v=y[1],h=c((0,i.useState)(!1),2),b=h[0],C=h[1];(0,i.useEffect)((function(){if(o.isEntryEntity){var e=(0,a.addDataChangeListener)(t,[r,l.VALIDATE_FAILED_COUNT],(function(e){v(e),n&&C(0!==e&&n.isColumnFilterPresent())}));return function(){e()}}}),[n]);return(0,i.useEffect)((function(){null==d||d(b)}),[b]),b?i.default.createElement(s.default,{errorCount:m,clearFilter:function(){var e=n.getFilterModel();Object.keys(e).forEach((function(e){var t=n.getFilterInstance(e).getFrameworkComponentInstance();null==t||t.clearInput()}));var o=(0,u.getGridTrackingType)({type:g,gridType:p});(0,u.trackingOfValidateClick)({pageId:t,controlId:r,controlType:o,actionKey:"clearFilter"})},className:f}):null},r(233696),r(323784),r(76124),r(387912),r(997308);var o,i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(795520)),a=r(738704),l=r(273248),u=r(816880),s=(o=r(339405))&&o.__esModule?o:{default:o};function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}},760700:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(743924),r(205960),r(846428),r(708896),r(606200),r(534440),r(670864),r(387912),r(836887),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(835164),r(297336),r(880920);var o=c(r(795520)),i=c(r(369396)),a=c(r(41340)),l=r(738704),u=r(142408),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(211152));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y(n.key),n)}}function p(e,t,r){return t&&g(e.prototype,t),r&&g(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function m(e,t,r){return t=h(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}(e,v()?Reflect.construct(t,r||[],h(e).constructor):t.apply(e,r))}function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(v=function(){return!!e})()}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}function w(e,t){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},w(e,t)}t.default=function(e){function t(e){var r;return f(this,t),(r=m(this,t,[e])).state={ready:!1},r.getTipsConfig=r.getTipsConfig.bind(b(r)),r}return C(t,e),p(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.pageId,r=e.gridId;this.setHeaderTipsHander=(0,l.addDataChangeListener)(t,[r,"__headerTips"],this.getTipsConfig)}},{key:"getTipsConfig",value:function(e){this.setState({ready:e})}},{key:"componentWillUnmount",value:function(){this.setHeaderTipsHander&&this.setHeaderTipsHander()}},{key:"renderItem",value:function(){var e=this,t=this.props,r=t.tipsConfig,n=t.pageId,i=t.gridId,a=t.showFormByTips,l=t.localeId,u=[];return this.state.ready&&(u=r.map((function(t,r){var u=document.getElementById(t.id);return null!==u?o.default.createElement(S,{model:e.props.model,key:r,pageId:n,gridId:i,localeId:l,showFormByTips:a,dom:u,tips:t.tips}):null}))),u}},{key:"render",value:function(){var e=this.renderItem();return o.default.createElement("div",null,e)}}]),t}(o.default.Component);var S=function(e){function t(){return f(this,t),m(this,t,arguments)}return C(t,e),p(t,[{key:"render",value:function(){var e=this.props,t=e.tips,r=e.pageId,n=e.gridId,l=e.showFormByTips,d=e.localeId,c=E(t);return i.default.createPortal(o.default.createElement(a.default,{style:{fontSize:"12px"},model:this.props.model,tips:t,userLocal:d,showFormByTips:function(e,t){return l(r,n,e,t,c)},clickTipsLink:function(e){return s.default[s.INVOKE_CUSTOM_EVENT](r,"",[u.CUSTOM_EVENT_CLICK_TIPS_LINK,"",e])}}),this.props.dom)}}]),t}(o.default.Component),E=function(e){var t=e.get("type"),r=e.get("triggerType");return"text"===t?r||"hover":r||"click"}},579320:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.style,r=e.headerHeight,l=e.className,u=e.bindGridContainer,s=e.bindGridContainerI,d=e.hasToolbar,c=e.model,f=e.toolBarBtnClick,g=e.advGridId,p=c?function(e,t,r,o){var i=e.meta;if(i){var l={isListView:"VIEWGRID"===i.get("gridtype"),isVirtualView:"VIRTUALVIEWGRID"===i.get("gridtype"),hasSettingBtn:i.get("showGridConfig",!1),maxLevel:1},u={rowKey:i.get("gridtype"),seq:i.get("seq"),id:i.get("id"),pageId:e.pageId,gridId:o||i.get("id")},s={headerHeight:t};return n.default.createElement(a.default,{gridContrlParams:l,gridState:u,gridOptions:s,toolBarBtnClick:r})}return null}(c,r,f,g):null;return n.default.createElement("div",{style:t,className:l,ref:u},d?n.default.createElement("div",{className:i.default.toolBar}):null,n.default.createElement("div",{className:o.default.gridContainerI,style:{position:"relative"},ref:s},n.default.createElement("div",{className:"ag-header",style:{top:"0px",height:r+"px",width:"100%"}},p),n.default.createElement("div",{style:{backgroundColor:"rgba(255,255,255,0.5)",position:"absolute",top:0,height:"100%",width:"100%"}})))};var n=l(r(795520)),o=l(r(429208)),i=l(r(748532)),a=l(r(958232));function l(e){return e&&e.__esModule?e:{default:e}}},343624:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function i(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}r(182320),r(909112),r(697060),r(360776),r(743924),r(205960),r(846428),r(606200),r(78504),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(622676),r(613468),r(233696),r(693917),r(927184),r(387912),r(997308),r(86744);var l=i((function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.getListenerListIndex=function(){var e=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).findIndex((function(t){return t.listener===e}))},this.addEventListener=function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.async,i=void 0!==o&&o,a=n.once,l=void 0!==a&&a,u=t._getListenerList(e,i);if(t.getListenerListIndex(u,r)<0){var s={listener:r,once:l};u.push(s)}},this.removeEventListener=function(e,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=t._getListenerList(e,n),i=t.getListenerListIndex(o,r);i>=0&&o.splice(i,1)},this.dispatchEvent=function(e){t.dispatchToListeners(e,!0),t.dispatchToListeners(e,!1)},this.dispatchToListeners=function(e,r){var n=e.eventType,o=t._getListenerList(n,r);o.forEach((function(n){var o=n.listener;if(r)t._dispatchAsync((function(){o(e)}));else try{o(e)}catch(e){console.warn(e)}})),(r?t.allAsyncListeners:t.allSyncListeners)[n]=o.filter((function(e){return!e.once}))},this.cancel=function(){t.allSyncListeners={},t.allAsyncListeners={},t.scheduled=!1,t.asyncFunctionsQueue=[]},this._getListenerList=function(e,r){var n=r?t.allAsyncListeners:t.allSyncListeners,o=n[e];return o||(o=[],n[e]=o),o},this._dispatchAsync=function(e){t.asyncFunctionsQueue.push(e),t.scheduled||(window.setTimeout(t._flushAsyncQueue,0),t.scheduled=!0)},this._flushAsyncQueue=function(){t.scheduled=!1;var e=t.asyncFunctionsQueue.slice();t.asyncFunctionsQueue=[],e.forEach((function(e){return e()}))},this.allSyncListeners={},this.allAsyncListeners={},this.scheduled=!1,this.asyncFunctionsQueue=[]}));t.default=l},362964:function(e,t,r){"use strict";r(182320),r(909112),r(697060),r(360776),r(505684),r(743924),r(693917),r(205960),r(976896),r(721300),r(846428),r(606200),r(534440),r(633768),r(690512),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(613468),r(233696),r(241872),r(323784),r(336368),r(387912),r(997308),r(86744);var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=p(e)&&"function"!=typeof e)return{default:e};var r=c(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(795520)),o=d(r(671252)),i=d(r(790832)),a=d(r(864484)),l=d(r(882976)),u=r(993916),s=r(331428);function d(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}function f(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||m(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t,r){var n;return n=function(e,t){if("object"!=p(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==p(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||m(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){if(e){if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var h={};function b(e){return h[e]||(h[e]=(0,s.getLangMsg)(e)),h[e]}t.default=function(e){var t=e.rowKey,r=e.getApi,s=e.getColumnApi,d=e.setFocusedCell,c=e.gridContainer,m=e.getGridDisplayFun,v=e.setQuickSearchCls,h=e.gridContrlParams,C=e.columnDefs,w=e.setGridQuickFilterModelRefFun,S=y((0,n.useState)(""),2),E=S[0],I=S[1],R=y((0,n.useState)(!0),2),T=R[0],O=R[1],P=y((0,n.useState)(!1),2),D=P[0],A=P[1],_=(0,n.useRef)(!1),M=(0,n.useRef)({}),k=function(e,t){""!==e?M.current.val===e?M.current.cells?M.current.cells.push(t):M.current.cells=[t]:M.current={val:e,cells:[t]}:M.current={}},L=(0,n.useRef)({}),j=function(e,t){""===e&&(L.current={}),"object"===p(e)?L.current=Object.assign({},L.current,e):"string"==typeof e&&(L.current=Object.assign({},L.current,g({},e,t)))},N=(0,n.useRef)(1),V=function(e){N.current=e},K=(0,n.useRef)([]),F=(0,n.useRef)({}),x=(0,n.useRef)(0),G=((0,n.useRef)(),(0,n.useRef)(!1)),B=(0,n.useRef)(null),H=(0,n.useRef)({}),W=(0,n.useRef)(null),z=(0,n.useRef)(null),U=i.default.debounce((function(){var e,t=r();if(t&&""!==E)if(!B.current&&(B.current=t),G.current=(e=h.mergeModel)&&!e.suppress,L.current.val!==E){var n=q(t);n&&(x.current=n.rowIndex),k(""),Y(t)}else Y(t)}),100,{leading:!0,trailing:!1}),q=function(e){var t=(e=e||r()).getFocusedCell();return t?{rowIndex:t.rowIndex,colId:t.column.colId}:null},Y=function(e){V(1);var t=q(e),r=t?t.rowIndex:0,n=e.getDisplayedRowCount()-1;Z(e,r,n)},Z=function e(t,r,n){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=Object.assign({},L.current);_.current=!1;for(var u=r;u<=n;o?u++:u--){if(_.current){_.current=!1;break}Q(t.getDisplayedRowAtIndex(u),u,i,t)}if(X(a)){if(l.default.log("not search"),0!==x.current){l.default.log("restart search 0 to",x.current);var s=x.current;return x.current=0,V(1),void e(t,0,s,!0,!0)}M.current.val?(l.default.log("searched all,looper"),k(""),j(""),e(t,0,t.getDisplayedRowCount()-1)):(j({val:E}),A(!0),l.default.log("not match cell, tips"))}else A(!1)},X=function(e){return!_.current&&i.default.isEqual(e,L.current)},$=function(e,t,r){var n=q();return!n||t>function(e){if(F.current[e])return F.current[e];var t=K.current.findIndex((function(t){return t===e}));return F.current[e]=t,t}(n.colId)||r>n.rowIndex},J=function(e,t,r,n,o){return e||function(e){return!L.current||function(e){return null==e||""===e}(L.current.val)||L.current.val!==e}(t)||$(0,n,o)},Q=function(e,n,o,i){if(e){var a=e.data;if(null==a)return;var u=K.current&&f(K.current);l.default.log("cols",u),u&&u.forEach((function(e,i){if(null==a[e]||_.current)return!1;var l=m(e),s=l?l(a[e],a):oe(e,a[e],a);s+="";var d=a[t]||n;s.indexOf(E)>=0&&J(o,E,0,i,n)&&!function(e,t,n){if(!G.current)return!1;var o=B.current||r();return!function(e,t,r,n,o){var i=n.mergeModel;return r===t||i&&i.isEntityGroupBottom(e,o)}(e,o&&o.getDisplayedRowCount()-1,t,h,ie(n))}(d,n,e)&&(_.current=!0,j({val:E,rowIndex:n,colId:e,colIndex:i}),k(E,{val:E,rowIndex:n,colId:e,colIndex:i}),ee(d,e),u.length=0)}))}},ee=function(e,t){r().clearRangeSelection(),l.default.log(e,t),d([e,t]),setTimeout((function(){te()}),0)},te=function(){W.current&&W.current.focus&&W.current.focus()},re=function(){W.current&&W.current.select&&W.current.select()},ne=function(e){var t;return H.current&&H.current[e]?t=H.current[e]:(t=(0,u.getColDef)(e,C),H.current?H.current[e]=t:H.current=g({},e,t)),t},oe=function(e,t,r){return(0,u.getCellDisplayValueWrap)(ne(e),t,r)},ie=function(e){var t=ne(e);return t&&t.cellRendererParams.entity},ae=function(e){if((e.metaKey||e.ctrlKey)&&"f"===e.key)return O(!1),e.preventDefault(),!1},le=function(e){27===e.keyCode&&O(!0)},ue=function(e){if((e.metaKey||e.ctrlKey)&&"f"===e.key)return re(),e.preventDefault(),!1};(0,n.useEffect)((function(){return c&&c.addEventListener("keydown",ae),document.addEventListener("keydown",le),z.current&&z.current.addEventListener("keydown",ue),function(){c&&c.removeEventListener("keydown",ae),document.removeEventListener("keydown",le),z.current&&z.current.removeEventListener("keydown",ue)}}),[]);var se=function(){var e=s();K.current=e&&(0,u.getColumnSequence)(e)};(0,n.useEffect)((function(){!T&&re(),!T&&se(),v(T)}),[T]);var de=function(){k(""),j("")},ce=function(){H.current={}};(0,n.useEffect)((function(){w({setQuickFilterCols:se,resetSearchCache:de,onGridColumnsChanged:ce})}),[]);var fe=(0,o.default)(["kdfont","kdfont-guanbi8","kd-hover-color",a.default.icon]),ge=(0,o.default)([a.default["search-btn"],"kd-hover-color"]);return T?null:n.default.createElement("div",{tabIndex:0,ref:z,className:a.default["grid-filter-modal"]},n.default.createElement("div",{className:a.default["search-headr"]},n.default.createElement("span",null,b("gridSearch.key001")),n.default.createElement("span",{className:fe,onClick:function(){O(!0)}})),n.default.createElement("div",{className:a.default["search-box"]},n.default.createElement("input",{className:a.default["search-input"],ref:W,value:E,onKeyDown:function(e){13===e.keyCode&&U()},onChange:function(e){I(e.target.value)}}),n.default.createElement("span",{className:a.default.splite}),n.default.createElement("button",{className:ge,onClick:U},b("gridSearch.key001"))),D?n.default.createElement("div",{className:a.default["no-found-box"]},b("gridSearch.key002")):null)}},958232:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(241872),r(743924),r(297336),r(336368),r(606200),r(534440),r(76124),r(387912),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(795520)),a=r(780476),l=(o=r(193928))&&o.__esModule?o:{default:o},u=r(102139),s=r(273248),d=r(738704),c=["gridContrlParams","gridState","gridOptions"];function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},g.apply(this,arguments)}function p(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}t.default=function(e){var t=(0,i.useRef)(null),r=e.gridContrlParams,n=void 0===r?{}:r,o=e.gridState,f=e.gridOptions,y=p(e,c),m=o.rk,v=o.seq,h=o.pageId,b=o.gridId,C={gridContrlParams:n,gridOptions:f,rowKey:m,seq:v,pid:h,gridId:b},w=n.isListView,S=n.isSubGrid,E=n.isVirtualView,I=n.hasSettingBtn,R=n.maxLevel,T=f.headerHeight*R-1;return(0,i.useEffect)((function(){var e=(0,d.addDataChangeListener)(h,[b,s.CONFIGURED_HEADER_HEIGHT_CHANGED],(function(e){t.current&&(t.current.style.height=e*R-1+"px")}));return function(){e()}}),[R]),(0,u.hasGridSettingButton)(w,S,E,I)?i.default.createElement("div",{ref:t,className:l.default["grid-setting-btn"],style:{position:"absolute",right:0,zIndex:2,width:"30px",height:T+"px"}},i.default.createElement(a.SetOptionColHeader,g({},C,y))):null}},644544:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(505684),r(743924),r(693917),r(976896),r(721300),r(606200),r(534440),r(387912),r(633768),r(690512),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(323784);var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(795520)),i=g(r(759016)),a=g(r(586160)),l=r(205212),u=g(r(316160)),s=r(674260),d=r(868256),c=r(149236),f=r(924432);function g(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}(0,l.registTableAdapter)("kd",u.default);t.default=function(e){var t=e.model,r=t.getMetaProperty("gridtype"),n=y((0,o.useState)((0,f.shouldUseNewTable)(r)),2),l=n[0],u=n[1];return(0,o.useEffect)((function(){var e=(0,s.addDataChangeListener)(d.KEY_USE_TABLE_CHANGED,(function(e){var t=e.gridType;r===t&&u((0,f.shouldUseNewTable)(t))}));return function(){return e()}}),[r]),(0,c.useControlInfoCollect)(t,!l&&"VIEWGRID"===r),l?o.default.createElement(a.default,e):o.default.createElement(i.default,e)}},79488:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(505684),r(743924),r(693917),r(721300),r(606200),r(534440),r(633768),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.containerEleRef,r=e.getTableConfigImmediately,n=e.getInstance,o=e.getTableApi,c=e.dataValueTimestamp,p=(v=(0,i.useState)(0),h=2,function(e){if(Array.isArray(e))return e}(v)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(v,h)||f(v,h)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),y=p[0],m=p[1];var v,h;(0,i.useEffect)((function(){var e=r(),t=e.pageId,n=e.id,o=e.gridType===u.GRID_TYPE.listViewGrid?"setRowData":"setVirtualData",i=(0,d.addDataChangeListener)(t,[n,o],(function(){m((function(e){return e+1}))}));return function(){i()}}),[]),(0,i.useEffect)((function(){m((function(e){return e+1}))}),[c]);return i.default.createElement(a.default,{resetNoMatchListFlag:y,gridContainerEle:t.current,getAllDisplayColumns:function(){return function(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||f(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(r().getDisplayFlatColumns())},getRowCount:function(){return(n().controller.getRowDatas()||[]).length},getRowByIndex:function(e){return n().controller.getRowByIndex(e)},getCellDispalyValue:function(e,t){t.type;var n=r(),o=n.rowKey,i=n.localeId,a=n.defaultLocalId,u=(0,l.getCopyCellValue)(t,e,{rowKey:o,localeId:i,defaultLocalId:a});return null==u?void 0:u.toString()},getFocusedCell:function(){return n().controller.getFocusedCell()},getNoMatchTips:function(){return r().gridType===u.GRID_TYPE.virtualViewGrid?(0,s.getLangMsg)("gridSearch.key003"):(0,s.getLangMsg)("gridSearch.key002")},handleMatchCell:function(e){var t=e.code,n=e.rowIndex,i=e.record,a=o(),l=i[r().rowKey];a.setFocusedCell({rowKey:l,rowIndex:n,code:t})}})},r(323784),r(976896),r(387912),r(690512);var o,i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=c(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(795520)),a=(o=r(134644))&&o.__esModule?o:{default:o},l=(r(671840),r(52800)),u=r(480632),s=r(331428),d=r(738704);function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}function f(e,t){if(e){if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}},719900:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(622676),r(233696),r(505684),r(743924),r(693917),r(205960),r(976896),r(297336),r(721300),r(846428),r(336368),r(969e3),r(606200),r(534440),r(76152),r(76124),r(387912),r(633768),r(690512),r(78504),r(776512),r(997308),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(9692),r(323784),r(571176),r(86744);var o=re(r(795520)),i=ee(r(671252)),a=r(891052),l=(re(r(211152)),r(439532)),u=re(r(994104)),s=r(552032),d=ee(r(392576)),c=ee(r(904007)),f=ee(r(426912)),g=ee(r(326184)),p=ee(r(381432)),y=ee(r(187252)),m=ee(r(801248)),v=r(94580),h=r(480632),b=re(r(773408)),C=ee(r(882820)),w=r(279872),S=ee(r(789876));r(207940);var E=ee(r(623208)),I=ee(r(385152)),R=ee(r(684420)),T=r(768760),O=r(827096),P=r(443780),D=r(974600),A=re(r(133740)),_=ee(r(383396)),M=ee(r(315192)),k=r(458032),L=ee(r(884492)),j=r(161932),N=r(45244),V=r(994432),K=r(883932),F=r(582139),x=ee(r(953936)),G=ee(r(117568)),B=ee(r(888816)),H=ee(r(79488)),W=ee(r(925908)),z=r(427320),U=r(648648),q=r(671840),Y=r(48764),Z=r(157376),X=r(281376),$=r(337992),J=re(r(310080)),Q=ee(r(139224));function ee(e){return e&&e.__esModule?e:{default:e}}function te(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(te=function(e){return e?r:t})(e)}function re(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=te(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}function ne(){return ne=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ne.apply(this,arguments)}function oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ie(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(r),!0).forEach((function(t){ae(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ae(e,t,r){var o;return o=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==n(o)?o:String(o))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ue(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ue(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var se=w.dataHelper.getDatasource,de=w.dataHelper.getOpenRowKeys,ce=w.dataHelper.getSubGridConfig,fe=w.dataHelper.getFocusedCellData,ge=w.dataHelper.getPageIndex,pe=w.dataHelper.getPageRows,ye=w.dataHelper.getStateFromCache;t.default=function(e){var t,r,n,w=e.model,ee=e.parentModel,te=e.dispatch,re=e.isLocked,oe=(0,o.useRef)({}),ue=(0,o.useRef)(),me=(0,o.useRef)(),ve=(0,o.useRef)({}),he=le((0,o.useReducer)((function(e){return e+1}),0),2)[1],be=(0,o.useMemo)((function(){return(0,l.createActions)(ie(ie({},u),{},{invokeCustomMethod:s.invokeCustomMethod}),te)}),[]),Ce=(0,o.useMemo)((function(){return new E.default}),[]),we=(0,o.useMemo)((function(){return new y.default}),[]),Se=(0,o.useMemo)((function(){return new c.default((0,b.default)(w,ee,re))}),[]),Ee=(0,o.useMemo)((function(){return new m.default}),[]),Ie=(0,o.useMemo)((function(){return new I.default({internalEventService:Ee,tableConfig:Se,tableOptions:Ce,this$:ve,instance:oe,containerEleRef:ue,wrapperEleRef:me})}),[]),Re=function(){return oe.current},Te=function(e){return be[e]},Oe=function(){return Ce},Pe=(0,o.useCallback)((function(){return Se}),[]),De=(0,o.useCallback)((function(){return Ee}),[]),Ae=(0,o.useCallback)((function(){return oe.current.mergeModel}),[]),_e=(0,o.useCallback)((function(){return ue}),[]),Me=(0,o.useCallback)((function(){return Ie}),[]),ke=function(){return we},Le=(0,o.useMemo)((function(){return new k.Context({getTableConfigImmediately:Pe,getMergeModel:Ae,getTableContainterRef:_e,getInternalEventService:De,getTableApi:Me,getInstance:Re,getTableOptions:Oe})}),[]),je=le((0,o.useState)(!1),2),Ne=je[0],Ve=je[1],Ke=le((0,o.useState)("grid"),2),Fe=Ke[0],xe=Ke[1],Ge=le((0,o.useState)(!0),2),Be=Ge[0],He=Ge[1],We=(0,o.useRef)(!1),ze=function(e){var t,r,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];null!==(t=Ce.getMulCurrencyFields())&&void 0!==t&&t.length&&(null===(r=oe.current.tableModel)||void 0===r||r.setFoldFooterRowData(e,n),He(e),We.current=o)};ve.current.dataValueTimestamp=(0,P.useDataValueChangedMark)({this$:ve,parentModel:ee,model:w}),ve.current.isRowsChanged=(0,P.getIsRowsChanged)({this$:ve,parentModel:ee,model:w}),ve.current.model=w,ve.current.parentModel=ee,ve.current.isLocked=re;var Ue=(0,o.useRef)({});oe.current.controller||(oe.current.controller=new f.default((0,C.default)(w,ee,{rowKey:Se.rowKey,mergeModel:new M.default(Se.entities,[],Se.rowKey,Se.suppressMergeSelect,Se.rowDetailOptions.type,!1),getTableConfigImmediately:Pe})),oe.current.tableModel=oe.current.controller.model,oe.current.mergeModel=oe.current.controller.mergeModel,oe.current.controller.setExtendStatus(ye(w)(h.COL_EXPAND_STATUS))),(0,P.useTablePoster)({tablePoster:we,getInstance:Re,getActionByKey:Te,getTableOptions:Oe,getTableConfigImmediately:Pe,getDispatch:function(){return te}}),(0,P.useTableSize)({getTableOptions:Oe,getInstance:Re,getTableConfigImmediately:Pe,getInternalEventService:De,wrapperEleRef:me,containerEleRef:ue,setReadyed:Ve,model:w,tableInitialSize:Ue,this$:ve,getTableApi:Me,readyed:Ne}),(0,o.useEffect)((function(){0}),[]),(0,o.useEffect)((function(){Se.setCheapConfig((0,b.getTableCheapConfig)(w,ee,re)),Se.setPropertyConfig((0,b.getPropertyConfig)(w,ee)),Ce.setMetaOptions(w,ee,{getTableConfig:Pe}),Se.setBusinessConfig({getRowProps:(0,b.createRowPropsGetter)({getInstance:Re,getTableConfigImmediately:Pe,getTableApi:Me}),selectionColumnProps:(0,b.getSelectionColumnProps)({getMergeModel:Ae,getTableConfigImmediately:Pe,handleSelectColCellClick:(0,q.createSlectionCellClickHandle)(Re,Me,Oe)}),dragColumnProps:(0,b.getDragColumnProps)({getInstance:Re,getTableConfigImmediately:Pe,getTableOptions:Oe})});var e=se(w,ee,{getTableConfigImmediately:Pe});oe.current.mergeModel.setSuppressMergeRows(Ce.getSuppressRowSpan()),oe.current.mergeModel.setSuppressMergeSelect(Se.suppressMergeSelect),oe.current.mergeModel.updateMergeModel(Se.entities,e,Se.rowKey,Se.rowDetailOptions.type),oe.current.mergeModel.updateBorderCols(Se.columns,w.getMetaProperty("columns")||(0,a.List)(),Se.seqKey)}),[null==ee?void 0:ee.meta.delete("items").hashCode(),null==w?void 0:w.meta.delete("columns").delete("colDefsGUID").hashCode()]),(0,P.useUpdateDataOptions)({model:w,parentModel:ee,getTableOptions:Oe,dataValueTimestamp:ve.current.dataValueTimestamp}),(0,P.useColumnsChanged)({readyed:Ne,model:w,parentModel:ee,containerEleRef:ue,getTableConfigImmediately:Pe,getTableOptions:Oe,getInstance:Re,getInternalEventService:De,getTableApi:Me}),(0,P.useDataValueChanged)({getTableOptions:Oe,getTableApi:Me,getTableConfigImmediately:Pe,getInstance:Re,getInternalEventService:De,model:w,parentModel:ee,dataValueTimestamp:ve.current.dataValueTimestamp,containerEleRef:ue,isRowsChanged:ve.current.isRowsChanged,updateFoldFooterRowsStatus:ze}),(0,P.useResizeTableHeight)({getTableOptions:Oe,getInstance:Re,getTableConfigImmediately:Pe,containerEleRef:ue,readyed:Ne,model:w,parentModel:ee,tableInitialSize:Ue,activeView:Fe,getInternalEventService:De}),(0,P.useRowsChangedAndSelectStateunchanged)({parentModel:ee,instance:oe}),(0,P.useRowSelected)({model:w,parentModel:ee,activeView:Fe,getTableConfigImmediately:Pe,getInstance:Re,getActionByKey:Te,getTableOptions:Oe,getTableApi:Me,dispatch:te}),(0,o.useEffect)((function(){oe.current.controller.setOpenRowKeys((function(){return de(w,ee,oe.current.controller.viewer.api.getOpenRowKeys())}))}),[null==ee||null===(t=ee.getDataProperty(["expandDetails"]))||void 0===t?void 0:t.hashCode(),null===(r=w.getDataProperty(["expandDetails"]))||void 0===r?void 0:r.hashCode()]),(0,o.useEffect)((function(){if(Ne&&Se.rowDetailOptions.type){var e=ce(w,ee,{getTableOptions:Oe,getTableConfigImmediately:Pe,mergeModel:oe.current.mergeModel});Se.setSubGridConfig(e)}}),[Ne,null===(n=w.getDataProperty(["subMeta"]))||void 0===n?void 0:n.hashCode()]),(0,P.useRowExpand)({model:w,getTableOptions:Oe,getInstance:Re,getActionByKey:Te,getTableConfigImmediately:Pe,getInternalEventService:De}),(0,o.useEffect)((function(){if(Ne){setTimeout((function(){var e=w.getDataProperty(["startEditing","cellInfo"]);if(e){var t=e.get("r"),r=oe.current.controller.getRowIndex(t),n=e.get("k");if(!n)return;Ie.startEditingCellWithFocus({code:n,rowKey:t,rowIndex:r})}}))}}),[Ne,w.getDataProperty(["startEditing"])]),(0,R.default)({getTableConfigImmediately:Pe,getInstance:Re,getActionByKey:Te,tablePoster:we});var qe=function(e){var t,r,n=e.type,o=e.args;e.event;S.default[n]?(t=S.default[n],r={type:n,args:o},t({parentModel:ve.current.parentModel,model:ve.current.model,dispatch:te,getInstance:Re,getTableConfigImmediately:Pe,getActionByKey:Te,getTableOptions:Oe,getMergeModel:Ae,getInternalEventService:De,getTableApi:Me,getTablePoster:ke,getTableContainterRef:_e})(r)):console.warn("[kd-table] 回调方法不存在：".concat(n))};ve.current.onTableEvent=qe;var Ye=le((0,P.useEdit)(Ee,ue,Se,(function(e){var t=e.shiftKey,r=e.isModule;(0,F.tableStartEdit)({internalEventService:Ee,tableConfig:Se,getTableApi:Me,shiftKey:t,isModule:r,containerEleRef:ue,tableController:oe.current.controller,colLockInfo:Ce.getDataOptionsProperty("colLockInfo")})}),oe.current.controller),2),Ze=Ye[0],Xe=Ye[1];(0,O.useFooterAggregate)({this$:ve,model:w,parentModel:ee,getTableConfigImmediately:Pe,getTableOptions:Oe,getActionByKey:Te,getInstance:Re,getInternalEventService:De}),(0,P.useSavePersonaliedCache)({model:w,parentModel:ee,tablePoster:we}),(0,P.useTableRendered)({containerEleRef:ue,getInternalEventService:De}),(0,P.useAutoSizeColumnWidth)({readyed:Ne,getTableConfigImmediately:Pe,containerEleRef:ue,getInternalEventService:De,getInstance:Re,getTableOptions:Oe,model:w,parentModel:ee}),(0,P.useSubGridAutoSizeColumnWidth)({readyed:Ne,getTableConfigImmediately:Pe,getInternalEventService:De,getInstance:Re,getTableOptions:Oe,model:w}),(0,P.useContextMenu)({containerEleRef:ue,getTableConfigImmediately:Pe,getTableOptions:Oe,getInternalEventService:De,getInstance:Re,getActionByKey:Te,getTableApi:Me,getNewColumns:function(){return(0,V.getNewColumns)({model:ve.current.model,parentModel:ve.current.parentModel,getTableOptions:Oe,getMergeModel:Ae,getTableConfigImmediately:Pe,getTableApi:Me,getInstance:Re})},getFilterRequestParams:function(e){var t;return(0,X.getFilterRequestParams)(e,null===(t=ve.current.model.getMetaProperty("columns"))||void 0===t?void 0:t.toJS(),Oe().getEnableBaseDataSelectFilter())}}),(0,P.useSetFocuedCell)({readyed:Ne,containerEleRef:ue,getTableConfigImmediately:Pe,getInstance:Re,model:w,parentModel:ee,getFocusedCellData:fe,focusCell:Xe,getTableApi:Me,getInternalEventService:De}),(0,P.useDataTimestampUpdate)({model:w,parentModel:ee,getTableConfigImmediately:Pe,getTableOptions:Oe,getActionByKey:Te,getInstance:Re,getTableApi:Me,updateFoldFooterRowsStatus:ze}),(0,P.useRowsChangeByRowOpereate)({model:w,getTableApi:Me,getInstance:Re}),(0,P.useTableGlobalConfig)({tableConfig:Se,model:w,getInternalEventService:De,getNewColumns:function(){return(0,V.getNewColumns)({model:ve.current.model,parentModel:ve.current.parentModel,getTableOptions:Oe,getMergeModel:Ae,getTableConfigImmediately:Pe,getTableApi:Me,getInstance:Re})}}),(0,P.useKeyBoardEvent)({readyed:Ne,containerEleRef:ue,getTableOptions:Oe,getTableConfigImmediately:Pe,getInstance:Re,getTableApi:Me,tablePoster:we}),(0,P.useSetOperationColLockStatus)({readyed:Ne,containerEleRef:ue,getTableConfigImmediately:Pe,getInternalEventService:De}),(0,P.useDisabledSelectAll)({readyed:Ne,parentModel:ee,getTableConfigImmediately:Pe}),(0,P.useThemeChange)({getTableConfigImmediately:Pe,this$:ve,getTableOptions:Oe,getInstance:Re,afterRefreshOfThemeChanged:function(){N.eventServiceController.dispathThemeChanged(Ee)(h.THEME_CHANGED),N.eventServiceController.dispatchDoAutoSize(Ee)(h.THEME_CHANGED)},getInternalEventService:De,getTableApi:Me}),(0,P.useShortCutSettingChange)({getTableOptions:Oe}),(0,P.useInsertData)({model:w,parentModel:ee,getInstance:Re,getTableConfigImmediately:Pe,getTableOptions:Oe,getInternalEventService:De,dataValueTimestamp:ve.current.dataValueTimestamp}),(0,P.useOperationColPermission)({model:w,getTableConfigImmediately:Pe,this$:ve,getTableOptions:Oe,getInstance:Re,getTableApi:Me}),(0,P.useValidate)({activeView:Fe,getTableOptions:Oe,getTableConfigImmediately:Pe,getTableApi:Me,getInstance:Re,containerEleRef:ue,getInternalEventService:De,tablePoster:we}),(0,P.useFormStatusChanged)({model:w,parentModel:ee,isLocked:re,getInstance:Re,getTableOptions:Oe,getTableConfigImmediately:Pe,getInternalEventService:De,getTableApi:Me,containerEleRef:ue}),(0,P.useTableFocus)({readyed:Ne,getTableConfigImmediately:Pe,containerEleRef:ue,getInstance:Re,tablePoster:we,getTableApi:Me}),(0,P.useWindowClick)({readyed:Ne,getInstance:Re,containerEleRef:ue}),(0,P.useTableTracking)({getTableConfigImmediately:Pe,getTableOptions:Oe}),(0,P.useTreeVirtualDataLoaded)({model:w,containerEleRef:ue,readyed:Ne,getTableOptions:Oe,getActionByKey:Te,getTableConfigImmediately:Pe}),(0,P.useFmtInfoChanged)({model:w,parentModel:ee,forceUpdate:he}),(0,o.useEffect)((function(){We.current&&!Be&&window.requestAnimationFrame((function(){return(0,Z.scrollFooterRowToBottom)((0,Z.getTableFooterElement)(ue))})),We.current=!1}),[Be,We.current]),(0,o.useEffect)((function(){if(J.default[J.CONTROL_CONFIG_ENUM.gridPositionFixed]){var e=function(){var e=ue.current.getBoundingClientRect();ue.current.firstChild.style.width=e.width+"px",ue.current.firstChild.style.height=e.height+"px",ue.current.firstChild.style.transform="translate(".concat(e.left,"px, ").concat(e.top,"px)")},t=function(t){t.target.contains(ue.current)&&window.requestAnimationFrame(e)},r=(0,Q.default)(ue.current,e);return window.addEventListener("scroll",t,!0),function(){var e;window.removeEventListener("scroll",t,!0),null===(e=r)||void 0===e||e(),r=null}}}),[]),(0,z.useRegisterInstance)(Se.pageId,Se.id,w.getMetaProperty("type"),{tableConfig:Se,tableController:oe.current.controller,actions:be,getActionByKey:Te,tablePoster:we,tableApi:Ie,model:ve.current.model,parentModel:ve.current.parentModel});var $e=(0,L.default)(w).isVisible,Je=Se.toolbarLocation,Qe=Se.id,et=(0,D.getGirdToolBar)({readyed:Ne,model:w,parentModel:ee,getActionByKey:Te,getInstance:Re,getTableOptions:Oe,getTableConfigImmediately:Pe,getInternalEventService:De,toolbarLocation:Je}),tt=(0,j.getModelStyle)(w,$e),rt=(0,j.getModelClassName)(w),nt=(0,i.default)([_.default["table-container"]],"kd-table-container","kd-table-theme-material","kd-cq-table","kd-cq-control",ae(ae(ae(ae(ae(ae(ae({},rt,!!rt),"auto-column-resize-mode",Se.columnResizeMode===h.TABLE_COLUMN_RESIZE_MODE.adaptive||Se.columnResizeMode===h.TABLE_COLUMN_RESIZE_MODE.fit),"kd-table-editable",(0,$.getGridEditable)(w,re)),"kd-table-list-view",Ce.getGridType()===h.GRID_TYPE.listViewGrid),"kd-table-editable-theme-1",void 0===Ce.getGridType()),"kd-table-editable-theme-2",Ce.getGridType()===h.GRID_TYPE.listViewGrid),"kd-table-with-column-groups",Se.getMaxLevel()>1)),ot=function(e){"grid"===Fe&&(0,F.tableKeyDown)({e:e,getTableConfigImmediately:Pe,getTableOptions:Oe,getInstance:Re,getTableApi:Me,getTablePoster:ke,editCell:Ze,focusCell:Xe,containerEleRef:ue,getActionByKey:Te})};Ie.registerTableKeyDown(ot);var it=(0,o.useMemo)((function(){return(0,x.default)({readyed:Ne,model:ve.current.model,parentModel:ve.current.parentModel,dispatch:te,tablePoster:we,getTableOptions:Oe,getTableConfigImmediately:Pe,getInstance:Re,getTableApi:Me,activeView:Fe,setActiveView:xe})}),[w,ee,Fe,Ne]);return o.default.createElement(k.TableContext.Provider,{value:Le},o.default.createElement(T.PosterContext.Provider,{value:we},o.default.createElement(K.EditContext.Provider,{value:Ze},o.default.createElement("div",ne({onKeyDown:ot,className:nt,style:tt,id:Qe,ref:ue,onClick:function(e){var t,r=(0,Z.getTableCell)(e.target,{containerEleRef:ue,rowKey:Se.rowKey,getInstance:Re}),n=(null===(t=oe.current)||void 0===t||null===(t=t.controller)||void 0===t?void 0:t.getEditCell())||{},o=r&&!r.isFooterCell&&n.rowKey===r.rowKeyValue&&n.code===r.code;"grid"!==Fe||-1===n.rowKey||o||Ie.stopEditing()},tabIndex:-1,onScroll:function(e){for(var t,r,n,o=e.target,i=o;i;){if(i.classList.contains("kd-sub-table"))return;i=i.parentElement}if(o.classList.contains("kd-table-body"))t="vertical",r=o.scrollTop;else{if(!o.classList.contains("kd-sticky-scroll"))return;t="horizontal",n=o.scrollLeft}Ee.dispatchEvent({type:v.KD_TABLE_EVENT_NAMES.scroll,params:{direction:t,top:r,left:n}})}},(0,U.getTableAttachData)(w)),o.default.createElement("div",{className:(0,i.default)(_.default["table-absolute-container"],ae({},_.default["table-fixed-container"],J.default[J.CONTROL_CONFIG_ENUM.gridPositionFixed])),style:{display:"grid"===Fe?"block":"none"}},o.default.createElement("div",{className:_.default["table-wrapper"],ref:me,tabIndex:-1},"1"!==Je?et:null,Ne?o.default.createElement(o.default.Fragment,null,o.default.createElement(d.default,{tableType:"kd",controller:oe.current.controller,config:Se,dispatch:(0,g.default)(qe)}),(0,Y.showAggregateRowFoldIcon)(oe.current.tableModel.getFooterRowData())?o.default.createElement(A.AggregateRowFoldIcon,{isFoldFooterRows:Be,onIconClick:function(){ze(!Be,!0,!0)},containerEleRef:ue,getTableConfigImmediately:Pe}):null,Ce.getShowAggregateRowOverlay()&&Ce.getTotalType()!==h.TOTAL_TYPE.sticky?o.default.createElement(A.default,{parentModel:ee,getTableOptions:Oe,getActionByKey:Te,getInstance:Re,getTableConfig:Pe,getInternalEventService:De,containerEleRef:ue,readyed:Ne}):null):o.default.createElement(p.default,{headerStyle:{height:Se.headerHeight}}),"1"===Je?et:null,Ce.getTotalType()===h.TOTAL_TYPE.sticky?o.default.createElement(A.StickyAggregate,{getTableOptions:Oe,getActionByKey:Te,getTableConfig:Pe,getInternalEventService:De,model:w,parentModel:ee}):null)),it,Se.isCellRangesSum?o.default.createElement(W.default,{pageId:Se.pageId,gridId:Se.id}):null,Ce.getGridType()===h.GRID_TYPE.listViewGrid||Ce.getGridType()===h.GRID_TYPE.virtualViewGrid?o.default.createElement(H.default,{containerEleRef:ue,getTableConfigImmediately:Pe,getInstance:Re,getTableApi:Me,dataValueTimestamp:ve.current.dataValueTimestamp}):null,void 0===Ce.getGridType()?o.default.createElement(o.default.Fragment,null,o.default.createElement(G.default,{pageId:Se.pageId,id:Qe,getTableApi:Me,getTableOptions:Oe,getTableConfigImmediately:Pe,className:_.default["table-validate-tip"],onVisibleChange:function(e){var t=parseInt((null==tt?void 0:tt.marginTop)||0);ue.current.style["margin-top"]=e?t+43+"px":t?t+"px":""}}),o.default.createElement(B.default,{pageId:Se.pageId,id:Qe,getTableApi:Me,getInstance:Re,getInternalEventService:De,getTableConfigImmediately:Pe,containerEleRef:ue,pageIndex:ge(w,ee),pageRows:pe(w,ee),getTableOptions:Oe,type:Se.type})):null))))}},586160:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(622676),r(233696),r(505684),r(743924),r(693917),r(205960),r(976896),r(721300),r(846428),r(969e3),r(606200),r(534440),r(76152),r(76124),r(387912),r(633768),r(690512),r(78504),r(776512),r(997308),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(9692),r(323784),r(336368),r(708896),r(571176);var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=v(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(795520)),i=r(439532),a=m(r(197168)),l=m(r(348896)),u=r(738704),s=r(331428),d=m(r(719900)),c=r(273248),f=r(218652),g=r(211152),p=r(558848),y=m(r(696428));function m(e){return e&&e.__esModule?e:{default:e}}function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}function h(e){return function(e){if(Array.isArray(e))return I(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||E(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){w(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(e,t,r){var o;return o=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==n(o)?o:String(o))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||E(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){if(e){if("string"==typeof e)return I(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?I(e,t):void 0}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function R(e,t){var r=e.pageId,n=e.key,o=(0,s.getLangMsg)("BusyLayer.loading"),i=w(w(w({},e.getUserLocale(),o),"timeout",{time:600,methods:["entryRowClick"]}),"supportMethod",t);(0,u.setControlBusyTip)(r,n,i)}var T;t.default=o.default.memo((0,l.default)(!0,!0)((T=(0,a.default)((0,l.default)(!0)(d.default)),function(e){var t,r=e.model,n=e.isVisible,a=e.keyIndex,l=r.getMetaLocaleProperty("text"),u=r.getMetaProperty("collapsible"),s=r.getMetaProperty("defaultcollapse"),d=Object.assign({},(0,i.getCommonStyle)(r),(0,i.getVisibleStyle)({},n)),m=S((0,o.useState)(null),2),v=m[0],b=m[1],w=(0,p.getTips)(r);v&&(t=o.default.createElement(y.default,{tips:v}));var E={Name:l,Collapsible:u,defaultCollapse:s,style:d,pageId:r.pageId,slot:t},I=C(C({},e),E),O=r.pageId,P=r.key,D=r.getMetaProperty("gridtype");if(function(e){var t=e.keyIndex,r=e.model,n=r.key,o=r.pageId,i=(0,f.getDataType)(o,n)((0,g.getGlobalState)()),a="embedgrid"===i&&parseInt(t)>=0;return a}({model:r,keyIndex:a})){var A=function(e){var t=e.model,r=e.keyIndex,n=t.key,o=(t.pageId,Object.create(t));return o.getMetaProperty=function(e){return"id"===e?n+"".concat(c.EMBED_SUB_GRID_FLAG,"_").concat(r):t.getMetaProperty(e)},o.getDataValue=function(){return t.getData().getIn(["subdata","sub_".concat(r),"value"])},o.getDataProperty=function(e){var n=t.getData(),o=Array.isArray(e)?e:[e];return n.getIn(["subdata","sub_".concat(r)].concat(h(o)))},o}({model:r,keyIndex:a});I.model=A,I.parentModel=null,I.isSelected=!1}return(0,o.useEffect)((function(){void 0===D?function(e){R(e,["entryRowClick","setRowSort","getGridDataByFilter","next","previous","setPageIndex","setPageRows","selectAllRows","setColAllChecked","loadChildrenData","setRowDataByNumber","dragRows"])}(r):"VIRTUALVIEWGRID"===D&&function(e){R(e,["entryRowClick","getVirtualData","selectAllRows","setRowSort","getGridDataByFilter","setPageIndex","setPageSize"])}(r)}),[D,O,P]),(0,o.useEffect)((function(){if(w){var e=r.pageId,t=r.key,n=v;v||(n=(0,p.createTipsConfig)(e,t),b(n)),(0,p.saveTipsInfo)(n,w)}else b(null)}),[w]),o.default.createElement(T,I)})))},385152:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(305092),r(743924),r(205960),r(846428),r(606200),r(534440),r(387912),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(443616),r(660824);var o=r(94580),i=r(994432),a=r(671840),l=r(48764),u=r(480632),s=r(337992),d=r(633016),c=r(738704),f=r(273248),g=m(r(585232)),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=y(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(211152));m(r(310080));function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(y=function(e){return e?r:t})(e)}function m(e){return e&&e.__esModule?e:{default:e}}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,b(n.key),n)}}function h(e,t,r){return t&&v(e.prototype,t),r&&v(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function b(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}t.default=h((function e(t){var r=this,n=t.internalEventService,y=t.tableConfig,m=t.tableOptions,v=t.this$,h=t.instance,b=t.containerEleRef,C=t.wrapperEleRef;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._isClickNormalCell=!1,this.registerTableKeyDown=function(e){r._onTableKeyDown=e},this.setIsClickNormalCell=function(e){r._isClickNormalCell=e},this.getIsClickNormalCell=function(){return r._isClickNormalCell},this.stopEditing=function(){r._internalEventService.dispatchEvent({type:o.KD_TABLE_EVENT_NAMES.setEditCell,params:{editCell:{rowKey:-1}}})},this.startEditingCell=function(e){var t=e.code,n=e.rowKey,i=e.trigger;r.isCellLock(t,n)||r._internalEventService.dispatchEvent({type:o.KD_TABLE_EVENT_NAMES.setEditCell,params:{editCell:{code:t,rowKey:n,trigger:i}}})},this.setFocusedCell=function(e){var t=e.rowKey,n=e.rowIndex,i=e.code;void 0===n&&(n=r._tableInstance.current.controller.getRowIndex(t)),r._internalEventService.dispatchEvent({type:o.KD_TABLE_EVENT_NAMES.setFocusCell,params:{focusCell:{code:i,rowKey:t,rowIndex:n}}});var a=r._tableInstance.current.controller.getRow(t);r._tableInstance.current.controller.setFocusedRow({rowIndex:n,record:a})},this.startEditingCellWithFocus=function(e){var t=e.rowKey,n=e.rowIndex,o=e.code;void 0===n&&(n=r._tableInstance.current.controller.getRowIndex(t)),r.startEditingCell({code:o,rowKey:t}),r.setFocusedCell({rowKey:t,rowIndex:n,code:o})},this.getContainerFiledValue=function(e,t){var n=e.id,o=e.type,l=e.isFormmatedValue,u=e.editor,s=t.row,d=t.rowIndex,c=r._tableConfig,f=c.localeId,g=c.defaultLocalId,p=c.pageId,y=c.rowKey,m=r._tableThis$,v=m.model,h=m.parentModel,b=(0,i.getColumnPropertyByData)(v,h),C=(0,a.getCellValueFormattingFn)({localeId:f,defaultLocalId:g,pageId:p,rowKeyName:y,getColPropertyByData:b,getFmtInfo:function(){return r._tableOptions.getFmtInfo()},getDataIndex:function(){return r._tableOptions.getDataIndex()},columnEditable:!1})({colId:n,type:o,isFormmatedValue:l,editor:u});return"function"==typeof C?C(s,d):s[n]},this.onTableKeyDown=function(e){var t;null===(t=r._onTableKeyDown)||void 0===t||t.call(r,e)},this.execFilter=function(e){var t=r._tableThis$.current.onTableEvent,n=r._tableInstance.current.controller,o=null!=e?e:n.getFilters();t({type:u.EVENT_NAMES.filterChanged,args:{nextFilters:o,passiveTrigger:!0}})},this.isCellLock=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o="string"==typeof e?(0,d.find)(r._tableConfig.columns,(function(t){return t.code===e})):e,i="number"==typeof t?r._tableInstance.current.controller.getRow(t):t;if(!o||!i)return!0;var a=o.code,l=o.extendParams,u=(l.columnEditable,l.columnMetaEditable),c=l.columnLock,f=l.isPrivacy,g=l.gridEditable,p=r._tableConfig,y=p.pageId,m=p.id,v=p.rowKey;return!(!p.gridType&&g&&(0,s.isUnlockCell)(i,a))&&((n?!u:c)||(0,s.getCellLockByData)(r._tableOptions.getColLockInfo(),i,a)||(0,s.isCellLockByPrivacy)(y,m)(a,f,i[v]))},this.ensureRowIndexVisible=function(e,t){var n;null===(n=r._tableInstance.current.controller.viewer)||void 0===n||n.api.ensureRowIndexVisible(e,t)},this.ensureColumnVisible=function(e){var t;null===(t=r._tableInstance.current.controller.viewer)||void 0===t||t.api.ensureColumnVisible(e)},this.clearRangeSelection=function(){var e;null===(e=r._tableInstance.current.controller.viewer)||void 0===e||e.api.clearRangeSelection(),r._tableOptions.setCellRanges([]),r.clearCellRangesSumResult()},this.clearCellRangesSumResult=function(){var e=r._tableConfig,t=e.pageId,n=e.id,o={plus:new g.default(0),average:new g.default(0),count:0,numberCount:0};(0,c.setPageData)(t,[f.CELL_RANGES_SUM_RESULT,n],o),r._tableOptions.clearCellRangesSumResult()},this.getHeightCache=function(){var e;return null===(e=r._tableInstance.current.controller.viewer)||void 0===e?void 0:e.api.getHeightCache()},this.hasFilter=function(){var e=r._tableInstance.current.controller.getFilters();return null!=e&&e.length>0},this.clearFilter=function(){r.hasFilter()&&((0,r._tableThis$.current.onTableEvent)({type:u.EVENT_NAMES.filterChanged,args:{nextFilters:[]}}),r._tableInstance.current.controller.setFilters([]))},this.hasSort=function(){var e,t;return null===(e=(t=r._tableInstance.current.tableModel).getIsSortActive)||void 0===e?void 0:e.call(t)},this.focus=function(){if(p.default[p.IS_IE]){var e;null===(e=r._wrapperEleRef.current)||void 0===e||e.focus()}else{var t=r._containerEleRef.current&&r._containerEleRef.current.querySelector(".kd-virtual")||r._wrapperEleRef.current;null==t||t.focus({preventScroll:!0})}},this.getCellSpan=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=1,o="number"==typeof e?r._tableInstance.current.controller.getRow(e):e,i=r._tableInstance.current.mergeModel,a=r._tableOptions.getMetaOptionsProperty("mergeColumns")||[],u=i.hasMergeRow||a.length>0,s=t.code,d=t.isSplit,c=r._tableConfig,f=c.rowKey,g=c.seqKey;if((0,l.isRowPinned)({record:o,rowKey:f})||!u)return n;var p=d&&i.suppressMergeSelect,y=s===g,m=o[f];if(y||p||(n=i.getRowSpan(m,s)),a.includes(s)){var v=r._tableOptions.getVirtualViewRowSpan();v&&v[s]&&(n=v[s][m])}return n},this._internalEventService=n,this._tableConfig=y,this._tableOptions=m,this._tableThis$=v,this._tableInstance=h,this._containerEleRef=b,this._wrapperEleRef=C}))},623208:function(e,t,r){"use strict";r(697060),r(233696),r(323784),r(693917),r(976896),r(721300),r(969e3),r(606200),r(534440),r(76152),r(76124),r(633768),r(690512),r(776512),r(997308),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(182320),r(909112),r(360776),r(9692),r(622676),r(505684),r(443616),r(743924),r(205960),r(70472),r(846428),r(387912),r(764840),r(660824),r(78504),r(977864);var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=p(e)&&"function"!=typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(211152)),o=r(480632),i=r(279872),a=r(119624),l=r(674104),u=r(161932),s=r(674260),d=r(868256),c=r(738704),f=r(545072);function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function y(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return(t=w(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,w(n.key),n)}}function w(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==p(t)?t:String(t)}var S=i.dataHelper.getPostCols,E=i.dataHelper.getDataDesc,I=i.dataHelper.getEnableGetSumdata,R=i.dataHelper.getFmtInfo,T=i.dataHelper.getDataIndex,O=i.dataHelper.getColLockInfo,P=a.metaHelper.getAutoGetAggData,D=a.metaHelper.getShowAggregateRowOverlay,A=a.metaHelper.isSuppressRowSpan,_=a.metaHelper.isEnableBaseDataSelectFilter,M=a.metaHelper.getMulCurrencyFields,k=a.metaHelper.isShowVirtualViewRowCount,L=a.metaHelper.getTotalType,j=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.setTreeRowKeyInfo=function(e){var r=e.rowKeyMap,n=e.groupMap,o=e.lazyLoadGroup,i=e.parentNodeMap;t.dataOptions=h(h({},t.dataOptions),{},{rowKeyMap:r,groupMap:n,lazyLoadGroup:o,parentNodeMap:i})},this.setDataDesc=function(e){t.dataOptions.dataDesc=e},this.getDataOptionsProperty=function(e){return t.dataOptions[e]},this.setMetaOptions=function(e,r,n){var i,a,l,s=n.getTableConfig,d=e.getMetaProperty("gridtype"),g=e.getFormConfigWithoutMeta()||{},p=s(),y=p.toolbarLocation,m=p.rowSelection,v=void 0===m?{}:m,h="VIRTUALVIEWGRID"===d?"rowid":"id",b=A(e),C=_(e),w=M(r),S=L(e);t.metaOptions={autoGetAggData:P(e),showAggregateRowOverlay:D(e),gridType:d,suppressCopy:e.getMetaProperty("scp"),navigationDefaultHeight:(0,u.getNavigationDefaultHeight)({gridType:d,config:g,toolbarLocation:y}),config:g,showTreeSeq:e.getMetaProperty("showTreeSeq"),sumWithFilter:e.getMetaProperty("sumWithFilter"),treeExpandColId:e.getMetaProperty("teci"),mergeColumns:(null===(i=e.getMetaProperty("mergeColumns"))||void 0===i?void 0:i.toJS())||[],selectAllRow:"VIRTUALVIEWGRID"===d&&e.getMetaProperty("selallrow")&&"checkbox"===v.type,showVirtualViewRowCount:k(e),rowId:h,defaultRowCount:null!==(a=e.getMetaProperty("defaultrows"))&&void 0!==a?a:o.DEFAULT_SHOW_ROWS_COUNT,isLimitHeight:null!==(l=e.getMetaProperty("heightLimit"))&&void 0!==l?l:!(0,c.getPageData)(e.pageId,[f.SPLIT_SCREEN_CANCEL_TABLE_LIMIT_HEIGHT,e.getMetaProperty("id")]),suppressRowSpan:b,enableBaseDataSelectFilter:C,mulCurrencyFields:w,totalType:S}},this.getMetaOptionsProperty=function(e){return t.metaOptions[e]},this.setGlobalOption=function(e,r){t.globalOptions[e]=r},this.getGlobalOptionsProperty=function(e){return t.globalOptions[e]},this.setColumnOptions=function(e,r){t.columnOptions[e]=r},this.getColumnOptionsProperty=function(e){return t.columnOptions[e]},this.resetColumnOption=function(){t.columnOptions=N()},this.setAggregateChecked=function(e){t.setGlobalOption(o.AGGREGATE_CHECKED,e)},this.getAggregateChecked=function(){return t.getGlobalOptionsProperty(o.AGGREGATE_CHECKED)},this.setTableSize=function(e){t.setGlobalOption(o.TABLE_SIZE,e)},this.getTableSize=function(){return t.getGlobalOptionsProperty(o.TABLE_SIZE)},this.setPersonalizedColumnWidth=function(e){"boolean"!=typeof e||!0!==e?t.setGlobalOption("personalizedColumnWidth",e):t.setGlobalOption("personalizedColumnWidth",b(b(b({},o.PERSONALIZED_COLUMN_WIDTH,{}),o.PERSONALIZED_AUTOSIZE_COLUMN_WIDTH,{}),o.PERSONALIZED_COLUMN_MAX_WIDTH,{}))},this.getPersonalizedColumnWidth=function(){return t.getGlobalOptionsProperty("personalizedColumnWidth")},this.getScrollBarSize=function(){return t.getGlobalOptionsProperty("scrollBarSize")},this.setTableScrollOffset=function(e){t.setGlobalOption("tableScrollOffset",e)},this.getTableTableScrollOffset=function(){return t.getGlobalOptionsProperty("tableScrollOffset")},this.setCellRanges=function(e){t.setGlobalOption("cellRanges",e)},this.getCellRanges=function(){return t.getGlobalOptionsProperty("cellRanges")},this.setToolBarHeight=function(e){return t.setGlobalOption("toolBarHeight",e)},this.getToolBarHeight=function(){return t.getGlobalOptionsProperty("toolBarHeight")},this.getNavigationDefaultHeight=function(){return t.getMetaOptionsProperty("navigationDefaultHeight")||o.TOOLBARHEIGHT.min},this.getGridType=function(){return t.getMetaOptionsProperty("gridType")},this.setHadRepeatedColumnCode=function(e){return t.setGlobalOption("hadRepeatedColumnCode",e)},this.getHadRepeatedColumnCode=function(){return t.getGlobalOptionsProperty("hadRepeatedColumnCode")||!1},this.setLoadedPages=function(e){return t.setGlobalOption("loadedPages",e)},this.getLoadedPages=function(){return t.getGlobalOptionsProperty("loadedPages")||[]},this.setIsScrollLoadedLastPage=function(e){return t.setGlobalOption("isScrollLoadedLastPage",e)},this.getIsScrollLoadedLastPage=function(){return t.getGlobalOptionsProperty("isScrollLoadedLastPage")},this.setVirtualViewRowSpan=function(e){return t.setGlobalOption("virtualViewRowSpan",e)},this.getVirtualViewRowSpan=function(){return t.getGlobalOptionsProperty("virtualViewRowSpan")},this.setRightBorderCols=function(e){return t.setGlobalOption("rightBorderCols",e)},this.getRightBorderCols=function(){return t.getGlobalOptionsProperty("rightBorderCols")},this.getCellRangesSumResult=function(e){return(t.getGlobalOptionsProperty("cellRangesSumResult")||new Map).get(e)},this.setCellRangesSumResult=function(e,r){var n=t.getGlobalOptionsProperty("cellRangesSumResult")||new Map;n.set(e,r),t.setGlobalOption("cellRangesSumResult",n)},this.clearCellRangesSumResult=function(){t.setGlobalOption("cellRangesSumResult",new Map)},this.getOriginColumnCode=function(e){return(t.getRepeatedColumnMap()||{})[e]||e},this.addAggregateColumns=function(e){t.getColumnOptionsProperty("aggregateColumns").push(e)},this.getAggregateColumns=function(){return t.getColumnOptionsProperty("aggregateColumns")},this.setCustomSchemaMap=function(e,r){t.getColumnOptionsProperty("customSchemaMap").set(e,r)},this.getCustomSchemaMap=function(){return t.getColumnOptionsProperty("customSchemaMap")},this.getFormConfig=function(){return t.getMetaOptionsProperty("config")||{}},this.getColLockInfo=function(){return t.getDataOptionsProperty("colLockInfo")},this.getFmtInfo=function(){return t.getDataOptionsProperty("fmtInfo")},this.getDataIndex=function(){return t.getDataOptionsProperty("dataIndex")},this.getParentNodeMap=function(){return t.getDataOptionsProperty("parentNodeMap")},this.setFullKeyboardOptions=function(){return t.setGlobalOption("fullKeyboardOptions",V())},this.getFullKeyboardOptions=function(){return t.getGlobalOptionsProperty("fullKeyboardOptions")},this.getShowTreeSeq=function(){return t.getMetaOptionsProperty("showTreeSeq")},this.getSumWithFilter=function(){return t.getMetaOptionsProperty("sumWithFilter")},this.getSelectAllRow=function(){return t.getMetaOptionsProperty("selectAllRow")},this.getDataDesc=function(){return t.getDataOptionsProperty("dataDesc")},this.getDefaultRowCount=function(){return t.getMetaOptionsProperty("defaultRowCount")},this.getIsLimitHeight=function(){return t.getMetaOptionsProperty("isLimitHeight")},this.getShowAggregateRowOverlay=function(){return t.getMetaOptionsProperty("showAggregateRowOverlay")},this.getSuppressRowSpan=function(){return t.getMetaOptionsProperty("suppressRowSpan")},this.getEnableBaseDataSelectFilter=function(){return t.getMetaOptionsProperty("enableBaseDataSelectFilter")},this.getMulCurrencyFields=function(){return t.getMetaOptionsProperty("mulCurrencyFields")},this.getShowVirtualViewRowCount=function(){return t.getMetaOptionsProperty("showVirtualViewRowCount")},this.setHasVoucherHeader=function(e){t.setGlobalOption("hasVoucherHeader",e)},this.getHasVoucherHeader=function(){return t.getGlobalOptionsProperty("hasVoucherHeader")},this.getTotalType=function(){return t.getMetaOptionsProperty("totalType")},this.setStickyAggregateHeight=function(e){return t.setGlobalOption("stickyAggregateHeight",e)},this.getStickyAggregateHeight=function(){return t.getGlobalOptionsProperty("stickyAggregateHeight")},this.getExpandRowIds=function(){return t.getGlobalOptionsProperty("expandRowIds")},this.setExpandRowIds=function(e,r){var n=t.getExpandRowIds(),o=e;"collapse"===r&&(o=n.filter((function(t){return!e.includes(t)}))),"expand"===r&&(o=Array.from(new Set([].concat(y(n),y(e))))),t.setGlobalOption("expandRowIds",o)},this.setAbleAutoGetAggData=function(e){return t.setGlobalOption("ableAutoGetAggData",e)},this.getAutoGetAggData=function(){return!1!==t.getGlobalOptionsProperty("ableAutoGetAggData")&&t.getMetaOptionsProperty("autoGetAggData")},this.getSeqColDescMap=function(){return t.getGlobalOptionsProperty("seqColDesc")||new Map},this.setSeqColDescMap=function(e){return t.setGlobalOption("seqColDesc",e)},this.getTreeVirtualViewLoadedDataRow=function(){return t.getGlobalOptionsProperty("treeVirtualViewLoadedDataRow")||[]},this.setTreeVirtualViewLoadedDataRow=function(e){return t.setGlobalOption("treeVirtualViewLoadedDataRow",e)},this.setLastRowSelectionInfo=function(e){return t.setGlobalOption("lastRowSelectionInfo",e)},this.getLastRowSelectionInfo=function(){return t.getGlobalOptionsProperty("lastRowSelectionInfo")},this.setColumnDraging=function(e){return t.setGlobalOption("isColumnDraging",e)},this.getColumnDraging=function(){return t.getGlobalOptionsProperty("isColumnDraging")},this.setTreeVirtualViewExpandAll=function(e){return t.setGlobalOption("treeVirtualViewExpandAll",e)},this.getTreeVirtualViewExpandAll=function(){return t.getGlobalOptionsProperty("treeVirtualViewExpandAll")||!1},this.dataOptions={},this.metaOptions={};var r=(0,l.caculateScrollContainerSize)(),i=r.width,a=r.height;this.globalOptions=b(b(b({personalizedColumnWidth:b(b(b({},o.PERSONALIZED_COLUMN_WIDTH,{}),o.PERSONALIZED_AUTOSIZE_COLUMN_WIDTH,{}),o.PERSONALIZED_COLUMN_MAX_WIDTH,{}),scrollBarSize:{width:i,height:n.default[n.IS_IE]?a+2:a},cellRanges:[],toolBarHeight:0},o.TABLE_SIZE,{width:0,height:0}),"fullKeyboardOptions",V()),"expandRowIds",[]),this.columnOptions=N()}var t,r,i;return t=e,(r=[{key:"setDataOptions",value:function(e,t){this.dataOptions=h(h({},this.dataOptions),{},{postCols:S(e,t),dataDesc:E(e,t),enableGetSumdata:I(e,t),fmtInfo:R(e,t),dataIndex:T(e,t),colLockInfo:O(e,t)})}}])&&C(t.prototype,r),i&&C(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function N(){return{aggregateColumns:[],customSchemaMap:new Map}}function V(){var e,t,r,n=null===(e=(0,s.getData)(d.KEY_ADVANCE_SHORTCUT_INFO))||void 0===e?void 0:e.enterToNextFieldInEntry,o=(null===(t=(0,s.getData)(d.KEY_ADVANCE_SHORTCUT_INFO))||void 0===t?void 0:t.enterToNextField)&&!n;return{autoAddRow:null===(r=(0,s.getData)(d.KEY_ADVANCE_SHORTCUT_INFO))||void 0===r?void 0:r.autoAddRowInEntry,enterToNextRow:n,enterToNextField:o}}t.default=j},974600:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(505684),r(743924),r(693917),r(976896),r(721300),r(606200),r(534440),r(387912),r(633768),r(690512),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.NavigationBar=m,t.getGirdToolBar=function(e){var t=e.readyed,r=e.model,n=e.parentModel,i=e.getActionByKey,a=e.getInstance,l=e.getTableOptions,u=e.getTableConfigImmediately,s=e.getInternalEventService,d=e.toolbarLocation;return t?"VIRTUALVIEWGRID"===r.getMetaProperty("gridtype")?o.default.createElement(v,{model:r,parentModel:n,getActionByKey:i,getInstance:a,getTableOptions:l,getTableConfigImmediately:u,getInternalEventService:s}):o.default.createElement(m,{model:r,parentModel:n,getActionByKey:i,getInstance:a,getTableOptions:l,getTableConfigImmediately:u,getInternalEventService:s,toolbarLocation:d}):null},r(323784),r(835164),r(571176);var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(795520)),i=f(r(352260)),a=r(273248),l=r(94580),u=f(r(94660)),s=r(545072),d=f(r(489480)),c=r(891052);function f(e){return e&&e.__esModule?e:{default:e}}function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function m(e){var t=e.model,r=e.parentModel,n=e.getActionByKey,u=e.getInstance,s=e.getTableOptions,f=e.getTableConfigImmediately,g=e.getInternalEventService,y=e.toolbarLocation,m=r||t,v=m&&m.getDataValue(),h=f(),b=h.pageType,C=h.hasNavgation,w=h.rowKey,S=p((0,o.useState)(b),2),E=S[0],I=S[1],R=p((0,o.useReducer)((function(e){return e+1}),0),2)[1],T=g();if((0,o.useEffect)((function(){I(b)}),[b]),(0,o.useEffect)((function(){var e=function(){R()};return T.addEventListener(l.KD_TABLE_EVENT_NAMES.reFreshToolBar,e),function(){T.removeEventListener(l.KD_TABLE_EVENT_NAMES.reFreshToolBar,e)}}),[]),(0,o.useEffect)((function(){var e=function(){var e=f().pageType;I(e)},t=g();return t.addEventListener(l.KD_TABLE_EVENT_NAMES.themeChanged,e),function(){t.removeEventListener(l.KD_TABLE_EVENT_NAMES.themeChanged,e)}}),[]),!v||!C)return o.default.createElement(o.default.Fragment,null);var O=t.getMetaProperty("gridtype"),P="VIEWGRID"===O,D="VIRTUALVIEWGRID"===O,A=s(),_=u(),M=n("invokeControlMethodSingle"),k=r&&!1===r.getMetaProperty("ismul")?"single":"multiple",L=r&&"SqlQuery"===r.getMetaProperty("queryType"),j=r&&!0===r.getMetaProperty("isindexmode"),N=m&&m.getMetaProperty("maxPageSize")||(P?a.DEFAULT_MAX_PAGE_SIZE:a.ENTRY_MAX_PAGE_SIZE),V=m&&m.getMetaProperty("pageRowOptions")||(0,c.List)(),K=r&&r.getMetaProperty("hsf"),F=r&&r.getMetaProperty("enabledChangePage")||!1,x=r&&r.getMetaProperty("suppressSelectAllRows")||!1,G=m.getFormConfig(),B=_.tableModel.rowData||[];return o.default.createElement(i.default,{className:"1"===y?d.default["toolbar-bottom"]:"",pageId:m.pageId,model:m,isGrid:!0,isListView:P,isVirtualView:D,isEntryEntity:!P&&!D,isF7Form:G.isf7,pageType:E,isSplitPage:!0,pageindex:v.get("pageindex"),rowcount:B.length,islastpage:v.get("islastpage")||!1,datacount:v.get("datacount"),billdatacount:v.get("billdatacount"),pagerows:v.get("pagerows"),pagecount:v.get("pagecount"),isgetrealcount:v.get("isgetrealcount"),isOutMaxDataCount:v.get("isOutMaxDataCount"),limitdatacount:v.get("limitdatacount"),realPageCount:v.get("realPageCount"),rowSelection:k,selectClick:function(e,t){if(t)_.controller.setSelectedRows([]);else{var r=B.map((function(e){return e[w]}));_.controller.setSelectedRows(r)}},gridKey:m.key,toolBarBtnClick:function(e,t){var r={pageId:m.pageId,key:m.key},o=n("toolBarBtnClick");o(r,e,t)},setAmountOperation:function(e,t){e=parseInt(e);var r={pageId:m.pageId,key:m.key},o=n("setAmountOperation");o(r,e,t)},heightLimit:!0,isSqlQuery:L,isIndexMode:j,maxPageSize:N,invokeControlMethodSingle:M,onToolbarSizeChanged:function(e){var t=e.height;t>0&&s().setToolBarHeight(t)},enabledChangePageInFakeCount:F,suppressSelectAllRows:x,navigationDefaultHeight:A.getNavigationDefaultHeight(),hasSummaryFields:K,pageMode:G.pageMode,pageRowOptions:V.toJS()})}function v(e){var t=e.model,r=e.parentModel,n=e.getTableOptions,i=e.getActionByKey,a=e.getInstance,d=e.getTableConfigImmediately,c=e.getInternalEventService,f=r||t,g=n(),y=d(),m=a(),v=g.getSelectAllRow(),h=g.getShowVirtualViewRowCount(),b=g.getDataDesc(),C=b&&b.isLargeData,w=b&&b.resetDataCount,S=b&&b.datacount||0,E=b&&b.pageIndex||1,I=b&&b.pageRows||200,R=b&&b.isSplitPage,T=b&&b.isLast,O=m.tableModel.rowData||[],P=p((0,o.useReducer)((function(e){return e+1}),0),2),D=(P[0],P[1]);(0,o.useEffect)((function(){var e=function(){D()},t=c();return t.addEventListener(l.KD_TABLE_EVENT_NAMES.virtualDataChanged,e),function(){t.removeEventListener(l.KD_TABLE_EVENT_NAMES.virtualDataChanged,e)}}),[]);var A=y.rowSelection,_=y.treeTable,M="radio"===A.type,k=!C||w,L=h&&k&&S>0,j=!!R&&!_;if(!(v||L||k&&!M||j))return o.default.createElement(o.default.Fragment,null);var N=null==f?void 0:f.getDataProperty([s.TIME_STAMP_FRESH]);return o.default.createElement(u.default,{model:f,dataCount:S,pageIndex:E,pageRows:I,hasSelectAllRow:v,handleVirtualViewSelectAll:function(e){var r=i("toolBarBtnClick"),n=a(),o=d().rowKey;if(e)n.controller.setSelectedRows([]),r(t,[],"clearSelection");else{var l=n.controller.getRows().map((function(e){return e[o]}));n.controller.setSelectedRows(l),r(t,[],"selectAllRows")}},handleSetPageIndex:function(e){i("setAmountOperation")(t,e,"setPageIndex")},handleSetPageSize:function(e){i("setAmountOperation")(t,e,"setPageSize")},dataValueTimeStamp:N,isSingleSelection:M,showRowCount:L,isRealDataCount:k,showPagination:j,rowCount:O.length,isLast:T})}},117568:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(505684),r(743924),r(693917),r(976896),r(721300),r(606200),r(534440),r(387912),r(633768),r(690512),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.pageId,r=e.id,n=e.getTableOptions,o=e.getTableApi,d=e.getTableConfigImmediately,f=e.onVisibleChange,g=e.className,p=c((0,i.useState)(0),2),y=p[0],m=p[1],v=c((0,i.useState)(!1),2),h=v[0],b=v[1];(0,i.useEffect)((function(){if(!n().getGridType()){var e=(0,a.addDataChangeListener)(t,[r,l.VALIDATE_FAILED_COUNT],(function(e){m(e),b(0!==e&&o().hasFilter())}));return function(){e()}}}),[]);return(0,i.useEffect)((function(){null==f||f(h)}),[h]),h?i.default.createElement(u.default,{errorCount:y,clearFilter:function(){o().clearFilter();var e=d(),n=e.type,i=e.gridType,a=(0,s.getGridTrackingType)({type:n,gridType:i});(0,s.trackingOfValidateClick)({pageId:t,controlId:r,controlType:a,actionKey:"clearFilter"})},className:g}):null},r(323784);var o,i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(795520)),a=r(738704),l=r(273248),u=(o=r(339405))&&o.__esModule?o:{default:o},s=r(816880);function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}},888816:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(505684),r(693917),r(976896),r(721300),r(606200),r(534440),r(633768),r(690512),r(78504),r(776512),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,r=e.pageId,n=e.id,m=e.getTableApi,v=e.getInstance,h=e.getTableConfigImmediately,C=e.getInternalEventService,R=e.containerEleRef,T=e.getTableOptions,O=e.pageIndex,P=void 0===O?1:O,D=e.pageRows,A=void 0===D?20:D,_=e.type,M=b((0,i.useState)(!1),2),k=M[0],L=M[1],j=b((0,i.useState)({top:!1,bottom:!1}),2),N=j[0],V=j[1],K=(0,i.useRef)({top:-1,bottom:Number.MAX_SAFE_INTEGER}),F=(0,i.useRef)(I(P,A)),x=(0,i.useRef)(null),G=function(){return!m().hasFilter()&&!m().hasSort()},B=function(){var e=R.current.querySelector(".kd-table > .kd-table-body");return!!e&&e.scrollHeight>e.clientHeight},H=(0,i.useCallback)((function(){if(!x.current){var e=R.current.querySelector(".kd-table");x.current=new window.IntersectionObserver((function(t){t[0].isIntersecting&&W(),1===t[0].intersectionRatio&&(x.current.disconnect(e),x.current=null)}),{threshold:[1e-6,.999999]}),e&&x.current.observe(e)}}),[]),W=(0,i.useCallback)((0,a.debounce)((function(){var e={top:!1,bottom:!1},t=(0,l.getGridValidateData)(r,[n]);if(t){var o,i=R.current.querySelector(".kd-table > .kd-table-body"),a=i.getBoundingClientRect(),u=a.x,s=a.y,d=a.height,c=i.scrollTop,f=document.elementFromPoint(u+w,s+w),g=document.elementFromPoint(u+w,s+Math.floor(d)-w-(null===(o=T().getScrollBarSize())||void 0===o?void 0:o.height)||0);f&&g||H();var p=E(f),y=E(g);K.current.top=-1,K.current.bottom=Number.MAX_SAFE_INTEGER;for(var m=t.keys(),h=m.next();!h.done;){var b=h.value;if(b<F.current[0]||b>=F.current[1])h=m.next();else{var C=v().controller.getRowIndex(b);null!=p&&C<p?(K.current.top=Math.max(K.current.top,b),e.top=!0):null!=y&&C>y&&(K.current.bottom=Math.min(K.current.bottom,b),e.bottom=!0),h=m.next()}}0===c&&(e.top=!1)}V(e),L(e.top||e.bottom)}),300),[r,n]);(0,i.useEffect)((function(){var e=(0,a.debounce)(W,300),t=function(t){"vertical"===t.params.direction&&G()&&e()};C().addEventListener(u.KD_TABLE_EVENT_NAMES.scroll,t),C().addEventListener(u.KD_TABLE_EVENT_NAMES.afterFilter,e),C().addEventListener(u.KD_TABLE_EVENT_NAMES.afterSortChange,e),C().addEventListener(u.KD_TABLE_EVENT_NAMES.afterColumnMove,e);var o=(0,d.addDataChangeListener)(r,[s.VALIDATE_FINISH],(function(e){(e.tableId===n||void 0===e.tableId)&&void 0===e.rowKey&&B()&&G()&&W()})),i=(0,d.addDataChangeListener)(r,[n,s.GRID_VALIDATE_CHANGE],(function(){B()&&G()&&setTimeout((function(){W()}))}));return function(){C().removeEventListener(u.KD_TABLE_EVENT_NAMES.scroll,t),C().removeEventListener(u.KD_TABLE_EVENT_NAMES.afterFilter,e),C().removeEventListener(u.KD_TABLE_EVENT_NAMES.afterSortChange,e),o&&o(),null==i||i()}}),[]),(0,i.useEffect)((function(){var e=F.current;F.current=I(P,A),e[0]===F.current[0]&&e[1]===F.current[1]||W()}),[P,A]);var z=(0,a.throttle)((function(e){var t="";"top"===e.target.dataset.arrow?t=K.current.top:"bottom"===e.target.dataset.arrow&&(t=K.current.bottom);var o=v().controller.getRowIndex(Number(t),!1),i=m();i.ensureRowIndexVisible(o,"middle");var a=(0,l.getGridValidateData)(r,[n,t]);if(a){var u,s=(0,y.flatColumns)(h().getColumns()),d=(0,g.getNextValidateFailedCol)(null===(u=s[0])||void 0===u?void 0:u.code,s,a);d&&setTimeout((function(){i.ensureColumnVisible(d.code),(0,f.shouldStartEditingCell)(d.type)?i.startEditingCellWithFocus({rowKey:t,code:d.code}):i.setFocusedCell({rowKey:t,code:d.code})}))}var p=h().gridType,b=(0,c.getGridTrackingType)({type:_,gridType:p});(0,c.trackingOfValidateClick)({pageId:r,controlId:n,controlType:b,actionKey:e.target.dataset.arrow})}),100),U=k&&(null===(t=R.current)||void 0===t?void 0:t.querySelector(".kd-table")),q=function(e,t){var r,n,o;return e?{top:(null===(r=t.current.querySelector(".kd-table .kd-table-header"))||void 0===r?void 0:r.offsetHeight)+S,bottom:((null===(n=t.current.querySelector(".kd-table .kd-table-footer"))||void 0===n?void 0:n.offsetHeight)||0)+((null===(o=t.current.querySelector(".kd-sticky-scroll"))||void 0===o?void 0:o.offsetHeight)||0)+S}:{top:0,bottom:0}}(U,R),Y=q.top,Z=q.bottom;return U?o.default.createPortal(i.default.createElement(p.default,{arrow:N,topStyle:{top:Y},bottomStyle:{bottom:Z},handleClick:z}),R.current.querySelector(".kd-table")):null},Object.defineProperty(t,"getScrollBarHeight",{enumerable:!0,get:function(){return m.getScrollBarHeight}}),r(323784),r(743924),r(846428),r(300116),r(387912),r(977864),r(86744);var o=h(r(369396)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=v(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(795520)),a=r(790832),l=r(218652),u=r(94580),s=r(545072),d=r(738704),c=r(816880),f=r(175560),g=r(29280),p=h(r(74384)),y=r(633016),m=r(683464);function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}function h(e){return e&&e.__esModule?e:{default:e}}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var w=2,S=2;function E(e){for(var t,r=e;r&&!t;){var n,o,i;t=null===(n=r)||void 0===n||null===(o=(i=n).getAttribute)||void 0===o?void 0:o.call(i,"data-rowindex"),r=r.parentNode}return t}function I(e,t){return[(e-1)*t,e*t]}},953936:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.readyed,r=e.model,u=e.parentModel,d=e.dispatch,c=e.getTableOptions,f=e.getTableConfigImmediately,g=e.getInstance,p=e.activeView,y=e.setActiveView,m=e.tablePoster,v=e.getTableApi;if(!t)return null;var h=(0,i.default)(r,u,{getTableOptions:c,getTableConfigImmediately:f}),b=g(),C=f(),w=h.getColPropertyByData,S=h.getDataProperty,E=h.getVisibleByViNumber,I=C.viewParams,R=C.id,T=C.rowKey,O=C.seqKey,P=C.localeId,D=C.defaultLocalId;if(0===I.length)return null;var A={getRowDatas:function(){return b.tableModel.getFlatRows()},getRow:function(e){return b.tableModel.getRow(e)},setSelectRows:function(e){return b.controller.setSelectedRows(e)},getColProperty:function(e,t){return w([t,e])},getDataProperty:S,getFiledVisible:function(e){var t;return!!e&&!(0,l.getColHidden)({vi:e.vi,visible:e.visible,colId:e.dataIndex,parentColHide:!1,getVisibleByNum:E,visibleData:w&&(null===(t=w(["colVisb"]))||void 0===t?void 0:t.toJS())})},getFieldLocked:function(e,t){if(e){var r=v(),n=e.dataIndex;return r.isCellLock(n,t,!1)}},postRowSelection:function(e){m.send({type:"editorRowClick",args:{column:{},rowKeyValue:e}})}},_={pid:r.pageId,id:R,gridId:R,rowKey:T,seq:O,localeId:P,defaultLocalId:D,config:r.getFormConfig()};return n.default.createElement(o.default,s({pageId:r.pageId,id:R,activeView:p,setActiveView:y,activeRowKey:(0,a.getActiveRowKeyValue)({getInstance:g,rowKeyName:T}),viewParams:I,model:r,params:_,dispatch:d},A))},r(297336),r(336368);var n=u(r(795520)),o=u(r(514267)),i=u(r(34888)),a=r(48764),l=r(355792);function u(e){return e&&e.__esModule?e:{default:e}}function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s.apply(this,arguments)}},133740:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(622676),r(233696),r(505684),r(693917),r(205960),r(976896),r(721300),r(846428),r(969e3),r(606200),r(534440),r(76152),r(76124),r(633768),r(690512),r(776512),r(997308),Object.defineProperty(t,"__esModule",{value:!0}),t.AggregateRowFoldIcon=function(e){var t=e.isFoldFooterRows,r=e.onIconClick,n=e.containerEleRef,a=e.getTableConfigImmediately,l=(0,o.useRef)(null),s=(0,h.getTableFooterElement)(n),d=a().rowHeight;(0,o.useEffect)((function(){var e,t=(0,h.getTableFooterElement)(n),r=function(e){l.current.style.top=e.currentTarget.scrollTop+f(d)+"px"};return null===(e=t)||void 0===e||e.addEventListener("scroll",r),function(){var e;null===(e=t)||void 0===e||e.removeEventListener("scroll",r),t=null}}),[n.current]);var c={transform:t?void 0:"rotate(90deg)"};return s?i.default.createPortal(o.default.createElement("div",{className:m.default["agregate-row-fold-content"],ref:l,style:{top:f(d)},onClick:r},o.default.createElement("span",{className:"kdfont kdfont-right",style:c}),o.default.createElement("span",null,(0,u.getLangMsg)("grid.key0019"))),s):null;function f(){return((arguments.length>0&&void 0!==arguments[0]?arguments[0]:32)-_)/2}},t.StickyAggregate=function(e){var t=e.getTableOptions,r=e.getActionByKey,n=e.getTableConfig,i=e.getInternalEventService,a=e.model,u=e.parentModel,s=t(),d=n(),c=d.pageId,h=d.id,b=d.parentId,C=d.gridType,w=d.rowHeight,S=!!s.getAggregateChecked(),E=r("invokeControlMethodSingle"),I=(0,o.useCallback)((function(e){return s.setAggregateChecked(e)}),[s]),T=(0,o.useCallback)((function(){return s.getAggregateChecked()}),[s]),_=(0,o.useCallback)((function(e){return s.setAbleAutoGetAggData(e)}),[s]),M=(0,o.useMemo)((function(){return O(a,u)>1||D(a,u)>1?P(a,u):[]})),k=R((0,v.useFooterRowData)(i,M),1)[0],L=s.getDataOptionsProperty("dataIndex"),j=(0,o.useRef)(null);if((0,o.useEffect)((function(){var e=j.current&&(0,p.default)(j.current,(function(e){var r=e.height,n=t();r>0&&n.getStickyAggregateHeight()!==r&&(n.setStickyAggregateHeight(r),i().dispatchEvent({type:y.KD_TABLE_EVENT_NAMES.stickyAggregateHeightChanged,params:{trigger:"stickyAggregateHeightChanged"}}))}));return function(){var t;null===(t=e)||void 0===t||t.removeResizeObserve(),e=null}}),[j.current]),null==k||0===k.length)return null;return o.default.createElement("div",{className:(0,l.default)(m.default["tile-aggregate"],"kd-cq-table-sticky-aggregate"),style:{minHeight:w},ref:j},o.default.createElement(f.default,{dataSource:k,dataIndex:L,seqName:d.seqKey,getColumnMap:function(){var e=new Map;return(0,g.iterateColumns)(d.getColumns(),(function(t){e.set(t.code,t)})),e}}),s.getShowAggregateRowOverlay()?o.default.createElement(A,{isCompoletedLoad:S,footerRowData:k,pageId:c,parentId:b,id:h,gridType:C,rowHeight:w,autoGetAggData:s.getAutoGetAggData(),invokeControlMethodSingle:E,getInternalEventService:i,setAggregateChecked:I,getAggregateChecked:T,setAbleAutoGetAggData:_,style:{height:"100%"}}):null)},t.default=void 0,r(323784),r(743924),r(70472),r(387912),r(78504),r(977864),r(86744);var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=w(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(795520)),i=C(r(369396)),a=r(199860),l=C(r(671252)),u=r(331428),s=r(738704),d=r(480632),c=r(273248),f=C(r(791680)),g=r(633016),p=C(r(139224)),y=r(94580),m=C(r(220716)),v=r(298432),h=r(157376),b=r(279872);function C(e){return e&&e.__esModule?e:{default:e}}function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(w=function(e){return e?r:t})(e)}function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){I(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function I(e,t,r){var o;return o=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==n(o)?o:String(o))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return T(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var O=b.dataHelper.getDataCount,P=b.dataHelper.getAggregateData,D=b.dataHelper.getCurrentPageRowsLength;function A(e){var t=e.style,r=e.isCompoletedLoad,n=e.footerRowData,i=e.pageId,l=e.parentId,f=e.id,g=e.gridType,p=e.rowHeight,y=e.getInternalEventService,h=e.autoGetAggData,b=e.invokeControlMethodSingle,C=e.setAggregateChecked,w=e.getAggregateChecked,S=e.setAbleAutoGetAggData,I=R((0,o.useState)(!1),2),T=I[0],O=I[1],P=R((0,o.useState)(r),2),D=P[0],A=P[1],_=R((0,o.useState)(!1),2),M=_[0],k=_[1],L=(0,o.useRef)(null),j=R((0,o.useReducer)((function(e){return e+1}),0),2)[1],N=function(e){var t=(e||{}).success;if(L.current&&clearTimeout(L.current),O(!1),!1===t)return k(!0),A(!1),void C(!1);C(!0),S(!0),A(!0)};(0,o.useEffect)((function(){var e=(0,s.addDataChangeListener)(i,[l||f,c.SET_FLOAT_BUTTOM_DATA_DONE],N);return function(){e&&e()}}),[i,l,f]),(0,o.useEffect)((function(){var e=(0,s.addDataChangeListener)(i,[l||f,"invokeControlMethod","getSumData"],(function(){w()&&(L.current&&clearTimeout(L.current),A(!1),O(!0))}));return function(){e()}}),[i,f,l]),(0,o.useEffect)((function(){A(r)}),[r]);var V=(0,o.useCallback)((function(){C(!1),S(!1),A(!1),j()}),[]);return(0,v.useTotalStatusChanged)(y,V),h||D||null==n||0===n.length?null:o.default.createElement("div",{className:m.default["agregate-row-overlay"],style:E({height:p},t)},o.default.createElement(a.Button,{className:"kd-cq-control kd-cq-btn",onClick:function(){b&&(k(!1),(0,s.setPageData)(i,[l||f,"invokeControlMethod",d.GETSUMDATA],!0),b({pageId:i,key:l||f},d.GETSUMDATA,[],g===d.GRID_TYPE.listViewGrid),L.current&&clearTimeout(L.current),L.current=setTimeout((function(){O(!0)}),200))},type:"link",loading:T,bordered:!1},T?(0,u.getLangMsg)("grid.key0030"):o.default.createElement("span",{className:"theme-fc hover-theme-hover-fc"},(0,u.getLangMsg)("grid.key0029"))),M?o.default.createElement("span",null,(0,u.getLangMsg)("grid.key0040")):null)}var _=18;t.default=function(e){var t=e.getTableOptions,r=e.getActionByKey,n=e.getInstance,i=e.containerEleRef,a=e.readyed,l=e.getTableConfig,u=e.getInternalEventService,s=t(),d=l(),c=d.pageId,f=d.id,g=d.parentId,p=d.gridType,y=d.rowHeight,m=!!s.getAggregateChecked(),h=n(),b=r("invokeControlMethodSingle"),C=(0,o.useCallback)((function(e){return s.setAggregateChecked(e)}),[s]),w=(0,o.useCallback)((function(){return s.getAggregateChecked()}),[s]),S=(0,o.useCallback)((function(e){return s.setAbleAutoGetAggData(e)}),[s]),E=R((0,o.useState)(0),2),I=E[0],T=E[1],O=R((0,v.useFooterRowData)(u,h.tableModel.getFooterRowData()),1)[0];return(0,o.useEffect)((function(){if(a){var e=i.current.querySelector(".kd-horizontal-scroll-container .kd-sticky-scroll"),t=function(e){var t=l(),r=t.toolbarLocation,n=t.hasNavgation,o="1"===r&&n?s.getMetaOptionsProperty("navigationDefaultHeight")||32:0;T("none"!==(null==e?void 0:e.style.display)?s.getScrollBarSize().height+o:o)},r=new window.MutationObserver((function(e){t(e[0].target)}));return e&&(t(e),r.observe(e,{attributes:!0})),function(){r.disconnect(),e=null}}}),[a]),o.default.createElement(A,{style:{bottom:I},isCompoletedLoad:m,footerRowData:O,pageId:c,parentId:g,id:f,gridType:p,rowHeight:y,autoGetAggData:s.getAutoGetAggData(),invokeControlMethodSingle:b,getInternalEventService:u,setAggregateChecked:C,getAggregateChecked:w,setAbleAutoGetAggData:S})}},360533:function(e,t,r){"use strict";r(697060),r(622676),r(743924),r(969e3),r(606200),r(534440),r(76152),r(76124),r(78504),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.getAggregateData=void 0,r(182320),r(909112),r(360776),r(9692),r(233696),r(443616),r(492948),r(205960),r(846428),r(999768),r(387912),r(23544),r(997308);var n=s(r(585232)),o=s(r(790832)),i=r(290600),a=r(331428),l=r(279872),u=r(48764);function s(e){return e&&e.__esModule?e:{default:e}}function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t,r){var n;return n=function(e,t){if("object"!=d(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==d(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=l.dataHelper.getAggregateData,y=(t.getAggregateData=function(e){var t=e.model,r=e.parentModel,n=e.getTableConfigImmediately,o=e.tableOptions,i=e.dataSource,l=n(),s=l.gridType,d=l.seqKey,c=p(t,r);if(!s){if(!(0,u.hadFooterRowData)({aggregateColumns:o.getAggregateColumns(),gridType:s}))return[];var m=h(i||[]);return[f(f(f({},y(m,o.getAggregateColumns())),c[0]||{}),{},g(g({},d,(0,a.getLangMsg)("grid.key0019")),"$AGG$",!0))]}return c},function(e,t){var r={},a=e.length;return t.forEach((function(t){var l=t.key,u=t.editor,s="",d=0;e.forEach((function(e,r){var o,c=parseFloat(e[l]);if(isNaN(c)){if(o=(0,n.default)(0),!["avg","count"].includes(t.aggType))return;"avg"===t.aggType&&(d+=1)}else o=(0,n.default)(e[l]);switch(t.aggType){case"sum":var f=(null==u?void 0:u[i.ZERO_SHOW])||t.type===i.Ctrls.KDStepper;(!o.eq((0,n.default)(0))||!isNaN(c)&&o.eq((0,n.default)(0))&&f)&&(s=o.plus((0,n.default)(s||0)));break;case"min":s=""===s?o:m(o,s);break;case"max":s=""===s?o:v(o,s);break;case"avg":s=o.plus((0,n.default)(s||0));var g=a-d;if(r===a-1&&0!==g){var p=(null==u?void 0:u[i.SCALE])||2;s=s.div(g).toFixed(p)}break;case"count":s=a}})),r[l]=o.default.isString(s)?s:s.toFixed()})),r}),m=function(e,t){return e.lt(t)?e:t},v=function(e,t){return e.gt(t)?e:t},h=function e(t){return t.reduce((function(t,r){t.push(r);var n=r.children;return n?t.concat(e(n)):t}),[])}},298432:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useFooterRowData",{enumerable:!0,get:function(){return n.useFooterRowData}}),Object.defineProperty(t,"useTotalStatusChanged",{enumerable:!0,get:function(){return o.useTotalStatusChanged}});var n=r(131836),o=r(832016)},131836:function(e,t,r){"use strict";r(182320),r(909112),r(697060),r(505684),r(743924),r(693917),r(976896),r(721300),r(606200),r(387912),r(633768),r(690512),r(78504),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.useFooterRowData=function(e,t){var r=(u=(0,n.useState)(t),s=2,function(e){if(Array.isArray(e))return e}(u)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(u,s)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(u,s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=r[0],l=r[1];var u,s;return(0,n.useEffect)((function(){var t=function(e){var t=e.params.footerRowData;l(t)},r=e();return r.addEventListener(o.KD_TABLE_EVENT_NAMES.footerRowDataChanged,t),function(){r.removeEventListener(o.KD_TABLE_EVENT_NAMES.footerRowDataChanged,t)}}),[]),[a,l]},r(323784);var n=r(795520),o=r(94580);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}},832016:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.useTotalStatusChanged=function(e,t){(0,n.useEffect)((function(){var r=e();return r.addEventListener(o.KD_TABLE_EVENT_NAMES.totalStatusChanged,t),function(){r.removeEventListener(o.KD_TABLE_EVENT_NAMES.totalStatusChanged,t)}}),[t])};var n=r(795520),o=r(94580)},827096:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useFooterAggregate",{enumerable:!0,get:function(){return n.useFooterAggregate}});var n=r(636004)},636004:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.useFooterAggregate=function(e){var t=e.this$,r=e.model,u=e.parentModel,f=e.getTableConfigImmediately,g=e.getTableOptions,p=(e.getInstance,e.getActionByKey),y=e.getInternalEventService;(0,n.useEffect)((function(){if(u){var e=u.pageId,r=u.key,n=function(){var n=g();if(s(t.current.model,t.current.parentModel)){var o,i=null===(o=d(t.current.model,t.current.parentModel))||void 0===o?void 0:o.length,a=n.getAutoGetAggData()&&i>0;(n.getAggregateChecked()||a)&&c(e,r,p)}},f=(0,o.getPageData)(e,[r,i.SERVERCBLISTENER,"getRealCount"]),m=(0,o.getPageData)(e,[r,"getSumData"]);(f||m)&&n();var v=(0,o.addDataChangeListener)(e,[r,i.SERVERCBLISTENER,"getRealCount"],n),h=(0,o.addDataChangeListener)(e,[r,"getSumData"],n),b=(0,o.addDataChangeListener)(e,[r,a.RESET_TOTAL_STATUS_DATA],(function(e){y().dispatchEvent({type:l.KD_TABLE_EVENT_NAMES.totalStatusChanged,params:{data:e}})}));return function(){v&&v(),h&&h(),null==b||b()}}}),[]),(0,n.useEffect)((function(){var e=f();e.gridType===i.GRID_TYPE.virtualViewGrid&&g().getAggregateChecked()&&g().getShowAggregateRowOverlay()&&c(e.pageId,e.id,p)}),[r.getDataProperty(["value","queryId"])])};var n=r(795520),o=r(738704),i=r(480632),a=r(273248),l=r(94580),u=r(279872),s=u.dataHelper.getEnableGetSumdata,d=u.dataHelper.getAggregateData;function c(e,t,r){var n=r("invokeControlMethodSingle");n&&((0,o.setPageData)(e,[t,"invokeControlMethod",i.GETSUMDATA],!0),n({pageId:e,key:t},i.GETSUMDATA,[],!0))}},279872:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(743924),r(606200),r(534440),r(387912),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.dataHelper=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=a?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(o,l,u):o[l]=e[l]}return o.default=e,r&&r.set(e,o),o}(r(218736));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}t.dataHelper=o},960440:function(e,t,r){"use strict";r(182320),r(909112),r(697060),r(360776),r(505684),r(323784),r(743924),r(693917),r(205960),r(976896),r(721300),r(846428),r(606200),r(633768),r(690512),r(78504),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(622676),r(613468),r(835164),r(492948),r(76124),r(387912);var n=r(480632),o=r(279872),i=r(526656);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t,r){var n;return n=function(e,t){if("object"!=c(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==c(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}var f=o.dataHelper.getRows,g={};function p(e,t){g[e]=t}p(n.DIRECTIVES.setSubTableData,(function(e,t){return function(r){t.seqKey;var n=t.getTableConfigImmediately,o=r.pkId,i=f(r,{getTableConfigImmediately:n});e.setSubTableData({rows:i,pkId:o})}})),p(n.DIRECTIVES.setFilters,(function(e,t){return function(r){if(r){var n=t.getTableConfigImmediately,o=t.getActionByKey,i=e.getFilters()||[],a=r.colId,l=r.value,u=l.filter,s=l.type,d=i.findIndex((function(e){return e.code===a})),c={code:r.colId,filter:u,filterCondition:s[0]};d>=0?i[d]=c:i.push(c);var f=n(),g=f.pageId,p=f.id,y=f.parentId,m=o("invokeControlMethodOnly");m&&m({pageId:g,key:y||p},"getGridDataByFilter",[[{FieldName:[c.code],Value:c.filter||[],Compare:[c.filterCondition]}]]),e.setFilters(i)}}})),p(n.DIRECTIVES.setSorts,(function(e,t){return function(t){"object"!==c(t)&&(t={});var r=Object.keys(t).reduce((function(e,r){var o=t[r],i=n.SORT_ORDER[o];return e.code=r,e.order=i,e}),{}),o=[];r.order&&o.push(r),e.setSorts(o)}})),p(n.DIRECTIVES.getGridInfo,(function(e,t){return function(r){var o=e.viewer.api,a=t.getTableConfigImmediately,s=t.tablePoster,d=a(),c=u(r);0===c.length&&(c=[n.GRID_IFNO_TYPE.cw,n.GRID_IFNO_TYPE.cwg,n.GRID_IFNO_TYPE.cv,n.GRID_IFNO_TYPE.cs,n.GRID_IFNO_TYPE.ca]);var f=l({},d.modelKey,c.reduce((function(e,t){return e[t]=(0,i.getGridInfoByType)(d,o,t),e}),{}));s.send({type:"postGridInfo",args:{gridInfo:f}})}})),p(n.DIRECTIVES.resetFilter,(function(e,t){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(0===t.length)e.setFilters([]);else{var r=a(t,1)[0];e.setFilters(r.map((function(e){var t=e.cp;return{code:e.k,filter:e.v,filterCondition:null==t?void 0:t[0]}})))}}}));t.default=g},526656:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.getGridInfoByType=void 0,r(622676),r(835164),r(492948),r(721300),r(387912);var n=r(480632),o=r(994432),i=r(633016),a=(t.getGridInfoByType=function(e,t,r){var o=e.columns,i=t.getColumnWidth();switch(r){case n.GRID_IFNO_TYPE.cw:return a(o,i);case n.GRID_IFNO_TYPE.cwg:return l(o,i);case n.GRID_IFNO_TYPE.cv:return u(o);case n.GRID_IFNO_TYPE.cs:return s(o,t);case n.GRID_IFNO_TYPE.ca:return d(o)}},function(e,t){return e.reduce((function(e,r){var n,i=r.code,a=r.width,l=r.hide,u=(0,o.getOriginColumnCode)(i),s=null!==(n=t[u])&&void 0!==n?n:a;return u&&s&&!l&&(e[u]=s),e}),{})}),l=function e(t,r){return t.reduce((function(t,n){var i,a=n.code,l=n.width,u=n.hide,s=n.name,d=n.children,c=(0,o.getOriginColumnCode)(a),f=null!==(i=r[c])&&void 0!==i?i:l;if(c&&f&&!u){var g={name:s,colId:c,width:f};d&&(g.children=e(d,r)),t.push(g)}return t}),[])},u=function(e){return e.reduce((function(e,t){var r=t.code,n=t.hide,i=(0,o.getOriginColumnCode)(r);return i&&(e[i]=!n),e}),{})},s=function(e,t){var r=t.getColumnSeq();return r?(0,i.flatColumns)(r).map((function(e){var t=e.k;e.w;return(0,o.getOriginColumnCode)(t)})):(0,i.flatColumns)(e).filter((function(e){var t=e.code,r=e.hide;return!!t&&!r})).map((function(e){var t=e.code;return(0,o.getOriginColumnCode)(t)}))},d=function(e){return e.reduce((function(e,t){var r=t.code,n=t.align,i=(0,o.getOriginColumnCode)(r);return i&&(e[i]=n),e}),{})}},684420:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(795520),o=r(738704),i=r(480632),a=s(r(882976)),l=r(273248),u=s(r(960440));function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){(0,n.useEffect)((function(){var t=e.getTableConfigImmediately,r=e.getInstance,n=e.getActionByKey,s=e.tablePoster,d=r(),c=t(),f=c.pageId,g=c.id,p=c.parentId,y={seqKey:c.seqKey,getTableConfigImmediately:t,getActionByKey:n,tablePoster:s};!function(e){var t=e.getTableConfigImmediately,r=e.getInstance,n=e.extraParams,a=t(),s=a.pageId,d=a.id,c=a.parentId,f=a.gridType,g=r(),p=(0,o.getPageData)(s,[c||d,"setGridFilter"]);p&&u.default.setFilters(g.controller,n)(p);var y=(0,o.getPageData)(s,[c||d,l.RESET_FILTER_DATA]);y&&u.default.resetFilter(g.controller,n)(y);if(f===i.GRID_TYPE.entryGrid||f===i.GRID_TYPE.virtualViewGrid){var m=(0,o.getPageData)(s,[c||d,l.GRID_SORTED_DATA]);m&&u.default.setSorts(g.controller,n)(m)}}({getTableConfigImmediately:t,getInstance:r,extraParams:y});var m=(0,o.addDataChangeListener)(f,[p||g,i.DIRECTIVES.__listener__],(function(e){var t=e.path,r=e.method;u.default[r]?u.default[r](d.controller,y)((0,o.getPageData)(f,t)):a.default.warn("KDTable未找到指令[".concat(r,"]的处理函数"))}));return function(){m()}}),[])}},289144:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.handleColumnDragStart=t.default=void 0,r(622676),r(233696),r(387912),r(997308);var n=r(891052),o=r(816880),i=r(49480),a=r(994432),l=r(741864),u=r(480632),s=r(94580);t.default=function(e){return function(t){var r=e.parentModel,d=e.model,c=e.getActionByKey,f=e.getTableConfigImmediately,g=e.getTableOptions,p=e.getMergeModel,y=e.getInternalEventService,m=r||d,v=c("invokeControlMethodOnly"),h=f(),b=g(),C=y();b.setColumnDraging(!1);var w=t.args,S=w.columnSeq;if(w.columnMoved){b.getHadRepeatedColumnCode()&&function(e){var t=e.pageId,r=(e.id,e.parentId),n=e.type,a=e.gridType,l=e.modelKey,u=i.trackingExtendCtrlProps.GRID_WITH_REPEATED_COLUMN_DRAG,s=!0,d=(0,o.getGridTrackingType)({type:n,gridType:a});(0,o.trackingOfGridProps)({pageId:t,controlId:r||l,controlType:d,controlProp:u,controlValue:s})}(h);var E=h.getColumns().filter((function(e){return!e.hide})),I={},R=[];S.forEach((function(e,t){var r=e.k;I[r]=t;var n={k:(0,a.getOriginColumnCode)(r),w:e.w};R.push(n)}));var T=function(e,t){var r=new Array(e.length);return e.forEach((function(e){r[t[e.code]]=e})),r}(E,I);h.setColumns(T),C.dispatchEvent({type:s.KD_TABLE_EVENT_NAMES.afterColumnMove}),p().updateBorderCols(T,d.getMetaProperty("columns")||(0,n.List)(),h.seqKey),(0,l.setRightBorderCols)({columns:T,getTableOptions:g}),(b.getGridType()===u.GRID_TYPE.virtualViewGrid||b.getGridType()===u.GRID_TYPE.listViewGrid||b.getGridType()===u.GRID_TYPE.entryGrid&&h.hasTableConfigOperation)&&v&&v(m,"postColsInfo",[b.getGridType()===u.GRID_TYPE.entryGrid?R.filter((function(e){return e.k!==h.seqKey})):R])}}};t.handleColumnDragStart=function(e){return function(t){(0,e.getTableOptions)().setColumnDraging(!0)}}},648544:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(743924),r(205960),r(846428),r(606200),r(78504),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.handleColumnResizedDoubleClick=t.handleColumnResized=t.handleAfterColumnResized=void 0,r(233696),r(387912),r(997308);var o=r(633016),i=r(480632),a=r(94580),l=r(816880),u=r(994432),s=r(738704),d=r(611308),c=r(27892);function f(e,t,r){var o;return o=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==n(o)?o:String(o))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t.handleColumnResized=function(e){return function(t){var r=t.args,n=(0,e.getTableConfigImmediately)(),i=r.columnSize,a=n.getColumns();(0,o.iterateColumns)(a,(function(e){var t=e.code;i[t]&&(e.width=i[t])})),n.setColumns(a)}},t.handleAfterColumnResized=function(e){return function(t){var r,n=t.args,o=e.getTableOptions,g=e.getTableConfigImmediately,p=e.getActionByKey,y=e.parentModel,m=e.model,v=e.getTableApi,h=e.getInstance,b=(0,e.getInternalEventService)(),C=p("invokeControlMethodOnly"),w=y||m,S=o(),E=g(),I=E.columnResizeMode,R=E.pageId,T=(E.id,E.parentId),O=E.type,P=E.gridType,D=E.autoHeight,A=E.titleAutoHeight,_=E.modelKey,M=S.getPersonalizedColumnWidth(),k=n.changeColumnSizes;if(k.length>0&&(k.forEach((function(e){var t=e.code,r=e.width,n=(0,u.getOriginColumnCode)(t),o=(0,u.getColumnByCode)(t,E.columns),l=S.getDataOptionsProperty("colLockInfo");n!==i.SHADOW_COLUMN_ID.tableConfigPlaceholderColumn&&(o&&!(0,u.shouldAutoSizedColumn)({column:o,colLockInfo:l})||I===i.TABLE_COLUMN_RESIZE_MODE.preset||D?M[i.PERSONALIZED_COLUMN_WIDTH][n]=Math.round(r):(M[i.PERSONALIZED_COLUMN_MAX_WIDTH][n]=Math.round(r),b.dispatchEvent({type:a.KD_TABLE_EVENT_NAMES.doAutoSizeColumns,params:{trigger:"afterDrag"}})))})),b.dispatchEvent({type:a.KD_TABLE_EVENT_NAMES.afterColumnResized,params:{changeColumnSizes:k}})),A){var L=v()._containerEleRef.current,j=h(),N=(0,c.calAutoHeightHeader)(L,{tableOptions:S,tableInstance:j,tableConfig:E,model:m});E.setHeaderHeight(N),b.dispatchEvent({type:a.KD_TABLE_EVENT_NAMES.afterColumnResized})}S.setPersonalizedColumnWidth(M),(0,d.postPersonalizedColumnWidth)(R,_)(M);var V=(null===(r=(0,s.getPageUIState)(R))||void 0===r||null===(r=r.get(_))||void 0===r?void 0:r.toJS())||{};C&&C(w,"saveGridViewWidth",[f({},_,V)]);var K=(0,l.getGridTrackingType)({type:O,gridType:P});(0,l.buriedPointOfColumnResize)({pageId:R,controlId:T||_,controlType:K})}},t.handleColumnResizedDoubleClick=function(e){return function(t){var r=t.args,n=e.getInternalEventService,o=r.col;n().dispatchEvent({type:a.KD_TABLE_EVENT_NAMES.doAutoSizeColumns,params:{trigger:"columnResizedDoubleClick",targetColumns:[o]}})}}},771848:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(768760);t.default=function(e){return function(t){var r=e.parentModel,o=e.model,i=e.getActionByKey,a=e.getInstance,l=e.getTableConfigImmediately,u=r||o,s=u.pageId,d=u.key;n.poster.postTableConfigOperation({pageId:s,key:d,getActionByKey:i,getInstance:a,getTableConfigImmediately:l})()}}},351084:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(205960),r(846428),r(969e3),r(606200),r(534440),r(76152),r(76124),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(941408),r(622676),r(233696),r(505684),r(743924),r(835164),r(387912),r(764840),r(78504),r(997308),r(977864),r(86744);var o=r(480632),i=r(360533),a=r(671840),l=r(29280),u=r(48764),s=r(994432),d=r(279872),c=r(881968),f=r(633016),g=r(94580),p=r(281376);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){var o;return o=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==n(o)?o:String(o))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h=d.dataHelper.getPageIndex,b=(t.default=function(e){return function(t){var r,n=e.parentModel,d=e.model,f=e.getTableOptions,y=e.getInstance,m=e.getActionByKey,v=e.getTableConfigImmediately,C=e.getTablePoster,S=e.getTableApi,E=e.getInternalEventService,R=v(),T=R.filterType,O=R.rowKey,P=R.treeTable,D=R.pageId,A=R.parentId,_=R.id,M=m("invokeControlMethodOnly"),k=t.args,L=k.currentFilter,j=void 0===L?{}:L,N=k.nextFilters,V=k.passiveTrigger,K=0===N.length;if(T!==o.FILTER_TYPES.service){var F,x=y(),G=x.tableModel,B=x.controller,H=E(),W=f(),z=C(),U=W.getSumWithFilter(),q=G.getRowData(),Y={expandKeys:new Set};if(F=K?q:b(q,N,(function(e,t,r){var n=(0,s.getColumnByCode)(r,R.getColumns());if(!n)return!0;var o=n.getValue,i=void 0===o?function(e){return(0,a.getCellValue)(e,r)}:o;return(0,n.features.filterable)(e.filter,e)(i(t),t)}),Y),G.setRows(F,!K),!K&&I(Y,{tableConfig:R,tableOptions:W,tableController:B}),R.treeTable&&setTimeout((function(){E().dispatchEvent({type:g.KD_TABLE_EVENT_NAMES.doAutoSizeColumns,params:{trigger:"rowExpand",targetColumns:[(0,s.getColumnByCode)(y().controller.getExpandColCode(),R.columns)]}})}),0),U){var Z=(0,u.shouldShowFooterRow)({rowCount:G.getFlatDisplayRows().length,pageIndex:h(d,n)})?(0,i.getAggregateData)({model:d,parentModel:n,tableOptions:W,dataSource:F,getTableConfigImmediately:v}):[];(0,c.setAggregateData)(Z,G,E(),W),z.send({type:"postFilterData",args:{rowKeys:K?[]:w(F,P,O),reset:K}})}return V||(B.setSelectedRows([]),z.send({type:"editorRowClick",args:{column:{},rowKeyValue:-1}})),z.send({type:"setFilterStatus",args:{hasFilter:N.length>0}}),H.dispatchEvent({type:g.KD_TABLE_EVENT_NAMES.reFreshToolBar}),H.dispatchEvent({type:g.KD_TABLE_EVENT_NAMES.afterFilter}),void window.requestAnimationFrame((function(){var e=R.pageId,t=R.id;(0,l.updateValidateFailedCellCount)({pageId:e,id:t,rowKey:O,tableApi:S(),controller:y().controller})}))}var X=(0,p.getFilterRequestParams)(j,null===(r=d.getMetaProperty("columns"))||void 0===r?void 0:r.toJS(),f().getEnableBaseDataSelectFilter());if(X.length){var $=n||d,J=m("invokeControlMethodOnly");J&&J($,"getGridDataByFilter",X)}else if(K){y().controller.getFilters().forEach((function(e){var t,r=(0,p.getFilterRequestParams)((0,p.createResetFilterValue)(e.code),null===(t=d.getMetaProperty("columns"))||void 0===t?void 0:t.toJS(),f().getEnableBaseDataSelectFilter());r.length&&M({pageId:D,key:A||_},"getGridDataByFilter",r)}))}}},function(e,t,r,n){return C(e,(function(e){return function(e,t,r){return t.every((function(t){var n=t.code;return r(t,e,n)}))}(e,t,r)}),n)}),C=function(e,t,r){var n=function e(r,n){return r.map((function(r){var o=r.children,i=t(r),a=m(m({},r),{},{children:o?e(o,n):void 0}),l=!E(a);return i||l?(l&&n.expandKeys.add(String(r.rk)),a):null})).filter(Boolean)}(e,r);return n},w=function(e,t,r){if(t){var n=[];return S(n,e,r),n}return e.map((function(e){return e[r]}))},S=function e(t,r,n){r.forEach((function(r){t.push(r[n]),(0,f.isLeafNode)(r)||e(t,r.children,n)}))},E=function(e){var t=e.children;return!t||0===t.length},I=function(e,t){var r=t.tableConfig,n=t.tableOptions,o=t.tableController;if(r.treeTable){var i=n.getDataOptionsProperty("rowKeyMap");n.setExpandRowIds(Array.from(e.expandKeys).map((function(e){return i.get(e)})),"expand"),o.setExpandRowKeys(Array.from(e.expandKeys))}}},890209:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(336368);var n=r(738704),o=r(480632),i=r(94580);t.default=function(e){return function(t){var r=t.args,a=e.getTableConfigImmediately,l=(0,e.getInternalEventService)(),u=a(),s=u.pageId,d=u.id,c=r.expandStatus,f=(0,n.getPageUIState)(s),g=f&&f.toJS&&f.toJS()||{},p=g[d]&&g[d][o.COL_EXPAND_STATUS]||{};(0,n.setPageUIState)({pageId:s,key:d},[o.COL_EXPAND_STATUS],Object.assign(p,c)),l.dispatchEvent({type:i.KD_TABLE_EVENT_NAMES.groupExtendChanged,params:{trigger:o.COLGROUP_EXTEND_CHANGE}})}}},207940:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(743924),r(606200),r(534440),r(387912),r(78504),r(776512),r(977864);var o=r(480632),i=r(789876),a=R(r(289144)),l=r(648544),u=E(r(771848)),s=E(r(351084)),d=R(r(144280)),c=R(r(291408)),f=E(r(884204)),g=E(r(195100)),p=E(r(878156)),y=E(r(836444)),m=E(r(213160)),v=E(r(387516)),h=E(r(125088)),b=E(r(975288)),C=R(r(658528)),w=E(r(890209)),S=r(149824);function E(e){return e&&e.__esModule?e:{default:e}}function I(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(I=function(e){return e?r:t})(e)}function R(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=I(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(0,i.addEventHandles)(o.EVENT_NAMES.columnMoved,a.default),(0,i.addEventHandles)(o.EVENT_NAMES.columnDragStart,a.handleColumnDragStart),(0,i.addEventHandles)(o.EVENT_NAMES.afterColumnResized,l.handleAfterColumnResized),(0,i.addEventHandles)(o.EVENT_NAMES.columnResized,l.handleColumnResized),(0,i.addEventHandles)(o.EVENT_NAMES.columnResizedDoubleClick,l.handleColumnResizedDoubleClick),(0,i.addEventHandles)(o.EVENT_NAMES.configOperation,u.default),(0,i.addEventHandles)(o.EVENT_NAMES.filterChanged,s.default),(0,i.addEventHandles)(o.EVENT_NAMES.detailTableDataGetter,d.default),(0,i.addEventHandles)(o.EVENT_NAMES.detailTableExpandClick,d.handleDetailTableExpandClick),(0,i.addEventHandles)(o.EVENT_NAMES.rowSelectionChanged,c.default),(0,i.addEventHandles)(o.EVENT_NAMES.rowDoubleClick,c.handleRowDoubleClick),(0,i.addEventHandles)(o.EVENT_NAMES.sortChanged,f.default),(0,i.addEventHandles)(o.EVENT_NAMES.subGridRendered,g.default),(0,i.addEventHandles)(o.EVENT_NAMES.subGridScroll,p.default),(0,i.addEventHandles)(o.EVENT_NAMES.tableRendered,y.default),(0,i.addEventHandles)(o.EVENT_NAMES.rangeSelection,m.default),(0,i.addEventHandles)(o.EVENT_NAMES.scrollLoad,v.default),(0,i.addEventHandles)(o.EVENT_NAMES.setEditingCell,h.default),(0,i.addEventHandles)(o.EVENT_NAMES.tableRowClick,b.default),(0,i.addEventHandles)(o.EVENT_NAMES.expandRowKeysChange,C.default),(0,i.addEventHandles)(o.EVENT_NAMES.afterExpandRowKeysChange,C.handleAfterExpandRowKeysChange),(0,i.addEventHandles)(o.EVENT_NAMES.changeColExtendStatus,w.default),(0,i.addEventHandles)(o.EVENT_NAMES.rowDragEnd,S.handleRowDragEnd),(0,i.addEventHandles)(o.EVENT_NAMES.rowDragStart,S.handleRowDragStart)},213160:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(622676),r(233696),r(743924),r(205960),r(846428),r(969e3),r(606200),r(534440),r(76152),r(76124),r(387912),r(78504),r(997308),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(323784),r(835164);var o=r(660080),i=r(671840),a=r(738704),l=r(273248);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){var o;return o=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==n(o)?o:String(o))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t.default=function(e){return function(t){var r=e.getTableOptions,n=e.getInstance,u=e.getTableConfigImmediately,d=e.getActionByKey,c=e.model,f=e.getTableApi,g=t.args,p=g.cellRanges,y=g.isFinished,m=Array.isArray(p)?p:p?[p]:[],v=r(),h=f();v.setCellRanges(m);var b=u(),C=b.shouldPostRangeSelection,w=b.rowKey,S=b.isCellRangesSum;if(y&&S&&function(e,t){var r=t.getTableOptions,n=t.getInstance,u=t.getTableConfigImmediately,d=t.getTableApi,c=u(),f=d(),g=r(),p=c.pageId,y=c.id;if((0,o.isCellRangesOverlap)(e,{getInstance:n,getTableConfigImmediately:u}))return(0,o.cellRangesOverlapTips)(p),void f.clearRangeSelection();if((0,o.isCellRangesSumRowOutOfSize)(e,{getInstance:n,getTableConfigImmediately:u}))return(0,a.updatePageData)(p,[l.CELL_RANGES_SUM_RESULT,y],(function(e){return s(s({},e),{},{isValid:!1})})),void(0,o.cellRangesOutOfSizeTips)(p);if((0,i.isCellRangeSingleCell)(e)){var m=(0,o.getCellRangeId)(e[0]);g.getCellRangesSumResult(m)||g.clearCellRangesSumResult()}var v=(0,o.getCellRangesResult)(e,{getTableOptions:r,getInstance:n,getTableConfigImmediately:u,getTableApi:d});(0,a.setPageData)(p,[l.CELL_RANGES_SUM_RESULT,y],v)}(m,{getTableOptions:r,getInstance:n,getTableConfigImmediately:u,getTableApi:f}),y&&!(0,i.isCellRangeSingleCell)(m)&&h.focus(),C&&m.length>0){var E=d("setSelectionRangePostData");!function(e,t,r,n){if(t){var o=t.columns,i=t.endRow,a=t.startRow;r(e,{selectionRange:[{colFieldKeys:o.map((function(e){return e.code})),startRowKey:n(a),endRowKey:n(i)}]})}}(c,m[0],E,(function(e){var t;return null===(t=n().controller.getRowByIndex(e))||void 0===t?void 0:t[w]}))}}}},144280:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.handleDetailTableExpandClick=t.default=void 0;t.default=function(e){return function(t){var r=e.getTableConfigImmediately,n=e.getActionByKey,o=t.args.mainEntityPrimaryKeyId,i=r(),a=i.pageId,l=i.parentId;n("getDetailGridData")({pageId:a,key:l},[o])}},t.handleDetailTableExpandClick=function(e){return function(t){var r=e.parentModel,n=e.model,o=e.getActionByKey,i=e.getInstance,a=e.getTableConfigImmediately,l=r||n,u=o("invokeControlMethodOnly"),s=t.args.rowKey,d=i().controller.viewer.api.getRow(s),c=a().rowDetailOptions.mainEntityPrimaryKeyFieldName,f=null==d?void 0:d[c];u&&u({key:l.key,pageId:l.pageId},"expandClick",[f,s])}}},149824:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.handleRowDragStart=t.handleRowDragEnd=void 0,r(941408),r(443616),r(704180),r(387912),r(660824);var n=r(564616),o=r(331428),i=r(218652);t.handleRowDragEnd=function(e){return function(t){var r=e.getTableOptions,a=e.getInstance,l=e.getTableConfigImmediately,u=e.getActionByKey,s=e.model,d=e.getTableContainterRef,c=t.args.rowDragEvent,f=l(),g=f.rowKey,p=(f.gridType,f.treeTable),y=f.pageId,m=a(),v=c.endRow,h=c.startRow,b=c.endRowIndex,C=c.dragPosition,w=b-1,S="top"===C&&-1!==w?m.controller.getRowByIndex(w):v,E="top"===C&&-1===w?S[g]-1:S[g],I=h[g],R=m.controller.getSelectedRowKeys(),T=R.includes(I)?R:[I];if(d().current.classList.remove("row-drag-with-selected"),function(e,t,r){var o=r.getTableOptions,i=r.treeTable,a=(r.pageId,o());if(i){var l=a.getParentNodeMap();if(function(e,t,r){var n=-1===t?r.get("all"):r.get(t);return!!n&&e.every((function(e){return n.includes(e)}))}(e,t,l))return!0;if(e.some((function(e){return e!==t&&!(0,n.isSameParentNode)(e,t,{parentNodeMap:l})})))return!1}return!0}(T,E,{getTableOptions:r,treeTable:p,pageId:y})){var O=u("dragRows");O&&O(s,[T,E])}else!function(e){var t=[{content:(0,o.getLangMsg)("grid.key0059"),duration:3500,type:2}];(0,i.setDataMessages)(e,t)}(y)}};t.handleRowDragStart=function(e){return function(t){var r=e.getTableContainterRef,n=e.getInstance,o=e.getTableConfigImmediately,i=t.args.rowDragEvent.startRow,a=o().rowKey,l=n(),u=i[a];l.controller.getSelectedRowKeys().includes(u)&&r().current.classList.add("row-drag-with-selected")}}},658528:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.handleAfterExpandRowKeysChange=t.default=void 0,r(443616),r(835164),r(571176),r(660824),r(86744);var n=r(94580),o=r(994432);t.default=function(e){return function(t){var r,o=e.model,i=e.getTableOptions,a=e.getTableConfigImmediately,l=e.getActionByKey,u=e.getInstance,s=t.args,d=s.nextKeys,c=s.key,f=s.action,g=parseInt(c),p=i(),y=a(),m=u(),v=l("invokeControlMethodOnly"),h=p.getDataOptionsProperty("rowKeyMap"),b=p.getDataOptionsProperty("lazyLoadGroup"),C=p.getMetaOptionsProperty("gridType"),w=h.get(parseInt(g));p.setExpandRowIds([w],f),null===(r=m.controller)||void 0===r||r.setExpandRowKeys(d,!1);var S=d.map((function(e){return h.get(parseInt(e))}));if("VIRTUALVIEWGRID"===C){var E=y.blockSize;"expand"===f&&b.includes(g)&&v&&v(o,"getVirtualData",[0,E,w,g])}else{v(o,"postExpandNodes",[S]),(0,e.getInternalEventService)().dispatchEvent({type:n.KD_TABLE_EVENT_NAMES.afterRowExpand}),"expand"===f&&b.includes(g)&&v(o,"loadChildrenData",[{id:w,rowkey:g}])}}},t.handleAfterExpandRowKeysChange=function(e){var t=e.getTableConfigImmediately,r=e.getInstance,i=e.getInternalEventService;return function(e){e.args;t().treeTable&&setTimeout((function(){i().dispatchEvent({type:n.KD_TABLE_EVENT_NAMES.doAutoSizeColumns,params:{trigger:"rowExpand",targetColumns:[(0,o.getColumnByCode)(r().controller.getExpandColCode(),t().columns)]}})}),0)}}},291408:function(e,t,r){"use strict";r(182320),r(909112),r(697060),r(323784),r(693917),r(976896),r(721300),r(606200),r(633768),r(690512),Object.defineProperty(t,"__esModule",{value:!0}),t.handleRowDoubleClick=t.default=void 0,r(9692),r(941408),r(505684),r(443616),r(743924),r(835164),r(492948),r(82e3),r(927184),r(846428),r(387912),r(571176),r(764840),r(660824),r(78504),r(977864);var n=r(768760),o=r(107816),i=r(48764),a=r(123700);function l(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=s(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw i}}}}function u(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}t.default=function(e){return function(t){var r=e.dispatch,a=e.getActionByKey,l=e.parentModel,u=e.model,s=e.getInstance,d=e.getTableConfigImmediately,p=e.getTableOptions,m=e.getTableApi,v=e.getMergeModel,h=s(),b=t.args,C=b.action,w=b.selectedRows,S=b.actionRowkey,E=b.actionRowskeys;if("string"==typeof S&&S.includes("detail"))h.controller.setSelectedRows(w);else{var I=(0,o.getRowSelectedParams)({parentModel:l,model:u,getInstance:s,getTableConfigImmediately:d,getTableOptions:p,actionRowkey:S}),R=I.pageId,T=I.key,O=I.rowKey,P=I.rowSelection,D=I.focusedCell,A=I.postCols,_=D.rowKey,M=D.rowIndex,k=D.code,L=d(),j=p(),N=m().getIsClickNormalCell(),V=j.getSelectAllRow(),K=L.getDisplayColumn(k),F=L.gridType,x=L.isScrollLoad;if(!F){var G=h.controller.getEditCell()||{rowKey:-1},B=h.controller.getLastEditCell()||{rowKey:-1};if(-1!==G.rowKey&&-1!==B.rowKey&&G.rowKey===B.rowKey&&G.code===B.code)return}var H=y({selectedRowKeys:w,actionRowkey:S,actionRowskeys:E,action:C,getMergeModel:v,getInstance:s,getTableConfigImmediately:d,code:k}),W=H.selectedRows,z=H.selectedRowKeys,U=H.nextActionRowKeys,q=H.selectedAction;h.controller.setSelectedRows(z);var Y=P&&"radio"===P.type?c(z):f({selectedRows:W,action:C,rowIndex:M,focusRowKey:_,rowKey:O,actionRowkey:S,isClickNormalCell:N});if("VIEWGRID"===F&&x||V){var Z=g({action:C,rowIndex:M,focusRowKey:_,actionRowkey:S}),X=(0,i.getPendingSelectedRowKeys)({getInstance:s,rowKeyValue:Z,column:K,actionRowKeys:U});!function(e){var t=e.action,r=e.pageId,o=e.key,i=e.getActionByKey,a=e.dispatch,l=e.column,u=e.postCols,s=e.rowKeyValue,d=e.pendingSelectedRows,c=e.pendingSelectedRowKeys,f=e.gridType;if("check-all"===t||"uncheck-all"===t){var g="check-all"===t?"selectPageAllRows":"clearPageSelection";return void n.poster.postPageSelection({pageId:r,key:o,getActionByKey:i})({methodName:g})}var p="check"===t?"addRowSelection":"clearRowSelection";n.poster.postRowSelection({pageId:r,key:o,getActionByKey:i,postCols:u,dispatch:a,gridType:f})({methodName:p,rowKeyValue:s,pendingSelectedRows:d,pendingSelectedRowKeys:c,column:l})}({action:q,pageId:R,key:T,column:K,getActionByKey:a,dispatch:r,postCols:A,rowKeyValue:Y,pendingSelectedRowKeys:X,pendingSelectedRows:h.controller.viewer.api.getRows(X),gridType:F})}else n.poster.postRowClick({pageId:R,key:T,dispatch:r,getActionByKey:a,postCols:A,gridType:F,getTableOptions:p})({selectedRows:W,selectedRowKeys:z,column:K,rowKeyValue:Y})}}},t.handleRowDoubleClick=function(e){return function(t){var r=e.dispatch,a=e.getActionByKey,l=e.parentModel,s=e.model,d=e.getInstance,m=e.getTableConfigImmediately,v=e.getTableOptions,h=(e.getTableApi,e.getMergeModel),b=(0,o.getRowSelectedParams)({parentModel:l,model:s,getInstance:d,getTableConfigImmediately:m,getTableOptions:v}),C=b.pageId,w=b.key,S=b.rowKey,E=b.rowSelection,I=b.focusedCell,R=b.postCols,T=I.rowKey,O=I.rowIndex,P=I.code,D=d(),A=t.args,_=A.action,M=A.selectedRows,k=A.actionRowkey,L=A.actionRowskeys,j=u(M),N="check";if("uncheck"===_&&j.splice.apply(j,[j.length,0].concat(u(L))),"string"==typeof k&&k.includes("detail"))D.controller.setSelectedRows(L);else{var V=y({selectedRowKeys:j,actionRowkey:k,actionRowskeys:L,action:N,getMergeModel:h,getInstance:d,getTableConfigImmediately:m,code:P}),K=V.selectedRows,F=V.selectedRowKeys;D.controller.setSelectedRows(F);var x=m(),G=x.getDisplayColumn(P),B=x.gridType,H=x.isScrollLoad,W=E&&"radio"===E.type?c(F):f({selectedRows:K,action:N,rowIndex:O,focusRowKey:T,rowKey:S,actionRowkey:k}),z=d(),U=v().getSelectAllRow();if("VIEWGRID"===B&&H||U){var q=p(null==G?void 0:G.code)?"addRowSelection":"doubleClickRow",Y=g({action:N,rowIndex:O,focusRowKey:T,actionRowkey:k}),Z=(0,i.getPendingSelectedRowKeys)({getInstance:d,rowKeyValue:Y,column:G}),X=z.controller.viewer.api.getRows(Z);n.poster.postRowSelection({pageId:C,key:w,getActionByKey:a,postCols:R,dispatch:r,gridType:B})({methodName:q,pendingSelectedRowKeys:Z,pendingSelectedRows:X,rowKeyValue:W,column:G})}else p(null==G?void 0:G.code)?n.poster.postRowClick({pageId:C,key:w,dispatch:r,getActionByKey:a,postCols:R,gridType:B,getTableOptions:v})({selectedRows:K,selectedRowKeys:F,column:G,code:P,rowKeyValue:W}):n.poster.postRowDoubleClick({pageId:C,key:w,dispatch:r,getActionByKey:a,postCols:R})({selectedRows:K,selectedRowKeys:F,column:G,rowKeyValue:W})}}};function c(e){return e.length>0?e[0]:-1}function f(e){var t=e.selectedRows,r=e.action,n=e.rowIndex,o=e.focusRowKey,i=e.rowKey,a=e.actionRowkey,l=e.isClickNormalCell,u=-1;return"check"===r?u=n>-1&&l?o:Number(a):t.length>0&&(u=t[0][i]),u}function g(e){var t=e.action,r=e.rowIndex,n=e.focusRowKey,o=e.actionRowkey,i=-1;return"check"!==t&&"uncheck"!==t||(i=r>-1?n:Number(o)),i}function p(e){return null===e}function y(e){var t=e.selectedRowKeys,r=e.actionRowkey,n=e.actionRowskeys,o=e.action,i=e.getMergeModel,s=e.getInstance,d=e.getTableConfigImmediately,c=e.code,f=function(e){var t=e.selectedRows,r=e.key,n=e.batchKeys,o=e.action,i=e.mergeModel,a=t,s=n,d=o;if(i.hasMergeRow){var c=new Set(t),f=new Set(n);if(i.suppressMergeSelect&&void 0!==i.currentColumnCode&&1===n.length){var g=i.getRowGroup(n[0]).map((function(e){return e+""}));if(g.length>1)if("uncheck"===o)if(Array.from(g).every((function(e){return c.has(e)||e===r}))){var p,y=l(g);try{for(y.s();!(p=y.n()).done;){var m=p.value;c.delete(m)}}catch(e){y.e(e)}finally{y.f()}}else c=new Set([].concat(u(c),u(g))),d="check";else c=new Set([].concat(u(a),u(g)))}if(!i.suppressMergeSelect){f=n.reduce((function(e,t){var r=i.getRowGroup(t).map((function(e){return e+""}));return new Set([].concat(u(e),u(r)))}),new Set);var v,h=["check","check-all"].includes(o),b=l(f);try{for(b.s();!(v=b.n()).done;){var C=v.value;h?c.add(C):c.delete(C)}}catch(e){b.e(e)}finally{b.f()}}a=Array.from(c),s=Array.from(f),i.currentColumnCode=void 0}return{selectedRows:a,batchKeys:s,selectedAction:d}}({selectedRows:t,key:r,batchKeys:n,action:o,mergeModel:i()}),g=f.selectedRows,y=f.batchKeys,m=f.selectedAction,v=s(),h=d();g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return Number(e)})).sort((function(e,t){return e-t}))}(g);var b=v.controller.getRows(g),C="check-all"===o||"uncheck-all"===o;p(c)||C||1!==y.length||(0,a.isExclusiveSelected)({getTableConfigImmediately:d})&&(g=[parseInt(r)],b=v.controller.getRows(g));var w=h.gridType,S=h.rowSelection;"VIRTUALVIEWGRID"!==w||(void 0===S?{}:S).showSelectionColumn||(g=[parseInt(r)],b=v.controller.getRows(g));return{selectedRowKeys:g,selectedRows:b,nextActionRowKeys:y,selectedAction:m}}},387516:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(743924),r(606200),r(534440),r(387912),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(241872);var o=r(480632),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=l(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(o,a,u):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(600192)),a=r(497168);function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}t.default=function(e){return function(t){var r=e.getTableOptions,n=e.model,l=e.parentModel,u=e.getActionByKey,s=e.getTableConfigImmediately,d=e.getInstance,c=l||n,f=t.args.startIndex,g=r(),p=s(),y=d(),m=u("invokeControlMethodOnly"),v=n.getDataProperty(["value","datacount"]);if(!(p.gridType===o.GRID_TYPE.virtualViewGrid&&p.treeTable||0===v&&p.gridType===o.GRID_TYPE.virtualViewGrid)){var h=c.pageId,b=c.key,C=p.blockSize;if(p.scrollLoadType===o.SCROLL_LOAD_TYPE.serverSide){var w=y.tableModel.getRowData(),S=g.getIsScrollLoadedLastPage();if(f!==w.length||S)return;var E="VIEWGRID"===p.gridType?"getRowData":"getVirtualData";m&&m({pageId:h,key:b},E,[f,C])}else if(p.scrollLoadType===o.SCROLL_LOAD_TYPE.infinite){var I=g.getLoadedPages(),R=Math.floor(f/C),T=I.indexOf(R);if(T>-1)return function(e,t){var r=e[t],n=e.length;e[t]=e[n-1],e[n-1]=r}(I,T),void g.setLoadedPages(I);var O=(0,a.makeAjaxKey)(h,b,"getVirtualData");i.disableDisposeAction(O),m&&m({pageId:h,key:b},"getVirtualData",[f,C]),i.allowDisposeAction(O)}}}}},125088:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e){return function(t){var r=t.args,n=r.rowKey,o=r.code,i=r.record,a=e.setEditingCell,l=e.getTableApi;-1!==n?l().isCellLock(o,i)||a({rowKey:n,code:o}):a({rowKey:n})}}},884204:function(e,t,r){"use strict";r(305092),r(606200),r(387912),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(161932),o=r(633016),i=r(994432),a=r(480632),l=r(94580);t.default=function(e){return function(t){var r,u=e.parentModel,s=e.model,d=e.getActionByKey,c=e.getTableConfigImmediately,f=e.getInstance,g=e.getInternalEventService,p=c(),y=g(),m=p.sortType,v=u||s,h=d("invokeControlMethodOnly"),b=(null===(r=s.getMetaProperty("columns"))||void 0===r?void 0:r.toJS())||[],C=t.args,w=f().tableModel,S=C.currentSort,E=C.nextSorts;if(w.setIsSortActive(E.length>0),y.dispatchEvent({type:l.KD_TABLE_EVENT_NAMES.afterSortChange}),m===a.SORT_TYPES.service&&S){var I=(0,i.getOriginColumnCode)(S.code),R=(0,o.find)(b,(function(e){return e.dataIndex===I}));h(v,"setRowSort",[(0,n.getSortAndFilterColumnId)(I,R),"desc"===S.order?2:"asc"===S.order?1:0])}}}},195100:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(94580);t.default=function(e){return function(t){var r=e.getInternalEventService,o=t.args,i=o.trigger,a=o.containerEleRef,l=o.mainEntityPrimaryKeyId;r().dispatchEvent({type:n.KD_TABLE_EVENT_NAMES.subGridRendered,params:{trigger:i,containerEleRef:a,mainEntityPrimaryKeyId:l}})}}},878156:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(94580);t.default=function(e){return function(t){var r=e.getInternalEventService,o=t.args,i=o.direction,a=o.top,l=o.left,u=o.containerEleRef,s=o.mainEntityPrimaryKeyId;r().dispatchEvent({type:n.KD_TABLE_EVENT_NAMES.subGridScroll,params:{direction:i,top:a,left:l,containerEleRef:u,mainEntityPrimaryKeyId:s}})}}},836444:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(94580);t.default=function(e){return function(t){var r=e.getInternalEventService,o=t.args.trigger;r().dispatchEvent({type:n.KD_TABLE_EVENT_NAMES.baseTableRendered,params:{trigger:o}})}}},975288:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e){return function(t){var r,n=e.getInstance,o=e.getTablePoster,i=e.getTableConfigImmediately,a=e.getTableApi,l=t.args.rowKey,u=n(),s=i(),d=o(),c=a();if(void 0===l)return c.setFocusedCell({rowIndex:-1}),void c.setIsClickNormalCell(!1);c.getIsClickNormalCell()||c.setFocusedCell({rowIndex:-1}),c.setIsClickNormalCell(!1);var f,g=u.controller.getFocusedCell(),p=s.isCheckboxSelected,y=g.code;g.rowIndex>-1&&(f=s.getDisplayColumn(y));var m=u.controller.getRow(l);!p||f&&null===f.code||null!=m&&null!==(r=m.cprop)&&void 0!==r&&r.disabled||d.send({type:"editorRowClick",args:{rowKeyValue:l,column:f}})}}},789876:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.addEventHandles=function(e,t){n[e]=t},t.default=void 0;var n=t.default={}},443780:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(743924),r(606200),r(534440),r(387912),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getIsRowsChanged",{enumerable:!0,get:function(){return C.getIsRowsChanged}}),Object.defineProperty(t,"useAutoSizeColumnWidth",{enumerable:!0,get:function(){return i.useAutoSizeColumnWidth}}),Object.defineProperty(t,"useColumnsChanged",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(t,"useContextMenu",{enumerable:!0,get:function(){return a.useContextMenu}}),Object.defineProperty(t,"useDataTimestampUpdate",{enumerable:!0,get:function(){return u.useDataTimestampUpdate}}),Object.defineProperty(t,"useDataValueChanged",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(t,"useDataValueChangedMark",{enumerable:!0,get:function(){return C.useDataValueChangedMark}}),Object.defineProperty(t,"useDisabledSelectAll",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"useEdit",{enumerable:!0,get:function(){return w.useEdit}}),Object.defineProperty(t,"useFmtInfoChanged",{enumerable:!0,get:function(){return u.useFmtInfoChanged}}),Object.defineProperty(t,"useFormStatusChanged",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(t,"useInsertData",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(t,"useKeyBoardEvent",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"useOperationColPermission",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"useResizeTableHeight",{enumerable:!0,get:function(){return y.useResizeTableHeight}}),Object.defineProperty(t,"useRowExpand",{enumerable:!0,get:function(){return S.useRowExpand}}),Object.defineProperty(t,"useRowSelected",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"useRowsChangeByRowOpereate",{enumerable:!0,get:function(){return u.useRowsChangeByRowOpereate}}),Object.defineProperty(t,"useRowsChangedAndSelectStateunchanged",{enumerable:!0,get:function(){return u.useRowsChangedAndSelectStateunchanged}}),Object.defineProperty(t,"useSavePersonaliedCache",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"useSetFocuedCell",{enumerable:!0,get:function(){return l.useSetFocuedCell}}),Object.defineProperty(t,"useSetOperationColLockStatus",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(t,"useShortCutSettingChange",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(t,"useSubGridAutoSizeColumnWidth",{enumerable:!0,get:function(){return i.useSubGridAutoSizeColumnWidth}}),Object.defineProperty(t,"useTableFocus",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(t,"useTableGlobalConfig",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"useTablePoster",{enumerable:!0,get:function(){return E.useTablePoster}}),Object.defineProperty(t,"useTableRendered",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"useTableSize",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(t,"useTableTracking",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(t,"useThemeChange",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(t,"useTreeVirtualDataLoaded",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(t,"useUpdateDataOptions",{enumerable:!0,get:function(){return u.useUpdateDataOptions}}),Object.defineProperty(t,"useValidate",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(t,"useWindowClick",{enumerable:!0,get:function(){return O.default}});var o=k(r(174176)),i=r(225732),a=r(142116),l=r(97584),u=r(52260),s=k(r(583960)),d=k(r(325620)),c=k(r(212424)),f=k(r(958316)),g=k(r(580004)),p=k(r(94224)),y=M(r(683464)),m=k(r(566892)),v=k(r(820204)),h=k(r(603448)),b=k(r(838816)),C=M(r(20616)),w=r(776788),S=r(563616),E=r(103364),I=k(r(823696)),R=k(r(792973)),T=k(r(391923)),O=k(r(202864)),P=k(r(717320)),D=k(r(466012)),A=k(r(328948));function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_=function(e){return e?r:t})(e)}function M(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=_(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}function k(e){return e&&e.__esModule?e:{default:e}}},225732:function(e,t,r){"use strict";r(697060),r(505684),r(323784),r(693917),r(976896),r(721300),r(969e3),r(606200),r(534440),r(76152),r(633768),r(690512),Object.defineProperty(t,"__esModule",{value:!0}),t.autoSizeColumns=R,t.getGreedyPreferredWidthsMap=_,t.useAutoSizeColumnWidth=function(e){var t,r,o,l=e.readyed,s=e.getTableConfigImmediately,g=e.containerEleRef,p=e.getInternalEventService,y=e.getInstance,m=e.getTableOptions,v=e.model,h=e.parentModel,b=(0,n.useRef)({});(0,n.useEffect)((function(){if(l){var e=p(),t=(0,d.personalizedColumnWidthGetter)({model:v,getTableOptions:m}),r=s(),n={getPersonalizedColumnWidthByCode:t,getTableConfigImmediately:s,containerEleRef:g,getTableOptions:m,getInstance:y,getInternalEventService:p},o=function(e){var t=e.params,r=t.direction,o=t.top,i=t.left,a=m(),l=a.getColumnDraging();if((0,f.isEnableAutoSizeColumns)({getTableConfigImmediately:s})&&!l&&("vertical"===r||"horizontal"===r)){a.setTableScrollOffset({top:o,left:i});P(S(S(S({},t),n),{},{hadRenderColRef:b,isBreak:function(){var e,t;return(null===(e=a.getTableTableScrollOffset())||void 0===e?void 0:e.top)!==o||(null===(t=a.getTableTableScrollOffset())||void 0===t?void 0:t.left)!==i}}))}},h=function(e){var t=e.params,r=t.targetColumns,o=t.trigger,a=I.includes(o),l=o===i.CONTEXT_MENU||"columnResizedDoubleClick"===o||void 0;(0,f.isEnableAutoSizeColumns)({getTableConfigImmediately:s,trigger:o})?R(S(S({},n),{},{targetColumns:r,ignoreMaxWidth:a,ignoreEditableColumn:l,trigger:o})):M({autoSizeColumnsParams:n,getInstance:y,getTableConfigImmediately:s})},C=function(){setTimeout((function(){if(e.addEventListener(a.KD_TABLE_EVENT_NAMES.scroll,o),(0,f.isEnableAutoSizeColumns)({getTableConfigImmediately:s})){var t=(0,c.getAllDisplayColumns)(r.getColumns(),g.current);R(S(S({},n),{},{allDisplayCols:t})),function(e,t){if(0===Object.keys(e.current).length){var r=function(t){e.current[t.code]=!0};(0,u.iterateColumns)(t,r)}}(b,t)}else M({autoSizeColumnsParams:n,getInstance:y,getTableConfigImmediately:s})}),0)};return e.addEventListener(a.KD_TABLE_EVENT_NAMES.baseTableRendered,C,!1,!0),e.addEventListener(a.KD_TABLE_EVENT_NAMES.doAutoSizeColumns,h),function(){e.removeEventListener(a.KD_TABLE_EVENT_NAMES.baseTableRendered,C),e.removeEventListener(a.KD_TABLE_EVENT_NAMES.scroll,o),e.removeEventListener(a.KD_TABLE_EVENT_NAMES.doAutoSizeColumns,h)}}}),[l,null===(t=v.meta.get("columns"))||void 0===t?void 0:t.hashCode(),null==h||null===(r=h.getDataProperty(["value","rows"]))||void 0===r?void 0:r.hashCode(),null===(o=v.getDataProperty(["value","rows"]))||void 0===o?void 0:o.hashCode()])},t.useSubGridAutoSizeColumnWidth=function(e){var t,r=e.readyed,o=e.getTableConfigImmediately,l=e.getInternalEventService,u=e.getInstance,c=e.getTableOptions,g=e.model,p=(0,n.useRef)({});(0,n.useEffect)((function(){if(r){var e=l(),t=(0,d.personalizedColumnWidthGetter)({model:g,getTableOptions:c});if(o().subGridConfig){var n=function(e){var t=o(),r=u(),n=t.subGridConfig;return{columnResizeMode:t.columnResizeMode,seqKey:t.seqKey,getColumns:n.getColumns,setColumns:function(t){r.controller.setSubGridColumns({columns:t,mainEntityPrimaryKeyId:e})}}},y={getPersonalizedColumnWidthByCode:t,getTableOptions:c,getInstance:u,getInternalEventService:l,getExpectedFullWidth:function(){return(0,s.getExpectedFullWidthOfSubGrid)(c())}},m=function(e){var t=e.params,r=t.direction,a=(t.top,t.containerEleRef),l=t.mainEntityPrimaryKeyId,u=o(),s=u.autoHeight;u.columnResizeMode!==i.TABLE_COLUMN_RESIZE_MODE.adaptive||s||"vertical"!==r&&"horizontal"!==r||P(S(S(S({},t),y),{},{containerEleRef:a,getTableConfigImmediately:function(){return n(l)},hadRenderColRef:p}))},v=function(t){var r=t.params,i=r.containerEleRef,l=r.mainEntityPrimaryKeyId;e.removeEventListener(a.KD_TABLE_EVENT_NAMES.subGridScroll,m),setTimeout((function(){e.addEventListener(a.KD_TABLE_EVENT_NAMES.subGridScroll,m),(0,f.isEnableAutoSizeColumns)({getTableConfigImmediately:o})&&R(S(S({},y),{},{containerEleRef:i,getTableConfigImmediately:function(){return n(l)}}))}),0)},h=function(e){var t=e.params,r=t.targetColumns,a=t.trigger,l=t.containerEleRef,u=t.mainEntityPrimaryKeyId;if((0,f.isEnableAutoSizeColumns)({getTableConfigImmediately:o,trigger:a})){var s=a===i.CONTEXT_MENU;R(S(S({},y),{},{containerEleRef:l,getTableConfigImmediately:function(){return n(u)},targetColumns:r,ignoreMaxWidth:s}))}};return e.addEventListener(a.KD_TABLE_EVENT_NAMES.subGridRendered,v),e.addEventListener(a.KD_TABLE_EVENT_NAMES.doSubTableAutoSizeColumns,h),function(){e.removeEventListener(a.KD_TABLE_EVENT_NAMES.subGridRendered,v),e.removeEventListener(a.KD_TABLE_EVENT_NAMES.subGridScroll,m),e.removeEventListener(a.KD_TABLE_EVENT_NAMES.doSubTableAutoSizeColumns,h)}}}}),[r,null===(t=g.getDataProperty(["subMeta"]))||void 0===t||null===(t=t.get("columns"))||void 0===t?void 0:t.hashCode()])},r(182320),r(909112),r(360776),r(9692),r(622676),r(233696),r(443616),r(743924),r(835164),r(492948),r(205960),r(70472),r(846428),r(76124),r(387912),r(497448),r(660824),r(78504),r(997308),r(977864),r(86744);var n=r(795520),o=r(790832),i=r(480632),a=r(94580),l=r(549872),u=r(633016),s=r(559016),d=r(656808),c=r(111700),f=r(994432),g=r(312020),p=r(273248),y=r(552472);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||b(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e){return function(e){if(Array.isArray(e))return C(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||b(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){if(e){if("string"==typeof e)return C(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?C(e,t):void 0}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e,t,r){var n;return n=function(e,t){if("object"!=m(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==m(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var I=[i.CONTEXT_MENU,"columnResizedDoubleClick","rowExpand"];function R(e){var t,r=e.getTableConfigImmediately,n=e.allDisplayCols,o=e.targetColumns,l=e.ignoreMaxWidth,d=e.ignoreEditableColumn,g=e.containerEleRef,y=e.getPersonalizedColumnWidthByCode,m=e.getTableOptions,v=e.getInstance,b=e.trigger,C=e.getInternalEventService,w=e.getExpectedFullWidth,E=C(),I="afterDrag"!==b,R=r(),P=R.seqKey,D=R.columnResizeMode,A=(R.autoHeight,R.titleAutoHeight,m()),M=v(),k=A.getPersonalizedColumnWidth(),L=R.getColumns();n=n||(0,c.getAllDisplayColumns)(L,g.current);var j=o||n,N=M.controller.getRows().length;0===N&&(j=j.filter((function(e){var t=e.code;return void 0===y(t,i.PERSONALIZED_AUTOSIZE_COLUMN_WIDTH)})));var V=null===(t=v().controller)||void 0===t?void 0:t.getExpandColCode(),K=O({columns:j,getPersonalizedColumnWidthByCode:y,colLockInfo:m().getColLockInfo(),ignoreEditableColumn:d,ignoreMaxWidthColCodes:[V]}).autoSizedColumns;if(0!==K.length){var F=A.getTableSize().width,x=A.getScrollBarSize().width,G=function(e){var t=[];return(0,u.iterateParentsColumns)(e,(function(e){var r=e.code;t.push({colId:r,maxWidth:null})})),t}(L),B=T({autoSizedColumns:[].concat(h(K),h(G)),containerEleRef:g,ignoreMaxWidth:l}),H=new Map(B.map((function(e){return[e.colId,e.width]})));B=function(e,t){var r=[],n=function e(r){if(!(0,u.isLeafNode)(r)){var n=function(r){return r.reduce((function(r,n){return n.hide?r:r+((0,u.isLeafNode)(n)?t.get(n.code):e(n))}),0)},o=n(r.children),i=t.get(r.code);if(i>o){var a=0;(0,u.iterateColumns)(r.children,(function(e){a=e.hide?a:a+1}));var l=Math.ceil((i-o)/a);(0,u.iterateColumns)(r.children,(function(e){t.set(e.code,t.get(e.code)+l)}))}return Math.max(i,o)}};return e.forEach((function(e){return n(e)})),(0,u.iterateColumns)(e,(function(e){var n=e.code;void 0!==t.get(n)&&r.push({width:t.get(n),colId:n})})),r}(L,H),0===N&&(B=B.map((function(e){var t=e.width;return e.colId!==P&&(e.width=t+p.EMPTY_DATA_COL_PADDING),e})));var W=_({allDisplayCols:n,preferredWidthsMap:new Map(B.map((function(e){return[e.colId,e.width]}))),seqKey:P,tableViewWidth:F,scrollBarWidth:x,getPersonalizedColumnWidthByCode:y,treeExpandcolCode:V});L=function e(t){return t.map((function(t){if(!(0,u.isLeafNode)(t))return t.children=e(t.children),t;var r=t.code,n=W.get(r),o=(0,f.getOriginColumnCode)(r);return n>0&&(k[i.PERSONALIZED_AUTOSIZE_COLUMN_WIDTH][o]=n,I)?S(S({},t),{},{width:n}):t}))}(L),D===i.TABLE_COLUMN_RESIZE_MODE.fit&&(L=(0,s.getFitedTableSizeColumns)({columns:L,getTableOptions:m,getTableConfigImmediately:r,containerWidth:null==w?void 0:w()})),A.setPersonalizedColumnWidth(k),I&&(R.setColumns(L),E.dispatchEvent({type:a.KD_TABLE_EVENT_NAMES.afterColumnAutoSize,params:{trigger:i.CONTEXT_MENU}}))}}function T(e){var t=e.autoSizedColumns,r=e.containerEleRef,n=e.ignoreMaxWidth;return(0,l.calculatePreferredColumnsWidth)({columns:t,ignoreMaxWidth:n,selector:{headerCell:function(e){var t=(0,y.isIncludeNewlineCharacter)(e)?'[data-escap-code="'.concat((0,y.getMatchEscapeNewlineCharacteStr)(e),'"]'):'[data-code="'.concat(e,'"]');return".kd-table-header .kd-table-header-cell".concat(t)},bodyCell:function(e){var t=(0,y.isIncludeNewlineCharacter)(e)?'[data-escap-code="'.concat((0,y.getMatchEscapeNewlineCharacteStr)(e),'"]'):'[data-code="'.concat(e,'"]');return".kd-table-row:not([data-row-detail-key]) .kd-table-cell".concat(t)},appendContainer:function(){return".kd-table-body"}},eGridContainer:r.current})}function O(e){var t=e.columns,r=e.getPersonalizedColumnWidthByCode,n=e.ignoreEditableColumn,o=e.colLockInfo,a=e.ignoreMaxWidthColCodes,l=[],s=[];return(0,u.iterateColumns)(t,(function(e){(0,f.shouldAutoSizedColumn)({column:e,ignoreEditableColumn:n,colLockInfo:o})&&(s.push(e),l.push(function(e){var t=e.column,r=e.getPersonalizedColumnWidthByCode,n=e.ignoreMaxWidthColCodes,o=t.code,a=t.width,l=t.extendParams,u=t.minWidth,s=l.metaColWidth;return{colId:o,maxWidth:r?r(o,i.PERSONALIZED_COLUMN_MAX_WIDTH):null,preWidth:a,metaColWidth:s,minWidth:u,isIgnoreMaxWidth:null==n?void 0:n.includes(o)}}({column:e,getPersonalizedColumnWidthByCode:r,ignoreMaxWidthColCodes:a})))})),{autoSizedColumns:l,autoSizedOriginColumns:s}}var P=(0,o.debounce)((function(e){!function(e){var t,r=e.direction,n=e.getTableConfigImmediately,o=e.getTableOptions,a=e.containerEleRef,l=e.hadRenderColRef,d=e.getPersonalizedColumnWidthByCode,g=e.isBreak,p=e.getInstance,y=n(),m=y.getColumns(),b=(0,c.getAllDisplayColumns)(m,a.current),C=null===(t=p().controller)||void 0===t?void 0:t.getExpandColCode(),w=O({columns:b,getPersonalizedColumnWidthByCode:d,colLockInfo:o().getColLockInfo(),ignoreMaxWidthColCodes:[C]}),S=w.autoSizedColumns,E=w.autoSizedOriginColumns;if(0===S.length)return;var I=new Map,R=function(e){var t=v(T({autoSizedColumns:[e],containerEleRef:a}),1)[0];if(t){var n=t.colId,o=t.width,i=o>0&&o>e.preWidth;if("vertical"===r)i&&I.set(n,o);else if("horizontal"===r){if(l.current[n])i&&I.set(n,o);else o>0&&o!==e.preWidth&&I.set(n,o),l.current[n]=!0}}};new Promise((function(e){(0,u.piecewiseIterator)(h(S),R,{resolve:e,isBreak:g})})).then((function(e){if("finish"===e.status){var t=o(),r=t.getPersonalizedColumnWidth();E.forEach((function(e){var t=e.code,n=I.get(t),o=(0,f.getOriginColumnCode)(t);n>0&&(e.width=r[i.PERSONALIZED_AUTOSIZE_COLUMN_WIDTH][o]=n)})),y.columnResizeMode===i.TABLE_COLUMN_RESIZE_MODE.fit&&(m=(0,s.getFitedTableSizeColumns)({columns:m,getTableOptions:o,getTableConfigImmediately:n})),t.setPersonalizedColumnWidth(r),y.setColumns(m)}}))}(e)}),200);var D=64,A=.7;function _(e){var t=e.allDisplayCols,r=e.preferredWidthsMap,n=e.seqKey,o=e.tableViewWidth,a=e.scrollBarWidth,l=e.getPersonalizedColumnWidthByCode,s=(e.treeExpandcol,e.treeExpandcolCode);if(o&&r.size>0){var d=Math.floor(o-2-a),c={visibleColumnsWidthCount:0,metaColWidths:{}};(0,u.iterateColumns)(t,(function(e){var t=e.code,n=e.width,o=e.extendParams,i=r.get(t)||n;c.visibleColumnsWidthCount+=i,c.metaColWidths[t]=(null==o?void 0:o.metaColWidth)||0}));var f=Math.ceil(d*A);if(c.visibleColumnsWidthCount<f){var p=r.get(n),y=function(e){var t=e.length,r=e.isExsitSeqCol;r&&(t-=1);return t}({length:r.size,isExsitSeqCol:p});if(y<1)return r;var m=Math.ceil((f-c.visibleColumnsWidthCount)/y);m=m>D?D:m;var v=new Map;return r.forEach((function(e,t){var r=e;if(![n,s].includes(t)){var o=(l(t,i.PERSONALIZED_COLUMN_MAX_WIDTH)||(0,g.getMaxAutoWidth)({metaWidths:c.metaColWidths,id:t}))+D;if(r<o){var a=e+m;r=a<o?a:o}}v.set(t,r)})),v}}return r}function M(e){var t=e.autoSizeColumnsParams,r=e.getInstance,n=(0,e.getTableConfigImmediately)(),o=r();if(n.treeTable){var i=(0,f.getColumnByCode)(o.controller.getExpandColCode(),n.columns);R(S(S({},t),{},{targetColumns:[i]}))}}},566892:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(305092),r(743924),r(606200),r(534440),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,r,n,y,m,v,h=e.readyed,b=e.model,C=e.parentModel,w=e.containerEleRef,S=e.getTableConfigImmediately,E=e.getTableOptions,I=e.getInstance,R=e.getInternalEventService,T=e.getTableApi,O=(0,o.useRef)(!1);(0,o.useEffect)((function(){var e=I(),t=E(),r=S(),n=T().getCellSpan,o=(0,l.getColumns)(b,C,{getTableOptions:E,mergeModel:e.mergeModel,getTableConfigImmediately:S,getInternalEventService:R,handleCellClick:(0,c.createCellClickHandler)(T,I),handleCellMouseDown:(0,c.createCellMouseDownHandler)(T,I,t),getCellClassName:(0,c.getCellClassNameWrapper)({getTableConfigImmediately:S,getTableOptions:E,getInstance:I}),getCellSpan:n});if(h){if(void 0===r.gridType){var y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce((function(e,t){var r;return null!==(r=t.extendParams)&&void 0!==r&&null!==(r=r.editor)&&void 0!==r&&r.mi&&e.push(t.code),e}),[])}(r.getColumns());(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return null!=(0,p.find)(e,(function(e){var r;if((null===(r=e.extendParams)||void 0===r||null===(r=r.editor)||void 0===r||!r.mi)&&t.includes(e.code))return!0}))})(o,y)&&((0,a.removeTableValidateMsg)({pageId:r.pageId,tableId:r.id}),(0,a.finishTableValidate)(r.pageId,r.id))}var m=function(){(null==r?void 0:r.getMaxLevel())>1&&w.current.classList.add("kd-table-with-column-groups"),(0,f.defineTreeTableColumns)(o,{tableConfig:r,getInstance:I,getTableOptions:E}),(0,u.handleRepeatedColumns)({columns:o,model:b,parentModel:C,getTableOptions:E,getInstance:I}),(0,u.repeatedColumnTracking)({hadTrackingOfRepeatedColumnRef:O,getTableOptions:E,getTableConfigImmediately:S}),r.setColumns(r.columnResizeMode===s.TABLE_COLUMN_RESIZE_MODE.adaptive?o:(0,d.getFitedTableSizeColumns)({columns:o,getTableOptions:E,getTableConfigImmediately:S})),e.mergeModel.updateBorderCols(o,b.getMetaProperty("columns")||(0,i.List)(),r.seqKey),(0,g.setRightBorderCols)({columns:o,getTableOptions:E})};t.getCustomSchemaMap().size?(0,u.initAllCustomColumns)(S(),E()).then(m,(function(e){console.warn("[kd-table] 存在自定义控件但加载失败：".concat(e)),m()})):m()}}),[h,null===(t=b.meta.get("columns"))||void 0===t?void 0:t.hashCode(),null==C||null===(r=C.getDataProperty("colVisb"))||void 0===r?void 0:r.hashCode(),null===(n=b.getDataProperty("colVisb"))||void 0===n?void 0:n.hashCode(),null===(y=b.getDataProperty("colCtrl"))||void 0===y?void 0:y.hashCode(),null==C||null===(m=C.getDataProperty("colLock"))||void 0===m?void 0:m.hashCode(),null==b||null===(v=b.getDataProperty("colLock"))||void 0===v?void 0:v.hashCode(),null==b?void 0:b.getMetaProperty("hasOperateIcon")])},r(443616),r(492948),r(387912),r(660824);var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=y(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(795520)),i=r(891052),a=r(794432),l=r(773408),u=r(994432),s=r(480632),d=r(559016),c=r(671840),f=r(564616),g=r(741864),p=r(633016);function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(y=function(e){return e?r:t})(e)}},142116:function(e,t,r){"use strict";r(697060),r(969e3),r(606200),r(534440),r(76152),r(76124),Object.defineProperty(t,"__esModule",{value:!0}),t.useContextMenu=function(e){var t=e.containerEleRef,r=e.getTableConfigImmediately,o=e.getTableOptions,i=e.getInternalEventService,a=e.getInstance,l=e.getActionByKey,u=e.getTableApi,s=e.getNewColumns,d=e.getFilterRequestParams;(0,n.useEffect)((function(){var e=r();e.setContextMenu({menuClassName:"kd-cq-context-menu",getContextMenuItems:O({containerEleRef:t,getTableOptions:o,getInternalEventService:i,getTableConfigImmediately:r,getInstance:a,getActionByKey:l,getTableApi:u,getNewColumns:s,getFilterRequestParams:d})});var n=function(e){var t=a().controller.getEditCell();t&&-1!==t.rowKey&&e.stopPropagation()};return t.current&&t.current.addEventListener("contextmenu",n,!0),function(){e.setContextMenu(null),t.current&&t.current.removeEventListener("contextmenu",n,!0)}}),[])},r(182320),r(909112),r(360776),r(9692),r(622676),r(233696),r(743924),r(205960),r(976896),r(846428),r(387912),r(690512),r(764840),r(78504),r(997308),r(977864);var n=r(795520),o=r(891052),i=r(331428),a=r(94580),l=r(738704),u=r(52800),s=r(816880),d=r(480632),c=r(868256),f=r(674260),g=r(48764),p=r(926516),y=r(281376),m=r(924432),v=r(660080),h=r(552472),b=r(633016),C=r(994432);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){I(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function I(e,t,r){var n;return n=function(e,t){if("object"!=w(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==w(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var R=function(e){return function(t,r){var n=e(),o=n.pageId,i=n.id,a=n.parentId,l=n.type,u=n.gridType,d=(0,s.getGridTrackingType)({type:l,gridType:u});(0,s.buriedPointOfContextMenu)({pageId:o,controlId:a||i,controlType:d,methodKey:t,methodName:r})}},T={className:"kd-cq-context-menu-item"},O=function(e){var t=e.containerEleRef,r=e.getTableOptions,n=e.getInternalEventService,s=e.getTableConfigImmediately,w=e.getInstance,S=e.getActionByKey,O=e.getTableApi,A=e.getNewColumns,_=e.getFilterRequestParams;return function(e){var M,k,L,j,N,V=e.record,K=e.column,F=e.value,x=e.event,G=e.api,B=r(),H=s(),W=w(),z=B.getMetaOptionsProperty("suppressCopy"),U=(H.autoHeight,H.rowDetailOptions),q=H.gridType,Y=H.pageId,Z=H.id,X=H.parentId,$=x?function(e){var t=e.target,r=t;for(;r;){var n;if(null!==(n=r.classList)&&void 0!==n&&n.contains("kd-table-wrapper"))return r;r=r.parentNode}return null}(x):null,J=x?function(e){var t=e.target,r=t;for(;r;){var n;if(null!==(n=r.classList)&&void 0!==n&&n.contains("kd-table-cell"))return r;r=r.parentNode}return null}(x):null,Q=J&&J.getAttribute("data-rowindex")||0,ee=null==(M=$)||null===(k=M.parentNode)||void 0===k?void 0:k.classList.contains("kd-sub-table"),te=((null==V?void 0:V[d.ROW_DETAIL_META_KEY])&&null===K&&!ee&&(null==U||U.type,d.ROW_DETAIL_TYPES.bill),null===(L=(j=window).getSelection)||void 0===L||null===(L=L.call(j))||void 0===L||null===(N=L.toString)||void 0===N?void 0:N.call(L)),re=E(E({},T),{},{name:(0,i.getLangMsg)("grid.key0042"),action:function(){return function(e){var t=!1;(0,m.setNewTable)(e,t),(0,f.setData)(c.KEY_USE_TABLE_CHANGED,{gridType:e,isUseNewTable:t})}(q)}}),ne=(U||{}).mainEntityPrimaryKeyFieldName,oe=ee?null==V?void 0:V[ne]:"",ie=[E(E({},T),{},{name:(0,i.getLangMsg)("grid.key0002"),action:function(){ee?function(e){var t;null==e||null===(t=e.setFilters)||void 0===t||t.call(e,[])}(G):function(e){var t=e.getTableConfigImmediately,r=e.getInstance,n=e.getActionByKey,o=e.getTableOptions,i=e.getTableApi,a=e.getFilterRequestParams,l=r(),u=l.controller.getFilters();if(null==u||0===u.length)return;var s=t(),c=s.pageId,f=s.id,g=s.parentId,p=s.filterType,m=o(),v=m.getSumWithFilter();if(l.controller.setFilters([]),v){n("postFilterData")({pageId:c,key:f},[[{rk:[],reset:!0}]])}if(p===d.FILTER_TYPES.service){var h=n("invokeControlMethodOnly");h&&u.forEach((function(e){var t=a((0,y.createResetFilterValue)(e.code));t.length&&h({pageId:c,key:g||f},"getGridDataByFilter",t)}))}else i().execFilter([])}({getTableConfigImmediately:s,getInstance:w,getActionByKey:S,getTableOptions:r,getTableApi:O,getFilterRequestParams:_}),R(s)("clearFilters",(0,i.getLangMsg)("grid.key0002"))}}),E(E({},T),{},{name:(0,i.getLangMsg)("grid.key0003"),action:function(){P({getInternalEventService:n,targetColumns:[K],isSubTable:ee,api:G,mainEntityPrimaryKeyId:oe}),R(s)("autoSizeColumn",(0,i.getLangMsg)("grid.key0003"))}}),E(E({},T),{},{name:(0,i.getLangMsg)("grid.key0004"),action:function(){P({getInternalEventService:n,isSubTable:ee,api:G,mainEntityPrimaryKeyId:oe}),R(s)("autoSizeAllColumns",(0,i.getLangMsg)("grid.key0004"))}}),E(E({},T),{},{name:(0,i.getLangMsg)("grid.key0046"),action:function(){var e,t=s(),u=t.pageId,c=t.parentId,f=t.id,g=t.modelKey,y=(null===(e=(0,l.getPageUIState)(u))||void 0===e?void 0:e.get(g))||new o.Map;if(y.size){var m=G?G.getColumns():t.getColumns();y=function(e,t,r,n,o){var i=(0,p.convertToJS)(r.get(d.PERSONALIZED_COLUMN_WIDTH)),a=(0,p.convertToJS)(r.get(d.PERSONALIZED_COLUMN_MAX_WIDTH)),u=(0,p.convertToJS)(r.get(d.PERSONALIZED_LOCK_COLUMN_WIDTH)),s=[];(0,b.iterateColumns)(o,(function(e){return s.push(e.code)})),i=i?(0,p.deleteObjectProps)(i,s):i,a=a?(0,p.deleteObjectProps)(i,s):a,u=u?(0,p.deleteObjectProps)(i,s):u,(0,l.setPageUIState)({pageId:e,key:t},[d.PERSONALIZED_COLUMN_WIDTH],i),(0,l.setPageUIState)({pageId:e,key:t},[d.PERSONALIZED_COLUMN_MAX_WIDTH],a),(0,l.setPageUIState)({pageId:e,key:t},[d.PERSONALIZED_LOCK_COLUMN_WIDTH],u);var c=n.getPersonalizedColumnWidth();return n.setPersonalizedColumnWidth(I(I(I({},d.PERSONALIZED_COLUMN_WIDTH,i||{}),d.PERSONALIZED_AUTOSIZE_COLUMN_WIDTH,(0,p.deleteObjectProps)(c[d.PERSONALIZED_AUTOSIZE_COLUMN_WIDTH],s)),d.PERSONALIZED_COLUMN_MAX_WIDTH,a||{})),r.set(d.PERSONALIZED_COLUMN_WIDTH,i).set(d.PERSONALIZED_COLUMN_MAX_WIDTH,a).set(d.PERSONALIZED_LOCK_COLUMN_WIDTH,u)}(u,f,y,r(),m),S("invokeControlMethodOnly")({pageId:u,key:c||g},"saveGridViewWidth",[I({},g,y.toJS())]);var v="resetColumnsWidth";if(ee){var h=t.subGridConfig;(0,C.isEnableAutoSizeColumns)({getTableConfigImmediately:s})?D(n(),{trigger:v,targetColumns:m,containerEleRef:G.getContainerEleRef(),mainEntityPrimaryKeyId:oe}):w().controller.setSubGridColumns({columns:h.getColumns(),mainEntityPrimaryKeyId:oe})}else t.setColumns(A()),n().dispatchEvent({type:a.KD_TABLE_EVENT_NAMES.doAutoSizeColumns,params:{trigger:v}});R(s)("resetColumnsWidth",(0,i.getLangMsg)("grid.key0046"))}}}),E(E({},T),{},{name:(0,i.getLangMsg)("grid.key0060"),action:function(){var e=S("showGridHelp");e&&e({pageId:Y,key:X||Z},[])}})],ae=function(e){var n=r(),o=w(),i=G?G.getCellRanges():n.getCellRanges(),a=G?G.getRowDatas():o.controller.getRowDatas()||[],l=G?G.getFooterDataSource():o.controller.getFooterDataSource()||[],d=$||t.current,c=s(),f=c.rowKey,p=c.localeId,y=c.defaultLocalId;if(te)(0,u.copyValueToClipboard)(te||"");else{var m=K.code,b=K.type,S=(0,g.isRowPinned)({record:V,rowKey:f});if((0,v.isCellInRanges)(i,Q,m,S)){var E=G?G.getDisplayFlatColumns():c.getDisplayFlatColumns(),I=(0,v.getCellRangesColumnsCodeSet)(i),R=(0,C.filterColumnsInAnyColsRanges)(E,I),T=e?(0,u.getCopyHeaderData)({columns:R,cellRangeColumnsCodeSet:I}):void 0;if((0,u.copyCellRangesValue)(i,{displayColumns:E,rowDatas:a,footerDataSource:l,rowKey:f,localeId:p,defaultLocalId:y,haederData:T}),i.forEach((function(e){(0,u.addTableCellRangeCopyAnimation)({cellRange:e,tableDom:d})})),e){var O=E.filter((function(e){return I.has(e.code)}));(0,u.addTableHeaderCopyAnimation)({tableDom:d,columns:O})}}else{var P=S?".kd-table-footer":".kd-table-body",D=(0,h.isIncludeNewlineCharacter)(m)?'[data-escap-code="'.concat((0,h.getMatchEscapeNewlineCharacteStr)(m),'"]'):'[data-code="'.concat(m,'"]'),A="".concat(P,' .kd-table-cell[data-rowindex="').concat(Q,'"]').concat(D),_=d.querySelector(A);(0,u.addTableCellCopyAnimation)(_),e&&(0,u.addTableHeaderCopyAnimation)({tableDom:d,columns:[K]});var M=e?(0,u.getCopyHeaderData)({columns:[K],cellRangeColumnsCodeSet:new Set([K.code])}):void 0;(0,u.copyCellValueToClipboard)({row:V,value:F,type:b,column:K,localeId:p,defaultLocalId:y,rowPinned:S,haederData:M})}}},le=E(E({},T),{},{name:(0,i.getLangMsg)("grid.key0001"),action:function(){ae(),R(s)("copy",(0,i.getLangMsg)("grid.key0001"))}}),ue=E(E({},T),{},{name:(0,i.getLangMsg)("grid.key0061"),action:function(){ae(!0),R(s)("copyWithHeader",(0,i.getLangMsg)("grid.key0061"))}}),se=G?G.getRowDatas():W.controller.getRowDatas()||[];return!z&&se.length>0&&(!te&&ie.unshift(ue),ie.unshift(le)),((null==x?void 0:x.ctrlKey)||(null==x?void 0:x.metaKey))&&!ee&&ie.push(re),ie}};function P(e){var t=e.getInternalEventService,r=e.targetColumns,n=e.isSubTable,o=e.api,i=e.mainEntityPrimaryKeyId,l=t(),u="contextMenu";n?D(l,{trigger:u,targetColumns:r||(null==o?void 0:o.getColumns()),containerEleRef:o.getContainerEleRef(),mainEntityPrimaryKeyId:i}):function(e,t){var r=t.trigger,n=t.targetColumns;e.dispatchEvent({type:a.KD_TABLE_EVENT_NAMES.doAutoSizeColumns,params:{trigger:r,targetColumns:n}})}(l,{trigger:u,targetColumns:r})}function D(e,t){var r=t.trigger,n=t.targetColumns,o=t.containerEleRef,i=t.mainEntityPrimaryKeyId;e.dispatchEvent({type:a.KD_TABLE_EVENT_NAMES.doSubTableAutoSizeColumns,params:{trigger:r,targetColumns:n,containerEleRef:o,mainEntityPrimaryKeyId:i}})}},52260:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.useDataTimestampUpdate=function(e){var t=e.parentModel,r=e.model,l=e.getTableConfigImmediately,u=e.getTableOptions,c=e.getActionByKey,f=e.getInstance,g=e.getTableApi,p=(e.updateFoldFooterRowsStatus,(0,n.useRef)(!1));(0,n.useEffect)((function(){var e=t||r,n=e.pageId,i=e.key,y=l();if(y.filterType!==s.FILTER_TYPES.service){var m=f().controller.getFilters();if((null==m?void 0:m.length)>0)g().execFilter()}var v=e.getDataValue();if(y.isScrollLoad&&v){if("VIEWGRID"===y.gridType){var h=d(r,t,{getTableConfigImmediately:l});(0,a.updateInstanceModelWhenDataChanged)(h,{getInstance:f,getTableConfigImmediately:l,getTableOptions:u,model:r})}(0,a.resetScrollLoadOptions)({getTableOptions:u,getTableConfigImmediately:l,getActionByKey:c,model:r})}void 0!==y.gridType&&(0,o.clearAllGridPlainText)({pageId:n,gridId:i}),p.current=!0}),[null==t?void 0:t.getDataProperty([i.TIME_STAMP_FRESH]),r.getDataProperty([i.TIME_STAMP_FRESH])])},t.useFmtInfoChanged=function(e){var t,r,o=e.model,i=e.parentModel,a=e.forceUpdate;(0,n.useEffect)((function(){a()}),[null==i||null===(t=i.getDataProperty("fmtinfo"))||void 0===t?void 0:t.hashCode(),null==o||null===(r=o.getDataProperty("fmtinfo"))||void 0===r?void 0:r.hashCode()])},t.useRowsChangeByRowOpereate=function(e){var t=e.model,r=e.getTableApi,o=e.getInstance;(0,n.useEffect)((function(){if(t.getDataProperty([u.ROW_CHANGE_FLAG])){var e=o().controller.getFilters();if((null==e?void 0:e.length)>0)r().execFilter()}}),[t.getDataProperty([u.ROW_CHANGE_FLAG])])},t.useRowsChangedAndSelectStateunchanged=function(e){var t,r,o=e.parentModel,a=e.instance,l=(0,n.useRef)(),u=(0,n.useRef)();(0,n.useEffect)((function(){var e;if(o){var t=null===(e=o.getDataProperty(["slctState"]))||void 0===e?void 0:e.hashCode(),r=o.getDataProperty([i.TIME_STAMP_FRESH]);l.current===t&&void 0!==u.current&&u.current!==r&&a.current.controller.setSelectedRows([]),u.current=r}}),[null==o||null===(t=o.getDataProperty(["value","rows"]))||void 0===t?void 0:t.hashCode()]),(0,n.useEffect)((function(){var e;o&&(l.current=null==o||null===(e=o.getDataProperty(["slctState"]))||void 0===e?void 0:e.hashCode())}),[null==o||null===(r=o.getDataProperty(["slctState"]))||void 0===r?void 0:r.hashCode()])},t.useUpdateDataOptions=function(e){var t,r,o,i,a=e.model,l=e.parentModel,u=e.getTableOptions,s=e.dataValueTimestamp;(0,n.useEffect)((function(){u().setDataOptions(a,l)}),[s,null==l||null===(t=l.getDataProperty("colLock"))||void 0===t?void 0:t.hashCode(),null==a||null===(r=a.getDataProperty("colLock"))||void 0===r?void 0:r.hashCode(),null==l||null===(o=l.getDataProperty("fmtinfo"))||void 0===o?void 0:o.hashCode(),null==a||null===(i=a.getDataProperty("fmtinfo"))||void 0===i?void 0:i.hashCode()])};var n=r(795520),o=r(359844),i=r(545072),a=r(881968),l=r(279872),u=r(273248),s=r(480632),d=l.dataHelper.getDatasource},20616:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.getTableOptions,r=e.getTableApi,i=e.getTableConfigImmediately,C=e.getInstance,w=e.getInternalEventService,S=e.model,E=e.parentModel,I=e.dataValueTimestamp,R=e.containerEleRef,T=e.isRowsChanged,O=e.updateFoldFooterRowsStatus,P=(0,n.useRef)(!1),D=(0,n.useRef)();(0,n.useEffect)((function(){var e=i(),n=C(),I=t(),A=r(),_=w(),M=E||S,k=e.pageId,L=e.id;if(e.setPropertyConfig((0,o.getPropertyConfig)(S,E)),R&&T&&!b(S,E)&&(I.getGridType()===s.GRID_TYPE.listViewGrid||I.getGridType()===s.GRID_TYPE.entryGrid)){var j=R.current.querySelector(".kd-table-body.kd-horizontal-scroll-container");j&&(j.scrollTop=0)}var N=m(S,E,{getTableConfigImmediately:i}),V=S.getDataProperty(["value","queryId"]);(0,a.refreshOpenRowKeys)(N,{getInstance:C,getTableConfigImmediately:i}),(0,a.refreshExpandRowKeys)(N,{getInstance:C,getTableConfigImmediately:i,getTableOptions:t,getInternalEventService:w}),(0,l.largePageRowsTracking)({hadTrackingOfLargePageRowsRef:P,getTableOptions:t,getTableConfigImmediately:i,useModel:M}),A.clearRangeSelection(),I.getGridType()||(0,y.updateEditingCellValue)(N,{getTableApi:r,getInstance:C,getTableConfigImmediately:i});var K=N;if(e.treeTable){var F=I.getShowTreeSeq(),x=I.getMetaOptionsProperty("rowId"),G=!(e.gridType===s.GRID_TYPE.virtualViewGrid&&e.treeTable),B=(0,d.getTreeDataInfo)(N,{rowKey:e.rowKey,seqKey:e.seqKey,showTreeSeq:F,rowId:x,shouldModifySeq:G}),H=B.treeData,W=B.rowKeyMap,z=B.groupMap,U=B.lazyLoadGroup,q=B.parentNodeMap;I.setTreeRowKeyInfo({rowKeyMap:W,groupMap:z,lazyLoadGroup:U,parentNodeMap:q}),K=H}if(!(I.getGridType()===s.GRID_TYPE.virtualViewGrid&&e.isScrollLoad)||D.current!==V){if(n.tableModel.setRows(K),I.getGridType()===s.GRID_TYPE.virtualViewGrid){var Y=(0,g.getVirtualViewMergeRowSpan)(K,{getTableOptions:t,getTableConfigImmediately:i});I.setVirtualViewRowSpan(Y)}D.current=V}(0,f.setPageData)(k,[L,"refreshTiledView"]);var Z=I.getSumWithFilter()?n.tableModel.getFlatDisplayRows():N,X=e.gridType===s.GRID_TYPE.virtualViewGrid?h(S,E):Z.length,$=(0,a.shouldShowFooterRow)({rowCount:X,pageIndex:v(S,E)})?(0,c.getAggregateData)({model:S,parentModel:E,tableOptions:I,dataSource:Z,getTableConfigImmediately:i}):[];!function(e,t,r){if(e.length&&t.length){var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e[e.length-1]||{},r=[];return Object.keys(t).forEach((function(e){t[e]===p.AGGREGATE_CELL_LOADING_VAL&&r.push(e)})),r}(e);(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!e.length)return!1;var r=t[t.length-1]||{};return e.every((function(e){return null!=r[e]&&r[e]!==p.AGGREGATE_CELL_LOADING_VAL}))})(n,t)&&r(!1,!1,!0)}}(n.tableModel.getFooterRowData()||[],$,O),(0,l.setAggregateData)($,n.tableModel,_,I),n.mergeModel.updateMergeModel(e.entities,N,e.rowKey,e.rowDetailOptions.type),n.mergeModel.updateBorderCols(e.columns,S.getMetaProperty("columns")||(0,u.List)(),e.seqKey),(0,g.setRightBorderCols)({columns:e.columns,getTableOptions:t})}),[I])},t.getIsRowsChanged=function(e){var t=e.this$,r=e.parentModel,n=e.model,o=t.current.parentModel||t.current.model,i=r||n;if(o&&i){var a=o.getDataValue(),l=i.getDataValue(),s=(null==a?void 0:a.get("rows"))||(0,u.List)(),d=(null==l?void 0:l.get("rows"))||(0,u.List)();return Math.abs(d.size-s.size)>=C||s.size>0&&function(e,t){for(var r=[],n=0;n<t.size;n++)if(!(0,u.is)(t.get(n,""),e.get(n,""))&&(r.push(n),r.length>C))return!0;return!1}(s,d)}return!1},t.useDataValueChangedMark=function(e){var t=e.this$,r=e.parentModel,n=e.model,o=t.current.dataValueTimestamp,i=t.current.parentModel||t.current.model,a=r||n;i&&a&&(0,u.is)(i.getDataValue(),a.getDataValue())||(o=window.performance.now());return o},r(941408),r(233696),r(76124),r(387912),r(997308);var n=r(795520),o=r(773408),i=r(279872),a=r(48764),l=r(881968),u=(r(94580),r(891052)),s=r(480632),d=r(564616),c=r(360533),f=r(738704),g=r(741864),p=r(273248),y=r(671840),m=i.dataHelper.getDatasource,v=i.dataHelper.getPageIndex,h=i.dataHelper.getDataCount,b=i.dataHelper.isDisableResetScroll,C=10},94224:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.readyed,r=e.parentModel,a=e.getTableConfigImmediately;(0,n.useEffect)((function(){if(t&&r){var e=r.pageId,n=r.key,l=(0,o.addDataChangeListener)(e,[n,"invokeControlMethod",i.GETSUMDATA],(function(){a().setDisableSelectAll(!0)})),u=(0,o.addDataChangeListener)(e,[n,i.SERVERCBLISTENER,i.GETSUMDATA],(function(){a().setDisableSelectAll(!1)}));return function(){l&&l(),l&&u()}}}),[t])};var n=r(795520),o=r(738704),i=r(480632)},776788:function(e,t,r){"use strict";r(182320),r(909112),r(697060),r(505684),r(743924),r(693917),r(976896),r(721300),r(606200),r(387912),r(633768),r(690512),r(78504),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.useEdit=void 0,r(323784);var n=r(795520),o=r(94580),i=r(738704),a=r(663416);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}t.useEdit=function(e,t,r,u,s){var d=(0,n.useRef)({rowKey:-1}),c=l((0,n.useState)({rowIndex:-1}),2),f=c[0],g=c[1],p=l((0,n.useState)({rowKey:-1}),2),y=p[0],m=p[1],v=function(e){var t=e.params.editCell;m(t),s.setEditCell(t),s.setLastEditCell(d.current),d.current=t},h=function(e){var t=e.params.focusCell;g(t),s.setFocusedCell(t)};return(0,n.useEffect)((function(){var t=r.id,n=r.pageId;e.addEventListener(o.KD_TABLE_EVENT_NAMES.setEditCell,v),e.addEventListener(o.KD_TABLE_EVENT_NAMES.setFocusCell,h);var l=(0,i.addDataChangeListener)(n,[t,a.M_GRID_START_EDIT],u);return function(){l()}}),[]),[y,f]}},792973:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.model,r=e.parentModel,l=e.isLocked,u=e.getInstance,s=e.getTableOptions,d=e.getTableConfigImmediately,c=e.getInternalEventService,f=e.getTableApi,g=(0,n.useRef)(t.pageModel.getDynamicFormStatus(t.pageId)),p=(0,n.useRef)(l),y=t.pageModel.getDynamicFormStatus(t.pageId);(0,n.useEffect)((function(){var e=c();y===g.current&&l===p.current||((0,o.resetTableColumnsAndConfig)({model:t,parentModel:r,isLocked:l,getInstance:u,getTableOptions:s,getTableConfigImmediately:d,getInternalEventService:c,getTableApi:f}),g.current=y,p.current=l),e.dispatchEvent({type:i.KD_TABLE_EVENT_NAMES.afterColumnAutoSize,params:{trigger:a.FORMSTATUS_CHANGED}})}),[y,l])};var n=r(795520),o=r(994432),i=r(94580),a=r(480632)},838816:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(693917),r(205960),r(976896),r(721300),r(846428),r(969e3),r(606200),r(534440),r(76152),r(76124),r(633768),r(690512),r(776512),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.model,r=e.parentModel,n=e.dataValueTimestamp,g=e.getInstance,p=e.getTableConfigImmediately,y=e.getTableOptions,m=e.getInternalEventService,h=(0,o.useRef)(null);(0,o.useEffect)((function(){h.current=null}),[n]),(0,o.useEffect)((function(){var e=r||t,n=e.pageId,o=e.key,C=p(),w=C.rowKey,S="VIEWGRID"===C.gridType?"setRowData":"setVirtualData",E=(0,i.addDataChangeListener)(n,[o,S],(function(e){var r=p(),n=r.isScrollLoad,o=r.gridType,i=r.treeTable,f=r.blockSize,C=r.rowKey;if(n){var w,S=e.length,E=e.startIndex,I=(e.datacount,g()),R=y(),T=m(),O=R.getMetaOptionsProperty("rowId"),P=function(e,t){var r,n=t.getTableOptions,o=t.getTableConfigImmediately,i=n(),l=o();if(0===(null==e||null===(r=e.rows)||void 0===r?void 0:r.length))return[];if("VIEWGRID"===l.gridType){var u=i.getDataOptionsProperty("dataDesc"),s=Object.assign(u,e);return(0,a.getRowsByConvertedRowParams)(s,{getTableConfigImmediately:o})}return(0,a.getRows)(e,{getTableConfigImmediately:o})}(e,{getTableOptions:y,getTableConfigImmediately:p}),D=b(h.current||I.tableModel.getFlatRows()),A=o===l.GRID_TYPE.virtualViewGrid&&i;if(A&&P.length>=f){var _=P[P.length-1][C],M=R.getTreeVirtualViewLoadedDataRow(),k={rowKeyValue:String(_),pid:e.pid,startIndex:e.startIndex};R.setTreeVirtualViewLoadedDataRow([].concat(v(M),[k]))}if(r.scrollLoadType===l.SCROLL_LOAD_TYPE.serverSide)if(function(e,t){var r=t.getTableOptions,n=t.getTableConfigImmediately,o=r(),i=n(),a=!1;if("VIEWGRID"===i.gridType){var l=o.getDataOptionsProperty("dataDesc").pageRows,u=e.startIndex,s=e.rows;(u+s.length===l||s.length<i.blockSize)&&(a=!0)}else{var d=e.length,c=e.startIndex,f=e.datacount;(e.isLast||f<=c+d)&&(a=!0)}o.setIsScrollLoadedLastPage(a)}(e,{getTableOptions:y,getTableConfigImmediately:p}),e.pid&&"0"!==e.pid){var L,j=D.findIndex((function(t){return t[O]===e.pid}));(L=D).splice.apply(L,[j+1+e.startIndex,0].concat(v(P)))}else D=D.concat(P);else!function(e,t){var r=t.getTableOptions,n=r(),o=n.getLoadedPages();-1===o.indexOf(e)&&(o.push(e),n.setLoadedPages(o))}(Math.floor(E/S),{getTableOptions:y}),(w=D).splice.apply(w,[E,S].concat(v(P)));if(r.treeTable){h.current=D;var N=R.getShowTreeSeq(),V=!A,K=(0,s.getTreeDataInfo)(D,{rowKey:r.rowKey,seqKey:r.seqKey,showTreeSeq:N,rowId:O,shouldModifySeq:V}),F=K.treeData,x=K.rowKeyMap,G=K.groupMap,B=K.lazyLoadGroup,H=K.parentNodeMap;if(R.getTreeVirtualViewExpandAll()){var W,z,U=v(G.keys()),q=P.filter((function(e){return U.includes(e[C])})),Y=q.map((function(e){return e[C]+""})),Z=q.map((function(e){return e.rowid})),X=(null===(W=I.controller)||void 0===W?void 0:W.getExpandRowKeys())||[],$=Array.from(new Set(X.concat(Y)));null===(z=I.controller)||void 0===z||z.setExpandRowKeys($),R.setExpandRowIds(Z,"expand")}R.setTreeRowKeyInfo({rowKeyMap:x,groupMap:G,lazyLoadGroup:B,parentNodeMap:H}),D=F}if((0,u.updateInstanceModelWhenDataChanged)(D,{getInstance:g,getTableConfigImmediately:p,getTableOptions:y,model:t}),R.getGridType()===l.GRID_TYPE.virtualViewGrid){var J=(0,a.getConvertedRowDesc)(e);R.setDataDesc(J);var Q=(0,d.getVirtualViewMergeRowSpan)(D,{getTableOptions:y,getTableConfigImmediately:p});R.setVirtualViewRowSpan(Q),T.dispatchEvent({type:c.KD_TABLE_EVENT_NAMES.virtualDataChanged,params:{data:D}})}setTimeout((function(){T.dispatchEvent({type:c.KD_TABLE_EVENT_NAMES.doAutoSizeColumns,params:{trigger:"dataChanged"}})}),0)}})),I=(0,f.addGridCellsDataChanged)(n,o,(function(e){var t=g(),r=y(),n=b(h.current||t.tableModel.getFlatRows());if(n.forEach((function(t){e.forEach((function(e){var r=e.r,n=e.k,o=e.v;r===t[w]&&(t[n]=o)}))})),C.treeTable){h.current=n;var o=r.getShowTreeSeq(),i=r.getMetaOptionsProperty("rowId"),a=!(C.gridType===l.GRID_TYPE.virtualViewGrid&&C.treeTable),u=(0,s.getTreeDataInfo)(n,{rowKey:C.rowKey,seqKey:C.seqKey,showTreeSeq:o,rowId:i,shouldModifySeq:a}),d=u.treeData,c=u.rowKeyMap,f=u.groupMap,p=u.lazyLoadGroup,m=u.parentNodeMap;r.setTreeRowKeyInfo({rowKeyMap:c,groupMap:f,lazyLoadGroup:p,parentNodeMap:m}),n=d}t.tableModel.setRows(n)}));return function(){E&&E(),I&&I()}}),[])},r(9692),r(622676),r(613468),r(233696),r(505684),r(443616),r(241872),r(323784),r(743924),r(835164),r(927184),r(336368),r(387912),r(764840),r(660824),r(78504),r(997308),r(977864),r(86744);var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(795520)),i=r(738704),a=r(218736),l=r(480632),u=r(881968),s=r(564616),d=r(741864),c=r(94580),f=r(359844);function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){var o;return o=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==n(o)?o:String(o))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b(e){if(Array.isArray(e))return e.map((function(e){return e.children?y(y({},e),{},{children:b(e.children)}):y({},e)}))}},212424:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.readyed,r=e.containerEleRef,n=e.getTableOptions,p=e.getTableConfigImmediately,y=e.getInstance,m=e.getTableApi,v=e.tablePoster,h=(0,o.useRef)([]),b=function(){var e,t;null===(e=r.current)||void 0===e||null===(t=e.focus)||void 0===t||t.call(e)},C=(0,o.useCallback)((function(){if(h.current.length>0){var e=h.current.pop(),t=e.rowKeyValue,r=e.selectedRowKeys,n=e.isCheck;v.send({type:"postCheckedRowSelection",args:{rowKeyValue:t,selectedRowKeys:r,isCheck:n}}),h.current=[]}}),[]),w=(0,o.useCallback)(s.default.debounce(C,200),[]);(0,o.useEffect)((function(){if(t){var e=r.current;if(e){var o=function(t){var r=t.ctrlKey,o=t.metaKey,s=t.keyCode,d=n(),c=p(),v=y(),S=c.rowKey,E=c.gridType,I=c.defaultFocus,R=function(e){var t=e.focusedRow;(0,u.shortCutSetFocusedRow)(t,{getInstance:y,getTableApi:m,getTableConfigImmediately:p,postAction:function(e){var t=e.rowKeyValue,r=e.selectedRowKeys;h.current.push({rowKeyValue:t,selectedRowKeys:r,isCheck:!0}),w()}})},T="VIEWGRID"===E&&I;switch(s){case i.KEYS.C:var O,P,D,A,_,M=d.getMetaOptionsProperty("suppressCopy"),k=r||o,L=null===(O=(P=window).getSelection)||void 0===O||null===(O=O.call(P))||void 0===O||null===(D=O.toString)||void 0===D?void 0:D.call(O),j=null===(A=(_=window).getSelection)||void 0===A||null===(A=A.call(_))||void 0===A?void 0:A.anchorNode,N=j&&e.contains(j)&&L;if(M){var V=N&&function(e){var t=(0,f.getEventPath)(e);return t.some((function(e){var t;return"TD"===e.tagName&&(null===(t=e.classList)||void 0===t?void 0:t.contains("kd-table-cell"))}))}(t);V&&t.preventDefault();break}if(!k)break;var K=d.getCellRanges(),F=c.rowKey,x=c.localeId,G=c.defaultLocalId,B=v.controller.getSelectedRows();if(N)break;if(K&&K.length>0){var H=v.controller.getRowDatas()||[],W=v.controller.getFooterDataSource()||[],z=c.getDisplayFlatColumns();(0,a.copyCellRangesValue)(K,{displayColumns:z,rowDatas:H,footerDataSource:W,rowKey:F,localeId:x,defaultLocalId:G}),K.forEach((function(t){(0,a.addTableCellRangeCopyAnimation)({cellRange:t,tableDom:e})}))}else if(B.length>0){var U=(0,g.flatColumns)(c.columns),q=B.reduce((function(e,t,r){return e+(0,a.copyRowValue)({row:t,rowKey:F,columns:U})+(r===B.length-1?"":"\r\n")}),"");(0,l.copyDataToClipboard)(q);var Y=v.controller.getSelectedRowKeys().map((function(e){return v.controller.getRowIndex(e)}));(0,a.addTableRowsCopyAnimation)({rowIndexKeys:Y,tableDom:e,columns:U})}break;case i.KEYS.UP:if(T){t.preventDefault(),b();var Z=v.controller.getFocusedRow().rowIndex;if(Z>0){var X=Z-1;R({focusedRow:{rowIndex:X,record:v.controller.getRowByIndex(X)}})}}break;case i.KEYS.DOWN:if(T){t.preventDefault(),b();var $=v.controller.getFocusedRow(),J=v.controller.getRows(),Q=$.rowIndex;if(Q<J.length-1){var ee=Q+1;R({focusedRow:{rowIndex:ee,record:v.controller.getRowByIndex(ee)}})}}break;case i.KEYS.SPACE:if(T){var te=v.controller.getFocusedRow(),re=te.record;if(te.rowIndex>=0){var ne,oe=null!==(ne=re&&re[S])&&void 0!==ne?ne:-1,ie=!v.controller.getSelectedRowKeys().includes(oe),ae=(0,u.getPostSelectedRowKeys)({rowKeyValue:oe,column:{},isCheck:ie,getInstance:y,getTableConfigImmediately:p});v.controller.setSelectedRows(ae),h.current.push({rowKeyValue:oe,selectedRowKeys:ae,isCheck:ie}),C(),t.preventDefault()}}}};return e.addEventListener("keydown",o),function(){e.removeEventListener("keydown",o)}}}}),[t]),(0,o.useEffect)((function(){var e=p(),r=e.gridType,n=e.defaultFocus,o=(0,d.addDataChangeListener)(e.pageId,[c.TRIGGER_BTN_CLICK_SHORTCUT],(function(){t&&"VIEWGRID"===r&&n&&C()}));return function(){o()}}),[t])},r(233696),r(443616),r(835164),r(492948),r(704180),r(976896),r(387912),r(690512),r(660824),r(997308);var n,o=r(795520),i=r(703188),a=r(52800),l=r(255571),u=(r(671840),r(48764)),s=(n=r(790832))&&n.__esModule?n:{default:n},d=r(738704),c=r(545072),f=r(716160),g=r(633016)},603448:function(e,t,r){"use strict";r(305092),r(606200),r(387912),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.model,r=e.getTableConfigImmediately,f=e.this$,g=e.getTableOptions,p=e.getInstance,y=e.getTableApi;(0,n.useEffect)((function(){var e=t.pageId,r=(0,o.addDataChangeListener)(e,i.PERMISSION_PARAMS,m);return function(){null==r||r()}}),[]);var m=function(e){if(e){var t=f.current,n=t.model,o=t.parentModel,i=p(),m=r(),v=g();if((0,l.find)(m.getColumns(),(function(e){return"operate"===e.type}))){var h=(0,u.getColumns)(n,o,{getTableOptions:g,mergeModel:i.mergeModel,getTableConfigImmediately:r,handleCellClick:(0,c.createCellClickHandler)(y,p),handleCellMouseDown:(0,c.createCellMouseDownHandler)(y,p,v),getCellClassName:(0,c.getCellClassNameWrapper)({getTableConfigImmediately:r,getTableOptions:g,getInstance:p}),getCellSpan:y().getCellSpan});(0,d.handleRepeatedColumns)({columns:h,getTableOptions:g}),m.setColumns(m.columnResizeMode===a.TABLE_COLUMN_RESIZE_MODE.adaptive?h:(0,s.getFitedTableSizeColumns)({columns:h,getTableOptions:g,getTableConfigImmediately:r}))}}}};var n=r(795520),o=r(738704),i=r(545072),a=r(480632),l=r(633016),u=r(773408),s=r(559016),d=r(994432),c=r(671840)},563616:function(e,t,r){"use strict";r(182320),r(909112),r(697060),r(323784),r(693917),r(976896),r(721300),r(606200),r(633768),r(690512),Object.defineProperty(t,"__esModule",{value:!0}),t.useRowExpand=void 0,r(9692),r(622676),r(505684),r(443616),r(743924),r(835164),r(492948),r(387912),r(764840),r(660824),r(78504),r(977864);var n=r(795520),o=r(21736),i=r(48764),a=r(94580),l=r(480632);function u(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}t.useRowExpand=function(e){var t=e.model,r=e.getTableOptions,s=e.getInstance,d=e.getActionByKey,c=e.getTableConfigImmediately,f=e.getInternalEventService,g=r(),p=s().controller,y=(0,n.useRef)(null),m=(0,n.useRef)(null),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=t.getDataProperty(["expandState","id"]),n=e;if(r!==y.current){y.current=r;var o=g.getDataOptionsProperty("groupMap"),a=t.getDataProperty(["expandState","rowKey"]);if(!a)return n;a=a.toJS(),t.getDataProperty(["expandState","isAll"])&&(a=0===a.length?o.get("all"):a.reduce((function(e,t){return[].concat(u(e),u(o.get(t)||[t]))}),[])),a=a.map((function(e){return e+""})),n=Array.from(new Set(a.concat(e)));var l=(0,i.getIdsFromRks)(a,{getInstance:s,getTableConfigImmediately:c});g.setExpandRowIds(l,"expand")}return n},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=t.getDataProperty(["collapseState","id"]),n=e;if(r!==m.current){m.current=r;var o=g.getDataOptionsProperty("groupMap"),a=t.getDataProperty(["collapseState","rowKey"]);if(!a)return n;a=a.toJS(),t.getDataProperty(["collapseState","isAll"])&&(0===a.length?a=o.get("all"):(a=a.reduce((function(e,t){return[].concat(u(e),u(o.get(t)||[t]))}),[]),a=Array.from(new Set(a)))),a=a.map((function(e){return e+""})),n=n.filter((function(e){return!a.includes(e)}));var l=(0,i.getIdsFromRks)(a,{getInstance:s,getTableConfigImmediately:c});g.setExpandRowIds(l,"collapse")}return n};(0,n.useEffect)((function(){if(!g.getGridType()){var e=t.getDataProperty(["expandState","timeStamp"])||0,n=t.getDataProperty(["collapseState","timeStamp"])||0;if(0!==e||0!==n){var i=(null==p?void 0:p.getExpandRowKeys())||[];e>=n?(0,o.pipe)([h,v,l])(i):(0,o.pipe)([v,h,l])(i),f().dispatchEvent({type:a.KD_TABLE_EVENT_NAMES.afterRowExpand})}}function l(e){null==p||p.setExpandRowKeys(e);var n=r().getExpandRowIds();d("invokeControlMethodOnly")(t,"postExpandNodes",[n])}}),[t.getDataProperty("collapseState"),t.getDataProperty("expandState")]),(0,n.useEffect)((function(){if(g.getGridType()===l.GRID_TYPE.virtualViewGrid){var e=t.getDataProperty(["expandState","timeStamp"])||0,r=t.getDataProperty(["collapseState","timeStamp"])||0,n=t.getDataProperty(["expandState","isAll"]),o=t.getDataProperty(["collapseState","isAll"]);n&&e>r&&g.setTreeVirtualViewExpandAll(!0),o&&r>e&&g.setTreeVirtualViewExpandAll(!1)}}),[t.getDataProperty("collapseState"),t.getDataProperty("expandState")])}},583960:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(9692),r(505684),r(323784),r(743924),r(387912),r(764840),r(78504),r(977864);var n=r(795520),o=r(279872),i=r(768760),a=r(107816),l=r(738704),u=o.dataHelper.getSeletedRows,s=o.dataHelper.getUpdateSeletedRowKeys;t.default=function(e){var t,r,o,d,c=e.model,f=e.parentModel,g=e.activeView,p=e.getTableConfigImmediately,y=e.getInstance,m=e.getActionByKey,v=e.getTableOptions,h=e.getTableApi,b=e.dispatch;(0,n.useEffect)((function(){var e=y(),t=u(c,f),r=v().getMetaOptionsProperty("gridType");if(h().setFocusedCell({rowIndex:-1}),t.length>0&&"VIEWGRID"===r)var n=e.controller.addViewerChangedListener((function(){n();var t=p();if(e.controller.viewer){var o=(0,a.getRowSelectedParams)({parentModel:f,model:c,getInstance:y,getTableConfigImmediately:p,getTableOptions:v}),l=o.pageId,u=o.key,s=o.selectedRowKeys,d=o.selectedRows,g=o.focusedCell,h=o.postCols,C=g.code,w=t.getDisplayColumn(C);t.isScrollLoad?i.poster.postRowSelection({pageId:l,key:u,getActionByKey:m,postCols:h,dispatch:b,gridType:r})({methodName:"addRowSelection",rowKeyValue:s[0],pendingSelectedRows:d,pendingSelectedRowKeys:s,column:w}):i.poster.postRowClick({pageId:l,key:u,dispatch:b,getActionByKey:m,postCols:h,gridType:r,getTableOptions:v})({selectedRows:d,selectedRowKeys:s,column:w,rowKeyValue:s[0]})}}));if(!r&&"tiledView"===g){var o=p(),s=o.pageId,d=o.id,C=t.length>0?t[0]:0;(0,l.setPageData)(s,[d,"setActiveRowKey"],C)}e.controller.setSelectedRows(t)}),[null==f||null===(t=f.getDataProperty(["slctState"]))||void 0===t?void 0:t.hashCode(),null===(r=c.getDataProperty(["slctState"]))||void 0===r?void 0:r.hashCode()]),(0,n.useEffect)((function(){var e=y(),t=e.controller.getSelectedRowKeys()||[],r=s(c,f);if(Array.isArray(r)&&0!==r.length){var n=Array.from(new Set(t.concat(r)));e.controller.setSelectedRows(n)}}),[null==f||null===(o=f.getDataProperty(["updateSlctState"]))||void 0===o?void 0:o.hashCode(),null===(d=c.getDataProperty(["updateSlctState"]))||void 0===d?void 0:d.hashCode()])}},174176:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(795520),o=r(738704);t.default=function(e){var t=e.model,r=(e.parentModel,e.tablePoster);(0,n.useEffect)((function(){var e=t.pageId,n=(0,o.addPageReleaseListener)(e,(function(){r.send({type:"personalizedColumnWidthChanged"})}));return function(){n&&n()}}),[])}},97584:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.useSetFocuedCell=function(e){var t,r,i,a,l=e.readyed,u=(e.containerEleRef,e.getTableConfigImmediately),s=e.getInstance,d=e.model,c=e.parentModel,f=e.getFocusedCellData,g=e.focusCell,p=e.getTableApi,y=(e.getInternalEventService,s());(0,n.useEffect)((function(){if(l){setTimeout((function(){!function(){var e=p(),t=f(d,c),r=u(),n={rowIndex:-1};if(null!==t&&t.length>0&&-1!==t[0]){var i=t[0],a=void 0!==t[1]?t[1]:"";if(!a){var l,s,g=(0,o.flatColumns)(r.getColumns()),m=g.find((function(e){return!e.hide&&e.extendParams.columnEditable})),v=null===(l=r.rowSelection)||void 0===l?void 0:l.showSelectionColumn,h=r.gridType;a=m?m.code:null===(s=g[0])||void 0===s?void 0:s.code,h&&v&&(a=null)}var b=y.controller.getRowIndex(i),C=y.controller.getRowIndex(i,!1);e.ensureColumnVisible(a),e.ensureRowIndexVisible(C),n.rowIndex=b,n.code=a,n.rowKey=i}-1!==n.rowIndex&&void 0===r.gridType&&e.focus(),e.setFocusedCell(n)}()}))}}),[l,null==c||null===(t=c.getDataProperty(["fcsState"]))||void 0===t?void 0:t.hashCode(),null===(r=d.getDataProperty(["fcsState"]))||void 0===r?void 0:r.hashCode()]),(0,n.useEffect)((function(){var e=p(),t=(c||d).getDataProperty(["startEditing","cellInfo"]);if(t=t?t.toJS():null){var r=t,n=r.k,o=r.r;if(null==o||o<0||!n)return;setTimeout((function(){e.isCellLock(n,o)||e.startEditingCell({code:n,rowKey:o})}),0)}}),[null==c||null===(i=c.getDataProperty(["startEditing"]))||void 0===i?void 0:i.hashCode(),null===(a=d.getDataProperty(["startEditing"]))||void 0===a?void 0:a.hashCode()]),(0,n.useEffect)((function(){var e=g.rowIndex,t=g.code,r=g.rowKey;if(e>-1){var n=p(),o=s();n.ensureColumnVisible(t);var i=o.controller.getRowIndex(r,!1);n.ensureRowIndexVisible(i)}}),[g])},r(305092),r(387912),r(86744);var n=r(795520),o=r(633016)},580004:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.readyed,r=e.containerEleRef,l=e.getInternalEventService,u=e.getTableConfigImmediately,s=(0,n.useRef)(null),d=(0,n.useRef)(null);(0,n.useEffect)((function(){if(t){d.current=r.current&&r.current.querySelector(".kd-sticky-scroll");var e=function(e){var t,r=u(),n=r.getColumns().filter((function(e){return e&&!e.hide}));if(0!==n.length){var o=n[n.length-1],i="operate"===o.type,l=null===(t=o.extendParams)||void 0===t?void 0:t.isFixedRight;i&&!l&&e.forEach((function(e){var t=e.attributeName,o=e.target,i=e.oldValue;if("style"===t){var l=o.getAttribute("style"),u=a(l),s=a(i),d=!!n[n.length-1].lock;u!==s&&d!==u&&(n[n.length-1].lock=u,r.setColumns(n))}}))}},n={attributes:!0,attributeOldValue:!0},c=function(t){if("columnsChanged"===t.params.trigger){var o,l=u();d.current||(d.current=r.current&&r.current.querySelector(".kd-sticky-scroll")),!s.current&&d.current&&(s.current=(0,i.addMutationObserver)(d.current,n,e));var c=l.getColumns().filter((function(e){return e&&!e.hide}));if(0===c.length)return;var f=c[c.length-1],g="operate"===f.type,p=null===(o=f.extendParams)||void 0===o?void 0:o.isFixedRight;if(g&&!p&&d.current){var y=!!f.lock,m=d.current.getAttribute("style"),v=a(m);y!==v&&(c[c.length-1].lock=v,l.setColumns(c))}}},f=l();return f.addEventListener(o.KD_TABLE_EVENT_NAMES.baseTableRendered,c),function(){s.current&&s.current.disconnect(),f.removeEventListener(o.KD_TABLE_EVENT_NAMES.baseTableRendered,c)}}}),[t])},r(622676),r(233696),r(443616),r(387912),r(660824),r(997308);var n=r(795520),o=r(94580),i=r(573272),a=function(e){return!e.includes("display: none")}},328948:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,e.getTableOptions)();(0,n.useEffect)((function(){var e=(0,o.addDataChangeListener)(i.KEY_ADVANCE_SHORTCUT_INFO,(function(){t.setFullKeyboardOptions()}));return function(){e()}}),[])};var n=r(795520),o=r(674260),i=r(868256)},391923:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.readyed,r=e.getTableConfigImmediately,u=e.containerEleRef,s=e.getInstance,d=e.tablePoster,c=e.getTableApi;(0,n.useEffect)((function(){var e=r(),n=e.defaultFocus,l=e.pageId,f=function(){var e,t;null===(e=u.current)||void 0===e||null===(t=e.focus)||void 0===t||t.call(e)};t&&u.current&&n&&setTimeout((function(){f()}));var g=(0,o.addDataChangeListener)(l,i.FOCUS_TARGET_KEY,(function(){f();var e=s(),t=e.controller.getRowDatas(),n=(e.controller.getFocusedRow()||{}).rowIndex;if(t.length>0&&-1===n){var o={rowIndex:0,record:e.controller.getRowByIndex(0)};(0,a.shortCutSetFocusedRow)(o,{getInstance:s,getTableApi:c,getTableConfigImmediately:r,postAction:function(e){var t=e.rowKeyValue,r=e.selectedRowKeys;d.send({type:"postCheckedRowSelection",args:{rowKeyValue:t,selectedRowKeys:r,isCheck:!0}})}})}}));return function(){g()}}),[t]),(0,n.useEffect)((function(){if(t){var e=(0,l.addMutationObserver)(u.current,{attributes:!0,attributeFilter:["data-focused-cell"],subtree:!0},(function(e){e.forEach((function(e){var t,r;null!==(t=(r=e.target).getAttribute)&&void 0!==t&&t.call(r,"data-focused-cell")&&c().focus()}))}));return function(){e&&e.disconnect()}}}),[t])},r(233696),r(387912),r(997308),r(86744);var n=r(795520),o=r(738704),i=r(545072),a=r(48764),l=r(573272)},325620:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.tableConfig,r=e.model,n=e.getInternalEventService,f=e.getNewColumns;(0,o.useEffect)((function(){var e=(0,l.addDataChangeListener)(a.KEY_TABLE_GLOBAL_CONFIG,(function(e,o){if(!(0,i.is)(e,o)){var a=t.rowHeight,l=t.headerHeight,g=t.isGridStriped,p=t.verticalBordered,y=t.bordered,m=t.columnResizeMode,v=t.columns,h=r.getMetaProperty("gridtype"),b=(0,s.isGridStriped)(r,y),C=(0,s.getColumnResizeMode)(r,h),w=(0,s.isVerticalBordered)(r,h),S=(0,s.getRowHeight)(r),E=(0,s.getHeaderHeight)(r),I={},R=!1;if(C!==m&&(I.columnResizeMode=C,R=void 0!==I.columnResizeMode),!!g!=!!b&&(I.isGridStriped=b),w!==p&&(I.verticalBordered=w),l!==E&&(I.headerHeight=E),a!==S&&(I.rowHeight=S,((0,d.hasCertainTypeCell)(v,c.default.Picture)||(0,d.hasCertainTypeCell)(v,c.default.Attachment))&&(t.setColumns(f()),R=!0)),t.setCheapConfig(I),R)n().dispatchEvent({type:u.KD_TABLE_EVENT_NAMES.doAutoSizeColumns,params:{trigger:"tableGlobalConfigChanged"}})}}));return function(){e()}}),[r])};var n,o=r(795520),i=r(891052),a=r(868256),l=r(674260),u=r(94580),s=r(161932),d=r(671840),c=(n=r(802780))&&n.__esModule?n:{default:n}},103364:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.useTablePoster=void 0;var n=r(795520),o=r(450811);t.useTablePoster=function(e){var t=e.tablePoster,r=e.getInstance,i=e.getActionByKey,a=e.getTableOptions,l=e.getTableConfigImmediately,u=e.getDispatch;(0,n.useEffect)((function(){return t.init({getInstance:r,getActionByKey:i,getTableOptions:a,getTableConfigImmediately:l,getDispatch:u}),t.add("cellImageClick",o.postImageClick),t.add("cellOperationItemClick",o.postOperationItemClick),t.add("cellHyperLinkClick",o.postHyperLinkClick),t.add("personalizedColumnWidthChanged",o.postPersonalizedColumnWidth),t.add("tipsShown",o.postShowFormByTips),t.add("tipsLinkClick",o.postClickTipsLink),t.add("postGridInfo",o.postGridInfo),t.add("privacyIconClick",o.getPlainText),t.add("multiHyperLinkClick",o.postMultiHyperLinkClick),t.add("updateCellValue",o.updateCellValue),t.add("editorRowClick",o.handleEditorRowClick),t.add("editingRowClick",o.handleEditingRowClick),t.add("btnClick",o.postBtnClick),t.add("detailBtnClick",o.postDetailBtnClick),t.add("batchInputClick",o.postBatchInputClick),t.add("changeYear",o.dateChangeYear),t.add("invokeActionSingle",o.invokeActionSingle),t.add("invokeAction",o.invokeAction),t.add("invokeActionDisableDispose",o.invokeActionDisableDispose),t.add("dispatchAction",o.dispatchAction),t.add("seqOperationClick",o.seqOperationClick),t.add("viewDetailClick",o.viewDetailClick),t.add("sendCustomRequest",o.sendCustomRequest),t.add("autoAddRow",o.postAutoAddRow),t.add("postFilterData",o.postFilterData),t.add("setColAllChecked",o.setColAllChecked),t.add("attachmentClick",o.attachmentClick),t.add("postRowClick",o.postRowClick),t.add("postCheckedRowSelection",o.postCheckedRowSelection),t.add("filterPanelBaseDataLookUpList",o.postBaseDataListLookUp),t.add("setFilterStatus",o.setFilterStatus),t.add("postRowSelection",o.postRowSelection),t.add("postPreviewInNewTab",o.postPreviewInNewTab),function(){t.flush()}}),[])}},958316:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.containerEleRef,r=e.getInternalEventService;(0,n.useEffect)((function(){var e=r(),n=function(){!function(){if(t.current){var e=t.current&&t.current.querySelector(".kd-table-body"),r=t.current&&t.current.querySelector(".kd-virtual");e&&e.setAttribute("tabindex","-1"),e?t.current.setAttribute("data-render",!0):t.current.setAttribute("data-render",!1),r&&r.setAttribute("tabindex","-1")}}()};return e.addEventListener(o.KD_TABLE_EVENT_NAMES.baseTableRendered,n),function(){e.removeEventListener(o.KD_TABLE_EVENT_NAMES.baseTableRendered,n)}}),[])};var n=r(795520),o=r(94580)},683464:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,r,d,c=e.getTableOptions,p=e.getInstance,y=e.getTableConfigImmediately,m=e.getInternalEventService,v=e.wrapperEleRef,h=e.containerEleRef,C=e.setReadyed,S=e.model,E=e.tableInitialSize,I=e.this$,R=(e.getTableApi,e.readyed);I.current.hasUpdateSinceHide=!0===I.current.lastHide;var T=(0,n.useCallback)((function(e,t,r,n){var o=y();(t>0&&e!==t&&[l.TABLE_COLUMN_RESIZE_MODE.fit,l.TABLE_COLUMN_RESIZE_MODE.adaptive].includes(o.columnResizeMode)||e>0&&n-r>100)&&m().dispatchEvent({type:u.KD_TABLE_EVENT_NAMES.doAutoSizeColumns,params:{trigger:"tableSizeChange"}})}),[]),O=(0,n.useCallback)((function(e,t){c().setTableSize({width:e,height:t}),e&&t&&v.current&&(v.current.style.width=e+"px")}),[]),P=(0,n.useCallback)((function(e,t){var r=c(),n=r.getTableSize().width,o=r.getTableSize().height;O(e,t),T(n,e,o,t)}),[]),D=(0,n.useCallback)(o.default.debounce(P,100),[]);(0,n.useEffect)((function(){var e=function(e,t){!function(e,t){var r=h.current,n=t;if(E.current.width=e,o.default.includes(r.style.height,"%")||""===r.style.height){var i,a=p(),u=y(),d=(null===(i=a.controller.viewer)||void 0===i?void 0:i.api.getHeaderHeight())||l.DEFAULT_HEADER_HEIGHT,f=u.getRowHeight()||l.DEFAULT_ROW_HEIGHT,g=u.getMaxLevel(),m=w({getTableConfigImmediately:y,getTableOptions:c})+(0,s.getTableHeaderHeight)({headerHeight:d,maxLevel:g})+(0,s.getTableBodyHeight)({minRowCount:l.DEFAULT_SHOW_ROWS_COUNT,rowHeight:f}).minHeight,v=t;o.default.includes(m,"%")||m<v?(r.style.height=v+"px",n=v):(r.style.height=m+"px",n=m)}E.current.height=n,r=null}(e,t),b({getTableConfigImmediately:y,getTableOptions:c,getInstance:p,containerEleRef:h,parentModel:I.current.parentModel,model:I.current.model,tableInitialSize:E})},t=function(){return!E.current.width&&!E.current.height},r=function(r){var n=r.width,o=r.height,i=r.hide;if(m().dispatchEvent({type:u.KD_TABLE_EVENT_NAMES.tableContainerResize,params:{trigger:"tableSizeChange",rect:r,lastHide:I.current.lastHide}}),(!0===I.current.lastHide||void 0===I.current.lastHide)&&!1===i){var a=y(),s=a.columnResizeMode,d=a.gridType,f=(0,a.getColumns)();d===l.GRID_TYPE.virtualViewGrid&&s===l.TABLE_COLUMN_RESIZE_MODE.preset&&(f=(0,g.getFitedTableSizeColumns)({columns:f,getTableOptions:c,getTableConfigImmediately:y,containerWidth:n}),a.setColumns(f)),setTimeout((function(){A()}),0)}!function(e,t,r){if(!0===t.lastHide&&!1===e&&t.hasUpdateSinceHide){var n=r(),o=n.getColumns();n.setColumns(o),t.hasUpdateSinceHide=!1}t.lastHide=e}(i,I.current,y),t()&&e(n,o),i||D(n,o)},n=null;return setTimeout((function(){var o=h.current;if(o){var a=o.clientWidth,l=o.clientHeight;O(a,l),n=(0,i.default)(o,r),t()&&e(a,l),C(!0)}}),0),function(){n&&(n.removeResizeObserve(),n=null)}}),[S.getMetaLocaleProperty(a.HEIGHT)]),(0,n.useEffect)((function(){var e=y();if(!e.titleAutoHeight&&R){var t=e.getMaxLevel(),r=(0,s.getHeaderHeight)(S)||l.DEFAULT_HEADER_HEIGHT;null!=c&&c().getHasVoucherHeader()&&(r=t>1?r:r*l.VOUCHER_HEADER.defaultLevel),e.setHeaderHeight(r),b({getTableConfigImmediately:y,getTableOptions:c,getInstance:p,containerEleRef:h,parentModel:I.current.parentModel,model:I.current.model,tableInitialSize:E})}}),[R,null==c?void 0:c().getHasVoucherHeader(),null===(t=y())||void 0===t?void 0:t.getMaxLevel(),null===(r=y())||void 0===r?void 0:r.getHeaderHeight(),null===(d=S.meta.get("columns"))||void 0===d?void 0:d.hashCode()]);var A=function(){var e=y();e.titleAutoHeight&&(!function(e){var t=h.current,r=p(),n=(0,f.calAutoHeightHeader)(t,{tableOptions:c(),tableInstance:r,tableConfig:e,model:S});e.setHeaderHeight(n)}(e),setTimeout((function(){b({getTableConfigImmediately:y,getTableOptions:c,getInstance:p,containerEleRef:h,parentModel:I.current.parentModel,model:I.current.model,tableInitialSize:E})})))};(0,n.useEffect)((function(){var e=m(),t=function(e){e.type;var t=e.params.trigger,r=y().titleAutoHeight;[l.CONTEXT_MENU,l.COLGROUP_EXTEND_CHANGE,l.FORMSTATUS_CHANGED,l.THEME_CHANGED].includes(t)&&r&&setTimeout((function(){A()}),0)};return A(),e.addEventListener(u.KD_TABLE_EVENT_NAMES.groupExtendChanged,t),e.addEventListener(u.KD_TABLE_EVENT_NAMES.themeChanged,t),e.addEventListener(u.KD_TABLE_EVENT_NAMES.afterColumnAutoSize,t),function(){e.removeEventListener(u.KD_TABLE_EVENT_NAMES.groupExtendChanged,t),e.removeEventListener(u.KD_TABLE_EVENT_NAMES.themeChanged,t),e.removeEventListener(u.KD_TABLE_EVENT_NAMES.afterColumnAutoSize,t)}}),[E.current.height])},t.useResizeTableHeight=function(e){var t,r,l,s=e.getTableOptions,d=e.getInstance,c=e.getTableConfigImmediately,f=e.containerEleRef,g=e.readyed,p=e.model,y=e.parentModel,m=e.tableInitialSize,v=e.activeView,h=e.getInternalEventService,w=p.getMetaLocaleProperty(a.HEIGHT),S=(0,n.useCallback)(o.default.debounce(b,100,{trailing:!0}),[]),E=(0,n.useCallback)(o.default.debounce(C,100,{trailing:!0}),[]);(0,n.useEffect)((function(){g&&void 0!==m.current.height&&("grid"===v?S({getTableConfigImmediately:c,getTableOptions:s,getInstance:d,containerEleRef:f,parentModel:y,model:p,tableInitialSize:m}):E(f,w||"auto","567px"));var e=h(),t=function(e){"rowDataChanged"===e.params.trigger&&("grid"===v?c().autoHeight&&S({getTableConfigImmediately:c,getTableOptions:s,getInstance:d,containerEleRef:f,parentModel:y,model:p,tableInitialSize:m}):(f.current.style.height=w||"auto",f.current.style.maxHeight="567px"))},r=function(){return S({getTableConfigImmediately:c,getTableOptions:s,getInstance:d,containerEleRef:f,parentModel:y,model:p,tableInitialSize:m})},n=function(){var e=c(),t=e.autoHeight,r=e.titleAutoHeight;t&&!r&&"grid"===v&&S({getTableConfigImmediately:c,getTableOptions:s,getInstance:d,containerEleRef:f,parentModel:y,model:p,tableInitialSize:m})};return e.addEventListener(u.KD_TABLE_EVENT_NAMES.baseTableRendered,t),e.addEventListener(u.KD_TABLE_EVENT_NAMES.afterColumnResized,r),e.addEventListener(u.KD_TABLE_EVENT_NAMES.afterColumnAutoSize,n),e.addEventListener(u.KD_TABLE_EVENT_NAMES.afterRowExpand,r),e.addEventListener(u.KD_TABLE_EVENT_NAMES.stickyAggregateHeightChanged,r),e.addEventListener(u.KD_TABLE_EVENT_NAMES.afterFilter,r),function(){e.removeEventListener(u.KD_TABLE_EVENT_NAMES.baseTableRendered,t),e.removeEventListener(u.KD_TABLE_EVENT_NAMES.afterColumnResized,r),e.removeEventListener(u.KD_TABLE_EVENT_NAMES.afterColumnAutoSize,n),e.removeEventListener(u.KD_TABLE_EVENT_NAMES.afterRowExpand,r),e.removeEventListener(u.KD_TABLE_EVENT_NAMES.stickyAggregateHeightChanged,r),e.removeEventListener(u.KD_TABLE_EVENT_NAMES.afterFilter,r)}}),[g,v,null==y||null===(t=y.getDataProperty(["value","rows"]))||void 0===t?void 0:t.size,null==p||null===(r=p.getDataProperty(["value","rows"]))||void 0===r?void 0:r.size,null===(l=c())||void 0===l?void 0:l.getMaxLevel(),null==p?void 0:p.getDataProperty(["value","pageindex"])]),(0,n.useEffect)((function(){var e=f.current.querySelector(".kd-table-header-row"),t=null;if(e){t=(0,i.default)(e,(function(e){null!=e&&e.height&&d().controller.setHeaderHeight(null==e?void 0:e.height)}))}return function(){var e;null===(e=t)||void 0===e||e.removeResizeObserve(),t=null}}),[g])},r(443616),r(660824),r(86744);var n=r(795520),o=p(r(790832)),i=p(r(139224)),a=r(290600),l=r(480632),u=r(94580),s=r(161932),d=r(48764),c=r(279872),f=r(27892),g=r(559016);function p(e){return e&&e.__esModule?e:{default:e}}var y=1,m=c.dataHelper.getPageIndex,v=c.dataHelper.getAggregateData,h=c.dataHelper.getDataCount;function b(e){var t,r=e.getTableConfigImmediately,n=e.getTableOptions,o=e.getInstance,i=e.containerEleRef,u=e.parentModel,c=e.model,g=e.tableInitialSize,p=r().getRowHeight()||l.DEFAULT_ROW_HEIGHT,y=(null===(t=o())||void 0===t||null===(t=t.controller)||void 0===t||null===(t=t.getRows())||void 0===t?void 0:t.length)||0,b=function(e){var t,r=e.getTableConfigImmediately,n=e.getTableOptions,o=e.getInstance,i=e.containerEleRef,a=e.parentModel,u=e.model,c=n(),g=r(),p=g.getRowHeight()||l.DEFAULT_ROW_HEIGHT,y=w({getTableConfigImmediately:r,getTableOptions:n}),b=g.getHeaderHeight()||l.DEFAULT_HEADER_HEIGHT,C=g.getMaxLevel(),I=g.titleAutoHeight?(0,f.getCurMaxHeightCell)(i.current,b):(0,s.getTableHeaderHeight)({headerHeight:b,maxLevel:C}),R=function(e){var t=e.containerEleRef,r=e.tableOptions,n=r.getScrollBarSize(),o=t.current&&t.current.querySelector(".kd-sticky-scroll");if(o){!o.getAttribute("style").includes("display: none")&&n.height}return n.height}({containerEleRef:i,tableOptions:c}),T=a||u,O=(null==T||null===(t=T.getDataProperty(["value","rows"]))||void 0===t?void 0:t.size)||0,P=i.current.offsetHeight-i.current.clientHeight,D=function(e){var t,r=e.rowCount,n=e.model,o=e.parentModel,i=e.tableOptions,a=e.gridType,u=e.rowHeight,s=e.getInstance;r=i.getSumWithFilter()?null===(t=s().tableModel.getFlatDisplayRows())||void 0===t?void 0:t.length:r,a===l.GRID_TYPE.virtualViewGrid&&(r=h(n,o));var c=(0,d.shouldShowFooterRow)({rowCount:r,pageIndex:m(n,o)}),f=v(n,o);if(!c||!(0,d.hadFooterRowData)({aggregateColumns:i.getAggregateColumns(),gridType:a,aggregateDataLength:f.length}))return 0;return i.getTotalType(n)!==l.TOTAL_TYPE.sticky?u:function(e,t){var r;return null!==(r=e.getStickyAggregateHeight())&&void 0!==r?r:t}(i,u)}({rowCount:O,model:u,parentModel:a,tableOptions:c,gridType:g.gridType,rowHeight:p,getInstance:o}),A=y+I+R+P+S+E+D;return A}({getTableConfigImmediately:r,getTableOptions:n,getInstance:o,containerEleRef:i,parentModel:u,model:c}),C=g.current.height,I=c.getMetaLocaleProperty(a.HEIGHT),R=o().controller.getRowHeightCache(),T=n(),O=T.getDefaultRowCount(),P=T.getIsLimitHeight(),D=(0,s.caclulateTableHeight)({metaHeight:I,baseHeight:b,tableInitialHeight:C,rowHeight:p,rowCount:y,rowHeightCache:R,defaultRowCount:O,isLimitHeight:P});i.current.style.height=D+"px",i.current.style.minHeight=null!=I?I:b+p*(0,s.getTableDefaultShowRowsCount)()+"px",i.current.style.maxHeight="none",i=null}function C(e,t,r){e.current.style.height=t,e.current.style.maxHeight=r}function w(e){var t=e.getTableConfigImmediately,r=e.getTableOptions,n=t(),o=n.hasNavgation,i=n.toolbarLocation;if(!o)return 0;var a=r(),l="1"===i,u=a.getToolBarHeight()||a.getNavigationDefaultHeight();return l?u+y:u}var S=1,E=1},717320:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.getTableConfigImmediately,r=e.getTableOptions;(0,n.useEffect)((function(){!function(){var e=t(),r=e.pageId,n=(e.id,e.parentId),l=e.gridType,u=e.type,s=e.isCellRangesSum,d=e.modelKey;if((0,a.shouldCellRangesSumTracking)(l,s)){var c=o.trackingExtendCtrlProps.GRID_CELL_RANGES_SUM,f=s,g=(0,i.getGridTrackingType)({type:u,gridType:l});(0,i.trackingOfGridProps)({pageId:r,controlId:n||d,controlType:g,controlProp:c,controlValue:f})}}(),function(e,t){var r=e(),n=r.pageId,a=(r.id,r.parentId),l=r.gridType,u=r.type,s=r.modelKey,d=t();d.getSuppressRowSpan()&&(0,i.trackingOfGridProps)({pageId:n,controlId:a||s,controlType:(0,i.getGridTrackingType)({type:u,gridType:l}),controlProp:o.trackingExtendCtrlProps.GRID_NO_BILL_HEADER_SPAN,controlValue:d.getSuppressRowSpan()})}(t,r)}),[])};var n=r(795520),o=r(49480),i=r(816880),a=r(725808)},820204:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.getTableConfigImmediately,r=e.this$,d=e.getTableOptions,c=e.getInstance,f=e.afterRefreshOfThemeChanged,g=e.getInternalEventService,p=e.getTableApi,y=(0,n.useRef)(!1),m=function(){var e=r.current,n=e.model,o=e.parentModel,i=e.isLocked;(0,u.resetExpandColExpectWidth)(),(0,l.resetTableColumnsAndConfig)({model:n,parentModel:o,isLocked:i,getInstance:c,getTableOptions:d,getTableConfigImmediately:t,getInternalEventService:g,getTableApi:p}),null==f||f()};(0,n.useEffect)((function(){var e=(0,o.addDataChangeListener)(i.KEY_PAGE_VISIBLE_STATUS,(function(e){s=(0,a.getVisiblePages)(e),y.current&&s.includes(function(e){return e.current.model.pageId}(r))&&(y.current=!1,m())})),t=(0,o.addDataChangeListener)(i.KEY_MODIFY_THEME_ACTION,(function(e){s.includes(r.current.model.pageId)?m():y.current=!0}));return function(){t(),e()}}),[])},r(443616),r(660824);var n=r(795520),o=r(674260),i=r(868256),a=r(235708),l=r(994432),u=r(674104),s=[]},466012:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(505684),r(743924),r(693917),r(976896),r(721300),r(606200),r(534440),r(633768),r(690512),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.model,r=e.containerEleRef,n=e.readyed,s=e.getTableOptions,c=e.getActionByKey,f=e.getTableConfigImmediately,g=(m=(0,o.useState)(0),v=2,function(e){if(Array.isArray(e))return e}(m)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(m,v)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}(m,v)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=g[0],y=g[1];var m,v;(0,o.useEffect)((function(){var e=f(),t=e.gridType,o=(e.treeTable,t===a.GRID_TYPE.virtualViewGrid);if(n&&o){var l=(0,i.addMutationObserver)(r.current,{attributes:!0},(function(e){e.forEach((function(e){if("data-render"===e.attributeName){var t="true"===r.current.getAttribute("data-render");y(t?p+1:0)}}))}));return function(){l&&l.disconnect()}}}),[n,p]),(0,o.useEffect)((function(){var e=f(),o=e.gridType,d=e.treeTable,g=o===a.GRID_TYPE.virtualViewGrid&&d;if(n&&g&&p){var y=r.current.querySelector(".kd-table > .kd-table-body tbody");if(y){var m=(0,i.addMutationObserver)(y,{childList:!0},(function(e){e.forEach((function(e){0!==e.addedNodes.length&&e.addedNodes.forEach((function(e){var r=s(),n=e.getAttribute("data-row-key"),o=r.getTreeVirtualViewLoadedDataRow().find((function(e){return e.rowKeyValue===n}));o&&function(e){var r=e.rowKeyValue,n=e.pid,o=e.startIndex,i=s(),a=f(),d=i.getTreeVirtualViewLoadedDataRow(),g=c("invokeControlMethodOnly"),p=t.pageId,y=t.key,m=a.blockSize,v=i.getTreeVirtualViewExpandAll(),h=(0,u.makeAjaxKey)(p,y,"getVirtualData");l.disableDisposeAction(h),v?g&&g({pageId:p,key:y},"getVirtualData",[o+m,m]):g&&g({pageId:p,key:y},"getVirtualData",[o+m,m,n,parseInt(r)]),l.allowDisposeAction(h),i.setTreeVirtualViewLoadedDataRow(d.filter((function(e){return e.rowKeyValue!==r})))}(o)}))}))}));return function(){m&&m.disconnect()}}}}),[p])},r(622676),r(305092),r(233696),r(323784),r(387912),r(571176),r(997308);var o=r(795520),i=r(573272),a=r(480632),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(600192)),u=r(497168);function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}},823696:function(e,t,r){"use strict";r(182320),r(909112),r(697060),r(505684),r(743924),r(693917),r(976896),r(721300),r(606200),r(633768),r(690512),r(78504),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.activeView,r=e.getTableOptions,n=e.getTableConfigImmediately,s=e.getTableApi,c=e.getInstance,f=e.containerEleRef,C=e.getInternalEventService,I=e.tablePoster;(0,o.useEffect)((function(){if(!r().getGridType()){var e=n(),o=e.pageId,i=e.id,u=(0,a.addDataChangeListener)(o,[i,"errorFocus"],(function(e){if(e){var r=(p=2,function(e){if(Array.isArray(e))return e}(g=e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(g,p)||b(g,p)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),n=r[0],u=r[1],d=(0,a.getPageData)(o,[l.LATEST_VALIDATE_MESSAGE_KEY]);if(d&&d===n||(0,a.setPageData)(o,[l.LATEST_VALIDATE_MESSAGE_KEY],n),"grid"===t){var f=c().controller.getRowIndex(Number(u),!1);s().ensureColumnVisible(n),s().ensureRowIndexVisible(f),setTimeout((function(){(0,a.setPageData)(o,["".concat(i,"_").concat(n,"_").concat(u),"errorFocus"],[])}))}}var g,p}));return function(){null==u||u()}}}),[t]),(0,o.useEffect)((function(){if(!r().getGridType()){var e=n(),t=e.pageId,o=e.id,d=e.rowKey,m=e.type,v=e.gridType,h=E({pageId:t,tableId:o,type:m,gridType:v,tableApi:s(),controller:c().controller,tableConfig:n()}),b=new window.MutationObserver(w({pageId:t,tableId:o,rowValidateTipClickHandler:h})),I=function(e){var r=(0,u.getGridValidateData)(t,[o]),n=f.current.querySelector(".kd-table-body > .kd-fixed-left > table > tbody")||f.current.querySelector(".kd-table-body > .kd-virtual > table > tbody");n&&setTimeout((function(){var r;void 0===e?(r=n.children,(0,g.updateValidateFailedCellCount)({pageId:t,id:o,rowKey:d,tableApi:s(),controller:c().controller})):r=[n.querySelector('tr[data-row-key="'.concat(e,'"]'))],S({pageId:t,tableId:o,rowElements:r,rowValidateTipClickHandler:h})})),r&&r.size>0?(b.observe(n,{childList:!0}),f.current.setAttribute("data-valid",t)):(b.disconnect(),f.current.removeAttribute("data-valid"))},R=(0,a.addDataChangeListener)(t,[l.VALIDATE_FINISH],(function(e){var t=e.tableId,r=e.rowKey;t&&t!==o||I(r)})),T=(0,a.addDataChangeListener)(t,[o,l.GRID_VALIDATE_CHANGE],(function(){I()})),O=C(),P=(0,i.debounce)((function(e){var r=e.params.direction,n=(0,u.getGridValidateData)(t,[o]);"horizontal"===r&&(null==n?void 0:n.size)>0&&D({trigger:"scroll"})}),300);return O.addEventListener(y.KD_TABLE_EVENT_NAMES.scroll,P),O.addEventListener(y.KD_TABLE_EVENT_NAMES.tableContainerResize,(function(e){var t=e.params,r=t.rect,n=t.lastHide,o=r.hide;n&&!o&&setTimeout((function(){D({cb:function(e,t){e.style.height=t.clientHeight+"px"}})}))})),function(){R(),b.disconnect(),b=null,O.removeEventListener(y.KD_TABLE_EVENT_NAMES.scroll,P),T()}}function D(e){var t=e.cb,r=e.trigger,n=f.current.querySelector(".kd-table-body > .kd-fixed-left > table > tbody")||f.current.querySelector(".kd-table-body > .kd-virtual > table > tbody");n.querySelector("td.kd-first.kd-lock-left")&&"scroll"===r||n.children.forEach((function(e){var r=e.querySelector(".".concat(p.default["kd-row-validate-failed-tip"]));if(r){null==t||t(r,e);var n=e.firstElementChild;("sticky"===(null==n?void 0:n.style.position)?n:e).appendChild(r)}}))}}),[]),(0,o.useEffect)((function(){var e=(0,m.getData)(v.KEY_COUNTRU_VIA_DATA),t=n(),r=(0,d.flatColumns)(t.getColumns()).filter((function(e){return e.type===h.Ctrls.KDTelephone})).map((function(e){return e.code}));!e&&r[0]&&I.send({type:"invokeAction",args:{code:r[0],actionName:"getTelViaList",params:[]}})}),[n().getColumns()])},r(9692),r(622676),r(233696),r(323784),r(835164),r(846428),r(387912),r(997308),r(86744);var n,o=r(795520),i=r(790832),a=r(738704),l=r(545072),u=r(218652),s=r(816880),d=r(633016),c=r(175560),f=r(994432),g=r(29280),p=(n=r(383396))&&n.__esModule?n:{default:n},y=r(94580),m=r(674260),v=r(868256),h=r(102139);function b(e,t){if(e){if("string"==typeof e)return C(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?C(e,t):void 0}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var w=function(e){var t=e.pageId,r=e.tableId,n=e.rowValidateTipClickHandler;return function(e){var o,i=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=b(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw i}}}}(e);try{for(i.s();!(o=i.n()).done;){var a=o.value;if("childList"===a.type){var l=a.addedNodes;S({pageId:t,tableId:r,rowElements:l,rowValidateTipClickHandler:n})}}}catch(e){i.e(e)}finally{i.f()}}};function S(e){var t=e.pageId,r=e.tableId,n=e.rowElements,o=e.rowValidateTipClickHandler;n.forEach((function(e){var n=e.getAttribute("data-row-key");if(n){var i=n-0;if((0,u.getGridValidateData)(t,[r,i])){var a=e.clientHeight,l=e.firstElementChild,s="sticky"===(null==l?void 0:l.style.position)?l:e;!e.querySelector(".".concat(p.default["kd-row-validate-failed-tip"]))&&s.appendChild(function(e,t){var r=document.createElement("span");return r.setAttribute("class",p.default["kd-row-validate-failed-tip"]),r.onclick=e,r.style.height=t+"px",r}(o(i),a))}else{var d=e.querySelector(".".concat(p.default["kd-row-validate-failed-tip"]));d&&d.parentElement.removeChild(d)}}}))}var E=function(e){var t=e.pageId,r=e.tableId,n=e.type,o=e.gridType,a=e.tableApi,l=e.controller,p=e.tableConfig;return function(e){return(0,i.throttle)((function(i){i.stopPropagation(),a.startEditingCell({rowKey:-1});var y=function(e){var t,r=e.pageId,n=e.tableId,o=e.rowKey,i=e.controller,a=(e.tableApi,e.tableConfig),l=(0,u.getGridValidateData)(r,[n,o]);if(l&&1===l.size){var s=[];l.map((function(e,t){return s.push(t)})),t={column:(0,f.getColumnByCode)(s[0],a.getColumns()),rowKey:o}}else{var c,p,y,m=i.getFocusedCell(),v=(0,d.flatColumns)(a.getColumns());if(m&&-1!==m.rowIndex&&m.rowKey===o)c=(0,g.getNextValidateFailedCol)(m.code,v,l)||(0,g.getNextValidateFailedCol)(null===(p=v[0])||void 0===p?void 0:p.code,v,l);else c=(0,g.getNextValidateFailedCol)(null===(y=v[0])||void 0===y?void 0:y.code,v,l);c&&(t={column:c,rowKey:o})}return t}({pageId:t,tableId:r,rowKey:e,tableApi:a,controller:l,tableConfig:p});y&&(a.ensureColumnVisible(y.column.code),(0,c.shouldStartEditingCell)(y.column.type)?a.startEditingCellWithFocus({rowKey:y.rowKey,code:y.column.code}):a.setFocusedCell({rowKey:y.rowKey,code:y.column.code}));var m=(0,s.getGridTrackingType)({type:n,gridType:o});(0,s.trackingOfValidateClick)({pageId:t,controlId:r,controlType:m,actionKey:"left"})}),100)}}},202864:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.readyed,r=e.getInstance,i=e.containerEleRef;(0,n.useEffect)((function(){var e=function(e){var n;if((0,o.isWindow)(e.target)||t&&(null===(n=i.current)||void 0===n||!n.contains(e.target))){var a=r(),l=a.controller.getFocusedRow(),u=0===i.current.offsetWidth&&0===i.current.offsetHeight;-1===l.rowIndex||u||a.controller.setFocusedRow({rowIndex:-1})}};return window.addEventListener("click",e,!0),function(){window.removeEventListener("click",e,!0)}}),[t])};var n=r(795520),o=r(157376)},315192:function(e,t,r){"use strict";r(697060),r(505684),r(323784),r(743924),r(693917),r(976896),r(721300),r(606200),r(633768),r(690512),r(78504),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(182320),r(909112),r(360776),r(305092),r(233696),r(492948),r(885612),r(205960),r(846428),r(76124),r(387912),r(804092),r(997308);var n=r(633016),o=r(994432);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s(n.key),n)}}function s(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:String(t)}var d=function(){function e(t,r,n,i,a){var l=this,u=arguments.length>5&&void 0!==arguments[5]&&arguments[5];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._lastRow=null,this.hasMergeRow=!1,this.entityRelationInfo=void 0,this.rowOrder=[],this.spanDetails={},this.mergeRowKey=[],this.groupBorderCol=[],this.columnEntityMap={},this.rowEntityGroup={},this.setSuppressMergeRows=function(e){l.suppressMergeRows=e},this.getRowSpan=function(e,t){var r=(0,o.getOriginColumnCode)(t),n=l.columnEntityMap[r]||l.entityRelationInfo.mainEntityKey;return l.getRowSpanByEntity(e,n)},this._getEntitySpan=function(e,t,r,n,o){var i=e.pkFieldName,a=e.parentKey,u=e.key,s=e.groupIndex,d=l.entityRelationInfo,c=d.entities,f=d.mainEntityKey,g=1;if(o[s])return o[s];t&&n[i]&&t[i]===n[i]&&((u===f||l._getEntitySpan(c[a],t,r,n,o)>1)&&(g=r[s]+1));return g},this._getRowEntityGroup=function(){var e={},t={};return l.rowOrder.reduce((function(r,n,o){return r[n]=Object.keys(l.entityRelationInfo.entities).reduce((function(r,i){var a=[],u=e[i]||[],s=t[i]||1,d=l.getRowSpanByEntity(n,i);if(s>1)a=u;else for(var c=o;c<o+d;c++){var f=l.rowOrder[c];a.push(f)}return r[i]=a,e[i]=a,t[i]=d,r}),{}),r}),{})},this._isEnableMerged=function(e,t){return!t&&e.length>1},this._updateColumnEntityMap=function(e,t){var r=l.entityRelationInfo.leafEntityKey;l.columnEntityMap=function e(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.reduce((function(n,o){var i,a=o.get("entity"),l=o.get("dataIndex");if((null===(i=o.get("items"))||void 0===i?void 0:i.size)>0){for(var u=0,s=o.getIn(["items",u++]),d=!0;u<o.get("items").size&&d;){var c=o.getIn(["items",u++]);d=s.get("entity")===c.get("entity")}d||(a=r)}return l===t&&(a=r),n[l]=a,o.get("children")?e(o.get("children"),n):n}),o)}(e)},this._reset=function(){l._lastRow=null,l.hasMergeRow=!1,l.rowOrder=[],l.spanDetails={},l.mergeRowKey=[],l.groupBorderCol=[],l.columnEntityMap={},l.rowEntityGroup={}},this.suppressMergeSelect=i,this.suppressMergeRows=u,this.updateMergeModel(t,r,n,a)}var t,r,i;return t=e,(r=[{key:"updateMergeModel",value:function(e,t,r,n){if(this.entityRelationInfo=this._buildEntityRelation(e),this._isEnableMerged(e,n)){var o=this._getMergeInfo(t,r),i=o.spanDetails,a=o.rowOrder;this.spanDetails=i,this.rowOrder=a,this.rowEntityGroup=this._getRowEntityGroup()}else this._reset()}},{key:"setSuppressMergeSelect",value:function(e){this.suppressMergeSelect=e}},{key:"getRowSpanByEntity",value:function(e,t){if(this.entityRelationInfo.entities[t]){var r=this.entityRelationInfo.entities[t].groupIndex;return(this.spanDetails["r_".concat(e)]||[])[r]||1}return 1}},{key:"getRowGroup",value:function(e,t){var r,n=(0,o.getOriginColumnCode)(t),i=this.columnEntityMap[n]||this.entityRelationInfo.mainEntityKey;return(null===(r=this.rowEntityGroup[e])||void 0===r?void 0:r[i])||[e]}},{key:"getMergeRowKey",value:function(){return this.mergeRowKey}},{key:"updateBorderCols",value:function(e,t,r){var i,a=this;this.hasMergeRow&&(this._updateColumnEntityMap(t,r),this.groupBorderCol=[],(0,n.childrenLoop)(e,(function(e){var t=e.code;if(!e.hide){var r=(0,o.getOriginColumnCode)(t),n=a.columnEntityMap[r]||"";i&&i.entity!==n&&a.groupBorderCol.push(i.code),i={code:t,entity:n}}})),i&&i.entity!==this.entityRelationInfo.leafEntityKey&&this.hasMergeRow&&this.groupBorderCol.push(i.code))}},{key:"_buildEntityRelation",value:function(e){var t={entities:{},maxLevel:0},r=0,n=function t(r,n){if(""===r.parentKey)return n;var o=e.find((function(e){return e.key===r.parentKey}));return null==o?n:t(o,n+1)};return e.forEach((function(e,o){var i=n(e,1);i>=r&&(t.leafEntityKey=e.key,r=i),""===e.parentKey&&(t.mainEntityKey=e.key),t.entities[e.key]={key:e.key,parentKey:e.parentKey,pkFieldName:e.pkFieldName,level:i,groupIndex:o}})),t.maxLevel=r,t}},{key:"_getMergeInfo",value:function(e,t){var r,n=this,o={},i=[],l=[];return this.mergeRowKey=[],this.hasMergeRow=!1,e&&a(e).reverse().forEach((function(e){var a=[],u=e[t];Object.values(n.entityRelationInfo.entities).forEach((function(o){var i=o.groupIndex,u=n._getEntitySpan(o,r,l,e,a);a[i]=u,u>1&&(n.hasMergeRow=!0,o.key===n.entityRelationInfo.mainEntityKey&&n.mergeRowKey.push(e[t]))})),r=e,l=a,i.unshift(u),o["r_".concat(u)]=a})),{spanDetails:o,rowOrder:i}}}])&&u(t.prototype,r),i&&u(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=d},450811:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(622676),r(233696),r(505684),r(323784),r(743924),r(693917),r(205960),r(976896),r(721300),r(846428),r(969e3),r(606200),r(534440),r(76152),r(76124),r(387912),r(633768),r(690512),r(78504),r(776512),r(997308),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.attachmentClick=function(e,t){var r=e.getTableConfigImmediately,n=(0,e.getActionByKey)("invokeControlMethodOnly"),o=r().pageId,i=t.cellLocked,a=t.id,l=t.column,u=t.rowKey;n({pageId:o,key:a},"attachmentClick",[{c:l.code,r:u,l:i}])},t.dateChangeYear=function(e,t){var r=e.getTableConfigImmediately,n=e.getActionByKey,o=t.code,i=t.years,a=r().pageId;n("invokeControlMethodOnly")({pageId:a,key:o},p.CHANGE_YEAR,i)},t.dispatchAction=function(e,t){var r=e.getDispatch,n=t.action;r()(n)},t.getPlainText=function(e,t){var r=e.getTableConfigImmediately,n=e.getActionByKey,o=t.column,i=t.record,a=o.code,s=(0,u.getOriginColumnCode)(a),d=r(),c=d.pageId,f=d.parentId,g=d.id,p=d.rowKey,y=d.gridType,m=i[p],v=n("invokeControlMethodSingle");if(y===l.GRID_TYPE.listViewGrid||y===l.GRID_TYPE.virtualViewGrid){v({pageId:c,key:f||g},"getPlainText",[m,s,[]])}else v({pageId:c,key:s},"getPlainText",[m])},t.handleEditingRowClick=function(e,t){if((0,e.getTableOptions)().getGridType()!==l.GRID_TYPE.listViewGrid){T(e,S(S({},t),{},{isEditingTrigger:!0}))}},t.handleEditorRowClick=function(e,t){(0,e.getTableOptions)().getGridType()!==l.GRID_TYPE.listViewGrid&&T(e,t)},t.invokeAction=function(e,t){var r=e.getTableConfigImmediately,n=e.getActionByKey,o=t.code,i=t.actionName,a=t.params,l=r().pageId;n("invokeControlMethodOnly")({pageId:l,key:o},i,a)},t.invokeActionDisableDispose=function(e,t){var r=e.getTableConfigImmediately,n=e.getActionByKey,o=t.code,i=t.actionName,a=t.params,l=r().pageId,u=n("invokeControlMethodOnly"),s=(0,y.makeAjaxKey)(l,o,"uploadResult");m.disableDisposeAction(s),u({pageId:l,key:o},i,a),m.allowDisposeAction(s)},t.invokeActionSingle=function(e,t){var r=e.getTableConfigImmediately,n=e.getActionByKey,o=t.code,i=t.actionName,a=t.params,l=r().pageId;n("invokeControlMethodSingle")({pageId:l,key:o},i,a)},t.postAutoAddRow=function(e,t){var r=e.getTableConfigImmediately,n=e.getActionByKey,o=t.code,i=t.rowKey,a=r(),l=a.pageId,u=a.id;n("handleGotoNextRow")({pageId:l,key:u},[{r:i,k:o}])},t.postBaseDataListLookUp=function(e,t){var r=e.getTableConfigImmediately,n=e.getActionByKey,o=t.colId,i=t.searchValue,a=t.start,l=r(),u=l.pageId,s=l.parentId,d=l.id,c=n("getBaseDataLookUpList");null==c||c({pageId:u,key:null!=s?s:d},{fieldName:o,searchValue:i,start:a})},t.postBatchInputClick=function(e,t){var r=t.code,n=e.getTableConfigImmediately,o=e.getActionByKey,i=n().pageId;o("invokeControlMethodOnly")({pageId:i,key:r},"batchInput",[])},t.postBtnClick=function(e,t){var r=t.code,n=e.getTableConfigImmediately,o=e.getActionByKey,i=n().pageId;o("gridBtnClick")({pageId:i,key:r})},t.postCheckedRowSelection=function(e,t){var r=t.selectedRowKeys,n=t.isCheck;R(e,t,{selectedRowKeys:r,isCheck:n})},t.postClickTipsLink=void 0,t.postDetailBtnClick=function(e,t){var r=t.code,n=t.editable,o=e.getTableConfigImmediately,i=e.getActionByKey,a=o().pageId;i("gridDetailBtnClick")({pageId:a,key:r},[{lock:!n}])},t.postFilterData=function(e,t){var r=e.getTableConfigImmediately,n=e.getActionByKey,o=t.rowKeys,i=t.reset,a=r(),l=a.pageId,u=a.id;n("postFilterData")({pageId:l,key:u},[[{rk:o,reset:i}]])},t.postGridInfo=void 0,t.postHyperLinkClick=function(e,t){var r=e.getActionByKey,n=(0,e.getTableConfigImmediately)(),o=n.pageId,i=n.parentId,a=n.id,l=n.rowKey,s=n.entities,d=t.record,c=t.column,f=c.code,p=c.extendParams,y=void 0===p?{}:p,m=(0,u.getOriginColumnCode)(f),v=(0,g.getRecordPrimaryKeys)(d,s),h=r("invokeControlMethodOnly");y.isDetailTalbeCol?h({pageId:o,key:i||a},"entryHyperLinkClick",[].concat(function(e){if(Array.isArray(e))return I(e)}(b=v)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(b)||function(e,t){if(e){if("string"==typeof e)return I(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?I(e,t):void 0}}(b)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[m])):(T(e,t),h({pageId:o,key:i||a},"hyperLinkClick",[m,d&&d[l]]));var b},t.postImageClick=function(e){!function(e){var t=e.getActionByKey,r=e.getTableConfigImmediately,n=r(),o=n.pageId,i=n.parentId,l=n.id;a.postClick({getActionByKey:t,pageId:o,parentId:i,id:l})()}(e)},t.postMultiHyperLinkClick=function(e,t){var r=e.getTableConfigImmediately,n=e.getActionByKey,o=t.linkKey,i=t.column,a=t.record,l=i.code,s=(0,u.getOriginColumnCode)(l),d=r(),c=d.pageId,f=d.parentId,g=d.rowKey,p=a[g],y=n("mulHyperLinkClick");T(e,t),y({pageId:c,key:f},s,p,o)},t.postOperationItemClick=function(e,t){t.needSelectRow&&T(e,t),function(e,t){var r=e.getActionByKey,n=e.getTableConfigImmediately,o=n(),i=o.pageId,l=o.parentId,u=o.id;a.postItemClick({getActionByKey:r,pageId:i,parentId:l,id:u})(t)}(e,t)},t.postPersonalizedColumnWidth=function(e){var t=e.getTableConfigImmediately,r=e.getTableOptions,n=t(),o=n.pageId,i=n.id,l=r().getPersonalizedColumnWidth();a.postPersonalizedColumnWidth(o,i)(l)},t.postPreviewInNewTab=void 0,t.postRowClick=T,t.postRowSelection=function(e,t){var r=e.getInstance,n=e.getTableOptions,o=e.getActionByKey,i=e.getDispatch,l=(0,e.getTableConfigImmediately)(),u=n().getDataOptionsProperty("postCols"),s=i(),d=r(),c=l.pageId,f=l.parentId,g=l.id,p=t.rowKeyValue,y=void 0===p?-1:p,m=t.column,v=t.selectedRowKeys,h=t.isDoubleClick,b=d.controller.getRows(v),C=f||g;h?a.postRowDoubleClick({pageId:c,key:C,dispatch:s,getActionByKey:o,postCols:u})({selectedRows:b,selectedRowKeys:v,column:m,rowKeyValue:y}):a.postRowClick({pageId:c,key:C,dispatch:s,getActionByKey:o,postCols:u,getTableOptions:n})({selectedRows:b,selectedRowKeys:v,column:m,rowKeyValue:y})},t.postShowFormByTips=void 0,t.sendCustomRequest=function(e,t){var r=e.getTableConfigImmediately,n=e.getActionByKey,o=r().pageId,i=n("invokeCustomMethod"),a=t.method,l=t.postArgs,u=t.isNoClearPostData,s=t.colId;i(o,s,a,l,u)},t.seqOperationClick=function(e,t){var r=e.getTableConfigImmediately,n=e.getActionByKey,o=t.operationName,i=r(),a=i.pageId,l=i.parentId,u=i.id,s=n("invokeControlMethodOnly");T(e,t),s&&s({pageId:a,key:l||u},"seqOperationClick",[o])},t.setColAllChecked=void 0,t.setFilterStatus=function(e,t){var r=e.getTableConfigImmediately,n=e.getActionByKey,o=t.hasFilter,i=r(),a=i.pageId,l=i.id;n("setFilterStatus")({pageId:a,key:l},[[{hasFilter:o}]])},t.updateCellValue=function(e,t){var r=e.getActionByKey,n=e.getTableConfigImmediately,o=e.getTableOptions,i=e.getInstance,a=n(),l=a.pageId,u=a.parentId,s=a.id,c=a.rowKey,f="VIEWGRID"===o().getGridType(),p=r("cellChange"),y=r("updateGridData"),m=r("invokeCellChangeImmediately"),h=t.column,b=t.record,C=t.v,w=t.storeValue,S=h.code,E=h.extendParams,I=(void 0===E?{}:E).editor,R={pageId:l,key:u||s,fireUpdEvt:!0,isPasswordbox:(null==I?void 0:I.type)===d.default.Password},T=b[c];if(f){var O=a.entities,P=i().mergeModel,D=(0,g.getRecordPrimaryKeys)(b,O),A=function(e,t,r){if(e){var n=e.getRowGroup(t,r);if(n.length>1)return[n[0],n[n.length-1]]}}(P,T,S);m(R,[{r:T,k:S,v:C,range:A,pks:D}])}else{var _=void 0===w?C:w,M=(0,v.getUpdateGridCellArgs)(b,h,_,{getTableConfigImmediately:n,getInstance:i}),k={r:T,k:S,v:(0,v.getPostCellValue)(C,{pageId:l,id:s,code:S})};y({pageId:l,rowKey:c,key:s},M),p(R,[k])}},t.viewDetailClick=function(e,t){var r=t.code,n=t.rowKey,o=e.getTableConfigImmediately,i=e.getActionByKey,a=o().pageId,l=i("invokeControlMethodOnly");l&&l({pageId:a,key:r},"viewDetail",[{rowKey:n}])},r(9692);var o,i=C(r(211152)),a=C(r(611308)),l=r(480632),u=r(994432),s=r(48764),d=(o=r(802780))&&o.__esModule?o:{default:o},c=r(704424),f=r(323968),g=r(161932),p=r(630184),y=r(497168),m=C(r(600192)),v=r(671840),h=r(142408);function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(b=function(e){return e?r:t})(e)}function C(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=b(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e,t,r){var o;return o=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==n(o)?o:String(o))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}t.postShowFormByTips=function(e,t){var r=t.formId,n=t.targetCtrlKey,o=t.triggerType,i=e.getTableConfigImmediately,a=(0,e.getDispatch)(),l=i(),u=l.pageId,s=l.id;a((0,c.showFormByTips)(u,s,r,n,o))},t.postPreviewInNewTab=function(e,t){var r=t.curEntryRow,n=t.activedIndex,o=t.sortedUids,i=t.code,a=e.getTableConfigImmediately,l=(0,e.getDispatch)(),u=a().pageId;l((0,f.previewInNewTab)({pageId:u,key:i},[{curEntryRow:r,activedIndex:n,sortedUids:o}]))},t.postClickTipsLink=function(e,t){var r=t.code,n=(0,u.getOriginColumnCode)(r),o=(0,e.getTableConfigImmediately)().pageId;i.default[i.INVOKE_CUSTOM_EVENT](o,"",[h.CUSTOM_EVENT_CLICK_TIPS_LINK,"",n])},t.setColAllChecked=function(e,t){var r=t.colId,n=t.checked,o=t.getTableApi,i=e.getInstance,a=e.getActionByKey,l=(0,e.getTableConfigImmediately)(),u=l.pageId,s=l.id,d=i(),c=d.controller.getRows();if(d.tableModel.getIsFilterActive()){var f=a("addGirdPostData"),g=a("invokeUpdateCells");f(u,s,function(e){for(var t=[],i=0;i<e.length;i++){var a=e[i];!o().isCellLock(r,a)&&t.push({k:r,r:a.rk,v:n})}return t}(c)),g({pageId:u,key:s})}else{a("invokeControlMethodOnly")({pageId:u,key:s},"setColAllChecked",[r,n])}},t.postGridInfo=function(e,t){var r=t.gridInfo,n=e.getTableConfigImmediately,o=e.getActionByKey,i=n().pageId;o("invokeControlMethodOnly")({pageId:i},l.SAVE_SETTING,[r])};function R(e,t,r){var n=r.selectedRowKeys,o=r.isCheck,i=void 0===o||o,l=e.getInstance,u=e.getTableOptions,d=e.getActionByKey,c=e.getDispatch,f=(0,e.getTableConfigImmediately)(),g=u(),p=g.getDataOptionsProperty("postCols"),y=c(),m=l(),v=f.pageId,h=f.parentId,b=f.id,C=f.gridType,w=f.isScrollLoad,S=t.rowKeyValue,E=void 0===S?-1:S,I=t.column,R=t.isEditingTrigger,T=m.controller.getRows(n),O=h||b,P=g.getSelectAllRow();if("VIEWGRID"===C&&w||P){var D=i?"addRowSelection":"clearRowSelection",A=l(),_=(0,s.getPendingSelectedRowKeys)({getInstance:l,rowKeyValue:E,column:I}),M=A.controller.getRows(_);a.postRowSelection({pageId:v,key:O,getActionByKey:d,postCols:p,dispatch:y,gridType:C})({methodName:D,pendingSelectedRowKeys:_,pendingSelectedRows:M,rowKeyValue:E,column:I})}else a.postRowClick({pageId:v,key:O,dispatch:y,getActionByKey:d,postCols:p,getTableOptions:u})({selectedRows:T,selectedRowKeys:n,column:I,rowKeyValue:E,isEditingTrigger:R})}function T(e,t){var r=e.getInstance,n=e.getTableConfigImmediately,o=t.rowKeyValue,i=void 0===o?-1:o,a=t.column,l=r(),u=(0,s.getPostSelectedRowKeys)({getInstance:r,getTableConfigImmediately:n,rowKeyValue:i,column:a});l.controller.setSelectedRows(u),R(e,t,{selectedRowKeys:u,isCheck:!0})}},882820:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){var o=r.getTableConfigImmediately;return{initRowData:a(e,t,{getTableConfigImmediately:o}),options:s(e,t,r),initFooterRowData:i(e)!==n.TOTAL_TYPE.sticky&&u(e,t)>1?l(e,t):[]}},t.getModelOptions=s;var n=r(480632),o=r(279872),i=r(119624).metaHelper.getTotalType,a=o.dataHelper.getDatasource,l=o.dataHelper.getAggregateData,u=o.dataHelper.getDataCount;function s(e,t,r){return{rowKey:r.rowKey,mergeModel:r.mergeModel,update:!0}}},52800:function(e,t,r){"use strict";r(182320),r(909112),r(697060),r(693917),r(976896),r(606200),r(633768),r(690512),Object.defineProperty(t,"__esModule",{value:!0}),t.addCellsCopyAnimation=I,t.addTableCellCopyAnimation=R,t.addTableCellRangeCopyAnimation=function(e){var t=e.tableDom,r=e.cellRange,n=r.startRow,o=r.endRow,i=r.columns,a=r.footerRowRange;if(-1!==n){var l=(0,c.getRangeSelectionRowIndex)(n,o),u=l.startRowIndex,s=l.endRowIndex;I({rowIndexKeys:Array.from({length:s-u+1},(function(e,t){return t+u})),className:".kd-table-body",columns:i,tableDom:t})}if(a){var d=(0,c.getFooterRangeSelectionRowIndex)(a),f=d.startRowIndex,g=d.endRowIndex;I({rowIndexKeys:Array.from({length:g-f+1},(function(e,t){return t+f})),className:".kd-table-footer",columns:i,tableDom:t})}},t.addTableHeaderCopyAnimation=function(e){var t=e.tableDom,r=e.columns,n=new Set;r.forEach((function(e){if(!n.has(e.code)){var t;n.add(e.code);for(var r=null===(t=e.getParent)||void 0===t?void 0:t.call(e);r;){var o,i;n.add(r.code),r=null===(o=(i=r).getParent)||void 0===o?void 0:o.call(i)}}})),Array.from(n).forEach((function(e){var r=(0,s.isIncludeNewlineCharacter)(e)?'[data-escap-code="'.concat((0,s.getMatchEscapeNewlineCharacteStr)(e),'"]'):'[data-code="'.concat(e,'"]'),n=".kd-table-header .kd-table-header-cell".concat(r);R(t.querySelector(n))}))},t.addTableRowsCopyAnimation=function(e){var t=e.rowIndexKeys,r=e.tableDom,n=e.columns;I({rowIndexKeys:t,className:".kd-table-body",columns:n,tableDom:r})},t.copyCellRangesValue=function(e,t){var r=t.displayColumns,n=t.rowDatas,i=t.footerDataSource,a=t.rowKey,l=t.localeId,u=t.defaultLocalId,s=t.haederData;if(!Array.isArray(e))return;var d=b(e,{displayColumns:r,rowDatas:n,footerDataSource:i,rowKey:a,localeId:l,defaultLocalId:u}).map((function(e){return(t=e,function(e){if(Array.isArray(e))return h(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||v(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map((function(e){var t;return null!==(t=e[1])&&void 0!==t?t:""})).join("\t");var t})).join("\r\n"),c=s?s+d:d;(0,o.copyDataToClipboard)(c)},t.copyCellValueToClipboard=function(e){var t=e.row,r=e.value,n=e.type,i=e.column,a=e.localeId,l=e.defaultLocalId,u=e.rowPinned,s=e.haederData,d=u?E(r,n):S({row:t,value:r,type:n,column:i,localeId:a,defaultLocalId:l});w(d)||(d="\r");var c=s?s+d:d;(0,o.copyDataToClipboard)(c)},t.copyRowValue=function(e){var t=e.row,r=e.rowKey,n=e.columns,o=e.localeId,i=e.defaultLocalId;return n.reduce((function(e,n,a){return n&&n.hide?e:e+(0===a?"":"\t")+C(n,t,{rowKey:r,localeId:o,defaultLocalId:i})}),"")},t.copyValueToClipboard=function(e){(0,o.copy2Clipboard)(e)},t.getCopyCellValue=C,t.getCopyHeaderData=function(e){var t=e.columns,r=e.cellRangeColumnsCodeSet,n=t.reduce((function(e,t){var n=t.level;return r.has(t.code)&&n>e&&(e=n),e}),1),o=Array.from({length:n},(function(e,t){return t+1})),i=[];return o.map((function(e){return t.map((function(t){var n=t.level;if(!r.has(t.code))return"";var o="";if(n===e)o=t.name;else if(n<e)o="";else{var a=function(e,t){var r=e.level,n=e;for(;r>t;){var o=n.getParent();r=o.level,n=o}return n}(t,e);i.includes(a.code)||(i.push(a.code),o=a.name)}return o})).join("\t")})).join("\r\n")+"\r\n"},t.getCopyValue=S,t.parseCellRangesToRows=b,r(9692),r(622676),r(233696),r(505684),r(443616),r(323784),r(743924),r(686456),r(835164),r(492948),r(721300),r(70472),r(387912),r(764840),r(660824),r(78504),r(321164),r(997308),r(977864),r(86744);var n=r(290600),o=r(255571),i=r(145456),a=r(375248),l=r(463908),u=r(152540),s=r(552472),d=r(671840),c=r(660080),f=r(48764),g=r(994432),p=r(480632);function y(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=v(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw i}}}}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||v(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){if(e){if("string"==typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b(e,t){var r=t.displayColumns,n=t.rowDatas,o=t.footerDataSource,i=t.rowKey,a=t.localeId,l=t.defaultLocalId,u=[],s=[],d=(0,c.getCellRangesColumnsCodeSet)(e),v=(0,g.filterColumnsInAnyColsRanges)(r,d),h=(0,c.classifyCellRangesWithTableRegion)(e),b=h.body,w=h.footer;return b.length&&function(e,t,r){var o=(0,c.getBodyCellRangesStartIndex)(e),i=m(o,1)[0];if((0,c.isValidCellRangesStartRowIndex)(i)){var a,l=y(e);try{for(l.s();!(a=l.n()).done;){var u=a.value,s=u.startRow,d=u.endRow,f=u.columns,g=(0,c.getRangeSelectionRowIndex)(s,d),p=g.startRowIndex,v=g.endRowIndex;S(n,t,i,r)(p,v,f)}}catch(e){l.e(e)}finally{l.f()}}}(b,u,v),w.length&&function(e,t,r){if(e.length){var n=m((0,c.getFooterCellRangesStartRowIndex)(e),1)[0];if((0,c.isValidCellRangesStartRowIndex)(n)){var i,a=y(e);try{for(a.s();!(i=a.n()).done;){var l=i.value,u=l.footerRowRange,s=l.columns,d=(0,c.getFooterRangeSelectionRowIndex)(u),f=d.startRowIndex,g=d.endRowIndex;S(o,t,n,r)(f,g,s)}}catch(e){a.e(e)}finally{a.f()}}}}(w,s,v),u.filter((function(e){return!e.get(p.ROW_DETAIL_META_KEY)})).concat(s);function S(e,t,r,n){return function(o,u,s){for(var d=function(){var o=e[c],u=c-r,d=t[u]||function(e){return e.reduce((function(e,t){return e.set(t.code,""),e}),new Map)}(n);(0,f.isDetailRow)(o)?d.set(p.ROW_DETAIL_META_KEY,!0):s.forEach((function(e){d.set(e.code,C(e,o,{rowKey:i,localeId:a,defaultLocalId:l}))})),t[u]=d},c=o;c<=u;c++)d()}}}function C(e,t,r){var n=r.rowKey,o=r.localeId,i=r.defaultLocalId,a=e.type,l=e.getValue?e.getValue(t,t[n]):(0,d.getCellValue)(t,e);return(0,f.isRowPinned)({record:t,rowKey:n})?E(l,a):S({row:t,value:l,type:a,column:e,localeId:o,defaultLocalId:i})}function w(e){var t=Array.isArray(e)&&0===e.length;return""!==e&&null!=e&&!t}function S(e){var t=e.row,r=e.value,o=e.type,l=e.column,s=e.localeId,c=e.defaultLocalId,f=r;switch(o){case n.Ctrls.KDSelect:case n.Ctrls.KDMulSelect:case n.Ctrls.KDRadioOptGroup:case n.Ctrls.KDCheckBoxGroup:f=r.reduce((function(e,t){return e+" ".concat(t.text)}),"").trim();break;case n.Ctrls.KDDate:case n.Ctrls.KDDateTime:f=r||"";break;case n.Ctrls.VoucherAmount:case n.Ctrls.KDNumber:var g=l.extendParams,p=(0,d.getCellValue)(t,l);f=g.isFormmatedValue&&"string"==typeof p?r:(0,i.serializationSymbolNumber)(r);break;case"operate":var y=l.extendParams.editor.opr,m=void 0===y?[]:y;return(0,a.getTextesOfOperationItems)(m,r,{localeId:s,defaultLocalId:c}).filter((function(e){return""!==e})).join(" ");case"combinedField":return l.items.map((function(e,r){var n=e.code,o=e.getValue,i=e.type,a=void 0===i?"other":i,l=o?o(t):(0,d.getCellValue)(t,n);return S({row:t,value:l,type:a,column:e,localeId:s,defaultLocalId:c})})).filter((function(e){return""!==e})).join(" ");case n.Ctrls.KDMulHLink:var v=r||{},h=v.tem,b=v.data;if(!h)return"";var C=b;return C=(0,u.getMultiHyperLinkContent)(h,b,{onlyText:!0}),Array.isArray(C)?C.join(""):C;case n.Ctrls.KDAttachmentField:f=""}return"string"==typeof f&&f.includes("\n")&&(f='"'.concat(f,'"')),w(f)?f:""}function E(e,t){return t===n.Ctrls.KDNumber?(0,i.serializationSymbolNumber)((0,l.isMultiCurrencyAmountCell)(e)?e.val:e):"string"==typeof e&&e.includes("\n")?'"'.concat(e,'"'):e}function I(e){var t=e.rowIndexKeys,r=e.className,n=e.columns,o=e.tableDom;t.forEach((function(e){n.forEach((function(t){var n=t.code,i=(0,s.isIncludeNewlineCharacter)(n)?'[data-escap-code="'.concat((0,s.getMatchEscapeNewlineCharacteStr)(n),'"]'):'[data-code="'.concat(n,'"]'),a="".concat(r,' .kd-table-cell[data-rowindex="').concat(e,'"]').concat(i);R(o.querySelector(a))}))}))}function R(e){e&&e.classList.add("kd-table-cell-highlight"),e&&e.classList.add("kd-table-highlight-animation"),setTimeout((function(){e&&e.classList.remove("kd-table-cell-highlight"),e&&e.classList.remove("kd-table-highlight-animation")}),1e3)}},881968:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.largePageRowsTracking=function(e){var t,r=e.hadTrackingOfLargePageRowsRef,n=(e.getTableOptions,e.getTableConfigImmediately),o=e.useModel;if("VIEWGRID"!==n().gridType)return;var l=null==o||null===(t=o.getDataValue())||void 0===t?void 0:t.get("pagerows");if(!1===r.current&&l>=1e4){var u=n(),s=u.pageId,d=(u.id,u.parentId),c=u.type,f=u.gridType,g=u.modelKey,p=i.trackingExtendCtrlProps.GRID_WITH_LARGE_PAGE_ROWS,y=(0,a.getGridTrackingType)({type:c,gridType:f});(0,a.trackingOfGridProps)({pageId:s,controlId:d||g,controlType:y,controlProp:p,controlValue:!0}),r.current=!0}},t.resetScrollLoadOptions=function(e){var t=e.getTableOptions,r=e.getTableConfigImmediately,o=e.getActionByKey,i=e.model,a=t(),l=r();if(0===i.getDataProperty(["value","datacount"]))return;if(a.setIsScrollLoadedLastPage(!1),a.setTreeVirtualViewLoadedDataRow([]),l.scrollLoadType===n.SCROLL_LOAD_TYPE.infinite)!function(e){var t=e.getTableOptions,r=e.getTableConfigImmediately,n=e.getActionByKey,o=e.model,i=r(),a=t(),l=o.pageId,u=o.key,s=n("invokeControlMethodOnly"),d=o.getDataProperty(["value","datacount"]),c=a.getLoadedPages(),f=i.blockSize;0===c.length&&s&&s({pageId:l,key:u},"getVirtualData",[0,f]);var g=c.splice(-2);2===g.length&&1!==Math.abs(g[0]-g[1])&&g.shift();g.forEach((function(e){var t=e*f;t>d||s&&s({pageId:l,key:u},"getVirtualData",[t,f])}))}({getTableOptions:t,getTableConfigImmediately:r,getActionByKey:o,model:i}),a.setLoadedPages([]);else if("VIRTUALVIEWGRID"===l.gridType){var u=l.blockSize,s=i.pageId,d=i.key,c=o("invokeControlMethodOnly");c&&c({pageId:s,key:d},"getVirtualData",[0,u])}},t.setAggregateData=function(e,t,r,o){o.getTotalType()!==n.TOTAL_TYPE.sticky&&t.setFooterRows(e);r.dispatchEvent({type:u.KD_TABLE_EVENT_NAMES.footerRowDataChanged,params:{footerRowData:e}})},t.updateInstanceModelWhenDataChanged=function(e,t){var r=t.getInstance,n=t.getTableConfigImmediately,i=t.getTableOptions,a=t.model,u=r(),s=n();u.tableModel.setRows(e),u.mergeModel.updateMergeModel(s.entities,e,s.rowKey,s.rowDetailOptions.type),u.mergeModel.updateBorderCols(s.columns,a.getMetaProperty("columns")||(0,o.List)(),s.seqKey),(0,l.setRightBorderCols)({columns:s.columns,getTableOptions:i})},r(233696),r(927184),r(387912),r(997308);var n=r(480632),o=r(891052),i=r(49480),a=r(816880),l=r(741864),u=r(94580)},157376:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.getTableCell=function(e,t){var r=t.containerEleRef,o=t.rowKey,i=t.getInstance;for(;e&&r.current.contains(e);){if("table-cell"===e.getAttribute("data-role")){var a=e.getAttribute("data-code"),l=parseInt(e.getAttribute("data-rowindex")),u=i().controller.getRowByIndex(l);return{rowKeyValue:null==u?void 0:u[o],code:a,isFooterCell:n(e,{containerEleRef:r})}}e=e.parentElement}return null},t.getTableFooterElement=function(e){var t;return null===(t=e.current)||void 0===t?void 0:t.querySelector(".kd-table-footer")},t.isWindow=function(e){return"[object Window]"===e.toString()||"[object global]"===e.toString()},t.scrollFooterRowToBottom=function(e){e&&(e.scrollTop=e.scrollHeight)},r(976896),r(387912),r(571176),r(690512);var n=function(e,t){for(var r=t.containerEleRef;e&&r.current.contains(e);){if(e.classList.contains("kd-table-footer"))return!0;e=e.parentElement}return!1}},192372:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.dispathThemeChanged=t.dispatchFooterRowClick=t.dispatchDoAutoSize=t.dispatchBodyRowClick=void 0;var n=r(94580),o=function(e){return function(t,r){e.dispatchEvent({type:t,params:r})}};t.dispathThemeChanged=function(e){return function(t){o(e)(n.KD_TABLE_EVENT_NAMES.themeChanged,{trigger:t})}},t.dispatchBodyRowClick=function(e){return function(t){var r=t.event,i=t.record,a=t.rowIndex;o(e)(n.KD_TABLE_EVENT_NAMES.rowClick,{event:r,record:i,rowIndex:a})}},t.dispatchFooterRowClick=function(e){return function(t){var r=t.event,i=t.record,a=t.rowIndex;o(e)(n.KD_TABLE_EVENT_NAMES.footerRowClick,{event:r,record:i,rowIndex:a})}},t.dispatchDoAutoSize=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(e)(n.KD_TABLE_EVENT_NAMES.doAutoSizeColumns,t)}}},281376:function(e,t,r){"use strict";r(182320),r(909112),r(697060),r(505684),r(743924),r(693917),r(976896),r(721300),r(606200),r(633768),r(690512),r(78504),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.createResetFilterValue=function(e){return{code:e}},t.getFilterRequestParams=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,a=(0,o.getOriginColumnCode)(e.code),l=function(e,t){var r,o=(0,n.find)(e,(function(e){return e.dataIndex===t}));if(null!=o&&null!==(r=o.items)&&void 0!==r&&r.length&&o.sff)return o.items.find((function(e){return e.dataIndex===o.sff}));return o}(t,a);if(!l)return console.warn("没找到过滤目标列"),[];var u=r&&l.enableBasedataEnumFilter&&(g=l.filterItems,p=e.filterCondition,y=Array.isArray(g)&&g.find((function(e){return e.id===p})),null==y?void 0:y.equal),s=l.otherFilterItems&&l.otherFilterItems.length>0,d=l.otherFilterItems&&l.otherFilterItems[0].fieldName,c=function(e,t){if(t)return e?e.map((function(e){return e[2]})):[];return e?(r=e,function(e){if(Array.isArray(e))return i(e)}(r)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()):[];var r}(e.filter,u),f={FieldName:[d],Value:[],Compare:[]};var g,p,y;if(s&&c.length>0){var m=c.pop();f={FieldName:[m.fieldName],Value:m.value?[m.value]:[],Compare:m.id?[m.id]:[]}}var v=[[{FieldName:[l.dataIndex],Value:c||[],Compare:e.filterCondition?[e.filterCondition]:[]}]];return s&&v[0].push(f),v},r(622676),r(305092),r(323784),r(835164),r(387912);var n=r(633016),o=r(994432);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}},45244:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(743924),r(606200),r(534440),r(387912),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.eventServiceController=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=a?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(o,l,u):o[l]=e[l]}return o.default=e,r&&r.set(e,o),o}(r(192372));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}t.eventServiceController=o},741864:function(e,t,r){"use strict";function n(e,t,r){var n;if(!t.cprop)return!1;if(null!==(n=t.cprop.nomerge)&&void 0!==n&&n.includes(r))return!1;var o=t[r],i=e[r];return Array.isArray(o)&&Array.isArray(i)?o[0]===i[0]:i===o}r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.getVirtualViewMergeRowSpan=function(e,t){var r=t.getTableOptions,o=t.getTableConfigImmediately,i=r(),a=o().rowKey,l=i.getMetaOptionsProperty("mergeColumns");if(l.length>0)return l.reduce((function(t,r){return t[r]=function(e,t){var r=t.rowKey,o=t.code,i=1,a={},l=0,u=1;for(;l<u&&l<e.length;){if(u<e.length&&n(e[l],e[u],o))u++,i++;else{for(var s=l;s<u;s++){a[e[s][r]]=i,i--,l++}i=1}l===u&&u++}return a}(e,{rowKey:a,code:r}),t}),{});return{}},t.setRightBorderCols=function(e){var t=e.columns,r=(0,e.getTableOptions)(),n=r.getMetaOptionsProperty("mergeColumns")||[];if(n.length>0){var o=function(e,t){var r=null;return e.reduce((function(e,n){var o=n.hide,i=n.code;return o?e:t.includes(i)?(null!==r&&e.push(r.code),e.push(n.code),r=null,e):(r=n,e)}),[])}(t,n);r.setRightBorderCols(o)}},r(443616),r(323784),r(492948),r(387912),r(660824)},926516:function(e,t,r){"use strict";r(360776),r(622676),r(205960),r(846428),r(969e3),r(606200),r(534440),r(76152),Object.defineProperty(t,"__esModule",{value:!0}),t.convertToJS=function(e){if(n.Map.isMap(e))return e.toJS();return e},t.deleteObjectProps=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e);return t.forEach((function(e){delete r[e]})),r},t.isObjectEmpty=function(e){if(null==e)return!0;if(n.Map.isMap(e))return 0===e.size;return"object"!==a(e)||0===Object.keys(e).length},r(182320),r(909112),r(697060),r(233696),r(743924),r(76124),r(387912),r(78504),r(997308),r(977864);var n=r(891052);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e,t,r){var n;return n=function(e,t){if("object"!=a(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==a(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}},107816:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.getRowSelectedParams=function(e){var t=e.parentModel,r=e.model,n=e.getInstance,o=e.getTableConfigImmediately,i=e.getTableOptions,a=t||r,l=n(),u=o(),s=l.controller.getSelectedRowKeys(),d=l.controller.getSelectedRows(),c=l.controller.getFocusedCell(),f=i().getDataOptionsProperty("postCols"),g=a.pageId,p=u.rowKey,y=u.rowSelection,m=u.parentId,v=u.id;return{pageId:g,key:m||v,rowKey:p,rowSelection:y,selectedRowKeys:s,selectedRows:d,focusedCell:c,postCols:f}}},656808:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.personalizedColumnWidthGetter=void 0;var n=r(312020);t.personalizedColumnWidthGetter=function(e){var t=e.model,r=e.getTableOptions;return function(e,o){return(0,n.getPersonalizedColumnWidth)({personalizedColumnWidth:r().getPersonalizedColumnWidth(),colId:e,type:o,model:t})}}},660080:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.cellRangesOutOfSizeTips=function(e){var t=[{content:(0,d.getLangMsg)("grid.key0051"),duration:3500,type:2}];(0,c.setDataMessages)(e,t)},t.cellRangesOverlapTips=function(e){var t=[{content:(0,d.getLangMsg)("grid.key0050"),duration:3500,type:2}];(0,c.setDataMessages)(e,t)},t.classifyCellRangesWithTableRegion=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce((function(e,t){var r=t.startRow,n=t.footerRowRange;return-1!==r&&e.body.push(t),n&&e.footer.push(t),e}),{body:[],footer:[]})},t.getBodyCellRangesStartIndex=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce((function(e,t){var r=y(t.startRow,t.endRow).startRowIndex;return e[0]=Math.min(e[0],r),e}),[Number.MAX_SAFE_INTEGER])},t.getCellRangeCalculatedResult=w,t.getCellRangeId=h,t.getCellRangeRowCount=C,t.getCellRangeSelectedRowDatas=v,t.getCellRangesColumnsCodeSet=function(e){return e.reduce((function(e,t){return t.columns.forEach((function(t){return e.add(t.code)})),e}),new Set)},t.getCellRangesResult=function(e,t){var r=t.getTableOptions,n=t.getInstance,o=t.getTableConfigImmediately,i=t.getTableApi,a={plus:new s.default(0),average:new s.default(0),count:0,numberCount:0},l=r();return e.forEach((function(e){var t=h(e);if(!l.getCellRangesSumResult(t)){var r=w(e,{getInstance:n,getTableConfigImmediately:o,getTableApi:i});l.setCellRangesSumResult(t,r)}a=E(a,l.getCellRangesSumResult(t))})),a},t.getFooterCellRangesStartRowIndex=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce((function(e,t){var r=t.footerRowRange;if(r){var n=y(r.startRow,r.endRow).startRowIndex;e[0]=Math.min(e[0],n)}return e}),[Number.MAX_SAFE_INTEGER])},t.getFooterRangeSelectionRowIndex=m,t.getRangeSelectionRowIndex=y,t.isCellInRange=p,t.isCellInRanges=function(e,t,r,n){return!!Array.isArray(e)&&e.some((function(e){return p(e,t,r,n)}))},t.isCellRangesOverlap=function(e,t){var r=t.getInstance,n=t.getTableConfigImmediately;if(e.length<=1)return!1;var o=[];return e.some((function(e){var t=n().seqKey;if(!e.columns.some((function(e){return(0,i.isNumberCol)(e,{seqKey:t})})))return!1;var a=b(e,{getInstance:r});return!!o.some((function(e){return n=function(e,t){return Math.max(e.startRowIndex,t.startRowIndex)<=Math.min(e.endRowIndex,t.endRowIndex)}(t=e,r=a),o=function(e,t){var r=e.columns.length>t.columns.length?e.columns:t.columns,n=e.columns.length>t.columns.length?t.columns:e.columns;if(0===r.length||0===n.length)return!1;var o=n[0],i=n[n.length-1];return r.some((function(e){return e.code===o.code||e.code===i.code}))}(t,r),n&&o;var t,r,n,o}))||(o.push(a),!1)}))},t.isCellRangesSumRowOutOfSize=function(e,t){var r=t.getInstance,n=t.getTableConfigImmediately;return e.some((function(e){var t=n().seqKey;return!!e.columns.some((function(e){return(0,i.isNumberCol)(e,{seqKey:t})}))&&C(e,{getInstance:r})>f.CELL_RANGE_SUM_MAX_COUNT}))},t.isValidCellRangesStartRowIndex=function(e){return e!==Number.MAX_SAFE_INTEGER},t.mergeCellRangesResult=E,r(613468),r(233696),r(323784),r(743924),r(492948),r(704180),r(846428),r(300116),r(387912),r(764840),r(78504),r(997308),r(977864);var n,o=r(480632),i=r(994432),a=r(671840),l=r(48764),u=r(145456),s=(n=r(585232))&&n.__esModule?n:{default:n},d=r(331428),c=r(218652),f=r(273248),g=r(463908);function p(e,t,r,n){var o=e.startRow,i=e.endRow,a=e.columns,l=e.footerRowRange;if(!(-1!==a.findIndex((function(e){return e.code===r}))))return!1;var u=y(o,i),s=u.startRowIndex,d=u.endRowIndex,c=m(l),f=c.startRowIndex,g=c.endRowIndex;return n&&l&&t>=f&&t<=g||!n&&t>=s&&t<=d}function y(e,t){var r=e>t;return{startRowIndex:r?t:e,endRowIndex:r?e:t}}function m(e){return e?y(e.startRow,e.endRow):{startRowIndex:-1,endRowIndex:-1}}function v(e){var t=e.cellRange,r=e.rowDatas,n=e.footerDataSource;if(!t)return[];var i=t.startRow,a=t.endRow,l=t.footerRowRange,u=[];if(-1!==i)for(var s=y(i,a),d=s.startRowIndex,c=s.endRowIndex,f=d;f<=c;f++){var g=r[f];g[o.ROW_DETAIL_META_KEY]||u.push(g)}if(l&&n.length>0)for(var p=m(l),v=p.startRowIndex,h=p.endRowIndex,b=v;b<=h;b++){var C=n[b];u.push(C)}return u}function h(e){var t=e.startRow,r=e.endRow,n=e.footerRowRange,o=e.columns,i=y(t,r),a=i.startRowIndex,l=i.endRowIndex,u=m(n);return a+"_"+l+"_"+u.startRowIndex+"_"+u.endRowIndex+"_"+o[0].code+"_"+o[o.length-1].code}function b(e,t){var r=t.getInstance,n=e.startRow,o=e.endRow,i=e.footerRowRange,a=e.columns,l=r().controller.getRowDatas().length,u=y(n,o),s=u.startRowIndex,d=u.endRowIndex,c=m(i),f=c.startRowIndex,g=c.endRowIndex;return{startRowIndex:-1!==s?s:l+f,endRowIndex:-1!==g?l+g:d,columns:a}}function C(e,t){var r=b(e,{getInstance:t.getInstance}),n=r.startRowIndex;return r.endRowIndex-n+1}function w(e,t){var r=t.getInstance,n=t.getTableConfigImmediately,o=t.getTableApi,a=r(),u=n(),d=o(),c=u.seqKey,f=u.rowKey,g=v({cellRange:e,rowDatas:a.controller.getRowDatas(),footerDataSource:a.controller.getFooterDataSource()}),p=e.columns,y=p.reduce((function(e,t){var r=function(e,t){var r=t.rows,n=t.tableApi,o=0,i=0;for(;i<r.length;){o++;var a=r[i];i+=n.getCellSpan(a,e)}return o}(t,{rows:g,tableApi:d});return e.numberCellCount+=(0,i.isNumberCol)(t,{seqKey:c})?r:0,e.cellCount+=r,e}),{numberCellCount:0,cellCount:0}),m=y.numberCellCount,h=y.cellCount,b=p.reduce((function(e,t){var r=function(e,t,r){var n=r.seqKey,o=r.tableApi,a=r.rowKey,u=new s.default(0),d=0,c=(0,i.isNumberCol)(e,{seqKey:n});if(!c)return u;for(;d<t.length;){var f=t[d],g=S(f,e,(0,l.isRowPinned)({rowKey:a,record:f})),p=new s.default(g);u=u.plus(p),d+=o.getCellSpan(f,e)}return u}(t,g,{seqKey:c,tableApi:d,rowKey:f});return e.plus(r)}),new s.default(0)),C=0===m?new s.default(0):b.div(m);return{plus:b,average:C,count:h,numberCount:m}}function S(e,t,r){var n=t.code,o=t.extendParams,i=(0,a.getCellValue)(e,n),l=o.isFormmatedValue;return i?l&&Array.isArray(i)?(0,u.serializationSymbolNumber)(i[0])||0:r&&(0,g.isMultiCurrencyAmountCell)(i)?(0,u.serializationSymbolNumber)(i.val)||0:(0,u.serializationSymbolNumber)(i)||0:0}function E(e,t){if(!e)return t;if(!t)return e;var r=e.plus,n=e.count,o=e.numberCount,i=t.plus,a=t.count,l=t.numberCount,u=r.plus(i),d=n+a,c=o+l,f=0===c?new s.default(0):u.div(c);return{plus:u,count:d,numberCount:c,average:f}}},725808:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.shouldCellRangesSumTracking=function(e,t){if(e===n.GRID_TYPE.listViewGrid)return!0===t;if(e===n.GRID_TYPE.virtualViewGrid||void 0===e)return!1===t;return!1};var n=r(480632)},29280:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.getNextValidateFailedCol=function(e,t,r){var n=t.findIndex((function(t){return t.code===e}));n++;for(;n<t.length;){var o=t[n];if(r.has(o.code))return o;n++}return null},t.updateValidateFailedCellCount=function(e){var t=e.pageId,r=e.id,i=e.rowKey,l=e.tableApi,u=e.controller;(0,n.setPageData)(t,[r,o.VALIDATE_FAILED_COUNT],function(e){var t=e.rowKey,r=e.tableApi,n=e.controller,o=e.validateFailedCountData,i=0,a=r.hasFilter(),l=o.cellCountPerRowMap,u=o.cellCount;if(a&&u){var s,d=0;null===(s=n.getRows())||void 0===s||s.forEach((function(e){l.has(e[t])&&(d+=l.get(e[t]))})),i=u-d}return i}({rowKey:i,tableApi:l,controller:u,validateFailedCountData:a(t,r)}))},r(613468),r(233696),r(743924),r(492948),r(70472),r(387912),r(78504),r(997308),r(977864);var n=r(738704),o=r(273248),i=r(218652);function a(e,t){var r={cellCountPerRowMap:new Map,cellCount:0},n=(0,i.getGridValidateData)(e,[t]);return n?n.reduce((function(e,t,r){return e.cellCountPerRowMap.set(r,t.size),e.cellCount+=t.size,e}),r):r}},134644:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(505684),r(743924),r(693917),r(976896),r(721300),r(606200),r(534440),r(387912),r(633768),r(690512),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.gridContainerEle,r=e.getAllDisplayColumns,n=e.getRowCount,s=e.getRowByIndex,d=e.getNoMatchTips,p=e.getCellDispalyValue,y=e.getFocusedCell,m=e.handleMatchCell,v=e.resetNoMatchListFlag,h=c((0,o.useState)(!1),2),b=h[0],C=h[1],w=c((0,o.useState)(""),2),S=w[0],E=w[1],I=c((0,o.useState)([]),2),R=I[0],T=I[1],O=(0,o.useRef)();(0,o.useEffect)((function(){T([])}),[v]),(0,o.useEffect)((function(){b?null==t||t.classList.add("kd-table-grid-quick-search"):null==t||t.classList.remove("kd-table-grid-quick-search")}),[b]),(0,o.useEffect)((function(){return t&&t.addEventListener("keydown",P),document.addEventListener("keydown",D),function(){t&&t.removeEventListener("keydown",P),document.removeEventListener("keydown",D)}}),[]);var P=function(e){var t;(e.ctrlKey||e.metaKey)&&e.keyCode===a.KEYS.F&&(e.preventDefault(),C(!0),null===(t=O.current)||void 0===t||t.focus())},D=function(e){e.keyCode===a.KEYS.ESC&&M()},A=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(""!==S&&!R.includes(S)){var t,o=y()||{},i=r(),a=o.rowIndex,l=o.code,u=n(),s=_({rowIndex:a,columns:i,rowCount:u,code:l,isSearchAfter:e});s?m(s):T([].concat(function(e){if(Array.isArray(e))return g(e)}(t=R)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||f(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[S]))}},_=function(e){for(var t=e.rowIndex,r=e.columns,n=e.rowCount,o=e.code,i=e.isSearchAfter,a=void 0===i||i,l=a?r:r.reverse(),u=Math.max(t||0,0),d=Math.max(l.findIndex((function(e){return e.code===o})),0),c=0;c<=n;c++)for(var f=(u+(a?c:n-c))%n,g=0;g<l.length;g++)if(!(0===c&&g<=d)){var y=l[g],m=s(f),v=p(m,y);if(null!=v&&v.includes(S))return{code:y.code,rowIndex:f,record:m}}return null},M=function(){C(!1)},k=(0,l.default)(["hover-theme-border-color1",i.default["search-input"]]),L=(0,l.default)(["hover-theme-border-color1",i.default["search-btn"]]),j=(0,l.default)(["kdfont","kdfont-guanbi8","kd-hover-color",i.default.icon]),N=(0,l.default)(["kdfont","kdfont-shangla","kd-hover-color",i.default.icon]),V=(0,l.default)(["kdfont","kdfont-xiala","kd-hover-color",i.default.icon]),K=R.includes(S);return b?o.default.createElement("div",{className:i.default["grid-quick-search-container"]},o.default.createElement("div",{className:i.default["search-box"]},o.default.createElement("div",{className:i.default["search-box-content"]},o.default.createElement("input",{ref:O,className:k,value:S,onKeyDown:function(e){if(e.keyCode===a.KEYS.ENTER){var t=e.shiftKey;A(!t)}},onChange:function(e){var t=e.target.value;E(t)}}),o.default.createElement("button",{className:L,onClick:function(){return A()}},(0,u.getLangMsg)("gridSearch.key001")),o.default.createElement("span",{className:N,onClick:function(){return A(!1)}}),o.default.createElement("span",{className:V,onClick:function(){return A()}})),o.default.createElement("span",{className:j,onClick:M})),K?o.default.createElement("div",{className:i.default["no-found-box"]},d()):null):null},r(9692),r(613468),r(443616),r(323784),r(885612),r(660824);var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(795520)),i=s(r(259168)),a=r(703188),l=s(r(671252)),u=r(331428);function s(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||f(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){if(e){if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}},791680:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(743924),r(205960),r(846428),r(606200),r(78504),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.className,r=e.dataSource,n=void 0===r?[]:r,d=e.dataIndex,f=void 0===d?{}:d,g=e.seqName,p=e.getColumnMap,y=n.reduce((function(e,t){return Object.keys(t).forEach((function(r){e[r]||(e[r]=[]),e[r].push(t[r])})),e}),{}),m=Object.keys(f).filter((function(e){return void 0!==y[e]&&e!==g})).sort((function(e,t){return f[e]-f[t]})),v=p();return o.default.createElement("div",{className:(0,i.default)(l.default["tile-aggregate-wrapper"],c({},t,!!t))},o.default.createElement("div",{className:l.default["tile-aggregate-title"]},(0,a.getLangMsg)("grid.key0019")),o.default.createElement("div",{className:l.default["tile-aggregate-list"]},m.map((function(e){var t=y[e],r=v.get(e);return null==r||null==r.name||r.hide?null:o.default.createElement("div",{className:l.default["tile-aggregate-list-item"],key:e},r.name,"：",t.map((function(e,t){return o.default.createElement("span",{key:r.name+t,className:l.default["tile-aggregate-list-item-value"]},(0,s.isMultiCurrencyAmountCell)(e)?o.default.createElement(u.default,{value:e,displayValue:e.val}):e)})))}))))},r(622676),r(233696),r(835164),r(492948),r(82e3),r(721300),r(76124),r(387912),r(997308);var o=d(r(795520)),i=d(r(671252)),a=r(331428),l=d(r(259168)),u=d(r(727868)),s=r(463908);function d(e){return e&&e.__esModule?e:{default:e}}function c(e,t,r){var o;return o=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==n(o)?o:String(o))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},74384:function(e,t,r){"use strict";r(697060),r(622676),r(233696),r(743924),r(969e3),r(606200),r(534440),r(76152),r(76124),r(78504),r(997308),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.arrow,r=e.handleClick,a=e.topStyle,l=void 0===a?{}:a,u=e.bottomStyle,d=void 0===u?{}:u;return n.default.createElement("div",null,t.top?n.default.createElement("div",{onClick:r,"data-arrow":"top",className:(0,o.default)(i.default["arrow-icon"],"kdfont kdfont-dingbuyichang"),style:s({top:0},l)}):null,t.bottom?n.default.createElement("div",{onClick:r,"data-arrow":"bottom",className:(0,o.default)(i.default["arrow-icon"],"kdfont kdfont-dibuyichang"),style:s({bottom:0},d)}):null)},r(182320),r(909112),r(360776),r(205960),r(846428),r(387912);var n=a(r(795520)),o=a(r(671252)),i=a(r(259168));function a(e){return e&&e.__esModule?e:{default:e}}function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){var n;return n=function(e,t){if("object"!=l(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==l(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},339405:function(e,t,r){"use strict";r(697060),r(743924),r(606200),r(78504),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.errorCount,r=e.clearFilter,a=e.className;return n.default.createElement("div",{className:(0,o.default)(i.default["validate-tip"],"kd-cq-table-filtered-valid-tip",u({},a,!!a))},n.default.createElement("span",{className:"kdfont kdfont-jinggao-mian"}),n.default.createElement("span",{className:i.default["validate-tip-text"]},t,"个错误项被隐藏"),n.default.createElement("span",{onClick:r,className:i.default["validate-tip-btn"]},"取消筛选"))},r(182320),r(909112),r(360776),r(205960),r(846428),r(387912);var n=a(r(795520)),o=a(r(671252)),i=a(r(259168));function a(e){return e&&e.__esModule?e:{default:e}}function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t,r){var n;return n=function(e,t){if("object"!=l(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==l(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},925908:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(622676),r(233696),r(505684),r(743924),r(693917),r(205960),r(721300),r(846428),r(969e3),r(606200),r(534440),r(76152),r(76124),r(633768),r(78504),r(776512),r(997308),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.pageId,r=e.gridId,n=e.getParentElement,a=b((0,o.useState)({plus:new i.default(0),average:new i.default(0),count:0,numberCount:0}),2),l=a[0],f=a[1],g=b((0,o.useState)(v({},w)),2),p=g[0],y=g[1];if((0,o.useEffect)((function(){var e=(0,u.addDataChangeListener)(t,[s.CELL_RANGES_SUM_RESULT,r],(function(e){f(e)}));return function(){e()}}),[]),l.numberCount<=1||!1===l.isValid)return null;var m=function(e){return(0,c.formatNumber)(e,{zeroShow:!0,decimalLength:10,noDisplayDecimalTailZero:!0})},h=(0,d.getLangMsg)("grid.key0047")+"："+m(l.plus.toFixed(10).toString()),C=(0,d.getLangMsg)("grid.key0049")+"："+m(l.average.toFixed(10).toString());return o.default.createElement(S,{plusString:h,averageString:C,getParentElement:n,position:p,updatePosition:function(e){y(e||v({},w))}})},r(323784),r(976896),r(999768),r(387912),r(23544),r(690512);var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=y(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(795520)),i=p(r(585232)),a=p(r(671252)),l=p(r(139224)),u=r(738704),s=r(273248),d=r(331428),c=r(786392),f=r(683088),g=p(r(259168));function p(e){return e&&e.__esModule?e:{default:e}}function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(y=function(e){return e?r:t})(e)}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){var o;return o=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==n(o)?o:String(o))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var w={left:50,bottom:50};function S(e){var t=e.plusString,r=e.averageString,n=e.getParentElement,i=e.position,u=e.updatePosition,s=(0,o.useRef)(),d=(0,o.useRef)({left:0,bottom:0}),c=(0,o.useRef)({}),p=(0,o.useCallback)((function(){d.current.left=parseFloat(s.current.style.left),d.current.bottom=parseFloat(s.current.style.bottom)}),[]),y=(0,o.useCallback)((function(e,t,r,n,o,i,a,l){"finished"===i&&u({left:d.current.left+a,bottom:d.current.bottom-l})}),[]);return(0,o.useEffect)((function(){(0,f.dragElement)(s.current,{parentElement:n?n():s.current.parentElement,onStart:p,onMove:y,dragRegion:{left:9,width:22},savePosition:!1,moveToBody:!0,allIn:!0})}),[n]),(0,o.useEffect)((function(){var e=n?n():s.current.parentElement;!function(){if(!c.current.left||!c.current.bottom){var t=m(e.clientWidth,e.clientHeight);v(t.left,t.bottom)}}();var t=(0,l.default)(e,(function(e){var t=e.width,r=e.height;if(!e.hide){var n=m(t,r);v(n.left,n.bottom),function(e,t){s.current.style.left=function(e){return Math.max(0,Math.min(e,c.current.left))}(e)+"px",s.current.style.bottom=function(e){return Math.max(0,Math.min(e,c.current.bottom))}(t)+"px"}(parseFloat(s.current.style.left),parseFloat(s.current.style.bottom))}}));return function(){t.removeResizeObserve(),t=null}}),[n]),o.default.createElement("div",{ref:s,className:g.default["cell-ranges-sum-container"],style:i},o.default.createElement("i",{className:(0,a.default)("kdfont kdfont-tuozhuai kd-hover-color",g.default["move-icon"])}),o.default.createElement("div",{className:g.default["sum-item-area"]},o.default.createElement("span",{className:g.default["sum-item"]},t),o.default.createElement("span",{className:g.default["sum-item"]},r)));function m(e,t){return{left:e-s.current.offsetWidth,bottom:t-s.current.offsetHeight}}function v(e,t){c.current.left=e,c.current.bottom=t}}},94660:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(505684),r(743924),r(693917),r(976896),r(721300),r(606200),r(534440),r(387912),r(633768),r(690512),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(323784);var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(795520)),i=f(r(452860)),a=f(r(671252)),l=r(331428),u=r(738704),s=r(199860),d=f(r(201840)),c=r(94880);function f(e){return e&&e.__esModule?e:{default:e}}function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}t.default=function(e){var t=e.model,r=e.dataCount,n=e.pageIndex,f=e.pageRows,g=e.hasSelectAllRow,y=e.handleVirtualViewSelectAll,m=e.dataValueTimeStamp,v=e.isSingleSelection,h=e.showRowCount,b=e.isRealDataCount,C=e.handleSetPageIndex,w=e.handleSetPageSize,S=e.showPagination,E=e.rowCount,I=e.isLast,R=p((0,o.useState)(!1),2),T=R[0],O=R[1],P=p((0,o.useState)(0),2),D=P[0],A=P[1];(0,o.useEffect)((function(){O(!!b&&(D>0&&D===r))}),[D,b,m]),(0,o.useEffect)((function(){var e=t.pageId,r=t.key,n=(0,u.getPageData)(e,[r,"selectedInfo"]);if(n){var o=n.get("selectedRowsCount")||0;A(o)}var i=(0,u.addDataChangeListener)(e,[r,"selectedInfo"],(function(e){var t=e.get("selectedRowsCount")||0;A(t)}));return function(){i()}}),[]);var _,M,k,L=function(e,t){t!==f?w(t):n!==e&&C(e)},j=function(e,t){"setPageRows"===t?w(e):"setPageIndex"===t&&C(e)},N=h?"，":"";return o.default.createElement("div",{className:(0,a.default)(i.default["virtual-view-toolbar"],"kd-cq-toolbar")},o.default.createElement("div",{className:i.default["toolbar-content"]},b&&r>0&&o.default.createElement(o.default.Fragment,null,o.default.createElement("span",{className:i.default["toolbar-content-item"]},D>0&&!v?(0,l.getLangMsg)({key:"toolbar.key0007",variables:{count:D}})+N:""),o.default.createElement("span",{className:i.default["toolbar-content-item"]},h?(0,l.getLangMsg)({key:"toolbar.key0017",variables:{count:r}}):"")),g&&(r>0||!b)&&o.default.createElement("span",{onClick:function(e){y(T),O(!T)},className:(0,a.default)("theme-fc",i.default["toolbar-selected-button"])},T?(0,l.getLangMsg)("toolbar.key0002"):(0,l.getLangMsg)("toolbar.key0003"))),S&&(_=[200,500,1e3,2e3,5e3],M=(0,a.default)("kd-cq-pagination",i.default["pagination-info"]),k={getPopupContainer:function(){return(0,c.getRootContainter)()},placement:"bottomRight",scrollHidden:!0,popperStyle:{zIndex:1050,minWidth:67,display:"block"},popperClassName:"kd-cq-dropdown kd-cq-dropdown-select-type kd-cq-pagination-dropdown"},b?o.default.createElement(s.Pagination,{className:M,total:r,pageType:"basic",current:n,onChange:L,showSizeChanger:!0,pageSize:f,dropdownProps:k,pageSizeOptions:_}):o.default.createElement(d.default,{pageId:t.pageId,current:n,pageSize:f,isLastPage:I,rowcount:E,pageType:"basic",pageSizeOptions:_,dropdownProps:k,setAmountOperation:j})))}},514267:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(505684),r(743924),r(693917),r(976896),r(721300),r(606200),r(534440),r(387912),r(633768),r(690512),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.model,r=e.pageId,n=e.id,o=e.dispatch,d=e.activeView,f=e.setActiveView,g=e.activeRowKey,p=e.viewParams,y=e.getRowDatas,m=e.getRow,v=e.getFiledVisible,h=e.getFieldLocked,b=e.getColProperty,C=e.setSelectRows,w=e.getDataProperty,S=e.postRowSelection,E=e.params,I=(P=(0,i.useState)(0),D=2,function(e){if(Array.isArray(e))return e}(P)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(P,D)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(P,D)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),R=I[0],T=I[1],O=(0,i.useRef)(g);var P,D;O.current=g;var A=function(e){var r=t.getMetaProperty("columns")||(0,s.List)(),n=(0,u.listFind)(r,(function(t){return t.get("dataIndex")===e}));return n||console.warn("".concat(e," column meta not found!")),null==n?void 0:n.toJS()},_=function(e){d!==e&&(f(e),(0,a.setPageData)(r,[n,"viewType"],e)),"grid"!==e&&R!==O.current&&T(O.current)},M=function(e){R!==e&&(C([e]),T(e))};return(0,i.useEffect)((function(){"grid"!==d&&setTimeout((function(){(y()||[]).length>0&&S&&S(O.current)}))}),[d]),(0,i.useEffect)((function(){var e=(0,a.getPageData)(r,[n,"switchGridView"]);e&&_(e)}),[]),(0,i.useEffect)((function(){var e=(0,a.addDataChangeListener)(r,[n,"setActiveRowKey"],M),t=(0,a.addDataChangeListener)(r,[n,"switchGridView"],_);return function(){e(),t()}}),[d,g]),i.default.createElement("div",{style:{display:"grid"===d?"none":"block",height:"100%"}},p.map((function(e){return"tiledView"===e.type?i.default.createElement(i.Suspense,{fallback:i.default.createElement("div",null)},i.default.createElement(l.default,{meta:e.meta,key:e.type,dispatch:o,activeView:d,activeRowKey:R,setActiveRowKey:M,getColMetaByField:A,getFiledVisible:v,getFieldLocked:h,getRowDatas:y,getRow:m,getColProperty:b,getDataProperty:w,postRowSelection:S,params:E})):null})))},r(323784),r(835164),r(86744);var o,i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(795520)),a=r(738704),l=(o=r(775812))&&o.__esModule?o:{default:o},u=r(633016),s=r(891052);function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}},775812:function(e,t,r){"use strict";r(697060),r(360776),r(505684),r(743924),r(693917),r(205960),r(976896),r(721300),r(846428),r(606200),r(534440),r(633768),r(690512),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.OutlineItem=I,t.TiledViewContent=S,t.TiledViewOutline=E,t.default=function(e){var t=e.meta,r=e.dispatch,o=e.key,i=e.activeView,a=e.activeRowKey,l=e.getColMetaByField,u=e.getFiledVisible,s=e.getFieldLocked,d=e.getRowDatas,c=e.getRow,f=e.getColProperty,g=e.getDataProperty,p=e.setActiveRowKey,m=e.postRowSelection,v=e.params;return n.default.createElement("div",{className:y.default["view-container"]},n.default.createElement(S,{meta:t,key:o,dispatch:r,activeView:i,activeRowKey:a,getColMetaByField:l,getFiledVisible:u,getFieldLocked:s,getRowDatas:d,getRow:c,getColProperty:f,getDataProperty:g,setActiveRowKey:p,postRowSelection:m,params:v}))},r(182320),r(909112),r(233696),r(443616),r(323784),r(835164),r(336368),r(76124),r(387912),r(660824),r(997308);var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=h(e)&&"function"!=typeof e)return{default:e};var r=v(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}(r(795520)),o=r(891052),i=m(r(671252)),a=r(211152),l=r(738704),u=m(r(720756)),s=r(290600),d=r(102139),c=m(r(329132)),f=r(559100),g=r(1816),p=r(331428),y=m(r(234972));function m(e){return e&&e.__esModule?e:{default:e}}function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function b(e,t,r){var n;return n=function(e,t){if("object"!=h(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==h(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function S(e){var t=e.meta,r=e.dispatch,o=(e.key,e.activeView,e.activeRowKey),g=e.getColMetaByField,p=e.getFiledVisible,m=e.getFieldLocked,v=e.getRowDatas,h=e.getRow,w=e.getColProperty,S=e.getDataProperty,I=e.setActiveRowKey,T=e.postRowSelection,O=e.params,P=C((0,n.useReducer)((function(e){return e+1}),0),2),D=(P[0],P[1]);(0,n.useEffect)((function(){var e=O.pid,t=O.id,r=(0,l.addDataChangeListener)(e,[t,"refreshTiledView"],D);return function(){r()}}),[]);var A,_,M,k,L=function(e){return m(e,o)},j=(0,d.getSelfCommonClass)(t),N=j.Wrap,V=j.Direction,K=j.AlignItems,F=j.AlignContent,x=j.JustifyContent,G=t.get(s.STYLE),B=(0,d.getStyleInObj)(O.config,G&&G.toJS(),[],!0),H=(0,f.getDefaultPadding)(),W=H.paddingRight,z=H.paddingLeft,U=Object.assign({},{paddingRight:W,paddingLeft:z},B),q=(0,i.default)(b({},y.default["tile-content"],!0),(0,c.default)({Wrap:N,Direction:V,AlignItems:K,AlignContent:F,JustifyContent:x})),Y=v()||[];return n.default.createElement(n.default.Fragment,null,0===Y.length?n.default.createElement(R,null):n.default.createElement(n.default.Fragment,null,n.default.createElement(E,{meta:t,getRowDatas:v,getColMetaByField:g,params:O,activeRowKey:o,setActiveRowKey:I,postRowSelection:T,columnDefs:null}),n.default.createElement("div",{style:U,className:q},(A=O.pid,_=t.get("items"),M=h(o)||{},k=Object.keys(M),_&&k.length>0?_.map((function(e){return(0,u.default)(A,e,(0,a.getGlobalState)(),void 0,{params:O,rowData:M,getFiledVisible:p,getFieldLocked:L,activeRowKey:o,getColMetaByField:g,getColProperty:w,getDataProperty:S,dispatch:r})})):null))))}function E(e){var t,r=e.meta,i=e.getRowDatas,a=e.getColMetaByField,l=e.params,u=e.activeRowKey,d=e.setActiveRowKey,c=e.postRowSelection,f=e.columnDefs,g=!0;return""===r.get("outlineField",(0,o.List)()).get(1,"")&&(t={width:50},g=!1),n.default.createElement("div",{className:y.default.outline,style:t},function(e){var t=l.rowKey,g=l.seq,p=r.get("outlineField",(0,o.List)()),y=function(e,t,r){var n=[];return e.forEach((function(e){if(e!==t&&e!==r&&""!==e){var o=a(e);if(o){var i=o.editor,l=i&&i[s.SOURCE_FIELD];l&&n.push(l)}}})),n}(p,t,g),m=function(e,t,r){return(i()||[]).map((function(t){var n={};return n.rk=t.rk,e.forEach((function(e){n[e]=t[e]})),r.forEach((function(e){n[e]=t[e]})),n}))}(p,0,y);return m.map((function(r){return n.default.createElement(I,{key:r[t],rowKey:t,data:r,params:l,outlineField:p,postRowSelection:c,activeRowKey:u,setActiveRowKey:d,hasSummary:e,seq:g,columnDefs:f})}))}(g))}function I(e){e.params;var t=e.rowKey,r=e.data,o=e.seq,a=e.outlineField,l=e.activeRowKey,u=e.setActiveRowKey,s=e.postRowSelection,d=e.hasSummary,c=r[t],f=(0,i.default)(b(b(b(b({},y.default["outline-item"],!0),"kd-hover-bgcolor",!0),"hover-bg",c===l),y.default["outline-item-select"],c===l)),g={};return!1===d&&(g.justifyContent="center"),n.default.createElement("div",{className:f,onClick:function(){var e=r[t];u(e),s(e)},style:g},Object.keys(r).map((function(e){if(!a.includes(e)||""===e)return null;var t={},i=r[e];return e!==o&&(t=Object.assign({marginLeft:"8px",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},t),i=function(e,t){var r=t[e];return"object"===h(r)&&(console.warn("tiled field outline title type is not String!"),r=""),r}(e,r)),n.default.createElement("div",{key:e,className:y.default.item,style:t},i)})))}function R(){var e=(0,f.getCommonEmotionalInfo)(g.EMOTIONAL_TYPE_NO_DATA),t=e.imagePath,r=e.description,o=t?{"background-image":"url(".concat(t,")")}:{};return n.default.createElement("div",{className:(0,i.default)("kd-cq-empty",y.default["norow-overlay"])},n.default.createElement("div",{className:y.default["norow-overlay-img"],style:o}),n.default.createElement("div",{className:"kd-cq-empty-description"},r||(0,p.getLangMsg)({key:"tiledview.key0001"})))}},549872:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.calculatePreferredColumnsWidth=function(e){var t=e.columns,r=e.selector,n=e.eGridContainer,a=e.ignoreMaxWidth;Array.isArray(t)||(t=[t]);var l=[],u=function(e){var t=e.columns,r=e.selector,n=e.eGridContainer,o=document.createElement("div");o.className="grid-auto-size-table-fake-container";var a=t.map((function(e){return function(e){var t=e.column,r=e.selector,n=e.eGridContainer,o=t.colId,a=r.headerCell,l=r.bodyCell,u=function(e,t,r){return t.querySelector(r(e))}(o,n,a);if(!u)return;var s=document.createElement("span");s.className="grid-auto-size-column-fake-container",s.setAttribute("data-fake-code",o),i(u,s);var d=function(e,t,r){return t.querySelectorAll(r(e))}(o,n,l);return d.forEach((function(e){return i(e,s)})),s}({column:e,selector:r,eGridContainer:n})})).filter((function(e){return!!e}));return a.forEach((function(e){o.appendChild(e)})),o}({columns:t,selector:r,eGridContainer:n}),s=r.appendContainer,d=function(e,t){return e.querySelector(t())||e}(n,s);d.appendChild(u);return t.forEach((function(e){var t=e.colId,r=o({eFakeContainer:u.querySelector('[data-fake-code="'.concat(t,'"]')),column:e,ignoreMaxWidth:a});if(r>0){var n=e.colId,i=e.minWidth,s=void 0===i?0:i;l.push({width:Math.max(r,s),colId:n})}})),d.removeChild(u),l},t.getPreferredWidthForColumn=o,r(622676),r(233696),r(323784),r(835164),r(387912),r(997308);r(480632);var n=r(312020);r(633016);function o(e){var t=e.eFakeContainer,r=e.column,o=e.ignoreMaxWidth,i=(r.colId,r.maxWidth),a=r.metaColWidth,l=r.isIgnoreMaxWidth,u=(0,n.getMaxAutoWidth)({metaColWidth:a}),s=null!=i?i:u,d=t&&t.offsetWidth;if(!t||null==d||0===d)return-1;var c=d+1;return o||l?Math.ceil(c):Math.ceil(c>s?s:c)}function i(e,t){var r=e.cloneNode(!0);r.className+="grid-auto-size-column-fake-cell",r.setAttribute("rowspan","");var n=document.createElement("div");n.className="grid-auto-size-column-fake-row",n.appendChild(r),t.appendChild(n)}},716160:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.getEventPath=function(e){if(e.deepPath)return e.deepPath;if(e.path)return e.path;if(e.composedPath)return e.composedPath();return function(e){var t=[],r=e.target;for(;r;)t.push(r),r=r.parentElement;return t}(e)}},21736:function(e,t,r){"use strict";function n(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return 0===e.length?r[0]:1===e.length?e[0].apply(e,r):e.reduceRight.apply(e,[function(e,t){return t(e)}].concat(r))}}r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.compose=n,t.pipe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return n(e.reverse())},r(9692),r(274404),r(885612)},801056:function(e,t,r){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r(182320),r(909112),r(697060),r(505684),r(323784),r(743924),r(693917),r(976896),r(721300),r(606200),r(387912),r(633768),r(690512),r(78504),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=[],r=null;return function(o){for(var i=arguments.length,a=new Array(i>1?i-1:0),l=1;l<i;l++)a[l-1]=arguments[l];0!==t.length||r?t.push({methodName:o,args:a}):(t.push({methodName:o,args:a}),r=setInterval((function(){var e,o=t.shift();o&&o.methodName.apply(o,function(e){if(Array.isArray(e))return n(e)}(e=o.args)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),0===t.length&&(clearInterval(r),r=null)}),e))}},r(86744)},188136:function(e,t,r){var n={"./instance":[427320],"./instance.js":[427320],"./middleware":[276056,4260],"./middleware/":[276056,4260],"./middleware/checkMiddleware":[342064,4260],"./middleware/checkMiddleware.js":[342064,4260],"./middleware/compose":[817600,4260],"./middleware/compose.js":[817600,4260],"./middleware/index":[276056,4260],"./middleware/index.js":[276056,4260],"./middleware/styleMiddleware":[755908,4260],"./middleware/styleMiddleware.js":[755908,4260],"./proxy/gridProxy":[206368,5656,4074,3308,8440,4260,5088],"./proxy/gridProxy.js":[206368,5656,4074,3308,8440,4260,5088],"./proxy/listquerypanelProxy":[40892,3308,8440,4260,3272],"./proxy/listquerypanelProxy.js":[40892,3308,8440,4260,3272],"./utils":[468840],"./utils/":[468840],"./utils/console":[632456],"./utils/console.js":[632456],"./utils/convertString":[470096],"./utils/convertString.js":[470096],"./utils/exception":[222128],"./utils/exception.js":[222128],"./utils/index":[468840],"./utils/index.js":[468840],"./utils/supportedProppertyNames":[87136],"./utils/supportedProppertyNames.js":[87136]};function o(e){if(!r.o(n,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],o=t[0];return Promise.all(t.slice(1).map(r.e)).then((function(){return r(o)}))}o.keys=function(){return Object.keys(n)},o.id=188136,e.exports=o},534712:function(e,t,r){var n={"./actionReducer.js":460236,"./admindivisionReducer.js":108264,"./approvalProcessingReducer.js":831448,"./approvalRecordReducer.js":651020,"./appstartReducer.js":516480,"./attachmentpanelReducer.js":599108,"./baseCardFieldReducer.js":951712,"./billReducer.js":870480,"./buttonReducer.js":35179,"./commonFilterReducer.js":410628,"./commonFunctionPanelReducer.js":908320,"./dateselectReducer.js":516768,"./entitydesignerReducer.js":16176,"./f7Reducer.js":327464,"./fieldReducer.js":849257,"./generalf7Reducer.js":960024,"./generaltreef7Reducer.js":735112,"./gridReducer.js":424841,"./gridcontainerReducer.js":877416,"./guideReducer.js":890243,"./homePageTabReducer.js":361020,"./htmlReducer.js":697588,"./hyperLinkReducer.js":410548,"./iconReducer.js":494488,"./iframeReducer.js":714140,"./littlekReducer.js":556712,"./mapReducer.js":6480,"./mobilefilterReducer.js":597787,"./myApplicationReducer.js":203208,"./qingReducer.js":803292,"./qrcodeReducer.js":549188,"./querypanelReducer.js":562144,"./reportfilterReducer.js":365248,"./searchReducer.js":379316,"./splitcontainerReducer.js":136040,"./subGridReducer.js":879696,"./tabReducer.js":490360,"./tilePanelReducer.js":283204,"./transferContainerReducer.js":154392,"./treeReducer.js":433572,"./wFNavigationBarReducer.js":116320,"./wfConditionReducer.js":236784,"./workcalendarReducer.js":212800,"./yzjChatReducer.js":669532};function o(e){var t=i(e);return r(t)}function i(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=i,e.exports=o,o.id=534712},77240:function(e,t,r){e.exports=r(251656)(8375)},141170:function(e,t,r){e.exports=r(251656)(9249)}}]);