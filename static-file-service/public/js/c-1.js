/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackJsonp_bos-platform"] = self["webpackJsonp_bos-platform"] || []).push([[7184],{

/***/ "./src/action/actionname/control/gridContainer/client/index.js":
/*!*********************************************************************!*\
  !*** ./src/action/actionname/control/gridContainer/client/index.js ***!
  \*********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.SWITCH_SCHEME = exports.SET_DEFAULT_SCHEME = exports.SAVE_AS_SCHEME_TYPE = exports.SAVE = exports.REFRESH = exports.EDIT_END = exports.EDIT_CANCEL = exports.EDIT = exports.DELETE_SCHEME = exports.DELETE_CARD = exports.ADD_CARD = void 0;\n/**\n * showdoc\n * @catalog 控件指令/栅格容器/客户端\n * @title 删除卡片\n * @description 删除卡片(点击卡片删除按钮)\n * @method deleteCard\n * @platform PC\n * @eg [{\"key\":\"ctrlKey\",\"methodName\":\"deleteCard\",\"args\":[\"cardId\"],\"postData\":[{},[]]}]\n * @eg_p key string 控件key\n * @eg_p methodname string 方法名\n * @eg_p args Array 参数列表 args[0]表示卡片id\n * @version 1.0.0\n * @author rubing_yan\n */\nvar DELETE_CARD = exports.DELETE_CARD = 'deleteCard';\n\n/**\n * showdoc\n * @catalog 控件指令/栅格容器/客户端\n * @title 新增卡片\n * @description 点击'新增卡片'菜单\n * @method addCard\n * @platform PC\n * @eg [{\"key\":\"ctrlKey\",\"methodName\":\"addCard\",\"args\":[\"[{x:1,y:1,w:1,h:1,i:'cardId',formId:'formId'}]\"],\"postData\":[{},[]]}]\n * @eg_p key string 控件key\n * @eg_p methodname string 方法名\n * @eg_p args Array 参数列表 args[0]栅格布局信息x:起始列,y:起始行,w:占几列，h：占几行，i：卡片id，formId：表单id\n * @version 1.0.0\n * @author rubing_yan\n */\nvar ADD_CARD = exports.ADD_CARD = 'addCard';\n\n/**\n * showdoc\n * @catalog 控件指令/栅格容器/客户端\n * @title 取消编辑\n * @description 点击'取消'菜单\n * @method editCancel\n * @platform PC\n * @eg [{\"key\":\"ctrlKey\",\"methodName\":\"editCancel\",\"args\":[],\"postData\":[{},[]]}]\n * @eg_p key string 控件key\n * @eg_p methodname string 方法名\n * @eg_p args Array 参数列表 args为[]\n * @version 1.0.0\n * @author rubing_yan\n */\nvar EDIT_CANCEL = exports.EDIT_CANCEL = 'editCancel';\n\n/**\n * showdoc\n * @catalog 控件指令/栅格容器/客户端\n * @title 完成编辑\n * @description 点击'完成'菜单\n * @method editEnd\n * @platform PC\n * @eg [{\"key\":\"ctrlKey\",\"methodName\":\"editEnd\",\"args\":[\"[{x:1,y:1,w:1,h:1,i:'cardId',formId:'formId'}]\", true],\"postData\":[{},[]]}]\n * @eg_p key string 控件key\n * @eg_p methodname string 方法名\n * @eg_p args Array 参数列表 args[0]栅格布局信息，args[1]是否设置成默认\n * @version 1.0.0\n * @author rubing_yan\n */\nvar EDIT_END = exports.EDIT_END = 'editEnd';\n\n/**\n * showdoc\n * @catalog 控件指令/栅格容器/客户端\n * @title 编辑\n * @description 进入编辑\n * @method edit\n * @platform PC\n * @eg [{\"key\":\"ctrlKey\",\"methodName\":\"edit\",\"args\":[],\"postData\":[{},[]]}]\n * @eg_p key string 控件key\n * @eg_p methodname string 方法名\n * @eg_p args Array 参数列表 args为[]\n * @version 1.0.0\n * @author rubing_yan\n */\nvar EDIT = exports.EDIT = 'edit';\n\n/**\n * showdoc\n * @catalog 控件指令/栅格容器/客户端\n * @title 刷新\n * @description 刷新\n * @method edit\n * @platform PC\n * @eg [{\"key\":\"ctrlKey\",\"methodName\":\"refresh\",\"args\":[],\"postData\":[{},[]]}]\n * @eg_p key string 控件key\n * @eg_p methodname string 方法名\n * @eg_p args Array 参数列表 args为[]\n * @version 1.0.0\n * @author rubing_yan\n */\nvar REFRESH = exports.REFRESH = 'refresh';\n\n/**\n * showdoc\n * @catalog 控件指令/栅格容器/客户端\n * @title 切换方案\n * @description 切换方案\n * @method switchScheme\n * @platform PC\n * @eg [{\"key\":\"ctrlKey\",\"methodName\":\"switchScheme\",\"args\":[\"schemeId\"],\"postData\":[{},[]]}]\n * @eg_p key string 控件key\n * @eg_p methodname string 方法名\n * @eg_p args Array 参数列表 args[0]为方案id\n * @version 1.0.0\n * @author rubing_yan\n */\nvar SWITCH_SCHEME = exports.SWITCH_SCHEME = 'switchScheme';\n\n/**\n * showdoc\n * @catalog 控件指令/栅格容器/客户端\n * @title 删除方案\n * @description 删除方案\n * @method deleteScheme\n * @platform PC\n * @eg [{\"key\":\"ctrlKey\",\"methodName\":\"deleteScheme\",\"args\":[\"schemeId\"],\"postData\":[{},[]]}]\n * @eg_p key string 控件key\n * @eg_p methodname string 方法名\n * @eg_p args Array 参数列表 args[0]为方案id\n * @version 1.0.0\n * @author rubing_yan\n */\nvar DELETE_SCHEME = exports.DELETE_SCHEME = 'deleteScheme';\n\n/**\n * showdoc\n * @catalog 控件指令/栅格容器/客户端\n * @title 设置默认方案\n * @description 设置默认方案\n * @method setDefaultScheme\n * @platform PC\n * @eg [{\"key\":\"ctrlKey\",\"methodName\":\"setDefaultScheme\",\"args\":[\"schemeId\"],\"postData\":[{},[]]}]\n * @eg_p key string 控件key\n * @eg_p methodname string 方法名\n * @eg_p args Array 参数列表 args[0]为方案id\n * @version 1.0.0\n * @author rubing_yan\n */\nvar SET_DEFAULT_SCHEME = exports.SET_DEFAULT_SCHEME = 'setDefaultScheme';\n\n/**\n * showdoc\n * @catalog 控件指令/栅格容器/客户端\n * @title 保存\n * @description 保存\n * @method save\n * @platform PC\n * @eg [{\"key\":\"ctrlKey\",\"methodName\":\"save\",\"args\":[\"[{x:1,y:1,w:1,h:1,i:'cardId',formId:'formId'}]\"],\"postData\":[{},[]]}]\n * @eg_p key string 控件key\n * @eg_p methodname string 方法名\n * @eg_p args Array 参数列表 args[0]为栅格布局信息\n * @version 1.0.0\n * @author rubing_yan\n */\nvar SAVE = exports.SAVE = 'save';\n\n/**\n * showdoc\n * @catalog 控件指令/栅格容器/客户端\n * @title 方案另存为\n * @description 方案另存为\n * @method saveAsSchemeType\n * @platform PC\n * @eg [{\"key\":\"ctrlKey\",\"methodName\":\"saveAsSchemeType\",\"args\":[2,\"[{x:1,y:1,w:1,h:1,i:'cardId',formId:'formId'}]\"],\"postData\":[{},[]]}]\n * @eg_p key string 控件key\n * @eg_p methodname string 方法名\n * @eg_p args Array 参数列表 args[0]为方案类型2为共享方案3为个性方案,args[1]为栅格布局信息\n * @version 1.0.0\n * @author rubing_yan\n */\nvar SAVE_AS_SCHEME_TYPE = exports.SAVE_AS_SCHEME_TYPE = 'saveAsSchemeType';\n\n//# sourceURL=webpack://bos-platform/./src/action/actionname/control/gridContainer/client/index.js?");

/***/ }),

/***/ "./src/action/actionname/control/homePageTab/client/index.js":
/*!*******************************************************************!*\
  !*** ./src/action/actionname/control/homePageTab/client/index.js ***!
  \*******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.TAB_FIXED_CLICK = exports.CLOSE = void 0;\n/**\n * showdoc\n * @catalog 控件指令/首页导航/客户端\n * @title 锁定\n * @description 首页动态tab点击锁定\n * @ctrl_type 首页导航\n * @method clickTabFixed\n * @platform PC\n * @eg [{\"key\":\"homepagetabap\",\"methodName\":\"clickTabFixed\",\"args\":[{\"fixed\":true,\"pageId\":\"secmroot2a162dac554148f1a71e6fd0ef6bca58\"}],\"postData\":[{},[]]}]\n * @eg_p key string 控件的标识\n * @eg_p methodname string 方法名\n * @eg_p args array 参数列表\n * @eg_p_args_title args参数详细说明\n * @eg_p_args fixed boolean 是否锁定\n * @eg_p_args pageId string 页面id\n * @version 1.0.0\n * @author xiaojing_yu\n */\nvar TAB_FIXED_CLICK = exports.TAB_FIXED_CLICK = 'clickTabFixed';\n\n/**\n * showdoc\n * @catalog 控件指令/首页导航/客户端\n * @title 关闭单页签\n * @description 关闭单页签\n * @ctrl_type 首页导航\n * @method close\n * @platform PC\n * @eg [{\"key\":\"homepagetabap\",\"methodName\":\"close\",\"args\":[],\"postData\":[{},[]]}]\n * @eg_p key string 控件标识\n * @eg_p methodname string 方法名\n * @eg_p args array 参数列表为空\n * @version 6.0.0\n * @author yingjin_he\n */\nvar CLOSE = exports.CLOSE = 'close';\n\n//# sourceURL=webpack://bos-platform/./src/action/actionname/control/homePageTab/client/index.js?");

/***/ }),

/***/ "./src/action/actionname/control/select/client/index.js":
/*!**************************************************************!*\
  !*** ./src/action/actionname/control/select/client/index.js ***!
  \**************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.SELECT_SET_DEFAULT_VAL = void 0;\n/*\n * @Author: wqhui\n * @Date: 2024-01-26 17:37:14\n * @Description:\n */\n\n/**\n * showdoc\n * @catalog 控件指令/下拉列表/客户端\n * @title 设置/取消默认\n * @description 设置/取消默认\n * @ctrl_type 下拉列表\n * @method setDefaultValue\n * @platform PC\n * @eg {\"key\":\"kdtest_combofield\",\"methodName\":\"setDefaultValue\",\"args\":[{\"id\":\"2\",\"setDefault\":true}]}\n * @eg_p key string 下拉列表key\n * @eg_p methodname string 方法名\n * @eg_p args string 当前下拉选项的id\n * @eg_p setDefault boolean 是否设为默认\n * @version 6.0.0\n * @author qinghui_wu\n */\nvar SELECT_SET_DEFAULT_VAL = exports.SELECT_SET_DEFAULT_VAL = 'setDefaultValue';\n\n//# sourceURL=webpack://bos-platform/./src/action/actionname/control/select/client/index.js?");

/***/ }),

/***/ "./src/action/commonFunctionPanelAction.js":
/*!*************************************************!*\
  !*** ./src/action/commonFunctionPanelAction.js ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.itemClick = itemClick;\nvar _appModelFunction = __webpack_require__(/*! ../model/appModelFunction */ \"./src/model/appModelFunction.js\");\nvar action = _interopRequireWildcard(__webpack_require__(/*! ./action */ \"./src/action/action.js\"));\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\n// 常用菜单面板控件action\n\n/**\n    请求: 点击菜单某个子项\n    groupId:分组id, itemId:子项id\n*/\nfunction itemClick(model, _ref) {\n  var groupId = _ref.groupId,\n    itemId = _ref.itemId;\n  return function (dispatch, getState) {\n    var pid = model.pageId;\n    var post = (0, _appModelFunction.getPost)(pid)(getState());\n    action.invokeControlService(model, 'itemClick', [{\n      groupId: groupId,\n      itemId: itemId\n    }], post, dispatch);\n  };\n}\n\n//# sourceURL=webpack://bos-platform/./src/action/commonFunctionPanelAction.js?");

/***/ }),

/***/ "./src/action/gridcontaineraction.js":
/*!*******************************************!*\
  !*** ./src/action/gridcontaineraction.js ***!
  \*******************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.addCard = addCard;\nexports.deleteCard = deleteCard;\nexports.deleteScheme = deleteScheme;\nexports.edit = edit;\nexports.editCancel = editCancel;\nexports.editEnd = editEnd;\nexports.refresh = refresh;\nexports.save = save;\nexports.saveAs = saveAs;\nexports.setDefault = setDefault;\nexports.switchScheme = switchScheme;\nvar action = _interopRequireWildcard(__webpack_require__(/*! ./action */ \"./src/action/action.js\"));\nvar _appModelFunction = __webpack_require__(/*! ../model/appModelFunction */ \"./src/model/appModelFunction.js\");\nvar _client = __webpack_require__(/*! @/action/actionname/control/gridContainer/client */ \"./src/action/actionname/control/gridContainer/client/index.js\");\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\n// 栅格容器action\n\n// 删除卡片(点击卡片删除按钮)\nfunction deleteCard(model, cardId) {\n  return function (dispatch, getState) {\n    action.invokeControlService(model, _client.DELETE_CARD, [cardId], (0, _appModelFunction.getPost)(model.pageId)(getState()), dispatch);\n  };\n}\n\n// 底部工具bar: 点击'新增卡片'菜单\nfunction addCard(model, args) {\n  return function (dispatch, getState) {\n    action.invokeControlService(model, _client.ADD_CARD, [args], (0, _appModelFunction.getPost)(model.pageId)(getState()), dispatch);\n  };\n}\n\n// 底部工具bar: 点击'取消'菜单\nfunction editCancel(model) {\n  return function (dispatch, getState) {\n    action.invokeControlService(model, _client.EDIT_CANCEL, [], (0, _appModelFunction.getPost)(model.pageId)(getState()), dispatch);\n  };\n}\n\n// 底部工具bar: 点击'完成'菜单(把控件layout带回服务端)\nfunction editEnd(model) {\n  var args = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  var isSetDefault = arguments.length > 2 ? arguments[2] : undefined;\n  return function (dispatch, getState) {\n    action.invokeControlService(model, _client.EDIT_END, [args, isSetDefault], (0, _appModelFunction.getPost)(model.pageId)(getState()), dispatch);\n  };\n}\nfunction edit(model) {\n  return function (dispatch, getState) {\n    action.invokeControlService(model, _client.EDIT, [], (0, _appModelFunction.getPost)(model.pageId)(getState()), dispatch);\n  };\n}\nfunction refresh(model) {\n  return function (dispatch, getState) {\n    action.invokeControlService(model, _client.REFRESH, [], (0, _appModelFunction.getPost)(model.pageId)(getState()), dispatch);\n  };\n}\nfunction switchScheme(model) {\n  var schemeId = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  return function (dispatch, getState) {\n    action.invokeControlService(model, _client.SWITCH_SCHEME, [schemeId], (0, _appModelFunction.getPost)(model.pageId)(getState()), dispatch);\n  };\n}\nfunction deleteScheme(model) {\n  var schemeId = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  return function (dispatch, getState) {\n    action.invokeControlService(model, _client.DELETE_SCHEME, [schemeId], (0, _appModelFunction.getPost)(model.pageId)(getState()), dispatch);\n  };\n}\nfunction setDefault(model) {\n  var schemeId = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  return function (dispatch, getState) {\n    action.invokeControlService(model, _client.SET_DEFAULT_SCHEME, [schemeId], (0, _appModelFunction.getPost)(model.pageId)(getState()), dispatch);\n  };\n}\nfunction saveAs(model) {\n  var args = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  var type = arguments.length > 2 ? arguments[2] : undefined;\n  return function (dispatch, getState) {\n    action.invokeControlService(model, _client.SAVE_AS_SCHEME_TYPE, [type, args], (0, _appModelFunction.getPost)(model.pageId)(getState()), dispatch);\n  };\n}\nfunction save(model) {\n  var args = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  return function (dispatch, getState) {\n    action.invokeControlService(model, _client.SAVE, [args], (0, _appModelFunction.getPost)(model.pageId)(getState()), dispatch);\n  };\n}\n\n//# sourceURL=webpack://bos-platform/./src/action/gridcontaineraction.js?");

/***/ }),

/***/ "./src/action/homePageTabAction.js":
/*!*****************************************!*\
  !*** ./src/action/homePageTabAction.js ***!
  \*****************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.addToCollectionAction = addToCollectionAction;\nexports.clickFix = clickFix;\nexports.closeVirturalTab = closeVirturalTab;\nexports.openInNewWindowAction = openInNewWindowAction;\nexports.openInSystemTabAction = openInSystemTabAction;\nexports.selectTabHomePage = selectTabHomePage;\nexports.selectVirturalTab = selectVirturalTab;\nvar action = _interopRequireWildcard(__webpack_require__(/*! ./action */ \"./src/action/action.js\"));\nvar _appModelFunction = __webpack_require__(/*! ../model/appModelFunction */ \"./src/model/appModelFunction.js\");\nvar _client = __webpack_require__(/*! @/action/actionname/control/homePageTab/client */ \"./src/action/actionname/control/homePageTab/client/index.js\");\nvar _client2 = __webpack_require__(/*! @/action/actionname/global/custom/client */ \"./src/action/actionname/global/custom/client/index.js\");\nvar _global = _interopRequireWildcard(__webpack_require__(/*! @/global */ \"./src/global/index.js\"));\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\n// 首页动态tab点击锁定\nfunction clickFix(model) {\n  var args = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  return function (dispatch, getState) {\n    action.invokeControlService(model, _client.TAB_FIXED_CLICK, args, (0, _appModelFunction.getPost)(model.pageId)(getState()), dispatch);\n  };\n}\n\n// 首页关闭虚拟导航\nfunction closeVirturalTab(model) {\n  var args = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return function (dispatch, getState) {\n    // action.invokeControlService(model, 'closeVirturalTab', args, getPost(model.pageId)(getState()), dispatch)\n    // 暂时先发送自定义事件\n    var pageId = model.pageId;\n    // 兼容旧门户，如果是关闭多个则不做处理，与旧门户一致\n    // 兼容关闭之后关闭不成功的场景：关闭单个页签走close 请求，关闭多个走关闭虚拟页签请求。 之前已处理监听页面销毁更新虚拟页签的操作\n    var delTabs = args.delTabs;\n    if ((delTabs === null || delTabs === void 0 ? void 0 : delTabs.length) === 1) {\n      action.invokeControlService({\n        pageId: delTabs[0].pageId,\n        key: ''\n      }, _client.CLOSE, [], (0, _appModelFunction.getPost)(pageId)(getState()), dispatch);\n    } else {\n      var key = '';\n      var eventArgs = [_client2.CLOSE_VIRTUAL_TAB, key, JSON.stringify(args)];\n      _global[\"default\"][_global.INVOKE_CUSTOM_EVENT_WITH_POST_DATA](pageId, '', eventArgs);\n    }\n  };\n}\n\n// 选中虚拟导航\nfunction selectVirturalTab(model) {\n  var args = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  return function (dispatch, getState) {\n    // action.invokeControlService(model, 'selectVirtualTab', args, getPost(model.pageId)(getState()), dispatch)\n    // 暂时先发送自定义事件\n    var pageId = model.pageId;\n    var key = '';\n    var eventArgs = [_client2.SELECT_VIRTUAL_TAB, key, JSON.stringify(args)];\n    _global[\"default\"][_global.INVOKE_CUSTOM_EVENT_WITH_POST_DATA](pageId, '', eventArgs);\n  };\n}\n\n// 选中导航首页\nfunction selectTabHomePage(model) {\n  var args = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  return function (dispatch, getState) {\n    // action.invokeControlService(model, 'selectVirtualTab', args, getPost(model.pageId)(getState()), dispatch)\n    // 暂时先发送自定义事件\n    var pageId = model.pageId;\n    var key = '';\n    var eventArgs = [_client2.SELECT_TAB_HOME_PAGE, key, JSON.stringify(args)];\n    _global[\"default\"][_global.INVOKE_CUSTOM_EVENT_WITH_POST_DATA](pageId, '', eventArgs);\n  };\n}\n\n// 加入收藏\nfunction addToCollectionAction(model) {\n  var args = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  return function (dispatch, getState) {\n    // action.invokeControlService(model, 'selectVirtualTab', args, getPost(model.pageId)(getState()), dispatch)\n    // 暂时先发送自定义事件\n    var pageId = model.pageId;\n    var key = '';\n    var eventArgs = ['addToCollection', key, JSON.stringify(args)];\n    _global[\"default\"][_global.INVOKE_CUSTOM_EVENT_WITH_POST_DATA](pageId, '', eventArgs);\n  };\n}\n\n// 在浏览器页签中打开\nfunction openInNewWindowAction(model) {\n  var args = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  return function (dispatch, getState) {\n    // action.invokeControlService(model, 'selectVirtualTab', args, getPost(model.pageId)(getState()), dispatch)\n    // 暂时先发送自定义事件\n    var pageId = model.pageId;\n    var key = '';\n    var eventArgs = ['openInNewWindow', key, JSON.stringify(args)];\n    _global[\"default\"][_global.INVOKE_CUSTOM_EVENT_WITH_POST_DATA](pageId, '', eventArgs);\n  };\n}\n\n// 在浏览器页签中打开\nfunction openInSystemTabAction(model) {\n  var args = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  return function (dispatch, getState) {\n    // action.invokeControlService(model, 'selectVirtualTab', args, getPost(model.pageId)(getState()), dispatch)\n    // 暂时先发送自定义事件\n    var pageId = model.pageId;\n    var key = '';\n    var eventArgs = ['openInSystemTab', key, JSON.stringify(args)];\n    _global[\"default\"][_global.INVOKE_CUSTOM_EVENT_WITH_POST_DATA](pageId, '', eventArgs);\n  };\n}\n\n//# sourceURL=webpack://bos-platform/./src/action/homePageTabAction.js?");

/***/ }),

/***/ "./src/action/selectAction.js":
/*!************************************!*\
  !*** ./src/action/selectAction.js ***!
  \************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.changeSelectDefaultValue = void 0;\nvar action = _interopRequireWildcard(__webpack_require__(/*! ./action */ \"./src/action/action.js\"));\nvar _appModelFunction = __webpack_require__(/*! ../model/appModelFunction */ \"./src/model/appModelFunction.js\");\nvar _index = __webpack_require__(/*! @/action/actionname/control/select/client/index.js */ \"./src/action/actionname/control/select/client/index.js\");\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\n/**\n * 单选下拉设置&取消默认\n */\n\nvar changeSelectDefaultValue = exports.changeSelectDefaultValue = function changeSelectDefaultValue(model, args) {\n  return function (dispatch, getState) {\n    action.invokeControlService(model, _index.SELECT_SET_DEFAULT_VAL, args, (0, _appModelFunction.getPost)(model.pageId)(getState()), dispatch);\n  };\n};\n\n//# sourceURL=webpack://bos-platform/./src/action/selectAction.js?");

/***/ }),

/***/ "./src/component/common/DragDialog.jsx":
/*!*********************************************!*\
  !*** ./src/component/common/DragDialog.jsx ***!
  \*********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.create.js */ \"../../node_modules/core-js/modules/es.object.create.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.get-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.reflect.construct.js */ \"../../node_modules/core-js/modules/es.reflect.construct.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\n__webpack_require__(/*! core-js/modules/es.object.set-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.set-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.parse-int.js */ \"../../node_modules/core-js/modules/es.parse-int.js\");\nvar _react = _interopRequireDefault(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _elementFromPoint = _interopRequireDefault(__webpack_require__(/*! ../common/elementFromPoint */ \"./src/component/common/elementFromPoint.js\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nvar DragDialog = exports[\"default\"] = /*#__PURE__*/function (_React$Component) {\n  _inherits(DragDialog, _React$Component);\n  function DragDialog(props) {\n    var _this;\n    _classCallCheck(this, DragDialog);\n    _this = _callSuper(this, DragDialog, [props]);\n    // this.eleRef = React.createRef()\n    _this.mouseupHandler = _this.mouseupHandler.bind(_assertThisInitialized(_this));\n    _this.mousedownHandler = _this.mousedownHandler.bind(_assertThisInitialized(_this));\n    _this.mousemoveHandler = _this.mousemoveHandler.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n  _createClass(DragDialog, [{\n    key: \"setDragElement\",\n    value: function setDragElement(element) {\n      if (element) {\n        element.addEventListener('mousedown', this.mousedownHandler);\n      }\n    }\n  }, {\n    key: \"unMountDragElement\",\n    value: function unMountDragElement(element) {\n      if (element) {\n        element.removeEventListener('mousedown', this.mousedownHandler);\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      // 不用防范，走固定逻辑即可，错误就抛出来\n      this.eleRef = this.props.eleRef;\n      this.setDragElement(this.eleRef && this.eleRef.current);\n      document.addEventListener('mousemove', this.mousemoveHandler, true);\n      document.addEventListener('mouseup', this.mouseupHandler, true);\n    }\n\n    // 不用防范，走固定逻辑即可，错误就抛出来\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(_ref) {\n      var eleRef = _ref.eleRef;\n      if (eleRef !== this.props.eleRef) {\n        // 去旧\n        this.unMountDragElement(this.eleRef && this.eleRef.current);\n        // 绑新\n        this.eleRef = eleRef;\n        this.setDragElement(eleRef && eleRef.current);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.unMountDragElement(this.eleRef && this.eleRef.current);\n      document.removeEventListener('mousemove', this.mousemoveHandler, true);\n      document.removeEventListener('mouseup', this.mouseupHandler, true);\n    }\n  }, {\n    key: \"mouseupHandler\",\n    value: function mouseupHandler(event) {\n      var ele = this.eleRef.current;\n      if (!ele || !ele.parentElement) return;\n      //\n      var dialogEle = ele.parentElement;\n      if (ele.dataset.draging === 'true') {\n        var onDrop = this.props.onDrop;\n        onDrop && onDrop(event);\n        dialogEle.style.cursor = 'default';\n        ele.dataset.draging = false;\n        // ele.style.zIndex = -1\n      }\n    }\n  }, {\n    key: \"mousemoveHandler\",\n    value: function mousemoveHandler(event) {\n      event.preventDefault();\n      var ele = this.eleRef.current;\n      if (!ele || !ele.parentElement) return;\n      this.props.handleMouseMove && this.props.handleMouseMove(event);\n      var dialogEle = ele.parentElement;\n      if (ele.dataset.draging === 'true') {\n        ele.style.zIndex = 1;\n        var moveX = event.clientX - ele.dataset.startX;\n        var moveY = event.clientY - ele.dataset.startY;\n        var left = ele.dataset.originLeft;\n        var top = ele.dataset.originTop;\n        left = left === '' ? 0 : parseInt(left);\n        top = top === '' ? 0 : parseInt(top);\n        var offsetX = left + moveX;\n        var offsetY = top + moveY;\n        var dialogWidth = this.props.windowInitialStyleWidth || 0;\n        var dialogEleParentWidth = dialogEle.parentElement.clientWidth;\n        var dialogEleParentHeight = dialogEle.parentElement.clientHeight;\n        if (offsetX < 0) {\n          if (dialogWidth > 0) {\n            if (offsetX < -dialogWidth + 40) {\n              offsetX = -dialogWidth + 40;\n            }\n          } else {\n            offsetX = 0;\n          }\n        } else if (offsetX > dialogEleParentWidth - 20) {\n          offsetX = dialogEleParentWidth - 20;\n        }\n        if (offsetY < 0) {\n          offsetY = 0;\n        } else if (offsetY > dialogEleParentHeight - 20) {\n          offsetY = dialogEleParentHeight - 20;\n        }\n        var dialogEleStyle = dialogEle.style;\n        dialogEleStyle.left = offsetX + 'px';\n        dialogEleStyle.top = offsetY + 'px';\n      }\n    }\n  }, {\n    key: \"mousedownHandler\",\n    value: function mousedownHandler(event) {\n      // event.preventDefault()\n      var ele = this.eleRef.current;\n      if (!ele) {\n        return;\n      }\n      var dialogEle = ele.parentElement;\n      if (event.button !== 0) return;\n      ele.style.zIndex = 1;\n      ele.style.pointerEvents = 'auto';\n      var target = (0, _elementFromPoint[\"default\"])(event.clientX, event.clientY);\n      if (target === ele) {\n        // 开始拖拽时触发事件\n        var onDragStart = this.props.onDragStart;\n        onDragStart && onDragStart(event);\n        ele.dataset.draging = 'true';\n        // ele.style.zIndex = -1\n        // ele.style.pointerEvents = 'none'\n        ele.dataset.startX = event.clientX;\n        ele.dataset.startY = event.clientY;\n        var dialogEleStyle = dialogEle.style;\n        var originLeft = dialogEle.offsetLeft;\n        var originTop = dialogEle.offsetTop;\n        ele.dataset.originLeft = originLeft;\n        ele.dataset.originTop = originTop;\n        //   dialogEleStyle.position = 'absolute'\n        dialogEleStyle.left = originLeft + 'px';\n        dialogEleStyle.top = originTop + 'px';\n        dialogEleStyle.cursor = 'move';\n      } else {\n        // ele.style.zIndex = -1\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return this.props.children;\n    }\n  }]);\n  return DragDialog;\n}(_react[\"default\"].Component);\n\n//# sourceURL=webpack://bos-platform/./src/component/common/DragDialog.jsx?");

/***/ }),

/***/ "./src/component/common/DragFlexWrap.jsx":
/*!***********************************************!*\
  !*** ./src/component/common/DragFlexWrap.jsx ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.filter.js */ \"../../node_modules/core-js/modules/es.array.filter.js\");\n__webpack_require__(/*! core-js/modules/es.array.for-each.js */ \"../../node_modules/core-js/modules/es.array.for-each.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.create.js */ \"../../node_modules/core-js/modules/es.object.create.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-properties.js */ \"../../node_modules/core-js/modules/es.object.define-properties.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptors.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptors.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.get-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.keys.js */ \"../../node_modules/core-js/modules/es.object.keys.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.reflect.construct.js */ \"../../node_modules/core-js/modules/es.reflect.construct.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ \"../../node_modules/core-js/modules/web.dom-collections.for-each.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = DragFlexWrap;\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\n__webpack_require__(/*! core-js/modules/es.object.assign.js */ \"../../node_modules/core-js/modules/es.object.assign.js\");\n__webpack_require__(/*! core-js/modules/es.object.set-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.set-prototype-of.js\");\nvar _react = _interopRequireDefault(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _reactDom = _interopRequireDefault(__webpack_require__(/*! react-dom */ \"webpack/sharing/consume/default/react-dom/react-dom?418d\"));\nvar _classnames2 = _interopRequireDefault(__webpack_require__(/*! classnames */ \"../../node_modules/classnames/index.js\"));\nvar _DragFlexWrap = _interopRequireDefault(__webpack_require__(/*! ./DragFlexWrap.less */ \"./src/component/common/DragFlexWrap.less\"));\nvar _componentutil = __webpack_require__(/*! ../../util/componentutil */ \"./src/util/componentutil.js\");\nvar _appModelFunction = __webpack_require__(/*! @/model/appModelFunction.js */ \"./src/model/appModelFunction.js\");\nvar _ResizeMeasure = _interopRequireDefault(__webpack_require__(/*! ../common/ResizeMeasure */ \"./src/component/common/ResizeMeasure.js\"));\nvar _attachDataFnApi = __webpack_require__(/*! @/util/attachDataFnApi */ \"./src/util/attachDataFnApi.js\");\nvar _dragHelp = __webpack_require__(/*! ../../util/dragHelp */ \"./src/util/dragHelp.js\");\nvar _DragDialog = _interopRequireDefault(__webpack_require__(/*! ./DragDialog */ \"./src/component/common/DragDialog.jsx\"));\nvar _client = __webpack_require__(/*! @/action/actionname/global/custom/client */ \"./src/action/actionname/global/custom/client/index.js\");\nvar _global = _interopRequireWildcard(__webpack_require__(/*! @/global */ \"./src/global/index.js\"));\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n// setInterval(() => {\n//     Math.random() > 0.5 ? (spyApi.doPostActions('','setEnable',[{enable: true, keys: [\"materialto\"], policy: \"\"}])) : (spyApi.doPostActions('','setEnable',[{enable: false, keys: [\"materialto\"], policy: \"\"}]))\n// }, 1000)\n// 理下需求：在高阶容器里是要控制什么：例如，可见性、折叠，预研下\n// 考虑解耦出一个停靠块组件？\n// spyApi.doPostActions('2861a1873e9242e6b5cefa7fbba7c52a','u',[{k: 'flexpanelap1', floatDragWinStyle: {w: 400, h: 700}}, {k: 'flexpanelap1', floatDrag: true}, {k: 'flexpanelap1', isFlexDragFloat: false }, {k: 'flexpanelap1', docWinStyle: {'h': 150} }, {floatFlexTitle: '测试', k: 'flexpanelap1'}])\nvar WINDOW_DISTANCE_BETWEEN_MOUSE = 10;\nvar FLEX_DRAGFLOAT_CUSTOMEVENT = 'flexpanelDragFloat';\nfunction DragFlexWrap(WrapComponent) {\n  return /*#__PURE__*/function (_React$Component) {\n    _inherits(_class, _React$Component);\n    function _class(props) {\n      var _this;\n      _classCallCheck(this, _class);\n      _this = _callSuper(this, _class, [props]);\n      _this.dragWindowMove = function (_ref) {\n        var clientX = _ref.clientX,\n          clientY = _ref.clientY;\n        var dom = _this.dragContainerRef.current;\n        if (dom) {\n          dom.style.top = clientY - WINDOW_DISTANCE_BETWEEN_MOUSE + 'px';\n          dom.style.left = clientX - WINDOW_DISTANCE_BETWEEN_MOUSE + 'px';\n        }\n      };\n      _this.isInContainer = function (evt) {\n        if (!_this.dragDivRef.current) return;\n        if ((0, _dragHelp.isMousePositionInContainer)(_this.dragDivRef.current, evt) && !_this.state.isFlexWrapComponentNotDragOut) {\n          _this.dragDivRef.current.style.boxShadow = '1px 1px';\n        } else {\n          _this.dragDivRef.current.style.boxShadow = '0px 0px';\n        }\n      };\n      _this.getDragFloatWinStyle = function () {\n        var serverDragWinStyle = (0, _componentutil.getComponentDataProperty)(_this.props.model, 'floatDragWinStyle', 'floatDragWinStyle', false);\n        return {\n          width: serverDragWinStyle && serverDragWinStyle.get('w'),\n          height: serverDragWinStyle && serverDragWinStyle.get('h')\n        };\n      };\n      _this.getIsFlexWrapDrag = function () {\n        return (0, _componentutil.getComponentDataProperty)(_this.props.model, 'floatDrag', 'floatDrag', false);\n      };\n      _this.getIsFlexDragFloat = function () {\n        // 后台可能meta data混着用有点恶心，客户端无法感知是data来还是meta来\n        // 统一为data的\n        // return getComponentDataProperty(this.props.model, 'isFlexDragFloat', 'isFlexDragFloat', false)\n        var _this$props$model = _this.props.model,\n          pageId = _this$props$model.pageId,\n          key = _this$props$model.key;\n        return (0, _appModelFunction.getDataProperty)(pageId, key, 'isFlexDragFloat')(_this.props.appState);\n      };\n      _this.getCurrentPageNotHideDOM = function () {\n        var pageId = _this.props.model.pageId;\n        var key = (0, _componentutil.getComponentDataProperty)(_this.props.model, 'notHideControl', 'notHideControl', false);\n        // page-id可能会含有特殊字符，担心报错\n        try {\n          return key ? document.querySelector(\"[data-page-id='\".concat((0, _attachDataFnApi.getDataPageId)(pageId, key), \"']\")) : null;\n        } catch (error) {\n          return null;\n        }\n      };\n      _this.handleMouseOut = _this.handleMouseOut.bind(_assertThisInitialized(_this));\n      _this.handleMouseDown = _this.handleMouseDown.bind(_assertThisInitialized(_this));\n      _this.handleDocMouseMove = _this.handleDocMouseMove.bind(_assertThisInitialized(_this));\n      _this.handleDocMouseUp = _this.handleDocMouseUp.bind(_assertThisInitialized(_this));\n      _this.handleResize = _this.handleResize.bind(_assertThisInitialized(_this));\n      _this.invokeComponentCustomEvent = _this.invokeComponentCustomEvent.bind(_assertThisInitialized(_this));\n      _this.handleTransComponentContainerDragStart = _this.handleTransComponentContainerDragStart.bind(_assertThisInitialized(_this));\n      _this.handleTransComponentContainerDrop = _this.handleTransComponentContainerDrop.bind(_assertThisInitialized(_this));\n      _this.eleRef = /*#__PURE__*/_react[\"default\"].createRef();\n      _this.dragDivRef = /*#__PURE__*/_react[\"default\"].createRef();\n      _this.dragContainerRef = /*#__PURE__*/_react[\"default\"].createRef();\n      _this.handleClose = _this.handleClose.bind(_assertThisInitialized(_this));\n      _this.windowInitialStyle = {\n        height: 500,\n        width: 300\n      };\n      _this.state = _this.getInitialState();\n      return _this;\n    }\n    _createClass(_class, [{\n      key: \"getInitialState\",\n      value: function getInitialState() {\n        var isFlexWrapComponentNotDragOut = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n        this.isOutWindowDrag = false;\n        this.isDrag = false;\n        return {\n          isFlexWrapComponentNotDragOut: isFlexWrapComponentNotDragOut\n          // isDrag: false\n          // 去除isInnerContainer 去除中间态 改为 isFlexWrapComponentNotDragOut表示\n          // isInnerContainer: true,\n          // 事件分发给到\n          // 改为直接操作DOM\n          // isCurPageVisible: true\n        };\n      }\n    }, {\n      key: \"handleClose\",\n      value: function handleClose() {\n        var _this2 = this;\n        this.setState(this.getInitialState(), function () {\n          _this2.invokeComponentCustomEvent(_client.CUSTOM_EVENT_FLEX_CLOSE_CUSTOMEVENT);\n        });\n      }\n    }, {\n      key: \"handleResize\",\n      value: function handleResize(_ref2) {\n        var hide = _ref2.hide,\n          measureRef = _ref2.measureRef;\n        var el = this.dragContainerRef.current;\n        el && (el.style.display = !hide ? 'flex' : 'none');\n      }\n    }, {\n      key: \"invokeComponentCustomEvent\",\n      value: function invokeComponentCustomEvent(name) {\n        var arg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n        var _this$props$model2 = this.props.model,\n          pageId = _this$props$model2.pageId,\n          key = _this$props$model2.key;\n        var args = [key, name, arg];\n        _global[\"default\"][_global.INVOKE_CUSTOM_EVENT](pageId, '', args);\n      }\n\n      // 外界的\n    }, {\n      key: \"handleDocMouseMove\",\n      value: function handleDocMouseMove(evt) {\n        this.isInContainer(evt);\n        if (this.isDrag) {\n          this.dragWindowMove(evt);\n        }\n      }\n    }, {\n      key: \"handleMouseOut\",\n      value:\n      // 离开\n      function handleMouseOut(evt) {\n        var _this3 = this;\n        // 从这里开始计算浮动窗口坐标:\n        // 就不用this.state.isInnerContainer了\n        if (!this.isDrag || !this.state.isFlexWrapComponentNotDragOut) return;\n        var event = evt;\n        // 这里得在回调里\n        // this.dragWindowMove(event)\n        this.setState({\n          isFlexWrapComponentNotDragOut: false\n          // isInnerContainer: false,\n        }, function () {\n          _this3.dragWindowMove(event);\n          _this3.invokeComponentCustomEvent(_client.CUSTOM_EVENT_FLEX_DRAG_CUSTOMEVENT);\n        });\n        evt.stopPropagation();\n      }\n    }, {\n      key: \"handleDocMouseUp\",\n      value: function handleDocMouseUp(evt) {\n        var _this4 = this;\n        // 这里是因为鼠标松开之前的状态得记住，在回调里作判断\n        var outPrevState;\n        var prevIsDrag = this.isDrag;\n        var prevIsOutWindowDrag = this.isOutWindowDrag;\n        this.isDrag = false;\n        this.isOutWindowDrag = false;\n        if (!(prevIsDrag || prevIsOutWindowDrag) || !(0, _dragHelp.isMousePositionInContainer)(this.dragDivRef.current, evt)) return;\n\n        // 设置可见，恢复回去\n        this.setState(function (prevState) {\n          outPrevState = prevState;\n          return {\n            isFlexWrapComponentNotDragOut: true\n          };\n        }, function () {\n          // 判断: 拖拽窗体是否拖、现在鼠标位置是否在停靠块上，如果之前没有拖动，鼠标 不在停靠块上就不继续走逻辑\n          // 如果在停靠块上，那么\n          if (_this4.isOutWindowDrag) {\n            _this4.handleTransComponentContainerDrop({\n              clientX: evt.clientX,\n              clientY: evt.clientY\n            }, true);\n          }\n          // 去除全局窗体的事件,不拖动就没有这个事件\n          document.removeEventListener('mousemove', _this4.handleDocMouseMove);\n          // 这里得判断之是否前已经拖出 拖出的用isFlexWrapComponentNotDragOut为false来表示\n          if (!outPrevState.isFlexWrapComponentNotDragOut) {\n            _this4.invokeComponentCustomEvent(_client.CUSTOM_EVENT_FLEX_DROP_CUSTOMEVENT);\n          }\n          if (_this4.dragDivRef.current) {\n            _this4.dragDivRef.current.style.boxShadow = '0px 0px';\n          }\n        });\n        evt.stopPropagation();\n      }\n    }, {\n      key: \"handleMouseDown\",\n      value: function handleMouseDown(evt) {\n        // 开始拖\n        if (!this.state.isFlexWrapComponentNotDragOut) return;\n        this.isDrag = true;\n        // 这里不放在mount周期调用是考虑Flex面板得数量，考虑性能问题\n        document.addEventListener('mousemove', this.handleDocMouseMove);\n      }\n    }, {\n      key: \"componentWillUnmount\",\n      value: function componentWillUnmount() {\n        document.removeEventListener('mousemove', this.handleDocMouseMove);\n        document.removeEventListener('mouseup', this.handleDocMouseUp);\n      }\n    }, {\n      key: \"componentDidUpdate\",\n      value: function componentDidUpdate(prevProps, prevState) {\n        var _this5 = this;\n        var isFlexWrapDrag = this.getIsFlexWrapDrag();\n        if (!isFlexWrapDrag) {\n          // 这里没有必要比较之前的状态，只要是现在拖出的都要回去\n          if (!this.state.isFlexWrapComponentNotDragOut) {\n            this.setState(this.getInitialState());\n          }\n          return;\n        }\n        var isFlexDragFloat = this.getIsFlexDragFloat();\n        var prevIsFlexDragFloat = (0, _componentutil.getComponentDataProperty)(prevProps.model, 'isFlexDragFloat', 'isFlexDragFloat', false);\n        // const prevIsFlexWrapDrag = getComponentDataProperty(prevProps.model, 'floatDrag', 'floatDrag', false)\n        // FIX: 这里prevIsFlexWrapDrag会为true,这里为啥能两个都为true，因为loaddata要完成之后再加载组件\n        if (isFlexWrapDrag && !this.isAddDocMouseUpHandle) {\n          this.isAddDocMouseUpHandle = true;\n          // 得放到didMount 但是这样无法按需注册事件,得后端设置参数，所以放在componentDidUpdate\n          document.addEventListener('mouseup', this.handleDocMouseUp);\n        }\n        // 但是这里如果不用的话，可能有问题，得测试\n        if (!isFlexDragFloat) {\n          this.isSetFlexDragFloat = false;\n          return;\n        }\n        var _this$props$model3 = this.props.model,\n          pageId = _this$props$model3.pageId,\n          key = _this$props$model3.key;\n        var dispatch = this.props.dispatch;\n        // 这样如果初次传，有问题吧，就不走这里了\n        // 不管有没有拖出，都能设置居中\n        if (prevState.isFlexWrapComponentNotDragOut && isFlexDragFloat && (!prevIsFlexDragFloat || !this.isSetFlexDragFloat)) {\n          this.isSetFlexDragFloat = true;\n          this.setState(_objectSpread({}, this.getInitialState(false)), function () {\n            // 这里是为了后端能再设置回去，废弃，后台可以在初始值时设置\n            // this.invokeComponentCustomEvent(FLEX_DRAGFLOAT_CUSTOMEVENT)\n            if (_this5.dragContainerRef.current) {\n              var _this5$getDragFloatWi = _this5.getDragFloatWinStyle(),\n                width = _this5$getDragFloatWi.width,\n                height = _this5$getDragFloatWi.height;\n              // 宽度还是写成固定的\n              // let contentWidth = this.dragContainerRef.current.getBoundingClientRect().width\n              // contentWidth = Math.max(width, contentWidth)\n              var contentWidth = width;\n              _this5.dragContainerRef.current.style.top = \"calc(50% - \".concat((height || _this5.windowInitialStyle.height) / 2, \"px)\");\n              _this5.dragContainerRef.current.style.left = \"calc(50% - \".concat((contentWidth || _this5.windowInitialStyle.width) / 2, \"px)\");\n            }\n            // 这里是设置data的数据， 后台不能是meta\n            dispatch((0, _appModelFunction.convertAppModelFunctionAction)((0, _appModelFunction.setDataProperty)(pageId, key, 'isFlexDragFloat', false)));\n          });\n        } else if (isFlexDragFloat) {\n          dispatch((0, _appModelFunction.convertAppModelFunctionAction)((0, _appModelFunction.setDataProperty)(pageId, key, 'isFlexDragFloat', false)));\n        }\n      }\n    }, {\n      key: \"handleTransComponentContainerDragStart\",\n      value: function handleTransComponentContainerDragStart() {\n        this.isOutWindowDrag = true;\n      }\n\n      // 增加个参数，在已经check过的情况，不用再check\n    }, {\n      key: \"handleTransComponentContainerDrop\",\n      value: function handleTransComponentContainerDrop(eventPosition, isCheckMousePositionInContainer) {\n        if (!isCheckMousePositionInContainer && (0, _dragHelp.isMousePositionInContainer)(this.dragDivRef.current, eventPosition)) return;\n        this.isOutWindowDrag = false;\n      }\n    }, {\n      key: \"componentDidMount\",\n      value: function componentDidMount() {}\n    }, {\n      key: \"render\",\n      value: function render() {\n        var _this6 = this;\n        var isFlexDrag = this.getIsFlexWrapDrag();\n        if (!isFlexDrag) {\n          return /*#__PURE__*/_react[\"default\"].createElement(WrapComponent, this.props);\n        }\n        var isFlexWrapComponentNotDragOut = this.state.isFlexWrapComponentNotDragOut;\n        var dragActionDivStyle = (0, _componentutil.getComponentDataProperty)(this.props.model, 'docWinStyle', 'docWinStyle', false);\n        var _this$getDragFloatWin = this.getDragFloatWinStyle(),\n          width = _this$getDragFloatWin.width,\n          height = _this$getDragFloatWin.height;\n        var floatFlexTitle = (0, _componentutil.getComponentDataProperty)(this.props.model, 'floatFlexTitle', 'floatFlexTitle', false);\n        var model = this.props.model;\n        // Z-INDEX应该考虑?\n        // const commonClass = getCommonClass(model)\n        var style = Object.assign({}, (0, _componentutil.getCommonStyle)(model), this.props.style);\n        var dragPositionStyle = {};\n        // const containerClass = classnames({\n        //   [DragFlexWrapLess.dragFlexContainer]: true,\n        //   [DragFlexWrapLess.dragOutMargin]: !isFlexWrapComponentNotDragOut\n        //   // [DragFlexWrapLess.currentPageNotVisible]: !this.state.isCurPageVisible\n        // }, isFlexWrapComponentNotDragOut ? mergeCommonClassNames(commonClass) : {})\n        var renderComponent;\n        // 拖拽/停靠块\n        var renderDragActionDiv = function renderDragActionDiv() {\n          // 不滚动,反倒是直接销毁\n          // 所以这里要么用intersectionObserve监听页签,但是这样硬伤还是有\n          // 考虑到场景,不如由业务端决定\n          return /*#__PURE__*/_react[\"default\"].createElement(_ResizeMeasure[\"default\"], {\n            onResize: _this6.handleResize,\n            render: function render(_ref3) {\n              var measureRef = _ref3.measureRef;\n              return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n                className: (0, _classnames2[\"default\"])(_defineProperty({}, _DragFlexWrap[\"default\"].flexDragActionDiv, true)),\n                ref: function ref(el) {\n                  _this6.dragDivRef.current = el;\n                  var notHideNode = _this6.getCurrentPageNotHideDOM();\n                  if (!isFlexWrapComponentNotDragOut && notHideNode) {\n                    measureRef(notHideNode);\n                    return;\n                  }\n                  el && !isFlexWrapComponentNotDragOut && measureRef && measureRef(el);\n                },\n                style: {\n                  cursor: isFlexWrapComponentNotDragOut ? 'move' : 'auto',\n                  height: dragActionDivStyle && dragActionDivStyle.get('h'),\n                  width: dragActionDivStyle && dragActionDivStyle.get('w'),\n                  backgroundColor: style.backgroundColor\n                },\n                onMouseDown: _this6.handleMouseDown,\n                onMouseOut: _this6.handleMouseOut\n              });\n            }\n          });\n        };\n        if (isFlexDrag) {\n          dragPositionStyle = {\n            postion: 'absolute',\n            // minWidth: width || this.windowInitialStyle.width,\n            width: width || this.windowInitialStyle.width,\n            height: height || this.windowInitialStyle.height\n          };\n        }\n        if (!isFlexWrapComponentNotDragOut) {\n          // 拖拽出来的窗体\n          // 这里已经脱离原本的文档流，无需考虑接收设计器的布局数据 mergeCommonClassNames(commonClass)\n          renderComponent = /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n            className: (0, _classnames2[\"default\"])(_DragFlexWrap[\"default\"].flexContainer),\n            style: dragPositionStyle,\n            ref: this.dragContainerRef\n          }, /*#__PURE__*/_react[\"default\"].createElement(_DragDialog[\"default\"], {\n            eleRef: this.eleRef,\n            onDragStart: this.handleTransComponentContainerDragStart,\n            onDrop: this.handleTransComponentContainerDrop,\n            handleMouseMove: this.isInContainer,\n            windowInitialStyleWidth: width || this.windowInitialStyle.width\n          }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n            className: (0, _classnames2[\"default\"])(_DragFlexWrap[\"default\"].header),\n            ref: function ref(el) {\n              _this6.eleRef.current = el;\n            },\n            style: {\n              justifyContent: 'space-between'\n            }\n          }, /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n            className: \"kdfont common-font-color\"\n          }, floatFlexTitle || ''), /*#__PURE__*/_react[\"default\"].createElement(\"i\", {\n            className: \"kdfont kdfont-guanbiyulan\",\n            onClick: this.handleClose\n          }))), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n            className: (0, _classnames2[\"default\"])(_DragFlexWrap[\"default\"].body)\n          }, /*#__PURE__*/_react[\"default\"].createElement(WrapComponent, this.props)));\n        } else {\n          // 停靠块显示在容器里面, 合为一体\n          renderComponent = /*#__PURE__*/_react[\"default\"].createElement(WrapComponent, _extends({}, this.props, {\n            renderDragActionDiv: renderDragActionDiv\n          }));\n        }\n        return (\n          /*#__PURE__*/\n          // 不要总想着多个div\n          _react[\"default\"].createElement(_react[\"default\"].Fragment, null, !isFlexWrapComponentNotDragOut && renderDragActionDiv(), renderComponent)\n        );\n      }\n    }]);\n    return _class;\n  }(_react[\"default\"].Component);\n}\n\n//# sourceURL=webpack://bos-platform/./src/component/common/DragFlexWrap.jsx?");

/***/ }),

/***/ "./src/component/common/IntersectionMeasure.js":
/*!*****************************************************!*\
  !*** ./src/component/common/IntersectionMeasure.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.create.js */ \"../../node_modules/core-js/modules/es.object.create.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.get-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.reflect.construct.js */ \"../../node_modules/core-js/modules/es.reflect.construct.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\n__webpack_require__(/*! core-js/modules/es.object.set-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.set-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/web.timers.js */ \"../../node_modules/core-js/modules/web.timers.js\");\nvar _react = _interopRequireWildcard(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _reactDom = _interopRequireDefault(__webpack_require__(/*! react-dom */ \"webpack/sharing/consume/default/react-dom/react-dom?418d\"));\nvar _propTypes = _interopRequireDefault(__webpack_require__(/*! prop-types */ \"../../node_modules/prop-types/index.js\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); } /**\n * IntersectionMeasure 控件现对指定父容器的可见性变化观察的高阶函数\n * @authors daosheng_chen\n * @date    2018-08-04 17:38:51\n * @version 1\n */\n// import findScrollParentElement from './findScrollParentElement'\nvar IntersectionMeasure = exports[\"default\"] = /*#__PURE__*/function (_Component) {\n  _inherits(IntersectionMeasure, _Component);\n  function IntersectionMeasure(props) {\n    var _this;\n    _classCallCheck(this, IntersectionMeasure);\n    _this = _callSuper(this, IntersectionMeasure, [props]);\n    _this.setMeterRef = _this.setMeterRef.bind(_assertThisInitialized(_this));\n    _this.measure = _this.measure.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n  _createClass(IntersectionMeasure, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      // let root = this.props.root\n      // if (!root) {\n      //   root = findScrollParentElement(ReactDOM.findDOMNode(this).parentNode)\n      //   this.root = root\n      // }\n      this.io = new window.IntersectionObserver(this.measure, {\n        threshold: this.props.threshold || [0.000001],\n        rootMargin: this.props.rootMargin\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.io && this.io.disconnect();\n      this.resizeHander && this.resizeHander.removeResizeObserve();\n    }\n  }, {\n    key: \"measure\",\n    value: function measure(entries) {\n      var intersectionRatio = entries[0].intersectionRatio;\n      if (typeof this.props.onIntersection === 'function') {\n        var visible = intersectionRatio > 0 && entries[0].rootBounds.width > 0;\n        this.props.onIntersection({\n          visible: visible,\n          intersectionRatio: intersectionRatio,\n          measureRef: this.ele,\n          entry: entries[0]\n        });\n      }\n    }\n  }, {\n    key: \"setMeterRef\",\n    value: function setMeterRef(ele) {\n      var _this2 = this;\n      if (ele) {\n        if (!isDOMElement(ele)) {\n          ele = _reactDom[\"default\"].findDOMNode(ele);\n        }\n        setTimeout(function () {\n          _this2.ele && _this2.io.unobserve(_this2.ele);\n          _this2.io.observe(ele);\n        }, 0);\n      } else {\n        this.ele && this.io.unobserve(this.ele);\n      }\n      // must is dom ele\n      this.ele = ele;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var render = this.props.render || this.props.children;\n      if (render && typeof render === 'function') {\n        return render({\n          measureRef: this.setMeterRef\n        });\n      }\n      return this.props.children;\n    }\n  }]);\n  return IntersectionMeasure;\n}(_react.Component);\nIntersectionMeasure.propTypes = {\n  render: _propTypes[\"default\"].func,\n  // 渲染函数 ({measureRef})=>{}\n  onIntersection: _propTypes[\"default\"].func,\n  // 控件进出父容器变化回调函数 ({intersectionRatio,measureRef,entry})=>{}\n  // root: PropTypes.object, // 指定目标元素所在的容器节点（即根元素）。注意，容器元素必须是目标元素的祖先节点。\n  rootMargin: _propTypes[\"default\"].string // 用来扩展或缩小rootBounds这个矩形的大小，从而影响intersectionRect交叉区域的大小。它使用CSS的定义方法，比如10px 20px 30px 40px，表示 top、right、bottom 和 left 四个方向的值。\n  // once:propTypes.bool//从无到有\n};\nfunction isDOMElement(obj) {\n  return !!(obj && typeof window !== 'undefined' && (obj === window || obj.nodeType));\n}\n\n//# sourceURL=webpack://bos-platform/./src/component/common/IntersectionMeasure.js?");

/***/ }),

/***/ "./src/component/common/LazyLoad.js":
/*!******************************************!*\
  !*** ./src/component/common/LazyLoad.js ***!
  \******************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.create.js */ \"../../node_modules/core-js/modules/es.object.create.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.get-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.reflect.construct.js */ \"../../node_modules/core-js/modules/es.reflect.construct.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = exports.LazyLoadItem = void 0;\n__webpack_require__(/*! core-js/modules/es.array.concat.js */ \"../../node_modules/core-js/modules/es.array.concat.js\");\n__webpack_require__(/*! core-js/modules/es.array.filter.js */ \"../../node_modules/core-js/modules/es.array.filter.js\");\n__webpack_require__(/*! core-js/modules/es.array.find.js */ \"../../node_modules/core-js/modules/es.array.find.js\");\n__webpack_require__(/*! core-js/modules/es.array.find-index.js */ \"../../node_modules/core-js/modules/es.array.find-index.js\");\n__webpack_require__(/*! core-js/modules/es.array.for-each.js */ \"../../node_modules/core-js/modules/es.array.for-each.js\");\n__webpack_require__(/*! core-js/modules/es.array.slice.js */ \"../../node_modules/core-js/modules/es.array.slice.js\");\n__webpack_require__(/*! core-js/modules/es.array.splice.js */ \"../../node_modules/core-js/modules/es.array.splice.js\");\n__webpack_require__(/*! core-js/modules/es.date.now.js */ \"../../node_modules/core-js/modules/es.date.now.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-string.js */ \"../../node_modules/core-js/modules/es.date.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\n__webpack_require__(/*! core-js/modules/es.object.assign.js */ \"../../node_modules/core-js/modules/es.object.assign.js\");\n__webpack_require__(/*! core-js/modules/es.object.set-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.set-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ \"../../node_modules/core-js/modules/web.dom-collections.for-each.js\");\n__webpack_require__(/*! core-js/modules/web.timers.js */ \"../../node_modules/core-js/modules/web.timers.js\");\nvar _react = _interopRequireWildcard(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _reactDom = _interopRequireDefault(__webpack_require__(/*! react-dom */ \"webpack/sharing/consume/default/react-dom/react-dom?418d\"));\nvar _immutable = __webpack_require__(/*! immutable */ \"webpack/sharing/consume/default/immutable/immutable?f2ca\");\nvar _IntersectionMeasure = _interopRequireDefault(__webpack_require__(/*! ./IntersectionMeasure */ \"./src/component/common/IntersectionMeasure.js\"));\nvar _global = _interopRequireWildcard(__webpack_require__(/*! @/global */ \"./src/global/index.js\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); } /**\n* LazyLoad 封装一个异步和惰性加载大数据列表元素，提升渲染性能\n* @authors Your Name (you@example.org)\n* @date    2018-08-13 13:51:47\n* @version $Id$\n*/ // import addMutationObserver from '../../util/mutationObserver'\n// import findScrollParentElement from './findScrollParentElement'\nvar idCounter = 0;\nvar STEP = 5; // 每次加载数量\nvar INIT_LOAD_NUMBER = 20; // 首次加载数量\n\nfunction uniqueId() {\n  var id = ++idCounter;\n  return 'lazyload' + id;\n}\nvar LazyLoad = exports[\"default\"] = /*#__PURE__*/function (_Component) {\n  _inherits(LazyLoad, _Component);\n  function LazyLoad(props) {\n    var _this;\n    _classCallCheck(this, LazyLoad);\n    _this = _callSuper(this, LazyLoad, [props]);\n    _this.hidden = false; // 去除动态判断可见性\n    _this.id = uniqueId();\n    _this.components = (0, _immutable.List)();\n    _this.refreshComponents = _this.refreshComponents.bind(_assertThisInitialized(_this));\n    _this.setVisible = _this.setVisible.bind(_assertThisInitialized(_this));\n    // this.handScroll = this.handScroll.bind(this)\n    _this.index = 0; // 异步分批加载控件\n    _this.visibleComponents = (0, _immutable.List)(); // 当前可见的控件索引值\n    _this.loadNumbers = INIT_LOAD_NUMBER; // lazy加载，已经加载数量\n    return _this;\n  }\n  _createClass(LazyLoad, [{\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps, nextState) {\n      return false;\n    }\n  }, {\n    key: \"setVisible\",\n    value: function setVisible(index, isVisible) {\n      if (!isVisible) {\n        this.visibleComponents = this.visibleComponents.filterNot(function (v) {\n          return v === index;\n        });\n      } else {\n        this.visibleComponents = this.visibleComponents.push(index);\n        if (index >= this.loadNumbers - 1) {\n          this.loadNumbers += STEP;\n        }\n      }\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      var _this2 = this;\n      clearTimeout(this.time);\n      var thisSize = this.props.items.size;\n      var nextSize = nextProps.items.size;\n      if (thisSize === 0 && nextSize === 0) {\n        // 提升性能\n        return;\n      }\n      if (nextSize === 0) {\n        this.components = (0, _immutable.List)();\n        this.forceUpdate();\n        return;\n      }\n      if (thisSize !== nextSize) {\n        if (nextSize > thisSize) {\n          this.index = 0;\n          this.visibleComponents = this.visibleComponents.filter(function (index) {\n            return index <= thisSize - 1;\n          });\n          var lastIndex = this.visibleComponents.max();\n          if (lastIndex === thisSize - 1) {\n            this.loadNumbers = thisSize + STEP;\n          }\n        } else {\n          // this.loadNumbers = INIT_LOAD_NUMBER\n        }\n      }\n      var size = nextProps.items.size;\n      var items = nextProps.items,\n        visibleRows = nextProps.visibleRows,\n        style = nextProps.style,\n        render = nextProps.render,\n        options = nextProps.options;\n      if (!this.hidden) {\n        this.time = setTimeout(function () {\n          if (!_this2.hidden) {\n            _this2.refreshComponents(size);\n            _this2.visibleComponents.forEach(function (idx) {\n              // 先刷新可见区域内容\n              if (_this2.components.has(idx) && _this2.components.size > 0 && idx <= _this2.components.size - 1 && idx <= Math.min(_this2.loadNumbers, items.size) - 1) {\n                var findIndex = _this2.components.findIndex(function (item, i) {\n                  return item.key === idx + '';\n                });\n                if (findIndex > -1 && idx === findIndex) {\n                  _this2.components = _this2.components.splice(idx, 1, /*#__PURE__*/_react[\"default\"].createElement(LazyLoadItem, {\n                    key: idx,\n                    item: items.get(idx),\n                    isRowVisible: visibleRows.get(idx),\n                    index: idx,\n                    setVisible: _this2.setVisible,\n                    style: style,\n                    hidden: _this2.hidden,\n                    root: _this2.root,\n                    render: render,\n                    options: options\n                  }));\n                }\n              }\n            });\n          }\n        }, 50);\n      }\n    }\n  }, {\n    key: \"refreshComponents\",\n    value: function refreshComponents(size) {\n      var _this3 = this;\n      size = size || this.props.items.size;\n      this.components = this.components.slice(0, size || this.props.items.size);\n      this.index = 0;\n      var lastIndex = this.visibleComponents.find(function (index) {\n        return index === _this3.loadNumbers - 1 || index === size - 1;\n      });\n      if (lastIndex && lastIndex < size) {\n        this.index = Math.min(this.index, this.loadNumbers);\n        this.loadNumbers += STEP;\n      }\n    }\n\n    // handScroll (event) {\n    //   this.isScrolling = true\n    //   this.root.style.willChange = 'transform'\n    //   clearTimeout(this.timeChange)\n    //   this.timeChange = window.setTimeout(() => {\n    //     this.isScrolling = false\n    //     this.root.style.willChange = 'auto'\n    //   }, 100)\n    // }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this4 = this;\n      // this.root = findScrollParentElement(document.querySelector(`#${this.id}`).parentNode)\n      // if (this.root) {\n      //   this.root.addEventListener('scroll', this.handScroll, { passive: true })\n      // } else {\n      //   console.error('没有找到overflow=auto的父容器')\n      //   return\n      // }\n      // this.hidden = !!document.querySelector(`.hidden #${this.id}`)\n      // if (!this.hidden) {\n      this.refreshComponents();\n      // }\n\n      // 监听父可见性变化\n      // this.removeMutationObserver = addMutationObserver(mutations => {\n      //   const res = mutations.find(item => item.oldValue && item.oldValue.split(/\\s+/).includes('hidden'))// 判断是否class为hidden的类发生变化\n      //   if (res) {\n      //     this.hidden = !!document.querySelector(`.hidden #${this.id}`)\n      //     if (!this.hidden) {\n      //       this.refreshComponents()\n      //     }\n      //   }\n      // })\n\n      var loadComponent = function loadComponent() {\n        var showNumber = Math.min(_this4.loadNumbers, _this4.props.items.size);\n        var notLazyLoadAllow = _global[\"default\"][_global.IS_IE] || !_this4.props.lazyLoadAllow;\n        if (notLazyLoadAllow) {\n          showNumber = _this4.props.items.size;\n        }\n        if (!_this4.hidden && _this4.index <= showNumber - 1) {\n          (0, _immutable.Range)(_this4.index, _this4.index + STEP).forEach(function (idx) {\n            if (idx < showNumber) {\n              var size = _this4.components.size;\n              if (size > 0 && idx <= size - 1) {\n                if (notLazyLoadAllow) {\n                  _this4.components = _this4.components.splice(idx, 1, _this4.props.render(_this4.props.items.get(idx), idx, _this4.props.options));\n                } else {\n                  _this4.components = _this4.components.splice(idx, 1, /*#__PURE__*/_react[\"default\"].createElement(LazyLoadItem, {\n                    key: idx,\n                    item: _this4.props.items.get(idx),\n                    isRowVisible: _this4.props.visibleRows.get(idx),\n                    index: idx,\n                    setVisible: _this4.setVisible,\n                    style: _this4.props.style,\n                    hidden: _this4.hidden,\n                    render: _this4.props.render,\n                    options: _this4.props.options\n                  }));\n                }\n              } else {\n                if (notLazyLoadAllow) {\n                  _this4.components = _this4.components.concat(_this4.props.render(_this4.props.items.get(idx), idx, _this4.props.options));\n                } else {\n                  _this4.components = _this4.components.concat( /*#__PURE__*/_react[\"default\"].createElement(LazyLoadItem, {\n                    key: idx,\n                    item: _this4.props.items.get(idx),\n                    isRowVisible: _this4.props.visibleRows.get(idx),\n                    index: idx,\n                    setVisible: _this4.setVisible,\n                    style: _this4.props.style,\n                    hidden: _this4.hidden,\n                    render: _this4.props.render,\n                    options: _this4.props.options\n                  }));\n                }\n              }\n            }\n          });\n          _this4.forceUpdate();\n          _this4.index += STEP;\n          _this4.index = Math.min(_this4.index, showNumber);\n        }\n        _this4.raf = !_this4.dispose && window.requestAnimationFrame(loadComponent);\n      };\n      this.raf = window.requestAnimationFrame(loadComponent);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.dispose = true;\n      // this.removeMutationObserver && this.removeMutationObserver()\n      window.cancelAnimationFrame(this.raf);\n      // this.root && this.root.removeEventListener('scroll', this.handScroll)\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return this.components.concat( /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        key: this.id,\n        style: {\n          display: 'none'\n        },\n        id: this.id\n      }));\n    }\n  }]);\n  return LazyLoad;\n}(_react.Component);\nvar LazyLoadItem = exports.LazyLoadItem = /*#__PURE__*/function (_Component2) {\n  _inherits(LazyLoadItem, _Component2);\n  function LazyLoadItem(props) {\n    var _this5;\n    _classCallCheck(this, LazyLoadItem);\n    _this5 = _callSuper(this, LazyLoadItem, [props]);\n    _this5.onIntersection = _this5.onIntersection.bind(_assertThisInitialized(_this5));\n    _this5.component = undefined;\n    return _this5;\n  }\n  _createClass(LazyLoadItem, [{\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps, nextState) {\n      return false;\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      if (!this.props.hidden && this.visible) {\n        this.component = this.props.render(nextProps.item, nextProps.index, nextProps.options);\n        this.forceUpdate();\n      } else {\n        this.refresh = true; // 延后需要刷新控件\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      var ele = _reactDom[\"default\"].findDOMNode(this); // 延迟加载控件forceUpdate后设置\n      if (ele && ele.children.length > 0) {\n        if (this.visible) {\n          ele.style.visibility = 'hidden';\n          ele.children[0].style.visibility = 'visible';\n        }\n      }\n    }\n  }, {\n    key: \"onIntersection\",\n    value: function onIntersection(_ref) {\n      var _this6 = this;\n      var visible = _ref.visible,\n        measureRef = _ref.measureRef;\n      if (visible) {\n        this.time = Date.now();\n      } else {\n        if (this.time) {\n          if (this.props.index < 50 || Date.now() - this.time < 500) {\n            // aggrid控件刷新会导致chrome下IntersectionObserver的可见性随机产生错误，导致卡片分录数据行从可见到不可见\n            // 如果50行以内卡片或切换时间比较短，一直可见（对性能产生一定影响）\n            return;\n          }\n        }\n      }\n      this.visible = visible;\n      this.borderStyle = this.borderStyle || measureRef.style.borderStyle;\n      this.props.setVisible(this.props.index, visible);\n      if (visible) {\n        // measureRef.style.minHeight = 'unset'\n        measureRef.style.minWidth = 'unset';\n        measureRef.style.borderStyle = 'none';\n        if (!this.component) {\n          this.component = this.props.render(this.props.item, this.props.index, this.props.options);\n          this.forceUpdate();\n        } else {\n          if (this.refresh) {\n            this.refresh = false;\n            this.component = this.props.render(this.props.item, this.props.index, this.props.options);\n            this.forceUpdate();\n          }\n          if (measureRef.children.length > 0) {\n            window.requestAnimationFrame(function () {\n              measureRef.style.visibility = 'hidden';\n              measureRef.children[0].style.visibility = 'visible';\n              if (_this6.props.width && _this6.props.height) {\n                // 固定高宽，才设置隐藏/显示控件\n                measureRef.children[0].style.display = 'flex';\n              }\n            });\n          }\n        }\n      } else {\n        if (measureRef.children.length > 0) {\n          window.requestAnimationFrame(function () {\n            measureRef.style.visibility = 'visible';\n            measureRef.style.borderStyle = _this6.borderStyle;\n            measureRef.children[0].style.visibility = 'hidden';\n            if (_this6.props.width && _this6.props.height) {\n              // 固定高宽，才设置隐藏/显示控件\n              measureRef.children[0].style.display = 'none';\n            }\n          });\n        }\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this7 = this;\n      var style = Object.assign({}, this.props.style);\n      if (!style.width) {\n        style.minWidth = '100%';\n      }\n      if (!style.height) {\n        style.minHeight = 20;\n      } else {\n        style.minHeight = style.height;\n      }\n      if (!this.props.isRowVisible) {\n        style.height = 0;\n        style.minHeight = 0;\n        style.overflow = 'hidden';\n      }\n      var renderComponent = function renderComponent(_ref2) {\n        var measureRef = _ref2.measureRef;\n        return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n          style: style,\n          ref: measureRef,\n          \"data-key\": _this7.props.index\n        }, _this7.component);\n      };\n      return /*#__PURE__*/_react[\"default\"].createElement(_IntersectionMeasure[\"default\"], {\n        rootMargin: \"100px 0px 300px 0px\",\n        onIntersection: this.onIntersection,\n        render: renderComponent\n      });\n    }\n  }]);\n  return LazyLoadItem;\n}(_react.Component);\n\n//# sourceURL=webpack://bos-platform/./src/component/common/LazyLoad.js?");

/***/ }),

/***/ "./src/component/common/PermissionControlWrap.js":
/*!*******************************************************!*\
  !*** ./src/component/common/PermissionControlWrap.js ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.array.from.js */ \"../../node_modules/core-js/modules/es.array.from.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.array.slice.js */ \"../../node_modules/core-js/modules/es.array.slice.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-string.js */ \"../../node_modules/core-js/modules/es.date.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.function.name.js */ \"../../node_modules/core-js/modules/es.function.name.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.regexp.exec.js */ \"../../node_modules/core-js/modules/es.regexp.exec.js\");\n__webpack_require__(/*! core-js/modules/es.regexp.to-string.js */ \"../../node_modules/core-js/modules/es.regexp.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.array.index-of.js */ \"../../node_modules/core-js/modules/es.array.index-of.js\");\n__webpack_require__(/*! core-js/modules/es.array.is-array.js */ \"../../node_modules/core-js/modules/es.array.is-array.js\");\nvar _react = _interopRequireWildcard(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _componentutil = __webpack_require__(/*! @/util/componentutil */ \"./src/util/componentutil.js\");\nvar _memoryCacher = __webpack_require__(/*! @/model/memoryCacher */ \"./src/model/memoryCacher.js\");\nvar _const = __webpack_require__(/*! @/constant/const */ \"./src/constant/const.js\");\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; } /**\n * 高阶封装 - 权限控制，目前用于绑定操作按钮的控件的权限控制\n *\n */\nvar PermissionControlWrap = function PermissionControlWrap() {\n  return function (WrapComponent) {\n    return function (props) {\n      var _useState = (0, _react.useState)(true),\n        _useState2 = _slicedToArray(_useState, 2),\n        hasPermission = _useState2[0],\n        setPermission = _useState2[1];\n      (0, _react.useEffect)(function () {\n        var permissionData = (0, _memoryCacher.getPageData)(props.model.pageId, _const.PERMISSION_PARAMS);\n        permissionData && handlePermission(permissionData);\n        var removePageDataListener = (0, _memoryCacher.addDataChangeListener)(props.model.pageId, _const.PERMISSION_PARAMS, handlePermission);\n        return function () {\n          removePageDataListener === null || removePageDataListener === void 0 || removePageDataListener();\n        };\n      }, []);\n      var handlePermission = function handlePermission(data) {\n        if (!data) return;\n        var _data$noPerData = data.noPerData,\n          noPerData = _data$noPerData === void 0 ? [] : _data$noPerData;\n        var model = props.model;\n        var permissionId = (0, _componentutil.getComponentDataProperty)(model, 'permissionId', 'permissionId', false);\n        if (noPerData.indexOf(permissionId) !== -1) {\n          // 无权限\n          setPermission(false);\n        }\n      };\n      if (!hasPermission) return null;\n      return /*#__PURE__*/_react[\"default\"].createElement(WrapComponent, props);\n    };\n  };\n};\nvar _default = exports[\"default\"] = PermissionControlWrap;\n\n//# sourceURL=webpack://bos-platform/./src/component/common/PermissionControlWrap.js?");

/***/ }),

/***/ "./src/component/common/VirtualView.js":
/*!*********************************************!*\
  !*** ./src/component/common/VirtualView.js ***!
  \*********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-string.js */ \"../../node_modules/core-js/modules/es.date.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.function.name.js */ \"../../node_modules/core-js/modules/es.function.name.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.regexp.exec.js */ \"../../node_modules/core-js/modules/es.regexp.exec.js\");\n__webpack_require__(/*! core-js/modules/es.regexp.to-string.js */ \"../../node_modules/core-js/modules/es.regexp.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.DIRECTION_V = void 0;\nexports[\"default\"] = VirtualView;\n__webpack_require__(/*! core-js/modules/es.array.fill.js */ \"../../node_modules/core-js/modules/es.array.fill.js\");\n__webpack_require__(/*! core-js/modules/es.array.for-each.js */ \"../../node_modules/core-js/modules/es.array.for-each.js\");\n__webpack_require__(/*! core-js/modules/es.array.from.js */ \"../../node_modules/core-js/modules/es.array.from.js\");\n__webpack_require__(/*! core-js/modules/es.array.is-array.js */ \"../../node_modules/core-js/modules/es.array.is-array.js\");\n__webpack_require__(/*! core-js/modules/es.array.map.js */ \"../../node_modules/core-js/modules/es.array.map.js\");\n__webpack_require__(/*! core-js/modules/es.array.reduce.js */ \"../../node_modules/core-js/modules/es.array.reduce.js\");\n__webpack_require__(/*! core-js/modules/es.array.slice.js */ \"../../node_modules/core-js/modules/es.array.slice.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.assign.js */ \"../../node_modules/core-js/modules/es.object.assign.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.parse-int.js */ \"../../node_modules/core-js/modules/es.parse-int.js\");\n__webpack_require__(/*! core-js/modules/es.promise.js */ \"../../node_modules/core-js/modules/es.promise.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ \"../../node_modules/core-js/modules/web.dom-collections.for-each.js\");\n__webpack_require__(/*! core-js/modules/web.timers.js */ \"../../node_modules/core-js/modules/web.timers.js\");\nvar _react = _interopRequireWildcard(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _commonUtils = _interopRequireDefault(__webpack_require__(/*! @/component/common/commonUtils */ \"./src/component/common/commonUtils.js\"));\nvar _resizeObserve = _interopRequireDefault(__webpack_require__(/*! @/util/resizeObserve */ \"./src/util/resizeObserve.js\"));\nvar _scrollUtil = __webpack_require__(/*! @/util/scrollUtil */ \"./src/util/scrollUtil.js\");\nvar _lodash = _interopRequireDefault(__webpack_require__(/*! lodash */ \"../../node_modules/lodash/lodash.js\"));\nvar _elementUtil = __webpack_require__(/*! ./elementUtil */ \"./src/component/common/elementUtil.js\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; } /*\n * @Author: daosheng_chen\n * @Email: daosheng_chen@kingdee.com\n * @Date: 2022-04-11 10:19:14\n * @Last Modified by: daosheng_chen\n * @Last Modified time: 2022-05-12 15:23:47\n * @Description: 虚拟列表，支持一行显示单个或多个子项\n */\n/**\n *\n * @param {*} items 渲染列表数组\n * @param {*} itemRender 每个条目的渲染函数 (item,index)=>...\n * @param {*} options itemWidth, itemHeight, isMultiItem：是否一行显示多个item,enableVirtual:启用虚拟列表\n * refreshFlag 刷新标志，如果变化，虚拟列表需要刷新,有些状态不在items, itemRender范围控制，比如卡片选中状态\n * direction:vertical/horizontal\n * isMultiItem:一行包含多个列表子项，默认\n */\nvar DIRECTION_V = exports.DIRECTION_V = 'vertical'; // 垂直方向滚动\nvar CONTAINER_MIN_HEIGHT = 20; // 容器最小高度，小于这个值时认为容器高度坍塌了，需要重新计算容器高度\n\nfunction VirtualView(_ref) {\n  var items = _ref.items,\n    itemRender = _ref.itemRender,\n    flex = _ref.flex,\n    style = _ref.style,\n    _ref$options = _ref.options,\n    options = _ref$options === void 0 ? {} : _ref$options;\n  var _options$itemWidth = options.itemWidth,\n    itemWidth = _options$itemWidth === void 0 ? 100 : _options$itemWidth,\n    _options$itemHeight = options.itemHeight,\n    itemHeight = _options$itemHeight === void 0 ? 100 : _options$itemHeight,\n    _options$refreshFlag = options.refreshFlag,\n    refreshFlag = _options$refreshFlag === void 0 ? '' : _options$refreshFlag,\n    _options$isMultiItem = options.isMultiItem,\n    isMultiItem = _options$isMultiItem === void 0 ? true : _options$isMultiItem,\n    _options$enableVirtua = options.enableVirtual,\n    enableVirtual = _options$enableVirtua === void 0 ? true : _options$enableVirtua,\n    _options$direction = options.direction,\n    direction = _options$direction === void 0 ? DIRECTION_V : _options$direction,\n    headerRender = options.headerRender,\n    footerRender = options.footerRender,\n    _options$isFooterElem = options.isFooterElementMove,\n    isFooterElementMove = _options$isFooterElem === void 0 ? false : _options$isFooterElem,\n    onApi = options.onApi;\n  var _useReducer = (0, _react.useReducer)(function (x) {\n      return x + 1;\n    }, 0),\n    _useReducer2 = _slicedToArray(_useReducer, 2),\n    refresh = _useReducer2[0],\n    forceUpdate = _useReducer2[1]; // 强制刷新\n  var view$ = (0, _react.useRef)({\n    isHidden: true,\n    width: 0,\n    height: 0\n  }); // 虚拟列表页面大小、可见性\n  var locationPlaceholer$ = (0, _react.useRef)();\n  var viewContainer$ = (0, _react.useRef)(null); // 虚拟列表容器\n  var ele$ = (0, _react.useRef)(null);\n  var items$ = (0, _react.useRef)(items);\n  var itemsSizeCache = (0, _react.useRef)(new Array(items.size).fill({\n    itemWidth: itemWidth,\n    itemHeight: itemHeight,\n    hadCalc: false\n  }));\n  items$.current = items;\n  var this$ = (0, _react.useRef)({}); // 定义非ui实例变量\n  this$.current.direction = direction; // 水平还是垂直方向滚动\n  this$.current.isMultiItem = isMultiItem;\n  this$.current.headerElement = headerRender && headerRender();\n  this$.current.footerElement = footerRender && footerRender();\n  var _useState = (0, _react.useState)({\n      startIndex: -1,\n      endIndex: -1,\n      numOfLine: 1,\n      totalRows: -1\n    }),\n    _useState2 = _slicedToArray(_useState, 2),\n    position = _useState2[0],\n    setPosition = _useState2[1]; // ui渲染位置信息\n  this$.current.enableVirtual = enableVirtual;\n  (0, _react.useEffect)(function () {\n    var api = getVirtualViewApi(position);\n    onApi === null || onApi === void 0 || onApi(api);\n  }, [position]);\n  (0, _react.useEffect)(function () {\n    // 多行文本初始渲染时，高度样式还没计算好（kdesign多行文本样式存state里面，组件渲染出来之后还有一个setState的过程），导致高度撑不开\n    // 这里延后一个时机才去计算卡片大小\n    setTimeout(function () {\n      updateItemSizeCache();\n    }, 0);\n  });\n  (0, _react.useEffect)(function () {\n    // 数据改变时重置已计算的状态\n    itemsSizeCache.current.forEach(function (itemSize) {\n      itemSize.hadCalc = false;\n    });\n    if (items.size < itemsSizeCache.current.length) {\n      itemsSizeCache.current.length = items.size;\n    } else if (items.size > itemsSizeCache.current.length) {\n      var prevSize = itemsSizeCache.current.length;\n      itemsSizeCache.current.length = items.size;\n      itemsSizeCache.current.fill({\n        itemWidth: itemWidth,\n        itemHeight: itemHeight,\n        hadCalc: false\n      }, prevSize);\n    }\n  }, [items.hashCode()]);\n  (0, _react.useEffect)(function () {\n    var resizeObserver = (0, _resizeObserve[\"default\"])(ele$.current.parentNode, function (_ref2) {\n      var hide = _ref2.hide,\n        width = _ref2.width,\n        height = _ref2.height;\n      Object.assign(view$.current, {\n        isHidden: hide\n      });\n      var isViewSizeChange = view$.current.width !== width || view$.current.height !== height;\n      // 容器大小没有发生变化时不需要刷新\n      if (hide || !isViewSizeChange) return;\n      Object.assign(view$.current, {\n        width: width,\n        height: height\n      });\n\n      // 记录原始高度，如果原始高度有值，说明高度可以被撑开\n      if (view$.current.initEleHeight === undefined) {\n        view$.current.initEleHeight = height;\n        // 当parentNode的高度和当前节点是相等时，说明父层的高度是跟随子元素的，父层高度没有设置\n        this$.current.viewWithHeight = ele$.current.offsetHeight !== height && height >= CONTAINER_MIN_HEIGHT || direction !== DIRECTION_V;\n      }\n      forceUpdate();\n    });\n    return function () {\n      resizeObserver.removeResizeObserve();\n    };\n  }, []);\n  (0, _react.useEffect)(function () {\n    var intersectionObserver = new window.IntersectionObserver(function (entries) {\n      entries.forEach(function (entry) {\n        var isIntersecting = entry.isIntersecting,\n          intersectionRatio = entry.intersectionRatio;\n        this$.current.isIntersecting = isIntersecting;\n        if (isIntersecting) {\n          refreshPage();\n        }\n      });\n    });\n    intersectionObserver.observe(ele$.current);\n    return function () {\n      intersectionObserver.disconnect(ele$.current);\n    };\n  }, []);\n  (0, _react.useEffect)(function () {\n    if (enableVirtual) {\n      document.addEventListener('scroll', onScroll, true);\n    }\n    return function () {\n      return document.removeEventListener('scroll', onScroll, true);\n    };\n  }, [enableVirtual]);\n  (0, _react.useEffect)(function () {\n    if (enableVirtual) {\n      var _calcVisbileData = calcVisbileData(),\n        startIndex = _calcVisbileData.startIndex,\n        endIndex = _calcVisbileData.endIndex,\n        numOfLine = _calcVisbileData.numOfLine,\n        totalRows = _calcVisbileData.totalRows;\n      this$.current.position = {\n        startIndex: startIndex,\n        endIndex: endIndex,\n        numOfLine: numOfLine,\n        totalRows: totalRows\n      };\n      setPosition({\n        startIndex: startIndex,\n        endIndex: endIndex,\n        numOfLine: numOfLine,\n        totalRows: totalRows\n      });\n    }\n\n    // 非虚拟加载要重置position信息，避免transfrom计算错误\n    if (!enableVirtual) {\n      setPosition({\n        startIndex: -1,\n        endIndex: -1,\n        numOfLine: 1,\n        totalRows: -1\n      });\n    }\n  }, [items.size, enableVirtual]);\n  (0, _react.useEffect)(function () {\n    var time;\n    if (!view$.current.isHidden) {\n      time = setTimeout(function () {\n        refreshPage(); // 容器大小发生变化，重新计算并刷新视图\n      }, 0);\n    }\n    return function () {\n      return time && clearTimeout(time);\n    };\n  }, [view$.current.height, view$.current.width]);\n\n  // 注意这里依赖项的引用\n  var getVirtualViewApi = function getVirtualViewApi(position) {\n    var jumpToTargetItem = function jumpToTargetItem(itemIndex, pos) {\n      var _ele$$current;\n      var node = this$.current.viewWithHeight ? (_ele$$current = ele$.current) === null || _ele$$current === void 0 ? void 0 : _ele$$current.parentNode : (0, _elementUtil.findScrollableParentElement)(ele$.current);\n      if (node && itemIndex !== -1 && this$.current.direction === DIRECTION_V) {\n        // 暂不考虑横向的\n        var numOfLine = position.numOfLine;\n        ensureRowIndexVisible(node, itemIndex, {\n          numOfLine: numOfLine,\n          itemsSize: itemsSizeCache.current,\n          position: pos\n        });\n      }\n    };\n    var resetScrollBar = function resetScrollBar() {\n      var _ele$$current2;\n      var node = this$.current.viewWithHeight ? (_ele$$current2 = ele$.current) === null || _ele$$current2 === void 0 ? void 0 : _ele$$current2.parentNode : (0, _elementUtil.findScrollableParentElement)(ele$.current);\n      if (node) {\n        node.scrollTop = 0;\n        node.scrollLeft = 0;\n      }\n    };\n    return {\n      jumpToTargetItem: jumpToTargetItem,\n      resetScrollBar: resetScrollBar\n    };\n  };\n  var updateItemSizeCache = function updateItemSizeCache() {\n    if (!viewContainer$.current) return;\n    var childrenList = Array.from(viewContainer$.current.children);\n    childrenList.forEach(function (item) {\n      var rowIndex = Number(item.dataset.rowindex);\n      if (rowIndex >= 0 && rowIndex < itemsSizeCache.current.length) {\n        // 已经计算过的不再处理\n        if (itemsSizeCache.current[rowIndex].hadCalc) return;\n        var offsetHeight = item.offsetHeight;\n        var offsetWidth = item.offsetWidth;\n        if (!offsetHeight || !offsetWidth) return;\n        var _calcMarginSize = calcMarginSize(item),\n          marginHeight = _calcMarginSize.marginHeight,\n          marginWidth = _calcMarginSize.marginWidth;\n        var _itemHeight = offsetHeight + marginHeight;\n        var _itemWidth = offsetWidth + marginWidth;\n        itemsSizeCache.current[rowIndex] = {\n          itemHeight: _itemHeight,\n          itemWidth: _itemWidth,\n          hadCalc: true\n        };\n      }\n    });\n  };\n  var getScrollOffset = function getScrollOffset(target) {\n    var offset = 0;\n    if (this$.current.viewWithHeight) {\n      if (direction === DIRECTION_V) {\n        offset = ele$.current.parentNode.scrollTop;\n      } else {\n        offset = ele$.current.parentNode.scrollLeft;\n      }\n    } else {\n      var node = target || (0, _elementUtil.findScrollableParentElement)(ele$.current);\n      if (node) {\n        // getBoundingClientRect IE 下取不到x, y\n        var _node$getBoundingClie = node.getBoundingClientRect(),\n          scrollContainerY = _node$getBoundingClie.top;\n        var _ref3 = locationPlaceholer$.current && locationPlaceholer$.current.getBoundingClientRect() || {},\n          _ref3$top = _ref3.top,\n          viewContainerY = _ref3$top === void 0 ? 0 : _ref3$top;\n        offset = Math.max(scrollContainerY - viewContainerY, 0);\n      }\n    }\n    return offset || 0;\n  };\n  /**\n   * 计算可视区域的参数，用于渲染可视区域元素\n   * @param {*} offset  滚动偏移量\n   * @returns  {startIndex, endIndex, numOfLine, totalRows}\n   */\n  var calcVisbileData = function calcVisbileData(offset) {\n    if (offset === undefined) {\n      offset = getScrollOffset();\n    }\n    var _this$$current = this$.current,\n      direction = _this$$current.direction,\n      isMultiItem = _this$$current.isMultiItem;\n    var _getScrollSize = (0, _scrollUtil.getScrollSize)(),\n      scrollBarWidth = _getScrollSize.width;\n    var renderHeight = this$.current.viewWithHeight ? view$.current.height : document.body.clientHeight;\n    var listRect = {\n      height: renderHeight,\n      width: view$.current.width + scrollBarWidth\n    };\n    var listItemRect = {\n      height: itemsSizeCache.current[0].itemHeight,\n      width: itemsSizeCache.current[0].itemWidth\n    };\n    var _calcVirtualListParam = calcVirtualListParams(listRect, listItemRect, items$.current, {\n        direction: direction,\n        isMultiItem: isMultiItem\n      }),\n      numOfLine = _calcVirtualListParam.numOfLine;\n    var totalRows = Math.ceil(items$.current.size / numOfLine);\n    var startIndex = getStartIndex(offset, numOfLine);\n    var endOffset = offset + renderHeight;\n    var endIndex = getEndIndex(endOffset, numOfLine, startIndex);\n    // 上下加半屏的缓冲区\n    var buffer = Math.ceil((endIndex - startIndex) / 2);\n    var _startIndex = Math.max(startIndex - buffer, 0);\n    var _endIndex = Math.min(endIndex + buffer, totalRows - 1);\n    // startIndex 第几行开始渲染（一行可以有多个元素numOfLine）\n    return {\n      startIndex: _startIndex,\n      endIndex: _endIndex,\n      numOfLine: numOfLine,\n      totalRows: totalRows\n    };\n  };\n  var getStartIndex = function getStartIndex(offset, numOfLine) {\n    if (itemsSizeCache.current.length === 0) return 0;\n    var length = 0;\n    var startIndex = 0;\n    var totalRows = Math.ceil(items$.current.size / numOfLine);\n    while (startIndex < totalRows - 1 && length < offset) {\n      var lineMaxLength = getLineMaxLength({\n        lineIndex: startIndex,\n        numOfLine: numOfLine,\n        itemsSize: itemsSizeCache.current,\n        direction: direction\n      });\n      length += lineMaxLength;\n      startIndex += 1;\n    }\n    return startIndex;\n  };\n  var getEndIndex = function getEndIndex(endOffset, numOfLine, startIndex) {\n    var offset = calcItemsLength({\n      startIndex: 0,\n      endIndex: startIndex - 1,\n      numOfLine: numOfLine,\n      itemsSize: itemsSizeCache.current,\n      direction: direction\n    });\n    var endIndex = startIndex + 1;\n    var totalRows = Math.ceil(items$.current.size / numOfLine);\n    while (endIndex < totalRows && offset < endOffset) {\n      var lineMaxLength = getLineMaxLength({\n        lineIndex: endIndex,\n        numOfLine: numOfLine,\n        itemsSize: itemsSizeCache.current,\n        direction: direction\n      });\n      offset += lineMaxLength;\n      endIndex += 1;\n    }\n    return endIndex;\n  };\n  var refreshPage = function refreshPage(offset) {\n    if (!view$.current.isHidden && this$.current.enableVirtual) {\n      var _calcVisbileData2 = calcVisbileData(offset),\n        startIndex = _calcVisbileData2.startIndex,\n        endIndex = _calcVisbileData2.endIndex,\n        numOfLine = _calcVisbileData2.numOfLine,\n        totalRows = _calcVisbileData2.totalRows;\n      this$.current.position = {\n        startIndex: startIndex,\n        endIndex: endIndex,\n        numOfLine: numOfLine,\n        totalRows: totalRows\n      };\n      setPosition({\n        startIndex: startIndex,\n        endIndex: endIndex,\n        numOfLine: numOfLine,\n        totalRows: totalRows\n      });\n    }\n  };\n  var _handleScroll = (0, _react.useCallback)(function (target) {\n    var offset = getScrollOffset(target);\n    refreshPage(offset);\n  }, []);\n  var handleScroll = (0, _react.useCallback)(_lodash[\"default\"].throttle(_handleScroll, 200), []);\n  var onScroll = function onScroll(event) {\n    var node = this$.current.viewWithHeight ? ele$.current.parentNode : (0, _elementUtil.findScrollableParentElement)(ele$.current);\n    if (node !== event.target) return;\n    if (this$.current.viewWithHeight || this$.current.isIntersecting) {\n      handleScroll(event.target);\n    }\n  };\n  var elements = (0, _react.useMemo)(function () {\n    var currentElement = [];\n    if (enableVirtual) {\n      var startIndex = position.startIndex,\n        endIndex = position.endIndex,\n        numOfLine = position.numOfLine;\n      if (startIndex === 0) {\n        // 加载可视区域元素\n        if (this$.current.headerElement) {\n          currentElement.push(this$.current.headerElement);\n        }\n      }\n      if (isFooterElementMove && startIndex <= 1 && this$.current.footerElement) {\n        currentElement.push(this$.current.footerElement);\n      }\n      if (startIndex !== -1 && endIndex !== -1) {\n        var _items = items.slice(startIndex * numOfLine, (endIndex + 1) * numOfLine).map(function (item, index) {\n          var baseOffset = startIndex * numOfLine;\n          return itemRender(item, baseOffset + index);\n        });\n        currentElement.push.apply(currentElement, _toConsumableArray(_items));\n      }\n      if (!isFooterElementMove && (endIndex + 1) * numOfLine >= items.size) {\n        if (this$.current.footerElement) {\n          currentElement.push(this$.current.footerElement);\n        }\n      }\n    } else {\n      // 不开启虚拟列表，全部加载\n      if (this$.current.headerElement) {\n        currentElement.push(this$.current.headerElement);\n      }\n      if (isFooterElementMove && this$.current.footerElement) {\n        currentElement.push(this$.current.footerElement);\n      }\n      currentElement.push.apply(currentElement, _toConsumableArray(renderItems(items, items.size, itemRender)));\n      if (!isFooterElementMove && this$.current.footerElement) {\n        currentElement.push(this$.current.footerElement);\n      }\n    }\n    return currentElement;\n  }, [refresh, items.hashCode(), refreshFlag, enableVirtual, position]);\n  var _ref4 = flex || {},\n    AlignItems = _ref4.AlignItems,\n    AlignContent = _ref4.AlignContent,\n    Direction = _ref4.Direction,\n    Wrap = _ref4.Wrap,\n    JustifyContent = _ref4.JustifyContent;\n  var className = (0, _commonUtils[\"default\"])({\n    AlignItems: AlignItems,\n    Direction: Direction,\n    // Overflow,\n    JustifyContent: JustifyContent,\n    Wrap: direction !== DIRECTION_V ? 'nowrap' : Wrap,\n    // 水平方向滚动，不能换行\n    AlignContent: AlignContent\n  });\n  var topStyle = {\n    display: 'flex',\n    flexGrow: 1,\n    flexShrink: 1,\n    maxWidth: '100%',\n    flexDirection: direction === DIRECTION_V ? 'column' : ''\n  };\n  var move = calcItemsLength({\n    startIndex: 0,\n    endIndex: position.startIndex - 1,\n    numOfLine: position.numOfLine,\n    direction: direction,\n    itemsSize: itemsSizeCache.current\n  });\n  var transform = direction === DIRECTION_V ? \"translateY(\".concat(move, \"px)\") : \"translateX(\".concat(move, \"px)\");\n  var viewContainerStyle = {\n    display: 'flex',\n    alignContent: 'flex-start',\n    flexGrow: 1,\n    transform: transform\n  };\n  // TODO: 固定行的大小没有添加进来\n  var totalLength = calcItemsLength({\n    startIndex: 0,\n    endIndex: items$.current.size - 1,\n    numOfLine: position.numOfLine,\n    direction: direction,\n    itemsSize: itemsSizeCache.current\n  });\n  var locationPlaceholerStyle = {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    height: totalLength,\n    width: 1,\n    zIndex: -1\n  };\n  var placeholderLength = totalLength - calcItemsLength({\n    startIndex: position.startIndex,\n    endIndex: position.endIndex,\n    numOfLine: position.numOfLine,\n    direction: direction,\n    itemsSize: itemsSizeCache.current\n  });\n  return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    style: topStyle,\n    ref: ele$\n  }, enableVirtual && /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    style: locationPlaceholerStyle\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    style: locationPlaceholerStyle,\n    ref: locationPlaceholer$\n  })), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    id: \"view-container\",\n    ref: viewContainer$,\n    style: viewContainerStyle,\n    className: className\n  }, elements), enableVirtual && /*#__PURE__*/_react[\"default\"].createElement(Placeholder, {\n    totalLength: placeholderLength,\n    direction: direction\n  }));\n}\n\n// 占位控件，撑开容器，形成滚动栏\nvar Placeholder = /*#__PURE__*/_react[\"default\"].forwardRef(function (_ref5, ref) {\n  var _ref5$totalLength = _ref5.totalLength,\n    totalLength = _ref5$totalLength === void 0 ? 0 : _ref5$totalLength,\n    _ref5$direction = _ref5.direction,\n    direction = _ref5$direction === void 0 ? DIRECTION_V : _ref5$direction;\n  var style = {\n    width: 1,\n    height: totalLength || 0,\n    zIndex: -1\n  };\n  if (direction !== DIRECTION_V) {\n    style.height = 1;\n    style.width = totalLength;\n  }\n  return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    ref: ref,\n    id: \"placeholder\",\n    style: style\n  });\n});\n\n/**\n * 渲染子项元素\n * @param {*} items  子项数组\n * @param {*} number  渲染子项数量\n * @param {*} render  渲染函数\n * @returns\n */\nfunction renderItems(items, number) {\n  var render = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function (item, index) {\n    return /*#__PURE__*/_react[\"default\"].createElement(\"div\", null, index);\n  };\n  return items.take(number).map(function (item, index) {\n    return render(item, index);\n  });\n}\n/**\n * 计算可见视图范围参数\n * @param {*} listRect  可是区域高宽\n * @param {*} listItemRect  每个子项高宽\n * @param {*} items  所有子项数组\n * @param {*} options  可选配置项\n * @returns\n */\nfunction calcVirtualListParams(listRect, listItemRect, items) {\n  var _ref6 = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {},\n    _ref6$direction = _ref6.direction,\n    direction = _ref6$direction === void 0 ? DIRECTION_V : _ref6$direction,\n    _ref6$isMultiItem = _ref6.isMultiItem,\n    isMultiItem = _ref6$isMultiItem === void 0 ? true : _ref6$isMultiItem;\n  // 水平滚动 ||isMultiItem == false  numOfLine=1\n  var numOfLine = listItemRect.width && isMultiItem && direction === DIRECTION_V ? Math.floor(listRect.width / listItemRect.width) : 1;\n  // const visibleRows = Math.ceil((direction === DIRECTION_V ? listRect.height : listRect.width) / (direction === DIRECTION_V ? listItemRect.height : listItemRect.width))\n  return {\n    numOfLine: numOfLine || 1 // 每行渲染几个item\n    // visibleRows: visibleRows // 可见区域渲染行数，一行可以渲染多个子项,多渲染一行防止空白\n  };\n}\n\n/**\n * 计算子项的margin大小\n * @param {*} ele  子项元素\n * @returns\n */\nfunction calcMarginSize(ele) {\n  if (!ele) return {\n    marginHeight: 0,\n    marginWidth: 0\n  };\n  var eleComputedStyle = window.getComputedStyle(ele);\n  var itemMarginTop = parseInt(eleComputedStyle['margin-top']);\n  var itemMarginBottom = parseInt(eleComputedStyle['margin-bottom']);\n  var itemMarginLeft = parseInt(eleComputedStyle['margin-left']);\n  var itemMarginRight = parseInt(eleComputedStyle['margin-right']);\n  return {\n    marginHeight: itemMarginTop + itemMarginBottom,\n    marginWidth: itemMarginLeft + itemMarginRight\n  };\n}\nfunction getLineMaxLength(_ref7) {\n  var lineIndex = _ref7.lineIndex,\n    numOfLine = _ref7.numOfLine,\n    itemsSize = _ref7.itemsSize,\n    direction = _ref7.direction;\n  var baseItemIndex = lineIndex * numOfLine;\n  var lineMaxLength = itemsSize.slice(baseItemIndex, baseItemIndex + numOfLine).reduce(function (maxLength, item) {\n    var itemLength = direction === DIRECTION_V ? item.itemHeight : item.itemWidth;\n    if (itemLength > maxLength) {\n      maxLength = itemLength;\n    }\n    return maxLength;\n  }, 0);\n  return lineMaxLength;\n}\nfunction calcItemsLength(_ref8) {\n  var startIndex = _ref8.startIndex,\n    endIndex = _ref8.endIndex,\n    numOfLine = _ref8.numOfLine,\n    itemsSize = _ref8.itemsSize,\n    direction = _ref8.direction;\n  var length = 0;\n  for (var i = startIndex; i <= endIndex; i++) {\n    var lineMaxLength = getLineMaxLength({\n      lineIndex: i,\n      numOfLine: numOfLine,\n      itemsSize: itemsSize,\n      direction: direction\n    });\n    length += lineMaxLength;\n  }\n  return length;\n}\n\n/**\n * 将目标行滚动到可视区域内\n * @param {*} container 滚动容器\n * @param {*} rowIndex 目标行\n * @param {*} param2  position: 将目标行滚动到的位置，默认auto是根据目标行相对视口的位置滚动到底部或顶部，可取值为'top' | 'middle' | 'bottom' | 'auto'\n * @returns\n */\nfunction ensureRowIndexVisible(container, rowIndex, _ref9) {\n  var itemsSize = _ref9.itemsSize,\n    numOfLine = _ref9.numOfLine,\n    _ref9$position = _ref9.position,\n    position = _ref9$position === void 0 ? 'auto' : _ref9$position;\n  if (!container || typeof rowIndex !== 'number' || rowIndex < 0 || rowIndex >= itemsSize.length) {\n    return;\n  }\n  var rowTopPixel = 0;\n  // 一行可能有多个卡片，这里计算的是每行的高度\n  var lineIndex = Math.ceil(rowIndex / numOfLine);\n  for (var i = 0; i < lineIndex; i++) {\n    rowTopPixel += getLineMaxLength({\n      lineIndex: i,\n      numOfLine: numOfLine,\n      itemsSize: itemsSize,\n      direction: DIRECTION_V\n    });\n  }\n  var rowBottomPixel = rowTopPixel + getLineMaxLength({\n    lineIndex: lineIndex,\n    numOfLine: numOfLine,\n    itemsSize: itemsSize,\n    direction: DIRECTION_V\n  });\n  var viewportHeight = container.clientHeight;\n  var vScrollTop = container.scrollTop;\n  var vScrollBottom = vScrollTop + viewportHeight;\n  var pxTop = rowTopPixel; // 跳转到视口顶部的偏移量\n  var pxBottom = rowBottomPixel - viewportHeight; // 跳转到视口底部的偏移量\n  var pxMiddle = Math.min((pxTop + pxBottom) / 2, rowTopPixel);\n  var rowBelowViewport = vScrollTop > rowTopPixel;\n  var rowAboveViewport = vScrollBottom < rowBottomPixel;\n  var newScrollPosition = null;\n  if (position === 'top') {\n    newScrollPosition = pxTop;\n  } else if (position === 'bottom') {\n    newScrollPosition = pxBottom;\n  } else if (position === 'middle') {\n    newScrollPosition = pxMiddle;\n  } else if (rowBelowViewport) {\n    // 目标行在视口之上，则向上滚动到顶部\n    newScrollPosition = pxTop;\n  } else if (rowAboveViewport) {\n    // 目标行在视口之下，则向下滚动到底部\n    newScrollPosition = pxBottom;\n  }\n  if (newScrollPosition !== null) {\n    container.scrollTop = newScrollPosition;\n  }\n}\n\n//# sourceURL=webpack://bos-platform/./src/component/common/VirtualView.js?");

/***/ }),

/***/ "./src/component/common/waitChildEleLoad.js":
/*!**************************************************!*\
  !*** ./src/component/common/waitChildEleLoad.js ***!
  \**************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = waitChildEleLoadPromise;\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.promise.js */ \"../../node_modules/core-js/modules/es.promise.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\n__webpack_require__(/*! core-js/modules/web.timers.js */ \"../../node_modules/core-js/modules/web.timers.js\");\n/*\n * @Author: daosheng_chen\n * @Email: daosheng_chen@kingdee.com\n * @Date: 2022-07-29 14:46:25\n * @Last Modified by: daosheng_chen\n * @Last Modified time: 2022-07-29 15:37:53\n * @Description: 在规定的时间内等待子元素加载完成\n */\n\n/**\n *\n * @param {*} ele  被观察的父元素\n * @param {*} timeout 超时时间\n * @returns\n */\nfunction waitChildEleLoadPromise(ele) {\n  var timeout = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 300;\n  var observer, timeoutHandler;\n  var observePromise = new Promise(function (resolve) {\n    observer = new window.MutationObserver(function (mutations) {\n      observer.disconnect();\n      observer = null;\n      clearTimeout(timeoutHandler);\n      resolve(mutations);\n    });\n    var options = {\n      childList: true,\n      subtree: true\n    };\n    observer.observe(ele, options);\n  });\n  var timeoutPromise = new Promise(function (resolve) {\n    timeoutHandler = setTimeout(function () {\n      observer && observer.disconnect();\n      resolve('timeout');\n    }, timeout);\n  });\n  return Promise.race([observePromise, timeoutPromise]);\n}\n\n//# sourceURL=webpack://bos-platform/./src/component/common/waitChildEleLoad.js?");

/***/ }),

/***/ "./src/component/web/FieldLabel/FieldLabel.jsx":
/*!*****************************************************!*\
  !*** ./src/component/web/FieldLabel/FieldLabel.jsx ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.index-of.js */ \"../../node_modules/core-js/modules/es.array.index-of.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.assign.js */ \"../../node_modules/core-js/modules/es.object.assign.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-properties.js */ \"../../node_modules/core-js/modules/es.object.define-properties.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptors.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptors.js\");\n__webpack_require__(/*! core-js/modules/es.object.keys.js */ \"../../node_modules/core-js/modules/es.object.keys.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.translateToHtml = exports.getValue = exports.getTimeRange = exports.getPrecision = exports.getNumber = exports.getLocaleText = exports.getDateTime = exports.getDateRange = exports.getCombo = exports.getCascader = exports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.array.concat.js */ \"../../node_modules/core-js/modules/es.array.concat.js\");\n__webpack_require__(/*! core-js/modules/es.array.filter.js */ \"../../node_modules/core-js/modules/es.array.filter.js\");\n__webpack_require__(/*! core-js/modules/es.array.for-each.js */ \"../../node_modules/core-js/modules/es.array.for-each.js\");\n__webpack_require__(/*! core-js/modules/es.array.includes.js */ \"../../node_modules/core-js/modules/es.array.includes.js\");\n__webpack_require__(/*! core-js/modules/es.array.is-array.js */ \"../../node_modules/core-js/modules/es.array.is-array.js\");\n__webpack_require__(/*! core-js/modules/es.array.join.js */ \"../../node_modules/core-js/modules/es.array.join.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.regexp.exec.js */ \"../../node_modules/core-js/modules/es.regexp.exec.js\");\n__webpack_require__(/*! core-js/modules/es.string.includes.js */ \"../../node_modules/core-js/modules/es.string.includes.js\");\n__webpack_require__(/*! core-js/modules/es.string.replace.js */ \"../../node_modules/core-js/modules/es.string.replace.js\");\n__webpack_require__(/*! core-js/modules/es.string.trim.js */ \"../../node_modules/core-js/modules/es.string.trim.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ \"../../node_modules/core-js/modules/web.dom-collections.for-each.js\");\nvar _react = _interopRequireDefault(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _immutable = __webpack_require__(/*! immutable */ \"webpack/sharing/consume/default/immutable/immutable?f2ca\");\nvar _classnames2 = _interopRequireDefault(__webpack_require__(/*! classnames */ \"../../node_modules/classnames/index.js\"));\nvar _moment = _interopRequireDefault(__webpack_require__(/*! moment */ \"../../node_modules/moment/moment.js\"));\nvar _global = __webpack_require__(/*! @/global */ \"./src/global/index.js\");\nvar _serverproperties = __webpack_require__(/*! @/constant/serverproperties */ \"./src/constant/serverproperties.js\");\nvar _fieldType = _interopRequireDefault(__webpack_require__(/*! @/constant/fieldType */ \"./src/constant/fieldType.js\"));\nvar _xssFilters = _interopRequireDefault(__webpack_require__(/*! @/util/xssFilters */ \"./src/util/xssFilters.js\"));\nvar _appModelFunction = __webpack_require__(/*! @/model/appModelFunction */ \"./src/model/appModelFunction.js\");\nvar _baseDataUtil = __webpack_require__(/*! @/util/baseDataUtil */ \"./src/util/baseDataUtil.js\");\nvar _formatUtil = __webpack_require__(/*! @/util/formatUtil */ \"./src/util/formatUtil.js\");\nvar _componentutil = __webpack_require__(/*! @/util/componentutil */ \"./src/util/componentutil.js\");\nvar _TextEllipsisWrap = _interopRequireDefault(__webpack_require__(/*! @/component/common/TextEllipsisWrap */ \"./src/component/common/TextEllipsisWrap.js\"));\nvar _KDField = _interopRequireDefault(__webpack_require__(/*! @/component/web/KDField.less */ \"./src/component/web/KDField.less\"));\nvar _excluded = [\"className\", \"fileServer\", \"model\", \"style\", \"value\", \"isLink\", \"onValueClick\"];\n/**\n * 字段标签风格组件\n */\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nvar ALLOW_WRAP_FIELD = [_fieldType[\"default\"].Text, _fieldType[\"default\"].User, _fieldType[\"default\"].Basedata, _fieldType[\"default\"].MulBasedata, _fieldType[\"default\"].Organization];\nvar translateToHtml = exports.translateToHtml = function translateToHtml(value) {\n  var result = (0, _xssFilters[\"default\"])(value || '').replace(/(\\r\\n)|(\\n)|(\\r)/g, '<br />').replace(/(\\t)/g, '<span style=\"padding-left: 2em\"></span>');\n  return result;\n};\nvar getDateTime = exports.getDateTime = function getDateTime(_ref) {\n  var fieldType = _ref.fieldType,\n    model = _ref.model,\n    option = _ref.option,\n    value = _ref.value;\n  var format = option.get(_serverproperties.DISPLAY_FORMAT) || option.get(_serverproperties.MASK);\n  var locale = (0, _componentutil.getRootLocale)() || model.getUserLocale();\n  var date = (0, _moment[\"default\"])(value).locale(locale);\n  if (!date.isValid()) {\n    return '';\n  }\n  var formatType = !format && option.get(_serverproperties.REGION_TYPE) === 1 ? 'date' : fieldType;\n  return (0, _formatUtil.formatDate)(date, format, formatType) || value;\n};\nvar getDateRange = exports.getDateRange = function getDateRange(_ref2) {\n  var fieldType = _ref2.fieldType,\n    model = _ref2.model,\n    option = _ref2.option,\n    value = _ref2.value;\n  var dates = value.split(',');\n  if (dates.length !== 2) return '';\n  var format = option.get(_serverproperties.DISPLAY_FORMAT) || option.get(_serverproperties.MASK);\n  var locale = (0, _componentutil.getRootLocale)() || model.getUserLocale();\n  var startDate = (0, _moment[\"default\"])(dates[0].trim()).locale(locale);\n  var endDate = (0, _moment[\"default\"])(dates[1].trim()).locale(locale);\n  var startDateStr = startDate.isValid() ? (0, _formatUtil.formatDate)(startDate, format, fieldType) : '';\n  var endDateStr = endDate.isValid() ? (0, _formatUtil.formatDate)(endDate, format, fieldType) : '';\n  return startDateStr.length === 0 && endDateStr.length === 0 ? '' : \"\".concat(startDateStr, \"~\").concat(endDateStr);\n};\nvar getTimeRange = exports.getTimeRange = function getTimeRange(_ref3) {\n  var value = _ref3.value;\n  // 后端确定 -1, -1 代表 null\n  if (value === '-1, -1') {\n    return '';\n  }\n};\nvar getPrecision = exports.getPrecision = function getPrecision(decimalLength, numType, sourceFieldInfo) {\n  var result = decimalLength;\n  if (numType === 'amount') result = sourceFieldInfo.ap;else if (numType === 'price') result = sourceFieldInfo.pp;else if (numType === 'qty') result = sourceFieldInfo.ps;\n  var mainCurrencyFormat = (0, _componentutil.getMainCurrencyFormatConfig)();\n  if (mainCurrencyFormat) {\n    if (numType === 'price' && sourceFieldInfo.pp === undefined) {\n      var _mainCurrencyFormat$p;\n      result = (_mainCurrencyFormat$p = mainCurrencyFormat.pp) !== null && _mainCurrencyFormat$p !== void 0 ? _mainCurrencyFormat$p : result;\n    } else if (numType === 'amount' && sourceFieldInfo.ap === undefined) {\n      var _mainCurrencyFormat$a;\n      result = (_mainCurrencyFormat$a = mainCurrencyFormat.ap) !== null && _mainCurrencyFormat$a !== void 0 ? _mainCurrencyFormat$a : result;\n    }\n  }\n  return result;\n};\nvar getNumber = exports.getNumber = function getNumber(_ref4) {\n  var option = _ref4.option,\n    model = _ref4.model,\n    value = _ref4.value;\n  var format = option.get(_serverproperties.DISPLAY_FORMAT) || option.get(_serverproperties.MASK);\n  var decimalLength = option.get(_serverproperties.SCALE);\n  var zeroShow = option.get(_serverproperties.ZERO_SHOW);\n  var noDisplayDecimalTailZero = option.get(_serverproperties.NO_DISPLAY_SCALE_ZERO);\n  var sourceFieldInfo = (0, _appModelFunction.getSourceFiledInfoById)(model.pageId, option.get(_serverproperties.SOURCE_FIELD))((0, _global.getGlobalState)()) || {};\n  var numType = option.get(_serverproperties.NUM_TYPE);\n  var symbol = sourceFieldInfo.cs; // 货币符号\n  var code = sourceFieldInfo.cn;\n  var precision = getPrecision(decimalLength, numType, sourceFieldInfo);\n  var roundMethod = option.get(_serverproperties.ROUND_METHOD, '0');\n  var formatOption = {\n    mask: format,\n    zeroShow: zeroShow,\n    decimalLength: precision === 0 ? 0 : precision || decimalLength,\n    noDisplayDecimalTailZero: noDisplayDecimalTailZero,\n    type: numType,\n    symbol: symbol,\n    code: code,\n    roundMethod: roundMethod\n  };\n  return (0, _formatUtil.formatNumber)(value, formatOption);\n};\nvar getCombo = exports.getCombo = function getCombo(_ref5) {\n  var _option$get;\n  var fieldType = _ref5.fieldType,\n    fileServer = _ref5.fileServer,\n    model = _ref5.model,\n    option = _ref5.option,\n    value = _ref5.value;\n  var items = (0, _componentutil.getComponentDataProperty)(model, _serverproperties.STORE, [_serverproperties.ITEM, _serverproperties.STORE]) || [];\n  var showStyle = (_option$get = option.get('showStyle')) !== null && _option$get !== void 0 ? _option$get : 0;\n  var selectedItems;\n  if (fieldType === _fieldType[\"default\"].MulCombo) {\n    value = value.split(',');\n    selectedItems = items.filter(function (item) {\n      var val = item.get(0);\n      return value.includes(val);\n    });\n  } else {\n    selectedItems = items.filter(function (item) {\n      var val = item.get(0);\n      return value === val;\n    });\n  }\n  value = showStyle === 0 ? '' : [];\n  selectedItems.forEach(function (selectedItem) {\n    var text = selectedItem.getIn([1, model.getUserLocale()]);\n    var imgkey = selectedItem.getIn([2]);\n    if (imgkey) {\n      imgkey = (0, _componentutil.getImgFullPath)(fileServer, imgkey);\n    }\n    if (showStyle === 0) {\n      // 文字\n      value += value === '' ? text : \"\\uFF0C\".concat(text);\n    } else if (showStyle === 1) {\n      // 图片\n      value.push( /*#__PURE__*/_react[\"default\"].createElement(\"img\", {\n        style: {\n          width: '100%',\n          display: 'block'\n        },\n        src: imgkey\n      }));\n    } else if (showStyle === 2) {\n      // 文字 + 图片\n      value.push( /*#__PURE__*/_react[\"default\"].createElement(\"span\", null, /*#__PURE__*/_react[\"default\"].createElement(\"img\", {\n        style: {\n          width: '25px',\n          height: '25px'\n        },\n        src: imgkey\n      }), /*#__PURE__*/_react[\"default\"].createElement(\"span\", null, text)));\n    }\n  });\n  return value;\n};\nvar getLocaleText = exports.getLocaleText = function getLocaleText(_ref6) {\n  var model = _ref6.model,\n    value = _ref6.value;\n  return /*#__PURE__*/_react[\"default\"].createElement(\"span\", null, value.get(model.getUserLocale()));\n};\nvar getCascader = exports.getCascader = function getCascader(_ref7) {\n  var model = _ref7.model,\n    value = _ref7.value;\n  var items = (0, _componentutil.getComponentDataProperty)(model, _serverproperties.STORE, [_serverproperties.ITEM, _serverproperties.STORE]) || [];\n  var values = value.split(',');\n  var result = [];\n  var selOption;\n  values.forEach(function (itemValue) {\n    var children = selOption ? selOption.getIn([0, 'children']) : items;\n    if (!children || children.size === 0) return;\n    selOption = children.filter(function (option) {\n      return option.get('value') === itemValue;\n    });\n    var label = selOption.getIn([0, 'caption']);\n    var text = (0, _componentutil.getLangResult)(model, label);\n    result.push(text === null ? itemValue : text);\n  });\n  return result.length === 0 ? value : result.join('/');\n};\nvar getValue = exports.getValue = function getValue(fieldType, value, model, option, fileServer) {\n  var valueGetter = {\n    date: getDateTime,\n    datetime: getDateTime,\n    daterange: getDateRange,\n    timerange: getTimeRange,\n    number: getNumber,\n    combo: getCombo,\n    mulcombo: getCombo,\n    localeText: getLocaleText,\n    cascader: getCascader\n  };\n  if (valueGetter[fieldType]) {\n    return valueGetter[fieldType]({\n      fieldType: fieldType,\n      value: value,\n      model: model,\n      option: option,\n      fileServer: fileServer\n    }) || '';\n  }\n  return value;\n};\nvar FieldLabel = function FieldLabel(_ref8) {\n  var className = _ref8.className,\n    fileServer = _ref8.fileServer,\n    model = _ref8.model,\n    style = _ref8.style,\n    value = _ref8.value,\n    isLink = _ref8.isLink,\n    onValueClick = _ref8.onValueClick,\n    other = _objectWithoutProperties(_ref8, _excluded);\n  var option = model.getMetaProperty(_serverproperties.ITEM) || (0, _immutable.Map)();\n  var fieldType = option.get(_serverproperties.FIELD_TYPE);\n  var autoTextWrap = option.get(_serverproperties.AUTO_WRAP) || false;\n  var clz = ALLOW_WRAP_FIELD.includes(fieldType) && autoTextWrap ? (0, _classnames2[\"default\"])('kd-cq-field kd-cq-label', _KDField[\"default\"]['text-wrap'], className) : (0, _classnames2[\"default\"])('kd-cq-field kd-cq-label', _KDField[\"default\"]['text-omit'], className);\n  var textAlign = option.get(_serverproperties.TEXT_ALIGN);\n  if (textAlign) {\n    style = _objectSpread(_objectSpread({}, style), {}, {\n      textAlign: textAlign\n    });\n  }\n  if ([_fieldType[\"default\"].Textarea, _fieldType[\"default\"].LargeText].includes(fieldType)) {\n    var _title = value || '';\n    var htmlValue = translateToHtml(value);\n    clz = style.width ? (0, _classnames2[\"default\"])('kd-cq-field kd-cq-label', _KDField[\"default\"]['text-wrap'], className) : (0, _classnames2[\"default\"])('kd-cq-field kd-cq-label', _KDField[\"default\"]['text-omit'], className);\n    return /*#__PURE__*/_react[\"default\"].createElement(_TextEllipsisWrap[\"default\"], null, /*#__PURE__*/_react[\"default\"].createElement(\"div\", _extends({\n      className: clz,\n      dangerouslySetInnerHTML: {\n        __html: htmlValue\n      },\n      style: style,\n      title: _title\n    }, other)));\n  }\n  var displayType = option.get(_serverproperties.DISPLAY_PROP);\n  if (displayType && _immutable.List.isList(value)) {\n    var isMulBaseData = fieldType === _fieldType[\"default\"].MulBasedata;\n    var connector = option.get(_serverproperties.CONNECTOR);\n    value = (0, _baseDataUtil.getBaseDataDisplayProp)(value, displayType, isMulBaseData, connector);\n  }\n  var displayValue = getValue(fieldType, value, model, option, fileServer);\n  var title = Array.isArray(displayValue) ? '' : displayValue;\n  if (fieldType === _fieldType[\"default\"].LocaleText) {\n    title = value.get(model.getUserLocale());\n  }\n  var handleClick = function handleClick(e) {\n    if (!displayValue) return;\n    onValueClick === null || onValueClick === void 0 || onValueClick(e);\n  };\n  clz = (0, _classnames2[\"default\"])(clz, _defineProperty({}, _KDField[\"default\"]['link-content'], isLink && displayValue));\n  return /*#__PURE__*/_react[\"default\"].createElement(\"div\", _extends({\n    className: clz,\n    style: style,\n    title: title,\n    onClick: handleClick\n  }, other), fieldType === _fieldType[\"default\"].Combo && displayValue, fieldType !== _fieldType[\"default\"].Combo && /*#__PURE__*/_react[\"default\"].createElement(\"span\", null, displayValue || ''));\n};\nvar _default = exports[\"default\"] = FieldLabel;\n\n//# sourceURL=webpack://bos-platform/./src/component/web/FieldLabel/FieldLabel.jsx?");

/***/ }),

/***/ "./src/component/web/KDAdvCon.js":
/*!***************************************!*\
  !*** ./src/component/web/KDAdvCon.js ***!
  \***************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.from.js */ \"../../node_modules/core-js/modules/es.array.from.js\");\n__webpack_require__(/*! core-js/modules/es.array.is-array.js */ \"../../node_modules/core-js/modules/es.array.is-array.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.array.slice.js */ \"../../node_modules/core-js/modules/es.array.slice.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-string.js */ \"../../node_modules/core-js/modules/es.date.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.function.name.js */ \"../../node_modules/core-js/modules/es.function.name.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.assign.js */ \"../../node_modules/core-js/modules/es.object.assign.js\");\n__webpack_require__(/*! core-js/modules/es.object.create.js */ \"../../node_modules/core-js/modules/es.object.create.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-properties.js */ \"../../node_modules/core-js/modules/es.object.define-properties.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptors.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptors.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.get-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.keys.js */ \"../../node_modules/core-js/modules/es.object.keys.js\");\n__webpack_require__(/*! core-js/modules/es.object.set-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.set-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.reflect.construct.js */ \"../../node_modules/core-js/modules/es.reflect.construct.js\");\n__webpack_require__(/*! core-js/modules/es.regexp.exec.js */ \"../../node_modules/core-js/modules/es.regexp.exec.js\");\n__webpack_require__(/*! core-js/modules/es.regexp.to-string.js */ \"../../node_modules/core-js/modules/es.regexp.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.array.concat.js */ \"../../node_modules/core-js/modules/es.array.concat.js\");\n__webpack_require__(/*! core-js/modules/es.array.filter.js */ \"../../node_modules/core-js/modules/es.array.filter.js\");\n__webpack_require__(/*! core-js/modules/es.array.for-each.js */ \"../../node_modules/core-js/modules/es.array.for-each.js\");\n__webpack_require__(/*! core-js/modules/es.array.map.js */ \"../../node_modules/core-js/modules/es.array.map.js\");\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ \"../../node_modules/core-js/modules/web.dom-collections.for-each.js\");\n__webpack_require__(/*! core-js/modules/web.timers.js */ \"../../node_modules/core-js/modules/web.timers.js\");\nvar _react = _interopRequireDefault(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _reactDom = _interopRequireDefault(__webpack_require__(/*! react-dom */ \"webpack/sharing/consume/default/react-dom/react-dom?418d\"));\nvar _immutable = __webpack_require__(/*! immutable */ \"webpack/sharing/consume/default/immutable/immutable?f2ca\");\nvar _classnames13 = _interopRequireDefault(__webpack_require__(/*! classnames */ \"../../node_modules/classnames/index.js\"));\nvar _global = _interopRequireWildcard(__webpack_require__(/*! @/global */ \"./src/global/index.js\"));\nvar _componentutil = __webpack_require__(/*! ../../util/componentutil */ \"./src/util/componentutil.js\");\nvar _commonUtils = _interopRequireDefault(__webpack_require__(/*! ../common/commonUtils */ \"./src/component/common/commonUtils.js\"));\nvar _VisibleLockWrap = _interopRequireWildcard(__webpack_require__(/*! ../common/VisibleLockWrap */ \"./src/component/common/VisibleLockWrap.js\"));\nvar _memoryCacher = __webpack_require__(/*! ../../model/memoryCacher */ \"./src/model/memoryCacher.js\");\nvar _PageLoadDataComplete = __webpack_require__(/*! @/component/common/PageLoadDataComplete */ \"./src/component/common/PageLoadDataComplete.js\");\nvar _IntersectionComponent = _interopRequireDefault(__webpack_require__(/*! @/component/common/IntersectionComponent */ \"./src/component/common/IntersectionComponent.js\"));\nvar _memoryCacher2 = __webpack_require__(/*! @/model/memoryCacher */ \"./src/model/memoryCacher.js\");\nvar _intlApi = __webpack_require__(/*! @/i18n/intlApi */ \"./src/i18n/intlApi.js\");\nvar _LazyLoadContainer = _interopRequireDefault(__webpack_require__(/*! @/component/common/LazyLoadContainer */ \"./src/component/common/LazyLoadContainer.js\"));\nvar _defaultPropsUtil = __webpack_require__(/*! @/util/defaultPropsUtil */ \"./src/util/defaultPropsUtil.js\");\nvar _customProperties = _interopRequireDefault(__webpack_require__(/*! @/constant/customProperties */ \"./src/constant/customProperties.js\"));\nvar _customCtrlName = _interopRequireDefault(__webpack_require__(/*! @/constant/customCtrlName */ \"./src/constant/customCtrlName.js\"));\nvar _TextEllipsisWrap = _interopRequireDefault(__webpack_require__(/*! @/component/common/TextEllipsisWrap */ \"./src/component/common/TextEllipsisWrap.js\"));\nvar _DragSplitScreenWrap = _interopRequireDefault(__webpack_require__(/*! @/component/common/DragSplitScreenWrap */ \"./src/component/common/DragSplitScreenWrap.js\"));\nvar _AttachDataWrap = _interopRequireDefault(__webpack_require__(/*! @/component/common/AttachDataWrap */ \"./src/component/common/AttachDataWrap.js\"));\nvar _Slot = _interopRequireDefault(__webpack_require__(/*! @/component/common/Slot */ \"./src/component/common/Slot.jsx\"));\nvar _advconUtil = __webpack_require__(/*! @/util/advconUtil */ \"./src/util/advconUtil.js\");\nvar _PageModel = _interopRequireDefault(__webpack_require__(/*! @/model/PageModel */ \"./src/model/PageModel.js\"));\nvar _waitChildEleLoad = _interopRequireDefault(__webpack_require__(/*! @/component/common/waitChildEleLoad */ \"./src/component/common/waitChildEleLoad.js\"));\nvar _tooltipsUtil = __webpack_require__(/*! @/util/tooltipsUtil */ \"./src/util/tooltipsUtil.js\");\nvar _const = __webpack_require__(/*! @/constant/const */ \"./src/constant/const.js\");\nvar _layoutService = __webpack_require__(/*! @/service/web/layoutService */ \"./src/service/web/layoutService.js\");\nvar _KDAdvCon2 = _interopRequireDefault(__webpack_require__(/*! ./KDAdvCon.less */ \"./src/component/web/KDAdvCon.less\"));\nvar _dec, _dec2, _class, _KDAdvCon;\n/*\n * 高级面板控件\n */\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nvar KDAdvCon = (_dec = (0, _VisibleLockWrap[\"default\"])(false), _dec2 = (0, _DragSplitScreenWrap[\"default\"])('advcon'), (0, _AttachDataWrap[\"default\"])(_class = _dec(_class = (0, _VisibleLockWrap.ContainerLockWrap)(_class = _dec2(_class = (_KDAdvCon = /*#__PURE__*/function (_React$Component) {\n  _inherits(KDAdvCon, _React$Component);\n  function KDAdvCon(props) {\n    var _this;\n    _classCallCheck(this, KDAdvCon);\n    _this = _callSuper(this, KDAdvCon, [props]);\n    _this.handleOnIntersection = function (visible, entry) {\n      _this.currentVisible = visible;\n      if (visible && !_this.state.showChildren) {\n        _this.pageModel.waitLoadPromise().then(function () {\n          if (_global[\"default\"][_global.IS_IE]) {\n            setTimeout(function () {\n              if (_this.currentVisible) {\n                _this.setState({\n                  showChildren: true\n                });\n              }\n            }, 500);\n          } else {\n            _this.setState({\n              showChildren: true\n            });\n          }\n        });\n      }\n    };\n    _this.recordExpandedStatus = function (expand) {\n      (0, _memoryCacher.setPageUIState)(_this.props.model, 'ep', expand);\n    };\n    // handleChangeFullScreen (val) {\n    //   this.setState({\n    //     fullScreen: vale\n    //   })\n    // }\n    _this.handleFullScreen = function () {\n      var fullScreenStatus = !_this.state.fullScreen;\n      _this.setState({\n        fullScreen: fullScreenStatus\n      });\n      var model = _this.props.model;\n      var pageId = model.pageId,\n        key = model.key;\n      (0, _advconUtil.updateFullScreenGlobalData)(fullScreenStatus, \"\".concat(pageId, \"_\").concat(key));\n    };\n    _this.updateTipsConfig = _this.updateTipsConfig.bind(_assertThisInitialized(_this));\n    var isAllowLazyLoad = props.model.getMetaProperty('lazyload') !== false;\n    var showChildren = !!window.__nolazyload__ || !isAllowLazyLoad;\n    var _expand = props.model.getInitExpaned();\n    _this.pageModel = (0, _PageModel[\"default\"])(props.model.pageId);\n    if (!showChildren && _expand) {\n      // 优化条件，懒加载&&展开\n      // 加入优化计算逻辑\n      showChildren = _this.pageModel.isImmediatelyLoad(props.model.key);\n      if (showChildren) {\n        _this.isImmediatelyLoad = true;\n      }\n    }\n    _this.state = {\n      expand: _expand,\n      fullScreen: false,\n      showChildren: showChildren,\n      tipsConfig: null,\n      showDot: false,\n      shouldResetPadding: false\n    };\n    return _this;\n  }\n  _createClass(KDAdvCon, [{\n    key: \"updateTipsConfig\",\n    value: function updateTipsConfig(pageId, id, tips) {\n      if (!tips) {\n        // 可以通过u指令设置tips为空\n        this.setState({\n          tipsConfig: null\n        });\n        return;\n      }\n      var tipsConfig = this.state.tipsConfig;\n      if (!tipsConfig) {\n        tipsConfig = (0, _tooltipsUtil.createTipsConfig)(pageId, id);\n        this.setState({\n          tipsConfig: tipsConfig\n        });\n      }\n      (0, _tooltipsUtil.saveTipsInfo)(tipsConfig, tips);\n    }\n  }, {\n    key: \"componentDidMount\",\n    value:\n    // 这里兼容场景：面板中的工具栏项配置了下拉菜单，id和key值不一致，导致setEnable修改下拉菜单项锁定性不生效，这里先去掉前后不一致校验\n    // shouldComponentUpdate (nextProps, nextState) {\n    //   const { pageId, key } = nextProps.model\n    //   const updateVariable = this.props.appState && this.props.appState.getIn(['forms', pageId, 'updateVariable'])\n    //   const nextUpdateVariable = nextProps.appState && nextProps.appState.getIn(['forms', pageId, 'updateVariable'])\n    //   return this.state.fullScreen !== nextState.fullScreen || this.state.expand !== nextState.expand || this.state.showChildren !== nextState.showChildren ||\n    //   updateVariable !== nextUpdateVariable || isControlDataChanged(pageId, key, this.props.model.meta, nextProps.model.meta, this.props.appState, nextProps.appState)\n    // }\n\n    function componentDidMount() {\n      var _this2 = this;\n      var _this$props = this.props,\n        model = _this$props.model,\n        id = _this$props.id,\n        pageId = _this$props.pageId;\n      var tips = (0, _tooltipsUtil.getTips)(model);\n      if (tips) this.updateTipsConfig(model.pageId, model.key, tips);\n      if (model || id && pageId) {\n        var _pageId = model ? model.pageId : pageId;\n        var key = model ? model.key : id;\n        setTimeout(function () {\n          (0, _memoryCacher2.setControlMount)(_pageId, key, true);\n          _this2.isImmediatelyLoad && (0, _waitChildEleLoad[\"default\"])(_this2.advCon, 500).then(function (result) {\n            var timeout = _global[\"default\"][_global.IS_IE] ? 1500 : 100;\n            setTimeout(function () {\n              _this2.pageModel.addImmediatelyLoadNum();\n            }, timeout);\n          });\n        }, 0);\n        var collapsible = model.getMetaProperty('collapsible');\n        if (!collapsible) return; // 不可折叠的时候，不再接受折叠设置\n\n        this.removeSubscribeControlMethod = (0, _memoryCacher.subscribeControlMethod)(_pageId, key, 'directives', function () {\n          var results = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n          results.forEach(function (result) {\n            if (result.methodname === 'setCollapse') {\n              if (!result.args) {\n                console.warn('setCollapse args is not exit');\n              } else {\n                var _result$args = _slicedToArray(result.args, 3),\n                  collapse = _result$args[0],\n                  _result$args$ = _result$args[1],\n                  isRecordExpandedStatus = _result$args$ === void 0 ? true : _result$args$,\n                  scrollIntoView = _result$args[2];\n                _this2.setState({\n                  expand: !collapse\n                }, function () {\n                  // 折叠面板展开滚动到视图区域\n                  !collapse && scrollIntoView && _reactDom[\"default\"].findDOMNode(_this2).scrollIntoView({\n                    behavior: 'smooth',\n                    block: 'center'\n                  });\n                });\n                isRecordExpandedStatus && _this2.recordExpandedStatus(!collapse);\n              }\n            }\n          });\n        });\n        this.removePageDataListener = (0, _memoryCacher.addDataChangeListener)(_pageId, [_const.CHILDREN_VALIDATE_ERROR, key], function (show) {\n          _this2.setState({\n            showDot: show\n          });\n        });\n      }\n      this.setState({\n        shouldResetPadding: !(0, _layoutService.isInDialog)(pageId) || (0, _layoutService.isInFullscreenDialog)(pageId)\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.dispose = true;\n      this.removeSubscribeControlMethod && this.removeSubscribeControlMethod();\n      var pageId = this.props.model ? this.props.model.pageId : this.props.pageId;\n      var key = this.props.model ? this.props.model.key : this.props.id;\n      (0, _memoryCacher2.setControlMount)(pageId, key, false);\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      var _nextProps$model, _nextProps$model2;\n      var tips = (0, _tooltipsUtil.getTips)(this.props.model);\n      var nextTips = (0, _tooltipsUtil.getTips)(nextProps.model);\n      if (!(0, _immutable.is)(tips, nextTips)) this.updateTipsConfig((_nextProps$model = nextProps.model) === null || _nextProps$model === void 0 ? void 0 : _nextProps$model.pageId, (_nextProps$model2 = nextProps.model) === null || _nextProps$model2 === void 0 ? void 0 : _nextProps$model2.key, nextTips);\n    }\n  }, {\n    key: \"onHandleClick\",\n    value: function onHandleClick(e, collapsible) {\n      if (collapsible) {\n        var expand = !this.state.expand;\n        this.setState({\n          expand: expand\n        });\n        this.recordExpandedStatus(expand);\n      }\n    }\n  }, {\n    key: \"getTriggerType\",\n    value: function getTriggerType(tips) {\n      if (tips) {\n        var type = tips.get('type');\n        var triggerType = tips.get('triggerType');\n        return type === 'text' ? triggerType || 'hover' : triggerType || 'click';\n      }\n      return 'hover';\n    }\n  }, {\n    key: \"render\",\n    value:\n    // resetPadding = (style) => {\n    //   let { paddingTop, paddingRight, paddingBottom, paddingLeft } = style\n    //   paddingTop = paddingTop === '' ? getUIDefaultProps(customCtrlName.ADV_CON, [customProperties.PADDING_TOP]) : paddingTop\n    //   paddingRight = paddingRight === '' ? getUIDefaultProps(customCtrlName.ADV_CON, [customProperties.PADDING_RIGHT]) : paddingRight\n    //   paddingBottom = paddingBottom === '' ? getUIDefaultProps(customCtrlName.ADV_CON, [customProperties.PADDING_BOTTOM]) : paddingBottom\n    //   paddingLeft = paddingLeft === '' ? getUIDefaultProps(customCtrlName.ADV_CON, [customProperties.PADDING_LEFT]) : paddingLeft\n    //   return { ...style, paddingTop, paddingRight, paddingBottom, paddingLeft }\n    // }\n\n    function render() {\n      var _this3 = this;\n      if (!this.context) {\n        return null;\n      }\n      var _this$props2 = this.props,\n        model = _this$props2.model,\n        dispatch = _this$props2.dispatch;\n      var pageId = model.pageId,\n        key = model.key;\n      var _this$state = this.state,\n        fullScreen = _this$state.fullScreen,\n        expand = _this$state.expand,\n        showDot = _this$state.showDot,\n        tipsConfig = _this$state.tipsConfig;\n      var style = _objectSpread({}, (0, _componentutil.getCommonStyle)(model));\n      var collapsible = model.getMetaProperty('collapsible');\n      var maximize = model.getMetaProperty('maximize');\n      var _getCommonClass = (0, _componentutil.getCommonClass)(this.props.model),\n        Grow = _getCommonClass.Grow,\n        Shrink = _getCommonClass.Shrink,\n        AlignSelf = _getCommonClass.AlignSelf;\n      var iconClass = (0, _defaultPropsUtil.getUIDefaultProps)(_customCtrlName[\"default\"].ADV_CON, [_customProperties[\"default\"].FOLDED_FONT_CLASS]);\n      var defaultToolBarStyle = (0, _defaultPropsUtil.getUIDefaultProps)(_customCtrlName[\"default\"].ADV_CON, [_customProperties[\"default\"].TOOLBAR_STYLE]); // 默认工具栏风格\n      var hideCollapseIcon = (0, _defaultPropsUtil.getUIDefaultProps)(_customCtrlName[\"default\"].ADV_CON, [_customProperties[\"default\"].HIDE_COLLAPSE_ICON]);\n      var toolBarType1 = defaultToolBarStyle === 1;\n      var iconFontClass = iconClass || 'kdfont kdfont-right';\n      var iconStyle = (0, _classnames13[\"default\"])(_KDAdvCon2[\"default\"].collapseIcon, 'kd-cq-collapse-icon', _defineProperty({}, _KDAdvCon2[\"default\"].expandIcon, !this.state.expand), 'secondary-text-in-light', [iconFontClass]);\n      var titleStyle = _KDAdvCon2[\"default\"].title;\n      var panelStyle = (0, _classnames13[\"default\"])(_KDAdvCon2[\"default\"].panel, _defineProperty(_defineProperty({}, _KDAdvCon2[\"default\"].mt0, toolBarType1), _KDAdvCon2[\"default\"].ml0, hideCollapseIcon));\n      var summaryPanelStyle = (0, _classnames13[\"default\"])('kd-cq-collapse-summary', _KDAdvCon2[\"default\"].summaryPanel);\n      var toolbarStyle = _KDAdvCon2[\"default\"].toolbar;\n      var panelInlinkStyle = {\n        position: 'relative'\n      }; // 支持子元素绝对定位\n\n      style = this.state.shouldResetPadding ? (0, _advconUtil.resetPadding)(style) : style;\n      if (collapsible && !expand) {\n        // 折叠状态下，高度为 36px，需要调整 paddingBottom\n        style.paddingBottom = 6;\n      }\n      // 不可折叠\n      if (!collapsible) {\n        iconStyle = _KDAdvCon2[\"default\"].hide;\n        titleStyle = (0, _classnames13[\"default\"])(_defineProperty(_defineProperty({}, _KDAdvCon2[\"default\"].title, true), _KDAdvCon2[\"default\"].cur, true));\n        panelStyle = (0, _classnames13[\"default\"])(_defineProperty(_defineProperty(_defineProperty({}, _KDAdvCon2[\"default\"].panel, true), _KDAdvCon2[\"default\"].collapsePanel, true), _KDAdvCon2[\"default\"].mt0, toolBarType1));\n        panelInlinkStyle.marginLeft = 0;\n        style.paddingRight = style.paddingRight ? style.paddingRight : 0;\n        style.paddingLeft = style.paddingLeft ? style.paddingLeft : 0;\n      }\n      toolbarStyle = (0, _classnames13[\"default\"])(_defineProperty(_defineProperty(_defineProperty({}, _KDAdvCon2[\"default\"]['full-screen-right-padding'], maximize), _KDAdvCon2[\"default\"].toolbar, true), _KDAdvCon2[\"default\"].type1, toolBarType1));\n      if (!this.state.expand) {\n        // toolbarStyle = panelStyle = styles.hide + ' hidden'\n        // maximize = false   // 收起也是应该可以全屏的\n        panelStyle = (0, _classnames13[\"default\"])(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, _KDAdvCon2[\"default\"].panel, true), _KDAdvCon2[\"default\"].collapsePanel, true), _KDAdvCon2[\"default\"].hide + ' hidden', true), _KDAdvCon2[\"default\"].mt0, toolBarType1));\n        toolbarStyle = (0, _classnames13[\"default\"])(_defineProperty(_defineProperty({}, _KDAdvCon2[\"default\"]['full-screen-right-padding'], maximize), _KDAdvCon2[\"default\"].invisible, true));\n      }\n\n      // let rootClassName = classnames({\n      //   [styles['advCon']]:true,\n      //   [className]:className\n      // });\n      var items = model.meta.get('items', new _immutable.List());\n      var summarypanelControls = items.filter(function (ctrl) {\n        return ctrl.get('type') === 'advconsummarypanel';\n      });\n      if (summarypanelControls) {\n        summarypanelControls = summarypanelControls.updateIn([0, 'wr'], function () {\n          return false;\n        }).updateIn([0, 'ai'], function () {\n          return 'center';\n        }); // 因为bar 高度是固定的25px，如果允许换行，会出现被遮挡的情况 flex 面板默认是flex-start，标签+图片会导致标签不可见\n      }\n      var toolbarControls = items.filter(function (ctrl) {\n        return ctrl.get('type') === 'advcontoolbar';\n      });\n      var attachToolBarToTab = (0, _memoryCacher.getPageData)(model.pageId, [model.key, _const.ATTACH_TOOLBAR_TO_TAB]);\n      if (attachToolBarToTab && toolbarControls) {\n        (0, _memoryCacher.setPageData)(model.pageId, [toolbarControls.getIn([0, 'id']), _const.ATTACH_TOOLBAR_TO_TAB], true);\n      }\n      if (toolBarType1 && toolbarControls) {\n        toolbarControls = toolbarControls.updateIn([0, 'type'], function () {\n          return 'toolbar';\n        }).updateIn([0, 'items'], (0, _immutable.List)(), function (items) {\n          return items.map(function (item) {\n            return item.set('type', 'baritem');\n          });\n        });\n        if (!toolbarControls.getIn([0, 's', 'p', 'l'])) {\n          // 如果二开没有设置左边距，就用0px 覆盖toolbar 样式内写的40px 左边距\n          toolbarControls = toolbarControls.updateIn([0, 's', 'p', 'l'], function () {\n            return '0px';\n          });\n        }\n      }\n      var panelControls = items.filter(function (ctrl) {\n        return ctrl.get('type') === 'advconchild';\n      });\n      if (_immutable.List.isList(panelControls) && panelControls.get(0)) {\n        // 高级面板子容器是映射的KDFlexpanel，默认走的按需加载；需要将高级面板按需加载属性传给子容器（的元数据里）\n        panelControls = panelControls.setIn([0, 'lazyload'], this.props.model.getMetaProperty('lazyload'));\n      }\n      var title = model.getMetaLocaleProperty('text');\n      var rootClassName = (0, _classnames13[\"default\"])('kd-cq-container kd-cq-advcon', _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, _KDAdvCon2[\"default\"].advCon, true), _KDAdvCon2[\"default\"].customized, iconClass), _KDAdvCon2[\"default\"]['adv-con'], true), _KDAdvCon2[\"default\"]['adv-con-full-screen'], maximize && this.state.fullScreen), _KDAdvCon2[\"default\"].maximize, maximize), _KDAdvCon2[\"default\"].collapsible, collapsible), (0, _commonUtils[\"default\"])({\n        Grow: Grow,\n        Shrink: Shrink,\n        AlignSelf: AlignSelf\n      }));\n      var hasSummaryPanel = true; // 高级面板摘要容器是否需要渲染条件，解决ie浏览器下宽度计算为负值造成横向滚动条的bug\n      var item = summarypanelControls.get(0);\n      // 判断高级面板摘要容器是否存在或者内部是否有元素,不存在或内部没有元素则不渲染\n      if (item && item.get('items')) {\n        hasSummaryPanel = !!summarypanelControls.get(0).get('items').size;\n        // hasSummaryPanel = item.get('items').some(item => item.getIn(['text', 'zh_CN']) !== '')\n      } else {\n        hasSummaryPanel = false;\n      }\n      var fullScreenIcon = (0, _classnames13[\"default\"])(_defineProperty(_defineProperty({\n        'kd-cq-full-screen-icon': !fullScreen,\n        'kd-cq-exit-full-screen-icon': fullScreen,\n        'kdfont kdfont-quanping': !fullScreen,\n        'kdfont kdfont-guanbiquanping': fullScreen\n      }, _KDAdvCon2[\"default\"]['full-screen'], true), 'kd-hover-color', true));\n      // primary-text-in-light：默认显示颜色#212121 hover-theme-fc：hover显示主题色 active-theme-active-fc1：选择(active)显示计算的主题点击色\n      var collapseStyle = (0, _classnames13[\"default\"])([_KDAdvCon2[\"default\"].collapse], 'primary-text-in-light', _defineProperty({}, _KDAdvCon2[\"default\"]['collapse-with-tips'], tipsConfig));\n      var titleFontStyle, subTitleFontStyle;\n      var titleFontSize = (0, _defaultPropsUtil.getUIDefaultProps)(_customCtrlName[\"default\"].ADV_CON, [_customProperties[\"default\"].TITLE_FONT_SIZE]);\n      var subTitleFontSize = (0, _defaultPropsUtil.getUIDefaultProps)(_customCtrlName[\"default\"].ADV_CON, [_customProperties[\"default\"].SUB_TITLE_FONT_SIZE]);\n      if (titleFontSize !== undefined) {\n        titleFontStyle = {\n          fontSize: titleFontSize\n        };\n      }\n      if (subTitleFontSize !== undefined) {\n        subTitleFontStyle = {\n          fontSize: subTitleFontSize\n        };\n      }\n      var toolBarEleChildren = (0, _componentutil.parseSubComponents)(toolbarControls, model.pageId, (0, _global.getGlobalState)());\n      var toolBarEle = /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        className: (0, _classnames13[\"default\"])(toolbarStyle, 'kd-cq-advcon-toolbar')\n      }, toolBarEleChildren.map(function (child) {\n        return /*#__PURE__*/_react[\"default\"].cloneElement(child, {\n          containerKey: model.key\n        });\n      }));\n      var slot;\n      if (tipsConfig) {\n        slot = /*#__PURE__*/_react[\"default\"].createElement(_Slot[\"default\"], {\n          tips: tipsConfig\n        });\n      }\n      return /*#__PURE__*/_react[\"default\"].createElement(\"div\", _extends({\n        className: rootClassName,\n        style: style,\n        ref: function ref(r) {\n          _this3.advCon = r;\n        }\n      }, this.props.attachData, {\n        \"data-ctrl-type\": \"advcon\",\n        \"data-pid\": model.pageId,\n        \"data-ctrl-key\": model ? model.key : this.props.id\n      }), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        className: (0, _classnames13[\"default\"])(_KDAdvCon2[\"default\"].bar, _defineProperty({}, _KDAdvCon2[\"default\"]['bar-fold'], !expand))\n      }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        className: (0, _classnames13[\"default\"])(_KDAdvCon2[\"default\"].box, _defineProperty(_defineProperty({}, _KDAdvCon2[\"default\"]['max-width'], expand), _KDAdvCon2[\"default\"]['box-collapse'], !expand))\n      }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        className: collapseStyle,\n        onClick: function onClick(e) {\n          return _this3.onHandleClick(e, collapsible);\n        }\n      }, !hideCollapseIcon && /*#__PURE__*/_react[\"default\"].createElement(\"i\", {\n        className: iconStyle\n      }), /*#__PURE__*/_react[\"default\"].createElement(_TextEllipsisWrap[\"default\"], null, /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n        className: (0, _classnames13[\"default\"])(titleStyle, 'kd-cq-container-title'),\n        style: titleFontStyle,\n        title: title\n      }, title))), maximize ? /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n        className: fullScreenIcon,\n        onClick: this.handleFullScreen,\n        title: fullScreen ? (0, _intlApi.getLangMsg)({\n          key: 'tabs.key0002'\n        }) : (0, _intlApi.getLangMsg)({\n          key: 'tabs.key0001'\n        })\n      }) : null, !expand && showDot && /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        className: _KDAdvCon2[\"default\"]['dot-icon-wrap']\n      }, /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n        className: (0, _classnames13[\"default\"])(_KDAdvCon2[\"default\"]['dot-icon'], 'kdfont kdfont-jinggao-mian')\n      })), slot, hasSummaryPanel ? /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        className: summaryPanelStyle,\n        style: subTitleFontStyle\n      }, (0, _componentutil.parseSubComponents)(summarypanelControls, model.pageId, (0, _global.getGlobalState)())) : null), !toolBarType1 && toolBarEle), toolBarType1 && toolBarEle, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        className: panelStyle,\n        style: panelInlinkStyle\n      }, !this.state.showChildren && /*#__PURE__*/_react[\"default\"].createElement(_IntersectionComponent[\"default\"], {\n        onIntersection: this.handleOnIntersection\n      }), this.state.showChildren && /*#__PURE__*/_react[\"default\"].createElement(_LazyLoadContainer[\"default\"], {\n        enabledLazyLoad: _global[\"default\"][_global.IS_IE] && !this.isImmediatelyLoad,\n        pageId: model.pageId,\n        childrenMeta: panelControls,\n        state: (0, _global.getGlobalState)()\n      })));\n    }\n  }]);\n  return KDAdvCon;\n}(_react[\"default\"].Component), _KDAdvCon.contextType = _PageLoadDataComplete.PageLoadDataCompleteContext, _KDAdvCon)) || _class) || _class) || _class) || _class);\nvar _default = exports[\"default\"] = KDAdvCon;\n\n//# sourceURL=webpack://bos-platform/./src/component/web/KDAdvCon.js?");

/***/ }),

/***/ "./src/component/web/KDAdvConToolbar.js":
/*!**********************************************!*\
  !*** ./src/component/web/KDAdvConToolbar.js ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.object.assign.js */ \"../../node_modules/core-js/modules/es.object.assign.js\");\n__webpack_require__(/*! core-js/modules/es.object.create.js */ \"../../node_modules/core-js/modules/es.object.create.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.get-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.set-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.set-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.reflect.construct.js */ \"../../node_modules/core-js/modules/es.reflect.construct.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.array.filter.js */ \"../../node_modules/core-js/modules/es.array.filter.js\");\n__webpack_require__(/*! core-js/modules/es.array.find-index.js */ \"../../node_modules/core-js/modules/es.array.find-index.js\");\n__webpack_require__(/*! core-js/modules/es.array.for-each.js */ \"../../node_modules/core-js/modules/es.array.for-each.js\");\n__webpack_require__(/*! core-js/modules/es.array.from.js */ \"../../node_modules/core-js/modules/es.array.from.js\");\n__webpack_require__(/*! core-js/modules/es.array.index-of.js */ \"../../node_modules/core-js/modules/es.array.index-of.js\");\n__webpack_require__(/*! core-js/modules/es.array.map.js */ \"../../node_modules/core-js/modules/es.array.map.js\");\n__webpack_require__(/*! core-js/modules/es.array.reduce.js */ \"../../node_modules/core-js/modules/es.array.reduce.js\");\n__webpack_require__(/*! core-js/modules/es.array.slice.js */ \"../../node_modules/core-js/modules/es.array.slice.js\");\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.number.max-safe-integer.js */ \"../../node_modules/core-js/modules/es.number.max-safe-integer.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ \"../../node_modules/core-js/modules/web.dom-collections.for-each.js\");\nvar _react = _interopRequireDefault(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _reactDom = _interopRequireDefault(__webpack_require__(/*! react-dom */ \"webpack/sharing/consume/default/react-dom/react-dom?418d\"));\nvar _classnames = _interopRequireDefault(__webpack_require__(/*! classnames */ \"../../node_modules/classnames/index.js\"));\nvar _propTypes = _interopRequireDefault(__webpack_require__(/*! prop-types */ \"../../node_modules/prop-types/index.js\"));\nvar _global = __webpack_require__(/*! @/global */ \"./src/global/index.js\");\nvar _AdvConToolbar = __webpack_require__(/*! ./base/AdvConToolbar */ \"./src/component/web/base/AdvConToolbar.js\");\nvar _ComponentModel = _interopRequireDefault(__webpack_require__(/*! ../../model/ComponentModel */ \"./src/model/ComponentModel.js\"));\nvar _toolbaraction = __webpack_require__(/*! ../../action/toolbaraction */ \"./src/action/toolbaraction.js\");\nvar _immutable = __webpack_require__(/*! immutable */ \"webpack/sharing/consume/default/immutable/immutable?f2ca\");\nvar _VisibleLockWrap = _interopRequireDefault(__webpack_require__(/*! ../common/VisibleLockWrap */ \"./src/component/common/VisibleLockWrap.js\"));\nvar _AttachDataWrap = _interopRequireDefault(__webpack_require__(/*! ../common/AttachDataWrap */ \"./src/component/common/AttachDataWrap.js\"));\nvar _CtlInterceptors = __webpack_require__(/*! ../common/CtlInterceptors */ \"./src/component/common/CtlInterceptors.js\");\nvar _KDAdvConToolbarItem = _interopRequireDefault(__webpack_require__(/*! ./KDAdvConToolbarItem */ \"./src/component/web/KDAdvConToolbarItem.js\"));\nvar _langUtil = __webpack_require__(/*! @/util/langUtil */ \"./src/util/langUtil.js\");\nvar _componentutil = __webpack_require__(/*! @/util/componentutil */ \"./src/util/componentutil.js\");\nvar _kdesign = __webpack_require__(/*! @kdcloudjs/kdesign */ \"webpack/sharing/consume/default/@kdcloudjs/kdesign/@kdcloudjs/kdesign\");\nvar _ToolbarMorePanel = _interopRequireDefault(__webpack_require__(/*! ./ToolbarMorePanel/ToolbarMorePanel */ \"./src/component/web/ToolbarMorePanel/ToolbarMorePanel.jsx\"));\nvar _lodash = __webpack_require__(/*! lodash */ \"../../node_modules/lodash/lodash.js\");\nvar _resizeObserve = _interopRequireDefault(__webpack_require__(/*! @/util/resizeObserve */ \"./src/util/resizeObserve.js\"));\nvar _const = __webpack_require__(/*! @/constant/const */ \"./src/constant/const.js\");\nvar _memoryCacher = __webpack_require__(/*! @/model/memoryCacher */ \"./src/model/memoryCacher.js\");\nvar _toolbarUtils = __webpack_require__(/*! @/util/toolbarUtils */ \"./src/util/toolbarUtils.js\");\nvar _waitUpdateValueUtil = __webpack_require__(/*! @/api/waitUpdateValueUtil */ \"./src/api/waitUpdateValueUtil.js\");\nvar _serverproperties = __webpack_require__(/*! @/constant/serverproperties */ \"./src/constant/serverproperties.js\");\nvar _AdvConToolbar2 = _interopRequireDefault(__webpack_require__(/*! @/component/web/base/AdvConToolbar.less */ \"./src/component/web/base/AdvConToolbar.less\"));\nvar _PageScope = __webpack_require__(/*! @/pagescope/PageScope */ \"./src/pagescope/PageScope.js\");\nvar _controlBizEventConst = __webpack_require__(/*! @/pagescope/controlBizEvent/controlBizEventConst */ \"./src/pagescope/controlBizEvent/controlBizEventConst.js\");\nvar _dec, _class, _KDAdvConToolbar;\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nvar KDAdvConToolbar = (_dec = (0, _VisibleLockWrap[\"default\"])(false), (0, _AttachDataWrap[\"default\"])(_class = _dec(_class = (_KDAdvConToolbar = /*#__PURE__*/function (_React$Component) {\n  _inherits(KDAdvConToolbar, _React$Component);\n  function KDAdvConToolbar(props) {\n    var _this;\n    _classCallCheck(this, KDAdvConToolbar);\n    _this = _callSuper(this, KDAdvConToolbar, [props]);\n    _this.handlePermission = function (data) {\n      if (!data) return;\n      var _data$noPerData = data.noPerData,\n        noPerData = _data$noPerData === void 0 ? [] : _data$noPerData;\n      var items = _this.state.items;\n      var newItems = (0, _toolbarUtils.getPermissionItems)({\n        items: items,\n        noPerData: noPerData,\n        model: _this.props.model\n      });\n      _this.setState({\n        items: newItems\n      });\n    };\n    // 有开发将高级面板工具栏直接拖动到子容器当中\n    // 在这里兼容这种情况：如果父元素的子多于1的话，且兄弟元素没有设置z-index的话，给兄弟元素设置一个\n    // 如果降低工具栏的z-index的话，可能会隐藏工具栏\n    // 暂时先这样实现\n    _this.setZIndex = function () {\n      if (!_this.containerRef.current || _this.containerRef.current.parentElement.children.length <= 1) return;\n      var childrenArr = Array.from(_this.containerRef.current.parentElement.children);\n      childrenArr.forEach(function (child) {\n        if (child === _this.containerRef.current) return;\n        var cssText = child.style.cssText;\n        if (!cssText || cssText.indexOf('z-index') < 0) {\n          child.style.cssText = \"\".concat(!cssText ? '' : cssText, \";z-index: 1;\");\n        }\n      });\n    };\n    _this.addIntersectionObserver = function () {\n      var config = {\n        threshold: [0.99999999],\n        root: _reactDom[\"default\"].findDOMNode(_this.toolbarRef.current)\n      };\n      _this.intersectionObserver = new window.IntersectionObserver(function (entries) {\n        entries.forEach(function (entry, index) {\n          var id = entry.target.id;\n          var width = entry.boundingClientRect.width;\n          var idx = _this.findIndex(id);\n          if (idx > -1) {\n            _this.cacheItemWidths[idx] = width;\n          }\n        });\n\n        // 高级面板收缩后重新展开，并不会触发 intersectionObserver\n        // 但是宽度会为0，导致重新展开后不显示按钮\n        var widths = _this.cacheItemWidths.reduce(function (a, b) {\n          return a + b;\n        }, 0);\n        if (widths > 0) {\n          _this.setState({\n            placeholderWidth: widths\n          });\n        }\n      }, config);\n      if (_this.toolbarRef.current) {\n        var toolbarNode = _reactDom[\"default\"].findDOMNode(_this.toolbarRef.current);\n        Array.from(toolbarNode.children).forEach(function (child) {\n          _this.intersectionObserver.observe(child);\n        });\n      }\n    };\n    _this.addMutationObserver = function () {\n      var config = {\n        childList: true\n      };\n      _this.mutationObserver = new window.MutationObserver(function (mutations) {\n        mutations.forEach(function (mutation) {\n          if (mutation.type === 'childList') {\n            _this.intersectionObserver.disconnect();\n            Array.from(_reactDom[\"default\"].findDOMNode(_this.toolbarRef.current).children).forEach(function (child) {\n              _this.intersectionObserver.observe(child);\n            });\n          }\n        });\n      });\n      if (_this.toolbarRef.current) {\n        var toolbarNode = _reactDom[\"default\"].findDOMNode(_this.toolbarRef.current);\n        _this.mutationObserver.observe(toolbarNode, config);\n      }\n    };\n    _this.findIndex = function (id) {\n      if (id === undefined || id === null) return false;\n      var model = _this.props.model;\n      var items = _this.state.items;\n      return items.findIndex(function (item) {\n        return item.get('id') === id;\n      });\n    };\n    _this.resetFirstInvisibleItemIndex = function () {\n      if (!_this.cacheItemWidths.length || !_this.containerWidth) return;\n      var width = 0;\n      for (var i = 0; i < _this.cacheItemWidths.length; i++) {\n        if (width + (_this.cacheItemWidths[i] || 0) - _this.containerWidth > 0.5) {\n          _this.setState({\n            firstInvisibleItemIndex: i\n          });\n          return;\n        } else if (i === _this.cacheItemWidths.length - 1 && width + _this.cacheItemWidths[i] <= _this.containerWidth) {\n          _this.setState({\n            firstInvisibleItemIndex: Number.MAX_SAFE_INTEGER\n          });\n          return;\n        }\n        width += _this.cacheItemWidths[i] || 0;\n      }\n    };\n    _this.addResizeListener = function () {\n      var resize = (0, _lodash.debounce)(function (rect) {\n        if (_this.containerWidth === rect.width) {\n          return;\n        }\n        _this.containerWidth = rect.width;\n        _this.resetFirstInvisibleItemIndex();\n      }, 300);\n      var thisNode = _reactDom[\"default\"].findDOMNode(_this.toolbarRef.current);\n      _this.resizeObserver = (0, _resizeObserve[\"default\"])(thisNode, function (rect) {\n        return resize(rect);\n      });\n    };\n    _this.getTipsSlot = function (id) {\n      try {\n        if (id) {\n          var toolbarNode = _reactDom[\"default\"].findDOMNode(_this.toolbarRef.current);\n          var targetToolbarEle = toolbarNode === null || toolbarNode === void 0 ? void 0 : toolbarNode.querySelector(\"[data-btn-key=\".concat(id, \"]\"));\n          return targetToolbarEle === null || targetToolbarEle === void 0 ? void 0 : targetToolbarEle.querySelector('[data-is-tip=\"true\"]');\n        }\n      } catch (error) {\n        console.log(error);\n        return null;\n      }\n    };\n    _this.getInvisibleItems = function () {\n      var firstInvisibleItemIndex = _this.state.firstInvisibleItemIndex;\n      if (firstInvisibleItemIndex === Number.MAX_SAFE_INTEGER) return [];\n      var model = _this.props.model;\n      var items = _this.state.items;\n      var moreItems = items.slice(firstInvisibleItemIndex).filter(function (item) {\n        var id = item.get('id');\n        var vi = item.get('vi');\n        return _this.getVisible(id, vi);\n      });\n      return moreItems.map(function (item, index) {\n        var state = (0, _global.getGlobalState)();\n        var locale = model.getUserLocale();\n        var defaultLang = model.getDefaultLang();\n        var itemModel = new _ComponentModel[\"default\"](model.pageId, item, state);\n        var title = itemModel.getMetaLocaleProperty('text');\n        var key = item.get('id');\n        var opk = item.get('opk');\n        var lock = _this.getLocked(key, item.get('l'));\n        var items = item.get('items') || [];\n        var _items = (0, _immutable.fromJS)(items.filter(function (item) {\n          return _this.getVisible(item.get('key'));\n        }).map(function (_item) {\n          return (0, _immutable.fromJS)({\n            key: _item.get('key'),\n            title: (0, _langUtil.getValueByPath)(_item, ['title'], {\n              current: locale,\n              \"default\": defaultLang\n            }),\n            opk: _item.get('operationKey'),\n            lock: _this.getLocked(_item.get('key'), _item.get('l'))\n          });\n        }));\n        return (0, _immutable.fromJS)({\n          title: title,\n          key: key,\n          opk: opk,\n          lock: lock,\n          items: _items,\n          isDropdown: (_items === null || _items === void 0 ? void 0 : _items.size) > 0\n        });\n      });\n    };\n    _this.handleDropdownVisibleChange = function (visible) {\n      _this.setState({\n        dropdownVisible: visible\n      });\n    };\n    _this.handleSubDropdownVisibleChange = function (visible, id) {\n      var subDropdownVisible = _this.state.subDropdownVisible;\n      subDropdownVisible[id] = visible;\n      _this.setState({\n        subDropdownVisible: subDropdownVisible\n      });\n    };\n    _this.handleClick = _this.handleClick.bind(_assertThisInitialized(_this));\n    _this.getVisible = _this.getVisible.bind(_assertThisInitialized(_this));\n    _this.getLocked = _this.getLocked.bind(_assertThisInitialized(_this));\n    _this.state = {\n      items: props.model.getMetaProperty('items') || (0, _immutable.List)(),\n      firstInvisibleItemIndex: Number.MAX_SAFE_INTEGER,\n      dropdownVisible: false,\n      subDropdownVisible: {},\n      placeholderWidth: 0,\n      containerStyle: {}\n    };\n    _this.toolbarRef = /*#__PURE__*/_react[\"default\"].createRef();\n    _this.moreBtnRef = /*#__PURE__*/_react[\"default\"].createRef();\n    _this.containerRef = /*#__PURE__*/_react[\"default\"].createRef();\n    _this.cacheItemWidths = [];\n    return _this;\n  }\n  _createClass(KDAdvConToolbar, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var permissionData = (0, _memoryCacher.getPageData)(this.props.model.pageId, _const.PERMISSION_PARAMS);\n      permissionData && this.handlePermission(permissionData);\n      this.removePageDataListener = (0, _memoryCacher.addDataChangeListener)(this.props.model.pageId, _const.PERMISSION_PARAMS, this.handlePermission);\n      this.addIntersectionObserver();\n      this.addMutationObserver();\n      this.addResizeListener();\n      this.setZIndex();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.intersectionObserver && this.intersectionObserver.disconnect();\n      this.resizeObserver && this.resizeObserver.removeResizeObserve();\n      this.mutationObserver && this.mutationObserver.disconnect();\n      this.removePageDataListener && this.removePageDataListener();\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      if (!(0, _immutable.is)(nextProps.model.getMetaProperty('items'), this.props.model.getMetaProperty('items'))) {\n        this.setState({\n          items: nextProps.model.getMetaProperty('items') || (0, _immutable.List)(),\n          firstInvisibleItemIndex: Number.MAX_SAFE_INTEGER\n        });\n      }\n    }\n  }, {\n    key: \"handleClick\",\n    value: function handleClick(id) {\n      var _this2 = this;\n      var opk = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n      var _this$props = this.props,\n        model = _this$props.model,\n        dispatch = _this$props.dispatch;\n      var tipsSlot = this.getTipsSlot(id);\n      (0, _PageScope.fireControlBizEvent)(model.pageId, model.key, _controlBizEventConst.ITEM_CLICK, {\n        opk: opk,\n        id: id\n      });\n      // 经过拦截器链拦截\n      (0, _CtlInterceptors.interceptActionFn)({\n        model: model,\n        interceptArgs: {\n          id: id,\n          opk: opk,\n          triggerEle: tipsSlot\n        }\n      }, function (args) {\n        var model = args.model,\n          interceptArgs = args.interceptArgs;\n        var pageId = model.pageId;\n        var id = interceptArgs.id,\n          opk = interceptArgs.opk;\n        var promise = (0, _waitUpdateValueUtil.waitUpdateValueComplete)(pageId);\n        promise.then(function () {\n          dispatch((0, _toolbaraction.menuItemClick)(model, [id, opk]));\n          _this2.setState({\n            dropdownVisible: false,\n            subDropdownVisible: {}\n          });\n        });\n      });\n    }\n  }, {\n    key: \"getVisible\",\n    value: function getVisible(controlKey, vi) {\n      var model = this.props.model;\n      return this.props.getVisible ? this.props.getVisible(model, controlKey, vi) : true; // 默认可见\n    }\n  }, {\n    key: \"getLocked\",\n    value: function getLocked(controlKey, l) {\n      var model = this.props.model;\n      return this.props.getLocked ? this.props.getLocked(model, controlKey, l) : false; // 默认不锁定\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n      var _this$props2 = this.props,\n        model = _this$props2.model,\n        toolbarLoading = _this$props2.toolbarLoading;\n      var _this$state = this.state,\n        placeholderWidth = _this$state.placeholderWidth,\n        items = _this$state.items;\n      var attachToTab = (0, _memoryCacher.getPageData)(model.pageId, [model.key, _const.ATTACH_TOOLBAR_TO_TAB]);\n      var locale = model.getUserLocale();\n      var defaultLang = model.getDefaultLang();\n      var state = (0, _global.getGlobalState)();\n      var firstInvisibleItemIndex = this.state.firstInvisibleItemIndex;\n      var visibleItems = firstInvisibleItemIndex === Number.MAX_SAFE_INTEGER && items ? items : items.slice(0, firstInvisibleItemIndex);\n      var moreItems = this.getInvisibleItems();\n      var isAddMoreBtn = firstInvisibleItemIndex !== Number.MAX_SAFE_INTEGER && firstInvisibleItemIndex !== items.size;\n      var color = visibleItems[0] && visibleItems[0].get('fc');\n      var background = visibleItems[0] && visibleItems[0].get('bc');\n      var Menu = (0, _ToolbarMorePanel[\"default\"])({\n        items: moreItems,\n        model: model,\n        onClick: this.handleClick,\n        visible: this.state.subDropdownVisible,\n        onVisibleChange: this.handleSubDropdownVisibleChange\n      });\n      return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        ref: this.containerRef\n      }, /*#__PURE__*/_react[\"default\"].createElement(_AdvConToolbar.AdvConToolbar, _extends({\n        ref: this.toolbarRef,\n        pageId: model.pageId,\n        attachToTab: attachToTab\n      }, this.props.attachData), visibleItems ? visibleItems.map(function (item, index) {\n        var _items2;\n        var itemModel = new _ComponentModel[\"default\"](model.pageId, item, state);\n        var text = itemModel.getMetaLocaleProperty('text');\n        var id = item.get('id');\n        var opk = item.get('opk');\n        var replacedOperationKey = item.get('replacedOperationKey');\n        var vi = item.get('vi');\n        var l = item.get('l');\n        var fc = (0, _componentutil.fixColor)(item.get('fc'));\n        var bc = (0, _componentutil.fixColor)(item.get('bc'));\n        var items = item.get('items') || [];\n        var type = item.get('type');\n        var _items = items.map(function (_item) {\n          var newItem = {};\n          newItem.Background = _item.get('background');\n          newItem.Key = _item.get('key');\n          // newItem.Title = _item.get('title');\n          // newItem.Title = _item.getIn(['title', locale]) // 取多语言\n          newItem.Title = (0, _langUtil.getValueByPath)(_item, ['title'], {\n            current: locale,\n            \"default\": defaultLang\n          });\n          newItem.OperationKey = _item.get('operationKey');\n          newItem.vi = _item.get('vi');\n          newItem.l = _item.get('l');\n          if (_this3.getVisible(newItem.Key)) {\n            return newItem;\n          }\n        });\n        if (_immutable.List.isList(_items)) {\n          _items = _items.toJS();\n        }\n        var visible = _this3.getVisible(id, vi);\n        var locked = _this3.getLocked(id, l);\n        var operationStyle = item.get(_serverproperties.OPERATION_STYELE);\n        // 没设置下拉项dropDownItems 直接为undefined 这种场景不可隐藏\n        var noNeedShow = item.get('items') && ((_items2 = _items) === null || _items2 === void 0 ? void 0 : _items2.length) === 0 && (operationStyle === 2 || !operationStyle && !opk); // 如果是交互风格是下拉或者交互风格是默认并无操作代码\n\n        return visible && !noNeedShow ? /*#__PURE__*/_react[\"default\"].createElement(_KDAdvConToolbarItem[\"default\"], {\n          itemModel: itemModel,\n          model: itemModel,\n          pageId: itemModel === null || itemModel === void 0 ? void 0 : itemModel.pageId,\n          title: text,\n          key: id,\n          id: id,\n          type: type,\n          index: index,\n          OperationKey: opk,\n          replacedOperationKey: replacedOperationKey,\n          DropdownItems: _items,\n          style: {\n            color: fc,\n            background: bc\n          },\n          onDropDownClick: _this3.handleClick,\n          onClick: function onClick(e) {\n            return _this3.handleClick(id, opk);\n          },\n          getVisible: _this3.getVisible,\n          getLocked: _this3.getLocked,\n          locked: locked,\n          toolbarLoading: toolbarLoading,\n          containerKey: model.key\n        }) : null;\n      }) : null, isAddMoreBtn && /*#__PURE__*/_react[\"default\"].createElement(_kdesign.Dropdown, {\n        menu: Menu,\n        popperClassName: \"kd-cq-dropdown kd-cq-dropdown-select-type kd-cq-toolbar-more-dropdown\",\n        trigger: \"click\",\n        visible: this.state.dropdownVisible,\n        onVisibleChange: this.handleDropdownVisibleChange\n      }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        className: (0, _classnames[\"default\"])(_AdvConToolbar2[\"default\"]['more-btn'], {\n          'link-color': !this.getLocked()\n        }),\n        style: {\n          color: color,\n          background: background\n        },\n        ref: this.moreBtnRef\n      }, \"\\xB7\\xB7\\xB7\"))), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        className: _AdvConToolbar2[\"default\"]['div-placeholder'],\n        style: {\n          width: placeholderWidth\n        }\n      }));\n    }\n  }]);\n  return KDAdvConToolbar;\n}(_react[\"default\"].Component), _KDAdvConToolbar.contextTypes = {\n  store: _propTypes[\"default\"].object\n}, _KDAdvConToolbar)) || _class) || _class);\nvar _default = exports[\"default\"] = KDAdvConToolbar;\n\n//# sourceURL=webpack://bos-platform/./src/component/web/KDAdvConToolbar.js?");

/***/ }),

/***/ "./src/component/web/KDAdvConToolbarItem.js":
/*!**************************************************!*\
  !*** ./src/component/web/KDAdvConToolbarItem.js ***!
  \**************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.assign.js */ \"../../node_modules/core-js/modules/es.object.assign.js\");\n__webpack_require__(/*! core-js/modules/es.object.create.js */ \"../../node_modules/core-js/modules/es.object.create.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.get-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.set-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.set-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.reflect.construct.js */ \"../../node_modules/core-js/modules/es.reflect.construct.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\n__webpack_require__(/*! core-js/modules/es.function.name.js */ \"../../node_modules/core-js/modules/es.function.name.js\");\nvar _react = _interopRequireDefault(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _reactDom = _interopRequireDefault(__webpack_require__(/*! react-dom */ \"webpack/sharing/consume/default/react-dom/react-dom?418d\"));\nvar _AdvConToolbar = __webpack_require__(/*! ./base/AdvConToolbar */ \"./src/component/web/base/AdvConToolbar.js\");\nvar _keyCodeTool = __webpack_require__(/*! @/util/keyCodeTool */ \"./src/util/keyCodeTool.js\");\nvar _UpdateShortCutWrap = _interopRequireDefault(__webpack_require__(/*! @/component/common/UpdateShortCutWrap */ \"./src/component/common/UpdateShortCutWrap.js\"));\nvar _AttachDataWrap = _interopRequireDefault(__webpack_require__(/*! @/component/common/AttachDataWrap */ \"./src/component/common/AttachDataWrap.js\"));\nvar _Slot = _interopRequireDefault(__webpack_require__(/*! @/component/common/Slot */ \"./src/component/common/Slot.jsx\"));\nvar _tooltipsUtil = __webpack_require__(/*! @/util/tooltipsUtil */ \"./src/util/tooltipsUtil.js\");\nvar _immutable = __webpack_require__(/*! immutable */ \"webpack/sharing/consume/default/immutable/immutable?f2ca\");\nvar _class;\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n// @VisibleLockWrap(false)\nvar KDAdvConToolbarItem = (0, _AttachDataWrap[\"default\"])(_class = (0, _UpdateShortCutWrap[\"default\"])(_class = /*#__PURE__*/function (_React$Component) {\n  _inherits(KDAdvConToolbarItem, _React$Component);\n  function KDAdvConToolbarItem(props) {\n    var _this;\n    _classCallCheck(this, KDAdvConToolbarItem);\n    _this = _callSuper(this, KDAdvConToolbarItem, [props]);\n    _this.handleClick = _this.handleClick.bind(_assertThisInitialized(_this));\n    _this.handleDropDownClick = _this.handleDropDownClick.bind(_assertThisInitialized(_this));\n    _this.state = {\n      tipsConfig: null\n    };\n    return _this;\n  }\n  _createClass(KDAdvConToolbarItem, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props = this.props,\n        model = _this$props.model,\n        isFromCardRow = _this$props.isFromCardRow,\n        data = _this$props.data,\n        option = _this$props.option,\n        containerKey = _this$props.containerKey;\n      var tips = (0, _tooltipsUtil.getRowPropertyTips)({\n        model: model,\n        isFromCardRow: isFromCardRow,\n        data: data,\n        option: option\n      });\n      if (tips) this.updateTipsConfig(model.pageId, containerKey, tips);\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      var _nextProps$model;\n      var _this$props2 = this.props,\n        model = _this$props2.model,\n        isFromCardRow = _this$props2.isFromCardRow,\n        data = _this$props2.data,\n        option = _this$props2.option;\n      var tips = (0, _tooltipsUtil.getRowPropertyTips)({\n        model: model,\n        isFromCardRow: isFromCardRow,\n        data: data,\n        option: option\n      });\n      var nextTips = (0, _tooltipsUtil.getRowPropertyTips)({\n        model: nextProps.model,\n        isFromCardRow: nextProps.isFromCardRow,\n        data: nextProps.data,\n        option: nextProps.option\n      });\n      if (!(0, _immutable.is)(tips, nextTips)) this.updateTipsConfig((_nextProps$model = nextProps.model) === null || _nextProps$model === void 0 ? void 0 : _nextProps$model.pageId, nextProps.containerKey, nextTips);\n    }\n  }, {\n    key: \"updateTipsConfig\",\n    value: function updateTipsConfig(pageId, id, tips) {\n      if (!tips) {\n        // 可以通过u指令设置tips为空\n        this.setState({\n          tipsConfig: null\n        });\n        return;\n      }\n      var tipsConfig = this.state.tipsConfig;\n      if (!tipsConfig) {\n        tipsConfig = (0, _tooltipsUtil.createTipsConfig)(pageId, id);\n        this.setState({\n          tipsConfig: tipsConfig\n        });\n      }\n      (0, _tooltipsUtil.saveTipsInfo)(tipsConfig, tips);\n    }\n\n    // 工具栏添加上传按钮\n  }, {\n    key: \"handleClick\",\n    value: function handleClick(id, opk) {\n      var _this$props3 = this.props,\n        locked = _this$props3.locked,\n        onClick = _this$props3.onClick;\n      if (locked) return;\n      onClick(id, opk);\n    }\n  }, {\n    key: \"handleDropDownClick\",\n    value: function handleDropDownClick(id, opk) {\n      var onDropDownClick = this.props.onDropDownClick;\n      // 这里的locked 是一级工具栏的锁定，非下拉工具栏项的锁定。下拉工具栏项如锁定，不会走到这个方法\n      // if (locked) return\n      onDropDownClick(id, opk);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _getkeyCodeInfoByOpk;\n      var _this$props4 = this.props,\n        OperationKey = _this$props4.OperationKey,\n        replacedOperationKey = _this$props4.replacedOperationKey,\n        type = _this$props4.type;\n      var tipsConfig = this.state.tipsConfig;\n      var shortCutTips = (_getkeyCodeInfoByOpk = (0, _keyCodeTool.getkeyCodeInfoByOpk)(OperationKey)) === null || _getkeyCodeInfoByOpk === void 0 ? void 0 : _getkeyCodeInfoByOpk.name;\n      var slot;\n      if (tipsConfig) {\n        slot = /*#__PURE__*/_react[\"default\"].createElement(_Slot[\"default\"], {\n          tips: tipsConfig\n        });\n      }\n      return /*#__PURE__*/_react[\"default\"].createElement(_AdvConToolbar.AdvConToolbarItem, _extends({\n        Name: this.props.title,\n        OperationKey: OperationKey,\n        replacedOperationKey: replacedOperationKey,\n        isRunTime: true,\n        type: type,\n        DropdownItems: this.props.DropdownItems,\n        onDropDownClick: this.handleDropDownClick,\n        onClick: this.handleClick,\n        getVisible: this.props.getVisible,\n        getLocked: this.props.getLocked,\n        locked: this.props.locked,\n        style: this.props.style,\n        id: this.props.id,\n        pageId: this.props.pageId,\n        shortCutTips: shortCutTips,\n        toolbarLoading: this.props.toolbarLoading,\n        slot: slot\n      }, this.props.attachData));\n    }\n  }]);\n  return KDAdvConToolbarItem;\n}(_react[\"default\"].Component)) || _class) || _class;\nvar _default = exports[\"default\"] = KDAdvConToolbarItem;\n\n//# sourceURL=webpack://bos-platform/./src/component/web/KDAdvConToolbarItem.js?");

/***/ }),

/***/ "./src/component/web/KDAdvGrid.js":
/*!****************************************!*\
  !*** ./src/component/web/KDAdvGrid.js ***!
  \****************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.create.js */ \"../../node_modules/core-js/modules/es.object.create.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.get-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.set-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.set-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.reflect.construct.js */ \"../../node_modules/core-js/modules/es.reflect.construct.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.array.for-each.js */ \"../../node_modules/core-js/modules/es.array.for-each.js\");\n__webpack_require__(/*! core-js/modules/es.array.includes.js */ \"../../node_modules/core-js/modules/es.array.includes.js\");\n__webpack_require__(/*! core-js/modules/es.array.map.js */ \"../../node_modules/core-js/modules/es.array.map.js\");\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\n__webpack_require__(/*! core-js/modules/es.object.assign.js */ \"../../node_modules/core-js/modules/es.object.assign.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.string.includes.js */ \"../../node_modules/core-js/modules/es.string.includes.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ \"../../node_modules/core-js/modules/web.dom-collections.for-each.js\");\nvar _react = _interopRequireDefault(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _classnames = _interopRequireDefault(__webpack_require__(/*! classnames */ \"../../node_modules/classnames/index.js\"));\nvar _immutable = __webpack_require__(/*! immutable */ \"webpack/sharing/consume/default/immutable/immutable?f2ca\");\nvar _global = __webpack_require__(/*! @/global */ \"./src/global/index.js\");\nvar _BillList = _interopRequireDefault(__webpack_require__(/*! ./base/BillList */ \"./src/component/web/base/BillList.jsx\"));\nvar _componentFactory = _interopRequireDefault(__webpack_require__(/*! ../../factory/componentFactory */ \"./src/factory/componentFactory.js\"));\nvar _componentutil = __webpack_require__(/*! ../../util/componentutil */ \"./src/util/componentutil.js\");\nvar _KDAdvGrid = _interopRequireDefault(__webpack_require__(/*! ./KDAdvGrid.less */ \"./src/component/web/KDAdvGrid.less\"));\nvar _VisibleLockWrap = _interopRequireDefault(__webpack_require__(/*! ../common/VisibleLockWrap */ \"./src/component/common/VisibleLockWrap.js\"));\nvar _serverproperties = __webpack_require__(/*! ../../constant/serverproperties */ \"./src/constant/serverproperties.js\");\nvar _AttachDataWrap = _interopRequireDefault(__webpack_require__(/*! ../common/AttachDataWrap */ \"./src/component/common/AttachDataWrap.js\"));\nvar _appModelFunction = __webpack_require__(/*! ../../model/appModelFunction */ \"./src/model/appModelFunction.js\");\nvar _gridaction = __webpack_require__(/*! ../../action/gridaction */ \"./src/action/gridaction.js\");\nvar _const = __webpack_require__(/*! ../../constant/const */ \"./src/constant/const.js\");\nvar _gridConst = __webpack_require__(/*! ../../constant/gridConst */ \"./src/constant/gridConst.js\");\nvar _memoryCacher = __webpack_require__(/*! @/model/memoryCacher */ \"./src/model/memoryCacher.js\");\nvar _console = _interopRequireDefault(__webpack_require__(/*! @/api/console */ \"./src/api/console.js\"));\nvar _intlApi = __webpack_require__(/*! @/i18n/intlApi */ \"./src/i18n/intlApi.js\");\nvar _AdvGridContext = _interopRequireDefault(__webpack_require__(/*! @/component/common/AdvGridContext */ \"./src/component/common/AdvGridContext.js\"));\nvar _dec, _class;\n/**\n * 列表控件(包含表格、卡片视图)\n */\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nvar KDBillList = (_dec = (0, _VisibleLockWrap[\"default\"])(true), (0, _AttachDataWrap[\"default\"])(_class = _dec(_class = /*#__PURE__*/function (_React$Component) {\n  _inherits(KDBillList, _React$Component);\n  function KDBillList(props) {\n    var _props$model;\n    var _this;\n    _classCallCheck(this, KDBillList);\n    _this = _callSuper(this, KDBillList, [props]);\n    _this.getIsOutMaxDataCount = function () {\n      var _this$props = _this.props,\n        model = _this$props.model,\n        dispatch = _this$props.dispatch;\n      var _this$props$model = _this.props.model,\n        key = _this$props$model.key,\n        pageId = _this$props$model.pageId;\n      var queryLastTimestamp = window.performance.now() + '';\n      (0, _memoryCacher.setPageData)(pageId, [key, _gridConst.QUERY_EXCEED_MAX_COUNT_LAST_TIMESTAMP], queryLastTimestamp);\n      dispatch((0, _gridaction.invokeControlMethodSingle)(model, 'queryExceedMaxCount', [queryLastTimestamp], true));\n      (0, _memoryCacher.setPageData)(pageId, [key, 'toolbarFakerCount'], true);\n    };\n    // 是否超过最大条数请求回调函数\n    _this.setExceedMaxCountCbFun = function (isExceedMaxCount) {\n      var _this$props$model2 = _this.props.model,\n        pageId = _this$props$model2.pageId,\n        key = _this$props$model2.key;\n      if ((0, _appModelFunction.pageIsExist)(pageId)((0, _global.getGlobalState)())) {\n        if (isExceedMaxCount === false) {\n          // 不超过最大条数，数据直接返回了，不需要再请求一次\n          // this.props.dispatch(invokeControlMethodSingle(this.props.model, 'getRealCount', [], true))\n          // 很多地方的状态跟getRealCount结果相关联，这里需要存memoryCache\n          (0, _memoryCacher.setPageData)(pageId, [key, '__cbListener__', 'getRealCount'], {\n            success: true\n          });\n        } else if (_this.props.model.getDataProperty(['value', 'isgetsumdata']) === true) {\n          // 没发获取真实条数的情况下直接发计算合计请求\n          (0, _memoryCacher.setPageData)(pageId, [key, 'getSumData'], true);\n        }\n      }\n    };\n    _this.getListView = function (data) {\n      // 获得后端设置展示的视图\n      var viewName = data[0];\n      var model = _this.props.model;\n      var viewIndex = 0; // 默认选择第一个视图\n      model.meta.get(_serverproperties.ITEMS, (0, _immutable.List)()).forEach(function (meta, index) {\n        var viewId = meta.get('id');\n        if (viewId === viewName) {\n          viewIndex = index;\n        }\n      });\n      return viewIndex;\n    };\n    _this.getPlainText = function (r, originCode, pks) {\n      var model = _this.props.model;\n      _this.props.dispatch((0, _gridaction.invokeControlMethodOnly)({\n        pageId: model.pageId,\n        key: model.key\n      }, 'getPlainText', [r, originCode, pks]));\n    };\n    _this.state = {\n      activeIndex: -1,\n      viewType: '' // 视图类型名称(eg: grid,cardview,qingview)\n    };\n    _this.getMergeGroupRk = null; // 获取行融合主组的rowkey的方法\n    _this.renderViewTypeList = []; // 已经渲染过的视图类型\n    _this.setListView = _this.setListView.bind(_assertThisInitialized(_this));\n    _this.pkFieldNames = (_props$model = props.model) === null || _props$model === void 0 || (_props$model = _props$model.getMetaProperty('entryentities')) === null || _props$model === void 0 ? void 0 : _props$model.map(function (entryentity) {\n      return entryentity.get('pkFieldName');\n    });\n    // this._useToolbarGetRealCount = _.debounce(this.useToolbarGetRealCount, 300, { trailing: true })\n    return _this;\n  }\n  _createClass(KDBillList, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var model = this.props.model;\n      var pageId = model.pageId,\n        key = model.key;\n      var activeListView = (0, _memoryCacher.getPageData)(pageId, [key, 'activeListView']);\n      var nactived = activeListView ? this.getListView(activeListView) : this.getActiveItem(this.props);\n      var activeIndex = nactived === -1 ? 0 : nactived;\n      this.setState(Object.assign({}, this.state, {\n        activeIndex: activeIndex,\n        viewType: model.meta.getIn([_serverproperties.ITEMS, activeIndex, 'type'])\n      }), function () {\n        // 设置忙时提醒 //supportMethod:['']\n        // this.props.dispatch(convertAppModelFunctionAction(setCtlMetaProperty(pageId, key, 'busyTip', { zh_CN: '加载中', supportMethod: ['setRowSort', 'getGridDataByFilter', 'next', 'previous', 'setPageIndex', 'setPageRows'] })))\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var model = this.props.model;\n      var pageId = model.pageId,\n        key = model.key;\n      // 之前懒加载会走一遍 receiveProps，懒加载重构后，不会走receiveProps，需要把计算activeindex的逻辑提前\n      this.setActiveIndexFromMeta(this.props);\n      this.setListViewHandler = (0, _memoryCacher.addDataChangeListener)(pageId, [key, 'activeListView'], this.setListView);\n      this.setRealCountHander = (0, _memoryCacher.addDataChangeListener)(pageId, [key, 'setExceedMaxCount'], this.setExceedMaxCountCbFun);\n      this.getRealCountHandle();\n      this.setLoadding(model);\n    }\n  }, {\n    key: \"setActiveIndexFromMeta\",\n    value: function setActiveIndexFromMeta(props) {\n      var nactived = this.getActiveItem(props, this.state.activeIndex);\n      var activeIndex = nactived === -1 ? 0 : nactived;\n      if (this.state.activeIndex != nactived) {\n        this.setState(Object.assign({}, this.state, {\n          activeIndex: activeIndex,\n          viewType: this.props.model.meta.getIn([_serverproperties.ITEMS, activeIndex, 'type'])\n        }));\n      }\n    }\n  }, {\n    key: \"setLoadding\",\n    value: function setLoadding(model) {\n      var text = (0, _intlApi.getLangMsg)('BusyLayer.loading');\n      var userLocale = model.getUserLocale();\n      var busyTipObj = _defineProperty(_defineProperty(_defineProperty({}, userLocale, text), \"timeout\", {\n        time: 600,\n        methods: ['entryRowClick']\n      }), \"supportMethod\", ['setRowSort', 'getGridDataByFilter', 'next', 'previous', 'setPageIndex', 'setPageRows', 'selectAllRows', 'entryRowClick', 'doubleClickRow', 'itemClick', 'getRowData', 'selectPageAllRows', 'clearPageSelection', 'addRowSelection', 'clearRowSelection']);\n      (0, _memoryCacher.setControlBusyTip)(model.pageId, model.key, busyTipObj);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.setListViewHandler && this.setListViewHandler();\n      this.setRealCountHander && this.setRealCountHander();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var model = this.props.model;\n      // TIME_STAMP_FRESH 改变说明u指令修改了值，前后数据发生了变化，过滤掉数据不变时组件多次刷新时反复请求\n      var isTimeStampChange = model && prevProps.model && model.getDataProperty([_const.TIME_STAMP_FRESH]) !== prevProps.model.getDataProperty([_const.TIME_STAMP_FRESH]);\n      if (isTimeStampChange) {\n        this.getRealCountHandle();\n      }\n      var prevModel = prevProps.model;\n      if (!(0, _immutable.is)(prevModel.getMetaProperty('entryentities'), model.getMetaProperty('entryentities'))) {\n        var _model$getMetaPropert;\n        this.pkFieldNames = (_model$getMetaPropert = model.getMetaProperty('entryentities')) === null || _model$getMetaPropert === void 0 ? void 0 : _model$getMetaPropert.map(function (entryentity) {\n          return entryentity.get('pkFieldName');\n        });\n      }\n    }\n  }, {\n    key: \"getRealCountHandle\",\n    value: function getRealCountHandle() {\n      var model = this.props.model;\n      var pageId = model.pageId,\n        key = model.key;\n      var config = model.getFormConfig() || {};\n      var isIndexMode = model.getMetaProperty('isindexmode') || false;\n      if ((!config.isf7 || isIndexMode) && model.getDataProperty(['value', 'isgetrealcount']) === true) {\n        // 自定义取数走原来的流程，直接取真实条数\n        if (model.getDataProperty(['value', 'iscustomquery']) === true) {\n          this.props.dispatch((0, _gridaction.invokeControlMethodSingle)(this.props.model, 'getRealCount', [], true));\n          (0, _memoryCacher.setPageData)(pageId, [key, 'toolbarFakerCount'], true);\n        } else {\n          _console[\"default\"].log('componentDidUpdate 执行请求列表记录数和页数');\n          //  this.useToolbarGetRealCount()\n          this.getIsOutMaxDataCount();\n        }\n      } else if (model.getDataProperty(['value', 'isgetsumdata']) === true) {\n        // 没发获取真实条数的情况下直接发计算合计请求\n        (0, _memoryCacher.setPageData)(pageId, [key, 'getSumData'], true);\n      }\n    }\n  }, {\n    key: \"getActiveItem\",\n    value: function getActiveItem(props, curActive) {\n      var nactived = -1;\n      var model = props.model;\n      var defaultView = model.meta.get(_serverproperties.DEFAULT_VIEW, null);\n      var items = model.meta.get(_serverproperties.ITEMS, (0, _immutable.List)());\n      for (var item = 0; item < items.size; item++) {\n        var meta = items.get(item);\n        if (props.getVisible(model, meta.get(_serverproperties.ID), meta.get(_serverproperties.VISIBLE_CTRL))) {\n          if (curActive != null && item === curActive) return item;\n          if (nactived == -1) {\n            nactived = item;\n          }\n          if (defaultView) {\n            // 有默认取默认，无默认取第一\n            if (meta.get(_serverproperties.ID) == defaultView) {\n              nactived = item;\n            }\n          }\n        }\n      }\n      return nactived;\n    }\n  }, {\n    key: \"setListView\",\n    value: function setListView(data) {\n      // 后端设置展示的视图\n      this.setState({\n        activeIndex: this.getListView(data)\n      });\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      this.setActiveIndexFromMeta(nextProps);\n    }\n  }, {\n    key: \"activeView\",\n    value: function activeView(index, viewType, viewId) {\n      this.setState({\n        activeIndex: index,\n        viewType: viewType\n      });\n      this.props.dispatch((0, _gridaction.activeView)(this.props.model, [viewId]));\n    }\n  }, {\n    key: \"renderToolBar\",\n    value: function renderToolBar() {\n      var _this2 = this;\n      var array = [];\n      var model = this.props.model;\n      if (model.meta.get(_serverproperties.ITEMS, (0, _immutable.List)()).count() < 2) {\n        return null;\n      } // 视图总量少于2个，则不显示\n\n      var visibleViewCount = 0; // 可见视图的数量\n      model.meta.get(_serverproperties.ITEMS).forEach(function (meta, index) {\n        if (_this2.props.getVisible(model, meta.get(_serverproperties.ID), meta.get(_serverproperties.VISIBLE_CTRL))) {\n          visibleViewCount += 1;\n        } else {\n          return;\n        }\n        var viewType = meta.get('type');\n        var viewId = meta.get('id');\n        if (viewType === 'grid') {\n          array.push( /*#__PURE__*/_react[\"default\"].createElement(\"li\", {\n            key: meta.get('id'),\n            className: _this2.state.activeIndex === index ? 'theme-fc' : null,\n            onClick: function onClick() {\n              return _this2.activeView(index, viewType, viewId);\n            }\n          }, /*#__PURE__*/_react[\"default\"].createElement(\"i\", {\n            className: \"kdfont kdfont-shitu_liebiao3 kd-hover-color\"\n          })));\n        } else if (viewType === 'cardview') {\n          array.push( /*#__PURE__*/_react[\"default\"].createElement(\"li\", {\n            key: meta.get('id'),\n            className: _this2.state.activeIndex === index ? 'theme-fc' : null,\n            onClick: function onClick() {\n              return _this2.activeView(index, viewType, viewId);\n            }\n          }, /*#__PURE__*/_react[\"default\"].createElement(\"i\", {\n            className: \"kdfont kdfont-shitu_kapian2 kd-hover-color\"\n          })));\n        } else if (viewType === 'qingview') {\n          array.push( /*#__PURE__*/_react[\"default\"].createElement(\"li\", {\n            key: meta.get('id'),\n            className: _this2.state.activeIndex === index ? 'theme-fc' : null,\n            onClick: function onClick() {\n              return _this2.activeView(index, viewType, viewId);\n            }\n          }, /*#__PURE__*/_react[\"default\"].createElement(\"i\", {\n            className: \"kdfont kdfont-shitu_tubiao3 kd-hover-color\"\n          })));\n        } else if (viewType === 'customview') {\n          array.push( /*#__PURE__*/_react[\"default\"].createElement(\"li\", {\n            key: meta.get('id'),\n            className: _this2.state.activeIndex === index ? 'theme-fc' : null,\n            onClick: function onClick() {\n              return _this2.activeView(index, viewType, viewId);\n            }\n          }, /*#__PURE__*/_react[\"default\"].createElement(\"i\", {\n            className: \"kdfont kdfont-qudao kd-hover-color\"\n          })));\n        }\n      });\n      if (visibleViewCount < 2) return null; // 可见视图少与2个，则不显示\n\n      return /*#__PURE__*/_react[\"default\"].createElement(\"ul\", {\n        className: _KDAdvGrid[\"default\"].toolbar\n      }, array);\n    }\n  }, {\n    key: \"renderPanel\",\n    value: function renderPanel(props) {\n      var _this3 = this;\n      var children = [];\n      var model = this.props.model;\n      var advSty = {};\n      model.meta.get('items', (0, _immutable.List)()).forEach(function (meta, index) {\n        advSty = index != _this3.state.activeIndex ? {\n          display: 'none'\n        } : {};\n        // isActived：是否是当前激活的视图\n        // 卡片视图不显示不做渲染\n        var type = meta.get('type');\n        var isTypeInList = _this3.renderViewTypeList.includes(type);\n        // 没渲染过而且不是当前激活的视图，直接return\n        if (!isTypeInList && index !== _this3.state.activeIndex) return;\n        !isTypeInList && _this3.renderViewTypeList.push(type);\n        children.push( /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n          className: _KDAdvGrid[\"default\"].panel + (advSty.display === 'none' ? ' hidden' : ''),\n          style: advSty,\n          key: index\n        }, /*#__PURE__*/_react[\"default\"].cloneElement((0, _componentFactory[\"default\"])(model.pageId, meta, (0, _global.getGlobalState)()), {\n          parentModel: model,\n          isActived: index === _this3.state.activeIndex\n        })));\n      });\n      return children;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n      var model = this.props.model;\n      var items = model.meta.get('items');\n      if (!items) {\n        return null;\n      }\n      // const style = getCommonStyle(model)\n      var commonClass = (0, _componentutil.getCommonClass)(model);\n      var isFloatModel = (0, _componentutil.getComponentDataProperty)(model, 'float', 'float', false); // 模式切换按钮是否悬浮显示\n      isFloatModel = true; // 暂时固定为悬浮显示\n      var switchOffset = (0, _componentutil.getComponentDataProperty)(model, 'switchOffset', 'switchOffset', false); // 不同视图切换按钮的偏移高度(要求正数,且数字越大,偏移越高)\n\n      var style = Object.assign({}, (0, _componentutil.getCommonStyle)(model), this.props.style);\n      // test data\n      // isFloatModel = true\n      // switchOffset=15;\n      return /*#__PURE__*/_react[\"default\"].createElement(_AdvGridContext[\"default\"], {\n        getPlainText: this.getPlainText,\n        pkFieldNames: this.pkFieldNames\n      }, /*#__PURE__*/_react[\"default\"].createElement(_BillList[\"default\"], _extends({\n        style: style,\n        rendPanel: function rendPanel(props) {\n          return _this4.renderPanel(props);\n        },\n        rendToolbar: function rendToolbar() {\n          return _this4.renderToolBar();\n        },\n        className: (0, _classnames[\"default\"])('kd-cq-control kd-cq-bill-list', _KDAdvGrid[\"default\"]['bill-list']),\n        id: model.key\n      }, commonClass, {\n        isFloatModel: isFloatModel,\n        switchOffset: switchOffset,\n        viewType: this.state.viewType\n      }, this.props.attachData)));\n    }\n  }]);\n  return KDBillList;\n}(_react[\"default\"].Component)) || _class) || _class);\nvar _default = exports[\"default\"] = KDBillList;\n\n//# sourceURL=webpack://bos-platform/./src/component/web/KDAdvGrid.js?");

/***/ }),

/***/ "./src/component/web/KDAttachmentPanel.jsx":
/*!*************************************************!*\
  !*** ./src/component/web/KDAttachmentPanel.jsx ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.assign.js */ \"../../node_modules/core-js/modules/es.object.assign.js\");\n__webpack_require__(/*! core-js/modules/es.object.create.js */ \"../../node_modules/core-js/modules/es.object.create.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.get-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.set-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.set-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.reflect.construct.js */ \"../../node_modules/core-js/modules/es.reflect.construct.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\nvar _react = _interopRequireDefault(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _ComposeEnhance = _interopRequireDefault(__webpack_require__(/*! ../common/ComposeEnhance */ \"./src/component/common/ComposeEnhance.js\"));\nvar _PropsComparison = _interopRequireDefault(__webpack_require__(/*! ../common/PropsComparison */ \"./src/component/common/PropsComparison.js\"));\nvar _componentutil = __webpack_require__(/*! ../../util/componentutil */ \"./src/util/componentutil.js\");\nvar _Attachment = _interopRequireDefault(__webpack_require__(/*! ./base/Attachment */ \"./src/component/web/base/Attachment/index.js\"));\nvar _VisibleLockWrap = _interopRequireDefault(__webpack_require__(/*! ../common/VisibleLockWrap */ \"./src/component/common/VisibleLockWrap.js\"));\nvar _attachmentpanelaction = __webpack_require__(/*! ../../action/attachmentpanelaction */ \"./src/action/attachmentpanelaction.js\");\nvar _tooltipaction = __webpack_require__(/*! ../../action/tooltipaction */ \"./src/action/tooltipaction.js\");\nvar _action = __webpack_require__(/*! ../../action/action */ \"./src/action/action.js\");\nvar _client = __webpack_require__(/*! @/action/actionname/global/system/client */ \"./src/action/actionname/global/system/client/index.js\");\nvar _immutable = __webpack_require__(/*! immutable */ \"webpack/sharing/consume/default/immutable/immutable?f2ca\");\nvar _AttachDataWrap = _interopRequireDefault(__webpack_require__(/*! ../common/AttachDataWrap */ \"./src/component/common/AttachDataWrap.js\"));\nvar _Slot = _interopRequireDefault(__webpack_require__(/*! @/component/common/Slot */ \"./src/component/common/Slot.jsx\"));\nvar _serverproperties = __webpack_require__(/*! ../../constant/serverproperties */ \"./src/constant/serverproperties.js\");\nvar _attachmentUtils = __webpack_require__(/*! @/util/attachmentUtils */ \"./src/util/attachmentUtils.js\");\nvar _const = __webpack_require__(/*! @/constant/const */ \"./src/constant/const.js\");\nvar _attachmentConst = __webpack_require__(/*! @/constant/attachmentConst */ \"./src/constant/attachmentConst.js\");\nvar _DragSplitScreenWrap = _interopRequireDefault(__webpack_require__(/*! @/component/common/DragSplitScreenWrap */ \"./src/component/common/DragSplitScreenWrap.js\"));\nvar _tooltipsUtil = __webpack_require__(/*! @/util/tooltipsUtil */ \"./src/util/tooltipsUtil.js\");\nvar _serverproperties2 = __webpack_require__(/*! @/constant/serverproperties */ \"./src/constant/serverproperties.js\");\nvar _dec, _dec2, _dec3, _class;\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nvar KDAttachmentPanel = (_dec = (0, _VisibleLockWrap[\"default\"])(false), _dec2 = (0, _ComposeEnhance[\"default\"])(_PropsComparison[\"default\"]), _dec3 = (0, _DragSplitScreenWrap[\"default\"])(_const.SPLIT_SCREEN_TYPE_ATTACHMENT_PANEL), _dec(_class = _dec2(_class = _dec3(_class = (0, _AttachDataWrap[\"default\"])(_class = /*#__PURE__*/function (_React$Component) {\n  _inherits(KDAttachmentPanel, _React$Component);\n  function KDAttachmentPanel(props) {\n    var _this;\n    _classCallCheck(this, KDAttachmentPanel);\n    _this = _callSuper(this, KDAttachmentPanel, [props]);\n    _this._getLocked = function () {\n      return _this.props.getLocked(_this.props.model);\n    };\n    _this.beforeUpload = function (files) {\n      _this.props.dispatch((0, _attachmentpanelaction.beforeUpload)(_this.props.model, files));\n    };\n    _this.beforeDownload = function (files) {\n      _this.props.dispatch((0, _attachmentpanelaction.beforeDownload)(_this.props.model, files));\n    };\n    _this.uploadFile = function (files) {\n      _this.props.dispatch((0, _attachmentpanelaction.uploadFile)(_this.props.model, files));\n    };\n    _this.afterUpload = function (files) {\n      _this.props.dispatch((0, _attachmentpanelaction.reportUploadResult)(_this.props.model, files));\n    };\n    _this.removeFile = function (files) {\n      _this.props.dispatch((0, _attachmentpanelaction.removeFile)(_this.props.model, files));\n    };\n    _this.remarkClick = function (files) {\n      _this.props.dispatch((0, _attachmentpanelaction.remarkClick)(_this.props.model, files));\n    };\n    _this.confirmDelete = function (args) {\n      _this.props.dispatch((0, _attachmentpanelaction.comfirmDelete)(_this.props.model, args));\n    };\n    _this.attachOperationCount = function (args) {\n      _this.props.dispatch((0, _attachmentpanelaction.attachOperationCount)(_this.props.model, args));\n    };\n    // 自定义操作按钮点击事件\n    _this.attachOperaClick = function (args) {\n      _this.props.dispatch((0, _attachmentpanelaction.attachOperaClick)(_this.props.model, args));\n    };\n    _this.rename = function (args) {\n      _this.props.dispatch((0, _attachmentpanelaction.rename)(_this.props.model, args));\n    };\n    _this.dragFile = function (args) {\n      _this.props.dispatch((0, _attachmentpanelaction.dragFile)(_this.props.model, args));\n    };\n    _this.updateControlValue = function (value) {\n      var _this$props = _this.props,\n        model = _this$props.model,\n        dispatch = _this$props.dispatch;\n      var pageId = model.pageId,\n        key = model.key;\n      (0, _action.mergeState)(_client.UPDATE_CONTROL_VALUE, pageId, {\n        key: key,\n        value: (0, _immutable.fromJS)(value),\n        updateData: false\n      }, dispatch);\n    };\n    _this.handlePreviewInNewTab = function (args) {\n      var openByNewTab = _this.attachmentConfig.openByNewTab;\n      if (!openByNewTab) return;\n      _this.props.dispatch((0, _attachmentpanelaction.previewInNewTab)(_this.props.model, [args]));\n    };\n    _this.updateTipsConfig = _this.updateTipsConfig.bind(_assertThisInitialized(_this));\n    _this.state = {\n      tipsConfig: null\n    };\n    return _this;\n  }\n  _createClass(KDAttachmentPanel, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var model = this.props.model;\n      var tips = (0, _tooltipsUtil.getTips)(model);\n      if (tips) this.updateTipsConfig(model.pageId, model.key, tips);\n      this.attachmentConfig = (0, _componentutil.getAttachInfoFromRootConfig)();\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      var _nextProps$model, _nextProps$model2;\n      var tips = (0, _tooltipsUtil.getTips)(this.props.model);\n      var nextTips = (0, _tooltipsUtil.getTips)(nextProps.model);\n      if (!(0, _immutable.is)(tips, nextTips)) this.updateTipsConfig((_nextProps$model = nextProps.model) === null || _nextProps$model === void 0 ? void 0 : _nextProps$model.pageId, (_nextProps$model2 = nextProps.model) === null || _nextProps$model2 === void 0 ? void 0 : _nextProps$model2.key, nextTips);\n    }\n  }, {\n    key: \"updateTipsConfig\",\n    value: function updateTipsConfig(pageId, id, tips) {\n      if (!tips) {\n        // 可以通过u指令设置tips为空\n        this.setState({\n          tipsConfig: null\n        });\n        return;\n      }\n      var tipsConfig = this.state.tipsConfig;\n      if (!tipsConfig) {\n        tipsConfig = (0, _tooltipsUtil.createTipsConfig)(pageId, id);\n        this.setState({\n          tipsConfig: tipsConfig\n        });\n      }\n      (0, _tooltipsUtil.saveTipsInfo)(tipsConfig, tips);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n        model = _this$props2.model,\n        dispatch = _this$props2.dispatch;\n      var tipsConfig = this.state.tipsConfig;\n      var title = model.getMetaLocaleProperty('text');\n      var extName = model.getMetaProperty('ext');\n      // 可折叠\n      var collapsible = model.getMetaProperty('collapsible');\n      // 默认折叠\n      var defaultCollapse = model.getMetaProperty('defaultcollapse');\n      // 显示上传人\n      var showCreator = model.getMetaProperty('sct');\n      // 显示上传时间\n      var showCreateDate = model.getMetaProperty('scd');\n      // 显示备注\n      var showMark = model.getMetaProperty('smk');\n      // 文件最大大小\n      var maxAtmSize = model.getMetaProperty('maxatmsize');\n      // server动态设置了折叠\n      var collapseCFlag = model.getDataProperty('collapseCFlag');\n      // 显示附件数量\n      var showAttachmentNum = model.getMetaProperty('san') || false;\n      // 最大附件数，默认值为0，不限制\n      var maxAtmCount = model.getMetaProperty('maxatmcount') || 0;\n      //  允许上传相同名字的文件，默认false\n      var checkDuplicateFileName = model.getMetaProperty('checkDuplicateFileName') || false;\n      //  显示图片缩略图，默认false\n      var showThumbnails = model.getMetaProperty('istn') || false;\n      var collapse = model.getDataProperty('collapse');\n      var displayData = model.getDataValue();\n      var dragble = model.getMetaProperty(_attachmentConst.DRAGBLE); // 是否可拖拽\n      // { attachmentserver, styleType } = model.getFormConfig(),\n      if (!this.attachmentConfig) this.attachmentConfig = (0, _componentutil.getAttachInfoFromRootConfig)();\n      var _this$attachmentConfi = this.attachmentConfig,\n        attachmentUploadMaxSize = _this$attachmentConfi.attachmentUploadMaxSize,\n        forbidfiletype = _this$attachmentConfi.forbidfiletype,\n        fileTypeWhiteList = _this$attachmentConfi.fileTypeWhiteList,\n        previewType = _this$attachmentConfi.previewType,\n        openByNewTab = _this$attachmentConfi.openByNewTab,\n        wpsAppId = _this$attachmentConfi.wpsAppId;\n      var style = (0, _componentutil.getCommonStyle)(model);\n      var _getCommonClass = (0, _componentutil.getCommonClass)(model),\n        Grow = _getCommonClass.Grow,\n        Shrink = _getCommonClass.Shrink,\n        AlignSelf = _getCommonClass.AlignSelf;\n      // 附件属性: 日期格式\n      var dateFormatter = (0, _componentutil.getComponentDataProperty)(model, _serverproperties.ATTACHMENT_DATE_FORMATTER, _serverproperties.ATTACHMENT_DATE_FORMATTER, false);\n\n      // 控制附件操作按钮是否默认显示，默认不显示false\n      var showOperaBut = (0, _componentutil.getComponentDataProperty)(model, _serverproperties.ATTACHMENT_SHOWOPERABUTTON, _serverproperties.ATTACHMENT_SHOWOPERABUTTON, false) || false;\n      var maxSize = (0, _attachmentUtils.getMaxSize)(maxAtmSize, attachmentUploadMaxSize);\n      var sortField = model.getMetaProperty('sortField') || _attachmentConst.ATTACHMENT_SORT_FIELD.FileName;\n      var sortType = model.getMetaProperty('sortType') || _attachmentConst.ATTACHMENT_SORT_TYPE.NoSort;\n      var slot;\n      if (tipsConfig) {\n        slot = /*#__PURE__*/_react[\"default\"].createElement(_Slot[\"default\"], {\n          tips: tipsConfig\n        });\n      }\n      var className = collapsible ? '' : 'kd-cq-container kd-cq-attachmentpanel';\n      var previewLimitSize = (0, _attachmentUtils.getPreviewLimitSize)();\n      var attachmentLifeCycle = (0, _attachmentUtils.getLifeCycle)(model.pageId, model.getMetaProperty(_serverproperties2.FIELD_TYPE));\n      var beforeDownloadFn = attachmentLifeCycle !== null && attachmentLifeCycle !== void 0 && attachmentLifeCycle.beforeDownload ? this.beforeDownload : null; // 下载前\n      var isFileEncrypt = attachmentLifeCycle === null || attachmentLifeCycle === void 0 ? void 0 : attachmentLifeCycle.fileEncrypt; // 文件下载加密\n      return /*#__PURE__*/_react[\"default\"].createElement(_Attachment[\"default\"], _extends({\n        id: model.key,\n        className: className,\n        model: model,\n        locale: model.getUserLocale(),\n        dispatch: dispatch,\n        disabled: this._getLocked(),\n        displayData: displayData,\n        beforeDownload: beforeDownloadFn,\n        beforeUpload: this.beforeUpload,\n        uploadFile: this.uploadFile,\n        afterUpload: this.afterUpload,\n        removeFile: this.removeFile,\n        remarkClick: this.remarkClick,\n        updateControlValue: this.updateControlValue,\n        style: style,\n        maxSize: maxSize,\n        Grow: Grow,\n        Shrink: Shrink,\n        AlignSelf: AlignSelf,\n        Collapsible: collapsible,\n        defaultCollapse: defaultCollapse,\n        collapseCFlag: collapseCFlag,\n        collapse: collapse,\n        extName: extName,\n        Name: title,\n        showCreator: showCreator,\n        showCreateDate: showCreateDate,\n        showMark: showMark,\n        showFormByTips: function showFormByTips() {\n          return dispatch(_tooltipaction.showFormByTips.apply(void 0, arguments));\n        },\n        userLocal: model.getUserLocale(),\n        showAttachmentNum: showAttachmentNum,\n        comfirmDelete: this.confirmDelete,\n        maxAtmCount: maxAtmCount,\n        showThumbnails: showThumbnails,\n        attachOperationCount: this.attachOperationCount,\n        attachOperaClick: this.attachOperaClick,\n        forbidfiletype: forbidfiletype,\n        dateFormatter: dateFormatter,\n        fileTypeWhiteList: fileTypeWhiteList,\n        showOperaBut: showOperaBut,\n        previewType: previewType,\n        openByNewTab: openByNewTab,\n        renameFile: this.rename,\n        sortField: sortField,\n        sortType: sortType,\n        onNewTabPreview: this.handlePreviewInNewTab,\n        checkDuplicateFileName: checkDuplicateFileName,\n        slot: slot,\n        previewLimitSize: previewLimitSize,\n        isFileEncrypt: isFileEncrypt,\n        dragFile: this.dragFile,\n        dragble: dragble\n      }, this.props.attachData));\n    }\n  }]);\n  return KDAttachmentPanel;\n}(_react[\"default\"].Component)) || _class) || _class) || _class) || _class);\nvar _default = exports[\"default\"] = KDAttachmentPanel;\n\n//# sourceURL=webpack://bos-platform/./src/component/web/KDAttachmentPanel.jsx?");

/***/ }),

/***/ "./src/component/web/KDButton.js":
/*!***************************************!*\
  !*** ./src/component/web/KDButton.js ***!
  \***************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.filter.js */ \"../../node_modules/core-js/modules/es.array.filter.js\");\n__webpack_require__(/*! core-js/modules/es.array.for-each.js */ \"../../node_modules/core-js/modules/es.array.for-each.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.assign.js */ \"../../node_modules/core-js/modules/es.object.assign.js\");\n__webpack_require__(/*! core-js/modules/es.object.create.js */ \"../../node_modules/core-js/modules/es.object.create.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-properties.js */ \"../../node_modules/core-js/modules/es.object.define-properties.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptors.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptors.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.get-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.keys.js */ \"../../node_modules/core-js/modules/es.object.keys.js\");\n__webpack_require__(/*! core-js/modules/es.object.set-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.set-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.reflect.construct.js */ \"../../node_modules/core-js/modules/es.reflect.construct.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ \"../../node_modules/core-js/modules/web.dom-collections.for-each.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.array.includes.js */ \"../../node_modules/core-js/modules/es.array.includes.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-string.js */ \"../../node_modules/core-js/modules/es.date.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\n__webpack_require__(/*! core-js/modules/es.function.name.js */ \"../../node_modules/core-js/modules/es.function.name.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.regexp.to-string.js */ \"../../node_modules/core-js/modules/es.regexp.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.string.includes.js */ \"../../node_modules/core-js/modules/es.string.includes.js\");\nvar _react = _interopRequireWildcard(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _immutable = __webpack_require__(/*! immutable */ \"webpack/sharing/consume/default/immutable/immutable?f2ca\");\nvar _componentutil = __webpack_require__(/*! ../../util/componentutil */ \"./src/util/componentutil.js\");\nvar _buttonaction = __webpack_require__(/*! ../../action/buttonaction */ \"./src/action/buttonaction.js\");\nvar _tooltipaction = __webpack_require__(/*! ../../action/tooltipaction */ \"./src/action/tooltipaction.js\");\nvar _BaseComponents = __webpack_require__(/*! ./base/BaseComponents */ \"./src/component/web/base/BaseComponents/index.js\");\nvar _VisibleLockWrap = _interopRequireDefault(__webpack_require__(/*! ../common/VisibleLockWrap */ \"./src/component/common/VisibleLockWrap.js\"));\nvar _PermissionControlWrap = _interopRequireDefault(__webpack_require__(/*! ../common/PermissionControlWrap */ \"./src/component/common/PermissionControlWrap.js\"));\nvar _certService = __webpack_require__(/*! ../../api/certService */ \"./src/api/certService.js\");\nvar _appModelFunction = __webpack_require__(/*! ../../model/appModelFunction */ \"./src/model/appModelFunction.js\");\nvar _AttachDataWrap = _interopRequireDefault(__webpack_require__(/*! ../common/AttachDataWrap */ \"./src/component/common/AttachDataWrap.js\"));\nvar _badgeWrap = _interopRequireDefault(__webpack_require__(/*! ../common/badgeWrap */ \"./src/component/common/badgeWrap.js\"));\nvar _FloatingPanelWarp = _interopRequireDefault(__webpack_require__(/*! ../common/FloatingPanelWarp */ \"./src/component/common/FloatingPanelWarp.js\"));\nvar _Slot = _interopRequireDefault(__webpack_require__(/*! @/component/common/Slot */ \"./src/component/common/Slot.jsx\"));\nvar _CtlInterceptors = __webpack_require__(/*! ../common/CtlInterceptors */ \"./src/component/common/CtlInterceptors.js\");\nvar _clickActionUtil = _interopRequireWildcard(__webpack_require__(/*! @/util/clickActionUtil */ \"./src/util/clickActionUtil.js\"));\nvar _ControlLoadingWrap = _interopRequireDefault(__webpack_require__(/*! ../common/ControlLoadingWrap */ \"./src/component/common/ControlLoadingWrap.js\"));\nvar _clientApi = _interopRequireDefault(__webpack_require__(/*! @/plugin/clientApi */ \"./src/plugin/clientApi.js\"));\nvar _certConst = __webpack_require__(/*! @/constant/certConst */ \"./src/constant/certConst.js\");\nvar _toolUtils = __webpack_require__(/*! @/util/toolUtils */ \"./src/util/toolUtils.js\");\nvar _keyCodeTool = __webpack_require__(/*! @/util/keyCodeTool */ \"./src/util/keyCodeTool.js\");\nvar _UpdateShortCutWrap = _interopRequireDefault(__webpack_require__(/*! @/component/common/UpdateShortCutWrap */ \"./src/component/common/UpdateShortCutWrap.js\"));\nvar _waitUpdateValueUtil = __webpack_require__(/*! @/api/waitUpdateValueUtil */ \"./src/api/waitUpdateValueUtil.js\");\nvar _tooltipsUtil = __webpack_require__(/*! @/util/tooltipsUtil */ \"./src/util/tooltipsUtil.js\");\nvar _PageScope = __webpack_require__(/*! @/pagescope/PageScope */ \"./src/pagescope/PageScope.js\");\nvar _controlBizEventConst = __webpack_require__(/*! @/pagescope/controlBizEvent/controlBizEventConst */ \"./src/pagescope/controlBizEvent/controlBizEventConst.js\");\nvar _dec, _dec2, _dec3, _class;\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nvar KDButton = (_dec = (0, _badgeWrap[\"default\"])(), _dec2 = (0, _VisibleLockWrap[\"default\"])(false, true), _dec3 = (0, _PermissionControlWrap[\"default\"])(), _dec(_class = (0, _AttachDataWrap[\"default\"])(_class = (0, _FloatingPanelWarp[\"default\"])(_class = _dec2(_class = (0, _ControlLoadingWrap[\"default\"])(_class = _dec3(_class = (0, _UpdateShortCutWrap[\"default\"])(_class = /*#__PURE__*/function (_Component) {\n  _inherits(KDButton, _Component);\n  function KDButton(props) {\n    var _this;\n    _classCallCheck(this, KDButton);\n    _this = _callSuper(this, KDButton, [props]);\n    _this._handleClick = function () {\n      var _model$meta;\n      var _this$props = _this.props,\n        model = _this$props.model,\n        keyIndex = _this$props.keyIndex,\n        isFromCardRow = _this$props.isFromCardRow;\n      var pageId = model.pageId,\n        meta = model.meta,\n        key = model.key;\n      var takeCert = meta.get('tc');\n      var controlBizEventParam = {\n        opk: model === null || model === void 0 || (_model$meta = model.meta) === null || _model$meta === void 0 ? void 0 : _model$meta.get('opk', '')\n      };\n      if (isFromCardRow) {\n        controlBizEventParam.rowIndex = keyIndex;\n      }\n      (0, _PageScope.fireControlBizEvent)(pageId, key, _controlBizEventConst.CLICK, controlBizEventParam);\n      if (takeCert) {\n        // 判定是否证书签名\n        // certService.checkCert(pageId, this.handleCertClick, {})\n        (0, _clientApi[\"default\"])('importCert', {\n          data: {\n            pageId: pageId\n          },\n          callback: function callback(certInfo) {\n            var _this$props$model = _this.props.model,\n              pageId = _this$props$model.pageId,\n              key = _this$props$model.key;\n            _this.props.dispatch((0, _appModelFunction.convertAppModelFunctionAction)((0, _appModelFunction.setControlPostValue)(pageId, key, {\n              certInfo: certInfo\n            })));\n            _this.props.dispatch((0, _buttonaction.click)(_this.props.model));\n          },\n          failCallback: function failCallback(result) {\n            if (result.status === _certConst.CERT_STATUS_NOCERT) {\n              _certService.certService.showCertComfirm(pageId);\n            } else if (result.status === _certConst.CERT_STATUS_NOPLGUIN) {\n              _certService.certService.showDownloadComfirm(pageId);\n            } else if (result.status === _certConst.CERT_STATUS_TOPESA_NOCERT) {\n              // 没有天威证书 天威证书特有处理\n              _certService.certService.showNoCertComfirm(pageId);\n            } else if (result.status === _certConst.CERT_STATUS_IWSA_NOCERT) {\n              // 没有信安世纪证书\n              _certService.certService.showNoIWSACertMessage(pageId);\n            } else if (result.status === _certConst.CERT_STATUS_NOT_FOUND) {\n              _certService.certService.showNotFoundCertComfirm(pageId);\n            } else {\n              // CERT_STATUS_FAIL\n              _certService.certService.showSignFailedMessage(pageId);\n            }\n          }\n        });\n      } else {\n        // 经过拦截器链拦截\n        (0, _CtlInterceptors.interceptActionFn)(_objectSpread(_objectSpread({}, _this.props), {}, {\n          click: function click() {\n            return _this.props.dispatch(_buttonaction.click.apply(void 0, arguments));\n          }\n        }), _clickActionUtil[\"default\"]);\n      }\n    };\n    _this.updateTipsConfig = _this.updateTipsConfig.bind(_assertThisInitialized(_this));\n    // this.handleCertClick = this.handleCertClick.bind(this)\n    _this.handleClick = _this.handleClick.bind(_assertThisInitialized(_this));\n    _this.forAutoTestActions = {\n      click: _buttonaction.click\n    };\n    _this.state = {\n      tipsConfig: null\n    };\n    return _this;\n  }\n  _createClass(KDButton, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props2 = this.props,\n        model = _this$props2.model,\n        isFromCardRow = _this$props2.isFromCardRow,\n        data = _this$props2.data,\n        option = _this$props2.option;\n      var tips = (0, _tooltipsUtil.getRowPropertyTips)({\n        model: model,\n        isFromCardRow: isFromCardRow,\n        data: data,\n        option: option\n      });\n      if (tips) this.updateTipsConfig(model.pageId, model.key, tips);\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      var _nextProps$model, _nextProps$model2;\n      var _this$props3 = this.props,\n        model = _this$props3.model,\n        isFromCardRow = _this$props3.isFromCardRow,\n        data = _this$props3.data,\n        option = _this$props3.option;\n      var tips = (0, _tooltipsUtil.getRowPropertyTips)({\n        model: model,\n        isFromCardRow: isFromCardRow,\n        data: data,\n        option: option\n      });\n      var nextTips = (0, _tooltipsUtil.getRowPropertyTips)({\n        model: nextProps.model,\n        isFromCardRow: nextProps.isFromCardRow,\n        data: nextProps.data,\n        option: nextProps.option\n      });\n      if (!(0, _immutable.is)(tips, nextTips)) this.updateTipsConfig((_nextProps$model = nextProps.model) === null || _nextProps$model === void 0 ? void 0 : _nextProps$model.pageId, (_nextProps$model2 = nextProps.model) === null || _nextProps$model2 === void 0 ? void 0 : _nextProps$model2.key, nextTips);\n    }\n  }, {\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      if (this.props.init) this.props.init(this.props.model);\n    }\n  }, {\n    key: \"updateTipsConfig\",\n    value: function updateTipsConfig(pageId, id, tips) {\n      if (!tips) {\n        // 可以通过u指令设置tips为空\n        this.setState({\n          tipsConfig: null\n        });\n        return;\n      }\n      var tipsConfig = this.state.tipsConfig;\n      if (!tipsConfig) {\n        tipsConfig = (0, _tooltipsUtil.createTipsConfig)(pageId, id);\n        this.setState({\n          tipsConfig: tipsConfig\n        });\n      }\n      (0, _tooltipsUtil.saveTipsInfo)(tipsConfig, tips);\n    }\n\n    // handleCertClick (cert, args) { // 证书按钮点击事件\n    //   const { pageId, key } = this.props.model\n    //   const certInfo = {\n    //     serialNumber: cert.serialNumber(),\n    //     issuer: cert.issuer(),\n    //     publicKey: cert.toBase64(),\n    //     begin: cert.notBefore(),\n    //     end: cert.notAfter(),\n    //     certName: this.getCertName(cert)\n    //   }\n    //   this.props.dispatch(convertAppModelFunctionAction(setControlPostValue(pageId, key, { certInfo })))\n    //   this.props.dispatch(click(this.props.model))\n    // }\n\n    // getCertName=(cert) => {\n    //   const t = cert.subject().match(/(S(?!N)|L|O(?!U)|OU|SN|CN|E)=([^=]+)(?=, |$)/g)\n    //   for (let i = 0; i < t.length; i++) {\n    //     if (t[i].indexOf('CN=') === 0) { return t[i].substr(3, t[i].length) }\n    //   }\n    //   return 'defaultName'\n    // }\n  }, {\n    key: \"handleClick\",\n    value: function handleClick(e) {\n      var _this2 = this;\n      if (this._getLock()) return;\n      e.stopPropagation();\n      var _this$props4 = this.props,\n        model = _this$props4.model,\n        beforeAction = _this$props4.beforeAction;\n      var controlType = model.getMetaProperty('type');\n      var pageId = model.pageId,\n        key = model.key;\n      var promise = beforeAction && beforeAction(e, {\n        controlType: controlType,\n        controlKey: key\n      }) || (0, _waitUpdateValueUtil.waitUpdateValueComplete)(pageId);\n      promise.then(function () {\n        _this2._handleClick();\n      });\n    }\n  }, {\n    key: \"_getLock\",\n    value: function _getLock() {\n      var _this$props5 = this.props,\n        model = _this$props5.model,\n        getCardLocked = _this$props5.getCardLocked;\n      if (getCardLocked) {\n        return getCardLocked(model);\n      } // 如果image作为卡片里的字段，优先用卡片字段可见效判断接口\n      return this.props.isLocked;\n    }\n  }, {\n    key: \"_getVisible\",\n    value: function _getVisible() {\n      var _this$props6 = this.props,\n        model = _this$props6.model,\n        getCardVisible = _this$props6.getCardVisible;\n      if (getCardVisible) {\n        return getCardVisible(model);\n      }\n      return this.props.isVisible;\n    }\n  }, {\n    key: \"getUrl\",\n    value: function getUrl(imgKey, fileserver) {\n      // if (imgKey && fileserver) {\n      // 支持base64图片\n      // if (/^data:?/.test(imgKey)) {\n      //   return imgKey\n      // } else if (!/^http(s)?/.test(imgKey)) {\n      //   return fileserver + imgKey\n      // } else {\n      //   return imgKey\n      // }\n      return (0, _componentutil.getImgFullPath)(fileserver, imgKey);\n      // }\n      // return imgKey\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _getkeyCodeInfoByOpk,\n        _this3 = this;\n      var _this$props7 = this.props,\n        model = _this$props7.model,\n        fieldAction = _this$props7.fieldAction,\n        loading = _this$props7.loading,\n        isFromCardRow = _this$props7.isFromCardRow,\n        data = _this$props7.data,\n        option = _this$props7.option;\n      var tipsConfig = this.state.tipsConfig;\n      var style = (0, _componentutil.getCommonStyle)(model);\n      var rowKey = (0, _clickActionUtil.getRowIndex)(this.props);\n      var followTheme = model.getMetaProperty('followTheme'); // 按钮颜色跟随主题色\n      // let _lock= getLocked(model);\n      var _lock = this._getLock(model); // 按钮在卡片中暂不做特殊处理。一个隐藏，所有卡片行按钮都隐藏。\n      var _getCommonClass = (0, _componentutil.getCommonClass)(model),\n        Grow = _getCommonClass.Grow,\n        Shrink = _getCommonClass.Shrink,\n        AlignSelf = _getCommonClass.AlignSelf;\n      var imageKey = (0, _componentutil.getComponentDataProperty)(model, 'imageKey', 'imageKey', false);\n      var config = model.getFormConfig();\n      imageKey = this.getUrl(imageKey, config.fileserver);\n      var hasBorder = (0, _componentutil.hasSetBorder)(style);\n      var caption = (0, _componentutil.getComponentDataProperty)(model, 'text', 'text', true); // 支持动态设置标题\n      var imagePath = (0, _componentutil.getComponentDataProperty)(model, 'imagePath', 'imagePath', false); // 支持动态设置的图片路径\n      var imgWidth = (0, _componentutil.getComponentDataProperty)(model, 'imgWidth', 'imgWidth', false);\n      var imgHeight = (0, _componentutil.getComponentDataProperty)(model, 'imgHeight', 'imgHeight', false);\n      var visibility = this._getVisible(model);\n      // 卡片行控件规则\n      var id = model.getMetaProperty('id');\n      var opk = model.getMetaProperty('opk');\n      var shortCutTips = (_getkeyCodeInfoByOpk = (0, _keyCodeTool.getkeyCodeInfoByOpk)(opk)) === null || _getkeyCodeInfoByOpk === void 0 ? void 0 : _getkeyCodeInfoByOpk.name;\n      var fieldRules = fieldAction && fieldAction[id];\n      if (fieldRules) {\n        var rulesResult = (0, _componentutil.getCardRulesResult)(fieldRules, visibility, _lock, style);\n        visibility = rulesResult.visibility;\n        _lock = rulesResult.disabled;\n        style = rulesResult.style;\n      }\n      if (!visibility) {\n        // return null\n        return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n          id: model ? model.key + '_hide_control' : 'hide_control',\n          style: {\n            display: 'none'\n          }\n        });\n      }\n      var slot;\n      if (tipsConfig) {\n        slot = /*#__PURE__*/_react[\"default\"].createElement(_Slot[\"default\"], {\n          tips: tipsConfig\n        });\n      }\n      var commonStyle = (0, _componentutil.getCommonStyle)(model) || {};\n      var hasNonThemeBg = commonStyle.backgroundColor && commonStyle.backgroundColor !== (0, _componentutil.getCurrentTheme)();\n      var noBg = (0, _toolUtils.isWhiteColorBg)(commonStyle.backgroundColor) || !followTheme && !commonStyle.backgroundColor;\n      var isThemeColor = commonStyle.color === (0, _componentutil.getCurrentTheme)();\n      var isThemeBg = commonStyle.backgroundColor === (0, _componentutil.getCurrentTheme)();\n      var borderContent = model && model.getMetaProperty('s') && model.getMetaProperty('s').get('b');\n      var isThemeBorder = borderContent && borderContent.toString().includes('themeColor');\n      var _ref = loading || {},\n        _ref$showLoading = _ref.showLoading,\n        showLoading = _ref$showLoading === void 0 ? false : _ref$showLoading,\n        loadingRowKey = _ref.rowKey;\n      var shouldShowLoading;\n      if (isFromCardRow) {\n        shouldShowLoading = showLoading && loadingRowKey !== 'undefined' && rowKey === loadingRowKey;\n      } else {\n        shouldShowLoading = showLoading;\n      }\n      return /*#__PURE__*/_react[\"default\"].createElement(_BaseComponents.Button, _extends({\n        model: model,\n        opk: opk,\n        Grow: Grow,\n        Shrink: Shrink,\n        AlignSelf: AlignSelf,\n        style: style,\n        disabled: _lock,\n        onClick: this.handleClick,\n        id: model.key,\n        isThemeColor: isThemeColor,\n        isThemeBorder: isThemeBorder,\n        isThemeBg: isThemeBg,\n        text: caption,\n        ButtonStyle: model.getMetaProperty('btns'),\n        ImageKey: imagePath || imageKey,\n        hasBorder: hasBorder,\n        ImgWidth: imgWidth,\n        ImgHeight: imgHeight,\n        FollowTheme: followTheme,\n        showFormByTips: function showFormByTips() {\n          return _this3.props.dispatch(_tooltipaction.showFormByTips.apply(void 0, arguments));\n        },\n        userLocal: model.getUserLocale(),\n        loading: loading,\n        hasNonThemeBg: hasNonThemeBg,\n        noBg: noBg,\n        fontClass: model.getMetaProperty('fontClass'),\n        slot: slot,\n        rowIndex: rowKey,\n        showLoading: shouldShowLoading\n      }, this.props.attachData, {\n        shortCutTips: shortCutTips\n      }));\n    }\n  }]);\n  return KDButton;\n}(_react.Component)) || _class) || _class) || _class) || _class) || _class) || _class) || _class); // 当button放在card中时，PropsComparison无法判断其是否应该刷新。暂时屏蔽 -20171124\n// export default ComposeEnhance(PropsComparison)(KDButton)\nvar _default = exports[\"default\"] = KDButton;\n\n//# sourceURL=webpack://bos-platform/./src/component/web/KDButton.js?");

/***/ }),

/***/ "./src/component/web/KDCardFlexPanel.js":
/*!**********************************************!*\
  !*** ./src/component/web/KDCardFlexPanel.js ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.assign.js */ \"../../node_modules/core-js/modules/es.object.assign.js\");\n__webpack_require__(/*! core-js/modules/es.object.create.js */ \"../../node_modules/core-js/modules/es.object.create.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.get-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.set-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.set-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.reflect.construct.js */ \"../../node_modules/core-js/modules/es.reflect.construct.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.array.concat.js */ \"../../node_modules/core-js/modules/es.array.concat.js\");\n__webpack_require__(/*! core-js/modules/es.array.map.js */ \"../../node_modules/core-js/modules/es.array.map.js\");\nvar _react = _interopRequireWildcard(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _propTypes = _interopRequireDefault(__webpack_require__(/*! prop-types */ \"../../node_modules/prop-types/index.js\"));\nvar _global = __webpack_require__(/*! @/global */ \"./src/global/index.js\");\nvar _FlexPanel = _interopRequireDefault(__webpack_require__(/*! ./base/FlexPanel */ \"./src/component/web/base/FlexPanel.js\"));\nvar _componentFactory = _interopRequireDefault(__webpack_require__(/*! ../../factory/componentFactory */ \"./src/factory/componentFactory.js\"));\nvar _componentutil = __webpack_require__(/*! ../../util/componentutil */ \"./src/util/componentutil.js\");\nvar _buttonaction = __webpack_require__(/*! ../../action/buttonaction */ \"./src/action/buttonaction.js\");\nvar _VisibleLockWrap = _interopRequireWildcard(__webpack_require__(/*! ../common/VisibleLockWrap */ \"./src/component/common/VisibleLockWrap.js\"));\nvar _customProperty = __webpack_require__(/*! ../../util/customProperty */ \"./src/util/customProperty.js\");\nvar _classnames = _interopRequireDefault(__webpack_require__(/*! classnames */ \"../../node_modules/classnames/index.js\"));\nvar _FlexPanel2 = _interopRequireDefault(__webpack_require__(/*! ./base/FlexPanel.less */ \"./src/component/web/base/FlexPanel.less\"));\nvar _KDCardView = _interopRequireDefault(__webpack_require__(/*! ./KDCardView.less */ \"./src/component/web/KDCardView.less\"));\nvar _waitUpdateValueUtil = __webpack_require__(/*! @/api/waitUpdateValueUtil */ \"./src/api/waitUpdateValueUtil.js\");\nvar _AttachDataWrap = _interopRequireDefault(__webpack_require__(/*! ../common/AttachDataWrap */ \"./src/component/common/AttachDataWrap.js\"));\nvar _dec, _class, _KDCardFlexPanel;\n/**\n * 卡片行容器\n */\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n// import { addCutomStyleToHead, getCustomClassName } from '../../util/customStyle'\nvar KDCardFlexPanel = (_dec = (0, _VisibleLockWrap[\"default\"])(true, true), (0, _AttachDataWrap[\"default\"])(_class = _dec(_class = (0, _VisibleLockWrap.ContainerLockWrap)(_class = (_KDCardFlexPanel = /*#__PURE__*/function (_Component) {\n  _inherits(KDCardFlexPanel, _Component);\n  function KDCardFlexPanel() {\n    var _this;\n    _classCallCheck(this, KDCardFlexPanel);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _callSuper(this, KDCardFlexPanel, [].concat(args));\n    _this.getFieldAction = function (action) {\n      // action oneof ['lockc', 'unlockc', 'showc', 'hidec', 'setc']\n      var _this$props = _this.props,\n        model = _this$props.model,\n        fieldAction = _this$props.fieldAction;\n      var id = model.getMetaProperty('id');\n      var fieldRules = fieldAction && fieldAction[id];\n      if (fieldRules) {\n        if (action === 'setc') {\n          if (fieldRules.action === 'setc') return fieldRules;\n        } else {\n          return fieldRules.action === action;\n        }\n      }\n    };\n    // 卡片中的子元素获取锁定性的方法\n    _this.getCardLocked = function (subModel) {\n      // 固定卡片，不会传入getCardLocked等function\n      if (_this.props.getCardLocked == undefined) {\n        return false;\n      }\n      if (_this.props.parentLocked || _this.cardFlexPanelLocked) {\n        // 父容器锁定，则直接锁定子元素\n        return true;\n      } else {\n        return _this.props.getCardLocked(subModel);\n      }\n    };\n    _this.getCardFlexPanelName = function () {\n      var _this$props2 = _this.props,\n        data = _this$props2.data,\n        model = _this$props2.model,\n        option = _this$props2.option;\n      var controlRowProperty = (0, _customProperty.getControlRowProperty)({\n        data: data,\n        model: model,\n        option: option\n      });\n      if (controlRowProperty && controlRowProperty.get('text') !== undefined) {\n        return controlRowProperty.get('text');\n      }\n      return model.getMetaLocaleProperty('text') || '';\n    };\n    _this.getFlexAbstract = function () {\n      var _this$props3 = _this.props,\n        data = _this$props3.data,\n        model = _this$props3.model,\n        option = _this$props3.option;\n      var controlRowProperty = (0, _customProperty.getControlRowProperty)({\n        data: data,\n        model: model,\n        option: option\n      });\n      if (controlRowProperty && controlRowProperty.get('flexabstract') !== undefined) {\n        return controlRowProperty.get('flexabstract');\n      }\n      return model.getMetaLocaleProperty('flexabstract');\n    };\n    _this.renderFlexPanelItem = function (meta) {\n      var _this$props4 = _this.props,\n        model = _this$props4.model,\n        isSelected = _this$props4.isSelected,\n        showHover = _this$props4.showHover,\n        cardViewLocked = _this$props4.cardViewLocked,\n        fieldAction = _this$props4.fieldAction,\n        isMulti = _this$props4.isMulti,\n        isFromCardRow = _this$props4.isFromCardRow,\n        cardMode = _this$props4.cardMode,\n        beforeAction = _this$props4.beforeAction,\n        keyIndex = _this$props4.keyIndex,\n        isListView = _this$props4.isListView;\n      return (0, _componentFactory[\"default\"])(model.pageId, meta, (0, _global.getGlobalState)(), undefined, {\n        showHover: showHover,\n        isSelected: isSelected,\n        fieldAction: fieldAction,\n        onClick: _this.props.onClick,\n        cardViewLocked: cardViewLocked,\n        data: _this.props.data,\n        fmtinfo: _this.props.fmtinfo,\n        option: _this.props.option,\n        key: meta.get('id'),\n        gridKey: _this.props.gridKey,\n        rowKey: _this.props.rowKey,\n        getSelectRowsPostData: _this.props.getSelectRowsPostData,\n        activeRow: _this.props.activeRow,\n        activeFocusRow: _this.props.activeFocusRow,\n        isFromCardRow: isFromCardRow,\n        getCardVisible: isFromCardRow ? _this.props.getCardVisible : undefined,\n        // 固定卡片不会传入getCardLocked等function\n        setSelRows: _this.props.setSelRows,\n        isMulti: isMulti,\n        getSelectorDom: _this.props.getSelectorDom,\n        parentLocked: _this.props.parentLocked || _this.cardFlexPanelLocked,\n        getCardLocked: isFromCardRow ? _this.getCardLocked : undefined,\n        cardMode: cardMode,\n        beforeAction: beforeAction,\n        keyIndex: keyIndex,\n        isListView: isListView\n      });\n    };\n    return _this;\n  }\n  _createClass(KDCardFlexPanel, [{\n    key: \"_getVisible\",\n    value: function _getVisible() {\n      var _this$props5 = this.props,\n        model = _this$props5.model,\n        getCardVisible = _this$props5.getCardVisible,\n        isFromCardRow = _this$props5.isFromCardRow;\n      if (this.getFieldAction('hidec')) return false;\n      if (!isFromCardRow) {\n        return this.props.getVisible(model); // 固定卡片本身以及固定卡片中的卡片布局容器获取可见性的值\n      }\n      if (getCardVisible) {\n        return getCardVisible(model);\n      }\n      return true;\n    }\n  }, {\n    key: \"handleClick\",\n    value: function handleClick(e) {\n      e.stopPropagation();\n      var _this$props6 = this.props,\n        model = _this$props6.model,\n        dispatch = _this$props6.dispatch,\n        beforeAction = _this$props6.beforeAction;\n      // 固定卡片没有KDCardRowPanel这一层\n      var promise = beforeAction && beforeAction(e) || (0, _waitUpdateValueUtil.waitUpdateValueComplete)(model.pageId);\n      promise.then(function () {\n        dispatch((0, _buttonaction.click)(model, []));\n      });\n    }\n  }, {\n    key: \"getStyle\",\n    value: function getStyle(model, fieldAction, data, option) {\n      var style = (0, _componentutil.getCommonStyle)(model);\n      var controlRowProperty = (0, _customProperty.getControlRowProperty)({\n        data: data,\n        model: model,\n        option: option\n      });\n      if (controlRowProperty) {\n        style = (0, _customProperty.mergeCustomStyle)(style, controlRowProperty);\n      }\n      // const fieldRuleStyle = this.getFieldAction('setc')\n      // if (fieldRuleStyle) {\n      //   style[fieldRuleStyle.k] = fieldRuleStyle.v\n      // }\n      var id = model.getMetaProperty('id');\n      var visibility = this._getVisible(model);\n      var fieldRules = fieldAction && fieldAction[id];\n      if (fieldRules) {\n        var rulesResult = (0, _componentutil.getCardRulesResult)(fieldRules, visibility, undefined, style);\n        visibility = rulesResult.visibility;\n        style = rulesResult.style;\n      }\n      return {\n        style: style,\n        visibility: visibility\n      };\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n      var _this$props7 = this.props,\n        model = _this$props7.model,\n        fieldAction = _this$props7.fieldAction,\n        data = _this$props7.data,\n        option = _this$props7.option,\n        isFromCardRow = _this$props7.isFromCardRow,\n        disableClick = _this$props7.disableClick;\n      var _this$getStyle = this.getStyle(model, fieldAction, data, option),\n        style = _this$getStyle.style,\n        visibility = _this$getStyle.visibility;\n      // style = getVisibleStyle(style,getVisible(model));\n      var commonClass = (0, _componentutil.getCommonClass)(model);\n      var items = model.meta.get('items');\n      // const visible = this._getVisible(model)\n      var clickable = model.getMetaProperty('clickable'); // 容器点击\n      var hoverShowItem = model.getMetaProperty('hsi'); // 默认隐藏,鼠标hover到卡片时显示出来\n      var hoverHideItem = model.getMetaProperty('hhi'); // 默认显示,鼠标hover到卡片时隐藏\n      var collapsible = model.getMetaProperty('collapsible'); // 可折叠\n      var defaultCollapse = model.getMetaProperty('defaultcollapse'); // 默认折叠\n      var showAbstract = model.getMetaProperty('showAbstract');\n      var Name = this.getCardFlexPanelName();\n      var floatingDock = model.getMetaProperty('fd'); // 悬浮停靠\n      var dockingPosition = model.getMetaProperty('dp'); // 停靠位置\n\n      // test data\n      // hoverShowItem = model.key=='cardentryflexpanelap4';\n      // hoverHideItem = model.key === 'cardentryflexpanelap8'\n      if (!items) return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        id: model ? model.key + '_no_items' : 'no_items',\n        style: {\n          display: 'none'\n        }\n      });\n      if (!visibility) return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        id: model ? model.key + '_hide_visible' : 'hide_visible',\n        style: {\n          display: 'none'\n        }\n      });\n      var cn = (0, _classnames[\"default\"])(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, _FlexPanel2[\"default\"].cursor, clickable), _KDCardView[\"default\"].hover_show_item, hoverShowItem), _KDCardView[\"default\"].hover_hide_item, hoverHideItem), _KDCardView[\"default\"].card_disable_click, disableClick));\n      this.cardFlexPanelLocked = isFromCardRow ? this.props.getCardLocked(model) || this.getFieldAction('lockc') : false;\n\n      // 增加自定义样式\n      // cn += ` ${addCutomStyleToHead(model)}`\n\n      return /*#__PURE__*/_react[\"default\"].createElement(_FlexPanel[\"default\"], _extends({\n        \"data-fixedcard\": \"isfixedcard\",\n        model: model,\n        Name: Name,\n        FloatingDock: floatingDock,\n        DockingPosition: dockingPosition,\n        Collapsible: collapsible,\n        defaultCollapse: defaultCollapse,\n        showAbstract: showAbstract,\n        className: cn,\n        style: style,\n        gridKey: this.props.gridKey,\n        keyIndex: this.props.keyIndex\n      }, commonClass, {\n        onClick: function onClick(e) {\n          return clickable && _this2.handleClick(e);\n        }\n      }, this.props.attachData, {\n        getCustomOutLine: this.getFlexAbstract\n      }), items.map(function (meta, index) {\n        return _this2.renderFlexPanelItem(meta);\n      }));\n    }\n  }]);\n  return KDCardFlexPanel;\n}(_react.Component), _KDCardFlexPanel.contextTypes = {\n  store: _propTypes[\"default\"].object\n}, _KDCardFlexPanel)) || _class) || _class) || _class);\nvar _default = exports[\"default\"] = KDCardFlexPanel;\n\n//# sourceURL=webpack://bos-platform/./src/component/web/KDCardFlexPanel.js?");

/***/ }),

/***/ "./src/component/web/KDCardRowPanel.js":
/*!*********************************************!*\
  !*** ./src/component/web/KDCardRowPanel.js ***!
  \*********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.index-of.js */ \"../../node_modules/core-js/modules/es.array.index-of.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.assign.js */ \"../../node_modules/core-js/modules/es.object.assign.js\");\n__webpack_require__(/*! core-js/modules/es.object.create.js */ \"../../node_modules/core-js/modules/es.object.create.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.get-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.set-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.set-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.reflect.construct.js */ \"../../node_modules/core-js/modules/es.reflect.construct.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.array.for-each.js */ \"../../node_modules/core-js/modules/es.array.for-each.js\");\n__webpack_require__(/*! core-js/modules/es.array.includes.js */ \"../../node_modules/core-js/modules/es.array.includes.js\");\n__webpack_require__(/*! core-js/modules/es.array.is-array.js */ \"../../node_modules/core-js/modules/es.array.is-array.js\");\n__webpack_require__(/*! core-js/modules/es.array.map.js */ \"../../node_modules/core-js/modules/es.array.map.js\");\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\n__webpack_require__(/*! core-js/modules/es.object.keys.js */ \"../../node_modules/core-js/modules/es.object.keys.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.regexp.exec.js */ \"../../node_modules/core-js/modules/es.regexp.exec.js\");\n__webpack_require__(/*! core-js/modules/es.string.includes.js */ \"../../node_modules/core-js/modules/es.string.includes.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ \"../../node_modules/core-js/modules/web.dom-collections.for-each.js\");\nvar _react = _interopRequireDefault(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _immutable = __webpack_require__(/*! immutable */ \"webpack/sharing/consume/default/immutable/immutable?f2ca\");\nvar _lodash = _interopRequireDefault(__webpack_require__(/*! lodash */ \"../../node_modules/lodash/lodash.js\"));\nvar _global = __webpack_require__(/*! @/global */ \"./src/global/index.js\");\nvar _BaseComponents = __webpack_require__(/*! ./base/BaseComponents */ \"./src/component/web/base/BaseComponents/index.js\");\nvar _componentFactory = _interopRequireDefault(__webpack_require__(/*! ../../factory/componentFactory */ \"./src/factory/componentFactory.js\"));\nvar _componentutil = __webpack_require__(/*! ../../util/componentutil */ \"./src/util/componentutil.js\");\nvar _VisibleLockWrap = _interopRequireDefault(__webpack_require__(/*! ../common/VisibleLockWrap */ \"./src/component/common/VisibleLockWrap.js\"));\nvar _AttachDataWrap = _interopRequireDefault(__webpack_require__(/*! ../common/AttachDataWrap */ \"./src/component/common/AttachDataWrap.js\"));\nvar _KDCardView = _interopRequireDefault(__webpack_require__(/*! ./KDCardView.less */ \"./src/component/web/KDCardView.less\"));\nvar _intlApi = __webpack_require__(/*! ../../i18n/intlApi */ \"./src/i18n/intlApi.js\");\nvar _classnames2 = _interopRequireDefault(__webpack_require__(/*! classnames */ \"../../node_modules/classnames/index.js\"));\nvar _DragWrap = _interopRequireDefault(__webpack_require__(/*! ../common/DragWrap */ \"./src/component/common/DragWrap.js\"));\nvar _waitUpdateValueUtil = __webpack_require__(/*! @/api/waitUpdateValueUtil */ \"./src/api/waitUpdateValueUtil.js\");\nvar _serverproperties = __webpack_require__(/*! @/constant/serverproperties.js */ \"./src/constant/serverproperties.js\");\nvar _ControlValueChangeContextProvider = __webpack_require__(/*! @/page/ControlValueChangeContextProvider */ \"./src/page/ControlValueChangeContextProvider.js\");\nvar _GlobalDataCacher = __webpack_require__(/*! @/model/GlobalDataCacher */ \"./src/model/GlobalDataCacher.js\");\nvar _symbolConst = __webpack_require__(/*! @/constant/symbolConst */ \"./src/constant/symbolConst.js\");\nvar _excluded = [\"keyIndex\", \"rowIndex\", \"model\", \"setUnderlinePos\", \"LayoutStyle\", \"isSelected\", \"data\", \"option\", \"isMulti\", \"cardMode\", \"isListView\", \"ignoreStyles\", \"disableClick\"];\nvar _dec, _dec2, _class;\n/**\n * 卡片行容器\n */\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n// 点击不需要反选卡片的控件类型\nvar shouldLabelSelectType = [_serverproperties.Ctrls.KDLabel, _serverproperties.Ctrls.KDImage, _serverproperties.Ctrls.KDFontIcon];\nvar KDCardRowPanel = (_dec = (0, _DragWrap[\"default\"])(false, false, true), _dec2 = (0, _VisibleLockWrap[\"default\"])(false), (0, _AttachDataWrap[\"default\"])(_class = _dec(_class = _dec2(_class = /*#__PURE__*/function (_React$Component) {\n  _inherits(KDCardRowPanel, _React$Component);\n  function KDCardRowPanel(props) {\n    var _this;\n    _classCallCheck(this, KDCardRowPanel);\n    _this = _callSuper(this, KDCardRowPanel, [props]);\n    /**\n    * 界面规则 By Shawn\n    * '[{\"condition\": \"g(\\'billno\\')=\\'1\\'\", \"actions\":[\"lockc(\\'c1\\')\", \"setc(\\'abc\\', \\'backcolor\\', \\'#ff33ee\\')\"]}]';\n    */\n    _this.handleClick = function (e) {\n      // 去掉了在mousedown时添加postData数据，在click的时候加上\n      var model = _this.props.model;\n      var event = e && e.nativeEvent;\n      (0, _waitUpdateValueUtil.waitUpdateValueComplete)(model.pageId).then(function () {\n        _this.activeRow(event);\n        _this.props.onClick(event);\n      });\n    };\n    _this.beforeAction = function (e) {\n      var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var model = _this.props.model;\n      var controlType = params.controlType,\n        controlKey = params.controlKey;\n      var labelSelect = shouldLabelSelectType.includes(controlType);\n      var event = e.nativeEvent;\n      return (0, _waitUpdateValueUtil.waitUpdateValueComplete)(model.pageId).then(function () {\n        _this.activeRow(event, {\n          labelSelect: labelSelect,\n          controlKey: controlKey\n        });\n        // 基础控件点击时带上了postData数据，但是会阻止冒泡，这里需要确认下是否还要发行点击指令\n        // this.props.onClick(e)\n      });\n    };\n    _this.getSelectorDom = function (selectorDom) {\n      _this.selectorDom = selectorDom;\n    };\n    _this.getCardLocked = function (subModel) {\n      // 固定卡片，不会传入getCardLocked等function\n      if (_this.props.getCardLocked == undefined) {\n        return false;\n      }\n      if (_this.props.parentLocked || _this.props.isLocked || _this.cardRowPanelLocked) {\n        // 父容器锁定，则直接锁定子元素\n        return true;\n      } else {\n        return _this.props.getCardLocked(subModel);\n      }\n    };\n    var _model = props.model;\n    var rules = _model.meta.get('rules');\n    var _rules = null;\n    if (rules) {\n      try {\n        _rules = JSON.parse(rules);\n      } catch (err) {\n        console.log((0, _intlApi.getLangMsg)({\n          key: 'cardrowpanel.key0001'\n        }), err);\n      }\n    }\n    _this.state = {\n      rules: _rules\n    };\n    _this.activeRow = _this.activeRow.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n  _createClass(KDCardRowPanel, [{\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps, nextState) {\n      var _this$props = this.props,\n        model = _this$props.model,\n        data = _this$props.data,\n        option = _this$props.option,\n        isSelected = _this$props.isSelected,\n        fmtinfo = _this$props.fmtinfo,\n        formStatus = _this$props.formStatus,\n        isLocked = _this$props.isLocked,\n        colCtrl = _this$props.colCtrl,\n        cardViewLocked = _this$props.cardViewLocked;\n      return !(0, _immutable.is)(isSelected, nextProps.isSelected) || !(0, _immutable.is)(data, nextProps.data) || !(0, _immutable.is)(fmtinfo, nextProps.fmtinfo) || !(0, _immutable.is)(option, nextProps.option) || !(0, _immutable.is)(model.meta, nextProps.model.meta) || formStatus !== nextProps.formStatus || isLocked !== nextProps.isLocked || !(0, _immutable.is)(colCtrl, nextProps.colCtrl) || cardViewLocked !== nextProps.cardViewLocked;\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n      this.removeDataChangeListener = (0, _GlobalDataCacher.addDataChangeListener)(_symbolConst.KEY_CHANGE_THEME_ACTION, function () {\n        _this2.forceUpdate();\n      });\n      // const _this = ReactDOM.findDOMNode(this)\n      // if (_this) {\n      //   _this.addEventListener('mousedown', this.activeRow, true) // 兼容预览页面的点击\n      // }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.removeDataChangeListener();\n      // const _this = ReactDOM.findDOMNode(this)\n      // if (_this) {\n      //   _this.removeEventListener('mousedown', this.activeRow, true)\n      // }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      // if(this.props.isSelected) {\n      // let cardRowPanel = ReactDOM.findDOMNode(this.cardRowPanel)\n      // cardRowPanel && cardRowPanel.scrollIntoView()\n      // }\n    }\n  }, {\n    key: \"activeRow\",\n    value: function activeRow(e) {\n      var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      /**\n       * 准备postdata数据\n       * 子卡片分录blur的时机应该优先于mousedonwn\n      */\n      var _params$labelSelect = params.labelSelect,\n        labelSelect = _params$labelSelect === void 0 ? false : _params$labelSelect,\n        _params$controlKey = params.controlKey,\n        controlKey = _params$controlKey === void 0 ? '0' : _params$controlKey;\n      // const { isMulti, cardMode } = this.props\n      var selector = e.target === this.selectorDom;\n      // 购物车模式无论单选多选都只能点击卡片选择标志选中\n      this.props.activeRow && this.props.activeRow(labelSelect, controlKey, selector);\n      // if (isMulti && cardMode === 1) { // 多选购物车模式，只点击卡片选择标志生效\n      //   if (e.target === this.selectorDom) {\n      //     this.props.activeRow && this.props.activeRow(false, '0', true)\n      //   }\n      // } else { // 默认模式\n      //   if (!isMulti && e.target === this.selectorDom) { // 单选时，点击卡片选择标志可以取消选中\n      //     this.props.activeRow && this.props.activeRow(false, '0', true)\n      //   } else {\n      //     this.props.activeRow && this.props.activeRow(labelSelect, controlKey)\n      //   }\n      // }\n    }\n  }, {\n    key: \"_getVisible\",\n    value: function _getVisible() {\n      var _this$props2 = this.props,\n        model = _this$props2.model,\n        getCardVisible = _this$props2.getCardVisible;\n      if (getCardVisible) {\n        return getCardVisible(model);\n      }\n      return true;\n    }\n  }, {\n    key: \"getStyle\",\n    value: function getStyle(model, fieldAction, ignoreStyles) {\n      var style = (0, _componentutil.getCommonStyle)(model);\n      var ctlId = model.getMetaProperty('id');\n      var fieldRules = fieldAction && fieldAction[ctlId];\n      if (fieldRules) {\n        var action = fieldRules.action;\n        if (action === 'setc') style[fieldRules.k] = fieldRules.v;\n      }\n      if (Array.isArray(ignoreStyles)) {\n        ignoreStyles.forEach(function (styleName) {\n          style[styleName] = undefined;\n        });\n      }\n      var bkimgfield = model.meta.get('bkimgfield'); // 背景图片字段\n      if (bkimgfield) {\n        var _this$props3 = this.props,\n          data = _this$props3.data,\n          option = _this$props3.option;\n        var value = data.get(option.get(bkimgfield));\n        if (value) {\n          if (!/^http(s)*/.test(_lodash[\"default\"].toLower(value))) {\n            var config = model.getFormConfig();\n            // value = config.fileserver + value;\n            value = (0, _componentutil.getImgFullPath)(config.fileserver, value, true);\n          }\n          style.backgroundImage = \"url(\".concat(value, \")\");\n        }\n      }\n      return style;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props$getCardLo,\n        _this$props5,\n        _this3 = this;\n      /* isSelected 是否支持 选中框效果 的属性 */\n      var _this$props4 = this.props,\n        keyIndex = _this$props4.keyIndex,\n        rowIndex = _this$props4.rowIndex,\n        model = _this$props4.model,\n        setUnderlinePos = _this$props4.setUnderlinePos,\n        LayoutStyle = _this$props4.LayoutStyle,\n        _isSelected = _this$props4.isSelected,\n        data = _this$props4.data,\n        option = _this$props4.option,\n        isMulti = _this$props4.isMulti,\n        cardMode = _this$props4.cardMode,\n        isListView = _this$props4.isListView,\n        ignoreStyles = _this$props4.ignoreStyles,\n        disableClick = _this$props4.disableClick,\n        others = _objectWithoutProperties(_this$props4, _excluded);\n      var showSelector = model.getMetaProperty('showsel'); // 边框\n      var showPointer = model.getMetaProperty('pointercursor'); // 手型光标\n      var isSelected = showSelector && _isSelected;\n      var selectStyleType = model.getMetaProperty('selectstyle') || 1;\n      // 卡片列表showHover为true\n      var showHover = isListView || model.getMetaProperty('showhov') !== false;\n      var commonClass = (0, _componentutil.getCommonClass)(model);\n      var items = model.meta.get('items');\n      var fieldAction = (0, _componentutil.getCardRowRules)(this.props, this.state.rules);\n      var style = this.getStyle(model, fieldAction, ignoreStyles);\n      var visible = this._getVisible();\n      if (!items || !visible) return null;\n\n      // 自定义样式嵌入\n      // let customClassName = addCutomStyleToHead(model)\n\n      var className = (0, _classnames2[\"default\"])(_defineProperty(_defineProperty({}, _KDCardView[\"default\"].hover_show_panel, true), _KDCardView[\"default\"].card_disable_click, disableClick));\n      this.cardRowPanelLocked = (_this$props$getCardLo = (_this$props5 = this.props).getCardLocked) === null || _this$props$getCardLo === void 0 ? void 0 : _this$props$getCardLo.call(_this$props5, model);\n      return /*#__PURE__*/_react[\"default\"].createElement(_ControlValueChangeContextProvider.ControlValueChangeContext.Consumer, null, function (customCtrlValue) {\n        return /*#__PURE__*/_react[\"default\"].createElement(_BaseComponents.CardRowPanel, _extends({\n          ref: function ref(n) {\n            _this3.cardRowPanel = n;\n          },\n          keyIndex: keyIndex,\n          rowIndex: rowIndex,\n          setUnderlinePos: setUnderlinePos\n        }, commonClass, {\n          style: style,\n          className: className,\n          showSelector: showSelector,\n          showPointer: showPointer,\n          isSelected: isSelected,\n          showHover: showHover,\n          notDesigner: true,\n          selectStyleType: selectStyleType,\n          onClick: _this3.handleClick\n        }, _this3.props.attachData), items.map(function (meta) {\n          return (0, _componentFactory[\"default\"])(model.pageId, meta, (0, _global.getGlobalState)(), undefined, {\n            fieldAction: fieldAction,\n            isSelected: _isSelected,\n            isFromCardRow: true,\n            onClick: _this3.props.onClick,\n            data: _this3.props.data,\n            fmtinfo: _this3.props.fmtinfo,\n            option: _this3.props.option,\n            key: meta.get('id'),\n            gridKey: _this3.props.gridKey,\n            rowKey: _this3.props.rowKey,\n            activeRow: _this3.props.activeRow,\n            activeFocusRow: _this3.props.activeFocusRow,\n            cardViewLocked: _this3.props.cardViewLocked,\n            getCardVisible: _this3.props.getCardVisible,\n            setSelRows: _this3.props.setSelRows,\n            isMulti: isMulti,\n            getSelectorDom: _this3.getSelectorDom,\n            cardMode: cardMode,\n            keyIndex: keyIndex,\n            beforeAction: _this3.beforeAction,\n            isListView: isListView,\n            parentLocked: _this3.props.parentLocked || _this3.cardRowPanelLocked,\n            getCardLocked: _this3.getCardLocked\n          });\n        }));\n      });\n    }\n  }]);\n  return KDCardRowPanel;\n}(_react[\"default\"].Component)) || _class) || _class) || _class);\nvar _default = exports[\"default\"] = KDCardRowPanel;\n\n//# sourceURL=webpack://bos-platform/./src/component/web/KDCardRowPanel.js?");

/***/ }),

/***/ "./src/component/web/KDCardSelector.jsx":
/*!**********************************************!*\
  !*** ./src/component/web/KDCardSelector.jsx ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.create.js */ \"../../node_modules/core-js/modules/es.object.create.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.get-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.set-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.set-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.reflect.construct.js */ \"../../node_modules/core-js/modules/es.reflect.construct.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.array.concat.js */ \"../../node_modules/core-js/modules/es.array.concat.js\");\nvar _react = _interopRequireWildcard(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _componentutil = __webpack_require__(/*! ../../util/componentutil */ \"./src/util/componentutil.js\");\nvar _classnames3 = _interopRequireDefault(__webpack_require__(/*! classnames */ \"../../node_modules/classnames/index.js\"));\nvar _commonUtils = _interopRequireDefault(__webpack_require__(/*! ../common/commonUtils */ \"./src/component/common/commonUtils.js\"));\nvar _KDCardSelector2 = _interopRequireDefault(__webpack_require__(/*! ./KDCardSelector.less */ \"./src/component/web/KDCardSelector.less\"));\nvar _VisibleLockWrap = _interopRequireDefault(__webpack_require__(/*! ../common/VisibleLockWrap */ \"./src/component/common/VisibleLockWrap.js\"));\nvar _AttachDataWrap = _interopRequireDefault(__webpack_require__(/*! ../common/AttachDataWrap */ \"./src/component/common/AttachDataWrap.js\"));\nvar _waitUpdateValueUtil = __webpack_require__(/*! @/api/waitUpdateValueUtil */ \"./src/api/waitUpdateValueUtil.js\");\nvar _dec, _class;\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nvar KDCardSelector = (_dec = (0, _VisibleLockWrap[\"default\"])(false), (0, _AttachDataWrap[\"default\"])(_class = _dec(_class = /*#__PURE__*/function (_Component) {\n  _inherits(KDCardSelector, _Component);\n  function KDCardSelector() {\n    var _this;\n    _classCallCheck(this, KDCardSelector);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _callSuper(this, KDCardSelector, [].concat(args));\n    _this.handleClick = function (e) {\n      var _this$props = _this.props,\n        onClick = _this$props.onClick,\n        beforeAction = _this$props.beforeAction,\n        model = _this$props.model;\n      e.stopPropagation();\n      var pageId = model.pageId;\n      var promise = beforeAction && beforeAction(e) || (0, _waitUpdateValueUtil.waitUpdateValueComplete)(pageId);\n      var event = e.nativeEvent;\n      promise.then(function () {\n        onClick && onClick(event);\n      });\n    };\n    return _this;\n  }\n  _createClass(KDCardSelector, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props2 = this.props,\n        isMulti = _this$props2.isMulti,\n        cardMode = _this$props2.cardMode;\n      if (isMulti && cardMode === 0) return;\n      this.props.getSelectorDom && this.props.getSelectorDom(this.selector);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n      var _this$props3 = this.props,\n        model = _this$props3.model,\n        isSelected = _this$props3.isSelected;\n      var _getCommonClass = (0, _componentutil.getCommonClass)(model),\n        Grow = _getCommonClass.Grow,\n        Shrink = _getCommonClass.Shrink,\n        AlignSelf = _getCommonClass.AlignSelf;\n      var cn = (0, _classnames3[\"default\"])(_defineProperty({}, _KDCardSelector2[\"default\"].selector, true), (0, _commonUtils[\"default\"])({\n        Grow: Grow,\n        Shrink: Shrink,\n        AlignSelf: AlignSelf\n      }));\n      var spanClassName = (0, _classnames3[\"default\"])(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, _KDCardSelector2[\"default\"].selectorImg, true), \"kdfont\", true), 'kdfont-fuxuankuangweixuanzhong_fang', !isSelected), 'kdfont-fuxuankuangxuanzhong_fang', isSelected), 'theme-fc', isSelected), 'kd-hover-color', true));\n      var style = (0, _componentutil.getCommonStyle)(model);\n      var spanStyle = {\n        fontSize: style.fontSize\n      };\n      return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        className: cn,\n        style: style,\n        id: model.key\n      }, /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n        className: spanClassName,\n        style: spanStyle,\n        onClick: this.handleClick,\n        ref: function ref(dom) {\n          _this2.selector = dom;\n        }\n      }));\n    }\n  }]);\n  return KDCardSelector;\n}(_react.Component)) || _class) || _class);\nvar _default = exports[\"default\"] = KDCardSelector;\n\n//# sourceURL=webpack://bos-platform/./src/component/web/KDCardSelector.jsx?");

/***/ }),

/***/ "./src/component/web/KDCardView.js":
/*!*****************************************!*\
  !*** ./src/component/web/KDCardView.js ***!
  \*****************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.from.js */ \"../../node_modules/core-js/modules/es.array.from.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.array.slice.js */ \"../../node_modules/core-js/modules/es.array.slice.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-string.js */ \"../../node_modules/core-js/modules/es.date.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.function.name.js */ \"../../node_modules/core-js/modules/es.function.name.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.create.js */ \"../../node_modules/core-js/modules/es.object.create.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.get-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.set-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.set-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.reflect.construct.js */ \"../../node_modules/core-js/modules/es.reflect.construct.js\");\n__webpack_require__(/*! core-js/modules/es.regexp.exec.js */ \"../../node_modules/core-js/modules/es.regexp.exec.js\");\n__webpack_require__(/*! core-js/modules/es.regexp.to-string.js */ \"../../node_modules/core-js/modules/es.regexp.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.array.concat.js */ \"../../node_modules/core-js/modules/es.array.concat.js\");\n__webpack_require__(/*! core-js/modules/es.array.every.js */ \"../../node_modules/core-js/modules/es.array.every.js\");\n__webpack_require__(/*! core-js/modules/es.array.filter.js */ \"../../node_modules/core-js/modules/es.array.filter.js\");\n__webpack_require__(/*! core-js/modules/es.array.find.js */ \"../../node_modules/core-js/modules/es.array.find.js\");\n__webpack_require__(/*! core-js/modules/es.array.find-index.js */ \"../../node_modules/core-js/modules/es.array.find-index.js\");\n__webpack_require__(/*! core-js/modules/es.array.for-each.js */ \"../../node_modules/core-js/modules/es.array.for-each.js\");\n__webpack_require__(/*! core-js/modules/es.array.includes.js */ \"../../node_modules/core-js/modules/es.array.includes.js\");\n__webpack_require__(/*! core-js/modules/es.array.index-of.js */ \"../../node_modules/core-js/modules/es.array.index-of.js\");\n__webpack_require__(/*! core-js/modules/es.array.is-array.js */ \"../../node_modules/core-js/modules/es.array.is-array.js\");\n__webpack_require__(/*! core-js/modules/es.array.join.js */ \"../../node_modules/core-js/modules/es.array.join.js\");\n__webpack_require__(/*! core-js/modules/es.array.map.js */ \"../../node_modules/core-js/modules/es.array.map.js\");\n__webpack_require__(/*! core-js/modules/es.array.reduce.js */ \"../../node_modules/core-js/modules/es.array.reduce.js\");\n__webpack_require__(/*! core-js/modules/es.array.splice.js */ \"../../node_modules/core-js/modules/es.array.splice.js\");\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\n__webpack_require__(/*! core-js/modules/es.object.assign.js */ \"../../node_modules/core-js/modules/es.object.assign.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.object.values.js */ \"../../node_modules/core-js/modules/es.object.values.js\");\n__webpack_require__(/*! core-js/modules/es.parse-float.js */ \"../../node_modules/core-js/modules/es.parse-float.js\");\n__webpack_require__(/*! core-js/modules/es.parse-int.js */ \"../../node_modules/core-js/modules/es.parse-int.js\");\n__webpack_require__(/*! core-js/modules/es.string.includes.js */ \"../../node_modules/core-js/modules/es.string.includes.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ \"../../node_modules/core-js/modules/web.dom-collections.for-each.js\");\n__webpack_require__(/*! core-js/modules/web.timers.js */ \"../../node_modules/core-js/modules/web.timers.js\");\nvar _react = _interopRequireDefault(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _reactDom = _interopRequireDefault(__webpack_require__(/*! react-dom */ \"webpack/sharing/consume/default/react-dom/react-dom?418d\"));\nvar _classnames4 = _interopRequireDefault(__webpack_require__(/*! classnames */ \"../../node_modules/classnames/index.js\"));\nvar _immutable = __webpack_require__(/*! immutable */ \"webpack/sharing/consume/default/immutable/immutable?f2ca\");\nvar _global = __webpack_require__(/*! @/global */ \"./src/global/index.js\");\nvar _componentutil = __webpack_require__(/*! ../../util/componentutil */ \"./src/util/componentutil.js\");\nvar _componentFactory = _interopRequireDefault(__webpack_require__(/*! ../../factory/componentFactory */ \"./src/factory/componentFactory.js\"));\nvar _serverproperties = __webpack_require__(/*! ../../constant/serverproperties */ \"./src/constant/serverproperties.js\");\nvar _ListCardView = _interopRequireDefault(__webpack_require__(/*! ./base/ListCardView */ \"./src/component/web/base/ListCardView.jsx\"));\nvar _VisibleLockWrap = _interopRequireDefault(__webpack_require__(/*! ../common/VisibleLockWrap */ \"./src/component/common/VisibleLockWrap.js\"));\nvar _gridaction = __webpack_require__(/*! ../../action/gridaction */ \"./src/action/gridaction.js\");\nvar _fieldaction = __webpack_require__(/*! ../../action/fieldaction */ \"./src/action/fieldaction.js\");\nvar _tooltipaction = __webpack_require__(/*! ../../action/tooltipaction */ \"./src/action/tooltipaction.js\");\nvar _appModelFunction = __webpack_require__(/*! ../../model/appModelFunction */ \"./src/model/appModelFunction.js\");\nvar _ToolBar = _interopRequireDefault(__webpack_require__(/*! @/component/web/DataGrid/TableHelper/component/toolBar/ToolBar */ \"./src/component/web/DataGrid/TableHelper/component/toolBar/ToolBar.js\"));\nvar _AttachDataWrap = _interopRequireDefault(__webpack_require__(/*! ../common/AttachDataWrap */ \"./src/component/common/AttachDataWrap.js\"));\nvar _cardMergeModel = __webpack_require__(/*! ../../util/cardMergeModel */ \"./src/util/cardMergeModel.js\");\nvar _LazyLoad = _interopRequireDefault(__webpack_require__(/*! ../common/LazyLoad */ \"./src/component/common/LazyLoad.js\"));\nvar _intlApi = __webpack_require__(/*! ../../i18n/intlApi */ \"./src/i18n/intlApi.js\");\nvar _resizeObserve = _interopRequireDefault(__webpack_require__(/*! @/util/resizeObserve */ \"./src/util/resizeObserve.js\"));\nvar _defaultPropsUtil = __webpack_require__(/*! @/util/defaultPropsUtil */ \"./src/util/defaultPropsUtil.js\");\nvar _customProperties = _interopRequireDefault(__webpack_require__(/*! @/constant/customProperties */ \"./src/constant/customProperties.js\"));\nvar _customCtrlName = _interopRequireDefault(__webpack_require__(/*! @/constant/customCtrlName */ \"./src/constant/customCtrlName.js\"));\nvar _emotionalConst = __webpack_require__(/*! @/constant/emotionalConst */ \"./src/constant/emotionalConst.js\");\nvar _memoryCacher = __webpack_require__(/*! @/model/memoryCacher */ \"./src/model/memoryCacher.js\");\nvar _ctrlMethodConst = __webpack_require__(/*! @/constant/ctrlMethodConst */ \"./src/constant/ctrlMethodConst.js\");\nvar _gridConst = __webpack_require__(/*! @/constant/gridConst */ \"./src/constant/gridConst.js\");\nvar _VirtualView = _interopRequireWildcard(__webpack_require__(/*! @/component/common/VirtualView */ \"./src/component/common/VirtualView.js\"));\nvar _ControlValueChangeContextProvider = _interopRequireDefault(__webpack_require__(/*! @/page/ControlValueChangeContextProvider */ \"./src/page/ControlValueChangeContextProvider.js\"));\nvar _flattenTreeNodes = _interopRequireDefault(__webpack_require__(/*! @/util/flattenTreeNodes */ \"./src/util/flattenTreeNodes.js\"));\nvar _KDCardView2 = _interopRequireDefault(__webpack_require__(/*! ./KDCardView.less */ \"./src/component/web/KDCardView.less\"));\nvar _dec, _class;\n/**\n* 列表-卡片布局(web)\n*/\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nvar LOADER_HEIGHT = 15; // loading元素的高度\nvar MAX_CHANGE_ROWLEN = 10;\nvar KDCardView = (_dec = (0, _VisibleLockWrap[\"default\"])(false), (0, _AttachDataWrap[\"default\"])(_class = _dec(_class = /*#__PURE__*/function (_React$Component) {\n  _inherits(KDCardView, _React$Component);\n  function KDCardView(props) {\n    var _this;\n    _classCallCheck(this, KDCardView);\n    _this = _callSuper(this, KDCardView, [props]);\n    _this.getDataModel = function () {\n      return _this.props.parentModel || _this.props.model;\n    };\n    _this.setPostData = function (postData) {\n      var dataModel = _this.getDataModel();\n      var pageId = dataModel.pageId,\n        key = dataModel.key;\n      _this.props.dispatch((0, _appModelFunction.convertAppModelFunctionAction)((0, _appModelFunction.setControlPostValue)(pageId, key, postData || _this.postData)));\n    };\n    _this.initializePreSelRow = function (data) {\n      _this.preSelRow = -1;\n    };\n    _this.setVirtualViewApi = function (api) {\n      _this.virtualViewApi = api;\n    };\n    _this.invokeControlMethods = function (events) {\n      events.forEach(function (event) {\n        var methodName = event.methodname;\n        switch (methodName) {\n          case _ctrlMethodConst.M_REMOVE_CARD_ROW:\n            _this.initializePreSelRow();\n            break;\n          default:\n            console.info(\"\".concat(methodName, \" is not been implemented\"));\n            break;\n        }\n      });\n    };\n    _this.isArrowDisabled = function () {\n      // 处理前后箭头的禁用\n      var t;\n      clearTimeout(t);\n      t = setTimeout(function () {\n        var singleRow = _this.state.singleRow;\n        var _this$getSrollAreaPar = _this.getSrollAreaParam(false),\n          innerWidth = _this$getSrollAreaPar.innerWidth,\n          outerWidth = _this$getSrollAreaPar.outerWidth,\n          childWidth = _this$getSrollAreaPar.childWidth,\n          fixCardWidth = _this$getSrollAreaPar.fixCardWidth;\n        var showArrow = innerWidth > outerWidth; // 卡片内容未超出外层宽度，不需要出现左右箭头\n        var translate = _this.state.translateX;\n        var index = singleRow[0] ? singleRow[0] + 1 : 0; // 获取当前选中行所在的索引\n\n        var isSplitPage = _this.isSplitPage; // 是否分页\n        var pageRows = _this.pageRows; // 每页条数\n\n        // 如果打开了分页，需要重新计算索引\n        if (isSplitPage === true && index > pageRows) {\n          var pageIndex = _this.pageIndex; // 当前页码\n          index = index - pageRows * (pageIndex - 1);\n        }\n        var selRowCoordinate = fixCardWidth + index * childWidth; // 计算当前选中行所在的位置\n        if (!showArrow || singleRow.length < 1 || selRowCoordinate < outerWidth) {\n          translate = 0; // showArrow 为false的时候，真实长度没有超过视觉宽度，或者当前没有选中行，或者当前选中行未超出视觉宽度，偏移量应为0\n        } else if (selRowCoordinate > outerWidth) {\n          translate = selRowCoordinate - outerWidth; // 当前选中行超出视觉宽度时，选中行正好位于视觉范围最右边\n        }\n        if (_this.state.showArrow !== showArrow || _this.state.translateX !== translate) {\n          _this.setState({\n            showArrow: showArrow,\n            translateX: translate\n          });\n        }\n      }, 100);\n    };\n    _this.getCardModeSelectedData = function () {\n      if (_this.state.isMulti) {\n        return {\n          rowKeys: _this.state.selectRows,\n          rowInfos: _this.state.selectRowsInfos\n        };\n      } else {\n        return {\n          rowKeys: _this.state.singleRow,\n          rowInfos: _this.state.singleRowInfo\n        };\n      }\n    };\n    _this.getPostColsData = function (selectedRowKey, rowKeys, rowInfos, option, fieldKey) {\n      var supposeFields = [];\n      var postCols = _this.getDataModel().getDataProperty(['value', 'postcols']);\n      Object.values(rowInfos).forEach(function (item) {\n        if (postCols && postCols.size > 0) {\n          var supposeItem = [];\n          postCols.forEach(function (x) {\n            return supposeItem.push(item.get(option.get(x)));\n          });\n          supposeFields.push(supposeItem);\n        }\n      });\n      var postData = {\n        fieldKey: fieldKey || '0',\n        // 暂时处理为0\n        row: selectedRowKey,\n        selRows: rowKeys,\n        isClientNewRow: false,\n        clientNewRows: '',\n        selDatas: supposeFields\n      };\n      if (!_this.state.isMulti) {\n        postData.preSelRow = _this.preSelRow;\n      }\n      return postData;\n    };\n    _this.getCards = function (meta, index) {\n      var model = _this.props.model;\n      var LayoutStyle = model.getMetaProperty('ls');\n      var cardType = meta.get('cardType');\n\n      // //用于隐藏与锁定\n      // let viPosition, gridKey;\n      // if(data) {\n      // let option = data.get(DATA_INDEX);\n      // viPosition = option.get('vi');\n      // gridKey = dataModel.key;\n      // }\n\n      // 中间循环卡片\n      if (cardType !== '0') {\n        return _this.getLoopCards(meta, index);\n      }\n\n      // 不参与循环的卡片(即固定卡片)\n      return (0, _componentFactory[\"default\"])(model.pageId, meta, (0, _global.getGlobalState)(), undefined, {\n        key: index,\n        cardType: 0,\n        LayoutStyle: LayoutStyle\n      });\n    };\n    // 卡片基类设置下划线的位置\n    _this.setUnderlinePos = function (pos) {\n      if (_this.isShowUnderline()) {\n        _this.setState({\n          underlinePos: pos\n        });\n      }\n    };\n    _this.isShowUnderline = function () {\n      var model = _this.props.model;\n\n      // 默认为1，整行横向滚动，带下划线箭头；2.flex 布局\n      var LayoutStyle = model.getMetaProperty('ls');\n      var horizonScroll = LayoutStyle === 1; // 1:横向滚动布局， 2:流式布局\n      var showUnderlineTriangle = model.getMetaProperty('point'); // true\n      var rowSize = _this.getRowSize();\n      var hasLoopCard = rowSize > 0;\n      return !_this.state.isMulti && horizonScroll && showUnderlineTriangle && hasLoopCard;\n    };\n    // 获取虚拟列表数据\n    _this.getVitureItems = function (items) {\n      var _this$props = _this.props,\n        model = _this$props.model,\n        parentModel = _this$props.parentModel;\n      var dataModel = parentModel || model;\n      var data = dataModel.getDataValue();\n      var rows = data === null || data === void 0 ? void 0 : data.get('rows');\n      return rows || (0, _immutable.List)();\n    };\n    /**\n     * 渲染固定卡片\n     * @param {*} index  首位=0，末尾-1\n     * @returns\n     */\n    _this.renderFixedCard = function (index) {\n      return function () {\n        var model = _this.props.model;\n        var items = model.getMetaProperty('items');\n        var meta = items.get(index);\n        var LayoutStyle = model.getMetaProperty('ls');\n        var cardType = meta.get('cardType');\n        if (cardType === '0') {\n          // 固定卡片\n          return (0, _componentFactory[\"default\"])(model.pageId, meta, (0, _global.getGlobalState)(), undefined, {\n            key: index,\n            cardType: 0,\n            LayoutStyle: LayoutStyle\n          });\n        }\n        return null;\n      };\n    };\n    /**\n     * 获取底部固定卡片的位置索引\n     * @returns\n     */\n    _this.getFooterFixedCardIndex = function () {\n      var model = _this.props.model;\n      var items = model.getMetaProperty('items');\n      var index = -1;\n      var lastItemMeta = items.get(-1);\n      // 位置可能会移位到第一个固定卡片后面\n      if (items.size === 3 && lastItemMeta.get('cardType') !== '0') {\n        index = 1;\n      }\n      return index;\n    };\n    // 得到虚拟列表参数\n    _this.getRows = function () {\n      var _this$props2 = _this.props,\n        model = _this$props2.model,\n        parentModel = _this$props2.parentModel;\n      var dataModel = parentModel || model;\n      var data = dataModel.getDataValue();\n      var rows = data === null || data === void 0 ? void 0 : data.get('rows');\n      return rows || (0, _immutable.List)();\n    };\n    // 获取卡片中所有自定义控件\n    _this.getAllCustomControls = function (model) {\n      var items = model.getMetaProperty('items');\n\n      // 排除掉固定卡片，只需要普通卡片的元数据，cardType为0是固定卡片\n      var loopCardMeta = items.find(function (item) {\n        var cardType = item.get('cardType');\n        return cardType !== '0';\n      });\n      var getCustomControls = function getCustomControls(loopCardMeta) {\n        var metaList = _immutable.List.isList(loopCardMeta) ? loopCardMeta : [loopCardMeta];\n        var flattenItemNode = (0, _flattenTreeNodes[\"default\"])(metaList, 'items');\n        var customControls = flattenItemNode.filter(function (item) {\n          // 自定义控件或者嵌套子表格\n          return item.get('type') === 'customcontrol' || item.get('type') === 'embedgrid';\n        }).map(function (item) {\n          return item.get('id');\n        });\n        return customControls;\n      };\n      var customControls = getCustomControls(loopCardMeta);\n      return customControls;\n    };\n    // 获取卡片中所有字段的元数据信息\n    _this.getAllCardField = function (model) {\n      var items = model.getMetaProperty('items');\n\n      // 排除掉固定卡片，只需要普通卡片的元数据，cardType为0是固定卡片\n      var loopCardMeta = items.find(function (item) {\n        var cardType = item.get('cardType');\n        return cardType !== '0';\n      });\n      var metaList = _immutable.List.isList(loopCardMeta) ? loopCardMeta : [loopCardMeta];\n      var flattenItemNode = (0, _flattenTreeNodes[\"default\"])(metaList, 'items');\n      var allCardField = flattenItemNode.filter(function (item) {\n        return item.get('type') === 'cardfield';\n      });\n      return allCardField;\n    };\n    // 判断所有卡片字段是不是属于主实体\n    _this.isCardFieldsInMainEntity = function () {\n      var _this$mergeModel;\n      var allCardField = _this.allCardField || _this.getAllCardField(_this.props.model);\n      // 没有配置卡片字段时，不做融合处理\n      if (allCardField.length === 0) return false;\n      var mainEntityKey = (_this$mergeModel = _this.mergeModel) === null || _this$mergeModel === void 0 ? void 0 : _this$mergeModel.getMainEntityKey();\n      return allCardField.every(function (field) {\n        return field.get('entity') === mainEntityKey;\n      });\n    };\n    _this.getRealRenderRows = function () {\n      var _this$props3 = _this.props,\n        model = _this$props3.model,\n        parentModel = _this$props3.parentModel;\n      var dataModel = parentModel || model;\n      var data = dataModel.getDataValue();\n      var option = data.get(_serverproperties.DATA_INDEX);\n      var rowKey = dataModel.getMetaProperty(_serverproperties.ROWKEY);\n      var rows = _this.getRows();\n\n      // 不存在融合模型或者卡片字段有不在主实体时，不融合数据\n      if (!_this.mergeModel || !_this.isCardFieldsInMainEntity()) return rows;\n\n      // 获取融合后的行数据\n      return rows.reduce(function (arr, row) {\n        var rowKeyValue = row.get(option.get(rowKey));\n        var mergeGroupRk = _this.mergeModel.getMainGroupRk(rowKeyValue);\n        if (mergeGroupRk[0] === rowKeyValue) {\n          arr = arr.push(row);\n        }\n        return arr;\n      }, (0, _immutable.List)());\n    };\n    _this.itemRender = function (row, index) {\n      return _this.getLoopCard(row, index);\n    };\n    /**\n    * 获取每个卡片元素\n    * @param {*} row  卡片数据\n    * @param {*} index 卡片位置索引\n    * @returns 卡片元素\n    */\n    _this.getLoopCard = function (row, index) {\n      var _this$props4 = _this.props,\n        model = _this$props4.model,\n        parentModel = _this$props4.parentModel;\n      var dataModel = parentModel || model;\n      var data = dataModel.getDataValue();\n      var items = model.getMetaProperty('items');\n      var loopCardMeta = items.find(function (item) {\n        var cardType = item.get('cardType');\n        return cardType !== '0';\n      });\n      var LayoutStyle = model.getMetaProperty('ls');\n      var fmtinfo = dataModel.getDataProperty('fmtinfo');\n      var colCtrl = dataModel.getDataProperty('colCtrl');\n      var option = data.get(_serverproperties.DATA_INDEX);\n      var rowKey = dataModel.getMetaProperty(_serverproperties.ROWKEY);\n      // 用于隐藏与锁定\n      var viPosition = option.get('vi');\n      var lPosition = option.get('l');\n      var gridKey = dataModel.key;\n      // 整个卡片控件的锁定性\n      var cardViewLocked = _this._getLock();\n      var options = {\n        LayoutStyle: LayoutStyle,\n        fmtinfo: fmtinfo,\n        option: option,\n        rowKey: rowKey,\n        viPosition: viPosition,\n        lPosition: lPosition,\n        gridKey: gridKey,\n        cardViewLocked: cardViewLocked,\n        colCtrl: colCtrl\n      };\n      return _this.createLoopCard(row, index, loopCardMeta, options);\n    };\n    /**\n    * 创建卡片元素\n    * @param {*} row 卡片行数据\n    * @param {*} idx  卡片位置索引\n    * @param {*} meta 卡片元数据\n    * @param {*} options 可选配置项，渲染卡片所需\n    * @returns\n    */\n    _this.createLoopCard = function (row, idx, meta, options) {\n      var _this$props5 = _this.props,\n        model = _this$props5.model,\n        parentModel = _this$props5.parentModel;\n      var dataModel = parentModel || model;\n      // const data = dataModel.getDataValue()\n      var LayoutStyle = options.LayoutStyle,\n        fmtinfo = options.fmtinfo,\n        option = options.option,\n        rowKey = options.rowKey,\n        viPosition = options.viPosition,\n        lPosition = options.lPosition,\n        gridKey = options.gridKey,\n        cardViewLocked = options.cardViewLocked,\n        colCtrl = options.colCtrl;\n      var key = \"loop_\".concat(idx);\n      var rowKeyValue = row.get(option.get(rowKey));\n      var selectedRowKey = row.get(option.get(rowKey));\n      var _this$state = _this.state,\n        isMulti = _this$state.isMulti,\n        singleRow = _this$state.singleRow,\n        selectRows = _this$state.selectRows,\n        cardMode = _this$state.cardMode;\n      var isSelected = isMulti ? selectRows.indexOf(selectedRowKey) > -1 : singleRow.indexOf(selectedRowKey) > -1;\n      var isListView = model.getMetaProperty('cardtype') === 'listcard';\n      // 卡片视图是否允许点击等交互，使用样式屏蔽\n      var disableClick = model.getMetaProperty('disableclick');\n      var rowIndex = _this.mergeModel ? _this.mergeModel.getRowIndex(rowKeyValue) : idx;\n      return (0, _componentFactory[\"default\"])(model.pageId, meta, (0, _global.getGlobalState)(), undefined, {\n        data: row,\n        key: key,\n        rowIndex: rowIndex,\n        keyIndex: rowKeyValue,\n        option: option,\n        fmtinfo: fmtinfo,\n        gridKey: dataModel.key,\n        rowKey: rowKey,\n        cardType: 1,\n        LayoutStyle: LayoutStyle,\n        isSelected: isSelected,\n        onClick: function onClick(e) {\n          return _this.handleCardClick(e, row, option, rowKey);\n        },\n        activeRow: _this.activeRow.bind(_assertThisInitialized(_this), row, option, rowKey),\n        activeFocusRow: function activeFocusRow() {\n          return _this.activeFocusRow(row, option, rowKey);\n        },\n        setSelRows: _this.setSelRows.bind(_assertThisInitialized(_this), selectedRowKey),\n        cardViewLocked: cardViewLocked,\n        setUnderlinePos: _this.setUnderlinePos,\n        isMulti: isMulti,\n        cardMode: cardMode,\n        colCtrl: colCtrl,\n        isListView: isListView,\n        parentLocked: cardViewLocked,\n        getCardVisible: function getCardVisible(subModel) {\n          return (0, _componentutil.getCardVisible)(subModel, undefined, undefined, gridKey, viPosition, rowIndex);\n        },\n        getCardLocked: function getCardLocked(subModel) {\n          // 父容器锁定，则直接锁定子元素\n          if (cardViewLocked) {\n            return true;\n          } else {\n            return (0, _componentutil.getCardLocked)(subModel, undefined, undefined, gridKey, lPosition, rowIndex);\n          }\n        },\n        disableClick: disableClick\n      });\n    };\n    _this.getLoopCards = function (meta, index) {\n      var _this$props6 = _this.props,\n        model = _this$props6.model,\n        parentModel = _this$props6.parentModel;\n      var dataModel = parentModel || model;\n      var data = dataModel.getDataValue();\n      if (!data) return null;\n      var LayoutStyle = model.getMetaProperty('ls');\n      var isScrollLoad = model.getMetaProperty('scrollload'); // 是否启用滚动加载\n      var horizonScroll = LayoutStyle === 1; // 1:横向滚动布局， 2:流式布局\n      var fmtinfo = dataModel.getDataProperty('fmtinfo');\n      var colCtrl = dataModel.getDataProperty('colCtrl');\n      var rows = _this.getRealRenderRows();\n      var option = data.get(_serverproperties.DATA_INDEX);\n      var isSplitPage = data.get('isSplitPage', true); // 是否分页\n      var rowKey = dataModel.getMetaProperty(_serverproperties.ROWKEY);\n      // 用于隐藏与锁定\n      var viPosition = option.get('vi');\n      var lPosition = option.get('l');\n      var gridKey = dataModel.key;\n      // （多选 || 不是横向滚动布局） && 不是(滚动加载 && 分页) && 有行数据 && 行数据大于50条时，开启懒加载\n      var lazyLoadAllow = (_this.state.isMulti || !horizonScroll) && !(isScrollLoad && isSplitPage) && rows && rows.size > 50;\n\n      // 整个卡片控件的锁定性\n      var cardViewLocked = _this._getLock();\n      var locale = model.getUserLocale();\n      var defaultLocalId = model.getDefaultLang();\n      var width = meta.getIn(['w', locale]) || meta.getIn(['w', defaultLocalId]);\n      var height = meta.getIn(['h', locale]) || meta.getIn(['h', defaultLocalId]);\n      var options = {\n        LayoutStyle: LayoutStyle,\n        fmtinfo: fmtinfo,\n        option: option,\n        rowKey: rowKey,\n        viPosition: viPosition,\n        lPosition: lPosition,\n        gridKey: gridKey,\n        cardViewLocked: cardViewLocked,\n        colCtrl: colCtrl,\n        lazyLoadAllow: lazyLoadAllow\n      };\n      var createCard = function createCard(row, idx) {\n        var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n          LayoutStyle = _ref.LayoutStyle,\n          fmtinfo = _ref.fmtinfo,\n          option = _ref.option,\n          rowKey = _ref.rowKey,\n          viPosition = _ref.viPosition,\n          lPosition = _ref.lPosition,\n          gridKey = _ref.gridKey,\n          cardViewLocked = _ref.cardViewLocked,\n          colCtrl = _ref.colCtrl,\n          lazyLoadAllow = _ref.lazyLoadAllow;\n        var rowKeyValue = row.get(option.get(rowKey));\n        var rowIndex = _this.mergeModel ? _this.mergeModel.getRowIndex(rowKeyValue) : idx;\n        var key = \"\".concat(index, \"_\").concat(rowIndex);\n        var selectedRowKey = row.get(option.get(rowKey));\n        var _this$state2 = _this.state,\n          isMulti = _this$state2.isMulti,\n          singleRow = _this$state2.singleRow,\n          selectRows = _this$state2.selectRows,\n          cardMode = _this$state2.cardMode;\n        var isSelected = isMulti ? selectRows.indexOf(selectedRowKey) > -1 : singleRow.indexOf(selectedRowKey) > -1;\n        var isListView = model.getMetaProperty('cardtype') === 'listcard';\n        // 懒加载时会多加一层div,样式会设置两次，如果是设置百分比的宽高会有问题,这里懒加载时删掉卡片行的宽高\n        var ignoreStyles = [];\n        if (lazyLoadAllow) {\n          if (width && width.indexOf('%') !== -1) {\n            ignoreStyles.push('width');\n          }\n          if (height && height.indexOf('%') !== -1) {\n            ignoreStyles.push('height');\n          }\n        }\n        return (0, _componentFactory[\"default\"])(model.pageId, meta, (0, _global.getGlobalState)(), undefined, {\n          data: row,\n          key: key,\n          rowIndex: rowIndex,\n          keyIndex: rowKeyValue,\n          option: option,\n          fmtinfo: fmtinfo,\n          gridKey: dataModel.key,\n          rowKey: rowKey,\n          cardType: 1,\n          LayoutStyle: LayoutStyle,\n          isSelected: isSelected,\n          onClick: function onClick(e) {\n            return _this.handleCardClick(e, row, option, rowKey);\n          },\n          activeRow: _this.activeRow.bind(_assertThisInitialized(_this), row, option, rowKey),\n          activeFocusRow: function activeFocusRow() {\n            return _this.activeFocusRow(row, option, rowKey);\n          },\n          setSelRows: _this.setSelRows.bind(_assertThisInitialized(_this), selectedRowKey),\n          cardViewLocked: cardViewLocked,\n          setUnderlinePos: _this.setUnderlinePos,\n          isMulti: isMulti,\n          cardMode: cardMode,\n          colCtrl: colCtrl,\n          isListView: isListView,\n          ignoreStyles: ignoreStyles,\n          getCardVisible: function getCardVisible(subModel) {\n            return (0, _componentutil.getCardVisible)(subModel, undefined, undefined, gridKey, viPosition, rowIndex);\n          },\n          getCardLocked: function getCardLocked(subModel) {\n            // 父容器锁定，则直接锁定子元素\n            if (cardViewLocked) {\n              return true;\n            } else {\n              return (0, _componentutil.getCardLocked)(subModel, undefined, undefined, gridKey, lPosition, rowIndex);\n            }\n          }\n        });\n      };\n\n      // 前端容错，后端发过来的元数据中，同一个属性不同语言的值不一样\n      // 发现后台元数据有过值为‘px’的问题，容错处理\n      if (width === 'px') {\n        width = undefined;\n      }\n      if (height === 'px') {\n        height = undefined;\n      }\n      var borderStyle = (0, _componentutil.getBorderStyle)(meta);\n      var marginBottom = borderStyle.marginBottom,\n        marginLeft = borderStyle.marginLeft,\n        marginRight = borderStyle.marginRight,\n        marginTop = borderStyle.marginTop;\n      marginBottom = marginBottom ? parseFloat(marginBottom) : 0;\n      marginLeft = marginLeft ? parseFloat(marginLeft) : 0;\n      marginRight = marginRight ? parseFloat(marginRight) : 0;\n      marginTop = marginTop ? parseFloat(marginTop) : 0;\n      if (width && width.indexOf('px') !== -1) {\n        width = marginLeft + marginRight + parseFloat(width) + 'px';\n      }\n      if (height && height.indexOf('px') !== -1) {\n        height = marginTop + marginBottom + parseFloat(height) + 'px';\n      }\n      var backgroundColor = meta.get('bc');\n      var flexShrink = meta.get(_serverproperties.FLEX_SHRINK) || 0; // 兼容edge browser\n      var style = Object.assign({\n        width: width,\n        height: height\n      }, {\n        backgroundColor: backgroundColor,\n        flexShrink: flexShrink\n      });\n      var visibleRows = rows.map(function (row, idx) {\n        return (0, _componentutil.getCardVisible)(model, meta.get('id'), undefined, gridKey, viPosition, idx);\n      });\n      return /*#__PURE__*/_react[\"default\"].createElement(_LazyLoad[\"default\"], {\n        key: index,\n        lazyLoadAllow: lazyLoadAllow,\n        items: rows,\n        visibleRows: visibleRows,\n        options: options,\n        style: style,\n        render: createCard\n      });\n    };\n    _this.getPrevButton = function (hasUnderline) {\n      var preDisabled = _this.state.preDisabled;\n      var cn = (0, _classnames4[\"default\"])(_KDCardView2[\"default\"]['pre-btn'], _KDCardView2[\"default\"].arrow, _defineProperty(_defineProperty({}, _KDCardView2[\"default\"].disabled, preDisabled), _KDCardView2[\"default\"]['has-underline'], hasUnderline));\n      return /*#__PURE__*/_react[\"default\"].createElement(\"a\", {\n        onClick: preDisabled ? null : _this.handlePre,\n        className: cn\n      }, /*#__PURE__*/_react[\"default\"].createElement(\"i\", null));\n    };\n    _this.getNextButton = function (hasUnderline) {\n      var nextDisabled = _this.state.nextDisabled;\n      var cn = (0, _classnames4[\"default\"])(_KDCardView2[\"default\"]['next-btn'], _KDCardView2[\"default\"].arrow, _defineProperty(_defineProperty({}, _KDCardView2[\"default\"].disabled, nextDisabled), _KDCardView2[\"default\"]['has-underline'], hasUnderline));\n      return /*#__PURE__*/_react[\"default\"].createElement(\"a\", {\n        onClick: nextDisabled ? null : _this.handleNext,\n        className: cn\n      }, /*#__PURE__*/_react[\"default\"].createElement(\"i\", null));\n    };\n    _this.handleNext = function (e) {\n      e.stopPropagation();\n      var _this$getSrollAreaPar2 = _this.getSrollAreaParam(),\n        innerWidth = _this$getSrollAreaPar2.innerWidth;\n      var translateX = _this.state.translateX;\n      var scrollBoxWidth = _this.listNode && _this.listNode.offsetWidth || 0;\n\n      // 有剩余未显示空间\n      if (innerWidth > scrollBoxWidth && translateX + scrollBoxWidth < innerWidth) {\n        // 剩余不足一屏的空间\n        var translateDis = innerWidth - translateX - scrollBoxWidth > scrollBoxWidth ? translateX + scrollBoxWidth : innerWidth - scrollBoxWidth;\n        _this.setState({\n          translateX: translateDis\n        });\n      }\n    };\n    _this.handlePre = function (e) {\n      e.stopPropagation();\n      var translateX = _this.state.translateX;\n      var scrollBoxWidth = _this.listNode && _this.listNode.offsetWidth || 0;\n      if (translateX > 0) {\n        var translateDis = translateX > scrollBoxWidth ? translateX - scrollBoxWidth : 0;\n        _this.setState({\n          translateX: translateDis\n        });\n      }\n    };\n    _this.getToolbarLocation = function () {\n      var model = _this.props.model;\n      // 元数据优先级高于主题配置 工具栏的位置 0：上 1：下\n      var toolbarLocation = model.getMetaProperty('tl');\n      if (['0', '1'].indexOf(toolbarLocation) < 0) {\n        toolbarLocation = (0, _defaultPropsUtil.getUIDefaultProps)(_customCtrlName[\"default\"].CARD, [_customProperties[\"default\"].TOOLBAR_LOCATION]);\n      }\n      return toolbarLocation || '0';\n    };\n    _this.getPageType = function () {\n      var model = _this.props.model;\n      // 元数据优先级高于主题配置 分页样式 基础（basic)、单据(bill)、简化(simple)、少页(less)和精细(nicety)可选\n      var pageType = model.getMetaProperty('pt');\n      if (!pageType) {\n        pageType = (0, _defaultPropsUtil.getUIDefaultProps)(_customCtrlName[\"default\"].CARD, [_customProperties[\"default\"].PAGE_TYPE]);\n      }\n      return pageType;\n    };\n    _this.getToolPanel = function () {\n      var _this$props7 = _this.props,\n        parentModel = _this$props7.parentModel,\n        model = _this$props7.model,\n        dispatch = _this$props7.dispatch;\n      if (model.getMetaProperty('scrollload')) return null; // 卡片分录滚动加载不带分页\n      var dataModel = parentModel || model;\n      var data = dataModel.getDataValue();\n      var rowSize = _this.getRowSize();\n      var rowSelection = _this.state.isMulti ? 'multiple' : 'single';\n      var gridId = dataModel.key;\n      var isListView = model.getMetaProperty('cardtype') === 'listcard';\n      var maxPageSize = parentModel && parentModel.getMetaProperty('maxPageSize') || (isListView ? _gridConst.DEFAULT_MAX_PAGE_SIZE : _gridConst.ENTRY_MAX_PAGE_SIZE);\n      var toolPanel = null;\n      var phide = model.getMetaProperty('phide') !== false; // 卡片视图没有此属性， 不显示分页\n      var toolbarLocation = _this.getToolbarLocation();\n      // let hasFilter = dataModel.getMetaLocaleProperty('hasFilter') || false  // 卡片分录工具栏上是否显示参数过滤信息\n      var style = toolbarLocation !== '1' ? {\n        marginBottom: '10px',\n        borderColor: '#fff'\n      } : {\n        marginTop: '10px',\n        borderColor: '#fff'\n      };\n      if (!phide && parentModel && data && data.get('isSplitPage', true)) {\n        var thisdatas = data.toJS();\n        toolPanel = /*#__PURE__*/_react[\"default\"].createElement(_ToolBar[\"default\"], {\n          key: \"cardviewPage\",\n          style: style,\n          className: \"kd-cq-card-toolbar\",\n          pageId: dataModel.pageId,\n          model: dataModel,\n          showFormByTips: function showFormByTips() {\n            return dispatch(_tooltipaction.showFormByTips.apply(void 0, arguments));\n          },\n          isSplitPage: thisdatas.isSplitPage || true,\n          pageindex: thisdatas.pageindex || 1,\n          rowcount: rowSize === -1 ? thisdatas.rowcount : rowSize,\n          datacount: thisdatas.datacount || 0,\n          pagerows: thisdatas.pagerows || 0,\n          pagecount: thisdatas.pagecount || 1,\n          limitdatacount: thisdatas.limitdatacount || 0,\n          realPageCount: thisdatas.realPageCount == null ? 0 : thisdatas.realPageCount,\n          rowSelection: rowSelection,\n          selectClick: function selectClick(e, selected, suppressPost) {\n            return _this.selectedAll(e, selected, suppressPost);\n          },\n          gridKey: gridId,\n          toolBarBtnClick: _this.toolBarBtnClick.bind(_assertThisInitialized(_this)),\n          setAmountOperation: _this.setAmountOperation.bind(_assertThisInitialized(_this)),\n          getRealPageCount: _this.getRealPageCount.bind(_assertThisInitialized(_this)),\n          handleFuncs: _this.handleFuncs.bind(_assertThisInitialized(_this)),\n          invokeControlMethodOnly: function invokeControlMethodOnly() {\n            return dispatch(_gridaction.invokeControlMethodOnly.apply(void 0, arguments));\n          },\n          isListView: isListView,\n          maxPageSize: maxPageSize,\n          pageType: _this.getPageType(),\n          isEntryEntity: model.getMetaProperty('cardtype') === undefined\n        });\n      }\n      return toolPanel;\n    };\n    _this.throttleScroll = function (e) {\n      // 简单节流处理\n      e.persist();\n      if (_this.scrollTimer) return;\n      _this.scrollTimer = setTimeout(function () {\n        _this.onScroll(e);\n        _this.scrollTimer = null;\n      }, 200);\n    };\n    _this.onScroll = function (e) {\n      if (_this.isLoadding) return;\n      var _target = e.target;\n      var scrollTop = _target.scrollTop;\n      var scrollHeight = _target.scrollHeight;\n      var clientHeight = _target.clientHeight;\n      var _this$props8 = _this.props,\n        parentModel = _this$props8.parentModel,\n        model = _this$props8.model,\n        dispatch = _this$props8.dispatch;\n      var dataModel = parentModel || model;\n      var data = dataModel.getDataValue();\n      var noAppendRow = data && data.get('noAppendRow');\n      if (scrollTop + clientHeight + LOADER_HEIGHT >= scrollHeight && !noAppendRow) {\n        _this.isLoadding = true;\n        var pageIndex = data && data.get('pageindex');\n        dispatch((0, _gridaction.setAmountOperation)(parentModel || model, pageIndex, 'setNextpageData'));\n      }\n    };\n    _this.resetListViewScrollBar = function (nextProps) {\n      var isScrollLoad = _this.getIsScrollLoad(nextProps);\n      var isListView = nextProps.model.getMetaProperty('cardtype') === 'listcard';\n      // 卡片列表非滚动加载数据改变时重置滚动条，暂不处理分录(翻页，左树点击的场景)\n      var shouldResetScroll = isListView && !isScrollLoad;\n      if (shouldResetScroll) {\n        var _this$virtualViewApi;\n        (_this$virtualViewApi = _this.virtualViewApi) === null || _this$virtualViewApi === void 0 || _this$virtualViewApi.resetScrollBar();\n      }\n    };\n    // 是否需要滚动加载数据\n    _this.isScrollLoadData = function () {\n      var data = _this.getDataModel().getDataValue();\n      var isScrollLoad = _this.getIsScrollLoad(_this.props);\n      if (isScrollLoad && data) {\n        var dataCount = data.get('datacount'); // 所有数据总行数\n        var rows = data.get('rows');\n\n        // size等于datCount时，不再需要滚动加载数据\n        if (rows && rows.size < dataCount) {\n          return true;\n        }\n      }\n      return false;\n    };\n    // 更新分页，页数等信息\n    _this.updateDataDesc = function (data) {\n      var pageIndex = data.get('pageindex'); // 当前页码\n      var pageRows = data.get('pagerows'); // 每页显示数\n      var isSplitPage = data.get('isSplitPage', true); // 是否分页\n      _this.isSplitPage = isSplitPage;\n      _this.pageIndex = pageIndex;\n      _this.pageRows = pageRows;\n    };\n    _this.getFixedCardDataHashCode = function () {\n      var model = _this.props.model;\n      var pageId = model.pageId;\n      var items = model.getMetaProperty('items') || (0, _immutable.List)();\n      var fixedCardMeta = items.filter(function (item) {\n        var cardType = item.get('cardType');\n        return cardType === '0';\n      });\n      if (fixedCardMeta.size === 0) return '';\n      return fixedCardMeta.reduce(function (str, meta) {\n        var key = meta.get('id');\n        var data = (0, _appModelFunction.getData)(pageId, key)((0, _global.getGlobalState)());\n        str += (data === null || data === void 0 ? void 0 : data.hashCode()) || '';\n        return str;\n      }, '');\n    };\n    var _model2 = props.parentModel || props.model;\n    var _isMulti = _model2.getMetaProperty('ismul') !== false;\n    var _cardMode = _model2.getDataProperty('cardmode') || 0; // 卡片模式，0为默认，1为购物车模式。。。\n    _this.state = {\n      isMulti: _isMulti,\n      singleRow: [],\n      // 单选时选中行\n      singleRowInfo: [],\n      selectRows: [],\n      // 多选所有的选中行的key值 [0, 1, 2]\n      selectRowsInfos: [],\n      cardMode: _cardMode,\n      underlinePos: {\n        left: '-100px'\n      },\n      // 计算位置需要cardrowpanel显示指定宽度大小，没有选中行时，隐藏三角箭头\n      translateX: 0,\n      // 滚动区内容偏移\n      showArrow: false\n    };\n    _this.clickTimer = null;\n    _this.postData = {};\n    _this.preSelRow = -1; // 单选时，记住上一行点击的行号\n    _this.buildCardMergeModel = _this.buildCardMergeModel.bind(_assertThisInitialized(_this));\n    _this.setRowSpan = _this.setRowSpan.bind(_assertThisInitialized(_this));\n    _this.pageIndex = 1;\n    _this.pageRows = 20;\n    _this.isSplitPage = true;\n    _this.forAutoTestActions = {\n      toolBarBtnClick: _gridaction.toolBarBtnClick,\n      entryRowDoubleClick: _gridaction.entryRowDoubleClick,\n      EntityRowClick: _gridaction.EntityRowClick,\n      setAmountOperation: _gridaction.setAmountOperation,\n      hyperLinkClick: _gridaction.hyperLinkClick,\n      cellChange: _gridaction.cellChange,\n      cardValueChange: _gridaction.cardValueChange,\n      invokeControlMethodOnly: _gridaction.invokeControlMethodOnly,\n      setItemByNumber: _fieldaction.setItemByNumber\n    };\n    return _this;\n  }\n  _createClass(KDCardView, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n      var _this$props9 = this.props,\n        model = _this$props9.model,\n        parentModel = _this$props9.parentModel;\n      var dataModel = parentModel || model;\n      this.allCardField = this.getAllCardField(model);\n      this.allCustomControls = this.getAllCustomControls(model);\n      if (!this.state.isMulti) {\n        this.removeDirectivesListener = (0, _memoryCacher.subscribeControlMethod)(dataModel.pageId, \"\".concat(dataModel.pageId, \"_\").concat(dataModel.key), 'directives', function (pageData) {\n          if (pageData === undefined) {\n            return;\n          }\n          _this2.invokeControlMethods(pageData);\n        });\n        this.removeRemoveRowsListener = (0, _memoryCacher.subscribeControlMethod)(dataModel.pageId, dataModel.key, 'deleteRows', function (pageData) {\n          if (pageData === undefined) {\n            return;\n          }\n          _this2.initializePreSelRow(pageData);\n        });\n        if (model.getMetaProperty('ls') === 1) {\n          var innerNode = _reactDom[\"default\"].findDOMNode(this.innerNode);\n          var handleInnerNodeWidthChange = function handleInnerNodeWidthChange(rect) {\n            if (!rect.hide) {\n              _this2.isArrowDisabled();\n            }\n          };\n          this.removeInnerNodeResizeObserve = innerNode ? (0, _resizeObserve[\"default\"])(innerNode, handleInnerNodeWidthChange) : null;\n        }\n      }\n      var selectedRows = dataModel.getDataProperty(['slctState', 'slcted']);\n      if (selectedRows && selectedRows.size > 0 && selectedRows.get(0).size > 0) {\n        this.setSelectRows(selectedRows);\n      }\n      this._resizeObserve = this.cardViewDom ? (0, _resizeObserve[\"default\"])(this.cardViewDom, this.isArrowDisabled) : null;\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.dispose = true;\n      this.mergeModel = null;\n      if (!this.state.isMulti) {\n        this.removeRemoveRowsListener && this.removeRemoveRowsListener();\n      }\n      if (this._resizeObserve) {\n        this._resizeObserve.removeResizeObserve();\n        this._resizeObserve = null;\n      }\n      this.removeInnerNodeResizeObserve && this.removeInnerNodeResizeObserve.removeResizeObserve();\n    }\n  }, {\n    key: \"setSelRows\",\n    value:\n    // 显示为超链接的字段在点击时，永远为选中卡片，不会反选\n    function setSelRows(selectedRowKey) {\n      var _this$props10 = this.props,\n        parentModel = _this$props10.parentModel,\n        model = _this$props10.model;\n      var _this$state3 = this.state,\n        selectRows = _this$state3.selectRows,\n        selectRowsInfos = _this$state3.selectRowsInfos,\n        singleRow = _this$state3.singleRow,\n        singleRowInfo = _this$state3.singleRowInfo;\n      var dataModel = parentModel || model;\n      var data = dataModel.getDataValue();\n      if (!data) return null;\n      var rows = data.get('rows');\n      if (!rows || rows.size === 0) return null;\n      var option = data.get(_serverproperties.DATA_INDEX);\n      var rowKey = dataModel.getMetaProperty(_serverproperties.ROWKEY);\n      // let postcols = dataModel.getDataProperty(['value', 'postcols']);\n      var selRowsInfo, rowIndex, postData;\n      rows.map(function (row) {\n        var index = row.get(option.get(rowKey));\n        if (index === selectedRowKey) {\n          selRowsInfo = row;\n        }\n      }); // 取跟selectedRowKey相对应的selRowsInfo\n\n      if (this.state.isMulti) {\n        rowIndex = this.state.selectRows.indexOf(selectedRowKey);\n        if (rowIndex === -1) {\n          selectRows.push(selectedRowKey);\n          selectRowsInfos.push(selRowsInfo);\n        }\n        postData = this.getPostColsData(selectedRowKey, selectRows, selectRowsInfos, option);\n      } else {\n        rowIndex = this.state.singleRow.indexOf(selectedRowKey);\n        if (rowIndex === -1) {\n          singleRow = [selectedRowKey];\n          singleRowInfo = [selRowsInfo];\n        }\n        postData = this.getPostColsData(selectedRowKey, singleRow, singleRowInfo, option);\n      }\n      if (postData.selDatas === null) {\n        delete postData.selDatas;\n      }\n      this.postData = postData;\n      this.setPostData(postData);\n    }\n\n    /**\n    * mousedown 事件会在click事件之前执行，\n    * activeRow 方法设置postData\n    */\n  }, {\n    key: \"handleCardClick\",\n    value: function handleCardClick(e, row, option, rowKey) {\n      var _this3 = this;\n      e.stopPropagation();\n      var dataModel = this.getDataModel();\n      var pageId = dataModel.pageId,\n        key = dataModel.key;\n      var selectedRowKey = row.get(option.get(rowKey));\n      var dispatch = this.props.dispatch;\n      // let merge = this.props.getMergeMethod();\n      // let seldRowKey = merge ? merge(selectedRowKey)[0] : selectedRowKey\n      // if (seldRowKey !== undefined) {\n      // selectedRowKey = seldRowKey\n      // }\n      if (this.mergeModel) {\n        selectedRowKey = this.mergeModel.getMainGroupRk(selectedRowKey)[0];\n      }\n      if (this.clickTimer) {\n        this.setPostData();\n        if (this.lastClickRow === selectedRowKey) {\n          dispatch((0, _gridaction.entryRowDoubleClick)({\n            pageId: pageId,\n            key: key\n          }, [selectedRowKey]));\n        } else {\n          dispatch((0, _gridaction.EntityRowClick)({\n            pageId: pageId,\n            key: key\n          }, [selectedRowKey]));\n        }\n        clearTimeout(this.clickTimer);\n        this.clickTimer = null;\n      } else {\n        dispatch((0, _gridaction.EntityRowClick)({\n          pageId: pageId,\n          key: key\n        }, [selectedRowKey]));\n        this.clickTimer = setTimeout(function () {\n          _this3.clickTimer = null;\n        }, 300);\n      }\n      this.lastClickRow = selectedRowKey;\n    }\n\n    /**\n    * @param [boolean] labelSelect from label,image\n    * @decription 卡片内部的label点击操作针对当前的卡片，在label mousedown始终选中当前卡片，cardrowpanel的mousedown会提前执行一次。\n    */\n  }, {\n    key: \"activeRow\",\n    value: function activeRow(row, option, rowKey, labelSelect, fieldKey) {\n      var selector = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : false;\n      var postData = this.getSelectRowsPostData(row, option, rowKey, labelSelect, fieldKey, selector);\n      this.postData = postData;\n      this.setPostData();\n      var selectedRowKey = row.get(option.get(rowKey));\n      this.preSelRow = selectedRowKey;\n    }\n\n    // 仅更新焦点行，其他选中行信息不变\n  }, {\n    key: \"activeFocusRow\",\n    value: function activeFocusRow(row, option, rowKey) {\n      var selectedRowKey = row.get(option.get(rowKey));\n      if (selectedRowKey === undefined) return;\n      var res = this.getCardModeSelectedData();\n      // fieldKey只有在点击控件传控件标识，这里一般是字段调用，传'0'即可\n      var fieldKey = '0';\n      var postData = this.getPostColsData(selectedRowKey, res.rowKeys, res.rowInfos, option, fieldKey);\n      this.setPostData(postData);\n    }\n  }, {\n    key: \"getSelectedMergeRows\",\n    value: function getSelectedMergeRows(selectedRowKey) {\n      var _this$props11 = this.props,\n        parentModel = _this$props11.parentModel,\n        model = _this$props11.model;\n      var dataModel = parentModel || model;\n      var data = dataModel.getDataValue();\n      if (!data || !this.mergeModel) return {};\n      var selectedMergeRowKeys = this.mergeModel.getMainGroupRk(selectedRowKey);\n      var rows = data.get('rows');\n      var option = data.get(_serverproperties.DATA_INDEX);\n      var rowKey = dataModel.getMetaProperty(_serverproperties.ROWKEY);\n      var selectedMergeRows = [];\n      if (rows && rows.size) {\n        rows.forEach(function (item, index) {\n          var _rowkey = item.get(option.get(rowKey));\n          if (selectedMergeRowKeys.includes(_rowkey)) {\n            selectedMergeRows.push(item);\n          }\n          ;\n        });\n      }\n      return {\n        selectedMergeRowKeys: selectedMergeRowKeys,\n        selectedMergeRows: selectedMergeRows\n      };\n    }\n  }, {\n    key: \"doMultiClick\",\n    value: function doMultiClick(row, selectedRowKey, labelSelect) {\n      var _this$state4 = this.state,\n        selectRows = _this$state4.selectRows,\n        selectRowsInfos = _this$state4.selectRowsInfos;\n      var rowIndex = selectRows.indexOf(selectedRowKey);\n      var _this$getSelectedMerg = this.getSelectedMergeRows(selectedRowKey),\n        selectedMergeRowKeys = _this$getSelectedMerg.selectedMergeRowKeys,\n        selectedMergeRows = _this$getSelectedMerg.selectedMergeRows;\n      var selectedRowKeys = selectedMergeRowKeys || [selectedRowKey];\n      var selectedRows = selectedMergeRows || [row];\n      if (labelSelect) {\n        if (rowIndex === -1) {\n          selectRows.push.apply(selectRows, _toConsumableArray(selectedRowKeys));\n          selectRowsInfos.push.apply(selectRowsInfos, _toConsumableArray(selectedRows));\n        }\n      } else {\n        if (!this.clickTimer || this.lastClickRow !== selectedRowKey) {\n          if (rowIndex > -1) {\n            selectRows.splice(rowIndex, selectedRowKeys.length);\n            selectRowsInfos.splice(rowIndex, selectedRowKeys.length);\n          } else {\n            selectRows.push.apply(selectRows, _toConsumableArray(selectedRowKeys));\n            selectRowsInfos.push.apply(selectRowsInfos, _toConsumableArray(selectedRows));\n          }\n        } else if (rowIndex === -1) {\n          // 双击连续点击同一行，最后状态为选中\n          selectRows.push.apply(selectRows, _toConsumableArray(selectedRowKeys));\n          selectRowsInfos.push.apply(selectRowsInfos, _toConsumableArray(selectedRows));\n        }\n      }\n      this.setSelectedRowsCount && this.setSelectedRowsCount(selectRows.length);\n      this.updateSelectInfo(selectRows, selectRowsInfos);\n\n      // 前面直接操作了state对象，不需要等到setState更新\n      return {\n        rowKeys: this.state.selectRows,\n        rowInfos: this.state.selectRowsInfos\n      };\n    }\n  }, {\n    key: \"doSingleClick\",\n    value: function doSingleClick(row, selectedRowKey, selector) {\n      var singleRow = this.state.singleRow;\n      var _this$getSelectedMerg2 = this.getSelectedMergeRows(selectedRowKey),\n        selectedMergeRowKeys = _this$getSelectedMerg2.selectedMergeRowKeys,\n        selectedMergeRows = _this$getSelectedMerg2.selectedMergeRows;\n      var selectedRowKeys = selectedMergeRowKeys || [selectedRowKey];\n      var selectedRows = selectedMergeRows || [row];\n      if (selector) {\n        var rowIndex = singleRow.indexOf(selectedRowKey);\n        if (rowIndex > -1) {\n          this.updateSelectInfo([], []);\n          return {\n            rowKeys: [],\n            rowInfos: []\n          };\n        } else {\n          this.updateSelectInfo(selectedRowKeys, selectedRows);\n        }\n      } else {\n        // 单击始终选中一行\n        selectedRowKey = selectedRowKey == null ? -1 : selectedRowKey;\n        this.setSelectedRowsCount && this.setSelectedRowsCount(selectedRowKey === -1 ? 0 : 1);\n        this.updateSelectInfo(selectedRowKeys, selectedRows);\n      }\n      return {\n        rowKeys: selectedRowKeys,\n        rowInfos: selectedRows\n      };\n    }\n  }, {\n    key: \"updateSelectInfo\",\n    value: function updateSelectInfo(row, rowInfo) {\n      if (this.state.isMulti) {\n        this.setState({\n          selectRows: row,\n          selectRowsInfos: rowInfo\n        });\n      } else {\n        this.setState({\n          singleRow: row,\n          singleRowInfo: rowInfo\n        });\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      var _this4 = this;\n      var prevModel = prevProps.model,\n        prevParentModel = prevProps.parentModel;\n      var _this$props12 = this.props,\n        model = _this$props12.model,\n        parentModel = _this$props12.parentModel;\n      var _prevModel, _model;\n      if (prevParentModel) {\n        _prevModel = prevParentModel;\n        _model = parentModel;\n      } else {\n        _prevModel = prevModel;\n        _model = model;\n      }\n      if (!(0, _immutable.is)(prevModel.getMetaProperty('items'), model.getMetaProperty('items'))) {\n        this.allCardField = this.getAllCardField(model);\n        this.allCustomControls = this.getAllCustomControls(model);\n      }\n      if (!(0, _immutable.is)(_prevModel.getDataProperty(['slctState']), _model.getDataProperty(['slctState']))) {\n        var selectedRows = _model.getDataProperty(['slctState', 'slcted']) || (0, _immutable.List)();\n        var selected = selectedRows ? selectedRows.toJS() : [];\n        if (Array.isArray(selected) && selected[0] && Array.isArray(selected[0])) {\n          selected = selected[0];\n        }\n        var preSlctState = _prevModel.getDataProperty(['slctState']);\n        this.selectedRows = selectedRows;\n        if (!(preSlctState === undefined && selected.length === 0)) {\n          this.setSelectRows(selectedRows);\n        }\n      }\n      if (!(0, _immutable.is)(_prevModel.getDataProperty(['fcsState']), _model.getDataProperty(['fcsState']))) {\n        var _model$getDataPropert;\n        var focusRow = ((_model$getDataPropert = _model.getDataProperty(['fcsState', 'fcs'])) === null || _model$getDataPropert === void 0 ? void 0 : _model$getDataPropert.toJS()) || [];\n        if (focusRow !== null && focusRow.length > 0) {\n          var _this$getCardSize;\n          var focusRowIndex = this.getRowIndex(focusRow[0]);\n          var focusColId = focusRow[1];\n          var itemHeight = (_this$getCardSize = this.getCardSize()) === null || _this$getCardSize === void 0 ? void 0 : _this$getCardSize.height;\n          setTimeout(function () {\n            // 要固定高度才允许跳转，不固定高度的卡片跳转位置不对\n            if (itemHeight) {\n              var _this4$virtualViewApi;\n              (_this4$virtualViewApi = _this4.virtualViewApi) === null || _this4$virtualViewApi === void 0 || _this4$virtualViewApi.jumpToTargetItem(focusRowIndex);\n            }\n            if (focusColId) {\n              var innerNodes = _reactDom[\"default\"].findDOMNode(_this4.vertical_innerNode);\n              // 只针对流式布局的卡片，横向布局的不支持\n              if (!innerNodes) {\n                return;\n              }\n              var foucsEle = innerNodes.querySelector(\"[data-rowindex=\\\"\".concat(focusRowIndex, \"\\\"] #\").concat(focusColId));\n              // 聚焦逻辑跟着 tab 快捷键走\n              var inputEle = foucsEle === null || foucsEle === void 0 ? void 0 : foucsEle.querySelector('[data-shortcut]');\n              if (inputEle) {\n                inputEle === null || inputEle === void 0 || inputEle.focus();\n              }\n            }\n          }, 0);\n        }\n      }\n      // componentDidUpdate处理时，子节点的卡片还没加载完，这时候取到的innerWidth是错误的，\n      // 这里改为添加Mutation监听子节点变化，子节点发生变化时再判断是否显示左右箭头\n\n      // if (!this.state.isMulti && model.getMetaProperty('ls') === 1) {\n      //   const { innerWidth } = this.getSrollAreaParam()\n      //   const prevdata = _prevModel.getDataValue()\n      //   const data = _model.getDataValue()\n      //   const prevrows = prevdata && prevdata.get('rows')\n      //   const rows = data && data.get('rows')\n\n      //   if (this.listCardWidth !== innerWidth || (prevrows && rows && prevrows.size !== rows.size)) {\n      //     this.isArrowDisabled()\n      //     this.listCardWidth = innerWidth\n      //   }\n      // }\n      this.isLoadding = false;\n    }\n  }, {\n    key: \"setSelectRows\",\n    value: function setSelectRows(selectedRows) {\n      var post = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      var model = this.getDataModel();\n      var isActived = this.props.isActived;\n      var isListCard = this.props.model.getMetaProperty('cardtype') === 'listcard';\n      var data = model.getDataValue();\n      if (!data) return;\n      var rows = data.get('rows');\n      var option = data.get(_serverproperties.DATA_INDEX);\n      var rowKey = model.getMetaProperty(_serverproperties.ROWKEY);\n\n      // 设置后端指令选中行\n      var _rowKeys = [];\n      var _rowInfos = [];\n      var _selectedRows = selectedRows.get(0);\n      if (_immutable.List.isList(_selectedRows)) {\n        selectedRows = _selectedRows;\n      }\n      if (selectedRows.size && rows && rows.size) {\n        rows.forEach(function (item, index) {\n          var _rowkey = item.get(option.get(rowKey));\n          if (selectedRows.includes(_rowkey)) {\n            _rowKeys.push(_rowkey);\n            _rowInfos.push(item);\n          }\n          ;\n        });\n      }\n      this.setSelectedRowsCount && this.setSelectedRowsCount(_rowKeys.length);\n      this.updateSelectInfo(_rowKeys, _rowInfos);\n      var gridKey = model.key;\n      var selectedRowKey = selectedRows.get(0);\n      selectedRowKey = selectedRowKey === undefined ? -1 : selectedRowKey;\n      var postData = this.getPostColsData(selectedRowKey, _rowKeys, _rowInfos, option);\n      if (post) {\n        this.setPostData(postData);\n        // 卡片视图没有激活的时候，只更新状态，但是不返回状态到后台  --kechuang\n        // phide的情况是兼容卡片分录分页取消全选的场景\n        var phide = model.getMetaProperty('phide') !== false;\n        if (isActived && (isListCard || !phide || selectedRowKey !== -1)) this.props.dispatch((0, _gridaction.EntityRowClick)({\n          pageId: model.pageId,\n          key: gridKey\n        }, [selectedRowKey]));\n      }\n    }\n\n    /**\n    * 获取当前选中行的postdata\n    * @param  {[type]} row    [description]\n    * @param  {[type]} option [description]\n    * @param  {[type]} rowKey [description]\n    * @return {[type]}        [description]\n    */\n  }, {\n    key: \"getSelectRowsPostData\",\n    value: function getSelectRowsPostData(row, option, rowKey, labelSelect, fieldKey, selector) {\n      var selectedRowKey = row.get(option.get(rowKey));\n      // let merge = this.props.getMergeMethod();\n      // let seldRowKey = merge ? merge(selectedRowKey)[0] : selectedRowKey\n      // if (seldRowKey !== undefined) {\n      // selectedRowKey = seldRowKey\n      // }\n      if (this.mergeModel) {\n        selectedRowKey = this.mergeModel.getMainGroupRk(selectedRowKey)[0];\n      }\n      if (selectedRowKey === undefined) return;\n      var res;\n      if (this.state.cardMode && !selector) {\n        // 购物车模式且没有点击卡片选择标志的，选中行参数取当前的选中信息\n        res = this.getCardModeSelectedData();\n      } else if (this.state.isMulti) {\n        res = this.doMultiClick(row, selectedRowKey, labelSelect);\n      } else {\n        res = this.doSingleClick(row, selectedRowKey, selector);\n      }\n      return this.getPostColsData(selectedRowKey, res.rowKeys, res.rowInfos, option, fieldKey);\n    }\n  }, {\n    key: \"getRowSize\",\n    value: function getRowSize() {\n      var dataModel = this.getDataModel();\n      var data = dataModel.getDataValue();\n      return data ? data.get('rows').size : -1; // -1 数据未加载loaddata\n      // return data && data.get('rows').size\n    }\n  }, {\n    key: \"getRealPageCount\",\n    value: function getRealPageCount() {\n      var _this$props13 = this.props,\n        parentModel = _this$props13.parentModel,\n        model = _this$props13.model,\n        dispatch = _this$props13.dispatch;\n      var gridId = parentModel ? parentModel.key : model.key;\n      var m = {\n        pageId: this.props.model.pageId,\n        key: gridId\n      };\n      dispatch((0, _gridaction.invokeControlMethodOnly)(m, 'getRealPageCount', []));\n    }\n  }, {\n    key: \"setAmountOperation\",\n    value: function setAmountOperation(amount, operationKey) {\n      amount = parseInt(amount);\n      var _this$props14 = this.props,\n        parentModel = _this$props14.parentModel,\n        model = _this$props14.model,\n        dispatch = _this$props14.dispatch;\n      var gridId = parentModel ? parentModel.key : model.key;\n      var m = {\n        pageId: this.props.model.pageId,\n        key: gridId\n      };\n      dispatch((0, _gridaction.setAmountOperation)(m, amount, operationKey));\n    }\n  }, {\n    key: \"toolBarBtnClick\",\n    value: function toolBarBtnClick(args, operationKey) {\n      var _this$props15 = this.props,\n        parentModel = _this$props15.parentModel,\n        model = _this$props15.model,\n        dispatch = _this$props15.dispatch;\n      var gridId = parentModel ? parentModel.key : model.key;\n      var m = {\n        pageId: this.props.model.pageId,\n        key: gridId\n      };\n      dispatch((0, _gridaction.toolBarBtnClick)(m, args, operationKey));\n    }\n  }, {\n    key: \"handleFuncs\",\n    value: function handleFuncs() {\n      var funcs = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      for (var f in funcs) {\n        switch (f) {\n          case 'setSelectedRowsCount':\n            this.setSelectedRowsCount = funcs[f];\n            break;\n          case 'setSelectAllIcon':\n            this.setSelectAllIcon = funcs[f];\n            break;\n        }\n      }\n    }\n  }, {\n    key: \"selectedAll\",\n    value: function selectedAll(e, selected) {\n      var _this5 = this;\n      var suppressPost = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var model = this.getDataModel();\n      var data = model.getDataValue();\n      var index = data ? data.get('dataindex').toJS() : {};\n      var rows = data.get('rows');\n      if (rows == null) return;\n      if (this.state.isMulti === false) return; // 单先行\n      var selFunc = function selFunc() {\n        if (selected) {\n          _this5.setSelectRows(new _immutable.List());\n        } else {\n          var rowKey = model.getMetaProperty(_serverproperties.ROWKEY);\n          var slctRs = new _immutable.List();\n          rows.toJS().map(function (r) {\n            slctRs = slctRs.push(r[index[rowKey]]);\n          });\n          _this5.setSelectRows(slctRs);\n        }\n      };\n      selFunc();\n      // if (suppressPost) { // todo\n      //   selFunc()\n      // } else {\n      //   selFunc()\n      // }\n    }\n\n    // 整个卡片控件的锁定(继承其父容器的锁定)\n  }, {\n    key: \"_getLock\",\n    value: function _getLock() {\n      var model = this.props.model;\n      return this.props.getLocked(model);\n    }\n  }, {\n    key: \"getNoDataCard\",\n    value: function getNoDataCard() {\n      var showNodataTip = this.props.model.getMetaProperty('shownodatatip'); // 卡片无数据时是否显示默认图片提示，默认显示\n      // 获取情感化图片设置\n      var _getCommonEmotionalIn = (0, _defaultPropsUtil.getCommonEmotionalInfo)(_emotionalConst.EMOTIONAL_TYPE_NO_DATA),\n        imagePath = _getCommonEmotionalIn.imagePath,\n        description = _getCommonEmotionalIn.description;\n      // 动态生成image样式\n      var imgStyle = imagePath ? {\n        'background-image': \"url(\".concat(imagePath, \")\")\n      } : {};\n      return showNodataTip !== false ? /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        className: _KDCardView2[\"default\"]['no-data-card']\n      }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        className: _KDCardView2[\"default\"]['no-data-container']\n      }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        className: _KDCardView2[\"default\"]['img-item'],\n        style: imgStyle\n      }), /*#__PURE__*/_react[\"default\"].createElement(\"p\", {\n        className: \"kd-cq-empty-description\"\n      }, description || (0, _intlApi.getLangMsg)({\n        key: 'cardview.key0002'\n      })))) : null;\n    }\n  }, {\n    key: \"getSrollAreaParam\",\n    value: function getSrollAreaParam() {\n      var isClick = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      var innerNode = _reactDom[\"default\"].findDOMNode(this.innerNode);\n      var innerWidth = innerNode && innerNode.offsetWidth || 0;\n      var outerWidth = this.cardViewDom && this.cardViewDom.offsetWidth || 0;\n      var childWidth = 0;\n      var fixCardWidth = 0;\n      if (!isClick) {\n        // 不是左右箭头点击切换时，需要计算固定卡片的存在\n        var childCount = innerNode && innerNode.childElementCount;\n        var childArr = innerNode ? innerNode.children : [];\n        var childAB = childCount > 0 ? childArr[0].getAttribute('data-fixedcard') : '';\n        var isFixedCard = childAB === 'isfixedcard';\n        childWidth = isFixedCard ? childArr[1] && childArr[1].offsetWidth : childArr[0] && childArr[0].offsetWidth;\n        fixCardWidth = isFixedCard ? childArr[0].offsetWidth : 0;\n      }\n      return {\n        innerWidth: innerWidth,\n        outerWidth: outerWidth,\n        childWidth: childWidth,\n        fixCardWidth: fixCardWidth\n      };\n    }\n  }, {\n    key: \"buildCardMergeModel\",\n    value: function buildCardMergeModel(model) {\n      this.mergeModel = null;\n      // const model = this.getDataModel()\n      var mergeRow = model.getMetaProperty('mergerow');\n      var entryentities = model.getMetaProperty('entryentities');\n      if (mergeRow && entryentities) {\n        this.mergeModel = new _cardMergeModel.mergeModel(entryentities.toJS());\n        var data = model.getDataValue();\n        this.setRowSpan(data);\n      }\n    }\n  }, {\n    key: \"setRowSpan\",\n    value: function setRowSpan(data) {\n      if (this.mergeModel && data) {\n        (0, _cardMergeModel.spanEngine)(data, this.mergeModel);\n      } else {}\n    }\n\n    // 是否开启滚动加载\n  }, {\n    key: \"getIsScrollLoad\",\n    value: function getIsScrollLoad(props) {\n      var model = props.model,\n        parentModel = props.parentModel;\n      var dataModel = parentModel || model;\n      var data = dataModel.getDataValue();\n      var isScrollLoad = model.getMetaProperty('scrollload'); // 是否启用滚动加载\n      var isSplitPage = data && data.get('isSplitPage', true); // 是否分页\n      return isScrollLoad && isSplitPage;\n    }\n  }, {\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var model = this.getDataModel();\n      this.buildCardMergeModel(model);\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      var nextModel = nextProps.parentModel || nextProps.model;\n      var thisModel = this.getDataModel();\n      if (nextModel.getMetaProperty('mergerow') !== thisModel.getMetaProperty('mergerow')) {\n        this.buildCardMergeModel(nextModel);\n      }\n\n      // 卡片数据改变时\n      var data = thisModel.getDataValue();\n      var nextData = nextModel.getDataValue();\n      if (!(0, _immutable.is)(data, nextData)) {\n        // 卡片列表数据改变时重置滚动条\n        if (this.getIsRowsChanged(thisModel, nextModel)) {\n          this.resetListViewScrollBar(nextProps);\n        }\n        this.updateDataDesc(nextData);\n        // 更新融合行信息\n        this.setRowSpan(nextData);\n      }\n    }\n  }, {\n    key: \"getIsRowsChanged\",\n    value: function getIsRowsChanged(thisModel, nextModel) {\n      // 判断是否需要刷新滚动条位置\n      if (thisModel && nextModel) {\n        // data 中存在不一致属性则需要更新滚动条位置\n        var oldValue = thisModel.getDataValue();\n        var newValue = nextModel.getDataValue();\n        var oldRows = (oldValue === null || oldValue === void 0 ? void 0 : oldValue.get('rows')) || (0, _immutable.List)();\n        var newRows = (newValue === null || newValue === void 0 ? void 0 : newValue.get('rows')) || (0, _immutable.List)();\n        if (Math.abs(newRows.size - oldRows.size) >= MAX_CHANGE_ROWLEN) {\n          return true;\n        }\n        return oldRows.size > 0 ? this.calIsRowsChanged(oldRows, newRows) : false;\n      }\n      return false;\n    }\n  }, {\n    key: \"calIsRowsChanged\",\n    value: function calIsRowsChanged(oldRows, newRows) {\n      var diffRows = [];\n      for (var i = 0; i < newRows.size; i++) {\n        if (!(0, _immutable.is)(newRows.get(i, ''), oldRows.get(i, ''))) {\n          diffRows.push(i);\n          // 数据不一致量超过阀值才重置滚动条\n          if (diffRows.length > MAX_CHANGE_ROWLEN) {\n            return true;\n          }\n        }\n      }\n      return false;\n    }\n  }, {\n    key: \"getCardSize\",\n    value:\n    /**\n     * 获取设计器设置的卡片大小，只取设置px的情况，不取设置百分比的情况，用作虚加载卡片默认宽高\n     * @returns\n     */\n    function getCardSize() {\n      var model = this.props.model;\n      var items = model.getMetaProperty('items');\n      var cardMeta = items.find(function (item) {\n        return item.get('cardType') !== '0';\n      });\n      if (!cardMeta) return;\n      var cardSize = {};\n      var locale = model.getUserLocale();\n      var defaultLocalId = model.getDefaultLang();\n      var width = cardMeta.getIn(['w', locale]) || cardMeta.getIn(['w', defaultLocalId]);\n      var height = cardMeta.getIn(['h', locale]) || cardMeta.getIn(['h', defaultLocalId]);\n      if (width && typeof width === 'string' && width.includes('px')) {\n        cardSize.width = parseInt(width.substring(0, width.length - 2));\n      }\n      if (height && typeof height === 'string' && height.includes('px')) {\n        cardSize.height = parseInt(height.substring(0, height.length - 2));\n      }\n      return cardSize;\n    }\n\n    /**\n     * 根据rowKeyValue获取rowIndex\n     * @param {*} rowKeyValue\n     * @returns\n     */\n  }, {\n    key: \"getRowIndex\",\n    value: function getRowIndex(rowKeyValue) {\n      var _this$props16 = this.props,\n        parentModel = _this$props16.parentModel,\n        model = _this$props16.model;\n      var dataModel = parentModel || model;\n      var data = dataModel.getDataValue();\n      if (!data) return -1;\n      var rows = data.get('rows') || (0, _immutable.List)();\n      var option = data.get(_serverproperties.DATA_INDEX);\n      var rowKey = dataModel.getMetaProperty(_serverproperties.ROWKEY);\n      var rowIndex = rows.findIndex(function (row) {\n        return row.get(option.get(rowKey)) === rowKeyValue;\n      });\n      return rowIndex;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _model$meta,\n        _dataModel$getData,\n        _this6 = this;\n      var _this$props17 = this.props,\n        model = _this$props17.model,\n        parentModel = _this$props17.parentModel;\n      var style = (0, _componentutil.getCommonStyle)(model);\n      var commonClass = (0, _componentutil.getCommonClass)(model);\n      // 默认为1，整行横向滚动，带下划线箭头；2.flex 布局\n      var LayoutStyle = model.getMetaProperty('ls');\n      var items = model.getMetaProperty('items');\n      var toolPanel = this.getToolPanel();\n      var horizonScroll = LayoutStyle === 1; // 1:横向滚动布局， 2:流式布局\n      var rowSize = this.getRowSize();\n      var showUnderline = this.isShowUnderline();\n      var isScrollLoadData = this.isScrollLoadData();\n      var onScrollFunc = isScrollLoadData ? this.throttleScroll : null;\n\n      // 左右方向键的禁用\n      var toolbarLocation = this.getToolbarLocation();\n\n      // 卡片列表自定义样式放入动态元数据，不能走ComponentDidMount，只能render时判断是否有cstyles动态添加\n      // let customClassName = addCutomStyleToHead(model)\n\n      // 使用虚拟加载时卡片视图下只有一个元素，要保证能够充满\n      var virtualViewCalss = Object.assign({}, commonClass, {\n        Direction: 'column',\n        AlignItems: 'stretch',\n        AlignContent: 'stretch',\n        Wrap: 'nowrap'\n      });\n      var metaHashCode = ((_model$meta = model.meta) === null || _model$meta === void 0 ? void 0 : _model$meta.hashCode()) || '';\n      var dataModel = parentModel || model;\n      var dataHashCode = (_dataModel$getData = dataModel.getData()) === null || _dataModel$getData === void 0 ? void 0 : _dataModel$getData.hashCode();\n      var fixCardDataHashCode = this.getFixedCardDataHashCode();\n      var cardSize = this.getCardSize() || {};\n      var isScrollLoad = this.getIsScrollLoad(this.props);\n      var underlineClass = (0, _classnames4[\"default\"])(_defineProperty(_defineProperty({}, _KDCardView2[\"default\"].underline, true), _KDCardView2[\"default\"]['underline-actived'], this.state.singleRow.length > 0));\n      return /*#__PURE__*/_react[\"default\"].createElement(_ControlValueChangeContextProvider[\"default\"], {\n        pageId: model.pageId,\n        ctrlKeys: this.allCustomControls\n      }, !this.state.isMulti && horizonScroll ? /*#__PURE__*/_react[\"default\"].createElement(\"div\", _extends({\n        className: _KDCardView2[\"default\"]['list-card-box']\n      }, this.props.attachData, {\n        ref: function ref(r) {\n          _this6.cardViewDom = r;\n        }\n      }), this.state.showArrow && this.getPrevButton(showUnderline), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        ref: function ref(n) {\n          _this6.listNode = n;\n        },\n        className: _KDCardView2[\"default\"]['scroll-box']\n      }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        className: _KDCardView2[\"default\"]['list-box'],\n        style: {\n          transform: \"translateX(-\".concat(this.state.translateX, \"px)\")\n        }\n      }, /*#__PURE__*/_react[\"default\"].createElement(_ListCardView[\"default\"], {\n        LayoutStyle: LayoutStyle,\n        ref: function ref(n) {\n          _this6.innerNode = n;\n        },\n        horizonScroll: true,\n        style: style\n      }, items.map(function (meta, index) {\n        return _this6.getCards(meta, index);\n      })), showUnderline ? /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        className: underlineClass\n      }, /*#__PURE__*/_react[\"default\"].createElement(\"i\", {\n        className: _KDCardView2[\"default\"].triangle,\n        style: this.state.underlinePos\n      })) : null)), this.state.showArrow && this.getNextButton(showUnderline)) : items.size === 1 && rowSize === 0 ? this.getNoDataCard() : rowSize === -1 ? null : [toolbarLocation !== '1' ? toolPanel : null, /*#__PURE__*/_react[\"default\"].createElement(_ListCardView[\"default\"], _extends({\n        onScroll: onScrollFunc,\n        key: \"cardviewList\",\n        LayoutStyle: LayoutStyle,\n        ref: function ref(n) {\n          _this6.vertical_innerNode = n;\n        },\n        style: style\n      }, virtualViewCalss), /*#__PURE__*/_react[\"default\"].createElement(_VirtualView[\"default\"], {\n        flex: commonClass,\n        options: {\n          direction: horizonScroll ? '' : _VirtualView.DIRECTION_V,\n          headerRender: this.renderFixedCard(0),\n          footerRender: this.renderFixedCard(this.getFooterFixedCardIndex()),\n          isFooterElementMove: this.getFooterFixedCardIndex() !== -1,\n          // 底部固定卡片是否前移\n          refreshFlag: this.state.selectRows.concat(this.state.singleRow).join('') + \"_\".concat(metaHashCode, \"_\").concat(dataHashCode, \"_\").concat(fixCardDataHashCode),\n          enableVirtual: !isScrollLoad && this.getRows().size >= 50,\n          itemWidth: cardSize.width || 100,\n          itemHeight: cardSize.height || 100,\n          onApi: this.setVirtualViewApi\n        },\n        items: this.getRealRenderRows(),\n        itemRender: this.itemRender\n      })), toolbarLocation === '1' ? toolPanel : null]);\n    }\n  }]);\n  return KDCardView;\n}(_react[\"default\"].Component)) || _class) || _class);\nvar _default = exports[\"default\"] = KDCardView;\n\n//# sourceURL=webpack://bos-platform/./src/component/web/KDCardView.js?");

/***/ }),

/***/ "./src/component/web/KDCommonFunctionPanel.jsx":
/*!*****************************************************!*\
  !*** ./src/component/web/KDCommonFunctionPanel.jsx ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.create.js */ \"../../node_modules/core-js/modules/es.object.create.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.get-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.set-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.set-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.reflect.construct.js */ \"../../node_modules/core-js/modules/es.reflect.construct.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\n__webpack_require__(/*! core-js/modules/es.object.assign.js */ \"../../node_modules/core-js/modules/es.object.assign.js\");\nvar _react = _interopRequireWildcard(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _CommonFunctionPanel = _interopRequireDefault(__webpack_require__(/*! ./base/CommonFunctionPanel */ \"./src/component/web/base/CommonFunctionPanel.jsx\"));\nvar _componentutil = __webpack_require__(/*! ../../util/componentutil */ \"./src/util/componentutil.js\");\nvar _VisibleLockWrap = _interopRequireDefault(__webpack_require__(/*! ../common/VisibleLockWrap */ \"./src/component/common/VisibleLockWrap.js\"));\nvar _AttachDataWrap = _interopRequireDefault(__webpack_require__(/*! ../common/AttachDataWrap */ \"./src/component/common/AttachDataWrap.js\"));\nvar _immutable = __webpack_require__(/*! immutable */ \"webpack/sharing/consume/default/immutable/immutable?f2ca\");\nvar _commonFunctionPanelAction = __webpack_require__(/*! ../../action/commonFunctionPanelAction */ \"./src/action/commonFunctionPanelAction.js\");\nvar _dec, _class; // 常用功能面板\n// import PropTypes from 'prop-types'\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n// 分组菜单数据结构\nvar menData = {\n  data: [{\n    group: {\n      id: 'openPlatform',\n      caption: '开发平台'\n    },\n    items: [{\n      id: 'kemuyuebiao',\n      caption: '科目余额表科目余额表科目余额表科目余额表科目余额表科目余额表科目余额表科目余额表' // 验证长名称的情况\n    }, {\n      id: 'zongfenleizhang',\n      caption: '总分类帐'\n    }, {\n      id: 'mingxifenleizhang',\n      caption: '明细分类账'\n    }, {\n      id: 'ribaobiao',\n      caption: '日报表'\n    }, {\n      id: 'hesuanzhangmuyuebiao',\n      caption: '核算项目余额表核算项目余额表核算项目余额表核算项目余额表'\n    }, {\n      id: 'kemuyuebiao',\n      caption: '科目余额表'\n    }, {\n      id: 'zongfenleizhang',\n      caption: '总分类帐'\n    }, {\n      id: 'mingxifenleizhang',\n      caption: '明细分类账'\n    }, {\n      id: 'ribaobiao',\n      caption: '日报表'\n    }, {\n      id: 'hesuanzhangmuyuebiao',\n      caption: '核算项目余额表'\n    }, {\n      id: 'zongfenleizhang',\n      caption: '总分类帐'\n    }, {\n      id: 'mingxifenleizhang',\n      caption: '明细分类账'\n    }, {\n      id: 'ribaobiao',\n      caption: '日报表'\n    }, {\n      id: 'hesuanzhangmuyuebiao',\n      caption: '核算项目余额表'\n    }]\n  }, {\n    group: {\n      id: 'xieyicaigou',\n      caption: '协议采购协议采购协议采购协议采购协议采购协议采购协议采购协议采购' // 验证长标题的情况\n    },\n    items: [{\n      id: 'kemuyuebiao',\n      caption: '科目余额表'\n    }, {\n      id: 'zongfenleizhang',\n      caption: '总分类帐'\n    }, {\n      id: 'mingxifenleizhang',\n      caption: '明细分类账'\n    }, {\n      id: 'ribaobiao',\n      caption: '日报表'\n    }]\n  }, {\n    group: {\n      id: 'b2bdianshangzhongxin',\n      caption: 'B2B电商中心'\n    },\n    items: [{\n      id: 'kemuyuebiao',\n      caption: '科目余额表'\n    }, {\n      id: 'zongfenleizhang',\n      caption: '总分类帐'\n    }, {\n      id: 'mingxifenleizhang',\n      caption: '明细分类账'\n    }, {\n      id: 'ribaobiao',\n      caption: '日报表'\n    }, {\n      id: 'hesuanzhangmuyuebiao',\n      caption: '核算项目余额表'\n    }]\n  }, {\n    group: {\n      id: 'xieyicaigou',\n      caption: '协议采购协议采购协议采购协议采购协议采购协议采购协议采购协议采购' // 验证长标题的情况\n    },\n    items: [{\n      id: 'kemuyuebiao',\n      caption: '科目余额表'\n    }, {\n      id: 'zongfenleizhang',\n      caption: '总分类帐'\n    }, {\n      id: 'mingxifenleizhang',\n      caption: '明细分类账'\n    }, {\n      id: 'ribaobiao',\n      caption: '日报表'\n    }]\n  }, {\n    group: {\n      id: 'xieyicaigou',\n      caption: '协议采购协议采购协议采购协议采购协议采购协议采购协议采购协议采购' // 验证长标题的情况\n    },\n    items: [{\n      id: 'kemuyuebiao',\n      caption: '科目余额表'\n    }, {\n      id: 'zongfenleizhang',\n      caption: '总分类帐'\n    }, {\n      id: 'mingxifenleizhang',\n      caption: '明细分类账'\n    }, {\n      id: 'ribaobiao',\n      caption: '日报表'\n    }]\n  }, {\n    group: {\n      id: 'xieyicaigou',\n      caption: '协议采购协议采购协议采购协议采购协议采购协议采购协议采购协议采购' // 验证长标题的情况\n    },\n    items: [{\n      id: 'kemuyuebiao',\n      caption: '科目余额表'\n    }, {\n      id: 'zongfenleizhang',\n      caption: '总分类帐'\n    }, {\n      id: 'mingxifenleizhang',\n      caption: '明细分类账'\n    }, {\n      id: 'ribaobiao',\n      caption: '日报表'\n    }]\n  }, {\n    group: {\n      id: 'xieyicaigou',\n      caption: '协议采购协议采购协议采购协议采购协议采购协议采购协议采购协议采购' // 验证长标题的情况\n    },\n    items: [{\n      id: 'kemuyuebiao',\n      caption: '科目余额表'\n    }, {\n      id: 'zongfenleizhang',\n      caption: '总分类帐'\n    }, {\n      id: 'mingxifenleizhang',\n      caption: '明细分类账'\n    }, {\n      id: 'ribaobiao',\n      caption: '日报表'\n    }]\n  }, {\n    group: {\n      id: 'openPlatform',\n      caption: '开发平台'\n    },\n    items: [{\n      id: 'kemuyuebiao',\n      caption: '科目余额表科目余额表科目余额表科目余额表科目余额表科目余额表科目余额表科目余额表' // 验证长名称的情况\n    }, {\n      id: 'zongfenleizhang',\n      caption: '总分类帐'\n    }, {\n      id: 'mingxifenleizhang',\n      caption: '明细分类账'\n    }, {\n      id: 'ribaobiao',\n      caption: '日报表'\n    }, {\n      id: 'hesuanzhangmuyuebiao',\n      caption: '核算项目余额表核算项目余额表核算项目余额表核算项目余额表'\n    }, {\n      id: 'kemuyuebiao',\n      caption: '科目余额表'\n    }, {\n      id: 'zongfenleizhang',\n      caption: '总分类帐'\n    }, {\n      id: 'mingxifenleizhang',\n      caption: '明细分类账'\n    }, {\n      id: 'ribaobiao',\n      caption: '日报表'\n    }, {\n      id: 'hesuanzhangmuyuebiao',\n      caption: '核算项目余额表'\n    }, {\n      id: 'zongfenleizhang',\n      caption: '总分类帐'\n    }, {\n      id: 'mingxifenleizhang',\n      caption: '明细分类账'\n    }, {\n      id: 'ribaobiao',\n      caption: '日报表'\n    }, {\n      id: 'hesuanzhangmuyuebiao',\n      caption: '核算项目余额表'\n    }]\n  }]\n};\nmenData = (0, _immutable.fromJS)(menData);\nvar KDCommonFunctionPanel = (_dec = (0, _VisibleLockWrap[\"default\"])(true), (0, _AttachDataWrap[\"default\"])(_class = _dec(_class = /*#__PURE__*/function (_Component) {\n  _inherits(KDCommonFunctionPanel, _Component);\n  function KDCommonFunctionPanel(props) {\n    var _this;\n    _classCallCheck(this, KDCommonFunctionPanel);\n    _this = _callSuper(this, KDCommonFunctionPanel, [props]);\n    _this.itemClick = _this.itemClick.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  // 点击子项菜单\n  _createClass(KDCommonFunctionPanel, [{\n    key: \"itemClick\",\n    value: function itemClick(_ref) {\n      var groupId = _ref.groupId,\n        itemId = _ref.itemId;\n      var _this$props = this.props,\n        model = _this$props.model,\n        dispatch = _this$props.dispatch;\n      dispatch((0, _commonFunctionPanelAction.itemClick)(model, {\n        groupId: groupId,\n        itemId: itemId\n      }));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var model = this.props.model;\n      var style = Object.assign({}, (0, _componentutil.getCommonStyle)(model), this.props.style);\n      var commonClass = (0, _componentutil.getCommonClass)(model);\n      var data = (0, _componentutil.getComponentDataProperty)(model, 'data', 'data', false);\n      var groupMaxItemCount = (0, _componentutil.getComponentDataProperty)(model, 'groupMaxItemCount', 'groupMaxItemCount', false); // 每个分组单列显示的最大数量菜单项, 更多就换一列\n      var autoWrap = (0, _componentutil.getComponentDataProperty)(model, 'autoWrap', 'autoWrap', false); // 自动换行\n      var maxViewHeight = (0, _componentutil.getComponentDataProperty)(model, 'maxViewHeight', 'maxViewHeight', false); // 控件最大高度(视图高度,单位vh)\n      var ignoreEmptyGroup = (0, _componentutil.getComponentDataProperty)(model, 'ieg', 'ieg', false); // 忽略空数组\n\n      // test data\n      // data = menData.get('data');\n      // groupMaxItemCount = 0; //每组一列展示完菜单\n      // autoWrap = false\n      // maxViewHeight = 83;\n      // ignoreEmptyGroup = false\n\n      return /*#__PURE__*/_react[\"default\"].createElement(_CommonFunctionPanel[\"default\"], _extends({\n        style: style,\n        data: data\n      }, commonClass, this.props.attachData, {\n        itemClick: this.itemClick,\n        groupMaxItemCount: groupMaxItemCount,\n        autoWrap: autoWrap,\n        maxViewHeight: maxViewHeight,\n        ignoreEmptyGroup: ignoreEmptyGroup\n      }));\n    }\n  }]);\n  return KDCommonFunctionPanel;\n}(_react.Component)) || _class) || _class);\nvar _default = exports[\"default\"] = KDCommonFunctionPanel;\n\n//# sourceURL=webpack://bos-platform/./src/component/web/KDCommonFunctionPanel.jsx?");

/***/ }),

/***/ "./src/component/web/KDCustom.js":
/*!***************************************!*\
  !*** ./src/component/web/KDCustom.js ***!
  \***************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.index-of.js */ \"../../node_modules/core-js/modules/es.array.index-of.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.create.js */ \"../../node_modules/core-js/modules/es.object.create.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.get-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.keys.js */ \"../../node_modules/core-js/modules/es.object.keys.js\");\n__webpack_require__(/*! core-js/modules/es.object.set-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.set-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.reflect.construct.js */ \"../../node_modules/core-js/modules/es.reflect.construct.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.array.is-array.js */ \"../../node_modules/core-js/modules/es.array.is-array.js\");\n__webpack_require__(/*! core-js/modules/es.object.assign.js */ \"../../node_modules/core-js/modules/es.object.assign.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.promise.js */ \"../../node_modules/core-js/modules/es.promise.js\");\nvar _react = _interopRequireWildcard(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _immutable = __webpack_require__(/*! immutable */ \"webpack/sharing/consume/default/immutable/immutable?f2ca\");\nvar _VisibleLockWrap = _interopRequireDefault(__webpack_require__(/*! ../common/VisibleLockWrap */ \"./src/component/common/VisibleLockWrap.js\"));\nvar _AttachDataWrap = _interopRequireDefault(__webpack_require__(/*! ../common/AttachDataWrap */ \"./src/component/common/AttachDataWrap.js\"));\nvar _FloatingPanelWarp = _interopRequireDefault(__webpack_require__(/*! ../common/FloatingPanelWarp */ \"./src/component/common/FloatingPanelWarp.js\"));\nvar _memoryCacher = __webpack_require__(/*! @/model/memoryCacher */ \"./src/model/memoryCacher.js\");\nvar _componentutil = __webpack_require__(/*! ../../util/componentutil */ \"./src/util/componentutil.js\");\nvar _customCtrlUtil = __webpack_require__(/*! ../../util/customCtrlUtil */ \"./src/util/customCtrlUtil.js\");\nvar _BaseCustomCtrl = _interopRequireDefault(__webpack_require__(/*! ./base/CustomCtrl/BaseCustomCtrl */ \"./src/component/web/base/CustomCtrl/BaseCustomCtrl.js\"));\nvar _commonUtils = _interopRequireDefault(__webpack_require__(/*! ../common/commonUtils */ \"./src/component/common/commonUtils.js\"));\nvar _customctrlaction = __webpack_require__(/*! ../../action/customctrlaction */ \"./src/action/customctrlaction.js\");\nvar _ControlInfoCollect = _interopRequireDefault(__webpack_require__(/*! @/component/common/ControlInfoCollect */ \"./src/component/common/ControlInfoCollect.js\"));\nvar _customComponentManage = __webpack_require__(/*! ../common/customComponentManage */ \"./src/component/common/customComponentManage.js\");\nvar _appModelFunction = __webpack_require__(/*! @/model/appModelFunction */ \"./src/model/appModelFunction.js\");\nvar _excluded = [\"data\", \"configItems\", \"lock\", \"lang\", \"themeColor\", \"themeNum\", \"cardRowData\", \"gridRowData\", \"subFormsArry\", \"themeInfo\"];\nvar _dec, _class;\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n// import { getRootPageId, getThemeColor } from '@/model/appModelFunction'\nvar KDCustom = (_dec = (0, _VisibleLockWrap[\"default\"])(false), (0, _AttachDataWrap[\"default\"])(_class = (0, _FloatingPanelWarp[\"default\"])(_class = _dec(_class = /*#__PURE__*/function (_Component) {\n  _inherits(KDCustom, _Component);\n  function KDCustom(props) {\n    var _this;\n    _classCallCheck(this, KDCustom);\n    _this = _callSuper(this, KDCustom, [props]);\n    _this.getCustomInfo = function (model) {\n      // data, configItems, lock, locale, themeNum, subFormsArray\n      var pageId = model.pageId,\n        key = model.key;\n      var metaData = model.meta && model.meta.toJS();\n      var data = model.getDataValue();\n      if (data && data.toJS) {\n        data = data.toJS();\n      }\n      var configItems = (0, _componentutil.getComponentDataProperty)(model, 'ci', 'ci', false);\n      configItems = configItems && configItems.toJS();\n      var lock = _this.props.isLocked;\n      var locale = model.getUserLocale();\n      var _getCurrentTheme = (0, _customCtrlUtil.getCurrentTheme)(),\n        themeNum = _getCurrentTheme.themeNum,\n        themeColor = _getCurrentTheme.themeColor,\n        themeInfo = _getCurrentTheme.themeInfo;\n      var state = model.state;\n      var subFormsArry = (0, _componentutil.getCustomControlSubForms)(model.pageId, model.meta.get('id'), state);\n      var cardRowData = (0, _customCtrlUtil.getCardRowData)(_this.props, model);\n\n      // 扩展字段或者控件，字段获取schemaInfo需要从item里面获取，控件则直接从meta获取\n      var schemaInfo = model.getMetaProperty(['item', 'schemaInfo']) || model.getMetaProperty('schemaInfo') || (0, _immutable.Map)({});\n      var schemaId = schemaInfo.get('schemaId'); // 方案id\n      var isvId = schemaInfo.get('isvId'); // 开发商id\n      var moduleId = schemaInfo.get('moduleId'); // 领域英文简写\n      // 文件服务器路径\n      var fileServer = model.getFormConfig() && model.getFormConfig().fileserver;\n      return {\n        pageId: pageId,\n        controlKey: key,\n        data: data,\n        metaData: metaData,\n        schemaId: schemaId,\n        isvId: isvId,\n        moduleId: moduleId,\n        configItems: configItems,\n        lock: lock,\n        lang: locale,\n        themeColor: themeColor,\n        themeNum: themeNum,\n        cardRowData: cardRowData,\n        subFormsArry: subFormsArry,\n        fileServer: fileServer,\n        themeInfo: themeInfo\n      };\n    };\n    _this.invokeCustomMethod = function (model) {\n      var pageId = model.pageId,\n        key = model.key;\n      var dispatch = _this.props.dispatch;\n      return function (method) {\n        var args = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n        var isNoClearPostData = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n        args = Array.isArray(args) ? args : [args];\n        dispatch((0, _customctrlaction.invokeCustomMethod)(pageId, key, method, args, isNoClearPostData));\n      };\n    };\n    _this.setPostData = function (model) {\n      var pageId = model.pageId,\n        key = model.key;\n      var type = 'controls';\n      var item = model.getMetaProperty(['item']);\n      // 元数据存在item，则证明是字段的扩展，否则是控件\n      if (item) {\n        type = 'fields';\n      }\n      return function (postData) {\n        // setPageData(pageId, ['post', type, key], postData)\n        type === 'controls' ? (0, _appModelFunction.setControlPostValue)(pageId, key, postData) : (0, _appModelFunction.setFieldPostValue)(pageId, key, postData);\n      };\n    };\n    _this.attachDataInstance = new _customComponentManage.InjectAttachData();\n    return _this;\n  }\n  _createClass(KDCustom, [{\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps) {\n      var model = this.props.model;\n      var nextModel = nextProps.model;\n      var oldData = model.getDataValue();\n      var nextData = nextModel.getDataValue();\n      var oldConfigItems = (0, _componentutil.getComponentDataProperty)(model, 'ci', 'ci', false);\n      var newConfigItems = (0, _componentutil.getComponentDataProperty)(nextModel, 'ci', 'ci', false);\n      var lock = this.props.isLocked;\n      var nextLock = nextProps.isLocked;\n      var cardRowData = (0, _customCtrlUtil.getCardRowData)(this.props, model);\n      var newCardRowData = (0, _customCtrlUtil.getCardRowData)(nextProps, nextModel);\n      var locale = model.getUserLocale();\n      var newLocale = nextModel.getUserLocale();\n      var oldStyle = this.props.style;\n      var newStyle = nextProps.style;\n      var oldMetaStyle = (0, _componentutil.getCommonStyle)(model);\n      var newMetaStyle = (0, _componentutil.getCommonStyle)(nextModel);\n      var subFormsArry = model.getDataProperty('subForms');\n      var newSubFormsArray = nextModel.getDataProperty('subForms');\n\n      // data，配置项，锁定性，卡片行数据，语言\n\n      return !(0, _immutable.is)(nextData, oldData) || !(0, _immutable.is)(oldConfigItems, newConfigItems) || lock !== nextLock || !(0, _immutable.is)(oldStyle, newStyle) || !(0, _immutable.is)(oldMetaStyle, newMetaStyle) || !(0, _immutable.is)((0, _immutable.fromJS)(cardRowData), (0, _immutable.fromJS)(newCardRowData)) || locale !== newLocale || !(0, _immutable.is)(subFormsArry, newSubFormsArray);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n        model = _this$props.model,\n        style = _this$props.style,\n        attachData = _this$props.attachData;\n      var customMeta = this.getCustomInfo(model);\n      var _style = Object.assign({}, (0, _componentutil.getCommonStyle)(model), style);\n      var className = (0, _commonUtils[\"default\"])((0, _componentutil.getCommonClass)(model));\n      var schemaInfo = model.getMetaProperty(['item', 'isCustom']) || model.getMetaProperty('schemaInfo');\n      if (!schemaInfo) {\n        var _customMeta$subFormsA = customMeta.subFormsArry.outerForms,\n          outerForms = _customMeta$subFormsA === void 0 ? [] : _customMeta$subFormsA;\n        return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n          style: _style,\n          className: className\n        }, outerForms.length ? _react[\"default\"].Children.toArray(outerForms) : null);\n      }\n      var data = customMeta.data,\n        configItems = customMeta.configItems,\n        lock = customMeta.lock,\n        lang = customMeta.lang,\n        themeColor = customMeta.themeColor,\n        themeNum = customMeta.themeNum,\n        cardRowData = customMeta.cardRowData,\n        gridRowData = customMeta.gridRowData,\n        subFormsArry = customMeta.subFormsArry,\n        themeInfo = customMeta.themeInfo,\n        others = _objectWithoutProperties(customMeta, _excluded);\n      var customProps = {\n        data: data,\n        configItems: configItems,\n        lock: lock,\n        lang: lang,\n        themeColor: themeColor,\n        themeNum: themeNum,\n        cardRowData: cardRowData,\n        gridRowData: gridRowData,\n        themeInfo: themeInfo\n      };\n      return /*#__PURE__*/_react[\"default\"].createElement(_BaseCustomCtrl[\"default\"], _extends({\n        setPostData: this.setPostData(model),\n        invokeCustomMethod: this.invokeCustomMethod(model),\n        model: model,\n        style: _style,\n        className: className\n      }, attachData, others, {\n        outerForms: subFormsArry.outerForms,\n        innerForms: subFormsArry.innerForms,\n        customProps: customProps,\n        attachDataInstance: this.attachDataInstance\n      }));\n    }\n  }]);\n  return KDCustom;\n}(_react.Component)) || _class) || _class) || _class);\nvar _default = exports[\"default\"] = KDCustom;\n\n//# sourceURL=webpack://bos-platform/./src/component/web/KDCustom.js?");

/***/ }),

/***/ "./src/component/web/KDField.js":
/*!**************************************!*\
  !*** ./src/component/web/KDField.js ***!
  \**************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.filter.js */ \"../../node_modules/core-js/modules/es.array.filter.js\");\n__webpack_require__(/*! core-js/modules/es.array.from.js */ \"../../node_modules/core-js/modules/es.array.from.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.array.slice.js */ \"../../node_modules/core-js/modules/es.array.slice.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.function.name.js */ \"../../node_modules/core-js/modules/es.function.name.js\");\n__webpack_require__(/*! core-js/modules/es.object.create.js */ \"../../node_modules/core-js/modules/es.object.create.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-properties.js */ \"../../node_modules/core-js/modules/es.object.define-properties.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptors.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptors.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.get-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.keys.js */ \"../../node_modules/core-js/modules/es.object.keys.js\");\n__webpack_require__(/*! core-js/modules/es.object.set-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.set-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.reflect.construct.js */ \"../../node_modules/core-js/modules/es.reflect.construct.js\");\n__webpack_require__(/*! core-js/modules/es.regexp.to-string.js */ \"../../node_modules/core-js/modules/es.regexp.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.array.concat.js */ \"../../node_modules/core-js/modules/es.array.concat.js\");\n__webpack_require__(/*! core-js/modules/es.array.for-each.js */ \"../../node_modules/core-js/modules/es.array.for-each.js\");\n__webpack_require__(/*! core-js/modules/es.array.includes.js */ \"../../node_modules/core-js/modules/es.array.includes.js\");\n__webpack_require__(/*! core-js/modules/es.array.index-of.js */ \"../../node_modules/core-js/modules/es.array.index-of.js\");\n__webpack_require__(/*! core-js/modules/es.array.is-array.js */ \"../../node_modules/core-js/modules/es.array.is-array.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-string.js */ \"../../node_modules/core-js/modules/es.date.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.assign.js */ \"../../node_modules/core-js/modules/es.object.assign.js\");\n__webpack_require__(/*! core-js/modules/es.object.is.js */ \"../../node_modules/core-js/modules/es.object.is.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.object.values.js */ \"../../node_modules/core-js/modules/es.object.values.js\");\n__webpack_require__(/*! core-js/modules/es.parse-float.js */ \"../../node_modules/core-js/modules/es.parse-float.js\");\n__webpack_require__(/*! core-js/modules/es.parse-int.js */ \"../../node_modules/core-js/modules/es.parse-int.js\");\n__webpack_require__(/*! core-js/modules/es.regexp.exec.js */ \"../../node_modules/core-js/modules/es.regexp.exec.js\");\n__webpack_require__(/*! core-js/modules/es.string.includes.js */ \"../../node_modules/core-js/modules/es.string.includes.js\");\n__webpack_require__(/*! core-js/modules/es.string.replace.js */ \"../../node_modules/core-js/modules/es.string.replace.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ \"../../node_modules/core-js/modules/web.dom-collections.for-each.js\");\n__webpack_require__(/*! core-js/modules/web.timers.js */ \"../../node_modules/core-js/modules/web.timers.js\");\nvar _react = _interopRequireDefault(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _reactDom = _interopRequireDefault(__webpack_require__(/*! react-dom */ \"webpack/sharing/consume/default/react-dom/react-dom?418d\"));\nvar _propTypes = _interopRequireDefault(__webpack_require__(/*! prop-types */ \"../../node_modules/prop-types/index.js\"));\nvar _ComposeEnhance = _interopRequireDefault(__webpack_require__(/*! ../common/ComposeEnhance */ \"./src/component/common/ComposeEnhance.js\"));\nvar _PropsComparison = _interopRequireDefault(__webpack_require__(/*! ../common/PropsComparison */ \"./src/component/common/PropsComparison.js\"));\nvar _componentutil = __webpack_require__(/*! @/util/componentutil */ \"./src/util/componentutil.js\");\nvar _BaseComponents = __webpack_require__(/*! ./base/BaseComponents */ \"./src/component/web/base/BaseComponents/index.js\");\nvar _Picture = _interopRequireDefault(__webpack_require__(/*! ./base/Picture */ \"./src/component/web/base/Picture.jsx\"));\nvar _Select = _interopRequireDefault(__webpack_require__(/*! ./base/Select */ \"./src/component/web/base/Select.js\"));\nvar _FieldItem = _interopRequireDefault(__webpack_require__(/*! ./base/FieldItem */ \"./src/component/web/base/FieldItem.js\"));\nvar _MulLangText = _interopRequireDefault(__webpack_require__(/*! ./base/MulLangText */ \"./src/component/web/base/MulLangText.js\"));\nvar _LargeTextCtl = _interopRequireDefault(__webpack_require__(/*! ./base/LargeTextCtl */ \"./src/component/web/base/LargeTextCtl.js\"));\nvar _serverproperties = __webpack_require__(/*! ../../constant/serverproperties */ \"./src/constant/serverproperties.js\");\nvar _fieldaction = __webpack_require__(/*! ../../action/fieldaction */ \"./src/action/fieldaction.js\");\nvar _buttonaction = __webpack_require__(/*! ../../action/buttonaction */ \"./src/action/buttonaction.js\");\nvar admindivisionactions = _interopRequireWildcard(__webpack_require__(/*! ../../action/admindivisionaction */ \"./src/action/admindivisionaction.js\"));\nvar _tooltipaction = __webpack_require__(/*! ../../action/tooltipaction */ \"./src/action/tooltipaction.js\");\nvar cityactions = _interopRequireWildcard(__webpack_require__(/*! ../../action/cityactions.jsx */ \"./src/action/cityactions.jsx\"));\nvar attachmentpanelaction = _interopRequireWildcard(__webpack_require__(/*! ../../action/attachmentpanelaction */ \"./src/action/attachmentpanelaction.js\"));\nvar _datePickerAction = __webpack_require__(/*! @/action/datePickerAction */ \"./src/action/datePickerAction.js\");\nvar _imagelistaction = __webpack_require__(/*! ../../action/imagelistaction */ \"./src/action/imagelistaction.js\");\nvar _desensiteAction = __webpack_require__(/*! @/action/desensiteAction */ \"./src/action/desensiteAction.js\");\nvar _commonUtils = _interopRequireDefault(__webpack_require__(/*! ../common/commonUtils */ \"./src/component/common/commonUtils.js\"));\nvar _KDAdminDivision = _interopRequireDefault(__webpack_require__(/*! ./KDAdminDivision */ \"./src/component/web/KDAdminDivision.js\"));\nvar _KDCity = _interopRequireDefault(__webpack_require__(/*! ./KDCity.jsx */ \"./src/component/web/KDCity.jsx\"));\nvar _TelephoneField = _interopRequireDefault(__webpack_require__(/*! ./baseField/TelephoneField */ \"./src/component/web/baseField/TelephoneField.jsx\"));\nvar _VisibleLockWrap = _interopRequireDefault(__webpack_require__(/*! ../common/VisibleLockWrap */ \"./src/component/common/VisibleLockWrap.js\"));\nvar _Icon = _interopRequireDefault(__webpack_require__(/*! ./base/Icon */ \"./src/component/web/base/Icon.jsx\"));\nvar _defaultApp = _interopRequireDefault(__webpack_require__(/*! ./img/default/defaultApp.png */ \"./src/component/web/img/default/defaultApp.png\"));\nvar _appModelFunction = __webpack_require__(/*! ../../model/appModelFunction */ \"./src/model/appModelFunction.js\");\nvar _index = _interopRequireDefault(__webpack_require__(/*! ./baseField/index.jsx */ \"./src/component/web/baseField/index.jsx\"));\nvar _classnames3 = _interopRequireDefault(__webpack_require__(/*! classnames */ \"../../node_modules/classnames/index.js\"));\nvar _DragWrap = _interopRequireDefault(__webpack_require__(/*! ../common/DragWrap */ \"./src/component/common/DragWrap.js\"));\nvar _Slot = _interopRequireDefault(__webpack_require__(/*! @/component/common/Slot */ \"./src/component/common/Slot.jsx\"));\nvar _immutable = __webpack_require__(/*! immutable */ \"webpack/sharing/consume/default/immutable/immutable?f2ca\");\nvar _lodash = _interopRequireWildcard(__webpack_require__(/*! lodash */ \"../../node_modules/lodash/lodash.js\"));\nvar _AttachDataWrap = _interopRequireDefault(__webpack_require__(/*! ../common/AttachDataWrap */ \"./src/component/common/AttachDataWrap.js\"));\nvar _memoryCacher = __webpack_require__(/*! ../../model/memoryCacher */ \"./src/model/memoryCacher.js\");\nvar _const = __webpack_require__(/*! ../../constant/const */ \"./src/constant/const.js\");\nvar _defaultPropsUtil = __webpack_require__(/*! @/util/defaultPropsUtil */ \"./src/util/defaultPropsUtil.js\");\nvar _customProperties = _interopRequireDefault(__webpack_require__(/*! @/constant/customProperties */ \"./src/constant/customProperties.js\"));\nvar _textUtil = __webpack_require__(/*! @/util/textUtil */ \"./src/util/textUtil.js\");\nvar _fieldType = _interopRequireDefault(__webpack_require__(/*! @/constant/fieldType */ \"./src/constant/fieldType.js\"));\nvar _GlobalDataCacher = __webpack_require__(/*! @/model/GlobalDataCacher */ \"./src/model/GlobalDataCacher.js\");\nvar _symbolConst = __webpack_require__(/*! @/constant/symbolConst */ \"./src/constant/symbolConst.js\");\nvar _KDField2 = _interopRequireDefault(__webpack_require__(/*! ./KDField.less */ \"./src/component/web/KDField.less\"));\nvar _imageUtil = __webpack_require__(/*! @/util/imageUtil */ \"./src/util/imageUtil.js\");\nvar _langUtil = __webpack_require__(/*! @/util/langUtil */ \"./src/util/langUtil.js\");\nvar _PrivacyText = _interopRequireDefault(__webpack_require__(/*! @/component/web/PrivacyText/PrivacyText */ \"./src/component/web/PrivacyText/PrivacyText.jsx\"));\nvar _sysActionName = __webpack_require__(/*! ../../action/actionname/sysActionName */ \"./src/action/actionname/sysActionName.js\");\nvar _client = __webpack_require__(/*! @/action/actionname/global/system/client */ \"./src/action/actionname/global/system/client/index.js\");\nvar _addressAction = __webpack_require__(/*! ../../action/addressAction */ \"./src/action/addressAction.js\");\nvar _action = __webpack_require__(/*! @/action/action */ \"./src/action/action.js\");\nvar _waitUpdateValueUtil = __webpack_require__(/*! @/api/waitUpdateValueUtil */ \"./src/api/waitUpdateValueUtil.js\");\nvar _crypto = __webpack_require__(/*! @/api/crypto.js */ \"./src/api/crypto.js\");\nvar _server = __webpack_require__(/*! @/action/actionname/control/field/server */ \"./src/action/actionname/control/field/server/index.js\");\nvar _tooltipsUtil = __webpack_require__(/*! @/util/tooltipsUtil */ \"./src/util/tooltipsUtil.js\");\nvar _ValidationService = __webpack_require__(/*! @/service/common/ValidationService */ \"./src/service/common/ValidationService.js\");\nvar _utils = __webpack_require__(/*! @/validator/utils */ \"./src/validator/utils.js\");\nvar _layoutService = __webpack_require__(/*! @/service/web/layoutService */ \"./src/service/web/layoutService.js\");\nvar _FieldLabel = _interopRequireDefault(__webpack_require__(/*! @/component/web/FieldLabel/FieldLabel */ \"./src/component/web/FieldLabel/FieldLabel.jsx\"));\nvar _fieldUtils = __webpack_require__(/*! @/util/fieldUtils */ \"./src/util/fieldUtils.js\");\nvar _convertFieldValue = _interopRequireDefault(__webpack_require__(/*! @/util/convertFieldValue */ \"./src/util/convertFieldValue.js\"));\nvar _index2 = __webpack_require__(/*! @/component/web/designerCommonUtils/index */ \"./src/component/web/designerCommonUtils/index.js\");\nvar _encryptRSA = __webpack_require__(/*! @/util/encryptRSA.js */ \"./src/util/encryptRSA.js\");\nvar _waitGetLookUpListUtil = _interopRequireDefault(__webpack_require__(/*! @/util/waitGetLookUpListUtil.js */ \"./src/util/waitGetLookUpListUtil.js\"));\nvar _controlStateValue = __webpack_require__(/*! @/validator/controlStateValue */ \"./src/validator/controlStateValue.js\");\nvar _signatureAction = __webpack_require__(/*! @/action/signatureAction */ \"./src/action/signatureAction.js\");\nvar _excluded = [\"onChange\", \"onBlur\", \"tabIndex\"];\nvar _dec, _dec2, _dec3, _class, _KDField;\n/**\n * 字段控件,根据类型渲染对应的文本/数字/日期...控件\n */\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n// type list: 以下列表中控件不能在触发onBlur(失去焦点event)时update store，要实时。\nvar _updateDirectLst = ['radio', 'checkbox', 'combo', 'mulcombo', 'date', 'datetime', 'daterange', 'picture', 'cascademenu', 'user', 'basedata', 'mulbasedata', 'city', 'cascader', 'attachmentfield', 'time', 'timerange', 'namesegcombo', 'signature', 'checkboxgroup'];\n\n// 改变radio的值\nvar CHANGE_RADIO_VALUE = 'changeRadioValue';\nvar DATA_SHORTCUT = 'data-shortcut';\nvar KDField = (_dec = (0, _DragWrap[\"default\"])(), _dec2 = (0, _VisibleLockWrap[\"default\"])(true, false, false), _dec3 = (0, _ComposeEnhance[\"default\"])(_PropsComparison[\"default\"]), _dec(_class = _dec2(_class = _dec3(_class = (0, _AttachDataWrap[\"default\"])(_class = (_KDField = /*#__PURE__*/function (_React$Component) {\n  _inherits(KDField, _React$Component);\n  function KDField(_props) {\n    var _this;\n    _classCallCheck(this, KDField);\n    _this = _callSuper(this, KDField, [_props]);\n    /**\n     * 获取多语言文本字段配置\n     * @param {object} model Model\n     * @param {string} value\n     * @returns 多语言字段配置信息\n     */\n    _this.getLangSetting = function (model, value) {\n      var langList = (0, _appModelFunction.getLangList)()(model.state);\n      var defaultLang = (0, _appModelFunction.getDefaultLang)()(model.state);\n      var lang = model.getUserLocale();\n      return {\n        langList: langList,\n        lang: lang,\n        defaultLang: defaultLang\n      };\n    };\n    _this.handleUpdatePostData = function () {\n      var _this$props = _this.props,\n        model = _this$props.model,\n        dispatch = _this$props.dispatch;\n      var pageId = model.pageId,\n        key = model.key;\n      var value = _this.formatAndEncodeValue(_this.state.innerValue);\n      if (value !== undefined && value !== model.getDataValue()) {\n        var postValue = value;\n        var option = model.getMetaProperty('item') || (0, _immutable.fromJS)({});\n        var type = option.get('type');\n        if (type === _fieldType[\"default\"].Password) {\n          var _getFormConfig;\n          var publicKey = (0, _memoryCacher.getPageData)(pageId, _const.PUBLIC_KEY) || ((_getFormConfig = (0, _appModelFunction.getFormConfig)(pageId)(model.state)) === null || _getFormConfig === void 0 ? void 0 : _getFormConfig.publicKey);\n          postValue = (0, _encryptRSA.encryptRSA)(publicKey, postValue);\n        }\n        dispatch((0, _appModelFunction.convertAppModelFunctionAction)((0, _appModelFunction.setFieldPostValue)(pageId, key, postValue)));\n      }\n    };\n    _this.isFieldDisabled = function (fieldControl) {\n      var model = _this.props.model;\n      var option = model.getMetaProperty('item') || (0, _immutable.Map)();\n      var editable = option && option.get(_serverproperties.EDITABLE); // 输入框是否允许编辑\n      var lock = _this._getLock(model);\n      if (!Array.isArray(fieldControl) && _typeof(fieldControl) === 'object' || Array.isArray(fieldControl) && lock === true) {\n        return editable === false || lock;\n      }\n      return false;\n    };\n    // =======================================================================\n    // ============================== Event Listener =========================\n    _this.invokeControlMethods = function (events) {\n      events.forEach(function (event) {\n        var methodName = event.methodname,\n          args = event.args,\n          key = event.key,\n          _event$options = event.options,\n          options = _event$options === void 0 ? {} : _event$options;\n        switch (methodName) {\n          case 'setFocus':\n            _this.handleSetFocus(args);\n            break;\n          case _server.TRANSFORM_MODEL:\n            _this.setEncodeData(key);\n            break;\n          case _server.SET_ENCODING_KEYS:\n            _this.setEncodingKeys(key);\n            break;\n          case 'updateValue':\n            // 前端脚本主动更新字段值\n            if (!_this.props.isLocked) {\n              var model = _this.props.model;\n              var option = model.getMetaProperty('item') || (0, _immutable.Map)({});\n              var type = option.get('type');\n              options.lang = model.getUserLocale();\n              var newValue = (0, _convertFieldValue[\"default\"])(args, type, option, options);\n              if (newValue === null) {\n                return;\n              }\n              var _key = model.key;\n              if (type === _fieldType[\"default\"].Radio) {\n                if (!newValue) {\n                  // 单选按钮只支持setValue(true)\n                  return;\n                }\n                newValue = option.get(_serverproperties.VALUE);\n                // model.key = option.get(GROUP) // radio实际是修改group字段值\n                // 解决单选按钮和按钮按钮组不在同一个flexpanel不能选中的问题\n                _key = option.get(_serverproperties.GROUP);\n                setTimeout(function () {\n                  (0, _memoryCacher.setPageData)(model.pageId, [CHANGE_RADIO_VALUE, option.get(_serverproperties.GROUP)], {\n                    groupValue: newValue\n                  });\n                }, 0);\n              }\n              _this.setState({\n                innerValue: newValue\n              });\n              var value = _this.formatAndEncodeValue(newValue);\n              var isPasswordbox = false;\n              var isFireUpdate = false;\n              switch (options.fireUpdate) {\n                case 'auto':\n                  isFireUpdate = _this.getFireUpdate(_this.props.model);\n                  break;\n                case 'enabled':\n                  isFireUpdate = true;\n                  break;\n                default:\n                  break;\n              }\n              (0, _fieldaction.addBatchUpdate)(model.pageId, _key, value, isPasswordbox, isFireUpdate);\n            }\n            break;\n          default:\n            console.info(\"\".concat(_this.props.model.key, \"\\u7684\").concat(methodName, \" \\u65B9\\u6CD5\\u6CA1\\u6709\\u5B9E\\u73B0\"));\n        }\n      });\n    };\n    // =======================================================================\n    // ============================== Event Handler ==========================\n    _this.handleInputChange = function (evt) {\n      var value = evt.target.value;\n      if (_this.textFormatter) {\n        value = _this.textFormatter.getFormattedValue(evt.target.value);\n        _this.textFormatter.resetCursor(value, _this.state.innerValue, evt.target);\n      }\n      _this.handleChange(value);\n    };\n    // 设置焦点\n    _this.handleSetFocus = function () {\n      var type = _this.props.model.getMetaProperty('item').get('type');\n      var inputTagName = 'input';\n      if (type === _fieldType[\"default\"].Textarea) {\n        inputTagName = 'textarea';\n      }\n      var inputEle = _reactDom[\"default\"].findDOMNode(_assertThisInitialized(_this)).getElementsByTagName(inputTagName)[0];\n      inputEle && inputEle.focus();\n    };\n    // 获取加密key值\n    _this.setEncodeData = function (key) {\n      _this.encodeKeys = [key];\n      var pageEncodeKeys = (0, _memoryCacher.getPageData)(_this.props.model.pageId, _const.KDBASE64) || [];\n      !pageEncodeKeys.includes(key) && pageEncodeKeys.push(key);\n      (0, _memoryCacher.setPageData)(_this.props.model.pageId, _const.KDBASE64, pageEncodeKeys);\n    };\n    // 获取需要编码的Key值集合，新的编码方式\n    _this.setEncodingKeys = function (key) {\n      _this.encodingKeys = [key];\n      var pageEncodeKeys = (0, _memoryCacher.getPageData)(_this.props.model.pageId, _const.ENCODE_KEYS) || [];\n      !pageEncodeKeys.includes(key) && pageEncodeKeys.push(key);\n      (0, _memoryCacher.setPageData)(_this.props.model.pageId, _const.ENCODE_KEYS, pageEncodeKeys);\n    };\n    // 字段是否需要加密\n    _this.getIsEncodingField = function (type) {\n      return type === _fieldType[\"default\"].RichText;\n    };\n    _this.handleChange = function (value) {\n      var isStepperOperatorClick = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var isAttachmentRemove = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var model = _this.props.model;\n      var option = model.getMetaProperty('item') || (0, _immutable.fromJS)({});\n      var type = option.get('type');\n      if (_this.isRadioGroupExist(type, option.get(_serverproperties.GROUP))) {\n        model.key = option.get(_serverproperties.GROUP);\n        // 解决单选按钮和按钮按钮组不在同一个flexpanel不能选中的问题\n        setTimeout(function () {\n          (0, _memoryCacher.setPageData)(model.pageId, [CHANGE_RADIO_VALUE, option.get(_serverproperties.GROUP)], {\n            groupValue: value\n          });\n        }, 0);\n      }\n      _this.setState({\n        innerValue: value\n      }, function () {\n        // safari下，多行文本输入时会触发resize observer,浏览器提示过度计算导致中文无法输入\n        setTimeout(function () {\n          (0, _utils.clearGroupValidateMes)({\n            pageId: model.pageId,\n            key: model.key\n          });\n          (0, _ValidationService.doRealTimeValidate)({\n            value: value,\n            model: model\n          });\n        }, 0);\n      });\n      if (isStepperOperatorClick || _updateDirectLst.indexOf(type) > -1 && value !== undefined && value !== model.getDataValue()) {\n        _this.props.dispatch((0, _fieldaction.change)(model, value)); // 直接update store，不需等到失去焦点\n\n        if (type === 'checkbox' && _this.getFireUpdate(model)) {\n          // 即时更新时，为checkbox增加繁忙提示\n          var busyTip = model.getMetaProperty('busyTip');\n          if (busyTip) (0, _memoryCacher.setFieldLastUpdateBusyTip)(model.pageId, {\n            key: model.key,\n            busyTip: busyTip.toJS()\n          });\n        }\n        // 为非及时触发更新的附件字段删除时发送一个updateValue\n        if (!_this.getFireUpdate(model) && type === 'attachmentfield' && isAttachmentRemove) {\n          _this.props.dispatch((0, _fieldaction.change)(model, value, undefined, true));\n        }\n      }\n    };\n    // 文本字段按钮编辑风格，删除按钮，update store\n    _this.handleTextChange = function (value) {\n      var model = _this.props.model;\n      if (_this.getEnable() && _this.getMustInput()) {\n        var pageId = model.pageId,\n          key = model.key;\n        var caption = model.getMetaLocaleProperty('caption');\n        if (!value) {\n          // 值为空，提示信息写入页面缓存\n          (0, _appModelFunction.setFieldValidateMsg)(pageId, key);\n          (0, _appModelFunction.setFieldValidateCaption)(pageId, key, _const.VALIDATE_MSG_TYPE.notNull, caption);\n          (0, _appModelFunction.setParentCollapsePanelId)(pageId, key);\n        } else {\n          // 值不为空，清楚页面缓存中提示信息\n          (0, _appModelFunction.deleteFieldValidateMsg)(pageId, key);\n          (0, _appModelFunction.deleteFieldValidateCaption)(pageId, key);\n          (0, _memoryCacher.deletePageData)(pageId, [_const.PARENT_COLLAPSE_PANEL_ID, key]);\n        }\n      }\n      _this.setState({\n        innerValue: value\n      });\n      if (value !== undefined && value !== model.getDataValue()) {\n        _this.props.dispatch((0, _fieldaction.change)(model, value)); // 直接update store，不需等到失去焦点\n      }\n    };\n    // onMouseDown时手动触发change,保证在文本字段的updateValue事件前触发,把自己的内容写入postdata\n    // checkbox的及时值更新开启时，把checkbox的valuechange放在click中执行\n    _this.handleChangeOfChk = function (disabled, value) {\n      if (disabled !== true) {\n        _this.handleChange(!value);\n      }\n    };\n    _this.setAdressItemByNumber = function (model, value) {\n      _this.props.dispatch((0, _addressAction.setItemByNumber)(model, value));\n    };\n    _this.handleFocus = function () {\n      if (_this.textFormatter) {\n        var val = _this.textFormatter.getNormalValue(_this.state.innerValue);\n        var innerValue = _this.textFormatter.generateFormatValue(val);\n        _this.setState({\n          innerValue: innerValue\n        });\n      }\n      _this.sendFocusEvent2Server(true);\n    };\n    // 格式化与加密处理\n    _this.formatAndEncodeValue = function (value) {\n      var _this$encodingKeys, _this$encodeKeys;\n      var model = _this.props.model;\n      var key = model.key;\n      if (_this.textFormatter) {\n        value = _this.textFormatter.getNormalValue(value);\n      }\n\n      // 加密情况\n      if (((_this$encodingKeys = _this.encodingKeys) === null || _this$encodingKeys === void 0 ? void 0 : _this$encodingKeys.indexOf(key)) > -1) {\n        value = (0, _index2.encodeValWithPrefix)(value);\n      } else if (((_this$encodeKeys = _this.encodeKeys) === null || _this$encodeKeys === void 0 ? void 0 : _this$encodeKeys.indexOf(key)) > -1) {\n        value = (0, _crypto.getEncodeValWithPrefix)(value);\n      }\n      return value;\n    };\n    _this.sendFocusEvent2Server = function (isFocus) {\n      var model = _this.props.model;\n      var isTriggerFocus = model.getMetaProperty(_serverproperties.FIELD_FOCUS);\n      if (isTriggerFocus) {\n        _this.props.dispatch((0, _fieldaction.inputFocus)(model, isFocus));\n      }\n    };\n    _this.handleLargeTextEditBtn = function (lock) {\n      // 大文本字段锁定状态按钮也需要可以点击查看内容\n      var model = _this.props.model;\n      _this.props.dispatch((0, _fieldaction.clickLargeText)(model, {\n        lock: lock\n      }));\n    };\n    _this.handleValueClick = function (e) {\n      var _this$props2 = _this.props,\n        model = _this$props2.model,\n        dispatch = _this$props2.dispatch;\n      var isLink = model.getMetaProperty('ln');\n      var option = model.getMetaProperty('item') || (0, _immutable.Map)();\n      var disabled = option && option.get(_serverproperties.EDITABLE) === false || _this._getLock(model);\n      var fieldStyle = option && option.get(_serverproperties.FIELD_STYLE);\n      if (isLink && (disabled || fieldStyle === 1)) {\n        // 禁止编辑、标签风格，可点击\n        dispatch((0, _fieldaction.clickHyperLink)(model)); // 超链接点击\n      }\n    };\n    // showPicture (value) {\n    //   this.props.showPicture && this.props.showPicture(this.props.model, value)\n    // }\n    _this.showPicture = function (data) {\n      // 图片字段的预览由后端指令执行改为前端preview\n      (0, _GlobalDataCacher.updateData)(_symbolConst.KEY_PREVIEW, [false, {}], function () {\n        return [true, data];\n      });\n    };\n    // =======================================================================\n    // ============================= Other ===================================\n    _this.saveValueToCache = function (pageId, key, fieldType) {\n      return function (value) {\n        (0, _controlStateValue.setControlStateValue)({\n          pageId: pageId,\n          key: key,\n          fieldType: fieldType,\n          rowIndex: -1,\n          value: value\n        });\n      };\n    };\n    _this.updateLayoutInfo = function (props) {\n      var _props$layoutOption;\n      var isForceReCalculate = _this.props.formStatus !== props.formStatus;\n      var layoutInfo = (0, _layoutService.getLayoutInfo)(_reactDom[\"default\"].findDOMNode(_assertThisInitialized(_this)), props.model, isForceReCalculate);\n      if ((_props$layoutOption = props.layoutOption) !== null && _props$layoutOption !== void 0 && _props$layoutOption.isLastColumn && layoutInfo.style) {\n        layoutInfo = (0, _lodash.cloneDeep)(layoutInfo);\n        layoutInfo.style.marginRight = '0px';\n      }\n      if (layoutInfo !== _this.state.layoutInfo) {\n        _this.setState({\n          layoutInfo: layoutInfo\n        });\n      }\n    };\n    /**\n     * 更新内部值\n     * @param {object} nextProps\n     */\n    _this.updateInnerValue = function (nextProps) {\n      var newValue = nextProps.model.getDataValue();\n      var oldValue = _this.props.model.getDataValue();\n      if (newValue !== undefined && newValue !== oldValue) {\n        var nextModel = nextProps.model;\n        var isText = nextModel.getMetaProperty(['item', 'type']) === 'text';\n        if (isText && _this.textFormatter) {\n          newValue = _this.textFormatter.generateFormatValue(newValue);\n        }\n        _this.setState({\n          innerValue: newValue\n        }, function () {\n          _this.exectueSaveValueToCacheFn(newValue);\n        });\n        // u 指令更新值的时候，也要移除后端校验\n        setTimeout(function () {\n          (0, _utils.clearGroupValidateMes)({\n            pageId: nextProps.model.pageId,\n            key: nextProps.model.key\n          });\n        }, 0);\n      }\n    };\n    /**\n     * 设置焦点\n     * @param {object} nextProps\n     */\n    _this.setFocus = function (nextProps) {\n      var focus = nextProps.model.getDataProperty('focus');\n      var oldFocus = _this.props.model.getDataProperty('focus');\n      if (focus && !oldFocus) {\n        _this.handleSetFocus();\n        _this.props.dispatch((0, _appModelFunction.convertAppModelFunctionAction)((0, _appModelFunction.setDataProperty)(nextProps.model.pageId, nextProps.model.key, 'focus', false)));\n      }\n    };\n    /**\n     * 元数据发生变化，清除提示信息\n     * @param {object} nextProps\n     */\n    _this.removeValidateMsg = function (nextProps) {\n      var _model$meta, _this$props$model$met;\n      var model = nextProps.model;\n      // hashCode 不相等，判定为元数据已经被修改\n      var isMetaChanged = ((_model$meta = model.meta) === null || _model$meta === void 0 || (_model$meta = _model$meta.get(_serverproperties.ITEM)) === null || _model$meta === void 0 ? void 0 : _model$meta.hashCode()) !== ((_this$props$model$met = _this.props.model.meta) === null || _this$props$model$met === void 0 || (_this$props$model$met = _this$props$model$met.get(_serverproperties.ITEM)) === null || _this$props$model$met === void 0 ? void 0 : _this$props$model$met.hashCode());\n      // 必录且新值非空\n      var nextVal = _this.state.innerValue || nextProps.model.getDataValue();\n      var isValidatePass = (0, _ValidationService.doRealTimeValidate)({\n        value: nextVal,\n        model: model\n      }, false);\n      if (isMetaChanged || isValidatePass) {\n        (0, _utils.removeFieldValidateMsg)({\n          pageId: nextProps.model.pageId,\n          key: nextProps.model.key\n        });\n      }\n    };\n    _this.removeFieldsTipsMsg = function (prevProps, prevState) {\n      var dataValue = _this.props.model.getDataValue();\n      var prevDataValue = prevProps.model.getDataValue();\n      var value = _this.state.innerValue;\n      var prevValue = prevState.innerValue;\n      var type = _this.getFieldType();\n      var model = _this.props.model;\n      var userLocal = model.getUserLocale();\n      // 解决多语言文本，切换英文语言，检验信息不通过的问题，因为检验取的是系统语言的值，而不是组件当前语言的值\n      if (type === _fieldType[\"default\"].LocaleText && _this.mulLangText) {\n        value = _reactDom[\"default\"].findDOMNode(_this.mulLangText).getAttribute('data-summary');\n        if (dataValue) {\n          dataValue = _immutable.Map.isMap(dataValue) ? dataValue.get(userLocal) : dataValue[userLocal];\n        }\n        if (prevDataValue) {\n          prevDataValue = _immutable.Map.isMap(prevDataValue) ? prevDataValue.get(userLocal) : prevDataValue[userLocal];\n        }\n        if (prevValue) {\n          prevValue = _immutable.Map.isMap(prevValue) ? prevValue.get(userLocal) : prevValue[userLocal];\n        }\n      }\n      // 如果两次值没有变化直接返回\n      if (dataValue === prevDataValue && value === prevValue) {\n        if (_this.getEnable() === false) {\n          // 字段是不可见的，删除该字段所有类型校验信息\n          var _model2 = _this.props.model;\n          var pageId = _model2.pageId,\n            key = _model2.key;\n          Object.values(_const.VALIDATE_MSG_TYPE).forEach(function (value) {\n            return (0, _memoryCacher.deletePageData)(pageId, [_const.VALIDATE_DATA, key, value]);\n          });\n          (0, _memoryCacher.deletePageData)(pageId, [_const.VALIDATE_DATA, key]);\n          Object.values(_const.VALIDATE_MSG_TYPE).forEach(function (value) {\n            return (0, _memoryCacher.deletePageData)(pageId, [_const.VALIDATE_DATA_CAPTION, key, value]);\n          });\n          (0, _memoryCacher.deletePageData)(pageId, [_const.VALIDATE_DATA_CAPTION, key]);\n          Object.values(_const.VALIDATE_MSG_TYPE).forEach(function (value) {\n            return (0, _memoryCacher.deletePageData)(pageId, [_const.PARENT_COLLAPSE_PANEL_ID, key, value]);\n          });\n          (0, _memoryCacher.deletePageData)(pageId, [_const.PARENT_COLLAPSE_PANEL_ID, key]);\n        }\n        return;\n      }\n      _this.getEnable() && (0, _utils.deleteMsg)({\n        model: _this.props.model\n      });\n    };\n    _this.beforeUploadPicture = function (args) {\n      _this.props.dispatch && _this.props.dispatch((0, _imagelistaction.beforeUpload)(_this.props.model, args));\n    };\n    _this.uploadPictureResult = function (args) {\n      _this.props.dispatch && _this.props.dispatch((0, _imagelistaction.reportUploadResult)(_this.props.model, args));\n    };\n    _this.updateTips = function (nextProps) {\n      var _nextProps$model, _nextProps$model2;\n      var tips = (0, _tooltipsUtil.getTips)(_this.props.model);\n      var nextTips = (0, _tooltipsUtil.getTips)(nextProps.model);\n      if (!(0, _immutable.is)(tips, nextTips)) _this.updateTipsConfig((_nextProps$model = nextProps.model) === null || _nextProps$model === void 0 ? void 0 : _nextProps$model.pageId, (_nextProps$model2 = nextProps.model) === null || _nextProps$model2 === void 0 ? void 0 : _nextProps$model2.key, nextTips);\n    };\n    /**\n     * 渲染隐私字段\n     * @param {object} style 样式\n     * @returns 隐私字段\n     */\n    _this.renderPrivacyField = function (style, allBorder) {\n      var _option$get;\n      var model = _this.props.model;\n      var option = model.getMetaProperty('item') || (0, _immutable.Map)();\n      var type = option.get('type');\n      var showPrivacyIcon = option.getIn([_serverproperties.PRIVACY, _serverproperties.CAN_SHOW_DETAIL]);\n      var haveSuffixIcon = [_fieldType[\"default\"].LocaleText].includes(type);\n      var updateValue = function updateValue(value) {\n        var dispatch = _this.props.dispatch;\n        (0, _action.mergeState)(_client.UPDATE_CONTROL_VALUE, model.pageId, {\n          key: model.key,\n          value: value\n        }, dispatch);\n        dispatch((0, _appModelFunction.convertAppModelFunctionAction)((0, _appModelFunction.setDataProperty)(model.pageId, model.key, _const.TIME_STAMP_FRESH, (0, _immutable.fromJS)(new Date().getTime()))));\n      };\n      style = _objectSpread({\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        bottom: 0,\n        right: haveSuffixIcon ? 23 : 0,\n        height: '100%',\n        width: \"calc(100% - \".concat(haveSuffixIcon ? 23 : 0, \"px)\"),\n        textAlign: (_option$get = option.get(_serverproperties.TEXT_ALIGN)) !== null && _option$get !== void 0 ? _option$get : 'left',\n        padding: allBorder ? '2px 8px' : ''\n      }, style);\n      // 单头默认传 -1\n      var dispatchGetPlainText = function dispatchGetPlainText() {\n        return _this.props.dispatch((0, _desensiteAction.getPlainText)(model, -1));\n      };\n      return /*#__PURE__*/_react[\"default\"].createElement(_PrivacyText[\"default\"], {\n        model: model,\n        showIcon: showPrivacyIcon,\n        style: style,\n        getPlainText: dispatchGetPlainText,\n        updateValue: updateValue\n      });\n    };\n    var _model = _props.model;\n    _this.state = {\n      // 延迟加载，数据从constructor里取一遍\n      innerValue: _model.getDataValue(),\n      // 控件内部value,失去焦点时才更新store\n      refresh: false,\n      // 改变该属性重新render\n      tipsConfig: null,\n      layoutInfo: {}\n    };\n\n    // 组件是否被卸载标志\n    _this.isUnmount = false;\n\n    // 加密key值\n    _this.encodeKeys = [];\n    var config = _model.getFormConfig();\n    // 获取fileserver配置\n    _this._fileServer = config.fileserver;\n    // 获取多语言配置\n    // this._lang = model.getFormLang()\n    _this.updateTipsConfig = _this.updateTipsConfig.bind(_assertThisInitialized(_this));\n    _this.onEmailSelectItem = _this.onEmailSelectItem.bind(_assertThisInitialized(_this));\n    _this.handleEditBtn = _this.handleEditBtn.bind(_assertThisInitialized(_this));\n    _this.showPicture = _this.showPicture.bind(_assertThisInitialized(_this));\n    _this.getEnable = _this.getEnable.bind(_assertThisInitialized(_this));\n    _this.setItemByNumber = _this.setItemByNumber.bind(_assertThisInitialized(_this));\n    _this.getPlaceHolder = _this.getPlaceHolder.bind(_assertThisInitialized(_this));\n    _this.getLockStyle = _this.getLockStyle.bind(_assertThisInitialized(_this));\n    _this.isNoUnderLineLockStyle = _this.isNoUnderLineLockStyle.bind(_assertThisInitialized(_this));\n    _this.doTextKeyDown = _lodash[\"default\"].debounce(_this.doTextKeyDown.bind(_assertThisInitialized(_this)), 300); // 截流\n    _this.onTextKeyDown = _this.onTextKeyDown.bind(_assertThisInitialized(_this));\n    _this.fieldRef = /*#__PURE__*/_react[\"default\"].createRef();\n    _this.forAutoTestActions = {\n      change: _fieldaction.change,\n      click: _buttonaction.click,\n      setItemByNumber: _fieldaction.setItemByNumber,\n      onViewDetailBtnClick: _fieldaction.onViewDetailBtnClick,\n      clickBaseData: _fieldaction.clickBaseData,\n      queryProvincesAndTitles: admindivisionactions.queryProvincesAndTitles,\n      queryAdminDivisionByParentId: admindivisionactions.queryAdminDivisionByParentId,\n      queryAllCountries: admindivisionactions.queryAllCountries,\n      comfirmDelete: attachmentpanelaction.comfirmDelete,\n      remarkClick: attachmentpanelaction.remarkClick\n    };\n    return _this;\n  }\n  _createClass(KDField, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.isUnmount = false;\n      var model = this.props.model;\n      var type = model.getMetaProperty([_serverproperties.ITEM, _serverproperties.FIELD_TYPE]);\n      var textFormat = model.getMetaProperty([_serverproperties.ITEM, _serverproperties.TEXT_FIELD_FORMAT]);\n      if (type === _fieldType[\"default\"].Text && textFormat) {\n        this.textFormatter = new _textUtil.TextFormatter(textFormat);\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n      var _this$props3 = this.props,\n        model = _this$props3.model,\n        value = _this$props3.value,\n        dispatch = _this$props3.dispatch;\n      var pageId = model.pageId,\n        key = model.key;\n      var option = model.getMetaProperty('item') || (0, _immutable.fromJS)({});\n      var type = option.get('type');\n      var tips = (0, _tooltipsUtil.getTips)(model);\n      if (tips) this.updateTipsConfig(model.pageId, model.key, tips);\n      this.exectueSaveValueToCacheFn = this.saveValueToCache(pageId, key, type);\n      this.exectueSaveValueToCacheFn(model.getDataValue());\n      (0, _memoryCacher.setPageData)(model.pageId, ['FIELD_VISIBLE', model.key], this.props.isVisible);\n      if (this.isRadioGroupExist(option.get('type'), option.get(_serverproperties.GROUP))) {\n        // 事件触发的时候改变了当前按钮的key值，所以这里使用radioKey保存了一下\n        var radioKey = model.key;\n        // 监听当前按钮组\n        this.removeRadioGroupListener = (0, _memoryCacher.addDataChangeListener)(model.pageId, [CHANGE_RADIO_VALUE, option.get(_serverproperties.GROUP)], function (_ref) {\n          var groupValue = _ref.groupValue;\n          dispatch((0, _appModelFunction.convertAppModelFunctionAction)((0, _appModelFunction.setDataProperty)(model.pageId, radioKey, 'value', groupValue)));\n        });\n      }\n      this.removeDirectivesListener = (0, _memoryCacher.subscribeControlMethod)(model.pageId, model.key, 'directives', function (pageData) {\n        if (pageData === undefined) {\n          return;\n        }\n        _this2.invokeControlMethods(pageData);\n      });\n      this.removeValidateListener = (0, _memoryCacher.addDataChangeListener)(pageId, [_const.VALIDATE_FINISH], function (data) {\n        if (!_this2.props.isVisible) {\n          Object.values(_const.VALIDATE_MSG_TYPE).forEach(function (value) {\n            return (0, _memoryCacher.deletePageData)(pageId, [_const.VALIDATE_DATA, key, value]);\n          });\n          (0, _memoryCacher.deletePageData)(pageId, [_const.VALIDATE_DATA, key]);\n          Object.values(_const.VALIDATE_MSG_TYPE).forEach(function (value) {\n            return (0, _memoryCacher.deletePageData)(pageId, [_const.VALIDATE_DATA_CAPTION, key, value]);\n          });\n          (0, _memoryCacher.deletePageData)(pageId, [_const.VALIDATE_DATA_CAPTION, key]);\n          Object.values(_const.VALIDATE_MSG_TYPE).forEach(function (value) {\n            return (0, _memoryCacher.deletePageData)(pageId, [_const.PARENT_COLLAPSE_PANEL_ID, key, value]);\n          });\n          (0, _memoryCacher.deletePageData)(pageId, [_const.PARENT_COLLAPSE_PANEL_ID, key]);\n        }\n      });\n      this.removeTriggerBtnClickShortCutListener = (0, _memoryCacher.addDataChangeListener)(pageId, [_const.TRIGGER_BTN_CLICK_SHORTCUT], this.handleUpdatePostData);\n      this.updateLayoutInfo(this.props);\n\n      // 判断字段是否需要编码加密\n      var isEncodingField = this.getIsEncodingField(type);\n      isEncodingField && this.setEncodingKeys(key);\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      var _this3 = this;\n      if (nextProps.isVisible !== this.props.isVisible) {\n        (0, _memoryCacher.setPageData)(nextProps.model.pageId, ['FIELD_VISIBLE', nextProps.model.key], nextProps.isVisible);\n      }\n      this.updateTips(nextProps);\n      this.updateInnerValue(nextProps);\n      this.setFocus(nextProps);\n      setTimeout(function () {\n        _this3.removeValidateMsg(nextProps);\n      }, 0);\n      this.updateLayoutInfo(nextProps);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      this.removeFieldsTipsMsg(prevProps, prevState);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var _this$removeTriggerBt;\n      // 记录组件是否被卸载\n      this.isUnmount = true;\n      var _this$props$model = this.props.model,\n        pageId = _this$props$model.pageId,\n        key = _this$props$model.key;\n      this.removeDirectivesListener && this.removeDirectivesListener();\n      this.removeValidateListener && this.removeValidateListener();\n      this.removeRadioGroupListener && this.removeRadioGroupListener();\n      (_this$removeTriggerBt = this.removeTriggerBtnClickShortCutListener) === null || _this$removeTriggerBt === void 0 || _this$removeTriggerBt.call(this);\n      (0, _memoryCacher.deletePageData)(pageId, [_const.VALIDATE_DATA, key]);\n      (0, _memoryCacher.deletePageData)(pageId, [_const.VALIDATE_DATA_CAPTION, key]);\n      (0, _memoryCacher.deletePageData)(pageId, [_const.PARENT_COLLAPSE_PANEL_ID, key]);\n    }\n    // =======================================================================\n\n    // =========================== Get Property ==============================\n\n    /**\n     * 获取字段类型\n     * @returns 字段类型\n     */\n  }, {\n    key: \"getFieldType\",\n    value: function getFieldType() {\n      var model = this.props.model;\n      var option = model.getMetaProperty('item') || (0, _immutable.fromJS)({});\n      return option.get('type');\n    }\n  }, {\n    key: \"getEnable\",\n    value:\n    /**\n     * 获取是否可用，综合可见性和锁定性\n     */\n    function getEnable() {\n      var _this$props4 = this.props,\n        model = _this$props4.model,\n        getLocked = _this$props4.getLocked,\n        getVisibleUnion = _this$props4.getVisibleUnion;\n      var locked = getLocked(model);\n      var visiable = getVisibleUnion(model);\n      return locked === false && visiable === true;\n    }\n\n    /**\n     * 从表单根节点获取字段锁定属性\n     */\n  }, {\n    key: \"getLockStyle\",\n    value: function getLockStyle() {\n      var model = this.props.model;\n      var pageId = model.pageId,\n        state = model.state;\n      var formMeta = (0, _appModelFunction.getFormMeta)(pageId)(state);\n      return formMeta.get(_serverproperties.LOCK_STYLE);\n    }\n\n    /**\n     * 是否无下划线锁定风格\n     */\n  }, {\n    key: \"isNoUnderLineLockStyle\",\n    value: function isNoUnderLineLockStyle() {\n      var _this$props5 = this.props,\n        model = _this$props5.model,\n        getLocked = _this$props5.getLocked;\n      var locked = getLocked(model);\n      var lockStyle = this.getLockStyle();\n      return lockStyle === 1 && locked === true;\n    }\n\n    // 获取当前字段'必录'设置\n    // nweModel:新数据对象\n  }, {\n    key: \"getMustInput\",\n    value: function getMustInput(newModel) {\n      // let {model} = this.props\n      // return getComponentDataProperty(model, MUST_INPUT, MUST_INPUT, false)\n\n      // 服务端接口动态修改前端必录性,只修改Meta里的,不管data(这是与服务端后台的约定 -20171122).\n      var model = newModel === undefined ? this.props.model : newModel;\n      return model.getMetaProperty(['item', _serverproperties.MUST_INPUT]);\n    }\n\n    // 是否即时触发\n  }, {\n    key: \"getFireUpdate\",\n    value: function getFireUpdate(model) {\n      return model.getMetaProperty(['item', 'fu']) === true;\n    }\n  }, {\n    key: \"_getLock\",\n    value: function _getLock(model) {\n      return this.props.getLocked(model);\n    }\n\n    /**\n     * @description 判断按钮和按钮组是否存在\n     * @param {*} type 控件类型\n     * @param {*} group 单选按钮组\n     */\n  }, {\n    key: \"isRadioGroupExist\",\n    value: function isRadioGroupExist(type, group) {\n      return type === 'radio' && group;\n    }\n\n    // 获取设计器配置的\"锁定为空提示\"\n  }, {\n    key: \"getLockedEmptyValue\",\n    value: function getLockedEmptyValue(model) {\n      var option = model.getMetaProperty('item') || (0, _immutable.Map)();\n      var valueObj = option.get(_serverproperties.LOCKED_EMPTY_VALUE);\n      return valueObj ? valueObj.get(model.getUserLocale()) : '';\n    }\n  }, {\n    key: \"getPlaceHolder\",\n    value: function getPlaceHolder() {\n      var model = this.props.model;\n      var option = model.getMetaProperty('item') || (0, _immutable.Map)();\n      var placeHolderObj = option.get(_serverproperties.PLACE_HOLDER);\n      var userLocal = model.getUserLocale();\n      // 兼容之前非多语言\n      return _lodash[\"default\"].isObject(placeHolderObj) ? placeHolderObj.get(userLocal) : placeHolderObj;\n    }\n\n    /**\n     * 判断是否需要边框\n     * @return {Boolean} [description]\n     */\n  }, {\n    key: \"isNeedBorder\",\n    value: function isNeedBorder(fieldType, showType) {\n      var model = this.props.model;\n      var option = model.getMetaProperty('item') || (0, _immutable.fromJS)({});\n      var type = option.get('type');\n      var stepperStyle = option.get('stepperstyle') || 0;\n      if (Object.is(type, 'radio') || Object.is(type, _serverproperties.Ctrls.KDRadioOptGroup)) {\n        // 单选按钮不需要边框\n        return false;\n      } else if (Object.is(type, 'checkbox')) {\n        // 多选框不需要边框\n        return false;\n      } else if (Object.is(type, 'stepper') && (stepperStyle === 1 || stepperStyle === 2)) {\n        return false;\n      } else if (fieldType === 'combo' && showType === 1) {\n        return false;\n      } else if (fieldType === _fieldType[\"default\"].CheckBoxGroup) {\n        return false;\n      }\n      return true;\n    }\n  }, {\n    key: \"getIconField\",\n    value: function getIconField(imageZoom, value, style, fieldType, _ref2) {\n      var _this4 = this;\n      var Grow = _ref2.Grow,\n        Shrink = _ref2.Shrink;\n      // value 值为空时 为null\n      value = !value ? [] : value;\n      var _value = value,\n        _value2 = _slicedToArray(_value, 2),\n        ImageKey = _value2[0],\n        bgColor = _value2[1];\n      if (!ImageKey) {\n        ImageKey = _defaultApp[\"default\"];\n      } else {\n        ImageKey = (0, _componentutil.getImgFullPath)(this._fileServer, ImageKey, true);\n      }\n      // else if (!/^http(s)*/.test(ImageKey)) {\n      //   ImageKey = `${this._fileServer + ImageKey}`\n      // }\n      return /*#__PURE__*/_react[\"default\"].createElement(_Icon[\"default\"], {\n        imageZoom: imageZoom,\n        src: ImageKey,\n        bgColor: bgColor,\n        Grow: Grow,\n        Shrink: Shrink,\n        style: style,\n        onClick: function onClick(e) {\n          e.stopPropagation();\n          _this4.props.dispatch((0, _buttonaction.click)(_this4.props.model));\n        },\n        fieldType: fieldType\n      });\n    }\n  }, {\n    key: \"onEmailSelectItem\",\n    value: function onEmailSelectItem(value) {\n      var model = this.props.model;\n      _fieldaction.change && this.props.dispatch((0, _fieldaction.change)(model, value));\n      (0, _ValidationService.doRealTimeValidate)({\n        value: value,\n        model: model\n      });\n    }\n  }, {\n    key: \"setItemByNumber\",\n    value: function setItemByNumber(newValue) {\n      var _this5 = this;\n      var _this$props6 = this.props,\n        model = _this$props6.model,\n        getLocked = _this$props6.getLocked;\n      var pageId = model.pageId,\n        key = model.key;\n      if (getLocked(model) !== true) {\n        // const caption = model.getMetaLocaleProperty('caption')\n        var promise = (0, _waitGetLookUpListUtil[\"default\"])(pageId, key);\n        promise.then(function () {\n          _this5.props.dispatch((0, _fieldaction.setItemByNumber)(model, newValue));\n        });\n        var fieldType = this.getFieldType();\n        this.exectueSaveValueToCacheFn(newValue);\n\n        // 基础资料 必录时，将为空提示写入缓存\n        // if (this.getMustInput() && this.getEnable() && !newValue) {\n        //   // 这里要设置innerValue 是因为用来校验的值是state.innerValue, 但是基础资料的innerValue 拿的是返回的dataValue，\n        //   // 所以当删掉值然后直接点击保存的时候，做校验的时候拿到的还是旧的值，所以这里应该设置一下innerValue\n        //   this.setState({ innerValue: newValue }, () => {\n        //     setFieldValidateMsg(pageId, key)\n        //     setFieldValidateCaption(pageId, key, VALIDATE_MSG_TYPE.notNull, caption)\n        //     setParentCollapsePanelId(pageId, key)\n        //   })\n        // }\n      }\n    }\n  }, {\n    key: \"handleOnBlur\",\n    value:\n    // end edit\n    function handleOnBlur(args) {\n      var _this6 = this;\n      this.sendFocusEvent2Server(false);\n      var _this$props7 = this.props,\n        model = _this$props7.model,\n        dispatch = _this$props7.dispatch;\n      var pageId = model.pageId,\n        key = model.key;\n      var option = model.getMetaProperty('item') || (0, _immutable.fromJS)({});\n      var type = option.get('type');\n      var innerValue = this.state.innerValue;\n      if (type === _fieldType[\"default\"].RichText) {\n        innerValue = args === null || args === void 0 ? void 0 : args.value;\n      }\n      var value = this.formatAndEncodeValue(innerValue);\n      // 失焦时强行校验一次，避免失焦态如果值符合要求，但是错误提示还在\n      (0, _ValidationService.doRealTimeValidate)({\n        value: value,\n        model: model\n      });\n      var doFunc = function doFunc() {\n        var isPasswordbox = type === _fieldType[\"default\"].Password;\n        var isFireUpdate = model.getMetaProperty(['item', 'fu']) && !(0, _utils.isNumberOutOfRange)(pageId, key);\n        _this6.props.dispatch((0, _fieldaction.change)(model, value, isPasswordbox, isFireUpdate)); // just update store, not change value.\n      };\n      if (value !== undefined && value !== model.getDataValue()) {\n        if (this.getFireUpdate(this.props.model)) {\n          // 如果延时才设置postData和dataValue 会导致失去焦点直接点保存的时候先触发click 再进行updateValue,导致拿到的值不是新的，产生bug，这里先把postData存起来，就可以跟着下一个事件出去，保证数据准确性\n          var kv = {\n            key: key,\n            value: value\n          };\n          (0, _action.mergeState)(_sysActionName.UPDATE_FIELD_VIEW, pageId, kv, dispatch);\n          (0, _waitUpdateValueUtil.addUpdateValue)(pageId, key);\n          setTimeout(function () {\n            doFunc();\n            (0, _waitUpdateValueUtil.removeUpdateValue)(pageId);\n          }, 0);\n        } else {\n          doFunc();\n        }\n      }\n    }\n  }, {\n    key: \"handleEditBtn\",\n    value: function handleEditBtn() {\n      var model = this.props.model;\n      var lock = this._getLock(model);\n      if (lock) return;\n      this.props.dispatch((0, _buttonaction.click)(this.props.model));\n    }\n  }, {\n    key: \"handleEnter\",\n    value:\n    // 多行文本编辑：回车\n    function handleEnter() {\n      // 先不发，待确认服务端是否需要这个消息 2017-02-14\n      // let {model} = this.props;\n      // let args = [];\n      // args.push(model.key);\n      // args.push('EnterKeyPressed');\n      // args.push({value:value});\n      // this.props.customEvents(this.props.model,args);\n    }\n  }, {\n    key: \"onTextKeyDown\",\n    value: function onTextKeyDown(e) {\n      if (e.keyCode === 13) {\n        // enter\n        /*\n          不能在截流函数里直接访问'e.keyCode/e.target',否则会有performance警告\n          针对'扫码枪'需求,响应键盘enter键, 逻辑与onBlur一致(即时触发)\n          扫描枪扫描,每一个字符都会触发onChange，扫描完成会触发enter和向下箭头键\n        */\n        this.doTextKeyDown();\n      }\n    }\n  }, {\n    key: \"doTextKeyDown\",\n    value: function doTextKeyDown(e) {\n      this.handleOnBlur();\n    }\n  }, {\n    key: \"updateTipsConfig\",\n    value: function updateTipsConfig(pageId, id, tips) {\n      if (!tips) {\n        // 可以通过u指令设置tips为空\n        this.setState({\n          tipsConfig: null\n        });\n        return;\n      }\n      var tipsConfig = this.state.tipsConfig;\n      if (!tipsConfig) {\n        tipsConfig = (0, _tooltipsUtil.createTipsConfig)(pageId, id);\n        this.setState({\n          tipsConfig: tipsConfig\n        });\n      }\n      (0, _tooltipsUtil.saveTipsInfo)(tipsConfig, tips);\n    }\n\n    // =======================================================================\n    // ============================== Render ==============================\n  }, {\n    key: \"renderField\",\n    value: function renderField(allBorder, option) {\n      var _option$get2,\n        _this7 = this;\n      var model = this.props.model;\n      // const option = model.getMetaProperty('item') || Map()\n      var showTitle = model.meta.get(_serverproperties.SHOW_TITLE) !== false;\n      var value = this.state.innerValue === undefined ? model.getDataValue() : this.state.innerValue;\n      // 获取是否有设置高度，有就为输入区textArea设置maxHeight\n      var style = (0, _componentutil.getCommonStyle)(model);\n      var maxHeight = style.height;\n      if (this.isRadioGroupExist(option.get('type'), option.get(_serverproperties.GROUP))) {\n        value = (0, _appModelFunction.getDataValue)(model.pageId, option.get(_serverproperties.GROUP))(model.state);\n      }\n      if (this.state.innerValue === model.getDataValue() && this.textFormatter) {\n        value = this.textFormatter.setFormatValue(value);\n      }\n      var editable = option && option.get(_serverproperties.EDITABLE); // 输入框是否允许编辑\n      var showEditButton = option && option.get(_serverproperties.SHOW_EDIT_BTN); // 是否显示编辑按钮\n      var editingMode = option && option.get(_serverproperties.EDITING_MODE); // 大文本字段编辑模式，默认为摘要模式\n      var showClearBtn = (_option$get2 = option === null || option === void 0 ? void 0 : option.get(_serverproperties.SHOW_CLEAR_BTN)) !== null && _option$get2 !== void 0 ? _option$get2 : true; // 是否显示清除按钮\n\n      var lock = this._getLock(model);\n      var lockedEmptyValue = this.getLockedEmptyValue(model);\n      var maxLength = option && option.get(_serverproperties.MAX_LENGTH);\n      var disabled = editable === false || lock;\n      var isPrivacyField = option.getIn([_serverproperties.PRIVACY, _serverproperties.IS_PRIVACY]) && (0, _memoryCacher.getPageData)(model.pageId, [model.key, _serverproperties.IS_PRIVACY]) !== 1;\n      var shortcutInfo = !isPrivacyField && !(disabled || lock) && model.pageId;\n      var shortCutProps = {};\n      var skipShortCutFocus = (0, _componentutil.getComponentDataProperty)(model, _serverproperties.SKIP_SHORT_CUT_FOCUS, _serverproperties.SKIP_SHORT_CUT_FOCUS, false);\n      if (shortcutInfo && !skipShortCutFocus) {\n        shortCutProps[DATA_SHORTCUT] = shortcutInfo;\n      }\n      var showEye = (option === null || option === void 0 ? void 0 : option.get(_serverproperties.SHOW_EYE)) && editable !== false && !disabled; // 是否展示小眼睛\n\n      var inputProps = _objectSpread({\n        // 字段为空提示属性修改为多语言\n        placeholder: this.getPlaceHolder(),\n        maxLength: maxLength <= 0 ? '' : this.textFormatter ? this.textFormatter.getMaxLength(maxLength) : maxLength,\n        onChange: this.handleInputChange,\n        onBlur: function (e) {\n          this.handleOnBlur(e.target.value);\n        }.bind(this),\n        value: value == null ? '' : value,\n        disabled: disabled || isPrivacyField,\n        // lock control 隐私字段不允许编辑\n        theme: option && option.get(_serverproperties.LABEL_DIRECTION, 'v') === 'v' ? 'default' : 'flat',\n        showTitle: showTitle,\n        isNoUnderLineLockStyle: this.isNoUnderLineLockStyle(),\n        tabIndex: disabled ? -1 : option && option.get(_serverproperties.TAB_INDEX, 0)\n      }, shortCutProps);\n      if (disabled) {\n        inputProps.tabIndex = '-1';\n      }\n      var type = option && option.get('type');\n      var contentFontSize = (0, _defaultPropsUtil.getFieldDefaultProps)(type, _customProperties[\"default\"].CONTENT_FONT_SIZE);\n      var inputStyle = {\n        fontSize: option && option.get(_serverproperties.FONT_SIZE) || style && style.fontSize || contentFontSize,\n        color: (0, _componentutil.fixColor)(option && option.get(_serverproperties.COLOR)) || style && style.color,\n        backgroundColor: (0, _componentutil.fixColor)(option && option.get(_serverproperties.BACKGROUND_COLOR)) || style && style.backgroundColor,\n        textAlign: option && option.get(_serverproperties.TEXT_ALIGN)\n      };\n      if (option && option.get(_serverproperties.FONT_WEIGHT) || style && style.fontWeight) {\n        inputStyle.fontWeight = option && option.get(_serverproperties.FONT_WEIGHT) || style && style.fontWeight;\n      }\n\n      // 字段显示格式： name(名称)、number(编码)、(number,name(编码+名称))\n      var displayType = option && option.get(_serverproperties.DISPLAY_PROP);\n      var Element;\n      var Field = _index[\"default\"][type];\n      var labelStyle = {};\n      switch (type) {\n        case _fieldType[\"default\"].Number:\n          {\n            // 数字 包括 小数、整数、长整数、金额、单价、数量\n            inputProps.onChange = function (e) {\n              // 当发送到后台为空字符串时后台会报错，所以这里将非数字转换成null发送\n              var val = e.target.value;\n              // 修复加载完成后 第一次输入‘负号’ 不显示的问题\n              val = isNaN(parseFloat(val)) && val !== '-' ? null : val;\n              if (val && val.includes('%')) {\n                val = Number(val.replace('%', '')) * 0.01;\n              }\n              _this7.handleChange(val);\n            };\n            inputProps.onBlur = function (e) {\n              var newValue = e.target.value;\n              _this7.setState({\n                innerValue: newValue\n              }, function () {\n                _this7.handleOnBlur();\n              });\n            };\n            var shouldGetFormattedValueOnBlur = (0, _fieldUtils.isFlexField)(model);\n            inputProps.df = option && option.get(_serverproperties.DISPLAY_FORMAT);\n            Element = /*#__PURE__*/_react[\"default\"].createElement(Field, _extends({\n              allBorder: allBorder,\n              lockedEmptyValue: lockedEmptyValue,\n              model: model,\n              option: option,\n              style: inputStyle\n            }, inputProps, {\n              lock: lock,\n              shouldGetFormattedValueOnBlur: shouldGetFormattedValueOnBlur\n            }));\n            break;\n          }\n        case _fieldType[\"default\"].NameSegText:\n        case _fieldType[\"default\"].I18nNameField:\n        case _fieldType[\"default\"].Text:\n          {\n            // 文本\n            var isLink = model.getMetaProperty('ln');\n            Element = /*#__PURE__*/_react[\"default\"].createElement(_BaseComponents.Text, _extends({\n              noValue: lockedEmptyValue || (0, _componentutil.getNOValue)(),\n              type: type,\n              style: inputStyle,\n              onKeyDown: function onKeyDown(e) {\n                return _this7.onTextKeyDown(e);\n              },\n              editable: editable,\n              lock: lock,\n              showEditButton: showEditButton,\n              showClear: showClearBtn,\n              handleTextChange: function handleTextChange(e) {\n                return _this7.handleTextChange(e.target.value);\n              }\n            }, inputProps, {\n              onFocus: this.handleFocus,\n              isLink: isLink,\n              onValueClick: this.handleValueClick\n            }));\n            break;\n          }\n        case _fieldType[\"default\"].Email:\n          // 邮箱\n          inputProps.onChange = function (value) {\n            return _this7.handleChange(value);\n          };\n          Element = /*#__PURE__*/_react[\"default\"].createElement(Field, _extends({\n            model: model,\n            style: inputStyle\n          }, inputProps, {\n            onBlur: this.handleOnBlur.bind(this),\n            handleEmailSelectItem: this.onEmailSelectItem,\n            shortcutInfo: shortCutProps,\n            lock: lock\n          }));\n          break;\n        case _fieldType[\"default\"].Flex:\n          // 控件不支持全键盘 暂时删除tabIndex\n          delete inputProps.tabIndex;\n          delete inputProps[DATA_SHORTCUT];\n          Element = /*#__PURE__*/_react[\"default\"].createElement(Field, _extends({\n            model: model,\n            onClick: function onClick() {\n              return _this7.props.dispatch((0, _buttonaction.click)(model, []));\n            },\n            style: inputStyle,\n            dispatch: this.props.dispatch\n          }, inputProps, {\n            shortcutInfo: shortCutProps\n          }));\n          break;\n        case _fieldType[\"default\"].Password:\n          // 文本 内容显示为密码\n          {\n            var isView = (0, _componentutil.isViewModel)(this.props.formStatus);\n            inputProps.autoComplete = 'new-password';\n            Element = /*#__PURE__*/_react[\"default\"].createElement(_BaseComponents.Text, _extends({\n              type: \"password\",\n              showEye: showEye,\n              showEditButton: showEditButton,\n              style: inputStyle\n            }, inputProps, {\n              shortcutInfo: shortCutProps,\n              showEyeInEmpty: !isView\n            }));\n            break;\n          }\n        case _fieldType[\"default\"].Textarea:\n          // 多行文本\n          Element = /*#__PURE__*/_react[\"default\"].createElement(Field, _extends({\n            model: model,\n            option: option,\n            style: inputStyle,\n            lock: lock,\n            textareaHeight: this.state.textareaHeight,\n            updateHeight: function updateHeight(clientHeight) {\n              return _this7.setState({\n                textareaHeight: clientHeight\n              });\n            },\n            lockedEmptyValue: lockedEmptyValue\n          }, inputProps, {\n            onFocus: this.handleFocus\n          }));\n          break;\n        case _fieldType[\"default\"].Date: // 日期\n        case _fieldType[\"default\"].Datetime:\n          // 长日期\n          inputProps.onChange = function (dateValue) {\n            return _this7.handleChange(dateValue);\n          };\n          inputProps.getDateFilter = function () {\n            return _this7.props.dispatch(_datePickerAction.getDateFilter.apply(void 0, arguments));\n          };\n          inputProps.mustInput = this.getMustInput();\n          Element = /*#__PURE__*/_react[\"default\"].createElement(Field, _extends({\n            model: model,\n            option: option,\n            type: type,\n            style: inputStyle\n          }, inputProps, {\n            Grow: 1,\n            lock: lock\n          }));\n          break;\n        case _fieldType[\"default\"].DateRange:\n          // 日期范围\n          inputProps.onChange = function (dateValue) {\n            return _this7.handleChange(dateValue);\n          };\n          inputProps.mustInput = this.getMustInput();\n          Element = /*#__PURE__*/_react[\"default\"].createElement(Field, _extends({\n            model: model,\n            option: option,\n            type: type,\n            style: inputStyle\n          }, inputProps, {\n            lock: lock\n          }));\n          break;\n        case _fieldType[\"default\"].Checkbox:\n          {\n            delete inputProps[DATA_SHORTCUT];\n            var onChange = inputProps.onChange,\n              onBlur = inputProps.onBlur,\n              tabIndex = inputProps.tabIndex,\n              others = _objectWithoutProperties(inputProps, _excluded);\n            var isFireUpdate = this.getFireUpdate(this.props.model);\n            Element = /*#__PURE__*/_react[\"default\"].createElement(Field, _extends({\n              tabIndex: tabIndex,\n              model: model,\n              option: option,\n              style: inputStyle\n            }, others, {\n              fieldWidth: style && style.width,\n              onMouseDown: isFireUpdate ? null : function () {\n                return _this7.handleChangeOfChk(inputProps.disabled, inputProps.value);\n              },\n              onClick: isFireUpdate ? function () {\n                return _this7.handleChangeOfChk(inputProps.disabled, inputProps.value);\n              } : null,\n              shortcutInfo: shortCutProps\n            }));\n            break;\n          }\n        case _fieldType[\"default\"].RadioGroup:\n          // 控件不支持全键盘 暂时删除tabIndex\n          delete inputProps.tabIndex;\n          return null;\n        case _fieldType[\"default\"].Radio:\n          Element = /*#__PURE__*/_react[\"default\"].createElement(Field, _extends({\n            model: model,\n            option: option,\n            fieldWidth: style && style.width,\n            isGroupLocked: this.props.getLocked(model, option && option.get(_serverproperties.GROUP)),\n            style: inputStyle\n          }, inputProps));\n          break;\n        case _fieldType[\"default\"].Combo:\n        case _fieldType[\"default\"].NameSegCombo:\n          inputStyle.height = (0, _defaultPropsUtil.getCommonDefaultProps)(_customProperties[\"default\"].FIELD_PANEL_ITEM_INPUT_HEIGHT_FOR_BORDER, true) ? (0, _defaultPropsUtil.getCommonDefaultProps)(_customProperties[\"default\"].FIELD_PANEL_ITEM_INPUT_HEIGHT_FOR_BORDER, true) - 2\n          // : 21\n          : '100%';\n          inputStyle.lineHeight = \"\".concat(inputStyle.height, \"px\");\n          Element = /*#__PURE__*/_react[\"default\"].createElement(Field, _extends({\n            model: model,\n            option: option,\n            style: inputStyle,\n            mustInput: this.getMustInput() || inputProps.disabled,\n            multiple: Object.is(type, 'mulcombo'),\n            fileServer: this._fileServer\n          }, inputProps, {\n            Grow: 1,\n            onChange: function onChange(value) {\n              return _this7.handleChange(value);\n            },\n            tiggerParent: true,\n            lock: lock,\n            allBorder: allBorder,\n            dispatch: this.props.dispatch\n          }));\n          break;\n        case _fieldType[\"default\"].MulCombo:\n          Element = /*#__PURE__*/_react[\"default\"].createElement(Field, _extends({\n            model: model,\n            option: option,\n            style: inputStyle,\n            mustInput: this.getMustInput() || inputProps.disabled,\n            multiple: Object.is(type, 'mulcombo'),\n            fileServer: this._fileServer,\n            allBorder: allBorder\n          }, inputProps, {\n            Grow: 1,\n            onChange: function onChange(value) {\n              return _this7.handleChange(value);\n            },\n            tiggerParent: true\n          }));\n          break;\n        case _fieldType[\"default\"].Cascader:\n          // 控件不支持全键盘 暂时删除tabIndex\n          delete inputProps.tabIndex;\n          Element = /*#__PURE__*/_react[\"default\"].createElement(Field, _extends({\n            model: model,\n            option: option,\n            style: inputStyle,\n            mustInput: this.getMustInput() || inputProps.disabled\n          }, inputProps, {\n            Grow: 1,\n            onChange: function onChange(value) {\n              return _this7.handleChange(value);\n            },\n            value: inputProps.value,\n            placeholder: inputProps.placeholder,\n            disabled: inputProps.disabled\n          }));\n          break;\n        case _fieldType[\"default\"].User:\n        case _fieldType[\"default\"].Basedata:\n        case _fieldType[\"default\"].MulBasedata:\n        case _fieldType[\"default\"].Organization:\n        case _fieldType[\"default\"].NameSegBasedata:\n          // 基础资料无选项模式\n          var isNoOption = (0, _componentutil.getComponentDataProperty)(model, _serverproperties.IS_NO_OPTION_MODE, _serverproperties.IS_NO_OPTION_MODE, false);\n          Element = /*#__PURE__*/_react[\"default\"].createElement(Field, {\n            model: model,\n            dispatch: this.props.dispatch,\n            option: option,\n            type: type,\n            onChange: function onChange() {\n              return null;\n            } /* 这里的onChange只给grid内部的f7使用,KDField不处理 */,\n            Grow: 1,\n            disabled: inputProps.disabled,\n            placeholder: inputProps.placeholder,\n            inputStyle: inputStyle,\n            theme: inputProps.theme,\n            tabIndex: inputProps.tabIndex,\n            setItemByNumber: this.setItemByNumber,\n            mustInput: this.getMustInput(),\n            enable: this.getEnable(),\n            isNoUnderLineLockStyle: inputProps.isNoUnderLineLockStyle,\n            shortcutInfo: shortCutProps,\n            isNoOption: isNoOption,\n            lock: lock\n          });\n          break;\n        case _fieldType[\"default\"].LocaleText:\n          {\n            // 多语言文本\n            // let langList = option.get('langList') // 多语言列表\n            var multiLine = option && option.get('multiLine'); // 是否多行显示\n            if (maxHeight) {\n              inputStyle.maxHeight = maxHeight;\n            }\n            var _this$getLangSetting = this.getLangSetting(model, inputProps.value),\n              lang = _this$getLangSetting.lang,\n              langList = _this$getLangSetting.langList,\n              defaultLang = _this$getLangSetting.defaultLang;\n            var langIconStyle = {\n              bottom: 4\n            };\n            if (this.state.layoutInfo.labelDirection === 'h' && allBorder) {\n              var inputHeight = (0, _defaultPropsUtil.getCommonDefaultProps)(_customProperties[\"default\"].FIELD_PANEL_ITEM_INPUT_HEIGHT_FOR_BORDER, true) ? (0, _defaultPropsUtil.getCommonDefaultProps)(_customProperties[\"default\"].FIELD_PANEL_ITEM_INPUT_HEIGHT_FOR_BORDER, true) : 32;\n              langIconStyle.bottom = (inputHeight - 16) / 2;\n            }\n            // const langIconStyle = option?.get(LABEL_DIRECTION) === 'h' && allBorder ? { bottom: 8 } : {}\n            Element = /*#__PURE__*/_react[\"default\"].createElement(_MulLangText[\"default\"], {\n              style: style,\n              inputStyle: inputStyle,\n              maxLength: inputProps.maxLength,\n              value: inputProps.value,\n              placeholder: inputProps.placeholder,\n              langList: langList,\n              Grow: 1,\n              onChange: function onChange(value) {\n                return _this7.handleChange(value);\n              },\n              onBlur: function onBlur(e) {\n                return _this7.handleOnBlur(e);\n              },\n              disabled: inputProps.disabled,\n              theme: inputProps.theme,\n              multiLine: multiLine,\n              defaultLang: defaultLang,\n              lang: lang,\n              isNoUnderLineLockStyle: inputProps.isNoUnderLineLockStyle,\n              tabIndex: inputProps.tabIndex,\n              ref: function ref(r) {\n                _this7.mulLangText = r;\n              },\n              lockedEmptyValue: lockedEmptyValue,\n              onFocus: this.handleFocus,\n              lock: lock,\n              allBorder: allBorder,\n              shortcutInfo: shortCutProps,\n              isPrivacy: isPrivacyField,\n              langIconStyle: langIconStyle,\n              pageId: model === null || model === void 0 ? void 0 : model.pageId\n            });\n            break;\n          }\n        case _fieldType[\"default\"].LargeText:\n          // 大文本\n          Element = /*#__PURE__*/_react[\"default\"].createElement(_LargeTextCtl[\"default\"], {\n            isLimitHeight: !!style.height && style.height !== 0,\n            inputStyle: inputStyle,\n            maxLength: inputProps.maxLength,\n            value: inputProps.value,\n            theme: inputProps.theme,\n            placeholder: inputProps.placeholder,\n            Grow: 1,\n            isNoUnderLineLockStyle: inputProps.isNoUnderLineLockStyle,\n            editingMode: editingMode,\n            onChange: function onChange(e) {\n              return _this7.handleChange(e.target.value);\n            },\n            disabled: inputProps.disabled,\n            onBlur: function onBlur(e) {\n              return _this7.handleOnBlur(e);\n            },\n            onHandleBtnClick: function onHandleBtnClick(e, lock) {\n              return _this7.handleLargeTextEditBtn(lock);\n            },\n            onHandleEnter: function onHandleEnter(e) {\n              return _this7.handleEnter(e);\n            },\n            tabIndex: inputProps.tabIndex,\n            lockedEmptyValue: lockedEmptyValue,\n            iconClass: \"\".concat(option && option.get('fontClass') || 'kdfont kdfont-zidingyi', \" \").concat(allBorder ? _KDField2[\"default\"].r6 : ''),\n            shortcutInfo: shortCutProps,\n            lock: lock\n          });\n          break;\n        case _fieldType[\"default\"].Picture:\n          // 控件不支持全键盘 暂时删除tabIndex\n          delete inputProps.tabIndex;\n          delete inputProps[DATA_SHORTCUT];\n          break;\n        case _fieldType[\"default\"].CascadeMenu:\n          // 行政区划\n          Element = /*#__PURE__*/_react[\"default\"].createElement(_KDAdminDivision[\"default\"], _extends({\n            value: inputProps.value,\n            handleChange: function handleChange(value) {\n              return _this7.handleChange(value);\n            },\n            shouldRespondADMethod: _componentutil.shouldRespondADMethod,\n            style: inputStyle,\n            placeholder: inputProps.placeholder,\n            disabled: inputProps.disabled,\n            theme: inputProps.theme,\n            isNoUnderLineLockStyle: inputProps.isNoUnderLineLockStyle\n          }, this.props, {\n            tabIndex: inputProps.tabIndex\n          }, (0, _componentutil.createActions)(admindivisionactions, this.props.dispatch), {\n            lock: lock\n          }));\n          break;\n        case _fieldType[\"default\"].City:\n          // 城市\n          Element = /*#__PURE__*/_react[\"default\"].createElement(_KDCity[\"default\"], _extends({\n            value: inputProps.value,\n            style: inputStyle,\n            disabled: inputProps.disabled,\n            handleChange: function handleChange(value) {\n              return _this7.handleChange(value);\n            },\n            displayType: displayType,\n            placeholder: inputProps.placeholder,\n            theme: inputProps.theme,\n            isNoUnderLineLockStyle: inputProps.isNoUnderLineLockStyle\n          }, this.props, {\n            tabIndex: inputProps.tabIndex,\n            shortcutInfo: shortCutProps\n          }, (0, _componentutil.createActions)(cityactions, this.props.dispatch), {\n            lock: lock\n          }));\n          break;\n        case _fieldType[\"default\"].Attachment:\n          // 控件不支持全键盘 暂时删除tabIndex\n          delete inputProps.tabIndex;\n          delete inputProps[DATA_SHORTCUT];\n          inputProps.onChange = function (value, type) {\n            return _this7.handleChange(value, false, ['remove'].includes(type));\n          };\n          labelStyle.fontSize = (0, _defaultPropsUtil.getFieldDefaultProps)(type, _customProperties[\"default\"].TITLE_FONT_SIZE);\n          Element = /*#__PURE__*/_react[\"default\"].createElement(Field, _extends({\n            model: model,\n            option: option,\n            type: type,\n            dispatch: this.props.dispatch,\n            disabled: inputProps.disabled,\n            labelStyle: labelStyle\n          }, inputProps, this.props, (0, _componentutil.createActions)(attachmentpanelaction, this.props.dispatch)));\n          break;\n        case _fieldType[\"default\"].Telephone:\n          // 手机号\n          Element = /*#__PURE__*/_react[\"default\"].createElement(_TelephoneField[\"default\"], _extends({\n            isValidate: option && option.get('vlr'),\n            lock: lock,\n            model: model,\n            style: inputStyle,\n            getTelViaList: function getTelViaList() {\n              return _this7.props.dispatch(_fieldaction.getTelViaList.apply(void 0, arguments));\n            }\n          }, inputProps, {\n            onChange: function onChange(value) {\n              return _this7.handleChange(value);\n            },\n            onBlur: this.handleOnBlur.bind(this),\n            shortcutInfo: shortCutProps\n          }));\n          break;\n        case _fieldType[\"default\"].Time:\n          // 时间\n          inputProps.onChange = function (newValue) {\n            return _this7.handleChange(newValue);\n          };\n          inputProps.mustInput = this.getMustInput();\n          Element = /*#__PURE__*/_react[\"default\"].createElement(Field, _extends({\n            model: model,\n            mask: option && option.get(_serverproperties.MASK),\n            inputStyle: inputStyle\n          }, inputProps, {\n            Grow: 1,\n            lock: lock\n          }));\n          break;\n        case _fieldType[\"default\"].TimeRange:\n          // 时间范围\n          inputProps.onChange = function (newValue) {\n            return _this7.handleChange(newValue);\n          };\n          inputProps.mustInput = this.getMustInput();\n          Element = /*#__PURE__*/_react[\"default\"].createElement(Field, _extends({\n            model: model,\n            mask: option && option.get(_serverproperties.MASK),\n            inputStyle: inputStyle\n          }, inputProps, {\n            Grow: 1,\n            lock: lock\n          }));\n          break;\n        case _fieldType[\"default\"].Stepper:\n          // 步进器字段\n          inputProps.onChange = function (e) {\n            // 当发送到后台为空字符串时后台会报错，所以这里将非数字转换成null发送\n            var val = e.target.value;\n            // 修复加载完成后 第一次输入‘负号’ 不显示的问题\n            val = isNaN(parseFloat(val)) && val !== '-' ? null : val;\n            if (val && val.includes('%')) {\n              val = Number(val.replace('%', '')) * 0.01;\n            }\n            _this7.handleChange(val);\n          };\n          inputProps.onBlur = function (e) {\n            var newValue = e.target.value;\n            _this7.setState({\n              innerValue: newValue\n            }, function () {\n              _this7.handleOnBlur();\n            });\n          };\n          inputProps.handelOperatorClick = function (val, isStepperOperatorClick) {\n            _this7.handleChange(val, isStepperOperatorClick);\n          };\n          inputProps.df = option && option.get(_serverproperties.DISPLAY_FORMAT);\n          Element = /*#__PURE__*/_react[\"default\"].createElement(Field, _extends({\n            model: model,\n            option: option,\n            style: inputStyle,\n            fieldStyle: {\n              width: style.width,\n              height: style.height\n            }\n          }, inputProps));\n          break;\n        case _fieldType[\"default\"].Address:\n          if (style.height) {\n            var gap = showTitle ? _const.FIELD_GAP_WITH_TITLE : _const.FIELD_GAP_WITHOUT_TITLE;\n            inputStyle.maxHeight = parseFloat(style.height) - gap;\n          }\n          delete inputProps.tabIndex;\n          delete inputProps[DATA_SHORTCUT];\n          // KUI 在计算的过程中会添加上 overflow-y: hidden\n          inputStyle.overflowY = 'auto';\n          Element = /*#__PURE__*/_react[\"default\"].createElement(Field, {\n            model: model,\n            lock: lock,\n            showAddressModal: function showAddressModal() {\n              return _this7.props.dispatch(_fieldaction.showAddressModal.apply(void 0, arguments));\n            },\n            inputProps: inputProps,\n            inputStyle: inputStyle,\n            disabled: disabled,\n            containerStyle: style,\n            option: option,\n            getAddressSearchList: function getAddressSearchList() {\n              return _this7.props.dispatch(_addressAction.getAddressSearchList.apply(void 0, arguments));\n            },\n            changeAddressVal: function changeAddressVal() {\n              return _this7.props.dispatch(_addressAction.changeAddressVal.apply(void 0, arguments));\n            },\n            setItemByNumber: this.setAdressItemByNumber\n          });\n          break;\n        case _fieldType[\"default\"].Signature:\n          // 控件不支持全键盘 暂时删除tabIndex\n          delete inputProps.tabIndex;\n          delete inputProps[DATA_SHORTCUT];\n          break;\n        case _fieldType[\"default\"].RichText:\n          // 控件不支持全键盘 暂时删除tabIndex\n          delete inputProps.tabIndex;\n          delete inputProps[DATA_SHORTCUT];\n          break;\n        case _fieldType[\"default\"].CheckBoxGroup:\n          {\n            delete inputProps[DATA_SHORTCUT];\n            var _isView = (0, _componentutil.isViewModel)(this.props.formStatus); // 查看态\n            Element = /*#__PURE__*/_react[\"default\"].createElement(Field, _extends({\n              model: model,\n              option: option,\n              style: inputStyle\n            }, inputProps, {\n              allBorder: false,\n              onChange: function onChange(value) {\n                return _this7.handleChange(value);\n              },\n              isView: _isView,\n              shortcutInfo: shortCutProps\n            }));\n          }\n          break;\n        case _fieldType[\"default\"].RadioOptGroup:\n          {\n            var _this$props8;\n            // 单选字段\n            var _isView2 = (0, _componentutil.isViewModel)((_this$props8 = this.props) === null || _this$props8 === void 0 ? void 0 : _this$props8.formStatus); // 是否是查看态\n            Element = /*#__PURE__*/_react[\"default\"].createElement(Field, _extends({\n              model: model,\n              option: option,\n              style: inputStyle,\n              mustInput: this.getMustInput(),\n              multiple: Object.is(type, 'mulcombo'),\n              lock: lock,\n              isView: _isView2\n            }, inputProps, {\n              onChange: this.handleChange,\n              allBorder: false\n            }));\n            break;\n          }\n        default:\n          // 控件不支持全键盘 暂时删除tabIndex\n          delete inputProps.tabIndex;\n          Element = /*#__PURE__*/_react[\"default\"].createElement(_BaseComponents.Text, _extends({\n            noValue: (0, _componentutil.getNOValue)(),\n            style: inputStyle,\n            type: \"text\"\n          }, inputProps));\n      }\n      // if (editable === false) {\n      // TODO:编辑风格是文本加按钮时，锁定功能已处理\n      // editable 这个是是否可编辑？\n      // if (editable !== undefined) {\n      // 设置为按钮+文本模式： item: {showEditButton: true, editable: true}  ； 设置为文本模式： item: {showEditButton: false, editable: true} ;  设置为按钮模式： item: {showEditButton: true, editable: false}\n      // 不通过判断editable的值，直接通过判断showEditButton来判断是否显示按钮\n      if (showEditButton === true) {\n        var children = [];\n        // 支持设计时配置图标\n        var fontClass = option && option.get('fontClass') || 'kdfont kdfont-zidingyi';\n        // 文本字段适配 皮肤样式\n        var editBtnClassName = (0, _classnames3[\"default\"])(_defineProperty(_defineProperty(_defineProperty({}, _KDField2[\"default\"]['edit-btn-' + inputProps.theme], true), _KDField2[\"default\"].editBtnDisabled, lock), _KDField2[\"default\"].allBorder, allBorder), fontClass);\n        var isText = Object.is(type, 'text') || Object.is(type, 'passwordbox');\n        var handleClick = _lodash[\"default\"].debounce(this.handleEditBtn, 800);\n        var editableBtn = /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n          className: editBtnClassName,\n          onClick: handleClick,\n          key: \"edit-btn\"\n        });\n        children = children.concat(editableBtn, /*#__PURE__*/_react[\"default\"].cloneElement(Element, {\n          key: 'input',\n          className: isText && !lock ? _KDField2[\"default\"]['edit-btn-margin'] : null\n        })); // 锁定下不展示编辑按钮\n        return children;\n      }\n      return Element;\n    }\n\n    /**\n     * 渲染下拉框\n     */\n  }, {\n    key: \"renderSelect\",\n    value: function renderSelect(inputProps) {\n      var _this8 = this;\n      var model = this.props.model;\n      var mustInput = this.getMustInput();\n      var items = (0, _componentutil.getComponentDataProperty)(model, _serverproperties.STORE, ['item', _serverproperties.STORE]) || [];\n      var array = [];\n      items.forEach(function (item) {\n        var val = item.get(0);\n        var alias = (0, _langUtil.getValueByPath)(item, [1], {\n          current: model.getUserLocale()\n        });\n        var imgkey = item.get(2);\n        if (imgkey) {\n          // imgkey = this._fileServer + imgkey\n          imgkey = (0, _componentutil.getImgFullPath)(_this8._fileServer, imgkey);\n        }\n        array.push({\n          value: val,\n          alias: alias,\n          imgkey: imgkey\n        });\n      });\n      return /*#__PURE__*/_react[\"default\"].createElement(_Select[\"default\"], {\n        items: array,\n        onChange: function onChange(value) {\n          return _this8.handleChange(value);\n        },\n        value: inputProps.value,\n        Grow: 1,\n        disabled: inputProps.disabled,\n        style: inputProps.style,\n        multiple: inputProps.multiple,\n        theme: inputProps.theme,\n        required: mustInput,\n        placeholder: inputProps.placeholder\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this9 = this;\n      var _this$props9 = this.props,\n        model = _this$props9.model,\n        layoutOption = _this$props9.layoutOption;\n      var meta = model.meta;\n      var tipsConfig = this.state.tipsConfig;\n      var mustInput = this.getMustInput();\n      var showTitle = meta.get(_serverproperties.SHOW_TITLE) !== false;\n      var option = model.getMetaProperty('item') || (0, _immutable.Map)();\n      var caption = model.getMetaLocaleProperty('caption');\n      var fieldType = option.get('type');\n      var slot;\n      if (tipsConfig) {\n        slot = /*#__PURE__*/_react[\"default\"].createElement(_Slot[\"default\"], {\n          tips: tipsConfig,\n          style: {\n            lineHeight: 'initial'\n          }\n        });\n      }\n      if (fieldType === _fieldType[\"default\"].GeographicLocation) {\n        var updateModel = function updateModel(location) {\n          return _this9.props.dispatch((0, _fieldaction.change)(model, location));\n        };\n        var FieldElement = _index[\"default\"][fieldType];\n        return /*#__PURE__*/_react[\"default\"].createElement(FieldElement, {\n          model: model,\n          updateModel: updateModel,\n          required: mustInput,\n          isLocked: this.props.isLocked,\n          locale: model.getUserLocale(),\n          showFormByTips: function showFormByTips() {\n            return _this9.props.dispatch(_tooltipaction.showFormByTips.apply(void 0, arguments));\n          },\n          slot: slot\n        });\n      }\n      var style = Object.assign({}, (0, _componentutil.getCommonStyle)(model), this.props.style);\n      var fullLine = meta.get('fullLine');\n      if (fullLine) {\n        style.width = '100%';\n      }\n      delete style.textAlign;\n      var _getCommonClass = (0, _componentutil.getCommonClass)(model),\n        Grow = _getCommonClass.Grow,\n        Shrink = _getCommonClass.Shrink,\n        AlignSelf = _getCommonClass.AlignSelf;\n      var className = (0, _commonUtils[\"default\"])({\n        Grow: Grow,\n        Shrink: Shrink,\n        AlignSelf: AlignSelf\n      });\n      var labelStyle = {\n        width: model.getMetaLocaleProperty(_serverproperties.LABEL_WIDTH)\n      };\n      var isCompact = !!this.state.panelType;\n      var labelTextAlign = this.state.layoutInfo.labelTextAlign;\n      // const defaultLabelDirection = isCompact && getFieldDefaultProps(fieldType, customProperties.LABEL_DIRECTION)\n      // if (defaultLabelDirection === 'h') {\n      //   option = option.setIn([LABEL_DIRECTION], defaultLabelDirection)\n      // }\n\n      var labelDirection = option.get(_serverproperties.LABEL_DIRECTION) || this.state.layoutInfo.labelDirection || 'v';\n      var fieldStyle;\n      // xf 确认如果是锁定不显示下划线，那么主题设置的字段风格不应该生效\n      if (this.isNoUnderLineLockStyle()) {\n        fieldStyle = meta === null || meta === void 0 ? void 0 : meta.getIn(['item', _serverproperties.FIELD_STYLE]);\n      } else {\n        fieldStyle = option.get(_serverproperties.FIELD_STYLE);\n        var isView = (0, _componentutil.isViewModel)(this.props.formStatus);\n        if (isView && fieldStyle !== 1) {\n          var defaultFieldStyle = (0, _defaultPropsUtil.getFieldDefaultProps)(fieldType, _customProperties[\"default\"].FIELD_STYLE_IN_VIEW);\n          if (defaultFieldStyle === _const.FIELD_STYLE_TYPE.NOLINE) {\n            // xf 确认如果设置查看态为无线框，不锁定就取编辑态的字段风格\n            var _disabled = option && option.get(_serverproperties.EDITABLE) === false || this._getLock(model);\n            if (!_disabled) {\n              defaultFieldStyle = (0, _defaultPropsUtil.getFieldDefaultProps)(fieldType, _customProperties[\"default\"].FIELD_STYLE);\n            }\n          }\n          if (defaultFieldStyle !== undefined) {\n            // 这里标签与basedata 比较特殊, 还是拿设置的值\n            fieldStyle = defaultFieldStyle;\n          }\n        }\n      }\n      // // 特殊处理: 编辑态下textarea、largetText 锁定状态下风格都为2\n      // const lock = this._getLock(model)\n      // if (!isView && lock && (fieldType === 'textarea' || fieldType === 'largeText')) {\n      //   fieldStyle = 2\n      // }\n      var isWidthOrHeightBeZero = (style === null || style === void 0 ? void 0 : style.width) === '0px' || (style === null || style === void 0 ? void 0 : style.height) === '0px';\n      var allBorder = Object.is(fieldStyle, 2) && !['radio', 'checkbox', _fieldType[\"default\"].CheckBoxGroup, _fieldType[\"default\"].RadioOptGroup].includes(fieldType) && !isWidthOrHeightBeZero;\n      // 无线框\n      var noBorder = Object.is(fieldStyle, 3) && fieldType !== 'radio' && fieldType !== 'checkbox';\n      // // 查看态下checkbox 需要特殊处理\n      // if (isViewModel(this.props.formStatus) && Object.is(fieldStyle, 2) && fieldType === 'checkbox') {\n      //   allBorder = true\n      // }\n      var showType = option.get('showtype');\n      var radioStyle;\n      var checkboxStyle;\n      if (fieldType === 'textarea' || fieldType === 'largeText') {\n        var theme = option.get(_serverproperties.LABEL_DIRECTION, 'v') === 'v' ? 'default' : 'flat';\n        if (!style.height && !Object.is(theme, 'flat')) {\n          style.height = 'initial';\n        }\n      } else if (fieldType === 'checkbox' && (option.get('s') === 1 || option.get('s') === 2) || fieldType === 'radio') {\n        showTitle = false;\n        if (fieldType === 'radio') {\n          radioStyle = fieldStyle;\n        }\n        if (fieldType === 'checkbox') {\n          checkboxStyle = option.get('s');\n        }\n      } else if (fieldType === 'picture') {\n        var _model$getMetaPropert, _this$state$layoutInf, _this$state$layoutInf2;\n        var radius = model.getMetaProperty('rd');\n        var _value3 = this.state.innerValue || model.getDataValue();\n        var imgPath = model.getDataProperty('u');\n        var lock = this._getLock(model);\n        var showStyle = option.get('s');\n        var lockPreview = option && option.get('lp'); // 是否锁定预览，默认可以预览\n        var appId = (0, _appModelFunction.getAppId)(model.pageId)(model.state); // 上传图片url使用\n        var formId = (0, _appModelFunction.getFormId)(model.pageId)(model.state);\n        var sectionMagnifier = model.getMetaProperty('sem') || false; // 放大镜\n        var allowCropper = model.getMetaProperty(_serverproperties.ALLOW_CROPPER) || option.get(_serverproperties.ALLOW_CROPPER) || false; // 允许裁剪\n        var cutAspectRatio = (_model$getMetaPropert = model.getMetaProperty(_serverproperties.CUT_ASPECT_RATIO)) !== null && _model$getMetaPropert !== void 0 ? _model$getMetaPropert : 0; // 裁剪比例\n        var maxSize = (0, _imageUtil.getMaxSize)((option.get(_serverproperties.IMAGE_MAX_SIZE) || 0) * 1024 * 1024);\n        var _labelStyle = ((_this$state$layoutInf = this.state.layoutInfo) === null || _this$state$layoutInf === void 0 || (_this$state$layoutInf2 = _this$state$layoutInf.getLabelStyle) === null || _this$state$layoutInf2 === void 0 ? void 0 : _this$state$layoutInf2.call(_this$state$layoutInf, model)) || {};\n        _labelStyle.fontSize = (0, _defaultPropsUtil.getFieldDefaultProps)(fieldType, _customProperties[\"default\"].TITLE_FONT_SIZE);\n        var handleDelete = function handleDelete(params) {\n          return _this9.props.dispatch((0, _imagelistaction.removeImage)(model, params));\n        };\n        var Element = /*#__PURE__*/_react[\"default\"].createElement(_Picture[\"default\"], {\n          allowCropper: allowCropper,\n          cutAspectRatio: parseInt(cutAspectRatio),\n          appId: appId,\n          className: className,\n          disabled: lock,\n          fieldType: fieldType,\n          fileServer: this._fileServer,\n          formId: formId,\n          id: model.key,\n          imgPath: imgPath,\n          labelDirection: labelDirection,\n          labelStyle: _labelStyle,\n          labelText: caption,\n          labelTextAlign: labelTextAlign,\n          lockPreview: lockPreview,\n          maxSize: maxSize,\n          model: model,\n          mustInput: mustInput,\n          pictureModel: model,\n          radius: radius,\n          sectionMagnifier: sectionMagnifier,\n          Shrink: 0,\n          showPicture: this.showPicture,\n          showStyle: showStyle,\n          showTitle: showTitle,\n          src: _value3,\n          style: style,\n          onChange: function onChange(value) {\n            return _this9.handleChange(value);\n          },\n          onClick: function onClick() {\n            return _this9.props.dispatch((0, _buttonaction.click)(_this9.props.model));\n          },\n          onDelete: handleDelete,\n          showFormByTips: function showFormByTips() {\n            return _this9.props.dispatch(_tooltipaction.showFormByTips.apply(void 0, arguments));\n          },\n          beforeUpload: this.beforeUploadPicture,\n          reportUploadResult: this.uploadPictureResult,\n          slot: slot\n        });\n        return showStyle === 'view' ? /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n          className: (0, _classnames3[\"default\"])(_KDField2[\"default\"]['field-item-pic'], {\n            'layout-h': labelDirection === 'h'\n          })\n        }, Element) : Element // 头像属性添加默认的边距，否则与其他字段对不齐\n        ;\n      } else if (fieldType === 'icon') {\n        // 图标字段运行时显示Icon\n        // 默认图片原始大小显示，其他按100%显示\n        var imageZoom = model.getMetaProperty('imageZoom') !== undefined;\n        return this.getIconField(imageZoom, model.getDataValue(), style, fieldType, _objectSpread({}, {\n          Grow: Grow,\n          Shrink: Shrink\n        }));\n      } else if (fieldType === 'attachmentfield') {\n        return this.renderField(allBorder, option);\n      } else if (fieldType === 'signature') {\n        var _this$state$layoutInf3, _this$state$layoutInf4;\n        // 手写签名\n        var Field = _index[\"default\"][fieldType];\n        var _value4 = this.state.innerValue || model.getDataValue();\n        var _lock = this._getLock(model);\n        var _showStyle = option.get('s');\n        var _labelStyle2 = ((_this$state$layoutInf3 = this.state.layoutInfo) === null || _this$state$layoutInf3 === void 0 || (_this$state$layoutInf4 = _this$state$layoutInf3.getLabelStyle) === null || _this$state$layoutInf4 === void 0 ? void 0 : _this$state$layoutInf4.call(_this$state$layoutInf3, model)) || {};\n        _labelStyle2.fontSize = (0, _defaultPropsUtil.getFieldDefaultProps)(fieldType, _customProperties[\"default\"].TITLE_FONT_SIZE);\n        var mandatoryHandSigning = model.getMetaProperty(['item', _serverproperties.FORCE_SIGNATURE]); // 强制手签\n        var _setAsDefaultSignature = function _setAsDefaultSignature(isDefault) {\n          return _this9.props.dispatch((0, _signatureAction.setAsDefaultSignature)(model, isDefault));\n        };\n        var _Element = /*#__PURE__*/_react[\"default\"].createElement(Field, _extends({\n          className: className,\n          disabled: _lock,\n          model: model,\n          id: model.key,\n          labelDirection: labelDirection,\n          labelStyle: _labelStyle2,\n          labelText: caption,\n          labelTextAlign: labelTextAlign,\n          mustInput: mustInput,\n          dispatch: this.props.dispatch,\n          showStyle: _showStyle,\n          showTitle: showTitle,\n          value: _value4,\n          style: style,\n          mandatoryHandSigning: mandatoryHandSigning,\n          setAsDefaultSignature: _setAsDefaultSignature,\n          onChange: function onChange(value) {\n            return _this9.handleChange(value);\n          },\n          slot: slot\n        }, this.props.attachData));\n        return _Element;\n      } else if (fieldType === 'richtext') {\n        var _model$getMetaPropert2;\n        // 富文本\n        var _Field = _index[\"default\"][fieldType];\n        var _value5 = this.state.innerValue || model.getDataValue();\n        var _lock2 = this._getLock(model);\n        var _showStyle2 = option.get('s');\n        var _appId = (0, _appModelFunction.getAppId)(model.pageId)(model.state); // 上传图片url使用\n        var _formId = (0, _appModelFunction.getFormId)(model.pageId)(model.state);\n        labelStyle.fontSize = (0, _defaultPropsUtil.getFieldDefaultProps)(fieldType, _customProperties[\"default\"].TITLE_FONT_SIZE);\n        var lockAutoHeight = _lock2 && model.getMetaProperty(['item', 'lockAutoHeight']);\n        var toolbarItems = (_model$getMetaPropert2 = model.getMetaProperty(['item', 'toolbarItems'])) === null || _model$getMetaPropert2 === void 0 ? void 0 : _model$getMetaPropert2.get('toolbarItems').toJS();\n        var placeholder = this.getPlaceHolder(); // 字段为空提示属性修改为多语言\n        var isFireUpdate = this.getFireUpdate(this.props.model);\n        var _Element2 = /*#__PURE__*/_react[\"default\"].createElement(_Field, _extends({\n          model: model,\n          appId: _appId,\n          formId: _formId,\n          value: _value5,\n          className: className,\n          disabled: _lock2,\n          mustInput: mustInput,\n          placeholder: placeholder,\n          isFireUpdate: isFireUpdate,\n          lockAutoHeight: lockAutoHeight,\n          toolbarItems: toolbarItems,\n          showTitle: showTitle,\n          labelText: caption,\n          labelDirection: labelDirection,\n          labelTextAlign: labelTextAlign,\n          labelStyle: labelStyle,\n          dispatch: this.props.dispatch,\n          slot: slot,\n          showStyle: _showStyle2,\n          onBlur: function onBlur(args) {\n            return _this9.handleOnBlur(args);\n          },\n          style: style\n        }, this.props.attachData));\n        return _Element2;\n      }\n\n      // 隐私字段\n      var fieldControl = this.renderField(allBorder, option, noBorder);\n      var isPrivacyField = option.getIn([_serverproperties.PRIVACY, _serverproperties.IS_PRIVACY]) && (0, _memoryCacher.getPageData)(model.pageId, [model.key, _serverproperties.IS_PRIVACY]) !== 1;\n      var value = this.state.innerValue === undefined ? model.getDataValue() : this.state.innerValue;\n      // 选择标签风格显示\n      if (fieldStyle === 1 && !Object.is(fieldType, 'radiogroup') && !Object.is(fieldType, 'radio')) {\n        var cn = (0, _classnames3[\"default\"])('kd-cq-field kd-cq-label', _defineProperty({}, _KDField2[\"default\"]['text-omit'], true), className);\n        if (isPrivacyField) {\n          var _privacyField = this.renderPrivacyField(_objectSpread(_objectSpread({}, style), {}, {\n            position: 'relative',\n            backgroundColor: 'inherit'\n          }), allBorder);\n          return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n            className: cn,\n            style: style\n          }, _privacyField);\n        }\n        var isLink = model.getMetaProperty('ln');\n        return /*#__PURE__*/_react[\"default\"].createElement(_FieldLabel[\"default\"], _extends({\n          className: className,\n          fileServer: this._fileServer,\n          model: model,\n          style: style,\n          value: value\n        }, this.props.attachData, {\n          onValueClick: this.handleValueClick,\n          isLink: isLink\n        }));\n      }\n      var showEditButton = option && option.get(_serverproperties.SHOW_EDIT_BTN); // 是否有编辑按钮影响边距\n\n      // 判断是否需要全边框 add by 洪程\n      var needBorder = this.isNeedBorder(fieldType, showType);\n      if (!fieldControl) return null;\n      var isMultiLine = fieldType === _fieldType[\"default\"].LocaleText && model.getMetaProperty([_serverproperties.ITEM, _serverproperties.MULTI_LINE]);\n      var disabled = this.isFieldDisabled(fieldControl);\n      var privacyField = isPrivacyField && this.renderPrivacyField(style, allBorder);\n      // 是否为基础资料的下拉模式\n      var isBaseDataSelectModel = option.get('dst') - 0 === 1;\n      var contentContainerStyle = this.state.layoutInfo.contentContainerStyle;\n      var _style = (0, _fieldUtils.getFieldStyle)(style, this.state.layoutInfo.style);\n      return /*#__PURE__*/_react[\"default\"].createElement(_FieldItem[\"default\"], _extends({\n        ref: this.fieldRef,\n        className: (0, _classnames3[\"default\"])((0, _commonUtils[\"default\"])({\n          AlignSelf: AlignSelf\n        })),\n        contentContainerStyle: contentContainerStyle,\n        labelText: caption,\n        showEditButton: showEditButton,\n        needBorder: needBorder,\n        allBorder: allBorder,\n        noBorder: noBorder,\n        labelStyle: labelStyle,\n        labelTextAlign: labelTextAlign,\n        showTitle: showTitle,\n        showType: showType,\n        style: _style,\n        id: model.key,\n        mustInput: mustInput,\n        labelDirection: labelDirection,\n        fieldType: fieldType,\n        radioStyle: radioStyle,\n        checkboxStyle: checkboxStyle,\n        model: model,\n        showFormByTips: function showFormByTips() {\n          return _this9.props.dispatch(_tooltipaction.showFormByTips.apply(void 0, arguments));\n        },\n        isNoUnderLineLockStyle: this.isNoUnderLineLockStyle(),\n        isMultiLine: isMultiLine,\n        disabled: disabled,\n        layoutOption: layoutOption,\n        isBaseDataSelectModel: isBaseDataSelectModel,\n        slot: slot,\n        isCompact: isCompact,\n        fullLine: fullLine\n      }, this.props.attachData), privacyField, fieldControl);\n    }\n  }]);\n  return KDField;\n}(_react[\"default\"].Component), _KDField.contextTypes = {\n  store: _propTypes[\"default\"].object\n}, _KDField)) || _class) || _class) || _class) || _class);\nvar _default = exports[\"default\"] = KDField;\n\n//# sourceURL=webpack://bos-platform/./src/component/web/KDField.js?");

/***/ }),

/***/ "./src/component/web/KDFieldSetPanel.js":
/*!**********************************************!*\
  !*** ./src/component/web/KDFieldSetPanel.js ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.filter.js */ \"../../node_modules/core-js/modules/es.array.filter.js\");\n__webpack_require__(/*! core-js/modules/es.array.for-each.js */ \"../../node_modules/core-js/modules/es.array.for-each.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.create.js */ \"../../node_modules/core-js/modules/es.object.create.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-properties.js */ \"../../node_modules/core-js/modules/es.object.define-properties.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptors.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptors.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.get-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.keys.js */ \"../../node_modules/core-js/modules/es.object.keys.js\");\n__webpack_require__(/*! core-js/modules/es.object.set-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.set-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.reflect.construct.js */ \"../../node_modules/core-js/modules/es.reflect.construct.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ \"../../node_modules/core-js/modules/web.dom-collections.for-each.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.array.concat.js */ \"../../node_modules/core-js/modules/es.array.concat.js\");\n__webpack_require__(/*! core-js/modules/es.array.includes.js */ \"../../node_modules/core-js/modules/es.array.includes.js\");\n__webpack_require__(/*! core-js/modules/es.array.map.js */ \"../../node_modules/core-js/modules/es.array.map.js\");\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\n__webpack_require__(/*! core-js/modules/es.object.assign.js */ \"../../node_modules/core-js/modules/es.object.assign.js\");\n__webpack_require__(/*! core-js/modules/es.string.includes.js */ \"../../node_modules/core-js/modules/es.string.includes.js\");\nvar _react = _interopRequireDefault(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _propTypes = _interopRequireDefault(__webpack_require__(/*! prop-types */ \"../../node_modules/prop-types/index.js\"));\nvar _immutable = __webpack_require__(/*! immutable */ \"webpack/sharing/consume/default/immutable/immutable?f2ca\");\nvar _classnames2 = _interopRequireDefault(__webpack_require__(/*! classnames */ \"../../node_modules/classnames/index.js\"));\nvar _lodash = _interopRequireDefault(__webpack_require__(/*! lodash */ \"../../node_modules/lodash/lodash.js\"));\nvar _global = __webpack_require__(/*! @/global */ \"./src/global/index.js\");\nvar _componentutil = __webpack_require__(/*! ../../util/componentutil */ \"./src/util/componentutil.js\");\nvar _componentFactory = _interopRequireDefault(__webpack_require__(/*! ../../factory/componentFactory */ \"./src/factory/componentFactory.js\"));\nvar _FieldsetPanel = _interopRequireDefault(__webpack_require__(/*! ./base/FieldsetPanel */ \"./src/component/web/base/FieldsetPanel.js\"));\nvar _buttonaction = __webpack_require__(/*! ../../action/buttonaction */ \"./src/action/buttonaction.js\");\nvar _VisibleLockWrap = _interopRequireWildcard(__webpack_require__(/*! ../common/VisibleLockWrap */ \"./src/component/common/VisibleLockWrap.js\"));\nvar _AttachDataWrap = _interopRequireDefault(__webpack_require__(/*! ../common/AttachDataWrap */ \"./src/component/common/AttachDataWrap.js\"));\nvar _DragSplitScreenWrap = _interopRequireDefault(__webpack_require__(/*! ../common/DragSplitScreenWrap */ \"./src/component/common/DragSplitScreenWrap.js\"));\nvar _Slot = _interopRequireDefault(__webpack_require__(/*! @/component/common/Slot */ \"./src/component/common/Slot.jsx\"));\nvar _action = __webpack_require__(/*! @/action/action */ \"./src/action/action.js\");\nvar _GlobalDataCacher = __webpack_require__(/*! @/model/GlobalDataCacher */ \"./src/model/GlobalDataCacher.js\");\nvar _symbolConst = __webpack_require__(/*! @/constant/symbolConst */ \"./src/constant/symbolConst.js\");\nvar _PageVisibleStatus = __webpack_require__(/*! @/component/common/PageVisibleStatus */ \"./src/component/common/PageVisibleStatus.js\");\nvar _toolUtils = __webpack_require__(/*! @/util/toolUtils */ \"./src/util/toolUtils.js\");\nvar _tooltipsUtil = __webpack_require__(/*! @/util/tooltipsUtil */ \"./src/util/tooltipsUtil.js\");\nvar _intlApi = __webpack_require__(/*! @/i18n/intlApi */ \"./src/i18n/intlApi.js\");\nvar _advconUtil = __webpack_require__(/*! @/util/advconUtil */ \"./src/util/advconUtil.js\");\nvar _KDFieldSetPanel2 = _interopRequireDefault(__webpack_require__(/*! ./KDFieldSetPanel.less */ \"./src/component/web/KDFieldSetPanel.less\"));\nvar _dec, _dec2, _class, _KDFieldSetPanel;\n/**\n * 字段布局控件\n *\n * @date 2016-9-14\n */\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nvar KDFieldSetPanel = (_dec = (0, _VisibleLockWrap[\"default\"])(true), _dec2 = (0, _DragSplitScreenWrap[\"default\"])('field'), (0, _AttachDataWrap[\"default\"])(_class = _dec(_class = (0, _VisibleLockWrap.ContainerLockWrap)(_class = _dec2(_class = (_KDFieldSetPanel = /*#__PURE__*/function (_React$Component) {\n  _inherits(KDFieldSetPanel, _React$Component);\n  function KDFieldSetPanel(props) {\n    var _this;\n    _classCallCheck(this, KDFieldSetPanel);\n    _this = _callSuper(this, KDFieldSetPanel, [props]);\n    _this.doResetColumn = function () {\n      _this.setState(function (prevState) {\n        return {\n          themeChange: prevState.themeChange + 1\n        };\n      });\n    };\n    _this.getTileProps = function (meta) {\n      var _this$props = _this.props,\n        params = _this$props.params,\n        rowData = _this$props.rowData,\n        getFiledVisible = _this$props.getFiledVisible,\n        getFieldLocked = _this$props.getFieldLocked,\n        activeRowKey = _this$props.activeRowKey,\n        getColMetaByField = _this$props.getColMetaByField,\n        getColProperty = _this$props.getColProperty,\n        getDataProperty = _this$props.getDataProperty,\n        comfirmDelete = _this$props.comfirmDelete,\n        dispatch = _this$props.dispatch;\n      return meta && meta.get && meta.get('type') === 'tilefield' ? {\n        // 平铺视图需要透过字段面板向下传相关属性\n        params: params,\n        rowData: rowData,\n        getFiledVisible: getFiledVisible,\n        getFieldLocked: getFieldLocked,\n        activeRowKey: activeRowKey,\n        getColMetaByField: getColMetaByField,\n        getColProperty: getColProperty,\n        getDataProperty: getDataProperty,\n        mergeState: _action.mergeState,\n        comfirmDelete: comfirmDelete,\n        dispatch: dispatch\n      } : {};\n    };\n    _this.handleFullScreen = function () {\n      var fullScreenStatus = !_this.state.fullScreen;\n      _this.setState({\n        fullScreen: fullScreenStatus\n      });\n      var model = _this.props.model;\n      var pageId = model.pageId,\n        key = model.key;\n      (0, _advconUtil.updateFullScreenGlobalData)(fullScreenStatus, \"\".concat(pageId, \"_\").concat(key));\n    };\n    _this.updateTipsConfig = _this.updateTipsConfig.bind(_assertThisInitialized(_this));\n    _this.state = {\n      themeChange: 0,\n      tipsConfig: null,\n      fullScreen: false\n    };\n    return _this;\n  }\n  _createClass(KDFieldSetPanel, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n      var model = this.props.model;\n      var pageId = model.pageId;\n      this.removeChangeThemeListener = (0, _GlobalDataCacher.addDataChangeListener)(_symbolConst.KEY_MODIFY_THEME_ACTION, function () {\n        // 移动端不做处理，移动端暂无主题\n        if ((0, _toolUtils.isMobileClient)()) return;\n        var visiblePages = (0, _PageVisibleStatus.getVisiblePages)((0, _GlobalDataCacher.getData)(_symbolConst.KEY_PAGE_VISIBLE_STATUS));\n        if (visiblePages.includes(pageId)) {\n          _this2.doResetColumn();\n        } else {\n          _this2.removePageVisibleChangeListener = (0, _GlobalDataCacher.addDataChangeListener)(_symbolConst.KEY_PAGE_VISIBLE_STATUS, function (visibleStatus) {\n            var visiblePagesData = (0, _PageVisibleStatus.getVisiblePages)(visibleStatus);\n            if (visiblePagesData.includes(pageId)) {\n              _this2.removePageVisibleChangeListener();\n              _this2.doResetColumn();\n            }\n          });\n        }\n      });\n      var tips = (0, _tooltipsUtil.getTips)(this.props.model);\n      if (tips) this.updateTipsConfig(model.pageId, model.key, tips);\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      var _nextProps$model, _nextProps$model2;\n      var tips = (0, _tooltipsUtil.getTips)(this.props.model);\n      var nextTips = (0, _tooltipsUtil.getTips)(nextProps.model);\n      if (!(0, _immutable.is)(tips, nextTips)) this.updateTipsConfig((_nextProps$model = nextProps.model) === null || _nextProps$model === void 0 ? void 0 : _nextProps$model.pageId, (_nextProps$model2 = nextProps.model) === null || _nextProps$model2 === void 0 ? void 0 : _nextProps$model2.key, nextTips);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var _this$removePageVisib;\n      this.removeChangeThemeListener();\n      (_this$removePageVisib = this.removePageVisibleChangeListener) === null || _this$removePageVisib === void 0 || _this$removePageVisib.call(this);\n    }\n  }, {\n    key: \"updateTipsConfig\",\n    value: function updateTipsConfig(pageId, id, tips) {\n      if (!tips) {\n        // 可以通过u指令设置tips为空\n        this.setState({\n          tipsConfig: null\n        });\n        return;\n      }\n      var tipsConfig = this.state.tipsConfig;\n      if (!tipsConfig) {\n        tipsConfig = (0, _tooltipsUtil.createTipsConfig)(pageId, id);\n        this.setState({\n          tipsConfig: tipsConfig\n        });\n      }\n      (0, _tooltipsUtil.saveTipsInfo)(tipsConfig, tips);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n      var _this$props2 = this.props,\n        model = _this$props2.model,\n        dispatch = _this$props2.dispatch;\n      var tipsConfig = this.state.tipsConfig;\n      var style = Object.assign({}, (0, _componentutil.getCommonStyle)(model), this.props.style);\n      var commonClass = (0, _componentutil.getCommonClass)(model);\n      var title = model.getMetaLocaleProperty('text');\n      var items = model.getMetaProperty('items');\n      var collapsible = model.getMetaProperty('collapsible'); // 可折叠\n      var maximize = model.getMetaProperty('maximize'); // 可全屏\n      var defaultCollapse = model.getMetaProperty('defaultcollapse'); // 默认折叠\n      var clickable = model.getMetaProperty('clickable'); // 容器点击\n\n      var slot;\n      if (tipsConfig) {\n        slot = /*#__PURE__*/_react[\"default\"].createElement(_Slot[\"default\"], {\n          tips: tipsConfig\n        });\n      }\n      var fullScreenIcon = (0, _classnames2[\"default\"])(_defineProperty(_defineProperty({\n        'kd-cq-full-screen-icon': !this.state.fullScreen,\n        'kd-cq-exit-full-screen-icon': this.state.fullScreen,\n        'kdfont kdfont-quanping': !this.state.fullScreen,\n        'kdfont kdfont-guanbiquanping': this.state.fullScreen\n      }, _KDFieldSetPanel2[\"default\"]['full-screen'], true), 'kd-hover-color', true));\n      var fullPanelSlot = maximize && !collapsible ? /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n        className: fullScreenIcon,\n        onClick: this.handleFullScreen,\n        title: this.state.fullScreen ? (0, _intlApi.getLangMsg)({\n          key: 'tabs.key0002'\n        }) : (0, _intlApi.getLangMsg)({\n          key: 'tabs.key0001'\n        })\n      }) : null;\n      var className = maximize && this.state.fullScreen ? 'kd-cq-filedsetpanel-fullscreen' : '';\n      return /*#__PURE__*/_react[\"default\"].createElement(_FieldsetPanel[\"default\"], _extends({\n        ref: this.baseCtrlRef,\n        model: model,\n        id: model.key,\n        pageId: model.pageId,\n        handleClick: function handleClick() {\n          return clickable && dispatch((0, _buttonaction.click)(model, []));\n        },\n        style: style,\n        runTime: true\n      }, commonClass, {\n        Collapsible: collapsible,\n        Maximize: maximize,\n        defaultCollapse: defaultCollapse,\n        Name: title\n      }, this.props.attachData, {\n        userLocal: model.getUserLocale(),\n        resetColumn: this.state.themeChange,\n        slot: slot,\n        fieldSetSlot: fullPanelSlot,\n        className: className,\n        \"data-ctrl-type\": \"fieldpanel\",\n        \"data-pid\": model.pageId\n      }), items ? items.map(function (meta) {\n        var others = _this3.getTileProps(meta);\n        return (0, _componentFactory[\"default\"])(model.pageId, meta, (0, _global.getGlobalState)(), undefined, _objectSpread({}, others));\n      }) : null);\n    }\n  }]);\n  return KDFieldSetPanel;\n}(_react[\"default\"].Component), _KDFieldSetPanel.contextTypes = {\n  store: _propTypes[\"default\"].object\n}, _KDFieldSetPanel)) || _class) || _class) || _class) || _class);\nvar _default = exports[\"default\"] = KDFieldSetPanel;\n\n//# sourceURL=webpack://bos-platform/./src/component/web/KDFieldSetPanel.js?");

/***/ }),

/***/ "./src/component/web/KDFlexPanel.js":
/*!******************************************!*\
  !*** ./src/component/web/KDFlexPanel.js ***!
  \******************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.filter.js */ \"../../node_modules/core-js/modules/es.array.filter.js\");\n__webpack_require__(/*! core-js/modules/es.array.for-each.js */ \"../../node_modules/core-js/modules/es.array.for-each.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.create.js */ \"../../node_modules/core-js/modules/es.object.create.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-properties.js */ \"../../node_modules/core-js/modules/es.object.define-properties.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptors.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptors.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.get-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.keys.js */ \"../../node_modules/core-js/modules/es.object.keys.js\");\n__webpack_require__(/*! core-js/modules/es.object.set-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.set-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.reflect.construct.js */ \"../../node_modules/core-js/modules/es.reflect.construct.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ \"../../node_modules/core-js/modules/web.dom-collections.for-each.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\n__webpack_require__(/*! core-js/modules/es.object.assign.js */ \"../../node_modules/core-js/modules/es.object.assign.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.promise.js */ \"../../node_modules/core-js/modules/es.promise.js\");\n__webpack_require__(/*! core-js/modules/web.timers.js */ \"../../node_modules/core-js/modules/web.timers.js\");\nvar _react = _interopRequireWildcard(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _reactDom = _interopRequireDefault(__webpack_require__(/*! react-dom */ \"webpack/sharing/consume/default/react-dom/react-dom?418d\"));\nvar _immutable = __webpack_require__(/*! immutable */ \"webpack/sharing/consume/default/immutable/immutable?f2ca\");\nvar _global = _interopRequireWildcard(__webpack_require__(/*! @/global */ \"./src/global/index.js\"));\nvar _buttonaction = __webpack_require__(/*! ../../action/buttonaction */ \"./src/action/buttonaction.js\");\nvar _tooltipaction = __webpack_require__(/*! ../../action/tooltipaction */ \"./src/action/tooltipaction.js\");\nvar _FlexPanel = _interopRequireDefault(__webpack_require__(/*! ./base/FlexPanel */ \"./src/component/web/base/FlexPanel.js\"));\nvar _componentutil = __webpack_require__(/*! ../../util/componentutil */ \"./src/util/componentutil.js\");\nvar _VisibleLockWrap = _interopRequireWildcard(__webpack_require__(/*! ../common/VisibleLockWrap */ \"./src/component/common/VisibleLockWrap.js\"));\nvar _DragWrap = _interopRequireDefault(__webpack_require__(/*! ../common/DragWrap */ \"./src/component/common/DragWrap.js\"));\nvar _AttachDataWrap = _interopRequireDefault(__webpack_require__(/*! ../common/AttachDataWrap */ \"./src/component/common/AttachDataWrap.js\"));\nvar _memoryCacher = __webpack_require__(/*! ../../model/memoryCacher */ \"./src/model/memoryCacher.js\");\nvar _PageLoadDataComplete = __webpack_require__(/*! @/component/common/PageLoadDataComplete */ \"./src/component/common/PageLoadDataComplete.js\");\nvar _IntersectionComponent = _interopRequireDefault(__webpack_require__(/*! @/component/common/IntersectionComponent */ \"./src/component/common/IntersectionComponent.js\"));\nvar _actionWithSingle = __webpack_require__(/*! @/action/actionWithSingle */ \"./src/action/actionWithSingle.js\");\nvar _appModelFunction = __webpack_require__(/*! @/model/appModelFunction */ \"./src/model/appModelFunction.js\");\nvar _sysActionName = __webpack_require__(/*! @/action/actionname/sysActionName */ \"./src/action/actionname/sysActionName.js\");\nvar _LazyLoadContainer = _interopRequireDefault(__webpack_require__(/*! @/component/common/LazyLoadContainer */ \"./src/component/common/LazyLoadContainer.js\"));\nvar _DragFlexWrap = _interopRequireDefault(__webpack_require__(/*! ../common/DragFlexWrap */ \"./src/component/common/DragFlexWrap.jsx\"));\nvar _DragSplitScreenWrap = _interopRequireDefault(__webpack_require__(/*! @/component/common/DragSplitScreenWrap */ \"./src/component/common/DragSplitScreenWrap.js\"));\nvar _Slot = _interopRequireDefault(__webpack_require__(/*! @/component/common/Slot */ \"./src/component/common/Slot.jsx\"));\nvar _PageModel = _interopRequireDefault(__webpack_require__(/*! @/model/PageModel */ \"./src/model/PageModel.js\"));\nvar _waitChildEleLoad = _interopRequireDefault(__webpack_require__(/*! @/component/common/waitChildEleLoad */ \"./src/component/common/waitChildEleLoad.js\"));\nvar _ParentIsHidingContext = _interopRequireDefault(__webpack_require__(/*! @/component/common/ParentIsHidingContext */ \"./src/component/common/ParentIsHidingContext.js\"));\nvar _tooltipsUtil = __webpack_require__(/*! @/util/tooltipsUtil */ \"./src/util/tooltipsUtil.js\");\nvar _dec, _dec2, _dec3, _class, _KDFlexPanel; // import PropTypes from 'prop-types'\n// import isControlDataChanged from '@/component/common/isControlDataChanged'\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nvar KDFlexPanel = (_dec = (0, _DragSplitScreenWrap[\"default\"])('flexpanel'), _dec2 = (0, _DragWrap[\"default\"])(false, false, true), _dec3 = (0, _VisibleLockWrap[\"default\"])(true), (0, _AttachDataWrap[\"default\"])(_class = _dec(_class = _dec2(_class = (0, _DragFlexWrap[\"default\"])(_class = _dec3(_class = (0, _VisibleLockWrap.ContainerLockWrap)(_class = (_KDFlexPanel = /*#__PURE__*/function (_Component) {\n  _inherits(KDFlexPanel, _Component);\n  function KDFlexPanel(props) {\n    var _this;\n    _classCallCheck(this, KDFlexPanel);\n    _this = _callSuper(this, KDFlexPanel, [props]);\n    _this.onIntersection = function (visible, entry) {\n      _this.currentVisible = visible;\n      if (visible && !_this.state.showChildren) {\n        _this.pageModel.waitLoadPromise().then(function () {\n          if (_this.currentVisible) {\n            // console.log('visible handleOnIntersection complete', this.props.model.key)\n            _this.setState({\n              showChildren: true\n            }, function () {\n              var model = _this.props.model;\n              if (model.getMetaProperty('FireShowEvt')) {\n                (0, _actionWithSingle.invokeControlService)(model, _sysActionName.ON_SHOW, [], (0, _appModelFunction.getPost)(model.pageId)((0, _global.getGlobalState)()));\n              }\n            });\n          }\n        });\n      }\n    };\n    _this.onRef = function (ref) {\n      _this.childCtrl = ref;\n    };\n    _this.handleClick = _this.handleClick.bind(_assertThisInitialized(_this));\n    _this.updateTipsConfig = _this.updateTipsConfig.bind(_assertThisInitialized(_this));\n    var isAllowLazyLoad = props.model.getMetaProperty('lazyload') !== false;\n    var componentType = props.model.getMetaProperty('type');\n    var showChildren = !!window.__nolazyload__ || !isAllowLazyLoad || componentType !== 'flexpanel';\n    var collapsible = props.model.getMetaProperty('collapsible');\n    var expand = props.model.getInitExpaned();\n    _this.pageModel = (0, _PageModel[\"default\"])(props.model.pageId);\n    if (!showChildren && !props.model.getMetaProperty('FireShowEvt')) {\n      // 优化条件，懒加载&&展开&&不能发onshow事件\n      if (expand) {\n        if (collapsible) {\n          // 可折叠并且展开，加入优化计算逻辑\n          showChildren = _this.pageModel.isImmediatelyLoad(props.model.key);\n          if (showChildren) {\n            _this.isImmediatelyLoad = true;\n          }\n        } else {\n          // if (!global[IS_IE]) {\n          showChildren = !_this.props.parentIsHiding || !_this.props.parentIsHiding(); // 非可折叠时,懒加载失效，直接显示\n          // }\n        }\n      }\n    }\n    _this.state = {\n      showChildren: showChildren,\n      tipsConfig: null\n    };\n    return _this;\n  }\n  _createClass(KDFlexPanel, [{\n    key: \"handleClick\",\n    value: function handleClick(e) {\n      e.stopPropagation();\n      var _this$props = this.props,\n        model = _this$props.model,\n        dispatch = _this$props.dispatch;\n      if (!this.props.getLocked(model)) {\n        dispatch((0, _buttonaction.click)(model, []));\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n      var model = this.props.model;\n      var tips = (0, _tooltipsUtil.getTips)(model);\n      if (tips) this.updateTipsConfig(model.pageId, model.key, tips);\n      this.handelPanelScroll(this.props);\n      var ele = _reactDom[\"default\"].findDOMNode(this);\n      setTimeout(function () {\n        _this2.isImmediatelyLoad && (0, _waitChildEleLoad[\"default\"])(ele, 500).then(function (result) {\n          var timeout = _global[\"default\"][_global.IS_IE] ? 1500 : 100;\n          setTimeout(function () {\n            // if (typeof result === 'string') {\n            //   console.log('waitChildEleLoadPromise timeout')\n            // } else {\n            //   console.log('waitChildEleLoadPromise ++++++++')\n            // }\n            _this2.pageModel.addImmediatelyLoadNum();\n          }, timeout);\n        });\n      }, 0);\n    }\n\n    // 这里兼容场景：面板中的工具栏项配置了下拉菜单，id和key值不一致，导致setEnable修改下拉菜单项锁定性不生效，这里先去掉前后不一致校验; 二改: id 已和key 一致\n    // 20210128 先注释掉判断，原因: 页签配置了菜单，只是用setVisible指令动态控制菜单的可见性，其他数据不变，页签菜单不会刷新\n    // shouldComponentUpdate (nextProps, nextState) {\n    //   const { isVisible, isLocked } = this.props\n    //   const nextIsVisible = nextProps.isVisible\n    //   const nextIsLocked = nextProps.isLocked\n    //   const { pageId, key } = nextProps.model\n    //   const updateVariable = this.props.appState && this.props.appState.getIn(['forms', pageId, 'updateVariable'])\n    //   const nextUpdateVariable = nextProps.appState && nextProps.appState.getIn(['forms', pageId, 'updateVariable'])\n\n    //   return isVisible !== nextIsVisible || isLocked !== nextIsLocked ||\n    //   this.state.showChildren !== nextState.showChildren || updateVariable !== nextUpdateVariable ||\n    //   isControlDataChanged(pageId, key, this.props.model.meta, nextProps.model.meta, this.props.appState, nextProps.appState)\n    // }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      var _nextProps$model, _nextProps$model2;\n      this.handelPanelScroll(nextProps);\n      var tips = (0, _tooltipsUtil.getTips)(this.props.model);\n      var nextTips = (0, _tooltipsUtil.getTips)(nextProps.model);\n      if (!(0, _immutable.is)(tips, nextTips)) this.updateTipsConfig((_nextProps$model = nextProps.model) === null || _nextProps$model === void 0 ? void 0 : _nextProps$model.pageId, (_nextProps$model2 = nextProps.model) === null || _nextProps$model2 === void 0 ? void 0 : _nextProps$model2.key, nextTips);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.dispose = true;\n      this.removeDataMessageListener && this.removeDataMessageListener();\n      this.removeDataMessageListenerOfScrollTop && this.removeDataMessageListenerOfScrollTop();\n      this.removeCheckElementVisible && this.removeCheckElementVisible();\n    }\n  }, {\n    key: \"updateTipsConfig\",\n    value: function updateTipsConfig(pageId, id, tips) {\n      if (!tips) {\n        // 可以通过u指令设置tips为空\n        this.setState({\n          tipsConfig: null\n        });\n        return;\n      }\n      var tipsConfig = this.state.tipsConfig;\n      if (!tipsConfig) {\n        tipsConfig = (0, _tooltipsUtil.createTipsConfig)(pageId, id);\n        this.setState({\n          tipsConfig: tipsConfig\n        });\n      }\n      (0, _tooltipsUtil.saveTipsInfo)(tipsConfig, tips);\n    }\n  }, {\n    key: \"handelPanelScroll\",\n    value: function handelPanelScroll(props) {\n      var _this3 = this;\n      if (!this.context) {\n        return;\n      }\n      var model = props.model;\n      var pageId = model.pageId,\n        key = model.key;\n      var scrollBottom = model.getMetaProperty('scrollBottom');\n      if (scrollBottom && !this.removeDataMessageListener) {\n        this.removeDataMessageListener = (0, _memoryCacher.addDataChangeListener)(pageId, ['__panelScrollBottom__', key], function () {\n          setTimeout(function () {\n            _this3.childCtrl && _this3.childCtrl.panelScroll();\n          }, 100);\n        });\n      }\n      var canScrollTop = model.getMetaProperty('scrollTop');\n      if (canScrollTop && !this.removeDataMessageListenerOfScrollTop) {\n        this.removeDataMessageListenerOfScrollTop = (0, _memoryCacher.addDataChangeListener)(pageId, ['__panelScrollTop__', key], function () {\n          setTimeout(function () {\n            _this3.childCtrl && _this3.childCtrl.panelScroll('top');\n          }, 100);\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n      if (!this.context) {\n        return null;\n      }\n      var _this$props2 = this.props,\n        model = _this$props2.model,\n        renderDragActionDiv = _this$props2.renderDragActionDiv,\n        dispatch = _this$props2.dispatch;\n      var tipsConfig = this.state.tipsConfig;\n      var style = Object.assign({}, (0, _componentutil.getCommonStyle)(model), this.props.style);\n      /* 后端设置背景图片 */\n      var bgImg = model.getDataProperty('bgImg');\n      if (bgImg) {\n        // if (!/^http(s)?/.test(bgImg)) {\n        //   bgImg = model.getFormConfig().fileserver + bgImg\n        // }\n        bgImg = (0, _componentutil.getImgFullPath)(model.getFormConfig().fileserver, bgImg);\n        style.backgroundImage = \"url(\".concat(bgImg, \")\"); // 性能优化\n      }\n      var slot;\n      if (tipsConfig) {\n        slot = /*#__PURE__*/_react[\"default\"].createElement(_Slot[\"default\"], {\n          tips: tipsConfig\n        });\n      }\n      var commonClass = (0, _componentutil.getCommonClass)(model);\n      var title = model.getMetaLocaleProperty('text');\n      var collapsible = model.getMetaProperty('collapsible'); // 可折叠\n      var defaultCollapse = model.getMetaProperty('defaultcollapse'); // 默认折叠\n      var showAbstract = model.getMetaProperty('showAbstract');\n      var clickable = model.getMetaProperty('clickable'); // 容器点击\n      var state = (0, _global.getGlobalState)();\n      var shadow = (0, _componentutil.getComponentDataProperty)(model, 'shadow', 'shadow', false);\n      var maximize = model.getMetaProperty('maximize');\n      var isLoadDataComplete = this.context;\n      var attachData = _objectSpread({\n        'data-pid': model.pageId\n      }, this.props.attachData);\n      return /*#__PURE__*/_react[\"default\"].createElement(_FlexPanel[\"default\"], _extends({\n        shadow: shadow,\n        model: model,\n        id: model.key,\n        pageId: model.pageId,\n        onClick: function onClick(e) {\n          return clickable && _this4.handleClick(e);\n        },\n        style: style\n      }, commonClass, {\n        Clickable: clickable,\n        onRef: this.onRef,\n        Maximize: maximize,\n        Collapsible: collapsible,\n        defaultCollapse: defaultCollapse,\n        Name: title\n      }, attachData, {\n        slot: slot,\n        showFormByTips: function showFormByTips() {\n          return dispatch(_tooltipaction.showFormByTips.apply(void 0, arguments));\n        },\n        userLocal: model.getUserLocale(),\n        renderDragActionDiv: renderDragActionDiv,\n        showAbstract: showAbstract\n      }), !this.state.showChildren && /*#__PURE__*/_react[\"default\"].createElement(_IntersectionComponent[\"default\"], {\n        onIntersection: this.onIntersection\n      }), isLoadDataComplete && this.state.showChildren && /*#__PURE__*/_react[\"default\"].createElement(_LazyLoadContainer[\"default\"], {\n        enabledLazyLoad: _global[\"default\"][_global.IS_IE] && !this.isImmediatelyLoad,\n        pageId: model.pageId,\n        childrenMeta: model.meta.get('items', new _immutable.List()),\n        state: state\n      }), isLoadDataComplete && _react[\"default\"].Children.toArray((0, _componentutil.parseSubForms)(model.pageId, model.meta.get('id'), state)));\n    }\n  }]);\n  return KDFlexPanel;\n}(_react.Component), _KDFlexPanel.contextType = _PageLoadDataComplete.PageLoadDataCompleteContext, _KDFlexPanel)) || _class) || _class) || _class) || _class) || _class) || _class); // export default KDFlexPanel\nvar _default = exports[\"default\"] = function _default(props) {\n  return /*#__PURE__*/_react[\"default\"].createElement(_ParentIsHidingContext[\"default\"].Consumer, null, function (parentIsHidingContextValue) {\n    return /*#__PURE__*/_react[\"default\"].createElement(KDFlexPanel, _extends({}, props, {\n      parentIsHiding: parentIsHidingContextValue\n    }));\n  });\n};\n\n//# sourceURL=webpack://bos-platform/./src/component/web/KDFlexPanel.js?");

/***/ }),

/***/ "./src/component/web/KDFlexibleField.js":
/*!**********************************************!*\
  !*** ./src/component/web/KDFlexibleField.js ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.from.js */ \"../../node_modules/core-js/modules/es.array.from.js\");\n__webpack_require__(/*! core-js/modules/es.array.is-array.js */ \"../../node_modules/core-js/modules/es.array.is-array.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-string.js */ \"../../node_modules/core-js/modules/es.date.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.function.name.js */ \"../../node_modules/core-js/modules/es.function.name.js\");\n__webpack_require__(/*! core-js/modules/es.object.create.js */ \"../../node_modules/core-js/modules/es.object.create.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.get-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.set-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.set-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.reflect.construct.js */ \"../../node_modules/core-js/modules/es.reflect.construct.js\");\n__webpack_require__(/*! core-js/modules/es.regexp.to-string.js */ \"../../node_modules/core-js/modules/es.regexp.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.array.map.js */ \"../../node_modules/core-js/modules/es.array.map.js\");\n__webpack_require__(/*! core-js/modules/es.array.slice.js */ \"../../node_modules/core-js/modules/es.array.slice.js\");\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.assign.js */ \"../../node_modules/core-js/modules/es.object.assign.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.promise.js */ \"../../node_modules/core-js/modules/es.promise.js\");\n__webpack_require__(/*! core-js/modules/es.regexp.exec.js */ \"../../node_modules/core-js/modules/es.regexp.exec.js\");\n__webpack_require__(/*! core-js/modules/es.string.split.js */ \"../../node_modules/core-js/modules/es.string.split.js\");\nvar _react = _interopRequireWildcard(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _propTypes = _interopRequireDefault(__webpack_require__(/*! prop-types */ \"../../node_modules/prop-types/index.js\"));\nvar _immutable = __webpack_require__(/*! immutable */ \"webpack/sharing/consume/default/immutable/immutable?f2ca\");\nvar _global = __webpack_require__(/*! @/global */ \"./src/global/index.js\");\nvar _componentutil = __webpack_require__(/*! ../../util/componentutil */ \"./src/util/componentutil.js\");\nvar _buttonaction = __webpack_require__(/*! ../../action/buttonaction */ \"./src/action/buttonaction.js\");\nvar _fieldaction = __webpack_require__(/*! ../../action/fieldaction */ \"./src/action/fieldaction.js\");\nvar _FlexibleField = _interopRequireDefault(__webpack_require__(/*! ./base/FlexibleField.js */ \"./src/component/web/base/FlexibleField.js\"));\nvar _memoryCacher = __webpack_require__(/*! ../../model/memoryCacher */ \"./src/model/memoryCacher.js\");\nvar _VisibleLockWrap = _interopRequireWildcard(__webpack_require__(/*! ../common/VisibleLockWrap */ \"./src/component/common/VisibleLockWrap.js\"));\nvar _dec, _class, _KDFlexibleField;\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nvar KDFlexibleField = (_dec = (0, _VisibleLockWrap[\"default\"])(true), _dec(_class = (0, _VisibleLockWrap.ContainerLockWrap)(_class = (_KDFlexibleField = /*#__PURE__*/function (_Component) {\n  _inherits(KDFlexibleField, _Component);\n  function KDFlexibleField(props) {\n    var _this;\n    _classCallCheck(this, KDFlexibleField);\n    _this = _callSuper(this, KDFlexibleField, [props]);\n    _this.getSrcField = function () {\n      // flexibleMeta.sourceCtrl = ctrlKey+\"_\"+rowKey+'_'+colId; 表格上的sourceCtrl是拼接的\n      var sourceCtrl = _this.props.model.getMetaProperty('sourceCtrl');\n      var isGridCell = _this.props.model.getMetaProperty('isGridCell');\n      if (isGridCell === true) {\n        sourceCtrl = _this.props.model.getMetaProperty(['flexInfo', 'colId']);\n        var r = _this.props.model.getMetaProperty(['flexInfo', 'rowKey']);\n        return {\n          sourceCtrl: sourceCtrl,\n          r: r,\n          c: sourceCtrl\n        };\n      } else {\n        return {\n          sourceCtrl: sourceCtrl\n        };\n      }\n    };\n    _this.handleClick = _this.handleClick.bind(_assertThisInitialized(_this));\n    _this.tryCloseFlexible = _this.tryCloseFlexible.bind(_assertThisInitialized(_this));\n    _this.closeFlexible = _this.closeFlexible.bind(_assertThisInitialized(_this));\n    _this.forAutoTestActions = {\n      tryCloseFlexible: _fieldaction.tryCloseFlexible\n    };\n    return _this;\n  }\n\n  // 发到后台，由后台判断是否关闭，模拟基础资料发送请求\n  _createClass(KDFlexibleField, [{\n    key: \"tryCloseFlexible\",\n    value: function tryCloseFlexible() {\n      var srcField = this.getSrcField();\n      var model = {\n        pageId: this.props.model.pageId,\n        key: srcField.sourceCtrl\n      };\n      // {flexId , r:rowKey, c:colId}\n      var args = {\n        flexId: this.props.model.key\n      };\n      if (srcField.r != undefined) {\n        args.r = srcField.r;\n        args.c = srcField.c;\n      }\n      this.props.dispatch((0, _fieldaction.tryCloseFlexible)(model, args));\n    }\n\n    // 直接前端关闭\n  }, {\n    key: \"closeFlexible\",\n    value: function closeFlexible() {\n      this.props.dispatch((0, _fieldaction.closeFlexible)(this.props.model, this.props.model.key));\n    }\n\n    // 点击关闭按钮，目前屏蔽掉了\n  }, {\n    key: \"clickCloseFlexible\",\n    value: function clickCloseFlexible() {\n      this.props.dispatch((0, _fieldaction.clickCloseFlexible)(this.props.model, this.props.model.key));\n    }\n  }, {\n    key: \"handleClick\",\n    value: function handleClick(e) {\n      e.stopPropagation();\n      var _this$props = this.props,\n        model = _this$props.model,\n        dispatch = _this$props.dispatch;\n      if (!this.props.getLocked(model)) {\n        dispatch((0, _buttonaction.click)(model, []));\n      }\n    }\n  }, {\n    key: \"getRowIndex\",\n    value: function getRowIndex(id, sourceCtrl) {\n      var newKey = id.slice(2);\n      var newKeyArray = newKey.split('__');\n      var _newKeyArray = _slicedToArray(newKeyArray, 1),\n        flexibleFieldKey = _newKeyArray[0];\n      // 单据头\n      if (flexibleFieldKey === sourceCtrl) {\n        return -1;\n      }\n      var row = sourceCtrl.split(flexibleFieldKey)[1].slice(1);\n      return Number(row);\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n      var model = this.props.model;\n      var sourceCtrl = model.getMetaProperty('sourceCtrl');\n      var items = model.meta.get('items', new _immutable.List());\n      var childItem = items.getIn([0, 'items']);\n      var rowindex;\n      // 弹性域字段对应的行号存入缓存\n      childItem && childItem.map(function (item) {\n        var itemId = item.get('id');\n        if (!rowindex) {\n          rowindex = _this2.getRowIndex(itemId, sourceCtrl);\n        }\n        (0, _memoryCacher.setPageData)(model.pageId, ['flexibleRowInfo', itemId], rowindex);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n      var _this$props2 = this.props,\n        model = _this$props2.model,\n        dispatch = _this$props2.dispatch;\n      var style = Object.assign({}, (0, _componentutil.getCommonStyle)(model), this.props.style);\n      // let _lock= getLocked(model);\n      /* 后端设置背景图片 */\n      var bgImg = model.getDataProperty('bgImg');\n      if (bgImg) {\n        // if (!/^http(s)?/.test(bgImg)) {\n        //   bgImg = model.getFormConfig().fileserver + bgImg;\n        // }\n        bgImg = (0, _componentutil.getImgFullPath)(model.getFormConfig().fileserver, bgImg);\n        style = Object.assign({}, style, {\n          backgroundImage: \"url(\".concat(bgImg, \")\")\n        });\n      }\n      var commonClass = (0, _componentutil.getCommonClass)(model);\n      var title = model.getMetaLocaleProperty('text');\n      // 说明：不由后台给位置，因为这样会需要在源字段上增加专门指令，改由面板直接向源字段索要位置\n      // let top = model.getMetaProperty('top');\n      // let left = model.getMetaProperty('left');\n      var sourceCtrl = model.getMetaProperty('sourceCtrl');\n      /*\n      flexibleMeta.isGridCell=true;//用来向表格发单元格定位\n      flexibleMeta.flexInfo={\n      rowKey:rowKey,\n      colId:colId,\n      flexItemColId:flexItemColId,\n      }\n      */\n      var isGridCell = model.getMetaProperty('isGridCell');\n      var flexInfo = {};\n      if (isGridCell === true) {\n        flexInfo = model.getMetaProperty('flexInfo').toJS();\n      }\n      var collapsible = model.getMetaProperty('collapsible'); // 可折叠\n      var defaultCollapse = model.getMetaProperty('defaultcollapse'); // 默认折叠\n      var clickable = model.getMetaProperty('clickable'); // 容器点击\n      var state = (0, _global.getGlobalState)();\n      var items = model.meta.get('items', new _immutable.List());\n      var children = (0, _componentutil.parseSubComponents)(items, model.pageId, state);\n      var childItem = items.getIn([0, 'items']);\n      if (items.size === 0 || childItem.size === 0) {\n        return null;\n      }\n      return /*#__PURE__*/_react[\"default\"].createElement(_FlexibleField[\"default\"], _extends({\n        id: model.key,\n        pageId: model.pageId,\n        sourceCtrl: sourceCtrl // 如果是单据体，这个sourceCtrl已经拼合了rowKey和colId\n        ,\n        isGridCell: isGridCell,\n        flexInfo: flexInfo,\n        dispatch: dispatch\n        // top={top}\n        // left={left}\n        ,\n        handleClick: function handleClick(e) {\n          return clickable && _this3.handleClick(e);\n        },\n        tryCloseFlexible: this.tryCloseFlexible,\n        closeFlexible: this.closeFlexible,\n        clickCloseFlexible: this.clickCloseFlexible,\n        style: style\n      }, commonClass, {\n        Collapsible: collapsible,\n        defaultCollapse: defaultCollapse,\n        Name: title\n      }), children, _react[\"default\"].Children.toArray((0, _componentutil.parseSubForms)(model.pageId, model.meta.get('id'), state)));\n    }\n  }]);\n  return KDFlexibleField;\n}(_react.Component), _KDFlexibleField.contextTypes = {\n  store: _propTypes[\"default\"].object\n}, _KDFlexibleField)) || _class) || _class);\nvar _default = exports[\"default\"] = KDFlexibleField;\n\n//# sourceURL=webpack://bos-platform/./src/component/web/KDFlexibleField.js?");

/***/ }),

/***/ "./src/component/web/KDFloatMenu.js":
/*!******************************************!*\
  !*** ./src/component/web/KDFloatMenu.js ***!
  \******************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.assign.js */ \"../../node_modules/core-js/modules/es.object.assign.js\");\n__webpack_require__(/*! core-js/modules/es.object.create.js */ \"../../node_modules/core-js/modules/es.object.create.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.get-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.set-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.set-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.reflect.construct.js */ \"../../node_modules/core-js/modules/es.reflect.construct.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.array.concat.js */ \"../../node_modules/core-js/modules/es.array.concat.js\");\n__webpack_require__(/*! core-js/modules/es.array.map.js */ \"../../node_modules/core-js/modules/es.array.map.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-string.js */ \"../../node_modules/core-js/modules/es.date.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\nvar _react = _interopRequireWildcard(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _reactDom = _interopRequireDefault(__webpack_require__(/*! react-dom */ \"webpack/sharing/consume/default/react-dom/react-dom?418d\"));\nvar _propTypes = _interopRequireDefault(__webpack_require__(/*! prop-types */ \"../../node_modules/prop-types/index.js\"));\nvar _immutable = __webpack_require__(/*! immutable */ \"webpack/sharing/consume/default/immutable/immutable?f2ca\");\nvar _global = __webpack_require__(/*! @/global */ \"./src/global/index.js\");\nvar _componentutil = __webpack_require__(/*! ../../util/componentutil */ \"./src/util/componentutil.js\");\nvar _FloatMenu = _interopRequireDefault(__webpack_require__(/*! ./base/FloatMenu */ \"./src/component/web/base/FloatMenu.js\"));\nvar _toolbaraction = __webpack_require__(/*! ../../action/toolbaraction */ \"./src/action/toolbaraction.js\");\nvar _VisibleLockWrap = _interopRequireDefault(__webpack_require__(/*! ../common/VisibleLockWrap */ \"./src/component/common/VisibleLockWrap.js\"));\nvar _AttachDataWrap = _interopRequireDefault(__webpack_require__(/*! ../common/AttachDataWrap */ \"./src/component/common/AttachDataWrap.js\"));\nvar _FloatingPanelWarp = _interopRequireDefault(__webpack_require__(/*! ../common/FloatingPanelWarp */ \"./src/component/common/FloatingPanelWarp.js\"));\nvar _ControlInfoCollect = _interopRequireDefault(__webpack_require__(/*! @/component/common/ControlInfoCollect */ \"./src/component/common/ControlInfoCollect.js\"));\nvar _waitUpdateValueUtil = __webpack_require__(/*! @/api/waitUpdateValueUtil */ \"./src/api/waitUpdateValueUtil.js\");\nvar _dec, _class, _KDFloatMenu;\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n/**\n * pc端主页浮动菜单\n */\nvar KDFloatMenu = exports[\"default\"] = (_dec = (0, _VisibleLockWrap[\"default\"])(false), (0, _AttachDataWrap[\"default\"])(_class = (0, _FloatingPanelWarp[\"default\"])(_class = _dec(_class = (0, _ControlInfoCollect[\"default\"])(_class = (_KDFloatMenu = /*#__PURE__*/function (_Component) {\n  _inherits(KDFloatMenu, _Component);\n  function KDFloatMenu() {\n    var _this;\n    _classCallCheck(this, KDFloatMenu);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _callSuper(this, KDFloatMenu, [].concat(args));\n    _this.floatMenuRef = /*#__PURE__*/_react[\"default\"].createRef();\n    return _this;\n  }\n  _createClass(KDFloatMenu, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$floatMenuRef, _floatMenuDom$dataset;\n      var floatMenuDom = _reactDom[\"default\"].findDOMNode((_this$floatMenuRef = this.floatMenuRef) === null || _this$floatMenuRef === void 0 ? void 0 : _this$floatMenuRef.current);\n      if ((_floatMenuDom$dataset = floatMenuDom.dataset) !== null && _floatMenuDom$dataset !== void 0 && _floatMenuDom$dataset.componentMount) {\n        floatMenuDom.dataset.componentMount = +new Date();\n      }\n    }\n  }, {\n    key: \"onHandleItemClick\",\n    value: function onHandleItemClick(id, operationKey) {\n      var _this2 = this;\n      // [id, operationKey]\n      var model = this.props.model;\n      var pageId = model.pageId;\n      var promise = (0, _waitUpdateValueUtil.waitUpdateValueComplete)(pageId);\n      promise.then(function () {\n        _this2.props.dispatch((0, _toolbaraction.menuItemClick)(_this2.props.model, [id, operationKey === undefined ? '' : operationKey]));\n      });\n    }\n  }, {\n    key: \"_getLock\",\n    value: function _getLock(model) {\n      // return getLocked(model)\n      return this.props.getLocked(model);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n      var model = this.props.model;\n      var meta = model.meta;\n      var style = (0, _componentutil.getCommonStyle)(model);\n      var top = meta.get('top'); // 距离顶部位置\n      var position = meta.get('al'); // 靠左，靠右显示[1：左，2: 底部，其他：右]\n      var alignPosition = 'right';\n      if (position === 1) {\n        style.left = 0;\n        style.top = top;\n        alignPosition = 'left';\n      } else if (position === 2) {\n        // 底部显示\n        style.bottom = 0;\n        alignPosition = 'bottom';\n      } else {\n        style.right = 0;\n        style.top = top;\n        alignPosition = 'right';\n      }\n      var components = (0, _componentutil.parseSubComponents)(model.meta.get('items', new _immutable.List()), model.pageId, (0, _global.getGlobalState)());\n      var componentMountTime = +new Date();\n      return /*#__PURE__*/_react[\"default\"].createElement(_FloatMenu[\"default\"], _extends({\n        ref: this.floatMenuRef,\n        id: meta.get('id')\n      }, this.props.attachData, {\n        style: style,\n        top: top,\n        \"data-component-mount\": componentMountTime,\n        \"data-floatmenu-direction\": alignPosition\n      }), components.map(function (item, index) {\n        return /*#__PURE__*/_react[\"default\"].cloneElement(item, {\n          onHandleItemClick: _this3.onHandleItemClick.bind(_this3)\n        });\n      }));\n    }\n  }]);\n  return KDFloatMenu;\n}(_react.Component), _KDFloatMenu.contextTypes = {\n  store: _propTypes[\"default\"].object\n}, _KDFloatMenu)) || _class) || _class) || _class) || _class);\n\n//# sourceURL=webpack://bos-platform/./src/component/web/KDFloatMenu.js?");

/***/ }),

/***/ "./src/component/web/KDFloatMenuItem.js":
/*!**********************************************!*\
  !*** ./src/component/web/KDFloatMenuItem.js ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.assign.js */ \"../../node_modules/core-js/modules/es.object.assign.js\");\n__webpack_require__(/*! core-js/modules/es.object.create.js */ \"../../node_modules/core-js/modules/es.object.create.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.get-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.set-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.set-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.reflect.construct.js */ \"../../node_modules/core-js/modules/es.reflect.construct.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\nvar _react = _interopRequireWildcard(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _componentutil = __webpack_require__(/*! ../../util/componentutil */ \"./src/util/componentutil.js\");\nvar _FloatMenu = __webpack_require__(/*! ./base/FloatMenu */ \"./src/component/web/base/FloatMenu.js\");\nvar _VisibleLockWrap = _interopRequireDefault(__webpack_require__(/*! ../common/VisibleLockWrap */ \"./src/component/common/VisibleLockWrap.js\"));\nvar _AttachDataWrap = _interopRequireDefault(__webpack_require__(/*! ../common/AttachDataWrap */ \"./src/component/common/AttachDataWrap.js\"));\nvar _FloatingPanelWarp = _interopRequireDefault(__webpack_require__(/*! ../common/FloatingPanelWarp */ \"./src/component/common/FloatingPanelWarp.js\"));\nvar _toolbaraction = __webpack_require__(/*! ../../action/toolbaraction */ \"./src/action/toolbaraction.js\");\nvar _waitUpdateValueUtil = __webpack_require__(/*! @/api/waitUpdateValueUtil */ \"./src/api/waitUpdateValueUtil.js\");\nvar _dec, _class;\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nvar KDFloatMenuItem = exports[\"default\"] = (_dec = (0, _VisibleLockWrap[\"default\"])(false), (0, _AttachDataWrap[\"default\"])(_class = (0, _FloatingPanelWarp[\"default\"])(_class = _dec(_class = /*#__PURE__*/function (_Component) {\n  _inherits(KDFloatMenuItem, _Component);\n  function KDFloatMenuItem() {\n    _classCallCheck(this, KDFloatMenuItem);\n    return _callSuper(this, KDFloatMenuItem, arguments);\n  }\n  _createClass(KDFloatMenuItem, [{\n    key: \"onHandleItemClick\",\n    value: function onHandleItemClick(key, operationKey) {\n      var _this = this;\n      var _this$props = this.props,\n        onHandleItemClick = _this$props.onHandleItemClick,\n        dispatch = _this$props.dispatch,\n        model = _this$props.model;\n      var pageId = model.pageId;\n      var promise = (0, _waitUpdateValueUtil.waitUpdateValueComplete)(pageId);\n      promise.then(function () {\n        if (onHandleItemClick) {\n          onHandleItemClick(key, operationKey); // 这里是有上级浮动菜单项的场景，发给后端的key 是父级的id\n        } else {\n          // 这是浮动菜单项自己单独使用的场景，发给后端的key 就是自己本身的id\n          dispatch((0, _toolbaraction.menuItemClick)(_this.props.model, [key, operationKey === undefined ? '' : operationKey]));\n        }\n      });\n    }\n  }, {\n    key: \"_getLock\",\n    value: function _getLock(model) {\n      return this.props.getLocked(model);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var model = this.props.model;\n      var text = model.getMetaLocaleProperty('text');\n      var operationKey = model.getMetaProperty('opk');\n      var id = model.key;\n      var style = (0, _componentutil.getCommonStyle)(model);\n      var fontClass = (0, _componentutil.getComponentDataProperty)(model, 'fontClass', 'fontClass', false);\n      var _getCommonClass = (0, _componentutil.getCommonClass)(model),\n        Grow = _getCommonClass.Grow,\n        Shrink = _getCommonClass.Shrink,\n        AlignSelf = _getCommonClass.AlignSelf;\n      return /*#__PURE__*/_react[\"default\"].createElement(_FloatMenu.FloatMenuItem, _extends({\n        id: id,\n        Grow: Grow,\n        Shrink: Shrink,\n        AlignSelf: AlignSelf\n      }, this.props.attachData, {\n        fontClass: fontClass,\n        operationKey: operationKey,\n        text: text,\n        style: style,\n        onClick: this.onHandleItemClick.bind(this, id, operationKey)\n      }));\n    }\n  }]);\n  return KDFloatMenuItem;\n}(_react.Component)) || _class) || _class) || _class);\n\n//# sourceURL=webpack://bos-platform/./src/component/web/KDFloatMenuItem.js?");

/***/ }),

/***/ "./src/component/web/KDFloatMenuPanel.js":
/*!***********************************************!*\
  !*** ./src/component/web/KDFloatMenuPanel.js ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.assign.js */ \"../../node_modules/core-js/modules/es.object.assign.js\");\n__webpack_require__(/*! core-js/modules/es.object.create.js */ \"../../node_modules/core-js/modules/es.object.create.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.get-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.set-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.set-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.reflect.construct.js */ \"../../node_modules/core-js/modules/es.reflect.construct.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.array.map.js */ \"../../node_modules/core-js/modules/es.array.map.js\");\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\nvar _react = _interopRequireWildcard(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _propTypes = _interopRequireDefault(__webpack_require__(/*! prop-types */ \"../../node_modules/prop-types/index.js\"));\nvar _immutable = __webpack_require__(/*! immutable */ \"webpack/sharing/consume/default/immutable/immutable?f2ca\");\nvar _global = __webpack_require__(/*! @/global */ \"./src/global/index.js\");\nvar _componentutil = __webpack_require__(/*! ../../util/componentutil */ \"./src/util/componentutil.js\");\nvar _FloatMenu = __webpack_require__(/*! ./base/FloatMenu */ \"./src/component/web/base/FloatMenu.js\");\nvar _VisibleLockWrap = _interopRequireDefault(__webpack_require__(/*! ../common/VisibleLockWrap */ \"./src/component/common/VisibleLockWrap.js\"));\nvar _AttachDataWrap = _interopRequireDefault(__webpack_require__(/*! ../common/AttachDataWrap */ \"./src/component/common/AttachDataWrap.js\"));\nvar _dec, _class, _KDFloatMenuPanel;\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nvar KDFloatMenuPanel = exports[\"default\"] = (_dec = (0, _VisibleLockWrap[\"default\"])(false), (0, _AttachDataWrap[\"default\"])(_class = _dec(_class = (_KDFloatMenuPanel = /*#__PURE__*/function (_Component) {\n  _inherits(KDFloatMenuPanel, _Component);\n  function KDFloatMenuPanel() {\n    _classCallCheck(this, KDFloatMenuPanel);\n    return _callSuper(this, KDFloatMenuPanel, arguments);\n  }\n  _createClass(KDFloatMenuPanel, [{\n    key: \"onHandleItemClick\",\n    value: function onHandleItemClick(key, operationKey) {\n      var onHandleItemClick = this.props.onHandleItemClick;\n      onHandleItemClick && onHandleItemClick(key, operationKey);\n    }\n\n    // _getLock (model) {\n    //   // return getLocked(model)\n    //   return this.props.getLocked(model)\n    // }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this = this;\n      var model = this.props.model;\n      var style = (0, _componentutil.getCommonStyle)(model);\n      // let commonClass = getCommonClass(model);\n      var children = (0, _componentutil.parseSubComponents)(model.meta.get('items', new _immutable.List()), model.pageId, (0, _global.getGlobalState)());\n      return /*#__PURE__*/_react[\"default\"].createElement(_FloatMenu.FloatMenuPanel, _extends({\n        id: model.meta.get('id'),\n        style: style\n      }, this.props.attachData), children.map(function (item, index) {\n        return /*#__PURE__*/_react[\"default\"].cloneElement(item, {\n          onHandleItemClick: _this.onHandleItemClick.bind(_this)\n        });\n      }));\n    }\n  }]);\n  return KDFloatMenuPanel;\n}(_react.Component), _KDFloatMenuPanel.contextTypes = {\n  store: _propTypes[\"default\"].object\n}, _KDFloatMenuPanel)) || _class) || _class);\n\n//# sourceURL=webpack://bos-platform/./src/component/web/KDFloatMenuPanel.js?");

/***/ }),

/***/ "./src/component/web/KDFontIcon.jsx":
/*!******************************************!*\
  !*** ./src/component/web/KDFontIcon.jsx ***!
  \******************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.filter.js */ \"../../node_modules/core-js/modules/es.array.filter.js\");\n__webpack_require__(/*! core-js/modules/es.array.for-each.js */ \"../../node_modules/core-js/modules/es.array.for-each.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.assign.js */ \"../../node_modules/core-js/modules/es.object.assign.js\");\n__webpack_require__(/*! core-js/modules/es.object.create.js */ \"../../node_modules/core-js/modules/es.object.create.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-properties.js */ \"../../node_modules/core-js/modules/es.object.define-properties.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptors.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptors.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.get-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.keys.js */ \"../../node_modules/core-js/modules/es.object.keys.js\");\n__webpack_require__(/*! core-js/modules/es.object.set-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.set-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.reflect.construct.js */ \"../../node_modules/core-js/modules/es.reflect.construct.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ \"../../node_modules/core-js/modules/web.dom-collections.for-each.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\n__webpack_require__(/*! core-js/modules/es.function.name.js */ \"../../node_modules/core-js/modules/es.function.name.js\");\nvar _react = _interopRequireDefault(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _immutable = __webpack_require__(/*! immutable */ \"webpack/sharing/consume/default/immutable/immutable?f2ca\");\nvar _componentutil = __webpack_require__(/*! ../../util/componentutil */ \"./src/util/componentutil.js\");\nvar _VisibleLockWrap = _interopRequireDefault(__webpack_require__(/*! ../common/VisibleLockWrap */ \"./src/component/common/VisibleLockWrap.js\"));\nvar _iconAction = __webpack_require__(/*! ../../action/iconAction */ \"./src/action/iconAction.js\");\nvar _tooltipaction = __webpack_require__(/*! ../../action/tooltipaction */ \"./src/action/tooltipaction.js\");\nvar _FontIcon = _interopRequireDefault(__webpack_require__(/*! ./base/FontIcon */ \"./src/component/web/base/FontIcon.jsx\"));\nvar _AttachDataWrap = _interopRequireDefault(__webpack_require__(/*! ../common/AttachDataWrap */ \"./src/component/common/AttachDataWrap.js\"));\nvar _PermissionControlWrap = _interopRequireDefault(__webpack_require__(/*! ../common/PermissionControlWrap */ \"./src/component/common/PermissionControlWrap.js\"));\nvar _FloatingPanelWarp = _interopRequireDefault(__webpack_require__(/*! ../common/FloatingPanelWarp */ \"./src/component/common/FloatingPanelWarp.js\"));\nvar _Slot = _interopRequireDefault(__webpack_require__(/*! @/component/common/Slot */ \"./src/component/common/Slot.jsx\"));\nvar _CtlInterceptors = __webpack_require__(/*! ../common/CtlInterceptors */ \"./src/component/common/CtlInterceptors.js\");\nvar _clickActionUtil = _interopRequireWildcard(__webpack_require__(/*! @/util/clickActionUtil */ \"./src/util/clickActionUtil.js\"));\nvar _UpdateShortCutWrap = _interopRequireDefault(__webpack_require__(/*! @/component/common/UpdateShortCutWrap */ \"./src/component/common/UpdateShortCutWrap.js\"));\nvar _ControlLoadingWrap = _interopRequireDefault(__webpack_require__(/*! ../common/ControlLoadingWrap */ \"./src/component/common/ControlLoadingWrap.js\"));\nvar _customProperty = __webpack_require__(/*! @/util/customProperty */ \"./src/util/customProperty.js\");\nvar _keyCodeTool = __webpack_require__(/*! @/util/keyCodeTool */ \"./src/util/keyCodeTool.js\");\nvar _waitUpdateValueUtil = __webpack_require__(/*! @/api/waitUpdateValueUtil */ \"./src/api/waitUpdateValueUtil.js\");\nvar _tooltipsUtil = __webpack_require__(/*! @/util/tooltipsUtil */ \"./src/util/tooltipsUtil.js\");\nvar _dec, _dec2, _class;\n/**\n * @description 字体图标/矢量图标\n * @date 2017-10-10\n */\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nvar KDFontIcon = (_dec = (0, _VisibleLockWrap[\"default\"])(false), _dec2 = (0, _PermissionControlWrap[\"default\"])(), (0, _AttachDataWrap[\"default\"])(_class = (0, _FloatingPanelWarp[\"default\"])(_class = _dec(_class = (0, _ControlLoadingWrap[\"default\"])(_class = _dec2(_class = (0, _UpdateShortCutWrap[\"default\"])(_class = /*#__PURE__*/function (_React$Component) {\n  _inherits(KDFontIcon, _React$Component);\n  function KDFontIcon(props) {\n    var _this;\n    _classCallCheck(this, KDFontIcon);\n    _this = _callSuper(this, KDFontIcon, [props]);\n    _this.handleMouseDown = function (e) {\n      /**\n       * 在卡片视图中使用时，点击操作针对当前卡片，在mousedown时候 选中卡片。\n       */\n      // const { model, activeRow } = this.props\n      // const clickable = getComponentDataProperty(model, 'clickable', 'clickable', false) !== false\n      // if (clickable && activeRow) {\n      //   e.stopPropagation()\n      //   this.props.activeRow(true)\n      //   this.props.onClick(e)\n      // }\n    };\n    _this.handleClick = function (e) {\n      var _this$props = _this.props,\n        model = _this$props.model,\n        beforeAction = _this$props.beforeAction,\n        onClick = _this$props.onClick;\n      // const locked = getLocked(model)\n      var locked = _this._getLock(model);\n      var clickable = (0, _componentutil.getComponentDataProperty)(model, 'clickable', 'clickable', false);\n      var controlType = model.getMetaProperty('type');\n      if (locked || clickable === false) return;\n      e.stopPropagation();\n      // 经过拦截器链拦截\n      var pageId = model.pageId,\n        key = model.key;\n      var promise = beforeAction && beforeAction(e, {\n        controlType: controlType,\n        controlKey: key\n      }) || (0, _waitUpdateValueUtil.waitUpdateValueComplete)(pageId);\n      var event = e && e.nativeEvent;\n      promise.then(function () {\n        onClick && onClick(event);\n        (0, _CtlInterceptors.interceptActionFn)(_objectSpread(_objectSpread({}, _this.props), {}, {\n          click: function click() {\n            return _this.props.dispatch(_iconAction.click.apply(void 0, arguments));\n          }\n        }), _clickActionUtil[\"default\"]);\n      });\n    };\n    _this.updateTipsConfig = _this.updateTipsConfig.bind(_assertThisInitialized(_this));\n    _this.forAutoTestActions = {\n      click: _iconAction.click\n    };\n    _this.state = {\n      tipsConfig: null\n    };\n    return _this;\n  }\n  _createClass(KDFontIcon, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props2 = this.props,\n        model = _this$props2.model,\n        isFromCardRow = _this$props2.isFromCardRow,\n        data = _this$props2.data,\n        option = _this$props2.option;\n      var tips = (0, _tooltipsUtil.getRowPropertyTips)({\n        model: model,\n        isFromCardRow: isFromCardRow,\n        data: data,\n        option: option\n      });\n      if (tips) this.updateTipsConfig(model.pageId, model.key, tips);\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      var _this$props3 = this.props,\n        model = _this$props3.model,\n        isFromCardRow = _this$props3.isFromCardRow,\n        data = _this$props3.data,\n        option = _this$props3.option;\n      var tips = (0, _tooltipsUtil.getRowPropertyTips)({\n        model: model,\n        isFromCardRow: isFromCardRow,\n        data: data,\n        option: option\n      });\n      var nextTips = (0, _tooltipsUtil.getRowPropertyTips)({\n        model: nextProps.model,\n        isFromCardRow: nextProps.isFromCardRow,\n        data: nextProps.data,\n        option: nextProps.option\n      });\n      if (!(0, _immutable.is)(tips, nextTips)) {\n        var _nextProps$model, _nextProps$model2;\n        this.updateTipsConfig((_nextProps$model = nextProps.model) === null || _nextProps$model === void 0 ? void 0 : _nextProps$model.pageId, (_nextProps$model2 = nextProps.model) === null || _nextProps$model2 === void 0 ? void 0 : _nextProps$model2.key, nextTips);\n      }\n    }\n  }, {\n    key: \"updateTipsConfig\",\n    value: function updateTipsConfig(pageId, id, tips) {\n      if (!tips) {\n        // 可以通过u指令设置tips为空\n        this.setState({\n          tipsConfig: null\n        });\n        return;\n      }\n      var tipsConfig = this.state.tipsConfig;\n      if (!tipsConfig) {\n        tipsConfig = (0, _tooltipsUtil.createTipsConfig)(pageId, id);\n        this.setState({\n          tipsConfig: tipsConfig\n        });\n      }\n      (0, _tooltipsUtil.saveTipsInfo)(tipsConfig, tips);\n    }\n  }, {\n    key: \"_getLock\",\n    value: function _getLock(model) {\n      if (this.props.getCardLocked) {\n        return this.props.getCardLocked(model);\n      } // 如果FontIcon作为卡片里的字段，优先用卡片字段锁定判断接口\n      // return getLocked(model)\n      return this.props.getLocked(model);\n    }\n  }, {\n    key: \"_getVisible\",\n    value: function _getVisible(model) {\n      if (this.props.getCardVisible) {\n        return this.props.getCardVisible(model);\n      } // 如果FontIcon作为卡片里的字段，优先用卡片字段可见效判断接口\n      // return getVisible(model)\n      return this.props.getVisible(model);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _getkeyCodeInfoByOpk;\n      var _this$props4 = this.props,\n        model = _this$props4.model,\n        loading = _this$props4.loading,\n        isFromCardRow = _this$props4.isFromCardRow,\n        dispatch = _this$props4.dispatch,\n        data = _this$props4.data,\n        option = _this$props4.option;\n      var tipsConfig = this.state.tipsConfig;\n      // const visibility = getVisible(model)\n      var visibility = this._getVisible(model);\n      if (!visibility) return null;\n      var rowKey = (0, _clickActionUtil.getRowIndex)(this.props);\n      // const locked = getLocked(model)\n      var locked = this._getLock(model);\n      var style = (0, _componentutil.getCommonStyle)(model);\n      var _getCommonClass = (0, _componentutil.getCommonClass)(model),\n        Grow = _getCommonClass.Grow,\n        Shrink = _getCommonClass.Shrink,\n        AlignSelf = _getCommonClass.AlignSelf;\n      var fontClass = (0, _componentutil.getComponentDataProperty)(model, 'fontClass', 'fontClass', false) || 'kdfont kdfont-tianjia';\n      var needHoverClass = (0, _componentutil.getComponentDataProperty)(model, 'needHoverClass', 'needHoverClass', false);\n      var hoverClass = (0, _componentutil.getComponentDataProperty)(model, 'hoverClass', 'hoverClass', false);\n      var clickable = (0, _componentutil.getComponentDataProperty)(model, 'clickable', 'clickable', false);\n      var isThemeColor = model && model.getMetaProperty('fc') === 'themeColor';\n      var title = (0, _componentutil.getComponentDataProperty)(model, 'title', 'title', false);\n      var opk = model.getMetaProperty('opk');\n      var shortCutTips = (_getkeyCodeInfoByOpk = (0, _keyCodeTool.getkeyCodeInfoByOpk)(opk)) === null || _getkeyCodeInfoByOpk === void 0 ? void 0 : _getkeyCodeInfoByOpk.name;\n\n      // 卡片动态修改字体图标数据\n      var fontIconRowProperty = isFromCardRow && (0, _customProperty.getControlRowProperty)({\n        data: data,\n        model: model,\n        option: option\n      });\n      if (fontIconRowProperty) {\n        if (fontIconRowProperty.get('fontClass') !== undefined) {\n          fontClass = fontIconRowProperty.get('fontClass');\n        }\n        if (fontIconRowProperty.get('title') !== undefined) {\n          title = fontIconRowProperty.get('title');\n        }\n        style = (0, _customProperty.mergeCustomStyle)(style, fontIconRowProperty);\n      }\n      var showLoading = loading && loading.showLoading;\n      var loadingRowKey = loading && loading.rowKey;\n      var shouldShowLoading;\n      if (isFromCardRow) {\n        shouldShowLoading = showLoading && loadingRowKey !== 'undefined' && rowKey === loadingRowKey;\n      } else {\n        shouldShowLoading = showLoading;\n      }\n      var slot = !shouldShowLoading && tipsConfig ? /*#__PURE__*/_react[\"default\"].createElement(_Slot[\"default\"], {\n        tips: tipsConfig\n      }) : null;\n      return /*#__PURE__*/_react[\"default\"].createElement(_FontIcon[\"default\"], _extends({\n        model: model,\n        isThemeColor: isThemeColor,\n        fontClass: fontClass,\n        needHoverClass: needHoverClass !== false,\n        hoverClass: hoverClass,\n        onMouseDown: this.handleMouseDown,\n        handleClick: this.handleClick,\n        clickable: clickable,\n        locked: locked,\n        title: title,\n        Grow: Grow,\n        Shrink: Shrink,\n        AlignSelf: AlignSelf,\n        style: style,\n        dispatch: dispatch,\n        showFormByTips: function showFormByTips() {\n          return dispatch(_tooltipaction.showFormByTips.apply(void 0, arguments));\n        },\n        userLocal: model.getUserLocale(),\n        slot: slot,\n        showLoading: shouldShowLoading,\n        opk: opk,\n        shortCutTips: shortCutTips,\n        id: model.key\n      }, this.props.attachData));\n    }\n  }]);\n  return KDFontIcon;\n}(_react[\"default\"].Component)) || _class) || _class) || _class) || _class) || _class) || _class);\nvar _default = exports[\"default\"] = KDFontIcon;\n\n//# sourceURL=webpack://bos-platform/./src/component/web/KDFontIcon.jsx?");

/***/ }),

/***/ "./src/component/web/KDGridContainer.js":
/*!**********************************************!*\
  !*** ./src/component/web/KDGridContainer.js ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.filter.js */ \"../../node_modules/core-js/modules/es.array.filter.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.create.js */ \"../../node_modules/core-js/modules/es.object.create.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-properties.js */ \"../../node_modules/core-js/modules/es.object.define-properties.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptors.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptors.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.get-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.set-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.set-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.reflect.construct.js */ \"../../node_modules/core-js/modules/es.reflect.construct.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.array.find.js */ \"../../node_modules/core-js/modules/es.array.find.js\");\n__webpack_require__(/*! core-js/modules/es.array.find-index.js */ \"../../node_modules/core-js/modules/es.array.find-index.js\");\n__webpack_require__(/*! core-js/modules/es.array.for-each.js */ \"../../node_modules/core-js/modules/es.array.for-each.js\");\n__webpack_require__(/*! core-js/modules/es.array.splice.js */ \"../../node_modules/core-js/modules/es.array.splice.js\");\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\n__webpack_require__(/*! core-js/modules/es.object.assign.js */ \"../../node_modules/core-js/modules/es.object.assign.js\");\n__webpack_require__(/*! core-js/modules/es.object.keys.js */ \"../../node_modules/core-js/modules/es.object.keys.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ \"../../node_modules/core-js/modules/web.dom-collections.for-each.js\");\nvar _react = _interopRequireWildcard(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _global = _interopRequireWildcard(__webpack_require__(/*! @/global */ \"./src/global/index.js\"));\nvar _componentutil = __webpack_require__(/*! ../../util/componentutil */ \"./src/util/componentutil.js\");\nvar _appModelFunction = __webpack_require__(/*! ../../model/appModelFunction */ \"./src/model/appModelFunction.js\");\nvar _GridContainer = _interopRequireDefault(__webpack_require__(/*! ./base/GridContainer */ \"./src/component/web/base/GridContainer.jsx\"));\nvar _VisibleLockWrap = _interopRequireDefault(__webpack_require__(/*! ../common/VisibleLockWrap */ \"./src/component/common/VisibleLockWrap.js\"));\nvar _AttachDataWrap = _interopRequireDefault(__webpack_require__(/*! ../common/AttachDataWrap */ \"./src/component/common/AttachDataWrap.js\"));\nvar _gridcontaineraction = __webpack_require__(/*! ../../action/gridcontaineraction */ \"./src/action/gridcontaineraction.js\");\nvar _immutable = __webpack_require__(/*! immutable */ \"webpack/sharing/consume/default/immutable/immutable?f2ca\");\nvar _console = _interopRequireDefault(__webpack_require__(/*! @/api/console */ \"./src/api/console.js\"));\nvar _ControlInfoCollect = _interopRequireDefault(__webpack_require__(/*! @/component/common/ControlInfoCollect */ \"./src/component/common/ControlInfoCollect.js\"));\nvar _client = __webpack_require__(/*! @/action/actionname/global/custom/client */ \"./src/action/actionname/global/custom/client/index.js\");\nvar _symbolConst = __webpack_require__(/*! @/constant/symbolConst */ \"./src/constant/symbolConst.js\");\nvar _GlobalDataCacher = __webpack_require__(/*! @/model/GlobalDataCacher */ \"./src/model/GlobalDataCacher.js\");\nvar _dec, _class; // 栅格容器控件\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n// const GridContainer = React.lazy(() => import('./base/GridContainer'))\nvar KDGridContainer = (_dec = (0, _VisibleLockWrap[\"default\"])(true, true), (0, _AttachDataWrap[\"default\"])(_class = _dec(_class = (0, _ControlInfoCollect[\"default\"])(_class = /*#__PURE__*/function (_Component) {\n  _inherits(KDGridContainer, _Component);\n  function KDGridContainer(props) {\n    var _this;\n    _classCallCheck(this, KDGridContainer);\n    _this = _callSuper(this, KDGridContainer, [props]);\n    _this.onSetAsDefault = function (id) {\n      var _this$props = _this.props,\n        model = _this$props.model,\n        dispatch = _this$props.dispatch;\n      dispatch((0, _gridcontaineraction.setDefault)(model, id));\n    };\n    _this.onDeleteScheme = function (id) {\n      var _this$props2 = _this.props,\n        model = _this$props2.model,\n        dispatch = _this$props2.dispatch;\n      dispatch((0, _gridcontaineraction.deleteScheme)(model, id));\n    };\n    _this.onSchemeSelect = function (id) {\n      var _this$props3 = _this.props,\n        model = _this$props3.model,\n        dispatch = _this$props3.dispatch;\n      dispatch((0, _gridcontaineraction.switchScheme)(model, id));\n    };\n    _this.onEdit = function () {\n      var _this$props4 = _this.props,\n        model = _this$props4.model,\n        dispatch = _this$props4.dispatch;\n      dispatch((0, _gridcontaineraction.edit)(model));\n    };\n    _this.onSave = function () {\n      var _this$props5 = _this.props,\n        model = _this$props5.model,\n        dispatch = _this$props5.dispatch;\n      dispatch((0, _gridcontaineraction.save)(model, _this.state.layout));\n    };\n    _this.onRefresh = function () {\n      var _this$props6 = _this.props,\n        model = _this$props6.model,\n        dispatch = _this$props6.dispatch;\n      dispatch((0, _gridcontaineraction.refresh)(model));\n    };\n    _this.onSaveAs = function (type) {\n      var _this$props7 = _this.props,\n        model = _this$props7.model,\n        dispatch = _this$props7.dispatch;\n      dispatch((0, _gridcontaineraction.saveAs)(model, _this.state.layout, type));\n    };\n    _this.onLayoutChange = _this.onLayoutChange.bind(_assertThisInitialized(_this));\n    _this.onItemDeleteClick = _this.onItemDeleteClick.bind(_assertThisInitialized(_this));\n    _this.onBarAddCardClick = _this.onBarAddCardClick.bind(_assertThisInitialized(_this));\n    _this.onBarCancelEdit = _this.onBarCancelEdit.bind(_assertThisInitialized(_this));\n    _this.onBarEditEnd = _this.onBarEditEnd.bind(_assertThisInitialized(_this));\n    _this.refreshForm = _this.refreshForm.bind(_assertThisInitialized(_this));\n    _this.cardRefresh = _this.cardRefresh.bind(_assertThisInitialized(_this));\n    _this.state = {\n      layout: ''\n    };\n    return _this;\n  }\n  _createClass(KDGridContainer, [{\n    key: \"onLayoutChange\",\n    value: function onLayoutChange(layout) {\n      // todo：保存栅格布局信息到服务端\n      // this.props.onLayoutChange&&this.props.onLayoutChange(layout)\n      // console.warn(`layout changed: ${JSON.stringify(layout)}`);\n\n      var oldLayout = this.getLayout();\n      oldLayout = JSON.parse(oldLayout);\n      var oldLayoutItem;\n      layout.forEach(function (item) {\n        oldLayoutItem = oldLayout.find(function (tem) {\n          return tem.i == item.i;\n        });\n        if (oldLayoutItem && oldLayoutItem.formId !== undefined) {\n          item.formId = oldLayoutItem.formId; // 保留formId\n        }\n      });\n      this.updateLayout(layout);\n    }\n\n    // 删除卡片(i:cardId)\n  }, {\n    key: \"onItemDeleteClick\",\n    value: function onItemDeleteClick(i) {\n      // alert(`delete item: ${i}`)\n\n      // let oldLayout = this.getLayout();\n      // oldLayout = JSON.parse(oldLayout);\n      // let delIndex = oldLayout.findIndex(item=>item.i==i);\n      // if(delIndex>=0){\n      //   oldLayout.splice(delIndex,1);\n      //   this.updateLayout(oldLayout);\n      // }\n\n      var _this$props8 = this.props,\n        model = _this$props8.model,\n        dispatch = _this$props8.dispatch;\n      dispatch((0, _gridcontaineraction.deleteCard)(model, i));\n    }\n\n    // 新增卡片\n  }, {\n    key: \"onBarAddCardClick\",\n    value: function onBarAddCardClick() {\n      var _this$props9 = this.props,\n        model = _this$props9.model,\n        dispatch = _this$props9.dispatch;\n      dispatch((0, _gridcontaineraction.addCard)(model, this.state.layout)); // 编辑态才有'新增卡片'功能\n    }\n\n    // 取消\n  }, {\n    key: \"onBarCancelEdit\",\n    value: function onBarCancelEdit() {\n      var _this$props10 = this.props,\n        model = _this$props10.model,\n        dispatch = _this$props10.dispatch;\n      dispatch((0, _gridcontaineraction.editCancel)(model, []));\n    }\n\n    // 完成\n  }, {\n    key: \"onBarEditEnd\",\n    value: function onBarEditEnd() {\n      var isSetDefault = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var _this$props11 = this.props,\n        model = _this$props11.model,\n        dispatch = _this$props11.dispatch;\n      (0, _GlobalDataCacher.setData)(_symbolConst.KEY_UI_ACTION, {\n        pageId: model.pageId,\n        key: model.key,\n        tableName: 'click',\n        type: model.meta.get('type'),\n        methodName: 'itemClick',\n        opk: 'editEnd'\n      });\n      dispatch((0, _gridcontaineraction.editEnd)(model, this.state.layout, isSetDefault));\n    }\n  }, {\n    key: \"updateLayout\",\n    value: function updateLayout(layout) {\n      layout = JSON.stringify(layout);\n      var model = this.props.model;\n      var pageId = model.pageId,\n        key = model.key;\n      var canEdit = (0, _componentutil.getComponentDataProperty)(model, 'canEdit', 'canEdit', false);\n      if (canEdit === true) {\n        // 编辑态,数据保存到state\n        this.setState({\n          layout: layout\n        });\n        // 编辑态的postData\n        this.props.dispatch((0, _appModelFunction.convertAppModelFunctionAction)((0, _appModelFunction.batchActions)((0, _appModelFunction.setControlPostValue)(pageId, key, {\n          layout: layout\n        }))));\n      } else {\n        this.props.dispatch((0, _appModelFunction.convertAppModelFunctionAction)((0, _appModelFunction.batchActions)((0, _appModelFunction.setControlPostValue)(pageId, key, {\n          layout: layout\n        }), (0, _appModelFunction.setDataProperty)(pageId, key, 'layout', layout))));\n      }\n    }\n  }, {\n    key: \"getLayout\",\n    value: function getLayout() {\n      var model = this.props.model;\n      return (0, _componentutil.getComponentDataProperty)(model, 'layout', 'layout', false) || '[]';\n    }\n  }, {\n    key: \"addCard\",\n    value: function addCard() {\n      var layoutStr = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '[]';\n      var newCardObj = arguments.length > 1 ? arguments[1] : undefined;\n      var layout = JSON.parse(layoutStr);\n      newCardObj.forEach(function (item) {\n        var formId = item.formId,\n          cardId = item.cardId,\n          config = item.config;\n        // let {model} = this.props;\n        // let cols = getComponentDataProperty(model, 'cols', 'cols', false);\n        /*\n         * 新增卡片说明：\n         * 只要y的数值是大于当前行数(比如当前共4行)的值,栅格容器就会自动把新卡片放到最后一行(新起的一行)，且中间不会有空行=。\n         * 这里存在问题：当某行只有一个卡片且跨行了，会导致新增卡片不是最后一行，效果类似插入一行.\n         */\n        // let y = layout.length;\n        if (cardId == undefined || cardId == '') {\n          _console[\"default\"].warn(\"add card fail, card Id is valid: \".concat(cardId));\n        } else {\n          var cardIdIndex = layout.findIndex(function (item) {\n            return item.i == cardId;\n          });\n          if (cardIdIndex > -1) {\n            _console[\"default\"].warn(\"add card fail, card Id already exists: \".concat(cardId));\n          } else {\n            // let width = cols>=4?4:cols; //动态新增卡片,整体>=4列,就默认占4列,否则占整行\n            // layout.push({\n            //     x: 0,\n            //     y: y,\n            //     w: width,\n            //     h: 1,\n            //     i: cardId,\n            //     formId: formId\n            // });\n\n            /*\n             * 参数说明:\n             * x: 0, //起始列\n             * y: y, //起始行\n             * w: width, //占几列\n             * h: 1, //占几行\n             */\n            layout.push({\n              x: config.x,\n              y: config.y,\n              w: config.w,\n              h: config.h,\n              i: cardId,\n              formId: formId\n            });\n          }\n        }\n      });\n      return JSON.stringify(layout); // 返回string\n    }\n  }, {\n    key: \"deleteCard\",\n    value: function deleteCard() {\n      var layoutStr = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '[]';\n      var deleteCardId = arguments.length > 1 ? arguments[1] : undefined;\n      var layout = JSON.parse(layoutStr);\n      // let {model} = this.props;\n      var delIndex = layout.findIndex(function (item) {\n        return item.i === deleteCardId;\n      });\n      if (delIndex > -1) {\n        layout.splice(delIndex, 1); // 清理掉要删除的卡片信息\n      } else {\n        _console[\"default\"].warn(\"delate card fail, card Id not be found: \".concat(deleteCardId, \" \"));\n      }\n      return JSON.stringify(layout); // 返回string\n    }\n\n    // 向卡片中单据发送'刷新请求(通过页面自定义事件完成)\n  }, {\n    key: \"refreshForm\",\n    value: function refreshForm(pageId) {\n      if (pageId && this.cardRefresh(pageId)) {\n        // console.warn(`refresh Form , pageId: ${pageId}`)\n        var key = '';\n        var args = [_client.CUSTOM_EVENT_REFRESH_FROMGRID_CONTAINER, key, JSON.stringify({\n          pageId: pageId\n        })];\n        _global[\"default\"][_global.INVOKE_CUSTOM_EVENT](pageId, '', args);\n      } else {\n        _console[\"default\"].warn(\"refresh Form cancel, pageId: \".concat(pageId));\n      }\n    }\n\n    // 卡片中单据是否需要发送'刷新请求'\n  }, {\n    key: \"cardRefresh\",\n    value: function cardRefresh(pageId) {\n      if (pageId) {\n        var config = (0, _appModelFunction.getFormConfig)(pageId)(this.props.model.state);\n        var openStyle = config && config.openStyle;\n        if (openStyle && (openStyle.cardRefresh === 'false' || openStyle.cardRefresh === false)) {\n          return false;\n        }\n      }\n      return true;\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      var _this2 = this;\n      var newCanEdit = nextProps.model.getDataProperty('canEdit');\n      var oldCanEdit = this.props.model.getDataProperty('canEdit');\n      // 状态切换: 进入编辑态(生成临时的layout);退出编辑态,则清空临时布局layout\n      if (newCanEdit !== undefined && newCanEdit !== oldCanEdit) {\n        this.setState({\n          layout: newCanEdit === true ? this.getLayout() : '[]'\n        });\n      }\n      var newCard = nextProps.model.getDataProperty('newCard');\n      var oldCard = this.props.model.getDataProperty('newCard');\n      // 动态新增卡片(编辑状态下)\n      if (newCanEdit === true && newCard !== undefined && newCard !== oldCard) {\n        // todo:新增一个卡片(处理临时编辑的layout)\n        var newLayout = this.addCard(this.state.layout, newCard.toJS());\n        this.setState({\n          layout: newLayout\n        });\n      }\n      var newDeleteCard = nextProps.model.getDataProperty('deleteCard');\n      var oldDeleteCard = this.props.model.getDataProperty('deleteCard');\n      // 动态删除卡片(编辑状态下)\n      if (newCanEdit === true && newDeleteCard !== undefined && newDeleteCard !== oldDeleteCard) {\n        // todo:删除一个卡片(处理临时编辑的layout)\n        var _newLayout = this.deleteCard(this.state.layout, newDeleteCard);\n        this.setState({\n          layout: _newLayout\n        }, function () {\n          // this.props.model.setDataProperty('deleteCard', '');\n          _this2.props.dispatch((0, _appModelFunction.convertAppModelFunctionAction)((0, _appModelFunction.setDataProperty)(nextProps.model.pageId, nextProps.model.key, 'deleteCard', '')));\n        });\n        // todo:删除卡片对应的pageId(栅格容器的subForms里的)\n        // 暂时不用处理,也可正常使用\n      }\n      var newRefreshId = nextProps.model.getDataProperty('refreshId');\n      var oldRefreshId = this.props.model.getDataProperty('refreshId');\n      // 发送refresh请求\n      if (newRefreshId !== undefined && newRefreshId !== oldRefreshId) {\n        this.refreshForm(nextProps.model.pageId);\n      }\n    }\n  }, {\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps, nextState) {\n      var diff = !(0, _immutable.is)(nextState, this.state) || !(0, _immutable.is)(nextProps.model.componentData, this.props.model.componentData) || !(0, _immutable.is)(nextProps.model.meta, this.props.model.meta);\n      return diff;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _getComponentDataProp, _getComponentDataProp2, _getComponentDataProp3;\n      // const schemeGroup = [\n      //     {\n      //         type: 'global',\n      //         name: '全局方案',\n      //         items: [\n      //             {\n      //                 name: '全局方案1',\n      //                 id: 'id01',\n      //                 canDelete: true,\n      //                 canSetAsDefault: true\n      //             },\n      //             {\n      //                 name: '全局方案2',\n      //                 id: 'id02',\n      //                 canDelete: true,\n      //                 canSetAsDefault: true\n      //             },\n      //             {\n      //                 name: '全局方案3',\n      //                 id: 'id03',\n      //                 canDelete: true,\n      //                 canSetAsDefault: true\n      //             },\n      //         ]\n      //     },\n      //     {\n      //         type: 'personal',\n      //         name: '个性方案',\n      //         items: [\n      //             {\n      //                 name: '个性方案1',\n      //                 id: 'id11',\n      //                 canDelete: true,\n      //                 canSetAsDefault: true\n      //             },\n      //             {\n      //                 name: '个性方案2',\n      //                 id: 'id12',\n      //                 canDelete: true,\n      //                 canSetAsDefault: true\n      //             },\n      //             {\n      //                 name: '个性方案3',\n      //                 id: 'id13',\n      //                 canDelete: true,\n      //                 canSetAsDefault: true\n      //             },\n      //         ]\n      //     },\n      //     {\n      //         type: 'share',\n      //         name: '共享方案',\n      //         items: [\n      //             {\n      //                 name: '共享方案1',\n      //                 id: 'id21',\n      //                 canDelete: true,\n      //                 canSetAsDefault: true\n      //             },\n      //             {\n      //                 name: '共享方案2',\n      //                 id: 'id22',\n      //                 canDelete: true,\n      //                 canSetAsDefault: true\n      //             },\n      //             {\n      //                 name: '共享方案3',\n      //                 id: 'id23',\n      //                 canDelete: true,\n      //                 canSetAsDefault: true\n      //             },\n      //         ]\n      //     }\n      // ]\n      // const meta = {\n      //     // editMode: 'newStyle',\n      //     isEditMode: false, // 是否正在编辑\n      //     editable: true, // false则置灰编辑按钮\n      //     schemeGroup: schemeGroup, // 方案选择下拉列表\n      //     canSave: true,\n      //     defaultSchemeId: 'id01',\n      //     selectedSchemeId: 'id21',\n      //     saveSTList: [{ // saveSchemeTypeList\n      //         type: 'global',\n      //         name: '全局方案',\n      //     },\n      //     {\n      //         type: 'personal',\n      //         name: '个性方案',\n      //     },\n      //     {\n      //         type: 'share',\n      //         name: '共享方案',\n      //     }],\n      //     onSetAsDefault: this.onSetAsDefault,\n      //     onDeleteScheme: this.onDeleteScheme,\n      //     onSchemeSelect: this.onSchemeSelect,\n      //     onBarAddCardClick: this.onBarAddCardClick,\n      //     onEdit: this.onEdit,\n      //     onRefresh: this.onRefresh,\n      //     onSaveAs: this.onSaveAs,\n      //     onSave: this.onSave,\n      //     onBarCancelEdit: this.onBarCancelEdit\n      // }\n      var events = {\n        onSetAsDefault: this.onSetAsDefault,\n        onDeleteScheme: this.onDeleteScheme,\n        onSchemeSelect: this.onSchemeSelect,\n        onBarAddCardClick: this.onBarAddCardClick,\n        onEdit: this.onEdit,\n        onSave: this.onSave,\n        onRefresh: this.onRefresh,\n        onSaveAs: this.onSaveAs,\n        onBarCancelEdit: this.onBarCancelEdit\n      };\n      var model = this.props.model;\n      var style = Object.assign({}, (0, _componentutil.getCommonStyle)(model), this.props.style);\n      var _getCommonClass = (0, _componentutil.getCommonClass)(model),\n        Grow = _getCommonClass.Grow,\n        Shrink = _getCommonClass.Shrink,\n        AlignSelf = _getCommonClass.AlignSelf;\n      var portalScheme = (_getComponentDataProp = (0, _componentutil.getComponentDataProperty)(model, 'portalScheme', 'portalScheme', false)) === null || _getComponentDataProp === void 0 ? void 0 : _getComponentDataProp.toJS(); // 是否可编辑(改布局,增删卡片)\n      var homePageSchemeData = portalScheme ? _objectSpread(_objectSpread({}, events), portalScheme) : null;\n      var canEdit = (0, _componentutil.getComponentDataProperty)(model, 'canEdit', 'canEdit', false); // 是否可编辑(改布局,增删卡片)\n      var layout = canEdit === true ? this.state.layout : this.getLayout(); // 栅格布局信息(编辑态取state中值,否则取store中值)\n      layout = JSON.parse(layout); // 服务端存储类型为string列数量\n      var cols = (0, _componentutil.getComponentDataProperty)(model, 'cols', 'cols', false); // 列数\n      var rowHeight = (0, _componentutil.getComponentDataProperty)(model, 'rowHeight', 'rowHeight', false); // 行高\n      var refreshId = (0, _componentutil.getComponentDataProperty)(model, 'refreshId', 'refreshId', false);\n      var setDefaultVisible = (0, _componentutil.getComponentDataProperty)(model, 'setDefaultVisible', 'setDefaultVisible', false); // 是否显示设为默认功能按钮\n      var rootPageId = (0, _appModelFunction.getRootPageId)()(model.state);\n      // 单元格margin\n      var layoutMargin = (_getComponentDataProp2 = (0, _componentutil.getComponentDataProperty)(model, 'layoutMargin', 'layoutMargin', false)) === null || _getComponentDataProp2 === void 0 ? void 0 : _getComponentDataProp2.toJS();\n      // 容器的padding\n      var containerPadding = (_getComponentDataProp3 = (0, _componentutil.getComponentDataProperty)(model, 'containerPadding', 'containerPadding', false)) === null || _getComponentDataProp3 === void 0 ? void 0 : _getComponentDataProp3.toJS();\n      var showEditTool = (0, _componentutil.getComponentDataProperty)(model, 'showEditTool', 'showEditTool', false); // 编辑态是否显示工具栏，默认true\n      var hideSchemeEdit = (0, _componentutil.getComponentDataProperty)(model, 'hideSchemeEdit', 'hideSchemeEdit', false); // 是否可隐藏编辑按钮\n      var hideSchemeSwitch = (0, _componentutil.getComponentDataProperty)(model, 'hideSchemeSwitch', 'hideSchemeSwitch', false); // 是否可隐藏切换按钮\n      // test data\n      // canEdit = true;\n\n      return /*#__PURE__*/_react[\"default\"].createElement(_GridContainer[\"default\"], _extends({\n        id: model.key,\n        pageId: model.pageId,\n        state: (0, _global.getGlobalState)(),\n        style: style,\n        Grow: Grow,\n        Shrink: Shrink,\n        AlignSelf: AlignSelf,\n        canEdit: canEdit,\n        layout: layout,\n        cols: cols,\n        rowHeight: rowHeight,\n        setDefaultVisible: setDefaultVisible,\n        onLayoutChange: this.onLayoutChange,\n        onItemDeleteClick: this.onItemDeleteClick,\n        onBarAddCardClick: this.onBarAddCardClick,\n        onBarCancelEdit: this.onBarCancelEdit,\n        onBarEditEnd: this.onBarEditEnd,\n        refreshForm: this.refreshForm,\n        refreshId: refreshId,\n        rootPageId: rootPageId,\n        layoutMargin: layoutMargin,\n        containerPadding: containerPadding,\n        homePageSchemeData: homePageSchemeData,\n        showEditTool: showEditTool,\n        hideSchemeEdit: hideSchemeEdit,\n        hideSchemeSwitch: hideSchemeSwitch\n      }, this.props.attachData));\n    }\n  }]);\n  return KDGridContainer;\n}(_react.Component)) || _class) || _class) || _class);\nvar _default = exports[\"default\"] = KDGridContainer;\n\n//# sourceURL=webpack://bos-platform/./src/component/web/KDGridContainer.js?");

/***/ }),

/***/ "./src/component/web/KDHomePageTab.js":
/*!********************************************!*\
  !*** ./src/component/web/KDHomePageTab.js ***!
  \********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.from.js */ \"../../node_modules/core-js/modules/es.array.from.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.array.slice.js */ \"../../node_modules/core-js/modules/es.array.slice.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\n__webpack_require__(/*! core-js/modules/es.function.name.js */ \"../../node_modules/core-js/modules/es.function.name.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.assign.js */ \"../../node_modules/core-js/modules/es.object.assign.js\");\n__webpack_require__(/*! core-js/modules/es.object.create.js */ \"../../node_modules/core-js/modules/es.object.create.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-properties.js */ \"../../node_modules/core-js/modules/es.object.define-properties.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptors.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptors.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.get-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.keys.js */ \"../../node_modules/core-js/modules/es.object.keys.js\");\n__webpack_require__(/*! core-js/modules/es.object.set-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.set-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.reflect.construct.js */ \"../../node_modules/core-js/modules/es.reflect.construct.js\");\n__webpack_require__(/*! core-js/modules/es.regexp.exec.js */ \"../../node_modules/core-js/modules/es.regexp.exec.js\");\n__webpack_require__(/*! core-js/modules/es.regexp.to-string.js */ \"../../node_modules/core-js/modules/es.regexp.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.array.concat.js */ \"../../node_modules/core-js/modules/es.array.concat.js\");\n__webpack_require__(/*! core-js/modules/es.array.filter.js */ \"../../node_modules/core-js/modules/es.array.filter.js\");\n__webpack_require__(/*! core-js/modules/es.array.find.js */ \"../../node_modules/core-js/modules/es.array.find.js\");\n__webpack_require__(/*! core-js/modules/es.array.find-index.js */ \"../../node_modules/core-js/modules/es.array.find-index.js\");\n__webpack_require__(/*! core-js/modules/es.array.for-each.js */ \"../../node_modules/core-js/modules/es.array.for-each.js\");\n__webpack_require__(/*! core-js/modules/es.array.includes.js */ \"../../node_modules/core-js/modules/es.array.includes.js\");\n__webpack_require__(/*! core-js/modules/es.array.index-of.js */ \"../../node_modules/core-js/modules/es.array.index-of.js\");\n__webpack_require__(/*! core-js/modules/es.array.is-array.js */ \"../../node_modules/core-js/modules/es.array.is-array.js\");\n__webpack_require__(/*! core-js/modules/es.array.map.js */ \"../../node_modules/core-js/modules/es.array.map.js\");\n__webpack_require__(/*! core-js/modules/es.date.now.js */ \"../../node_modules/core-js/modules/es.date.now.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-string.js */ \"../../node_modules/core-js/modules/es.date.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.string.includes.js */ \"../../node_modules/core-js/modules/es.string.includes.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ \"../../node_modules/core-js/modules/web.dom-collections.for-each.js\");\n__webpack_require__(/*! core-js/modules/web.timers.js */ \"../../node_modules/core-js/modules/web.timers.js\");\nvar _react = _interopRequireDefault(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _propTypes = _interopRequireDefault(__webpack_require__(/*! prop-types */ \"../../node_modules/prop-types/index.js\"));\nvar _immutable = __webpack_require__(/*! immutable */ \"webpack/sharing/consume/default/immutable/immutable?f2ca\");\nvar _global = __webpack_require__(/*! @/global */ \"./src/global/index.js\");\nvar _HomePageTab = __webpack_require__(/*! ./base/HomePageTab */ \"./src/component/web/base/HomePageTab.js\");\nvar _HomePageVirtualTab = __webpack_require__(/*! ./base/HomePageTab/HomePageVirtualTab */ \"./src/component/web/base/HomePageTab/HomePageVirtualTab.js\");\nvar _componentutil = __webpack_require__(/*! ../../util/componentutil */ \"./src/util/componentutil.js\");\nvar _VisibleLockWrap = _interopRequireDefault(__webpack_require__(/*! ../common/VisibleLockWrap */ \"./src/component/common/VisibleLockWrap.js\"));\nvar _appModelFunction = __webpack_require__(/*! ../../model/appModelFunction */ \"./src/model/appModelFunction.js\");\nvar _AttachDataWrap = _interopRequireDefault(__webpack_require__(/*! ../common/AttachDataWrap */ \"./src/component/common/AttachDataWrap.js\"));\nvar _homePageTabAction = __webpack_require__(/*! ../../action/homePageTabAction */ \"./src/action/homePageTabAction.js\");\nvar _memoryCacher = __webpack_require__(/*! @/model/memoryCacher */ \"./src/model/memoryCacher.js\");\nvar _homePageTabAction2 = __webpack_require__(/*! @/action/homePageTabAction */ \"./src/action/homePageTabAction.js\");\nvar _serverproperties = __webpack_require__(/*! @/constant/serverproperties */ \"./src/constant/serverproperties.js\");\nvar _index = __webpack_require__(/*! @/action/actionname/control/homePageTab/server/index */ \"./src/action/actionname/control/homePageTab/server/index.js\");\nvar _symbolConst = __webpack_require__(/*! @/constant/symbolConst */ \"./src/constant/symbolConst.js\");\nvar _GlobalDataCacher = __webpack_require__(/*! @/model/GlobalDataCacher */ \"./src/model/GlobalDataCacher.js\");\nvar _langUtil = __webpack_require__(/*! @/util/langUtil */ \"./src/util/langUtil.js\");\nvar _dec, _class, _KDHomePageTab;\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nvar KDHomePageTab = (_dec = (0, _VisibleLockWrap[\"default\"])(false), (0, _AttachDataWrap[\"default\"])(_class = _dec(_class = (_KDHomePageTab = /*#__PURE__*/function (_React$Component) {\n  _inherits(KDHomePageTab, _React$Component);\n  function KDHomePageTab(props) {\n    var _this;\n    _classCallCheck(this, KDHomePageTab);\n    _this = _callSuper(this, KDHomePageTab, [props]);\n    _this.reNameVirtualTab = function (arg) {\n      var appId = arg.appId,\n        pageId = arg.pageId,\n        tabName = arg.tabName;\n      var virtualTabData = _this.state.virtualTabData;\n      if (!appId || !pageId || !virtualTabData.size) return;\n      var existIndex = virtualTabData.findIndex(function (item) {\n        return item.get('appId') === appId;\n      });\n      if (existIndex !== -1) {\n        virtualTabData = virtualTabData.update(existIndex, function (item) {\n          return item.update('tabs', function (val) {\n            var existTabIndex = val.findIndex(function (tab) {\n              return tab.get('pageId') === pageId;\n            });\n            if (existTabIndex === -1) return val;\n            return val.update(existTabIndex, function (tab) {\n              return tab.set('tabName', tabName);\n            });\n          });\n        });\n        _this.setState({\n          virtualTabData: virtualTabData\n        });\n      }\n    };\n    _this.handleReNameVirtualTab = function (args) {\n      if (!args) return;\n      if (Array.isArray(args)) {\n        for (var i = 0; i < args.length; i++) {\n          _this.reNameVirtualTab(args[i]);\n        }\n      } else {\n        _this.reNameVirtualTab(args);\n      }\n    };\n    _this.cancelInsightFixMode = function (pageId) {\n      var _getData;\n      // 新版交互切换页签的时候,如果智能洞察页面处于固定模式，需要取消\n      if ((_getData = (0, _GlobalDataCacher.getData)(_symbolConst.KEY_FIX_INSIGHT_PANEL)) !== null && _getData !== void 0 && _getData.isFixationMode && pageId) {\n        (0, _GlobalDataCacher.setData)(_symbolConst.KEY_FIX_INSIGHT_PANEL, {\n          isFixationMode: false,\n          pageId: pageId\n        });\n      }\n    };\n    // 激活页签工作台\n    _this.activeTabHomePage = function (args) {\n      // 把应用下虚拟页签都变为不激活\n      if (args) {\n        var _args$ = args[0],\n          appId = _args$.appId,\n          pageId = _args$.pageId;\n        if (!appId) return;\n        _this.prevVirtualTab = pageId;\n        var virtualTabData = _this.state.virtualTabData;\n        if (virtualTabData.size) {\n          virtualTabData = virtualTabData.map(function (item) {\n            if (item.get('appId') === appId) {\n              return item.update('tabs', function (val) {\n                return val.map(function (it) {\n                  return it.update('isActive', function () {\n                    return false;\n                  });\n                });\n              });\n            }\n            return item;\n          });\n          _this.setState({\n            virtualTabData: virtualTabData\n          });\n        }\n      }\n    };\n    // activate 激活页签\n    _this.handleActiveTab = function (data) {\n      var _this$appItems;\n      if (!(data !== null && data !== void 0 && data.length)) return;\n      _this.timer && clearTimeout(_this.timer);\n      var _data$ = data[0],\n        pageId = _data$.pageId,\n        appId = _data$.appId;\n      var appTab = (_this$appItems = _this.appItems) === null || _this$appItems === void 0 ? void 0 : _this$appItems.find(function (item) {\n        return item.pageId === pageId;\n      });\n      // 如果是应用页签不需要进行处理\n      if (!appTab) {\n        if (!appId) {\n          var _this$activeApp, _virtualTabData$find;\n          // 从当前激活的应用下找pageId，找得到就是当前应用 兼容二次打开相同子单据的场景\n          var currentActiveAppId = (_this$activeApp = _this.activeApp) === null || _this$activeApp === void 0 ? void 0 : _this$activeApp.appId;\n          var virtualTabData = _this.state.virtualTabData;\n          var currVirtualTab = (_virtualTabData$find = virtualTabData.find(function (item) {\n            return item.get('appId') === currentActiveAppId;\n          })) === null || _virtualTabData$find === void 0 ? void 0 : _virtualTabData$find.get('tabs');\n          var isExistPageId = (currVirtualTab === null || currVirtualTab === void 0 ? void 0 : currVirtualTab.size) && currVirtualTab.find(function (item) {\n            return item.get('pageId') === pageId;\n          });\n          if (isExistPageId) {\n            _this.setActiveVirtualTab([{\n              pageId: pageId,\n              appId: currentActiveAppId\n            }]);\n          }\n        } else {\n          _this.setActiveVirtualTab(data);\n        }\n      } else {\n        // 激活应用页签 加延时是为了解决打开还没激活应用的二级页签的场景，此时同一个指令过来，先激活应用再添加虚拟页签，如果是这种场景就不处理页签焦点切换，也不记录上一个选中焦点，否则会与页面下方焦点不一致\n        _this.timer = setTimeout(function () {\n          _this.activeTabHomePage([appTab]);\n        }, 0);\n      }\n    };\n    _this.handeleCloseAppTab = function (data) {\n      if (!data) return;\n      var appId = data === null || data === void 0 ? void 0 : data.appId;\n      if (appId) {\n        // 删除app 下的虚拟页签\n        var virtualTabData = _this.state.virtualTabData;\n        if (virtualTabData.size) {\n          virtualTabData = virtualTabData.filterNot(function (item) {\n            return item.get('appId') === appId;\n          });\n          _this.setState({\n            virtualTabData: virtualTabData\n          });\n        }\n      }\n    };\n    _this.handleReleasePage = function (pageId) {\n      // 处理那种通过退出按钮直接退出的场景，这时候只需要考虑当前的应用和当前激活页签匹配的场景\n      // 业务可能同时发送多个页签表单的closeWindow，这时state还未更新完成，取值是旧的。利用setTimeout规避该问题\n      setTimeout(function () {\n        var _this$activeApp2, _virtualTabData$find2;\n        var virtualTabData = _this.state.virtualTabData;\n        if (!virtualTabData.size || !((_this$activeApp2 = _this.activeApp) !== null && _this$activeApp2 !== void 0 && _this$activeApp2.appId)) return;\n        // 一旦页面释放，不是当前激活的页签也需要删除，兼容替换当前页面的场景\n        // 如果释放的pageId 不在当前应用下的虚拟页签，就无需进行删除,否则会影响焦点的设置 --- 场景：页面类型是在容器内打开 showType 为3\n        var currVirtualTabs = (_virtualTabData$find2 = virtualTabData.find(function (item) {\n          return item.get('appId') === _this.activeApp.appId;\n        })) === null || _virtualTabData$find2 === void 0 ? void 0 : _virtualTabData$find2.get('tabs');\n        var isInCurrApp = currVirtualTabs === null || currVirtualTabs === void 0 ? void 0 : currVirtualTabs.find(function (item) {\n          return item.get('pageId') === pageId;\n        });\n        if (isInCurrApp) {\n          _this.delVirtualTab([{\n            appId: _this.activeApp.appId,\n            pageId: pageId\n          }]);\n        }\n      }, 0);\n    };\n    // 兼容替换当前页面得场景 - 需要更新记录的上一个激活页签\n    _this.handleModifyVirtualTab = function (args) {\n      if (args) {\n        var virtualTabData = _this.state.virtualTabData;\n        var prePageId = args.prePageId,\n          pageId = args.pageId,\n          tabName = args.tabName,\n          appId = args.appId;\n        if (virtualTabData.size) {\n          virtualTabData = virtualTabData.map(function (item) {\n            if (item.get('appId') === appId) {\n              return item.update('tabs', function (val) {\n                return val.map(function (it) {\n                  if (it.get('pageId') === prePageId) {\n                    _this.prevVirtualTab = pageId;\n                    return it.merge({\n                      pageId: pageId,\n                      tabName: tabName\n                    });\n                  }\n                  return it;\n                });\n              });\n            }\n            return item;\n          });\n          _this.setState({\n            virtualTabData: virtualTabData\n          });\n        }\n      }\n    };\n    _this.clickFix = function (args) {\n      _this.props.dispatch((0, _homePageTabAction.clickFix)(_this.props.model, args));\n    };\n    _this.selectTab = function (item) {\n      var model = _this.props.model;\n      var pageId = model.pageId;\n      item.tabPageId = pageId;\n      var tabId = model.getMetaProperty('tabid');\n      (0, _memoryCacher.publishControlMethod)(pageId, tabId, 'clickTab', item);\n    };\n    // 关闭虚拟页签 上一个选中页签\n    _this.closeVirtualTab = function (item) {\n      var _this$activeApp3;\n      // 如果上一个激活的是应用页签，那么直接把删除的页签删除就行--兼容从列表->子单据->列表->子单据->删除当前子单据的场景\n      var nextFocusTab = ''; // 下一个选中的页签\n      var virtualTabData = _this.state.virtualTabData;\n      if (_this.prevVirtualTab !== ((_this$activeApp3 = _this.activeApp) === null || _this$activeApp3 === void 0 ? void 0 : _this$activeApp3.pageId) && virtualTabData.size) {\n        var _virtualTabData$find3;\n        var currVirtualTabs = (_virtualTabData$find3 = virtualTabData.find(function (item) {\n          return item.get('appId') === _this.activeApp.appId;\n        })) === null || _virtualTabData$find3 === void 0 ? void 0 : _virtualTabData$find3.get('tabs');\n        var nextActiveTabIndex = _this.getNextActiveTabIndex(currVirtualTabs, item); // 这里下一个选中index 不会不存在\n        if (nextActiveTabIndex !== -1) {\n          var _currVirtualTabs$get;\n          nextFocusTab = (_currVirtualTabs$get = currVirtualTabs.get(nextActiveTabIndex)) === null || _currVirtualTabs$get === void 0 ? void 0 : _currVirtualTabs$get.get('pageId');\n        }\n      } else {\n        var _virtualTabData$find4;\n        // 上一个激活是应用页签，这里需要区分目前关闭的页签是否包含当前激活页签\n        var currActiveVirtualTabId = (_virtualTabData$find4 = virtualTabData.find(function (item) {\n          return item.get('appId') === _this.activeApp.appId;\n        })) === null || _virtualTabData$find4 === void 0 || (_virtualTabData$find4 = _virtualTabData$find4.get('tabs')) === null || _virtualTabData$find4 === void 0 || (_virtualTabData$find4 = _virtualTabData$find4.find(function (item) {\n          return item.get('isActive');\n        })) === null || _virtualTabData$find4 === void 0 ? void 0 : _virtualTabData$find4.get('pageId');\n        var includeActiveTab = Array.isArray(item) && item.find(function (it) {\n          return it.pageId === currActiveVirtualTabId;\n        });\n        nextFocusTab = includeActiveTab ? _this.prevVirtualTab : currActiveVirtualTabId;\n      }\n      var param = {\n        nextFocusTab: nextFocusTab,\n        delTabs: item\n      };\n      _this.props.dispatch((0, _homePageTabAction2.closeVirturalTab)(_this.props.model, param)); // 兼容焦点与页面展示不一致的问题，把下一个要选中的页签直接告诉后端\n    };\n    // 加入收藏\n    _this.addToCollection = function (item) {\n      _this.props.dispatch((0, _homePageTabAction2.addToCollectionAction)(_this.props.model, item));\n    };\n    // 在浏览器页签中打开\n    _this.openInNewWindow = function (item) {\n      _this.props.dispatch((0, _homePageTabAction2.openInNewWindowAction)(_this.props.model, item));\n    };\n    // 在系统页签中打开\n    _this.openInSystemTab = function (item) {\n      _this.props.dispatch((0, _homePageTabAction2.openInSystemTabAction)(_this.props.model, item));\n    };\n    // 选中虚拟页签\n    _this.selectVirtualTab = function (item) {\n      _this.props.dispatch((0, _homePageTabAction2.selectVirturalTab)(_this.props.model, item));\n    };\n    _this.selectTabWorkBench = function (item) {\n      _this.props.dispatch((0, _homePageTabAction2.selectTabHomePage)(_this.props.model, {\n        pageId: item.pageId\n      }));\n      var controlType = _this.props.model.meta.get('type');\n      var controlId = _this.props.model.meta.get('id');\n      (0, _GlobalDataCacher.setData)(_symbolConst.KEY_UI_ACTION, {\n        pageId: _this.props.model.pageId,\n        controlName: '新版首页导航',\n        key: controlId,\n        type: controlType,\n        startTime: Date.now(),\n        tableName: 'click',\n        methodName: 'itemClick',\n        opk: 'selectTabHomePage'\n      });\n    };\n    // 改变顶部菜单顺序\n    _this.changeAppItems = function (fixedAppItems, notFixedAppItems) {\n      var model = _this.props.model;\n      _this.changeAppItemsData = [].concat(_toConsumableArray(notFixedAppItems), _toConsumableArray(fixedAppItems));\n      var appItems = _this.changeAppItemsData.map(function (item) {\n        return item.pageId;\n      });\n      (0, _global.doGlobalDispatch)((0, _appModelFunction.convertAppModelFunctionAction)((0, _appModelFunction.setAppItemSubForms)(model.pageId, model.getMetaProperty('tabid'), (0, _immutable.fromJS)(appItems))));\n    };\n    // 改变二级页签顺序\n    _this.changeVirtualTabData = function (newVirtualTabData) {\n      var virtualTabData = _this.state.virtualTabData;\n      if (virtualTabData.size && newVirtualTabData.length) {\n        var appId = newVirtualTabData[0].appId;\n        if (!appId) return;\n        var existIndex = virtualTabData.findIndex(function (item) {\n          return item.get('appId') === appId;\n        });\n        if (existIndex !== -1) {\n          virtualTabData = virtualTabData.update(existIndex, function (item) {\n            return item.update('tabs', function () {\n              return (0, _immutable.fromJS)(newVirtualTabData);\n            });\n          });\n          _this.setState({\n            virtualTabData: virtualTabData\n          });\n        }\n      }\n    };\n    _this.state = {\n      virtualTabData: (0, _immutable.List)()\n    };\n    _this.prevVirtualTab = null; // 记录上一个虚拟页签\n    _this.prevAppTab = {}; // 记录上一个应用页签\n    _this.changeAppItemsData = []; // 记录上一次appItem的数据\n    _this.control = {\n      // 埋点需要用到\n      controlType: _this.props.model.meta.get('type'),\n      controlId: _this.props.model.meta.get('id')\n    };\n    return _this;\n  }\n  _createClass(KDHomePageTab, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n      // 如果是新交互的话\n      var model = this.props.model;\n      var homePageTabMode = model.getMetaProperty(_serverproperties.HPME_PAGE_TAB_MODE);\n      if (homePageTabMode === '1') {\n        var pageId = model.pageId,\n          key = model.key;\n        this.removeSubscribeControlMethod = (0, _memoryCacher.subscribeControlMethod)(pageId, key, 'directives', function (pageData) {\n          if (pageData === undefined) return;\n          setTimeout(function () {\n            // 因为reducer 那里做了延时，导致先执行控件方法再执行active 指令。实际应该是先执行active 指令再执行控件方法\n            setTimeout(function () {\n              _this2.invokeControlMethods(pageData);\n            }, 0);\n          }, 0);\n        });\n        this.removeGlobalCloseTabChangeListener = (0, _GlobalDataCacher.addDataChangeListener)(_symbolConst.KEY_CLOSE_TAB, this.handeleCloseAppTab);\n        this.removeActiveTabDataChangeListener = (0, _GlobalDataCacher.addDataChangeListener)(_symbolConst.KEY_ACTIVE_TAB, this.handleActiveTab); // 激活页签\n        this.removePageReleaseListener = (0, _GlobalDataCacher.addDataChangeListener)(_symbolConst.KEY_PAGE_RELEASE, this.handleReleasePage); // 兼容通过退出按钮退出的情况\n        this.removeReplacePageListener = (0, _GlobalDataCacher.addDataChangeListener)(_symbolConst.KEY_REPLACE_PAGE, this.handleModifyVirtualTab); // 兼容替换当前页面得场景\n        this.removeReNameNewPortalTabListener = (0, _GlobalDataCacher.addDataChangeListener)(_symbolConst.KEY_RENAME_NEW_PORTAL_TAB, this.handleReNameVirtualTab); // 兼容旧门户更新表单名的场景\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var _this$removeReNameNew;\n      this.removeSubscribeControlMethod && this.removeSubscribeControlMethod();\n      this.removeGlobalCloseTabChangeListener && this.removeGlobalCloseTabChangeListener();\n      this.removeActiveTabDataChangeListener && this.removeActiveTabDataChangeListener();\n      this.removePageReleaseListener && this.removePageReleaseListener();\n      this.removeReplacePageListener && this.removeReplacePageListener();\n      (_this$removeReNameNew = this.removeReNameNewPortalTabListener) === null || _this$removeReNameNew === void 0 || _this$removeReNameNew.call(this);\n      this.timer && clearTimeout(this.timer);\n    }\n  }, {\n    key: \"invokeControlMethods\",\n    value: function invokeControlMethods(events) {\n      var _this3 = this;\n      events.forEach(function (event) {\n        var methodName = event.methodname,\n          args = event.args;\n        switch (methodName) {\n          case _index.VIRTUALTAB_ADD_TAB:\n            _this3.addVirtualTab(args);\n            break;\n          case _index.VIRTUALTAB_DELETE_TAB:\n            _this3.delVirtualTab(args);\n            break;\n          case _index.VIRTUALTAB_ACTIVE_TAB:\n            _this3.setActiveVirtualTab(args);\n            break;\n          case _index.TAB_ACTIVE_TAB_HOME_PAGE:\n            _this3.activeTabHomePage(args);\n            break;\n          default:\n            console.info(\"\".concat(methodName, \" is not been implemented\"));\n        }\n      });\n    }\n\n    // 获取下一个激活页签的index\n  }, {\n    key: \"getNextActiveTabIndex\",\n    value: function getNextActiveTabIndex(originVirtualTabs, delVirtualTabData) {\n      var _this4 = this;\n      var isInDelArr = function isInDelArr(item) {\n        return delVirtualTabData.find(function (curr) {\n          return curr.pageId === item.get('pageId');\n        });\n      };\n      var nextActiveTabIndex = originVirtualTabs.findIndex(function (curr) {\n        return curr.get('isActive') && !isInDelArr(curr);\n      });\n      if (nextActiveTabIndex === -1) {\n        // 寻找上一个\n        nextActiveTabIndex = originVirtualTabs.findIndex(function (curr) {\n          return curr.get('pageId') === _this4.prevVirtualTab && !isInDelArr(curr);\n        });\n        if (nextActiveTabIndex === -1) {\n          // 删除项的下一个\n          var lastDelIndex = originVirtualTabs.findIndex(function (curr) {\n            var _delVirtualTabData;\n            return curr.get('pageId') === ((_delVirtualTabData = delVirtualTabData[delVirtualTabData.length - 1]) === null || _delVirtualTabData === void 0 ? void 0 : _delVirtualTabData.pageId);\n          });\n          if (lastDelIndex !== -1 && lastDelIndex !== originVirtualTabs.size - 1) {\n            // 删除项不是最后一个\n            nextActiveTabIndex = lastDelIndex + 1;\n          } else {\n            // 删除项是最后一个\n            var afterDelArr = originVirtualTabs.filterNot(function (item) {\n              return isInDelArr(item);\n            });\n            if (afterDelArr.size) {\n              var afterDelLastItem = afterDelArr.get(afterDelArr.size - 1);\n              nextActiveTabIndex = originVirtualTabs.findIndex(function (curr) {\n                return curr.get('pageId') === afterDelLastItem.get('pageId');\n              });\n            }\n          }\n        }\n      }\n      return nextActiveTabIndex;\n    }\n  }, {\n    key: \"addVirtualTab\",\n    value: function addVirtualTab(args) {\n      var _this5 = this;\n      if (args) {\n        this.timer && clearTimeout(this.timer);\n        var virtualTabData = this.state.virtualTabData;\n        args[0].isActive = true;\n        var _args$2 = args[0],\n          appId = _args$2.appId,\n          pageId = _args$2.pageId;\n        if (!appId) return;\n        if (virtualTabData.size) {\n          var existIndex = virtualTabData.findIndex(function (item) {\n            return item.get('appId') === appId;\n          });\n          if (existIndex !== -1) {\n            virtualTabData = virtualTabData.update(existIndex, function (item) {\n              return item.update('tabs', function (val) {\n                // 判断是否已存在，已存在就不添加 已和后端确认这里添加页签只会一个个添加，不会同时添加多个\n                var isExistTab = val.find(function (curr) {\n                  return curr.get('pageId') === pageId;\n                });\n                if (isExistTab) return val;\n                return val.map(function (it) {\n                  if (it.get('isActive')) {\n                    _this5.prevVirtualTab = it.get('pageId'); // 记录上一个虚拟页签，删除的时候需要用到\n                  }\n                  return it.update('isActive', function () {\n                    return false;\n                  });\n                }).concat((0, _immutable.fromJS)(args));\n              });\n            });\n          } else {\n            virtualTabData = virtualTabData.concat((0, _immutable.fromJS)([{\n              appId: appId,\n              tabs: args\n            }]));\n          }\n          this.setState({\n            virtualTabData: virtualTabData\n          });\n        } else {\n          this.setState({\n            virtualTabData: (0, _immutable.fromJS)([{\n              appId: appId,\n              tabs: args\n            }])\n          });\n        }\n      }\n    }\n  }, {\n    key: \"delVirtualTab\",\n    value: function delVirtualTab(args) {\n      var _this6 = this;\n      if (args) {\n        var virtualTabData = this.state.virtualTabData;\n        // 删除多个\n        var delVirtualTabData = args;\n        if ((delVirtualTabData === null || delVirtualTabData === void 0 ? void 0 : delVirtualTabData.length) < 1 || virtualTabData.size < 0) return;\n        if (virtualTabData.size) {\n          var isInDelArr = function isInDelArr(item) {\n            return delVirtualTabData.find(function (curr) {\n              return curr.pageId === item.get('pageId');\n            });\n          };\n          var appId = delVirtualTabData[0].appId; // 与后端确认不会有删除不同应用虚拟页签的场景\n          virtualTabData = virtualTabData.map(function (item) {\n            if (item.get('appId') === appId) {\n              return item.update('tabs', function (val) {\n                var _this6$activeApp;\n                // 当前激活 -> 上一个记录的 -> 删除项的下一个 -> 最后一个  先找到激活项再过滤\n                var newVal = val;\n                // 如果上一个激活的是应用页签，那么直接把删除的应用删除就行--兼容从列表->子单据->列表->子单据->删除当前子单据的场景\n                if (_this6.prevVirtualTab !== ((_this6$activeApp = _this6.activeApp) === null || _this6$activeApp === void 0 ? void 0 : _this6$activeApp.pageId)) {\n                  var nextActiveTabIndex = _this6.getNextActiveTabIndex(val, delVirtualTabData);\n                  nextActiveTabIndex !== -1 && (newVal = val.update(nextActiveTabIndex, function (item) {\n                    return item.set('isActive', true);\n                  }));\n                }\n                return newVal.filterNot(function (item) {\n                  return isInDelArr(item);\n                });\n              });\n            }\n            return item;\n          });\n          this.setState({\n            virtualTabData: virtualTabData\n          });\n        }\n      }\n    }\n  }, {\n    key: \"setActiveVirtualTab\",\n    value: function setActiveVirtualTab(args) {\n      var _this7 = this;\n      if (args) {\n        var _virtualTabData$find5;\n        var _args$3 = args[0],\n          appId = _args$3.appId,\n          pageId = _args$3.pageId;\n        this.cancelInsightFixMode(pageId);\n        if (!appId) return;\n        var virtualTabData = this.state.virtualTabData;\n        if (!virtualTabData.size) return;\n        var currActiveTab = (_virtualTabData$find5 = virtualTabData.find(function (item) {\n          return item.get('appId') === appId;\n        })) === null || _virtualTabData$find5 === void 0 || (_virtualTabData$find5 = _virtualTabData$find5.get('tabs')) === null || _virtualTabData$find5 === void 0 ? void 0 : _virtualTabData$find5.find(function (item) {\n          return item.get('isActive');\n        });\n        if ((currActiveTab === null || currActiveTab === void 0 ? void 0 : currActiveTab.get('pageId')) === pageId) return; // 如果要激活的页签已激活，就不用处理\n        virtualTabData = virtualTabData.map(function (item) {\n          if (item.get('appId') === appId) {\n            return item.update('tabs', function (val) {\n              return val.map(function (it) {\n                if (it.get('isActive')) {\n                  _this7.prevVirtualTab = it.get('pageId'); // 记录上一个虚拟页签，删除的时候需要用到\n                }\n                return it.update('isActive', function () {\n                  return it.get('pageId') === pageId;\n                });\n              });\n            });\n          }\n          return item;\n        });\n        this.setState({\n          virtualTabData: virtualTabData\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this8 = this;\n      var model = this.props.model;\n      var key = model.key,\n        pageId = model.pageId;\n      var state = (0, _global.getGlobalState)();\n      var style = (0, _componentutil.getCommonStyle)(model);\n      var locale = model.getUserLocale();\n      var tabId = model.getMetaProperty('tabid');\n      var homeTabKey = model.getMetaProperty('homeTabKey');\n      var homePageTabMode = model.getMetaProperty(_serverproperties.HPME_PAGE_TAB_MODE);\n      var tabCanFixed = (0, _componentutil.getComponentDataProperty)(model, 'tabCanFixed', 'tabCanFixed', false) || false;\n      var items = new _immutable.List();\n      var staticItems = []; // 静态页签\n      var appItems = []; // 应用页签\n      if (tabId) {\n        var active = state.getIn(['forms', pageId, 'data', tabId, 'currentTab'], 0);\n        var tab = (0, _componentutil.getMetaFromStateById)(tabId, pageId, (0, _global.getGlobalState)());\n        if (tab) {\n          var tabItems = tab.get('items') || (0, _immutable.List)();\n          // 可见性过滤\n          tabItems = tabItems.filter(function (item) {\n            var key = item.get('id');\n            return (0, _componentutil.getVisible)(model, key);\n          });\n          items = tabItems.map(function (item, index) {\n            var isActive = false;\n            var key = item.get('id');\n            if (active == 0 && index == 0) {\n              isActive = true;\n            } else if (active == key) {\n              isActive = true;\n            }\n            var title = (0, _langUtil.getValueOfLanguage)(item.get('text'), locale);\n            return (0, _immutable.Map)({\n              tabId: tabId,\n              key: key,\n              pageId: pageId,\n              title: title,\n              isActive: isActive,\n              isHome: index === 0,\n              isStatic: true,\n              isHomeTab: homeTabKey === key\n            });\n          });\n          staticItems = items.filter(function (it) {\n            return !it.get('isHomeTab');\n          }).toJS();\n          var dynamicPage = state.getIn(['forms', pageId, 'data', tabId, 'subForms']);\n          if (dynamicPage) {\n            // 获取锁定状态的tab列表\n            var fixedState = model.getDataProperty('fixedState') || new _immutable.List();\n            var fixedItems = new _immutable.List();\n            var unFixedItems = new _immutable.List();\n            var dynamicItems = dynamicPage.map(function (d_pageId, index) {\n              var title = (0, _appModelFunction.getFormCaption)(d_pageId)(state);\n              var appImageUrl = (0, _appModelFunction.getAppImageUrl)(d_pageId)(state);\n              var appId = (0, _appModelFunction.getBizAppId)(d_pageId)(state);\n              var isActive = false;\n              if (active == 0 && items.size == 0 && index == 0) {\n                isActive = true;\n              } else if (active == d_pageId) {\n                isActive = true;\n              }\n              return (0, _immutable.Map)({\n                tabId: tabId,\n                key: d_pageId,\n                appId: appId,\n                pageId: d_pageId,\n                title: title,\n                isActive: isActive,\n                canDelete: true,\n                canFixed: true,\n                isFixed: fixedState.indexOf(d_pageId) > -1 ? 1 : 0,\n                clickFix: _this8.clickFix,\n                index: index,\n                appImageUrl: appImageUrl\n              });\n              // return Map({ tabId, key: d_pageId, pageId: d_pageId, title, isActive, canDelete: true, isFixed: true, fixedState: 0, clickFix: this.clickFix, appId })\n            });\n            // 动态页签排序，锁定的在前\n            if (fixedState.size > 0) {\n              fixedState.map(function (item) {\n                dynamicItems.map(function (dynamicItem) {\n                  if (item === dynamicItem.get('pageId')) {\n                    fixedItems = fixedItems.push(dynamicItem);\n                  }\n                });\n              });\n              unFixedItems = dynamicItems.filter(function (item) {\n                return !fixedItems.includes(item);\n              });\n            } else {\n              unFixedItems = dynamicItems;\n            }\n            // 新门户非锁定在前,锁定在后,避免切换应用时，页签动效不一致\n            this.appItems = appItems = (0, _immutable.List)().concat(unFixedItems, fixedItems).toJS();\n            items = items.concat(fixedItems, unFixedItems);\n          }\n        }\n        if (active == -1) {\n          items = items.updateIn([items.size - 1, 'isActive'], function (value) {\n            return true;\n          });\n        }\n      }\n      var virtualTabs = (0, _immutable.List)(); // 虚拟页签\n      if (homePageTabMode === '1') {\n        var _this$activeApp4;\n        var activeAppTab = items.find(function (item) {\n          return item.get('isActive') && !item.get('isStatic');\n        });\n        if (activeAppTab) {\n          this.prevAppTab = this.activeApp = _objectSpread(_objectSpread({}, activeAppTab.toJS()), {}, {\n            active: true\n          });\n        } else {\n          // 如果上一个选中app 已没了就展示剩余应用的第一个\n          if (this.appItems) {\n            var isPrevAppExist = this.appItems.find(function (item) {\n              return item.pageId === _this8.prevAppTab.pageId;\n            });\n            this.activeApp = isPrevAppExist ? _objectSpread(_objectSpread({}, this.prevAppTab), {}, {\n              active: false\n            }) : _objectSpread(_objectSpread({}, this.appItems[0]), {}, {\n              active: false\n            });\n          }\n        }\n        var appId = (0, _appModelFunction.getBizAppId)((_this$activeApp4 = this.activeApp) === null || _this$activeApp4 === void 0 ? void 0 : _this$activeApp4.pageId)((0, _global.getGlobalState)()) || 'bos';\n        var virtualTabData = this.state.virtualTabData;\n        if (virtualTabData.size) {\n          var _virtualTabData$find6;\n          virtualTabs = ((_virtualTabData$find6 = virtualTabData.find(function (item) {\n            return item.get('appId') === appId;\n          })) === null || _virtualTabData$find6 === void 0 ? void 0 : _virtualTabData$find6.get('tabs')) || (0, _immutable.List)();\n        }\n        virtualTabs = virtualTabs.toJS();\n        if (this.changeAppItemsData.length) {\n          // 如果存在上次appitem数据，先使用该数据渲染\n          appItems = this.changeAppItemsData;\n          this.changeAppItemsData = [];\n        }\n      }\n      if (_immutable.List.isList(items)) {\n        items = items.toJS();\n      }\n      return homePageTabMode !== '1' ? /*#__PURE__*/_react[\"default\"].createElement(_HomePageTab.HomePageTab, _extends({\n        items: items,\n        style: style,\n        pageId: pageId,\n        tabCanFixed: tabCanFixed\n      }, this.props.attachData, {\n        selectTab: this.selectTab\n      })) : /*#__PURE__*/_react[\"default\"].createElement(_HomePageVirtualTab.HomePageVirtualTab, _extends({\n        staticItems: staticItems,\n        appItems: appItems,\n        control: this.control,\n        style: style,\n        pageId: pageId\n      }, this.props.attachData, {\n        selectTab: this.selectTab,\n        closeVirtualTab: this.closeVirtualTab,\n        selectVirtualTab: this.selectVirtualTab,\n        activeApp: this.activeApp,\n        virtualTabs: virtualTabs,\n        selectTabWorkBench: this.selectTabWorkBench,\n        addToCollection: this.addToCollection,\n        openInNewWindow: this.openInNewWindow,\n        openInSystemTab: this.openInSystemTab,\n        changeAppItems: this.changeAppItems,\n        changeVirtualTabData: this.changeVirtualTabData\n      }));\n    }\n  }]);\n  return KDHomePageTab;\n}(_react[\"default\"].Component), _KDHomePageTab.contextTypes = {\n  store: _propTypes[\"default\"].object\n}, _KDHomePageTab)) || _class) || _class);\nvar _default = exports[\"default\"] = KDHomePageTab;\n\n//# sourceURL=webpack://bos-platform/./src/component/web/KDHomePageTab.js?");

/***/ }),

/***/ "./src/component/web/KDIFrame.js":
/*!***************************************!*\
  !*** ./src/component/web/KDIFrame.js ***!
  \***************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.assign.js */ \"../../node_modules/core-js/modules/es.object.assign.js\");\n__webpack_require__(/*! core-js/modules/es.object.create.js */ \"../../node_modules/core-js/modules/es.object.create.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.get-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.set-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.set-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.reflect.construct.js */ \"../../node_modules/core-js/modules/es.reflect.construct.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\nvar _react = _interopRequireDefault(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _classnames2 = _interopRequireDefault(__webpack_require__(/*! classnames */ \"../../node_modules/classnames/index.js\"));\nvar _KDIFrame = _interopRequireDefault(__webpack_require__(/*! ./KDIFrame.less */ \"./src/component/web/KDIFrame.less\"));\nvar _IFrame = _interopRequireDefault(__webpack_require__(/*! ./base/IFrame */ \"./src/component/web/base/IFrame.js\"));\nvar _componentutil = __webpack_require__(/*! ../../util/componentutil */ \"./src/util/componentutil.js\");\nvar _commonUtils = _interopRequireDefault(__webpack_require__(/*! ../common/commonUtils */ \"./src/component/common/commonUtils.js\"));\nvar _toolUtils = __webpack_require__(/*! ../../util/toolUtils */ \"./src/util/toolUtils.js\");\nvar _VisibleLockWrap = _interopRequireDefault(__webpack_require__(/*! ../common/VisibleLockWrap */ \"./src/component/common/VisibleLockWrap.js\"));\nvar _AttachDataWrap = _interopRequireDefault(__webpack_require__(/*! ../common/AttachDataWrap */ \"./src/component/common/AttachDataWrap.js\"));\nvar _ControlInfoCollect = _interopRequireDefault(__webpack_require__(/*! @/component/common/ControlInfoCollect */ \"./src/component/common/ControlInfoCollect.js\"));\nvar _serverproperties = __webpack_require__(/*! @/constant/serverproperties */ \"./src/constant/serverproperties.js\");\nvar _requestParamsUtil = __webpack_require__(/*! @/util/requestParamsUtil */ \"./src/util/requestParamsUtil.js\");\nvar _dec, _class;\n/**\n * Iframe控件\n */\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nvar KDIFrame = (_dec = (0, _VisibleLockWrap[\"default\"])(false), (0, _AttachDataWrap[\"default\"])(_class = _dec(_class = (0, _ControlInfoCollect[\"default\"])(_class = /*#__PURE__*/function (_React$Component) {\n  _inherits(KDIFrame, _React$Component);\n  function KDIFrame() {\n    _classCallCheck(this, KDIFrame);\n    return _callSuper(this, KDIFrame, arguments);\n  }\n  _createClass(KDIFrame, [{\n    key: \"render\",\n    value: function render() {\n      var model = this.props.model;\n      var pageId = model.pageId;\n      var style = (0, _componentutil.getCommonStyle)(model);\n      var _getCommonClass = (0, _componentutil.getCommonClass)(model),\n        Grow = _getCommonClass.Grow,\n        Shrink = _getCommonClass.Shrink;\n\n      // 'url'是：InFrame模式下打开页面时带的参数，需要前端自动附加上http://xxx信息\n      var url = (0, _componentutil.getComponentDataProperty)(model, 'url', 'url', false);\n      // url是通过InFrame指令写入，value是常规写入\n      var value = (0, _componentutil.getComponentDataProperty)(model, 'value', 'value', false);\n      if (url) {\n        url = (0, _toolUtils.getClientUrl)(url);\n      }\n      var showFrameBorder = 0; // show iframe border [1:yes,0:no]\n      var scrolling = 'auto'; // show scrollbar or not [no,yes,auto]\n\n      var rootClassName = (0, _classnames2[\"default\"])(_defineProperty({}, _KDIFrame[\"default\"].root, true), (0, _commonUtils[\"default\"])({\n        Grow: Grow,\n        Shrink: Shrink\n      }));\n      var disabledPointer = (0, _componentutil.getComponentDataProperty)(model, 'disabledPointer', 'disabledPointer', false); // true:不响应鼠标单击事件\n      var allowfullscreen = (0, _componentutil.getComponentDataProperty)(model, 'allowfullscreen', 'allowfullscreen', false);\n      var noLoading = (0, _componentutil.getComponentDataProperty)(model, 'noLoading', 'noLoading', false); // 是否关闭iframe控件自带的loading动画\n      var disableAddPageId = (0, _componentutil.getComponentDataProperty)(model, _serverproperties.DISABLE_ADD_PAGE_ID, _serverproperties.DISABLE_ADD_PAGE_ID, false); // 是否禁止添加pageId参数\n      var innerPageFlag = (0, _componentutil.getComponentDataProperty)(model, _serverproperties.INNER_PAGE_FLAG, _serverproperties.INNER_PAGE_FLAG, false); // 内部页面标识\n\n      // test data\n      // url = 'https://www.baidu.com/';\n      // disabledPointer = true;\n      var tempUrl = url || value;\n      var changedUrl = tempUrl;\n      var isOurPageData = innerPageFlag === undefined ? (0, _toolUtils.isOurPage)(tempUrl) : innerPageFlag;\n      if (!disableAddPageId) {\n        changedUrl = (0, _toolUtils.setUrlParam)(tempUrl, isOurPageData ? 'sourcePageId' : 'pageId', pageId);\n      }\n      changedUrl = (0, _requestParamsUtil.appendParamsToUrl)((0, _componentutil.setAccountId)(changedUrl), {\n        model: model\n      }, {\n        pageId: disableAddPageId || isOurPageData\n      });\n      return /*#__PURE__*/_react[\"default\"].createElement(\"div\", _extends({\n        className: rootClassName,\n        style: style,\n        id: model.key\n      }, this.props.attachData), /*#__PURE__*/_react[\"default\"].createElement(_IFrame[\"default\"], {\n        src: changedUrl,\n        frameBorder: showFrameBorder,\n        scrolling: scrolling,\n        allowtransparency: \"true\",\n        disabledPointer: disabledPointer,\n        allowfullscreen: allowfullscreen,\n        noLoading: noLoading\n      }));\n    }\n  }]);\n  return KDIFrame;\n}(_react[\"default\"].Component)) || _class) || _class) || _class);\nvar _default = exports[\"default\"] = KDIFrame;\n\n//# sourceURL=webpack://bos-platform/./src/component/web/KDIFrame.js?");

/***/ }),

/***/ "./src/component/web/KDIcon.jsx":
/*!**************************************!*\
  !*** ./src/component/web/KDIcon.jsx ***!
  \**************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.assign.js */ \"../../node_modules/core-js/modules/es.object.assign.js\");\n__webpack_require__(/*! core-js/modules/es.object.create.js */ \"../../node_modules/core-js/modules/es.object.create.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.get-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.set-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.set-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.reflect.construct.js */ \"../../node_modules/core-js/modules/es.reflect.construct.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.array.concat.js */ \"../../node_modules/core-js/modules/es.array.concat.js\");\n__webpack_require__(/*! core-js/modules/es.array.for-each.js */ \"../../node_modules/core-js/modules/es.array.for-each.js\");\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\nvar _react = _interopRequireDefault(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _ComposeEnhance = _interopRequireDefault(__webpack_require__(/*! ../common/ComposeEnhance */ \"./src/component/common/ComposeEnhance.js\"));\nvar _PropsComparison = _interopRequireDefault(__webpack_require__(/*! ../common/PropsComparison */ \"./src/component/common/PropsComparison.js\"));\nvar _componentutil = __webpack_require__(/*! ../../util/componentutil */ \"./src/util/componentutil.js\");\nvar _iconAction = __webpack_require__(/*! ../../action/iconAction */ \"./src/action/iconAction.js\");\nvar _Icon = _interopRequireDefault(__webpack_require__(/*! ./base/Icon */ \"./src/component/web/base/Icon.jsx\"));\nvar _serverproperties = __webpack_require__(/*! ../../constant/serverproperties */ \"./src/constant/serverproperties.js\");\nvar _VisibleLockWrap = _interopRequireDefault(__webpack_require__(/*! ../common/VisibleLockWrap */ \"./src/component/common/VisibleLockWrap.js\"));\nvar _AttachDataWrap = _interopRequireDefault(__webpack_require__(/*! ../common/AttachDataWrap */ \"./src/component/common/AttachDataWrap.js\"));\nvar _dec, _dec2, _class;\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nvar KDIcon = (_dec = (0, _VisibleLockWrap[\"default\"])(false), _dec2 = (0, _ComposeEnhance[\"default\"])(_PropsComparison[\"default\"]), (0, _AttachDataWrap[\"default\"])(_class = _dec(_class = _dec2(_class = /*#__PURE__*/function (_React$Component) {\n  _inherits(KDIcon, _React$Component);\n  function KDIcon(props) {\n    var _this;\n    _classCallCheck(this, KDIcon);\n    _this = _callSuper(this, KDIcon, [props]);\n    _this.state = {\n      isSelected: false\n    };\n    ['handleClick'].forEach(function (item) {\n      return _this[item] = _this[item].bind(_assertThisInitialized(_this));\n    });\n    return _this;\n  }\n  _createClass(KDIcon, [{\n    key: \"handleClick\",\n    value: function handleClick(e) {\n      e.stopPropagation();\n      // if(!this.props.model.getMetaProperty('clickable')) return;\n      if ((0, _componentutil.getLocked)(this.props.model)) return;\n      this.setState({\n        isSelected: !this.state.isSelected\n      });\n      this.props.dispatch((0, _iconAction.click)(this.props.model));\n    }\n  }, {\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var model = this.props.model;\n      var config = model.getFormConfig();\n      this._fileServer = config.fileserver;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var model = this.props.model;\n      var style = (0, _componentutil.getCommonStyle)(model);\n      var _getCommonClass = (0, _componentutil.getCommonClass)(model),\n        Grow = _getCommonClass.Grow,\n        Shrink = _getCommonClass.Shrink,\n        AlignSelf = _getCommonClass.AlignSelf;\n      // 是否允许点击，允许点击时才有hover 效果。\n      // let clickable = model.getMetaProperty('clickable')\n      var imageZoom = model.getMetaProperty('imageZoom') !== undefined; // 默认按照原始大小显示图片\n      var visibility = (0, _componentutil.getVisible)(model);\n      if (!visibility) return null;\n      var imageKey = (0, _componentutil.getComponentDataProperty)(model, 'imageKey', _serverproperties.IMAGE_KEY, false);\n      var bgColor = (0, _componentutil.getComponentDataProperty)(model, 'bc', 'bc', false);\n      var name = (0, _componentutil.getComponentDataProperty)(model, 'text', 'text', true);\n\n      // if (imageKey && !/^http(s)*/.test(imageKey)) {\n      //   imageKey = `${this._fileServer + imageKey}`\n      // }\n      imageKey = (0, _componentutil.getImgFullPath)(this._fileServer, imageKey);\n      return /*#__PURE__*/_react[\"default\"].createElement(_Icon[\"default\"], _extends({\n        dataPageId: \"\".concat(this.props.model.pageId, \"_\").concat(this.props.model.key),\n        imageZoom: imageZoom,\n        clickable: true,\n        src: imageKey,\n        bgColor: bgColor,\n        name: name,\n        isSelected: this.state.isSelected,\n        onClick: this.handleClick,\n        Grow: Grow,\n        Shrink: Shrink,\n        AlignSelf: AlignSelf,\n        style: style\n      }, this.props.attachData));\n    }\n  }]);\n  return KDIcon;\n}(_react[\"default\"].Component)) || _class) || _class) || _class);\nvar _default = exports[\"default\"] = KDIcon;\n\n//# sourceURL=webpack://bos-platform/./src/component/web/KDIcon.jsx?");

/***/ }),

/***/ "./src/component/web/KDImage.js":
/*!**************************************!*\
  !*** ./src/component/web/KDImage.js ***!
  \**************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.filter.js */ \"../../node_modules/core-js/modules/es.array.filter.js\");\n__webpack_require__(/*! core-js/modules/es.array.for-each.js */ \"../../node_modules/core-js/modules/es.array.for-each.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.assign.js */ \"../../node_modules/core-js/modules/es.object.assign.js\");\n__webpack_require__(/*! core-js/modules/es.object.create.js */ \"../../node_modules/core-js/modules/es.object.create.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-properties.js */ \"../../node_modules/core-js/modules/es.object.define-properties.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptors.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptors.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.get-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.keys.js */ \"../../node_modules/core-js/modules/es.object.keys.js\");\n__webpack_require__(/*! core-js/modules/es.object.set-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.set-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.reflect.construct.js */ \"../../node_modules/core-js/modules/es.reflect.construct.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ \"../../node_modules/core-js/modules/web.dom-collections.for-each.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\n__webpack_require__(/*! core-js/modules/es.string.trim.js */ \"../../node_modules/core-js/modules/es.string.trim.js\");\nvar _react = _interopRequireWildcard(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _immutable = __webpack_require__(/*! immutable */ \"webpack/sharing/consume/default/immutable/immutable?f2ca\");\nvar _buttonaction = __webpack_require__(/*! ../../action/buttonaction */ \"./src/action/buttonaction.js\");\nvar _tooltipaction = __webpack_require__(/*! ../../action/tooltipaction */ \"./src/action/tooltipaction.js\");\nvar _reactDom = _interopRequireDefault(__webpack_require__(/*! react-dom */ \"webpack/sharing/consume/default/react-dom/react-dom?418d\"));\nvar _Image = _interopRequireDefault(__webpack_require__(/*! ./base/Image */ \"./src/component/web/base/Image.jsx\"));\nvar _componentutil = __webpack_require__(/*! ../../util/componentutil */ \"./src/util/componentutil.js\");\nvar _serverproperties = __webpack_require__(/*! ../../constant/serverproperties */ \"./src/constant/serverproperties.js\");\nvar _VisibleLockWrap = _interopRequireDefault(__webpack_require__(/*! ../common/VisibleLockWrap */ \"./src/component/common/VisibleLockWrap.js\"));\nvar _AttachDataWrap = _interopRequireDefault(__webpack_require__(/*! ../common/AttachDataWrap */ \"./src/component/common/AttachDataWrap.js\"));\nvar _FloatingPanelWarp = _interopRequireDefault(__webpack_require__(/*! ../common/FloatingPanelWarp */ \"./src/component/common/FloatingPanelWarp.js\"));\nvar _Slot = _interopRequireDefault(__webpack_require__(/*! @/component/common/Slot */ \"./src/component/common/Slot.jsx\"));\nvar _CtlInterceptors = __webpack_require__(/*! ../common/CtlInterceptors */ \"./src/component/common/CtlInterceptors.js\");\nvar _clickActionUtil = _interopRequireWildcard(__webpack_require__(/*! @/util/clickActionUtil */ \"./src/util/clickActionUtil.js\"));\nvar _ControlLoadingWrap = _interopRequireDefault(__webpack_require__(/*! ../common/ControlLoadingWrap */ \"./src/component/common/ControlLoadingWrap.js\"));\nvar _baseComponent_undefined = _interopRequireDefault(__webpack_require__(/*! ./img/default/baseComponent_undefined.png */ \"./src/component/web/img/default/baseComponent_undefined.png\"));\nvar _imageUtil = __webpack_require__(/*! ../../util/imageUtil */ \"./src/util/imageUtil.js\");\nvar _customProperty = __webpack_require__(/*! @/util/customProperty */ \"./src/util/customProperty.js\");\nvar _waitUpdateValueUtil = __webpack_require__(/*! @/api/waitUpdateValueUtil */ \"./src/api/waitUpdateValueUtil.js\");\nvar _tooltipsUtil = __webpack_require__(/*! @/util/tooltipsUtil */ \"./src/util/tooltipsUtil.js\");\nvar _intlApi = __webpack_require__(/*! @/i18n/intlApi */ \"./src/i18n/intlApi.js\");\nvar _requestParamsUtil = __webpack_require__(/*! @/util/requestParamsUtil */ \"./src/util/requestParamsUtil.js\");\nvar _dec, _class;\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n// @BusyTipWrap()\nvar KDImage = (_dec = (0, _VisibleLockWrap[\"default\"])(false, true), (0, _AttachDataWrap[\"default\"])(_class = (0, _FloatingPanelWarp[\"default\"])(_class = _dec(_class = (0, _ControlLoadingWrap[\"default\"])(_class = /*#__PURE__*/function (_Component) {\n  _inherits(KDImage, _Component);\n  function KDImage(props) {\n    var _this;\n    _classCallCheck(this, KDImage);\n    _this = _callSuper(this, KDImage, [props]);\n    _this.handleUpload = function (e) {\n      var _this$props = _this.props,\n        model = _this$props.model,\n        dispatch = _this$props.dispatch,\n        beforeAction = _this$props.beforeAction;\n      var controlType = model.getMetaProperty('type');\n      var clickable = model.getMetaProperty('clickable');\n      var lock = _this._getLock(model);\n      if (!lock && clickable) {\n        e.stopPropagation();\n        // 经过拦截器链拦截\n        var pageId = model.pageId,\n          key = model.key;\n        var evt = e;\n        var promise = beforeAction && beforeAction(e, {\n          controlType: controlType,\n          controlKey: key\n        }) || (0, _waitUpdateValueUtil.waitUpdateValueComplete)(pageId);\n        promise.then(function () {\n          (0, _CtlInterceptors.interceptActionFn)(_objectSpread(_objectSpread({\n            evt: evt\n          }, _this.props), {}, {\n            click: function click() {\n              return dispatch(_buttonaction.click.apply(void 0, arguments));\n            }\n          }), _clickActionUtil[\"default\"]);\n        });\n      }\n    };\n    _this.canUploadImg = function () {\n      var model = _this.props.model;\n      var lock = _this._getLock(model);\n      var uploadable = model.getMetaProperty('iu') || false;\n      return !lock && uploadable;\n    };\n    _this.handleDragOver = function (evt) {\n      if (!_this.canUploadImg()) return;\n      evt.preventDefault();\n      _this.setState({\n        showDragMask: true\n      });\n    };\n    _this.handleDropLeave = function (evt) {\n      var _this$imageDom;\n      if (!_this.canUploadImg() || (_this$imageDom = _this.imageDom) !== null && _this$imageDom !== void 0 && _this$imageDom.contains(evt.relatedTarget)) return;\n      _this.setState({\n        showDragMask: false\n      });\n    };\n    _this.handleDrop = function (evt) {\n      if (!_this.canUploadImg()) return;\n      evt.preventDefault();\n      _this.setState({\n        showDragMask: false\n      });\n      _this.handleUpload(evt);\n    };\n    _this.handleMouseDown = function (e) {\n      /**\n       * By Shawn\n       * activeRow from cardview\n       * 在卡片视图中使用时，点击操作针对当前卡片，在mousedown时候 选中卡片。\n       */\n      // if (this.props.model.getMetaProperty('clickable') && this.props.activeRow) {\n      //   const fieldKey = this.props.model.key\n      //   e.stopPropagation()\n      //   this.props.activeRow(true, fieldKey)\n      // }\n    };\n    _this.hasHoverEffect = function () {\n      var _this$getImageKeyValu = _this.getImageKeyValue(),\n        imageHoverKey = _this$getImageKeyValu.imageHoverKey;\n      if (!imageHoverKey) return;\n      var hoverUrl = _this.getUrl(imageHoverKey);\n      return hoverUrl && hoverUrl.trim() ? hoverUrl : undefined;\n    };\n    _this.getUrl = _this.getUrl.bind(_assertThisInitialized(_this));\n    _this.mouseOverHandler = _this.mouseOverHandler.bind(_assertThisInitialized(_this));\n    _this.mouseLeaveHandler = _this.mouseLeaveHandler.bind(_assertThisInitialized(_this));\n    _this.updateTipsConfig = _this.updateTipsConfig.bind(_assertThisInitialized(_this));\n    _this.state = {\n      tipsConfig: null,\n      showDragMask: false\n    };\n    _this.imageRef = /*#__PURE__*/_react[\"default\"].createRef(null);\n    return _this;\n  }\n  _createClass(KDImage, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$imageRef;\n      var _this$props2 = this.props,\n        model = _this$props2.model,\n        isFromCardRow = _this$props2.isFromCardRow,\n        data = _this$props2.data,\n        option = _this$props2.option;\n      var config = model.getFormConfig();\n      // 获取fileserver配置\n      this._fileServer = config.fileserver;\n      var tips = (0, _tooltipsUtil.getRowPropertyTips)({\n        model: model,\n        isFromCardRow: isFromCardRow,\n        data: data,\n        option: option\n      });\n      if (tips) this.updateTipsConfig(model.pageId, model.key, tips);\n      this.imageDom = _reactDom[\"default\"].findDOMNode((_this$imageRef = this.imageRef) === null || _this$imageRef === void 0 ? void 0 : _this$imageRef.current);\n      if (this.imageDom) {\n        this.imageDom.addEventListener('dragover', this.handleDragOver);\n        this.imageDom.addEventListener('dragleave', this.handleDropLeave);\n        this.imageDom.addEventListener('drop', this.handleDrop);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (this.imageDom) {\n        this.imageDom.removeEventListener('dragover', this.handleDragOver);\n        this.imageDom.removeEventListener('dragleave', this.handleDropLeave);\n        this.imageDom.removeEventListener('drop', this.handleDrop);\n        this.imageDom = null;\n      }\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      var _nextProps$model, _nextProps$model2;\n      var _this$props3 = this.props,\n        model = _this$props3.model,\n        isFromCardRow = _this$props3.isFromCardRow,\n        data = _this$props3.data,\n        option = _this$props3.option;\n      var tips = (0, _tooltipsUtil.getRowPropertyTips)({\n        model: model,\n        isFromCardRow: isFromCardRow,\n        data: data,\n        option: option\n      });\n      var nextTips = (0, _tooltipsUtil.getRowPropertyTips)({\n        model: nextProps.model,\n        isFromCardRow: nextProps.isFromCardRow,\n        data: nextProps.data,\n        option: nextProps.option\n      });\n      if (!(0, _immutable.is)(tips, nextTips)) this.updateTipsConfig((_nextProps$model = nextProps.model) === null || _nextProps$model === void 0 ? void 0 : _nextProps$model.pageId, (_nextProps$model2 = nextProps.model) === null || _nextProps$model2 === void 0 ? void 0 : _nextProps$model2.key, nextTips);\n    }\n  }, {\n    key: \"updateTipsConfig\",\n    value: function updateTipsConfig(pageId, id, tips) {\n      if (!tips) {\n        // 可以通过u指令设置tips为空\n        this.setState({\n          tipsConfig: null\n        });\n        return;\n      }\n      var tipsConfig = this.state.tipsConfig;\n      if (!tipsConfig) {\n        tipsConfig = (0, _tooltipsUtil.createTipsConfig)(pageId, id);\n        this.setState({\n          tipsConfig: tipsConfig\n        });\n      }\n      (0, _tooltipsUtil.saveTipsInfo)(tipsConfig, tips);\n    }\n  }, {\n    key: \"_getLock\",\n    value: function _getLock(model) {\n      if (this.props.getCardLocked) {\n        return this.props.getCardLocked(model);\n      } // 如果image作为卡片里的字段，优先用卡片字段锁定判断接口\n      // return getLocked(model)\n      return this.props.getLocked(model);\n    }\n  }, {\n    key: \"_getVisible\",\n    value: function _getVisible(model) {\n      if (this.props.getCardVisible) {\n        return this.props.getCardVisible(model);\n      } // 如果image作为卡片里的字段，优先用卡片字段可见效判断接口\n      // return getVisible(model)\n      return this.props.getVisible(model);\n    }\n  }, {\n    key: \"getUrl\",\n    value:\n    /**\n     * 获得完整URL\n     * @param {string} imgKey 图片原始地址\n     */\n    function getUrl(imgKey) {\n      // return getImgFullPath(this._fileServer, imgKey)\n      var _this$props$model$get = this.props.model.getFormConfig(),\n        imageurl = _this$props$model$get.imageurl;\n      var imgUrl = (0, _imageUtil.getImageUrl)({\n        imageurl: imageurl,\n        fileserver: this._fileServer,\n        pageId: this.props.model.pageId\n      }, imgKey);\n      return (0, _requestParamsUtil.appendCtsynonce)(this.props.model, imgUrl);\n    }\n  }, {\n    key: \"mouseOverHandler\",\n    value: function mouseOverHandler(e) {\n      var hoverUrl = this.hasHoverEffect();\n      if (hoverUrl) e.currentTarget.src = hoverUrl;\n    }\n  }, {\n    key: \"mouseLeaveHandler\",\n    value: function mouseLeaveHandler(e) {\n      if (this.hasHoverEffect()) {\n        var _this$getImageKeyValu2 = this.getImageKeyValue(),\n          imageKey = _this$getImageKeyValu2.imageKey;\n        var url = this.getUrl(imageKey);\n        e.currentTarget.src = url || _baseComponent_undefined[\"default\"];\n      }\n    }\n  }, {\n    key: \"getImageKeyValue\",\n    value: function getImageKeyValue() {\n      var _this$props4 = this.props,\n        model = _this$props4.model,\n        isFromCardRow = _this$props4.isFromCardRow,\n        data = _this$props4.data,\n        option = _this$props4.option;\n      var imageRowProperty = isFromCardRow && (0, _customProperty.getControlRowProperty)({\n        data: data,\n        model: model,\n        option: option\n      });\n      var imageKey = (0, _componentutil.getComponentDataProperty)(model, 'imageKey', _serverproperties.IMAGE_KEY, false);\n      var imageHoverKey = (0, _componentutil.getComponentDataProperty)(this.props.model, 'imageHoverKey', _serverproperties.IMAGE_HOVER_KEY, false);\n      if (imageRowProperty) {\n        if (imageRowProperty.get('imageKey') !== undefined || imageRowProperty.get('src') !== undefined) {\n          imageKey = imageRowProperty.get('imageKey') || imageRowProperty.get('src');\n        }\n        if (imageRowProperty.get('imageHoverKey') !== undefined) {\n          imageHoverKey = imageRowProperty.get('imageHoverKey');\n        }\n      }\n      return {\n        imageKey: imageKey,\n        imageHoverKey: imageHoverKey\n      };\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n      var _this$props5 = this.props,\n        model = _this$props5.model,\n        fieldAction = _this$props5.fieldAction,\n        isFromCardRow = _this$props5.isFromCardRow,\n        loading = _this$props5.loading,\n        dispatch = _this$props5.dispatch;\n      var _this$state = this.state,\n        tipsConfig = _this$state.tipsConfig,\n        showDragMask = _this$state.showDragMask;\n      var _getCommonClass = (0, _componentutil.getCommonClass)(model),\n        Grow = _getCommonClass.Grow,\n        Shrink = _getCommonClass.Shrink,\n        AlignSelf = _getCommonClass.AlignSelf;\n      var style = (0, _componentutil.getCommonStyle)(model);\n      var rowKey = (0, _clickActionUtil.getRowIndex)(this.props);\n      var _this$getImageKeyValu3 = this.getImageKeyValue(),\n        imageKey = _this$getImageKeyValu3.imageKey;\n      var sectionMagnifier = model.getMetaProperty('sem') || false;\n      var url = this.getUrl(imageKey);\n      var name = (0, _componentutil.getComponentDataProperty)(model, 'text', 'text', true);\n      var lock = this._getLock(model);\n      var visibility = this._getVisible(model);\n      // 卡片行控件规则\n      var id = model.getMetaProperty('id');\n      var fieldRules = fieldAction && fieldAction[id];\n      if (fieldRules) {\n        var rulesResult = (0, _componentutil.getCardRulesResult)(fieldRules, visibility, lock, style);\n        visibility = rulesResult.visibility;\n        lock = rulesResult.disabled;\n        style = rulesResult.style;\n      }\n      if (!visibility) {\n        // return null;\n        return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n          id: model ? model.key + '_hide_control' : 'hide_control',\n          style: {\n            display: 'none'\n          }\n        });\n      }\n      // 卡片行规则 end\n      var clickable = model.getMetaProperty('clickable');\n      var slot;\n      if (tipsConfig) {\n        slot = /*#__PURE__*/_react[\"default\"].createElement(_Slot[\"default\"], {\n          tips: tipsConfig\n        });\n      }\n      var showLoading = loading && loading.showLoading;\n      var loadingRowKey = loading && loading.rowKey;\n      var shouldShowLoading;\n      if (isFromCardRow) {\n        shouldShowLoading = showLoading && loadingRowKey !== 'undefined' && rowKey === loadingRowKey;\n      } else {\n        shouldShowLoading = showLoading;\n      }\n      var canUpload = this.canUploadImg();\n      var imgContainerTitle = canUpload && (0, _intlApi.getLangMsg)({\n        key: 'image.key0021'\n      });\n      var imgTitle = !canUpload && name;\n      return /*#__PURE__*/_react[\"default\"].createElement(_Image[\"default\"], _extends({\n        onMouseDown: this.handleMouseDown,\n        onClick: function onClick(e) {\n          return _this2.handleUpload(e);\n        },\n        showDragMask: showDragMask,\n        imgContainerTitle: imgContainerTitle,\n        imgTitle: imgTitle,\n        Grow: Grow,\n        Shrink: Shrink,\n        AlignSelf: AlignSelf,\n        style: style,\n        id: model.key,\n        url: url,\n        name: name,\n        clickable: clickable,\n        onMouseOver: this.mouseOverHandler,\n        onMouseLeave: this.mouseLeaveHandler,\n        model: model,\n        dispatch: this.props.dispatch,\n        showFormByTips: function showFormByTips() {\n          return dispatch(_tooltipaction.showFormByTips.apply(void 0, arguments));\n        },\n        userLocal: model.getUserLocale(),\n        disabled: lock,\n        showLoading: shouldShowLoading,\n        sectionMagnifier: sectionMagnifier,\n        slot: slot\n      }, this.props.attachData, {\n        ref: this.imageRef\n      }));\n    }\n  }]);\n  return KDImage;\n}(_react.Component)) || _class) || _class) || _class) || _class);\nvar _default = exports[\"default\"] = KDImage;\n\n//# sourceURL=webpack://bos-platform/./src/component/web/KDImage.js?");

/***/ }),

/***/ "./src/component/web/KDLabel.js":
/*!**************************************!*\
  !*** ./src/component/web/KDLabel.js ***!
  \**************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.filter.js */ \"../../node_modules/core-js/modules/es.array.filter.js\");\n__webpack_require__(/*! core-js/modules/es.array.for-each.js */ \"../../node_modules/core-js/modules/es.array.for-each.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.create.js */ \"../../node_modules/core-js/modules/es.object.create.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-properties.js */ \"../../node_modules/core-js/modules/es.object.define-properties.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptors.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptors.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.get-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.keys.js */ \"../../node_modules/core-js/modules/es.object.keys.js\");\n__webpack_require__(/*! core-js/modules/es.object.set-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.set-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.reflect.construct.js */ \"../../node_modules/core-js/modules/es.reflect.construct.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ \"../../node_modules/core-js/modules/web.dom-collections.for-each.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\n__webpack_require__(/*! core-js/modules/es.object.assign.js */ \"../../node_modules/core-js/modules/es.object.assign.js\");\nvar _react = _interopRequireWildcard(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _immutable = __webpack_require__(/*! immutable */ \"webpack/sharing/consume/default/immutable/immutable?f2ca\");\nvar _classnames = _interopRequireDefault(__webpack_require__(/*! classnames */ \"../../node_modules/classnames/index.js\"));\nvar _componentutil = __webpack_require__(/*! ../../util/componentutil */ \"./src/util/componentutil.js\");\nvar _Label = _interopRequireDefault(__webpack_require__(/*! ./base/Label */ \"./src/component/web/base/Label.js\"));\nvar _buttonaction = __webpack_require__(/*! ../../action/buttonaction */ \"./src/action/buttonaction.js\");\nvar _tooltipaction = __webpack_require__(/*! ../../action/tooltipaction */ \"./src/action/tooltipaction.js\");\nvar _VisibleLockWrap = _interopRequireDefault(__webpack_require__(/*! ../common/VisibleLockWrap */ \"./src/component/common/VisibleLockWrap.js\"));\nvar _customProperty = __webpack_require__(/*! ../../util/customProperty */ \"./src/util/customProperty.js\");\nvar _AttachDataWrap = _interopRequireDefault(__webpack_require__(/*! ../common/AttachDataWrap */ \"./src/component/common/AttachDataWrap.js\"));\nvar _FloatingPanelWarp = _interopRequireDefault(__webpack_require__(/*! ../common/FloatingPanelWarp */ \"./src/component/common/FloatingPanelWarp.js\"));\nvar _ControlLoadingWrap = _interopRequireDefault(__webpack_require__(/*! ../common/ControlLoadingWrap */ \"./src/component/common/ControlLoadingWrap.js\"));\nvar _Slot = _interopRequireDefault(__webpack_require__(/*! @/component/common/Slot */ \"./src/component/common/Slot.jsx\"));\nvar _CtlInterceptors = __webpack_require__(/*! ../common/CtlInterceptors */ \"./src/component/common/CtlInterceptors.js\");\nvar _clickActionUtil = _interopRequireWildcard(__webpack_require__(/*! @/util/clickActionUtil */ \"./src/util/clickActionUtil.js\"));\nvar _waitUpdateValueUtil = __webpack_require__(/*! @/api/waitUpdateValueUtil */ \"./src/api/waitUpdateValueUtil.js\");\nvar _tooltipsUtil = __webpack_require__(/*! @/util/tooltipsUtil */ \"./src/util/tooltipsUtil.js\");\nvar _dec, _class;\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n// @BusyTipWrap()\nvar KDLabel = (_dec = (0, _VisibleLockWrap[\"default\"])(false, true), (0, _AttachDataWrap[\"default\"])(_class = (0, _FloatingPanelWarp[\"default\"])(_class = _dec(_class = (0, _ControlLoadingWrap[\"default\"])(_class = /*#__PURE__*/function (_Component) {\n  _inherits(KDLabel, _Component);\n  function KDLabel(_props) {\n    var _this;\n    _classCallCheck(this, KDLabel);\n    _this = _callSuper(this, KDLabel, [_props]);\n    // 格式化样式，将边框颜色换成字体颜色，删掉背景色\n    _this.formatStyle = function (style) {\n      if (!style.color) return;\n      var isHover = _this.state.isHover;\n      style.borderBottom = '1px solid ' + style.color;\n      style.borderLeft = '1px solid ' + style.color;\n      style.borderTop = '1px solid ' + style.color;\n      style.borderRight = '1px solid ' + style.color;\n      delete style.backgroundColor;\n      if (isHover) {\n        style.backgroundColor = style.color;\n        style.color = '#fff';\n      }\n    };\n    _this.handleMouseDown = function (e) {\n      /**\n       * By Shawn\n       * activeRow from cardview\n       * label 在卡片视图中使用时，点击操作针对当前卡片，在mousedown时候 选中卡片。\n       */\n      // if (this.props.model.getMetaProperty('clickable') && this.props.activeRow) {\n      //   const fieldKey = this.props.model.key\n      //   e.stopPropagation()\n      //   this.props.activeRow(true, fieldKey)\n      //   this.props.onClick(e)\n      // }\n    };\n    _this.handleMouseOut = function (e) {\n      if (!_this.canHover()) return;\n      _this.setState({\n        isHover: false\n      });\n    };\n    _this.handleMouseOver = function (e) {\n      if (!_this.canHover()) return;\n      _this.setState({\n        isHover: true\n      });\n    };\n    _this.getInialProperty = function (props) {\n      var model = props.model,\n        isFromCardRow = props.isFromCardRow,\n        data = props.data,\n        option = props.option,\n        fieldAction = props.fieldAction;\n      var style = (0, _componentutil.getCommonStyle)(model);\n      var labelStyle = model.getMetaProperty('labelstyle') || '1';\n      var text = (0, _componentutil.getComponentDataProperty)(model, 'text', 'caption', true);\n      var labelRowProperty = isFromCardRow && (0, _customProperty.getControlRowProperty)({\n        data: data,\n        model: model,\n        option: option\n      });\n      var disabled = _this._getLock(model);\n      var visibility = _this._getVisible(model);\n      if (labelStyle === '2') {\n        _this.formatStyle(style);\n      } else {\n        // 从业务数据中取标签显示内容，优先于元数据中显示内容\n        if (labelRowProperty) {\n          if (labelRowProperty.get('text') !== undefined) {\n            text = labelRowProperty.get('text');\n          }\n          style = (0, _customProperty.mergeCustomStyle)(style, labelRowProperty);\n        }\n        // 卡片行控件规则\n        var id = model.getMetaProperty('id');\n        var fieldRules = fieldAction && fieldAction[id];\n        if (fieldRules) {\n          var rulesResult = (0, _componentutil.getCardRulesResult)(fieldRules, visibility, disabled, style);\n          visibility = rulesResult.visibility;\n          disabled = rulesResult.disabled;\n          style = rulesResult.style;\n          if (rulesResult.text !== undefined) {\n            text = rulesResult.text;\n          }\n        }\n      }\n      var lineHeight = model.getMetaProperty('lh');\n      if (lineHeight) {\n        style = Object.assign({}, style, {\n          lineHeight: lineHeight\n        });\n      }\n      return {\n        labelStyle: labelStyle,\n        text: text,\n        visibility: visibility,\n        disabled: disabled,\n        style: style\n      };\n    };\n    _this.state = {\n      isHover: false\n    };\n    _this.handleClick = _this.handleClick.bind(_assertThisInitialized(_this));\n    _this.updateTipsConfig = _this.updateTipsConfig.bind(_assertThisInitialized(_this));\n    _this.forAutoTestActions = {\n      click: _buttonaction.click\n    };\n    _this.state = {\n      tipsConfig: null\n    };\n    return _this;\n  }\n  _createClass(KDLabel, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props = this.props,\n        model = _this$props.model,\n        isFromCardRow = _this$props.isFromCardRow,\n        data = _this$props.data,\n        option = _this$props.option;\n      var tips = (0, _tooltipsUtil.getRowPropertyTips)({\n        model: model,\n        isFromCardRow: isFromCardRow,\n        data: data,\n        option: option\n      });\n      if (tips) this.updateTipsConfig(model.pageId, model.key, tips);\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      var _this$props2 = this.props,\n        model = _this$props2.model,\n        isFromCardRow = _this$props2.isFromCardRow,\n        data = _this$props2.data,\n        option = _this$props2.option;\n      var tips = (0, _tooltipsUtil.getRowPropertyTips)({\n        model: model,\n        isFromCardRow: isFromCardRow,\n        data: data,\n        option: option\n      });\n      var nextTips = (0, _tooltipsUtil.getRowPropertyTips)({\n        model: nextProps.model,\n        isFromCardRow: nextProps.isFromCardRow,\n        data: nextProps.data,\n        option: nextProps.option\n      });\n      var text = (0, _componentutil.getComponentDataProperty)(model, 'text', 'caption', true);\n      var nextText = (0, _componentutil.getComponentDataProperty)(nextProps.model, 'text', 'caption', true);\n      if (!(0, _immutable.is)(tips, nextTips) || text !== nextText) {\n        var _nextProps$model, _nextProps$model2;\n        // label中结构比较特殊，slot与text在同一个div层级下，导致u指令更新值后将slot覆盖掉，需要重新渲染\n        this.updateTipsConfig((_nextProps$model = nextProps.model) === null || _nextProps$model === void 0 ? void 0 : _nextProps$model.pageId, (_nextProps$model2 = nextProps.model) === null || _nextProps$model2 === void 0 ? void 0 : _nextProps$model2.key, nextTips);\n      }\n    }\n  }, {\n    key: \"updateTipsConfig\",\n    value: function updateTipsConfig(pageId, id, tips) {\n      if (!tips) {\n        // 可以通过u指令设置tips为空\n        this.setState({\n          tipsConfig: null\n        });\n        return;\n      }\n      var tipsConfig = this.state.tipsConfig;\n      tipsConfig = (0, _tooltipsUtil.createTipsConfig)(pageId, id);\n      this.setState({\n        tipsConfig: tipsConfig\n      });\n      (0, _tooltipsUtil.saveTipsInfo)(tipsConfig, tips);\n    }\n  }, {\n    key: \"_getLock\",\n    value: function _getLock() {\n      var _this$props3 = this.props,\n        model = _this$props3.model,\n        getCardLocked = _this$props3.getCardLocked;\n      if (getCardLocked) {\n        return getCardLocked(model);\n      } // 如果image作为卡片里的字段，优先用卡片字段可见效判断接口\n      return this.props.isLocked;\n    }\n  }, {\n    key: \"_getVisible\",\n    value: function _getVisible() {\n      var _this$props4 = this.props,\n        model = _this$props4.model,\n        getCardVisible = _this$props4.getCardVisible;\n      if (getCardVisible) {\n        return getCardVisible(model);\n      }\n      return this.props.isVisible;\n    }\n  }, {\n    key: \"handleClick\",\n    value: function handleClick(e) {\n      var _this2 = this;\n      var _this$props5 = this.props,\n        model = _this$props5.model,\n        beforeAction = _this$props5.beforeAction,\n        onClick = _this$props5.onClick;\n      var lock = this._getLock(model);\n      if (lock) return;\n      var clickable = model.getMetaProperty('clickable');\n      var controlType = model.getMetaProperty('type');\n      if (!lock && clickable) {\n        e.stopPropagation();\n        // 经过拦截器链拦截\n        var pageId = model.pageId,\n          key = model.key;\n        var promise = beforeAction && beforeAction(e, {\n          controlType: controlType,\n          controlKey: key\n        }) || (0, _waitUpdateValueUtil.waitUpdateValueComplete)(pageId);\n        var event = e && e.nativeEvent;\n        promise.then(function () {\n          onClick && onClick(event);\n          (0, _CtlInterceptors.interceptActionFn)(_objectSpread(_objectSpread({}, _this2.props), {}, {\n            click: function click() {\n              return _this2.props.dispatch(_buttonaction.click.apply(void 0, arguments));\n            }\n          }), _clickActionUtil[\"default\"]);\n        });\n      }\n    }\n  }, {\n    key: \"canHover\",\n    value:\n    // 只有块状风格又是设置了color才支持鼠标事件\n    function canHover() {\n      // 没有设置color的走默认hover事件\n      var model = this.props.model;\n      var style = (0, _componentutil.getCommonStyle)(model);\n      var labelStyle = model.getMetaProperty('labelstyle') || '1';\n      var clickable = model.getMetaProperty('clickable');\n      var disabled = this._getLock(model);\n      if (style.color && labelStyle === '2' && !disabled && clickable) {\n        return true;\n      }\n      return false;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n      var _this$props6 = this.props,\n        model = _this$props6.model,\n        attachData = _this$props6.attachData,\n        loading = _this$props6.loading;\n      var tipsConfig = this.state.tipsConfig;\n      var fontColor = null;\n      var slot;\n      var _this$getInialPropert = this.getInialProperty(this.props),\n        labelStyle = _this$getInialPropert.labelStyle,\n        text = _this$getInialPropert.text,\n        visibility = _this$getInialPropert.visibility,\n        disabled = _this$getInialPropert.disabled,\n        style = _this$getInialPropert.style;\n      var rowKey = (0, _clickActionUtil.getRowIndex)(this.props);\n      var _getCommonClass = (0, _componentutil.getCommonClass)(model),\n        Grow = _getCommonClass.Grow,\n        Shrink = _getCommonClass.Shrink,\n        AlignSelf = _getCommonClass.AlignSelf;\n      var clickable = model.getMetaProperty('clickable');\n      var autoTextWrap = model.getMetaProperty('atw');\n      var className = (0, _classnames[\"default\"])('kd-cq-control kd-cq-label', {\n        'kd-cq-label-type-border': labelStyle === '2'\n      });\n      if (!visibility) {\n        return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n          id: model ? model.key + '_hide_control' : 'hide_control',\n          style: {\n            display: 'none'\n          }\n        });\n      }\n      if (style) {\n        fontColor = style.color;\n      }\n      if (tipsConfig) {\n        slot = /*#__PURE__*/_react[\"default\"].createElement(_Slot[\"default\"], {\n          tips: tipsConfig\n        });\n      }\n      return /*#__PURE__*/_react[\"default\"].createElement(_Label[\"default\"], _extends({\n        className: className,\n        disabled: disabled,\n        onMouseOver: this.handleMouseOver,\n        onMouseOut: this.handleMouseOut,\n        onMouseDown: this.handleMouseDown,\n        onClick: this.handleClick,\n        Grow: Grow,\n        Shrink: Shrink,\n        AlignSelf: AlignSelf,\n        id: model.key,\n        style: style,\n        text: text,\n        clickable: clickable,\n        AutoTextWrap: autoTextWrap,\n        model: model,\n        dispatch: this.props.dispatch,\n        showFormByTips: function showFormByTips() {\n          return _this3.props.dispatch(_tooltipaction.showFormByTips.apply(void 0, arguments));\n        },\n        userLocal: model.getUserLocale()\n      }, attachData, {\n        LabelStyle: labelStyle,\n        fontColor: fontColor,\n        loading: loading,\n        rowKey: rowKey,\n        slot: slot\n      }));\n    }\n  }]);\n  return KDLabel;\n}(_react.Component)) || _class) || _class) || _class) || _class);\nvar _default = exports[\"default\"] = KDLabel;\n\n//# sourceURL=webpack://bos-platform/./src/component/web/KDLabel.js?");

/***/ }),

/***/ "./src/component/web/KDSplitContainer.js":
/*!***********************************************!*\
  !*** ./src/component/web/KDSplitContainer.js ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.create.js */ \"../../node_modules/core-js/modules/es.object.create.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.get-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.set-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.set-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.reflect.construct.js */ \"../../node_modules/core-js/modules/es.reflect.construct.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.array.concat.js */ \"../../node_modules/core-js/modules/es.array.concat.js\");\n__webpack_require__(/*! core-js/modules/es.array.for-each.js */ \"../../node_modules/core-js/modules/es.array.for-each.js\");\n__webpack_require__(/*! core-js/modules/es.array.index-of.js */ \"../../node_modules/core-js/modules/es.array.index-of.js\");\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\n__webpack_require__(/*! core-js/modules/es.object.assign.js */ \"../../node_modules/core-js/modules/es.object.assign.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.parse-int.js */ \"../../node_modules/core-js/modules/es.parse-int.js\");\n__webpack_require__(/*! core-js/modules/es.promise.js */ \"../../node_modules/core-js/modules/es.promise.js\");\n__webpack_require__(/*! core-js/modules/es.regexp.exec.js */ \"../../node_modules/core-js/modules/es.regexp.exec.js\");\n__webpack_require__(/*! core-js/modules/es.string.replace.js */ \"../../node_modules/core-js/modules/es.string.replace.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ \"../../node_modules/core-js/modules/web.dom-collections.for-each.js\");\nvar _react = _interopRequireDefault(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _propTypes = _interopRequireDefault(__webpack_require__(/*! prop-types */ \"../../node_modules/prop-types/index.js\"));\nvar _immutable = __webpack_require__(/*! immutable */ \"webpack/sharing/consume/default/immutable/immutable?f2ca\");\nvar _classnames = _interopRequireDefault(__webpack_require__(/*! classnames */ \"../../node_modules/classnames/index.js\"));\nvar _global = __webpack_require__(/*! @/global */ \"./src/global/index.js\");\nvar _SplitContainer = _interopRequireDefault(__webpack_require__(/*! ./base/SplitContainer */ \"./src/component/web/base/SplitContainer.jsx\"));\nvar _componentutil = __webpack_require__(/*! ../../util/componentutil */ \"./src/util/componentutil.js\");\nvar _VisibleLockWrap = _interopRequireWildcard(__webpack_require__(/*! ../common/VisibleLockWrap */ \"./src/component/common/VisibleLockWrap.js\"));\nvar _AttachDataWrap = _interopRequireDefault(__webpack_require__(/*! ../common/AttachDataWrap */ \"./src/component/common/AttachDataWrap.js\"));\nvar _serverproperties = __webpack_require__(/*! ../../constant/serverproperties */ \"./src/constant/serverproperties.js\");\nvar _memoryCacher = __webpack_require__(/*! @/model/memoryCacher */ \"./src/model/memoryCacher.js\");\nvar _dec, _class, _KDSplitContainer;\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n// 分割方式\nvar SPLIT_STYLE = 'splitStyle';\nvar SPLIT_POSITION = 'splitPosition';\nvar KDSplitContainer = (_dec = (0, _VisibleLockWrap[\"default\"])(false), (0, _AttachDataWrap[\"default\"])(_class = _dec(_class = (0, _VisibleLockWrap.ContainerLockWrap)(_class = (_KDSplitContainer = /*#__PURE__*/function (_React$Component) {\n  _inherits(KDSplitContainer, _React$Component);\n  function KDSplitContainer(props) {\n    var _this;\n    _classCallCheck(this, KDSplitContainer);\n    _this = _callSuper(this, KDSplitContainer, [props]);\n    _this.correctHistoryData = function () {\n      var _getPageUIState;\n      var model = _this.props.model;\n      var config = model.getFormConfigWithoutMeta();\n      var formId = config.formId,\n        billFormId = config.billFormId;\n      var formAndBillFormId = \"\".concat(formId, \"_\").concat(billFormId);\n      var userUIState = (0, _memoryCacher.getUserUIState)();\n      var userSplitPositionData = userUIState.getIn(['splitcontainer', formAndBillFormId, model.key, SPLIT_POSITION]);\n      if (userSplitPositionData === undefined) return;\n      // 更新到页面级别的缓存\n      if (((_getPageUIState = (0, _memoryCacher.getPageUIState)(model.pageId)) === null || _getPageUIState === void 0 ? void 0 : _getPageUIState.getIn([model.key, SPLIT_POSITION])) === undefined) {\n        (0, _memoryCacher.setPageUIState)(model, SPLIT_POSITION, userSplitPositionData);\n      }\n      // 删除用户级配置、更新用户级配置\n      var splitcontainerUserUIState = userUIState.get('splitcontainer');\n      var curFormSplitUserUIState = splitcontainerUserUIState.get(formAndBillFormId)[\"delete\"](model.key);\n      if (curFormSplitUserUIState.size === 0) {\n        splitcontainerUserUIState = splitcontainerUserUIState[\"delete\"](formAndBillFormId);\n      } else {\n        splitcontainerUserUIState = splitcontainerUserUIState.update(formAndBillFormId, curFormSplitUserUIState);\n      }\n      (0, _memoryCacher.setUserUIState)(model.pageId, ['splitcontainer'], splitcontainerUserUIState, true);\n    };\n    _this.updateSplitCollapse = function () {\n      _this.setState({\n        updateSplitCollapseFlag: !_this.state.updateSplitCollapseFlag\n      });\n    };\n    _this.handleSaveSplitPositionState = function (splitPosition, splitWrap) {\n      if (!splitPosition || !splitWrap) return;\n      var model = _this.props.model;\n      var saveSplitPosition = (0, _componentutil.getComponentDataProperty)(model, _serverproperties.SAVE_SPLIT_POSITION, _serverproperties.SAVE_SPLIT_POSITION, false);\n      if (!saveSplitPosition) return;\n      var _this$props$model = _this.props.model,\n        pageId = _this$props$model.pageId,\n        key = _this$props$model.key;\n      var isHorizon = parseInt(model.getMetaProperty(SPLIT_STYLE) || 0) === 0; // 分割方向\n      var splitPercent = model.getMetaProperty(SPLIT_POSITION) || '';\n\n      // 如果设置的分割位置是百分比存的还是百分比，否则存具体像素\n      var splitPositionData;\n      if (splitPercent.indexOf('%') !== -1) {\n        splitPositionData = Math.round(splitPosition.replace('%', '')) + '%';\n      } else {\n        var rect = splitWrap.getBoundingClientRect();\n        splitPositionData = (isHorizon ? rect.height : rect.width) * Math.round(splitPosition.replace('%', '')) / 100 + 'px';\n      }\n      if (splitPositionData) {\n        (0, _memoryCacher.setPageUIState)(model, SPLIT_POSITION, splitPositionData);\n      }\n    };\n    _this.dir = {\n      top: 3,\n      right: 1,\n      bottom: 2,\n      left: 0\n    };\n    _this.getDefaultCollapseDir = _this.getDefaultCollapseDir.bind(_assertThisInitialized(_this));\n    _this.state = {\n      updateSplitCollapseFlag: false\n    };\n    var splitItems = props.model.meta.get('items', new _immutable.List());\n    // 监听子panel的\n    splitItems.forEach(function (item) {\n      (0, _memoryCacher.addDataChangeListener)(props.model.pageId, [item.get('id'), 'forceUpdateCollapse'], _this.updateSplitCollapse);\n    });\n    return _this;\n  }\n  _createClass(KDSplitContainer, [{\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      // 修正历史错误数据，后面可以移除 - v8.0可移除\n      this.correctHistoryData();\n    }\n  }, {\n    key: \"getDefaultCollapseDir\",\n    value: function getDefaultCollapseDir(children, isHorizon) {\n      var defaultCollapseDir;\n      children && children.forEach(function (subCtrl, index) {\n        var defaultCollapse = subCtrl.props.model.getMetaProperty(_serverproperties.DEFAULT_COLLAPSE);\n        if (index === 0) {\n          if (defaultCollapse === true) {\n            defaultCollapseDir = isHorizon ? 'top' : 'left';\n          }\n        } else {\n          if (defaultCollapse === true) {\n            defaultCollapseDir = isHorizon ? 'bottom' : 'right';\n          }\n        }\n      });\n      return defaultCollapseDir;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _getPageUIState2;\n      var _this$props = this.props,\n        model = _this$props.model,\n        style = _this$props.style;\n      var updateSplitCollapseFlag = this.state.updateSplitCollapseFlag;\n      var _getCommonClass = (0, _componentutil.getCommonClass)(model),\n        Direction = _getCommonClass.Direction,\n        Grow = _getCommonClass.Grow,\n        Shrink = _getCommonClass.Shrink,\n        Wrap = _getCommonClass.Wrap,\n        Overflow = _getCommonClass.Overflow;\n      var unionStyle = Object.assign({}, (0, _componentutil.getCommonStyle)(model), style);\n      var children = (0, _componentutil.parseSubComponents)(model.meta.get('items', new _immutable.List()), model.pageId, (0, _global.getGlobalState)());\n      var splitStyle = parseInt(model.getMetaProperty(SPLIT_STYLE) || 0);\n      var isHorizon = splitStyle === 0;\n\n      // 动态指令控制隐藏，把拖动栏也隐藏\n      var hidden = (0, _componentutil.getComponentDataProperty)(model, 'collapse', 'collapse', false);\n      var hiddenDir = hidden && hidden.get('dir'); // 折叠方向\n      var hiddenState = hidden && hidden.get('state'); // true：折叠，false：展开\n\n      // 分割位置，要处理边界问题\n      var splitPercent = model.getMetaProperty(SPLIT_POSITION) || '';\n      // 兼容历史错误设计，这里的分割位置应该存储在页面级别的配置中，而不应该是全局用户级别\n      var splitPositionCacher = (_getPageUIState2 = (0, _memoryCacher.getPageUIState)(model.pageId)) === null || _getPageUIState2 === void 0 ? void 0 : _getPageUIState2.getIn([model.key, SPLIT_POSITION]);\n      if (splitPositionCacher === undefined) {\n        var config = model.getFormConfigWithoutMeta();\n        var formId = config.formId,\n          billFormId = config.billFormId;\n        var userUIState = (0, _memoryCacher.getUserUIState)();\n        splitPositionCacher = userUIState.getIn(['splitcontainer', \"\".concat(formId, \"_\").concat(billFormId), model.key, SPLIT_POSITION]);\n      }\n      if (splitPositionCacher) {\n        splitPercent = splitPositionCacher;\n      }\n      if (splitPercent.indexOf('%') !== -1) {\n        var _splitNumber = parseInt(splitPercent.replace('%', ''));\n        if (_splitNumber >= 100) {\n          // 分割百分比设置成100% 即折叠\n          // 水平分割，折叠下面板，垂直分割，折叠右面板\n          hiddenDir = isHorizon ? this.dir.bottom : this.dir.right;\n          hiddenState = true;\n        } else if (_splitNumber <= 0) {\n          // 分割比例设置成小于等于0\n          // 水平分割，折叠上面板，垂直分割，折叠左面板\n          hiddenDir = isHorizon ? this.dir.top : this.dir.left;\n          hiddenState = true;\n        }\n      }\n\n      // 获取默认折叠方向\n      var defaultCollapseDir = this.getDefaultCollapseDir(children, isHorizon);\n\n      // 最小宽度/高度\n      var minHeight = (0, _componentutil.getComponentDataProperty)(model, 'minHeight', 'minHeight', false) || 65;\n      var minWidth = (0, _componentutil.getComponentDataProperty)(model, 'minWidth', 'minWidth', false) || 300;\n      var isStorageMode = (0, _componentutil.getComponentDataProperty)(model, _serverproperties.IS_STORAGE_MODE, _serverproperties.IS_STORAGE_MODE, false) || false; // 是否是收纳模式\n      var className = (0, _classnames[\"default\"])({\n        'kd-cq-splitcontainer-type-storage': isStorageMode\n      });\n      var limitInVisibleArea = isStorageMode;\n      return /*#__PURE__*/_react[\"default\"].createElement(_SplitContainer[\"default\"], _extends({\n        className: className,\n        limitInVisibleArea: limitInVisibleArea,\n        onSaveSplitPositionState: this.handleSaveSplitPositionState,\n        defaultCollapseDir: defaultCollapseDir,\n        updateSplitCollapseFlag: updateSplitCollapseFlag,\n        id: model.key,\n        minHeight: minHeight,\n        minWidth: minWidth,\n        isHorizon: isHorizon,\n        splitPercent: splitPercent,\n        hiddenDir: hiddenDir,\n        hiddenState: hiddenState,\n        style: unionStyle,\n        Grow: Grow,\n        Shrink: Shrink,\n        Direction: Direction,\n        Wrap: Wrap,\n        Overflow: Overflow\n      }, this.props.attachData), _react[\"default\"].Children.toArray(children));\n    }\n  }]);\n  return KDSplitContainer;\n}(_react[\"default\"].Component), _KDSplitContainer.contextTypes = {\n  store: _propTypes[\"default\"].object\n}, _KDSplitContainer)) || _class) || _class) || _class);\nvar _default = exports[\"default\"] = KDSplitContainer;\n\n//# sourceURL=webpack://bos-platform/./src/component/web/KDSplitContainer.js?");

/***/ }),

/***/ "./src/component/web/KDSplitPanel.js":
/*!*******************************************!*\
  !*** ./src/component/web/KDSplitPanel.js ***!
  \*******************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.create.js */ \"../../node_modules/core-js/modules/es.object.create.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.get-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.set-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.set-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.reflect.construct.js */ \"../../node_modules/core-js/modules/es.reflect.construct.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.object.assign.js */ \"../../node_modules/core-js/modules/es.object.assign.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.promise.js */ \"../../node_modules/core-js/modules/es.promise.js\");\nvar _react = _interopRequireDefault(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _propTypes = _interopRequireDefault(__webpack_require__(/*! prop-types */ \"../../node_modules/prop-types/index.js\"));\nvar _immutable = __webpack_require__(/*! immutable */ \"webpack/sharing/consume/default/immutable/immutable?f2ca\");\nvar _global = __webpack_require__(/*! @/global */ \"./src/global/index.js\");\nvar _SplitPanel = _interopRequireDefault(__webpack_require__(/*! ./base/SplitPanel */ \"./src/component/web/base/SplitPanel.jsx\"));\nvar _componentutil = __webpack_require__(/*! ../../util/componentutil */ \"./src/util/componentutil.js\");\nvar _VisibleLockWrap = _interopRequireDefault(__webpack_require__(/*! ../common/VisibleLockWrap */ \"./src/component/common/VisibleLockWrap.js\"));\nvar _AttachDataWrap = _interopRequireDefault(__webpack_require__(/*! ../common/AttachDataWrap */ \"./src/component/common/AttachDataWrap.js\"));\nvar _dec, _class, _KDSplitPanel;\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nvar KDSplitPanel = (_dec = (0, _VisibleLockWrap[\"default\"])(true), (0, _AttachDataWrap[\"default\"])(_class = _dec(_class = (_KDSplitPanel = /*#__PURE__*/function (_React$Component) {\n  _inherits(KDSplitPanel, _React$Component);\n  function KDSplitPanel() {\n    _classCallCheck(this, KDSplitPanel);\n    return _callSuper(this, KDSplitPanel, arguments);\n  }\n  _createClass(KDSplitPanel, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n        model = _this$props.model,\n        Grow = _this$props.Grow,\n        Shrink = _this$props.Shrink;\n      var style = Object.assign({}, (0, _componentutil.getCommonStyle)(model), this.props.style);\n      style = Object.assign(style, this.props.style);\n      var commonClass = (0, _componentutil.getCommonClass)(model);\n      var state = (0, _global.getGlobalState)();\n      var children = (0, _componentutil.parseSubComponents)(model.meta.get('items', new _immutable.List()), model.pageId, (0, _global.getGlobalState)());\n      return /*#__PURE__*/_react[\"default\"].createElement(_SplitPanel[\"default\"], _extends({\n        style: style\n      }, commonClass, {\n        id: model.key,\n        Grow: Grow,\n        Shrink: Shrink\n      }, this.props.attachData), children, _react[\"default\"].Children.toArray((0, _componentutil.parseSubForms)(model.pageId, model.key, state)));\n    }\n  }]);\n  return KDSplitPanel;\n}(_react[\"default\"].Component), _KDSplitPanel.contextTypes = {\n  store: _propTypes[\"default\"].object\n}, _KDSplitPanel)) || _class) || _class);\nvar _default = exports[\"default\"] = KDSplitPanel;\n\n//# sourceURL=webpack://bos-platform/./src/component/web/KDSplitPanel.js?");

/***/ }),

/***/ "./src/component/web/KDTabPage.js":
/*!****************************************!*\
  !*** ./src/component/web/KDTabPage.js ***!
  \****************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.index-of.js */ \"../../node_modules/core-js/modules/es.array.index-of.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.create.js */ \"../../node_modules/core-js/modules/es.object.create.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.get-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.keys.js */ \"../../node_modules/core-js/modules/es.object.keys.js\");\n__webpack_require__(/*! core-js/modules/es.object.set-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.set-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.reflect.construct.js */ \"../../node_modules/core-js/modules/es.reflect.construct.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.object.assign.js */ \"../../node_modules/core-js/modules/es.object.assign.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.promise.js */ \"../../node_modules/core-js/modules/es.promise.js\");\nvar _react = _interopRequireDefault(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _propTypes = _interopRequireDefault(__webpack_require__(/*! prop-types */ \"../../node_modules/prop-types/index.js\"));\nvar _global = __webpack_require__(/*! @/global */ \"./src/global/index.js\");\nvar _componentutil = __webpack_require__(/*! ../../util/componentutil */ \"./src/util/componentutil.js\");\nvar _Tabs = __webpack_require__(/*! ./base/Tabs */ \"./src/component/web/base/Tabs/index.js\");\nvar _AttachDataWrap = _interopRequireWildcard(__webpack_require__(/*! ../common/AttachDataWrap */ \"./src/component/common/AttachDataWrap.js\"));\nvar _badgeWrap = _interopRequireDefault(__webpack_require__(/*! ../common/badgeWrap */ \"./src/component/common/badgeWrap.js\"));\nvar _VisibleLockWrap = __webpack_require__(/*! @/component/common/VisibleLockWrap */ \"./src/component/common/VisibleLockWrap.js\");\nvar _const = __webpack_require__(/*! @/constant/const */ \"./src/constant/const.js\");\nvar _memoryCacher = __webpack_require__(/*! @/model/memoryCacher */ \"./src/model/memoryCacher.js\");\nvar _excluded = [\"model\", \"title\", \"key\", \"id\", \"homeTab\", \"isStorageMode\", \"lazyLoaded\", \"menus\", \"badgeEle\", \"active\", \"className\"];\nvar _dec, _class, _KDTabPage;\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nvar tabPageExtension = 'tabpage'; // 扩展信息\nvar attachDataKey = 'data-page-id';\nvar KDTabPage = (_dec = (0, _badgeWrap[\"default\"])({\n  top: 0,\n  right: -20\n}, false), (0, _AttachDataWrap[\"default\"])(_class = _dec(_class = (0, _VisibleLockWrap.ContainerLockWrap)(_class = (_KDTabPage = /*#__PURE__*/function (_React$Component) {\n  _inherits(KDTabPage, _React$Component);\n  function KDTabPage(props) {\n    _classCallCheck(this, KDTabPage);\n    return _callSuper(this, KDTabPage, [props]);\n  }\n  _createClass(KDTabPage, [{\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      // 临时方案(列表控件视图切换按钮在页面中显示不出来问题) -wenq\n      var oldAutoOverflow = this.props.model.getDataProperty('autoOverflow');\n      var newAutoOverflow = nextProps.model.getDataProperty('autoOverflow');\n      if (newAutoOverflow && newAutoOverflow !== oldAutoOverflow) {\n        // 页面的层级为'li',其父元素为'ol',要将此li和ol的overflow都设为'visible',则页面里的列表控件其视图切换按钮才可以显示出来\n        // 测试指令：spyApi.doPostActions('','u',[{\"autoOverflow\":true,\"k\":\"tabpageap3\"}])\n        var el = (0, _AttachDataWrap.findDomByDataPageId)((0, _AttachDataWrap.AttachDataManual)(this.props.model.pageId, this.props.model.key, tabPageExtension)[attachDataKey]);\n        if (el) {\n          if (el.style && el.style.overflow !== 'visible') {\n            el.style.overflow = 'visible';\n          }\n          var parent = el.parentElement;\n          if (parent && parent.style && parent.style.overflow !== 'visible') {\n            parent.style.overflow = 'visible';\n          }\n        }\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n        model = _this$props.model,\n        title = _this$props.title,\n        key = _this$props.key,\n        id = _this$props.id,\n        homeTab = _this$props.homeTab,\n        isStorageMode = _this$props.isStorageMode,\n        lazyLoaded = _this$props.lazyLoaded,\n        menus = _this$props.menus,\n        badgeEle = _this$props.badgeEle,\n        active = _this$props.active,\n        className = _this$props.className,\n        others = _objectWithoutProperties(_this$props, _excluded);\n      var propsObj = {\n        title: title,\n        key: key,\n        id: id,\n        homeTab: homeTab,\n        lazyLoaded: lazyLoaded,\n        menus: menus,\n        badgeEle: badgeEle,\n        active: active,\n        className: className,\n        'data-ctrl-type': 'tabbar',\n        'data-pid': model.pageId,\n        'data-ctrl-key': model.key\n      };\n      var style = Object.assign({}, (0, _componentutil.getCommonStyle)(model), this.props.style);\n      var tab = model.meta;\n      var items = tab.get('items');\n      if (this.props.attachData && this.props.attachData[attachDataKey]) {\n        // 页面body部分的全局标示信息,强制加个辅助标示‘tabPageExtension’,为了与页签头的区分\n        this.props.attachData[attachDataKey] = this.props.attachData[attachDataKey] + '_' + tabPageExtension;\n        if (homeTab) {\n          this.props.attachData['data-main-tab'] = model.pageId;\n        }\n      }\n      if (isStorageMode) {\n        // 全局页签平铺模式下页签下外层第一级高级容器的工具栏上提到工具栏那一层\n        this.props.attachData['data-tab-panel-item-storage-mode'] = true;\n        if (items.size && items.getIn([0, 'type']) === 'advcon') {\n          (0, _memoryCacher.setPageData)(model.pageId, [items.getIn([0, 'id']), _const.ATTACH_TOOLBAR_TO_TAB], true);\n        }\n      }\n      return /*#__PURE__*/_react[\"default\"].createElement(_Tabs.TabPanel, _extends({}, propsObj, {\n        style: style\n      }, this.props.attachData), (0, _componentutil.parseSubComponents)(items, model.pageId, (0, _global.getGlobalState)()), _react[\"default\"].Children.toArray((0, _componentutil.parseSubForms)(model.pageId, tab.get('id'), (0, _global.getGlobalState)())));\n    }\n  }]);\n  return KDTabPage;\n}(_react[\"default\"].Component), _KDTabPage.contextTypes = {\n  store: _propTypes[\"default\"].object\n}, _KDTabPage)) || _class) || _class) || _class);\nvar _default = exports[\"default\"] = KDTabPage;\n\n//# sourceURL=webpack://bos-platform/./src/component/web/KDTabPage.js?");

/***/ }),

/***/ "./src/component/web/KDTabs.js":
/*!*************************************!*\
  !*** ./src/component/web/KDTabs.js ***!
  \*************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.create.js */ \"../../node_modules/core-js/modules/es.object.create.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.get-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.set-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.set-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.reflect.construct.js */ \"../../node_modules/core-js/modules/es.reflect.construct.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.array.concat.js */ \"../../node_modules/core-js/modules/es.array.concat.js\");\n__webpack_require__(/*! core-js/modules/es.array.filter.js */ \"../../node_modules/core-js/modules/es.array.filter.js\");\n__webpack_require__(/*! core-js/modules/es.array.find.js */ \"../../node_modules/core-js/modules/es.array.find.js\");\n__webpack_require__(/*! core-js/modules/es.array.find-index.js */ \"../../node_modules/core-js/modules/es.array.find-index.js\");\n__webpack_require__(/*! core-js/modules/es.array.for-each.js */ \"../../node_modules/core-js/modules/es.array.for-each.js\");\n__webpack_require__(/*! core-js/modules/es.array.includes.js */ \"../../node_modules/core-js/modules/es.array.includes.js\");\n__webpack_require__(/*! core-js/modules/es.array.map.js */ \"../../node_modules/core-js/modules/es.array.map.js\");\n__webpack_require__(/*! core-js/modules/es.array.reduce.js */ \"../../node_modules/core-js/modules/es.array.reduce.js\");\n__webpack_require__(/*! core-js/modules/es.array.slice.js */ \"../../node_modules/core-js/modules/es.array.slice.js\");\n__webpack_require__(/*! core-js/modules/es.object.assign.js */ \"../../node_modules/core-js/modules/es.object.assign.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.string.includes.js */ \"../../node_modules/core-js/modules/es.string.includes.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ \"../../node_modules/core-js/modules/web.dom-collections.for-each.js\");\nvar _react = _interopRequireDefault(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _propTypes = _interopRequireDefault(__webpack_require__(/*! prop-types */ \"../../node_modules/prop-types/index.js\"));\nvar _lodash = _interopRequireDefault(__webpack_require__(/*! lodash */ \"../../node_modules/lodash/lodash.js\"));\nvar _immutable = __webpack_require__(/*! immutable */ \"webpack/sharing/consume/default/immutable/immutable?f2ca\");\nvar _global = __webpack_require__(/*! @/global */ \"./src/global/index.js\");\nvar _componentutil = __webpack_require__(/*! ../../util/componentutil */ \"./src/util/componentutil.js\");\nvar _Tabs = __webpack_require__(/*! ./base/Tabs */ \"./src/component/web/base/Tabs/index.js\");\nvar _serverproperties = __webpack_require__(/*! ../../constant/serverproperties */ \"./src/constant/serverproperties.js\");\nvar _ComponentModel = __webpack_require__(/*! ../../model/ComponentModel */ \"./src/model/ComponentModel.js\");\nvar _tabaction = __webpack_require__(/*! ../../action/tabaction */ \"./src/action/tabaction.js\");\nvar _VisibleLockWrap = _interopRequireWildcard(__webpack_require__(/*! ../common/VisibleLockWrap */ \"./src/component/common/VisibleLockWrap.js\"));\nvar _AttachDataWrap = _interopRequireWildcard(__webpack_require__(/*! ../common/AttachDataWrap */ \"./src/component/common/AttachDataWrap.js\"));\nvar _badgeWrap = __webpack_require__(/*! ../common/badgeWrap */ \"./src/component/common/badgeWrap.js\");\nvar _componentFactory = _interopRequireDefault(__webpack_require__(/*! ../../factory/componentFactory */ \"./src/factory/componentFactory.js\"));\nvar _BusyTipWrap = _interopRequireDefault(__webpack_require__(/*! ../common/BusyTipWrap */ \"./src/component/common/BusyTipWrap.js\"));\nvar _memoryCacher = __webpack_require__(/*! @/model/memoryCacher */ \"./src/model/memoryCacher.js\");\nvar _appModelFunction = __webpack_require__(/*! @/model/appModelFunction */ \"./src/model/appModelFunction.js\");\nvar _const = __webpack_require__(/*! @/constant/const */ \"./src/constant/const.js\");\nvar _toolbarUtils = __webpack_require__(/*! @/util/toolbarUtils */ \"./src/util/toolbarUtils.js\");\nvar _toolUtils = __webpack_require__(/*! @/util/toolUtils */ \"./src/util/toolUtils.js\");\nvar _GlobalDataCacher = __webpack_require__(/*! @/model/GlobalDataCacher */ \"./src/model/GlobalDataCacher.js\");\nvar _symbolConst = __webpack_require__(/*! @/constant/symbolConst */ \"./src/constant/symbolConst.js\");\nvar _intlApi = __webpack_require__(/*! @/i18n/intlApi */ \"./src/i18n/intlApi.js\");\nvar _advconUtil = __webpack_require__(/*! @/util/advconUtil */ \"./src/util/advconUtil.js\");\nvar _classnames2 = _interopRequireDefault(__webpack_require__(/*! classnames */ \"../../node_modules/classnames/index.js\"));\nvar action = _interopRequireWildcard(__webpack_require__(/*! @/action/action */ \"./src/action/action.js\"));\nvar _server = __webpack_require__(/*! @/action/actionname/global/system/server */ \"./src/action/actionname/global/system/server/index.js\");\nvar _Slot = _interopRequireDefault(__webpack_require__(/*! @/component/common/Slot */ \"./src/component/common/Slot.jsx\"));\nvar _tooltipsUtil = __webpack_require__(/*! @/util/tooltipsUtil */ \"./src/util/tooltipsUtil.js\");\nvar _PageScope = __webpack_require__(/*! @/pagescope/PageScope */ \"./src/pagescope/PageScope.js\");\nvar _controlBizEventConst = __webpack_require__(/*! @/pagescope/controlBizEvent/controlBizEventConst */ \"./src/pagescope/controlBizEvent/controlBizEventConst.js\");\nvar _Tab = _interopRequireDefault(__webpack_require__(/*! ./base/Tabs/styles/Tab.less */ \"./src/component/web/base/Tabs/styles/Tab.less\"));\nvar _dec, _dec2, _class, _KDTabs;\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nvar tabPageExtension = 'tabpage'; // 扩展信息\nvar KDTabs = (_dec = (0, _BusyTipWrap[\"default\"])(['selectTab'], 600), _dec2 = (0, _VisibleLockWrap[\"default\"])(true), _dec(_class = (0, _AttachDataWrap[\"default\"])(_class = _dec2(_class = (0, _VisibleLockWrap.ContainerLockWrap)(_class = (_KDTabs = /*#__PURE__*/function (_React$Component) {\n  _inherits(KDTabs, _React$Component);\n  function KDTabs(props) {\n    var _this;\n    _classCallCheck(this, KDTabs);\n    _this = _callSuper(this, KDTabs, [props]);\n    _this.getVisibleInfo = function (controlKey, vi) {\n      var model = _this.props.model;\n      return _this.props.getVisible ? _this.props.getVisible(model, controlKey, vi) : true; // 默认可见\n    };\n    _this.handleAppendAdvToolBar = function (tabDOM, advConToolbar) {\n      var currentActiveTabKey = (0, _advconUtil.getCurrentTabPageId)(advConToolbar);\n      advConToolbar.setAttribute('data-tab-page-info', currentActiveTabKey);\n      var mountDOM = tabDOM.querySelector('[data-toolbar-slot]');\n      mountDOM.appendChild(advConToolbar);\n      mountDOM.children.forEach(function (item) {\n        item.style.display = item.dataset.tabPageInfo === _this.activeKey ? 'flex' : 'none';\n      });\n    };\n    _this.handleRemoveAdvToolBar = function (tabDOM, advConToolbar) {\n      if (!tabDOM || !advConToolbar) return;\n      var mountDOM = tabDOM.querySelector('[data-toolbar-slot]');\n      mountDOM.removeChild(advConToolbar);\n    };\n    _this.getTipsConfig = function (tips, pageId, id) {\n      var tipsConfig = (0, _tooltipsUtil.createTipsConfig)(pageId, id);\n      if (tipsConfig) {\n        (0, _tooltipsUtil.saveTipsInfo)(tipsConfig, tips);\n        return tipsConfig;\n      }\n    };\n    _this.handleSelectTab = function (tabKey, isAppTab) {\n      var _this$props = _this.props,\n        dispatch = _this$props.dispatch,\n        model = _this$props.model;\n      (0, _GlobalDataCacher.setData)(_symbolConst.KEY_SWITCH_TAB, {\n        activeTabKey: tabKey,\n        isAppTab: isAppTab\n      });\n      var isStorageMode = (0, _componentutil.getComponentDataProperty)(model, _serverproperties.IS_STORAGE_MODE, _serverproperties.IS_STORAGE_MODE, false) || false;\n      // 如果是收纳模式, 就不像后端发送请求了\n      if (isStorageMode) {\n        var _this$tabRef$current;\n        action.mergeState(_server.UPDATE_CONTROL_STATES, model.pageId, [{\n          key: model.key,\n          currentTab: tabKey\n        }], dispatch);\n        // 更新高级面板工具栏\n        var tabDOM = (_this$tabRef$current = _this.tabRef.current) === null || _this$tabRef$current === void 0 || (_this$tabRef$current = _this$tabRef$current.refs) === null || _this$tabRef$current === void 0 ? void 0 : _this$tabRef$current.kdtab;\n        if (!tabDOM) return;\n        var mountDOM = tabDOM.querySelector('[data-toolbar-slot]');\n        mountDOM.children.forEach(function (item) {\n          item.style.display = item.dataset.tabPageInfo === tabKey ? 'flex' : 'none';\n        });\n        return;\n      }\n      dispatch((0, _tabaction.selectTab)(model, tabKey));\n    };\n    _this.handlePermission = function (data) {\n      if (!data) return;\n      var _data$noPerData = data.noPerData,\n        noPerData = _data$noPerData === void 0 ? [] : _data$noPerData;\n      var newItems = _this.state.items;\n      newItems = newItems.map(function (item) {\n        var menus = item.get('menus');\n        if (menus) {\n          item = item.update('menus', function () {\n            return (0, _toolbarUtils.getPermissionItems)({\n              items: menus,\n              noPerData: noPerData,\n              model: _this.props.model,\n              isTab: true\n            });\n          });\n        }\n        return item;\n      });\n      _this.setState({\n        items: newItems\n      });\n    };\n    _this.handleTabClickEvent = function (data) {\n      if (_this.props.model.pageId === data.tabPageId && _this.props.model.key === data.tabId) {\n        // this.props.dispatch(selectTab(this.props.model, data.key))\n        _this.handleSelectTab(data.key, true);\n        // 每次页签选择之后触发页签选择\n        (0, _memoryCacher.setPageData)(_this.props.model.pageId, 'tabactive', \"\".concat(data.key, \"_\").concat(tabPageExtension));\n      }\n    };\n    _this.handleReOpenTab = function (tabKey) {\n      var dispatch = _this.props.dispatch;\n      dispatch((0, _tabaction.reOpenTab)(_this.props.model, tabKey));\n    };\n    _this.getLockedInfo = function (controlKey, l) {\n      var model = _this.props.model;\n      return _this.props.getLocked ? _this.props.getLocked(model, controlKey, l) : false; // 默认不锁定\n    };\n    _this.getPreviousTab = function () {\n      return _this.collectPreActiveKey;\n    };\n    _this.onDragEnd = function (data) {\n      var sourceKey = data.sourceKey,\n        destinationKey = data.destinationKey;\n      if (sourceKey === destinationKey) return;\n      var _this$props2 = _this.props,\n        model = _this$props2.model,\n        dispatch = _this$props2.dispatch;\n      var state = (0, _global.getGlobalState)();\n      var subForms = (0, _appModelFunction.getControlSubForms)(model.pageId, model.key)(state);\n      var result = (0, _toolUtils.swapData)({\n        sourceKey: sourceKey,\n        destinationKey: destinationKey,\n        dataSource: subForms\n      });\n      dispatch((0, _appModelFunction.convertAppModelFunctionAction)((0, _appModelFunction.setControlSubForms)(model.pageId, model.key, (0, _immutable.fromJS)(result))));\n      (0, _GlobalDataCacher.setData)(_symbolConst.KEY_TAB_SWAP_POSITION, {\n        sourceKey: sourceKey,\n        destinationKey: destinationKey,\n        subForms: result\n      });\n    };\n    _this.handleFullScreen = function () {\n      var fullScreenStatus = !_this.state.tabPageFullScreen;\n      _this.setState({\n        tabPageFullScreen: fullScreenStatus\n      });\n      var model = _this.props.model;\n      var pageId = model.pageId,\n        key = model.key;\n      (0, _advconUtil.updateFullScreenGlobalData)(fullScreenStatus, \"\".concat(pageId, \"_\").concat(key));\n    };\n    _this.getPresetSubTabs = function () {\n      var tabs = _this.state.items;\n      if (!tabs) return [];\n      var model = _this.props.model;\n      var state = (0, _global.getGlobalState)();\n      var isStorageMode = (0, _componentutil.getComponentDataProperty)(model, _serverproperties.IS_STORAGE_MODE, _serverproperties.IS_STORAGE_MODE, false); // 是否是收纳模式\n\n      var subTabs = tabs.reduce(function (nodeList, tab) {\n        var panelModel = (0, _ComponentModel.createComponentModel)(model.pageId, tab, state);\n        if (isStorageMode) {\n          var items = panelModel.getMetaProperty('items');\n          var outerContainerItem = items === null || items === void 0 ? void 0 : items.get(0);\n          if (!outerContainerItem) return nodeList;\n          var outerContainerKey = outerContainerItem.get('id');\n          var outerContainerModel = (0, _ComponentModel.createComponentModel)(model.pageId, outerContainerItem, state);\n          var outerContainerVisible = (0, _componentutil.getVisible)(outerContainerModel, outerContainerKey);\n          if (!outerContainerVisible) return nodeList;\n        }\n        var tabTip = (0, _componentutil.getComponentDataProperty)(panelModel, _serverproperties.TAB_TIP, _serverproperties.TAB_TIP);\n        var text = panelModel.getMetaLocaleProperty('text');\n        var hometab = panelModel.getMetaProperty('homet');\n        var menus = panelModel.getMetaProperty('menus');\n        var icon = panelModel.getMetaProperty('icon');\n        var tabTipColor = (0, _componentutil.getComponentDataProperty)(model, _serverproperties.TAB_TIP_COLOR);\n        var tabPageCanFull = panelModel.getMetaProperty('canFull');\n        var title = tabTip ? /*#__PURE__*/_react[\"default\"].createElement(\"span\", null, text, /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n          style: tabTipColor ? {\n            color: tabTipColor\n          } : null\n        }, \" \".concat(tabTip))) : text;\n        var id = tab.get('id');\n        var visible = (0, _componentutil.getVisible)(panelModel, id);\n        var locked = (0, _componentutil.getLocked)(panelModel, id);\n        var dataPageId = (0, _AttachDataWrap.getDataPageId)(panelModel.pageId, panelModel.key);\n        if (visible) {\n          var badgeInfo = panelModel.getDataProperty('badge');\n          var closable = (0, _componentutil.getComponentDataProperty)(panelModel, 'closable', 'closable'); // 元数据的页签也可配置可关闭\n          var tipsConfig = tab.get('tipsConfig');\n          var slot = tipsConfig ? /*#__PURE__*/_react[\"default\"].createElement(_Slot[\"default\"], {\n            tips: tipsConfig,\n            style: {\n              fontSize: 16,\n              lineHeight: '16px',\n              marginRight: 2\n            }\n          }) : null;\n          var badgeEle = /*#__PURE__*/_react[\"default\"].createElement(_badgeWrap.BadgeElement, {\n            badgeInfo: badgeInfo\n          });\n          var tPanel = (0, _componentFactory[\"default\"])(model.pageId, tab, (0, _global.getGlobalState)(), undefined, {\n            dataPageId: dataPageId\n          });\n          var fullScreenIcon = (0, _classnames2[\"default\"])(_defineProperty(_defineProperty({\n            'kdfont kdfont-quanping': !_this.state.tabPageFullScreen,\n            'kdfont kdfont-guanbiquanping': _this.state.tabPageFullScreen\n          }, _Tab[\"default\"]['full-screen'], true), 'kd-hover-color', true));\n          var fullScreenSlot = tabPageCanFull ? /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n            className: fullScreenIcon,\n            onClick: _this.handleFullScreen,\n            title: _this.state.tabPageFullScreen ? (0, _intlApi.getLangMsg)({\n              key: 'tabs.key0002'\n            }) : (0, _intlApi.getLangMsg)({\n              key: 'tabs.key0001'\n            })\n          }) : null;\n          var addedTabClassName = tabPageCanFull && _this.state.tabPageFullScreen ? 'kd-cq-tabpage-fullscreen' : '';\n          return nodeList.concat( /*#__PURE__*/_react[\"default\"].cloneElement(tPanel, {\n            title: title,\n            key: id,\n            icon: icon,\n            id: id,\n            homeTab: hometab,\n            lazyLoaded: isStorageMode,\n            isStorageMode: isStorageMode,\n            menus: menus,\n            fullScreenSlot: fullScreenSlot,\n            addedTabClassName: addedTabClassName,\n            badgeEle: badgeEle,\n            dynamicTab: closable,\n            locked: locked,\n            slot: slot\n          }));\n        }\n        return nodeList;\n      }, []);\n      return subTabs;\n    };\n    _this.getStaticTabs = function () {\n      var model = _this.props.model;\n      var state = (0, _global.getGlobalState)();\n      var staticTabs = _this.state.items;\n      var presetSubTabs = staticTabs && staticTabs.map(function (tab) {\n        var panelModel = (0, _ComponentModel.createComponentModel)(model.pageId, tab, state);\n        var closable = (0, _componentutil.getComponentDataProperty)(panelModel, 'closable', 'closable');\n        return {\n          id: tab.get('id'),\n          closable: closable\n        };\n      }).toJS();\n      return presetSubTabs;\n    };\n    _this.handleTabClick = function (tabKey) {\n      var model = _this.props.model;\n      _this.handleSelectTab(tabKey);\n      // 每次页签选择之后触发页签选择\n      (0, _memoryCacher.setPageData)(model.pageId, 'tabactive', \"\".concat(tabKey, \"_\").concat(tabPageExtension));\n    };\n    _this.handleClickCloseOther = function (tabKey) {\n      var _this$props3 = _this.props,\n        model = _this$props3.model,\n        dispatch = _this$props3.dispatch;\n      var state = (0, _global.getGlobalState)();\n      var presetSubTabs = _this.getStaticTabs();\n      var shouldClosePresetSubTabs = _lodash[\"default\"].filter(presetSubTabs, function (item) {\n        return item.closable && item.id !== tabKey;\n      }); // 过滤掉当前页签\n\n      var tabPageIds = [];\n      (0, _componentutil.parseSubForms)(model.pageId, model.key, state, function (caption, bill) {\n        if (tabKey !== bill.props.config.pageId) {\n          tabPageIds.push(bill.props.config.pageId);\n        }\n      });\n      dispatch((0, _tabaction.closeTabs)(model, tabPageIds, shouldClosePresetSubTabs));\n      var activeTabKey = model.getDataCurrentTab();\n      // 当前焦点页签非激活页签\n      if (activeTabKey !== tabKey) {\n        // dispatch(selectTab(this.props.model, tabKey))\n        _this.handleSelectTab(tabKey);\n      }\n    };\n    _this.handleClickCloseRight = function (tabKey, rightTabKeys) {\n      var _this$props4 = _this.props,\n        model = _this$props4.model,\n        dispatch = _this$props4.dispatch;\n      var presetSubTabs = _this.getStaticTabs();\n      var shouldClosePresetSubTabs = _lodash[\"default\"].filter(presetSubTabs, ['closable', true]);\n      var currentIndex = shouldClosePresetSubTabs.findIndex(function (item) {\n        return item.id === tabKey;\n      }); // 当前页签的index\n      shouldClosePresetSubTabs = shouldClosePresetSubTabs.slice(currentIndex + 1);\n      dispatch((0, _tabaction.closeTabs)(model, rightTabKeys, shouldClosePresetSubTabs));\n      // 当前激活页签属于被删除页签列表，则激活焦点页签\n      var activeTabKey = model.getDataCurrentTab();\n      if (rightTabKeys.includes(activeTabKey)) {\n        _this.handleSelectTab(tabKey);\n      }\n    };\n    _this.handleClickCloseAll = function () {\n      var _this$props5 = _this.props,\n        model = _this$props5.model,\n        dispatch = _this$props5.dispatch;\n      var state = (0, _global.getGlobalState)();\n      var presetSubTabs = _this.getStaticTabs();\n      var shouldClosePresetSubTabs = _lodash[\"default\"].filter(presetSubTabs, ['closable', true]);\n      var otherPresetSubTabKeys = _lodash[\"default\"].map(_lodash[\"default\"].filter(presetSubTabs, function (t) {\n        return !t.closable;\n      }), function (t) {\n        return t.id;\n      });\n      var nextSelectTabKeys = otherPresetSubTabKeys.pop();\n      var tabPageIds = [];\n      (0, _componentutil.parseSubForms)(model.pageId, model.key, state, function (caption, bill) {\n        tabPageIds.push(bill.props.config.pageId);\n      });\n      dispatch((0, _tabaction.closeTabs)(model, tabPageIds, shouldClosePresetSubTabs, nextSelectTabKeys));\n    };\n    _this.handleMenuClick = function (id, key, opk) {\n      var _this$props6 = _this.props,\n        model = _this$props6.model,\n        dispatch = _this$props6.dispatch;\n      (0, _PageScope.fireControlBizEvent)(model.pageId, model.key, _controlBizEventConst.ITEM_CLICK, {\n        opk: opk,\n        id: key,\n        tabPageId: id\n      });\n      dispatch((0, _tabaction.handleMenuClick)(model, id, key, opk));\n    };\n    _this.forAutoTestActions = {\n      selectTab: _tabaction.selectTab,\n      closeTab: _tabaction.closeTab,\n      handleMenuClick: _tabaction.handleMenuClick\n    };\n    _this.state = {\n      items: props.model.getMetaProperty('items'),\n      tabPageFullScreen: false\n    };\n    _this.tabRef = /*#__PURE__*/_react[\"default\"].createRef();\n    return _this;\n  }\n  _createClass(KDTabs, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this,\n        _this$state$items;\n      var permissionData = (0, _memoryCacher.getPageData)(this.props.model.pageId, _const.PERMISSION_PARAMS);\n      permissionData && this.handlePermission(permissionData);\n      this.removePageDataListener = (0, _memoryCacher.addDataChangeListener)(this.props.model.pageId, _const.PERMISSION_PARAMS, this.handlePermission);\n      var hideNavigation = (0, _componentutil.getComponentDataProperty)(this.props.model, 'hideNav', 'hideNav', false);\n      if (hideNavigation) {\n        var pageId = this.props.model.pageId;\n        var key = this.props.model.key;\n        this.removeSubscribeControlMethod = (0, _memoryCacher.subscribeControlMethod)(pageId, key, 'clickTab', function (pageData) {\n          if (pageData) {\n            _this2.handleTabClickEvent(pageData);\n          }\n        });\n      }\n      var isStorageMode = (0, _componentutil.getComponentDataProperty)(this.props.model, _serverproperties.IS_STORAGE_MODE, _serverproperties.IS_STORAGE_MODE, false); // 是否是收纳模式\n      if (isStorageMode) {\n        var _this$tabRef$current2;\n        var tabDOM = (_this$tabRef$current2 = this.tabRef.current) === null || _this$tabRef$current2 === void 0 || (_this$tabRef$current2 = _this$tabRef$current2.refs) === null || _this$tabRef$current2 === void 0 ? void 0 : _this$tabRef$current2.kdtab;\n        if (tabDOM) {\n          var addAdvConToolbarInfo = (0, _memoryCacher.getPageData)(this.props.model.pageId, [this.props.model.key, '__advcon_toolbar_add_action__']);\n          if (addAdvConToolbarInfo) {\n            this.handleAppendAdvToolBar(tabDOM, addAdvConToolbarInfo);\n          }\n          this.removeAddAdvConToolBarListener = (0, _memoryCacher.addDataChangeListener)(this.props.model.pageId, [this.props.model.key, '__advcon_toolbar_add_action__'], function (advConToolbar) {\n            return _this2.handleAppendAdvToolBar(tabDOM, advConToolbar);\n          });\n          this.removeDeleteAdvConToolBarListener = (0, _memoryCacher.addDataChangeListener)(this.props.model.pageId, [this.props.model.key, '__advcon_toolbar_remove_action__'], function (advConToolbar) {\n            return _this2.handleRemoveAdvToolBar(tabDOM, advConToolbar);\n          });\n        }\n      }\n      var mergeItems = (_this$state$items = this.state.items) === null || _this$state$items === void 0 ? void 0 : _this$state$items.map(function (item) {\n        var tips = item.get('tips');\n        if (!tips) return item;\n        // 产品确认，页签这里如果是操作确认，要展示小图标\n        if (tips.get('isConfirm')) {\n          tips = tips.set('forceShowIcon', true);\n        }\n        var tipsConfig = _this2.getTipsConfig(tips, _this2.props.model.pageId, item.get('id'));\n        var transItem = item.set('tipsConfig', tipsConfig);\n        return transItem;\n      });\n      this.setState({\n        items: mergeItems\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var _this$removeAddAdvCon, _this$removeDeleteAdv;\n      this.removeSubscribeControlMethod && this.removeSubscribeControlMethod();\n      this.removePageDataListener && this.removePageDataListener();\n      (_this$removeAddAdvCon = this.removeAddAdvConToolBarListener) === null || _this$removeAddAdvCon === void 0 || _this$removeAddAdvCon.call(this);\n      (_this$removeDeleteAdv = this.removeDeleteAdvConToolBarListener) === null || _this$removeDeleteAdv === void 0 || _this$removeDeleteAdv.call(this);\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      var _this3 = this;\n      if (!(0, _immutable.is)(nextProps.model.getMetaProperty('items'), this.props.model.getMetaProperty('items'))) {\n        var _nextProps$model$getM;\n        var mergeItems = (_nextProps$model$getM = nextProps.model.getMetaProperty('items')) === null || _nextProps$model$getM === void 0 ? void 0 : _nextProps$model$getM.map(function (item) {\n          var tips = item.get('tips');\n          if (!tips) return item;\n          // 产品确认，页签这里如果是操作确认，要展示小图标\n          if (tips.get('isConfirm')) {\n            tips = tips.set('forceShowIcon', true);\n          }\n          var tipsConfig = _this3.getTipsConfig(tips, nextProps.model.pageId, item.get('id'));\n          var transItem = item.set('tipsConfig', tipsConfig);\n          return transItem;\n        });\n        this.setState({\n          items: mergeItems\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n      var _this$props7 = this.props,\n        model = _this$props7.model,\n        dispatch = _this$props7.dispatch;\n      var locale = model.getUserLocale();\n      var defaultLang = model.getDefaultLang();\n\n      // 如果不存在子元素，直接返回\n      // if (!tabs || tabs.size === 0) return null;\n      // let style = getCommonStyle(model);\n      var style = Object.assign({}, (0, _componentutil.getCommonStyle)(model), this.props.style);\n      var state = (0, _global.getGlobalState)();\n      // 获取当前激活的页签\n      var activeIndex = model.getDataCurrentTab();\n      // let Grow=getComponentDataProperty(model, FLEX_GROW);\n      // let Shrink=getComponentDataProperty(model, FLEX_SHRINK);\n      var AlignSelf = model.getMetaProperty('as');\n      var Grow = model.getMetaProperty(_serverproperties.FLEX_GROW);\n      var Shrink = model.getMetaProperty(_serverproperties.FLEX_SHRINK);\n      var AlignItems = model.getMetaProperty('ai');\n      var hideNav = (0, _componentutil.getComponentDataProperty)(model, 'hideNav', 'hideNav', false);\n      var defaultActivePage = model.getMetaProperty('dap');\n      var canSlide = model.getMetaProperty('canSlide');\n      var canFull = model.getMetaProperty('canFull');\n      var tabStyle = model.getMetaProperty('tabStyle');\n      var showHelp = model.getMetaProperty('showHelp'); // 是否显示页面帮助图标\n      var tabDirection = model.getMetaProperty('tabDirection'); // 标签方向\n      var showMore = model.getMetaProperty('sddi'); // 下拉更多\n      var showTeamWork = model.getMetaProperty('showTeamWork'); // 是否显示云之家协同图标\n      var showInsight = model.getMetaProperty('showInsight'); // 是否显示洞察图标\n      var cannotClickInLock = model.getMetaProperty('cannotClickInLock'); // 锁定禁止点击\n      var isStorageMode = (0, _componentutil.getComponentDataProperty)(model, _serverproperties.IS_STORAGE_MODE, _serverproperties.IS_STORAGE_MODE, false); // 是否是收纳模式\n\n      if (tabDirection === 'vertical') {\n        // 垂直方向时只有卡片风格\n        tabStyle = 4;\n      }\n\n      // 预设的子页签\n      // 改用累加器。之前是map的，如果visible为false的时候会默认返回undefined，没必要\n      var presetSubTabs = this.getPresetSubTabs();\n      var tabNameData = model.getDataProperty('tabName') || {};\n      // 动态新增的子页签\n      var dynamicSubTab = (0, _componentutil.parseSubForms)(model.pageId, model.key, state, function (caption, bill) {\n        var dynamicTabName = tabNameData[bill.props.config.pageId];\n        if (dynamicTabName) caption = dynamicTabName;\n        var config = (0, _appModelFunction.getFormConfig)(bill.props.config.pageId)(_this4.props.appState) || {};\n        var _ref = config.openStyle || {},\n          showType = _ref.showType,\n          reservedSpace = _ref.reservedSpace;\n        var isReservedSpace = false;\n        // 动态页签支持非活动时隐藏并保留大小，解决切换页签时，pdf预览功能chrome下不能重新渲染问题\n        if (showType === 1 && reservedSpace) {\n          isReservedSpace = true;\n        }\n        return /*#__PURE__*/_react[\"default\"].createElement(_Tabs.TabPanel, {\n          title: caption,\n          key: bill.props.config.pageId,\n          id: bill.props.config.pageId,\n          reservedSpace: isReservedSpace,\n          dynamicTab: true,\n          lazyLoaded: true\n        }, bill);\n      });\n      dynamicSubTab = _lodash[\"default\"].filter(dynamicSubTab, function (tab) {\n        return !_lodash[\"default\"].isNull(tab) && !_lodash[\"default\"].isUndefined(tab);\n      });\n      var subTab = _lodash[\"default\"].concat([], presetSubTabs, dynamicSubTab);\n      this.collectPreActiveKey = null; // 用于记录修正的前一个激活的页签，因为可能同时showform 多个表单，这种情况上一个激活的页签是页签集合的倒数第二个\n\n      // 这里activeIndex既有设置成index的，也有设置成页签key的,在页签项动态设置的情况下，可能之前激活的那个页签已不可见，所以应该做个兼容处理，当要选中的页签不存在时，默认选中第一个\n      var isValidActiveIndex = typeof activeIndex === 'number' && activeIndex <= subTab.length - 1 || typeof activeIndex === 'string' && subTab.find(function (item) {\n        return item.key === activeIndex;\n      });\n      if (!isValidActiveIndex) {\n        activeIndex = 0;\n      }\n      if (activeIndex == 0) {\n        // 默认选中第一个页签\n        if (defaultActivePage) {\n          // 如配置了默认打开页签则使用设置\n          activeIndex = defaultActivePage;\n        } else if (presetSubTabs && presetSubTabs.size > 0) {\n          var _presetSubTabs$first;\n          activeIndex = (_presetSubTabs$first = presetSubTabs.first()) === null || _presetSubTabs$first === void 0 ? void 0 : _presetSubTabs$first.key;\n        } else if (subTab && subTab.length > 0) {\n          activeIndex = _lodash[\"default\"].first(subTab).key;\n        } else {\n          activeIndex = '';\n        }\n      } else if (activeIndex == -1) {\n        var _this$preSubTab;\n        // -1代表新页签，打开最后一个\n        activeIndex = subTab.length > 0 ? _lodash[\"default\"].last(subTab).key : '';\n        this.collectPreActiveKey = (subTab === null || subTab === void 0 ? void 0 : subTab.length) - ((_this$preSubTab = this.preSubTab) === null || _this$preSubTab === void 0 ? void 0 : _this$preSubTab.length) > 1 ? subTab[subTab.length - 2].key : null;\n      }\n      this.preSubTab = subTab;\n      this.activeKey = activeIndex;\n      var className = (0, _classnames2[\"default\"])({\n        'kd-cq-tabs-type-storage': isStorageMode\n      });\n      return /*#__PURE__*/_react[\"default\"].createElement(_Tabs.Tabs, _extends({\n        id: model.key,\n        style: style,\n        className: className,\n        activeKey: activeIndex,\n        hideNavigation: hideNav,\n        locale: locale,\n        defaultLang: defaultLang,\n        defaultActivePage: defaultActivePage,\n        canSlide: canSlide,\n        ref: this.tabRef,\n        activeIndex: model.getDataCurrentTab(),\n        getPreviousTab: this.getPreviousTab,\n        canFull: canFull,\n        showHelp: showHelp,\n        isStorageMode: isStorageMode,\n        showTeamWork: showTeamWork,\n        showInsight: showInsight,\n        tabStyle: tabStyle,\n        tabDirection: tabDirection,\n        showMore: showMore,\n        Grow: Grow,\n        Shrink: Shrink,\n        AlignSelf: AlignSelf,\n        AlignItems: AlignItems,\n        handleTabClick: this.handleTabClick,\n        handleCloseClick: function handleCloseClick(tabKey, nextActiveTab) {\n          return dispatch((0, _tabaction.closeTab)(model, tabKey, nextActiveTab));\n        },\n        handleCloseOthersClick: this.handleClickCloseOther,\n        onHandleCloseRightTabClick: this.handleClickCloseRight,\n        handleCloseAllClick: this.handleClickCloseAll,\n        handleReOpenTab: this.handleReOpenTab,\n        setCurrentTab: function setCurrentTab(tabKey) {\n          return dispatch((0, _tabaction.setCurrentTab)(model, tabKey));\n        }\n        // handleMenuClick={(id, key, opk) => dispatch(handleMenuClick(model, id, key, opk))}\n        ,\n        handleMenuClick: this.handleMenuClick,\n        handleIconClick: function handleIconClick(key) {\n          dispatch((0, _tabaction.handleClick)(model, key));\n        },\n        getVisibleInfo: this.getVisibleInfo,\n        getLockedInfo: this.getLockedInfo,\n        pageId: model.pageId,\n        cannotClickInLock: cannotClickInLock,\n        onDragEnd: this.onDragEnd\n      }, this.props.attachData), subTab);\n    }\n  }]);\n  return KDTabs;\n}(_react[\"default\"].Component), _KDTabs.contextTypes = {\n  store: _propTypes[\"default\"].object\n}, _KDTabs)) || _class) || _class) || _class) || _class);\nvar _default = exports[\"default\"] = KDTabs;\n\n//# sourceURL=webpack://bos-platform/./src/component/web/KDTabs.js?");

/***/ }),

/***/ "./src/component/web/KDToolBar.js":
/*!****************************************!*\
  !*** ./src/component/web/KDToolBar.js ***!
  \****************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.object.create.js */ \"../../node_modules/core-js/modules/es.object.create.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-properties.js */ \"../../node_modules/core-js/modules/es.object.define-properties.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptors.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptors.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.get-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.set-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.set-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.reflect.construct.js */ \"../../node_modules/core-js/modules/es.reflect.construct.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.array.filter.js */ \"../../node_modules/core-js/modules/es.array.filter.js\");\n__webpack_require__(/*! core-js/modules/es.array.find.js */ \"../../node_modules/core-js/modules/es.array.find.js\");\n__webpack_require__(/*! core-js/modules/es.array.find-index.js */ \"../../node_modules/core-js/modules/es.array.find-index.js\");\n__webpack_require__(/*! core-js/modules/es.array.for-each.js */ \"../../node_modules/core-js/modules/es.array.for-each.js\");\n__webpack_require__(/*! core-js/modules/es.array.from.js */ \"../../node_modules/core-js/modules/es.array.from.js\");\n__webpack_require__(/*! core-js/modules/es.array.map.js */ \"../../node_modules/core-js/modules/es.array.map.js\");\n__webpack_require__(/*! core-js/modules/es.array.some.js */ \"../../node_modules/core-js/modules/es.array.some.js\");\n__webpack_require__(/*! core-js/modules/es.array.sort.js */ \"../../node_modules/core-js/modules/es.array.sort.js\");\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\n__webpack_require__(/*! core-js/modules/es.function.name.js */ \"../../node_modules/core-js/modules/es.function.name.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.number.max-safe-integer.js */ \"../../node_modules/core-js/modules/es.number.max-safe-integer.js\");\n__webpack_require__(/*! core-js/modules/es.object.assign.js */ \"../../node_modules/core-js/modules/es.object.assign.js\");\n__webpack_require__(/*! core-js/modules/es.object.keys.js */ \"../../node_modules/core-js/modules/es.object.keys.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.object.values.js */ \"../../node_modules/core-js/modules/es.object.values.js\");\n__webpack_require__(/*! core-js/modules/es.parse-int.js */ \"../../node_modules/core-js/modules/es.parse-int.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ \"../../node_modules/core-js/modules/web.dom-collections.for-each.js\");\nvar _react = _interopRequireWildcard(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _reactDom = _interopRequireDefault(__webpack_require__(/*! react-dom */ \"webpack/sharing/consume/default/react-dom/react-dom?418d\"));\nvar _propTypes = _interopRequireDefault(__webpack_require__(/*! prop-types */ \"../../node_modules/prop-types/index.js\"));\nvar _immutable = __webpack_require__(/*! immutable */ \"webpack/sharing/consume/default/immutable/immutable?f2ca\");\nvar _classnames = _interopRequireDefault(__webpack_require__(/*! classnames */ \"../../node_modules/classnames/index.js\"));\nvar _kdesign = __webpack_require__(/*! @kdcloudjs/kdesign */ \"webpack/sharing/consume/default/@kdcloudjs/kdesign/@kdcloudjs/kdesign\");\nvar _lodash = __webpack_require__(/*! lodash */ \"../../node_modules/lodash/lodash.js\");\nvar _global = __webpack_require__(/*! @/global */ \"./src/global/index.js\");\nvar _Toolbar = _interopRequireDefault(__webpack_require__(/*! ./base/Toolbar */ \"./src/component/web/base/Toolbar.js\"));\nvar _toolbaraction = __webpack_require__(/*! ../../action/toolbaraction */ \"./src/action/toolbaraction.js\");\nvar _componentutil = __webpack_require__(/*! ../../util/componentutil */ \"./src/util/componentutil.js\");\nvar _toolbarUtils = __webpack_require__(/*! @/util/toolbarUtils */ \"./src/util/toolbarUtils.js\");\nvar _ComponentModel = _interopRequireDefault(__webpack_require__(/*! ../../model/ComponentModel */ \"./src/model/ComponentModel.js\"));\nvar _VisibleLockWrap = _interopRequireDefault(__webpack_require__(/*! ../common/VisibleLockWrap */ \"./src/component/common/VisibleLockWrap.js\"));\nvar _certService = __webpack_require__(/*! ../../api/certService */ \"./src/api/certService.js\");\nvar _appModelFunction = __webpack_require__(/*! ../../model/appModelFunction */ \"./src/model/appModelFunction.js\");\nvar _AttachDataWrap = _interopRequireDefault(__webpack_require__(/*! ../common/AttachDataWrap */ \"./src/component/common/AttachDataWrap.js\"));\nvar _componentFactory = _interopRequireDefault(__webpack_require__(/*! ../../factory/componentFactory */ \"./src/factory/componentFactory.js\"));\nvar _CtlInterceptors = __webpack_require__(/*! ../common/CtlInterceptors */ \"./src/component/common/CtlInterceptors.js\");\nvar _memoryCacher = __webpack_require__(/*! ../../model/memoryCacher */ \"./src/model/memoryCacher.js\");\nvar _const = __webpack_require__(/*! @/constant/const */ \"./src/constant/const.js\");\nvar _serverproperties = __webpack_require__(/*! ../../constant/serverproperties */ \"./src/constant/serverproperties.js\");\nvar _defaultproperties = __webpack_require__(/*! ../../constant/defaultproperties */ \"./src/constant/defaultproperties.js\");\nvar _ToolbarMore = _interopRequireWildcard(__webpack_require__(/*! ./base/ToolbarMore */ \"./src/component/web/base/ToolbarMore.jsx\"));\nvar _ControlLoadingWrap = _interopRequireDefault(__webpack_require__(/*! ../common/ControlLoadingWrap */ \"./src/component/common/ControlLoadingWrap.js\"));\nvar _clientApi = _interopRequireDefault(__webpack_require__(/*! @/plugin/clientApi */ \"./src/plugin/clientApi.js\"));\nvar _certConst = __webpack_require__(/*! @/constant/certConst */ \"./src/constant/certConst.js\");\nvar _ToolbarMorePanel = _interopRequireDefault(__webpack_require__(/*! @/component/web/ToolbarMorePanel/ToolbarMorePanel */ \"./src/component/web/ToolbarMorePanel/ToolbarMorePanel.jsx\"));\nvar _intlApi = __webpack_require__(/*! @/i18n/intlApi */ \"./src/i18n/intlApi.js\");\nvar _resizeObserve = _interopRequireDefault(__webpack_require__(/*! @/util/resizeObserve */ \"./src/util/resizeObserve.js\"));\nvar _waitUpdateValueUtil = __webpack_require__(/*! @/api/waitUpdateValueUtil */ \"./src/api/waitUpdateValueUtil.js\");\nvar _defaultPropsUtil = __webpack_require__(/*! @/util/defaultPropsUtil */ \"./src/util/defaultPropsUtil.js\");\nvar _customProperties = _interopRequireDefault(__webpack_require__(/*! @/constant/customProperties */ \"./src/constant/customProperties.js\"));\nvar _customCtrlName = _interopRequireDefault(__webpack_require__(/*! @/constant/customCtrlName */ \"./src/constant/customCtrlName.js\"));\nvar _KDToolBar2 = _interopRequireDefault(__webpack_require__(/*! ./KDToolBar.less */ \"./src/component/web/KDToolBar.less\"));\nvar _PageScope = __webpack_require__(/*! @/pagescope/PageScope */ \"./src/pagescope/PageScope.js\");\nvar _controlBizEventConst = __webpack_require__(/*! @/pagescope/controlBizEvent/controlBizEventConst */ \"./src/pagescope/controlBizEvent/controlBizEventConst.js\");\nvar _dec, _class, _KDToolBar;\n/**\n * 工具栏控件\n */\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n// @BusyTipWrap()\nvar MORE_WRAPPER_ID = '__MORE_WRAPPER__';\nvar MORE_WRAPPER_WIDTH = 40; // '...' 按钮\nvar BTN_MARGIN = 40;\nvar ID_CONNECTER = '__$$__'; // id 拼接符\nvar KDToolBar = (_dec = (0, _VisibleLockWrap[\"default\"])(false), (0, _ControlLoadingWrap[\"default\"])(_class = (0, _AttachDataWrap[\"default\"])(_class = _dec(_class = (_KDToolBar = /*#__PURE__*/function (_Component) {\n  _inherits(KDToolBar, _Component);\n  function KDToolBar(props) {\n    var _this;\n    _classCallCheck(this, KDToolBar);\n    _this = _callSuper(this, KDToolBar, [props]);\n    // handleShowFormByTips (...args) {\n    //   const tipsArgs = args\n    //   tipsArgs[1] = this.props.model.key // 需要传整个工具栏而不是子项的key\n    //   this.props.dispatch(showFormByTips(...tipsArgs))\n    // }\n    _this.getTipsSlot = function (id) {\n      try {\n        if (id) {\n          var toolbarNode = _reactDom[\"default\"].findDOMNode(_this.toolbarRef.current);\n          var targetToolbarEle = toolbarNode === null || toolbarNode === void 0 ? void 0 : toolbarNode.querySelector(\"[data-btn-key=\".concat(id, \"]\"));\n          return targetToolbarEle === null || targetToolbarEle === void 0 ? void 0 : targetToolbarEle.querySelector('[data-is-tip=\"true\"]');\n        }\n      } catch (error) {\n        console.log(error);\n        return null;\n      }\n    };\n    _this.setLastVisibleItemId = function () {\n      if (_this.moreRef.current) {\n        _this.lastVisibleItemId = MORE_WRAPPER_ID;\n        return;\n      }\n      var visibleItems = _this.oldItems.findLast(function (item) {\n        var id = item.get(_serverproperties.ID);\n        var vi = item.get(_serverproperties.VISIBLE_CTRL);\n        var visible = _this.getVisible(id, vi);\n        if (item.get('groupId') && item.get(_serverproperties.ID) !== item.get('groupId')) {\n          var result = _this.getSameItem(_this.oldItems, item);\n          visible = result.visible;\n          id = result.id;\n        }\n        return visible;\n      });\n      _this.lastVisibleItemId = (visibleItems === null || visibleItems === void 0 ? void 0 : visibleItems.get(_serverproperties.ID)) || null;\n    };\n    _this.handlePermission = function (data) {\n      if (!data) return;\n      var _data$noPerData = data.noPerData,\n        noPerData = _data$noPerData === void 0 ? [] : _data$noPerData;\n      var items = _this.state.items;\n      var newItems = (0, _toolbarUtils.getPermissionItems)({\n        items: items,\n        noPerData: noPerData,\n        model: _this.props.model\n      });\n      _this.oldItems = newItems;\n      _this.setState({\n        items: newItems,\n        customItems: _this.oldItems.filter(function (it, index) {\n          return it && !it.get(_serverproperties.AS_MORE_BTN);\n        }),\n        dropDownList: _this.getMoreBtns(_this.oldItems, _this.props.model.getUserLocale())\n      });\n    };\n    _this.addResizeObserve = function () {\n      if (!_this.toolbarRef.current) return;\n      _this.resizeObserver = (0, _resizeObserve[\"default\"])(_reactDom[\"default\"].findDOMNode(_this.toolbarRef.current), function (rect) {\n        if (_this.size === undefined) {\n          _this.size = _objectSpread({}, rect);\n          return;\n        }\n\n        // 宽度不相等时，延迟 1.5s 重新赋值\n        // 避免每次 resize 时，按钮闪烁\n        if (_this.size.width !== rect.width) {\n          _this.size = _objectSpread({}, rect);\n          (0, _lodash.debounce)(function () {\n            _this.cacheRights = {};\n            _this.resetObserver();\n          }, 1500);\n        }\n        if (_this.size.isHide !== rect.hide) {\n          _this.size.isHide = rect.hide;\n          _this.cacheRights = {};\n          _this.resetObserver();\n        }\n      });\n    };\n    _this.addIntersectionObserver = function () {\n      var config = {\n        threshold: [0.99999999],\n        root: _reactDom[\"default\"].findDOMNode(_this.toolbarRef.current),\n        rootMargin: \"0px -\".concat(MORE_WRAPPER_WIDTH, \"px 0px 0px\")\n      };\n      var handleIntersectionChange = function handleIntersectionChange(entries) {\n        var moreNode;\n        if (_this.moreRef.current) {\n          moreNode = _reactDom[\"default\"].findDOMNode(_this.moreRef.current);\n        }\n        entries.forEach(function (entry, index) {\n          var id = entry.target.dataset.btnKey;\n          var _entry$boundingClient = entry.boundingClientRect,\n            left = _entry$boundingClient.left,\n            right = _entry$boundingClient.right;\n          if (id) {\n            // left 和 right 均为 0 时，表明该项被隐藏了\n            // 从缓存对象中移除\n            if (left === 0 && right === 0) {\n              delete _this.cacheRights[id];\n            } else {\n              _this.cacheRights[id] = {\n                left: left,\n                right: right,\n                intersectionRatio: entry.intersectionRatio\n              };\n            }\n          }\n\n          // 没有 id 的话，可能\n          if (entry.target === moreNode) {\n            // left 和 right 均为 0 时，表明该项被隐藏了\n            // 从缓存对象中移除\n            if (left === 0 && right === 0) {\n              delete _this.cacheRights[MORE_WRAPPER_ID];\n            } else {\n              _this.cacheRights[MORE_WRAPPER_ID] = {\n                left: left,\n                right: right,\n                intersectionRatio: entry.intersectionRatio\n              };\n            }\n          }\n        });\n        _this.resetFirstInvisibleItemIndex();\n      };\n      // 由于最后一个子项与前面的子项的 margin 不同。最后一个子项不需要考虑被收纳按钮遮挡的情况。\n      // 所以分开两个观察者\n      // 当子项折叠的属性开启时，最后一个按钮必为“更多”，且不存在 btnKey\n      _this.intersectionObserver = new window.IntersectionObserver(handleIntersectionChange, config);\n      _this.lastItemIntersectionObserver = new window.IntersectionObserver(handleIntersectionChange, _objectSpread(_objectSpread({}, config), {}, {\n        rootMargin: '0px 0px 0px 0px'\n      }));\n      if (_this.moreRef.current) {\n        var moreNode = _reactDom[\"default\"].findDOMNode(_this.moreRef.current);\n        _this.lastItemIntersectionObserver.observe(moreNode);\n      }\n      if (_this.toolbarRef.current) {\n        var toolbarNode = _reactDom[\"default\"].findDOMNode(_this.toolbarRef.current);\n        if (toolbarNode.children.length > 1) {\n          Array.from(toolbarNode.children).forEach(function (child) {\n            if (!child.dataset.btnKey) {\n              return;\n            }\n            child.dataset.btnKey === _this.lastVisibleItemId ? _this.lastItemIntersectionObserver.observe(child) : _this.intersectionObserver.observe(child);\n          });\n        }\n      }\n    };\n    /**\n     * 添加子树变化观察\n     * 需注意:\n     * 1. mutation observer 会在页面第一次进来（懒加载）时触发\n     * 2. item 项隐藏到更多或者释放到工具栏时，intersectionObserver 仅会触发隐藏（或显示）的那个项，其他的由于交叉比例没发生变化，不会被触发。\n     * 故所以在隐藏、显示时，需要判断 childList 的变化，重新去观察计算\n     */\n    _this.addMutationObserver = function () {\n      var config = {\n        childList: true\n      };\n      _this.mutationObserver = new window.MutationObserver(function (mutations) {\n        mutations.forEach(function (mutation) {\n          if (mutation.type === 'childList') {\n            _this.resetObserver();\n          }\n        });\n      });\n      if (_this.toolbarRef.current) {\n        var toolbarNode = _reactDom[\"default\"].findDOMNode(_this.toolbarRef.current);\n        _this.mutationObserver.observe(toolbarNode, config);\n      }\n    };\n    /**\n     * 在子项发生变化时，重新计算第一个不可见的按钮索引\n     */\n    _this.resetFirstInvisibleItemIndex = function () {\n      var visibleItems = _this.getVisibleItems();\n      var cache = {};\n      if (visibleItems.size <= Object.keys(_this.cacheRights).length) {\n        visibleItems.forEach(function (item) {\n          if (_this.cacheRights[item.get(_serverproperties.ID)]) {\n            cache[item.get(_serverproperties.ID)] = _this.cacheRights[item.get(_serverproperties.ID)];\n          }\n        });\n      }\n      var values = Object.values(cache).sort(function (item1, item2) {\n        return item1.right - item2.right;\n      });\n      var firstInvisibleItemIndex = values.findIndex(function (item) {\n        return item.intersectionRatio < 1;\n      });\n      var model = _this.props.model;\n      var style = (0, _componentutil.getCommonStyle)(model);\n      if (firstInvisibleItemIndex <= 0 || firstInvisibleItemIndex > visibleItems.size) {\n        firstInvisibleItemIndex = Number.MAX_SAFE_INTEGER;\n      }\n      // left 是相对于浏览器视口，但是按钮的 left 是相对 toolbar 的容器\n      // 故减去第一个按钮的 left\n      var diff = style.paddingLeft ? parseInt(style.paddingLeft) : BTN_MARGIN;\n      var bgColor = _this.getMoreBtnBGColor();\n      _this.setState({\n        dropdownVisible: false,\n        subDropdownVisible: {},\n        showCustomPanel: false,\n        moreBtnStyle: firstInvisibleItemIndex === Number.MAX_SAFE_INTEGER ? {} : {\n          left: values[firstInvisibleItemIndex].left - values[0].left + diff,\n          top: style.paddingTop,\n          backgroundColor: bgColor\n        },\n        firstInvisibleItemIndex: firstInvisibleItemIndex\n      });\n    };\n    _this.getMoreBtnBGColor = function () {\n      if (!_this.toolbarRef.current) return '#fff';\n      try {\n        // findDOMNode 执行时偶现错误Unable to find node on an unmounted component\n        var dom = _reactDom[\"default\"].findDOMNode(_this.toolbarRef.current);\n        while (dom && !dom.style.backgroundColor) {\n          dom = dom.parentElement;\n        }\n        return dom ? dom.style.backgroundColor : '#fff';\n      } catch (err) {\n        return '#fff';\n      }\n    };\n    _this.handleDropdownVisibleChange = function (visible) {\n      var _this$state = _this.state,\n        subDropdownVisible = _this$state.subDropdownVisible,\n        showCustomPanel = _this$state.showCustomPanel;\n      if (!visible && Object.values(subDropdownVisible).some(function (i) {\n        return i === true;\n      })) return;\n      if (showCustomPanel) {\n        _this.setState({\n          dropdownVisible: false,\n          showCustomPanel: false\n        });\n        return;\n      }\n      var newState = {\n        dropdownVisible: visible,\n        subDropdownVisible: !visible ? {} : subDropdownVisible\n      };\n      _this.setState(_objectSpread({}, newState));\n    };\n    _this.getVisibleItems = function () {\n      var _this$state2 = _this.state,\n        items = _this$state2.items,\n        dropDownList = _this$state2.dropDownList;\n      return items.filter(function (item) {\n        var id = item.get(_serverproperties.ID);\n        var vi = item.get(_serverproperties.VISIBLE_CTRL);\n        var visible = _this.getVisible(id, vi);\n        if (item.get('groupId') && item.get(_serverproperties.ID) !== item.get('groupId')) {\n          var result = _this.getSameItem(items, item);\n          visible = result.visible;\n        }\n        var isNotInDropdown = true;\n        var dropdownItem = dropDownList.find(function (dropdownItem) {\n          return dropdownItem.id === item.get(_serverproperties.ID);\n        });\n        if (dropdownItem) {\n          isNotInDropdown = dropdownItem.isChecked;\n        }\n        return visible && isNotInDropdown;\n      });\n    };\n    _this.getMenus = function () {\n      if (!_this.state.dropdownVisible) return [];\n      var _this$state3 = _this.state,\n        firstInvisibleItemIndex = _this$state3.firstInvisibleItemIndex,\n        items = _this$state3.items;\n      if (firstInvisibleItemIndex < 0 || firstInvisibleItemIndex === items.size || firstInvisibleItemIndex === Number.MAX_SAFE_INTEGER) return;\n      var visibleItems = _this.getVisibleItems();\n      var moreMenus = [];\n      var _loop = function _loop() {\n        var defaultLang = _this.props.model.defaultLang;\n        var locale = _this.props.model.getUserLocale();\n        var key = visibleItems.getIn([idx, _serverproperties.ID]);\n        var title = visibleItems.getIn([idx, 'text', locale]) || visibleItems.getIn([idx, 'text', defaultLang]) || visibleItems.getIn([idx, 'text', 'zh_CN']); // 取多语言\n        var opk = visibleItems.getIn([idx, 'opk']);\n        var lock = _this.getLocked(key, visibleItems.getIn([idx, 'l']));\n        var children = visibleItems.getIn([idx, _serverproperties.ITEMS], []);\n        var subitems = [];\n        children.forEach(function (child) {\n          var key = child.get(_serverproperties.ID);\n          var title = child.getIn([_serverproperties.TITLE, locale]) || child.getIn([_serverproperties.TITLE, defaultLang]) || child.getIn([_serverproperties.TITLE, 'zh_CN']); // 取多语言\n          var opk = child.get(_serverproperties.OPERATION_KEY);\n          var lock = _this.getLocked(key, visibleItems.get('l'));\n          var visible = _this.getVisible(key, child.get(_serverproperties.VISIBLE_CTRL));\n          if (visible) {\n            subitems.push((0, _immutable.fromJS)({\n              key: key,\n              title: title,\n              lock: lock,\n              opk: opk\n            }));\n          }\n        });\n        var operationStyle = visibleItems.getIn([idx, _serverproperties.OPERATION_STYELE]);\n        var isDropdown = subitems.length > 0 && (!opk && !operationStyle || operationStyle === 2);\n        moreMenus.push((0, _immutable.fromJS)({\n          key: key,\n          title: title,\n          lock: lock,\n          opk: opk,\n          items: subitems,\n          isDropdown: isDropdown\n        }));\n      };\n      for (var idx = firstInvisibleItemIndex; idx < visibleItems.size; idx++) {\n        _loop();\n      }\n\n      // 更多\n      if (_this.props.model.getMetaProperty(_serverproperties.SHOW_MORE)) {\n        var children = _this.state.dropDownList.filter(function (dropdownItem) {\n          return !dropdownItem.isChecked;\n        }).map(function (dropdownItem) {\n          return (0, _immutable.fromJS)({\n            key: dropdownItem.id,\n            title: dropdownItem.name,\n            lock: dropdownItem.locked,\n            opk: dropdownItem.opk,\n            items: dropdownItem.item && _immutable.List.isList(dropdownItem.item) ? dropdownItem.item.map(function (subitem) {\n              return (0, _immutable.fromJS)({\n                key: subitem.id,\n                title: subitem.name,\n                lock: subitem.locked,\n                opk: subitem.opk\n              });\n            }) : null\n          });\n        });\n        moreMenus.push((0, _immutable.fromJS)({\n          title: (0, _intlApi.getLangMsg)({\n            key: 'toolbar.more'\n          }),\n          key: _serverproperties.TOOLBAR_MORE_BTN,\n          items: children\n        }));\n      }\n      return (0, _ToolbarMorePanel[\"default\"])({\n        items: moreMenus,\n        visible: _this.state.subDropdownVisible,\n        onClick: _this.handleClick,\n        onVisibleChange: _this.handleSubDropdownVisibleChange\n      });\n    };\n    _this.handleSubDropdownVisibleChange = function (visible, id) {\n      var subDropdownVisible = _this.state.subDropdownVisible;\n      subDropdownVisible[id] = visible;\n      _this.setState({\n        subDropdownVisible: subDropdownVisible\n      });\n    };\n    _this.getCustomPanel = function () {\n      var list = _this.state.dropDownList.filter(function (item) {\n        return !item.isNotMod;\n      });\n      // 添加完成按钮\n      list.push({\n        id: '__confirm__',\n        name: (0, _intlApi.getLangMsg)({\n          key: 'toolbar.complete'\n        })\n      });\n      var handleCheckboxChange = function handleCheckboxChange(isChecked, index) {\n        return _this.modifyBtsStatus(list[index], !isChecked);\n      };\n      return /*#__PURE__*/_react[\"default\"].createElement(_kdesign.Dropdown.Menu, {\n        className: _KDToolBar2[\"default\"]['custom-panel']\n      }, /*#__PURE__*/_react[\"default\"].createElement(_react[\"default\"].Fragment, null, /*#__PURE__*/_react[\"default\"].createElement(_ToolbarMore.DropDownWithCheck, {\n        dropDownList: list,\n        userLocal: _this.props.model.getUserLocale(),\n        dropDownItemClick: _this.postDataToUIState,\n        checkboxChange: handleCheckboxChange\n      })));\n    };\n    _this.originalItems = (0, _componentutil.getComponentDataProperty)(_this.props.model, _serverproperties.ITEMS, _serverproperties.ITEMS, false);\n    _this.oldItems = _this.filterItemsStruct((0, _componentutil.getComponentDataProperty)(_this.props.model, _serverproperties.ITEMS, _serverproperties.ITEMS, false)) || (0, _immutable.Map)();\n    _this.handleClick = _this.handleClick.bind(_assertThisInitialized(_this));\n    _this.getVisible = _this.getVisible.bind(_assertThisInitialized(_this));\n    _this.getLocked = _this.getLocked.bind(_assertThisInitialized(_this));\n    // this.handleCertClick = this.handleCertClick.bind(this)\n    _this.postDataToUIState = _this.postDataToUIState.bind(_assertThisInitialized(_this));\n    _this.modifyBtsStatus = _this.modifyBtsStatus.bind(_assertThisInitialized(_this));\n    _this.renewOldItems = _this.renewOldItems.bind(_assertThisInitialized(_this));\n    // this.handleShowFormByTips = this.handleShowFormByTips.bind(this)\n    _this.state = {\n      items: _this.filterItemsStruct((0, _componentutil.getComponentDataProperty)(_this.props.model, _serverproperties.ITEMS, _serverproperties.ITEMS, false)),\n      customItems: _this.oldItems.filter(function (it, index) {\n        return it && !it.get(_serverproperties.AS_MORE_BTN);\n      }),\n      dropDownList: _this.getMoreBtns(_this.oldItems, props.model.getUserLocale()),\n      moreBtnStyle: {},\n      firstInvisibleItemIndex: Number.MAX_SAFE_INTEGER,\n      dropdownVisible: false,\n      subDropdownVisible: {},\n      showCustomPanel: false\n    };\n    _this.toolbarRef = /*#__PURE__*/_react[\"default\"].createRef();\n    _this.moreRef = /*#__PURE__*/_react[\"default\"].createRef(); // 更多按钮\n    _this.moreBtnRef = /*#__PURE__*/_react[\"default\"].createRef(); // ‘...’按钮\n    _this.cacheRights = {};\n    _this.lastVisibleItemId = null; // 最后一个可见项的 id\n    return _this;\n  }\n  _createClass(KDToolBar, [{\n    key: \"filterItemsStruct\",\n    value: function filterItemsStruct(items) {\n      if (!this.props.model.getMetaProperty(_serverproperties.SHOW_MORE)) {\n        return items;\n      }\n      items = items.map(function (item, index) {\n        var moreBtn = item.get(_serverproperties.MORE_BUTTON_MODEL);\n        var isAsMoreBtn = moreBtn === 'asMoreButton';\n        var isHideToMore = false;\n        if (item.get('items')) {\n          item = item.update('items', function (childItems) {\n            return childItems.map(function (it) {\n              return it.merge({\n                groupId: item.get(_serverproperties.ID),\n                currentGroupId: item.get(_serverproperties.ID),\n                ab: isAsMoreBtn,\n                ht: isHideToMore\n              });\n            });\n          });\n        }\n        return item.merge({\n          groupId: item.get(_serverproperties.ID),\n          currentGroupId: item.get(_serverproperties.ID),\n          ab: isAsMoreBtn,\n          ht: isHideToMore\n        });\n      });\n      return items;\n    }\n  }, {\n    key: \"handleClick\",\n    value: function handleClick(id, opk) {\n      var _this2 = this;\n      if (this.state.dropdownVisible) {\n        this.setState({\n          dropdownVisible: false,\n          subDropdownVisible: {}\n        });\n      }\n      if (id === _serverproperties.TOOLBAR_CUSTOM_BTN) {\n        this.setState({\n          showCustomPanel: true\n        });\n        return;\n      }\n      var model = this.props.model;\n      var pageId = model.pageId;\n      var promise = (0, _waitUpdateValueUtil.waitUpdateValueComplete)(pageId);\n      promise.then(function () {\n        _this2._handleClick(id, opk);\n      });\n    }\n  }, {\n    key: \"_handleClick\",\n    value: function _handleClick(id, opk) {\n      var _this3 = this;\n      var model = this.props.model;\n      var meta = model.meta,\n        pageId = model.pageId,\n        key = model.key;\n      var childMeta = meta.get('items').filter(function (item) {\n        return item.get('id') === id;\n      });\n      var takeCert = childMeta.getIn([0, 'tc']);\n      opk = opk || '';\n      (0, _PageScope.fireControlBizEvent)(pageId, key, _controlBizEventConst.ITEM_CLICK, {\n        opk: opk,\n        id: id\n      });\n      if (takeCert) {\n        // 判定是否证书签名\n        // this.testCert(id, opk);\n        // certService.checkCert(pageId, this.handleCertClick, { id, opk })\n        (0, _clientApi[\"default\"])('importCert', {\n          data: {\n            pageId: pageId\n          },\n          callback: function callback(certInfo) {\n            var _this3$props$model = _this3.props.model,\n              pageId = _this3$props$model.pageId,\n              key = _this3$props$model.key;\n            _this3.props.dispatch((0, _appModelFunction.convertAppModelFunctionAction)((0, _appModelFunction.setControlPostValue)(pageId, key, {\n              certInfo: certInfo\n            })));\n            _this3.props.dispatch((0, _toolbaraction.menuItemClick)(_this3.props.model, [id, opk]));\n          },\n          failCallback: function failCallback(result) {\n            if (result.status === _certConst.CERT_STATUS_NOCERT) {\n              _certService.certService.showCertComfirm(pageId);\n            } else if (result.status === _certConst.CERT_STATUS_NOPLGUIN) {\n              _certService.certService.showDownloadComfirm(pageId, result.pluginPath);\n            } else if (result.status === _certConst.CERT_STATUS_TOPESA_NOCERT) {\n              // 没有天威证书 天威证书特有处理\n              _certService.certService.showNoCertComfirm(pageId);\n            } else if (result.status === _certConst.CERT_STATUS_IWSA_NOCERT) {\n              // 没有信安世纪证书\n              _certService.certService.showNoIWSACertMessage(pageId);\n            } else if (result.status === _certConst.CERT_STATUS_NOT_FOUND) {\n              _certService.certService.showNotFoundCertComfirm(pageId);\n            } else {\n              // CERT_STATUS_FAIL\n              _certService.certService.showSignFailedMessage(pageId);\n            }\n          }\n        });\n      } else {\n        var tipsSlot = this.getTipsSlot(id);\n        // 经过拦截器链拦截\n        (0, _CtlInterceptors.interceptActionFn)({\n          model: model,\n          interceptArgs: {\n            id: id,\n            opk: opk,\n            triggerEle: tipsSlot\n          }\n        }, function (args) {\n          var interceptArgs = args.interceptArgs;\n          var id = interceptArgs.id,\n            opk = interceptArgs.opk;\n          _this3.props.dispatch((0, _toolbaraction.menuItemClick)(model, [id, opk]));\n        });\n        // if (model && model.meta && model.meta.get('type') === 'toolbar') {\n        //   model.key = id\n        // }\n      }\n    }\n  }, {\n    key: \"handleShowFormByTips\",\n    value: function handleShowFormByTips() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      var tipsArgs = args;\n      tipsArgs[1] = this.props.model.key; // 需要传整个工具栏而不是子项的key\n      this.props.dispatch(showFormByTips.apply(void 0, tipsArgs));\n    }\n\n    // 元数据比对用户数据\n  }, {\n    key: \"compareMetaDataWithUserData\",\n    value: function compareMetaDataWithUserData(toolbar, items) {\n      var _this4 = this;\n      var temp = {};\n      toolbar.forEach(function (item) {\n        temp[item.get('id')] = item;\n        if (item.get('items')) {\n          item.get('items').forEach(function (item) {\n            temp[item.get('id')] = item;\n          });\n        }\n      });\n      this.oldItems = items.map(function (item, index) {\n        if (temp[item.get('id')]) {\n          var ht = temp[item.get('id')].get('ht');\n          item = item.update('ht', function (value) {\n            return ht;\n          });\n          if (item.get('items')) {\n            item = item.update('items', function (items) {\n              return items.map(function (it, itIndex) {\n                if (temp[it.get('id')]) {\n                  return it.update('ht', function (value) {\n                    return temp[it.get('id')].get('ht');\n                  });\n                }\n                return it;\n              });\n            });\n          }\n        }\n        return item;\n      });\n      var oldItems = this.oldItems;\n      this.oldItems.forEach(function (item) {\n        var childs = [];\n        var childItems = item.get('items');\n        if (childItems) {\n          childItems.forEach(function (it) {\n            if (!it.get(_serverproperties.HIDE_TO_MORE)) {\n              childs.push(it);\n            }\n          });\n          var index = 0;\n          oldItems.some(function (it, i) {\n            index = i;\n            return it.get(_serverproperties.ID) === item.get(_serverproperties.ID);\n          });\n          childs.length && (oldItems = _this4.getResult(oldItems, index, childs));\n        }\n      });\n      this.oldItems = oldItems;\n      this.setState({\n        items: oldItems\n      });\n      this.getCustomItems(oldItems);\n      this.setState({\n        dropDownList: this.getMoreBtns(oldItems, this.props.model.getUserLocale())\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var permissionData = (0, _memoryCacher.getPageData)(this.props.model.pageId, _const.PERMISSION_PARAMS);\n      permissionData && this.handlePermission(permissionData);\n      this.removePageDataListener = (0, _memoryCacher.addDataChangeListener)(this.props.model.pageId, _const.PERMISSION_PARAMS, this.handlePermission);\n      this.setLastVisibleItemId();\n      this.addIntersectionObserver();\n      this.addMutationObserver();\n      this.addResizeObserve();\n      var toolbar = (0, _memoryCacher.getPageUIState)(this.props.model.pageId).get(this.props.model.getMetaProperty('id'));\n      if (!toolbar || !this.props.model.getMetaProperty(_serverproperties.SHOW_MORE)) return;\n      this.toolbar = toolbar.get('more');\n      this.compareMetaDataWithUserData(this.toolbar, this.state.items);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var _this$lastItemInterse;\n      this.intersectionObserver && this.intersectionObserver.disconnect();\n      this.mutationObserver && this.mutationObserver.disconnect();\n      (_this$lastItemInterse = this.lastItemIntersectionObserver) === null || _this$lastItemInterse === void 0 || _this$lastItemInterse.disconnect();\n      this.resizeObserver && this.resizeObserver.removeResizeObserve();\n      this.removePageDataListener && this.removePageDataListener();\n    }\n  }, {\n    key: \"postDataToUIState\",\n    value:\n    // 保存数据\n    function postDataToUIState() {\n      var _this5 = this;\n      this.oldItems = this.items || this.state.items;\n      this.setState({\n        items: this.oldItems,\n        showCustomPanel: false\n      }, function () {\n        if (!_this5.toolbarRef.current) return;\n        var toolbarNode = _reactDom[\"default\"].findDOMNode(_this5.toolbarRef.current);\n        toolbarNode.children.forEach(function (child) {\n          var id = child.dataset.btnKey;\n          if (id) {\n            var _child$getBoundingCli = child.getBoundingClientRect(),\n              left = _child$getBoundingCli.left,\n              right = _child$getBoundingCli.right;\n            if (left === 0 && right === 0) {\n              delete _this5.cacheRights[id];\n            } else {\n              _this5.cacheRights[id] = {\n                left: left,\n                right: right,\n                intersectionRatio: 1\n              };\n            }\n          }\n        });\n        _this5.resetFirstInvisibleItemIndex();\n      });\n      this.getCustomItems(this.oldItems);\n      var toolbar = (0, _immutable.fromJS)({});\n      var index = 0;\n      this.oldItems.forEach(function (item) {\n        if (item.get('groupId') === item.get(_serverproperties.ID)) {\n          var items = item.get('items') && item.get('items').map(function (it) {\n            return (0, _immutable.fromJS)({\n              id: it.get(_serverproperties.ID),\n              ht: it.get('ht'),\n              groupId: it.get('groupId')\n            });\n          });\n          toolbar = toolbar.set(index++, (0, _immutable.fromJS)({\n            id: item.get(_serverproperties.ID),\n            ht: item.get('ht'),\n            items: items,\n            groupId: item.get(_serverproperties.ID)\n          }));\n        }\n      });\n      (0, _memoryCacher.setPageUIState)(this.props.model, 'more', toolbar);\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      var _this6 = this;\n      var orgItems = (0, _componentutil.getComponentDataProperty)(nextProps.model, _serverproperties.ITEMS, _serverproperties.ITEMS, false);\n      if ((0, _immutable.is)(orgItems, this.originalItems)) {\n        this.setState({\n          dropDownList: this.getMoreBtns(this.oldItems, nextProps.model.getUserLocale(), nextProps.model) // 更多可见性需要刷新数据\n        }, function () {\n          _this6.setLastVisibleItemId();\n        });\n        return;\n      }\n      this.originalItems = (0, _componentutil.getComponentDataProperty)(nextProps.model, _serverproperties.ITEMS, _serverproperties.ITEMS, false);\n      var items = this.filterItemsStruct((0, _componentutil.getComponentDataProperty)(nextProps.model, _serverproperties.ITEMS, _serverproperties.ITEMS, false));\n      if (nextProps.model.getMetaProperty(_serverproperties.SHOW_MORE)) {\n        this.compareMetaDataWithUserData(this.toolbar, this.state.items);\n      } else {\n        this.oldItems = items;\n        this.setState({\n          items: items,\n          customItems: this.oldItems.filter(function (it, index) {\n            return it && !it.get(_serverproperties.AS_MORE_BTN);\n          }),\n          dropDownList: this.getMoreBtns(this.oldItems, nextProps.model.getUserLocale())\n        }, function () {\n          _this6.setLastVisibleItemId();\n        });\n      }\n    }\n\n    /**\n     * 重置观察者\n     *\n     * 1. 子树变化\n     * 2. 页签切换\n     */\n  }, {\n    key: \"resetObserver\",\n    value: function resetObserver() {\n      var _this7 = this;\n      if (!this.toolbarRef.current) return;\n      this.intersectionObserver.disconnect();\n      this.lastItemIntersectionObserver.disconnect();\n      Array.from(_reactDom[\"default\"].findDOMNode(this.toolbarRef.current).children).forEach(function (child) {\n        if (!child.dataset.btnKey) {\n          _this7.lastItemIntersectionObserver.observe(child);\n          return;\n        }\n        child.dataset.btnKey === _this7.lastVisibleItemId ? _this7.lastItemIntersectionObserver.observe(child) : _this7.intersectionObserver.observe(child);\n      });\n    }\n\n    // 还原操作\n  }, {\n    key: \"renewOldItems\",\n    value: function renewOldItems() {\n      this.setState({\n        items: this.oldItems\n      });\n      this.items && (this.items = this.oldItems);\n      this.setState({\n        dropDownList: this.getMoreBtns(this.oldItems, this.props.model.getUserLocale())\n      });\n    }\n  }, {\n    key: \"getVisible\",\n    value: function getVisible(controlKey, vi, model) {\n      model = model || this.props.model;\n      return this.props.getVisible ? this.props.getVisible(model, controlKey, vi) : true; // 默认可见\n    }\n  }, {\n    key: \"getLocked\",\n    value: function getLocked(controlKey, l, model) {\n      model = model || this.props.model;\n      return this.props.getLocked(model, controlKey, l);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _barItemShowType;\n      var _this$props = this.props,\n        model = _this$props.model,\n        toolbarLoading = _this$props.toolbarLoading;\n      var locale = model.getUserLocale();\n      // let items = model.getMetaProperty(ITEMS)\n      var state = (0, _global.getGlobalState)();\n      // meta元数据结合运行时的data，配合着完成渲染, 但运行时data优先级高于meta.\n      // let datas = state.getIn(['forms', model.pageId, 'data', model.key, 'value', ITEMS])\n      var items = this.state.items;\n      var showMore = model.getMetaProperty(_serverproperties.SHOW_MORE);\n      if (!items || items.size === 0) return null; // 如果不存在子元素，直接返回\n      var style = (0, _componentutil.getCommonStyle)(model);\n      var Menu = this.state.showCustomPanel ? this.getCustomPanel() : this.getMenus();\n      var color = (0, _defaultPropsUtil.getUIDefaultProps)(_customCtrlName[\"default\"].TOOLBARITEM, _customProperties[\"default\"].COLOR);\n      var backgroundColor = (0, _defaultPropsUtil.getUIDefaultProps)(_customCtrlName[\"default\"].TOOLBARITEM, _customProperties[\"default\"].BACKGROUNG_COLOR);\n      var toolBarMoreStyle = Object.assign({}, {\n        color: color,\n        backgroundColor: backgroundColor\n      });\n      var barItemShowType = (0, _defaultPropsUtil.getUIDefaultProps)(_customCtrlName[\"default\"].TOOLBARITEM, _customProperties[\"default\"].BARITEM_SHOW_TYPE);\n      // 当控件任意按钮配置了背景色、边框、文字颜色，边框&文本风格不生效\n      if (barItemShowType !== undefined && Number(barItemShowType) !== 0 && this.hasSetColor(items)) {\n        barItemShowType = 0;\n      }\n      return /*#__PURE__*/_react[\"default\"].createElement(_Toolbar[\"default\"], _extends({\n        style: style\n      }, this.props.attachData, {\n        ref: this.toolbarRef,\n        \"data-baritem-show-type\": (_barItemShowType = barItemShowType) !== null && _barItemShowType !== void 0 ? _barItemShowType : 0\n      }), this.getCommonBtns(this.state.customItems, model, locale, state, toolbarLoading, barItemShowType), showMore && /*#__PURE__*/_react[\"default\"].createElement(_ToolbarMore[\"default\"], {\n        style: toolBarMoreStyle,\n        key: \"toolbar-more\",\n        renewOldItems: this.renewOldItems,\n        modifyBtsStatus: this.modifyBtsStatus,\n        id: model.key,\n        dropDownList: this.state.dropDownList,\n        model: model,\n        onDropDownClick: this.handleClick,\n        postDataToUIState: this.postDataToUIState,\n        ref: this.moreRef\n      }), this.state.firstInvisibleItemIndex !== Number.MAX_SAFE_INTEGER && /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        className: (0, _classnames[\"default\"])(_KDToolBar2[\"default\"]['more-btn-wrapper'], 'kd-cq-control kd-cq-btn kd-cq-toolbar-item'),\n        style: _objectSpread({}, this.state.moreBtnStyle),\n        ref: this.moreBtnRef\n      }, /*#__PURE__*/_react[\"default\"].createElement(_kdesign.Dropdown, {\n        menu: Menu,\n        visible: this.state.dropdownVisible || this.state.showCustomPanel,\n        onVisibleChange: this.handleDropdownVisibleChange,\n        trigger: \"click\",\n        popperClassName: \"kd-cq-dropdown kd-cq-dropdown-select-type kd-cq-toolbar-more-dropdown\"\n      }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        className: (0, _classnames[\"default\"])(_KDToolBar2[\"default\"]['more-btn'], 'toolbar-btn-without-theme, kd-btn-bg'),\n        style: toolBarMoreStyle\n      }, \"\\xB7\\xB7\\xB7\"))));\n    }\n\n    // 同类项 子项隐藏\n  }, {\n    key: \"getSameItem\",\n    value: function getSameItem(items, item) {\n      var id = item.get(_serverproperties._KEY);\n      var opk = item.get(_serverproperties.OPERATION_KEY);\n      var vi = item.get(_serverproperties.VISIBLE_CTRL);\n      var childs = item.get(_serverproperties.ITEMS);\n      var index = 0; // 获取当前按钮组下标\n      items.some(function (it, idx) {\n        index = idx;\n        return item.get('groupId') === it.get(_serverproperties.ID);\n      });\n      var fatherItem = items.get(index);\n      var fatherVi = this.getVisible(fatherItem.get(_serverproperties.ID), fatherItem.get(_serverproperties.VISIBLE_CTRL));\n      var curretVi = this.getVisible(id, vi);\n      var visible = fatherVi ? curretVi : fatherVi;\n      if (!visible && childs) {\n        item = childs.get(0);\n        item = item.merge((0, _immutable.fromJS)({\n          type: 'baritem',\n          text: item.get('title'),\n          items: childs.size > 0 ? childs[\"delete\"](0) : null\n        }));\n        return this.getSameItem(items, item);\n      }\n      return {\n        item: item,\n        visible: visible,\n        opk: opk,\n        id: id\n      };\n    }\n  }, {\n    key: \"hasSetColor\",\n    value: function hasSetColor(items) {\n      if (!items || items.size === 0) return false;\n      var hasSetColorItem = items.find(function (item) {\n        return item.get(_serverproperties.COLOR) || item.get(_serverproperties.BACKGROUND_COLOR) || item.getIn([_serverproperties.BORDER_STYLE, _serverproperties.BORDER, _serverproperties.TOP]) || item.getIn([_serverproperties.BORDER_STYLE, _serverproperties.BORDER, _serverproperties.RIGHT]) || item.getIn([_serverproperties.BORDER_STYLE, _serverproperties.BORDER, _serverproperties.BOTTOM]) || item.getIn([_serverproperties.BORDER_STYLE, _serverproperties.BORDER, _serverproperties.LEFT]);\n      });\n      return hasSetColorItem !== undefined;\n    }\n\n    // 常规按钮组\n  }, {\n    key: \"getCommonBtns\",\n    value: function getCommonBtns(items, model, locale, state, toolbarLoading, barItemShowType) {\n      var _this8 = this;\n      return items.map(function (item, index) {\n        var id = item.get(_serverproperties.ID);\n        var opk = item.get(_serverproperties.OPERATE_KEY);\n        var replacedOperationKey = item.get('replacedOperationKey');\n        var vi = item.get(_serverproperties.VISIBLE_CTRL);\n        var visible = _this8.getVisible(id, vi);\n        if (item.get('groupId') && item.get(_serverproperties.ID) !== item.get('groupId')) {\n          var result = _this8.getSameItem(items, item);\n          item = result.item;\n          visible = result.visible;\n          opk = result.opk;\n          id = result.id;\n        }\n        var itemModel = new _ComponentModel[\"default\"](model.pageId, item, state);\n        var text = itemModel.getMetaLocaleProperty(_serverproperties.TEXT);\n        var l = item.get(_serverproperties.LOCK_CTRL);\n        var operationStyle = item.get(_serverproperties.OPERATION_STYELE);\n        var dropDownItems = item.get(_serverproperties.ITEMS);\n        // 为何需要判断size，因为没设置下拉项dropDownItems 直接为undefined 这种场景不可隐藏\n        var noNeedShow = (dropDownItems === null || dropDownItems === void 0 ? void 0 : dropDownItems.size) === 0 && (operationStyle === 2 || !operationStyle && !opk); // 如果是交互风格是下拉或者交互风格是默认并无操作代码\n        var dropDownItemsToList = [];\n        var itemStyle = (0, _componentutil.getCommonStyle)(itemModel);\n        if (dropDownItems && _immutable.List.isList(dropDownItems)) {\n          dropDownItems.forEach(function (_item) {\n            var ddItem = {};\n            ddItem.key = _item.get(_serverproperties._KEY);\n            ddItem.opk = _item.get(_serverproperties.OPERATION_KEY);\n            ddItem.background = _item.get(_serverproperties.BG);\n            ddItem.title = _item.getIn([_serverproperties.TITLE, locale]) || _item.getIn([_serverproperties.TITLE, _this8.props.model.defaultLang]) || _item.getIn([_serverproperties.TITLE, 'zh_CN']); // 取多语言\n            ddItem[_serverproperties.VISIBLE_CTRL] = _item.get(_serverproperties.VISIBLE_CTRL);\n            ddItem[_serverproperties.LOCK_CTRL] = _item.get(_serverproperties.LOCK_CTRL);\n            if ( /* this.getVisible(ddItem.key, ddItem[VISIBLE_CTRL]) &&  */!_item.get(_serverproperties.HIDE_TO_MORE)) {\n              dropDownItemsToList.push(ddItem);\n            }\n          });\n        }\n        var locked = _this8.getLocked(id, l);\n        if (visible && !item.get(_serverproperties.HIDE_TO_MORE) && !noNeedShow) {\n          // 可见而且不【折叠在更多】\n          var tbItem = (0, _componentFactory[\"default\"])(itemModel.pageId, item, state);\n          return /*#__PURE__*/_react[\"default\"].cloneElement(tbItem, {\n            model: itemModel,\n            style: itemStyle,\n            title: text,\n            key: id + ID_CONNECTER + index,\n            id: id,\n            operationKey: opk,\n            replacedOperationKey: replacedOperationKey,\n            barItemShowType: barItemShowType,\n            dropDownItems: dropDownItemsToList,\n            onClick: function onClick(e) {\n              _this8.handleClick(id, opk);\n            },\n            onDropDownClick: _this8.handleClick,\n            operationStyle: operationStyle,\n            getVisible: _this8.getVisible,\n            getLocked: _this8.getLocked,\n            locked: locked,\n            toolbarLoading: toolbarLoading,\n            // showFormByTips: this.handleShowFormByTips\n            containerKey: model.key // 工具栏容器的key，帮助文本表单类型需要获取整个工具栏的key\n          });\n        } else {\n          return null;\n        }\n      });\n    }\n  }, {\n    key: \"isSameItem\",\n    value: function isSameItem(it) {\n      var sons = it.get(_serverproperties.ITEMS);\n      var isClick = true;\n      if (sons && (!it.get(_serverproperties.OPERATE_KEY) && !it.get(_serverproperties.OPERATION_STYELE) || it.get(_serverproperties.OPERATION_STYELE) === 2)) {\n        isClick = false;\n      }\n      return isClick;\n    }\n  }, {\n    key: \"getResult\",\n    value: function getResult(newItems, index, childs) {\n      var fatherItem = newItems.get(index);\n      var groupId = fatherItem.get('groupId');\n      newItems = newItems.filter(function (it) {\n        return it.get('groupId') !== groupId || it.get(_serverproperties.ID) === groupId;\n      });\n      if (fatherItem.get(_serverproperties.HIDE_TO_MORE) && childs.length) {\n        if (this.isSameItem(fatherItem)) {\n          var currentItem = childs.shift();\n          currentItem = currentItem.merge((0, _immutable.fromJS)({\n            type: 'baritem',\n            text: currentItem.get('title'),\n            items: childs.length ? childs : null\n          }));\n          newItems = newItems.insert(index + 1, currentItem);\n        } else {\n          childs.forEach(function (item, i) {\n            item = item.merge((0, _immutable.fromJS)({\n              type: 'baritem',\n              text: item.get('title')\n            }));\n            newItems = newItems.insert(index + 1 + i, item);\n          });\n        }\n      }\n      return newItems;\n    }\n  }, {\n    key: \"modifyBtsStatus\",\n    value: function modifyBtsStatus(item, hidetomore) {\n      var newItems = this.items || this.state.items;\n      var groupId = item.item.get('groupId');\n      var index = 0; // 获取当前按钮组下标\n      newItems.some(function (it, idx) {\n        index = idx;\n        return groupId === it.get(_serverproperties.ID);\n      });\n      var fatherItem = newItems.get(index);\n      var childItems = fatherItem.get('items');\n      var isAll = fatherItem.get(_serverproperties.ID) === item.item.get(_serverproperties.ID); // 是否点击工具栏项\n\n      if (isAll) {\n        newItems = newItems.setIn([index, _serverproperties.HIDE_TO_MORE], hidetomore);\n        if (childItems) {\n          var childs = []; // 将外置的项\n          childItems.forEach(function (it) {\n            if (!it.get(_serverproperties.HIDE_TO_MORE)) {\n              childs.push(it);\n            }\n          });\n          newItems = this.getResult(newItems, index, childs);\n        }\n      } else {\n        var _childs = []; // 将外置的项\n        newItems = newItems.updateIn([index, 'items'], function (vaules) {\n          return vaules.map(function (value) {\n            if (value.get(_serverproperties.ID) === item.item.get(_serverproperties.ID)) {\n              value = value.set(_serverproperties.HIDE_TO_MORE, hidetomore);\n            }\n            if (!value.get(_serverproperties.HIDE_TO_MORE)) {\n              _childs.push(value);\n            }\n            return value;\n          });\n        });\n        if (!this.isSameItem(fatherItem)) {\n          var childNums = 0;\n          newItems.get(index).get('items').forEach(function (it, i) {\n            if (it.get(_serverproperties.HIDE_TO_MORE) === hidetomore) {\n              childNums++;\n            }\n          });\n          if (childNums === fatherItem.get('items').size && !hidetomore) {\n            // 子项全部选中\n            newItems = newItems.setIn([index, _serverproperties.HIDE_TO_MORE], hidetomore);\n          }\n        }\n        newItems = this.getResult(newItems, index, _childs);\n      }\n      this.setState({\n        dropDownList: this.getMoreBtns(newItems, this.props.model.getUserLocale())\n      });\n      this.items = newItems;\n    }\n  }, {\n    key: \"getCustomItems\",\n    value: function getCustomItems(items) {\n      // 用户可自定义的项\n      var customItems = items.filter(function (it, index) {\n        return it && !it.get(_serverproperties.AS_MORE_BTN);\n      });\n      this.setState({\n        customItems: customItems\n      });\n    }\n  }, {\n    key: \"getMoreBtns\",\n    value: function getMoreBtns(items, locale, model) {\n      var _this9 = this;\n      items = items.filter(function (item) {\n        return item.get(_serverproperties.ID) === item.get('groupId');\n      });\n      var dropDownList = [];\n      /**\n       *  处理逻辑改变:\n       *  AS_MORE_BTN  固定到“更多”，[该项从工具栏项去除, 若有下拉项将该项的下拉子项全部挪移到【更多】里面, 若无下拉则将该项挪移到【更多】，而且不会被释放出来]\n       *  HIDE_TO_MORE 折叠到“更多”  [属于用户可自定义的配置]\n       */\n      // “固定到更多”的项\n      var fixedItems = items.filter(function (it, index) {\n        return it && it.get(_serverproperties.AS_MORE_BTN);\n      });\n      // 用户可自定义的项\n      var customItems = items.filter(function (it, index) {\n        return it && !it.get(_serverproperties.AS_MORE_BTN);\n      });\n\n      // 自定义项先下推到【更多下拉列表】\n      customItems.forEach(function (it, index) {\n        var id = it.get(_serverproperties.ID);\n        var vi = it.get(_serverproperties.VISIBLE_CTRL);\n        var sons = it.get(_serverproperties.ITEMS);\n        var visible = _this9.getVisible(id, vi, model);\n        var isClick = true;\n        if (sons && (!it.get(_serverproperties.OPERATE_KEY) && !it.get(_serverproperties.OPERATION_STYELE) || it.get(_serverproperties.OPERATION_STYELE) === 2)) {\n          isClick = false;\n        }\n        var locked = _this9.getLocked(id, it.get(_serverproperties.LOCK_CTRL), model);\n        if (visible) {\n          dropDownList.push({\n            id: it.get(_serverproperties.ID),\n            name: it.getIn([_serverproperties.TEXT, locale]),\n            opk: it.get(_serverproperties.OPERATE_KEY),\n            isChecked: !it.get(_serverproperties.HIDE_TO_MORE),\n            isClick: isClick,\n            itemsSize: sons && sons.size,\n            item: it,\n            locked: locked\n          });\n          if (sons) {\n            sons.forEach(function (sonItem, index) {\n              if (!_this9.getVisible(sonItem.get(_serverproperties._KEY), sonItem.get(_serverproperties.VISIBLE_CTRL) || _defaultproperties.DEFAULT_CTRL_VISIBLE, model)) return;\n              var sonLock = _this9.getLocked(sonItem.get(_serverproperties._KEY), sonItem.get(_serverproperties.LOCK_CTRL));\n              dropDownList.push({\n                id: sonItem.get(_serverproperties.ID),\n                name: sonItem.getIn([_serverproperties.TITLE, locale]),\n                opk: sonItem.get(_serverproperties.OPERATION_KEY),\n                isChecked: !sonItem.get(_serverproperties.HIDE_TO_MORE),\n                isSonItem: true,\n                isClick: true,\n                item: sonItem,\n                locked: sonLock\n              });\n            });\n          }\n        }\n      });\n\n      // “固定到更多”的下推到【更多下拉列表】\n      fixedItems.forEach(function (it) {\n        var visible = _this9.getVisible(it.get(_serverproperties.ID), it.get(_serverproperties.VISIBLE_CTRL) || _defaultproperties.DEFAULT_CTRL_VISIBLE, model);\n        if (!visible) return;\n        var sons = it.get(_serverproperties.ITEMS);\n        var isClick = true;\n        if (sons && (!it.get(_serverproperties.OPERATE_KEY) && !it.get(_serverproperties.OPERATION_STYELE) || it.get(_serverproperties.OPERATION_STYELE) === 2)) {\n          isClick = false;\n        }\n        var locked = _this9.getLocked(it.get(_serverproperties.ID), it.get(_serverproperties.LOCK_CTRL), model);\n        dropDownList.push({\n          id: it.get(_serverproperties.ID),\n          name: it.getIn([_serverproperties.TEXT, locale]),\n          opk: it.get(_serverproperties.OPERATE_KEY),\n          isChecked: false,\n          isNotMod: true,\n          isClick: isClick,\n          item: it,\n          locked: locked\n        });\n        if (sons) {\n          // 有子项则全部子项下推【更多下拉列表】，自身不下推\n          sons.forEach(function (sonItem) {\n            if (!_this9.getVisible(sonItem.get(_serverproperties._KEY), sonItem.get(_serverproperties.VISIBLE_CTRL) || _defaultproperties.DEFAULT_CTRL_VISIBLE, model)) return;\n            var sonLock = _this9.getLocked(sonItem.get(_serverproperties._KEY), sonItem.get(_serverproperties.LOCK_CTRL));\n            dropDownList.push({\n              id: sonItem.get(_serverproperties.ID),\n              name: sonItem.getIn([_serverproperties.TITLE, locale]),\n              opk: sonItem.get(_serverproperties.OPERATION_KEY),\n              isChecked: false,\n              isSonItem: true,\n              isNotMod: true,\n              isClick: true,\n              item: sonItem,\n              locked: sonLock\n            });\n          });\n        }\n      });\n      return dropDownList;\n    }\n\n    // 常规按钮组 + 更多\n  }, {\n    key: \"getCombinedBtns\",\n    value: function getCombinedBtns(items, model, locale, state, toolbarLoading) {\n      // datas只包含可自定义操作的项\n      return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        style: {\n          display: 'flex',\n          alignItems: 'center'\n        }\n      }, this.getCommonBtns(this.state.customItems, model, locale, state, toolbarLoading), /*#__PURE__*/_react[\"default\"].createElement(_ToolbarMore[\"default\"], {\n        key: \"toolbar-more\",\n        renewOldItems: this.renewOldItems,\n        modifyBtsStatus: this.modifyBtsStatus,\n        id: model.key,\n        dropDownList: this.state.dropDownList,\n        model: model,\n        onDropDownClick: this.handleClick,\n        postDataToUIState: this.postDataToUIState\n      }));\n    }\n  }]);\n  return KDToolBar;\n}(_react.Component), _KDToolBar.contextTypes = {\n  store: _propTypes[\"default\"].object\n}, _KDToolBar)) || _class) || _class) || _class);\nvar _default = exports[\"default\"] = KDToolBar;\n\n//# sourceURL=webpack://bos-platform/./src/component/web/KDToolBar.js?");

/***/ }),

/***/ "./src/component/web/KDToolbarItem.js":
/*!********************************************!*\
  !*** ./src/component/web/KDToolbarItem.js ***!
  \********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.object.create.js */ \"../../node_modules/core-js/modules/es.object.create.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.get-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.set-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.set-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.reflect.construct.js */ \"../../node_modules/core-js/modules/es.reflect.construct.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.array.includes.js */ \"../../node_modules/core-js/modules/es.array.includes.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-string.js */ \"../../node_modules/core-js/modules/es.date.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\n__webpack_require__(/*! core-js/modules/es.function.name.js */ \"../../node_modules/core-js/modules/es.function.name.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.assign.js */ \"../../node_modules/core-js/modules/es.object.assign.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.regexp.to-string.js */ \"../../node_modules/core-js/modules/es.regexp.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.string.includes.js */ \"../../node_modules/core-js/modules/es.string.includes.js\");\nvar _react = _interopRequireDefault(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _immutable = __webpack_require__(/*! immutable */ \"webpack/sharing/consume/default/immutable/immutable?f2ca\");\nvar _ToolbarItem = _interopRequireDefault(__webpack_require__(/*! ./base/ToolbarItem */ \"./src/component/web/base/ToolbarItem.js\"));\nvar _componentutil = __webpack_require__(/*! ../../util/componentutil */ \"./src/util/componentutil.js\");\nvar _AttachDataWrap = _interopRequireDefault(__webpack_require__(/*! ../common/AttachDataWrap */ \"./src/component/common/AttachDataWrap.js\"));\nvar _badgeWrap = _interopRequireDefault(__webpack_require__(/*! ../common/badgeWrap */ \"./src/component/common/badgeWrap.js\"));\nvar _ControlLoadingWrap = _interopRequireDefault(__webpack_require__(/*! ../common/ControlLoadingWrap */ \"./src/component/common/ControlLoadingWrap.js\"));\nvar _Slot = _interopRequireDefault(__webpack_require__(/*! @/component/common/Slot */ \"./src/component/common/Slot.jsx\"));\nvar _toolUtils = __webpack_require__(/*! @/util/toolUtils */ \"./src/util/toolUtils.js\");\nvar _defaultPropsUtil = __webpack_require__(/*! @/util/defaultPropsUtil */ \"./src/util/defaultPropsUtil.js\");\nvar _customProperties = _interopRequireDefault(__webpack_require__(/*! @/constant/customProperties */ \"./src/constant/customProperties.js\"));\nvar _keyCodeTool = __webpack_require__(/*! @/util/keyCodeTool */ \"./src/util/keyCodeTool.js\");\nvar _UpdateShortCutWrap = _interopRequireDefault(__webpack_require__(/*! @/component/common/UpdateShortCutWrap */ \"./src/component/common/UpdateShortCutWrap.js\"));\nvar _colorUtil = _interopRequireWildcard(__webpack_require__(/*! @/util/colorUtil */ \"./src/util/colorUtil.js\"));\nvar _tooltipsUtil = __webpack_require__(/*! @/util/tooltipsUtil */ \"./src/util/tooltipsUtil.js\");\nvar _componentutil2 = __webpack_require__(/*! @/util/componentutil */ \"./src/util/componentutil.js\");\nvar _dec, _class;\n/**\n * 工具栏控件\n */\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n// 工具栏项\nvar KDToolbarItem = (_dec = (0, _badgeWrap[\"default\"])(), (0, _ControlLoadingWrap[\"default\"])(_class = _dec(_class = (0, _AttachDataWrap[\"default\"])(_class = (0, _UpdateShortCutWrap[\"default\"])(_class = /*#__PURE__*/function (_React$Component) {\n  _inherits(KDToolbarItem, _React$Component);\n  function KDToolbarItem(props) {\n    var _this;\n    _classCallCheck(this, KDToolbarItem);\n    _this = _callSuper(this, KDToolbarItem, [props]);\n    _this.updateTipsConfig = _this.updateTipsConfig.bind(_assertThisInitialized(_this));\n    _this.state = {\n      tipsConfig: null\n    };\n    return _this;\n  }\n  _createClass(KDToolbarItem, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props = this.props,\n        model = _this$props.model,\n        containerKey = _this$props.containerKey;\n      var tips = (0, _tooltipsUtil.getTips)(this.props.model);\n      if (tips) this.updateTipsConfig(model.pageId, containerKey, tips);\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      var _nextProps$model;\n      var tips = (0, _tooltipsUtil.getTips)(this.props.model);\n      var nextTips = (0, _tooltipsUtil.getTips)(nextProps.model);\n      if (!(0, _immutable.is)(tips, nextTips)) this.updateTipsConfig((_nextProps$model = nextProps.model) === null || _nextProps$model === void 0 ? void 0 : _nextProps$model.pageId, nextProps.containerKey, nextTips);\n    }\n  }, {\n    key: \"updateTipsConfig\",\n    value: function updateTipsConfig(pageId, id, tips) {\n      if (!tips) {\n        // 可以通过u指令设置tips为空\n        this.setState({\n          tipsConfig: null\n        });\n        return;\n      }\n      var tipsConfig = this.state.tipsConfig;\n      if (!tipsConfig) {\n        tipsConfig = (0, _tooltipsUtil.createTipsConfig)(pageId, id);\n        this.setState({\n          tipsConfig: tipsConfig\n        });\n      }\n      (0, _tooltipsUtil.saveTipsInfo)(tipsConfig, tips);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _getkeyCodeInfoByOpk;\n      var _this$props2 = this.props,\n        model = _this$props2.model,\n        _this$props2$style = _this$props2.style,\n        styleProp = _this$props2$style === void 0 ? {} : _this$props2$style,\n        title = _this$props2.title,\n        key = _this$props2.key,\n        id = _this$props2.id,\n        operationKey = _this$props2.operationKey,\n        replacedOperationKey = _this$props2.replacedOperationKey,\n        dropDownItems = _this$props2.dropDownItems,\n        onClick = _this$props2.onClick,\n        onDropDownClick = _this$props2.onDropDownClick,\n        operationStyle = _this$props2.operationStyle,\n        getVisible = _this$props2.getVisible,\n        getLocked = _this$props2.getLocked,\n        locked = _this$props2.locked,\n        locale = _this$props2.locale,\n        toolbarLoading = _this$props2.toolbarLoading,\n        text = _this$props2.text,\n        _this$props2$barItemS = _this$props2.barItemShowType,\n        barItemShowType = _this$props2$barItemS === void 0 ? 0 : _this$props2$barItemS;\n      var tipsConfig = this.state.tipsConfig;\n      var currentTheme = (0, _componentutil.getCurrentTheme)();\n      var opk = model && model.getMetaProperty('opk');\n      var commonStyle = (0, _componentutil.getCommonStyle)(model) || {};\n      var hasBorder = (0, _componentutil.hasSetBorder)(commonStyle);\n      var isThemeColor = commonStyle.color === currentTheme;\n      var isWhiteBg = (0, _toolUtils.isWhiteColorBg)(commonStyle.backgroundColor);\n      var hasNonThemeBg = commonStyle.backgroundColor && commonStyle.backgroundColor !== currentTheme;\n      var type = model && model.meta && model.meta.get('type');\n      var ghostTypeBorder = (0, _defaultPropsUtil.getUIDefaultProps)(type, _customProperties[\"default\"].GHOST_TYPE_BORDER);\n      var style = Object.assign({}, styleProp);\n      // 幽灵按钮进行特殊处理\n      if (isWhiteBg && ghostTypeBorder !== undefined) {\n        style.borderTop = style.borderTop || (0, _defaultPropsUtil.getDefaultBorder)(ghostTypeBorder).borderTop;\n        style.borderBottom = style.borderBottom || (0, _defaultPropsUtil.getDefaultBorder)(ghostTypeBorder).borderBottom;\n        style.borderLeft = style.borderLeft || (0, _defaultPropsUtil.getDefaultBorder)(ghostTypeBorder).borderLeft;\n        style.borderRight = style.borderRight || (0, _defaultPropsUtil.getDefaultBorder)(ghostTypeBorder).borderRight;\n      }\n      var defaultBorder = isWhiteBg && ghostTypeBorder;\n      var borderContent = model && model.getMetaProperty('s') && model.getMetaProperty('s').get('b') || defaultBorder;\n      var isThemeBorder = borderContent && borderContent.toString().includes('themeColor');\n      var shortCutTips = (_getkeyCodeInfoByOpk = (0, _keyCodeTool.getkeyCodeInfoByOpk)(opk)) === null || _getkeyCodeInfoByOpk === void 0 ? void 0 : _getkeyCodeInfoByOpk.name;\n      // 锁定时 锁定色是根据字体或者设置的背景色计算的\n      if (locked && Number(barItemShowType) === 0) {\n        var _style$backgroundColo;\n        // 工具栏默认背景色是主题色\n        var originColor = isWhiteBg ? style.color : (_style$backgroundColo = style.backgroundColor) !== null && _style$backgroundColo !== void 0 ? _style$backgroundColo : currentTheme;\n        //  以为是计算锁定色的规则\n        var colorLevel6 = (0, _colorUtil[\"default\"])(originColor, 6);\n        var disabledColor = (0, _colorUtil.getColorByAlpha)(colorLevel6, 0.6);\n        if (!isWhiteBg) {\n          style.backgroundColor = disabledColor;\n        } else {\n          style.color = disabledColor;\n        }\n      }\n      var slot;\n      if (tipsConfig) {\n        var _getTips, _getTips2;\n        slot = /*#__PURE__*/_react[\"default\"].createElement(_Slot[\"default\"], {\n          tips: tipsConfig,\n          style: {\n            marginRight: 12\n          }\n        });\n        style.marginRight = (_getTips = (0, _tooltipsUtil.getTips)(this.props.model)) !== null && _getTips !== void 0 && _getTips.get('showIcon') && !((_getTips2 = (0, _tooltipsUtil.getTips)(this.props.model)) !== null && _getTips2 !== void 0 && _getTips2.get('isConfirm')) ? 0 : 12;\n      }\n      var propsOjb = {\n        style: style,\n        key: key,\n        id: id,\n        operationKey: operationKey,\n        replacedOperationKey: replacedOperationKey,\n        dropDownItems: dropDownItems,\n        onClick: onClick,\n        onDropDownClick: onDropDownClick,\n        operationStyle: operationStyle,\n        getVisible: getVisible,\n        getLocked: getLocked,\n        locale: locale,\n        barItemShowType: barItemShowType\n      };\n      return /*#__PURE__*/_react[\"default\"].createElement(_ToolbarItem[\"default\"], _extends({}, propsOjb, this.props.attachData, {\n        title: text || title,\n        locked: locked,\n        toolbarLoading: toolbarLoading,\n        hasBorder: hasBorder,\n        isThemeColor: isThemeColor,\n        isWhiteBg: isWhiteBg,\n        isThemeBorder: isThemeBorder,\n        hasNonThemeBg: hasNonThemeBg,\n        model: model,\n        opk: opk,\n        shortCutTips: shortCutTips,\n        type: type,\n        slot: slot\n      }));\n    }\n  }]);\n  return KDToolbarItem;\n}(_react[\"default\"].Component)) || _class) || _class) || _class) || _class);\nvar _default = exports[\"default\"] = KDToolbarItem;\n\n//# sourceURL=webpack://bos-platform/./src/component/web/KDToolbarItem.js?");

/***/ }),

/***/ "./src/component/web/base/CommonFunctionPanel.jsx":
/*!********************************************************!*\
  !*** ./src/component/web/base/CommonFunctionPanel.jsx ***!
  \********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.index-of.js */ \"../../node_modules/core-js/modules/es.array.index-of.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.create.js */ \"../../node_modules/core-js/modules/es.object.create.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.get-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.keys.js */ \"../../node_modules/core-js/modules/es.object.keys.js\");\n__webpack_require__(/*! core-js/modules/es.reflect.construct.js */ \"../../node_modules/core-js/modules/es.reflect.construct.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = exports.MenuItem = exports.MenuGroup = exports.CommonFunctionPanel = void 0;\n__webpack_require__(/*! core-js/modules/es.array.for-each.js */ \"../../node_modules/core-js/modules/es.array.for-each.js\");\n__webpack_require__(/*! core-js/modules/es.array.map.js */ \"../../node_modules/core-js/modules/es.array.map.js\");\n__webpack_require__(/*! core-js/modules/es.array.slice.js */ \"../../node_modules/core-js/modules/es.array.slice.js\");\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\n__webpack_require__(/*! core-js/modules/es.object.assign.js */ \"../../node_modules/core-js/modules/es.object.assign.js\");\n__webpack_require__(/*! core-js/modules/es.object.set-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.set-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.promise.js */ \"../../node_modules/core-js/modules/es.promise.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ \"../../node_modules/core-js/modules/web.dom-collections.for-each.js\");\nvar _react = _interopRequireWildcard(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _propTypes = _interopRequireDefault(__webpack_require__(/*! prop-types */ \"../../node_modules/prop-types/index.js\"));\nvar _classnames3 = _interopRequireDefault(__webpack_require__(/*! classnames */ \"../../node_modules/classnames/index.js\"));\nvar _commonUtils = _interopRequireDefault(__webpack_require__(/*! ../../common/commonUtils */ \"./src/component/common/commonUtils.js\"));\nvar _CommonFunctionPanel = _interopRequireDefault(__webpack_require__(/*! ./CommonFunctionPanel.less */ \"./src/component/web/base/CommonFunctionPanel.less\"));\nvar _immutable = __webpack_require__(/*! immutable */ \"webpack/sharing/consume/default/immutable/immutable?f2ca\");\nvar _TextEllipsisWrap = _interopRequireDefault(__webpack_require__(/*! @/component/common/TextEllipsisWrap */ \"./src/component/common/TextEllipsisWrap.js\"));\nvar _excluded = [\"style\", \"className\", \"Grow\", \"Shrink\", \"AlignSelf\", \"Overflow\", \"data\", \"itemClick\", \"groupMaxItemCount\", \"autoWrap\", \"maxViewHeight\", \"ignoreEmptyGroup\"],\n  _excluded2 = [\"style\", \"className\", \"data\", \"itemClick\"],\n  _excluded3 = [\"style\", \"className\", \"data\", \"itemClick\"];\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); } // 常用功能面板\nvar CommonFunctionPanel = exports.CommonFunctionPanel = /*#__PURE__*/function (_Component) {\n  _inherits(CommonFunctionPanel, _Component);\n  function CommonFunctionPanel(props) {\n    var _this;\n    _classCallCheck(this, CommonFunctionPanel);\n    _this = _callSuper(this, CommonFunctionPanel, [props]);\n    _this.state = {\n      data: (0, _immutable.List)()\n    };\n    return _this;\n  }\n\n  // 重新计算分组: 要放到recieve里面去做,data变化了才需要重新算，否则每次render都要重新计算\n  _createClass(CommonFunctionPanel, [{\n    key: \"getGroupEle\",\n    value: function getGroupEle(group) {\n      if (group) {\n        return /*#__PURE__*/_react[\"default\"].createElement(MenuGroup, {\n          data: group,\n          itemClick: this.props.itemClick\n        });\n      }\n      return null;\n    }\n\n    // 根据每组最大数量限制，对组数据进行二次分组\n  }, {\n    key: \"calGroups\",\n    value: function calGroups(props) {\n      console.warn('CommonFunctionPanel: calGroups...');\n      var data = props.data,\n        groupMaxItemCount = props.groupMaxItemCount;\n      if (data && data.size > 0) {\n        var groupList = (0, _immutable.List)();\n        var items;\n        var groupCount;\n        var startIndex;\n        var endIndex;\n        var newGroup;\n        var newItems;\n        data.forEach(function (group) {\n          items = group.get('items');\n          if (groupMaxItemCount && groupMaxItemCount > 0 && items && items.size > groupMaxItemCount) {\n            newGroup = (0, _immutable.Map)({\n              group: group.get('group')\n            });\n            newItems = (0, _immutable.List)();\n            groupCount = Math.ceil(items.size / groupMaxItemCount); // 向上取整,有小数就整数部分加1\n            for (var i = 0; i < groupCount; i++) {\n              startIndex = i * groupMaxItemCount;\n              endIndex = startIndex + groupMaxItemCount; // endIndex: 等于要取的最后一个item的索引+1\n              // groupList = groupList.push(\n              //     Map({\n              //         group: i == 0 ? group.get('group') : Map({ id: group.getIn(['group', 'id']) }),\n              //         items: items.slice(startIndex, endIndex)\n              //     })\n              // )\n              newItems = newItems.push(items.slice(startIndex, endIndex));\n            }\n            newGroup = newGroup.set('items', newItems);\n            groupList = groupList.push(newGroup);\n          } else {\n            var ignore = items && items.size < 1 && props.ignoreEmptyGroup !== false; // 是否忽略不显示\n            if (!ignore) {\n              groupList = groupList.push((0, _immutable.Map)({\n                group: group.get('group'),\n                items: (0, _immutable.List)([items])\n              }));\n            }\n          }\n        });\n        return groupList;\n      }\n      return data;\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      if (!(0, _immutable.is)(this.props.data, nextProps.data) || this.props.groupMaxItemCount !== nextProps.groupMaxItemCount || this.props.autoWrap !== nextProps.autoWrap) {\n        this.setState({\n          data: this.calGroups(nextProps)\n        });\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      // test data\n      if (this.props.data && this.props.data.size > 0) {\n        this.setState({\n          data: this.calGroups(this.props)\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n      var _this$props = this.props,\n        style = _this$props.style,\n        className = _this$props.className,\n        Grow = _this$props.Grow,\n        Shrink = _this$props.Shrink,\n        AlignSelf = _this$props.AlignSelf,\n        Overflow = _this$props.Overflow,\n        data = _this$props.data,\n        itemClick = _this$props.itemClick,\n        groupMaxItemCount = _this$props.groupMaxItemCount,\n        autoWrap = _this$props.autoWrap,\n        maxViewHeight = _this$props.maxViewHeight,\n        ignoreEmptyGroup = _this$props.ignoreEmptyGroup,\n        others = _objectWithoutProperties(_this$props, _excluded);\n      var classNames = (0, _classnames3[\"default\"])(_defineProperty(_defineProperty(_defineProperty({}, _CommonFunctionPanel[\"default\"].commonfunctionpanel, true), _CommonFunctionPanel[\"default\"].autoWrap, autoWrap), className, className), (0, _commonUtils[\"default\"])({\n        Grow: Grow,\n        Shrink: Shrink,\n        AlignSelf: AlignSelf\n      }));\n      var groups = this.state.data && this.state.data.map(function (group) {\n        return _this2.getGroupEle(group);\n      });\n      if (maxViewHeight !== undefined) {\n        style = Object.assign({}, style, {\n          maxHeight: maxViewHeight + 'vh'\n        });\n      }\n      return /*#__PURE__*/_react[\"default\"].createElement(\"div\", _extends({\n        className: classNames,\n        style: style\n      }, others), _react[\"default\"].Children.toArray(groups));\n    }\n  }]);\n  return CommonFunctionPanel;\n}(_react.Component);\nCommonFunctionPanel.propTypes = {\n  style: _propTypes[\"default\"].object,\n  className: _propTypes[\"default\"].string,\n  Grow: _propTypes[\"default\"].number,\n  Shrink: _propTypes[\"default\"].number\n};\nCommonFunctionPanel.defaultProps = {\n  data: (0, _immutable.List)(),\n  autoWrap: true,\n  // 默认换行显示\n  groupMaxItemCount: 6,\n  // 分组每列最大菜单项数量,默认6\n  ignoreEmptyGroup: true // 忽略空数组\n};\nvar _default = exports[\"default\"] = CommonFunctionPanel; // 分组\nvar MenuGroup = exports.MenuGroup = /*#__PURE__*/function (_Component2) {\n  _inherits(MenuGroup, _Component2);\n  function MenuGroup(props) {\n    var _this3;\n    _classCallCheck(this, MenuGroup);\n    _this3 = _callSuper(this, MenuGroup, [props]);\n    _this3.itemClick = _this3.itemClick.bind(_assertThisInitialized(_this3));\n    return _this3;\n  }\n  _createClass(MenuGroup, [{\n    key: \"itemClick\",\n    value: function itemClick(itemId) {\n      var groupId = this.props.data.getIn(['group', 'id']);\n      this.props.itemClick && this.props.itemClick({\n        groupId: groupId,\n        itemId: itemId\n      });\n    }\n  }, {\n    key: \"getMenuItemEle\",\n    value: function getMenuItemEle(subGroup, subGroupSize, currentSubGroupIndex) {\n      var _this4 = this;\n      if (subGroup && subGroup.size > 0) {\n        // const lastIndex = subGroup.size - 1\n        return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n          className: (0, _classnames3[\"default\"])(_CommonFunctionPanel[\"default\"].subgroup, _defineProperty(_defineProperty({}, _CommonFunctionPanel[\"default\"].item, currentSubGroupIndex !== subGroupSize - 1), _CommonFunctionPanel[\"default\"]['item-first'], true))\n        }, subGroup.map(function (menuItem, itemIndex) {\n          return /*#__PURE__*/_react[\"default\"].createElement(MenuItem, {\n            key: itemIndex,\n            className: itemIndex > 0 ? _CommonFunctionPanel[\"default\"]['item-title'] : '',\n            data: menuItem,\n            itemClick: _this4.itemClick\n          });\n        }));\n      }\n      return null;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n      /*\n           * data数据结构:\n           * data: {group:{}, items:[[{caption:'xx1', id:'1'},{caption:'xx2', id:'2'}],[{caption:'xx3', id:'3'},{caption:'xx4', id:'4'}]]}\n           *\n           */\n      var _this$props2 = this.props,\n        style = _this$props2.style,\n        className = _this$props2.className,\n        data = _this$props2.data,\n        itemClick = _this$props2.itemClick,\n        others = _objectWithoutProperties(_this$props2, _excluded2);\n      var groupTitle = data.getIn(['group', 'caption']); // 分组名称\n      var subGroupItems = data.get('items'); // 子项菜单集合\n\n      var items = subGroupItems && subGroupItems.map(function (subGroup, index) {\n        return _this5.getMenuItemEle(subGroup, subGroupItems.size, index);\n      });\n      return /*#__PURE__*/_react[\"default\"].createElement(\"div\", _extends({\n        style: style,\n        className: (0, _classnames3[\"default\"])(className, _CommonFunctionPanel[\"default\"].menugroup)\n      }, others), /*#__PURE__*/_react[\"default\"].createElement(_TextEllipsisWrap[\"default\"], null, /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n        title: groupTitle,\n        className: _CommonFunctionPanel[\"default\"].grouptitle\n      }, groupTitle)), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        className: _CommonFunctionPanel[\"default\"].groupcontainer\n      }, _react[\"default\"].Children.toArray(items)));\n    }\n  }]);\n  return MenuGroup;\n}(_react.Component);\nMenuGroup.defaultProps = {\n  data: (0, _immutable.Map)()\n};\n\n// 菜单项\nvar MenuItem = exports.MenuItem = /*#__PURE__*/function (_Component3) {\n  _inherits(MenuItem, _Component3);\n  function MenuItem(props) {\n    var _this6;\n    _classCallCheck(this, MenuItem);\n    _this6 = _callSuper(this, MenuItem, [props]);\n    _this6.itemClick = _this6.itemClick.bind(_assertThisInitialized(_this6));\n    return _this6;\n  }\n  _createClass(MenuItem, [{\n    key: \"itemClick\",\n    value: function itemClick() {\n      this.props.itemClick && this.props.itemClick(this.props.data.get('id'));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props3 = this.props,\n        style = _this$props3.style,\n        className = _this$props3.className,\n        data = _this$props3.data,\n        itemClick = _this$props3.itemClick,\n        others = _objectWithoutProperties(_this$props3, _excluded3);\n      var caption = data.get('caption');\n      return /*#__PURE__*/_react[\"default\"].createElement(_TextEllipsisWrap[\"default\"], null, /*#__PURE__*/_react[\"default\"].createElement(\"div\", _extends({\n        title: caption,\n        style: style,\n        className: (0, _classnames3[\"default\"])(className, _CommonFunctionPanel[\"default\"].menuitem),\n        onClick: this.itemClick\n      }, others), caption));\n    }\n  }]);\n  return MenuItem;\n}(_react.Component);\nMenuItem.defaultProps = {\n  data: (0, _immutable.Map)()\n};\n\n//# sourceURL=webpack://bos-platform/./src/component/web/base/CommonFunctionPanel.jsx?");

/***/ }),

/***/ "./src/component/web/base/FlexibleField.js":
/*!*************************************************!*\
  !*** ./src/component/web/base/FlexibleField.js ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.create.js */ \"../../node_modules/core-js/modules/es.object.create.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.get-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.keys.js */ \"../../node_modules/core-js/modules/es.object.keys.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.reflect.construct.js */ \"../../node_modules/core-js/modules/es.reflect.construct.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.array.index-of.js */ \"../../node_modules/core-js/modules/es.array.index-of.js\");\n__webpack_require__(/*! core-js/modules/es.array.slice.js */ \"../../node_modules/core-js/modules/es.array.slice.js\");\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\n__webpack_require__(/*! core-js/modules/es.object.assign.js */ \"../../node_modules/core-js/modules/es.object.assign.js\");\n__webpack_require__(/*! core-js/modules/es.object.set-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.set-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/web.timers.js */ \"../../node_modules/core-js/modules/web.timers.js\");\nvar _react = _interopRequireDefault(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _propTypes = _interopRequireDefault(__webpack_require__(/*! prop-types */ \"../../node_modules/prop-types/index.js\"));\nvar _reactDom = _interopRequireDefault(__webpack_require__(/*! react-dom */ \"webpack/sharing/consume/default/react-dom/react-dom?418d\"));\nvar _classnames2 = _interopRequireDefault(__webpack_require__(/*! classnames */ \"../../node_modules/classnames/index.js\"));\nvar _global = __webpack_require__(/*! @/global */ \"./src/global/index.js\");\nvar _commonUtils = _interopRequireDefault(__webpack_require__(/*! ../../common/commonUtils */ \"./src/component/common/commonUtils.js\"));\nvar _LazyLoadContainer = __webpack_require__(/*! @/component/common/LazyLoadContainer */ \"./src/component/common/LazyLoadContainer.js\");\nvar _keyCode = __webpack_require__(/*! @/constant/keyCode */ \"./src/constant/keyCode.js\");\nvar _memoryCacher = __webpack_require__(/*! @/model/memoryCacher */ \"./src/model/memoryCacher.js\");\nvar _flexibleModelFunction = __webpack_require__(/*! @/model/flexibleModelFunction */ \"./src/model/flexibleModelFunction.js\");\nvar _appModelFunction = __webpack_require__(/*! @/model/appModelFunction */ \"./src/model/appModelFunction.js\");\nvar _PanelWithOutside = _interopRequireDefault(__webpack_require__(/*! ../../common/PanelWithOutside */ \"./src/component/common/PanelWithOutside.js\"));\nvar _GlobalDataCacher = __webpack_require__(/*! @/model/GlobalDataCacher */ \"./src/model/GlobalDataCacher.js\");\nvar _symbolConst = __webpack_require__(/*! @/constant/symbolConst */ \"./src/constant/symbolConst.js\");\nvar _FlexibleField2 = _interopRequireDefault(__webpack_require__(/*! ./FlexibleField.less */ \"./src/component/web/base/FlexibleField.less\"));\nvar _excluded = [\"id\", \"pageId\", \"sourceCtrl\", \"isGridCell\", \"flexInfo\", \"tryCloseFlexible\", \"closeFlexible\", \"clickCloseFlexible\", \"children\", \"style\", \"handleClick\", \"className\", \"Direction\", \"Wrap\", \"Overflow\", \"Grow\", \"Shrink\", \"AlignSelf\", \"AlignContent\", \"AlignItems\", \"JustifyContent\", \"Collapsible\", \"Name\", \"defaultCollapse\", \"isSelected\"];\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n// 弹性域字段\nvar FlexibleField = /*#__PURE__*/function (_React$Component) {\n  _inherits(FlexibleField, _React$Component);\n  function FlexibleField(props) {\n    var _this;\n    _classCallCheck(this, FlexibleField);\n    _this = _callSuper(this, FlexibleField, [props]);\n    _this.handleClick = function () {\n      _this.props.clickCloseFlexible();\n    };\n    _this.enterToClose = function () {\n      var focusInput = _this.flexPanlRef.current && _this.flexPanlRef.current.querySelector('input:focus');\n      if (focusInput) {\n        focusInput.blur();\n      }\n      setTimeout(function () {\n        _this.props.tryCloseFlexible();\n      });\n    };\n    _this.focusToNextField = function (target, shiftKey) {\n      var nodes = _this.flexPanlRef.current.querySelectorAll('[data-field-item=\"true\"] [data-shortcut]');\n      var keyBoardEls = Array.prototype.slice.call(nodes, 0);\n      var focusElIndex = keyBoardEls.indexOf(target);\n      var nextFocusElIndex = focusElIndex;\n      if (shiftKey && focusElIndex === 0 || !shiftKey && focusElIndex === keyBoardEls.length - 1) {\n        target.blur();\n        setTimeout(function () {\n          _this.props.tryCloseFlexible();\n        });\n      } else {\n        nextFocusElIndex = !shiftKey ? focusElIndex + 1 : focusElIndex - 1;\n      }\n      var nextFocusEl = keyBoardEls[nextFocusElIndex];\n      if (nextFocusEl) {\n        nextFocusEl.focus();\n      }\n    };\n    _this.handleKeyDown = function (e) {\n      e.stopPropagation();\n      var advanceShortCutInfo = (0, _GlobalDataCacher.getData)(_symbolConst.KEY_ADVANCE_SHORTCUT_INFO) || {};\n      switch (e.keyCode) {\n        case _keyCode.KEYS.ENTER:\n          {\n            var _e$target;\n            if (String((_e$target = e.target) === null || _e$target === void 0 || (_e$target = _e$target.dataset) === null || _e$target === void 0 ? void 0 : _e$target.baseDataEnterToQuery) === 'true') return;\n            if (advanceShortCutInfo.enterToNextField) {\n              _this.focusToNextField(e.target, e.shiftKey);\n            } else {\n              _this.enterToClose();\n            }\n            break;\n          }\n        case _keyCode.KEYS.TAB:\n          {\n            e.preventDefault();\n            _this.focusToNextField(e.target, e.shiftKey);\n            break;\n          }\n        case _keyCode.KEYS.ESC:\n          {\n            _this.props.tryCloseFlexible();\n            var config = (0, _appModelFunction.getFormConfig)(_this.props.pageId)((0, _global.getGlobalState)()) || {};\n            var formId = config.formId;\n            var billFormId = config.billFormId || '';\n            (0, _GlobalDataCacher.setData)(_symbolConst.KEY_UI_ACTION, {\n              appId: config.appId,\n              formId: formId,\n              billFormId: billFormId,\n              tableName: 'shortcut_key',\n              shortcutKey: 'Esc',\n              methodName: '关闭弹窗'\n            });\n            e.stopPropagation();\n            break;\n          }\n        default:\n          break;\n      }\n    };\n    _this.handleClickOutside = function (type, trigger) {\n      // 点击还是在弹性域面板内，兼容点击外层容器滚动条也会关闭的场景\n      // 这里应该整个面板都放在PanelWithOutside内，目前不好评估影响，先这样处理\n      if (trigger.target === _this.flexibleCantainerRef.current) {\n        var flexPanel = _this.flexPanlRef.current;\n        flexPanel && flexPanel.focus();\n        return;\n      }\n      _this.props.tryCloseFlexible();\n    };\n    _this.handleFocus = function (e) {\n      // 记住最后一次聚焦的元素\n      _this.lastFocuedDom = e.target;\n    };\n    _this.state = {\n      located: false,\n      flexPanelDidMount: false\n      // location:{left:0px, top:0px}\n    };\n    _this.clickPosition = {\n      isInFlexibleField: false\n    }; // 用来判断点击的元素是否在弹性域面板里面，basedata模糊查询点击要用\n    _this.setFlexibleLocation = _this.setFlexibleLocation.bind(_assertThisInitialized(_this));\n    _this.tryCloseFlexible = _this.tryCloseFlexible.bind(_assertThisInitialized(_this));\n    _this.closeFlexible = _this.closeFlexible.bind(_assertThisInitialized(_this));\n    _this.handleMouseDown = _this.handleMouseDown.bind(_assertThisInitialized(_this));\n    _this.lastFocuedDom = null;\n\n    // flexPanel.current 会跟PanelWithOutside的ref同步，这里使用createRef来创建，避免管理current混乱\n    _this.flexPanlRef = /*#__PURE__*/_react[\"default\"].createRef();\n    _this.flexibleCantainerRef = /*#__PURE__*/_react[\"default\"].createRef();\n    return _this;\n  }\n  _createClass(FlexibleField, [{\n    key: \"tryCloseFlexible\",\n    value: function tryCloseFlexible() {\n      this.props.tryCloseFlexible();\n    }\n  }, {\n    key: \"closeFlexible\",\n    value: function closeFlexible() {\n      this.props.closeFlexible();\n    }\n  }, {\n    key: \"setFlexibleLocation\",\n    value:\n    /**\n    *只有源字段传来了位置信息才开始渲染\n    *@param {*} replyParams\n    */\n    function setFlexibleLocation(data) {\n      // const { data, ...other } = replyParams\n      this.setState({\n        location: data,\n        located: true\n      }); // {left:12px, top: 20px}\n    }\n  }, {\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var _this2 = this;\n      var _this$props = this.props,\n        pageId = _this$props.pageId,\n        id = _this$props.id,\n        sourceCtrl = _this$props.sourceCtrl;\n      // 这个set是留给以后支持滚动粘附时的功能\n      this.getLocationHandler = (0, _memoryCacher.subscribeControlMethod)(pageId, sourceCtrl, 'setFlexibleLocation', function (pageData) {\n        if (pageData === undefined) {\n          return;\n        }\n        _this2.setFlexibleLocation(pageData);\n      });\n\n      // 接收尝试关闭请求，真正的关闭动作应由服务端发出\n      this.tryCloseReceiveHandler = (0, _memoryCacher.subscribeControlMethod)(pageId, id, 'tryCloseFlexible', function (pageData) {\n        _this2.tryCloseFlexible();\n      });\n      // 接收前端执行关闭，不经过后台\n      // const closeReceive = {\n      //   receiveTopic: 'closeFlexible',\n      //   receiverID: `${pageId}_${id}`\n      // }\n      // console.log('receiver5')\n      // this.closeReceiveHandler = TwoWayChannel._receiver(closeReceive, this.closeFlexible)\n    }\n  }, {\n    key: \"handleMouseDown\",\n    value: function handleMouseDown() {\n      // 能冒泡到这里，说明在弹性域面板里面，包含portal的元素\n      this.clickPosition.isInFlexibleField = true;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n        id = _this$props2.id,\n        pageId = _this$props2.pageId,\n        sourceCtrl = _this$props2.sourceCtrl,\n        isGridCell = _this$props2.isGridCell,\n        flexInfo = _this$props2.flexInfo,\n        tryCloseFlexible = _this$props2.tryCloseFlexible,\n        closeFlexible = _this$props2.closeFlexible,\n        clickCloseFlexible = _this$props2.clickCloseFlexible,\n        children = _this$props2.children,\n        style = _this$props2.style,\n        handleClick = _this$props2.handleClick,\n        className = _this$props2.className,\n        Direction = _this$props2.Direction,\n        Wrap = _this$props2.Wrap,\n        Overflow = _this$props2.Overflow,\n        Grow = _this$props2.Grow,\n        Shrink = _this$props2.Shrink,\n        AlignSelf = _this$props2.AlignSelf,\n        AlignContent = _this$props2.AlignContent,\n        AlignItems = _this$props2.AlignItems,\n        JustifyContent = _this$props2.JustifyContent,\n        Collapsible = _this$props2.Collapsible,\n        Name = _this$props2.Name,\n        defaultCollapse = _this$props2.defaultCollapse,\n        isSelected = _this$props2.isSelected,\n        other = _objectWithoutProperties(_this$props2, _excluded);\n      // TODO:面板的尺寸应该要定一下\n      var pStyle = Object.assign({}, style, this.state.location, {\n        height: style && style.height,\n        maxHeight: '366px'\n      }); // this.state.location 会带有计算位置时的高度 以元数据的为准\n      if (this.state.located === false) {\n        // 离屏渲染\n        pStyle.top = '-999px';\n      }\n      var classNames = (0, _classnames2[\"default\"])(_defineProperty(_defineProperty({}, _FlexibleField2[\"default\"].flexiblePanel, true), className, className), (0, _commonUtils[\"default\"])({\n        Direction: Direction,\n        Wrap: Wrap,\n        Overflow: Overflow,\n        Grow: Grow,\n        Shrink: Shrink,\n        AlignSelf: AlignSelf,\n        AlignContent: AlignContent,\n        AlignItems: AlignItems,\n        JustifyContent: JustifyContent\n      }));\n      // <div className={styles['flexibleCloseIcon']} onClick={this.handleClick}>{'关闭'}</div>\n      return /*#__PURE__*/_react[\"default\"].createElement(_LazyLoadContainer.DisableLazyLoad, null, /*#__PURE__*/_react[\"default\"].createElement(\"div\", _extends({\n        ref: this.flexibleCantainerRef,\n        \"data-flexible\": true,\n        \"data-focus-container\": true,\n        \"data-ctrl-type\": \"flexiblepanel\",\n        onKeyDown: this.handleKeyDown\n      }, other, {\n        className: classNames,\n        style: pStyle,\n        onMouseDown: this.handleMouseDown,\n        onFocus: this.handleFocus\n      }), this.state.flexPanelDidMount ? /*#__PURE__*/_react[\"default\"].createElement(_PanelWithOutside[\"default\"], _extends({}, other, {\n        onCLickOutside: this.handleClickOutside,\n        forwardRef: this.flexPanlRef\n      }), children) : children));\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this3 = this;\n      var _this$props3 = this.props,\n        pageId = _this$props3.pageId,\n        id = _this$props3.id,\n        sourceCtrl = _this$props3.sourceCtrl,\n        dispatch = _this$props3.dispatch,\n        flexInfo = _this$props3.flexInfo;\n      (0, _memoryCacher.setPageData)(pageId, [sourceCtrl, 'isFlexFieldPanelOpen'], true);\n      this.setState({\n        flexPanelDidMount: true\n      });\n\n      // 通知源控件当前面板DOM对象。=>//必须有明确的结束编辑的指令，而不仅仅需求面板的dom，因为可能有多层弹出层, 对应的源字段只要有弹出面板，就不结束编辑态，而由指令结束！！\n      var data = {\n        flexDisplayed: true,\n        // 告诉组件弹性域面板打开了\n        flexId: id,\n        // 告诉对应的字段弹出的面板的Id,用来在删除面板时使用。\n        flexDOM: _reactDom[\"default\"].findDOMNode(this),\n        // DOM Object!\n        clickPosition: this.clickPosition\n      };\n      var isFlexfieldLive = (0, _memoryCacher.getPageData)(pageId, [sourceCtrl, 'isFlexfieldAlive']);\n      // FlexSrcField没销毁获取位置信息才有意义，否则清掉元数据\n      if (isFlexfieldLive === false) {\n        if (this.props.isGridCell) {\n          dispatch((0, _appModelFunction.convertAppModelFunctionAction)((0, _flexibleModelFunction.removeFlexible)(pageId, id, flexInfo.rowKey, flexInfo.colId)));\n        } else {\n          dispatch((0, _appModelFunction.convertAppModelFunctionAction)((0, _flexibleModelFunction.removeFlexible)(pageId, id)));\n        }\n      } else {\n        (0, _memoryCacher.setPageData)(pageId, [sourceCtrl, 'getFlexibleLocation'], data); // 尝试在此处获取sourceCtrl的位置信息\n      }\n      setTimeout(function () {\n        if (_this3.flexPanlRef.current) {\n          var input = _this3.flexPanlRef.current.querySelector('input:first-child'); // 找到第一个去输入框去设置\n          input && input.focus();\n        }\n      }, 0);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var _this$props4 = this.props,\n        pageId = _this$props4.pageId,\n        sourceCtrl = _this$props4.sourceCtrl;\n      (0, _memoryCacher.setPageData)(pageId, [sourceCtrl, 'noticeFlexDisplayedStatus'], false);\n      (0, _memoryCacher.setPageData)(pageId, [sourceCtrl, 'isFlexFieldPanelOpen'], false);\n\n      // 清除弹性域字段对应行缓存\n      (0, _memoryCacher.deletePageData)(pageId, ['flexibleRowInfo']);\n      this.getLocationHandler && this.getLocationHandler();\n      this.tryCloseReceiveHandler && this.tryCloseReceiveHandler();\n      //  this.getLocationHandler.unsubscribe()\n      // this.tryCloseReceiveHandler.unsubscribe()\n      // this.closeReceiveHandler.unsubscribe()\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      var _this4 = this;\n      var flexPanel = this.flexPanlRef.current;\n\n      // props 改变时重新聚焦\n      if (prevProps.children !== this.props.children) {\n        setTimeout(function () {\n          if (flexPanel && flexPanel.contains(_this4.lastFocuedDom)) {\n            // 延后一个时机聚焦，防止手工输入的类型值更新后会再次聚焦到\n            _this4.lastFocuedDom && _this4.lastFocuedDom.focus();\n          } else {\n            // flexPanel.current 跟PanelWithOutside的ref同步了，这里的focus要设置在flexPanel.current上\n            flexPanel && flexPanel.focus();\n          }\n        }, 0);\n      }\n    }\n  }]);\n  return FlexibleField;\n}(_react[\"default\"].Component);\nFlexibleField.propTypes = {\n  style: _propTypes[\"default\"].object,\n  className: _propTypes[\"default\"].string,\n  Direction: _propTypes[\"default\"].string,\n  Grow: _propTypes[\"default\"].number,\n  Shrink: _propTypes[\"default\"].number,\n  Overflow: _propTypes[\"default\"].string,\n  Wrap: _propTypes[\"default\"].bool,\n  handleClick: _propTypes[\"default\"].func\n};\nvar _default = exports[\"default\"] = FlexibleField;\n\n//# sourceURL=webpack://bos-platform/./src/component/web/base/FlexibleField.js?");

/***/ }),

/***/ "./src/component/web/base/GeographicLocation/GeographicLocation.js":
/*!*************************************************************************!*\
  !*** ./src/component/web/base/GeographicLocation/GeographicLocation.js ***!
  \*************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.filter.js */ \"../../node_modules/core-js/modules/es.array.filter.js\");\n__webpack_require__(/*! core-js/modules/es.array.from.js */ \"../../node_modules/core-js/modules/es.array.from.js\");\n__webpack_require__(/*! core-js/modules/es.array.index-of.js */ \"../../node_modules/core-js/modules/es.array.index-of.js\");\n__webpack_require__(/*! core-js/modules/es.array.is-array.js */ \"../../node_modules/core-js/modules/es.array.is-array.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.array.slice.js */ \"../../node_modules/core-js/modules/es.array.slice.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-string.js */ \"../../node_modules/core-js/modules/es.date.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-properties.js */ \"../../node_modules/core-js/modules/es.object.define-properties.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptors.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptors.js\");\n__webpack_require__(/*! core-js/modules/es.object.keys.js */ \"../../node_modules/core-js/modules/es.object.keys.js\");\n__webpack_require__(/*! core-js/modules/es.regexp.exec.js */ \"../../node_modules/core-js/modules/es.regexp.exec.js\");\n__webpack_require__(/*! core-js/modules/es.regexp.to-string.js */ \"../../node_modules/core-js/modules/es.regexp.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ \"../../node_modules/core-js/modules/web.dom-collections.for-each.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.array.find.js */ \"../../node_modules/core-js/modules/es.array.find.js\");\n__webpack_require__(/*! core-js/modules/es.array.for-each.js */ \"../../node_modules/core-js/modules/es.array.for-each.js\");\n__webpack_require__(/*! core-js/modules/es.array.map.js */ \"../../node_modules/core-js/modules/es.array.map.js\");\n__webpack_require__(/*! core-js/modules/es.function.name.js */ \"../../node_modules/core-js/modules/es.function.name.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/web.timers.js */ \"../../node_modules/core-js/modules/web.timers.js\");\nvar _react = _interopRequireWildcard(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _classnames2 = _interopRequireDefault(__webpack_require__(/*! classnames */ \"../../node_modules/classnames/index.js\"));\nvar _lodash = __webpack_require__(/*! lodash */ \"../../node_modules/lodash/lodash.js\");\nvar _fullscreenUtil = _interopRequireDefault(__webpack_require__(/*! @/util/fullscreenUtil */ \"./src/util/fullscreenUtil.js\"));\nvar _Select = _interopRequireDefault(__webpack_require__(/*! ./Select */ \"./src/component/web/base/GeographicLocation/Select.js\"));\nvar _MapBase = _interopRequireDefault(__webpack_require__(/*! @/component/web/base/MapBase */ \"./src/component/web/base/MapBase.js\"));\nvar _style = _interopRequireDefault(__webpack_require__(/*! ./style.less */ \"./src/component/web/base/GeographicLocation/style.less\"));\nvar _intlApi = __webpack_require__(/*! @/i18n/intlApi */ \"./src/i18n/intlApi.js\");\nvar _mapUtil = __webpack_require__(/*! @/util/mapUtil */ \"./src/util/mapUtil.js\");\nvar _NoSecrectKey = _interopRequireDefault(__webpack_require__(/*! @/component/common/map/NoSecrectKey.js */ \"./src/component/common/map/NoSecrectKey.js\"));\nvar _excluded = [\"address\", \"apiKey\", \"containerStyle\", \"dataPageId\", \"isLocked\", \"labelClassName\", \"labelStyle\", \"mapKey\", \"selectClassName\", \"selectStyle\", \"inputClassName\", \"inputStyle\", \"location\", \"required\", \"update\", \"poiType\", \"radius\", \"slot\", \"locale\", \"clickTipsLink\", \"showFormByTips\", \"loadMapFail\"];\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nvar eventNames = ['fullscreenchange', 'mozfullscreenchange', 'webkitfullscreenchange', 'msfullscreenchange'];\nfunction GeographicLocation(_ref) {\n  var address = _ref.address,\n    apiKey = _ref.apiKey,\n    containerStyle = _ref.containerStyle,\n    dataPageId = _ref.dataPageId,\n    isLocked = _ref.isLocked,\n    labelClassName = _ref.labelClassName,\n    labelStyle = _ref.labelStyle,\n    mapKey = _ref.mapKey,\n    selectClassName = _ref.selectClassName,\n    selectStyle = _ref.selectStyle,\n    inputClassName = _ref.inputClassName,\n    inputStyle = _ref.inputStyle,\n    location = _ref.location,\n    required = _ref.required,\n    update = _ref.update,\n    _ref$poiType = _ref.poiType,\n    poiType = _ref$poiType === void 0 ? '' : _ref$poiType,\n    _ref$radius = _ref.radius,\n    radius = _ref$radius === void 0 ? 500 : _ref$radius,\n    slot = _ref.slot,\n    _ref$locale = _ref.locale,\n    locale = _ref$locale === void 0 ? 'zh_CN' : _ref$locale,\n    clickTipsLink = _ref.clickTipsLink,\n    showFormByTips = _ref.showFormByTips,\n    loadMapFail = _ref.loadMapFail,\n    others = _objectWithoutProperties(_ref, _excluded);\n  var _useState = (0, _react.useState)([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    options = _useState2[0],\n    setOptions = _useState2[1];\n  var _useState3 = (0, _react.useState)(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    poi = _useState4[0],\n    setPoi = _useState4[1];\n  var _useState5 = (0, _react.useState)(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    isFullScreen = _useState6[0],\n    setIsFullScreen = _useState6[1];\n  var mapContainerRef = (0, _react.useRef)();\n  var mapRef = (0, _react.useRef)();\n  (0, _react.useEffect)(function () {\n    if (!location || !location.lat || !location.lng) {\n      return;\n    }\n    var poi = {\n      location: _objectSpread({}, location),\n      ad: address\n    };\n    setPoi(poi);\n    setTimeout(function () {\n      mapRef.current && mapRef.current.centerAndZoom(location);\n    }, 2000);\n  }, [location, address]);\n  (0, _react.useEffect)(function () {\n    var handleFullScreenChange = function handleFullScreenChange() {\n      setIsFullScreen(!isFullScreen);\n    };\n    eventNames.forEach(function (evt) {\n      document.addEventListener(evt, handleFullScreenChange);\n    });\n    return function () {\n      eventNames.forEach(function (evt) {\n        document.removeEventListener(evt, handleFullScreenChange);\n      });\n    };\n  }, [isFullScreen]);\n\n  /**\n   * 更新地址\n   * @param {object} poi 地址\n   */\n  var updateVal = function updateVal(poi) {\n    var _poi$point, _poi$point2;\n    var param = {\n      la: poi === null || poi === void 0 || (_poi$point = poi.point) === null || _poi$point === void 0 ? void 0 : _poi$point.lat,\n      // 纬度\n      lo: poi === null || poi === void 0 || (_poi$point2 = poi.point) === null || _poi$point2 === void 0 ? void 0 : _poi$point2.lng,\n      // 经度\n      ad: (0, _mapUtil.getAd)(poi) || (poi === null || poi === void 0 ? void 0 : poi.title),\n      // 用户输入的详细地址\n      mapData: {\n        // 地图提供的信息\n        detail: poi === null || poi === void 0 ? void 0 : poi.address,\n        // 详细地址\n        city: poi === null || poi === void 0 ? void 0 : poi.city,\n        // 市\n        province: poi === null || poi === void 0 ? void 0 : poi.province,\n        // 省\n        title: (poi === null || poi === void 0 ? void 0 : poi.name) || (poi === null || poi === void 0 ? void 0 : poi.title),\n        // 用户输入的搜索值\n        id: poi === null || poi === void 0 ? void 0 : poi.uid\n      }\n    };\n    update && update(param);\n  };\n\n  // 搜索防抖\n  var debounceFn = (0, _lodash.debounce)(function (val) {\n    mapRef.current.asyncSearch(val);\n  }, 500);\n\n  /**\n   * 搜索\n   * @param {string} val 搜索关键字\n   * @returns\n   */\n  var handleSelectSearch = function handleSelectSearch(val) {\n    if (!val || !mapRef.current) {\n      setOptions([]);\n      setPoi(null);\n      return;\n    }\n    debounceFn(val);\n  };\n  var handleSelectLocation = function handleSelectLocation(val) {\n    if (!val || isLocked) return;\n    var poi = options.find(function (item) {\n      return item.id === val;\n    });\n    if (!poi) return;\n    updateVal(poi);\n  };\n  var handleInputChange = function handleInputChange(value) {\n    if (value === undefined) {\n      setPoi(null);\n      setOptions([]);\n    }\n  };\n  var handleFullScreenClick = function handleFullScreenClick(evt) {\n    _fullscreenUtil[\"default\"].toggle(mapContainerRef.current);\n  };\n\n  /**\n   * 获取地图搜索结果\n   * @param {[Object]} result 地图搜索结果\n   * @param {string} address 详细地址\n   * @param {string} city 所在城市\n   * @param {object} point\n   * @param {number} point.lng 经度\n   * @param {number} point.lat 纬度\n   * @param {string} province 省份\n   * @param {string} title 标题\n   */\n  var getSearchResults = function getSearchResults(result) {\n    var selectOptions = result.map(function (geo) {\n      return {\n        id: geo.uid,\n        name: geo.title,\n        address: geo.address,\n        province: geo.province,\n        city: geo.city,\n        point: geo.point\n      };\n    });\n    setOptions(selectOptions);\n  };\n\n  /**\n   * 地图拖动结束，获取当前中心点坐标\n   * @param {object} location 坐标点\n   * @param {string} location.address 地址\n   * @param {number} location.point.lng 经度\n   * @param {number} location.point.lat 纬度\n   * @param {[object]} location.surroundingPois 附近地址\n   */\n  var handleDragEnd = function handleDragEnd(point) {\n    var _point$surroundingPoi;\n    if (!point || !mapRef.current) {\n      return;\n    }\n    var nearestPoi = (_point$surroundingPoi = point.surroundingPois) === null || _point$surroundingPoi === void 0 ? void 0 : _point$surroundingPoi[0];\n    if (!nearestPoi) {\n      return;\n    }\n    updateVal(nearestPoi);\n  };\n  var fullscreenBtnClassName = (0, _classnames2[\"default\"])(_style[\"default\"].scale, {\n    'kdfont kdfont-quanping': !isFullScreen,\n    'kdfont kdfont-guanbiquanping': isFullScreen\n  });\n  var locationClassName = (0, _classnames2[\"default\"])('kdfont kdfont-dingwei3', _style[\"default\"].location);\n  var labelClz = (0, _classnames2[\"default\"])(_style[\"default\"]['geo-label'], labelClassName);\n  var selectClz = (0, _classnames2[\"default\"])(_style[\"default\"]['flex-layout-right'], _defineProperty(_defineProperty(_defineProperty({}, _style[\"default\"]['locked-geo'], isLocked && poi), _style[\"default\"]['select-underline'], true), _style[\"default\"]['select-all-border'], false));\n  return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: (0, _classnames2[\"default\"])('kd-cq-field kd-cq-geographic', _style[\"default\"]['geographic-location']),\n    style: containerStyle\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: _style[\"default\"]['flex-layout']\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"label\", {\n    className: labelClz,\n    style: labelStyle\n  }, (0, _intlApi.getLangMsg)('GeoPoint.key0001'), required && /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n    className: (0, _classnames2[\"default\"])(_style[\"default\"]['required-icon'], 'require-icon')\n  }, \"*\")), slot, /*#__PURE__*/_react[\"default\"].createElement(_Select[\"default\"], {\n    disabled: isLocked,\n    className: selectClz,\n    style: selectStyle,\n    options: options,\n    value: poi && poi.ad || '',\n    onChange: handleInputChange,\n    onSearch: handleSelectSearch,\n    onSelect: handleSelectLocation\n  })), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: _style[\"default\"]['map-container'],\n    ref: mapContainerRef\n  }, !loadMapFail ? /*#__PURE__*/_react[\"default\"].createElement(_react[\"default\"].Fragment, null, /*#__PURE__*/_react[\"default\"].createElement(_MapBase[\"default\"], {\n    apiKey: apiKey,\n    locked: isLocked,\n    mapKey: mapKey,\n    ref: mapRef,\n    showSearchBox: false,\n    getSearchResults: getSearchResults,\n    onDragEnd: handleDragEnd\n  }), /*#__PURE__*/_react[\"default\"].createElement(\"a\", {\n    className: fullscreenBtnClassName,\n    onClick: handleFullScreenClick\n  }), /*#__PURE__*/_react[\"default\"].createElement(\"a\", {\n    className: locationClassName\n  })) : /*#__PURE__*/_react[\"default\"].createElement(_NoSecrectKey[\"default\"], null)));\n}\nvar _default = exports[\"default\"] = GeographicLocation;\n\n//# sourceURL=webpack://bos-platform/./src/component/web/base/GeographicLocation/GeographicLocation.js?");

/***/ }),

/***/ "./src/component/web/base/GeographicLocation/GeographicLocationByAMap.js":
/*!*******************************************************************************!*\
  !*** ./src/component/web/base/GeographicLocation/GeographicLocationByAMap.js ***!
  \*******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.filter.js */ \"../../node_modules/core-js/modules/es.array.filter.js\");\n__webpack_require__(/*! core-js/modules/es.array.from.js */ \"../../node_modules/core-js/modules/es.array.from.js\");\n__webpack_require__(/*! core-js/modules/es.array.index-of.js */ \"../../node_modules/core-js/modules/es.array.index-of.js\");\n__webpack_require__(/*! core-js/modules/es.array.is-array.js */ \"../../node_modules/core-js/modules/es.array.is-array.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.array.slice.js */ \"../../node_modules/core-js/modules/es.array.slice.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-string.js */ \"../../node_modules/core-js/modules/es.date.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-properties.js */ \"../../node_modules/core-js/modules/es.object.define-properties.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptors.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptors.js\");\n__webpack_require__(/*! core-js/modules/es.object.keys.js */ \"../../node_modules/core-js/modules/es.object.keys.js\");\n__webpack_require__(/*! core-js/modules/es.regexp.exec.js */ \"../../node_modules/core-js/modules/es.regexp.exec.js\");\n__webpack_require__(/*! core-js/modules/es.regexp.to-string.js */ \"../../node_modules/core-js/modules/es.regexp.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ \"../../node_modules/core-js/modules/web.dom-collections.for-each.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.array.concat.js */ \"../../node_modules/core-js/modules/es.array.concat.js\");\n__webpack_require__(/*! core-js/modules/es.array.find.js */ \"../../node_modules/core-js/modules/es.array.find.js\");\n__webpack_require__(/*! core-js/modules/es.array.for-each.js */ \"../../node_modules/core-js/modules/es.array.for-each.js\");\n__webpack_require__(/*! core-js/modules/es.function.name.js */ \"../../node_modules/core-js/modules/es.function.name.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/web.timers.js */ \"../../node_modules/core-js/modules/web.timers.js\");\nvar _react = _interopRequireWildcard(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _classnames2 = _interopRequireDefault(__webpack_require__(/*! classnames */ \"../../node_modules/classnames/index.js\"));\nvar _lodash = __webpack_require__(/*! lodash */ \"../../node_modules/lodash/lodash.js\");\nvar _fullscreenUtil = _interopRequireDefault(__webpack_require__(/*! @/util/fullscreenUtil */ \"./src/util/fullscreenUtil.js\"));\nvar _Select = _interopRequireDefault(__webpack_require__(/*! ./Select */ \"./src/component/web/base/GeographicLocation/Select.js\"));\nvar _AMap = _interopRequireDefault(__webpack_require__(/*! @/component/web/base/Map/AMap */ \"./src/component/web/base/Map/AMap.jsx\"));\nvar _style = _interopRequireDefault(__webpack_require__(/*! ./style.less */ \"./src/component/web/base/GeographicLocation/style.less\"));\nvar _intlApi = __webpack_require__(/*! @/i18n/intlApi */ \"./src/i18n/intlApi.js\");\nvar _mapUtil = __webpack_require__(/*! @/util/mapUtil */ \"./src/util/mapUtil.js\");\nvar _excluded = [\"address\", \"containerStyle\", \"dataPageId\", \"id\", \"isLocked\", \"labelClassName\", \"labelStyle\", \"selectClassName\", \"selectStyle\", \"inputClassName\", \"inputStyle\", \"license\", \"location\", \"mapKey\", \"required\", \"update\", \"poiType\", \"radius\", \"slot\", \"locale\", \"clickTipsLink\", \"showFormByTips\"];\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nvar eventNames = ['fullscreenchange', 'mozfullscreenchange', 'webkitfullscreenchange', 'msfullscreenchange'];\nfunction GeographicLocation(_ref) {\n  var address = _ref.address,\n    containerStyle = _ref.containerStyle,\n    dataPageId = _ref.dataPageId,\n    id = _ref.id,\n    isLocked = _ref.isLocked,\n    labelClassName = _ref.labelClassName,\n    labelStyle = _ref.labelStyle,\n    selectClassName = _ref.selectClassName,\n    selectStyle = _ref.selectStyle,\n    inputClassName = _ref.inputClassName,\n    inputStyle = _ref.inputStyle,\n    license = _ref.license,\n    location = _ref.location,\n    mapKey = _ref.mapKey,\n    required = _ref.required,\n    update = _ref.update,\n    _ref$poiType = _ref.poiType,\n    poiType = _ref$poiType === void 0 ? '' : _ref$poiType,\n    _ref$radius = _ref.radius,\n    radius = _ref$radius === void 0 ? 500 : _ref$radius,\n    slot = _ref.slot,\n    _ref$locale = _ref.locale,\n    locale = _ref$locale === void 0 ? 'zh_CN' : _ref$locale,\n    clickTipsLink = _ref.clickTipsLink,\n    showFormByTips = _ref.showFormByTips,\n    others = _objectWithoutProperties(_ref, _excluded);\n  var _useState = (0, _react.useState)([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    options = _useState2[0],\n    setOptions = _useState2[1];\n  var _useState3 = (0, _react.useState)(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    poi = _useState4[0],\n    setPoi = _useState4[1];\n  var _useState5 = (0, _react.useState)(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    isFullScreen = _useState6[0],\n    setIsFullScreen = _useState6[1];\n  var mapContainerRef = (0, _react.useRef)();\n  var mapRef = (0, _react.useRef)();\n  var isMoveBySelectedRef = (0, _react.useRef)(false);\n  (0, _react.useEffect)(function () {\n    if (!location || !location.lat || !location.lng) {\n      return;\n    }\n    var poi = {\n      location: _objectSpread({}, location),\n      ad: address\n    };\n    setPoi(poi);\n  }, [location, address]);\n  (0, _react.useEffect)(function () {\n    var handleFullScreenChange = function handleFullScreenChange() {\n      setIsFullScreen(!isFullScreen);\n    };\n    eventNames.forEach(function (evt) {\n      document.addEventListener(evt, handleFullScreenChange);\n    });\n    return function () {\n      eventNames.forEach(function (evt) {\n        document.removeEventListener(evt, handleFullScreenChange);\n      });\n    };\n  }, [isFullScreen]);\n  var updateVal = function updateVal(poi) {\n    var _poi$location, _poi$location2;\n    var param = {\n      la: poi === null || poi === void 0 || (_poi$location = poi.location) === null || _poi$location === void 0 ? void 0 : _poi$location.lat,\n      // 纬度\n      lo: poi === null || poi === void 0 || (_poi$location2 = poi.location) === null || _poi$location2 === void 0 ? void 0 : _poi$location2.lng,\n      // 经度\n      ad: (0, _mapUtil.getAd)({\n        province: poi === null || poi === void 0 ? void 0 : poi.pname,\n        city: poi === null || poi === void 0 ? void 0 : poi.cityname,\n        district: poi === null || poi === void 0 ? void 0 : poi.adname,\n        address: poi === null || poi === void 0 ? void 0 : poi.address,\n        name: poi === null || poi === void 0 ? void 0 : poi.name\n      }),\n      // 用户输入的详细地址\n      mapData: {\n        // 地图提供的信息\n        detail: poi === null || poi === void 0 ? void 0 : poi.address,\n        // 详细地址\n        city: poi === null || poi === void 0 ? void 0 : poi.cityname,\n        // 市\n        province: poi === null || poi === void 0 ? void 0 : poi.pname,\n        // 省\n        title: poi === null || poi === void 0 ? void 0 : poi.name,\n        // 用户输入的搜索值\n        id: poi === null || poi === void 0 ? void 0 : poi.id,\n        district: poi === null || poi === void 0 ? void 0 : poi.adname\n      }\n    };\n    update && update(param);\n  };\n  (0, _react.useEffect)(function () {\n    if (isLocked && poi) {\n      setTimeout(function () {\n        return callMapFn('setCenter', poi.location.lng, poi.location.lat);\n      }, 1000);\n    }\n  }, [isLocked && poi]);\n\n  /**\n   * 调用 Map 实例暴露出来的方法\n   * @param {string} methodName 方法名\n   * @param  {...any} params 方法参数\n   */\n  var callMapFn = function callMapFn(methodName) {\n    var _mapRef$current;\n    if (!mapRef.current) return;\n    for (var _len = arguments.length, params = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      params[_key - 1] = arguments[_key];\n    }\n    (_mapRef$current = mapRef.current)[methodName].apply(_mapRef$current, params);\n  };\n  var debounceFn = (0, _lodash.debounce)(function (val) {\n    callMapFn('search', {\n      keyword: val,\n      cb: handleSearch\n    });\n  }, 500);\n  var handleSelectSearch = function handleSelectSearch(val) {\n    if (!val) return;\n    debounceFn(val);\n  };\n  var handleSearch = function handleSearch(status, results) {\n    if (status !== 'complete' || results.info !== 'OK') {\n      console.warn(\"\\u67E5\\u8BE2\\u6570\\u636E: \".concat(status, \" - \").concat(results.info));\n      return;\n    }\n    var pois = results.poiList.pois;\n    setOptions(pois);\n  };\n  var handleSelectLocation = function handleSelectLocation(val) {\n    if (!val || isLocked) return;\n    var poi = options.find(function (item) {\n      return item.id === val;\n    });\n    if (!poi) return;\n    setPoi(poi);\n    updateVal(poi);\n    var location = poi.location;\n    isMoveBySelectedRef.current = true;\n    callMapFn('setCenter', location.lng, location.lat);\n  };\n  var handleMapMoveEnd = function handleMapMoveEnd() {\n    var center = mapRef.current && mapRef.current.getCenter();\n    if (!center || isLocked) return;\n    if (isMoveBySelectedRef.current) {\n      resetOptions();\n      return;\n    }\n    callMapFn('searchNearBy', {\n      center: [center.lng, center.lat],\n      type: poiType,\n      radius: radius,\n      cb: handleSearchAfterMove\n    });\n    isMoveBySelectedRef.current = false;\n  };\n  var handleSearchAfterMove = function handleSearchAfterMove(status, result) {\n    if (isLocked) return;\n    if (!result || result.info !== 'OK') {\n      console.warn('地图拖动定位失败');\n      return;\n    }\n    var pois = result.poiList.pois;\n    setPoi(pois[0]);\n  };\n  var handleInputChange = function handleInputChange(value) {\n    if (value === undefined) {\n      setPoi(null);\n      setOptions([]);\n    }\n  };\n  var handleFullScreenClick = function handleFullScreenClick(evt) {\n    _fullscreenUtil[\"default\"].toggle(mapContainerRef.current);\n  };\n  var resetOptions = function resetOptions() {\n    isMoveBySelectedRef.current = false;\n    setOptions([]);\n  };\n  var fullscreenBtnClassName = (0, _classnames2[\"default\"])(_style[\"default\"].scale, {\n    'kdfont kdfont-quanping': !isFullScreen,\n    'kdfont kdfont-guanbiquanping': isFullScreen\n  });\n  var locationClassName = (0, _classnames2[\"default\"])('kdfont kdfont-dingwei3', _style[\"default\"].location);\n  var labelClz = (0, _classnames2[\"default\"])(_style[\"default\"]['geo-label'], labelClassName);\n  var selectClz = (0, _classnames2[\"default\"])(_style[\"default\"]['flex-layout-right'], _defineProperty(_defineProperty(_defineProperty({}, _style[\"default\"]['locked-geo'], isLocked && poi), _style[\"default\"]['select-underline'], true), _style[\"default\"]['select-all-border'], false));\n  return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: (0, _classnames2[\"default\"])('kd-cq-field kd-cq-geographic', _style[\"default\"]['geographic-location']),\n    style: containerStyle\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: _style[\"default\"]['flex-layout']\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"label\", {\n    className: labelClz,\n    style: labelStyle\n  }, (0, _intlApi.getLangMsg)('GeoPoint.key0001'), required && /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n    className: (0, _classnames2[\"default\"])(_style[\"default\"]['required-icon'], 'require-icon')\n  }, \"*\")), slot, /*#__PURE__*/_react[\"default\"].createElement(_Select[\"default\"], {\n    disabled: isLocked,\n    className: selectClz,\n    style: selectStyle,\n    options: options,\n    value: poi && poi.ad || '',\n    onChange: handleInputChange,\n    onSearch: handleSelectSearch,\n    onSelect: handleSelectLocation\n  })), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: _style[\"default\"]['map-container'],\n    ref: mapContainerRef\n  }, /*#__PURE__*/_react[\"default\"].createElement(_AMap[\"default\"], {\n    id: id,\n    ref: mapRef,\n    license: license,\n    dragEnable: !isLocked,\n    mapKey: mapKey,\n    onMoveEnd: handleMapMoveEnd,\n    showSearchBox: false\n  }), /*#__PURE__*/_react[\"default\"].createElement(\"a\", {\n    className: fullscreenBtnClassName,\n    onClick: handleFullScreenClick\n  }), /*#__PURE__*/_react[\"default\"].createElement(\"a\", {\n    className: locationClassName\n  })));\n}\nvar _default = exports[\"default\"] = GeographicLocation;\n\n//# sourceURL=webpack://bos-platform/./src/component/web/base/GeographicLocation/GeographicLocationByAMap.js?");

/***/ }),

/***/ "./src/component/web/base/GeographicLocation/GeographicLocationByGMap.js":
/*!*******************************************************************************!*\
  !*** ./src/component/web/base/GeographicLocation/GeographicLocationByGMap.js ***!
  \*******************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.filter.js */ \"../../node_modules/core-js/modules/es.array.filter.js\");\n__webpack_require__(/*! core-js/modules/es.array.for-each.js */ \"../../node_modules/core-js/modules/es.array.for-each.js\");\n__webpack_require__(/*! core-js/modules/es.array.from.js */ \"../../node_modules/core-js/modules/es.array.from.js\");\n__webpack_require__(/*! core-js/modules/es.array.index-of.js */ \"../../node_modules/core-js/modules/es.array.index-of.js\");\n__webpack_require__(/*! core-js/modules/es.array.is-array.js */ \"../../node_modules/core-js/modules/es.array.is-array.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.array.slice.js */ \"../../node_modules/core-js/modules/es.array.slice.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-string.js */ \"../../node_modules/core-js/modules/es.date.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-properties.js */ \"../../node_modules/core-js/modules/es.object.define-properties.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptors.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptors.js\");\n__webpack_require__(/*! core-js/modules/es.object.keys.js */ \"../../node_modules/core-js/modules/es.object.keys.js\");\n__webpack_require__(/*! core-js/modules/es.regexp.exec.js */ \"../../node_modules/core-js/modules/es.regexp.exec.js\");\n__webpack_require__(/*! core-js/modules/es.regexp.to-string.js */ \"../../node_modules/core-js/modules/es.regexp.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ \"../../node_modules/core-js/modules/web.dom-collections.for-each.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.array.find.js */ \"../../node_modules/core-js/modules/es.array.find.js\");\n__webpack_require__(/*! core-js/modules/es.array.map.js */ \"../../node_modules/core-js/modules/es.array.map.js\");\n__webpack_require__(/*! core-js/modules/es.function.name.js */ \"../../node_modules/core-js/modules/es.function.name.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/web.timers.js */ \"../../node_modules/core-js/modules/web.timers.js\");\nvar _react = _interopRequireWildcard(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _classnames2 = _interopRequireDefault(__webpack_require__(/*! classnames */ \"../../node_modules/classnames/index.js\"));\nvar _lodash = __webpack_require__(/*! lodash */ \"../../node_modules/lodash/lodash.js\");\nvar _Select = _interopRequireDefault(__webpack_require__(/*! ./Select */ \"./src/component/web/base/GeographicLocation/Select.js\"));\nvar _GMap = _interopRequireDefault(__webpack_require__(/*! @/component/web/base/Map/GMap */ \"./src/component/web/base/Map/GMap.jsx\"));\nvar _style = _interopRequireDefault(__webpack_require__(/*! ./style.less */ \"./src/component/web/base/GeographicLocation/style.less\"));\nvar _intlApi = __webpack_require__(/*! @/i18n/intlApi */ \"./src/i18n/intlApi.js\");\nvar _mapUtil = __webpack_require__(/*! @/util/mapUtil */ \"./src/util/mapUtil.js\");\nvar _excluded = [\"id\", \"pageId\", \"address\", \"containerStyle\", \"dataPageId\", \"isLocked\", \"labelClassName\", \"labelStyle\", \"selectClassName\", \"selectStyle\", \"inputClassName\", \"inputStyle\", \"license\", \"location\", \"mapKey\", \"required\", \"update\", \"poiType\", \"radius\", \"slot\", \"locale\", \"clickTipsLink\", \"showFormByTips\"];\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nfunction GeographicLocation(_ref) {\n  var id = _ref.id,\n    pageId = _ref.pageId,\n    address = _ref.address,\n    containerStyle = _ref.containerStyle,\n    dataPageId = _ref.dataPageId,\n    isLocked = _ref.isLocked,\n    labelClassName = _ref.labelClassName,\n    labelStyle = _ref.labelStyle,\n    selectClassName = _ref.selectClassName,\n    selectStyle = _ref.selectStyle,\n    inputClassName = _ref.inputClassName,\n    inputStyle = _ref.inputStyle,\n    license = _ref.license,\n    location = _ref.location,\n    mapKey = _ref.mapKey,\n    required = _ref.required,\n    update = _ref.update,\n    _ref$poiType = _ref.poiType,\n    poiType = _ref$poiType === void 0 ? '' : _ref$poiType,\n    _ref$radius = _ref.radius,\n    radius = _ref$radius === void 0 ? 500 : _ref$radius,\n    slot = _ref.slot,\n    _ref$locale = _ref.locale,\n    locale = _ref$locale === void 0 ? 'zh_CN' : _ref$locale,\n    clickTipsLink = _ref.clickTipsLink,\n    showFormByTips = _ref.showFormByTips,\n    others = _objectWithoutProperties(_ref, _excluded);\n  var _useState = (0, _react.useState)([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    options = _useState2[0],\n    setOptions = _useState2[1];\n  var _useState3 = (0, _react.useState)(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    poi = _useState4[0],\n    setPoi = _useState4[1];\n  var mapContainerRef = (0, _react.useRef)();\n  var mapRef = (0, _react.useRef)();\n  var isMoveBySelectedRef = (0, _react.useRef)(false);\n  (0, _react.useEffect)(function () {\n    if (!location || !location.lat || !location.lng) {\n      return;\n    }\n    var poi = {\n      location: _objectSpread({}, location),\n      ad: address\n    };\n    setPoi(poi);\n  }, [location, address]);\n  var updateVal = function updateVal(poi) {\n    var param = {\n      la: poi.point.lat,\n      // 纬度\n      lo: poi.point.lng,\n      // 经度\n      ad: poi.address,\n      // 用户输入的详细地址\n      mapData: {\n        // 地图提供的信息\n        detail: poi.address,\n        // 详细地址\n        title: poi.name,\n        // 用户输入的搜索值\n        id: poi.id\n      }\n    };\n    update && update(param); // 注意发到后端的数据结构\n  };\n  (0, _react.useEffect)(function () {\n    if (isLocked && poi) {\n      setTimeout(function () {\n        return callMapFn('setCenter', poi.location.lng, poi.location.lat);\n      }, 1000);\n    }\n  }, [isLocked, poi]);\n\n  /**\n   * 调用 Map 实例暴露出来的方法\n   * @param {string} methodName 方法名\n   * @param  {...any} params 方法参数\n   */\n  var callMapFn = function callMapFn(methodName) {\n    var _mapRef$current;\n    if (!mapRef.current) return;\n    for (var _len = arguments.length, params = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      params[_key - 1] = arguments[_key];\n    }\n    (_mapRef$current = mapRef.current)[methodName].apply(_mapRef$current, params);\n  };\n  var debounceFn = (0, _lodash.debounce)(function (val) {\n    callMapFn('search', {\n      keyword: val,\n      cb: handleSearch\n    });\n  }, 500);\n  var handleSelectSearch = function handleSelectSearch(val) {\n    if (!val) return;\n    debounceFn(val);\n  };\n  var handleSearch = function handleSearch(results, status) {\n    if (status !== 'OK') {\n      console.warn(\"\\u67E5\\u8BE2\\u6570\\u636E: \".concat(status));\n      return;\n    }\n    // 将查询数据结构进行转换\n    var pois = results.map(function (res) {\n      var _res$geometry, _res$geometry2;\n      return {\n        id: res.place_id,\n        address: res.formatted_address,\n        name: res.name,\n        point: {\n          lat: (_res$geometry = res.geometry) === null || _res$geometry === void 0 || (_res$geometry = _res$geometry.location) === null || _res$geometry === void 0 ? void 0 : _res$geometry.lat(),\n          lng: (_res$geometry2 = res.geometry) === null || _res$geometry2 === void 0 || (_res$geometry2 = _res$geometry2.location) === null || _res$geometry2 === void 0 ? void 0 : _res$geometry2.lng()\n        }\n      };\n    });\n    // const pois = results\n    setOptions(pois);\n  };\n  var handleSelectLocation = function handleSelectLocation(val) {\n    if (!val || isLocked) return;\n    var poi = options.find(function (item) {\n      return item.id === val;\n    });\n    if (!poi) return;\n    setPoi(poi);\n    updateVal(poi);\n    callMapFn('setCenter', poi.point.lng, poi.point.lat);\n  };\n  var handleMapMoveEnd = function handleMapMoveEnd() {\n    var center = mapRef.current && mapRef.current.getCenter();\n    if (!center || isLocked) return;\n    if (isMoveBySelectedRef.current) {\n      resetOptions();\n      return;\n    }\n    callMapFn('nearbySearch', {\n      center: [center.lng, center.lat],\n      type: poiType,\n      radius: radius,\n      cb: handleSearchAfterMove\n    });\n    isMoveBySelectedRef.current = false;\n  };\n  var handleSearchAfterMove = function handleSearchAfterMove(result, status) {\n    if (isLocked) return;\n    if (!result || status !== 'OK') {\n      console.warn('地图拖动定位失败');\n      return;\n    }\n    // 使用nearbySearch搜索数据结构不同\n    var pois = result;\n    setPoi(pois[0]);\n  };\n  var handleInputChange = function handleInputChange(value) {\n    if (value === undefined) {\n      setPoi(null);\n      setOptions([]);\n    }\n  };\n  var resetOptions = function resetOptions() {\n    isMoveBySelectedRef.current = false;\n    setOptions([]);\n  };\n  var labelClz = (0, _classnames2[\"default\"])(_style[\"default\"]['geo-label'], labelClassName);\n  var selectClz = (0, _classnames2[\"default\"])(_style[\"default\"]['flex-layout-right'], _defineProperty(_defineProperty(_defineProperty({}, _style[\"default\"]['locked-geo'], isLocked && poi), _style[\"default\"]['select-underline'], true), _style[\"default\"]['select-all-border'], false));\n  var mapOptions = {\n    zoomControl: false\n  };\n  return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: (0, _classnames2[\"default\"])('kd-cq-field kd-cq-geographic', _style[\"default\"]['geographic-location']),\n    style: containerStyle\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: _style[\"default\"]['flex-layout']\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"label\", {\n    className: labelClz,\n    style: labelStyle\n  }, (0, _intlApi.getLangMsg)('GeoPoint.key0001'), required && /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n    className: (0, _classnames2[\"default\"])(_style[\"default\"]['required-icon'], 'require-icon')\n  }, \"*\")), slot, /*#__PURE__*/_react[\"default\"].createElement(_Select[\"default\"], {\n    disabled: isLocked,\n    className: selectClz,\n    style: selectStyle,\n    options: options,\n    value: poi && poi.ad || '',\n    onChange: handleInputChange,\n    onSearch: handleSelectSearch,\n    onSelect: handleSelectLocation\n  })), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: _style[\"default\"]['map-container'],\n    ref: mapContainerRef\n  }, /*#__PURE__*/_react[\"default\"].createElement(_GMap[\"default\"], {\n    ref: mapRef,\n    id: id,\n    pageId: pageId,\n    license: license,\n    dragEnable: !isLocked,\n    mapKey: mapKey,\n    mapOptions: mapOptions,\n    onMoveEnd: handleMapMoveEnd,\n    locale: locale,\n    showSearchBox: false\n  })));\n}\nvar _default = exports[\"default\"] = GeographicLocation;\n\n//# sourceURL=webpack://bos-platform/./src/component/web/base/GeographicLocation/GeographicLocationByGMap.js?");

/***/ }),

/***/ "./src/component/web/base/GeographicLocation/Select.js":
/*!*************************************************************!*\
  !*** ./src/component/web/base/GeographicLocation/Select.js ***!
  \*************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.array.map.js */ \"../../node_modules/core-js/modules/es.array.map.js\");\n__webpack_require__(/*! core-js/modules/es.function.name.js */ \"../../node_modules/core-js/modules/es.function.name.js\");\nvar _react = _interopRequireDefault(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _rcSelect = _interopRequireWildcard(__webpack_require__(/*! rc-select */ \"../../node_modules/rc-select/es/index.js\"));\nvar _intlApi = __webpack_require__(/*! @/i18n/intlApi */ \"./src/i18n/intlApi.js\");\nvar _classnames = _interopRequireDefault(__webpack_require__(/*! classnames */ \"../../node_modules/classnames/index.js\"));\nvar _style = _interopRequireDefault(__webpack_require__(/*! ./style.less */ \"./src/component/web/base/GeographicLocation/style.less\"));\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction GLSelect(_ref) {\n  var className = _ref.className,\n    disabled = _ref.disabled,\n    _ref$options = _ref.options,\n    options = _ref$options === void 0 ? [] : _ref$options,\n    showSearch = _ref.showSearch,\n    style = _ref.style,\n    value = _ref.value,\n    handleChange = _ref.onChange,\n    handleSearch = _ref.onSearch,\n    handleSelect = _ref.onSelect;\n  var notFoundContent = /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: (0, _classnames[\"default\"])('kd-cq-empty-description kd-cq-empty-geographic', _style[\"default\"]['no-result'])\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"span\", null, (0, _intlApi.getLangMsg)({\n    key: 'Select.key0011'\n  })));\n  return /*#__PURE__*/_react[\"default\"].createElement(_rcSelect[\"default\"], {\n    allowClear: value && value.length > 0 && !disabled,\n    className: className,\n    disabled: disabled,\n    style: style,\n    showSearch: showSearch,\n    value: value,\n    onChange: handleChange,\n    onSearch: handleSearch,\n    onSelect: handleSelect,\n    filterOption: false,\n    notFoundContent: notFoundContent\n  }, options.map(function (item) {\n    return /*#__PURE__*/_react[\"default\"].createElement(_rcSelect.Option, {\n      key: item.id,\n      value: item.id,\n      title: item.address || item.name\n    }, item.name);\n  }));\n}\nvar _default = exports[\"default\"] = GLSelect;\n\n//# sourceURL=webpack://bos-platform/./src/component/web/base/GeographicLocation/Select.js?");

/***/ }),

/***/ "./src/component/web/base/GridContainer.jsx":
/*!**************************************************!*\
  !*** ./src/component/web/base/GridContainer.jsx ***!
  \**************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.filter.js */ \"../../node_modules/core-js/modules/es.array.filter.js\");\n__webpack_require__(/*! core-js/modules/es.array.for-each.js */ \"../../node_modules/core-js/modules/es.array.for-each.js\");\n__webpack_require__(/*! core-js/modules/es.array.index-of.js */ \"../../node_modules/core-js/modules/es.array.index-of.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.assign.js */ \"../../node_modules/core-js/modules/es.object.assign.js\");\n__webpack_require__(/*! core-js/modules/es.object.create.js */ \"../../node_modules/core-js/modules/es.object.create.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-properties.js */ \"../../node_modules/core-js/modules/es.object.define-properties.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptors.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptors.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.get-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.keys.js */ \"../../node_modules/core-js/modules/es.object.keys.js\");\n__webpack_require__(/*! core-js/modules/es.reflect.construct.js */ \"../../node_modules/core-js/modules/es.reflect.construct.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ \"../../node_modules/core-js/modules/web.dom-collections.for-each.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.array.map.js */ \"../../node_modules/core-js/modules/es.array.map.js\");\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\n__webpack_require__(/*! core-js/modules/es.object.set-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.set-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.promise.js */ \"../../node_modules/core-js/modules/es.promise.js\");\nvar _react = _interopRequireDefault(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _reactDom = _interopRequireDefault(__webpack_require__(/*! react-dom */ \"webpack/sharing/consume/default/react-dom/react-dom?418d\"));\nvar _propTypes = _interopRequireDefault(__webpack_require__(/*! prop-types */ \"../../node_modules/prop-types/index.js\"));\nvar _classnames7 = _interopRequireDefault(__webpack_require__(/*! classnames */ \"../../node_modules/classnames/index.js\"));\nvar _global = _interopRequireWildcard(__webpack_require__(/*! @/global */ \"./src/global/index.js\"));\nvar _commonUtils = _interopRequireDefault(__webpack_require__(/*! ../../common/commonUtils */ \"./src/component/common/commonUtils.js\"));\nvar _Bill = _interopRequireDefault(__webpack_require__(/*! ../Bill */ \"./src/component/web/Bill.js\"));\nvar _gridcontainerUtil = __webpack_require__(/*! ../../../util/gridcontainerUtil */ \"./src/util/gridcontainerUtil.js\");\nvar _reactGridLayout = _interopRequireWildcard(__webpack_require__(/*! react-grid-layout */ \"../../node_modules/react-grid-layout/index.js\"));\nvar _intlApi = __webpack_require__(/*! ../../../i18n/intlApi */ \"./src/i18n/intlApi.js\");\nvar _console = _interopRequireDefault(__webpack_require__(/*! @/api/console */ \"./src/api/console.js\"));\nvar _HomePageScheme = _interopRequireDefault(__webpack_require__(/*! ./HomePageScheme */ \"./src/component/web/base/HomePageScheme.js\"));\nvar _HomePageSchemeIcon = _interopRequireDefault(__webpack_require__(/*! ./HomePageSchemeIcon */ \"./src/component/web/base/HomePageSchemeIcon.js\"));\nvar _resizeObserve = _interopRequireDefault(__webpack_require__(/*! ../../../util/resizeObserve */ \"./src/util/resizeObserve.js\"));\n__webpack_require__(/*! @/style/react-grid-layout.less */ \"./src/style/react-grid-layout.less\");\nvar _GridContainer2 = _interopRequireDefault(__webpack_require__(/*! ./GridContainer.less */ \"./src/component/web/base/GridContainer.less\"));\nvar _excluded = [\"style\", \"className\", \"AlignSelf\", \"Grow\", \"Shrink\", \"canEdit\", \"onLayoutChange\", \"layout\", \"cols\", \"rowHeight\", \"onBarAddCardClick\", \"onBarCancelEdit\", \"layoutMargin\", \"containerPadding\", \"onBarEditEnd\", \"pageId\", \"state\", \"onItemDeleteClick\", \"refreshForm\", \"refreshId\", \"setDefaultVisible\", \"isSetDefault\", \"rootPageId\", \"homePageSchemeData\", \"id\", \"showEditTool\", \"hideSchemeEdit\", \"hideSchemeSwitch\"],\n  _excluded2 = [\"item\", \"pageId\", \"id\", \"state\", \"canEdit\", \"cardId\", \"onItemDeleteClick\", \"style\", \"className\", \"children\", \"releasedPageIds\", \"addReleasePageId\", \"refreshForm\", \"refreshId\", \"rootPageId\"];\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); } // 栅格容器控件-基类\n// 列数量不变\n// 加载第三方样式\nvar ReactGridLayout = (0, _reactGridLayout.WidthProvider)(_reactGridLayout[\"default\"]);\nvar GridContainer = /*#__PURE__*/function (_React$Component) {\n  _inherits(GridContainer, _React$Component);\n  function GridContainer(props) {\n    var _this;\n    _classCallCheck(this, GridContainer);\n    _this = _callSuper(this, GridContainer, [props]);\n    // renderBottomPanel(){\n    //   let container = this.attachElement\n    //   if (!container){\n    //     container = document.createElement('div')\n    //     //模态窗z-index为1050,这个底部bar要被模态遮挡.\n    //     container.style.cssText =\n    //       'position:fixed;z-index:1049;left:0;right:0;bottom:0;opacity:0.7;background: #171A29;height:58px;'\n    //     document.body.appendChild(container);\n    //     this.attachElement = container;\n    //     let bottomPanel = (<div className={styles['bottombarpanel']}>\n    //       <div className={classnames('kdfont',styles['button'],styles['addcard'])} onClick={this.onBarAddCardClick.bind(this)}>\n    //       <span className={classnames('kdfont kdfont-tianjia',styles['addcard-flag'])}></span>\n    //       <span>新增卡片</span>\n    //       </div>\n    //       <div className={styles['editcontainer']}>\n    //         <div className={classnames('kdfont',styles['button'],styles['edit-cancel'])} onClick={this.onBarCancelEdit.bind(this)}>取消</div>\n    //         <div className={classnames('kdfont', styles['button'],styles['edit-end'])} onClick={this.onBarEditEnd.bind(this)}>完成</div>\n    //       </div>\n    //     </div>);\n    //     ReactDOM.render(bottomPanel, container)\n    //   }\n    // }\n    _this.onBarSetDefault = function () {\n      _this.setState({\n        isSetDefault: !_this.state.isSetDefault\n      });\n    };\n    _this.state = {\n      showAddPanel: false,\n      isSetDefault: false,\n      scrollTop: 0 // 自身滚动条的滚动距离(只用于触发重新渲染,不用做实际的定位数值)\n    };\n    _this.onLayoutChange = _this.onLayoutChange.bind(_assertThisInitialized(_this));\n    _this.onItemDeleteClick = _this.onItemDeleteClick.bind(_assertThisInitialized(_this));\n    _this.addReleasePageId = _this.addReleasePageId.bind(_assertThisInitialized(_this));\n    _this.onDragStartCallback = _this.onDragStartCallback.bind(_assertThisInitialized(_this));\n    _this.adjustOffsetOfPanel = _this.adjustOffsetOfPanel.bind(_assertThisInitialized(_this));\n    _this.resizeListener = _this.resizeListener.bind(_assertThisInitialized(_this));\n    _this.onBarAddCardHover = _this.onBarAddCardHover.bind(_assertThisInitialized(_this));\n    _this.onBarAddCardOver = _this.onBarAddCardOver.bind(_assertThisInitialized(_this));\n    _this.onBarAddCardClick = _this.onBarAddCardClick.bind(_assertThisInitialized(_this));\n    _this._releasedPageIds = []; // 各个卡片中已经释放的单据pageId.\n    _this._preHiddend = true; // 前一个状态是否不可见(默认不可见,会强制栅格重新布局一次,不会影响render.针对页签中布局，首次渲染不可见的情况)\n    _this._resizeObserve = undefined; // 监听大小,可见性变化\n    _this._preScrollTop = 0; // 记录前一次底部工具栏渲染时的位置\n    return _this;\n  }\n\n  // 生成Item项\n  _createClass(GridContainer, [{\n    key: \"generateDOM\",\n    value: function generateDOM(layout) {\n      if (layout && layout.length > 0) {\n        var con = this;\n        return layout.map(function (item) {\n          return /*#__PURE__*/_react[\"default\"].createElement(GridContainerItem, {\n            key: item.i,\n            id: con.props.id,\n            cardId: item.i,\n            item: item,\n            pageId: con.props.pageId,\n            state: con.props.state,\n            canEdit: con.props.canEdit,\n            onItemDeleteClick: con.onItemDeleteClick,\n            addReleasePageId: con.addReleasePageId,\n            releasedPageIds: con._releasedPageIds,\n            refreshForm: con.props.refreshForm,\n            refreshId: con.props.refreshId,\n            rootPageId: con.props.rootPageId\n          });\n        });\n      }\n    }\n\n    // layout changed\n  }, {\n    key: \"onLayoutChange\",\n    value: function onLayoutChange(layout) {\n      this.props.onLayoutChange && this.props.onLayoutChange(layout);\n    }\n  }, {\n    key: \"onItemDeleteClick\",\n    value: function onItemDeleteClick(cardId) {\n      this.props.onItemDeleteClick && this.props.onItemDeleteClick(cardId);\n    }\n  }, {\n    key: \"onBarAddCardClick\",\n    value: function onBarAddCardClick(e) {\n      e.stopPropagation();\n      this.props.onBarAddCardClick && this.props.onBarAddCardClick();\n    }\n  }, {\n    key: \"onBarCancelEdit\",\n    value: function onBarCancelEdit(e) {\n      e.stopPropagation();\n      this.props.onBarCancelEdit && this.props.onBarCancelEdit();\n      // 每次关闭将是否设为默认按钮都设为false\n      this.setState({\n        isSetDefault: false\n      });\n    }\n  }, {\n    key: \"onBarEditEnd\",\n    value: function onBarEditEnd(e) {\n      e.stopPropagation();\n      this.props.onBarEditEnd && this.props.onBarEditEnd(this.state.isSetDefault);\n      // 每次关闭将是否设为默认按钮都设为false\n      // 不必每次点击完成的时候都把按钮的状态置为false,感觉之前的做法就是有问题的\n      //  this.setState({ isSetDefault: false })\n    }\n  }, {\n    key: \"getBottomPanel\",\n    value: function getBottomPanel() {\n      var _this2 = this;\n      var setDefaultVisible = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      // 动态调整位置\n      // console.warn(`getBottomPanel===> state.scrollTop: ${this.state.scrollTop}, _reactGridEle.scrollTop: ${this._reactGridEle.scrollTop}`);\n      var scrollTop = this._reactGridEle.scrollTop;\n      this._preScrollTop = scrollTop;\n      var bottomBarStyle = {\n        bottom: '-' + scrollTop + 'px'\n      };\n\n      // <div className={classnames('kdfont', styles['button'], styles['addcard'])} onClick={this.onBarAddCardClick.bind(this)}>\n      //   <span className={classnames('kdfont kdfont-tianjia', styles['addcard-flag'])}></span>\n      //   <span>新增卡片</span>\n      // </div>\n\n      // <i className={classnames('kdfont kdfont-tianjiaqiapian',styles['ap-addcard-flag'])}></i>\n      // <span>添加卡片</span>\n      var setDefCls = (0, _classnames7[\"default\"])(_defineProperty(_defineProperty({}, _GridContainer2[\"default\"]['default-wrapper'], true), _GridContainer2[\"default\"]['default-wrapper-open'], this.state.isSetDefault));\n      return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        style: bottomBarStyle,\n        className: _GridContainer2[\"default\"].bottombarpanel,\n        ref: function ref(d) {\n          return _this2._reactGridToolbar = d;\n        }\n      }, !setDefaultVisible ? /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        className: _GridContainer2[\"default\"]['left-container'],\n        onMouseEnter: this.onBarAddCardHover,\n        onMouseLeave: this.onBarAddCardOver\n      }) : /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        className: _GridContainer2[\"default\"]['left-container']\n      }, /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n        className: (0, _classnames7[\"default\"])(_GridContainer2[\"default\"]['default-text'])\n      }, (0, _intlApi.getLangMsg)({\n        key: 'gridContainer.key0009'\n      })), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        className: setDefCls,\n        onClick: this.onBarSetDefault\n      }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        className: _GridContainer2[\"default\"]['default-inner']\n      }))), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        className: (0, _classnames7[\"default\"])(_GridContainer2[\"default\"].newaddcard, _defineProperty({}, _GridContainer2[\"default\"]['newaddcard-show'], this.state.showAddPanel)),\n        onMouseEnter: this.onBarAddCardHover,\n        onMouseLeave: this.onBarAddCardOver\n      }, /*#__PURE__*/_react[\"default\"].createElement(\"i\", {\n        className: (0, _classnames7[\"default\"])('kdfont kdfont-tianjiaqiapian', _GridContainer2[\"default\"]['newaddcard-flag'], _GridContainer2[\"default\"]['newaddcard-item']),\n        onClick: this.onBarAddCardClick\n      }), /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n        className: _GridContainer2[\"default\"]['newaddcard-item'],\n        onClick: this.onBarAddCardClick\n      }, (0, _intlApi.getLangMsg)({\n        key: 'gridContainer.key0010'\n      })), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        className: (0, _classnames7[\"default\"])(_GridContainer2[\"default\"]['popup-panel'], _defineProperty({}, _GridContainer2[\"default\"]['ap-show'], this.state.showAddPanel)),\n        onClick: this.onBarAddCardClick\n      })), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        className: _GridContainer2[\"default\"].editcontainer\n      }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        className: (0, _classnames7[\"default\"])(_GridContainer2[\"default\"].button, _GridContainer2[\"default\"]['edit-cancel']),\n        onClick: this.onBarCancelEdit.bind(this)\n      }, (0, _intlApi.getLangMsg)({\n        key: 'gridContainer.key0011'\n      })), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        className: (0, _classnames7[\"default\"])(_GridContainer2[\"default\"].button, _GridContainer2[\"default\"]['edit-end'], 'kd-theme kd-grid-btn'),\n        onClick: this.onBarEditEnd.bind(this)\n      }, (0, _intlApi.getLangMsg)({\n        key: 'gridContainer.key0007'\n      }))));\n\n      // ReactDOM.render(bottomPanel, container)\n    }\n  }, {\n    key: \"addReleasePageId\",\n    value: function addReleasePageId(pageId) {\n      if (pageId !== undefined) {\n        this._releasedPageIds.push(pageId);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      // console.warn(`卡片base被释放了 key：${this.props.id}`);\n      if (this._resizeObserve) {\n        this._resizeObserve.removeResizeObserve();\n        this._resizeObserve = null;\n      }\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      var oldCanEdit = this.props.canEdit;\n      var newCanEdit = nextProps.canEdit;\n      if (oldCanEdit !== newCanEdit) {\n        if (newCanEdit === true) {\n          this.bindEvent();\n          if (this.isCompatibleModel(nextProps)) {\n            if (this._reactGridEle) {\n              this._reactGridEle.scrollTop = 0; // 将栅格容器滚动到第一个卡片的位置\n            }\n          }\n        } else {\n          this.unBindEvnet();\n          // if(this._reactGridEle&&this._reactGridEle.scrollTo){\n          //   this._reactGridEle.scrollTo(0, 0); //将栅格容器滚动到第一个卡片的位置,防止用户编辑过程中进行了滚动.\n          // }\n          if (this._reactGridEle) {\n            this._reactGridEle.scrollTop = 0; // 将栅格容器滚动到第一个卡片的位置\n          }\n          if (this.state.showAddPanel === true) {\n            // 退出编辑态,自动关闭'添加卡片'弹出面板\n            this.setState({\n              showAddPanel: false\n            });\n          }\n        }\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this._reactGridEle) {\n        this._resizeObserve = (0, _resizeObserve[\"default\"])(this._reactGridEle, this.resizeListener);\n        // let con = this;\n        // setTimeout(()=>{\n        //   this.forceWindowResize(); //触发栅格容器重新布局,解决右边距'10px'第一次布局没出来的问题(重新渲染)\n        //   setTimeout(()=>{\n        //     this.forceWindowResize();\n        //   },250) //防止卡片中元素宽度不对(比如表格宽度超过卡片,导致表格右边部分内容被截取)\n        // }, 750)\n      }\n    }\n\n    // 监听栅格容器大小变化\n  }, {\n    key: \"resizeListener\",\n    value: function resizeListener(rect) {\n      // console.warn(`grid container,resizeListener===> size changed, height:${rect.height}, width:${rect.width}`);\n      if (rect && rect.hide) {\n        this._preHiddend = true;\n      } else {\n        if (this._preHiddend) {\n          // 方法1:这种方式无效\n          // con.forceUpdate();\n\n          // 方法2: 强制触发window.onResize事件,刷新栅格容器布局(由自己或父容器隐藏到显示的情况,防止布局混乱)\n          // 这里不再通过强制触发window.onResize事件来刷新栅格容器内容卡片布局，而是直接修改卡片库源代码文件'WidthProivder.js'来彻底解决问题 -20190527\n          // this.forceWindowResize();\n\n          // 方法3: 修改栅格props,使其内部刷新(这种方式无效)\n          // let con = this;\n          // con.setState({\n          //   compactType: con.state.compactType==='vertical'?'horizontal':'vertical'\n          // });\n        }\n        this._preHiddend = false;\n\n        // 编辑态时的栅格容器由不可见(不可见时scrollTop自动变成了0)到可见,且前后两次渲染位置不一致,则强制重新渲染一下,防止底部工具栏显示位置不对\n        if (this.props.canEdit && this._reactGridEle.scrollTop !== this._preScrollTop) {\n          this.forceUpdate();\n          _console[\"default\"].warn('grid container==> forceUpdate');\n        }\n      }\n    }\n\n    // 触发window.resize事件,强制栅格容器重新计算布局\n  }, {\n    key: \"forceWindowResize\",\n    value: function forceWindowResize() {\n      // console.warn('=== force to trigger event of window.resize ===');\n      var e = document.createEvent('Event');\n      e.initEvent('resize', true, true);\n      window.dispatchEvent(e);\n    }\n  }, {\n    key: \"bindEvent\",\n    value: function bindEvent() {\n      if (this._reactGridEle) {\n        this._reactGridEle.addEventListener('scroll', this.adjustOffsetOfPanel, true);\n      }\n    }\n  }, {\n    key: \"unBindEvnet\",\n    value: function unBindEvnet() {\n      if (this._reactGridEle) {\n        this._reactGridEle.removeEventListener('scroll', this.adjustOffsetOfPanel, true);\n      }\n    }\n  }, {\n    key: \"adjustOffsetOfPanel\",\n    value: function adjustOffsetOfPanel() {\n      // IE/FireFox浏览器中不需要调整位置\n      if (this._reactGridEle && this._reactGridToolbar && !this.isCompatibleModel()) {\n        // let scrollTop = this._reactGridEle.scrollTop;\n        // console.warn(`adjustOffsetOfPanel===> scrollTop: ${scrollTop}`);\n        // this.setState({\n        //   scrollTop: scrollTop\n        // })\n\n        // 直接修改其style,不通过频繁render去修改其位置,性能优化.\n        var scrollTop = this._reactGridEle.scrollTop;\n        this._preScrollTop = scrollTop;\n        if (this._reactGridToolbar.style) {\n          this._reactGridToolbar.style.bottom = '-' + scrollTop + 'px';\n        }\n      }\n    }\n\n    // return false,则栅格容器'shouldUpdate'判断就为false,就不会拖拽\n  }, {\n    key: \"onDragStartCallback\",\n    value: function onDragStartCallback() {\n      var target = arguments[4] && arguments[4].target;\n      if (this._reactGridEle && target) {\n        /*\n         * 如果拖动源target不是当前栅格容器Dom结构的子元素,就不准拖拽\n         * 问题修复：点击卡片中单据里的控件弹出一个模态窗时,单击拖拽模态窗,会导致模态窗后面的卡片元素被拖动\n         */\n        var shouldUpdate = false;\n        var parentTarget = target;\n        while (parentTarget) {\n          if (parentTarget !== this._reactGridEle) {\n            // 判断拖拽的元素是否是当前栅格容器的dom子元素\n            parentTarget = parentTarget.parentNode;\n          } else {\n            shouldUpdate = true;\n            break;\n          }\n        }\n        return shouldUpdate && !this.clickedScrollbar(target, arguments[4]);\n      } else {\n        return true;\n      }\n    }\n\n    // 是否点击在目标dom元素的滚动条上(clientX/clientY:鼠标坐标)\n  }, {\n    key: \"clickedScrollbar\",\n    value: function clickedScrollbar(targetDom, event) {\n      if (targetDom && event) {\n        var _targetDom$getBoundin = targetDom.getBoundingClientRect(),\n          left = _targetDom$getBoundin.left,\n          top = _targetDom$getBoundin.top;\n        return targetDom.clientWidth + left <= event.clientX || targetDom.clientHeight + top <= event.clientY;\n      } else {\n        return false;\n      }\n    }\n\n    // 显示'添加卡片'弹窗\n  }, {\n    key: \"onBarAddCardHover\",\n    value: function onBarAddCardHover() {\n      if (this.state.showAddPanel !== true) {\n        this.setState({\n          showAddPanel: true\n        });\n      }\n    }\n  }, {\n    key: \"onBarAddCardOver\",\n    value: function onBarAddCardOver() {\n      if (this.state.showAddPanel !== false) {\n        this.setState({\n          showAddPanel: false\n        });\n      }\n    }\n\n    // 当前是否兼容模式(IE/FireFox浏览器在栅格容器编辑态时,要做兼容处理,防止底部工具栏闪跳)\n  }, {\n    key: \"isCompatibleModel\",\n    value: function isCompatibleModel(props) {\n      var pro = props || this.props;\n      return pro.canEdit && (_global[\"default\"][_global.IS_IE] || _global[\"default\"][_global.IS_FIREFOX]);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n      var _this$props = this.props,\n        style = _this$props.style,\n        className = _this$props.className,\n        AlignSelf = _this$props.AlignSelf,\n        Grow = _this$props.Grow,\n        Shrink = _this$props.Shrink,\n        canEdit = _this$props.canEdit,\n        onLayoutChange = _this$props.onLayoutChange,\n        layout = _this$props.layout,\n        cols = _this$props.cols,\n        rowHeight = _this$props.rowHeight,\n        onBarAddCardClick = _this$props.onBarAddCardClick,\n        onBarCancelEdit = _this$props.onBarCancelEdit,\n        layoutMargin = _this$props.layoutMargin,\n        containerPadding = _this$props.containerPadding,\n        onBarEditEnd = _this$props.onBarEditEnd,\n        pageId = _this$props.pageId,\n        state = _this$props.state,\n        onItemDeleteClick = _this$props.onItemDeleteClick,\n        refreshForm = _this$props.refreshForm,\n        refreshId = _this$props.refreshId,\n        setDefaultVisible = _this$props.setDefaultVisible,\n        isSetDefault = _this$props.isSetDefault,\n        rootPageId = _this$props.rootPageId,\n        homePageSchemeData = _this$props.homePageSchemeData,\n        id = _this$props.id,\n        showEditTool = _this$props.showEditTool,\n        hideSchemeEdit = _this$props.hideSchemeEdit,\n        hideSchemeSwitch = _this$props.hideSchemeSwitch,\n        other = _objectWithoutProperties(_this$props, _excluded);\n      className = (0, _classnames7[\"default\"])(_defineProperty(_defineProperty(_defineProperty(_defineProperty({}, _GridContainer2[\"default\"].GridContainer, true), _GridContainer2[\"default\"]['gc-canedit'], true), _GridContainer2[\"default\"]['gc-compatible'], this.isCompatibleModel()), className, className), (0, _commonUtils[\"default\"])({\n        Grow: Grow,\n        Shrink: Shrink,\n        AlignSelf: AlignSelf\n      }));\n      var isDraggable = false; // item是否可拖拽\n      var isResizable = false; // item是否可改变大小\n      // let margin=[]; //item间间距(默认间距10px)\n      // let containerPadding=[]; //容器padding\n\n      if (canEdit === true) {\n        // 是否可编辑\n        isDraggable = true;\n        isResizable = true;\n      }\n\n      // 注意:useCSSTransforms必须使用false,否则卡片使用transform(x,y)定位,会导致卡片里面fixed布局的元素错乱,eg:卡片里的下拉字段的弹出面板。\n      return /*#__PURE__*/_react[\"default\"].createElement(\"div\", _extends({\n        style: style,\n        className: className\n      }, other, {\n        ref: function ref(d) {\n          return _this3._reactGridEle = d;\n        }\n      }), showEditTool !== false && homePageSchemeData && /*#__PURE__*/_react[\"default\"].createElement(_HomePageScheme[\"default\"], {\n        homePageSchemeData: _objectSpread({\n          isEditMode: canEdit\n        }, homePageSchemeData),\n        controlKey: id,\n        pageId: pageId\n      }), showEditTool !== false && homePageSchemeData && /*#__PURE__*/_react[\"default\"].createElement(_HomePageSchemeIcon[\"default\"], _extends({\n        hideSchemeSwitch: hideSchemeSwitch,\n        hideSchemeEdit: hideSchemeEdit,\n        isEditMode: canEdit,\n        modelKey: id,\n        pageId: pageId\n      }, homePageSchemeData)), /*#__PURE__*/_react[\"default\"].createElement(ReactGridLayout, {\n        className: (0, _classnames7[\"default\"])(_GridContainer2[\"default\"]['gc-c'], _defineProperty({}, _GridContainer2[\"default\"]['gc-container'], canEdit && !homePageSchemeData)),\n        layout: layout || [],\n        cols: cols || 0,\n        rowHeight: rowHeight || 0,\n        onLayoutChange: this.onLayoutChange,\n        isDraggable: isDraggable,\n        isResizable: isResizable\n        // margin={margin}\n        // containerPadding={containerPadding}\n        ,\n        margin: layoutMargin,\n        containerPadding: containerPadding,\n        onDragStart: this.onDragStartCallback,\n        useCSSTransforms: false\n      }, this.generateDOM(layout)), showEditTool !== false && !homePageSchemeData && canEdit && this._reactGridEle ? /*#__PURE__*/_reactDom[\"default\"].createPortal(this.getBottomPanel(setDefaultVisible), this._reactGridEle) : null);\n    }\n  }]);\n  return GridContainer;\n}(_react[\"default\"].Component);\nGridContainer.defaultProps = {\n  layout: [],\n  rowHeight: 0,\n  cols: 0,\n  onLayoutChange: function onLayoutChange() {}\n};\nGridContainer.propTypes = {\n  style: _propTypes[\"default\"].object,\n  className: _propTypes[\"default\"].string,\n  AlignSelf: _propTypes[\"default\"].string,\n  Grow: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].string, _propTypes[\"default\"].number]),\n  Shrink: _propTypes[\"default\"].oneOfType([_propTypes[\"default\"].string, _propTypes[\"default\"].number]),\n  showEditTool: _propTypes[\"default\"].bool //编辑态是否显示工具栏，默认true\n};\nvar _default = exports[\"default\"] = GridContainer; // 单个卡片\nvar GridContainerItem = /*#__PURE__*/function (_React$Component2) {\n  _inherits(GridContainerItem, _React$Component2);\n  function GridContainerItem(props) {\n    var _this4;\n    _classCallCheck(this, GridContainerItem);\n    _this4 = _callSuper(this, GridContainerItem, [props]);\n    _this4.setPageId = _this4.setPageId.bind(_assertThisInitialized(_this4));\n    _this4._pageId = undefined;\n    return _this4;\n  }\n  _createClass(GridContainerItem, [{\n    key: \"onItemDeleteClick\",\n    value: function onItemDeleteClick(cardId, e) {\n      e.stopPropagation();\n      this.props.onItemDeleteClick && this.props.onItemDeleteClick(cardId);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.props.addReleasePageId && this.props.addReleasePageId(this._pageId);\n    }\n  }, {\n    key: \"setPageId\",\n    value: function setPageId(pageId) {\n      this._pageId = pageId;\n    }\n  }, {\n    key: \"ondragstart\",\n    value: function ondragstart(e) {\n      // console.warn(`girdItem dragstart: ${this.props.cardId}`);\n      // 阻止浏览器默认拖拽行为(针对卡片中所有内容)\n      // 栅格容器的拖拽是使用mousedown／mouseup实现的，所以这里阻止了拖拽行为，但不会影响栅格容器拖拽功能。\n      if (e.stopPropagation) {\n        e.stopPropagation();\n      }\n      if (e.preventDefault) {\n        e.preventDefault();\n      }\n      e.cancelBubble = true;\n      e.returnValue = false;\n      return false;\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      var newRefreshId = nextProps.refreshId;\n      var oldRefreshId = this.props.refreshId;\n      // 发送refresh请求\n      if (newRefreshId !== undefined && newRefreshId !== oldRefreshId) {\n        nextProps.refreshForm && nextProps.refreshForm(this._pageId);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n      // id:栅格容器key,pageId:栅格容器所在页面pageId,state:store\n      var _this$props2 = this.props,\n        item = _this$props2.item,\n        pageId = _this$props2.pageId,\n        id = _this$props2.id,\n        state = _this$props2.state,\n        canEdit = _this$props2.canEdit,\n        cardId = _this$props2.cardId,\n        onItemDeleteClick = _this$props2.onItemDeleteClick,\n        style = _this$props2.style,\n        className = _this$props2.className,\n        children = _this$props2.children,\n        releasedPageIds = _this$props2.releasedPageIds,\n        addReleasePageId = _this$props2.addReleasePageId,\n        refreshForm = _this$props2.refreshForm,\n        refreshId = _this$props2.refreshId,\n        rootPageId = _this$props2.rootPageId,\n        others = _objectWithoutProperties(_this$props2, _excluded2);\n      return /*#__PURE__*/_react[\"default\"].createElement(\"div\", _extends({\n        \"data-is-grid-container\": true,\n        onDragStart: this.ondragstart.bind(this),\n        key: cardId,\n        style: style,\n        className: (0, _classnames7[\"default\"])(_defineProperty(_defineProperty({}, _GridContainer2[\"default\"]['gc-item'], true), className, className))\n      }, others), canEdit ? /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        className: (0, _classnames7[\"default\"])(_GridContainer2[\"default\"]['delete-item']),\n        onClick: function onClick(e) {\n          return _this5.onItemDeleteClick(item.i, e);\n        }\n      }, /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n        className: (0, _classnames7[\"default\"])('kdfont kdfont-shanchukapian'),\n        title: (0, _intlApi.getLangMsg)({\n          key: 'gridContainer.key0004'\n        })\n      })) : null,\n      // 根据formId加载单据\n      item.formId !== undefined && item.formId !== '' ? /*#__PURE__*/_react[\"default\"].createElement(_Bill[\"default\"], {\n        config: {\n          formId: item.formId,\n          rootPageId: rootPageId\n        }\n      }) : null,\n      // showForm方式在卡片中打开单据\n      _react[\"default\"].Children.toArray((0, _gridcontainerUtil.parseSubFormsByCardId)(pageId, id, state, item.i, releasedPageIds, this.setPageId)),\n      // 右下角的拖动图标\n      _react[\"default\"].Children.toArray(children));\n    }\n  }]);\n  return GridContainerItem;\n}(_react[\"default\"].Component);\n\n//# sourceURL=webpack://bos-platform/./src/component/web/base/GridContainer.jsx?");

/***/ }),

/***/ "./src/component/web/base/HomePageScheme.js":
/*!**************************************************!*\
  !*** ./src/component/web/base/HomePageScheme.js ***!
  \**************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.from.js */ \"../../node_modules/core-js/modules/es.array.from.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.array.slice.js */ \"../../node_modules/core-js/modules/es.array.slice.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-string.js */ \"../../node_modules/core-js/modules/es.date.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.regexp.exec.js */ \"../../node_modules/core-js/modules/es.regexp.exec.js\");\n__webpack_require__(/*! core-js/modules/es.regexp.to-string.js */ \"../../node_modules/core-js/modules/es.regexp.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.array.find.js */ \"../../node_modules/core-js/modules/es.array.find.js\");\n__webpack_require__(/*! core-js/modules/es.array.is-array.js */ \"../../node_modules/core-js/modules/es.array.is-array.js\");\n__webpack_require__(/*! core-js/modules/es.array.map.js */ \"../../node_modules/core-js/modules/es.array.map.js\");\n__webpack_require__(/*! core-js/modules/es.function.name.js */ \"../../node_modules/core-js/modules/es.function.name.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\nvar _react = _interopRequireWildcard(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _kdesign = __webpack_require__(/*! @kdcloudjs/kdesign */ \"webpack/sharing/consume/default/@kdcloudjs/kdesign/@kdcloudjs/kdesign\");\nvar _HomePageScheme = _interopRequireDefault(__webpack_require__(/*! ./HomePageScheme.less */ \"./src/component/web/base/HomePageScheme.less\"));\nvar _classnames = _interopRequireDefault(__webpack_require__(/*! classnames */ \"../../node_modules/classnames/index.js\"));\nvar _reactDom = _interopRequireDefault(__webpack_require__(/*! react-dom */ \"webpack/sharing/consume/default/react-dom/react-dom?418d\"));\nvar _intlApi = __webpack_require__(/*! @/i18n/intlApi */ \"./src/i18n/intlApi.js\");\nvar _lodash = __webpack_require__(/*! lodash */ \"../../node_modules/lodash/lodash.js\");\nvar _symbolConst = __webpack_require__(/*! @/constant/symbolConst */ \"./src/constant/symbolConst.js\");\nvar _GlobalDataCacher = __webpack_require__(/*! @/model/GlobalDataCacher */ \"./src/model/GlobalDataCacher.js\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nvar schemeType = {\n  '1': 'save_as_global',\n  '2': 'save_as_share',\n  '3': 'save_as_personal'\n};\nvar HomePageScheme = function HomePageScheme(_ref) {\n  var _schemeGroup$map;\n  var homePageSchemeData = _ref.homePageSchemeData,\n    controlKey = _ref.controlKey,\n    pageId = _ref.pageId;\n  var _homePageSchemeData$s = homePageSchemeData.schemeGroup,\n    schemeGroup = _homePageSchemeData$s === void 0 ? [] : _homePageSchemeData$s,\n    editable = homePageSchemeData.editable,\n    isEditMode = homePageSchemeData.isEditMode,\n    defaultSchemeId = homePageSchemeData.defaultSchemeId,\n    selectedSchemeId = homePageSchemeData.selectedSchemeId,\n    saveSTList = homePageSchemeData.saveSTList,\n    canSave = homePageSchemeData.canSave,\n    onSetAsDefault = homePageSchemeData.onSetAsDefault,\n    onSchemeSelect = homePageSchemeData.onSchemeSelect,\n    onBarCancelEdit = homePageSchemeData.onBarCancelEdit,\n    onDeleteScheme = homePageSchemeData.onDeleteScheme,\n    onBarAddCardClick = homePageSchemeData.onBarAddCardClick,\n    onEdit = homePageSchemeData.onEdit,\n    onSave = homePageSchemeData.onSave,\n    onRefresh = homePageSchemeData.onRefresh,\n    onSaveAs = homePageSchemeData.onSaveAs;\n  var _useState = (0, _react.useState)(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    visible = _useState2[0],\n    setVisible = _useState2[1];\n  var _useState3 = (0, _react.useState)(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    hoverSchemeId = _useState4[0],\n    setHoverSchemeId = _useState4[1];\n  var schemeDropDownGroupRef = (0, _react.useRef)();\n  var schemeRef = (0, _react.useRef)();\n  var handleMenuClick = function handleMenuClick(key) {\n    onSchemeSelect && onSchemeSelect(key);\n    setVisible(false);\n  };\n  var handleVisibleChange = function handleVisibleChange(flag) {\n    !isEditMode && setVisible(flag);\n  };\n  var handleSchemeItemEnter = (0, _lodash.debounce)(function (e) {\n    var ele = e.target;\n    while (ele && ele.nodeName !== 'LI' && ele !== e.currentTarget) {\n      ele = ele.parentNode;\n    }\n    if (ele) {\n      var key = ele.dataset.key;\n      setHoverSchemeId(key);\n    }\n  }, 10);\n  (0, _react.useEffect)(function () {\n    if (!schemeRef.current) return;\n    _reactDom[\"default\"].findDOMNode(schemeRef.current).addEventListener('click', handleSchemeItemClick);\n    _reactDom[\"default\"].findDOMNode(schemeRef.current).addEventListener('mouseover', handleSchemeItemEnter);\n    return function () {\n      if (!schemeRef.current) return;\n      _reactDom[\"default\"].findDOMNode(schemeRef.current).removeEventListener('click', handleSchemeItemClick);\n      _reactDom[\"default\"].findDOMNode(schemeRef.current).removeEventListener('mouseover', handleSchemeItemEnter);\n    };\n  }, [onSchemeSelect, schemeRef.current]);\n  var menu = /*#__PURE__*/_react[\"default\"].createElement(_kdesign.Dropdown.Menu, {\n    className: _HomePageScheme[\"default\"]['scheme-dp-menu'],\n    ref: schemeRef\n  }, schemeGroup === null || schemeGroup === void 0 || (_schemeGroup$map = schemeGroup.map) === null || _schemeGroup$map === void 0 ? void 0 : _schemeGroup$map.call(schemeGroup, function (item) {\n    return /*#__PURE__*/_react[\"default\"].createElement(SchemeDropDownGroup, {\n      ref: schemeDropDownGroupRef,\n      type: item.name,\n      items: item.items,\n      key: item.type,\n      onSetAsDefault: onSetAsDefault,\n      onDeleteScheme: onDeleteScheme,\n      onMenuItemClick: handleMenuClick,\n      defaultSchemeId: defaultSchemeId,\n      selectedSchemeId: selectedSchemeId,\n      hoverSchemeId: hoverSchemeId\n    });\n  }));\n  var selectedGroup = (0, _react.useMemo)(function () {\n    return schemeGroup === null || schemeGroup === void 0 ? void 0 : schemeGroup.find(function (scheme) {\n      var _scheme$items;\n      return scheme === null || scheme === void 0 || (_scheme$items = scheme.items) === null || _scheme$items === void 0 ? void 0 : _scheme$items.find(function (item) {\n        return item.id === selectedSchemeId;\n      });\n    });\n  }, [schemeGroup, selectedSchemeId]);\n  var selectedScheme = (0, _react.useMemo)(function () {\n    var _selectedGroup$items;\n    return selectedGroup === null || selectedGroup === void 0 || (_selectedGroup$items = selectedGroup.items) === null || _selectedGroup$items === void 0 ? void 0 : _selectedGroup$items.find(function (item) {\n      return item.id === selectedSchemeId;\n    });\n  }, [selectedGroup, selectedSchemeId]);\n  var handleSchemeItemClick = (0, _react.useCallback)(function (e) {\n    var ele = e.target;\n    while (ele && ele.nodeName !== 'LI') {\n      ele = ele.parentNode;\n    }\n    if (ele) {\n      var key = ele.dataset.key;\n      onSchemeSelect && onSchemeSelect(key);\n      setVisible(false);\n    }\n  }, [onSchemeSelect]);\n  return editable && isEditMode && /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n    className: (0, _classnames[\"default\"])('kd-cq-home-page-scheme kd-cq-control', _HomePageScheme[\"default\"].scheme, _defineProperty({}, _HomePageScheme[\"default\"]['scheme-edit'], isEditMode))\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n    className: _HomePageScheme[\"default\"]['scheme-tips']\n  }, schemeGroup.length > 0 && /*#__PURE__*/_react[\"default\"].createElement(_kdesign.Dropdown, {\n    menu: menu,\n    onVisibleChange: handleVisibleChange,\n    visible: visible,\n    trigger: \"click\",\n    popperClassName: _HomePageScheme[\"default\"]['scheme-dp'],\n    key: 'scheme',\n    gap: 10\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n    className: (0, _classnames[\"default\"])(_HomePageScheme[\"default\"]['scheme-dp-trigger'], _defineProperty({\n      'kd-hover-color': !isEditMode\n    }, _HomePageScheme[\"default\"]['scheme-dp-trigger-hover'], !isEditMode))\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n    className: _HomePageScheme[\"default\"]['scheme-dp-name'],\n    title: selectedScheme === null || selectedScheme === void 0 ? void 0 : selectedScheme.name\n  }, selectedScheme === null || selectedScheme === void 0 ? void 0 : selectedScheme.name), !isEditMode && /*#__PURE__*/_react[\"default\"].createElement(DropDownIcon, {\n    expand: visible\n  }))), isEditMode && schemeGroup.length > 0 ? /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n    className: (0, _classnames[\"default\"])('kd-cq-home-page-scheme-text', _HomePageScheme[\"default\"]['scheme-label']),\n    title: selectedGroup === null || selectedGroup === void 0 ? void 0 : selectedGroup.name\n  }, selectedGroup === null || selectedGroup === void 0 ? void 0 : selectedGroup.name) : null), /*#__PURE__*/_react[\"default\"].createElement(ToolBar, {\n    isEditMode: isEditMode,\n    saveAsDropDownItems: saveSTList,\n    editable: editable,\n    canSave: canSave,\n    onBarCancelEdit: onBarCancelEdit,\n    onBarAddCardClick: onBarAddCardClick,\n    onEdit: onEdit,\n    onSave: onSave,\n    onRefresh: onRefresh,\n    onSaveAs: onSaveAs,\n    controlKey: controlKey,\n    pageId: pageId\n  }));\n};\nvar DropDownIcon = function DropDownIcon(_ref2) {\n  var expand = _ref2.expand;\n  var className = (0, _classnames[\"default\"])(_defineProperty(_defineProperty(_defineProperty({}, _HomePageScheme[\"default\"]['arrow-down'], true), 'kdfont kdfont-shouqi7', !expand), 'kdfont kdfont-zhankai4', expand));\n  return /*#__PURE__*/_react[\"default\"].createElement(\"i\", {\n    className: className\n  });\n};\nvar SchemeDropDownGroup = function SchemeDropDownGroup(_ref3) {\n  var type = _ref3.type,\n    items = _ref3.items,\n    defaultSchemeId = _ref3.defaultSchemeId,\n    onSetAsDefault = _ref3.onSetAsDefault,\n    onDeleteScheme = _ref3.onDeleteScheme,\n    selectedSchemeId = _ref3.selectedSchemeId,\n    hoverSchemeId = _ref3.hoverSchemeId;\n  var moreIconRef = (0, _react.useRef)();\n  var preventEvent = (0, _react.useCallback)(function (e) {\n    e.stopPropagation();\n  }, []);\n  var handleOperationMenu = function handleOperationMenu(key, id) {\n    if (key === 'setAsDefault') {\n      onSetAsDefault && onSetAsDefault(id);\n    } else if (key === 'delete') {\n      onDeleteScheme && onDeleteScheme(id);\n    }\n  };\n  return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: _HomePageScheme[\"default\"]['scheme-group']\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: _HomePageScheme[\"default\"]['scheme-group-title']\n  }, type), items === null || items === void 0 ? void 0 : items.map(function (item) {\n    var canSetAsDefault = item.canSetAsDefault,\n      canDelete = item.canDelete,\n      id = item.id,\n      name = item.name;\n    var isDefault = id === defaultSchemeId;\n    var showMoreBtn = canDelete || canSetAsDefault;\n    var menuItems = function menuItems() {\n      var nodes = [];\n      canSetAsDefault && nodes.push( /*#__PURE__*/_react[\"default\"].createElement(_kdesign.Dropdown.Item, {\n        key: \"setAsDefault\",\n        className: (0, _classnames[\"default\"])('kd-hover-color')\n      }, (0, _intlApi.getLangMsg)('HomePageScheme.key0007')));\n      canDelete && nodes.push( /*#__PURE__*/_react[\"default\"].createElement(_kdesign.Dropdown.Item, {\n        key: \"delete\",\n        className: (0, _classnames[\"default\"])('kd-hover-color')\n      }, (0, _intlApi.getLangMsg)('HomePageScheme.key0008')));\n      return nodes;\n    };\n    var menu = /*#__PURE__*/_react[\"default\"].createElement(_kdesign.Dropdown.Menu, {\n      onClick: function onClick(key) {\n        return handleOperationMenu(key, id);\n      }\n    }, menuItems());\n    return /*#__PURE__*/_react[\"default\"].createElement(_kdesign.Dropdown.Item, {\n      className: (0, _classnames[\"default\"])(_HomePageScheme[\"default\"]['scheme-group-item'], _defineProperty({}, _HomePageScheme[\"default\"]['scheme-item-selected'], selectedSchemeId === id), 'kd-hover-color'),\n      title: \"\",\n      \"data-key\": id,\n      key: id\n    }, /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n      className: (0, _classnames[\"default\"])(_HomePageScheme[\"default\"]['scheme-group-submenu'])\n    }, /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n      className: (0, _classnames[\"default\"])(_HomePageScheme[\"default\"]['scheme-item-name-wrapper'])\n    }, /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n      className: (0, _classnames[\"default\"])(_HomePageScheme[\"default\"]['scheme-item-name']),\n      title: name\n    }, name)), isDefault && /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n      className: _HomePageScheme[\"default\"]['scheme-item-default']\n    }, (0, _intlApi.getLangMsg)('HomePageScheme.key0009')), showMoreBtn && !isDefault && hoverSchemeId === id && /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      ref: function ref(r) {\n        if (r) {\n          var _moreIconRef$current;\n          moreIconRef.current = r;\n          (_moreIconRef$current = moreIconRef.current) === null || _moreIconRef$current === void 0 || _moreIconRef$current.addEventListener('click', preventEvent);\n        } else {\n          var _moreIconRef$current2;\n          (_moreIconRef$current2 = moreIconRef.current) === null || _moreIconRef$current2 === void 0 || _moreIconRef$current2.removeEventListener('click', preventEvent);\n        }\n      }\n    }, /*#__PURE__*/_react[\"default\"].createElement(_kdesign.Dropdown, {\n      menu: menu,\n      gap: 20,\n      trigger: \"hover\",\n      placement: \"right\",\n      mouseEnterDelay: 0.3,\n      popperClassName: (0, _classnames[\"default\"])(_HomePageScheme[\"default\"].operation, 'kd-hover-color')\n    }, /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n      className: _HomePageScheme[\"default\"]['btn-more']\n    }, /*#__PURE__*/_react[\"default\"].createElement(\"i\", {\n      className: \"kdfont kdfont-gengduo3\"\n    }))))));\n  }));\n};\nvar ToolBar = function ToolBar(_ref4) {\n  var saveAsDropDownItems = _ref4.saveAsDropDownItems,\n    editable = _ref4.editable,\n    isEditMode = _ref4.isEditMode,\n    canSave = _ref4.canSave,\n    onBarCancelEdit = _ref4.onBarCancelEdit,\n    onBarAddCardClick = _ref4.onBarAddCardClick,\n    onEdit = _ref4.onEdit,\n    onSave = _ref4.onSave,\n    onRefresh = _ref4.onRefresh,\n    onSaveAs = _ref4.onSaveAs,\n    controlKey = _ref4.controlKey,\n    pageId = _ref4.pageId;\n  var _useState5 = (0, _react.useState)(),\n    _useState6 = _slicedToArray(_useState5, 2),\n    visible = _useState6[0],\n    setVisible = _useState6[1];\n  var handleSaveAsMenuClick = (0, _react.useCallback)(function (key) {\n    (0, _GlobalDataCacher.setData)(_symbolConst.KEY_UI_ACTION, {\n      pageId: pageId,\n      key: controlKey,\n      tableName: 'click',\n      type: 'gridcontainer',\n      methodName: 'itemClick',\n      opk: schemeType[key]\n    });\n    onSaveAs && onSaveAs(key);\n    setVisible(false);\n  }, [onSaveAs]);\n  var handleVisibleChange = function handleVisibleChange(flag) {\n    setVisible(flag);\n  };\n  var handleEdit = (0, _react.useCallback)(function () {\n    editable && onEdit && onEdit();\n  }, [onEdit, editable]);\n  var handleRefresh = (0, _react.useCallback)(function () {\n    onRefresh && onRefresh();\n  }, [onRefresh]);\n  var handleAddCard = (0, _react.useCallback)(function () {\n    onBarAddCardClick && onBarAddCardClick();\n  }, [onBarAddCardClick]);\n  var handleCancel = (0, _react.useCallback)(function () {\n    onBarCancelEdit && onBarCancelEdit();\n  }, [onBarCancelEdit]);\n  var handleSave = (0, _react.useCallback)(function () {\n    (0, _GlobalDataCacher.setData)(_symbolConst.KEY_UI_ACTION, {\n      pageId: pageId,\n      key: controlKey,\n      tableName: 'click',\n      type: 'gridcontainer',\n      methodName: 'itemClick',\n      opk: 'save'\n    });\n    onSave && onSave();\n  }, [onSave]);\n  var renderViewToolbar = function renderViewToolbar() {\n    return /*#__PURE__*/_react[\"default\"].createElement(_react[\"default\"].Fragment, null, /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n      className: (0, _classnames[\"default\"])(_HomePageScheme[\"default\"].edit, {\n        'kd-hover-color': editable\n      }, _defineProperty({}, _HomePageScheme[\"default\"]['edit-disabled'], !editable), {\n        'disabled-fc': !editable\n      }),\n      onClick: handleEdit,\n      title: editable ? '' : (0, _intlApi.getLangMsg)('HomePageScheme.key0010')\n    }, /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n      className: _HomePageScheme[\"default\"]['edit-icon']\n    }, /*#__PURE__*/_react[\"default\"].createElement(\"i\", {\n      style: {\n        fontSize: '14px'\n      },\n      className: \"kdfont kdfont-tianxie\"\n    })), /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n      className: _HomePageScheme[\"default\"]['edit-text']\n    }, (0, _intlApi.getLangMsg)('HomePageScheme.key0001'))), /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n      className: (0, _classnames[\"default\"])(_HomePageScheme[\"default\"].refresh, 'kd-hover-color'),\n      onClick: handleRefresh\n    }, /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n      className: _HomePageScheme[\"default\"]['refresh-icon']\n    }, /*#__PURE__*/_react[\"default\"].createElement(\"i\", {\n      style: {\n        fontSize: '14px'\n      },\n      className: \"kdfont kdfont-shuaxin\"\n    })), /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n      className: _HomePageScheme[\"default\"]['refresh-text']\n    }, (0, _intlApi.getLangMsg)('HomePageScheme.key0002'))));\n  };\n  var renderDropDownItem = function renderDropDownItem(items) {\n    return items.map(function (item) {\n      return /*#__PURE__*/_react[\"default\"].createElement(_kdesign.Dropdown.Item, {\n        key: item.type,\n        className: \"kd-cq-dropdown-menu-item\"\n      }, item.name);\n    });\n  };\n  var renderEditToolbar = function renderEditToolbar(items) {\n    var menu = /*#__PURE__*/_react[\"default\"].createElement(_kdesign.Dropdown.Menu, {\n      onClick: handleSaveAsMenuClick\n    }, renderDropDownItem(items));\n    return /*#__PURE__*/_react[\"default\"].createElement(_react[\"default\"].Fragment, null, /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n      className: (0, _classnames[\"default\"])(_HomePageScheme[\"default\"].add, 'kd-cq-home-page-scheme-add-card', 'kd-hover-color'),\n      onClick: handleAddCard\n    }, /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n      className: _HomePageScheme[\"default\"]['add-icon']\n    }, /*#__PURE__*/_react[\"default\"].createElement(\"i\", {\n      className: \"kdfont kdfont-zengjia-yuan\"\n    })), /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n      className: _HomePageScheme[\"default\"]['add-text']\n    }, (0, _intlApi.getLangMsg)('HomePageScheme.key0006'))), /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n      className: (0, _classnames[\"default\"])('kd-cq-control kd-cq-btn hover-theme-border-color1', _HomePageScheme[\"default\"].cancel, _HomePageScheme[\"default\"]['btn-ghost']),\n      onClick: handleCancel\n    }, /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n      className: _HomePageScheme[\"default\"]['cancel-text']\n    }, (0, _intlApi.getLangMsg)('HomePageScheme.key0003'))), items && items.length > 0 && /*#__PURE__*/_react[\"default\"].createElement(_kdesign.Dropdown, {\n      menu: menu,\n      onVisibleChange: handleVisibleChange,\n      visible: visible,\n      trigger: \"click\",\n      popperClassName: (0, _classnames[\"default\"])('kd-cq-dropdown kd-cq-dropdown-select-type', _HomePageScheme[\"default\"]['save-as-dp'])\n    }, /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n      className: (0, _classnames[\"default\"])('kd-cq-control kd-cq-btn hover-theme-border-color1', _HomePageScheme[\"default\"]['save-as-trigger'], _HomePageScheme[\"default\"]['btn-ghost'])\n    }, /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n      className: _HomePageScheme[\"default\"]['save-as-text']\n    }, (0, _intlApi.getLangMsg)('HomePageScheme.key0004')), /*#__PURE__*/_react[\"default\"].createElement(DropDownIcon, {\n      expand: visible\n    }))), canSave && /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n      className: (0, _classnames[\"default\"])('kd-cq-control kd-cq-btn', _HomePageScheme[\"default\"]['save'], 'theme-bg hover-theme-bg1'),\n      onClick: handleSave\n    }, /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n      className: _HomePageScheme[\"default\"]['save-text']\n    }, (0, _intlApi.getLangMsg)('HomePageScheme.key0005'))));\n  };\n  return /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n    className: _HomePageScheme[\"default\"].toolbar\n  }, editable && isEditMode && renderEditToolbar(saveAsDropDownItems));\n};\nvar _default = exports[\"default\"] = HomePageScheme;\n\n//# sourceURL=webpack://bos-platform/./src/component/web/base/HomePageScheme.js?");

/***/ }),

/***/ "./src/component/web/base/HomePageSchemeIcon.js":
/*!******************************************************!*\
  !*** ./src/component/web/base/HomePageSchemeIcon.js ***!
  \******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.from.js */ \"../../node_modules/core-js/modules/es.array.from.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.array.slice.js */ \"../../node_modules/core-js/modules/es.array.slice.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-string.js */ \"../../node_modules/core-js/modules/es.date.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.regexp.exec.js */ \"../../node_modules/core-js/modules/es.regexp.exec.js\");\n__webpack_require__(/*! core-js/modules/es.regexp.to-string.js */ \"../../node_modules/core-js/modules/es.regexp.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = HomePageSchemeIcon;\n__webpack_require__(/*! core-js/modules/es.array.is-array.js */ \"../../node_modules/core-js/modules/es.array.is-array.js\");\n__webpack_require__(/*! core-js/modules/es.array.map.js */ \"../../node_modules/core-js/modules/es.array.map.js\");\n__webpack_require__(/*! core-js/modules/es.function.name.js */ \"../../node_modules/core-js/modules/es.function.name.js\");\n__webpack_require__(/*! core-js/modules/es.parse-float.js */ \"../../node_modules/core-js/modules/es.parse-float.js\");\nvar _react = _interopRequireWildcard(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _immutable = __webpack_require__(/*! immutable */ \"webpack/sharing/consume/default/immutable/immutable?f2ca\");\nvar _classnames = _interopRequireDefault(__webpack_require__(/*! classnames */ \"../../node_modules/classnames/index.js\"));\nvar _global = __webpack_require__(/*! @/global */ \"./src/global/index.js\");\nvar _gridcontaineraction = __webpack_require__(/*! @/action/gridcontaineraction */ \"./src/action/gridcontaineraction.js\");\nvar _kdesign = __webpack_require__(/*! @kdcloudjs/kdesign */ \"webpack/sharing/consume/default/@kdcloudjs/kdesign/@kdcloudjs/kdesign\");\nvar _intlApi = __webpack_require__(/*! @/i18n/intlApi */ \"./src/i18n/intlApi.js\");\nvar _symbolConst = __webpack_require__(/*! @/constant/symbolConst */ \"./src/constant/symbolConst.js\");\nvar _GlobalDataCacher = __webpack_require__(/*! @/model/GlobalDataCacher */ \"./src/model/GlobalDataCacher.js\");\nvar _memoryCacher = __webpack_require__(/*! @/model/memoryCacher */ \"./src/model/memoryCacher.js\");\nvar _appModelFunction = __webpack_require__(/*! @/model/appModelFunction */ \"./src/model/appModelFunction.js\");\nvar _action = __webpack_require__(/*! @/action/action */ \"./src/action/action.js\");\nvar _HomePageScheme = _interopRequireDefault(__webpack_require__(/*! ./HomePageScheme.less */ \"./src/component/web/base/HomePageScheme.less\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nvar HOMEPAGE_SIDEBAR_COLLAPSE = 'homePageSidebarCollapse';\nvar HOMEPAGE_SIDEBAR_WIDTH = '28px';\nfunction HomePageSchemeIcon(_ref) {\n  var _getUserUIState, _schemeGroup$map, _getData2;\n  var _ref$schemeGroup = _ref.schemeGroup,\n    schemeGroup = _ref$schemeGroup === void 0 ? [] : _ref$schemeGroup,\n    isEditMode = _ref.isEditMode,\n    defaultSchemeId = _ref.defaultSchemeId,\n    selectedSchemeId = _ref.selectedSchemeId,\n    pageId = _ref.pageId,\n    modelKey = _ref.modelKey,\n    hideSchemeSwitch = _ref.hideSchemeSwitch,\n    hideSchemeEdit = _ref.hideSchemeEdit;\n  var _useState = (0, _react.useState)(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    visible = _useState2[0],\n    setVisible = _useState2[1]; // 切换方案下拉面板是否可见\n  var _useState3 = (0, _react.useState)(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    hoverSchemeId = _useState4[0],\n    setHoverSchemeId = _useState4[1]; // 鼠标经过切换方案下拉面板中的方案id\n  var _useState5 = (0, _react.useState)((_getUserUIState = (0, _memoryCacher.getUserUIState)()) === null || _getUserUIState === void 0 ? void 0 : _getUserUIState.get(HOMEPAGE_SIDEBAR_COLLAPSE)),\n    _useState6 = _slicedToArray(_useState5, 2),\n    homePageSidebarCollapse = _useState6[0],\n    setHomePageSidebarCollapse = _useState6[1]; // 首页右侧的工具栏是否折叠, 如果折叠就将width设为0,展开就设为27，在视觉上按钮看起来是在工具栏里的。\n  var dispatch = _global.doGlobalDispatch;\n  var _useState7 = (0, _react.useState)(false),\n    _useState8 = _slicedToArray(_useState7, 2),\n    showCollapseIcon = _useState8[0],\n    setShowCollapseIcon = _useState8[1]; // 是否展示展开收起图标 - 当侧导航都不展示的时候, 展开收起功能自己实现\n  var collapseContent = (0, _react.useRef)();\n  (0, _react.useEffect)(function () {\n    var removeHomeSidebarCollapseChangeListener = (0, _GlobalDataCacher.addDataChangeListener)(_symbolConst.KEY_HOME_SIDEBAR_COLLAPSE_CHANGE, sidedarCollapseChange); // 监听首页右侧的工具栏折叠变化\n    return function () {\n      removeHomeSidebarCollapseChangeListener();\n    };\n  }, []);\n  (0, _react.useEffect)(function () {\n    var hideTrayMenu = (0, _GlobalDataCacher.getData)(_symbolConst.KEY_HIDE_TRAY_MENU);\n    if (hideTrayMenu) {\n      handleSetShowCollapseIcon();\n    }\n    var removeHideTrayMenuChangeListener = (0, _GlobalDataCacher.addDataChangeListener)(_symbolConst.KEY_HIDE_TRAY_MENU, handleSetShowCollapseIcon); // 监听首页右侧的工具栏折叠变化\n    return function () {\n      removeHideTrayMenuChangeListener();\n    };\n  }, []);\n  (0, _react.useEffect)(function () {\n    var _collapseContent$curr;\n    if (!showCollapseIcon) return;\n    var gridContainer = (_collapseContent$curr = collapseContent.current) === null || _collapseContent$curr === void 0 ? void 0 : _collapseContent$curr.parentNode;\n    if (!gridContainer) return;\n    // 如果是通过把这个编辑区域变成通栏，自己实现展开、收起，栅格容器需要留出栅格容器的位置，这个编辑区域是fixed定位实现的\n    if (!homePageSidebarCollapse) {\n      gridContainer.style.marginRight = parseFloat(HOMEPAGE_SIDEBAR_WIDTH) + 'px';\n    } else {\n      gridContainer.style.marginRight = '0px';\n    }\n  }, [showCollapseIcon, homePageSidebarCollapse]);\n  var handleSetShowCollapseIcon = function handleSetShowCollapseIcon() {\n    setShowCollapseIcon(true);\n  };\n\n  // 首页右侧工具栏折叠变化\n  var sidedarCollapseChange = function sidedarCollapseChange(isCollapse) {\n    setHomePageSidebarCollapse(isCollapse);\n  };\n\n  // 切换首页方案点击下拉面板子项\n  var schemeSelect = function schemeSelect(id) {\n    (0, _GlobalDataCacher.setData)(_symbolConst.KEY_UI_ACTION, {\n      pageId: pageId,\n      key: modelKey,\n      tableName: 'click',\n      type: 'gridcontainer',\n      methodName: 'itemClick',\n      opk: 'switchscheme'\n    });\n    dispatch((0, _gridcontaineraction.switchScheme)({\n      pageId: pageId,\n      key: modelKey\n    }, id));\n  };\n\n  // 设置为默认方案\n  var setAsDefault = function setAsDefault(id) {\n    dispatch((0, _gridcontaineraction.setDefault)({\n      pageId: pageId,\n      key: modelKey\n    }, id));\n  };\n\n  // 删除方案\n  var deleteHomePageScheme = function deleteHomePageScheme(id) {\n    dispatch((0, _gridcontaineraction.deleteScheme)({\n      pageId: pageId,\n      key: modelKey\n    }, id));\n  };\n\n  // 取消编辑\n  var cancelEdit = function cancelEdit() {\n    dispatch((0, _gridcontaineraction.editCancel)({\n      pageId: pageId,\n      key: modelKey\n    }, []));\n  };\n\n  // 编辑\n  var hanldeEdit = function hanldeEdit() {\n    // 正在编辑，再次点击编辑，取消编辑\n    if (isEditMode) {\n      return cancelEdit();\n    }\n    (0, _GlobalDataCacher.setData)(_symbolConst.KEY_UI_ACTION, {\n      pageId: pageId,\n      key: modelKey,\n      tableName: 'click',\n      type: 'gridcontainer',\n      methodName: 'itemClick',\n      opk: 'ajustlayout'\n    });\n    dispatch((0, _gridcontaineraction.edit)({\n      pageId: pageId,\n      key: modelKey\n    }));\n  };\n\n  // 刷新\n  var hanldeRefresh = function hanldeRefresh() {\n    !isEditMode && dispatch((0, _gridcontaineraction.refresh)({\n      pageId: pageId,\n      key: modelKey\n    }));\n  };\n  var handleVisibleChange = function handleVisibleChange(flag) {\n    !isEditMode && setVisible(flag);\n  };\n\n  // 切换首页方案时点击下拉面板子项\n  var handleSchemeItemClick = function handleSchemeItemClick(key) {\n    return function () {\n      schemeSelect(key);\n      setVisible(false);\n    };\n  };\n\n  // 切换首页方案进入下拉面板子项显示三个小点\n  var handleSchemeItemEnter = function handleSchemeItemEnter(key) {\n    return function () {\n      setHoverSchemeId(key);\n    };\n  };\n  var handleChangeCollapse = function handleChangeCollapse(collapse) {\n    var _getData;\n    setHomePageSidebarCollapse(collapse);\n    var rootPageId = (0, _appModelFunction.getRootPageId)()((0, _global.getGlobalState)());\n    (0, _memoryCacher.setUserUIState)(rootPageId, [HOMEPAGE_SIDEBAR_COLLAPSE], collapse, true);\n    dispatch(handleSaveSetting());\n\n    // 收起右侧边栏的时候。如果智能洞察面板处于固定状态，那么需要通知面板往右偏移\n    if ((_getData = (0, _GlobalDataCacher.getData)(_symbolConst.KEY_FIX_INSIGHT_PANEL)) !== null && _getData !== void 0 && _getData.isFixationMode) {\n      (0, _GlobalDataCacher.setData)(_symbolConst.KEY_CHANGE_PANEL_POSITION, {\n        right: collapse ? 0 : HOMEPAGE_SIDEBAR_WIDTH\n      });\n    }\n\n    // 通知分屏开启或者关闭\n    (0, _GlobalDataCacher.setData)(_symbolConst.KEY_HOME_SIDEBAR_COLLAPSE_CHANGE, collapse);\n  };\n  var handleSaveSetting = function handleSaveSetting() {\n    return function (dispatch, getState) {\n      var rootPageId = (0, _appModelFunction.getRootPageId)()(getState());\n      var userUIState = (0, _memoryCacher.getDiffUserUIState)();\n      if (userUIState) {\n        (0, _action.invokeControlService)({\n          pageId: rootPageId\n        }, 'saveSetting', [userUIState], (0, _immutable.List)(), dispatch);\n      }\n    };\n  };\n  var menu = /*#__PURE__*/_react[\"default\"].createElement(_kdesign.Dropdown.Menu, {\n    className: (0, _classnames[\"default\"])('kd-cq-dropdown kd-cq-dropdown-select-type', _HomePageScheme[\"default\"]['scheme-dp-menu'])\n  }, schemeGroup === null || schemeGroup === void 0 || (_schemeGroup$map = schemeGroup.map) === null || _schemeGroup$map === void 0 ? void 0 : _schemeGroup$map.call(schemeGroup, function (item) {\n    return /*#__PURE__*/_react[\"default\"].createElement(SchemeDropDownGroup, {\n      type: item.name,\n      items: item.items,\n      key: item.type,\n      defaultSchemeId: defaultSchemeId,\n      selectedSchemeId: selectedSchemeId,\n      hoverSchemeId: hoverSchemeId,\n      setAsDefault: setAsDefault,\n      deleteHomePageScheme: deleteHomePageScheme,\n      handleSchemeItemClick: handleSchemeItemClick,\n      handleSchemeItemEnter: handleSchemeItemEnter\n    });\n  }));\n  var isFixationMode = (_getData2 = (0, _GlobalDataCacher.getData)(_symbolConst.KEY_FIX_INSIGHT_PANEL)) === null || _getData2 === void 0 ? void 0 : _getData2.isFixationMode;\n  return /*#__PURE__*/_react[\"default\"].createElement(_react[\"default\"].Fragment, null, showCollapseIcon && /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: _HomePageScheme[\"default\"].arrowContent,\n    style: {\n      width: homePageSidebarCollapse ? 16 : 0,\n      zIndex: isFixationMode ? 1050 : 1000\n    },\n    ref: collapseContent,\n    onClick: function onClick() {\n      return handleChangeCollapse(false);\n    }\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"i\", {\n    className: (0, _classnames[\"default\"])('kdfont kdfont-xiayiyue', _HomePageScheme[\"default\"]['arrowContent-arrow-left'])\n  })), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: (0, _classnames[\"default\"])(_HomePageScheme[\"default\"].homePageSchemeIcon, _HomePageScheme[\"default\"][\"homePageSchemeIcon-show-\".concat(!homePageSidebarCollapse)], _defineProperty({}, _HomePageScheme[\"default\"]['with-collapse-icon'], showCollapseIcon))\n  }, hideSchemeEdit !== true && /*#__PURE__*/_react[\"default\"].createElement(\"i\", {\n    className: (0, _classnames[\"default\"])(_defineProperty({}, _HomePageScheme[\"default\"]['active-click'], isEditMode), _HomePageScheme[\"default\"].icon, 'kdfont kdfont-bianji11'),\n    title: (0, _intlApi.getLangMsg)('HomePageScheme.key0011'),\n    onClick: hanldeEdit\n  }), schemeGroup.length > 0 && hideSchemeSwitch !== true && /*#__PURE__*/_react[\"default\"].createElement(_kdesign.Dropdown, {\n    menu: menu,\n    onVisibleChange: handleVisibleChange,\n    placement: \"leftTop\",\n    visible: visible,\n    trigger: \"click\",\n    popperClassName: _HomePageScheme[\"default\"]['scheme-dp'],\n    key: \"scheme\",\n    gap: 10\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"i\", {\n    className: (0, _classnames[\"default\"])(_defineProperty(_defineProperty({}, _HomePageScheme[\"default\"]['disabled-btn'], isEditMode), _HomePageScheme[\"default\"]['active-click'], visible), 'kdfont kdfont-qiehuan5', _HomePageScheme[\"default\"].icon),\n    title: (0, _intlApi.getLangMsg)('HomePageScheme.key0012')\n  })), schemeGroup.length > 0 && /*#__PURE__*/_react[\"default\"].createElement(\"i\", {\n    className: (0, _classnames[\"default\"])(_defineProperty({}, _HomePageScheme[\"default\"]['disabled-btn'], isEditMode), 'kdfont kdfont-shuaxin4', _HomePageScheme[\"default\"].icon),\n    title: (0, _intlApi.getLangMsg)('HomePageScheme.key0013'),\n    onClick: hanldeRefresh\n  }), showCollapseIcon && /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: (0, _classnames[\"default\"])(_HomePageScheme[\"default\"]['homePageScheme-arrow']),\n    onClick: function onClick() {\n      return handleChangeCollapse(true);\n    }\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"i\", {\n    className: (0, _classnames[\"default\"])('kdfont kdfont-xiayiyue', _HomePageScheme[\"default\"]['homePageScheme-arrow-right'])\n  }))));\n}\nvar SchemeDropDownGroup = function SchemeDropDownGroup(_ref2) {\n  var type = _ref2.type,\n    items = _ref2.items,\n    defaultSchemeId = _ref2.defaultSchemeId,\n    setAsDefault = _ref2.setAsDefault,\n    deleteHomePageScheme = _ref2.deleteHomePageScheme,\n    selectedSchemeId = _ref2.selectedSchemeId,\n    hoverSchemeId = _ref2.hoverSchemeId,\n    handleSchemeItemClick = _ref2.handleSchemeItemClick,\n    handleSchemeItemEnter = _ref2.handleSchemeItemEnter;\n  var handleOperationMenu = function handleOperationMenu(key, id) {\n    if (key === 'setAsDefault') {\n      setAsDefault(id);\n    } else if (key === 'delete') {\n      deleteHomePageScheme(id);\n    }\n  };\n  // 阻止点击事件冒泡\n  var hanldePreventClick = function hanldePreventClick(e) {\n    e.stopPropagation();\n  };\n  return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: _HomePageScheme[\"default\"]['scheme-group']\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: (0, _classnames[\"default\"])('kd-cq-dropdown-menu-item-title', _HomePageScheme[\"default\"]['scheme-group-title'])\n  }, type), items === null || items === void 0 ? void 0 : items.map(function (item) {\n    var canSetAsDefault = item.canSetAsDefault,\n      canDelete = item.canDelete,\n      id = item.id,\n      name = item.name;\n    var isDefault = id === defaultSchemeId;\n    var showMoreBtn = canDelete || canSetAsDefault;\n    var menuItems = function menuItems() {\n      var nodes = [];\n      canSetAsDefault && nodes.push( /*#__PURE__*/_react[\"default\"].createElement(_kdesign.Dropdown.Item, {\n        key: \"setAsDefault\",\n        className: \"kd-cq-dropdown-menu-item\"\n      }, (0, _intlApi.getLangMsg)('HomePageScheme.key0007')));\n      canDelete && nodes.push( /*#__PURE__*/_react[\"default\"].createElement(_kdesign.Dropdown.Item, {\n        key: \"delete\",\n        className: \"kd-cq-dropdown-menu-item\"\n      }, (0, _intlApi.getLangMsg)('HomePageScheme.key0008')));\n      return nodes;\n    };\n    var menu = /*#__PURE__*/_react[\"default\"].createElement(_kdesign.Dropdown.Menu, {\n      onClick: function onClick(key) {\n        return handleOperationMenu(key, id);\n      }\n    }, menuItems());\n    return /*#__PURE__*/_react[\"default\"].createElement(_kdesign.Dropdown.Item, {\n      className: (0, _classnames[\"default\"])('kd-cq-dropdown-menu-item', _HomePageScheme[\"default\"]['scheme-group-item'], _defineProperty({}, \"\".concat(_HomePageScheme[\"default\"]['scheme-item-selected'], \" kd-cq-dropdown-menu-item-active\"), selectedSchemeId === id)),\n      title: \"\",\n      \"data-key\": id,\n      key: id\n    }, /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n      className: _HomePageScheme[\"default\"]['scheme-group-submenu'],\n      onClick: handleSchemeItemClick(id),\n      onMouseEnter: handleSchemeItemEnter(id)\n    }, /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n      className: (0, _classnames[\"default\"])(_HomePageScheme[\"default\"]['scheme-item-name-wrapper'])\n    }, /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n      className: (0, _classnames[\"default\"])(_HomePageScheme[\"default\"]['scheme-item-name']),\n      title: name\n    }, name)), isDefault && /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n      className: _HomePageScheme[\"default\"]['scheme-item-default']\n    }, (0, _intlApi.getLangMsg)('HomePageScheme.key0009')), showMoreBtn && !isDefault && hoverSchemeId === id && /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      onClick: hanldePreventClick\n    }, /*#__PURE__*/_react[\"default\"].createElement(_kdesign.Dropdown, {\n      menu: menu,\n      trigger: \"hover\",\n      placement: \"bottomRight\",\n      mouseEnterDelay: 0.3,\n      popperClassName: (0, _classnames[\"default\"])('kd-cq-dropdown kd-cq-dropdown-select-type kd-cq-homepagescheme-dropdown', _HomePageScheme[\"default\"].operation)\n    }, /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n      className: _HomePageScheme[\"default\"]['btn-more']\n    }, /*#__PURE__*/_react[\"default\"].createElement(\"i\", {\n      className: \"kdfont kdfont-gengduo3\"\n    }))))));\n  }));\n};\n\n//# sourceURL=webpack://bos-platform/./src/component/web/base/HomePageSchemeIcon.js?");

/***/ }),

/***/ "./src/component/web/base/HomePageTab/HomePageConst.js":
/*!*************************************************************!*\
  !*** ./src/component/web/base/HomePageTab/HomePageConst.js ***!
  \*************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.contextMenuList = exports.appItemsContextMenuList = exports.UN_FIXED_APP = exports.FIXED_APP = exports.CLOSE_RIGHT_TAB = exports.CLOSE_OTHER_TAB = exports.CLOSE_LEFT_TAB = exports.CLOSE_CURRENT_TAB = exports.CLOSE_APP = exports.CLOSE_ALL_TAB = exports.AGAIN_OPEN_TAB = void 0;\nvar _intlApi = __webpack_require__(/*! @/i18n/intlApi */ \"./src/i18n/intlApi.js\");\nvar CLOSE_CURRENT_TAB = exports.CLOSE_CURRENT_TAB = 'closeCurrentTab'; // 关闭当前页签\nvar CLOSE_LEFT_TAB = exports.CLOSE_LEFT_TAB = 'closeLeftTab'; // 关闭左侧页签\nvar CLOSE_RIGHT_TAB = exports.CLOSE_RIGHT_TAB = 'closeRightTab'; // 关闭右侧页签\nvar CLOSE_OTHER_TAB = exports.CLOSE_OTHER_TAB = 'closeOtherTab'; // 关闭其他页签\nvar CLOSE_ALL_TAB = exports.CLOSE_ALL_TAB = 'closeAllTab'; // 关闭全部的页签\nvar AGAIN_OPEN_TAB = exports.AGAIN_OPEN_TAB = 'againOpenTab'; // 重复打开页签\n\nvar contextMenuList = exports.contextMenuList = [{\n  key: CLOSE_CURRENT_TAB,\n  name: (0, _intlApi.getLangMsg)('NewNav.key003')\n},\n// 关闭\n{\n  key: CLOSE_OTHER_TAB,\n  name: (0, _intlApi.getLangMsg)('NewNav.key006')\n},\n// 关闭其他\n{\n  key: CLOSE_LEFT_TAB,\n  name: (0, _intlApi.getLangMsg)('NewNav.key008')\n},\n// 关闭左侧\n{\n  key: CLOSE_RIGHT_TAB,\n  name: (0, _intlApi.getLangMsg)('NewNav.key009')\n},\n// 关闭右侧\n{\n  key: CLOSE_ALL_TAB,\n  name: (0, _intlApi.getLangMsg)('NewNav.key004')\n},\n// 关闭全部\n{\n  key: AGAIN_OPEN_TAB,\n  name: (0, _intlApi.getLangMsg)('NewNav.key007')\n} // 重复打开\n// { key: 2, name: getLangMsg('NewNav.key002') }\n];\nvar FIXED_APP = exports.FIXED_APP = 'fixedApp'; // 固定应用\nvar UN_FIXED_APP = exports.UN_FIXED_APP = 'unFixedApp'; // 取消固定应用\nvar CLOSE_APP = exports.CLOSE_APP = 'closeApp'; // 关闭应用\n\nvar appItemsContextMenuList = exports.appItemsContextMenuList = [{\n  key: FIXED_APP,\n  name: (0, _intlApi.getLangMsg)('NewNav.key010')\n},\n// 固定应用\n{\n  key: UN_FIXED_APP,\n  name: (0, _intlApi.getLangMsg)('NewNav.key011')\n},\n// 取消固定应用\n{\n  key: CLOSE_APP,\n  name: (0, _intlApi.getLangMsg)('NewNav.key012')\n} // 关闭应用\n];\n\n//# sourceURL=webpack://bos-platform/./src/component/web/base/HomePageTab/HomePageConst.js?");

/***/ }),

/***/ "./src/component/web/base/HomePageTab/HomePageVirtualTab.js":
/*!******************************************************************!*\
  !*** ./src/component/web/base/HomePageTab/HomePageVirtualTab.js ***!
  \******************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.for-each.js */ \"../../node_modules/core-js/modules/es.array.for-each.js\");\n__webpack_require__(/*! core-js/modules/es.array.from.js */ \"../../node_modules/core-js/modules/es.array.from.js\");\n__webpack_require__(/*! core-js/modules/es.array.index-of.js */ \"../../node_modules/core-js/modules/es.array.index-of.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.array.slice.js */ \"../../node_modules/core-js/modules/es.array.slice.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-string.js */ \"../../node_modules/core-js/modules/es.date.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.assign.js */ \"../../node_modules/core-js/modules/es.object.assign.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-properties.js */ \"../../node_modules/core-js/modules/es.object.define-properties.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptors.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptors.js\");\n__webpack_require__(/*! core-js/modules/es.object.keys.js */ \"../../node_modules/core-js/modules/es.object.keys.js\");\n__webpack_require__(/*! core-js/modules/es.regexp.exec.js */ \"../../node_modules/core-js/modules/es.regexp.exec.js\");\n__webpack_require__(/*! core-js/modules/es.regexp.to-string.js */ \"../../node_modules/core-js/modules/es.regexp.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ \"../../node_modules/core-js/modules/web.dom-collections.for-each.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.HomePageVirtualTab = HomePageVirtualTab;\n__webpack_require__(/*! core-js/modules/es.array.filter.js */ \"../../node_modules/core-js/modules/es.array.filter.js\");\n__webpack_require__(/*! core-js/modules/es.array.find.js */ \"../../node_modules/core-js/modules/es.array.find.js\");\n__webpack_require__(/*! core-js/modules/es.array.find-index.js */ \"../../node_modules/core-js/modules/es.array.find-index.js\");\n__webpack_require__(/*! core-js/modules/es.array.is-array.js */ \"../../node_modules/core-js/modules/es.array.is-array.js\");\n__webpack_require__(/*! core-js/modules/es.array.map.js */ \"../../node_modules/core-js/modules/es.array.map.js\");\n__webpack_require__(/*! core-js/modules/es.function.name.js */ \"../../node_modules/core-js/modules/es.function.name.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/web.timers.js */ \"../../node_modules/core-js/modules/web.timers.js\");\nvar _react = _interopRequireWildcard(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _HomePageVirtualTab = _interopRequireDefault(__webpack_require__(/*! ./HomePageVirtualTab.less */ \"./src/component/web/base/HomePageTab/HomePageVirtualTab.less\"));\nvar _classnames7 = _interopRequireDefault(__webpack_require__(/*! classnames */ \"../../node_modules/classnames/index.js\"));\nvar _kdesign = __webpack_require__(/*! @kdcloudjs/kdesign */ \"webpack/sharing/consume/default/@kdcloudjs/kdesign/@kdcloudjs/kdesign\");\nvar _intlApi = __webpack_require__(/*! @/i18n/intlApi */ \"./src/i18n/intlApi.js\");\nvar _symbolConst = __webpack_require__(/*! @/constant/symbolConst */ \"./src/constant/symbolConst.js\");\nvar _GlobalDataCacher = __webpack_require__(/*! @/model/GlobalDataCacher */ \"./src/model/GlobalDataCacher.js\");\nvar _HomePageVirtualTabUtil = __webpack_require__(/*! @/util/HomePageVirtualTabUtil */ \"./src/util/HomePageVirtualTabUtil.js\");\nvar _VirtualTabs = __webpack_require__(/*! ./VirtualTabs */ \"./src/component/web/base/HomePageTab/VirtualTabs.js\");\nvar _StaticTab = __webpack_require__(/*! ./StaticTab */ \"./src/component/web/base/HomePageTab/StaticTab.js\");\nvar _HomePageConst = __webpack_require__(/*! ./HomePageConst.js */ \"./src/component/web/base/HomePageTab/HomePageConst.js\");\nvar _excluded = [\"virtualTabs\", \"staticItems\", \"appItems\", \"activeApp\", \"selectTab\", \"closeVirtualTab\", \"selectVirtualTab\", \"selectTabWorkBench\", \"addToCollection\", \"openInNewWindow\", \"openInSystemTab\", \"pageId\", \"changeAppItems\", \"changeVirtualTabData\", \"control\"];\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nfunction HomePageVirtualTab(_ref) {\n  var _ref$virtualTabs = _ref.virtualTabs,\n    virtualTabs = _ref$virtualTabs === void 0 ? [] : _ref$virtualTabs,\n    staticItems = _ref.staticItems,\n    appItems = _ref.appItems,\n    activeApp = _ref.activeApp,\n    selectTab = _ref.selectTab,\n    closeVirtualTab = _ref.closeVirtualTab,\n    selectVirtualTab = _ref.selectVirtualTab,\n    selectTabWorkBench = _ref.selectTabWorkBench,\n    addToCollection = _ref.addToCollection,\n    openInNewWindow = _ref.openInNewWindow,\n    openInSystemTab = _ref.openInSystemTab,\n    pageId = _ref.pageId,\n    changeAppItems = _ref.changeAppItems,\n    changeVirtualTabData = _ref.changeVirtualTabData,\n    control = _ref.control,\n    others = _objectWithoutProperties(_ref, _excluded);\n  var _useState = (0, _react.useState)(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    moreMenuShowType = _useState2[0],\n    setMoreMenuShowType = _useState2[1]; // 1: 顶部菜单,默认开启用于计算下拉面板宽度\n  var _useState3 = (0, _react.useState)('hover'),\n    _useState4 = _slicedToArray(_useState3, 2),\n    moreMenuTrigger = _useState4[0],\n    setMoreMenuTrigger = _useState4[1];\n  var _useState5 = (0, _react.useState)({\n      key: '',\n      show: false\n    }),\n    _useState6 = _slicedToArray(_useState5, 2),\n    moreMenuContext = _useState6[0],\n    setMoreMenuContext = _useState6[1]; // 右键更多菜单\n  var _useState7 = (0, _react.useState)('none'),\n    _useState8 = _slicedToArray(_useState7, 2),\n    moveDir = _useState8[0],\n    setMoveDir = _useState8[1];\n  var _useState9 = (0, _react.useState)(false),\n    _useState10 = _slicedToArray(_useState9, 2),\n    animating = _useState10[0],\n    setAnimating = _useState10[1];\n  var _useState11 = (0, _react.useState)({}),\n    _useState12 = _slicedToArray(_useState11, 2),\n    appTabDropDownWidth = _useState12[0],\n    setAppTabDropDownWidth = _useState12[1];\n  var _useState13 = (0, _react.useState)({\n      dropEndData: [],\n      // 拖拽结束时所在数组\n      dropEndItem: {},\n      // 拖拽结束时的元素\n      changeOperation: ''\n    }),\n    _useState14 = _slicedToArray(_useState13, 2),\n    dragOverAppTabItem = _useState14[0],\n    setDragOverAppTabItem = _useState14[1];\n  var appShowFlag = (0, _react.useRef)(true); // 顶部应用下拉是否展示,用于控制鼠标移入顶部标题时不显示下拉面板\n  var visibleWrapRef = (0, _react.useRef)();\n  var dropStartItems = (0, _react.useRef)(); // 开始拖拽时的数据\n  var appTabOperating = (0, _react.useRef)(false); // 记录拖拽状态，是否正在拖拽\n  var enterAppTabsTime = (0, _react.useRef)(null); // 鼠标移入时，清除关闭下拉面板事件，并开始计时100ms后打开下拉面板\n  var leaveAppTabsTime = (0, _react.useRef)(null); // 鼠标移出时，清除开启下拉面板事件，并开始计时150ms后关闭下拉面板\n  var appTabItemsRef = (0, _react.useRef)(null);\n  var appTabRef = (0, _react.useRef)(null);\n  var notFixedAppItems = (0, _react.useMemo)(function () {\n    return (0, _HomePageVirtualTabUtil.filterFixed)(appItems, 0);\n  }, [appItems]);\n  var fixedAppItems = (0, _react.useMemo)(function () {\n    return (0, _HomePageVirtualTabUtil.filterFixed)(appItems, 1);\n  }, [appItems]);\n\n  // 关闭下拉面板\n  var closeAppTab = (0, _react.useCallback)(function () {\n    setMoreMenuShowType(null);\n    // 重置触发方式\n    if (moreMenuTrigger !== 'hover') {\n      setMoreMenuTrigger('hover');\n    }\n  }, [moreMenuTrigger]);\n\n  // 点击下拉面板中的应用\n  var handleAppTabItemClick = function handleAppTabItemClick(item) {\n    return function () {\n      selectTab(item);\n      closeAppTab();\n      setAnimating(true);\n      var nextIndex = appItems.findIndex(function (appItem) {\n        return appItem.appId === item.appId;\n      });\n      var activeIndex = appItems.findIndex(function (appItem) {\n        return appItem.appId === activeApp.appId;\n      });\n      activeIndex - nextIndex < 0 ? setMoveDir('moveBottom') : setMoveDir('moveUp');\n    };\n  };\n\n  // 关闭app应用\n  var handleCloseApp = function handleCloseApp(item) {\n    return function (e) {\n      e === null || e === void 0 || e.stopPropagation();\n      (0, _GlobalDataCacher.setData)(_symbolConst.KEY_CLOSE_TAB, item);\n    };\n  };\n\n  // 开启下拉面板\n  var openAppTab = function openAppTab() {\n    appShowFlag.current && setMoreMenuShowType(1);\n  };\n  var handlePopUpVisibleChange = function handlePopUpVisibleChange(type) {\n    return function (visible) {\n      // 用户正在操作时保持现状\n      if (appTabOperating.current) return;\n      switch (type) {\n        case 1:\n          // 顶部应用菜单下拉click和hover事件\n          if (enterAppTabsTime.current || leaveAppTabsTime.current) return;\n          if (!visible && moreMenuContext.show) {\n            // 右键菜单未关闭时先关闭右键菜单\n            setMoreMenuContext({\n              key: '',\n              show: false\n            });\n            closeAppTab();\n          } else if (!visible && moreMenuShowType === 1) {\n            closeAppTab();\n          } else if (visible && moreMenuShowType !== 1) {\n            openAppTab();\n          }\n          break;\n        case 2:\n          // 右键固定和关闭菜单\n          if (!visible && moreMenuContext.show) {\n            setMoreMenuContext({\n              key: '',\n              show: false\n            });\n          } else if (visible && !moreMenuContext.show) {\n            setMoreMenuContext(function (preParams) {\n              return _objectSpread(_objectSpread({}, preParams), {}, {\n                show: true\n              });\n            });\n          }\n          break;\n        case 3:\n          // 延迟触发和关闭应用下拉菜单\n          if (!visible && moreMenuContext.show) {\n            // 右键菜单未关闭时先关闭右键菜单\n            setMoreMenuContext({\n              key: '',\n              show: false\n            });\n          } else if (enterAppTabsTime.current || leaveAppTabsTime.current) {\n            // 延迟触发和关闭\n            return false;\n          } else if (!visible && moreMenuShowType === 1) {\n            closeAppTab();\n          } else if (visible && moreMenuShowType !== 1) {\n            openAppTab();\n          }\n      }\n    };\n  };\n\n  // 锁定或解锁应用 fixed:true锁定，false解锁\n  var handleLock = function handleLock(item) {\n    var fixed = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    setMoreMenuContext({\n      key: '',\n      show: false\n    }); // 关闭右键弹窗\n    if (Array.isArray(item) && item.length) {\n      var pageIds = item.map(function (item) {\n        return item.pageId;\n      });\n      // pageIds 为向后端发送全量的锁定解锁，由于拖拽是有循序的需要发全量\n      item[0].clickFix([{\n        fixed: fixed,\n        pageIds: pageIds\n      }]);\n    } else {\n      // pageId 向后端发送单个应用的锁定和解锁\n      item && item.clickFix && item.clickFix([{\n        fixed: fixed,\n        pageId: item.pageId\n      }]);\n    }\n  };\n\n  // 设置页签\n  var setHomePageTabData = function setHomePageTabData(startItem, endData, endItem, changeOperation) {\n    var type = changeOperation !== 'insert';\n    // 从固定区拖拽到未固定区\n    if (type && startItem.isFixed && endData === notFixedAppItems || !type && startItem.isFixed && !endItem.isFixed) {\n      startItem.isFixed = 0;\n      changeAppItems(fixedAppItems, notFixedAppItems);\n      handleLock(startItem, false);\n    } else if (type && !startItem.isFixed && endData === fixedAppItems || !type && !startItem.isFixed && endItem.isFixed) {\n      // 从未固定区拖拽到固定区\n      startItem.isFixed = 1;\n      handleLock(fixedAppItems);\n    } else {\n      // 相同区域交换顺序\n      if (startItem.isFixed) {\n        handleLock(fixedAppItems);\n      } else {\n        changeAppItems(fixedAppItems, notFixedAppItems);\n      }\n    }\n  };\n\n  // 拖拽交换数据\n  var dropChangeData = function dropChangeData(startItem, endData, endItem, changeOperation) {\n    if ((startItem === null || startItem === void 0 ? void 0 : startItem.key) === (endItem === null || endItem === void 0 ? void 0 : endItem.key)) return;\n    // 删除数据\n    (0, _HomePageVirtualTabUtil.deleteData)(startItem.isFixed ? fixedAppItems : notFixedAppItems, startItem.key);\n    // 插入数据\n    if (changeOperation === 'push') {\n      endData.push(startItem);\n    } else if (changeOperation === 'unshift') {\n      endData.unshift(startItem);\n    } else {\n      (0, _HomePageVirtualTabUtil.insertData)(endItem.isFixed ? fixedAppItems : notFixedAppItems, startItem, endItem.key);\n    }\n  };\n\n  // 拖拽事件\n  var handleDragStart = function handleDragStart(item) {\n    return function (e) {\n      e.stopPropagation();\n      // 设置拖动效果为move\n      e.dataTransfer.effectAllowed = 'move';\n      e.target.style.opacity = 0.5;\n      dropStartItems.current = item;\n      appTabOperating.current = true;\n    };\n  };\n  var handleDragOver = function handleDragOver(_ref2) {\n    var _ref2$dragOverData = _ref2.dragOverData,\n      dragOverData = _ref2$dragOverData === void 0 ? [] : _ref2$dragOverData,\n      _ref2$dragOverItem = _ref2.dragOverItem,\n      dragOverItem = _ref2$dragOverItem === void 0 ? {} : _ref2$dragOverItem,\n      changeOperation = _ref2.changeOperation;\n    return function (e) {\n      e.preventDefault();\n      // 设置允许放置的拖动为move\n      e.dataTransfer.dropEffect = 'move';\n      setDragOverAppTabItem({\n        dropEndData: dragOverData,\n        dropEndItem: dragOverItem,\n        changeOperation: changeOperation\n      });\n    };\n  };\n  var handleDragEnd = function handleDragEnd(e) {\n    e.target.style.opacity = '';\n    appTabOperating.current = false;\n    var dropEndData = dragOverAppTabItem.dropEndData,\n      dropEndItem = dragOverAppTabItem.dropEndItem,\n      changeOperation = dragOverAppTabItem.changeOperation;\n    setDragOverAppTabItem({\n      dropEndData: [],\n      dropEndItem: {},\n      changeOperation: ''\n    });\n    if (!changeOperation) return;\n    // 改变数据\n    dropChangeData(dropStartItems.current, dropEndData, dropEndItem, changeOperation);\n    // 设置页签\n    setHomePageTabData(dropStartItems.current, dropEndData, dropEndItem, changeOperation);\n  };\n\n  // 右键菜单点击事件\n  var handleContextItemClick = function handleContextItemClick(appItem, item) {\n    return function () {\n      switch (appItem.key) {\n        case _HomePageConst.FIXED_APP:\n          // 固定应用\n          handleLock(item);\n          // 重置触发方式\n          if (moreMenuTrigger !== 'hover') {\n            setMoreMenuTrigger('hover');\n          }\n          break;\n        case _HomePageConst.UN_FIXED_APP:\n          // 取消固定\n          handleLock(item, false);\n          // 重置触发方式\n          if (moreMenuTrigger !== 'hover') {\n            setMoreMenuTrigger('hover');\n          }\n          break;\n        case _HomePageConst.CLOSE_APP:\n          // 关闭应用\n          handleCloseApp(item)();\n          item.isFixed && handleLock(item, false);\n      }\n    };\n  };\n\n  // 应用右键菜单\n  var appItemsContextMenu = function appItemsContextMenu(item) {\n    var appItemsContextMenu = _HomePageConst.appItemsContextMenuList.filter(function (menu) {\n      if (item.isFixed === 1 && menu.key === _HomePageConst.FIXED_APP) {\n        return false;\n      }\n      if (item.isFixed !== 1 && menu.key === _HomePageConst.UN_FIXED_APP) {\n        return false;\n      }\n      return true;\n    });\n    return /*#__PURE__*/_react[\"default\"].createElement(_kdesign.Dropdown.Menu, null, /*#__PURE__*/_react[\"default\"].createElement(_react[\"default\"].Fragment, null, appItemsContextMenu.map(function (appItem) {\n      return /*#__PURE__*/_react[\"default\"].createElement(_kdesign.Dropdown.Item, {\n        key: appItem.key,\n        onClick: handleContextItemClick(appItem, item),\n        className: (0, _classnames7[\"default\"])(_HomePageVirtualTab[\"default\"]['context-menu-item'], 'kd-cq-context-menu-item')\n      }, appItem.name);\n    })));\n  };\n  // 监听右键\n  var handleContextMenu = function handleContextMenu(key) {\n    return function (e) {\n      e.preventDefault();\n      setMoreMenuContext(function (preParams) {\n        return _objectSpread(_objectSpread({}, preParams), {}, {\n          key: key\n        });\n      });\n      if (moreMenuTrigger !== 'click') {\n        setMoreMenuTrigger('click');\n      }\n    };\n  };\n  // 无应用空白区域\n  var emptyTipArea = function emptyTipArea(menuItemsList, emptyTip) {\n    if (!menuItemsList.length) {\n      var appTabsEmptyTip = (0, _classnames7[\"default\"])(_HomePageVirtualTab[\"default\"]['app-tabs-empty-tip'], _defineProperty(_defineProperty({}, _HomePageVirtualTab[\"default\"]['app-tabs-empty-tip-animation'], appTabOperating.current), _HomePageVirtualTab[\"default\"]['app-tabs-empty-tip-closeAnimation'], !appTabOperating.current));\n      var appTabsEmptyContent = (0, _classnames7[\"default\"])(_HomePageVirtualTab[\"default\"]['app-tabs-empty-content'], _defineProperty({}, _HomePageVirtualTab[\"default\"]['app-move-empty-tip'], dragOverAppTabItem.dropEndData === menuItemsList));\n      return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        className: appTabsEmptyTip\n      }, !fixedAppItems.length ? /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        className: _HomePageVirtualTab[\"default\"]['app-tabs-hr-fixed']\n      }) : null, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        className: appTabsEmptyContent,\n        onDragEnter: handleDragOver({\n          dragOverData: menuItemsList,\n          changeOperation: 'push'\n        })\n      }, appTabOperating.current && emptyTip), !notFixedAppItems.length ? /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        className: _HomePageVirtualTab[\"default\"]['app-tabs-hr-notFixed']\n      }) : null);\n    }\n  };\n  // 渲染菜单子项\n  var appTabsMenuItems = function appTabsMenuItems(menuItemsList) {\n    return menuItemsList.map(function (item, index) {\n      var _dragOverAppTabItem$d;\n      var appMenu = (0, _classnames7[\"default\"])('kd-cq-dropdown-menu-item', _HomePageVirtualTab[\"default\"].top, _HomePageVirtualTab[\"default\"]['app-menu'], _defineProperty(_defineProperty(_defineProperty(_defineProperty({}, _HomePageVirtualTab[\"default\"].active, item.isActive), _HomePageVirtualTab[\"default\"]['app-move-tabs'], ((_dragOverAppTabItem$d = dragOverAppTabItem.dropEndItem) === null || _dragOverAppTabItem$d === void 0 ? void 0 : _dragOverAppTabItem$d.key) === item.key), _HomePageVirtualTab[\"default\"]['menu-sizing-overflow'], true), _HomePageVirtualTab[\"default\"].droping, appTabOperating.current));\n      return /*#__PURE__*/_react[\"default\"].createElement(_kdesign.Dropdown, {\n        key: item.key,\n        menu: appItemsContextMenu(item),\n        trigger: \"contextMenu\",\n        visible: moreMenuContext.key === item.key && moreMenuContext.show,\n        onVisibleChange: handlePopUpVisibleChange(2),\n        popperClassName: (0, _classnames7[\"default\"])(_HomePageVirtualTab[\"default\"]['virtual-tab-context-menu'], 'kd-cq-context-menu')\n      }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        draggable: true,\n        className: appMenu,\n        onClick: handleAppTabItemClick(item),\n        onContextMenu: handleContextMenu(item.key),\n        onDragStart: handleDragStart(item),\n        onDragOver: handleDragOver({\n          dragOverItem: item,\n          changeOperation: 'insert'\n        }),\n        onDragEnd: handleDragEnd\n      }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        className: (0, _classnames7[\"default\"])(_HomePageVirtualTab[\"default\"]['menu-info'], _HomePageVirtualTab[\"default\"]['menu-sizing-overflow'])\n      }, item.appImageUrl ? /*#__PURE__*/_react[\"default\"].createElement(\"img\", {\n        src: item.appImageUrl,\n        className: _HomePageVirtualTab[\"default\"]['menu-icon'],\n        draggable: false\n      }) : null, /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n        className: _HomePageVirtualTab[\"default\"]['menu-sizing-overflow-span']\n      }, item.title)), !item.isStatic && item.isFixed !== 1 ? /*#__PURE__*/_react[\"default\"].createElement(\"i\", {\n        onClick: handleCloseApp(item),\n        className: (0, _classnames7[\"default\"])('kdfont kdfont-guanbi8', _HomePageVirtualTab[\"default\"]['close-icon'])\n      }) : null));\n    });\n  };\n  var mouseLeave = function mouseLeave() {\n    if (moreMenuTrigger === 'click') return;\n    // 先取消上次的开启下拉事件\n    if (enterAppTabsTime.current) {\n      clearTimeout(enterAppTabsTime.current);\n      enterAppTabsTime.current = null;\n    }\n    // 延时消失150ms\n    leaveAppTabsTime.current = setTimeout(function () {\n      clearTimeout(leaveAppTabsTime.current);\n      leaveAppTabsTime.current = null;\n      handlePopUpVisibleChange(3)(false);\n    }, 150);\n  };\n  var mouseEnter = function mouseEnter() {\n    if (moreMenuTrigger === 'click') return;\n    // 先取消上次的关闭下拉事件\n    if (leaveAppTabsTime.current) {\n      clearTimeout(leaveAppTabsTime.current);\n      leaveAppTabsTime.current = null;\n    }\n    // 延时触发100ms\n    enterAppTabsTime.current = setTimeout(function () {\n      clearTimeout(enterAppTabsTime.current);\n      enterAppTabsTime.current = null;\n      handlePopUpVisibleChange(3)(true);\n    }, 100);\n  };\n\n  // 占位符如果在此拖拽结束就在前面插入数据\n  var dropPlaceHolder = function dropPlaceHolder(data) {\n    if (!data.length) return;\n    return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      draggable: false,\n      className: (0, _classnames7[\"default\"])(_HomePageVirtualTab[\"default\"]['drop-placeholder'], _defineProperty({}, _HomePageVirtualTab[\"default\"]['app-move-tabs'], dragOverAppTabItem.dropEndData === data)),\n      onDragOver: handleDragOver({\n        dragOverData: data,\n        changeOperation: 'unshift'\n      })\n    });\n  };\n\n  // 设置允许拖放的类型为move，在元素中设置有时会失效，在父组件中设置\n  var handleDragOverDropEffect = function handleDragOverDropEffect(e) {\n    e.preventDefault();\n    // 设置允许放置的拖动为move\n    e.dataTransfer.dropEffect = 'move';\n  };\n\n  // 更多应用菜单\n  var moreAppTabsMenu = /*#__PURE__*/_react[\"default\"].createElement(_kdesign.Dropdown.Menu, null, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: (0, _classnames7[\"default\"])(_HomePageVirtualTab[\"default\"]['app-tabs-items-safe-area']),\n    onMouseEnter: mouseEnter,\n    onMouseLeave: mouseLeave,\n    onDragOver: handleDragOverDropEffect,\n    ref: appTabItemsRef\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: (0, _classnames7[\"default\"])(_HomePageVirtualTab[\"default\"]['app-tabs-items'], 'kd-cq-dropdown kd-cq-dropdown-select-type')\n  }, emptyTipArea(notFixedAppItems, (0, _intlApi.getLangMsg)('NewNav.key013')), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    style: {\n      position: 'relative'\n    }\n  }, dropPlaceHolder(notFixedAppItems), appTabsMenuItems(notFixedAppItems)), notFixedAppItems.length && fixedAppItems.length ? /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: (0, _classnames7[\"default\"])(_HomePageVirtualTab[\"default\"]['app-tabs-hr'], _HomePageVirtualTab[\"default\"]['app-show'])\n  }) : null, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    style: {\n      position: 'relative'\n    }\n  }, dropPlaceHolder(fixedAppItems), appTabsMenuItems(fixedAppItems)), emptyTipArea(fixedAppItems, (0, _intlApi.getLangMsg)('NewNav.key014')))));\n  var isInWorkBench = (activeApp === null || activeApp === void 0 ? void 0 : activeApp.active) && !virtualTabs.find(function (item) {\n    return item.isActive;\n  }); // 工作台是否激活\n  var appItemLength = appItems.length;\n  var activeAppTab = activeApp || appItemLength && appItems[appItemLength - 1];\n\n  // 渲染前进行一次宽度计算，比较下拉面板和顶部标题宽度，哪个宽取哪个\n  (0, _react.useLayoutEffect)(function () {\n    // 计算下拉面板宽度\n    // 左右15安全区\n    if (moreMenuShowType === 1) {\n      var _appTabRef$current, _appTabItemsRef$curre;\n      var appTabWidth = ((_appTabRef$current = appTabRef.current) === null || _appTabRef$current === void 0 ? void 0 : _appTabRef$current.clientWidth) + 30;\n      var appTabItemWidth = (_appTabItemsRef$curre = appTabItemsRef.current) === null || _appTabItemsRef$curre === void 0 ? void 0 : _appTabItemsRef$curre.clientWidth;\n      if (appTabWidth >= appTabItemWidth) {\n        setAppTabDropDownWidth({\n          width: \"\".concat(appTabWidth, \"px\")\n        });\n      } else {\n        setAppTabDropDownWidth({});\n      }\n    }\n  }, [moreMenuShowType]);\n  (0, _react.useEffect)(function () {\n    if (moreMenuShowType === 1) {\n      closeAppTab();\n    }\n  }, [isInWorkBench]);\n  var setAppShowFlag = function setAppShowFlag(value) {\n    return function () {\n      appShowFlag.current = value;\n    };\n  };\n\n  // 应用页签\n  var appTab = /*#__PURE__*/_react[\"default\"].createElement(_kdesign.Dropdown, {\n    menu: moreAppTabsMenu,\n    trigger: moreMenuTrigger,\n    visible: moreMenuShowType === 1,\n    popperStyle: appTabDropDownWidth,\n    popperClassName: (0, _classnames7[\"default\"])(_HomePageVirtualTab[\"default\"]['menu-sizing-overflow'], _HomePageVirtualTab[\"default\"]['nav-drop-down'], _HomePageVirtualTab[\"default\"]['app-tabs-safe-area'], _HomePageVirtualTab[\"default\"]['virtual-tab-context-menu']),\n    onVisibleChange: handlePopUpVisibleChange(1)\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: (0, _classnames7[\"default\"])(_HomePageVirtualTab[\"default\"]['app-tab'], _defineProperty({}, _HomePageVirtualTab[\"default\"].expand, moreMenuShowType === 1)),\n    ref: appTabRef\n  }, activeAppTab && /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n    className: (0, _classnames7[\"default\"])(_HomePageVirtualTab[\"default\"].text, _defineProperty({}, _HomePageVirtualTab[\"default\"].active, isInWorkBench)),\n    onClick: function onClick() {\n      return selectTabWorkBench(activeAppTab);\n    },\n    onMouseEnter: setAppShowFlag(false),\n    onMouseLeave: setAppShowFlag(true)\n  }, activeAppTab.title), /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n    className: _HomePageVirtualTab[\"default\"]['arrow-icon'],\n    onMouseEnter: mouseEnter,\n    onMouseLeave: mouseLeave\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"i\", {\n    className: \"kdfont kdfont-shangla\"\n  }))));\n  var otherProps = {\n    selectTab: selectTab,\n    closeVirtualTab: closeVirtualTab,\n    selectVirtualTab: selectVirtualTab,\n    openInNewWindow: openInNewWindow,\n    openInSystemTab: openInSystemTab,\n    control: control,\n    changeVirtualTabData: changeVirtualTabData\n  };\n  var onTransitionEnd = function onTransitionEnd(e) {\n    if (e.target !== visibleWrapRef.current) return;\n    setAnimating(false);\n    setMoveDir('none');\n  };\n  var style = (0, _react.useMemo)(function () {\n    if (moveDir === 'none') {\n      return {\n        transition: 'transform .3s ease',\n        transform: 'translateY(0)',\n        opacity: 1\n      };\n    }\n    var transform = moveDir === 'moveUp' ? 'translateY(-50px)' : 'translateY(48px)';\n    var transition = animating ? 'transform .1ms ease' : 'none';\n    return {\n      transition: transition,\n      transform: transform,\n      opacity: 0\n    };\n  }, [moveDir, animating]);\n  return /*#__PURE__*/_react[\"default\"].createElement(\"div\", _extends({\n    className: _HomePageVirtualTab[\"default\"].nav\n  }, others), /*#__PURE__*/_react[\"default\"].createElement(_StaticTab.StaticTab, {\n    staticItems: staticItems,\n    selectTab: selectTab\n  }), appItemLength > 0 && appTab, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: _HomePageVirtualTab[\"default\"].virtualTabs,\n    style: style,\n    onTransitionEnd: onTransitionEnd,\n    ref: visibleWrapRef\n  }, /*#__PURE__*/_react[\"default\"].createElement(_VirtualTabs.VirtualTabs, _extends({\n    virtualTabs: virtualTabs,\n    activeApp: activeApp\n  }, otherProps))));\n}\n\n//# sourceURL=webpack://bos-platform/./src/component/web/base/HomePageTab/HomePageVirtualTab.js?");

/***/ }),

/***/ "./src/component/web/base/HomePageTab/StaticTab.js":
/*!*********************************************************!*\
  !*** ./src/component/web/base/HomePageTab/StaticTab.js ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.StaticTab = void 0;\n__webpack_require__(/*! core-js/modules/es.array.map.js */ \"../../node_modules/core-js/modules/es.array.map.js\");\nvar _react = _interopRequireDefault(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _HomePageVirtualTab = _interopRequireDefault(__webpack_require__(/*! ./HomePageVirtualTab.less */ \"./src/component/web/base/HomePageTab/HomePageVirtualTab.less\"));\nvar _classnames2 = _interopRequireDefault(__webpack_require__(/*! classnames */ \"../../node_modules/classnames/index.js\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n// 静态页签\nvar StaticTab = exports.StaticTab = function StaticTab(_ref) {\n  var staticItems = _ref.staticItems,\n    selectTab = _ref.selectTab;\n  return /*#__PURE__*/_react[\"default\"].createElement(\"ul\", {\n    className: _HomePageVirtualTab[\"default\"]['static-tab']\n  }, staticItems.map(function (item) {\n    return /*#__PURE__*/_react[\"default\"].createElement(\"li\", {\n      key: item.pageId,\n      className: (0, _classnames2[\"default\"])(_HomePageVirtualTab[\"default\"].item, _defineProperty({}, _HomePageVirtualTab[\"default\"].active, item.isActive)),\n      onClick: function onClick() {\n        return selectTab(item);\n      }\n    }, item.title);\n  }));\n};\n\n//# sourceURL=webpack://bos-platform/./src/component/web/base/HomePageTab/StaticTab.js?");

/***/ }),

/***/ "./src/component/web/base/HomePageTab/VirtualTabs.js":
/*!***********************************************************!*\
  !*** ./src/component/web/base/HomePageTab/VirtualTabs.js ***!
  \***********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.from.js */ \"../../node_modules/core-js/modules/es.array.from.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.assign.js */ \"../../node_modules/core-js/modules/es.object.assign.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.regexp.exec.js */ \"../../node_modules/core-js/modules/es.regexp.exec.js\");\n__webpack_require__(/*! core-js/modules/es.regexp.to-string.js */ \"../../node_modules/core-js/modules/es.regexp.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.VirtualTabs = VirtualTabs;\n__webpack_require__(/*! core-js/modules/es.array.concat.js */ \"../../node_modules/core-js/modules/es.array.concat.js\");\n__webpack_require__(/*! core-js/modules/es.array.filter.js */ \"../../node_modules/core-js/modules/es.array.filter.js\");\n__webpack_require__(/*! core-js/modules/es.array.find-index.js */ \"../../node_modules/core-js/modules/es.array.find-index.js\");\n__webpack_require__(/*! core-js/modules/es.array.is-array.js */ \"../../node_modules/core-js/modules/es.array.is-array.js\");\n__webpack_require__(/*! core-js/modules/es.array.map.js */ \"../../node_modules/core-js/modules/es.array.map.js\");\n__webpack_require__(/*! core-js/modules/es.array.slice.js */ \"../../node_modules/core-js/modules/es.array.slice.js\");\n__webpack_require__(/*! core-js/modules/es.array.splice.js */ \"../../node_modules/core-js/modules/es.array.splice.js\");\n__webpack_require__(/*! core-js/modules/es.date.now.js */ \"../../node_modules/core-js/modules/es.date.now.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-string.js */ \"../../node_modules/core-js/modules/es.date.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.function.name.js */ \"../../node_modules/core-js/modules/es.function.name.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/web.timers.js */ \"../../node_modules/core-js/modules/web.timers.js\");\nvar _react = _interopRequireWildcard(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _lodash = __webpack_require__(/*! lodash */ \"../../node_modules/lodash/lodash.js\");\nvar _HomePageVirtualTab = _interopRequireDefault(__webpack_require__(/*! ./HomePageVirtualTab.less */ \"./src/component/web/base/HomePageTab/HomePageVirtualTab.less\"));\nvar _classnames2 = _interopRequireDefault(__webpack_require__(/*! classnames */ \"../../node_modules/classnames/index.js\"));\nvar _kdesign = __webpack_require__(/*! @kdcloudjs/kdesign */ \"webpack/sharing/consume/default/@kdcloudjs/kdesign/@kdcloudjs/kdesign\");\nvar _symbolConst = __webpack_require__(/*! @/constant/symbolConst */ \"./src/constant/symbolConst.js\");\nvar _GlobalDataCacher = __webpack_require__(/*! @/model/GlobalDataCacher */ \"./src/model/GlobalDataCacher.js\");\nvar _resizeObserve2 = _interopRequireDefault(__webpack_require__(/*! @/util/resizeObserve */ \"./src/util/resizeObserve.js\"));\nvar _HomePageConst = __webpack_require__(/*! ./HomePageConst */ \"./src/component/web/base/HomePageTab/HomePageConst.js\");\nvar _listenVirtualTabDrag = _interopRequireDefault(__webpack_require__(/*! ./drag/listenVirtualTabDrag */ \"./src/component/web/base/HomePageTab/drag/listenVirtualTabDrag.js\"));\nvar _VirtualTabMoreBtn = _interopRequireDefault(__webpack_require__(/*! ./component/VirtualTabMoreBtn */ \"./src/component/web/base/HomePageTab/component/VirtualTabMoreBtn.js\"));\nvar _TopVirtualTab = _interopRequireDefault(__webpack_require__(/*! ./component/TopVirtualTab */ \"./src/component/web/base/HomePageTab/component/TopVirtualTab.js\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nvar offset = 0;\nvar LEFT_ARROW_WIDTH = 24;\nvar RIGHT_ARROW_WIDTH = 28;\nvar MORE_TABS_WIDTH = 24;\nvar prevActiveApp = ''; // 记录上一个选中的应用\nvar requireAnimate = true; // 是否需要动画，如果是切换应用，就不需要动画，否则会滚动，视觉效果不佳\nvar hideTabContainer = false; // 应用切换的时候，会重置位置、箭头等，这个过渡效果进行一个隐藏，优化体验\nvar scrollToActiveTabTimer = null;\n// 在某些浏览器下firefox 或者缩放浏览器下 getBoundingClientRect 拿到的right、left 值会有微微偏差, 所以使用Math.round\n\nfunction VirtualTabs(props) {\n  var _props$virtualTabs = props.virtualTabs,\n    virtualTabs = _props$virtualTabs === void 0 ? [] : _props$virtualTabs,\n    activeApp = props.activeApp,\n    selectTab = props.selectTab,\n    closeVirtualTab = props.closeVirtualTab,\n    selectVirtualTab = props.selectVirtualTab,\n    openInNewWindow = props.openInNewWindow,\n    openInSystemTab = props.openInSystemTab,\n    control = props.control,\n    changeVirtualTabData = props.changeVirtualTabData;\n  var _useState = (0, _react.useState)(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    moreMenuShowType = _useState2[0],\n    setMoreMenuShowType = _useState2[1]; // 1: 更多应用 2: 更多虚拟页签\n  var _useState3 = (0, _react.useState)({}),\n    _useState4 = _slicedToArray(_useState3, 2),\n    showContextMenuInfo = _useState4[0],\n    setShowContextMenuInfo = _useState4[1]; // 记录右键对应的虚拟页签id，用于手动控制右键菜单的展示 {tabInfo: {}, show: true/false}\n  var _useState5 = (0, _react.useState)({\n      leftShow: false,\n      rightShow: false\n    }),\n    _useState6 = _slicedToArray(_useState5, 2),\n    arrowInfo = _useState6[0],\n    setArrowInfo = _useState6[1]; // 箭头是否展示\n  // const [controlTabWidth, setControlTabWidth] = useState(false) // 是否控制页签项宽度\n  var _useState7 = (0, _react.useState)(false),\n    _useState8 = _slicedToArray(_useState7, 2),\n    moreVirtualTabsMenuDragIng = _useState8[0],\n    setMoreVirtualTabsMenuDragIng = _useState8[1];\n  var _useState9 = (0, _react.useState)({}),\n    _useState10 = _slicedToArray(_useState9, 2),\n    virtualTabsDragStartItem = _useState10[0],\n    setVirtualTabsDragStartItem = _useState10[1]; // 二级页签拖拽开始时，存储数据\n  var _useState11 = (0, _react.useState)({}),\n    _useState12 = _slicedToArray(_useState11, 2),\n    virtualTabsDragOverItem = _useState12[0],\n    setVirtualTabsDragOverItem = _useState12[1]; // 二级页签拖拽经过时，存储数据\n  var _useState13 = (0, _react.useState)(false),\n    _useState14 = _slicedToArray(_useState13, 2),\n    virtualTabDragIng = _useState14[0],\n    setVirtualTabDragIng = _useState14[1];\n  var tabsContainerRef = (0, _react.useRef)(); // 虚拟页签ul\n  var visibleWrapRef = (0, _react.useRef)(null); // 虚拟页签可见区域\n  var activeTabRef = (0, _react.useRef)(null); // 激活页签\n  var topVirtualTabDragTimer = (0, _react.useRef)(null); // 二级页签拖拽超出距离时，触发翻页\n  var hasMoveDrag = (0, _react.useRef)(false); // 是否移动过页签，如果移动过先调整位置\n  var activeVirtualTabKey = virtualTabs.findIndex(function (item) {\n    return item.isActive && (activeApp === null || activeApp === void 0 ? void 0 : activeApp.active);\n  });\n  var activeVirtualTabPageId = activeVirtualTabKey !== -1 && virtualTabs[activeVirtualTabKey].pageId; // 二级页签选中的pageid\n\n  // 应用切换进行样式的一些处理\n  (0, _react.useEffect)(function () {\n    if (prevActiveApp !== (activeApp === null || activeApp === void 0 ? void 0 : activeApp.pageId)) {\n      requireAnimate = false;\n      hideTabContainer = true;\n      setTimeout(function () {\n        hideTabContainer = false;\n      }, 0);\n      prevActiveApp = activeApp === null || activeApp === void 0 ? void 0 : activeApp.pageId;\n    } else {\n      requireAnimate = true;\n    }\n    return function () {\n      clearInterval(topVirtualTabDragTimer.current);\n      topVirtualTabDragTimer.current = null;\n    };\n  }, [activeVirtualTabKey, activeApp === null || activeApp === void 0 ? void 0 : activeApp.pageId, virtualTabs.length]);\n  (0, _react.useEffect)(function () {\n    var _virtualTabs$activeVi;\n    var removeListenVirtualTabDrag = (0, _listenVirtualTabDrag[\"default\"])((_virtualTabs$activeVi = virtualTabs[activeVirtualTabKey]) === null || _virtualTabs$activeVi === void 0 ? void 0 : _virtualTabs$activeVi.pageId, virtualTabs);\n    // 如果之前二级页签拖拽过，先修正位置\n    if (hasMoveDrag.current) {\n      fixDragShow();\n      hasMoveDrag.current = false;\n    }\n    return function () {\n      removeListenVirtualTabDrag && removeListenVirtualTabDrag();\n    };\n  }, [virtualTabs]);\n\n  // 可视区宽度变化时，调整位置, activeApp?.pageId为应用切换时，要重新调整位置\n  var fixTabShow = (0, _react.useCallback)(function () {\n    var visibleWrapDOM = visibleWrapRef.current;\n    var tabsContainerDOM = tabsContainerRef.current;\n    if (!visibleWrapDOM || !tabsContainerDOM) return;\n    var visibleWrapRec = visibleWrapDOM.getBoundingClientRect();\n    var tabsContainerRec = tabsContainerDOM.getBoundingClientRect();\n    var scrollWidth = 0;\n    var prevOffset = offset;\n    if (Math.round(tabsContainerRec.width - visibleWrapRec.width) > 0 && Math.round(tabsContainerRec.right - visibleWrapRec.right) < 0) {\n      var fixRightArrowWidth = activeVirtualTabKey === virtualTabs.length - 1 ? MORE_TABS_WIDTH : 0;\n      scrollWidth = visibleWrapRec.right - tabsContainerRec.right - fixRightArrowWidth;\n    } else if (Math.round(tabsContainerRec.width - visibleWrapRec.width) <= 0) {\n      offset = 0;\n    }\n    offset = offset + scrollWidth;\n    setArrowToggle(visibleWrapRec, tabsContainerRec, offset - prevOffset);\n    tabsContainerRef.current.style.transform = \"translate3d(\".concat(offset, \"px,0,0)\");\n  }, [activeApp === null || activeApp === void 0 ? void 0 : activeApp.pageId, visibleWrapRef.current]);\n\n  // 可见区域发生变化的时候更新虚拟页签的位置\n  useResizeAndfixTabShow(visibleWrapRef, fixTabShow);\n\n  // 自动翻页tab小于可视区时调整位置\n  var fixDragShow = function fixDragShow() {\n    var _visibleWrapRef$curre, _tabsContainerRef$cur;\n    var visibleWrapRec = (_visibleWrapRef$curre = visibleWrapRef.current) === null || _visibleWrapRef$curre === void 0 ? void 0 : _visibleWrapRef$curre.getBoundingClientRect();\n    var tabsContainerRec = (_tabsContainerRef$cur = tabsContainerRef.current) === null || _tabsContainerRef$cur === void 0 ? void 0 : _tabsContainerRef$cur.getBoundingClientRect();\n    var rootLeft = visibleWrapRec.left,\n      rootRight = visibleWrapRec.right;\n    var allLeft = tabsContainerRec.left,\n      allRight = tabsContainerRec.right;\n    var scrollWidth = 0;\n    var prevOffset = offset;\n    // 左侧小于可视区的情况\n    if (rootLeft < allLeft) {\n      offset = 0;\n    }\n    // 右侧小于可视区的情况\n    if (rootRight > allRight) {\n      scrollWidth = rootRight - allRight - MORE_TABS_WIDTH;\n    }\n    offset += scrollWidth;\n    setArrowToggle(visibleWrapRec, tabsContainerRec, offset - prevOffset);\n    tabsContainerRef.current.style.transform = \"translate3d(\".concat(offset, \"px,0,0)\");\n  };\n\n  // 选中页滚动到可视区域 - 选中项发生变化的时候\n  var scrollToActiveTab = (0, _react.useCallback)(function () {\n    var _tabsContainerRef$cur2, _tabsContainerRef$cur3, _visibleWrapRef$curre2, _tabsContainerRef$cur4;\n    if (!((_tabsContainerRef$cur2 = tabsContainerRef.current) !== null && _tabsContainerRef$cur2 !== void 0 && _tabsContainerRef$cur2.childNodes)) {\n      offset = 0;\n      return;\n    }\n    var activeTabRec = (_tabsContainerRef$cur3 = tabsContainerRef.current.childNodes[activeVirtualTabKey]) === null || _tabsContainerRef$cur3 === void 0 ? void 0 : _tabsContainerRef$cur3.getBoundingClientRect();\n    var visibleWrapRec = (_visibleWrapRef$curre2 = visibleWrapRef.current) === null || _visibleWrapRef$curre2 === void 0 ? void 0 : _visibleWrapRef$curre2.getBoundingClientRect();\n    var tabsContainerRec = (_tabsContainerRef$cur4 = tabsContainerRef.current) === null || _tabsContainerRef$cur4 === void 0 ? void 0 : _tabsContainerRef$cur4.getBoundingClientRect();\n    var prevOffset = offset;\n    if (activeTabRec) {\n      var overRight = activeTabRec.right - visibleWrapRec.right;\n      var overLeft = visibleWrapRec.left - activeTabRec.left;\n      if (Math.round(overLeft) > 0) {\n        // 超出在左边\n        offset = offset + overLeft + (activeVirtualTabKey === 0 ? 0 : LEFT_ARROW_WIDTH);\n      } else if (Math.round(overRight) > 0) {\n        // 超出在右边\n        var fixRightArrowWidth = activeVirtualTabKey === virtualTabs.length - 1 ? MORE_TABS_WIDTH : MORE_TABS_WIDTH + RIGHT_ARROW_WIDTH;\n        offset = offset - overRight - fixRightArrowWidth;\n      } else if (Math.round(tabsContainerRec.width - visibleWrapRec.width) > 0) {\n        // 只有ul的长度大于可视区的长度时，才需要调整位置\n        // 在可视范围内\n        var _leftShow = arrowInfo.leftShow,\n          _rightShow = arrowInfo.rightShow;\n        var rightArrowWidth = _rightShow ? RIGHT_ARROW_WIDTH + MORE_TABS_WIDTH : MORE_TABS_WIDTH;\n        if (Math.round(activeTabRec.left - visibleWrapRec.left - LEFT_ARROW_WIDTH) < 0 && _leftShow) {\n          // 处理贴近左边时偏移量\n          offset = offset + (LEFT_ARROW_WIDTH - (activeTabRec.left - visibleWrapRec.left));\n        } else if ((_leftShow || _rightShow) && Math.round(visibleWrapRec.right - activeTabRec.right - rightArrowWidth) < 0) {\n          // 处理贴近右边时偏移量，一个右箭头，两个箭头\n          offset = offset - (rightArrowWidth - (visibleWrapRec.right - activeTabRec.right));\n        } else {\n          // 处理右边留白的情况\n          var overWrapRight = visibleWrapRec.right - tabsContainerRec.right;\n          if (offset !== 0 && Math.round(overWrapRight) > 0) {\n            offset += overWrapRight - RIGHT_ARROW_WIDTH;\n          }\n        }\n      }\n    } else {\n      // 这里是上一选中页签是工作台的场景，这时候也处理一下留白的场景\n      var _overWrapRight = visibleWrapRec.right - tabsContainerRec.right;\n      if (offset !== 0 && Math.round(_overWrapRight) > 0) {\n        offset += _overWrapRight - RIGHT_ARROW_WIDTH;\n      }\n    }\n    setArrowToggle(visibleWrapRec, tabsContainerRec, offset - prevOffset);\n    tabsContainerRef.current.style.transform = \"translate3d(\".concat(offset, \"px,0,0)\");\n  }, [activeVirtualTabPageId, activeTabRef === null || activeTabRef === void 0 ? void 0 : activeTabRef.current, virtualTabs.length]);\n  (0, _react.useEffect)(function () {\n    scrollToActiveTabTimer && clearTimeout(scrollToActiveTabTimer);\n    scrollToActiveTabTimer = setTimeout(function () {\n      scrollToActiveTab();\n    }, 0);\n  }, [scrollToActiveTab]);\n  var setArrowToggle = function setArrowToggle(visibleWrapRec, tabsContainerRec, offset) {\n    var leftArrowShow = Math.round((tabsContainerRec === null || tabsContainerRec === void 0 ? void 0 : tabsContainerRec.left) + offset - (visibleWrapRec === null || visibleWrapRec === void 0 ? void 0 : visibleWrapRec.left)) < 0;\n    var rightArrowShow = Math.round((tabsContainerRec === null || tabsContainerRec === void 0 ? void 0 : tabsContainerRec.right) + offset - (visibleWrapRec === null || visibleWrapRec === void 0 ? void 0 : visibleWrapRec.right)) > 0;\n    setArrowInfo({\n      leftShow: leftArrowShow,\n      rightShow: rightArrowShow\n    });\n  };\n\n  // 翻页 根据offset\n  var toNextPrev = function toNextPrev(direction) {\n    return function () {\n      var _visibleWrapRef$curre3, _tabsContainerRef$cur5;\n      var visibleWrapRec = (_visibleWrapRef$curre3 = visibleWrapRef.current) === null || _visibleWrapRef$curre3 === void 0 ? void 0 : _visibleWrapRef$curre3.getBoundingClientRect();\n      var tabsContainerRec = (_tabsContainerRef$cur5 = tabsContainerRef.current) === null || _tabsContainerRef$cur5 === void 0 ? void 0 : _tabsContainerRef$cur5.getBoundingClientRect();\n      var rootWidth = visibleWrapRec.width,\n        rootLeft = visibleWrapRec.left,\n        rootRight = visibleWrapRec.right;\n      var allLeft = tabsContainerRec.left,\n        allRight = tabsContainerRec.right;\n      var prevOffset = offset;\n      if (direction === 'prev') {\n        // 展示左侧超出菜单\n        var scrollWidth = Math.round(rootLeft - allLeft - rootWidth) > 0 ? rootWidth : rootLeft - allLeft;\n        offset = offset + scrollWidth;\n      } else {\n        // 展示右侧超出菜单\n        var _scrollWidth = Math.round(allRight - rootRight - rootWidth) > 0 ? rootWidth : allRight - rootRight + MORE_TABS_WIDTH;\n        offset = offset - _scrollWidth;\n      }\n      setArrowToggle(visibleWrapRec, tabsContainerRec, offset - prevOffset);\n      tabsContainerRef.current.style.transform = \"translate3d(\".concat(offset, \"px,0,0)\");\n    };\n  };\n  var topVirtualTabDraghanldeEnd = function topVirtualTabDraghanldeEnd(moveIng, dragEvent) {\n    if (moveIng) {\n      moveIng = false;\n      hasMoveDrag.current = true;\n      (0, _GlobalDataCacher.setData)(_symbolConst.KEY_MOVE_DRAG, {\n        moveDrop: dragEvent.moveDrop,\n        moveDirection: dragEvent.moveDirection\n      });\n    }\n    clearInterval(topVirtualTabDragTimer.current);\n    topVirtualTabDragTimer.current = null;\n  };\n  var topVirtualTabDraghanlde = function topVirtualTabDraghanlde(dragEvent) {\n    var preWidth = 20;\n    var moveIng = false;\n    if (topVirtualTabDragTimer.current) {\n      clearInterval(topVirtualTabDragTimer.current);\n      topVirtualTabDragTimer.current = null;\n    }\n    topVirtualTabDragTimer.current = setInterval(function () {\n      var _visibleWrapRef$curre4, _tabsContainerRef$cur6, _dragEvent$moveDrop;\n      var visibleWrapRec = (_visibleWrapRef$curre4 = visibleWrapRef.current) === null || _visibleWrapRef$curre4 === void 0 ? void 0 : _visibleWrapRef$curre4.getBoundingClientRect();\n      var tabsContainerRec = (_tabsContainerRef$cur6 = tabsContainerRef.current) === null || _tabsContainerRef$cur6 === void 0 ? void 0 : _tabsContainerRef$cur6.getBoundingClientRect();\n      var dragEventRec = (_dragEvent$moveDrop = dragEvent.moveDrop) === null || _dragEvent$moveDrop === void 0 ? void 0 : _dragEvent$moveDrop.getBoundingClientRect();\n      var rootLeft = visibleWrapRec.left,\n        rootRight = visibleWrapRec.right;\n      var allLeft = tabsContainerRec.left,\n        allRight = tabsContainerRec.right;\n      var moveLeft = dragEventRec.left,\n        moveRight = dragEventRec.right;\n      var prevOffset = offset;\n      if (dragEvent.moveDirection === 'right' && Math.round(allRight - rootRight) > 0 && moveRight < rootRight && moveRight + 50 + 48 - rootRight > 0) {\n        // 展示右侧超出菜单\n        moveIng = true;\n        if (allRight - (rootRight - MORE_TABS_WIDTH) >= preWidth) {\n          offset = offset - preWidth;\n        } else {\n          offset = allRight - (rootRight - MORE_TABS_WIDTH);\n          topVirtualTabDraghanldeEnd(moveIng, dragEvent);\n        }\n        setArrowToggle(visibleWrapRec, tabsContainerRec, offset - prevOffset);\n        tabsContainerRef.current.style.transform = \"translate3d(\".concat(offset, \"px,0,0)\");\n      } else if (dragEvent.moveDirection === 'left' && Math.round(rootLeft + LEFT_ARROW_WIDTH - allLeft) > 0 && rootLeft < moveLeft && moveLeft - 50 - LEFT_ARROW_WIDTH - rootLeft < 0) {\n        // 展示左侧超出菜单\n        moveIng = true;\n        if (rootLeft + LEFT_ARROW_WIDTH - allLeft < preWidth) {\n          offset = offset + preWidth;\n        } else {\n          offset = 0;\n          topVirtualTabDraghanldeEnd(moveIng, dragEvent);\n        }\n        setArrowToggle(visibleWrapRec, tabsContainerRec, Math.abs(offset - prevOffset));\n        tabsContainerRef.current.style.transform = \"translate3d(\".concat(offset, \"px,0,0)\");\n      } else {\n        topVirtualTabDraghanldeEnd(moveIng, dragEvent);\n      }\n    }, 100);\n  };\n\n  // 水平拖拽超出可视范围,触发自动翻页\n  var topVirtualTabDragOver = function topVirtualTabDragOver(dragEvent) {\n    if (!virtualTabDragIng) {\n      setVirtualTabDragIng(true);\n    }\n    // 正在自动翻页直接return\n    if (topVirtualTabDragTimer.current) return;\n    topVirtualTabDraghanlde(dragEvent);\n  };\n\n  // 二级页签拖拽结束\n  var tabDragEnd = function tabDragEnd(data) {\n    clearInterval(topVirtualTabDragTimer.current);\n    topVirtualTabDragTimer.current = null;\n    setVirtualTabDragIng(false);\n    changeVirtualTabData(data);\n  };\n  (0, _react.useEffect)(function () {\n    var removeVirtualTabChangeListener = (0, _GlobalDataCacher.addDataChangeListener)(_symbolConst.KEY_DRAGEND_TAB, tabDragEnd);\n    var removeVirtualTabDragOverListener = (0, _GlobalDataCacher.addDataChangeListener)(_symbolConst.KEY_DRAGOVER_TAB, topVirtualTabDragOver);\n    return function () {\n      removeVirtualTabChangeListener();\n      removeVirtualTabDragOverListener();\n    };\n  }, [virtualTabDragIng]);\n\n  // 弹出面板可见性变化处理\n  var handlePopUpVisibleChange = function handlePopUpVisibleChange(type) {\n    return function (visible) {\n      switch (type) {\n        case 1:\n          // 更多应用\n          if (!visible && moreMenuShowType === 1) {\n            setMoreMenuShowType(null);\n          } else if (visible && moreMenuShowType !== 1) {\n            setMoreMenuShowType(1);\n          }\n          break;\n        case 2:\n          // 更多虚拟页签\n          if (moreVirtualTabsMenuDragIng) return;\n          if (!visible && moreMenuShowType === 2 && !showContextMenuInfo.show) {\n            handleCloseAllPopUpPanel();\n          } else if (visible && moreMenuShowType !== 2) {\n            setShowContextMenuInfo({});\n            setMoreMenuShowType(2);\n          }\n          break;\n        case 3:\n          // 右键菜单\n          if (!visible && showContextMenuInfo.show) {\n            setShowContextMenuInfo({});\n          }\n          break;\n        default:\n          break;\n      }\n    };\n  };\n\n  // 关闭所有弹出面板\n  var handleCloseAllPopUpPanel = function handleCloseAllPopUpPanel() {\n    if (moreVirtualTabsMenuDragIng) return;\n    setShowContextMenuInfo({});\n    setMoreMenuShowType(null);\n  };\n\n  // 触发右键\n  var handleContextMenu = function handleContextMenu(item) {\n    return function () {\n      setShowContextMenuInfo({\n        tabInfo: item,\n        show: true\n      });\n    };\n  };\n\n  // 关闭虚拟页签\n  var handleCloseTab = function handleCloseTab(item) {\n    return function (e) {\n      e.stopPropagation();\n      closeVirtualTab([item]);\n      setMoreMenuShowType(null);\n    };\n  };\n\n  // 选中页签\n  var handleSelectTab = function handleSelectTab(item, hideMenu) {\n    return function () {\n      if (!(activeApp !== null && activeApp !== void 0 && activeApp.active)) {\n        // 如果应用还没激活，先激活\n        selectTab(activeApp);\n      }\n      selectVirtualTab(item);\n      if (hideMenu) {\n        handleCloseAllPopUpPanel();\n      }\n    };\n  };\n\n  // 点击右键菜单子项\n  var handleContextItemClick = function handleContextItemClick(item) {\n    var curVirtualTabInfo = showContextMenuInfo.tabInfo;\n    var curIndex = virtualTabs.findIndex(function (item) {\n      return item.pageId === curVirtualTabInfo.pageId;\n    });\n    var leftVirtualTabs = virtualTabs.slice(0, curIndex);\n    var rightVirtualTabs = virtualTabs.slice(curIndex + 1);\n    var controlType = control.controlType,\n      controlId = control.controlId;\n    var methodKey;\n    switch (item.key) {\n      case 2:\n        // 在浏览器页签中打开\n        openInNewWindow(curVirtualTabInfo);\n        methodKey = 'openInNewWindow';\n        break;\n      case _HomePageConst.CLOSE_CURRENT_TAB:\n        // 关闭当前页签\n        closeVirtualTab([curVirtualTabInfo]);\n        methodKey = 'closeVirtualTab';\n        break;\n      case _HomePageConst.CLOSE_ALL_TAB:\n        // 关闭全部动态页签\n        closeVirtualTab(virtualTabs);\n        methodKey = 'closeVirtualTab';\n        // 关闭全部页签时，将页签容器偏移量重置为0\n        offset = 0;\n        break;\n      case _HomePageConst.CLOSE_OTHER_TAB:\n        // 关闭其他动态页签\n        var otherVirtualTabs = virtualTabs.filter(function (item) {\n          return item.pageId !== curVirtualTabInfo.pageId;\n        });\n        closeVirtualTab(otherVirtualTabs);\n        methodKey = 'closeVirtualTab';\n        break;\n      case _HomePageConst.AGAIN_OPEN_TAB:\n        openInSystemTab(curVirtualTabInfo);\n        methodKey = 'openInSystemTab';\n        break;\n      case _HomePageConst.CLOSE_LEFT_TAB:\n        closeVirtualTab(leftVirtualTabs);\n        methodKey = 'closeVirtualTab';\n        break;\n      case _HomePageConst.CLOSE_RIGHT_TAB:\n        closeVirtualTab(rightVirtualTabs);\n        methodKey = 'closeVirtualTab';\n        break;\n      default:\n        break;\n    }\n    handleCloseAllPopUpPanel();\n    // const controlType = model.meta.get('type')\n    // const controlId = model.meta.get('id')\n    (0, _GlobalDataCacher.setData)(_symbolConst.KEY_UI_ACTION, {\n      controlName: '新版首页导航',\n      controlId: controlId,\n      controlType: controlType,\n      startTime: Date.now(),\n      tableName: 'right_click',\n      methodKey: methodKey,\n      methodName: item.name\n    });\n  };\n\n  // 右键菜单\n  var getContextMenu = function getContextMenu(pageId) {\n    var curIndex = virtualTabs.findIndex(function (item) {\n      return item.pageId === pageId;\n    });\n    var contextMenu = _HomePageConst.contextMenuList.filter(function (menu) {\n      var flag = true;\n      if (curIndex === 0 && menu.key === _HomePageConst.CLOSE_LEFT_TAB) {\n        flag = false;\n      } else if (curIndex === virtualTabs.length - 1 && menu.key === _HomePageConst.CLOSE_RIGHT_TAB) {\n        flag = false;\n      } else if (virtualTabs.length === 1 && (menu.key === _HomePageConst.CLOSE_RIGHT_TAB || menu.key === _HomePageConst.CLOSE_LEFT_TAB || menu.key === _HomePageConst.CLOSE_OTHER_TAB || menu.key === _HomePageConst.CLOSE_ALL_TAB)) {\n        flag = false;\n      }\n      return flag;\n    });\n    return /*#__PURE__*/_react[\"default\"].createElement(_kdesign.Dropdown.Menu, null, /*#__PURE__*/_react[\"default\"].createElement(_react[\"default\"].Fragment, null, contextMenu.map(function (item) {\n      return /*#__PURE__*/_react[\"default\"].createElement(_kdesign.Dropdown.Item, {\n        key: item.id,\n        onClick: function onClick() {\n          return handleContextItemClick(item);\n        },\n        className: (0, _classnames2[\"default\"])(_HomePageVirtualTab[\"default\"]['context-menu-item'], 'kd-cq-context-menu-item')\n      }, item.name);\n    })));\n  };\n\n  // 虚拟菜单拖拽开始事件\n  var handleVirtualTabsDragStart = function handleVirtualTabsDragStart(item, index) {\n    return function (e) {\n      // 拖拽元素时隐藏x号\n      var icon = e.target.querySelector('[drop-close-icon=true]');\n      icon.style.visibility = 'hidden';\n      e.target.style.background = '#fff';\n      !(item.isActive && activeApp !== null && activeApp !== void 0 && activeApp.active) && (e.target.style.color = '#666');\n      e.target.style.opacity = 0.5;\n      e.dataTransfer.effectAllowed = 'move';\n      setMoreVirtualTabsMenuDragIng(true);\n      item.index = index;\n      setVirtualTabsDragStartItem(item);\n    };\n  };\n\n  // 虚拟菜单拖拽经过事件\n  var handleVirtualTabsDragOver = function handleVirtualTabsDragOver(item, index) {\n    return function (e) {\n      e.preventDefault();\n      item.index = index;\n      setVirtualTabsDragOverItem(item);\n    };\n  };\n\n  // 虚拟菜单拖拽结束事件\n  var handleVirtualTabsDragEnd = function handleVirtualTabsDragEnd(e) {\n    var icon = e.target.querySelector('[drop-close-icon=true]');\n    icon.style.visibility = '';\n    e.target.style.opacity = '';\n    e.target.style.background = '';\n    e.target.style.color = '';\n    e.dataTransfer.dropEffect = 'move';\n    setMoreVirtualTabsMenuDragIng(false);\n    var newVirtualTabs = changeVirtualTabDataOrder(virtualTabsDragStartItem, virtualTabsDragOverItem);\n    changeVirtualTabData(newVirtualTabs);\n    setVirtualTabsDragStartItem({});\n    setVirtualTabsDragOverItem({});\n  };\n  var changeVirtualTabDataOrder = function changeVirtualTabDataOrder(startItem, endItem) {\n    var tmpVirtualTabs = (0, _lodash.cloneDeep)(virtualTabs);\n    var insertItem = tmpVirtualTabs.splice(startItem.index, 1);\n    tmpVirtualTabs.splice.apply(tmpVirtualTabs, [endItem.index, 0].concat(_toConsumableArray(insertItem)));\n    return tmpVirtualTabs;\n  };\n  var leftShow = arrowInfo.leftShow,\n    rightShow = arrowInfo.rightShow;\n  var overContainer = virtualTabs.length > 1 && (leftShow || rightShow);\n  // 向前箭头\n  var preBtnDOM = virtualTabs.length > 1 && leftShow && /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: _HomePageVirtualTab[\"default\"]['left-btn-wrap'],\n    onClick: toNextPrev('prev')\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n    className: _HomePageVirtualTab[\"default\"]['pre-btn-wrap']\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"i\", {\n    className: (0, _classnames2[\"default\"])('kdfont kdfont-qianfan', _HomePageVirtualTab[\"default\"]['pre-btn'])\n  })));\n  var otherProps = {\n    activeApp: activeApp,\n    showContextMenuInfo: showContextMenuInfo,\n    moreMenuShowType: moreMenuShowType,\n    getContextMenu: getContextMenu,\n    handlePopUpVisibleChange: handlePopUpVisibleChange,\n    handleContextMenu: handleContextMenu,\n    handleSelectTab: handleSelectTab,\n    handleCloseTab: handleCloseTab\n  };\n  return virtualTabs.length > 0 && /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: (0, _classnames2[\"default\"])(_HomePageVirtualTab[\"default\"]['virtual-tab-out-wrap'], _defineProperty({}, _HomePageVirtualTab[\"default\"].hide, hideTabContainer)),\n    ref: visibleWrapRef\n  }, preBtnDOM, /*#__PURE__*/_react[\"default\"].createElement(_TopVirtualTab[\"default\"], _extends({\n    virtualTabs: virtualTabs,\n    requireAnimate: requireAnimate,\n    tabsContainerRef: tabsContainerRef,\n    virtualTabDragIng: virtualTabDragIng\n  }, otherProps)), overContainer && /*#__PURE__*/_react[\"default\"].createElement(_VirtualTabMoreBtn[\"default\"], _extends({\n    virtualTabs: virtualTabs,\n    rightShow: rightShow,\n    virtualTabsDragOverItem: virtualTabsDragOverItem,\n    virtualTabsDragStartItem: virtualTabsDragStartItem,\n    toNextPrev: toNextPrev,\n    handleCloseAllPopUpPanel: handleCloseAllPopUpPanel,\n    handleVirtualTabsDragStart: handleVirtualTabsDragStart,\n    handleVirtualTabsDragOver: handleVirtualTabsDragOver,\n    handleVirtualTabsDragEnd: handleVirtualTabsDragEnd\n  }, otherProps)));\n}\nvar useResizeAndfixTabShow = function useResizeAndfixTabShow(visibleWrapRef, fixTabShow) {\n  (0, _react.useEffect)(function () {\n    var resizeObserve;\n    if (visibleWrapRef !== null && visibleWrapRef !== void 0 && visibleWrapRef.current) {\n      resizeObserve = (0, _resizeObserve2[\"default\"])(visibleWrapRef.current, (0, _lodash.debounce)(fixTabShow, 500));\n    }\n    return function () {\n      var _resizeObserve;\n      (_resizeObserve = resizeObserve) === null || _resizeObserve === void 0 || _resizeObserve.removeResizeObserve();\n    };\n  }, [visibleWrapRef === null || visibleWrapRef === void 0 ? void 0 : visibleWrapRef.current, fixTabShow]);\n};\n\n//# sourceURL=webpack://bos-platform/./src/component/web/base/HomePageTab/VirtualTabs.js?");

/***/ }),

/***/ "./src/component/web/base/HomePageTab/component/TopVirtualTab.js":
/*!***********************************************************************!*\
  !*** ./src/component/web/base/HomePageTab/component/TopVirtualTab.js ***!
  \***********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.map.js */ \"../../node_modules/core-js/modules/es.array.map.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\nvar _react = _interopRequireDefault(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _classnames5 = _interopRequireDefault(__webpack_require__(/*! classnames */ \"../../node_modules/classnames/index.js\"));\nvar _HomePageVirtualTab = _interopRequireDefault(__webpack_require__(/*! ../HomePageVirtualTab.less */ \"./src/component/web/base/HomePageTab/HomePageVirtualTab.less\"));\nvar _kdesign = __webpack_require__(/*! @kdcloudjs/kdesign */ \"webpack/sharing/consume/default/@kdcloudjs/kdesign/@kdcloudjs/kdesign\");\nvar _TextEllipsisWrap = _interopRequireDefault(__webpack_require__(/*! @/component/common/TextEllipsisWrap */ \"./src/component/common/TextEllipsisWrap.js\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction TopVirtualTabDOM(props) {\n  var virtualTabs = props.virtualTabs,\n    activeApp = props.activeApp,\n    requireAnimate = props.requireAnimate,\n    getContextMenu = props.getContextMenu,\n    showContextMenuInfo = props.showContextMenuInfo,\n    tabsContainerRef = props.tabsContainerRef,\n    moreMenuShowType = props.moreMenuShowType,\n    virtualTabDragIng = props.virtualTabDragIng,\n    handleCloseTab = props.handleCloseTab,\n    handlePopUpVisibleChange = props.handlePopUpVisibleChange,\n    handleSelectTab = props.handleSelectTab,\n    handleContextMenu = props.handleContextMenu;\n  return /*#__PURE__*/_react[\"default\"].createElement(\"ul\", {\n    className: (0, _classnames5[\"default\"])('kd-cq-control kd-cq-tabs kd-cq-tabs-virtual-tab', _HomePageVirtualTab[\"default\"]['virtual-tab'], _defineProperty({}, _HomePageVirtualTab[\"default\"].animate, requireAnimate)),\n    ref: tabsContainerRef\n  }, virtualTabs.map(function (item, index) {\n    var _showContextMenuInfo$;\n    return /*#__PURE__*/_react[\"default\"].createElement(_kdesign.Dropdown, {\n      popperStyle: {\n        animation: 'none'\n      },\n      menu: getContextMenu(item.pageId),\n      popperClassName: \"kd-cq-context-menu\",\n      trigger: \"contextMenu\",\n      key: item.pageId,\n      visible: showContextMenuInfo.show && item.pageId === ((_showContextMenuInfo$ = showContextMenuInfo.tabInfo) === null || _showContextMenuInfo$ === void 0 ? void 0 : _showContextMenuInfo$.pageId) && moreMenuShowType !== 2,\n      onVisibleChange: handlePopUpVisibleChange(3)\n    }, /*#__PURE__*/_react[\"default\"].createElement(\"li\", {\n      key: item.pageId,\n      \"data-tabkey\": item.pageId,\n      \"data-active\": item.isActive,\n      \"data-splitscreen-pageid\": item.pageId,\n      \"data-index\": index,\n      className: (0, _classnames5[\"default\"])([_HomePageVirtualTab[\"default\"].item], _defineProperty({}, _HomePageVirtualTab[\"default\"].active, item.isActive && (activeApp === null || activeApp === void 0 ? void 0 : activeApp.active))),\n      \"data-tab-drag-pageid\": item.pageId,\n      onClick: handleSelectTab(item),\n      onContextMenu: handleContextMenu(item)\n    }, /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n      className: (0, _classnames5[\"default\"])(_HomePageVirtualTab[\"default\"].content, _defineProperty({}, [_HomePageVirtualTab[\"default\"].contentHover], !virtualTabDragIng))\n    }, /*#__PURE__*/_react[\"default\"].createElement(_TextEllipsisWrap[\"default\"], null, /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n      className: (0, _classnames5[\"default\"])(_HomePageVirtualTab[\"default\"].text),\n      title: item.tabName\n    }, item.tabName))), /*#__PURE__*/_react[\"default\"].createElement(\"i\", {\n      className: (0, _classnames5[\"default\"])([_HomePageVirtualTab[\"default\"]['close-icon']], 'kdfont kdfont-toubudaohang_guanbi', _defineProperty({}, _HomePageVirtualTab[\"default\"]['close-icon-drag'], virtualTabDragIng)),\n      \"drop-close-icon\": \"false\",\n      onClick: handleCloseTab(item)\n    })));\n  }));\n}\nvar _default = exports[\"default\"] = TopVirtualTabDOM;\n\n//# sourceURL=webpack://bos-platform/./src/component/web/base/HomePageTab/component/TopVirtualTab.js?");

/***/ }),

/***/ "./src/component/web/base/HomePageTab/component/VirtualTabMoreBtn.js":
/*!***************************************************************************!*\
  !*** ./src/component/web/base/HomePageTab/component/VirtualTabMoreBtn.js ***!
  \***************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.array.map.js */ \"../../node_modules/core-js/modules/es.array.map.js\");\nvar _react = _interopRequireDefault(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _HomePageVirtualTab = _interopRequireDefault(__webpack_require__(/*! ../HomePageVirtualTab.less */ \"./src/component/web/base/HomePageTab/HomePageVirtualTab.less\"));\nvar _classnames3 = _interopRequireDefault(__webpack_require__(/*! classnames */ \"../../node_modules/classnames/index.js\"));\nvar _kdesign = __webpack_require__(/*! @kdcloudjs/kdesign */ \"webpack/sharing/consume/default/@kdcloudjs/kdesign/@kdcloudjs/kdesign\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction VirtualTabMoreBtn(props) {\n  var virtualTabs = props.virtualTabs,\n    activeApp = props.activeApp,\n    virtualTabsDragOverItem = props.virtualTabsDragOverItem,\n    virtualTabsDragStartItem = props.virtualTabsDragStartItem,\n    showContextMenuInfo = props.showContextMenuInfo,\n    moreMenuShowType = props.moreMenuShowType,\n    rightShow = props.rightShow,\n    toNextPrev = props.toNextPrev,\n    handleCloseAllPopUpPanel = props.handleCloseAllPopUpPanel,\n    getContextMenu = props.getContextMenu,\n    handlePopUpVisibleChange = props.handlePopUpVisibleChange,\n    handleVirtualTabsDragStart = props.handleVirtualTabsDragStart,\n    handleVirtualTabsDragOver = props.handleVirtualTabsDragOver,\n    handleVirtualTabsDragEnd = props.handleVirtualTabsDragEnd,\n    handleSelectTab = props.handleSelectTab,\n    handleContextMenu = props.handleContextMenu,\n    handleCloseTab = props.handleCloseTab;\n  // 更多虚拟菜单\n  var moreVirtualTabsMenu = /*#__PURE__*/_react[\"default\"].createElement(_kdesign.Dropdown.Menu, {\n    onMouseLeave: handleCloseAllPopUpPanel\n  }, /*#__PURE__*/_react[\"default\"].createElement(_react[\"default\"].Fragment, null, virtualTabs.map(function (item, index) {\n    var _showContextMenuInfo$;\n    var moreVirtualTabsMenuClass = (0, _classnames3[\"default\"])(_HomePageVirtualTab[\"default\"]['more-virtual-item'], 'kd-cq-dropdown-menu-item kd-dropdown-menu-item', _defineProperty(_defineProperty(_defineProperty({}, _HomePageVirtualTab[\"default\"].active, item.isActive && (activeApp === null || activeApp === void 0 ? void 0 : activeApp.active)), _HomePageVirtualTab[\"default\"]['virtual-tab-drag-bottom'], (virtualTabsDragOverItem === null || virtualTabsDragOverItem === void 0 ? void 0 : virtualTabsDragOverItem.pageId) === item.pageId && (virtualTabsDragStartItem === null || virtualTabsDragStartItem === void 0 ? void 0 : virtualTabsDragStartItem.index) < (virtualTabsDragOverItem === null || virtualTabsDragOverItem === void 0 ? void 0 : virtualTabsDragOverItem.index)), _HomePageVirtualTab[\"default\"]['virtual-tab-drag-top'], (virtualTabsDragOverItem === null || virtualTabsDragOverItem === void 0 ? void 0 : virtualTabsDragOverItem.pageId) === item.pageId && (virtualTabsDragStartItem === null || virtualTabsDragStartItem === void 0 ? void 0 : virtualTabsDragStartItem.index) > (virtualTabsDragOverItem === null || virtualTabsDragOverItem === void 0 ? void 0 : virtualTabsDragOverItem.index)));\n    return /*#__PURE__*/_react[\"default\"].createElement(_kdesign.Dropdown, {\n      popperStyle: {\n        animation: 'none'\n      },\n      menu: getContextMenu(item.pageId),\n      trigger: \"contextMenu\",\n      key: item.pageId,\n      visible: showContextMenuInfo.show && item.pageId === ((_showContextMenuInfo$ = showContextMenuInfo.tabInfo) === null || _showContextMenuInfo$ === void 0 ? void 0 : _showContextMenuInfo$.pageId) && moreMenuShowType === 2,\n      onVisibleChange: handlePopUpVisibleChange(3),\n      popperClassName: \"kd-cq-context-menu\"\n    }, /*#__PURE__*/_react[\"default\"].createElement(\"li\", {\n      draggable: true,\n      key: item.pageId,\n      onDragStart: handleVirtualTabsDragStart(item, index),\n      onDragOver: handleVirtualTabsDragOver(item, index),\n      onDragEnd: handleVirtualTabsDragEnd,\n      className: moreVirtualTabsMenuClass,\n      onClick: handleSelectTab(item, true),\n      onContextMenu: handleContextMenu(item)\n    }, /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n      className: _HomePageVirtualTab[\"default\"].text\n    }, item.tabName), /*#__PURE__*/_react[\"default\"].createElement(\"i\", {\n      className: (0, _classnames3[\"default\"])([_HomePageVirtualTab[\"default\"]['close-icon']], 'kdfont kdfont-shanchu-s'),\n      \"drop-close-icon\": \"true\",\n      onClick: handleCloseTab(item)\n    })));\n  })));\n  return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: _HomePageVirtualTab[\"default\"]['more-right-wrap']\n  }, rightShow ? /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n    className: _HomePageVirtualTab[\"default\"]['next-btn-wrap'],\n    onClick: toNextPrev('next')\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"i\", {\n    className: (0, _classnames3[\"default\"])('kdfont kdfont-houfan', _HomePageVirtualTab[\"default\"]['next-btn'])\n  })) : null, /*#__PURE__*/_react[\"default\"].createElement(_kdesign.Dropdown, {\n    placement: \"bottomLeft\",\n    menu: moreVirtualTabsMenu,\n    trigger: \"hover\",\n    visible: moreMenuShowType === 2,\n    onVisibleChange: handlePopUpVisibleChange(2),\n    popperClassName: (0, _classnames3[\"default\"])('kd-cq-dropdown kd-cq-dropdown-select-type')\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n    className: (0, _classnames3[\"default\"])(_HomePageVirtualTab[\"default\"]['more-wrap'], _defineProperty({}, _HomePageVirtualTab[\"default\"].expand, moreMenuShowType === 2))\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"i\", {\n    className: (0, _classnames3[\"default\"])(_HomePageVirtualTab[\"default\"]['more-icon'], 'kdfont kdfont-gengduoxiala')\n  }))));\n}\nvar _default = exports[\"default\"] = VirtualTabMoreBtn;\n\n//# sourceURL=webpack://bos-platform/./src/component/web/base/HomePageTab/component/VirtualTabMoreBtn.js?");

/***/ }),

/***/ "./src/component/web/base/HomePageTab/drag/listenVirtualTabDrag.js":
/*!*************************************************************************!*\
  !*** ./src/component/web/base/HomePageTab/drag/listenVirtualTabDrag.js ***!
  \*************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.array.from.js */ \"../../node_modules/core-js/modules/es.array.from.js\");\n__webpack_require__(/*! core-js/modules/es.array.is-array.js */ \"../../node_modules/core-js/modules/es.array.is-array.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.array.slice.js */ \"../../node_modules/core-js/modules/es.array.slice.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-string.js */ \"../../node_modules/core-js/modules/es.date.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.function.name.js */ \"../../node_modules/core-js/modules/es.function.name.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.regexp.exec.js */ \"../../node_modules/core-js/modules/es.regexp.exec.js\");\n__webpack_require__(/*! core-js/modules/es.regexp.to-string.js */ \"../../node_modules/core-js/modules/es.regexp.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = listenVirtualTabDrag;\nexports.findDataIndex = void 0;\n__webpack_require__(/*! core-js/modules/es.array.concat.js */ \"../../node_modules/core-js/modules/es.array.concat.js\");\n__webpack_require__(/*! core-js/modules/es.array.find-index.js */ \"../../node_modules/core-js/modules/es.array.find-index.js\");\n__webpack_require__(/*! core-js/modules/es.array.for-each.js */ \"../../node_modules/core-js/modules/es.array.for-each.js\");\n__webpack_require__(/*! core-js/modules/es.array.splice.js */ \"../../node_modules/core-js/modules/es.array.splice.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.keys.js */ \"../../node_modules/core-js/modules/es.object.keys.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.parse-int.js */ \"../../node_modules/core-js/modules/es.parse-int.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ \"../../node_modules/core-js/modules/web.dom-collections.for-each.js\");\n__webpack_require__(/*! core-js/modules/web.timers.js */ \"../../node_modules/core-js/modules/web.timers.js\");\nvar _elementFromPoint = _interopRequireDefault(__webpack_require__(/*! @/component/common/elementFromPoint */ \"./src/component/common/elementFromPoint.js\"));\nvar _HomePageVirtualTab = _interopRequireDefault(__webpack_require__(/*! ../HomePageVirtualTab.less */ \"./src/component/web/base/HomePageTab/HomePageVirtualTab.less\"));\nvar _symbolConst = __webpack_require__(/*! @/constant/symbolConst */ \"./src/constant/symbolConst.js\");\nvar _GlobalDataCacher = __webpack_require__(/*! @/model/GlobalDataCacher */ \"./src/model/GlobalDataCacher.js\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\n// 拖拽排序数据\nvar dragData = [];\n// pageId标识\nvar DATA_TAB_DRAG_PAGEID = 'data-tab-drag-pageid';\n// 元素index标识\nvar DATA_TAB_DRAG_INDEX = 'data-tab-drag-index';\n// 左移\nvar LEFT = 'left';\n// 右移\nvar RIGHT = 'right';\n// 是否开始拖拽\nvar draging = false;\n// 开始拖拽元素\nvar startDrop = '';\n// 拖拽元素\nvar moveDrop = '';\n// 鼠标位置\nvar client = {\n  x: '',\n  y: ''\n};\n// 超出区域不在执行拖拽排序\nvar isOverArea = false;\n// 移动方向\nvar constDirection = {\n  0: 'left',\n  1: 'right'\n};\n// 插入位置\nvar insert = {};\n// 初始pageId\nvar initPageId = '';\n// 监听分屏开启关闭移除函数\nvar removeSetSplitListenVirtualTabDrag;\n// 分屏是否开启\nvar splitScreenVisible = false;\nfunction listenVirtualTabDrag(pageId, data) {\n  if (!pageId) return;\n  dragData = data;\n  initPageId = pageId;\n  var parentNode = '';\n  // 初始化可拖拽页签data-tab-drag-pageid\n  var tabNode = document.querySelector(\"[\".concat(DATA_TAB_DRAG_PAGEID, \"='\").concat(pageId, \"']\"));\n  parentNode = tabNode === null || tabNode === void 0 ? void 0 : tabNode.parentElement;\n  if (!parentNode) return;\n  // 在父级添加经过事件，防止全局事件被阻止冒泡，功能起码还能用\n  parentNode.addEventListener('dragover', handleDragOver);\n  parentNode.children.forEach(function (item, index) {\n    initMoveEvent(item, index);\n  });\n  return removeEvent(parentNode);\n}\n\n// 添加移动事件\nvar initMoveEvent = function initMoveEvent(item, index) {\n  item.draggable = true;\n  item.addEventListener('dragstart', handleDragStart);\n  // 添加index标识\n  item.setAttribute(DATA_TAB_DRAG_INDEX, index);\n};\n\n// 卸载元素监听事件\nvar removeEvent = function removeEvent(parentNode) {\n  return function () {\n    var _parentNode$children;\n    if (!parentNode) return;\n    // 卸载父元素监听事件\n    parentNode.removeEventListener('dragover', handleDragOver);\n    // 卸载子元素监听事件\n    parentNode === null || parentNode === void 0 || (_parentNode$children = parentNode.children) === null || _parentNode$children === void 0 || _parentNode$children.forEach(function (item) {\n      item.removeEventListener('dragstart', handleDragStart);\n    });\n  };\n};\n\n// 注册全局事件\nvar gloabAddListener = function gloabAddListener() {\n  var global = document.body;\n  global.addEventListener('dragover', handleDragOver);\n  global.addEventListener('dragend', handleDragend);\n  global.addEventListener('selectstart', handleSelectStart);\n};\n\n// 注销全局事件\nvar gloabRemoveEventListener = function gloabRemoveEventListener() {\n  var global = document.body;\n  global.removeEventListener('dragover', handleDragOver);\n  global.removeEventListener('dragend', handleDragend);\n  global.removeEventListener('selectstart', handleSelectStart);\n};\nvar initDropStyle = function initDropStyle(e, style) {\n  for (var key in style) {\n    if (Object.hasOwnProperty.call(style, key)) {\n      e.style[key] = style[key];\n    }\n  }\n};\n\n// 创建拖拽元素 由于直接使用拖拽生成的图像是半透明不符合ui要求，改为创建元素跟随鼠标位置\nvar creactDrop = function creactDrop(e) {\n  var cloneDrop = e.cloneNode(true);\n  var _e$getBoundingClientR = e.getBoundingClientRect(),\n    left = _e$getBoundingClientR.left,\n    top = _e$getBoundingClientR.top;\n  // 移除x号\n  var closeIcon = cloneDrop.querySelector('[drop-close-icon=false]');\n  cloneDrop.removeChild(closeIcon);\n  cloneDrop.classList.add(_HomePageVirtualTab[\"default\"]['virtual-tab-moveDrop'], 'kd-cq-tabs-virtual-tab-drop-item');\n  var style = {\n    position: 'fixed',\n    left: left + 'px',\n    top: top + 'px',\n    zIndex: 99999,\n    cursor: 'pointer',\n    opacity: 1\n  };\n  // 分屏开启时，加入穿透拖拽元素样式，保证触发分屏\n  if (splitScreenVisible) {\n    style.pointerEvents = 'none';\n  }\n  initDropStyle(cloneDrop, style);\n  document.body.appendChild(cloneDrop);\n  e.style.visibility = 'hidden';\n  draging = true;\n  moveDrop = cloneDrop;\n};\n\n// 拖拽元素移动位置\nvar moveDropPosition = function moveDropPosition(startDrop, moveObj, nowY, nowLeft, moveX) {\n  var _startDrop$getBoundin = startDrop.getBoundingClientRect(),\n    startDropTop = _startDrop$getBoundin.top,\n    startDropHeight = _startDrop$getBoundin.height;\n  if (nowY - startDropTop > 90) {\n    moveObj.top = nowY - startDropHeight / 2 + 'px';\n    isOverArea = true;\n  } else if (moveObj.top !== startDropTop) {\n    // 移回去出现吸附效果\n    moveObj.top = startDropTop + 'px';\n    isOverArea = false;\n  }\n  moveObj.left = nowLeft + moveX + 'px';\n  return moveObj;\n};\n\n// 获取目标元素\nvar getTarget = function getTarget(x, y) {\n  var _target$parentElement;\n  var target = (0, _elementFromPoint[\"default\"])(x, y);\n  if (target !== null && target !== void 0 && target.getAttribute(DATA_TAB_DRAG_INDEX)) {\n    return target;\n  }\n  if (target !== null && target !== void 0 && (_target$parentElement = target.parentElement) !== null && _target$parentElement !== void 0 && _target$parentElement.getAttribute(DATA_TAB_DRAG_INDEX)) {\n    return target.parentElement;\n  }\n  return false;\n};\n\n// 检测目标位置 0向左移， 1向右移\nvar findMoveTarget = function findMoveTarget(moveDrop, moveDirection) {\n  // elementFrompoint\n  var _moveDrop$getBounding = moveDrop.getBoundingClientRect(),\n    left = _moveDrop$getBounding.left,\n    right = _moveDrop$getBounding.right,\n    top = _moveDrop$getBounding.top;\n  var x = moveDirection === RIGHT ? right : left;\n  var y = top + top / 2;\n  // 先隐藏鼠标下面的拖拽元素\n  moveDrop.style.display = 'none';\n  // 获取目标元素\n  var target = getTarget(x, y);\n  // 恢复拖拽元素\n  moveDrop.style.display = '';\n  return target;\n};\n\n// 检测是否覆盖40%\nvar isMovePostion = function isMovePostion(moveDropDOMRect, dragDOMRect, moveDirection) {\n  if (!moveDropDOMRect || !dragDOMRect) return false;\n  var coverageWidth;\n  // 向右移动，计算移动元素的right - drag元素的left/drag元素的width >=40%\n  if (moveDirection === RIGHT && moveDropDOMRect[RIGHT] - dragDOMRect[LEFT] < dragDOMRect.width) {\n    coverageWidth = (moveDropDOMRect[RIGHT] - dragDOMRect[LEFT]) / dragDOMRect.width;\n    return coverageWidth >= 0.3;\n  } else if (moveDirection === LEFT && dragDOMRect[RIGHT] - moveDropDOMRect[LEFT] < dragDOMRect.width) {\n    // 向左移动\n    coverageWidth = (dragDOMRect[RIGHT] - moveDropDOMRect[LEFT]) / dragDOMRect.width;\n    return coverageWidth >= 0.5;\n  }\n  return false;\n};\n\n// 渲染元素顺序\nvar renderOrder = function renderOrder(insert) {\n  var _startDrop;\n  if (!Object.keys(insert).length) return;\n  var moveDirection = insert.moveDirection,\n    insertIndex = insert.index;\n  var _startDrop$getBoundin2 = startDrop.getBoundingClientRect(),\n    width = _startDrop$getBoundin2.width;\n  var startIndex = startDrop.getAttribute(DATA_TAB_DRAG_INDEX);\n  var parentNode = (_startDrop = startDrop) === null || _startDrop === void 0 ? void 0 : _startDrop.parentElement;\n  if (!parentNode) return;\n  parentNode.children.forEach(function (item, index) {\n    var transform = 0;\n    if (index >= startIndex) {\n      transform -= width;\n    }\n    // 向左移\n    if (moveDirection === LEFT && index >= insertIndex) {\n      transform += width;\n    }\n    // 向右移\n    if (moveDirection === RIGHT && index > insertIndex) {\n      transform += width;\n    }\n    item.style.transform = \"translate(\".concat(transform, \"px, 0px)\");\n    item.style.transition = 'transform 0.2s cubic-bezier(0.2, 0, 0, 1)';\n  });\n};\n\n// 移除元素设置的css和标识\nvar resetItems = function resetItems() {\n  var _parentNode$children2;\n  var parentNode = startDrop.parentElement;\n  parentNode === null || parentNode === void 0 || (_parentNode$children2 = parentNode.children) === null || _parentNode$children2 === void 0 || _parentNode$children2.forEach(function (item, index) {\n    // 移除设置的样式\n    item.style.transform = '';\n    item.style.transition = '';\n    // 移除index标识\n    item.removeAttribute(DATA_TAB_DRAG_INDEX);\n  });\n};\nvar findDataIndex = exports.findDataIndex = function findDataIndex(data, id, idKey) {\n  return data.findIndex(function (item) {\n    return item[idKey] === id;\n  });\n};\n\n// 拖拽结束改变数据\nvar dragDataChange = function dragDataChange(insert) {\n  // 超出区域返回原数据\n  if (isOverArea) return dragData;\n  var newDragData = _toConsumableArray(dragData);\n  var startIndex = Number(startDrop.getAttribute(DATA_TAB_DRAG_INDEX));\n  if (Object.keys(insert).length) {\n    var insertAddIndex = insert.moveDirection === RIGHT ? 1 : 0;\n    var insertItem = newDragData.splice(startIndex, 1);\n    var insertIndex = findDataIndex(newDragData, insert.id, 'pageId');\n    newDragData.splice.apply(newDragData, [insertIndex + insertAddIndex, 0].concat(_toConsumableArray(insertItem)));\n  }\n  return newDragData;\n};\n\n// 插入排序\nvar insertOrder = function insertOrder(moveDrop, moveDirection) {\n  // 获取目标元素\n  var moveTarget = findMoveTarget(moveDrop, moveDirection);\n  if (!moveTarget) return;\n  // 判断是否符合移动条件\n  var isMove = isMovePostion(moveDrop === null || moveDrop === void 0 ? void 0 : moveDrop.getBoundingClientRect(), moveTarget === null || moveTarget === void 0 ? void 0 : moveTarget.getBoundingClientRect(), moveDirection);\n  // // 符合条件记录元素index\n  if (isMove) {\n    insert.id = moveTarget.getAttribute(DATA_TAB_DRAG_PAGEID);\n    insert.index = Number(moveTarget.getAttribute(DATA_TAB_DRAG_INDEX));\n    insert.moveDirection = moveDirection;\n    renderOrder(insert);\n  }\n};\n\n// 拖拽距离超过10px时，才触发拖拽\nvar isDragstart = function isDragstart(preClient, newClient) {\n  var moveX = Math.abs(preClient.x - newClient.x);\n  var moveY = Math.abs(preClient.y - newClient.y);\n  if (moveX > 10 || moveY > 10) {\n    return true;\n  } else {\n    return false;\n  }\n};\n\n// 拖拽过程中，禁止文字选中\nvar handleSelectStart = function handleSelectStart(e) {\n  e.preventDefault();\n};\n\n// 拖拽开始事件\nvar handleDragStart = function handleDragStart(e) {\n  client = {\n    x: e.clientX,\n    y: e.clientY\n  };\n  startDrop = e.currentTarget;\n  e.currentTarget.style.opacity = 0;\n  // 设置拖动效果为move\n  e.dataTransfer && (e.dataTransfer.effectAllowed = 'move');\n  // 注册全局监听事件\n  gloabAddListener();\n};\n\n// 拖拽移动事件\nvar handleDragOver = function handleDragOver(e) {\n  e.preventDefault();\n  e.dataTransfer && (e.dataTransfer.dropEffect = 'move');\n  if (!draging) {\n    var newClient = {\n      x: e.clientX,\n      y: e.clientY\n    };\n    startDrop.style.opacity = 1;\n    // 产品要求开始拖拽时需要防抖，鼠标移动距离大于10px时，才开始移动\n    var isStartMove = isDragstart(client, newClient);\n    if (isStartMove) {\n      return creactDrop(startDrop);\n    }\n    return false;\n  }\n  // 已经创建了拖拽元素，直接移动位置\n  var nowX = e.clientX;\n  var nowY = e.clientY;\n  var nowLeft = parseInt(moveDrop.style.left || 0);\n  var moveX = nowX - client.x;\n  // 鼠标未移动不更新位置，避免页面出现闪烁的情况\n  if (moveX === 0) return;\n  // 1向右移动，0向左移动\n  var moveDirection = moveX > 0 ? RIGHT : LEFT;\n  var moveObj = {};\n  moveObj = moveDropPosition(startDrop, moveObj, nowY, nowLeft, moveX);\n  moveObj.left && (moveDrop.style.left = moveObj.left);\n  moveObj.top && (moveDrop.style.top = moveObj.top);\n  client = {\n    x: e.clientX,\n    y: e.clientY\n  };\n  // 没有超出区域，执行拖拽排序\n  if (!isOverArea) {\n    // 将鼠标经过事件传递出去，允许外层做其他控制\n    (0, _GlobalDataCacher.setData)(_symbolConst.KEY_DRAGOVER_TAB, {\n      moveDrop: moveDrop,\n      moveDirection: moveDirection\n    });\n    // 插入排序\n    insertOrder(moveDrop, moveDirection);\n  }\n};\n\n// 鼠标松开\nvar handleDragend = function handleDragend() {\n  // 注销监听\n  gloabRemoveEventListener();\n  // 改变数据\n  var newDragData = dragDataChange(insert);\n  // 将数据传递到外层\n  (0, _GlobalDataCacher.setData)(_symbolConst.KEY_DRAGEND_TAB, newDragData);\n  // 去除后面添加的内容\n  resetItems();\n  // 删除拖拽元素\n  moveDrop && document.body.removeChild(moveDrop);\n  moveDrop = '';\n  // 拖拽结束\n  draging = false;\n  // 恢复样式\n  startDrop && (startDrop.style.visibility = '');\n  startDrop && (startDrop.style.opacity = '');\n  startDrop = '';\n  insert = {};\n};\n\n// 分屏开启关闭都重新赋值，避免分屏将原来的值覆盖\nvar removeSetSplitScreenListener = (0, _GlobalDataCacher.addDataChangeListener)(_symbolConst.KEY_SPLIT_SCREEN_VISIBLE, function (data) {\n  splitScreenVisible = data.visible;\n  setTimeout(function () {\n    // 先移除监听\n    if (removeSetSplitListenVirtualTabDrag) {\n      removeSetSplitListenVirtualTabDrag();\n    }\n    removeSetSplitListenVirtualTabDrag = listenVirtualTabDrag(initPageId, dragData);\n  }, 100);\n});\n\n// 检测位置\nvar removeDragLinstener = (0, _GlobalDataCacher.addDataChangeListener)(_symbolConst.KEY_MOVE_DRAG, function (_ref) {\n  var moveDrop = _ref.moveDrop,\n    moveDirection = _ref.moveDirection;\n  moveDirection === RIGHT ? insertOrder(moveDrop, RIGHT) : insertOrder(moveDrop, LEFT);\n});\nwindow.onunload = function () {\n  removeSetSplitScreenListener && removeSetSplitScreenListener();\n  removeDragLinstener && removeDragLinstener();\n};\n\n//# sourceURL=webpack://bos-platform/./src/component/web/base/HomePageTab/drag/listenVirtualTabDrag.js?");

/***/ }),

/***/ "./src/component/web/base/ToolbarMore.jsx":
/*!************************************************!*\
  !*** ./src/component/web/base/ToolbarMore.jsx ***!
  \************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.create.js */ \"../../node_modules/core-js/modules/es.object.create.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.get-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.reflect.construct.js */ \"../../node_modules/core-js/modules/es.reflect.construct.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.DropDownWithCheck = DropDownWithCheck;\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.array.concat.js */ \"../../node_modules/core-js/modules/es.array.concat.js\");\n__webpack_require__(/*! core-js/modules/es.array.filter.js */ \"../../node_modules/core-js/modules/es.array.filter.js\");\n__webpack_require__(/*! core-js/modules/es.array.index-of.js */ \"../../node_modules/core-js/modules/es.array.index-of.js\");\n__webpack_require__(/*! core-js/modules/es.array.map.js */ \"../../node_modules/core-js/modules/es.array.map.js\");\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\n__webpack_require__(/*! core-js/modules/es.function.name.js */ \"../../node_modules/core-js/modules/es.function.name.js\");\n__webpack_require__(/*! core-js/modules/es.object.set-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.set-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\nvar _react = _interopRequireWildcard(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _reactDom = _interopRequireDefault(__webpack_require__(/*! react-dom */ \"webpack/sharing/consume/default/react-dom/react-dom?418d\"));\nvar _classnames = _interopRequireDefault(__webpack_require__(/*! classnames */ \"../../node_modules/classnames/index.js\"));\nvar _propTypes = _interopRequireDefault(__webpack_require__(/*! prop-types */ \"../../node_modules/prop-types/index.js\"));\nvar _componentutil = __webpack_require__(/*! ../../../util/componentutil */ \"./src/util/componentutil.js\");\nvar _Switch = _interopRequireDefault(__webpack_require__(/*! ./Switch */ \"./src/component/web/base/Switch.js\"));\nvar _intlApi = __webpack_require__(/*! ../../../i18n/intlApi */ \"./src/i18n/intlApi.js\");\nvar _commonAnimation = _interopRequireDefault(__webpack_require__(/*! ../../common/commonAnimation.less */ \"./src/component/common/commonAnimation.less\"));\nvar _keyCode = __webpack_require__(/*! @/constant/keyCode */ \"./src/constant/keyCode.js\");\nvar _lodash = _interopRequireDefault(__webpack_require__(/*! lodash */ \"../../node_modules/lodash/lodash.js\"));\nvar _kdesign = __webpack_require__(/*! @kdcloudjs/kdesign */ \"webpack/sharing/consume/default/@kdcloudjs/kdesign/@kdcloudjs/kdesign\");\nvar _ToolbarMore2 = _interopRequireDefault(__webpack_require__(/*! ./ToolbarMore.less */ \"./src/component/web/base/ToolbarMore.less\"));\nvar _fieldConst = __webpack_require__(/*! ./../../../constant/fieldConst */ \"./src/constant/fieldConst.js\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nvar ToolbarMore = /*#__PURE__*/function (_Component) {\n  _inherits(ToolbarMore, _Component);\n  function ToolbarMore(props) {\n    var _this;\n    _classCallCheck(this, ToolbarMore);\n    _this = _callSuper(this, ToolbarMore, [props]);\n    _this.getPanel = function () {\n      var listWithConfirm = _this.state.listWithConfirm.map(function (item) {\n        return item;\n      });\n      var listWithCustom = _this.state.listWithCustom;\n      var style = {};\n      if (_this.parentDom) {\n        var rect = _this.parentDom.getBoundingClientRect();\n        style.maxWidth = _fieldConst.TOOLBAR_ITEM_MAX_WIDTH;\n        style.minWidth = rect.width;\n      }\n      var Dom = /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        className: (0, _classnames[\"default\"])('kd-cq-dropdown kd-cq-dropdown-select-type', _ToolbarMore2[\"default\"]['dropdown-menu-wrapper'], _commonAnimation[\"default\"]['panel-drop-down-animation']),\n        ref: function ref(dom) {\n          _this.attachElement = dom;\n        }\n      }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        style: style,\n        className: _ToolbarMore2[\"default\"]['dropdown-menu']\n      }, !_this.state.isCustomModel ? /*#__PURE__*/_react[\"default\"].createElement(Dropdown, {\n        pageId: _this.pageId,\n        dropDownList: listWithCustom,\n        dropDownItemClick: _this.dropDownItemClick\n      }) : /*#__PURE__*/_react[\"default\"].createElement(DropDownWithCheck, {\n        dropDownList: listWithConfirm,\n        checkboxChange: _this.checkboxChange.bind(_assertThisInitialized(_this)),\n        dropDownItemClick: _this.dropDownItemClick,\n        userLocal: _this.props.model.getUserLocale(),\n        model: _this.props.model\n      })));\n      return Dom;\n    };\n    // “更多”支持切换点击\n    _this.judgeStatus = function () {\n      if (_this.state.hide) {\n        _this.openSelectPanel();\n      } else {\n        _this.closeSelectPanel();\n      }\n    };\n    _this.dropDownItemClick = function (item) {\n      var _this$props = _this.props,\n        onDropDownClick = _this$props.onDropDownClick,\n        postDataToUIState = _this$props.postDataToUIState;\n      if (item.id === '__custom__') {\n        // 切换到自定义模式\n        _this.setState({\n          isCustomModel: true,\n          hide: false\n        }, function () {\n          // this.renderSelectPanel()\n          _this.computePanelPosition();\n        });\n      } else if (item.id === '__confirm__') {\n        // 确定\n        _this.setState({\n          isCustomModel: false,\n          hide: true\n        }, function () {\n          _this.destroySelectPanel();\n          // console.log('确定点击触发更新按钮视图')\n          // console.log('传输的data', data)\n          postDataToUIState && postDataToUIState();\n        });\n      } else {\n        // console.log('普通点击触发操作代码')\n        _this.setState({\n          hide: true\n        });\n        onDropDownClick && onDropDownClick(item.id, item.opk);\n        _this.destroySelectPanel();\n      }\n    };\n    _this.state = {\n      hide: true,\n      // 菜单默认隐藏\n      isCustomModel: false,\n      // 是否进入自定义模式\n      listWithConfirm: function () {\n        var listWithConfirm = props.dropDownList.filter(function (it) {\n          return !it.isNotMod;\n        });\n        listWithConfirm.push({\n          id: '__confirm__',\n          name: (0, _intlApi.getLangMsg)({\n            key: 'toolbar.complete'\n          })\n        });\n        return listWithConfirm;\n      }(),\n      listWithCustom: function () {\n        var listWithCustom = props.dropDownList.filter(function (item) {\n          return !item.isChecked;\n        });\n        return listWithCustom;\n      }()\n    };\n    // this.itemsLens = Object.assign({}, props.itemsLens)\n    _this.pageId = props.model.pageId;\n    _this.onClickOutSide = _this.onClickOutSide.bind(_assertThisInitialized(_this));\n    _this.closeSelectPanel = _this.closeSelectPanel.bind(_assertThisInitialized(_this));\n    _this.keyDownHandler = _this.keyDownHandler.bind(_assertThisInitialized(_this));\n    _this.resizeHandler = _lodash[\"default\"].debounce(_this.closeSelectPanel, 300, {\n      leading: true,\n      trailing: true\n    });\n    return _this;\n  }\n  _createClass(ToolbarMore, [{\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(props) {\n      // if (props.isMove !== this.props.isMove) {\n      //   this.computePanelPosition()\n      // }\n      // this.itemsLens = Object.assign({}, props.itemsLens)\n      var listWithConfirm = props.dropDownList.filter(function (it) {\n        return !it.isNotMod;\n      });\n      listWithConfirm.push({\n        id: '__confirm__',\n        name: (0, _intlApi.getLangMsg)({\n          key: 'toolbar.complete'\n        })\n      });\n      var listWithCustom = props.dropDownList.filter(function (item) {\n        return !item.isChecked;\n      });\n      listWithCustom.push({\n        id: '__custom__',\n        name: (0, _intlApi.getLangMsg)({\n          key: 'toolbar.custom'\n        })\n      });\n      this.setState({\n        listWithConfirm: listWithConfirm,\n        listWithCustom: listWithCustom\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n      // const iconClass = classNames({\n      //   [styles['icon-r']]: true,\n      //   'kdfont kdfont-xiajiantou': this.state.hide,\n      //   'kdfont kdfont-shangjiantou': !this.state.hide\n      // })\n      var containerClass = (0, _classnames[\"default\"])('kd-cq-control kd-cq-btn kd-btn-bg', _defineProperty(_defineProperty(_defineProperty(_defineProperty({}, _ToolbarMore2[\"default\"]['dropdown-container'], true), _ToolbarMore2[\"default\"]['more-btn'], true), 'toolbar-btn-without-theme', true), 'toolbar-dropdown-container', !this.state.hide));\n      var Panel = this.getPanel();\n      var style = this.props.style;\n      var _ref = style || {},\n        color = _ref.color;\n      return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        style: style,\n        className: containerClass,\n        ref: function ref(dom) {\n          _this2.parentDom = dom;\n        },\n        onClick: function onClick() {\n          _this2.judgeStatus();\n        }\n      }, /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n        className: _ToolbarMore2[\"default\"].textspan,\n        style: {\n          color: color\n        }\n      }, (0, _intlApi.getLangMsg)({\n        key: 'toolbar.more'\n      })), /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n        style: {\n          color: color\n        },\n        className: (0, _classnames[\"default\"])('kdfont kdfont-xiala', _ToolbarMore2[\"default\"]['arrow-down'], _commonAnimation[\"default\"]['arrow-move-in-animation'], _defineProperty({}, _commonAnimation[\"default\"]['arrow-move-out-animation'], !this.state.hide))\n      }), !this.state.hide && /*#__PURE__*/_reactDom[\"default\"].createPortal(Panel, document.body));\n    }\n  }, {\n    key: \"bindEventOfSelectPanel\",\n    value:\n    // 绑定弹出面板相关event\n    function bindEventOfSelectPanel() {\n      document.addEventListener('click', this.onClickOutSide);\n      document.addEventListener('scroll', this.onClickOutSide, true);\n      document.addEventListener('keydown', this.keyDownHandler, true);\n      window.addEventListener('resize', this.resizeHandler);\n    }\n\n    // 解除event绑定\n  }, {\n    key: \"unBindEventOfSelectPanel\",\n    value: function unBindEventOfSelectPanel() {\n      document.removeEventListener('click', this.onClickOutSide);\n      document.removeEventListener('scroll', this.onClickOutSide, true);\n      document.removeEventListener('keydown', this.keyDownHandler, true);\n      window.removeEventListener('resize', this.resizeHandler);\n    }\n  }, {\n    key: \"openSelectPanel\",\n    value: function openSelectPanel() {\n      var _this3 = this;\n      this.setState({\n        hide: false,\n        isCustomModel: false\n      }, function () {\n        _this3.computePanelPosition();\n        _this3.bindEventOfSelectPanel();\n      });\n    }\n  }, {\n    key: \"closeSelectPanel\",\n    value: function closeSelectPanel() {\n      // 解决bug,问题点：setState回调在操作其他组件时候会进不去的问题\n      this.setState({\n        hide: true,\n        isCustomModel: false\n      });\n      this.unBindEventOfSelectPanel();\n      this.destroySelectPanel();\n    }\n\n    // 判断鼠标区域是否已经超出菜单\n  }, {\n    key: \"onClickOutSide\",\n    value: function onClickOutSide(e) {\n      if (this.state.hide && !this.attachElement) return;\n      var target = e.target;\n      while (target) {\n        try {\n          if (target === this.attachElement || target === _reactDom[\"default\"].findDOMNode(this) || target.className && target.className.indexOf('bottom') > -1 || target.className && target.className.indexOf('toolbars-menus-list') > -1) {\n            return;\n          }\n        } catch (e) {\n          console.warn(e);\n        }\n        target = target.parentNode;\n      }\n      this.closeSelectPanel();\n      this.props.renewOldItems && this.props.renewOldItems();\n    }\n  }, {\n    key: \"keyDownHandler\",\n    value: function keyDownHandler(e) {\n      switch (e.keyCode) {\n        case _keyCode.KEYS.ESC:\n          if (this.state.hide && !this.attachElement) return;\n          e.stopPropagation();\n          this.closeSelectPanel();\n          this.props.renewOldItems && this.props.renewOldItems();\n          break;\n        default:\n          break;\n      }\n    }\n  }, {\n    key: \"checkboxChange\",\n    value: function checkboxChange(isChecked, index) {\n      var list = this.state.listWithConfirm.map(function (item) {\n        return item;\n      });\n      this.props.modifyBtsStatus && this.props.modifyBtsStatus(list[index], !isChecked);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      this.computePanelPosition();\n    }\n\n    // 计算位置\n  }, {\n    key: \"computePanelPosition\",\n    value: function computePanelPosition() {\n      var input = _reactDom[\"default\"].findDOMNode(this);\n      var div = this.attachElement;\n      if (!input || !div) return;\n      var backStyle = (0, _componentutil.adaptivePopupWindow)(this.parentDom, this.attachElement, 0); // parentDom, popupDom ,topOffset\n      var top = backStyle.top,\n        left = backStyle.left;\n      div.style.cssText += \";display: block;top: \".concat(top, \";left: \").concat(left, \";\");\n    }\n\n    // 回收下拉菜单\n  }, {\n    key: \"destroySelectPanel\",\n    value: function destroySelectPanel() {\n      if (this.attachElement) {\n        this.attachElement = null;\n      }\n    }\n  }]);\n  return ToolbarMore;\n}(_react.Component); //  一般下拉菜单模板\nfunction Dropdown(props) {\n  var dropDownList = props.dropDownList;\n  var listItems = dropDownList.map(function (item, index) {\n    var style = {};\n    if (!item.isSonItem || index !== 0 && dropDownList[index - 1].item.get('groupId') !== item.item.get('groupId')) {\n      style.borderTop = '1px solid #E5E5E5';\n    }\n    if (!item.isClick && item.id !== '__custom__' || item.locked) {\n      style.color = 'rgba(0,0,0,0.3)';\n      style.cursor = 'default';\n      // style.fontSize =\n    }\n    if (item.id === '__custom__') {\n      return null;\n    }\n    return /*#__PURE__*/_react[\"default\"].createElement(\"li\", {\n      key: item.id + 'baritem',\n      className: \"kd-cq-dropdown-menu-item kd-hover\",\n      style: style,\n      onClick: function onClick(e) {\n        e.stopPropagation();\n        if (!item.isClick && item.id !== '__custom__' || item.locked) return;\n        props.dropDownItemClick(item, index);\n      },\n      \"data-opkkey\": props.pageId + '_' + item.opk,\n      title: item.id === '__custom__' ? null : item.name\n    }, item.id === '__custom__' ? null : item.name);\n  });\n  var className = (0, _classnames[\"default\"])(_defineProperty(_defineProperty({\n    'toolbars-menus-list': true\n  }, _ToolbarMore2[\"default\"]['toolbars-menus-list'], true), props.className, !!props.className));\n  var btClassName = (0, _classnames[\"default\"])('kd-cq-dropdown-menu-item', _defineProperty(_defineProperty({\n    bottom: true\n  }, _ToolbarMore2[\"default\"].bottom, true), _ToolbarMore2[\"default\"].border_top, dropDownList.length > 1));\n  var index = dropDownList.length - 1;\n  var item = dropDownList[index];\n  return /*#__PURE__*/_react[\"default\"].createElement(\"div\", null, /*#__PURE__*/_react[\"default\"].createElement(\"ul\", {\n    style: {\n      maxWidth: '600px'\n    },\n    className: className\n  }, listItems), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: btClassName,\n    onClick: function onClick(e) {\n      e.stopPropagation();\n      props.dropDownItemClick(item, index);\n    }\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n    className: (0, _classnames[\"default\"])(_ToolbarMore2[\"default\"]['li-container'])\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n    className: \"kdfont kdfont-shezhixian\"\n  }), \" \", /*#__PURE__*/_react[\"default\"].createElement(\"span\", null, (0, _intlApi.getLangMsg)({\n    key: 'toolbar.custom'\n  })), \" \")));\n}\n\n// 带选项的下拉菜单模板\nfunction DropDownWithCheck(props) {\n  var dropDownList = props.dropDownList;\n  var tips = /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: (0, _classnames[\"default\"])('kd-cq-tooltip', _ToolbarMore2[\"default\"].tooltips)\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"h4\", null, (0, _intlApi.getLangMsg)('toolbar.tipsTitle')), /*#__PURE__*/_react[\"default\"].createElement(\"p\", null, \"1. \", (0, _intlApi.getLangMsg)('toolbar.tipsContent1')), /*#__PURE__*/_react[\"default\"].createElement(\"p\", null, \"2. \", (0, _intlApi.getLangMsg)('toolbar.tipsContent2')), /*#__PURE__*/_react[\"default\"].createElement(\"p\", null, \"3. \", (0, _intlApi.getLangMsg)('toolbar.tipsContent3')), /*#__PURE__*/_react[\"default\"].createElement(\"p\", null, \"4. \", (0, _intlApi.getLangMsg)('toolbar.tipsContent4')));\n  var listItems = dropDownList.map(function (item, index) {\n    // const spanClassName = classNames({\n    //   kdfont: true,\n    //   'kdfont-fuxuankuangweixuanzhong_fang': !item.isChecked,\n    //   'kdfont-fuxuankuangxuanzhong_fang': item.isChecked,\n    //   'theme-fc': item.isChecked\n    //   // [styles['son-padding-left']]: item.isSonItem\n    // })\n    var style = {};\n    style.paddingRight = '18px';\n    !item.isSonItem && (style.borderTop = '1px solid #E5E5E5');\n    if (item.id === 'title' || item.id === '__confirm__') {\n      return null;\n    }\n    return /*#__PURE__*/_react[\"default\"].createElement(\"li\", {\n      key: item.id,\n      className: (0, _classnames[\"default\"])(_defineProperty({\n        'kd-cq-dropdown-menu-item kd-hover': true\n      }, _ToolbarMore2[\"default\"].check_li, true)),\n      style: style,\n      onClick: function onClick(e) {\n        e.stopPropagation();\n        item.id !== '__confirm__' ? props.checkboxChange(!item.isChecked, index) : props.dropDownItemClick(item, index);\n      }\n    }, /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n      title: item.name,\n      style: {\n        width: '96px'\n      },\n      className: (0, _classnames[\"default\"])('kd-cq-control kd-cq-btn', _defineProperty(_defineProperty(_defineProperty({}, _ToolbarMore2[\"default\"].name_span, true), _ToolbarMore2[\"default\"].confirm, item.id === '__confirm__'), 'theme-bg', item.id === '__confirm__'))\n    }, item.name), /*#__PURE__*/_react[\"default\"].createElement(_Switch[\"default\"], {\n      size: 3,\n      isOpenTheme: true,\n      value: item.isChecked,\n      onClick: function onClick(ev) {\n        ev.stopPropagation();\n        props.checkboxChange(!item.isChecked, index);\n      }\n    }));\n  });\n  var className = (0, _classnames[\"default\"])(_defineProperty(_defineProperty({\n    'toolbars-menus-list': true\n  }, _ToolbarMore2[\"default\"]['toolbars-menus-list'], true), _ToolbarMore2[\"default\"]['drop-down-check-list'], true));\n  var index = dropDownList.length - 1;\n  var item = dropDownList[index];\n  return /*#__PURE__*/_react[\"default\"].createElement(\"div\", null, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: (0, _classnames[\"default\"])(_defineProperty({\n      'kd-hover': true\n    }, _ToolbarMore2[\"default\"].top_footer_div, true)),\n    style: {\n      background: 'rgba(230,232,238,1)'\n    }\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n    className: (0, _classnames[\"default\"])('kd-cq-dropdown-menu-item', _ToolbarMore2[\"default\"].custom_title, _ToolbarMore2[\"default\"].custom_title_left)\n  }, (0, _intlApi.getLangMsg)({\n    key: 'toolbar.name'\n  }), /*#__PURE__*/_react[\"default\"].createElement(_kdesign.Tooltip, {\n    tip: tips,\n    mouseLeaveDelay: 0.3\n  }, /*#__PURE__*/_react[\"default\"].createElement(_kdesign.Icon, {\n    type: \"tips\",\n    className: _ToolbarMore2[\"default\"].titleIcon\n  }))), /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n    style: {\n      textAlign: 'right'\n    },\n    className: (0, _classnames[\"default\"])('kd-cq-dropdown-menu-item', _ToolbarMore2[\"default\"].custom_title)\n  }, (0, _intlApi.getLangMsg)({\n    key: 'toolbar.isOut'\n  }))), /*#__PURE__*/_react[\"default\"].createElement(\"ul\", {\n    className: className\n  }, listItems), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: (0, _classnames[\"default\"])(_defineProperty({}, _ToolbarMore2[\"default\"].top_footer_div, true)),\n    style: {\n      borderTop: '1px solid #E5E5E5',\n      justifyContent: 'center',\n      height: '40px'\n    },\n    onClick: function onClick(e) {\n      e.stopPropagation();\n      props.dropDownItemClick(item, index);\n    }\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n    title: item.name,\n    style: {\n      width: '96px'\n    },\n    className: (0, _classnames[\"default\"])('kd-cq-control kd-cq-btn', _defineProperty(_defineProperty(_defineProperty({}, _ToolbarMore2[\"default\"].name_span, true), _ToolbarMore2[\"default\"].confirm, true), 'theme-bg', true))\n  }, item.name)));\n}\nToolbarMore.propTypes = {\n  onDropDownClick: _propTypes[\"default\"].func,\n  dropDownList: _propTypes[\"default\"].array,\n  postDataToUIState: _propTypes[\"default\"].func\n};\nvar _default = exports[\"default\"] = ToolbarMore;\n\n//# sourceURL=webpack://bos-platform/./src/component/web/base/ToolbarMore.jsx?");

/***/ }),

/***/ "./src/component/web/baseField/AddressField.jsx":
/*!******************************************************!*\
  !*** ./src/component/web/baseField/AddressField.jsx ***!
  \******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.array.from.js */ \"../../node_modules/core-js/modules/es.array.from.js\");\n__webpack_require__(/*! core-js/modules/es.array.is-array.js */ \"../../node_modules/core-js/modules/es.array.is-array.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.array.slice.js */ \"../../node_modules/core-js/modules/es.array.slice.js\");\n__webpack_require__(/*! core-js/modules/es.function.name.js */ \"../../node_modules/core-js/modules/es.function.name.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.array.for-each.js */ \"../../node_modules/core-js/modules/es.array.for-each.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-string.js */ \"../../node_modules/core-js/modules/es.date.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.regexp.exec.js */ \"../../node_modules/core-js/modules/es.regexp.exec.js\");\n__webpack_require__(/*! core-js/modules/es.regexp.to-string.js */ \"../../node_modules/core-js/modules/es.regexp.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.string.replace.js */ \"../../node_modules/core-js/modules/es.string.replace.js\");\n__webpack_require__(/*! core-js/modules/es.string.trim.js */ \"../../node_modules/core-js/modules/es.string.trim.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ \"../../node_modules/core-js/modules/web.dom-collections.for-each.js\");\nvar _react = _interopRequireWildcard(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _immutable = __webpack_require__(/*! immutable */ \"webpack/sharing/consume/default/immutable/immutable?f2ca\");\nvar _componentutil = __webpack_require__(/*! @/util/componentutil */ \"./src/util/componentutil.js\");\nvar _Address = _interopRequireDefault(__webpack_require__(/*! @/component/web/base/Address */ \"./src/component/web/base/Address.js\"));\nvar _memoryCacher = __webpack_require__(/*! @/model/memoryCacher */ \"./src/model/memoryCacher.js\");\nvar _debounce = _interopRequireDefault(__webpack_require__(/*! lodash/debounce */ \"../../node_modules/lodash/debounce.js\"));\nvar _serverproperties = __webpack_require__(/*! ../../../constant/serverproperties */ \"./src/constant/serverproperties.js\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nvar getValue = function getValue(model) {\n  var res = model.getDataProperty('value');\n  if (!res) return '';\n  var value = '';\n  if (_immutable.List.isList(res)) {\n    value = res.get(1);\n  } else if (Object.prototype.toString.call(res) === '[object String]') {\n    value = res;\n  }\n  return value.trim();\n};\nfunction AddressField(_ref) {\n  var model = _ref.model,\n    lock = _ref.lock,\n    style = _ref.style,\n    inputProps = _ref.inputProps,\n    inputStyle = _ref.inputStyle,\n    option = _ref.option,\n    showAddressModal = _ref.showAddressModal,\n    getAddressSearchList = _ref.getAddressSearchList,\n    changeAddressVal = _ref.changeAddressVal,\n    setItemByNumber = _ref.setItemByNumber;\n  var _useState = (0, _react.useState)(0),\n    _useState2 = _slicedToArray(_useState, 2),\n    refreshId = _useState2[0],\n    setRefreshId = _useState2[1];\n  var _useState3 = (0, _react.useState)([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    addressSearchList = _useState4[0],\n    setAddressSearchList = _useState4[1];\n  var getListDebounceRef = (0, _react.useRef)();\n  (0, _react.useEffect)(function () {\n    var pageId = model.pageId,\n      key = model.key;\n    getListDebounceRef.current = (0, _debounce[\"default\"])(getAddressSearchList, 300);\n    var removeSubscribeControlMethod = (0, _memoryCacher.subscribeControlMethod)(pageId, key, 'directives', function (pageData) {\n      if (pageData === undefined) {\n        return;\n      }\n      doEvents(pageData);\n    });\n    return function () {\n      removeSubscribeControlMethod && removeSubscribeControlMethod();\n    };\n  }, []);\n  var doEvents = function doEvents(events) {\n    events.forEach(function (event) {\n      var methodname = event.methodname,\n        args = event.args;\n      switch (methodname) {\n        case 'setAddress':\n          args && setAddressSearchList(args[0]);\n          setRefreshId((0, _componentutil.createNewId)());\n          break;\n      }\n    });\n  };\n\n  // 当输入值改变时，向后台发送指令，获取新的lookupList\n  var addressChange = function addressChange(val) {\n    var getListDebounceFn = getListDebounceRef.current;\n    getListDebounceFn && getListDebounceFn(model, val);\n  };\n  var setAdreesItemByNumber = function setAdreesItemByNumber(val) {\n    setItemByNumber && setItemByNumber(model, val);\n  };\n\n  // 点击某个下拉选项后\n  var selectItem = function selectItem(primaryKey) {\n    var args = {};\n    args.id = primaryKey;\n    args.entryType = 0;\n    changeAddressVal && changeAddressVal(model, args);\n  };\n  var clickIcon = function clickIcon(evt) {\n    evt.stopPropagation();\n    !lock && showAddressModal && showAddressModal(model);\n  };\n  var _getCommonClass = (0, _componentutil.getCommonClass)(model),\n    Grow = _getCommonClass.Grow,\n    Shrink = _getCommonClass.Shrink,\n    AlignSelf = _getCommonClass.AlignSelf;\n  var openFuzzyQuery = option.get(_serverproperties.ADDRESS_OPEN_FUZZY_QUERY) !== false;\n  var addressValue = model.getDataProperty(['value', 1]);\n  if (typeof addressValue === 'string') {\n    addressValue = addressValue.replace(/(\\r)/g, '').trim();\n  }\n  return /*#__PURE__*/_react[\"default\"].createElement(_Address[\"default\"], {\n    containerStyle: style,\n    Grow: Grow,\n    Shrink: Shrink,\n    AlignSelf: AlignSelf,\n    value: addressValue,\n    inputStyle: inputStyle,\n    inputProps: inputProps,\n    handleIconClick: clickIcon,\n    addressSearchList: (0, _immutable.fromJS)(addressSearchList),\n    refreshId: refreshId,\n    handleAddressChange: addressChange,\n    handleAddressSelectItem: selectItem,\n    openFuzzyQuery: openFuzzyQuery,\n    setItemByNumber: setAdreesItemByNumber\n  });\n}\nvar _default = exports[\"default\"] = AddressField;\n\n//# sourceURL=webpack://bos-platform/./src/component/web/baseField/AddressField.jsx?");

/***/ }),

/***/ "./src/component/web/baseField/AttachmentPanelField.jsx":
/*!**************************************************************!*\
  !*** ./src/component/web/baseField/AttachmentPanelField.jsx ***!
  \**************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.filter.js */ \"../../node_modules/core-js/modules/es.array.filter.js\");\n__webpack_require__(/*! core-js/modules/es.array.for-each.js */ \"../../node_modules/core-js/modules/es.array.for-each.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.assign.js */ \"../../node_modules/core-js/modules/es.object.assign.js\");\n__webpack_require__(/*! core-js/modules/es.object.create.js */ \"../../node_modules/core-js/modules/es.object.create.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-properties.js */ \"../../node_modules/core-js/modules/es.object.define-properties.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptors.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptors.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.get-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.keys.js */ \"../../node_modules/core-js/modules/es.object.keys.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.reflect.construct.js */ \"../../node_modules/core-js/modules/es.reflect.construct.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ \"../../node_modules/core-js/modules/web.dom-collections.for-each.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.array.concat.js */ \"../../node_modules/core-js/modules/es.array.concat.js\");\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\n__webpack_require__(/*! core-js/modules/es.object.set-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.set-prototype-of.js\");\nvar _react = _interopRequireWildcard(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _componentutil = __webpack_require__(/*! ../../../util/componentutil */ \"./src/util/componentutil.js\");\nvar _Attachment = _interopRequireDefault(__webpack_require__(/*! ../base/Attachment */ \"./src/component/web/base/Attachment/index.js\"));\nvar _client = __webpack_require__(/*! @/action/actionname/global/system/client */ \"./src/action/actionname/global/system/client/index.js\");\nvar _immutable = __webpack_require__(/*! immutable */ \"webpack/sharing/consume/default/immutable/immutable?f2ca\");\nvar _attachmentpanelaction = __webpack_require__(/*! @/action/attachmentpanelaction */ \"./src/action/attachmentpanelaction.js\");\nvar _serverproperties = __webpack_require__(/*! @/constant/serverproperties */ \"./src/constant/serverproperties.js\");\nvar _attachmentUtils = __webpack_require__(/*! @/util/attachmentUtils */ \"./src/util/attachmentUtils.js\");\nvar _attachmentConst = __webpack_require__(/*! @/constant/attachmentConst */ \"./src/constant/attachmentConst.js\");\nvar _action = __webpack_require__(/*! @/action/action */ \"./src/action/action.js\");\nvar _appModelFunction = __webpack_require__(/*! @/model/appModelFunction */ \"./src/model/appModelFunction.js\");\nvar _global = __webpack_require__(/*! @/global */ \"./src/global/index.js\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nvar AttachmentPanelField = exports[\"default\"] = /*#__PURE__*/function (_Component) {\n  _inherits(AttachmentPanelField, _Component);\n  function AttachmentPanelField() {\n    var _this;\n    _classCallCheck(this, AttachmentPanelField);\n    for (var _len = arguments.length, _args = new Array(_len), _key = 0; _key < _len; _key++) {\n      _args[_key] = arguments[_key];\n    }\n    _this = _callSuper(this, AttachmentPanelField, [].concat(_args));\n    _this.beforeUpload = function (args) {\n      _this.props.dispatch((0, _attachmentpanelaction.beforeUpload)(_this.props.model, args));\n    };\n    _this.beforeDownload = function (args) {\n      _this.props.dispatch((0, _attachmentpanelaction.beforeDownload)(_this.props.model, args));\n    };\n    _this.uploadFile = function (files) {\n      _this.props.onChange && _this.props.onChange(files);\n    };\n    _this.afterUpload = function (files) {\n      _this.props.dispatch((0, _attachmentpanelaction.reportUploadResult)(_this.props.model, files));\n    };\n    _this.removeFile = function (files) {\n      _this.props.onChange && _this.props.onChange(files, 'remove');\n    };\n    _this.remarkClick = function (files) {\n      _this.props.remarkClick(_this.props.model, files);\n    };\n    _this.attachOperationCount = function (args) {\n      _this.props.dispatch((0, _attachmentpanelaction.attachOperationCount)(_this.props.model, args));\n    };\n    // 自定义操作按钮点击事件\n    _this.attachOperaClick = function (args) {\n      _this.props.dispatch((0, _attachmentpanelaction.attachOperaClick)(_this.props.model, args));\n    };\n    _this.updateControlValue = function (value) {\n      var _this$props = _this.props,\n        model = _this$props.model,\n        dispatch = _this$props.dispatch;\n      var pageId = model.pageId,\n        key = model.key;\n      (0, _action.mergeState)(_client.UPDATE_CONTROL_VALUE, pageId, {\n        key: key,\n        value: (0, _immutable.fromJS)(value),\n        updateData: false\n      }, dispatch);\n    };\n    _this.updateFieldPostValue = function (args) {\n      var model = _this.props.model;\n      var pageId = model.pageId,\n        key = model.key;\n      (0, _appModelFunction.setFieldPostValue)(pageId, key, args)((0, _global.getGlobalState)());\n    };\n    _this.comfirmDelete = function (args) {\n      _this.props.dispatch((0, _attachmentpanelaction.comfirmDelete)(_this.props.model, args));\n    };\n    _this.rename = function (args) {\n      _this.props.dispatch((0, _attachmentpanelaction.rename)(_this.props.model, args));\n    };\n    _this.dragFile = function (args) {\n      _this.props.dispatch((0, _attachmentpanelaction.dragFile)(_this.props.model, args));\n    };\n    _this.getMaxPreivewSize = function () {\n      return 1;\n    };\n    _this.handlePreviewInNewTab = function (args) {\n      var openByNewTab = _this.attachmentConfig.openByNewTab;\n      if (!openByNewTab) return;\n      _this.props.dispatch((0, _attachmentpanelaction.previewInNewTab)(_this.props.model, [args]));\n    };\n    return _this;\n  }\n  _createClass(AttachmentPanelField, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.attachmentConfig = (0, _componentutil.getAttachInfoFromRootConfig)();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n        model = _this$props2.model,\n        dispatch = _this$props2.dispatch,\n        showTitle = _this$props2.showTitle,\n        value = _this$props2.value,\n        disabled = _this$props2.disabled,\n        fieldStyle = _this$props2.style,\n        labelStyle = _this$props2.labelStyle;\n      var option = model.getMetaProperty('item');\n      var title = model.getMetaLocaleProperty('caption');\n      var extName = option && option.get('ext'); // 文件扩展名\n      var showCreator = option && option.get('sct') || false; // 显示上传人\n      var showCreateDate = option && option.get('scd') || false; // 显示上传时间\n      var showMark = option && option.get('smk') || false; // 显示备注\n      var maxAtmSize = option && option.get('maxatmsize'); // 文件最大大小\n      var maxAtmCount = option && option.get('maxatmcount') || 0; // 最大附件数，默认值为0，不限制\n      var checkDuplicateFileName = option && option.get('checkDuplicateFileName') || false; // 允许上传相同名字的文件，默认false\n      var _getCommonClass = (0, _componentutil.getCommonClass)(model),\n        Grow = _getCommonClass.Grow,\n        Shrink = _getCommonClass.Shrink,\n        AlignSelf = _getCommonClass.AlignSelf;\n      var dragble = option && option.get(_attachmentConst.DRAGBLE); // 是否可拖拽\n      var style = _objectSpread(_objectSpread({}, (0, _componentutil.getCommonStyle)(model)), fieldStyle);\n      if (!this.attachmentConfig) this.attachmentConfig = (0, _componentutil.getAttachInfoFromRootConfig)();\n      var _this$attachmentConfi = this.attachmentConfig,\n        attachmentUploadMaxSize = _this$attachmentConfi.attachmentUploadMaxSize,\n        forbidfiletype = _this$attachmentConfi.forbidfiletype,\n        fileTypeWhiteList = _this$attachmentConfi.fileTypeWhiteList,\n        previewType = _this$attachmentConfi.previewType,\n        openByNewTab = _this$attachmentConfi.openByNewTab,\n        wpsAppId = _this$attachmentConfi.wpsAppId;\n      var previewLimitSize = (0, _attachmentUtils.getPreviewLimitSize)();\n      // 控制附件操作按钮是否默认显示，默认不显示false\n      var showOperaBut = (0, _componentutil.getComponentDataProperty)(model, _serverproperties.ATTACHMENT_SHOWOPERABUTTON, _serverproperties.ATTACHMENT_SHOWOPERABUTTON, false) || false;\n      var dateFormatter = (0, _componentutil.getComponentDataProperty)(model, _serverproperties.ATTACHMENT_DATE_FORMATTER, _serverproperties.ATTACHMENT_DATE_FORMATTER, false);\n      var maxSize = (0, _attachmentUtils.getMaxSize)(maxAtmSize, attachmentUploadMaxSize);\n      var sortField = option && option.get('sortField') || _attachmentConst.ATTACHMENT_SORT_FIELD.FileName;\n      var sortType = option && option.get('sortType') || _attachmentConst.ATTACHMENT_SORT_TYPE.NoSort;\n      var attachmentLifeCycle = (0, _attachmentUtils.getLifeCycle)(model.pageId, model.getMetaProperty([_serverproperties.ITEM, _serverproperties.FIELD_TYPE]));\n      var beforeDownloadFn = attachmentLifeCycle !== null && attachmentLifeCycle !== void 0 && attachmentLifeCycle.beforeDownload ? this.beforeDownload : null; // 下载前\n      var isFileEncrypt = attachmentLifeCycle === null || attachmentLifeCycle === void 0 ? void 0 : attachmentLifeCycle.fileEncrypt; // 文件下载加密\n      return /*#__PURE__*/_react[\"default\"].createElement(_Attachment[\"default\"], _extends({\n        id: model.key,\n        model: model,\n        locale: model.getUserLocale(),\n        dispatch: dispatch,\n        disabled: disabled,\n        displayData: value,\n        beforeUpload: this.beforeUpload,\n        beforeDownload: beforeDownloadFn,\n        uploadFile: this.uploadFile,\n        afterUpload: this.afterUpload,\n        removeFile: this.removeFile,\n        comfirmDelete: this.comfirmDelete,\n        updateControlValue: this.updateControlValue,\n        style: style,\n        labelStyle: labelStyle,\n        extName: extName,\n        showCreator: showCreator,\n        showCreateDate: showCreateDate,\n        showMark: showMark,\n        Grow: Grow,\n        Shrink: Shrink,\n        AlignSelf: AlignSelf,\n        Name: title,\n        showFormByTips: this.props.showFormByTips,\n        isField: true,\n        showTitle: showTitle,\n        maxAtmCount: maxAtmCount,\n        remarkClick: this.remarkClick,\n        maxSize: maxSize,\n        attachOperationCount: this.attachOperationCount,\n        attachOperaClick: this.attachOperaClick,\n        forbidfiletype: forbidfiletype,\n        fileTypeWhiteList: fileTypeWhiteList,\n        showOperaBut: showOperaBut,\n        previewType: previewType,\n        openByNewTab: openByNewTab,\n        onNewTabPreview: this.handlePreviewInNewTab,\n        renameFile: this.rename,\n        sortField: sortField,\n        sortType: sortType,\n        checkDuplicateFileName: checkDuplicateFileName,\n        dateFormatter: dateFormatter,\n        previewLimitSize: previewLimitSize,\n        isFileEncrypt: isFileEncrypt,\n        dragFile: this.dragFile,\n        dragble: dragble,\n        updateControlPostValue: this.updateFieldPostValue\n      }, this.props.attachData));\n    }\n  }]);\n  return AttachmentPanelField;\n}(_react.Component);\n\n//# sourceURL=webpack://bos-platform/./src/component/web/baseField/AttachmentPanelField.jsx?");

/***/ }),

/***/ "./src/component/web/baseField/BaseDataField.jsx":
/*!*******************************************************!*\
  !*** ./src/component/web/baseField/BaseDataField.jsx ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.index-of.js */ \"../../node_modules/core-js/modules/es.array.index-of.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.assign.js */ \"../../node_modules/core-js/modules/es.object.assign.js\");\n__webpack_require__(/*! core-js/modules/es.object.create.js */ \"../../node_modules/core-js/modules/es.object.create.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.get-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.keys.js */ \"../../node_modules/core-js/modules/es.object.keys.js\");\n__webpack_require__(/*! core-js/modules/es.reflect.construct.js */ \"../../node_modules/core-js/modules/es.reflect.construct.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.array.find.js */ \"../../node_modules/core-js/modules/es.array.find.js\");\n__webpack_require__(/*! core-js/modules/es.array.includes.js */ \"../../node_modules/core-js/modules/es.array.includes.js\");\n__webpack_require__(/*! core-js/modules/es.array.map.js */ \"../../node_modules/core-js/modules/es.array.map.js\");\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\n__webpack_require__(/*! core-js/modules/es.object.is.js */ \"../../node_modules/core-js/modules/es.object.is.js\");\n__webpack_require__(/*! core-js/modules/es.object.set-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.set-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.string.includes.js */ \"../../node_modules/core-js/modules/es.string.includes.js\");\n__webpack_require__(/*! core-js/modules/es.string.trim.js */ \"../../node_modules/core-js/modules/es.string.trim.js\");\n__webpack_require__(/*! core-js/modules/web.timers.js */ \"../../node_modules/core-js/modules/web.timers.js\");\nvar _react = _interopRequireWildcard(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _immutable = __webpack_require__(/*! immutable */ \"webpack/sharing/consume/default/immutable/immutable?f2ca\");\nvar _propTypes = _interopRequireDefault(__webpack_require__(/*! prop-types */ \"../../node_modules/prop-types/index.js\"));\nvar _lodash = __webpack_require__(/*! lodash */ \"../../node_modules/lodash/lodash.js\");\nvar _serverproperties = __webpack_require__(/*! ../../../constant/serverproperties */ \"./src/constant/serverproperties.js\");\nvar _BaseData = _interopRequireDefault(__webpack_require__(/*! ../base/BaseData */ \"./src/component/web/base/BaseData/index.js\"));\nvar _const = __webpack_require__(/*! ../../../constant/const */ \"./src/constant/const.js\");\nvar _appModelFunction = __webpack_require__(/*! ../../../model/appModelFunction */ \"./src/model/appModelFunction.js\");\nvar _baseDataUtil = __webpack_require__(/*! ../../../util/baseDataUtil */ \"./src/util/baseDataUtil.js\");\nvar _memoryCacher = __webpack_require__(/*! ../../../model/memoryCacher */ \"./src/model/memoryCacher.js\");\nvar _componentutil = __webpack_require__(/*! @/util/componentutil */ \"./src/util/componentutil.js\");\nvar _invokeActionUtils = __webpack_require__(/*! @/component/common/invokeActionUtils */ \"./src/component/common/invokeActionUtils.js\");\nvar _fieldaction = __webpack_require__(/*! @/action/fieldaction */ \"./src/action/fieldaction.js\");\nvar _waitGetLookUpListUtil = __webpack_require__(/*! @/util/waitGetLookUpListUtil.js */ \"./src/util/waitGetLookUpListUtil.js\");\nvar _pageConfigAction = __webpack_require__(/*! @/constant/pageConfigAction */ \"./src/constant/pageConfigAction.js\");\nvar _utils = __webpack_require__(/*! @/validator/utils */ \"./src/validator/utils.js\");\nvar _controlStateValue = __webpack_require__(/*! @/validator/controlStateValue */ \"./src/validator/controlStateValue.js\");\nvar _excluded = [\"model\", \"dispatch\", \"option\", \"type\", \"value\", \"placeholder\", \"mustInput\", \"enable\", \"isNoOption\"];\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nvar allowBasedataClick = true; // f7字段是否允许发送点击请求, 如果点击请求还未回来就不该再次发送请求\n/**\n * web端基础资料字段封装类\n */\nvar BaseDataField = exports[\"default\"] = /*#__PURE__*/function (_Component) {\n  _inherits(BaseDataField, _Component);\n  function BaseDataField(props) {\n    var _this;\n    _classCallCheck(this, BaseDataField);\n    _this = _callSuper(this, BaseDataField, [props]);\n    _this.handleUnauthorized = function (fieldConfig) {\n      if (fieldConfig.mulbasedata) {\n        var model = _this.props.model;\n        var key = model.key;\n        var _fieldConfig$mulbased = fieldConfig.mulbasedata.unauthorizedList,\n          unauthorizedList = _fieldConfig$mulbased === void 0 ? [] : _fieldConfig$mulbased;\n        if (unauthorizedList.includes(key)) {\n          _this.setState({\n            prohibitFuzzyQuery: true\n          });\n        }\n      }\n    };\n    _this.setEnterToQuery = function (arg, entityIdData) {\n      var _arg$bdList;\n      var option = _this.props.option;\n      var entityId = entityIdData || option && option.get(_serverproperties.BaseEntityId);\n      var enterToQuery = arg.range === 'all' || ((_arg$bdList = arg.bdList) === null || _arg$bdList === void 0 ? void 0 : _arg$bdList.includes(entityId));\n      if (enterToQuery !== _this.state.enterToQuery) {\n        _this.setState({\n          enterToQuery: enterToQuery\n        });\n      }\n    };\n    _this.setFilterFrequent = function (newlist) {\n      _this.setState({\n        filterFrequent: (0, _immutable.fromJS)(newlist),\n        filterFrequentRefreshId: (0, _componentutil.createNewId)()\n      });\n    };\n    // 多选基础资料中setItemByNum，不论是设置的编辑属性是啥，最终都是需要转成对应的编码发送到后端\n    _this.handleConvertToCode = function () {\n      var value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n      var _this$props = _this.props,\n        model = _this$props.model,\n        _this$props$option = _this$props.option,\n        option = _this$props$option === void 0 ? (0, _immutable.Map)() : _this$props$option,\n        type = _this$props.type;\n      var entityId = option.get(_serverproperties.BaseEntityId);\n      var editProp = option.get(_serverproperties.EDIT_PROP);\n      var frequent = (0, _baseDataUtil.getBaseDataFrequent)(entityId, type); // [pkid, 编码, 名称]\n      var data = model.getDataProperty(['value']);\n      // 单选基础资料、并编辑属性是名称时，并选择常用列表， 需要特殊处理，否则无法拿到编码信息\n      if (editProp === 'name' && type !== 'mulbasedata' && value !== '' && frequent) {\n        var isInModelData = _immutable.List.isList(data) && data.get(2) === value;\n        if (!isInModelData) {\n          var _frequent$find;\n          var selectFrequentValue = (_frequent$find = frequent.find(function (item) {\n            return (item === null || item === void 0 ? void 0 : item.get(2)) === value;\n          })) === null || _frequent$find === void 0 ? void 0 : _frequent$find.get(1);\n          if (selectFrequentValue) {\n            return selectFrequentValue;\n          }\n        }\n      }\n      var editConnector = option.get(_serverproperties.EDIT_CONNECTOR);\n      return (0, _baseDataUtil.convertToCode)(value, data, editConnector, editProp, type);\n    };\n    _this.baseDataClickAjax = function (_ref) {\n      var value = _ref.value;\n      if (value !== _invokeActionUtils.AJAX_PENDING) {\n        clearTimeout(_this.clearClickBaseDataTimer);\n        allowBasedataClick = true;\n      }\n    };\n    _this.onHandleBaseDataClick = function () {\n      var _this$props2 = _this.props,\n        dispatch = _this$props2.dispatch,\n        model = _this$props2.model,\n        lock = _this$props2.lock;\n      if (lock) return;\n      if (allowBasedataClick) {\n        allowBasedataClick = false;\n        _this.clearClickBaseDataTimer = setTimeout(function () {\n          allowBasedataClick = true;\n        }, 3000); // 延迟3s，防止请求不返回\n        dispatch((0, _fieldaction.clickBaseData)(model));\n      }\n    };\n    // f7模糊查询: 选中模糊查询下拉列表中某条记录\n    _this.onBaseDataSelectItem = function (primaryKey, delLocalValue) {\n      var _this$props3 = _this.props,\n        model = _this$props3.model,\n        enable = _this$props3.enable,\n        mustInput = _this$props3.mustInput;\n      var pageId = model.pageId,\n        key = model.key;\n      var args = {};\n      args.id = primaryKey;\n      args.entryType = 0;\n      args.delLocalValue = delLocalValue;\n      _fieldaction.setItemByIdFromClient && _this.props.dispatch((0, _fieldaction.setItemByIdFromClient)(model, args));\n      if (enable && mustInput) {\n        (0, _appModelFunction.deleteFieldValidateMsg)(pageId, key);\n        (0, _appModelFunction.deleteFieldValidateCaption)(pageId, key);\n        (0, _memoryCacher.deletePageData)(pageId, [_const.PARENT_COLLAPSE_PANEL_ID, key]);\n      }\n    };\n    /**\n     * 缓存 F7 查询数据\n     * @param {[String]} queryParams\n     */\n    _this.cacheBaseDataQueryParams = function (queryParam) {\n      var model = _this.props.model;\n      var pageId = model.pageId,\n        key = model.key;\n      var left = queryParam.left,\n        value = queryParam.value,\n        right = queryParam.right,\n        entryType = queryParam.entryType,\n        countStart = queryParam.countStart,\n        countEnd = queryParam.countEnd;\n      (0, _memoryCacher.setPageData)(pageId, [key, _const.BASE_DATA_QUERY_PARAMS], [left, value, right, entryType, countStart, countEnd]);\n    };\n    _this.handleBaseDataValidate = function (baseDataValue) {\n      var _this$props4 = _this.props,\n        model = _this$props4.model,\n        enable = _this$props4.enable,\n        mustInput = _this$props4.mustInput;\n      if (enable && mustInput && !baseDataValue) {\n        // 手动输入查询基础资料时，录入信息为空将提示信息写入页面缓存\n        var pageId = model.pageId,\n          key = model.key;\n        var caption = model.getMetaLocaleProperty('caption');\n        (0, _appModelFunction.setFieldValidateMsg)(pageId, key);\n        (0, _appModelFunction.setFieldValidateCaption)(pageId, key, _const.VALIDATE_MSG_TYPE.notNull, caption);\n        (0, _appModelFunction.setParentCollapsePanelId)(pageId, key);\n      }\n    };\n    // 点击基础资料模糊查询界面:'显示更多'\n    _this.showMoreClick = function (searchword) {\n      var model = _this.props.model;\n      var args = {};\n      args.searchword = searchword;\n      args.entryType = 0;\n      _fieldaction.showMore && _this.props.dispatch((0, _fieldaction.showMore)(model, args));\n    };\n    // 点击F7模糊查询面板中'新增'按钮\n    _this.onClickAddBtn = function (searchword) {\n      var model = _this.props.model;\n      _fieldaction.onClickAddBtn && _this.props.dispatch((0, _fieldaction.onClickAddBtn)(model, {\n        searchword: searchword\n      }));\n    };\n    // 点击F7输入框浮动按钮 rowKey:行号,单据头传-1\n    _this.onViewDetailBtnClick = function () {\n      var model = _this.props.model;\n      var args = {\n        rowKey: -1,\n        entryType: 0\n      };\n      _fieldaction.onViewDetailBtnClick && _this.props.dispatch((0, _fieldaction.onViewDetailBtnClick)(model, args));\n    };\n    /**\n     * 模糊搜索查找不到值时，kdfield中会缓存输入值，但是基础资料选中值又是空\n     * 导致校验会有问题\n     */\n    _this.clearControlValue = function () {\n      var model = _this.props.model;\n      var pageId = model.pageId,\n        key = model.key;\n      var option = model.getMetaProperty('item') || (0, _immutable.fromJS)({});\n      var fieldType = option.get('type');\n      (0, _controlStateValue.setControlStateValue)({\n        pageId: pageId,\n        key: key,\n        fieldType: fieldType,\n        rowIndex: -1,\n        value: null\n      });\n    };\n    _this.state = {\n      filterFrequent: (0, _immutable.List)(),\n      enterToQuery: false,\n      prohibitFuzzyQuery: false // 禁止模糊查询\n    };\n    _this.baseDataClickAjax = (0, _lodash.debounce)(_this.baseDataClickAjax.bind(_assertThisInitialized(_this)), 500); // 延迟xx毫秒发送请求\n    _this.handleBaseDataChange = (0, _lodash.debounce)(_this.handleBaseDataChange.bind(_assertThisInitialized(_this)), 300); // 延迟xx毫秒触发搜索\n    return _this;\n  }\n  _createClass(BaseDataField, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props5 = this.props,\n        model = _this$props5.model,\n        option = _this$props5.option,\n        type = _this$props5.type;\n      var pageId = model.pageId,\n        key = model.key;\n      var showFrequent = option.get(_serverproperties.F7_SHOW_FREQUENT);\n      this.removefrequentListener = showFrequent ? (0, _memoryCacher.addDataChangeListener)(pageId, [key, 'filterFrequent'], this.setFilterFrequent) : null;\n      this.removeBaseDataClickAjaxListener = (0, _invokeActionUtils.addAjaxStateListener)(pageId, key, 'click', this.baseDataClickAjax);\n      var enterToQueryData = (0, _memoryCacher.getPageData)(pageId, [_const.PAGE_CONFIG, _pageConfigAction.BD_ENTER_TO_QUERY]);\n      if (enterToQueryData) {\n        this.setEnterToQuery(enterToQueryData);\n      }\n      this.removeSetEnterToQueryListener = (0, _memoryCacher.addDataChangeListener)(pageId, [_const.PAGE_CONFIG, _pageConfigAction.BD_ENTER_TO_QUERY], this.setEnterToQuery);\n      if (type === 'mulbasedata') {\n        var fieldConfig = (0, _memoryCacher.getPageData)(pageId, [_const.PAGE_CONFIG, _serverproperties.Ctrls.KDField]);\n        fieldConfig && this.handleUnauthorized(fieldConfig);\n        this.removePageConfigListener = (0, _memoryCacher.addDataChangeListener)(pageId, [_const.PAGE_CONFIG, _serverproperties.Ctrls.KDField], this.handleUnauthorized);\n      }\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      var _this$props$option2, _nextProps$option;\n      var entityId = (_this$props$option2 = this.props.option) === null || _this$props$option2 === void 0 ? void 0 : _this$props$option2.get(_serverproperties.BaseEntityId);\n      var nextEntityId = (_nextProps$option = nextProps.option) === null || _nextProps$option === void 0 ? void 0 : _nextProps$option.get(_serverproperties.BaseEntityId);\n      if (entityId !== nextEntityId) {\n        var model = nextProps.model;\n        var pageId = model.pageId;\n        var enterToQueryData = (0, _memoryCacher.getPageData)(pageId, [_const.PAGE_CONFIG, _pageConfigAction.BD_ENTER_TO_QUERY]);\n        if (enterToQueryData) {\n          this.setEnterToQuery(enterToQueryData, nextEntityId);\n        }\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var _this$removeBaseDataC, _this$removeSetEnterT, _this$removePageConfi;\n      this.removefrequentListener && this.removefrequentListener();\n      (_this$removeBaseDataC = this.removeBaseDataClickAjaxListener) === null || _this$removeBaseDataC === void 0 || _this$removeBaseDataC.call(this);\n      (_this$removeSetEnterT = this.removeSetEnterToQueryListener) === null || _this$removeSetEnterT === void 0 || _this$removeSetEnterT.call(this);\n      (_this$removePageConfi = this.removePageConfigListener) === null || _this$removePageConfi === void 0 || _this$removePageConfi.call(this);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      var _this$props6 = this.props,\n        model = _this$props6.model,\n        type = _this$props6.type,\n        mustInput = _this$props6.mustInput,\n        enable = _this$props6.enable;\n      var preModel = prevProps.model;\n      var pageId = model.pageId,\n        key = model.key;\n      var _editValue = model.getDataProperty(['value', 2]);\n      var _preEditValue = preModel.getDataProperty(['value', 2]);\n      // 基础资料选择值后 删除 非空提示\n      if (type === 'mulbasedata') {\n        var data = model.getDataProperty(['value']);\n        if (data && data.map && data.size !== 0 && mustInput && enable) {\n          (0, _appModelFunction.deleteFieldValidateMsg)(pageId, key);\n          (0, _appModelFunction.deleteFieldValidateCaption)(pageId, key);\n          (0, _memoryCacher.deletePageData)(pageId, [_const.PARENT_COLLAPSE_PANEL_ID, key]);\n        }\n      } else {\n        var alias = model.getDataProperty(['value', 1]);\n        var _value = model.getDataProperty(['value', 0]);\n        if (alias && _value && _editValue && mustInput && enable) {\n          (0, _appModelFunction.deleteFieldValidateMsg)(pageId, key);\n          (0, _appModelFunction.deleteFieldValidateCaption)(pageId, key);\n          (0, _memoryCacher.deletePageData)(pageId, [_const.PARENT_COLLAPSE_PANEL_ID, key]);\n        }\n      }\n      if (_editValue !== _preEditValue) {\n        (0, _utils.clearGroupValidateMes)({\n          pageId: pageId,\n          key: key\n        });\n      }\n    }\n  }, {\n    key: \"handleBaseDataChange\",\n    value:\n    // 触发: f7模糊查询\n    function handleBaseDataChange(lookUpInfo) {\n      var value = lookUpInfo.value;\n      if (!value) {\n        return;\n      }\n      if (value.trim() === '') {\n        lookUpInfo.value = '';\n      }\n      this.cacheBaseDataQueryParams(lookUpInfo);\n      var _this$props$model = this.props.model,\n        pageId = _this$props$model.pageId,\n        key = _this$props$model.key;\n      _fieldaction.getLookUpList && this.props.dispatch((0, _fieldaction.getLookUpList)(this.props.model, lookUpInfo));\n      (0, _waitGetLookUpListUtil.updateF7GetLookUpListStatus)(pageId, key, true);\n    }\n\n    // 我的常用数据过滤\n  }, {\n    key: \"handleFilterFrequent\",\n    value: function handleFilterFrequent(frequentData) {\n      this.props.dispatch((0, _fieldaction.filterFrequentData)(this.props.model, frequentData));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _getCommonStyle,\n        _this2 = this;\n      var _this$props7 = this.props,\n        model = _this$props7.model,\n        dispatch = _this$props7.dispatch,\n        option = _this$props7.option,\n        type = _this$props7.type,\n        value = _this$props7.value,\n        placeholder = _this$props7.placeholder,\n        mustInput = _this$props7.mustInput,\n        enable = _this$props7.enable,\n        isNoOption = _this$props7.isNoOption,\n        other = _objectWithoutProperties(_this$props7, _excluded);\n      var _this$state = this.state,\n        filterFrequent = _this$state.filterFrequent,\n        enterToQuery = _this$state.enterToQuery,\n        prohibitFuzzyQuery = _this$state.prohibitFuzzyQuery;\n      var data = model.getDataProperty(['value']);\n      var alias = model.getDataProperty(['value', 1]);\n      var _value = model.getDataProperty(['value', 0]);\n      var _editValue = model.getDataProperty(['value', 2]);\n      if (type === 'mulbasedata') {\n        // 多选基础资料格式：[['number1'，'name1'],['number2'，'name2'],['number3'，'name3']]\n        // 多选基础资料格式：[['number1'，'name1','editValue1'],[number2'，'name2','editValue1'],['number3','name3','editValue1']] -20180626修改\n        alias = '';\n        _value = '';\n        _editValue = '';\n        if (data && data.map) {\n          data.map(function (item, index) {\n            // _editValue += (index === 0 ? '' : ',') + item.get(2)\n            _editValue += item.get(2) + _const.F7_DELIMITER; // 多选F7连续模糊自动输入逗号的优化\n            alias += (index === 0 ? '' : _const.F7_DELIMITER) + item.get(1); // name\n            _value += (index === 0 ? '' : _const.F7_DELIMITER) + item.get(0); // number\n          });\n        }\n      }\n      alias = (0, _baseDataUtil.getBaseDataDisplayProp)(model.getDataProperty(['value']), option && option.get(_serverproperties.DISPLAY_PROP), type === 'mulbasedata', option && option.get(_serverproperties.CONNECTOR));\n      var lookUpList = model.getDataProperty([_serverproperties.F7_LOOKUP_LIST_ID]);\n      // let isFlex = model.getDataProperty('hasFlex')\n      // let pageId = model.pageId\n      // let id = model.key\n      var displayType = option.get('dst'); // 基础资料显示模式：1:下拉模式，其他：默认模式.\n      var showAddBtnWhenNoData = option.get(_serverproperties.F7_QUICK_ADDNEW);\n      var showViewDetailBtn = option.get(_serverproperties.F7_VIEW_DETAIL_BUTTON); // 默认为true\n      // 三元表达式判断->是否为无选项模式\n      var openFuzzyQuery = displayType !== 1 && isNoOption ? false : option.get(_serverproperties.F7_OPEN_FUZZY_QUERY);\n      var entityId = option && option.get(_serverproperties.BaseEntityId);\n      var frequent = (0, _baseDataUtil.getBaseDataFrequent)(entityId, type);\n      var showFrequent = option.get(_serverproperties.F7_SHOW_FREQUENT);\n      var selectedItemStyle = option.get(_serverproperties.SELECTED_ITEM_STYLE);\n      var labelFoldingState = option.get(_serverproperties.F7_LABEL_FOLDING_STATE); // 默认为true 折叠\n      var allBorder = Object.is(option.get(_serverproperties.FIELD_STYLE), 2);\n      var fontClass = option.get(_serverproperties.F7_FONT_CLASS);\n      var editStyle = option.get(_serverproperties.F7_EDIT_STYLE);\n      if (prohibitFuzzyQuery) {\n        editStyle = 1;\n      }\n      var editProp = option.get(_serverproperties.EDIT_PROP);\n      var displayProp = option.get(_serverproperties.DISPLAY_PROP);\n      var editConnector = option.get(_serverproperties.EDIT_CONNECTOR);\n      var isMulLine = option.get(_serverproperties.F7_MULTI_LINE);\n      var hasLimitHeight = ((_getCommonStyle = (0, _componentutil.getCommonStyle)(model)) === null || _getCommonStyle === void 0 ? void 0 : _getCommonStyle.height) !== undefined; // 设计器是否设置了高度\n      // test data\n      // showAddBtnWhenNoData = true;\n      // openFuzzyQuery = false\n\n      return /*#__PURE__*/_react[\"default\"].createElement(_BaseData[\"default\"], _extends({\n        id: model.key\n        // pageId={pageId}\n        // isFlex={isFlex}\n        // dispatch={this.props.dispatch}\n        ,\n        onClick: this.onHandleBaseDataClick,\n        onBaseDataSelectItem: this.onBaseDataSelectItem,\n        onBaseDataChange: function onBaseDataChange(lookUpInof) {\n          return _this2.handleBaseDataChange(lookUpInof);\n        },\n        onFilterFrequent: function onFilterFrequent(frequentData) {\n          return _this2.handleFilterFrequent(frequentData);\n        },\n        handleValidate: this.handleBaseDataValidate,\n        showMoreClick: this.showMoreClick,\n        onClickAddBtn: this.onClickAddBtn,\n        onViewDetailBtnClick: this.onViewDetailBtnClick,\n        onConvertToCode: this.handleConvertToCode,\n        selectedData: data,\n        alias: alias,\n        entityId: entityId,\n        value: _editValue,\n        code: _value,\n        placeholder: placeholder,\n        lookUpList: lookUpList ? lookUpList.get('data') : undefined,\n        hasMore: lookUpList ? lookUpList.get('next') : undefined,\n        columns: lookUpList ? lookUpList.get('columns') : undefined,\n        size: lookUpList ? lookUpList.get('size') : undefined,\n        inited: lookUpList ? lookUpList.get('inited') : undefined,\n        refreshId: lookUpList ? lookUpList.get('refreshId') : undefined,\n        filterFrequentRefreshId: this.state.filterFrequentRefreshId,\n        displayType: displayType,\n        showAddBtnWhenNoData: showAddBtnWhenNoData,\n        showViewDetailBtn: showViewDetailBtn,\n        type: type,\n        noValue: (0, _componentutil.getNOValue)(),\n        openFuzzyQuery: openFuzzyQuery,\n        enterToQuery: enterToQuery,\n        frequent: frequent,\n        filterFrequent: filterFrequent,\n        showFrequent: showFrequent,\n        selectedItemStyle: selectedItemStyle,\n        labelFoldingState: labelFoldingState,\n        allBorder: allBorder,\n        fontClass: fontClass,\n        editStyle: editStyle,\n        mustInput: mustInput,\n        editProp: editProp,\n        displayProp: displayProp,\n        isMulLine: isMulLine,\n        hasLimitHeight: hasLimitHeight,\n        editConnector: editConnector,\n        isNoOption: isNoOption,\n        clearControlValue: this.clearControlValue\n      }, other));\n    }\n  }]);\n  return BaseDataField;\n}(_react.Component);\nBaseDataField.propTypes = {\n  model: _propTypes[\"default\"].object.isRequired,\n  option: _propTypes[\"default\"].object.isRequired\n};\n\n//# sourceURL=webpack://bos-platform/./src/component/web/baseField/BaseDataField.jsx?");

/***/ }),

/***/ "./src/component/web/baseField/CascaderField.jsx":
/*!*******************************************************!*\
  !*** ./src/component/web/baseField/CascaderField.jsx ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.index-of.js */ \"../../node_modules/core-js/modules/es.array.index-of.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.assign.js */ \"../../node_modules/core-js/modules/es.object.assign.js\");\n__webpack_require__(/*! core-js/modules/es.object.create.js */ \"../../node_modules/core-js/modules/es.object.create.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.get-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.keys.js */ \"../../node_modules/core-js/modules/es.object.keys.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.reflect.construct.js */ \"../../node_modules/core-js/modules/es.reflect.construct.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.array.concat.js */ \"../../node_modules/core-js/modules/es.array.concat.js\");\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\n__webpack_require__(/*! core-js/modules/es.object.set-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.set-prototype-of.js\");\nvar _react = _interopRequireWildcard(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _propTypes = _interopRequireDefault(__webpack_require__(/*! prop-types */ \"../../node_modules/prop-types/index.js\"));\nvar _Cascader = _interopRequireDefault(__webpack_require__(/*! ../base/Cascader */ \"./src/component/web/base/Cascader.js\"));\nvar _serverproperties = __webpack_require__(/*! ../../../constant/serverproperties */ \"./src/constant/serverproperties.js\");\nvar _immutable = __webpack_require__(/*! immutable */ \"webpack/sharing/consume/default/immutable/immutable?f2ca\");\nvar _componentutil = __webpack_require__(/*! @/util/componentutil */ \"./src/util/componentutil.js\");\nvar _excluded = [\"model\", \"option\", \"style\", \"fileServer\", \"mustInput\", \"onBlur\", \"disabled\", \"value\", \"placeholder\", \"onChange\"];\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n/**\n * web端级联字段封装类\n */\nvar CascaderField = exports[\"default\"] = /*#__PURE__*/function (_Component) {\n  _inherits(CascaderField, _Component);\n  function CascaderField() {\n    var _this;\n    _classCallCheck(this, CascaderField);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _callSuper(this, CascaderField, [].concat(args));\n    _this.getLang = function (caption) {\n      var model = _this.props.model;\n      var label = (0, _componentutil.getLangResult)(model, caption);\n      return label;\n    };\n    return _this;\n  }\n  _createClass(CascaderField, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n        model = _this$props.model,\n        option = _this$props.option,\n        style = _this$props.style,\n        fileServer = _this$props.fileServer,\n        mustInput = _this$props.mustInput,\n        onBlur = _this$props.onBlur,\n        disabled = _this$props.disabled,\n        value = _this$props.value,\n        placeholder = _this$props.placeholder,\n        onChange = _this$props.onChange,\n        other = _objectWithoutProperties(_this$props, _excluded);\n      var items = (0, _componentutil.getComponentDataProperty)(model, _serverproperties.STORE, ['item', _serverproperties.STORE]) || (0, _immutable.List)();\n      var val = value && value.split(',');\n      var isImmeBackfill = option.get('changeOnSelect') || false;\n      return /*#__PURE__*/_react[\"default\"].createElement(_Cascader[\"default\"], _extends({\n        noValue: (0, _componentutil.getNOValue)(),\n        style: style,\n        options: items,\n        required: mustInput,\n        value: val,\n        onChange: onChange,\n        disabled: disabled,\n        placeholder: placeholder,\n        isImmeBackfill: isImmeBackfill,\n        getLang: this.getLang\n      }, other));\n    }\n  }]);\n  return CascaderField;\n}(_react.Component);\nCascaderField.propTypes = {\n  model: _propTypes[\"default\"].object.isRequired,\n  option: _propTypes[\"default\"].object.isRequired,\n  style: _propTypes[\"default\"].object.isRequired\n};\n\n//# sourceURL=webpack://bos-platform/./src/component/web/baseField/CascaderField.jsx?");

/***/ }),

/***/ "./src/component/web/baseField/CheckBoxField.jsx":
/*!*******************************************************!*\
  !*** ./src/component/web/baseField/CheckBoxField.jsx ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.index-of.js */ \"../../node_modules/core-js/modules/es.array.index-of.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.assign.js */ \"../../node_modules/core-js/modules/es.object.assign.js\");\n__webpack_require__(/*! core-js/modules/es.object.create.js */ \"../../node_modules/core-js/modules/es.object.create.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.get-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.keys.js */ \"../../node_modules/core-js/modules/es.object.keys.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.reflect.construct.js */ \"../../node_modules/core-js/modules/es.reflect.construct.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\n__webpack_require__(/*! core-js/modules/es.object.set-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.set-prototype-of.js\");\nvar _react = _interopRequireWildcard(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _propTypes = _interopRequireDefault(__webpack_require__(/*! prop-types */ \"../../node_modules/prop-types/index.js\"));\nvar _BaseComponents = __webpack_require__(/*! ../base/BaseComponents */ \"./src/component/web/base/BaseComponents/index.js\");\nvar _excluded = [\"isNoUnderLineLockStyle\", \"model\", \"option\", \"style\", \"onBlur\", \"value\", \"showTitle\"];\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n/**\n * web端多选框字段封装类\n */\nvar CheckBoxField = exports[\"default\"] = /*#__PURE__*/function (_Component) {\n  _inherits(CheckBoxField, _Component);\n  function CheckBoxField() {\n    _classCallCheck(this, CheckBoxField);\n    return _callSuper(this, CheckBoxField, arguments);\n  }\n  _createClass(CheckBoxField, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n        isNoUnderLineLockStyle = _this$props.isNoUnderLineLockStyle,\n        model = _this$props.model,\n        option = _this$props.option,\n        style = _this$props.style,\n        onBlur = _this$props.onBlur,\n        value = _this$props.value,\n        showTitle = _this$props.showTitle,\n        other = _objectWithoutProperties(_this$props, _excluded);\n      var foreColor = model.getMetaProperty('fc');\n      var text = model.getMetaLocaleProperty('caption');\n      var styleType = option.get('s');\n      return /*#__PURE__*/_react[\"default\"].createElement(_BaseComponents.CheckBox, _extends({\n        style: style,\n        value: !!value,\n        text: text,\n        styleType: styleType,\n        foreColor: foreColor,\n        model: model\n      }, other));\n    }\n  }]);\n  return CheckBoxField;\n}(_react.Component);\nCheckBoxField.propTypes = {\n  model: _propTypes[\"default\"].object.isRequired,\n  option: _propTypes[\"default\"].object.isRequired,\n  style: _propTypes[\"default\"].object.isRequired\n};\n\n//# sourceURL=webpack://bos-platform/./src/component/web/baseField/CheckBoxField.jsx?");

/***/ }),

/***/ "./src/component/web/baseField/CheckBoxGroupField.jsx":
/*!************************************************************!*\
  !*** ./src/component/web/baseField/CheckBoxGroupField.jsx ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.array.index-of.js */ \"../../node_modules/core-js/modules/es.array.index-of.js\");\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\n__webpack_require__(/*! core-js/modules/es.object.assign.js */ \"../../node_modules/core-js/modules/es.object.assign.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.keys.js */ \"../../node_modules/core-js/modules/es.object.keys.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.array.for-each.js */ \"../../node_modules/core-js/modules/es.array.for-each.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ \"../../node_modules/core-js/modules/web.dom-collections.for-each.js\");\nvar _react = _interopRequireDefault(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _CheckBoxGroup = _interopRequireDefault(__webpack_require__(/*! @/component/web/base/CheckBoxGroup.jsx */ \"./src/component/web/base/CheckBoxGroup.jsx\"));\nvar _componentutil = __webpack_require__(/*! @/util/componentutil */ \"./src/util/componentutil.js\");\nvar _serverproperties = __webpack_require__(/*! @/constant/serverproperties.js */ \"./src/constant/serverproperties.js\");\nvar _langUtil = __webpack_require__(/*! @/util/langUtil */ \"./src/util/langUtil.js\");\nvar _ControlInfoCollect = __webpack_require__(/*! @/component/common/ControlInfoCollect */ \"./src/component/common/ControlInfoCollect.js\");\nvar _UpdateComboDataWrap = __webpack_require__(/*! @/component/common/UpdateComboDataWrap */ \"./src/component/common/UpdateComboDataWrap.jsx\");\nvar _excluded = [\"model\", \"option\"];\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nvar CheckBoxGroupField = function CheckBoxGroupField(props) {\n  var model = props.model,\n    option = props.option,\n    other = _objectWithoutProperties(props, _excluded);\n  (0, _ControlInfoCollect.useControlInfoCollect)(model); // 对多选字段进行埋点，后面使用量多了可以去掉\n  (0, _UpdateComboDataWrap.useUpdateComboItemData)(props); // 添加控件方法修改item值\n  var items = (0, _componentutil.getComponentDataProperty)(model, _serverproperties.STORE, ['item', _serverproperties.STORE]) || []; // 取元数据中st的值\n  var array = [];\n  items.forEach(function (item) {\n    var value = item.get(0);\n    var text = (0, _langUtil.getValueByPath)(item, [1], {\n      current: model.getUserLocale()\n    });\n    var itemVisible = item.get(3);\n    var itemDisabled = item.get(4);\n    array.push({\n      value: value,\n      text: text,\n      itemVisible: itemVisible,\n      disabled: itemDisabled\n    });\n  });\n  var flatStyle = option.get(_serverproperties.FLAT_STYLE); // 选项风格 0:圆框 1:方框\n  var flatLayout = option.get(_serverproperties.FLAT_LAYOUT); // 选项方向 0:横向 1:纵向\n  return /*#__PURE__*/_react[\"default\"].createElement(_CheckBoxGroup[\"default\"], _extends({\n    noValue: (0, _componentutil.getNOValue)(),\n    flatStyle: flatStyle,\n    flatLayout: flatLayout,\n    items: array\n  }, other));\n};\nvar _default = exports[\"default\"] = CheckBoxGroupField;\n\n//# sourceURL=webpack://bos-platform/./src/component/web/baseField/CheckBoxGroupField.jsx?");

/***/ }),

/***/ "./src/component/web/baseField/GeographicLocationField.jsx":
/*!*****************************************************************!*\
  !*** ./src/component/web/baseField/GeographicLocationField.jsx ***!
  \*****************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.filter.js */ \"../../node_modules/core-js/modules/es.array.filter.js\");\n__webpack_require__(/*! core-js/modules/es.array.for-each.js */ \"../../node_modules/core-js/modules/es.array.for-each.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.create.js */ \"../../node_modules/core-js/modules/es.object.create.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-properties.js */ \"../../node_modules/core-js/modules/es.object.define-properties.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptors.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptors.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.get-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.keys.js */ \"../../node_modules/core-js/modules/es.object.keys.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.reflect.construct.js */ \"../../node_modules/core-js/modules/es.reflect.construct.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ \"../../node_modules/core-js/modules/web.dom-collections.for-each.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\n__webpack_require__(/*! core-js/modules/es.object.set-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.set-prototype-of.js\");\nvar _react = _interopRequireDefault(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _immutable = __webpack_require__(/*! immutable */ \"webpack/sharing/consume/default/immutable/immutable?f2ca\");\nvar _GeographicLocationByAMap = _interopRequireDefault(__webpack_require__(/*! @/component/web/base/GeographicLocation/GeographicLocationByAMap */ \"./src/component/web/base/GeographicLocation/GeographicLocationByAMap.js\"));\nvar _GeographicLocationByGMap = _interopRequireDefault(__webpack_require__(/*! @/component/web/base/GeographicLocation/GeographicLocationByGMap */ \"./src/component/web/base/GeographicLocation/GeographicLocationByGMap.js\"));\nvar _GeographicLocation = _interopRequireDefault(__webpack_require__(/*! @/component/web/base/GeographicLocation/GeographicLocation */ \"./src/component/web/base/GeographicLocation/GeographicLocation.js\"));\nvar _componentutil = __webpack_require__(/*! @/util/componentutil */ \"./src/util/componentutil.js\");\nvar _serverproperties = __webpack_require__(/*! @/constant/serverproperties */ \"./src/constant/serverproperties.js\");\nvar _mapUtil = __webpack_require__(/*! @/util/mapUtil */ \"./src/util/mapUtil.js\");\nvar _mapConst = __webpack_require__(/*! @/constant/mapConst */ \"./src/constant/mapConst.js\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nvar getLabelStyle = function getLabelStyle(model) {\n  var commonStyle = (0, _componentutil.getCommonStyle)(model);\n  return {\n    color: commonStyle.color,\n    fontSize: commonStyle.fontSize,\n    fontWeight: commonStyle.fontWeight,\n    backgroundColor: commonStyle.backgroundColor\n  };\n};\nvar getInputStyle = function getInputStyle(model) {\n  var fieldStyle = (0, _componentutil.getCommonStyle)(model);\n  var style = model.getMetaProperty([_serverproperties.ITEM]) || (0, _immutable.Map)();\n  return {\n    color: style.get(_serverproperties.COLOR, fieldStyle.color),\n    backgroundColor: style.get(_serverproperties.BACKGROUND_COLOR, fieldStyle.backgroundColor),\n    fontSize: style.get(_serverproperties.FONT_SIZE, fieldStyle.fontSize),\n    fontWeight: 'normal'\n  };\n};\nvar GeographicLocationField = /*#__PURE__*/function (_React$Component) {\n  _inherits(GeographicLocationField, _React$Component);\n  function GeographicLocationField(props) {\n    var _this;\n    _classCallCheck(this, GeographicLocationField);\n    _this = _callSuper(this, GeographicLocationField, [props]);\n    _this.mapConfig = (0, _mapUtil.getMapConfig)();\n    return _this;\n  }\n  _createClass(GeographicLocationField, [{\n    key: \"render\",\n    value: function render() {\n      var _this$mapConfig, _this$mapConfig2, _this$mapConfig3, _this$mapConfig6, _this$mapConfig8;\n      var _this$props = this.props,\n        model = _this$props.model,\n        isLocked = _this$props.isLocked,\n        locale = _this$props.locale,\n        updateModel = _this$props.updateModel,\n        required = _this$props.required,\n        showFormByTips = _this$props.showFormByTips,\n        slot = _this$props.slot,\n        dataPageId = _this$props.dataPageId,\n        clickTipsLink = _this$props.clickTipsLink;\n      var style = (0, _componentutil.getCommonStyle)(model);\n      var dataValue = model.getDataValue() || (0, _immutable.Map)();\n      var location = {\n        lat: dataValue.get('la') || 0,\n        lng: dataValue.get('lo') || 0\n      };\n      var address = dataValue.get('ad') || '';\n      var labelStyle = getLabelStyle(model);\n      var selectStyle = getInputStyle(model);\n      var inputStyle = _objectSpread({}, selectStyle);\n      var poiType = (0, _componentutil.getComponentDataProperty)(model, 'poiType', 'poiType', false) || '';\n      var radius = (0, _componentutil.getComponentDataProperty)(model, 'radius', 'radius', false) || 500;\n      var loadMapFail = (0, _mapUtil.isDefaultModeWithoutKey)(this.mapConfig);\n      if (((_this$mapConfig = this.mapConfig) === null || _this$mapConfig === void 0 ? void 0 : _this$mapConfig.mapService) === _mapConst.BaiduMap || ((_this$mapConfig2 = this.mapConfig) === null || _this$mapConfig2 === void 0 ? void 0 : _this$mapConfig2.mapService) === 'default' || ((_this$mapConfig3 = this.mapConfig) === null || _this$mapConfig3 === void 0 ? void 0 : _this$mapConfig3.mapService) === '') {\n        var _this$mapConfig4, _this$mapConfig5;\n        var mapKey = (_this$mapConfig4 = this.mapConfig) === null || _this$mapConfig4 === void 0 ? void 0 : _this$mapConfig4.mapKey;\n        var apiKey = (_this$mapConfig5 = this.mapConfig) === null || _this$mapConfig5 === void 0 ? void 0 : _this$mapConfig5.apiKey;\n        return /*#__PURE__*/_react[\"default\"].createElement(_GeographicLocation[\"default\"], {\n          address: address,\n          apiKey: apiKey,\n          containerStyle: style,\n          dataPageId: dataPageId,\n          inputStyle: inputStyle,\n          isLocked: isLocked,\n          labelStyle: labelStyle,\n          locale: locale,\n          location: location,\n          mapKey: mapKey,\n          required: required,\n          selectStyle: selectStyle,\n          update: updateModel,\n          poiType: poiType,\n          radius: radius,\n          slot: slot,\n          clickTipsLink: clickTipsLink,\n          showFormByTips: showFormByTips,\n          loadMapFail: loadMapFail\n        });\n      } else if (((_this$mapConfig6 = this.mapConfig) === null || _this$mapConfig6 === void 0 ? void 0 : _this$mapConfig6.mapService) === _mapConst.GoogleMap) {\n        var _this$mapConfig7;\n        return /*#__PURE__*/_react[\"default\"].createElement(_GeographicLocationByGMap[\"default\"], {\n          id: model.key,\n          pageId: model.pageId,\n          isLocked: isLocked,\n          address: address,\n          containerStyle: style,\n          dataPageId: dataPageId,\n          inputStyle: inputStyle,\n          labelStyle: labelStyle,\n          mapKey: (_this$mapConfig7 = this.mapConfig) === null || _this$mapConfig7 === void 0 ? void 0 : _this$mapConfig7.mapKey,\n          locale: locale,\n          location: location,\n          required: required,\n          selectStyle: selectStyle,\n          update: updateModel,\n          poiType: poiType,\n          radius: radius,\n          slot: slot,\n          clickTipsLink: clickTipsLink,\n          showFormByTips: showFormByTips\n        });\n      }\n      return /*#__PURE__*/_react[\"default\"].createElement(_GeographicLocationByAMap[\"default\"], {\n        isLocked: isLocked,\n        address: address,\n        containerStyle: style,\n        dataPageId: dataPageId,\n        id: model.key,\n        inputStyle: inputStyle,\n        labelStyle: labelStyle,\n        mapKey: (_this$mapConfig8 = this.mapConfig) === null || _this$mapConfig8 === void 0 ? void 0 : _this$mapConfig8.mapKey,\n        locale: locale,\n        location: location,\n        required: required,\n        selectStyle: selectStyle,\n        update: updateModel,\n        poiType: poiType,\n        radius: radius,\n        slot: slot,\n        clickTipsLink: clickTipsLink,\n        showFormByTips: showFormByTips\n      });\n    }\n  }]);\n  return GeographicLocationField;\n}(_react[\"default\"].Component);\nvar _default = exports[\"default\"] = GeographicLocationField;\n\n//# sourceURL=webpack://bos-platform/./src/component/web/baseField/GeographicLocationField.jsx?");

/***/ }),

/***/ "./src/component/web/baseField/NumberField.jsx":
/*!*****************************************************!*\
  !*** ./src/component/web/baseField/NumberField.jsx ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.array.from.js */ \"../../node_modules/core-js/modules/es.array.from.js\");\n__webpack_require__(/*! core-js/modules/es.array.index-of.js */ \"../../node_modules/core-js/modules/es.array.index-of.js\");\n__webpack_require__(/*! core-js/modules/es.array.is-array.js */ \"../../node_modules/core-js/modules/es.array.is-array.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.array.slice.js */ \"../../node_modules/core-js/modules/es.array.slice.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-string.js */ \"../../node_modules/core-js/modules/es.date.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\n__webpack_require__(/*! core-js/modules/es.function.name.js */ \"../../node_modules/core-js/modules/es.function.name.js\");\n__webpack_require__(/*! core-js/modules/es.object.assign.js */ \"../../node_modules/core-js/modules/es.object.assign.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.keys.js */ \"../../node_modules/core-js/modules/es.object.keys.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.regexp.exec.js */ \"../../node_modules/core-js/modules/es.regexp.exec.js\");\n__webpack_require__(/*! core-js/modules/es.regexp.to-string.js */ \"../../node_modules/core-js/modules/es.regexp.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = NumberField;\n__webpack_require__(/*! core-js/modules/es.array.includes.js */ \"../../node_modules/core-js/modules/es.array.includes.js\");\n__webpack_require__(/*! core-js/modules/es.array.map.js */ \"../../node_modules/core-js/modules/es.array.map.js\");\nvar _react = _interopRequireDefault(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _BaseComponents = __webpack_require__(/*! ../base/BaseComponents */ \"./src/component/web/base/BaseComponents/index.js\");\nvar _componentutil = __webpack_require__(/*! @/util/componentutil */ \"./src/util/componentutil.js\");\nvar _serverproperties = __webpack_require__(/*! @/constant/serverproperties */ \"./src/constant/serverproperties.js\");\nvar _appModelFunction = __webpack_require__(/*! @/model/appModelFunction */ \"./src/model/appModelFunction.js\");\nvar _const = __webpack_require__(/*! @/constant/const */ \"./src/constant/const.js\");\nvar _excluded = [\"model\", \"option\", \"lockedEmptyValue\", \"shouldGetFormattedValueOnBlur\"];\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nfunction NumberField(_ref) {\n  var _option$get;\n  var _ref$model = _ref.model,\n    model = _ref$model === void 0 ? {} : _ref$model,\n    option = _ref.option,\n    lockedEmptyValue = _ref.lockedEmptyValue,\n    shouldGetFormattedValueOnBlur = _ref.shouldGetFormattedValueOnBlur,\n    other = _objectWithoutProperties(_ref, _excluded);\n  var numType = option.get(_serverproperties.NUM_TYPE); // 数字类型\n  var scale = option.get(_serverproperties.SCALE); // 小数精度\n  var scaleDependencies = (_option$get = option.get(_serverproperties.SCALE_DEPENDENCIES)) === null || _option$get === void 0 ? void 0 : _option$get.toJS();\n  var displayScale = option.get(_serverproperties.DISPLAY_SCALE); // 显示精度，仅用于显示态\n  var decimalPrecision = scale;\n  var code = '';\n  var symbol = '';\n  var visible = true;\n\n  // 获取币别相关\n  var state = model.state,\n    pageId = model.pageId,\n    key = model.key;\n  // 金额、单价、币别\n  if (['qty', 'price', 'amount'].includes(numType)) {\n    var sourceFieldInfo = (0, _appModelFunction.getSourceFiledInfoById)(pageId, option.get(_serverproperties.SOURCE_FIELD))(state);\n    if (sourceFieldInfo) {\n      decimalPrecision = sourceFieldInfo[_const.NUMBER_TYPE_PRECISION[numType]];\n      if (['price', 'amount'].includes(numType)) {\n        symbol = sourceFieldInfo[_serverproperties.CURRENY_SYMBOL];\n        code = sourceFieldInfo[_serverproperties.CURRENY_CODE];\n        visible = sourceFieldInfo[_serverproperties.IS_SHOW_SIGN];\n      }\n    } else if (['price', 'amount'].includes(numType)) {\n      var mainCurrencyFormat = (0, _componentutil.getMainCurrencyFormatConfig)(); // 本位币\n      if (mainCurrencyFormat && mainCurrencyFormat[_const.NUMBER_TYPE_PRECISION[numType]] !== undefined) {\n        decimalPrecision = mainCurrencyFormat[_const.NUMBER_TYPE_PRECISION[numType]];\n      }\n    }\n  }\n  if (scaleDependencies) {\n    var dependenciesScale = (0, _componentutil.getScaleFromDependencies)({\n      pageId: pageId,\n      key: key,\n      scaleDependencies: scaleDependencies\n    });\n    if (dependenciesScale !== undefined) {\n      decimalPrecision = dependenciesScale;\n    }\n  }\n  var optionsName = [_serverproperties.MASK, _serverproperties.DISPLAY_FORMAT, _serverproperties.MIN_VALUE, _serverproperties.MAX_VALUE, _serverproperties.MIN_MARK, _serverproperties.MAX_MARK, _serverproperties.ZERO_SHOW, _serverproperties.NO_DISPLAY_SCALE_ZERO, _serverproperties.ROUND_METHOD, _serverproperties.SYSTEM_MAX, _serverproperties.SYSTEM_MIN, _serverproperties.MUST_INPUT];\n  var _optionsName$map = optionsName.map(function (name) {\n      return option.get(name);\n    }),\n    _optionsName$map2 = _slicedToArray(_optionsName$map, 12),\n    mask = _optionsName$map2[0],\n    displayFormat = _optionsName$map2[1],\n    min = _optionsName$map2[2],\n    max = _optionsName$map2[3],\n    minMark = _optionsName$map2[4],\n    maxMark = _optionsName$map2[5],\n    zeroShow = _optionsName$map2[6],\n    noDisplayDecimalTailZero = _optionsName$map2[7],\n    roundMethod = _optionsName$map2[8],\n    sysMax = _optionsName$map2[9],\n    sysMin = _optionsName$map2[10],\n    required = _optionsName$map2[11];\n\n  // 整体精度根据小数精度去重算，针对金额币别有关联的情况\n  var integerPrecision = option.get(_serverproperties.PRECISION);\n  if (scale !== decimalPrecision) {\n    integerPrecision = integerPrecision - scale + decimalPrecision;\n  }\n  var noValue = lockedEmptyValue || (0, _componentutil.getNOValue)(); // 获取”锁定非空提示“，如获取不到再取noValue\n\n  return /*#__PURE__*/_react[\"default\"].createElement(_BaseComponents.Number, _extends({\n    noValue: noValue,\n    type: numType,\n    digitLength: integerPrecision,\n    decimalLength: decimalPrecision,\n    displayDecimalLength: displayScale || decimalPrecision,\n    showSymbol: visible,\n    code: code,\n    required: required,\n    sysMin: sysMin,\n    sysMax: sysMax,\n    symbol: symbol,\n    mask: mask,\n    displayFormat: displayFormat,\n    min: min,\n    max: max,\n    minMark: minMark,\n    maxMark: maxMark,\n    zeroShow: zeroShow,\n    noDisplayDecimalTailZero: noDisplayDecimalTailZero,\n    roundMethod: roundMethod || '0',\n    shouldGetFormattedValueOnBlur: shouldGetFormattedValueOnBlur\n  }, other));\n}\n\n//# sourceURL=webpack://bos-platform/./src/component/web/baseField/NumberField.jsx?");

/***/ }),

/***/ "./src/component/web/baseField/RadioField.jsx":
/*!****************************************************!*\
  !*** ./src/component/web/baseField/RadioField.jsx ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.array.index-of.js */ \"../../node_modules/core-js/modules/es.array.index-of.js\");\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\n__webpack_require__(/*! core-js/modules/es.object.assign.js */ \"../../node_modules/core-js/modules/es.object.assign.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.keys.js */ \"../../node_modules/core-js/modules/es.object.keys.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = RadioField;\n__webpack_require__(/*! core-js/modules/es.object.is.js */ \"../../node_modules/core-js/modules/es.object.is.js\");\nvar _react = _interopRequireDefault(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _propTypes = _interopRequireDefault(__webpack_require__(/*! prop-types */ \"../../node_modules/prop-types/index.js\"));\nvar _BaseComponents = __webpack_require__(/*! ../base/BaseComponents */ \"./src/component/web/base/BaseComponents/index.js\");\nvar _serverproperties = __webpack_require__(/*! ../../../constant/serverproperties */ \"./src/constant/serverproperties.js\");\nvar _appModelFunction = __webpack_require__(/*! ../../../model/appModelFunction */ \"./src/model/appModelFunction.js\");\nvar _excluded = [\"isNoUnderLineLockStyle\", \"model\", \"option\", \"style\", \"value\", \"onBlur\", \"placeholder\", \"maxLength\", \"showTitle\", \"isGroupLocked\", \"disabled\"];\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n/**\n * web端单选框字段封装类\n */\nfunction RadioField(props) {\n  var isNoUnderLineLockStyle = props.isNoUnderLineLockStyle,\n    model = props.model,\n    option = props.option,\n    style = props.style,\n    value = props.value,\n    onBlur = props.onBlur,\n    placeholder = props.placeholder,\n    maxLength = props.maxLength,\n    showTitle = props.showTitle,\n    isGroupLocked = props.isGroupLocked,\n    disabled = props.disabled,\n    other = _objectWithoutProperties(props, _excluded);\n  var text = model.getMetaLocaleProperty('caption');\n  var group = option.get(_serverproperties.GROUP);\n  var radioValue = option.get(_serverproperties.VALUE);\n  var checked;\n  var fieldStyle;\n  radioValue = radioValue === null ? '' : radioValue;\n  if (group) {\n    var rdGroup = (0, _appModelFunction.getItemMeta)(model.pageId, group)(model.state);\n    if (rdGroup) {\n      checked = Object.is(value, radioValue);\n      fieldStyle = rdGroup.getIn([_serverproperties.ITEM, _serverproperties.FIELD_STYLE]);\n    } else {\n      console.error('按钮组或按钮组所在容器不可见，请把按钮组或按钮组所在容器设为可见'); // 处理按钮组或按钮组所在容器不可见状态下报错的问题，并给出相关提示\n      return /*#__PURE__*/_react[\"default\"].createElement(\"span\", null);\n    }\n  }\n  return /*#__PURE__*/_react[\"default\"].createElement(_BaseComponents.Radio, _extends({\n    style: style,\n    text: text,\n    group: group,\n    checked: checked,\n    value: radioValue\n  }, other, {\n    disabled: isGroupLocked || disabled,\n    fieldStyle: fieldStyle\n  }));\n}\nRadioField.propTypes = {\n  model: _propTypes[\"default\"].object.isRequired,\n  option: _propTypes[\"default\"].object.isRequired,\n  style: _propTypes[\"default\"].object.isRequired\n};\n\n//# sourceURL=webpack://bos-platform/./src/component/web/baseField/RadioField.jsx?");

/***/ }),

/***/ "./src/component/web/baseField/RadioOptGroupField.js":
/*!***********************************************************!*\
  !*** ./src/component/web/baseField/RadioOptGroupField.js ***!
  \***********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = RadioOptGroupField;\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\nvar _react = _interopRequireDefault(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _RadioGroup = _interopRequireDefault(__webpack_require__(/*! ../base/BaseComponents/RadioGroup */ \"./src/component/web/base/BaseComponents/RadioGroup.js\"));\nvar _componentutil = __webpack_require__(/*! @/util/componentutil */ \"./src/util/componentutil.js\");\nvar _serverproperties = __webpack_require__(/*! @/constant/serverproperties */ \"./src/constant/serverproperties.js\");\nvar _RadioOptGroupField = _interopRequireDefault(__webpack_require__(/*! ./RadioOptGroupField.less */ \"./src/component/web/baseField/RadioOptGroupField.less\"));\nvar _classnames = _interopRequireDefault(__webpack_require__(/*! classnames */ \"../../node_modules/classnames/index.js\"));\nvar _radioGroupUtils = __webpack_require__(/*! @/util/component/radioGroupUtils */ \"./src/util/component/radioGroupUtils.js\");\nvar _ControlInfoCollect = __webpack_require__(/*! @/component/common/ControlInfoCollect */ \"./src/component/common/ControlInfoCollect.js\");\nvar _UpdateComboDataWrap = __webpack_require__(/*! @/component/common/UpdateComboDataWrap */ \"./src/component/common/UpdateComboDataWrap.jsx\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction RadioOptGroupField(props) {\n  var model = props.model,\n    option = props.option;\n  (0, _ControlInfoCollect.useControlInfoCollect)(model); // 对单选字段进行埋点，后面使用量多了可以去掉\n  (0, _UpdateComboDataWrap.useUpdateComboItemData)(props); // 添加控件方法修改item值\n\n  var optionType = option.get(_serverproperties.FLAT_STYLE);\n  var optionDir = option.get(_serverproperties.FLAT_LAYOUT);\n  var items = (0, _componentutil.getComponentDataProperty)(model, _serverproperties.STORE, ['item', _serverproperties.STORE]) || [];\n  var options = (0, _radioGroupUtils.mapTransformOptions)(items.toJS());\n  var radioGroupCls = (0, _classnames[\"default\"])(_defineProperty({}, _RadioOptGroupField[\"default\"]['radio-opt-group-field-v'], true));\n  return /*#__PURE__*/_react[\"default\"].createElement(_RadioGroup[\"default\"], {\n    options: options,\n    value: props.value,\n    optionType: optionType,\n    optionDir: optionDir,\n    className: radioGroupCls,\n    disabled: props.lock,\n    readOnly: props.isView && props.disabled,\n    \"data-shortcut\": props['data-shortcut'],\n    tabIndex: props.tabIndex,\n    skipToParentNextField: true,\n    style: props.style,\n    onChange: props.onChange\n  });\n}\n\n//# sourceURL=webpack://bos-platform/./src/component/web/baseField/RadioOptGroupField.js?");

/***/ }),

/***/ "./src/component/web/baseField/RichTextField.jsx":
/*!*******************************************************!*\
  !*** ./src/component/web/baseField/RichTextField.jsx ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.filter.js */ \"../../node_modules/core-js/modules/es.array.filter.js\");\n__webpack_require__(/*! core-js/modules/es.array.from.js */ \"../../node_modules/core-js/modules/es.array.from.js\");\n__webpack_require__(/*! core-js/modules/es.array.index-of.js */ \"../../node_modules/core-js/modules/es.array.index-of.js\");\n__webpack_require__(/*! core-js/modules/es.array.is-array.js */ \"../../node_modules/core-js/modules/es.array.is-array.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.array.slice.js */ \"../../node_modules/core-js/modules/es.array.slice.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-string.js */ \"../../node_modules/core-js/modules/es.date.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\n__webpack_require__(/*! core-js/modules/es.function.name.js */ \"../../node_modules/core-js/modules/es.function.name.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-properties.js */ \"../../node_modules/core-js/modules/es.object.define-properties.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptors.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptors.js\");\n__webpack_require__(/*! core-js/modules/es.object.keys.js */ \"../../node_modules/core-js/modules/es.object.keys.js\");\n__webpack_require__(/*! core-js/modules/es.regexp.exec.js */ \"../../node_modules/core-js/modules/es.regexp.exec.js\");\n__webpack_require__(/*! core-js/modules/es.regexp.to-string.js */ \"../../node_modules/core-js/modules/es.regexp.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.array.for-each.js */ \"../../node_modules/core-js/modules/es.array.for-each.js\");\n__webpack_require__(/*! core-js/modules/es.object.assign.js */ \"../../node_modules/core-js/modules/es.object.assign.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.parse-float.js */ \"../../node_modules/core-js/modules/es.parse-float.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ \"../../node_modules/core-js/modules/web.dom-collections.for-each.js\");\nvar _react = _interopRequireWildcard(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _index = __webpack_require__(/*! @/component/web/base/RichTextEditor/index */ \"./src/component/web/base/RichTextEditor/index.js\");\nvar _RichTextField = _interopRequireDefault(__webpack_require__(/*! ./RichTextField.less */ \"./src/component/web/baseField/RichTextField.less\"));\nvar _classnames4 = _interopRequireDefault(__webpack_require__(/*! classnames */ \"../../node_modules/classnames/index.js\"));\nvar _fieldaction = __webpack_require__(/*! @/action/fieldaction */ \"./src/action/fieldaction.js\");\nvar _componentutil = __webpack_require__(/*! @/util/componentutil */ \"./src/util/componentutil.js\");\nvar _server = __webpack_require__(/*! @/action/actionname/control/richTextEditor/server */ \"./src/action/actionname/control/richTextEditor/server/index.js\");\nvar _memoryCacher = __webpack_require__(/*! @/model/memoryCacher */ \"./src/model/memoryCacher.js\");\nvar _const = __webpack_require__(/*! @/constant/const */ \"./src/constant/const.js\");\nvar _serverproperties = __webpack_require__(/*! @/constant/serverproperties */ \"./src/constant/serverproperties.js\");\nvar _util = __webpack_require__(/*! @/component/web/base/RichTextEditor/util */ \"./src/component/web/base/RichTextEditor/util.js\");\nvar _fetchResponseHeader = __webpack_require__(/*! @/util/fetchResponseHeader */ \"./src/util/fetchResponseHeader.js\");\nvar _appModelFunction = __webpack_require__(/*! @/model/appModelFunction */ \"./src/model/appModelFunction.js\");\nvar _intlApi = __webpack_require__(/*! @/i18n/intlApi */ \"./src/i18n/intlApi.js\");\nvar _richTextUtil = __webpack_require__(/*! @/util/richTextUtil.js */ \"./src/util/richTextUtil.js\");\nvar _BaseComponents = __webpack_require__(/*! @/component/web/base/BaseComponents */ \"./src/component/web/base/BaseComponents/index.js\");\nvar _const2 = __webpack_require__(/*! @/component/web/base/RichTextEditor/TinymceEditor/const */ \"./src/component/web/base/RichTextEditor/TinymceEditor/const.js\");\nvar _GlobalDataCacher = __webpack_require__(/*! @/model/GlobalDataCacher */ \"./src/model/GlobalDataCacher.js\");\nvar _symbolConst = __webpack_require__(/*! @/constant/symbolConst */ \"./src/constant/symbolConst.js\");\nvar _excluded = [\"model\", \"field\", \"appId\", \"formId\", \"value\", \"className\", \"disabled\", \"mustInput\", \"placeholder\", \"isFireUpdate\", \"lockAutoHeight\", \"toolbarItems\", \"showTitle\", \"labelText\", \"labelDirection\", \"labelTextAlign\", \"labelStyle\", \"dispatch\", \"slot\", \"onBlur\", \"style\"];\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nfunction RichTextField(_ref) {\n  var _style$fontSize, _style$height;\n  var model = _ref.model,\n    field = _ref.field,\n    appId = _ref.appId,\n    formId = _ref.formId,\n    value = _ref.value,\n    className = _ref.className,\n    disabled = _ref.disabled,\n    mustInput = _ref.mustInput,\n    placeholder = _ref.placeholder,\n    isFireUpdate = _ref.isFireUpdate,\n    lockAutoHeight = _ref.lockAutoHeight,\n    _ref$toolbarItems = _ref.toolbarItems,\n    toolbarItems = _ref$toolbarItems === void 0 ? _const2.DEFAULT_SIMPLE_TOOLBARITEMS : _ref$toolbarItems,\n    _ref$showTitle = _ref.showTitle,\n    showTitle = _ref$showTitle === void 0 ? true : _ref$showTitle,\n    labelText = _ref.labelText,\n    labelDirection = _ref.labelDirection,\n    labelTextAlign = _ref.labelTextAlign,\n    _ref$labelStyle = _ref.labelStyle,\n    labelStyle = _ref$labelStyle === void 0 ? {} : _ref$labelStyle,\n    dispatch = _ref.dispatch,\n    slot = _ref.slot,\n    onBlur = _ref.onBlur,\n    style = _ref.style,\n    others = _objectWithoutProperties(_ref, _excluded);\n  var _useState = (0, _react.useState)(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    showError = _useState2[0],\n    setShowError = _useState2[1];\n  var _useState3 = (0, _react.useState)(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    reinitialize = _useState4[0],\n    setReinitialize = _useState4[1];\n  var editorRef = (0, _react.useRef)();\n  var postDataRef = (0, _react.useRef)();\n  (0, _react.useEffect)(function () {\n    // 页签交换位置元素重排，导致tinymce中iframe空白，需要重新初始化tinymce\n    var removeTabSwapPositonListener = (0, _GlobalDataCacher.addDataChangeListener)(_symbolConst.KEY_TAB_SWAP_POSITION, function () {\n      setReinitialize(!reinitialize);\n    });\n    return function () {\n      removeTabSwapPositonListener();\n    };\n  }, [reinitialize]);\n  (0, _react.useEffect)(function () {\n    var pageId = model.pageId,\n      key = model.key;\n    var removeValidatorListener = (0, _memoryCacher.subscribeValidatorMethod)(pageId, key, _const.VALIDATE_MSG_TYPE.notNull, handleValidateDataChange);\n    var removeInsertHandler = (0, _memoryCacher.subscribeControlMethod)(pageId, key, 'directives', function (data) {\n      if (!data) return;\n      executeMethods(data);\n    });\n    return function () {\n      removeValidatorListener();\n      removeInsertHandler();\n    };\n  }, [model === null || model === void 0 ? void 0 : model.pageId, model === null || model === void 0 ? void 0 : model.key]);\n  (0, _react.useEffect)(function () {\n    postDataRef.current = value;\n  }, [value]);\n\n  // 处理校验结果。校验结果，成功返回 true\n  var handleValidateDataChange = function handleValidateDataChange(changeInfo) {\n    var showError = changeInfo !== undefined && !changeInfo.success;\n    setShowError(showError);\n  };\n  var changeAction = function changeAction(value) {\n    postDataRef.current = value;\n  };\n\n  // 执行控件方法\n  var executeMethods = function executeMethods(methods) {\n    methods.forEach(function (method) {\n      var args = method.args,\n        methodname = method.methodname;\n      switch (methodname) {\n        case _server.RICH_TEXT_EDITOR_INSERT_TEXT:\n          {\n            var _args = _slicedToArray(args, 1),\n              content = _args[0];\n            if (content && editorRef.current && editorRef.current.insertContent) {\n              editorRef.current.insertContent(content);\n            }\n          }\n          break;\n        case _server.RICH_TEXT_EDITOR_SET_FOCUS:\n          if (editorRef.current && editorRef.current.focus) {\n            editorRef.current.focus();\n          }\n          break;\n        default:\n          break;\n      }\n    });\n  };\n  var getValue = function getValue() {\n    if (disabled && !value) {\n      return _const.RICHTEXTFIELD_DISABLED_NO_VALUE;\n    }\n    return value;\n  };\n\n  // 锁定可打印预览，暂时不支持\n  var getCanPrint = function getCanPrint(model) {\n    return false;\n    // const canPrint = getComponentDataProperty(model, LOCK_PRINTTABLE, LOCK_PRINTTABLE, false)\n    // return (canPrint !== null && canPrint !== undefined) ? canPrint : false\n  };\n  var _inputFocus = function _inputFocus(evt) {\n    sendFocusEvent2Server(true);\n  };\n  var inputBlur = function inputBlur(evt) {\n    sendFocusEvent2Server(false);\n    var value = postDataRef.current;\n    // 判断字符串是否超出最大限制\n    var maxRichTextLength = model.getMetaProperty(_serverproperties.MAX_RICHTEXT_LENGTH) || 20;\n    var maxByteLength = maxRichTextLength * 1024 * 1024;\n    var textByteLength = (0, _richTextUtil.getLenByByte)(value);\n    // 超出，字符串截断, 并提示用户输入超出\n    if (maxByteLength && textByteLength > maxByteLength) {\n      value = (0, _richTextUtil.getCutStr)(value, maxByteLength);\n      var msg = (0, _intlApi.getLangMsg)({\n        key: 'RichTextEditor.key0001',\n        variables: {\n          maxRichTextLength: maxRichTextLength\n        }\n      });\n      (0, _appModelFunction.setDataMessages)(model.pageId, {\n        content: msg,\n        type: _const.AlertType.WARNING,\n        duration: 5000\n      });\n    }\n    onBlur && onBlur({\n      value: value\n    });\n  };\n  var sendFocusEvent2Server = function sendFocusEvent2Server(isFocus) {\n    var isTriggerFocus = model.getMetaProperty(_serverproperties.FIELD_FOCUS);\n    if (isTriggerFocus) {\n      dispatch && dispatch((0, _fieldaction.inputFocus)(model, isFocus));\n    }\n  };\n  var renderTitle = function renderTitle(disabled) {\n    var titleWidth = isLabelHorizontal ? _const.FIELD_DEFAULT_STYLE.horizontalTitleWidth : '';\n    var titleStyle = {\n      width: labelStyle.width === undefined || labelStyle.width === '' ? titleWidth : labelStyle.width\n    };\n    var titleContainerStyle = _objectSpread({}, titleStyle);\n    if (labelStyle.width) {\n      // 如果设置了宽度，则不启用压缩\n      titleContainerStyle = Object.assign({}, labelStyle, {\n        flexShrink: 0\n      });\n    }\n    titleContainerStyle.color = style && style.color;\n    // 左对齐时必填符号跟着标题，去除宽度设置\n    if (labelTextAlign === 'left' && titleStyle.width) {\n      delete titleStyle.width;\n    }\n    var textAlignClass = _RichTextField[\"default\"]['label-text-' + labelTextAlign];\n    var labelClz = (0, _classnames4[\"default\"])('kd-cq-field-title-wrap', _defineProperty(_defineProperty(_defineProperty(_defineProperty({}, _RichTextField[\"default\"]['label-wrap'], true), _RichTextField[\"default\"]['no-width'], parseFloat(labelStyle.width) === 0 && showTitle), _RichTextField[\"default\"]['label-disabled'], disabled), textAlignClass, textAlignClass));\n    var titleClz = (0, _classnames4[\"default\"])(_RichTextField[\"default\"]['title-wrapper'], _RichTextField[\"default\"][\"title-align-\".concat(labelTextAlign)]);\n    return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      className: labelClz,\n      style: titleContainerStyle\n    }, isLabelHorizontal ? /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      className: titleClz,\n      style: titleStyle,\n      title: labelText\n    }, labelText) : /*#__PURE__*/_react[\"default\"].createElement(_BaseComponents.Label, {\n      text: labelText,\n      Name: labelText,\n      style: {\n        margin: 0,\n        padding: 0\n      },\n      field: field\n    }), mustInput ? /*#__PURE__*/_react[\"default\"].createElement(\"label\", {\n      className: (0, _classnames4[\"default\"])(_RichTextField[\"default\"].must, 'require-icon')\n    }, \"*\") : null, slot);\n  };\n\n  // 获取当前form的语言信息\n  var locale = model.getUserLocale();\n  // 获取默认语言\n  var defaultLocale = model.getDefaultLang();\n  // 二开属性\n  // 设置上传图片路径是绝对路径/相对路径\n  var useRelativePath = (0, _componentutil.getComponentDataProperty)(model, 'useRelativePath', 'useRelativePath', false);\n  var imageUrlPrefix = useRelativePath ? 'attachment/downloadImage/' : model.getFormConfig().fileserver;\n  // 设置上传图片最大大小\n  var imageMaxSize = (0, _componentutil.getComponentDataProperty)(model, 'imageMaxSize', 'imageMaxSize', false);\n  // 工具栏菜单中的字体和字体大小等选项支持扩展\n  var configExt = (0, _componentutil.getComponentDataProperty)(model, 'configExt', 'configExt', false);\n  var wordCount = (0, _util.getWordCount)(toolbarItems, false);\n  var canPrint = getCanPrint(model);\n  var _toolbarItems = (0, _util.getToolbarItemsByCondition)(toolbarItems, disabled, wordCount, canPrint);\n  var csrf = (0, _fetchResponseHeader.getResponseHeader)(_const.CSRF_TOKEN);\n  var _getCommonClass = (0, _componentutil.getCommonClass)(model),\n    Grow = _getCommonClass.Grow,\n    Shrink = _getCommonClass.Shrink,\n    AlignSelf = _getCommonClass.AlignSelf;\n  var editorStyle = Object.assign({}, {\n    height: ''\n  }, {\n    fontSize: (_style$fontSize = style === null || style === void 0 ? void 0 : style.fontSize) !== null && _style$fontSize !== void 0 ? _style$fontSize : '14px'\n  });\n  var richTextStyle = Object.assign({}, style, {\n    height: ''\n  });\n  var containerStyle = {\n    height: (_style$height = style === null || style === void 0 ? void 0 : style.height) !== null && _style$height !== void 0 ? _style$height : '300px'\n  };\n  if (lockAutoHeight) {\n    delete containerStyle.height;\n  }\n  // 初始化时是否自动聚焦\n  var autoFocusOnInit = false;\n  var _value = {\n    val: getValue(),\n    timestamp: model.getDataProperty(_const.TIME_STAMP_FRESH) // 时间戳\n  };\n  var isLabelHorizontal = labelDirection === 'h';\n  var richTextClz = (0, _classnames4[\"default\"])('kd-cq-field kd-cq-richtext', _defineProperty(_defineProperty(_defineProperty({}, _RichTextField[\"default\"]['field-item'], true), _RichTextField[\"default\"]['richtext-label'], isLabelHorizontal), \"kd-cq-field-layout-\".concat(labelDirection), true));\n  var valueWrap = (0, _classnames4[\"default\"])('kd-cq-control kd-cq-rich-text', _defineProperty({}, _RichTextField[\"default\"]['value-wrap'], true));\n  return /*#__PURE__*/_react[\"default\"].createElement(\"div\", _extends({\n    className: richTextClz,\n    style: richTextStyle\n  }, others), showTitle && renderTitle(), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    style: containerStyle,\n    className: valueWrap\n  }, /*#__PURE__*/_react[\"default\"].createElement(_index.TinymceEditor, {\n    ref: editorRef,\n    imageMaxSize: imageMaxSize,\n    configExt: configExt,\n    canPrint: canPrint,\n    locale: locale,\n    defaultLocale: defaultLocale,\n    style: editorStyle,\n    Grow: Grow,\n    Shrink: Shrink,\n    AlignSelf: AlignSelf,\n    content: _value,\n    placeholder: placeholder,\n    disabled: disabled,\n    lockAutoHeight: lockAutoHeight,\n    imageUrlPrefix: imageUrlPrefix,\n    autoFocusOnInit: autoFocusOnInit,\n    onChange: function onChange(value) {\n      return changeAction(value);\n    },\n    inputFocus: _inputFocus,\n    inputBlur: inputBlur,\n    toolbarItems: _toolbarItems,\n    wordCount: wordCount,\n    appId: appId,\n    fId: formId,\n    pageId: model.pageId,\n    csrf: csrf,\n    showError: showError,\n    reinitialize: reinitialize\n  })));\n}\nvar _default = exports[\"default\"] = RichTextField;\n\n//# sourceURL=webpack://bos-platform/./src/component/web/baseField/RichTextField.jsx?");

/***/ }),

/***/ "./src/component/web/baseField/SelectField.jsx":
/*!*****************************************************!*\
  !*** ./src/component/web/baseField/SelectField.jsx ***!
  \*****************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.index-of.js */ \"../../node_modules/core-js/modules/es.array.index-of.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.assign.js */ \"../../node_modules/core-js/modules/es.object.assign.js\");\n__webpack_require__(/*! core-js/modules/es.object.create.js */ \"../../node_modules/core-js/modules/es.object.create.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.get-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.keys.js */ \"../../node_modules/core-js/modules/es.object.keys.js\");\n__webpack_require__(/*! core-js/modules/es.object.set-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.set-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.reflect.construct.js */ \"../../node_modules/core-js/modules/es.reflect.construct.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.array.for-each.js */ \"../../node_modules/core-js/modules/es.array.for-each.js\");\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ \"../../node_modules/core-js/modules/web.dom-collections.for-each.js\");\nvar _react = _interopRequireWildcard(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _propTypes = _interopRequireDefault(__webpack_require__(/*! prop-types */ \"../../node_modules/prop-types/index.js\"));\nvar _Select = _interopRequireDefault(__webpack_require__(/*! ../base/Select */ \"./src/component/web/base/Select.js\"));\nvar _serverproperties = __webpack_require__(/*! ../../../constant/serverproperties */ \"./src/constant/serverproperties.js\");\nvar _componentutil = __webpack_require__(/*! @/util/componentutil */ \"./src/util/componentutil.js\");\nvar _langUtil = __webpack_require__(/*! @/util/langUtil */ \"./src/util/langUtil.js\");\nvar _trackingExtendCtrlProps = __webpack_require__(/*! @/constant/trackingExtendCtrlProps */ \"./src/constant/trackingExtendCtrlProps.js\");\nvar _trackingUtils = __webpack_require__(/*! @/util/trackingUtils */ \"./src/util/trackingUtils.js\");\nvar _selectAction = __webpack_require__(/*! @/action/selectAction */ \"./src/action/selectAction.js\");\nvar _Select2 = _interopRequireDefault(__webpack_require__(/*! ../base/Select.less */ \"./src/component/web/base/Select.less\"));\nvar _appModelFunction = __webpack_require__(/*! @/model/appModelFunction */ \"./src/model/appModelFunction.js\");\nvar _intlApi = __webpack_require__(/*! @/i18n/intlApi */ \"./src/i18n/intlApi.js\");\nvar _serverproperties2 = __webpack_require__(/*! @/constant/serverproperties */ \"./src/constant/serverproperties.js\");\nvar _UpdateComboDataWrap = _interopRequireDefault(__webpack_require__(/*! @/component/common/UpdateComboDataWrap.jsx */ \"./src/component/common/UpdateComboDataWrap.jsx\"));\nvar _excluded = [\"model\", \"option\", \"style\", \"fileServer\", \"mustInput\", \"onBlur\", \"showTitle\", \"multiple\", \"allBorder\", \"lock\"];\nvar _class;\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n/**\n * web端下拉列表字段封装类\n */\n\nvar optionRenderFnMap = {\n  DEFAULT_VALUE_FN: 1 // 默认值展示自定义render\n};\nvar SelectField = (0, _UpdateComboDataWrap[\"default\"])(_class = /*#__PURE__*/function (_Component) {\n  _inherits(SelectField, _Component);\n  function SelectField(props) {\n    var _this;\n    _classCallCheck(this, SelectField);\n    _this = _callSuper(this, SelectField, [props]);\n    _this.handleClickAreaTracking = function (clickArea) {\n      var model = _this.props.model;\n      (0, _trackingUtils.sendCtrlPropsEventTracking)({\n        model: model,\n        controlProp: _trackingExtendCtrlProps.trackingExtendCtrlProps.SELECT_CLICK_AREA,\n        controlValue: clickArea\n      });\n    };\n    _this.optionRender = function (defaultValueType, defaultValue) {\n      var fn = _this.optionRenderFn[defaultValueType];\n      if (!fn) return;\n      return function (option, value) {\n        return fn(option, value, defaultValue);\n      };\n    };\n    _this.setDefaultClick = function (e, args) {\n      var _this$props = _this.props,\n        model = _this$props.model,\n        dispatch = _this$props.dispatch;\n      dispatch((0, _selectAction.changeSelectDefaultValue)(model, args));\n      e.stopPropagation();\n    };\n    _this.defaultValueOptionRender = function (option, value, defaultValue) {\n      var isEqual = value === defaultValue;\n      var args = [{\n        id: value,\n        setDefault: !isEqual\n      }]; // 设置默认[{\"id\":\"123\",\"setDefault\":true}]\n      return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        className: _Select2[\"default\"]['default-wrapper']\n      }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        className: _Select2[\"default\"]['default-text']\n      }, option), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        className: _Select2[\"default\"]['default-block']\n      }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        className: _Select2[\"default\"]['default-block-left']\n      }, isEqual && /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n        className: _Select2[\"default\"]['default-icon']\n      }, (0, _intlApi.getLangMsg)('bosd.select.key0001'))), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n        className: _Select2[\"default\"]['default-block-right'],\n        onClick: function onClick(e) {\n          return _this.setDefaultClick(e, args);\n        }\n      }, isEqual ? (0, _intlApi.getLangMsg)('bosd.select.key0003') : (0, _intlApi.getLangMsg)('bosd.select.key0002'))));\n    };\n    _this.getUrl = _this.getUrl.bind(_assertThisInitialized(_this));\n    _this.optionRenderFn = _defineProperty({}, optionRenderFnMap.DEFAULT_VALUE_FN, _this.defaultValueOptionRender);\n    return _this;\n  }\n  _createClass(SelectField, [{\n    key: \"getUrl\",\n    value: function getUrl(imgKey) {\n      // if (imgKey && this.props.fileServer) {\n      // 支持base64图片\n      // if (/^data:?/.test(imgKey)) {\n      //   return imgKey\n      // } else if (!/^http(s)?/.test(imgKey)) {\n      //   return this.props.fileServer + imgKey\n      // } else {\n      //   return imgKey\n      // }\n      return (0, _componentutil.getImgFullPath)(this.props.fileServer, imgKey);\n      // }\n      // return imgKey\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n      var _this$props2 = this.props,\n        model = _this$props2.model,\n        option = _this$props2.option,\n        style = _this$props2.style,\n        fileServer = _this$props2.fileServer,\n        mustInput = _this$props2.mustInput,\n        onBlur = _this$props2.onBlur,\n        showTitle = _this$props2.showTitle,\n        multiple = _this$props2.multiple,\n        allBorder = _this$props2.allBorder,\n        lock = _this$props2.lock,\n        other = _objectWithoutProperties(_this$props2, _excluded);\n      var items = (0, _componentutil.getComponentDataProperty)(model, _serverproperties.STORE, ['item', _serverproperties.STORE]) || [];\n      var array = [];\n      items.forEach(function (item) {\n        var val = item.get(0);\n        var alias = (0, _langUtil.getValueByPath)(item, [1], {\n          current: model.getUserLocale()\n        });\n        var imgkey = _this2.getUrl(item.get(2));\n        var itemVisible = item.get(3);\n        var itemDisabled = item.get(4);\n        array.push({\n          value: val,\n          alias: alias,\n          imgkey: imgkey,\n          itemVisible: itemVisible,\n          disabled: itemDisabled\n        });\n      });\n      var showStyle = option.get('showStyle'); // 与后端杨柳统一协商，改为showStyle\n      var showType = option.get('showtype');\n      var showClearBtn = option.get(_serverproperties.SHOW_CLEAR_BUTTON);\n      var selectedItemStyle = option.get(_serverproperties.SELECTED_ITEM_STYLE);\n      var isLabelStyle = selectedItemStyle === 'label';\n      var defaultValueType = model.getMetaProperty(_serverproperties.DEFAULT_VALUE_TYPE); // 获取到默认值展示的类型\n      var defaultValue = (0, _appModelFunction.getDataProperty)(model.pageId, model.key, ['defaultValue'])(model.state); // 获取到默认值\n      var filterPlaceholder = model.getMetaProperty(_serverproperties2.FILTER_PLACEHOLDER); // 获取到默认值展示的类型\n      return /*#__PURE__*/_react[\"default\"].createElement(_Select[\"default\"], _extends({\n        noValue: (0, _componentutil.getNOValue)(),\n        style: style,\n        items: array,\n        required: mustInput,\n        showStyle: showStyle,\n        showType: showType,\n        showClearBtn: showClearBtn,\n        model: model,\n        multiple: multiple,\n        onHandleClickAreaTracking: this.handleClickAreaTracking,\n        selectedItemStyle: selectedItemStyle,\n        isSelectedItemWrap: multiple && isLabelStyle,\n        isCollapseTags: multiple && isLabelStyle,\n        isJustShowSelectedValueText: multiple && isLabelStyle,\n        allBorder: allBorder\n      }, other, {\n        lock: lock,\n        optionRender: this.optionRender(defaultValueType, defaultValue),\n        filterPlaceholder: filterPlaceholder,\n        panelAlign: \"bottom\"\n      }));\n    }\n  }]);\n  return SelectField;\n}(_react.Component)) || _class;\nSelectField.propTypes = {\n  model: _propTypes[\"default\"].object.isRequired,\n  option: _propTypes[\"default\"].object.isRequired,\n  style: _propTypes[\"default\"].object.isRequired\n};\nvar _default = exports[\"default\"] = SelectField;\n\n//# sourceURL=webpack://bos-platform/./src/component/web/baseField/SelectField.jsx?");

/***/ }),

/***/ "./src/component/web/baseField/StepperField.jsx":
/*!******************************************************!*\
  !*** ./src/component/web/baseField/StepperField.jsx ***!
  \******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.array.from.js */ \"../../node_modules/core-js/modules/es.array.from.js\");\n__webpack_require__(/*! core-js/modules/es.array.index-of.js */ \"../../node_modules/core-js/modules/es.array.index-of.js\");\n__webpack_require__(/*! core-js/modules/es.array.is-array.js */ \"../../node_modules/core-js/modules/es.array.is-array.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.array.slice.js */ \"../../node_modules/core-js/modules/es.array.slice.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-string.js */ \"../../node_modules/core-js/modules/es.date.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\n__webpack_require__(/*! core-js/modules/es.function.name.js */ \"../../node_modules/core-js/modules/es.function.name.js\");\n__webpack_require__(/*! core-js/modules/es.object.assign.js */ \"../../node_modules/core-js/modules/es.object.assign.js\");\n__webpack_require__(/*! core-js/modules/es.object.create.js */ \"../../node_modules/core-js/modules/es.object.create.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.get-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.keys.js */ \"../../node_modules/core-js/modules/es.object.keys.js\");\n__webpack_require__(/*! core-js/modules/es.object.set-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.set-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.reflect.construct.js */ \"../../node_modules/core-js/modules/es.reflect.construct.js\");\n__webpack_require__(/*! core-js/modules/es.regexp.exec.js */ \"../../node_modules/core-js/modules/es.regexp.exec.js\");\n__webpack_require__(/*! core-js/modules/es.regexp.to-string.js */ \"../../node_modules/core-js/modules/es.regexp.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.map.js */ \"../../node_modules/core-js/modules/es.array.map.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\nvar _react = _interopRequireDefault(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _Stepper = _interopRequireDefault(__webpack_require__(/*! ../base/Stepper */ \"./src/component/web/base/Stepper.jsx\"));\nvar _componentutil = __webpack_require__(/*! @/util/componentutil */ \"./src/util/componentutil.js\");\nvar _serverproperties = __webpack_require__(/*! ../../../constant/serverproperties */ \"./src/constant/serverproperties.js\");\nvar _appModelFunction = __webpack_require__(/*! ../../../model/appModelFunction */ \"./src/model/appModelFunction.js\");\nvar _excluded = [\"option\", \"model\"];\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar MAX_NUMBER = 9999999999999.99; // 服务端整数最大值\n// const MIN_NUMBER = -9999999999999.99 // 服务端整数最小值\n\nfunction getCurrenyInfo(sourceField, type) {\n  var symbol = sourceField[_serverproperties.CURRENY_SYMBOL];\n  var code = sourceField[_serverproperties.CURRENY_CODE];\n  var visible = sourceField[_serverproperties.IS_SHOW_SIGN];\n  var precision = _defineProperty(_defineProperty(_defineProperty({}, _serverproperties.NUMBER_TYPE_PRICE, sourceField[_serverproperties.PRICE_PRECISION]), _serverproperties.NUMBER_TYPE_AMOUNT, sourceField[_serverproperties.AMOUNT_PRECISION]), _serverproperties.NUMBER_TYPE_QUANTITY, sourceField[_serverproperties.QUANTITY_PRECISION]);\n  return {\n    symbol: symbol,\n    code: code,\n    precision: precision[type],\n    visible: visible\n  };\n}\nvar StepperField = exports[\"default\"] = /*#__PURE__*/function (_React$Component) {\n  _inherits(StepperField, _React$Component);\n  function StepperField() {\n    _classCallCheck(this, StepperField);\n    return _callSuper(this, StepperField, arguments);\n  }\n  _createClass(StepperField, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n        option = _this$props.option,\n        model = _this$props.model,\n        other = _objectWithoutProperties(_this$props, _excluded);\n      var numType = option.get(_serverproperties.NUM_TYPE); // 数字类型\n      var scale = option.get(_serverproperties.SCALE); // 小数精度\n      var stepperStyle = option && option.get('stepperstyle') || 0; // 显示类型\n      var stepValue = option && option.get('stepvalue') || 1; // 步进值\n      // 获取币别相关\n      var state = model.state,\n        pageId = model.pageId;\n      var sourceFieldInfo = (0, _appModelFunction.getSourceFiledInfoById)(pageId, option.get(_serverproperties.SOURCE_FIELD))(state);\n      var _ref = sourceFieldInfo && getCurrenyInfo(sourceFieldInfo, numType) || {},\n        symbol = _ref.symbol,\n        code = _ref.code,\n        _ref$precision = _ref.precision,\n        precision = _ref$precision === void 0 ? scale : _ref$precision,\n        visible = _ref.visible;\n      var optionsName = [_serverproperties.MASK, _serverproperties.DISPLAY_FORMAT, _serverproperties.MIN_VALUE, _serverproperties.MIN_MARK, _serverproperties.MAX_MARK, _serverproperties.NO_DISPLAY_SCALE_ZERO, _serverproperties.ROUND_METHOD];\n      var _optionsName$map = optionsName.map(function (name) {\n          return option.get(name);\n        }),\n        _optionsName$map2 = _slicedToArray(_optionsName$map, 7),\n        mask = _optionsName$map2[0],\n        displayFormat = _optionsName$map2[1],\n        min = _optionsName$map2[2],\n        minMark = _optionsName$map2[3],\n        maxMark = _optionsName$map2[4],\n        noDisplayDecimalTailZero = _optionsName$map2[5],\n        roundMethod = _optionsName$map2[6];\n      var max = Math.min(option.get(_serverproperties.MAX_VALUE, MAX_NUMBER), MAX_NUMBER);\n      // const min = Math.max(option.get(MIN_VALUE, MIN_NUMBER), MIN_NUMBER) 这里的最小值不能传是因为数字控件不能做不能输入小于最小值的限制\n      return /*#__PURE__*/_react[\"default\"].createElement(_Stepper[\"default\"], _extends({\n        noValue: (0, _componentutil.getNOValue)(),\n        digitLength: option.get(_serverproperties.PRECISION),\n        decimalLength: precision,\n        showSymbol: visible,\n        code: code,\n        symbol: symbol,\n        mask: mask,\n        displayFormat: displayFormat,\n        min: min,\n        max: max,\n        minMark: minMark,\n        maxMark: maxMark,\n        noDisplayDecimalTailZero: noDisplayDecimalTailZero,\n        roundMethod: roundMethod || '0',\n        stepperStyle: stepperStyle,\n        stepValue: stepValue,\n        zeroShow: true\n      }, other));\n    }\n  }]);\n  return StepperField;\n}(_react[\"default\"].Component);\n\n//# sourceURL=webpack://bos-platform/./src/component/web/baseField/StepperField.jsx?");

/***/ }),

/***/ "./src/component/web/baseField/TelephoneField.jsx":
/*!********************************************************!*\
  !*** ./src/component/web/baseField/TelephoneField.jsx ***!
  \********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.assign.js */ \"../../node_modules/core-js/modules/es.object.assign.js\");\n__webpack_require__(/*! core-js/modules/es.object.create.js */ \"../../node_modules/core-js/modules/es.object.create.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.get-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.reflect.construct.js */ \"../../node_modules/core-js/modules/es.reflect.construct.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.array.concat.js */ \"../../node_modules/core-js/modules/es.array.concat.js\");\n__webpack_require__(/*! core-js/modules/es.array.find.js */ \"../../node_modules/core-js/modules/es.array.find.js\");\n__webpack_require__(/*! core-js/modules/es.array.reduce.js */ \"../../node_modules/core-js/modules/es.array.reduce.js\");\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\n__webpack_require__(/*! core-js/modules/es.function.name.js */ \"../../node_modules/core-js/modules/es.function.name.js\");\n__webpack_require__(/*! core-js/modules/es.object.set-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.set-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.object.values.js */ \"../../node_modules/core-js/modules/es.object.values.js\");\nvar _react = _interopRequireWildcard(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _index = _interopRequireDefault(__webpack_require__(/*! ../base/Telephone/index */ \"./src/component/web/base/Telephone/index.js\"));\nvar _const = __webpack_require__(/*! @/constant/const */ \"./src/constant/const.js\");\nvar _GlobalDataCacher = __webpack_require__(/*! @/model/GlobalDataCacher */ \"./src/model/GlobalDataCacher.js\");\nvar _symbolConst = __webpack_require__(/*! @/constant/symbolConst */ \"./src/constant/symbolConst.js\");\nvar _memoryCacher = __webpack_require__(/*! @/model/memoryCacher */ \"./src/model/memoryCacher.js\");\nvar _telephoneUtils = __webpack_require__(/*! @/util/telephoneUtils */ \"./src/util/telephoneUtils.js\");\nvar _componentutil = __webpack_require__(/*! @/util/componentutil */ \"./src/util/componentutil.js\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nvar TelephoneField = /*#__PURE__*/function (_Component) {\n  _inherits(TelephoneField, _Component);\n  function TelephoneField(props) {\n    var _this;\n    _classCallCheck(this, TelephoneField);\n    _this = _callSuper(this, TelephoneField, [props]);\n    _this.selectCountry = function (country) {\n      var model = _this.props.model;\n      (0, _memoryCacher.setPageData)(model.pageId, [model.key, _const.TELEPHONE_COUNTRY], country);\n      _this.setState({\n        currentCountry: country\n      });\n    };\n    _this.setData = _this.setData.bind(_assertThisInitialized(_this));\n    _this.state = {\n      codeList: undefined,\n      // 国家区号信息列表\n      currentCountry: undefined // 选中的国家\n    };\n    return _this;\n  }\n  _createClass(TelephoneField, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      // 组件加载完成需要请求所有的国家手机号识别码\n      var _this$props = this.props,\n        getTelViaList = _this$props.getTelViaList,\n        model = _this$props.model;\n      var list = (0, _GlobalDataCacher.getData)(_symbolConst.KEY_COUNTRU_VIA_DATA);\n      if (!list) {\n        getTelViaList && getTelViaList(model);\n      } else {\n        this.setData(list);\n      }\n      this.unbindDataChangeListener = (0, _GlobalDataCacher.addDataChangeListener)(_symbolConst.KEY_COUNTRU_VIA_DATA, this.setData);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var model = this.props.model;\n      this.unbindDataChangeListener && this.unbindDataChangeListener();\n      (0, _memoryCacher.deletePageData)(model.pageId, [model.key, _const.TELEPHONE_COUNTRY]);\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      var value = nextProps.value,\n        model = nextProps.model;\n      var _this$state = this.state,\n        currentCountry = _this$state.currentCountry,\n        codeList = _this$state.codeList;\n      if (!value || !currentCountry) {\n        return;\n      }\n      var numbers = value.split('-');\n      if (numbers.length < 2) {\n        return;\n      }\n      var countryCallingCode = numbers[0];\n      if (currentCountry.id === countryCallingCode) {\n        return;\n      }\n\n      // value 存在，则根据 value 分离出的国家码查找对应国家\n      var segment = (numbers[1] || '').substring(0, 3);\n      var country = (0, _telephoneUtils.getCurrentCountry)(codeList, countryCallingCode, segment);\n      var useCache = !country || model.getDataProperty(_const.TIME_STAMP_FRESH) === this.props.model.getDataProperty(_const.TIME_STAMP_FRESH);\n      if (useCache) {\n        var cacheCountry = (0, _memoryCacher.getPageData)(model.pageId, [model.key, _const.TELEPHONE_COUNTRY]);\n        country = codeList.find(function (item) {\n          return item.id === (cacheCountry === null || cacheCountry === void 0 ? void 0 : cacheCountry.id) && item.name === (cacheCountry === null || cacheCountry === void 0 ? void 0 : cacheCountry.name);\n        });\n      }\n      if (country) {\n        this.selectCountry(country);\n      }\n    }\n\n    /**\n     * 仅在国家信息列表返回时使用\n     * 如果 value 存在的话，根据 value 获取当前对应的国家信息\n     * 存在多个相同区号的国家时，获取的是第一个国家\n     * @param {[object]} infoList 后端返回的国家码信息\n     */\n  }, {\n    key: \"setData\",\n    value: function setData(infoList) {\n      var codeList = Object.values(infoList).reduce(function (total, item) {\n        return total.concat(item);\n      }, []);\n      // value 存在，则根据 value 分离出的国家码查找对应国家\n      var value = this.props.value;\n      var id, segment;\n      if (value && value.split('-').length === 2) {\n        id = value.split('-')[0];\n        segment = value.split('-')[1].substring(0, 3);\n      }\n      var currentCountry = (0, _telephoneUtils.getCurrentCountry)(codeList, id, segment);\n      var model = this.props.model;\n      (0, _memoryCacher.setPageData)(model.pageId, [model.key, _const.TELEPHONE_COUNTRY], currentCountry);\n      this.setState({\n        codeList: codeList,\n        currentCountry: currentCountry\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state2 = this.state,\n        _this$state2$codeList = _this$state2.codeList,\n        codeList = _this$state2$codeList === void 0 ? [] : _this$state2$codeList,\n        currentCountry = _this$state2.currentCountry;\n      return /*#__PURE__*/_react[\"default\"].createElement(_index[\"default\"], _extends({}, this.props, {\n        noValue: (0, _componentutil.getNOValue)(),\n        viaList: codeList,\n        country: currentCountry,\n        selectCountry: this.selectCountry\n      }));\n    }\n  }]);\n  return TelephoneField;\n}(_react.Component);\nvar _default = exports[\"default\"] = TelephoneField;\n\n//# sourceURL=webpack://bos-platform/./src/component/web/baseField/TelephoneField.jsx?");

/***/ }),

/***/ "./src/component/web/baseField/TextAreaField.jsx":
/*!*******************************************************!*\
  !*** ./src/component/web/baseField/TextAreaField.jsx ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.from.js */ \"../../node_modules/core-js/modules/es.array.from.js\");\n__webpack_require__(/*! core-js/modules/es.array.is-array.js */ \"../../node_modules/core-js/modules/es.array.is-array.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.array.slice.js */ \"../../node_modules/core-js/modules/es.array.slice.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-string.js */ \"../../node_modules/core-js/modules/es.date.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.function.name.js */ \"../../node_modules/core-js/modules/es.function.name.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.assign.js */ \"../../node_modules/core-js/modules/es.object.assign.js\");\n__webpack_require__(/*! core-js/modules/es.object.create.js */ \"../../node_modules/core-js/modules/es.object.create.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.get-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.object.keys.js */ \"../../node_modules/core-js/modules/es.object.keys.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.reflect.construct.js */ \"../../node_modules/core-js/modules/es.reflect.construct.js\");\n__webpack_require__(/*! core-js/modules/es.regexp.to-string.js */ \"../../node_modules/core-js/modules/es.regexp.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.array.index-of.js */ \"../../node_modules/core-js/modules/es.array.index-of.js\");\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\n__webpack_require__(/*! core-js/modules/es.number.to-fixed.js */ \"../../node_modules/core-js/modules/es.number.to-fixed.js\");\n__webpack_require__(/*! core-js/modules/es.object.set-prototype-of.js */ \"../../node_modules/core-js/modules/es.object.set-prototype-of.js\");\n__webpack_require__(/*! core-js/modules/es.parse-int.js */ \"../../node_modules/core-js/modules/es.parse-int.js\");\n__webpack_require__(/*! core-js/modules/es.regexp.exec.js */ \"../../node_modules/core-js/modules/es.regexp.exec.js\");\n__webpack_require__(/*! core-js/modules/es.string.replace.js */ \"../../node_modules/core-js/modules/es.string.replace.js\");\nvar _react = _interopRequireWildcard(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _reactDom = _interopRequireDefault(__webpack_require__(/*! react-dom */ \"webpack/sharing/consume/default/react-dom/react-dom?418d\"));\nvar _propTypes = _interopRequireDefault(__webpack_require__(/*! prop-types */ \"../../node_modules/prop-types/index.js\"));\nvar _classnames2 = _interopRequireDefault(__webpack_require__(/*! classnames */ \"../../node_modules/classnames/index.js\"));\nvar _BaseComponents = __webpack_require__(/*! ../base/BaseComponents */ \"./src/component/web/base/BaseComponents/index.js\");\nvar _componentutil = __webpack_require__(/*! @/util/componentutil */ \"./src/util/componentutil.js\");\nvar _const = __webpack_require__(/*! @/constant/const */ \"./src/constant/const.js\");\nvar _serverproperties = __webpack_require__(/*! ../../../constant/serverproperties */ \"./src/constant/serverproperties.js\");\nvar _FieldItem = _interopRequireDefault(__webpack_require__(/*! ../base/FieldItem.less */ \"./src/component/web/base/FieldItem.less\"));\nvar _excluded = [\"model\", \"option\", \"style\", \"textareaHeight\", \"updateHeight\", \"showTitle\", \"lock\", \"className\", \"lockedEmptyValue\"];\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n/**\n * web端多行文本字段封装类\n */\nvar TextAreaField = exports[\"default\"] = /*#__PURE__*/function (_Component) {\n  _inherits(TextAreaField, _Component);\n  function TextAreaField(props) {\n    var _this;\n    _classCallCheck(this, TextAreaField);\n    _this = _callSuper(this, TextAreaField, [props]);\n    _this.setTextareaHeight = function () {\n      var _this$props = _this.props,\n        model = _this$props.model,\n        updateHeight = _this$props.updateHeight;\n      var input = _reactDom[\"default\"].findDOMNode(_this.textAreaRef.current);\n      var style = (0, _componentutil.getCommonStyle)(model);\n      if (input && style && style.height) {\n        var textarea = input.children[0];\n        var setHeight = function setHeight(offsetHeight) {\n          updateHeight && updateHeight(offsetHeight);\n        };\n        if (textarea) {\n          var offsetHeight = input.offsetHeight;\n          // 在两个页签或者单选菜单切换时（设计器帮助文本），隐藏的多语言文本会被加载，但是此时 offsetHeight 为 0\n          // 故在 offsetHeight 为 0 时添加监听\n          if (offsetHeight > 0) {\n            setHeight(offsetHeight);\n          } else {\n            _this.intersectionObserver = new window.IntersectionObserver(function (entries) {\n              var _entries = _slicedToArray(entries, 1),\n                entry = _entries[0];\n              if (entry.intersectionRatio > 0) {\n                setHeight(entry.boundingClientRect.height || offsetHeight);\n                _this.intersectionObserver.disconnect();\n              }\n            });\n            _this.intersectionObserver.observe(input);\n          }\n        }\n      }\n    };\n    _this.scrollToBottom = function () {\n      var textareaContainer = _reactDom[\"default\"].findDOMNode(_this.textAreaRef.current);\n      if (!textareaContainer) {\n        return;\n      }\n      var textarea = textareaContainer.querySelector('textarea');\n      if (!textarea) {\n        return;\n      }\n      textarea.scrollTop = textarea.scrollHeight;\n    };\n    _this.textAreaRef = /*#__PURE__*/_react[\"default\"].createRef();\n    return _this;\n  }\n  _createClass(TextAreaField, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.setTextareaHeight();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var prevModel = prevProps.model;\n      var model = this.props.model;\n      if ((0, _componentutil.getComponentDataProperty)(model, _serverproperties.SCROLL_TO_BOTTOM, _serverproperties.SCROLL_TO_BOTTOM, false) && prevModel.getDataProperty(_const.TIME_STAMP_FRESH) !== model.getDataProperty(_const.TIME_STAMP_FRESH)) {\n        this.scrollToBottom();\n      }\n    }\n  }, {\n    key: \"formatNumber\",\n    value: function formatNumber(obj) {\n      if (obj) {\n        if (obj.indexOf('%') !== -1) {\n          return window.parseInt(obj.replace('%', ''));\n        } else {\n          return window.parseInt(obj.replace('px', ''));\n        }\n      }\n      return 0;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n      var _this$props2 = this.props,\n        model = _this$props2.model,\n        option = _this$props2.option,\n        style = _this$props2.style,\n        textareaHeight = _this$props2.textareaHeight,\n        updateHeight = _this$props2.updateHeight,\n        showTitle = _this$props2.showTitle,\n        lock = _this$props2.lock,\n        className = _this$props2.className,\n        lockedEmptyValue = _this$props2.lockedEmptyValue,\n        other = _objectWithoutProperties(_this$props2, _excluded);\n\n      // // 全边框风格下 内边距 5px UE设计稿要求增加\n      // const allBorder = Object.is(option.get(FIELD_STYLE), 2)\n      // if (allBorder) {\n      //   style.padding = '5px'\n      // }\n\n      var gap = showTitle ? 22 : 2;\n      var noValue = lockedEmptyValue || (0, _componentutil.getNOValue)(); // 获取”锁定非空提示“，如获取不到再取noValue\n\n      var itemStyle = (0, _componentutil.getCommonStyle)(model);\n      var inputRef = function inputRef(textareaContainer) {\n        if (!itemStyle.height || !textareaContainer) return;\n        var clientHeight = textareaContainer.clientHeight;\n        if (!clientHeight) {\n          clientHeight = _this2.formatNumber(itemStyle.height) - gap;\n        } else {\n          clientHeight -= 5;\n        }\n        updateHeight && updateHeight(clientHeight);\n      };\n      if (textareaHeight) {\n        // 缩放后可能存在挡住边界的问题\n        var _height = window.devicePixelRatio.toFixed(1) < 1 ? \"\".concat(textareaHeight - 1, \"px\") : \"\".concat(textareaHeight, \"px\");\n        style.minHeight = _height;\n        style.maxHeight = _height;\n      }\n      var showEditButton = option && option.get(_serverproperties.SHOW_EDIT_BTN);\n      return /*#__PURE__*/_react[\"default\"].createElement(_BaseComponents.TextArea, _extends({\n        ref: this.textAreaRef,\n        noValue: noValue,\n        style: style,\n        lock: lock,\n        inputRef: inputRef,\n        ctrlKey: model.key,\n        pageId: model.pageId,\n        className: (0, _classnames2[\"default\"])(_defineProperty({}, _FieldItem[\"default\"]['lt-input'], showEditButton && !lock)),\n        showTitle: showTitle,\n        lDir: option.get('lDir')\n      }, other));\n    }\n  }]);\n  return TextAreaField;\n}(_react.Component);\nTextAreaField.propTypes = {\n  model: _propTypes[\"default\"].object.isRequired,\n  option: _propTypes[\"default\"].object.isRequired,\n  style: _propTypes[\"default\"].object.isRequired,\n  updateHeight: _propTypes[\"default\"].func\n};\n\n//# sourceURL=webpack://bos-platform/./src/component/web/baseField/TextAreaField.jsx?");

/***/ }),

/***/ "./src/component/web/baseField/index.jsx":
/*!***********************************************!*\
  !*** ./src/component/web/baseField/index.jsx ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = void 0;\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\nvar _serverproperties = __webpack_require__(/*! @/constant/serverproperties */ \"./src/constant/serverproperties.js\");\nvar _BaseComponents = __webpack_require__(/*! ../base/BaseComponents */ \"./src/component/web/base/BaseComponents/index.js\");\nvar _MulLangText = _interopRequireDefault(__webpack_require__(/*! ../base/MulLangText */ \"./src/component/web/base/MulLangText.js\"));\nvar _LargeTextCtl = _interopRequireDefault(__webpack_require__(/*! ../base/LargeTextCtl */ \"./src/component/web/base/LargeTextCtl.js\"));\nvar _KDAdminDivision = _interopRequireDefault(__webpack_require__(/*! ../KDAdminDivision */ \"./src/component/web/KDAdminDivision.js\"));\nvar _KDCity = _interopRequireDefault(__webpack_require__(/*! ../KDCity.jsx */ \"./src/component/web/KDCity.jsx\"));\nvar _NumberField = _interopRequireDefault(__webpack_require__(/*! ./NumberField */ \"./src/component/web/baseField/NumberField.jsx\"));\nvar _TextAreaField = _interopRequireDefault(__webpack_require__(/*! ./TextAreaField */ \"./src/component/web/baseField/TextAreaField.jsx\"));\nvar _DateField = _interopRequireDefault(__webpack_require__(/*! ./DateField */ \"./src/component/web/baseField/DateField.jsx\"));\nvar _DateTimeField = _interopRequireDefault(__webpack_require__(/*! ./DateTimeField */ \"./src/component/web/baseField/DateTimeField.jsx\"));\nvar _DateRangeField = _interopRequireDefault(__webpack_require__(/*! ./DateRangeField */ \"./src/component/web/baseField/DateRangeField.jsx\"));\nvar _CheckBoxField = _interopRequireDefault(__webpack_require__(/*! ./CheckBoxField */ \"./src/component/web/baseField/CheckBoxField.jsx\"));\nvar _RadioField = _interopRequireDefault(__webpack_require__(/*! ./RadioField */ \"./src/component/web/baseField/RadioField.jsx\"));\nvar _SelectField = _interopRequireDefault(__webpack_require__(/*! ./SelectField */ \"./src/component/web/baseField/SelectField.jsx\"));\nvar _BaseDataField = _interopRequireDefault(__webpack_require__(/*! ./BaseDataField */ \"./src/component/web/baseField/BaseDataField.jsx\"));\nvar _CascaderField = _interopRequireDefault(__webpack_require__(/*! ./CascaderField */ \"./src/component/web/baseField/CascaderField.jsx\"));\nvar _FlexField = _interopRequireDefault(__webpack_require__(/*! ./FlexField */ \"./src/component/web/baseField/FlexField.js\"));\nvar _AttachmentPanelField = _interopRequireDefault(__webpack_require__(/*! ./AttachmentPanelField */ \"./src/component/web/baseField/AttachmentPanelField.jsx\"));\nvar _EmailField = _interopRequireDefault(__webpack_require__(/*! ./EmailField */ \"./src/component/web/baseField/EmailField.jsx\"));\nvar _TelephoneField = _interopRequireDefault(__webpack_require__(/*! ./TelephoneField */ \"./src/component/web/baseField/TelephoneField.jsx\"));\nvar _TimeField = _interopRequireDefault(__webpack_require__(/*! ./TimeField */ \"./src/component/web/baseField/TimeField.jsx\"));\nvar _TimeRangeField = _interopRequireDefault(__webpack_require__(/*! ./TimeRangeField */ \"./src/component/web/baseField/TimeRangeField.jsx\"));\nvar _StepperField = _interopRequireDefault(__webpack_require__(/*! ./StepperField */ \"./src/component/web/baseField/StepperField.jsx\"));\nvar _AddressField = _interopRequireDefault(__webpack_require__(/*! ./AddressField */ \"./src/component/web/baseField/AddressField.jsx\"));\nvar _GeographicLocationField = _interopRequireDefault(__webpack_require__(/*! ./GeographicLocationField */ \"./src/component/web/baseField/GeographicLocationField.jsx\"));\nvar _SignatureField = _interopRequireDefault(__webpack_require__(/*! ./SignatureField */ \"./src/component/web/baseField/SignatureField.jsx\"));\nvar _RichTextField = _interopRequireDefault(__webpack_require__(/*! ./RichTextField */ \"./src/component/web/baseField/RichTextField.jsx\"));\nvar _CheckBoxGroupField = _interopRequireDefault(__webpack_require__(/*! ./CheckBoxGroupField.jsx */ \"./src/component/web/baseField/CheckBoxGroupField.jsx\"));\nvar _RadioOptGroupField = _interopRequireDefault(__webpack_require__(/*! ./RadioOptGroupField */ \"./src/component/web/baseField/RadioOptGroupField.js\"));\nvar _FieldWarp;\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar FieldWarp = (_FieldWarp = {\n  number: _NumberField[\"default\"],\n  text: _BaseComponents.Text,\n  email: _EmailField[\"default\"],\n  passwordbox: _BaseComponents.Text,\n  textarea: _TextAreaField[\"default\"],\n  date: _DateField[\"default\"],\n  datetime: _DateTimeField[\"default\"],\n  daterange: _DateRangeField[\"default\"],\n  time: _TimeField[\"default\"],\n  timerange: _TimeRangeField[\"default\"],\n  checkbox: _CheckBoxField[\"default\"],\n  radio: _RadioField[\"default\"]\n}, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_FieldWarp, _serverproperties.Ctrls.KDRadioOptGroup, _RadioOptGroupField[\"default\"]), \"combo\", _SelectField[\"default\"]), \"mulcombo\", _SelectField[\"default\"]), \"user\", _BaseDataField[\"default\"]), \"basedata\", _BaseDataField[\"default\"]), \"mulbasedata\", _BaseDataField[\"default\"]), \"org\", _BaseDataField[\"default\"]), \"localeText\", _MulLangText[\"default\"]), \"largeText\", _LargeTextCtl[\"default\"]), \"cascademenu\", _KDAdminDivision[\"default\"]), _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_FieldWarp, \"city\", _KDCity[\"default\"]), \"cascader\", _CascaderField[\"default\"]), \"flexfield\", _FlexField[\"default\"]), \"attachmentfield\", _AttachmentPanelField[\"default\"]), \"telephone\", _TelephoneField[\"default\"]), \"stepper\", _StepperField[\"default\"]), \"address\", _AddressField[\"default\"]), \"geopoint\", _GeographicLocationField[\"default\"]), \"namesegbasedata\", _BaseDataField[\"default\"]), \"namesegcombo\", _SelectField[\"default\"]), _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_FieldWarp, \"namesegtext\", _BaseComponents.Text), \"i18nname\", _BaseComponents.Text), \"signature\", _SignatureField[\"default\"]), \"richtext\", _RichTextField[\"default\"]), \"checkboxgroup\", _CheckBoxGroupField[\"default\"]));\nvar _default = exports[\"default\"] = FieldWarp;\n\n//# sourceURL=webpack://bos-platform/./src/component/web/baseField/index.jsx?");

/***/ }),

/***/ "./src/util/HomePageVirtualTabUtil.js":
/*!********************************************!*\
  !*** ./src/util/HomePageVirtualTabUtil.js ***!
  \********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.insertData = exports.filterFixed = exports.deleteData = void 0;\n__webpack_require__(/*! core-js/modules/es.array.filter.js */ \"../../node_modules/core-js/modules/es.array.filter.js\");\n__webpack_require__(/*! core-js/modules/es.array.find-index.js */ \"../../node_modules/core-js/modules/es.array.find-index.js\");\n__webpack_require__(/*! core-js/modules/es.array.splice.js */ \"../../node_modules/core-js/modules/es.array.splice.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n// 删除数据\nvar deleteData = exports.deleteData = function deleteData(items, key) {\n  var delIndex = items.findIndex(function (item) {\n    return item.key === key;\n  });\n  // 此处由于不需要修改数据后就渲染组件,而是传到外层后再重新渲染，使用splice来删除数据\n  delIndex !== -1 && items.splice(delIndex, 1);\n  return items;\n};\n\n// 插入数据\nvar insertData = exports.insertData = function insertData(items, _insertData, insertKey) {\n  var insertStartIndex = items.findIndex(function (item) {\n    return item.key === insertKey;\n  });\n  // 此处由于不需要修改数据后就渲染组件,而是传到外层后再重新渲染，使用splice来删除数据\n  insertStartIndex !== -1 && items.splice(insertStartIndex + 1, 0, _insertData);\n  return items;\n};\n\n// 筛选固定和非固定数据\nvar filterFixed = exports.filterFixed = function filterFixed(appItems, fixType) {\n  return appItems.filter(function (item) {\n    return item.isFixed === fixType;\n  });\n};\n\n//# sourceURL=webpack://bos-platform/./src/util/HomePageVirtualTabUtil.js?");

/***/ }),

/***/ "./src/util/cardMergeModel.js":
/*!************************************!*\
  !*** ./src/util/cardMergeModel.js ***!
  \************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.mergeModel = void 0;\nexports.spanEngine = spanEngine;\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.find.js */ \"../../node_modules/core-js/modules/es.array.find.js\");\n__webpack_require__(/*! core-js/modules/es.array.for-each.js */ \"../../node_modules/core-js/modules/es.array.for-each.js\");\n__webpack_require__(/*! core-js/modules/es.array.includes.js */ \"../../node_modules/core-js/modules/es.array.includes.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.function.bind.js */ \"../../node_modules/core-js/modules/es.function.bind.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.string.includes.js */ \"../../node_modules/core-js/modules/es.string.includes.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ \"../../node_modules/core-js/modules/web.dom-collections.for-each.js\");\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n/**\n * pc端卡片的航融合模型\n * by kechuang\n */\nvar mergeModel = exports.mergeModel = /*#__PURE__*/function () {\n  function mergeModel(entryentities) {\n    _classCallCheck(this, mergeModel);\n    this.entityInfo = extractEntityInfo(entryentities);\n    this.mainSpan = {};\n    this.group = [];\n    this.rkIndexMap = {}; // 记录融合行rk对应的rowIndex 信息\n    this.recordGroup = this.recordGroup.bind(this);\n  }\n  _createClass(mergeModel, [{\n    key: \"recordSpan\",\n    value: function recordSpan(row, rkIndex, pkIndex) {\n      var lastRow = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n      var rowkey = row.get(rkIndex);\n      this.mainSpan['r_' + rowkey] = 1;\n      if (lastRow) {\n        var lastRowKey = lastRow.get(rkIndex);\n        if (row.get(pkIndex) === lastRow.get(pkIndex)) {\n          this.mainSpan['r_' + rowkey] = this.mainSpan['r_' + lastRowKey] + 1;\n        }\n      }\n      this.recordGroup(this.mainSpan['r_' + rowkey], rowkey);\n    }\n  }, {\n    key: \"recordGroup\",\n    value: function recordGroup(span, rowkey) {\n      if (span === 1) {\n        var arr = [rowkey];\n        this.group.push(arr);\n      } else {\n        var length = this.group.length;\n        var targetArr = this.group[length - 1];\n        targetArr.push(rowkey);\n      }\n    }\n  }, {\n    key: \"getMainGroupRk\",\n    value: function getMainGroupRk(rowkey) {\n      var group = this.group.find(function (arr) {\n        if (arr.includes(rowkey)) {\n          return true;\n        }\n      });\n      return group;\n    }\n  }, {\n    key: \"getRowIndex\",\n    value: function getRowIndex(rowKeyValue) {\n      return this.rkIndexMap[rowKeyValue];\n    }\n  }, {\n    key: \"getMainEntityKey\",\n    value: function getMainEntityKey() {\n      var _this$entityInfo$main;\n      return (_this$entityInfo$main = this.entityInfo.mainEntity) === null || _this$entityInfo$main === void 0 ? void 0 : _this$entityInfo$main.key;\n    }\n  }]);\n  return mergeModel;\n}();\nfunction spanEngine(data, mergeModel) {\n  mergeModel.group = [];\n  mergeModel.mainSpan = {};\n  mergeModel.rkIndexMap = {};\n  var dataIndax = data.get('dataindex');\n  var rows = data.get('rows');\n  var mainPkFieldName = mergeModel.entityInfo.mainEntity.pkFieldName;\n  var pkIndex = dataIndax.get(mainPkFieldName);\n  var rkIndex = dataIndax.get('rk');\n  rows.forEach(function (row, index) {\n    var rowKeyValue = row.get(rkIndex);\n    mergeModel.rkIndexMap[rowKeyValue] = index;\n    if (index === 0) {\n      mergeModel.recordSpan(row, rkIndex, pkIndex);\n    } else {\n      var lastRow = rows.get(index - 1);\n      mergeModel.recordSpan(row, rkIndex, pkIndex, lastRow);\n    }\n  });\n}\n\n/**  工具方法  start */\n\nvar extractEntityInfo = function extractEntityInfo(entryentities) {\n  var mainEntity = {};\n  var entities = {};\n  entryentities.forEach(function (entity) {\n    var ent = {\n      key: entity.key,\n      parentKey: entity.parentKey,\n      pkFieldName: entity.pkFieldName\n    };\n    if (ent.parentKey === '') {\n      mainEntity = ent;\n    }\n    entities[ent.key] = ent;\n  });\n  return {\n    mainEntity: mainEntity,\n    entities: entities\n  };\n};\n\n/**  工具方法  end */\n\n//# sourceURL=webpack://bos-platform/./src/util/cardMergeModel.js?");

/***/ }),

/***/ "./src/util/gridcontainerUtil.js":
/*!***************************************!*\
  !*** ./src/util/gridcontainerUtil.js ***!
  \***************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.parseSubFormsByCardId = parseSubFormsByCardId;\n__webpack_require__(/*! core-js/modules/es.array.find.js */ \"../../node_modules/core-js/modules/es.array.find.js\");\n__webpack_require__(/*! core-js/modules/es.array.index-of.js */ \"../../node_modules/core-js/modules/es.array.index-of.js\");\n__webpack_require__(/*! core-js/modules/es.array.reverse.js */ \"../../node_modules/core-js/modules/es.array.reverse.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\nvar _react = _interopRequireDefault(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _Bill = _interopRequireDefault(__webpack_require__(/*! ../component/web/Bill */ \"./src/component/web/Bill.js\"));\nvar _appModelFunction = __webpack_require__(/*! ../model/appModelFunction */ \"./src/model/appModelFunction.js\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n/*\n * 栅格容器,卡片加载单据(cardId放在config.openStyle.cardId节点)\n */\nfunction parseSubFormsByCardId(pageId, key, appState, cardId, releasedPageIds, setPageId) {\n  releasedPageIds = releasedPageIds || []; // 可靠性规则检查问题修复\n  if (cardId !== undefined && cardId !== '') {\n    var subForms = (0, _appModelFunction.getControlSubForms)(pageId, key)(appState);\n    // return subForms.map(subPageId => {\n    //  //已经释放的页面，不再重复加载(防止重复release)\n    //  if(releasedPageIds.indexOf(subPageId)<0){\n    //    let formId=getFormId(subPageId)(appState);\n    //    if(formId){  //后台formId可能为空\n    //      let config = getFormConfig(subPageId)(appState);\n    //      let targetCardId = config&&config.openStyle&&config.openStyle.cardId;\n    //      if(targetCardId===cardId){\n    //        // return billFactory(config,subPageId);\n    //        setPageId&&setPageId(config.pageId);\n    //        console.warn(`加载卡片单据: ${config.pageId}`);\n    //        return <Bill config={config}/>\n    //      }\n    //    }\n    //  }\n    // });\n    if (subForms && subForms.length > 0) {\n      var config;\n      subForms.reverse(); // 最新showForm数据放到数组前面\n      var billPageId = subForms.find(function (subPageId) {\n        if (releasedPageIds.indexOf(subPageId) < 0) {\n          var formId = (0, _appModelFunction.getFormId)(subPageId)(appState);\n          if (formId) {\n            // 后台formId可能为空\n            config = (0, _appModelFunction.getFormConfig)(subPageId)(appState);\n            var targetCardId = config && config.openStyle && config.openStyle.cardId;\n            return targetCardId === cardId;\n          }\n        }\n        return false;\n      });\n      if (billPageId !== undefined) {\n        config = (0, _appModelFunction.getFormConfig)(billPageId)(appState);\n        setPageId && setPageId(config.pageId);\n        // console.warn(`加载卡片单据: ${config.pageId}`);\n        return /*#__PURE__*/_react[\"default\"].createElement(_Bill[\"default\"], {\n          config: config\n        });\n      }\n    }\n  }\n}\n\n//# sourceURL=webpack://bos-platform/./src/util/gridcontainerUtil.js?");

/***/ }),

/***/ "./src/util/toolbarUtils.js":
/*!**********************************!*\
  !*** ./src/util/toolbarUtils.js ***!
  \**********************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval("\n\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.getPermissionItems = void 0;\n__webpack_require__(/*! core-js/modules/es.array.filter.js */ \"../../node_modules/core-js/modules/es.array.filter.js\");\n__webpack_require__(/*! core-js/modules/es.array.index-of.js */ \"../../node_modules/core-js/modules/es.array.index-of.js\");\n__webpack_require__(/*! core-js/modules/es.array.map.js */ \"../../node_modules/core-js/modules/es.array.map.js\");\n__webpack_require__(/*! core-js/modules/es.array.slice.js */ \"../../node_modules/core-js/modules/es.array.slice.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\nvar _componentutil = __webpack_require__(/*! @/util/componentutil */ \"./src/util/componentutil.js\");\nvar _serverproperties = __webpack_require__(/*! @/constant/serverproperties */ \"./src/constant/serverproperties.js\");\n/**\n * 获取有权限的item  -- 工具栏 页签工具栏数据与高级面板工具栏、工具栏数据格式不一致，处理方式不同\n * @param {*} items 源数组\n * @param {*} noPerData 没权限的permissionId 组合\n * @param {*} isTab 是否是页签\n */\nvar getPermissionItems = exports.getPermissionItems = function getPermissionItems(_ref) {\n  var items = _ref.items,\n    noPerData = _ref.noPerData,\n    isTab = _ref.isTab,\n    model = _ref.model;\n  // 根据noPerData 添加permission 属性\n  items = items.map(function (item) {\n    if (item.get('items')) {\n      item = item.update('items', function (childItems) {\n        return childItems.map(function (it) {\n          return it.merge({\n            noPermission: noPerData.indexOf(it.get('permissionId')) !== -1\n          });\n        });\n      });\n    }\n    return item.merge({\n      noPermission: noPerData.indexOf(item.get('permissionId')) !== -1\n    });\n  });\n  // 根据permission 处理数据 如果是在items 里面的 noPermission 直接删除这个it 一级的\n  items = items.map(function (item) {\n    if (item.get('items')) {\n      item = item.update('items', function (childItems) {\n        return childItems.filter(function (it) {\n          return !it.get('noPermission');\n        });\n      });\n    }\n    if (item.get('noPermission')) {\n      var _item$get;\n      // item 拿 items 里第一个， items 从第二个算起\n      if (!((_item$get = item.get('items')) !== null && _item$get !== void 0 && _item$get.size)) return;\n      if (model && (0, _componentutil.getVisible)(model, item.get('id'), item.get('vi'))) {\n        var firstItem = item.getIn(['items', 0]);\n        // 可见性、锁定性不能继承下去\n        item = item[\"delete\"]('l')[\"delete\"]('vi').merge(firstItem);\n        if (!isTab) {\n          item = item.merge({\n            opk: firstItem.get('operationKey'),\n            replacedOperationKey: item.get(_serverproperties.OPERATE_KEY),\n            text: firstItem.get('title')\n          });\n        }\n        item = item.update('items', function () {\n          var childItems = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n          return childItems.slice(1);\n        });\n      }\n    }\n    return item;\n  }).filter(function (item) {\n    return item !== undefined;\n  });\n  return items;\n};\n\n//# sourceURL=webpack://bos-platform/./src/util/toolbarUtils.js?");

/***/ }),

/***/ "./src/component/common/DragFlexWrap.less":
/*!************************************************!*\
  !*** ./src/component/common/DragFlexWrap.less ***!
  \************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\"dragFlexContainer\":\"DragFlexWrap_dragFlexContainer_3cB0\",\"dragOutMargin\":\"DragFlexWrap_dragOutMargin_2nhp\",\"flexDragActionDiv\":\"DragFlexWrap_flexDragActionDiv_SX4r\",\"currentPageNotVisible\":\"DragFlexWrap_currentPageNotVisible_3I1t\",\"flexContainer\":\"DragFlexWrap_flexContainer_1qMA\",\"icon\":\"DragFlexWrap_icon_E859\",\"header\":\"DragFlexWrap_header_2CYK\",\"body\":\"DragFlexWrap_body_3C1L\"});\n\n//# sourceURL=webpack://bos-platform/./src/component/common/DragFlexWrap.less?");

/***/ }),

/***/ "./src/component/web/KDAdvCon.less":
/*!*****************************************!*\
  !*** ./src/component/web/KDAdvCon.less ***!
  \*****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\"advCon\":\"KDAdvCon_advCon_1hcv\",\"customized\":\"KDAdvCon_customized_wqq0\",\"collapseIcon\":\"KDAdvCon_collapseIcon_porw\",\"adv-con-full-screen\":\"KDAdvCon_adv-con-full-screen_3sF-\",\"full-screen\":\"KDAdvCon_full-screen_2j-b\",\"isDesigner\":\"KDAdvCon_isDesigner_w_Ji\",\"collapsible\":\"KDAdvCon_collapsible_1tlw\",\"bar\":\"KDAdvCon_bar_1evf\",\"bar-fold\":\"KDAdvCon_bar-fold_-XkY\",\"box\":\"KDAdvCon_box_3nG7\",\"max-width\":\"KDAdvCon_max-width_OaL1\",\"box-collapse\":\"KDAdvCon_box-collapse_XmWk\",\"design-tips\":\"KDAdvCon_design-tips_3oOb\",\"collapse\":\"KDAdvCon_collapse_3ePK\",\"expandIcon\":\"KDAdvCon_expandIcon_2CYR\",\"title\":\"KDAdvCon_title_2caW\",\"cur\":\"KDAdvCon_cur_gpDu\",\"collapse-with-tips\":\"KDAdvCon_collapse-with-tips_2QyK\",\"summaryPanel\":\"KDAdvCon_summaryPanel_2ohc\",\"toolbar\":\"KDAdvCon_toolbar_2exO\",\"full-screen-right-padding\":\"KDAdvCon_full-screen-right-padding_2Ua6\",\"type1\":\"KDAdvCon_type1_3BSy\",\"ap-type1\":\"KDAdvCon_ap-type1_3-ER\",\"viewBar\":\"KDAdvCon_viewBar_2wL8\",\"panel\":\"KDAdvCon_panel_27Ji\",\"mt0\":\"KDAdvCon_mt0_e3xk\",\"ml0\":\"KDAdvCon_ml0_2WpS\",\"hide\":\"KDAdvCon_hide_HyY9\",\"summaryPanelAp\":\"KDAdvCon_summaryPanelAp_PwLP\",\"dot-icon\":\"KDAdvCon_dot-icon_L_dj\",\"dot-icon-wrap\":\"KDAdvCon_dot-icon-wrap_16jW\",\"invisible\":\"KDAdvCon_invisible_2EEk\",\"panelWithMinHei\":\"KDAdvCon_panelWithMinHei_mE0G\",\"pos-relative\":\"KDAdvCon_pos-relative_Zd3N\"});\n\n//# sourceURL=webpack://bos-platform/./src/component/web/KDAdvCon.less?");

/***/ }),

/***/ "./src/component/web/KDAdvGrid.less":
/*!******************************************!*\
  !*** ./src/component/web/KDAdvGrid.less ***!
  \******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\"bill-list\":\"KDAdvGrid_bill-list_2GGG\",\"panel\":\"KDAdvGrid_panel_x-Dt\",\"timeline-panel\":\"KDAdvGrid_timeline-panel_1QG4\",\"time-line\":\"KDAdvGrid_time-line_-2nC\",\"first-line\":\"KDAdvGrid_first-line_3ahf\",\"last-line\":\"KDAdvGrid_last-line_1Ahi\",\"dot\":\"KDAdvGrid_dot_238t\",\"toolbar\":\"KDAdvGrid_toolbar_17EW\"});\n\n//# sourceURL=webpack://bos-platform/./src/component/web/KDAdvGrid.less?");

/***/ }),

/***/ "./src/component/web/KDCardView.less":
/*!*******************************************!*\
  !*** ./src/component/web/KDCardView.less ***!
  \*******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\"underline\":\"KDCardView_underline_1lAd\",\"triangle\":\"KDCardView_triangle_1I56\",\"underline-actived\":\"KDCardView_underline-actived_38A4\",\"list-card-box\":\"KDCardView_list-card-box_18CX\",\"card_disable_click\":\"KDCardView_card_disable_click_2cfG\",\"scroll-box\":\"KDCardView_scroll-box_8RWc\",\"list-box\":\"KDCardView_list-box_bThL\",\"arrow\":\"KDCardView_arrow_3Acp\",\"has-underline\":\"KDCardView_has-underline_QliS\",\"pre-btn\":\"KDCardView_pre-btn_12ee\",\"disabled\":\"KDCardView_disabled_1Ztj\",\"next-btn\":\"KDCardView_next-btn_3Hyi\",\"chunk\":\"KDCardView_chunk_2zwT\",\"timeline-panel\":\"KDCardView_timeline-panel_iF0D\",\"time-line\":\"KDCardView_time-line_1lzJ\",\"first-line\":\"KDCardView_first-line_2u-v\",\"last-line\":\"KDCardView_last-line_2PaK\",\"dot\":\"KDCardView_dot_1yKN\",\"current\":\"KDCardView_current_3SNX\",\"panel\":\"KDCardView_panel_2c7R\",\"no-data-card\":\"KDCardView_no-data-card_3yl5\",\"no-data-container\":\"KDCardView_no-data-container_7LCo\",\"img-item\":\"KDCardView_img-item_1WXU\",\"hover_show_panel\":\"KDCardView_hover_show_panel_3dN6\",\"hover_show_item\":\"KDCardView_hover_show_item_2zes\",\"hover_hide_item\":\"KDCardView_hover_hide_item_1mqe\"});\n\n//# sourceURL=webpack://bos-platform/./src/component/web/KDCardView.less?");

/***/ }),

/***/ "./src/component/web/KDFieldSetPanel.less":
/*!************************************************!*\
  !*** ./src/component/web/KDFieldSetPanel.less ***!
  \************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\"fieldset-panel\":\"KDFieldSetPanel_fieldset-panel_V2Kq\",\"full-screen\":\"KDFieldSetPanel_full-screen_3T36\",\"isDesigner\":\"KDFieldSetPanel_isDesigner_32T3\"});\n\n//# sourceURL=webpack://bos-platform/./src/component/web/KDFieldSetPanel.less?");

/***/ }),

/***/ "./src/component/web/KDIFrame.less":
/*!*****************************************!*\
  !*** ./src/component/web/KDIFrame.less ***!
  \*****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\"root\":\"KDIFrame_root_3zZ3\"});\n\n//# sourceURL=webpack://bos-platform/./src/component/web/KDIFrame.less?");

/***/ }),

/***/ "./src/component/web/KDToolBar.less":
/*!******************************************!*\
  !*** ./src/component/web/KDToolBar.less ***!
  \******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\"more-btn-wrapper\":\"KDToolBar_more-btn-wrapper_3y7u\",\"more-btn\":\"KDToolBar_more-btn_31mb\",\"custom-panel\":\"KDToolBar_custom-panel_1tET\"});\n\n//# sourceURL=webpack://bos-platform/./src/component/web/KDToolBar.less?");

/***/ }),

/***/ "./src/component/web/base/CommonFunctionPanel.less":
/*!*********************************************************!*\
  !*** ./src/component/web/base/CommonFunctionPanel.less ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\"commonfunctionpanel\":\"CommonFunctionPanel_commonfunctionpanel_3eAF\",\"autoWrap\":\"CommonFunctionPanel_autoWrap_1C2v\",\"menugroup\":\"CommonFunctionPanel_menugroup_1Eur\",\"grouptitle\":\"CommonFunctionPanel_grouptitle_1tHE\",\"groupcontainer\":\"CommonFunctionPanel_groupcontainer_3pwB\",\"item\":\"CommonFunctionPanel_item_3cmw\",\"item-first\":\"CommonFunctionPanel_item-first_3Qwf\",\"item-title\":\"CommonFunctionPanel_item-title_356a\",\"subgroup\":\"CommonFunctionPanel_subgroup_9zR1\",\"menuitem\":\"CommonFunctionPanel_menuitem_1ZRz\",\"text-omit\":\"CommonFunctionPanel_text-omit_2X4o\"});\n\n//# sourceURL=webpack://bos-platform/./src/component/web/base/CommonFunctionPanel.less?");

/***/ }),

/***/ "./src/component/web/base/FlexibleField.less":
/*!***************************************************!*\
  !*** ./src/component/web/base/FlexibleField.less ***!
  \***************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\"flexiblePanel\":\"FlexibleField_flexiblePanel_3R0_\",\"flexibleCloseIcon\":\"FlexibleField_flexibleCloseIcon_3JRA\"});\n\n//# sourceURL=webpack://bos-platform/./src/component/web/base/FlexibleField.less?");

/***/ }),

/***/ "./src/component/web/base/GeographicLocation/style.less":
/*!**************************************************************!*\
  !*** ./src/component/web/base/GeographicLocation/style.less ***!
  \**************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\"geographic-location\":\"style_geographic-location_3NlB\",\"map-container\":\"style_map-container_3Q1u\",\"scale\":\"style_scale_2hM3\",\"location\":\"style_location_3ZxM\",\"flex-layout\":\"style_flex-layout_2aRX\",\"flex-layout-right\":\"style_flex-layout-right_kcM_\",\"locked-geo\":\"style_locked-geo_2BUR\",\"geo-label\":\"style_geo-label_3D-7\",\"input\":\"style_input_2-RJ\",\"no-result\":\"style_no-result_3dPV\",\"required-icon\":\"style_required-icon_K22v\"});\n\n//# sourceURL=webpack://bos-platform/./src/component/web/base/GeographicLocation/style.less?");

/***/ }),

/***/ "./src/component/web/base/GridContainer.less":
/*!***************************************************!*\
  !*** ./src/component/web/base/GridContainer.less ***!
  \***************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\"GridContainer\":\"GridContainer_GridContainer_1HhT\",\"gc-canedit\":\"GridContainer_gc-canedit_QQN6\",\"gc-compatible\":\"GridContainer_gc-compatible_1FYY\",\"gc-c\":\"GridContainer_gc-c_1omC\",\"gc-container\":\"GridContainer_gc-container_1wMM\",\"gc-item\":\"GridContainer_gc-item_nEg5\",\"delete-item\":\"GridContainer_delete-item_tssT\",\"bottombarpanel\":\"GridContainer_bottombarpanel_3UzH\",\"left-container\":\"GridContainer_left-container_3p74\",\"button\":\"GridContainer_button_3gLr\",\"newaddcard\":\"GridContainer_newaddcard_3ia1\",\"newaddcard-flag\":\"GridContainer_newaddcard-flag_7TsM\",\"newaddcard-show\":\"GridContainer_newaddcard-show_35YF\",\"newaddcard-item\":\"GridContainer_newaddcard-item_24RS\",\"editcontainer\":\"GridContainer_editcontainer_3BTN\",\"edit-cancel\":\"GridContainer_edit-cancel_3S36\",\"edit-end\":\"GridContainer_edit-end_3Fc1\",\"default-text\":\"GridContainer_default-text_nOcM\",\"default-wrapper\":\"GridContainer_default-wrapper_2Qb3\",\"default-inner\":\"GridContainer_default-inner_1V16\",\"default-wrapper-open\":\"GridContainer_default-wrapper-open_rpFv\",\"popup-panel\":\"GridContainer_popup-panel_cNyR\",\"ap-addcard-flag\":\"GridContainer_ap-addcard-flag_oHr6\",\"ap-show\":\"GridContainer_ap-show_3vy_\"});\n\n//# sourceURL=webpack://bos-platform/./src/component/web/base/GridContainer.less?");

/***/ }),

/***/ "./src/component/web/base/HomePageScheme.less":
/*!****************************************************!*\
  !*** ./src/component/web/base/HomePageScheme.less ***!
  \****************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\"scheme\":\"HomePageScheme_scheme_vMhM\",\"scheme-tips\":\"HomePageScheme_scheme-tips_1UjL\",\"scheme-dp-trigger\":\"HomePageScheme_scheme-dp-trigger_JhPJ\",\"scheme-dp-name\":\"HomePageScheme_scheme-dp-name_1fKh\",\"scheme-dp-trigger-hover\":\"HomePageScheme_scheme-dp-trigger-hover_rK3G\",\"scheme-label\":\"HomePageScheme_scheme-label_4F2G\",\"scheme-edit\":\"HomePageScheme_scheme-edit_3hgZ\",\"scheme-dp\":\"HomePageScheme_scheme-dp_2qUF\",\"scheme-dp-menu\":\"HomePageScheme_scheme-dp-menu_3fDK\",\"arrow-down\":\"HomePageScheme_arrow-down_o0zk\",\"scheme-group\":\"HomePageScheme_scheme-group_1w_7\",\"scheme-group-title\":\"HomePageScheme_scheme-group-title_dlo6\",\"scheme-group-item\":\"HomePageScheme_scheme-group-item_1we6\",\"scheme-group-submenu\":\"HomePageScheme_scheme-group-submenu_3G4M\",\"scheme-item-name-wrapper\":\"HomePageScheme_scheme-item-name-wrapper_39Eq\",\"scheme-item-name\":\"HomePageScheme_scheme-item-name_2pf-\",\"icon-arrow-down\":\"HomePageScheme_icon-arrow-down_sc5h\",\"scheme-item-default\":\"HomePageScheme_scheme-item-default_3Nj1\",\"scheme-item-selected\":\"HomePageScheme_scheme-item-selected_-NAP\",\"btn-more\":\"HomePageScheme_btn-more_2ZLp\",\"toolbar\":\"HomePageScheme_toolbar_HrXI\",\"edit\":\"HomePageScheme_edit_12PU\",\"edit-icon\":\"HomePageScheme_edit-icon_2TX_\",\"edit-text\":\"HomePageScheme_edit-text_17Ju\",\"edit-disabled\":\"HomePageScheme_edit-disabled_3q7D\",\"refresh\":\"HomePageScheme_refresh_14Kv\",\"refresh-icon\":\"HomePageScheme_refresh-icon_1CBk\",\"refresh-text\":\"HomePageScheme_refresh-text_2tga\",\"add\":\"HomePageScheme_add_1osD\",\"add-icon\":\"HomePageScheme_add-icon_6Jng\",\"cancel\":\"HomePageScheme_cancel_31hI\",\"save-as-trigger\":\"HomePageScheme_save-as-trigger_3wZf\",\"save\":\"HomePageScheme_save_S-NG\",\"operation\":\"HomePageScheme_operation_3J17\",\"save-as-dp\":\"HomePageScheme_save-as-dp_2JMP\",\"save-as-dpul\":\"HomePageScheme_save-as-dpul_3vEY\",\"homePageSchemeIcon\":\"HomePageScheme_homePageSchemeIcon_3YNA\",\"with-collapse-icon\":\"HomePageScheme_with-collapse-icon_1Pz_\",\"icon\":\"HomePageScheme_icon_Q4OJ\",\"active-click\":\"HomePageScheme_active-click_3S2p\",\"disabled-btn\":\"HomePageScheme_disabled-btn_1PjR\",\"btn-ghost\":\"HomePageScheme_btn-ghost_2vCv\",\"homePageSchemeIcon-show-true\":\"HomePageScheme_homePageSchemeIcon-show-true_2YUA\",\"homePageSchemeIcon-show-false\":\"HomePageScheme_homePageSchemeIcon-show-false_3jVQ\",\"homePageScheme-arrow\":\"HomePageScheme_homePageScheme-arrow_3ITZ\",\"homePageScheme-arrow-right\":\"HomePageScheme_homePageScheme-arrow-right_3p1-\",\"arrowContent\":\"HomePageScheme_arrowContent_2sKe\",\"arrowContent-arrow-left\":\"HomePageScheme_arrowContent-arrow-left_1XmA\"});\n\n//# sourceURL=webpack://bos-platform/./src/component/web/base/HomePageScheme.less?");

/***/ }),

/***/ "./src/component/web/base/HomePageTab/HomePageVirtualTab.less":
/*!********************************************************************!*\
  !*** ./src/component/web/base/HomePageTab/HomePageVirtualTab.less ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\"nav\":\"HomePageVirtualTab_nav_3yQD\",\"static-tab\":\"HomePageVirtualTab_static-tab_3wEC\",\"item\":\"HomePageVirtualTab_item_2F9t\",\"active\":\"HomePageVirtualTab_active_QyCJ\",\"virtualTabs\":\"HomePageVirtualTab_virtualTabs_6BXi\",\"app-tab\":\"HomePageVirtualTab_app-tab_1bd3\",\"text\":\"HomePageVirtualTab_text_24Ir\",\"arrow-icon\":\"HomePageVirtualTab_arrow-icon_TpqH\",\"expand\":\"HomePageVirtualTab_expand_3qUt\",\"virtual-tab-out-wrap\":\"HomePageVirtualTab_virtual-tab-out-wrap_2H7c\",\"hide\":\"HomePageVirtualTab_hide_19eQ\",\"pre-btn-wrap\":\"HomePageVirtualTab_pre-btn-wrap_2sz3\",\"next-btn-wrap\":\"HomePageVirtualTab_next-btn-wrap_3bLR\",\"more-wrap\":\"HomePageVirtualTab_more-wrap_3Kr6\",\"left-btn-wrap\":\"HomePageVirtualTab_left-btn-wrap_drBX\",\"more-right-wrap\":\"HomePageVirtualTab_more-right-wrap_b5eT\",\"more-icon\":\"HomePageVirtualTab_more-icon_fBNI\",\"pre-btn\":\"HomePageVirtualTab_pre-btn_2nqI\",\"next-btn\":\"HomePageVirtualTab_next-btn_2ZI5\",\"virtual-tab\":\"HomePageVirtualTab_virtual-tab_3JFj\",\"animate\":\"HomePageVirtualTab_animate_2mBy\",\"content\":\"HomePageVirtualTab_content_1rWb\",\"contentHover\":\"HomePageVirtualTab_contentHover_3Fq-\",\"close-icon\":\"HomePageVirtualTab_close-icon_3vC_\",\"close-icon-drag\":\"HomePageVirtualTab_close-icon-drag_3zSi\",\"app-menu\":\"HomePageVirtualTab_app-menu_hzJn\",\"menu-info\":\"HomePageVirtualTab_menu-info_1IUz\",\"top\":\"HomePageVirtualTab_top_3Mis\",\"menu-icon\":\"HomePageVirtualTab_menu-icon_2f8s\",\"droping\":\"HomePageVirtualTab_droping_295K\",\"more-virtual-item\":\"HomePageVirtualTab_more-virtual-item_2n7w\",\"context-menu-item\":\"HomePageVirtualTab_context-menu-item_2ijZ\",\"app-tabs-empty-tip-animation\":\"HomePageVirtualTab_app-tabs-empty-tip-animation_2zJN\",\"showNoFixedEmpty\":\"HomePageVirtualTab_showNoFixedEmpty_2GD9\",\"app-tabs-empty-tip-closeAnimation\":\"HomePageVirtualTab_app-tabs-empty-tip-closeAnimation_k3KN\",\"closeNoFixedEmpty\":\"HomePageVirtualTab_closeNoFixedEmpty_2Ki7\",\"app-tabs-empty-tip\":\"HomePageVirtualTab_app-tabs-empty-tip_10m6\",\"app-tabs-empty-content\":\"HomePageVirtualTab_app-tabs-empty-content_2GLz\",\"app-tabs-hr\":\"HomePageVirtualTab_app-tabs-hr_ZFmF\",\"app-tabs-hr-fixed\":\"HomePageVirtualTab_app-tabs-hr-fixed_25p4\",\"app-tabs-hr-notFixed\":\"HomePageVirtualTab_app-tabs-hr-notFixed_kgyE\",\"app-move-tabs\":\"HomePageVirtualTab_app-move-tabs_1Mmg\",\"virtual-tab-drag-bottom\":\"HomePageVirtualTab_virtual-tab-drag-bottom_3Esv\",\"virtual-tab-drag-top\":\"HomePageVirtualTab_virtual-tab-drag-top_1UWB\",\"app-move-empty-tip\":\"HomePageVirtualTab_app-move-empty-tip_33sZ\",\"menu-sizing-overflow\":\"HomePageVirtualTab_menu-sizing-overflow_1aNQ\",\"menu-sizing-overflow-span\":\"HomePageVirtualTab_menu-sizing-overflow-span_2g5L\",\"nav-drop-down\":\"HomePageVirtualTab_nav-drop-down_2whO\",\"app-tabs-safe-area\":\"HomePageVirtualTab_app-tabs-safe-area_1Qky\",\"app-tabs-items-safe-area\":\"HomePageVirtualTab_app-tabs-items-safe-area_2DfS\",\"app-tabs-items\":\"HomePageVirtualTab_app-tabs-items_2bdP\",\"drop-placeholder\":\"HomePageVirtualTab_drop-placeholder_3fZT\",\"virtual-tab-moveDrop\":\"HomePageVirtualTab_virtual-tab-moveDrop_1_PZ\",\"oldVirtuaMoveUp\":\"HomePageVirtualTab_oldVirtuaMoveUp_3UGm\",\"oldVirtuaMoveBottom\":\"HomePageVirtualTab_oldVirtuaMoveBottom_1QJ_\",\"vbirtuaMoveUp\":\"HomePageVirtualTab_vbirtuaMoveUp_39h7\",\"virtuaMoveBottom\":\"HomePageVirtualTab_virtuaMoveBottom_2Hv9\"});\n\n//# sourceURL=webpack://bos-platform/./src/component/web/base/HomePageTab/HomePageVirtualTab.less?");

/***/ }),

/***/ "./src/component/web/base/ToolbarMore.less":
/*!*************************************************!*\
  !*** ./src/component/web/base/ToolbarMore.less ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\"dropdown-container\":\"ToolbarMore_dropdown-container_9AzP\",\"bottom\":\"ToolbarMore_bottom_3fw8\",\"border_top\":\"ToolbarMore_border_top_2L0H\",\"check_li\":\"ToolbarMore_check_li_1en-\",\"drop-down-check-list\":\"ToolbarMore_drop-down-check-list_zex1\",\"toolbars-menus-list\":\"ToolbarMore_toolbars-menus-list_ejng\",\"top_footer_div\":\"ToolbarMore_top_footer_div_2vEi\",\"confirm\":\"ToolbarMore_confirm_2cde\",\"custom_title\":\"ToolbarMore_custom_title_1hZ2\",\"custom_title_left\":\"ToolbarMore_custom_title_left_7I8c\",\"titleIcon\":\"ToolbarMore_titleIcon_3qMy\",\"tooltips\":\"ToolbarMore_tooltips_DaqL\",\"text\":\"ToolbarMore_text_1XYU\",\"name_span\":\"ToolbarMore_name_span_zhuz\",\"dropdown-menu-wrapper\":\"ToolbarMore_dropdown-menu-wrapper_23dF\",\"dropdown-menu\":\"ToolbarMore_dropdown-menu_2GgO\",\"convert\":\"ToolbarMore_convert_3pVw\",\"textspan\":\"ToolbarMore_textspan_1m-v\",\"downdiv\":\"ToolbarMore_downdiv_2WJx\",\"li-container\":\"ToolbarMore_li-container_2Abz\",\"son-padding-left\":\"ToolbarMore_son-padding-left_NrqP\",\"selector\":\"ToolbarMore_selector_2fX4\",\"arrow-down\":\"ToolbarMore_arrow-down_2hoc\",\"more-btn\":\"ToolbarMore_more-btn_1BYs\"});\n\n//# sourceURL=webpack://bos-platform/./src/component/web/base/ToolbarMore.less?");

/***/ }),

/***/ "./src/component/web/baseField/RadioOptGroupField.less":
/*!*************************************************************!*\
  !*** ./src/component/web/baseField/RadioOptGroupField.less ***!
  \*************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\"radio-opt-group-field-v\":\"RadioOptGroupField_radio-opt-group-field-v_T74v\"});\n\n//# sourceURL=webpack://bos-platform/./src/component/web/baseField/RadioOptGroupField.less?");

/***/ }),

/***/ "./src/component/web/baseField/RichTextField.less":
/*!********************************************************!*\
  !*** ./src/component/web/baseField/RichTextField.less ***!
  \********************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\"field-item\":\"RichTextField_field-item_1JYp\",\"label-wrap\":\"RichTextField_label-wrap_iDtU\",\"must\":\"RichTextField_must_qfGf\",\"no-width\":\"RichTextField_no-width_1LUj\",\"label-text-left\":\"RichTextField_label-text-left_38S_\",\"label-text-center\":\"RichTextField_label-text-center_z4Od\",\"label-text-right\":\"RichTextField_label-text-right_1EE_\",\"title-wrapper\":\"RichTextField_title-wrapper_QoBe\",\"title-align-left\":\"RichTextField_title-align-left_1f0I\",\"title-align-right\":\"RichTextField_title-align-right_8VQ0\",\"title-align-center\":\"RichTextField_title-align-center_3dWY\",\"value-wrap\":\"RichTextField_value-wrap_2UNJ\",\"richtext-label\":\"RichTextField_richtext-label_1SVN\"});\n\n//# sourceURL=webpack://bos-platform/./src/component/web/baseField/RichTextField.less?");

/***/ }),

/***/ "./src/style/react-grid-layout.less":
/*!******************************************!*\
  !*** ./src/style/react-grid-layout.less ***!
  \******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n\n\n//# sourceURL=webpack://bos-platform/./src/style/react-grid-layout.less?");

/***/ }),

/***/ "./src/reducer/registerReducer sync recursive ^(?%21\\.\\/index).*\\.js$":
/*!*******************************************************************!*\
  !*** ./src/reducer/registerReducer/ sync ^(?%21\.\/index).*\.js$ ***!
  \*******************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("var map = {\n\t\"./actionReducer.js\": \"./src/reducer/registerReducer/actionReducer.js\",\n\t\"./admindivisionReducer.js\": \"./src/reducer/registerReducer/admindivisionReducer.js\",\n\t\"./approvalProcessingReducer.js\": \"./src/reducer/registerReducer/approvalProcessingReducer.js\",\n\t\"./approvalRecordReducer.js\": \"./src/reducer/registerReducer/approvalRecordReducer.js\",\n\t\"./appstartReducer.js\": \"./src/reducer/registerReducer/appstartReducer.js\",\n\t\"./attachmentpanelReducer.js\": \"./src/reducer/registerReducer/attachmentpanelReducer.js\",\n\t\"./baseCardFieldReducer.js\": \"./src/reducer/registerReducer/baseCardFieldReducer.js\",\n\t\"./billReducer.js\": \"./src/reducer/registerReducer/billReducer.js\",\n\t\"./buttonReducer.js\": \"./src/reducer/registerReducer/buttonReducer.js\",\n\t\"./commonFilterReducer.js\": \"./src/reducer/registerReducer/commonFilterReducer.js\",\n\t\"./commonFunctionPanelReducer.js\": \"./src/reducer/registerReducer/commonFunctionPanelReducer.js\",\n\t\"./dateselectReducer.js\": \"./src/reducer/registerReducer/dateselectReducer.js\",\n\t\"./entitydesignerReducer.js\": \"./src/reducer/registerReducer/entitydesignerReducer.js\",\n\t\"./f7Reducer.js\": \"./src/reducer/registerReducer/f7Reducer.js\",\n\t\"./fieldReducer.js\": \"./src/reducer/registerReducer/fieldReducer.js\",\n\t\"./generalf7Reducer.js\": \"./src/reducer/registerReducer/generalf7Reducer.js\",\n\t\"./generaltreef7Reducer.js\": \"./src/reducer/registerReducer/generaltreef7Reducer.js\",\n\t\"./gridReducer.js\": \"./src/reducer/registerReducer/gridReducer.js\",\n\t\"./gridcontainerReducer.js\": \"./src/reducer/registerReducer/gridcontainerReducer.js\",\n\t\"./guideReducer.js\": \"./src/reducer/registerReducer/guideReducer.js\",\n\t\"./homePageTabReducer.js\": \"./src/reducer/registerReducer/homePageTabReducer.js\",\n\t\"./htmlReducer.js\": \"./src/reducer/registerReducer/htmlReducer.js\",\n\t\"./hyperLinkReducer.js\": \"./src/reducer/registerReducer/hyperLinkReducer.js\",\n\t\"./iconReducer.js\": \"./src/reducer/registerReducer/iconReducer.js\",\n\t\"./iframeReducer.js\": \"./src/reducer/registerReducer/iframeReducer.js\",\n\t\"./littlekReducer.js\": \"./src/reducer/registerReducer/littlekReducer.js\",\n\t\"./mapReducer.js\": \"./src/reducer/registerReducer/mapReducer.js\",\n\t\"./mobilefilterReducer.js\": \"./src/reducer/registerReducer/mobilefilterReducer.js\",\n\t\"./myApplicationReducer.js\": \"./src/reducer/registerReducer/myApplicationReducer.js\",\n\t\"./qingReducer.js\": \"./src/reducer/registerReducer/qingReducer.js\",\n\t\"./qrcodeReducer.js\": \"./src/reducer/registerReducer/qrcodeReducer.js\",\n\t\"./querypanelReducer.js\": \"./src/reducer/registerReducer/querypanelReducer.js\",\n\t\"./reportfilterReducer.js\": \"./src/reducer/registerReducer/reportfilterReducer.js\",\n\t\"./searchReducer.js\": \"./src/reducer/registerReducer/searchReducer.js\",\n\t\"./splitcontainerReducer.js\": \"./src/reducer/registerReducer/splitcontainerReducer.js\",\n\t\"./subGridReducer.js\": \"./src/reducer/registerReducer/subGridReducer.js\",\n\t\"./tabReducer.js\": \"./src/reducer/registerReducer/tabReducer.js\",\n\t\"./tilePanelReducer.js\": \"./src/reducer/registerReducer/tilePanelReducer.js\",\n\t\"./transferContainerReducer.js\": \"./src/reducer/registerReducer/transferContainerReducer.js\",\n\t\"./treeReducer.js\": \"./src/reducer/registerReducer/treeReducer.js\",\n\t\"./wFNavigationBarReducer.js\": \"./src/reducer/registerReducer/wFNavigationBarReducer.js\",\n\t\"./wfConditionReducer.js\": \"./src/reducer/registerReducer/wfConditionReducer.js\",\n\t\"./workcalendarReducer.js\": \"./src/reducer/registerReducer/workcalendarReducer.js\",\n\t\"./yzjChatReducer.js\": \"./src/reducer/registerReducer/yzjChatReducer.js\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./src/reducer/registerReducer sync recursive ^(?%21\\\\.\\\\/index).*\\\\.js$\";\n\n//# sourceURL=webpack://bos-platform/./src/reducer/registerReducer/_sync_^(?");

/***/ }),

/***/ "../../node_modules/xss-filters/src/xss-filters.js":
/*!******************************************************************************************!*\
  !*** delegated ../../node_modules/xss-filters/src/xss-filters.js from dll-reference lib ***!
  \******************************************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("module.exports = (__webpack_require__(/*! dll-reference lib */ \"dll-reference lib\"))(8375);\n\n//# sourceURL=webpack://bos-platform/delegated_../../node_modules/xss-filters/src/xss-filters.js_from_dll-reference_lib?");

/***/ }),

/***/ "../../node_modules/redux/es/index.js":
/*!*****************************************************************************!*\
  !*** delegated ../../node_modules/redux/es/index.js from dll-reference lib ***!
  \*****************************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("module.exports = (__webpack_require__(/*! dll-reference lib */ \"dll-reference lib\"))(9249);\n\n//# sourceURL=webpack://bos-platform/delegated_../../node_modules/redux/es/index.js_from_dll-reference_lib?");

/***/ })

}]);