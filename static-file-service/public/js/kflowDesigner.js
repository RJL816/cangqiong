"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackJsonp_bos-platform"] = self["webpackJsonp_bos-platform"] || []).push([[7192],{

/***/ "./src/action/actionname/control/kflowDesigner/client/index.js":
/*!*********************************************************************!*\
  !*** ./src/action/actionname/control/kflowDesigner/client/index.js ***!
  \*********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\n\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.KFLOWDESIGNER_SAVE_CLICK = exports.KFLOWDESIGNER_PUBLICE_CLICK = exports.KFLOWDESIGNER_EXIT_CLICK = void 0;\n/**\n * showdoc\n * @catalog 控件指令/K流设计器/客户端\n * @title 保存\n * @description K流设计器中保存事件\n * @ctrl_type K流设计器\n * @method designerBarClick\n * @platform PC\n * @eg [{\"key\":\"kflowdesigner\",\"methodName\":\"designerBarClick\",\"args\":[\"save\",\"\"],\"postData\":[{},[]]}]\n * @eg_p key string 控件的标识\n * @eg_p methodname string 方法名\n * @eg_p args array 参数列表\n * @version 1.0.0\n * @author xiaojing_yu\n */\nvar KFLOWDESIGNER_SAVE_CLICK = exports.KFLOWDESIGNER_SAVE_CLICK = 'designerBarClick';\n\n/**\n * showdoc\n * @catalog 控件指令/K流设计器/客户端\n * @title 发布\n * @description K流设计器中发布事件\n * @ctrl_type K流设计器\n * @method designerBarClick\n * @platform PC\n * @eg [{\"key\":\"kflowdesigner\",\"methodName\":\"designerBarClick\",\"args\":[\"distribution\",\"\"],\"postData\":[{},[]]}]\n * @eg_p key string 控件的标识\n * @eg_p methodname string 方法名\n * @eg_p args array 参数列表\n * @version 1.0.0\n * @author xiaojing_yu\n */\nvar KFLOWDESIGNER_PUBLICE_CLICK = exports.KFLOWDESIGNER_PUBLICE_CLICK = 'designerBarClick';\n\n/**\n * showdoc\n * @catalog 控件指令/K流设计器/客户端\n * @title 退出\n * @description K流设计器中退出事件\n * @ctrl_type K流设计器\n * @method designerBarClick\n * @platform PC\n * @eg [{\"key\":\"kflowdesigner\",\"methodName\":\"designerBarClick\",\"args\":[\"exit\",\"\"],\"postData\":[{},[]]}]\n * @eg_p key string 控件的标识\n * @eg_p methodname string 方法名\n * @eg_p args array 参数列表\n * @version 1.0.0\n * @author xiaojing_yu\n */\nvar KFLOWDESIGNER_EXIT_CLICK = exports.KFLOWDESIGNER_EXIT_CLICK = 'designerBarClick';\n\n//# sourceURL=webpack://bos-platform/./src/action/actionname/control/kflowDesigner/client/index.js?");

/***/ }),

/***/ "./src/action/kflowDesignerAction.js":
/*!*******************************************!*\
  !*** ./src/action/kflowDesignerAction.js ***!
  \*******************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports.exit = exit;\nexports.publish = publish;\nexports.save = save;\nexports.tabClick = tabClick;\nvar action = _interopRequireWildcard(__webpack_require__(/*! ./action */ \"./src/action/action.js\"));\nvar _client = __webpack_require__(/*! @/action/actionname/control/kflowDesigner/client */ \"./src/action/actionname/control/kflowDesigner/client/index.js\");\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction save(model) {\n  return action.invokeControlService(model, _client.KFLOWDESIGNER_SAVE_CLICK, ['save', '']);\n}\nfunction tabClick(model) {\n  var args = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  return action.invokeControlService(model, 'designerBarClick', args);\n}\nfunction publish(model) {\n  return action.invokeControlService(model, _client.KFLOWDESIGNER_PUBLICE_CLICK, ['distribution', '']);\n}\nfunction exit(model) {\n  return action.invokeControlService(model, _client.KFLOWDESIGNER_EXIT_CLICK, ['exit', '']);\n}\n\n//# sourceURL=webpack://bos-platform/./src/action/kflowDesignerAction.js?");

/***/ }),

/***/ "./src/component/web/KDKFlowDesigner/KDKFlowDesigner.jsx":
/*!***************************************************************!*\
  !*** ./src/component/web/KDKFlowDesigner/KDKFlowDesigner.jsx ***!
  \***************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\n__webpack_require__(/*! core-js/modules/es.symbol.js */ \"../../node_modules/core-js/modules/es.symbol.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.description.js */ \"../../node_modules/core-js/modules/es.symbol.description.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.iterator.js */ \"../../node_modules/core-js/modules/es.symbol.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.symbol.to-primitive.js */ \"../../node_modules/core-js/modules/es.symbol.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.array.from.js */ \"../../node_modules/core-js/modules/es.array.from.js\");\n__webpack_require__(/*! core-js/modules/es.array.iterator.js */ \"../../node_modules/core-js/modules/es.array.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.array.slice.js */ \"../../node_modules/core-js/modules/es.array.slice.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-primitive.js */ \"../../node_modules/core-js/modules/es.date.to-primitive.js\");\n__webpack_require__(/*! core-js/modules/es.date.to-string.js */ \"../../node_modules/core-js/modules/es.date.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.number.constructor.js */ \"../../node_modules/core-js/modules/es.number.constructor.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-properties.js */ \"../../node_modules/core-js/modules/es.object.define-properties.js\");\n__webpack_require__(/*! core-js/modules/es.object.define-property.js */ \"../../node_modules/core-js/modules/es.object.define-property.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptor.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js\");\n__webpack_require__(/*! core-js/modules/es.object.get-own-property-descriptors.js */ \"../../node_modules/core-js/modules/es.object.get-own-property-descriptors.js\");\n__webpack_require__(/*! core-js/modules/es.object.keys.js */ \"../../node_modules/core-js/modules/es.object.keys.js\");\n__webpack_require__(/*! core-js/modules/es.regexp.exec.js */ \"../../node_modules/core-js/modules/es.regexp.exec.js\");\n__webpack_require__(/*! core-js/modules/es.regexp.to-string.js */ \"../../node_modules/core-js/modules/es.regexp.to-string.js\");\n__webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"../../node_modules/core-js/modules/es.string.iterator.js\");\n__webpack_require__(/*! core-js/modules/es.weak-map.js */ \"../../node_modules/core-js/modules/es.weak-map.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"../../node_modules/core-js/modules/web.dom-collections.iterator.js\");\nObject.defineProperty(exports, \"__esModule\", ({\n  value: true\n}));\nexports[\"default\"] = KDKFlowDesigner;\n__webpack_require__(/*! core-js/modules/es.array.concat.js */ \"../../node_modules/core-js/modules/es.array.concat.js\");\n__webpack_require__(/*! core-js/modules/es.array.filter.js */ \"../../node_modules/core-js/modules/es.array.filter.js\");\n__webpack_require__(/*! core-js/modules/es.array.for-each.js */ \"../../node_modules/core-js/modules/es.array.for-each.js\");\n__webpack_require__(/*! core-js/modules/es.array.is-array.js */ \"../../node_modules/core-js/modules/es.array.is-array.js\");\n__webpack_require__(/*! core-js/modules/es.function.name.js */ \"../../node_modules/core-js/modules/es.function.name.js\");\n__webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"../../node_modules/core-js/modules/es.object.to-string.js\");\n__webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ \"../../node_modules/core-js/modules/web.dom-collections.for-each.js\");\nvar _react = _interopRequireWildcard(__webpack_require__(/*! react */ \"webpack/sharing/consume/default/react/react?dca2\"));\nvar _reactDom = _interopRequireDefault(__webpack_require__(/*! react-dom */ \"webpack/sharing/consume/default/react-dom/react-dom?418d\"));\nvar _api = __webpack_require__(/*! @/designer/utils/api.js */ \"./src/designer/utils/api.js\");\nvar _appModelFunction = __webpack_require__(/*! @/model/appModelFunction.js */ \"./src/model/appModelFunction.js\");\nvar _designeraction = __webpack_require__(/*! @/action/designeraction */ \"./src/action/designeraction.js\");\nvar _convertUpperCaseKeyToLowerCase = _interopRequireDefault(__webpack_require__(/*! ../designerCommonUtils/convertUpperCaseKeyToLowerCase */ \"./src/component/web/designerCommonUtils/convertUpperCaseKeyToLowerCase.js\"));\nvar _LoadingGIF = _interopRequireDefault(__webpack_require__(/*! @/component/common/LoadingGIF.js */ \"./src/component/common/LoadingGIF.js\"));\nvar _server = __webpack_require__(/*! @/action/actionname/control/designer/server */ \"./src/action/actionname/control/designer/server/index.js\");\nvar _const = __webpack_require__(/*! @/constant/const */ \"./src/constant/const.js\");\nvar _KDKFlowDesigner = _interopRequireDefault(__webpack_require__(/*! ./KDKFlowDesigner.less */ \"./src/component/web/KDKFlowDesigner/KDKFlowDesigner.less\"));\nvar _useSetControlMount = _interopRequireDefault(__webpack_require__(/*! @/use/useSetControlMount */ \"./src/use/useSetControlMount.js\"));\nvar _memoryCacher = __webpack_require__(/*! @/model/memoryCacher */ \"./src/model/memoryCacher.js\");\nvar _ProFormDesignerBar = _interopRequireDefault(__webpack_require__(/*! @/component/web/KDProFormDesigner/ProFormDesignerBar.jsx */ \"./src/component/web/KDProFormDesigner/ProFormDesignerBar.jsx\"));\nvar _classnames = _interopRequireDefault(__webpack_require__(/*! classnames */ \"../../node_modules/classnames/index.js\"));\nvar _commonUtils = _interopRequireDefault(__webpack_require__(/*! @/component/common/commonUtils.js */ \"./src/component/common/commonUtils.js\"));\nvar _componentutil = __webpack_require__(/*! @/util/componentutil.js */ \"./src/util/componentutil.js\");\nvar _kflowDesignerAction = __webpack_require__(/*! @/action/kflowDesignerAction.js */ \"./src/action/kflowDesignerAction.js\");\nvar _useFederationModule = __webpack_require__(/*! @/hooks/useFederationModule.js */ \"./src/hooks/useFederationModule.js\");\nvar _lodash = __webpack_require__(/*! lodash */ \"../../node_modules/lodash/lodash.js\");\nvar _kdesign = __webpack_require__(/*! @kdcloudjs/kdesign */ \"webpack/sharing/consume/default/@kdcloudjs/kdesign/@kdcloudjs/kdesign\");\nvar _dragService = __webpack_require__(/*! @/service/web/dragService.js */ \"./src/service/web/dragService.js\");\nvar action = _interopRequireWildcard(__webpack_require__(/*! @/action/action */ \"./src/action/action.js\"));\nvar _intlApi = __webpack_require__(/*! @/i18n/intlApi */ \"./src/i18n/intlApi.js\");\nvar _serverproperties = __webpack_require__(/*! @/constant/serverproperties */ \"./src/constant/serverproperties.js\");\nvar _toolUtils = __webpack_require__(/*! @/util/toolUtils */ \"./src/util/toolUtils.js\");\nvar _UnSupportIE = _interopRequireDefault(__webpack_require__(/*! @/component/common/UnSupportIE */ \"./src/component/common/UnSupportIE.jsx\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != _typeof(e) && \"function\" != typeof e) return { \"default\": e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n[\"default\"] = e, t && t.set(e, n), n; }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nvar KFLOWMETA = 'kflowmeta';\nvar KFLOWNAME = 'KFlowName';\nvar KFLOWNUMBER = 'KFlowNumber';\nfunction KDKFlowDesigner(_ref) {\n  var _userUIState$getIn, _data$KFLOWMETA, _data$KFLOWMETA2;\n  var model = _ref.model,\n    dispatch = _ref.dispatch;\n  var _useState = (0, _react.useState)(),\n    _useState2 = _slicedToArray(_useState, 2),\n    meta = _useState2[0],\n    setMeta = _useState2[1];\n  var _useState3 = (0, _react.useState)(),\n    _useState4 = _slicedToArray(_useState3, 2),\n    data = _useState4[0],\n    setData = _useState4[1];\n  var _useState5 = (0, _react.useState)([]),\n    _useState6 = _slicedToArray(_useState5, 2),\n    errorList = _useState6[0],\n    setErrorList = _useState6[1];\n  var _useState7 = (0, _react.useState)(false),\n    _useState8 = _slicedToArray(_useState7, 2),\n    showGuide = _useState8[0],\n    setShowGuide = _useState8[1];\n  var _useState9 = (0, _react.useState)(false),\n    _useState10 = _slicedToArray(_useState9, 2),\n    dialogVisible = _useState10[0],\n    setDialogVisible = _useState10[1];\n  (0, _useSetControlMount[\"default\"])(model);\n  var kflowdesignerRef = (0, _react.useRef)();\n  var designerDataRef = (0, _react.useRef)();\n  var lastSaveDataRef = (0, _react.useRef)(); // 上一次保存后的数据\n  var lastValidateDataRef = (0, _react.useRef)(); // 上一次校验的数据\n\n  // 模块联邦加载k流设计器\n  var _useFederatedModule = (0, _useFederationModule.useFederatedModule)('kflow'),\n    kflowmodule = _useFederatedModule.Component; // 请求组件\n  var _ref2 = kflowmodule || {},\n    KFlowDesigner = _ref2.KFlowDesigner;\n  (0, _react.useEffect)(function () {\n    var pageId = model.pageId,\n      key = model.key;\n    var removeDirectivesListener = (0, _memoryCacher.subscribeControlMethod)(pageId, key, 'directives', function (pageData) {\n      if (pageData === undefined) {\n        return;\n      }\n      invokeControlMethods(pageData);\n    });\n    var setPropertyHandler = model.sub_Event('setProperty', function () {\n      var args = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      return setProperty(args);\n    });\n    var showErrorListHandle = model.sub_Event('showErrorList', function () {\n      var args = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      return showErrorList(args);\n    });\n    return function () {\n      removeDirectivesListener();\n      model.unsub_Event(setPropertyHandler);\n      model.unsub_Event(showErrorListHandle);\n    };\n  }, [model]);\n  var invokeControlMethods = function invokeControlMethods(events) {\n    events.forEach(function (event) {\n      var methodName = event.methodname,\n        args = event.args;\n      switch (methodName) {\n        case _server.KFLOWDESIGNER_OPEN:\n          {\n            var modelType = args[0];\n            (0, _api.getKFlowMetadata)(modelType).then(function (meta) {\n              setMeta(meta);\n            });\n            // 设置页面元数据\n            var _data = args[1];\n            setData(_data);\n            var pageData = (0, _lodash.cloneDeep)(_data);\n            lastSaveDataRef.current = pageData;\n            designerDataRef.current = _data;\n            break;\n          }\n        case _server.SHOW_GUIDE:\n          {\n            setShowGuide(args[0]);\n            break;\n          }\n        default:\n          console.info(\"\".concat(methodName, \" is not been implemented\"));\n      }\n    });\n  };\n  var onData = function onData(data) {\n    designerDataRef.current = data;\n    // 数据更改，进行校验\n    validateAction();\n  };\n  var onApi = function onApi(kdesignerApi) {\n    kflowdesignerRef.current = _objectSpread({}, kdesignerApi);\n  };\n  var dragApi = function dragApi() {\n    return {\n      dragElement: _dragService.dragElement,\n      removeDragElement: _dragService.removeDragElement\n    };\n  };\n\n  // 去掉虚拟线和节点\n  var deleteHideEles = function deleteHideEles(data) {\n    var newData = data.filter(function (item) {\n      return item._Type_ !== 'HideEdge' && item._Type_ !== 'HideAp';\n    });\n    return newData;\n  };\n  var saveDataToPostData = function saveDataToPostData() {\n    var pageId = model.pageId,\n      key = model.key;\n    var newData = (0, _lodash.cloneDeep)(designerDataRef.current);\n    var items = newData.kflowmeta.Items;\n    newData.kflowmeta.Items = deleteHideEles(items);\n    lastSaveDataRef.current = newData;\n    dispatch((0, _appModelFunction.convertAppModelFunctionAction)((0, _appModelFunction.setControlPostValue)(pageId, key, newData)));\n  };\n  var save = function save() {\n    saveDataToPostData();\n    dispatch((0, _kflowDesignerAction.save)(model));\n  };\n\n  // 发布\n  var onPublish = function onPublish() {\n    saveDataToPostData();\n    dispatch((0, _kflowDesignerAction.publish)(model));\n  };\n\n  // 退出\n  var onCancel = function onCancel() {\n    var newData = designerDataRef.current;\n    var oldData = lastSaveDataRef.current;\n    if ((0, _lodash.isEqual)(newData, oldData)) {\n      // 没有改动，直接退出\n      dispatch((0, _kflowDesignerAction.exit)(model));\n    } else {\n      // 弹出确认框\n      setDialogVisible(true);\n    }\n  };\n  var cancelCallbackFn = function cancelCallbackFn(val) {\n    switch (val) {\n      case 'save':\n        save();\n        // 保存后退出\n        dispatch((0, _kflowDesignerAction.exit)(model));\n        break;\n      case 'unsave':\n        // 直接退出\n        dispatch((0, _kflowDesignerAction.exit)(model));\n        break;\n      case 'cancel':\n        // 取消，关闭弹窗\n        break;\n    }\n    setDialogVisible(false);\n  };\n  var setProperty = (0, _react.useCallback)(function (args) {\n    if (kflowdesignerRef.current) {\n      kflowdesignerRef.current.setProperty(args);\n    }\n  }, []);\n\n  // 获取控制台的list数据\n  var showErrorList = (0, _react.useCallback)(function () {\n    var args = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    setErrorList(args[0] || []);\n  }, []);\n  var showMessage = (0, _react.useCallback)(function (msg) {\n    var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 2;\n    var pageId = model.pageId;\n    var messageData = {\n      type: type,\n      // 类型\n      content: msg,\n      duration: 2000,\n      level: _const.MSG_LEVEL.warning,\n      pageId: pageId\n    };\n    (0, _appModelFunction.setDataMessages)(pageId, messageData);\n  }, [model]);\n\n  // 实时校验\n  var validateAction = (0, _react.useCallback)(function () {\n    var pageId = model.pageId,\n      key = model.key;\n    var newData = (0, _lodash.cloneDeep)(designerDataRef.current);\n    var items = newData.kflowmeta.Items;\n    newData.kflowmeta.Items = deleteHideEles(items);\n    // 与上次的校验数据比较，有改变才进行校验\n    if ((0, _lodash.isEqual)(lastValidateDataRef.current, newData)) return;\n    lastValidateDataRef.current = newData;\n    var postData = {\n      kflowdesigner: newData\n    };\n    action.invokeControlServiceSimple(pageId, key, 'mouseOutOfFocus', {\n      args: [''],\n      post: [postData],\n      dispatch: dispatch\n    });\n  }, [model]);\n  var invokeAction = (0, _react.useCallback)(function (actionName, params) {\n    dispatch((0, _designeraction.property_editor_click)(model, actionName, params));\n  }, [model]);\n\n  // 属性发送点击事件\n  var getInvokeActionParams = (0, _react.useCallback)(function (propName, field, editor, metaType) {\n    var fieldInfo = field;\n    var itemId = fieldInfo.Id;\n    var form = editor.Form;\n    var items = (0, _lodash.cloneDeep)(designerDataRef.current.kflowmeta.Items);\n    var context = deleteHideEles(items);\n    var value = fieldInfo[propName];\n    var param = {\n      form: (0, _convertUpperCaseKeyToLowerCase[\"default\"])(form),\n      value: value,\n      context: context,\n      item: {\n        Id: itemId,\n        _Type_: field._Type_\n      }\n    };\n    return [itemId, metaType, propName, param];\n  }, []);\n  var getPropertyAliasValue = (0, _react.useCallback)(function (propName, field, editor) {\n    if (editor.Editable === false) {\n      return;\n    }\n    var params = getInvokeActionParams(propName, field, editor, KFLOWMETA);\n    invokeAction('getPropertyAlias', params);\n  }, []);\n  var handleCustomInputEditor = (0, _react.useCallback)(function (propName, field, editor) {\n    var params = getInvokeActionParams(propName, field, editor, KFLOWMETA);\n    invokeAction('click', params);\n  }, []);\n  var onUserConfigChange = function onUserConfigChange(data) {\n    var userConfig = kflowdesignerRef.current.getUserConfig();\n    (0, _memoryCacher.setUserUIState)(model.pageId, ['kflowDesigner', 'userConfig'], userConfig, true);\n  };\n  var userUIState = (0, _memoryCacher.getUserUIState)(model);\n  var userConfig = ((_userUIState$getIn = userUIState.getIn(['kflowDesigner', 'userConfig'])) === null || _userUIState$getIn === void 0 ? void 0 : _userUIState$getIn.toJS()) || {\n    showLeftView: true,\n    showKey: false,\n    showType: false,\n    showFullRelationship: false\n  };\n  var pageId = model.pageId,\n    key = model.key;\n  var _getCommonClass = (0, _componentutil.getCommonClass)(model),\n    Grow = _getCommonClass.Grow,\n    Shrink = _getCommonClass.Shrink,\n    AlignSelf = _getCommonClass.AlignSelf;\n  var designerWrapperClass = (0, _classnames[\"default\"])(_defineProperty({}, _KDKFlowDesigner[\"default\"]['kflow-designer-wrapper'], true), (0, _commonUtils[\"default\"])({\n    Grow: Grow,\n    Shrink: Shrink,\n    AlignSelf: AlignSelf\n  }));\n  var entityTabClass = (0, _classnames[\"default\"])(_defineProperty({}, _KDKFlowDesigner[\"default\"]['kflow-tab'], true));\n  var kflowName = data === null || data === void 0 || (_data$KFLOWMETA = data[KFLOWMETA]) === null || _data$KFLOWMETA === void 0 ? void 0 : _data$KFLOWMETA[KFLOWNAME];\n  var kflowNumber = data === null || data === void 0 || (_data$KFLOWMETA2 = data[KFLOWMETA]) === null || _data$KFLOWMETA2 === void 0 ? void 0 : _data$KFLOWMETA2[KFLOWNUMBER];\n  var configItems = model.getMetaProperty(_serverproperties.CONFIG_ITEMS);\n  var logo = configItems === null || configItems === void 0 ? void 0 : configItems.get(_serverproperties.LOGO);\n  if ((0, _toolUtils.getBrowserData)() === 'ie') {\n    return /*#__PURE__*/_react[\"default\"].createElement(_UnSupportIE[\"default\"], null);\n  }\n  if (meta && data) {\n    return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      className: designerWrapperClass\n    }, /*#__PURE__*/_react[\"default\"].createElement(_ProFormDesignerBar[\"default\"], {\n      isKFlow: true,\n      onCancel: onCancel,\n      onPublish: onPublish,\n      showShortCutBtn: false,\n      showCancelBtn: true,\n      showPublishBtn: true,\n      menuOptions: [] // 中间页签\n      ,\n      showPreviewBtn: false,\n      onSave: save,\n      pageId: pageId,\n      controlKey: key,\n      logo: logo\n    }), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      className: _KDKFlowDesigner[\"default\"]['tab-container']\n    }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      className: entityTabClass\n    }, /*#__PURE__*/_react[\"default\"].createElement(_react[\"default\"].Suspense, {\n      fallback: \"loading\"\n    }, KFlowDesigner && /*#__PURE__*/_react[\"default\"].createElement(KFlowDesigner, {\n      name: \"KFlowDesigner\",\n      meta: meta,\n      data: data,\n      errorList: errorList,\n      showGuide: showGuide,\n      onData: onData,\n      onApi: onApi,\n      dragApi: dragApi,\n      getPropertyAliasValue: getPropertyAliasValue,\n      invokeAction: invokeAction,\n      validateAction: validateAction,\n      showMessage: showMessage,\n      handleCustomInputEditor: handleCustomInputEditor,\n      userConfig: userConfig,\n      onUserConfigChange: onUserConfigChange,\n      getLangMsg: _intlApi.getLangMsg\n    })))), /*#__PURE__*/_react[\"default\"].createElement(CancelDialog, {\n      visible: dialogVisible,\n      callbackFn: cancelCallbackFn,\n      name: kflowName,\n      number: kflowNumber\n    }));\n  } else {\n    return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n      className: _KDKFlowDesigner[\"default\"]['loading-wrapper']\n    }, /*#__PURE__*/_react[\"default\"].createElement(_LoadingGIF[\"default\"], null));\n  }\n}\nvar CancelDialog = function CancelDialog(_ref3) {\n  var visible = _ref3.visible,\n    callbackFn = _ref3.callbackFn,\n    _ref3$name = _ref3.name,\n    name = _ref3$name === void 0 ? 'k流名称' : _ref3$name,\n    _ref3$number = _ref3.number,\n    number = _ref3$number === void 0 ? '编码' : _ref3$number;\n  var handleClick = function handleClick(val) {\n    callbackFn(val);\n  };\n  var onCancel = function onCancel() {\n    handleClick('cancel');\n  };\n  var modalBody = /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: _KDKFlowDesigner[\"default\"]['modal-body']\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: _KDKFlowDesigner[\"default\"]['modal-body-image']\n  }), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: _KDKFlowDesigner[\"default\"]['modal-body-prompt']\n  }, \"\\u662F\\u5426\\u4FDD\\u5B58\\u5BF9\\u201C\".concat(name, \"\\uFF08\").concat(number, \"\\uFF09\\u201D\\u7684\\u66F4\\u6539\\uFF1F\")), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: _KDKFlowDesigner[\"default\"]['modal-body-prompt']\n  }, \"\\u82E5\\u4E0D\\u4FDD\\u5B58\\uFF0C\\u9000\\u51FA\\u540E\\u5C06\\u4E22\\u5931\\u8FD9\\u4E9B\\u66F4\\u6539\"));\n  var modalFooter = /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: _KDKFlowDesigner[\"default\"]['modal-footer']\n  }, /*#__PURE__*/_react[\"default\"].createElement(_kdesign.Button, {\n    className: _KDKFlowDesigner[\"default\"]['modal-save-btn'],\n    type: \"primary\",\n    onClick: function onClick() {\n      return handleClick('save');\n    }\n  }, \"\\u4FDD\\u5B58\"), /*#__PURE__*/_react[\"default\"].createElement(_kdesign.Button, {\n    className: _KDKFlowDesigner[\"default\"]['modal-not-save-btn'],\n    onClick: function onClick() {\n      return handleClick('unsave');\n    }\n  }, \"\\u4E0D\\u4FDD\\u5B58\"), /*#__PURE__*/_react[\"default\"].createElement(_kdesign.Button, {\n    className: _KDKFlowDesigner[\"default\"]['modal-cancel-btn'],\n    onClick: function onClick() {\n      return handleClick('cancel');\n    }\n  }, \"\\u53D6\\u6D88\"));\n  var modalTitleIcon = /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: _KDKFlowDesigner[\"default\"]['modal-title-icon']\n  });\n  return /*#__PURE__*/_react[\"default\"].createElement(_kdesign.Modal, {\n    body: modalBody,\n    footer: modalFooter,\n    titleIcon: modalTitleIcon,\n    type: \"normal\",\n    mask: true,\n    maskClosable: false,\n    width: 469,\n    height: 340,\n    title: \"\\u9000\\u51FA\\u786E\\u8BA4\",\n    closable: true,\n    destroyOnClose: true,\n    onCancel: onCancel,\n    visible: visible\n  });\n};\n\n//# sourceURL=webpack://bos-platform/./src/component/web/KDKFlowDesigner/KDKFlowDesigner.jsx?");

/***/ }),

/***/ "./src/component/web/KDKFlowDesigner/KDKFlowDesigner.less":
/*!****************************************************************!*\
  !*** ./src/component/web/KDKFlowDesigner/KDKFlowDesigner.less ***!
  \****************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\"loading-wrapper\":\"KDKFlowDesigner_loading-wrapper_2qnc\",\"kflow-designer-wrapper\":\"KDKFlowDesigner_kflow-designer-wrapper_1TA_\",\"tab-container\":\"KDKFlowDesigner_tab-container_29ny\",\"kflow-tab\":\"KDKFlowDesigner_kflow-tab_UevD\",\"tab-page\":\"KDKFlowDesigner_tab-page_2tvi\",\"hidden\":\"KDKFlowDesigner_hidden__Xig\",\"modal-body\":\"KDKFlowDesigner_modal-body_2i5e\",\"modal-body-image\":\"KDKFlowDesigner_modal-body-image_3JEc\",\"modal-body-prompt\":\"KDKFlowDesigner_modal-body-prompt_1iZG\",\"modal-footer\":\"KDKFlowDesigner_modal-footer_257m\",\"modal-title-icon\":\"KDKFlowDesigner_modal-title-icon_21ZQ\"});\n\n//# sourceURL=webpack://bos-platform/./src/component/web/KDKFlowDesigner/KDKFlowDesigner.less?");

/***/ })

}]);