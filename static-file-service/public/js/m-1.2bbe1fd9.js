(self["webpackJsonp_bos-platform"]=self["webpackJsonp_bos-platform"]||[]).push([[9832],{871408:function(e,t,r){"use strict";r.r(t),t.default={"span-container-value":"_3VUlWOHk","value-start":"_3O-aP3gz","value-center":"_3VUbbqma","span-container-value-textarea":"_2VoHiYQL","multi-textarea-can-scroll":"P6wcTtWb","multi-textarea-padding-top":"_2RadysRz","span-value":"_314qJhVY","textarea-label-wrap":"_82EeIWO",label:"e6rFKQer","kdtext-div":"_2udHtps3","kdtext-span":"_3qz9xPOd","kdtextarea-span":"_3JzIPnFH",mustInput:"_1Gx97L6d","mustInput-CT":"_3flgg6kT","text-nowrap":"_1crv2wkf","text-nowrap-CT":"_3YMIuWIZ","text-wrap":"IDYFYO6c","text-wrap-CT":"_2fNPdNb2",placeholder:"_1zCMhjir","radio-button-title":"_2euPBizD"}},293500:function(e,t,r){"use strict";r.r(t),t.default={"point-five-border":"_3a5qX1GK"}},88968:function(e,t,r){"use strict";r.r(t),t.default={mask:"K-J9-boD",zIndex1051:"_1rsx2lYf"}},162468:function(e,t,r){"use strict";r.r(t),t.default={root:"_4lUcgaEH","tabbar-form":"_1KmQq72c"}},299868:function(e,t,r){"use strict";r.r(t),t.default={placeholderComponent:"_17yyxDZr"}},448116:function(e,t,r){"use strict";r.r(t),t.default={address:"_2Alvn3rJ",content:"_3wlG3Zsy",icon:"_3AlSL1Zn"}},213352:function(e,t,r){"use strict";r.r(t),t.default={"flex-field-item":"_1LT-u7c9"}},348584:function(e,t,r){"use strict";r.r(t),t.default={"geo-cell-title":"_3QgeLY0f",readOnly:"eyXN0CHq","geo-content-label":"_2gdWo92S","geo-cell-more-icon":"_3x4v1T7I","geo-field-container":"_2GMD_vlZ","cell-container":"_1-JfID7Z",title:"pAM3Oyo4",detail:"_1gMixAo4","content-label":"_2Oz0Llp5","location-icon":"_9bnvJihi","cell-container-vertical":"_37RKKJPB"}},255988:function(e,t,r){"use strict";r.r(t),t.default={carouselDisplay:"_2UE0dqh0",carouselPanel:"_3iNBGtZD",listContainer:"_8SaxLDxu",indicationContainer:"fp2Gy2Xk",barType:"SEbG6E1y",dotsContainer:"_35SL14m6",dot:"Dfu2EdW3",active:"_2upus93U",indicationBar:"_383muX0d",scrollBar:"_3JF1zucg",absoluteContainer:"_2rOaepWa",slideToBottom:"Yl3J7khs",slideToLeft:"_1Hme7iuq",slideToRight:"_3q3CteE1",noData:"_28BhDzbb","scroll-bar":"_394bXoXT","scroll-dot":"_2h8k0D_7"}},32332:function(e,t,r){"use strict";r.r(t),t.default={placeholder:"W1RrWxYp","input-placeholder":"_2k-1v-A6","voice-div":"_1lIE_psr","voice-icon":"_3sQqZv7r","voice-grow":"fyqsRjOI","voice-value":"_3zJXR_RX",mustInput:"_31CaSnyG","validate-msg-text":"_2e6yt7_N","validate-msg-textarea":"_2cUoZ02k","voice-textarea-not-editing":"_337niLWz","textarea-container":"_2SsEPgTj","voice-textarea-not-editing-CT":"_1GS9nF4Y","fold-textarea":"_2W6bwgbF",foldBtn:"ELAX455U","fold-div":"HrH4W4d-","voice-textarea-not-editing-color":"bSIu9X1D"}},848832:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.SHOW_FORM=t.ACTIVE_FORM=void 0;t.SHOW_FORM="showForm",t.ACTIVE_FORM="activeForm"},589208:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(743924),r(606200),r(534440),r(387912),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.activeForm=function(e,t){return function(r,n){o.invokeControlService(e,a.ACTIVE_FORM,[t],(0,i.getPost)(e.pageId)(n()),r)}},t.showForm=function(e,t){return function(r,n){o.invokeControlService(e,a.SHOW_FORM,[t],(0,i.getPost)(e.pageId)(n()),r)}};var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=l(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(o,a,u):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(251536)),i=r(218652),a=r(848832);function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}},937648:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(743924),r(205960),r(846428),r(708896),r(606200),r(534440),r(670864),r(387912),r(836887),r(460872),r(78504),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.AlloyFingerWrap=void 0,r(803372),r(976896),r(297336),r(880920),r(86744);var o,i=(o=r(795520))&&o.__esModule?o:{default:o};function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function l(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function u(e,t,r){return t=f(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return c(e)}(e,s()?Reflect.construct(t,r||[],f(e).constructor):t.apply(e,r))}function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(s=function(){return!!e})()}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},p.apply(this,arguments)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}t.AlloyFingerWrap=function(e){return function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=u(this,t,[e])).preV={x:null,y:null},r.pinchStartLen=null,r.scale=1,r.isSingleTap=!1,r.isDoubleTap=!1,r.delta=null,r.last=null,r.now=null,r.end=null,r.multiTouch=!1,r.tapTimeout=null,r.longTapTimeout=null,r.singleTapTimeout=null,r.swipeTimeout=null,r.x1=r.x2=r.y1=r.y2=null,r.preTapPosition={x:null,y:null},r.afterLongTap=!1,r.afterLongTapTimeout=null,r._emitEvent=r._emitEvent.bind(c(r)),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(t,e),r=t,n=[{key:"getLen",value:function(e){return Math.sqrt(e.x*e.x+e.y*e.y)}},{key:"dot",value:function(e,t){return e.x*t.x+e.y*t.y}},{key:"getAngle",value:function(e,t){var r=this.getLen(e)*this.getLen(t);if(0===r)return 0;var n=this.dot(e,t)/r;return n>1&&(n=1),Math.acos(n)}},{key:"cross",value:function(e,t){return e.x*t.y-t.x*e.y}},{key:"getRotateAngle",value:function(e,t){var r=this.getAngle(e,t);return this.cross(e,t)>0&&(r*=-1),180*r/Math.PI}},{key:"_resetState",value:function(){this.setState({x:null,y:null,swiping:!1,start:0})}},{key:"_emitEvent",value:function(e){if(this[e]){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];this[e].apply(this,r)}}},{key:"_handleTouchStart",value:function(e){var t=this;if(this._emitEvent("onTouchStart",e),e.touches){this.now=Date.now(),this.x1=e.touches[0].pageX,this.y1=e.touches[0].pageY,this.delta=this.now-(this.last||this.now),null!==this.preTapPosition.x&&(this.isDoubleTap=this.delta>0&&this.delta<=250&&Math.abs(this.preTapPosition.x-this.x1)<30&&Math.abs(this.preTapPosition.y-this.y1)<30),this.preTapPosition.x=this.x1,this.preTapPosition.y=this.y1,this.last=this.now;var r=this.preV;if(e.touches.length>1){this._cancelLongTap(),this._cancelSingleTap();var n={x:e.touches[1].pageX-this.x1,y:e.touches[1].pageY-this.y1};r.x=n.x,r.y=n.y,this.pinchStartLen=this.getLen(r),this._emitEvent("onMultipointStart",e)}else this.isSingleTap=!0;this.longTapTimeout=setTimeout((function(){t._emitEvent("onLongTap",e),t.afterLongTap=!0,t.afterLongTapTimeout=setTimeout((function(){t.afterLongTap=!1}),1e3)}),750)}}},{key:"_handleTouchMove",value:function(e){this._emitEvent("onTouchMove",e);var t=this.preV,r=e.touches.length,n=e.touches[0].pageX,o=e.touches[0].pageY;if(this.isSingleTap=!1,this.isDoubleTap=!1,r>1){var i={x:e.touches[1].pageX-n,y:e.touches[1].pageY-o};null!==t.x&&(this.pinchStartLen>0&&(e.center={x:(e.touches[1].pageX+n)/2,y:(e.touches[1].pageY+o)/2},e.scale=e.zoom=this.getLen(i)/this.pinchStartLen,this._emitEvent("onPinch",e)),e.angle=this.getRotateAngle(i,t),this._emitEvent("onRotate",e)),t.x=i.x,t.y=i.y,this.multiTouch=!0}else null!==this.x2?(e.deltaX=n-this.x2,e.deltaY=o-this.y2):(e.deltaX=0,e.deltaY=0),this._emitEvent("onPressMove",e);this._cancelLongTap(),this.x2=n,this.y2=o,r>1&&e.preventDefault()}},{key:"_handleTouchCancel",value:function(e){this._emitEvent("onTouchCancel",e),clearTimeout(this.singleTapTimeout),clearTimeout(this.tapTimeout),clearTimeout(this.longTapTimeout),clearTimeout(this.swipeTimeout)}},{key:"_handleTouchEnd",value:function(e){var t=this;this._emitEvent("onTouchEnd",e),this.end=Date.now(),this._cancelLongTap(),!0===this.multiTouch&&e.touches.length<2&&this._emitEvent("onMultipointEnd",e),e.origin=[this.x1,this.y1],!1===this.multiTouch&&(this.x2&&Math.abs(this.x1-this.x2)>30||this.y2&&Math.abs(this.y1-this.y2)>30?(e.direction=this._swipeDirection(this.x1,this.x2,this.y1,this.y2),e.distance=Math.abs(this.x1-this.x2),this.swipeTimeout=setTimeout((function(){t._emitEvent("onSwipe",e)}),0)):this.afterLongTap?(clearTimeout(this.afterLongTapTimeout),this.afterLongTap=!1):this.tapTimeout=setTimeout((function(){t._emitEvent("onTap",e),t.isDoubleTap?(t._emitEvent("onDoubleTap",e),clearTimeout(t.singleTapTimeout),t.isDoubleTap=!1):t.isSingleTap&&(t.singleTapTimeout=setTimeout((function(){t._emitEvent("onSingleTap",e)}),250),t.isSingleTap=!1)}),0)),this.preV.x=0,this.preV.y=0,this.scale=1,this.pinchStartLen=null,this.x1=this.x2=this.y1=this.y2=null,this.multiTouch=!1}},{key:"_cancelLongTap",value:function(){clearTimeout(this.longTapTimeout)}},{key:"_cancelSingleTap",value:function(){clearTimeout(this.singleTapTimeout)}},{key:"_swipeDirection",value:function(e,t,r,n){return Math.abs(e-t)>80||this.end-this.now<250?Math.abs(e-t)>=Math.abs(r-n)?e-t>0?"Left":"Right":r-n>0?"Up":"Down":"Nochange"}},{key:"render",value:function(){var e=p(f(t.prototype),"render",this).call(this);return i.default.cloneElement(e,{onTouchStart:this._handleTouchStart.bind(this),onTouchMove:this._handleTouchMove.bind(this),onTouchCancel:this._handleTouchCancel.bind(this),onTouchEnd:this._handleTouchEnd.bind(this)})}}],n&&a(r.prototype,n),o&&a(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(e)}},867860:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(743924),r(205960),r(846428),r(336368),r(708896),r(606200),r(534440),r(670864),r(387912),r(836887),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(297336),r(880920),r(125048);var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=a?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(o,l,u):o[l]=e[l]}return o.default=e,r&&r.set(e,o),o}(r(795520));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a.apply(this,arguments)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,u(n.key),n)}}function u(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function s(e,t,r){return t=p(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,c()?Reflect.construct(t,r||[],p(e).constructor):t.apply(e,r))}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(c=function(){return!!e})()}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}t.default=function(e){return function(t){function r(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=s(this,r,[e])).handleHashChange=function(){var e=t.props.model.pageId,r=window.location.href.endsWith(e);t.state.isActivePage!==r&&t.setState({isActivePage:r})};var n=e.model.pageId;return t.state={isActivePage:window.location.href.endsWith(n)},t}var n,i,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(r,t),n=r,(i=[{key:"componentDidMount",value:function(){window.addEventListener("hashchange",this.handleHashChange)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("hashchange",this.handleHashChange)}},{key:"render",value:function(){return o.default.createElement(e,a({isActivePage:this.state.isActivePage},this.props))}}])&&l(n.prototype,i),u&&l(n,u),Object.defineProperty(n,"prototype",{writable:!1}),r}(o.Component)}},971120:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(743924),r(205960),r(297336),r(846428),r(336368),r(708896),r(606200),r(534440),r(670864),r(880920),r(836887),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(622676),r(835164),r(387912);var o,i,a=b(r(795520)),l=b(r(540900)),u=r(439532),s=b(r(720756)),c=b(r(635928)),p=r(290600),f=r(891052),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=m(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(348896)),y=b(r(385384)),h=b(r(149236)),g=r(545072);function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}function b(e){return e&&e.__esModule?e:{default:e}}function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},v.apply(this,arguments)}function O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,P(n.key),n)}}function P(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function _(e,t,r){return t=w(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,S()?Reflect.construct(t,r||[],w(e).constructor):t.apply(e,r))}function S(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(S=function(){return!!e})()}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function k(e,t){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k(e,t)}var j="showTile",E="showSplit",C=(0,d.default)(!1)(o=(0,d.ContainerLockWrap)(o=(0,y.default)(o=(0,h.default)((i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),_(this,t,arguments)}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this,t=this.props.model,r=t.meta,n=(0,u.getCommonStyle)(t);n=(0,u.getVisibleStyle)(n,(0,u.getVisible)(t));var o=void 0===t.getMetaProperty(j)||t.getMetaProperty(j),i=void 0===t.getMetaProperty(E)||t.getMetaProperty(E),l=t.getMetaProperty(p.COLUMNS)||2,d=t.getMetaProperty("menuStyle")||g.MBLOCK_MENU_TYPE.leftImgRightTxt,y=t.getMetaProperty("tlcolor"),h=t.getMetaLocaleProperty("text"),m=r.get("items",(0,f.List)());return m=m.filter((function(e){return(0,u.getVisible)(t,e.get("id"),e.get("vi"))})),a.default.createElement(c.default,v({id:t.key,style:n,title:h,showTitle:o},this.props.attachData,{showSplit:i,cols:l,menuStyle:d,titleLineColor:y}),m.map((function(r,n){var o=(0,s.default)(t.pageId,r,e.context.store.getState());return a.default.cloneElement(o,{key:n})})))}}])&&O(r.prototype,n),o&&O(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(a.default.Component),i.contextTypes={store:l.default.object},o=i))||o)||o)||o)||o;t.default=C},122616:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(743924),r(205960),r(297336),r(846428),r(336368),r(708896),r(606200),r(670864),r(880920),r(387912),r(836887),r(78504),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,i,a,l,u=v(r(795520)),s=v(r(540900)),c=v(r(837776)),p=r(439532),f=r(899760),d=r(290600),y=r(218652),h=v(r(348896)),g=v(r(385384)),m=v(r(927576)),b=v(r(956788));function v(e){return e&&e.__esModule?e:{default:e}}function O(){return O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},O.apply(this,arguments)}function P(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_(n.key),n)}}function _(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function S(e,t,r){return t=k(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,w()?Reflect.construct(t,r||[],k(e).constructor):t.apply(e,r))}function w(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(w=function(){return!!e})()}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}function j(e,t){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},j(e,t)}var E=(o=(0,h.default)(!1),i=(0,b.default)(),o(a=(0,g.default)(a=(0,m.default)(a=i((l=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=S(this,t,[e])).handleClick=function(){var e=r.props,t=e.dispatch,n=e.model;t((0,f.click)(n))},r._fileServer=void 0,r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j(e,t)}(t,e),r=t,(n=[{key:"componentWillMount",value:function(){var e=this.props.model.getFormConfig();this._fileServer=e.fileserver}},{key:"render",value:function(){var e=this.props,t=e.model,r=e.menuStyle,n=e.showYSplit,o=e.showXSplit,i=e.showSplit,a=(0,p.getCommonStyle)(t),l=t.getMetaLocaleProperty("text"),s=t.getMetaProperty(d.IMAGE_KEY),f=(0,y.getDataValue)(t.pageId,t.key)(t.state);return f&&f.get(d.IMAGE_KEY)&&(s=f.get(d.IMAGE_KEY)),s=(0,p.getImgFullPath)(this._fileServer,s),u.default.createElement(c.default,O({title:l,menuStyle:r,imageKey:s,style:a},this.props.attachData,{showYSplit:n,showXSplit:o,onClick:this.handleClick,showSplit:i,loading:this.props.loading}))}}])&&P(r.prototype,n),o&&P(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(u.default.Component),l.contextTypes={store:s.default.object},a=l))||a)||a)||a)||a);t.default=E},589944:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(622676),r(233696),r(743924),r(205960),r(846428),r(336368),r(708896),r(969e3),r(606200),r(534440),r(76152),r(670864),r(76124),r(880920),r(387912),r(836887),r(78504),r(776512),r(997308),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(297336);var o,i=m(r(795520)),a=r(899760),l=m(r(728277)),u=r(934296),s=r(439532),c=h(r(348896)),p=h(r(385384)),f=h(r(956788)),d=h(r(927576)),y=r(633793);function h(e){return e&&e.__esModule?e:{default:e}}function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}function m(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},b.apply(this,arguments)}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e,t,r){return(t=S(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,S(n.key),n)}}function S(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function w(e,t,r){return t=j(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return E(e)}(e,k()?Reflect.construct(t,r||[],j(e).constructor):t.apply(e,r))}function k(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(k=function(){return!!e})()}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},j(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e,t){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},C(e,t)}var T=(0,c.default)(!1)(o=(0,f.default)()(o=(0,p.default)(o=(0,d.default)(o=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=w(this,t,[e])).handleClick=r.handleClick.bind(E(r)),r.forAutoTestActions={click:a.click},r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}(t,e),r=t,n=[{key:"_getLock",value:function(e){return this.props.getCardLocked?this.props.getCardLocked(e):this.props.isLocked}},{key:"_getVisible",value:function(e){return this.props.getCardVisible?this.props.getCardVisible(e):this.props.isVisible}},{key:"handleClick",value:function(e){var t=this;e.stopPropagation();var r=this.props,n=r.model,o=r.beforeClick;this._getLock(n)||(o&&o(e),(0,y.interceptActionFn)(O(O({},this.props),{},{click:function(){return t.props.dispatch(a.click.apply(void 0,arguments))}}),l.default))}},{key:"render",value:function(){var e=this,t=this.props,r=t.model,n=t.fieldAction,o=t.loading,a=t.isFromCardRow,c=(0,s.getCommonClass)(r),p=c.Grow,f=c.Shrink,d=c.AlignSelf,y=(0,l.getRowIndex)(this.props),h=(0,s.getCommonStyle)(r),g=(0,s.getComponentDataProperty)(r,"imageKey","imageKey",!1),m=r.getFormConfig(),v=(0,s.getComponentDataProperty)(r,"imgWidth","imgWidth",!1),O=(0,s.getComponentDataProperty)(r,"imgHeight","imgHeight",!1),P=h.borderTop||h.borderBottom||h.borderLeft||h.borderRight,_=this._getLock(r),S=this._getVisible(r),w=r.getMetaProperty("id"),k=n&&n[w];if(k){var j=(0,s.getCardRulesResult)(k,S,_,h);S=j.visibility,_=j.disabled,h=j.style}return S?(g=(0,s.getImgFullPath)(m.fileserver,g),i.default.createElement(u.Button,b({Grow:p,Shrink:f,AlignSelf:d,disabled:_,style:h,onClick:function(t){return e.handleClick(t)},id:r.key,text:r.getMetaLocaleProperty("text"),ButtonStyle:r.getMetaProperty("btns"),ImageKey:g,ImgWidth:v,ImgHeight:O},this.props.attachData,{loading:o,hasBorder:P,isFromCardRow:a,rowIndex:y}))):i.default.createElement("div",{id:r?r.key+"_hide_control":"hide_control",style:{display:"none"}})}}],n&&_(r.prototype,n),o&&_(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(i.Component))||o)||o)||o)||o;t.default=T},314392:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(743924),r(205960),r(846428),r(708896),r(606200),r(670864),r(880920),r(387912),r(836887),r(78504),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(443616),r(241872),r(835164),r(297336),r(336368),r(571176),r(633768);var o,i=P(r(795520)),a=r(439532),l=P(r(191552)),u=P(r(348896)),s=r(389120),c=P(r(385384)),p=r(545072),f=P(r(653824)),d=P(r(504076)),y=P(r(559220)),h=r(891052),g=r(886212),m=r(984844),b=P(r(139224)),v=P(r(867860)),O=P(r(149236));function P(e){return e&&e.__esModule?e:{default:e}}function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_.apply(this,arguments)}function S(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,w(n.key),n)}}function w(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function k(e,t,r){return t=E(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return C(e)}(e,j()?Reflect.construct(t,r||[],E(e).constructor):t.apply(e,r))}function j(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(j=function(){return!!e})()}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e,t){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},T(e,t)}var M=(0,h.fromJS)([f.default,d.default,y.default]),D=(0,u.default)(!1)(o=(0,c.default)(o=(0,v.default)(o=(0,O.default)(o=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=k(this,t,[e])).resizeWindow=function(e){if(!e.hide){var t=r.props.model,n=(0,a.getComponentDataProperty)(t,"aspectratio","aspectratio",!1),o=(0,a.getCommonStyle)(t),i=function(e,t,r){if(t)return t;if(e.current&&e.current.parentNode){var n=e.current.parentNode.getBoundingClientRect().width;return"".concat(n*p.ASPECTRATIO_MAP[r||"3:1"],"px")}return t}(r.carouselEle,o.height,n);r.setState({height:i})}},r.handleClick=function(e){var t=r.props,n=t.model;(0,t.dispatch)((0,s.click)(n,[e]))};var n=r.props.model.getFormConfig();return r._fileServer=n.fileserver,r.carouselEle=i.default.createRef(),r.formatImg=r.formatImg.bind(C(r)),r.resizeWindow=r.resizeWindow.bind(C(r)),r.state={height:0},r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){this.resizeObserver=(0,b.default)(this.carouselEle.current,this.resizeWindow)}},{key:"componentWillUnmount",value:function(){this.resizeObserver&&this.resizeObserver()}},{key:"getItems",value:function(){var e=this.props.model,t={display:"block",width:"100%",height:"100%"},r=(0,a.getComponentDataProperty)(e,"value","carouselpicture",!1),n=e.getMetaProperty("defaultImage")||(0,h.List)(),o=e.getFormConfig(),l=o.fileserver,u=o.imageurl,s=e.pageId;return r&&r.size?this.formatImg(r,l,u,s,t,!0):n&&n.size>0?(r=n).map((function(e,r){var n=(0,a.getImgFullPath)("",e.get("url"),!1,!1);return i.default.createElement("img",{key:r,style:t,src:n,alt:e.get("name")})})).toJS():(r=M,this.formatImg(r,l,u,s,t,!0))}},{key:"formatImg",value:function(e,t,r,n,o,a){return e.map((function(e,l){return/^http(s)*/.test(e)||(e=(0,g.getImageUrl)({fileserver:t,imageurl:r,pageId:n,appendFileServer:a},e)).indexOf(".do")>=0&&(e=(0,m.appendParamsToUrl)(e,{model:model})),i.default.createElement("img",{key:l,style:o,src:e,alt:"preview"})})).toJS()}},{key:"render",value:function(){var e=this.props.model,t=(0,a.getCommonClass)(e),r=t.Grow,n=t.Shrink,o=t.AlignSelf,u=(0,a.getComponentDataProperty)(e,"duration","duration",!1),s=(0,a.getComponentDataProperty)(e,"showslidebar","showslidebar",!1),c=(0,a.getComponentDataProperty)(e,"slidebaralign","slidebaralign",!1),f=(0,a.getCommonStyle)(e);delete f.height;var d,y,h,g=Object.assign({position:"absolute",bottom:"8px"},["left","right"].includes(c)?(d={},y=c,h="".concat(p.DEFAULT_SLIDE_PADDING,"px"),(y=w(y))in d?Object.defineProperty(d,y,{value:h,enumerable:!0,configurable:!0,writable:!0}):d[y]=h,d):{}),m=this.getItems();return i.default.createElement(l.default,_({slideSpeed:window.parseInt(u),sliderBarStyle:g,style:f,height:this.state.height,needSlideBar:s,itemClick:this.handleClick,carouselRef:this.carouselEle,disabled:1===m.length||!this.props.isActivePage,isMb:!0,Grow:r,Shrink:n,AlignSelf:o},this.props.attachData),m)}}])&&S(r.prototype,n),o&&S(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(i.default.Component))||o)||o)||o)||o;t.default=D},470716:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(743924),r(205960),r(708896),r(969e3),r(606200),r(534440),r(76152),r(670864),r(880920),r(836887),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.KDattachmentPanel=void 0,r(9692),r(622676),r(233696),r(443616),r(241872),r(686456),r(835164),r(492948),r(976896),r(297336),r(846428),r(336368),r(286620),r(76124),r(387912),r(804092),r(23544),r(571176),r(633768),r(660824),r(513640),r(694904),r(321164),r(997308),r(86744);var o,i,a,l=Le(r(795520)),u=Le(r(369396)),s=Le(r(671252)),c=Le(r(747224)),p=Le(r(562507)),f=r(439532),d=r(934296),y=Le(r(769608)),h=Le(r(252496)),g=Le(r(826836)),m=Ie(r(968924)),b=r(891052),v=Ie(r(407892)),O=Le(r(537228)),P=Le(r(966396)),_=Le(r(341280)),S=Le(r(882712)),w=r(237373),k=r(290600),j=r(735696),E=r(899760),C=r(168696),T=r(323968),M=Le(r(871408)),D=Le(r(221768)),I=Le(r(720056)),L=r(249936),A=r(786392),x=r(218652),V=Le(r(348896)),F=Le(r(385384)),N=r(738704),R=r(545072),W=Le(r(790832)),B=Le(r(558024)),U=Le(r(138164)),Y=Le(r(802720)),H=Le(r(961224)),G=Le(r(145556)),K=Le(r(57144)),z=r(67344),X=r(536920),Z=Le(r(329132)),q=r(331428),J=r(994088),Q=r(589200),$=Le(r(600152)),ee=r(654500),te=r(580032),re=Le(r(992216)),ne=r(674260),oe=r(868256),ie=Le(r(557024)),ae=Le(r(697176)),le=r(796512),ue=r(416624),se=r(15560),ce=Le(r(113376)),pe=r(735696),fe=r(669188),de=Le(r(802780)),ye=r(194520),he=r(195196),ge=r(248672),me=r(886212),be=r(251536),ve=r(336808),Oe=r(414460),Pe=r(794432),_e=r(94456),Se=Le(r(814296)),we=r(555220),ke=Le(r(156752)),je=Ie(r(211152)),Ee=r(439532),Ce=Le(r(416196)),Te=Le(r(999500)),Me=Le(r(418572));function De(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(De=function(e){return e?r:t})(e)}function Ie(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=De(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}function Le(e){return e&&e.__esModule?e:{default:e}}function Ae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(r),!0).forEach((function(t){Fe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ae(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ve(){return Ve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ve.apply(this,arguments)}function Fe(e,t,r){return(t=Be(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Re(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Be(n.key),n)}}function We(e,t,r){return t&&Re(e.prototype,t),r&&Re(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Be(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function Ue(e,t,r){return t=He(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ge(e)}(e,Ye()?Reflect.construct(t,r||[],He(e).constructor):t.apply(e,r))}function Ye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ye=function(){return!!e})()}function He(e){return He=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},He(e)}function Ge(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ke(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ze(e,t)}function ze(e,t){return ze=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ze(e,t)}var Xe=["date","datetime","daterange","basedata","mulbasedata","city","user","org"],Ze=["icon","radiogroup","radio","attachmentfield","flexfield","picture"],qe=[1,2,3],Je=["radio"],Qe=["radio","picture"],$e=!0,et=(0,V.default)(!0)(o=(0,F.default)((i=function(e){function t(e){var r;Ne(this,t),(r=Ue(this,t,[e])).formatValue=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,b.Map)(),o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.props,i=null==e?"":e;switch(t){case"number":if(!i&&0!==i)return"";var a=r.getSourceFiledInfoObject(n,o),l=a.precision,u=a.symbol,s=n.get(k.DISPLAY_SCALE),c=null!=s?s:[void 0,null,""].includes(l)?n.get(k.SCALE):l;return(0,A.formatNumber)(i,{type:n.get(k.NUM_TYPE),mask:n.get(k.DISPLAY_FORMAT)||n.get(k.MASK),zeroShow:"stepper"===t||n.get(k.ZERO_SHOW),decimalLength:c,symbol:u,noDisplayDecimalTailZero:n.get(k.NO_DISPLAY_SCALE_ZERO),roundMethod:n.get(k.ROUND_METHOD)});case"stepper":var p=r.getSourceFiledInfoObject(n,o),f=p.precision,d=p.symbol;i=(0,A.formatNumber)(i,{type:n.get(k.NUM_TYPE),mask:n.get(k.DISPLAY_FORMAT)||n.get(k.MASK),zeroShow:"stepper"===t||n.get(k.ZERO_SHOW),decimalLength:f||n.get(k.SCALE),symbol:d,noDisplayDecimalTailZero:n.get(k.NO_DISPLAY_SCALE_ZERO)});break;case"date":case"datetime":i=(0,A.formatDate)(i,n.get(k.DISPLAY_FORMAT),t)}return i},r.getLocaleTextDisplayValue=function(e,t){if(b.Map.isMap(e)){var r=t.getUserLocale(),n=t.getDefaultLang(),o=(0,le.getLanguage)(e,r,n);return e.get(o)||""}return e},r.handleClickAddress=function(){var e=r.props,t=e.model,n=e.dispatch;!r._getLock(t)&&n((0,pe.showAddressModal)(t))},r.onClickBaseData=function(e){var t=r.props,n=t.model,o=t.dispatch;!0!==r._getLock(n)&&$e&&($e=!1,r.clearClickBaseDataTimer=setTimeout((function(){$e=!0}),3e3),e?e(n,(function(){o(C.endSelect.apply(void 0,arguments))})):o((0,E.click)(n)))},r.handleSetFocus=function(){var e=r.props.model.getMetaProperty(["item","type"])===de.default.Textarea?"textarea":"input",t=u.default.findDOMNode(Ge(r)).getElementsByTagName(e)[0];t&&t.focus(),r.setState({editing:!0})},r.beforeUploadPicture=function(e){r.props.dispatch&&r.props.dispatch((0,ue.beforeUpload)(r.props.model,e))},r.uploadPictureResult=function(e){r.props.dispatch&&r.props.dispatch((0,ue.reportUploadResult)(r.props.model,e))},r.getImagePreviewUrl=function(e){r.props.dispatch&&r.props.dispatch((0,ue.getPreviewUrlNoLogin)(r.props.model,e))},r.handleDeletePic=function(e){var t,n=r.props,o=n.model,i=n.dispatch,a={url:e},l=null===(t=o.getMetaProperty(k.ITEM))||void 0===t?void 0:t.get("thumbparam");l&&(a.thumbparam=l),r.handleChange(" "),setTimeout((function(){null==i||i((0,ue.removeImage)(o,a))}),0)},r.state={editing:!1,innerValue:void 0,ValidateData:void 0,ValidateDataHide:!0};var n=e.model.getFormConfig();return r._fileServer=n.fileserver,r.editInputs=["number","passwordbox","text","textarea","localeText","largeText","stepper","email"],r.formatInput=["number","stepper"],r.getEnable=r.getEnable.bind(Ge(r)),r.handleValidateDataChange=r.handleValidateDataChange.bind(Ge(r)),r.getPlaceHolder=r.getPlaceHolder.bind(Ge(r)),r.getCountryCode2=r.getCountryCode2.bind(Ge(r)),r.voiceInputFiledAry=["text","textarea"],r.baseDataAjax=W.default.debounce(r.baseDataAjax.bind(Ge(r)),500),r.onTextKeyDown=r.onTextKeyDown.bind(Ge(r)),r.getPlainText=r.getPlainText.bind(Ge(r)),r.forAutoTestActions={change:j.change,click:E.click,endSelect:C.endSelect,comfirmDelete:T.comfirmDelete},r.fieldLockEmptyValue=(0,f.getNOValue)(),r.lockEmptyTips=r.getLockedEmptyValue(),r}return Ke(t,e),We(t,[{key:"getLockedEmptyValue",value:function(){var e=this.props.model,t=(e.getMetaProperty("item")||(0,b.Map)()).get(k.LOCKED_EMPTY_VALUE);return t?t.get(e.getUserLocale()):""}},{key:"isEditInput",value:function(e){return this.editInputs.indexOf(e)>=0}},{key:"getFireUpdate",value:function(e){return!0===e.getMetaProperty(["item","fu"])}},{key:"_getLock",value:function(e){var t=e.getMetaProperty("item")||(0,b.Map)();return this.props.getLocked(e)||t.getIn(["privacy","isprivacy"])}},{key:"editValue",value:function(e,t){if(!0!==t){var r=this.props.model.getMetaProperty(["item","type"]);!this.state.editing&&this.isEditInput(r)&&this.setState({editing:!0})}}},{key:"cancelEdit",value:function(e){this.state.editing&&(this.setState({editing:!1}),this.handleChange(e.target.value),this.lastDate=void 0,this.isPDAInput=void 0)}},{key:"getSourceFiledInfoObject",value:function(){var e,t,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,b.Map)(),o=(arguments.length>1?arguments[1]:void 0).model,i=!1,a=o.pageId,l=o.key,u=null===(e=n.get(k.SCALE_DEPENDENCIES))||void 0===e?void 0:e.toJS(),s=(0,x.getSourceFiledInfoById)(o.pageId,n.get(k.SOURCE_FIELD))(o.state);if(s&&(Object.is(o.meta.getIn(["item","nt"]),"price")?(r=s.pp,i=s.scs,t=s.cs):Object.is(o.meta.getIn(["item","nt"]),"amount")?(r=s.ap,i=s.scs,t=s.cs):Object.is(o.meta.getIn(["item","nt"]),"qty")&&(r=s.ps)),u){var c=(0,f.getScaleFromDependencies)({pageId:a,key:l,scaleDependencies:u});void 0!==c&&(r=c)}return{symbol:t,showSymbol:i,precision:r}}},{key:"handleChange",value:function(e){var t=this.props,r=t.model,n=t.dispatch,o=t.flexibleTextChange,i=this._getLock(r),a=r.getMetaProperty("item")||(0,b.Map)(),l=a.get("type"),u=r.getMetaLocaleProperty("caption");if(!i){var s=e;this.setState({innerValue:e}),this.textFormatter&&"text"===l&&(s=this.textFormatter.getNormalValue(e)),"text"!==l&&"number"!==l||o&&o(r.key,e);var c="passwordbox"===l;n((0,j.change)(r,s,c))}var p=!1;"radio"===l&&(r.key=a.get("group"),p=this.props.getLocked(r,a.get("group")));var f=a.getIn(["privacy","isprivacy"])||!1;if(this.getEnable()&&this.getMustInput()&&"checkbox"!==l&&"radio"!==l&&"picture"!==l&&"icon"!==l&&"attachmentfield"!==l&&!f)e?((0,x.deleteFieldValidateMsg)(r.pageId,r.key,R.VALIDATE_MSG_TYPE.notNull),(0,x.deleteFieldValidateCaption)(r.pageId,r.key)):((0,x.setFieldValidateMsg)(r.pageId,r.key,R.VALIDATE_MSG_TYPE.notNull,{success:!1,message:(0,q.getLangMsg)("kdField.key0001")}),(0,x.setFieldValidateCaption)(r.pageId,r.key,R.VALIDATE_MSG_TYPE.notNull,u));else{var d=(0,x.getFieldValidateMsg)(r.pageId,r.key);d&&d.size>0&&((0,x.deleteFieldValidateMsg)(r.pageId,r.key,R.VALIDATE_MSG_TYPE.notNull),(0,x.deleteFieldValidateCaption)(r.pageId,r.key))}var y=r.pageId,h=r.key,g=a.get("vlr");if("telephone"!==l||!0!==g||f?"email"!==l||f||(""===e||(0,X.isEmail)(e)?((0,x.deleteFieldValidateMsg)(y,h,R.VALIDATE_MSG_TYPE.email),(0,x.deleteFieldValidateCaption)(y,h,R.VALIDATE_MSG_TYPE.email)):((0,x.setFieldValidateMsg)(y,h,R.VALIDATE_MSG_TYPE.email,{success:!1,message:(0,q.getLangMsg)("FieldValidateMsg.incorrectFormat")}),(0,x.setFieldValidateCaption)(y,h,R.VALIDATE_MSG_TYPE.email,u))):""===e||(0,z.isTelephone)(e,{pageId:y,key:h})?((0,x.deleteFieldValidateMsg)(y,h,R.VALIDATE_MSG_TYPE.tele),(0,x.deleteFieldValidateCaption)(y,h,R.VALIDATE_MSG_TYPE.tele)):((0,x.setFieldValidateMsg)(y,h,R.VALIDATE_MSG_TYPE.tele,{success:!1,message:(0,q.getLangMsg)("FieldValidateMsg.incorrectFormat")}),(0,x.setFieldValidateCaption)(y,h,R.VALIDATE_MSG_TYPE.tele,u)),!p&&!i&&Qe.indexOf(l)>-1&&void 0!==e&&e!==r.getDataValue()){var m="passwordbox"===l;n((0,j.change)(r,e,m))}}},{key:"handleInputChange",value:function(e,t){var r=this.props,n=r.model,o=r.flexibleTextChange,i=r.dispatch,a=n.getMetaProperty("item")||(0,b.Map)(),l=a.get("type"),u=this._getLock(n),s=n.getMetaLocaleProperty("caption"),c=e;if("textarea"===l){var p=a.get(k.MAX_LENGTH);void 0!==p&&(c=e.substr(0,p))}if("email"===l&&(0,z.includeEmoji)(c))return!1;if(this.textFormatter&&"text"===l){var f,d=(null!==(f=this.state.innerValue)&&void 0!==f?f:"").length,y=t.selectionStart;/^(\d{1,}\s?)+$/.test(c)?(c=this.textFormatter.setFormatValue(c)).length&&c[c.length-1]===this.textFormatter.separator&&(c=c.substr(0,c.length-1)):c=c.replace(/[^\d ]+/g,"");var h=c.length-d,g=y+(y===c.length-1?h:0);" "===c[g-1]&&(c.length>d?g+=1:g-=1);var m=t;window.requestAnimationFrame((function(){m.selectionStart=g,m.selectionEnd=g}))}if(this.setState({innerValue:c}),o&&this.props.flexibleTextChange(n.key,c),"passwordbox"===l&&this.handlePassWordTxt(c),!this.isEditInput(l)&&!u&&"telephone"!==l&&"i18nname"!==l){var v="passwordbox"===l;i((0,j.change)(n,c,v))}var O=a.getIn(["privacy","isprivacy"])||!1;return this.getMustInput()&&!O&&(c?((0,x.deleteFieldValidateMsg)(n.pageId,n.key,R.VALIDATE_MSG_TYPE.notNull),(0,x.deleteFieldValidateCaption)(n.pageId,n.key,R.VALIDATE_MSG_TYPE.notNull)):((0,x.setFieldValidateMsg)(n.pageId,n.key,R.VALIDATE_MSG_TYPE.notNull,{success:!1,message:(0,q.getLangMsg)("kdField.key0001")}),(0,x.setFieldValidateCaption)(n.pageId,n.key,R.VALIDATE_MSG_TYPE.notNull,s))),!0}},{key:"handlePassWordTxt",value:function(e){"******"===this.state.innerValue&&(5===e.length&&"*****"===e&&this.setState({innerValue:""}),7===e.length&&6===(0,Q.getStrCount)(e,"*")&&this.setState({innerValue:e.split("*").join("")}))}},{key:"onTextKeyDown",value:function(e){var t=this.calcEnterPDAInput(this.lastDate,this.isPDAInput),r=t.nextDate,n=t.isPDA;if(this.lastDate=r,this.isPDAInput=n,13===e.keyCode){var o,i=this.props,a=i.model,l=i.dispatch,u=(a.getMetaProperty("item")||(0,b.Map)()).get("type");if(this.isPDAInput&&"text"===u){var s,c=document.activeElement,p=document.querySelectorAll("[data-text=text_".concat(null===(s=this.props.model)||void 0===s?void 0:s.pageId,"]")),f=-1;null==p||p.forEach((function(e,t){e.contains(c)&&(f=t)})),f>-1&&f<p.length-1&&p[f+1].click()}a.getMetaProperty("setFireEnter")&&l((0,j.enterKeyEvent)(a,null!==(o=this.state.innerValue)&&void 0!==o?o:"")),this.cancelEdit(e)}}},{key:"calcEnterPDAInput",value:function(e,t){var r=(new Date).getTime();return void 0===t||t?(e&&(t=r-e<30),{nextDate:r,isPDA:t}):{nextDate:r,isPDA:t=!1}}},{key:"getCountryCode2",value:function(e){var t=(0,ne.getData)(oe.KEY_COUNTRU_VIA_DATA);if(t){var r=Object.values(t).reduce((function(e,t){return e.concat(t)}),[]).filter((function(t){return e.startsWith(t.id)}));if(r[0]&&r[0].code2)return r[0].code2.toUpperCase()}return"CN"}},{key:"needFormat",value:function(e){return void 0!==e&&this.formatInput.indexOf(e)>-1}},{key:"getPlaceHolder",value:function(){var e=this.props.model,t=(e.getMetaProperty("item")||(0,b.Map)()).get(k.PLACE_HOLDER),r=e.getUserLocale();return W.default.isObject(t)?t.get(r):t}},{key:"renderField",value:function(){var e,t=this,r=this.props,n=r.model,o=r.dispatch,i=this.getMustInput(),a=void 0===this.state.innerValue?n.getDataValue():this.state.innerValue;a=void 0!==this.context?this.context:a;var u=n.getMetaLocaleProperty("caption"),c=n.getMetaProperty("item")||(0,b.Map)(),p=c.get(k.YZJ_VOICE_INPUT),P=c.get(k.MOB_FIELD_STYLE,0),_=this._getLock(n),w=c.get("multiLine"),E=c.get(k.MAX_LENGTH),C=c.get(k.LABEL_DIRECTION,"h"),T=null!==(e=c.getIn(["privacy","isprivacy"]))&&void 0!==e&&e;this.textFormatter&&"text"===c.get("type")&&(a=this.textFormatter.setFormatValue(a));var I,L=c.get(k.VALUE_STYLE,"underline"),A=(0,Pe.isNotNullMsg)(this.state.ValidateData),V={placeholder:this.getPlaceHolder(),maxLength:E<=0?"":this.textFormatter?this.textFormatter.getMaxLength(E):E,Grow:1,readOnly:_,hide:this.state.ValidateDataHide,caption:u,mobFieldStyle:P,mustInput:i,isPrivacyField:T,noValue:this.fieldLockEmptyValue,showEmptyFieldTips:A},F={fontSize:c.get(k.FONT_SIZE)||n.getMetaProperty(k.FONT_SIZE),color:c.get(k.COLOR)||n.getMetaProperty(k.COLOR),backgroundColor:c.get(k.BACKGROUND_COLOR)||n.getMetaProperty(k.BACKGROUND_COLOR),textAlign:c.get(k.TEXT_ALIGN)||("v"===C?"left":"")},W=c.get("type");if(!Object.is(_,!0)||Je.includes(W)||c.getIn(["privacy","isprivacy"])||F.color||(0,v.isViewStatus)({formStatus:this.props.formStatus,mobFieldStyle:P})||(F.color="#999999"),"text"===W&&n.getMetaProperty("atw")&&(W="textarea"),this.isEditInput(W)&&"passwordbox"!==W){if(!this.state.editing){var U=a;"localeText"===W&&(U=this.getLocaleTextDisplayValue(a,n));var z=!_&&(null==U||""===U||"number"===W&&0===window.Number(a)&&!c.get(k.ZERO_SHOW));z?U=this.getPlaceHolder()||"":this.needFormat(W)&&(U=this.formatValue(a,W,c,this.props)),""===U&&this.needFormat(W)&&(U="number"===W?"":this.formatValue(0,W,c,this.props)||("passwordbox"===W?"":0));var X="largeText"===W||"localeText"===W&&!0===w,Z=c.get(k.SHOW_COUNT)||!1,J="textarea"===W,ee=(0,s.default)(Fe(Fe(Fe(Fe({},M.default["span-container-value"],!J),M.default["value-start"],[Oe.MOB_FIELD_STYLE_DEFAULT,Oe.MOB_FIELD_STYLE_MAIN].includes(P)),M.default["span-container-value-textarea"],J||X),M.default["multi-textarea-can-scroll"],Z&&J)),te=(0,s.default)(Fe(Fe({},M.default["span-value"],!0),D.default.placeholder,z)),ne={textAlign:c.get(k.TEXT_ALIGN)||("v"===C||"textarea"===W?"left":"")};if("stepper"===W)return V.handelOperatorClick=function(e,r){t.handleChange(e,r)},V.onChange=function(e){var r=e.target.value;r=isNaN(parseFloat(r))?null:r,t.handleInputChange(r)},V.onBlur=function(e){t.handleChange(e.target.value),t.cancelEdit(e)},V.editClick=function(e){t.editValue(e,_)},V.formStatus=this.props.formStatus,F.textAlign="",l.default.createElement($.default,Ve({isReader:!0,value:U||0,model:n,option:c,style:F},V));var oe=(0,s.default)(Fe(Fe({},M.default.mustInput,0===P),M.default["mustInput-CT"],1===P)),ie=this.state.ValidateData===(0,q.getLangMsg)("kdField.key0001");return l.default.createElement("div",{className:ee},!this.state.ValidateDataHide&&ie?l.default.createElement("span",{className:oe,style:ne},this.state.ValidateData):function(){var e=t.state.ValidateDataHide,r=t.props.model,n=r.getMetaProperty("item").get(k.MOB_SHOWLINE);if(t.voiceInputFiledAry.includes(W))return l.default.createElement(Y.default,{noValue:t.fieldLockEmptyValue,yzjvi:p,mobFieldStyle:P,placeholder:t.getPlaceHolder(),lockEmptyTips:t.lockEmptyTips,caption:u,validateDataHide:e,model:r,voiceInputChange:function(e){return t.handleInputChange(e)},value:a||"",type:W,lock:_,showLine:n,style:F});var o=_&&""===U?t.lockEmptyTips||t.fieldLockEmptyValue:U,i=X&&(0,re.default)(o||"");i=i&&i.replace(/(\r\n)|(\n)|(\r)/g,"<br />");var c=X&&i&&i.replace(/(\t)/g,'<span style="padding-left: 2em"></span>'),f=(0,s.default)(Fe(Fe(Fe(Fe(Fe({},M.default["text-wrap"],0===P&&X),M.default["text-wrap-CT"],1===P&&X),M.default["text-nowrap"],0===P&&!X),M.default["text-nowrap-CT"],1===P&&!X),M.default.placeholder,_&&""===U&&""!==t.lockEmptyTips));return l.default.createElement("div",{className:te,style:F},X?l.default.createElement("div",{className:f,style:{textAlign:F.textAlign},title:o,dangerouslySetInnerHTML:{__html:c}}):l.default.createElement("div",{className:f,title:o},o))}())}V.onBlur=function(e){return t.cancelEdit(e)},V.autoFocus=!0}switch(W){case"number":var le=this.getSourceFiledInfoObject(c,this.props),ue=le.symbol,se=le.showSymbol,ce=le.precision;V.value=a,V.digitLength=c.get(k.PRECISION),V.decimalLength=[void 0,null,""].includes(ce)?c.get(k.SCALE):ce;var pe=c.get(k.SCALE);pe!==V.decimalLength&&(V.digitLength=V.digitLength-pe+V.decimalLength),V.zeroShow=c.get(k.ZERO_SHOW),V.roundMethod=c.get(k.ROUND_METHOD),V.noDisplayDecimalTailZero=c.get(k.NO_DISPLAY_SCALE_ZERO),V.mask=c.get(k.DISPLAY_FORMAT)||c.get(k.MASK),V.min=c.get(k.MIN_VALUE),V.max=c.get(k.MAX_VALUE),V.minMark=c.get(k.MIN_MARK),V.maxMark=c.get(k.MAX_MARK),V.symbol=ue,V.showSymbol=se,V.displayDecimalLength=c.get(k.DISPLAY_SCALE),V.onChange=function(e){var r=e.target.value;r=isNaN(parseFloat(r))?null:r,t.handleInputChange(r)};var fe=(0,we.isFlexField)(n);I=l.default.createElement(d.Number,Ve({style:F},V,{shouldGetFormattedValueOnBlur:fe}));break;case"text":var de=function(e){var r=t.props.model,n=r.pageId,o=r.key;!1===(0,N.getPageData)(n,[o,_e.SHOW_SOFT_KEYBOARD_WHEN_FIELD_FOCUSED])&&(0,Q.hideSoftKeyBoardWhenInputFocus)(e.target)};I=l.default.createElement(d.Text,Ve({style:F},V,{value:a,onChange:function(e){return t.handleInputChange(e.target.value,e.target)},onKeyDown:this.onTextKeyDown,onFocus:de,onClick:de}));break;case"passwordbox":V.type="password",V.autocomplete="new-password",V.showEye=!!n.getMetaProperty([k.ITEM,k.SHOW_EYE]),V.onBlur=function(e){e.target.value===t.props.model.getDataValue()?t.setState({editing:!1}):t.cancelEdit(e)},I=l.default.createElement(d.PasswordBox,Ve({style:F},V,{value:a,onChange:function(e){return t.handleInputChange(e.target.value)}}));break;case"textarea":case"largeText":V.minRows=c.get(k.MIN_ROWS),V.maxRows=c.get(k.MAX_ROWS),this.state.textareaHeight&&(F.minHeight=this.state.textareaHeight+"px",F.maxHeight=this.state.textareaHeight+"px");var ye=c.get(k.SHOW_COUNT)||!1;V.className=(0,s.default)(Fe(Fe({},V.className,V.className),M.default["multi-textarea-padding-top"],ye&&"textarea"===W&&"v"===C&&P===Oe.MOB_FIELD_STYLE_DEFAULT));var he=(0,f.getCommonStyle)(n);V.inputRef=function(e){if(e&&((0,Q.setFocusToEnd)(e),he.height)){var r=e.parentNode,n=window.getComputedStyle(r),o=n.paddingTop,i=n.paddingBottom,a=r.clientHeight-parseInt(o)-parseInt(i),l=a-24,u=t.state.textareaHeight;a===u||ye?ye&&l!==u&&t.setState({textareaHeight:l}):t.setState({textareaHeight:a})}},V.onBlur=function(e){t.cancelEdit(e);var r=(0,Q.getCursorPosition)(e.currentTarget),n=t.props.model,i=n.pageId,a=n.key,l={cursorIndex:r,ctrlKey:a};(0,N.setPageData)(i,[R.TEXTAREA_CURSOR_INDEX],l),o((0,x.convertAppModelFunctionAction)((0,x.setControlPostValue)(i,a,l)))},I=l.default.createElement(d.TextArea,Ve({style:F},V,{value:a,onChange:function(e){return t.handleInputChange(e.target.value,e)}}));break;case"date":case"datetime":case"daterange":var ge=c.get(k.MASK),me=c.get(k.DISPLAY_FORMAT),be=c.get(k.MIN_VALUE),ve=c.get(k.MAX_VALUE),Se=c.get(k.DATE_SELECT_TYPE),ke=c.get(k.REGION_TYPE),je=n&&(0,f.getComponentDataProperty)(n,k.DEFAULT_TIME,k.DEFAULT_TIME,!1);if("daterange"===W)I=l.default.createElement(g.default,Ve({style:F,mask:ge,displayFormat:me,value:a||"",minDate:be,maxDate:ve,dateSelectType:Se,onChange:function(e){return t.handleInputChange(e)}},V,{onClick:function(){o((0,j.focus)(n))},exposeClickableDom:!0,validateData:this.state.ValidateData,regionType:ke,defaultTime:je}));else{var Ce=function(e){return t.handleInputChange(e)},De=c.get(k.RELATED_DATE),Ie=c.get(k.IS_START_DATE);if(De&&"date"===W){W="daterange";var Le=n.getDataProperty(["value"],De),Ae=c.get(k.IS_START_DATE);a=Ae?[a,Le]:[Le,a],Ce=function(e,r){Ae?(t.handleInputChange(e),o((0,j.updateFieldValue)(n.pageId,De,r))):(t.handleInputChange(r),o((0,j.updateFieldValue)(n.pageId,De,e)))}}var xe=c.get(k.RELATE_ORG),Ne=(0,x.getSourceFiledInfoById)(n.pageId,xe)(n.state),Re=Ne&&Ne.timezone||n.getDataProperty(k.TIME_ZONE),We=Ne&&Ne.today||n.getDataProperty(k.TODAY),Be=(0,f.getRootLocale)();I=l.default.createElement(h.default,Ve({today:We,timeZone:Re,style:F,type:W,mask:ge,isStartDate:Ie,displayFormat:me,value:a,minDate:be,maxDate:ve,selectType:c.get("dateSelectType"),onChange:Ce},V,{onFocus:function(){return o((0,j.focus)(n))},regionType:ke,exposeClickableDom:!0,valueLocale:Be,mobFieldStyle:P,validateData:this.state.ValidateData,defaultTime:je}))}break;case"checkbox":var Ue=(0,f.getCommonStyle)(n);delete Ue.textAlign,Ue=Object.assign({},Ue,F);var Ye=this.props.isVisible,He=void 0===Ye||Ye;I=l.default.createElement(O.default,{option:c,model:n,style:Ue,inputStyle:F,value:a,onClick:function(e){return t.handleChange(!a)},disabled:V.readOnly,isVisible:He});break;case"combo":case"mulcombo":var Ge={style:F,multiple:"mulcombo"===W,mobFieldStyle:P,mustInput:i,placeholder:V.placeholder};I=this.renderSelect(Ge);break;case"basedata":case"mulbasedata":case"city":case"user":case"org":I=this.renderBaseData(F);break;case"localeText":a=this.getLocaleTextDisplayValue(a,n),V.inputRef=function(e){e&&(0,Q.setFocusToEnd)(e)},I=l.default.createElement(S.default,Ve({multiLine:w,style:F},V,{value:a,onChange:function(e){return t.handleInputChange(e.target.value)}}));break;case"cascademenu":I=l.default.createElement(B.default,Ve({value:a,noValue:this.fieldLockEmptyValue,style:F,disabled:V.readOnly,placeholder:V.placeholder,handleChange:function(e){return t.handleChange(e)},shouldRespondADMethod:f.shouldRespondADMethod,hide:V.hide,caption:V.caption,theme:V.theme,exposeClickableDom:!0,mobFieldStyle:P},this.props));break;case"attachmentfield":V.onChange=function(e){return t.handleChange(e)},I=l.default.createElement(tt,Ve({model:n,option:c,type:W,dispatch:this.props.dispatch,disabled:V.readOnly,handleChange:function(e){return t.handleChange(e)},value:a,validateData:this.state.ValidateData},V,this.props));break;case"radio":var Ke;V.onChange=function(e){t.handleChange(e.target.value)};var ze=(0,f.getCommonStyle)(n),Xe=(0,Ee.isViewModel)(null===(Ke=this.props)||void 0===Ke?void 0:Ke.formStatus);I=l.default.createElement(y.default,Ve({fieldWidth:ze&&ze.width,model:n,option:c,isGroupLocked:this.props.getLocked(n,c.get("group")),disabled:V.readOnly,style:F,isFormViewStatus:Xe},V));break;case"telephone":V.onChange=function(e){t.handleInputChange(e)},V.onBlur=function(e){t.handleChange(e)},I=l.default.createElement(H.default,Ve({isValidate:c.get("vlr"),validateData:this.state.ValidateData,model:n,value:a||"",style:F,getTelViaList:function(){return o((0,j.getTelViaList)(n))}},V));break;case"picture":break;case"time":I=l.default.createElement(G.default,Ve({mask:c.get(k.MASK),model:n,value:a||"",style:F},V,{onChange:function(e){return t.handleChange(e)},exposeClickableDom:!0,validateData:this.state.ValidateData}));break;case"timerange":I=l.default.createElement(K.default,Ve({mask:c.get(k.MASK),model:n,value:a||"",style:F},V,{onChange:function(e){return t.handleChange(e)},exposeClickableDom:!0,validateData:this.state.ValidateData}));break;case"stepper":V.handelOperatorClick=function(e,r){t.handleChange(e,r)},V.onChange=function(e){var r=e.target.value;r=isNaN(parseFloat(r))?null:r,t.handleInputChange(r)},V.onBlur=function(e){t.handleChange(e.target.value),t.cancelEdit(e)},V.onFocus=function(e){t.editValue(e,_)},I=l.default.createElement($.default,Ve({value:a||0,model:n,option:c,style:F,validateData:this.state.ValidateData},V));break;case"flexfield":var Ze=this.props.isVisible,qe=void 0===Ze||Ze,Qe=(0,f.getCommonStyle)(n);I=l.default.createElement(m.default,Ve({showTitle:!1!==n.meta.get(k.SHOW_TITLE),style:Qe,locked:this._getLock(n),dispatch:this.props.dispatch,model:n,formStatus:this.props.formStatus,labelDirection:C,valueAreaStyle:L,isVisible:qe},V,{value:a}));break;case"geopoint":return l.default.createElement(ae.default,{model:n,updateModel:function(e){return o((0,j.change)(n,e))},isLocked:_});case"address":I=this.renderAddress(F,a,V);break;case"email":I=l.default.createElement(d.Text,Ve({style:F,mask:"email"},V,{value:a,onChange:function(e){return t.handleInputChange(e.target.value)}}));break;case"i18nname":I=this.renderI18nName(F,V,a);break;case"radiooptgroup":var $e,et=(0,Ee.isViewModel)(null===($e=this.props)||void 0===$e?void 0:$e.formStatus);I=l.default.createElement(Te.default,Ve({value:a,option:c,style:F,locale:n.getUserLocale(),labelDirection:C},V,{onChange:function(e){t.handleInputChange(e)},lock:_,isWrap:!!n.getMetaProperty("atw"),valueAreaStyle:L,isFormViewStatus:et,validateData:this.state.ValidateData,noValue:this.fieldLockEmptyValue,model:n}));break;case"checkboxgroup":var rt,nt=(0,Ee.isViewModel)(null===(rt=this.props)||void 0===rt?void 0:rt.formStatus);I=l.default.createElement(Me.default,Ve({value:a,option:c,style:F,locale:n.getUserLocale(),labelDirection:C,lock:_,isWrap:!!n.getMetaProperty("atw"),valueAreaStyle:L,isFormViewStatus:nt,noValue:this.fieldLockEmptyValue,model:n,onChange:function(e){t.handleInputChange(e)}},V));break;default:I=l.default.createElement(d.Text,Ve({style:F},V,{value:a,onChange:function(e){return t.handleInputChange(e.target.value)}}))}return I}},{key:"renderAddress",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0,n=t;return b.List.isList(t)&&t.get(1)&&(n=t.get(1)),l.default.createElement(ce.default,Ve({style:e,value:n,onClick:this.handleClickAddress},r))}},{key:"renderSelect",value:function(e){var t=this,r=this.props.model,n=r.getMetaLocaleProperty("caption"),o=r.getMetaProperty("item")||(0,b.Map)(),i=r.getDataProperty("comboItems")||(0,f.getComponentDataProperty)(r,k.STORE,["item",k.STORE])||[],a=r.getDataValue(),u=[],s=o.get("showStyle")||0,c=o.get("lockViewSelected"),p=!1!==o.get(k.SHOW_CLEAR_BUTTON),d=this._getLock(r),y=o.get(k.LABEL_DIRECTION,"h"),h=o.get(k.TEXT_ALIGN)||("v"===y?"left":"right"),g=o.getIn(["privacy","isprivacy"])||!1,m=r.getMetaProperty("atw")||!1,v=(0,Pe.isNotNullMsg)(this.state.ValidateData);return i.forEach((function(e){""!==e.get(0)&&u.push({value:e.get(0),alias:e.getIn([1,r.getUserLocale()]),imgkey:e.get(2)?(0,f.getImgFullPath)(t._fileServer,e.get(2)):null,itemVisible:e.get(3,!0)})})),l.default.createElement(P.default,{style:e.style,caption:n,hide:this.state.ValidateDataHide,multiple:e.multiple,items:u,showStyle:s,onChange:function(e){return t.handleChange(e)},value:a,readOnly:d,hasTitle:!1!==r.meta.get(k.SHOW_TITLE),showType:o.get("showtype"),valueTextAlign:h,labelDirection:y,mobFieldStyle:e.mobFieldStyle,mustInput:e.mustInput,placeholder:e.placeholder,lockViewSelected:c,exposeClickableDom:!0,showEmptyFieldTips:v,validateData:this.state.ValidateData,isPrivacyField:g,noValue:this.fieldLockEmptyValue,isNewline:m,showClearBtn:p})}},{key:"renderBaseData",value:function(e,t){var r=this,n=this.props.model,o=n.getMetaLocaleProperty("caption"),i=n.getMetaProperty("item")||(0,b.Map)(),a=this.getPlaceHolder(),u=this._getLock(n),s=void 0!==this.context?this.context:n.getDataProperty(["value"]),c=i.get(k.LABEL_DIRECTION,"h"),p=i.get("text-align")||("v"===c?"left":""),f=i&&i.get("type"),y=i&&i.get("lockViewSelected"),h=n.getMetaProperty("atw")||!1,g=i.get(k.MOB_FIELD_STYLE,0),m=(0,J.getBaseDataDisplayProp)(s,i&&i.get(k.DISPLAY_PROP),"mulbasedata"===f,i&&i.get(k.CONNECTOR)),v=(0,Pe.isNotNullMsg)(this.state.ValidateData);return l.default.createElement(d.BaseData,{disabled:u,isNewline:h,mobFieldStyle:g,showEmptyFieldTips:v,validateData:this.state.ValidateData,hide:this.state.ValidateDataHide,caption:o,style:e,alias:s,text:m,onClick:function(e){return r.onClickBaseData(t)},placeholder:a,hideIcon:u,textAlign:p,lockViewSelected:y,exposeClickableDom:!0,noValue:this.fieldLockEmptyValue})}},{key:"renderI18nName",value:function(e,t,r,n){var o=this,i=this.props.model.getMetaProperty("item")||(0,b.Map)(),a=i&&i.get("simpleModeId");return l.default.createElement(ve.I18nName,Ve({style:e},t,{value:r,simpleModeId:a,validateData:this.state.ValidateData,onChange:function(e){return o.handleInputChange(e.target.value)},onBlur:function(e){return o.handleChange(e)},exposeClickableDom:!0,onClick:function(e){return o.onClickBaseData(n)}}))}},{key:"InvokeSelectPersonsByYzj",value:function(e,t,r){r=r||{};var n=Object.assign({},{isMulti:!1},r),o=e.getMetaProperty("filter");if(o&&"string"==typeof o){var i=JSON.parse(o);n=Object.assign(n,i)}(0,I.default)("selectPersons",{data:n,callback:function(r){var n=[];r.persons.forEach((function(e){n.push(e.openId)})),t(e,n)},failCallback:function(e){"操作失败,错误码为:".concat(e.errorCode,",错误信息为:").concat(e.error)}})}},{key:"InvokeSelectOrgsByYzj",value:function(e,t,r){r=r||{};var n=Object.assign({},{isMulti:!1},r);(0,I.default)("selectOrgs",{data:n,callback:function(r){var n=[];r.orgs.forEach((function(e){n.push(e.orgId)})),r.data.orgs.length>0&&t(e,n)},failCallback:function(e){"操作失败,错误码为:".concat(e.errorCode,",错误信息为:").concat(e.error)}})}},{key:"componentWillReceiveProps",value:function(e){var t=(e.model.getMetaProperty("item")||(0,b.Map)()).get("type"),r=e.model.getDataValue(),n=this.props.model.getDataValue(),o=this.props.model,i=o.pageId,a=o.key;if(void 0!==r&&r!==n){"text"===t&&this.textFormatter&&(r=this.textFormatter.generateFormatValue(r)),this.setState({innerValue:r});var l=(0,x.getFieldValidateMsg)(i,a);l&&l.size>0&&""!==r&&((0,x.deleteFieldValidateMsg)(i,a,R.VALIDATE_MSG_TYPE.notNull),(0,x.deleteFieldValidateCaption)(i,a,R.VALIDATE_MSG_TYPE.notNull),(0,x.deleteFieldValidateMsg)(i,a,R.VALIDATE_MSG_TYPE.others))}var u=this.props.model.getMetaProperty(["item","mi"]),s=e.model.getMetaProperty(["item","mi"]);s===u||s||((0,x.deleteFieldValidateMsg)(i,a,R.VALIDATE_MSG_TYPE.notNull),(0,x.deleteFieldValidateCaption)(i,a,R.VALIDATE_MSG_TYPE.notNull));var c=e.model.getDataProperty("invokeId"),p=this.props.model.getDataProperty("invokeId");if(void 0!==c&&c!==p){var f=e.model.getDataProperty("invokeAction"),d=f.get("param");d=d&&d.toJS()||{};var y=e.model.getMetaProperty("item").get("type");switch(f.get("actionName")){case"selectPersons":"user"===y&&this.InvokeSelectPersonsByYzj(e.model,e.endSelect.bind(this),d);break;case"selectOrgs":"org"===y&&this.InvokeSelectOrgsByYzj(e.model,e.endSelect.bind(this),d)}}}},{key:"getMustInput",value:function(e){return(void 0===e?this.props.model:e).getMetaProperty(["item",k.MUST_INPUT])}},{key:"componentDidMount",value:function(){var e=this,t=this.props,r=t.model,n=t.value,o=r.pageId,i=r.key,a=r.getMetaProperty("item")||(0,b.Map)();if(a){var l=a.get("type"),u=a.get("locate");if("city"===l&&!0===u&&this.getLocation(),this.getMustInput())if("daterange"===l){var s=(n||"").split(","),c=(s[0]||"").trim(),p=(s[1]||"").trim();c&&p||this.props.dispatch((0,x.convertAppModelFunctionAction)((0,x.setValidFlag)(r.pageId,r.key,!1)))}else this.props.dispatch((0,x.convertAppModelFunctionAction)((0,x.setValidFlag)(r.pageId,r.key,!1)));o&&i&&(this.listeners=Object.values(R.VALIDATE_MSG_TYPE).map((function(t){return(0,N.addDataChangeListener)(o,[R.VALIDATE_DATA,i,t],e.handleValidateDataChange)})),this.directivesListener=(0,N.addDataChangeListener)(o,[i,"directives"],(function(t){t&&e.handleDirectives(t)}))),this.removeValidateListener=(0,N.addDataChangeListener)(o,[R.VALIDATE_FINISH],(function(t){e.props.isVisible||(Object.values(R.VALIDATE_MSG_TYPE).forEach((function(e){return(0,N.deletePageData)(o,[R.VALIDATE_DATA,i,e])})),(0,N.deletePageData)(o,[R.VALIDATE_DATA,i]),Object.values(R.VALIDATE_MSG_TYPE).forEach((function(e){return(0,N.deletePageData)(o,[R.VALIDATE_DATA_CAPTION,i,e])})),(0,N.deletePageData)(o,[R.VALIDATE_DATA_CAPTION,i]),Object.values(R.VALIDATE_MSG_TYPE).forEach((function(e){return(0,N.deletePageData)(o,[R.PARENT_COLLAPSE_PANEL_ID,i,e])})),(0,N.deletePageData)(o,[R.PARENT_COLLAPSE_PANEL_ID,i]))}))}}},{key:"handleDirectives",value:function(e){var t=this,r=this.props.model;e.forEach((function(e){var n=e.args,o=e.methodname,i=e.options;switch(o){case he.SET_PLAIN_TEXT:var a=n[0].v;(0,N.setPageData)(r.pageId,[r.key,k.IS_PRIVACY],1),t.updateControlValue&&t.updateControlValue((0,b.fromJS)(a));break;case _e.FIELD_SET_FOCUS:t.handleSetFocus();break;case _e.SHOW_SOFT_KEYBOARD_WHEN_FIELD_FOCUSED:var l=n[0].isShow;(0,N.setPageData)(r.pageId,[r.key,_e.SHOW_SOFT_KEYBOARD_WHEN_FIELD_FOCUSED],l);break;case"updateValue":if(!t.props.isLocked){var u=r.getMetaProperty("item")||(0,b.Map)(),s=u.get("type"),c=(0,Ce.default)(n,s,r,i);if(null===c)return;var p=r.key;if(s===de.default.Radio){if(!c)return;c=u.get("v"),p=u.get(k.GROUP)}t.setState({innerValue:c});var f=c;t.textFormatter&&"text"===s&&(f=t.textFormatter.getNormalValue(c));var d=!1;switch(i.fireUpdate){case"auto":d=t.getFireUpdate(t.props.model);break;case"enabled":d=!0}(0,j.addBatchUpdate)(t.props.model.pageId,p,f,!1,d)}}}))}},{key:"handleValidateDataChange",value:function(e){var t=this.props.model,r=t.pageId,n=t.key;if(e){var o=e.success,i=e.message;this.setState({ValidateData:i,ValidateDataHide:o})}else{var a=(0,N.getPageData)(r,[R.VALIDATE_DATA,n]);0===(null==a?void 0:a.size)&&this.setState({ValidateData:void 0,ValidateDataHide:!0})}}},{key:"componentDidUpdate",value:function(e,t){var r=this.props.model,n=r.pageId,o=r.key,i=r.getMetaProperty("item")||(0,b.Map)(),a=i.get("type"),l=i.get("mi"),u=this.state.innerValue;if("daterange"===a){var s=(u||"").split(","),c=(s[0]||"").trim(),p=(s[1]||"").trim();c&&p||(u="")}l&&Xe.indexOf(a)>-1&&u&&((0,x.deleteFieldValidateMsg)(n,o,R.VALIDATE_MSG_TYPE.notNull),(0,x.deleteFieldValidateCaption)(n,o))}},{key:"getEnable",value:function(){var e=this.props,t=e.model,r=e.getLocked,n=e.getVisibleUnion,o=r(t),i=n(t);return!1===o&&!0===i}},{key:"handleValidate",value:function(){var e=this.props.model;if(!1!==this.getEnable()){var t=this.state.innerValue,r=e.pageId,n=e.key,o=e.getMetaProperty("item")||(0,b.Map)(),i=o.getIn(["privacy","isprivacy"])||!1,a=e.getMetaLocaleProperty("caption"),l=o.get("type"),u=e.getDataProperty("value"),s=t||u;if(!this.getMustInput()||["checkbox","radio","icon"].includes(l)||i){var c=(0,x.getFieldValidateMsg)(e.pageId,e.key);c&&c.size>0&&((0,x.deleteFieldValidateMsg)(r,n),(0,x.deleteFieldValidateCaption)(r,n))}else{var p=e.getUserLocale(),f=o.get(k.ZERO_SHOW),d=!1;if("localeText"===l)d=!(b.Map.isMap(s)?s.get(p):s);else if("attachmentfield"===l){var y=t||u;d=!!b.List.isList(y)&&0===y.size}if(!s||d||"number"===l&&!0!==f&&("0"===u||0===window.parseFloat(u)))(0,x.setFieldValidateMsg)(r,n,R.VALIDATE_MSG_TYPE.notNull,{success:!1,message:(0,q.getLangMsg)("kdField.key0001")}),(0,x.setFieldValidateCaption)(r,n,R.VALIDATE_MSG_TYPE.notNull,a);else if("daterange"===l&&u){var h=u.split(","),g=W.default.trim(h[0]),m=W.default.trim(h[1]);(W.default.isEmpty(g)||W.default.isEmpty(m))&&((0,x.setFieldValidateMsg)(r,n,R.VALIDATE_MSG_TYPE.notNull,{success:!1,message:(0,q.getLangMsg)("kdField.key0001")}),(0,x.setFieldValidateCaption)(r,n,R.VALIDATE_MSG_TYPE.notNull,a))}else if("timerange"===l&&u){var v=u.split(","),O=W.default.trim(v[0]),P=W.default.trim(v[1]);"-1"!==O&&"-1"!==P||((0,x.setFieldValidateMsg)(r,n,R.VALIDATE_MSG_TYPE.notNull,{success:!1,message:(0,q.getLangMsg)("kdField.key0001")}),(0,x.setFieldValidateCaption)(r,n,R.VALIDATE_MSG_TYPE.notNull,a))}else(0,x.deleteFieldValidateMsg)(r,n),(0,x.deleteFieldValidateCaption)(r,n)}if(["telephone","email"].includes(l))if("telephone"===l){var _=this.props.model,S=_.pageId,w=_.key;""===s||(0,z.isTelephone)(s,{pageId:S,key:w})||((0,x.setFieldValidateMsg)(S,w,R.VALIDATE_MSG_TYPE.tele,{success:!1,message:(0,q.getLangMsg)("FieldValidateMsg.incorrectFormat")}),(0,x.setFieldValidateCaption)(S,w,R.VALIDATE_MSG_TYPE.tele,a))}else if("email"===l){var j=t||u;""===j||(0,X.isEmail)(j)||((0,x.setFieldValidateMsg)(r,n,R.VALIDATE_MSG_TYPE.email,{success:!1,message:(0,q.getLangMsg)("FieldValidateMsg.incorrectFormat")}),(0,x.setFieldValidateCaption)(r,n,R.VALIDATE_MSG_TYPE.email,a))}}}},{key:"componentWillMount",value:function(){var e=this.props.model,t=e.pageId,r=e.key,n=e.getMetaProperty([k.ITEM,k.FIELD_TYPE]);[de.default.Basedata,de.default.MulBasedata,de.default.I18nNameField].includes(n)&&(this._removeListener=(0,ee.addAjaxStateListener)(t,r,"click",this.baseDataAjax),(0,x.setBusyTips)(e,["click"]));var o=e.getMetaProperty([k.ITEM,k.TEXT_FIELD_FORMAT]);n===de.default.Text&&o&&(this.textFormatter=new fe.TextFormatter(o))}},{key:"baseDataAjax",value:function(e){var t=e.value;e.args;t!==ee.AJAX_PENDING&&(clearTimeout(this.clearClickBaseDataTimer),$e=!0)}},{key:"componentWillUnmount",value:function(){this.isUnmount=!0,this.listeners&&this.listeners.forEach((function(e){return e()})),this._removeListener&&this._removeListener(),this.directivesListener&&this.directivesListener();var e=this.props.model,t=e.pageId,r=e.key,n=(0,x.getFieldValidateMsg)(t,r);n&&n.size>0&&((0,x.deleteFieldValidateMsg)(t,r,R.VALIDATE_MSG_TYPE.notNull),(0,x.deleteFieldValidateMsg)(t,r,R.VALIDATE_MSG_TYPE.tele),(0,x.deleteFieldValidateCaption)(t,r,R.VALIDATE_MSG_TYPE.notNull),(0,x.deleteFieldValidateCaption)(t,r,R.VALIDATE_MSG_TYPE.tele)),this.removeValidateListener&&this.removeValidateListener(),clearTimeout(this.focusTimer)}},{key:"getLocation",value:function(e){var t=this.props,r=t.model,n=t.dispatch;L.locationService.getLocation((function(e){n((0,j.publicLocation)(r,{city:e.city}))}),3e3)}},{key:"updateControlValue",value:function(e){var t=this.props,r=t.model,n=t.dispatch,o=r.pageId,i=r.key;(0,be.mergeState)(w.UPDATE_CONTROL_VALUE,o,{key:i,value:(0,b.fromJS)(e),updateData:!1},n)}},{key:"getPlainText",value:function(){var e=this.props,t=e.model;(0,e.dispatch)(null===ye.getPlainText||void 0===ye.getPlainText?void 0:(0,ye.getPlainText)(t,-1))}},{key:"render",value:function(){var e=this,t=this.props,r=t.model,n=t.dispatch,o=this.getMustInput(),i=r.getMetaLocaleProperty("caption"),a=r.getMetaProperty(k.TEXT_ALIGN),c=(0,f.getCommonStyle)(r);delete c.textAlign,c=Object.assign({},c,this.props.style);var p=(0,f.getCommonClass)(r),d=p.Grow,y=p.Shrink,h={width:r.getMetaLocaleProperty(k.LABEL_WIDTH),fontSize:r.getMetaProperty(k.FONT_SIZE),color:r.getMetaProperty(k.COLOR)},g=this._getLock(r),m=(0,Z.default)({Grow:d,Shrink:y}),b=r.getMetaProperty("item");if(void 0===b)return console.error(i+"/"+r.key+": ---item can not be null!---"),l.default.createElement("div",{style:{backgroundColor:"red",marginLeft:12}},i+"["+r.key+"]:元数据item属性不能为空");var O=b.get("showtype")||0,P=!1!==r.meta.get(k.SHOW_TITLE),S=b.get("type"),w=b.get(k.LABEL_DIRECTION,"h"),j=b.get(k.VALUE_STYLE,"underline"),C=b.get(k.MOB_FIELD_STYLE,0),T=void 0===this.state.innerValue?r.getDataValue():this.state.innerValue,D=b.getIn(["privacy","isprivacy"])&&b.getIn(["privacy","canshowdetail"])&&1!==(0,N.getPageData)(r.pageId,[r.key,k.IS_PRIVACY]),I=b.getIn(["privacy","isprivacy"])||!1,L=b.get(k.MOB_SHOWLINE);if("signature"===S){var A=l.default.createElement("span",{"data-slot":"tips","data-page-id":r.pageId,"data-ctrl-id":r.key,style:{display:"none"}});return l.default.createElement(Se.default,Ve({disabled:g,model:r,required:o,showTitle:P,slot:A,style:c,title:i,value:T,onChange:function(t){return e.handleChange(t)},setAsDefaultSignature:function(t){return e.props.dispatch((0,se.setAsDefaultSignature)(r,t))}},this.props.attachData))}if("richtext"===S){var V=this._getLock(r),F=l.default.createElement("span",{"data-slot":"tips","data-page-id":r.pageId,"data-ctrl-id":r.key,style:{display:"none"}});return l.default.createElement(ke.default,Ve({model:r,lock:V,required:o,showTitle:P,isInLayoutFlex:this.props.isInLayoutFlex,valueAreaStyle:j,formStatus:this.props.formStatus,slot:F,style:c,title:i,value:T||"",labelDirection:w,labelStyle:h,labelTextAlign:a,onChange:function(t){return e.handleChange(t)}},this.props.attachData))}if(2===C){if(!Ze.includes(S))return l.default.createElement(ie.default,Ve({model:r,value:T,formatValue:this.formatValue,getSourceFiledInfoObject:this.getSourceFiledInfoObject,title:i,titleStyle:h,titleTextAlign:a,style:c,id:r.key},p,{showTitle:P,readOnly:g,type:S,option:b,isInLayoutFlex:this.props.isInLayoutFlex},this.props.attachData,{onTitleClick:this.onTitleClick,getLocaleTextDisplayValue:this.getLocaleTextDisplayValue,isShowPrivacyEye:!!D,isPrivacyField:I,getPlainText:this.getPlainText,showLine:L}));C=1}"text"===S&&r.getMetaProperty("atw")&&(S="textarea");var R,W=this.props.getLocked(r,b.get("group"));R=b&&b.get(k.FIELD_STYLE);var B=b.get(k.GROUP);if(B){var U=(0,x.getItemMeta)(r.pageId,B)(r.state);R=U&&U.getIn(["item",k.FIELD_STYLE])}if("radio"===S&&qe.includes(R)&&(P=!1),"checkbox"===S){var Y=b.get("s")||0;if(1===Y)return this.renderField();2!==Y&&3!==Y||(P=!1)}var H="";if("textarea"===S&&(h.alignItems="flex-start",H=(H=void 0===this.state.innerValue?r.getDataValue():this.state.innerValue)||""),"attachmentfield"===S)return this.renderField();if("flexfield"===S)return this.renderField();if("radiogroup"===S)return null;"radio"===S&&(g=W||g),("i18nname"===S&&b.get("simpleModeId")||Oe.NO_DATA_TOUCH_FEED_BACK_FIELDS.includes(S))&&(this.props.attachData["data-touchfeedback"]=!1);var G=b&&b.get("stepperpattern")||0;if("stepper"===S&&1===G)return this.renderField();if("picture"===S){var K,z=b.get("dik"),X=r.getDataValue();!X&&z&&(X=z=(0,f.getImgFullPath)("",z,!1));var q=r.getDataProperty("u"),J=this._getLock(r),Q=b.get("s"),$=(0,x.getAppId)(r.pageId)(r.state),ee=(0,x.getFormId)(r.pageId)(r.state),te=!!r.getMetaProperty(k.ALLOW_CROPPER),re=r.getMetaProperty(k.DISPLAY_TITLE),ne=null!==(K=r.getMetaProperty(k.CUT_ASPECT_RATIO))&&void 0!==K?K:0,oe=b.get(k.IMG_SOURCE),ae=r.getMetaProperty("showWaterMark"),le=(0,me.getMaxSize)(1024*(b.get(k.IMAGE_MAX_SIZE)||0)*1024),ue=(0,me.getMaxSize)(1024*(b.get(k.IMAGE_MAX_SIZE)||0)*1024||me.COMPRESS_IMAGE_CONVERT_SIZE),ce=!!r.getMetaProperty(k.EDIT_PREVIEW),pe=l.default.createElement("span",{"data-slot":"tips","data-page-id":r.pageId,"data-ctrl-id":r.key,style:{display:"none"}});return l.default.createElement(_.default,{attachData:this.props.attachData,pictureModel:r,fileServer:this._fileServer,labelText:i,labelStyle:h,labelTextAlign:a,className:m,showTitle:P,src:X,imgPath:q,disabled:J,appId:$,formId:ee,showPicture:me.showPicture,onChange:function(t){return e.handleChange(t)},style:c,id:r.key,showStyle:Q,mustInput:o,fieldType:S,showWaterMark:ae,dispatch:this.props.dispatch,onClick:function(){return n((0,E.click)(r))},defaultik:z,maxSize:le,convertSize:ue,editPreview:ce,allowCropper:te,imgSource:oe,handleDeletePic:this.handleDeletePic,beforeUpload:this.beforeUploadPicture,cutAspectRatio:parseInt(ne),reportUploadResult:this.uploadPictureResult,getImagePreviewUrl:this.getImagePreviewUrl,Slot:pe,displayTitle:re,validateData:this.state.ValidateData})}var fe=(0,f.getComponentDataProperty)(r,k.ITEM,k.ITEM,!1),de=fe.get(k.MAX_LENGTH),ye=fe.get(k.SHOW_COUNT)||!1,he=l.default.createElement("div",{"data-slot":"tips","data-page-id":r.pageId,"data-ctrl-id":r.key,style:{display:"none"}}),ge=g&&(0,Ee.isViewModel)(this.props.formStatus),be=(0,s.default)(Fe({},M.default["radio-button-title"],"h"===w&&!ge&&r.getMetaProperty([k.ITEM,Oe.FLAT_STYLE])===Oe.FLAT_STYLE_OPT.button&&Oe.RADIO_BUTTON_TYPES.includes(S)));return l.default.createElement(v.default,Ve({model:r,mustInput:o,labelText:i,labelStyle:h,labelTextAlign:a,labelDirection:w,valueAreaStyle:j,style:c,className:this.props.className,id:r.key},p,{showTitle:P,onClick:function(t){"stepper"!==S&&e.editValue(t,g),"radio"===b.get("type")&&!g&&e.handleChange(b.get("v"));var r=u.default.findDOMNode(e),n=r.querySelector("[data-click=true]");n&&(n.click(),je.default[je.IS_IOS]&&n.click());var o=r.querySelector("[data-focus=true]");if(o){o.focus();var i=o.value.length;o.setSelectionRange(i,i)}},readOnly:g,type:S,fieldStyle:R,showStyle:b.get("s")||0,isInLayoutFlex:this.props.isInLayoutFlex,mobFieldStyle:C},this.props.attachData,{totalNumber:de,currentNumber:H.length,showCount:ye,showType:O,"data-ignore-touch":"combo"===S||void 0,formStatus:this.props.formStatus,lock:g,isShowPrivacyEye:!!D,isPrivacyField:I,getPlainText:this.getPlainText,dispatch:this.props.dispatch,Slot:he,textareaShowLine:b.get(k.MOB_SHOWLINE),validateData:this.state.ValidateData,textAlign:b.get(k.TEXT_ALIGN)||("v"===w?"left":""),labelClass:be}),this.renderField())}}]),t}(l.default.Component),i.contextType=m.FlexibleContext,o=i))||o)||o,tt=t.KDattachmentPanel=(a=function(e){function t(e){var r;return Ne(this,t),(r=Ue(this,t,[e])).beforeUpload=function(e){r.props.dispatch&&r.props.dispatch((0,T.beforeUpload)(r.props.model,e))},r.uploadFailed=function(e){r.props.dispatch&&r.props.dispatch((0,T.reportUploadResult)(r.props.model,e))},r.attachOperationCount=function(e){r.props.dispatch&&r.props.dispatch((0,T.attachOperationCount)(r.props.model,e))},r.renameFile=function(e){r.props.dispatch&&r.props.dispatch((0,T.rename)(r.props.model,e))},r.handleAttachOperaClick=function(e){T.attachOperaClick&&r.props.dispatch((0,T.attachOperaClick)(r.props.model,e))},r.afterUpload=function(e){r.props.dispatch&&r.props.dispatch((0,T.reportUploadResult)(r.props.model,e))},r.permissionQuery=function(e){var t=r.props,n=t.dispatch,o=t.model;n((0,T.permissionQuery)(o,e))},r.getDisposableUrl=function(e){var t=r.props,n=t.model;(0,t.dispatch)((0,T.getDisposableUrl)(n,e))},["uploadFile","removeFile","updateControlValue","beforeRemove","confirmDelete","attachOperationCount","beforeUpload","uploadFailed","renameFile","afterUpload","permissionQuery"].forEach((function(e){return r[e]=r[e].bind(Ge(r))})),r}return Ke(t,e),We(t,[{key:"beforeRemove",value:function(e){this.props.dispatch&&this.props.dispatch((0,T.comfirmDelete)(this.props.model,e))}},{key:"confirmDelete",value:function(e){this.props.dispatch&&this.props.dispatch((0,T.comfirmDelete)(this.props.model,e))}},{key:"uploadFile",value:function(e){this.props.handleChange&&this.props.handleChange(e)}},{key:"removeFile",value:function(e){this.props.handleChange&&this.props.handleChange(e)}},{key:"updateControlValue",value:function(e){var t=this.props,r=t.model,n=t.dispatch,o=r.pageId,i=r.key;(0,be.mergeState)(w.UPDATE_CONTROL_VALUE,o,{key:i,value:(0,b.fromJS)(e),updateData:!1},n)}},{key:"render",value:function(){var e,t,r,n,o,i=this.props,a=i.model,u=i.value,s=i.disabled,c=i.caption,p=i.style,d=i.validateData,y=a.getMetaProperty("item")||(0,b.Map)(),h=a.getFormConfig().attachmentserver,g=(0,f.getCommonClass)(a),m=g.Grow,v=g.Shrink,O=g.AlignSelf,P=xe(xe({},(0,f.getCommonStyle)(a)),p),_=a.getMetaProperty("afs")||7,S=(0,f.getAttachInfoFromRootConfig)(),w=S.attachmentUploadMaxSize,j=S.forbidfiletype,E=S.fileTypeWhiteList,C=y.get("maxatmcount",0),T=y.get("ext"),M=y.get("maxatmsize"),D=(0,te.getMaxSize)(M,w),I=y.get("sortField",ge.ATTACHMENT_SORT_FIELD.FileName),L=y.get("sortType",ge.ATTACHMENT_SORT_TYPE.NoSort),A=y.get("checkDuplicateFileName"),x=null===(e=a.getMetaProperty(k.ATTACHMENT_SHOWYITLE))||void 0===e||e,V=null===(t=a.getMetaProperty(k.ATTACHMENT_SHOWTIPS))||void 0===t||t,F=null!==(r=a.getMetaProperty(k.ATTACHMENT_UPLOADBTNPOS))&&void 0!==r?r:"default",N=null!==(n=a.getMetaProperty(k.ATTACHMENT_EXPANDMORE))&&void 0!==n&&n,R=null!==(o=a.getMetaProperty(k.ATTACHMENT_SHOW_THUMBNAIL))&&void 0!==o&&o,W=(0,te.getPreviewLimitSize)(),B=1024*(y.get(k.ATTACHMENT_IMG_COMP_THR)||0)*1024||me.COMPRESS_IMAGE_CONVERT_SIZE,Y=y.get(ge.DRAGBLE);return l.default.createElement(U.default,Ve({model:a,locale:a.getUserLocale(),disabled:s,displayData:u,beforeUpload:this.beforeUpload,uploadFile:this.uploadFile,uploadFailed:this.uploadFailed,beforeRemove:this.beforeRemove,removeFile:this.removeFile,confirmDelete:this.confirmDelete,updateControlValue:this.updateControlValue,attachOperationCount:this.attachOperationCount,style:P,fileserver:h,Grow:m,Shrink:v,AlignSelf:O,isField:!0,attachmentFileSource:_,forbidfiletype:j,maxAtmCount:C,maxSize:D,extName:T,fileTypeWhiteList:E,title:c,renameFile:this.renameFile,sortField:I,sortType:L,attachOperaClick:this.handleAttachOperaClick,checkDuplicateFileName:A,showTitle:x,showAttachmentTips:V,uploadButtonPosition:F,expanedMore:N,afterUpload:this.afterUpload,permissionQuery:this.permissionQuery,getDisposableUrl:this.getDisposableUrl,validateData:d,showThumbnail:R,previewLimitSize:W,convertSize:B,isDragSort:Y},this.props.attachData))}}]),t}(l.default.Component),a.displayName="KDattachmentPanel",a);tt.displayName="KDattachmentPanel";t.default=(0,c.default)(p.default)(et)},290080:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(622676),r(233696),r(743924),r(205960),r(846428),r(708896),r(969e3),r(606200),r(534440),r(76152),r(670864),r(76124),r(880920),r(836887),r(78504),r(776512),r(997308),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(443616),r(323784),r(704180),r(297336),r(336368),r(387912),r(497448),r(633768),r(660824),r(86744);var o,i=P(r(795520)),a=r(891052),l=r(211152),u=r(439532),s=r(899760),c=r(559232),p=P(r(348896)),f=v(r(385384)),d=r(738704),y=r(290600),h=r(439532),g=r(886212),m=v(r(293500)),b=v(r(154924));function v(e){return e&&e.__esModule?e:{default:e}}function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(O=function(e){return e?r:t})(e)}function P(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=O(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_.apply(this,arguments)}function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){k(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e,t,r){return(t=E(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,E(n.key),n)}}function E(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function C(e,t,r){return t=M(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return D(e)}(e,T()?Reflect.construct(t,r||[],M(e).constructor):t.apply(e,r))}function T(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(T=function(){return!!e})()}function M(e){return M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},M(e)}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e,t){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},I(e,t)}var L=(0,p.default)(!0)(o=(0,p.ContainerLockWrap)(o=(0,f.default)(o=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=C(this,t,[e])).handlePanelScroll=function(e){var t=e.pageId,n=e.key;e.getMetaProperty("scrollBottom")&&!r.removeDataMessageListener&&(r.removeDataMessageListener=(0,d.addDataChangeListener)(t,["__panelScrollBottom__",n],(function(){setTimeout((function(){r.flexRef&&r.flexRef.handleScroll()}),100)}))),e.getMetaProperty("scrollTop")&&!r.removeDataMessageListenerOfScrollTop&&(r.removeDataMessageListenerOfScrollTop=(0,d.addDataChangeListener)(t,["__panelScrollTop__",n],(function(){setTimeout((function(){r.flexRef&&r.flexRef.handleScroll(!0)}),100)})))},r.getChildInstance=function(e){r.flexRef=e},r.computeBorderStyle=r.computeBorderStyle.bind(D(r)),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){this.handlePanelScroll(this.props.model)}},{key:"componentWillReceiveProps",value:function(e){this.handlePanelScroll(e.model)}},{key:"componentWillUnmount",value:function(){this.removeDataMessageListener&&this.removeDataMessageListener(),this.removeDataMessageListenerOfScrollTop&&this.removeDataMessageListenerOfScrollTop()}},{key:"handleClick",value:function(e){e.stopPropagation();var t=this.props,r=t.model,n=t.dispatch;this.props.getLocked(r)||n((0,s.click)(r,[]))}},{key:"computeBorderStyle",value:function(e){var t,r,n,o,i="transparent",a="transparent",l="transparent",u="transparent";if(null!==(t=e.borderBottom)&&void 0!==t&&t.includes("0.5px")){var s,c=null===(s=e.borderBottom)||void 0===s?void 0:s.split(" ");Array.isArray(c)&&3===c.length&&(i=c[2],delete e.borderBottom)}if(null!==(r=e.borderTop)&&void 0!==r&&r.includes("0.5px")){var p,f=null===(p=e.borderTop)||void 0===p?void 0:p.split(" ");Array.isArray(f)&&3===f.length&&(a=f[2],delete e.borderTop)}if(null!==(n=e.borderLeft)&&void 0!==n&&n.includes("0.5px")){var d,y=null===(d=e.borderLeft)||void 0===d?void 0:d.split(" ");Array.isArray(y)&&3===y.length&&(l=y[2],delete e.borderLeft)}if(null!==(o=e.borderRight)&&void 0!==o&&o.includes("0.5px")){var h,g=null===(h=e.borderRight)||void 0===h?void 0:h.split(" ");Array.isArray(g)&&3===g.length&&(u=g[2],delete e.borderRight)}var m=[i,a,l,u].some((function(e){return"transparent"!==e}));return{borderBottomColor:i,borderTopColor:a,borderLeftColor:l,borderRightColor:u,style:e,hasPointFiveBorder:m}}},{key:"render",value:function(){var e=this,t=this.props.model,r=(0,u.getCommonStyle)(t);r=Object.assign({},(0,u.getCommonStyle)(t),this.props.style);var n=t.getDataProperty("bgImg");if(n){if(!/^http(s)?/.test(n)){var o=t.getFormConfig(),s=o.fileserver,p=o.imageurl,f=t.pageId;n=(0,g.getImageUrl)({fileserver:s,imageurl:p,pageId:f},n)}r=Object.assign({},r,{backgroundImage:"url(".concat(n,")")})}var d=(0,u.getCommonClass)(t),v=(0,l.getGlobalState)(),O=(0,u.parseSubComponents)(t.meta.get("items",(0,a.List)()),t.pageId,v),P=t.getMetaProperty("clickable"),S=t.getMetaProperty("collapsible"),k=t.getMetaProperty("defaultcollapse"),j=t.getMetaProperty(y.TITLE_BACKGROUND_COLOR),E=(0,h.getComponentDataProperty)(t,"hidetitle","hidetitle",!1),C=t.getMetaLocaleProperty("text"),T=(0,h.getComponentDataProperty)(t,"flexabstract","flexabstract",!1),M=t.getMetaProperty("iconPosition")||"2";T=(0,u.getLangResult)(t,T);var D=i.default.createElement("div",{"data-slot":"tips","data-page-id":t.pageId,"data-ctrl-id":t.key,style:{display:"none"}}),I=this.computeBorderStyle(r),L=I.hasPointFiveBorder,A=I.borderBottomColor,x=I.borderTopColor,V=I.borderLeftColor,F=I.borderRightColor,N=I.style,R={"--borderBottomColor":A,"--borderTopColor":x,"--borderLeftColor":V,"--borderRightColor":F};return i.default.createElement(c.FlexPanel,_({model:t,id:t.key,pageId:t.pageId,style:w(w({},N),R),Collapsible:S,defaultCollapse:k,Name:C,TitleBackColor:j,HideTitle:E,FlexAbstract:T,getChildInstance:this.getChildInstance,handleClick:function(r){return P&&!e.props.getLocked(t)&&e.handleClick(r)},IconPosition:M,Slot:D,className:L?m.default["point-five-border"]:void 0},d,this.props.attachData),O,i.default.createElement(i.Suspense,{fallback:i.default.createElement(b.default,{delay:100})},i.default.Children.toArray((0,u.parseSubForms)(t.pageId,t.meta.get("id"),v))))}}])&&j(r.prototype,n),o&&j(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(i.Component))||o)||o)||o;t.default=L},443296:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(743924),r(205960),r(846428),r(336368),r(708896),r(606200),r(670864),r(880920),r(387912),r(836887),r(78504),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(297336),r(571176);var o,i=y(r(795520)),a=y(r(131944)),l=r(899760),u=r(439532),s=y(r(369396)),c=y(r(348896)),p=y(r(867860)),f=y(r(385384)),d=y(r(149236));function y(e){return e&&e.__esModule?e:{default:e}}function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},h.apply(this,arguments)}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,m(n.key),n)}}function m(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function b(e,t,r){return t=O(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,v()?Reflect.construct(t,r||[],O(e).constructor):t.apply(e,r))}function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(v=function(){return!!e})()}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}function P(e,t){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},P(e,t)}var _=(0,c.default)(!1)(o=(0,f.default)(o=(0,p.default)(o=(0,d.default)(o=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=b(this,t,[e])).state={},r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)}(t,e),r=t,(n=[{key:"componentWillMount",value:function(){var e=(0,u.getCommonStyle)(this.props.model);this.setState({style:{left:e.left,top:e.top},isInit:!0})}},{key:"render",value:function(){var e=this.props.model,t=this.props.isActivePage,r=e.getMetaProperty("disabled"),n=(0,u.getCommonStyle)(e);n=(0,u.getVisibleStyle)(n,(0,u.getVisible)(e));var o=e.getMetaProperty("fp")||7,l=e.getMetaProperty("btns")||1,s=parseInt(e.getMetaProperty("oh")||0),c=parseInt(e.getMetaProperty("ov")||0);return i.default.createElement(a.default,h({pageId:e.pageId,isActivePage:t,id:e.key||"",onTouchStart:this.onTouchStart.bind(this),onTouchMove:this.onTouchMove.bind(this),onClick:this.onBtnClidk.bind(this),style:n,top:this.state.style.top,left:this.state.style.left,disabled:r,location:o,isInit:this.state.isInit,ctrlState:l,offsetH:s,offsetV:c},this.props.attachData))}},{key:"onTouchStart",value:function(e){this.moved=!1;var t=e.targetTouches[0],r=s.default.findDOMNode(this);this.diffPos={disx:t.pageX-r.offsetLeft,disy:t.pageY-r.offsetTop,startX:t.pageX,startY:t.pageY}}},{key:"onTouchEnd",value:function(e){var t=this.props,r=t.model,n=t.dispatch,o=r.getMetaProperty("disabled");this.moved||o||n((0,l.click)(r))}},{key:"onBtnClidk",value:function(e){var t=this.props,r=t.model,n=t.dispatch;r.getMetaProperty("disabled")||n((0,l.click)(r))}},{key:"onTouchMove",value:function(e){var t=s.default.findDOMNode(this);if(!(e.touches.length>1||this.props.model.getMetaProperty("pd"))){var r=e.targetTouches[0],n=r.pageX-this.diffPos.disx,o=r.pageY-this.diffPos.disy,i=t.offsetWidth,a=t.offsetHeight,l=document.documentElement,u=l.clientWidth,c=l.clientHeight;n<0?n=0:n>u-i&&(n=u-i),o<0?o=0:o>c-a&&(o=c-a),this.moved=!0,this.setState({style:{left:n,top:o},isInit:!1})}}}])&&g(r.prototype,n),o&&g(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(i.default.Component))||o)||o)||o)||o;t.default=_},641944:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(622676),r(233696),r(743924),r(205960),r(297336),r(846428),r(336368),r(708896),r(969e3),r(606200),r(534440),r(76152),r(670864),r(76124),r(880920),r(387912),r(836887),r(78504),r(776512),r(997308),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(835164);var o,i,a=m(r(795520)),l=r(439532),u=m(r(348896)),s=r(389120),c=m(r(734664)),p=m(r(385384)),f=r(91012),d=r(290600),y=m(r(927576)),h=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(728277));function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}function m(e){return e&&e.__esModule?e:{default:e}}function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},b.apply(this,arguments)}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e,t,r){return(t=S(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,S(n.key),n)}}function S(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function w(e,t,r){return t=j(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,k()?Reflect.construct(t,r||[],j(e).constructor):t.apply(e,r))}function k(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(k=function(){return!!e})()}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},j(e)}function E(e,t){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},E(e,t)}var C=(o=(0,u.default)(!1),(0,p.default)(i=o(i=(0,y.default)(i=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=w(this,t,[e])).handleMouseDown=function(e){var t=r.props,n=t.model,o=t.activeRow;!1!==(0,l.getComponentDataProperty)(n,"clickable","clickable",!1)&&o&&(e.stopPropagation(),r.props.activeRow(!0),r.props.onClick(e))},r.handleClick=function(e,t){var n=r.props,o=n.model,i=n.dispatch,a=n.beforeClick,u=(0,l.getComponentDataProperty)(o,"clickable","clickable",!1);t||!1===u||(e.stopPropagation(),a&&a(e),(0,h.default)(O(O({},r.props),{},{click:function(){return i(s.click.apply(void 0,arguments))}})))},r.getStyleRowProperty=function(){var e=r.props,t=e.data,n=e.model,o=e.option;if(t&&o){var i=n.getMetaProperty("id"),a=o.get(d.CUSTOM_PROPERTY),l=t.get(a);return l&&l.get(i)}},r.handleRowDataProperty=function(e,t){return t.delete("text"),t.map((function(t,r){r in d.styleName&&(e[d.styleName[r]]=t)})),e},r.forAutoTestActions={click:s.click},r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(t,e),r=t,(n=[{key:"_getLock",value:function(e){return this.props.getCardLocked?this.props.getCardLocked(e):this.props.getLocked(e)}},{key:"_getVisible",value:function(e){return this.props.getCardVisible?this.props.getCardVisible(e):this.props.getVisible(e)}},{key:"render",value:function(){var e=this,t=this.props,r=t.model,n=t.isFromCardRow,o=t.fieldAction,i=t.loading,u=this._getVisible(r),s=(0,h.getRowIndex)(this.props),p=this._getLock(r),d=(0,l.getCommonStyle)(r),y=(0,l.getCommonClass)(r),g=y.Grow,m=y.Shrink,v=y.AlignSelf,O=(0,l.getComponentDataProperty)(r,"fontClass","fontClass",!1)||"kdfont kdfont-tianjia",P=(0,l.getComponentDataProperty)(r,"needHoverClass","needHoverClass",!1),_=(0,l.getComponentDataProperty)(r,"hoverClass","hoverClass",!1),S=(0,l.getComponentDataProperty)(r,"clickable","clickable",!1),w=n&&this.getStyleRowProperty();w&&(d=this.handleRowDataProperty(d,w));var k=r.getMetaProperty("id"),j=o&&o[k];if(j){var E=(0,l.getCardRulesResult)(j,u,p,d);u=E.visibility,p=E.disabled,d=E.style}return u?a.default.createElement(c.default,b({model:r,fontClass:O,needHoverClass:!1!==P,hoverClass:_,onMouseDown:this.handleMouseDown,handleClick:function(t){return e.handleClick(t,p)},clickable:S,locked:p,Grow:g,Shrink:m,AlignSelf:v,style:d,tips:(0,f.getTips)(r),loading:i,isFromCardRow:n,rowIndex:s},this.props.attachData)):a.default.createElement("div",{id:r?r.key+"_hide_control":"hide_control",style:{display:"none"}})}}])&&_(r.prototype,n),o&&_(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(a.default.Component))||i)||i)||i);t.default=C},316384:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(743924),r(205960),r(846428),r(336368),r(708896),r(606200),r(670864),r(880920),r(836887),r(78504),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(233696),r(297336),r(387912),r(633768);var o,i=y(r(795520)),a=y(r(747224)),l=y(r(562507)),u=r(439532),s=r(389120),c=y(r(730692)),p=r(290600),f=y(r(348896)),d=y(r(385384));function y(e){return e&&e.__esModule?e:{default:e}}function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},h.apply(this,arguments)}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,m(n.key),n)}}function m(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function b(e,t,r){return t=O(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return P(e)}(e,v()?Reflect.construct(t,r||[],O(e).constructor):t.apply(e,r))}function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(v=function(){return!!e})()}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_(e,t)}var S=(0,f.default)(!1)(o=(0,d.default)(o=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=b(this,t,[e])).state={isSelected:!1},["handleClick"].forEach((function(e){r[e]=r[e].bind(P(r))})),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}(t,e),r=t,(n=[{key:"handleClick",value:function(e){e.stopPropagation();var t=this.props,r=t.model,n=t.dispatch,o=t.getLocked,i=t.beforeClick;o(r)||(this.setState({isSelected:!this.state.isSelected}),i&&i(e),n((0,s.click)(r)))}},{key:"componentWillMount",value:function(){var e=this.props.model.getFormConfig();this._fileServer=e.fileserver}},{key:"render",value:function(){var e=this.props.model,t=(0,u.getCommonStyle)(e),r=(0,u.getCommonClass)(e),n=r.Grow,o=r.Shrink,a=r.AlignSelf,l=null!=e.getMetaProperty("imageZoom");if(!(0,u.getVisible)(e))return null;var s=(0,u.getComponentDataProperty)(e,"imageKey",p.IMAGE_KEY,!1),f=(0,u.getComponentDataProperty)(e,"bc","bc",!1),d=(0,u.getComponentDataProperty)(e,"text","text",!0);return s&&!/^http(s)*/.test(s)&&(s=(0,u.getImgFullPath)(this._fileServer,s)),i.default.createElement(c.default,h({imageZoom:l,clickable:!0,src:s,bgColor:f,name:d,isSelected:this.state.isSelected,onClick:this.handleClick,Grow:n,Shrink:o,AlignSelf:a,style:t},this.props.attachData))}}])&&g(r.prototype,n),o&&g(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(i.default.Component))||o)||o;t.default=(0,a.default)(l.default)(S)},411264:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(622676),r(233696),r(743924),r(205960),r(846428),r(336368),r(708896),r(969e3),r(606200),r(534440),r(76152),r(670864),r(76124),r(880920),r(387912),r(836887),r(78504),r(776512),r(997308),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(297336),r(321164);var o,i=b(r(795520)),a=r(899760),l=g(r(934408)),u=r(439532),s=r(290600),c=g(r(348896)),p=g(r(385384)),f=g(r(927576)),d=r(886212),y=b(r(728277)),h=r(633793);function g(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}function b(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=m(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},v.apply(this,arguments)}function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e,t,r){return(t=w(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,w(n.key),n)}}function w(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function k(e,t,r){return t=E(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return C(e)}(e,j()?Reflect.construct(t,r||[],E(e).constructor):t.apply(e,r))}function j(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(j=function(){return!!e})()}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e,t){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},T(e,t)}var M=(0,c.default)(!1,!0)(o=(0,p.default)(o=(0,f.default)(o=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=k(this,t,[e])).hasHoverEffect=function(){var e=r.getUrl((0,u.getComponentDataProperty)(r.props.model,"imageHoverKey",s.IMAGE_HOVER_KEY,!1));return e&&e.trim()?e:void 0},r.handleClick=r.handleClick.bind(C(r)),r.getUrl=r.getUrl.bind(C(r)),r.mouseOverHandler=r.mouseOverHandler.bind(C(r)),r.mouseLeaveHandler=r.mouseLeaveHandler.bind(C(r)),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T(e,t)}(t,e),r=t,n=[{key:"_getLock",value:function(e){return this.props.getCardLocked?this.props.getCardLocked(e):this.props.getLocked(e)}},{key:"_getVisible",value:function(e){return this.props.getCardVisible?this.props.getCardVisible(e):this.props.getVisible(e)}},{key:"handleClick",value:function(e){var t=this.props,r=t.model,n=t.dispatch,o=t.beforeClick,i=r.getMetaProperty("clickable");!this._getLock(r)&&i&&(e.stopPropagation(),o&&o(e),(0,h.interceptActionFn)(P(P({},this.props),{},{click:function(){return n(a.click.apply(void 0,arguments))}}),y.default))}},{key:"getUrl",value:function(e){var t=this.props.model,r=t.getFormConfig(),n=r.fileserver,o=r.imageurl,i=t.pageId;return(0,d.getImageUrl)({fileserver:n,imageurl:o,pageId:i},e)}},{key:"mouseOverHandler",value:function(e){var t=this.hasHoverEffect();t&&(e.currentTarget.src=t)}},{key:"mouseLeaveHandler",value:function(e){if(this.hasHoverEffect()){var t=this.getUrl((0,u.getComponentDataProperty)(this.props.model,"imageKey",s.IMAGE_KEY,!1));e.currentTarget.src=t}}},{key:"getRowImageKey",value:function(){var e=this.props,t=e.data,r=e.model,n=e.option;if(t&&n){var o=r.getMetaProperty("id"),i=n.get(s.CUSTOM_PROPERTY),a=t.get(i),l=a&&a.get(o);return l&&l.get("src")}}},{key:"componentWillMount",value:function(){var e=this.props.model.getFormConfig();this._fileServer=e.fileserver}},{key:"render",value:function(){var e=this,t=this.props,r=t.model,n=t.fieldAction,o=t.isFromCardRow,a=t.loading,c=void 0===a?{}:a,p=(0,y.getRowIndex)(this.props),f=(0,u.getCommonClass)(r),d=f.Grow,h=f.Shrink,g=f.AlignSelf,m=(0,u.getCommonStyle)(r),b=o&&this.getRowImageKey()||(0,u.getComponentDataProperty)(r,"imageKey",s.IMAGE_KEY,!1);b=this.getUrl(b);var O=(0,u.getComponentDataProperty)(r,"text","text",!0),P=this._getLock(r),_=this._getVisible(r),S=r.getMetaProperty("id"),w=n&&n[S];if(w){var k=(0,u.getCardRulesResult)(w,_,P,m);_=k.visibility,P=k.disabled,m=k.style}if(!_)return i.default.createElement("div",{id:r?r.key+"_hide_control":"hide_control",style:{display:"none"}});var j=r.getMetaProperty("clickable");return i.default.createElement(l.default,v({onClick:function(t){return e.handleClick(t)},Grow:d,Shrink:h,AlignSelf:g,style:m,id:r.key,url:b,name:O,clickable:j,onMouseOver:this.mouseOverHandler,onMouseLeave:this.mouseLeaveHandler},this.props.attachData,{model:r,dispatch:this.props.dispatch,disabled:P},this.props.attachData,{loading:c,isFromCardRow:o,rowIndex:p}))}}],n&&S(r.prototype,n),o&&S(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(i.Component))||o)||o)||o;t.default=M},579875:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(622676),r(233696),r(743924),r(205960),r(846428),r(708896),r(969e3),r(606200),r(534440),r(76152),r(670864),r(76124),r(880920),r(387912),r(836887),r(78504),r(776512),r(997308),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(835164),r(297336),r(336368);var o,i=g(r(795520)),a=r(439532),l=r(934296),u=r(899760),s=g(r(348896)),c=g(r(385384)),p=r(290600),f=g(r(927576)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(728277)),y=r(633793);function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}function g(e){return e&&e.__esModule?e:{default:e}}function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},m.apply(this,arguments)}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e,t,r){return(t=_(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_(n.key),n)}}function _(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function S(e,t,r){return t=k(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return j(e)}(e,w()?Reflect.construct(t,r||[],k(e).constructor):t.apply(e,r))}function w(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(w=function(){return!!e})()}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,t){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},E(e,t)}var C=(0,s.default)(!1,!0)(o=(0,c.default)(o=(0,f.default)(o=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=S(this,t,[e])).formatStyle=function(e){e.color&&(e.borderBottom=e.borderBottom||"1px solid ".concat(e.color),e.borderLeft=e.borderLeft||"1px solid ".concat(e.color),e.borderTop=e.borderTop||"1px solid ".concat(e.color),e.borderRight=e.borderRight||"1px solid ".concat(e.color))},r.getInitializeStyle=function(e,t){"2"===t&&(r.formatStyle(e),r.setState({blockLabelStyle:e}))},r.handleClick=r.handleClick.bind(j(r)),r.state={blockLabelStyle:""},r.forAutoTestActions={click:u.click},r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(t,e),r=t,n=[{key:"_getLocked",value:function(e){return this.props.getCardLocked?this.props.getCardLocked(e):this.props.isLocked}},{key:"_getVisible",value:function(e){return this.props.getCardVisible?this.props.getCardVisible(e):this.props.isVisible}},{key:"handleClick",value:function(e){var t=this.props,r=t.model,n=t.dispatch,o=t.beforeClick,i=this._getLocked(r),a=r.getMetaProperty("clickable");!i&&a&&(e.stopPropagation(),o&&o(e),(0,y.interceptActionFn)(v(v({},this.props),{},{click:function(){return n(u.click.apply(void 0,arguments))}}),d.default))}},{key:"getLabelRowProperty",value:function(){var e=this.props,t=e.data,r=e.model,n=e.option;if(t&&n){var o=r.getMetaProperty("id"),i=n.get(p.CUSTOM_PROPERTY),a=t.get(i);return a&&a.get(o)}}},{key:"handleRowDataProperty",value:function(e,t){return t.delete("text"),t.map((function(t,r){r in p.styleName&&(e[p.styleName[r]]=t)})),e}},{key:"handleLabelStyle",value:function(e){var t=(0,a.getCommonStyle)(e),r=e.getMetaProperty("labelstyle")||"1";this.getInitializeStyle(t,r)}},{key:"componentDidMount",value:function(){this.handleLabelStyle(this.props.model)}},{key:"componentWillReceiveProps",value:function(e){this.handleLabelStyle(e.model)}},{key:"render",value:function(){var e=this,t=this.props,r=t.model,n=t.fieldAction,o=t.isFromCardRow,u=t.loading,s=void 0===u?{}:u,c=(0,d.getRowIndex)(this.props),p=this.state.blockLabelStyle,f=r.getMetaProperty("labelstyle")||"1",y="2"===f&&p?p:(0,a.getCommonStyle)(r),h=(0,a.getCommonClass)(r),g=h.Grow,b=h.Shrink,v=h.AlignSelf,O=(0,a.getComponentDataProperty)(r,"text","caption",!0),P=o&&this.getLabelRowProperty();P&&(void 0!==P.get("text")&&(O=P.get("text")),y=this.handleRowDataProperty(y,P));var _=this.props.model.getMetaProperty("clickable"),S=this.props.model.getMetaProperty("atw"),w=this._getLocked(r),k=this._getVisible(r),j=r.getMetaProperty("id"),E=n&&n[j];if(E){var C=(0,a.getCardRulesResult)(E,k,w,y);k=C.visibility,w=C.disabled,y=C.style,void 0!==C.text&&(O=C.text)}var T=r.getMetaProperty("lh"),M=Object.assign({},y,{lineHeight:T});if(!k)return i.default.createElement("div",{id:r?r.key+"_hide_control":"hide_control",style:{display:"none"}});var D=i.default.createElement("div",{"data-slot":"tips","data-page-id":r.pageId,"data-ctrl-id":r.key,style:{display:"none"}});return i.default.createElement(l.Label,m({onClick:function(t){return e.handleClick(t)},Grow:g,Shrink:b,AlignSelf:v,id:r.key,style:M,text:O,clickable:_&&!w,disabled:w,autoTextWrap:S,labelStyle:f},this.props.attachData,{model:r,dispatch:this.props.dispatch,loading:s,isFromCardRow:o,rowIndex:c,Slot:D}))}}],n&&P(r.prototype,n),o&&P(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(i.default.Component))||o)||o)||o;t.default=C},211375:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(743924),r(205960),r(297336),r(846428),r(708896),r(606200),r(534440),r(670864),r(880920),r(836887),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(622676),r(336368),r(387912),r(497448);var o,i=g(r(795520)),a=r(891052),l=r(211152),u=r(439532),s=r(899760),c=r(316148),p=g(r(348896)),f=y(r(149236)),d=y(r(385384));function y(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}function g(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},m.apply(this,arguments)}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,v(n.key),n)}}function v(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function O(e,t,r){return t=_(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,P()?Reflect.construct(t,r||[],_(e).constructor):t.apply(e,r))}function P(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(P=function(){return!!e})()}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}function S(e,t){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},S(e,t)}var w=(0,p.default)(!0)(o=(0,p.ContainerLockWrap)(o=(0,d.default)(o=(0,f.default)(o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),O(this,t,arguments)}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(t,e),r=t,(n=[{key:"handleClick",value:function(e){e.stopPropagation();var t=this.props,r=t.model,n=t.dispatch;this.props.getLocked(r)||n((0,s.click)(r,[]))}},{key:"getItemVisible",value:function(e){return!this.props.getVisible||this.props.getVisible(e)}},{key:"render",value:function(){var e=this,t=this.props.model,r=(0,u.getCommonStyle)(t);r=Object.assign({},(0,u.getCommonStyle)(t),this.props.style);var n=(0,u.getCommonClass)(t),o=(0,l.getGlobalState)(),s=(0,u.parseSubComponents)(t.meta.get("items",(0,a.List)()),t.pageId,o);s=s.filter((function(t){return e.getItemVisible(t.props.model)}));var p=t.getMetaProperty("clickable");return i.default.createElement(c.LayoutFlex,m({id:t.key,style:r,handleClick:function(r){return p&&!e.props.getLocked(t)&&e.handleClick(r)}},n,this.props.attachData),s,i.default.Children.toArray((0,u.parseSubForms)(t.pageId,t.meta.get("id"),o)))}}])&&b(r.prototype,n),o&&b(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(i.Component))||o)||o)||o)||o;t.default=w},38240:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(743924),r(205960),r(846428),r(336368),r(708896),r(606200),r(670864),r(880920),r(836887),r(78504),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(9692),r(233696),r(835164),r(885612),r(693917),r(297336),r(387912),r(997308);var o,i,a,l=w(r(795520)),u=w(r(540900)),s=w(r(671252)),c=r(891052),p=r(211152),f=r(755988),d=r(290600),y=r(439532),h=r(994104),g=r(575392),m=w(r(959616)),b=w(r(329132)),v=w(r(255988)),O=w(r(348896)),P=w(r(385384)),_=r(331428),S=w(r(149236));function w(e){return e&&e.__esModule?e:{default:e}}function k(){return k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},k.apply(this,arguments)}function j(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,E(n.key),n)}}function E(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function C(e,t,r){return t=M(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return D(e)}(e,T()?Reflect.construct(t,r||[],M(e).constructor):t.apply(e,r))}function T(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(T=function(){return!!e})()}function M(e){return M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},M(e)}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e,t){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},I(e,t)}var L=(o=(0,O.default)(!1),(0,P.default)(i=o(i=(0,S.default)((a=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=C(this,t,[e]))._handleItemClick=function(){(0,r.props.dispatch)(g.handleItemClick.apply(void 0,arguments))},r.fieldClick=r.fieldClick.bind(D(r)),r.renderNoDate=r.renderNoDate.bind(D(r)),r.getItemModel=r.getItemModel.bind(D(r)),r.getDisplayNum=r.getDisplayNum.bind(D(r)),r.state={displayNum:r.props.model.getMetaProperty(d.DISPLAY_NUM)||1},r.activeItem=0,r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I(e,t)}(t,e),r=t,n=[{key:"componentWillMount",value:function(){}},{key:"fieldClick",value:function(e){var t=this.props,r=t.model;(0,t.dispatch)((0,h.invokeControlMethodOnly)(r,"carouselFieldClick",[e.rowKey,e.field]))}},{key:"setNormoalData",value:function(e){for(var t=e.getMetaProperty(d.DISPLAY_NUM)||1,r=(0,c.List)([]),n=0;n<t;n++){var o=(0,c.Map)();r=r.push(o)}return r}},{key:"reconstrutData",value:function(){var e=this.props.model;return(e.getDataProperty("value")||this.setNormoalData(e)).map((function(e,t){return(0,c.Map)({rowKey:t,data:e})}))}},{key:"recombineItems",value:function(e,t){var r=this.props.model,n=this.reconstrutData(),o=n.size;this.displayNum=t<=o?t:o;var i=n,a=r.getDataProperty("value"),l=a?a.size:1;return i=this.displayNum<=l?n.slice(-this.displayNum).concat(n.concat(n.slice(0,this.displayNum))):n.concat(n.slice(0,this.activeItem)),1!==e&&3!==e||(i=i.reverse()),i}},{key:"getItemModel",value:function(e){var t=this.props.model,r={};return e.forEach((function(e,n){var o=t.pageId,i=(0,p.getGlobalState)(),a=e.get("id");r[a]=new m.default(o,e,i)})),r}},{key:"renderNoDate",value:function(e,t){var r,n,o,i=(0,s.default)((r={},n=v.default.noData,o=!0,(n=E(n))in r?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,r),(0,b.default)(t));return l.default.createElement("div",{style:e,className:i},(0,_.getLangMsg)({key:"messageCarouselContainer.key0001"}))}},{key:"getDisplayNum",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.setState({displayNum:e}),this.activeItem=t}},{key:"render",value:function(){var e=this.props.model,t=e.getMetaProperty("items"),r=this.getItemModel(t),n=(0,y.getCommonStyle)(e),o=this.state.displayNum,i=e.getMetaProperty(d.PLAY_DIRECTION)||0,a=e.getMetaProperty(d.SHOW_DOTS)||!1,u=e.getMetaProperty(d.SPEED)||1e3,s=e.getMetaProperty(d.DELAY)||1e3,c=(0,y.getCommonClass)(e),p=this.recombineItems(i,o),h=e.getDataProperty("value");return!h||h.size<1?this.renderNoDate(n,c):(this.size=h.size,l.default.createElement(f.MessageCarouselContainer,k({style:n,displayNum:this.displayNum,playDirection:i,speed:u,showDots:a,delay:s,flexStyle:c,playItems:p,editOption:t,model:e,fieldClick:this.fieldClick,handleItemClick:this._handleItemClick,itemModel:r,getItemModel:this.getItemModel,size:h.size,getDisplayNum:this.getDisplayNum},this.props.attachData)))}}],n&&j(r.prototype,n),o&&j(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(l.default.Component),a.contextTypes={store:u.default.object},i=a))||i)||i)||i);t.default=L},691036:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(743924),r(205960),r(846428),r(336368),r(708896),r(606200),r(670864),r(880920),r(836887),r(78504),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(233696),r(297336),r(387912),r(571176),r(997308);var o,i=v(r(795520)),a=v(r(416024)),l=r(899760),u=r(970160),s=r(439532),c=v(r(369396)),p=v(r(348896)),f=v(r(867860)),d=v(r(385384)),y=v(r(88968)),h=v(r(671252)),g=r(891052),m=r(589200),b=v(r(149236));function v(e){return e&&e.__esModule?e:{default:e}}function O(){return O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},O.apply(this,arguments)}function P(e,t,r){return(t=k(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,k(n.key),n)}}function w(e,t,r){return t&&S(e.prototype,t),r&&S(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function k(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function j(e,t,r){return t=C(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return T(e)}(e,E()?Reflect.construct(t,r||[],C(e).constructor):t.apply(e,r))}function E(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(E=function(){return!!e})()}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D(e,t)}function D(e,t){return D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},D(e,t)}var I=(0,p.default)(!1)(o=(0,d.default)(o=(0,f.default)(o=(0,b.default)(o=function(e){function t(e){var r;return _(this,t),(r=j(this,t,[e])).state={show:!1,selected:!1},r.modifyShowed=r.modifyShowed.bind(T(r)),r.onDropDownClick=r.onDropDownClick.bind(T(r)),r.getLocked=r.getLocked.bind(T(r)),r.getVisible=r.getVisible.bind(T(r)),r.isPostClick=!0,r}return M(t,e),w(t,[{key:"componentWillMount",value:function(){var e=(0,s.getCommonStyle)(this.props.model);this.setState({style:{left:e.left,top:e.top},isInit:!0})}},{key:"onDropDownClick",value:function(e,t){this.setState({show:!this.state.show}),t=t||"";var r=this.props,n=r.model;(0,r.dispatch)((0,u.menuItemClick)(n,[e,t]))}},{key:"getVisible",value:function(e,t){var r=this.props.model;return void 0===t||(0,s.getVisible)(r,e,t)}},{key:"getLocked",value:function(e,t){var r=this.props.model;return void 0!==t&&(0,s.getLocked)(r,e,t)}},{key:"render",value:function(){var e=this,t=this.props.model,r=this.props.isActivePage,n=(0,s.getComponentDataProperty)(t,"items","items",!1),o=t.getMetaProperty("disabled"),l=(0,s.getCommonStyle)(t);l=(0,s.getVisibleStyle)(l,(0,s.getVisible)(t));var u=t.getMetaProperty("fp")||7,c=parseInt(t.getMetaProperty("oh")||0),p=parseInt(t.getMetaProperty("ov")||0),f=t.getUserLocale(),d=t.getDefaultLang(),y=t.getMetaProperty("id"),m=t.getMetaProperty("vi"),b=t.getMetaProperty("l"),v=t.getMetaProperty("sti"),_=(0,h.default)(P({},t.getMetaProperty("fontClass"),t.getMetaProperty("fontClass"))),S=[];n&&g.List.isList(n)&&n.forEach((function(t){var r={};r.key=t.get("key"),r.operationKey=t.get("operationKey"),r.background=t.get("background"),r.title=t.getIn(["title",f])||t.getIn(["title",d]),r.imageKey=t.get("imageKey"),r.vi=t.get("vi"),r.l=t.get("l"),e.getVisible(r.key,r.vi)&&S.push(r)})),this.isPostClick=!S.length;var w=this.getVisible(y,m),k=this.getLocked(y,b);return[S.length>0&&i.default.createElement(L,{key:"menuMaks",isActivePage:r,modifyShowed:this.modifyShowed,show:this.state.show}),w?i.default.createElement(a.default,O({key:t.getMetaProperty("id"),className:S.length?"":_,fileServer:t.getFormConfig().fileserver,ref:function(t){return e.floatMenu=t},pageId:t.pageId,items:S,isActivePage:r,id:t.getMetaProperty("id"),onTouchStart:this.onTouchStart.bind(this),onTouchMove:this.onTouchMove.bind(this),onClick:function(){return 1==k?null:e.onClick()},onTouchEnd:this.onTouchEnd.bind(this),style:l,top:this.state.style.top,left:this.state.style.left,bottom:this.state.style.bottom,disabled:o,location:u,isInit:this.state.isInit,offsetH:c,offsetV:p,topDt:this.state.topDt,show:this.state.show,onDropDownClick:this.onDropDownClick,getLocked:this.getLocked,name:t.getMetaLocaleProperty("text"),showTitle:v,selected:this.state.selected},this.props.attachData)):null]}},{key:"modifyShowed",value:function(){this.setState({show:!this.state.show})}},{key:"onTouchStart",value:function(e){this.setState({selected:!0}),this.moved=!1;var t=e.targetTouches[0],r=c.default.findDOMNode(this.floatMenu);this.diffPos={disx:t.pageX-r.offsetLeft,disy:t.pageY-r.offsetTop,startX:t.pageX,startY:t.pageY}}},{key:"onTouchEnd",value:function(e){this.setState({selected:!1});var t=this.props,r=t.model,n=t.dispatch,o=r.getMetaProperty("disabled");this.moved||o||!this.isPostClick||n((0,l.click)(r))}},{key:"onClick",value:function(e){this.setState({show:!this.state.show});var t=this.props,r=t.model,n=t.dispatch;!r.getMetaProperty("disabled")&&this.isPostClick&&n((0,l.click)(r))}},{key:"onTouchMove",value:function(e){var t=c.default.findDOMNode(this.floatMenu),r=!1,n=(0,m.isShowTopNav)();if(!(e.touches.length>1)&&!this.props.model.getMetaProperty("pd")){var o=e.targetTouches[0],i=o.pageX-this.diffPos.disx,a=o.pageY-this.diffPos.disy,l=t.offsetWidth,u=t.offsetHeight,s=document.documentElement,p=s.clientHeight,f=s.clientWidth;i<0?i=0:i>f-l&&(i=f-l);var d=0;n&&(d=55),a<d?a=d:a>p-u&&(a=p-u),this.moved=!0,o.pageY>p/2&&(r=!0);var y=p-a-u/2;this.setState({style:{left:i,top:a,bottom:y},isInit:!1,topDt:r})}}}]),t}(i.default.Component))||o)||o)||o)||o,L=function(e){function t(e){var r;return _(this,t),(r=j(this,t,[e])).maskOnclicked=r.maskOnclicked.bind(T(r)),r.state={show:!1},r}return M(t,e),w(t,[{key:"maskOnclicked",value:function(e){e.preventDefault(),this.props.modifyShowed&&this.props.modifyShowed()}},{key:"componentWillReceiveProps",value:function(e){this.setState({show:e.show})}},{key:"render",value:function(){var e=this.props.isActivePage,t=(0,h.default)(P(P({},y.default.mask,!0),y.default.zIndex1051,e)),r={display:this.state.show?"block":"none"},n=i.default.createElement("div",{style:r,className:t,onClick:this.maskOnclicked});return e?c.default.createPortal(n,document.body):n}}]),t}(i.default.Component);t.default=I},758904:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(505684),r(743924),r(693917),r(976896),r(297336),r(721300),r(336368),r(606200),r(534440),r(633768),r(690512),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.model,r=e.dispatch;(0,d.useControlInfoCollect)(t);var n=(0,p.getMTabBarDefaultActiveKey)(t),h=(C=(0,o.useState)(n),T=2,function(e){if(Array.isArray(e))return e}(C)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(C,T)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,t):void 0}}(C,T)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),g=h[0],v=h[1],O=(0,o.useMemo)((function(){return(0,p.getMTabBarData)(t)}),[t]),P=(0,f.default)({model:t}),_=(0,o.useCallback)((function(e){v(e);var n=t.getMetaProperty("items").find((function(t){return t.get("id")===e})),o=n.get("type"),a=n.get("associatedForm");if("mtabbarform"===o&&a){var l=t.pageId,u=(0,i.getGlobalState)(),p=(0,s.getControlSubForms)(l,e)(u),f={formId:a.get("formId"),formNumber:a.get("formNumber"),type:a.get("type"),targetKey:e};p.length>0?(f.pageId=p[0],r((0,c.activeForm)(t,f))):r((0,c.showForm)(t,f))}}),[t]),S=(0,o.useMemo)((function(){return t.getMetaProperty("items").map((function(e){return[e.get("id"),(0,u.default)(t.pageId,e,(0,i.getGlobalState)())]}))}),[t]),w=(0,p.getCommonClass)(t),k=(0,p.getCommonStyle)(t),j=(0,p.getComponentDataProperty)(t,"itemDefaultColor","itemDefaultColor",!1),E=(0,p.getComponentDataProperty)(t,"itemActiveColor","itemActiveColor",!1);var C,T;return o.default.createElement("div",m({className:y.default.root},P),o.default.createElement(l.default,{cards:S,activeKey:g}),o.default.createElement(a.default,{className:w,style:k,tabs:O,activeKey:g,onChange:_,itemDefaultColor:j,itemActiveColor:E}))},r(305092),r(323784),r(835164),r(387912);var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(795520)),i=r(211152),a=h(r(688908)),l=h(r(320076)),u=h(r(720756)),s=r(218652),c=r(589208),p=r(439532),f=h(r(412244)),d=r(149236),y=h(r(162468));function h(e){return e&&e.__esModule?e:{default:e}}function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},m.apply(this,arguments)}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}},947608:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(743924),r(297336),r(336368),r(606200),r(534440),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.className,r=e.style,n=e.model,p=(0,u.default)({model:n}),f=n.pageId,y=n.meta,h=n.key,g=(0,i.getGlobalState)(),m=o.default.Children.toArray((0,a.parseSubForms)(f,y.get("id"),g)),b=(0,l.getControlSubForms)(f,h)(g)[0]||"",v="".concat(c.default["tabbar-form"]," ").concat(t);return o.default.createElement("div",d({style:r,className:v,"data-tabbarformpageid":b},p),o.default.createElement(o.Suspense,{fallback:o.default.createElement(s.default,{delay:100})},m))},r(9692),r(387912),r(497448);var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(795520)),i=r(211152),a=r(439532),l=r(218652),u=p(r(412244)),s=p(r(154924)),c=p(r(162468));function p(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d.apply(this,arguments)}},269960:function(e,t,r){"use strict";r(182320),r(241872),r(297336),r(606200),r(76124),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.style,r=e.className,s=e.model,p=(0,l.default)({model:s}),f=s.meta,d=s.pageId,y=(0,o.getGlobalState)(),h=Object.assign({},(0,i.getCommonStyle)(s),t),g=(h.fontWeight,function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(h,u)),m=(0,a.default)((0,i.getCommonClass)(s));return n.default.createElement("div",c({style:g,className:"".concat(r," ").concat(m)},p),(0,i.parseSubComponents)(f.get("items"),d,y),n.default.Children.toArray((0,i.parseSubForms)(s.pageId,f.get("id"),y)))},r(9692),r(336368),r(387912),r(497448);var n=s(r(795520)),o=r(211152),i=r(439532),a=s(r(329132)),l=s(r(412244)),u=["fontWeight"];function s(e){return e&&e.__esModule?e:{default:e}}function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c.apply(this,arguments)}},353992:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(622676),r(743924),r(205960),r(846428),r(708896),r(969e3),r(606200),r(534440),r(76152),r(670864),r(76124),r(880920),r(836887),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(9692),r(233696),r(835164),r(704180),r(297336),r(336368),r(387912),r(997308);var o,i,a=C(r(795520)),l=r(211152),u=r(439532),s=C(r(720756)),c=C(r(261168)),p=r(899760),f=E(r(348896)),d=C(r(867860)),y=C(r(385384)),h=r(559744),g=C(r(113940)),m=r(633793),b=E(r(728277)),v=r(738704),O=r(654500),P=r(802012),_=r(970160),S=r(674260),w=r(868256),k=C(r(299868));function j(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(j=function(e){return e?r:t})(e)}function E(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=j(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}function C(e){return e&&e.__esModule?e:{default:e}}function T(){return T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},T.apply(this,arguments)}function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach((function(t){I(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function I(e,t,r){return(t=A(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,A(n.key),n)}}function A(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function x(e,t,r){return t=F(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return N(e)}(e,V()?Reflect.construct(t,r||[],F(e).constructor):t.apply(e,r))}function V(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(V=function(){return!!e})()}function F(e){return F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},F(e)}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e,t){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},R(e,t)}t.default=(0,f.default)(!1)(o=(0,f.ContainerLockWrap)(o=(0,y.default)(o=(0,d.default)((i=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=x(this,t,[e])).getToolbarItemLoading=function(){return r.getToolbarItemLoadingStatus()},r.getToolbarItemLoadingStatus=function(){var e=r.props.isFromCardRow,t=(0,b.getRowIndex)(r.props),n=r.props.model.pageId,o=[];return r.toolbarItemKeys.forEach((function(e){var t=(0,v.getPageData)(n,["".concat(n,"_").concat(e,"_click")]),r=(0,v.getPageData)(n,["".concat(n,"_").concat(e,"_itemClick")]);t&&o.push(t),r&&o.push(r)})),o.some((function(r){var n,o=r.value,i=r.rowIndex;if(o===O.AJAX_PENDING){var a={showLoading:!0,rowKey:i};n=Object.assign({},a)}else{var l={showLoading:!1,rowKey:i};n=Object.assign({},l)}return(0,P.isShowLoading)(n,e,t)}))},r.handleClick=function(e){var t=r.props.beforeClick;t&&t(),(0,m.interceptActionFn)(D(D({},e),{},{click:function(){return r.props.dispatch(p.click.apply(void 0,arguments))}}),b.default)},r.fetchData=function(e,t){var n=r.props.model;t=t||"",r.props.dispatch((0,_.menuItemClick)(n,[e,t]))},r.setRef=function(e){r.ele=e},r.handleClick=r.handleClick.bind(N(r)),r.getVisible=r.getVisible.bind(N(r)),r.getLocked=r.getLocked.bind(N(r)),r.onDropDownClick=r.onDropDownClick.bind(N(r)),r.toolbarItemKeys=[],r.memoDisplayValue=null,r.toolbarVisibility=r.toolbarVisibility.bind(N(r)),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R(e,t)}(t,e),r=t,(n=[{key:"onDropDownClick",value:function(e,t,r){var n=this.props,o=n.model,i=n.beforeClick;o.key=e,r=r||"",i&&i(),this.props.menuItemClick(this.props.model,[t,r])}},{key:"getVisible",value:function(e,t){var r=this.props.model;return!this.props.getVisible||this.props.getVisible(r,e,t)}},{key:"getLocked",value:function(e,t){var r=this.props.model;return!!this.props.getLocked&&this.props.getLocked(r,e,t)}},{key:"componentDidMount",value:function(){var e=this.props.model.getFormConfig(),t=this.context||{};this.props.isActivePage||t.isActivePage,this._fileServer=e.fileserver,this.collectItemsKey(this.props),this.removeListener=(0,S.addDataChangeListener)(w.KEY_SOFT_KEYBOARD_POP,this.toolbarVisibility)}},{key:"toolbarVisibility",value:function(e){var t=this.props.model,r=this.context||{};2===(t.getMetaProperty("position")||1)&&(this.props.isActivePage||r.isActivePage)&&(e?(null===this.memoDisplayValue&&(this.memoDisplayValue=this.ele.style.display||""),this.ele.style.display="none"):(this.ele.style.display=this.memoDisplayValue,this.memoDisplayValue=null))}},{key:"collectItemsKey",value:function(e){var t=e.model.getMetaProperty("items"),r=[];t&&t.forEach((function(e,t){var n=e.get("id");r.push(n)})),this.toolbarItemKeys=r}},{key:"componentWillUnmount",value:function(){this.toolbarItemKeys=null,this.removeListener&&this.removeListener()}},{key:"render",value:function(){var e=this,t=this.props,r=t.model,n=t.isFromCardRow,o=t.fieldAction,i=t.data,p=t.option,f=t.rowKey,d=t.beforeClick,y=t.getCardLocked,h=t.getCardVisible,m=r.getMetaProperty("items");if(!m||0===m.size)return null;var b=(0,u.getCommonStyle)(r),v=r.getMetaProperty("position")||1,O=r.getMetaProperty("itemStyle")||1,P=r.getMetaProperty("textStyle"),_=r.getMetaProperty("mobcustomtoolbar");return a.default.createElement(a.default.Fragment,null,_&&a.default.createElement("div",{className:k.default.placeholderComponent,style:b}),a.default.createElement(g.default,{ele:this.ele},(function(t){var u=e.context||{},g=(e.props.isActivePage||u.isActivePage)&&!t&&!u.hidden;return a.default.createElement(c.default,T({setRef:e.setRef,isActivePage:g,id:r.key,style:b,position:v,itemStyle:O,textStyle:P,pageId:r.pageId},e.props.attachData),m.map((function(t,u){var c=(0,s.default)(r.pageId,t,(0,l.getGlobalState)());return a.default.cloneElement(c,{key:u,itemStyle:O,click:e.handleClick,beforeClick:d,position:v,fieldAction:o,isFromCardRow:n,data:i,option:p,rowKey:f,getToolbarItemLoading:e.getToolbarItemLoading,mobcustomtoolbar:_,fetchData:e.fetchData,getCardLocked:y,getCardVisible:h})})))})))}}])&&L(r.prototype,n),o&&L(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(a.default.Component),i.contextType=h.PageContext,o=i))||o)||o)||o)||o},723208:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(205960),r(846428),r(336368),r(708896),r(606200),r(670864),r(880920),r(836887),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(233696),r(743924),r(297336),r(70472),r(387912),r(78504),r(997308),r(977864);var o,i,a=P(r(795520)),l=P(r(540900)),u=r(439532),s=P(r(329132)),c=P(r(450364)),p=r(970160),f=r(290600),d=r(891052),y=P(r(348896)),h=P(r(385384)),g=P(r(956788)),m=P(r(927576)),b=r(886212),v=r(728277),O=r(510372);function P(e){return e&&e.__esModule?e:{default:e}}function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_.apply(this,arguments)}function S(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,w(n.key),n)}}function w(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function k(e,t,r){return t=E(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return C(e)}(e,j()?Reflect.construct(t,r||[],E(e).constructor):t.apply(e,r))}function j(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(j=function(){return!!e})()}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e,t){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},T(e,t)}var M=(0,y.default)(!1)(o=(0,g.default)()(o=(0,h.default)(o=(0,m.default)((i=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=k(this,t,[e])).handleClick=function(e,t){var n=r.props,o=n.mobcustomtoolbar,i=n.fetchData,a=n.model;if(!t){e.stopPropagation();var l=r.props,u=l.click;if(!(0,l.getToolbarItemLoading)())if(o){var s=a.getMetaProperty("opk"),c=a.getMetaProperty("id");i&&i(c,s)}else u&&u(r.props)}},r.getVisible=r.getVisible.bind(C(r)),r.getLocked=r.getLocked.bind(C(r)),r.onDropDownClick=r.onDropDownClick.bind(C(r)),r.getUrl=r.getUrl.bind(C(r)),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T(e,t)}(t,e),r=t,(n=[{key:"componentWillMount",value:function(){var e=this.props.model.getFormConfig();this._fileServer=e.fileserver}},{key:"onDropDownClick",value:function(e,t){var r=this.props,n=r.mobcustomtoolbar,o=r.fetchData;t=t||"";var i=this.props,a=i.model,l=i.dispatch;(0,i.getToolbarItemLoading)()||(n?o&&o(e,t):l((0,p.menuItemClick)(a,[e,t])))}},{key:"getVisible",value:function(e,t){var r=this.props.model;return this.props.getCardVisible?this.props.getCardVisible(r):!this.props.getVisible||this.props.getVisible(r,e,t)}},{key:"getLocked",value:function(e,t){var r=this.props.model;return this.props.getCardLocked?this.props.getCardLocked(r):!!this.props.getLocked&&this.props.getLocked(r,e,t)}},{key:"getUrl",value:function(e){var t=this.props.model.getFormConfig(),r=t.fileserver,n=t.imageurl,o=this.props.model.pageId;return(0,b.getImageUrl)({fileserver:r,imageurl:n,pageId:o},e)}},{key:"render",value:function(){var e=this,t=this.props,r=t.model,n=t.itemStyle,o=t.textStyle,i=t.position,l=t.toolbarLoading,p=void 0===l?{}:l,y=t.isFromCardRow,h=t.fieldAction,g=t.data,m=t.option,b=t.getToolbarItemLoading,P=t.beforeClick,S=r.getUserLocale(),w=r.meta||new Map,k=(0,v.getRowIndex)(this.props),j=(0,u.getCommonStyle)(r),E=r.getMetaLocaleProperty("text"),C=this.getUrl(w.get(f.IMAGE_KEY)),T=w.get("vectorIcon"),M=w.get("imgWidth"),D=w.get("imgHeight"),I=w.get("id"),L=w.get("vi"),A=w.get("l"),x=w.get("items"),V=[];x&&d.List.isList(x)&&x.forEach((function(t){var r={};r.key=t.get("key"),r.opk=t.get("operationKey"),r.background=t.get("background"),r.title=t.getIn(["title",S]),r.img=e.getUrl(t.get("imageKey")),r.vi=t.get("vi"),r.l=t.get("l"),e.getVisible(r.key)&&V.push(r)}));var F=this.getVisible(I,L),N=this.getLocked(I,A),R=y&&(0,O.getControlRowProperty)({data:g,model:r,option:m});R&&(void 0!==R.get("text")&&(E=R.get("text")),j=(0,O.mergeCustomStyle)(j,R));var W=h&&h[I];if(W){var B=(0,u.getCardRulesResult)(W,F,N,j);F=B.visibility,N=B.disabled,j=B.style,void 0!==B.text&&(E=B.text)}if(!F)return a.default.createElement("div",{id:r?r.key+"_hide_control":"hide_control",style:{display:"none"}});var U=(0,u.getCommonClass)(r),Y=U.Grow,H=U.Shrink,G=(0,s.default)({Grow:Y,Shrink:H});return a.default.createElement(c.default,_({className:G,name:E,key:I,id:I,itemStyle:n,textStyle:o,style:j,onDropDownClick:this.onDropDownClick,onClick:function(t){return e.handleClick(t,N)},beforeClick:P,imageKey:C,dropDownItems:V,getVisible:this.getVisible,getLocked:this.getLocked,position:i,imageWidth:M,imageHeight:D,toolbarLoading:p,isFromCardRow:y,rowIndex:k,locked:N,getToolbarItemLoading:b,fontIcon:T},this.props.attachData))}}])&&S(r.prototype,n),o&&S(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(a.default.Component),i.contextTypes={store:l.default.object},o=i))||o)||o)||o)||o;t.default=M},113376:function(e,t,r){"use strict";r(182320),r(241872),r(297336),r(336368),r(606200),r(76124),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(795520)),o=a(r(448116)),i=["style","value","readOnly","noValue"];function a(e){return e&&e.__esModule?e:{default:e}}function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l.apply(this,arguments)}function u(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}t.default=function(e){var t=e.style,r=e.value,a=e.readOnly,s=e.noValue,c=u(e,i);return n.default.createElement("div",l({className:o.default.address,style:t},c),n.default.createElement("div",{className:o.default.content,style:{textAlign:(null==t?void 0:t.textAlign)||"right"}},r),a?r?null:s:n.default.createElement("div",{className:o.default.icon},n.default.createElement("i",{className:"kdfont kdfont-jinru"})))}},537228:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(241872),r(743924),r(205960),r(846428),r(336368),r(708896),r(606200),r(534440),r(670864),r(76124),r(387912),r(836887),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(297336),r(880920);var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(795520)),i=u(r(540900)),a=u(r(658384)),l=["model","option","style","value","inputStyle"];function u(e){return e&&e.__esModule?e:{default:e}}function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c.apply(this,arguments)}function p(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,d(n.key),n)}}function d(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function y(e,t,r){return t=g(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,h()?Reflect.construct(t,r||[],g(e).constructor):t.apply(e,r))}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(h=function(){return!!e})()}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}var b=t.default=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),y(this,t,arguments)}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this.props,t=e.model,r=e.option,n=e.style,i=e.value,u=e.inputStyle,s=p(e,l),f=t.getMetaLocaleProperty("caption"),d=r.get("s")||0;return o.default.createElement(a.default,c({style:n,value:!!i,text:f,showStyle:d,inputStyle:u},s))}}])&&f(r.prototype,n),i&&f(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(o.Component);b.propTypes={model:i.default.object.isRequired,option:i.default.object.isRequired,style:i.default.object.isRequired}},968924:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(241872),r(743924),r(205960),r(846428),r(336368),r(708896),r(606200),r(670864),r(76124),r(836887),r(78504),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FlexibleContext=void 0,r(9692),r(835164),r(297336),r(880920),r(387912),r(497448);var o=h(r(795520)),i=h(r(316148)),a=r(891052),l=h(r(720756)),u=r(439532),s=r(442560),c=h(r(601680)),p=r(218652),f=h(r(213352)),d=h(r(671252)),y=["caption","value","style","model","locked","showTitle","mobFieldStyle","formStatus","isVisible"];function h(e){return e&&e.__esModule?e:{default:e}}function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},g.apply(this,arguments)}function m(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,v(n.key),n)}}function v(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function O(e,t,r){return t=_(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,P()?Reflect.construct(t,r||[],_(e).constructor):t.apply(e,r))}function P(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(P=function(){return!!e})()}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}function S(e,t){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},S(e,t)}var w=t.FlexibleContext=o.default.createContext(),k=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=O(this,t,[].concat(n))).flexibleTextChange=function(t,r){var n=e.props.model.pageId;e.props.dispatch((0,p.convertAppModelFunctionAction)((0,p.setMobileFlexFieldValue)(n,t,r)))},e}var r,n,h;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this,t=this.props,r=t.caption,n=t.value,p=void 0===n?(0,a.List)([]):n,h=t.style,b=t.model,v=t.locked,O=t.showTitle,P=t.mobFieldStyle,_=t.formStatus,S=t.isVisible,k=m(t,y),j=b.state,E={background:"#FAFAFA"},C=(0,s.getFlexFieldMeta)(p,b.componentData,void 0),T=C.flexFieldItems,M=(T=C.matched?T:(0,a.List)([])).map((function(t,r){var n=t.setIn(["item","mfp"],0===P?0:1);return v&&(n=n.set("l",63)),o.default.createElement(w.Provider,{value:p&&p.get(r)&&p.get(r).get("v"),key:r},(0,l.default)(b.pageId,n,j,void 0,{style:E,className:(0,d.default)(f.default["flex-field-item"]),flexibleTextChange:e.flexibleTextChange}))})),D=(0,s.getFlexFieldItemsTitle)(b,T),I=(0,s.getValue)(p,D),L=b&&b.getMetaProperty("mi"),A=0===P?"flexfield":"flexfield-CT";return o.default.createElement(c.default,g({},k,{id:b.key,title:r,style:h,showTitle:O,value:I,lock:v,required:L,flexfieldCls:A,formStatus:_,isVisible:S}),o.default.createElement(i.default,null,M,o.default.Children.toArray((0,u.parseSubForms)(b.pageId,b.meta.get("id"),j))))}}])&&b(r.prototype,n),h&&b(r,h),Object.defineProperty(r,"prototype",{writable:!1}),t}(o.default.Component);t.default=k},697176:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(622676),r(233696),r(505684),r(743924),r(693917),r(205960),r(976896),r(846428),r(969e3),r(606200),r(534440),r(76152),r(76124),r(387912),r(633768),r(690512),r(78504),r(776512),r(997308),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(323784),r(721300);var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=O(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(795520)),i=v(r(671252)),a=r(891052),l=r(674260),u=r(868256),s=r(545072),c=r(290600),p=r(439532),f=r(249936),d=v(r(720056)),y=r(358524),h=v(r(348584)),g=v(r(747325)),m=r(653224),b=r(358524);function v(e){return e&&e.__esModule?e:{default:e}}function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(O=function(e){return e?r:t})(e)}function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e,t,r){var o;return o=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==n(o)?o:String(o))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var j={la:0,lo:0,ad:""};t.default=function(e){var t=e.isAutoPosition,r=void 0===t||t,n=e.isLocked,v=e.model,O=e.updateModel,P=w((0,o.useState)(null),2),k=P[0],E=P[1],C=(0,o.useRef)();(0,o.useEffect)((function(){if(r&&!n){f.locationService.getLocation((function(e){if(e){var t=e.longitude,r=e.latitude,n=(0,b.getMapConfig)().mapService;if(g.default.isYzj&&(n===m.BaiduMap||n===m.DefaultMap)){var o=w((0,y.gcj02ToBD09)(t,r),2);t=o[0],r=o[1]}var i={la:r,lo:t,ad:e.address,mapData:_(_({},e),{},{name:e.address})};C.current={la:e.latitude,lo:e.longitude},O&&O(i)}}),1e4,!1)}}),[]),(0,o.useEffect)((function(){var e=v.getDataValue()?v.getDataValue():(0,a.Map)(j);E(e)}),[v]);var T=function(e){if(e){var t={la:null==e?void 0:e.la,lo:null==e?void 0:e.lo,ad:(null==e?void 0:e.name)||"",mapData:{address:null==e?void 0:e.address,city:null==e?void 0:e.city,province:null==e?void 0:e.province,district:null==e?void 0:e.district,name:null==e?void 0:e.name,id:null==e?void 0:e.id,formattedAddress:null==e?void 0:e.formattedAddress}};O&&O(t)}},M=function(){(0,d.default)("selectLocation",{data:{latitude:C.current.la,longitude:C.current.lo,isLocation:!1,isFullMap:!1},callback:function(e){var t={la:e.latitude,lo:e.longitude,ad:"",mapData:_(_({},e),{},{title:e.address})};O&&O(t)},failCallback:function(e){}})},D="v"===v.getMetaProperty([c.ITEM,c.LABEL_DIRECTION]),I=(0,i.default)(S(S({},h.default["cell-container"],!D),h.default["cell-container-vertical"],D)),L=(0,i.default)(h.default.content,S({},h.default["content-label"],!0)),A=(0,i.default)("kdfont kdfont-dizhidingwei",h.default["location-icon"]),x=((0,i.default)(h.default.title,S({},h.default.readOnly,n)),(0,p.getCommonStyle)(v)),V=k?k.getIn(["mapData","name"])||k.get("ad",""):"";return o.default.createElement("div",{className:h.default["geo-field-container"],style:x},o.default.createElement("div",{className:I,onClick:function(e){if(!n){var t=(0,p.getComponentDataProperty)(v,"useApp","useApp",!1);if(g.default.isYzj&&!0===t)M();else{var r=(0,p.getComponentDataProperty)(v,"poiType","poiType",!1)||"",o=(0,p.getComponentDataProperty)(v,"radius","radius",!1)||500,i=v.getUserLocale();(0,l.setData)(u.KEY_SHOW_CLIENT_PAGE,{type:s.SHOW_MAP_SELECTOR,data:{selectPoi:T,position:k.toJS(),radius:o,poiType:r,locale:i}})}}}},o.default.createElement("div",{className:h.default.detail},o.default.createElement("div",{className:L},V),o.default.createElement("i",{className:A}))))}},755988:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(622676),r(241872),r(743924),r(205960),r(846428),r(708896),r(969e3),r(606200),r(534440),r(76152),r(670864),r(76124),r(880920),r(836887),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.MessageCarouselContainer=t.CarouselItem=void 0,r(9692),r(233696),r(505684),r(835164),r(693917),r(297336),r(336368),r(387912),r(78504),r(997308),r(86744);var o,i=v(r(795520)),a=v(r(671252)),l=v(r(255988)),u=r(891052),s=v(r(329132)),c=r(439532),p=r(934296),f=v(r(139224)),d=v(r(734664)),y=v(r(859688)),h=v(r(559232)),g=r(937648),m=["width","height"],b=["Grow","Shrink","AlignSelf"];function v(e){return e&&e.__esModule?e:{default:e}}function O(){return O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},O.apply(this,arguments)}function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){w(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function w(e,t,r){return(t=C(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,C(n.key),n)}}function E(e,t,r){return t&&j(e.prototype,t),r&&j(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function C(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function T(e,t,r){return t=D(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return I(e)}(e,M()?Reflect.construct(t,r||[],D(e).constructor):t.apply(e,r))}function M(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(M=function(){return!!e})()}function D(e){return D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},D(e)}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A(e,t)}function A(e,t){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},A(e,t)}(t.MessageCarouselContainer=(0,g.AlloyFingerWrap)(o=function(e){function t(e){var r;return k(this,t),(r=T(this,t,[e])).resizeWindow=function(e){if(!e.hide){r.absoluteDom.style.width=e.width+"px",r.absoluteDom.style.height=e.height+"px",r.setState({itemWidth:e.width,itemHeight:e.height});var t,n=r.carouselPanel,o=r.props.playDirection;0===o||1===o?t=r.verticalPlay(r.activeItem,o,!1):2!==o&&3!==o||(t=r.horizontalPlay(r.activeItem,o,!1)),Object.assign(n.style,t)}},r.state={isAutoPlay:!0,itemHeight:null,itemWidth:null,sizeCalculated:!1,activeIndex:0,animating:!1,swiperSpeed:null},r.visible=!0,r.activeItem=0,r.displayNum=e.displayNum,r.speed=e.speed/1e3,r.autoPlay=r.autoPlay.bind(I(r)),r.stateByMouse=!0,r.setPositionItem=!1,r}return L(t,e),E(t,[{key:"componentDidMount",value:function(){var e=0,t=0,r=this.carouselPanel.children;r&&r.forEach((function(r){var n=r.offsetHeight,o=r.offsetWidth;n>e&&(e=n),o>t&&(t=o)}));var n=this.carouselPanel,o=n.clientWidth,i=n.clientHeight;this.absoluteDom.style.cssText=";width: ".concat(o,"px;height: ").concat(i,"px;");var a=this.props.playDirection;0===a||1===a?(this.setPositionItem=!0,this.setState({itemHeight:e,sizeCalculated:!0})):2!==a&&3!==a||(this.setPositionItem=!0,this.setState({itemWidth:t,sizeCalculated:!0})),this.resizeObserver=(0,f.default)(this.carouselContainer,this.resizeWindow)}},{key:"setDisplayNum",value:function(e){e>this.props.size?this.stopAni():this.state.isAutoPlay||this.setState({isAutoPlay:!0}),this.props.getDisplayNum&&this.props.getDisplayNum(e,this.activeItem)}},{key:"componentDidUpdate",value:function(){if(this.props.size>=this.props.displayNum&&!0===this.setPositionItem){var e=null,t=this.carouselPanel,r=this.props.playDirection;0===r||1===r?e=this.verticalPlay(this.activeItem,r,!1):2!==r&&3!==r||(e=this.horizontalPlay(this.activeItem,r,!1)),Object.assign(t.style,e),this.setPositionItem=!1}this.state.isAutoPlay&&this.autoPlay()}},{key:"componentWillUnmount",value:function(){window.clearTimeout(this.timer)}},{key:"autoPlay",value:function(){var e=this,t=this.props,r=t.playItems,n=t.displayNum;if(!(r.size-1<=n)){window.clearTimeout(this.timer);var o=this.props.delay;this.timer=window.setTimeout((function(){e.isHandMove||e.toNextItem()}),o)}}},{key:"toNextItem",value:function(e){var t=this.carouselPanel,r=this.props.playDirection;this.activeItem=void 0===e?this.activeItem+1:e;var n=null;0===r||1===r?n=this.verticalPlay(this.activeItem,r,!0):2!==r&&3!==r||(n=this.horizontalPlay(this.activeItem,r,!0)),Object.assign(t.style,n),this.setState({activeIndex:this.activeItem,animating:!0}),window.clearTimeout(this.timer)}},{key:"horizontalPlay",value:function(e,t,r){var n=this.carouselContainer.clientWidth,o=Math.pow(-1,t+1)*((e+this.props.displayNum)*n),i=this.speed;return{transform:"translate3d(".concat(o,"px,0px,0px)"),backfaceVisibility:"hidden",transition:r?"all "+i+"s linear":"none"}}},{key:"verticalPlay",value:function(e,t,r){var n=this.state.itemHeight,o=Math.pow(-1,t+1)*((e+this.props.displayNum)*n),i=this.speed;return{transform:"translateY("+o+"px)",transition:r?"all "+i+"s linear":"none",backfaceVisibility:"hidden"}}},{key:"handleTransitionEnd",value:function(e){var t=this.props,r=t.playDirection,n=t.size;if(this.activeItem>=n||this.activeItem<=-1){this.activeItem>=n?(this.activeItem=0,this.setState({activeIndex:0,animating:!1,swiperSpeed:null})):this.activeItem<=-1&&(this.activeItem=n-1,this.setState({activeIndex:this.activeItem,animating:!1,swiperSpeed:null}));var o=null;0===r||1===r?o=this.verticalPlay(this.activeItem,r,!1):2!==r&&3!==r||(o=this.horizontalPlay(this.activeItem,r,!1)),Object.assign(this.carouselPanel.style,o)}this.state.isAutoPlay&&this.autoPlay()}},{key:"stopAni",value:function(){window.clearTimeout(this.timer),this.setState({isAutoPlay:!1})}},{key:"handleMouseEnter",value:function(e){this.state.isAutoPlay?this.stopAni():this.stateByMouse=!1}},{key:"handleMouseLeave",value:function(e){var t=this;this.stateByMouse?this.state.isAutoPlay||this.setState({isAutoPlay:!0},(function(){t.autoPlay()})):this.stateByMouse=!0}},{key:"handleClickDot",value:function(e){this.props.displayNum>=this.props.size||this.toNextItem(e)}},{key:"generateDot",value:function(){var e=this,t=this.props.size,r=void 0===t?0:t;return r<=4?Array.from({length:r},(function(t,r){var n=(0,a.default)(w(w({},l.default.dot,!0),l.default.active,r===e.state.activeIndex));return i.default.createElement("li",{key:r,className:n,onClick:function(){e.handleClickDot(r)}})})):i.default.createElement(V,{currentIndex:this.state.activeIndex,itemLength:r,speed:this.state.swiperSpeed||this.props.speed,animating:this.state.animating,playDirection:this.props.playDirection})}},{key:"onTouchStart",value:function(e){this.lastOffset=Math.pow(-1,this.props.playDirection+1)*(this.state.activeIndex+this.props.displayNum)*this.state.itemWidth,this.finalOffset=0}},{key:"onPressMove",value:function(e){if(0!==this.props.playDirection&&1!==this.props.playDirection){this.isHandMove=!0,this.stopAni(),this.isMove=!0,this.finalOffset=e.deltaX+this.finalOffset;var t="translate3d(".concat(this.lastOffset+this.finalOffset,"px, 0px, 0px)");this.carouselPanel.style.transition="none",this.carouselPanel.style.transform=t,this.carouselPanel.style.webkitTransform=t,this.carouselPanel.style.mozTransform=t,Math.abs(this.finalOffset)<40&&(this.isMove=!1),Math.abs(e.deltaY)>40&&(this.isMove=!1)}}},{key:"onSwipe",value:function(e){var t=this;if(0!==this.props.playDirection&&1!==this.props.playDirection){var r,n=!0;if(e.distance<30){var o="translate3d(".concat(this.lastOffset,"px, 0px, 0px)");return this.carouselPanel.style.transition="all 0.1s ease-in-out",this.carouselPanel.style.transform=o,this.carouselPanel.style.webkitTransform=o,this.carouselPanel.style.mozTransform=o,this.isHandMove=!1,void this.autoPlay()}r=this.finalOffset<0?this.lastOffset+-1*this.state.itemWidth:this.lastOffset+1*this.state.itemWidth;var i="translate3d(".concat(r,"px, 0px, 0px)");this.carouselPanel.style.transition="all 0.1s ease-in-out",this.carouselPanel.style.transform=i,this.carouselPanel.style.webkitTransform=i,this.carouselPanel.style.mozTransform=i,setTimeout((function(){if(t.finalOffset<0){t.activeItem=t.activeItem+1,t.activeItem===t.props.size&&(t.activeItem=0,n=!1);var e=null;2!==t.props.playDirection&&3!==t.props.playDirection||(e=t.horizontalPlay(t.activeItem,t.props.playDirection,!1)),Object.assign(t.carouselPanel.style,e),t.setState({activeIndex:t.activeItem,animating:n,isAutoPlay:!0,swiperSpeed:150},(function(){t.isHandMove=!1}))}else{t.activeItem=t.activeItem-1,-1===t.activeItem&&(t.activeItem=t.props.size-1,n=!1);var r=null;2!==t.props.playDirection&&3!==t.props.playDirection||(r=t.horizontalPlay(t.activeItem,t.props.playDirection,!1)),Object.assign(t.carouselPanel.style,r),t.setState({activeIndex:t.activeItem,animating:n,isAutoPlay:!0,swiperSpeed:150},(function(){t.isHandMove=!1}))}}),150)}}},{key:"onTouchEnd",value:function(e){var t=this;if(0!==this.props.playDirection&&1!==this.props.playDirection&&!this.isMove){var r="translate3d(".concat(this.lastOffset,"px, 0px, 0px)");return this.carouselPanel.style.transition="all 0.1s ease-in-out",this.carouselPanel.style.transform=r,void this.setState({isAutoPlay:!0},(function(){t.isHandMove=!1,t.autoPlay()}))}}},{key:"renderItem",value:function(){var e=this.props,t=e.playItems,r=e.editOption,n=e.style,o=e.flexStyle,a=e.model,l=e.displayNum,u=e.fieldClick,s=e.itemModel,c=e.getItemModel,p=e.handleItemClick,f=this.state,d=f.itemWidth,y=f.itemHeight,h=(n.width,n.height,S(n,m)),g=(o.Grow,o.Shrink,o.AlignSelf,S(o,b)),v=t;return this.state.sizeCalculated||(v=t.slice(0,l)),v.map((function(e,t){var n=e.get("rowKey");return i.default.createElement(x,{key:t,model:a,itemData:e,style:_({},h),itemWidth:d,itemHeight:y,flexStyle:_({},g),editOption:r,fieldClick:u,rowKey:n,itemModel:s,getItemModel:c,handleItemClick:p})}))}},{key:"render",value:function(){var e=this,t=this.renderItem(),r=this.props,n=r.playDirection,o=r.style,u=r.flexStyle,c=r.showDots,p=r.size,f={Grow:u.Grow,Shrink:u.Shrink,AlignSelf:u.AlignSelf},d={width:o.width,height:o.height},y=(0,a.default)(w({},l.default.carouselDisplay,!0),(0,s.default)(f)),h=(0,a.default)(w(w(w(w({},l.default.absoluteContainer,!0),l.default.slideToBottom,1===n),l.default.slideToLeft,2===n),l.default.slideToRight,3===n)),g=(0,a.default)(w(w({},l.default.indicationContainer,!0),l.default.barType,p>4)),m={"data-custom-style":this.props["data-custom-style"],"data-page-id":this.props["data-page-id"]};return i.default.createElement("div",O({ref:function(t){return e.carouselContainer=t},style:d,className:y,onMouseEnter:function(t){return e.handleMouseEnter(t)},onMouseLeave:function(t){return e.handleMouseLeave(t)}},m),i.default.createElement("div",{ref:function(t){return e.absoluteDom=t},className:h},i.default.createElement("div",{ref:function(t){return e.carouselPanel=t},className:l.default.carouselPanel,onTransitionEnd:function(t){return e.handleTransitionEnd(t)}},t)),c&&i.default.createElement("div",{className:g},i.default.createElement("ul",{className:l.default.dotsContainer},this.generateDot())))}}]),t}(i.default.Component))||o).propTypes={};var x=t.CarouselItem=function(e){function t(e){return k(this,t),T(this,t,[e])}return L(t,e),E(t,[{key:"componentDidMount",value:function(){}},{key:"renderChild",value:function(e){var t=this,r=this.props,n=r.itemData,o=r.editOption,i=(r.model,r.style),a=r.itemModel,l=r.getItemModel;o=e||o,a=e?l(e):a;var s=o.map((function(e,r){var o=e.get("type"),l=e.get("id"),s=e.get("items"),c=n.getIn(["data",l])||(0,u.Map)(),p={};null===c&&(p=void 0===i.flexDirection?{height:"0px"}:{width:"0px"});var f=null;if(!1===c.get("visible"))return null;switch(o){case"label":return f=a[l],t.renderLabel(r,c,f,p);case"button":return f=a[l],t.renderButton(r,c,f,p);case"vector":return f=a[l],t.renderVector(r,c,f,p);case"image":return f=a[l],t.renderImage(r,c,f,p);case"messagecarouselflexpanel":return f=a[l],t.renderFlexpanel(r,c,f,s)}}));return s}},{key:"renderFlexpanel",value:function(e,t,r,n){if(!(0,c.getVisible)(r))return null;var o=(0,c.getCommonStyle)(r),a=(0,c.getCommonClass)(r);return i.default.createElement(h.default,O({key:e},a,{style:o}),n.size?this.renderChild(n):null)}},{key:"renderVector",value:function(e,t,r,n){var o=r.key;if(!(0,c.getVisible)(r))return null;var a=(0,c.getCommonStyle)(r),l=(0,c.getCommonClass)(r),u=l.Grow,s=l.Shrink,p=l.AlignSelf,f=(0,c.getComponentDataProperty)(r,"fontClass")||"kdfont kdfont-tianjia",y=t?t.get("fontClass"):f,h=this.props,g=h.fieldClick,m=h.rowKey,b=function(e){e.stopPropagation(),g({rowKey:m,field:o})};return i.default.createElement(d.default,{key:e,fontClass:y,handleClick:function(e){return b(e)},Grow:u,Shrink:s,AlignSelf:p,onClick:function(e){return b(e)},style:a})}},{key:"renderImage",value:function(e,t,r,n){var o,a=r.key,l=(0,c.getCommonClass)(r),u=l.Grow,s=l.Shrink,f=l.AlignSelf,d=(0,c.getCommonStyle)(r),h=r.getFormConfig().fileserver,g=(0,c.getComponentDataProperty)(r,"imageKey","imageKey",!1);g=t&&t.get("imageKey"),g=(o=g)&&h?(0,c.getImgFullPath)(h,o):o;var m=t?t.get("name"):(0,c.getComponentDataProperty)(r,"text","text",!0),b=r.getMetaProperty("clickable"),v=this.props,O=v.fieldClick,P=v.rowKey;return i.default.createElement(p.Image,{key:e,Grow:u,Shrink:s,AlignSelf:f,style:d,id:a,url:g||y.default,name:m,clickable:b,onClick:function(e){return function(e){b&&(e.stopPropagation(),O({rowKey:P,field:a}))}(e)}})}},{key:"renderButton",value:function(e,t,r,n){var o=r.key,a=t?t.get("text"):(0,c.getComponentDataProperty)(r,"text","text",!0),l=Object.assign({},(0,c.getCommonStyle)(r),n),u=(0,c.getCommonClass)(r),s=u.Grow,f=u.Shrink,d=u.AlignSelf,y=r.getMetaProperty("btns"),h=(0,c.getComponentDataProperty)(r,"imageKey","imageKey",!1),g=r.getFormConfig();h=(0,c.getImgFullPath)(g.fileserver,h);var m=(0,c.hasSetBorder)(l),b=(0,c.getComponentDataProperty)(r,"imagePath","imagePath",!1),v=this.props,O=v.fieldClick,P=v.rowKey;return i.default.createElement(p.Button,w(w(w(w(w({Grow:s,Shrink:f,AlignSelf:d,key:e,id:o,style:l,text:a},"key",e),"ButtonStyle",y),"ImageKey",b||h),"hasBorder",m),"onClick",(function(e){return function(e){e.stopPropagation(),O({rowKey:P,field:o})}(e)})))}},{key:"renderLabel",value:function(e,t,r,n){var o=r.key,a=Object.assign({},(0,c.getCommonStyle)(r),n),l=(0,c.getCommonClass)(r),u=l.Grow,s=l.Shrink,f=l.AlignSelf,d=t?t.get("text"):"",y=r.getMetaProperty("clickable"),h=r.getMetaProperty("atw"),g=this.props,m=g.fieldClick,b=g.rowKey;return i.default.createElement(p.Label,w(w(w(w(w(w({Grow:u,Shrink:s,AlignSelf:f,key:e,id:o},"key",e),"style",a),"text",d),"clickable",y),"autoTextWrap",h),"onClick",(function(e){return function(e){y&&(e.stopPropagation(),m({rowKey:b,field:o}))}(e)})))}},{key:"handleClickItem",value:function(e){var t=this.props,r=t.rowKey,n=t.model,o=t.handleItemClick;o&&o(n,[r])}},{key:"render",value:function(){var e=this,t=this.props,r=t.flexStyle,n=t.style,o=t.itemWidth,u=t.itemHeight,c=n;(o||u)&&(c=Object.assign({},n,{width:o+"px",height:u+"px"}));var p=(0,a.default)(w({},l.default.listContainer,!0),(0,s.default)(r)),f=this.renderChild();return i.default.createElement("div",{className:p,style:c,onClick:function(t){e.handleClickItem(t)}},f)}}]),t}(i.default.Component),V=function(e){var t=e.currentIndex,r=e.itemLength,n=e.animating,o=e.speed,a=(e.playDirection,i.default.useRef(null)),u=a.current?a.current:{parentNode:{}},s=t,c=(u.parentNode.offsetWidth-u.offsetWidth)/(r-1)*s,p={transform:"translate3d(".concat(c,"px,0px,0px)"),transition:n?"all ".concat(o/1e3,"s ease-in-out"):"none",display:t===r?"none":"block"};return i.default.createElement("div",{className:l.default["scroll-bar"]},i.default.createElement("div",{ref:a,style:p,className:l.default["scroll-dot"]}))}},769608:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(241872),r(743924),r(205960),r(846428),r(336368),r(708896),r(606200),r(534440),r(670864),r(76124),r(387912),r(836887),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(297336),r(286620),r(880920);var o,i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(795520)),a=(o=r(540900))&&o.__esModule?o:{default:o},l=r(934296),u=r(290600),s=r(218652),c=["isNoUnderLineLockStyle","model","option","style","value","onBlur","placeholder","maxLength","showTitle","isGroupLocked","disabled"];function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f.apply(this,arguments)}function d(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function h(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function g(e,t,r){return t=b(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,m()?Reflect.construct(t,r||[],b(e).constructor):t.apply(e,r))}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(m=function(){return!!e})()}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}var O=t.default=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),g(this,t,arguments)}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e,t,r=this.props,n=(r.isNoUnderLineLockStyle,r.model),o=r.option,a=r.style,p=(r.value,r.onBlur,r.placeholder,r.maxLength,r.showTitle,r.isGroupLocked),y=r.disabled,h=d(r,c),g=n.getMetaLocaleProperty("caption"),m=o.get(u.GROUP),b=o.get(u.VALUE);if(b=null==b?"":b,m){var v=(0,s.getDataValue)(n.pageId,m)(n.state),O=(0,s.getItemMeta)(n.pageId,m)(n.state);if(!O)return console.error("按钮组或按钮组所在容器不可见，请把按钮组或按钮组所在容器设为可见"),i.default.createElement("span",null);(Object.is(v,null)||""===v)&&(v=O.getIn(["item",u.VALUE])),e=Object.is(v,b),t=O.getIn(["item",u.FIELD_STYLE])}return i.default.createElement(l.Radio,f({style:a,text:g,group:m,checked:e,value:b},h,{disabled:p||y,fieldStyle:t}))}}])&&y(r.prototype,n),o&&y(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(i.Component);O.propTypes={model:a.default.object.isRequired,option:a.default.object.isRequired,style:a.default.object.isRequired}},600152:function(e,t,r){"use strict";r(697060),r(505684),r(241872),r(323784),r(743924),r(693917),r(976896),r(297336),r(721300),r(336368),r(708896),r(606200),r(670864),r(76124),r(880920),r(836887),r(633768),r(690512),r(78504),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.isViewStatus=t.default=void 0,r(182320),r(909112),r(360776),r(835164),r(205960),r(846428),r(387912);var n=c(r(795520)),o=c(r(813540)),i=r(290600),a=r(218652),l=r(439532),u=r(414460),s=["option","model","readOnly","value","style","formStatus"];function c(e){return e&&e.__esModule?e:{default:e}}function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f.apply(this,arguments)}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function h(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_(n.key),n)}}function m(e,t,r){return t=v(t),function(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,b()?Reflect.construct(t,r||[],v(e).constructor):t.apply(e,r))}function b(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(b=function(){return!!e})()}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function O(e,t){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},O(e,t)}function P(e,t,r){return(t=_(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==p(t)?t:String(t)}var S=9999999999999.99;var w=t.isViewStatus=function(e){var t=e.formStatus,r=e.mobFieldStyle;return(0,l.isViewModel)(t)&&r===u.MOB_FIELD_STYLE_MAIN};t.default=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),m(this,t,arguments)}var r,u,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}(t,e),r=t,(u=[{key:"render",value:function(){var e=this.props,t=e.option,r=e.model,u=e.readOnly,c=e.value,p=e.style,y=e.formStatus,g=h(e,s),m=t.get(i.NUM_TYPE),b=t.get(i.SCALE),v=t&&t.get("stepvalue")||1,O=t&&t.get("mobstepperstyle")||0,_=t&&t.get("stepperpattern")||0,k=r.state,j=r.pageId,E=(0,a.getSourceFiledInfoById)(j,t.get(i.SOURCE_FIELD))(k),C=E&&function(e,t){var r=e[i.CURRENY_SYMBOL],n=e[i.CURRENY_CODE],o=e[i.IS_SHOW_SIGN];return{symbol:r,code:n,precision:P(P(P({},i.NUMBER_TYPE_PRICE,e[i.PRICE_PRECISION]),i.NUMBER_TYPE_AMOUNT,e[i.AMOUNT_PRECISION]),i.NUMBER_TYPE_QUANTITY,e[i.QUANTITY_PRECISION])[t],visible:o}}(E,m)||{},T=C.symbol,M=C.code,D=C.precision,I=void 0===D?b:D,L=C.visible,A=d([i.MASK,i.DISPLAY_FORMAT,i.MIN_VALUE,i.MIN_MARK,i.MAX_MARK,i.ZERO_SHOW,i.NO_DISPLAY_SCALE_ZERO,i.ROUND_METHOD].map((function(e){return t.get(e)})),8),x=A[0],V=A[1],F=A[2],N=A[3],R=A[4],W=(A[5],A[6]),B=A[7],U=c;1===O&&(F<0&&(F=0,N="["),U<0&&(U=0));var Y=Math.min(t.get(i.MAX_VALUE,S),S),H=(0,l.getCommonStyle)(r),G=w({formStatus:y,mobFieldStyle:this.props.mobFieldStyle});return n.default.createElement(o.default,f({readOnly:u,value:U,style:1===_?H:p,digitLength:t.get(i.PRECISION),decimalLength:I,showSymbol:L,code:M,symbol:T,mask:x,displayFormat:V,min:F,max:Y,minMark:N,maxMark:R,noDisplayDecimalTailZero:W,roundMethod:B||"0",stepValue:v,stepperStyle:O,stepperPattern:_,zeroShow:!0,viewStatus:G},g))}}])&&g(r.prototype,u),c&&g(r,c),Object.defineProperty(r,"prototype",{writable:!1}),t}(n.default.Component)},961224:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(743924),r(205960),r(846428),r(336368),r(708896),r(606200),r(534440),r(670864),r(387912),r(836887),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(297336),r(76124),r(880920);var o,i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=y(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(795520)),a=(o=r(961432))&&o.__esModule?o:{default:o},l=r(674260),u=r(868256),s=r(738704),c=r(545072),p=r(607416),f=r(290600),d=r(891052);function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(y=function(e){return e?r:t})(e)}function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},h.apply(this,arguments)}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,m(n.key),n)}}function m(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function b(e,t,r){return t=O(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return P(e)}(e,v()?Reflect.construct(t,r||[],O(e).constructor):t.apply(e,r))}function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(v=function(){return!!e})()}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_(e,t)}var S=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=b(this,t,[e])).selectCountry=function(e){var t=r.props.model;(0,s.setPageData)(t.pageId,[t.key,c.TELEPHONE_COUNTRY],e)},r.setData=r.setData.bind(P(r)),r.state={viaList:void 0},r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.getTelViaList,r=e.model;(0,l.getData)(u.KEY_COUNTRU_VIA_DATA)||(0,p.delayInvokeControlMethod)(r.pageId,(function(){t&&t(r)})),this.unbindDataChangeListener=(0,l.addDataChangeListener)(u.KEY_COUNTRU_VIA_DATA,this.setData)}},{key:"componentWillUnmount",value:function(){this.unbindDataChangeListener&&this.unbindDataChangeListener();var e=this.props.model;(0,s.deletePageData)(e.pageId,[e.key,c.TELEPHONE_COUNTRY])}},{key:"setData",value:function(e,t){this.setState({viaList:e})}},{key:"render",value:function(){var e=this.state.viaList,t=void 0===e?(0,l.getData)(u.KEY_COUNTRU_VIA_DATA)||{}:e,r=(this.props.model.getMetaProperty("item")||(0,d.Map)()).get(f.OPRN_SEPARATOR)||!1;return i.default.createElement(a.default,h({},this.props,{viaList:t,letters:Object.keys(t)||[],selectCountry:this.selectCountry,openSeparator:r}))}}])&&g(r.prototype,n),o&&g(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(i.Component);t.default=S},802720:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(743924),r(205960),r(846428),r(708896),r(606200),r(534440),r(670864),r(387912),r(836887),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(297336),r(286620),r(880920),r(571176),r(633768),r(513640),r(321164);var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=y(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(795520)),i=d(r(671252)),a=d(r(790832)),l=r(211152),u=r(218652),s=d(r(720056)),c=d(r(992216)),p=r(557024),f=d(r(32332));function d(e){return e&&e.__esModule?e:{default:e}}function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(y=function(e){return e?r:t})(e)}function h(e,t,r){return(t=m(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,m(n.key),n)}}function m(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function b(e,t,r){return t=O(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return P(e)}(e,v()?Reflect.construct(t,r||[],O(e).constructor):t.apply(e,r))}function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(v=function(){return!!e})()}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_(e,t)}t.default=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=b(this,t,[e])).getIsFoldMode=function(){var e=r.props,t=e.lock,n=e.type,o=e.showLine,i=void 0===o?"":o;return"textarea"===n&&t&&(null==i?void 0:i.length)&&"0"!==i},r.getComponentByType=function(){var e=r.props,t=e.value,n=e.style,l=e.lock,u=e.mobFieldStyle,s=e.type,d=e.showLine,y=e.noValue,g=void 0===y?"":y,m=e.lockEmptyTips,b=r.getIsFoldMode(),v=l?"":r.props.placeholder||"",O=(0,i.default)(h(h(h(h(h({},f.default["voice-textarea-not-editing"],0===u),f.default["voice-textarea-not-editing-CT"],1===u),f.default["voice-textarea-not-editing-color"],a.default.isEmpty(t)&&!l),f.default["fold-textarea"],b&&l),f.default.placeholder,""===t&&(""!==v||""!==m))),P=(0,i.default)(h(h(h({},f.default["voice-value"],!0),f.default["input-placeholder"],!0),f.default.placeholder,""===t&&""!==m));l&&""===t&&(t=m||g);var _="";if("textarea"===s){var S=t||"";_=(S=(S=(0,c.default)(S))&&S.replace(/(\r\n)|(\n)|(\r)/g,"<br />"))?S.replace(/(\t)/g,'<span style="padding-left: 2em"></span>'):v}var w=null!=d&&d.length?d:"0";return{text:l?o.default.createElement("div",{style:n,className:P},t):o.default.createElement("input",{style:n,className:(0,i.default)(f.default["voice-value"],f.default["input-placeholder"]),placeholder:v,title:t,value:t,onChange:function(e){e.target.value=t},readOnly:l}),textarea:b?o.default.createElement("div",{className:f.default["textarea-container"]},o.default.createElement(p.TextareaWithFoldBtn,{textareaStyle:n,textareaClassname:O,html:_,lineControl:w})):o.default.createElement("div",{style:n,className:O,dangerouslySetInnerHTML:{__html:_}}),localeText:o.default.createElement("span",{style:n,className:(0,i.default)(f.default["voice-textarea-not-editing"],f.default["input-placeholder"])},t||v)}},r.voiceSupport=r.voiceSupport.bind(P(r)),r.handleTouch=r.handleTouch.bind(P(r)),r.contentHandler=r.contentHandler.bind(P(r)),r}var r,n,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){this.voiceIcon&&this.voiceIcon.addEventListener("click",this.handleTouch,{passive:!0})}},{key:"componentWillUnmount",value:function(){this.voiceIcon&&this.voiceIcon.removeEventListener("click",this.handleTouch,{passive:!0})}},{key:"voiceSupport",value:function(){var e,t=this.props,r=t.yzjvi,n=t.lock;return!(!r||n)&&((0,s.default)("getQingVersion",{callback:function(t){e=t}}),window.parseInt(e)>=9)}},{key:"contentHandler",value:function(){var e=this.props,t=e.voiceInputChange,r=e.model,n=e.value,o=r.pageId,i=r.key;return{text:function(e){var r=e.text;if(!Object.is(r,null)&&!Object.is(r,void 0)&&!Object.is(r.trim(),"")){var n=r.charAt(r.length-1);/[\u3002|\uff1f|\uff01|\uff0c|\u3001|\uff1b|\uff1a|\u201c|\u201d|\u2018|\u2019|\uff08|\uff09|\u300a|\u300b|\u3008|\u3009|\u3010|\u3011|\u300e|\u300f|\u300c|\u300d|\ufe43|\ufe44|\u3014|\u3015|\u2026|\u2014|\uff5e|\ufe4f|\uffe5]/.test(n)&&(r=r.substring(0,r.length-1))}t&&t(r),r&&(0,u.setFieldPostValue)(o,i,r)((0,l.getGlobalState)())},textarea:function(e){var o=e.text,i=n+o;t&&t(i),i&&(0,u.setFieldPostValue)(r.pageId,r.key,i)((0,l.getGlobalState)())}}}},{key:"handleTouch",value:function(e){e.stopPropagation();var t=this.props.type;(0,s.default)("voiceInput",{callback:this.contentHandler()[t]})}},{key:"render",value:function(){var e=this,t=this.props,r=t.type,n=t.value,a=t.validateDataHide,l=t.caption;if(this.voiceSupport()){var u="请输入".concat(l),s=(0,i.default)(f.default["validate-msg-".concat(r)],f.default.mustInput);return o.default.createElement("div",{className:(0,i.default)(f.default["voice-div"],h({},f.default["fold-div"],this.getIsFoldMode()))},a?this.getComponentByType()[r]:o.default.createElement("span",{className:s},n||u),o.default.createElement("span",{ref:function(t){e.voiceIcon=t},className:(0,i.default)("kdfont kdfont-yuyinshuru",f.default["voice-icon"])}))}return this.getComponentByType()[r]}}])&&g(r.prototype,n),d&&g(r,d),Object.defineProperty(r,"prototype",{writable:!1}),t}(o.Component)},182828:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.TOOLTIP_INTERCEPT_PASS=void 0;t.TOOLTIP_INTERCEPT_PASS="__tooltip_intercept_pass__"},113940:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.ele,r=e.children,n=(0,o.default)(t);return r(n)};var n,o=(n=r(799616))&&n.__esModule?n:{default:n}},799616:function(e,t,r){"use strict";r(182320),r(909112),r(697060),r(505684),r(743924),r(693917),r(976896),r(721300),r(606200),r(690512),r(78504),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(u=(0,o.useState)((function(){return l(e)})),s=2,function(e){if(Array.isArray(e))return e}(u)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(u,s)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(u,s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=t[0],n=t[1];var u,s;return(0,o.useEffect)((function(){if(e){var t=(0,i.default)((function(t){if(t.find((function(e){return"class"===(t=e).attributeName&&(t.target.classList.contains("hidden")||t.oldValue&&t.oldValue.split(/\s+/).includes("hidden"));var t}))){var r=l(e);n(r)}}));return function(){t()}}}),[e]),r},r(305092),r(443616),r(323784),r(387912),r(633768),r(660824),r(328640);var n,o=r(795520),i=(n=r(203824))&&n.__esModule?n:{default:n};function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(e){var t=!1,r=e&&e.parentNode;if(!r)return t;do{t=r.classList&&r.classList.contains("hidden"),r=r.parentNode}while(!t&&r);return!!t}},203824:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return a=a.push(e),function(){a=a.filterNot((function(t){return t===e}))}},r(233696),r(387912),r(997308);var n=r(891052),o=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,i=!!o,a=(0,n.List)();if(i){new o((function(e){a.forEach((function(t){t(e)}))})).observe(document,{attributeFilter:["class","data-custom"],childList:!1,attributes:!0,characterData:!1,subtree:!0,attributeOldValue:!0,characterDataOldValue:!1})}},213872:function(e,t,r){e.exports=r(251656)(283)},77240:function(e,t,r){e.exports=r(251656)(8375)}}]);