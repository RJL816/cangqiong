"use strict";(self["webpackJsonp_bos-platform"]=self["webpackJsonp_bos-platform"]||[]).push([[2528],{219704:function(e,t,n){n.r(t),t.default={"notification-wrapper":"lf97sdNN"}},824192:function(e,t,n){n.r(t),t.default={"warning-color":"_2ELUiGgC","error-color":"aSZCAawv","success-color":"_3GPU_8X4","warning-bg-color":"_3esuD_Jh","error-bg-color":"_3cBCi23l","success-bg-color":"_3dtrkNmg","move-up-in":"YMm8IDwe",MessageMoveIn:"_12VD9pEN","move-up-leave":"_3_eHrPov",MessageMoveOut:"_1aur_SEV",notification:"_1WRD65d2","move-top-animation":"v87k1cv0","button-div":"_1-bfpZA-","no-close-button":"bZnmLEWP","has-close-button":"_2lmzoxiq","notification-content":"_3LqVN1S6",icon:"_23YtVsDd",content:"_2Pzu1rwx","close-icon":"CWK7Ad2-","icon-success":"_25pT-q0f","icon-error":"_3EotGM6F","icon-warning":"_2nNyGvM2",feedback:"fMoO9gDo"}},572528:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n(182320),n(909112),n(697060),n(360776),n(505684),n(743924),n(693917),n(205960),n(721300),n(846428),n(969e3),n(606200),n(534440),n(76152),n(76124),n(633768),n(78504),n(776512),n(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(9692),n(622676),n(613468),n(233696),n(443616),n(323784),n(835164),n(927184),n(976896),n(387912),n(690512),n(660824),n(997308),n(86744);var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=r(e)&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var o={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(o,u,i):o[u]=e[u]}return o.default=e,n&&n.set(e,o),o}(n(795520)),a=_(n(369396)),u=_(n(122060)),i=n(899760),c=n(608008),l=n(674260),f=n(868256),s=n(545072),d=n(825688),m=n(399588),p=n(790832),y=n(235708),v=_(n(219704)),g=n(211152),b=n(218652);function _(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e,t,n){var o;return o=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==r(o)?o:String(o))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,u,i=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(i.push(r.value),i.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.default=function(e){var t=(0,o.useContext)(c.SystemUIContext).uiData,n=w((0,o.useState)([]),2),r=n[0],_=n[1],h=w((0,o.useState)([]),2),k=h[0],I=h[1],S=w((0,o.useState)({0:0}),2),A=S[0],N=S[1],T=(0,o.useRef)({0:0}),j=(0,o.useRef)([]),C=(0,o.useRef)(!0),K=(0,o.useRef)(),P=(0,o.useRef)(),L=(0,o.useRef)(),D=(0,o.useRef)(),M=(0,o.useRef)([]);(0,o.useEffect)((function(){R(t)}),[t]);var x=function(e,t){if(T.current[t+1]=T.current[t]+e,k.length-1===t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},T.current);(0,p.isEqual)(n,A)||N(n)}};(0,o.useEffect)((function(){var e=(0,y.getVisiblePages)((0,l.getData)(f.KEY_PAGE_VISIBLE_STATUS)),t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return null==e?void 0:e.filter((function(e){return t.includes(e.pageId)}))},n=(0,l.addDataChangeListener)(f.KEY_PAGE_VISIBLE_STATUS,(function(e){var n=(0,y.getVisiblePages)(e),o=t(r,n);(0,p.isEqual)(o,D.current)||(D.current=o,function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(e){if(void 0!==e.timestamp&&null!==e.timestamp){var t=(new Date).getTime(),n=t-e.timestamp,r=e.duration-n;e.duration=n>e.duration?0:r,e.timestamp=t}0===e.duration&&1!==e.type&&Y(e.messageKey)}))}(o),I(o),C.current=!1,clearTimeout(P.current),P.current=setTimeout((function(){C.current=!0}),100))})),o=t(r,e);return I(o),function(){n(),clearTimeout(K.current),K.current=null,clearTimeout(P.current),P.current=null;var e=(0,l.getData)(f.KEY_GLOBAL_MESSAGE_ACTION_KEY);M.current.forEach((function(t){(0,l.setData)(f.KEY_UI_ACTION,{tableName:"click",key:e,type:"prompt_error",methodName:"prompt_click_useless",args:[{controlKey:t}]})}))}}),[r]),(0,o.useEffect)((function(){var e=(0,l.addDataChangeListener)(f.KEY_OTHER_ACTION_KEY,(function(e){var t=(0,l.getData)(f.KEY_GLOBAL_NOTIFICATION_ACTION_KEY),n=r.filter((function(t){return t.actionKey!==e||t.actionKey===e&&1!==t.type}));e===t&&((0,l.setData)(f.KEY_GLOBAL_NOTIFICATION,[!0,n]),(0,l.setData)(f.KEY_GLOBAL_NOTIFICATION_ACTION_KEY,s.NO_ACTION_KEY))}));return function(){e()}}),[r]);var Y=function(e){var t=Array.isArray((0,l.getData)(f.KEY_GLOBAL_NOTIFICATION))?(0,l.getData)(f.KEY_GLOBAL_NOTIFICATION)[1]:[];t=t.filter((function(t){return t.messageKey!==e})),R(t),(0,l.setData)(f.KEY_GLOBAL_NOTIFICATION,[!0,t]),j.current=j.current.filter((function(t){return t!==e}))},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];clearTimeout(K.current);var t=1===e.length&&1===r.length&&(0,d.isEqualMessage)(r[0],e[0])?500:0;K.current=setTimeout((function(){_(e)}),t)},G=function(e){j.current.includes(e)||(j.current=j.current.concat(e))};return!k||Array.isArray(k)&&0===k.length?null:a.default.createPortal(o.default.createElement("div",{className:v.default["notification-wrapper"],id:"kd-notification",style:{zIndex:L.current||99999},onClick:function(e){var t=e.target.dataset.notificationButton;if(t){var n=e.target.parentElement.dataset.msgcode;if(void 0!==n){var r=(0,l.getData)(f.KEY_GLOBAL_MESSAGE_ACTION_KEY);switch(t){case"link":(0,l.setData)(f.KEY_UI_ACTION,{tableName:"click",key:r,type:"prompt_error",methodName:"prompt_click_link",args:[{controlKey:n}]});break;case"copy":(0,l.setData)(f.KEY_UI_ACTION,{tableName:"click",key:r,type:"prompt_error",methodName:"prompt_click_copy",args:[{controlKey:n}]});break;case"useless":var o=M.current.findIndex((function(e){return e===n}));-1===o?M.current.push(n):M.current.splice(o,1)}}}}},k&&k.map((function(e,t){return function(e,t,n){var r,a=!1,c=!1,l=!0;if(e.type===s.AlertType.SUCCESS)r="success",a=!0,c=!1,l=!1;else if(e.type===s.AlertType.ERROR)r="error",a=!1;else{var f=(0,g.getGlobalState)(),d=(0,b.getRootPageId)()(f),m=(0,b.getFormConfig)(d)(f);r="warning",a=0!==e.duration,c=!1,m.notificationDuration?(e.duration=m.notificationDuration,l=0===e.duration||e.duration>3e3):l=0===e.duration}e.messageKey||(e.messageKey=Math.random().toString(36).substr(2));var p={top:"".concat(A[n],"px")};return L.current=e.zIndex,o.default.createElement(u.default,{key:e.messageKey,onClose:function(){return Y(e.messageKey)},message:t,content:e.content,contentType:e.templateType,type:e.type,duration:e.duration,autoClose:a,showButton:c,showCloseButton:l,tmpStyle:r,args:e.args,hasLink:e.hasLink,callback:function(t){(0,i.notificationCallback)(e.pageId,[e.id,8,t])},msgLength:e.length,style:p,setMessageTop:function(e){return x(e,n)},needAnimation:!j.current.includes(e.messageKey),onSetNotNeedAnimationMessageKey:G,messageKey:e.messageKey,topAnimation:C.current,zIndex:e.zIndex||99999,msgcode:e.msgcode,href:e.href,pageId:e.pageId})}(e,k,t)})),(0,m.loadIframe)({height:"60px"})),document.body)}},122060:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n(182320),n(909112),n(697060),n(360776),n(505684),n(743924),n(693917),n(205960),n(976896),n(297336),n(846428),n(336368),n(606200),n(534440),n(387912),n(78504),n(776512),n(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Link=void 0,n(323784),n(835164),n(721300),n(571176),n(763600),n(633768),n(690512),n(218080),n(328640),n(694904),n(881288),n(86744);var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=r(e)&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var o={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(o,u,i):o[u]=e[u]}return o.default=e,n&&n.set(e,o),o}(n(795520)),a=l(n(824192)),u=l(n(671252)),i=n(331428),c=(n(545072),l(n(564123)));function l(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(this,arguments)}function d(e,t,n){var o;return o=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==r(o)?o:String(o))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,u,i=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(i.push(r.value),i.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(l)throw o}}return i}}(e,t)||p(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.default=function(e){var t=e.content,n=e.contentType,r=e.type,l=e.duration,f=e.autoClose,y=e.showButton,g=e.tmpStyle,b=e.args,_=e.hasLink,h=e.callback,O=e.onClose,E=e.showCloseButton,w=e.style,k=e.setMessageTop,I=e.needAnimation,S=e.onSetNotNeedAnimationMessageKey,A=e.messageKey,N=e.topAnimation,T=e.msgcode,j=e.href,C=(e.zIndex,e.pageId,m((0,o.useState)(!0),2)),K=C[0],P=C[1],L=m((0,o.useState)(!1),2),D=(L[0],L[1],o.default.useRef()),M=o.default.useRef(),x=o.default.useRef(!1),Y=function(){!x.current&&S&&S(A)},R=function(e){e&&h(e),q()},G=function(){f&&D.current&&clearTimeout(D.current)},B=function(e){var t=M.current;t&&t.removeEventListener("animationend",e)},W=function e(){B(e),O&&O()},U=function(e){var t=M.current;t&&t.addEventListener("animationend",e)},q=function(e){U(W),!x.current&&P(!1)},z=function(e){D.current&&clearTimeout(D.current),f&&F(q,e)},F=function(e,t){D.current&&clearTimeout(D.current),D.current=setTimeout((function(){e()}),t)},V=function(e,t){var n=M.current;n&&n.addEventListener(e,t)},H=function(e,t){var n=M.current;n&&n.removeEventListener(e,t)};(0,o.useEffect)((function(){return x.current=!1,z(l),U(Y),2===r&&(V("mouseover",(function(){return G()})),V("mouseleave",(function(){return z(5e3)}))),function(){x.current=!0,D.current&&clearTimeout(D.current),B(Y),H("mouseover",(function(){return G()})),H("mouseleave",(function(){return z(5e3)}))}}),[]),(0,o.useEffect)((function(){var e;k&&k(null===(e=M.current)||void 0===e?void 0:e.clientHeight)}),[k,M.current]);var J,Z,$=_||0!==r?{}:{onClick:q},X=0===r?"kdfont-kdfont kdfont-zhuangtai_wancheng":"kdfont kdfont-zhuangtai_jingshi",Q=(0,u.default)("kdfont",X,a.default["icon-".concat(g)]),ee=(0,u.default)(a.default.notification,"kd-cq-notification",d({},a.default["move-top-animation"],N),d({},a.default["move-up-in"],I),d({},a.default["move-up-leave"],!K)),te=(0,u.default)(a.default.content,"kd-cq-notification-content-text",d({},a.default["no-close-button"],!E),d({},a.default["has-close-button"],E)),ne=(0,u.default)("kdfont","kdfont-toubudaohang_guanbi",a.default["close-icon"]),re=(0,u.default)(a.default["notification-content"],"kd-cq-notification-content",a.default["".concat(g,"-bg-color")],a.default["".concat(g,"-color")]);if(Z=J=t,_){var oe=function(e,t){var n=new RegExp(/(#\{\d+\})/g),r=new RegExp(/\d+/g),a=t.split(n),u="";return{newContent:a.map((function(t,a){if(n.test(t)){var i,c=parseInt(t.match(r)),l=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=p(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){i=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(i)throw a}}}}(e);try{for(l.s();!(i=l.n()).done;){var f=i.value,s=f.index,d=f.text,m=f.value,y=f.url;if(s===c)return u+=d,o.default.createElement(v,{key:"link".concat(a),name:d,code:m||y,index:s,callback:R})}}catch(e){l.e(e)}finally{l.f()}}return u+=t,t})),newTitle:u}}(b,t);J=oe.newContent,Z=oe.newText}return o.default.createElement("div",s({className:ee},$,{ref:M,style:w}),o.default.createElement("div",{className:re},o.default.createElement("i",{className:Q}),"component"===n?o.default.createElement("div",{className:te},t,1===r&&o.default.createElement(c.default,{key:T,type:"notification",className:a.default.feedback,msgcode:T,href:j})):o.default.createElement("div",{className:te,title:Z},J,1===r&&o.default.createElement(c.default,{key:T,type:"notification",className:a.default.feedback,msgcode:T,href:j})),y?o.default.createElement("div",{className:a.default["button-div"],onClick:function(e){return q(e)}},(0,i.getLangMsg)("msg.iKnow")):null,E&&o.default.createElement("i",{className:ne,onClick:q})))};var v=t.Link=function(e){var t=e.name,n=e.code,r=e.callback,i=e.isMsgcode,c=n.startsWith("www")||n.startsWith("http://")||n.startsWith("https://"),l=(0,u.default)(a.default.link,e.className);return c?o.default.createElement("a",{"data-notification-button":i?"link":null,className:l,onClick:function(){return null==r?void 0:r()},href:n.startsWith("www")?"http://".concat(n):n,rel:"noopener noreferrer",target:"_blank"},t):o.default.createElement("a",{"data-notification-button":i?"link":null,className:l,href:"javascript:void(0);",onClick:function(){return null==r?void 0:r(n)}},t)}}}]);