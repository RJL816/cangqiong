(self["webpackJsonp_bos-platform"]=self["webpackJsonp_bos-platform"]||[]).push([[7184,3524,3724],{225014:function(e,t,r){"use strict";r.r(t),t.default={dragFlexContainer:"_3cB0d_RT",dragOutMargin:"_2nhpGBWc",flexDragActionDiv:"SX4rHUY3",currentPageNotVisible:"_3I1t7UZY",flexContainer:"_1qMAIjJd",icon:"E859S380",header:"_2CYK2-cn",body:"_3C1LCruG"}},645292:function(e,t,r){"use strict";r.r(t),t.default={advCon:"_1hcvfr8m",customized:"wqq0mO0z",collapseIcon:"porwzHj1","adv-con-full-screen":"_3sF-hVTr","full-screen":"_2j-b-pFt",isDesigner:"w_Jiw3Ac",collapsible:"_1tlw96Zj",bar:"_1evfoEvI","bar-fold":"-XkYI2cL",box:"_3nG75vx_","max-width":"OaL1kf4T","design-tips":"_3oObQvYQ",collapse:"_3ePKinTA",expandIcon:"_2CYRk_7e",title:"_2caW4AwY",cur:"gpDu94dv","collapse-with-tips":"_2QyKfNhw",summaryPanel:"_2ohcP3V6",toolbar:"_2exOSRDa","full-screen-right-padding":"_2Ua6pvtu",type1:"_3BSyDWjW","ap-type1":"_3-ERnkTZ",viewBar:"_2wL8XI5T",panel:"_27Jineig",mt0:"e3xkzrvI",ml0:"_2WpSXV2y",hide:"HyY97JJb",summaryPanelAp:"PwLPW1gE","dot-icon":"L_djEj8f","dot-icon-wrap":"_16jW9hE1",invisible:"_2EEkv_Cb",panelWithMinHei:"mE0GQecR","pos-relative":"Zd3NsUcJ"}},517064:function(e,t,r){"use strict";r.r(t),t.default={"bill-list":"_2GGG5j5S",panel:"x-Dtok1y","timeline-panel":"_1QG4GlEB","time-line":"_-2nCHpZ9","first-line":"_3ahf5tuX","last-line":"_1AhiR9Ub",dot:"_238tDNU1",toolbar:"_17EWZBvt"}},397528:function(e,t,r){"use strict";r.r(t),t.default={underline:"_1lAdEvi0",triangle:"_1I56uBye","underline-actived":"_38A4WXEo","list-card-box":"_18CX9p4X",card_disable_click:"_2cfGxpJ0","scroll-box":"_8RWcV5ZY","list-box":"bThLHjfo",arrow:"_3AcprclV","has-underline":"QliSwMsW","pre-btn":"_12eeMAER",disabled:"_1ZtjcKIK","next-btn":"_3HyitEDe",chunk:"_2zwT-n_R","timeline-panel":"iF0D75MG","time-line":"_1lzJyDxo","first-line":"_2u-vhp7v","last-line":"_2PaK82YR",dot:"_1yKNZ8L3",current:"_3SNXrCYg",panel:"_2c7R-izc","no-data-card":"_3yl5ZdHd","no-data-container":"_7LCo_egr","img-item":"_1WXU_74l",hover_show_panel:"_3dN6y1Tv",hover_show_item:"_2zes-cgo",hover_hide_item:"_1mqe1CtJ"}},227248:function(e,t,r){"use strict";r.r(t),t.default={"fieldset-panel":"V2KqhN6U","full-screen":"_3T36MEQI",isDesigner:"_32T3mdYf"}},290296:function(e,t,r){"use strict";r.r(t),t.default={root:"_3zZ3Spji"}},523196:function(e,t,r){"use strict";r.r(t),t.default={"more-btn-wrapper":"_3y7u6VFw","more-btn":"_31mbjuxo","custom-panel":"_1tET8lCG"}},163456:function(e,t,r){"use strict";r.r(t),t.default={commonfunctionpanel:"_3eAF9nT2",autoWrap:"_1C2vtCpm",menugroup:"_1EurWY2P",grouptitle:"_1tHEKCWG",groupcontainer:"_3pwBCZk_",item:"_3cmwFKUn","item-first":"_3QwfB3CU","item-title":"_356akLCV",subgroup:"_9zR10IiR",menuitem:"_1ZRzdkWq","text-omit":"_2X4oYLe3"}},980652:function(e,t,r){"use strict";r.r(t),t.default={flexiblePanel:"_3R0_WprS",flexibleCloseIcon:"_3JRA8EAV"}},273820:function(e,t,r){"use strict";r.r(t),t.default={"geographic-location":"_3NlBcIkf","map-container":"_3Q1uCq5W",scale:"_2hM3vUNq",location:"_3ZxMtyIz","flex-layout":"_2aRXSEEH","flex-layout-right":"kcM_VngB","locked-geo":"_2BURGWk5","geo-label":"_3D-7So5o",input:"_2-RJqNTe","no-result":"_3dPVksZu","required-icon":"K22vVmB1"}},796452:function(e,t,r){"use strict";r.r(t),t.default={GridContainer:"_1HhTHtal","gc-canedit":"QQN6R1m6","gc-compatible":"_1FYYsK_T","gc-c":"_1omCk5kY","gc-container":"_1wMMiY0q","gc-item":"nEg5fcC2","delete-item":"tssTJ3pT",bottombarpanel:"_3UzHDgNo","left-container":"_3p74Jaoa",button:"_3gLrfqGW",newaddcard:"_3ia1e14Y","newaddcard-flag":"_7TsMc3D6","newaddcard-show":"_35YFRHeG","newaddcard-item":"_24RS9E0v",editcontainer:"_3BTNz1Pl","edit-cancel":"_3S36TV7e","edit-end":"_3Fc1dszR","default-text":"nOcMZVTs","default-wrapper":"_2Qb3FJOL","default-inner":"_1V16ZiBM","default-wrapper-open":"rpFvlMzs","popup-panel":"cNyRcp7G","ap-addcard-flag":"oHr6R7f3","ap-show":"_3vy_ZTAH"}},129766:function(e,t,r){"use strict";r.r(t),t.default={scheme:"vMhMz21p","scheme-tips":"_1UjLm0Fn","scheme-dp-trigger":"JhPJDEPZ","scheme-dp-name":"_1fKhhpsb","scheme-dp-trigger-hover":"rK3GMNdU","scheme-label":"_4F2GqDOf","scheme-edit":"_3hgZYCtV","scheme-dp":"_2qUFL-dP","scheme-dp-menu":"_3fDKRL1_","arrow-down":"o0zkp4ty","scheme-group":"_1w_7j-fc","scheme-group-title":"dlo6jMgS","scheme-group-item":"_1we6VGUr","scheme-group-submenu":"_3G4MV7RJ","scheme-item-name-wrapper":"_39Eq3X6F","scheme-item-name":"_2pf-t9pa","icon-arrow-down":"sc5hHHVO","scheme-item-default":"_3Nj11zvU","scheme-item-selected":"-NAPRHnR","btn-more":"_2ZLpIdtJ",toolbar:"HrXIDM8_",edit:"_12PUGlRY","edit-icon":"_2TX_hNU2","edit-text":"_17JuHeDg","edit-disabled":"_3q7Dk1uZ",refresh:"_14Kv_AOc","refresh-icon":"_1CBkUK3Q","refresh-text":"_2tgacyfu",add:"_1osDfBWm","add-icon":"_6JnggNY9",cancel:"_31hINhmN","save-as-trigger":"_3wZfwwiT",save:"S-NGrgET",operation:"_3J17UwtZ","save-as-dp":"_2JMP0FaH","save-as-dpul":"_3vEYOVcy",homePageSchemeIcon:"_3YNAvzk4","with-collapse-icon":"_1Pz_N_lO",icon:"Q4OJqlsO","active-click":"_3S2ppcdW","disabled-btn":"_1PjR-9o3","btn-ghost":"_2vCviLbd","homePageSchemeIcon-show-true":"_2YUAFNxl","homePageSchemeIcon-show-false":"_3jVQ_nyV","homePageScheme-arrow":"_3ITZHkTh","homePageScheme-arrow-right":"_3p1-e-_u",arrowContent:"_2sKebeor","arrowContent-arrow-left":"_1XmA7yLB"}},448352:function(e,t,r){"use strict";r.r(t),t.default={nav:"_3yQDvIqK","static-tab":"_3wECPomL",item:"_2F9t7sm5",active:"QyCJws0N",virtualTabs:"_6BXiQKo_","app-tab":"_1bd34Lgp",text:"_24Irr2Cv","arrow-icon":"TpqH0V2p",expand:"_3qUtk3Cc","virtual-tab-out-wrap":"_2H7cwHbB",hide:"_19eQ0H6r","pre-btn-wrap":"_2sz3jHMW","next-btn-wrap":"_3bLRaIcI","more-wrap":"_3Kr6kpie","left-btn-wrap":"drBXbSHp","more-right-wrap":"b5eTKIX2","more-icon":"fBNIuWjL","pre-btn":"_2nqIXh5v","next-btn":"_2ZI5Senh","virtual-tab":"_3JFjfkk3",animate:"_2mByR2OI",content:"_1rWbEPUb",contentHover:"_3Fq-vL8Y","close-icon":"_3vC_DW-9","close-icon-drag":"_3zSiDXc4","app-menu":"hzJnmeSB","menu-info":"_1IUzF_lW",top:"_3MisO8Ak","menu-icon":"_2f8s2YTh",droping:"_295KT6Z7","more-virtual-item":"_2n7wAWb1","context-menu-item":"_2ijZsC1W","app-tabs-empty-tip-animation":"_2zJNwDc7",showNoFixedEmpty:"_2GD9qJvr","app-tabs-empty-tip-closeAnimation":"k3KN-PSc",closeNoFixedEmpty:"_2Ki7WFdu","app-tabs-empty-tip":"_10m6WuRL","app-tabs-empty-content":"_2GLzv4np","app-tabs-hr":"ZFmFa83E","app-tabs-hr-fixed":"_25p4HC6z","app-tabs-hr-notFixed":"kgyEjE4q","app-move-tabs":"_1MmgE75z","virtual-tab-drag-bottom":"_3EsvpM9c","virtual-tab-drag-top":"_1UWB1ZDc","app-move-empty-tip":"_33sZVAIZ","menu-sizing-overflow":"_1aNQ8H7Y","menu-sizing-overflow-span":"_2g5LOaQ7","nav-drop-down":"_2whOJ18r","app-tabs-safe-area":"_1QkyIygh","app-tabs-items-safe-area":"_2DfSQKi7","app-tabs-items":"_2bdP4cFe","drop-placeholder":"_3fZTUPS2","virtual-tab-moveDrop":"_1_PZv0Nd",oldVirtuaMoveUp:"_3UGmaGrS",oldVirtuaMoveBottom:"_1QJ_-6di",vbirtuaMoveUp:"_39h7wtnS",virtuaMoveBottom:"_2Hv91SRc"}},264760:function(e,t,r){"use strict";r.r(t),t.default={"dropdown-container":"_9AzP-FeW",bottom:"_3fw8en54",border_top:"_2L0H3WQn",check_li:"_1en-lNMN","drop-down-check-list":"zex1JPQt","toolbars-menus-list":"ejnge_JC",top_footer_div:"_2vEi01JN",confirm:"_2cdeQYaW",custom_title:"_1hZ2mPmU",custom_title_left:"_7I8cKmJe",titleIcon:"_3qMy2n7n",tooltips:"DaqLZenF",text:"_1XYUZ1ib",name_span:"zhuzwNLH","dropdown-menu-wrapper":"_23dFvBN6","dropdown-menu":"_2GgOS-mn",convert:"_3pVwByUb",textspan:"_1m-vCn2S",downdiv:"_2WJxMxr5","li-container":"_2AbzdoTP","son-padding-left":"NrqP4_oi",selector:"_2fX4SF8q","arrow-down":"_2hocI-ZF","more-btn":"_1BYs-tjB"}},140472:function(e,t,r){"use strict";r.r(t),t.default={"radio-opt-group-field-v":"T74vX-N3"}},460020:function(e,t,r){"use strict";r.r(t),t.default={"field-item":"_1JYpZE6_","label-wrap":"iDtUblLz",must:"qfGfBOxj","no-width":"_1LUjmHMm","label-text-left":"_38S_clcj","label-text-center":"z4Odm2hU","label-text-right":"_1EE_slAi","title-wrapper":"QoBeC4jd","title-align-left":"_1f0IjOCY","title-align-right":"_8VQ0zCpD","title-align-center":"_3dWYJI8-","value-wrap":"_2UNJxN1-","richtext-label":"_1SVNu4rn"}},110296:function(e,t,r){"use strict";r.r(t)},112072:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.SWITCH_SCHEME=t.SET_DEFAULT_SCHEME=t.SAVE_AS_SCHEME_TYPE=t.SAVE=t.REFRESH=t.EDIT_END=t.EDIT_CANCEL=t.EDIT=t.DELETE_SCHEME=t.DELETE_CARD=t.ADD_CARD=void 0;t.DELETE_CARD="deleteCard",t.ADD_CARD="addCard",t.EDIT_CANCEL="editCancel",t.EDIT_END="editEnd",t.EDIT="edit",t.REFRESH="refresh",t.SWITCH_SCHEME="switchScheme",t.DELETE_SCHEME="deleteScheme",t.SET_DEFAULT_SCHEME="setDefaultScheme",t.SAVE="save",t.SAVE_AS_SCHEME_TYPE="saveAsSchemeType"},137524:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.TAB_FIXED_CLICK=t.CLOSE=void 0;t.TAB_FIXED_CLICK="clickTabFixed",t.CLOSE="close"},937971:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.SELECT_SET_DEFAULT_VAL=void 0;t.SELECT_SET_DEFAULT_VAL="setDefaultValue"},467124:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(743924),r(606200),r(534440),r(387912),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.itemClick=function(e,t){var r=t.groupId,n=t.itemId;return function(t,a){var l=e.pageId,u=(0,o.getPost)(l)(a());i.invokeControlService(e,"itemClick",[{groupId:r,itemId:n}],u,t)}};var o=r(218652),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=i?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(o,l,u):o[l]=e[l]}return o.default=e,r&&r.set(e,o),o}(r(251536));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}},230816:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(743924),r(606200),r(534440),r(387912),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.addCard=function(e,t){return function(r,n){o.invokeControlService(e,a.ADD_CARD,[t],(0,i.getPost)(e.pageId)(n()),r)}},t.deleteCard=function(e,t){return function(r,n){o.invokeControlService(e,a.DELETE_CARD,[t],(0,i.getPost)(e.pageId)(n()),r)}},t.deleteScheme=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(r,n){o.invokeControlService(e,a.DELETE_SCHEME,[t],(0,i.getPost)(e.pageId)(n()),r)}},t.edit=function(e){return function(t,r){o.invokeControlService(e,a.EDIT,[],(0,i.getPost)(e.pageId)(r()),t)}},t.editCancel=function(e){return function(t,r){o.invokeControlService(e,a.EDIT_CANCEL,[],(0,i.getPost)(e.pageId)(r()),t)}},t.editEnd=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0;return function(n,l){o.invokeControlService(e,a.EDIT_END,[t,r],(0,i.getPost)(e.pageId)(l()),n)}},t.refresh=function(e){return function(t,r){o.invokeControlService(e,a.REFRESH,[],(0,i.getPost)(e.pageId)(r()),t)}},t.save=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(r,n){o.invokeControlService(e,a.SAVE,[t],(0,i.getPost)(e.pageId)(n()),r)}},t.saveAs=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0;return function(n,l){o.invokeControlService(e,a.SAVE_AS_SCHEME_TYPE,[r,t],(0,i.getPost)(e.pageId)(l()),n)}},t.setDefault=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(r,n){o.invokeControlService(e,a.SET_DEFAULT_SCHEME,[t],(0,i.getPost)(e.pageId)(n()),r)}},t.switchScheme=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(r,n){o.invokeControlService(e,a.SWITCH_SCHEME,[t],(0,i.getPost)(e.pageId)(n()),r)}};var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=l(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(o,a,u):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(251536)),i=r(218652),a=r(112072);function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}},756184:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(743924),r(606200),r(534440),r(387912),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.addToCollectionAction=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(r,n){var o=e.pageId,i=["addToCollection","",JSON.stringify(t)];u.default[u.INVOKE_CUSTOM_EVENT_WITH_POST_DATA](o,"",i)}},t.clickFix=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(r,n){o.invokeControlService(e,a.TAB_FIXED_CLICK,t,(0,i.getPost)(e.pageId)(n()),r)}},t.closeVirturalTab=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r,n){var c=e.pageId,s=t.delTabs;if(1===(null==s?void 0:s.length))o.invokeControlService({pageId:s[0].pageId,key:""},a.CLOSE,[],(0,i.getPost)(c)(n()),r);else{var f=[l.CLOSE_VIRTUAL_TAB,"",JSON.stringify(t)];u.default[u.INVOKE_CUSTOM_EVENT_WITH_POST_DATA](c,"",f)}}},t.openInNewWindowAction=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(r,n){var o=e.pageId,i=["openInNewWindow","",JSON.stringify(t)];u.default[u.INVOKE_CUSTOM_EVENT_WITH_POST_DATA](o,"",i)}},t.openInSystemTabAction=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(r,n){var o=e.pageId,i=["openInSystemTab","",JSON.stringify(t)];u.default[u.INVOKE_CUSTOM_EVENT_WITH_POST_DATA](o,"",i)}},t.selectTabHomePage=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(r,n){var o=e.pageId,i=[l.SELECT_TAB_HOME_PAGE,"",JSON.stringify(t)];u.default[u.INVOKE_CUSTOM_EVENT_WITH_POST_DATA](o,"",i)}},t.selectVirturalTab=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(r,n){var o=e.pageId,i=[l.SELECT_VIRTUAL_TAB,"",JSON.stringify(t)];u.default[u.INVOKE_CUSTOM_EVENT_WITH_POST_DATA](o,"",i)}};var o=s(r(251536)),i=r(218652),a=r(137524),l=r(142408),u=s(r(211152));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}function s(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=c(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}},671776:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(743924),r(606200),r(534440),r(387912),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.changeSelectDefaultValue=void 0;var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=l(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(o,a,u):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(251536)),i=r(218652),a=r(937971);function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}t.changeSelectDefaultValue=function(e,t){return function(r,n){o.invokeControlService(e,a.SELECT_SET_DEFAULT_VAL,t,(0,i.getPost)(e.pageId)(n()),r)}}},254332:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(743924),r(205960),r(846428),r(708896),r(606200),r(670864),r(387912),r(836887),r(78504),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(297336),r(880920),r(571176);var o=a(r(795520)),i=a(r(384816));function a(e){return e&&e.__esModule?e:{default:e}}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,u(n.key),n)}}function u(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function c(e,t,r){return t=f(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}(e,s()?Reflect.construct(t,r||[],f(e).constructor):t.apply(e,r))}function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(s=function(){return!!e})()}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}t.default=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=c(this,t,[e])).mouseupHandler=r.mouseupHandler.bind(d(r)),r.mousedownHandler=r.mousedownHandler.bind(d(r)),r.mousemoveHandler=r.mousemoveHandler.bind(d(r)),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(t,e),r=t,(n=[{key:"setDragElement",value:function(e){e&&e.addEventListener("mousedown",this.mousedownHandler)}},{key:"unMountDragElement",value:function(e){e&&e.removeEventListener("mousedown",this.mousedownHandler)}},{key:"componentDidMount",value:function(){this.eleRef=this.props.eleRef,this.setDragElement(this.eleRef&&this.eleRef.current),document.addEventListener("mousemove",this.mousemoveHandler,!0),document.addEventListener("mouseup",this.mouseupHandler,!0)}},{key:"componentWillReceiveProps",value:function(e){var t=e.eleRef;t!==this.props.eleRef&&(this.unMountDragElement(this.eleRef&&this.eleRef.current),this.eleRef=t,this.setDragElement(t&&t.current))}},{key:"componentWillUnmount",value:function(){this.unMountDragElement(this.eleRef&&this.eleRef.current),document.removeEventListener("mousemove",this.mousemoveHandler,!0),document.removeEventListener("mouseup",this.mouseupHandler,!0)}},{key:"mouseupHandler",value:function(e){var t=this.eleRef.current;if(t&&t.parentElement){var r=t.parentElement;if("true"===t.dataset.draging){var n=this.props.onDrop;n&&n(e),r.style.cursor="default",t.dataset.draging=!1}}}},{key:"mousemoveHandler",value:function(e){e.preventDefault();var t=this.eleRef.current;if(t&&t.parentElement){this.props.handleMouseMove&&this.props.handleMouseMove(e);var r=t.parentElement;if("true"===t.dataset.draging){t.style.zIndex=1;var n=e.clientX-t.dataset.startX,o=e.clientY-t.dataset.startY,i=t.dataset.originLeft,a=t.dataset.originTop,l=(i=""===i?0:parseInt(i))+n,u=(a=""===a?0:parseInt(a))+o,c=this.props.windowInitialStyleWidth||0,s=r.parentElement.clientWidth,f=r.parentElement.clientHeight;l<0?c>0?l<40-c&&(l=40-c):l=0:l>s-20&&(l=s-20),u<0?u=0:u>f-20&&(u=f-20);var d=r.style;d.left=l+"px",d.top=u+"px"}}}},{key:"mousedownHandler",value:function(e){var t=this.eleRef.current;if(t){var r=t.parentElement;if(0===e.button&&(t.style.zIndex=1,t.style.pointerEvents="auto",(0,i.default)(e.clientX,e.clientY)===t)){var n=this.props.onDragStart;n&&n(e),t.dataset.draging="true",t.dataset.startX=e.clientX,t.dataset.startY=e.clientY;var o=r.style,a=r.offsetLeft,l=r.offsetTop;t.dataset.originLeft=a,t.dataset.originTop=l,o.left=a+"px",o.top=l+"px",o.cursor="move"}}}},{key:"render",value:function(){return this.props.children}}])&&l(r.prototype,n),o&&l(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(o.default.Component)},597588:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(622676),r(233696),r(743924),r(205960),r(846428),r(708896),r(969e3),r(606200),r(534440),r(76152),r(670864),r(76124),r(387912),r(836887),r(78504),r(776512),r(997308),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t){function r(e){var t,i,a,c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),i=this,c=[e],a=P(a=r),(t=function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _(e)}(i,S()?Reflect.construct(a,c||[],P(i).constructor):a.apply(i,c))).dragWindowMove=function(e){var r=e.clientX,n=e.clientY,o=t.dragContainerRef.current;o&&(o.style.top=n-k+"px",o.style.left=r-k+"px")},t.isInContainer=function(e){t.dragDivRef.current&&((0,f.isMousePositionInContainer)(t.dragDivRef.current,e)&&!t.state.isFlexWrapComponentNotDragOut?t.dragDivRef.current.style.boxShadow="1px 1px":t.dragDivRef.current.style.boxShadow="0px 0px")},t.getDragFloatWinStyle=function(){var e=(0,l.getComponentDataProperty)(t.props.model,"floatDragWinStyle","floatDragWinStyle",!1);return{width:e&&e.get("w"),height:e&&e.get("h")}},t.getIsFlexWrapDrag=function(){return(0,l.getComponentDataProperty)(t.props.model,"floatDrag","floatDrag",!1)},t.getIsFlexDragFloat=function(){var e=t.props.model,r=e.pageId,n=e.key;return(0,u.getDataProperty)(r,n,"isFlexDragFloat")(t.props.appState)},t.getCurrentPageNotHideDOM=function(){var e=t.props.model.pageId,r=(0,l.getComponentDataProperty)(t.props.model,"notHideControl","notHideControl",!1);try{return r?document.querySelector("[data-page-id='".concat((0,s.getDataPageId)(e,r),"']")):null}catch(e){return null}},t.handleMouseOut=t.handleMouseOut.bind(_(t)),t.handleMouseDown=t.handleMouseDown.bind(_(t)),t.handleDocMouseMove=t.handleDocMouseMove.bind(_(t)),t.handleDocMouseUp=t.handleDocMouseUp.bind(_(t)),t.handleResize=t.handleResize.bind(_(t)),t.invokeComponentCustomEvent=t.invokeComponentCustomEvent.bind(_(t)),t.handleTransComponentContainerDragStart=t.handleTransComponentContainerDragStart.bind(_(t)),t.handleTransComponentContainerDrop=t.handleTransComponentContainerDrop.bind(_(t)),t.eleRef=o.default.createRef(),t.dragDivRef=o.default.createRef(),t.dragContainerRef=o.default.createRef(),t.handleClose=t.handleClose.bind(_(t)),t.windowInitialStyle={height:500,width:300},t.state=t.getInitialState(),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}(r,t),function(e,t,r){t&&O(e.prototype,t);r&&O(e,r);Object.defineProperty(e,"prototype",{writable:!1})}(r,[{key:"getInitialState",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.isOutWindowDrag=!1,this.isDrag=!1,{isFlexWrapComponentNotDragOut:e}}},{key:"handleClose",value:function(){var e=this;this.setState(this.getInitialState(),(function(){e.invokeComponentCustomEvent(p.CUSTOM_EVENT_FLEX_CLOSE_CUSTOMEVENT)}))}},{key:"handleResize",value:function(e){var t=e.hide,r=(e.measureRef,this.dragContainerRef.current);r&&(r.style.display=t?"none":"flex")}},{key:"invokeComponentCustomEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=this.props.model,n=r.pageId,o=[r.key,e,t];y.default[y.INVOKE_CUSTOM_EVENT](n,"",o)}},{key:"handleDocMouseMove",value:function(e){this.isInContainer(e),this.isDrag&&this.dragWindowMove(e)}},{key:"handleMouseOut",value:function(e){var t=this;if(this.isDrag&&this.state.isFlexWrapComponentNotDragOut){var r=e;this.setState({isFlexWrapComponentNotDragOut:!1},(function(){t.dragWindowMove(r),t.invokeComponentCustomEvent(p.CUSTOM_EVENT_FLEX_DRAG_CUSTOMEVENT)})),e.stopPropagation()}}},{key:"handleDocMouseUp",value:function(e){var t,r=this,n=this.isDrag,o=this.isOutWindowDrag;this.isDrag=!1,this.isOutWindowDrag=!1,(n||o)&&(0,f.isMousePositionInContainer)(this.dragDivRef.current,e)&&(this.setState((function(e){return t=e,{isFlexWrapComponentNotDragOut:!0}}),(function(){r.isOutWindowDrag&&r.handleTransComponentContainerDrop({clientX:e.clientX,clientY:e.clientY},!0),document.removeEventListener("mousemove",r.handleDocMouseMove),t.isFlexWrapComponentNotDragOut||r.invokeComponentCustomEvent(p.CUSTOM_EVENT_FLEX_DROP_CUSTOMEVENT),r.dragDivRef.current&&(r.dragDivRef.current.style.boxShadow="0px 0px")})),e.stopPropagation())}},{key:"handleMouseDown",value:function(e){this.state.isFlexWrapComponentNotDragOut&&(this.isDrag=!0,document.addEventListener("mousemove",this.handleDocMouseMove))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousemove",this.handleDocMouseMove),document.removeEventListener("mouseup",this.handleDocMouseUp)}},{key:"componentDidUpdate",value:function(e,t){var r=this,n=this.getIsFlexWrapDrag();if(n){var o=this.getIsFlexDragFloat(),i=(0,l.getComponentDataProperty)(e.model,"isFlexDragFloat","isFlexDragFloat",!1);if(n&&!this.isAddDocMouseUpHandle&&(this.isAddDocMouseUpHandle=!0,document.addEventListener("mouseup",this.handleDocMouseUp)),o){var a=this.props.model,c=a.pageId,s=a.key,f=this.props.dispatch;!t.isFlexWrapComponentNotDragOut||!o||i&&this.isSetFlexDragFloat?o&&f((0,u.convertAppModelFunctionAction)((0,u.setDataProperty)(c,s,"isFlexDragFloat",!1))):(this.isSetFlexDragFloat=!0,this.setState(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.getInitialState(!1)),(function(){if(r.dragContainerRef.current){var e=r.getDragFloatWinStyle(),t=e.width,n=e.height,o=t;r.dragContainerRef.current.style.top="calc(50% - ".concat((n||r.windowInitialStyle.height)/2,"px)"),r.dragContainerRef.current.style.left="calc(50% - ".concat((o||r.windowInitialStyle.width)/2,"px)")}f((0,u.convertAppModelFunctionAction)((0,u.setDataProperty)(c,s,"isFlexDragFloat",!1)))})))}else this.isSetFlexDragFloat=!1}else this.state.isFlexWrapComponentNotDragOut||this.setState(this.getInitialState())}},{key:"handleTransComponentContainerDragStart",value:function(){this.isOutWindowDrag=!0}},{key:"handleTransComponentContainerDrop",value:function(e,t){!t&&(0,f.isMousePositionInContainer)(this.dragDivRef.current,e)||(this.isOutWindowDrag=!1)}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var t=this,r=this.getIsFlexWrapDrag();if(!r)return o.default.createElement(e,this.props);var n,u=this.state.isFlexWrapComponentNotDragOut,s=(0,l.getComponentDataProperty)(this.props.model,"docWinStyle","docWinStyle",!1),f=this.getDragFloatWinStyle(),p=f.width,y=f.height,m=(0,l.getComponentDataProperty)(this.props.model,"floatFlexTitle","floatFlexTitle",!1),g=this.props.model,v=Object.assign({},(0,l.getCommonStyle)(g),this.props.style),O={},w=function(){return o.default.createElement(c.default,{onResize:t.handleResize,render:function(e){var r=e.measureRef;return o.default.createElement("div",{className:(0,i.default)(b({},a.default.flexDragActionDiv,!0)),ref:function(e){t.dragDivRef.current=e;var n=t.getCurrentPageNotHideDOM();u||!n?e&&!u&&r&&r(e):r(n)},style:{cursor:u?"move":"auto",height:s&&s.get("h"),width:s&&s.get("w"),backgroundColor:v.backgroundColor},onMouseDown:t.handleMouseDown,onMouseOut:t.handleMouseOut})}})};return r&&(O={postion:"absolute",width:p||this.windowInitialStyle.width,height:y||this.windowInitialStyle.height}),n=u?o.default.createElement(e,h({},this.props,{renderDragActionDiv:w})):o.default.createElement("div",{className:(0,i.default)(a.default.flexContainer),style:O,ref:this.dragContainerRef},o.default.createElement(d.default,{eleRef:this.eleRef,onDragStart:this.handleTransComponentContainerDragStart,onDrop:this.handleTransComponentContainerDrop,handleMouseMove:this.isInContainer,windowInitialStyleWidth:p||this.windowInitialStyle.width},o.default.createElement("div",{className:(0,i.default)(a.default.header),ref:function(e){t.eleRef.current=e},style:{justifyContent:"space-between"}},o.default.createElement("span",{className:"kdfont common-font-color"},m||""),o.default.createElement("i",{className:"kdfont kdfont-guanbiyulan",onClick:this.handleClose}))),o.default.createElement("div",{className:(0,i.default)(a.default.body)},o.default.createElement(e,this.props))),o.default.createElement(o.default.Fragment,null,!u&&w(),n)}}]),r}(o.default.Component)},r(297336),r(336368),r(880920);var o=g(r(795520)),i=(g(r(369396)),g(r(671252))),a=g(r(225014)),l=r(439532),u=r(218652),c=g(r(700044)),s=r(648648),f=r(182107),d=g(r(254332)),p=r(142408),y=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=m(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(211152));function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}function g(e){return e&&e.__esModule?e:{default:e}}function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},h.apply(this,arguments)}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e,t,r){return(t=w(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,w(n.key),n)}}function w(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function S(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(S=function(){return!!e})()}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e,t){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},C(e,t)}var k=10},852351:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(743924),r(205960),r(846428),r(708896),r(606200),r(534440),r(670864),r(387912),r(836887),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(297336),r(880920),r(86744);var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(795520)),i=l(r(369396)),a=l(r(540900));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s(n.key),n)}}function s(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function f(e,t,r){return t=p(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}(e,d()?Reflect.construct(t,r||[],p(e).constructor):t.apply(e,r))}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(d=function(){return!!e})()}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}(t.default=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=f(this,t,[e])).setMeterRef=r.setMeterRef.bind(y(r)),r.measure=r.measure.bind(y(r)),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){this.io=new window.IntersectionObserver(this.measure,{threshold:this.props.threshold||[1e-6],rootMargin:this.props.rootMargin})}},{key:"componentWillUnmount",value:function(){this.io&&this.io.disconnect(),this.resizeHander&&this.resizeHander.removeResizeObserve()}},{key:"measure",value:function(e){var t=e[0].intersectionRatio;if("function"==typeof this.props.onIntersection){var r=t>0&&e[0].rootBounds.width>0;this.props.onIntersection({visible:r,intersectionRatio:t,measureRef:this.ele,entry:e[0]})}}},{key:"setMeterRef",value:function(e){var t,r=this;e?((!(t=e)||"undefined"==typeof window||t!==window&&!t.nodeType)&&(e=i.default.findDOMNode(e)),setTimeout((function(){r.ele&&r.io.unobserve(r.ele),r.io.observe(e)}),0)):this.ele&&this.io.unobserve(this.ele),this.ele=e}},{key:"render",value:function(){var e=this.props.render||this.props.children;return e&&"function"==typeof e?e({measureRef:this.setMeterRef}):this.props.children}}])&&c(r.prototype,n),o&&c(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(o.Component)).propTypes={render:a.default.func,onIntersection:a.default.func,rootMargin:a.default.string}},479176:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(743924),r(205960),r(846428),r(708896),r(606200),r(534440),r(670864),r(836887),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.LazyLoadItem=void 0,r(9692),r(622676),r(305092),r(613468),r(233696),r(693917),r(927184),r(803372),r(976896),r(297336),r(336368),r(880920),r(387912),r(997308),r(86744);var o=f(r(795520)),i=c(r(369396)),a=r(891052),l=c(r(852351)),u=f(r(211152));function c(e){return e&&e.__esModule?e:{default:e}}function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,m(n.key),n)}}function y(e,t,r){return t&&p(e.prototype,t),r&&p(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function m(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function g(e,t,r){return t=v(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}(e,h()?Reflect.construct(t,r||[],v(e).constructor):t.apply(e,r))}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(h=function(){return!!e})()}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}function w(e,t){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},w(e,t)}var S=0;t.default=function(e){function t(e){var r;return d(this,t),(r=g(this,t,[e])).hidden=!1,r.id="lazyload"+ ++S,r.components=(0,a.List)(),r.refreshComponents=r.refreshComponents.bind(b(r)),r.setVisible=r.setVisible.bind(b(r)),r.index=0,r.visibleComponents=(0,a.List)(),r.loadNumbers=20,r}return O(t,e),y(t,[{key:"shouldComponentUpdate",value:function(e,t){return!1}},{key:"setVisible",value:function(e,t){t?(this.visibleComponents=this.visibleComponents.push(e),e>=this.loadNumbers-1&&(this.loadNumbers+=5)):this.visibleComponents=this.visibleComponents.filterNot((function(t){return t===e}))}},{key:"componentWillReceiveProps",value:function(e){var t=this;clearTimeout(this.time);var r=this.props.items.size,n=e.items.size;if(0!==r||0!==n){if(0===n)return this.components=(0,a.List)(),void this.forceUpdate();if(r!==n)if(n>r)this.index=0,this.visibleComponents=this.visibleComponents.filter((function(e){return e<=r-1})),this.visibleComponents.max()===r-1&&(this.loadNumbers=r+5);var i=e.items.size,l=e.items,u=e.visibleRows,c=e.style,s=e.render,f=e.options;this.hidden||(this.time=setTimeout((function(){t.hidden||(t.refreshComponents(i),t.visibleComponents.forEach((function(e){if(t.components.has(e)&&t.components.size>0&&e<=t.components.size-1&&e<=Math.min(t.loadNumbers,l.size)-1){var r=t.components.findIndex((function(t,r){return t.key===e+""}));r>-1&&e===r&&(t.components=t.components.splice(e,1,o.default.createElement(P,{key:e,item:l.get(e),isRowVisible:u.get(e),index:e,setVisible:t.setVisible,style:c,hidden:t.hidden,root:t.root,render:s,options:f})))}})))}),50))}}},{key:"refreshComponents",value:function(e){var t=this;e=e||this.props.items.size,this.components=this.components.slice(0,e||this.props.items.size),this.index=0;var r=this.visibleComponents.find((function(r){return r===t.loadNumbers-1||r===e-1}));r&&r<e&&(this.index=Math.min(this.index,this.loadNumbers),this.loadNumbers+=5)}},{key:"componentDidMount",value:function(){var e=this;this.refreshComponents();this.raf=window.requestAnimationFrame((function t(){var r=Math.min(e.loadNumbers,e.props.items.size),n=u.default[u.IS_IE]||!e.props.lazyLoadAllow;n&&(r=e.props.items.size),!e.hidden&&e.index<=r-1&&((0,a.Range)(e.index,e.index+5).forEach((function(t){if(t<r){var i=e.components.size;e.components=i>0&&t<=i-1?n?e.components.splice(t,1,e.props.render(e.props.items.get(t),t,e.props.options)):e.components.splice(t,1,o.default.createElement(P,{key:t,item:e.props.items.get(t),isRowVisible:e.props.visibleRows.get(t),index:t,setVisible:e.setVisible,style:e.props.style,hidden:e.hidden,render:e.props.render,options:e.props.options})):n?e.components.concat(e.props.render(e.props.items.get(t),t,e.props.options)):e.components.concat(o.default.createElement(P,{key:t,item:e.props.items.get(t),isRowVisible:e.props.visibleRows.get(t),index:t,setVisible:e.setVisible,style:e.props.style,hidden:e.hidden,render:e.props.render,options:e.props.options}))}})),e.forceUpdate(),e.index+=5,e.index=Math.min(e.index,r)),e.raf=!e.dispose&&window.requestAnimationFrame(t)}))}},{key:"componentWillUnmount",value:function(){this.dispose=!0,window.cancelAnimationFrame(this.raf)}},{key:"render",value:function(){return this.components.concat(o.default.createElement("div",{key:this.id,style:{display:"none"},id:this.id}))}}]),t}(o.Component);var P=t.LazyLoadItem=function(e){function t(e){var r;return d(this,t),(r=g(this,t,[e])).onIntersection=r.onIntersection.bind(b(r)),r.component=void 0,r}return O(t,e),y(t,[{key:"shouldComponentUpdate",value:function(e,t){return!1}},{key:"componentWillReceiveProps",value:function(e){!this.props.hidden&&this.visible?(this.component=this.props.render(e.item,e.index,e.options),this.forceUpdate()):this.refresh=!0}},{key:"componentDidUpdate",value:function(e,t){var r=i.default.findDOMNode(this);r&&r.children.length>0&&this.visible&&(r.style.visibility="hidden",r.children[0].style.visibility="visible")}},{key:"onIntersection",value:function(e){var t=this,r=e.visible,n=e.measureRef;if(r)this.time=Date.now();else if(this.time&&(this.props.index<50||Date.now()-this.time<500))return;this.visible=r,this.borderStyle=this.borderStyle||n.style.borderStyle,this.props.setVisible(this.props.index,r),r?(n.style.minWidth="unset",n.style.borderStyle="none",this.component?(this.refresh&&(this.refresh=!1,this.component=this.props.render(this.props.item,this.props.index,this.props.options),this.forceUpdate()),n.children.length>0&&window.requestAnimationFrame((function(){n.style.visibility="hidden",n.children[0].style.visibility="visible",t.props.width&&t.props.height&&(n.children[0].style.display="flex")}))):(this.component=this.props.render(this.props.item,this.props.index,this.props.options),this.forceUpdate())):n.children.length>0&&window.requestAnimationFrame((function(){n.style.visibility="visible",n.style.borderStyle=t.borderStyle,n.children[0].style.visibility="hidden",t.props.width&&t.props.height&&(n.children[0].style.display="none")}))}},{key:"render",value:function(){var e=this,t=Object.assign({},this.props.style);t.width||(t.minWidth="100%"),t.height?t.minHeight=t.height:t.minHeight=20,this.props.isRowVisible||(t.height=0,t.minHeight=0,t.overflow="hidden");return o.default.createElement(l.default,{rootMargin:"100px 0px 300px 0px",onIntersection:this.onIntersection,render:function(r){var n=r.measureRef;return o.default.createElement("div",{style:t,ref:n,"data-key":e.props.index},e.component)}})}}]),t}(o.Component)},371320:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(505684),r(743924),r(693917),r(976896),r(721300),r(606200),r(534440),r(387912),r(633768),r(690512),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(241872),r(323784);var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=u(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(795520)),i=r(439532),a=r(738704),l=r(545072);function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(u=function(e){return e?r:t})(e)}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}t.default=function(){return function(e){return function(t){var r=c((0,o.useState)(!0),2),n=r[0],u=r[1];(0,o.useEffect)((function(){var e=(0,a.getPageData)(t.model.pageId,l.PERMISSION_PARAMS);e&&s(e);var r=(0,a.addDataChangeListener)(t.model.pageId,l.PERMISSION_PARAMS,s);return function(){null==r||r()}}),[]);var s=function(e){if(e){var r=e.noPerData,n=void 0===r?[]:r,o=t.model,a=(0,i.getComponentDataProperty)(o,"permissionId","permissionId",!1);-1!==n.indexOf(a)&&u(!1)}};return n?o.default.createElement(e,t):null}}}},161976:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(743924),r(976896),r(721300),r(606200),r(534440),r(633768),r(690512),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.DIRECTION_V=void 0,t.default=function(e){var t=e.items,r=e.itemRender,n=e.flex,s=(e.style,e.options),f=void 0===s?{}:s,y=f.itemWidth,m=void 0===y?100:y,w=f.itemHeight,S=void 0===w?100:w,P=f.refreshFlag,_=void 0===P?"":P,C=f.isMultiItem,k=void 0===C||C,E=f.enableVirtual,I=void 0===E||E,T=f.direction,D=void 0===T?g:T,j=f.headerRender,M=f.footerRender,L=f.isFooterElementMove,R=void 0!==L&&L,A=f.onApi,x=p((0,o.useReducer)((function(e){return e+1}),0),2),N=x[0],F=x[1],B=(0,o.useRef)({isHidden:!0,width:0,height:0}),V=(0,o.useRef)(),U=(0,o.useRef)(null),W=(0,o.useRef)(null),H=(0,o.useRef)(t),z=(0,o.useRef)(new Array(t.size).fill({itemWidth:m,itemHeight:S,hadCalc:!1}));H.current=t;var G=(0,o.useRef)({});G.current.direction=D,G.current.isMultiItem=k,G.current.headerElement=j&&j(),G.current.footerElement=M&&M();var K=p((0,o.useState)({startIndex:-1,endIndex:-1,numOfLine:1,totalRows:-1}),2),q=K[0],Y=K[1];G.current.enableVirtual=I,(0,o.useEffect)((function(){var e=J(q);null==A||A(e)}),[q]),(0,o.useEffect)((function(){setTimeout((function(){X()}),0)})),(0,o.useEffect)((function(){if(z.current.forEach((function(e){e.hadCalc=!1})),t.size<z.current.length)z.current.length=t.size;else if(t.size>z.current.length){var e=z.current.length;z.current.length=t.size,z.current.fill({itemWidth:m,itemHeight:S,hadCalc:!1},e)}}),[t.hashCode()]),(0,o.useEffect)((function(){var e=(0,a.default)(W.current.parentNode,(function(e){var t=e.hide,r=e.width,n=e.height;Object.assign(B.current,{isHidden:t});var o=B.current.width!==r||B.current.height!==n;!t&&o&&(Object.assign(B.current,{width:r,height:n}),void 0===B.current.initEleHeight&&(B.current.initEleHeight=n,G.current.viewWithHeight=W.current.offsetHeight!==n&&n>=h||D!==g),F())}));return function(){e.removeResizeObserve()}}),[]),(0,o.useEffect)((function(){var e=new window.IntersectionObserver((function(e){e.forEach((function(e){var t=e.isIntersecting;e.intersectionRatio;G.current.isIntersecting=t,t&&te()}))}));return e.observe(W.current),function(){e.disconnect(W.current)}}),[]),(0,o.useEffect)((function(){return I&&document.addEventListener("scroll",oe,!0),function(){return document.removeEventListener("scroll",oe,!0)}}),[I]),(0,o.useEffect)((function(){if(I){var e=Q(),t=e.startIndex,r=e.endIndex,n=e.numOfLine,o=e.totalRows;G.current.position={startIndex:t,endIndex:r,numOfLine:n,totalRows:o},Y({startIndex:t,endIndex:r,numOfLine:n,totalRows:o})}I||Y({startIndex:-1,endIndex:-1,numOfLine:1,totalRows:-1})}),[t.size,I]),(0,o.useEffect)((function(){var e;return B.current.isHidden||(e=setTimeout((function(){te()}),0)),function(){return e&&clearTimeout(e)}}),[B.current.height,B.current.width]);var J=function(e){return{jumpToTargetItem:function(t,r){var n,o=G.current.viewWithHeight?null===(n=W.current)||void 0===n?void 0:n.parentNode:(0,c.findScrollableParentElement)(W.current);o&&-1!==t&&G.current.direction===g&&function(e,t,r){var n=r.itemsSize,o=r.numOfLine,i=r.position,a=void 0===i?"auto":i;if(!e||"number"!=typeof t||t<0||t>=n.length)return;for(var l=0,u=Math.ceil(t/o),c=0;c<u;c++)l+=b({lineIndex:c,numOfLine:o,itemsSize:n,direction:g});var s=l+b({lineIndex:u,numOfLine:o,itemsSize:n,direction:g}),f=e.clientHeight,d=e.scrollTop,p=d+f,y=l,m=s-f,h=Math.min((y+m)/2,l),v=d>l,O=p<s,w=null;"top"===a?w=y:"bottom"===a?w=m:"middle"===a?w=h:v?w=y:O&&(w=m);null!==w&&(e.scrollTop=w)}(o,t,{numOfLine:e.numOfLine,itemsSize:z.current,position:r})},resetScrollBar:function(){var e,t=G.current.viewWithHeight?null===(e=W.current)||void 0===e?void 0:e.parentNode:(0,c.findScrollableParentElement)(W.current);t&&(t.scrollTop=0,t.scrollLeft=0)}}},X=function(){U.current&&Array.from(U.current.children).forEach((function(e){var t=Number(e.dataset.rowindex);if(t>=0&&t<z.current.length){if(z.current[t].hadCalc)return;var r=e.offsetHeight,n=e.offsetWidth;if(!r||!n)return;var o=function(e){if(!e)return{marginHeight:0,marginWidth:0};var t=window.getComputedStyle(e),r=parseInt(t["margin-top"]),n=parseInt(t["margin-bottom"]),o=parseInt(t["margin-left"]),i=parseInt(t["margin-right"]);return{marginHeight:r+n,marginWidth:o+i}}(e),i=r+o.marginHeight,a=n+o.marginWidth;z.current[t]={itemHeight:i,itemWidth:a,hadCalc:!0}}}))},Z=function(e){var t=0;if(G.current.viewWithHeight)t=D===g?W.current.parentNode.scrollTop:W.current.parentNode.scrollLeft;else{var r=e||(0,c.findScrollableParentElement)(W.current);if(r){var n=r.getBoundingClientRect().top,o=(V.current&&V.current.getBoundingClientRect()||{}).top,i=void 0===o?0:o;t=Math.max(n-i,0)}}return t||0},Q=function(e){void 0===e&&(e=Z());var t=G.current,r=t.direction,n=t.isMultiItem,o=(0,l.getScrollSize)().width,i=G.current.viewWithHeight?B.current.height:document.body.clientHeight,a=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=n.direction,i=void 0===o?g:o,a=n.isMultiItem,l=void 0===a||a,u=t.width&&l&&i===g?Math.floor(e.width/t.width):1;return{numOfLine:u||1}}({height:i,width:B.current.width+o},{height:z.current[0].itemHeight,width:z.current[0].itemWidth},H.current,{direction:r,isMultiItem:n}),u=a.numOfLine,c=Math.ceil(H.current.size/u),s=$(e,u),f=ee(e+i,u,s),d=Math.ceil((f-s)/2);return{startIndex:Math.max(s-d,0),endIndex:Math.min(f+d,c-1),numOfLine:u,totalRows:c}},$=function(e,t){if(0===z.current.length)return 0;for(var r=0,n=0,o=Math.ceil(H.current.size/t);n<o-1&&r<e;){r+=b({lineIndex:n,numOfLine:t,itemsSize:z.current,direction:D}),n+=1}return n},ee=function(e,t,r){for(var n=O({startIndex:0,endIndex:r-1,numOfLine:t,itemsSize:z.current,direction:D}),o=r+1,i=Math.ceil(H.current.size/t);o<i&&n<e;){n+=b({lineIndex:o,numOfLine:t,itemsSize:z.current,direction:D}),o+=1}return o},te=function(e){if(!B.current.isHidden&&G.current.enableVirtual){var t=Q(e),r=t.startIndex,n=t.endIndex,o=t.numOfLine,i=t.totalRows;G.current.position={startIndex:r,endIndex:n,numOfLine:o,totalRows:i},Y({startIndex:r,endIndex:n,numOfLine:o,totalRows:i})}},re=(0,o.useCallback)((function(e){var t=Z(e);te(t)}),[]),ne=(0,o.useCallback)(u.default.throttle(re,200),[]),oe=function(e){(G.current.viewWithHeight?W.current.parentNode:(0,c.findScrollableParentElement)(W.current))===e.target&&(G.current.viewWithHeight||G.current.isIntersecting)&&ne(e.target)},ie=(0,o.useMemo)((function(){var e=[];if(I){var n=q.startIndex,i=q.endIndex,a=q.numOfLine;if(0===n&&G.current.headerElement&&e.push(G.current.headerElement),R&&n<=1&&G.current.footerElement&&e.push(G.current.footerElement),-1!==n&&-1!==i){var l=t.slice(n*a,(i+1)*a).map((function(e,t){return r(e,n*a+t)}));e.push.apply(e,d(l))}!R&&(i+1)*a>=t.size&&G.current.footerElement&&e.push(G.current.footerElement)}else G.current.headerElement&&e.push(G.current.headerElement),R&&G.current.footerElement&&e.push(G.current.footerElement),e.push.apply(e,d(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e,t){return o.default.createElement("div",null,t)};return e.take(t).map((function(e,t){return r(e,t)}))}(t,t.size,r))),!R&&G.current.footerElement&&e.push(G.current.footerElement);return e}),[N,t.hashCode(),_,I,q]),ae=n||{},le=ae.AlignItems,ue=ae.AlignContent,ce=ae.Direction,se=ae.Wrap,fe=ae.JustifyContent,de=(0,i.default)({AlignItems:le,Direction:ce,JustifyContent:fe,Wrap:D!==g?"nowrap":se,AlignContent:ue}),pe={display:"flex",flexGrow:1,flexShrink:1,maxWidth:"100%",flexDirection:D===g?"column":""},ye=O({startIndex:0,endIndex:q.startIndex-1,numOfLine:q.numOfLine,direction:D,itemsSize:z.current}),me={display:"flex",alignContent:"flex-start",flexGrow:1,transform:D===g?"translateY(".concat(ye,"px)"):"translateX(".concat(ye,"px)")},ge=O({startIndex:0,endIndex:H.current.size-1,numOfLine:q.numOfLine,direction:D,itemsSize:z.current}),he={position:"absolute",top:0,left:0,height:ge,width:1,zIndex:-1},ve=ge-O({startIndex:q.startIndex,endIndex:q.endIndex,numOfLine:q.numOfLine,direction:D,itemsSize:z.current});return o.default.createElement("div",{style:pe,ref:W},I&&o.default.createElement("div",{style:he},o.default.createElement("div",{style:he,ref:V})),o.default.createElement("div",{id:"view-container",ref:U,style:me,className:de},ie),I&&o.default.createElement(v,{totalLength:ve,direction:D}))},r(106208),r(233696),r(505684),r(323784),r(835164),r(492948),r(693917),r(846428),r(336368),r(387912),r(571176),r(497448),r(78504),r(997308),r(86744);var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(795520)),i=s(r(329132)),a=s(r(139224)),l=r(726216),u=s(r(790832)),c=r(482688);function s(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}function d(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){if(e){if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var g=t.DIRECTION_V="vertical",h=20;var v=o.default.forwardRef((function(e,t){var r=e.totalLength,n=void 0===r?0:r,i=e.direction,a={width:1,height:n||0,zIndex:-1};return(void 0===i?g:i)!==g&&(a.height=1,a.width=n),o.default.createElement("div",{ref:t,id:"placeholder",style:a})}));function b(e){var t=e.lineIndex,r=e.numOfLine,n=e.itemsSize,o=e.direction,i=t*r;return n.slice(i,i+r).reduce((function(e,t){var r=o===g?t.itemHeight:t.itemWidth;return r>e&&(e=r),e}),0)}function O(e){for(var t=e.startIndex,r=e.endIndex,n=e.numOfLine,o=e.itemsSize,i=e.direction,a=0,l=t;l<=r;l++){a+=b({lineIndex:l,numOfLine:n,itemsSize:o,direction:i})}return a}},47960:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,o=new Promise((function(n){(t=new window.MutationObserver((function(e){t.disconnect(),t=null,clearTimeout(r),n(e)}))).observe(e,{childList:!0,subtree:!0})})),i=new Promise((function(e){r=setTimeout((function(){t&&t.disconnect(),e("timeout")}),n)}));return Promise.race([o,i])},r(743924),r(387912),r(497448),r(78504),r(977864),r(86744)},31200:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(241872),r(743924),r(205960),r(297336),r(846428),r(336368),r(969e3),r(606200),r(534440),r(76152),r(76124),r(78504),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.translateToHtml=t.getValue=t.getTimeRange=t.getPrecision=t.getNumber=t.getLocaleText=t.getDateTime=t.getDateRange=t.getCombo=t.getCascader=t.default=void 0,r(9692),r(622676),r(233696),r(443616),r(323784),r(686456),r(387912),r(633768),r(660824),r(513640),r(321164),r(997308);var o=b(r(795520)),i=r(891052),a=b(r(671252)),l=b(r(207374)),u=r(211152),c=r(290600),s=b(r(802780)),f=b(r(992216)),d=r(218652),p=r(994088),y=r(786392),m=r(439532),g=b(r(523304)),h=b(r(215992)),v=["className","fileServer","model","style","value"];function b(e){return e&&e.__esModule?e:{default:e}}function O(){return O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},O.apply(this,arguments)}function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e,t,r){var o;return o=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==n(o)?o:String(o))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var C=[s.default.Text,s.default.User,s.default.Basedata,s.default.MulBasedata,s.default.Organization],k=t.translateToHtml=function(e){return(0,f.default)(e||"").replace(/(\r\n)|(\n)|(\r)/g,"<br />").replace(/(\t)/g,'<span style="padding-left: 2em"></span>')},E=t.getDateTime=function(e){var t=e.fieldType,r=e.model,n=e.option,o=e.value,i=n.get(c.DISPLAY_FORMAT)||n.get(c.MASK),a=(0,m.getRootLocale)()||r.getUserLocale(),u=(0,l.default)(o).locale(a);if(!u.isValid())return"";var s=i||1!==n.get(c.REGION_TYPE)?t:"date";return(0,y.formatDate)(u,i,s)||o},I=t.getDateRange=function(e){var t=e.fieldType,r=e.model,n=e.option,o=e.value.split(",");if(2!==o.length)return"";var i=n.get(c.DISPLAY_FORMAT)||n.get(c.MASK),a=(0,m.getRootLocale)()||r.getUserLocale(),u=(0,l.default)(o[0].trim()).locale(a),s=(0,l.default)(o[1].trim()).locale(a),f=u.isValid()?(0,y.formatDate)(u,i,t):"",d=s.isValid()?(0,y.formatDate)(s,i,t):"";return 0===f.length&&0===d.length?"":"".concat(f,"~").concat(d)},T=t.getTimeRange=function(e){if("-1, -1"===e.value)return""},D=t.getPrecision=function(e,t,r){var n=e;"amount"===t?n=r.ap:"price"===t?n=r.pp:"qty"===t&&(n=r.ps);var o,i=(0,m.getMainCurrencyFormatConfig)();if(i)if("price"===t&&void 0===r.pp)n=null!==(o=i.pp)&&void 0!==o?o:n;else if("amount"===t&&void 0===r.ap){var a;n=null!==(a=i.ap)&&void 0!==a?a:n}return n},j=t.getNumber=function(e){var t=e.option,r=e.model,n=e.value,o=t.get(c.DISPLAY_FORMAT)||t.get(c.MASK),i=t.get(c.SCALE),a=t.get(c.ZERO_SHOW),l=t.get(c.NO_DISPLAY_SCALE_ZERO),s=(0,d.getSourceFiledInfoById)(r.pageId,t.get(c.SOURCE_FIELD))((0,u.getGlobalState)())||{},f=t.get(c.NUM_TYPE),p=s.cs,m=s.cn,g=D(i,f,s),h={mask:o,zeroShow:a,decimalLength:0===g?0:g||i,noDisplayDecimalTailZero:l,type:f,symbol:p,code:m,roundMethod:t.get(c.ROUND_METHOD,"0")};return(0,y.formatNumber)(n,h)},M=t.getCombo=function(e){var t,r,n=e.fieldType,i=e.fileServer,a=e.model,l=e.option,u=e.value,f=(0,m.getComponentDataProperty)(a,c.STORE,[c.ITEM,c.STORE])||[],d=null!==(t=l.get("showStyle"))&&void 0!==t?t:0;return n===s.default.MulCombo?(u=u.split(","),r=f.filter((function(e){var t=e.get(0);return u.includes(t)}))):r=f.filter((function(e){var t=e.get(0);return u===t})),u=0===d?"":[],r.forEach((function(e){var t=e.getIn([1,a.getUserLocale()]),r=e.getIn([2]);r&&(r=(0,m.getImgFullPath)(i,r)),0===d?u+=""===u?t:"".concat(t):1===d?u.push(o.default.createElement("img",{style:{width:"100%",display:"block"},src:r})):2===d&&u.push(o.default.createElement("span",null,o.default.createElement("img",{style:{width:"25px",height:"25px"},src:r}),o.default.createElement("span",null,t)))})),u},L=t.getLocaleText=function(e){var t=e.model,r=e.value;return o.default.createElement("span",null,r.get(t.getUserLocale()))},R=t.getCascader=function(e){var t,r=e.model,n=e.value,o=(0,m.getComponentDataProperty)(r,c.STORE,[c.ITEM,c.STORE])||[],i=n.split(","),a=[];return i.forEach((function(e){var n=t?t.getIn([0,"children"]):o;if(n&&0!==n.size){var i=(t=n.filter((function(t){return t.get("value")===e}))).getIn([0,"caption"]),l=(0,m.getLangResult)(r,i);a.push(null===l?e:l)}})),0===a.length?n:a.join("/")},A=t.getValue=function(e,t,r,n,o){var i={date:E,datetime:E,daterange:I,timerange:T,number:j,combo:M,mulcombo:M,localeText:L,cascader:R};return i[e]?i[e]({fieldType:e,value:t,model:r,option:n,fileServer:o})||"":t};t.default=function(e){var t=e.className,r=e.fileServer,n=e.model,l=e.style,u=e.value,f=_(e,v),d=n.getMetaProperty(c.ITEM)||(0,i.Map)(),y=d.get(c.FIELD_TYPE),m=d.get(c.AUTO_WRAP)||!1,b=C.includes(y)&&m?(0,a.default)("kd-cq-field kd-cq-label",h.default["text-wrap"],t):(0,a.default)("kd-cq-field kd-cq-label",h.default["text-omit"],t),w=d.get(c.TEXT_ALIGN);if(w&&(l=S(S({},l),{},{textAlign:w})),[s.default.Textarea,s.default.LargeText].includes(y)){var P=u||"",E=k(u);return b=l.width?(0,a.default)("kd-cq-field kd-cq-label",h.default["text-wrap"],t):(0,a.default)("kd-cq-field kd-cq-label",h.default["text-omit"],t),o.default.createElement(g.default,null,o.default.createElement("div",O({className:b,dangerouslySetInnerHTML:{__html:E},style:l,title:P},f)))}var I=d.get(c.DISPLAY_PROP);if(I&&i.List.isList(u)){var T=y===s.default.MulBasedata,D=d.get(c.CONNECTOR);u=(0,p.getBaseDataDisplayProp)(u,I,T,D)}var j=A(y,u,n,d,r),M=Array.isArray(j)?"":j;return y===s.default.LocaleText&&(M=u.get(n.getUserLocale())),o.default.createElement("div",O({className:b,style:l,title:M},f),y===s.default.Combo&&j,y!==s.default.Combo&&o.default.createElement("span",null,j||""))}},45560:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(505684),r(323784),r(743924),r(693917),r(205960),r(976896),r(721300),r(846428),r(336368),r(708896),r(969e3),r(606200),r(534440),r(76152),r(670864),r(76124),r(880920),r(836887),r(633768),r(690512),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(9692),r(622676),r(233696),r(835164),r(297336),r(387912),r(997308),r(86744);var o,i,a,l,u=F(r(795520)),c=F(r(369396)),s=r(891052),f=F(r(671252)),d=N(r(211152)),p=r(439532),y=F(r(329132)),m=N(r(348896)),g=r(738704),h=r(366208),v=F(r(459236)),b=r(738704),O=r(331428),w=F(r(773088)),S=r(559100),P=F(r(84904)),_=F(r(32956)),C=F(r(523304)),k=F(r(930672)),E=F(r(385384)),I=F(r(696428)),T=r(783168),D=F(r(729848)),j=F(r(47960)),M=r(558848),L=r(545072),R=r(226596),A=F(r(645292));function x(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(x=function(e){return e?r:t})(e)}function N(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=x(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}function F(e){return e&&e.__esModule?e:{default:e}}function B(){return B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},B.apply(this,arguments)}function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function U(e,t,r){return(t=G(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function W(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return H(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return H(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,G(n.key),n)}}function G(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function K(e,t,r){return t=Y(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return J(e)}(e,q()?Reflect.construct(t,r||[],Y(e).constructor):t.apply(e,r))}function q(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(q=function(){return!!e})()}function Y(e){return Y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Y(e)}function J(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(e,t){return X=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},X(e,t)}var Z=(o=(0,m.default)(!1),i=(0,k.default)("advcon"),(0,E.default)(a=o(a=(0,m.ContainerLockWrap)(a=i((l=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=K(this,t,[e])).handleOnIntersection=function(e,t){r.currentVisible=e,e&&!r.state.showChildren&&r.pageModel.waitLoadPromise().then((function(){d.default[d.IS_IE]?setTimeout((function(){r.currentVisible&&r.setState({showChildren:!0})}),500):r.setState({showChildren:!0})}))},r.recordExpandedStatus=function(e){(0,g.setPageUIState)(r.props.model,"ep",e)},r.handleFullScreen=function(){var e=!r.state.fullScreen;r.setState({fullScreen:e});var t=r.props.model,n=t.pageId,o=t.key;(0,T.updateFullScreenGlobalData)(e,"".concat(n,"_").concat(o))},r.updateTipsConfig=r.updateTipsConfig.bind(J(r));var n=!1!==e.model.getMetaProperty("lazyload"),o=!!window.__nolazyload__||!n,i=e.model.getInitExpaned();return r.pageModel=(0,D.default)(e.model.pageId),!o&&i&&(o=r.pageModel.isImmediatelyLoad(e.model.key))&&(r.isImmediatelyLoad=!0),r.state={expand:i,fullScreen:!1,showChildren:o,tipsConfig:null,showDot:!1,shouldResetPadding:!1},r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&X(e,t)}(t,e),r=t,n=[{key:"updateTipsConfig",value:function(e,t,r){if(r){var n=this.state.tipsConfig;n||(n=(0,M.createTipsConfig)(e,t),this.setState({tipsConfig:n})),(0,M.saveTipsInfo)(n,r)}else this.setState({tipsConfig:null})}},{key:"componentDidMount",value:function(){var e=this,t=this.props,r=t.model,n=t.id,o=t.pageId,i=(0,M.getTips)(r);if(i&&this.updateTipsConfig(r.pageId,r.key,i),r||n&&o){if(setTimeout((function(){(0,b.setControlMount)(a,l,!0),e.isImmediatelyLoad&&(0,j.default)(e.advCon,500).then((function(t){var r=d.default[d.IS_IE]?1500:100;setTimeout((function(){e.pageModel.addImmediatelyLoadNum()}),r)}))}),0),!r.getMetaProperty("collapsible"))return;var a=r?r.pageId:o,l=r?r.key:n;this.removeSubscribeControlMethod=(0,g.subscribeControlMethod)(a,l,"directives",(function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((function(t){if("setCollapse"===t.methodname)if(t.args){var r=W(t.args,3),n=r[0],o=r[1],i=void 0===o||o,a=r[2];e.setState({expand:!n},(function(){!n&&a&&c.default.findDOMNode(e).scrollIntoView({behavior:"smooth",block:"center"})})),i&&e.recordExpandedStatus(!n)}else console.warn("setCollapse args is not exit")}))})),this.removePageDataListener=(0,g.addDataChangeListener)(a,[L.CHILDREN_VALIDATE_ERROR,l],(function(t){e.setState({showDot:t})}))}this.setState({shouldResetPadding:!(0,R.isInDialog)(o)||(0,R.isInFullscreenDialog)(o)})}},{key:"componentWillUnmount",value:function(){this.dispose=!0,this.removeSubscribeControlMethod&&this.removeSubscribeControlMethod();var e=this.props.model?this.props.model.pageId:this.props.pageId,t=this.props.model?this.props.model.key:this.props.id;(0,b.setControlMount)(e,t,!1)}},{key:"componentWillReceiveProps",value:function(e){var t,r,n=(0,M.getTips)(this.props.model),o=(0,M.getTips)(e.model);(0,s.is)(n,o)||this.updateTipsConfig(null===(t=e.model)||void 0===t?void 0:t.pageId,null===(r=e.model)||void 0===r?void 0:r.key,o)}},{key:"onHandleClick",value:function(e,t){if(t){var r=!this.state.expand;this.setState({expand:r}),this.recordExpandedStatus(r)}}},{key:"getTriggerType",value:function(e){if(e){var t=e.get("type"),r=e.get("triggerType");return"text"===t?r||"hover":r||"click"}return"hover"}},{key:"render",value:function(){var e=this;if(!this.context)return null;var t=this.props,r=t.model,n=(t.dispatch,r.pageId,r.key,this.state),o=n.fullScreen,i=n.expand,a=n.showDot,l=n.tipsConfig,c=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(Object(r),!0).forEach((function(t){U(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},(0,p.getCommonStyle)(r)),m=r.getMetaProperty("collapsible"),h=r.getMetaProperty("maximize"),b=(0,p.getCommonClass)(this.props.model),k=b.Grow,E=b.Shrink,D=b.AlignSelf,j=(0,S.getUIDefaultProps)(_.default.ADV_CON,[P.default.FOLDED_FONT_CLASS]),M=(0,S.getUIDefaultProps)(_.default.ADV_CON,[P.default.TOOLBAR_STYLE]),R=(0,S.getUIDefaultProps)(_.default.ADV_CON,[P.default.HIDE_COLLAPSE_ICON]),x=1===M,N=j||"kdfont kdfont-right",F=(0,f.default)(A.default.collapseIcon,"kd-cq-collapse-icon",U({},A.default.expandIcon,!this.state.expand),"secondary-text-in-light",[N]),W=A.default.title,H=(0,f.default)(A.default.panel,U(U({},A.default.mt0,x),A.default.ml0,R)),z=(0,f.default)("kd-cq-collapse-summary",A.default.summaryPanel),G=A.default.toolbar,K={position:"relative"};c=this.state.shouldResetPadding?(0,T.resetPadding)(c):c,m&&!i&&(c.paddingBottom=6),m||(F=A.default.hide,W=(0,f.default)(U(U({},A.default.title,!0),A.default.cur,!0)),H=(0,f.default)(U(U(U({},A.default.panel,!0),A.default.collapsePanel,!0),A.default.mt0,x)),K.marginLeft=0,c.paddingRight=c.paddingRight?c.paddingRight:0,c.paddingLeft=c.paddingLeft?c.paddingLeft:0),G=(0,f.default)(U(U(U({},A.default["full-screen-right-padding"],h),A.default.toolbar,!0),A.default.type1,x)),this.state.expand||(H=(0,f.default)(U(U(U(U({},A.default.panel,!0),A.default.collapsePanel,!0),A.default.hide+" hidden",!0),A.default.mt0,x)),G=(0,f.default)(U(U({},A.default["full-screen-right-padding"],h),A.default.invisible,!0)));var q=r.meta.get("items",new s.List),Y=q.filter((function(e){return"advconsummarypanel"===e.get("type")}));Y&&(Y=Y.updateIn([0,"wr"],(function(){return!1})).updateIn([0,"ai"],(function(){return"center"})));var J=q.filter((function(e){return"advcontoolbar"===e.get("type")}));(0,g.getPageData)(r.pageId,[r.key,L.ATTACH_TOOLBAR_TO_TAB])&&J&&(0,g.setPageData)(r.pageId,[J.getIn([0,"id"]),L.ATTACH_TOOLBAR_TO_TAB],!0),x&&J&&(J=J.updateIn([0,"type"],(function(){return"toolbar"})).updateIn([0,"items"],(0,s.List)(),(function(e){return e.map((function(e){return e.set("type","baritem")}))})),J.getIn([0,"s","p","l"])||(J=J.updateIn([0,"s","p","l"],(function(){return"0px"}))));var X=q.filter((function(e){return"advconchild"===e.get("type")}));s.List.isList(X)&&X.get(0)&&(X=X.setIn([0,"lazyload"],this.props.model.getMetaProperty("lazyload")));var Z=r.getMetaLocaleProperty("text"),Q=(0,f.default)("kd-cq-container kd-cq-advcon",U(U(U(U(U(U({},A.default.advCon,!0),A.default.customized,j),A.default["adv-con"],!0),A.default["adv-con-full-screen"],h&&this.state.fullScreen),A.default.maximize,h),A.default.collapsible,m),(0,y.default)({Grow:k,Shrink:E,AlignSelf:D})),$=!0,ee=Y.get(0);$=!(!ee||!ee.get("items")||!Y.get(0).get("items").size);var te,re,ne=(0,f.default)(U(U({"kd-cq-full-screen-icon":!o,"kd-cq-exit-full-screen-icon":o,"kdfont kdfont-quanping":!o,"kdfont kdfont-guanbiquanping":o},A.default["full-screen"],!0),"kd-hover-color",!0)),oe=(0,f.default)([A.default.collapse],"primary-text-in-light",U({},A.default["collapse-with-tips"],l)),ie=(0,S.getUIDefaultProps)(_.default.ADV_CON,[P.default.TITLE_FONT_SIZE]),ae=(0,S.getUIDefaultProps)(_.default.ADV_CON,[P.default.SUB_TITLE_FONT_SIZE]);void 0!==ie&&(te={fontSize:ie}),void 0!==ae&&(re={fontSize:ae});var le,ue=(0,p.parseSubComponents)(J,r.pageId,(0,d.getGlobalState)()),ce=u.default.createElement("div",{className:(0,f.default)(G,"kd-cq-advcon-toolbar")},ue.map((function(e){return u.default.cloneElement(e,{containerKey:r.key})})));return l&&(le=u.default.createElement(I.default,{tips:l})),u.default.createElement("div",B({className:Q,style:c,ref:function(t){e.advCon=t}},this.props.attachData,{"data-ctrl-type":"advcon","data-pid":r.pageId,"data-ctrl-key":r?r.key:this.props.id}),u.default.createElement("div",{className:(0,f.default)(A.default.bar,U({},A.default["bar-fold"],!i))},u.default.createElement("div",{className:(0,f.default)(A.default.box,U({},A.default["max-width"],i))},u.default.createElement("div",{className:oe,onClick:function(t){return e.onHandleClick(t,m)}},!R&&u.default.createElement("i",{className:F}),u.default.createElement(C.default,null,u.default.createElement("span",{className:(0,f.default)(W,"kd-cq-container-title"),style:te,title:Z},Z))),h?u.default.createElement("span",{className:ne,onClick:this.handleFullScreen,title:o?(0,O.getLangMsg)({key:"tabs.key0002"}):(0,O.getLangMsg)({key:"tabs.key0001"})}):null,!i&&a&&u.default.createElement("div",{className:A.default["dot-icon-wrap"]},u.default.createElement("span",{className:(0,f.default)(A.default["dot-icon"],"kdfont kdfont-jinggao-mian")})),le,$?u.default.createElement("div",{className:z,style:re},(0,p.parseSubComponents)(Y,r.pageId,(0,d.getGlobalState)())):null),!x&&ce),x&&ce,u.default.createElement("div",{className:H,style:K},!this.state.showChildren&&u.default.createElement(v.default,{onIntersection:this.handleOnIntersection}),this.state.showChildren&&u.default.createElement(w.default,{enabledLazyLoad:d.default[d.IS_IE]&&!this.isImmediatelyLoad,pageId:r.pageId,childrenMeta:X,state:(0,d.getGlobalState)()})))}}],n&&z(r.prototype,n),o&&z(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(u.default.Component),l.contextType=h.PageLoadDataCompleteContext,a=l))||a)||a)||a)||a);t.default=Z},869624:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(743924),r(205960),r(336368),r(708896),r(606200),r(670864),r(880920),r(836887),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(622676),r(613468),r(233696),r(505684),r(241872),r(835164),r(492948),r(693917),r(297336),r(846428),r(300116),r(387912),r(78504),r(997308);var o,i,a,l=M(r(795520)),u=M(r(369396)),c=M(r(671252)),s=M(r(540900)),f=r(211152),d=r(823008),p=M(r(959616)),y=r(970160),m=r(891052),g=M(r(348896)),h=M(r(385384)),v=r(633793),b=M(r(878348)),O=r(796512),w=r(439532),S=r(199860),P=M(r(49532)),_=r(790832),C=M(r(139224)),k=r(545072),E=r(738704),I=r(592500),T=r(334916),D=r(290600),j=M(r(468608));function M(e){return e&&e.__esModule?e:{default:e}}function L(){return L=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},L.apply(this,arguments)}function R(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,A(n.key),n)}}function A(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function x(e,t,r){return t=F(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return B(e)}(e,N()?Reflect.construct(t,r||[],F(e).constructor):t.apply(e,r))}function N(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(N=function(){return!!e})()}function F(e){return F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},F(e)}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e,t){return V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},V(e,t)}var U=(o=(0,g.default)(!1),(0,h.default)(i=o((a=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=x(this,t,[e])).handlePermission=function(e){if(e){var t=e.noPerData,n=void 0===t?[]:t,o=r.state.items,i=(0,I.getPermissionItems)({items:o,noPerData:n,model:r.props.model});r.setState({items:i})}},r.setZIndex=function(){!r.containerRef.current||r.containerRef.current.parentElement.children.length<=1||Array.from(r.containerRef.current.parentElement.children).forEach((function(e){if(e!==r.containerRef.current){var t=e.style.cssText;(!t||t.indexOf("z-index")<0)&&(e.style.cssText="".concat(t||"",";z-index: 1;"))}}))},r.addIntersectionObserver=function(){var e={threshold:[.99999999],root:u.default.findDOMNode(r.toolbarRef.current)};if(r.intersectionObserver=new window.IntersectionObserver((function(e){e.forEach((function(e,t){var n=e.target.id,o=e.boundingClientRect.width,i=r.findIndex(n);i>-1&&(r.cacheItemWidths[i]=o)}));var t=r.cacheItemWidths.reduce((function(e,t){return e+t}),0);t>0&&r.setState({placeholderWidth:t})}),e),r.toolbarRef.current){var t=u.default.findDOMNode(r.toolbarRef.current);Array.from(t.children).forEach((function(e){r.intersectionObserver.observe(e)}))}},r.addMutationObserver=function(){if(r.mutationObserver=new window.MutationObserver((function(e){e.forEach((function(e){"childList"===e.type&&(r.intersectionObserver.disconnect(),Array.from(u.default.findDOMNode(r.toolbarRef.current).children).forEach((function(e){r.intersectionObserver.observe(e)})))}))})),r.toolbarRef.current){var e=u.default.findDOMNode(r.toolbarRef.current);r.mutationObserver.observe(e,{childList:!0})}},r.findIndex=function(e){if(null==e)return!1;r.props.model;return r.state.items.findIndex((function(t){return t.get("id")===e}))},r.resetFirstInvisibleItemIndex=function(){if(r.cacheItemWidths.length&&r.containerWidth)for(var e=0,t=0;t<r.cacheItemWidths.length;t++){if(e+(r.cacheItemWidths[t]||0)-r.containerWidth>.5)return void r.setState({firstInvisibleItemIndex:t});if(t===r.cacheItemWidths.length-1&&e+r.cacheItemWidths[t]<=r.containerWidth)return void r.setState({firstInvisibleItemIndex:Number.MAX_SAFE_INTEGER});e+=r.cacheItemWidths[t]||0}},r.addResizeListener=function(){var e=(0,_.debounce)((function(e){r.containerWidth!==e.width&&(r.containerWidth=e.width,r.resetFirstInvisibleItemIndex())}),300),t=u.default.findDOMNode(r.toolbarRef.current);r.resizeObserver=(0,C.default)(t,(function(t){return e(t)}))},r.getTipsSlot=function(e){try{if(e){var t=u.default.findDOMNode(r.toolbarRef.current),n=null==t?void 0:t.querySelector("[data-btn-key=".concat(e,"]"));return null==n?void 0:n.querySelector('[data-is-tip="true"]')}}catch(e){return null}},r.getInvisibleItems=function(){var e=r.state.firstInvisibleItemIndex;if(e===Number.MAX_SAFE_INTEGER)return[];var t=r.props.model;return r.state.items.slice(e).filter((function(e){var t=e.get("id"),n=e.get("vi");return r.getVisible(t,n)})).map((function(e,n){var o=(0,f.getGlobalState)(),i=t.getUserLocale(),a=t.getDefaultLang(),l=new p.default(t.pageId,e,o).getMetaLocaleProperty("text"),u=e.get("id"),c=e.get("opk"),s=r.getLocked(u,e.get("l")),d=e.get("items")||[],y=(0,m.fromJS)(d.filter((function(e){return r.getVisible(e.get("key"))})).map((function(e){return(0,m.fromJS)({key:e.get("key"),title:(0,O.getValueByPath)(e,["title"],{current:i,default:a}),opk:e.get("operationKey"),lock:r.getLocked(e.get("key"),e.get("l"))})})));return(0,m.fromJS)({title:l,key:u,opk:c,lock:s,items:y,isDropdown:(null==y?void 0:y.size)>0})}))},r.handleDropdownVisibleChange=function(e){r.setState({dropdownVisible:e})},r.handleSubDropdownVisibleChange=function(e,t){var n=r.state.subDropdownVisible;n[t]=e,r.setState({subDropdownVisible:n})},r.handleClick=r.handleClick.bind(B(r)),r.getVisible=r.getVisible.bind(B(r)),r.getLocked=r.getLocked.bind(B(r)),r.state={items:e.model.getMetaProperty("items")||(0,m.List)(),firstInvisibleItemIndex:Number.MAX_SAFE_INTEGER,dropdownVisible:!1,subDropdownVisible:{},placeholderWidth:0,containerStyle:{}},r.toolbarRef=l.default.createRef(),r.moreBtnRef=l.default.createRef(),r.containerRef=l.default.createRef(),r.cacheItemWidths=[],r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V(e,t)}(t,e),r=t,n=[{key:"componentDidMount",value:function(){var e=(0,E.getPageData)(this.props.model.pageId,k.PERMISSION_PARAMS);e&&this.handlePermission(e),this.removePageDataListener=(0,E.addDataChangeListener)(this.props.model.pageId,k.PERMISSION_PARAMS,this.handlePermission),this.addIntersectionObserver(),this.addMutationObserver(),this.addResizeListener(),this.setZIndex()}},{key:"componentWillUnmount",value:function(){this.intersectionObserver&&this.intersectionObserver.disconnect(),this.resizeObserver&&this.resizeObserver.removeResizeObserve(),this.mutationObserver&&this.mutationObserver.disconnect(),this.removePageDataListener&&this.removePageDataListener()}},{key:"componentWillReceiveProps",value:function(e){(0,m.is)(e.model.getMetaProperty("items"),this.props.model.getMetaProperty("items"))||this.setState({items:e.model.getMetaProperty("items")||(0,m.List)(),firstInvisibleItemIndex:Number.MAX_SAFE_INTEGER})}},{key:"handleClick",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.props,o=n.model,i=n.dispatch,a=this.getTipsSlot(e);(0,v.interceptActionFn)({model:o,interceptArgs:{id:e,opk:r,triggerEle:a}},(function(e){var r=e.model,n=e.interceptArgs,o=r.pageId,a=n.id,l=n.opk;(0,T.waitUpdateValueComplete)(o).then((function(){i((0,y.menuItemClick)(r,[a,l])),t.setState({dropdownVisible:!1,subDropdownVisible:{}})}))}))}},{key:"getVisible",value:function(e,t){var r=this.props.model;return!this.props.getVisible||this.props.getVisible(r,e,t)}},{key:"getLocked",value:function(e,t){var r=this.props.model;return!!this.props.getLocked&&this.props.getLocked(r,e,t)}},{key:"render",value:function(){var e=this,t=this.props,r=t.model,n=t.toolbarLoading,o=this.state,i=o.placeholderWidth,a=o.items,u=(0,E.getPageData)(r.pageId,[r.key,k.ATTACH_TOOLBAR_TO_TAB]),s=r.getUserLocale(),y=r.getDefaultLang(),g=(0,f.getGlobalState)(),h=this.state.firstInvisibleItemIndex,v=h===Number.MAX_SAFE_INTEGER&&a?a:a.slice(0,h),_=this.getInvisibleItems(),C=h!==Number.MAX_SAFE_INTEGER&&h!==a.size,I=v[0]&&v[0].get("fc"),T=v[0]&&v[0].get("bc"),M=(0,P.default)({items:_,model:r,onClick:this.handleClick,visible:this.state.subDropdownVisible,onVisibleChange:this.handleSubDropdownVisibleChange});return l.default.createElement("div",{ref:this.containerRef},l.default.createElement(d.AdvConToolbar,L({ref:this.toolbarRef,pageId:r.pageId,attachToTab:u},this.props.attachData),v?v.map((function(t,o){var i,a=new p.default(r.pageId,t,g),u=a.getMetaLocaleProperty("text"),c=t.get("id"),f=t.get("opk"),d=t.get("replacedOperationKey"),h=t.get("vi"),v=t.get("l"),S=(0,w.fixColor)(t.get("fc")),P=(0,w.fixColor)(t.get("bc")),_=t.get("items")||[],C=t.get("type"),k=_.map((function(t){var r={};if(r.Background=t.get("background"),r.Key=t.get("key"),r.Title=(0,O.getValueByPath)(t,["title"],{current:s,default:y}),r.OperationKey=t.get("operationKey"),r.vi=t.get("vi"),r.l=t.get("l"),e.getVisible(r.Key))return r}));m.List.isList(k)&&(k=k.toJS());var E=e.getVisible(c,h),I=e.getLocked(c,v),T=t.get(D.OPERATION_STYELE),j=t.get("items")&&0===(null===(i=k)||void 0===i?void 0:i.length)&&(2===T||!T&&!f);return E&&!j?l.default.createElement(b.default,{itemModel:a,model:a,pageId:null==a?void 0:a.pageId,title:u,key:c,id:c,type:C,index:o,OperationKey:f,replacedOperationKey:d,DropdownItems:k,style:{color:S,background:P},onDropDownClick:e.handleClick,onClick:function(t){return e.handleClick(c,f)},getVisible:e.getVisible,getLocked:e.getLocked,locked:I,toolbarLoading:n,containerKey:r.key}):null})):null,C&&l.default.createElement(S.Dropdown,{menu:M,popperClassName:"kd-cq-dropdown kd-cq-dropdown-select-type kd-cq-toolbar-more-dropdown",trigger:"click",visible:this.state.dropdownVisible,onVisibleChange:this.handleDropdownVisibleChange},l.default.createElement("div",{className:(0,c.default)(j.default["more-btn"],{"link-color":!this.getLocked()}),style:{color:I,background:T},ref:this.moreBtnRef},""))),l.default.createElement("div",{className:j.default["div-placeholder"],style:{width:i}}))}}],n&&R(r.prototype,n),o&&R(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(l.default.Component),a.contextTypes={store:s.default.object},i=a))||i)||i);t.default=U},878348:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(743924),r(205960),r(846428),r(336368),r(708896),r(606200),r(670864),r(880920),r(387912),r(836887),r(78504),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(297336),r(721300);var o,i=p(r(795520)),a=(p(r(369396)),r(823008)),l=r(463108),u=p(r(837428)),c=p(r(385384)),s=p(r(696428)),f=r(558848),d=r(891052);function p(e){return e&&e.__esModule?e:{default:e}}function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},y.apply(this,arguments)}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,g(n.key),n)}}function g(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function h(e,t,r){return t=b(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return O(e)}(e,v()?Reflect.construct(t,r||[],b(e).constructor):t.apply(e,r))}function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(v=function(){return!!e})()}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},w(e,t)}var S=(0,c.default)(o=(0,u.default)(o=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=h(this,t,[e])).handleClick=r.handleClick.bind(O(r)),r.handleDropDownClick=r.handleDropDownClick.bind(O(r)),r.state={tipsConfig:null},r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.model,r=e.isFromCardRow,n=e.data,o=e.option,i=e.containerKey,a=(0,f.getRowPropertyTips)({model:t,isFromCardRow:r,data:n,option:o});a&&this.updateTipsConfig(t.pageId,i,a)}},{key:"componentWillReceiveProps",value:function(e){var t,r=this.props,n=r.model,o=r.isFromCardRow,i=r.data,a=r.option,l=(0,f.getRowPropertyTips)({model:n,isFromCardRow:o,data:i,option:a}),u=(0,f.getRowPropertyTips)({model:e.model,isFromCardRow:e.isFromCardRow,data:e.data,option:e.option});(0,d.is)(l,u)||this.updateTipsConfig(null===(t=e.model)||void 0===t?void 0:t.pageId,e.containerKey,u)}},{key:"updateTipsConfig",value:function(e,t,r){if(r){var n=this.state.tipsConfig;n||(n=(0,f.createTipsConfig)(e,t),this.setState({tipsConfig:n})),(0,f.saveTipsInfo)(n,r)}else this.setState({tipsConfig:null})}},{key:"handleClick",value:function(e,t){var r=this.props,n=r.locked,o=r.onClick;n||o(e,t)}},{key:"handleDropDownClick",value:function(e,t){(0,this.props.onDropDownClick)(e,t)}},{key:"render",value:function(){var e,t,r=this.props,n=r.OperationKey,o=r.replacedOperationKey,u=r.type,c=this.state.tipsConfig,f=null===(e=(0,l.getkeyCodeInfoByOpk)(n))||void 0===e?void 0:e.name;return c&&(t=i.default.createElement(s.default,{tips:c})),i.default.createElement(a.AdvConToolbarItem,y({Name:this.props.title,OperationKey:n,replacedOperationKey:o,isRunTime:!0,type:u,DropdownItems:this.props.DropdownItems,onDropDownClick:this.handleDropDownClick,onClick:this.handleClick,getVisible:this.props.getVisible,getLocked:this.props.getLocked,locked:this.props.locked,style:this.props.style,id:this.props.id,pageId:this.props.pageId,shortCutTips:f,toolbarLoading:this.props.toolbarLoading,slot:t},this.props.attachData))}}])&&m(r.prototype,n),o&&m(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(i.default.Component))||o)||o;t.default=S},559944:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(743924),r(205960),r(846428),r(708896),r(606200),r(670864),r(880920),r(836887),r(78504),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(233696),r(443616),r(835164),r(297336),r(336368),r(387912),r(660824),r(997308);var o,i,a=C(r(795520)),l=C(r(671252)),u=r(891052),c=r(211152),s=C(r(976528)),f=C(r(720756)),d=r(439532),p=C(r(517064)),y=C(r(348896)),m=r(290600),g=C(r(385384)),h=r(218652),v=r(994104),b=r(545072),O=r(273248),w=r(738704),S=C(r(882976)),P=r(331428),_=C(r(793008));function C(e){return e&&e.__esModule?e:{default:e}}function k(){return k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},k.apply(this,arguments)}function E(e,t,r){return(t=T(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,T(n.key),n)}}function T(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function D(e,t,r){return t=M(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return L(e)}(e,j()?Reflect.construct(t,r||[],M(e).constructor):t.apply(e,r))}function j(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(j=function(){return!!e})()}function M(e){return M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},M(e)}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e,t){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},R(e,t)}var A=(o=(0,y.default)(!0),(0,g.default)(i=o(i=function(e){function t(e){var r,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=D(this,t,[e])).getIsOutMaxDataCount=function(){var e=n.props,t=e.model,r=e.dispatch,o=n.props.model,i=o.key,a=o.pageId,l=window.performance.now()+"";(0,w.setPageData)(a,[i,O.QUERY_EXCEED_MAX_COUNT_LAST_TIMESTAMP],l),r((0,v.invokeControlMethodSingle)(t,"queryExceedMaxCount",[l],!0)),(0,w.setPageData)(a,[i,"toolbarFakerCount"],!0)},n.setExceedMaxCountCbFun=function(e){var t=n.props.model,r=t.pageId,o=t.key;(0,h.pageIsExist)(r)((0,c.getGlobalState)())&&(!1===e?(0,w.setPageData)(r,[o,"__cbListener__","getRealCount"],{success:!0}):!0===n.props.model.getDataProperty(["value","isgetsumdata"])&&(0,w.setPageData)(r,[o,"getSumData"],!0))},n.getListView=function(e){var t=e[0],r=n.props.model,o=0;return r.meta.get(m.ITEMS,(0,u.List)()).forEach((function(e,r){e.get("id")===t&&(o=r)})),o},n.getPlainText=function(e,t,r){var o=n.props.model;n.props.dispatch((0,v.invokeControlMethodOnly)({pageId:o.pageId,key:o.key},"getPlainText",[e,t,r]))},n.state={activeIndex:-1,viewType:""},n.getMergeGroupRk=null,n.renderViewTypeList=[],n.setListView=n.setListView.bind(L(n)),n.pkFieldNames=null===(r=e.model)||void 0===r||null===(r=r.getMetaProperty("entryentities"))||void 0===r?void 0:r.map((function(e){return e.get("pkFieldName")})),n}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R(e,t)}(t,e),r=t,(n=[{key:"componentWillMount",value:function(){var e=this.props.model,t=e.pageId,r=e.key,n=(0,w.getPageData)(t,[r,"activeListView"]),o=n?this.getListView(n):this.getActiveItem(this.props),i=-1===o?0:o;this.setState(Object.assign({},this.state,{activeIndex:i,viewType:e.meta.getIn([m.ITEMS,i,"type"])}),(function(){}))}},{key:"componentDidMount",value:function(){var e=this.props.model,t=e.pageId,r=e.key;this.setActiveIndexFromMeta(this.props),this.setListViewHandler=(0,w.addDataChangeListener)(t,[r,"activeListView"],this.setListView),this.setRealCountHander=(0,w.addDataChangeListener)(t,[r,"setExceedMaxCount"],this.setExceedMaxCountCbFun),this.getRealCountHandle(),this.setLoadding(e)}},{key:"setActiveIndexFromMeta",value:function(e){var t=this.getActiveItem(e,this.state.activeIndex),r=-1===t?0:t;this.state.activeIndex!=t&&this.setState(Object.assign({},this.state,{activeIndex:r,viewType:this.props.model.meta.getIn([m.ITEMS,r,"type"])}))}},{key:"setLoadding",value:function(e){var t=(0,P.getLangMsg)("BusyLayer.loading"),r=E(E(E({},e.getUserLocale(),t),"timeout",{time:600,methods:["entryRowClick"]}),"supportMethod",["setRowSort","getGridDataByFilter","next","previous","setPageIndex","setPageRows","selectAllRows","entryRowClick","doubleClickRow","itemClick","getRowData","selectPageAllRows","clearPageSelection","addRowSelection","clearRowSelection"]);(0,w.setControlBusyTip)(e.pageId,e.key,r)}},{key:"componentWillUnmount",value:function(){this.setListViewHandler&&this.setListViewHandler(),this.setRealCountHander&&this.setRealCountHander()}},{key:"componentDidUpdate",value:function(e){var t=this.props.model;t&&e.model&&t.getDataProperty([b.TIME_STAMP_FRESH])!==e.model.getDataProperty([b.TIME_STAMP_FRESH])&&this.getRealCountHandle();var r,n=e.model;(0,u.is)(n.getMetaProperty("entryentities"),t.getMetaProperty("entryentities"))||(this.pkFieldNames=null===(r=t.getMetaProperty("entryentities"))||void 0===r?void 0:r.map((function(e){return e.get("pkFieldName")})))}},{key:"getRealCountHandle",value:function(){var e=this.props.model,t=e.pageId,r=e.key,n=e.getFormConfig()||{},o=e.getMetaProperty("isindexmode")||!1;n.isf7&&!o||!0!==e.getDataProperty(["value","isgetrealcount"])?!0===e.getDataProperty(["value","isgetsumdata"])&&(0,w.setPageData)(t,[r,"getSumData"],!0):!0===e.getDataProperty(["value","iscustomquery"])?(this.props.dispatch((0,v.invokeControlMethodSingle)(this.props.model,"getRealCount",[],!0)),(0,w.setPageData)(t,[r,"toolbarFakerCount"],!0)):(S.default.log("componentDidUpdate "),this.getIsOutMaxDataCount())}},{key:"getActiveItem",value:function(e,t){for(var r=-1,n=e.model,o=n.meta.get(m.DEFAULT_VIEW,null),i=n.meta.get(m.ITEMS,(0,u.List)()),a=0;a<i.size;a++){var l=i.get(a);if(e.getVisible(n,l.get(m.ID),l.get(m.VISIBLE_CTRL))){if(null!=t&&a===t)return a;-1==r&&(r=a),o&&l.get(m.ID)==o&&(r=a)}}return r}},{key:"setListView",value:function(e){this.setState({activeIndex:this.getListView(e)})}},{key:"componentWillReceiveProps",value:function(e){this.setActiveIndexFromMeta(e)}},{key:"activeView",value:function(e,t,r){this.setState({activeIndex:e,viewType:t}),this.props.dispatch((0,v.activeView)(this.props.model,[r]))}},{key:"renderToolBar",value:function(){var e=this,t=[],r=this.props.model;if(r.meta.get(m.ITEMS,(0,u.List)()).count()<2)return null;var n=0;return r.meta.get(m.ITEMS).forEach((function(o,i){if(e.props.getVisible(r,o.get(m.ID),o.get(m.VISIBLE_CTRL))){n+=1;var l=o.get("type"),u=o.get("id");"grid"===l?t.push(a.default.createElement("li",{key:o.get("id"),className:e.state.activeIndex===i?"theme-fc":null,onClick:function(){return e.activeView(i,l,u)}},a.default.createElement("i",{className:"kdfont kdfont-shitu_liebiao3 kd-hover-color"}))):"cardview"===l?t.push(a.default.createElement("li",{key:o.get("id"),className:e.state.activeIndex===i?"theme-fc":null,onClick:function(){return e.activeView(i,l,u)}},a.default.createElement("i",{className:"kdfont kdfont-shitu_kapian2 kd-hover-color"}))):"qingview"===l?t.push(a.default.createElement("li",{key:o.get("id"),className:e.state.activeIndex===i?"theme-fc":null,onClick:function(){return e.activeView(i,l,u)}},a.default.createElement("i",{className:"kdfont kdfont-shitu_tubiao3 kd-hover-color"}))):"customview"===l&&t.push(a.default.createElement("li",{key:o.get("id"),className:e.state.activeIndex===i?"theme-fc":null,onClick:function(){return e.activeView(i,l,u)}},a.default.createElement("i",{className:"kdfont kdfont-qudao kd-hover-color"})))}})),n<2?null:a.default.createElement("ul",{className:p.default.toolbar},t)}},{key:"renderPanel",value:function(e){var t=this,r=[],n=this.props.model,o={};return n.meta.get("items",(0,u.List)()).forEach((function(e,i){o=i!=t.state.activeIndex?{display:"none"}:{};var l=e.get("type"),u=t.renderViewTypeList.includes(l);(u||i===t.state.activeIndex)&&(!u&&t.renderViewTypeList.push(l),r.push(a.default.createElement("div",{className:p.default.panel+("none"===o.display?" hidden":""),style:o,key:i},a.default.cloneElement((0,f.default)(n.pageId,e,(0,c.getGlobalState)()),{parentModel:n,isActived:i===t.state.activeIndex}))))})),r}},{key:"render",value:function(){var e=this,t=this.props.model;if(!t.meta.get("items"))return null;var r=(0,d.getCommonClass)(t);(0,d.getComponentDataProperty)(t,"float","float",!1);var n=(0,d.getComponentDataProperty)(t,"switchOffset","switchOffset",!1),o=Object.assign({},(0,d.getCommonStyle)(t),this.props.style);return a.default.createElement(_.default,{getPlainText:this.getPlainText,pkFieldNames:this.pkFieldNames},a.default.createElement(s.default,k({style:o,rendPanel:function(t){return e.renderPanel(t)},rendToolbar:function(){return e.renderToolBar()},className:(0,l.default)("kd-cq-control kd-cq-bill-list",p.default["bill-list"]),id:t.key},r,{isFloatModel:!0,switchOffset:n,viewType:this.state.viewType},this.props.attachData)))}}])&&I(r.prototype,n),o&&I(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(a.default.Component))||i)||i);t.default=A},320656:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(743924),r(205960),r(846428),r(336368),r(708896),r(606200),r(670864),r(880920),r(387912),r(836887),r(78504),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(297336);var o,i=C(r(795520)),a=C(r(747224)),l=C(r(562507)),u=r(439532),c=C(r(385672)),s=C(r(348896)),f=r(323968),d=r(704424),p=r(251536),y=r(237373),m=r(891052),g=C(r(385384)),h=C(r(696428)),v=r(290600),b=r(580032),O=r(545072),w=r(248672),S=C(r(930672)),P=r(558848),_=r(290600);function C(e){return e&&e.__esModule?e:{default:e}}function k(){return k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},k.apply(this,arguments)}function E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,I(n.key),n)}}function I(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function T(e,t,r){return t=j(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return M(e)}(e,D()?Reflect.construct(t,r||[],j(e).constructor):t.apply(e,r))}function D(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(D=function(){return!!e})()}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},j(e)}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e,t){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},L(e,t)}var R=(0,s.default)(!1)(o=(0,a.default)(l.default)(o=(0,S.default)(O.SPLIT_SCREEN_TYPE_ATTACHMENT_PANEL)(o=(0,g.default)(o=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=T(this,t,[e]))._getLocked=function(){return r.props.getLocked(r.props.model)},r.beforeUpload=function(e){r.props.dispatch((0,f.beforeUpload)(r.props.model,e))},r.beforeDownload=function(e){r.props.dispatch((0,f.beforeDownload)(r.props.model,e))},r.uploadFile=function(e){r.props.dispatch((0,f.uploadFile)(r.props.model,e))},r.afterUpload=function(e){r.props.dispatch((0,f.reportUploadResult)(r.props.model,e))},r.removeFile=function(e){r.props.dispatch((0,f.removeFile)(r.props.model,e))},r.remarkClick=function(e){r.props.dispatch((0,f.remarkClick)(r.props.model,e))},r.confirmDelete=function(e){r.props.dispatch((0,f.comfirmDelete)(r.props.model,e))},r.attachOperationCount=function(e){r.props.dispatch((0,f.attachOperationCount)(r.props.model,e))},r.attachOperaClick=function(e){r.props.dispatch((0,f.attachOperaClick)(r.props.model,e))},r.rename=function(e){r.props.dispatch((0,f.rename)(r.props.model,e))},r.dragFile=function(e){r.props.dispatch((0,f.dragFile)(r.props.model,e))},r.updateControlValue=function(e){var t=r.props,n=t.model,o=t.dispatch,i=n.pageId,a=n.key;(0,p.mergeState)(y.UPDATE_CONTROL_VALUE,i,{key:a,value:(0,m.fromJS)(e),updateData:!1},o)},r.handlePreviewInNewTab=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(r.attachmentConfig.openByNewTab){var o=[(null==n?void 0:n.length)>0?{activedIndex:e,sortedUids:t,panelData:n}:{activedIndex:e,sortedUids:t}];r.props.dispatch((0,f.previewInNewTab)(r.props.model,o))}},r.updateTipsConfig=r.updateTipsConfig.bind(M(r)),r.state={tipsConfig:null},r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L(e,t)}(t,e),r=t,n=[{key:"componentDidMount",value:function(){var e=this.props.model,t=(0,P.getTips)(e);t&&this.updateTipsConfig(e.pageId,e.key,t),this.attachmentConfig=(0,u.getAttachInfoFromRootConfig)()}},{key:"componentWillReceiveProps",value:function(e){var t,r,n=(0,P.getTips)(this.props.model),o=(0,P.getTips)(e.model);(0,m.is)(n,o)||this.updateTipsConfig(null===(t=e.model)||void 0===t?void 0:t.pageId,null===(r=e.model)||void 0===r?void 0:r.key,o)}},{key:"updateTipsConfig",value:function(e,t,r){if(r){var n=this.state.tipsConfig;n||(n=(0,P.createTipsConfig)(e,t),this.setState({tipsConfig:n})),(0,P.saveTipsInfo)(n,r)}else this.setState({tipsConfig:null})}},{key:"render",value:function(){var e=this.props,t=e.model,r=e.dispatch,n=this.state.tipsConfig,o=t.getMetaLocaleProperty("text"),a=t.getMetaProperty("ext"),l=t.getMetaProperty("collapsible"),s=t.getMetaProperty("defaultcollapse"),f=t.getMetaProperty("sct"),p=t.getMetaProperty("scd"),y=t.getMetaProperty("smk"),m=t.getMetaProperty("maxatmsize"),g=t.getDataProperty("collapseCFlag"),O=t.getMetaProperty("san")||!1,S=t.getMetaProperty("maxatmcount")||0,P=t.getMetaProperty("checkDuplicateFileName")||!1,C=t.getMetaProperty("istn")||!1,E=t.getDataProperty("collapse"),I=t.getDataValue(),T=t.getMetaProperty(w.DRAGBLE);this.attachmentConfig||(this.attachmentConfig=(0,u.getAttachInfoFromRootConfig)());var D,j=this.attachmentConfig,M=j.attachmentUploadMaxSize,L=j.forbidfiletype,R=j.fileTypeWhiteList,A=j.previewType,x=j.openByNewTab,N=(j.wpsAppId,(0,u.getCommonStyle)(t)),F=(0,u.getCommonClass)(t),B=F.Grow,V=F.Shrink,U=F.AlignSelf,W=(0,u.getComponentDataProperty)(t,v.ATTACHMENT_DATE_FORMATTER,v.ATTACHMENT_DATE_FORMATTER,!1),H=(0,u.getComponentDataProperty)(t,v.ATTACHMENT_SHOWOPERABUTTON,v.ATTACHMENT_SHOWOPERABUTTON,!1)||!1,z=(0,b.getMaxSize)(m,M),G=t.getMetaProperty("sortField")||w.ATTACHMENT_SORT_FIELD.FileName,K=t.getMetaProperty("sortType")||w.ATTACHMENT_SORT_TYPE.NoSort;n&&(D=i.default.createElement(h.default,{tips:n}));var q=l?"":"kd-cq-container kd-cq-attachmentpanel",Y=(0,b.getPreviewLimitSize)(),J=(0,b.getLifeCycle)(t.pageId,t.getMetaProperty(_.FIELD_TYPE)),X=null!=J&&J.beforeDownload?this.beforeDownload:null,Z=null==J?void 0:J.fileEncrypt;return i.default.createElement(c.default,k({id:t.key,className:q,model:t,locale:t.getUserLocale(),dispatch:r,disabled:this._getLocked(),displayData:I,beforeDownload:X,beforeUpload:this.beforeUpload,uploadFile:this.uploadFile,afterUpload:this.afterUpload,removeFile:this.removeFile,remarkClick:this.remarkClick,updateControlValue:this.updateControlValue,style:N,maxSize:z,Grow:B,Shrink:V,AlignSelf:U,Collapsible:l,defaultCollapse:s,collapseCFlag:g,collapse:E,extName:a,Name:o,showCreator:f,showCreateDate:p,showMark:y,showFormByTips:function(){return r(d.showFormByTips.apply(void 0,arguments))},userLocal:t.getUserLocale(),showAttachmentNum:O,comfirmDelete:this.confirmDelete,maxAtmCount:S,showThumbnails:C,attachOperationCount:this.attachOperationCount,attachOperaClick:this.attachOperaClick,forbidfiletype:L,dateFormatter:W,fileTypeWhiteList:R,showOperaBut:H,previewType:A,openByNewTab:x,renameFile:this.rename,sortField:G,sortType:K,onNewTabPreview:this.handlePreviewInNewTab,checkDuplicateFileName:P,slot:D,previewLimitSize:Y,isFileEncrypt:Z,dragFile:this.dragFile,dragble:T},this.props.attachData))}}],n&&E(r.prototype,n),o&&E(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(i.default.Component))||o)||o)||o)||o;t.default=R},580076:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(622676),r(233696),r(743924),r(205960),r(846428),r(336368),r(708896),r(969e3),r(606200),r(534440),r(76152),r(670864),r(76124),r(880920),r(836887),r(78504),r(776512),r(997308),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(443616),r(976896),r(297336),r(721300),r(387912),r(690512),r(660824);var o,i,a,l,u=R(r(795520)),c=r(891052),s=r(439532),f=r(899760),d=r(704424),p=r(564491),y=M(r(348896)),m=M(r(371320)),g=r(111648),h=r(218652),v=M(r(385384)),b=M(r(956788)),O=M(r(182956)),w=M(r(696428)),S=r(633793),P=R(r(728277)),_=M(r(927576)),C=M(r(720056)),k=r(496260),E=r(589200),I=r(463108),T=M(r(837428)),D=r(334916),j=r(558848);function M(e){return e&&e.__esModule?e:{default:e}}function L(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(L=function(e){return e?r:t})(e)}function R(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=L(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}function A(){return A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},A.apply(this,arguments)}function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){F(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function F(e,t,r){return(t=V(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,V(n.key),n)}}function V(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function U(e,t,r){return t=H(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return z(e)}(e,W()?Reflect.construct(t,r||[],H(e).constructor):t.apply(e,r))}function W(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(W=function(){return!!e})()}function H(e){return H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},H(e)}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e,t){return G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},G(e,t)}var K=(o=(0,b.default)(),i=(0,y.default)(!1,!0),a=(0,m.default)(),o(l=(0,v.default)(l=(0,O.default)(l=i(l=(0,_.default)(l=a(l=(0,T.default)(l=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=U(this,t,[e]))._handleClick=function(){var e=r.props.model,t=e.pageId;e.meta.get("tc")?(0,C.default)("importCert",{data:{pageId:t},callback:function(e){var t=r.props.model,n=t.pageId,o=t.key;r.props.dispatch((0,h.convertAppModelFunctionAction)((0,h.setControlPostValue)(n,o,{certInfo:e}))),r.props.dispatch((0,f.click)(r.props.model))},failCallback:function(e){e.status===k.CERT_STATUS_NOCERT?g.certService.showCertComfirm(t):e.status===k.CERT_STATUS_NOPLGUIN?g.certService.showDownloadComfirm(t):e.status===k.CERT_STATUS_TOPESA_NOCERT?g.certService.showNoCertComfirm(t):e.status===k.CERT_STATUS_IWSA_NOCERT?g.certService.showNoIWSACertMessage(t):e.status===k.CERT_STATUS_NOT_FOUND?g.certService.showNotFoundCertComfirm(t):g.certService.showSignFailedMessage(t)}}):(0,S.interceptActionFn)(N(N({},r.props),{},{click:function(){return r.props.dispatch(f.click.apply(void 0,arguments))}}),P.default)},r.updateTipsConfig=r.updateTipsConfig.bind(z(r)),r.handleClick=r.handleClick.bind(z(r)),r.forAutoTestActions={click:f.click},r.state={tipsConfig:null},r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&G(e,t)}(t,e),r=t,n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.model,r=e.isFromCardRow,n=e.data,o=e.option,i=(0,j.getRowPropertyTips)({model:t,isFromCardRow:r,data:n,option:o});i&&this.updateTipsConfig(t.pageId,t.key,i)}},{key:"componentWillReceiveProps",value:function(e){var t,r,n=this.props,o=n.model,i=n.isFromCardRow,a=n.data,l=n.option,u=(0,j.getRowPropertyTips)({model:o,isFromCardRow:i,data:a,option:l}),s=(0,j.getRowPropertyTips)({model:e.model,isFromCardRow:e.isFromCardRow,data:e.data,option:e.option});(0,c.is)(u,s)||this.updateTipsConfig(null===(t=e.model)||void 0===t?void 0:t.pageId,null===(r=e.model)||void 0===r?void 0:r.key,s)}},{key:"componentWillMount",value:function(){this.props.init&&this.props.init(this.props.model)}},{key:"updateTipsConfig",value:function(e,t,r){if(r){var n=this.state.tipsConfig;n||(n=(0,j.createTipsConfig)(e,t),this.setState({tipsConfig:n})),(0,j.saveTipsInfo)(n,r)}else this.setState({tipsConfig:null})}},{key:"handleClick",value:function(e){var t=this;if(!this._getLock()){e.stopPropagation();var r=this.props,n=r.model,o=r.beforeAction,i=n.getMetaProperty("type"),a=n.pageId,l=n.key;(o&&o(e,{controlType:i,controlKey:l})||(0,D.waitUpdateValueComplete)(a)).then((function(){t._handleClick()}))}}},{key:"_getLock",value:function(){var e=this.props,t=e.model,r=e.getCardLocked;return r?r(t):this.props.isLocked}},{key:"_getVisible",value:function(){var e=this.props,t=e.model,r=e.getCardVisible;return r?r(t):this.props.isVisible}},{key:"getUrl",value:function(e,t){return(0,s.getImgFullPath)(t,e)}},{key:"render",value:function(){var e,t=this,r=this.props,n=r.model,o=r.fieldAction,i=r.loading,a=r.isFromCardRow,l=(r.data,r.option,this.state.tipsConfig),c=(0,s.getCommonStyle)(n),f=(0,P.getRowIndex)(this.props),y=n.getMetaProperty("followTheme"),m=this._getLock(n),g=(0,s.getCommonClass)(n),h=g.Grow,v=g.Shrink,b=g.AlignSelf,O=(0,s.getComponentDataProperty)(n,"imageKey","imageKey",!1),S=n.getFormConfig();O=this.getUrl(O,S.fileserver);var _,C=(0,s.hasSetBorder)(c),k=(0,s.getComponentDataProperty)(n,"text","text",!0),T=(0,s.getComponentDataProperty)(n,"imagePath","imagePath",!1),D=(0,s.getComponentDataProperty)(n,"imgWidth","imgWidth",!1),j=(0,s.getComponentDataProperty)(n,"imgHeight","imgHeight",!1),M=this._getVisible(n),L=n.getMetaProperty("id"),R=n.getMetaProperty("opk"),x=null===(e=(0,I.getkeyCodeInfoByOpk)(R))||void 0===e?void 0:e.name,N=o&&o[L];if(N){var F=(0,s.getCardRulesResult)(N,M,m,c);M=F.visibility,m=F.disabled,c=F.style}if(!M)return u.default.createElement("div",{id:n?n.key+"_hide_control":"hide_control",style:{display:"none"}});l&&(_=u.default.createElement(w.default,{tips:l}));var B,V=(0,s.getCommonStyle)(n)||{},U=V.backgroundColor&&V.backgroundColor!==(0,s.getCurrentTheme)(),W=(0,E.isWhiteColorBg)(V.backgroundColor)||!y&&!V.backgroundColor,H=V.color===(0,s.getCurrentTheme)(),z=V.backgroundColor===(0,s.getCurrentTheme)(),G=n&&n.getMetaProperty("s")&&n.getMetaProperty("s").get("b"),K=G&&G.toString().includes("themeColor"),q=i||{},Y=q.showLoading,J=void 0!==Y&&Y,X=q.rowKey;return B=a?J&&"undefined"!==X&&f===X:J,u.default.createElement(p.Button,A({model:n,opk:R,Grow:h,Shrink:v,AlignSelf:b,style:c,disabled:m,onClick:this.handleClick,id:n.key,isThemeColor:H,isThemeBorder:K,isThemeBg:z,text:k,ButtonStyle:n.getMetaProperty("btns"),ImageKey:T||O,hasBorder:C,ImgWidth:D,ImgHeight:j,FollowTheme:y,showFormByTips:function(){return t.props.dispatch(d.showFormByTips.apply(void 0,arguments))},userLocal:n.getUserLocale(),loading:i,hasNonThemeBg:U,noBg:W,fontClass:n.getMetaProperty("fontClass"),slot:_,rowIndex:f,showLoading:B},this.props.attachData,{shortCutTips:x}))}}],n&&B(r.prototype,n),o&&B(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(u.Component))||l)||l)||l)||l)||l)||l)||l);t.default=K},322088:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(743924),r(205960),r(297336),r(846428),r(336368),r(708896),r(606200),r(534440),r(670864),r(880920),r(387912),r(836887),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(9692),r(835164);var o,i,a=w(r(795520)),l=b(r(540900)),u=r(211152),c=b(r(122696)),s=b(r(720756)),f=r(439532),d=r(899760),p=w(r(348896)),y=r(510372),m=b(r(671252)),g=b(r(525376)),h=b(r(397528)),v=r(334916);function b(e){return e&&e.__esModule?e:{default:e}}function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(O=function(e){return e?r:t})(e)}function w(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=O(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}function S(){return S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},S.apply(this,arguments)}function P(e,t,r){return(t=C(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,C(n.key),n)}}function C(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function k(e,t,r){return t=I(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,E()?Reflect.construct(t,r||[],I(e).constructor):t.apply(e,r))}function E(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(E=function(){return!!e})()}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},I(e)}function T(e,t){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},T(e,t)}var D=(0,p.default)(!0,!0)(o=(0,p.ContainerLockWrap)((i=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=k(this,t,[].concat(n))).getFieldAction=function(t){var r=e.props,n=r.model,o=r.fieldAction,i=n.getMetaProperty("id"),a=o&&o[i];if(a){if("setc"!==t)return a.action===t;if("setc"===a.action)return a}},e.getCardLocked=function(t){return null!=e.props.getCardLocked&&(!(!e.props.parentLocked&&!e.cardFlexPanelLocked)||e.props.getCardLocked(t))},e}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T(e,t)}(t,e),r=t,(n=[{key:"_getVisible",value:function(){var e=this.props,t=e.model,r=e.getCardVisible,n=e.isFromCardRow;return!this.getFieldAction("hidec")&&(n?!r||r(t):this.props.getVisible(t))}},{key:"handleClick",value:function(e){e.stopPropagation();var t=this.props,r=t.model,n=t.dispatch,o=t.beforeAction;(o&&o(e)||(0,v.waitUpdateValueComplete)(r.pageId)).then((function(){n((0,d.click)(r,[]))}))}},{key:"getStyle",value:function(e,t,r,n){var o=(0,f.getCommonStyle)(e),i=(0,y.getControlRowProperty)({data:r,model:e,option:n});i&&(o=(0,y.mergeCustomStyle)(o,i));var a=e.getMetaProperty("id"),l=this._getVisible(e),u=t&&t[a];if(u){var c=(0,f.getCardRulesResult)(u,l,void 0,o);l=c.visibility,o=c.style}return{style:o,visibility:l}}},{key:"render",value:function(){var e=this,t=this.props,r=t.model,n=t.isSelected,o=t.showHover,i=t.cardViewLocked,l=t.fieldAction,d=t.data,p=t.option,y=t.isMulti,v=t.isFromCardRow,b=t.cardMode,O=t.beforeAction,w=t.keyIndex,_=t.isListView,C=t.disableClick,k=this.getStyle(r,l,d,p),E=k.style,I=k.visibility,T=(0,f.getCommonClass)(r),D=r.meta.get("items"),j=r.getMetaProperty("clickable"),M=r.getMetaProperty("hsi"),L=r.getMetaProperty("hhi"),R=r.getMetaProperty("collapsible"),A=r.getMetaProperty("defaultcollapse"),x=r.getMetaLocaleProperty("text"),N=r.getMetaProperty("fd"),F=r.getMetaProperty("dp");if(!D)return a.default.createElement("div",{id:r?r.key+"_no_items":"no_items",style:{display:"none"}});if(!I)return a.default.createElement("div",{id:r?r.key+"_hide_visible":"hide_visible",style:{display:"none"}});var B=(0,m.default)(P(P(P(P({},g.default.cursor,j),h.default.hover_show_item,M),h.default.hover_hide_item,L),h.default.card_disable_click,C));return this.cardFlexPanelLocked=!!v&&(this.props.getCardLocked(r)||this.getFieldAction("lockc")),a.default.createElement(c.default,S({"data-fixedcard":"isfixedcard",model:r,Name:x,FloatingDock:N,DockingPosition:F,Collapsible:R,defaultCollapse:A,className:B,style:E},T,{onClick:function(t){return j&&e.handleClick(t)}}),D.map((function(t,a){return(0,s.default)(r.pageId,t,(0,u.getGlobalState)(),void 0,{showHover:o,isSelected:n,fieldAction:l,onClick:e.props.onClick,cardViewLocked:i,data:e.props.data,fmtinfo:e.props.fmtinfo,option:e.props.option,key:t.get("id"),gridKey:e.props.gridKey,rowKey:e.props.rowKey,getSelectRowsPostData:e.props.getSelectRowsPostData,activeRow:e.props.activeRow,activeFocusRow:e.props.activeFocusRow,isFromCardRow:v,getCardVisible:v?e.props.getCardVisible:void 0,setSelRows:e.props.setSelRows,isMulti:y,getSelectorDom:e.props.getSelectorDom,parentLocked:e.props.parentLocked||e.cardFlexPanelLocked,getCardLocked:v?e.getCardLocked:void 0,cardMode:b,beforeAction:O,keyIndex:w,isListView:_})})))}}])&&_(r.prototype,n),o&&_(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(a.Component),i.contextTypes={store:l.default.object},o=i))||o)||o;t.default=D},845076:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(241872),r(743924),r(205960),r(846428),r(336368),r(708896),r(606200),r(670864),r(880920),r(836887),r(78504),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(233696),r(443616),r(323784),r(835164),r(297336),r(76124),r(387912),r(633768),r(660824),r(997308);var o,i,a,l=k(r(795520)),u=r(891052),c=k(r(790832)),s=r(211152),f=r(564491),d=k(r(720756)),p=r(439532),y=k(r(348896)),m=k(r(385384)),g=k(r(397528)),h=r(331428),v=k(r(671252)),b=k(r(84300)),O=r(334916),w=r(290600),S=r(704712),P=r(674260),_=r(868256),C=["keyIndex","rowIndex","model","setUnderlinePos","LayoutStyle","isSelected","data","option","isMulti","cardMode","isListView","ignoreStyles","disableClick"];function k(e){return e&&e.__esModule?e:{default:e}}function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},E.apply(this,arguments)}function I(e,t,r){return(t=j(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function D(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,j(n.key),n)}}function j(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function M(e,t,r){return t=R(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return A(e)}(e,L()?Reflect.construct(t,r||[],R(e).constructor):t.apply(e,r))}function L(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(L=function(){return!!e})()}function R(e){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},R(e)}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e,t){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},x(e,t)}var N=[w.Ctrls.KDLabel,w.Ctrls.KDImage,w.Ctrls.KDFontIcon],F=(o=(0,b.default)(!1,!1,!0),i=(0,y.default)(!1),(0,m.default)(a=o(a=i(a=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=M(this,t,[e])).handleClick=function(e){var t=r.props.model,n=e&&e.nativeEvent;(0,O.waitUpdateValueComplete)(t.pageId).then((function(){r.activeRow(n),r.props.onClick(n)}))},r.beforeAction=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.props.model,o=t.controlType,i=t.controlKey,a=N.includes(o),l=e.nativeEvent;return(0,O.waitUpdateValueComplete)(n.pageId).then((function(){r.activeRow(l,{labelSelect:a,controlKey:i})}))},r.getSelectorDom=function(e){r.selectorDom=e},r.getCardLocked=function(e){return null!=r.props.getCardLocked&&(!!(r.props.parentLocked||r.props.isLocked||r.cardRowPanelLocked)||r.props.getCardLocked(e))};var n=e.model.meta.get("rules"),o=null;if(n)try{o=JSON.parse(n)}catch(e){(0,h.getLangMsg)({key:"cardrowpanel.key0001"})}return r.state={rules:o},r.activeRow=r.activeRow.bind(A(r)),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x(e,t)}(t,e),r=t,n=[{key:"shouldComponentUpdate",value:function(e,t){var r=this.props,n=r.model,o=r.data,i=r.option,a=r.isSelected,l=r.fmtinfo,c=r.formStatus,s=r.isLocked,f=r.colCtrl,d=r.cardViewLocked;return!((0,u.is)(a,e.isSelected)&&(0,u.is)(o,e.data)&&(0,u.is)(l,e.fmtinfo)&&(0,u.is)(i,e.option)&&(0,u.is)(n.meta,e.model.meta)&&c===e.formStatus&&s===e.isLocked&&(0,u.is)(f,e.colCtrl)&&d===e.cardViewLocked)}},{key:"componentDidMount",value:function(){var e=this;this.removeDataChangeListener=(0,P.addDataChangeListener)(_.KEY_CHANGE_THEME_ACTION,(function(){e.forceUpdate()}))}},{key:"componentWillUnmount",value:function(){this.removeDataChangeListener()}},{key:"componentDidUpdate",value:function(){}},{key:"activeRow",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.labelSelect,n=void 0!==r&&r,o=t.controlKey,i=void 0===o?"0":o,a=e.target===this.selectorDom;this.props.activeRow&&this.props.activeRow(n,i,a)}},{key:"_getVisible",value:function(){var e=this.props,t=e.model,r=e.getCardVisible;return!r||r(t)}},{key:"getStyle",value:function(e,t,r){var n=(0,p.getCommonStyle)(e),o=e.getMetaProperty("id"),i=t&&t[o];i&&"setc"===i.action&&(n[i.k]=i.v),Array.isArray(r)&&r.forEach((function(e){n[e]=void 0}));var a=e.meta.get("bkimgfield");if(a){var l=this.props,u=l.data,s=l.option,f=u.get(s.get(a));if(f){if(!/^http(s)*/.test(c.default.toLower(f))){var d=e.getFormConfig();f=(0,p.getImgFullPath)(d.fileserver,f,!0)}n.backgroundImage="url(".concat(f,")")}}return n}},{key:"render",value:function(){var e,t,r=this,n=this.props,o=n.keyIndex,i=n.rowIndex,a=n.model,u=n.setUnderlinePos,c=(n.LayoutStyle,n.isSelected),y=(n.data,n.option,n.isMulti),m=n.cardMode,h=n.isListView,b=n.ignoreStyles,O=n.disableClick,w=(T(n,C),a.getMetaProperty("showsel")),P=a.getMetaProperty("pointercursor"),_=w&&c,k=a.getMetaProperty("selectstyle")||1,D=h||!1!==a.getMetaProperty("showhov"),j=(0,p.getCommonClass)(a),M=a.meta.get("items"),L=(0,p.getCardRowRules)(this.props,this.state.rules),R=this.getStyle(a,L,b),A=this._getVisible();if(!M||!A)return null;var x=(0,v.default)(I(I({},g.default.hover_show_panel,!0),g.default.card_disable_click,O));return this.cardRowPanelLocked=null===(e=(t=this.props).getCardLocked)||void 0===e?void 0:e.call(t,a),l.default.createElement(S.ControlValueChangeContext.Consumer,null,(function(e){return l.default.createElement(f.CardRowPanel,E({ref:function(e){r.cardRowPanel=e},keyIndex:o,rowIndex:i,setUnderlinePos:u},j,{style:R,className:x,showSelector:w,showPointer:P,isSelected:_,showHover:D,notDesigner:!0,selectStyleType:k,onClick:r.handleClick},r.props.attachData),M.map((function(e){return(0,d.default)(a.pageId,e,(0,s.getGlobalState)(),void 0,{fieldAction:L,isSelected:c,isFromCardRow:!0,onClick:r.props.onClick,data:r.props.data,fmtinfo:r.props.fmtinfo,option:r.props.option,key:e.get("id"),gridKey:r.props.gridKey,rowKey:r.props.rowKey,activeRow:r.props.activeRow,activeFocusRow:r.props.activeFocusRow,cardViewLocked:r.props.cardViewLocked,getCardVisible:r.props.getCardVisible,setSelRows:r.props.setSelRows,isMulti:y,getSelectorDom:r.getSelectorDom,cardMode:m,keyIndex:o,beforeAction:r.beforeAction,isListView:h,parentLocked:r.props.parentLocked||r.cardRowPanelLocked,getCardLocked:r.getCardLocked})})))}))}}],n&&D(r.prototype,n),o&&D(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(l.default.Component))||a)||a)||a);t.default=F},89648:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(743924),r(205960),r(297336),r(846428),r(708896),r(606200),r(534440),r(670864),r(880920),r(387912),r(836887),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(9692);var o,i,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=m(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(795520)),l=r(439532),u=y(r(671252)),c=y(r(329132)),s=y(r(901420)),f=y(r(348896)),d=y(r(385384)),p=r(334916);function y(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}function g(e,t,r){return(t=v(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,v(n.key),n)}}function v(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function b(e,t,r){return t=w(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,O()?Reflect.construct(t,r||[],w(e).constructor):t.apply(e,r))}function O(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(O=function(){return!!e})()}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function S(e,t){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},S(e,t)}var P=(o=(0,f.default)(!1),(0,d.default)(i=o(i=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=b(this,t,[].concat(n))).handleClick=function(t){var r=e.props,n=r.onClick,o=r.beforeAction,i=r.model;t.stopPropagation();var a=i.pageId,l=o&&o(t)||(0,p.waitUpdateValueComplete)(a),u=t.nativeEvent;l.then((function(){n&&n(u)}))},e}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.isMulti,r=e.cardMode;t&&0===r||this.props.getSelectorDom&&this.props.getSelectorDom(this.selector)}},{key:"render",value:function(){var e=this,t=this.props,r=t.model,n=t.isSelected,o=(0,l.getCommonClass)(r),i=o.Grow,f=o.Shrink,d=o.AlignSelf,p=(0,u.default)(g({},s.default.selector,!0),(0,c.default)({Grow:i,Shrink:f,AlignSelf:d})),y=(0,u.default)(g(g(g(g(g(g({},s.default.selectorImg,!0),"kdfont",!0),"kdfont-fuxuankuangweixuanzhong_fang",!n),"kdfont-fuxuankuangxuanzhong_fang",n),"theme-fc",n),"kd-hover-color",!0)),m=(0,l.getCommonStyle)(r),h={fontSize:m.fontSize};return a.default.createElement("div",{className:p,style:m,id:r.key},a.default.createElement("span",{className:y,style:h,onClick:this.handleClick,ref:function(t){e.selector=t}}))}}])&&h(r.prototype,n),o&&h(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(a.Component))||i)||i);t.default=P},385400:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(697060),r(360776),r(505684),r(743924),r(693917),r(205960),r(976896),r(721300),r(846428),r(708896),r(606200),r(534440),r(670864),r(880920),r(836887),r(633768),r(690512),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(182320),r(909112),r(9692),r(941408),r(622676),r(305092),r(613468),r(233696),r(443616),r(241872),r(323784),r(686456),r(835164),r(492948),r(927184),r(297336),r(336368),r(387912),r(804092),r(23544),r(571176),r(660824),r(997308),r(86744);var o,i,a=F(r(795520)),l=F(r(369396)),u=F(r(671252)),c=r(891052),s=r(211152),f=r(439532),d=F(r(720756)),p=r(290600),y=F(r(556500)),m=F(r(348896)),g=r(994104),h=r(735696),v=r(704424),b=r(218652),O=F(r(352260)),w=F(r(385384)),S=r(804552),P=F(r(479176)),_=r(331428),C=F(r(139224)),k=r(559100),E=F(r(84904)),I=F(r(32956)),T=r(1816),D=r(738704),j=r(663416),M=r(273248),L=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=N(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(161976)),R=F(r(704712)),A=F(r(514692)),x=F(r(397528));function N(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(N=function(e){return e?r:t})(e)}function F(e){return e&&e.__esModule?e:{default:e}}function B(){return B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},B.apply(this,arguments)}function V(e){return function(e){if(Array.isArray(e))return U(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return U(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return U(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function W(e,t,r){return(t=z(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function H(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,z(n.key),n)}}function z(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function G(e,t,r){return t=q(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Y(e)}(e,K()?Reflect.construct(t,r||[],q(e).constructor):t.apply(e,r))}function K(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(K=function(){return!!e})()}function q(e){return q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},q(e)}function Y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J(e,t){return J=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},J(e,t)}var X=(o=(0,m.default)(!1),(0,w.default)(i=o(i=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=G(this,t,[e])).getDataModel=function(){return r.props.parentModel||r.props.model},r.setPostData=function(e){var t=r.getDataModel(),n=t.pageId,o=t.key;r.props.dispatch((0,b.convertAppModelFunctionAction)((0,b.setControlPostValue)(n,o,e||r.postData)))},r.initializePreSelRow=function(e){r.preSelRow=-1},r.setVirtualViewApi=function(e){r.virtualViewApi=e},r.invokeControlMethods=function(e){e.forEach((function(e){var t=e.methodname;if(t===j.M_REMOVE_CARD_ROW)r.initializePreSelRow();else"".concat(t," is not been implemented")}))},r.isArrowDisabled=function(){var e;clearTimeout(e),e=setTimeout((function(){var e=r.state.singleRow,t=r.getSrollAreaParam(!1),n=t.innerWidth,o=t.outerWidth,i=t.childWidth,a=t.fixCardWidth,l=n>o,u=r.state.translateX,c=e[0]?e[0]+1:0,s=r.isSplitPage,f=r.pageRows;!0===s&&c>f&&(c-=f*(r.pageIndex-1));var d=a+c*i;!l||e.length<1||d<o?u=0:d>o&&(u=d-o),r.state.showArrow===l&&r.state.translateX===u||r.setState({showArrow:l,translateX:u})}),100)},r.getCardModeSelectedData=function(){return r.state.isMulti?{rowKeys:r.state.selectRows,rowInfos:r.state.selectRowsInfos}:{rowKeys:r.state.singleRow,rowInfos:r.state.singleRowInfo}},r.getPostColsData=function(e,t,n,o,i){var a=[],l=r.getDataModel().getDataProperty(["value","postcols"]);Object.values(n).forEach((function(e){if(l&&l.size>0){var t=[];l.forEach((function(r){return t.push(e.get(o.get(r)))})),a.push(t)}}));var u={fieldKey:i||"0",row:e,selRows:t,isClientNewRow:!1,clientNewRows:"",selDatas:a};return r.state.isMulti||(u.preSelRow=r.preSelRow),u},r.getCards=function(e,t){var n=r.props.model,o=n.getMetaProperty("ls");return"0"!==e.get("cardType")?r.getLoopCards(e,t):(0,d.default)(n.pageId,e,(0,s.getGlobalState)(),void 0,{key:t,cardType:0,LayoutStyle:o})},r.setUnderlinePos=function(e){r.isShowUnderline()&&r.setState({underlinePos:e})},r.isShowUnderline=function(){var e=r.props.model,t=1===e.getMetaProperty("ls"),n=e.getMetaProperty("point"),o=r.getRowSize()>0;return!r.state.isMulti&&t&&n&&o},r.getVitureItems=function(e){var t=r.props,n=t.model,o=(t.parentModel||n).getDataValue();return(null==o?void 0:o.get("rows"))||(0,c.List)()},r.renderFixedCard=function(e){return function(){var t=r.props.model,n=t.getMetaProperty("items").get(e),o=t.getMetaProperty("ls");return"0"===n.get("cardType")?(0,d.default)(t.pageId,n,(0,s.getGlobalState)(),void 0,{key:e,cardType:0,LayoutStyle:o}):null}},r.getFooterFixedCardIndex=function(){var e=r.props.model.getMetaProperty("items"),t=-1,n=e.get(-1);return 3===e.size&&"0"!==n.get("cardType")&&(t=1),t},r.getRows=function(){var e=r.props,t=e.model,n=(e.parentModel||t).getDataValue();return(null==n?void 0:n.get("rows"))||(0,c.List)()},r.getAllCustomControls=function(e){var t=function(e){var t=c.List.isList(e)?e:[e];return(0,A.default)(t,"items").filter((function(e){return"customcontrol"===e.get("type")||"embedgrid"===e.get("type")})).map((function(e){return e.get("id")}))}(e.getMetaProperty("items").find((function(e){return"0"!==e.get("cardType")})));return t},r.getAllCardField=function(e){var t=e.getMetaProperty("items").find((function(e){return"0"!==e.get("cardType")})),r=c.List.isList(t)?t:[t];return(0,A.default)(r,"items").filter((function(e){return"cardfield"===e.get("type")}))},r.isCardFieldsInMainEntity=function(){var e,t=r.allCardField||r.getAllCardField(r.props.model);if(0===t.length)return!1;var n=null===(e=r.mergeModel)||void 0===e?void 0:e.getMainEntityKey();return t.every((function(e){return e.get("entity")===n}))},r.getRealRenderRows=function(){var e=r.props,t=e.model,n=e.parentModel||t,o=n.getDataValue().get(p.DATA_INDEX),i=n.getMetaProperty(p.ROWKEY),a=r.getRows();return r.mergeModel&&r.isCardFieldsInMainEntity()?a.reduce((function(e,t){var n=t.get(o.get(i));return r.mergeModel.getMainGroupRk(n)[0]===n&&(e=e.push(t)),e}),(0,c.List)()):a},r.itemRender=function(e,t){return r.getLoopCard(e,t)},r.getLoopCard=function(e,t){var n=r.props,o=n.model,i=n.parentModel||o,a=i.getDataValue(),l=o.getMetaProperty("items").find((function(e){return"0"!==e.get("cardType")})),u=o.getMetaProperty("ls"),c=i.getDataProperty("fmtinfo"),s=i.getDataProperty("colCtrl"),f=a.get(p.DATA_INDEX),d=i.getMetaProperty(p.ROWKEY),y=f.get("vi"),m=f.get("l"),g={LayoutStyle:u,fmtinfo:c,option:f,rowKey:d,viPosition:y,lPosition:m,gridKey:i.key,cardViewLocked:r._getLock(),colCtrl:s};return r.createLoopCard(e,t,l,g)},r.createLoopCard=function(e,t,n,o){var i=r.props,a=i.model,l=i.parentModel||a,u=o.LayoutStyle,c=o.fmtinfo,p=o.option,y=o.rowKey,m=o.viPosition,g=o.lPosition,h=o.gridKey,v=o.cardViewLocked,b=o.colCtrl,O="loop_".concat(t),w=e.get(p.get(y)),S=e.get(p.get(y)),P=r.state,_=P.isMulti,C=P.singleRow,k=P.selectRows,E=P.cardMode,I=_?k.indexOf(S)>-1:C.indexOf(S)>-1,T="listcard"===a.getMetaProperty("cardtype"),D=a.getMetaProperty("disableclick"),j=r.mergeModel?r.mergeModel.getRowIndex(w):t;return(0,d.default)(a.pageId,n,(0,s.getGlobalState)(),void 0,{data:e,key:O,rowIndex:j,keyIndex:w,option:p,fmtinfo:c,gridKey:l.key,rowKey:y,cardType:1,LayoutStyle:u,isSelected:I,onClick:function(t){return r.handleCardClick(t,e,p,y)},activeRow:r.activeRow.bind(Y(r),e,p,y),activeFocusRow:function(){return r.activeFocusRow(e,p,y)},setSelRows:r.setSelRows.bind(Y(r),S),cardViewLocked:v,setUnderlinePos:r.setUnderlinePos,isMulti:_,cardMode:E,colCtrl:b,isListView:T,parentLocked:v,getCardVisible:function(e){return(0,f.getCardVisible)(e,void 0,void 0,h,m,j)},getCardLocked:function(e){return!!v||(0,f.getCardLocked)(e,void 0,void 0,h,g,j)},disableClick:D})},r.getLoopCards=function(e,t){var n=r.props,o=n.model,i=n.parentModel||o,l=i.getDataValue();if(!l)return null;var u=o.getMetaProperty("ls"),c=o.getMetaProperty("scrollload"),y=1===u,m=i.getDataProperty("fmtinfo"),g=i.getDataProperty("colCtrl"),h=r.getRealRenderRows(),v=l.get(p.DATA_INDEX),b=l.get("isSplitPage",!0),O=i.getMetaProperty(p.ROWKEY),w=v.get("vi"),S=v.get("l"),_=i.key,C=(r.state.isMulti||!y)&&!(c&&b)&&h&&h.size>50,k=r._getLock(),E=o.getUserLocale(),I=o.getDefaultLang(),T=e.getIn(["w",E])||e.getIn(["w",I]),D=e.getIn(["h",E])||e.getIn(["h",I]),j={LayoutStyle:u,fmtinfo:m,option:v,rowKey:O,viPosition:w,lPosition:S,gridKey:_,cardViewLocked:k,colCtrl:g,lazyLoadAllow:C};"px"===T&&(T=void 0),"px"===D&&(D=void 0);var M=(0,f.getBorderStyle)(e),L=M.marginBottom,R=M.marginLeft,A=M.marginRight,x=M.marginTop;L=L?parseFloat(L):0,R=R?parseFloat(R):0,A=A?parseFloat(A):0,x=x?parseFloat(x):0,T&&-1!==T.indexOf("px")&&(T=R+A+parseFloat(T)+"px"),D&&-1!==D.indexOf("px")&&(D=x+L+parseFloat(D)+"px");var N=e.get("bc"),F=e.get(p.FLEX_SHRINK)||0,B=Object.assign({width:T,height:D},{backgroundColor:N,flexShrink:F}),V=h.map((function(t,r){return(0,f.getCardVisible)(o,e.get("id"),void 0,_,w,r)}));return a.default.createElement(P.default,{key:t,lazyLoadAllow:C,items:h,visibleRows:V,options:j,style:B,render:function(n,a){var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=l.LayoutStyle,c=l.fmtinfo,p=l.option,y=l.rowKey,m=l.viPosition,g=l.lPosition,h=l.gridKey,v=l.cardViewLocked,b=l.colCtrl,O=l.lazyLoadAllow,w=n.get(p.get(y)),S=r.mergeModel?r.mergeModel.getRowIndex(w):a,P="".concat(t,"_").concat(S),_=n.get(p.get(y)),C=r.state,k=C.isMulti,E=C.singleRow,I=C.selectRows,j=C.cardMode,M=k?I.indexOf(_)>-1:E.indexOf(_)>-1,L="listcard"===o.getMetaProperty("cardtype"),R=[];return O&&(T&&-1!==T.indexOf("%")&&R.push("width"),D&&-1!==D.indexOf("%")&&R.push("height")),(0,d.default)(o.pageId,e,(0,s.getGlobalState)(),void 0,{data:n,key:P,rowIndex:S,keyIndex:w,option:p,fmtinfo:c,gridKey:i.key,rowKey:y,cardType:1,LayoutStyle:u,isSelected:M,onClick:function(e){return r.handleCardClick(e,n,p,y)},activeRow:r.activeRow.bind(Y(r),n,p,y),activeFocusRow:function(){return r.activeFocusRow(n,p,y)},setSelRows:r.setSelRows.bind(Y(r),_),cardViewLocked:v,setUnderlinePos:r.setUnderlinePos,isMulti:k,cardMode:j,colCtrl:b,isListView:L,ignoreStyles:R,getCardVisible:function(e){return(0,f.getCardVisible)(e,void 0,void 0,h,m,S)},getCardLocked:function(e){return!!v||(0,f.getCardLocked)(e,void 0,void 0,h,g,S)}})}})},r.getPrevButton=function(e){var t=r.state.preDisabled,n=(0,u.default)(x.default["pre-btn"],x.default.arrow,W(W({},x.default.disabled,t),x.default["has-underline"],e));return a.default.createElement("a",{onClick:t?null:r.handlePre,className:n},a.default.createElement("i",null))},r.getNextButton=function(e){var t=r.state.nextDisabled,n=(0,u.default)(x.default["next-btn"],x.default.arrow,W(W({},x.default.disabled,t),x.default["has-underline"],e));return a.default.createElement("a",{onClick:t?null:r.handleNext,className:n},a.default.createElement("i",null))},r.handleNext=function(e){e.stopPropagation();var t=r.getSrollAreaParam().innerWidth,n=r.state.translateX,o=r.listNode&&r.listNode.offsetWidth||0;if(t>o&&n+o<t){var i=t-n-o>o?n+o:t-o;r.setState({translateX:i})}},r.handlePre=function(e){e.stopPropagation();var t=r.state.translateX,n=r.listNode&&r.listNode.offsetWidth||0;if(t>0){var o=t>n?t-n:0;r.setState({translateX:o})}},r.getToolbarLocation=function(){var e=r.props.model.getMetaProperty("tl");return["0","1"].indexOf(e)<0&&(e=(0,k.getUIDefaultProps)(I.default.CARD,[E.default.TOOLBAR_LOCATION])),e||"0"},r.getPageType=function(){var e=r.props.model.getMetaProperty("pt");return e||(e=(0,k.getUIDefaultProps)(I.default.CARD,[E.default.PAGE_TYPE])),e},r.getToolPanel=function(){var e=r.props,t=e.parentModel,n=e.model,o=e.dispatch;if(n.getMetaProperty("scrollload"))return null;var i=t||n,l=i.getDataValue(),u=r.getRowSize(),c=r.state.isMulti?"multiple":"single",s=i.key,f="listcard"===n.getMetaProperty("cardtype"),d=t&&t.getMetaProperty("maxPageSize")||(f?M.DEFAULT_MAX_PAGE_SIZE:M.ENTRY_MAX_PAGE_SIZE),p=null,y=!1!==n.getMetaProperty("phide"),m="1"!==r.getToolbarLocation()?{marginBottom:"10px",borderColor:"#fff"}:{marginTop:"10px",borderColor:"#fff"};if(!y&&t&&l&&l.get("isSplitPage",!0)){var h=l.toJS();p=a.default.createElement(O.default,{key:"cardviewPage",style:m,className:"kd-cq-card-toolbar",pageId:i.pageId,model:i,showFormByTips:function(){return o(v.showFormByTips.apply(void 0,arguments))},isSplitPage:h.isSplitPage||!0,pageindex:h.pageindex||1,rowcount:-1===u?h.rowcount:u,datacount:h.datacount||0,pagerows:h.pagerows||0,pagecount:h.pagecount||1,limitdatacount:h.limitdatacount||0,realPageCount:null==h.realPageCount?0:h.realPageCount,rowSelection:c,selectClick:function(e,t,n){return r.selectedAll(e,t,n)},gridKey:s,toolBarBtnClick:r.toolBarBtnClick.bind(Y(r)),setAmountOperation:r.setAmountOperation.bind(Y(r)),getRealPageCount:r.getRealPageCount.bind(Y(r)),handleFuncs:r.handleFuncs.bind(Y(r)),invokeControlMethodOnly:function(){return o(g.invokeControlMethodOnly.apply(void 0,arguments))},isListView:f,maxPageSize:d,pageType:r.getPageType(),isEntryEntity:void 0===n.getMetaProperty("cardtype")})}return p},r.throttleScroll=function(e){e.persist(),r.scrollTimer||(r.scrollTimer=setTimeout((function(){r.onScroll(e),r.scrollTimer=null}),200))},r.onScroll=function(e){if(!r.isLoadding){var t=e.target,n=t.scrollTop,o=t.scrollHeight,i=t.clientHeight,a=r.props,l=a.parentModel,u=a.model,c=a.dispatch,s=(l||u).getDataValue(),f=s&&s.get("noAppendRow");if(n+i+15>=o&&!f){r.isLoadding=!0;var d=s&&s.get("pageindex");c((0,g.setAmountOperation)(l||u,d,"setNextpageData"))}}},r.resetListViewScrollBar=function(e){var t,n=r.getIsScrollLoad(e);"listcard"!==e.model.getMetaProperty("cardtype")||n||(null===(t=r.virtualViewApi)||void 0===t||t.resetScrollBar())},r.isScrollLoadData=function(){var e=r.getDataModel().getDataValue();if(r.getIsScrollLoad(r.props)&&e){var t=e.get("datacount"),n=e.get("rows");if(n&&n.size<t)return!0}return!1},r.updateDataDesc=function(e){var t=e.get("pageindex"),n=e.get("pagerows"),o=e.get("isSplitPage",!0);r.isSplitPage=o,r.pageIndex=t,r.pageRows=n},r.getFixedCardDataHashCode=function(){var e=r.props.model,t=e.pageId,n=(e.getMetaProperty("items")||(0,c.List)()).filter((function(e){return"0"===e.get("cardType")}));return 0===n.size?"":n.reduce((function(e,r){var n=r.get("id"),o=(0,b.getData)(t,n)((0,s.getGlobalState)());return e+=(null==o?void 0:o.hashCode())||""}),"")};var n=e.parentModel||e.model,o=!1!==n.getMetaProperty("ismul"),i=n.getDataProperty("cardmode")||0;return r.state={isMulti:o,singleRow:[],singleRowInfo:[],selectRows:[],selectRowsInfos:[],cardMode:i,underlinePos:{left:"-100px"},translateX:0,showArrow:!1},r.clickTimer=null,r.postData={},r.preSelRow=-1,r.buildCardMergeModel=r.buildCardMergeModel.bind(Y(r)),r.setRowSpan=r.setRowSpan.bind(Y(r)),r.pageIndex=1,r.pageRows=20,r.isSplitPage=!0,r.forAutoTestActions={toolBarBtnClick:g.toolBarBtnClick,entryRowDoubleClick:g.entryRowDoubleClick,EntityRowClick:g.EntityRowClick,setAmountOperation:g.setAmountOperation,hyperLinkClick:g.hyperLinkClick,cellChange:g.cellChange,cardValueChange:g.cardValueChange,invokeControlMethodOnly:g.invokeControlMethodOnly,setItemByNumber:h.setItemByNumber},r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&J(e,t)}(t,e),r=t,n=[{key:"componentDidMount",value:function(){var e=this,t=this.props,r=t.model,n=t.parentModel||r;if(this.allCardField=this.getAllCardField(r),this.allCustomControls=this.getAllCustomControls(r),!this.state.isMulti&&(this.removeDirectivesListener=(0,D.subscribeControlMethod)(n.pageId,"".concat(n.pageId,"_").concat(n.key),"directives",(function(t){void 0!==t&&e.invokeControlMethods(t)})),this.removeRemoveRowsListener=(0,D.subscribeControlMethod)(n.pageId,n.key,"deleteRows",(function(t){void 0!==t&&e.initializePreSelRow(t)})),1===r.getMetaProperty("ls"))){var o=l.default.findDOMNode(this.innerNode);this.removeInnerNodeResizeObserve=o?(0,C.default)(o,(function(t){t.hide||e.isArrowDisabled()})):null}var i=n.getDataProperty(["slctState","slcted"]);i&&i.size>0&&i.get(0).size>0&&this.setSelectRows(i),this._resizeObserve=this.cardViewDom?(0,C.default)(this.cardViewDom,this.isArrowDisabled):null}},{key:"componentWillUnmount",value:function(){this.dispose=!0,this.mergeModel=null,this.state.isMulti||this.removeRemoveRowsListener&&this.removeRemoveRowsListener(),this._resizeObserve&&(this._resizeObserve.removeResizeObserve(),this._resizeObserve=null),this.removeInnerNodeResizeObserve&&this.removeInnerNodeResizeObserve.removeResizeObserve()}},{key:"setSelRows",value:function(e){var t=this.props,r=t.parentModel,n=t.model,o=this.state,i=o.selectRows,a=o.selectRowsInfos,l=o.singleRow,u=o.singleRowInfo,c=r||n,s=c.getDataValue();if(!s)return null;var f=s.get("rows");if(!f||0===f.size)return null;var d,y,m=s.get(p.DATA_INDEX),g=c.getMetaProperty(p.ROWKEY);f.map((function(t){t.get(m.get(g))===e&&(d=t)})),this.state.isMulti?(-1===this.state.selectRows.indexOf(e)&&(i.push(e),a.push(d)),y=this.getPostColsData(e,i,a,m)):(-1===this.state.singleRow.indexOf(e)&&(l=[e],u=[d]),y=this.getPostColsData(e,l,u,m)),null===y.selDatas&&delete y.selDatas,this.postData=y,this.setPostData(y)}},{key:"handleCardClick",value:function(e,t,r,n){var o=this;e.stopPropagation();var i=this.getDataModel(),a=i.pageId,l=i.key,u=t.get(r.get(n)),c=this.props.dispatch;this.mergeModel&&(u=this.mergeModel.getMainGroupRk(u)[0]),this.clickTimer?(this.setPostData(),this.lastClickRow===u?c((0,g.entryRowDoubleClick)({pageId:a,key:l},[u])):c((0,g.EntityRowClick)({pageId:a,key:l},[u])),clearTimeout(this.clickTimer),this.clickTimer=null):(c((0,g.EntityRowClick)({pageId:a,key:l},[u])),this.clickTimer=setTimeout((function(){o.clickTimer=null}),300)),this.lastClickRow=u}},{key:"activeRow",value:function(e,t,r,n,o){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=this.getSelectRowsPostData(e,t,r,n,o,i);this.postData=a,this.setPostData();var l=e.get(t.get(r));this.preSelRow=l}},{key:"activeFocusRow",value:function(e,t,r){var n=e.get(t.get(r));if(void 0!==n){var o=this.getCardModeSelectedData(),i=this.getPostColsData(n,o.rowKeys,o.rowInfos,t,"0");this.setPostData(i)}}},{key:"getSelectedMergeRows",value:function(e){var t=this.props,r=t.parentModel,n=t.model,o=r||n,i=o.getDataValue();if(!i||!this.mergeModel)return{};var a=this.mergeModel.getMainGroupRk(e),l=i.get("rows"),u=i.get(p.DATA_INDEX),c=o.getMetaProperty(p.ROWKEY),s=[];return l&&l.size&&l.forEach((function(e,t){var r=e.get(u.get(c));a.includes(r)&&s.push(e)})),{selectedMergeRowKeys:a,selectedMergeRows:s}}},{key:"doMultiClick",value:function(e,t,r){var n=this.state,o=n.selectRows,i=n.selectRowsInfos,a=o.indexOf(t),l=this.getSelectedMergeRows(t),u=l.selectedMergeRowKeys||[t],c=l.selectedMergeRows||[e];return r||this.clickTimer&&this.lastClickRow===t?-1===a&&(o.push.apply(o,V(u)),i.push.apply(i,V(c))):a>-1?(o.splice(a,u.length),i.splice(a,u.length)):(o.push.apply(o,V(u)),i.push.apply(i,V(c))),this.setSelectedRowsCount&&this.setSelectedRowsCount(o.length),this.updateSelectInfo(o,i),{rowKeys:this.state.selectRows,rowInfos:this.state.selectRowsInfos}}},{key:"doSingleClick",value:function(e,t,r){var n=this.state.singleRow,o=this.getSelectedMergeRows(t),i=o.selectedMergeRowKeys||[t],a=o.selectedMergeRows||[e];if(r){if(n.indexOf(t)>-1)return this.updateSelectInfo([],[]),{rowKeys:[],rowInfos:[]};this.updateSelectInfo(i,a)}else t=null==t?-1:t,this.setSelectedRowsCount&&this.setSelectedRowsCount(-1===t?0:1),this.updateSelectInfo(i,a);return{rowKeys:i,rowInfos:a}}},{key:"updateSelectInfo",value:function(e,t){this.state.isMulti?this.setState({selectRows:e,selectRowsInfos:t}):this.setState({singleRow:e,singleRowInfo:t})}},{key:"componentDidUpdate",value:function(e,t){var r,n,o=e.model,i=e.parentModel,a=this.props,l=a.model,u=a.parentModel;if(i?(r=i,n=u):(r=o,n=l),(0,c.is)(o.getMetaProperty("items"),l.getMetaProperty("items"))||(this.allCardField=this.getAllCardField(l),this.allCustomControls=this.getAllCustomControls(l)),!(0,c.is)(r.getDataProperty(["slctState"]),n.getDataProperty(["slctState"]))){var s=n.getDataProperty(["slctState","slcted"])||(0,c.List)(),f=s?s.toJS():[];Array.isArray(f)&&f[0]&&Array.isArray(f[0])&&(f=f[0]);var d=r.getDataProperty(["slctState"]);this.selectedRows=s,void 0===d&&0===f.length||this.setSelectRows(s)}if(!(0,c.is)(r.getDataProperty(["fcsState"]),n.getDataProperty(["fcsState"]))){var p,y=(null===(p=n.getDataProperty(["fcsState","fcs"]))||void 0===p?void 0:p.toJS())||[];if(null!==y&&y.length>0){var m,g=this.getRowIndex(y[0]);null===(m=this.virtualViewApi)||void 0===m||m.jumpToTargetItem(g)}}this.isLoadding=!1}},{key:"setSelectRows",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.getDataModel(),n=this.props.isActived,o="listcard"===this.props.model.getMetaProperty("cardtype"),i=r.getDataValue();if(i){var a=i.get("rows"),l=i.get(p.DATA_INDEX),u=r.getMetaProperty(p.ROWKEY),s=[],f=[],d=e.get(0);c.List.isList(d)&&(e=d),e.size&&a&&a.size&&a.forEach((function(t,r){var n=t.get(l.get(u));e.includes(n)&&(s.push(n),f.push(t))})),this.setSelectedRowsCount&&this.setSelectedRowsCount(s.length),this.updateSelectInfo(s,f);var y=r.key,m=e.get(0);m=void 0===m?-1:m;var h=this.getPostColsData(m,s,f,l);if(t){this.setPostData(h);var v=!1!==r.getMetaProperty("phide");!n||!o&&v&&-1===m||this.props.dispatch((0,g.EntityRowClick)({pageId:r.pageId,key:y},[m]))}}}},{key:"getSelectRowsPostData",value:function(e,t,r,n,o,i){var a,l=e.get(t.get(r));if(this.mergeModel&&(l=this.mergeModel.getMainGroupRk(l)[0]),void 0!==l)return a=this.state.cardMode&&!i?this.getCardModeSelectedData():this.state.isMulti?this.doMultiClick(e,l,n):this.doSingleClick(e,l,i),this.getPostColsData(l,a.rowKeys,a.rowInfos,t,o)}},{key:"getRowSize",value:function(){var e=this.getDataModel().getDataValue();return e?e.get("rows").size:-1}},{key:"getRealPageCount",value:function(){var e=this.props,t=e.parentModel,r=e.model,n=e.dispatch,o=t?t.key:r.key,i={pageId:this.props.model.pageId,key:o};n((0,g.invokeControlMethodOnly)(i,"getRealPageCount",[]))}},{key:"setAmountOperation",value:function(e,t){e=parseInt(e);var r=this.props,n=r.parentModel,o=r.model,i=r.dispatch,a=n?n.key:o.key,l={pageId:this.props.model.pageId,key:a};i((0,g.setAmountOperation)(l,e,t))}},{key:"toolBarBtnClick",value:function(e,t){var r=this.props,n=r.parentModel,o=r.model,i=r.dispatch,a=n?n.key:o.key,l={pageId:this.props.model.pageId,key:a};i((0,g.toolBarBtnClick)(l,e,t))}},{key:"handleFuncs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var t in e)switch(t){case"setSelectedRowsCount":this.setSelectedRowsCount=e[t];break;case"setSelectAllIcon":this.setSelectAllIcon=e[t]}}},{key:"selectedAll",value:function(e,t){var r=this,n=this.getDataModel(),o=n.getDataValue(),i=o?o.get("dataindex").toJS():{},a=o.get("rows");null!=a&&!1!==this.state.isMulti&&function(){if(t)r.setSelectRows(new c.List);else{var e=n.getMetaProperty(p.ROWKEY),o=new c.List;a.toJS().map((function(t){o=o.push(t[i[e]])})),r.setSelectRows(o)}}()}},{key:"_getLock",value:function(){var e=this.props.model;return this.props.getLocked(e)}},{key:"getNoDataCard",value:function(){var e=this.props.model.getMetaProperty("shownodatatip"),t=(0,k.getCommonEmotionalInfo)(T.EMOTIONAL_TYPE_NO_DATA),r=t.imagePath,n=t.description,o=r?{"background-image":"url(".concat(r,")")}:{};return!1!==e?a.default.createElement("div",{className:x.default["no-data-card"]},a.default.createElement("div",{className:x.default["no-data-container"]},a.default.createElement("div",{className:x.default["img-item"],style:o}),a.default.createElement("p",{className:"kd-cq-empty-description"},n||(0,_.getLangMsg)({key:"cardview.key0002"})))):null}},{key:"getSrollAreaParam",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=l.default.findDOMNode(this.innerNode),r=t&&t.offsetWidth||0,n=this.cardViewDom&&this.cardViewDom.offsetWidth||0,o=0,i=0;if(!e){var a=t&&t.childElementCount,u=t?t.children:[],c="isfixedcard"===(a>0?u[0].getAttribute("data-fixedcard"):"");o=c?u[1]&&u[1].offsetWidth:u[0]&&u[0].offsetWidth,i=c?u[0].offsetWidth:0}return{innerWidth:r,outerWidth:n,childWidth:o,fixCardWidth:i}}},{key:"buildCardMergeModel",value:function(e){this.mergeModel=null;var t=e.getMetaProperty("mergerow"),r=e.getMetaProperty("entryentities");if(t&&r){this.mergeModel=new S.mergeModel(r.toJS());var n=e.getDataValue();this.setRowSpan(n)}}},{key:"setRowSpan",value:function(e){this.mergeModel&&e&&(0,S.spanEngine)(e,this.mergeModel)}},{key:"getIsScrollLoad",value:function(e){var t=e.model,r=(e.parentModel||t).getDataValue(),n=t.getMetaProperty("scrollload"),o=r&&r.get("isSplitPage",!0);return n&&o}},{key:"componentWillMount",value:function(){var e=this.getDataModel();this.buildCardMergeModel(e)}},{key:"componentWillReceiveProps",value:function(e){var t=e.parentModel||e.model,r=this.getDataModel();t.getMetaProperty("mergerow")!==r.getMetaProperty("mergerow")&&this.buildCardMergeModel(t);var n=r.getDataValue(),o=t.getDataValue();if(!(0,c.is)(n,o)){var i=this.getRows(),a=(null==o?void 0:o.get("rows"))||(0,c.List)();(null==i?void 0:i.hashCode())!==(null==a?void 0:a.hashCode())&&this.resetListViewScrollBar(e),this.updateDataDesc(o),this.setRowSpan(o)}}},{key:"getCardSize",value:function(){var e=this.props.model,t=e.getMetaProperty("items").find((function(e){return"0"!==e.get("cardType")}));if(t){var r={},n=e.getUserLocale(),o=e.getDefaultLang(),i=t.getIn(["w",n])||t.getIn(["w",o]),a=t.getIn(["h",n])||t.getIn(["h",o]);return i&&"string"==typeof i&&i.includes("px")&&(r.width=parseInt(i.substring(0,i.length-2))),a&&"string"==typeof a&&a.includes("px")&&(r.height=parseInt(a.substring(0,a.length-2))),r}}},{key:"getRowIndex",value:function(e){var t=this.props,r=t.parentModel,n=t.model,o=r||n,i=o.getDataValue();if(!i)return-1;var a=i.get("rows")||(0,c.List)(),l=i.get(p.DATA_INDEX),u=o.getMetaProperty(p.ROWKEY);return a.findIndex((function(t){return t.get(l.get(u))===e}))}},{key:"render",value:function(){var e,t,r=this,n=this.props,o=n.model,i=n.parentModel,l=(0,f.getCommonStyle)(o),c=(0,f.getCommonClass)(o),s=o.getMetaProperty("ls"),d=o.getMetaProperty("items"),p=this.getToolPanel(),m=1===s,g=this.getRowSize(),h=this.isShowUnderline(),v=this.isScrollLoadData()?this.throttleScroll:null,b=this.getToolbarLocation(),O=Object.assign({},c,{Direction:"column",AlignItems:"stretch",AlignContent:"stretch",Wrap:"nowrap"}),w=(null===(e=o.meta)||void 0===e?void 0:e.hashCode())||"",S=null===(t=(i||o).getData())||void 0===t?void 0:t.hashCode(),P=this.getFixedCardDataHashCode(),_=this.getCardSize()||{},C=this.getIsScrollLoad(this.props),k=(0,u.default)(W(W({},x.default.underline,!0),x.default["underline-actived"],this.state.singleRow.length>0));return a.default.createElement(R.default,{pageId:o.pageId,ctrlKeys:this.allCustomControls},!this.state.isMulti&&m?a.default.createElement("div",B({className:x.default["list-card-box"]},this.props.attachData,{ref:function(e){r.cardViewDom=e}}),this.state.showArrow&&this.getPrevButton(h),a.default.createElement("div",{ref:function(e){r.listNode=e},className:x.default["scroll-box"]},a.default.createElement("div",{className:x.default["list-box"],style:{transform:"translateX(-".concat(this.state.translateX,"px)")}},a.default.createElement(y.default,{LayoutStyle:s,ref:function(e){r.innerNode=e},horizonScroll:!0,style:l},d.map((function(e,t){return r.getCards(e,t)}))),h?a.default.createElement("div",{className:k},a.default.createElement("i",{className:x.default.triangle,style:this.state.underlinePos})):null)),this.state.showArrow&&this.getNextButton(h)):1===d.size&&0===g?this.getNoDataCard():-1===g?null:["1"!==b?p:null,a.default.createElement(y.default,B({onScroll:v,key:"cardviewList",LayoutStyle:s,style:l},O),a.default.createElement(L.default,{flex:c,options:{direction:m?"":L.DIRECTION_V,headerRender:this.renderFixedCard(0),footerRender:this.renderFixedCard(this.getFooterFixedCardIndex()),isFooterElementMove:-1!==this.getFooterFixedCardIndex(),refreshFlag:this.state.selectRows.concat(this.state.singleRow).join("")+"_".concat(w,"_").concat(S,"_").concat(P),enableVirtual:!C&&this.getRows().size>=50,itemWidth:_.width||100,itemHeight:_.height||100,onApi:this.setVirtualViewApi},items:this.getRealRenderRows(),itemRender:this.itemRender})),"1"===b?p:null])}}],n&&H(r.prototype,n),o&&H(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(a.default.Component))||i)||i);t.default=X},603256:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(743924),r(205960),r(846428),r(708896),r(606200),r(534440),r(670864),r(880920),r(387912),r(836887),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(297336),r(336368);var o,i,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=y(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(795520)),l=p(r(916608)),u=r(439532),c=p(r(348896)),s=p(r(385384)),f=r(891052),d=r(467124);function p(e){return e&&e.__esModule?e:{default:e}}function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(y=function(e){return e?r:t})(e)}function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},m.apply(this,arguments)}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function h(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function v(e,t,r){return t=O(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}(e,b()?Reflect.construct(t,r||[],O(e).constructor):t.apply(e,r))}function b(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(b=function(){return!!e})()}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e,t){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},S(e,t)}var P={data:[{group:{id:"openPlatform",caption:""},items:[{id:"kemuyuebiao",caption:""},{id:"zongfenleizhang",caption:""},{id:"mingxifenleizhang",caption:""},{id:"ribaobiao",caption:""},{id:"hesuanzhangmuyuebiao",caption:""},{id:"kemuyuebiao",caption:""},{id:"zongfenleizhang",caption:""},{id:"mingxifenleizhang",caption:""},{id:"ribaobiao",caption:""},{id:"hesuanzhangmuyuebiao",caption:""},{id:"zongfenleizhang",caption:""},{id:"mingxifenleizhang",caption:""},{id:"ribaobiao",caption:""},{id:"hesuanzhangmuyuebiao",caption:""}]},{group:{id:"xieyicaigou",caption:""},items:[{id:"kemuyuebiao",caption:""},{id:"zongfenleizhang",caption:""},{id:"mingxifenleizhang",caption:""},{id:"ribaobiao",caption:""}]},{group:{id:"b2bdianshangzhongxin",caption:"B2B"},items:[{id:"kemuyuebiao",caption:""},{id:"zongfenleizhang",caption:""},{id:"mingxifenleizhang",caption:""},{id:"ribaobiao",caption:""},{id:"hesuanzhangmuyuebiao",caption:""}]},{group:{id:"xieyicaigou",caption:""},items:[{id:"kemuyuebiao",caption:""},{id:"zongfenleizhang",caption:""},{id:"mingxifenleizhang",caption:""},{id:"ribaobiao",caption:""}]},{group:{id:"xieyicaigou",caption:""},items:[{id:"kemuyuebiao",caption:""},{id:"zongfenleizhang",caption:""},{id:"mingxifenleizhang",caption:""},{id:"ribaobiao",caption:""}]},{group:{id:"xieyicaigou",caption:""},items:[{id:"kemuyuebiao",caption:""},{id:"zongfenleizhang",caption:""},{id:"mingxifenleizhang",caption:""},{id:"ribaobiao",caption:""}]},{group:{id:"xieyicaigou",caption:""},items:[{id:"kemuyuebiao",caption:""},{id:"zongfenleizhang",caption:""},{id:"mingxifenleizhang",caption:""},{id:"ribaobiao",caption:""}]},{group:{id:"openPlatform",caption:""},items:[{id:"kemuyuebiao",caption:""},{id:"zongfenleizhang",caption:""},{id:"mingxifenleizhang",caption:""},{id:"ribaobiao",caption:""},{id:"hesuanzhangmuyuebiao",caption:""},{id:"kemuyuebiao",caption:""},{id:"zongfenleizhang",caption:""},{id:"mingxifenleizhang",caption:""},{id:"ribaobiao",caption:""},{id:"hesuanzhangmuyuebiao",caption:""},{id:"zongfenleizhang",caption:""},{id:"mingxifenleizhang",caption:""},{id:"ribaobiao",caption:""},{id:"hesuanzhangmuyuebiao",caption:""}]}]};P=(0,f.fromJS)(P);var _=(o=(0,c.default)(!0),(0,s.default)(i=o(i=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=v(this,t,[e])).itemClick=r.itemClick.bind(w(r)),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(t,e),r=t,(n=[{key:"itemClick",value:function(e){var t=e.groupId,r=e.itemId,n=this.props,o=n.model;(0,n.dispatch)((0,d.itemClick)(o,{groupId:t,itemId:r}))}},{key:"render",value:function(){var e=this.props.model,t=Object.assign({},(0,u.getCommonStyle)(e),this.props.style),r=(0,u.getCommonClass)(e),n=(0,u.getComponentDataProperty)(e,"data","data",!1),o=(0,u.getComponentDataProperty)(e,"groupMaxItemCount","groupMaxItemCount",!1),i=(0,u.getComponentDataProperty)(e,"autoWrap","autoWrap",!1),c=(0,u.getComponentDataProperty)(e,"maxViewHeight","maxViewHeight",!1),s=(0,u.getComponentDataProperty)(e,"ieg","ieg",!1);return a.default.createElement(l.default,m({style:t,data:n},r,this.props.attachData,{itemClick:this.itemClick,groupMaxItemCount:o,autoWrap:i,maxViewHeight:c,ignoreEmptyGroup:s}))}}])&&g(r.prototype,n),o&&g(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(a.Component))||i)||i);t.default=_},339332:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(241872),r(743924),r(205960),r(297336),r(846428),r(708896),r(606200),r(534440),r(670864),r(76124),r(880920),r(836887),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(323784),r(336368),r(387912),r(497448);var o,i,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=O(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(795520)),l=r(891052),u=b(r(348896)),c=b(r(385384)),s=b(r(182956)),f=(r(738704),r(439532)),d=r(90920),p=b(r(731296)),y=b(r(329132)),m=r(552032),g=(b(r(149236)),r(474144)),h=r(218652),v=["data","configItems","lock","lang","themeColor","themeNum","cardRowData","gridRowData","subFormsArry"];function b(e){return e&&e.__esModule?e:{default:e}}function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(O=function(e){return e?r:t})(e)}function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},w.apply(this,arguments)}function S(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function P(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_(n.key),n)}}function _(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function C(e,t,r){return t=E(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,k()?Reflect.construct(t,r||[],E(e).constructor):t.apply(e,r))}function k(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(k=function(){return!!e})()}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}function I(e,t){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},I(e,t)}var T=(o=(0,u.default)(!1),(0,c.default)(i=(0,s.default)(i=o(i=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=C(this,t,[e])).getCustomInfo=function(e){var t=e.pageId,n=e.key,o=e.meta&&e.meta.toJS(),i=e.getDataValue();i&&i.toJS&&(i=i.toJS());var a=(0,f.getComponentDataProperty)(e,"ci","ci",!1);a=a&&a.toJS();var u=r.props.isLocked,c=e.getUserLocale(),s=(0,d.getCurrentTheme)(),p=s.themeNum,y=s.themeColor,m=e.state,g=(0,f.getCustomControlSubForms)(e.pageId,e.meta.get("id"),m),h=(0,d.getCardRowData)(r.props,e),v=e.getMetaProperty(["item","schemaInfo"])||e.getMetaProperty("schemaInfo")||(0,l.Map)({});return{pageId:t,controlKey:n,data:i,metaData:o,schemaId:v.get("schemaId"),isvId:v.get("isvId"),moduleId:v.get("moduleId"),configItems:a,lock:u,lang:c,themeColor:y,themeNum:p,cardRowData:h,subFormsArry:g,fileServer:e.getFormConfig()&&e.getFormConfig().fileserver}},r.invokeCustomMethod=function(e){var t=e.pageId,n=e.key,o=r.props.dispatch;return function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];r=Array.isArray(r)?r:[r],o((0,m.invokeCustomMethod)(t,n,e,r,i))}},r.setPostData=function(e){var t=e.pageId,r=e.key,n="controls";return e.getMetaProperty(["item"])&&(n="fields"),function(e){"controls"===n?(0,h.setControlPostValue)(t,r,e):(0,h.setFieldPostValue)(t,r,e)}},r.attachDataInstance=new g.InjectAttachData,r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I(e,t)}(t,e),r=t,(n=[{key:"shouldComponentUpdate",value:function(e){var t=this.props.model,r=e.model,n=t.getDataValue(),o=r.getDataValue(),i=(0,f.getComponentDataProperty)(t,"ci","ci",!1),a=(0,f.getComponentDataProperty)(r,"ci","ci",!1),u=this.props.isLocked,c=e.isLocked,s=(0,d.getCardRowData)(this.props,t),p=(0,d.getCardRowData)(e,r),y=t.getUserLocale(),m=r.getUserLocale(),g=this.props.style,h=e.style,v=(0,f.getCommonStyle)(t),b=(0,f.getCommonStyle)(r),O=t.getDataProperty("subForms"),w=r.getDataProperty("subForms");return!((0,l.is)(o,n)&&(0,l.is)(i,a)&&u===c&&(0,l.is)(g,h)&&(0,l.is)(v,b)&&(0,l.is)((0,l.fromJS)(s),(0,l.fromJS)(p))&&y===m&&(0,l.is)(O,w))}},{key:"render",value:function(){var e=this.props,t=e.model,r=e.style,n=e.attachData,o=this.getCustomInfo(t),i=Object.assign({},(0,f.getCommonStyle)(t),r),l=(0,y.default)((0,f.getCommonClass)(t));if(!t.getMetaProperty(["item","isCustom"])&&!t.getMetaProperty("schemaInfo")){var u=o.subFormsArry.outerForms,c=void 0===u?[]:u;return a.default.createElement("div",{style:i,className:l},c.length?a.default.Children.toArray(c):null)}var s=o.data,d=o.configItems,m=o.lock,g=o.lang,h=o.themeColor,b=o.themeNum,O=o.cardRowData,P=o.gridRowData,_=o.subFormsArry,C=S(o,v),k={data:s,configItems:d,lock:m,lang:g,themeColor:h,themeNum:b,cardRowData:O,gridRowData:P};return a.default.createElement(p.default,w({setPostData:this.setPostData(t),invokeCustomMethod:this.invokeCustomMethod(t),model:t,style:i,className:l},n,C,{outerForms:_.outerForms,innerForms:_.innerForms,customProps:k,attachDataInstance:this.attachDataInstance}))}}])&&P(r.prototype,n),o&&P(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(a.Component))||i)||i)||i);t.default=T},975560:function(e,t,r){"use strict";r(182320),r(909112),r(697060),r(360776),r(622676),r(505684),r(743924),r(693917),r(205960),r(721300),r(708896),r(969e3),r(606200),r(534440),r(76152),r(670864),r(76124),r(880920),r(836887),r(690512),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(9692),r(233696),r(443616),r(241872),r(323784),r(976896),r(297336),r(846428),r(336368),r(286620),r(387912),r(804092),r(23544),r(571176),r(633768),r(660824),r(513640),r(997308),r(86744);var n,o,i=Se(r(795520)),a=Se(r(369396)),l=Se(r(540900)),u=Se(r(747224)),c=Se(r(562507)),s=r(439532),f=r(564491),d=Se(r(218768)),p=Se(r(827120)),y=Se(r(658996)),m=Se(r(942524)),g=Se(r(710736)),h=r(290600),v=r(735696),b=r(899760),O=we(r(820168)),w=r(704424),S=we(r(414480)),P=we(r(323968)),_=r(638572),C=r(416624),k=r(194520),E=Se(r(329132)),I=Se(r(800104)),T=Se(r(848948)),D=Se(r(409616)),j=Se(r(348896)),M=Se(r(248376)),L=Se(r(979052)),R=r(218652),A=Se(r(139488)),x=Se(r(671252)),N=Se(r(84300)),F=Se(r(696428)),B=r(891052),V=we(r(790832)),U=Se(r(385384)),W=r(738704),H=r(545072),z=r(559100),G=Se(r(84904)),K=r(669188),q=Se(r(802780)),Y=r(674260),J=r(868256),X=Se(r(215992)),Z=r(886212),Q=r(796512),$=Se(r(942824)),ee=r(373728),te=r(237373),re=r(91797),ne=r(251536),oe=r(334916),ie=r(732512),ae=r(195196),le=r(558848),ue=r(342916),ce=r(794432),se=r(226596),fe=Se(r(31200)),de=r(555220),pe=Se(r(416196)),ye=r(811596),me=r(871136),ge=Se(r(125508)),he=r(993176),ve=r(15560),be=["onChange","onBlur","tabIndex"];function Oe(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(Oe=function(e){return e?r:t})(e)}function we(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=De(e)&&"function"!=typeof e)return{default:e};var r=Oe(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}return n.default=e,r&&r.set(e,n),n}function Se(e){return e&&e.__esModule?e:{default:e}}function Pe(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function _e(){return _e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_e.apply(this,arguments)}function Ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ke(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ke(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ie(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(r),!0).forEach((function(t){Te(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Te(e,t,r){return(t=Me(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function De(e){return De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},De(e)}function je(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Me(n.key),n)}}function Me(e){var t=function(e,t){if("object"!=De(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=De(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==De(t)?t:String(t)}function Le(e,t,r){return t=Ae(t),function(e,t){if(t&&("object"===De(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return xe(e)}(e,Re()?Reflect.construct(t,r||[],Ae(e).constructor):t.apply(e,r))}function Re(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Re=function(){return!!e})()}function Ae(e){return Ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ae(e)}function xe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ne(e,t){return Ne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ne(e,t)}var Fe=["radio","checkbox","combo","mulcombo","date","datetime","daterange","picture","cascademenu","user","basedata","mulbasedata","city","cascader","attachmentfield","time","timerange","namesegcombo","signature","checkboxgroup"],Be="changeRadioValue",Ve="data-shortcut",Ue=(0,N.default)()(n=(0,j.default)(!0,!1,!1)(n=(0,u.default)(c.default)(n=(0,U.default)((o=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Le(this,t,[e])).getLangSetting=function(e,t){var r=(0,R.getLangList)()(e.state),n=(0,R.getDefaultLang)()(e.state);return{langList:r,lang:e.getUserLocale(),defaultLang:n}},r.handleUpdatePostData=function(){var e=r.props,t=e.model,n=e.dispatch,o=t.pageId,i=t.key,a=r.formatAndEncodeValue(r.state.innerValue);if(void 0!==a&&a!==t.getDataValue()){var l=a;if((t.getMetaProperty("item")||(0,B.fromJS)({})).get("type")===q.default.Password){var u,c=(0,W.getPageData)(o,H.PUBLIC_KEY)||(null===(u=(0,R.getFormConfig)(o)(t.state))||void 0===u?void 0:u.publicKey);l=(0,me.encryptRSA)(c,l)}n((0,R.convertAppModelFunctionAction)((0,R.setFieldPostValue)(o,i,l)))}},r.isFieldDisabled=function(e){var t=r.props.model,n=t.getMetaProperty("item")||(0,B.Map)(),o=n&&n.get(h.EDITABLE),i=r._getLock(t);return!!(!Array.isArray(e)&&"object"===De(e)||Array.isArray(e)&&!0===i)&&(!1===o||i)},r.invokeControlMethods=function(e){e.forEach((function(e){var t=e.methodname,n=e.args,o=e.key,i=e.options,a=void 0===i?{}:i;switch(t){case"setFocus":r.handleSetFocus(n);break;case ae.TRANSFORM_MODEL:r.setEncodeData(o);break;case ae.SET_ENCODING_KEYS:r.setEncodingKeys(o);break;case"updateValue":if(!r.props.isLocked){var l=r.props.model,u=l.getMetaProperty("item")||{},c=u.get("type"),s=(0,pe.default)(n,c,l,a);if(null===s)return;var f=l.key;if(c===q.default.Radio){if(!s)return;s=u.get(h.VALUE),f=u.get(h.GROUP),setTimeout((function(){(0,W.setPageData)(l.pageId,[Be,u.get(h.GROUP)],{groupValue:s})}),0)}r.setState({innerValue:s});var d=r.formatAndEncodeValue(s),p=!1;switch(a.fireUpdate){case"auto":p=r.getFireUpdate(r.props.model);break;case"enabled":p=!0}(0,v.addBatchUpdate)(l.pageId,f,d,!1,p)}break;default:"".concat(r.props.model.key,"").concat(t," ")}}))},r.handleInputChange=function(e){var t=e.target.value;r.textFormatter&&(t=r.textFormatter.getFormattedValue(e.target.value),r.textFormatter.resetCursor(t,r.state.innerValue,e.target)),r.handleChange(t)},r.handleSetFocus=function(){var e="input";r.props.model.getMetaProperty("item").get("type")===q.default.Textarea&&(e="textarea");var t=a.default.findDOMNode(xe(r)).getElementsByTagName(e)[0];t&&t.focus()},r.setEncodeData=function(e){r.encodeKeys=[e];var t=(0,W.getPageData)(r.props.model.pageId,H.KDBASE64)||[];!t.includes(e)&&t.push(e),(0,W.setPageData)(r.props.model.pageId,H.KDBASE64,t)},r.setEncodingKeys=function(e){r.encodingKeys=[e];var t=(0,W.getPageData)(r.props.model.pageId,H.ENCODE_KEYS)||[];!t.includes(e)&&t.push(e),(0,W.setPageData)(r.props.model.pageId,H.ENCODE_KEYS,t)},r.getIsEncodingField=function(e){return e===q.default.RichText},r.handleChange=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=r.props.model,i=o.getMetaProperty("item")||(0,B.fromJS)({}),a=i.get("type");if(r.isRadioGroupExist(a,i.get(h.GROUP))&&(o.key=i.get(h.GROUP),setTimeout((function(){(0,W.setPageData)(o.pageId,[Be,i.get(h.GROUP)],{groupValue:e})}),0)),r.setState({innerValue:e},(function(){setTimeout((function(){(0,ce.clearGroupValidateMes)({pageId:o.pageId,key:o.key}),(0,ue.doRealTimeValidate)({value:e,model:o})}),0)})),t||Fe.indexOf(a)>-1&&void 0!==e&&e!==o.getDataValue()){if(r.props.dispatch((0,v.change)(o,e)),"checkbox"===a&&r.getFireUpdate(o)){var l=o.getMetaProperty("busyTip");l&&(0,W.setFieldLastUpdateBusyTip)(o.pageId,{key:o.key,busyTip:l.toJS()})}!r.getFireUpdate(o)&&"attachmentfield"===a&&n&&r.props.dispatch((0,v.change)(o,e,void 0,!0))}},r.handleTextChange=function(e){var t=r.props.model;if(r.getEnable()&&r.getMustInput()){var n=t.pageId,o=t.key,i=t.getMetaLocaleProperty("caption");e?((0,R.deleteFieldValidateMsg)(n,o),(0,R.deleteFieldValidateCaption)(n,o),(0,W.deletePageData)(n,[H.PARENT_COLLAPSE_PANEL_ID,o])):((0,R.setFieldValidateMsg)(n,o),(0,R.setFieldValidateCaption)(n,o,H.VALIDATE_MSG_TYPE.notNull,i),(0,R.setParentCollapsePanelId)(n,o))}r.setState({innerValue:e}),void 0!==e&&e!==t.getDataValue()&&r.props.dispatch((0,v.change)(t,e))},r.handleChangeOfChk=function(e,t){!0!==e&&r.handleChange(!t)},r.setAdressItemByNumber=function(e,t){r.props.dispatch((0,re.setItemByNumber)(e,t))},r.handleFocus=function(){if(r.textFormatter){var e=r.textFormatter.getNormalValue(r.state.innerValue),t=r.textFormatter.generateFormatValue(e);r.setState({innerValue:t})}r.sendFocusEvent2Server(!0)},r.formatAndEncodeValue=function(e){var t,n,o=r.props.model.key;return r.textFormatter&&(e=r.textFormatter.getNormalValue(e)),(null===(t=r.encodingKeys)||void 0===t?void 0:t.indexOf(o))>-1?e=(0,ye.encodeValWithPrefix)(e):(null===(n=r.encodeKeys)||void 0===n?void 0:n.indexOf(o))>-1&&(e=(0,ie.getEncodeValWithPrefix)(e)),e},r.sendFocusEvent2Server=function(e){var t=r.props.model;t.getMetaProperty(h.FIELD_FOCUS)&&r.props.dispatch((0,v.inputFocus)(t,e))},r.handleLargeTextEditBtn=function(e){var t=r.props.model;r.props.dispatch((0,v.clickLargeText)(t,{lock:e}))},r.showPicture=function(e){(0,Y.updateData)(J.KEY_PREVIEW,[!1,{}],(function(){return[!0,e]}))},r.saveValueToCache=function(e,t,r){return function(n){(0,he.setControlStateValue)({pageId:e,key:t,fieldType:r,rowIndex:-1,value:n})}},r.updateLayoutInfo=function(e){var t,n=r.props.formStatus!==e.formStatus,o=(0,se.getLayoutInfo)(a.default.findDOMNode(xe(r)),e.model,n);null!==(t=e.layoutOption)&&void 0!==t&&t.isLastColumn&&o.style&&((o=(0,V.cloneDeep)(o)).style.marginRight="0px"),o!==r.state.layoutInfo&&r.setState({layoutInfo:o})},r.updateInnerValue=function(e){var t=e.model.getDataValue(),n=r.props.model.getDataValue();void 0!==t&&t!==n&&("text"===e.model.getMetaProperty(["item","type"])&&r.textFormatter&&(t=r.textFormatter.generateFormatValue(t)),r.setState({innerValue:t},(function(){r.exectueSaveValueToCacheFn(t)})),setTimeout((function(){(0,ce.clearGroupValidateMes)({pageId:e.model.pageId,key:e.model.key})}),0))},r.setFocus=function(e){var t=e.model.getDataProperty("focus"),n=r.props.model.getDataProperty("focus");t&&!n&&(r.handleSetFocus(),r.props.dispatch((0,R.convertAppModelFunctionAction)((0,R.setDataProperty)(e.model.pageId,e.model.key,"focus",!1))))},r.removeValidateMsg=function(e){var t,n,o=e.model,i=(null===(t=o.meta)||void 0===t||null===(t=t.get(h.ITEM))||void 0===t?void 0:t.hashCode())!==(null===(n=r.props.model.meta)||void 0===n||null===(n=n.get(h.ITEM))||void 0===n?void 0:n.hashCode()),a=r.state.innerValue||e.model.getDataValue(),l=(0,ue.doRealTimeValidate)({value:a,model:o},!1);(i||l)&&(0,ce.removeFieldValidateMsg)({pageId:e.model.pageId,key:e.model.key})},r.removeFieldsTipsMsg=function(e,t){var n=r.props.model.getDataValue(),o=e.model.getDataValue(),i=r.state.innerValue,l=t.innerValue,u=r.getFieldType(),c=r.props.model.getUserLocale();if(u===q.default.LocaleText&&r.mulLangText&&(i=a.default.findDOMNode(r.mulLangText).getAttribute("data-summary"),n&&(n=B.Map.isMap(n)?n.get(c):n[c]),o&&(o=B.Map.isMap(o)?o.get(c):o[c]),l&&(l=B.Map.isMap(l)?l.get(c):l[c])),n!==o||i!==l)r.getEnable()&&(0,ce.deleteMsg)({model:r.props.model});else if(!1===r.getEnable()){var s=r.props.model,f=s.pageId,d=s.key;Object.values(H.VALIDATE_MSG_TYPE).forEach((function(e){return(0,W.deletePageData)(f,[H.VALIDATE_DATA,d,e])})),(0,W.deletePageData)(f,[H.VALIDATE_DATA,d]),Object.values(H.VALIDATE_MSG_TYPE).forEach((function(e){return(0,W.deletePageData)(f,[H.VALIDATE_DATA_CAPTION,d,e])})),(0,W.deletePageData)(f,[H.VALIDATE_DATA_CAPTION,d]),Object.values(H.VALIDATE_MSG_TYPE).forEach((function(e){return(0,W.deletePageData)(f,[H.PARENT_COLLAPSE_PANEL_ID,d,e])})),(0,W.deletePageData)(f,[H.PARENT_COLLAPSE_PANEL_ID,d])}},r.beforeUploadPicture=function(e){r.props.dispatch&&r.props.dispatch((0,C.beforeUpload)(r.props.model,e))},r.uploadPictureResult=function(e){r.props.dispatch&&r.props.dispatch((0,C.reportUploadResult)(r.props.model,e))},r.updateTips=function(e){var t,n,o=(0,le.getTips)(r.props.model),i=(0,le.getTips)(e.model);(0,B.is)(o,i)||r.updateTipsConfig(null===(t=e.model)||void 0===t?void 0:t.pageId,null===(n=e.model)||void 0===n?void 0:n.key,i)},r.renderPrivacyField=function(e,t){var n,o=r.props.model,a=o.getMetaProperty("item")||(0,B.Map)(),l=a.get("type"),u=a.getIn([h.PRIVACY,h.CAN_SHOW_DETAIL]),c=[q.default.LocaleText].includes(l);e=Ie({position:"absolute",top:0,left:0,bottom:0,right:c?23:0,height:"100%",width:"calc(100% - ".concat(c?23:0,"px)"),textAlign:null!==(n=a.get(h.TEXT_ALIGN))&&void 0!==n?n:"left",padding:t?"2px 8px":""},e);return i.default.createElement($.default,{model:o,showIcon:u,style:e,getPlainText:function(){return r.props.dispatch((0,k.getPlainText)(o,-1))},updateValue:function(e){var t=r.props.dispatch;(0,ne.mergeState)(te.UPDATE_CONTROL_VALUE,o.pageId,{key:o.key,value:e},t),t((0,R.convertAppModelFunctionAction)((0,R.setDataProperty)(o.pageId,o.key,H.TIME_STAMP_FRESH,(0,B.fromJS)((new Date).getTime()))))}})};var n=e.model;r.state={innerValue:n.getDataValue(),refresh:!1,tipsConfig:null,layoutInfo:{}},r.isUnmount=!1,r.encodeKeys=[];var o=n.getFormConfig();return r._fileServer=o.fileserver,r.updateTipsConfig=r.updateTipsConfig.bind(xe(r)),r.onEmailSelectItem=r.onEmailSelectItem.bind(xe(r)),r.handleEditBtn=r.handleEditBtn.bind(xe(r)),r.showPicture=r.showPicture.bind(xe(r)),r.getEnable=r.getEnable.bind(xe(r)),r.setItemByNumber=r.setItemByNumber.bind(xe(r)),r.getPlaceHolder=r.getPlaceHolder.bind(xe(r)),r.getLockStyle=r.getLockStyle.bind(xe(r)),r.isNoUnderLineLockStyle=r.isNoUnderLineLockStyle.bind(xe(r)),r.doTextKeyDown=V.default.debounce(r.doTextKeyDown.bind(xe(r)),300),r.onTextKeyDown=r.onTextKeyDown.bind(xe(r)),r.fieldRef=i.default.createRef(),r.forAutoTestActions={change:v.change,click:b.click,setItemByNumber:v.setItemByNumber,onViewDetailBtnClick:v.onViewDetailBtnClick,clickBaseData:v.clickBaseData,queryProvincesAndTitles:O.queryProvincesAndTitles,queryAdminDivisionByParentId:O.queryAdminDivisionByParentId,queryAllCountries:O.queryAllCountries,comfirmDelete:P.comfirmDelete,remarkClick:P.remarkClick},r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ne(e,t)}(t,e),r=t,n=[{key:"componentWillMount",value:function(){this.isUnmount=!1;var e=this.props.model,t=e.getMetaProperty([h.ITEM,h.FIELD_TYPE]),r=e.getMetaProperty([h.ITEM,h.TEXT_FIELD_FORMAT]);t===q.default.Text&&r&&(this.textFormatter=new K.TextFormatter(r))}},{key:"componentDidMount",value:function(){var e=this,t=this.props,r=t.model,n=(t.value,t.dispatch),o=r.pageId,i=r.key,a=r.getMetaProperty("item")||(0,B.fromJS)({}),l=a.get("type"),u=(0,le.getTips)(r);if(u&&this.updateTipsConfig(r.pageId,r.key,u),this.exectueSaveValueToCacheFn=this.saveValueToCache(o,i,l),this.exectueSaveValueToCacheFn(r.getDataValue()),(0,W.setPageData)(r.pageId,["FIELD_VISIBLE",r.key],this.props.isVisible),this.isRadioGroupExist(a.get("type"),a.get(h.GROUP))){var c=r.key;this.removeRadioGroupListener=(0,W.addDataChangeListener)(r.pageId,[Be,a.get(h.GROUP)],(function(e){var t=e.groupValue;n((0,R.convertAppModelFunctionAction)((0,R.setDataProperty)(r.pageId,c,"value",t)))}))}this.removeDirectivesListener=(0,W.subscribeControlMethod)(r.pageId,r.key,"directives",(function(t){void 0!==t&&e.invokeControlMethods(t)})),this.removeValidateListener=(0,W.addDataChangeListener)(o,[H.VALIDATE_FINISH],(function(t){e.props.isVisible||(Object.values(H.VALIDATE_MSG_TYPE).forEach((function(e){return(0,W.deletePageData)(o,[H.VALIDATE_DATA,i,e])})),(0,W.deletePageData)(o,[H.VALIDATE_DATA,i]),Object.values(H.VALIDATE_MSG_TYPE).forEach((function(e){return(0,W.deletePageData)(o,[H.VALIDATE_DATA_CAPTION,i,e])})),(0,W.deletePageData)(o,[H.VALIDATE_DATA_CAPTION,i]),Object.values(H.VALIDATE_MSG_TYPE).forEach((function(e){return(0,W.deletePageData)(o,[H.PARENT_COLLAPSE_PANEL_ID,i,e])})),(0,W.deletePageData)(o,[H.PARENT_COLLAPSE_PANEL_ID,i]))})),this.removeTriggerBtnClickShortCutListener=(0,W.addDataChangeListener)(o,[H.TRIGGER_BTN_CLICK_SHORTCUT],this.handleUpdatePostData),this.updateLayoutInfo(this.props),this.getIsEncodingField(l)&&this.setEncodingKeys(i)}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.isVisible!==this.props.isVisible&&(0,W.setPageData)(e.model.pageId,["FIELD_VISIBLE",e.model.key],e.isVisible),this.updateTips(e),this.updateInnerValue(e),this.setFocus(e),setTimeout((function(){t.removeValidateMsg(e)}),0),this.updateLayoutInfo(e)}},{key:"componentDidUpdate",value:function(e,t){this.removeFieldsTipsMsg(e,t)}},{key:"componentWillUnmount",value:function(){var e;this.isUnmount=!0;var t=this.props.model,r=t.pageId,n=t.key;this.removeDirectivesListener&&this.removeDirectivesListener(),this.removeValidateListener&&this.removeValidateListener(),this.removeRadioGroupListener&&this.removeRadioGroupListener(),null===(e=this.removeTriggerBtnClickShortCutListener)||void 0===e||e.call(this),(0,W.deletePageData)(r,[H.VALIDATE_DATA,n]),(0,W.deletePageData)(r,[H.VALIDATE_DATA_CAPTION,n]),(0,W.deletePageData)(r,[H.PARENT_COLLAPSE_PANEL_ID,n])}},{key:"getFieldType",value:function(){return(this.props.model.getMetaProperty("item")||(0,B.fromJS)({})).get("type")}},{key:"getEnable",value:function(){var e=this.props,t=e.model,r=e.getLocked,n=e.getVisibleUnion,o=r(t),i=n(t);return!1===o&&!0===i}},{key:"getLockStyle",value:function(){var e=this.props.model,t=e.pageId,r=e.state;return(0,R.getFormMeta)(t)(r).get(h.LOCK_STYLE)}},{key:"isNoUnderLineLockStyle",value:function(){var e=this.props,t=e.model,r=(0,e.getLocked)(t);return 1===this.getLockStyle()&&!0===r}},{key:"getMustInput",value:function(e){return(void 0===e?this.props.model:e).getMetaProperty(["item",h.MUST_INPUT])}},{key:"getFireUpdate",value:function(e){return!0===e.getMetaProperty(["item","fu"])}},{key:"_getLock",value:function(e){return this.props.getLocked(e)}},{key:"isRadioGroupExist",value:function(e,t){return"radio"===e&&t}},{key:"getLockedEmptyValue",value:function(e){var t=(e.getMetaProperty("item")||(0,B.Map)()).get(h.LOCKED_EMPTY_VALUE);return t?t.get(e.getUserLocale()):""}},{key:"getPlaceHolder",value:function(){var e=this.props.model,t=(e.getMetaProperty("item")||(0,B.Map)()).get(h.PLACE_HOLDER),r=e.getUserLocale();return V.default.isObject(t)?t.get(r):t}},{key:"isNeedBorder",value:function(e,t){var r=this.props.model.getMetaProperty("item")||(0,B.fromJS)({}),n=r.get("type"),o=r.get("stepperstyle")||0;return!(Object.is(n,"radio")||Object.is(n,h.Ctrls.KDRadioOptGroup)||Object.is(n,"checkbox")||Object.is(n,"stepper")&&(1===o||2===o)||"combo"===e&&1===t||e===q.default.CheckBoxGroup)}},{key:"getIconField",value:function(e,t,r,n,o){var a=this,l=o.Grow,u=o.Shrink,c=Ce(t=t||[],2),f=c[0],d=c[1];return f=f?(0,s.getImgFullPath)(this._fileServer,f,!0):L.default,i.default.createElement(M.default,{imageZoom:e,src:f,bgColor:d,Grow:l,Shrink:u,style:r,onClick:function(e){e.stopPropagation(),a.props.dispatch((0,b.click)(a.props.model))},fieldType:n})}},{key:"onEmailSelectItem",value:function(e){var t=this.props.model;v.change&&this.props.dispatch((0,v.change)(t,e)),(0,ue.doRealTimeValidate)({value:e,model:t})}},{key:"setItemByNumber",value:function(e){var t=this,r=this.props,n=r.model,o=r.getLocked,i=n.pageId,a=n.key;!0!==o(n)&&((0,ge.default)(i,a).then((function(){t.props.dispatch((0,v.setItemByNumber)(n,e))})),this.getFieldType(),this.exectueSaveValueToCacheFn(e))}},{key:"handleOnBlur",value:function(e){var t=this;this.sendFocusEvent2Server(!1);var r=this.props,n=r.model,o=r.dispatch,i=n.pageId,a=n.key,l=(n.getMetaProperty("item")||(0,B.fromJS)({})).get("type"),u=this.state.innerValue;l===q.default.RichText&&(u=null==e?void 0:e.value);var c=this.formatAndEncodeValue(u);(0,ue.doRealTimeValidate)({value:c,model:n});var s=function(){var e=l===q.default.Password,r=n.getMetaProperty(["item","fu"])&&!(0,ce.isNumberOutOfRange)(i,a);t.props.dispatch((0,v.change)(n,c,e,r))};if(void 0!==c&&c!==n.getDataValue())if(this.getFireUpdate(this.props.model)){var f={key:a,value:c};(0,ne.mergeState)(ee.UPDATE_FIELD_VIEW,i,f,o),(0,oe.addUpdateValue)(i,a),setTimeout((function(){s(),(0,oe.removeUpdateValue)(i)}),0)}else s()}},{key:"handleEditBtn",value:function(){var e=this.props.model;this._getLock(e)||this.props.dispatch((0,b.click)(this.props.model))}},{key:"handleEnter",value:function(){}},{key:"onTextKeyDown",value:function(e){13===e.keyCode&&this.doTextKeyDown()}},{key:"doTextKeyDown",value:function(e){this.handleOnBlur()}},{key:"updateTipsConfig",value:function(e,t,r){if(r){var n=this.state.tipsConfig;n||(n=(0,le.createTipsConfig)(e,t),this.setState({tipsConfig:n})),(0,le.saveTipsInfo)(n,r)}else this.setState({tipsConfig:null})}},{key:"renderField",value:function(e,t){var r,n=this,o=this.props.model,a=!1!==o.meta.get(h.SHOW_TITLE),l=void 0===this.state.innerValue?o.getDataValue():this.state.innerValue,u=(0,s.getCommonStyle)(o),c=u.height;this.isRadioGroupExist(t.get("type"),t.get(h.GROUP))&&(l=(0,R.getDataValue)(o.pageId,t.get(h.GROUP))(o.state)),this.state.innerValue===o.getDataValue()&&this.textFormatter&&(l=this.textFormatter.setFormatValue(l));var d=t&&t.get(h.EDITABLE),p=t&&t.get(h.SHOW_EDIT_BTN),y=t&&t.get(h.EDITING_MODE),w=null===(r=null==t?void 0:t.get(h.SHOW_CLEAR_BTN))||void 0===r||r,C=this._getLock(o),k=this.getLockedEmptyValue(o),E=t&&t.get(h.MAX_LENGTH),j=!1===d||C,M=t.getIn([h.PRIVACY,h.IS_PRIVACY])&&1!==(0,W.getPageData)(o.pageId,[o.key,h.IS_PRIVACY]),L=!M&&!(j||C)&&o.pageId,N={},F=(0,s.getComponentDataProperty)(o,h.SKIP_SHORT_CUT_FOCUS,h.SKIP_SHORT_CUT_FOCUS,!1);L&&!F&&(N[Ve]=L);var B=(null==t?void 0:t.get(h.SHOW_EYE))&&!1!==d&&!j,U=Ie({placeholder:this.getPlaceHolder(),maxLength:E<=0?"":this.textFormatter?this.textFormatter.getMaxLength(E):E,onChange:this.handleInputChange,onBlur:function(e){this.handleOnBlur(e.target.value)}.bind(this),value:null==l?"":l,disabled:j||M,theme:t&&"v"===t.get(h.LABEL_DIRECTION,"v")?"default":"flat",showTitle:a,isNoUnderLineLockStyle:this.isNoUnderLineLockStyle(),tabIndex:j?-1:t&&t.get(h.TAB_INDEX,0)},N);j&&(U.tabIndex="-1");var K=t&&t.get("type"),Y=(0,z.getFieldDefaultProps)(K,G.default.CONTENT_FONT_SIZE),J={fontSize:t&&t.get(h.FONT_SIZE)||u&&u.fontSize||Y,color:(0,s.fixColor)(t&&t.get(h.COLOR))||u&&u.color,backgroundColor:(0,s.fixColor)(t&&t.get(h.BACKGROUND_COLOR))||u&&u.backgroundColor,textAlign:t&&t.get(h.TEXT_ALIGN)};(t&&t.get(h.FONT_WEIGHT)||u&&u.fontWeight)&&(J.fontWeight=t&&t.get(h.FONT_WEIGHT)||u&&u.fontWeight);var Z,Q=t&&t.get(h.DISPLAY_PROP),$=A.default[K],ee={};switch(K){case q.default.Number:U.onChange=function(e){var t=e.target.value;(t=isNaN(parseFloat(t))&&"-"!==t?null:t)&&t.includes("%")&&(t=.01*Number(t.replace("%",""))),n.handleChange(t)},U.onBlur=function(e){var t=e.target.value;n.setState({innerValue:t},(function(){n.handleOnBlur()}))};var te=(0,de.isFlexField)(o);U.df=t&&t.get(h.DISPLAY_FORMAT),Z=i.default.createElement($,_e({allBorder:e,lockedEmptyValue:k,model:o,option:t,style:J},U,{lock:C,shouldGetFormattedValueOnBlur:te}));break;case q.default.NameSegText:case q.default.I18nNameField:case q.default.Text:Z=i.default.createElement(f.Text,_e({noValue:k||(0,s.getNOValue)(),type:K,style:J,onKeyDown:function(e){return n.onTextKeyDown(e)},editable:d,lock:C,showEditButton:p,showClear:w,handleTextChange:function(e){return n.handleTextChange(e.target.value)}},U,{onFocus:this.handleFocus}));break;case q.default.Email:U.onChange=function(e){return n.handleChange(e)},Z=i.default.createElement($,_e({model:o,style:J},U,{onBlur:this.handleOnBlur.bind(this),handleEmailSelectItem:this.onEmailSelectItem,shortcutInfo:N,lock:C}));break;case q.default.Flex:delete U.tabIndex,delete U[Ve],Z=i.default.createElement($,_e({model:o,onClick:function(){return n.props.dispatch((0,b.click)(o,[]))},style:J,dispatch:this.props.dispatch},U,{shortcutInfo:N}));break;case q.default.Password:var ne=(0,s.isViewModel)(this.props.formStatus);U.autoComplete="new-password",Z=i.default.createElement(f.Text,_e({type:"password",showEye:B,showEditButton:p,style:J},U,{shortcutInfo:N,showEyeInEmpty:!ne}));break;case q.default.Textarea:Z=i.default.createElement($,_e({model:o,option:t,style:J,lock:C,textareaHeight:this.state.textareaHeight,updateHeight:function(e){return n.setState({textareaHeight:e})},lockedEmptyValue:k},U,{onFocus:this.handleFocus}));break;case q.default.Date:case q.default.Datetime:U.onChange=function(e){return n.handleChange(e)},U.getDateFilter=function(){return n.props.dispatch(_.getDateFilter.apply(void 0,arguments))},U.mustInput=this.getMustInput(),Z=i.default.createElement($,_e({model:o,option:t,type:K,style:J},U,{Grow:1,lock:C}));break;case q.default.DateRange:U.onChange=function(e){return n.handleChange(e)},U.mustInput=this.getMustInput(),Z=i.default.createElement($,_e({model:o,option:t,type:K,style:J},U,{lock:C}));break;case q.default.Checkbox:delete U[Ve],U.onChange,U.onBlur;var oe=U.tabIndex,ie=Pe(U,be),ae=this.getFireUpdate(this.props.model);Z=i.default.createElement($,_e({tabIndex:oe,model:o,option:t,style:J},ie,{fieldWidth:u&&u.width,onMouseDown:ae?null:function(){return n.handleChangeOfChk(U.disabled,U.value)},onClick:ae?function(){return n.handleChangeOfChk(U.disabled,U.value)}:null,shortcutInfo:N}));break;case q.default.RadioGroup:return delete U.tabIndex,null;case q.default.Radio:Z=i.default.createElement($,_e({model:o,option:t,fieldWidth:u&&u.width,isGroupLocked:this.props.getLocked(o,t&&t.get(h.GROUP)),style:J},U));break;case q.default.Combo:case q.default.NameSegCombo:J.height=(0,z.getCommonDefaultProps)(G.default.FIELD_PANEL_ITEM_INPUT_HEIGHT_FOR_BORDER,!0)?(0,z.getCommonDefaultProps)(G.default.FIELD_PANEL_ITEM_INPUT_HEIGHT_FOR_BORDER,!0)-2:"100%",J.lineHeight="".concat(J.height,"px"),Z=i.default.createElement($,_e({model:o,option:t,style:J,mustInput:this.getMustInput()||U.disabled,multiple:Object.is(K,"mulcombo"),fileServer:this._fileServer},U,{Grow:1,onChange:function(e){return n.handleChange(e)},tiggerParent:!0,lock:C,allBorder:e,dispatch:this.props.dispatch}));break;case q.default.MulCombo:Z=i.default.createElement($,_e({model:o,option:t,style:J,mustInput:this.getMustInput()||U.disabled,multiple:Object.is(K,"mulcombo"),fileServer:this._fileServer,allBorder:e},U,{Grow:1,onChange:function(e){return n.handleChange(e)},tiggerParent:!0}));break;case q.default.Cascader:delete U.tabIndex,Z=i.default.createElement($,_e({model:o,option:t,style:J,mustInput:this.getMustInput()||U.disabled},U,{Grow:1,onChange:function(e){return n.handleChange(e)},value:U.value,placeholder:U.placeholder,disabled:U.disabled}));break;case q.default.User:case q.default.Basedata:case q.default.MulBasedata:case q.default.Organization:case q.default.NameSegBasedata:var le=(0,s.getComponentDataProperty)(o,h.IS_NO_OPTION_MODE,h.IS_NO_OPTION_MODE,!1);Z=i.default.createElement($,{model:o,dispatch:this.props.dispatch,option:t,type:K,onChange:function(){return null},Grow:1,disabled:U.disabled,placeholder:U.placeholder,inputStyle:J,theme:U.theme,tabIndex:U.tabIndex,setItemByNumber:this.setItemByNumber,mustInput:this.getMustInput(),enable:this.getEnable(),isNoUnderLineLockStyle:U.isNoUnderLineLockStyle,shortcutInfo:N,isNoOption:le,lock:C});break;case q.default.LocaleText:var ue=t&&t.get("multiLine");c&&(J.maxHeight=c);var ce=this.getLangSetting(o,U.value),se=ce.lang,fe=ce.langList,pe=ce.defaultLang,ye={bottom:4};if("h"===this.state.layoutInfo.labelDirection&&e){var me=(0,z.getCommonDefaultProps)(G.default.FIELD_PANEL_ITEM_INPUT_HEIGHT_FOR_BORDER,!0)?(0,z.getCommonDefaultProps)(G.default.FIELD_PANEL_ITEM_INPUT_HEIGHT_FOR_BORDER,!0):32;ye.bottom=(me-16)/2}Z=i.default.createElement(m.default,{style:u,inputStyle:J,maxLength:U.maxLength,value:U.value,placeholder:U.placeholder,langList:fe,Grow:1,onChange:function(e){return n.handleChange(e)},onBlur:function(e){return n.handleOnBlur(e)},disabled:U.disabled,theme:U.theme,multiLine:ue,defaultLang:pe,lang:se,isNoUnderLineLockStyle:U.isNoUnderLineLockStyle,tabIndex:U.tabIndex,ref:function(e){n.mulLangText=e},lockedEmptyValue:k,onFocus:this.handleFocus,lock:C,allBorder:e,shortcutInfo:N,isPrivacy:M,langIconStyle:ye,pageId:null==o?void 0:o.pageId});break;case q.default.LargeText:Z=i.default.createElement(g.default,{isLimitHeight:!!u.height&&0!==u.height,inputStyle:J,maxLength:U.maxLength,value:U.value,theme:U.theme,placeholder:U.placeholder,Grow:1,isNoUnderLineLockStyle:U.isNoUnderLineLockStyle,editingMode:y,onChange:function(e){return n.handleChange(e.target.value)},disabled:U.disabled,onBlur:function(e){return n.handleOnBlur(e)},onHandleBtnClick:function(e,t){return n.handleLargeTextEditBtn(t)},onHandleEnter:function(e){return n.handleEnter(e)},tabIndex:U.tabIndex,lockedEmptyValue:k,iconClass:"".concat(t&&t.get("fontClass")||"kdfont kdfont-zidingyi"," ").concat(e?X.default.r6:""),shortcutInfo:N,lock:C});break;case q.default.Picture:delete U.tabIndex,delete U[Ve];break;case q.default.CascadeMenu:Z=i.default.createElement(I.default,_e({value:U.value,handleChange:function(e){return n.handleChange(e)},shouldRespondADMethod:s.shouldRespondADMethod,style:J,placeholder:U.placeholder,disabled:U.disabled,theme:U.theme,isNoUnderLineLockStyle:U.isNoUnderLineLockStyle},this.props,{tabIndex:U.tabIndex},(0,s.createActions)(O,this.props.dispatch),{lock:C}));break;case q.default.City:Z=i.default.createElement(T.default,_e({value:U.value,style:J,disabled:U.disabled,handleChange:function(e){return n.handleChange(e)},displayType:Q,placeholder:U.placeholder,theme:U.theme,isNoUnderLineLockStyle:U.isNoUnderLineLockStyle},this.props,{tabIndex:U.tabIndex,shortcutInfo:N},(0,s.createActions)(S,this.props.dispatch),{lock:C}));break;case q.default.Attachment:delete U.tabIndex,delete U[Ve],U.onChange=function(e,t){return n.handleChange(e,!1,["remove"].includes(t))},ee.fontSize=(0,z.getFieldDefaultProps)(K,G.default.TITLE_FONT_SIZE),Z=i.default.createElement($,_e({model:o,option:t,type:K,dispatch:this.props.dispatch,disabled:U.disabled,labelStyle:ee},U,this.props,(0,s.createActions)(P,this.props.dispatch)));break;case q.default.Telephone:Z=i.default.createElement(D.default,_e({isValidate:t&&t.get("vlr"),lock:C,model:o,style:J,getTelViaList:function(){return n.props.dispatch(v.getTelViaList.apply(void 0,arguments))}},U,{onChange:function(e){return n.handleChange(e)},onBlur:this.handleOnBlur.bind(this),shortcutInfo:N}));break;case q.default.Time:case q.default.TimeRange:U.onChange=function(e){return n.handleChange(e)},U.mustInput=this.getMustInput(),Z=i.default.createElement($,_e({model:o,mask:t&&t.get(h.MASK),inputStyle:J},U,{Grow:1,lock:C}));break;case q.default.Stepper:U.onChange=function(e){var t=e.target.value;(t=isNaN(parseFloat(t))&&"-"!==t?null:t)&&t.includes("%")&&(t=.01*Number(t.replace("%",""))),n.handleChange(t)},U.onBlur=function(e){var t=e.target.value;n.setState({innerValue:t},(function(){n.handleOnBlur()}))},U.handelOperatorClick=function(e,t){n.handleChange(e,t)},U.df=t&&t.get(h.DISPLAY_FORMAT),Z=i.default.createElement($,_e({model:o,option:t,style:J,fieldStyle:{width:u.width,height:u.height}},U));break;case q.default.Address:if(u.height){var ge=a?H.FIELD_GAP_WITH_TITLE:H.FIELD_GAP_WITHOUT_TITLE;J.maxHeight=parseFloat(u.height)-ge}delete U.tabIndex,delete U[Ve],J.overflowY="auto",Z=i.default.createElement($,{model:o,lock:C,showAddressModal:function(){return n.props.dispatch(v.showAddressModal.apply(void 0,arguments))},inputProps:U,inputStyle:J,disabled:j,containerStyle:u,option:t,getAddressSearchList:function(){return n.props.dispatch(re.getAddressSearchList.apply(void 0,arguments))},changeAddressVal:function(){return n.props.dispatch(re.changeAddressVal.apply(void 0,arguments))},setItemByNumber:this.setAdressItemByNumber});break;case q.default.Signature:case q.default.RichText:delete U.tabIndex,delete U[Ve];break;case q.default.CheckBoxGroup:delete U[Ve];var he=(0,s.isViewModel)(this.props.formStatus);Z=i.default.createElement($,_e({model:o,option:t,style:J},U,{allBorder:!1,onChange:function(e){return n.handleChange(e)},isView:he,shortcutInfo:N}));break;case q.default.RadioOptGroup:var ve,Oe=(0,s.isViewModel)(null===(ve=this.props)||void 0===ve?void 0:ve.formStatus);Z=i.default.createElement($,_e({model:o,option:t,style:J,mustInput:this.getMustInput(),multiple:Object.is(K,"mulcombo"),lock:C,isView:Oe},U,{onChange:this.handleChange,allBorder:!1}));break;default:delete U.tabIndex,Z=i.default.createElement(f.Text,_e({noValue:(0,s.getNOValue)(),style:J,type:"text"},U))}if(!0===p){var we=[],Se=t&&t.get("fontClass")||"kdfont kdfont-zidingyi",Ce=(0,x.default)(Te(Te(Te({},X.default["edit-btn-"+U.theme],!0),X.default.editBtnDisabled,C),X.default.allBorder,e),Se),ke=Object.is(K,"text")||Object.is(K,"passwordbox"),Ee=V.default.debounce(this.handleEditBtn,100),De=i.default.createElement("div",{className:Ce,onClick:Ee,key:"edit-btn"});return we=we.concat(De,i.default.cloneElement(Z,{key:"input",className:ke&&!C?X.default["edit-btn-margin"]:null}))}return Z}},{key:"renderSelect",value:function(e){var t=this,r=this.props.model,n=this.getMustInput(),o=(0,s.getComponentDataProperty)(r,h.STORE,["item",h.STORE])||[],a=[];return o.forEach((function(e){var n=e.get(0),o=(0,Q.getValueByPath)(e,[1],{current:r.getUserLocale()}),i=e.get(2);i&&(i=(0,s.getImgFullPath)(t._fileServer,i)),a.push({value:n,alias:o,imgkey:i})})),i.default.createElement(p.default,{items:a,onChange:function(e){return t.handleChange(e)},value:e.value,Grow:1,disabled:e.disabled,style:e.style,multiple:e.multiple,theme:e.theme,required:n,placeholder:e.placeholder})}},{key:"render",value:function(){var e,t=this,r=this.props,n=r.model,o=r.layoutOption,a=n.meta,l=this.state.tipsConfig,u=this.getMustInput(),c=!1!==a.get(h.SHOW_TITLE),f=n.getMetaProperty("item")||(0,B.Map)(),p=n.getMetaLocaleProperty("caption"),m=f.get("type");if(l&&(e=i.default.createElement(F.default,{tips:l,style:{lineHeight:"initial"}})),m===q.default.GeographicLocation){var g=A.default[m];return i.default.createElement(g,{model:n,updateModel:function(e){return t.props.dispatch((0,v.change)(n,e))},required:u,isLocked:this.props.isLocked,locale:n.getUserLocale(),showFormByTips:function(){return t.props.dispatch(w.showFormByTips.apply(void 0,arguments))},slot:e})}var O=Object.assign({},(0,s.getCommonStyle)(n),this.props.style),S=a.get("fullLine");S&&(O.width="100%"),delete O.textAlign;var P,_=(0,s.getCommonClass)(n),k=_.Grow,I=_.Shrink,T=_.AlignSelf,D=(0,E.default)({Grow:k,Shrink:I,AlignSelf:T}),j={width:n.getMetaLocaleProperty(h.LABEL_WIDTH)},M=!!this.state.panelType,L=this.state.layoutInfo.labelTextAlign,N=f.get(h.LABEL_DIRECTION)||this.state.layoutInfo.labelDirection||"v";if(this.isNoUnderLineLockStyle())P=null==a?void 0:a.getIn(["item",h.FIELD_STYLE]);else if(P=f.get(h.FIELD_STYLE),(0,s.isViewModel)(this.props.formStatus)&&1!==P){var V=(0,z.getFieldDefaultProps)(m,G.default.FIELD_STYLE_IN_VIEW);V===H.FIELD_STYLE_TYPE.NOLINE&&(f&&!1===f.get(h.EDITABLE)||this._getLock(n)||(V=(0,z.getFieldDefaultProps)(m,G.default.FIELD_STYLE))),void 0!==V&&(P=V)}var U,K,Y="0px"===(null==O?void 0:O.width)||"0px"===(null==O?void 0:O.height),J=Object.is(P,2)&&!["radio","checkbox",q.default.CheckBoxGroup,q.default.RadioOptGroup].includes(m)&&!Y,Q=Object.is(P,3)&&"radio"!==m&&"checkbox"!==m,$=f.get("showtype");if("textarea"===m||"largeText"===m){var ee="v"===f.get(h.LABEL_DIRECTION,"v")?"default":"flat";O.height||Object.is(ee,"flat")||(O.height="initial")}else if("checkbox"===m&&(1===f.get("s")||2===f.get("s"))||"radio"===m)c=!1,"radio"===m&&(U=P),"checkbox"===m&&(K=f.get("s"));else{if("picture"===m){var te,re,ne,oe=n.getMetaProperty("rd"),ie=this.state.innerValue||n.getDataValue(),ae=n.getDataProperty("u"),le=this._getLock(n),ue=f.get("s"),ce=f&&f.get("lp"),se=(0,R.getAppId)(n.pageId)(n.state),pe=(0,R.getFormId)(n.pageId)(n.state),ye=n.getMetaProperty("sem")||!1,me=n.getMetaProperty(h.ALLOW_CROPPER)||f.get(h.ALLOW_CROPPER)||!1,ge=null!==(te=n.getMetaProperty(h.CUT_ASPECT_RATIO))&&void 0!==te?te:0,he=(0,Z.getMaxSize)(1024*(f.get(h.IMAGE_MAX_SIZE)||0)*1024),be=(null===(re=this.state.layoutInfo)||void 0===re||null===(ne=re.getLabelStyle)||void 0===ne?void 0:ne.call(re,n))||{};be.fontSize=(0,z.getFieldDefaultProps)(m,G.default.TITLE_FONT_SIZE);var Oe=i.default.createElement(d.default,{allowCropper:me,cutAspectRatio:parseInt(ge),appId:se,className:D,disabled:le,fieldType:m,fileServer:this._fileServer,formId:pe,id:n.key,imgPath:ae,labelDirection:N,labelStyle:be,labelText:p,labelTextAlign:L,lockPreview:ce,maxSize:he,model:n,mustInput:u,pictureModel:n,radius:oe,sectionMagnifier:ye,Shrink:0,showPicture:this.showPicture,showStyle:ue,showTitle:c,src:ie,style:O,onChange:function(e){return t.handleChange(e)},onClick:function(){return t.props.dispatch((0,b.click)(t.props.model))},onDelete:function(e){return t.props.dispatch((0,C.removeImage)(n,e))},showFormByTips:function(){return t.props.dispatch(w.showFormByTips.apply(void 0,arguments))},beforeUpload:this.beforeUploadPicture,reportUploadResult:this.uploadPictureResult,slot:e});return"view"===ue?i.default.createElement("div",{className:(0,x.default)(X.default["field-item-pic"],{"layout-h":"h"===N})},Oe):Oe}if("icon"===m){var we=void 0!==n.getMetaProperty("imageZoom");return this.getIconField(we,n.getDataValue(),O,m,Ie({},{Grow:k,Shrink:I}))}if("attachmentfield"===m)return this.renderField(J,f);if("signature"===m){var Se,Pe,Ce=A.default[m],ke=this.state.innerValue||n.getDataValue(),Ee=this._getLock(n),De=f.get("s"),je=(null===(Se=this.state.layoutInfo)||void 0===Se||null===(Pe=Se.getLabelStyle)||void 0===Pe?void 0:Pe.call(Se,n))||{};je.fontSize=(0,z.getFieldDefaultProps)(m,G.default.TITLE_FONT_SIZE);var Me=n.getMetaProperty(["item",h.FORCE_SIGNATURE]),Le=i.default.createElement(Ce,_e({className:D,disabled:Ee,model:n,id:n.key,labelDirection:N,labelStyle:je,labelText:p,labelTextAlign:L,mustInput:u,dispatch:this.props.dispatch,showStyle:De,showTitle:c,value:ke,style:O,mandatoryHandSigning:Me,setAsDefaultSignature:function(e){return t.props.dispatch((0,ve.setAsDefaultSignature)(n,e))},onChange:function(e){return t.handleChange(e)},slot:e},this.props.attachData));return Le}if("richtext"===m){var Re,Ae=A.default[m],xe=this.state.innerValue||n.getDataValue(),Ne=this._getLock(n),Fe=f.get("s"),Be=(0,R.getAppId)(n.pageId)(n.state),Ve=(0,R.getFormId)(n.pageId)(n.state);j.fontSize=(0,z.getFieldDefaultProps)(m,G.default.TITLE_FONT_SIZE);var Ue=Ne&&n.getMetaProperty(["item","lockAutoHeight"]),We=null===(Re=n.getMetaProperty(["item","toolbarItems"]))||void 0===Re?void 0:Re.get("toolbarItems").toJS(),He=this.getPlaceHolder(),ze=this.getFireUpdate(this.props.model);return i.default.createElement(Ae,_e({model:n,appId:Be,formId:Ve,value:xe,className:D,disabled:Ne,mustInput:u,placeholder:He,isFireUpdate:ze,lockAutoHeight:Ue,toolbarItems:We,showTitle:c,labelText:p,labelDirection:N,labelTextAlign:L,labelStyle:j,dispatch:this.props.dispatch,slot:e,showStyle:Fe,onBlur:function(e){return t.handleOnBlur(e)},style:O},this.props.attachData))}}var Ge=this.renderField(J,f,Q),Ke=f.getIn([h.PRIVACY,h.IS_PRIVACY])&&1!==(0,W.getPageData)(n.pageId,[n.key,h.IS_PRIVACY]),qe=void 0===this.state.innerValue?n.getDataValue():this.state.innerValue;if(1===P&&!Object.is(m,"radiogroup")&&!Object.is(m,"radio")){var Ye=(0,x.default)("kd-cq-field kd-cq-label",Te({},X.default["text-omit"],!0),D);if(Ke){var Je=this.renderPrivacyField(Ie(Ie({},O),{},{position:"relative",backgroundColor:"inherit"}),J);return i.default.createElement("div",{className:Ye,style:O},Je)}return i.default.createElement(fe.default,_e({className:D,fileServer:this._fileServer,model:n,style:O,value:qe},this.props.attachData))}var Xe=f&&f.get(h.SHOW_EDIT_BTN),Ze=this.isNeedBorder(m,$);if(!Ge)return null;var Qe=m===q.default.LocaleText&&n.getMetaProperty([h.ITEM,h.MULTI_LINE]),$e=this.isFieldDisabled(Ge),et=Ke&&this.renderPrivacyField(O,J),tt=f.get("dst")-0==1,rt=this.state.layoutInfo.contentContainerStyle,nt=(0,de.getFieldStyle)(O,this.state.layoutInfo.style);return i.default.createElement(y.default,_e({ref:this.fieldRef,className:(0,x.default)((0,E.default)({AlignSelf:T})),contentContainerStyle:rt,labelText:p,showEditButton:Xe,needBorder:Ze,allBorder:J,noBorder:Q,labelStyle:j,labelTextAlign:L,showTitle:c,showType:$,style:nt,id:n.key,mustInput:u,labelDirection:N,fieldType:m,radioStyle:U,checkboxStyle:K,model:n,showFormByTips:function(){return t.props.dispatch(w.showFormByTips.apply(void 0,arguments))},isNoUnderLineLockStyle:this.isNoUnderLineLockStyle(),isMultiLine:Qe,disabled:$e,layoutOption:o,isBaseDataSelectModel:tt,slot:e,isCompact:M,fullLine:S},this.props.attachData),et,Ge)}}],n&&je(r.prototype,n),o&&je(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(i.default.Component),o.contextTypes={store:l.default.object},n=o))||n)||n)||n)||n;t.default=Ue},284384:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(622676),r(233696),r(743924),r(205960),r(846428),r(708896),r(969e3),r(606200),r(534440),r(76152),r(670864),r(76124),r(880920),r(387912),r(836887),r(78504),r(776512),r(997308),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(9692),r(443616),r(835164),r(297336),r(336368),r(660824);var o,i,a,l,u=j(r(795520)),c=j(r(540900)),s=r(891052),f=j(r(671252)),d=(j(r(790832)),r(211152)),p=r(439532),y=j(r(720756)),m=j(r(74120)),g=r(899760),h=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=D(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(348896)),v=j(r(385384)),b=j(r(930672)),O=j(r(696428)),w=r(251536),S=r(674260),P=r(868256),_=r(235708),C=r(589200),k=r(558848),E=r(331428),I=r(783168),T=j(r(227248));function D(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(D=function(e){return e?r:t})(e)}function j(e){return e&&e.__esModule?e:{default:e}}function M(){return M=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},M.apply(this,arguments)}function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e,t,r){return(t=x(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,x(n.key),n)}}function x(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function N(e,t,r){return t=B(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return V(e)}(e,F()?Reflect.construct(t,r||[],B(e).constructor):t.apply(e,r))}function F(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(F=function(){return!!e})()}function B(e){return B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},B(e)}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function U(e,t){return U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},U(e,t)}var W=(o=(0,h.default)(!0),i=(0,b.default)("field"),(0,v.default)(a=o(a=(0,h.ContainerLockWrap)(a=i((l=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=N(this,t,[e])).doResetColumn=function(){r.setState((function(e){return{themeChange:e.themeChange+1}}))},r.getTileProps=function(e){var t=r.props,n=t.params,o=t.rowData,i=t.getFiledVisible,a=t.getFieldLocked,l=t.activeRowKey,u=t.getColMetaByField,c=t.getColProperty,s=t.getDataProperty,f=t.comfirmDelete,d=t.dispatch;return e&&e.get&&"tilefield"===e.get("type")?{params:n,rowData:o,getFiledVisible:i,getFieldLocked:a,activeRowKey:l,getColMetaByField:u,getColProperty:c,getDataProperty:s,mergeState:w.mergeState,comfirmDelete:f,dispatch:d}:{}},r.handleFullScreen=function(){var e=!r.state.fullScreen;r.setState({fullScreen:e});var t=r.props.model,n=t.pageId,o=t.key;(0,I.updateFullScreenGlobalData)(e,"".concat(n,"_").concat(o))},r.updateTipsConfig=r.updateTipsConfig.bind(V(r)),r.state={themeChange:0,tipsConfig:null,fullScreen:!1},r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U(e,t)}(t,e),r=t,n=[{key:"componentDidMount",value:function(){var e=this,t=this.props.model,r=t.pageId;this.removeChangeThemeListener=(0,S.addDataChangeListener)(P.KEY_MODIFY_THEME_ACTION,(function(){(0,C.isMobileClient)()||((0,_.getVisiblePages)((0,S.getData)(P.KEY_PAGE_VISIBLE_STATUS)).includes(r)?e.doResetColumn():e.removePageVisibleChangeListener=(0,S.addDataChangeListener)(P.KEY_PAGE_VISIBLE_STATUS,(function(t){(0,_.getVisiblePages)(t).includes(r)&&(e.removePageVisibleChangeListener(),e.doResetColumn())})))}));var n=(0,k.getTips)(this.props.model);n&&this.updateTipsConfig(t.pageId,t.key,n)}},{key:"componentWillReceiveProps",value:function(e){var t,r,n=(0,k.getTips)(this.props.model),o=(0,k.getTips)(e.model);(0,s.is)(n,o)||this.updateTipsConfig(null===(t=e.model)||void 0===t?void 0:t.pageId,null===(r=e.model)||void 0===r?void 0:r.key,o)}},{key:"componentWillUnmount",value:function(){var e;this.removeChangeThemeListener(),null===(e=this.removePageVisibleChangeListener)||void 0===e||e.call(this)}},{key:"updateTipsConfig",value:function(e,t,r){if(r){var n=this.state.tipsConfig;n||(n=(0,k.createTipsConfig)(e,t),this.setState({tipsConfig:n})),(0,k.saveTipsInfo)(n,r)}else this.setState({tipsConfig:null})}},{key:"render",value:function(){var e,t=this,r=this.props,n=r.model,o=r.dispatch,i=this.state.tipsConfig,a=Object.assign({},(0,p.getCommonStyle)(n),this.props.style),l=(0,p.getCommonClass)(n),c=n.getMetaLocaleProperty("text"),s=n.getMetaProperty("items"),h=n.getMetaProperty("collapsible"),v=n.getMetaProperty("maximize"),b=n.getMetaProperty("defaultcollapse"),w=n.getMetaProperty("clickable");i&&(e=u.default.createElement(O.default,{tips:i}));var S=(0,f.default)(R(R({"kd-cq-full-screen-icon":!this.state.fullScreen,"kd-cq-exit-full-screen-icon":this.state.fullScreen,"kdfont kdfont-quanping":!this.state.fullScreen,"kdfont kdfont-guanbiquanping":this.state.fullScreen},T.default["full-screen"],!0),"kd-hover-color",!0)),P=v&&!h?u.default.createElement("span",{className:S,onClick:this.handleFullScreen,title:this.state.fullScreen?(0,E.getLangMsg)({key:"tabs.key0002"}):(0,E.getLangMsg)({key:"tabs.key0001"})}):null,_=v&&this.state.fullScreen?"kd-cq-filedsetpanel-fullscreen":"";return u.default.createElement(m.default,M({ref:this.baseCtrlRef,model:n,id:n.key,pageId:n.pageId,handleClick:function(){return w&&o((0,g.click)(n,[]))},style:a,runTime:!0},l,{Collapsible:h,Maximize:v,defaultCollapse:b,Name:c},this.props.attachData,{userLocal:n.getUserLocale(),resetColumn:this.state.themeChange,slot:e,fieldSetSlot:P,className:_,"data-ctrl-type":"fieldpanel","data-pid":n.pageId}),s?s.map((function(e){var r=t.getTileProps(e);return(0,y.default)(n.pageId,e,(0,d.getGlobalState)(),void 0,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach((function(t){R(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},r))})):null)}}],n&&A(r.prototype,n),o&&A(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(u.default.Component),l.contextTypes={store:c.default.object},a=l))||a)||a)||a)||a);t.default=W},435092:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(622676),r(233696),r(743924),r(205960),r(846428),r(708896),r(969e3),r(606200),r(534440),r(76152),r(670864),r(76124),r(880920),r(836887),r(78504),r(776512),r(997308),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(297336),r(336368),r(387912),r(497448),r(86744);var o,i,a,l,u,c=x(r(795520)),s=R(r(369396)),f=r(891052),d=x(r(211152)),p=r(899760),y=r(704424),m=R(r(122696)),g=r(439532),h=x(r(348896)),v=R(r(84300)),b=R(r(385384)),O=r(738704),w=r(366208),S=R(r(459236)),P=r(244144),_=r(218652),C=r(373728),k=R(r(773088)),E=R(r(597588)),I=R(r(930672)),T=R(r(696428)),D=R(r(729848)),j=R(r(47960)),M=R(r(995560)),L=r(558848);function R(e){return e&&e.__esModule?e:{default:e}}function A(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(A=function(e){return e?r:t})(e)}function x(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=A(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}function N(){return N=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},N.apply(this,arguments)}function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function B(e,t,r){return(t=U(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,U(n.key),n)}}function U(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function W(e,t,r){return t=z(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return G(e)}(e,H()?Reflect.construct(t,r||[],z(e).constructor):t.apply(e,r))}function H(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(H=function(){return!!e})()}function z(e){return z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},z(e)}function G(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function K(e,t){return K=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},K(e,t)}var q=(o=(0,I.default)("flexpanel"),i=(0,v.default)(!1,!1,!0),a=(0,h.default)(!0),(0,b.default)(l=o(l=i(l=(0,E.default)(l=a(l=(0,h.ContainerLockWrap)((u=function(e){function t(e){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=W(this,t,[e])).onIntersection=function(e,t){r.currentVisible=e,e&&!r.state.showChildren&&r.pageModel.waitLoadPromise().then((function(){r.currentVisible&&r.setState({showChildren:!0},(function(){var e=r.props.model;e.getMetaProperty("FireShowEvt")&&(0,P.invokeControlService)(e,C.ON_SHOW,[],(0,_.getPost)(e.pageId)((0,d.getGlobalState)()))}))}))},r.onRef=function(e){r.childCtrl=e},r.handleClick=r.handleClick.bind(G(r)),r.updateTipsConfig=r.updateTipsConfig.bind(G(r));var n=!1!==e.model.getMetaProperty("lazyload"),o=e.model.getMetaProperty("type"),i=!!window.__nolazyload__||!n||"flexpanel"!==o,a=e.model.getMetaProperty("collapsible"),l=e.model.getInitExpaned();return r.pageModel=(0,D.default)(e.model.pageId),i||e.model.getMetaProperty("FireShowEvt")||l&&(a?(i=r.pageModel.isImmediatelyLoad(e.model.key))&&(r.isImmediatelyLoad=!0):i=!r.props.parentIsHiding||!r.props.parentIsHiding()),r.state={showChildren:i,tipsConfig:null},r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&K(e,t)}(t,e),r=t,n=[{key:"handleClick",value:function(e){e.stopPropagation();var t=this.props,r=t.model,n=t.dispatch;this.props.getLocked(r)||n((0,p.click)(r,[]))}},{key:"componentDidMount",value:function(){var e=this,t=this.props.model,r=(0,L.getTips)(t);r&&this.updateTipsConfig(t.pageId,t.key,r),this.handelPanelScroll(this.props);var n=s.default.findDOMNode(this);setTimeout((function(){e.isImmediatelyLoad&&(0,j.default)(n,500).then((function(t){var r=d.default[d.IS_IE]?1500:100;setTimeout((function(){e.pageModel.addImmediatelyLoadNum()}),r)}))}),0)}},{key:"componentWillReceiveProps",value:function(e){var t,r;this.handelPanelScroll(e);var n=(0,L.getTips)(this.props.model),o=(0,L.getTips)(e.model);(0,f.is)(n,o)||this.updateTipsConfig(null===(t=e.model)||void 0===t?void 0:t.pageId,null===(r=e.model)||void 0===r?void 0:r.key,o)}},{key:"componentWillUnmount",value:function(){this.dispose=!0,this.removeDataMessageListener&&this.removeDataMessageListener(),this.removeDataMessageListenerOfScrollTop&&this.removeDataMessageListenerOfScrollTop(),this.removeCheckElementVisible&&this.removeCheckElementVisible()}},{key:"updateTipsConfig",value:function(e,t,r){if(r){var n=this.state.tipsConfig;n||(n=(0,L.createTipsConfig)(e,t),this.setState({tipsConfig:n})),(0,L.saveTipsInfo)(n,r)}else this.setState({tipsConfig:null})}},{key:"handelPanelScroll",value:function(e){var t=this;if(this.context){var r=e.model,n=r.pageId,o=r.key;r.getMetaProperty("scrollBottom")&&!this.removeDataMessageListener&&(this.removeDataMessageListener=(0,O.addDataChangeListener)(n,["__panelScrollBottom__",o],(function(){setTimeout((function(){t.childCtrl&&t.childCtrl.panelScroll()}),100)}))),r.getMetaProperty("scrollTop")&&!this.removeDataMessageListenerOfScrollTop&&(this.removeDataMessageListenerOfScrollTop=(0,O.addDataChangeListener)(n,["__panelScrollTop__",o],(function(){setTimeout((function(){t.childCtrl&&t.childCtrl.panelScroll("top")}),100)})))}}},{key:"render",value:function(){var e=this;if(!this.context)return null;var t,r=this.props,n=r.model,o=r.renderDragActionDiv,i=r.dispatch,a=this.state.tipsConfig,l=Object.assign({},(0,g.getCommonStyle)(n),this.props.style),u=n.getDataProperty("bgImg");u&&(u=(0,g.getImgFullPath)(n.getFormConfig().fileserver,u),l.backgroundImage="url(".concat(u,")")),a&&(t=c.default.createElement(T.default,{tips:a}));var s=(0,g.getCommonClass)(n),p=n.getMetaLocaleProperty("text"),h=n.getMetaProperty("collapsible"),v=n.getMetaProperty("defaultcollapse"),b=n.getMetaProperty("clickable"),O=(0,d.getGlobalState)(),w=(0,g.getComponentDataProperty)(n,"shadow","shadow",!1),P=n.getMetaProperty("maximize"),_=this.context,C=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){B(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({"data-pid":n.pageId},this.props.attachData);return c.default.createElement(m.default,N({shadow:w,model:n,id:n.key,pageId:n.pageId,onClick:function(t){return b&&e.handleClick(t)},style:l},s,{Clickable:b,onRef:this.onRef,Maximize:P,Collapsible:h,defaultCollapse:v,Name:p},C,{slot:t,showFormByTips:function(){return i(y.showFormByTips.apply(void 0,arguments))},userLocal:n.getUserLocale(),renderDragActionDiv:o}),!this.state.showChildren&&c.default.createElement(S.default,{onIntersection:this.onIntersection}),_&&this.state.showChildren&&c.default.createElement(k.default,{enabledLazyLoad:d.default[d.IS_IE]&&!this.isImmediatelyLoad,pageId:n.pageId,childrenMeta:n.meta.get("items",new f.List),state:O}),_&&c.default.Children.toArray((0,g.parseSubForms)(n.pageId,n.meta.get("id"),O)))}}],n&&V(r.prototype,n),o&&V(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(c.Component),u.contextType=w.PageLoadDataCompleteContext,l=u))||l)||l)||l)||l)||l)||l);t.default=function(e){return c.default.createElement(M.default.Consumer,null,(function(t){return c.default.createElement(q,N({},e,{parentIsHiding:t}))}))}},633888:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(505684),r(323784),r(743924),r(205960),r(976896),r(721300),r(708896),r(606200),r(534440),r(670864),r(880920),r(836887),r(690512),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(835164),r(693917),r(297336),r(846428),r(336368),r(387912),r(497448),r(633768),r(328640);var o,i,a=v(r(795520)),l=g(r(540900)),u=r(891052),c=r(211152),s=r(439532),f=r(899760),d=r(735696),p=g(r(33572)),y=r(738704),m=v(r(348896));function g(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}function v(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},b.apply(this,arguments)}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function S(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,P(n.key),n)}}function P(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function _(e,t,r){return t=k(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return E(e)}(e,C()?Reflect.construct(t,r||[],k(e).constructor):t.apply(e,r))}function C(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(C=function(){return!!e})()}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e,t){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},I(e,t)}var T=(0,m.default)(!0)(o=(0,m.ContainerLockWrap)((i=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=_(this,t,[e])).getSrcField=function(){var e=r.props.model.getMetaProperty("sourceCtrl");return!0===r.props.model.getMetaProperty("isGridCell")?{sourceCtrl:e=r.props.model.getMetaProperty(["flexInfo","colId"]),r:r.props.model.getMetaProperty(["flexInfo","rowKey"]),c:e}:{sourceCtrl:e}},r.handleClick=r.handleClick.bind(E(r)),r.tryCloseFlexible=r.tryCloseFlexible.bind(E(r)),r.closeFlexible=r.closeFlexible.bind(E(r)),r.forAutoTestActions={tryCloseFlexible:d.tryCloseFlexible},r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I(e,t)}(t,e),r=t,(n=[{key:"tryCloseFlexible",value:function(){var e=this.getSrcField(),t={pageId:this.props.model.pageId,key:e.sourceCtrl},r={flexId:this.props.model.key};null!=e.r&&(r.r=e.r,r.c=e.c),this.props.dispatch((0,d.tryCloseFlexible)(t,r))}},{key:"closeFlexible",value:function(){this.props.dispatch((0,d.closeFlexible)(this.props.model,this.props.model.key))}},{key:"clickCloseFlexible",value:function(){this.props.dispatch((0,d.clickCloseFlexible)(this.props.model,this.props.model.key))}},{key:"handleClick",value:function(e){e.stopPropagation();var t=this.props,r=t.model,n=t.dispatch;this.props.getLocked(r)||n((0,f.click)(r,[]))}},{key:"getRowIndex",value:function(e,t){var r=O(e.slice(2).split("__"),1)[0];if(r===t)return-1;var n=t.split(r)[1].slice(1);return Number(n)}},{key:"componentDidMount",value:function(){var e,t=this,r=this.props.model,n=r.getMetaProperty("sourceCtrl"),o=r.meta.get("items",new u.List).getIn([0,"items"]);o&&o.map((function(o){var i=o.get("id");e||(e=t.getRowIndex(i,n)),(0,y.setPageData)(r.pageId,["flexibleRowInfo",i],e)}))}},{key:"render",value:function(){var e=this,t=this.props,r=t.model,n=t.dispatch,o=Object.assign({},(0,s.getCommonStyle)(r),this.props.style),i=r.getDataProperty("bgImg");i&&(i=(0,s.getImgFullPath)(r.getFormConfig().fileserver,i),o=Object.assign({},o,{backgroundImage:"url(".concat(i,")")}));var l=(0,s.getCommonClass)(r),f=r.getMetaLocaleProperty("text"),d=r.getMetaProperty("sourceCtrl"),y=r.getMetaProperty("isGridCell"),m={};!0===y&&(m=r.getMetaProperty("flexInfo").toJS());var g=r.getMetaProperty("collapsible"),h=r.getMetaProperty("defaultcollapse"),v=r.getMetaProperty("clickable"),O=(0,c.getGlobalState)(),w=r.meta.get("items",new u.List),S=(0,s.parseSubComponents)(w,r.pageId,O),P=w.getIn([0,"items"]);return 0===w.size||0===P.size?null:a.default.createElement(p.default,b({id:r.key,pageId:r.pageId,sourceCtrl:d,isGridCell:y,flexInfo:m,dispatch:n,handleClick:function(t){return v&&e.handleClick(t)},tryCloseFlexible:this.tryCloseFlexible,closeFlexible:this.closeFlexible,clickCloseFlexible:this.clickCloseFlexible,style:o},l,{Collapsible:g,defaultCollapse:h,Name:f}),S,a.default.Children.toArray((0,s.parseSubForms)(r.pageId,r.meta.get("id"),O)))}}])&&S(r.prototype,n),o&&S(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(a.Component),i.contextTypes={store:l.default.object},o=i))||o)||o;t.default=T},509524:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(743924),r(205960),r(846428),r(336368),r(708896),r(606200),r(534440),r(670864),r(880920),r(387912),r(836887),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(9692),r(835164),r(976896),r(297336);var o,i,a,l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=w(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(795520)),u=O(r(369396)),c=O(r(540900)),s=r(891052),f=r(211152),d=r(439532),p=O(r(969856)),y=r(970160),m=O(r(348896)),g=O(r(385384)),h=O(r(182956)),v=O(r(149236)),b=r(334916);function O(e){return e&&e.__esModule?e:{default:e}}function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(w=function(e){return e?r:t})(e)}function S(){return S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},S.apply(this,arguments)}function P(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_(n.key),n)}}function _(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function C(e,t,r){return t=E(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,k()?Reflect.construct(t,r||[],E(e).constructor):t.apply(e,r))}function k(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(k=function(){return!!e})()}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}function I(e,t){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},I(e,t)}t.default=(o=(0,m.default)(!1),(0,g.default)(i=(0,h.default)(i=o(i=(0,v.default)((a=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=C(this,t,[].concat(n))).floatMenuRef=l.default.createRef(),e}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){var e,t,r=u.default.findDOMNode(null===(e=this.floatMenuRef)||void 0===e?void 0:e.current);null!==(t=r.dataset)&&void 0!==t&&t.componentMount&&(r.dataset.componentMount=+new Date)}},{key:"onHandleItemClick",value:function(e,t){var r=this,n=this.props.model.pageId;(0,b.waitUpdateValueComplete)(n).then((function(){r.props.dispatch((0,y.menuItemClick)(r.props.model,[e,void 0===t?"":t]))}))}},{key:"_getLock",value:function(e){return this.props.getLocked(e)}},{key:"render",value:function(){var e=this,t=this.props.model,r=t.meta,n=(0,d.getCommonStyle)(t),o=r.get("top"),i=r.get("al"),a="right";1===i?(n.left=0,n.top=o,a="left"):2===i?(n.bottom=0,a="bottom"):(n.right=0,n.top=o,a="right");var u=(0,d.parseSubComponents)(t.meta.get("items",new s.List),t.pageId,(0,f.getGlobalState)()),c=+new Date;return l.default.createElement(p.default,S({ref:this.floatMenuRef,id:r.get("id")},this.props.attachData,{style:n,top:o,"data-component-mount":c,"data-floatmenu-direction":a}),u.map((function(t,r){return l.default.cloneElement(t,{onHandleItemClick:e.onHandleItemClick.bind(e)})})))}}])&&P(r.prototype,n),o&&P(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(l.Component),a.contextTypes={store:c.default.object},i=a))||i)||i)||i)||i)},778188:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(743924),r(205960),r(846428),r(336368),r(708896),r(606200),r(534440),r(670864),r(880920),r(387912),r(836887),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(297336);var o,i,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=m(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(795520)),l=r(439532),u=r(969856),c=y(r(348896)),s=y(r(385384)),f=y(r(182956)),d=r(970160),p=r(334916);function y(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},g.apply(this,arguments)}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,v(n.key),n)}}function v(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function b(e,t,r){return t=w(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,O()?Reflect.construct(t,r||[],w(e).constructor):t.apply(e,r))}function O(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(O=function(){return!!e})()}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function S(e,t){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},S(e,t)}t.default=(o=(0,c.default)(!1),(0,s.default)(i=(0,f.default)(i=o(i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),b(this,t,arguments)}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(t,e),r=t,(n=[{key:"onHandleItemClick",value:function(e,t){var r=this,n=this.props,o=n.onHandleItemClick,i=n.dispatch,a=n.model.pageId;(0,p.waitUpdateValueComplete)(a).then((function(){o?o(e,t):i((0,d.menuItemClick)(r.props.model,[e,void 0===t?"":t]))}))}},{key:"_getLock",value:function(e){return this.props.getLocked(e)}},{key:"render",value:function(){var e=this.props.model,t=e.getMetaLocaleProperty("text"),r=e.getMetaProperty("opk"),n=e.key,o=(0,l.getCommonStyle)(e),i=(0,l.getComponentDataProperty)(e,"fontClass","fontClass",!1),c=(0,l.getCommonClass)(e),s=c.Grow,f=c.Shrink,d=c.AlignSelf;return a.default.createElement(u.FloatMenuItem,g({id:n,Grow:s,Shrink:f,AlignSelf:d},this.props.attachData,{fontClass:i,operationKey:r,text:t,style:o,onClick:this.onHandleItemClick.bind(this,n,r)}))}}])&&h(r.prototype,n),o&&h(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(a.Component))||i)||i)||i)},858052:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(743924),r(205960),r(846428),r(336368),r(708896),r(606200),r(534440),r(670864),r(880920),r(387912),r(836887),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(835164),r(297336);var o,i,a,l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(795520)),u=m(r(540900)),c=r(891052),s=r(211152),f=r(439532),d=r(969856),p=m(r(348896)),y=m(r(385384));function m(e){return e&&e.__esModule?e:{default:e}}function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},h.apply(this,arguments)}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,b(n.key),n)}}function b(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function O(e,t,r){return t=S(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,w()?Reflect.construct(t,r||[],S(e).constructor):t.apply(e,r))}function w(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(w=function(){return!!e})()}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}function P(e,t){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},P(e,t)}t.default=(o=(0,p.default)(!1),(0,y.default)(i=o((a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),O(this,t,arguments)}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)}(t,e),r=t,(n=[{key:"onHandleItemClick",value:function(e,t){var r=this.props.onHandleItemClick;r&&r(e,t)}},{key:"render",value:function(){var e=this,t=this.props.model,r=(0,f.getCommonStyle)(t),n=(0,f.parseSubComponents)(t.meta.get("items",new c.List),t.pageId,(0,s.getGlobalState)());return l.default.createElement(d.FloatMenuPanel,h({id:t.meta.get("id"),style:r},this.props.attachData),n.map((function(t,r){return l.default.cloneElement(t,{onHandleItemClick:e.onHandleItemClick.bind(e)})})))}}])&&v(r.prototype,n),o&&v(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(l.Component),a.contextTypes={store:u.default.object},i=a))||i)||i)},548012:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(622676),r(233696),r(743924),r(205960),r(846428),r(336368),r(708896),r(969e3),r(606200),r(534440),r(76152),r(670864),r(76124),r(880920),r(387912),r(836887),r(78504),r(776512),r(997308),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(297336),r(721300);var o,i,a,l=E(r(795520)),u=r(891052),c=r(439532),s=E(r(348896)),f=r(389120),d=r(704424),p=E(r(655240)),y=E(r(385384)),m=E(r(371320)),g=E(r(182956)),h=E(r(696428)),v=r(633793),b=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=k(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(728277)),O=E(r(837428)),w=E(r(927576)),S=r(510372),P=r(463108),_=r(334916),C=r(558848);function k(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(k=function(e){return e?r:t})(e)}function E(e){return e&&e.__esModule?e:{default:e}}function I(){return I=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},I.apply(this,arguments)}function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(e,t,r){return(t=L(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,L(n.key),n)}}function L(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function R(e,t,r){return t=x(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return N(e)}(e,A()?Reflect.construct(t,r||[],x(e).constructor):t.apply(e,r))}function A(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(A=function(){return!!e})()}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(e,t){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},F(e,t)}var B=(o=(0,s.default)(!1),i=(0,m.default)(),(0,y.default)(a=(0,g.default)(a=o(a=(0,w.default)(a=i(a=(0,O.default)(a=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=R(this,t,[e])).handleMouseDown=function(e){},r.handleClick=function(e){var t=r.props,n=t.model,o=t.beforeAction,i=t.onClick,a=r._getLock(n),l=(0,c.getComponentDataProperty)(n,"clickable","clickable",!1),u=n.getMetaProperty("type");if(!a&&!1!==l){e.stopPropagation();var s=n.pageId,d=n.key,p=o&&o(e,{controlType:u,controlKey:d})||(0,_.waitUpdateValueComplete)(s),y=e&&e.nativeEvent;p.then((function(){i&&i(y),(0,v.interceptActionFn)(D(D({},r.props),{},{click:function(){return r.props.dispatch(f.click.apply(void 0,arguments))}}),b.default)}))}},r.updateTipsConfig=r.updateTipsConfig.bind(N(r)),r.forAutoTestActions={click:f.click},r.state={tipsConfig:null},r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F(e,t)}(t,e),r=t,n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.model,r=e.isFromCardRow,n=e.data,o=e.option,i=(0,C.getRowPropertyTips)({model:t,isFromCardRow:r,data:n,option:o});i&&this.updateTipsConfig(t.pageId,t.key,i)}},{key:"componentWillReceiveProps",value:function(e){var t,r,n=this.props,o=n.model,i=n.isFromCardRow,a=n.data,l=n.option,c=(0,C.getRowPropertyTips)({model:o,isFromCardRow:i,data:a,option:l}),s=(0,C.getRowPropertyTips)({model:e.model,isFromCardRow:e.isFromCardRow,data:e.data,option:e.option});(0,u.is)(c,s)||this.updateTipsConfig(null===(t=e.model)||void 0===t?void 0:t.pageId,null===(r=e.model)||void 0===r?void 0:r.key,s)}},{key:"updateTipsConfig",value:function(e,t,r){if(r){var n=this.state.tipsConfig;n||(n=(0,C.createTipsConfig)(e,t),this.setState({tipsConfig:n})),(0,C.saveTipsInfo)(n,r)}else this.setState({tipsConfig:null})}},{key:"_getLock",value:function(e){return this.props.getCardLocked?this.props.getCardLocked(e):this.props.getLocked(e)}},{key:"_getVisible",value:function(e){return this.props.getCardVisible?this.props.getCardVisible(e):this.props.getVisible(e)}},{key:"render",value:function(){var e,t=this.props,r=t.model,n=t.loading,o=t.isFromCardRow,i=t.dispatch,a=t.data,u=t.option,s=this.state.tipsConfig;if(!this._getVisible(r))return null;var f=(0,b.getRowIndex)(this.props),y=this._getLock(r),m=(0,c.getCommonStyle)(r),g=(0,c.getCommonClass)(r),v=g.Grow,O=g.Shrink,w=g.AlignSelf,_=(0,c.getComponentDataProperty)(r,"fontClass","fontClass",!1)||"kdfont kdfont-tianjia",C=(0,c.getComponentDataProperty)(r,"needHoverClass","needHoverClass",!1),k=(0,c.getComponentDataProperty)(r,"hoverClass","hoverClass",!1),E=(0,c.getComponentDataProperty)(r,"clickable","clickable",!1),T=r&&"themeColor"===r.getMetaProperty("fc"),D=(0,c.getComponentDataProperty)(r,"title","title",!1),j=r.getMetaProperty("opk"),M=null===(e=(0,P.getkeyCodeInfoByOpk)(j))||void 0===e?void 0:e.name,L=o&&(0,S.getControlRowProperty)({data:a,model:r,option:u});L&&(void 0!==L.get("fontClass")&&(_=L.get("fontClass")),void 0!==L.get("title")&&(D=L.get("title")),m=(0,S.mergeCustomStyle)(m,L));var R,A=n&&n.showLoading,x=n&&n.rowKey,N=!(R=o?A&&"undefined"!==x&&f===x:A)&&s?l.default.createElement(h.default,{tips:s}):null;return l.default.createElement(p.default,I({model:r,isThemeColor:T,fontClass:_,needHoverClass:!1!==C,hoverClass:k,onMouseDown:this.handleMouseDown,handleClick:this.handleClick,clickable:E,locked:y,title:D,Grow:v,Shrink:O,AlignSelf:w,style:m,dispatch:i,showFormByTips:function(){return i(d.showFormByTips.apply(void 0,arguments))},userLocal:r.getUserLocale(),slot:N,showLoading:R,opk:j,shortCutTips:M,id:r.key},this.props.attachData))}}],n&&M(r.prototype,n),o&&M(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(l.default.Component))||a)||a)||a)||a)||a)||a);t.default=B},192904:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(622676),r(743924),r(205960),r(846428),r(708896),r(969e3),r(606200),r(534440),r(76152),r(670864),r(880920),r(836887),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(305092),r(613468),r(233696),r(927184),r(297336),r(336368),r(76124),r(387912),r(997308);var o,i,a=O(r(795520)),l=O(r(211152)),u=r(439532),c=r(218652),s=v(r(832944)),f=v(r(348896)),d=v(r(385384)),p=r(230816),y=r(891052),m=v(r(882976)),g=v(r(149236)),h=r(142408);function v(e){return e&&e.__esModule?e:{default:e}}function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(b=function(e){return e?r:t})(e)}function O(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=b(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},w.apply(this,arguments)}function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e,t,r){return(t=k(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,k(n.key),n)}}function k(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function E(e,t,r){return t=T(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return D(e)}(e,I()?Reflect.construct(t,r||[],T(e).constructor):t.apply(e,r))}function I(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(I=function(){return!!e})()}function T(e){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},T(e)}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e,t){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},j(e,t)}var M=(o=(0,f.default)(!0,!0),(0,d.default)(i=o(i=(0,g.default)(i=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=E(this,t,[e])).onSetAsDefault=function(e){var t=r.props,n=t.model;(0,t.dispatch)((0,p.setDefault)(n,e))},r.onDeleteScheme=function(e){var t=r.props,n=t.model;(0,t.dispatch)((0,p.deleteScheme)(n,e))},r.onSchemeSelect=function(e){var t=r.props,n=t.model;(0,t.dispatch)((0,p.switchScheme)(n,e))},r.onEdit=function(){var e=r.props,t=e.model;(0,e.dispatch)((0,p.edit)(t))},r.onSave=function(){var e=r.props,t=e.model;(0,e.dispatch)((0,p.save)(t,r.state.layout))},r.onRefresh=function(){var e=r.props,t=e.model;(0,e.dispatch)((0,p.refresh)(t))},r.onSaveAs=function(e){var t=r.props,n=t.model;(0,t.dispatch)((0,p.saveAs)(n,r.state.layout,e))},r.onLayoutChange=r.onLayoutChange.bind(D(r)),r.onItemDeleteClick=r.onItemDeleteClick.bind(D(r)),r.onBarAddCardClick=r.onBarAddCardClick.bind(D(r)),r.onBarCancelEdit=r.onBarCancelEdit.bind(D(r)),r.onBarEditEnd=r.onBarEditEnd.bind(D(r)),r.refreshForm=r.refreshForm.bind(D(r)),r.cardRefresh=r.cardRefresh.bind(D(r)),r.state={layout:""},r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j(e,t)}(t,e),r=t,n=[{key:"onLayoutChange",value:function(e){var t,r=this.getLayout();r=JSON.parse(r),e.forEach((function(e){(t=r.find((function(t){return t.i==e.i})))&&void 0!==t.formId&&(e.formId=t.formId)})),this.updateLayout(e)}},{key:"onItemDeleteClick",value:function(e){var t=this.props,r=t.model;(0,t.dispatch)((0,p.deleteCard)(r,e))}},{key:"onBarAddCardClick",value:function(){var e=this.props,t=e.model;(0,e.dispatch)((0,p.addCard)(t,this.state.layout))}},{key:"onBarCancelEdit",value:function(){var e=this.props,t=e.model;(0,e.dispatch)((0,p.editCancel)(t,[]))}},{key:"onBarEditEnd",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.props,r=t.model;(0,t.dispatch)((0,p.editEnd)(r,this.state.layout,e))}},{key:"updateLayout",value:function(e){e=JSON.stringify(e);var t=this.props.model,r=t.pageId,n=t.key;!0===(0,u.getComponentDataProperty)(t,"canEdit","canEdit",!1)?(this.setState({layout:e}),this.props.dispatch((0,c.convertAppModelFunctionAction)((0,c.batchActions)((0,c.setControlPostValue)(r,n,{layout:e}))))):this.props.dispatch((0,c.convertAppModelFunctionAction)((0,c.batchActions)((0,c.setControlPostValue)(r,n,{layout:e}),(0,c.setDataProperty)(r,n,"layout",e))))}},{key:"getLayout",value:function(){var e=this.props.model;return(0,u.getComponentDataProperty)(e,"layout","layout",!1)||"[]"}},{key:"addCard",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[]",t=arguments.length>1?arguments[1]:void 0,r=JSON.parse(e);return t.forEach((function(e){var t=e.formId,n=e.cardId,o=e.config;if(null==n||""==n)m.default.warn("add card fail, card Id is valid: ".concat(n));else{var i=r.findIndex((function(e){return e.i==n}));i>-1?m.default.warn("add card fail, card Id already exists: ".concat(n)):r.push({x:o.x,y:o.y,w:o.w,h:o.h,i:n,formId:t})}})),JSON.stringify(r)}},{key:"deleteCard",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"[]",t=arguments.length>1?arguments[1]:void 0,r=JSON.parse(e),n=r.findIndex((function(e){return e.i===t}));return n>-1?r.splice(n,1):m.default.warn("delate card fail, card Id not be found: ".concat(t," ")),JSON.stringify(r)}},{key:"refreshForm",value:function(e){if(e&&this.cardRefresh(e)){var t=[h.CUSTOM_EVENT_REFRESH_FROMGRID_CONTAINER,"",JSON.stringify({pageId:e})];l.default[l.INVOKE_CUSTOM_EVENT](e,"",t)}else m.default.warn("refresh Form cancel, pageId: ".concat(e))}},{key:"cardRefresh",value:function(e){if(e){var t=(0,c.getFormConfig)(e)(this.props.model.state),r=t&&t.openStyle;if(r&&("false"===r.cardRefresh||!1===r.cardRefresh))return!1}return!0}},{key:"componentWillReceiveProps",value:function(e){var t=this,r=e.model.getDataProperty("canEdit"),n=this.props.model.getDataProperty("canEdit");void 0!==r&&r!==n&&this.setState({layout:!0===r?this.getLayout():"[]"});var o=e.model.getDataProperty("newCard"),i=this.props.model.getDataProperty("newCard");if(!0===r&&void 0!==o&&o!==i){var a=this.addCard(this.state.layout,o.toJS());this.setState({layout:a})}var l=e.model.getDataProperty("deleteCard"),u=this.props.model.getDataProperty("deleteCard");if(!0===r&&void 0!==l&&l!==u){var s=this.deleteCard(this.state.layout,l);this.setState({layout:s},(function(){t.props.dispatch((0,c.convertAppModelFunctionAction)((0,c.setDataProperty)(e.model.pageId,e.model.key,"deleteCard","")))}))}var f=e.model.getDataProperty("refreshId"),d=this.props.model.getDataProperty("refreshId");void 0!==f&&f!==d&&this.refreshForm(e.model.pageId)}},{key:"shouldComponentUpdate",value:function(e,t){return!(0,y.is)(t,this.state)||!(0,y.is)(e.model.componentData,this.props.model.componentData)||!(0,y.is)(e.model.meta,this.props.model.meta)}},{key:"render",value:function(){var e,t,r,n={onSetAsDefault:this.onSetAsDefault,onDeleteScheme:this.onDeleteScheme,onSchemeSelect:this.onSchemeSelect,onBarAddCardClick:this.onBarAddCardClick,onEdit:this.onEdit,onSave:this.onSave,onRefresh:this.onRefresh,onSaveAs:this.onSaveAs,onBarCancelEdit:this.onBarCancelEdit},o=this.props.model,i=Object.assign({},(0,u.getCommonStyle)(o),this.props.style),f=(0,u.getCommonClass)(o),d=f.Grow,p=f.Shrink,y=f.AlignSelf,m=null===(e=(0,u.getComponentDataProperty)(o,"portalScheme","portalScheme",!1))||void 0===e?void 0:e.toJS(),g=m?P(P({},n),m):null,h=(0,u.getComponentDataProperty)(o,"canEdit","canEdit",!1),v=!0===h?this.state.layout:this.getLayout();v=JSON.parse(v);var b=(0,u.getComponentDataProperty)(o,"cols","cols",!1),O=(0,u.getComponentDataProperty)(o,"rowHeight","rowHeight",!1),S=(0,u.getComponentDataProperty)(o,"refreshId","refreshId",!1),_=(0,u.getComponentDataProperty)(o,"setDefaultVisible","setDefaultVisible",!1),C=(0,c.getRootPageId)()(o.state),k=null===(t=(0,u.getComponentDataProperty)(o,"layoutMargin","layoutMargin",!1))||void 0===t?void 0:t.toJS(),E=null===(r=(0,u.getComponentDataProperty)(o,"containerPadding","containerPadding",!1))||void 0===r?void 0:r.toJS(),I=(0,u.getComponentDataProperty)(o,"showEditTool","showEditTool",!1),T=(0,u.getComponentDataProperty)(o,"hideSchemeEdit","hideSchemeEdit",!1),D=(0,u.getComponentDataProperty)(o,"hideSchemeSwitch","hideSchemeSwitch",!1);return a.default.createElement(s.default,w({id:o.key,pageId:o.pageId,state:(0,l.getGlobalState)(),style:i,Grow:d,Shrink:p,AlignSelf:y,canEdit:h,layout:v,cols:b,rowHeight:O,setDefaultVisible:_,onLayoutChange:this.onLayoutChange,onItemDeleteClick:this.onItemDeleteClick,onBarAddCardClick:this.onBarAddCardClick,onBarCancelEdit:this.onBarCancelEdit,onBarEditEnd:this.onBarEditEnd,refreshForm:this.refreshForm,refreshId:S,rootPageId:C,layoutMargin:k,containerPadding:E,homePageSchemeData:g,showEditTool:I,hideSchemeEdit:T,hideSchemeSwitch:D},this.props.attachData))}}],n&&C(r.prototype,n),o&&C(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(a.Component))||i)||i)||i);t.default=M},691704:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(505684),r(743924),r(693917),r(205960),r(297336),r(721300),r(846428),r(336368),r(708896),r(969e3),r(606200),r(534440),r(76152),r(670864),r(76124),r(880920),r(836887),r(633768),r(690512),r(78504),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(9692),r(622676),r(305092),r(613468),r(233696),r(443616),r(241872),r(323784),r(835164),r(803372),r(976896),r(387912),r(660824),r(997308),r(86744);var o,i,a,l=C(r(795520)),u=C(r(540900)),c=r(891052),s=r(211152),f=r(195752),d=r(714496),p=r(439532),y=C(r(348896)),m=r(218652),g=C(r(385384)),h=r(756184),v=r(738704),b=r(756184),O=r(290600),w=r(881296),S=r(868256),P=r(674260),_=r(796512);function C(e){return e&&e.__esModule?e:{default:e}}function k(){return k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},k.apply(this,arguments)}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e,t,r){return(t=L(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function M(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,L(n.key),n)}}function L(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function R(e,t,r){return t=x(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,A()?Reflect.construct(t,r||[],x(e).constructor):t.apply(e,r))}function A(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(A=function(){return!!e})()}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}function N(e,t){return N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},N(e,t)}var F=(o=(0,y.default)(!1),(0,g.default)(i=o((a=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=R(this,t,[e])).reNameVirtualTab=function(e){var t=e.appId,n=e.pageId,o=e.tabName,i=r.state.virtualTabData;if(t&&n&&i.size){var a=i.findIndex((function(e){return e.get("appId")===t}));-1!==a&&(i=i.update(a,(function(e){return e.update("tabs",(function(e){var t=e.findIndex((function(e){return e.get("pageId")===n}));return-1===t?e:e.update(t,(function(e){return e.set("tabName",o)}))}))})),r.setState({virtualTabData:i}))}},r.handleReNameVirtualTab=function(e){if(e)if(Array.isArray(e))for(var t=0;t<e.length;t++)r.reNameVirtualTab(e[t]);else r.reNameVirtualTab(e)},r.cancelInsightFixMode=function(e){var t;null!==(t=(0,P.getData)(S.KEY_FIX_INSIGHT_PANEL))&&void 0!==t&&t.isFixationMode&&e&&(0,P.setData)(S.KEY_FIX_INSIGHT_PANEL,{isFixationMode:!1,pageId:e})},r.activeTabHomePage=function(e){if(e){var t=e[0],n=t.appId,o=t.pageId;if(!n)return;r.prevVirtualTab=o;var i=r.state.virtualTabData;i.size&&(i=i.map((function(e){return e.get("appId")===n?e.update("tabs",(function(e){return e.map((function(e){return e.update("isActive",(function(){return!1}))}))})):e})),r.setState({virtualTabData:i}))}},r.handleActiveTab=function(e){var t;if(null!=e&&e.length){r.timer&&clearTimeout(r.timer);var n=e[0],o=n.pageId,i=n.appId,a=null===(t=r.appItems)||void 0===t?void 0:t.find((function(e){return e.pageId===o}));if(a)r.timer=setTimeout((function(){r.activeTabHomePage([a])}),0);else if(i)r.setActiveVirtualTab(e);else{var l,u,c=null===(l=r.activeApp)||void 0===l?void 0:l.appId,s=null===(u=r.state.virtualTabData.find((function(e){return e.get("appId")===c})))||void 0===u?void 0:u.get("tabs");(null==s?void 0:s.size)&&s.find((function(e){return e.get("pageId")===o}))&&r.setActiveVirtualTab([{pageId:o,appId:c}])}}},r.handeleCloseAppTab=function(e){if(e){var t=null==e?void 0:e.appId;if(t){var n=r.state.virtualTabData;n.size&&(n=n.filterNot((function(e){return e.get("appId")===t})),r.setState({virtualTabData:n}))}}},r.handleReleasePage=function(e){setTimeout((function(){var t,n,o=r.state.virtualTabData;if(o.size&&null!==(t=r.activeApp)&&void 0!==t&&t.appId){var i=null===(n=o.find((function(e){return e.get("appId")===r.activeApp.appId})))||void 0===n?void 0:n.get("tabs");(null==i?void 0:i.find((function(t){return t.get("pageId")===e})))&&r.delVirtualTab([{appId:r.activeApp.appId,pageId:e}])}}),0)},r.handleModifyVirtualTab=function(e){if(e){var t=r.state.virtualTabData,n=e.prePageId,o=e.pageId,i=e.tabName,a=e.appId;t.size&&(t=t.map((function(e){return e.get("appId")===a?e.update("tabs",(function(e){return e.map((function(e){return e.get("pageId")===n?(r.prevVirtualTab=o,e.merge({pageId:o,tabName:i})):e}))})):e})),r.setState({virtualTabData:t}))}},r.clickFix=function(e){r.props.dispatch((0,h.clickFix)(r.props.model,e))},r.selectTab=function(e){var t=r.props.model,n=t.pageId;e.tabPageId=n;var o=t.getMetaProperty("tabid");(0,v.publishControlMethod)(n,o,"clickTab",e)},r.closeVirtualTab=function(e){var t,n="",o=r.state.virtualTabData;if(r.prevVirtualTab!==(null===(t=r.activeApp)||void 0===t?void 0:t.pageId)&&o.size){var i,a,l=null===(i=o.find((function(e){return e.get("appId")===r.activeApp.appId})))||void 0===i?void 0:i.get("tabs"),u=r.getNextActiveTabIndex(l,e);if(-1!==u)n=null===(a=l.get(u))||void 0===a?void 0:a.get("pageId")}else{var c,s=null===(c=o.find((function(e){return e.get("appId")===r.activeApp.appId})))||void 0===c||null===(c=c.get("tabs"))||void 0===c||null===(c=c.find((function(e){return e.get("isActive")})))||void 0===c?void 0:c.get("pageId");n=Array.isArray(e)&&e.find((function(e){return e.pageId===s}))?r.prevVirtualTab:s}var f={nextFocusTab:n,delTabs:e};r.props.dispatch((0,b.closeVirturalTab)(r.props.model,f))},r.addToCollection=function(e){r.props.dispatch((0,b.addToCollectionAction)(r.props.model,e))},r.openInNewWindow=function(e){r.props.dispatch((0,b.openInNewWindowAction)(r.props.model,e))},r.openInSystemTab=function(e){r.props.dispatch((0,b.openInSystemTabAction)(r.props.model,e))},r.selectVirtualTab=function(e){r.props.dispatch((0,b.selectVirturalTab)(r.props.model,e))},r.selectTabWorkBench=function(e){r.props.dispatch((0,b.selectTabHomePage)(r.props.model,{pageId:e.pageId}));var t=r.props.model.meta.get("type"),n=r.props.model.meta.get("id");(0,P.setData)(S.KEY_UI_ACTION,{pageId:r.props.model.pageId,controlName:"",key:n,type:t,startTime:Date.now(),tableName:"click",methodName:"itemClick",opk:"selectTabHomePage"})},r.changeAppItems=function(e,t){var n=r.props.model;r.changeAppItemsData=[].concat(D(t),D(e));var o=r.changeAppItemsData.map((function(e){return e.pageId}));(0,s.doGlobalDispatch)((0,m.convertAppModelFunctionAction)((0,m.setAppItemSubForms)(n.pageId,n.getMetaProperty("tabid"),(0,c.fromJS)(o))))},r.changeVirtualTabData=function(e){var t=r.state.virtualTabData;if(t.size&&e.length){var n=e[0].appId;if(!n)return;var o=t.findIndex((function(e){return e.get("appId")===n}));-1!==o&&(t=t.update(o,(function(t){return t.update("tabs",(function(){return(0,c.fromJS)(e)}))})),r.setState({virtualTabData:t}))}},r.state={virtualTabData:(0,c.List)()},r.prevVirtualTab=null,r.prevAppTab={},r.changeAppItemsData=[],r.control={controlType:r.props.model.meta.get("type"),controlId:r.props.model.meta.get("id")},r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&N(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){var e=this,t=this.props.model;if("1"===t.getMetaProperty(O.HPME_PAGE_TAB_MODE)){var r=t.pageId,n=t.key;this.removeSubscribeControlMethod=(0,v.subscribeControlMethod)(r,n,"directives",(function(t){void 0!==t&&setTimeout((function(){setTimeout((function(){e.invokeControlMethods(t)}),0)}),0)})),this.removeGlobalCloseTabChangeListener=(0,P.addDataChangeListener)(S.KEY_CLOSE_TAB,this.handeleCloseAppTab),this.removeActiveTabDataChangeListener=(0,P.addDataChangeListener)(S.KEY_ACTIVE_TAB,this.handleActiveTab),this.removePageReleaseListener=(0,P.addDataChangeListener)(S.KEY_PAGE_RELEASE,this.handleReleasePage),this.removeReplacePageListener=(0,P.addDataChangeListener)(S.KEY_REPLACE_PAGE,this.handleModifyVirtualTab),this.removeReNameNewPortalTabListener=(0,P.addDataChangeListener)(S.KEY_RENAME_NEW_PORTAL_TAB,this.handleReNameVirtualTab)}}},{key:"componentWillUnmount",value:function(){var e;this.removeSubscribeControlMethod&&this.removeSubscribeControlMethod(),this.removeGlobalCloseTabChangeListener&&this.removeGlobalCloseTabChangeListener(),this.removeActiveTabDataChangeListener&&this.removeActiveTabDataChangeListener(),this.removePageReleaseListener&&this.removePageReleaseListener(),this.removeReplacePageListener&&this.removeReplacePageListener(),null===(e=this.removeReNameNewPortalTabListener)||void 0===e||e.call(this),this.timer&&clearTimeout(this.timer)}},{key:"invokeControlMethods",value:function(e){var t=this;e.forEach((function(e){var r=e.methodname,n=e.args;switch(r){case w.VIRTUALTAB_ADD_TAB:t.addVirtualTab(n);break;case w.VIRTUALTAB_DELETE_TAB:t.delVirtualTab(n);break;case w.VIRTUALTAB_ACTIVE_TAB:t.setActiveVirtualTab(n);break;case w.TAB_ACTIVE_TAB_HOME_PAGE:t.activeTabHomePage(n);break;default:"".concat(r," is not been implemented")}}))}},{key:"getNextActiveTabIndex",value:function(e,t){var r=this,n=function(e){return t.find((function(t){return t.pageId===e.get("pageId")}))},o=e.findIndex((function(e){return e.get("isActive")&&!n(e)}));if(-1===o&&-1===(o=e.findIndex((function(e){return e.get("pageId")===r.prevVirtualTab&&!n(e)})))){var i=e.findIndex((function(e){var r;return e.get("pageId")===(null===(r=t[t.length-1])||void 0===r?void 0:r.pageId)}));if(-1!==i&&i!==e.size-1)o=i+1;else{var a=e.filterNot((function(e){return n(e)}));if(a.size){var l=a.get(a.size-1);o=e.findIndex((function(e){return e.get("pageId")===l.get("pageId")}))}}}return o}},{key:"addVirtualTab",value:function(e){var t=this;if(e){this.timer&&clearTimeout(this.timer);var r=this.state.virtualTabData;e[0].isActive=!0;var n=e[0],o=n.appId,i=n.pageId;if(!o)return;if(r.size){var a=r.findIndex((function(e){return e.get("appId")===o}));r=-1!==a?r.update(a,(function(r){return r.update("tabs",(function(r){return r.find((function(e){return e.get("pageId")===i}))?r:r.map((function(e){return e.get("isActive")&&(t.prevVirtualTab=e.get("pageId")),e.update("isActive",(function(){return!1}))})).concat((0,c.fromJS)(e))}))})):r.concat((0,c.fromJS)([{appId:o,tabs:e}])),this.setState({virtualTabData:r})}else this.setState({virtualTabData:(0,c.fromJS)([{appId:o,tabs:e}])})}}},{key:"delVirtualTab",value:function(e){var t=this;if(e){var r=this.state.virtualTabData,n=e;if((null==n?void 0:n.length)<1||r.size<0)return;if(r.size){var o=n[0].appId;r=r.map((function(e){return e.get("appId")===o?e.update("tabs",(function(e){var r,o=e;if(t.prevVirtualTab!==(null===(r=t.activeApp)||void 0===r?void 0:r.pageId)){var i=t.getNextActiveTabIndex(e,n);-1!==i&&(o=e.update(i,(function(e){return e.set("isActive",!0)})))}return o.filterNot((function(e){return function(e){return n.find((function(t){return t.pageId===e.get("pageId")}))}(e)}))})):e})),this.setState({virtualTabData:r})}}}},{key:"setActiveVirtualTab",value:function(e){var t=this;if(e){var r,n=e[0],o=n.appId,i=n.pageId;if(this.cancelInsightFixMode(i),!o)return;var a=this.state.virtualTabData;if(!a.size)return;var l=null===(r=a.find((function(e){return e.get("appId")===o})))||void 0===r||null===(r=r.get("tabs"))||void 0===r?void 0:r.find((function(e){return e.get("isActive")}));if((null==l?void 0:l.get("pageId"))===i)return;a=a.map((function(e){return e.get("appId")===o?e.update("tabs",(function(e){return e.map((function(e){return e.get("isActive")&&(t.prevVirtualTab=e.get("pageId")),e.update("isActive",(function(){return e.get("pageId")===i}))}))})):e})),this.setState({virtualTabData:a})}}},{key:"render",value:function(){var e=this,t=this.props.model,r=(t.key,t.pageId),n=(0,s.getGlobalState)(),o=(0,p.getCommonStyle)(t),i=t.getUserLocale(),a=t.getMetaProperty("tabid"),u=t.getMetaProperty("homeTabKey"),y=t.getMetaProperty(O.HPME_PAGE_TAB_MODE),g=(0,p.getComponentDataProperty)(t,"tabCanFixed","tabCanFixed",!1)||!1,h=new c.List,v=[],b=[];if(a){var w=n.getIn(["forms",r,"data",a,"currentTab"],0),S=(0,p.getMetaFromStateById)(a,r,(0,s.getGlobalState)());if(S){var P=S.get("items")||(0,c.List)();P=P.filter((function(e){var r=e.get("id");return(0,p.getVisible)(t,r)})),h=P.map((function(e,t){var n=!1,o=e.get("id");(0==w&&0==t||w==o)&&(n=!0);var l=(0,_.getValueOfLanguage)(e.get("text"),i);return(0,c.Map)({tabId:a,key:o,pageId:r,title:l,isActive:n,isHome:0===t,isStatic:!0,isHomeTab:u===o})})),v=h.filter((function(e){return!e.get("isHomeTab")})).toJS();var C=n.getIn(["forms",r,"data",a,"subForms"]);if(C){var E=t.getDataProperty("fixedState")||new c.List,T=new c.List,D=new c.List,j=C.map((function(t,r){var o=(0,m.getFormCaption)(t)(n),i=(0,m.getAppImageUrl)(t)(n),l=(0,m.getBizAppId)(t)(n),u=!1;return(0==w&&0==h.size&&0==r||w==t)&&(u=!0),(0,c.Map)({tabId:a,key:t,appId:l,pageId:t,title:o,isActive:u,canDelete:!0,canFixed:!0,isFixed:E.indexOf(t)>-1?1:0,clickFix:e.clickFix,index:r,appImageUrl:i})}));E.size>0?(E.map((function(e){j.map((function(t){e===t.get("pageId")&&(T=T.push(t))}))})),D=j.filter((function(e){return!T.includes(e)}))):D=j,this.appItems=b=(0,c.List)().concat(D,T).toJS(),h=h.concat(T,D)}}-1==w&&(h=h.updateIn([h.size-1,"isActive"],(function(e){return!0})))}var M=(0,c.List)();if("1"===y){var L,R=h.find((function(e){return e.get("isActive")&&!e.get("isStatic")}));if(R)this.prevAppTab=this.activeApp=I(I({},R.toJS()),{},{active:!0});else if(this.appItems){var A=this.appItems.find((function(t){return t.pageId===e.prevAppTab.pageId}));this.activeApp=I(I({},A?this.prevAppTab:this.appItems[0]),{},{active:!1})}var x,N=(0,m.getBizAppId)(null===(L=this.activeApp)||void 0===L?void 0:L.pageId)((0,s.getGlobalState)())||"bos",F=this.state.virtualTabData;F.size&&(M=(null===(x=F.find((function(e){return e.get("appId")===N})))||void 0===x?void 0:x.get("tabs"))||(0,c.List)()),M=M.toJS(),this.changeAppItemsData.length&&(b=this.changeAppItemsData,this.changeAppItemsData=[])}return c.List.isList(h)&&(h=h.toJS()),"1"!==y?l.default.createElement(f.HomePageTab,k({items:h,style:o,pageId:r,tabCanFixed:g},this.props.attachData,{selectTab:this.selectTab})):l.default.createElement(d.HomePageVirtualTab,k({staticItems:v,appItems:b,control:this.control,style:o,pageId:r},this.props.attachData,{selectTab:this.selectTab,closeVirtualTab:this.closeVirtualTab,selectVirtualTab:this.selectVirtualTab,activeApp:this.activeApp,virtualTabs:M,selectTabWorkBench:this.selectTabWorkBench,addToCollection:this.addToCollection,openInNewWindow:this.openInNewWindow,openInSystemTab:this.openInSystemTab,changeAppItems:this.changeAppItems,changeVirtualTabData:this.changeVirtualTabData}))}}])&&M(r.prototype,n),o&&M(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(l.default.Component),a.contextTypes={store:u.default.object},i=a))||i)||i);t.default=F},1412:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(743924),r(205960),r(297336),r(846428),r(336368),r(708896),r(606200),r(670864),r(880920),r(387912),r(836887),r(78504),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,i,a=v(r(795520)),l=v(r(671252)),u=v(r(290296)),c=v(r(354420)),s=r(439532),f=v(r(329132)),d=r(589200),p=v(r(348896)),y=v(r(385384)),m=v(r(149236)),g=r(290600),h=r(984844);function v(e){return e&&e.__esModule?e:{default:e}}function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},b.apply(this,arguments)}function O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,w(n.key),n)}}function w(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function S(e,t,r){return t=_(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,P()?Reflect.construct(t,r||[],_(e).constructor):t.apply(e,r))}function P(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(P=function(){return!!e})()}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}function C(e,t){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},C(e,t)}var k=(o=(0,p.default)(!1),(0,y.default)(i=o(i=(0,m.default)(i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),S(this,t,arguments)}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this.props.model,t=e.pageId,r=(0,s.getCommonStyle)(e),n=(0,s.getCommonClass)(e),o=n.Grow,i=n.Shrink,p=(0,s.getComponentDataProperty)(e,"url","url",!1),y=(0,s.getComponentDataProperty)(e,"value","value",!1);p&&(p=(0,d.getClientUrl)(p));var m=(0,l.default)(function(e,t,r){return(t=w(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},u.default.root,!0),(0,f.default)({Grow:o,Shrink:i})),v=(0,s.getComponentDataProperty)(e,"disabledPointer","disabledPointer",!1),O=(0,s.getComponentDataProperty)(e,"allowfullscreen","allowfullscreen",!1),S=(0,s.getComponentDataProperty)(e,"noLoading","noLoading",!1),P=(0,s.getComponentDataProperty)(e,g.DISABLE_ADD_PAGE_ID,g.DISABLE_ADD_PAGE_ID,!1),_=(0,s.getComponentDataProperty)(e,g.INNER_PAGE_FLAG,g.INNER_PAGE_FLAG,!1),C=p||y,k=C,E=void 0===_?(0,d.isOurPage)(C):_;return P||(k=(0,d.setUrlParam)(C,E?"sourcePageId":"pageId",t)),k=(0,h.appendParamsToUrl)((0,s.setAccountId)(k),{model:e},{pageId:P||E}),a.default.createElement("div",b({className:m,style:r,id:e.key},this.props.attachData),a.default.createElement(c.default,{src:k,frameBorder:0,scrolling:"auto",allowtransparency:"true",disabledPointer:v,allowfullscreen:O,noLoading:S}))}}])&&O(r.prototype,n),o&&O(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(a.default.Component))||i)||i)||i);t.default=k},135480:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(743924),r(205960),r(846428),r(336368),r(708896),r(606200),r(670864),r(880920),r(836887),r(78504),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(9692),r(233696),r(297336),r(387912);var o,i,a,l=g(r(795520)),u=g(r(747224)),c=g(r(562507)),s=r(439532),f=r(389120),d=g(r(248376)),p=r(290600),y=g(r(348896)),m=g(r(385384));function g(e){return e&&e.__esModule?e:{default:e}}function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},h.apply(this,arguments)}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,b(n.key),n)}}function b(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function O(e,t,r){return t=S(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return P(e)}(e,w()?Reflect.construct(t,r||[],S(e).constructor):t.apply(e,r))}function w(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(w=function(){return!!e})()}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_(e,t)}var C=(o=(0,y.default)(!1),i=(0,u.default)(c.default),(0,m.default)(a=o(a=i(a=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=O(this,t,[e])).state={isSelected:!1},["handleClick"].forEach((function(e){return r[e]=r[e].bind(P(r))})),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}(t,e),r=t,(n=[{key:"handleClick",value:function(e){e.stopPropagation(),(0,s.getLocked)(this.props.model)||(this.setState({isSelected:!this.state.isSelected}),this.props.dispatch((0,f.click)(this.props.model)))}},{key:"componentWillMount",value:function(){var e=this.props.model.getFormConfig();this._fileServer=e.fileserver}},{key:"render",value:function(){var e=this.props.model,t=(0,s.getCommonStyle)(e),r=(0,s.getCommonClass)(e),n=r.Grow,o=r.Shrink,i=r.AlignSelf,a=void 0!==e.getMetaProperty("imageZoom");if(!(0,s.getVisible)(e))return null;var u=(0,s.getComponentDataProperty)(e,"imageKey",p.IMAGE_KEY,!1),c=(0,s.getComponentDataProperty)(e,"bc","bc",!1),f=(0,s.getComponentDataProperty)(e,"text","text",!0);return u=(0,s.getImgFullPath)(this._fileServer,u),l.default.createElement(d.default,h({dataPageId:"".concat(this.props.model.pageId,"_").concat(this.props.model.key),imageZoom:a,clickable:!0,src:u,bgColor:c,name:f,isSelected:this.state.isSelected,onClick:this.handleClick,Grow:n,Shrink:o,AlignSelf:i,style:t},this.props.attachData))}}])&&v(r.prototype,n),o&&v(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(l.default.Component))||a)||a)||a);t.default=C},744732:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(622676),r(233696),r(743924),r(205960),r(846428),r(336368),r(708896),r(969e3),r(606200),r(534440),r(76152),r(670864),r(76124),r(880920),r(387912),r(836887),r(78504),r(776512),r(997308),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(297336),r(321164);var o,i,a=D(r(795520)),l=r(891052),u=r(899760),c=r(704424),s=I(r(369396)),f=I(r(99696)),d=r(439532),p=r(290600),y=I(r(348896)),m=I(r(385384)),g=I(r(182956)),h=I(r(696428)),v=r(633793),b=D(r(728277)),O=I(r(927576)),w=I(r(625924)),S=r(886212),P=r(510372),_=r(334916),C=r(558848),k=r(331428),E=r(984844);function I(e){return e&&e.__esModule?e:{default:e}}function T(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(T=function(e){return e?r:t})(e)}function D(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=T(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}function j(){return j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},j.apply(this,arguments)}function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach((function(t){R(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function R(e,t,r){return(t=x(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,x(n.key),n)}}function x(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function N(e,t,r){return t=B(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return V(e)}(e,F()?Reflect.construct(t,r||[],B(e).constructor):t.apply(e,r))}function F(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(F=function(){return!!e})()}function B(e){return B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},B(e)}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function U(e,t){return U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},U(e,t)}var W=(o=(0,y.default)(!1,!0),(0,m.default)(i=(0,g.default)(i=o(i=(0,O.default)(i=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=N(this,t,[e])).handleUpload=function(e){var t=r.props,n=t.model,o=t.dispatch,i=t.beforeAction,a=n.getMetaProperty("type"),l=n.getMetaProperty("clickable");if(!r._getLock(n)&&l){e.stopPropagation();var c=n.pageId,s=n.key,f=e;(i&&i(e,{controlType:a,controlKey:s})||(0,_.waitUpdateValueComplete)(c)).then((function(){(0,v.interceptActionFn)(L(L({evt:f},r.props),{},{click:function(){return o(u.click.apply(void 0,arguments))}}),b.default)}))}},r.canUploadImg=function(){var e=r.props.model,t=r._getLock(e),n=e.getMetaProperty("iu")||!1;return!t&&n},r.handleDragOver=function(e){r.canUploadImg()&&(e.preventDefault(),r.setState({showDragMask:!0}))},r.handleDropLeave=function(e){var t;!r.canUploadImg()||null!==(t=r.imageDom)&&void 0!==t&&t.contains(e.relatedTarget)||r.setState({showDragMask:!1})},r.handleDrop=function(e){r.canUploadImg()&&(e.preventDefault(),r.setState({showDragMask:!1}),r.handleUpload(e))},r.handleMouseDown=function(e){},r.hasHoverEffect=function(){var e=r.getImageKeyValue().imageHoverKey;if(e){var t=r.getUrl(e);return t&&t.trim()?t:void 0}},r.getUrl=r.getUrl.bind(V(r)),r.mouseOverHandler=r.mouseOverHandler.bind(V(r)),r.mouseLeaveHandler=r.mouseLeaveHandler.bind(V(r)),r.updateTipsConfig=r.updateTipsConfig.bind(V(r)),r.state={tipsConfig:null,showDragMask:!1},r.imageRef=a.default.createRef(null),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U(e,t)}(t,e),r=t,n=[{key:"componentDidMount",value:function(){var e,t=this.props,r=t.model,n=t.isFromCardRow,o=t.data,i=t.option,a=r.getFormConfig();this._fileServer=a.fileserver;var l=(0,C.getRowPropertyTips)({model:r,isFromCardRow:n,data:o,option:i});l&&this.updateTipsConfig(r.pageId,r.key,l),this.imageDom=s.default.findDOMNode(null===(e=this.imageRef)||void 0===e?void 0:e.current),this.imageDom&&(this.imageDom.addEventListener("dragover",this.handleDragOver),this.imageDom.addEventListener("dragleave",this.handleDropLeave),this.imageDom.addEventListener("drop",this.handleDrop))}},{key:"componentWillUnmount",value:function(){this.imageDom&&(this.imageDom.removeEventListener("dragover",this.handleDragOver),this.imageDom.removeEventListener("dragleave",this.handleDropLeave),this.imageDom.removeEventListener("drop",this.handleDrop),this.imageDom=null)}},{key:"componentWillReceiveProps",value:function(e){var t,r,n=this.props,o=n.model,i=n.isFromCardRow,a=n.data,u=n.option,c=(0,C.getRowPropertyTips)({model:o,isFromCardRow:i,data:a,option:u}),s=(0,C.getRowPropertyTips)({model:e.model,isFromCardRow:e.isFromCardRow,data:e.data,option:e.option});(0,l.is)(c,s)||this.updateTipsConfig(null===(t=e.model)||void 0===t?void 0:t.pageId,null===(r=e.model)||void 0===r?void 0:r.key,s)}},{key:"updateTipsConfig",value:function(e,t,r){if(r){var n=this.state.tipsConfig;n||(n=(0,C.createTipsConfig)(e,t),this.setState({tipsConfig:n})),(0,C.saveTipsInfo)(n,r)}else this.setState({tipsConfig:null})}},{key:"_getLock",value:function(e){return this.props.getCardLocked?this.props.getCardLocked(e):this.props.getLocked(e)}},{key:"_getVisible",value:function(e){return this.props.getCardVisible?this.props.getCardVisible(e):this.props.getVisible(e)}},{key:"getUrl",value:function(e){var t=this.props.model.getFormConfig().imageurl,r=(0,S.getImageUrl)({imageurl:t,fileserver:this._fileServer,pageId:this.props.model.pageId},e);return(0,E.appendCtsynonce)(this.props.model,r)}},{key:"mouseOverHandler",value:function(e){var t=this.hasHoverEffect();t&&(e.currentTarget.src=t)}},{key:"mouseLeaveHandler",value:function(e){if(this.hasHoverEffect()){var t=this.getImageKeyValue().imageKey,r=this.getUrl(t);e.currentTarget.src=r||w.default}}},{key:"getImageKeyValue",value:function(){var e=this.props,t=e.model,r=e.isFromCardRow,n=e.data,o=e.option,i=r&&(0,P.getControlRowProperty)({data:n,model:t,option:o}),a=(0,d.getComponentDataProperty)(t,"imageKey",p.IMAGE_KEY,!1),l=(0,d.getComponentDataProperty)(this.props.model,"imageHoverKey",p.IMAGE_HOVER_KEY,!1);return i&&(void 0===i.get("imageKey")&&void 0===i.get("src")||(a=i.get("imageKey")||i.get("src")),void 0!==i.get("imageHoverKey")&&(l=i.get("imageHoverKey"))),{imageKey:a,imageHoverKey:l}}},{key:"render",value:function(){var e=this,t=this.props,r=t.model,n=t.fieldAction,o=t.isFromCardRow,i=t.loading,l=t.dispatch,u=this.state,s=u.tipsConfig,p=u.showDragMask,y=(0,d.getCommonClass)(r),m=y.Grow,g=y.Shrink,v=y.AlignSelf,O=(0,d.getCommonStyle)(r),w=(0,b.getRowIndex)(this.props),S=this.getImageKeyValue().imageKey,P=r.getMetaProperty("sem")||!1,_=this.getUrl(S),C=(0,d.getComponentDataProperty)(r,"text","text",!0),E=this._getLock(r),I=this._getVisible(r),T=r.getMetaProperty("id"),D=n&&n[T];if(D){var M=(0,d.getCardRulesResult)(D,I,E,O);I=M.visibility,E=M.disabled,O=M.style}if(!I)return a.default.createElement("div",{id:r?r.key+"_hide_control":"hide_control",style:{display:"none"}});var L,R=r.getMetaProperty("clickable");s&&(L=a.default.createElement(h.default,{tips:s}));var A,x=i&&i.showLoading,N=i&&i.rowKey;A=o?x&&"undefined"!==N&&w===N:x;var F=this.canUploadImg(),B=F&&(0,k.getLangMsg)({key:"image.key0021"}),V=!F&&C;return a.default.createElement(f.default,j({onMouseDown:this.handleMouseDown,onClick:function(t){return e.handleUpload(t)},showDragMask:p,imgContainerTitle:B,imgTitle:V,Grow:m,Shrink:g,AlignSelf:v,style:O,id:r.key,url:_,name:C,clickable:R,onMouseOver:this.mouseOverHandler,onMouseLeave:this.mouseLeaveHandler,model:r,dispatch:this.props.dispatch,showFormByTips:function(){return l(c.showFormByTips.apply(void 0,arguments))},userLocal:r.getUserLocale(),disabled:E,showLoading:A,sectionMagnifier:P,slot:L},this.props.attachData,{ref:this.imageRef}))}}],n&&A(r.prototype,n),o&&A(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(a.Component))||i)||i)||i)||i);t.default=W},169248:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(622676),r(233696),r(743924),r(205960),r(846428),r(708896),r(969e3),r(606200),r(534440),r(76152),r(670864),r(76124),r(880920),r(387912),r(836887),r(78504),r(776512),r(997308),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(297336),r(336368);var o,i,a=C(r(795520)),l=r(891052),u=P(r(671252)),c=r(439532),s=P(r(235004)),f=r(899760),d=r(704424),p=P(r(348896)),y=r(510372),m=P(r(385384)),g=P(r(182956)),h=P(r(927576)),v=P(r(696428)),b=r(633793),O=C(r(728277)),w=r(334916),S=r(558848);function P(e){return e&&e.__esModule?e:{default:e}}function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_=function(e){return e?r:t})(e)}function C(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=_(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}function k(){return k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},k.apply(this,arguments)}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e,t,r){return(t=j(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,j(n.key),n)}}function j(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function M(e,t,r){return t=R(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return A(e)}(e,L()?Reflect.construct(t,r||[],R(e).constructor):t.apply(e,r))}function L(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(L=function(){return!!e})()}function R(e){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},R(e)}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e,t){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},x(e,t)}var N=(o=(0,p.default)(!1,!0),(0,m.default)(i=(0,g.default)(i=o(i=(0,h.default)(i=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=M(this,t,[e])).formatStyle=function(e){if(e.color){var t=r.state.isHover;e.borderBottom="1px solid "+e.color,e.borderLeft="1px solid "+e.color,e.borderTop="1px solid "+e.color,e.borderRight="1px solid "+e.color,delete e.backgroundColor,t&&(e.backgroundColor=e.color,e.color="#fff")}},r.handleMouseDown=function(e){},r.handleMouseOut=function(e){r.canHover()&&r.setState({isHover:!1})},r.handleMouseOver=function(e){r.canHover()&&r.setState({isHover:!0})},r.getInialProperty=function(e){var t=e.model,n=e.isFromCardRow,o=e.data,i=e.option,a=e.fieldAction,l=(0,c.getCommonStyle)(t),u=t.getMetaProperty("labelstyle")||"1",s=(0,c.getComponentDataProperty)(t,"text","caption",!0),f=n&&(0,y.getControlRowProperty)({data:o,model:t,option:i}),d=r._getLock(t),p=r._getVisible(t);if("2"===u)r.formatStyle(l);else{f&&(void 0!==f.get("text")&&(s=f.get("text")),l=(0,y.mergeCustomStyle)(l,f));var m=t.getMetaProperty("id"),g=a&&a[m];if(g){var h=(0,c.getCardRulesResult)(g,p,d,l);p=h.visibility,d=h.disabled,l=h.style,void 0!==h.text&&(s=h.text)}}var v=t.getMetaProperty("lh");return v&&(l=Object.assign({},l,{lineHeight:v})),{labelStyle:u,text:s,visibility:p,disabled:d,style:l}},r.state={isHover:!1},r.handleClick=r.handleClick.bind(A(r)),r.updateTipsConfig=r.updateTipsConfig.bind(A(r)),r.forAutoTestActions={click:f.click},r.state={tipsConfig:null},r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x(e,t)}(t,e),r=t,n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.model,r=e.isFromCardRow,n=e.data,o=e.option,i=(0,S.getRowPropertyTips)({model:t,isFromCardRow:r,data:n,option:o});i&&this.updateTipsConfig(t.pageId,t.key,i)}},{key:"componentWillReceiveProps",value:function(e){var t,r,n=this.props,o=n.model,i=n.isFromCardRow,a=n.data,u=n.option,s=(0,S.getRowPropertyTips)({model:o,isFromCardRow:i,data:a,option:u}),f=(0,S.getRowPropertyTips)({model:e.model,isFromCardRow:e.isFromCardRow,data:e.data,option:e.option}),d=(0,c.getComponentDataProperty)(o,"text","caption",!0),p=(0,c.getComponentDataProperty)(e.model,"text","caption",!0);(0,l.is)(s,f)&&d===p||this.updateTipsConfig(null===(t=e.model)||void 0===t?void 0:t.pageId,null===(r=e.model)||void 0===r?void 0:r.key,f)}},{key:"updateTipsConfig",value:function(e,t,r){if(r){var n=this.state.tipsConfig;n=(0,S.createTipsConfig)(e,t),this.setState({tipsConfig:n}),(0,S.saveTipsInfo)(n,r)}else this.setState({tipsConfig:null})}},{key:"_getLock",value:function(){var e=this.props,t=e.model,r=e.getCardLocked;return r?r(t):this.props.isLocked}},{key:"_getVisible",value:function(){var e=this.props,t=e.model,r=e.getCardVisible;return r?r(t):this.props.isVisible}},{key:"handleClick",value:function(e){var t=this,r=this.props,n=r.model,o=r.beforeAction,i=r.onClick,a=this._getLock(n);if(!a){var l=n.getMetaProperty("clickable"),u=n.getMetaProperty("type");if(!a&&l){e.stopPropagation();var c=n.pageId,s=n.key,d=o&&o(e,{controlType:u,controlKey:s})||(0,w.waitUpdateValueComplete)(c),p=e&&e.nativeEvent;d.then((function(){i&&i(p),(0,b.interceptActionFn)(I(I({},t.props),{},{click:function(){return t.props.dispatch(f.click.apply(void 0,arguments))}}),O.default)}))}}}},{key:"canHover",value:function(){var e=this.props.model,t=(0,c.getCommonStyle)(e),r=e.getMetaProperty("labelstyle")||"1",n=e.getMetaProperty("clickable"),o=this._getLock(e);return!(!t.color||"2"!==r||o||!n)}},{key:"render",value:function(){var e,t=this,r=this.props,n=r.model,o=r.attachData,i=r.loading,l=this.state.tipsConfig,f=null,p=this.getInialProperty(this.props),y=p.labelStyle,m=p.text,g=p.visibility,h=p.disabled,b=p.style,w=(0,O.getRowIndex)(this.props),S=(0,c.getCommonClass)(n),P=S.Grow,_=S.Shrink,C=S.AlignSelf,E=n.getMetaProperty("clickable"),I=n.getMetaProperty("atw"),T=(0,u.default)("kd-cq-control kd-cq-label",{"kd-cq-label-type-border":"2"===y});return g?(b&&(f=b.color),l&&(e=a.default.createElement(v.default,{tips:l})),a.default.createElement(s.default,k({className:T,disabled:h,onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,onMouseDown:this.handleMouseDown,onClick:this.handleClick,Grow:P,Shrink:_,AlignSelf:C,id:n.key,style:b,text:m,clickable:E,AutoTextWrap:I,model:n,dispatch:this.props.dispatch,showFormByTips:function(){return t.props.dispatch(d.showFormByTips.apply(void 0,arguments))},userLocal:n.getUserLocale()},o,{LabelStyle:y,fontColor:f,loading:i,rowKey:w,slot:e}))):a.default.createElement("div",{id:n?n.key+"_hide_control":"hide_control",style:{display:"none"}})}}],n&&D(r.prototype,n),o&&D(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(a.Component))||i)||i)||i)||i);t.default=N},50416:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(743924),r(205960),r(846428),r(708896),r(606200),r(534440),r(670864),r(880920),r(836887),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(9692),r(233696),r(241872),r(297336),r(336368),r(387912),r(571176),r(497448),r(633768),r(513640),r(997308);var o,i,a,l=O(r(795520)),u=O(r(540900)),c=r(891052),s=O(r(671252)),f=r(211152),d=O(r(943464)),p=r(439532),y=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=b(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(348896)),m=O(r(385384)),g=r(290600),h=r(738704),v=r(251536);function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(b=function(e){return e?r:t})(e)}function O(e){return e&&e.__esModule?e:{default:e}}function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},w.apply(this,arguments)}function S(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,P(n.key),n)}}function P(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function _(e,t,r){return t=k(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return E(e)}(e,C()?Reflect.construct(t,r||[],k(e).constructor):t.apply(e,r))}function C(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(C=function(){return!!e})()}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e,t){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},I(e,t)}var T="splitStyle",D="splitPosition",j=(o=(0,y.default)(!1),(0,m.default)(i=o(i=(0,y.ContainerLockWrap)((a=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=_(this,t,[e])).updateSplitCollapse=function(){r.setState({updateSplitCollapseFlag:!r.state.updateSplitCollapseFlag})},r.handleSaveSplitPositionState=function(e,t){if(e&&t){var n=r.props.model;if((0,p.getComponentDataProperty)(n,g.SAVE_SPLIT_POSITION,g.SAVE_SPLIT_POSITION,!1)){var o,i=r.props.model,a=i.pageId,l=i.key,u=0===parseInt(n.getMetaProperty(T)||0);if(-1!==(n.getMetaProperty(D)||"").indexOf("%"))o=Math.round(e.replace("%",""))+"%";else{var s=t.getBoundingClientRect();o=(u?s.height:s.width)*Math.round(e.replace("%",""))/100+"px"}if(o){var d=n.getFormConfigWithoutMeta(),y=d.formId,m=d.billFormId;(0,h.setUserUIState)(a,["splitcontainer","".concat(y,"_").concat(m),l,D],o,!0);var b=(0,h.getDiffUserUIState)();b&&(0,v.invokeControlService)({pageId:a},"saveSetting",[b],(0,c.List)(),f.doGlobalDispatch)}}}},r.dir={top:3,right:1,bottom:2,left:0},r.getDefaultCollapseDir=r.getDefaultCollapseDir.bind(E(r)),r.state={updateSplitCollapseFlag:!1},e.model.meta.get("items",new c.List).forEach((function(t){(0,h.addDataChangeListener)(e.model.pageId,[t.get("id"),"forceUpdateCollapse"],r.updateSplitCollapse)})),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I(e,t)}(t,e),r=t,(n=[{key:"getDefaultCollapseDir",value:function(e,t){var r;return e&&e.forEach((function(e,n){var o=e.props.model.getMetaProperty(g.DEFAULT_COLLAPSE);0===n?!0===o&&(r=t?"top":"left"):!0===o&&(r=t?"bottom":"right")})),r}},{key:"render",value:function(){var e=this.props,t=e.model,r=e.style,n=this.state.updateSplitCollapseFlag,o=(0,p.getCommonClass)(t),i=o.Direction,a=o.Grow,u=o.Shrink,y=o.Wrap,m=o.Overflow,v=Object.assign({},(0,p.getCommonStyle)(t),r),b=(0,p.parseSubComponents)(t.meta.get("items",new c.List),t.pageId,(0,f.getGlobalState)()),O=0===parseInt(t.getMetaProperty(T)||0),S=(0,p.getComponentDataProperty)(t,"collapse","collapse",!1),P=S&&S.get("dir"),_=S&&S.get("state"),C=t.getMetaProperty(D)||"",k=(0,h.getUserUIState)(),E=t.getFormConfigWithoutMeta(),I=E.formId,j=E.billFormId,M=k.getIn(["splitcontainer","".concat(I,"_").concat(j),t.key,D]);if(M&&(C=M),-1!==C.indexOf("%")){var L=parseInt(C.replace("%",""));L>=100?(P=O?this.dir.bottom:this.dir.right,_=!0):L<=0&&(P=O?this.dir.top:this.dir.left,_=!0)}var R=this.getDefaultCollapseDir(b,O),A=(0,p.getComponentDataProperty)(t,"minHeight","minHeight",!1)||65,x=(0,p.getComponentDataProperty)(t,"minWidth","minWidth",!1)||300,N=(0,p.getComponentDataProperty)(t,g.IS_STORAGE_MODE,g.IS_STORAGE_MODE,!1)||!1,F=(0,s.default)({"kd-cq-splitcontainer-type-storage":N}),B=N;return l.default.createElement(d.default,w({className:F,limitInVisibleArea:B,onSaveSplitPositionState:this.handleSaveSplitPositionState,defaultCollapseDir:R,updateSplitCollapseFlag:n,id:t.key,minHeight:A,minWidth:x,isHorizon:O,splitPercent:C,hiddenDir:P,hiddenState:_,style:v,Grow:a,Shrink:u,Direction:i,Wrap:y,Overflow:m},this.props.attachData),l.default.Children.toArray(b))}}])&&S(r.prototype,n),o&&S(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(l.default.Component),a.contextTypes={store:u.default.object},i=a))||i)||i)||i);t.default=j},726032:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(743924),r(205960),r(297336),r(846428),r(708896),r(606200),r(670864),r(880920),r(836887),r(78504),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(336368),r(387912),r(497448);var o,i,a,l=m(r(795520)),u=m(r(540900)),c=r(891052),s=r(211152),f=m(r(959816)),d=r(439532),p=m(r(348896)),y=m(r(385384));function m(e){return e&&e.__esModule?e:{default:e}}function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},g.apply(this,arguments)}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,v(n.key),n)}}function v(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function b(e,t,r){return t=w(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,O()?Reflect.construct(t,r||[],w(e).constructor):t.apply(e,r))}function O(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(O=function(){return!!e})()}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function S(e,t){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},S(e,t)}var P=(o=(0,p.default)(!0),(0,y.default)(i=o((a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),b(this,t,arguments)}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this.props,t=e.model,r=e.Grow,n=e.Shrink,o=Object.assign({},(0,d.getCommonStyle)(t),this.props.style);o=Object.assign(o,this.props.style);var i=(0,d.getCommonClass)(t),a=(0,s.getGlobalState)(),u=(0,d.parseSubComponents)(t.meta.get("items",new c.List),t.pageId,(0,s.getGlobalState)());return l.default.createElement(f.default,g({style:o},i,{id:t.key,Grow:r,Shrink:n},this.props.attachData),u,l.default.Children.toArray((0,d.parseSubForms)(t.pageId,t.key,a)))}}])&&h(r.prototype,n),o&&h(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(l.default.Component),a.contextTypes={store:u.default.object},i=a))||i)||i);t.default=P},449328:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(241872),r(743924),r(205960),r(297336),r(846428),r(708896),r(606200),r(534440),r(670864),r(76124),r(880920),r(836887),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(336368),r(387912),r(497448);var o,i,a,l=b(r(795520)),u=b(r(540900)),c=r(211152),s=r(439532),f=r(367756),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=v(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(385384)),p=b(r(956788)),y=r(348896),m=r(545072),g=r(738704),h=["model","title","key","id","homeTab","isStorageMode","lazyLoaded","menus","badgeEle","active","className"];function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}function b(e){return e&&e.__esModule?e:{default:e}}function O(){return O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},O.apply(this,arguments)}function w(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function S(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,P(n.key),n)}}function P(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function _(e,t,r){return t=k(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,C()?Reflect.construct(t,r||[],k(e).constructor):t.apply(e,r))}function C(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(C=function(){return!!e})()}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}function E(e,t){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},E(e,t)}var I="tabpage",T="data-page-id",D=(o=(0,p.default)({top:0,right:-20},!1),(0,d.default)(i=o(i=(0,y.ContainerLockWrap)((a=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),_(this,t,[e])}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(t,e),r=t,(n=[{key:"componentWillReceiveProps",value:function(e){var t=this.props.model.getDataProperty("autoOverflow"),r=e.model.getDataProperty("autoOverflow");if(r&&r!==t){var n=(0,d.findDomByDataPageId)((0,d.AttachDataManual)(this.props.model.pageId,this.props.model.key,I)[T]);if(n){n.style&&"visible"!==n.style.overflow&&(n.style.overflow="visible");var o=n.parentElement;o&&o.style&&"visible"!==o.style.overflow&&(o.style.overflow="visible")}}}},{key:"render",value:function(){var e=this.props,t=e.model,r=e.title,n=e.key,o=e.id,i=e.homeTab,a=e.isStorageMode,u=e.lazyLoaded,d=e.menus,p=e.badgeEle,y=e.active,v=e.className,b=(w(e,h),{title:r,key:n,id:o,homeTab:i,lazyLoaded:u,menus:d,badgeEle:p,active:y,className:v,"data-ctrl-type":"tabbar","data-pid":t.pageId,"data-ctrl-key":t.key}),S=Object.assign({},(0,s.getCommonStyle)(t),this.props.style),P=t.meta,_=P.get("items");return this.props.attachData&&this.props.attachData[T]&&(this.props.attachData[T]=this.props.attachData[T]+"_"+I,i&&(this.props.attachData["data-main-tab"]=t.pageId)),a&&(this.props.attachData["data-tab-panel-item-storage-mode"]=!0,_.size&&"advcon"===_.getIn([0,"type"])&&(0,g.setPageData)(t.pageId,[_.getIn([0,"id"]),m.ATTACH_TOOLBAR_TO_TAB],!0)),l.default.createElement(f.TabPanel,O({},b,{style:S},this.props.attachData),(0,s.parseSubComponents)(_,t.pageId,(0,c.getGlobalState)()),l.default.Children.toArray((0,s.parseSubForms)(t.pageId,P.get("id"),(0,c.getGlobalState)())))}}])&&S(r.prototype,n),o&&S(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(l.default.Component),a.contextTypes={store:u.default.object},i=a))||i)||i)||i);t.default=D},982072:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(743924),r(205960),r(297336),r(846428),r(708896),r(606200),r(534440),r(670864),r(880920),r(836887),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(9692),r(622676),r(305092),r(613468),r(233696),r(443616),r(835164),r(492948),r(693917),r(336368),r(387912),r(660824),r(997308);var o,i,a,l,u=V(r(795520)),c=V(r(540900)),s=V(r(790832)),f=r(891052),d=r(211152),p=r(439532),y=r(367756),m=r(290600),g=r(959616),h=r(301792),v=B(r(348896)),b=B(r(385384)),O=r(956788),w=V(r(720756)),S=V(r(337368)),P=r(738704),_=r(218652),C=r(545072),k=r(592500),E=r(589200),I=r(674260),T=r(868256),D=r(331428),j=r(783168),M=V(r(671252)),L=B(r(251536)),R=r(29804),A=V(r(696428)),x=r(558848),N=V(r(173552));function F(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(F=function(e){return e?r:t})(e)}function B(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=F(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}function V(e){return e&&e.__esModule?e:{default:e}}function U(){return U=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},U.apply(this,arguments)}function W(e,t,r){return(t=z(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function H(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,z(n.key),n)}}function z(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function G(e,t,r){return t=q(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,K()?Reflect.construct(t,r||[],q(e).constructor):t.apply(e,r))}function K(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(K=function(){return!!e})()}function q(e){return q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},q(e)}function Y(e,t){return Y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Y(e,t)}var J="tabpage",X=(o=(0,S.default)(["selectTab"],600),i=(0,v.default)(!0),o(a=(0,b.default)(a=i(a=(0,v.ContainerLockWrap)((l=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=G(this,t,[e])).getVisibleInfo=function(e,t){var n=r.props.model;return!r.props.getVisible||r.props.getVisible(n,e,t)},r.handleAppendAdvToolBar=function(e,t){var n=(0,j.getCurrentTabPageId)(t);t.setAttribute("data-tab-page-info",n);var o=e.querySelector("[data-toolbar-slot]");o.appendChild(t),o.children.forEach((function(e){e.style.display=e.dataset.tabPageInfo===r.activeKey?"flex":"none"}))},r.handleRemoveAdvToolBar=function(e,t){e&&t&&e.querySelector("[data-toolbar-slot]").removeChild(t)},r.getTipsConfig=function(e,t,r){var n=(0,x.createTipsConfig)(t,r);if(n)return(0,x.saveTipsInfo)(n,e),n},r.handleSelectTab=function(e,t){var n=r.props,o=n.dispatch,i=n.model;if((0,I.setData)(T.KEY_SWITCH_TAB,{activeTabKey:e,isAppTab:t}),(0,p.getComponentDataProperty)(i,m.IS_STORAGE_MODE,m.IS_STORAGE_MODE,!1)||!1){var a;L.mergeState(R.UPDATE_CONTROL_STATES,i.pageId,[{key:i.key,currentTab:e}],o);var l=null===(a=r.tabRef.current)||void 0===a||null===(a=a.refs)||void 0===a?void 0:a.kdtab;if(!l)return;l.querySelector("[data-toolbar-slot]").children.forEach((function(t){t.style.display=t.dataset.tabPageInfo===e?"flex":"none"}))}else o((0,h.selectTab)(i,e))},r.handlePermission=function(e){if(e){var t=e.noPerData,n=void 0===t?[]:t,o=r.state.items;o=o.map((function(e){var t=e.get("menus");return t&&(e=e.update("menus",(function(){return(0,k.getPermissionItems)({items:t,noPerData:n,model:r.props.model,isTab:!0})}))),e})),r.setState({items:o})}},r.handleTabClickEvent=function(e){r.props.model.pageId===e.tabPageId&&r.props.model.key===e.tabId&&(r.handleSelectTab(e.key,!0),(0,P.setPageData)(r.props.model.pageId,"tabactive","".concat(e.key,"_").concat(J)))},r.handleReOpenTab=function(e){(0,r.props.dispatch)((0,h.reOpenTab)(r.props.model,e))},r.getLockedInfo=function(e,t){var n=r.props.model;return!!r.props.getLocked&&r.props.getLocked(n,e,t)},r.getPreviousTab=function(){return r.collectPreActiveKey},r.onDragEnd=function(e){var t=e.sourceKey,n=e.destinationKey;if(t!==n){var o=r.props,i=o.model,a=o.dispatch,l=(0,d.getGlobalState)(),u=(0,_.getControlSubForms)(i.pageId,i.key)(l),c=(0,E.swapData)({sourceKey:t,destinationKey:n,dataSource:u});a((0,_.convertAppModelFunctionAction)((0,_.setControlSubForms)(i.pageId,i.key,(0,f.fromJS)(c)))),(0,I.setData)(T.KEY_TAB_SWAP_POSITION,{sourceKey:t,destinationKey:n,subForms:c})}},r.handleFullScreen=function(){var e=!r.state.tabPageFullScreen;r.setState({tabPageFullScreen:e});var t=r.props.model,n=t.pageId,o=t.key;(0,j.updateFullScreenGlobalData)(e,"".concat(n,"_").concat(o))},r.getPresetSubTabs=function(){var e=r.state.items;if(!e)return[];var t=r.props.model,n=(0,d.getGlobalState)(),o=(0,p.getComponentDataProperty)(t,m.IS_STORAGE_MODE,m.IS_STORAGE_MODE,!1);return e.reduce((function(e,i){var a=(0,g.createComponentModel)(t.pageId,i,n);if(o){var l=a.getMetaProperty("items"),c=null==l?void 0:l.get(0);if(!c)return e;var s=c.get("id"),f=(0,g.createComponentModel)(t.pageId,c,n);if(!(0,p.getVisible)(f,s))return e}var y=(0,p.getComponentDataProperty)(a,m.TAB_TIP,m.TAB_TIP),h=a.getMetaLocaleProperty("text"),v=a.getMetaProperty("homet"),S=a.getMetaProperty("menus"),P=a.getMetaProperty("icon"),_=(0,p.getComponentDataProperty)(t,m.TAB_TIP_COLOR),C=a.getMetaProperty("canFull"),k=y?u.default.createElement("span",null,h,u.default.createElement("span",{style:_?{color:_}:null}," ".concat(y))):h,E=i.get("id"),I=(0,p.getVisible)(a,E),T=(0,p.getLocked)(a,E),j=(0,b.getDataPageId)(a.pageId,a.key);if(I){var L=a.getDataProperty("badge"),R=(0,p.getComponentDataProperty)(a,"closable","closable"),x=i.get("tipsConfig"),F=x?u.default.createElement(A.default,{tips:x,style:{fontSize:16,lineHeight:"16px",marginRight:2}}):null,B=u.default.createElement(O.BadgeElement,{badgeInfo:L}),V=(0,w.default)(t.pageId,i,(0,d.getGlobalState)(),void 0,{dataPageId:j}),U=(0,M.default)(W(W({"kdfont kdfont-quanping":!r.state.tabPageFullScreen,"kdfont kdfont-guanbiquanping":r.state.tabPageFullScreen},N.default["full-screen"],!0),"kd-hover-color",!0)),H=C?u.default.createElement("span",{className:U,onClick:r.handleFullScreen,title:r.state.tabPageFullScreen?(0,D.getLangMsg)({key:"tabs.key0002"}):(0,D.getLangMsg)({key:"tabs.key0001"})}):null,z=C&&r.state.tabPageFullScreen?"kd-cq-tabpage-fullscreen":"";return e.concat(u.default.cloneElement(V,{title:k,key:E,icon:P,id:E,homeTab:v,lazyLoaded:o,isStorageMode:o,menus:S,fullScreenSlot:H,addedTabClassName:z,badgeEle:B,dynamicTab:R,locked:T,slot:F}))}return e}),[])},r.getStaticTabs=function(){var e=r.props.model,t=(0,d.getGlobalState)(),n=r.state.items;return n&&n.map((function(r){var n=(0,g.createComponentModel)(e.pageId,r,t),o=(0,p.getComponentDataProperty)(n,"closable","closable");return{id:r.get("id"),closable:o}})).toJS()},r.handleTabClick=function(e){var t=r.props.model;r.handleSelectTab(e),(0,P.setPageData)(t.pageId,"tabactive","".concat(e,"_").concat(J))},r.handleClickCloseOther=function(e){var t=r.props,n=t.model,o=t.dispatch,i=(0,d.getGlobalState)(),a=r.getStaticTabs(),l=s.default.filter(a,(function(t){return t.closable&&t.id!==e})),u=[];(0,p.parseSubForms)(n.pageId,n.key,i,(function(t,r){e!==r.props.config.pageId&&u.push(r.props.config.pageId)})),o((0,h.closeTabs)(n,u,l)),n.getDataCurrentTab()!==e&&r.handleSelectTab(e)},r.handleClickCloseRight=function(e,t){var n=r.props,o=n.model,i=n.dispatch,a=r.getStaticTabs(),l=s.default.filter(a,["closable",!0]),u=l.findIndex((function(t){return t.id===e}));l=l.slice(u+1),i((0,h.closeTabs)(o,t,l));var c=o.getDataCurrentTab();t.includes(c)&&r.handleSelectTab(e)},r.handleClickCloseAll=function(){var e=r.props,t=e.model,n=e.dispatch,o=(0,d.getGlobalState)(),i=r.getStaticTabs(),a=s.default.filter(i,["closable",!0]),l=s.default.map(s.default.filter(i,(function(e){return!e.closable})),(function(e){return e.id})).pop(),u=[];(0,p.parseSubForms)(t.pageId,t.key,o,(function(e,t){u.push(t.props.config.pageId)})),n((0,h.closeTabs)(t,u,a,l))},r.forAutoTestActions={selectTab:h.selectTab,closeTab:h.closeTab,handleMenuClick:h.handleMenuClick},r.state={items:e.model.getMetaProperty("items"),tabPageFullScreen:!1},r.tabRef=u.default.createRef(),r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Y(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){var e,t=this,r=(0,P.getPageData)(this.props.model.pageId,C.PERMISSION_PARAMS);if(r&&this.handlePermission(r),this.removePageDataListener=(0,P.addDataChangeListener)(this.props.model.pageId,C.PERMISSION_PARAMS,this.handlePermission),(0,p.getComponentDataProperty)(this.props.model,"hideNav","hideNav",!1)){var n=this.props.model.pageId,o=this.props.model.key;this.removeSubscribeControlMethod=(0,P.subscribeControlMethod)(n,o,"clickTab",(function(e){e&&t.handleTabClickEvent(e)}))}if((0,p.getComponentDataProperty)(this.props.model,m.IS_STORAGE_MODE,m.IS_STORAGE_MODE,!1)){var i,a=null===(i=this.tabRef.current)||void 0===i||null===(i=i.refs)||void 0===i?void 0:i.kdtab;if(a){var l=(0,P.getPageData)(this.props.model.pageId,[this.props.model.key,"__advcon_toolbar_add_action__"]);l&&this.handleAppendAdvToolBar(a,l),this.removeAddAdvConToolBarListener=(0,P.addDataChangeListener)(this.props.model.pageId,[this.props.model.key,"__advcon_toolbar_add_action__"],(function(e){return t.handleAppendAdvToolBar(a,e)})),this.removeDeleteAdvConToolBarListener=(0,P.addDataChangeListener)(this.props.model.pageId,[this.props.model.key,"__advcon_toolbar_remove_action__"],(function(e){return t.handleRemoveAdvToolBar(a,e)}))}}var u=null===(e=this.state.items)||void 0===e?void 0:e.map((function(e){var r=e.get("tips");if(!r)return e;r.get("isConfirm")&&(r=r.set("forceShowIcon",!0));var n=t.getTipsConfig(r,t.props.model.pageId,e.get("id"));return e.set("tipsConfig",n)}));this.setState({items:u})}},{key:"componentWillUnmount",value:function(){var e,t;this.removeSubscribeControlMethod&&this.removeSubscribeControlMethod(),this.removePageDataListener&&this.removePageDataListener(),null===(e=this.removeAddAdvConToolBarListener)||void 0===e||e.call(this),null===(t=this.removeDeleteAdvConToolBarListener)||void 0===t||t.call(this)}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(!(0,f.is)(e.model.getMetaProperty("items"),this.props.model.getMetaProperty("items"))){var r,n=null===(r=e.model.getMetaProperty("items"))||void 0===r?void 0:r.map((function(r){var n=r.get("tips");if(!n)return r;n.get("isConfirm")&&(n=n.set("forceShowIcon",!0));var o=t.getTipsConfig(n,e.model.pageId,r.get("id"));return r.set("tipsConfig",o)}));this.setState({items:n})}}},{key:"render",value:function(){var e=this,t=this.props,r=t.model,n=t.dispatch,o=r.getUserLocale(),i=r.getDefaultLang(),a=Object.assign({},(0,p.getCommonStyle)(r),this.props.style),l=(0,d.getGlobalState)(),c=r.getDataCurrentTab(),f=r.getMetaProperty("as"),g=r.getMetaProperty(m.FLEX_GROW),v=r.getMetaProperty(m.FLEX_SHRINK),b=r.getMetaProperty("ai"),O=(0,p.getComponentDataProperty)(r,"hideNav","hideNav",!1),w=r.getMetaProperty("dap"),S=r.getMetaProperty("canSlide"),P=r.getMetaProperty("canFull"),C=r.getMetaProperty("tabStyle"),k=r.getMetaProperty("showHelp"),E=r.getMetaProperty("tabDirection"),I=r.getMetaProperty("sddi"),T=r.getMetaProperty("showTeamWork"),D=r.getMetaProperty("showInsight"),j=r.getMetaProperty("cannotClickInLock"),L=(0,p.getComponentDataProperty)(r,m.IS_STORAGE_MODE,m.IS_STORAGE_MODE,!1);"vertical"===E&&(C=4);var R=this.getPresetSubTabs(),A=r.getDataProperty("tabName")||{},x=(0,p.parseSubForms)(r.pageId,r.key,l,(function(t,r){var n=A[r.props.config.pageId];n&&(t=n);var o=((0,_.getFormConfig)(r.props.config.pageId)(e.props.appState)||{}).openStyle||{},i=o.showType,a=o.reservedSpace,l=!1;return 1===i&&a&&(l=!0),u.default.createElement(y.TabPanel,{title:t,key:r.props.config.pageId,id:r.props.config.pageId,reservedSpace:l,dynamicTab:!0,lazyLoaded:!0},r)}));x=s.default.filter(x,(function(e){return!s.default.isNull(e)&&!s.default.isUndefined(e)}));var N=s.default.concat([],R,x);if(this.collectPreActiveKey=null,"number"==typeof c&&c<=N.length-1||"string"==typeof c&&N.find((function(e){return e.key===c}))||(c=0),0==c)if(w)c=w;else if(R&&R.size>0){var F;c=null===(F=R.first())||void 0===F?void 0:F.key}else c=N&&N.length>0?s.default.first(N).key:"";else if(-1==c){var B;c=N.length>0?s.default.last(N).key:"",this.collectPreActiveKey=(null==N?void 0:N.length)-(null===(B=this.preSubTab)||void 0===B?void 0:B.length)>1?N[N.length-2].key:null}this.preSubTab=N,this.activeKey=c;var V=(0,M.default)({"kd-cq-tabs-type-storage":L});return u.default.createElement(y.Tabs,U({id:r.key,style:a,className:V,activeKey:c,hideNavigation:O,locale:o,defaultLang:i,defaultActivePage:w,canSlide:S,ref:this.tabRef,activeIndex:r.getDataCurrentTab(),getPreviousTab:this.getPreviousTab,canFull:P,showHelp:k,isStorageMode:L,showTeamWork:T,showInsight:D,tabStyle:C,tabDirection:E,showMore:I,Grow:g,Shrink:v,AlignSelf:f,AlignItems:b,handleTabClick:this.handleTabClick,handleCloseClick:function(e,t){return n((0,h.closeTab)(r,e,t))},handleCloseOthersClick:this.handleClickCloseOther,onHandleCloseRightTabClick:this.handleClickCloseRight,handleCloseAllClick:this.handleClickCloseAll,handleReOpenTab:this.handleReOpenTab,setCurrentTab:function(e){return n((0,h.setCurrentTab)(r,e))},handleMenuClick:function(e,t,o){return n((0,h.handleMenuClick)(r,e,t,o))},handleIconClick:function(e){n((0,h.handleClick)(r,e))},getVisibleInfo:this.getVisibleInfo,getLockedInfo:this.getLockedInfo,pageId:r.pageId,cannotClickInLock:j,onDragEnd:this.onDragEnd},this.props.attachData),N)}}])&&H(r.prototype,n),o&&H(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(u.default.Component),l.contextTypes={store:c.default.object},a=l))||a)||a)||a)||a);t.default=X},149272:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(743924),r(205960),r(708896),r(969e3),r(606200),r(534440),r(76152),r(670864),r(880920),r(836887),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(622676),r(305092),r(613468),r(233696),r(505684),r(835164),r(704180),r(82e3),r(297336),r(721300),r(846428),r(300116),r(336368),r(76124),r(387912),r(804092),r(571176),r(78504),r(997308);var o,i,a,l=z(r(795520)),u=W(r(369396)),c=W(r(540900)),s=r(891052),f=W(r(671252)),d=r(199860),p=r(790832),y=r(211152),m=W(r(402824)),g=r(970160),h=r(439532),v=r(592500),b=W(r(959616)),O=W(r(348896)),w=r(111648),S=r(218652),P=W(r(385384)),_=W(r(720756)),C=r(633793),k=r(738704),E=r(545072),I=r(290600),T=r(260880),D=z(r(95821)),j=W(r(927576)),M=W(r(720056)),L=r(496260),R=W(r(49532)),A=r(331428),x=W(r(139224)),N=r(334916),F=r(559100),B=W(r(84904)),V=W(r(32956)),U=W(r(523196));function W(e){return e&&e.__esModule?e:{default:e}}function H(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(H=function(e){return e?r:t})(e)}function z(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=H(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}function G(){return G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},G.apply(this,arguments)}function K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?K(Object(r),!0).forEach((function(t){Y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Y(e,t,r){return(t=X(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function J(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,X(n.key),n)}}function X(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function Z(e,t,r){return t=$(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ee(e)}(e,Q()?Reflect.construct(t,r||[],$(e).constructor):t.apply(e,r))}function Q(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Q=function(){return!!e})()}function $(e){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$(e)}function ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function te(e,t){return te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},te(e,t)}var re="__MORE_WRAPPER__",ne=(o=(0,O.default)(!1),(0,j.default)(i=(0,P.default)(i=o((a=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Z(this,t,[e])).getTipsSlot=function(e){try{if(e){var t=u.default.findDOMNode(r.toolbarRef.current),n=null==t?void 0:t.querySelector("[data-btn-key=".concat(e,"]"));return null==n?void 0:n.querySelector('[data-is-tip="true"]')}}catch(e){return null}},r.setLastVisibleItemId=function(){if(r.moreRef.current)r.lastVisibleItemId=re;else{var e=r.oldItems.findLast((function(e){var t=e.get(I.ID),n=e.get(I.VISIBLE_CTRL),o=r.getVisible(t,n);if(e.get("groupId")&&e.get(I.ID)!==e.get("groupId")){var i=r.getSameItem(r.oldItems,e);o=i.visible,t=i.id}return o}));r.lastVisibleItemId=(null==e?void 0:e.get(I.ID))||null}},r.handlePermission=function(e){if(e){var t=e.noPerData,n=void 0===t?[]:t,o=r.state.items,i=(0,v.getPermissionItems)({items:o,noPerData:n,model:r.props.model});r.oldItems=i,r.setState({items:i,customItems:r.oldItems.filter((function(e,t){return e&&!e.get(I.AS_MORE_BTN)})),dropDownList:r.getMoreBtns(r.oldItems,r.props.model.getUserLocale())})}},r.addResizeObserve=function(){r.toolbarRef.current&&(r.resizeObserver=(0,x.default)(u.default.findDOMNode(r.toolbarRef.current),(function(e){void 0!==r.size?(r.size.width!==e.width&&(r.size=q({},e),(0,p.debounce)((function(){r.cacheRights={},r.resetObserver()}),1500)),r.size.isHide!==e.hide&&(r.size.isHide=e.hide,r.cacheRights={},r.resetObserver())):r.size=q({},e)})))},r.addIntersectionObserver=function(){var e={threshold:[.99999999],root:u.default.findDOMNode(r.toolbarRef.current),rootMargin:"0px -".concat(40,"px 0px 0px")},t=function(e){var t;r.moreRef.current&&(t=u.default.findDOMNode(r.moreRef.current)),e.forEach((function(e,n){var o=e.target.dataset.btnKey,i=e.boundingClientRect,a=i.left,l=i.right;o&&(0===a&&0===l?delete r.cacheRights[o]:r.cacheRights[o]={left:a,right:l,intersectionRatio:e.intersectionRatio}),e.target===t&&(0===a&&0===l?delete r.cacheRights[re]:r.cacheRights[re]={left:a,right:l,intersectionRatio:e.intersectionRatio})})),r.resetFirstInvisibleItemIndex()};if(r.intersectionObserver=new window.IntersectionObserver(t,e),r.lastItemIntersectionObserver=new window.IntersectionObserver(t,q(q({},e),{},{rootMargin:"0px 0px 0px 0px"})),r.moreRef.current){var n=u.default.findDOMNode(r.moreRef.current);r.lastItemIntersectionObserver.observe(n)}if(r.toolbarRef.current){var o=u.default.findDOMNode(r.toolbarRef.current);o.children.length>1&&Array.from(o.children).forEach((function(e){e.dataset.btnKey&&(e.dataset.btnKey===r.lastVisibleItemId?r.lastItemIntersectionObserver.observe(e):r.intersectionObserver.observe(e))}))}},r.addMutationObserver=function(){if(r.mutationObserver=new window.MutationObserver((function(e){e.forEach((function(e){"childList"===e.type&&r.resetObserver()}))})),r.toolbarRef.current){var e=u.default.findDOMNode(r.toolbarRef.current);r.mutationObserver.observe(e,{childList:!0})}},r.resetFirstInvisibleItemIndex=function(){var e=r.getVisibleItems(),t={};e.size<=Object.keys(r.cacheRights).length&&e.forEach((function(e){r.cacheRights[e.get(I.ID)]&&(t[e.get(I.ID)]=r.cacheRights[e.get(I.ID)])}));var n=Object.values(t).sort((function(e,t){return e.right-t.right})),o=n.findIndex((function(e){return e.intersectionRatio<1})),i=r.props.model,a=(0,h.getCommonStyle)(i);(o<=0||o>e.size)&&(o=Number.MAX_SAFE_INTEGER);var l=a.paddingLeft?parseInt(a.paddingLeft):40,u=r.getMoreBtnBGColor();r.setState({dropdownVisible:!1,subDropdownVisible:{},showCustomPanel:!1,moreBtnStyle:o===Number.MAX_SAFE_INTEGER?{}:{left:n[o].left-n[0].left+l,top:a.paddingTop,backgroundColor:u},firstInvisibleItemIndex:o})},r.getMoreBtnBGColor=function(){if(!r.toolbarRef.current)return"#fff";try{for(var e=u.default.findDOMNode(r.toolbarRef.current);e&&!e.style.backgroundColor;)e=e.parentElement;return e?e.style.backgroundColor:"#fff"}catch(e){return"#fff"}},r.handleDropdownVisibleChange=function(e){var t=r.state,n=t.subDropdownVisible,o=t.showCustomPanel;if(e||!Object.values(n).some((function(e){return!0===e})))if(o)r.setState({dropdownVisible:!1,showCustomPanel:!1});else{var i={dropdownVisible:e,subDropdownVisible:e?n:{}};r.setState(q({},i))}},r.getVisibleItems=function(){var e=r.state,t=e.items,n=e.dropDownList;return t.filter((function(e){var o=e.get(I.ID),i=e.get(I.VISIBLE_CTRL),a=r.getVisible(o,i);e.get("groupId")&&e.get(I.ID)!==e.get("groupId")&&(a=r.getSameItem(t,e).visible);var l=!0,u=n.find((function(t){return t.id===e.get(I.ID)}));return u&&(l=u.isChecked),a&&l}))},r.getMenus=function(){if(!r.state.dropdownVisible)return[];var e=r.state,t=e.firstInvisibleItemIndex,n=e.items;if(!(t<0||t===n.size||t===Number.MAX_SAFE_INTEGER)){for(var o=r.getVisibleItems(),i=[],a=function(){var e=r.props.model.defaultLang,t=r.props.model.getUserLocale(),n=o.getIn([l,I.ID]),a=o.getIn([l,"text",t])||o.getIn([l,"text",e])||o.getIn([l,"text","zh_CN"]),u=o.getIn([l,"opk"]),c=r.getLocked(n,o.getIn([l,"l"])),f=o.getIn([l,I.ITEMS],[]),d=[];f.forEach((function(n){var i=n.get(I.ID),a=n.getIn([I.TITLE,t])||n.getIn([I.TITLE,e])||n.getIn([I.TITLE,"zh_CN"]),l=n.get(I.OPERATION_KEY),u=r.getLocked(i,o.get("l"));r.getVisible(i,n.get(I.VISIBLE_CTRL))&&d.push((0,s.fromJS)({key:i,title:a,lock:u,opk:l}))}));var p=o.getIn([l,I.OPERATION_STYELE]),y=d.length>0&&(!u&&!p||2===p);i.push((0,s.fromJS)({key:n,title:a,lock:c,opk:u,items:d,isDropdown:y}))},l=t;l<o.size;l++)a();if(r.props.model.getMetaProperty(I.SHOW_MORE)){var u=r.state.dropDownList.filter((function(e){return!e.isChecked})).map((function(e){return(0,s.fromJS)({key:e.id,title:e.name,lock:e.locked,opk:e.opk,items:e.item&&s.List.isList(e.item)?e.item.map((function(e){return(0,s.fromJS)({key:e.id,title:e.name,lock:e.locked,opk:e.opk})})):null})}));i.push((0,s.fromJS)({title:(0,A.getLangMsg)({key:"toolbar.more"}),key:I.TOOLBAR_MORE_BTN,items:u}))}return(0,R.default)({items:i,visible:r.state.subDropdownVisible,onClick:r.handleClick,onVisibleChange:r.handleSubDropdownVisibleChange})}},r.handleSubDropdownVisibleChange=function(e,t){var n=r.state.subDropdownVisible;n[t]=e,r.setState({subDropdownVisible:n})},r.getCustomPanel=function(){var e=r.state.dropDownList.filter((function(e){return!e.isNotMod}));e.push({id:"__confirm__",name:(0,A.getLangMsg)({key:"toolbar.complete"})});return l.default.createElement(d.Dropdown.Menu,{className:U.default["custom-panel"]},l.default.createElement(l.default.Fragment,null,l.default.createElement(D.DropDownWithCheck,{dropDownList:e,userLocal:r.props.model.getUserLocale(),dropDownItemClick:r.postDataToUIState,checkboxChange:function(t,n){return r.modifyBtsStatus(e[n],!t)}})))},r.originalItems=(0,h.getComponentDataProperty)(r.props.model,I.ITEMS,I.ITEMS,!1),r.oldItems=r.filterItemsStruct((0,h.getComponentDataProperty)(r.props.model,I.ITEMS,I.ITEMS,!1))||(0,s.Map)(),r.handleClick=r.handleClick.bind(ee(r)),r.getVisible=r.getVisible.bind(ee(r)),r.getLocked=r.getLocked.bind(ee(r)),r.postDataToUIState=r.postDataToUIState.bind(ee(r)),r.modifyBtsStatus=r.modifyBtsStatus.bind(ee(r)),r.renewOldItems=r.renewOldItems.bind(ee(r)),r.state={items:r.filterItemsStruct((0,h.getComponentDataProperty)(r.props.model,I.ITEMS,I.ITEMS,!1)),customItems:r.oldItems.filter((function(e,t){return e&&!e.get(I.AS_MORE_BTN)})),dropDownList:r.getMoreBtns(r.oldItems,e.model.getUserLocale()),moreBtnStyle:{},firstInvisibleItemIndex:Number.MAX_SAFE_INTEGER,dropdownVisible:!1,subDropdownVisible:{},showCustomPanel:!1},r.toolbarRef=l.default.createRef(),r.moreRef=l.default.createRef(),r.moreBtnRef=l.default.createRef(),r.cacheRights={},r.lastVisibleItemId=null,r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&te(e,t)}(t,e),r=t,n=[{key:"filterItemsStruct",value:function(e){return this.props.model.getMetaProperty(I.SHOW_MORE)?e=e.map((function(e,t){var r="asMoreButton"===e.get(I.MORE_BUTTON_MODEL);return e.get("items")&&(e=e.update("items",(function(t){return t.map((function(t){return t.merge({groupId:e.get(I.ID),currentGroupId:e.get(I.ID),ab:r,ht:!1})}))}))),e.merge({groupId:e.get(I.ID),currentGroupId:e.get(I.ID),ab:r,ht:!1})})):e}},{key:"handleClick",value:function(e,t){var r=this;if(this.state.dropdownVisible&&this.setState({dropdownVisible:!1,subDropdownVisible:{}}),e!==I.TOOLBAR_CUSTOM_BTN){var n=this.props.model.pageId;(0,N.waitUpdateValueComplete)(n).then((function(){r._handleClick(e,t)}))}else this.setState({showCustomPanel:!0})}},{key:"_handleClick",value:function(e,t){var r=this,n=this.props.model,o=n.meta,i=n.pageId,a=(n.key,o.get("items").filter((function(t){return t.get("id")===e})).getIn([0,"tc"]));if(t=t||"",a)(0,M.default)("importCert",{data:{pageId:i},callback:function(n){var o=r.props.model,i=o.pageId,a=o.key;r.props.dispatch((0,S.convertAppModelFunctionAction)((0,S.setControlPostValue)(i,a,{certInfo:n}))),r.props.dispatch((0,g.menuItemClick)(r.props.model,[e,t]))},failCallback:function(e){e.status===L.CERT_STATUS_NOCERT?w.certService.showCertComfirm(i):e.status===L.CERT_STATUS_NOPLGUIN?w.certService.showDownloadComfirm(i,e.pluginPath):e.status===L.CERT_STATUS_TOPESA_NOCERT?w.certService.showNoCertComfirm(i):e.status===L.CERT_STATUS_IWSA_NOCERT?w.certService.showNoIWSACertMessage(i):e.status===L.CERT_STATUS_NOT_FOUND?w.certService.showNotFoundCertComfirm(i):w.certService.showSignFailedMessage(i)}});else{var l=this.getTipsSlot(e);(0,C.interceptActionFn)({model:n,interceptArgs:{id:e,opk:t,triggerEle:l}},(function(e){var t=e.interceptArgs,o=t.id,i=t.opk;r.props.dispatch((0,g.menuItemClick)(n,[o,i]))}))}}},{key:"handleShowFormByTips",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t;n[1]=this.props.model.key,this.props.dispatch(showFormByTips.apply(void 0,n))}},{key:"compareMetaDataWithUserData",value:function(e,t){var r=this,n={};e.forEach((function(e){n[e.get("id")]=e,e.get("items")&&e.get("items").forEach((function(e){n[e.get("id")]=e}))})),this.oldItems=t.map((function(e,t){if(n[e.get("id")]){var r=n[e.get("id")].get("ht");(e=e.update("ht",(function(e){return r}))).get("items")&&(e=e.update("items",(function(e){return e.map((function(e,t){return n[e.get("id")]?e.update("ht",(function(t){return n[e.get("id")].get("ht")})):e}))})))}return e}));var o=this.oldItems;this.oldItems.forEach((function(e){var t=[],n=e.get("items");if(n){n.forEach((function(e){e.get(I.HIDE_TO_MORE)||t.push(e)}));var i=0;o.some((function(t,r){return i=r,t.get(I.ID)===e.get(I.ID)})),t.length&&(o=r.getResult(o,i,t))}})),this.oldItems=o,this.setState({items:o}),this.getCustomItems(o),this.setState({dropDownList:this.getMoreBtns(o,this.props.model.getUserLocale())})}},{key:"componentDidMount",value:function(){var e=(0,k.getPageData)(this.props.model.pageId,E.PERMISSION_PARAMS);e&&this.handlePermission(e),this.removePageDataListener=(0,k.addDataChangeListener)(this.props.model.pageId,E.PERMISSION_PARAMS,this.handlePermission),this.setLastVisibleItemId(),this.addIntersectionObserver(),this.addMutationObserver(),this.addResizeObserve();var t=(0,k.getPageUIState)(this.props.model.pageId).get(this.props.model.getMetaProperty("id"));t&&this.props.model.getMetaProperty(I.SHOW_MORE)&&(this.toolbar=t.get("more"),this.compareMetaDataWithUserData(this.toolbar,this.state.items))}},{key:"componentWillUnmount",value:function(){var e;this.intersectionObserver&&this.intersectionObserver.disconnect(),this.mutationObserver&&this.mutationObserver.disconnect(),null===(e=this.lastItemIntersectionObserver)||void 0===e||e.disconnect(),this.resizeObserver&&this.resizeObserver.removeResizeObserve(),this.removePageDataListener&&this.removePageDataListener()}},{key:"postDataToUIState",value:function(){var e=this;this.oldItems=this.items||this.state.items,this.setState({items:this.oldItems,showCustomPanel:!1},(function(){e.toolbarRef.current&&(u.default.findDOMNode(e.toolbarRef.current).children.forEach((function(t){var r=t.dataset.btnKey;if(r){var n=t.getBoundingClientRect(),o=n.left,i=n.right;0===o&&0===i?delete e.cacheRights[r]:e.cacheRights[r]={left:o,right:i,intersectionRatio:1}}})),e.resetFirstInvisibleItemIndex())})),this.getCustomItems(this.oldItems);var t=(0,s.fromJS)({}),r=0;this.oldItems.forEach((function(e){if(e.get("groupId")===e.get(I.ID)){var n=e.get("items")&&e.get("items").map((function(e){return(0,s.fromJS)({id:e.get(I.ID),ht:e.get("ht"),groupId:e.get("groupId")})}));t=t.set(r++,(0,s.fromJS)({id:e.get(I.ID),ht:e.get("ht"),items:n,groupId:e.get(I.ID)}))}})),(0,k.setPageUIState)(this.props.model,"more",t)}},{key:"componentWillReceiveProps",value:function(e){var t=this,r=(0,h.getComponentDataProperty)(e.model,I.ITEMS,I.ITEMS,!1);if((0,s.is)(r,this.originalItems))this.setState({dropDownList:this.getMoreBtns(this.oldItems,e.model.getUserLocale(),e.model)},(function(){t.setLastVisibleItemId()}));else{this.originalItems=(0,h.getComponentDataProperty)(e.model,I.ITEMS,I.ITEMS,!1);var n=this.filterItemsStruct((0,h.getComponentDataProperty)(e.model,I.ITEMS,I.ITEMS,!1));e.model.getMetaProperty(I.SHOW_MORE)?this.compareMetaDataWithUserData(this.toolbar,this.state.items):(this.oldItems=n,this.setState({items:n,customItems:this.oldItems.filter((function(e,t){return e&&!e.get(I.AS_MORE_BTN)})),dropDownList:this.getMoreBtns(this.oldItems,e.model.getUserLocale())},(function(){t.setLastVisibleItemId()})))}}},{key:"resetObserver",value:function(){var e=this;this.toolbarRef.current&&(this.intersectionObserver.disconnect(),this.lastItemIntersectionObserver.disconnect(),Array.from(u.default.findDOMNode(this.toolbarRef.current).children).forEach((function(t){t.dataset.btnKey?t.dataset.btnKey===e.lastVisibleItemId?e.lastItemIntersectionObserver.observe(t):e.intersectionObserver.observe(t):e.lastItemIntersectionObserver.observe(t)})))}},{key:"renewOldItems",value:function(){this.setState({items:this.oldItems}),this.items&&(this.items=this.oldItems),this.setState({dropDownList:this.getMoreBtns(this.oldItems,this.props.model.getUserLocale())})}},{key:"getVisible",value:function(e,t,r){return r=r||this.props.model,!this.props.getVisible||this.props.getVisible(r,e,t)}},{key:"getLocked",value:function(e,t,r){return r=r||this.props.model,this.props.getLocked(r,e,t)}},{key:"render",value:function(){var e,t=this.props,r=t.model,n=t.toolbarLoading,o=r.getUserLocale(),i=(0,y.getGlobalState)(),a=this.state.items,u=r.getMetaProperty(I.SHOW_MORE);if(!a||0===a.size)return null;var c=(0,h.getCommonStyle)(r),s=this.state.showCustomPanel?this.getCustomPanel():this.getMenus(),p=(0,F.getUIDefaultProps)(V.default.TOOLBARITEM,B.default.COLOR),g=(0,F.getUIDefaultProps)(V.default.TOOLBARITEM,B.default.BACKGROUNG_COLOR),v=Object.assign({},{color:p,backgroundColor:g}),b=(0,F.getUIDefaultProps)(V.default.TOOLBARITEM,B.default.BARITEM_SHOW_TYPE);return void 0!==b&&0!==Number(b)&&this.hasSetColor(a)&&(b=0),l.default.createElement(m.default,G({style:c},this.props.attachData,{ref:this.toolbarRef,"data-baritem-show-type":null!==(e=b)&&void 0!==e?e:0}),this.getCommonBtns(this.state.customItems,r,o,i,n,b),u&&l.default.createElement(D.default,{style:v,key:"toolbar-more",renewOldItems:this.renewOldItems,modifyBtsStatus:this.modifyBtsStatus,id:r.key,dropDownList:this.state.dropDownList,model:r,onDropDownClick:this.handleClick,postDataToUIState:this.postDataToUIState,ref:this.moreRef}),this.state.firstInvisibleItemIndex!==Number.MAX_SAFE_INTEGER&&l.default.createElement("div",{className:(0,f.default)(U.default["more-btn-wrapper"],"kd-cq-control kd-cq-btn kd-cq-toolbar-item"),style:q({},this.state.moreBtnStyle),ref:this.moreBtnRef},l.default.createElement(d.Dropdown,{menu:s,visible:this.state.dropdownVisible||this.state.showCustomPanel,onVisibleChange:this.handleDropdownVisibleChange,trigger:"click",popperClassName:"kd-cq-dropdown kd-cq-dropdown-select-type kd-cq-toolbar-more-dropdown"},l.default.createElement("div",{className:(0,f.default)(U.default["more-btn"],"toolbar-btn-without-theme, kd-btn-bg"),style:v},""))))}},{key:"getSameItem",value:function(e,t){var r=t.get(I._KEY),n=t.get(I.OPERATION_KEY),o=t.get(I.VISIBLE_CTRL),i=t.get(I.ITEMS),a=0;e.some((function(e,r){return a=r,t.get("groupId")===e.get(I.ID)}));var l=e.get(a),u=this.getVisible(l.get(I.ID),l.get(I.VISIBLE_CTRL)),c=this.getVisible(r,o),f=u?c:u;return!f&&i?(t=(t=i.get(0)).merge((0,s.fromJS)({type:"baritem",text:t.get("title"),items:i.size>0?i.delete(0):null})),this.getSameItem(e,t)):{item:t,visible:f,opk:n,id:r}}},{key:"hasSetColor",value:function(e){return!(!e||0===e.size)&&void 0!==e.find((function(e){return e.get(I.COLOR)||e.get(I.BACKGROUND_COLOR)||e.getIn([I.BORDER_STYLE,I.BORDER,I.TOP])||e.getIn([I.BORDER_STYLE,I.BORDER,I.RIGHT])||e.getIn([I.BORDER_STYLE,I.BORDER,I.BOTTOM])||e.getIn([I.BORDER_STYLE,I.BORDER,I.LEFT])}))}},{key:"getCommonBtns",value:function(e,t,r,n,o,i){var a=this;return e.map((function(u,c){var f=u.get(I.ID),d=u.get(I.OPERATE_KEY),p=u.get("replacedOperationKey"),y=u.get(I.VISIBLE_CTRL),m=a.getVisible(f,y);if(u.get("groupId")&&u.get(I.ID)!==u.get("groupId")){var g=a.getSameItem(e,u);u=g.item,m=g.visible,d=g.opk,f=g.id}var v=new b.default(t.pageId,u,n),O=v.getMetaLocaleProperty(I.TEXT),w=u.get(I.LOCK_CTRL),S=u.get(I.OPERATION_STYELE),P=u.get(I.ITEMS),C=0===(null==P?void 0:P.size)&&(2===S||!S&&!d),k=[],E=(0,h.getCommonStyle)(v);P&&s.List.isList(P)&&P.forEach((function(e){var t={};t.key=e.get(I._KEY),t.opk=e.get(I.OPERATION_KEY),t.background=e.get(I.BG),t.title=e.getIn([I.TITLE,r])||e.getIn([I.TITLE,a.props.model.defaultLang])||e.getIn([I.TITLE,"zh_CN"]),t[I.VISIBLE_CTRL]=e.get(I.VISIBLE_CTRL),t[I.LOCK_CTRL]=e.get(I.LOCK_CTRL),e.get(I.HIDE_TO_MORE)||k.push(t)}));var T=a.getLocked(f,w);if(!m||u.get(I.HIDE_TO_MORE)||C)return null;var D=(0,_.default)(v.pageId,u,n);return l.default.cloneElement(D,{model:v,style:E,title:O,key:f+"__$$__"+c,id:f,operationKey:d,replacedOperationKey:p,barItemShowType:i,dropDownItems:k,onClick:function(e){a.handleClick(f,d)},onDropDownClick:a.handleClick,operationStyle:S,getVisible:a.getVisible,getLocked:a.getLocked,locked:T,toolbarLoading:o,containerKey:t.key})}))}},{key:"isSameItem",value:function(e){var t=!0;return!e.get(I.ITEMS)||(e.get(I.OPERATE_KEY)||e.get(I.OPERATION_STYELE))&&2!==e.get(I.OPERATION_STYELE)||(t=!1),t}},{key:"getResult",value:function(e,t,r){var n=e.get(t),o=n.get("groupId");if(e=e.filter((function(e){return e.get("groupId")!==o||e.get(I.ID)===o})),n.get(I.HIDE_TO_MORE)&&r.length)if(this.isSameItem(n)){var i=r.shift();i=i.merge((0,s.fromJS)({type:"baritem",text:i.get("title"),items:r.length?r:null})),e=e.insert(t+1,i)}else r.forEach((function(r,n){r=r.merge((0,s.fromJS)({type:"baritem",text:r.get("title")})),e=e.insert(t+1+n,r)}));return e}},{key:"modifyBtsStatus",value:function(e,t){var r=this.items||this.state.items,n=e.item.get("groupId"),o=0;r.some((function(e,t){return o=t,n===e.get(I.ID)}));var i=r.get(o),a=i.get("items");if(i.get(I.ID)===e.item.get(I.ID)){if(r=r.setIn([o,I.HIDE_TO_MORE],t),a){var l=[];a.forEach((function(e){e.get(I.HIDE_TO_MORE)||l.push(e)})),r=this.getResult(r,o,l)}}else{var u=[];if(r=r.updateIn([o,"items"],(function(r){return r.map((function(r){return r.get(I.ID)===e.item.get(I.ID)&&(r=r.set(I.HIDE_TO_MORE,t)),r.get(I.HIDE_TO_MORE)||u.push(r),r}))})),!this.isSameItem(i)){var c=0;r.get(o).get("items").forEach((function(e,r){e.get(I.HIDE_TO_MORE)===t&&c++})),c!==i.get("items").size||t||(r=r.setIn([o,I.HIDE_TO_MORE],t))}r=this.getResult(r,o,u)}this.setState({dropDownList:this.getMoreBtns(r,this.props.model.getUserLocale())}),this.items=r}},{key:"getCustomItems",value:function(e){var t=e.filter((function(e,t){return e&&!e.get(I.AS_MORE_BTN)}));this.setState({customItems:t})}},{key:"getMoreBtns",value:function(e,t,r){var n=this;e=e.filter((function(e){return e.get(I.ID)===e.get("groupId")}));var o=[],i=e.filter((function(e,t){return e&&e.get(I.AS_MORE_BTN)}));return e.filter((function(e,t){return e&&!e.get(I.AS_MORE_BTN)})).forEach((function(e,i){var a=e.get(I.ID),l=e.get(I.VISIBLE_CTRL),u=e.get(I.ITEMS),c=n.getVisible(a,l,r),s=!0;!u||(e.get(I.OPERATE_KEY)||e.get(I.OPERATION_STYELE))&&2!==e.get(I.OPERATION_STYELE)||(s=!1);var f=n.getLocked(a,e.get(I.LOCK_CTRL),r);c&&(o.push({id:e.get(I.ID),name:e.getIn([I.TEXT,t]),opk:e.get(I.OPERATE_KEY),isChecked:!e.get(I.HIDE_TO_MORE),isClick:s,itemsSize:u&&u.size,item:e,locked:f}),u&&u.forEach((function(e,i){if(n.getVisible(e.get(I._KEY),e.get(I.VISIBLE_CTRL)||T.DEFAULT_CTRL_VISIBLE,r)){var a=n.getLocked(e.get(I._KEY),e.get(I.LOCK_CTRL));o.push({id:e.get(I.ID),name:e.getIn([I.TITLE,t]),opk:e.get(I.OPERATION_KEY),isChecked:!e.get(I.HIDE_TO_MORE),isSonItem:!0,isClick:!0,item:e,locked:a})}})))})),i.forEach((function(e){if(n.getVisible(e.get(I.ID),e.get(I.VISIBLE_CTRL)||T.DEFAULT_CTRL_VISIBLE,r)){var i=e.get(I.ITEMS),a=!0;!i||(e.get(I.OPERATE_KEY)||e.get(I.OPERATION_STYELE))&&2!==e.get(I.OPERATION_STYELE)||(a=!1);var l=n.getLocked(e.get(I.ID),e.get(I.LOCK_CTRL),r);o.push({id:e.get(I.ID),name:e.getIn([I.TEXT,t]),opk:e.get(I.OPERATE_KEY),isChecked:!1,isNotMod:!0,isClick:a,item:e,locked:l}),i&&i.forEach((function(e){if(n.getVisible(e.get(I._KEY),e.get(I.VISIBLE_CTRL)||T.DEFAULT_CTRL_VISIBLE,r)){var i=n.getLocked(e.get(I._KEY),e.get(I.LOCK_CTRL));o.push({id:e.get(I.ID),name:e.getIn([I.TITLE,t]),opk:e.get(I.OPERATION_KEY),isChecked:!1,isSonItem:!0,isNotMod:!0,isClick:!0,item:e,locked:i})}}))}})),o}},{key:"getCombinedBtns",value:function(e,t,r,n,o){return l.default.createElement("div",{style:{display:"flex",alignItems:"center"}},this.getCommonBtns(this.state.customItems,t,r,n,o),l.default.createElement(D.default,{key:"toolbar-more",renewOldItems:this.renewOldItems,modifyBtsStatus:this.modifyBtsStatus,id:t.key,dropDownList:this.state.dropDownList,model:t,onDropDownClick:this.handleClick,postDataToUIState:this.postDataToUIState}))}}],n&&J(r.prototype,n),o&&J(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(l.Component),a.contextTypes={store:c.default.object},i=a))||i)||i)||i);t.default=ne},174939:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(743924),r(205960),r(708896),r(606200),r(534440),r(670864),r(880920),r(836887),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(443616),r(976896),r(297336),r(721300),r(846428),r(336368),r(387912),r(690512),r(660824);var o,i,a=S(r(795520)),l=r(891052),u=S(r(134824)),c=r(439532),s=S(r(385384)),f=S(r(956788)),d=S(r(927576)),p=S(r(696428)),y=r(589200),m=r(559100),g=S(r(84904)),h=r(463108),v=S(r(837428)),b=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=w(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(992984)),O=r(558848);r(439532);function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(w=function(e){return e?r:t})(e)}function S(e){return e&&e.__esModule?e:{default:e}}function P(){return P=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},P.apply(this,arguments)}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,C(n.key),n)}}function C(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function k(e,t,r){return t=I(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return T(e)}(e,E()?Reflect.construct(t,r||[],I(e).constructor):t.apply(e,r))}function E(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(E=function(){return!!e})()}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},I(e)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e,t){return D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},D(e,t)}var j=(o=(0,f.default)(),(0,d.default)(i=o(i=(0,s.default)(i=(0,v.default)(i=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=k(this,t,[e])).updateTipsConfig=r.updateTipsConfig.bind(T(r)),r.state={tipsConfig:null},r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.model,r=e.containerKey,n=(0,O.getTips)(this.props.model);n&&this.updateTipsConfig(t.pageId,r,n)}},{key:"componentWillReceiveProps",value:function(e){var t,r=(0,O.getTips)(this.props.model),n=(0,O.getTips)(e.model);(0,l.is)(r,n)||this.updateTipsConfig(null===(t=e.model)||void 0===t?void 0:t.pageId,e.containerKey,n)}},{key:"updateTipsConfig",value:function(e,t,r){if(r){var n=this.state.tipsConfig;n||(n=(0,O.createTipsConfig)(e,t),this.setState({tipsConfig:n})),(0,O.saveTipsInfo)(n,r)}else this.setState({tipsConfig:null})}},{key:"render",value:function(){var e,t=this.props,r=t.model,n=t.style,o=void 0===n?{}:n,i=t.title,l=t.key,s=t.id,f=t.operationKey,d=t.replacedOperationKey,v=t.dropDownItems,w=t.onClick,S=t.onDropDownClick,_=t.operationStyle,C=t.getVisible,k=t.getLocked,E=t.locked,I=t.locale,T=t.toolbarLoading,D=t.text,j=t.barItemShowType,M=void 0===j?0:j,L=this.state.tipsConfig,R=(0,c.getCurrentTheme)(),A=r&&r.getMetaProperty("opk"),x=(0,c.getCommonStyle)(r)||{},N=(0,c.hasSetBorder)(x),F=x.color===R,B=(0,y.isWhiteColorBg)(x.backgroundColor),V=x.backgroundColor&&x.backgroundColor!==R,U=r&&r.meta&&r.meta.get("type"),W=(0,m.getUIDefaultProps)(U,g.default.GHOST_TYPE_BORDER),H=Object.assign({},o);B&&void 0!==W&&(H.borderTop=H.borderTop||(0,m.getDefaultBorder)(W).borderTop,H.borderBottom=H.borderBottom||(0,m.getDefaultBorder)(W).borderBottom,H.borderLeft=H.borderLeft||(0,m.getDefaultBorder)(W).borderLeft,H.borderRight=H.borderRight||(0,m.getDefaultBorder)(W).borderRight);var z,G,K,q=B&&W,Y=r&&r.getMetaProperty("s")&&r.getMetaProperty("s").get("b")||q,J=Y&&Y.toString().includes("themeColor"),X=null===(e=(0,h.getkeyCodeInfoByOpk)(A))||void 0===e?void 0:e.name;if(E&&0===Number(M)){var Z,Q=B?H.color:null!==(Z=H.backgroundColor)&&void 0!==Z?Z:R,$=(0,b.default)(Q,6),ee=(0,b.getColorByAlpha)($,.6);B?H.color=ee:H.backgroundColor=ee}L&&(z=a.default.createElement(p.default,{tips:L,style:{marginRight:12}}),H.marginRight=null===(G=(0,O.getTips)(this.props.model))||void 0===G||!G.get("showIcon")||null!==(K=(0,O.getTips)(this.props.model))&&void 0!==K&&K.get("isConfirm")?12:0);var te={style:H,key:l,id:s,operationKey:f,replacedOperationKey:d,dropDownItems:v,onClick:w,onDropDownClick:S,operationStyle:_,getVisible:C,getLocked:k,locale:I,barItemShowType:M};return a.default.createElement(u.default,P({},te,this.props.attachData,{title:D||i,locked:E,toolbarLoading:T,hasBorder:N,isThemeColor:F,isWhiteBg:B,isThemeBorder:J,hasNonThemeBg:V,model:r,opk:A,shortCutTips:X,type:U,slot:z}))}}])&&_(r.prototype,n),o&&_(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(a.default.Component))||i)||i)||i)||i);t.default=j},916608:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(241872),r(743924),r(205960),r(846428),r(708896),r(606200),r(534440),r(670864),r(76124),r(836887),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MenuItem=t.MenuGroup=t.CommonFunctionPanel=void 0,r(233696),r(835164),r(693917),r(297336),r(336368),r(880920),r(387912),r(497448),r(997308);var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=m(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(795520)),i=y(r(540900)),a=y(r(671252)),l=y(r(329132)),u=y(r(163456)),c=r(891052),s=y(r(523304)),f=["style","className","Grow","Shrink","AlignSelf","Overflow","data","itemClick","groupMaxItemCount","autoWrap","maxViewHeight","ignoreEmptyGroup"],d=["style","className","data","itemClick"],p=["style","className","data","itemClick"];function y(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},g.apply(this,arguments)}function h(e,t,r){return(t=S(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,S(n.key),n)}}function w(e,t,r){return t&&O(e.prototype,t),r&&O(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function S(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function P(e,t,r){return t=k(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _(e)}(e,C()?Reflect.construct(t,r||[],k(e).constructor):t.apply(e,r))}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(C=function(){return!!e})()}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}function E(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I(e,t)}function I(e,t){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},I(e,t)}var T=t.CommonFunctionPanel=function(e){function t(e){var r;return b(this,t),(r=P(this,t,[e])).state={data:(0,c.List)()},r}return E(t,e),w(t,[{key:"getGroupEle",value:function(e){return e?o.default.createElement(D,{data:e,itemClick:this.props.itemClick}):null}},{key:"calGroups",value:function(e){console.warn("CommonFunctionPanel: calGroups...");var t=e.data,r=e.groupMaxItemCount;if(t&&t.size>0){var n,o,i,a,l,u,s=(0,c.List)();return t.forEach((function(t){if(n=t.get("items"),r&&r>0&&n&&n.size>r){l=(0,c.Map)({group:t.get("group")}),u=(0,c.List)(),o=Math.ceil(n.size/r);for(var f=0;f<o;f++)a=(i=f*r)+r,u=u.push(n.slice(i,a));l=l.set("items",u),s=s.push(l)}else{n&&n.size<1&&!1!==e.ignoreEmptyGroup||(s=s.push((0,c.Map)({group:t.get("group"),items:(0,c.List)([n])})))}})),s}return t}},{key:"componentWillReceiveProps",value:function(e){(0,c.is)(this.props.data,e.data)&&this.props.groupMaxItemCount===e.groupMaxItemCount&&this.props.autoWrap===e.autoWrap||this.setState({data:this.calGroups(e)})}},{key:"componentDidMount",value:function(){this.props.data&&this.props.data.size>0&&this.setState({data:this.calGroups(this.props)})}},{key:"render",value:function(){var e=this,t=this.props,r=t.style,n=t.className,i=t.Grow,c=t.Shrink,s=t.AlignSelf,d=(t.Overflow,t.data,t.itemClick,t.groupMaxItemCount,t.autoWrap),p=t.maxViewHeight,y=(t.ignoreEmptyGroup,v(t,f)),m=(0,a.default)(h(h(h({},u.default.commonfunctionpanel,!0),u.default.autoWrap,d),n,n),(0,l.default)({Grow:i,Shrink:c,AlignSelf:s})),b=this.state.data&&this.state.data.map((function(t){return e.getGroupEle(t)}));return void 0!==p&&(r=Object.assign({},r,{maxHeight:p+"vh"})),o.default.createElement("div",g({className:m,style:r},y),o.default.Children.toArray(b))}}]),t}(o.Component);T.propTypes={style:i.default.object,className:i.default.string,Grow:i.default.number,Shrink:i.default.number},T.defaultProps={data:(0,c.List)(),autoWrap:!0,groupMaxItemCount:6,ignoreEmptyGroup:!0};t.default=T;var D=t.MenuGroup=function(e){function t(e){var r;return b(this,t),(r=P(this,t,[e])).itemClick=r.itemClick.bind(_(r)),r}return E(t,e),w(t,[{key:"itemClick",value:function(e){var t=this.props.data.getIn(["group","id"]);this.props.itemClick&&this.props.itemClick({groupId:t,itemId:e})}},{key:"getMenuItemEle",value:function(e,t,r){var n=this;return e&&e.size>0?o.default.createElement("div",{className:(0,a.default)(u.default.subgroup,h(h({},u.default.item,r!==t-1),u.default["item-first"],!0))},e.map((function(e,t){return o.default.createElement(j,{key:t,className:t>0?u.default["item-title"]:"",data:e,itemClick:n.itemClick})}))):null}},{key:"render",value:function(){var e=this,t=this.props,r=t.style,n=t.className,i=t.data,l=(t.itemClick,v(t,d)),c=i.getIn(["group","caption"]),f=i.get("items"),p=f&&f.map((function(t,r){return e.getMenuItemEle(t,f.size,r)}));return o.default.createElement("div",g({style:r,className:(0,a.default)(n,u.default.menugroup)},l),o.default.createElement(s.default,null,o.default.createElement("span",{title:c,className:u.default.grouptitle},c)),o.default.createElement("div",{className:u.default.groupcontainer},o.default.Children.toArray(p)))}}]),t}(o.Component);D.defaultProps={data:(0,c.Map)()};var j=t.MenuItem=function(e){function t(e){var r;return b(this,t),(r=P(this,t,[e])).itemClick=r.itemClick.bind(_(r)),r}return E(t,e),w(t,[{key:"itemClick",value:function(){this.props.itemClick&&this.props.itemClick(this.props.data.get("id"))}},{key:"render",value:function(){var e=this.props,t=e.style,r=e.className,n=e.data,i=(e.itemClick,v(e,p)),l=n.get("caption");return o.default.createElement(s.default,null,o.default.createElement("div",g({title:l,style:t,className:(0,a.default)(r,u.default.menuitem),onClick:this.itemClick},i),l))}}]),t}(o.Component);j.defaultProps={data:(0,c.Map)()}},33572:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(743924),r(205960),r(846428),r(708896),r(606200),r(670864),r(76124),r(387912),r(836887),r(78504),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(241872),r(693917),r(297336),r(336368),r(880920),r(86744);var o=O(r(795520)),i=O(r(540900)),a=O(r(369396)),l=O(r(671252)),u=r(211152),c=O(r(329132)),s=r(773088),f=r(703188),d=r(738704),p=r(748456),y=r(218652),m=O(r(472792)),g=r(674260),h=r(868256),v=O(r(980652)),b=["id","pageId","sourceCtrl","isGridCell","flexInfo","tryCloseFlexible","closeFlexible","clickCloseFlexible","children","style","handleClick","className","Direction","Wrap","Overflow","Grow","Shrink","AlignSelf","AlignContent","AlignItems","JustifyContent","Collapsible","Name","defaultCollapse","isSelected"];function O(e){return e&&e.__esModule?e:{default:e}}function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},w.apply(this,arguments)}function S(e,t,r){return(t=C(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,C(n.key),n)}}function C(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function k(e,t,r){return t=I(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return T(e)}(e,E()?Reflect.construct(t,r||[],I(e).constructor):t.apply(e,r))}function E(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(E=function(){return!!e})()}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},I(e)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e,t){return D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},D(e,t)}var j=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=k(this,t,[e])).handleClick=function(){r.props.clickCloseFlexible()},r.enterToClose=function(){var e=r.flexPanlRef.current&&r.flexPanlRef.current.querySelector("input:focus");e&&e.blur(),setTimeout((function(){r.props.tryCloseFlexible()}))},r.focusToNextField=function(e,t){var n=r.flexPanlRef.current.querySelectorAll('[data-field-item="true"] [data-shortcut]'),o=Array.prototype.slice.call(n,0),i=o.indexOf(e),a=i;t&&0===i||!t&&i===o.length-1?(e.blur(),setTimeout((function(){r.props.tryCloseFlexible()}))):a=t?i-1:i+1;var l=o[a];l&&l.focus()},r.handleKeyDown=function(e){e.stopPropagation();var t=(0,g.getData)(h.KEY_ADVANCE_SHORTCUT_INFO)||{};switch(e.keyCode){case f.KEYS.ENTER:var n;if("true"===String(null===(n=e.target)||void 0===n||null===(n=n.dataset)||void 0===n?void 0:n.baseDataEnterToQuery))return;t.enterToNextField?r.focusToNextField(e.target,e.shiftKey):r.enterToClose();break;case f.KEYS.TAB:e.preventDefault(),r.focusToNextField(e.target,e.shiftKey);break;case f.KEYS.ESC:r.props.tryCloseFlexible();var o=(0,y.getFormConfig)(r.props.pageId)((0,u.getGlobalState)())||{},i=o.formId,a=o.billFormId||"";(0,g.setData)(h.KEY_UI_ACTION,{appId:o.appId,formId:i,billFormId:a,tableName:"shortcut_key",shortcutKey:"Esc",methodName:""}),e.stopPropagation()}},r.handleClickOutside=function(e,t){if(t.target!==r.flexibleCantainerRef.current)r.props.tryCloseFlexible();else{var n=r.flexPanlRef.current;n&&n.focus()}},r.handleFocus=function(e){r.lastFocuedDom=e.target},r.state={located:!1,flexPanelDidMount:!1},r.clickPosition={isInFlexibleField:!1},r.setFlexibleLocation=r.setFlexibleLocation.bind(T(r)),r.tryCloseFlexible=r.tryCloseFlexible.bind(T(r)),r.closeFlexible=r.closeFlexible.bind(T(r)),r.handleMouseDown=r.handleMouseDown.bind(T(r)),r.lastFocuedDom=null,r.flexPanlRef=o.default.createRef(),r.flexibleCantainerRef=o.default.createRef(),r}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D(e,t)}(t,e),r=t,(n=[{key:"tryCloseFlexible",value:function(){this.props.tryCloseFlexible()}},{key:"closeFlexible",value:function(){this.props.closeFlexible()}},{key:"setFlexibleLocation",value:function(e){this.setState({location:e,located:!0})}},{key:"componentWillMount",value:function(){var e=this,t=this.props,r=t.pageId,n=t.id,o=t.sourceCtrl;this.getLocationHandler=(0,d.subscribeControlMethod)(r,o,"setFlexibleLocation",(function(t){void 0!==t&&e.setFlexibleLocation(t)})),this.tryCloseReceiveHandler=(0,d.subscribeControlMethod)(r,n,"tryCloseFlexible",(function(t){e.tryCloseFlexible()}))}},{key:"handleMouseDown",value:function(){this.clickPosition.isInFlexibleField=!0}},{key:"render",value:function(){var e=this.props,t=(e.id,e.pageId,e.sourceCtrl,e.isGridCell,e.flexInfo,e.tryCloseFlexible,e.closeFlexible,e.clickCloseFlexible,e.children),r=e.style,n=(e.handleClick,e.className),i=e.Direction,a=e.Wrap,u=e.Overflow,f=e.Grow,d=e.Shrink,p=e.AlignSelf,y=e.AlignContent,g=e.AlignItems,h=e.JustifyContent,O=(e.Collapsible,e.Name,e.defaultCollapse,e.isSelected,P(e,b)),_=Object.assign({},r,this.state.location,{height:r&&r.height,maxHeight:"366px"});!1===this.state.located&&(_.top="-999px");var C=(0,l.default)(S(S({},v.default.flexiblePanel,!0),n,n),(0,c.default)({Direction:i,Wrap:a,Overflow:u,Grow:f,Shrink:d,AlignSelf:p,AlignContent:y,AlignItems:g,JustifyContent:h}));return o.default.createElement(s.DisableLazyLoad,null,o.default.createElement("div",w({ref:this.flexibleCantainerRef,"data-flexible":!0,"data-focus-container":!0,"data-ctrl-type":"flexiblepanel",onKeyDown:this.handleKeyDown},O,{className:C,style:_,onMouseDown:this.handleMouseDown,onFocus:this.handleFocus}),this.state.flexPanelDidMount?o.default.createElement(m.default,w({},O,{onCLickOutside:this.handleClickOutside,forwardRef:this.flexPanlRef}),t):t))}},{key:"componentDidMount",value:function(){var e=this,t=this.props,r=t.pageId,n=t.id,o=t.sourceCtrl,i=t.dispatch,l=t.flexInfo;(0,d.setPageData)(r,[o,"isFlexFieldPanelOpen"],!0),this.setState({flexPanelDidMount:!0});var u={flexDisplayed:!0,flexId:n,flexDOM:a.default.findDOMNode(this),clickPosition:this.clickPosition};!1===(0,d.getPageData)(r,[o,"isFlexfieldAlive"])?this.props.isGridCell?i((0,y.convertAppModelFunctionAction)((0,p.removeFlexible)(r,n,l.rowKey,l.colId))):i((0,y.convertAppModelFunctionAction)((0,p.removeFlexible)(r,n))):(0,d.setPageData)(r,[o,"getFlexibleLocation"],u),this.flexPanlRef.current&&setTimeout((function(){var t=e.flexPanlRef.current.querySelector("input:first-child");t&&t.focus()}),0)}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.pageId,r=e.sourceCtrl;(0,d.setPageData)(t,[r,"noticeFlexDisplayedStatus"],!1),(0,d.setPageData)(t,[r,"isFlexFieldPanelOpen"],!1),(0,d.deletePageData)(t,["flexibleRowInfo"]),this.getLocationHandler&&this.getLocationHandler(),this.tryCloseReceiveHandler&&this.tryCloseReceiveHandler()}},{key:"componentDidUpdate",value:function(e,t){var r=this,n=this.flexPanlRef.current;e.children!==this.props.children&&setTimeout((function(){n&&n.contains(r.lastFocuedDom)?r.lastFocuedDom&&r.lastFocuedDom.focus():n&&n.focus()}),0)}}])&&_(r.prototype,n),i&&_(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(o.default.Component);j.propTypes={style:i.default.object,className:i.default.string,Direction:i.default.string,Grow:i.default.number,Shrink:i.default.number,Overflow:i.default.string,Wrap:i.default.bool,handleClick:i.default.func};t.default=j},829164:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(622676),r(505684),r(241872),r(323784),r(743924),r(693917),r(205960),r(976896),r(846428),r(969e3),r(606200),r(534440),r(76152),r(76124),r(633768),r(690512),r(78504),r(776512),r(997308),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(305092),r(233696),r(835164),r(721300),r(387912),r(86744);var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=m(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(795520)),i=y(r(671252)),a=r(790832),l=y(r(978276)),u=y(r(972652)),c=y(r(528304)),s=y(r(273820)),f=r(331428),d=r(358524),p=["address","apiKey","containerStyle","dataPageId","isLocked","labelClassName","labelStyle","mapKey","selectClassName","selectStyle","inputClassName","inputStyle","location","required","update","poiType","radius","slot","locale","clickTipsLink","showFormByTips"];function y(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){var o;return o=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==n(o)?o:String(o))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function w(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var S=["fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange"];t.default=function(e){var t=e.address,r=e.apiKey,n=e.containerStyle,y=(e.dataPageId,e.isLocked),m=e.labelClassName,g=e.labelStyle,O=e.mapKey,P=(e.selectClassName,e.selectStyle),_=(e.inputClassName,e.inputStyle,e.location),C=e.required,k=e.update,E=(e.poiType,e.radius,e.slot),I=(e.locale,e.clickTipsLink,e.showFormByTips,w(e,p),b((0,o.useState)([]),2)),T=I[0],D=I[1],j=b((0,o.useState)(null),2),M=j[0],L=j[1],R=b((0,o.useState)(!1),2),A=R[0],x=R[1],N=(0,o.useRef)(),F=(0,o.useRef)();(0,o.useEffect)((function(){if(_&&_.lat&&_.lng){var e={location:h({},_),ad:t};L(e),setTimeout((function(){F.current&&F.current.centerAndZoom(_)}),2e3)}}),[_,t]),(0,o.useEffect)((function(){var e=function(){x(!A)};return S.forEach((function(t){document.addEventListener(t,e)})),function(){S.forEach((function(t){document.removeEventListener(t,e)}))}}),[A]);var B=function(e){var t,r,n={la:null==e||null===(t=e.point)||void 0===t?void 0:t.lat,lo:null==e||null===(r=e.point)||void 0===r?void 0:r.lng,ad:(0,d.getAd)(e)||(null==e?void 0:e.title),mapData:{detail:null==e?void 0:e.address,city:null==e?void 0:e.city,province:null==e?void 0:e.province,title:(null==e?void 0:e.name)||(null==e?void 0:e.title),id:null==e?void 0:e.uid}};k&&k(n)},V=(0,a.debounce)((function(e){F.current.asyncSearch(e)}),500),U=(0,i.default)(s.default.scale,{"kdfont kdfont-quanping":!A,"kdfont kdfont-guanbiquanping":A}),W=(0,i.default)("kdfont kdfont-dingwei3",s.default.location),H=(0,i.default)(s.default["geo-label"],m),z=(0,i.default)(s.default["flex-layout-right"],v(v(v({},s.default["locked-geo"],y&&M),s.default["select-underline"],!0),s.default["select-all-border"],!1));return o.default.createElement("div",{className:(0,i.default)("kd-cq-field kd-cq-geographic",s.default["geographic-location"]),style:n},o.default.createElement("div",{className:s.default["flex-layout"]},o.default.createElement("label",{className:H,style:g},(0,f.getLangMsg)("GeoPoint.key0001"),C&&o.default.createElement("span",{className:(0,i.default)(s.default["required-icon"],"require-icon")},"*")),E,o.default.createElement(u.default,{disabled:y,className:z,style:P,options:T,value:M&&M.ad||"",onChange:function(e){void 0===e&&(L(null),D([]))},onSearch:function(e){if(!e||!F.current)return D([]),void L(null);V(e)},onSelect:function(e){if(e&&!y){var t=T.find((function(t){return t.id===e}));t&&B(t)}}})),o.default.createElement("div",{className:s.default["map-container"],ref:N},o.default.createElement(c.default,{apiKey:r,locked:y,mapKey:O,ref:F,showSearchBox:!1,getSearchResults:function(e){var t=e.map((function(e){return{id:e.uid,name:e.title,address:e.address,province:e.province,city:e.city,point:e.point}}));D(t)},onDragEnd:function(e){var t;if(e&&F.current){var r=null===(t=e.surroundingPois)||void 0===t?void 0:t[0];r&&B(r)}}}),o.default.createElement("a",{className:U,onClick:function(e){l.default.toggle(N.current)}}),o.default.createElement("a",{className:W})))}},788756:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(622676),r(505684),r(241872),r(323784),r(743924),r(693917),r(205960),r(976896),r(846428),r(969e3),r(606200),r(534440),r(76152),r(76124),r(633768),r(690512),r(78504),r(776512),r(997308),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(9692),r(305092),r(233696),r(721300),r(387912),r(86744);var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=m(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(795520)),i=y(r(671252)),a=r(790832),l=y(r(978276)),u=y(r(972652)),c=y(r(857004)),s=y(r(273820)),f=r(331428),d=r(358524),p=["address","containerStyle","dataPageId","id","isLocked","labelClassName","labelStyle","selectClassName","selectStyle","inputClassName","inputStyle","license","location","mapKey","required","update","poiType","radius","slot","locale","clickTipsLink","showFormByTips"];function y(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){var o;return o=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==n(o)?o:String(o))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function w(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var S=["fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange"];t.default=function(e){var t=e.address,r=e.containerStyle,n=(e.dataPageId,e.id),y=e.isLocked,m=e.labelClassName,g=e.labelStyle,O=(e.selectClassName,e.selectStyle),P=(e.inputClassName,e.inputStyle,e.license),_=e.location,C=e.mapKey,k=e.required,E=e.update,I=e.poiType,T=void 0===I?"":I,D=e.radius,j=void 0===D?500:D,M=e.slot,L=(e.locale,e.clickTipsLink,e.showFormByTips,w(e,p),b((0,o.useState)([]),2)),R=L[0],A=L[1],x=b((0,o.useState)(null),2),N=x[0],F=x[1],B=b((0,o.useState)(!1),2),V=B[0],U=B[1],W=(0,o.useRef)(),H=(0,o.useRef)(),z=(0,o.useRef)(!1);(0,o.useEffect)((function(){if(_&&_.lat&&_.lng){var e={location:h({},_),ad:t};F(e)}}),[_,t]),(0,o.useEffect)((function(){var e=function(){U(!V)};return S.forEach((function(t){document.addEventListener(t,e)})),function(){S.forEach((function(t){document.removeEventListener(t,e)}))}}),[V]),(0,o.useEffect)((function(){y&&N&&setTimeout((function(){return G("setCenter",N.location.lng,N.location.lat)}),1e3)}),[y&&N]);var G=function(e){var t;if(H.current){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];(t=H.current)[e].apply(t,n)}},K=(0,a.debounce)((function(e){G("search",{keyword:e,cb:q})}),500),q=function(e,t){if("complete"===e&&"OK"===t.info){var r=t.poiList.pois;A(r)}else console.warn(": ".concat(e," - ").concat(t.info))},Y=function(e,t){if(!y)if(t&&"OK"===t.info){var r=t.poiList.pois;F(r[0])}else console.warn("")},J=function(){z.current=!1,A([])},X=(0,i.default)(s.default.scale,{"kdfont kdfont-quanping":!V,"kdfont kdfont-guanbiquanping":V}),Z=(0,i.default)("kdfont kdfont-dingwei3",s.default.location),Q=(0,i.default)(s.default["geo-label"],m),$=(0,i.default)(s.default["flex-layout-right"],v(v(v({},s.default["locked-geo"],y&&N),s.default["select-underline"],!0),s.default["select-all-border"],!1));return o.default.createElement("div",{className:(0,i.default)("kd-cq-field kd-cq-geographic",s.default["geographic-location"]),style:r},o.default.createElement("div",{className:s.default["flex-layout"]},o.default.createElement("label",{className:Q,style:g},(0,f.getLangMsg)("GeoPoint.key0001"),k&&o.default.createElement("span",{className:(0,i.default)(s.default["required-icon"],"require-icon")},"*")),M,o.default.createElement(u.default,{disabled:y,className:$,style:O,options:R,value:N&&N.ad||"",onChange:function(e){void 0===e&&(F(null),A([]))},onSearch:function(e){e&&K(e)},onSelect:function(e){if(e&&!y){var t=R.find((function(t){return t.id===e}));if(t){F(t),function(e){var t,r,n={la:null==e||null===(t=e.location)||void 0===t?void 0:t.lat,lo:null==e||null===(r=e.location)||void 0===r?void 0:r.lng,ad:(0,d.getAd)({province:null==e?void 0:e.pname,city:null==e?void 0:e.cityname,district:null==e?void 0:e.adname,address:null==e?void 0:e.address,name:null==e?void 0:e.name}),mapData:{detail:null==e?void 0:e.address,city:null==e?void 0:e.cityname,province:null==e?void 0:e.pname,title:null==e?void 0:e.name,id:null==e?void 0:e.id,district:null==e?void 0:e.adname}};E&&E(n)}(t);var r=t.location;z.current=!0,G("setCenter",r.lng,r.lat)}}}})),o.default.createElement("div",{className:s.default["map-container"],ref:W},o.default.createElement(c.default,{id:n,ref:H,license:P,dragEnable:!y,mapKey:C,onMoveEnd:function(){var e=H.current&&H.current.getCenter();e&&!y&&(z.current?J():(G("searchNearBy",{center:[e.lng,e.lat],type:T,radius:j,cb:Y}),z.current=!1))},showSearchBox:!1}),o.default.createElement("a",{className:X,onClick:function(e){l.default.toggle(W.current)}}),o.default.createElement("a",{className:Z})))}},376208:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(622676),r(233696),r(505684),r(241872),r(323784),r(743924),r(693917),r(205960),r(976896),r(846428),r(969e3),r(606200),r(534440),r(76152),r(76124),r(633768),r(690512),r(78504),r(776512),r(997308),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(305092),r(835164),r(721300),r(387912),r(86744);var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(795520)),i=d(r(671252)),a=r(790832),l=d(r(972652)),u=d(r(118536)),c=d(r(273820)),s=r(331428),f=(r(358524),["id","pageId","address","containerStyle","dataPageId","isLocked","labelClassName","labelStyle","selectClassName","selectStyle","inputClassName","inputStyle","license","location","mapKey","required","update","poiType","radius","slot","locale","clickTipsLink","showFormByTips"]);function d(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t,r){var o;return o=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==n(o)?o:String(o))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}t.default=function(e){var t=e.id,r=e.pageId,n=e.address,d=e.containerStyle,p=(e.dataPageId,e.isLocked),y=e.labelClassName,v=e.labelStyle,O=(e.selectClassName,e.selectStyle),w=(e.inputClassName,e.inputStyle,e.license),S=e.location,P=e.mapKey,_=e.required,C=e.update,k=e.poiType,E=void 0===k?"":k,I=e.radius,T=void 0===I?500:I,D=e.slot,j=e.locale,M=void 0===j?"zh_CN":j,L=(e.clickTipsLink,e.showFormByTips,b(e,f),h((0,o.useState)([]),2)),R=L[0],A=L[1],x=h((0,o.useState)(null),2),N=x[0],F=x[1],B=(0,o.useRef)(),V=(0,o.useRef)(),U=(0,o.useRef)(!1);(0,o.useEffect)((function(){if(S&&S.lat&&S.lng){var e={location:m({},S),ad:n};F(e)}}),[S,n]),(0,o.useEffect)((function(){p&&N&&setTimeout((function(){return W("setCenter",N.location.lng,N.location.lat)}),1e3)}),[p,N]);var W=function(e){var t;if(V.current){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];(t=V.current)[e].apply(t,n)}},H=(0,a.debounce)((function(e){W("search",{keyword:e,cb:z})}),500),z=function(e,t){if("OK"===t){var r=e.map((function(e){var t,r;return{id:e.place_id,address:e.formatted_address,name:e.name,point:{lat:null===(t=e.geometry)||void 0===t||null===(t=t.location)||void 0===t?void 0:t.lat(),lng:null===(r=e.geometry)||void 0===r||null===(r=r.location)||void 0===r?void 0:r.lng()}}}));A(r)}else console.warn(": ".concat(t))},G=function(e,t){p||(e&&"OK"===t?F(e[0]):console.warn(""))},K=function(){U.current=!1,A([])},q=(0,i.default)(c.default["geo-label"],y),Y=(0,i.default)(c.default["flex-layout-right"],g(g(g({},c.default["locked-geo"],p&&N),c.default["select-underline"],!0),c.default["select-all-border"],!1));return o.default.createElement("div",{className:(0,i.default)("kd-cq-field kd-cq-geographic",c.default["geographic-location"]),style:d},o.default.createElement("div",{className:c.default["flex-layout"]},o.default.createElement("label",{className:q,style:v},(0,s.getLangMsg)("GeoPoint.key0001"),_&&o.default.createElement("span",{className:(0,i.default)(c.default["required-icon"],"require-icon")},"*")),D,o.default.createElement(l.default,{disabled:p,className:Y,style:O,options:R,value:N&&N.ad||"",onChange:function(e){void 0===e&&(F(null),A([]))},onSearch:function(e){e&&H(e)},onSelect:function(e){if(e&&!p){var t=R.find((function(t){return t.id===e}));t&&(F(t),function(e){var t={la:e.point.lat,lo:e.point.lng,ad:e.address,mapData:{detail:e.address,title:e.name,id:e.id}};C&&C(t)}(t),W("setCenter",t.point.lng,t.point.lat))}}})),o.default.createElement("div",{className:c.default["map-container"],ref:B},o.default.createElement(u.default,{ref:V,id:t,pageId:r,license:w,dragEnable:!p,mapKey:P,mapOptions:{zoomControl:!1},onMoveEnd:function(){var e=V.current&&V.current.getCenter();e&&!p&&(U.current?K():(W("nearbySearch",{center:[e.lng,e.lat],type:E,radius:T,cb:G}),U.current=!1))},locale:M,showSearchBox:!1})))}},972652:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(743924),r(606200),r(534440),r(387912),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(835164),r(721300);var o=s(r(795520)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=c(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(390716)),a=r(331428),l=s(r(671252)),u=s(r(273820));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.className,r=e.disabled,n=e.options,c=void 0===n?[]:n,s=e.showSearch,f=e.style,d=e.value,p=e.onChange,y=e.onSearch,m=e.onSelect,g=o.default.createElement("div",{className:(0,l.default)("kd-cq-empty-description kd-cq-empty-geographic",u.default["no-result"])},o.default.createElement("span",null,(0,a.getLangMsg)({key:"Select.key0011"})));return o.default.createElement(i.default,{allowClear:d&&d.length>0&&!r,className:t,disabled:r,style:f,showSearch:s,value:d,onChange:p,onSearch:y,onSelect:m,filterOption:!1,notFoundContent:g},c.map((function(e){return o.default.createElement(i.Option,{key:e.id,value:e.id,title:e.address||e.name},e.name)})))}},832944:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(622676),r(233696),r(241872),r(743924),r(205960),r(846428),r(336368),r(708896),r(969e3),r(606200),r(534440),r(76152),r(670864),r(76124),r(836887),r(78504),r(776512),r(997308),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(835164),r(297336),r(880920),r(387912),r(497448);var o=P(r(795520)),i=P(r(369396)),a=P(r(540900)),l=P(r(671252)),u=S(r(211152)),c=P(r(329132)),s=P(r(30276)),f=r(967408),d=S(r(652680)),p=r(331428),y=P(r(882976)),m=P(r(203799)),g=P(r(329088)),h=P(r(139224));r(110296);var v=P(r(796452)),b=["style","className","AlignSelf","Grow","Shrink","canEdit","onLayoutChange","layout","cols","rowHeight","onBarAddCardClick","onBarCancelEdit","layoutMargin","containerPadding","onBarEditEnd","pageId","state","onItemDeleteClick","refreshForm","refreshId","setDefaultVisible","isSetDefault","rootPageId","homePageSchemeData","id","showEditTool","hideSchemeEdit","hideSchemeSwitch"],O=["item","pageId","id","state","canEdit","cardId","onItemDeleteClick","style","className","children","releasedPageIds","addReleasePageId","refreshForm","refreshId","rootPageId"];function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(w=function(e){return e?r:t})(e)}function S(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=w(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}function P(e){return e&&e.__esModule?e:{default:e}}function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_.apply(this,arguments)}function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){I(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function I(e,t,r){return(t=M(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,M(n.key),n)}}function j(e,t,r){return t&&D(e.prototype,t),r&&D(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function M(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function L(e,t,r){return t=A(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return x(e)}(e,R()?Reflect.construct(t,r||[],A(e).constructor):t.apply(e,r))}function R(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(R=function(){return!!e})()}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F(e,t)}function F(e,t){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},F(e,t)}var B=(0,d.WidthProvider)(d.default),V=function(e){function t(e){var r;return T(this,t),(r=L(this,t,[e])).onBarSetDefault=function(){r.setState({isSetDefault:!r.state.isSetDefault})},r.state={showAddPanel:!1,isSetDefault:!1,scrollTop:0},r.onLayoutChange=r.onLayoutChange.bind(x(r)),r.onItemDeleteClick=r.onItemDeleteClick.bind(x(r)),r.addReleasePageId=r.addReleasePageId.bind(x(r)),r.onDragStartCallback=r.onDragStartCallback.bind(x(r)),r.adjustOffsetOfPanel=r.adjustOffsetOfPanel.bind(x(r)),r.resizeListener=r.resizeListener.bind(x(r)),r.onBarAddCardHover=r.onBarAddCardHover.bind(x(r)),r.onBarAddCardOver=r.onBarAddCardOver.bind(x(r)),r.onBarAddCardClick=r.onBarAddCardClick.bind(x(r)),r._releasedPageIds=[],r._preHiddend=!0,r._resizeObserve=void 0,r._preScrollTop=0,r}return N(t,e),j(t,[{key:"generateDOM",value:function(e){if(e&&e.length>0){var t=this;return e.map((function(e){return o.default.createElement(U,{key:e.i,id:t.props.id,cardId:e.i,item:e,pageId:t.props.pageId,state:t.props.state,canEdit:t.props.canEdit,onItemDeleteClick:t.onItemDeleteClick,addReleasePageId:t.addReleasePageId,releasedPageIds:t._releasedPageIds,refreshForm:t.props.refreshForm,refreshId:t.props.refreshId,rootPageId:t.props.rootPageId})}))}}},{key:"onLayoutChange",value:function(e){this.props.onLayoutChange&&this.props.onLayoutChange(e)}},{key:"onItemDeleteClick",value:function(e){this.props.onItemDeleteClick&&this.props.onItemDeleteClick(e)}},{key:"onBarAddCardClick",value:function(e){e.stopPropagation(),this.props.onBarAddCardClick&&this.props.onBarAddCardClick()}},{key:"onBarCancelEdit",value:function(e){e.stopPropagation(),this.props.onBarCancelEdit&&this.props.onBarCancelEdit(),this.setState({isSetDefault:!1})}},{key:"onBarEditEnd",value:function(e){e.stopPropagation(),this.props.onBarEditEnd&&this.props.onBarEditEnd(this.state.isSetDefault)}},{key:"getBottomPanel",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=this._reactGridEle.scrollTop;this._preScrollTop=r;var n={bottom:"-"+r+"px"},i=(0,l.default)(I(I({},v.default["default-wrapper"],!0),v.default["default-wrapper-open"],this.state.isSetDefault));return o.default.createElement("div",{style:n,className:v.default.bottombarpanel,ref:function(t){return e._reactGridToolbar=t}},t?o.default.createElement("div",{className:v.default["left-container"]},o.default.createElement("span",{className:(0,l.default)(v.default["default-text"])},(0,p.getLangMsg)({key:"gridContainer.key0009"})),o.default.createElement("div",{className:i,onClick:this.onBarSetDefault},o.default.createElement("div",{className:v.default["default-inner"]}))):o.default.createElement("div",{className:v.default["left-container"],onMouseEnter:this.onBarAddCardHover,onMouseLeave:this.onBarAddCardOver}),o.default.createElement("div",{className:(0,l.default)(v.default.newaddcard,I({},v.default["newaddcard-show"],this.state.showAddPanel)),onMouseEnter:this.onBarAddCardHover,onMouseLeave:this.onBarAddCardOver},o.default.createElement("i",{className:(0,l.default)("kdfont kdfont-tianjiaqiapian",v.default["newaddcard-flag"],v.default["newaddcard-item"]),onClick:this.onBarAddCardClick}),o.default.createElement("span",{className:v.default["newaddcard-item"],onClick:this.onBarAddCardClick},(0,p.getLangMsg)({key:"gridContainer.key0010"})),o.default.createElement("div",{className:(0,l.default)(v.default["popup-panel"],I({},v.default["ap-show"],this.state.showAddPanel)),onClick:this.onBarAddCardClick})),o.default.createElement("div",{className:v.default.editcontainer},o.default.createElement("div",{className:(0,l.default)(v.default.button,v.default["edit-cancel"]),onClick:this.onBarCancelEdit.bind(this)},(0,p.getLangMsg)({key:"gridContainer.key0011"})),o.default.createElement("div",{className:(0,l.default)(v.default.button,v.default["edit-end"],"kd-theme kd-grid-btn"),onClick:this.onBarEditEnd.bind(this)},(0,p.getLangMsg)({key:"gridContainer.key0007"}))))}},{key:"addReleasePageId",value:function(e){void 0!==e&&this._releasedPageIds.push(e)}},{key:"componentWillUnmount",value:function(){this._resizeObserve&&(this._resizeObserve.removeResizeObserve(),this._resizeObserve=null)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.canEdit,r=e.canEdit;t!==r&&(!0===r?(this.bindEvent(),this.isCompatibleModel(e)&&this._reactGridEle&&(this._reactGridEle.scrollTop=0)):(this.unBindEvnet(),this._reactGridEle&&(this._reactGridEle.scrollTop=0),!0===this.state.showAddPanel&&this.setState({showAddPanel:!1})))}},{key:"componentDidMount",value:function(){this._reactGridEle&&(this._resizeObserve=(0,h.default)(this._reactGridEle,this.resizeListener))}},{key:"resizeListener",value:function(e){e&&e.hide?this._preHiddend=!0:(this._preHiddend,this._preHiddend=!1,this.props.canEdit&&this._reactGridEle.scrollTop!==this._preScrollTop&&(this.forceUpdate(),y.default.warn("grid container==> forceUpdate")))}},{key:"forceWindowResize",value:function(){var e=document.createEvent("Event");e.initEvent("resize",!0,!0),window.dispatchEvent(e)}},{key:"bindEvent",value:function(){this._reactGridEle&&this._reactGridEle.addEventListener("scroll",this.adjustOffsetOfPanel,!0)}},{key:"unBindEvnet",value:function(){this._reactGridEle&&this._reactGridEle.removeEventListener("scroll",this.adjustOffsetOfPanel,!0)}},{key:"adjustOffsetOfPanel",value:function(){if(this._reactGridEle&&this._reactGridToolbar&&!this.isCompatibleModel()){var e=this._reactGridEle.scrollTop;this._preScrollTop=e,this._reactGridToolbar.style&&(this._reactGridToolbar.style.bottom="-"+e+"px")}}},{key:"onDragStartCallback",value:function(){var e=arguments[4]&&arguments[4].target;if(this._reactGridEle&&e){for(var t=!1,r=e;r;){if(r===this._reactGridEle){t=!0;break}r=r.parentNode}return t&&!this.clickedScrollbar(e,arguments[4])}return!0}},{key:"clickedScrollbar",value:function(e,t){if(e&&t){var r=e.getBoundingClientRect(),n=r.left,o=r.top;return e.clientWidth+n<=t.clientX||e.clientHeight+o<=t.clientY}return!1}},{key:"onBarAddCardHover",value:function(){!0!==this.state.showAddPanel&&this.setState({showAddPanel:!0})}},{key:"onBarAddCardOver",value:function(){!1!==this.state.showAddPanel&&this.setState({showAddPanel:!1})}},{key:"isCompatibleModel",value:function(e){return(e||this.props).canEdit&&(u.default[u.IS_IE]||u.default[u.IS_FIREFOX])}},{key:"render",value:function(){var e=this,t=this.props,r=t.style,n=t.className,a=t.AlignSelf,u=t.Grow,s=t.Shrink,f=t.canEdit,d=(t.onLayoutChange,t.layout),p=t.cols,y=t.rowHeight,h=(t.onBarAddCardClick,t.onBarCancelEdit,t.layoutMargin),O=t.containerPadding,w=(t.onBarEditEnd,t.pageId),S=(t.state,t.onItemDeleteClick,t.refreshForm,t.refreshId,t.setDefaultVisible),P=(t.isSetDefault,t.rootPageId,t.homePageSchemeData),C=t.id,T=t.showEditTool,D=t.hideSchemeEdit,j=t.hideSchemeSwitch,M=E(t,b);n=(0,l.default)(I(I(I(I({},v.default.GridContainer,!0),v.default["gc-canedit"],!0),v.default["gc-compatible"],this.isCompatibleModel()),n,n),(0,c.default)({Grow:u,Shrink:s,AlignSelf:a}));var L=!1,R=!1;return!0===f&&(L=!0,R=!0),o.default.createElement("div",_({style:r,className:n},M,{ref:function(t){return e._reactGridEle=t}}),!1!==T&&P&&o.default.createElement(m.default,{homePageSchemeData:k({isEditMode:f},P)}),!1!==T&&P&&o.default.createElement(g.default,_({hideSchemeSwitch:j,hideSchemeEdit:D,isEditMode:f,modelKey:C,pageId:w},P)),o.default.createElement(B,{className:(0,l.default)(v.default["gc-c"],I({},v.default["gc-container"],f&&!P)),layout:d||[],cols:p||0,rowHeight:y||0,onLayoutChange:this.onLayoutChange,isDraggable:L,isResizable:R,margin:h,containerPadding:O,onDragStart:this.onDragStartCallback,useCSSTransforms:!1},this.generateDOM(d)),!1!==T&&!P&&f&&this._reactGridEle?i.default.createPortal(this.getBottomPanel(S),this._reactGridEle):null)}}]),t}(o.default.Component);V.defaultProps={layout:[],rowHeight:0,cols:0,onLayoutChange:function(){}},V.propTypes={style:a.default.object,className:a.default.string,AlignSelf:a.default.string,Grow:a.default.oneOfType([a.default.string,a.default.number]),Shrink:a.default.oneOfType([a.default.string,a.default.number]),showEditTool:a.default.bool};t.default=V;var U=function(e){function t(e){var r;return T(this,t),(r=L(this,t,[e])).setPageId=r.setPageId.bind(x(r)),r._pageId=void 0,r}return N(t,e),j(t,[{key:"onItemDeleteClick",value:function(e,t){t.stopPropagation(),this.props.onItemDeleteClick&&this.props.onItemDeleteClick(e)}},{key:"componentWillUnmount",value:function(){this.props.addReleasePageId&&this.props.addReleasePageId(this._pageId)}},{key:"setPageId",value:function(e){this._pageId=e}},{key:"ondragstart",value:function(e){return e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.returnValue=!1,!1}},{key:"componentWillReceiveProps",value:function(e){var t=e.refreshId,r=this.props.refreshId;void 0!==t&&t!==r&&e.refreshForm&&e.refreshForm(this._pageId)}},{key:"render",value:function(){var e=this,t=this.props,r=t.item,n=t.pageId,i=t.id,a=t.state,u=t.canEdit,c=t.cardId,d=(t.onItemDeleteClick,t.style),y=t.className,m=t.children,g=t.releasedPageIds,h=(t.addReleasePageId,t.refreshForm,t.refreshId,t.rootPageId),b=E(t,O);return o.default.createElement("div",_({"data-is-grid-container":!0,onDragStart:this.ondragstart.bind(this),key:c,style:d,className:(0,l.default)(I(I({},v.default["gc-item"],!0),y,y))},b),u?o.default.createElement("div",{className:(0,l.default)(v.default["delete-item"]),onClick:function(t){return e.onItemDeleteClick(r.i,t)}},o.default.createElement("span",{className:(0,l.default)("kdfont kdfont-shanchukapian"),title:(0,p.getLangMsg)({key:"gridContainer.key0004"})})):null,void 0!==r.formId&&""!==r.formId?o.default.createElement(s.default,{config:{formId:r.formId,rootPageId:h}}):null,o.default.Children.toArray((0,f.parseSubFormsByCardId)(n,i,a,r.i,g,this.setPageId)),o.default.Children.toArray(m))}}]),t}(o.default.Component)},203799:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(505684),r(743924),r(693917),r(205960),r(976896),r(846428),r(606200),r(534440),r(633768),r(690512),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(305092),r(323784),r(835164),r(721300),r(387912);var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(795520)),i=r(199860),a=f(r(129766)),l=f(r(671252)),u=f(r(369396)),c=r(331428),s=r(790832);function f(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}function p(e,t,r){var o;return o=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==n(o)?o:String(o))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var g=function(e){var t=e.expand,r=(0,l.default)(p(p(p({},a.default["arrow-down"],!0),"kdfont kdfont-shouqi7",!t),"kdfont kdfont-zhankai4",t));return o.default.createElement("i",{className:r})},h=function(e){var t=e.type,r=e.items,n=e.defaultSchemeId,u=e.onSetAsDefault,s=e.onDeleteScheme,f=e.selectedSchemeId,d=e.hoverSchemeId,y=(0,o.useRef)(),m=(0,o.useCallback)((function(e){e.stopPropagation()}),[]);return o.default.createElement("div",{className:a.default["scheme-group"]},o.default.createElement("div",{className:a.default["scheme-group-title"]},t),null==r?void 0:r.map((function(e){var t,r=e.canSetAsDefault,g=e.canDelete,h=e.id,v=e.name,b=h===n,O=g||r,w=o.default.createElement(i.Dropdown.Menu,{onClick:function(e){return function(e,t){"setAsDefault"===e?u&&u(t):"delete"===e&&s&&s(t)}(e,h)}},(t=[],r&&t.push(o.default.createElement(i.Dropdown.Item,{key:"setAsDefault",className:(0,l.default)("kd-hover-color")},(0,c.getLangMsg)("HomePageScheme.key0007"))),g&&t.push(o.default.createElement(i.Dropdown.Item,{key:"delete",className:(0,l.default)("kd-hover-color")},(0,c.getLangMsg)("HomePageScheme.key0008"))),t));return o.default.createElement(i.Dropdown.Item,{className:(0,l.default)(a.default["scheme-group-item"],p({},a.default["scheme-item-selected"],f===h),"kd-hover-color"),title:"","data-key":h,key:h},o.default.createElement("span",{className:(0,l.default)(a.default["scheme-group-submenu"])},o.default.createElement("span",{className:(0,l.default)(a.default["scheme-item-name-wrapper"])},o.default.createElement("span",{className:(0,l.default)(a.default["scheme-item-name"]),title:v},v)),b&&o.default.createElement("span",{className:a.default["scheme-item-default"]},(0,c.getLangMsg)("HomePageScheme.key0009")),O&&!b&&d===h&&o.default.createElement("div",{ref:function(e){var t,r;e?(y.current=e,null===(t=y.current)||void 0===t||t.addEventListener("click",m)):null===(r=y.current)||void 0===r||r.removeEventListener("click",m)}},o.default.createElement(i.Dropdown,{menu:w,gap:20,trigger:"hover",placement:"right",mouseEnterDelay:.3,popperClassName:(0,l.default)(a.default.operation,"kd-hover-color")},o.default.createElement("span",{className:a.default["btn-more"]},o.default.createElement("i",{className:"kdfont kdfont-gengduo3"}))))))})))},v=function(e){var t,r,n=e.saveAsDropDownItems,u=e.editable,s=e.isEditMode,f=e.canSave,d=e.onBarCancelEdit,p=e.onBarAddCardClick,m=e.onEdit,h=e.onSave,v=e.onRefresh,b=e.onSaveAs,O=y((0,o.useState)(),2),w=O[0],S=O[1],P=(0,o.useCallback)((function(e){b&&b(e),S(!1)}),[b]),_=function(e){S(e)},C=((0,o.useCallback)((function(){u&&m&&m()}),[m,u]),(0,o.useCallback)((function(){v&&v()}),[v]),(0,o.useCallback)((function(){p&&p()}),[p])),k=(0,o.useCallback)((function(){d&&d()}),[d]),E=(0,o.useCallback)((function(){h&&h()}),[h]);return o.default.createElement("span",{className:a.default.toolbar},u&&s&&(t=n,r=o.default.createElement(i.Dropdown.Menu,{onClick:P},function(e){return e.map((function(e){return o.default.createElement(i.Dropdown.Item,{key:e.type,className:"kd-cq-dropdown-menu-item"},e.name)}))}(t)),o.default.createElement(o.default.Fragment,null,o.default.createElement("span",{className:(0,l.default)(a.default.add,"kd-cq-home-page-scheme-add-card","kd-hover-color"),onClick:C},o.default.createElement("span",{className:a.default["add-icon"]},o.default.createElement("i",{className:"kdfont kdfont-zengjia-yuan"})),o.default.createElement("span",{className:a.default["add-text"]},(0,c.getLangMsg)("HomePageScheme.key0006"))),o.default.createElement("span",{className:(0,l.default)("kd-cq-control kd-cq-btn hover-theme-border-color1",a.default.cancel,a.default["btn-ghost"]),onClick:k},o.default.createElement("span",{className:a.default["cancel-text"]},(0,c.getLangMsg)("HomePageScheme.key0003"))),t&&t.length>0&&o.default.createElement(i.Dropdown,{menu:r,onVisibleChange:_,visible:w,trigger:"click",popperClassName:(0,l.default)("kd-cq-dropdown kd-cq-dropdown-select-type",a.default["save-as-dp"])},o.default.createElement("span",{className:(0,l.default)("kd-cq-control kd-cq-btn hover-theme-border-color1",a.default["save-as-trigger"],a.default["btn-ghost"])},o.default.createElement("span",{className:a.default["save-as-text"]},(0,c.getLangMsg)("HomePageScheme.key0004")),o.default.createElement(g,{expand:w}))),f&&o.default.createElement("span",{className:(0,l.default)("kd-cq-control kd-cq-btn",a.default.save,"theme-bg hover-theme-bg1"),onClick:E},o.default.createElement("span",{className:a.default["save-text"]},(0,c.getLangMsg)("HomePageScheme.key0005"))))))};t.default=function(e){var t,r=e.homePageSchemeData,n=r.schemeGroup,c=void 0===n?[]:n,f=r.editable,d=r.isEditMode,m=r.defaultSchemeId,b=r.selectedSchemeId,O=r.saveSTList,w=r.canSave,S=r.onSetAsDefault,P=r.onSchemeSelect,_=r.onBarCancelEdit,C=r.onDeleteScheme,k=r.onBarAddCardClick,E=r.onEdit,I=r.onSave,T=r.onRefresh,D=r.onSaveAs,j=y((0,o.useState)(!1),2),M=j[0],L=j[1],R=y((0,o.useState)(""),2),A=R[0],x=R[1],N=(0,o.useRef)(),F=(0,o.useRef)(),B=function(e){P&&P(e),L(!1)},V=(0,s.debounce)((function(e){for(var t=e.target;t&&"LI"!==t.nodeName&&t!==e.currentTarget;)t=t.parentNode;if(t){var r=t.dataset.key;x(r)}}),10);(0,o.useEffect)((function(){if(F.current)return u.default.findDOMNode(F.current).addEventListener("click",z),u.default.findDOMNode(F.current).addEventListener("mouseover",V),function(){F.current&&(u.default.findDOMNode(F.current).removeEventListener("click",z),u.default.findDOMNode(F.current).removeEventListener("mouseover",V))}}),[P,F.current]);var U=o.default.createElement(i.Dropdown.Menu,{className:a.default["scheme-dp-menu"],ref:F},null==c||null===(t=c.map)||void 0===t?void 0:t.call(c,(function(e){return o.default.createElement(h,{ref:N,type:e.name,items:e.items,key:e.type,onSetAsDefault:S,onDeleteScheme:C,onMenuItemClick:B,defaultSchemeId:m,selectedSchemeId:b,hoverSchemeId:A})}))),W=(0,o.useMemo)((function(){return null==c?void 0:c.find((function(e){var t;return null==e||null===(t=e.items)||void 0===t?void 0:t.find((function(e){return e.id===b}))}))}),[c,b]),H=(0,o.useMemo)((function(){var e;return null==W||null===(e=W.items)||void 0===e?void 0:e.find((function(e){return e.id===b}))}),[W,b]),z=(0,o.useCallback)((function(e){for(var t=e.target;t&&"LI"!==t.nodeName;)t=t.parentNode;if(t){var r=t.dataset.key;P&&P(r),L(!1)}}),[P]);return f&&d&&o.default.createElement("span",{className:(0,l.default)("kd-cq-home-page-scheme kd-cq-control",a.default.scheme,p({},a.default["scheme-edit"],d))},o.default.createElement("span",{className:a.default["scheme-tips"]},c.length>0&&o.default.createElement(i.Dropdown,{menu:U,onVisibleChange:function(e){!d&&L(e)},visible:M,trigger:"click",popperClassName:a.default["scheme-dp"],key:"scheme",gap:10},o.default.createElement("span",{className:(0,l.default)(a.default["scheme-dp-trigger"],p({"kd-hover-color":!d},a.default["scheme-dp-trigger-hover"],!d))},o.default.createElement("span",{className:a.default["scheme-dp-name"],title:null==H?void 0:H.name},null==H?void 0:H.name),!d&&o.default.createElement(g,{expand:M}))),d&&c.length>0?o.default.createElement("span",{className:(0,l.default)("kd-cq-home-page-scheme-text",a.default["scheme-label"]),title:null==W?void 0:W.name},null==W?void 0:W.name):null),o.default.createElement(v,{isEditMode:d,saveAsDropDownItems:O,editable:f,canSave:w,onBarCancelEdit:_,onBarAddCardClick:k,onEdit:E,onSave:I,onRefresh:T,onSaveAs:D}))}},329088:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(505684),r(743924),r(693917),r(205960),r(976896),r(846428),r(606200),r(534440),r(387912),r(633768),r(690512),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,r,n,h=e.schemeGroup,v=void 0===h?[]:h,w=e.isEditMode,C=e.defaultSchemeId,k=e.selectedSchemeId,E=e.pageId,I=e.modelKey,T=e.hideSchemeSwitch,D=e.hideSchemeEdit,j=O((0,o.useState)(!1),2),M=j[0],L=j[1],R=O((0,o.useState)(""),2),A=R[0],x=R[1],N=O((0,o.useState)(null===(t=(0,p.getUserUIState)())||void 0===t?void 0:t.get(S)),2),F=N[0],B=N[1],V=l.doGlobalDispatch,U=O((0,o.useState)(!1),2),W=U[0],H=U[1],z=(0,o.useRef)();(0,o.useEffect)((function(){var e=(0,d.addDataChangeListener)(f.KEY_HOME_SIDEBAR_COLLAPSE_CHANGE,K);return function(){e()}}),[]),(0,o.useEffect)((function(){(0,d.getData)(f.KEY_HIDE_TRAY_MENU)&&G();var e=(0,d.addDataChangeListener)(f.KEY_HIDE_TRAY_MENU,G);return function(){e()}}),[]),(0,o.useEffect)((function(){var e;if(W){var t=null===(e=z.current)||void 0===e?void 0:e.parentNode;t&&(t.style.marginRight=F?"0px":parseFloat(P)+"px")}}),[W,F]);var G=function(){H(!0)},K=function(e){B(e)},q=function(e){V((0,u.setDefault)({pageId:E,key:I},e))},Y=function(e){V((0,u.deleteScheme)({pageId:E,key:I},e))},J=function(e){return function(){var t;t=e,V((0,u.switchScheme)({pageId:E,key:I},t)),L(!1)}},X=function(e){return function(){x(e)}},Z=function(e){var t;B(e);var r=(0,y.getRootPageId)()((0,l.getGlobalState)());(0,p.setUserUIState)(r,[S],e,!0),V(Q()),null!==(t=(0,d.getData)(f.KEY_FIX_INSIGHT_PANEL))&&void 0!==t&&t.isFixationMode&&(0,d.setData)(f.KEY_CHANGE_PANEL_POSITION,{right:e?0:P}),(0,d.setData)(f.KEY_HOME_SIDEBAR_COLLAPSE_CHANGE,e)},Q=function(){return function(e,t){var r=(0,y.getRootPageId)()(t()),n=(0,p.getDiffUserUIState)();n&&(0,m.invokeControlService)({pageId:r},"saveSetting",[n],(0,i.List)(),e)}},$=o.default.createElement(c.Dropdown.Menu,{className:(0,a.default)("kd-cq-dropdown kd-cq-dropdown-select-type",g.default["scheme-dp-menu"])},null==v||null===(r=v.map)||void 0===r?void 0:r.call(v,(function(e){return o.default.createElement(_,{type:e.name,items:e.items,key:e.type,defaultSchemeId:C,selectedSchemeId:k,hoverSchemeId:A,setAsDefault:q,deleteHomePageScheme:Y,handleSchemeItemClick:J,handleSchemeItemEnter:X})}))),ee=null===(n=(0,d.getData)(f.KEY_FIX_INSIGHT_PANEL))||void 0===n?void 0:n.isFixationMode;return o.default.createElement(o.default.Fragment,null,W&&o.default.createElement("div",{className:g.default.arrowContent,style:{width:F?16:0,zIndex:ee?1050:1e3},ref:z,onClick:function(){return Z(!1)}},o.default.createElement("i",{className:(0,a.default)("kdfont kdfont-xiayiyue",g.default["arrowContent-arrow-left"])})),o.default.createElement("div",{className:(0,a.default)(g.default.homePageSchemeIcon,g.default["homePageSchemeIcon-show-".concat(!F)],b({},g.default["with-collapse-icon"],W))},!0!==D&&o.default.createElement("i",{className:(0,a.default)(b({},g.default["active-click"],w),g.default.icon,"kdfont kdfont-bianji11"),title:(0,s.getLangMsg)("HomePageScheme.key0011"),onClick:function(){V(w?(0,u.editCancel)({pageId:E,key:I},[]):(0,u.edit)({pageId:E,key:I}))}}),v.length>0&&!0!==T&&o.default.createElement(c.Dropdown,{menu:$,onVisibleChange:function(e){!w&&L(e)},placement:"leftTop",visible:M,trigger:"click",popperClassName:g.default["scheme-dp"],key:"scheme",gap:10},o.default.createElement("i",{className:(0,a.default)(b(b({},g.default["disabled-btn"],w),g.default["active-click"],M),"kdfont kdfont-qiehuan5",g.default.icon),title:(0,s.getLangMsg)("HomePageScheme.key0012")})),v.length>0&&o.default.createElement("i",{className:(0,a.default)(b({},g.default["disabled-btn"],w),"kdfont kdfont-shuaxin4",g.default.icon),title:(0,s.getLangMsg)("HomePageScheme.key0013"),onClick:function(){!w&&V((0,u.refresh)({pageId:E,key:I}))}}),W&&o.default.createElement("div",{className:(0,a.default)(g.default["homePageScheme-arrow"]),onClick:function(){return Z(!0)}},o.default.createElement("i",{className:(0,a.default)("kdfont kdfont-xiayiyue",g.default["homePageScheme-arrow-right"])}))))},r(323784),r(835164),r(721300),r(23544);var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=v(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(795520)),i=r(891052),a=h(r(671252)),l=r(211152),u=r(230816),c=r(199860),s=r(331428),f=r(868256),d=r(674260),p=r(738704),y=r(218652),m=r(251536),g=h(r(129766));function h(e){return e&&e.__esModule?e:{default:e}}function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}function b(e,t,r){var o;return o=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==n(o)?o:String(o))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var S="homePageSidebarCollapse",P="28px";var _=function(e){var t=e.type,r=e.items,n=e.defaultSchemeId,i=e.setAsDefault,l=e.deleteHomePageScheme,u=e.selectedSchemeId,f=e.hoverSchemeId,d=e.handleSchemeItemClick,p=e.handleSchemeItemEnter,y=function(e){e.stopPropagation()};return o.default.createElement("div",{className:g.default["scheme-group"]},o.default.createElement("div",{className:(0,a.default)("kd-cq-dropdown-menu-item-title",g.default["scheme-group-title"])},t),null==r?void 0:r.map((function(e){var t,r=e.canSetAsDefault,m=e.canDelete,h=e.id,v=e.name,O=h===n,w=m||r,S=o.default.createElement(c.Dropdown.Menu,{onClick:function(e){return function(e,t){"setAsDefault"===e?i(t):"delete"===e&&l(t)}(e,h)}},(t=[],r&&t.push(o.default.createElement(c.Dropdown.Item,{key:"setAsDefault",className:"kd-cq-dropdown-menu-item"},(0,s.getLangMsg)("HomePageScheme.key0007"))),m&&t.push(o.default.createElement(c.Dropdown.Item,{key:"delete",className:"kd-cq-dropdown-menu-item"},(0,s.getLangMsg)("HomePageScheme.key0008"))),t));return o.default.createElement(c.Dropdown.Item,{className:(0,a.default)("kd-cq-dropdown-menu-item",g.default["scheme-group-item"],b({},"".concat(g.default["scheme-item-selected"]," kd-cq-dropdown-menu-item-active"),u===h)),title:"","data-key":h,key:h},o.default.createElement("span",{className:g.default["scheme-group-submenu"],onClick:d(h),onMouseEnter:p(h)},o.default.createElement("span",{className:(0,a.default)(g.default["scheme-item-name-wrapper"])},o.default.createElement("span",{className:(0,a.default)(g.default["scheme-item-name"]),title:v},v)),O&&o.default.createElement("span",{className:g.default["scheme-item-default"]},(0,s.getLangMsg)("HomePageScheme.key0009")),w&&!O&&f===h&&o.default.createElement("div",{onClick:y},o.default.createElement(c.Dropdown,{menu:S,trigger:"hover",placement:"bottomRight",mouseEnterDelay:.3,popperClassName:(0,a.default)("kd-cq-dropdown kd-cq-dropdown-select-type kd-cq-homepagescheme-dropdown",g.default.operation)},o.default.createElement("span",{className:g.default["btn-more"]},o.default.createElement("i",{className:"kdfont kdfont-gengduo3"}))))))})))}},773972:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.contextMenuList=t.appItemsContextMenuList=t.UN_FIXED_APP=t.FIXED_APP=t.CLOSE_RIGHT_TAB=t.CLOSE_OTHER_TAB=t.CLOSE_LEFT_TAB=t.CLOSE_CURRENT_TAB=t.CLOSE_APP=t.CLOSE_ALL_TAB=t.AGAIN_OPEN_TAB=void 0;var n=r(331428),o=t.CLOSE_CURRENT_TAB="closeCurrentTab",i=t.CLOSE_LEFT_TAB="closeLeftTab",a=t.CLOSE_RIGHT_TAB="closeRightTab",l=t.CLOSE_OTHER_TAB="closeOtherTab",u=t.CLOSE_ALL_TAB="closeAllTab",c=t.AGAIN_OPEN_TAB="againOpenTab",s=(t.contextMenuList=[{key:o,name:(0,n.getLangMsg)("NewNav.key003")},{key:l,name:(0,n.getLangMsg)("NewNav.key006")},{key:i,name:(0,n.getLangMsg)("NewNav.key008")},{key:a,name:(0,n.getLangMsg)("NewNav.key009")},{key:u,name:(0,n.getLangMsg)("NewNav.key004")},{key:c,name:(0,n.getLangMsg)("NewNav.key007")}],t.FIXED_APP="fixedApp"),f=t.UN_FIXED_APP="unFixedApp",d=t.CLOSE_APP="closeApp";t.appItemsContextMenuList=[{key:s,name:(0,n.getLangMsg)("NewNav.key010")},{key:f,name:(0,n.getLangMsg)("NewNav.key011")},{key:d,name:(0,n.getLangMsg)("NewNav.key012")}]},714496:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(233696),r(505684),r(241872),r(743924),r(693917),r(205960),r(976896),r(297336),r(846428),r(336368),r(969e3),r(606200),r(534440),r(76152),r(76124),r(633768),r(690512),r(78504),r(776512),r(997308),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.HomePageVirtualTab=function(e){var t=e.virtualTabs,r=void 0===t?[]:t,n=e.staticItems,g=e.appItems,h=e.activeApp,b=e.selectTab,P=e.closeVirtualTab,_=e.selectVirtualTab,C=e.selectTabWorkBench,k=(e.addToCollection,e.openInNewWindow),E=e.openInSystemTab,I=(e.pageId,e.changeAppItems),T=e.changeVirtualTabData,D=e.control,j=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,m),M=S((0,o.useState)(null),2),L=M[0],R=M[1],A=S((0,o.useState)("hover"),2),x=A[0],N=A[1],F=S((0,o.useState)({key:"",show:!1}),2),B=F[0],V=F[1],U=S((0,o.useState)("none"),2),W=U[0],H=U[1],z=S((0,o.useState)(!1),2),G=z[0],K=z[1],q=S((0,o.useState)({}),2),Y=q[0],J=q[1],X=S((0,o.useState)({dropEndData:[],dropEndItem:{},changeOperation:""}),2),Z=X[0],Q=X[1],$=(0,o.useRef)(!0),ee=(0,o.useRef)(),te=(0,o.useRef)(),re=(0,o.useRef)(!1),ne=(0,o.useRef)(null),oe=(0,o.useRef)(null),ie=(0,o.useRef)(null),ae=(0,o.useRef)(null),le=(0,o.useMemo)((function(){return(0,f.filterFixed)(g,0)}),[g]),ue=(0,o.useMemo)((function(){return(0,f.filterFixed)(g,1)}),[g]),ce=(0,o.useCallback)((function(){R(null),"hover"!==x&&N("hover")}),[x]),se=function(e){return function(){b(e),ce(),K(!0);var t=g.findIndex((function(t){return t.appId===e.appId})),r=g.findIndex((function(e){return e.appId===h.appId}));H(r-t<0?"moveBottom":"moveUp")}},fe=function(e){return function(t){null==t||t.stopPropagation(),(0,s.setData)(c.KEY_CLOSE_TAB,e)}},de=function(){$.current&&R(1)},pe=function(e){return function(t){if(!re.current)switch(e){case 1:if(ne.current||oe.current)return;!t&&B.show?(V({key:"",show:!1}),ce()):t||1!==L?t&&1!==L&&de():ce();break;case 2:!t&&B.show?V({key:"",show:!1}):t&&!B.show&&V((function(e){return O(O({},e),{},{show:!0})}));break;case 3:if(!t&&B.show)V({key:"",show:!1});else{if(ne.current||oe.current)return!1;t||1!==L?t&&1!==L&&de():ce()}}}},ye=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(V({key:"",show:!1}),Array.isArray(e)&&e.length){var r=e.map((function(e){return e.pageId}));e[0].clickFix([{fixed:t,pageIds:r}])}else e&&e.clickFix&&e.clickFix([{fixed:t,pageId:e.pageId}])},me=function(e){return function(t){t.stopPropagation(),t.dataTransfer.effectAllowed="move",t.target.style.opacity=.5,te.current=e,re.current=!0}},ge=function(e){var t=e.dragOverData,r=void 0===t?[]:t,n=e.dragOverItem,o=void 0===n?{}:n,i=e.changeOperation;return function(e){e.preventDefault(),e.dataTransfer.dropEffect="move",Q({dropEndData:r,dropEndItem:o,changeOperation:i})}},he=function(e){e.target.style.opacity="",re.current=!1;var t=Z.dropEndData,r=Z.dropEndItem,n=Z.changeOperation;Q({dropEndData:[],dropEndItem:{},changeOperation:""}),n&&(function(e,t,r,n){(null==e?void 0:e.key)!==(null==r?void 0:r.key)&&((0,f.deleteData)(e.isFixed?ue:le,e.key),"push"===n?t.push(e):"unshift"===n?t.unshift(e):(0,f.insertData)(r.isFixed?ue:le,e,r.key))}(te.current,t,r,n),function(e,t,r,n){var o="insert"!==n;o&&e.isFixed&&t===le||!o&&e.isFixed&&!r.isFixed?(e.isFixed=0,I(ue,le),ye(e,!1)):o&&!e.isFixed&&t===ue||!o&&!e.isFixed&&r.isFixed?(e.isFixed=1,ye(ue)):e.isFixed?ye(ue):I(ue,le)}(te.current,t,r,n))},ve=function(e,t){return function(){switch(e.key){case y.FIXED_APP:ye(t),"hover"!==x&&N("hover");break;case y.UN_FIXED_APP:ye(t,!1),"hover"!==x&&N("hover");break;case y.CLOSE_APP:fe(t)(),t.isFixed&&ye(t,!1)}}},be=function(e){var t=y.appItemsContextMenuList.filter((function(t){return(1!==e.isFixed||t.key!==y.FIXED_APP)&&(1===e.isFixed||t.key!==y.UN_FIXED_APP)}));return o.default.createElement(l.Dropdown.Menu,null,o.default.createElement(o.default.Fragment,null,t.map((function(t){return o.default.createElement(l.Dropdown.Item,{key:t.key,onClick:ve(t,e),className:(0,a.default)(i.default["context-menu-item"],"kd-cq-context-menu-item")},t.name)}))))},Oe=function(e,t){if(!e.length){var r=(0,a.default)(i.default["app-tabs-empty-tip"],w(w({},i.default["app-tabs-empty-tip-animation"],re.current),i.default["app-tabs-empty-tip-closeAnimation"],!re.current)),n=(0,a.default)(i.default["app-tabs-empty-content"],w({},i.default["app-move-empty-tip"],Z.dropEndData===e));return o.default.createElement("div",{className:r},ue.length?null:o.default.createElement("div",{className:i.default["app-tabs-hr-fixed"]}),o.default.createElement("div",{className:n,onDragEnter:ge({dragOverData:e,changeOperation:"push"})},re.current&&t),le.length?null:o.default.createElement("div",{className:i.default["app-tabs-hr-notFixed"]}))}},we=function(e){return e.map((function(e,t){var r,n,u=(0,a.default)("kd-cq-dropdown-menu-item",i.default.top,i.default["app-menu"],w(w(w(w({},i.default.active,e.isActive),i.default["app-move-tabs"],(null===(r=Z.dropEndItem)||void 0===r?void 0:r.key)===e.key),i.default["menu-sizing-overflow"],!0),i.default.droping,re.current));return o.default.createElement(l.Dropdown,{key:e.key,menu:be(e),trigger:"contextMenu",visible:B.key===e.key&&B.show,onVisibleChange:pe(2),popperClassName:(0,a.default)(i.default["virtual-tab-context-menu"],"kd-cq-context-menu")},o.default.createElement("div",{draggable:!0,className:u,onClick:se(e),onContextMenu:(n=e.key,function(e){e.preventDefault(),V((function(e){return O(O({},e),{},{key:n})})),"click"!==x&&N("click")}),onDragStart:me(e),onDragOver:ge({dragOverItem:e,changeOperation:"insert"}),onDragEnd:he},o.default.createElement("div",{className:(0,a.default)(i.default["menu-info"],i.default["menu-sizing-overflow"])},e.appImageUrl?o.default.createElement("img",{src:e.appImageUrl,className:i.default["menu-icon"],draggable:!1}):null,o.default.createElement("span",{className:i.default["menu-sizing-overflow-span"]},e.title)),e.isStatic||1===e.isFixed?null:o.default.createElement("i",{onClick:fe(e),className:(0,a.default)("kdfont kdfont-guanbi8",i.default["close-icon"])})))}))},Se=function(){"click"!==x&&(ne.current&&(clearTimeout(ne.current),ne.current=null),oe.current=setTimeout((function(){clearTimeout(oe.current),oe.current=null,pe(3)(!1)}),150))},Pe=function(){"click"!==x&&(oe.current&&(clearTimeout(oe.current),oe.current=null),ne.current=setTimeout((function(){clearTimeout(ne.current),ne.current=null,pe(3)(!0)}),100))},_e=function(e){if(e.length)return o.default.createElement("div",{draggable:!1,className:(0,a.default)(i.default["drop-placeholder"],w({},i.default["app-move-tabs"],Z.dropEndData===e)),onDragOver:ge({dragOverData:e,changeOperation:"unshift"})})},Ce=o.default.createElement(l.Dropdown.Menu,null,o.default.createElement("div",{className:(0,a.default)(i.default["app-tabs-items-safe-area"]),onMouseEnter:Pe,onMouseLeave:Se,onDragOver:function(e){e.preventDefault(),e.dataTransfer.dropEffect="move"},ref:ie},o.default.createElement("div",{className:(0,a.default)(i.default["app-tabs-items"],"kd-cq-dropdown kd-cq-dropdown-select-type")},Oe(le,(0,u.getLangMsg)("NewNav.key013")),o.default.createElement("div",{style:{position:"relative"}},_e(le),we(le)),le.length&&ue.length?o.default.createElement("div",{className:(0,a.default)(i.default["app-tabs-hr"],i.default["app-show"])}):null,o.default.createElement("div",{style:{position:"relative"}},_e(ue),we(ue)),Oe(ue,(0,u.getLangMsg)("NewNav.key014"))))),ke=(null==h?void 0:h.active)&&!r.find((function(e){return e.isActive})),Ee=g.length,Ie=h||Ee&&g[Ee-1];(0,o.useLayoutEffect)((function(){if(1===L){var e,t,r=(null===(e=ae.current)||void 0===e?void 0:e.clientWidth)+30,n=null===(t=ie.current)||void 0===t?void 0:t.clientWidth;J(r>=n?{width:"".concat(r,"px")}:{})}}),[L]),(0,o.useEffect)((function(){1===L&&ce()}),[ke]);var Te=function(e){return function(){$.current=e}},De=o.default.createElement(l.Dropdown,{menu:Ce,trigger:x,visible:1===L,popperStyle:Y,popperClassName:(0,a.default)(i.default["menu-sizing-overflow"],i.default["nav-drop-down"],i.default["app-tabs-safe-area"],i.default["virtual-tab-context-menu"]),onVisibleChange:pe(1)},o.default.createElement("div",{className:(0,a.default)(i.default["app-tab"],w({},i.default.expand,1===L)),ref:ae},Ie&&o.default.createElement("span",{className:(0,a.default)(i.default.text,w({},i.default.active,ke)),onClick:function(){return C(Ie)},onMouseEnter:Te(!1),onMouseLeave:Te(!0)},Ie.title),o.default.createElement("span",{className:i.default["arrow-icon"],onMouseEnter:Pe,onMouseLeave:Se},o.default.createElement("i",{className:"kdfont kdfont-shangla"})))),je={selectTab:b,closeVirtualTab:P,selectVirtualTab:_,openInNewWindow:k,openInSystemTab:E,control:D,changeVirtualTabData:T},Me=(0,o.useMemo)((function(){return"none"===W?{transition:"transform .3s ease",transform:"translateY(0)",opacity:1}:{transition:G?"transform .1ms ease":"none",transform:"moveUp"===W?"translateY(-50px)":"translateY(48px)",opacity:0}}),[W,G]);return o.default.createElement("div",v({className:i.default.nav},j),o.default.createElement(p.StaticTab,{staticItems:n,selectTab:b}),Ee>0&&De,o.default.createElement("div",{className:i.default.virtualTabs,style:Me,onTransitionEnd:function(e){e.target===ee.current&&(K(!1),H("none"))},ref:ee},o.default.createElement(d.VirtualTabs,v({virtualTabs:r,activeApp:h},je))))},r(622676),r(305092),r(613468),r(323784),r(835164),r(721300),r(387912),r(86744);var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(795520)),i=g(r(448352)),a=g(r(671252)),l=r(199860),u=r(331428),c=r(868256),s=r(674260),f=r(897920),d=r(389080),p=r(568128),y=r(773972),m=["virtualTabs","staticItems","appItems","activeApp","selectTab","closeVirtualTab","selectVirtualTab","selectTabWorkBench","addToCollection","openInNewWindow","openInSystemTab","pageId","changeAppItems","changeVirtualTabData","control"];function g(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},v.apply(this,arguments)}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){w(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(e,t,r){var o;return o=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==n(o)?o:String(o))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return P(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}},568128:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(743924),r(205960),r(846428),r(606200),r(387912),r(78504),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.StaticTab=void 0,r(835164);var o=l(r(795520)),i=l(r(448352)),a=l(r(671252));function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t,r){var o;return o=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==n(o)?o:String(o))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t.StaticTab=function(e){var t=e.staticItems,r=e.selectTab;return o.default.createElement("ul",{className:i.default["static-tab"]},t.map((function(e){return o.default.createElement("li",{key:e.pageId,className:(0,a.default)(i.default.item,u({},i.default.active,e.isActive)),onClick:function(){return r(e)}},e.title)})))}},389080:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(505684),r(743924),r(205960),r(297336),r(846428),r(336368),r(606200),r(534440),r(633768),r(690512),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.VirtualTabs=function(e){var t=e.virtualTabs,r=void 0===t?[]:t,n=e.activeApp,f=e.selectTab,g=e.closeVirtualTab,h=e.selectVirtualTab,M=e.openInNewWindow,L=e.openInSystemTab,R=e.control,A=e.changeVirtualTabData,x=O((0,o.useState)(null),2),N=x[0],F=x[1],B=O((0,o.useState)({}),2),V=B[0],U=B[1],W=O((0,o.useState)({leftShow:!1,rightShow:!1}),2),H=W[0],z=W[1],G=O((0,o.useState)(!1),2),K=G[0],q=G[1],Y=O((0,o.useState)({}),2),J=Y[0],X=Y[1],Z=O((0,o.useState)({}),2),Q=Z[0],$=Z[1],ee=O((0,o.useState)(!1),2),te=ee[0],re=ee[1],ne=(0,o.useRef)(),oe=(0,o.useRef)(null),ie=(0,o.useRef)(null),ae=(0,o.useRef)(null),le=(0,o.useRef)(!1),ue=r.findIndex((function(e){return e.isActive&&(null==n?void 0:n.active)})),ce=-1!==ue&&r[ue].pageId;(0,o.useEffect)((function(){return E!==(null==n?void 0:n.pageId)?(I=!1,T=!0,setTimeout((function(){T=!1}),0),E=null==n?void 0:n.pageId):I=!0,function(){clearInterval(ae.current),ae.current=null}}),[ue,null==n?void 0:n.pageId,r.length]),(0,o.useEffect)((function(){var e,t=(0,p.default)(null===(e=r[ue])||void 0===e?void 0:e.pageId,r);return le.current&&(fe(),le.current=!1),function(){t&&t()}}),[r]);var se=(0,o.useCallback)((function(){var e=oe.current,t=ne.current;if(e&&t){var n=e.getBoundingClientRect(),o=t.getBoundingClientRect(),i=0,a=P;if(Math.round(o.width-n.width)>0&&Math.round(o.right-n.right)<0){var l=ue===r.length-1?k:0;i=n.right-o.right-l}else Math.round(o.width-n.width)<=0&&(P=0);pe(n,o,(P+=i)-a),ne.current.style.transform="translate3d(".concat(P,"px,0,0)")}}),[null==n?void 0:n.pageId,oe.current]);j(oe,se);var fe=function(){var e,t,r=null===(e=oe.current)||void 0===e?void 0:e.getBoundingClientRect(),n=null===(t=ne.current)||void 0===t?void 0:t.getBoundingClientRect(),o=r.left,i=r.right,a=n.left,l=n.right,u=0,c=P;o<a&&(P=0),i>l&&(u=i-l-k),pe(r,n,(P+=u)-c),ne.current.style.transform="translate3d(".concat(P,"px,0,0)")},de=(0,o.useCallback)((function(){var e,t,n,o;if(null!==(e=ne.current)&&void 0!==e&&e.childNodes){var i=null===(t=ne.current.childNodes[ue])||void 0===t?void 0:t.getBoundingClientRect(),a=null===(n=oe.current)||void 0===n?void 0:n.getBoundingClientRect(),l=null===(o=ne.current)||void 0===o?void 0:o.getBoundingClientRect(),u=P;if(i){var c=i.right-a.right,s=a.left-i.left;if(Math.round(s)>0)P=P+s+(0===ue?0:_);else if(Math.round(c)>0){var f=ue===r.length-1?k:k+C;P=P-c-f}else if(Math.round(l.width-a.width)>0){var d=H.leftShow,p=H.rightShow,y=p?C+k:k;if(Math.round(i.left-a.left-_)<0&&d)P+=_-(i.left-a.left);else if((d||p)&&Math.round(a.right-i.right-y)<0)P-=y-(a.right-i.right);else{var m=a.right-l.right;0!==P&&Math.round(m)>0&&(P+=m-C)}}}else{var g=a.right-l.right;0!==P&&Math.round(g)>0&&(P+=g-C)}pe(a,l,P-u),ne.current.style.transform="translate3d(".concat(P,"px,0,0)")}else P=0}),[ce,null==ie?void 0:ie.current,r.length]);(0,o.useEffect)((function(){D&&clearTimeout(D),D=setTimeout((function(){de()}),0)}),[de]);var pe=function(e,t,r){var n=Math.round((null==t?void 0:t.left)+r-(null==e?void 0:e.left))<0,o=Math.round((null==t?void 0:t.right)+r-(null==e?void 0:e.right))>0;z({leftShow:n,rightShow:o})},ye=function(e){return function(){var t,r,n=null===(t=oe.current)||void 0===t?void 0:t.getBoundingClientRect(),o=null===(r=ne.current)||void 0===r?void 0:r.getBoundingClientRect(),i=n.width,a=n.left,l=n.right,u=o.left,c=o.right,s=P;if("prev"===e){var f=Math.round(a-u-i)>0?i:a-u;P+=f}else{var d=Math.round(c-l-i)>0?i:c-l+k;P-=d}pe(n,o,P-s),ne.current.style.transform="translate3d(".concat(P,"px,0,0)")}},me=function(e,t){e&&(e=!1,le.current=!0,(0,s.setData)(c.KEY_MOVE_DRAG,{moveDrop:t.moveDrop,moveDirection:t.moveDirection})),clearInterval(ae.current),ae.current=null},ge=function(e){te||re(!0),ae.current||function(e){var t=!1;ae.current&&(clearInterval(ae.current),ae.current=null),ae.current=setInterval((function(){var r,n,o,i=null===(r=oe.current)||void 0===r?void 0:r.getBoundingClientRect(),a=null===(n=ne.current)||void 0===n?void 0:n.getBoundingClientRect(),l=null===(o=e.moveDrop)||void 0===o?void 0:o.getBoundingClientRect(),u=i.left,c=i.right,s=a.left,f=a.right,d=l.left,p=l.right,y=P;"right"===e.moveDirection&&Math.round(f-c)>0&&p<c&&p+50+48-c>0?(t=!0,f-(c-k)>=20?P-=20:(P=f-(c-k),me(t,e)),pe(i,a,P-y),ne.current.style.transform="translate3d(".concat(P,"px,0,0)")):"left"===e.moveDirection&&Math.round(u+_-s)>0&&u<d&&d-50-_-u<0?(t=!0,u+_-s<20?P+=20:(P=0,me(t,e)),pe(i,a,Math.abs(P-y)),ne.current.style.transform="translate3d(".concat(P,"px,0,0)")):me(t,e)}),100)}(e)},he=function(e){clearInterval(ae.current),ae.current=null,re(!1),A(e)};(0,o.useEffect)((function(){var e=(0,s.addDataChangeListener)(c.KEY_DRAGEND_TAB,he),t=(0,s.addDataChangeListener)(c.KEY_DRAGOVER_TAB,ge);return function(){e(),t()}}),[te]);var ve=function(){K||(U({}),F(null))},be=function(e,t){var n,o=(0,i.cloneDeep)(r),a=o.splice(e.index,1);return o.splice.apply(o,[t.index,0].concat(function(e){if(Array.isArray(e))return S(e)}(n=a)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||w(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),o},Oe=H.leftShow,we=H.rightShow,Se=r.length>1&&(Oe||we),Pe=r.length>1&&Oe&&o.default.createElement("div",{className:a.default["left-btn-wrap"],onClick:ye("prev")},o.default.createElement("span",{className:a.default["pre-btn-wrap"]},o.default.createElement("i",{className:(0,l.default)("kdfont kdfont-qianfan",a.default["pre-btn"])}))),_e={activeApp:n,showContextMenuInfo:V,moreMenuShowType:N,getContextMenu:function(e){var t=r.findIndex((function(t){return t.pageId===e})),n=d.contextMenuList.filter((function(e){var n=!0;return 0===t&&e.key===d.CLOSE_LEFT_TAB||t===r.length-1&&e.key===d.CLOSE_RIGHT_TAB?n=!1:1!==r.length||e.key!==d.CLOSE_RIGHT_TAB&&e.key!==d.CLOSE_LEFT_TAB&&e.key!==d.CLOSE_OTHER_TAB&&e.key!==d.CLOSE_ALL_TAB||(n=!1),n}));return o.default.createElement(u.Dropdown.Menu,null,o.default.createElement(o.default.Fragment,null,n.map((function(e){return o.default.createElement(u.Dropdown.Item,{key:e.id,onClick:function(){return function(e){var t,n=V.tabInfo,o=r.findIndex((function(e){return e.pageId===n.pageId})),i=r.slice(0,o),a=r.slice(o+1),l=R.controlType,u=R.controlId;switch(e.key){case 2:M(n),t="openInNewWindow";break;case d.CLOSE_CURRENT_TAB:g([n]),t="closeVirtualTab";break;case d.CLOSE_ALL_TAB:g(r),t="closeVirtualTab",P=0;break;case d.CLOSE_OTHER_TAB:var f=r.filter((function(e){return e.pageId!==n.pageId}));g(f),t="closeVirtualTab";break;case d.AGAIN_OPEN_TAB:L(n),t="openInSystemTab";break;case d.CLOSE_LEFT_TAB:g(i),t="closeVirtualTab";break;case d.CLOSE_RIGHT_TAB:g(a),t="closeVirtualTab"}ve(),(0,s.setData)(c.KEY_UI_ACTION,{controlName:"",controlId:u,controlType:l,startTime:Date.now(),tableName:"right_click",methodKey:t,methodName:e.name})}(e)},className:(0,l.default)(a.default["context-menu-item"],"kd-cq-context-menu-item")},e.name)}))))},handlePopUpVisibleChange:function(e){return function(t){switch(e){case 1:t||1!==N?t&&1!==N&&F(1):F(null);break;case 2:if(K)return;t||2!==N||V.show?t&&2!==N&&(U({}),F(2)):ve();break;case 3:!t&&V.show&&U({})}}},handleContextMenu:function(e){return function(){U({tabInfo:e,show:!0})}},handleSelectTab:function(e,t){return function(){null!=n&&n.active||f(n),h(e),t&&ve()}},handleCloseTab:function(e){return function(t){t.stopPropagation(),g([e]),F(null)}}};return r.length>0&&o.default.createElement("div",{className:(0,l.default)(a.default["virtual-tab-out-wrap"],b({},a.default.hide,T)),ref:oe},Pe,o.default.createElement(m.default,v({virtualTabs:r,requireAnimate:I,tabsContainerRef:ne,virtualTabDragIng:te},_e)),Se&&o.default.createElement(y.default,v({virtualTabs:r,rightShow:we,virtualTabsDragOverItem:Q,virtualTabsDragStartItem:J,toNextPrev:ye,handleCloseAllPopUpPanel:ve,handleVirtualTabsDragStart:function(e,t){return function(r){r.target.querySelector("[drop-close-icon=true]").style.visibility="hidden",r.target.style.background="#fff",(!e.isActive||null==n||!n.active)&&(r.target.style.color="#666"),r.target.style.opacity=.5,r.dataTransfer.effectAllowed="move",q(!0),e.index=t,X(e)}},handleVirtualTabsDragOver:function(e,t){return function(r){r.preventDefault(),e.index=t,$(e)}},handleVirtualTabsDragEnd:function(e){e.target.querySelector("[drop-close-icon=true]").style.visibility="",e.target.style.opacity="",e.target.style.background="",e.target.style.color="",e.dataTransfer.dropEffect="move",q(!1);var t=be(J,Q);A(t),X({}),$({})}},_e)))},r(9692),r(622676),r(613468),r(323784),r(835164),r(693917),r(927184),r(803372),r(976896),r(721300),r(387912),r(86744);var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(795520)),i=r(790832),a=g(r(448352)),l=g(r(671252)),u=r(199860),c=r(868256),s=r(674260),f=g(r(139224)),d=r(773972),p=g(r(83308)),y=g(r(442816)),m=g(r(770708));function g(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},v.apply(this,arguments)}function b(e,t,r){var o;return o=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==n(o)?o:String(o))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||w(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){if(e){if("string"==typeof e)return S(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?S(e,t):void 0}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var P=0,_=24,C=28,k=24,E="",I=!0,T=!1,D=null;var j=function(e,t){(0,o.useEffect)((function(){var r;return null!=e&&e.current&&(r=(0,f.default)(e.current,(0,i.debounce)(t,500))),function(){var e;null===(e=r)||void 0===e||e.removeResizeObserve()}}),[null==e?void 0:e.current,t])}},770708:function(e,t,r){"use strict";r(697060),r(743924),r(606200),r(78504),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(182320),r(909112),r(360776),r(835164),r(205960),r(846428),r(387912);var n=u(r(795520)),o=u(r(671252)),i=u(r(448352)),a=r(199860),l=u(r(523304));function u(e){return e&&e.__esModule?e:{default:e}}function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t,r){var n;return n=function(e,t){if("object"!=c(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==c(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t.default=function(e){var t=e.virtualTabs,r=e.activeApp,u=e.requireAnimate,c=e.getContextMenu,f=e.showContextMenuInfo,d=e.tabsContainerRef,p=e.moreMenuShowType,y=e.virtualTabDragIng,m=e.handleCloseTab,g=e.handlePopUpVisibleChange,h=e.handleSelectTab,v=e.handleContextMenu;return n.default.createElement("ul",{className:(0,o.default)("kd-cq-control kd-cq-tabs kd-cq-tabs-virtual-tab",i.default["virtual-tab"],s({},i.default.animate,u)),ref:d},t.map((function(e,t){var u;return n.default.createElement(a.Dropdown,{popperStyle:{animation:"none"},menu:c(e.pageId),popperClassName:"kd-cq-context-menu",trigger:"contextMenu",key:e.pageId,visible:f.show&&e.pageId===(null===(u=f.tabInfo)||void 0===u?void 0:u.pageId)&&2!==p,onVisibleChange:g(3)},n.default.createElement("li",{key:e.pageId,"data-tabkey":e.pageId,"data-active":e.isActive,"data-splitscreen-pageid":e.pageId,"data-index":t,className:(0,o.default)([i.default.item],s({},i.default.active,e.isActive&&(null==r?void 0:r.active))),"data-tab-drag-pageid":e.pageId,onClick:h(e),onContextMenu:v(e)},n.default.createElement("span",{className:(0,o.default)(i.default.content,s({},[i.default.contentHover],!y))},n.default.createElement(l.default,null,n.default.createElement("span",{className:(0,o.default)(i.default.text),title:e.tabName},e.tabName))),n.default.createElement("i",{className:(0,o.default)([i.default["close-icon"]],"kdfont kdfont-toubudaohang_guanbi",s({},i.default["close-icon-drag"],y)),"drop-close-icon":"false",onClick:m(e)})))})))}},442816:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(743924),r(205960),r(846428),r(606200),r(387912),r(78504),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(835164);var o=u(r(795520)),i=u(r(448352)),a=u(r(671252)),l=r(199860);function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t,r){var o;return o=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==n(o)?o:String(o))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t.default=function(e){var t=e.virtualTabs,r=e.activeApp,n=e.virtualTabsDragOverItem,u=e.virtualTabsDragStartItem,s=e.showContextMenuInfo,f=e.moreMenuShowType,d=e.rightShow,p=e.toNextPrev,y=e.handleCloseAllPopUpPanel,m=e.getContextMenu,g=e.handlePopUpVisibleChange,h=e.handleVirtualTabsDragStart,v=e.handleVirtualTabsDragOver,b=e.handleVirtualTabsDragEnd,O=e.handleSelectTab,w=e.handleContextMenu,S=e.handleCloseTab,P=o.default.createElement(l.Dropdown.Menu,{onMouseLeave:y},o.default.createElement(o.default.Fragment,null,t.map((function(e,t){var d,p=(0,a.default)(i.default["more-virtual-item"],"kd-cq-dropdown-menu-item kd-dropdown-menu-item",c(c(c({},i.default.active,e.isActive&&(null==r?void 0:r.active)),i.default["virtual-tab-drag-bottom"],(null==n?void 0:n.pageId)===e.pageId&&(null==u?void 0:u.index)<(null==n?void 0:n.index)),i.default["virtual-tab-drag-top"],(null==n?void 0:n.pageId)===e.pageId&&(null==u?void 0:u.index)>(null==n?void 0:n.index)));return o.default.createElement(l.Dropdown,{popperStyle:{animation:"none"},menu:m(e.pageId),trigger:"contextMenu",key:e.pageId,visible:s.show&&e.pageId===(null===(d=s.tabInfo)||void 0===d?void 0:d.pageId)&&2===f,onVisibleChange:g(3),popperClassName:"kd-cq-context-menu"},o.default.createElement("li",{draggable:!0,key:e.pageId,onDragStart:h(e,t),onDragOver:v(e,t),onDragEnd:b,className:p,onClick:O(e,!0),onContextMenu:w(e)},o.default.createElement("span",{className:i.default.text},e.tabName),o.default.createElement("i",{className:(0,a.default)([i.default["close-icon"]],"kdfont kdfont-shanchu-s"),"drop-close-icon":"true",onClick:S(e)})))}))));return o.default.createElement("div",{className:i.default["more-right-wrap"]},d?o.default.createElement("span",{className:i.default["next-btn-wrap"],onClick:p("next")},o.default.createElement("i",{className:(0,a.default)("kdfont kdfont-houfan",i.default["next-btn"])})):null,o.default.createElement(l.Dropdown,{placement:"bottomLeft",menu:P,trigger:"hover",visible:2===f,onVisibleChange:g(2),popperClassName:(0,a.default)("kd-cq-dropdown kd-cq-dropdown-select-type")},o.default.createElement("span",{className:(0,a.default)(i.default["more-wrap"],c({},i.default.expand,2===f))},o.default.createElement("i",{className:(0,a.default)(i.default["more-icon"],"kdfont kdfont-gengduoxiala")}))))}},83308:function(e,t,r){"use strict";r(182320),r(909112),r(697060),r(505684),r(323784),r(743924),r(693917),r(976896),r(721300),r(606200),r(633768),r(690512),r(78504),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=_,t.findDataIndex=void 0,r(9692),r(613468),r(233696),r(927184),r(846428),r(76124),r(387912),r(571176),r(997308),r(86744);var n=l(r(384816)),o=l(r(448352)),i=r(868256),a=r(674260);function l(e){return e&&e.__esModule?e:{default:e}}function u(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var s,f=[],d="data-tab-drag-pageid",p="data-tab-drag-index",y="left",m="right",g=!1,h="",v="",b={x:"",y:""},O=!1,w={},S="",P=!1;function _(e,t){if(e){f=t,S=e;var r="",n=document.querySelector("[".concat(d,"='").concat(e,"']"));if(r=null==n?void 0:n.parentElement)return r.addEventListener("dragover",R),r.children.forEach((function(e,t){C(e,t)})),k(r)}}var C=function(e,t){e.draggable=!0,e.addEventListener("dragstart",L),e.setAttribute(p,t)},k=function(e){return function(){var t;e&&(e.removeEventListener("dragover",R),null==e||null===(t=e.children)||void 0===t||t.forEach((function(e){e.removeEventListener("dragstart",L)})))}},E=function(){var e=document.body;e.removeEventListener("dragover",R),e.removeEventListener("dragend",A),e.removeEventListener("selectstart",M)},I=function(e){var t=e.cloneNode(!0),r=e.getBoundingClientRect(),n=r.left,i=r.top,a=t.querySelector("[drop-close-icon=false]");t.removeChild(a),t.classList.add(o.default["virtual-tab-moveDrop"],"kd-cq-tabs-virtual-tab-drop-item");var l={position:"fixed",left:n+"px",top:i+"px",zIndex:99999,cursor:"pointer",opacity:1};P&&(l.pointerEvents="none"),function(e,t){for(var r in t)Object.hasOwnProperty.call(t,r)&&(e.style[r]=t[r])}(t,l),document.body.appendChild(t),e.style.visibility="hidden",g=!0,v=t},T=function(e,t){var r=e.getBoundingClientRect(),o=r.left,i=r.right,a=r.top,l=t===m?i:o,u=a+a/2;e.style.display="none";var c=function(e,t){var r,o=(0,n.default)(e,t);return null!=o&&o.getAttribute(p)?o:!(null==o||null===(r=o.parentElement)||void 0===r||!r.getAttribute(p))&&o.parentElement}(l,u);return e.style.display="",c},D=t.findDataIndex=function(e,t,r){return e.findIndex((function(e){return e[r]===t}))},j=function(e,t){var r=T(e,t);if(r){var n=function(e,t,r){return!(!e||!t)&&(r===m&&e[m]-t[y]<t.width?(e[m]-t[y])/t.width>=.3:r===y&&t[m]-e[y]<t.width&&(t[m]-e[y])/t.width>=.5)}(null==e?void 0:e.getBoundingClientRect(),null==r?void 0:r.getBoundingClientRect(),t);n&&(w.id=r.getAttribute(d),w.index=Number(r.getAttribute(p)),w.moveDirection=t,function(e){var t;if(Object.keys(e).length){var r=e.moveDirection,n=e.index,o=h.getBoundingClientRect().width,i=h.getAttribute(p),a=null===(t=h)||void 0===t?void 0:t.parentElement;a&&a.children.forEach((function(e,t){var a=0;t>=i&&(a-=o),r===y&&t>=n&&(a+=o),r===m&&t>n&&(a+=o),e.style.transform="translate(".concat(a,"px, 0px)"),e.style.transition="transform 0.2s cubic-bezier(0.2, 0, 0, 1)"}))}}(w))}},M=function(e){e.preventDefault()},L=function(e){var t;b={x:e.clientX,y:e.clientY},h=e.currentTarget,e.currentTarget.style.opacity=0,e.dataTransfer&&(e.dataTransfer.effectAllowed="move"),(t=document.body).addEventListener("dragover",R),t.addEventListener("dragend",A),t.addEventListener("selectstart",M)},R=function(e){if(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="move"),!g){var t={x:e.clientX,y:e.clientY};h.style.opacity=1;var r=function(e,t){var r=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y);return r>10||n>10}(b,t);return!!r&&I(h)}var n=e.clientX,o=e.clientY,l=parseInt(v.style.left||0),u=n-b.x;if(0!==u){var c=u>0?m:y,s={};s=function(e,t,r,n,o){var i=e.getBoundingClientRect(),a=i.top,l=i.height;return r-a>90?(t.top=r-l/2+"px",O=!0):t.top!==a&&(t.top=a+"px",O=!1),t.left=n+o+"px",t}(h,s,o,l,u),s.left&&(v.style.left=s.left),s.top&&(v.style.top=s.top),b={x:e.clientX,y:e.clientY},O||((0,a.setData)(i.KEY_DRAGOVER_TAB,{moveDrop:v,moveDirection:c}),j(v,c))}},A=function(){E();var e,t,r=function(e){if(O)return f;var t=u(f),r=Number(h.getAttribute(p));if(Object.keys(e).length){var n=e.moveDirection===m?1:0,o=t.splice(r,1),i=D(t,e.id,"pageId");t.splice.apply(t,[i+n,0].concat(u(o)))}return t}(w);(0,a.setData)(i.KEY_DRAGEND_TAB,r),null==(t=h.parentElement)||null===(e=t.children)||void 0===e||e.forEach((function(e,t){e.style.transform="",e.style.transition="",e.removeAttribute(p)})),v&&document.body.removeChild(v),v="",g=!1,h&&(h.style.visibility=""),h&&(h.style.opacity=""),h="",w={}},x=(0,a.addDataChangeListener)(i.KEY_SPLIT_SCREEN_VISIBLE,(function(e){P=e.visible,setTimeout((function(){s&&s(),s=_(S,f)}),100)})),N=(0,a.addDataChangeListener)(i.KEY_MOVE_DRAG,(function(e){var t=e.moveDrop,r=e.moveDirection;j(t,r===m?m:y)}));window.onunload=function(){x&&x(),N&&N()}},95821:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(743924),r(205960),r(846428),r(708896),r(606200),r(534440),r(670864),r(836887),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.DropDownWithCheck=T,t.default=void 0,r(9692),r(622676),r(241872),r(835164),r(297336),r(721300),r(880920),r(387912);var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=v(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(795520)),i=h(r(369396)),a=h(r(671252)),l=h(r(540900)),u=r(439532),c=h(r(501772)),s=r(331428),f=h(r(481128)),d=r(703188),p=h(r(790832)),y=r(199860),m=h(r(264760)),g=r(414460);function h(e){return e&&e.__esModule?e:{default:e}}function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}function b(e,t,r){return(t=w(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,w(n.key),n)}}function w(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function S(e,t,r){return t=_(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return C(e)}(e,P()?Reflect.construct(t,r||[],_(e).constructor):t.apply(e,r))}function P(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(P=function(){return!!e})()}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,t){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k(e,t)}var E=function(e){function t(e){var r,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=S(this,t,[e])).getPanel=function(){var e=r.state.listWithConfirm.map((function(e){return e})),t=r.state.listWithCustom,n={};if(r.parentDom){var i=r.parentDom.getBoundingClientRect();n.maxWidth=g.TOOLBAR_ITEM_MAX_WIDTH,n.minWidth=i.width}return o.default.createElement("div",{className:(0,a.default)("kd-cq-dropdown kd-cq-dropdown-select-type",m.default["dropdown-menu-wrapper"],f.default["panel-drop-down-animation"]),ref:function(e){r.attachElement=e}},o.default.createElement("div",{style:n,className:m.default["dropdown-menu"]},r.state.isCustomModel?o.default.createElement(T,{dropDownList:e,checkboxChange:r.checkboxChange.bind(C(r)),dropDownItemClick:r.dropDownItemClick,userLocal:r.props.model.getUserLocale(),model:r.props.model}):o.default.createElement(I,{pageId:r.pageId,dropDownList:t,dropDownItemClick:r.dropDownItemClick})))},r.judgeStatus=function(){r.state.hide?r.openSelectPanel():r.closeSelectPanel()},r.dropDownItemClick=function(e){var t=r.props,n=t.onDropDownClick,o=t.postDataToUIState;"__custom__"===e.id?r.setState({isCustomModel:!0,hide:!1},(function(){r.computePanelPosition()})):"__confirm__"===e.id?r.setState({isCustomModel:!1,hide:!0},(function(){r.destroySelectPanel(),o&&o()})):(r.setState({hide:!0}),n&&n(e.id,e.opk),r.destroySelectPanel())},r.state={hide:!0,isCustomModel:!1,listWithConfirm:(n=e.dropDownList.filter((function(e){return!e.isNotMod})),n.push({id:"__confirm__",name:(0,s.getLangMsg)({key:"toolbar.complete"})}),n),listWithCustom:e.dropDownList.filter((function(e){return!e.isChecked}))},r.pageId=e.model.pageId,r.onClickOutSide=r.onClickOutSide.bind(C(r)),r.closeSelectPanel=r.closeSelectPanel.bind(C(r)),r.keyDownHandler=r.keyDownHandler.bind(C(r)),r.resizeHandler=p.default.debounce(r.closeSelectPanel,300,{leading:!0,trailing:!0}),r}var r,n,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}(t,e),r=t,(n=[{key:"componentWillReceiveProps",value:function(e){var t=e.dropDownList.filter((function(e){return!e.isNotMod}));t.push({id:"__confirm__",name:(0,s.getLangMsg)({key:"toolbar.complete"})});var r=e.dropDownList.filter((function(e){return!e.isChecked}));r.push({id:"__custom__",name:(0,s.getLangMsg)({key:"toolbar.custom"})}),this.setState({listWithConfirm:t,listWithCustom:r})}},{key:"render",value:function(){var e=this,t=(0,a.default)("kd-cq-control kd-cq-btn kd-btn-bg",b(b(b(b({},m.default["dropdown-container"],!0),m.default["more-btn"],!0),"toolbar-btn-without-theme",!0),"toolbar-dropdown-container",!this.state.hide)),r=this.getPanel(),n=this.props.style,l=(n||{}).color;return o.default.createElement("div",{style:n,className:t,ref:function(t){e.parentDom=t},onClick:function(){e.judgeStatus()}},o.default.createElement("span",{className:m.default.textspan,style:{color:l}},(0,s.getLangMsg)({key:"toolbar.more"})),o.default.createElement("span",{style:{color:l},className:(0,a.default)("kdfont kdfont-xiala",m.default["arrow-down"],f.default["arrow-move-in-animation"],b({},f.default["arrow-move-out-animation"],!this.state.hide))}),!this.state.hide&&i.default.createPortal(r,document.body))}},{key:"bindEventOfSelectPanel",value:function(){document.addEventListener("click",this.onClickOutSide),document.addEventListener("scroll",this.onClickOutSide,!0),document.addEventListener("keydown",this.keyDownHandler,!0),window.addEventListener("resize",this.resizeHandler)}},{key:"unBindEventOfSelectPanel",value:function(){document.removeEventListener("click",this.onClickOutSide),document.removeEventListener("scroll",this.onClickOutSide,!0),document.removeEventListener("keydown",this.keyDownHandler,!0),window.removeEventListener("resize",this.resizeHandler)}},{key:"openSelectPanel",value:function(){var e=this;this.setState({hide:!1,isCustomModel:!1},(function(){e.computePanelPosition(),e.bindEventOfSelectPanel()}))}},{key:"closeSelectPanel",value:function(){this.setState({hide:!0,isCustomModel:!1}),this.unBindEventOfSelectPanel(),this.destroySelectPanel()}},{key:"onClickOutSide",value:function(e){if(!this.state.hide||this.attachElement){for(var t=e.target;t;){try{if(t===this.attachElement||t===i.default.findDOMNode(this)||t.className&&t.className.indexOf("bottom")>-1||t.className&&t.className.indexOf("toolbars-menus-list")>-1)return}catch(e){console.warn(e)}t=t.parentNode}this.closeSelectPanel(),this.props.renewOldItems&&this.props.renewOldItems()}}},{key:"keyDownHandler",value:function(e){if(e.keyCode===d.KEYS.ESC){if(this.state.hide&&!this.attachElement)return;e.stopPropagation(),this.closeSelectPanel(),this.props.renewOldItems&&this.props.renewOldItems()}}},{key:"checkboxChange",value:function(e,t){var r=this.state.listWithConfirm.map((function(e){return e}));this.props.modifyBtsStatus&&this.props.modifyBtsStatus(r[t],!e)}},{key:"componentDidUpdate",value:function(){this.computePanelPosition()}},{key:"computePanelPosition",value:function(){var e=i.default.findDOMNode(this),t=this.attachElement;if(e&&t){var r=(0,u.adaptivePopupWindow)(this.parentDom,this.attachElement,0),n=r.top,o=r.left;t.style.cssText+=";display: block;top: ".concat(n,";left: ").concat(o,";")}}},{key:"destroySelectPanel",value:function(){this.attachElement&&(this.attachElement=null)}}])&&O(r.prototype,n),l&&O(r,l),Object.defineProperty(r,"prototype",{writable:!1}),t}(o.Component);function I(e){var t=e.dropDownList,r=t.map((function(r,n){var i={};return(!r.isSonItem||0!==n&&t[n-1].item.get("groupId")!==r.item.get("groupId"))&&(i.borderTop="1px solid #E5E5E5"),(!r.isClick&&"__custom__"!==r.id||r.locked)&&(i.color="rgba(0,0,0,0.3)",i.cursor="default"),"__custom__"===r.id?null:o.default.createElement("li",{key:r.id+"baritem",className:"kd-cq-dropdown-menu-item kd-hover",style:i,onClick:function(t){t.stopPropagation(),!r.isClick&&"__custom__"!==r.id||r.locked||e.dropDownItemClick(r,n)},"data-opkkey":e.pageId+"_"+r.opk,title:"__custom__"===r.id?null:r.name},"__custom__"===r.id?null:r.name)})),n=(0,a.default)(b(b({"toolbars-menus-list":!0},m.default["toolbars-menus-list"],!0),e.className,!!e.className)),i=(0,a.default)("kd-cq-dropdown-menu-item",b(b({bottom:!0},m.default.bottom,!0),m.default.border_top,t.length>1)),l=t.length-1,u=t[l];return o.default.createElement("div",null,o.default.createElement("ul",{style:{maxWidth:"600px"},className:n},r),o.default.createElement("div",{className:i,onClick:function(t){t.stopPropagation(),e.dropDownItemClick(u,l)}},o.default.createElement("span",{className:(0,a.default)(m.default["li-container"])},o.default.createElement("span",{className:"kdfont kdfont-shezhixian"})," ",o.default.createElement("span",null,(0,s.getLangMsg)({key:"toolbar.custom"}))," ")))}function T(e){var t=e.dropDownList,r=o.default.createElement("div",{className:(0,a.default)("kd-cq-tooltip",m.default.tooltips)},o.default.createElement("h4",null,(0,s.getLangMsg)("toolbar.tipsTitle")),o.default.createElement("p",null,"1. ",(0,s.getLangMsg)("toolbar.tipsContent1")),o.default.createElement("p",null,"2. ",(0,s.getLangMsg)("toolbar.tipsContent2")),o.default.createElement("p",null,"3. ",(0,s.getLangMsg)("toolbar.tipsContent3")),o.default.createElement("p",null,"4. ",(0,s.getLangMsg)("toolbar.tipsContent4"))),n=t.map((function(t,r){var n={paddingRight:"18px"};return!t.isSonItem&&(n.borderTop="1px solid #E5E5E5"),"title"===t.id||"__confirm__"===t.id?null:o.default.createElement("li",{key:t.id,className:(0,a.default)(b({"kd-cq-dropdown-menu-item kd-hover":!0},m.default.check_li,!0)),style:n,onClick:function(n){n.stopPropagation(),"__confirm__"!==t.id?e.checkboxChange(!t.isChecked,r):e.dropDownItemClick(t,r)}},o.default.createElement("span",{title:t.name,style:{width:"96px"},className:(0,a.default)("kd-cq-control kd-cq-btn",b(b(b({},m.default.name_span,!0),m.default.confirm,"__confirm__"===t.id),"theme-bg","__confirm__"===t.id))},t.name),o.default.createElement(c.default,{size:3,isOpenTheme:!0,value:t.isChecked,onClick:function(n){n.stopPropagation(),e.checkboxChange(!t.isChecked,r)}}))})),i=(0,a.default)(b(b({"toolbars-menus-list":!0},m.default["toolbars-menus-list"],!0),m.default["drop-down-check-list"],!0)),l=t.length-1,u=t[l];return o.default.createElement("div",null,o.default.createElement("div",{className:(0,a.default)(b({"kd-hover":!0},m.default.top_footer_div,!0)),style:{background:"rgba(230,232,238,1)"}},o.default.createElement("span",{className:(0,a.default)("kd-cq-dropdown-menu-item",m.default.custom_title,m.default.custom_title_left)},(0,s.getLangMsg)({key:"toolbar.name"}),o.default.createElement(y.Tooltip,{tip:r,mouseLeaveDelay:.3},o.default.createElement(y.Icon,{type:"tips",className:m.default.titleIcon}))),o.default.createElement("span",{style:{textAlign:"right"},className:(0,a.default)("kd-cq-dropdown-menu-item",m.default.custom_title)},(0,s.getLangMsg)({key:"toolbar.isOut"}))),o.default.createElement("ul",{className:i},n),o.default.createElement("div",{className:(0,a.default)(b({},m.default.top_footer_div,!0)),style:{borderTop:"1px solid #E5E5E5",justifyContent:"center",height:"40px"},onClick:function(t){t.stopPropagation(),e.dropDownItemClick(u,l)}},o.default.createElement("span",{title:u.name,style:{width:"96px"},className:(0,a.default)("kd-cq-control kd-cq-btn",b(b(b({},m.default.name_span,!0),m.default.confirm,!0),"theme-bg",!0))},u.name)))}E.propTypes={onDropDownClick:l.default.func,dropDownList:l.default.array,postDataToUIState:l.default.func};t.default=E},226164:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(505684),r(323784),r(743924),r(693917),r(721300),r(606200),r(534440),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(233696),r(976896),r(387912),r(633768),r(690512),r(513640),r(321164),r(997308);var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(795520)),i=r(891052),a=r(439532),l=f(r(493856)),u=r(738704),c=f(r(394608)),s=r(290600);function f(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}t.default=function(e){var t=e.model,r=e.lock,n=e.style,f=e.inputProps,d=e.inputStyle,y=e.option,m=e.showAddressModal,g=e.getAddressSearchList,h=e.changeAddressVal,v=e.setItemByNumber,b=p((0,o.useState)(0),2),O=b[0],w=b[1],S=p((0,o.useState)([]),2),P=S[0],_=S[1],C=(0,o.useRef)();(0,o.useEffect)((function(){var e=t.pageId,r=t.key;C.current=(0,c.default)(g,300);var n=(0,u.subscribeControlMethod)(e,r,"directives",(function(e){void 0!==e&&k(e)}));return function(){n&&n()}}),[]);var k=function(e){e.forEach((function(e){var t=e.methodname,r=e.args;if("setAddress"===t)r&&_(r[0]),w((0,a.createNewId)())}))},E=(0,a.getCommonClass)(t),I=E.Grow,T=E.Shrink,D=E.AlignSelf,j=!1!==y.get(s.ADDRESS_OPEN_FUZZY_QUERY),M=t.getDataProperty(["value",1]);return"string"==typeof M&&(M=M.replace(/(\r)/g,"").trim()),o.default.createElement(l.default,{containerStyle:n,Grow:I,Shrink:T,AlignSelf:D,value:M,inputStyle:d,inputProps:f,handleIconClick:function(e){e.stopPropagation(),!r&&m&&m(t)},addressSearchList:(0,i.fromJS)(P),refreshId:O,handleAddressChange:function(e){var r=C.current;r&&r(t,e)},handleAddressSelectItem:function(e){var r={};r.id=e,r.entryType=0,h&&h(t,r)},openFuzzyQuery:j,setItemByNumber:function(e){v&&v(t,e)}})}},593136:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(622676),r(233696),r(743924),r(205960),r(846428),r(336368),r(708896),r(969e3),r(606200),r(534440),r(76152),r(670864),r(76124),r(387912),r(836887),r(78504),r(776512),r(997308),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(9692),r(297336),r(880920);var o,i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(795520)),a=r(439532),l=(o=r(385672))&&o.__esModule?o:{default:o},u=r(237373),c=r(891052),s=r(323968),f=r(290600),d=r(580032),p=r(248672),y=r(251536),m=r(218652),g=r(211152);function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},v.apply(this,arguments)}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){w(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(e,t,r){return(t=P(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,P(n.key),n)}}function P(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function _(e,t,r){return t=k(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,C()?Reflect.construct(t,r||[],k(e).constructor):t.apply(e,r))}function C(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(C=function(){return!!e})()}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}function E(e,t){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},E(e,t)}t.default=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=_(this,t,[].concat(n))).beforeUpload=function(t){e.props.dispatch((0,s.beforeUpload)(e.props.model,t))},e.beforeDownload=function(t){e.props.dispatch((0,s.beforeDownload)(e.props.model,t))},e.uploadFile=function(t){e.props.onChange&&e.props.onChange(t)},e.afterUpload=function(t){e.props.dispatch((0,s.reportUploadResult)(e.props.model,t))},e.removeFile=function(t){e.props.onChange&&e.props.onChange(t,"remove")},e.remarkClick=function(t){e.props.remarkClick(e.props.model,t)},e.attachOperationCount=function(t){e.props.dispatch((0,s.attachOperationCount)(e.props.model,t))},e.attachOperaClick=function(t){e.props.dispatch((0,s.attachOperaClick)(e.props.model,t))},e.updateControlValue=function(t){var r=e.props,n=r.model,o=r.dispatch,i=n.pageId,a=n.key;(0,y.mergeState)(u.UPDATE_CONTROL_VALUE,i,{key:a,value:(0,c.fromJS)(t),updateData:!1},o)},e.updateFieldPostValue=function(t){var r=e.props.model,n=r.pageId,o=r.key;(0,m.setFieldPostValue)(n,o,t)((0,g.getGlobalState)())},e.comfirmDelete=function(t){e.props.dispatch((0,s.comfirmDelete)(e.props.model,t))},e.rename=function(t){e.props.dispatch((0,s.rename)(e.props.model,t))},e.dragFile=function(t){e.props.dispatch((0,s.dragFile)(e.props.model,t))},e.getMaxPreivewSize=function(){return 1},e.handlePreviewInNewTab=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(e.attachmentConfig.openByNewTab){var n=[{activedIndex:t,sortedUids:r}];e.props.dispatch((0,s.previewInNewTab)(e.props.model,n))}},e}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){this.attachmentConfig=(0,a.getAttachInfoFromRootConfig)()}},{key:"render",value:function(){var e=this.props,t=e.model,r=e.dispatch,n=e.showTitle,o=e.value,u=e.disabled,c=e.style,s=e.labelStyle,y=t.getMetaProperty("item"),m=t.getMetaLocaleProperty("caption"),g=y&&y.get("ext"),h=y&&y.get("sct")||!1,b=y&&y.get("scd")||!1,w=y&&y.get("smk")||!1,S=y&&y.get("maxatmsize"),P=y&&y.get("maxatmcount")||0,_=y&&y.get("checkDuplicateFileName")||!1,C=(0,a.getCommonClass)(t),k=C.Grow,E=C.Shrink,I=C.AlignSelf,T=y&&y.get(p.DRAGBLE),D=O(O({},(0,a.getCommonStyle)(t)),c);this.attachmentConfig||(this.attachmentConfig=(0,a.getAttachInfoFromRootConfig)());var j=this.attachmentConfig,M=j.attachmentUploadMaxSize,L=j.forbidfiletype,R=j.fileTypeWhiteList,A=j.previewType,x=j.openByNewTab,N=(j.wpsAppId,(0,d.getPreviewLimitSize)()),F=(0,a.getComponentDataProperty)(t,f.ATTACHMENT_SHOWOPERABUTTON,f.ATTACHMENT_SHOWOPERABUTTON,!1)||!1,B=(0,a.getComponentDataProperty)(t,f.ATTACHMENT_DATE_FORMATTER,f.ATTACHMENT_DATE_FORMATTER,!1),V=(0,d.getMaxSize)(S,M),U=y&&y.get("sortField")||p.ATTACHMENT_SORT_FIELD.FileName,W=y&&y.get("sortType")||p.ATTACHMENT_SORT_TYPE.NoSort,H=(0,d.getLifeCycle)(t.pageId,t.getMetaProperty([f.ITEM,f.FIELD_TYPE])),z=null!=H&&H.beforeDownload?this.beforeDownload:null,G=null==H?void 0:H.fileEncrypt;return i.default.createElement(l.default,v({id:t.key,model:t,locale:t.getUserLocale(),dispatch:r,disabled:u,displayData:o,beforeUpload:this.beforeUpload,beforeDownload:z,uploadFile:this.uploadFile,afterUpload:this.afterUpload,removeFile:this.removeFile,comfirmDelete:this.comfirmDelete,updateControlValue:this.updateControlValue,style:D,labelStyle:s,extName:g,showCreator:h,showCreateDate:b,showMark:w,Grow:k,Shrink:E,AlignSelf:I,Name:m,showFormByTips:this.props.showFormByTips,isField:!0,showTitle:n,maxAtmCount:P,remarkClick:this.remarkClick,maxSize:V,attachOperationCount:this.attachOperationCount,attachOperaClick:this.attachOperaClick,forbidfiletype:L,fileTypeWhiteList:R,showOperaBut:F,previewType:A,openByNewTab:x,onNewTabPreview:this.handlePreviewInNewTab,renameFile:this.rename,sortField:U,sortType:W,checkDuplicateFileName:_,dateFormatter:B,previewLimitSize:N,isFileEncrypt:G,dragFile:this.dragFile,dragble:T,updateControlPostValue:this.updateFieldPostValue},this.props.attachData))}}])&&S(r.prototype,n),o&&S(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(i.Component)},95e3:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(241872),r(743924),r(205960),r(846428),r(336368),r(708896),r(606200),r(534440),r(670864),r(76124),r(836887),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(305092),r(443616),r(835164),r(297336),r(286620),r(880920),r(387912),r(660824),r(321164),r(86744);var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=P(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(795520)),i=r(891052),a=S(r(540900)),l=r(790832),u=r(290600),c=S(r(834260)),s=r(545072),f=r(218652),d=r(994088),p=r(738704),y=r(439532),m=r(654500),g=r(735696),h=r(125508),v=r(455836),b=r(794432),O=r(993176),w=["model","dispatch","option","type","value","placeholder","mustInput","enable","isNoOption"];function S(e){return e&&e.__esModule?e:{default:e}}function P(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(P=function(e){return e?r:t})(e)}function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_.apply(this,arguments)}function C(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function k(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,E(n.key),n)}}function E(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function I(e,t,r){return t=D(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return j(e)}(e,T()?Reflect.construct(t,r||[],D(e).constructor):t.apply(e,r))}function T(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(T=function(){return!!e})()}function D(e){return D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},D(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e,t){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},M(e,t)}var L=!0,R=t.default=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=I(this,t,[e])).handleUnauthorized=function(e){if(e.mulbasedata){var t=r.props.model.key,n=e.mulbasedata.unauthorizedList;(void 0===n?[]:n).includes(t)&&r.setState({prohibitFuzzyQuery:!0})}},r.setEnterToQuery=function(e,t){var n,o=r.props.option,i=t||o&&o.get(u.BaseEntityId),a="all"===e.range||(null===(n=e.bdList)||void 0===n?void 0:n.includes(i));a!==r.state.enterToQuery&&r.setState({enterToQuery:a})},r.setFilterFrequent=function(e){r.setState({filterFrequent:(0,i.fromJS)(e),filterFrequentRefreshId:(0,y.createNewId)()})},r.handleConvertToCode=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=r.props,n=t.model,o=t.option,a=void 0===o?(0,i.Map)():o,l=t.type,c=a.get(u.BaseEntityId),s=a.get(u.EDIT_PROP),f=(0,d.getBaseDataFrequent)(c,l),p=n.getDataProperty(["value"]);if("name"===s&&"mulbasedata"!==l&&""!==e&&f&&!(i.List.isList(p)&&p.get(2)===e)){var y,m=null===(y=f.find((function(t){return(null==t?void 0:t.get(2))===e})))||void 0===y?void 0:y.get(1);if(m)return m}var g=a.get(u.EDIT_CONNECTOR);return(0,d.convertToCode)(e,p,g,s,l)},r.baseDataClickAjax=function(e){e.value!==m.AJAX_PENDING&&(clearTimeout(r.clearClickBaseDataTimer),L=!0)},r.onHandleBaseDataClick=function(){var e=r.props,t=e.dispatch,n=e.model;e.lock||L&&(L=!1,r.clearClickBaseDataTimer=setTimeout((function(){L=!0}),3e3),t((0,g.clickBaseData)(n)))},r.onBaseDataSelectItem=function(e,t){var n=r.props,o=n.model,i=n.enable,a=n.mustInput,l=o.pageId,u=o.key,c={};c.id=e,c.entryType=0,c.delLocalValue=t,g.setItemByIdFromClient&&r.props.dispatch((0,g.setItemByIdFromClient)(o,c)),i&&a&&((0,f.deleteFieldValidateMsg)(l,u),(0,f.deleteFieldValidateCaption)(l,u),(0,p.deletePageData)(l,[s.PARENT_COLLAPSE_PANEL_ID,u]))},r.cacheBaseDataQueryParams=function(e){var t=r.props.model,n=t.pageId,o=t.key,i=e.left,a=e.value,l=e.right,u=e.entryType,c=e.countStart,f=e.countEnd;(0,p.setPageData)(n,[o,s.BASE_DATA_QUERY_PARAMS],[i,a,l,u,c,f])},r.handleBaseDataValidate=function(e){var t=r.props,n=t.model,o=t.enable,i=t.mustInput;if(o&&i&&!e){var a=n.pageId,l=n.key,u=n.getMetaLocaleProperty("caption");(0,f.setFieldValidateMsg)(a,l),(0,f.setFieldValidateCaption)(a,l,s.VALIDATE_MSG_TYPE.notNull,u),(0,f.setParentCollapsePanelId)(a,l)}},r.showMoreClick=function(e){var t=r.props.model,n={};n.searchword=e,n.entryType=0,g.showMore&&r.props.dispatch((0,g.showMore)(t,n))},r.onClickAddBtn=function(e){var t=r.props.model;g.onClickAddBtn&&r.props.dispatch((0,g.onClickAddBtn)(t,{searchword:e}))},r.onViewDetailBtnClick=function(){var e=r.props.model;g.onViewDetailBtnClick&&r.props.dispatch((0,g.onViewDetailBtnClick)(e,{rowKey:-1,entryType:0}))},r.clearControlValue=function(){var e=r.props.model,t=e.pageId,n=e.key,o=(e.getMetaProperty("item")||(0,i.fromJS)({})).get("type");(0,O.setControlStateValue)({pageId:t,key:n,fieldType:o,rowIndex:-1,value:null})},r.state={filterFrequent:(0,i.List)(),enterToQuery:!1,prohibitFuzzyQuery:!1},r.baseDataClickAjax=(0,l.debounce)(r.baseDataClickAjax.bind(j(r)),500),r.handleBaseDataChange=(0,l.debounce)(r.handleBaseDataChange.bind(j(r)),300),r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&M(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.model,r=e.option,n=e.type,o=t.pageId,i=t.key,a=r.get(u.F7_SHOW_FREQUENT);this.removefrequentListener=a?(0,p.addDataChangeListener)(o,[i,"filterFrequent"],this.setFilterFrequent):null,this.removeBaseDataClickAjaxListener=(0,m.addAjaxStateListener)(o,i,"click",this.baseDataClickAjax);var l=(0,p.getPageData)(o,[s.PAGE_CONFIG,v.BD_ENTER_TO_QUERY]);if(l&&this.setEnterToQuery(l),this.removeSetEnterToQueryListener=(0,p.addDataChangeListener)(o,[s.PAGE_CONFIG,v.BD_ENTER_TO_QUERY],this.setEnterToQuery),"mulbasedata"===n){var c=(0,p.getPageData)(o,[s.PAGE_CONFIG,u.Ctrls.KDField]);c&&this.handleUnauthorized(c),this.removePageConfigListener=(0,p.addDataChangeListener)(o,[s.PAGE_CONFIG,u.Ctrls.KDField],this.handleUnauthorized)}}},{key:"componentWillReceiveProps",value:function(e){var t,r,n=null===(t=this.props.option)||void 0===t?void 0:t.get(u.BaseEntityId),o=null===(r=e.option)||void 0===r?void 0:r.get(u.BaseEntityId);if(n!==o){var i=e.model.pageId,a=(0,p.getPageData)(i,[s.PAGE_CONFIG,v.BD_ENTER_TO_QUERY]);a&&this.setEnterToQuery(a,o)}}},{key:"componentWillUnmount",value:function(){var e,t,r;this.removefrequentListener&&this.removefrequentListener(),null===(e=this.removeBaseDataClickAjaxListener)||void 0===e||e.call(this),null===(t=this.removeSetEnterToQueryListener)||void 0===t||t.call(this),null===(r=this.removePageConfigListener)||void 0===r||r.call(this)}},{key:"componentDidUpdate",value:function(e,t){var r=this.props,n=r.model,o=r.type,i=r.mustInput,a=r.enable,l=e.model,u=n.pageId,c=n.key,d=n.getDataProperty(["value",2]),y=l.getDataProperty(["value",2]);if("mulbasedata"===o){var m=n.getDataProperty(["value"]);m&&m.map&&0!==m.size&&i&&a&&((0,f.deleteFieldValidateMsg)(u,c),(0,f.deleteFieldValidateCaption)(u,c),(0,p.deletePageData)(u,[s.PARENT_COLLAPSE_PANEL_ID,c]))}else{var g=n.getDataProperty(["value",1]),h=n.getDataProperty(["value",0]);g&&h&&d&&i&&a&&((0,f.deleteFieldValidateMsg)(u,c),(0,f.deleteFieldValidateCaption)(u,c),(0,p.deletePageData)(u,[s.PARENT_COLLAPSE_PANEL_ID,c]))}d!==y&&(0,b.clearGroupValidateMes)({pageId:u,key:c})}},{key:"handleBaseDataChange",value:function(e){var t=e.value;if(t){""===t.trim()&&(e.value=""),this.cacheBaseDataQueryParams(e);var r=this.props.model,n=r.pageId,o=r.key;g.getLookUpList&&this.props.dispatch((0,g.getLookUpList)(this.props.model,e)),(0,h.updateF7GetLookUpListStatus)(n,o,!0)}}},{key:"handleFilterFrequent",value:function(e){this.props.dispatch((0,g.filterFrequentData)(this.props.model,e))}},{key:"render",value:function(){var e,t=this,r=this.props,n=r.model,i=(r.dispatch,r.option),a=r.type,l=(r.value,r.placeholder),f=r.mustInput,p=(r.enable,r.isNoOption),m=C(r,w),g=this.state,h=g.filterFrequent,v=g.enterToQuery,b=g.prohibitFuzzyQuery,O=n.getDataProperty(["value"]),S=n.getDataProperty(["value",1]),P=n.getDataProperty(["value",0]),k=n.getDataProperty(["value",2]);"mulbasedata"===a&&(S="",P="",k="",O&&O.map&&O.map((function(e,t){k+=e.get(2)+s.F7_DELIMITER,S+=(0===t?"":s.F7_DELIMITER)+e.get(1),P+=(0===t?"":s.F7_DELIMITER)+e.get(0)}))),S=(0,d.getBaseDataDisplayProp)(n.getDataProperty(["value"]),i&&i.get(u.DISPLAY_PROP),"mulbasedata"===a,i&&i.get(u.CONNECTOR));var E=n.getDataProperty([u.F7_LOOKUP_LIST_ID]),I=i.get("dst"),T=i.get(u.F7_QUICK_ADDNEW),D=i.get(u.F7_VIEW_DETAIL_BUTTON),j=(1===I||!p)&&i.get(u.F7_OPEN_FUZZY_QUERY),M=i&&i.get(u.BaseEntityId),L=(0,d.getBaseDataFrequent)(M,a),R=i.get(u.F7_SHOW_FREQUENT),A=i.get(u.SELECTED_ITEM_STYLE),x=i.get(u.F7_LABEL_FOLDING_STATE),N=Object.is(i.get(u.FIELD_STYLE),2),F=i.get(u.F7_FONT_CLASS),B=i.get(u.F7_EDIT_STYLE);b&&(B=1);var V=i.get(u.EDIT_PROP),U=i.get(u.DISPLAY_PROP),W=i.get(u.EDIT_CONNECTOR),H=i.get(u.F7_MULTI_LINE),z=void 0!==(null===(e=(0,y.getCommonStyle)(n))||void 0===e?void 0:e.height);return o.default.createElement(c.default,_({id:n.key,onClick:this.onHandleBaseDataClick,onBaseDataSelectItem:this.onBaseDataSelectItem,onBaseDataChange:function(e){return t.handleBaseDataChange(e)},onFilterFrequent:function(e){return t.handleFilterFrequent(e)},handleValidate:this.handleBaseDataValidate,showMoreClick:this.showMoreClick,onClickAddBtn:this.onClickAddBtn,onViewDetailBtnClick:this.onViewDetailBtnClick,onConvertToCode:this.handleConvertToCode,selectedData:O,alias:S,entityId:M,value:k,code:P,placeholder:l,lookUpList:E?E.get("data"):void 0,hasMore:E?E.get("next"):void 0,columns:E?E.get("columns"):void 0,size:E?E.get("size"):void 0,inited:E?E.get("inited"):void 0,refreshId:E?E.get("refreshId"):void 0,filterFrequentRefreshId:this.state.filterFrequentRefreshId,displayType:I,showAddBtnWhenNoData:T,showViewDetailBtn:D,type:a,noValue:(0,y.getNOValue)(),openFuzzyQuery:j,enterToQuery:v,frequent:L,filterFrequent:h,showFrequent:R,selectedItemStyle:A,labelFoldingState:x,allBorder:N,fontClass:F,editStyle:B,mustInput:f,editProp:V,displayProp:U,isMulLine:H,hasLimitHeight:z,editConnector:W,isNoOption:p,clearControlValue:this.clearControlValue},m))}}])&&k(r.prototype,n),a&&k(r,a),Object.defineProperty(r,"prototype",{writable:!1}),t}(o.Component);R.propTypes={model:a.default.object.isRequired,option:a.default.object.isRequired}},779764:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(241872),r(743924),r(205960),r(846428),r(336368),r(708896),r(606200),r(534440),r(670864),r(76124),r(387912),r(836887),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(9692),r(297336),r(880920);var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(795520)),i=f(r(540900)),a=f(r(88119)),l=r(290600),u=r(891052),c=r(439532),s=["model","option","style","fileServer","mustInput","onBlur","disabled","value","placeholder","onChange"];function f(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},p.apply(this,arguments)}function y(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,g(n.key),n)}}function g(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function h(e,t,r){return t=b(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,v()?Reflect.construct(t,r||[],b(e).constructor):t.apply(e,r))}function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(v=function(){return!!e})()}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function O(e,t){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},O(e,t)}var w=t.default=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=h(this,t,[].concat(n))).getLang=function(t){var r=e.props.model;return(0,c.getLangResult)(r,t)},e}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this.props,t=e.model,r=e.option,n=e.style,i=(e.fileServer,e.mustInput),f=(e.onBlur,e.disabled),d=e.value,m=e.placeholder,g=e.onChange,h=y(e,s),v=(0,c.getComponentDataProperty)(t,l.STORE,["item",l.STORE])||(0,u.List)(),b=d&&d.split(","),O=r.get("changeOnSelect")||!1;return o.default.createElement(a.default,p({noValue:(0,c.getNOValue)(),style:n,options:v,required:i,value:b,onChange:g,disabled:f,placeholder:m,isImmeBackfill:O,getLang:this.getLang},h))}}])&&m(r.prototype,n),i&&m(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(o.Component);w.propTypes={model:i.default.object.isRequired,option:i.default.object.isRequired,style:i.default.object.isRequired}},110240:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(241872),r(743924),r(205960),r(846428),r(336368),r(708896),r(606200),r(534440),r(670864),r(76124),r(387912),r(836887),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(297336),r(880920);var o,i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=c(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(795520)),a=(o=r(540900))&&o.__esModule?o:{default:o},l=r(564491),u=["isNoUnderLineLockStyle","model","option","style","onBlur","value","showTitle"];function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s.apply(this,arguments)}function f(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,p(n.key),n)}}function p(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function y(e,t,r){return t=g(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,m()?Reflect.construct(t,r||[],g(e).constructor):t.apply(e,r))}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(m=function(){return!!e})()}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}var v=t.default=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),y(this,t,arguments)}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(t,e),r=t,(n=[{key:"render",value:function(){var e=this.props,t=(e.isNoUnderLineLockStyle,e.model),r=e.option,n=e.style,o=(e.onBlur,e.value),a=(e.showTitle,f(e,u)),c=t.getMetaProperty("fc"),d=t.getMetaLocaleProperty("caption"),p=r.get("s");return i.default.createElement(l.CheckBox,s({style:n,value:!!o,text:d,styleType:p,foreColor:c,model:t},a))}}])&&d(r.prototype,n),o&&d(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(i.Component);v.propTypes={model:a.default.object.isRequired,option:a.default.object.isRequired,style:a.default.object.isRequired}},60992:function(e,t,r){"use strict";r(182320),r(241872),r(297336),r(336368),r(606200),r(76124),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(233696),r(387912),r(997308);var n=s(r(795520)),o=s(r(833108)),i=r(439532),a=r(290600),l=r(796512),u=r(149236),c=["model","option"];function s(e){return e&&e.__esModule?e:{default:e}}function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f.apply(this,arguments)}function d(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}t.default=function(e){var t=e.model,r=e.option,s=d(e,c);(0,u.useControlInfoCollect)(t);var p=(0,i.getComponentDataProperty)(t,a.STORE,["item",a.STORE])||[],y=[];p.forEach((function(e){var r=e.get(0),n=(0,l.getValueByPath)(e,[1],{current:t.getUserLocale()}),o=e.get(3),i=e.get(4);y.push({value:r,text:n,itemVisible:o,disabled:i})}));var m=r.get(a.FLAT_STYLE),g=r.get(a.FLAT_LAYOUT);return n.default.createElement(o.default,f({noValue:(0,i.getNOValue)(),flatStyle:m,flatLayout:g,items:y},s))}},899044:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(622676),r(233696),r(743924),r(205960),r(846428),r(708896),r(969e3),r(606200),r(534440),r(76152),r(670864),r(76124),r(387912),r(836887),r(78504),r(997308),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(297336),r(880920);var o=p(r(795520)),i=r(891052),a=p(r(788756)),l=p(r(376208)),u=p(r(829164)),c=r(439532),s=r(290600),f=r(358524),d=r(653224);function p(e){return e&&e.__esModule?e:{default:e}}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e,t,r){return(t=h(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function h(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function v(e,t,r){return t=O(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,b()?Reflect.construct(t,r||[],O(e).constructor):t.apply(e,r))}function b(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(b=function(){return!!e})()}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}function w(e,t){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},w(e,t)}var S=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=v(this,t,[e])).mapConfig=(0,f.getMapConfig)(),r}var r,n,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(t,e),r=t,n=[{key:"render",value:function(){var e,t,r,n,f,p=this.props,g=p.model,h=p.isLocked,v=p.locale,b=p.updateModel,O=p.required,w=p.showFormByTips,S=p.slot,P=p.dataPageId,_=p.clickTipsLink,C=(0,c.getCommonStyle)(g),k=g.getDataValue()||(0,i.Map)(),E={lat:k.get("la")||0,lng:k.get("lo")||0},I=k.get("ad")||"",T=function(e){var t=(0,c.getCommonStyle)(e);return{color:t.color,fontSize:t.fontSize,fontWeight:t.fontWeight,backgroundColor:t.backgroundColor}}(g),D=function(e){var t=(0,c.getCommonStyle)(e),r=e.getMetaProperty([s.ITEM])||(0,i.Map)();return{color:r.get(s.COLOR,t.color),backgroundColor:r.get(s.BACKGROUND_COLOR,t.backgroundColor),fontSize:r.get(s.FONT_SIZE,t.fontSize),fontWeight:"normal"}}(g),j=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},D),M=(0,c.getComponentDataProperty)(g,"poiType","poiType",!1)||"",L=(0,c.getComponentDataProperty)(g,"radius","radius",!1)||500;if((null===(e=this.mapConfig)||void 0===e?void 0:e.mapService)===d.BaiduMap||"default"===(null===(t=this.mapConfig)||void 0===t?void 0:t.mapService)){var R,A,x=null===(R=this.mapConfig)||void 0===R?void 0:R.mapKey,N=null===(A=this.mapConfig)||void 0===A?void 0:A.apiKey;return o.default.createElement(u.default,{address:I,apiKey:N,containerStyle:C,dataPageId:P,inputStyle:j,isLocked:h,labelStyle:T,locale:v,location:E,mapKey:x,required:O,selectStyle:D,update:b,poiType:M,radius:L,slot:S,clickTipsLink:_,showFormByTips:w})}return(null===(r=this.mapConfig)||void 0===r?void 0:r.mapService)===d.GoogleMap?o.default.createElement(l.default,{id:g.key,pageId:g.pageId,isLocked:h,address:I,containerStyle:C,dataPageId:P,inputStyle:j,labelStyle:T,mapKey:null===(f=this.mapConfig)||void 0===f?void 0:f.mapKey,locale:v,location:E,required:O,selectStyle:D,update:b,poiType:M,radius:L,slot:S,clickTipsLink:_,showFormByTips:w}):o.default.createElement(a.default,{isLocked:h,address:I,containerStyle:C,dataPageId:P,id:g.key,inputStyle:j,labelStyle:T,mapKey:null===(n=this.mapConfig)||void 0===n?void 0:n.mapKey,locale:v,location:E,required:O,selectStyle:D,update:b,poiType:M,radius:L,slot:S,clickTipsLink:_,showFormByTips:w})}}],n&&g(r.prototype,n),p&&g(r,p),Object.defineProperty(r,"prototype",{writable:!1}),t}(o.default.Component);t.default=S},861352:function(e,t,r){"use strict";r(182320),r(909112),r(697060),r(505684),r(241872),r(323784),r(743924),r(693917),r(976896),r(297336),r(721300),r(336368),r(606200),r(76124),r(387912),r(633768),r(690512),r(78504),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,r=e.model,n=void 0===r?{}:r,p=e.option,y=e.lockedEmptyValue,m=e.shouldGetFormattedValueOnBlur,g=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,s),h=p.get(l.NUM_TYPE),v=p.get(l.SCALE),b=null===(t=p.get(l.SCALE_DEPENDENCIES))||void 0===t?void 0:t.toJS(),O=p.get(l.DISPLAY_SCALE),w=v,S="",P="",_=!0,C=n.state,k=n.pageId,E=n.key;if(["qty","price","amount"].includes(h)){var I=(0,u.getSourceFiledInfoById)(k,p.get(l.SOURCE_FIELD))(C);if(I)w=I[c.NUMBER_TYPE_PRECISION[h]],["price","amount"].includes(h)&&(P=I[l.CURRENY_SYMBOL],S=I[l.CURRENY_CODE],_=I[l.IS_SHOW_SIGN]);else if(["price","amount"].includes(h)){var T=(0,a.getMainCurrencyFormatConfig)();T&&void 0!==T[c.NUMBER_TYPE_PRECISION[h]]&&(w=T[c.NUMBER_TYPE_PRECISION[h]])}}if(b){var D=(0,a.getScaleFromDependencies)({pageId:k,key:E,scaleDependencies:b});void 0!==D&&(w=D)}var j=(G=[l.MASK,l.DISPLAY_FORMAT,l.MIN_VALUE,l.MAX_VALUE,l.MIN_MARK,l.MAX_MARK,l.ZERO_SHOW,l.NO_DISPLAY_SCALE_ZERO,l.ROUND_METHOD,l.SYSTEM_MAX,l.SYSTEM_MIN,l.MUST_INPUT].map((function(e){return p.get(e)})),K=12,function(e){if(Array.isArray(e))return e}(G)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(G,K)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}(G,K)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),M=j[0],L=j[1],R=j[2],A=j[3],x=j[4],N=j[5],F=j[6],B=j[7],V=j[8],U=j[9],W=j[10],H=j[11],z=p.get(l.PRECISION);var G,K;v!==w&&(z=z-v+w);var q=y||(0,a.getNOValue)();return o.default.createElement(i.Number,f({noValue:q,type:h,digitLength:z,decimalLength:w,displayDecimalLength:O||w,showSymbol:_,code:S,required:H,sysMin:W,sysMax:U,symbol:P,mask:M,displayFormat:L,min:R,max:A,minMark:x,maxMark:N,zeroShow:F,noDisplayDecimalTailZero:B,roundMethod:V||"0",shouldGetFormattedValueOnBlur:m},g))},r(443616),r(835164);var n,o=(n=r(795520))&&n.__esModule?n:{default:n},i=r(564491),a=r(439532),l=r(290600),u=r(218652),c=r(545072),s=["model","option","lockedEmptyValue","shouldGetFormattedValueOnBlur"];function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f.apply(this,arguments)}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}},323e3:function(e,t,r){"use strict";r(182320),r(241872),r(297336),r(336368),r(606200),r(76124),Object.defineProperty(t,"__esModule",{value:!0}),t.default=d,r(286620);var n=c(r(795520)),o=c(r(540900)),i=r(564491),a=r(290600),l=r(218652),u=["isNoUnderLineLockStyle","model","option","style","value","onBlur","placeholder","maxLength","showTitle","isGroupLocked","disabled"];function c(e){return e&&e.__esModule?e:{default:e}}function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s.apply(this,arguments)}function f(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function d(e){e.isNoUnderLineLockStyle;var t,r,o=e.model,c=e.option,d=e.style,p=e.value,y=(e.onBlur,e.placeholder,e.maxLength,e.showTitle,e.isGroupLocked),m=e.disabled,g=f(e,u),h=o.getMetaLocaleProperty("caption"),v=c.get(a.GROUP),b=c.get(a.VALUE);if(b=null===b?"":b,v){var O=(0,l.getItemMeta)(o.pageId,v)(o.state);if(!O)return console.error(""),n.default.createElement("span",null);t=Object.is(p,b),r=O.getIn([a.ITEM,a.FIELD_STYLE])}return n.default.createElement(i.Radio,s({style:d,text:h,group:v,checked:t,value:b},g,{disabled:y||m,fieldStyle:r}))}d.propTypes={model:o.default.object.isRequired,option:o.default.object.isRequired,style:o.default.object.isRequired}},612124:function(e,t,r){"use strict";r(697060),r(743924),r(606200),r(78504),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.model,r=e.option;(0,s.useControlInfoCollect)(t);var f=r.get(a.FLAT_STYLE),p=r.get(a.FLAT_LAYOUT),y=(0,i.getComponentDataProperty)(t,a.STORE,["item",a.STORE])||[],m=(0,c.mapTransformOptions)(y.toJS()),g=(0,u.default)(function(e,t,r){(t=function(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==d(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;return e}({},l.default["radio-opt-group-field-v"],!0));return n.default.createElement(o.default,{options:m,value:e.value,optionType:f,optionDir:p,className:g,disabled:e.lock,readOnly:e.isView,"data-shortcut":e["data-shortcut"],tabIndex:e.tabIndex,skipToParentNextField:!0,style:e.style,onChange:e.onChange})},r(182320),r(909112),r(360776),r(205960),r(846428),r(387912);var n=f(r(795520)),o=f(r(871160)),i=r(439532),a=r(290600),l=f(r(140472)),u=f(r(671252)),c=r(141332),s=r(149236);function f(e){return e&&e.__esModule?e:{default:e}}function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}},46592:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(622676),r(505684),r(241872),r(323784),r(743924),r(693917),r(205960),r(976896),r(297336),r(721300),r(846428),r(969e3),r(606200),r(534440),r(76152),r(76124),r(633768),r(690512),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(233696),r(336368),r(387912),r(23544),r(997308);var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=C(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(795520)),i=r(882720),a=_(r(460020)),l=_(r(671252)),u=r(735696),c=r(439532),s=r(885952),f=r(738704),d=r(545072),p=r(290600),y=r(909340),m=r(24616),g=r(218652),h=r(331428),v=r(272796),b=r(564491),O=r(433100),w=r(674260),S=r(868256),P=["model","field","appId","formId","value","className","disabled","mustInput","placeholder","isFireUpdate","lockAutoHeight","toolbarItems","showTitle","labelText","labelDirection","labelTextAlign","labelStyle","dispatch","slot","onBlur","style"];function _(e){return e&&e.__esModule?e:{default:e}}function C(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(C=function(e){return e?r:t})(e)}function k(){return k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},k.apply(this,arguments)}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e,t,r){var o;return o=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==n(o)?o:String(o))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return D(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return D(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function j(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}t.default=function(e){var t,r,n=e.model,_=e.field,C=e.appId,D=e.formId,M=e.value,L=(e.className,e.disabled),R=e.mustInput,A=e.placeholder,x=(e.isFireUpdate,e.lockAutoHeight),N=e.toolbarItems,F=void 0===N?O.DEFAULT_SIMPLE_TOOLBARITEMS:N,B=e.showTitle,V=void 0===B||B,U=e.labelText,W=e.labelDirection,H=e.labelTextAlign,z=e.labelStyle,G=void 0===z?{}:z,K=e.dispatch,q=e.slot,Y=e.onBlur,J=e.style,X=j(e,P),Z=T((0,o.useState)(!1),2),Q=Z[0],$=Z[1],ee=T((0,o.useState)(!1),2),te=ee[0],re=ee[1],ne=(0,o.useRef)(),oe=(0,o.useRef)();(0,o.useEffect)((function(){var e=(0,w.addDataChangeListener)(S.KEY_TAB_SWAP_POSITION,(function(){re(!te)}));return function(){e()}}),[te]),(0,o.useEffect)((function(){var e=n.pageId,t=n.key,r=(0,f.subscribeValidatorMethod)(e,t,d.VALIDATE_MSG_TYPE.notNull,ie),o=(0,f.subscribeControlMethod)(e,t,"directives",(function(e){e&&ae(e)}));return function(){r(),o()}}),[null==n?void 0:n.pageId,null==n?void 0:n.key]),(0,o.useEffect)((function(){oe.current=M}),[M]);var ie=function(e){var t=void 0!==e&&!e.success;$(t)},ae=function(e){e.forEach((function(e){var t=e.args;switch(e.methodname){case s.RICH_TEXT_EDITOR_INSERT_TEXT:var r=T(t,1)[0];r&&ne.current&&ne.current.insertContent&&ne.current.insertContent(r);break;case s.RICH_TEXT_EDITOR_SET_FOCUS:ne.current&&ne.current.focus&&ne.current.focus()}}))},le=function(e){n.getMetaProperty(p.FIELD_FOCUS)&&K&&K((0,u.inputFocus)(n,e))},ue=n.getUserLocale(),ce=n.getDefaultLang(),se=(0,c.getComponentDataProperty)(n,"useRelativePath","useRelativePath",!1)?"attachment/downloadImage/":n.getFormConfig().fileserver,fe=(0,c.getComponentDataProperty)(n,"imageMaxSize","imageMaxSize",!1),de=(0,c.getComponentDataProperty)(n,"configExt","configExt",!1),pe=(0,y.getWordCount)(F,!1),ye=(0,y.getToolbarItemsByCondition)(F,L,pe,false),me=(0,m.getResponseHeader)(d.CSRF_TOKEN),ge=(0,c.getCommonClass)(n),he=ge.Grow,ve=ge.Shrink,be=ge.AlignSelf,Oe=Object.assign({},{height:""},{fontSize:null!==(t=null==J?void 0:J.fontSize)&&void 0!==t?t:"14px"}),we=Object.assign({},J,{height:""}),Se={height:null!==(r=null==J?void 0:J.height)&&void 0!==r?r:"300px"};x&&delete Se.height;var Pe={val:L&&!oe.current?d.RICHTEXTFIELD_DISABLED_NO_VALUE:M,timestamp:n.getDataProperty(d.TIME_STAMP_FRESH)},_e="h"===W,Ce=(0,l.default)("kd-cq-field kd-cq-richtext",I(I(I({},a.default["field-item"],!0),a.default["richtext-label"],_e),"kd-cq-field-layout-".concat(W),!0)),ke=(0,l.default)("kd-cq-control kd-cq-rich-text",I({},a.default["value-wrap"],!0));return o.default.createElement("div",k({className:Ce,style:we},X),V&&function(e){var t=_e?d.FIELD_DEFAULT_STYLE.horizontalTitleWidth:"",r={width:void 0===G.width||""===G.width?t:G.width},n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){I(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},r);G.width&&(n=Object.assign({},G,{flexShrink:0})),n.color=J&&J.color,"left"===H&&r.width&&delete r.width;var i=a.default["label-text-"+H],u=(0,l.default)("kd-cq-field-title-wrap",I(I(I(I({},a.default["label-wrap"],!0),a.default["no-width"],0===parseFloat(G.width)&&V),a.default["label-disabled"],e),i,i)),c=(0,l.default)(a.default["title-wrapper"],a.default["title-align-".concat(H)]);return o.default.createElement("div",{className:u,style:n},_e?o.default.createElement("div",{className:c,style:r,title:U},U):o.default.createElement(b.Label,{text:U,Name:U,style:{margin:0,padding:0},field:_}),R?o.default.createElement("label",{className:(0,l.default)(a.default.must,"require-icon")},"*"):null,q)}(),o.default.createElement("div",{style:Se,className:ke},o.default.createElement(i.TinymceEditor,{ref:ne,imageMaxSize:fe,configExt:de,canPrint:false,locale:ue,defaultLocale:ce,style:Oe,Grow:he,Shrink:ve,AlignSelf:be,content:Pe,placeholder:A,disabled:L,lockAutoHeight:x,imageUrlPrefix:se,autoFocusOnInit:!1,onChange:function(e){return function(e){oe.current=e}(e)},inputFocus:function(e){le(!0)},inputBlur:function(e){le(!1);var t=oe.current,r=n.getMetaProperty(p.MAX_RICHTEXT_LENGTH)||20,o=1024*r*1024,i=(0,v.getLenByByte)(t);if(o&&i>o){t=(0,v.getCutStr)(t,o);var a=(0,h.getLangMsg)({key:"RichTextEditor.key0001",variables:{maxRichTextLength:r}});(0,g.setDataMessages)(n.pageId,{content:a,type:d.AlertType.WARNING,duration:5e3})}Y&&Y({value:t})},toolbarItems:ye,wordCount:pe,appId:C,fId:D,pageId:n.pageId,csrf:me,showError:Q,reinitialize:te})))}},312676:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(241872),r(743924),r(205960),r(846428),r(336368),r(708896),r(606200),r(534440),r(670864),r(76124),r(836887),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(233696),r(297336),r(880920),r(387912),r(997308);var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=b(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(795520)),i=v(r(540900)),a=v(r(827120)),l=r(290600),u=r(439532),c=r(796512),s=r(49480),f=r(576900),d=r(671776),p=v(r(588012)),y=r(218652),m=r(331428),g=r(290600),h=["model","option","style","fileServer","mustInput","onBlur","showTitle","multiple","allBorder","lock"];function v(e){return e&&e.__esModule?e:{default:e}}function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(b=function(e){return e?r:t})(e)}function O(){return O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},O.apply(this,arguments)}function w(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function S(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,P(n.key),n)}}function P(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function _(e,t,r){return t=k(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return E(e)}(e,C()?Reflect.construct(t,r||[],k(e).constructor):t.apply(e,r))}function C(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(C=function(){return!!e})()}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e,t){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},I(e,t)}var T=1;(t.default=function(e){function t(e){var r,n,i,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=_(this,t,[e])).handleClickAreaTracking=function(e){var t=r.props.model;(0,f.sendCtrlPropsEventTracking)({model:t,controlProp:s.trackingExtendCtrlProps.SELECT_CLICK_AREA,controlValue:e})},r.optionRender=function(e,t){var n=r.optionRenderFn[e];if(n)return function(e,r){return n(e,r,t)}},r.setDefaultClick=function(e,t){var n=r.props,o=n.model;(0,n.dispatch)((0,d.changeSelectDefaultValue)(o,t)),e.stopPropagation()},r.defaultValueOptionRender=function(e,t,n){var i=t===n,a=[{id:t,setDefault:!i}];return o.default.createElement("div",{className:p.default["default-wrapper"]},o.default.createElement("div",{className:p.default["default-text"]},e),o.default.createElement("div",{className:p.default["default-block"]},o.default.createElement("div",{className:p.default["default-block-left"]},i&&o.default.createElement("span",{className:p.default["default-icon"]},(0,m.getLangMsg)("bosd.select.key0001"))),o.default.createElement("div",{className:p.default["default-block-right"],onClick:function(e){return r.setDefaultClick(e,a)}},i?(0,m.getLangMsg)("bosd.select.key0003"):(0,m.getLangMsg)("bosd.select.key0002"))))},r.getUrl=r.getUrl.bind(E(r)),r.optionRenderFn=(n={},i=T,a=r.defaultValueOptionRender,(i=P(i))in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a,n),r}var r,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I(e,t)}(t,e),r=t,(n=[{key:"getUrl",value:function(e){return(0,u.getImgFullPath)(this.props.fileServer,e)}},{key:"render",value:function(){var e=this,t=this.props,r=t.model,n=t.option,i=t.style,s=(t.fileServer,t.mustInput),f=(t.onBlur,t.showTitle,t.multiple),d=t.allBorder,p=t.lock,m=w(t,h),v=(0,u.getComponentDataProperty)(r,l.STORE,["item",l.STORE])||[],b=[];v.forEach((function(t){var n=t.get(0),o=(0,c.getValueByPath)(t,[1],{current:r.getUserLocale()}),i=e.getUrl(t.get(2)),a=t.get(3),l=t.get(4);b.push({value:n,alias:o,imgkey:i,itemVisible:a,disabled:l})}));var S=n.get("showStyle"),P=n.get("showtype"),_=n.get(l.SHOW_CLEAR_BUTTON),C=n.get(l.SELECTED_ITEM_STYLE),k="label"===C,E=r.getMetaProperty(l.DEFAULT_VALUE_TYPE),I=(0,y.getDataProperty)(r.pageId,r.key,["defaultValue"])(r.state),T=r.getMetaProperty(g.FILTER_PLACEHOLDER);return o.default.createElement(a.default,O({noValue:(0,u.getNOValue)(),style:i,items:b,required:s,showStyle:S,showType:P,showClearBtn:_,model:r,multiple:f,onHandleClickAreaTracking:this.handleClickAreaTracking,selectedItemStyle:C,isSelectedItemWrap:f&&k,isCollapseTags:f&&k,isJustShowSelectedValueText:f&&k,allBorder:d},m,{lock:p,optionRender:this.optionRender(E,I),filterPlaceholder:T,panelAlign:"bottom"}))}}])&&S(r.prototype,n),i&&S(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}(o.Component)).propTypes={model:i.default.object.isRequired,option:i.default.object.isRequired,style:i.default.object.isRequired}},852572:function(e,t,r){"use strict";r(697060),r(505684),r(241872),r(323784),r(743924),r(693917),r(976896),r(297336),r(721300),r(336368),r(708896),r(606200),r(670864),r(76124),r(880920),r(836887),r(633768),r(690512),r(78504),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(182320),r(909112),r(360776),r(835164),r(205960),r(846428),r(387912);var n=c(r(795520)),o=c(r(744900)),i=r(439532),a=r(290600),l=r(218652),u=["option","model"];function c(e){return e&&e.__esModule?e:{default:e}}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f.apply(this,arguments)}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function y(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,w(n.key),n)}}function g(e,t,r){return t=v(t),function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,h()?Reflect.construct(t,r||[],v(e).constructor):t.apply(e,r))}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(h=function(){return!!e})()}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b(e,t)}function O(e,t,r){return(t=w(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:String(t)}var S=9999999999999.99;t.default=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),g(this,t,arguments)}var r,c,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(t,e),r=t,(c=[{key:"render",value:function(){var e=this.props,t=e.option,r=e.model,c=y(e,u),s=t.get(a.NUM_TYPE),p=t.get(a.SCALE),m=t&&t.get("stepperstyle")||0,g=t&&t.get("stepvalue")||1,h=r.state,v=r.pageId,b=(0,l.getSourceFiledInfoById)(v,t.get(a.SOURCE_FIELD))(h),w=b&&function(e,t){var r=e[a.CURRENY_SYMBOL],n=e[a.CURRENY_CODE],o=e[a.IS_SHOW_SIGN];return{symbol:r,code:n,precision:O(O(O({},a.NUMBER_TYPE_PRICE,e[a.PRICE_PRECISION]),a.NUMBER_TYPE_AMOUNT,e[a.AMOUNT_PRECISION]),a.NUMBER_TYPE_QUANTITY,e[a.QUANTITY_PRECISION])[t],visible:o}}(b,s)||{},P=w.symbol,_=w.code,C=w.precision,k=void 0===C?p:C,E=w.visible,I=d([a.MASK,a.DISPLAY_FORMAT,a.MIN_VALUE,a.MIN_MARK,a.MAX_MARK,a.NO_DISPLAY_SCALE_ZERO,a.ROUND_METHOD].map((function(e){return t.get(e)})),7),T=I[0],D=I[1],j=I[2],M=I[3],L=I[4],R=I[5],A=I[6],x=Math.min(t.get(a.MAX_VALUE,S),S);return n.default.createElement(o.default,f({noValue:(0,i.getNOValue)(),digitLength:t.get(a.PRECISION),decimalLength:k,showSymbol:E,code:_,symbol:P,mask:T,displayFormat:D,min:j,max:x,minMark:M,maxMark:L,noDisplayDecimalTailZero:R,roundMethod:A||"0",stepperStyle:m,stepValue:g,zeroShow:!0},c))}}])&&m(r.prototype,c),s&&m(r,s),Object.defineProperty(r,"prototype",{writable:!1}),t}(n.default.Component)},409616:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(743924),r(205960),r(846428),r(336368),r(708896),r(606200),r(534440),r(670864),r(836887),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(9692),r(305092),r(492948),r(297336),r(721300),r(880920),r(387912),r(804092);var o,i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(795520)),a=(o=r(719092))&&o.__esModule?o:{default:o},l=r(545072),u=r(674260),c=r(868256),s=r(738704),f=r(930496),d=r(439532);function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},y.apply(this,arguments)}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,g(n.key),n)}}function g(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function h(e,t,r){return t=b(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return O(e)}(e,v()?Reflect.construct(t,r||[],b(e).constructor):t.apply(e,r))}function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(v=function(){return!!e})()}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},w(e,t)}var S=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=h(this,t,[e])).selectCountry=function(e){var t=r.props.model;(0,s.setPageData)(t.pageId,[t.key,l.TELEPHONE_COUNTRY],e),r.setState({currentCountry:e})},r.setData=r.setData.bind(O(r)),r.state={codeList:void 0,currentCountry:void 0},r}var r,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.getTelViaList,r=e.model,n=(0,u.getData)(c.KEY_COUNTRU_VIA_DATA);n?this.setData(n):t&&t(r),this.unbindDataChangeListener=(0,u.addDataChangeListener)(c.KEY_COUNTRU_VIA_DATA,this.setData)}},{key:"componentWillUnmount",value:function(){var e=this.props.model;this.unbindDataChangeListener&&this.unbindDataChangeListener(),(0,s.deletePageData)(e.pageId,[e.key,l.TELEPHONE_COUNTRY])}},{key:"componentWillReceiveProps",value:function(e){var t=e.value,r=e.model,n=this.state,o=n.currentCountry,i=n.codeList;if(t&&o){var a=t.split("-");if(!(a.length<2)){var u=a[0];if(o.id!==u){var c=(0,f.getCurrentCountry)(i,u);if(!c||r.getDataProperty(l.TIME_STAMP_FRESH)===this.props.model.getDataProperty(l.TIME_STAMP_FRESH)){var d=(0,s.getPageData)(r.pageId,[r.key,l.TELEPHONE_COUNTRY]);c=i.find((function(e){return e.id===(null==d?void 0:d.id)&&e.name===(null==d?void 0:d.name)}))}c&&this.selectCountry(c)}}}}},{key:"setData",value:function(e){var t,r=Object.values(e).reduce((function(e,t){return e.concat(t)}),[]),n=this.props.value;n&&2===n.split("-").length&&(t=n.split("-")[0]);var o=(0,f.getCurrentCountry)(r,t),i=this.props.model;(0,s.setPageData)(i.pageId,[i.key,l.TELEPHONE_COUNTRY],o),this.setState({codeList:r,currentCountry:o})}},{key:"render",value:function(){var e=this.state,t=e.codeList,r=void 0===t?[]:t,n=e.currentCountry;return i.default.createElement(a.default,y({},this.props,{noValue:(0,d.getNOValue)(),viaList:r,country:n,selectCountry:this.selectCountry}))}}])&&m(r.prototype,n),o&&m(r,o),Object.defineProperty(r,"prototype",{writable:!1}),t}(i.Component);t.default=S},646712:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}r(182320),r(909112),r(697060),r(360776),r(505684),r(323784),r(743924),r(693917),r(205960),r(976896),r(721300),r(846428),r(336368),r(708896),r(606200),r(534440),r(670864),r(76124),r(387912),r(836887),r(690512),r(78504),r(776512),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(241872),r(297336),r(999768),r(880920),r(571176),r(633768),r(513640);var o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=m(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(o,a,l):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}(r(795520)),i=y(r(369396)),a=y(r(540900)),l=y(r(671252)),u=r(564491),c=r(439532),s=r(545072),f=r(290600),d=y(r(356704)),p=["model","option","style","textareaHeight","updateHeight","showTitle","lock","className","lockedEmptyValue"];function y(e){return e&&e.__esModule?e:{default:e}}function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},g.apply(this,arguments)}function h(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,w(n.key),n)}}function w(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}function S(e,t,r){return t=_(t),function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,P()?Reflect.construct(t,r||[],_(e).constructor):t.apply(e,r))}function P(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(P=function(){return!!e})()}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}function C(e,t){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},C(e,t)}(t.default=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=S(this,t,[e])).setTextareaHeight=function(){var e=r.props,t=e.model,n=e.updateHeight,o=i.default.findDOMNode(r.textAreaRef.current),a=(0,c.getCommonStyle)(t);if(o&&a&&a.height){var l=o.children[0],u=function(e){n&&n(e)};if(l){var s=o.offsetHeight;s>0?u(s):(r.intersectionObserver=new window.IntersectionObserver((function(e){var t=v(e,1)[0];t.intersectionRatio>0&&(u(t.boundingClientRect.height||s),r.intersectionObserver.disconnect())})),r.intersectionObserver.observe(o))}}},r.scrollToBottom=function(){var e=i.default.findDOMNode(r.textAreaRef.current);if(e){var t=e.querySelector("textarea");t&&(t.scrollTop=t.scrollHeight)}},r.textAreaRef=o.default.createRef(),r}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}(t,e),r=t,(n=[{key:"componentDidMount",value:function(){this.setTextareaHeight()}},{key:"componentDidUpdate",value:function(e){var t=e.model,r=this.props.model;(0,c.getComponentDataProperty)(r,f.SCROLL_TO_BOTTOM,f.SCROLL_TO_BOTTOM,!1)&&t.getDataProperty(s.TIME_STAMP_FRESH)!==r.getDataProperty(s.TIME_STAMP_FRESH)&&this.scrollToBottom()}},{key:"formatNumber",value:function(e){return e?-1!==e.indexOf("%")?window.parseInt(e.replace("%","")):window.parseInt(e.replace("px","")):0}},{key:"render",value:function(){var e=this,t=this.props,r=t.model,n=t.option,i=t.style,a=t.textareaHeight,s=t.updateHeight,y=t.showTitle,m=t.lock,v=(t.className,t.lockedEmptyValue),b=h(t,p),O=y?22:2,S=v||(0,c.getNOValue)(),P=(0,c.getCommonStyle)(r);if(a){var _=window.devicePixelRatio.toFixed(1)<1?"".concat(a-1,"px"):"".concat(a,"px");i.minHeight=_,i.maxHeight=_}var C,k,E,I=n&&n.get(f.SHOW_EDIT_BTN);return o.default.createElement(u.TextArea,g({ref:this.textAreaRef,noValue:S,style:i,lock:m,inputRef:function(t){if(P.height&&t){var r=t.clientHeight;r?r-=5:r=e.formatNumber(P.height)-O,s&&s(r)}},ctrlKey:r.key,pageId:r.pageId,className:(0,l.default)((C={},k=d.default["lt-input"],E=I&&!m,(k=w(k))in C?Object.defineProperty(C,k,{value:E,enumerable:!0,configurable:!0,writable:!0}):C[k]=E,C)),showTitle:y,lDir:n.get("lDir")},b))}}])&&O(r.prototype,n),a&&O(r,a),Object.defineProperty(r,"prototype",{writable:!1}),t}(o.Component)).propTypes={model:a.default.object.isRequired,option:a.default.object.isRequired,style:a.default.object.isRequired,updateHeight:a.default.func}},139488:function(e,t,r){"use strict";r(697060),r(743924),r(606200),r(78504),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(182320),r(909112),r(360776),r(205960),r(846428),r(387912);var n,o=r(290600),i=r(564491),a=L(r(942524)),l=L(r(710736)),u=L(r(800104)),c=L(r(848948)),s=L(r(861352)),f=L(r(646712)),d=L(r(219876)),p=L(r(962524)),y=L(r(593600)),m=L(r(110240)),g=L(r(323e3)),h=L(r(312676)),v=L(r(95e3)),b=L(r(779764)),O=L(r(556156)),w=L(r(593136)),S=L(r(49336)),P=L(r(409616)),_=L(r(785968)),C=L(r(357768)),k=L(r(852572)),E=L(r(226164)),I=L(r(899044)),T=L(r(307916)),D=L(r(46592)),j=L(r(60992)),M=L(r(612124));function L(e){return e&&e.__esModule?e:{default:e}}function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function A(e,t,r){var n;return n=function(e,t){if("object"!=R(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==R(n)?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var x=(A(A(A(A(A(A(A(A(A(A(n={number:s.default,text:i.Text,email:S.default,passwordbox:i.Text,textarea:f.default,date:d.default,datetime:p.default,daterange:y.default,time:_.default,timerange:C.default,checkbox:m.default,radio:g.default},o.Ctrls.KDRadioOptGroup,M.default),"combo",h.default),"mulcombo",h.default),"user",v.default),"basedata",v.default),"mulbasedata",v.default),"org",v.default),"localeText",a.default),"largeText",l.default),"cascademenu",u.default),A(A(A(A(A(A(A(A(A(A(n,"city",c.default),"cascader",b.default),"flexfield",O.default),"attachmentfield",w.default),"telephone",P.default),"stepper",k.default),"address",E.default),"geopoint",I.default),"namesegbasedata",v.default),"namesegcombo",h.default),A(A(A(A(A(n,"namesegtext",i.Text),"i18nname",i.Text),"signature",T.default),"richtext",D.default),"checkboxgroup",j.default));t.default=x},897920:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.insertData=t.filterFixed=t.deleteData=void 0,r(622676),r(613468),r(927184),r(387912);t.deleteData=function(e,t){var r=e.findIndex((function(e){return e.key===t}));return-1!==r&&e.splice(r,1),e},t.insertData=function(e,t,r){var n=e.findIndex((function(e){return e.key===r}));return-1!==n&&e.splice(n+1,0,t),e},t.filterFixed=function(e,t){return e.filter((function(e){return e.isFixed===t}))}},804552:function(e,t,r){"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,i(n.key),n)}}function i(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:String(t)}r(697060),r(743924),r(606200),r(78504),r(977864),Object.defineProperty(t,"__esModule",{value:!0}),t.mergeModel=void 0,t.spanEngine=function(e,t){t.group=[],t.mainSpan={},t.rkIndexMap={};var r=e.get("dataindex"),n=e.get("rows"),o=t.entityInfo.mainEntity.pkFieldName,i=r.get(o),a=r.get("rk");n.forEach((function(e,r){var o=e.get(a);if(t.rkIndexMap[o]=r,0===r)t.recordSpan(e,a,i);else{var l=n.get(r-1);t.recordSpan(e,a,i,l)}}))},r(182320),r(909112),r(360776),r(305092),r(233696),r(443616),r(205960),r(297336),r(846428),r(387912),r(660824),r(997308);t.mergeModel=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.entityInfo=a(t),this.mainSpan={},this.group=[],this.rkIndexMap={},this.recordGroup=this.recordGroup.bind(this)}var t,r,n;return t=e,r=[{key:"recordSpan",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=e.get(t);if(this.mainSpan["r_"+o]=1,n){var i=n.get(t);e.get(r)===n.get(r)&&(this.mainSpan["r_"+o]=this.mainSpan["r_"+i]+1)}this.recordGroup(this.mainSpan["r_"+o],o)}},{key:"recordGroup",value:function(e,t){if(1===e){var r=[t];this.group.push(r)}else{var n=this.group.length;this.group[n-1].push(t)}}},{key:"getMainGroupRk",value:function(e){return this.group.find((function(t){if(t.includes(e))return!0}))}},{key:"getRowIndex",value:function(e){return this.rkIndexMap[e]}},{key:"getMainEntityKey",value:function(){var e;return null===(e=this.entityInfo.mainEntity)||void 0===e?void 0:e.key}}],r&&o(t.prototype,r),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();var a=function(e){var t={},r={};return e.forEach((function(e){var n={key:e.key,parentKey:e.parentKey,pkFieldName:e.pkFieldName};""===n.parentKey&&(t=n),r[n.key]=n})),{mainEntity:t,entities:r}}},967408:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.parseSubFormsByCardId=function(e,t,r,a,l,u){if(l=l||[],void 0!==a&&""!==a){var c=(0,i.getControlSubForms)(e,t)(r);if(c&&c.length>0){var s;c.reverse();var f=c.find((function(e){if(l.indexOf(e)<0&&(0,i.getFormId)(e)(r))return((s=(0,i.getFormConfig)(e)(r))&&s.openStyle&&s.openStyle.cardId)===a;return!1}));if(void 0!==f)return s=(0,i.getFormConfig)(f)(r),u&&u(s.pageId),n.default.createElement(o.default,{config:s})}}},r(305092),r(241872),r(885612),r(387912);var n=a(r(795520)),o=a(r(30276)),i=r(218652);function a(e){return e&&e.__esModule?e:{default:e}}},592500:function(e,t,r){"use strict";r(606200),Object.defineProperty(t,"__esModule",{value:!0}),t.getPermissionItems=void 0,r(622676),r(241872),r(835164),r(693917),r(387912);var n=r(439532),o=r(290600);t.getPermissionItems=function(e){var t=e.items,r=e.noPerData,i=e.isTab,a=e.model;return t=(t=t.map((function(e){return e.get("items")&&(e=e.update("items",(function(e){return e.map((function(e){return e.merge({noPermission:-1!==r.indexOf(e.get("permissionId"))})}))}))),e.merge({noPermission:-1!==r.indexOf(e.get("permissionId"))})}))).map((function(e){if(e.get("items")&&(e=e.update("items",(function(e){return e.filter((function(e){return!e.get("noPermission")}))}))),e.get("noPermission")){var t;if(null===(t=e.get("items"))||void 0===t||!t.size)return;if(a&&(0,n.getVisible)(a,e.get("id"),e.get("vi"))){var r=e.getIn(["items",0]);e=e.delete("l").delete("vi").merge(r),i||(e=e.merge({opk:r.get("operationKey"),replacedOperationKey:e.get(o.OPERATE_KEY),text:r.get("title")})),e=e.update("items",(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).slice(1)}))}}return e})).filter((function(e){return void 0!==e})),t}},534712:function(e,t,r){var n={"./actionReducer.js":460236,"./admindivisionReducer.js":108264,"./approvalProcessingReducer.js":831448,"./approvalRecordReducer.js":651020,"./appstartReducer.js":516480,"./attachmentpanelReducer.js":599108,"./baseCardFieldReducer.js":951712,"./billReducer.js":870480,"./buttonReducer.js":35179,"./commonFilterReducer.js":410628,"./commonFunctionPanelReducer.js":908320,"./dateselectReducer.js":516768,"./entitydesignerReducer.js":16176,"./f7Reducer.js":327464,"./fieldReducer.js":849257,"./generalf7Reducer.js":960024,"./generaltreef7Reducer.js":735112,"./gridReducer.js":424841,"./gridcontainerReducer.js":877416,"./guideReducer.js":890243,"./homePageTabReducer.js":361020,"./htmlReducer.js":697588,"./hyperLinkReducer.js":410548,"./iconReducer.js":494488,"./iframeReducer.js":714140,"./littlekReducer.js":556712,"./mapReducer.js":6480,"./mobilefilterReducer.js":597787,"./myApplicationReducer.js":203208,"./qingReducer.js":803292,"./qrcodeReducer.js":549188,"./querypanelReducer.js":562144,"./reportfilterReducer.js":365248,"./searchReducer.js":379316,"./splitcontainerReducer.js":136040,"./subGridReducer.js":879696,"./tabReducer.js":490360,"./tilePanelReducer.js":283204,"./transferContainerReducer.js":154392,"./treeReducer.js":433572,"./wFNavigationBarReducer.js":116320,"./wfConditionReducer.js":236784,"./workcalendarReducer.js":212800,"./yzjChatReducer.js":669532};function o(e){var t=i(e);return r(t)}function i(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=i,e.exports=o,o.id=534712},77240:function(e,t,r){e.exports=r(251656)(8375)},141170:function(e,t,r){e.exports=r(251656)(9249)}}]);