(self.webpackChunkentity_designer=self.webpackChunkentity_designer||[]).push([[516,820,400],{27516:function(e,t,n){"use strict";n.r(t),n.d(t,{EntityDesigner:function(){return $u}});n(19600);var r=n(47976),a=n.n(r),o=n(39448),i=n.n(o),l=n(18860),c=n.n(l),u=n(55748),s=n.n(u),d=n(7312),f=n.n(d),v=n(54120),p=n.n(v),g=n(63808),m=n.n(g),y=n(45040),h=n.n(y),C=n(2664),E=n(81043),b=n(30112),k=n(72048),_=n(82600),x=n.n(_),w=n(13760),N=n.n(w),I=n(81744),M=n.n(I),S=n(12388),A=n.n(S),T=n(43400),P=n.n(T),L=n(18040),R=n.n(L),D=n(54116),V=P().createContext({});V.displayName="DesignerContext";var F=(0,T.createContext)({});F.displayName="MainCardViewContext";var B=n(12640),K=n.n(B),O=n(75984),j=n.n(O),U=n(98752),H=n(47332),z=n.n(H),W=function(){return[{name:(0,L.getLangMsg)("entityd.nodeType.key0004"),type:"EntryEntity",fieldName:(0,L.getLangMsg)("entityd.nodeType.key0005")},{name:(0,L.getLangMsg)("entityd.nodeType.key0006"),type:"TreeEntryEntity",fieldName:(0,L.getLangMsg)("entityd.nodeType.key0007")}]},q=function(){return[{name:(0,L.getLangMsg)("entityd.nodeType.key0011"),type:"SubEntryEntity",fieldName:(0,L.getLangMsg)("entityd.nodeType.key0008")},{name:(0,L.getLangMsg)("entityd.nodeType.key0012"),type:"TreeSubEntryEntity",fieldName:(0,L.getLangMsg)("entityd.nodeType.key0013")}]},G=function(){return{BillEntity:{name:(0,L.getLangMsg)("entityd.nodeType.key0009"),icon:"danjutou",color:"#5582f3"},BaseEntity:{name:(0,L.getLangMsg)("entityd.nodeType.key0009"),icon:"danjutou",color:"#5582f3"},EntryEntity:{name:(0,L.getLangMsg)("entityd.nodeType.key0005"),icon:"danjuti2",color:"#8EA9E7"},SubEntryEntity:{name:(0,L.getLangMsg)("entityd.nodeType.key0008"),icon:"zidanjuti",color:"#B0BAD1"},TreeEntryEntity:{name:(0,L.getLangMsg)("entityd.nodeType.key0010"),icon:"shuxing",color:"#8EA9E7"},TreeSubEntryEntity:{name:(0,L.getLangMsg)("entityd.nodeType.key0008"),icon:"zidanjuti",color:"#B0BAD1"}}},J=["BillEntity","EntryEntity","SubEntryEntity","BaseEntity","TreeEntryEntity","TreeSubEntryEntity"],Q=["SubEntryEntity","TreeSubEntryEntity"],Z=["BillEntity","BaseEntity"],Y=["EntryEntity","SubEntryEntity","TreeEntryEntity","TreeSubEntryEntity"],X=["EntryEntity","TreeEntryEntity"],$="Id",ee="_Type_",te="Name",ne="ParentId",re="Items",ae="field-selection",oe="entity-selection",ie=function(e){return(0,b.c)({},"data-control-id",e[$])},le=function(e){var t=(0,(0,T.useContext)(V).getKdesignerApi)().selection.setSelect;return(0,T.useCallback)((function(n){n.stopPropagation(),t([e])}),[])},ce=n(45076),ue=n.n(ce),se={UndefinedControl:["Name","Id","FieldName","Key","_Type_"],BillStatusField:["Name","Id","FieldName","Key","_Type_"],BillNoField:["Name","Id","FieldName","Key","_Type_"],CreaterField:["Name","Id","FieldName","Key","_Type_"],ModifierField:["Name","Id","FieldName","Key","_Type_"]},de=n(65624),fe=n.n(de),ve=function(e){return!!e&&!!x()(Z).call(Z,e)},pe=function(e){return!!x()(X).call(X,e)},ge=function(e){var t;return x()(t=["EntryEntity","SubEntryEntity","TreeEntryEntity","TreeSubEntryEntity"]).call(t,e)},me=function(e){return z()(e).call(e,(function(e){return ve(e._Type_)}))},ye=function(e,t){if(!t)return me(e);var n=z()(e).call(e,(function(e){return e.Id===t})),r=null==n?void 0:n._Type_;if(ve(r)||ge(r))return n;var a=n.ParentId;return z()(e).call(e,(function(e){return e.Id===a}))},he=function(e,t){if(!t)return me(e).Id;var n=z()(e).call(e,(function(e){return e.Id===t})),r=null==n?void 0:n._Type_;return ve(r)||ge(r)?n.Id:n.ParentId};function Ce(e,t,n){var r=n.getAllSubControls(t);return!fe()(r).call(r,(function(t){return(null==t?void 0:t[ee])===e}))}var Ee=function(e){var t=e[ee],n=(0,T.useMemo)((function(){return(e=se[t]||se.UndefinedControl)?A()(e)?e:[e]:[];var e}),[t]),r=ue()(n).call(n,(function(t,n){var r=A()(n)?n:[n,n],a=(0,k.c)(r,2),o=a[0],i=a[1];return o in e&&(t[i]=e[o]),t}),{});return r.isDesigner=!0,r};function be(e,t){var n=a()(e);if(i()){var r=i()(e);t&&(r=c()(r).call(r,(function(t){return s()(e,t).enumerable}))),n.push.apply(n,r)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?f()(n=be(Object(a),!0)).call(n,(function(t){(0,b.c)(e,t,a[t])})):p()?m()(e,p()(a)):f()(r=be(Object(a))).call(r,(function(t){h()(e,t,s()(a,t))}))}return e}var _e=function(e){var t=ie(e),n=le(e[$]),r=Ee(e);return ke(ke({},t),{},{onClick:n},r)},xe=n(71252),we=n.n(xe),Ne=(0,L.ErrorBoundaryWrap)((function(e){var t=e.id,n=e.code,r=e.name,a=e.typeName,o=e.properties,i=e.kdesignerApi,l=(0,T.useState)(!1),c=(0,k.c)(l,2),u=c[0],s=c[1],d=(0,T.useContext)(V),f=d.getPrefixCls,v=d.prefixCls,p=(0,T.useContext)(F).nodeContentVisibleConfig,g=(0,T.useRef)(null),m=i.data,y=f&&f(v,"controls-entity-node-field"),h=(0,T.useCallback)((function(){return(m.findControl(t)||{}).Inherit?P().createElement("div",{title:(0,L.getLangMsg)("entityd.fieldNode.key0001"),className:y+"-icon"}):P().createElement("div",{className:y+"-noicon"})}),[t]),E=i.selection,_=(0,T.useCallback)((function(e){var n=e.value,r=null==n?void 0:x()(n).call(n,t);s(r)}),[t]);(0,T.useEffect)((function(){var e=E.getSelection(),n=null==e?void 0:x()(e).call(e,t);s(n);var r=E.addSelectChangeListener(_);return function(){r()}}),[]),(0,T.useEffect)((function(){var e,t;u?null===(e=g.current)||void 0===e||e.setAttribute(ae,"true"):null===(t=g.current)||void 0===t||t.removeAttribute(ae)}),[u]);var w=_e(o),N=p.showKey,I=p.showType,M=we()((0,b.c)((0,b.c)({},y+"-name",!0),y+"-name-hidekey",!N));return P().createElement("div",(0,C.c)({className:y},w,{ref:g}),h(),P().createElement("div",{className:M,title:r},r),N&&P().createElement("div",{className:y+"-code",title:n},P().createElement("span",null,"（"),P().createElement("span",{className:y+"-code-content"},n),P().createElement("span",null,"）")),I&&P().createElement("div",{className:y+"-type"},a))}),"ed-field-node"),Ie="selectField",Me=27,Se=28,Ae=5,Te=10,Pe=48,Le=function(e){var t=e.isHorizontal,n=e.rootClass+(t?"-target-handle-horizontal":"-target-handle-vertical");return P().createElement("div",{className:n},P().createElement("span",null),P().createElement("span",null),P().createElement("span",null),P().createElement("span",null))},Re=function(e){var t=e.click,n=e.rootClass,r=(0,T.useCallback)((function(e,n){e.stopPropagation(),t&&t(n)}),[t]);return P().createElement("div",{className:n+"-add-field-buttonbox"},P().createElement("div",{className:n+"-add-field-buttonbox-leftitem",onClick:function(e){return r(e,!1)}},P().createElement(D.Icon,{prefix:"designericon",type:"tianjiaziji",className:n+"-add-field-buttonbox-leftitem-icon"}),P().createElement("span",{className:n+"-add-field-buttonbox-leftitem-title"},(0,L.getLangMsg)("entityd.entityNode.key0003"))))},De=function(e){var t=e.listData,n=e.close,r=e.isHorizontal,a=e.addEntityNode,o=e.entitylistRef,i=e.rootClass,l=we()((0,b.c)((0,b.c)((0,b.c)({},i+"-entity-type-list",!0),i+"-entity-type-list-lr",r),i+"-entity-type-list-tb",!r)),c=(0,T.useCallback)((function(e,t){e.stopPropagation(),a&&a(t),n&&n()}),[n,a]);return P().createElement("div",{className:l,ref:o},P().createElement("div",{className:i+"-entity-type-list-header"},P().createElement("span",{className:i+"-entity-type-list-header-name"},(0,L.getLangMsg)("entityd.entityNode.key0004")),P().createElement(D.Icon,{prefix:"designericon",type:"guanbi",className:i+"-entity-type-list-header-icon",onClick:n})),P().createElement("div",{className:i+"-entity-type-list-constent"},j()(t).call(t,(function(e,t){return P().createElement("div",{key:t,className:i+"-entity-type-list-constent-item",onClick:function(t){return c(t,e)}},e.name)}))))},Ve=(0,L.ErrorBoundaryWrap)((function(e){var t,n=e.data,r=e.id,a=(0,T.useContext)(F),o=a.layoutDirection,i=a.onClickShowMoreBtn,l=a.nodeContentVisibleConfig,c=(0,T.useState)(!1),u=(0,k.c)(c,2),s=u[0],d=u[1],f=(0,T.useState)(!1),v=(0,k.c)(f,2),p=v[0],g=v[1],m=(0,T.useState)(n.showMore),y=(0,k.c)(m,2),h=y[0],E=y[1],_=(0,T.useContext)(L.GlobalConfigContext).showMessage,w="LR"===o,N=n.title,I=(n.entityName,n.entityIcon),M=n.items,S=n.properties,R=n.entityType,B=(0,T.useRef)(null),K=(0,T.useRef)(null),O=(0,T.useContext)(V),H=O.getKdesignerApi,G=O.invokeAction,J=O.getPrefixCls,Z=O.prefixCls,Y=(0,T.useMemo)((function(){return H()}),[]),te=Y.meta,re=Y.data,ae=Y.selection,ie=J&&J(Z,"controls-entity-node"),le=Y.uiModel,ce=ve(R),ue=pe(R),se=_e(S),de=(0,T.useCallback)((function(e){var t=e.value,n=null==t?void 0:x()(t).call(t,r);if(n)d(n);else{var a=z()(t).call(t,(function(e){var t=le.getEntityFieldInfo(e)||{};return t[ne]===r&&!ge(t[ee])}));d(void 0!==a)}}),[r]);(0,T.useEffect)((function(){var e=ae.getSelection();de({value:e});var t=ae.addSelectChangeListener(de);return function(){t()}}),[]),(0,T.useEffect)((function(){var e,t,n,r;s?(null===(e=B.current)||void 0===e||e.setAttribute(oe,"true"),null!=B&&null!==(t=B.current)&&void 0!==t&&t.parentElement&&(B.current.parentElement.style.zIndex="4")):(null===(n=B.current)||void 0===n||n.removeAttribute(oe),null!=B&&null!==(r=B.current)&&void 0!==r&&r.parentElement&&(B.current.parentElement.style.zIndex="3"))}),[s]),(0,T.useEffect)((function(){E(n.showMore)}),[n.showMore]);var fe=we()((0,b.c)((0,b.c)((0,b.c)({},ie+"-add-entity-button",!0),ie+"-add-entity-button-lr",w),ie+"-add-entity-button-tb",!w)),me=(0,T.useCallback)((function(){p&&g(!1)}),[p]);(0,L.useOnClickOutside)([K],(function(){me()}));var ye=(0,T.useCallback)((function(e){var t=e.type,n=e.fieldName;if(t){var a=r,o=re.findControl(a)[ee];if(te.canAdd(t,o)){var i={_Type_:t,ParentId:a,Name:n,Id:(0,L.createUUid)()};re.addControl((0,L.createAddAction)(i)).then((function(e){var t=e[0].value;ae.setSelect(A()(t)?[t[0][$]]:[t[$]])}))}else _((0,L.getLangMsg)("entityd.entityNode.key0002"))}else _((0,L.getLangMsg)("entityd.entityNode.key0001"))}),[r]),he=(0,T.useCallback)((function(e){p||(e.stopPropagation(),g(!0))}),[p]),Ce=(0,T.useCallback)((function(e){G&&G(Ie,[r,e])}),[r,G]),Ee=(0,T.useMemo)((function(){var e=[];return ce?e=W():ue&&(e=q()),e}),[ce,ue]),be=(0,C.c)({cursor:"auto",border:"0px",background:"none",borderRadius:"0px",opacity:n.hasParent?1:0},w?{height:"11px",width:"6px",left:"-10px"}:{height:"6px",width:"11px",top:"-10px"}),ke=(0,C.c)({cursor:"auto",border:"0px",background:"none",borderRadius:"0",backgroundColor:"#999",opacity:n.hasChildren?1:0},w?{height:"11px",width:"1px"}:{height:"1px",width:"11px"}),xe=l.showFullRelationship,Se=we()((0,b.c)((0,b.c)((0,b.c)((0,b.c)({},ie+"-header-icon",!0),ie+"-header-icon-root",ce),ie+"-header-icon-entity",x()(X).call(X,R)),ie+"-header-icon-subentity",x()(Q).call(Q,R))),Pe=we()((0,b.c)((0,b.c)({},ie+"-header",!0),ie+"-header border-bottom",!xe)),Ve=M.length>5;return P().createElement("div",(0,C.c)({className:ie},se,{ref:B,style:{width:null===(t=n.size)||void 0===t?void 0:t.width}}),P().createElement(U._2,{type:"target",position:w?U.JC.Left:U.JC.Top,id:"a",style:be},P().createElement(Le,{isHorizontal:w,rootClass:ie})),P().createElement(U._2,{type:"source",position:w?U.JC.Right:U.JC.Bottom,id:"b",style:ke}),s&&P().createElement(Re,{click:Ce,rootClass:ie}),P().createElement("div",{className:Pe},P().createElement(D.Icon,{prefix:"designericon",type:I,className:Se}),P().createElement("div",{className:ie+"-header-title",title:N},N)),!xe&&P().createElement("div",{className:ie+"-content",style:{maxHeight:h?Me*Te:Me*Ae}},j()(M).call(M,(function(e){var t=e.id,n=e.key,r=e.name,a=e.properties,o=e.typeName;return P().createElement(Ne,{key:t,code:n,name:r,typeName:o,id:t,properties:a,kdesignerApi:Y})}))),!xe&&Ve&&P().createElement("div",{className:ie+"-foot",onClick:function(){E(!h),i(r,!h)}},P().createElement(D.Icon,{prefix:"designericon",type:h?"xialajiantoufanxiang":"xialajiantou"})),s&&!x()(Q).call(Q,R)&&P().createElement(D.Icon,{prefix:"designericon",type:"tianjiakapian",className:fe,onClick:he}),p&&P().createElement(De,{listData:Ee,close:me,isHorizontal:w,addEntityNode:ye,entitylistRef:K,rootClass:ie}))}),"ed-entity-node"),Fe=n(84912),Be=n.n(Fe),Ke=n(29636),Oe=n.n(Ke),je=function(e,t){var n,r=t.getControlMeta,a={x:0,y:0},o=[],i=[],l=e.Items,c=[],u=[],s=z()(l).call(l,(function(e){return ve(e._Type_)}))[$];return f()(l).call(l,(function(e){var t,n,r,i=e.Id,l=e.Name,d=e._Type_,f=e.ParentId,v=e.showMore;x()(J).call(J,d)?(r=i===s?1:f===s?2:3,c.push(e),o.push({id:i,position:a,type:"entityNode",data:{title:l,entityName:null===(t=G()[d])||void 0===t?void 0:t.name,entityIcon:null===(n=G()[d])||void 0===n?void 0:n.icon,entityType:d,items:[],properties:e,hasParent:!!f,hasChildren:!1,parentId:f,level:r,showMore:v}})):u.push(e)})),f()(c).call(c,(function(e){var t=e.Id,n=e._Type_,r=e.ParentId;if(r){var a;i.push({id:M()(a="".concat(r,"-")).call(a,t),source:r,target:t,type:"step",style:{stroke:"#999"}});var l=Oe()(o).call(o,(function(e){return e.id===r}));o[l].data.hasChildren=!0}else{var c;if(x()(Z).call(Z,n))return;i.push({id:M()(c="".concat(s,"-")).call(c,t),source:s,target:t,type:"step",style:{stroke:"#999"}});var u=Oe()(o).call(o,(function(e){return e.id===r}));o[u].data.hasChildren=!0}})),f()(u).call(u,(function(e){var t=e.Id,n=e.Key,a=e.Name,i=e.ParentId,l=e._Type_,c=r(l)[te];if(i){var u=Oe()(o).call(o,(function(e){return e.id===i}));u>-1&&o[u].data.items.push({id:t,key:n,name:a,properties:e,typeName:c})}else{var d=Oe()(o).call(o,(function(e){return e.id===s}));d>-1&&o[d].data.items.push({id:t,key:n,name:a,properties:e,typeName:c})}})),M()(n=[]).call(n,o,i)},Ue=n(39568),He=n.n(Ue);function ze(){return"Win32"==window.navigator.platform||"Windows"==window.navigator.platform}function We(){return"Mac68K"==window.navigator.platform||"MacPPC"==window.navigator.platform||"Macintosh"==window.navigator.platform||"MacIntel"==window.navigator.platform}var qe;We()||("X11"!=window.navigator.platform||ze()||We())&&(He()(qe=String(window.navigator.platform)).call(qe,"Linux")>-1||ze());function Ge(e){return We()?e.metaKey:e.ctrlKey}var Je=n(39832),Qe=n.n(Je),Ze="formdesigner.CopyContent",Ye=function(e){window.localStorage.setItem(Ze,Qe()(e))},Xe=function(){var e=window.localStorage.getItem(Ze);return e&&(e=JSON.parse(e)),e},$e=function(){return{setCopyContent:Ye,getCopyContent:Xe}};function et(e,t){var n=a()(e);if(i()){var r=i()(e);t&&(r=c()(r).call(r,(function(t){return s()(e,t).enumerable}))),n.push.apply(n,r)}return n}function tt(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?f()(n=et(Object(a),!0)).call(n,(function(t){(0,b.c)(e,t,a[t])})):p()?m()(e,p()(a)):f()(r=et(Object(a))).call(r,(function(t){h()(e,t,s()(a,t))}))}return e}var nt=function(e,t,n,r,a,o){var i=n.getActiveSelectedId,l=t.getRootId(),c=i(),u=t.findControl(c),s=e,d=s.Id,f=s.Key,v=s._Type_,p=u.Id,g=u._Type_,m=s[ne]||l,y=u[ne]||l;if(x()(Y).call(Y,v)){var h=r.getControlMeta(g).IsContainer,C=void 0!==h&&h,E=r.getControlMeta(v).IsContainer,b=void 0!==E&&E;if(C){if(o){var k=(0,L.createUUid)();return{newControl:tt(tt({},s),{},{ParentId:y,Id:k,Key:f+"1",Inherit:!1}),index:t.findControlIndex(p)+1}}if(a(v,g,{Id:d,IsContainer:b,ParentId:m},{Id:p,IsContainer:C})){var _=(0,L.createUUid)();return{newControl:tt(tt({},s),{},{ParentId:p,Id:_,Key:f+"1",Inherit:!1}),index:-1}}return!1}return!1}if(x()(J).call(J,g)){var w=r.getControlMeta(g).IsContainer,N=void 0!==w&&w,I=r.getControlMeta(v).IsContainer;if(a(v,g,{Id:d,IsContainer:void 0!==I&&I,ParentId:m},{Id:p,IsContainer:N})){return{newControl:tt(tt({},s),{},{ParentId:p,Id:(0,L.createUUid)(),Key:f+"1",FieldName:f+"1",Inherit:!1}),index:-1}}return!1}var M=t.findControl(y),S=M.Id,A=M._Type_,T=r.getControlMeta(A).IsContainer;return!!a(v,A,{Id:d,IsContainer:!1,ParentId:m},{Id:S,IsContainer:void 0!==T&&T})&&{newControl:tt(tt({},s),{},{ParentId:y,Id:(0,L.createUUid)(),Key:f+"1",FieldName:f+"1",Inherit:!1}),index:t.findControlIndex(p)+1}},rt=function(e,t,n,r,a,o){if(x()(r).call(r,e)){var i=at(e,n);n.deleteControl((0,L.createDeleteAction)(e)).then((function(){t([i])}))}else{var l=n.findControl(e),c=l.Key,u=l._Type_;if(l.Inherit)return void o((0,L.getLangMsg)("entityd.toolbarUtil.key0001"));a("deleteConfirm",[c,e,ge(u)])}},at=function(e,t){for(var n,r,a=t.getAllSiblings(e),o=Oe()(a).call(a,(function(t){return t[$]===e})),i=x()(Y).call(Y,a[o][ee]),l=o-1;l>=0;l--)if(x()(Y).call(Y,a[l][ee])===i){n=a[l];break}for(var c=o+1;c<a.length;c++)if(x()(Y).call(Y,a[c][ee])===i){r=a[c];break}var u=t.getParentControlId(e),s=e;return n?s=n[$]:r?s=r[$]:u&&(s=u),s},ot=function(e,t){var n=[];return f()(e).call(e,(function(e){var r=t.getAllSubControls(e)||[];n=M()(n).call(n,r)})),n};function it(e,t){var n=a()(e);if(i()){var r=i()(e);t&&(r=c()(r).call(r,(function(t){return s()(e,t).enumerable}))),n.push.apply(n,r)}return n}function lt(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?f()(n=it(Object(a),!0)).call(n,(function(t){(0,b.c)(e,t,a[t])})):p()?m()(e,p()(a)):f()(r=it(Object(a))).call(r,(function(t){h()(e,t,s()(a,t))}))}return e}var ct=We(),ut="entity-designer-entity-node-nav-tool",st=(0,L.ErrorBoundaryWrap)((function(){var e,t,n,r,a=(0,T.useContext)(V),o=a.getKdesignerApi,i=a.invokeAction,l=(0,T.useState)(!1),u=(0,k.c)(l,2),s=u[0],d=u[1],v=(0,T.useState)(!1),p=(0,k.c)(v,2),g=p[0],m=p[1],y=o(),h=y.data,C=y.selection,E=(0,T.useContext)(L.GlobalConfigContext),_=E.showMessage,w=E.controlsAddedByForntEnd,N=E.canAddCallback,I=(0,T.useContext)(L.DataFactoryContext).metaApi,S=$e(),R=S.setCopyContent,F=S.getCopyContent,B=C.getSelection,K=(C.setSelect,h.canUndo()),O=h.canRedo(),j=h.getRootId(),U=(0,T.useCallback)((function(e){var t=e.value;if(t!==e.oldValue&&1===t.length)if(x()(t).call(t,j))d(!0),m(!1);else{var n=t[0],r=h.findControl(n)[ee];m(x()(Y).call(Y,r)),d(!1)}else d(!1),m(!1)}),[j]);(0,T.useEffect)((function(){var e=C.getSelection();if(1===e.length)if(x()(e).call(e,j))d(!0),m(!1);else{var t=e[0],n=h.findControl(t)[ee];m(x()(Y).call(Y,n)),d(!1)}else d(!1),m(!1);var r=C.addSelectChangeListener(U);return function(){r()}}),[]);var H=(0,T.useCallback)((function(e){var t=!1,n=!0;switch(e){case 1:t=!K,n=K;break;case 2:t=!O,n=O;break;case 3:t=s||g,n=!(s||g);break;case 4:t=s,n=!s;break;default:t=!1,n=!0}return{disable:t,command:n}}),[s,O,K,g]),z=(0,T.useCallback)((function(){H(2).disable||O&&h.redo()}),[O,H]),W=(0,T.useCallback)((function(){if(!H(1).disable&&K){h.undo();var e=h.getRootId();C.setSelect(e)}}),[K,H]),q=(0,T.useCallback)((function(){if(!H(3).disable){var e=B();1===e.length?h.moveControl(e[0],"forward"):_((0,L.getLangMsg)("entityd.listTree.key0002"))}}),[H]),G=(0,T.useCallback)((function(){if(!H(3).disable){var e=B();1===e.length?h.moveControl(e[0],"back"):_((0,L.getLangMsg)("entityd.listTree.key0002"))}}),[H]),J=(0,T.useCallback)((function(){if(!H(4).disable){var e=C.getSelection,t=C.setSelect,n=h.getRootId(),r=e();r.length>0&&f()(r).call(r,(function(e){n!==e?rt(e,t,h,w,i,_):_((0,L.getLangMsg)("entityd.tips.key0001"))}))}}),[H]),Q=(0,T.useCallback)((function(){if(!H(4).disable){var e=B()||[],t=ot(e,h);R(t)}}),[H]),Z=(0,T.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F();if(!H(0).disable){var n=!0===e;if(A()(t)){var r=[],a=-1,o=c()(t).call(t,(function(e){var t=e[ee],n=I.getControlMeta(t).IsContainer;return void 0!==n&&n}));if(o.length>0){var i=nt(o[0],h,C,I,N,n);if(!1===i)_((0,L.getLangMsg)("entityd.listTree.key0003"));else{var l=i.newControl,u=i.index;r.push(l),a=u;var s=l.Id;s&&f()(t).call(t,(function(e){var t=e.Key,n=e._Type_;if((e[ne]||j)===o[0][$]&&!x()(Y).call(Y,n)){var a=lt(lt({},e),{},{ParentId:s,Id:(0,L.createUUid)(),Key:t+"1",FieldName:t+"1",Inherit:!1});r.push(a)}}))}}else f()(t).call(t,(function(e){var t=nt(e,h,C,I,N,n);if(!1===t)_((0,L.getLangMsg)("entityd.listTree.key0003"));else{var o=t.newControl,i=t.index;r.push(o),a=i}}));var d={index:a};h.addControl((0,L.createPasteAction)(r,d))}}}),[H]),X=(0,T.useCallback)((function(){if(!H(4).disable){var e=B()||[],t=ot(e,h);Z(!0,t)}}),[Q,Z,H]),te=(0,T.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=H(e),a=r.disable,o=r.command;return t?we()((0,b.c)((0,b.c)({},"".concat(ut,"-buttonbox-operation-disable-icon"),a),"".concat(ut,"-buttonbox-operation-btn-icon"),o)):n?we()((0,b.c)((0,b.c)((0,b.c)({},"".concat(ut,"-buttonbox-operation-disable"),a),"".concat(ut,"-buttonbox-last-operation"),!0),"".concat(ut,"-buttonbox-operation-btn"),o)):we()((0,b.c)((0,b.c)({},"".concat(ut,"-buttonbox-operation-disable"),a),"".concat(ut,"-buttonbox-operation-btn"),o))}),[H]);return P().createElement("div",{className:ut},P().createElement("div",{className:ut+"-buttonbox"},P().createElement("div",{title:M()(e="".concat((0,L.getLangMsg)("entityd.toolbarView.key0001"),"\n")).call(e,ct?"⌘+Z":"Ctrl+Z"),className:te(1),onClick:W},P().createElement(D.Icon,{prefix:"designericon",type:"chexiao",className:te(1,!0)})),P().createElement("div",{title:M()(t="".concat((0,L.getLangMsg)("entityd.navToolBar.key0001"),"\n")).call(t,ct?"⌘+Y":"Ctrl+Y"),className:te(2,!1,!0),onClick:z},P().createElement(D.Icon,{prefix:"designericon",type:"zhongzuo",className:te(2,!0)}))),P().createElement("div",{className:ut+"-buttonbox"},P().createElement("div",{title:(0,L.getLangMsg)("entityd.navToolBar.key0002"),onClick:q,className:te(3)},P().createElement(D.Icon,{prefix:"designericon",type:"zuiqian",className:te(3,!0)})),P().createElement("div",{title:(0,L.getLangMsg)("entityd.navToolBar.key0003"),onClick:G,className:te(3,!1,!0)},P().createElement(D.Icon,{prefix:"designericon",type:"zuihou",className:te(3,!0)}))),P().createElement("div",{className:ut+"-buttonbox"},P().createElement("div",{title:M()(n="".concat((0,L.getLangMsg)("entityd.navToolBar.key0004"),"\n")).call(n,ct?"⌘+C":"Ctrl+C"),onClick:Q,className:te(4)},P().createElement(D.Icon,{prefix:"designericon",type:"fuzhi",className:te(4,!0)})),P().createElement("div",{title:M()(r="".concat((0,L.getLangMsg)("entityd.navToolBar.key0005"),"\n")).call(r,ct?"⌘+V":"Ctrl+V"),onClick:Z,className:te(0,!1,!0)},P().createElement(D.Icon,{prefix:"designericon",type:"zhantie",className:te(0,!0)}))),P().createElement("div",{className:ut+"-buttonbox"},P().createElement("div",{title:(0,L.getLangMsg)("entityd.navToolBar.key0006"),onClick:X,className:te(4)},P().createElement(D.Icon,{prefix:"designericon",type:"zhongfu",className:te(4,!0)})),P().createElement("div",{title:"".concat((0,L.getLangMsg)("entityd.navToolBar.key0007"),"\nDelete"),onClick:J,className:te(4,!1,!0)},P().createElement(D.Icon,{prefix:"designericon",type:"shanchu",className:te(4,!0)}))))}),"ed-nav-toolbar");var dt=(0,L.ErrorBoundaryWrap)((function(){var e=(0,T.useContext)(V),t=e.getPrefixCls,n=e.prefixCls,r=e.changeDesignerView,a=e.getKdesignerApi,o=t&&t(n,"top-view-right"),i=a().views;return P().createElement("div",{className:o},P().createElement("div",{title:(0,L.getLangMsg)("entityd.navToolBarRight.key0001"),className:o+"-change-view",onClick:function(){r(1),i.setViewHideState("top")(!0),i.setViewHideState("left")(!0)}},P().createElement(D.Icon,{prefix:"designericon",type:"guanxishitu",className:o+"-change-view-icon"})))}),"ed-nav-toolbar-right"),ft=function(){var e=(0,T.useContext)(L.ConfigContext),t=e.getPrefixCls,n=e.prefixCls,r=(0,T.useContext)(V),a=r.getPrefixCls,o=r.prefixCls,i=t&&t(n),l="".concat(i,"-top-view-main"),c=a&&a(o),u="".concat(c,"-top-view-main"),s=P().createElement("div",{className:u},P().createElement(st,null),P().createElement(dt,null));return P().createElement(L.ViewHeader,{content:s,portalId:l})};function vt(e,t){var n=function(e){var t=e.data.title,n=void 0===t?"":t,r=document.getElementById("_entityNodeTitle_");r||((r=document.createElement("div")).setAttribute("id","_entityNodeTitle_"),r.setAttribute("style","height:36px; border: 1px solid red; padding-left:32px; padding-right:12px; min-width:200px; max-width:320px; position:absolute; left:-9999px; top:0px; display:flex;"),document.body.appendChild(r));var a='<div style="margin:8px; font-size:14px;">'.concat(n,"</div>");r.innerHTML=(0,L.xssFilters)(a);var o=r.getBoundingClientRect(),i=o.width,l=o.height;return{width:i,height:l}}(e),r=function(e,t){var n=e.data,r=n.items,a=void 0===r?[]:r,o=n.showMore,i=t.showKey,l=t.showType,c=0;f()(a).call(a,(function(e){var t=e.name,n=e.key,r=e.typeName,a=document.getElementById("_fieldNode_");a||((a=document.createElement("div")).setAttribute("id","_fieldNode_"),a.setAttribute("style","height:27px; border: 1px solid red; padding-left:22px; padding-right:20px; min-width:200px; max-width:320px; position:absolute; left:-9999px; top:40px; font-size: 12px; display:flex;"),document.body.appendChild(a));var o="<div>".concat(t,"</div>");o+=l?"<div>（".concat(r,"）</div>"):"",o+=i?"<div>（".concat(n,"）</div>"):"",a.innerHTML=(0,L.xssFilters)(o);var u=a.getBoundingClientRect().width;c=Math.max(c,u)}));var u=0;u=a.length<=Ae?Math.max(Me*a.length,Pe):a.length<=Te?o?Me*a.length+Se:Me*Ae+Se:o?Me*Te+Se:Me*Ae+Se;return{width:c,height:u}}(e,t);return{width:Math.max(n.width,r.width),height:n.height+r.height}}function pt(e,t,n,r){switch(n){case 2:case 3:var a=function(e,t){var n=c()(e).call(e,(function(e){return e.data.level===t})),r=[],a=[];return f()(n).call(n,(function(e){var t=e.data.size,n=t.height,o=t.width;r.push(n),a.push(o)})),{maxHeight:Math.max.apply(Math,r),maxWidth:Math.max.apply(Math,a)}}(e,n),o=a.maxHeight,i=a.maxWidth;return{x:t.x-(r?i:t.width)/2,y:t.y-(r?t.height:o)/2};default:return{x:t.x-t.width/2,y:t.y-t.height/2}}}var gt=n(71536),mt=n.n(gt);var yt=(0,L.ErrorBoundaryWrap)((function(e){var t=e.config,n=e.mousePosition,r=e.onContextItemClick,a=e.closeContextMenu,o=(0,T.useContext)(V),i=o.getPrefixCls,l=o.prefixCls,c=i&&i(l,"main-view"),u=(0,T.useState)([]),s=(0,k.c)(u,2),d=s[0],f=s[1],v=(0,T.useRef)(null),p="1",g="2";return(0,L.useOnClickOutside)([v],(function(){a()})),(0,T.useEffect)((function(){var e=[],n=t.showType,r=t.showKey;n&&e.push(p),r&&e.push(g),f(e)}),[t]),(0,gt.createPortal)(P().createElement("div",{className:c+"-context-menu",style:{left:n.x,top:n.y},ref:v},P().createElement(D.Checkbox.Group,{onChange:function(e){var t=!1,n=!1;x()(e).call(e,p)&&(t=!0),x()(e).call(e,g)&&(n=!0),r(t,n)},value:d,checkboxType:"default",className:c+"-context-menu-checkbox"},P().createElement(D.Checkbox,{className:c+"-context-menu-item",value:p},(0,L.getLangMsg)("entityd.contextMenu.key0001")),P().createElement(D.Checkbox,{className:c+"-context-menu-item",value:g},(0,L.getLangMsg)("entityd.contextMenu.key0002")))),document.body)}),"ed-context-menu"),ht=n(67928),Ct=n.n(ht),Et=["Key","Name","_Type_","Id","ParentId"],bt=(0,L.ErrorBoundaryWrap)((function(e){var t=e.kdesignerApi,n=e.tableData,r=e.allselectedArr,a=(0,T.useContext)(L.GlobalConfigContext),o=a.showMessage,i=a.controlsAddedByForntEnd,l=a.canAddCallback,u=(0,T.useContext)(V),s=u.changeDesignerView,d=u.getPrefixCls,v=u.prefixCls,p=u.invokeAction,g=t.selection,m=t.data,y=(0,T.useRef)(null),h=t.meta,C=t.views,E=g.setSelect,b=g.getActiveSelectedId,_=(0,T.useState)([]),w=(0,k.c)(_,2),N=w[0],I=w[1],M=(0,T.useState)([]),S=(0,k.c)(M,2),A=S[0],R=S[1],F=(0,T.useState)([]),B=(0,k.c)(F,2),K=B[0],O=B[1],j=(0,T.useState)(""),U=(0,k.c)(j,2),H=U[0],z=U[1],W=d&&d(v,"list-view-table");(0,T.useEffect)((function(){var e=function(e,t,n){var r=[];return f()(e).call(e,(function(e){var a=e.properties,o={};f()(t).call(t,(function(e){if("_Type_"===e){var t=n.getControlMeta(a[e])[te];o[e]=t}else o[e]=a[e]})),r.push(o)})),r}(n,Et,h);(0,ht.isEqual)(N,e)||(I(e),R(e),z(""))}),[n,N]),(0,T.useEffect)((function(){q(r)}),[r]);var q=(0,T.useCallback)((function(e){if(!(0,ht.isEqual)(e,K)){var t=[];f()(n).call(n,(function(n){null!=e&&x()(e).call(e,n.id)&&t.push(n.id)})),O(t)}}),[K,n]),G={type:"radio",value:K,onChange:function(e){E(e),O(e)},clickArea:"row"},J=(0,T.useCallback)((function(){var e,t=b(),n=(null===(e=A[0])||void 0===e?void 0:e.ParentId)||t;p&&p(Ie,[n,!1])}),[A,p]),Q=(0,T.useCallback)((function(){0!==K.length?f()(K).call(K,(function(e){rt(e,E,m,i,p,o)})):o((0,L.getLangMsg)("entityd.listTable.key0004"))}),[K,p]),Z=(0,T.useCallback)((function(){if(0!==K.length){var e=ot(K,m),t=[],n=-1;f()(e).call(e,(function(e){var r=nt(e,m,g,h,l,!0);if(!1===r)o((0,L.getLangMsg)("entityd.listTable.key0005"));else{var a=r.newControl,i=r.index;t.push(a),n=i}}));var r={index:n};m.addControl((0,L.createPasteAction)(t,r))}else o((0,L.getLangMsg)("entityd.listTable.key0004"))}),[K,p]);return P().createElement("div",{className:W},P().createElement("div",{className:W+"-topbarbox"},P().createElement("div",{title:(0,L.getLangMsg)("entityd.listTable.key0006"),className:W+"-topbarbox-changeview",onClick:function(){s(0),C.setViewHideState("top")(!1),C.setViewHideState("left")(!1)}},P().createElement(D.Icon,{prefix:"designericon",type:"liebiaoshitu",className:W+"-topbarbox-changeview-icon"}))),P().createElement("div",{className:W+"-tabelbox"},P().createElement("div",{className:W+"-tabelbox-tabheader"},P().createElement("div",{className:W+"-tabelbox-tabheader-searchbox"},P().createElement(D.Icon,{prefix:"designericon",type:"sousuo",className:W+"-tabelbox-tabheader-searchbox-icon"}),P().createElement("input",{type:"text",ref:y,value:H,placeholder:(0,L.getLangMsg)("entityd.listTable.key0007"),onChange:function(){var e=y.current.value;z(e)},onKeyDown:function(e){if(13===e.keyCode){var t=[];t=""===H?N:function(e,t){var n=c()(t).call(t,(function(t){var n,r;return x()(n=t.Key).call(n,e)||x()(r=t[te]).call(r,e)}));return n||[]}(H,N),R(t),y.current.blur()}},className:W+"-tabelbox-tabheader-searchbox-input"}),H&&P().createElement(D.Icon,{prefix:"designericon",type:"shurukuangquanqing",className:W+"-tabelbox-tabheader-searchbox-icon",onClick:function(){z(""),R(N)}})),P().createElement("div",{className:W+"-tabelbox-tabheader-toolbarbox"},P().createElement("span",{className:W+"-tabelbox-tabheader-toolbarbox-button",onClick:J},(0,L.getLangMsg)("entityd.listTable.key0008")),P().createElement("span",{className:W+"-tabelbox-tabheader-toolbarbox-button",onClick:Z},(0,L.getLangMsg)("entityd.listTable.key0009")),P().createElement("span",{className:W+"-tabelbox-tabheader-toolbarbox-button",onClick:Q},(0,L.getLangMsg)("entityd.listTable.key0010")))),P().createElement(D.Table,{dataSource:A,columns:[{code:"Key",name:(0,L.getLangMsg)("entityd.listTable.key0001"),width:200,features:{sortable:!0,filterable:!0}},{code:"Name",name:(0,L.getLangMsg)("entityd.listTable.key0002"),width:220,features:{sortable:!0,filterable:!0}},{code:"_Type_",name:(0,L.getLangMsg)("entityd.listTable.key0003"),width:150,features:{sortable:!0,filterable:!0}}],filter:{onChangeFilters:function(e){}},sort:{mode:"single",highlightColumnWhenActive:!0,sortIconHoverShow:!0,onChangeSorts:function(e){}},rowSelection:G,primaryKey:"Id",style:{flexShrink:1,minHeight:0}})))}),"ed-list-table"),kt=n(34984),_t=n(96432),xt=n.n(_t),wt=n(49464),Nt=n.n(wt),It=n(30479),Mt=n.n(It),St=n(89843),At=n.n(St),Tt=n(59312),Pt=n.n(Tt),Lt=n(11872),Rt=n.n(Lt),Dt=n(88836),Vt=n.n(Dt),Ft=n(5848),Bt=n.n(Ft),Kt=n(97440),Ot=n.n(Kt),jt=n(64248),Ut=n.n(jt),Ht=["children","title","key"],zt=["title","key","icon","disabled","checkable","pos","level","hasChildNode","selectable"];function Wt(e,t){var n=void 0!==Ot()&&Ut()(e)||e["@@iterator"];if(!n){if(A()(e)||(n=function(e,t){var n;if(!e)return;if("string"==typeof e)return qt(e,t);var r=K()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return At()(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qt(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw o}}}}function qt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Gt(e,t){var n=a()(e);if(i()){var r=i()(e);t&&(r=c()(r).call(r,(function(t){return s()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jt(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?f()(n=Gt(Object(a),!0)).call(n,(function(t){(0,b.c)(e,t,a[t])})):p()?m()(e,p()(a)):f()(r=Gt(Object(a))).call(r,(function(t){h()(e,t,s()(a,t))}))}return e}var Qt=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3?arguments[3]:void 0;return t&&f()(t).call(t,(function(t,o){var i,l=t.children,c=t.title,u=t.key,s=(0,kt.c)(t,Ht),d=a?M()(i="".concat(a,"-")).call(i,o):"".concat(o),f=l&&l instanceof Array&&l.length>0;n.push(Jt({title:c,key:u,pos:d,hasChildNode:f,level:r},s));var v=r;v++,e(l,n,v,d)})),n},Zt=function(e,t){return null==e?void 0:x()(e).call(e,t)},Yt=function(e){var t=[];return f()(e).call(e,(function(n){var r=n.pos,a=function(e,t){for(var n=!0;xt()(t).call(t,"-")>-1&&n;){t=t.substring(0,xt()(t).call(t,"-"));var r=z()(e).call(e,(function(e){return e.pos===t}));n=null==r?void 0:r.expand}return n}(e,r);a&&t.push(n)})),t},Xt=function(e,t,n){var r=He()(e).call(e,t),a=e.substr(r+t.length,1);return!(!Nt()(e).call(e,t)||"-"!==a||!n)},$t=function(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=c()(e).call(e,(function(e){return Xt(e.pos,r,o?r!==e.pos:a===e.level-1)})),l=[],u=[];return f()(i).call(i,(function(e){l.push(Zt(n,e.key)),u.push(Zt(t,e.key))})),{checked:fe()(l).call(l,(function(e){return!0===e})),halfChecked:fe()(u).call(u,(function(e){return!0===e}))}},en=function(e,t,n,r,a){var o=c()(e).call(e,(function(e){return Xt(e.pos,n,a?n!==e.pos:r===e.level-1)})),i=[];return f()(o).call(o,(function(e){i.push(Zt(t,e.key))})),Mt()(i).call(i,(function(e){return!0===e}))},tn=function(e,t){var n=[];return f()(e).call(e,(function(e){var r=e.title,a=e.key,o=e.icon,i=e.disabled,l=e.checkable,c=e.pos,u=e.level,s=e.hasChildNode,d=e.selectable,f=(0,kt.c)(e,zt),v=function(e,t){return null==e?void 0:x()(e).call(e,t)}(t,a),p=v||!1;n.push(Jt({title:r,key:a,level:u,pos:c,hasChildNode:s,expand:p,icon:o,disabled:i,checkable:l,selectable:d},f))})),n},nn=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return At()(new(Pt())(M()(e=[]).call(e,(0,E.c)(t),(0,E.c)(n))))},rn=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=[];xt()(t).call(t,"-")>-1;)t=t.substring(0,xt()(t).call(t,"-")),f()(e).call(e,(function(e){e.pos===t&&n.push(e.key)}));return n},an=function(e,t){var n=z()(e).call(e,(function(e){return e.key===t}));return null==n?void 0:n.pos},on=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=(0,E.c)(t),o=[],i=function(n){f()(e).call(e,(function(i){if(i.level===n){var l=Zt(a,i.key),c=i.hasChildNode&&$t(e,o,a,i.pos,i.level,r),u=i.hasChildNode&&en(e,a,i.pos,i.level,r),s=null==c?void 0:c.checked,d=null==c?void 0:c.halfChecked,f=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=!1;xt()(n).call(n,"-")>-1&&!r;){n=n.substring(0,xt()(n).call(n,"-"));var a=z()(e).call(e,(function(e){return e.pos===n}));r=Zt(t,a.key)}return r}(e,t,i.pos),v=l||f||u;v&&a.push(i.key),(s||d)&&!v&&o.push(i.key)}}))},l=n;l>=0;l--)i(l);return{checkedKeys:At()(new(Pt())(a)),halfCheckedKeys:At()(new(Pt())(o))}},ln=function(e){var t=(0,E.c)(e);return{checkedKeys:At()(new(Pt())(t)),halfCheckedKeys:[]}},cn=function(e,t){return Xt(t,e,e!==t)},un=function(e,t){return cn(t,e)},sn=function(e,t){var n=(0,C.c)([],e);return f()(t).call(t,(function(e){var t=He()(n).call(n,e);t>-1&&Rt()(n).call(n,t,1)})),n},dn=function(e,t,n,r,a,o){var i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],l=(null==t?void 0:M()(t).call(t,i))||(null==n?void 0:M()(n).call(n,i))||[];if(r)l=function(e){var t=[];return f()(e).call(e,(function(e){t.push(e.key)})),t}(e);else{if(a){var u=function(e){var t="";if(!(c()(e).call(e,(function(e){var t;return-1===(null===(t=e.pos)||void 0===t?void 0:He()(t).call(t,"-"))})).length>1))return f()(e).call(e,(function(e){"0"===e.pos&&(t=e.key)})),t}(e);u&&(l=M()(l).call(l,u))}if(o){var s=[];f()(l).call(l,(function(t){s.push.apply(s,(0,E.c)(rn(e,t)))})),l=M()(l).call(l,s)}}return At()(new(Pt())((0,E.c)(l)))},fn={Tree:{defaultExpandAll:!1,defaultExpandRoot:!1,checkable:!1,checkStrictly:!1,disabled:!1,draggable:!1,virtual:!0,switcherIcon:function(){return P().createElement(D.Icon,{type:"arrow-right-solid"})}},TreeNode:{}},vn=function(e,t,n){var r=fn[e],a=t&&t[e]||{};return(0,C.c)({},r,a,n||{})};function pn(e,t,n){var r,a,o=new(Vt()),i=function(e){if(o.has(e))return o.get(e);var t={id:e,parent:null,item:null,children:[]};return o.set(e,t),t},l=Wt(n);try{for(l.s();!(a=l.n()).done;){var u=a.value,s=i(u[t]),d=i(u[e]);d.parent=s,s.children.push(d),d.item=u}}catch(e){l.e(e)}finally{l.f()}var v,p,g,m=(v=c()(r=At()(Bt()(o).call(o))).call(r,(function(e){return null==e.parent})),p=function(e){return e.children},g=[],f()(v).call(v,(function(e,t){g.push.apply(g,(0,E.c)(p(e,t,v)))})),g);return function e(t){var n,r=[],a=Wt(t);try{for(a.s();!(n=a.n()).done;){var o=n.value;0===o.children.length?r.push(o.item):r.push(Jt(Jt({},o.item),{},{children:e(o.children)}))}}catch(e){a.e(e)}finally{a.f()}return r}(m)}var gn=function(e,t,n,r,a,o,i,l){var c=[];if(i){var u=an(e,i);c=rn(e,u)}var s=P().useMemo((function(){return dn(e,t,n,r,a,o,c)}),[e,t,n,r,a,o,i]),d=P().useMemo((function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=(null==e?void 0:M()(e).call(e,t))||[];return At()(new(Pt())((0,E.c)(n)))}(t,c)}),[t]),f=P().useState(s),v=(0,k.c)(f,2),p=v[0],g=v[1];return P().useEffect((function(){g(l?s:d)}),[d,s]),[p,g]},mn=["nodeKey","prefixCls","selectable","checkable","className","icon","switcherIcon","disabled","draggable","pos","checked","level","getDragNode","hasChildNode","expand","title","showLine","showIcon","selected","setDragNode","style","indeterminate","estimatedItemSize","onExpand","onCheck","onDragStart","onDragOver","onDragLeave","onDragEnter","onDragEnd","onDrop","onSelect","addEntityNode","deleteEntityNode"];function yn(e,t){var n=a()(e);if(i()){var r=i()(e);t&&(r=c()(r).call(r,(function(t){return s()(e,t).enumerable}))),n.push.apply(n,r)}return n}function hn(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?f()(n=yn(Object(a),!0)).call(n,(function(t){(0,b.c)(e,t,a[t])})):p()?m()(e,p()(a)):f()(r=yn(Object(a))).call(r,(function(t){h()(e,t,s()(a,t))}))}return e}var Cn=P().forwardRef((function(e,t){var n,r=vn("TreeNode",{},e),a=r.nodeKey,o=(r.prefixCls,r.selectable),i=r.checkable,l=r.className,c=r.icon,u=r.switcherIcon,s=r.disabled,d=r.draggable,f=r.pos,v=r.checked,p=r.level,g=(r.getDragNode,r.hasChildNode),m=r.expand,y=r.title,h=r.showLine,C=r.showIcon,E=r.selected,_=(r.setDragNode,r.style),w=r.indeterminate,N=r.estimatedItemSize,I=r.onExpand,S=r.onCheck,R=(r.onDragStart,r.onDragOver,r.onDragLeave,r.onDragEnter,r.onDragEnd,r.onDrop,r.onSelect),V=r.addEntityNode,F=r.deleteEntityNode,B=(0,kt.c)(r,mn),K=P().useMemo((function(){return hn({selectable:o,checkable:i,expand:m,key:a,level:p,title:y,disabled:s,draggable:d,checked:v,pos:f,hasChildNode:g,indeterminate:w,icon:c,switcherIcon:u,showIcon:C,selected:E},B)}),[o,i,m,a,p,y,s,d,v,f,g,w,c,u,C,E]),O=r[ee],j=ve(O),U=pe(O),H=(0,T.useState)(!1),z=(0,k.c)(H,2),G=z[0],J=z[1],Z=(0,T.useRef)(null),Y=P().useRef(null),X=function(e){var t=P().useState(e),n=(0,k.c)(t,2),r=n[0],a=n[1];return(0,T.useEffect)((function(){a(e)}),[e]),[r,function(e){return a(e)}]}(m),te=(0,k.c)(X,2),ne=te[0],re=te[1],ae="entity-designer-tree-node",oe=function(e){return"function"==typeof e?e(hn({},{selectable:o,checkable:i,disabled:s,title:y,draggable:d,checked:v,hasChildNode:g,expand:m,nodeKey:a,icon:e,switcherIcon:u,showIcon:C,selected:E,indeterminate:w})):e},ie=P().useCallback((function(e){var t=e.target.checked;S&&S(a,t,K,e,f)}),[S,a,K,f]),le=P().useCallback((function(e){o&&!s&&R&&R(e,K,a)}),[R,o,s,K,a]);P().useImperativeHandle(t,(function(){return{selectNode:le}}));var ce=P().useCallback((function(e){e.stopPropagation(),le(e)}),[re,ne,I,a,K,le]),ue=P().useCallback((function(e){e.stopPropagation(),re(!ne),I&&I(a,!ne,K)}),[re,ne,I,a,K]),se=P().useCallback((function(e){e.stopPropagation(),J(!0)}),[]),de=P().useCallback((function(e){e.stopPropagation(),F([r[$]])}),[r]),fe=(0,T.useCallback)((function(){G&&J(!1)}),[G]);(0,L.useOnClickOutside)([Z],(function(){fe()}));var ge,me,ye=(0,T.useMemo)((function(){var e=[];return j?e=W():U&&(e=q()),e}),[j,U]);return P().createElement("div",{className:we()("".concat(ae,"-item"),(0,b.c)({},"".concat(ae,"-item-hover"),!s&&o),(0,b.c)({},"".concat(ae,"-selected"),E&&o&&!s),(0,b.c)({},"".concat(ae,"-disabled"),s),(0,b.c)({},"".concat(ae,"-opened"),ne),M()(n="".concat(ae,"-item-")).call(n,a),l),style:hn({height:"".concat(N)},_),onClick:ce},P().createElement(P().Fragment,null,P().createElement("div",{draggable:d&&!s,className:we()((0,b.c)((0,b.c)({},"".concat(ae,"-draggabled"),!0),"".concat(ae,"-root"),!0)),ref:Y},function(){for(var e=[],t=we()((0,b.c)((0,b.c)({},"".concat(ae,"-indent"),!0),"".concat(ae,"-indent-line"),!!h)),n=0;n<p;n++)e.push(P().createElement("span",{className:t,key:n,style:{height:"".concat(N)}},"    "));return e}(),g?A()(u)&&2===u.length?P().createElement("span",{className:we()("".concat(ae,"-icon")),onClick:ue},oe(ne?u[1]:u[0])):P().createElement("span",{className:we()("".concat(ae,"-icon"),(0,b.c)((0,b.c)({},"".concat(ae,"-animation-expand"),ne),"".concat(ae,"-animation-collapse"),!ne)),onClick:ue},oe(u||P().createElement(D.Icon,{type:"arrow-right-solid"}))):P().createElement("span",{className:"".concat(ae,"-icon-hidden")}),C&&P().createElement("span",{className:"".concat(ae,"-leaf-icon")},oe(c)),i?P().createElement(D.Checkbox,{onChange:ie,checked:v,indeterminate:!s&&w,disabled:s},P().createElement("span",{className:we()("".concat(ae,"-title"),(0,b.c)({},"".concat(ae,"-title-disabled"),s)),title:y},y)):P().createElement("span",{className:we()("".concat(ae,"-title"),(0,b.c)({},"".concat(ae,"-title-disabled"),s)),title:y},y),E&&(ge=we()((0,b.c)({},"".concat(ae,"-right-addIcon"),!0)),me=we()((0,b.c)({},"".concat(ae,"-right-deleteIcon"),!0)),P().createElement("span",{className:"".concat(ae,"-right-icon")},!x()(Q).call(Q,r[ee])&&P().createElement("span",{title:"".concat((0,L.getLangMsg)("entityd.treeNode.key0001")),className:ge,onClick:se},E&&P().createElement(D.Icon,{prefix:"designericon",type:"tianjia3"})),!ve(r[ee])&&P().createElement("span",{title:"".concat((0,L.getLangMsg)("entityd.treeNode.key0002")),className:me,onClick:de},E&&P().createElement(D.Icon,{prefix:"designericon",type:"shanchu"})))))),G&&P().createElement(bn,{listData:ye,close:fe,addEntityNode:V,entitylistRef:Z}))}));Cn.displayName="TreeNode";var En=Cn,bn=function(e){var t=e.listData,n=e.close,r=e.addEntityNode,a=e.entitylistRef,o="entity-designer-tree-node",i=we()((0,b.c)((0,b.c)({},o+"-entity-type-list",!0),o+"-entity-type-list-tb",!0)),l=(0,T.useCallback)((function(e,t){e.stopPropagation(),r&&r(t),n&&n()}),[n,r]);return P().createElement("div",{className:i,ref:a},P().createElement("div",{className:o+"-entity-type-list-constent"},j()(t).call(t,(function(e,t){return P().createElement("div",{key:t,className:o+"-entity-type-list-constent-item",onClick:function(t){return l(t,e)}},e.name)}))))},kn=n(45904),_n=n.n(kn),xn=P().forwardRef((function(e,t){var n=vn("Tree",{},e),r=n.treeData,a=n.virtual,o=n.showIcon,i=n.switcherIcon,l=n.icon,c=n.checkable,u=n.checkStrictly,s=n.disabled,d=n.draggable,v=n.scrollToKey,p=n.expandedKeys,g=n.checkedKeys,m=n.defaultExpandRoot,y=n.defaultExpandAll,h=n.defaultExpandParent,_=n.defaultExpandedKeys,w=n.defaultCheckedKeys,N=n.defaultSelectedKeys,I=n.onCheck,M=n.onExpand,S=n.onSelect,A=n.selectedKeys,L=n.setTreeNodeStyle,R=void 0===L?function(){return{}}:L,D=n.setTreeNodeClassName,V=void 0===D?function(){return""}:D,F=n.estimatedItemSize,B=void 0===F?28:F,K=n.addEntityNode,O=n.deleteEntityNode,U="entity-designer-tree",H=we()((0,b.c)({},"".concat(U),!0)),z="".concat(U,"-root"),W=B,q=P().useMemo((function(){return Qt(r,[])}),[r]),G=P().useMemo((function(){return function(e){var t=0;return f()(e).call(e,(function(e){t=e.level>t?e.level:t})),t}(q)}),[q]),J=function(e,t,n,r,a,o){var i=P().useMemo((function(){return o?e?ln(t||n):on(r,t||n,a,!0):{checkedKeys:[],halfCheckedKeys:[]}}),[r,t,n,e,a,o]),l=P().useState(i.checkedKeys),c=(0,k.c)(l,2),u=c[0],s=c[1],d=P().useState(i.halfCheckedKeys),f=(0,k.c)(d,2),v=f[0],p=f[1],g=i.checkedKeys,m=i.halfCheckedKeys;return(0,T.useEffect)((function(){s(g)}),[g]),(0,T.useEffect)((function(){p(m)}),[m]),[u,v,s,p]}(u,g,w,q,G,c),Q=(0,k.c)(J,4),Z=Q[0],Y=Q[1],X=Q[2],$=Q[3],ee=P().useState(v),te=(0,k.c)(ee,2),ne=te[0],re=te[1],ae=function(e,t){var n=(0,T.useState)(e||t),r=(0,k.c)(n,2),a=r[0],o=r[1];return(0,T.useEffect)((function(){o(e)}),[e]),[a,o]}(A,N),oe=(0,k.c)(ae,2),ie=oe[0],le=oe[1],ce=P().useRef(null),ue=P().useRef(null),se=P().useRef(null),de=t||se,fe=P().useRef(null),ve=P().useState(!0),pe=(0,k.c)(ve,2),ge=pe[0],me=pe[1],ye=gn(q,p,_,y,m,h,ne,ge),he=(0,k.c)(ye,1)[0],Ce=P().useMemo((function(){return tn(q,he)}),[q,he]),Ee=P().useMemo((function(){return Yt(Ce)}),[Ce]),be=(0,T.useCallback)((function(){}),[ce,de,a,W]),ke=P().useCallback((function(e,t,n){var r=t?nn(he,[e]):sn(he,[e]);M&&M(r,{node:n,expanded:t}),re(""),me(!1)}),[he,M]),_e=P().useCallback((function(e,t,n,r,a){var o=t?nn(Z,[e]):sn(Z,[e]),i=u?ln(o):function(e,t,n,r){for(var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0,i=arguments.length>6?arguments[6]:void 0,l=(0,E.c)(t),c=(0,E.c)(n),u=function(t){f()(e).call(e,(function(n){var r=Zt(l,n.key),u=Zt(c,n.key),s=n.hasChildNode&&en(e,l,n.pos,n.level,!1),d=n.hasChildNode&&$t(e,c,l,n.pos,n.level,a),f=null==d?void 0:d.checked,v=null==d?void 0:d.halfChecked;if(n.level===t){if(n.disabled)return;i?r||(un(n.pos,o)?(l.push(n.key),c=sn(c,[n.key])):cn(n.pos,o)&&(s?l.push(n.key):(f||v)&&c.push(n.key))):r?un(n.pos,o)?l=sn(l,[n.key]):cn(n.pos,o)&&(s||!f&&!v||c.push(n.key),l=sn(l,[n.key])):u&&(f||v||(c=sn(c,[n.key])))}}))},s=r;s>=0;s--)u(s);return{checkedKeys:At()(new(Pt())(l)),halfCheckedKeys:At()(new(Pt())(c))}}(Ce,o,Y,G,!1,a,t);I&&I(i.checkedKeys,{event:r,node:n,checked:t,halfCheckedKeys:i.halfCheckedKeys})}),[Z,Ce,Y,G,I,u,X,$]),xe=P().useCallback((function(e,t,n){var r=Zt(Z,n);S&&S([n],{node:t,event:e,checked:r})}),[S,le,Z]);return(0,T.useEffect)((function(){v?(le([v]),re(v)):le([])}),[v]),(0,T.useEffect)((function(){$(Y)}),[Y]),P().createElement("div",{className:H,ref:de,onScroll:be},P().createElement("div",{ref:ue,className:"".concat(U,"-plantom")}),P().createElement("div",{className:z,ref:ce},Ee&&j()(Ee).call(Ee,(function(e){var t,n,r,a,u,f=Zt(Z,e.key),v=function(e,t){return null==e?void 0:x()(e).call(e,t)}(Y,e.key);return e.nodeKey=e.key,e.onExpand=ke,e.onCheck=_e,e.onSelect=xe,e.checked=f,e.selected=function(e,t){return null==e?void 0:x()(e).call(e,t)}(ie,e.key),e.indeterminate=v,e.disabled=(t=s,n=e.disabled,_n()(n)?n:t),e.showIcon=o||!1,e.checkable=(r=c,a=e.checkable,_n()(a)?a:r),e.selectable=(u=e.selectable,!_n()(u)||u),e.icon=e.icon||l,e.switcherIcon=e.switcherIcon||i,e.estimatedItemSize=W,e.draggable=d,e.className=V((0,C.c)({},e)),e.style=R((0,C.c)({},e)),e.addEntityNode=K,e.deleteEntityNode=O,P().createElement(En,(0,C.c)({},e,{key:e.key,ref:fe}))}))))})),wn=xn;wn.displayName="Tree";var Nn=wn,In=(0,L.ErrorBoundaryWrap)((function(e){var t=e.kdesignerApi,n=e.listTreeData,r=e.invokeAction,a=t.meta,o=t.data,i=t.selection,l=(0,T.useContext)(L.GlobalConfigContext),u=l.showMessage,s=l.controlsAddedByForntEnd,d=i.setSelect,v=i.getSelection,p=i.addSelectChangeListener,g=(0,T.useState)([]),m=(0,k.c)(g,2),y=m[0],h=m[1],C=(0,T.useState)([]),E=(0,k.c)(C,2),b=E[0],_=E[1],x=(0,T.useState)([]),w=(0,k.c)(x,2),N=w[0],I=w[1],M=(0,T.useRef)([]);(0,T.useEffect)((function(){M.current=n}),[n]);var S=(0,T.useCallback)((function(e){var t=e.value,n=he(M.current,t[0]);I([n])}),[]);(0,T.useEffect)((function(){var e=v(),t=he(M.current,e[0]);I([t]);var n=p(S);return function(){n&&n()}}),[]);var R=(0,T.useMemo)((function(){return c()(n).call(n,(function(e){var t=e[ee];return ve(t)||ge(t)}))}),[n]),D=(0,T.useMemo)((function(){var e=function(e){return j()(e).call(e,(function(e,t){return Jt(Jt({},e),{},{key:null==e?void 0:e.Id,title:null==e?void 0:e.Name})}))}(R);return pn("Id","ParentId",e)}),[R]),V=(0,T.useCallback)((function(e){!function(e,t,n,r,a){var o=e.type,i=e.fieldName;if(o){var l=n.getActiveSelectedId(),c=t.findControl(l)[ee];if(a.canAdd(o,c)){var u={_Type_:o,ParentId:l,Name:i,Id:(0,L.createUUid)()};t.addControl((0,L.createAddAction)(u)).then((function(e){var t=e[0].value;n.setSelect(A()(t)?[t[0][$]]:[t[$]])}))}}else r((0,L.getLangMsg)("entityd.entityUtil.key0001"))}(e,o,i,u,a)}),[]),F=(0,T.useCallback)((function(){var e=o.getRootId(),t=v();t.length>0&&f()(t).call(t,(function(t){e!==t?rt(t,d,o,s,r,u):u((0,L.getLangMsg)("entityd.listTree.key0001"))}))}),[R]);return P().createElement("div",{style:{width:"300px",height:"100%",flexShrink:0}},P().createElement(Nn,{name:"Tree",treeData:D,expandedKeys:y,checkedKeys:b,selectedKeys:N,virtual:!1,onCheck:function(e){_(e)},onExpand:function(e){h(e)},onSelect:function(e){d(e)},defaultExpandAll:!0,addEntityNode:V,deleteEntityNode:F}))}),"ed-list-tree"),Mn=function(e){var t=e.style,n=e.showZoom,r=void 0===n||n,a=e.showFitView,o=void 0===a||a,i=e.showChangeDirection,l=void 0===i||i,c=e.showDisplayMode,u=void 0===c||c,s=e.fitViewParams,d=e.isHorizontal,f=e.showFullRelationship,v=e.onZoomIn,p=e.onZoomOut,g=e.onFitView,m=e.onChangeLayoutClick,y=e.onRelationalBtnClick,h=(0,U._s)(),C=h.zoomIn,E=h.zoomOut,b=h.fitView,k=(0,T.useContext)(V),_=k.getPrefixCls,x=k.prefixCls,w=_&&_(x,"controls"),N=(0,T.useCallback)((function(){null==C||C(),null==v||v()}),[C,v]),I=(0,T.useCallback)((function(){null==E||E(),null==p||p()}),[E,p]),M=(0,T.useCallback)((function(){null==b||b(s),null==g||g()}),[b,s,g]),S=(0,L.getLangMsg)("entityd.operationBtns.key0001"),A=(0,L.getLangMsg)("entityd.operationBtns.key0002"),R=(0,L.getLangMsg)("entityd.operationBtns.key0003"),F=d?(0,L.getLangMsg)("entityd.operationBtns.key0004"):(0,L.getLangMsg)("entityd.operationBtns.key0005"),B=f?(0,L.getLangMsg)("entityd.operationBtns.key0006"):(0,L.getLangMsg)("entityd.operationBtns.key0007");return P().createElement("div",{className:w+"-operation-box",style:t},r&&P().createElement(P().Fragment,null,P().createElement("div",{onClick:N,className:w+"-operation-box-button",title:S},P().createElement(D.Icon,{prefix:"designericon",type:"fangda",className:w+"-operation-box-button-icon"})),P().createElement("div",{onClick:I,className:w+"-operation-box-button",title:A},P().createElement(D.Icon,{prefix:"designericon",type:"suoxiao",className:w+"-operation-box-button-icon"}))),o&&P().createElement("div",{className:w+"-operation-box-button",onClick:M,title:R},P().createElement(D.Icon,{prefix:"designericon",type:"wanzhengshitu",className:w+"-operation-box-button-icon"})),l&&P().createElement("div",{className:w+"-operation-box-button",onClick:m,title:F},P().createElement(D.Icon,{prefix:"designericon",type:d?"zongxiangzhankai":"hengxiangzhankai",className:w+"-operation-box-button-icon"})),u&&P().createElement("div",{className:w+"-operation-box-button",onClick:y,title:B},P().createElement(D.Icon,{prefix:"designericon",type:f?"guanxishitu":"wanzhengguanxi",className:w+"-operation-box-button-icon"})))};Mn.displayName="OperationBtns";var Sn=(0,L.ErrorBoundaryWrap)((0,T.memo)(Mn),"ed-controls"),An=n(52360),Tn=n.n(An);function Pn(e,t){var n,r=null===(n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:document).querySelectorAll("["+e+'="'+t+'"]'))||void 0===n?void 0:n[0];r&&r.scrollIntoView({block:"nearest",behavior:"smooth"})}function Ln(e){var t,n=null===(t=document.querySelectorAll('[data-control-id="'+e+'"]'))||void 0===t?void 0:t[0],r=null==n?void 0:n.parentElement,a=K()(Array.prototype).call((null==r?void 0:r.children)||[]),o=Oe()(a).call(a,(function(t){return t.id===e}));if(r&&o>-1){var i,l,c=(null===(i=r.getBoundingClientRect())||void 0===i?void 0:i.height)||0,u=((null===(l=n.getBoundingClientRect())||void 0===l?void 0:l.height)||0)*o-r.scrollTop;(u>=c||u<0)&&(r.scrollTop=Me*o)}}function Rn(e){var t=e.results,n=void 0===t?[]:t,r=e.searchBoxRef,a=e.setShowResultPanel,o=e.keyWord,i=(0,T.useState)({left:-9999,top:-9999}),l=(0,k.c)(i,2),c=l[0],u=l[1],s=(0,T.useState)(-1),d=(0,k.c)(s,2),f=d[0],v=d[1],p=(0,T.useContext)(V),g=p.getPrefixCls,m=p.prefixCls,y=p.getKdesignerApi,h=g&&g(m,"controls"),C=y().selection,E=(0,T.useRef)();(0,T.useEffect)((function(){var e=r.current,t=null==e?void 0:e.getBoundingClientRect(),n=t.bottom,a=void 0===n?0:n,o=t.right;return u({left:(void 0===o?0:o)-230,top:a+10}),document.addEventListener("click",w),function(){document.removeEventListener("click",w)}}),[]),(0,T.useEffect)((function(){return document.addEventListener("keydown",I),function(){document.removeEventListener("keydown",I)}}),[f,n]),(0,T.useEffect)((function(){v(-1)}),[o]);var _,w=function(e){var t;x()(t=e.path).call(t,r.current)||a(!1)},N=ue()(n).call(n,(function(e,t){return M()(e).call(e,t.items)}),[]),I=function(e){var t,n=e.keyCode;switch(x()(t=[40,38,13]).call(t,n)&&e.preventDefault(),e.keyCode){case 40:var r,o=(f+1)%N.length;v(o),Pn("data-id",null===(r=N[o])||void 0===r?void 0:r.id,E.current);break;case 38:var i,l=-1===f?N.length-1:(f-1+N.length)%N.length;v(l),Pn("data-id",null===(i=N[l])||void 0===i?void 0:i.id,E.current);break;case 13:var c,u=null===(c=N[f])||void 0===c?void 0:c.id;C.setSelect(u),u&&a(!1),Ln(u)}},S=function(e){return j()(e).call(e,(function(e){var t,n=e.id,r=e.name,a=e.key,o=we()((0,b.c)((0,b.c)({},h+"-result-panel-group-field",!0),h+"-result-panel-group-field-preselected",(null===(t=N[f])||void 0===t?void 0:t.id)===n));return P().createElement("div",{key:n,className:o,onClick:function(e){return function(e){C.setSelect(e),Ln(e)}(n)},"data-id":n},P().createElement("div",{className:h+"-result-panel-group-field-name"},r),P().createElement("div",{className:h+"-result-panel-group-field-key"},a))}))};return P().createElement("div",{className:h+"-result-panel",style:c,ref:E},(_=n,j()(_).call(_,(function(e){var t=e.id,n=e.name,r=e.items;return P().createElement("div",{key:t,className:h+"-result-panel-group"},P().createElement("div",{className:h+"-result-panel-group-title"},n),P().createElement("div",null,S(r)))}))),0===n.length&&P().createElement("div",{className:h+"-result-panel-nodata"},(0,L.getLangMsg)("entityd.searchBox.key0002")))}var Dn=(0,L.ErrorBoundaryWrap)((function(e){var t=e.dataList,n=void 0===t?[]:t,r=(0,T.useState)(""),a=(0,k.c)(r,2),o=a[0],i=a[1],l=(0,T.useState)([]),c=(0,k.c)(l,2),u=c[0],s=c[1],d=(0,T.useState)(!1),v=(0,k.c)(d,2),p=v[0],g=v[1],m=(0,T.useContext)(V),y=m.getPrefixCls,h=m.prefixCls,C=m.getKdesignerApi,b=y&&y(h,"controls"),_=C().selection,w=(0,T.useRef)(null),N=(0,T.useRef)(null);return(0,T.useEffect)((function(){g(u.length>0||""!==o)}),[u]),P().createElement("div",{className:b+"-searchbox",ref:w},P().createElement("div",{className:b+"-searchbox-input-wrapper"},P().createElement(D.Icon,{prefix:"designericon",type:"sousuo",className:b+"-searchbox-search-icon"}),P().createElement("input",{ref:N,className:b+"-searchbox-input",placeholder:(0,L.getLangMsg)("entityd.searchBox.key0001"),value:o,onChange:function(e){var t=e.target.value;i(t);var r=_.getSelection(),a=(0,k.c)(r,1)[0],o=null==t?void 0:Tn()(t).call(t),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(""===t)return[];var r=[],a=[],o=[];f()(e).call(e,(function(e){var n=e._Type_,o=e.Key,i=e.Name;ve(n)||ge(n)?r.push(e):(x()(o).call(o,t)||x()(i).call(i,t))&&a.push(e)})),f()(a).call(a,(function(e){var t=e.ParentId,n=e.Key,a=e.Name,i={id:e.Id,key:n,name:a},l=Oe()(o).call(o,(function(e){return e.id===t}));if(l>-1)o[l].items.push(i);else{var c=z()(r).call(r,(function(e){return e.Id===t}));o.push({id:t,key:c.Key,name:c.Name,items:[i]})}}));var i,l=ye(e,n).Id,c=Oe()(o).call(o,(function(e){return e.id===l}));return c>0?M()(i=[o[c]]).call(i,(0,E.c)(K()(o).call(o,0,c)),(0,E.c)(K()(o).call(o,c+1))):o}(n,o,a);s(l)},onFocus:function(){g(u.length>0)}}),o&&P().createElement(D.Icon,{prefix:"designericon",type:"shurukuangquanqing",className:b+"-searchbox-clear-icon",onClick:function(){var e;i(""),s([]),null===(e=N.current)||void 0===e||e.focus()}})),p&&(0,gt.createPortal)(P().createElement(Rn,{results:u,searchBoxRef:w,setShowResultPanel:g,keyWord:o}),document.body))}),"ed-searchbox"),Vn={0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,TAB:9,ENTER:13,SHIFT:16,CTRL:17,CONTROL:17,ALT:18,ESC:27,ESCAPE:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,ARROWLEFT:37,UP:38,ARROWUP:38,RIGHT:39,ARROWRIGHT:39,DOWN:40,ARROWDOWN:40,DELETE:46,META:91,"*":106,"+":107,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"]":221};function Fn(e,t){var n=a()(e);if(i()){var r=i()(e);t&&(r=c()(r).call(r,(function(t){return s()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bn(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?f()(n=Fn(Object(a),!0)).call(n,(function(t){(0,b.c)(e,t,a[t])})):p()?m()(e,p()(a)):f()(r=Fn(Object(a))).call(r,(function(t){h()(e,t,s()(a,t))}))}return e}var Kn=function(e,t){var n=(0,T.useContext)(V),r=n.getKdesignerApi,a=n.invokeAction,o=(0,T.useMemo)((function(){return r()}),[]),i=o.data,l=o.selection,u=i.getRootId(),s=l.getSelection,d=l.setSelect,v=(0,T.useContext)(L.GlobalConfigContext),p=v.showMessage,g=v.controlsAddedByForntEnd,m=v.canAddCallback,y=$e(),h=y.setCopyContent,C=y.getCopyContent,E=(0,T.useContext)(L.DataFactoryContext).metaApi;(0,T.useEffect)((function(){var t=e.current;if(t){var n=function(e){if(e.target===t){e.stopPropagation();var n=s();switch(e.keyCode){case Vn.DELETE:if(n.length>0){var r=s();r.length>0&&f()(r).call(r,(function(e){u!==e?rt(e,d,i,g,a,p):p((0,L.getLangMsg)("entityd.useKeyBoardEvent.key0001"))}))}break;case Vn.C:if(Ge(e)){null==e||e.stopPropagation();var o=s()||[];if(x()(o).call(o,u))p((0,L.getLangMsg)("entityd.useKeyBoardEvent.key0003"));else{var v=ot(o,i);h(v)}}break;case Vn.V:if(Ge(e)){var y=C();if(A()(y)){var b=[],k=-1,_=c()(y).call(y,(function(e){var t=e[ee],n=E.getControlMeta(t).IsContainer;return void 0!==n&&n}));if(_.length>0){var w=nt(_[0],i,l,E,m,false);if(!1===w)p((0,L.getLangMsg)("entityd.useKeyBoardEvent.key0002"));else{var N=w.newControl,I=w.index;b.push(N),k=I;var M=N.Id;M&&f()(y).call(y,(function(e){var t=e.Key,n=e._Type_;if((e[ne]||u)===_[0][$]&&!x()(Y).call(Y,n)){var r=Bn(Bn({},e),{},{ParentId:M,Id:(0,L.createUUid)(),Key:t+"1",FieldName:t+"1",Inherit:!1});b.push(r)}}))}}else f()(y).call(y,(function(e){var t=nt(e,i,l,E,m,false);if(!1===t)p((0,L.getLangMsg)("entityd.useKeyBoardEvent.key0002"));else{var n=t.newControl,r=t.index;b.push(n),k=r}}));var S={index:k};i.addControl((0,L.createPasteAction)(b,S))}}break;case Vn.Z:var T=i.canUndo();Ge(e)&&T&&i.undo();break;case Vn.Y:var P=i.canRedo();Ge(e)&&P&&i.redo()}}};return t.addEventListener("keydown",n),function(){t.removeEventListener("keydown",n)}}}),[])};function On(e,t){var n=a()(e);if(i()){var r=i()(e);t&&(r=c()(r).call(r,(function(t){return s()(e,t).enumerable}))),n.push.apply(n,r)}return n}function jn(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?f()(n=On(Object(a),!0)).call(n,(function(t){(0,b.c)(e,t,a[t])})):p()?m()(e,p()(a)):f()(r=On(Object(a))).call(r,(function(t){h()(e,t,s()(a,t))}))}return e}var Un=(0,T.memo)((function(e,t){var n=e.data,r=(0,T.useState)([]),a=(0,k.c)(r,2),o=a[0],i=a[1],l=(0,T.useState)("TB"),c=(0,k.c)(l,2),u=c[0],s=c[1],d=(0,T.useState)(!0),v=(0,k.c)(d,2),p=v[0],g=v[1],m=(0,T.useState)(!1),y=(0,k.c)(m,2),h=y[0],E=y[1],b=(0,T.useContext)(V),_=b.getKdesignerApi,x=b.userConfig,w=b.onUserConfigChange,N=b.getPrefixCls,I=b.prefixCls,M=N&&N(I,"card-view"),S=(0,T.useState)({showKey:x.showKey,showType:x.showType,showFullRelationship:x.showFullRelationship}),A=(0,k.c)(S,2),R=A[0],D=A[1],B=(0,T.useState)({x:0,y:0}),O=(0,k.c)(B,2),H=O[0],z=O[1],W=(0,T.useRef)(),q=(0,T.useRef)([]),G=(0,T.useRef)(!1),J=_(),Q=J.meta,Z=J.data,Y=J.selection,X=(0,T.useRef)(null);Kn(X),(0,T.useEffect)((function(){q.current=je(n,{getControlMeta:Q.getControlMeta});var e=Y.addSelectChangeListener(ee);return function(){e&&e()}}),[]);var $=(0,T.useCallback)((function(e){var t=e.value;q.current=je(t,{getControlMeta:Q.getControlMeta}),G.current=!1,te(u)}),[u,R]);(0,T.useEffect)((function(){G.current=!0,te(u);var e=Z.addDataChangeListener($);return function(){e()}}),[u,R]),(0,T.useEffect)((function(){if(o.length>0&&G.current){var e,t,n=null===(e=W.current.toObject())||void 0===e?void 0:e.zoom;null===(t=W.current)||void 0===t||t.fitView({minZoom:n,maxZoom:n})}}),[o]),(0,T.useEffect)((function(){te(u)}),[R]);var ee=function(e){var t=e.value[0];void 0!==t&&(void 0!==Z.findControl(t).FieldName&&Ln(t))},te=function(e){var t,n,r;s(e);var a="LR"===e,o=new(Be().graphlib.Graph);o.setDefaultEdgeLabel((function(){return{}})),o.setGraph({rankdir:e,nodesep:30,ranksep:50});var l=R.showFullRelationship;f()(t=q.current).call(t,(function(e){(0,U.yW)(e)?(e.data.size=l?{width:200,height:36}:vt(e,R),o.setNode(e.id,e.data.size)):o.setEdge(e.source,e.target)})),Be().layout(o);var c=K()(n=q.current).call(n,0,(q.current.length+1)/2),u=j()(r=q.current).call(r,(function(e){if((0,U.yW)(e)){var t=o.node(e.id);e.targetPosition=a?U.JC.Left:U.JC.Top,e.sourcePosition=a?U.JC.Right:U.JC.Bottom,e.position=pt(c,t,e.data.level,a)}return e}));i(u)},ne=function(e){e.preventDefault(),e.stopPropagation(),z({x:e.clientX,y:e.clientY}),E(!0)},re=function(e,t){var n;f()(n=q.current).call(n,(function(n){if(n.id===e){var r=[e,{showMore:t}];Z.batchUpdateControlPropertyValues((0,L.createUpdateAction)([r]))}})),G.current=!1},ae={style:{background:"#ECEEF2"},zoomOnScroll:!1,preventScrolling:!1,nodesConnectable:!1,nodesDraggable:!1,panOnScrollMode:U.WY.Free,defaultZoom:1,minZoom:1/1.2/1.2,maxZoom:1.44,zoomOnDoubleClick:!1},oe="LR"===u,ie=R.showFullRelationship,le=(0,T.useMemo)((function(){return{layoutDirection:u,nodeContentVisibleConfig:R,getData:function(){return n},onClickShowMoreBtn:re}}),[u,R]);return P().createElement(F.Provider,{value:le},P().createElement(ft,null),P().createElement(U.Mt,null,P().createElement(U.cp,(0,C.c)({elements:o,nodeTypes:{entityNode:Ve},onLoad:function(e){G.current=!0,te("TB"),W.current=e},panOnScroll:p,onNodeMouseEnter:function(){g(!1)},onNodeMouseLeave:function(){g(!0)},onPaneContextMenu:ne,onNodeContextMenu:ne,ref:X,tabIndex:-1},ae),P().createElement(Sn,{isHorizontal:oe,showFullRelationship:ie,onChangeLayoutClick:function(){te("LR"===u?"TB":"LR")},onRelationalBtnClick:function(){D((function(e){var t=!e.showFullRelationship;return w({showFullRelationship:t}),jn(jn({},e),{},{showFullRelationship:t})}))}}),h&&P().createElement(yt,{config:R,mousePosition:H,onContextItemClick:function(e,t){D((function(n){return jn(jn({},n),{},{showType:e,showKey:t})})),w({showKey:t,showType:e})},closeContextMenu:function(){E(!1)}}),P().createElement("div",{className:M+"-searchbox-container"},P().createElement(Dn,{dataList:null==n?void 0:n.Items})))))})),Hn=Un,zn=(0,T.memo)((function(e,t){var n=e.data,r=(0,T.useState)([]),a=(0,k.c)(r,2),o=a[0],i=a[1],l=(0,T.useContext)(V),c=l.getKdesignerApi,u=(l.userConfig,l.onUserConfigChange,l.invokeAction),s=c(),d=s.data,f=s.selection,v=s.meta,p=(f.getActiveSelectedId,f.getSelection),g=(0,T.useCallback)((function(e){var t=e.value;i(t)}),[]);(0,T.useEffect)((function(){var e=p();i(e);var t=f.addSelectChangeListener(g);return function(){t()}}),[]);return P().createElement("div",{style:{height:"100%",display:"flex"}},P().createElement(In,{kdesignerApi:s,listTreeData:n.Items,invokeAction:u}),P().createElement(bt,{kdesignerApi:s,tableData:function(){var e,t=d.getRootId(),r=o[0]||t,a=d.findControl(r)||{},i=a._Type_,l=v.getControlMeta(i).IsContainer;if(!(void 0!==l&&l)){var c=a[ne]||t;r=c}var u=je(n,{getControlMeta:v.getControlMeta});return(null===(e=z()(u).call(u,(function(e){return e.id===r})).data)||void 0===e?void 0:e.items)||[]}(),allselectedArr:o}))})),Wn=zn,qn=(0,T.memo)((function(e,t){var n=e.data,r=void 0===n?{}:n,a=(0,T.useState)(r),o=(0,k.c)(a,2),i=o[0],l=o[1],c=(0,T.useContext)(V),u=c.getKdesignerApi,s=c.viewKey,d=u(),f=d.data,v=(0,T.useCallback)((function(e){var t=e.value;l(t)}),[]);return(0,T.useEffect)((function(){(0,d.selection.setSelect)(f.getRootId());var e=f.addDataChangeListener(v);return function(){e()}}),[]),P().createElement("div",{style:{height:"100%"}},0===s&&P().createElement(Hn,{data:i}),1===s&&P().createElement(Wn,{data:i}))}));qn.displayName="main-view";var Gn=qn,Jn=(0,T.memo)((function(e,t){e.data,e.meta,e.onData;return P().createElement("div",null,"right-view")}));Jn.tabKey="rightView",Jn.displayName="right-view";var Qn=Jn,Zn=(0,T.memo)((function(e,t){return P().createElement("div",null,"left-view")}));Zn.tabKey="leftView",Zn.displayName="left-view";var Yn=Zn,Xn={BizappId:"bizappId",Name:"name",Id:"id",appNum:"formId",Key:"key",DevType:"devType",MasterId:"masterId",ExtElements:"extElements"};var $n=function(e){return{getEntityRootId:function(){return e.data.getRootId()},getEntityFieldInfo:function(t){return e.data.findControl(t)},getEntityPropertyValue:function(t,n){var r=e.data.findControl(t);if(r){var a=r[n];return(0,ht.isUndefined)(a)?e.meta.getControlPropertyDefaultValue(r._Type_,n):a}},getFormFieldInfo:function(t){return e.data.findControl(t)},getFieldInfo:function(t){return e.data.findControl(t)},getPropertyValue:function(t,n){return e.data.getPropertyValue(t,n)}}},er=n(58496);var tr=function(e,t,n){return function(t,r){var a=e(),o=r.Hide;if("formmeta"===n&&"FieldId"===r.Id)return!1;if(o&&"object"===(0,er.c)(o)){var i=o.Types,l=o.FieldTypes,c=(o.ParentTypes,o.Hide);if(i&&l){var u,s=t.ParentId||t.Id,d=a.getEntityFieldInfo(s)[ee],f=x()(u=["EntryEntity","SubEntryEntity","TreeEntryEntity"]).call(u,d)?["EntryFieldAp","CardEntryFieldAp"]:["FieldAp"],v=a.getEntityFieldInfo(t.Id)[ee];return null==c||!0===c?fe()(i).call(i,(function(e){return x()(f).call(f,e)}))&&x()(l).call(l,v):!(fe()(i).call(i,(function(e){return x()(f).call(f,e)}))&&x()(l).call(l,v))}if(l){var p=t[ee];return null==c||!0===c?(0,ht.includes)(l,p):!(0,ht.includes)(l,p)}return c}return!1}},nr=n(2992),rr=n.n(nr),ar=["type","value"],or=["type","value"];function ir(e,t){var n=a()(e);if(i()){var r=i()(e);t&&(r=c()(r).call(r,(function(t){return s()(e,t).enumerable}))),n.push.apply(n,r)}return n}function lr(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?f()(n=ir(Object(a),!0)).call(n,(function(t){(0,b.c)(e,t,a[t])})):p()?m()(e,p()(a)):f()(r=ir(Object(a))).call(r,(function(t){h()(e,t,s()(a,t))}))}return e}var cr=function(e){return e?A()(e)?e:[e]:[]},ur=function(e,t,n){var r=e.globalConfig,a=e.dataContext,o=(e.selectionContext,e.action),i=e.dataFactory,l=(e.modelFactory,e.metaReader),u=o.type,s=o.value,d=(0,kt.c)(o,ar),f=[],v=s[ee],p=l.getControlMeta(v);if(p.IsUnique&&!Ce(v,s[ne],a)){var g=a.findControl(s[ne]),m=r.showMessage,y=g[te],h=p[te];return n("".concat((0,L.getLangMsg)({key:"entityd.preAddHandle.key0001",variables:{parentControlName:y,controlName:h}}))),m("".concat((0,L.getLangMsg)({key:"entityd.preAddHandle.key0001",variables:{parentControlName:y,controlName:h}})))}s.Key||r.controlsAddedByForntEnd.push(s.Id);var C=cr(s),E=j()(C).call(C,(function(e){var t,n=lr({},e),o=n,l=o.Id,u=o.ParentId,s=o._Type_,d=o.Name,v=(null===(t=(0,r.designerContextValue.getDataRef)().entitymeta)||void 0===t?void 0:t[re])||[],p=z()(v).call(v,(function(e){return e[$]===u}));if("RadioField"===s){var g=a.findControl(u)||p,m=c()(v).call(v,(function(e){return e[ne]===g[$]})),y=z()(m).call(m,(function(e){return"RadioGroupField"===e[ee]})),h=c()(v).call(v,(function(e){return"RadioField"===e[ee]})),C=h.length;if(y){var E;n=lr(lr({},n),{},{Group:y[$],Items:"".concat(C+1)});var b=y[re]||[],k=M()(b).call(b,[]),_={Caption:M()(E="".concat(d)).call(E,0===C?"":C),Value:"".concat(C+1),_Type_:"ComboItem"};k.push(_);var w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;return(0,L.createUpdateAction)(lr({Id:e},t))}(y[$],{Items:k}),N=w.type,I=w.value,S={type:N,value:[[I[$],{Items:I[re]}]]};f.push(S)}else{var A,T=[{Caption:M()(A="".concat(d)).call(A,0===C?"":C),Value:"".concat(C+1),_Type_:"ComboItem"}],P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l,n=arguments.length>2?arguments[2]:void 0;return(0,L.createAddAction)(i({type:e,parentId:t,transferData:n}))}("RadioGroupField",g[$],{Items:T}),R=P.type,D=P.value,V=(0,kt.c)(P,or);if(f.push(lr({type:R,value:D},V)),n=lr(lr({},n),{},{Group:D[$],Items:"".concat(C+1)}),D.Id)r.controlsAddedByForntEnd.push(D.Id)}}else x()(Q).call(Q,s)?n.ParentEntryId=e.ParentId:"PrintCountField"===s&&(n.RecordModel="print");return n})),b=[lr({type:u,value:E},d)];return M()(b).call(b,f)},sr=function(e,t,n){var r=e.globalConfig,a=e.dataContext,o=(e.selectionContext,e.action),i=(e.dataFactory,e.modelFactory,e.metaReader),l=o.value,c=j()(l).call(l,(function(e){var t=e[ee],o=i.getControlMeta(t);if(o.IsUnique&&!Ce(t,e[ne],a)){var l=a.findControl(e[ne]),c=r.showMessage,u=l[te],s=o[te];return n("".concat((0,L.getLangMsg)({key:"entityd.prePasteHandle.key0001",variables:{parentControlName:u,controlName:s}}))),c("".concat((0,L.getLangMsg)({key:"entityd.prePasteHandle.key0001",variables:{parentControlName:u,controlName:s}})))}e.Key||r.controlsAddedByForntEnd.push(e.Id);return ge(t)&&e.TableName&&(e.TableName=""),e}));return o.value=c,[o]},dr=["type","value"];function fr(e,t){var n=a()(e);if(i()){var r=i()(e);t&&(r=c()(r).call(r,(function(t){return s()(e,t).enumerable}))),n.push.apply(n,r)}return n}function vr(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?f()(n=fr(Object(a),!0)).call(n,(function(t){(0,b.c)(e,t,a[t])})):p()?m()(e,p()(a)):f()(r=fr(Object(a))).call(r,(function(t){h()(e,t,s()(a,t))}))}return e}var pr=function(e){return e?A()(e)?e:[e]:[]},gr=function(e,t,n){var r=e.globalConfig,a=e.dataContext,o=(e.selectionContext,e.action),i=(e.dataFactory,e.modelFactory,e.metaReader,o.type),l=o.value,u=(0,kt.c)(o,dr),s=[],d=pr(l);f()(d).call(d,(function(e){var t=a.findControl(e)[ee],o=a.getAllSiblings(e),i=c()(o).call(o,(function(e){return"RadioField"===e[ee]}));if("RadioGroupField"===t){if(z()(i).call(i,(function(t){return t.Group===e}))){var l=r.showMessage;return n((0,L.getLangMsg)("entityd.preDeleteHandle.key0001")),l((0,L.getLangMsg)("entityd.preDeleteHandle.key0001"))}s.push(e)}else s.push(e)}));var v=[vr({type:i,value:s},u)];return M()(v).call(v,[])},mr=n(48560),yr=n.n(mr);function hr(e,t){var n=void 0!==Ot()&&Ut()(e)||e["@@iterator"];if(!n){if(A()(e)||(n=function(e,t){var n;if(!e)return;if("string"==typeof e)return Cr(e,t);var r=K()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return At()(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Cr(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw o}}}}function Cr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Er=function(e,t,n){var r,a=hr(e);try{for(a.s();!(r=a.n()).done;){var o=r.value;if(yr()(o[t],n))return!0}}catch(e){a.e(e)}finally{a.f()}return!1},br=function(e,t,n,r){var o,i=e.globalConfig,l=e.dataContext,u=(e.selectionContext,e.action),s=(e.dataFactory,e.modelFactory,e.metaReader,u.type),d=u.value,v=[],p=i.showMessage;f()(d).call(d,(function(e){var t=null==e?void 0:e[0],n=(null==e?void 0:e[1])||{},r=a()(n)[0],o=n[r],i=l.findControl(t);if(i){var u=i._Type_,s=i.Name,d=i.Items;if("RadioField"===u){var g=i.Group,m=l.findControl(g);if(m){var y=m[re]||[],h=[];if(yr()(r,"Items")){var E=c()(y).call(y,(function(e){return e.Caption===s}))[0];if(Er(y,"Value",o)&&E.Value!==o)throw p("".concat((0,L.getLangMsg)({key:"entityd.preUpdateHandle.key0001",variables:{propVal:o}}))),{message:"".concat((0,L.getLangMsg)({key:"entityd.preUpdateHandle.key0001",variables:{propVal:o}})),type:"warning"};if(Er(y,"Caption",s)){var b=[];f()(y).call(y,(function(e){if(yr()(e.Caption,s)){var t=(0,C.c)({},e);t.Value=o,b.push(t)}else b.push(e)})),h=[g,{Items:b}]}else{var k=M()(y).call(y,[]);k.push({Caption:s,Value:o,_Type_:"ComboItem"}),h=[g,{Items:k}]}}else if(yr()(r,"Name")){if(Er(y,"Caption",o))throw p("".concat((0,L.getLangMsg)({key:"entityd.preUpdateHandle.key0002",variables:{propVal:o}}))),{message:"".concat((0,L.getLangMsg)({key:"entityd.preUpdateHandle.key0002",variables:{propVal:o}})),type:"warning"};if(Er(y,"Value",d)){var _=[];f()(y).call(y,(function(e){if(yr()(e.Value,d)){var t=(0,C.c)({},e);t.Caption=o,_.push(t)}else _.push(e)})),h=[g,{Items:_}]}else{var x=M()(y).call(y,[]);x.push({Caption:s,Value:o,_Type_:"ComboItem"}),h=[g,{Items:x}]}}else if(yr()(r,"Group")){var w=i.Items,N=c()(y).call(y,(function(e){return!yr()(e.Value,w)})),I=l.findControl(o);if(I){var S=I[re]||[];if(Er(S,"Value",w))throw p("".concat((0,L.getLangMsg)({key:"entityd.preUpdateHandle.key0001",variables:{propVal:o}}))),{message:"".concat((0,L.getLangMsg)({key:"entityd.preUpdateHandle.key0001",variables:{propVal:o}})),type:"warning"};var A=M()(S).call(S,[]);A.push({Caption:s,Value:w,_Type_:"ComboItem"});var T=[o,{Items:A}];v.push(T),h=[g,{Items:N}]}}v.push(h)}}}}));var g=d;return M()(o=[{type:s,value:g}]).call(o,[{type:s,value:v}])},kr=["type","value"],_r=(0,b.c)((0,b.c)((0,b.c)((0,b.c)({},L.ActionType.ADD,ur),L.ActionType.PASTE,sr),L.ActionType.UPDATE,br),L.ActionType.DELETE,gr),xr=function(e,t){var n=e.action,r=e.dataContext,a=e.selectionContext,o=e.globalConfig,i=e.dataFactory,l=e.modelFactory,c=e.metaReader,u=e.success,s=e.fail,d=(o.dataRef,o.keywordMapping),f=function(e){var n=[],a=t.getKdesignerApi,o=r.getData().Items,i=new(Pt())(j()(o).call(o,(function(e){return e[d.key]}))),l=t.getDataRef().isv;rr().all(j()(e).call(e,(function(e){var t=e.type,n=e.value,r=(0,kt.c)(e,kr),o=a();if(t===L.ActionType.ADD||t===L.ActionType.PASTE){var u=A()(n)?n:[n],s=rr().all(j()(u).call(u,(function(e){var n,a,u=e.FieldType||e._Type_||"";if(e[d.key]=e[d.key]||u.toLowerCase(),r.isInstrucAdd)e[d.key]=e[d.key].toLowerCase();else if(t===L.ActionType.ADD){var s,f=o.data.findControlByCondition((function(t){return e[d.type]===t[d.type]})).length;e[d.name]=M()(s="".concat(e[d.name])).call(s,0===f?"":f)}if(l){"kingdee"===l||/^[0-9]+[\w]*/i.test(l)||(0,ht.startsWith)(e[d.key],"".concat(l,"_"))||(e[d.key]="".concat(l,"_")+e[d.key])}var v=c.getControlMeta(e[d.type]),p=null==v?void 0:v.IsContainer,g=null==v?void 0:fe()(n=ue()(a=v.Properties).call(a,(function(e,t){return M()(e).call(e,t.Nodes)}),[])).call(n,(function(e){return"FieldName"===e.Id}));if(!p&&g){var m,y=0,h="f_";l&&"kingdee"!==l&&(h="fk_");var C=e[d.key],E=C;r.isInstrucAdd||(E=C||e[d.type]);for(var b=E=K()(E).call(E,0,25);i.has(E);){var k,_=25-"".concat(y+=1).length;E=M()(k="".concat(K()(b).call(b,0,_))).call(k,y)}i.add(E),e[d.fieldName]=M()(m="".concat(h)).call(m,E)}return e})));return s.then((function(t){return e.value=t,e}))}return rr().resolve(e)}))).then((function(e){return u(M()(e).call(e,n))}))},v=[],p=n.type,g=_r[p];if(g){var m=g({globalConfig:o,dataContext:r,selectionContext:a,action:n,dataFactory:i,modelFactory:l,metaReader:c},f,s);m&&v.push.apply(v,(0,E.c)(m))}else v.push(n);v.length&&f(v)},wr=function(e){var t=(0,T.useContext)(V),n=t.getDataRef,r=t.getModel,a=t.getKdesignerApi;return(0,L.createEComboEditor)({getDataRef:n,getModel:r,getKdesignerApi:a,metaType:"entitymeta"})(e)},Nr=function(e){var t=(0,T.useContext)(L.GlobalConfigContext).keywordMapping,n=(0,T.useContext)(V),r=n.getDataRef,a=n.getModel,o=n.getKdesignerApi;return(0,L.createRefComboEditor)({getDataRef:r,getModel:a,getKdesignerApi:o,keywordMapping:t,metaType:"entitymeta"})(e)},Ir=function(e){var t=(0,T.useContext)(L.GlobalConfigContext).keywordMapping,n=(0,T.useContext)(V),r=n.getDataRef,a=n.getModel,o=n.getKdesignerApi;return(0,L.createRefComboEditor)({getDataRef:r,getModel:a,getKdesignerApi:o,keywordMapping:t,multiple:!0})(e)},Mr=function(e){var t=(0,T.useContext)(V).getKdesignerApi;return(0,L.createInputEditor)({editorComponent:D.Input,getKdesignerApi:t})(e)},Sr=function(e){return(0,L.createSelectEditor)({editorComponent:D.Select})(e)},Ar=(n(77856),n(41256)),Tr=n.n(Ar),Pr=n(3460),Lr=n(27688),Rr={locale:"zh-CN","global.selectholder":"请选择","global.placeholder":"请输入...","global.cancel":"取消","global.confirm":"确定"};function Dr(e,t){var n=void 0!==Ot()&&Ut()(e)||e["@@iterator"];if(!n){if(A()(e)||(n=function(e,t){var n;if(!e)return;if("string"==typeof e)return Vr(e,t);var r=K()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return At()(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vr(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw o}}}}function Vr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Fr=function(){function e(t,n){(0,Pr.c)(this,e),(0,b.c)(this,"localesData",void 0),(0,b.c)(this,"locale",void 0),this.locale=n||Rr.locale,this.localesData=t}return(0,Lr.c)(e,[{key:"setLocalesData",value:function(e,t){var n=t||this.localesData[e];if(n)return this.locale=e,this.localesData[e]=n,t}},{key:"getLocalData",value:function(){return this.localesData[this.locale]}},{key:"getLocal",value:function(){return this.locale}},{key:"getLocalesData",value:function(){return this.localesData}}]),e}(),Br=new Fr((0,b.c)({},Rr.locale,Rr)),Kr=function(e,t,n){var r,a=Br.getLocalData();return function(e,t){var n,r=/{[\w\W]*?}/g,a=e.match(r)||[],o=function(e){return"object"===(0,er.c)(e)||"function"==typeof e},i=function(e){var t=e.length;return K()(e).call(e,1,t-1)},l=[],c=[],u=Dr(a);try{for(u.s();!(n=u.n()).done;){var s=i(n.value),d=t[s];o(d)?c.push({k:s,v:d}):l.push({k:s,v:d})}}catch(e){u.e(e)}finally{u.f()}e=function(e,t){return f()(t).call(t,(function(t){var n=t.k,r=t.v,a=new RegExp("{"+n+"}","g");e=e.replace(a,r)})),e}(e,l);var v=[];c.length>0&&(v=function(e,t){var n=function(e){var t,n=[],r={t:0,v:""},a=e.length;return f()(t=e.split("")).call(t,(function(e,t){"{"===e?(n.push(r),r={t:1,v:""}):"}"===e?(n.push(r),r={t:0,v:""}):r.v=r.v+e,t===a-1&&n.push(r)})),n},r=[],a=n(e);return f()(a).call(a,(function(e,n){var a=e.t,o=e.v;0===a&&""!==o?r.push(P().createElement("span",{key:n},o)):1===a&&r.push(P().cloneElement(t[o],{key:n}))})),r}(e,t));return c.length>0?v:e}(a[M()(r="".concat(e,".")).call(r,t)]||a["global.".concat(t)]||"",n)};var Or={getPrefixCls:function(e,t,n){var r;return n||(e=e||"kdesigner",t?M()(r="".concat(e,"-")).call(r,t):e)},prefixCls:"kdesigner",locale:{getLangMsg:Kr,getCompLangMsg:function(e,t,n){var r=e.componentName,a=e.labels,o=e.labelParams;if(o=o||{},n=n||Rr,!(a=a||[]).length)for(var i in n){var l=i.split(".");r===l[0]&&l[1]&&a.push(l[1])}var c={};return f()(a).call(a,(function(e){c[e]=t&&"function"==typeof t?t(r,e,o[e]||{}):Kr(r,e,o[e]||{})})),c}}},jr=Or,Ur=(0,T.createContext)(jr),Hr={Kdesigner:{},Icon:{prefix:"designericon"}},zr=P().createContext({}),Wr=n(55640),qr=n.n(Wr),Gr=n(6908),Jr=n.n(Gr),Qr=P().createContext({}),Zr=P().createContext({}),Yr="object"==("undefined"==typeof self?"undefined":(0,er.c)(self))&&self.self===self&&self||"object"==(void 0===n.g?"undefined":(0,er.c)(n.g))&&n.g.global===n.g&&n.g||{};function Xr(){var e;return Yr.allowkdesignerlog&&(Yr.__kdesigner_debug||!x()(e=["production","prodBuild"]).call(e,"production"))}Yr.allowkdesignerlog=!1,Yr.trace=!1;var $r={log:function(){var e;Xr()&&((e=console).log.apply(e,arguments),Yr.trace)},warn:function(){var e;Xr()&&((e=console).warn.apply(e,arguments),Yr.trace)},error:function(){var e;(e=console).error.apply(e,arguments),Yr.trace},time:function(e){var t,n;Xr()&&(null===(t=(n=console).time)||void 0===t||t.call(n,e))},timeEnd:function(e){var t,n;Xr()&&(null===(t=(n=console).timeEnd)||void 0===t||t.call(n,e))},table:function(e){var t,n;Xr()&&(null===(t=(n=console).table)||void 0===t||t.call(n,e),Yr.trace)},lazyLog:function(e){Xr()&&(e(console),Yr.trace)}};n(55648),n(28555);var ea=n(7224),ta=n.n(ea);n(1508);n(82504);function na(e,t){var n=void 0!==Ot()&&Ut()(e)||e["@@iterator"];if(!n){if(A()(e)||(n=function(e,t){var n;if(!e)return;if("string"==typeof e)return ra(e,t);var r=K()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return At()(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ra(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){throw e})),f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){l=!0,o=e})),f:function(){try{i||null==n.return||n.return()}finally{if(l)throw o}}}}function ra(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function aa(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(0,T.useEffect)((function(){var r=function(n){var r,a=na(e);try{for(a.s();!(r=a.n()).done;){var o,i=r.value;if(null==i||!i.current||null!=i&&null!==(o=i.current)&&void 0!==o&&o.contains(n.target))return}}catch(e){a.e(e)}finally{a.f()}t(n)};return document.addEventListener("mousedown",r,n),document.addEventListener("touchstart",r),function(){document.removeEventListener("mousedown",r,n),document.removeEventListener("touchstart",r)}}),[e,t])}function oa(e){var t=(0,T.useRef)(e);return(0,T.useEffect)((function(){t.current=e}),[e]),t.current}var ia,la;n(46595);function ca(){return"Win32"==window.navigator.platform||"Windows"==window.navigator.platform}function ua(){return"Mac68K"==window.navigator.platform||"MacPPC"==window.navigator.platform||"Macintosh"==window.navigator.platform||"MacIntel"==window.navigator.platform}ua()||("X11"!=window.navigator.platform||ca()||ua())&&(function(){var e;return He()(e=String(window.navigator.platform)).call(e,"Linux")>-1}()||ca());navigator.userAgent.match(/Electron\/(\d+)/),navigator.userAgent.match(/Trident\/(\d+)/),navigator.userAgent.match(/Firefox\/(\d+)/),navigator.userAgent.match(/Chrome\/(\d+)/),navigator.userAgent.match(/Edge\/(\d+)/),x()(ia=window.location.hash).call(ia,"&preview=true"),x()(la=window.location.hash).call(la,"&noLoadYZJ=true");var sa=n(85640),da=n(85344),fa=n.n(da);function va(e,t){var n=void 0!==Ot()&&Ut()(e)||e["@@iterator"];if(!n){if(A()(e)||(n=function(e,t){var n;if(!e)return;if("string"==typeof e)return pa(e,t);var r=K()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return At()(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pa(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw o}}}}function pa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ga=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},ma=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(0,Pr.c)(this,e),this.events={},this.eventsLength=0,this._maxListeners=e.defaultMaxListeners,this._maxEvents=e.defaultMaxEvents,this.isOnOfflineStack=t,this.offlineStack={}}var t,n,r,o,i;return(0,Lr.c)(e,[{key:"addEventListener",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.on.apply(this,t)}},{key:"addEventListenerAsync",value:(i=(0,sa.c)(fa().mark((function e(){var t,n,r,a=arguments;return fa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=a.length,n=new Array(t),r=0;r<t;r++)n[r]=a[r];return e.next=3,this.onAsync.apply(this,n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"setMaxListeners",value:function(e){e="number"==typeof(e=e!=e?1:e)?e:1,this._maxListeners=e||1}},{key:"setMaxEvents",value:function(e){e="number"==typeof(e=e!=e?1:e)?e:1,this._maxEvents=e||1}},{key:"emit",value:function(e){for(var t=this.events[e],n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];if(t&&t.length>0){var o,i=va(t=K()(t).call(t,0));try{for(i.s();!(o=i.n()).done;){var l=o.value;"function"==typeof l&&l.apply(this,r)}}catch(e){i.e(e)}finally{i.f()}return t=[],!0}return this.isOnOfflineStack&&(this.offlineStack[e]=this.offlineStack[e]||[],this.offlineStack[e].push(r)),!1}},{key:"emitAsync",value:(o=(0,sa.c)(fa().mark((function e(t){var n,r,a,o,i,l,c,u=arguments;return fa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=this.events[t],r=u.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=u[o];if(!(n&&n.length>0)){e.next=26;break}n=K()(n).call(n,0),i=va(n),e.prev=5,i.s();case 7:if((l=i.n()).done){e.next=14;break}if("function"!=typeof(c=l.value)){e.next=12;break}return e.next=12,c.apply(this,a);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),i.e(e.t0);case 19:return e.prev=19,i.f(),e.finish(19);case 22:return n=[],e.abrupt("return",!0);case 26:return this.isOnOfflineStack&&(this.offlineStack[t]=this.offlineStack[t]||[],this.offlineStack[t].push(a)),e.abrupt("return",!1);case 28:case"end":return e.stop()}}),e,this,[[5,16,19,22]])}))),function(e){return o.apply(this,arguments)})},{key:"eventNames",value:function(){for(var e=[],t=0,n=a()(this.events);t<n.length;t++){var r=n[t];e.push(r)}return e}},{key:"listenerCount",value:function(e){return ga(this.events,e)?this.events[e].length:0}},{key:"listeners",value:function(e){var t;return ga(this.events,e)?K()(t=this.events[e]).call(t,0):[]}},{key:"off",value:function(e,t){if(!ga(this.events,e))return!1;if("function"==typeof t){var n,r,a=He()(n=this.events[e]).call(n,t);return-1!==a&&(Rt()(r=this.events[e]).call(r,a,1),!0)}return void 0===t?(this.events[e]=[],delete this.events[e],this.eventsLength--,!0):void 0}},{key:"_realOn",value:function(e,t){if(e=String(e),ga(this.events,e)){if(this.events[e].length>=this._maxListeners)return!1}else{if(this.eventsLength>=this._maxEvents)return!1;this.events[e]=[],this.eventsLength++}return!(this.events[e].length>this._maxListeners)&&(this.events[e].push(t),!0)}},{key:"onAsync",value:(r=(0,sa.c)(fa().mark((function e(t,n){return fa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._realOn(t,n),e.next=3,this.callOfflineStackEventsAsync(t,n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)})},{key:"on",value:function(e,t){var n=this._realOn(e,t);return this.callOfflineStackEvents(e,t),n}},{key:"callOfflineStackEvents",value:function(e,t){if(this.isOnOfflineStack&&this.offlineStack[e]){var n,r=va(this.offlineStack[e]);try{for(r.s();!(n=r.n()).done;){var a=n.value;t.apply(this,a)}}catch(e){r.e(e)}finally{r.f()}this.offlineStack[e]=[]}}},{key:"callOfflineStackEventsAsync",value:(n=(0,sa.c)(fa().mark((function e(t,n){var r,a,o;return fa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isOnOfflineStack||!this.offlineStack[t]){e.next=19;break}r=va(this.offlineStack[t]),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=10;break}return o=a.value,e.next=8,n.apply(this,o);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:this.offlineStack[t]=[];case 19:case"end":return e.stop()}}),e,this,[[2,12,15,18]])}))),function(e,t){return n.apply(this,arguments)})},{key:"createOnceFn",value:function(e,t){var n=this;return function r(){for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];var l=t.apply(this,o);return n.off(e,r),l}}},{key:"once",value:function(e,t){var n=this.createOnceFn(e,t);this._realOn(e,n),this.callOfflineStackEvents(e,t)}},{key:"onceAsync",value:(t=(0,sa.c)(fa().mark((function e(t,n){var r;return fa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.createOnceFn(t,n),this._realOn(t,r),e.next=4,this.callOfflineStackEventsAsync(t,n);case 4:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"removeListener",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.off.apply(this,t)}},{key:"removeAllListeners",value:function(){return this.off.apply(this,arguments.length<=0?void 0:arguments[0])}}]),e}();new ma;ma.defaultMaxListeners=1e4,ma.defaultMaxEvents=1e4;var ya=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t};n(94608);ya("top","left","right","bottom","topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"),ya("hover","focus","click","contextMenu");var ha=function(e){var t=e.className;return P().createElement("svg",{className:we()(t,"icon"),width:"200",height:"200",viewBox:"0 0 28 28",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},P().createElement("title",null,"文本备份"),P().createElement("g",{id:"文本备份",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},P().createElement("path",{d:"M5.5,24 L22.5,24 L22.5,22.5 L23.999,22.5 L24,5.5 L22.5,5.5 L22.5,4 L5.5,4 L5.5,5.5 L4,5.5 L3.999,22.5 L5.5,22.5 L5.5,24 Z M4.5,23.5 L2.5,23.5 L2.5,25.5 L4.5,25.5 L4.5,23.5 Z M25.5,23.5 L23.5,23.5 L23.5,25.5 L25.5,25.5 L25.5,23.5 Z M4.5,2.5 L2.5,2.5 L2.5,4.5 L4.5,4.5 L4.5,2.5 Z M25.5,2.5 L23.5,2.5 L23.5,4.5 L25.5,4.5 L25.5,2.5 Z M5.5,26.5 L1.5,26.5 L1.5,22.5 L2.999,22.5 L3,5.5 L1.5,5.5 L1.5,1.5 L5.5,1.5 L5.5,3 L22.5,3 L22.5,1.5 L26.5,1.5 L26.5,5.5 L25,5.5 L24.999,22.5 L26.5,22.5 L26.5,26.5 L22.5,26.5 L22.5,25 L5.5,25 L5.5,26.5 Z",id:"形状结合",fill:"#404040","fill-rule":"nonzero"}),P().createElement("path",{d:"M20.5234375,19.924 C20.7995799,19.924 21.0234375,20.1478576 21.0234375,20.424 C21.0234375,20.6694599 20.8465623,20.8736084 20.6133131,20.9159443 L20.5234375,20.924 L7.55200195,20.924 C7.27585958,20.924 7.05200195,20.7001424 7.05200195,20.424 C7.05200195,20.1785401 7.22887711,19.9743916 7.46212632,19.9320557 L7.55200195,19.924 L20.5234375,19.924 Z M20.5,17.424 C20.7761424,17.424 21,17.6478576 21,17.924 C21,18.1694599 20.8231248,18.3736084 20.5898756,18.4159443 L20.5,18.424 L15.5,18.424 C15.2238576,18.424 15,18.2001424 15,17.924 C15,17.6785401 15.1768752,17.4743916 15.4101244,17.4320557 L15.5,17.424 L20.5,17.424 Z M20.5,14.424 C20.7761424,14.424 21,14.6478576 21,14.924 C21,15.1694599 20.8231248,15.3736084 20.5898756,15.4159443 L20.5,15.424 L15.5,15.424 C15.2238576,15.424 15,15.2001424 15,14.924 C15,14.6785401 15.1768752,14.4743916 15.4101244,14.4320557 L15.5,14.424 L20.5,14.424 Z",id:"形状结合",fill:"#979797","fill-rule":"nonzero"}),P().createElement("path",{d:"M12.6,17.6699621 L12.6,8.03204346 L12.6,8.03204346 L16.1159783,8.03204346 C16.4009692,8.03204346 16.632,7.80101266 16.632,7.51602173 C16.632,7.2310308 16.4009692,7 16.1159783,7 L7.78802173,7 C7.5030308,7 7.272,7.2310308 7.272,7.51602173 C7.272,7.80101266 7.5030308,8.03204346 7.78802173,8.03204346 L11.304,8.03204346 L11.304,8.03204346 L11.304,17.7739187 C11.304,18.1053028 11.57264,18.3739428 11.9040241,18.3739428 C11.9200353,18.3739428 11.9360401,18.3733019 11.952,18.3720217 C12.3179691,18.3426661 12.6,18.0371067 12.6,17.6699621 Z",id:"T",fill:"#404040","fill-rule":"nonzero"})))},Ca=function(e,t){var n=null;if("number"==typeof t){return function(){for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];null!==n&&clearTimeout(n),n=N()((function(){e&&e.apply(null,a)}),t)}}return e};var Ea={getLangMsg:function(){return""}};var ba=function(){return Ea.getLangMsg.apply(Ea,arguments)},ka=function(e){var t=e.dataContext;return e.selectionContext.getActiveSelectedId()||t.getRootId()},_a=function(e){var t=e.dataContext,n=e.selectionContext,r=e.solidId,a=e.timeout;if(r)return{activedSelectId:r};var o=(0,T.useState)((function(){return ka({dataContext:t,selectionContext:n})})),i=(0,k.c)(o,2),l=i[0],c=i[1],u=(0,T.useRef)(l);return(0,T.useEffect)((function(){var e=Ca((function(){var e=ka({dataContext:t,selectionContext:n});e!==u.current&&($r.log("setActivedSelectId(activedSelectedId)",e),u.current=e,c(e))}),a),r=n.addSelectChangeListener(e),o=t.addDataChangeListener(e);return function(){r&&r(),o&&o()}}),[]),{activedSelectId:l}},xa=D.Tabs.TabPane;function wa(e){var t,n=e.views,r=(e.meta,e.className),a=e.portalId,o=e.position,i=(0,T.useContext)(Zr),l=(0,T.useContext)(Qr),u=_a({dataContext:i,selectionContext:l}).activedSelectId,s=(0,T.useContext)(zr),d=s.activateTab,f=(s.keywordMapping,s.renderCustomTab),v=(s.getViews,s.viewCollapseState),p=s.viewsStateRef,g=s.onViewCollapseChange,m=s.onViewActiveKeyChange,y=(0,T.useState)((null==v?void 0:v[o])||!1),h=(0,k.c)(y,2),C=h[0],E=h[1],b=(0,T.useRef)(!1),_=(0,T.useRef)("");_.current=null===(t=Tr()(n)[0])||void 0===t||null===(t=t.props)||void 0===t?void 0:t.tabKey;var w=(0,T.useState)(n),N=(0,k.c)(w,2),I=N[0],M=N[1],S=(0,T.useState)((function(){var e;return null===(e=I[0])||void 0===e||null===(e=e.props)||void 0===e?void 0:e.tabKey})),L=(0,k.c)(S,2),R=L[0],D=L[1],V=z()(I).call(I,(function(e){return R===e.props.tabKey})),F=(0,T.useMemo)((function(){return j()(I).call(I,(function(e){var t,n;return P().createElement(xa,{key:null===(t=e.props)||void 0===t?void 0:t.tabKey,tab:(0,ht.isFunction)(f)?f(R,e.props):null===(n=e.props)||void 0===n?void 0:n.tabName},e)}))}),[I]),B=(0,T.useCallback)((function(e){e&&D(e)}),[]),K=(0,T.useCallback)((function(e){e!==R&&(D(e),b.current=!0,null==m||m({position:o,key:e})),C&&(E(!1),null==g||g({position:o,hide:!1}))}),[R,C,B,o]);return(0,T.useLayoutEffect)((function(){p.current[o]={hide:C,activeKey:R,setTabKey:function(e){e!==R&&(b.current=!0,D(e))},getViewKeys:function(){var e;return c()(e=j()(I).call(I,(function(e){var t;return null==e||null===(t=e.props)||void 0===t?void 0:t.tabKey}))).call(e,Boolean)},setViews:function(e){qr()(e,o)&&A()(e[o])&&M((function(){var t,r=c()(t=Tr()(n)).call(t,(function(t,n){var r=function(t){var n,r=t.props.tabKey;return!!x()(n=e[o]).call(n,r)}(t);return r}));return Jr()(r).call(r,(function(t,n){var r,a,i=t.props.aTabKey,l=n.props.bTabKey;return He()(r=e[o]).call(r,i)-He()(a=e[o]).call(a,l)}))}))},setHide:E}}),[C,R,D,E,I]),(0,T.useLayoutEffect)((function(){var e=null==d?void 0:d({dataContext:i,selectionContext:l},o);d&&e?D(e):d||b.current||R!==_.current&&z()(I).call(I,(function(e){return _.current===e.props.tabKey}))&&D(_.current)}),[u]),(0,T.useEffect)((function(){var e;V||B(null===(e=I[0])||void 0===e||null===(e=e.props)||void 0===e?void 0:e.tabKey)}),[V,I]),(0,T.useEffect)((function(){(0,ht.isEqual)(I,n)||M(n)}),[n]),P().createElement("div",{className:we()([r,{hide:C}])},P().createElement(Ma,{content:P().createElement(Ia,{className:r,tabPanes:F,tabKey:R,handleChange:K,hide:C,setHide:E,onViewCollapseChange:g,position:o}),portalId:a}),P().createElement(Na,{activeKey:R,views:I,className:"".concat(r,"-tabs")}))}var Na=(0,T.memo)((function(e){var t=e.activeKey,n=e.views,r=e.className;return P().createElement("div",{className:r},j()(n).call(n,(function(e){var n,a;return P().createElement("div",{className:we()(["".concat(r,"-body"),{hidden:(null===(n=e.props)||void 0===n?void 0:n.tabKey)!==t}]),key:"".concat(null===(a=e.props)||void 0===a?void 0:a.tabKey,"-wrap")},e)})))}));function Ia(e){var t=e.className,n=e.tabPanes,r=e.tabKey,a=e.handleChange,o=e.hide,i=e.setHide,l=e.onViewCollapseChange,c=e.position,u="left"===c?o?"zuolanzhankai":"zuolanshouqi":o?"youlanzhankai":"youlanshouqi";return P().createElement(P().Fragment,null,P().createElement(D.Tabs,{position:"top",defaultActiveKey:r,onChange:a,className:we()(["".concat(t,"-tabs-title"),{hide:o}]),size:"small",noContainer:!0},n),P().createElement(D.Icon,{prefix:"designericon",type:u,onClick:function(){var e=!o;i(!o),null==l||l({position:c,hide:e})},title:ba(o?"designer.leftView.key0002":"designer.leftView.key0003")}))}function Ma(e){var t=e.content,n=e.portalId,r=(0,T.useState)(!1),a=(0,k.c)(r,2),o=a[0],i=a[1],l=(0,(0,T.useContext)(zr).getNode)(),c=l&&l.querySelector("[data-portalId=".concat(n,"]"));return(0,T.useEffect)((function(){i(!0)}),[]),o&&c&&(0,gt.createPortal)(t,c)}var Sa=n(11984),Aa=n.n(Sa),Ta=n(54895),Pa=n(77284),La=n(43840);function Ra(e,t,n){return t=(0,Pa.c)(t),(0,Ta.c)(e,Da()?Aa()(t,n||[],(0,Pa.c)(e).constructor):t.apply(e,n))}function Da(){try{var e=!Boolean.prototype.valueOf.call(Aa()(Boolean,[],(function(){})))}catch(e){}return(Da=function(){return!!e})()}var Va=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(n){function r(e){var t;return(0,Pr.c)(this,r),(t=Ra(this,r,[e])).state={errorInfo:null},t}return(0,La.c)(r,n),(0,Lr.c)(r,[{key:"componentDidCatch",value:function(e,t){this.setState({errorInfo:[e,t]})}},{key:"render",value:function(){var n,r,a=this.state.errorInfo;return a?P().createElement("div",null,M()(n=M()(r="".concat(t," view has an error: ")).call(r,a[0],", ")).call(n,a[1])):P().createElement(e,this.props)}}]),r}(P().Component)},Fa=(0,T.memo)((function(e){var t=e.views,n=(0,T.useContext)(Ur),r=n.getPrefixCls,a=n.prefixCls,o=r(a,"top-view"),i=(0,T.useContext)(zr),l=i.controlViewSetting,c=i.dataPortalIdPrefix,u=void 0===c?o:c;if(!0===(null==l?void 0:l.hideItemView))return null;var s=r(a,"left-view"),d="".concat(u,"-left");return P().createElement(wa,{views:t,className:s,portalId:d,position:"left"})})),Ba=Va(Fa,"kdesigner-left-view"),Ka=Va((0,T.memo)((function(e){var t=e.views,n=(0,T.useContext)(Ur),r=(0,n.getPrefixCls)(n.prefixCls,"main-view");return P().createElement("div",{className:r},t.length<2?t:P().createElement(wa,{views:t,className:r}))})),"kdesigner-main-view"),Oa=(0,T.memo)((function(e){var t=e.views,n=(0,T.useContext)(Ur),r=n.getPrefixCls,a=n.prefixCls,o=r(a,"top-view"),i=(0,T.useContext)(zr),l=i.propertyViewSetting,c=i.dataPortalIdPrefix,u=void 0===c?o:c;if(!0===(null==l?void 0:l.hideItemView))return null;var s=r(a,"right-view"),d="".concat(u,"-right");return P().createElement(wa,{views:t,className:s,portalId:d,position:"right"})})),ja=Va(Oa,"kdesigner-right-view");var Ua=Va((function(){var e=(0,T.useContext)(Ur),t=(0,e.getPrefixCls)(e.prefixCls,"top-view"),n=(0,T.useContext)(zr),r=n.controlViewSetting,a=n.propertyViewSetting,o=n.viewsStateRef,i=n.dataPortalIdPrefix,l=void 0===i?t:i,c=(0,T.useState)(!1),u=(0,k.c)(c,2),s=u[0],d=u[1];(0,T.useEffect)((function(){o.current.top={hide:s,setHide:d}}),[s]);var f=void 0!==(null==r?void 0:r.hideItemView)&&!0===(null==r?void 0:r.hideItemView),v=void 0!==(null==a?void 0:a.hideItemView)&&!0===(null==a?void 0:a.hideItemView);return P().createElement("div",{className:we()([t,{hide:s}])},!f&&P().createElement("div",{className:"".concat(t,"-left"),"data-portalid":"".concat(l,"-left")}),P().createElement("div",{className:"".concat(t,"-main"),"data-portalid":"".concat(l,"-main")}),!v&&P().createElement("div",{className:"".concat(t,"-right"),"data-portalid":"".concat(l,"-right")}))}),"kdesigner-top-view"),Ha=n(83789),za=P().createContext({}),Wa=function(e){return e.SelectChange="selectChange",e.Reset="reset",e}({}),qa=function(e){return e.Set="set",e}({}),Ga=function(e){return e.Add="add",e.Delete="delete",e.Change="change",e.Reset="reset",e.BatchActions="BatchActions",e.Attr="Attr",e.Redo="redo",e.RedoAttr="RedoAttr",e.Undo="undo",e.UndoAttr="UndoAttr",e.MergeData="MergeData",e.Move="Move",e}({}),Ja=function(e){return e.ADD="ADD",e.UPDATE="UPDATE",e.DELETE="DELETE",e.PASTE="PASTE",e.Attr="Attr",e.CUSTOMUPDATE="CUSTOMUPDATE",e.REMOVEPROP="REMOVEPROP",e.DRAG="DRAG",e.INSERT="INSERT",e}({}),Qa=function(e){return e.Replace="replace",e.ErrorChange="errorChange",e.Reset="reset",e.Delete="delete",e.Clear="clear",e}({});function Za(e,t){var n=a()(e);if(i()){var r=i()(e);t&&(r=c()(r).call(r,(function(t){return s()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ya(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?f()(n=Za(Object(a),!0)).call(n,(function(t){(0,b.c)(e,t,a[t])})):p()?m()(e,p()(a)):f()(r=Za(Object(a))).call(r,(function(t){h()(e,t,s()(a,t))}))}return e}var Xa=function(e){return function(t){return Ya(Ya({},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),{},{type:e,value:t})}},$a=(Xa(Ja.DELETE),Xa(Ja.ADD)),eo=Xa(Ja.UPDATE),to=(Xa(Ja.PASTE),Xa(Ja.Attr)),no=(Xa(Ja.CUSTOMUPDATE),Xa(Ja.REMOVEPROP)),ro=(Xa(Ja.DRAG),Xa(Ja.INSERT),{activeSelectedMode:"last",controlViewMode:"vertical",showMessage:function(){for(var e,t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];(e=console).log.apply(e,M()(t=["default showMessage:"]).call(t,r))},env:{},getOutlineItemIcon:function(e){return P().createElement(ha,null)},preHandle:function(e){var t=e.action;return(0,e.success)([t])},onCustomInputClick:function(){},keywordMapping:{id:"Id",type:"Type",name:"Name",key:"Key",parentId:"ParentId"},processPropertyName:function(e){return(0,ht.camelCase)(e)},enableSearch:!0,enableDiffDefaultData:!0,getEditorFormatValue:ht.noop,filterProperty:function(e,t){return!1},controlViewSetting:{hideHelpIcon:!1,hideAnchorIcon:!1,searchInputPlaceholder:ba("designer.leftView.key0001"),hideTitleTips:!1,onHelpIconClick:function(){},getEmptyView:function(){return null}},propertyViewSetting:{getEmptyView:function(){return null}},showTopView:!0,commonPropertyHandler:function(e){return e}}),ao=n(57280);function oo(e,t){var n=a()(e);if(i()){var r=i()(e);t&&(r=c()(r).call(r,(function(t){return s()(e,t).enumerable}))),n.push.apply(n,r)}return n}function io(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?f()(n=oo(Object(a),!0)).call(n,(function(t){(0,b.c)(e,t,a[t])})):p()?m()(e,p()(a)):f()(r=oo(Object(a))).call(r,(function(t){h()(e,t,s()(a,t))}))}return e}var lo=D.Collapse.Panel,co=D.Anchor.Link,uo=D.Dropdown.Item,so=D.Dropdown.Menu,fo=function(e){var t,n=e.meta,r=void 0===n?[]:n,a=e.controlSelectItemInfo,o=(0,T.useContext)(Ur),i=o.getPrefixCls,l=o.prefixCls,u=(0,T.useState)((function(){return r.Controls||[]})),s=(0,k.c)(u,2),d=s[0],f=s[1],v=(0,T.useContext)(Zr),p=(0,T.useContext)(Qr),g=(0,T.useContext)(za).metaApi,m=_a({dataContext:v,selectionContext:p,timeout:200}).activedSelectId,y=(0,T.useContext)(zr),h=y.enableSearch,C=y.keywordMapping,E=y.controlViewSetting,_=E.className,x=i(l,"left-view");(0,T.useEffect)((function(){var e=function(){return f((function(){var e,t=v.findControl(m);t=v.getContainerControl(t);var n=v.getRealControlType(t,C.type);return c()(e=r.Controls||[]).call(e,(function(e){if("HiddenControl"===e.Id||!1===e.Visible)return!1;var t=g.canAdd(e.Id,n);return!0===t||"object"===(0,er.c)(t)&&t.success}))}))};e();var t=v.addDataChangeListener((function(t){var n,r,a=t.actions,o=void 0===a?[]:a;"UPDATE"===(null===(n=o[0])||void 0===n?void 0:n.type)&&((null===(r=(o[0].value||[])[0])||void 0===r||null===(r=r[1])||void 0===r?void 0:r.ContainerType)&&(e(),p.setSelect([m])))}));return function(){t&&t()}}),[m,a]);var w=ho({meta:r,controls:d,enableSearch:h,leftViewPrefixCls:x,controlViewSetting:E}),N=w.filterControls,I=w.searchArea,M=w.controlRelationMap,S=Mt()(N).call(N,(function(e){return!1===e.Visible||!e.Controls||0===e.Controls.length})),A=P().createElement(P().Fragment,null,P().createElement("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOAAAACACAMAAAAlB5WJAAAAVFBMVEUAAADX3ujZ3und3uTZ3OzX3+jW3OfY3erY3unW3OfX3ejV3ebZ2+rY3ejW3OfW3ejX3efX3OfX3efX3ejX3ejv9f/j6fTj6fTi6PPK0Nvg5vHu9P80Vk63AAAAGHRSTlMAHBcFCQ0gEyk1MCQQJj87LUM5RkqA6ab1lqPoAAACrUlEQVR42u3a7Y6iMBSA4X5SBKSIrjjd+7/P7a5mUndHsD1l6WHO2yb1449PjgmYyCiKoiiKoigKfXy63hL7wRDEPS+1nxiE0w0AxCC8QoAYhDcIEIMQBMQgBAExCEFADEIQEIMQBMQgBAExCEFADEIQEIMQBMQgBAExCEFADEIQEIMQBMQgBAExCEFADMLbo48gCJqVFgEJSMCoCEhAAhKQgEX1bYBhBCRgQRGQgASMioCACz0oAv6XVCeEljsFdkd7eWRbvTsg7y9P9XxXQNGf/8ma3QDlcP6yQe4DqOzpRQe1B6D3vcxq/Bd6NfYzjRI9sOlna7ADK7uQww3UdhHoUAPrcakVgUpUddPULVdsrdRhMefcKkB9tMF9U63ZKlVbAfXh8leHjq1Q8z7wY6EI4Itbp0Zm9+lmuRWAuj9/WZ9viFJprSQT87ahGYbG+fICxellPA/PtMOf2npYLjuQn2YSWX7Y1jHlBnb9bAbs43W9KXCcB1oF9R0jywx0dqEB5hPHbYHO2fEpO1q/P0+fgPhUG90dmCvnxqUaCJBX0WUFOucOixnAACsMwDod2PH4cgOb5WQyUGwMdO8BO9TAYRiahcWlEZwLI+OBCWUHRtRqhMA6qipuiiahbYF1q7ABj5G1MTPsEvK8rMA2tioCqBPyn2pbYNutC3SZgVV87wNVQmAVHKhQAXl85m2gTMj5NgaKlYE5J3hzIiH2fvKx7oeP+f25fI/3Hqd/kPkrmhlY2F+5ggkaYYx4Xr7wveBkQYUDnTPx4QJ2xnSm8/t+BoWvPT9nQeUDY0MF9FsnxILKBjq3c6AnqoRYUNlAt3eg3zIhFlQ08He7B7LSIiABCRgVAQn43YDXvL4rK60pL3BipcWvWQfIWXHx6ZqNNxXooyiKoiiKoqjIfgGBCmvD1S6nHAAAAABJRU5ErkJggg=="}),P().createElement("span",null,ba("designer.mainView.key0001")),P().createElement("span",null,ba("designer.mainView.key0002")));return P().createElement("div",{className:we()("".concat(x,"-control-tabs"),_||"")},I,P().createElement("div",{className:we()("".concat(x,"-control-collapse-container"),(0,b.c)({},"".concat(x,"-empty-control-collapse-container"),S))},S?(null==E||null===(t=E.getEmptyView)||void 0===t?void 0:t.call(E))||A:j()(N).call(N,(function(e){return P().createElement(vo,{category:e,controlRelationMap:M,leftViewPrefixCls:x,key:e.Id,activedSelectId:m,controls:d,controlViewSetting:E})}))))},vo=function(e){var t=e.category,n=e.controlRelationMap,r=e.leftViewPrefixCls,a=e.activedSelectId,o=e.controls,i=e.controlViewSetting,l=t.Id,c=t.Visible,u=t.Controls,s=t.Name,d=i.showCollapseTop,f=void 0===d||d,v=i.collapsable,p=void 0===v||v,g=i.hideItemView,m=(0,T.useState)(!1),y=(0,k.c)(m,2),h=y[0],C=y[1],E=((0,T.useCallback)((function(){C((function(e){return!e}))}),[h]),P().createElement(lo,{header:s,panelKey:l},P().createElement("div",{className:"".concat(r,"-pane")},j()(u).call(u,(function(e){return P().createElement(po,{key:e.Id,controlRelationMap:n,control:e,activedSelectId:a,leftViewPrefixCls:r,controls:o})})))));return"HiddenControl"===l||!1===c||0===(null==u?void 0:u.length)||A()(g)&&x()(g).call(g,l)?null:p?P().createElement("div",{id:l,key:l,className:we()("".concat(r,"-group-pane"),{"hide-collapse-top":!f})},P().createElement(D.Collapse,{name:"Collapse",key:l,defaultActiveKey:l,expandIconPosition:"left",className:we()("".concat(r,"-collapse"),"".concat(l,"-collapse"))},E)):P().createElement("div",{id:l,key:l,className:we()("".concat(r,"-group-pane"),{"hide-collapse-top":!f})},P().createElement("div",{className:"".concat(r,"-control-group-title")},P().createElement("div",{className:"".concat(r,"-control-group-title-left")},s)),P().createElement("div",{className:"".concat(r,"-pane")},j()(u).call(u,(function(e){return P().createElement(po,{key:e.Id,controlRelationMap:n,control:e,activedSelectId:a,leftViewPrefixCls:r,controls:o})}))))},po=function(e){var t,n,r=e.controlRelationMap,a=e.control,o=e.activedSelectId,i=e.leftViewPrefixCls,l=e.controls,c=e.parentGroupType,u=a.Name||a.Id;return r[a.Id]&&c!==a.Id?P().createElement(go,{key:M()(t="group_".concat(c||"","_")).call(t,a.Id),Id:a.Id,Name:u,Tips:a.Tips,ExtendFontClass:a.ExtendFontClass,className:i,activedSelectId:o,controls:l,childControls:r[a.Id]||[],controlRelationMap:r}):P().createElement(yo,{key:M()(n="item_".concat(c||"","_")).call(n,a.Id),Id:a.Id,Name:u,Tips:a.Tips,disabled:a.Disable,ExtendFontClass:a.ExtendFontClass,className:i,activedSelectId:o,controlRelationMap:r})},go=function(e){var t,n,r=e.childControls,a=void 0===r?[]:r,o=e.controls,i=e.parentGroupType,l=e.controlRelationMap,c=e.control,u=e.Id,s=e.className,d=e.activedSelectId,f=e.Name,v=e.ExtendFontClass,p=(0,T.useContext)(zr).controlViewMode,g=(0,E.c)(a),m=(0,T.useRef)(null),y=(0,T.useState)(!1),h=(0,k.c)(y,2),C=h[0],b=h[1],_=(0,T.useRef)(null),x=(0,T.useCallback)((function(){_.current&&clearTimeout(_.current)}),[u]);(0,T.useEffect)((function(){var e=function(){_.current&&clearTimeout(_.current),_.current=N()((function(){return b(!1)}))};return document.body.addEventListener("mousedown",e,!0),document.body.addEventListener("touchstart",e,!0),function(){document.body.removeEventListener("mousedown",e,!0),document.body.removeEventListener("touchstart",e,!0)}}),[u]);var w=j()(g).call(g,(function(e){return[z()(o).call(o,(function(t){return t.Id===e}))]})),I=j()(g).call(g,(function(e,t){var n=(0,k.c)(w[t],1)[0],r=P().createElement(po,{control:n,childControls:l[e]||[],parentGroupType:u,leftViewPrefixCls:s,controls:o,activedSelectId:d,controlRelationMap:l});return P().createElement(uo,{key:e},r)})),S=P().createElement(so,null,I.length>1?I:I[0]),A=g.length>0&&u!==i,L=A&&P().createElement("div",{ref:m,className:"".concat(s,"-control-switch"),onClick:function(e){b(!C)}},P().createElement(D.Icon,{type:"xialajiantou",prefix:"designericon"})),R=A&&"".concat(s,"-control-content-dropdown"),V=P().createElement(yo,{Id:u,Name:f,key:u,controlRelationMap:l,control:c,ExtendFontClass:v,activedSelectId:d,className:s,dropdownClassName:R},L);return P().createElement("div",{onMouseDown:x,className:we()("".concat(s,"-control"),M()(t="".concat(s,"-")).call(t,p,"-control"))},A?P().createElement(D.Dropdown,{menu:S,scrollHidden:!0,visible:C,onVisibleChange:function(e){b(e)},getTriggerElement:function(){return m.current},placement:"bottomLeft",trigger:"click",popperClassName:M()(n="".concat(s,"-")).call(n,"control-view-dropdown")},V):V)},mo={current:!0},yo=(0,T.forwardRef)((function(e,t){var n,r,a,o,i,l=(0,T.useContext)(za),c=l.dataFactory,u=l.metaApi,s=e.Id,d=e.Name,f=e.Tips,v=e.ExtendFontClass,p=e.className,g=e.activedSelectId,m=e.children,y=e.dropdownClassName,h=e.onClick,E=e.disabled,_=(0,T.useContext)(zr),x=_.getOutlineItemIcon,w=_.env,N=_.keywordMapping,I=_.controlViewMode,S=_.controlViewSetting,L=S.handleItemClick,R=S.onDragStart,V=(0,T.useState)(!1),F=(0,k.c)(V,2),B=F[0],K=F[1],O=(0,T.useContext)(Zr),j=(0,T.useContext)(Qr),U=O.getRootId(),H=s,z=d,W=(0,T.useCallback)((function(){var e,t;if(!E){null==L||L(),mo.current=!1;var n=ka({dataContext:O,selectionContext:j}),r=O.findControl(n);r=O.getContainerControl(r);var a=O.getRealControlType(r,N.type),o=u.canAdd(H,a);if(!(!0===o||"object"===(0,er.c)(o)&&o.success))return rr().resolve();var i=null===(e=u.getControlMeta(null===(t=r)||void 0===t?void 0:t[N.type]))||void 0===e?void 0:e.IsContainer,l=c({type:H,parentId:i?r[N.id]:U}),s=r[N.id]===n?-1:O.findControlIndex(n)+1;return new(rr())((function(e,t){O.addControl($a(l,{index:s})).then((function(t){if(null!=t&&t.length){var n=t[0].value;j.setSelect(A()(n)?[n[0][N.id]]:[n[N.id]]),e()}else e()})).catch((function(e){return t(e)}))}))}}),[H,g]),q=(0,T.useCallback)((function(t){if(!E){var n={type:"control",data:(0,C.c)({},e,{Name:z,Id:H})};w.CONTROL_DRAG_DATA=n,K(!1),null==R||R(t,H,z)}}),[e,H,z]),G=(0,T.useCallback)((function(e){K(e)}),[]),J=x(H),Q=v?J&&P().createElement("i",{className:we()(v,null===(n=J.props)||void 0===n?void 0:n.className,"".concat(p,"-control-icon"))}):J&&P().cloneElement(J,{className:we()(null===(r=J.props)||void 0===r?void 0:r.className,"".concat(p,"-control-icon"))}),Z=null==S||null===(a=S.clickAddDisable)||void 0===a?void 0:a.call(S,H),Y=P().createElement("div",{className:we()("".concat(p,"-control-content"),y),draggable:!E,onDragStart:q,onClick:function(e){mo.current&&!Z&&W().then((function(){mo.current=!0})).catch((function(){mo.current=!0}))}},Q,P().createElement("div",{title:!1!==(null==S?void 0:S.hideTitleTips)?z:"",className:"".concat(p,"-control-name")},P().createElement("span",null,z)));return P().createElement("div",{className:we()("".concat(p,"-control"),M()(o="".concat(p,"-")).call(o,I,"-control"),(0,b.c)({},M()(i="".concat(p,"-")).call(i,I,"-control-disabled"),E)),onClick:h,ref:t},f?P().createElement(D.Tooltip,{placement:"right",tip:f||"",visible:B,onVisibleChange:G},Y):Y,m)})),ho=function(e){var t,n=e.meta,r=e.leftViewPrefixCls,a=e.controls,o=e.controlViewSetting,i=e.enableSearch,l=o.hideHelpIcon,u=o.searchInputPlaceholder,s=o.hideAnchorIcon,d=o.onHelpIconClick,v=void 0===d?function(){}:d,p=o.filterCategories,g=void 0===p?function(e){return e}:p,m=(0,T.useState)(""),y=(0,k.c)(m,2),h=y[0],C=y[1],E=(0,T.useRef)(null),_=(0,T.useMemo)((function(){var e;return(0,ao.isSupported)()?ue()(e=n.Controls).call(e,(function(e,t){return t.Name&&(e[t.Id]=(0,ao.convertToPinyin)(t.Name,"",!0).toLowerCase()),e}),{}):{}}),[]),w=g(n.Categories),N=(0,T.useMemo)((function(){return h?(0,Ha.Ut)(a,(function(e){var t;return c()(t=j()(e).call(e,(function(e){var t,n;return e.Name&&(-1!==He()(t=e.Name).call(t,h)||-1!==He()(n=_[e.Id]).call(n,(0,ao.convertToPinyin)(h,"",!0).toLowerCase()))&&e}))).call(t,Boolean)})):a}),[h,a]),I=c()(t=j()(w).call(w,(function(e){var t=e.Id,n=e.Name;return fe()(N).call(N,(function(e){return e.CategoryId===t}))?{value:t,label:n}:null}))).call(t,Boolean),M={},S=[];!h&&f()(a).call(a,(function(e){var t=e.OwnerTypeId,n=e.Id;t&&(M[t]=M[t]||[],M[t].push(n),S.push(n))}));var A=h?[j()(w).call(w,(function(e){var t=e.Id;return io(io({},e),{},{Controls:c()(N).call(N,(function(e){return e.CategoryId===t}))})})),M]:[j()(w).call(w,(function(e){var t=e.Id;return io(io({},e),{},{Controls:c()(N).call(N,(function(e){return!x()(S).call(S,e.Id)&&e.CategoryId===t}))})})),M],L=(0,k.c)(A,2),R=L[0],V=L[1],F=(0,T.useCallback)((function(e){C(e)}),[]),B=(0,T.useCallback)((0,ht.debounce)(F,250),[]),K=(0,T.useCallback)((function(e){var t;B("string"==typeof e?e:null===(t=E.current)||void 0===t||null===(t=t.input)||void 0===t?void 0:t.value)}),[n,a]);return{filterControls:R,controlRelationMap:V,searchArea:i&&P().createElement("div",{className:"".concat(r,"-control-search")},P().createElement(D.Input,{className:we()("".concat(r,"-control-search-input")),ref:E,placeholder:u||ba("designer.leftView.key0001"),borderType:"bordered",onChange:function(e){return F(e.target.value)},allowClear:!0,prefix:P().createElement(D.Icon,{prefix:"designericon",type:"sousuo",onClick:K}),value:h}),!s&&P().createElement(Co,{options:I,disabled:0===I.length,className:r,handleClick:function(e){var t=document.getElementsByClassName("".concat(e,"-collapse"));null!=t&&t[0]&&t[0].scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})}},P().createElement("div",{title:ba("designer.leftView.key0004"),className:we()("".concat(r,"-control-search-icon"),(0,b.c)({},"".concat(r,"-control-search-icon-unclickable"),0===I.length))},P().createElement(Eo,{disabled:0===I.length}))),!l&&P().createElement("div",{title:ba("designer.leftView.key0005"),className:"".concat(r,"-control-search-icon"),onClick:function(){v()}},P().createElement(D.Icon,{type:"tips"})))}};var Co=function(e){var t,n=e.children,r=e.options,a=(e.handleClick,e.disabled),o=e.className,i=j()(r).call(r,(function(e){var t=e.value,n=e.label;return P().createElement(co,{href:"#".concat(t),title:n,key:t})})),l=(0,T.useState)(!1),c=(0,k.c)(l,2),u=c[0],s=c[1],d=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(0,T.useRef)(null),r=(0,T.useCallback)((function(){n.current&&clearTimeout(n.current)}),[]);return(0,T.useEffect)((function(){var r=function(){n.current&&clearTimeout(n.current),n.current=N()((function(){e()}))};return document.addEventListener("click",r,t),function(){document.removeEventListener("click",r,t)}}),[e]),r}((0,T.useCallback)((function(){return s(!1)}),[]),!0);return P().createElement(P().Fragment,null,!!n&&P().cloneElement(n,{onClick:function(){!a&&s(!u),d()},className:we()(null==n||null===(t=n.props)||void 0===t?void 0:t.className,(0,b.c)({},"".concat(o,"-control-search-icon-focus"),u))},P().createElement(P().Fragment,null,n.props.children,P().createElement(D.Anchor,{type:"advanced",offsetTop:70,visible:!a&&u,lockedIcon:!1,onVisibleChange:function(e){},getCurrentAnchor:function(){var e="#".concat(r[0]&&r[0].value);return fe()(r).call(r,(function(t){var n,r,a,o=t.value,i="#".concat(o);try{var l=document.getElementById(o);if(l&&(n=l,r=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,(a=n.getBoundingClientRect()&&n.getBoundingClientRect().top)>=84&&a<=r))return e=i,!0}catch(e){$r.log("getCurrentAnchor error: ",e)}})),e},getContainer:function(){return document.getElementsByClassName("kdesigner-left-view-control-collapse-container")[0]||window}},i))))},Eo=function(e){var t=e.disabled;return P().createElement("svg",{class:"icon",fill:t?"#CCCCCC":"#212121",width:"200",height:"200",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},P().createElement("path",{d:"M500 562.5C430.964406 562.5 375 506.535594 375 437.5C375 368.464406 430.964406 312.5 500 312.5C569.035594 312.5 625 368.464406 625 437.5C625 506.535594 569.035594 562.5 500 562.5zM500 500C534.517797 500 562.5 472.017797 562.5 437.5C562.5 402.982203 534.517797 375 500 375C465.482203 375 437.5 402.982203 437.5 437.5C437.5 472.017797 465.482203 500 500 500zM516.777359 932.614422C506.540909 939.128525 493.459091 939.128525 483.222641 932.614422C245.934398 781.612813 125 616.702269 125 437.5C125 230.393219 292.893219 62.5 500 62.5C707.106781 62.5 875 230.393219 875 437.5C875 616.702269 754.065603 781.612813 516.777359 932.614422zM187.5 437.5C187.5 587.679863 290.254255 731.649213 500 869.053947C709.745744 731.649213 812.5 587.679863 812.5 437.5C812.5 264.911016 672.588984 125 500 125C327.411016 125 187.5 264.911016 187.5 437.5z"}))};fo.tabKey="ControlView",fo.getTabName=function(){return ba("designer.leftView.key0006")};var bo=fo,ko=P().createContext({}),_o=n(97552),xo=n.n(_o),wo=function(e){var t=e.type,n=e.color,r=e.className,a=e.onClick,o=e.disabled,i=function(){a&&a()},l=(0,T.useMemo)((function(){if(!n)return"#ffffff";return/rgba?\((\d{1,3}),(\d{1,3}),(\d{1,3})(,([.\d]+))?\)/.test(n)||/^#([0-9a-fA-F]{6}|[0-9a-fA-F]{3})$/.test(n)?n:"#ffffff"}),[n]);return P().createElement("div",{className:we()("".concat(r,"-prefix"),{disabled:o})},"foreColor"===t?P().createElement("svg",{className:"".concat(r,"-prefix-icon"),width:"200",height:"200",viewBox:"0 0 20 20",version:"1.1",xmlns:"http://www.w3.org/2000/svg",onClick:i},P().createElement("title",null,ba("designer.editor.key0010")),P().createElement("g",{id:"文字颜色",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},P().createElement("g",{id:"编组",transform:"translate(3.000000, 1.225936)"},P().createElement("path",{d:"M7.10199875,0.000488183945 C7.39408208,-0.0100860974 7.67791213,0.151661551 7.80920279,0.433215284 L7.80920279,0.433215284 L13.7258585,13.1215243 C13.9009127,13.4969293 13.7384963,13.9431646 13.3630913,14.1182188 C12.9876863,14.2932731 12.541451,14.1308567 12.3663968,13.7554517 L12.3663968,13.7554517 L10.2754569,9.274 L3.87745688,9.274 L1.7883667,13.7554517 C1.61331249,14.1308567 1.16707714,14.2932731 0.791672168,14.1182188 C0.416267191,13.9431646 0.253850808,13.4969293 0.428905024,13.1215243 L6.34556069,0.433215284 C6.48061111,0.143598729 6.77706251,-0.0192517453 7.07787471,0.00182180938 Z M7.07645688,2.413 L4.57645688,7.774 L9.57645688,7.774 L7.07645688,2.413 Z",id:"形状结合",fill:"#212121"}),P().createElement("rect",{id:"矩形备份-2",stroke:"#ccc",strokeWidth:"0.5",fill:l,x:"-0.25",y:"15.5240643",width:"14.5",height:"2.5",rx:"1"})))):P().createElement("svg",{className:"".concat(r,"-prefix-icon"),width:"200",height:"200",viewBox:"0 0 20 20",version:"1.1",xmlns:"http://www.w3.org/2000/svg",onClick:i},P().createElement("title",null,ba("designer.editor.key0011")),P().createElement("g",{id:"油漆桶",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},P().createElement("g",{id:"编组",transform:"translate(2.810513, 0.777902)"},P().createElement("path",{d:"M7.35237743,0.219669914 L8.05948421,0.926776695 L8.06299995,0.931 L12.8033719,5.58910098 C13.6474203,6.41866449 13.6988871,7.75029176 12.9455484,8.64490829 L12.82651,8.7757058 L7.52324583,14.07897 C6.68640806,14.9158077 5.35438522,14.9556572 4.47038697,14.1985182 L4.34126532,14.07897 L0.658927543,10.3966322 C-0.177910225,9.55979443 -0.217759275,8.22777195 0.539946158,7.34320727 L0.659583703,7.21399633 L6.45599995,1.445 L6.29171726,1.28033009 C5.99882404,0.987436867 5.99882404,0.512563133 6.29171726,0.219669914 C6.58461048,-0.0732233047 7.05948421,-0.0732233047 7.35237743,0.219669914 Z M12.7772674,11.2000162 C12.8448732,11.2253684 12.8982166,11.2787118 12.9235688,11.3463177 L13.6628014,13.3176044 C13.8643815,13.8551514 13.5920265,14.4543322 13.0544796,14.6559123 C12.9377675,14.6996794 12.8141351,14.7220982 12.6894865,14.7220982 C12.1153861,14.7220982 11.6499858,14.2566979 11.6499858,13.6825975 C11.6499858,13.557949 11.6724047,13.4343165 11.7161717,13.3176044 L12.4554042,11.3463177 C12.5038843,11.2170376 12.6479873,11.1515362 12.7772674,11.2000162 Z M7.52128565,2.50147715 L2.77699995,7.222 L11.9757231,7.22266041 C11.9821309,7.05395544 11.9319029,6.8835921 11.8253092,6.74250292 L11.751965,6.65901613 L7.52128565,2.50147715 Z",id:"形状结合",fill:"#212121"}),P().createElement("rect",{id:"矩形备份-3",stroke:"#ccc",strokeWidth:"0.5",fill:l,x:"-0.060513479",y:"15.9720982",width:"14.5",height:"2.5",rx:"1"})))))},No=[["#45cdff","#3dccc0","#40bd6e","#99d92b","#ffd52e","#ffb44a","#ff854d","#ff5257","#ff3b72","#9a4dff","#3987ed","#5797ff"],["#16b0f1","#16b8b1","#1ba854","#77c404","#fdc200","#ff991c","#ff5f1f","#fb2323","#f90d58","#701df0","#0e5fd8","#276ff5"],["#ffffff","#fafafa","#f5f5f5","#f2f2f2","#e5e5e5","#d9d9d9","#cccccc","#999999","#666666","#404040","#212121","#000000"]],Io=function(e){var t,n="",r=100;if(!e)return{color:n,alpha:r};if(/^themeColor/.test(e)){var a=e.split("|");return{color:n=a[0],alpha:r=Number(a[1])||100}}if(null!==(t=e=(0,ht.trim)(e).toLowerCase())&&void 0!==t&&Nt()(t).call(t,"#"))n=e;else{var o,i,l,c,u=e.replace(/\s+/g,"").match(/rgba?\((\d{1,3}),(\d{1,3}),(\d{1,3})(,([.\d]+))?\)/);u&&(o=1===(o=xo()(u[1]).toString(16)).length?"0"+o:o,i=1===(i=xo()(u[2]).toString(16)).length?"0"+i:i,l=1===(l=xo()(u[3]).toString(16)).length?"0"+l:l,c=ta()(u[5]),n="#"+o+i+l,r=isNaN(c)?100:xo()(100*c))}return{color:n,alpha:r}},Mo=function(e){var t=e.color,n=e.alpha;if("themeColor"===t&&100!==n)return"themeColor|".concat(n);if(100!==n){var r,a,o,i,l,c;t.match(/^#[0-9a-fA-F]{3}$/)?(i=xo()("0x"+(0,ht.repeat)(K()(t).call(t,1,2),2)),l=xo()("0x"+(0,ht.repeat)(K()(t).call(t,2,3),2)),c=xo()("0x"+(0,ht.repeat)(K()(t).call(t,3,4),2))):(i=xo()("0x"+K()(t).call(t,1,3)),l=xo()("0x"+K()(t).call(t,3,5)),c=xo()("0x"+K()(t).call(t,5,7))),t=M()(r=M()(a=M()(o="rgba(".concat(i,",")).call(o,l,",")).call(a,c,",")).call(r,n/100,")")}return t},So=function(e){var t,n,r=e.className,a=e.showPanel,o=e.hideThemeBtn,i=e.hideAlphaInput,l=e.colorValue,c=e.isCheck,u=e.onChange,s=e.onClosePanel,d=e.triggerDom,f=(e.disabled,(0,T.useState)(!!c)),v=(0,k.c)(f,2),p=v[0],g=v[1],m=(0,T.useState)((function(){var e=Io(l).color;return Nt()(e).call(e,"#")?K()(e).call(e,1):e})),y=(0,k.c)(m,2),h=y[0],C=y[1],E=(0,T.useState)((function(){return Io(l).alpha})),b=(0,k.c)(E,2),_=b[0],x=b[1],w=(0,T.useRef)(null),N=null==d?void 0:d.current,I=null!==(t=null==d||null===(n=d.current)||void 0===n?void 0:n.getBoundingClientRect())&&void 0!==t?t:{},M=I.right,S=void 0===M?0:M,A=I.top,L=void 0===A?0:A,R=I.height,V=(void 0===R?0:R)+4,F=p?40:156,B=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,O=L+V+F>(window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight)?L-F-4:L+V;aa([d,w],(function(){s()})),(0,T.useEffect)((function(){C((function(){var e=Io(l).color;return Nt()(e).call(e,"#")?K()(e).call(e,1):e})),x((function(){return Io(l).alpha})),g(null==l?void 0:Nt()(l).call(l,"themeColor"))}),[l]),(0,T.useEffect)((function(){a&&(C((function(){var e=Io(l).color;return Nt()(e).call(e,"#")?K()(e).call(e,1):e})),x((function(){return Io(l).alpha})),g(null==l?void 0:Nt()(l).call(l,"themeColor")))}),[a]),(0,T.useEffect)((function(){var e=function(e){var t,n=e.target;d.current&&null!==(t=d.current)&&void 0!==t&&t.contains(n)||s()};return document.addEventListener("scroll",e,!0),function(){document.removeEventListener("scroll",e,!0)}}),[]);var U=function(e){var t=e.color,n=e.alpha;C((function(){return Nt()(t).call(t,"#")?K()(t).call(t,1):t})),x(n);if(t.match(/^#([0-9a-fA-F]{6}|[0-9a-fA-F]{3})$/)||/^themeColor/.test(t)){var r=Mo({color:t,alpha:n});u(r)}};return N?mt().createPortal(P().createElement("div",{ref:w,style:{position:"absolute",top:O,right:B-S,zIndex:1050},className:r},a?P().createElement("div",{className:we()("kdesigner-colorPanel","kd-cq-color-picker kd-cq-kdesigner-color-picker")},!o&&P().createElement("div",{className:"themeBtn"},P().createElement("label",null,ba("designer.editor.key0012")),P().createElement(D.Switch,{size:"large",checked:p,onClick:function(e){var t=!p,n=t?"themeColor":"",r=t?_:100;g(t),C(n);var a=Mo({color:n,alpha:r});u(a)}})),!p&&P().createElement(P().Fragment,null,P().createElement("div",{className:"textPanel"},P().createElement("div",{className:"textItme"},P().createElement("label",null,ba("designer.editor.key0013")),P().createElement(D.Input,{borderType:"bordered",value:h,prefix:"#",onChange:function(e){var t="#"+e.target.value;U({color:t,alpha:_})}})),!i&&P().createElement("div",{className:"textItme",title:"".concat(ba("designer.editor.key0014"),"[0, 100]")},P().createElement("label",null,ba("designer.editor.key0015")),P().createElement(D.InputNumber,{borderType:"bordered",value:String(_),min:0,max:100,onChange:function(e){var t=e.target.value;t<0||t>100||U({color:"#"+h,alpha:t})}}))),P().createElement("div",{className:"colors"},function(){if(a){var e=(0,ht.flatten)(No);return j()(e).call(e,(function(e,t){var n={backgroundColor:e};return P().createElement("span",{key:t,className:we()("colorItem","kd-cq-color-picker-color-block"),title:e,style:n,onClick:function(t){return function(e){var t=e.color,n=e.alpha;p||U({color:t,alpha:n})}({color:e,alpha:_})}},P().createElement("span",{className:"colorItem-hover-box"}))}))}return null}()))):null),document.body):null};function Ao(e,t){var n=void 0!==Ot()&&Ut()(e)||e["@@iterator"];if(!n){if(A()(e)||(n=function(e,t){var n;if(!e)return;if("string"==typeof e)return To(e,t);var r=K()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return At()(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return To(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw o}}}}function To(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Po=function(e){var t=e.tips,n=e.name,r=e.className,a=e.nameHidden,o=e.required,i=e.onLinkClick,l=e.title,c=e.nameStyle,u=e.subTitle,s=(0,T.useState)(!1),d=(0,k.c)(s,2),f=d[0],v=d[1],p=(0,T.useContext)(zr),g=p.tipsVisibleByMouse,m=p.tipsPostion,y=void 0===m?{placement:"top"}:m,h=(0,T.useMemo)((function(){if("object"!==(0,er.c)(t))return t;var e=t.linkData,n=t.content,a=t.title,o=Vo(n),l=Bo(o),c=Lo(e,l,{handleLinkClick:i});return P().createElement("div",null,a&&P().createElement("div",{className:"".concat(r,"-Tooltip-title")},a),c)}),[t,r,i]);return P().createElement("div",{style:c,className:we()((0,b.c)((0,b.c)({},"".concat(r,"-title"),!0),"".concat(r,"-placeholder"),a)),onMouseEnter:function(){g&&v(!0)},onMouseLeave:function(){g&&v(!1)}},P().createElement("span",{className:we()((0,b.c)({},"".concat(r,"-title-text"),!0))},P().createElement("span",{title:l||n||""},n),u&&P().createElement("span",{className:"".concat(r,"-title-sub")},u),o&&P().createElement("span",{className:we()((0,b.c)({},"".concat(r,"-title-required-text"),o))},"*")),h&&P().createElement(D.Tooltip,{placement:y.placement,tip:h,style:{marginLeft:"5px"},scrollHidden:!0,popperStyle:y.tipsStyle},(!g||g&&f)&&P().createElement(D.Icon,{prefix:"designericon",type:"wenhao"})))},Lo=function e(t,n,r){var a;return(0,ht.isArray)(n)?j()(a=c()(n).call(n,(function(e){return!(0,ht.isEmpty)(e)}))).call(a,(function(n){return(0,ht.isArray)(n)?e(t,n,r):Ro(t,n,r)})):Ro(t,n,r)},Ro=function(e,t,n){var r,a,o=n.handleLinkClick,i=new RegExp(/(#\{\d+\})/),l=new RegExp(/\d+/);return(0,ht.isString)(t)&&i.test(t)?j()(r=c()(a=t.split(/(#\{\d+\})/g)).call(a,(function(e){return!(0,ht.isEmpty)(e)}))).call(r,(function(t,n){if(i.test(t)){var r,a=xo()(t.match(l)),c=Ao(e);try{var u,s=function(){var e,t=r.value,i=t.index,l=t.name,c=t.code;if(i===a)return{v:P().createElement(Ko,{key:M()(e="link".concat(n,"_")).call(e,c),name:l,code:c,index:i,onClick:function(){o&&o(c)}})}};for(c.s();!(r=c.n()).done;)if(u=s())return u.v}catch(e){c.e(e)}finally{c.f()}}return t})):t},Do=function(e){var t,n,r=new RegExp(/(\\r\\n)|(\\n)|(\\r)/g);return(0,ht.isString)(e)&&r.test(e)?j()(t=c()(n=e.split(r)).call(n,(function(e){return!(0,ht.isEmpty)(e)}))).call(t,(function(e,t){return r.test(e)?P().createElement("br",{key:"br_".concat(t)}):(0,ht.trimStart)(e)})):e},Vo=function e(t){var n;return(0,ht.isArray)(t)?j()(n=c()(t).call(t,(function(e){return!(0,ht.isEmpty)(e)}))).call(n,(function(t){return(0,ht.isArray)(t)?e(t):Do(t)})):Do(t)},Fo=function(e){var t,n=new RegExp(/(\\t)/g);return(0,ht.isString)(e)&&n.test(e)?j()(t=e.split(n)).call(t,(function(e,t){return n.test(e)?P().createElement("span",{style:{paddingLeft:"2em"},key:"span_".concat(t)}):e})):e},Bo=function e(t){var n;return(0,ht.isArray)(t)?j()(n=c()(t).call(t,(function(e){return!(0,ht.isEmpty)(e)}))).call(n,(function(t){return(0,ht.isArray)(t)?e(t):Fo(t)})):Fo(t)},Ko=function(e){var t=e.name,n=e.code,r=e.onClick,a={padding:" 0px 2px",color:"#5E80EB",cursor:" pointer"};return Nt()(n).call(n,"www")||Nt()(n).call(n,"http://")||Nt()(n).call(n,"https://")?P().createElement("a",{className:"link-color",style:a,href:Nt()(n).call(n,"www")?"http://".concat(n):n,target:"_blank",rel:"noreferrer"},t):P().createElement("a",{className:"link-color",style:a,href:"javascript:void(0);",onClick:r},t)},Oo=function(e){var t=e.handleChange,n=e.value,r=e.className,a=e.editor,o=e.locked,i=e.Name,l=e.Tips,c=a.NameHidden,u=a.Prefix,s=void 0===u?{}:u,d=a.Required,f=a.Title,v=s.Type,p=void 0===v?"foreColor":v,g=(0,T.useState)(!1),m=(0,k.c)(g,2),y=m[0],h=m[1],C=(0,T.useState)(n||""),E=(0,k.c)(C,2),b=E[0],_=E[1],x=(0,T.useRef)(null),w=(0,T.useRef)(null);return(0,T.useEffect)((function(){n!==b&&_(n)}),[n]),P().createElement(P().Fragment,null,P().createElement(Po,{nameHidden:c,className:r,name:i,tips:l,required:d,title:f}),P().createElement("div",{className:"".concat(r,"-color-editor"),ref:w},P().createElement(wo,{className:"".concat(r,"-color-editor"),type:p,color:n,onClick:function(){h(!0)}}),P().createElement(D.Input,{className:"".concat(r,"-color-editor-input"),ref:x,borderType:"bordered",value:b,onChange:function(e){var n=e.target.value;_(n),t(n)},disabled:o,onClick:function(){h(!0)}})),P().createElement(So,{triggerDom:w,showPanel:!o&&y,colorValue:n,onClosePanel:function(){h(!1)},onChange:function(e){t(e)}}))},jo=function(e){var t,n=e.handleChange,r=e.value,a=e.className,o=e.locked,i=e.Editor,l=e.Name,c=e.field,u=e.Id,s=e.Tips,d=e.InputTitle,f=e.dataContext,v=i.NameHidden,p=i.MaxLength,g=(i.Min,i.Max,i.Required),m=i.Type,y=i.Placeholder,h=i.AutoSize,C=i.Count,E=i.CountPosition,b=i.CanResize,_=i.Title,w=i.SubTitle,I=i.AllowClear,S=(0,T.useContext)(zr),A=S.showMessage,L=S.validateProps,R=S.lowerCaseProps,V=d||(p?M()(t="".concat(ba("designer.editor.key0007")||"最多输入字符数",":")).call(t,p):""),F=(0,T.useState)(r||""),B=(0,k.c)(F,2),K=B[0],O=B[1],j=(0,T.useState)(!1),U=(0,k.c)(j,2),H=U[0],z=U[1],W=(0,T.useRef)(null),q=(0,T.useRef)(null);(0,T.useEffect)((function(){H||r===K||O(r)}),[r,H]);var G=function(e){var t,a,o=(null===(t=e.target)||void 0===t?void 0:t.value)||"";R&&x()(R).call(R,u)&&(o=o.toLowerCase()),O(o),(a=o)!==r&&(q.current&&clearTimeout(q.current),q.current=N()((function(){q.current=null,n(a)}),300))},J=function(e){13===e.nativeEvent.keyCode&&Z(e)},Q=function(){z(!0)},Z=function(e){var t,r,a=e.target.value;R&&x()(R).call(R,u)&&(a=a.toLowerCase()),L&&x()(L).call(L,u)&&(t=a,r=(null==f?void 0:f.getData().Items)||[],-1!==Oe()(r).call(r,(function(e){return e.Id!==c.Id&&e[u]===t})))&&A(ba({key:"designer.msg.key0004",variables:{inputValue:a}}),"warn"),n(a),N()((function(){z(!1)}),300)};return P().createElement(P().Fragment,null,P().createElement(Po,{nameHidden:v,className:a,name:l,tips:s,required:g,title:_,subTitle:w}),function(e){return"TextArea"===e}(m)?P().createElement(D.TextArea,{ref:W,value:K,disabled:o,title:V,maxLength:p,placeholder:y||ba("designer.editor.key0008"),borderType:"bordered",autoSize:null!=h?h:{minRows:3,maxRows:3},count:C,countPosition:E,canResize:b,allowClear:I,onKeyDown:J,onFocus:Q,onBlur:Z,onChange:G}):P().createElement(D.Input,{ref:W,value:K,disabled:o,title:V,maxLength:p,placeholder:y||ba("designer.editor.key0008"),borderType:"bordered",allowClear:I,onKeyDown:J,onFocus:Q,onBlur:Z,onChange:G}))},Uo=function(e){var t,n,r,a=e.handleChange,o=e.value,i=e.className,l=e.editor,u=e.locked,s=e.options,d=e.multiple,f=e.Name,v=e.Tips,p=e.scrollHidden,g=void 0===p||p,m=e.allowExistValueNotInOptions,y=void 0!==m&&m,h=e.dropdownClassName,C=l.Enum,E=l.Default,b=l.NameHidden,k=l.Required,_=l.AllowClear,x=void 0===_||_,w=l.Title,N=l.Placeholder,I=!!d,M=I?[]:E||C&&(null!==(t=null===(n=C[0])||void 0===n?void 0:n.Value)&&void 0!==t?t:null===(r=C[0])||void 0===r?void 0:r.Id);$r.log("selectValue",M);var S=s||j()(C).call(C,(function(e){var t;return{value:null!==(t=e.Value)&&void 0!==t?t:e.Id,label:e.Name,disabled:e.Locked||!1}})),T=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(n){if((0,ht.isEmpty)(t))return[];var o=null==t?void 0:t.split(","),i=!1;return a||(o=c()(o).call(o,(function(t){var n=fe()(e).call(e,(function(e){return e.value===t}));return!1===n&&(i=!0),n}))),i&&r(o.join(",")),o}if((0,ht.isEmpty)(t))return"";var l=t;return fe()(e).call(e,(function(e){return e.value===t}))||(l=""),l}(S,o,I,a,y);return P().createElement(P().Fragment,null,P().createElement(Po,{nameHidden:b,className:i,name:f,tips:v,required:k,title:w}),P().createElement(D.Select,{scrollHidden:g,disabled:u,placeholder:N||ba("designer.editor.key0009"),borderType:"bordered",value:T,allowClear:x,onChange:function(e){if(!u){var t=e;A()(e)&&(t=e.join(",")),a(t)}},options:S,mode:I?"multiple":"single",notFoundContent:ba("designer.editor.key0021"),dropdownClassName:h}))};var Ho=Uo,zo=function(e){var t=e.handleChange,n=e.value,r=e.locked,a=e.className,o=e.editor,i=e.Name,l=e.Tips,c=e.onLinkClick,u=o.NameHidden,s=o.Required;return P().createElement(P().Fragment,null,P().createElement(D.Checkbox,{checked:n||!1,disabled:r,onChange:function(e){t(e.target.checked)}},P().createElement(Po,{nameHidden:u,className:a,name:i,tips:l,required:s,onLinkClick:c})))},Wo=["1403","1404"],qo=function(e){var t=e.handleChange,n=e.value,r=e.className,a=e.editor,o=e.locked,i=e.Name,l=e.Tips,u=e.LockType,s=e.field,d=(e.Id,e._originPropsValue_),f=a.NameHidden,v=a.Required,p=a.Title,g=a.Enum,m=(0,T.useState)((function(){return n?n.split(","):[]})),y=(0,k.c)(m,2),h=y[0],C=y[1];(0,T.useEffect)((function(){h.join(",")!==n&&C(n?n.split(","):[])}),[n]);var E=(0,T.useCallback)((function(e){C(e)}),[t]);(0,T.useEffect)((function(){var e=h.length?h.join(","):"";e!==n&&t(e)}),[h]);var b=s._Type_;return"date"===s.Type&&"CommonDateFilterColumnAp"===b&&(g=c()(g).call(g,(function(e){return!x()(Wo).call(Wo,null==e?void 0:e.Id)}))),P().createElement(P().Fragment,null,P().createElement(Po,{nameHidden:f,className:r,name:i,tips:l,required:v,title:p}),P().createElement(D.Checkbox.Group,{disabled:o,value:h,className:"".concat(r,"-checkbox-group"),onChange:E},j()(g).call(g,(function(e){var t=e.Disabled||!o&&"speciallock"===u&&(null==d?void 0:x()(d).call(d,e.Id))&&(null==h?void 0:x()(h).call(h,e.Id));return P().createElement(D.Checkbox,{key:e.Value||e.Id,value:e.Value||e.Id,disabled:t},e.Name)}))))},Go=function(e){var t=e.handleChange,n=e.value,r=e.className,a=e.editor,o=e.locked,i=e.Name,l=e.Tips,c=e.Id,u=e.field,s=e.readonly,d=a.NameHidden,f=a.Required,v=a.Title,p=a.SubTitle,g=n||!1;(0,T.useContext)(Qr).getSelection().length>1&&""===n&&(g=u[c]);var m=o||s;return P().createElement("div",{className:"".concat(r,"-switch")},P().createElement(Po,{nameHidden:d,className:r,name:i,tips:l,required:f,title:v,subTitle:p}),P().createElement(D.Switch,{checked:g,size:"large",disabled:m,onClick:function(){m||t(!n)}}))},Jo=D.Select.Option,Qo=function(e){var t=e.handleChange,n=e.value,r=e.className,a=e.editor,o=e.locked,i=e.Name,l=e.Tips,c=a.NameHidden,u=(a.Default,a.Min),s=a.Max,d=a.Prefix,f=void 0===d?{}:d,v=a.Required,p=a.Title,g=a.AllowClear,m=(f||{}).Value,y=(0,T.useRef)(null),h=(0,T.useState)((function(){return n?String(ta()(n)):""})),E=(0,k.c)(h,2),b=E[0],_=E[1],x=(0,T.useState)((function(){return(null==n?void 0:He()(n).call(n,"%"))>-1?"%":"px"})),w=(0,k.c)(x,2),I=w[0],M=w[1],S=(0,T.useState)(!1),A=(0,k.c)(S,2),L=A[0],R=A[1],V=(0,T.useRef)(null),F={borderType:"bordered",prefix:m||null,allowClear:g},B=(0,T.useMemo)((function(){var e={};return(0,ht.isUndefined)(u)||(e.min=u),(0,ht.isUndefined)(s)||(e.max=s),e}),[u,s]);(0,T.useEffect)((function(){if(!L){var e=n?String(ta()(n)):"",t=(null==n?void 0:He()(n).call(n,"%"))>-1?"%":"px";e!==b&&_(e),t!==I&&M(t)}}),[n]);var K=function(e){V.current&&clearTimeout(V.current),V.current=N()((function(){V.current=null,t(e)}),300)};return P().createElement(P().Fragment,null,P().createElement(Po,{nameHidden:c,className:r,name:i,tips:l,required:v,title:p}),P().createElement("div",{className:"".concat(r,"-dimission-editor")},P().createElement(D.InputNumber,(0,C.c)({},F,{zeroShow:!0,className:"".concat(r,"-dimission-editor-input"),ref:y,value:b,onKeyPress:function(e){e.stopPropagation();var t=["-","+","e","E"];-1!==He()(t).call(t,e.key)&&e.preventDefault()},onChange:function(e){var t=e.target.value;if(_(t),""===t)K(void 0);else{var n=ta()(e.target.value)+I;K(n)}},onFocus:function(){R(!0)},onBlur:function(){R(!1)},disabled:o,mustInScope:!1},B)),P().createElement(D.Select,{scrollHidden:!0,className:"".concat(r,"-dimission-editor-unit"),borderType:"none",value:I,onChange:function(e){b?t(b+e):M(e)}},P().createElement(Jo,{value:"px"},"px"),P().createElement(Jo,{value:"%"},"%"))))},Zo=function(e){var t,n=e.handleChange,r=e.value,a=e.className,o=e.editor,i=e.Name,l=e.Tips,c=e.renderItem,u=o.Enum,s=o.NameHidden,d=o.Default,f=o.Required,v=o.Title,p=j()(u).call(u,(function(e){return(0,C.c)({},e,{Value:e.Value||e.Id})})),g=(0,ht.isUndefined)(r)?d||(null===(t=p[0])||void 0===t?void 0:t.Value):String(r);return P().createElement(P().Fragment,null,P().createElement(Po,{nameHidden:s,className:a,name:i,tips:l,required:f,title:v}),P().createElement("div",{className:"".concat(a,"-tab-editor")},j()(p).call(p,(function(e){var t=e.IconClassName,r=e.IconTitle;return P().createElement("div",{key:e.Value,className:we()(["".concat(a,"-tab-editor-item"),{"is-active":String(g)===String(e.Value)}]),onClick:function(){return t=e.Value,void n(t);var t},title:t&&r},c?c(e):t?P().createElement("i",{className:t}):e.Name)}))))},Yo=D.Radio.Group,Xo=function(e){var t,n,r,a=e.handleChange,o=e.className,i=e.value,l=e.editor,c=e.locked,u=e.Name,s=e.Tips,d=l.Enum,f=l.Default,v=l.NameHidden,p=l.Required,g=l.Vertical,m=l.Title,y=f||d&&(null!==(t=null===(n=d[0])||void 0===n?void 0:n.Value)&&void 0!==t?t:null===(r=d[0])||void 0===r?void 0:r.Id),h=(0,ht.isUndefined)(i)?y:i,C=j()(d).call(d,(function(e){var t;return{label:e.Name,value:null!==(t=e.Value)&&void 0!==t?t:e.Id}}));return P().createElement(P().Fragment,null,P().createElement(Po,{nameHidden:v,className:o,name:u,tips:s,required:p,title:m}),P().createElement(Yo,{className:we()((0,b.c)({},"".concat(o,"-radio-editor-vertical"),g)),disabled:c,value:h,onChange:function(e){a(e.target.value)},options:C}))},$o=function(e){var t=e.value,n=e.Name,r=e.className;return P().createElement("div",{className:"".concat(r,"-readonly")},P().createElement("span",{className:"".concat(r,"-readonly-title"),title:n},n,"："),P().createElement("span",{className:"".concat(r,"-readonly-content"),title:t},t))},ei=n(89280),ti=function(){function e(){(0,Pr.c)(this,e),(0,b.c)(this,"listeners",[])}return(0,Lr.c)(e,[{key:"addDataChangeListener",value:function(e){var t=this;return this.listeners.push(e),function(){var n;t.listeners=c()(n=t.listeners).call(n,(function(t){return e!==t}))}}},{key:"fireEvent",value:function(e){var t;f()(t=this.listeners).call(t,(function(t){try{t(e)}catch(e){}}))}}]),e}();function ni(e,t,n){return t=(0,Pa.c)(t),(0,Ta.c)(e,ri()?Aa()(t,n||[],(0,Pa.c)(e).constructor):t.apply(e,n))}function ri(){try{var e=!Boolean.prototype.valueOf.call(Aa()(Boolean,[],(function(){})))}catch(e){}return(ri=function(){return!!e})()}var ai=function(e){return void 0===e?null:e},oi=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,Pr.c)(this,t),e=ni(this,t),(0,b.c)((0,ei.c)(e),"aliasData",{}),(0,b.c)((0,ei.c)(e),"getAliasData",(function(){return e.aliasData})),(0,b.c)((0,ei.c)(e),"getAliasDataPropValue",(function(t,n,r){return(0,ht.property)([t,n,Qe()(ai(r))])(e.aliasData)})),(0,b.c)((0,ei.c)(e),"hasAliasDataPropValue",(function(t,n,r){return(0,ht.has)(e.aliasData,[t,n,Qe()(ai(r))])})),(0,b.c)((0,ei.c)(e),"setAliasDataPropValue",(function(t){var n=e.aliasData,r=A()(t)?t:[t];if(e.aliasData=(0,Ha.Ut)(e.aliasData,(function(e){f()(r).call(r,(function(t){var n=t.type,r=t.propName,a=t.value,o=t.alias;(0,ht.set)(e,[n,r,Qe()(ai(a))],o)}))})),n!==e.aliasData){var a={type:qa.Set,value:e.aliasData,oldValue:n};e.fireEvent(a)}})),e.aliasData=n,e}return(0,La.c)(t,e),(0,Lr.c)(t,[{key:"addAliasDataChangeListener",value:function(e){return this.addDataChangeListener(e)}}]),t}(ti),ii=P().createContext({}),li=function(e){var t=e.value,n=e.className,r=e.editor,a=e.propName,o=e.field,i=e.handleChange,l=e.onCustomInputClick,c=e.handleClear,u=e.ReadOnly,s=e.locked,d=r.Default,f=r.NameHidden,v=r.BtnName,p=r.MaxLength,g=r.Editable,m=void 0!==g&&g,y=r.Alias,h=void 0!==y&&y,E=r.Required,b=void 0!==E&&E,k=r.Title,_=e.Name,x=e.Tips,w=e.LockType,N={style:{},borderType:"bordered"};!0===m&&(0,C.c)(N,{maxLength:p});var I=t;!0===h&&($r.log("alias",I),I=t&&"object"===(0,er.c)(t)?Qe()(t):t);var M=(0,T.useContext)(zr),S=M.onCustomInputClick,A=M.getEditorFormatValue,L=M.keywordMapping,R=function(){var e=(0,T.useState)(0)[1];return function(){e((function(e){return e+1}))}}(),V=(0,T.useContext)(ii),F=V.addAliasDataChangeListener,B=V.getAliasDataPropValue,K=I||d,O=A(a,o,r)||(K&&"object"===(0,er.c)(K)?Qe()(K):K);(0,T.useEffect)((function(){var e=F((function(){(0,ht.isEqual)(O,B(o[L.type],a,K))||R()}));return function(){e()}}),[O,o[L.type],a,K]);var j=(u||s)&&"speciallock"!==w,U=function(){j||(l?l&&l(a,o,r):S&&S(a,o,r))},H=!(!1!==m||b||!t||u||s||"speciallock"===w),z=void 0===O&&!1===m?"":O;if(v)return P().createElement("div",{className:"".concat(n,"-custom-editor")},P().createElement(Po,{nameHidden:f,className:n,name:_,tips:x,required:b,title:k}),P().createElement("div",null,P().createElement("span",{onClick:U,className:"".concat(n,"-custom-btn")},v)));var W=u||s||"speciallock"===w;return P().createElement(P().Fragment,null,P().createElement(Po,{nameHidden:f,className:n,name:_,tips:x,required:b,title:k}),P().createElement("div",{className:"".concat(n,"-custom-input")},P().createElement(D.Input,(0,C.c)({},N,{value:z,readOnly:W,disabled:W,suffix:P().createElement(P().Fragment,null,H&&P().createElement("div",{title:"",className:"".concat(n,"-clear"),onClick:function(){c?c(d):i(d)}},P().createElement(D.Icon,{type:"close"})),P().createElement(D.Icon,{prefix:"designericon",type:"gengduo",style:{cursor:j?"not-allow":"pointer"},onClick:U}))}))))},ci=function(e){var t=e.handleChange,n=e.value,r=e.locked;return P().createElement(P().Fragment,null,P().createElement(D.Checkbox,{value:n||!1,disabled:r,onChange:function(e){t(e.target.value)}},P().createElement("div",null,D.Icons[e.Name])))};function ui(e,t){var n=a()(e);if(i()){var r=i()(e);t&&(r=c()(r).call(r,(function(t){return s()(e,t).enumerable}))),n.push.apply(n,r)}return n}function si(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?f()(n=ui(Object(a),!0)).call(n,(function(t){(0,b.c)(e,t,a[t])})):p()?m()(e,p()(a)):f()(r=ui(Object(a))).call(r,(function(t){h()(e,t,s()(a,t))}))}return e}var di=D.Select.Option,fi=function(e){if(!e)return{};var t=(0,ht.split)(e,"_"),n={};return n.Width=t[0],n.Style=t[1],n.Color=t[2],n},vi=function(e){if(null==e||!e.Width)return"";var t=["0px","solid","#000000"];return null!=e&&e.Style&&(t[1]=e.Style),null!=e&&e.Color&&(t[2]=e.Color),null!=e&&e.Width&&(t[0]=e.Width),t.join("_")},pi=function(e){var t=e.handleChange,n=e.value,r=void 0===n?{}:n,a=e.className,o=(e.editor,(0,T.useState)(!1)),i=(0,k.c)(o,2),l=i[0],c=i[1],u=(0,T.useRef)(null),s=(0,T.useRef)(null),d=function(){var e,t,n,a,o=si({},r);if(null==o||!o.Border)return"";var i=null==o||null===(e=o.Border)||void 0===e?void 0:e.Top,l=null==o||null===(t=o.Border)||void 0===t?void 0:t.Right,c=null==o||null===(n=o.Border)||void 0===n?void 0:n.Bottom,u=null==o||null===(a=o.Border)||void 0===a?void 0:a.Left;return i=i?i.split("_")[2]:"",l=l?l.split("_")[2]:"",c=c?c.split("_")[2]:"",u=u?u.split("_")[2]:"",i===l&&i===c&&i===u?i:""},f=(0,T.useState)(d()),v=(0,k.c)(f,2),p=v[0],g=v[1];(0,T.useEffect)((function(){g((function(){return d()}))}),[r]);var m=function(e,t,n){var r="0";if("Border"==t){var a=null==e?void 0:e[n],o=fi(a);r=(null==o?void 0:o.Width)||""}else r=(null==e?void 0:e[n])||"";return(0,ht.endsWith)(r,"px")&&(r=(0,ht.replace)(r,"px","")),r},y=function(e){var t,n,a,o,i,l,c=[],u=null==r?void 0:r[e];return c[0]=m(u,e,"Top"),c[1]=m(u,e,"Right"),c[2]=m(u,e,"Bottom"),c[3]=m(u,e,"Left"),c[0]===c[1]&&c[0]===c[2]&&c[0]===c[3]?"0"===c[0]?"0":c[0]:c[0]===c[2]&&c[1]===c[3]?M()(o="".concat(c[0]||0," ")).call(o,c[1]||0):c[1]===c[3]?M()(i=M()(l="".concat(c[0]||0," ")).call(l,c[1]||0," ")).call(i,c[2]||0):M()(t=M()(n=M()(a="".concat(c[0]||0," ")).call(a,c[1]||0," ")).call(n,c[2]||0," ")).call(t,c[3]||0)},h=(0,T.useState)((function(){return y("Margin")})),C=(0,k.c)(h,2),E=C[0],_=C[1],x=(0,T.useState)((function(){return y("Border")})),w=(0,k.c)(x,2),N=w[0],I=w[1],S=(0,T.useState)((function(){return y("Padding")})),A=(0,k.c)(S,2),L=A[0],R=A[1];(0,T.useEffect)((function(){var e=y("Margin"),t=y("Border"),n=y("Padding");E!==e&&_(e),N!==t&&_(t),L!==n&&_(n)}),[r]);var V=function(e,t){var n,r,a,o,i=e.length;1===i?n=r=a=o=e[0]:2===i?(n=a=e[0],r=o=e[1]):3===i?(n=e[0],r=o=e[1],a=e[2]):4===i&&(n=e[0],r=e[1],a=e[2],o=e[3]);var l,c,u,s,d={Width:"".concat(n||"","px")},f={Width:"".concat(r||"","px")},v={Width:"".concat(a||"","px")},p={Width:"".concat(o||"","px")};null!=t&&t.Border&&(d=si(si({},fi(null==t||null===(l=t.Border)||void 0===l?void 0:l.Top)),{},{Width:"".concat(n,"px")}),f=si(si({},fi(null==t||null===(c=t.Border)||void 0===c?void 0:c.Right)),{},{Width:"".concat(r,"px")}),v=si(si({},fi(null==t||null===(u=t.Border)||void 0===u?void 0:u.Bottom)),{},{Width:"".concat(a,"px")}),p=si(si({},fi(null==t||null===(s=t.Border)||void 0===s?void 0:s.Left)),{},{Width:"".concat(o,"px")}));return{Top:vi(d),Right:vi(f),Bottom:vi(v),Left:vi(p)}},F=function(e,n,r){var a=e;a?t(si(si({},e),{},(0,b.c)({},n,r))):(a=(0,b.c)({},n,r),t(a))},B=function(e,t){var n,a;if(/^[\d\s]*$/.test(e)){var o=j()(n=K()(a=e.replace(/(^\s*)|(\s*$)/g,"").replace(/\s{2,}/g," ").split(" ")).call(a,0,4)).call(n,(function(e){return e})),i=4===o.length?o.join(" "):e;"Border"===t?I(i):"Padding"===t?R(i):"Margin"===t&&_(i);var l=si({},r);if(1===o.length){var c=""===o[0];if("Border"===t){var u=c?{}:V(o,l);F(l,t,u)}else{var s=c?{}:{Top:"".concat(o[0],"px"),Right:"".concat(o[0],"px"),Bottom:"".concat(o[0],"px"),Left:"".concat(o[0],"px")};F(l,t,s)}}else if(2===o.length)if("Border"===t){var d=V(o,l);F(l,t,d)}else{var f={Top:"".concat(o[0],"px"),Right:"".concat(o[1],"px"),Bottom:"".concat(o[0],"px"),Left:"".concat(o[1],"px")};F(l,t,f)}else if(3===o.length)if("Border"===t){var v=V(o,l);F(l,t,v)}else{var p={Top:"".concat(o[0],"px"),Right:"".concat(o[1],"px"),Bottom:"".concat(o[2],"px"),Left:"".concat(o[1],"px")};F(l,t,p)}else if(4===o.length)if("Border"===t){var g=V(o,l);F(l,t,g)}else{var m={Top:"".concat(o[0],"px"),Right:"".concat(o[1],"px"),Bottom:"".concat(o[2],"px"),Left:"".concat(o[3],"px")};F(l,t,m)}}},O=function(e,t,n){var r,a=null==e||null===(r=e.Border)||void 0===r?void 0:r[n],o=fi(a);return o.Color=t,vi(o)},U=function(e){var n,a=si({},r);a||(a={}),null!==(n=a)&&void 0!==n&&n.Border||(a.Border={},I("1"));var o=O(a,e,"Top"),i=O(a,e,"Right"),l=O(a,e,"Bottom"),c=O(a,e,"Left");a.Border=si(si({},a.Border),{},{Top:o,Right:i,Bottom:l,Left:c}),t(a)};return P().createElement("div",{className:"singleBorderpanel"},P().createElement("div",{className:"singlepanel-item"},P().createElement("label",null,ba("designer.editor.key0001")),P().createElement(D.Input,{borderType:"bordered",value:E,onChange:function(e){return B(e.target.value,"Margin")}})),P().createElement("div",{className:"singlepanel-item"},P().createElement("label",null,ba("designer.editor.key0002")),P().createElement(D.Input,{borderType:"bordered",value:L,onChange:function(e){return B(e.target.value,"Padding")}})),P().createElement("div",{className:"singlepanel-item"},P().createElement("label",null,ba("designer.editor.key0003")),P().createElement(D.Input,{borderType:"bordered",value:N,onChange:function(e){return B(e.target.value,"Border")}})),P().createElement("div",{className:"singlepanel-item"},P().createElement("label",null,ba("designer.editor.key0004")),P().createElement("div",{className:"".concat(a,"-color-editor"),ref:s},P().createElement(wo,{className:"".concat(a,"-color-editor"),type:"backgroundColor",color:p,onClick:function(){c(!0)}}),P().createElement(D.Input,{className:"".concat(a,"-color-editor-input"),ref:u,borderType:"bordered",value:p,onChange:function(e){var t=e.target.value;g(t);(t.match(/^#([0-9a-fA-F]{6}|[0-9a-fA-F]{3})$/)||/^themeColor/.test(t))&&U(t)},onClick:function(){c(!0)}})),P().createElement(So,{triggerDom:s,showPanel:l,colorValue:p,onClosePanel:function(){c(!1)},onChange:U})))},gi=function(e){var t=e.title,n=e.bgc,r=e.mold,a=e.children,o=e.value,i=e.onChange,l=e.onFocus,c=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0",a="";if(e){if("Border"==r){var o=e[t];if(""===o)a="";else{var i=fi(o);a=(0,ht.isUndefined)(null==i?void 0:i.Width)?n:null==i?void 0:i.Width}}else a=(0,ht.isUndefined)(e[t])?n:e[t];(0,ht.endsWith)(a,"px")&&(a=(0,ht.replace)(a,"px",""))}return a},u=(0,T.useState)((function(){return c(o,"Top")})),s=(0,k.c)(u,2),d=s[0],f=s[1],v=(0,T.useState)((function(){return c(o,"Left")})),p=(0,k.c)(v,2),g=p[0],m=p[1],y=(0,T.useState)((function(){return c(o,"Right")})),h=(0,k.c)(y,2),C=h[0],E=h[1],b=(0,T.useState)((function(){return c(o,"Bottom")})),_=(0,k.c)(b,2),x=_[0],w=_[1],N=function(e,t,n){var r=new(Vt())([["Top",f],["Left",m],["Right",E],["Bottom",w]]).get(n);null==r||r(e),i&&i(e,t,n)},I=function(e,t){l&&l(e,t)};return(0,T.useEffect)((function(){var e=c(o,"Top"),t=c(o,"Left"),n=c(o,"Right"),r=c(o,"Bottom");e!==d&&f((function(){return c(o,"Top")})),t!==g&&m((function(){return c(o,"Left")})),n!==C&&E((function(){return c(o,"Right")})),r!==x&&w((function(){return c(o,"Bottom")}))}),[o]),P().createElement("div",{className:"".concat(n," marginbox"),tabIndex:-1},P().createElement("div",{className:"top"},P().createElement("span",{className:"title"},t),P().createElement("div",{className:"value"},P().createElement("input",{className:"ip",onChange:function(e){return N(e.target.value,r,"Top")},onFocus:function(e){return I(r,"Top")},value:d}))),P().createElement("div",{className:"center"},P().createElement("div",{className:"value"},P().createElement("input",{className:"ip",onChange:function(e){return N(e.target.value,r,"Left")},onFocus:function(e){return I(r,"Left")},value:g})),P().createElement("div",{className:"content"},a),P().createElement("div",{className:"value"},P().createElement("input",{className:"ip",onChange:function(e){return N(e.target.value,r,"Right")},onFocus:function(e){return I(r,"Right")},value:C}))),P().createElement("div",{className:"bottom"},P().createElement("div",{className:"value"},P().createElement("input",{className:"ip",onChange:function(e){return N(e.target.value,r,"Bottom")},onFocus:function(e){return I(r,"Bottom")},value:x}))))},mi=function(e){var t=e.handleChange,n=e.value,r=void 0===n?{}:n,a=e.className,o=e.editor,i=e.locked,l=e.Name,c=e.Tips,u=o.NameHidden,s=o.Required,d=o.Title,f=(0,T.useState)(!1),v=(0,k.c)(f,2),p=v[0],g=v[1],m=(0,T.useState)(!1),y=(0,k.c)(m,2),h=y[0],E=y[1],_=(0,T.useState)(""),x=(0,k.c)(_,2),w=x[0],N=x[1],I=(0,T.useState)(!1),M=(0,k.c)(I,2),S=M[0],A=M[1],L=(0,T.useRef)(null),R=(0,T.useRef)(null),V=(0,T.useRef)(null),F=(0,T.useState)(!1),B=(0,k.c)(F,2),K=B[0],O=B[1],U=["solid","dotted","dashed"],H=we()({borderpanel:!0,hidden:!p}),z=(null==r?void 0:r.Border)||{},W=fi(null==z?void 0:z[w]),q=null==W?void 0:W.Color,G=(0,T.useState)(q||""),J=(0,k.c)(G,2),Q=J[0],Z=J[1],Y=null==W?void 0:W.Style;(0,T.useEffect)((function(){Z(q||"")}),[q]);var X=function(e){return r&&r[e]||{}},$=function(e,t){O(!0),"Border"===e?(g(!0),N(t)):g(!1)},ee=function(e,n,a){var o=si({},r),i=e?"".concat(e,"px"):"",l=(0,b.c)({},a,i);if(o)if("Border"===n)if(null!=o&&o[n]){var c,u=null==o||null===(c=o[n])||void 0===c?void 0:c[a],s=fi(u);s.Width=i;var d=vi(s);o[n]=si(si({},o[n]),{},(0,b.c)({},a,d)),t(si(si({},o),{},(0,b.c)({},n,si(si({},o[n]),{},(0,b.c)({},a,d)))))}else{var f={};f.Width=i;var v=vi(f);l=(0,b.c)({},a,v),t(si(si({},o),{},(0,b.c)({},n,l)))}else null!=o&&o[n]?(o[n]=si(si({},o[n]),{},(0,b.c)({},a,i)),t(o)):(o[n]=l,t(o));else if("Border"===n){var p={};p.Width=i;var g=vi(p);l[a]=g,t({Border:l})}else t((0,b.c)({},n,l))},te=function(e){var n,a,o=si({},r);o||(o={}),null!==(n=o)&&void 0!==n&&n.Border||(o.Border={});var i=null===(a=o)||void 0===a||null===(a=a.Border)||void 0===a?void 0:a[w],l=fi(i);l.Color=e,null!=l&&l.Width||(l.Width="1px");var c=vi(l);o.Border=si(si({},o.Border),{},(0,b.c)({},w,c)),t(o)};return aa([V],(function(){O(!1)})),P().createElement(P().Fragment,null,P().createElement(Po,{nameHidden:u,className:a,name:l,tips:c,required:s,title:d}),P().createElement("div",{className:"".concat(a,"-border-editor")},P().createElement("div",{className:"editTab",onClick:function(e){E((function(e){return!e}))}},P().createElement("i",{className:"kdfont kdfont-yijiaoyingyonghuise"}),ba(h?"designer.editor.key0005":"designer.editor.key0006")),h?P().createElement(pi,(0,C.c)({},e,{onColorChange:te})):P().createElement("div",{ref:V},P().createElement("div",{className:we()(["edit-box-wrap",{"edit-box-wrap-focused":K}])},P().createElement(gi,{title:ba("designer.editor.key0001"),mold:"Margin",bgc:"marginbgc",onFocus:$,value:X("Margin"),onChange:ee},P().createElement(gi,{title:ba("designer.editor.key0003"),mold:"Border",bgc:"borderbgc",onFocus:$,value:X("Border"),onChange:ee},P().createElement(gi,{title:ba("designer.editor.key0002"),mold:"Padding",bgc:"paddingbgc",onFocus:$,value:X("Padding"),onChange:ee},P().createElement("div",{className:"whbox",onClick:function(){t(void 0)}},P().createElement("i",{className:"arrow kdfont kdfont-shuaxin","aria-hidden":"true"}))))),P().createElement("div",{className:"line-box top-left"}),P().createElement("div",{className:"line-box bottom-left"}),P().createElement("div",{className:"line-box top-right"}),P().createElement("div",{className:"line-box bottom-right"})),p&&P().createElement("div",{className:H},P().createElement("div",{className:"panel-edit-box"},P().createElement("div",{className:"".concat(a,"-color-editor"),ref:R},P().createElement(wo,{className:"".concat(a,"-color-editor"),type:"backgroundColor",color:Q,onClick:function(){A(!0)}}),P().createElement(D.Input,{className:"".concat(a,"-color-editor-input"),ref:L,borderType:"bordered",value:Q,onChange:function(e){var t=e.target.value;Z(t);(t.match(/^#([0-9a-fA-F]{6}|[0-9a-fA-F]{3})$/)||/^themeColor/.test(t))&&te(t)},disabled:i,onClick:function(){A(!0)}})),P().createElement(So,{triggerDom:R,showPanel:S,colorValue:Q,onClosePanel:function(){A(!1)},onChange:te})),P().createElement("div",{className:"panel-edit-box"},P().createElement(D.Select,{scrollHidden:!0,borderType:"bordered",placeholder:"",onChange:function(e){var n,a,o=si({},r);o||(o={}),null!==(n=o)&&void 0!==n&&n.Border||(o.Border={});var i=null===(a=o)||void 0===a||null===(a=a.Border)||void 0===a?void 0:a[w],l=fi(i);l.Style=e,null!=l&&l.Width||(l.Width="1px");var c=vi(l);o.Border=si(si({},o.Border),{},(0,b.c)({},w,c)),t(o)},value:Y,dropdownRender:function(e){var t;return P().cloneElement(e,{},null===(t=e.props.children)||void 0===t||null===(t=t.props.data)||void 0===t?void 0:j()(t).call(t,(function(e){var t=e.props.value;return P().cloneElement(e,{},[P().createElement("div",{style:{marginTop:"5px",border:"".concat(t," 1px #000"),flexGrow:1}})])})))}},j()(U).call(U,(function(e,t){return P().createElement(di,{key:t,style:{display:"flex",alignItems:"center",height:"28px"},value:e},e)}))))))))},yi={"en-US":{monthsShorts:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_")},"de-ch":{monthsShorts:"Jan._Feb._März_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_")},"de-DE":{monthsShorts:"Jan._Feb._März_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_")},"en-AU":{monthsShorts:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_")},"en-CA":{monthsShorts:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_")},"en-GB":{monthsShorts:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_")},"en-IN":{monthsShorts:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_")},"en-ZA":{monthsShorts:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_")},"es-AR":{monthsShorts:"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_")},"es-CL":{monthsShorts:"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_")},"es-ES":{monthsShorts:"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_")},"es-MX":{monthsShorts:"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_sá".split("_")},"fr-BE":{monthsShorts:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_")},"fr-FR":{monthsShorts:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_")},"id-ID":{monthsShorts:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Agu_Sep_Okt_Nov_Des".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_")},"it-IT":{monthsShorts:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_")},"ja-JP":{monthsShorts:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdaysMin:"日_月_火_水_木_金_土".split("_")},"ko-KR":{monthsShort:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),weekdaysMin:"일_월_화_수_목_금_토".split("_")},"lo-LA":{monthsShorts:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdaysMin:"ທ_ຈ_ອຄ_ພ_ພຫ_ສກ_ສ".split("_")},"ms-MY":{monthsShorts:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogos_Sep_Okt_Nov_Dis".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_")},"pl-PL":{monthsShorts:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_paź_lis_gru".split("_"),weekdaysMin:"Nd_Pn_Wt_Śr_Cz_Pt_So".split("_")},"pt-BR":{monthsShorts:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdaysMin:"do_2ª_3ª_4ª_5ª_6ª_sá".split("_")},"pt-PT":{monthsShorts:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdaysMin:"Do_2ª_3ª_4ª_5ª_6ª_Sá".split("_")},ru:{monthsShorts:"янв_фев_мар_апр_мая_июн_июл_авг_сен_окт_ноя_дек".split("_"),weekdaysMin:"вс_пн_вт_ср_чт_пт_сб".split("_")},"sv-SE":{monthsShorts:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdaysMin:"sö_må_ti_on_to_fr_lö".split("_")},"th-TH":{monthsShorts:"ม.ค._ก.พ._มี.ค._เม.ย._พ.ค._มิ.ย._ก.ค._ส.ค._ก.ย._ต.ค._พ.ย._ธ.ค.".split("_"),weekdaysMin:"อา._จ._อ._พ._พฤ._ศ._ส.".split("_")},"tl-PH":{monthsShorts:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_")},"tr-TR":{monthsShorts:"Oca_Şub_Mar_Nis_May_Haz_Tem_Ağu_Eyl_Eki_Kas_Ara".split("_"),weekdaysMin:"Pz_Pt_Sa_Ça_Pe_Cu_Ct".split("_")},"ur-PK":{monthsShorts:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdaysMin:["اتوار","پیر","منگل","بدھ","جمعرات","جمعہ","ہفتہ"]},"vi-VN":{monthsShorts:"thg 1_thg 2_thg 3_thg 4_thg 5_thg 6_thg 7_thg 8_thg 9_thg 10_thg 11_thg 12".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_")},"yo-NG":{monthsShorts:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdaysMin:"Àì_Aj_Ìs_Ọr_Ọb_Ẹt_Àb".split("_")},"zh-CN":{monthsShorts:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_")},"zh-HK":{monthsShorts:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_")},"zh-SG":{monthsShorts:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_")},"zh-TW":{monthsShorts:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_")}},hi=function(){var e=((0,(((0,T.useContext)(zr)||{}).designerContextValue||{}).getDataRef)()||{}).language,t=He()(e).call(e,"_")>-1&&e.replace("_","-"),n=(0,T.useState)({}),r=(0,k.c)(n,2),a=r[0],o=r[1];return(0,T.useEffect)((function(){var e,n;o({weekTitle:(null===(e=yi[t])||void 0===e?void 0:e.weekdaysMin)||["日","一","二","三","四","五","六"],monthTitle:(null===(n=yi[t])||void 0===n?void 0:n.monthsShorts)||["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]})}),[t]),a},Ci=function(e){var t=e.handleChange,n=e.value,r=e.className,a=e.editor,o=e.locked,i=e.Name,l=e.Tips,c=a.NameHidden,u=a.Required,s=a.Title,d=hi(),f=(0,T.useMemo)((function(){var e=n?n.split(","):[];return j()(e).call(e,(function(e){return e?new Date(e):null}))}),[n]);return P().createElement(P().Fragment,null,P().createElement(Po,{nameHidden:c,className:r,name:i,tips:l,required:u,title:s}),P().createElement(D.RangePicker,{className:"".concat(r,"-daterange-editor"),defaultValue:f,borderType:"bordered",disabled:o,onChange:function(e,n){var r=n.join(",");","===r&&(r=""),t(r)},locale:d}))},Ei=function(e){var t=(0,T.useRef)(null),n=e.handleChange,r=e.value,a=e.className,o=e.locked,i=e.Editor,l=e.Name,c=e.Tips,u=i.NameHidden,s=i.Min,d=i.Max,f=i.Required,v=i.DataType,p=i.Title,g=i.SubTitle,m=i.Placeholder,y=i.AllowClear,h=((0,T.useContext)(zr).showMessage,(0,T.useState)(String(r||""))),C=(0,k.c)(h,2),E=C[0],b=C[1],_=(0,T.useState)(!1),x=(0,k.c)(_,2),w=x[0],I=x[1],M=(0,T.useRef)(null);(0,T.useEffect)((function(){var e=(0,ht.isUndefined)(r)?"":String(r);w||e===E||b(e)}),[r,w]);var S=function(e){M.current&&clearTimeout(M.current),M.current=N()((function(){M.current=null,function(e){""!==e&&"Decimal"===v&&(e=ta()(e)),n(e)}(e)}),300)};return P().createElement(P().Fragment,null,P().createElement(Po,{nameHidden:u,className:a,name:l,tips:c,required:f,title:p,subTitle:g}),P().createElement("div",{className:"".concat(a,"-stepper-editor"),onFocus:function(){I(!0)},onBlur:function(e){I(!1);var t=E;""!==t?(s||0==s)&&t<s&&(t=s,b(String(s)),n(s)):(0,ht.isUndefined)(s)||(t=s,b(String(s)),n(s))},tabIndex:-1},P().createElement(D.Stepper,{ref:t,type:"embed",value:E,allowClear:!!y,zeroShow:!0,onChange:function(e){if(!o){var t=e.target.value||"";if(isNaN(t)&&(t=""),""!==t){if(e.nativeEvent){if(!(0,ht.isUndefined)(s)&&t<Number(s))return b(t);!(0,ht.isUndefined)(d)&&t>Number(d)&&(t=d)}else!(0,ht.isUndefined)(s)&&t<Number(s)&&(t=s),!(0,ht.isUndefined)(d)&&t>Number(d)&&(t=d);"Integer"===v&&(t=xo()(t)),b(String(t))}else b("");S(t)}},onKeyPress:function(e){s>=0&&"-"===e.key&&e.preventDefault()},disabled:o,placeholder:m})))},bi=function(e){var t=e.handleChange,n=(e.value,e.className),r=e.editor,a=e.locked,o=e.picker,i=e.Name,l=e.Tips,c=r.NameHidden,u=r.Required,s=r.AllowClear,d=r.BorderType,f=r.Placeholder,v=r.Title,p=r.Picker,g=hi();return P().createElement(P().Fragment,null,P().createElement(Po,{nameHidden:c,className:n,name:i,tips:l,required:u,title:v}),P().createElement(D.DatePicker,{className:"".concat(n,"-datepicker-editor"),dropdownClassName:"".concat(n,"-datepickerpanel-editor"),disabled:a,borderType:d,allowClear:s,onOk:t,onChange:t,picker:p||o,placeholder:f,locale:g}))},ki={Input:jo,TextArea:jo,Checkbox:zo,Switch:Go,Radio:Xo,iconCheck:ci,Select:Ho,MultiSelect:function(e){return P().createElement(Uo,(0,C.c)({},e,{multiple:!0}))},CustomInput:li,CheckBoxGroup:qo,Dimension:Qo,Tab:Zo,ReadOnly:$o,Color:Oo,Border:mi,DateRange:Ci,Stepper:Ei,TimePicker:function(e){return P().createElement(bi,(0,C.c)({},e,{picker:"time"}))},DatePicker:bi};a()(ki);var _i=P().createContext({}),xi=n.p+"images/b7faef5a0338c01e97e8b6d7d8f7511f.png",wi=n(5944);var Ni={propertyActions:{ChangeEditorType:function(e){return[{key:e.Key,editorProp:{Type:e.Value}}]},ChangeDefaultValue:function(e){return[{key:e.Key,editorProp:{Default:e.Value}}]},HideProperty:function(e){var t,n=e.Key;return j()(t=n).call(t,(function(e){return{key:e,prop:{Visible:!1}}}))},ShowProperty:function(e){var t,n=e.Key;return j()(t=n).call(t,(function(e){return{key:e,prop:{Visible:!0}}}))},LockProperty:function(e){var t,n=e.Key;return j()(t=n).call(t,(function(e){return{key:e,prop:{Locked:!0}}}))},UnLockProperty:function(e){var t,n=e.Key;return j()(t=n).call(t,(function(e){return{key:e,prop:{Locked:!1}}}))}},dataActions:{SetValue:function(e){for(var t=e.Key,n=e.Value,r={},a=0;a<t.length;a++)r[Ct().camelCase(t[a])]=n[a];return r},ExchangeValue:function(e,t){for(var n=e.Key,r=e.Value,a={},o=0;o<n.length;o++)a[Ct().camelCase(n[o])]=t[Ct().camelCase(r[o])];return a},SetPropertyValue:function(e){for(var t=e.Key,n=e.Value,r={},a=0;a<t.length;a++)r[t[a]]=n[a];return r}}},Ii=Ni,Mi="property",Si="data";var Ai=function(){var e,t,n={},r={},o=function(e){return function(t,a,o){var i;(e===Mi?n:r)[o?M()(i="".concat(o,"-")).call(i,t):t]=a}};return f()(e=a()(Ii.propertyActions)).call(e,(function(e){o(Mi)(e,Ii.propertyActions[e])})),f()(t=a()(Ii.dataActions)).call(t,(function(e){o(Si)(e,Ii.dataActions[e])})),{rigistAction:o,getAction:function(e){return function(t,a){var o,i=e===Mi?n:r;return i[M()(o="".concat(a,"-")).call(o,t)]||i[t]}}}}();const Ti="entitymeta";function Pi(e,t){var n=a()(e);if(i()){var r=i()(e);t&&(r=c()(r).call(r,(function(t){return s()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Li(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?f()(n=Pi(Object(a),!0)).call(n,(function(t){(0,b.c)(e,t,a[t])})):p()?m()(e,p()(a)):f()(r=Pi(Object(a))).call(r,(function(t){h()(e,t,s()(a,t))}))}return e}function Ri(e,t){var n=void 0!==Ot()&&Ut()(e)||e["@@iterator"];if(!n){if(A()(e)||(n=function(e,t){var n;if(!e)return;if("string"==typeof e)return Di(e,t);var r=K()(n=Object.prototype.toString.call(e)).call(n,8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return At()(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Di(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw o}}}}function Di(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Vi=function(e,t){return function(n){var r=e.Condition,a=e.Todo,o=e.ElseTodo,i=r&&wi.OE.parse(r.replace(/in\(/g,"has(").replace(/&&/g," and ").replace(/!/g," not ").replace(/\|\|/g," or ")),l=!r||i.evaluate(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=e.field,a=e.Items,o=void 0===a?[]:a,i=t[0]||{},l=i.ConditionTypes;return{is:function(e,a){var i=t[0]||{},c=i.AffectedByParent;if("HideProperty"===i.Name&&c&&(r=z()(o).call(o,(function(e){return e.Id===r.ParentId}))||r),e="Type"===e?"_Type_":e,null==a){var u=r[e]==a||""==r[e];if(u)return u;if(l){var s=Fi(r,l,e,n);return s==a||""==s}return!1}return r[e]==a||Fi(r,l,e,n)==a},eq:function(e,t){return e=Ct().camelCase(e),r[e]===t||Fi(r,l,e,n)===t},includes:function(e,t){var a,o;return(null===(a=r[e])||void 0===a?void 0:x()(a).call(a,t))||(null===(o=Fi(r,l,e,n))||void 0===o?void 0:x()(o).call(o,t))},has:function(e,t){return e=Ct().camelCase(e),(null==t?void 0:x()(t).call(t,r[e]))||(null==t?void 0:x()(t).call(t,Fi(r,l,e,n)))},isGlobal:function(t,n){return e[t]===n},Change:!0,null:null,empty:function(e){var t,a,o;return e=Ct().camelCase(e),!(null!==(t=r)&&void 0!==t&&null!==(t=t[e])&&void 0!==t&&t.length)||l&&n&&(null===(a=n())||void 0===a?void 0:a.getFieldPropertyInfo)&&!(null!==(o=Fi(r,l,e,n))&&void 0!==o&&o.length)},hasParentType:function(t){var n=!!function(e,t,n){var r={id:e},a=function(){var e,a=z()(n).call(n,(function(e){return e.id===r.id}))||{};if((null===(e=r=z()(n).call(n,(function(e){return e.id===a.parentId})))||void 0===e?void 0:e.type)===t)return 1};for(;r&&!a(););return r}(r.id,t,e.items);return n}}}(t,a,n));return l&&a?a:!l&&o?o:void 0}};function Fi(e,t,n,r){var a;if(e&&t&&A()(t)&&n&&r&&null!==(a=r())&&void 0!==a&&a.getFieldPropertyInfo)for(var o=0;o<t.length;o++){var i=t[o],l=i===Ti?e.FieldId:e.Id,c=r().getFieldPropertyInfo(l,n,i);if(c)return c}}function Bi(e,t){var n=e.Name,r=e.Args,a=Ai.getAction(Mi)(n,null==t?void 0:t.type);return a?a(r):[]}var Ki=function(e,t,n,r,a,o,i){var l=o.getData(),c=(0,b.c)({},t,n),u=Li(Li({},a),{},(0,b.c)({},t,r)),s=Li(Li({},l),{},{field:u});return f()(e).call(e,(function(e){var t=Vi(e,s)(i)||[];t.length&&f()(t).call(t,(function(e){var t=function(e,t){var n=e.Name,r=e.Args,a=Ai.getAction(Si)(n,null==t?void 0:t.type);return a?a(r,t):{}}(e,u);c=Li(Li({},c),t)}))})),c};var Oi=function(e){var t=e.DataType,n=e.Default,r=e.Enum;return ji(n,r,t)},ji=function(e,t,n){return(0,ht.isUndefined)(e)?(0,ht.isUndefined)(null==t?void 0:t[0].Value)?function(e){switch(e){case"String":return"";case"Integer":return 0;case"Boolean":return!1;default:return}}(n):null==t?void 0:t[0].Value:e},Ui=function(e,t){var n="Nodes"in e?e.Nodes:[e];return ue()(n).call(n,(function(e,n){var r=t(n.Id);if(r){var a=n.Editor;a&&(e[r]=Oi(a))}return e}),{})},Hi=function(e){return function(t,n){var r,a=(n||{}).keywordMapping,o=e;return"object"===(0,er.c)(e)&&a&&(o=e[a.type]),z()(r=t.Controls).call(r,(function(e){return e.Id===o}))||{}}},zi=function(e){return function(t){return"object"===(0,er.c)(e)?e:Hi(e)(t)}},Wi=function(e){return function(t,n){var r=(n||{}).processPropertyName,a=void 0===r?function(e){return e}:r,o=qi(e)(t);return ue()(o).call(o,(function(e,t){var n=a(t.Id),r=t.Editor;return r&&(e[n]=Oi(r)),e}),{})}},qi=function(e){return function(t){var n;return(null===(n=zi(e)(t).Properties)||void 0===n?void 0:ue()(n).call(n,(function(e,t){return t.Nodes?e.push.apply(e,(0,E.c)(t.Nodes)):e.push(t),e}),[]))||[]}},Gi=function(e,t){return function(n){for(var r=zi(e)(n),a=0;a<(null==r||null===(o=r.Properties)||void 0===o?void 0:o.length);a++){var o,i=r.Properties[a],l=i.Nodes||[i],c=z()(l).call(l,(function(e){return e.Id===t}));if(c)return c}return{}}},Ji=function(e,t){var n=t.keywordMapping;return e&&"object"===(0,er.c)(e)?e[n.type]:e},Qi=function(e,t){return function(n,r){var a=function(t,n,a){return e(n,a)(t,r)};(0,ht.memoize)(a,t?t(r):function(e,t,n){return Qe()(n?{type:t,propName:n}:{type:t})});return function(e,t){return a(n,e,t)}}},Zi=Qi(zi),Yi=Qi(Wi),Xi=Qi(Gi),$i=Qi((function(e,t){return function(n){return Gi(e,t)(n).Editor}})),el=Qi((function(e,t){return function(n){return Gi(e,t)(n).Action}})),tl=Qi((function(e,t){return function(n,r){var a=Hi(e)(n,r),o=Hi(t)(n,r),i=Ji(e,r),l=(Ji(t,r),r.canAddCallback),c=o.IsContainer,u=o.Accept;o.NotAccept,o.BaseId,a.IsContainer,a.AcceptParent,a.BaseId;if(!c)return!1;if(u&&A()(u))return x()(u).call(u,i);if(l&&"function"==typeof l){var s=l(e,t,a,o);if("object"===(0,er.c)(s))return s;if(!(0,ht.isUndefined)(s))return!!s}return!0}}),(function(e){return function(t,n,r){var a=e.keywordMapping,o=function(e){return"object"===(0,er.c)(e)?e[a.type]:e};return Qe()(r?{childType:o(n),parentType:o(r)}:{childType:o(n)})}})),nl=Qi((function(e,t){return function(n){for(var r=zi(e)(n),a=0;a<r.Properties.length;a++){var o=r.Properties[a],i="Nodes"in o?o.Nodes:[o],l=z()(i).call(i,(function(e){return e.Id===t}));if(l)return Oi(l.Editor)}}})),rl=function(e,t){var n=Zi(e,t),r=Yi(e,t),a=Xi(e,t),o=$i(e,t),i=el(e,t),l=tl(e,t),c=nl(e,t);return{getMeta:function(){return e},getDefaultData:function(e){return r(e)},getControlMeta:function(e){return n(e)},getControlMetaProperty:function(e,t){return a(e,t)},getControlMetaEditor:function(e,t){return o(e,t)},getControlMetaAction:function(e,t){return i(e,t)},canAdd:function(e,t){return l(e,t)},getControlDefaultDataByPropertyGroups:function(e){return function(e,t){var n=(t||{}).processPropertyName,r=void 0===n?function(e){return e}:n,a={};return f()(e).call(e,(function(e){(0,C.c)(a,Ui(e,r))})),a}(e,t)},getControlMetaPropertyGroups:function(e){var t;return null===(t=n(e))||void 0===t?void 0:t.Properties},getControlPropertyDefaultValue:function(e,t){return c(e,t)}}},al=["Id","Properties"];function ol(e,t){var n=a()(e);if(i()){var r=i()(e);t&&(r=c()(r).call(r,(function(t){return s()(e,t).enumerable}))),n.push.apply(n,r)}return n}function il(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?f()(n=ol(Object(a),!0)).call(n,(function(t){(0,b.c)(e,t,a[t])})):p()?m()(e,p()(a)):f()(r=ol(Object(a))).call(r,(function(t){h()(e,t,s()(a,t))}))}return e}var ll="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function cl(e){var t,n;for(t=[],n=0;n<e.length;n++)t.push(ll[e[n]%62]);return t.join("")}var ul=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;if(void 0!==window.crypto)return cl(window.crypto.getRandomValues(new Uint8Array(e)));for(var t=new Array(e),n=0;n<e;n++)t[n]=Math.floor(256*Math.random());return cl(t)},sl={type:"type",name:"name",key:"key",parentId:"parentId",items:"items"},dl=(Ct().memoize(Ui,(function(e){return Qe()(e)})),Ct().memoize(Ui,(function(e){return Qe()(e)})),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:sl,r=new(Pt())(j()(t).call(t,(function(e){return e[n.key]}))),a=0;return j()(e).call(e,(function(e){for(var t,o=e[n.key]||e[n.type],i=o=null===(t=o)||void 0===t?void 0:K()(t).call(t,0,25);r.has(o);){var l,c=25-"".concat(a+=1).length;o=M()(l="".concat(null==i?void 0:K()(i).call(i,0,c))).call(l,a)}return r.add(o),il(il({},e),{},(0,b.c)({},n.key,o))}))}),fl=function(e,t){var n=Zi(e);return function(e){var t=e.type,r=e.transferData,a={},o=n(t);return o&&(0,C.c)(a,o),r&&(0,C.c)(a,r),a}},vl=function(e,t){var n=t||ro,r=n.keywordMapping,a=n.processPropertyName,o=n.enableDiffDefaultData,i=n.enableEditorValue,l=void 0===i||i,c=Zi(e);return function(e){var t,n,i=e.type,u=e.transferData,s=e.parentId,d={},v=c(i);(s&&(d[r.parentId]=s),o)||f()(t=v.Properties).call(t,(function(e){(0,C.c)(d,Ui(e,a))}));l&&f()(n=v.Properties).call(n,(function(e){(0,C.c)(d,function(e,t){var n="Nodes"in e?e.Nodes:[e];return ue()(n).call(n,(function(e,n){var r=t(n.Id);if(r){var a=n.Editor;(0,ht.isUndefined)(a.Value)||(e[r]=a.Value)}return e}),{})}(e,a))}));return d[r.id]=ul(),d[r.name]=v.Name,d[r.type]=v.Id,u&&(0,C.c)(d,u),d}};function pl(e,t){var n=a()(e);if(i()){var r=i()(e);t&&(r=c()(r).call(r,(function(t){return s()(e,t).enumerable}))),n.push.apply(n,r)}return n}function gl(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?f()(n=pl(Object(a),!0)).call(n,(function(t){(0,b.c)(e,t,a[t])})):p()?m()(e,p()(a)):f()(r=pl(Object(a))).call(r,(function(t){h()(e,t,s()(a,t))}))}return e}function ml(e){var t,n,r=e.dataContext,a=e.selectionContext,o=e.solidId,i=e.meta,l=e.activedSelectId,u=(e.modelFactory,e.globalConfig),s=void 0===u?{}:u,d=s.keywordMapping,f=s.isRootPropertyEmpty,v=s.designerContextValue,p=void 0===v?{}:v,g=s.propertyViewSetting,m=void 0===g?{}:g,y=p.getModel,h=a.getSelection(),C=r.getRootId(),E=r.getData(),b=C===l,k=h.length>1,_=r.findControl(o||l||C)||r.findControl(C),w=c()(t=j()(h).call(h,(function(e){return r.findControl(e)}))).call(t,Boolean),N=j()(w).call(w,(function(e){return e[d.type]})),I=f&&!o&&b,M=r.getRealControlType(_,d.type),S=(0,T.useMemo)((function(){return zi(M)(i)}),[M,i]),A=S.Id,P=(0,T.useMemo)((function(){return Wi(M)(i,s)}),[M,i,s]),L=_,R=(0,T.useMemo)((function(){return gl(gl({},P),L)}),[P,L]),D=_[d.id],V=(0,T.useMemo)((function(){var e,t=gl(gl({},E),{},{field:R}),n=yl(S.Properties,t,{getModel:y});if(k&&!o){var r=(e=N,function(t,n){var r=t.MultiEdit,a=(void 0===r?{Disable:[]}:r).Disable,o=void 0===a?[]:a,i=n.commonPropertyHandler;return ue()(e).call(e,(function(e,n){var r,a,l=zi(n)(t).Properties;return null!==(r=e)&&void 0!==r&&r.length||(e=l),e=c()(a=j()(e).call(e,(function(e){var t,n=e.Nodes,r=e.Id,a=z()(l).call(l,(function(e){return e.Id===r})),i=(null==a?void 0:a.Nodes)||[],u=j()(t=n).call(t,(function(e){return e.Id})),s=c()(i).call(i,(function(e){return!x()(o).call(o,e.Id)&&x()(u).call(u,e.Id)}));return s.length?il(il({},a),{},{Nodes:s}):null}))).call(a,Boolean),(null==i?void 0:i(e))||[]}),[])})(i,s);return null!=r&&r.length?yl(r,t,{getModel:y}):n}return n}),[S,k,R,o]),F=null===(n=m.showEmptyView)||void 0===n?void 0:n.call(m,l);return{modelData:V,emptySelect:I,activedSelectId:l,field:R,controlType:A,itemId:D,isEmptyView:F}}function yl(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).getModel,r=(0,Ha.cp)(e,(function(e){var r;f()(r=function(e,t,n){var r=[],a=t.field;if(void 0===e)return r;var o,i=Ri(e);try{for(i.s();!(o=i.n()).done;){var l=o.value.Nodes;if(l){var c,u=Ri(l);try{for(u.s();!(c=u.n()).done;){var s=c.value.Actions;s&&f()(s).call(s,(function(e){var o=Vi(e,t)(n)||[];o.length&&f()(o).call(o,(function(e){var t=Bi(e,a);r.push.apply(r,(0,E.c)(t))}))}))}}catch(e){u.e(e)}finally{u.f()}}}}catch(e){i.e(e)}finally{i.f()}return r}(e,t,n)).call(r,(function(t){!function(e,t){var n,r=t.key,a=t.prop,o=t.editorProp,i=Ri(e);try{for(i.s();!(n=i.n()).done;){var l=n.value.Nodes;if(l){var c,u=Ri(l);try{for(u.s();!(c=u.n()).done;){var s=c.value;if(A()(r)){if(s.Id===r[0]){var d,f=Ri(s.Editor.Enum);try{for(f.s();!(d=f.n()).done;){var v=d.value;v.Value===r[1]&&(v.Visible=a.Visible)}}catch(e){f.e(e)}finally{f.f()}}}else s.Id===r&&(a&&(0,C.c)(s,a),o&&(s.Editor=Li(Li({},s.Editor||{}),o)))}}catch(e){u.e(e)}finally{u.f()}}}}catch(e){i.e(e)}finally{i.f()}}(e,t)}))}));return r}function hl(e,t){var n=a()(e);if(i()){var r=i()(e);t&&(r=c()(r).call(r,(function(t){return s()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cl(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?f()(n=hl(Object(a),!0)).call(n,(function(t){(0,b.c)(e,t,a[t])})):p()?m()(e,p()(a)):f()(r=hl(Object(a))).call(r,(function(t){h()(e,t,s()(a,t))}))}return e}var El=D.Collapse.Panel,bl=function(e){var t=e.children,n=(e.field,e.className),r=(0,T.useContext)(Ur),a=r.getPrefixCls,o=r.prefixCls,i=((0,T.useContext)(zr).keywordMapping,a(o,"right-view"));return P().createElement("div",{className:we()("".concat(i,"-props-tabs"),n)},t)},kl=function(e){return e},_l=function(e){var t,n=e.className,r=e.PropertyViewItemRender,a=void 0===r?wl:r,o=e.PropertyViewItemGroupRender,i=void 0===o?xl:o,l=e.header,c=e.footer,u=e.children,s=e.meta,d=void 0===s?{}:s,f=(e.data,e.id),v=e.filterPropertyHandler,p=void 0===v?kl:v,g=e.include,m=void 0===g?[]:g,y=e.exclude,h=void 0===y?[]:y,C=e.solidSelectedId,E=(0,T.useContext)(Zr),b=(0,T.useContext)(Qr),k=(b.getSelection(),_a({dataContext:E,selectionContext:b,solidId:f||C}).activedSelectId),_=(0,T.useContext)(za).modelFactory,x=(0,T.useContext)(zr),w=x.keywordMapping,N=x.propertyViewSetting,I=N.className,M=ml({dataContext:E,selectionContext:b,solidId:f,meta:d,activedSelectId:k,modelFactory:_,globalConfig:x}),S=M.modelData,A=M.emptySelect,L=M.field,R=(M.controlType,M.itemId,M.isEmptyView),D=(0,T.useContext)(Ur),V=(0,D.getPrefixCls)(D.prefixCls,"right-view"),F=(0,T.useRef)("");F.current=k;var B=(0,T.useRef)(""),K=(0,T.useRef)({});B.current=oa(k),K.current=oa(L);var O=(0,T.useState)(0)[1];if((0,T.useEffect)((function(){var e=E.addDataChangeListener((function(e){var t=e.value,n=e.actions;if(B.current===F.current){var r,a=z()(r=t[w.items]).call(r,(function(e){return e[w.id]===F.current}));if(a&&a===K.current)return;O((function(e){return e+1}))}else n&&Mt()(n).call(n,(function(e){return"ADD"===e.type}))||O((function(e){return e+1}))}));return function(){e&&e()}}),[]),A)return P().createElement("div",{className:"".concat(V,"-props-empty")},P().createElement("img",{className:"".concat(V,"-props-empty-img"),src:xi,width:"168",height:"96",alt:ba("designer.propertyView.key0001")}),P().createElement("div",{className:"".concat(V,"-props-empty-desc")},ba("designer.propertyView.key0001")));var j=p(S),U=null==N||null===(t=N.getEmptyView)||void 0===t?void 0:t.call(N);return U&&!j.length||R?U:P().createElement(bl,{field:L,className:we()(V,I||"",n)},l,u,P().createElement(i,{modelData:j,include:m,exclude:h,PropertyViewItemRender:a,className:V,field:L}),c)},xl=function(e){var t=(0,T.useContext)(zr),n=t.filterProperty,r=t.propertyViewSetting,a=r.collapsable,o=void 0===a||a,i=r.hideItemView,l=e.modelData,u=e.include,s=e.exclude,d=e.PropertyViewItemRender,f=void 0===d?wl:d,v=e.className,p=e.field;return P().createElement(P().Fragment,null,null==l?void 0:j()(l).call(l,(function(t){var r=t.Id;if(!1===t.Visible)return null;if(A()(i)&&x()(i).call(i,t.Key))return null;if(t.Nodes){var a,l,d=c()(a=Jr()(l=function(e,t,n){var r=function(e,t){return!A()(e)||0===e.length||t(e)};return c()(e).call(e,(function(e){return!!e.Editor&&!1!==e.Visible&&r(t,(function(t){return x()(t).call(t,e.Id)}))&&r(n,(function(t){return!x()(t).call(t,e.Id)}))}))}(t.Nodes,u,s)).call(l,(function(e,t){return(e.GroupSubSeq||0)-(t.GroupSubSeq||0)}))).call(a,(function(e){return!n(p,e)})),g=!!d.length,m=P().createElement("div",{className:"".concat(v,"-pane")},j()(d).call(d,(function(e){return P().createElement(f,(0,C.c)({},e,{key:"".concat(e.Id),field:p,className:v}))}))),y=P().createElement(El,{header:t.Name,panelKey:r},m,e.children);if(g){var h=Mt()(d).call(d,(function(e){return e.Editor&&!0===e.ReadOnly}));return o?P().createElement(D.Collapse,{key:r,name:"Collapse",className:"".concat(v,"-collapse"),expandIconPosition:"left",defaultActiveKey:!0===t.DefaultCollapse?"":r},y):P().createElement("div",{key:r,className:we()("".concat(v,"-collapse"),(0,b.c)({},"".concat(v,"-collapse-readonly"),h))},!h&&P().createElement("div",{className:"".concat(v,"-property-group-title")},t.Name),m)}return null}})))},wl=function(e){var t,n=e.Editor,r=e.field,a=e.Id,o=e.className,i=e.Locked,l=void 0!==i&&i,c=e.ReadOnly,u=e.onPropertyChange,s=e.Actions,d=void 0===s?[]:s,f=e.enableMutiSelect,v=void 0===f||f,p=e.renderCustomError,g=(0,T.useContext)(zr),m=g.keywordMapping,y=g.processPropertyName,h=g.processPropertyValue,E=g.enableError,_=g.globalHandleChange,w=g.designerContextValue,N=(void 0===w?{}:w).getModel,I=r[m.id],S=r[m.type],A=(0,T.useContext)(_i);if(!n)return null;var L=n.Type,R=(n.DataType,n.Enum,n.Span),D=y(a),V=A.getPropertyEditor(L,S)||A.getPropertyEditor("Input"),F=(0,T.useContext)(Zr),B=(0,T.useContext)(Qr),K=B.getSelection(),O=(0,T.useContext)(ko),U=(0,T.useState)((null===(t=O.getError(I))||void 0===t?void 0:t[D])||null),H=(0,k.c)(U,2),z=H[0],W=H[1],q=v&&K.length>1&&x()(K).call(K,I),G=A.getValue&&A.getValue({isMultiSelected:q,field:(0,C.c)({},(0,b.c)({},D,Oi(n)),r),dataContext:F,selectionContext:B,propName:D,editor:n}),J=(0,ht.isUndefined)(G)?(0,ht.isUndefined)(r[D])?Oi(n):r[D]:G,Q=F.getRootId(),Z=(0,T.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=(null==h?void 0:h(a,e,F))||e;if(!(0,ht.isEqual)(J,e)){if((null==u?void 0:u(r,a,e,n,d))||!1)return;if((null==_?void 0:_(r,a,e,n,d))||!1)return;if(q){var i=j()(K).call(K,(function(t){return[t,(0,b.c)({},D,e)]}));F.batchUpdateControlPropertyValues(eo(i))}else{var l=Cl(Cl({},Ki(d,D,e,o,r,F,N)),t);F.batchUpdateControlPropertyValues(eo([[I,l]]))}}}),[I,J,D,d,r,K,n,u]);(0,T.useEffect)((function(){var e;if(E){W(null===(e=O.getError(I))||void 0===e?void 0:e[D]);var t=O.addErrorChangeListener((function(e){var t,n=null===(t=O.getError(I))||void 0===t?void 0:t[D];W(n)}));return function(){t()}}}),[I,D]);var Y,X=(0,T.useMemo)((function(){if(z&&E&&!((null==p?void 0:p(z))||!1))return P().createElement("span",{className:"".concat(o,"-editor-control-error-msg")},z.msg)}),[z,p,E]);return V?P().createElement("div",{className:we()("".concat(o,"-editor-control"),(0,b.c)((0,b.c)((0,b.c)({},M()(Y="".concat(o,"-span-")).call(Y,R),R),"".concat(o,"-no-span"),void 0===R),"".concat(o,"-editor-control-error"),!!X))},P().createElement(V,(0,C.c)({},e,{key:I,field:r,id:I,locked:l||c,handleChange:Z,value:J,className:o,propName:D,editor:n,dataContext:F,selectionContext:B,rootId:Q,error:z})),X):null};function Nl(e,t){var n=a()(e);if(i()){var r=i()(e);t&&(r=c()(r).call(r,(function(t){return s()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Il(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?f()(n=Nl(Object(a),!0)).call(n,(function(t){(0,b.c)(e,t,a[t])})):p()?m()(e,p()(a)):f()(r=Nl(Object(a))).call(r,(function(t){h()(e,t,s()(a,t))}))}return e}_l.tabKey="PropertyView",_l.getTabName=function(){return ba("designer.propertyView.key0002")};var Ml=function(e,t){return"function"==typeof e.value?Il(Il({},e),{},{value:e.value(t)}):e};function Sl(e,t){return function(n){var r,a=Ml(e,n),o=a.value,i=a.index,l=void 0===i?-1:i,c=a.isInstrucAdd,u=void 0!==c&&c,s=n[t.items],d=A()(o)?o:[o];(u||(d=dl(d,s,t)),-1===l)?s.push.apply(s,(0,E.c)(d)):Rt()(s).apply(s,M()(r=[l,0]).call(r,(0,E.c)(d)));return n}}var Al=function(e,t,n){t.length&&n.length&&e.push([t,n])},Tl=function(e,t){var n;return null===(n=e[t.items])||void 0===n||null===(n=z()(n).call(n,(function(e){return!e[t.parentId]})))||void 0===n?void 0:n[t.id]};var Pl=function(e,t,n,r){(0,Ha.GU)();var o=n.keywordMapping||{},i=[],l=e||{},u=t||{id:"",items:[]},s=Tl(t,o),d=[],v=[],p={getMeta:function(){return l},setMeta:function(e){l=e},getData:function(){return u},resetData:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];u=(0,Ha.cp)(u,(function(t){return e}),(function(e,n){t&&Al(d,e,n)})),e[o.items]&&e[o.items].length&&(s=Tl(e,o)),p.fireEvent({type:Ga.Reset,value:e})},pushUndoPatch:function(e,t){(0,Ha.cp)(e,(function(e){return t}),(function(e,t){Al(d,e,t)}))},mergeData:function(e){Ct().isEqual(u,e)||(u=(0,Ha.cp)(u,(function(t){(0,C.c)(t,e)}),(function(e,t){Al(d,e,t)})),e[o.items]&&e[o.items].length&&(s=Tl(e,o)),p.fireEvent({type:Ga.MergeData,value:e}))},addDataChangeListener:function(e){return i.push(e),function(){i=c()(i).call(i,(function(t){return t!==e}))}},fireEvent:function(e){$r.log("dataCtx fireEvt",e,i),f()(i).call(i,(function(t){try{t(e)}catch(e){$r.error(e)}})),r&&r(u,e)},batchActions:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=u;u=(0,Ha.cp)(u,(function(t){var n=j()(e).call(e,(function(e){switch(e.type){case Ja.ADD:return Sl(e,o);case Ja.UPDATE:return function(e,t){return function(n){var r=Ml(e,n).value,o=n[t.items];return f()(r).call(r,(function(e){var r,i=(0,k.c)(e,2),l=i[0],c=i[1],u=z()(o).call(o,(function(e){return e[t.id]===l}));u&&f()(r=a()(c)).call(r,(function(e){if(e===t.key){var r=n[t.items];new(Pt())(j()(r).call(r,(function(e){return e[t.key]}))).has(c[e])||(u[e]=c[e])}else u[e]=c[e]}))})),n}}(e,o);case Ja.DELETE:return function(e,t){return function(n){var r=Ml(e,n).value,a=n[t.items],o=A()(r)?r:[r];return f()(o).call(o,(function(e){for(var n,r=c()(n=j()(a).call(a,(function(n){if(n[t.id]===e)return n}))).call(n,Boolean);r.length;)f()(r).call(r,(function(e){var n=Oe()(a).call(a,(function(n){return n[t.id]===(null==e?void 0:e[t.id])}));-1!==n&&Rt()(a).call(a,n,1)})),r=ue()(r).call(r,(function(e,n){var r,o=c()(r=j()(a).call(a,(function(e){if(e[t.parentId]===(null==n?void 0:n[t.id]))return e}))).call(r,Boolean);return M()(e).call(e,o)}),[])})),n}}(e,o);case Ja.PASTE:return Sl(e,o);case Ja.Attr:return function(e,t){return function(t){var n=Ml(e,t).value;return t=ue()(n).call(n,(function(e,n){var r=n.attrName,a=n.value;return r?(t[r]=a,e):e}),t),t}}(e);case Ja.REMOVEPROP:return function(e,t){return function(n){var r,a=Ml(e,n).value,o=(0,k.c)(a,2),i=o[0],l=o[1],c=z()(r=n[t.items]).call(r,(function(e){return e[t.id]===i}));return f()(l).call(l,(function(e){e in c&&delete c[e]})),n}}(e,o);case Ja.DRAG:return function(e,t){return function(n){var r,a,o=Ml(e,n).value,i=o.origin,l=o.targetIndex,u=o.targetParentId,s=A()(i)?i:[i],d=n[t.items],f=[];return d=j()(d).call(d,(function(e){if(x()(s).call(s,e[t.id])){var n=Il(Il({},e),{},(0,b.c)({},t.parentId,u));return f.push(n),(0,Ha.cp)(e,(function(e){return e.__isToDelete=!0,e}))}return e})),Rt()(r=d).apply(r,M()(a=[l+1,0]).call(a,f)),d=c()(d).call(d,(function(e){return!e.__isToDelete})),n[t.items]=d,n}}(e,o);case Ja.CUSTOMUPDATE:return function(e,t){return function(t){return Ml(e,t),t}}(e);case Ja.INSERT:return function(e,t){return function(n){var r=Ml(e,n),a=r.value,o=r.isInstrucAdd,i=void 0!==o&&o,l=a.originId,u=a.targetId,s=a.isPre,d=Bt()(a),v=n[t.items],p=[];if(A()(d)){if(v=c()(v).call(v,(function(e){var n=null==d?void 0:z()(d).call(d,(function(n){return n.Id===e[t.id]}));return!n||(p.push(Il(Il({},e),n)),!1)})),0===p.length){var g=A()(d)?d:[d];g=j()(g).call(g,(function(e){return!e.Key&&e._Type_&&(e.Key=e._Type_.toLowerCase()),e})),i||(g=dl(g,v,t)),p=M()(p).call(p,g)}}else v=c()(v).call(v,(function(e){return e[t.id]!==l&&e[t.parentId]!==l||(p.push(Il({},e)),!1)}));var m,y=[];return u?f()(v).call(v,(function(e){var n,r,a,o;e[t.id]===u?s?(n=y).push.apply(n,M()(r=(0,E.c)(p)).call(r,[e])):(a=y).push.apply(a,M()(o=[e]).call(o,(0,E.c)(p))):y.push(e)})):y=M()(m=[]).call(m,(0,E.c)(v),(0,E.c)(p)),n[t.items]=y,n}}(e,o);default:return function(e){return e}}}));return ue()(n).call(n,(function(e,t){return t(e)}),t)}),(function(e,n){t&&Al(d,e,n)})),n!==u&&p.fireEvent({type:Ga.BatchActions,actions:e,value:u,oldValue:n})},findControl:function(e){var t,n;return A()(e)?c()(t=j()(e).call(e,(function(e){var t;return z()(t=u[o.items]).call(t,(function(t){return t[o.id]===e}))}))).call(t,Boolean):null===(n=u[o.items])||void 0===n?void 0:z()(n).call(n,(function(t){return t[o.id]===e}))},findControlIndex:function(e){var t,n;return A()(e)?c()(t=j()(e).call(e,(function(e){var t;return Oe()(t=u[o.items]).call(t,(function(t){return t[o.id]===e}))}))).call(t,Boolean):Oe()(n=u[o.items]).call(n,(function(t){return t[o.id]===e}))},findControlByCondition:function(e){var t;return c()(t=u[o.items]).call(t,(function(t){return e(t)}))},mapping:function(e){var t;return j()(t=u[o.items]).call(t,(function(t){return e(t)}))},getRootId:function(){return s},resetPatches:function(){v=[],d=[]},canUndo:function(){return d.length>0},canRedo:function(){return v.length>0},undo:function(){var e=d.pop();e&&(v.push(e),$r.log("redoActions",v,e),u=(0,Ha.oz)(u,e[1]),s=Tl(u,o),p.fireEvent({type:Ga.Undo,value:u}))},redo:function(){var e=v.pop();e&&(d.push(e),$r.log("undoActions",d,e),u=(0,Ha.oz)(u,e[0]),s=Tl(u,o),p.fireEvent({type:Ga.Redo,value:u}))},getParentControlId:function(e){var t,n=z()(t=u[o.items]).call(t,(function(t){return t[o.id]===e}));return n?n[o.parentId]:""},getParentControl:function(e){var t,n,r=p.getParentControlId(e);r&&(t=z()(n=u[o.items]).call(n,(function(e){return e[o.id]===r})));return t},getAllSiblings:function(e){var t,n=p.getParentControlId(e),r=[];n&&(r=c()(t=u[o.items]).call(t,(function(e){return!e._Root_&&e[o.parentId]===n})));return(0,E.c)(r)},getPrevSibling:function(e){var t=p.getAllSiblings(e),n=Oe()(t).call(t,(function(t){return t[o.id]===e}))-1;return{control:t[n],index:n}},getNextSibling:function(e){var t=p.getAllSiblings(e),n=Oe()(t).call(t,(function(t){return t[o.id]===e}))+1;return{control:t[n],index:n}},moveControl:function(e,t){var n=u,r=p.getPrevSibling;"forward"===t||"back"===t&&(r=p.getNextSibling);var a=r(e).control;if(a){var i=u[o.items],l=a[o.id],c=Oe()(i).call(i,(function(e){return e[o.id]===l})),s=Oe()(i).call(i,(function(t){return t[o.id]===e}));n!==(u=(0,Ha.cp)(u,(function(e){var t=Il({},a);e[o.items][c]=e[o.items][s],e[o.items][s]=t}),(function(e,t){Al(d,e,t)})))&&p.fireEvent({type:Ga.Move,value:u,oldValue:n})}},isSiblings:function(e,t){return p.getParentControlId(e)===p.getParentControlId(t)},getSubControls:function(e){var t;return c()(t=u[o.items]).call(t,(function(t){return t[o.parentId]===e}))},getAllSubControls:function(e){var t=[];t.push(p.findControl(e));var n=p.getSubControls(e);if(n.length>0){var r=ue()(n).call(n,(function(e,t){var n;return M()(n=[]).call(n,(0,E.c)(e),[t[o.id]])}),[]);t=ue()(r).call(r,(function(e,t){var n;return M()(n=[]).call(n,(0,E.c)(e),(0,E.c)(p.getAllSubControls(t)))}),t)}return t},getAllSubControlIds:function(e){var t=[e],n=p.getSubControls(e);if(n.length>0){var r=ue()(n).call(n,(function(e,t){var n;return M()(n=[]).call(n,(0,E.c)(e),[t[o.id]])}),[]);t=ue()(r).call(r,(function(e,t){var n;return M()(n=[]).call(n,(0,E.c)(e),(0,E.c)(p.getAllSubControlIds(t)))}),t)}return t},getContainerControl:function(e){var t;return(null===(t=zi(Ji(e,n))(l))||void 0===t?void 0:t.IsContainer)||(e=p.findControlByCondition((function(t){var n;return t[o.id]===(null===(n=e)||void 0===n?void 0:n[o.parentId])}))[0]),e},getAllParentControls:function(e,t){for(var n=p.findControl(e),r=t?[n]:[],a=[n];a.length;){var i=a.pop();if(i[o.parentId]){var l=p.findControl(i[o.parentId]);l&&(a.push(l),r.push(l))}}return r},getAllParentControlIds:function(e,t){for(var n=p.findControl(e),r=t?[n[o.id]]:[],a=[n];a.length;){var i=a.pop();if(i[o.parentId]){var l=p.findControl(i[o.parentId]);l&&(a.push(l),r.push(l[o.id]))}}return r},getNextSelectedControlId:function(e){var t=p.getPrevSibling(e).control,n=p.getNextSibling(e).control,r=p.getParentControlId(e),a=e;return t?a=t[o.id]:n?a=n[o.id]:r&&(a=r),a},filterControls:function(e){var t;return c()(t=u[o.items]).call(t,e)},getRealControlType:function(e,t){var n;if(void 0===e)return"";var r=e.ContainerType,a=e._Type_,o=void 0===t?a:e[t]||a;return x()(n=["FlexPanelAp","FieldsetPanelAp"]).call(n,a)&&r||o}};return p},Ll=n(2704),Rl=n.n(Ll);function Dl(e,t){var n=a()(e);if(i()){var r=i()(e);t&&(r=c()(r).call(r,(function(t){return s()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vl(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?f()(n=Dl(Object(a),!0)).call(n,(function(t){(0,b.c)(e,t,a[t])})):p()?m()(e,p()(a)):f()(r=Dl(Object(a))).call(r,(function(t){h()(e,t,s()(a,t))}))}return e}var Fl=function(e){return P().createElement("div",null,P().createElement("span",null,"title"),P().createElement("input",{value:"please input"}))},Bl=function(e){return P().createElement("div",null,P().createElement("span",null,"title"),P().createElement("div",null,"prop text"))};function Kl(e,t){var n=a()(e);if(i()){var r=i()(e);t&&(r=c()(r).call(r,(function(t){return s()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ol(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?f()(n=Kl(Object(a),!0)).call(n,(function(t){(0,b.c)(e,t,a[t])})):p()?m()(e,p()(a)):f()(r=Kl(Object(a))).call(r,(function(t){h()(e,t,s()(a,t))}))}return e}var jl=function(e,t,n,r,a){var o=Tr()(t),i=n(a||e[t.type]);if(i){var l=[];for(var c in e)c in i&&!x()(o).call(o,c)&&(0,ht.isEqual)(i[c],e[c])&&l.push(c);return(0,ht.isEmpty)(l)||r.push(no([e[t.id],l])),r}return r},Ul=function(e){var t=e.globalConfig,n=e.dataReader,r=e.selectionContext,a=e.controlAction,o=e.dataProvider,i=e.dataFactory,l=e.modelFactory,c=e.metaReader,u=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new(rr())((function(e,o){t.preHandle?t.preHandle({dataContext:n,selectionContext:r,globalConfig:t,action:a,dataFactory:i,modelFactory:l,metaReader:c,success:e,fail:o}):e(a)})).then((function(e){var r=t.keywordMapping,a=t.enableDiffDefaultData,i=[];return a&&f()(e).call(e,(function(e){var t,a;(function(e){return e.type===Ja.ADD}(e)||e.type===Ja.PASTE)&&f()(t=A()(e.value)?e.value:[e.value]).call(t,(function(e){i=jl(e,r,c.getDefaultData,i)}));e.type===Ja.UPDATE&&"function"!=typeof e.value&&f()(a=e.value).call(a,(function(e){var t=(0,k.c)(e,2),a=t[0],o=t[1],l=n.findControl(a);l&&(i=jl((0,C.c)({},o,(0,b.c)((0,b.c)({},r.type,l[r.type]),r.id,l[r.id])),r,c.getDefaultData,i))}));return e})),o.batchActions(M()(e).call(e,i),u),e})).catch((function(e){throw new Error(e)}))},Hl=function(e,t){return function(n,r,a,o,i){var l=function(e,t){var n=t.keywordMapping;return Ol(Ol({},e),{},{getData:function(){return e.getData()},getMeta:function(){return e.getMeta()},findControl:function(t){return e.findControl(t)},findControlByCondition:function(t){return e.findControlByCondition(t)},findControlType:function(t){var r=e.findControl(t);return A()(r)?j()(r).call(r,(function(e){return e[n.type]})):r[n.type]},getRootId:function(){return e.getRootId()}})}(e,n);return{getData:function(){return e.getData()},getMeta:function(){return e.getMeta()},resetData:function(t,n){return e.resetData(t,n)},resetPatches:function(){return e.resetPatches()},pushUndoPatch:function(t,n){return e.pushUndoPatch(t,n)},addControl:function(i){return Ul({globalConfig:n,dataReader:l,selectionContext:r,controlAction:i,dataProvider:e,dataFactory:a,modelFactory:o,metaReader:t})},deleteControl:function(i){return Ul({globalConfig:n,dataReader:l,selectionContext:r,controlAction:i,dataProvider:e,dataFactory:a,modelFactory:o,metaReader:t},!(arguments.length>1&&void 0!==arguments[1])||arguments[1])},batchUpdateControlPropertyValues:function(i){return Ul({globalConfig:n,dataReader:l,selectionContext:r,controlAction:i,dataProvider:e,dataFactory:a,modelFactory:o,metaReader:t},!(arguments.length>1&&void 0!==arguments[1])||arguments[1])},attrActions:function(i){return Ul({globalConfig:n,dataReader:l,selectionContext:r,controlAction:i,dataProvider:e,dataFactory:a,modelFactory:o,metaReader:t})},swapControl:function(i){return Ul({globalConfig:n,dataReader:l,selectionContext:r,controlAction:i,dataProvider:e,dataFactory:a,modelFactory:o,metaReader:t})},insertControl:function(i){return Ul({globalConfig:n,dataReader:l,selectionContext:r,controlAction:i,dataProvider:e,dataFactory:a,modelFactory:o,metaReader:t})},customUpdateState:function(i){return Ul({globalConfig:n,dataReader:l,selectionContext:r,controlAction:i,dataProvider:e,dataFactory:a,modelFactory:o,metaReader:t})},findControl:function(t){return e.findControl(t)},findControlIndex:function(t){return e.findControlIndex(t)},findControlByCondition:function(t){return e.findControlByCondition(t)},mapping:function(t){return e.mapping(t)},getRootId:function(){return e.getRootId()},addDataChangeListener:function(t){return e.addDataChangeListener(t)},canUndo:function(){return e.canUndo()},canRedo:function(){return e.canRedo()},undo:function(){return e.undo()},redo:function(){return e.redo()},getParentControlId:function(t){return e.getParentControlId(t)},getParentControl:function(t){return e.getParentControl(t)},getAllSiblings:function(t){return e.getAllSiblings(t)},getPrevSibling:function(t){return e.getPrevSibling(t)},getNextSibling:function(t){return e.getNextSibling(t)},moveControl:function(t,n){return e.moveControl(t,n)},isSiblings:function(t,n){return e.isSiblings(t,n)},getSubControls:function(t){return e.getSubControls(t)},getPropertyValue:function(t,n){return(0,ht.property)(n)(e.findControl(t))},getAllSubControls:function(t){return e.getAllSubControls(t)},getAllSubControlIds:function(t){return e.getAllSubControlIds(t)},getContainerControl:function(t){return e.getContainerControl(t)},getAllParentControls:function(t,n){return e.getAllParentControls(t,n)},getAllParentControlIds:function(t,n){return e.getAllParentControlIds(t,n)},getNextSelectedControlId:function(t){return e.getNextSelectedControlId(t)},filterControls:function(t){return e.filterControls(t)},getRealControlType:function(t,n){return e.getRealControlType(t,n)}}}};var zl=function(e){return{getViewActiveKey:function(t){var n,r,a;return t?null===(n=e.current)||void 0===n||null===(n=n[t])||void 0===n?void 0:n.activeKey:{left:null===(r=e.current)||void 0===r||null===(r=r.left)||void 0===r?void 0:r.activeKey,right:null===(a=e.current)||void 0===a||null===(a=a.right)||void 0===a?void 0:a.activeKey}},setViewActiveKey:function(t){return function(n){var r,a=null===(r=e.current)||void 0===r||null===(r=r[t])||void 0===r?void 0:r.setTabKey;null==a||a(n)}},getViewHideState:function(t){var n,r,a,o;return t?null===(n=e.current)||void 0===n||null===(n=n[t])||void 0===n?void 0:n.hide:{left:null===(r=e.current)||void 0===r||null===(r=r.left)||void 0===r?void 0:r.hide,right:null===(a=e.current)||void 0===a||null===(a=a.right)||void 0===a?void 0:a.hide,top:null===(o=e.current)||void 0===o||null===(o=o.top)||void 0===o?void 0:o.hide}},setViewHideState:function(t){return function(n){var r,a=null===(r=e.current)||void 0===r||null===(r=r[t])||void 0===r?void 0:r.setHide;a&&(null==a||a(n))}},getViewVisibleKeys:function(t){var n;return(null===(n=e.current)||void 0===n||null===(n=n[t])||void 0===n?void 0:n.getViewKeys())||[]},setViewsVisibleSetting:function(t){return function(n){var r,a=null===(r=e.current)||void 0===r||null===(r=r[t])||void 0===r?void 0:r.setViews;null==a||a((0,b.c)({},t,n))}}}};var Wl=function(e){return e.Info="info",e.Warn="warn",e.Error="error",e.Validate="validate",e.Customer="customer",e}(Wl||{}),ql=function(e){return e.Add="add",e.Remove="remove",e.Reset="reset",e}(ql||{}),Gl=function(){function e(){(0,Pr.c)(this,e),(0,b.c)(this,"listeners",void 0),(0,b.c)(this,"messageList",void 0),this.messageList=[],this.listeners=[]}return(0,Lr.c)(e,[{key:"addDataChangeListener",value:function(e){var t=this;return this.listeners.push(e),function(){var n;t.listeners=c()(n=t.listeners).call(n,(function(t){return e!==t}))}}},{key:"getMessage",value:function(e){var t;return e?c()(t=this.messageList).call(t,(function(t){return t.type===e})):this.messageList}},{key:"addMessage",value:function(e){var t;("string"==typeof e&&(e={type:Wl.Info,content:e}),A()(e))?(t=this.messageList).push.apply(t,(0,E.c)(e)):this.messageList.push(e);this.fireEvent(ql.Add,e)}},{key:"removeMessage",value:function(e){var t,n=A()(e)?e:[e];this.messageList=c()(t=this.messageList).call(t,(function(e){return!x()(n).call(n,e)})),this.fireEvent(ql.Remove,e)}},{key:"reset",value:function(){this.messageList=[],this.fireEvent(ql.Reset,[])}},{key:"fireEvent",value:function(e,t){var n;f()(n=this.listeners).call(n,(function(n){try{n(e,t)}catch(e){}}))}}]),e}();navigator.userAgent.match(/Trident\/(\d+)/)&&((0,Ha.uG)(),(0,Ha.Gu)(!0));var Jl=(0,T.memo)((0,T.forwardRef)((function(e,t){var n=(0,T.useContext)(Ur),r=n.getPrefixCls,o=n.prefixCls,i=function(e,t,n){var r=Hr[e],a=t&&t[e]||{};return(0,C.c)({},r,a,n||{})}("Kdesigner",n.compDefaultProps,e),l=i.globalConfig,u=void 0===l?{}:l,s=i.prefixCls,d=i.data,v=void 0===d?{}:d,p=i.onData,g=i.onApi,m=i.dataFactory,y=i.modelFactory,h=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,C.c)({Controls:[]});return f()(e=a()(t)).call(e,(function(e){var r;"Categories"===e?(n[e]=[],f()(r=t[e]).call(r,(function(t){var r,o={};f()(r=a()(t)).call(r,(function(e){var r;"Controls"===e?f()(r=t[e]).call(r,(function(e){n.Controls.push((0,C.c)({},e,{CategoryId:t.Id}))})):o[e]=t[e]})),n[e].push(o)}))):n[e]=t[e]})),n}(i.meta),b=(0,T.useMemo)((function(){return function(e){var t=e.Controls,n=void 0===t?[]:t;return ue()(n).call(n,(function(e,t){var n=t.Id,r=(t.Properties,(0,kt.c)(t,al)),a={};for(var o in r)a[Ct().camelCase(o)]=r[o];return e[n]=a,e}),{})}(h)}),[h]),_=r&&r(o,"kdesigner",s),w=(0,T.useMemo)((function(){return function(e){return(0,C.c)({},ro,e||{})}(u)}),[u]),N=(0,T.useRef)({}),I=(0,T.useState)((function(){return function(e){var t=[],n=[],r={setSelect:function(e){if(e){e=A()(e)?e:[e];var t=K()(n).call(n);n=e,r.fireEvent({type:Wa.Reset,value:n,oldValue:t})}},getSelection:function(){return n},getActiveSelectedId:function(){return("first"===e.activeSelectedMode?Ct().first:Ct().last)(n)},appendSelect:function(e){var t=K()(n).call(n);f()(e).call(e,(function(e){x()(n).call(n,e)||n.push(e)})),r.fireEvent({type:Wa.SelectChange,value:n,oldValue:t})},addSelectChangeListener:function(e){return t.push(e),function(){t=c()(t).call(t,(function(t){return t!==e}))}},fireEvent:function(e){$r.log("selectCtx fireEvt",e,t),f()(t).call(t,(function(t){try{t(e)}catch(e){$r.error(e)}}))}};return r}(w)})),S=(0,k.c)(I,1)[0],L=(0,T.useState)((function(){return function(e){var t=[],n={},r={replaceError:function(e){var t=Vl({},n);n=e,r.fireEvent({type:Qa.Replace,value:n,oldValue:t})},setError:function(e){if(e){var t=Vl({},n);n=Vl(Vl({},n),e),r.fireEvent({type:Qa.Reset,value:n,oldValue:t})}},deleteError:function(e){if(null!=e&&e.length){var t=Rl()(n);f()(e).call(e,(function(e){delete t[e]}));var a=n;n=t,r.fireEvent({type:Qa.Delete,value:n,oldValue:a})}},clearError:function(){var e=Vl({},n);n={},r.fireEvent({type:Qa.Clear,value:n,oldValue:e})},getError:function(e){return e?n[e]||null:n},addErrorChangeListener:function(e){return t.push(e),function(){t=c()(t).call(t,(function(t){return t!==e}))}},fireEvent:function(e){$r.log("error fireEvt",e,t),f()(t).call(t,(function(t){try{t(e)}catch(e){$r.error(e)}}))}};return r}()})),R=(0,k.c)(L,1)[0],D=(0,T.useState)((function(){return new Gl})),V=(0,k.c)(D,1)[0],F=(0,T.useMemo)((function(){return fl(h)}),[h]),B=(0,T.useMemo)((function(){return vl(h,w)}),[h]),O=(0,T.useMemo)((function(){return rl(h,w)}),[h]),U=(0,T.useState)((function(){return Pl(h,v,w,p)})),H=(0,k.c)(U,1)[0],z=(0,T.useMemo)((function(){return H.setMeta(h),Hl(H,O)(w,S,m||B,y||F,R)}),[h]),W=(0,T.useCallback)((function(){return J.current}),[]),q=(0,T.useState)((function(){return e=new oi,{getAliasData:function(){return e.getAliasData()},hasAliasDataPropValue:function(t,n,r){return e.hasAliasDataPropValue(t,n,r)},getAliasDataPropValue:function(t,n,r){return e.getAliasDataPropValue(t,n,r)},addAliasDataChangeListener:function(t){return e.addAliasDataChangeListener(t)},setAliasDataPropValue:function(t){return e.setAliasDataPropValue(t)}};var e})),G=(0,k.c)(q,1)[0];(0,T.useEffect)((function(){"function"==typeof g&&g(function(e){var t=e.meta,n=e.data,r=e.selection,a=e.error;return{meta:t,data:n,selection:r,getNode:e.getNode,aliasData:e.aliasData,message:e.message,dataFactory:e.dataFactory,views:e.views,error:a}}({meta:O,data:z,selection:S,error:R,getNode:W,aliasData:G,message:V,dataFactory:B,views:zl(N)}))}),[h]),(0,T.useLayoutEffect)((function(){var e=z.addDataChangeListener((function(){var e=S.getSelection(),t=c()(e).call(e,(function(e){return!!z.findControl(e)}));t.length!==e.length&&S.setSelect(t)}));return function(){e&&e()}}),[]);var J=(0,T.useRef)(null),Q=t;(0,T.useImperativeHandle)(Q,(function(){return{attrActions:function(e){z.attrActions(to(A()(e)?e:[e]))},selectionContext:S,dataContext:z,errorContext:R,getNode:W}}),[]);var Z=(0,T.useState)((function(){var e=function(){var e,t={},n=function(e,n,r){var a;t[r?M()(a="".concat(r,"-")).call(a,e):e]=n};return f()(e=a()(ki)).call(e,(function(e){n(e,ki[e])})),{rigistPropertyEditor:n,getPropertyEditor:function(e,n){var r;return t[M()(r="".concat(n,"-")).call(r,e)]||t[e]}}}();if(e.rigistPropertyEditor("readonly",Bl),e.rigistPropertyEditor("text",Fl),w.getPropertyEditors){var t=w.getPropertyEditors();f()(t).call(t,(function(t){e.rigistPropertyEditor.apply(e,(0,E.c)(t))}))}return w.getValue&&(e.getValue=w.getValue),e})),Y=(0,k.c)(Z,1)[0];(0,T.useEffect)((function(){var e=w.getCustomActions;if(e){var t=e(),n=t.dataActions,r=void 0===n?[]:n,a=t.propertyActions,o=void 0===a?[]:a,i=Ai.rigistAction;f()(r).call(r,(function(e){i(Si).apply(void 0,(0,E.c)(e))})),f()(o).call(o,(function(e){i(Mi).apply(void 0,(0,E.c)(e))}))}}),[]);var X=(0,T.useMemo)((function(){var e,t={};return f()(e=a()(w)).call(e,(function(e){var n;x()(n=["getPropertyEditor","getValue","nodeRef","viewsStateRef"]).call(n,e)||(t[e]=w[e])})),t.getNode=W,t.message=V,t.viewsStateRef=N,t}),[W,V,N,w]),$=(0,T.useMemo)((function(){var e,t,n,r={control:bo},a={property:_l},o={};return w.getViews&&(w.getViews("left")&&(r=Zl((0,C.c)({},r,w.getViews("left")))),w.getViews("right")&&(a=Zl((0,C.c)({},a,w.getViews("right")))),w.getViews("main")&&(o=Zl((0,C.c)({},o,w.getViews("main"))))),{leftViews:j()(e=Tr()(r)).call(e,(function(e){var t;return P().createElement(e,{key:e.tabKey,data:v,meta:h,tabKey:e.tabKey,tabName:(null===(t=e.getTabName)||void 0===t?void 0:t.call(e))||e.tabName})})),mainViews:j()(t=Tr()(o)).call(t,(function(e){var t;return P().createElement(e,{key:e.tabKey,data:v,meta:h,tabKey:e.tabKey,tabName:(null===(t=e.getTabName)||void 0===t?void 0:t.call(e))||e.tabName})})),rightViews:j()(n=Tr()(a)).call(n,(function(e){var t;return P().createElement(e,{key:e.tabKey,data:v,meta:h,tabKey:e.tabKey,tabName:(null===(t=e.getTabName)||void 0===t?void 0:t.call(e))||e.tabName})}))}}),[v,h,w]),ee=(0,T.useMemo)((function(){return{dataFactory:m||B,modelFactory:y||F,metaApi:O,controlMetaInfo:b}}),[m,B,y,F,O,b]),te=(0,T.useState)(!0),ne=(0,k.c)(te,2),re=ne[0],ae=ne[1];return(0,T.useEffect)((function(){var e,t;ae(!1),w.getLangMsg&&(e="getLangMsg",t=w.getLangMsg,Ea[e]=t)}),[]),!re&&P().createElement(Ql,{className:_,ref:J},P().createElement(zr.Provider,{value:X},P().createElement(za.Provider,{value:ee},P().createElement(Zr.Provider,{value:z},P().createElement(Qr.Provider,{value:S},P().createElement(ko.Provider,{value:R},P().createElement(_i.Provider,{value:Y},P().createElement(ii.Provider,{value:G},P().createElement(Ua,null),P().createElement("div",{className:"".concat(_,"-root-main")},P().createElement(Ba,{views:$.leftViews}),P().createElement(Ka,{views:$.mainViews}),P().createElement(ja,{views:$.rightViews}))))))))))}))),Ql=(0,T.memo)((0,T.forwardRef)((function(e,t){return P().createElement("div",{className:"".concat(e.className,"-root"),ref:t,tabIndex:-1},e.children)})));function Zl(e){var t;return f()(t=a()(e)).call(t,(function(t){null==e[t]&&delete e[t]})),e}Jl.displayName="KDesigner";var Yl,Xl="Default",$l=((0,b.c)({RadioGroupField:[-1,1,3]},Xl,[-1,0,1,2]),(0,b.c)({ComboField:[0,1,2],MulComboField:[0,2]},Xl,[0,2]),n(31408)),ec=n.n($l),tc="Type",nc="Categories",rc="ElementTypes",ac="Properties",oc="Editor",ic=["condition","action"];function lc(e,t){var n=a()(e);if(i()){var r=i()(e);t&&(r=c()(r).call(r,(function(t){return s()(e,t).enumerable}))),n.push.apply(n,r)}return n}function cc(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?f()(n=lc(Object(a),!0)).call(n,(function(t){(0,b.c)(e,t,a[t])})):p()?m()(e,p()(a)):f()(r=lc(Object(a))).call(r,(function(t){h()(e,t,s()(a,t))}))}return e}(0,Ha.uG)();var uc,sc,dc=new Ha.uM({useProxies:!1,autoFreeze:!1}),fc=dc.produce,vc=(dc.setAutoFreeze,null),pc=["Container"],gc={},mc=new(Pt()),yc="",hc={},Cc=(new(Pt()),new(Pt())),Ec=new(Pt()),bc=new(Pt()),kc=new(Pt()),_c={text:"Input",refcombo:"RefCombo",checkbox:"Switch",btnedit:"CustomInput",integer:"Stepper",combo:"Select",date:"date",ecombo:"ECombo",daterange:"DateRange",refmcombo:"RefMCombo",decimal:"Stepper",color:"Color",mcombo:"CheckBoxGroup",dimension:"Dimension",border:"Border",cssedit:"CssEdit",position:"Position",editcombo:"EditCombo",slider:"slider",fontbold:"FontBold",tabselect:"Tab",radius:"Radius",radio:"Radio",refeditbtn:"RefEditBtn"},xc={lockproperty:"LockProperty",hideproperty:"HideProperty",resetproperty:"SetPropertyValue",setpropertyvalue:"SetPropertyValue"},wc=function(e){return e?e.replace(/EntityType/g,"FieldType").replace(/&&/g," and ").replace(/!/g," not ").replace(/\|\|/g," or ").replace(/isChange\(\S+\)/g,"Change"):e},Nc=function(e,t){var n=e.name,r=e.args,a=e.affectedByParent,o=e.conditionTypes;switch(n){case"lockproperty":case"hideproperty":return{Name:xc[n],Args:{Key:r},AffectedByParent:a,ConditionTypes:o};case"setpropertyvalue":return{Name:xc[n],Args:{Key:j()(r).call(r,(function(e){return e.property})),Value:j()(r).call(r,(function(e){return e.value}))}};case"resetproperty":return{Name:xc[n],Args:{Key:j()(r).call(r,(function(e){return e})),Value:j()(r).call(r,(function(e){}))}};default:return null}},Ic={Id:"anonyoumsMockId",Name:"anonyoumsMockName",DefaultCollapse:!1,Layout:"anonyoumsMockLayout"},Mc=function(e){return(0,C.c)({},Ic,{Nodes:e})},Sc=function(e,t){return(0,ht.isUndefined)(e)||f()(n=a()(e)).call(n,(function(n){var r=e[n];(0,ht.isUndefined)(r)||(t[n]=r)})),t;var n},Ac=(Yl={},(0,b.c)((0,b.c)((0,b.c)((0,b.c)((0,b.c)((0,b.c)((0,b.c)((0,b.c)((0,b.c)((0,b.c)(Yl,"_Type_",tc),rc,"Controls"),nc,[nc,function(e){var t=e.originProp,n=(e.path,e.keyMap),r=e.getLangMsg,a=j()(t).call(t,(function(e){var t=e.ElementTypes,n=void 0===t?[]:t,r=e.BaseType,a=e.Visible,o=(e.Id,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return ue()(t).call(t,(function(e,t){return t(e)}),e)}}((function(e){var t=["FormAp","BillFormAp","ListFormAp","BasedataFormAp","MobileBillFormAp","MobileListFormAp","MobileFormAp","MainEntity","BaseEntity","BillEntity","ReportEntity","ParameterEntity","PublicParameterEntity","BillEntity","EntryEntity","SubEntryEntity","TreeEntryEntity","TreeSubEntryEntity","ReportFormAp"],n=["NoCodeEntryEntity","NoCodeRefBillTable","NoCodeGridPanelAp","NoCodeGroupContainerAp","NoCodeGroupItemAp","BizBtnFlexPanelAp"];if(vc){var r,a=z()(r=vc.Items).call(r,(function(e){return!e.ParentId}));t.push(null==a?void 0:a._Type_)}return t.push("EntryAp"),x()(t).call(t,e.Id)||x()(n).call(n,e.Id)?Sc({IsContainer:!0},e):e}),(function(e){if((0,ht.isEmpty)(hc))return e;var t=e.ElementGroupId;return void 0!==t&&hc[t]?Sc({Visible:hc[t].Visible},e):e})));return r&&x()(pc).call(pc,r)?cc(cc({},e),{},{ElementTypes:j()(n).call(n,(function(e){return Sc({BaseId:r,Visible:a,IsContainer:!0},o(e))}))}):cc(cc({},e),{},{ElementTypes:j()(n).call(n,(function(e){return Sc({BaseId:r,Visible:a},o(e))}))})}));return Lc(Ac({keyMap:n,meta:a,getLangMsg:r}))}]),ac,[ac,function(e){var t=e.originProp,n=e.path,r=e.pathLength,a=(e.inputMeta,e.keyMap),o=e.getLangMsg;if(n[r-3]===rc){var i,l=c()(i=j()(t).call(t,(function(e){var t,n,r,a=e.PropertyName;if(!e.Editor)return kc.add(M()(n=M()(r="".concat(e.PropertyName,"^^")).call(r,e.Name,"^^")).call(n,Qe()(e))),(0,C.c)(e,{Editor:{Type:"Input",DataType:"String",Visible:!0}});"Width"===a&&(e.Name=(null==o?void 0:o("designer.editor.key0016"))||"尺寸设置",e.Description=(null==o?void 0:o("designer.editor.key0017"))||"设置控件的宽度与高度"),"ForeColor"===a&&(e.Name=(null==o?void 0:o("designer.editor.key0018"))||"颜色设置"),"FontSize"===a&&(e.Name=(null==o?void 0:o("designer.editor.key0019"))||"字体设置"),e.Tips=e.Description?M()(t="".concat(e.Description,"[")).call(t,a,"]"):"";var i=function(e){if(!(0,ht.isEmpty)(gc)){var t=e.GroupId;if(t&&gc[t])return gc[t].Visible}}(e);return e.Visible=(0,ht.isUndefined)(i)?!!(0,ht.isUndefined)(e.Visible)||!!e.Visible:i,e}))).call(i,Boolean);return function(e){var t;if((0,ht.isEmpty)(gc))return[Mc(e)];var n=(0,E.c)(mc),r=(0,ht.groupBy)(e,"GroupId"),a=c()(e).call(e,(function(e){var t=e.GroupId;return!(yc&&!t||x()(n).call(n,t))})),o=c()(t=j()(n).call(n,(function(e){var t,n,a=r[e];return yc&&e===yc&&(a=null!==(t=a)&&void 0!==t&&t.length?M()(n=[]).call(n,(0,E.c)(a),(0,E.c)(r.undefined)):r.undefined),a?cc(cc(cc({},Ic),gc[e]),{},{Id:e,Nodes:fc(a,(function(t){f()(t).call(t,(function(t){"style"===gc[e].Layout&&(t.TabGroup="style")}))}))}):null}))).call(t,Boolean);return a.length,o}(Lc(Ac({meta:l,keyPath:[ac],keyMap:a,getLangMsg:o})))}}]),"PropertyName","Id"),"Action",["Actions",function(e){var t=e.originProp,n=e.path,r=e.pathLength,a=(e.inputMeta,e.keyMap),o=e.getLangMsg;if(n[r-3]===ac){var i=t.items;return null==i?void 0:j()(i).call(i,(function(e){var t=e.condition,n=e.action,r=void 0===n?{}:n,i=(0,kt.c)(e,ic);Ec.add(t),(null==r?void 0:r.name)&&bc.add(r.name);var l={};(0,ht.isEmpty)(i)||(0,C.c)(l,Lc(Ac({meta:i,keyPath:[],isDeep:!1,keyMap:a,getLangMsg:o})));var c=Nc(r);return(0,C.c)(l,{Condition:wc(t),Todo:c?[c]:[]})}))}}]),"type",[tc,function(e){var t=e.originProp,n=e.path,r=e.pathLength;e.inputMeta,e.keyMap;if(n[r-2]===oc)return Cc.add(t),_c[t]||t}]),"value",["Value",function(e){var t=e.originProp,n=e.path,r=e.pathLength;e.inputMeta,e.keyMap;if(n[r-2]===oc)return t}]),oc,[oc,function(e){var t=e.originProp,n=e.path,r=e.pathLength,a=(e.inputMeta,e.keyMap),o=e.getLangMsg;if(n[r-3]===ac){var i=t.type,l=Lc(Ac({meta:t,keyPath:[oc],isDeep:!0,keyMap:a,getLangMsg:o}));if("integer"===i)return cc(cc({},l),{},{DataType:"Integer"});if("decimal"===i)return cc(cc({},l),{},{DataType:"Decimal"});if("checkbox"===i)return cc(cc({},l),{},{DataType:"Boolean"});if("border"===i)return cc(cc({},l),{},{DataType:"Object"});var c=["ecombo","dataFill","datascope","filter","orderby","calcSetting","expression","userSelect","requestBody","parameterSetting"];return x()(c).call(c,i)?cc({},l):cc(cc({},l),{},{DataType:"String"})}}]),"default",["Default",function(e){var t=e.originProp,n=e.path,r=e.pathLength;e.inputMeta,e.keyMap;if(n[r-2]===oc)return t}]),(0,b.c)((0,b.c)(Yl,"length",["MaxLength",(uc=oc,function(e){var t=e.originProp,n=e.path,r=e.pathLength;if(n[r-2]===uc)return sc&&sc({originProp:t,path:n,pathLength:r}),t})]),"items",["Enum",function(e){var t=e.originProp,n=e.path,r=e.pathLength;e.inputMeta,e.keyMap;if(n[r-3]===oc){var a=t.id,o=t.name;a&&o&&(0,C.c)({},{Value:a,Id:a,Name:o})}}]),function(e){var t=e.meta,n=e.keyMap,r=e.keyPath,a=void 0===r?[]:r,o=e.isDeep,i=void 0===o||o,l=e.inputMeta,c=e.getLangMsg;return Tc({meta:t,keyPath:a,isDeep:i,inputMeta:l,keyMap:n,getLangMsg:c})}),Tc=function e(t){var n=t.meta,r=t.keyPath,a=void 0===r?[]:r,o=t.isDeep,i=void 0===o||o,l=t.inputMeta,c=t.keyMap,u=t.getLangMsg,s=Pc({meta:n,keyPath:a,isReturnOriginVal:!1,inputMeta:l=l||n,keyMap:c,getLangMsg:u});if(!(0,ht.isUndefined)(s))return s;if(A()(n)){var d=j()(n).call(n,(function(t,n){return i?Lc(e({meta:t,keyPath:M()(a).call(a,"".concat(n)),isDeep:i,inputMeta:l,keyMap:c,getLangMsg:u})):t}));return[Rc((0,ht.last)(a),c),d]}if((0,ht.isObject)(n)){var f,v=ue()(f=ec()(n)).call(f,(function(t,n){var r=(0,k.c)(n,2),o=r[0],s=r[1],d=i?e({meta:s,keyPath:M()(a).call(a,o),isDeep:i,inputMeta:l,keyMap:c,getLangMsg:u}):[Rc(o,c),s],f=(0,k.c)(d,2),v=f[0],p=f[1];return t[v]=p,t}),{});return[Rc((0,ht.last)(a),c),v]}return Pc({meta:n,keyPath:a,isReturnOriginVal:!0,inputMeta:l,keyMap:c,getLangMsg:u})},Pc=function(e){var t=e.meta,n=e.keyPath,r=void 0===n?[]:n,a=e.isReturnOriginVal,o=e.inputMeta,i=e.keyMap,l=e.getLangMsg,c=(0,ht.last)(r);if(c){var u=A()(i[c])?i[c]:[Rc(c,i)],s=(0,k.c)(u,2),d=s[0],f=s[1];if((0,ht.isFunction)(f)){var v=f({originProp:t,path:r,pathLength:r.length,inputMeta:o,keyMap:i,getLangMsg:l});if(!(0,ht.isUndefined)(v))return[d,v]}return a?[d,t]:void 0}},Lc=function(e){return e[1]},Rc=function(e,t){return e?(A()(t[e])?t[e][0]:t[e])||(0,ht.upperFirst)(e):""};var Dc,Vc,Fc,Bc,Kc,Oc,jc,Uc,Hc,zc,Wc,qc,Gc,Jc,Qc,Zc,Yc,Xc,$c,eu,tu,nu,ru,au,ou,iu,lu,cu,uu,su,du,fu,vu,pu,gu,mu,yu,hu,Cu,Eu,bu,ku,_u,xu,wu,Nu,Iu,Mu,Su,Au,Tu,Pu=n(59e3);Dc||(Dc=(0,Pu.c)(["jichuziliaoleixing"])),Vc||(Vc=(0,Pu.c)(["danjuliebiao"])),Fc||(Fc=(0,Pu.c)(["kapianbujurongqi"])),Bc||(Bc=(0,Pu.c)(["liebiaodongtaiwenben"])),Kc||(Kc=(0,Pu.c)(["biaogeliebiaoziduan"])),Oc||(Oc=(0,Pu.c)(["liebiaocaozuolie"])),jc||(jc=(0,Pu.c)(["kapiantupianziduan"])),Uc||(Uc=(0,Pu.c)(["kapianshijianziduan"])),Hc||(Hc=(0,Pu.c)(["kapianxuanzebiaozhi"])),zc||(zc=(0,Pu.c)(["biaogeliebiaoziduan"])),Wc||(Wc=(0,Pu.c)(["biaogeliebiaoziduan"])),qc||(qc=(0,Pu.c)(["riqixuanze"])),Gc||(Gc=(0,Pu.c)(["biaogewenben"])),Jc||(Jc=(0,Pu.c)(["biaogezhengshu"])),Qc||(Qc=(0,Pu.c)(["biaogexiaoshu"])),Zc||(Zc=(0,Pu.c)(["biaogeriqi"])),Yc||(Yc=(0,Pu.c)(["biaogeshijian"])),Xc||(Xc=(0,Pu.c)(["biaogejine"])),$c||($c=(0,Pu.c)(["gaojimianbangongjulan"])),eu||(eu=(0,Pu.c)(["gongjulan"])),tu||(tu=(0,Pu.c)(["fudongcaidanmianban"])),nu||(nu=(0,Pu.c)(["fudongcaidanxiang"])),ru||(ru=(0,Pu.c)(["shouyedaohangkongjian"])),au||(au=(0,Pu.c)(["danxingyufanganguolvziduan"])),ou||(ou=(0,Pu.c)(["riqiguolvziduan"])),iu||(iu=(0,Pu.c)(["fuxuankuangguolvziduan"])),lu||(lu=(0,Pu.c)(["fuxuankuangzuziduan"])),cu||(cu=(0,Pu.c)(["tiaoxingtu"])),uu||(uu=(0,Pu.c)(["zhuzhuangtu"])),su||(su=(0,Pu.c)(["leidatu"])),du||(du=(0,Pu.c)(["tongyongtu"])),fu||(fu=(0,Pu.c)(["yibiaopan"])),vu||(vu=(0,Pu.c)(["yingyongdaohangcaidan"])),pu||(pu=(0,Pu.c)(["ziduanbujumianban"])),gu||(gu=(0,Pu.c)(["ziduanzuherongqi"])),mu||(mu=(0,Pu.c)(["lunbobujurongqi"])),yu||(yu=(0,Pu.c)(["yeqian"])),hu||(hu=(0,Pu.c)(["gaojimianbanzhaiyaorongqi"])),Cu||(Cu=(0,Pu.c)(["gaojimianbanzirongqi"])),Eu||(Eu=(0,Pu.c)(["biaogeshitu"])),bu||(bu=(0,Pu.c)(["kapianshitu"])),ku||(ku=(0,Pu.c)(["qingfenxishitu"])),_u||(_u=(0,Pu.c)(["kapian"])),xu||(xu=(0,Pu.c)(["kapianfenlushitu"])),wu||(wu=(0,Pu.c)(["kapian"])),Nu||(Nu=(0,Pu.c)(["gudingkapian"])),Iu||(Iu=(0,Pu.c)(["pingzhenghao"])),Mu||(Mu=(0,Pu.c)(["qingfenxikapian"])),Su||(Su=(0,Pu.c)(["kuaijiesousuoshitu"])),Au||(Au=(0,Pu.c)(["biaogetupian"])),Tu||(Tu=(0,Pu.c)(["biaogefujian"]));var Lu=["switchValue","onSwitchChange"],Ru=(0,T.memo)((function(e){var t=e.switchValue,n=e.onSwitchChange,r=(0,kt.c)(e,Lu),a=r.className;return P().createElement("div",{className:"".concat(a,"-title-switch")},P().createElement(Po,r),P().createElement(D.Switch,{checked:t,onChange:n}))}));Ru.displayName="NameTipSwitchWrapper";var Du=function(e){var t=e.handleChange,n=e.onCustomInputClick,r=e.value,a=e.className,o=e.locked,i=e.Editor,l=e.Name,c=e.field,u=(e.Id,e.Tips),s=(e.ReadOnly,e.dataContext),d=e.id,f=i.NameHidden,v=i.MaxLength,p=(i.Min,i.Max,i.Required),g=(i.Type,i.Placeholder,i.AutoSize,i.Count,i.CountPosition,i.CanResize,i.Apply),m=i.RefId,y=c._Type_,h=c.Inherit,C=void 0!==h&&h,E=g.Allowinheritref,_=void 0===E||E,w=(0,T.useContext)(L.GlobalConfigContext),I=(w.showMessage,w.onCustomInputClick),M=w.controlsAddedByForntEnd,S=(0,T.useContext)(V).config,A=v?"".concat((0,L.getLangMsg)({key:"entityd.refEditBtnEditor.key0001",variables:{MaxLength:v}})):"",R=(0,T.useState)(r||""),F=(0,k.c)(R,2),B=F[0],K=F[1],O=(0,T.useState)(!1),j=(0,k.c)(O,2),U=j[0],H=j[1],z=(0,T.useState)(),W=(0,k.c)(z,2),q=W[0],G=W[1],J=(0,T.useState)((0,L.getLangMsg)("entityd.refEditBtnEditor.key0002")),Q=(0,k.c)(J,2),Z=Q[0],Y=Q[1],X=(0,T.useState)(!1),$=(0,k.c)(X,2),ee=$[0],te=$[1],ne=(0,T.useRef)((null==S?void 0:S.kdesignerRefType)||"1"),re=(0,T.useRef)(null),ae=(0,T.useRef)(null);(0,T.useEffect)((function(){if(_||!C){var e,t=!g||x()(e=g.Field).call(e,y),n="3"!==ne.current;te(t&&n)}else te(!1)}),[]),(0,T.useEffect)((function(){U||r===B||K(r)}),[r,U,B]),(0,T.useEffect)((function(){var e=c[m];if(e!==q)if(G(e),e){var t=JSON.parse(e);Y("".concat((0,L.getLangMsg)({key:"entityd.refEditBtnEditor.key0003",variables:{Name:null==t?void 0:t.Name,Key:null==t?void 0:t.Key}})));var n=Oe()(M).call(M,(function(e){return e===d}));Rt()(M).call(M,n,1)}else Y((0,L.getLangMsg)("entityd.refEditBtnEditor.key0002"))}),[c[m]]);var oe=function(e){t(e.target.value),N()((function(){H(!1)}),300)},ie=function(){return P().createElement(D.Tooltip,{placement:"top",tip:Z},q?P().createElement("span",{className:"".concat(a,"-quote")},(0,L.getLangMsg)("entityd.refEditBtnEditor.key0004")):P().createElement("span",{className:"".concat(a,"-no-quote")},(0,L.getLangMsg)("entityd.refEditBtnEditor.key0005")))};return P().createElement(P().Fragment,null,P().createElement("div",{className:"".concat(a,"-flex-center")},P().createElement(Po,{nameHidden:f,className:a,name:l,tips:u,required:p}),(ee||c[m])&&P().createElement(ie,null)),P().createElement("div",{className:"".concat(a,"-ref-input")},P().createElement(D.Input,{ref:re,value:B,disabled:o&&!c[m],title:A,maxLength:v,placeholder:(0,L.getLangMsg)("entityd.refEditBtnEditor.key0006"),borderType:"bordered",readOnly:ee&&"2"===ne.current||c[m],onKeyDown:function(e){13===e.keyCode&&oe(e)},onFocus:function(){H(!0)},onBlur:oe,onChange:function(e){var n,a,o=(null===(n=e.target)||void 0===n?void 0:n.value)||"";K(o),(a=o)!==r&&(clearTimeout(ae.current),ae.current=N()((function(){t(a)}),300))},suffix:(ee||c[m])&&P().createElement("div",{className:"".concat(a,"-flex-icon")},q&&P().createElement("div",{className:"".concat(a,"-clear")},P().createElement(D.Icon,{type:"close",onClick:function(){I&&I(l,c,i,(0,b.c)({type:"del"},m,c[m])),function(e,t){s.batchUpdateControlPropertyValues((0,L.createUpdateAction)([[d,(0,b.c)({},e,t)]]))}(m,"")}})),P().createElement(D.Icon,{prefix:"designericon",style:{cursor:o&&!c[m]?"not-allowed":"pointer"},type:"gengduo",onClick:function(){o&&!c[m]||(n?n&&n(l,c,i):I&&I(l,c,i))}}))})))},Vu=function(){return[["ECombo",wr,""],["RefCombo",Nr,""],["RefMCombo",Ir,""],["Input",Mr,""],["Select",Sr,""],["RefEditBtn",Du,""]]};function Fu(e,t){var n=a()(e);if(i()){var r=i()(e);t&&(r=c()(r).call(r,(function(t){return s()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bu(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?f()(n=Fu(Object(a),!0)).call(n,(function(t){(0,b.c)(e,t,a[t])})):p()?m()(e,p()(a)):f()(r=Fu(Object(a))).call(r,(function(t){h()(e,t,s()(a,t))}))}return e}var Ku="entity-designer-entity-property",Ou=["kingdee","kdxk","kdtest","test"],ju=function(e){var t,n,r=(0,T.useContext)(V),a=r.getKdesignerApi,o=r.lockPropsMap,i=void 0===o?{}:o,l=r.designerConfig,u=void 0===l?{}:l,s=r.getDataRef,d=a();(0,L.useSelectionChangeForceUpdateEffect)(a());var v=(null===(t=s())||void 0===t||null===(t=t.entitymeta)||void 0===t?void 0:t.Isv)||"kingdee",p=d.selection.getActiveSelectedId(),g=d.data.findControl(p||d.data.getRootId()),m=d.meta.getControlMeta(g.FieldType||g._Type_),y=d.data.getData(),h=y.Items,E=y.extElements,b=void 0===E?[]:E,k=y.devType,_=u.enableGlobalControl,w=void 0!==_&&_,N=u.enableBillControl,I=void 0!==N&&N,M=(null===(n=z()(b).call(b,(function(e){return"Field"===e.Type})))||void 0===n?void 0:n.Items)||[];M=j()(M).call(M,(function(e){var t,n;return e.Id===(null===(t=h[0])||void 0===t?void 0:t.PkId)?Bu(Bu({},e),{},{Id:null===(n=h[0])||void 0===n?void 0:n.Id}):e}));return P().createElement(L.PropertyView,(0,C.c)({},e,{filterPropertyHandler:function(e){var t;return t=e,(0,Ha.Ut)(t,(function(e){if(void 0===e)return[];f()(e).call(e,(function(e){var t,n;e.Nodes=c()(t=e.Nodes).call(t,(function(e){var t;if("style"!==e.TabGroup&&!x()(t=["Width","Height"]).call(t,e.Id))return!0})),e.Nodes=j()(n=e.Nodes).call(n,(function(e){var t=g.IsvFlag,n=t===v;if(x()(Ou).call(Ou,t)&&"2"===k&&!n){var r=g.Inherit,a=e.ReadOnly;w?(r||"speciallock"!==e.LockType||(e.LockType="unlock"),!a&&"lock"===e.LockType&&r&&(e.ReadOnly=!0)):e.LockType="unlock";var o,l=z()(M).call(M,(function(e){return e.Id===g.Id}));I&&l&&(null===(o=l.Props)||void 0===o||f()(o).call(o,(function(t){var n=t.LockType||"lock";e.Id===t.Id&&(e.LockType=n,"lock"===n?e.ReadOnly=!0:a||"unlock"!==n||(e.ReadOnly=!1))})))}else delete e.LockType;var c=i[p];return null!=c&&x()(c).call(c,e.Id)&&(e.ReadOnly=!0),e}))}))}))}}),P().createElement("div",{className:"".concat(Ku,"-readonly-container")},P().createElement("div",{className:"".concat(Ku,"-readonly-container-property")},P().createElement("div",{className:"".concat(Ku,"-readonly-container-property-title")},(0,L.getLangMsg)("entityd.propertyView.key0002")),P().createElement("div",{className:"".concat(Ku,"-readonly-container-property-name"),title:m.Name},m.Name))))};ju.tabKey="property",ju.getTabName=function(){return(0,L.getLangMsg)("entityd.propertyView.key0001")};var Uu=ju,Hu=function(e){var t=e.kdesignerApi,n=e.keywordMapping;return function(e,r,a,o){var i=t.current,l=i.data,c=l.getRootId(),u=o.Id;if(!o.IsContainer)return!1;var s="string"==typeof r?r:r[n.type],d="string"==typeof e?e:e[n.type],f=a.IsContainer,v=a[n.parentId];if(v===u)return!0;if(v){var p=(l.findControl(v)||{})._Type_,g=x()(Y).call(Y,p)&&!f,m=x()(Z).call(Z,p)&&!f;if(g)return!!x()(Y).call(Y,s);if(m)return!!x()(Z).call(Z,s)}if(x()(Q).call(Q,d)&&u===c)return!1;if(x()(X).call(X,d)&&x()(Y).call(Y,s))return!1;if(x()(Q).call(Q,d)&&x()(Q).call(Q,s))return!1;var y=function(e){var t=i.meta.getControlMeta(e).NotAccept;if(t){var n=t.Ids;return null==n?void 0:x()(n).call(n,d)}}(s);if(y)return!1;if(!(y=function(e){var t=i.meta.getControlMeta(e).Accept;if(!t)return!0;if(t){var n=t.Ids;return null==n?void 0:x()(n).call(n,d)}}(s)))return!1;return!!(y=function(e){var t=i.meta.getControlMeta(e).AcceptParent;if(!t)return!0;if(t){var n=t.Ids;return null==n?void 0:x()(n).call(n,s)}}(d))}},zu="update",Wu="alias",qu=new L.DelayQueueUtil([zu,Wu]),Gu=function(e){var t=e.dataRef,n=e.kdesignerApi,r=e.keywordMapping;return function(e){var a;if(e&&e[0]){var o=e[0];o=(0,ht.isArray)(o)?o:[o];var i=[],l=c()(a=j()(o).call(o,(function(e){var a,o=e.itemId,l=e.value,c=e.metaType,u=e.propertyName,s=e.alias,d=(0,ht.isUndefined)(s)?Qe()(l):s;if("formmeta"!==c){var f=z()(a=t.current[c].Items).call(a,(function(e){return e.Id===o}));if(f){var v=f[u];if((0,ht.isUndefined)(v)){var p=n.current.meta.getControlPropertyDefaultValue(f[ee],u);p&&(v=p)}if(!(0,ht.isEqual)(v,l))return[o,(0,b.c)({},u,l)];if(!(0,ht.isUndefined)(d)){var g=n.current.aliasData.getAliasDataPropValue(f[r.type],u,l);(0,ht.isEqual)(g,d)||i.push({type:f[r.type],propName:u,value:l,alias:d})}}}}))).call(a,Boolean);qu.addQueueData(l,zu),qu.addQueueData(i,Wu),qu.addTimer((function(){var e=qu.getQueueData(zu),t=qu.getQueueData(Wu);e.length&&n.current.data.batchUpdateControlPropertyValues((0,L.createUpdateAction)(e)),t.length&&N()((function(){n.current.aliasData.setAliasDataPropValue(t)})),qu.clearQueue()}))}}},Ju=(n(10936),function(e,t){return{"DatePicker.placeholder":e("designer.date.key0001"),"DatePicker.yearPlaceholder":e("designer.date.key0002"),"DatePicker.quarterPlaceholder":e("designer.date.key0003"),"DatePicker.monthPlaceholder":e("designer.date.key0004"),"DatePicker.weekPlaceholder":e("designer.date.key0005"),"DatePicker.timePlaceholder":e("designer.date.key0006"),"DatePicker.now":e("designer.date.key0007"),"DatePicker.confrim":e("designer.date.key0008"),"DatePicker.today":e("designer.date.key0009"),"DatePicker.month":e("designer.date.key00010"),"DatePicker.year":"zh_CN"===t||"zh_TW"===t?e("designer.date.key00011"):"","DatePicker.weekTitle":["日","一","二","三","四","五","六"],"DatePicker.monthTitle":["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],"DatePicker.rangePlaceholder":[e("designer.date.key00012"),e("designer.date.key00013")],"DatePicker.rangeYearPlaceholder":[e("designer.date.key00014"),e("designer.date.key00015")],"DatePicker.rangeMonthPlaceholder":[e("designer.date.key00016"),e("designer.date.key00017")],"DatePicker.rangeWeekPlaceholder":[e("designer.date.key00018"),e("designer.date.key00019")],"DatePicker.rangeQuarterPlaceholder":[e("designer.date.key00020"),e("designer.date.key00021")],"DatePicker.rangeTimePlaceholder":[e("designer.date.key00022"),e("designer.date.key00023")]}});function Qu(e,t){var n=a()(e);if(i()){var r=i()(e);t&&(r=c()(r).call(r,(function(t){return s()(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zu(e){for(var t=1;t<arguments.length;t++){var n,r,a=null!=arguments[t]?arguments[t]:{};t%2?f()(n=Qu(Object(a),!0)).call(n,(function(t){(0,b.c)(e,t,a[t])})):p()?m()(e,p()(a)):f()(r=Qu(Object(a))).call(r,(function(t){h()(e,t,s()(a,t))}))}return e}var Yu=(0,T.memo)((0,T.forwardRef)((function(e,t){var n=e.meta,r=void 0===n?{}:n,o=e.data,i=void 0===o?{}:o,l=e.onData,u=e.onApi,s=e.getPropertyAliasValue,d=void 0===s?function(){return null}:s,v=e.invokeAction,p=void 0===v?function(e,t){}:v,g=e.showMessage,m=void 0===g?function(e){}:g,y=e.handleCustomInputEditor,h=void 0===y?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n]}:y,_=e.userConfig,w=void 0===_?{showLeftView:!1,showKey:!0,showType:!0,showFullRelationship:!1}:_,I=e.config,S=e.getLangMsg,R=e.lockPropsMap,F=e.designerConfig,B=(0,T.useRef)(null),K=(0,T.useRef)(i),O=(0,T.useRef)(null),U=(0,T.useRef)(w),H=i.language,z=(0,T.useState)(0),W=(0,k.c)(z,2),q=W[0],G=W[1],J={prefixCls:"kdesigner",localeConfig:{localeData:Ju(S,H)}},Q=function(e,t){return(0,L.adaptorMeta)(e,L.transformKeyMap,t)}(r,i.entitymeta),Z=function(e){var t,n,r,o=e.entitymeta,i={};f()(t=a()(o)).call(t,(function(e){o[e]&&Xn[e]&&(i[Xn[e]]=o[e])}));var l=(o.Items&&c()(n=o.Items).call(n,(function(e){return ve(e[ee])})))[0][$],u=o.Items&&j()(r=o.Items).call(r,(function(e){return e[ne]||ve(e[ee])||(e[ne]=l),e}));return i.Items=u,i}(i),Y=(0,T.useCallback)((function(e){switch(e){case"main":return{main:Gn};case"left":return L.ControlView.tabName=S("entityd.index.key0001"),{rootProperty:Yn,control:L.ControlView};case"right":return{rootProperty:Qn,property:Uu};default:return{}}}),[]),X=(0,T.useCallback)((function(e){return e}),[]),te=(0,T.useCallback)((function(e,t,n){var r=["KeyFieldId"];if(x()(r).call(r,e)){var a=n.findControl(t);return a?a._Type_:t}}),[]),re={id:"Id",type:"_Type_",name:"Name",key:"Key",parentId:"ParentId",items:"Items",fieldType:"FieldType",fieldName:"FieldName"},ae=(0,T.useCallback)((function(e,t,n){var r=B.current.aliasData,a=t[re.type],o=t[e],i=t;if((0,ht.isUndefined)(o)){var l=B.current.meta.getControlPropertyDefaultValue(a,e);l&&(i=Zu(Zu({},t),{},(0,b.c)({},e,l)))}var c=N()((function(){var t,r=n.Alias,a=n.EmptyDisplay;!r||!a&&x()(t=[void 0,""]).call(t,i[e])||d(e,i,n)}));if(r.hasAliasDataPropValue(a,e,i[e])){var u=r.getAliasDataPropValue(a,e,i[e]);return u&&clearTimeout(c),u}}),[d]),oe=(0,T.useCallback)((function(e,t,n,r){var a=t[e],o=t[re.type],i=t;if((0,ht.isUndefined)(a)){var l=B.current.meta.getControlPropertyDefaultValue(o,e);l&&(i=Zu(Zu({},t),{},(0,b.c)({},e,l)))}h(e,i,n,r)}),[h]),ie=(0,T.useRef)({getKdesignerApi:function(){return B.current},getDataRef:function(){return K.current},invokeAction:function(e,t){p(e,t)},prefixCls:"entity-designer",getPrefixCls:function(e,t,n){var r;return n||(e=e||"entity-designer",t?M()(r="".concat(e,"-")).call(r,t):e)},getModel:function(){return $n(B.current)},userConfig:w,showLockBtn:e.showLockBtn,config:I,onUserConfigChange:fe}),le=(0,T.useMemo)((function(){return Zu({viewKey:q,designerConfig:F,lockPropsMap:R,changeDesignerView:function(e){G(e)}},ie.current)}),[q,F,R]),ce=(0,T.useMemo)((function(){return{getViews:Y,processPropertyName:X,processPropertyValue:te,keywordMapping:re,getEditorFormatValue:ae,controlViewMode:"horizontal",showMessage:m,onCustomInputClick:oe,designerContextValue:le,filterProperty:function(e,t){return tr(le.getModel,le.getKdesignerApi)(e,t)},preHandle:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return xr.apply(void 0,M()(t).call(t,[Zu({invokeAction:p},le)]))},viewCollapseState:{left:!w.showLeftView},onViewCollapseChange:function(e){var t=e.position,n=e.hide;"left"===t&&fe({showLeftView:!n})},getPropertyEditors:Vu,controlViewSetting:{hideHelpIcon:!0,hideAnchorIcon:!0,searchInputPlaceholder:S("entityd.index.key0002")},controlsAddedByForntEnd:[],viewSetting:{leftView:function(){return!1},rightView:function(){return!1}},getOutlineItemIcon:function(e){return P().createElement(D.Icon,{prefix:"designericon",type:(0,L.getControlIconMap)(e),className:"".concat("kdesigner-entity-designer","-control-icon")})},canAddCallback:Hu({kdesignerApi:B,keywordMapping:re}),getLangMsg:S}}),[Y,X,ae,m,oe,Vu]),ue=(0,T.useRef)({aliasActionQueue:[],dataActionQueue:[],clearQueue:function(){ue.current.aliasActionQueue=[],ue.current.dataActionQueue=[]},addAliasAction:function(e){var t;(t=ue.current.aliasActionQueue).push.apply(t,(0,E.c)(e))},addDataAction:function(e){var t;(t=ue.current.dataActionQueue).push.apply(t,(0,E.c)(e))},fireActionTimer:null}),se=(0,T.useCallback)((function(e){var t,n;B.current=Zu({attrActions:null===(t=O.current)||void 0===t?void 0:t.attrActions,resetPatches:null===(n=O.current)||void 0===n||null===(n=n.dataContext)||void 0===n?void 0:n.resetPatches,setProperty:Gu({dataRef:K,kdesignerApi:B,keywordMapping:re}),addField:function(t,n,r,a){if(t){var o=e.meta,i=e.data,l=e.selection,c=i.findControl(n)._Type_;if(o.canAdd(t,c)){var u={_Type_:t,ParentId:n,Id:(0,L.createUUid)(),Name:r,Key:a};i.addControl((0,L.createAddAction)(u,{isInstrucAdd:!0})).then((function(e){var t=e[0].value,n=A()(t)?[t[0].Id]:[t.Id];l.setSelect(n)}))}else m(S("entityd.index.key0004"))}else m(S("entityd.index.key0003"))},deleteControl:function(t){var n=e.data,r=n.getNextSelectedControlId(t);n.deleteControl((0,L.createDeleteAction)(t)).then((function(){e.selection.setSelect([r])}))},getUserConfig:function(){var e,t,n,r;return{showLeftView:null===(e=U.current)||void 0===e?void 0:e.showLeftView,showKey:null===(t=U.current)||void 0===t?void 0:t.showKey,showType:null===(n=U.current)||void 0===n?void 0:n.showType,showFullRelationship:null===(r=U.current)||void 0===r?void 0:r.showFullRelationship}},uiModel:$n(e)},e),u&&u(B.current)}),[u,ce.controlsAddedByForntEnd]),de=(0,T.useCallback)((function(e,t){(0,C.c)(K.current.entitymeta,e),l&&l(K.current,t)}),[l]);function fe(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};U.current=(0,C.c)({},U.current,t),e.onUserConfigChange&&e.onUserConfigChange()}return P().createElement(D.ConfigProvider,{value:J},P().createElement(V.Provider,{value:le},P().createElement(Xu,{ref:O,globalConfig:ce,onData:de,meta:Q,data:Z,onApi:se})))}))),Xu=P().memo(R(),(function(){return!0}));Yu.displayName="EntityDesigner";var $u=Yu},19600:function(){},77856:function(){}}]);