var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(Ua,Mb,ub){Ua instanceof String&&(Ua=String(Ua));for(var mb=Ua.length,qb=0;qb<mb;qb++){var sb=Ua[qb];if(Mb.call(ub,sb,qb,Ua))return{i:qb,v:sb}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(Ua,Mb,ub){if(Ua==Array.prototype||Ua==Object.prototype)return Ua;Ua[Mb]=ub.value;return Ua};$jscomp.getGlobal=function(Ua){Ua=["object"==typeof globalThis&&globalThis,Ua,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var Mb=0;Mb<Ua.length;++Mb){var ub=Ua[Mb];if(ub&&ub.Math==Math)return ub}throw Error("Cannot find global object");};
$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(Ua,Mb){var ub=$jscomp.propertyToPolyfillSymbol[Mb];if(null==ub)return Ua[Mb];ub=Ua[ub];return void 0!==ub?ub:Ua[Mb]};
$jscomp.polyfill=function(Ua,Mb,ub,mb){Mb&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(Ua,Mb,ub,mb):$jscomp.polyfillUnisolated(Ua,Mb,ub,mb))};$jscomp.polyfillUnisolated=function(Ua,Mb,ub,mb){ub=$jscomp.global;Ua=Ua.split(".");for(mb=0;mb<Ua.length-1;mb++){var qb=Ua[mb];if(!(qb in ub))return;ub=ub[qb]}Ua=Ua[Ua.length-1];mb=ub[Ua];Mb=Mb(mb);Mb!=mb&&null!=Mb&&$jscomp.defineProperty(ub,Ua,{configurable:!0,writable:!0,value:Mb})};
$jscomp.polyfillIsolated=function(Ua,Mb,ub,mb){var qb=Ua.split(".");Ua=1===qb.length;mb=qb[0];mb=!Ua&&mb in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var sb=0;sb<qb.length-1;sb++){var Vb=qb[sb];if(!(Vb in mb))return;mb=mb[Vb]}qb=qb[qb.length-1];ub=$jscomp.IS_SYMBOL_NATIVE&&"es6"===ub?mb[qb]:null;Mb=Mb(ub);null!=Mb&&(Ua?$jscomp.defineProperty($jscomp.polyfills,qb,{configurable:!0,writable:!0,value:Mb}):Mb!==ub&&(void 0===$jscomp.propertyToPolyfillSymbol[qb]&&(ub=1E9*Math.random()>>>0,
$jscomp.propertyToPolyfillSymbol[qb]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(qb):$jscomp.POLYFILL_PREFIX+ub+"$"+qb),$jscomp.defineProperty(mb,$jscomp.propertyToPolyfillSymbol[qb],{configurable:!0,writable:!0,value:Mb})))};$jscomp.polyfill("Array.prototype.find",function(Ua){return Ua?Ua:function(Mb,ub){return $jscomp.findInternal(this,Mb,ub).v}},"es6","es3");
$jscomp.polyfill("Array.prototype.fill",function(Ua){return Ua?Ua:function(Mb,ub,mb){var qb=this.length||0;0>ub&&(ub=Math.max(0,qb+ub));if(null==mb||mb>qb)mb=qb;mb=Number(mb);0>mb&&(mb=Math.max(0,qb+mb));for(ub=Number(ub||0);ub<mb;ub++)this[ub]=Mb;return this}},"es6","es3");$jscomp.typedArrayFill=function(Ua){return Ua?Ua:Array.prototype.fill};$jscomp.polyfill("Int8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Uint8ClampedArray.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Float32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Float64Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
(function(){function Ua(){var Ma;this.register=function(Ja){Ma=Ja};this.isDesigntimeSupported=function(){return Ma?!0:!1};this.isRuntimeSupported=function(){return Ma?!0:!1};this.setup=function(Ja,oa,ka){Ma.setup(Ja,oa,ka)};this.lookupBizMeta=function(Ja,oa,ka){Ma.lookupBizMeta(Ja,oa,ka)};this.jumpToBizListUi=function(Ja,oa,ka){Ma.jumpToBizListUi(Ja.getBizUiId(),Ja.getUsableDisplayName(),oa,ka)};this.jumpToBizEditUi=function(Ja,oa){Ma.jumpToBizEditUi(Ja.getBizUiId(),Ja.getUsableDisplayName(),oa)}}
function Mb(){var Ma=this,Ja,oa,ka=function(){void 0===Ja&&(Ja=Ma.protectedParseLongerDesignerAccessable(),oa=Ma.protectedParseLongerDesignerOperationJudger())};this.isLongerDesignerAccessable=function(){ka();return Ja};this.getLongerDesignerOperationJudger=function(){ka();return oa};this.mergeToNewInstance=function(Ha){var Sa=Ma.isLongerDesignerAccessable()&&Ha.isLongerDesignerAccessable(),da=Ma.getLongerDesignerOperationJudger().mergeToNewInstance(Ha.getLongerDesignerOperationJudger());return new function(){Mb.call(this);
this.protectedParseLongerDesignerAccessable=function(){return Sa};this.protectedParseLongerDesignerOperationJudger=function(){return da}}};this.protectedParseLongerDesignerAccessable=function(){return!0};this.protectedParseLongerDesignerOperationJudger=function(){return new mb}}function ub(){var Ma=this,Ja,oa,ka,Ha,Sa=function(){void 0===Ja&&(Ja=Ma.protectedParseSquareDesignerAccessable(),oa=Ma.protectedParseSquareDesignerOperationJudger(),ka=Ma.protectedParseAdvancedAnalysisAccessable(),Ha=Ma.protectedParseAdvancedAnalysisOperationJudger())};
this.isSquareDesignerAccessable=function(){Sa();return Ja};this.getSquareDesignerOperationJudger=function(){Sa();return oa};this.isAdvancedAnalysisAccessable=function(){Sa();return ka};this.getAdvancedAnalysisOperationJudger=function(){Sa();return Ha};this.mergeToNewInstance=function(da){var qa=Ma.isSquareDesignerAccessable()&&da.isSquareDesignerAccessable(),Ga=Ma.getSquareDesignerOperationJudger().mergeToNewInstance(da.getSquareDesignerOperationJudger()),ra=Ma.isAdvancedAnalysisAccessable()&&da.isAdvancedAnalysisAccessable(),
cb=Ma.getAdvancedAnalysisOperationJudger().mergeToNewInstance(da.getAdvancedAnalysisOperationJudger());return new function(){ub.call(this);this.protectedParseSquareDesignerAccessable=function(){return qa};this.protectedParseSquareDesignerOperationJudger=function(){return Ga};this.protectedParseAdvancedAnalysisAccessable=function(){return ra};this.protectedParseAdvancedAnalysisOperationJudger=function(){return cb}}};this.protectedParseSquareDesignerAccessable=function(){return!0};this.protectedParseSquareDesignerOperationJudger=
function(){return new qb};this.protectedParseAdvancedAnalysisAccessable=function(){return!0};this.protectedParseAdvancedAnalysisOperationJudger=function(){return new mb}}function mb(){var Ma=this,Ja,oa,ka,Ha,Sa,da,qa=function(){void 0===Ja&&(Ja=Ma.protectedParseDesignable(),oa=Ma.protectedParseDataDetailReadable(),ka=Ma.protectedParseExportable(),Ha=Ma.protectedParsePrintable(),Sa=Ma.protectedParsePublishable(),da=Ma.protectedParseTimingPushable())};this.isDesignable=function(){qa();return Ja};this.isDataDetailReadable=
function(){qa();return oa};this.isExportable=function(){qa();return ka};this.isPrintable=function(){qa();return Ha};this.isPublishable=function(){qa();return Sa};this.isTimingPushable=function(){qa();return da};this.mergeToNewInstance=function(Ga){return new function(){mb.call(this);this.protectedParseDesignable=function(){return Ma.isDesignable()&&Ga.isDesignable()};this.protectedParseDataDetailReadable=function(){return Ma.isDataDetailReadable()&&Ga.isDataDetailReadable()};this.protectedParseExportable=
function(){return Ma.isExportable()&&Ga.isExportable()};this.protectedParsePrintable=function(){return Ma.isPrintable()&&Ga.isPrintable()};this.protectedParsePublishable=function(){return Ma.isPublishable()&&Ga.isPublishable()};this.protectedParseTimingPushable=function(){return Ma.isTimingPushable()&&Ga.isTimingPushable()}}};this.protectedParseDesignable=function(){return!0};this.protectedParseDataDetailReadable=function(){return!0};this.protectedParseExportable=function(){return!0};this.protectedParsePrintable=
function(){return!0};this.protectedParsePublishable=function(){return!0};this.protectedParseTimingPushable=function(){return!0};this.encodeToJson=function(){return{designable:Ma.isDesignable(),dataDetailReadable:Ma.isDataDetailReadable(),exportable:Ma.isExportable(),printable:Ma.isPrintable(),publishable:Ma.isPublishable(),timingPushable:Ma.isTimingPushable()}};this.decodeFromJson=function(Ga){Ja=Ga.designable;oa=Ga.dataDetailReadable;ka=Ga.exportable;Ha=Ga.printable;Sa=Ga.publishable;da=Ga.timingPushable}}
function qb(){var Ma=this,Ja,oa,ka=function(){void 0===Ja&&(Ja=Ma.protectedParsePublishable(),oa=Ma.protectedParseTimingPushable())};this.isPublishable=function(){ka();return Ja};this.isTimingPushable=function(){ka();return oa};this.mergeToNewInstance=function(Ha){return new function(){qb.call(this);this.protectedParsePublishable=function(){return Ma.isPublishable()&&Ha.isPublishable()};this.protectedParseTimingPushable=function(){return Ma.isTimingPushable()&&Ha.isTimingPushable()}}};this.protectedParsePublishable=
function(){return!0};this.protectedParseTimingPushable=function(){return!0};this.encodeToJson=function(){return{publishable:Ma.isPublishable(),timingPushable:Ma.isTimingPushable()}};this.decodeFromJson=function(Ha){Ja=Ha.publishable;oa=Ha.timingPushable}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.core&&
(com.kingdee.bos.qing.core={});var sb=com.kingdee.bos.qing.core,Vb,Lb,xa;(function(){var Ma=com.kingdee.bos.qing.framework.common;Vb=Ma.AbstractFacade;Lb=Ma.AbstractIcons;Ma=Ma.MultilanguageManager.createPackageAccessor(com.kingdee.bos.qing.chart);com.kingdee.bos.qing.chart.MultiLanguageString.setImpl(Ma);Ma=com.kingdee.bos.qing.chart.model;xa=Ma.ContinuousColorLegendModel})();Ua=new Ua;sb.Facade=function(Ma,Ja,oa,ka){Vb.call(this,Ma,Ja,oa,ka);var Ha=this.protectedMethod;this.getDefaultTemplate=function(da){Ha.remote("getDefaultTemplate",
{template:da})};this.getMeta=function(){Ha.remote("getMeta",{})};this.updateMeta=function(da){da={meta:JSON.stringify(da.toJsonObject())};Ha.remote("updateMeta",da)};this.checkFormula=function(da,qa,Ga){da={name:Ga,formula:da,meta:JSON.stringify(qa.toJsonObject())};Ha.remote("checkFormula",da)};this.getMetaTableDetailRowData=function(da,qa,Ga,ra){da={metaTable:JSON.stringify(da.toJsonObject()),startRowNum:qa,endRowNum:Ga,"export":ra?!0:!1};Ha.remote("getMetaTableDetailRowData",da)};this.getCustomizedOrderDimensionMembers=
function(da,qa,Ga){da={meta:JSON.stringify(da.toJsonObject()),fieldFullName:qa,oriCustomOrder:JSON.stringify(Ga)};Ha.remote("getCustomizedOrderDimensionMembers",da)};this.getDetailRowNums=function(da,qa,Ga,ra){da={executingModelWrapper:JSON.stringify(Sa(da,qa)),additionalFilters:Ga?JSON.stringify(Ga):null,coordinate:ra()};Ha.remote("getDetailRowNums",da)};this.getDetailRowData=function(da,qa,Ga,ra){da={dataSourceCacheKey:da,dataRowInfo:JSON.stringify(qa.toJsonObject()),meta:JSON.stringify(Ga.toJsonObject()),
additionalFilters:ra?JSON.stringify(ra):null};Ha.remote("getDetailRowData",da)};this.searchDetailRowLinkTargetForeignKeyMember=function(da,qa,Ga,ra){Ha.remote("searchDetailRowLinkTargetForeignKeyMember",{dataSourceCacheKey:da,row:qa,col:Ga,bizUiId:ra})};this.exportDetailRowData=function(da,qa,Ga,ra){da={dataSourceCacheKey:da,dataRowInfo:JSON.stringify(qa.toJsonObject()),meta:JSON.stringify(Ga.toJsonObject()),additionalFilters:ra?JSON.stringify(ra):null};Ha.remote("exportDetailRowData",da)};this.exportExhibition=
function(da,qa,Ga){da={additionalFilters:Ga?JSON.stringify(Ga):null,model:JSON.stringify(qa.toJsonObject()),fileName:da};Ha.remote("exportExhibition",da)};this.christmasExecute=function(da,qa,Ga,ra,cb){da={checkSelectedValueScope:cb,executingModelWrapper:JSON.stringify(Sa(da,qa,Ga)),additionalFilters:ra?JSON.stringify(ra):null};Ga=Ha.remote("christmas",da);eb.occur(eb.LONGER_CHART_TYPE,qa.getChartType());eb.occur(eb.CORE_CUSTOM_FIELD,qa.howManyCalculatedFieldsUsed());eb.occur(eb.LONGER_DATASOURCE_TYPE,
da.tag);return Ga};this.filteringExecute=function(da,qa,Ga,ra,cb){da={filterIndex:cb,executingModelWrapper:JSON.stringify(Sa(da,qa,Ga)),additionalFilters:ra?JSON.stringify(ra):null};Ga=Ha.remote("filtering",da);eb.occur(eb.LONGER_CHART_TYPE,qa.getChartType());eb.occur(eb.CORE_CUSTOM_FIELD,qa.howManyCalculatedFieldsUsed());eb.occur(eb.LONGER_DATASOURCE_TYPE,da.tag);return Ga};this.execute=function(da,qa,Ga,ra){da={executingModelWrapper:JSON.stringify(Sa(da,qa,Ga)),additionalFilters:ra?JSON.stringify(ra):
null};Ga=Ha.remote("execute",da);eb.occur(eb.LONGER_CHART_TYPE,qa.getChartType());eb.occur(eb.CORE_CUSTOM_FIELD,qa.howManyCalculatedFieldsUsed());eb.occur(eb.LONGER_DATASOURCE_TYPE,da.tag);return Ga};this.easter=function(da,qa,Ga,ra,cb,Qa){Ha.remote("easter",{timestamp:da,cacheKey:qa,fromRow:Ga,fromCol:ra,rows:cb,appendRowAtView:Qa})};this.getFilterPreparedValue=function(da,qa,Ga,ra,cb,Qa){da=Sa(da,qa,Ga);ra&&(da.model.filter=ra);ra={executingModelWrapper:JSON.stringify(da),field:JSON.stringify(cb.toJsonObject()),
additionalFilters:Qa?JSON.stringify(Qa):null};Ha.remote("getFilterPreparedValue",ra)};this.parseDateRange=function(da){da={dateFilter:JSON.stringify(da.toJsonObject())};Ha.remote("parseDateRange",da)};this.squareExecute=function(da,qa,Ga,ra,cb){da={executingModelWrapper:JSON.stringify(Sa(da,qa,Ga)),additionalFilters:ra?JSON.stringify(ra):null,paletteFitSkin:cb?JSON.stringify(cb):null};Ga=Ha.remote("squareExecute",da);eb.occur(eb.SQUARE_CHART_TYPE,qa.getChart().getChartTypeName());eb.occur(eb.CORE_CUSTOM_FIELD,
qa.howManyCalculatedFieldsUsed());eb.occur(eb.SQUARE_DATASOURCE_TYPE,da.tag);return Ga};this.getSquareFilterPreparedValue=function(da,qa,Ga,ra,cb){da=Sa(da,qa);Ga&&(da.model.filters=Ga);Ga={executingModelWrapper:JSON.stringify(da),field:JSON.stringify(ra.toJsonObject()),additionalFilters:cb?JSON.stringify(cb):null};Ha.remote("getSquareFilterPreparedValue",Ga)};this.loadMapTemplate=function(da){da={refToId:da?da.getRefToId():null,refToFullPath:da?da.getFullPath():null};Ha.remote("loadMapTemplate",
da)};this.loadMapRegions=function(da,qa,Ga){da={refToId:da?da.getRefToId():null,refToFullPath:da?da.getFullPath():null,executingModelWrapper:JSON.stringify(Sa(qa,Ga))};Ha.remote("loadMapRegions",da)};this.getGisServerConfig=function(){Ha.remote("getGisServerConfig",{})};this.searchLinkTargetForeignKeyMembers=function(da,qa,Ga,ra,cb,Qa){da={foreignKey:cb,bizUiId:Qa,executingModelWrapper:JSON.stringify(Sa(da,qa)),additionalFilters:Ga?JSON.stringify(Ga):null,linkageContext:JSON.stringify(ra)};Ha.remote("searchLinkTargetForeignKeyMembers",
da)};this.getPresetPalettes=function(da,qa){Ha.remote("getPresetPalettes",{paletteGroup:da,paletteType:qa})};this.previewContinuousColor=function(da){da={model:JSON.stringify(da.toJsonObject())};Ha.remote("previewContinuousColor",da)};this.previewWarningRule=function(da,qa,Ga,ra){da={executingModelWrapper:JSON.stringify(Sa(da,qa,Ga)),definition:JSON.stringify(ra.toJsonObject(null))};Ha.remote("previewWarningRule",da)};this.previewBriefOutput=function(da,qa,Ga,ra,cb){da={executingModelWrapper:JSON.stringify(Sa(da,
qa,Ga)),additionalFilters:ra?JSON.stringify(ra):null,definition:JSON.stringify(cb.toJsonObject({isFieldExist:function(Qa){return!0}}))};Ha.remote("previewBriefOutput",da)};this.executeBriefOutput=function(da,qa,Ga,ra,cb){da={executingModelWrapper:JSON.stringify(Sa(da,qa,Ga)),additionalFilters:ra?JSON.stringify(ra):null,paramNames:JSON.stringify(cb)};Ha.remote("executeBriefOutput",da)};this.makeBasicInsight=function(da,qa,Ga,ra){da={executingModelWrapper:JSON.stringify(Sa(da,qa,Ga)),additionalFilters:ra?
JSON.stringify(ra):null};Ha.remote("makeBasicInsight",da)};this.makeAdvancedInsight=function(da,qa,Ga,ra){da={executingModelWrapper:JSON.stringify(Sa(da,qa,Ga)),additionalFilters:ra?JSON.stringify(ra):null};Ha.remote("makeAdvancedInsight",da)};var Sa=function(da,qa,Ga){var ra={};ra.meta=da.toJsonObject();ra.model=qa?qa.toJsonObject():null;ra.preferences=Ga?Ga.toJsonObject():null;return ra}};sb.QingModelAssistant=new function(){this.verifyLinkageBizMeta=function(Ma){Ma=Ma.getLinkTargets();if(Ua.isRuntimeSupported()&&
Ma){var Ja=Ma.getUsefulItems();if(0<Ja.length){Ma=[];for(var oa=0;oa<Ja.length;oa++)Ma.push(Ja[oa].getBizUiId());Ua.lookupBizMeta(Ma,function(ka){for(var Ha=0;Ha<Ja.length;Ha++){var Sa=Ja[Ha],da=ka[Ha];da?(Sa.setRuntimeValid(!0),Sa.setUsableDisplayName(da)):Sa.setRuntimeValid(!1)}})}}}};sb.CommonJsonParser=new function(){this.parseContontinuousColorLegendModel=function(Ma){var Ja=Ma.minText,oa=Ma.maxText,ka=Ma.gradientColor,Ha=Ma.segmentColor;Ma=new xa;if(ka){Ha=ka.color1;var Sa=ka.color2,da=ka.color3,
qa=ka.color4;ka=(ka=ka.pos)?parseFloat(ka):null;Ma.prepareGradient(Ja,oa,Ha,Sa,ka,da,qa)}else Ma.prepareSegment(Ja,oa,Ha);return Ma}};sb.Icons=new function(){Lb.call(this);var Ma=this.protectedMethod,Ja;this.setComboIconImpl=function(Ha){Ja=Ha};this.protectedInit=function(Ha,Sa){if(!Ja)throw Error("Please setComboIconImpl() first.");Ja.define(Sa,"chart-type");oa(0,0,"chart_table");oa(0,1,"chart_pie");oa(0,2,"chart_ring");oa(0,3,"chart_rose");oa(0,4,"chart_sunburst");oa(1,0,"chart_heatmap");oa(1,1,
"chart_treemap");oa(2,0,"chart_bar");oa(2,1,"chart_msbar");oa(2,2,"chart_stackbar");oa(2,3,"chart_percentbar");oa(3,0,"chart_horizontalbar");oa(3,1,"chart_horizontalmsbar");oa(3,2,"chart_horizontalstackbar");oa(3,3,"chart_horizontalpercentbar");oa(4,0,"chart_line");oa(4,1,"chart_mline");oa(4,2,"chart_area");oa(4,3,"chart_percentarea");oa(5,0,"chart_scatter");oa(5,1,"chart_bubble");oa(6,0,"chart_kpi");oa(6,1,"chart_map");oa(6,2,"chart_radar");oa(6,3,"chart_composite");oa(6,4,"chart_dial");oa(1,4,"chart_progresscircle");
oa(2,4,"chart_progressvbar");oa(3,4,"chart_progresshbar");oa(7,0,"chart_grid");oa(8,0,"chart_customlist");oa(7,1,"chart_gis");oa(4,4,"chart_waterfall");oa(5,4,"chart_funnel");Ja.define(Sa,"card-item");oa(0,0,"mark_label");oa(0,1,"mark_size");oa(0,2,"mark_color");oa(0,3,"mark_angle");oa(0,4,"mark_empty");oa(0,7,"icon_reset");oa(0,8,"icon_collapsable");oa(0,9,"icon_expandable");Ja.define(Sa,"meta-tree");oa(0,0,"meta_date");oa(1,0,"meta_date_selected");oa(0,1,"meta_string");oa(1,1,"meta_string_selected");
oa(0,2,"meta_number");oa(1,2,"meta_number_selected");oa(0,3,"meta_tree1");oa(1,3,"meta_tree1_selected");oa(0,4,"meta_tree2");oa(1,4,"meta_tree2_selected");oa(0,5,"meta_table");oa(1,5,"meta_table_selected");oa(0,6,"meta_folder");oa(1,6,"meta_folder_selected");oa(0,7,"meta_elastic");oa(1,7,"meta_elastic_selected");oa(2,0,"meta_table-md");oa(3,0,"meta_table-md_selected");oa(2,1,"meta_table-preagg");oa(3,1,"meta_table-preagg_selected");oa(2,2,"meta_preagg");oa(3,2,"meta_preagg_selected");Ja.define(Sa,
"operate");oa(0,0,"icon_search");oa(0,2,"icon_left_collapse");oa(0,3,"icon_delete");oa(0,4,"icon_search_auto_select");oa(1,0,"icon_additional_filter");oa(1,1,"icon_switch_on");oa(1,2,"icon_switch_off");Ja.define(Sa,"sort");oa(0,0,"icon_sort-asc-h");oa(0,1,"icon_sort-desc-h");oa(0,2,"icon_sortable-h");oa(1,0,"icon_sort-asc-v");oa(1,1,"icon_sort-desc-v");oa(1,2,"icon_sortable-v");Ja.define(Sa,"roll");Ja.define(Sa,"tooltips-bar");oa(0,0,"icon_data_detail");oa(0,1,"icon_bill_linkage");Ja.define(Sa,"extra");
oa(0,0,"icon_extra_close");oa(0,1,"icon_extra_search");oa(0,2,"icon_extra_setting");oa(1,0,"icon_extra_filter");oa(1,1,"icon_extra_level");Ja.define(Sa,"toolbar");ka(0,0,"btn_undo");ka(0,1,"btn_redo");ka(0,2,"btn_clear");ka(0,3,"btn_resume");ka(0,4,"btn_suspend");ka(0,5,"btn_export");ka(0,6,"btn_print");ka(0,7,"btn_param");ka(4,0,"btn_analysis");ka(4,1,"btn_reverse");ka(4,2,"btn_preview")};var oa=function(Ha,Sa,da){Ma.registIcon(Ha,Sa,da)},ka=function(Ha,Sa,da){oa(Ha,Sa,da);oa(Ha+1,Sa,da+"_hover");
oa(Ha+2,Sa,da+"_disabled")}};sb.LinkageRegister=Ua;sb.MapLibraryRegister=new function(){var Ma;this.registerTemplateSelector=function(Ja){Ma=Ja};this.selectTemplate=function(Ja,oa){Ma?Ma(Ja,oa):(Ja=com.kingdee.bos.qing.core.model.OutsideReference.create("map20180808_china","map20180808_china",null,"\u4e2d\u56fd\u7701\u4efd\u793a\u610f\u56fe"),oa(Ja))}};sb.RtLongerEditableConfirmer=Mb;sb.RtSquareEditableConfirmer=ub;sb.LongerDesignerOperationJudger=mb;sb.SquareDesignerOperationJudger=qb;var eb=new function(){var Ma;
this.hookCollector=function(Ja){Ma=Ja};this.occur=function(Ja,oa){try{Ma&&Ma(Ja,oa)}catch(ka){window.console&&console.warn(ka)}}};eb.LONGER_CHART_TYPE="longer-chart-type";eb.SQUARE_CHART_TYPE="square-chart-type";eb.DSB_WIDGET_TYPE="dsb-widget-type";eb.CORE_CUSTOM_FIELD="core-customfield";eb.SQUARE_DRILLDOWN="square-drilldown";eb.SQUARE_AFFECTION="square-affection";eb.SQUARE_NAVIGATETO="square-navigateto";eb.SQUARE_EXTRA_FILTER="square-extrafilter";eb.SQUARE_DATASOURCE_TYPE="square-datasource-type";
eb.LONGER_DATASOURCE_TYPE="longer-datasource-type";sb.UserOperationReporter=eb})();
(function(){function Ua(){KTableUIDraggableAdjustingHandler.CustomExpendor.call(this);this.isRowDraggable=function(Ha,Sa){return Sa>=Ha.getFrozenRows()};this.isColumnDraggable=function(Ha,Sa){return Sa>=Ha.getFrozenColumns()};var ka=this.rowDraggedAction;this.rowDraggedAction=function(Ha,Sa,da){var qa=Ha.getRow(Sa),Ga=qa.getUserObject(),ra=qa.getStyle();40<qa.getHeight()+da?Ga||(qa.setUserObject(ra),ra=ra.copy(),ra.setVerticalAlign("top"),ra.setWrapText(!0),qa.setStyle(ra)):Ga&&(qa.setUserObject(null),
qa.setStyle(Ga));ka(Ha,Sa,da)}}function Mb(){var ka=this,Ha,Sa=!1,da=!1;this.destroyWhenClosed=function(){qb.removeChangedListener(qa);da&&qb.exit()};this.protectedForward=function(){throw Error("Implement");};this.protectedBackward=function(){throw Error("Implement");};var qa=function(cb){cb?ka.protectedForward():(da=Sa=!1,ra(),ka.protectedBackward())},Ga=function(cb){var Qa=$("<div>");mb.layoutCtrlCenterAlign(Qa,16);mb.layoutCtrlMiddleAlign(Qa,16);Qa.appendTo(cb);cb.on("mouseenter",function(hb){ra(!0)});
cb.on("mouseleave",function(hb){ra(!1)});ra()},ra=function(cb){var Qa=Sa?"unfullscreen":"fullscreen";cb&&(Qa+="_hover");Vb.background(Ha.children(),Qa)};this.protectedMethod={setup:function(cb){Ha=cb;Ha.css({cursor:"pointer"});Ha.on("click",function(Qa){(Sa=!Sa)?(qb.isFullscreenNow()?ka.protectedForward():(da=!0,qb.request(Ha)),ra()):da?(da=!1,qb.exit()):(ka.protectedBackward(),ra())});Ga(Ha);qb.addChangedListener(qa)},isRealFullByButton:function(){return da}}}"undefined"==typeof com&&(com={});"undefined"==
typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.core&&(com.kingdee.bos.qing.core={});"undefined"==typeof com.kingdee.bos.qing.core.commonui&&(com.kingdee.bos.qing.core.commonui={});var ub=com.kingdee.bos.qing.core.commonui,mb,qb,sb,Vb,Lb,xa,eb,Ma,Ja,oa;(function(){var ka=com.kingdee.bos.qing.common;mb=ka.DomUtil;qb=ka.FullScreenHelper;ka=com.kingdee.bos.qing.framework.common;
sb=ka.MultilanguageManager.createPackageAccessor(ub);ka=com.kingdee.bos.qing.ui.component;Vb=ka.Icons;Lb=ka.Label;xa=ka.DropdownSelector;eb=ka.WorkButton;Ma=ka.MessageDialog;ka=com.kingdee.bos.qing.common.shared;Ja=ka.AbstractProgressParser;ka=com.kingdee.bos.qing.core;oa=ka.LinkageRegister})();ub.ErrorCodeParser=new function(){this.toDisplayText=function(ka,Ha){switch(ka){case 205403:case 205301:return sb.get("canNotRun","\u964d\u7ea7");case 402200:return sb.get("dataEmpty","\u6ca1\u6709\u6570\u636e\u53ef\u4f9b\u5206\u6790\u548c\u5c55\u73b0");
case 402202:return sb.get("relationMissing","\u5206\u6790\u5f15\u64ce\u4e00\u8138\u8499\u5708\u3002");case 403001:return sb.get("necessaryDimensionMissing","\u7f3a\u5c11\u5fc5\u8981\u7684\u7ef4\u5ea6\uff1a")+Ha;default:return null}};this.attemptToAppendNecessaryDimensions=function(ka,Ha,Sa){403001==ka&&(ka=new eb,ka.setText(sb.get("autoAppendNecessaryDimensions","\u5c06\u5fc5\u8981\u5b57\u6bb5\u6dfb\u52a0\u5230\u7b5b\u9009\u5668")),ka.addActionListener(function(da){Sa()}),ka.getJqUi().css({position:"relative",
width:"240px",height:"30px","margin-left":"40px"}),ka.getJqUi().appendTo(Ha))}};ub.ExportHelper=new function(){this.facadeErrorHandler=function(ka,Ha){return 800800==ka?(ka=new Ma,ka.setOptionType(Ma.OPTION_OK),ka.setMessage(Ha),ka.showDialog(),!0):!1}};ub.DataDetailTable=function(){var ka=com.kingdee.bos.qing.core.model.MetaField,Ha=this,Sa,da=new Lb,qa=new KTable,Ga=2147483647,ra=1,cb;this.hookOperation=function(Ab){pa(Ab)};this.getJqUi=function(){if(!Sa){Fb();var Ab=$(qa.getUI());Sa=$("<div>");
Sa.append(da.getJqUi());Sa.append(Ab);mb.layoutCtrlWithLRTB(da.getJqUi(),0,0,null,0,null,23);mb.layoutCtrlWithLRTB(Ab,0,0,null,30,0,null)}return Sa};this.resize=function(){qa.relayoutViews()};this.reset=function(){qa.removeAllRows();qa.updateUI(!1)};this.setTotalRowsCount=function(Ab){ra=1;Ga=Ab;da.setText(sb.get("rowsInTotal","\u5171#1\u884c").replace("#1",Ga))};this.setLoader=function(Ab){cb=Ab};this.setupColumns=function(Ab,Z){var Wa=new KTStyle;Wa.setTextAlign("center");Wa.setBold(!0);Wa.setColor("#666");
Wa.setBackgroundColor("#F9F9F9");var fb=qa.addRow();fb.setStyle(Wa);fb.setHeight(22);var Va=qa.addRow();Va.setStyle(Wa);Va.setHeight(22);var Ka=new KTStyle;Ka.setTextAlign("center");var ab=new KTStyle;ab.setTextAlign("left");var kb=new KTStyle;kb.setTextAlign("right");var La=null,ob=-1;Ab+=2;qa.removeAllColumns();qa.addColumns(Ab);for(var ta=0;ta<Ab;ta++){var ja=qa.getColumn(ta),Da=fb.getCell(ta),na=Va.getCell(ta);if(2>ta)1==ta?(Da.setValue(sb.get("rowNum","\u5e8f\u53f7")),ja.setWidth(40),ja.setStyle(Ka)):
0==ta&&(ja.setWidth(20),ja.setStyle(Ka)),qa.addMergeBlock(new KTMergeBlock(0,1,ta,ta));else{var l=Z(ta-2);switch(l.getDataType()){case ka.DT_STRING:ja.setWidth(100);ja.setStyle(ab);break;case ka.DT_NUMBER:ja.setWidth(80);ja.setStyle(kb);break;case ka.DT_DATE:ja.setWidth(76);ja.setStyle(ab);break;default:throw Error("Unknown data type.");}ja=l.getTable().getDisplayName()||"";Da.setValue(ja);na.setValue(l.getDisplayName());na.setUserObject(l.getFullName());ja!=La&&(Da.setStyle(Wa),Qa(ob,ta-1),La=ja,
ob=ta)}}Qa(ob,Ab-1)};var Qa=function(Ab,Z){0<=Ab&&Ab!=Z&&qa.addMergeBlock(new KTMergeBlock(0,0,Ab,Z))};this.updateColumnsVisible=function(Ab,Z){for(var Wa=qa.getRow(1),fb=2;fb<qa.getColumnsCount();fb++){var Va=Wa.getCell(fb).getUserObject();Va=Ab(Va);qa.getColumn(fb).setHide(!Va)}Z&&qa.updateUI(!0)};this.loadRows=function(){var Ab=ra,Z=Ab+1E3-1;Z=Z>Ga?Ga:Z;cb(Ab,Z)};this.appendRows=function(Ab,Z){hb(Ab,Z);qa.updateUI(!1)};this.lazyAppendRows=function(Ab,Z){qa.lazyAppendData(!0);hb(Ab,Z);qa.lazyAppendData(!1)};
var hb=function(Ab,Z){var Wa=new KTStyle;Wa.setColor("#333");Wa.setBackgroundColor("#fff");var fb=new KTStyle;fb.setColor("#333");fb.setBackgroundColor("#F3F3F3");for(var Va=0;Va<Ab;Va++){var Ka=1==ra%2?Wa:fb,ab=qa.addRow();ab.setHeight(22);ab.setStyle(Ka);for(Ka=0;Ka<qa.getColumnsCount();Ka++){var kb=ab.getCell(Ka);if(0==Ka)kb.setUserObject(ra);else if(1==Ka)kb.setValue(ra);else{var La=Z(Va,Ka-2);kb.setValue(La)}}ra++}},Fb=function(){var Ab=new KTBorderStyle;Ab.setBorderWidth(1);Ab.setBorderPen("solid");
Ab.setBorderColor("#E3E3E3");var Z=new KTStyle;Z.setVerticalAlign("middle");qa.setBorder(Ab);qa.setStyle(Z);qa.setDraggableAdjusting(!0,2,2,new Ua);qa.setSyncUIWhenModelChanged(!1);qa.setLargeDataMode(!0);qa.setFrozenRows(2);qa.setFrozenColumns(2);qa.getCellRender().setOutsideVisible(!1);qa.setMergeBlockTextVisibleAlways(!0);var Wa;qa.addScrollToBottomListener(function(){ra<=Ga&&(clearTimeout(Wa),Wa=setTimeout(Ha.loadRows,100))})},pa=function(Ab){if(Ab){var Z=-1,Wa;qa.setCellAcrossListener(function(fb,
Va,Ka,ab){Va=fb?Va:-1;Z!=Va&&(Wa&&Wa.empty(),Z=Va,2<=Z&&(fb=qa.getRow(Z).getCell(0).getUserObject(),Wa=ab(Z,0),Ab(Wa,fb)))})}else qa.setCellAcrossListener(null)}};ub.RuntimePopupSupporter=function(){Mb.call(this);var ka=this.protectedMethod,Ha,Sa;this.setup=function(da){ka.setup(da)};this.hookAction=function(da,qa){Ha=da;Sa=qa};this.protectedForward=function(){Ha()};this.protectedBackward=function(){Sa()}};ub.RuntimePopupDialogSupporter=function(){Mb.call(this);var ka=this.protectedMethod,Ha,Sa,da,
qa;this.setResizedHandler=function(ra){da=ra};this.setPreferredSizeGetter=function(ra){qa=ra};this.appendRealFullscreenButton=function(ra){Ha=ra;ra=ra.addCustomSubUi();mb.layoutCtrlWithLRTB(ra,null,36,30,6,null,30);ka.setup(ra)};this.protectedForward=function(){Sa=[ka.isRealFullByButton(),Ha.getBounds()];var ra=Ga();Ha.setBounds(0,0,ra[0],ra[1]);da&&da()};this.protectedBackward=function(){if(Sa&&Sa[0]){var ra=Sa[1];var cb=ra[0];var Qa=ra[1];var hb=ra[2];ra=ra[3]}else Qa=Ga(),ra=qa?qa():Qa,cb=Math.max(0,
Qa[0]-ra[0]>>1),Qa=Math.max(0,Qa[1]-ra[1]>>1),hb=ra[0],ra=ra[1];Ha.setBounds(cb,Qa,hb,ra);da&&da()};var Ga=function(){var ra=$(document.body),cb=ra.prop("clientWidth");ra=ra.prop("clientHeight");return[cb,ra]}};ub.MetaFieldSelector=function(){var ka=com.kingdee.bos.qing.core.ui.SearchableMetaList,Ha=this,Sa,da=new xa;(function(){da.setDropdownCreator(function(qa,Ga,ra){if(!Sa)return[-1,40];var cb=new ka;cb.setMetaModel(Sa);cb.setSelectedMetaField(Ha.getSelected(),!0);cb.requestSelectedVisible();cb.addPressedListener(function(Qa,
hb){(Qa=cb.getSelectedLeafMetaField())&&ra(Qa)});Ga=cb.getJqUi();mb.layoutCtrlWithLRTB(Ga,0,0,null,0,0,null);Ga.appendTo(qa);return[-1,21*Math.max(4,cb.getVisibleItemsCount()+1)]});da.setCustomPainter(function(qa,Ga){Ga.text(qa?qa.getFullDisplayName():"")})})();this.getJqUi=function(){return da.getJqUi()};this.setModel=function(qa,Ga){if(Ga){for(var ra={},cb=0;cb<Ga.length;cb++)ra[Ga[cb]]=!0;for(cb=0;cb<qa.getTableCount();cb++){Ga=qa.getTable(cb);for(var Qa=Ga.getFieldCount()-1;0<=Qa;Qa--){var hb=
Ga.getField(Qa);ra[hb.getDataType()]||Ga.removeField(Qa)}}}Sa=qa};this.setSelected=function(qa){qa=qa?Sa.searchMetaField(qa):null;da.setSelectedModel(qa)};this.getSelected=function(){var qa=da.getSelectedModel();return qa?qa.getFullName():null};this.setSelectedListener=function(qa){da.addSelectionListener(function(Ga,ra){ra&&qa(Ha.getSelected())})};this.setEnabled=function(qa){da.setEnabled(qa)}};ub.LinkageHelper=new function(){this.makeItemDisplay=function(Ha){Ha=Ha.getUsableDisplayName();var Sa=
sb.get("linkageJumpTo","\u8054\u67e5\u5230#1");return Sa=Sa.replace("#1",Ha)};this.makeDetailDataLinkageCaption=function(Ha){var Sa=sb.get("linkageFromDetailRow","\u7b2c#1\u884c\uff0c\u5355\u636e\u8054\u67e5\uff1a");return Sa=Sa.replace("#1",Ha)};this.jumpToEditUi=function(Ha,Sa,da,qa,Ga){Sa=Sa(function(ra){Ga(sb.get("linkageJumping","\u6b63\u5728\u8df3\u8f6c\u5230\u4e1a\u52a1\u754c\u9762")+"...");oa.jumpToBizEditUi(Ha,ra)},function(ra,cb,Qa){switch(ra){case 401202:cb=sb.get("linkageJumpingError3",
"\u7531\u4e8e\u672a\u4f7f\u7528\u5230\u8be5\u8054\u67e5\u76ee\u6807\u7684\u5b57\u6bb5\uff0c\u5f53\u524d\u660e\u7ec6\u6570\u636e\u4e0e\u8be5\u8054\u67e5\u76ee\u6807\u65e0\u5173\u3002");Ga(cb,!1);ka(ra+" "+cb);break;default:ka(ra+"\r\n"+cb+"\r\n"+Qa)}return!0});Sa.setShowBlocking(!1);Sa.searchDetailRowLinkTargetForeignKeyMember(da,qa,Ha.getForeignKey(),Ha.getBizUiId())};this.makeJsonLongerClickedContext=function(Ha){return{forLonger:Ha}};this.makeJsonSquareClickedContext=function(Ha){return{forSquare:Ha.toJsonObject()}};
this.jumpToListUi=function(Ha,Sa,da,qa,Ga,ra,cb,Qa){da=da(function(hb){var Fb=hb.foreignKeyMembersCachedId;hb=hb.linkageMaxNums;0<hb?(hb=sb.get("confirmGoOnLinkageJump","\u8054\u67e5\u76ee\u6807\u5df2\u8d85\u51fa#1\u6761\u8bb0\u5f55\u7684\u4e0a\u9650\uff0c\u5c06\u65e0\u6cd5\u5217\u51fa\u5168\u90e8\u7ed3\u679c\u3002").replace("#1",hb),Qa(hb,function(pa){pa||cb(sb.get("linkageJumping","\u6b63\u5728\u8df3\u8f6c\u5230\u4e1a\u52a1\u754c\u9762")+"...");oa.jumpToBizListUi(Ha,Fb,pa)})):(cb(sb.get("linkageJumping",
"\u6b63\u5728\u8df3\u8f6c\u5230\u4e1a\u52a1\u754c\u9762")+"..."),oa.jumpToBizListUi(Ha,Fb,!1))},function(hb,Fb,pa){switch(hb){case 401201:Fb=sb.get("linkageJumpingError1","\u5173\u8054\u5b57\u6bb5\u4e0d\u5b58\u5728\u3002");cb(Fb,!1);ka(hb+" "+Fb);break;case 402202:Fb=sb.get("linkageJumpingError2","\u5173\u8054\u5b57\u6bb5\u65e0\u6cd5\u5efa\u7acb\u5173\u7cfb\u3002");cb(Fb,!1);ka(hb+" "+Fb);break;case 402200:case 402230:Fb=sb.get("linkageJumpingError4","\u8054\u67e5\u76ee\u6807\u6ca1\u6709\u6570\u636e\u53ef\u5c55\u793a\u3002")+
hb;cb(Fb,!1);ka(hb+" "+Fb);break;default:ka(hb+"\r\n"+Fb+"\r\n"+pa)}return!0});da.setShowBlocking(!1);da.searchLinkTargetForeignKeyMembers(qa,Ga,ra,Sa,Ha.getForeignKey(),Ha.getBizUiId())};var ka=function(Ha){window.console&&console.warn(Ha)}};ub.AbstractCoveredSlideDownUi=function(){var ka,Ha=this;this.show=function(da){if(ka)Ha.hide();else{ka=$("<div>");ka.css("z-index",65535);ka.appendTo(da);mb.layoutCtrlWithLRTB(ka,0,0,null,0,0,null);da=ka.prop("clientWidth");var qa=ka.prop("clientHeight");da=
Sa(da,qa);qa=da.css("height");da.css({height:0});da.appendTo(ka);da.animate({height:qa},200,function(){Ha.protectedAfterSlidedDown()})}};var Sa=function(da,qa){var Ga=$("<div>");Ga.css("z-index",1);Ga.addClass("sa-extra");Ha.protectedInitJqUi(da,qa,Ga);return Ga};this.protectedInitJqUi=function(da,qa,Ga){throw Error("Implement");};this.protectedAfterSlidedDown=function(){};this.hide=function(){ka&&(ka.remove(),ka=null)};this.protectedMethod={getComfortableSize:function(da,qa){var Ga=Math.max(.1,Math.min(.6,
da/window.screen.width));da=parseInt((-.7*Ga+1.02)*da);Ga=Math.max(.1,Math.min(.6,qa/window.screen.height));qa=parseInt((-.7*Ga+1.02)*qa);return[da,qa]},createPromptLabel:function(da){var qa=$("<div>");qa.text(da);qa.css({color:"#666","text-align":"center"});mb.layoutCtrlWithLRTB(qa,4,4,null);mb.layoutCtrlMiddleAlign(qa,20);return qa},initManualClosable:function(da){ka&&ka.on("click",function(qa){da.animate({height:0},200,function(){Ha.hide()})})},getJqModalLayer:function(){return ka}}};ub.ExecutingProgressParser=
new function(){Ja.call(this);var ka=this.protectedMethod;this.getWaitingText=function(){return sb.get("executingWaiting","\u65b9\u6848\u6267\u884c\u4e2d")};this.makeUiCreator=function(Ha){return function(Sa){var da=Ha.period;if("JOIN"==da){if(Sa)Sa=Ha.totalMs||0,Sa=sb.get("tableJoinWaitingPrompt","\u6b63\u5728\u5173\u8054\u8868\uff0c\u8017\u65f6#1\u79d2\u3002").replace("#1",ka.msToSeconds(Sa)),da=$("<span>"),da.text(Sa),Sa=da;else{Sa=ka.createJqTable();da=Ha.joins;for(var qa=0;qa<da.length;qa++){var Ga=
da[qa],ra=Ga.left,cb=Ga.right,Qa=Ga.usedMs;if(Ga.finished){Ga=ka.getDisplayFinished();var hb="";Qa=ka.letMeFinished}else Qa?(Ga=sb.get("tableJoining","\u5173\u8054\u4e2d"),hb=ka.getDisplaySeconds(ka.msToSeconds(Qa)),Qa=ka.letMeWaiting):(Ga=ka.getDisplayPending(),hb="",Qa=ka.letMePending);var Fb=ka.createJqTr(Sa,1<da.length);ka.letMeLeft(ka.createJqTd(Fb,ra));ka.letMeNoWrap(ka.createJqTd(Fb,sb.get("tableJoin","\u5173\u8054")));ka.letMeLeft(ka.createJqTd(Fb,cb));ka.letMeNoWrap(Qa(ka.createJqTd(Fb,Ga)));
ka.letMeNoWrap(ka.letMeRight(ka.createJqTd(Fb,hb)))}}return Sa}if("EXEC"==da)return Sa?(Sa=Ha.totalMs||0,Sa=sb.get("executingWaitingPrompt","\u7d2f\u8ba1\u8017\u65f6#1\u79d2\u3002").replace("#1",ka.msToSeconds(Sa)),da=$("<span>"),da.text(Sa),Sa=da):((Sa=Ha.visualEngine)?(qa=Sa.usedMs||0,Sa=sb.get("executingWaitingPromptB1","\u53ef\u89c6\u5316\u5f15\u64ce\u8017\u65f6#1\u79d2\u3002"),Sa=Sa.replace("#1",ka.msToSeconds(qa))):(Sa=Ha.cubeEngine,da=Sa.visitedDataRows||0,qa=Sa.usedMs||0,Sa=sb.get("executingWaitingPromptA1",
"\u6570\u636e\u8bbf\u95ee\u81f3#2\u884c\uff0c\u7d2f\u8ba1\u8017\u65f6#1\u79d2\u3002"),Sa=Sa.replace("#1",ka.msToSeconds(qa)),Sa=Sa.replace("#2",da)),da=$("<span>"),da.text(Sa),Sa=da),Sa;console&&console.log("Invalid progress model: "+JSON.stringify(Ha));return $("<span>")}}};ub.ConsumingStatistics=function(){Ja.call(this);var ka=this.protectedMethod,Ha=!1;this.setEmbeded=function(ra){Ha=ra};this.parse=function(ra,cb,Qa){var hb=$("<div>");hb.css({"background-color":"#fff",padding:"10px",overflow:"auto"});
if(ra){var Fb=hb.append;var pa=ra.tables;if(0==pa.length)pa=$("<div>"),pa.text("\u6ca1\u6709\u53d1\u751f\u5b9e\u65f6\u6570\u636e\u63d0\u53d6\u3002");else{var Ab=ra.totalMs;ra=$("<div>");ra.text("\u6570\u636e\u51c6\u5907\uff0c\u603b\u5171\u8017\u65f6\uff1a#1 \u79d2\u3002".replace("#1",qa(Ab)));var Z=[["\u6570\u636e\u8868"],["\u7c7b\u578b"],["\u6267\u884c\u53d6\u6570(\u79d2)",!0],["\u5199\u5165\u6570\u636e\u6587\u4ef6(\u79d2)",!0],["\u8bfb\u53d6\u884c\u6570",!0],["\u5199\u5165\u884c\u6570",!0]];Ab=
ka.createJqTable();for(var Wa=ka.letMeBold(ka.createJqTr(Ab,!0)),fb=0;fb<Z.length;fb++){var Va=Z[fb][1],Ka=ka.createJqTd(Wa,Z[fb][0]);Va&&da(Ka)}for(fb=0;fb<pa.length;fb++){Wa=pa[fb];Z=Wa.name;Va=Wa.items;for(var ab=Va.length,kb=0;kb<ab;kb++){Wa=Va[kb];var La=Wa.type,ob=Wa.exeMs,ta=Wa.rwMs;Ka=Wa.finished?!0:!1;var ja=Wa.readRows,Da=Wa.writeRows;Wa=ka.createJqTr(Ab,kb==ab-1);!Ka&&ka.letMePending(Wa);0==kb&&(Ka=ka.createJqTd(Wa,Z),1<ab&&(Ka.attr("rowspan",ab),Ka.css("vertical-align","top")));ka.createJqTd(Wa,
La);da(ka.createJqTd(Wa,ob||0===ob?qa(ob):""));da(ka.createJqTd(Wa,ta||0===ta?qa(ta):""));da(ka.createJqTd(Wa,Ga(ja)));da(ka.createJqTd(Wa,Ga(Da)))}}ka.createJqTr(Ab,!1).append($("<td>"));pa=$("<div>");pa.append(ra);pa.append(Ab);Ha||(ra=pa,Ab=ra.append,fb=$("<li>"),fb.text("\u5982\u679c\u4e0a\u8868\u7684\u8bfb\u53d6\u884c\u6570\u8fdc\u8fdc\u5927\u4e8e\u5199\u5165\u884c\u6570\uff0c\u53ef\u68c0\u67e5\u201c\u6570\u636e\u51c6\u5907\u201d\u8bbe\u7f6e\u4e2d\u7684\u8fc7\u6ee4\u9879\uff0c\u907f\u514d\u4f7f\u7528\u8ba1\u7b97\u5b57\u6bb5\u3001\u6570\u636e\u7c7b\u578b\u8f6c\u6362\u8fc7\u7684\u5b57\u6bb5\u505a\u8fc7\u6ee4\u3002"),
Wa=$("<li>"),Wa.text("\u5982\u679c\u754c\u9762\u957f\u65f6\u95f4\u505c\u987f\u5728\u201c\u6570\u636e\u51c6\u5907\u4e2d\u201d\uff0c\u53ef\u80fd\u9700\u8981\u8003\u8651\u5728\u4e1a\u52a1\u4e3b\u9898\u7684\u201c\u6570\u636e\u51c6\u5907\u201d\u8bbe\u7f6e\u4e2d\u9009\u62e9\u201c\u5b9a\u65f6\u9884\u63d0\u53d6\u201d\u3002"),Z=$("<ul>"),Z.append(fb),Z.append(Wa),Ab.call(ra,Z))}Fb.call(hb,pa);hb.append("<br>");if(cb){Fb=hb.append;pa=$("<div>");if(Wa=cb.finished?!0:!1)if((ra=cb.joins)&&0!=ra.length){Ka="\u6570\u636e\u5f15\u64ce\u8fdb\u884c\u8868\u5173\u8054\uff0c\u8017\u65f6 #1 \u79d2\u3002".replace("#1",
qa(cb.totalMs));pa.text(Ka);Wa=[["\u5de6\u8868"],["JOIN"],["\u53f3\u8868"],["\u8017\u65f6(\u79d2)",!0],["\u5de6\u8868\u884c\u6570",!0],["\u53f3\u8868\u884c\u6570",!0],["\u8fde\u63a5\u540e\u884c\u6570",!0]];cb=ka.createJqTable();fb=ka.letMeBold(ka.createJqTr(cb,!0));for(Ab=0;Ab<Wa.length;Ab++)Ka=Wa[Ab][0],Z=Wa[Ab][1],Ka=ka.createJqTd(fb,Ka),Z&&da(Ka);for(Ab=0;Ab<ra.length;Ab++)fb=ra[Ab],Wa=fb.finished?!0:!1,Z=fb.left,Ka=fb.right,Va=fb.usedMs,ab=fb.leftJoined,kb=fb.rightJoined,La=fb.join,ob=fb.leftRows,
ta=fb.rightRows,ja=fb.rows,fb=ka.createJqTr(cb,!0),!Wa&&ka.letMePending(fb),Sa(ka.createJqTd(fb,Z),ab),ka.createJqTd(fb,La),Sa(ka.createJqTd(fb,Ka),kb),da(ka.createJqTd(fb,Va?Va||0===Va?qa(Va):"":"\u7f13\u5b58")),da(ka.createJqTd(fb,Ga(ob))),da(ka.createJqTd(fb,Ga(ta))),da(ka.createJqTd(fb,Ga(ja)));ra=$("<div>");ra.append(pa);ra.append(cb);Ha||(cb=ra.append,pa=$("<li>"),pa.text("\u5982\u679c\u957f\u65f6\u95f4\u8868\u5173\u8054\uff0c\u53ef\u68c0\u67e5\u201c\u6570\u636e\u51c6\u5907\u201d\u8bbe\u7f6e\u4e2d\u7684\u8868\u95f4\u5173\u7cfb\uff0c\u907f\u514d\u5173\u8054\u8868\u4e24\u8fb9\u90fd\u201c\u4fdd\u7559\u65e0\u6cd5\u5173\u8054\u7684\u884c\u201d\u3002"),
Ab=$("<ul>"),Ab.append(pa),cb.call(ra,Ab));cb=ra}else pa.text("\u6ca1\u6709\u8868\u5173\u8054\u3002"),cb=pa;else pa.text("\u8868\u5173\u8054\uff0c\u6ca1\u6709\u6b63\u5e38\u5b8c\u6210\u3002"),cb=pa;Fb.call(hb,cb);hb.append("<br>");Qa?(cb=hb.append,Fb=$("<div>"),pa=!1,Qa.finished&&(ra=Qa.totalMs,Qa=Qa.cubeEngine)&&(pa=!0,Qa=Qa.visitedDataRows,ra="\u6267\u884c\u65b9\u6848\uff0c\u8bbf\u95ee\u6570\u636e #2 \u884c\uff0c\u591a\u7ef4\u8ba1\u7b97\u5f15\u64ce\u3001\u53ef\u89c6\u5316\u5f15\u64ce\u5171\u8017\u65f6 #1 \u79d2\u3002".replace("#1",
qa(ra)),ra=ra.replace("#2",Qa),Fb.text(ra)),pa||Fb.text("\u6267\u884c\u65b9\u6848\uff0c\u6ca1\u6709\u6b63\u5e38\u5b8c\u6210\u3002"),cb.call(hb,Fb)):(Qa=$("<div>"),Qa.text("\u65b9\u6848\u6267\u884c\u672a\u6b63\u5e38\u7ed3\u675f\u3002"),hb.append(Qa))}else Qa=$("<div>"),Qa.text("\u8868\u5173\u8054\u672a\u6b63\u5e38\u7ed3\u675f\u3002"),hb.append(Qa)}else Qa=$("<div>"),Qa.text("\u6570\u636e\u51c6\u5907\u672a\u6b63\u5e38\u7ed3\u675f\u3002"),hb.append(Qa);return hb};var Sa=function(ra,cb){if(ra.text()!=
cb){var Qa=$("<div>");Qa.text(cb);Qa.css("color","#abc");ra.append(Qa)}},da=function(ra){ka.letMeNoWrap(ka.letMeRight(ra))},qa=function(ra){ra+="";var cb=ra.length;if(3<cb){var Qa=ra.substring(0,cb-3);ra=ra.substring(cb-3);return Qa+"."+ra}for(Qa=cb;3>Qa;Qa++)ra="0"+ra;return"0."+ra},Ga=function(ra){return ra||0===ra?ra+"":""}}})();(function(){"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.exportmanage&&(com.kingdee.bos.qing.exportmanage={});var Ua=com.kingdee.bos.qing.exportmanage,Mb,ub,mb;(function(){var qb=com.kingdee.bos.qing;Mb=qb.CodeLoader;qb=com.kingdee.bos.qing.ui.component;ub=qb.MenuModel;mb=qb.MenuItemModel})();Ua.ExportMenuCreator=
function(){var qb,sb,Vb,Lb,xa;this.create=function(qa,Ga,ra,cb,Qa){Lb=ra;qb=Qa;ra=[];if(qa||Ga){Qa=new ub;if(qa){var hb=new ub;hb.setText("PDF");hb.addItemModel(eb(da,qb("printSubMenuSetting","\u9875\u9762\u8bbe\u7f6e")+"..."));hb.addItemModel(eb(ka,qb("exportMenuMormal","\u5bfc\u51fa")));Qa.addItemModel(eb(oa,"EXCEL..."));Qa.addItemModel(eb(Ha,"PNG"));Qa.addItemModel(hb)}Ga&&(qa?(hb=new ub,hb.setText(qb("printMenuNormal","\u6253\u5370")),Qa.addSeperator(),Qa.addItemModel(hb)):hb=Qa,hb.addItemModel(eb(da,
qb("printSubMenuSetting","\u9875\u9762\u8bbe\u7f6e")+"...")),hb.addItemModel(eb(Sa,qb("printSubMenuPreview","\u6253\u5370")+"...")));Vb=qb("exportMenuMix","\u5bfc\u51fa/\u6253\u5370");qa?Ga||(Vb=qb("exportMenuMormal","\u5bfc\u51fa")):Vb=qb("printMenuNormal","\u6253\u5370");sb=cb(Qa,"btn_export",Vb);sb.setEnabled(!1);ra.push(sb)}return ra};var eb=function(qa,Ga){qa=new mb(qa);qa.setText(Ga);return qa},Ma=function(qa){var Ga=Mb.createSafety();Ga.pushJs("export/export-manage.js");Ga.pushI18n("export",
"export-manage");Ga.load(function(){xa||(xa=new Ua.ExportManage,xa.setDependentApi(Lb),xa.setMenuStateUpdater(Ja));qa()})},Ja=function(qa){qa?(sb.setText(qb("exportMenuDoing","\u6b63\u5728\u751f\u6210...")),sb.setEnabled(!1)):(sb.setText(Vb),sb.setEnabled(!0))},oa=function(qa){Ma(function(){xa.exportExcel()})},ka=function(qa){Ma(function(){xa.exportPdf()})},Ha=function(qa){Ma(function(){xa.exportPng()})},Sa=function(qa){Ma(function(){xa.printPreview()})},da=function(qa){Ma(function(){xa.printSetting()})}}})();(function(){function Ua(){var d=this,b=new ea,e,c,a,q,u,v=!1,y,C,P,U,fa,wa,ma,Ea,Xa=!1,bb,Jb=!1,Ya,nb,wb,va,Y=!1;this.setLost=function(N){Y=N};this.getTable=function(){return nb};this.setTable=function(N){nb=N};this.addPropertyChangeListener=function(N){b.addListener(N)};this.removePropertyChangeListener=function(N){b.removeListener(N)};var J=function(N){b.fireEvent(function(X){X(new eb(d),N)})};this.getFullName=function(){wb||(wb=x.encodeFullName(nb.getName(),e));return wb};this.getFullDisplayName=
function(){va||(va=x.encodeFullName(d.getParentDisplayName(),c));return va};this.getParentDisplayName=function(){var N=nb.searchSubViewContainsField(d);return N?N.getDisplayName():nb.getDisplayName()};this.setPureName=function(N){e=N;wb=null};this.getPureName=function(){return e};this.setDisplayName=function(N){c!=N&&(c=N,va=null,J(Ua.KEY_DISPLAYNAME))};this.getDisplayName=function(){return c};this.getComplexText=function(){return" ["+d.getDisplayName()+"] "};this.setDataType=function(N){a=N};this.getDataType=
function(){return a};this.setFormatString=function(N){q!=N&&(q=N,J(Ua.KEY_FORMATSTRING))};this.getFormatString=function(){return q};this.setFiscalYearStart=function(N){u!=N&&(u=N,J(Ua.KEY_FISCALYEARSTART))};this.getFiscalYearStart=function(){return u};this.getSortAccording=function(){return fa};this.getCustomOrder=function(){return wa};this.isOrderDefined=function(){return fa||wa};this.defineOrder=function(N,X){fa=N;wa=X;J(Ua.KEY_SORTACCORDING)};this.setFormula=function(N){ma!=N&&(ma=N,J(Ua.KEY_FORMULA))};
this.getFormula=function(){return ma};this.getFormulaDependence=function(){return Ea};this.setFormulaDependence=function(N){Ea=N};this.getFormulaAggStatus=function(){return bb};this.setFormulaAggStatus=function(N){bb!=N&&(bb=N,J(Ua.KEY_FORMULA))};this.isRelativeAggregation=function(){return bb==Ua.FORMULA_STATUS_AGG||bb==Ua.FORMULA_STATUS_INTERLINE||bb==Ua.FORMULA_STATUS_WITHTOTAL||Ya};this.isInvalid=function(){return Xa};this.setInvalid=function(N){Xa!=N&&(Xa=N,J(Ua.KEY_FORMULA))};this.setHierachy=
function(N){C=N};this.getHierachy=function(){return C};this.isUserCreated=function(){return Jb};this.setUserCreated=function(N){Jb=N};this.isPreAgg=function(){return Ya};this.isHide=function(){return v};this.getGroupName=function(){return y};this.isParentChildDimension=function(){return y?!0:!1};this.isCanAsDimension=function(){return d.isRelativeAggregation()?!1:!0};this.isCanAsMeasure=function(){return!0};this.getDimensionNecessity=function(){return P};this.isNecessaryDimension=function(){if(d.isParentChildDimension()){var N=
nb.getParentChildDimensionByName(y);if(null!=N)return N.isNecessaryDimension()}else if(Lb.isNecessary(P))return!0;return!1};this.getCustomPeriod=function(){return U};this.mergeFrom=function(N){c=N.getDisplayName();a=N.getDataType();y=N.getGroupName();P=N.getDimensionNecessity();v=N.isHide();U=N.getCustomPeriod();Ya=N.isPreAgg()};this.clone=function(){var N=new Ua;N.fromJsonObject(d.toJsonObject());N.setInvalid(Xa);N.setFormulaAggStatus(bb);return N};this.fromJsonObject=function(N){va=wb=null;e=N.name;
c=N.displayName;a=N.dataType;q=N.formatString;var X=parseInt(N.fiscalYearStart);X&&(u=X);fa=N.sortAccording;wa=N.customOrder;if(X=N.formula)ma=X,Ea=N.dependence,Xa="true"==N.invalid?!0:!1,bb=N.formulaAggStaus;Jb="true"==N.userCreated?!0:!1;"true"==N.preAgg&&(Ya=!0);v="true"==N.hide?!0:!1;y=N.group;P=N.necessary;U=(N=N.customPeriod)?N:null};this.toJsonObject=function(){var N={};N.name=e;N.displayName=c;N.dataType=a;N.formatString=q;u&&(N.fiscalYearStart=u);fa&&(N.sortAccording=fa);wa&&(N.customOrder=
wa);ma&&(N.formula=ma,N.dependence=Ea);Jb&&(N.userCreated="true");Ya&&(N.preAgg="true");v&&(N.hide="true");y&&(N.group=y);P&&(N.necessary=P);U&&(N.customPeriod=U);Y&&(N.lost=!0);return N}}function Mb(d){var b=this,e=d,c,a,q=[],u,v=new ea,y,C;this.addSthChangedListener=function(Ya){v.addListener(Ya)};this.removeSthChangedListener=function(Ya){v.removeListener(Ya)};this.removeAllSthChangedListener=function(){v.removeAllListener()};var P=function(Ya,nb){v.fireEvent(function(wb){wb(b,Ya,nb)})},U=function(Ya,
nb){P(nb,Ya)};this.getName=function(){return e};this.getDisplayName=function(){return c};this.getParentName=function(){return a};this.getFieldCount=function(){return q.length};this.getField=function(Ya){return q[Ya]};this.insertField=function(Ya,nb){q.splice(nb,0,Ya);fa(Ya);P()};var fa=function(Ya){Ya.addPropertyChangeListener(U);Ya.setTable(b)};this.removeField=function(Ya){if(0>Ya||Ya>=q.length)throw Error("Illegal arguments.");Ya=q.splice(Ya,1)[0];Ya.removePropertyChangeListener(U);Ya.setTable(null);
P()};this.searchMetaField=function(Ya){var nb;wa(q,function(wb){return Ya==wb.getPureName()?(nb=wb,!0):!1});return nb};this.isAnyCalculationFieldExist=function(){var Ya=!1;wa(q,function(nb){return nb.getFormula()?Ya=!0:!1});return Ya};var wa=function(Ya,nb){for(var wb=0;wb<Ya.length&&!nb(Ya[wb]);wb++);};this.searchHierachy=function(Ya){var nb=-1,wb=null;wa(q,function(va){if(va=va.getHierachy())for(var Y=0;Y<va.length;Y++)if(Ya==va[Y])return nb=Y,wb=va,!0;return!1});return 0<=nb?[wb,nb]:null};this.getParentChildDimensionByName=
function(Ya){if(u)for(var nb=0;nb<u.length;nb++)if(u[nb].getName()==Ya)return u[nb];return null};this.getNecessaryParentChildDimensions=function(){var Ya=[];if(u)for(var nb=0;nb<u.length;nb++){var wb=u[nb];wb.isNecessaryDimension()&&Ya.push(wb)}return Ya};this.getDimensionNecessityMetaFields=function(){var Ya=[];if(u)for(var nb=0;nb<u.length;nb++){var wb=u[nb];wb.getDimensionNecessity()&&(wb=b.searchMetaField(wb.getIdFieldName()),Ya.push(wb))}for(nb=0;nb<q.length;nb++)wb=q[nb],wb.getDimensionNecessity()&&
Ya.push(wb);return Ya};this.hasSubViews=function(){return y&&0<y.length};this.getSubViews=function(Ya){!y&&Ya&&(y=[]);return y};this.getViewItems=function(Ya){!C&&Ya&&(C=[]);return C};this.traversalSubViews=function(Ya){ma(y,Ya)};var ma=function(Ya,nb){for(Ya=Ya.slice();0<Ya.length;){var wb=Ya.shift();if(nb(wb))break;(wb=wb.getSubViews())&&(Ya=Ya.concat(wb.slice()))}};this.updateFieldAtView=function(Ya,nb,wb,va,Y){var J=C;wb&&y&&b.traversalSubViews(function(T){var R=!1;T.getName()==wb&&(J=T.getViewItems(!0),
R=!0);return R});var N=-1;if(J){var X=J;if(va)for(var Q=0;Q<J.length;Q++){var G=J[Q];if(G instanceof mb&&G.getName()==va){X=G.getFieldNames();break}}if(nb)Y="number"==typeof Y&&0<=Y?Y:X.length,X.splice(Y,0,Ya);else for(Q=X.length-1;0<=Q;Q--)X[Q]==Ya&&(X.splice(Q,1),N=Q)}return N};this.searchSubViewContainsField=function(Ya,nb){if(!y)return null;var wb=Ya.getPureName(),va=null;b.traversalSubViews(function(Y){var J=!1,N;a:{if(N=Y.getViewItems())for(var X=0;X<N.length;X++){var Q=N[X];if(Q==wb){N=!0;
break a}else if(Q instanceof mb)for(var G=Q.getFieldNames(),T=0;T<G.length;T++)if(wb==G[T]){nb&&(nb[0]=Q);N=!0;break a}}N=!1}N&&(va=Y,J=!0);return J});return va};this.carryOut=function(){return[q,u,y,C]};this.mergeFrom=function(Ya){c=Ya.getDisplayName();a=Ya.getParentName();var nb=Ya.carryOut(),wb=nb[0];Ya=nb[2];var va=nb[3];u=nb[1];var Y=[],J=[];for(nb=0;nb<wb.length;nb++){for(var N=wb[nb],X,Q=!1,G=0;G<q.length;G++)if(X=q[G],X.getPureName()==N.getPureName()){X.mergeFrom(N);Q=Y[G]=!0;break}Q||(X=
N.clone(),X.setTable(b));J.push(X)}for(nb=0;nb<q.length;nb++)Y[nb]||(X=q[nb],X.isUserCreated()&&J.push(X));q=J;wb={};for(nb=0;nb<q.length;nb++)X=q[nb],wb[X.getPureName()]=X;if((y=Xa(y,Ya,wb))||va){!C&&(C=[]);for(var T in wb)C.push(T);C=Ea(C,va,wb)}else C=null};var Ea=function(Ya,nb,wb){var va={},Y=null;if(nb){Y=[];for(var J=0;J<nb.length;J++){var N=nb[J];if(N instanceof mb){var X={},Q=N.clone(X);Y.push(Q);va[N.getName()]=[Q,X]}else Y.push(N),va[N]=!0}}if(Ya)for(J=0;J<Ya.length;J++)if(N=Ya[J],N instanceof
mb){if(X=va[N.getName()]){Q=X[0];X=X[1];N=N.getFieldNames();for(var G=0;G<N.length;G++){var T=N[G];X[T]||((nb=wb[T])&&nb.isUserCreated()&&Q.getFieldNames().push(T),delete wb[T])}}}else va[N]||((nb=wb[N])&&nb.isUserCreated()&&(!Y&&(Y=[]),Y.push(N)),delete wb[N]);return Y},Xa=function(Ya,nb,wb){if(!nb)return null;for(var va=[],Y=0;Y<nb.length;Y++)va.push(nb[Y].clone());if(!Ya)return va;ma(va,function(J){var N=J.getName(),X=null;ma(Ya,function(G){var T=!1;N==G.getName()&&(X=G.getViewItems(),T=!0);return T});
var Q=Ea(X,J.getViewItems(),wb);J.carryInViewItem(Q)});return va};this.clone=function(){for(var Ya=[],nb=0;nb<q.length;nb++)Ya.push(q[nb].clone());var wb;u&&(wb=bb(Jb(u)));if(y){var va=[];for(nb=0;nb<y.length;nb++)va.push(y[nb].clone())}if(C){var Y=[];for(nb=0;nb<C.length;nb++){var J=C[nb];J instanceof mb?(J=J.clone(),Y.push(J)):Y.push(J)}}nb=new Mb;nb.carryIn(e,c,a,Ya,wb,va,Y);return nb};this.carryIn=function(Ya,nb,wb,va,Y,J,N){e=Ya;c=nb;a=wb;q=va;u=Y;for(Ya=0;Ya<q.length;Ya++)fa(q[Ya]);y=J;C=N};
this.fromJsonObject=function(Ya){e=Ya.name;c=Ya.displayName;a=Ya.parentName;var nb=Ya.fields,wb=[];if(nb&&0<nb.length)for(var va=0;va<nb.length;va++){var Y=nb[va],J=new Ua;J.fromJsonObject(Y);fa(J);wb.push(J)}q=wb;u=bb(Ya.parentChildDimensions);ub.itemsFromJsonObject(b,Ya);ub.subViewsFromJsonObject(b,Ya)};var bb=function(Ya){if(Ya&&0<Ya.length){for(var nb=[],wb=0;wb<Ya.length;wb++){var va=Ya[wb],Y=new Lb;Y.fromJsonObject(va);nb.push(Y)}return nb}return null};this.toJsonObject=function(){var Ya={};
Ya.name=e;Ya.displayName=c;a&&(Ya.parentName=a);for(var nb=q,wb=[],va=0;va<nb.length;va++){var Y=nb[va].toJsonObject();wb.push(Y)}Ya.fields=wb;u&&(Ya.parentChildDimensions=Jb(u));ub.itemsToJsonObject(b,Ya);ub.subViewsToJsonObject(b,Ya);return Ya};var Jb=function(Ya){for(var nb=[],wb=0;wb<Ya.length;wb++){var va=Ya[wb].toJsonObject();nb.push(va)}return nb}}function ub(d,b,e){var c=this,a,q;this.getName=function(){return d};this.getDisplayName=function(){return b};this.getDisplayAs=function(){return e};
this.getSubViews=function(u){!a&&u&&(a=[]);return a};this.getViewItems=function(u){!q&&u&&(q=[]);return q};this.carryInViewItem=function(u){q=u};this.clone=function(){var u=new ub(d,b,e);if(a)for(var v=0;v<a.length;v++){var y=a[v];u.getSubViews(!0).push(y.clone())}if(q)for(v=0;v<q.length;v++)y=q[v],y instanceof mb?u.getViewItems(!0).push(y.clone()):u.getViewItems(!0).push(y);return u};this.fromJsonObject=function(u){ub.itemsFromJsonObject(c,u);ub.subViewsFromJsonObject(c,u)};this.toJsonObject=function(){var u=
{};ub.itemsToJsonObject(c,u);ub.subViewsToJsonObject(c,u);return u}}function mb(d,b){var e=[];this.getName=function(){return d};this.getDisplayName=function(){return b};this.getFieldNames=function(){return e};this.clone=function(c){for(var a=new mb(d,b),q=0;q<e.length;q++){var u=e[q];a.getFieldNames().push(u);c&&(c[u]=!0)}return a}}function qb(){var d=this,b=[],e,c,a=new ea;this.addChangedListener=function(v){a.addListener(v)};this.removeChangedListener=function(v){a.removeListener(v)};this.removeAllChangedListener=
function(){a.removeAllListener()};var q=function(v){a.fireEvent(function(y){y(d,v)})},u=function(v,y,C){q(y)};this.isMultiTableMode=function(){return!(1==b.length&&!b[0].getName())};this.getTableCount=function(){return b.length};this.getTable=function(v){return b[v]};this.searchTableByName=function(v){for(var y=0;y<b.length;y++){var C=b[y];if(C.getName()==v)return C}return null};this.searchMetaField=function(v){var y=x.decodeFullName(v);v=y[0];y=y[1];return(v=d.isMultiTableMode()?d.searchTableByName(v):
d.getTable(0))?v.searchMetaField(y):null};this.isAnyCalculationFieldExist=function(){for(var v=0;v<b.length;v++)if(b[v].isAnyCalculationFieldExist())return!0;return!1};this.getTableTreeLevel=function(v){var y=0;if(v.getParentName())for(;v=d.searchTableByName(v.getParentName());)y++;return y};this.merge=function(v){for(var y=[],C=0;C<v.getTableCount();C++){for(var P=v.getTable(C),U,fa=!1,wa=0;wa<b.length;wa++)if(U=b[wa],U.getName()==P.getName()){U.mergeFrom(P);fa=!0;break}fa||(U=P.clone(),U.addSthChangedListener(u));
y.push(U)}b=y;d.setEliminations(v.getEliminations());c=v.getSrcMode();q()};this.getSrcMode=function(){return c};this.isMdOfSrcMode=function(){return"MD"==c};this.isPreaggOfSrcMode=function(){return"PRE_AGG"==c};this.isNormalSrcMode=function(){return!c||"ER"==c};this.getDimensionNecessityMetaFields=function(){for(var v=[],y=0;y<b.length;y++)v=v.concat(b[y].getDimensionNecessityMetaFields());return v};this.setEliminations=function(v){e=v};this.getEliminations=function(){return e};this.getEliminationKeyMetaFields=
function(){var v=[];if(e&&0<e.length)for(var y=0;y<e.length;y++){var C=e[y].getKeyFieldName();C=d.searchMetaField(C);v.push(C)}return v};this.carryIn=function(v,y){b=v;for(v=0;v<b.length;v++)b[v].addSthChangedListener(u);c=y};this.createExecutingCopy=function(v){for(var y=[],C={},P=0;P<v.length;P++){var U=v[P],fa=U.getTable();if(fa){var wa=fa.getName(),ma=C[wa];if(!ma){ma=[];var Ea=fa.carryOut()[1],Xa=new Mb;Xa.carryIn(wa,fa.getDisplayName(),null,ma,Ea);C[wa]=ma;y.push(Xa)}ma.push(U)}}v=new qb;v.carryIn(y,
c);v.setEliminations(e);return v};this.copy=function(){var v=new qb;v.fromJsonObject(d.toJsonObject());return v};this.fromJsonObject=function(v){b=[];for(var y=v.tables,C=0;C<y.length;C++){var P=y[C],U=new Mb;U.fromJsonObject(P);U.addSthChangedListener(u);b.push(U)}if(y=v.eliminations){C=[];for(P=0;P<y.length;P++){U=y[P];var fa=new Vb;fa.fromJsonObject(U);C.push(fa)}y=C}else y=null;e=y;c=v.src};this.toJsonObject=function(){for(var v=[],y=0;y<b.length;y++)v.push(b[y].toJsonObject());y={};y.tables=
v;if(e){v=e;for(var C=[],P=0;P<v.length;P++)C.push(v[P].toJsonObject());y.eliminations=C}c&&(y.src=c);return y}}function sb(d){var b=this,e=[],c={};this.getUsingMetaFields=function(){return e};this.checkField=function(q){if(a(q)&&d){var u=q.getFormulaDependence();if(u)for(var v=0;v<u.length;v++){var y=d.searchMetaField(u[v]);y&&b.checkField(y)}q.getGroupName()&&(u=q.getTable(),v=u.getParentChildDimensionByName(q.getGroupName()),null!=v&&(y=x.encodeFullName(u.getName(),v.getIdFieldName()),a(d.searchMetaField(y)),
y=x.encodeFullName(u.getName(),v.getParentFieldName()),a(d.searchMetaField(y))));q.getSortAccording()&&(q=d.searchMetaField(q.getSortAccording()))&&b.checkField(q)}};var a=function(q){return c[q.getFullName()]?!1:(e.push(q),c[q.getFullName()]=!0)}}function Vb(){var d,b;this.getKeyFieldName=function(){return d};this.toJsonObject=function(){var e={};e.idField=d;e.associatedFields=b;return e};this.fromJsonObject=function(e){d=e.idField;b=e.associatedFields}}function Lb(){var d,b,e,c,a,q,u;this.getName=
function(){return d};this.getAlias=function(){return b};this.getIdFieldName=function(){return e};this.getParentFieldName=function(){return c};this.getDisplayFieldName=function(){return a};this.getDimensionNecessity=function(){return u};this.isNecessaryDimension=function(){return Lb.isNecessary(u)};this.fromJsonObject=function(v){d=v.name;b=v.alias;e=v.idFieldName;c=v.parentIdFieldName;a=v.displayFieldName;q=v.sortAccordingFieldName;u=v.necessary};this.toJsonObject=function(){var v={};v.name=d;v.alias=
b;v.idFieldName=e;v.parentIdFieldName=c;v.displayFieldName=a;v.sortAccordingFieldName=q;v.necessary=u;return v}}function xa(){var d=this,b=new ea,e,c,a,q,u,v=!0,y,C,P,U,fa,wa,ma=!0,Ea=!1,Xa,bb,Jb,Ya;this.addPropertyChangeListener=function(Y){b.addListener(Y)};this.removePropertyChangeListener=function(Y){b.removeListener(Y)};var nb=function(Y,J){var N=new Ma(d);J&&N.setMetaFieldSubEventTarget(J);b.fireEvent(function(X){X(N,Y)})};this.clearListener=function(){b.removeAllListener();a.removePropertyChangeListener(va)};
this.setMetaField=function(Y){a&&a.removePropertyChangeListener(va);a=Y};this.getMetaField=function(){return a};this.getId=function(){return q};this.setId=function(Y){q=Y};this.setNumberFormat=function(Y){y!=Y&&(y=Y,nb(xa.KEY_NUMBERFORMAT))};this.getNumberFormat=function(){return y?y:a.getFormatString()};this.setDateFormat=function(Y){C!=Y&&(C=Y,nb(xa.KEY_DATEFORMAT))};this.getDateFormat=function(){return C};this.setContinuousColor=function(Y){P=Y;nb(xa.KEY_CONTINUOUSCOLOR)};this.getContinuousColor=
function(){return P};this.setDiscreteColor=function(Y){U=Y;nb(xa.KEY_DISCRETECOLOR)};this.getDiscreteColor=function(){return U};this.setRole=function(Y,J){if(Y!==xa.ROLE_DIMENSION&&Y!==xa.ROLE_MEASURE)throw Error("Illegal argument: "+Y);if(u!=Y||fa!=J)u=Y,fa=J?J:null,nb(xa.KEY_ROLE)};this.getRole=function(){return u};this.isDimension=function(){return u==xa.ROLE_DIMENSION?!0:!1};this.isMeasure=function(){return u==xa.ROLE_MEASURE?!0:!1};this.setContinuous=function(Y){v=Y};this.isContinuous=function(){return v};
this.getAggregation=function(){return fa};this.setTotalUsing=function(Y){wa!=Y&&(wa=Y,nb(xa.KEY_TOTALUSING))};this.getTotalUsing=function(){return wa};this.setTotalDisplayHidden=function(Y){Y=!Y;ma!=Y&&(ma=Y,nb(xa.KEY_TOTALDISPLAY))};this.isTotalDisplayHidden=function(){return!ma};this.setShowSubtotal=function(Y){Ea!=Y&&(Ea=Y,nb(xa.KEY_SUBTOTAL))};this.isShowSubtotal=function(){return Ea};this.setPartValue=function(Y){Xa!=Y&&(Xa=Y,nb(xa.KEY_PARTVALUE))};this.getPartValue=function(){return Xa};this.setSort=
function(Y){bb!=Y&&(bb=Y,nb(xa.KEY_SORT))};this.getSort=function(){return bb};this.setQuickSetup=function(Y){Jb!=Y&&(Jb=Y,nb(xa.KEY_QUICKSETUP))};this.getQuickSetup=function(){return Jb};this.setDisplayName=function(Y){Ya!=Y&&(Ya=Y,nb(xa.KEY_DISPLAYNAME))};this.getDisplayName=function(){return Ya};this.getText=function(){return Ya?Ya:wb(a.getDisplayName())};var wb=function(Y){if(u==xa.ROLE_DIMENSION){var J=Xa?xa.partValueToString(Xa):null;return(J?J+":":"")+Y}if(u==xa.ROLE_MEASURE)return J=xa.aggregationToString(fa),
J+":"+Y;throw Error("Unknown role: "+u);};this.getTextTooltips=function(){var Y=wb("["+a.getFullDisplayName()+"]");Jb&&(Y=Y+"("+xa.quickSetupToString(Jb),Y+=")");return Y};this.getTextForExhibition=function(){if(Ya)return Ya;var Y=a.getDisplayName(),J=Xa?xa.partValueToString(Xa):null;return Y+(J?"("+J+")":"")};this.getComplexText=function(){return" ["+d.getText()+"] "};this.setInvalidPromptListener=function(Y){e=Y};this.getInvalidPrompt=function(){return c};this.setInvalidPrompt=function(Y){var J=
!1;Y.isCancel()?c&&c.getLevel()==Y.getLevel()&&(c=null,J=!0):c?Y.getLevel()<=c.getLevel()&&(c=Y,J=!0):(c=Y,J=!0);J&&e&&e()};this.isInvalid=function(){return c?!0:!1};var va=function(Y,J){if(J==Ua.KEY_FORMATSTRING)nb(J,Y),y||nb(xa.KEY_NUMBERFORMAT,Y);else if(J==Ua.KEY_FISCALYEARSTART||J==Ua.KEY_SORTACCORDING)nb(J,Y);else if(J==Ua.KEY_DISPLAYNAME||J==Ua.KEY_FORMULA)a.getDataType()==Ua.DT_DATE?!Xa&&d.setPartValue(xa.PARTVALUE_DATE_YEAR):Xa&&(Xa=null),nb(xa.KEY_FORMULA,Y)};this.clone=function(){var Y=
d.protectedCreateInstance(),J=d.toJsonObject();Y.fromJsonObject(J,{searchMetaField:function(N){return a}});return Y};this.protectedCreateInstance=function(){throw Error("Override me.");};this.toJsonObject=function(){var Y={};Y.id=q;Y.name=a.getFullName();Y.displayName=Ya;Y.role=u;Y.isContinuous=v;u==xa.ROLE_MEASURE?(Y.aggregation=fa,Y.totalUsing=wa,Y.isTotalDisplay=ma,Jb&&(Y.quickSetup=Jb)):(Ea&&(Y.isShowSubtotal=!0),Xa&&(Y.partValue=Xa),bb&&(Y.sort=bb));y&&(Y.numberFormat=y);C&&(Y.dateFormat=C);
P&&(Y.continuousColor=P.toJsonObject());U&&(Y.discreteColor=U.toJsonObject());return Y};this.fromJsonObject=function(Y,J){q=Y.id;var N=Y.name;a=J.searchMetaField(N);Ya=Y.displayName;if(null==a){var X=x.decodeFullName(N);N=X[0];X=X[1];J=J.isMultiTableMode()?J.searchTableByName(N):J.getTable(0);a=new Ua;a.setLost(!0);a.setTable(J?J:new Mb(N));a.setPureName(X);a.setDisplayName(X);c=new xa.InvalidPrompt;c.setLevel(xa.InvalidPrompt.LEVEL_META_LOST,!0)}y=(J=Y.numberFormat)?J:null;C=(J=Y.dateFormat)?J:null;
P=null;if(J=Y.continuousColor)P=new l,P.fromJsonObject(J);U=null;if(J=Y.discreteColor)U=new na,U.fromJsonObject(J);u=Y.role;v=Y.isContinuous;u==xa.ROLE_MEASURE?(fa=Y.aggregation,ma=Y.isTotalDisplay?!0:!1,wa=Y.totalUsing,Jb=Y.quickSetup):(Ea=Y.isShowSubtotal?!0:!1,Xa=Y.partValue,bb=Y.sort)};this.protectedMethod={bindMetaEvent:function(){a.addPropertyChangeListener(va)},innerSetDiscreteColor:function(Y){U=Y}}}function eb(d){this.getMetaField=function(){return d};this.toString=function(){return d.constructor.name}}
function Ma(d){var b;this.getField=function(){return d};this.setMetaFieldSubEventTarget=function(e){b=e};this.getMetaFieldSubEventTarget=function(){return b};this.toString=function(){return d.constructor.name+(b?"-"+b.toString():"")};this.getSubEventMetaField=function(){return b?b.getMetaField():null}}function Ja(){this.fromJsonObject=function(d){throw Error("Override me");};this.updateFromJsonObject=function(d){}}function oa(){function d(){var c,a,q=0,u=!1;this.getValue=function(){return c};this.getDisplayText=
function(){return a};this.isValueNull=function(){return c==Ga.STRING_NULL_VALUE};this.getLevel=function(){return q};this.isSelected=function(){return u};this.fromJsonObject=function(v){c=v.value;c=void 0==c?Ga.STRING_NULL_VALUE:c;a=v.text;q=v.level;u=!1!==v.selected}}Ja.call(this);var b=this,e;this.getItems=function(){return e};this.updateFromJsonObject=function(c){b.fromJsonObject(c)};this.fromJsonObject=function(c){e=[];c=c.nodes;for(var a=0;a<c.length;a++){var q=c[a],u=new d;u.fromJsonObject(q);
e.push(u)}}}function ka(){function d(){var c,a,q=!1;this.getValue=function(){return c};this.getDisplayText=function(){return void 0==a?c==Ga.STRING_NULL_VALUE?"":c:a};this.isValueNull=function(){return c==Ga.STRING_NULL_VALUE};this.isSelected=function(){return q};this.fromJsonObject=function(u){c=u.value;c=void 0==c?Ga.STRING_NULL_VALUE:c;a=u.text;q=!1!==u.selected}}Ja.call(this);var b=this,e;this.getItems=function(){return e};this.updateFromJsonObject=function(c){b.fromJsonObject(c)};this.fromJsonObject=
function(c){e=[];c=c.values;for(var a=0;a<c.length;a++){var q=c[a],u=new d;u.fromJsonObject(q);e.push(u)}}}function Ha(){Ja.call(this);var d=this,b,e,c,a;this.getMin=function(){return b};this.getMax=function(){return e};this.getSelectedMin=function(){return c};this.getSelectedMax=function(){return a};this.updateFromJsonObject=function(q){d.fromJsonObject(q)};this.fromJsonObject=function(q){b=q.min?q.min:0;e=q.max?q.max:0;c=q.selectedMin?q.selectedMin:0;a=q.selectedMax?q.selectedMax:0}}function Sa(){Ja.call(this);
var d=this,b,e;this.getFromDateMs=function(){return b};this.getToDateMs=function(){return e};this.updateFromJsonObject=function(c){d.fromJsonObject(c)};this.fromJsonObject=function(c){b=c.fromDate?c.fromDate:(new Date).getTime();e=c.toDate?c.toDate:(new Date).getTime()}}function da(){var d;Ja.call(this);this.fromJsonObject=function(b){d=b.state};this.getState=function(){return d}}function qa(){var d=this,b=!0,e=!1,c=!0,a,q=qa.STATE_VALID,u,v=new ea,y=new ea,C=new ea;this.setPreparedModel=function(wa){q=
d.protectedCheckPreparedModel(wa);q==qa.STATE_VALID&&(u=wa,b&&d.protectedAfterSetFullValue(!0))};this.getPreparedModel=function(){return u};this.innerCarryPreparedModel=function(wa){u=wa};this.setFullValue=function(wa){b=wa;d.protectedAfterSetFullValue(b);P()};this.isFullValue=function(){return b};this.protectedAfterSetFullValue=function(wa){throw Error("Override me.");};this.setJustShowAffected=function(wa){e!=wa&&(e=wa,fa(qa.KEY_AFFECTED))};this.isJustShowAffected=function(){return e};this.setOnShow=
function(wa){c!=wa&&(c=wa,fa(qa.KEY_ONSHOW))};this.isOnShow=function(){return c};this.updatePreparedModel=function(wa){u&&(u.updateFromJsonObject(wa),b&&d.protectedAfterSetFullValue(!0),U())};this.setAssociatedField=function(wa){a=wa};this.getAssociatedField=function(){return a};this.toJsonObject=function(){throw Error("Override me");};this.fromJsonObject=function(wa){throw Error("Override me");};this.applySelectedValues=function(wa){throw Error("Override me");};this.addValueChangedListener=function(wa){v.addListener(wa)};
this.removeValueChangedListener=function(wa){v.removeListener(wa)};var P=function(){v.fireEvent(function(wa){wa(d)})};this.addPreparedValueUpdatedListener=function(wa){y.addListener(wa)};this.removePreparedValueUpdatedListener=function(wa){y.removeListener(wa)};var U=function(){y.fireEvent(function(wa){wa(d)})};this.addPropertyChangeListener=function(wa){C.addListener(wa)};this.removePropertyChangeListener=function(wa){C.removeListener(wa)};var fa=function(wa){C.fireEvent(function(ma){ma(d,wa)})};
this.getState=function(){return q};this.isStateValid=function(){return q==qa.STATE_VALID};this.getStateDisplay=function(){return q==qa.STATE_FIELD_ERROR?la.get("filterFieldInvalid","\u65e0\u6548\u7684\u5b57\u6bb5"):q==qa.STATE_PMODEL_UNMATCH?la.get("filterDataTypeUnmatched","\u5b57\u6bb5\u6570\u636e\u7c7b\u578b\u4e0e\u7b5b\u9009\u5668\u4e0d\u5339\u914d"):q};this.checkState=function(wa){(wa=d.protectedCheckStateByField(wa))&&(q=wa)};this.protectedCheckStateByField=function(wa){throw Error("Override");
};this.protectedCheckPreparedModel=function(wa){throw Error("Override");};this.copyForSetting=function(){var wa=d.toJsonObject(),ma=new d.constructor;ma.fromJsonObject(wa);ma.setAssociatedField(d.getAssociatedField());ma.setPreparedModel(d.getPreparedModel());return ma};this.applyFromSetting=function(wa){var ma=wa.toJsonObject();d.fromJsonObject(ma);e&&d.innerCarryPreparedModel(wa.getPreparedModel())};this.protectedMethod={fireValueChangedEvent:P,firePropertyChangeEvent:fa,innerSetFullValue:function(wa){b=
wa}}}function Ga(){qa.call(this);var d=this,b=this.protectedMethod,e=!1,c={},a,q=null;this.applySelectedValues=function(v){c={};v=v.values;for(var y=0;y<v.length;y++)c[v[y]]=!0};this.getSelectableItems=function(){var v=d.getPreparedModel();return v?v.getItems():[]};this.setExclude=function(v){e!=v&&(e=v,b.firePropertyChangeEvent(Ga.KEY_EXCLUDE),b.fireValueChangedEvent())};this.isExclude=function(){return e};this.abandonExclude=function(){if(e&&d.getPreparedModel()){e=!1;for(var v=!0,y={},C=d.getSelectableItems(),
P=0;P<C.length;P++){var U=C[P].getValue();d.isValueSelected(U)?v=!1:y[U]=!0}c=y;b.innerSetFullValue(v)}};this.protectedAfterSetFullValue=function(v){for(var y=d.getSelectableItems(),C=0;C<y.length;C++){var P=y[C].getValue();v?c[P]=!0:delete c[P]}};this.setSelectedValue=function(v){c={};c[v]=!0;b.innerSetFullValue(!1);b.fireValueChangedEvent()};this.addSelectedValue=function(v){c[v]=!0;u();b.fireValueChangedEvent()};this.getAllSelectedValue=function(){return c};this.removeSelectedValue=function(v){c[v]&&
(delete c[v],b.innerSetFullValue(!1),b.fireValueChangedEvent())};this.isValueSelected=function(v){return 1==c[v]};this.cloneAllSelectedValue=function(){return JSON.parse(JSON.stringify(c))};this.resetAllSelectedValue=function(v){c=v;u();b.fireValueChangedEvent()};var u=function(){for(var v=!0,y=d.getSelectableItems(),C=0;C<y.length;C++)if(!c[y[C].getValue()]){v=!1;break}b.innerSetFullValue(v)};this.isTreeSelectingIncludeSubs=function(){return!1===a?!1:!0};this.setTreeSelectingIncludeSubs=function(v){a=
v};this.getCtrlType=function(){return q};this.setCtrlType=function(v,y,C){q=v;y&&(c=y,b.innerSetFullValue(C),b.fireValueChangedEvent());b.firePropertyChangeEvent(Ga.KEY_CTRLTYPE)};this.isSingleValueMode=function(v){v=v?v:q;return v==Ga.CTRLTYPE_RADIOBUTTON_LIST||v==Ga.CTRLTYPE_RADIOBUTTON_POPUP};this.toJsonObject=function(){var v={};v.name=Ga.FILTER_NAME;v.full=d.isFullValue();v.affected=d.isJustShowAffected();v.onShow=d.isOnShow();v.exclude=e;if(d.isFullValue())var y=[];else{y=[];for(var C in c)C=
C==Ga.STRING_NULL_VALUE?null:C,y.push(C)}v.selected=y;!1===a&&(v.treeSelectingIncludeSubs=!1);q&&(v.ctrl=q);return v};this.fromJsonObject=function(v){var y=v.full?!0:!1;b.innerSetFullValue(y);c={};if(!y){y=v.selected;for(var C=0;C<y.length;C++)c[null==y[C]?Ga.STRING_NULL_VALUE:y[C]]=!0}d.setJustShowAffected(v.affected?!0:!1);d.setOnShow(v.onShow?!0:!1);e=v.exclude?!0:!1;a=!1===v.treeSelectingIncludeSubs?!1:!0;q=v.ctrl};this.protectedCheckStateByField=function(v){var y=v.getMetaField().getDataType(),
C=y==Ua.DT_STRING&&!v.getPartValue();v=y==Ua.DT_DATE&&v.getPartValue();return C||v?null:qa.STATE_PMODEL_UNMATCH};this.protectedCheckPreparedModel=function(v){return null==v?qa.STATE_INVALID:v instanceof da?v.getState():v instanceof ka||v instanceof oa?qa.STATE_VALID:qa.STATE_PMODEL_UNMATCH}}function ra(){qa.call(this);var d=this,b=this.protectedMethod,e,c,a=!0;this.protectedAfterSetFullValue=function(q){q=d.getPreparedModel();e=q.getMin();c=q.getMax()};this.isContainNull=function(){return a};this.setContainNull=
function(q){a=q};this.setValue=function(q,u,v){var y=!1;e!=q&&(e=q,y=!0);c!=u&&(c=u,y=!0);a!=v&&(a=v,y=!0);y&&(q=d.getPreparedModel(),q=a&&e==q.getMin()&&c==q.getMax(),b.innerSetFullValue(q),b.fireValueChangedEvent())};this.getFloor=function(){return e};this.getCeiling=function(){return c};this.getFormatString=function(){return d.getAssociatedField().getNumberFormat()};this.applySelectedValues=function(q){e=q.floor;c=q.ceiling};this.toJsonObject=function(){var q={};q.name=ra.FILTER_NAME;q.full=d.isFullValue();
q.affected=d.isJustShowAffected();q.onShow=d.isOnShow();q.floor=e;q.ceiling=c;q.containNull=a;return q};this.fromJsonObject=function(q){b.innerSetFullValue(q.full?!0:!1);e=q.floor;c=q.ceiling;d.setJustShowAffected(q.affected?!0:!1);d.setOnShow(q.onShow?!0:!1);a=q.containNull};this.protectedCheckStateByField=function(q){return q.getMetaField().getDataType()==Ua.DT_NUMBER?null:qa.STATE_PMODEL_UNMATCH};this.protectedCheckPreparedModel=function(q){return null==q?qa.STATE_INVALID:q instanceof da?q.getState():
q instanceof Ha?qa.STATE_VALID:qa.STATE_PMODEL_UNMATCH}}function cb(){qa.call(this);var d=this,b=this.protectedMethod,e=!1,c,a,q;this.setValue=function(u,v,y,C){b.innerSetFullValue(!1);c=u;a=v;q=y;e=C;b.fireValueChangedEvent()};this.isContainNull=function(){return e};this.setContainNull=function(u){e=u};this.getFromDateMs=function(){return c};this.setFromDateMs=function(u){c=u};this.getToDateMs=function(){return a};this.setToDateMs=function(u){a=u};this.getRelativePeriodModel=function(){return q};
this.setRelativePeriodModel=function(u){q=u};this.protectedAfterSetFullValue=function(u){u=d.getPreparedModel();c=u.getFromDateMs();a=u.getToDateMs()};this.applySelectedValues=function(u){};this.copy=function(){var u=null;q&&(u=new aa,u.fromJsonObject(q.toJsonObject()));var v=new cb;v.setValue(c,a,u,e);return v};this.toJsonObject=function(){var u={};u.name=cb.FILTER_NAME;u.full=d.isFullValue();u.onShow=d.isOnShow();u.containNull=e;u.dateFrom=c;u.dateTo=a;q&&(u.relative=q.toJsonObject());return u};
this.fromJsonObject=function(u){b.innerSetFullValue(u.full?!0:!1);d.setJustShowAffected(!1);d.setOnShow(u.onShow?!0:!1);e=u.containNull;c=u.dateFrom;a=u.dateTo;(u=u.relative)?(q=new aa,q.fromJsonObject(u)):q=null};this.protectedCheckStateByField=function(u){return u.getMetaField().getDataType()==Ua.DT_DATE?null:qa.STATE_PMODEL_UNMATCH};this.protectedCheckPreparedModel=function(u){return null==u?qa.STATE_INVALID:u instanceof da?u.getState():u instanceof Sa?qa.STATE_VALID:qa.STATE_PMODEL_UNMATCH}}function Qa(){var d=
this,b,e,c,a;this.getModel=function(){return b};this.setModel=function(q){b=q};this.getPreferences=function(){return e};this.setPreferences=function(q){e=q};this.getName=function(){return c};this.setName=function(q){c=q};this.isCurrent=function(){return a};this.setCurrent=function(q){a=q};this.toJsonObject=function(q){var u={};u.type=q.encodeModelPageType(b);u.model=b.toJsonObject();e&&(u.preferences=e.toJsonObject());c&&(u.name=c);a&&(u.current="true");return u};this.fromJsonObject=function(q,u,
v){v.decodeModelPageType(q.type,d);b.fromJsonObject(q.model,u);u=q.preferences;e&&u&&e.fromJsonObject(u);c=q.name;a=q.current?!0:!1}}function hb(){var d=this,b,e,c;this.setName=function(a){b=a};this.getName=function(){return b};this.setDescription=function(a){e=a};this.getDescription=function(){return e};this.setPostScript=function(a){c=a};this.getPostScript=function(){return c};this.copy=function(){var a=d.protectedCopy();a.setName(b);a.setDescription(e);a.setPostScript(c);return a};this.protectedCopy=
function(){throw Error("Implement");};this.toJsonObject=function(a){var q={};q.name=b;q.description=e;q.postScript=c;d.protectedToJsonObject(q,a);return q};this.protectedToJsonObject=function(a,q){throw Error("Implement");};this.fromJsonObject=function(a,q){b=a.name;e=a.description;c=a.postScript;d.protectedFromJsonObject(a,q)};this.protectedFromJsonObject=function(a,q){throw Error("Implement");}}function Fb(){hb.call(this);var d=[],b=[];this.setDimensionPickers=function(a){d=a};this.getDimensionPickers=
function(){return d};this.setMeasurePickers=function(a){b=a};this.getMeasurePickers=function(){return b};this.protectedCopy=function(){for(var a=[],q=0;q<d.length;q++){var u=d[q];a.push(u.copy())}var v=[];for(q=0;q<b.length;q++)u=b[q],v.push(u.copy());q=new Fb;q.setDimensionPickers(a);q.setMeasurePickers(v);return q};this.protectedToJsonObject=function(a,q){a.dimensionPickers=e(d,q);a.measurePickers=e(b,q)};var e=function(a,q){for(var u=[],v=0;v<a.length;v++){var y=a[v];q.isFieldExist(y.getField())&&
u.push(y.toJsonObject())}return u};this.protectedFromJsonObject=function(a,q){d=c(a.dimensionPickers,q);b=c(a.measurePickers,q)};var c=function(a,q){for(var u=[],v=0;v<a.length;v++){var y=a[v],C=Fb.createPicker(y.type);C.fromJsonObject(y,q);C.getField()?u.push(C):window.console&&window.console.warn("Picker fromJson(), field '#1' not found.".replace("#1",y.fieldId))}return u}}function pa(){var d=this,b,e=!1,c=!1,a;this.setField=function(q){b=q};this.getField=function(){return b};this.getType=function(){throw Error("Implement");
};this.setSortAccording=function(q,u){e=q?!0:!1;c=u?!0:!1};this.isSortAccording=function(){return e};this.isSortAsc=function(){return c};this.setOutputTargetIndex=function(q){a=q};this.getOutputTargetIndex=function(){return a};this.isOutputTarget=function(){return a?!0:!1};this.takeDetail=function(q){};this.copy=function(){var q=d.toJsonObject(),u=Fb.createPicker(d.getType());u.fromJsonObject(q,{searchFieldById:function(v){return d.getField()}});return u};this.toJsonObject=function(){var q={};q.fieldId=
b.getId();e&&(q.sortAsc=c);q.outputTarget=a;q.type=d.getType();d.protectedToJsonObject(q);return q};this.protectedToJsonObject=function(q){throw Error("Implement");};this.fromJsonObject=function(q,u){b=u.searchFieldById(q.fieldId);u=q.sortAsc;!0===u||!1===u?(e=!0,c=u):e=!1;a=q.outputTarget;d.protectedFromJsonObject(q)};this.protectedFromJsonObject=function(q){throw Error("Implement");}}function Ab(){pa.call(this);this.getType=function(){return Fb.PICKER_FULL};this.protectedToJsonObject=function(d){};
this.protectedFromJsonObject=function(d){}}function Z(){pa.call(this);var d;this.getType=function(){return Fb.PICKER_CONDITION};this.setScript=function(b){d=b};this.getScript=function(){return d};this.takeDetail=function(b){d=b.getScript()};this.protectedToJsonObject=function(b){b.conditionScript=d};this.protectedFromJsonObject=function(b){d=b.conditionScript}}function Wa(){pa.call(this);var d=1;this.setTopN=function(b){d=b};this.getTopN=function(){return d};this.takeDetail=function(b){d=b.getTopN()};
this.protectedToJsonObject=function(b){b.topN=d};this.protectedFromJsonObject=function(b){d=b.topN}}function fb(){Wa.call(this);this.getType=function(){return Fb.PICKER_MAX}}function Va(){Wa.call(this);this.getType=function(){return Fb.PICKER_MIN}}function Ka(){hb.call(this);var d=[];this.setConditionItems=function(b){d=b};this.getConditionItems=function(){return d};this.protectedCopy=function(){for(var b=[],e=0;e<d.length;e++)b.push(d[e].copy());e=new Ka;e.setConditionItems(b);return e};this.protectedToJsonObject=
function(b,e){e=[];for(var c=0;c<d.length;c++)e.push(d[c].toJsonObject());b.items=e};this.protectedFromJsonObject=function(b,e){b=b.items;d=[];for(var c=0;c<b.length;c++){var a=b[c],q=new ab;q.fromJsonObject(a,e);d.push(q)}}}function ab(){var d=0,b,e=0,c;this.getLeftBrackets=function(){return d};this.setLeftBrackets=function(a){d=a};this.getCondition=function(){return b};this.setCondition=function(a){b=a};this.getRightBrackets=function(){return e};this.setRightBrackets=function(a){e=a};this.getLogic=
function(){return c};this.setLogic=function(a){c=a};this.copy=function(){var a=new ab;a.setLeftBrackets(d);a.setRightBrackets(e);a.setLogic(c);a.setCondition(b.copy());return a};this.toJsonObject=function(){var a={};0<d&&(a.leftBrackets=d);0<e&&(a.rightBrackets=e);c&&(a.logic=c);a.condition=b.toJsonObject();return a};this.fromJsonObject=function(a,q){var u=a.leftBrackets;d=u?u:0;e=(u=a.rightBrackets)?u:0;c=(u=a.logic)?u:null;a=a.condition;b=Ka.createCondition(a.type);b.fromJsonObject(a,q)}}function kb(){var d=
this,b,e;this.setEditingAlarm=function(c){e=c};this.getEditingAlarm=function(){return e};this.setField=function(c){b=c};this.getField=function(){return b};this.getType=function(){throw Error("Implement");};this.isValid=function(){return b&&d.protectedCheckValid()};this.protectedCheckValid=function(){throw Error("Implement");};this.copy=function(){var c=d.toJsonObject(),a=Ka.createCondition(d.getType());a.fromJsonObject(c,{searchFieldById:function(q){return d.getField()}});return a};this.toJsonObject=
function(){var c={};c.fieldId=b?b.getId():"missing";c.type=d.getType();d.protectedToJsonObject(c);return c};this.protectedToJsonObject=function(c){throw Error("Implement");};this.fromJsonObject=function(c,a){b=a.searchFieldById(c.fieldId);d.protectedFromJsonObject(c)};this.protectedFromJsonObject=function(c){throw Error("Implement");}}function La(){kb.call(this);var d,b;this.setOperation=function(e){d=e};this.getOperation=function(){return d};this.setComparing=function(e){b=e};this.getComparing=function(){return b};
this.getType=function(){return Ka.CONDITION_NORMAL};this.protectedCheckValid=function(){return d&&(d==Ka.OP_NULL||d==Ka.OP_NOT_NULL||b)?!0:!1};this.protectedToJsonObject=function(e){e.op=d;e.comparing=b};this.protectedFromJsonObject=function(e){d=e.op;b=e.comparing}}function ob(){kb.call(this);var d;this.getType=function(){return Ka.CONDITION_CUSTOM};this.setScript=function(b){d=b};this.getScript=function(){return d};this.protectedCheckValid=function(){return d?!0:!1};this.protectedToJsonObject=function(b){b.conditionScript=
d};this.protectedFromJsonObject=function(b){d=b.conditionScript}}function ta(){var d,b,e,c;this.getRefToId=function(){return b};this.getFullPath=function(){return e};this.getRefName=function(){return c};this.toJsonObject=function(){var a={};a.uid=d;a.refToId=b;a.fullPath=e;a.refName=c;return a};this.fromJsonObject=function(a){d=a.uid;b=a.refToId;e=a.fullPath;c=a.refName}}function ja(){var d=0,b=ja.TYPE_AVG,e,c;this.setMeasureIndex=function(a){d=a};this.getMeasureIndex=function(){return d};this.setType=
function(a){b=a};this.getType=function(){return b};this.setValue=function(a){e=a};this.getValue=function(){return e};this.setLabel=function(a){c=a};this.getLabel=function(){return c};this.copy=function(){var a=new ja;a.setMeasureIndex(d);a.setType(b);a.setValue(e);a.setLabel(c);return a};this.toJsonObject=function(){var a={};a.measure=d;a.type=b;e&&(a.value=e);c&&(a.label=c);return a};this.fromJsonObject=function(a){d=a.measure;b=a.type;e=a.value;c=a.label}}function Da(){var d,b=[];this.getPresetName=
function(){return d};this.setColors=function(e){b=e};this.getColors=function(){return b};this.isInvalid=function(){return 0==b.length};this.encodeToString=function(){return b.join(",")};this.decodeFromString=function(e){b=(e=$.trim(e))?e.split(","):[]};this.toJsonObject=function(){var e={};e.colors=b;return e};this.fromJsonObject=function(e){d=e.name;b=(e=e.colors)?e:[]}}function na(){var d=null,b=null;this.getPaletteMapping=function(){return b};this.setPaletteMapping=function(e){b=e};this.toJsonObject=
function(){var e={};d&&(e.palette=d.toJsonObject());b&&(e.paletteMapping=b);return e};this.fromJsonObject=function(e){d=null;var c=e.palette;c&&(d=new Da,d.fromJsonObject(c));b=(e=e.paletteMapping)?e:null}}function l(){function d(){var C=0,P=100,U=50,fa=0,wa=20,ma=80;this.setColor=function(Ea,Xa){C=Ea[0];P=Ea[1];U=Ea[2];fa=Xa[0];wa=Xa[1];ma=Xa[2]};this.getColorA=function(){return[C,P,U]};this.getColorB=function(){return[fa,wa,ma]};this.toJsonObject=function(){var Ea={};Ea.ha=C;Ea.sa=P;Ea.la=U;Ea.hb=
fa;Ea.sb=wa;Ea.lb=ma;return Ea};this.fromJsonObject=function(Ea){C=Ea.ha;P=Ea.sa;U=Ea.la;fa=Ea.hb;wa=Ea.sb;ma=Ea.lb}}var b=this,e,c,a=0,q=null,u=null,v=0,y=!1;this.getForwardGradientColor=function(C){C&&!e&&(e=new d);return e};this.getBackwardGradientColor=function(C){C&&!c&&(c=new d);return c};this.getSegments=function(){return a};this.setSegments=function(C){a=C};this.getMinData=function(){return q};this.setMinData=function(C){q=C};this.isMinDataDefined=function(){return q||0===q};this.getMaxData=
function(){return u};this.setMaxData=function(C){u=C};this.isMaxDataDefined=function(){return u||0===u};this.getMiddleData=function(){return v};this.setMiddleData=function(C){v=C};this.isMiddleDataDefined=function(){return v||0===v};this.isWholeColorRange=function(){return y};this.setWholeColorRange=function(C){y=C};this.toJsonObject=function(){var C={};e&&(C.forward=e.toJsonObject());c&&(C.backward=c.toJsonObject());a&&(C.segment=a);b.isMinDataDefined()&&(C.min=""+q);b.isMaxDataDefined()&&(C.max=
""+u);b.isMiddleDataDefined()&&(C.middle=""+v);C.wholeColorRange=y;return C};this.fromJsonObject=function(C){var P=C.forward;P?(e=new d,e.fromJsonObject(P)):e=null;(P=C.backward)?(c=new d,c.fromJsonObject(P)):c=null;a=(P=C.segment)?P:0;q=(P=C.min)?parseFloat(P):null;u=(P=C.max)?parseFloat(P):null;v=(P=C.middle)?parseFloat(P):null;y=C.wholeColorRange}}function ba(){function d(){var c,a,q,u,v=!0;this.setBizUiId=function(y){c=y};this.getBizUiId=function(){return c};this.setBizUiDisplayName=function(y){a=
y};this.getBizUiDisplayName=function(){return a};this.setUsableDisplayName=function(y){u=y};this.getUsableDisplayName=function(){return u?u:a};this.setForeignKey=function(y){q=y};this.getForeignKey=function(){return q};this.isMainComplete=function(){return c&&q?!0:!1};this.setRuntimeValid=function(y){v=y};this.isRuntimeValid=function(){return v};this.toJsonObject=function(){var y={};y.bizUiId=c;y.bizUiDisplayName=a;y.foreignKey=q;return y};this.fromJsonObject=function(y){c=y.bizUiId;a=y.bizUiDisplayName;
q=y.foreignKey}}var b=[];this.addItem=function(){var c=new d;b.push(c);return c};this.removeItem=function(c){b.splice(c,1)};this.getItemCount=function(){return b.length};this.getItem=function(c){return b[c]};this.getUsefulItems=function(){for(var c=[],a=0;a<b.length;a++){var q=b[a];q.isMainComplete()&&c.push(q)}return c};this.getRunnableItems=function(){for(var c=[],a=0;a<b.length;a++){var q=b[a];q.isMainComplete()&&q.isRuntimeValid()&&c.push(q)}return c};this.copy=function(){var c=new ba;e(b,function(){return c.addItem()});
return c};var e=function(c,a){for(var q=0;q<c.length;q++){var u=c[q],v=a();v.setBizUiId(u.getBizUiId());v.setBizUiDisplayName(u.getBizUiDisplayName());v.setForeignKey(u.getForeignKey())}};this.toArray=function(){var c=[];e(b,function(){var a=new d;c.push(a);return a});return c};this.fromArray=function(c){b=[];e(c,function(){var a=new d;b.push(a);return a})};this.toJsonObject=function(){for(var c={},a=[],q=0;q<b.length;q++)a.push(b[q].toJsonObject());c.items=a;return c};this.fromJsonObject=function(c){b=
[];if(c=c.items)for(var a=0;a<c.length;a++){var q=c[a],u=new d;u.fromJsonObject(q);b.push(u)}}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.core&&(com.kingdee.bos.qing.core={});"undefined"==typeof com.kingdee.bos.qing.core.model&&(com.kingdee.bos.qing.core.model={});var W=com.kingdee.bos.qing.core.model;
W.MetaField=Ua;W.Meta=qb;W.ParentChildDimension=Lb;W.ModelBook=function(){var d,b,e;this.getMeta=function(){return d};this.setMeta=function(c){d=c};this.getModelPages=function(){return b};this.setModelPages=function(c){b=c};this.isTooModern=function(){return e};this.toJsonObject=function(c){var a={};a.meta=d.toJsonObject();for(var q=[],u=0;u<b.length;u++)q.push(b[u].toJsonObject(c));a.pages=q;return a};this.fromJsonObject=function(c,a,q){e=c.isTooModern;var u=c.meta;u&&(d=new qb,d.fromJsonObject(u),
q&&q(d));c=c.pages;b=[];for(q=0;q<c.length;q++){u=c[q];var v=new Qa;v.fromJsonObject(u,d,a);b.push(v)}}};W.ModelPage=Qa;W.AbstractQingModel=function(){var d=this,b=!1,e,c;this.setListenerDumb=function(a){b=a};this.getUsingMetaFields=function(a,q){throw Error("Implement");};this.createDependentMeta=function(a,q){throw Error("Implement");};this.getLinkTargets=function(){throw Error("Implement");};this.getBriefOutputableFieldsModel=function(){throw Error("Implement");};this.setBriefOutputDefinitions=
function(a){e=a};this.getBriefOutputDefinitions=function(){return e};this.setWarningRuleDefinitions=function(a){c=a};this.getWarningRuleDefinitions=function(){return c};this.protectedMethod={isListenerDumb:function(){return b},sharedToJsonObject:function(a){var q={};if(e||c)q.isFieldExist=function(C){return d.getBriefOutputableFieldsModel().isFieldAlive(C)};if(e){for(var u=[],v=0;v<e.length;v++){var y=e[v];y=y.toJsonObject(q);u.push(y)}a.briefOutputDefinitions=u}if(c){u=[];for(v=0;v<c.length;v++)y=
c[v],y=y.toJsonObject(q),u.push(y);a.warningRuleDefinitions=u}},sharedFromJsonObject:function(a){var q=a.briefOutputDefinitions;a=a.warningRuleDefinitions;var u={};if(q||a)u.searchFieldById=d.getBriefOutputableFieldsModel().createFieldSearcher();e=null;if(q){e=[];for(var v=0;v<q.length;v++){var y=q[v],C=new Fb;C.fromJsonObject(y,u);e.push(C)}}c=null;if(a)for(c=[],v=0;v<a.length;v++)y=a[v],C=new Ka,C.fromJsonObject(y,u),c.push(C)}}};W.BriefOutputableFields=function(){var d=[],b=[];this.getDimensionFields=
function(){return d};this.setDimensionFields=function(e){d=e};this.getMeasureFields=function(){return b};this.setMeasureFields=function(e){b=e};this.createFieldSearcher=function(){for(var e={},c=d.concat(b),a=0;a<c.length;a++){var q=c[a];e[q.getId()]=q}return function(u){return e[u]}};this.isFieldAlive=function(e){for(var c=0;c<d.length;c++)if(d[c]==e)return!0;for(c=0;c<b.length;c++)if(b[c]==e)return!0;return!1}};W.BriefOutputDefinition=Fb;W.BriefOutput=function(){var d,b,e,c;this.parseFromJson=function(a){d=
a.previewMatrix;b=a.display;e=a.errorCode;c=a.errorMessage};this.isError=function(){return e||0===e};this.getErrorCode=function(){return e};this.getErrorMessage=function(){return c};this.getMatrixRowCount=function(){return d?d.length:0};this.getMatrixCell=function(a,q){return d[a][q]};this.getDisplay=function(){return b}};W.WarningRuleDefinition=Ka;W.WarningRulePreview=function(){var d,b,e,c,a,q;this.parseFromJson=function(u){d=u.previewTitle;b=u.previewMatrix;e=u.rows;c=u.matched;a=u.errorCode;q=
u.errorMessage};this.isError=function(){return a||0===a};this.getErrorCode=function(){return a};this.getErrorMessage=function(){return q};this.getMatrixColumnCount=function(){return d?d.length:0};this.getMatrixColumn=function(u){return d[u]};this.getMatrixRowCount=function(){return b?b.length:0};this.getMatrixCell=function(u,v){return b[u][v]};this.getFilteredRows=function(){return e};this.isMatched=function(){return c}};W.OutsideReference=ta;W.AbstractAnalyticalField=xa;W.ExecutableValue=function(){var d,
b;this.asStringValue=function(e){d="Str";b=e};this.asSubtotal=function(){d="Subtotal";b=null};this.asNull=function(){d="Null";b=null};this.getDataType=function(){return d};this.getValue=function(){return b};this.isTheSame=function(e){return d==e.getDataType()?"Subtotal"==d||"Null"==d?!0:b==e.getValue():!1};this.toJsonObject=function(){var e={};e.dataType=d;e.value=b;return e};this.fromJsonObject=function(e){d=e.dataType;b=e.value}};W.AbstractFilterPreparedModel=Ja;W.AbstractFilter=qa;W.DiscreteFilter=
Ga;W.ContinuousFilter=ra;W.ContinuousDateFilter=cb;W.Refline=ja;W.Palette=Da;W.DiscreteColor=na;W.ContinuousColor=l;W.LinkTargets=ba;W.CommonStyle=function(){var d=null,b=null,e=null,c=null,a=null;this.isFontSizeUnsure=function(){return null==d};this.getFontSize=function(){return d};this.setFontSize=function(v){d=v};this.isBoldUnsure=function(){return null==b};this.isBold=function(){return b};this.setBold=function(v){b=v};this.isItalicUnsure=function(){return null==e};this.isItalic=function(){return e};
this.setItalic=function(v){e=v};this.isColorUnsure=function(){return null==c};this.getColor=function(){return c};this.setColor=function(v){c=v};this.isAlignUnsure=function(){return null==a};this.getAlign=function(){return a};this.setAlign=function(v){a=v};this.toJsonObject=function(){var v={};q(v,"fontSize",d);q(v,"bold",b);q(v,"italic",e);q(v,"color",c);q(v,"align",a);return v};var q=function(v,y,C){(C||0===C)&&(v[y]=C)};this.fromJsonObject=function(v){d=u(v,"fontSize");b=u(v,"bold");e=u(v,"italic");
c=u(v,"color");a=u(v,"align")};var u=function(v,y){return(v=v[y])||0===v?v:null}};var ea,aa,la;(function(){var d=com.kingdee.bos.qing.common;ea=d.EventListenerList;aa=d.RelativePeriodModel;d=com.kingdee.bos.qing.framework.common;la=d.MultilanguageManager.createPackageAccessor(W)})();var x=new function(){this.encodeFullName=function(d,b){return d?d+"."+b:b};this.decodeFullName=function(d){var b=d.indexOf(".");if(-1==b)var e=null;else e=d.substring(0,b),d=d.substring(b+1);return[e,d]}};W.NameUtil=x;
Ua.DT_STRING="STRING";Ua.DT_NUMBER="NUMBER";Ua.DT_DATE="DATE";Ua.KEY_FORMATSTRING="meta-formatString";Ua.KEY_FISCALYEARSTART="meta-fiscalYearStart";Ua.KEY_SORTACCORDING="meta-sortAccording";Ua.KEY_FORMULA="meta-formula";Ua.KEY_DISPLAYNAME="meta-displayName";Ua.FORMULA_STATUS_REF="Ref";Ua.FORMULA_STATUS_AGG="Agg";Ua.FORMULA_STATUS_INTERLINE="Interline";Ua.FORMULA_STATUS_WITHTOTAL="WithTotal";ub.subViewsFromJsonObject=function(d,b){if(b=b.subViews)for(var e=0;e<b.length;e++){var c=b[e],a=new ub(c.name,
c.displayName,c.displayAs);a.fromJsonObject(c);d.getSubViews(!0).push(a)}};ub.subViewsToJsonObject=function(d,b){if(d=d.getSubViews()){for(var e=[],c=0;c<d.length;c++){var a=d[c],q=a.toJsonObject();q.name=a.getName();q.displayName=a.getDisplayName();q.displayAs=a.getDisplayAs();e.push(q)}b.subViews=e}};ub.itemsFromJsonObject=function(d,b){if(b=b.viewItems)for(var e=0;e<b.length;e++){var c=b[e],a=c.fields;if(a){var q=c.name;c=new mb(q,c.displayName);for(q=0;q<a.length;q++){var u=a[q];c.getFieldNames().push(u.name)}d.getViewItems(!0).push(c)}else q=
c.name,d.getViewItems(!0).push(q)}};ub.itemsToJsonObject=function(d,b){if(d=d.getViewItems()){for(var e=[],c=0;c<d.length;c++){var a=d[c],q={};if(a instanceof mb){q.name=a.getName();q.displayName=a.getDisplayName();var u=[];a=a.getFieldNames();for(var v=0;v<a.length;v++)u.push({name:a[v]});q.fields=u}else q.name=a;e.push(q)}b.viewItems=e}};qb.createSearchingUsingMetaFieldsTool=function(d){return new sb(d)};Lb.isNecessary=function(d){return"Indispensable"==d};xa.KEY_NUMBERFORMAT="numberFormat";xa.KEY_DATEFORMAT=
"dateFormat";xa.KEY_CONTINUOUSCOLOR="continuousColor";xa.KEY_DISCRETECOLOR="discreteColor";xa.KEY_ROLE="role";xa.KEY_TOTALUSING="totalUsing";xa.KEY_TOTALDISPLAY="totalDisplay";xa.KEY_SUBTOTAL="subtotal";xa.KEY_PARTVALUE="partValue";xa.KEY_FORMULA="formula";xa.KEY_SORT="sort";xa.KEY_QUICKSETUP="quickSetup";xa.KEY_DISPLAYNAME="displayName";xa.AGGREGATION_SUM="SUM";xa.AGGREGATION_AVG="AVG";xa.AGGREGATION_COUNT="CNT";xa.AGGREGATION_CNTD="CNTD";xa.AGGREGATION_MAX="MAX";xa.AGGREGATION_MIN="MIN";xa.AGGREGATION_MEDIAN=
"MEDIAN";xa.AGGREGATION_AGG="AGG";xa.ROLE_DIMENSION="dimension";xa.ROLE_MEASURE="measure";xa.PARTVALUE_DATE_EXACT="DATE_EXACT";xa.PARTVALUE_DATE_YEAR="DATE_YEAR";xa.PARTVALUE_DATE_QUARTER="DATE_QUARTER";xa.PARTVALUE_DATE_MONTH="DATE_MONTH";xa.PARTVALUE_DATE_DAY="DATE_DAY";xa.PARTVALUE_DATE_YQ="DATE_YQ";xa.PARTVALUE_DATE_YM="DATE_YM";xa.PARTVALUE_DATE_YMD="DATE_YMD";xa.SORT_ASC="ASC";xa.SORT_DESC="DESC";xa.QUICKSETUP_LASTPERIOD_RATIO="LP";xa.QUICKSETUP_LASTPERIOD_VALUE="LP_V";xa.QUICKSETUP_LASTPERIOD_DIFF=
"LP_D";xa.QUICKSETUP_SAMEPERIODLASTYEAR_RATIO="SPLY";xa.QUICKSETUP_SAMEPERIODLASTYEAR_VALUE="SPLY_V";xa.QUICKSETUP_SAMEPERIODLASTYEAR_DIFF="SPLY_D";xa.QUICKSETUP_RUNNINGSUM="RS";xa.QUICKSETUP_RUNNINGSUMY="RSY";xa.QUICKSETUP_RATIO_10="RATIO_10";xa.QUICKSETUP_RATIO_01="RATIO_01";xa.QUICKSETUP_RATIO_11="RATIO_11";xa.QUICKSETUP_RATIO_90="RATIO_90";xa.QUICKSETUP_RATIO_09="RATIO_09";xa.QUICKSETUP_RATIO_99="RATIO_99";xa.isAggregationFittedDataType=function(d,b){return b!=Ua.DT_NUMBER?b==Ua.DT_DATE?d==xa.AGGREGATION_COUNT||
d==xa.AGGREGATION_CNTD||d==xa.AGGREGATION_MAX||d==xa.AGGREGATION_MIN:d==xa.AGGREGATION_COUNT||d==xa.AGGREGATION_CNTD:!0};xa.aggregationToString=function(d){switch(d){case xa.AGGREGATION_SUM:return la.get("sum","\u6c42\u548c");case xa.AGGREGATION_AVG:return la.get("avg","\u5e73\u5747");case xa.AGGREGATION_COUNT:return la.get("count","\u8ba1\u6570");case xa.AGGREGATION_CNTD:return la.get("cntd","\u53bb\u91cd\u8ba1\u6570");case xa.AGGREGATION_MAX:return la.get("max","\u6700\u5927");case xa.AGGREGATION_MIN:return la.get("min",
"\u6700\u5c0f");case xa.AGGREGATION_MEDIAN:return la.get("median","\u4e2d\u4f4d\u6570");case xa.AGGREGATION_AGG:return la.get("aggregation","\u805a\u5408");default:throw Error("Unknown aggregation: "+d);}};xa.partValueToString=function(d){switch(d){case xa.PARTVALUE_DATE_YEAR:return la.get("year","\u5e74");case xa.PARTVALUE_DATE_QUARTER:return la.get("quarter","\u5b63\u5ea6");case xa.PARTVALUE_DATE_MONTH:return la.get("month","\u6708");case xa.PARTVALUE_DATE_DAY:return la.get("day","\u65e5");case xa.PARTVALUE_DATE_YQ:return la.get("yearQuarter",
"\u5e74\u5b63");case xa.PARTVALUE_DATE_YM:return la.get("yearMonth","\u5e74\u6708");case xa.PARTVALUE_DATE_YMD:return la.get("yearMonthDay","\u5e74\u6708\u65e5");case xa.PARTVALUE_DATE_EXACT:return"";default:throw Error("Unknown partValue: "+d);}};xa.quickSetupToString=function(d){switch(d){case xa.QUICKSETUP_LASTPERIOD_VALUE:return la.get("lastPeriodValue","\u4e0a\u671f\u503c");case xa.QUICKSETUP_LASTPERIOD_DIFF:return la.get("lastPeriodDiff","\u73af\u6bd4\u5dee\u989d");case xa.QUICKSETUP_LASTPERIOD_RATIO:return la.get("lastPeriodRatio",
"\u73af\u6bd4\u589e\u957f\u7387");case xa.QUICKSETUP_SAMEPERIODLASTYEAR_VALUE:return la.get("samePeriodLastYearValue","\u53bb\u5e74\u540c\u671f\u503c");case xa.QUICKSETUP_SAMEPERIODLASTYEAR_DIFF:return la.get("samePeriodLastYearDiff","\u540c\u6bd4\u5dee\u989d");case xa.QUICKSETUP_SAMEPERIODLASTYEAR_RATIO:return la.get("samePeriodLastYearRatio","\u540c\u6bd4\u589e\u957f\u7387");case xa.QUICKSETUP_RUNNINGSUM:return la.get("runningSum","\u7d2f\u8ba1");case xa.QUICKSETUP_RUNNINGSUMY:return la.get("runningSumY",
"\u5e74\u5185\u7d2f\u8ba1");case xa.QUICKSETUP_RATIO_10:return la.get("ratio10","\u5206\u7ec4\u5185\u540c\u4e00\u884c");case xa.QUICKSETUP_RATIO_01:return la.get("ratio01","\u5206\u7ec4\u5185\u540c\u4e00\u5217");case xa.QUICKSETUP_RATIO_11:return la.get("ratio11","\u5206\u7ec4\u5185\u540c\u4e00\u5757");case xa.QUICKSETUP_RATIO_90:return la.get("ratio90","\u6574\u884c");case xa.QUICKSETUP_RATIO_09:return la.get("ratio09","\u6574\u5217");case xa.QUICKSETUP_RATIO_99:return la.get("ratio99","\u6574\u8868");
default:throw Error("Unknown quickSetup: "+d);}};xa.sortToString=function(d){switch(d){case xa.SORT_ASC:return la.get("sortAsc","\u5347\u5e8f");case xa.SORT_DESC:return la.get("sortDesc","\u964d\u5e8f");default:return la.get("sortNone","\u9ed8\u8ba4")}};xa.InvalidPrompt=function(){var d,b,e;this.isCancel=function(){return!e};this.getLevel=function(){return d};this.setLevel=function(c,a){d=c;e=a?!0:!1};this.getPromptText=function(){return b};this.setPromptText=function(c){b=c}};xa.InvalidPrompt.LEVEL_META_LOST=
10;xa.InvalidPrompt.LEVEL_META_INVALID=11;xa.InvalidPrompt.LEVEL_AGG=20;xa.InvalidPrompt.LEVEL_FILTER_UNMATCHED=30;Ja.create=function(d){var b=null;if(d){switch(d.type){case "discrete":b=new ka;break;case "tree":b=new oa;break;case "continuous":b=new Ha;break;case "continuousDate":b=new Sa;break;case "invalid":b=new da;break;default:throw Error("Unkonwn FilterPreparedModel type.");}b.fromJsonObject(d)}return b};qa.KEY_AFFECTED="affected";qa.KEY_ONSHOW="onShow";qa.STATE_VALID="valid";qa.STATE_INVALID=
"invalid";qa.STATE_FIELD_ERROR="field_error";qa.STATE_PMODEL_UNMATCH="pmodel_unmatch";qa.create=function(d){if(d instanceof ka||d instanceof oa){var b=new Ga;b.setPreparedModel(d)}else if(d instanceof Ha)b=new ra,b.setPreparedModel(d),b.setContainNull(!0);else if(d instanceof Sa)b=new cb,b.setPreparedModel(d),b.setContainNull(!0);else throw Error("Unkonwn PreparedModel.");return b};Ga.FILTER_NAME="discrete";Ga.STRING_NULL_VALUE="kd.qing.null";Ga.KEY_EXCLUDE="exclude";Ga.KEY_CTRLTYPE="ctrlType";Ga.CTRLTYPE_CHECKBOX_LIST=
"Checkbox_List";Ga.CTRLTYPE_CHECKBOX_POPUP="Checkbox_Popup";Ga.CTRLTYPE_RADIOBUTTON_LIST="RadioButton_List";Ga.CTRLTYPE_RADIOBUTTON_POPUP="RadioButton_Popup";ra.FILTER_NAME="continuous";cb.FILTER_NAME="continuousDate";Fb.createPicker=function(d){switch(d){case Fb.PICKER_FULL:return new Ab;case Fb.PICKER_CONDITION:return new Z;case Fb.PICKER_MAX:return new fb;case Fb.PICKER_MIN:return new Va;default:throw Error("Unknown:"+d);}};Fb.PICKER_FULL="FULL";Fb.PICKER_CONDITION="CONDITION";Fb.PICKER_MAX="MAX";
Fb.PICKER_MIN="MIN";Ka.createCondition=function(d){switch(d){case Ka.CONDITION_NORMAL:return new La;case Ka.CONDITION_CUSTOM:return new ob;default:throw Error("Unknown:"+d);}};Ka.CONDITION_NORMAL="NORMAL";Ka.CONDITION_CUSTOM="CUSTOM";Ka.ConditionItem=ab;Ka.OP_EQUAL="E";Ka.OP_NOT_EQUAL="NOT_E";Ka.OP_NULL="N";Ka.OP_NOT_NULL="NOT_N";Ka.OP_GREATER="G";Ka.OP_GREATER_EQUAL="GE";Ka.OP_LESS="L";Ka.OP_LESS_EQUAL="LE";ab.LOGIC_AND="AND";ab.LOGIC_OR="OR";ta.create=function(d,b,e,c){var a={};a.uid=d;a.refToId=
b;a.fullPath=e;a.refName=c;d=new ta;d.fromJsonObject(a);return d};ja.TYPE_AVG="AVG";ja.TYPE_MEDIAN="MEDIAN";ja.TYPE_CONST="CONST"})();(function(){function Ua(){this.protectedMethod={formatWithNull:function(Z){return Z+" ("+Vb.get("includeNull","\u5305\u542b\u7a7a\u503c")+")"},formatDateTimeRange:function(Z,Wa){Z=mb.formatI18nDate(Z);Wa=mb.formatI18nDate(Wa);return Z+" ~ "+Wa}}}function Mb(){function Z(){var U,fa,wa,ma;this.setStart=function(Ea){fa=Ea};this.getStart=function(){return fa};this.setEnd=function(Ea){wa=Ea};this.getEnd=function(){return wa};this.setRowNums=function(Ea){U=Ea};this.getRowNums=function(){return U};this.setContinuousRows=
function(Ea){ma=Ea};this.isContinuousRows=function(){return ma};this.getRowsCount=function(){return ma?wa:U.length};this.getRowNum=function(Ea){return ma?Ea:U[Ea-1]};this.toJsonObject=function(){var Ea={};Ea.continuousRows=ma;Ea.rowNumbers=U;Ea.start=fa;Ea.end=wa;return Ea};this.fromJsonObject=function(Ea){ma=Ea.continuousRows;U=Ea.rowNumbers;fa=Ea.start;wa=Ea.end}}function Wa(){var U={};this.collect=function(fa){U[fa.getFullName()]=!0};this.isMetaFieldVisible=function(fa){return U[fa]?!0:!1}}var fb=
new qa,Va,Ka,ab,kb,La,ob,ta,ja,Da,na,l,ba,W,ea,aa;this.setContext=function(U,fa,wa,ma,Ea,Xa){La=U;ta=fa;ja=wa;Da=ma;kb=Ea;ab=Xa};this.setEncodedCoordinateGetter=function(U){na=U};this.hookLinkagePrompter=function(U){aa=U};this.createContentPanel=function(U){var fa=fb.getJqUi();Va=new eb;var wa=Vb.get("showAllFields","\u663e\u793a\u6240\u6709\u5b57\u6bb5");Va.setChecked(!1);Va.setText(wa);Va.addCheckedListener(function(Xa,bb){bb&&u(!0)});var ma=$("<div>");ma.append(fa);var Ea=Va.getJqUi();Ea.attr("title",
wa);ma.append(Ea);ab(function(Xa){Xa&&(Ka=new Ma,Ka.addActionListener(q),Ka.getJqUi().appendTo(ma),la(!1));U&&Ka?(qb.layoutCtrlWithLRTB(fa,0,0,null,30,10,null),qb.layoutCtrlWithLRTB(Ka.getJqUi(),null,0,100,0,null,23),qb.layoutCtrlWithLRTB(Va.getJqUi(),0,null,100,0,null,23)):(qb.layoutCtrlWithLRTB(fa,0,0,null,0,10,null),Xa=0,Ka&&(qb.layoutCtrlWithLRTB(Ka.getJqUi(),null,Xa,100,0,null,23),Xa+=120),qb.layoutCtrlWithLRTB(Va.getJqUi(),null,Xa,100,0,null,23))});return ma};this.start=function(){fb.setLoader(d);
y();x()};this.resize=function(){fb.resize()};var la=function(U){U?(Ka.setText(Vb.get("exporting","\u6b63\u5728\u5bfc\u51fa...")),Ka.setEnabled(!1)):(Ka.setText(Vb.get("exportToExcel","\u5bfc\u51fa\u5230Excel")),Ka.setEnabled(!0))},x=function(){var U=kb(function(fa){ba=new Z;ba.fromJsonObject(fa.dataRowInfo);l=fa.dataSourceCacheKey;var wa=fa.meta;fa=new cb;fa.fromJsonObject(wa);wa=e();for(var ma=[],Ea=0,Xa=fa.getTableCount();Ea<Xa;Ea++){var bb=fa.getTable(Ea);wa.isTableUsed(bb.getName())&&ma.push(bb)}fa.carryIn(ma,
fa.getSrcMode());ob.merge(fa);fb.reset();fb.setTotalRowsCount(ba.getRowsCount());0<ba.getRowsCount()&&fb.loadRows()});ob=c(e());U.setBlockingJqUi($(document.body));U.getDetailRowNums(ob,ta,Da,na)},d=function(U,fa){var wa=new Z;wa.setContinuousRows(ba.isContinuousRows());ba.isContinuousRows()?(wa.setStart(U),wa.setEnd(fa)):wa.setRowNums(ba.getRowNums().slice(U-1,fa-U+1));U=kb(b);U.setBlockingJqUi($(document.body));U.getDetailRowData(l,wa,ob,Da)},b=function(U){var fa=W?!1:!0;if(fa){ea=new Wa;for(var wa=
ta.getUsingMetaFields(La,ja),ma=0;ma<wa.length;ma++)ea.collect(wa[ma]);W=new Wa;var Ea=[];for(ma=0;ma<ob.getTableCount();ma++){wa=ob.getTable(ma);for(var Xa=0;Xa<wa.getFieldCount();Xa++){var bb=wa.getField(Xa);bb.isHide()||(Ea.push(bb),W.collect(bb))}}fb.setupColumns(Ea.length,function(Jb){return Ea[Jb]});u()}v(U.dataSegment,fa)},e=function(){for(var U={},fa={},wa=ta.getUsingMetaFields(La,ja),ma=0;ma<wa.length;ma++){var Ea=wa[ma];U[Ea.getTable().getName()]=!0;fa[Ea.getFullName()]=!0}return{isTableUsed:function(Xa){return U[Xa]},
isFieldUsed:function(Xa){return fa[Xa]}}},c=function(U){var fa=La.copy();if(La.isMultiTableMode()){for(var wa=[],ma=0,Ea=fa.getTableCount();ma<Ea;ma++){var Xa=fa.getTable(ma);U.isTableUsed(Xa.getName())&&wa.push(Xa)}fa.carryIn(wa,fa.getSrcMode())}return fa},a=function(){for(var U=e(),fa=c(U),wa=fa.getTableCount()-1;0<=wa;wa--)for(var ma=fa.getTable(wa),Ea=ma.getFieldCount()-1;0<=Ea;Ea--){var Xa=ma.getField(Ea);U.isFieldUsed(Xa.getFullName())||ma.removeField(Ea)}return fa},q=function(U){if(0!=ba.getRowsCount()){U=
Va.isChecked()?ob:a();var fa=kb(function(wa){la(!1);var ma=mb.formatDate("yyyyMMdd_HHmmss");Lb.downloadFile("Qing-"+ma+".xlsx",wa)},function(wa,ma){la(!1);return Ga.facadeErrorHandler(wa,ma)});fa.setShowBlocking(!1);la(!0);fa.exportDetailRowData(l,ba,U,Da)}},u=function(U){var fa=Va.isChecked()?W:ea;fb.updateColumnsVisible(function(wa){return fa.isMetaFieldVisible(wa)},U?!0:!1)},v=function(U,fa){var wa=U.length,ma=function(Ea,Xa){return U[Ea][Xa]};fa?fb.appendRows(wa,ma):fb.lazyAppendRows(wa,ma)},
y=function(){fb.hookOperation(function(){});Sa.isRuntimeSupported()&&ta.getLinkTargets()&&C(function(U){fb.hookOperation(function(fa,wa){var ma=$("<div>");Ha.background(ma,"icon_bill_linkage");qb.layoutCtrlCenterAlign(ma,12);qb.layoutCtrlMiddleAlign(ma,12);ma.css("cursor","pointer");ma.attr("title",Vb.get("linkage","\u5355\u636e\u8054\u67e5"));ma.appendTo(fa);ma.on("click",function(Ea){Ea=ba.getRowNum(wa);Ea=P(Ea,U);var Xa=fb.getJqUi().parent(),bb=[12,16];bb=qb.upwardCoordinate(ma[0],bb,Xa[0]);Ea.show(Xa,
bb[0],bb[1],ma,!0,[0,-20])})})})},C=function(U){var fa=ta.getLinkTargets().copy().getUsefulItems();if(0!=fa.length){for(var wa=[],ma=0;ma<fa.length;ma++)wa.push(fa[ma].getBizUiId());Sa.lookupBizMeta(wa,function(Ea){for(var Xa=fa.length-1;0<=Xa;Xa--){var bb=Ea[Xa];bb?fa[Xa].setUsableDisplayName(bb):fa.splice(Xa,1)}0<fa.length&&U(fa)},!0)}},P=function(U,fa){var wa=new oa,ma=Ja.createActionMenuItem(ra.makeDetailDataLinkageCaption(U));ma.setEnabled(!1);wa.addItemModel(ma);for(var Ea=function(Jb){return Ja.createActionMenuItem(bb,
function(Ya){ra.jumpToEditUi(Jb,kb,l,U,function(nb,wb){aa?aa(nb,wb):alert(nb)})})},Xa=0;Xa<fa.length;Xa++){ma=fa[Xa];var bb=ra.makeItemDisplay(ma);ma=Ea(ma);wa.addItemModel(ma)}fa=new Ja;fa.setModel(wa);return fa}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.core&&(com.kingdee.bos.qing.core={});
"undefined"==typeof com.kingdee.bos.qing.core.shared&&(com.kingdee.bos.qing.core.shared={});var ub=com.kingdee.bos.qing.core.shared;ub.FilterInterpreter=new function(){Ua.call(this);var Z=this.protectedMethod;this.getFilterDisplayText=function(Wa,fb){if(Wa.isFullValue())return Vb.get("fullValue","\u5168\u90e8");if(Wa instanceof Fb){var Va=Wa.isExclude()?"("+Vb.get("excludeValue","\u6392\u9664")+")":"";Wa=Wa.toJsonObject().selected;if(fb==hb.PARTVALUE_DATE_MONTH||fb==hb.PARTVALUE_DATE_YM||fb==hb.PARTVALUE_DATE_YMD)for(var Ka=
0;Ka<Wa.length;Ka++){var ab=Wa[Ka];if(ab){var kb=parseInt(ab);switch(fb){case hb.PARTVALUE_DATE_MONTH:case hb.PARTVALUE_DATE_YM:ab=kb+1;break;case hb.PARTVALUE_DATE_YMD:ab=kb+100}Wa[Ka]=ab}}return Va+=Wa.join(", ")}if(Wa instanceof pa){fb=Wa.getFloor();Ka=Wa.getCeiling();if(Va=Wa.getFormatString())Ka=new sb,Ka.setFormatString(Va),fb=Ka.format(Wa.getFloor()),Ka=Ka.format(Wa.getCeiling());Va=fb+"~"+Ka;Wa.isContainNull()&&(Va=Z.formatWithNull(Va));return Va}return Wa instanceof Ab?(Va=(fb=Wa.getRelativePeriodModel())?
ka.modelToDisplayText(fb,!0):Z.formatDateTimeRange(Wa.getFromDateMs(),Wa.getToDateMs()),Wa.isContainNull()&&(Va=Z.formatWithNull(Va)),Va):"???"}};ub.AdditionalFilterInfoParser=new function(){Ua.call(this);var Z=this.protectedMethod;this.getCaption=function(Wa){var fb=Wa.key;return fb=Wa.isMetaFieldBound?"["+fb+"]":Vb.get("parameter","\u53c2\u6570")+' "'+fb+'"'};this.getValue=function(Wa){var fb=Wa.selectedValue;return Wa.valueDataType==Qa.DT_DATE&&Wa.isMetaFieldBound?(fb=JSON.parse(fb).dateRange,
Wa=fb.containNull,fb=Z.formatDateTimeRange(fb.dateFrom,fb.dateTo),Wa&&(fb=Z.formatWithNull(fb)),fb):fb};this.encodeAdditionalFilterApi=function(Wa){var fb={};fb.toMetaFieldNames=Wa.toMetaFieldNames();fb.toExecutableJsonObject=Wa.toExecutableJsonObject();fb.toDisplayJsonObject=Wa.toDisplayJsonObject();return JSON.stringify(fb)};this.decodeAdditionalFilterApi=function(Wa){Wa=JSON.parse(Wa);var fb=Wa.toMetaFieldNames,Va=Wa.toExecutableJsonObject,Ka=Wa.toDisplayJsonObject;return{toMetaFieldNames:function(){return fb},
toExecutableJsonObject:function(){return Va},toDisplayJsonObject:function(){return Ka}}}};ub.DetailDataPopupDialog=function(){xa.call(this);var Z=this,Wa=this.protectedMethod,fb=new Mb;(function(){fb.hookLinkagePrompter(function(ab,kb){!1===kb?Wa.getMessageCurtain().showPrompt(ab,-1):Wa.getMessageCurtain().showSuccess(ab)})})();this.setContext=function(ab,kb,La,ob,ta,ja){fb.setContext(ab,kb,La,ob,ta,ja)};this.setEncodedCoordinateGetter=function(ab){fb.setEncodedCoordinateGetter(ab)};var Va=this.showDialog;
this.showDialog=function(){var ab=Ka(),kb=ab[0];Z.setSize(kb,ab[1]);Wa.setTitle(Vb.get("viewData","\u67e5\u770b\u6570\u636e"));Wa.setSelectable(!0);Wa.getDialogCtrl().setResizeEnabled();Wa.getDialogCtrl().addResizeListener(function(){fb.resize()});var La=new da;La.appendRealFullscreenButton(Wa.getDialogCtrl());La.setResizedHandler(function(){fb.resize()});La.setPreferredSizeGetter(Ka);Wa.setFooterPaneCreator(null);Wa.setContentPaneCreator(function(){return fb.createContentPanel(400>kb)});Wa.setClosingAction(function(ob){La.destroyWhenClosed()});
Va();fb.start()};var Ka=function(){var ab=$(document.body),kb=ab.prop("clientWidth");ab=ab.prop("clientHeight");var La=Math.min(1,Math.max(.8,1.16-2E-4*kb));kb=parseInt(La*kb);ab=parseInt(La*ab);return[kb,ab]}};var mb,qb,sb,Vb,Lb,xa,eb,Ma,Ja,oa,ka,Ha,Sa,da,qa,Ga,ra,cb,Qa,hb,Fb,pa,Ab;(function(){var Z=com.kingdee.bos.qing.common;mb=Z.Util;qb=Z.DomUtil;sb=Z.NumberFormater;Z=com.kingdee.bos.qing.framework.common;Vb=Z.MultilanguageManager.createPackageAccessor(ub);Lb=Z.RemoteFramework;Z=com.kingdee.bos.qing.ui.component;
xa=Z.AbstractModalDialog;eb=Z.CheckBox;Ma=Z.WorkButton;Ja=Z.Menu;oa=Z.MenuModel;Z=com.kingdee.bos.qing.common.ui;ka=Z.RelativePeriodPanel;Z=com.kingdee.bos.qing.core;Ha=Z.Icons;Sa=Z.LinkageRegister;Z=com.kingdee.bos.qing.core.commonui;da=Z.RuntimePopupDialogSupporter;qa=Z.DataDetailTable;Ga=Z.ExportHelper;ra=Z.LinkageHelper;Z=com.kingdee.bos.qing.core.model;cb=Z.Meta;Qa=Z.MetaField;hb=Z.AbstractAnalyticalField;Fb=Z.DiscreteFilter;pa=Z.ContinuousFilter;Ab=Z.ContinuousDateFilter})()})();(function(){function Ua(){this.perform=function(){throw Error("Override me.");};this.unperform=function(){throw Error("Override me.");};this.getCaption=function(){throw Error("Override me.");};this.setValue=function(xa){}}function Mb(){var xa,eb=[],Ma;this.setCaption=function(Ja){xa=Ja};this.getCaption=function(){return xa};this.appendUnitAction=function(Ja){eb.push(Ja)};this.perform=function(){Ma&&Ma(!0);for(var Ja=0,oa=eb.length-1;Ja<=oa;Ja++)eb[Ja].perform();Ma&&Ma(!1)};this.unperform=function(){Ma&&
Ma(!0);for(var Ja=eb.length-1;0<=Ja;Ja--)eb[Ja].unperform();Ma&&Ma(!1)};this.setAnnouncer=function(Ja){Ma=Ja}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.core&&(com.kingdee.bos.qing.core={});"undefined"==typeof com.kingdee.bos.qing.core.controller&&(com.kingdee.bos.qing.core.controller={});var ub=
com.kingdee.bos.qing.core.controller;ub.CommandManager=function(){var xa=[],eb=[],Ma=null,Ja=!1,oa=new mb,ka=new mb;this.addPerformedListener=function(Ga){ka.addListener(Ga)};this.perform=function(Ga){Ma?Ma.appendUnitAction(Ga):(Ga.perform(),Ha(xa,Ga),eb.length=0,Sa(Ga,!0))};this.compositeStart=function(Ga){if(null!=Ma)throw Error("Can not start composite command twice.");Ma=new Mb;Ma.setAnnouncer(qa);Ma.setCaption(Ga)};this.compositeEnd=function(){Ma.perform();var Ga=Ma;Ha(xa,Ga);eb.length=0;Sa(Ga,
!0);Ma=null};this.compositeAbort=function(){Ma=null};this.isCompositeStarted=function(){return null!=Ma};this.createCompositeAction=function(){var Ga=new Mb;Ga.setAnnouncer(qa);return Ga};this.untilWakeup=function(Ga){Ja?oa.addListener(Ga):Ga()};this.isCanUndo=function(){return 0<xa.length};this.isCanRedo=function(){return 0<eb.length};this.undo=function(){var Ga=xa.pop();Ga&&(Ga.unperform(),Ha(eb,Ga),Sa(Ga,!1,!0))};this.redo=function(){var Ga=eb.pop();Ga&&(Ga.perform(),Ha(xa,Ga),Sa(Ga,!1,!1))};this.reset=
function(){xa.length=0;eb.length=0;Sa(null)};var Ha=function(Ga,ra){Ga.push(ra);32<Ga.length&&Ga.splice(0,1)},Sa=function(Ga,ra,cb){ka.fireEvent(function(Qa){Qa(Ga,ra,cb)})},da=function(){Ja=!1;oa.fireEvent(function(Ga){Ga()});oa.removeAllListener()},qa=function(Ga){Ga?Ja=!0:da()}};ub.AbstractAction=Ua;ub.ActionChangeProperty=function(){Ua.call(this);var xa=this,eb,Ma,Ja,oa;this.setCaption=function(ka){eb=ka};this.getCaption=function(){return eb};this.setMethod=function(ka,Ha){Ma=ka;Ja=Ha};this.setValue=
function(ka){oa=ka};this.perform=function(){var ka=Ma();Ja(oa);oa=ka};this.unperform=function(){xa.perform()}};ub.ActionChangeRole=function(xa){Ua.call(this);var eb=this,Ma,Ja,oa,ka;this.getCaption=function(){return Ma};this.setValue=function(Ha){Ha==sb.ROLE_DIMENSION?(Ja=sb.ROLE_DIMENSION,oa=null,ka=!1):(Ja=sb.ROLE_MEASURE,oa=Ha,ka=!0);Ma=xa.getRole()==Ja?qb.get("changeAggregation","\u6539\u53d8#1\u805a\u5408\u65b9\u5f0f"):qb.get("changeRole","\u6539\u53d8#1\u7ef4\u5ea6/\u5ea6\u91cf");Ma=Ma.replace("#1",
xa.getComplexText())};this.perform=function(){var Ha=xa.getRole(),Sa=xa.getAggregation(),da=xa.isContinuous();xa.setRole(Ja,oa);xa.setContinuous(ka);Ja=Ha;oa=Sa;ka=da};this.unperform=function(){eb.perform()}};ub.ActionChangePartValue=function(xa){Ua.call(this);var eb=this,Ma,Ja,oa;this.setCaption=function(ka){Ma=ka};this.getCaption=function(){return Ma};this.setValue=function(ka){Ja=ka;oa=null};this.perform=function(){var ka=xa.getPartValue(),Ha=xa.getDateFormat();xa.setPartValue(Ja);xa.setDateFormat(oa);
Ja=ka;oa=Ha};this.unperform=function(){eb.perform()}};ub.ActionChangeFilterCtrlType=function(){Ua.call(this);var xa,eb,Ma,Ja,oa,ka,Ha;this.setCaption=function(Sa){xa=Sa};this.getCaption=function(){return xa};this.setValue=function(Sa,da){eb=Sa;Ma=da;oa=eb.getCtrlType();ka=null;Sa=eb.isSingleValueMode();da=eb.isSingleValueMode(Ma);if(!Sa&&da){ka=eb.getAllSelectedValue();Ha=eb.isFullValue();Ja={};Sa=!1;da=eb.getSelectableItems();for(var qa=0;qa<da.length;qa++){var Ga=da[qa].getValue();if(eb.isValueSelected(Ga)){Sa=
Ja[Ga]=!0;break}}!Sa&&0<da.length&&(Sa=da[0].getValue(),Ja[Sa]=!0)}};this.perform=function(){eb.setCtrlType(Ma,Ja,!1)};this.unperform=function(){eb.setCtrlType(oa,ka,Ha)}};ub.ActionAddSelectedValueForDiscreteFilter=function(xa){Ua.call(this);var eb,Ma,Ja;this.getCaption=function(){return(Ma?qb.get("addFilterValue","\u6dfb\u52a0\u7b5b\u9009\u503c"):qb.get("moveFilterValue","\u79fb\u9664\u7b5b\u9009\u503c"))+": "+Ja};this.setValue=function(oa,ka,Ha){eb=oa;Ma=ka;Ja=void 0==Ha?oa:Ha};this.perform=function(){Ma?
xa.addSelectedValue(eb):xa.removeSelectedValue(eb)};this.unperform=function(){Ma?xa.removeSelectedValue(eb):xa.addSelectedValue(eb)}};ub.ActionChangeSelectedValueForDiscreteFilter=function(xa){Ua.call(this);var eb,Ma,Ja;this.getCaption=function(){return qb.get("modifyFilterValue","\u4fee\u6539\u7b5b\u9009\u503c")+": "+Ma};this.setValue=function(oa,ka){eb=oa;Ma=void 0==ka?oa:ka;ka=xa.getSelectableItems();for(var Ha=0;Ha<ka.length;Ha++)if(oa=ka[Ha].getValue(),xa.isValueSelected(oa)){Ja=oa;break}};this.perform=
function(){xa.setSelectedValue(eb)};this.unperform=function(){xa.setSelectedValue(Ja)}};ub.ActionChangeValueForContinuousFilter=function(xa){Ua.call(this);var eb=this,Ma,Ja,oa;this.getCaption=function(){return qb.get("modifyFilterValue","\u4fee\u6539\u7b5b\u9009\u503c")};this.setValue=function(ka,Ha,Sa){Ma=ka;Ja=Ha;oa=Sa};this.perform=function(){var ka=xa.getFloor(),Ha=xa.getCeiling(),Sa=xa.isContainNull();xa.setValue(Ma,Ja,oa);Ma=ka;Ja=Ha;oa=Sa};this.unperform=function(){eb.perform()}};ub.ActionChangeValueForDateFilter=
function(xa){Ua.call(this);var eb=this,Ma;this.getCaption=function(){return qb.get("modifyFilterValue","\u4fee\u6539\u7b5b\u9009\u503c")};this.setValue=function(Ja){Ma=Ja};this.perform=function(){var Ja=xa.copy();xa.setValue(Ma.getFromDateMs(),Ma.getToDateMs(),Ma.getRelativePeriodModel(),Ma.isContainNull());Ma=Ja};this.unperform=function(){eb.perform()}};ub.ActionResetAllSelectedValueForDiscreteFilter=function(xa){Ua.call(this);var eb=this,Ma;this.getCaption=function(){return qb.get("modifyFilterValue",
"\u4fee\u6539\u7b5b\u9009\u503c")};this.setValue=function(Ja){Ma=Ja};this.perform=function(){var Ja=xa.getAllSelectedValue();xa.resetAllSelectedValue(Ma);Ma=Ja};this.unperform=function(){eb.perform()}};ub.ActionInsertMetaField=function(xa,eb){Ua.call(this);var Ma=this,Ja,oa,ka,Ha=eb,Sa,da,qa=-1;this.setCaption=function(Ga){Ja=Ga};this.getCaption=function(){return Ja};this.setValue=function(Ga,ra){oa=Ga;ka=ra};this.setViewContext=function(Ga,ra){Sa=Ga;da=ra};this.perform=function(){qa=xa.updateFieldAtView(oa.getPureName(),
Ha,Sa,da,qa);Ha?xa.insertField(oa,ka):xa.removeField(ka);Ha=!Ha};this.unperform=function(){Ma.perform()}};ub.ActionDefineOrder=function(){Ua.call(this);var xa=this,eb,Ma,Ja;this.setValue=function(oa,ka,Ha){eb=oa;Ma=ka;Ja=Ha};this.perform=function(){var oa=eb.getSortAccording(),ka=eb.getCustomOrder();eb.defineOrder(Ma,Ja);Ma=oa;Ja=ka};this.unperform=function(){xa.perform()}};ub.AbstractActionAppendAllNecessaryDimensions=function(){Ua.call(this);this.getCaption=function(){return qb.get("appendAllNecessaryDimensions",
"\u4e00\u952e\u6dfb\u52a0\u5fc5\u8981\u5b57\u6bb5")};this.protectedMethod={visitMissingNecessaryDimensions:function(xa,eb,Ma){for(var Ja=[],oa=0,ka=xa.getTableCount();oa<ka;oa++){for(var Ha=xa.getTable(oa),Sa=Ha.getNecessaryParentChildDimensions(),da={},qa=0;qa<Sa.length;qa++){var Ga=Sa[qa];da[Ga.getName()]=Ga}for(qa=0;qa<eb.length;qa++)Sa=eb[qa],Sa.getTable()==Ha&&Sa.isParentChildDimension()&&(Sa=Sa.getGroupName(),delete da[Sa]);for(var ra in da)Ga=da[ra],qa=Ga.getDisplayFieldName()||Ga.getIdFieldName(),
Sa=Ha.searchMetaField(qa),Ja.push(Sa)}for(xa=0;xa<Ja.length;xa++)eb=Ja[xa],oa=Vb.create({type:"tree",nodes:[]}),oa=Lb.create(oa),oa=Ma(oa),oa.setMetaField(eb),oa.setRole(sb.ROLE_DIMENSION),oa.setContinuous(!1)}}};var mb,qb,sb,Vb,Lb;(function(){var xa=com.kingdee.bos.qing.common;mb=xa.EventListenerList;xa=com.kingdee.bos.qing.framework.common;qb=xa.MultilanguageManager.createPackageAccessor(ub);xa=com.kingdee.bos.qing.core.model;sb=xa.AbstractAnalyticalField;Vb=xa.AbstractFilterPreparedModel;Lb=xa.AbstractFilter})()})();(function(){function Ua(){qb.call(this);var Lb=this,xa=this.protectedMethod,eb,Ma=this.showDialog;this.showDialog=function(ka,Ha,Sa,da){eb=Ha;xa.setTitle(mb.get("warningRule","\u9884\u8b66\u89c4\u5219"));Lb.setSize(400,480);xa.setContentPaneCreator(function(){return Ja(ka)});xa.setClosingChecker(function(){return eb?!0:(xa.getMessageCurtain().showPrompt(mb.get("warningRuleUsageNoSelected","\u672a\u9009\u62e9\u9884\u8b66\u89c4\u5219\u3002")),!1)});xa.setClosingAction(function(qa){qa&&Sa(eb);da&&da(qa)});
Ma()};var Ja=function(ka){var Ha=[],Sa={};ka=ka.getModelPages();for(var da=0;da<ka.length;da++){var qa=ka[da].getModel().getWarningRuleDefinitions();if(qa)for(var Ga=0;Ga<qa.length;Ga++){var ra=qa[Ga],cb=ra.getName();ra=ra.getDescription();Ha.push(cb);Sa[cb]=ra?ra:null}}var Qa=$("<div>");Qa.css({"box-sizing":"border-box",border:"1px solid #ddd",padding:"6px",color:"#808080","white-space":"pre-wrap",overflow:"auto"});da=new Vb;da.setItemModels(Ha);da.setSelecteds(eb?[eb]:[]);da.addSelectedChangedListener(function(hb,
Fb,pa){eb=pa[0];oa(Sa,Qa)});oa(Sa,Qa);qa=new sb(mb.get("warningRuleUsageCaptionSelectable","\u5df2\u5b9a\u4e49\u7684\u9884\u8b66\u89c4\u5219"));Ga=new sb(mb.get("warningRuleUsageCaptionSelected","\u9009\u4e2d\u7684\u9884\u8b66\u89c4\u5219\u53ca\u5176\u63cf\u8ff0"));ka=$("<div>");ka.append(qa.getJqUi());ka.append(da.getJqUi());ka.append(Ga.getJqUi());ka.append(Qa);ub.layoutCtrlWithLRTB(qa.getJqUi(),0,0,null,0,null,23);ub.layoutCtrlWithLRTB(da.getJqUi(),0,0,null,23,120,null);ub.layoutCtrlWithLRTB(Ga.getJqUi(),
0,0,null,null,80,23);ub.layoutCtrlWithLRTB(Qa,0,0,null,null,0,80);0==Ha.length&&(Ha=new sb(mb.get("warningRuleUsageSelectableEmpty","\u672a\u5b9a\u4e49\u9884\u8b66\u89c4\u5219")),Ha.setEnabled(!1),Ha.setAlign(sb.ALIGN_CENTER),Ha.getJqUi().appendTo(ka),ub.layoutCtrlWithLRTB(Ha.getJqUi(),0,0,null,50,null,23));return ka},oa=function(ka,Ha){eb?((ka=ka[eb])?Ha.css("color",""):null===ka?(Ha.css("color",""),ka=mb.get("warningRuleUsageNoDescription","\u8be5\u9884\u8b66\u89c4\u5219\u65e0\u63cf\u8ff0\u3002")):
(Ha.css("color","#c00"),ka=mb.get("warningRuleUsageNotExistName","\u8be5\u540d\u79f0\u4e0d\u5b58\u5728\u3002")),ka=eb+"\r\n"+ka,Ha.text(ka)):(Ha.css("color","#ccc"),Ha.text(mb.get("warningRuleUsageNoSelected","\u672a\u9009\u62e9\u9884\u8b66\u89c4\u5219\u3002")))}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.core&&
(com.kingdee.bos.qing.core={});"undefined"==typeof com.kingdee.bos.qing.core.ui&&(com.kingdee.bos.qing.core.ui={});var Mb=com.kingdee.bos.qing.core.ui;Mb.WarningRuleSelector=Ua;var ub,mb,qb,sb,Vb;(function(){var Lb=com.kingdee.bos.qing.common;ub=Lb.DomUtil;Lb=com.kingdee.bos.qing.framework.common;mb=Lb.MultilanguageManager.createPackageAccessor(Mb);Lb=com.kingdee.bos.qing.ui.component;qb=Lb.AbstractModalDialog;sb=Lb.Label;Vb=Lb.List})();Ua.checkWarningRuleExist=function(Lb,xa){Lb=Lb.getModelPages();
for(var eb=0;eb<Lb.length;eb++){var Ma=Lb[eb].getModel().getWarningRuleDefinitions();if(Ma)for(var Ja=0;Ja<Ma.length;Ja++)if(xa==Ma[Ja].getName())return!0}return!1}})();(function(){function Ua(){var va=this,Y=[],J,N,X=!1;this.getJqUi=function(){J||(J=$("<div>"),J.css("overflow","auto"),N=new ta,N.setText(va.protectedGetAddButtonText()),N.getJqUi().addClass("sa-itempane-add"),N.addActionListener(function(K){va.protectedAddItemAction()}),N.getJqUi().appendTo(J),S());return J};var Q=function(){return J.children(".sa-itempane-item")},G=function(K){Y.splice(K,1);var ha=Q().eq(K);ha.animate({height:"0px"},"fast",function(){ha.remove()})},T=function(K){for(var ha=0;ha<
Y.length&&!K(Y[ha],ha);ha++);},R=function(K){var ha=-1;T(function(Aa,Ta){var db=!1;K==Aa&&(ha=Ta,db=!0);return db});return ha},S=function(){X=!0;va.protectedUpdateUiImpl();X=!1},ca=function(K){K=R(K);0<=K&&(va.protectedDeleteItemModel(K),G(K))},H=function(K,ha){return 0==Y.length||ha&&K==Y[0]||!ha&&K==Y[Y.length-1]?!1:!0},I=function(K,ha){var Aa=R(K);if(0<=Aa){var Ta=Aa+(ha?-1:1),db=Y[Ta],jb=Q(),Na=jb.eq(Aa),xb=jb.eq(Ta),Ub=Na.prop("offsetTop"),ec=xb.prop("offsetTop"),kc=Na.prop("offsetHeight"),Pb=
xb.prop("offsetHeight");jb=function(){var Oa=$("<div>");Oa.css("height",kc);Oa.addClass("sa-itempane-item");Oa.insertBefore(Na);var Ra=$("<div>");Ra.css("height",Pb);Ra.addClass("sa-itempane-item");Ra.insertBefore(xb);M(Na,!0,Ub);M(xb,!0,ec);xb.animate({top:Ub},"slow");Na.animate({top:ec},"slow",function(){Oa.remove();Ra.remove();M(Na,!1);M(xb,!1);ha?Na.insertBefore(xb):Na.insertAfter(xb);Y.splice(Aa,1);Y.splice(Ta,0,K);va.protectedMoveItemModel(Aa,Ta);K.requestMovingButtonVisibleUpdating();db.requestMovingButtonVisibleUpdating()})};
var Qb=Math.min(Ub,ec),ac=Qb+kc+Pb,bc=J.prop("scrollTop"),Bb=bc,ya=Bb+J.prop("clientHeight");Qb<Bb?J.animate({scrollTop:Qb},"fast",jb):ac>ya?J.animate({scrollTop:bc+(ac-ya)},"fast",jb):jb()}},M=function(K,ha,Aa){ha?K.css({position:"absolute",top:Aa}):K.css({position:"",top:""})};this.protectedGetAddButtonText=function(){throw Error("Override");};this.protectedUpdateUiImpl=function(){throw Error("Override");};this.protectedCreateOneItemPanel=function(K){throw Error("Override");};this.protectedAddItemAction=
function(){throw Error("Override");};this.protectedDeleteItemModel=function(K){throw Error("Override");};this.protectedMovable=function(){return!1};this.protectedMoveItemModel=function(K,ha){};this.protectedMethod={updateUi:S,clearAllItemUi:function(){J&&Q().remove();Y=[]},appendItemUi:function(K){J&&(K=va.protectedCreateOneItemPanel(K),K.setDeleteListener(ca),va.protectedMovable()&&K.setMovingDependence(H,I),Y.push(K),K=K.createJqUi(),K.addClass("sa-itempane-item"),K.insertBefore(N.getJqUi()),X||
(K=N.getJqUi().prop("offsetTop"),J.animate({scrollTop:K})))},searchItemPanelIndex:R,visitAllItemPanel:T,scrollItemUiToVisible:function(K,ha){var Aa=Q().eq(K);K=Aa.prop("offsetTop");Aa=K+Aa.prop("offsetHeight");var Ta=J.prop("clientHeight"),db=J.prop("scrollTop"),jb=db+Ta;K<db?J.animate({scrollTop:K-10},"fast",ha):Aa>jb?J.animate({scrollTop:Aa-Ta+10},"fast",ha):ha()}}}function Mb(){var va=new la,Y=new function(){la.AbstractTabPane.call(this);var R,S=new e;this.getTitle=function(){return pa.get("formatTabNormal",
"\u5e38\u89c4")};this.getJqUi=function(){R||(R=$("<div>"),S.getJqUi().appendTo(R),ra.layoutCtrlWithLRTB(S.getJqUi(),10,10,null,10,10,null));return R};this.getSettingPanel=function(){return S}},J=new function(){la.AbstractTabPane.call(this);var R=this,S,ca=new kb,H=$("<div>"),I,M=!1;(function(){ca.addEditedListener(function(ha){M=!0;I&&I(M);K()});H.text(pa.get("formatStringEmptyPrompt","\u81ea\u5b9a\u4e49\u683c\u5f0f\u5316\u4e32\u4e0d\u80fd\u4e3a\u7a7a\u3002"));H.css({color:"#c00",display:"none"})})();
this.getTitle=function(){return pa.get("formatTabCustom","\u81ea\u5b9a\u4e49")};this.getJqUi=function(){if(!S){S=$("<div>");var ha=new fb(pa.get("formatString","\u683c\u5f0f\u5316\u4e32"));ha.getJqUi().appendTo(S);ca.getJqUi().appendTo(S);H.appendTo(S);ra.layoutCtrlWithLRTB(ha.getJqUi(),10,10,null,10,null,23);ra.layoutCtrlWithLRTB(ca.getJqUi(),10,10,null,34,null,23);ra.layoutCtrlWithLRTB(H,10,10,null,60,null,23)}return S};this.getCustomFormat=function(){var ha=ca.getText();return null===ha?b.UNSURE:
$.trim(ha)};this.setCustomFormat=function(ha){ca.setText(ha==b.UNSURE?null:ha);K()};this.isValidToAccepted=function(){return R.getCustomFormat()?!0:!1};this.isDirty=function(){return M};this.clearDirtyState=function(){M=!1;I&&I(M)};this.setDirtyListener=function(ha){I=ha};var K=function(){var ha=R.getCustomFormat()?!1:!0;H.css("display",ha?"":"none")}},N=!1,X=!1,Q=!1,G,T=!1;(function(){va.setTabLevel(la.SECOND_LEVEL);va.addTab(Y);va.addTab(J);va.addTabChangedListener(function(R,S){if(!N)if(T=!0,G&&
G(!0),S==Y)Q&&(R=J.getCustomFormat(),S=new b,R!=b.UNSURE&&S.decode(R),Y.getSettingPanel().setModel(S)),X=!1;else{if(X||!J.getCustomFormat())S=new b,S.accept(Y.getSettingPanel().getModel()),R=S.encode(),J.setCustomFormat(R);Q=!1}});Y.getSettingPanel().setDirtyListener(function(R){R&&(X=!0,G&&G(!0))});J.setDirtyListener(function(R){R&&(Q=!0,G&&G(!0))})})();this.setModelPair=function(R){var S=R[0];R=R[1];if(S){Y.getSettingPanel().setModel(S);if(S.isUnsure()){var ca=new b;ca.accept(S);S=ca.encode()}else S=
S.encode();J.setCustomFormat(S);S=Y}else J.setCustomFormat(R),ca=new b,R!=b.UNSURE&&ca.decode(R),Y.getSettingPanel().setModel(ca),S=J;N=!0;va.setCurrentTabPane(S);N=!1};this.getModelPair=function(){return va.getCurrentTabPane()==Y?[Y.getSettingPanel().getModel(),null]:[null,J.getCustomFormat()]};this.getJqUi=function(){return va.getJqUi()};this.setDirtyListener=function(R){G=R};this.isDirty=function(){return T||Y.getSettingPanel().isDirty()||J.isDirty()};this.clearDirtyState=function(){Q=X=T=!1;Y.getSettingPanel().clearDirtyState();
J.clearDirtyState();G&&G(!1)};this.isValidToAccepted=function(){return va.getCurrentTabPane()==Y?Y.getSettingPanel().isValidToAccepted():J.isValidToAccepted()}}function ub(){function va(){var ca,H,I,M=!1;this.setTargetField=function(K){ca=K};this.getTargetField=function(){return ca};this.getTargetFieldFullName=function(){return ca?ca.getFullName():null};this.setBoundFieldFullName=function(K){H=K};this.getBoundFieldFullName=function(){return H};this.setManualOrder=function(K){I=K};this.getManualOrder=
function(){return I};this.setCustom=function(K){M=K};this.isCustom=function(){return M};this.isAllEmpty=function(){return!ca&&!H&&!I};this.isCompleted=function(){return ca&&(!M&&H||M&&I)}}function Y(){Ua.AbstractOneItemPanel.call(this);var ca;this.setItemModel=function(jb){ca=jb};this.getItemModel=function(){return ca};this.protectedGetHeight=function(){return 112};this.protectedInitJqUi=function(jb){var Na=new fb(pa.get("sortAccordingTargetField","\u76ee\u6807\u5b57\u6bb5")),xb=new fb(pa.get("sortAccordingType",
"\u6392\u5e8f\u4f9d\u636e")),Ub=new fb,ec=new Va;ec.setText(pa.get("sortAccordingBound","\u4f9d\u636e\u5b57\u6bb5"));var kc=new Va;kc.setText(pa.get("sortAccordingManual","\u624b\u52a8\u6392\u5e8f"));var Pb=new Ka;Pb.addElement(ec);Pb.addElement(kc);Pb.addChangedListener(function(Bb){Bb=Bb==kc;ca.setCustom(Bb);Ub.setText(Bb?pa.get("sortAccordingManualTitle","\u624b\u52a8\u6392\u5e8f"):pa.get("sortAccordingBoundTitle","\u4f9d\u636e\u5b57\u6bb5"));ac.getJqUi().css("display",Bb?"none":"");bc.getJqUi().css("display",
Bb?"":"none")});Pb=(Pb=ca.getTargetField())?Q.searchMetaField(Pb.getFullName()):null;var Qb=I(Q);Qb.setSelectedModel(Pb);Qb.setCustomPainter(K);Qb.addSelectionListener(function(Bb,ya){ya&&(Bb=Bb.getSelectedModel(),ca.setTargetField(Bb),ca.setBoundFieldFullName(Bb.getSortAccording()),ca.setManualOrder(Bb.getCustomOrder()),ca.setCustom(Bb.getCustomOrder()?!0:!1),H(ec,kc,ac,bc))});var ac=I(G);ac.setCustomPainter(ha);ac.addSelectionListener(function(Bb,ya){ya&&ca.setBoundFieldFullName(Bb.getSelectedModel().getFullName())});
var bc=new ob;bc.setCustomPainter(Aa);bc.addActionListener(Ta);H(ec,kc,ac,bc);jb.append(Na.getJqUi());jb.append(xb.getJqUi());jb.append(Ub.getJqUi());jb.append(Qb.getJqUi());jb.append(ec.getJqUi());jb.append(kc.getJqUi());jb.append(ac.getJqUi());jb.append(bc.getJqUi());ra.layoutCtrlWithLRTB(Na.getJqUi(),0,null,100,6,null,23);ra.layoutCtrlWithLRTB(xb.getJqUi(),0,null,100,40,null,23);ra.layoutCtrlWithLRTB(Ub.getJqUi(),0,null,100,74,null,23);ra.layoutCtrlWithLRTB(Qb.getJqUi(),100,100,null,6,null,23);
ra.layoutCtrlWithLRTB(ec.getJqUi(),100,null,120,40,null,23);ra.layoutCtrlWithLRTB(kc.getJqUi(),240,null,120,40,null,23);ra.layoutCtrlWithLRTB(ac.getJqUi(),100,100,null,74,null,23);ra.layoutCtrlWithLRTB(bc.getJqUi(),100,100,null,74,null,23)};var H=function(jb,Na,xb,Ub){ca.isCustom()?Na.setChecked(!0):jb.setChecked(!0);jb=(jb=ca.getBoundFieldFullName())?G.searchMetaField(jb):null;xb.setSelectedModel(jb);Ub.setModel(ca.getManualOrder())},I=function(jb){var Na=new La;Na.setDropdownCreator(function(xb,
Ub,ec){return M(xb,Ub,ec,jb)});return Na},M=function(jb,Na,xb,Ub){var ec=T.createMetaList();ec.setMetaModel(Ub);ec.setSelectedMetaField(Na);ec.addPressedListener(function(kc,Pb){(kc=ec.getSelectedLeafMetaField())&&xb(kc)});Na=ec.getJqUi();ra.layoutCtrlWithLRTB(Na,0,0,null,0,0,null);Na.appendTo(jb);return[-1,21*Math.max(4,ec.getVisibleItemsCount()+1)]},K=function(jb,Na){Na.text(jb?jb.getFullDisplayName():"")},ha=function(jb,Na){jb?(Na.css("color",""),Na.text(jb.getFullDisplayName())):(Na.css("color",
"#999"),Na.text(pa.get("sortAccordingBoundPlaceholder","\uff08\u8bf7\u786e\u4fdd\u6b64\u5b57\u6bb5\u4e0e\u76ee\u6807\u5b57\u6bb5\u7684\u503c\u4e00\u4e00\u5bf9\u5e94\uff09")))},Aa=function(jb){var Na="";if(jb){for(var xb=0;xb<Math.min(10,jb.length);xb++)0<Na.length&&(Na+=", "),Na+=jb[xb];10<jb.length&&(Na+="...")}return Na},Ta=function(jb){var Na=ca.getTargetFieldFullName();if(Na){var xb=ca.getManualOrder();!xb&&(xb=[]);T.createFacade(function(Ub){Ub?0<Ub.length?db(jb,Ub):T.showWarning(pa.get("sortAccordingManualPrompt2",
"\u6ca1\u6709\u6570\u636e\u3002")):T.showWarning(pa.get("sortAccordingManualPrompt3","\u76ee\u6807\u5b57\u6bb5\u8d85\u8fc7#1\u4e2a\u503c\uff0c\u4e0d\u5efa\u8bae\u8fdb\u884c\u624b\u52a8\u6392\u5e8f\u3002").replace("#1",100))}).getCustomizedOrderDimensionMembers(X,Na,xb)}else T.showWarning(pa.get("sortAccordingManualPrompt1","\u8bf7\u5148\u6307\u5b9a\u76ee\u6807\u5b57\u6bb5\u3002"))},db=function(jb,Na){var xb=new J;xb.setMembers(Na);xb.setConfirmAction(function(Ub){jb.setModel(Ub);ca.setManualOrder(Ub)});
xb.showDialog()}}function J(){Z.call(this);var ca=this,H=this.protectedMethod,I=new c,M;(function(){ca.setSize(480,400);H.setMaxSize(720,560);H.setTitle(pa.get("sortAccordingManual","\u624b\u52a8\u6392\u5e8f"));H.setContentPaneCreator(function(){return I.createJqUi()});H.setClosingAction(function(K){K&&M(I.getItems())})})();this.setConfirmAction=function(K){M=K};this.setMembers=function(K){I.setItems(K)}}Ua.call(this);var N=this.protectedMethod,X,Q,G,T;this.setContext=function(ca,H){X=ca;Q=S(ca,[U.DT_STRING]);
G=S(ca,[U.DT_STRING,U.DT_NUMBER]);T=H;N.updateUi()};this.check=function(){var ca="",H={};N.visitAllItemPanel(function(I,M){var K=I.getItemModel();if(!K.isAllEmpty())if(K.isCompleted()){I=K.getTargetFieldFullName();var ha=H[I];if(ha)var Aa=pa.get("sortAccordingPromptDuplicated","\u4e0e\u7b2c#1\u9879\u76ee\u6807\u5b57\u6bb5\u91cd\u590d").replace("#1",ha);else H[I]=M+1,(K=K.isCustom()?null:K.getBoundFieldFullName())&&K==I&&(Aa=pa.get("sortAccordingPromptSame","\u4f9d\u636e\u5b57\u6bb5\u4e0e\u76ee\u6807\u5b57\u6bb5\u76f8\u540c"))}else Aa=
pa.get("sortAccordingPromptIncomplete","\u8bbe\u7f6e\u4e0d\u5b8c\u6574");Aa&&(Aa=pa.get("sortAccordingPrompt","\u7b2c#1\u9879\uff0c#2\u3002").replace("#1",M+1).replace("#2",Aa),ca&&(ca+="\r\n"),ca+=Aa)});return ca};this.acceptEditing=function(){var ca={};N.visitAllItemPanel(function(Ta,db){Ta=Ta.getItemModel();Ta.isCompleted()&&(ca[Ta.getTargetFieldFullName()]=Ta)});for(var H=[],I=0;I<X.getTableCount();I++)for(var M=X.getTable(I),K=0;K<M.getFieldCount();K++){var ha=M.getField(K),Aa=ca[ha.getFullName()];
Aa?H.push([ha,Aa.isCustom()?null:Aa.getBoundFieldFullName(),Aa.isCustom()?Aa.getManualOrder():null]):ha.isOrderDefined()&&H.push([ha,null,null])}return H};this.protectedGetAddButtonText=function(){return pa.get("sortAccordingAddItem","\u6dfb\u52a0\u6392\u5e8f\u4f9d\u636e")};this.protectedUpdateUiImpl=function(){N.clearAllItemUi();for(var ca=!1,H=0;H<X.getTableCount();H++)for(var I=X.getTable(H),M=0;M<I.getFieldCount();M++){var K=I.getField(M);K.isOrderDefined()&&(R(K),ca=!0)}!ca&&R(null)};this.protectedCreateOneItemPanel=
function(ca){var H=new Y;H.setItemModel(ca);return H};this.protectedAddItemAction=function(){R(null)};this.protectedDeleteItemModel=function(ca){};var R=function(ca){var H=new va;ca&&(H.setTargetField(ca),H.setBoundFieldFullName(ca.getSortAccording()),H.setManualOrder(ca.getCustomOrder()),H.setCustom(ca.getCustomOrder()?!0:!1));N.appendItemUi(H)},S=function(ca,H){for(var I={},M=0;M<H.length;M++){var K=H[M];I[K]=!0}H=[];for(M=0;M<ca.getTableCount();M++){var ha=ca.getTable(M).clone();H.push(ha);for(var Aa=
ha.getFieldCount()-1;0<=Aa;Aa--){var Ta=ha.getField(Aa);K=Ta.getDataType();I[K]&&Ta.isCanAsDimension()||ha.removeField(Aa)}}ca=new P;ca.carryIn(H);return ca}}function mb(va,Y){this.getJqAnchor=function(){return va};this.getPrompt=function(){return Y}}function qb(){function va(){var R,S,ca,H,I=!1;this.setColor=function(xb){R=xb;S&&M()};this.getColor=function(){return R};this.getJqUi=function(){S||(S=$("<div>"),S.css("border","1px solid #ccc"),S.on("mousemove",Ta),S.on("mouseenter",Ta),S.on("mouseleave",
db),M());return S};this.setSelected=function(xb){S.css("box-shadow",xb?"0 0 5px 2px #0097f0":"")};var M=function(){S.css("background-color",R?R:"");S.find(".diagonal").remove();if(!R){var xb=S.prop("clientWidth"),Ub=S.prop("clientHeight"),ec=Math.sqrt(xb*xb+Ub*Ub),kc=Math.atan(Ub/xb);kc=180*kc/Math.PI;xb=K(kc);kc=K(-kc);ra.layoutCtrl(xb,0,0,ec,0);ra.layoutCtrl(kc,0,Ub,ec,0)}},K=function(xb){var Ub=$("<div>");Ub.addClass("diagonal");Ub.css("border-top","1px solid #f4f4f4");Ub.css("transform-origin",
"left top");Ub.css("transform","rotate("+xb+"deg)");Ub.appendTo(S);return Ub},ha=function(){I||(ca&&ca.getJqUi().remove(),ca=null)},Aa=function(){!H&&R&&(H=new ta,H.addActionListener(function(xb){Na(null)}),H.setText("X"),H.getJqUi().css("color","#00a0d1"),H.getJqUi().css("background-color","#fff"),H.getJqUi().css("border","1px solid #ccc"),H.getJqUi().css("border-radius","8px"),H.getJqUi().appendTo(S),ra.layoutCtrlWithLRTB(H.getJqUi(),null,-6,16,-6,null,16))},Ta=function(xb){ca||(ca=new ja,ca.setPopupListener(jb),
ca.addSelectedListener(Na),ca.getJqUi().appendTo(S),ra.layoutCtrlWithLRTB(ca.getJqUi(),0,0,null,null,0,20),R&&ca.getModel().decodeFrom(R));Aa()},db=function(xb){ha();H&&H.getJqUi().remove();H=null},jb=function(xb){I=xb;ha()},Na=function(xb){R=xb?xb.encodeToHexRgb():null;M();Q&&Q()}}var Y=[],J,N=4,X=5,Q,G,T=!0;this.setChangedListener=function(R){Q=R};this.setColors=function(R){for(var S=0;S<Y.length;S++)Y[S].setColor(R[S])};this.getColors=function(){for(var R=[],S=0;S<Y.length;S++)R.push(Y[S].getColor());
return R};this.checkDuplication=function(){for(var R={},S=0;S<Y.length;S++){var ca=Y[S];if(ca.getColor()){var H=R[ca.getColor()];if("number"==typeof H)return G&&G.setSelected(!1),G=ca,G.setSelected(!0),R=Math.floor(S/X)+1,S=S%X+1,H=Y[H].getJqUi(),S=pa.get("palettePromptDuplication","\u4e0e\u7b2c#1\u884c\u7b2c#2\u4e2a\u989c\u8272\u91cd\u590d\u3002").replace("#1",R).replace("#2",S),new mb(H,S);R[ca.getColor()]=S}}return null};this.createJqUi=function(R,S){N=R?R:N;X=S?S:X;Y.length=N*X;R=parseInt(100/
N);S=parseInt(.8*R)+"%";var ca=parseInt(100/X),H=parseInt(.8*ca)+"%";J=$("<div>");for(var I=0;I<N;I++)for(var M=R*I+"%",K=0;K<X;K++){var ha=I*X+K,Aa=Y[ha];Aa||(Aa=new va,Y[ha]=Aa);J.append(Aa.getJqUi());ha=ca*K+"%";ra.layoutCtrl(Aa.getJqUi(),ha,M,H,S);Aa.getJqUi().addClass("pane")}return J};this.clickToSelecting=function(R){G&&G.setSelected(!1);if(R=ra.upwardSearchHasClass($(R.target),$(R.currentTarget),"pane"))for(var S=0;S<Y.length;S++){var ca=Y[S];if(R[0]==ca.getJqUi()[0])return G=ca,G.setSelected(!0),
!0}return!1};this.moving=function(R,S){if(T){for(var ca=G.getJqUi(),H,I=0;I<Y.length;I++)if(ca[0]==Y[I].getJqUi()[0]){H=I;break}R=parseInt(H/X)+R;S=H%X+S;R=0>R?N-1:R>=N?0:R;S=0>S?X-1:S>=X?0:S;S=R*X+S;R=Y[S];Y[S]=G;Y[H]=R;H=ca.css("left");S=ca.css("top");R=R.getJqUi();I=R.css("left");var M=R.css("top");T=!1;ca.animate({left:I,top:M},150);R.animate({left:H,top:S},150,function(){T=!0});Q&&Q()}}}function sb(){var va=this,Y,J,N,X,Q,G,T,R,S,ca,H,I,M,K,ha,Aa=!1;this.setContext=function(Ca){Y=Ca;J||(J=$("<div>"),
Ca=new fb(pa.get("continuousColorMode","\u6e10\u53d8\u6a21\u5f0f")),Na(),xb(),Ub(),jb(Ca.getJqUi(),0,null,60,0,null,23),jb(X.getJqUi(),60,null,160,0,null,23),jb(Q.getJqUi(),0,null,50,40,null,23),jb(G.getJqUi(),null,0,50,40,null,23),jb(N,0,null,"100%",70,null,23),jb(T.getJqUi(),0,null,140,110,null,23),jb(I.getJqUi(),0,null,140,133,null,23),jb(S.getJqUi(),null,null,140,110,null,23),jb(K.getJqUi(),null,null,140,133,null,23),jb(R.getJqUi(),null,0,140,110,null,23),jb(M.getJqUi(),null,0,140,133,null,23),
jb(ca.getJqUi(),0,null,88,180,null,23),jb(ha.getJqUi(),80,null,60,180,null,23),jb(H.getJqUi(),0,null,320,210,null,23))};this.model2Ui=function(Ca){var Pa=Ca.getForwardGradientColor(),gb=Ca.getBackwardGradientColor();X.setSelected((Pa?1:0)|(gb?16:0));bc(Q,gb?gb.getColorA():null,gb?gb.getColorB():null);bc(G,Pa?Pa.getColorA():null,Pa?Pa.getColorB():null);Bb(Ca);ya(Ca);Oa(Ca);Ra(Ca);H.setChecked(Ca.isWholeColorRange());setTimeout(function(){ac();Ta(Ca)},0)};this.ui2Model=function(){var Ca=16==(X.getSelected()&
16),Pa=1==(X.getSelected()&1),gb=Ca&&Pa,pb=new ma;if(Ca){Ca=Q.getModel();Ca=Qa.rgbToHsl(Ca.getRed(),Ca.getGreen(),Ca.getBlue());var Cb=Q.getUserObject();!gb&&(Cb=sb.undressGray(Cb));pb.getBackwardGradientColor(!0).setColor(Ca,Cb)}Pa&&(Pa=G,Ca=Pa.getModel(),Ca=Qa.rgbToHsl(Ca.getRed(),Ca.getGreen(),Ca.getBlue()),Pa=Pa.getUserObject(),Pa=[Ca,Pa],Ca=Pa[0],Cb=Pa[1],!gb&&(Cb=sb.undressGray(Cb)),pb.getForwardGradientColor(!0).setColor(Ca,Cb));pb.setSegments(ca.isChecked()?ha.getValue():null);Pa=T.isChecked()?
parseFloat(I.getText()):null;Pa=isNaN(Pa)?null:Pa;Ca=R.isChecked()?parseFloat(M.getText()):null;Ca=isNaN(Ca)?null:Ca;null!=Pa&&null!=Ca&&Pa>Ca&&(Cb=Pa,Pa=Ca,Ca=Cb);pb.setMinData(Pa);pb.setMaxData(Ca);gb?(gb=pb.setMiddleData,Pa=S.isChecked()?parseFloat(K.getText()):null,Pa=isNaN(Pa)?null:Pa,gb.call(pb,Pa),pb.setWholeColorRange(H.isChecked())):(pb.setMiddleData(null),pb.setWholeColorRange(!1));return pb};this.getJqUi=function(){return J};var Ta=function(Ca){var Pa=Y(function(gb){var pb=N.prop("clientWidth"),
Cb=N.prop("clientHeight");Cb=Fb.createContext2d(N[0],pb,Cb);gb=C.parseContontinuousColorLegendModel(gb);(new v).draw(Cb,pb,gb)});Pa.setShowBlocking(!1);Pa.previewContinuousColor(Ca)},db=function(){Aa||(Aa=!0,setTimeout(function(){var Ca=va.ui2Model();Ta(Ca);Aa=!1},100))},jb=function(Ca,Pa,gb,pb,Cb,Rb,Yb){J.append(Ca);ra.layoutCtrlWithLRTB(Ca,Pa,gb,pb,Cb,Rb,Yb);null===Pa&&null===gb&&ra.layoutCtrlCenterAlign(Ca,pb)},Na=function(){X=new ab;X.setItemModels([17,1,16]);X.setCustomPainter(function(Ca,Pa,
gb){switch(gb){case 17:var pb=pa.get("continuousColorModeBoth","\u6b63\u8d1f\u5411\u53cc\u8272\u6e10\u53d8");break;case 1:pb=pa.get("continuousColorModePositve","\u6b63\u5411\u5355\u8272\u6e10\u53d8");break;case 16:pb=pa.get("continuousColorModeNegative","\u8d1f\u5411\u5355\u8272\u6e10\u53d8")}Pa.text(pb)});X.addSelectedChangedListener(function(Ca,Pa,gb){if(!Q.getUserObject()||!G.getUserObject()){Ca=sb.getDefaultBackwardColor();Pa=sb.getDefaultForwardColor();var pb=sb.makeCustomColorB(Ca),Cb=sb.makeCustomColorB(Pa);
bc(Q,Ca,pb);bc(G,Pa,Cb)}17==gb&&isNaN(parseFloat(K.getText()))&&(K.setText("0"),S.setChecked(!0));ac();db()})},xb=function(){N=$(Fb.createCanvas());var Ca=function(Pa,gb){gb=Qa.rgbToHsl(gb.getRed(),gb.getGreen(),gb.getBlue());gb=sb.makeCustomColorB(gb);Pa.setUserObject(gb);db()};Q=new ja;Q.addSelectedListener(function(Pa){Ca(Q,Pa)});G=new ja;G.addSelectedListener(function(Pa){Ca(G,Pa)})},Ub=function(){T=new Da;T.setText(pa.get("continuousColorMin","\u6307\u5b9a\u6570\u636e\u6700\u5c0f\u503c"));R=
new Da;R.setText(pa.get("continuousColorMax","\u6307\u5b9a\u6570\u636e\u6700\u5927\u503c"));S=new Da;S.setText(pa.get("continuousColorMiddle","\u6307\u5b9a\u6570\u636e\u4e2d\u5fc3\u70b9"));ca=new Da;ca.setText(pa.get("continuousColorSegment","\u5206\u6bb5"));H=new Da;H.setText(pa.get("continuousColorWholeRange","\u4f7f\u7528\u5b8c\u6574\u989c\u8272\u8303\u56f4"));H.addCheckedListener(function(Ca,Pa){Pa&&db()});I=ec();M=ec();K=ec();ha=new na;ha.setConstraint(2,20,1);ha.addValueChangedListener(function(Ca,
Pa,gb,pb){db()},!0);kc(T,I);kc(R,M);kc(S,K);Pb(ca,ha)},ec=function(){var Ca=function(){var gb=parseFloat(Pa.getText());Pa.setText(isNaN(gb)?"":gb)},Pa=new kb;Pa.setPlaceholder(pa.get("continuousColorInputNumber","\u5728\u6b64\u5904\u586b\u5199\u6570\u503c"));Pa.addAcceptableListener(function(gb,pb){pb&&(Ca(),db())});Pa.addBlurListener(function(gb){Ca();db()});return Pa},kc=function(Ca,Pa){Ca.addCheckedListener(function(gb,pb){pb&&(Qb(Pa,gb.isChecked()),gb.isChecked()&&Pa.requestFocus(),Pa.getText()&&
db())})},Pb=function(Ca,Pa){Ca.addCheckedListener(function(gb,pb){pb&&(Qb(Pa,gb.isChecked()),db())})},Qb=function(Ca,Pa){Ca.getJqUi().css("display",Pa?"":"none")},ac=function(){var Ca=16==(X.getSelected()&16),Pa=1==(X.getSelected()&1),gb=Ca&&Pa;Qb(Q,Ca);Qb(G,Pa);Qb(S,gb);Qb(H,gb);Qb(K,S.getJqUi().is(":visible")&&S.isChecked())},bc=function(Ca,Pa,gb){Pa&&gb?(Ca.getModel().setHsl(Pa[0],Pa[1],Pa[2]),Ca.setUserObject(gb)):Ca.setUserObject(null)},Bb=function(Ca){(Ca=Ca.getSegments())?(ca.setChecked(!0),
ha.setValue(Ca)):(ca.setChecked(!1),ha.setValue(2));Qb(ha,ca.isChecked())},ya=function(Ca){var Pa=Ca.isMinDataDefined();T.setChecked(Pa);I.setText(Pa?Ca.getMinData():"");Qb(I,T.isChecked())},Oa=function(Ca){var Pa=Ca.isMaxDataDefined();R.setChecked(Pa);M.setText(Pa?Ca.getMaxData():"");Qb(M,R.isChecked())},Ra=function(Ca){var Pa=Ca.isMiddleDataDefined();S.setChecked(Pa);K.setText(Pa?Ca.getMiddleData():"");Qb(K,S.isChecked())}}function Vb(){Z.call(this);var va=this,Y=this.protectedMethod,J,N,X,Q;this.edit=
function(T,R,S){var ca=va.protectedInitDialog(),H=ca[0],I=ca[1];J=!1;Y.setContentPaneCreator(function(){var M=G(R);N.setModelBook(T);return M});Y.setClosingChecker2(function(){Q&&Q.isParamDefinition()&&X.ui2Model(Q.getDefinition());var M=N.checkValid();return M?(Y.getMessageCurtain().showPrompt(M),!1):!0},function(){if(J){var M=new Wa;M.setOptionType(Wa.OPTION_YES_NO);M.setMessage(H);M.setClosingChecker(function(K){K==Wa.RETURN_YES&&Y.destroy();return!0});M.showDialog();return!1}return!0});Y.setClosingAction(function(M){if(M){var K=
R.getCommandManager();K.compositeStart(I);for(var ha=N.acceptEditing(),Aa=0;Aa<ha.length;Aa++)K.perform(ha[Aa]);K.compositeEnd()}S&&S(M)});va.showDialog()};this.protectedInitDialog=function(){throw Error("Implement");};this.protectedCreateTreeUi=function(){throw Error("Implement");};this.protectedCreateSettingUi=function(){throw Error("Implement");};this.protectedPreview=function(T,R,S,ca){throw Error("Implement");};var G=function(T){N=va.protectedCreateTreeUi();N.setEditingListener(function(){J=
!0});N.setSelectedListener(function(I,M){I&&I.isParamDefinition()&&(X.ui2Model(I.getDefinition()),I.setText(I.getDefinition().getName()));M?(Q=M,M.isParamDefinition()?(X.model2Ui(M.getQingModel(),M.getDefinition()),X.display(!0),S.display(!1)):(S.model2Ui(M),S.display(!0),X.display(!1))):(S.display(!1),X.display(!1))});var R=N.getJqUi(),S=new Ma;X=va.protectedCreateSettingUi();X.setEditingListener(function(){J=!0});X.setNameChangingListener(function(I){N.updateParamName(I)});X.setPreviewAction(function(){if(Q&&
Q.isParamDefinition()){var I=Q.getQingModel(),M=Q.getPreferences(),K=Q.getDefinition();X.ui2Model(K);var ha=N.checkValid(K);ha?Y.getMessageCurtain().showPrompt(ha):va.protectedPreview(T,I,M,K)}});var ca=$("<div>");ca.append(S.getJqUi());ca.append(X.getJqUi());S.display(!1);X.display(!1);ra.layoutCtrlWithLRTB(S.getJqUi(),0,0,null,0,0,null);ra.layoutCtrlWithLRTB(X.getJqUi(),0,0,null,0,0,null);var H=$("<div>");H.append(R);H.append(ca);ra.layoutCtrlWithLRTB(R,0,null,200,0,0,null);ra.layoutCtrlWithLRTB(ca,
220,0,null,0,0,null);return H}}function Lb(){function va(){var K,ha;this.isParamDefinition=function(){return!1};this.setText=function(Aa){K=Aa};this.getText=function(){return K};this.setModelPage=function(Aa){ha=Aa};this.getModelPage=function(){return ha};this.getQingModel=function(){return ha.getModel()};this.getPreferences=function(){return ha.getPreferences()}}function Y(){va.call(this)}function J(){va.call(this)}function N(K){va.call(this);this.isParamDefinition=function(){return!0};this.getDefinition=
function(){return K}}var X=this,Q,G,T;this.setModelBook=function(K){T=[];K=K.getModelPages();for(var ha=0;ha<K.length;ha++){var Aa=K[ha],Ta=Aa.getModel(),db=new J;db.setModelPage(Aa);0==ha?db.setText(pa.get("briefModelCurrent","\u5f53\u524d\u6a21\u578b")):db.setText(pa.get("briefModelN","\u6a21\u578b#1").replace("#1",ha));T.push(db);var jb=X.protectedGetModelGetter(Ta)();if(jb)for(var Na=0;Na<jb.length;Na++){var xb=jb[Na].copy();X.protectedPrecheckError(Ta,xb);db=new N(xb);db.setModelPage(Aa);db.setText(xb.getName());
T.push(db)}db=new Y;db.setModelPage(Aa);db.setText("+ "+X.protectedGetDisplayTextForAppend());T.push(db)}S().setItemModels(T);S().setSelecteds([T[0]])};this.setSelectedListener=function(K){S().addSelectedChangedListener(function(ha,Aa,Ta){K(Aa?Aa[0]:null,Ta?Ta[0]:null)})};this.setEditingListener=function(K){Q=K};this.getJqUi=function(){return S().getJqUi()};this.updateParamName=function(K){var ha=S().getSelecteds()[0];ha.setText(K);ha=S().getItemUiByModel(ha).children("span");M(ha,K)};this.checkValid=
function(K){if(K)return R(K,{});for(var ha={},Aa=1;Aa<T.length;Aa++){var Ta=T[Aa];if(Ta.isParamDefinition()&&(K=Ta.getDefinition(),K=R(K,ha)))return S().setSelecteds([Ta]),K}return null};var R=function(K,ha){var Aa=K.getName();if(!Aa)return pa.get("briefCheckNameLack","\u5fc5\u987b\u5b9a\u4e49\u540d\u79f0\uff0c\u4ee5\u4f9b\u4f7f\u7528\u573a\u666f\u5f15\u7528\u3002");if(!cb.checkVariableNaming(Aa))return pa.get("briefCheckNameInvalid","\u540d\u79f0\u5fc5\u987b\u4ee5\u5b57\u6bcd\u5f00\u5934\uff0c\u53ea\u80fd\u5305\u542b\u5b57\u6bcd\u3001\u6570\u5b57\u3001\u4e0b\u5212\u7ebf\u3002");
if(20<Aa.length)return pa.get("briefCheckNameTooLong","\u540d\u79f0\u4e0d\u80fd\u8d85\u8fc7#1\u4e2a\u5b57\u7b26\u3002").replace("#1",20);if(ha[Aa])return pa.get("briefCheckNameDuplicated","\u540d\u79f0\u91cd\u590d\u3002");ha[Aa]=!0;return X.protectedCustomCheckInvalid(K)};this.protectedCustomCheckInvalid=function(K){throw Error("Implement");};this.acceptEditing=function(){for(var K=T[0].getQingModel(),ha=[],Aa=1;Aa<T.length;Aa++){var Ta=T[Aa];Ta.isParamDefinition()&&ha.push(Ta.getDefinition())}Aa=
new nb;Aa.setMethod(X.protectedGetModelGetter(K),X.protectedGetModelSetter(K));Aa.setValue(ha);return[Aa]};this.protectedGetModelGetter=function(K){throw Error("Implement");};this.protectedGetModelSetter=function(K){throw Error("Implement");};var S=function(){G||(G=new l,G.setCustomItemPainter(I));return G};this.protectedPrecheckError=function(K,ha){};this.protectedGetDisplayTextForAppend=function(){throw Error("Implement");};var ca=function(K){return function(ha){ha=X.protectedCreateDefinition();
ha=new N(ha);ha.setModelPage(K.getModelPage());for(var Aa=T.length-1;0<=Aa;Aa--)if(T[Aa]==K){T.splice(Aa,0,ha);S().setItemModels(T);S().setSelecteds([ha]);break}Q()}};this.protectedCreateDefinition=function(){throw Error("Implement");};var H=function(K,ha){var Aa=new W;Aa.setText(X.protectedGetDisplayTextForAskDelete());Aa.setConfirmedListener(function(Ta){if(Ta){var db;Ta=!1;for(var jb=T.length-1;0<=jb;jb--){var Na=T[jb];Ta||Na!=ha?Ta&&Na instanceof J&&Na.getQingModel()==ha.getQingModel()&&(db=Na):
(T.splice(jb,1),Ta=!0)}S().setItemModels(T);S().setSelecteds([db])}});Aa.show(K)};this.protectedGetDisplayTextForAskDelete=function(){throw Error("Implement");};var I=function(K,ha){K.empty();var Aa=K,Ta=0;ha instanceof Y&&(Ta=1,l.undressItem(K),K.css({color:"#69c","text-decoration":"underline",cursor:"pointer"}),K.on("click",ca(ha)));ha instanceof J&&(Ta=0,K.css("font-weight","bold"));if(ha instanceof N){Ta=1;Aa=$("<span>");var db=$("<div>");db.attr("title",pa.get("briefDelete","\u5220\u9664"));
db.css({cursor:"pointer",display:"none"});y.background(db,"icon_delete");ra.layoutCtrlWithLRTB(db,null,4,16);ra.layoutCtrlMiddleAlign(db,16);Aa.appendTo(K);db.appendTo(K);K.on("mouseenter",function(jb){db.css("display","")});K.on("mouseleave",function(jb){db.css("display","none")});db.on("click",function(jb){H(K,ha)})}K.css({"padding-left":4+24*Ta+"px",height:"26px","line-height":"26px"});M(Aa,ha.getText())},M=function(K,ha){K.text(ha?ha:"("+pa.get("briefNonameDisplay","\u672a\u547d\u540d")+")")}}
function xa(){Lb.call(this);this.protectedCustomCheckInvalid=function(va){for(var Y=!1,J=va.getDimensionPickers(),N=0;N<J.length;N++){var X=J[N];Y=Y||X.isOutputTarget();if(X.getType()==Ea.PICKER_CONDITION&&!X.getScript())return pa.get("briefCheckConditionLack","\u7b5b\u9009\u6761\u4ef6\u672a\u8bbe\u7f6e\u3002")}va=va.getMeasurePickers();for(N=0;N<va.length;N++)if(X=va[N],Y=Y||X.isOutputTarget(),X.getType()==Ea.PICKER_CONDITION&&!X.getScript())return pa.get("briefCheckConditionLack","\u7b5b\u9009\u6761\u4ef6\u672a\u8bbe\u7f6e\u3002");
return Y?null:pa.get("briefCheckOutputTargetLack","\u672a\u6307\u5b9a\u8f93\u51fa\u5b57\u6bb5\u3002")};this.protectedGetModelGetter=function(va){return va.getBriefOutputDefinitions};this.protectedGetModelSetter=function(va){return va.setBriefOutputDefinitions};this.protectedCreateDefinition=function(){return new Ea};this.protectedGetDisplayTextForAppend=function(){return pa.get("briefAppend","\u6dfb\u52a0\u8f93\u51fa\u53c2\u6570")};this.protectedGetDisplayTextForAskDelete=function(){return pa.get("briefAskDelete",
"\u5220\u9664\u8f93\u51fa\u53c2\u6570\uff1f")}}function eb(){Lb.call(this);this.protectedCustomCheckInvalid=function(va){var Y=0;va=va.getConditionItems();for(var J=0;J<va.length;J++){var N=va[J],X=N.getCondition();if(X.getEditingAlarm())return X.getEditingAlarm();if(X.isValid()){if(Y+=N.getLeftBrackets(),Y-=N.getRightBrackets(),0>Y)return pa.get("warningRulePrompt1","\u5de6\u53f3\u62ec\u53f7\u4e0d\u5339\u914d")}else return pa.get("warningRulePrompt2","\u6761\u4ef6\u4e0d\u5b8c\u6574")}return 0<Y?
pa.get("warningRulePrompt1","\u5de6\u53f3\u62ec\u53f7\u4e0d\u5339\u914d"):null};this.protectedGetModelGetter=function(va){return va.getWarningRuleDefinitions};this.protectedGetModelSetter=function(va){return va.setWarningRuleDefinitions};this.protectedCreateDefinition=function(){return new bb};this.protectedPrecheckError=function(va,Y){var J=va.getBriefOutputableFieldsModel();va=J.getDimensionFields();J=J.getMeasureFields();Y=Y.getConditionItems();for(var N=0;N<Y.length;N++){var X=Y[N].getCondition();
if(X){for(var Q=X.getField(),G=null,T=0;T<va.length;T++){var R=va[T];if(!R.isInvalid()&&R==Q){G=!0;break}}if(null===G)for(T=0;T<J.length;T++)if(R=J[T],!R.isInvalid()&&R==Q){G=!1;break}null===G?(G=pa.get("warningRuleError1","\u539f\u5148\u4f7f\u7528\u7684\u5206\u6790\u5b57\u6bb5\u5df2\u4e0d\u5b58\u5728"),Q&&(G+=": ",G+=Q.getComplexText()),X.setEditingAlarm(G)):(R=Q.getMetaField().getDataType(),G=da.createSelectableOperations(G,R),da.isOperationFit(X,G)||(G=pa.get("warningRuleError2","\u5206\u6790\u5b57\u6bb5\u5c5e\u6027\u53d1\u751f\u53d8\u5316\uff0c\u539f\u5148\u8bbe\u7f6e\u7684\u6bd4\u8f83\u7b26\u4e0d\u5339\u914d"),
G+=": ",G+=Q.getComplexText(),G+=" ",G+=da.operationToString(X.getOperation()),G+=" ",G+=da.comparingToString(X.getComparing()),X.setEditingAlarm(G)))}}};this.protectedGetDisplayTextForAppend=function(){return pa.get("warningRuleAppend","\u6dfb\u52a0\u9884\u8b66\u89c4\u5219")};this.protectedGetDisplayTextForAskDelete=function(){return pa.get("warningRuleAskDelete","\u5220\u9664\u9884\u8b66\u89c4\u5219\uff1f")}}function Ma(){var va;this.getJqUi=function(){va||(va=$("<div>"),va.css({overflow:"auto",
"white-space":"pre-wrap","line-height":"24px"}));return va};this.model2Ui=function(Y){var J=Y.getText();Y=Y.getQingModel().getBriefOutputableFieldsModel();var N=Y.getDimensionFields(),X=Y.getMeasureFields(),Q=0;Y="";for(var G=0;G<N.length;G++){var T=N[G];T.isInvalid()||(0<G&&(Y+=", "),Y+=T.getComplexText(),Q++)}N=0;var R="";for(G=0;G<X.length;G++)T=X[G],T.isInvalid()||(0<G&&(R+=", "),R+=T.getComplexText(),N++);X=pa.get("briefModelOverviewDimension","#1\u6709#2\u4e2a\u7ef4\u5ea6\u3002").replace("#1",
J).replace("#2",Q);X=X+"\r\n"+Y+"\r\n\r\n"+pa.get("briefModelOverviewMeasure","#1\u6709#2\u4e2a\u5ea6\u91cf\u3002").replace("#1",J).replace("#2",N);X=X+"\r\n"+R;va.text(X)};this.display=function(Y){va.css("display",Y?"block":"none")}}function Ja(){function va(){var I,M;this.setCompositeInfo=function(ha,Aa){I=ha;M=Aa};this.getAnalyticalField=function(){return I};this.isDimension=function(){return M};this.getDataType=function(){return I.getMetaField().getDataType()};this.getDisplayText=function(){return K()};
this.toString=function(){return K()};var K=function(){var ha=M?pa.get("briefDimension","\u7ef4\u5ea6"):I.isDimension()?pa.get("briefProperty","\u5c5e\u6027"):pa.get("briefMeasure","\u5ea6\u91cf");return I.getComplexText()+"("+ha+")"}}var Y=this,J,N,X,Q,G,T,R;this.getJqUi=function(){if(!Q){Q=$("<div>");S();ca();R=new ob;Y.protectedInitPostScript(R);var I=new ta;I.setText(pa.get("briefPreview","\u5c1d\u8bd5\u6267\u884c\u4ee5\u67e5\u770b\u7ed3\u679c"));I.addActionListener(function(M){X()});Y.protectedInitUi(Q,
G,T,R,I)}return Q};this.protectedInitUi=function(I,M,K,ha,Aa){throw Error("Implement");};this.display=function(I){Q.css("display",I?"block":"none");Y.protectedCustomDisplay(I)};this.protectedCustomDisplay=function(I){throw Error("Implement");};this.setNameChangingListener=function(I){J=I};this.setEditingListener=function(I){N=I};this.setPreviewAction=function(I){X=I};this.model2Ui=function(I,M){G.setText(M.getName());T.setText(M.getDescription());var K=M.getPostScript();R.setModel(K?K:"");Y.protectedModel2Ui(I,
M)};this.protectedModel2Ui=function(I,M){throw Error("Implement");};this.ui2Model=function(I){I.setName($.trim(G.getText()));I.setDescription($.trim(T.getText()));var M=R.getModel();I.setPostScript(M?M:null);Y.protectedUi2Model(I)};this.protectedUi2Model=function(I){throw Error("Implement");};var S=function(){G=new kb;G.addEditedListener(function(I){J($.trim(I.getText()));N()})},ca=function(){T=new ba;T.addEditedListener(function(I){N()})};this.protectedInitPostScript=function(I){throw Error("Implement");
};var H=function(I,M,K,ha,Aa,Ta,db){Q.append(I);ra.layoutCtrlWithLRTB(I,M,K,ha,Aa,Ta,db)};this.protectedMethod={};this.protectedMethod.fireEditingEvent=function(){N()};this.protectedMethod.layoutCtrl=function(I,M,K,ha,Aa,Ta,db){H(I.getJqUi(),M,K,ha,Aa,Ta,db)};this.protectedMethod.layoutJqCtrl=H;this.protectedMethod.getFilterScriptDemo=function(){var I=pa.get("briefConditionDemo1","\u7ef4\u5ea6\u6210\u5458\u5355\u9009\uff1a")+' VALUE="..."';I+="\r\n"+pa.get("briefConditionDemo2","\u7ef4\u5ea6\u6210\u5458\u591a\u9009\uff1a")+
' OR(VALUE="...", VALUE="...", VALUE="...")';I+="\r\n"+pa.get("briefConditionDemo3","\u65e5\u671f\u7ef4\u5ea6\u6309\u5e74\uff1a")+" YEAR(VALUE)=2021";I+="\r\n"+pa.get("briefConditionDemo4","\u65e5\u671f\u7ef4\u5ea6\u6309\u5e74\u6708\uff1a")+' FIRSTDAY(VALUE,"MD")=DATE(2021,10,1)';I+="\r\n"+pa.get("briefConditionDemo5","\u5ea6\u91cf\u503c\u5927\u4e8e\uff1a")+" VALUE>1";return I+="\r\n"+pa.get("briefConditionDemo6","\u5ea6\u91cf\u503c\u8303\u56f4\uff1a")+" AND(VALUE>=1, VALUE<=10)"};this.protectedMethod.searchAllFieldItems=
function(I,M,K){var ha=I.getDimensionFields();I=I.getMeasureFields();for(var Aa=0;Aa<ha.length;Aa++){var Ta=ha[Aa];if(!Ta.isInvalid()){var db=new va;db.setCompositeInfo(Ta,!0);M.push(db)}}for(Aa=0;Aa<I.length;Aa++)Ta=I[Aa],Ta.isInvalid()||(db=new va,db.setCompositeInfo(Ta,!1),K.push(db))}}function oa(){function va(H){KTDefaultCellRender.call(this,H);var I=[Ea.PICKER_FULL,Ea.PICKER_CONDITION],M=[Ea.PICKER_FULL,Ea.PICKER_CONDITION,Ea.PICKER_MAX,Ea.PICKER_MIN],K=this,ha=this.paintCellUI;this.paintCellUI=
function(Na,xb){if(K.getCurrentRowIdx()<a.getHeadRowCount())ha(Na,xb);else{var Ub=K.getCurrentRow().getUserObject();if(Ub){var ec=K.getCurrentRow().getCell(0).getValue(),kc=K.getCurrentRow().getCell(1).getValue();if(0==K.getCurrentColIdx())ha(Na,xb),$(Na).attr("title",ec.getDisplayText());else if(1==K.getCurrentColIdx())Na=a.createCtrlInCell(Na,K.getCellWidth(),K.getCellHeight(),ab),Na.setSelected(kc.getType()),Na.setItemModels(ec.isDimension()?I:M),Na.setCustomPainter(Aa),Na.addSelectedChangedListener(db(K.getCell(),
Ub));else if(2==K.getCurrentColIdx())switch(kc.getType()){case Ea.PICKER_CONDITION:Ub=a.createCtrlInCell(Na,K.getCellWidth(),K.getCellHeight(),ob);Ub.setModel(kc.getScript());Ub.addActionListener(jb(kc));Ub.setCustomPainter(Ta);break;case Ea.PICKER_MAX:case Ea.PICKER_MIN:Ub=a.createCtrlInCell(Na,K.getCellWidth(),K.getCellHeight(),na);Ub.setConstraint(1,99,1);Ub.setValue(kc.getTopN());Ub.addValueChangedListener(function(Pb,Qb,ac,bc){bc!=na.CHANGED_BY_API&&(kc.setTopN(ac),Y.fireEditingEvent())},!0);
break;case Ea.PICKER_FULL:Ub=a.createCtrlInCell(Na,K.getCellWidth(),K.getCellHeight(),fb),Ub.setText(pa.get("briefPickerFullSetting","\u5b9a\u4f4d\u65b9\u5f0f\u4e3a\u201c\u5168\u90e8\u201d\uff0c\u4e0d\u5fc5\u8be6\u7ec6\u8bbe\u7f6e\u3002")),Ub.setEnabled(!1)}}}};var Aa=function(Na,xb,Ub){switch(Ub){case Ea.PICKER_FULL:Na=pa.get("briefPickerTypeFull","\u5168\u90e8");break;case Ea.PICKER_CONDITION:Na=pa.get("briefPickerTypeCondition","\u7b5b\u9009\u6761\u4ef6");break;case Ea.PICKER_MAX:Na=pa.get("briefPickerTypeMax",
"\u6700\u5927\u524d\u51e0\u540d");break;case Ea.PICKER_MIN:Na=pa.get("briefPickerTypeMin","\u6700\u5c0f\u524d\u51e0\u540d");break;default:Na=""}xb.text(Na)},Ta=function(Na){return Na?Na:"("+pa.get("briefPickerConditionNone","\u672a\u8bbe\u7f6e")+")"},db=function(Na,xb){return function(Ub,ec,kc){Ub=Ea.createPicker(kc);Ub.setField(xb.getField());kc==xb.getType()&&Ub.takeDetail(xb);Na.setValue(Ub);a.refresh(H);Y.fireEditingEvent()}},jb=function(Na){return function(xb){var Ub=new ka;Ub.setTitle(pa.get("briefPickerTypeCondition",
"\u7b5b\u9009\u6761\u4ef6"));Ub.setDemo(Y.getFilterScriptDemo());Ub.show(xb.getModel(),function(ec){ec=$.trim(ec);Na.setScript(ec);a.refresh(H);Y.fireEditingEvent()})}}}Ja.call(this);var Y=this.protectedMethod,J,N,X,Q,G;this.protectedModel2Ui=function(H,I){var M=[],K=[];H=H.getBriefOutputableFieldsModel();Y.searchAllFieldItems(H,M,K);var ha=M.concat(K);X.setItemModels(ha);G.setUserObject(ha);H=R(M,I.getDimensionPickers());I=R(K,I.getMeasurePickers());a.clearWithoutHead(J);T(M,H);T(K,I);for(ha=ha.length;5>
ha;ha++)a.createRow(J).setHeight(26);a.refresh(J);var Aa=[],Ta,db;ha=function(jb,Na){for(var xb=0;xb<jb.length;xb++){var Ub=jb[xb];!db&&Ub.isSortAccording()&&(Ta=Ub,db=Na[xb]);Ub.isOutputTarget()&&(Aa[Ub.getOutputTargetIndex()]=Na[xb])}};ha(H,M);ha(I,K);for(ha=Aa.length-1;0<=ha;ha--)!Aa[ha]&&Aa.splice(ha,1);G.setModel(Aa);Ta?(N.setChecked(!0),X.setSelected(db),Q.setSelected(Ta.isSortAsc())):(N.setChecked(!1),X.setSelected(null),Q.setSelected(!0))};var T=function(H,I){for(var M=0;M<H.length;M++){var K=
H[M],ha=I[M],Aa=ha.copy(),Ta=a.createRow(J);Ta.setHeight(26);Ta.setUserObject(ha);Ta.getCell(0).setValue(K);Ta.getCell(1).setValue(Aa)}},R=function(H,I){for(var M=[],K=0;K<H.length;K++){for(var ha=H[K],Aa=null,Ta=0;Ta<I.length;Ta++){var db=I[Ta];if(db.getField()==ha.getAnalyticalField()){Aa=db;break}}Aa||(Aa=Ea.createPicker(Ea.PICKER_FULL),Aa.setField(ha.getAnalyticalField()));M.push(Aa)}return M};this.protectedUi2Model=function(H){var I=G.getModel(),M=null,K=!0;if(N.isChecked()){var ha=X.getSelected();
K=Q.getSelected();M=ha?ha.getAnalyticalField():null}for(var Aa=[],Ta=[],db=a.getHeadRowCount(J);db<J.getRowsCount();db++){var jb=J.getRow(db);ha=jb.getCell(0).getValue();if(jb.getUserObject()){var Na=jb=jb.getCell(1).getValue(),xb=Na.setOutputTargetIndex;a:{var Ub=jb.getField();for(var ec=0;ec<I.length;ec++)if(I[ec].getAnalyticalField()==Ub){Ub=ec+1;break a}Ub=null}xb.call(Na,Ub);jb.setSortAccording(jb.getField()==M,K);(ha.isDimension()?Aa:Ta).push(jb)}}H.setDimensionPickers(Aa);H.setMeasurePickers(Ta)};
this.protectedCustomDisplay=function(H){H&&a.refresh(J)};this.protectedInitUi=function(H,I,M,K,ha){H=new fb(pa.get("briefAttrCaptionName","\u540d\u79f0"));var Aa=new fb(pa.get("briefAttrCaptionDescription","\u7b80\u8981\u63cf\u8ff0")),Ta=new fb(pa.get("briefAttrCaptionFilter","\u8ba1\u7b97\u7ed3\u679c\u5b9a\u4f4d\u5230")),db=new fb(pa.get("briefAttrCaptionTarget","\u8f93\u51fa\u5b57\u6bb5")),jb=new fb(pa.get("briefAttrCaptionSort","\u6392\u5e8f\u4f9d\u636e\uff08\u5f53\u5b58\u5728\u591a\u884c\u65f6\uff09")),
Na=new fb(pa.get("briefAttrCaptionPostscript","\u540e\u5904\u7406\u811a\u672c\uff08\u81ea\u5b9a\u4e49\u663e\u793a\u6587\u5b57\uff09"));J=a.createTable();J.setDraggableAdjusting(!1);J.setCellRender(new va(J));J.getCellRender().setOutsideVisible(!1);a.bindTableListenerForCtrl(J);J.addColumns(3);J.getColumn(0).setWidth(200);J.getColumn(1).setWidth(100);J.getColumn(2).setWidth(225);var xb=a.createHeadRow(J);xb.setHeight(18);xb.getCell(0).setValue(pa.get("briefPickerField","\u5b57\u6bb5"));xb.getCell(1).setValue(pa.get("briefPickerType",
"\u5b9a\u4f4d\u65b9\u5f0f"));xb.getCell(2).setValue(pa.get("briefPickerSetting","\u8be6\u7ec6\u8bbe\u7f6e"));S();ca();xb=$(J.getUI());xb.addClass("sa-ctrl-common-border");Y.layoutCtrl(H,0,null,60,0,null,23);Y.layoutCtrl(I,60,0,null,0,null,23);Y.layoutCtrl(Aa,0,0,null,30,null,23);Y.layoutCtrl(M,0,0,null,55,null,40);Y.layoutCtrl(Ta,0,0,null,110,null,20);Y.layoutJqCtrl(xb,0,0,null,135,120,null);Y.layoutCtrl(jb,null,0,250,null,85,20);Y.layoutCtrl(N,null,230,20,null,60,23);Y.layoutCtrl(X,null,70,160,null,
60,23);Y.layoutCtrl(Q,null,0,60,null,60,23);Y.layoutCtrl(db,0,300,null,null,85,20);Y.layoutCtrl(G,0,300,null,null,60,23);Y.layoutCtrl(Na,0,300,null,null,25,20);Y.layoutCtrl(K,0,300,null,null,1,23);Y.layoutCtrl(ha,null,0,250,null,0,40)};var S=function(){G=new ob;G.addActionListener(function(H){H=G.getUserObject();var I=G.getModel().slice(0);(new Ha).show(H,I,function(M){G.setModel(M);Y.fireEditingEvent()})});G.setCustomPainter(function(H){var I="";if(H)for(var M=0;M<H.length;M++)0<M&&(I+=", "),I+=
H[M].getDisplayText();return I})},ca=function(){N=new Da;N.setChecked(!0);N.addCheckedListener(function(H,I){H=H.isChecked();X.setEnabled(H);Q.setEnabled(H);I&&Y.fireEditingEvent()});X=new ab;X.addSelectedChangedListener(function(H,I,M){Y.fireEditingEvent()});Q=new ab;Q.setItemModels([!0,!1]);Q.setCustomPainter(function(H,I,M){H=!0===M?pa.get("briefSortAsc","\u5347\u5e8f"):!1===M?pa.get("briefSortDesc","\u964d\u5e8f"):"";I.text(H)});Q.addSelectedChangedListener(function(H,I,M){Y.fireEditingEvent()})};
this.protectedInitPostScript=function(H){var I="",M=function(K,ha,Aa){I&&(I+="\r\n");I+=K;I+=".  ";I+=ha;I+="    ";I+=Aa};M(1,'eachRow("{1}", "\u3001")',pa.get("briefPostScriptDemo1","\u62fc\u63a5\u6240\u6709\u884c\u7b2c1\u5217\u6587\u5b57\uff0c\u7528\u987f\u53f7\u5206\u9694\u3002"));M(2,'eachRow("{1}{2}", "\uff1b", rankTop(3))',pa.get("briefPostScriptDemo2","\u62fc\u63a5\u524d3\u540d\u7684\u6240\u6709\u884c\u7684\u7b2c1\u5217\u7b2c2\u5217\u6587\u5b57\uff0c\u7528\u5206\u53f7\u5206\u9694\u3002"));
M(3,'topRows(2, "{1}", "\u3001")',pa.get("briefPostScriptDemo3","\u62fc\u63a5\u524d2\u884c\u7684\u7b2c1\u5217\u6587\u5b57\uff0c\u7528\u987f\u53f7\u5206\u9694\u3002"));M(4,'topRows(3, "{1}", "&", rank(2))',pa.get("briefPostScriptDemo4","\u62fc\u63a5\u7b2c2\u540d\uff08\u5b58\u5728\u5e76\u5217\uff09\u7684\u524d3\u884c\u7684\u7b2c1\u5217\u6587\u5b57\uff0c\u7528&\u53f7\u5206\u9694\u3002"));M(5,"rowsCount()",pa.get("briefPostScriptDemo5","\u6982\u8981\u8ba1\u7b97\u7ed3\u679c\u603b\u5171\u6709\u591a\u5c11\u884c\u3002"));
M(6,"rowsCount(rank(1))",pa.get("briefPostScriptDemo6","\u6392\u540d\u7b2c\u4e00\u7684\u6709\u591a\u5c11\u884c\u3002"));H.addActionListener(function(K){var ha=new ka;ha.setTitle(pa.get("briefAttrCaptionPostscript","\u540e\u5904\u7406\u811a\u672c\uff08\u81ea\u5b9a\u4e49\u663e\u793a\u6587\u5b57\uff09"));ha.setDemo(I);ha.show(K.getModel(),function(Aa){Aa=$.trim(Aa);K.setModel(Aa);Y.fireEditingEvent()})})}}function ka(){Z.call(this);var va=this,Y=this.protectedMethod,J,N=$("<div>");this.setTitle=function(X){Y.setTitle(X)};
this.setDemo=function(X){N.text(X)};this.show=function(X,Q){va.setSize(720,480);Y.setContentPaneCreator(function(){var G=new fb;G.setText(pa.get("briefScriptContent","\u811a\u672c"));var T=new fb;T.setText(pa.get("briefScriptDemo","\u8bed\u6cd5\u793a\u4f8b"));J=new ba;J.setText(X);N.css({"box-sizing":"border-box",padding:"4px",color:"#999","white-space":"pre-wrap","line-height":"20px",overflow:"auto"});N.addClass("sa-ctrl-common-border");var R=$("<div>");R.append(G.getJqUi());R.append(J.getJqUi());
R.append(T.getJqUi());R.append(N);ra.layoutCtrlWithLRTB(G.getJqUi(),0,0,null,0,null,23);ra.layoutCtrlWithLRTB(J.getJqUi(),0,0,null,25,180,null);ra.layoutCtrlWithLRTB(T.getJqUi(),0,0,null,null,142,23);ra.layoutCtrlWithLRTB(N,0,0,null,null,0,140);return R});Y.setClosingAction(function(G){G&&Q($.trim(J.getText()))});Y.setSelectable(!0);va.showDialog();J.requestFocus()}}function Ha(){function va(){q.call(this);var X=new l,Q=new l,G;this.setSelectableAndSelected=function(H,I){X.setItemModels(H);G=I;T()};
this.getSelecteds=function(){return G};this.protectedCreateLeftJqTitle=function(){var H=$("<div>");H.text(pa.get("briefFieldSelectable","\u53ef\u9009\u5b57\u6bb5"));return H};this.protectedCreateRightJqTitle=function(){var H=$("<div>");H.text(pa.get("briefFieldSelected","\u5df2\u9009\u5b57\u6bb5"));var I=new ta;I.setText("\u2191");I.addActionListener(S);var M=new ta;M.setText("\u2193");M.addActionListener(ca);var K=$("<div>");K.append(H);K.append(I.getJqUi());K.append(M.getJqUi());ra.layoutCtrlWithLRTB(H,
0,40,null,0,0,null);ra.layoutCtrlWithLRTB(I.getJqUi(),null,20,20,0,0,null);ra.layoutCtrlWithLRTB(M.getJqUi(),null,0,20,0,0,null);return K};this.protectedGetLeftCtrl=function(){return X};this.protectedGetRightCtrl=function(){return Q};this.protectedSelect=function(H){if(H)(H=R(X))?0<=G.indexOf(H)?(Q.setSelecteds([H]),N(pa.get("briefFieldPrompt2","\u201c\u5df2\u9009\u5b57\u6bb5\u201d\u4e2d\u5df2\u5b58\u5728#1\u3002").replace("#1",H))):3<=G.length?N(pa.get("briefFieldPrompt3","\u6700\u591a\u5141\u8bb8#1\u4e2a\u8f93\u51fa\u5b57\u6bb5\u3002").replace("#1",
3)):(G.push(H),T(H)):N(pa.get("briefFieldPrompt1","\u672a\u9009\u4e2d\u201c\u53ef\u9009\u5b57\u6bb5\u201d\u3002"));else if(H=R(Q)){var I=G.indexOf(H);G.splice(I,1);T(null);X.setSelecteds([H])}else N(pa.get("briefFieldPrompt4","\u672a\u9009\u4e2d\u201c\u5df2\u9009\u5b57\u6bb5\u201d\u3002"))};var T=function(H){Q.setItemModels(G);Q.setSelecteds(H?[H]:[])},R=function(H){H=H.getSelecteds();return 0<H.length?H[0]:null},S=function(H){if(H=R(Q)){var I=G.indexOf(H);0<I&&(G.splice(I,1),G.splice(I-1,0,H),T(H))}else N(pa.get("briefFieldPrompt4",
"\u672a\u9009\u4e2d\u201c\u5df2\u9009\u5b57\u6bb5\u201d\u3002"))},ca=function(H){if(H=R(Q)){var I=G.indexOf(H);I<G.length-1&&(G.splice(I,1),G.splice(I+1,0,H),T(H))}else N(pa.get("briefFieldPrompt4","\u672a\u9009\u4e2d\u201c\u5df2\u9009\u5b57\u6bb5\u201d\u3002"))}}Z.call(this);var Y=this,J=this.protectedMethod;this.show=function(X,Q,G){var T;Y.setSize(720,480);J.setTitle(pa.get("briefAttrCaptionTarget","\u8f93\u51fa\u5b57\u6bb5"));J.setContentPaneCreator(function(){T=new va;T.setSelectableAndSelected(X,
Q);return T.getJqUi()});J.setClosingAction(function(R){R&&G(T.getSelecteds())});Y.showDialog();T.relayout()};var N=function(X){J.getMessageCurtain().showPrompt(X)}}function Sa(){Z.call(this);var va=this,Y=this.protectedMethod;this.show=function(G,T){va.setSize(720,480);Y.setTitle(pa.get("briefPreviewTitle","\u9884\u89c8\u6267\u884c\u7ed3\u679c"));Y.setFooterPaneCreator(null);Y.setContentPaneCreator(function(){return J(G,T)});Y.setClosingAction(function(R){});Y.setSelectable(!0);va.showDialog()};var J=
function(G,T){var R=new ea;R.setText(pa.get("briefPreviewClose","\u5173\u95ed"));R.addActionListener(function(I){Y.destroy()});var S=new fb(pa.get("briefPreviewMatrix","\u5b9a\u4f4d\u540e\u7684\u6982\u8981\u8ba1\u7b97\u7ed3\u679c")),ca=new fb(pa.get("briefPreviewDisplay","\u663e\u793a\u6587\u5b57"));G=N(G,T);G=$(G.getUI());G.css({border:"1px solid #ddd"});var H=$("<div>");H.css({"box-sizing":"border-box",overflow:"auto","white-space":"pre-wrap","line-height":"20px",padding:"6px",border:"1px solid #ddd"});
H.text(Q(T));T=$("<div>");T.append(S.getJqUi());T.append(G);T.append(ca.getJqUi());T.append(H);T.append(R.getJqUi());ra.layoutCtrlWithLRTB(S.getJqUi(),0,0,null,0,null,20);ra.layoutCtrlWithLRTB(G,0,0,null,20,150,null);ra.layoutCtrlWithLRTB(ca.getJqUi(),0,0,null,null,120,20);ra.layoutCtrlWithLRTB(H,0,0,null,null,40,80);ra.layoutCtrlWithLRTB(R.getJqUi(),null,null,null,null,6,26);ra.layoutCtrlCenterAlign(R.getJqUi(),80);return T},N=function(G,T){var R=[],S=a.createTable();S.getCellRender().setOutsideVisible(!1);
S.addColumns(4);S.getColumn(0).setWidth(50);var ca=a.createHeadRow(S);R[1]=X(G,S,ca,1);R[2]=X(G,S,ca,2);R[3]=X(G,S,ca,3);G=new KTStyle;G.setTextAlign("right");for(var H=!1,I=0;I<T.getMatrixRowCount();I++)for(var M=a.createRow(S),K=0;4>K;K++){var ha=T.getMatrixCell(I,K),Aa=M.getCell(K);Aa.setValue(ha);R[K]||Aa.setStyle(G);0==K&&ha&&(H=!0)}H&&ca.getCell(0).setValue(pa.get("briefPreviewMatrixRanking","\u6392\u540d"));setTimeout(function(){a.refresh(S)},0);return S},X=function(G,T,R,S){T.getColumn(S).setWidth(188);
a:{T=G.getDimensionPickers();for(var ca=0;ca<T.length;ca++){var H=T[ca];if(H.isOutputTarget()&&H.getOutputTargetIndex()==S){G=H.getField();break a}}T=G.getMeasurePickers();for(ca=0;ca<T.length;ca++)if(H=T[ca],H.isOutputTarget()&&H.getOutputTargetIndex()==S){G=H.getField();break a}G=null}return G?(R.getCell(S).setValue(pa.get("briefPreviewMatrixColumn","\u5217")+S+G.getComplexText()),G.isDimension()):!0},Q=function(G){if(G.isError()){var T=G.getErrorMessage();T=T+"\r\nErrorCode: "+G.getErrorCode()}else T=
G.getDisplay();return T}}function da(){function va(H){KTDefaultCellRender.call(this,H);var I=[0,1,2,3,4],M=["",Jb.LOGIC_AND,Jb.LOGIC_OR],K=this,ha;this.setSelectableFieldItems=function(Bb){ha=Bb};var Aa=this.paintCellUI;this.paintCellUI=function(Bb,ya){if(K.getCurrentRowIdx()<a.getHeadRowCount())Aa(Bb,ya);else{var Oa=K.getCurrentRow();ya=K.getCellWidth();var Ra=K.getCellHeight();switch(K.getCurrentColIdx()){case 0:ya=Oa.getCell(0).getValue();Bb=$(Bb);Bb.empty();ya&&(Ra=u.createWarning(),Ra.attr("title",
ya),Ra.appendTo(Bb),ra.layoutCtrl(Ra,2,6));break;case 1:Oa=Oa.getCell(1);var Ca=Oa.getValue();Bb=a.createCtrlInCell(Bb,ya,Ra,ab);Bb.setUserObject(Oa);Bb.setSelected(Ca?Ca:0);Bb.setItemModels(I);Bb.setCustomPainter(ec);Bb.addSelectedChangedListener(db);break;case 5:Oa=Oa.getCell(5);Ca=Oa.getValue();Bb=a.createCtrlInCell(Bb,ya,Ra,ab);Bb.setUserObject(Oa);Bb.setSelected(Ca?Ca:0);Bb.setItemModels(I);Bb.setCustomPainter(kc);Bb.addSelectedChangedListener(db);break;case 6:Oa=Oa.getCell(6);Ca=Oa.getValue();
Bb=a.createCtrlInCell(Bb,ya,Ra,ab);Bb.setUserObject(Oa);Bb.setSelected(Ca?Ca:"");Bb.setItemModels(M);Bb.setCustomPainter(Pb);Bb.addSelectedChangedListener(db);break;case 2:Ca=Oa.getCell(2).getValue();ya=a.createCtrlInCell(Bb,ya,Ra,ab);ya.setUserObject(Oa);ya.setSelected(Ca);ya.setItemModels(ha);ya.addSelectedChangedListener(jb);$(Bb).attr("title",Ca?Ca.getDisplayText():"");break;case 3:var Pa=Oa.getCell(2).getValue();Ca=Oa.getCell(3).getValue();Ca=S(Ca);Pa=Pa?ac(Pa):[];Bb=a.createCtrlInCell(Bb,ya,
Ra,ab);Bb.setUserObject(Oa);Bb.setSelected(Ca);Bb.setItemModels(Pa);Bb.setCustomPainter(Qb);Bb.addSelectedChangedListener(Na);break;case 4:Ta(Bb,Oa,ya,Ra)}}};var Ta=function(Bb,ya,Oa,Ra){var Ca=$(Bb);Ca.empty();var Pa=ya.getCell(3).getValue(),gb=ya.getCell(4).getValue();switch(S(Pa)){case bb.CONDITION_CUSTOM:Ra=a.createCtrlInCell(Bb,Oa,Ra,ob);Ra.addActionListener(function(pb){Ub(pb,ya)});Ra.setModel(gb);break;case bb.OP_EQUAL:case bb.OP_NOT_EQUAL:case bb.OP_GREATER:case bb.OP_GREATER_EQUAL:case bb.OP_LESS:case bb.OP_LESS_EQUAL:ca(Pa)?
(Ca=null,gb&&(gb=parseInt(gb),isNaN(gb)||(Ca=new Date(gb))),Ra=a.createCtrlInCell(Bb,Oa,Ra,aa),Ra.setUserObject(ya),Ra.setSelectedNullable(!0),Ra.setDateObject(Ca),Ra.addModelChangedListener(xb)):(Bb=$("<div>"),Bb.text(gb),Bb.css({"line-height":Ra+"px",cursor:"pointer"}),Bb.appendTo(Ca),ra.layoutCtrlWithLRTB(Bb,4,4,null,1,1,null))}},db=function(Bb,ya,Oa){Bb.getUserObject().setValue(Oa);X();Y.fireEditingEvent()},jb=function(Bb,ya,Oa){ya=Bb.getUserObject();var Ra=ya.getCell(2);Bb=ya.getCell(3);ya=ya.getCell(4);
Ra.setValue(Oa);Ra=Bb.getValue();var Ca;if(Ca=Ra)Ca=ac(Oa),Ca=da.isOperationFit(Ra,Ca);Ca?(Ra.setField(Oa.getAnalyticalField()),Bb.setValue(Ra)):(Bb.setValue(null),ya.setValue(null));X();Y.fireEditingEvent()},Na=function(Bb,ya,Oa){var Ra=Bb.getUserObject();Bb=Ra.getCell(3);ya=Bb.getValue();var Ca;if(Ca=ya){var Pa=ya;Pa.getType()==bb.CONDITION_NORMAL?(Ca=bc(Oa),Pa=bc(Pa.getOperation()),Ca=Ca==Pa):Ca=!1}if(Ca)ya.setOperation(Oa);else{if(Oa==bb.CONDITION_CUSTOM)ya=bb.createCondition(bb.CONDITION_CUSTOM);
else if(Oa)ya=bb.createCondition(bb.CONDITION_NORMAL),ya.setOperation(Oa);else throw Error("Impossible");Oa=Ra.getCell(2);Ra=Ra.getCell(4);Oa=Oa.getValue().getAnalyticalField();ya.setField(Oa);Bb.setValue(ya);Ra.setValue(null)}X();Y.fireEditingEvent()},xb=function(Bb){var ya=Bb.getDateObject();ya=ya?ya.getTime():null;var Oa=Bb.getUserObject();Bb=Oa.getCell(3);Oa=Oa.getCell(4);Bb.getValue().setComparing(ya);Oa.setValue(ya);X();Y.fireEditingEvent()},Ub=function(Bb,ya){var Oa=new ka;Oa.setTitle(pa.get("warningRuleFilterCustomScript",
"\u81ea\u5b9a\u4e49\u811a\u672c"));Oa.setDemo(Y.getFilterScriptDemo());Oa.show(Bb.getModel(),function(Ra){Ra=$.trim(Ra);Bb.setModel(Ra);ya.getCell(4).setValue(Ra);ya.getCell(3).getValue().setScript(Ra);X();Y.fireEditingEvent()})},ec=function(Bb,ya,Oa){for(var Ra="",Ca=0;Ca<Oa;Ca++)Ra+="(";ya.text(Ra);Bb&&ya.css("padding-left","8px")},kc=function(Bb,ya,Oa){for(var Ra="",Ca=0;Ca<Oa;Ca++)Ra+=")";ya.text(Ra);Bb&&ya.css("padding-left","8px")},Pb=function(Bb,ya,Oa){Bb=Oa==Jb.LOGIC_AND?pa.get("warningRuleLogicAnd",
"\u5e76\u4e14"):Oa==Jb.LOGIC_OR?pa.get("warningRuleLogicOr","\u6216"):"";ya.text(Bb)},Qb=function(Bb,ya,Oa){ya.text(da.operationToString(Oa))},ac=function(Bb){var ya=Bb.isDimension();Bb=Bb.getDataType();return da.createSelectableOperations(ya,Bb)},bc=function(Bb){return Bb==bb.OP_EQUAL||Bb==bb.OP_NOT_EQUAL||Bb==bb.OP_GREATER||Bb==bb.OP_GREATER_EQUAL||Bb==bb.OP_LESS||Bb==bb.OP_LESS_EQUAL?1:0}}Ja.call(this);var Y=this.protectedMethod,J,N;this.protectedModel2Ui=function(H,I){H=H.getBriefOutputableFieldsModel();
var M=[],K=[];Y.searchAllFieldItems(H,M,K);H=M.concat(K);J.getCellRender().setSelectableFieldItems(H);I=I.getConditionItems();a.clearWithoutHead(J);for(M=0;M<I.length;M++){var ha=I[M];K=ha.getCondition();var Aa=a.createRow(J);Aa.setHeight(26);Aa.getCell(1).setValue(ha.getLeftBrackets());Aa.getCell(5).setValue(ha.getRightBrackets());Aa.getCell(6).setValue(ha.getLogic());if(K){ha=null;for(var Ta=K.getField(),db=0;db<H.length;db++){var jb=H[db];if(Ta==jb.getAnalyticalField()){ha=jb;break}}Aa.getCell(2).setValue(ha);
Aa.getCell(3).setValue(K);Aa=Aa.getCell(4);switch(K.getType()){case bb.CONDITION_NORMAL:Aa.setValue(K.getComparing());break;case bb.CONDITION_CUSTOM:Aa.setValue(K.getScript());break;default:throw Error("Unknown");}}}R(Math.max(6,I.length+2)-I.length);X()};this.protectedUi2Model=function(H){for(var I=[],M=a.getHeadRowCount(J);M<J.getRowsCount();M++){var K=J.getRow(M),ha=K.getCell(3).getValue();if(ha){var Aa=K.getCell(6).getValue(),Ta=K.getCell(1).getValue();K=K.getCell(5).getValue();Ta=Ta?Ta:0;K=K?
K:0;var db=new Jb;db.setLeftBrackets(Ta);db.setRightBrackets(K);M<J.getRowsCount()-1&&db.setLogic(Aa);db.setCondition(ha);I.push(db)}}for(M=0;M<I.length;M++)db=I[M],M==I.length-1?db.setLogic(null):db.getLogic()||db.setLogic(Jb.LOGIC_AND);H.setConditionItems(I)};this.protectedCustomDisplay=function(H){H&&a.refresh(J)};this.protectedInitUi=function(H,I,M,K,ha){H=new fb(pa.get("briefAttrCaptionName","\u540d\u79f0"));var Aa=new fb(pa.get("briefAttrCaptionDescription","\u7b80\u8981\u63cf\u8ff0")),Ta=new fb(pa.get("warningRuleAttrCaptionFilter",
"\u9884\u8b66\u6761\u4ef6")),db=new fb(pa.get("warningRuleAttrCaptionPostscript","\u540e\u5904\u7406\u811a\u672c"));J=a.createTable();J.setDraggableAdjusting(!1);J.setSyncUIWhenModelChanged(!1);J.setCellRender(new va(J));J.getCellRender().setOutsideVisible(!1);a.bindTextEditor(J,Q,G);a.bindTableListenerForCtrl(J,T);J.addColumns(8);J.getColumn(0).setWidth(20);J.getColumn(1).setWidth(56);J.getColumn(2).setWidth(150);J.getColumn(3).setWidth(80);J.getColumn(4).setWidth(180);J.getColumn(5).setWidth(56);
J.getColumn(6).setWidth(60);J.getColumn(7).setWidth(100);var jb=a.createHeadRow(J);jb.setHeight(18);jb.getCell(1).setValue(pa.get("warningRuleFilterLeftBracket","\u5de6\u62ec\u53f7"));jb.getCell(2).setValue(pa.get("warningRuleFilterField","\u5b57\u6bb5"));jb.getCell(3).setValue(pa.get("warningRuleFilterOperation","\u6bd4\u8f83"));jb.getCell(4).setValue(pa.get("warningRuleFilterComparing","\u503c"));jb.getCell(5).setValue(pa.get("warningRuleFilterRightBracket","\u53f3\u62ec\u53f7"));jb.getCell(6).setValue(pa.get("warningRuleFilterLogic",
"\u903b\u8f91"));jb=$(J.getUI());jb.addClass("sa-ctrl-common-border");Y.layoutCtrl(H,0,0,null,0,null,23);Y.layoutCtrl(I,0,0,null,25,null,23);Y.layoutCtrl(Aa,0,0,null,55,null,23);Y.layoutCtrl(M,0,0,null,80,null,50);Y.layoutCtrl(Ta,0,0,null,140,null,20);Y.layoutJqCtrl(jb,0,0,null,165,60,null);Y.layoutCtrl(db,0,300,null,null,25,20);Y.layoutCtrl(K,0,300,null,null,1,23);Y.layoutCtrl(ha,null,0,250,null,0,40)};this.protectedInitPostScript=function(H){var I="",M=function(ha,Aa){I&&(I+="\r\n");I+=ha;Aa&&(I+=
"    ",I+=Aa)};M("rowsCount() > 3",pa.get("warningRulePostScriptDemo1","\u7b26\u5408\u9884\u8b66\u6761\u4ef6\u7684\u8ba1\u7b97\u7ed3\u679c\u8d85\u8fc73\u884c\u3002"));var K=pa.get("warningRulePostScriptDemo2","\u6ce8\uff1a\u51fd\u6570#1\uff0c\u53ef\u4ee5\u83b7\u5f97\u7b26\u5408\u9884\u8b66\u6761\u4ef6\u7684\u8ba1\u7b97\u7ed3\u679c\u884c\u6570\u3002\u672a\u4f7f\u7528\u540e\u5904\u7406\u811a\u672c\u65f6\uff0c\u76f8\u5f53\u4e8e#2\u3002");K=K.replace("#1","rowsCount()").replace("#2","rowsCount() > 0");
M(K);H.addActionListener(function(ha){var Aa=new ka;Aa.setTitle(pa.get("warningRuleAttrCaptionPostscript","\u540e\u5904\u7406\u811a\u672c"));Aa.setDemo(I);Aa.show(ha.getModel(),function(Ta){Ta=$.trim(Ta);ha.setModel(Ta);Y.fireEditingEvent()})})};var X=function(){for(var H=a.getHeadRowCount(J),I=H;I<J.getRowsCount();I++)J.getRow(I).getCell(0).setValue("");var M=null,K=0;for(I=H;I<J.getRowsCount()&&!M;I++){var ha=J.getRow(I);var Aa=ha.getCell(3).getValue(),Ta=ha.getCell(2).getValue(),db=ha.getCell(6).getValue(),
jb=ha.getCell(1).getValue(),Na=ha.getCell(5).getValue();jb=jb?jb:0;Na=Na?Na:0;if(Aa)Aa.getEditingAlarm()?M=Aa.getEditingAlarm():Aa.isValid()?(K+=jb,K-=Na,0>K&&(M=pa.get("warningRulePrompt1","\u5de6\u53f3\u62ec\u53f7\u4e0d\u5339\u914d"))):M=pa.get("warningRulePrompt2","\u6761\u4ef6\u4e0d\u5b8c\u6574");else if(Ta||jb||Na||db)M=pa.get("warningRulePrompt2","\u6761\u4ef6\u4e0d\u5b8c\u6574")}M?ha.getCell(0).setValue(M):0<K&&J.getRow(H).getCell(0).setValue(pa.get("warningRulePrompt1","\u5de6\u53f3\u62ec\u53f7\u4e0d\u5339\u914d"));
a.refresh(J)},Q=function(H,I){return 4!=I||(H=J.getRow(H).getCell(3).getValue(),ca(H))?!1:(H=S(H),H==bb.OP_EQUAL||H==bb.OP_NOT_EQUAL||H==bb.OP_GREATER||H==bb.OP_GREATER_EQUAL||H==bb.OP_LESS||H==bb.OP_LESS_EQUAL)},G=function(H,I,M,K,ha){H=H.getCell(3).getValue();H.getComparing()!=K&&(H.setComparing(K),M.setValue(K),X());return!0},T=function(H,I,M,K){H=null;I?(H=J.searchJqCell(M,7),I=new ta(pa.get("warningRuleFilterRowAdd","\u63d2\u5165")),I.getJqUi().appendTo(H),I.addActionListener(function(ha){ha=
M==J.getRowsCount()-1;var Aa=J.getRow(M).getStyle(),Ta=J.insertRow(M);Ta.setHeight(26);Ta.setStyle(Aa);for(Ta=J.getRowsCount()-1;Ta>M+1;Ta--)Aa=J.getRow(Ta-1).getStyle(),J.getRow(Ta).setStyle(Aa);Aa=M==a.getHeadRowCount()?3:-1;Aa=J.getRow(M+Aa).getStyle();J.getRow(M+1).setStyle(Aa);ha&&R(2);a.refresh(J);Y.fireEditingEvent()}),K=new ta(pa.get("warningRuleFilterRowDelete","\u5220\u9664")),K.getJqUi().appendTo(H),K.addActionListener(function(ha){for(ha=J.getRowsCount()-1;ha>M;ha--){var Aa=J.getRow(ha-
1).getStyle();J.getRow(ha).setStyle(Aa)}J.removeRow(M);5>J.getRowsCount()-a.getHeadRowCount(J)&&R(1);X();Y.fireEditingEvent()}),ra.layoutCtrlWithLRTB(I.getJqUi(),0,null,50,2,2,null),ra.layoutCtrlWithLRTB(K.getJqUi(),50,null,50,2,2,null)):N&&N.empty();N=H},R=function(H){for(var I=0;I<H;I++)a.createRow(J).setHeight(26)},S=function(H){if(H)switch(H.getType()){case bb.CONDITION_NORMAL:return H.getOperation();case bb.CONDITION_CUSTOM:return bb.CONDITION_CUSTOM;default:throw Error("Unknown");}return null},
ca=function(H){return H?(H=H.getField(),(H?H.getMetaField().getDataType():null)==U.DT_DATE):!1}}function qa(){Z.call(this);var va=this,Y=this.protectedMethod;this.show=function(G,T){va.setSize(920,480);Y.setTitle(pa.get("briefPreviewTitle","\u9884\u89c8\u6267\u884c\u7ed3\u679c"));Y.setFooterPaneCreator(null);Y.setContentPaneCreator(function(){return J(G,T)});Y.setClosingAction(function(R){});Y.setSelectable(!0);va.showDialog()};var J=function(G,T){var R=new ea;R.setText(pa.get("briefPreviewClose",
"\u5173\u95ed"));R.addActionListener(function(I){Y.destroy()});var S=N(T),ca=new fb(pa.get("warningRulePreviewResult","\u5224\u65ad\u7ed3\u679c"));G=X(G,T);G=$(G.getUI());G.css({border:"1px solid #ddd"});var H=$("<div>");H.css({"box-sizing":"border-box",overflow:"auto","white-space":"pre-wrap","line-height":"20px",padding:"6px",border:"1px solid #ddd"});H.text(Q(T));T=$("<div>");T.append(S.getJqUi());T.append(G);T.append(ca.getJqUi());T.append(H);T.append(R.getJqUi());ra.layoutCtrlWithLRTB(S.getJqUi(),
0,0,null,0,null,20);ra.layoutCtrlWithLRTB(G,0,0,null,20,150,null);ra.layoutCtrlWithLRTB(ca.getJqUi(),0,0,null,null,120,20);ra.layoutCtrlWithLRTB(H,0,0,null,null,40,80);ra.layoutCtrlWithLRTB(R.getJqUi(),null,null,null,null,6,26);ra.layoutCtrlCenterAlign(R.getJqUi(),80);return T},N=function(G){var T=G.getMatrixRowCount(),R=G.getFilteredRows();G=pa.get("warningRulePreviewMatrix1","\u7b26\u5408\u9884\u8b66\u6761\u4ef6\u7684\u8ba1\u7b97\u7ed3\u679c\u5171#1\u884c").replace("#1",R);R>T&&(T=pa.get("warningRulePreviewMatrix2",
"\u4ec5\u663e\u793a\u524d#1\u884c").replace("#1",T),G=G+"("+T+")");return new fb(G)},X=function(G,T){G=G.getBriefOutputableFieldsModel().getDimensionFields().length;var R=T.getMatrixRowCount(),S=T.getMatrixColumnCount(),ca=new KTStyle;ca.setTextAlign("right");var H=a.createTable();H.getCellRender().setOutsideVisible(!1);H.addColumns(T.getMatrixColumnCount());for(var I=a.createHeadRow(H),M=0;M<S;M++){var K=T.getMatrixColumn(M);H.getColumn(M).setWidth(120);I.getCell(M).setValue(K)}for(I=0;I<R;I++)for(K=
a.createRow(H),M=0;M<S;M++){var ha=T.getMatrixCell(I,M),Aa=K.getCell(M);Aa.setValue(ha);M>=G&&Aa.setStyle(ca)}setTimeout(function(){a.refresh(H)},0);return H},Q=function(G){if(G.isError()){var T=G.getErrorMessage();T=T+"\r\nErrorCode: "+G.getErrorCode()}else T=G.isMatched()?pa.get("warningRulePreviewResultTrue","\u662f"):pa.get("warningRulePreviewResultFalse","\u5426");return T}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&
(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.core&&(com.kingdee.bos.qing.core={});"undefined"==typeof com.kingdee.bos.qing.core.ui&&(com.kingdee.bos.qing.core.ui={});var Ga=com.kingdee.bos.qing.core.ui;Ga.FormulaEditor=function(){function va(H){d.FieldsProvider.call(this);var I=this.protectedMethod;(function(){H.setMultiSelectable(!1);H.addDoubleClickListener(function(){var M=H.getSelectedMetaFields();0<M.length&&
(M="["+M[0].getFullDisplayName()+"]",I.fireChoosingEvent(M))});H.getJqUi().addClass("sa-common-border")})();this.getJqUi=function(){return H.getJqUi()}}Z.call(this);var Y=this,J=this.protectedMethod,N=new d,X,Q,G;(function(){Y.setSize(762,594);J.setMinSize(762,540);J.setSelectable(!0);J.setContentPaneCreator(function(){return N.getJqUi()});J.setClosingChecker(function(){return N.isValidToAccepted()});J.setClosingAction(function(H){H&&(N.acceptEditing(),G.setDisplayName(N.getEditedDisplayName()),G.setFormula(N.getEditedExecutableFormula()),
X())});N.setDuplicatedNameChecker(function(H,I){a:{for(var M=G.getTable(),K=M.getFieldCount()-1;0<=K;K--){var ha=M.getField(K);if(H!=ha.getPureName()&&I==ha.getDisplayName()){H=!0;break a}}H=!1}return H});N.setDisplayNameTranslator(function(H,I){return I?S(H):R(H)});N.setFunctionsProviderCreator(function(H){return H.getInstanceForCore()})})();this.setContext=function(H,I,M,K){Q=I;G=M;I=M.getPureName();var ha=K?M.getDisplayName():"";M=M.getFormula();N.setEditingTarget(I,ha,M);N.setFieldsProvider(new va(H));
H=K?pa.get("editCalculatedField","\u7f16\u8f91\u8ba1\u7b97\u5b57\u6bb5"):pa.get("createCalculatedField","\u521b\u5efa\u8ba1\u7b97\u5b57\u6bb5");J.setTitle(H)};this.setSyntaxValidator=function(H){N.setSyntaxValidator(H)};this.setAcceptedListener=function(H){X=H};var T=this.showDialog;this.showDialog=function(){T();N.prepareToStart()};var R=function(H){return ca(H,function(I){return I.getFullDisplayName()},function(I){return I.getFullName()})},S=function(H){return ca(H,function(I){return I.getFullName()},
function(I){return I.getFullDisplayName()})},ca=function(H,I,M){for(var K={},ha=Q.getTableCount()-1;0<=ha;ha--)for(var Aa=Q.getTable(ha),Ta=Aa.getFieldCount()-1;0<=Ta;Ta--){var db=Aa.getField(Ta),jb="["+I(db)+"]";db="["+M(db)+"]";if(jb!=db)for(var Na=null;-1!=H.indexOf(jb);)Na||(Na="["+cb.createUUID()+"]",K[Na]=db),H=H.replace(jb,Na)}for(Na in K)for(db=K[Na];-1!=H.indexOf(Na);)H=H.replace(Na,db);return H}};Ga.NumberFormatSettingForMeta=function(){Z.call(this);var va=this,Y=this.protectedMethod,J=
new Mb,N,X,Q;(function(){va.setSize(450,300);Y.setContentPaneCreator(function(){return J.getJqUi()});Y.setClosingChecker(function(){return J.isValidToAccepted()});Y.setClosingAction(function(R){if(R){Q.compositeStart(T());var S=J.getModelPair();R=S[0];S=S[1];for(var ca=0;ca<X.length;ca++){var H=X[ca],I=H[0];H=H[1];R?(I.accept(R),I=I.encode()):I=S==b.UNSURE?H:S;H=N[ca];var M=new nb;M.setMethod(H.getFormatString,H.setFormatString);M.setValue(I);Q.perform(M)}Q.compositeEnd()}})})();this.setCommandManager=
function(R){Q=R};var G=this.showDialog;this.showDialog=function(R){G();N=R;Y.setTitle(T());X=[];R=!1;for(var S=0;S<N.length;S++){var ca=N[S].getFormatString();!ca&&(ca=(new b).encode());var H=new b;H.decode(ca);if(R||H.encode()!=ca)if(R=!0,I)I!=ca&&(I=b.UNSURE);else var I=ca;else if(M)M.merge(H);else{var M=new b;M.decode(ca)}X[S]=[H,ca]}M=R?[null,I]:[M?M:new b,null];J.setModelPair(M)};var T=function(){var R=pa.get("setDefaultDataFormat","\u8bbe\u7f6e#1\u7684\u9ed8\u8ba4\u6570\u5b57\u683c\u5f0f");
var S=1==N.length?N[0].getComplexText():pa.get("selectedFields","\u591a\u4e2a\u9009\u4e2d\u5b57\u6bb5");return R=R.replace("#1",S)}};Ga.NumberFormatSetting=function(va){var Y=this,J=new Ab(va),N,X,Q,G=!1,T;this.showDialog=function(){if(!X){X=new Mb;X.setDirtyListener(M);Q&&S();var K=$("<div>");K.append(X.getJqUi());ra.layoutCtrlWithLRTB(X.getJqUi(),0,0,null,0,8,null);var ha=va.innerWidth()-450>>1,Aa=va.innerHeight()-288>>1;J.setBounds(ha,Aa,450,288);J.setContent(K);J.createToolbarButton(pa.get("reset",
"\u91cd\u7f6e"),ca);N=J.createToolbarButton(pa.get("apply","\u5e94\u7528"),H,!0)}J.show()};this.hideDialog=function(){Q&&Q.removePropertyChangeListener(I);J.hide()};this.isVisible=function(){return J.isVisible()};this.setCommandManager=function(K){T=K};this.setModel=function(K){Q&&Q.removePropertyChangeListener(I);Q=K;Q.addPropertyChangeListener(I);J.setTitle(R());J.isVisible()&&S()};this.getModel=function(){return Q};this.acceptEditing=function(){if(X.isDirty()&&X.isValidToAccepted()){var K=X.getModelPair(),
ha=K[0];K=K[1];ha=ha?ha.encode():K;G=!0;K=new nb;K.setCaption(R());K.setMethod(Q.getNumberFormat,Q.setNumberFormat);K.setValue(ha);T.perform(K);G=!1;X.clearDirtyState()}};var R=function(K){K=K?pa.get("clearDataFormat","\u6e05\u9664#1\u6570\u5b57\u683c\u5f0f"):pa.get("setDataFormat","\u8bbe\u7f6e#1\u6570\u5b57\u683c\u5f0f");return K=K.replace("#1",Q.getComplexText())},S=function(){var K=Q.getNumberFormat(),ha=new b;ha.decode(K);K=ha.encode()==K?[ha,null]:[null,K];X.setModelPair(K);X.clearDirtyState()},
ca=function(){G=!0;var K=new nb;K.setCaption(R(!0));K.setMethod(Q.getNumberFormat,Q.setNumberFormat);K.setValue(null);T.perform(K);S();G=!1},H=function(){Y.acceptEditing()},I=function(K,ha){ha!=fa.KEY_NUMBERFORMAT||G||S()},M=function(K){var ha=N.find(".sa-formatsetting-dirtymark");0==ha.length&&(ha=$("<div>"),ha.text("*"),ha.addClass("sa-formatsetting-dirtymark"),ha.appendTo(N));ha.css("display",K?"block":"none")}};Ga.DateFormatSetting=function(){Z.call(this);var va=this,Y=this.protectedMethod,J,
N,X,Q,G;this.setCommandManager=function(I){J=I};var T=this.showDialog;this.showDialog=function(I){va.setSize(450,300);Y.setTitle(S(I));Y.setContentPaneCreator(function(){return R(I)});Y.setClosingAction(function(M){if(M){M=X.isChecked()?$.trim(Q.getText()):null;var K=new nb;K.setCaption(S(I));K.setMethod(I.getDateFormat,I.setDateFormat);K.setValue(M);J.perform(K)}});T()};var R=function(I){N=new Va;N.setText(pa.get("dateFormatDefault","\u7cfb\u7edf\u9ed8\u8ba4"));X=new Va;X.setText(pa.get("dateFormatCustom",
"\u81ea\u5b9a\u4e49"));var M=new Ka;M.addElement(N);M.addElement(X);M.addChangedListener(function(K){Q.setEnabled(X.isChecked());H()});Q=new kb;Q.addEditedListener(function(K){H()});G=new fb;(M=I.getDateFormat())?(X.setChecked(!0),Q.setText(M)):(N.setChecked(!0),Q.setText(ca(I.getPartValue())));Q.setEnabled(X.isChecked());H();I=$("<div>");I.append(N.getJqUi());I.append(X.getJqUi());I.append(Q.getJqUi());I.append(G.getJqUi());ra.layoutCtrlWithLRTB(N.getJqUi(),0,null,100,10,null,23);ra.layoutCtrlWithLRTB(X.getJqUi(),
0,null,100,45,null,23);ra.layoutCtrlWithLRTB(Q.getJqUi(),100,20,null,45,null,23);ra.layoutCtrlWithLRTB(G.getJqUi(),100,20,null,70,null,23);return I},S=function(I){var M=pa.get("dateFormatTitle","\u8bbe\u7f6e#1\u6570\u5b57\u683c\u5f0f");return M=M.replace("#1",I.getComplexText())},ca=function(I){switch(I){case fa.PARTVALUE_DATE_YEAR:return"yyyy";case fa.PARTVALUE_DATE_QUARTER:return"'Q'q";case fa.PARTVALUE_DATE_MONTH:return"MMM";case fa.PARTVALUE_DATE_DAY:return"d";case fa.PARTVALUE_DATE_YQ:return"yyyy-'Q'q";
case fa.PARTVALUE_DATE_YM:return"yyyy-MM";default:return"yyyy-MM-dd"}},H=function(){var I=X.isChecked()?$.trim(Q.getText()):null,M="";if(I){var K=new hb;K.setFormatString(I);M=pa.get("dateFormatPreview","\u9884\u89c8\uff1a");M+=K.format(new Date)}G.setText(M)}};Ga.FiscalYearStartSelector=function(){Z.call(this);var va=this,Y=this.protectedMethod,J,N,X,Q;(function(){va.setSize(386,270);Y.setContentPaneCreator(function(){return J});Y.setClosingAction(function(R){if(R&&0!=X){Q.compositeStart(G());for(R=
0;R<N.length;R++){var S=N[R],ca=new nb;ca.setMethod(S.getFiscalYearStart,S.setFiscalYearStart);ca.setValue(X);Q.perform(ca)}Q.compositeEnd()}})})();this.setCommandManager=function(R){Q=R};this.setTargetMetaFields=function(R){N=R;Y.setTitle(G());for(var S=R=0;S<N.length;S++){var ca=N[S].getFiscalYearStart();ca=ca?ca:0;if(0==S)R=ca;else if(R!=ca){R=0;break}}R=X=R;S=$("<div>");ca=new fb(pa.get("fiscalYearFromMonth","\u4f1a\u8ba1\u5e74\u5ea6\u4ece\u51e0\u6708\u4efd\u5f00\u59cb\uff1f"));Y.layoutCtrl(S,
ca.getJqUi(),0,0,300,23);ca=[pa.get("January","\u4e00\u6708"),pa.get("February","\u4e8c\u6708"),pa.get("March","\u4e09\u6708"),pa.get("April","\u56db\u6708"),pa.get("May","\u4e94\u6708"),pa.get("June","\u516d\u6708"),pa.get("July","\u4e03\u6708"),pa.get("August","\u516b\u6708"),pa.get("September","\u4e5d\u6708"),pa.get("October","\u5341\u6708"),pa.get("November","\u5341\u4e00\u6708"),pa.get("December","\u5341\u4e8c\u6708")];var H=new Ka;H.addChangedListener(T);for(var I=0;12>I;I++){var M=I+1,K=ca[I],
ha=new Va;ha.setText(K);ha.setUserObject(M);H.addElement(ha);K=I%3*118;var Aa=30*Math.floor(I/3)+27;Y.layoutCtrl(S,ha.getJqUi(),K,Aa,118,23);R==M&&ha.setChecked(!0)}J=S};var G=function(){var R=pa.get("setFiscalYear","\u8bbe\u7f6e#1\u7684\u4f1a\u8ba1\u5e74\u5ea6");var S=1==N.length?N[0].getComplexText():pa.get("selectedFields","\u591a\u4e2a\u9009\u4e2d\u5b57\u6bb5");return R=R.replace("#1",S)},T=function(R){X=R.getUserObject()}};Ga.SortAccordingSelector=function(){Z.call(this);var va=this,Y=this.protectedMethod,
J,N,X;(function(){va.setSize(640,480);Y.setMaxSize(800,600);Y.setTitle(pa.get("sortAccording","\u6392\u5e8f\u4f9d\u636e"));Y.setContentPaneCreator(function(){return X.getJqUi()});Y.setClosingChecker(function(){var T;if(T=X.check()){var R=new Wa;R.setOptionType(Wa.OPTION_OK);R.setTitle(pa.get("sortAccording","\u6392\u5e8f\u4f9d\u636e"));R.setMessage(T);R.showDialog();T=!1}else T=!0;return T});Y.setClosingAction(function(T){if(T&&(T=X.acceptEditing(),0<T.length)){N.compositeStart(pa.get("sortAccordingModified",
"\u4fee\u6539\u6392\u5e8f\u4f9d\u636e"));for(var R=0;R<T.length;R++){var S=T[R],ca=S[0],H=S[1];S=S[2];var I=new wb;I.setValue(ca,H,S);N.perform(I)}N.compositeEnd()}})})();this.setCommandManager=function(T){N=T};this.setMeta=function(T,R,S){J=T;Q(R,S)};var Q=function(T,R){X=new ub;X.setContext(J,{createMetaList:function(){return T()},createFacade:function(S,ca){return R(S,ca)},showWarning:G})},G=function(T){Y.getMessageCurtain().showPrompt(T)}};Ga.NumberFilterAggregationSelector=function(){Z.call(this);
var va=this,Y=this.protectedMethod,J,N,X;(function(){Y.setContentPaneCreator(function(){return G()});Y.setClosingAction(function(S){X(S,S?N:void 0)})})();var Q=this.showDialog;this.showDialog=function(S,ca,H){J=ca;X=H;ca=S.outerWidth()+2;var I=0;I+260>S.outerHeight()&&(I=S.outerHeight()-260);H=$(document.body);I=[ca,I];I=ra.upwardCoordinate(S[0],I,H[0]);ca=I[0];I=I[1];va.setPosition(ca,I);va.setSize(360,260);Y.setTitle(pa.get("dataFilter","\u6570\u636e\u7b5b\u9009"));Q()};var G=function(){var S=$("<div>"),
ca=function(xb,Ub,ec,kc,Pb){Y.layoutCtrl(S,xb.getJqUi(),Ub,ec,kc,Pb)},H=new Ka,I=new fb(pa.get("whatValueToFilter","\u5bf9#1\u7684\u4ec0\u4e48\u503c\u8fdb\u884c\u7b5b\u9009?").replace("#1",J)),M=T(H,pa.get("originalValue","\u539f\u59cb\u503c"),null),K=T(H,pa.get("sumValue","\u6c42\u548c\u503c"),fa.AGGREGATION_SUM),ha=T(H,pa.get("avgValue","\u5e73\u5747\u503c"),fa.AGGREGATION_AVG),Aa=T(H,pa.get("medianValue","\u4e2d\u4f4d\u6570"),fa.AGGREGATION_MEDIAN),Ta=T(H,pa.get("count","\u8ba1\u6570"),fa.AGGREGATION_COUNT),
db=T(H,pa.get("countDistinct","\u53bb\u91cd\u8ba1\u6570"),fa.AGGREGATION_CNTD),jb=T(H,pa.get("maxValue","\u6700\u5927\u503c"),fa.AGGREGATION_MAX),Na=T(H,pa.get("minValue","\u6700\u5c0f\u503c"),fa.AGGREGATION_MIN);ca(I,0,0,300,23);ca(M,0,27,100,23);ca(K,0,54,80,23);ca(ha,100,54,80,23);ca(Aa,200,54,80,23);ca(jb,0,81,80,23);ca(Na,100,81,80,23);ca(Ta,0,108,80,23);ca(db,100,108,80,23);H.addChangedListener(R);M.setChecked(!0);return S},T=function(S,ca,H){var I=new Va;I.setText(ca);I.setUserObject(H);S.addElement(I);
return I},R=function(S){N=S.getUserObject()}};Ga.DateFilterPartValueSelector=function(){Z.call(this);var va=this,Y=this.protectedMethod,J,N,X;(function(){Y.setContentPaneCreator(function(){return G()});Y.setClosingAction(function(S){X(S,S?N:void 0)})})();var Q=this.showDialog;this.showDialog=function(S,ca,H){J=ca;X=H;ca=S.outerWidth()+2;var I=0;I+260>S.outerHeight()&&(I=S.outerHeight()-260);H=$(document.body);I=[ca,I];I=ra.upwardCoordinate(S[0],I,H[0]);ca=I[0];I=I[1];va.setPosition(ca,I);va.setSize(360,
260);Y.setTitle(pa.get("dataFilter","\u6570\u636e\u7b5b\u9009"));Q()};var G=function(){var S=$("<div>"),ca=function(Ub,ec,kc,Pb,Qb){Y.layoutCtrl(S,Ub.getJqUi(),ec,kc,Pb,Qb)},H=new Ka,I=new fb(pa.get("whatValueToFilter","\u5bf9#1\u7684\u4ec0\u4e48\u503c\u8fdb\u884c\u7b5b\u9009?").replace("#1",J)),M=T(H,pa.get("dateRange","\u65e5\u671f\u8303\u56f4"),fa.PARTVALUE_DATE_EXACT),K=T(H,pa.get("year","\u5e74"),fa.PARTVALUE_DATE_YEAR),ha=T(H,pa.get("quarter","\u5b63\u5ea6"),fa.PARTVALUE_DATE_QUARTER),Aa=T(H,
pa.get("month","\u6708"),fa.PARTVALUE_DATE_MONTH),Ta=T(H,pa.get("day","\u65e5"),fa.PARTVALUE_DATE_DAY),db=T(H,pa.get("yearQuarter","\u5e74\u5b63"),fa.PARTVALUE_DATE_YQ),jb=T(H,pa.get("yearMonth","\u5e74\u6708"),fa.PARTVALUE_DATE_YM),Na=T(H,pa.get("yearMonthDay","\u5e74\u6708\u65e5"),fa.PARTVALUE_DATE_YMD),xb=$("<div>");xb.css("border-bottom","1px solid #ddd");ca(I,0,0,300,23);ca(M,0,27,160,23);Y.layoutCtrl(S,xb,0,56,"100%",0);ca(K,0,64,100,23);ca(ha,0,91,100,23);ca(Aa,110,91,100,23);ca(Ta,220,91,
100,23);ca(db,0,118,100,23);ca(jb,110,118,100,23);ca(Na,220,118,100,23);H.addChangedListener(R);M.setChecked(!0);return S},T=function(S,ca,H){var I=new Va;I.setText(ca);I.setTooltips(ca);I.setUserObject(H);S.addElement(I);return I},R=function(S){N=S.getUserObject()}};Ga.ReflinesPanel=function(){function va(){Ua.AbstractOneItemPanel.call(this);var Q,G,T=new ab,R=new kb,S=new fb,ca=new kb;this.setModel=function(Ta,db){Q=Ta;T.setSelected([Ta.getType(),Ta.getMeasureIndex()]);R.setText(Ta.getValue());
ca.setText(Ta.getLabel());G=db};this.protectedGetHeight=function(){return 100};this.protectedInitJqUi=function(Ta){var db=[];if(0==G.length)db.push([wa.TYPE_AVG,-1]),db.push([wa.TYPE_MEDIAN,-1]);else for(var jb=0;jb<G.length;jb++)db.push([wa.TYPE_AVG,jb]),db.push([wa.TYPE_MEDIAN,jb]);db.push([wa.TYPE_CONST,-1]);T.setItemModels(db,H);T.setCustomPainter(I);T.addSelectedChangedListener(M);R.addEditedListener(K);Aa();ca.addEditedListener(ha);db=T.getJqUi();jb=R.getJqUi();var Na=ca.getJqUi(),xb=new fb;
xb.setText(pa.get("reflineType","\u53d6\u503c"));xb=xb.getJqUi();S.setText(pa.get("reflineValue","\u81ea\u5b9a\u4e49\u503c"));var Ub=S.getJqUi(),ec=new fb;ec.setText(pa.get("reflineLabel","\u6807\u7b7e"));ec=ec.getJqUi();Ta.append(xb);Ta.append(db);Ta.append(Ub);Ta.append(jb);Ta.append(ec);Ta.append(Na);ra.layoutCtrlWithLRTB(xb,0,null,60,0,null,23);ra.layoutCtrlWithLRTB(db,60,60,null,0,null,23);ra.layoutCtrlWithLRTB(Ub,0,null,60,33,null,23);ra.layoutCtrlWithLRTB(jb,60,60,null,33,null,23);ra.layoutCtrlWithLRTB(ec,
0,null,60,66,null,23);ra.layoutCtrlWithLRTB(Na,60,60,null,66,null,23)};this.check=function(){if(Q.getType()==wa.TYPE_CONST){var Ta=Q.getValue();if(!Ta)return R.requestFocus(),pa.get("reflinePromptValueEmpty","\u81ea\u5b9a\u4e49\u503c\u4e0d\u80fd\u4e3a\u7a7a\u3002");if(isNaN(Ta))return R.requestFocus(),pa.get("reflinePromptValueInvalid","\u81ea\u5b9a\u4e49\u503c\u4e0d\u662f\u6b63\u786e\u7684\u6570\u5b57\u3002")}return null};var H=function(Ta,db){return Ta[0]==db[0]&&Ta[1]==db[1]},I=function(Ta,db,
jb){Ta=jb[0];jb=jb[1];switch(Ta){case wa.TYPE_AVG:Ta=pa.get("reflineTypeAvg","\u5e73\u5747\u503c");break;case wa.TYPE_MEDIAN:Ta=pa.get("reflineTypeMed","\u4e2d\u4f4d\u6570");break;case wa.TYPE_CONST:Ta=pa.get("reflineTypeConst","\u81ea\u5b9a\u4e49"),jb=-1}jb=0<=jb&&0<G.length?jb<G.length?G[jb].getComplexText():pa.get("reflineNthMeasure","\u7b2c#1\u4e2a\u5ea6\u91cf\u7684").replace("#1",jb+1):"";db.text(jb+Ta)},M=function(Ta,db,jb){Ta=jb[0];jb=jb[1];Q.setMeasureIndex(0>jb?0:jb);Q.setType(Ta);Aa(!0)},
K=function(Ta){Ta=$.trim(Ta.getText());Q.setValue(Ta)},ha=function(Ta){Ta=$.trim(Ta.getText());Q.setLabel(Ta)},Aa=function(Ta){var db=Q.getType()==wa.TYPE_CONST;S.setEnabled(db);R.setEnabled(db);Ta&&db&&setTimeout(function(){R.requestFocus()},200)}}Ua.call(this);var Y=this.protectedMethod,J=[],N,X;this.setMeasureFields=function(Q){N=Q};this.getModel=function(){return J};this.setModel=function(Q){!Q&&(Q=[]);J=[];for(var G=0;G<Q.length;G++){var T=Q[G].copy();J.push(T)}Y.updateUi()};this.setPromptDisplayer=
function(Q){X=Q};this.isValidToAccepted=function(){var Q=!1;Y.visitAllItemPanel(function(R,S){S=!1;if(R=R.check())X(R),S=Q=!0;return S});if(Q)return!1;for(var G=0;G<J.length;G++){var T=J[G];T.getType()!=wa.TYPE_CONST&&T.setValue("")}return!0};this.protectedGetAddButtonText=function(){return pa.get("reflineAdd","\u6dfb\u52a0\u53c2\u8003\u7ebf")};this.protectedUpdateUiImpl=function(){Y.clearAllItemUi();for(var Q=0;Q<J.length;Q++)Y.appendItemUi(J[Q])};this.protectedCreateOneItemPanel=function(Q){var G=
new va;G.setModel(Q,N);return G};this.protectedAddItemAction=function(){var Q=new wa;Q.setMeasureIndex(0);Q.setType(wa.TYPE_AVG);J.push(Q);Y.appendItemUi(Q)};this.protectedDeleteItemModel=function(Q){J.splice(Q,1)}};Ga.AbstractEditableItemsPanel=Ua;Ga.PaletteSettingPanel=function(){var va=new qb;this.setPalette=function(N){va.setColors(N.getColors())};this.checkEditingInvalid=function(){return va.checkDuplication()};this.acceptEditing=function(N){for(var X=va.getColors(),Q=X.length-1;0<=Q;Q--)X[Q]||
X.splice(Q,1);N.setColors(X)};this.createJqUi=function(){var N=va.createJqUi(),X=$("<div>");X.on("mousedown",J);X.append(N);ra.layoutCtrl(N,0,0,400,240);N=Y(X,pa.get("paletteMoveUp","\u4e0a\u79fb"),-1,0);var Q=Y(X,pa.get("paletteMoveDown","\u4e0b\u79fb"),1,0),G=Y(X,pa.get("paletteMoveLeft","\u5de6\u79fb"),0,-1),T=Y(X,pa.get("paletteMoveRight","\u53f3\u79fb"),0,1);ra.layoutCtrl(N.getJqUi(),400,0,80,26);ra.layoutCtrl(Q.getJqUi(),400,30,80,26);ra.layoutCtrl(G.getJqUi(),400,60,80,26);ra.layoutCtrl(T.getJqUi(),
400,90,80,26);return X};var Y=function(N,X,Q,G){var T=new ta;T.setText(X);T.addActionListener(function(R,S){return function(ca){va.moving(R,S)}}(Q,G));T.getJqUi().addClass("movingbutton");T.getJqUi().css("display","none");T.getJqUi().appendTo(N);return T},J=function(N){var X=$(N.currentTarget);ra.upwardSearchHasClass($(N.target),X,"movingbutton")||(N=va.clickToSelecting(N),X.find(".movingbutton").css("display",N?"":"none"))}};Ga.PaletteMappingSettingPanel=function(){function va(Pb){KTDefaultCellRender.call(this,
Pb);var Qb=this,ac=this.paintCellUI;this.paintCellUI=function(bc,Bb){if(Qb.getCurrentRowIdx()<a.getHeadRowCount()||0==Qb.getCurrentColIdx())ac(bc,Bb);else if(1==Qb.getCurrentColIdx()){Bb=Qb.getCell().getValue();var ya=$("<div>");ya.css("background-color",Bb);ya.appendTo($(bc));ra.layoutCtrlWithLRTB(ya,4,4,null,4,4,null)}else 2==Qb.getCurrentColIdx()&&(ya=$(bc),null===K(Qb.getCell())?(ya.css({color:"#ccc","text-align":"center","line-height":"24px"}),ya.text(pa.get("paletteMappingUnbound","\u672a\u6307\u5b9a"))):
(ya.css({color:"","text-align":""}),ac(bc,Bb)))}}function Y(Pb,Qb,ac,bc){this.isSolidInvalid=function(){return bc?!0:!1};this.getPrompt=function(){return ac};this.getJqAnchor=function(){var Bb=Q.searchJqCell(Pb,Qb);Q.scrollCellVisible(Pb,Qb);return Bb}}var J,N,X,Q,G,T,R,S,ca;this.setMemberTextRequester=function(Pb){T=Pb};this.setInitMapping=function(Pb){X=(N=Pb?!0:!1)?Pb:null};this.getEditedMapping=function(){var Pb=null;if(N)if(Q)for(var Qb=a.getHeadRowCount(Q);Qb<Q.getRowsCount();Qb++){var ac=Q.getRow(Qb);
ac=K(ac.getCell(2));if(null===ac)break;!Pb&&(Pb=[]);Pb.push(ac)}else Pb=X;return Pb};this.checkEditingInvalid=function(){if(N&&Q)for(var Pb=-1,Qb={},ac=a.getHeadRowCount(Q),bc=ac;bc<Q.getRowsCount();bc++){var Bb=Q.getRow(bc);Bb=K(Bb.getCell(2));if(null===Bb)0>Pb&&(Pb=bc);else{if(0<=Pb)return ac=pa.get("paletteMappingPromptOrder","\u5fc5\u987b\u6309\u987a\u5e8f\u4f9d\u6b21\u6307\u5b9a\u503c\uff0c\u4e2d\u95f4\u4e0d\u80fd\u51fa\u73b0\u201c\u672a\u6307\u5b9a\u201d\u9879\u3002"),new Y(Pb,1,ac,!0);var ya=
Qb[Bb];if("number"==typeof ya)return Pb=bc-ac+1,ac=ya-ac+1,Bb=Bb?Bb:pa.get("dataNull","\uff08\u7a7a\uff09"),ac=pa.get("paletteMappingPromptDuplication","\u7b2c#1\u884c\u4e0e\u7b2c#2\u884c\u91cd\u590d\uff0c\u90fd\u662f\u201c#3\u201d\u3002").replace("#1",Pb).replace("#2",ac).replace("#3",Bb),new Y(bc,2,ac);Qb[Bb]=bc}}return null};this.announceClick=function(Pb){if(S&&!ra.upwardSearchHasClass(Pb,J,"q-sys-mark")){var Qb=J.parent().children(".sa-ctrl-dialog");ra.isDescendent(Pb[0],Qb[0])||S.hide()}};this.getJqUi=
function(){!J&&H();return J};this.updatePalette=function(Pb,Qb){if(!Qb||Q){Qb={};if(X){for(var ac=0,bc=Math.min(Pb.length,X.length);ac<bc;ac++){var Bb=Pb[ac];Qb[Bb]=X[ac]}X=null}else for(ac=a.getHeadRowCount(Q);ac<Q.getRowsCount();ac++){bc=Q.getRow(ac);var ya=K(bc.getCell(2));null!==ya&&(Bb=bc.getCell(1).getValue(),Qb[Bb]=ya)}Q.setSyncUIWhenModelChanged(!1);a.clearWithoutHead(Q);for(ac=0;ac<Pb.length;ac++)Bb=Pb[ac],bc=a.createRow(Q),bc.setHeight(24),bc.getCell(0).setValue(ac+1),bc.getCell(1).setValue(Bb),
ya=Qb[Bb],!ya&&""!==ya&&(ya=null),M(bc.getCell(2),ya);a.refresh(Q);Q.setSyncUIWhenModelChanged(!0)}};var H=function(){I();var Pb=$(Q.getUI()),Qb=new ta;Qb.setText(pa.get("paletteMappingFillAll","\u81ea\u52a8\u5168\u586b"));Qb.addActionListener(jb);var ac=new ta;ac.setText(pa.get("paletteMappingClearAll","\u5168\u6e05\u9664"));ac.addActionListener(Na);var bc=$("<div>");bc.append(Qb.getJqUi());bc.append(ac.getJqUi());bc.append(Pb);ra.layoutCtrlWithLRTB(Qb.getJqUi(),null,80,80,0,null,23);ra.layoutCtrlWithLRTB(ac.getJqUi(),
null,0,80,0,null,23);ra.layoutCtrlWithLRTB(Pb,0,0,null,28,0,null);Pb=new Va;Pb.setText(pa.get("paletteMappingAuto","\u81ea\u52a8"));var Bb=new Va;Bb.setText(pa.get("paletteMappingAppointed","\u6309\u989c\u8272\u987a\u5e8f\u6307\u5b9a\u503c"));Qb=new Ka;Qb.addElement(Pb);Qb.addElement(Bb);Qb.addChangedListener(function(ya,Oa){N=ya==Bb;bc.css("visibility",N?"visible":"hidden")});Pb.setChecked(!N);Bb.setChecked(N);J=$("<div>");J.append(Pb.getJqUi());J.append(Bb.getJqUi());J.append(bc);ra.layoutCtrlWithLRTB(Pb.getJqUi(),
0,null,200,0,null,23);ra.layoutCtrlWithLRTB(Bb.getJqUi(),0,null,200,33,null,23);ra.layoutCtrlWithLRTB(bc,20,0,null,35,0,null)},I=function(){Q=a.createTable();Q.setDraggableAdjusting(!1);Q.setCellRender(new va(Q));Q.getCellRender().setOutsideVisible(!1);a.bindTextEditor(Q,ha,Aa);a.bindTableListenerForCtrl(Q,Ta);Q.addColumns(4);Q.getColumn(0).setWidth(28);Q.getColumn(1).setWidth(40);Q.getColumn(2).setWidth(320);Q.getColumn(3).setWidth(100);var Pb=a.createHeadRow(Q);Pb.setHeight(18);Pb.getCell(1).setValue(pa.get("paletteMappingColor",
"\u989c\u8272"));Pb.getCell(2).setValue(pa.get("paletteMappingText","\u7ef4\u5ea6\u6210\u5458\uff08\u663e\u793a\u503c\uff09"));Pb.getCell(3).setValue(pa.get("paletteMappingOperation","\u64cd\u4f5c"));Pb=new KTStyle;Pb.setTextAlign("right");Q.getColumn(0).setStyle(Pb)},M=function(Pb,Qb){var ac=null===Qb?" ":Qb;Pb.setUserObject(null===Qb?null:"exist");Pb.setValue(ac)},K=function(Pb){return null===Pb.getUserObject()?null:Pb.getValue()},ha=function(Pb,Qb){return 2==Qb},Aa=function(Pb,Qb,ac,bc,Bb){M(ac,
bc);return!0},Ta=function(Pb,Qb,ac,bc){Pb=null;Qb?(Pb=Q.searchJqCell(ac,3),Qb=new ta(pa.get("paletteMappingSelect","\u9009\u62e9")),Qb.getJqUi().addClass("q-sys-mark"),Qb.getJqUi().appendTo(Pb),Qb.addActionListener(function(Bb){Bb=ac-a.getHeadRowCount(Q)+1;kc(ac,Bb)}),bc=new ta(pa.get("paletteMappingClear","\u6e05\u9664")),bc.getJqUi().appendTo(Pb),bc.addActionListener(function(Bb){M(Q.getRow(ac).getCell(2),null)}),ra.layoutCtrlWithLRTB(Qb.getJqUi(),0,null,50,2,2,null),ra.layoutCtrlWithLRTB(bc.getJqUi(),
50,null,50,2,2,null)):G&&G.empty();G=Pb},db=function(){for(var Pb=!0,Qb=a.getHeadRowCount(Q);Qb<Q.getRowsCount();Qb++){var ac=Q.getRow(Qb);if(K(ac.getCell(2))){Pb=!1;break}}return!Pb},jb=function(Pb){if(db()){var Qb=new W;Qb.setText(pa.get("paletteMappingFillAllConfirmer","\u6e05\u9664\u5168\u90e8\u5df2\u6307\u5b9a\u7684\u503c\uff0c\u5e76\u91cd\u65b0\u81ea\u52a8\u586b\u5199\u5417\uff1f"));Qb.setConfirmedListener(function(ac){ac&&Ub()});Qb.show(Pb.getJqUi())}else Ub()},Na=function(Pb){if(db()){var Qb=
new W;Qb.setText(pa.get("paletteMappingClearAllConfirmer","\u6e05\u9664\u5168\u90e8\u5df2\u6307\u5b9a\u7684\u503c\u5417\uff1f"));Qb.setConfirmedListener(function(ac){ac&&xb()});Qb.show(Pb.getJqUi())}else xb()},xb=function(){Q.setSyncUIWhenModelChanged(!1);for(var Pb=a.getHeadRowCount(Q);Pb<Q.getRowsCount();Pb++){var Qb=Q.getRow(Pb).getCell(2);M(Qb,null)}a.refresh(Q);Q.setSyncUIWhenModelChanged(!0)},Ub=function(){xb();ec(function(){var Pb=a.getHeadRowCount(Q),Qb=Q.getRowsCount()-Pb;Q.setSyncUIWhenModelChanged(!1);
for(Qb=Math.min(R.length,Qb)-1;0<=Qb;Qb--){var ac=R[Qb],bc=Q.getRow(Qb+Pb).getCell(2);M(bc,ac)}a.refresh(Q);Q.setSyncUIWhenModelChanged(!0)})},ec=function(Pb){R?Pb():T(function(Qb){R=Qb;Pb()})},kc=function(Pb,Qb){ca=Pb;if(!S){Pb=J.parent();var ac=Pb.prop("clientWidth"),bc=Pb.prop("clientHeight"),Bb=Math.round(.5*ac);ac=ac-Bb-4;bc-=8;S=new Ab(Pb);S.setMinSize(120,120);S.setBounds(ac,4,Bb,bc);S.setToolbarVisible(!1);S.setResizeEnabled(!0);S.setFullScreenEnabled();var ya=new x;ya.setItemHeight(22);ya.setItemUiCreator(function(Oa){var Ra=
R[Oa];Oa=new ta;Oa.setText(Ra?Ra:pa.get("dataNull","\uff08\u7a7a\uff09"));Oa.addActionListener(function(Ca){S.hide();M(Q.getRow(ca).getCell(2),Ra)});Oa.getJqUi().css({"text-align":"left",left:0,width:"100%"});return Oa.getJqUi()});S.setContent(ya.getJqUi());ec(function(){ya.setItemCount(R.length);ya.repaint()})}S.setTitle(pa.get("paletteMappingSelectorTitle","\u9009\u62e9\u7b2c#1\u4e2a\u989c\u8272\u5bf9\u5e94\u7684\u503c").replace("#1",Qb));S.show()}};Ga.ContinuousColorSettingDialog=function(){Z.call(this);
var va=this,Y=this.protectedMethod,J=new sb,N=!1;this.setTitle=function(Q){Y.setTitle(Q)};this.setup=function(Q,G,T){if(Q)N=!0;else{N=!1;var R=sb.getDefaultBackwardColor(),S=sb.getDefaultForwardColor(),ca=sb.makeCustomColorB(R),H=sb.makeCustomColorB(S);Q=new ma;Q.getBackwardGradientColor(!0).setColor(R,ca);Q.getForwardGradientColor(!0).setColor(S,H);Q.setSegments(0);Q.setMinData(null);Q.setMaxData(null);Q.setMiddleData(0);Q.setWholeColorRange(!1)}J=new sb;J.setContext(G);J.model2Ui(Q);va.setSize(640,
480);Y.setContentPaneCreator(X);Y.setClosingAction(function(I){I&&T(N?J.ui2Model():null)})};var X=function(){var Q=$("<div>");Q.css("border-top","1px solid #f0f0f0");var G=$("<div>");G.append(Q);G.append(J.getJqUi());ra.layoutCtrlWithLRTB(Q,0,0,null,0,null,0);ra.layoutCtrlWithLRTB(J.getJqUi(),20,0,null,10,0,null);Q=new Va;Q.setText(pa.get("continuousColorDefault","\u7cfb\u7edf\u9ed8\u8ba4"));var T=new Va;T.setText(pa.get("continuousColorCustom","\u81ea\u5b9a\u4e49"));var R=new Ka;R.addElement(Q);
R.addElement(T);R.addChangedListener(function(S,ca){N=S==T;G.css("visibility",N?"visible":"hidden")});Q.setChecked(!N);T.setChecked(N);R=$("<div>");R.append(Q.getJqUi());R.append(T.getJqUi());R.append(G);ra.layoutCtrlWithLRTB(Q.getJqUi(),0,null,160,0,null,23);ra.layoutCtrlWithLRTB(T.getJqUi(),0,null,160,33,null,23);ra.layoutCtrlWithLRTB(G,0,0,null,70,0,null);return R}};Ga.BriefOutputManageDialog=function(){Vb.call(this);var va=this,Y=this.protectedMethod;this.protectedInitDialog=function(){va.setSize(800,
540);Y.setTitle(pa.get("briefOutputParam","\u8f93\u51fa\u53c2\u6570"));return[pa.get("briefAskAbort","\u662f\u5426\u53d6\u6d88\u5bf9\u201c\u8f93\u51fa\u53c2\u6570\u201d\u7684\u4fee\u6539\uff1f"),pa.get("briefCommandCaption","\u8bbe\u7f6e\u8f93\u51fa\u53c2\u6570")]};this.protectedCreateTreeUi=function(){return new xa};this.protectedCreateSettingUi=function(){return new oa};this.protectedPreview=function(J,N,X,Q){J.createFacade(function(G){var T=new Xa;T.parseFromJson(G);(new Sa).show(Q,T)}).previewBriefOutput(J.getMeta(),
N,X,J.getJsonAdditionalFilters(),Q)}};Ga.WarningRuleManageDialog=function(){Vb.call(this);var va=this,Y=this.protectedMethod;this.protectedInitDialog=function(){va.setSize(960,540);Y.setTitle(pa.get("warningRule","\u9884\u8b66\u89c4\u5219"));return[pa.get("warningRuleAskAbort","\u662f\u5426\u53d6\u6d88\u5bf9\u201c\u9884\u8b66\u89c4\u5219\u201d\u7684\u4fee\u6539\uff1f"),pa.get("warningRuleCommandCaption","\u8bbe\u7f6e\u9884\u8b66\u89c4\u5219")]};this.protectedCreateTreeUi=function(){return new eb};
this.protectedCreateSettingUi=function(){return new da};this.protectedPreview=function(J,N,X,Q){J.createFacade(function(G){var T=new Ya;T.parseFromJson(G);(new qa).show(N,T)}).previewWarningRule(J.getMeta(),N,X,Q)}};var ra,cb,Qa,hb,Fb,pa,Ab,Z,Wa,fb,Va,Ka,ab,kb,La,ob,ta,ja,Da,na,l,ba,W,ea,aa,la,x,d,b,e,c,a,q,u,v,y,C,P,U,fa,wa,ma,Ea,Xa,bb,Jb,Ya,nb,wb;(function(){var va=com.kingdee.bos.qing.common;ra=va.DomUtil;cb=va.Util;Qa=va.ColorUtil;hb=va.DateFormater;Fb=va.CanvasUtil;va=com.kingdee.bos.qing.framework.common;
pa=va.MultilanguageManager.createPackageAccessor(Ga);va=com.kingdee.bos.qing.ui.component;Ab=va.Dialog;Z=va.AbstractModalDialog;Wa=va.MessageDialog;fb=va.Label;Va=va.RadioButton;Ka=va.RadioButtonGroup;ab=va.ComboBox;kb=va.TextField;La=va.DropdownSelector;ob=va.F7Selector;ta=va.WorkButton;ja=va.ComboColor;Da=va.CheckBox;na=va.Spinner;l=va.List;ba=va.TextArea;W=va.SimpleConfirmer;ea=va.Button;aa=va.DateSelector;la=va.TabContainer;x=va.DynamicScroller;va=com.kingdee.bos.qing.common.ui;d=va.FormulaEditorPanel;
b=va.NumberFormatModel;e=va.NumberFormatSettingPanel;c=va.ManualOrderingList;a=va.TableUtil;q=va.AbstractLeftRightSelector;u=va.CommonIconUtil;va=com.kingdee.bos.qing.chart.render;v=va.ContinuousColorLegendRender;va=com.kingdee.bos.qing.core;y=va.Icons;C=va.CommonJsonParser;va=com.kingdee.bos.qing.core.model;P=va.Meta;U=va.MetaField;fa=va.AbstractAnalyticalField;wa=va.Refline;ma=va.ContinuousColor;Ea=va.BriefOutputDefinition;Xa=va.BriefOutput;bb=va.WarningRuleDefinition;Jb=bb.ConditionItem;Ya=va.WarningRulePreview;
va=com.kingdee.bos.qing.core.controller;nb=va.ActionChangeProperty;wb=va.ActionDefineOrder})();Ua.AbstractOneItemPanel=function(){var va=this,Y,J,N,X=!1;this.setDeleteListener=function(Q){Y=Q};this.setMovingDependence=function(Q,G){J=Q;N=G};this.requestMovingButtonVisibleUpdating=function(){X=!0};this.createJqUi=function(){var Q=new ta;Q.setText("\u00d7");Q.addActionListener(function(I){Y(va)});var G=va.protectedGetHeight(),T=(G-18>>1)-5,R=$("<div>");R.css("height",G);R.append(Q.getJqUi());ra.layoutCtrlWithLRTB(Q.getJqUi(),
null,0,18,T,null,18);if(J){var S=function(I,M){ca.getJqUi().css("display",I?"":"none");H.getJqUi().css("display",M?"":"none")},ca=new ta;ca.setText("\u2191");ca.getJqUi().css("display","none");ca.addActionListener(function(I){J(va,!0)&&N(va,!0)});var H=new ta;H.setText("\u2193");H.getJqUi().css("display","none");H.addActionListener(function(I){J(va,!1)&&N(va,!1)});ra.layoutCtrlWithLRTB(ca.getJqUi(),null,0,18,0,null,18);ra.layoutCtrlWithLRTB(H.getJqUi(),null,0,18,null,10,18);R.append(ca.getJqUi());
R.append(H.getJqUi());R.on("mouseenter",function(I){S(J(va,!0),J(va,!1))});R.on("mouseleave",function(I){S(!1,!1)});R.on("mousemove",function(I){X&&(X=!1,S(J(va,!0),J(va,!1)))})}va.protectedInitJqUi(R);return R};this.protectedGetHeight=function(){throw Error("Override");};this.protectedInitJqUi=function(Q){throw Error("Override");}};sb.getDefaultBackwardColor=function(){return[349,90,30]};sb.getDefaultForwardColor=function(){return[142,90,20]};sb.makeCustomColorB=function(va){return[va[0],0,85]};
sb.undressGray=function(va){return[va[0],15,85]};da.isOperationFit=function(va,Y){if(va.getType()==bb.CONDITION_NORMAL){for(var J=0;J<Y.length;J++)if(Y[J]==va.getOperation())return!0;return!1}return!0};da.createSelectableOperations=function(va,Y){var J=[bb.CONDITION_CUSTOM];J.push(bb.OP_EQUAL);J.push(bb.OP_NOT_EQUAL);va&&Y!=U.DT_DATE||(J.push(bb.OP_GREATER),J.push(bb.OP_GREATER_EQUAL),J.push(bb.OP_LESS),J.push(bb.OP_LESS_EQUAL));J.push(bb.OP_NULL);J.push(bb.OP_NOT_NULL);return J};da.operationToString=
function(va){switch(va){case bb.CONDITION_CUSTOM:va=pa.get("warningRuleOpCustom","\u81ea\u5b9a\u4e49");break;case bb.OP_EQUAL:va=pa.get("warningRuleOpEqual","\u7b49\u4e8e");break;case bb.OP_NOT_EQUAL:va=pa.get("warningRuleOpNotEqual","\u4e0d\u7b49\u4e8e");break;case bb.OP_GREATER:va=pa.get("warningRuleOpGreater","\u5927\u4e8e");break;case bb.OP_GREATER_EQUAL:va=pa.get("warningRuleOpGreaterEqual","\u5927\u4e8e\u7b49\u4e8e");break;case bb.OP_LESS:va=pa.get("warningRuleOpLess","\u5c0f\u4e8e");break;
case bb.OP_LESS_EQUAL:va=pa.get("warningRuleOpLessEqual","\u5c0f\u4e8e\u7b49\u4e8e");break;case bb.OP_NULL:va=pa.get("warningRuleOpNull","\u4e3a\u7a7a");break;case bb.OP_NOT_NULL:va=pa.get("warningRuleOpNotNull","\u4e0d\u4e3a\u7a7a");break;default:va=""}return va};da.comparingToString=function(va){return va}})();(function(){function Ua(){var W;this.getFilter=function(){return W};this.setFilter=function(ea){W=ea};this.getJqUi=function(){throw Error("Override me.");};this.getSuggestDialogSize=function(ea){return[640,480,!1,0,0]};this.accepting=function(ea){throw Error("Override me.");}}function Mb(){Ua.call(this);var W=this,ea;this.getSuggestDialogSize=function(aa){return[640,480,!1]};this.getJqUi=function(){if(!ea){var aa=W.getFilter().copy();ea=new Ja;ea.setModel(aa)}return ea.getJqUi()};this.accepting=function(aa){var la=
ea.acceptEditing(),x=new na(W.getFilter());x.setValue(la);aa.perform(x);return!0}}function ub(){Ua.call(this);var W=this,ea,aa,la,x=!1;this.getSuggestDialogSize=function(e){return[360,240,!1]};this.getJqUi=function(){ea||(ea=$("<div>"),d(ea));return ea};this.accepting=function(e){if(x){var c=aa.getValue(),a=la.isChecked(),q=W.getFilter();q=new l(q);q.setValue(c[0],c[1],a);e.perform(q);return!0}return!1};var d=function(e){aa=new Fb;aa.addValueChangedListener(function(c){x=!0});la=new Ab;la.setText(hb.get("dateFilterIncludeNull",
"\u5305\u542b\u7a7a\u503c"));la.addCheckedListener(function(c,a){a&&(x=!0)});cb.layoutCtrlWithLRTB(aa.getJqUi(),0,0,null,10,40,null);cb.layoutCtrlWithLRTB(la.getJqUi(),0,0,null,null,0,30);aa.getJqUi().appendTo(e);la.getJqUi().appendTo(e);b();x=!1},b=function(){var e=W.getFilter(),c=e.getPreparedModel();if(e.isJustShowAffected()){var a=c.getSelectedMin();c=c.getSelectedMax();var q=Math.min(c,Math.max(a,e.getFloor()));var u=Math.min(c,Math.max(a,e.getCeiling()))}else a=c.getMin(),c=c.getMax(),q=e.getFloor(),
u=e.getCeiling();aa.setFormatString(e.getFormatString());aa.setLimited(a,c);aa.setValue(q,u);la.setChecked(e.isContainNull())}}function mb(){var W=this,ea,aa,la,x,d,b,e,c={},a={},q=!1;this.suggestDialogSize=function(ma){var Ea=W.protectedGetSelectableItems().length;ma=Math.max(60,parseInt(.9*ma.innerHeight())-180);return[600,Math.min(ma,Math.max(60,21*Ea))+180,!0,480,240]};this.getJqUi=function(){ea||(ea=$("<div>"),u(ea));return ea};this.protectedGetSelectableItems=function(){throw Error("Impl");
};var u=function(ma){aa=ma;c=W.protectedCloneSelectedValue();b=!1;var Ea=$("<div>");Ea.appendTo(ma);var Xa=v(Ea);cb.layoutCtrlWithLRTB(Ea,0,0,null,0,null,Xa);d=new pa;d.setItemHeight(21);d.setItemUiCreator(function(bb){return W.protectedItemCreator(e[bb])});d.getJqUi().appendTo(ma);cb.layoutCtrlWithLRTB(d.getJqUi(),0,0,null,Xa,0,null);y()};this.protectedCloneSelectedValue=function(){throw Error("Impl");};this.protectedItemCreator=function(ma){throw Error("Impl");};var v=function(ma){x=new oa;!W.protectedIsAutoSelectEnabled()&&
x.setAutoSelectDisabled();x.setSearchingHandler(U);var Ea=x.getJqUi();cb.layoutCtrlWithLRTB(Ea,0,200,null,0,null,23);Ea.appendTo(ma);Ea=new Ab;Ea.setText(hb.get("showOnlySelected","\u4ec5\u663e\u793a\u9009\u4e2d\u9879"));Ea.setChecked(b);Ea.addCheckedListener(fa);Ea=Ea.getJqUi();cb.layoutCtrlWithLRTB(Ea,null,0,160,0,null,21);Ea.appendTo(ma);return W.protectedInitBar(ma)};this.protectedInitBar=function(ma){return 28};this.protectedIsAutoSelectEnabled=function(){return!0};var y=function(){var ma=W.protectedGetSelectableItems();
e=x.isSearching()||b?$.grep(ma,function(Ea){var Xa=x.check(Ea.getDisplayText());Ea=!b||P(Ea.getValue());return Xa&&Ea}):ma;d.setItemCount(e.length);d.repaint();W.protectedAfterUpdateDynamicScroller()};this.protectedAfterUpdateDynamicScroller=function(){};var C=function(){if(0==e.length){if(!la){var ma=new Wa;ma.setText(hb.get("nothingSearched","\u627e\u4e0d\u5230\u7b26\u5408\u7684\u7ed3\u679c"));ma.setEnabled(!1);la=ma.getJqUi();cb.layoutCtrlWithLRTB(la,0,0,null,60,null,16);la.appendTo(aa)}}else la&&
la.remove(),la=null},P=function(ma){return 1==wa()[ma]},U=function(){a={};if(x.isAutoSelectMode()&&x.isSearching()){q=!0;for(var ma=W.protectedGetSelectableItems(),Ea=0;Ea<ma.length;Ea++){var Xa=ma[Ea];x.check(Xa.getDisplayText())&&(a[Xa.getValue()]=!0)}}W.protectedAfterAutoSelectedBySearching();y();C()};this.protectedAfterAutoSelectedBySearching=function(){};var fa=function(ma,Ea){b=ma.isChecked();y();C()},wa=function(){return x.isAutoSelectMode()&&x.isSearching()?a:c};this.protectedMethod={repaintWithScrollState:function(){d.keepState();
d.repaint();d.restoreState()},visitAllVisibleSelectableItems:function(ma){for(var Ea=0;Ea<e.length&&!ma(e[Ea]);Ea++);},isSelected:P,select:function(ma,Ea){var Xa=wa();Ea?Xa[ma]=!0:delete Xa[ma];q=!0},selectOnlyOne:function(ma){c={};q=c[ma]=!0},acceptSelectingResult:function(){return q?wa():null}}}function qb(){mb.call(this);var W=this.protectedMethod;this.protectedIsAutoSelectEnabled=function(){return!1};this.protectedItemCreator=function(aa){var la=aa.getValue();la=W.isSelected(la);var x=aa.getDisplayText(),
d=new fb;d.addCheckedListener(ea);d.setUserObject(aa);d.setText(x);d.setChecked(la);aa=d.getJqUi();cb.layoutCtrlWithLRTB(aa,0,0,null);return aa};var ea=function(aa,la){la&&(aa.isChecked()?(aa=aa.getUserObject(),W.selectOnlyOne(aa.getValue()),W.repaintWithScrollState()):aa.setChecked(!0))}}function sb(){mb.call(this);var W=this,ea=this.protectedMethod,aa,la;this.protectedInitBar=function(c){aa=new Ab;aa.setText(hb.get("selectAll","\u5168\u9009"));aa.addCheckedListener(e);var a=aa.getJqUi();cb.layoutCtrlWithLRTB(a,
0,null,80,30,null,21);a.appendTo(c);la=new Wa;a=la.getJqUi();cb.layoutCtrlWithLRTB(a,80,0,null,30,null,21);a.appendTo(c);x();return 55};this.protectedItemCreator=function(c){var a=c.getValue();a=ea.isSelected(a);var q=c.getDisplayText(),u=new Ab;u.addCheckedListener(b);u.setUserObject(c);u.setText(q);u.setChecked(a);W.protectedIsExcludeMode()&&u.setCustomStyle("text-decoration","line-through");c=u.getJqUi();cb.layoutCtrlWithLRTB(c,0,0,null);return c};this.protectedIsExcludeMode=function(){return!1};
this.protectedAfterUpdateDynamicScroller=function(){d()};this.protectedAfterAutoSelectedBySearching=function(){x()};var x=function(){var c=0;for(var a=W.protectedGetSelectableItems(),q=0;q<a.length;q++)ea.isSelected(a[q].getValue())&&c++;c=hb.get("selectedCount","(\u5df2\u9009\u62e9#1\u9879)").replace("#1",c);la.setText(c)},d=function(){var c=!0,a=!1;ea.visitAllVisibleSelectableItems(function(q){a=!0;var u=!1;ea.isSelected(q.getValue())||(c=!1,u=!0);return u});aa.setChecked(a&&c)},b=function(c,a){a&&
(a=c.getUserObject(),c=c.isChecked(),ea.select(a.getValue(),c),d(),x())},e=function(c,a){if(a){var q=c.isChecked();ea.visitAllVisibleSelectableItems(function(u){ea.select(u.getValue(),q)});ea.repaintWithScrollState();x()}}}function Vb(){Ua.call(this);qb.call(this);var W=this,ea=this.protectedMethod;this.protectedGetSelectableItems=function(){return W.getFilter().getSelectableItems()};this.protectedCloneSelectedValue=function(){return W.getFilter().cloneAllSelectedValue()};this.getSuggestDialogSize=
function(aa){return W.suggestDialogSize(aa)};this.accepting=function(aa){var la=ea.acceptSelectingResult();if(la){var x=new ba(W.getFilter());x.setValue(la);aa.perform(x);return!0}return!1}}function Lb(){Ua.call(this);sb.call(this);var W=this,ea=this.protectedMethod;this.protectedIsExcludeMode=function(){return W.getFilter().isExclude()};this.protectedGetSelectableItems=function(){return W.getFilter().getSelectableItems()};this.protectedCloneSelectedValue=function(){return W.getFilter().cloneAllSelectedValue()};
this.getSuggestDialogSize=function(aa){return W.suggestDialogSize(aa)};this.accepting=function(aa){var la=ea.acceptSelectingResult();if(la){var x=new ba(W.getFilter());x.setValue(la);aa.perform(x);return!0}return!1}}function xa(){function W(C){KTDefaultTreeHandlerRender.call(this,C);var P=this.create;this.create=function(U,fa,wa,ma,Ea,Xa,bb){return u()?[]:P(U,fa,wa,ma,Ea,Xa,bb)}}function ea(C){KTDefaultCellRender.call(this,C);var P=this;this.paintCellUI=function(U,fa){var wa=P.getCell().getValue(),
ma=P.getCurrentRowIdx();wa=aa.protectedCreateItemUi(C,wa,ma);wa.css("overflow","visible");wa.children().css("overflow","visible");U=$(U);U.css("overflow","visible");fa?(fa=$(fa),fa.css("overflow","visible"),wa.appendTo(fa),cb.layoutCtrlWithLRTB(wa,4,0,null,0,null,"100%")):(wa.appendTo(U),cb.layoutCtrlWithLRTB(wa,0,0,null,0,null,"100%"))}}Ua.call(this);var aa=this,la,x={},d={},b,e=!1,c=!1;this.getSuggestDialogSize=function(C){var P=aa.getFilter().getSelectableItems().length;C=Math.max(40,parseInt(.9*
C.innerHeight())-200);return[640,Math.min(C,Math.max(40,23*P))+200,!0,480,240]};this.getJqUi=function(){if(!la){la=$("<div>");x=aa.getFilter().cloneAllSelectedValue();e=!1;b=new oa;!aa.protectedIsAutoSelectEnabled()&&b.setAutoSelectDisabled();var C=new KTable;C.setCellRender(new ea(C));C.setTreeHandlerRender(new W(C));C.setSyncUIWhenModelChanged(!1);C.setLargeDataMode(!0);C.addColumn().setWidth(320);var P=new KTStyle;P.setVerticalAlign("middle");C.setStyle(P);P=aa.getFilter().getSelectableItems();
if(0==P.length)P=!1;else{for(var U=!0,fa=0;fa<P.length;fa++){var wa=P[fa],ma=v(wa.getValue()),Ea=C.addRow();Ea.setHeight(23);Ea=Ea.getCell(0);Ea.setValue(wa);wa=new KTCellTreeModel(wa.getLevel());Ea.setTreeModel(wa);U=U&&ma}P=U}C.updateUI();U=aa.protectedGetBarHeight()+6;fa=$(C.getUI());cb.layoutCtrlWithLRTB(fa,0,0,null,U,0,null);la.append(fa);C=[P,C];a(C[0],C[1])}return la};this.accepting=function(C){var P=aa.protectedIsIncludeSubs(),U=aa.getFilter();if(c||P!=U.isTreeSelectingIncludeSubs()){var fa=
new ba(U);fa.setValue(y());var wa=new Da;wa.setMethod(U.isTreeSelectingIncludeSubs,U.setTreeSelectingIncludeSubs);wa.setValue(P);C.compositeStart(fa.getCaption());C.perform(fa);C.perform(wa);C.compositeEnd();return!0}return!1};this.protectedIsIncludeSubs=function(){return!1};this.protectedIsAutoSelectEnabled=function(){return!0};var a=function(C,P){var U=$("<div>");U.css("border-bottom","1px solid #eee");var fa=aa.protectedGetBarHeight();cb.layoutCtrlWithLRTB(U,0,0,null,0,null,fa);b.setSearchingHandler(function(){d=
{};if(b.isAutoSelectMode()&&b.isSearching()){c=!0;for(var wa=aa.getFilter().getSelectableItems(),ma=0;ma<wa.length;ma++){var Ea=wa[ma];b.check(Ea.getDisplayText())&&(d[Ea.getValue()]=!0)}}aa.protectedAfterAutoSelectedBySearching();q(P);P.updateUI(!0)});fa=b.getJqUi();cb.layoutCtrlWithLRTB(fa,0,200,null,0,null,23);fa.appendTo(U);fa=new Ab;fa.setText(hb.get("showOnlySelected","\u4ec5\u663e\u793a\u9009\u4e2d\u9879"));fa.setChecked(e);fa.addCheckedListener(function(wa,ma){ma&&(e=wa.isChecked(),q(P),P.updateUI(!0))});
fa=fa.getJqUi();cb.layoutCtrlWithLRTB(fa,null,0,160,0,null,21);fa.appendTo(U);aa.protectedInitBar(U,C,P);U.appendTo(la)};this.protectedInitBar=function(C,P,U){};this.protectedGetBarHeight=function(){return 30};var q=function(C){for(var P=u(),U=!0,fa=!1,wa=65535,ma=0;ma<C.getRowsCount();ma++){var Ea=C.getRow(ma),Xa=Ea.getCell(0),bb=Xa.getTreeModel(),Jb=!0;bb.getLevel()<=wa&&(Jb=!1);var Ya=Xa.getValue();Xa=v(Ya.getValue());Ya=e&&!Xa||b.isSearching()&&!b.check(Ya.getDisplayText());var nb=Jb;Ea.setHide(P?
Ya:nb);Ya||(fa=fa||Xa,U=U&&Xa);Jb||(wa=bb.isExpanded()?65535:bb.getLevel())}aa.protectedAfterUpdateTree(fa?U:!1,P)};this.protectedAfterUpdateTree=function(C,P){};this.protectedCreateItemUi=function(C,P,U){throw Error("Override");};this.protectedAfterAutoSelectedBySearching=function(){};var u=function(){return e||b&&b.isSearching()},v=function(C){return 1==y()[C]},y=function(){return b.isAutoSelectMode()&&b.isSearching()?d:x};this.protectedMethod={isSelected:v,select:function(C,P){var U=y();P?U[C]=
!0:delete U[C];c=!0},selectOnlyOne:function(C){x={};c=x[C]=!0},isAnySearched:u}}function eb(){xa.call(this);var W=this.protectedMethod;this.protectedIsAutoSelectEnabled=function(){return!1};this.protectedCreateItemUi=function(ea,aa,la){var x=aa.getValue();la=W.isSelected(x);var d=new fb;d.setText(aa.getDisplayText());d.setChecked(la);d.addCheckedListener(function(b,e){e&&(W.selectOnlyOne(x),ea.updateUI(!0))});return d.getJqUi()}}function Ma(){xa.call(this);var W=this,ea=this.protectedMethod,aa=!0,
la,x,d;this.protectedInitBar=function(c,a,q){aa=W.getFilter().isTreeSelectingIncludeSubs();d=new Ab;d.setText(hb.get("includeSubs","\u9009\u62e9\u65f6\u5305\u542b\u4e0b\u7ea7\u8282\u70b9"));d.setChecked(aa);d.addCheckedListener(e);var u=d.getJqUi();cb.layoutCtrlWithLRTB(u,null,0,160,30,null,21);u.appendTo(c);la=new Ab;la.setText(hb.get("selectAll","\u5168\u9009"));la.setChecked(a);la.addCheckedListener(function(v,y){if(y){v=v.isChecked();y=!ea.isAnySearched();for(var C=0;C<q.getRowsCount();C++){var P=
q.getRow(C);if(y||!P.isHide())P=P.getCell(0).getValue(),ea.select(P.getValue(),v)}q.updateUI(!0);b()}});a=la.getJqUi();cb.layoutCtrlWithLRTB(a,0,null,80,30,null,21);a.appendTo(c);x=new Wa;b();a=x.getJqUi();cb.layoutCtrlWithLRTB(a,80,null,160,30,null,21);a.appendTo(c)};this.protectedGetBarHeight=function(){return 58};this.protectedAfterUpdateTree=function(c,a){la.setChecked(c);d.setEnabled(!a)};this.protectedIsIncludeSubs=function(){return aa};this.protectedCreateItemUi=function(c,a,q){var u=a.getValue();
u=ea.isSelected(u);var v=new Ab;v.setUserObject(q);v.setText(a.getDisplayText());v.setChecked(u);v.addCheckedListener(function(y,C){if(C){C=y.getUserObject();y=y.isChecked();var P=c.getRow(C).getCell(0),U=P.getValue();ea.select(U.getValue(),y);if(aa&&!ea.isAnySearched()){U=P.getTreeModel();var fa=U.getLevel();for(C+=1;C<c.getRowsCount();C++){P=c.getRow(C).getCell(0);U=P.getTreeModel();if(U.getLevel()<=fa)break;U=P.getValue();ea.select(U.getValue(),y)}}c.updateUI(!0);C=!0;for(y=0;y<c.getRowsCount();y++)if(P=
c.getRow(y),!P.isHide()&&(P=P.getCell(0).getValue(),!ea.isSelected(P.getValue()))){C=!1;break}la.setChecked(C);b()}});return v.getJqUi()};this.protectedAfterAutoSelectedBySearching=function(){b()};var b=function(){var c=0;for(var a=W.getFilter().getSelectableItems(),q=0;q<a.length;q++)ea.isSelected(a[q].getValue())&&c++;c=hb.get("selectedCount","(\u5df2\u9009\u62e9#1\u9879)").replace("#1",c);x.setText(c)},e=function(c,a){a&&(aa=c.isChecked())}}function Ja(){var W,ea,aa,la,x,d;this.getJqUi=function(){if(!ea){ea=
$("<div>");var e=aa=new Ka,c=e.addItem;x=new ab;x.setDateRange(W.getFromDateMs(),W.getToDateMs());var a=x.getJqUi();c.call(e,"A",120,a,hb.get("dateFilterAbsolute","\u65e5\u671f\u8303\u56f4"));e=aa;c=e.addItem;d=W.getRelativePeriodModel();d||(d=new Qa,d.setPeriod(Qa.PERIOD_DAY),d.setWhichPeriod(0));a=$("<div>");var q=new kb;q.setContainsTime(!1);q.setModel(d);q.getJqUi().appendTo(a);cb.layoutCtrlWithLRTB(q.getJqUi(),0,0,null,0,0,null);c.call(e,"R",120,a,hb.get("dateFilterRelative","\u76f8\u5bf9\u65e5\u671f"));
la=new Ab;la.setText(hb.get("dateFilterIncludeNull","\u5305\u542b\u7a7a\u503c"));cb.layoutCtrlWithLRTB(aa.getJqUi(),0,0,null,0,28,null);cb.layoutCtrlWithLRTB(la.getJqUi(),0,null,160,null,0,23);ea.append(aa.getJqUi());ea.append(la.getJqUi());W&&b()}return ea};this.setModel=function(e){W=e;ea&&b()};this.acceptEditing=function(){if("A"==aa.getSelected()){var e=x.getDateRange();W.setFromDateMs(e[0]);W.setToDateMs(e[1]);W.setRelativePeriodModel(null)}else W.setRelativePeriodModel(d);W.setContainNull(la.isChecked());
return W};var b=function(){var e=W.getRelativePeriodModel();aa.setSelected(e?"R":"A");la.setChecked(W.isContainNull())}}function oa(){ka.call(this);var W=this.protectedMethod,ea=oa.MODE_AUTO_SELECT,aa=!0;this.isAutoSelectMode=function(){return ea==oa.MODE_AUTO_SELECT};this.setAutoSelectDisabled=function(){ea=oa.MODE_SEARCH_ONLY;aa=!1};this.protectedInitUi=function(x,d){var b=new Va;b.setItemModels([oa.MODE_AUTO_SELECT,oa.MODE_SEARCH_ONLY]);b.setSelected(ea);b.setDropdownMinWidth(220);b.setCustomPainter(la);
b.setEnabled(aa);b.addSelectedChangedListener(function(a,q,u){ea=u;W.changeSearchMode()});(new Wa).setText(hb.get("searcherTitle","\u641c\u7d22"));var e=W.createAllSearchImpl();W.changeSearchImpl(e[0],!1);var c=new Va;c.setItemModels(e);c.setSelected(e[0]);c.setCustomPainter(function(a,q,u){u&&q.text(u.getCaption())});c.addSelectedChangedListener(function(a,q,u){W.changeSearchImpl(u,!0)});b=b.getJqUi();c=c.getJqUi();cb.layoutCtrlWithLRTB(b,0,null,80,0,null,23);cb.layoutCtrlWithLRTB(c,84,null,80,0,
null,23);cb.layoutCtrlWithLRTB(d,168,0,null,0,null,23);x.append(b);x.append(c);x.append(d)};var la=function(x,d,b){x=x?hb.get("searcherTitle","\u641c\u7d22"):b==oa.MODE_AUTO_SELECT?hb.get("searcherModeAutoSelect","\u641c\u7d22\u7ed3\u679c\u81ea\u52a8\u9009\u4e2d"):hb.get("searcherModeSearching","\u4ec5\u641c\u7d22\uff0c\u4e0d\u5f71\u54cd\u9009\u4e2d\u72b6\u6001");var e=b==oa.MODE_AUTO_SELECT?"icon_search_auto_select":"icon_search";b=$("<div>");b.appendTo(d);La.background(b,e);e=$("<div>");e.text(x);
e.appendTo(d);cb.layoutCtrlMiddleAlign(b,16);cb.layoutCtrlWithLRTB(b,2,null,16);cb.layoutCtrlWithLRTB(e,20,0,null,0,0,null)}}function ka(){var W=this,ea,aa,la,x;this.setSearchingHandler=function(b){x=b};this.isSearching=function(){return aa&&aa.getText()?!0:!1};this.check=function(b){return!(aa&&aa.getText())||la.check(b.toLowerCase(),(aa?aa.getText():null).toLowerCase())};this.clear=function(){aa&&aa.clear()};this.getJqUi=function(){ea||(ea=$("<div>"),W.protectedInitUi(ea,d().getJqUi()));return ea};
this.protectedInitUi=function(b,e){throw Error("Implement");};var d=function(){aa=new Z;aa.setPlaceholder(hb.get("searcherTips","\u641c\u7d22\u5185\u5bb9"));aa.addSearchListener(function(b){x()});aa.setSearchListenerDelay(1E3);return aa};this.protectedMethod={changeSearchMode:function(){x()},createAllSearchImpl:function(){return[new Sa(!0),new Sa(!1),new qa(!0),new qa(!1),new Ga(!0),new Ga(!1),new da(!0),new da(!1)]},changeSearchImpl:function(b,e){la=b;e&&x()}}}function Ha(W){var ea=this;this.getCaption=
function(){return ea.protectedGetCaption(!W)};this.protectedGetCaption=function(aa){throw Error("Override");};this.check=function(aa,la){aa=ea.protectedCheckImpl(aa,la);return W?aa:!aa};this.protectedCheckImpl=function(aa,la){throw Error("Override");}}function Sa(W){Ha.call(this,W);this.protectedGetCaption=function(ea){return ea?hb.get("searchNotInclude","\u4e0d\u5305\u542b"):hb.get("searchInclude","\u5305\u542b")};this.protectedCheckImpl=function(ea,aa){return 0<=ea.indexOf(aa)}}function da(W){Ha.call(this,
W);this.protectedGetCaption=function(ea){return ea?hb.get("searchNotEqual","\u4e0d\u7b49\u4e8e"):hb.get("searchEqual","\u7b49\u4e8e")};this.protectedCheckImpl=function(ea,aa){return ea===aa}}function qa(W){Ha.call(this,W);this.protectedGetCaption=function(ea){return ea?hb.get("searchNotStartOf","\u5f00\u5934\u4e0d\u662f"):hb.get("searchStartOf","\u5f00\u5934\u662f")};this.protectedCheckImpl=function(ea,aa){return 0==ea.indexOf(aa)}}function Ga(W){Ha.call(this,W);this.protectedGetCaption=function(ea){return ea?
hb.get("searchNotEndOf","\u7ed3\u5c3e\u4e0d\u662f"):hb.get("searchEndOf","\u7ed3\u5c3e\u662f")};this.protectedCheckImpl=function(ea,aa){var la=ea.lastIndexOf(aa);return 0<=la&&la==ea.length-aa.length}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.core&&(com.kingdee.bos.qing.core={});"undefined"==
typeof com.kingdee.bos.qing.core.ui&&(com.kingdee.bos.qing.core.ui={});var ra=com.kingdee.bos.qing.core.ui;ra.AbstractPopupFilterPane=Ua;ra.AbstractTextSearcher=ka;ra.AbstractSingleValueDiscreteSelector=qb;ra.AbstractMultiValueDiscreteSelector=sb;var cb,Qa,hb,Fb,pa,Ab,Z,Wa,fb,Va,Ka,ab,kb,La,ob,ta,ja,Da,na,l,ba;(function(){var W=com.kingdee.bos.qing.common;cb=W.DomUtil;Qa=W.RelativePeriodModel;W=com.kingdee.bos.qing.framework.common;hb=W.MultilanguageManager.createPackageAccessor(ra);W=com.kingdee.bos.qing.ui.component;
Fb=W.RegionSlider;pa=W.DynamicScroller;Ab=W.CheckBox;Z=W.SearchBox;Wa=W.Label;fb=W.RadioButton;Va=W.ComboBox;W=com.kingdee.bos.qing.common.ui;Ka=W.RadioButtonGroupWithTabbedPane;ab=W.DateRangePanel;kb=W.RelativePeriodPanel;W=com.kingdee.bos.qing.core;La=W.Icons;W=com.kingdee.bos.qing.core.model;ob=W.DiscreteFilter;ta=W.ContinuousFilter;ja=W.ContinuousDateFilter;W=com.kingdee.bos.qing.core.controller;Da=W.ActionChangeProperty;na=W.ActionChangeValueForDateFilter;l=W.ActionChangeValueForContinuousFilter;
ba=W.ActionResetAllSelectedValueForDiscreteFilter})();Ua.create=function(W){if(W instanceof ob)var ea=W.getAssociatedField().getMetaField().isParentChildDimension()?W.isSingleValueMode()?new eb:new Ma:W.isSingleValueMode()?new Vb:new Lb;else if(W instanceof ta)ea=new ub;else if(W instanceof ja)ea=new Mb;else throw Error("Modify here.");ea.setFilter(W);return ea};oa.MODE_AUTO_SELECT=1;oa.MODE_SEARCH_ONLY=2})();(function(){function Ua(){var La=this,ob,ta,ja,Da,na,l=!1;this.getIconName=function(){return ob};this.setIconName=function(ea){ob=ea};this.hookUiCreater=function(ea){ta=ea};this.hookExitHandler=function(ea){ja=ea};this.hookDestroyHandler=function(ea){Da=ea};this.popup=function(ea,aa,la,x){l||(l=!0,!na&&W(ea),ea=parseInt(na.css("height")),x=x(ea),na.css("display",""),ka.layoutCtrlWithLRTB(na,aa,null,0,x,null,null),na.animate({width:la},250))};this.hideWithAnimation=function(ea){l&&(l=!1,ea?na.animate({width:0},
250,ba):ba())};this.maybeDestroy=function(){Da&&Da(na)};var ba=function(){na.css("display","none");ja&&ja()},W=function(ea){na=$("<div>");na.css("z-index",2);na.addClass("sa-extrafilter-popup");var aa=$("<div>");Wa.background(aa,"icon_extra_close");aa.addClass("sa-extrafilter-popup-close");aa.on("click",function(la){La.hideWithAnimation(!0)});aa.appendTo(na);ka.layoutCtrlWithLRTB(aa,null,-2,12,-2,null,12);aa=ta(na);na.css("height",aa);na.appendTo(ea);return aa}}function Mb(){cb.AbstractTabPane.call(this);
var La=this,ob,ta,ja,Da,na=!1;this.getTabHeadText=function(){return ob.getAssociatedField().getText()};this.getJqUi=function(){ta||(ta=$("<div>"),ta.addClass("sa-extrafilter-pane"));return ta};this.into=function(){Da(La.protectedCreatePopupTools());ja(ob,function(l){if(!na||l)ob.isStateValid()?La.protectedRefreshUi():La.getJqUi().text(ob.getStateDisplay()),na=!0})};this.protectedRefreshUi=function(){throw Error("Implement");};this.protectedCreatePopupTools=function(){return null};this.setFilter=function(l){ob=
l};this.setRequestPreparedValueListener=function(l){ja=l};this.setEnteredListener=function(l){Da=l};this.protectedMethod={getFilter:function(){return ob}}}function ub(){Mb.call(this);var La=this,ob,ta,ja,Da=function(x){!ta&&l();var d=ta.getJqUi();ka.layoutCtrlWithLRTB(d,6,12,null,2,null,23);ja||(ja=new pa,ja.setText(da.get("showOnlySelected","\u4ec5\u663e\u793a\u9009\u4e2d\u9879")),ja.setChecked(!1),ja.addCheckedListener(ea));var b=ja.getJqUi();ka.layoutCtrlWithLRTB(b,6,12,null,28,null,23);x.append(d);
x.append(b);return 52},na=function(x){!ta&&l();var d=ta.getJqUi();ka.layoutCtrlWithLRTB(d,6,12,null,2,null,23);x.append(d);return 30},l=function(){ta=new function(){kb.call(this);var x=this.protectedMethod;this.protectedInitUi=function(d,b){var e=x.createAllSearchImpl();x.changeSearchImpl(e[0],!1);var c=new Z;c.setItemModels(e);c.setSelected(e[0]);c.setCustomPainter(function(a,q,u){u&&q.text(u.getCaption())});c.addSelectedChangedListener(function(a,q,u){x.changeSearchImpl(u,!0)});e=c.getJqUi();ka.layoutCtrlWithLRTB(e,
0,null,80,0,null,23);ka.layoutCtrlWithLRTB(b,90,0,null,0,null,23);d.append(e);d.append(b)}};ta.setSearchingHandler(W)},ba=function(){if(la()||aa())ta&&ta.clear(),ja&&ja.setChecked(!1),La.protectedRefreshUi()},W=function(){La.protectedSearch();La.getJqUi().click()};this.protectedSearch=function(){throw Error("Implement");};var ea=function(x,d){d&&W()},aa=function(){return ja&&ja.isChecked()},la=function(){return ta&&ta.isSearching()};this.protectedMethod.getSearchingPopupTool=function(x){ob||(ob=new Ua,
ob.setIconName("icon_extra_search"),ob.hookUiCreater(x?Da:na),ob.hookExitHandler(ba));return ob};this.protectedMethod.isOnlyShowSelected=aa;this.protectedMethod.isSearching=la;this.protectedMethod.isSearchingMatched=function(x){return ta.check(x)}}function mb(){ub.call(this);var La=this,ob=this.protectedMethod,ta,ja;this.protectedRefreshUi=function(){ta=ob.getFilter().getSelectableItems();Da()};var Da=function(){var na=La.getJqUi(),l=Math.max(120,.4*na.prop("clientWidth"));ja=[];var ba=$(document.createDocumentFragment());
if(0<ta.length){ob.isSearching()||La.protectedBeforeCreateItems(ba);for(var W=0;W<ta.length;W++){var ea=ta[W],aa=ob.getFilter();var la=ea.getValue();aa=!aa.isFullValue()&&aa.isValueSelected(la);ea=ea.getDisplayText();var x=new ra;x.setUserObject(la);x.setText(ea);x.setTooltips(ea);x.setSelected(aa);ja.push(x);la=x;aa=la.getJqUi();ka.makeTextOmissible(aa);aa.addClass("sa-extrafilter-discretepane-button");aa.css("max-width",l);aa.appendTo(ba);La.protectedInitButton(la)}}else l=new hb,ob.isSearching()?
l.setText(da.get("nothingSearched","\u627e\u4e0d\u5230\u7b26\u5408\u7684\u7ed3\u679c")):l.setText(da.get("nothingSelectable","\u6ca1\u6709\u53ef\u9009\u62e9\u7684\u5185\u5bb9")),l.getJqUi().appendTo(ba),ka.layoutCtrlWithLRTB(l.getJqUi(),8,8,null,8,null,20);na.empty();na.append(ba)};this.protectedBeforeCreateItems=function(na){};this.protectedInitButton=function(na){throw Error("Implement");};this.protectedCreatePopupTools=function(){return[ob.getSearchingPopupTool(!1)]};this.protectedSearch=function(){ta=
ob.getFilter().getSelectableItems();ob.isSearching()&&(ta=$.grep(ta,function(na){return ob.isSearchingMatched(na.getDisplayText())}));Da()};this.protectedMethod.visitEachButton=function(na){for(var l=0;l<ja.length;l++)na(ja[l])}}function qb(){mb.call(this);var La=this.protectedMethod;this.protectedInitButton=function(ta){ta.addActionListener(ob)};var ob=function(ta,ja){ja?(ja=ta.getUserObject(),La.getFilter().setSelectedValue(ja),La.visitEachButton(function(Da){Da!=ta&&Da.isSelected()&&Da.setSelected(!1)})):
ta.setSelected(!0)}}function sb(){mb.call(this);var La=this.protectedMethod,ob;this.protectedBeforeCreateItems=function(ja){ob=new ra;ob.setText(da.get("ignored","\uff08\u4e0d\u9650\uff09"));ob.setSelected(La.getFilter().isFullValue());ob.addActionListener(function(na,l){l?(La.getFilter().setFullValue(!0),La.visitEachButton(function(ba){ba.isSelected()&&ba.setSelected(!1)})):ob.setSelected(!0)});var Da=ob.getJqUi();Da.addClass("sa-extrafilter-discretepane-button");Da.appendTo(ja)};this.protectedInitButton=
function(ja){ja.addActionListener(ta)};var ta=function(ja,Da){ja=ja.getUserObject();var na=La.getFilter();Da?(na.isFullValue()&&na.setFullValue(!1),na.addSelectedValue(ja)):na.removeSelectedValue(ja);a:{Da=La.getFilter();ja=Da.getSelectableItems();for(na=0;na<ja.length;na++)if(Da.isValueSelected(ja[na].getValue())){Da=!0;break a}Da=!1}Da?ob.setSelected(!1):(ob.setSelected(!0),La.getFilter().setFullValue(!0))}}function Vb(){function La(l){KTDefaultTreeHandlerRender.call(this,l);var ba=this.create;
this.create=function(W,ea,aa,la,x,d,b){return na()?[]:ba(W,ea,aa,la,x,d,b)}}function ob(l){KTDefaultCellRender.call(this,l);var ba=this;this.paintCellUI=function(W,ea){var aa=ba.getCell().getValue(),la=ba.getCurrentRowIdx();aa=ta.protectedCreateItemUi(l,aa,la,na);aa.css("overflow","visible");aa.children().css("overflow","visible");W=$(W);W.css("overflow","visible");ea?(ea=$(ea),ea.css("overflow","visible"),aa.appendTo(ea),ka.layoutCtrlWithLRTB(aa,4,0,null,0,null,"100%")):(aa.appendTo(W),ka.layoutCtrlWithLRTB(aa,
0,0,null,0,null,"100%"))}}ub.call(this);var ta=this,ja=this.protectedMethod,Da;this.protectedRefreshUi=function(){var l=ta.getJqUi();l.empty();Da=new KTable;Da.setCellRender(new ob(Da));Da.setTreeHandlerRender(new La(Da));Da.setSyncUIWhenModelChanged(!1);Da.setLargeDataMode(!0);Da.addColumn().setWidth(100);var ba=new KTStyle;ba.setVerticalAlign("middle");Da.setStyle(ba);ba=ja.getFilter().getSelectableItems();if(0!=ba.length)for(var W=0;W<ba.length;W++){var ea=ba[W],aa=Da.addRow();aa.setHeight(21);
aa=aa.getCell(0);aa.setValue(ea);ea=new KTCellTreeModel(ea.getLevel());aa.setTreeModel(ea)}Da.updateUI();ba=$(Da.getUI());ka.layoutCtrlWithLRTB(ba,6,0,null,2,2,null);l.append(ba)};this.protectedSearch=function(){for(var l=ja.getFilter(),ba=na(),W=65535,ea=0;ea<Da.getRowsCount();ea++){var aa=Da.getRow(ea),la=aa.getCell(0),x=la.getTreeModel(),d=!0;x.getLevel()<=W&&(d=!1);la=la.getValue();la=ba?ja.isOnlyShowSelected()&&!l.isValueSelected(la.getValue())||ja.isSearching()&&!ja.isSearchingMatched(la.getDisplayText()):
d;aa.setHide(la);d||(W=x.isExpanded()?65535:x.getLevel())}Da.updateUI(!0)};this.protectedCreateItemUi=function(l,ba,W,ea){throw Error("Override");};var na=function(){return ja.isOnlyShowSelected()||ja.isSearching()}}function Lb(){Vb.call(this);var La=this.protectedMethod;this.protectedCreatePopupTools=function(){return[La.getSearchingPopupTool(!0)]};this.protectedCreateItemUi=function(ob,ta,ja,Da){var na=ta.getValue();ja=La.getFilter().isValueSelected(na);Da=new Ab;Da.setText(ta.getDisplayText());
Da.setChecked(ja);Da.addCheckedListener(function(l,ba){ba&&(La.getFilter().setSelectedValue(na),ob.updateUI(!0))});return Da.getJqUi()}}function xa(){Vb.call(this);var La=this.protectedMethod;this.protectedCreatePopupTools=function(){return[La.getSearchingPopupTool(!0),ob()]};this.protectedCreateItemUi=function(ta,ja,Da,na){var l=ja.getValue();l=La.getFilter().isValueSelected(l);var ba=new pa;ba.setUserObject(Da);ba.setText(ja.getDisplayText());ba.setChecked(l);ba.addCheckedListener(function(W,ea){if(ea){ea=
W.getUserObject();W=W.isChecked();var aa=ta.getRow(ea).getCell(0),la=aa.getValue(),x=la.getValue();W?La.getFilter().addSelectedValue(x):La.getFilter().removeSelectedValue(x);if(La.getFilter().isTreeSelectingIncludeSubs()&&!na())for(la=aa.getTreeModel(),x=la.getLevel(),ea+=1;ea<ta.getRowsCount();ea++){aa=ta.getRow(ea).getCell(0);la=aa.getTreeModel();if(la.getLevel()<=x)break;la=aa.getValue();aa=la.getValue();W?La.getFilter().addSelectedValue(aa):La.getFilter().removeSelectedValue(aa)}ta.updateUI(!0)}});
return ba.getJqUi()};var ob=function(){var ta=new Ua;ta.setIconName("icon_extra_setting");ta.hookUiCreater(function(ja){var Da=La.getFilter(),na=da.get("treeIncludeSubs","\u9009\u62e9\u65f6\u5305\u542b\u4e0b\u7ea7\u8282\u70b9 \uff08\u4ec5\u9650#1\uff09");na=na.replace("#1",Da.getAssociatedField().getComplexText());var l=new pa;l.setText(na);l.setTooltips(na);l.setChecked(Da.isTreeSelectingIncludeSubs());l.addCheckedListener(function(ba,W){W&&Da.setTreeSelectingIncludeSubs(ba.isChecked())});na=l.getJqUi();
ka.layoutCtrlWithLRTB(na,8,20,null,4,null,23);ja.append(na);return 30});ta.hookDestroyHandler(function(ja){ja&&ja.remove()});return ta}}function eb(){Mb.call(this);var La=this,ob=this.protectedMethod;this.protectedRefreshUi=function(){var ja=ob.getFilter(),Da=ja.getPreparedModel();if(ja.isJustShowAffected()){var na=Da.getSelectedMin();var l=Da.getSelectedMax();var ba=Math.min(l,Math.max(na,ja.getFloor()));var W=Math.min(l,Math.max(na,ja.getCeiling()))}else na=Da.getMin(),l=Da.getMax(),ba=ja.getFloor(),
W=ja.getCeiling();Da=new Fb;Da.addValueChangedListener(ta);Da.setFormatString(ja.getFormatString());Da.setLimited(na,l);Da.setValue(ba,W);ja=La.getJqUi();ja.empty();na=ja.prop("clientWidth");na=parseInt(Math.min(.9*na,Math.max(200,.4*na)));Da=Da.getJqUi();Da.css({position:"relative",width:na,height:60});Da.appendTo(ja)};var ta=function(ja){ja=ja.getValue();ob.getFilter().setValue(ja[0],ja[1])}}function Ma(){Mb.call(this);var La=this,ob=this.protectedMethod,ta,ja;this.protectedRefreshUi=function(){var d=
ob.getFilter();ta=new Ja;ta.setDateMs(d.getFromDateMs());ta.setChangedListener(la);ja=new Ja;ja.setDateMs(d.getToDateMs());ja.setChangedListener(la);d=new hb(da.get("dateFrom","\u4ece\uff1a"));var b=new hb(da.get("dateTo","\u5230\uff1a")),e=Da(da.get("currentDay","\u4eca\u5929"),ba),c=Da(da.get("currentWeek","\u672c\u5468"),W),a=Da(da.get("currentMonth","\u672c\u6708"),ea),q=Da(da.get("currentYear","\u672c\u5e74"),aa),u=La.getJqUi();u.empty();l(u,e,48,23);l(u,c,48,23);l(u,a,48,23);l(u,q,48,23);u.append(na());
l(u,d,40,23);l(u,ta);u.append(na());l(u,b,40,23);l(u,ja)};var Da=function(d,b){var e=new Ga;e.setText(d);e.addActionListener(b);return e},na=function(){var d=$("<div>");d.css({clear:"left",position:"relative",height:1});return d},l=function(d,b,e,c){b=b.getJqUi();b.css({"float":"left",position:"relative","margin-bottom":6});e&&b.css("width",e);c&&b.css("height",c);d.append(b)},ba=function(d){d=Ha.createToday();ta.setDateMs(d.getTime());ja.setDateMs(d.getTime());x()},W=function(d){d=Ha.createTimestamp();
var b=Ha.getDay(d);b<Sa.getStartDayOfWeek()&&(b+=7);b-=Sa.getStartDayOfWeek();ta.setDateMs(d-864E5*b);ja.setDateMs(d+864E5*(6-b));x()},ea=function(d){d=Ha.createToday();Ha.setFullYear(d,Ha.getFullYear(d),Ha.getMonth(d),1);ta.setDateMs(d.getTime());Ha.setFullYear(d,Ha.getFullYear(d),Ha.getMonth(d)+1,0);ja.setDateMs(d.getTime());x()},aa=function(d){d=Ha.createToday();Ha.setFullYear(d,Ha.getFullYear(d),0,1);ta.setDateMs(d.getTime());Ha.setFullYear(d,Ha.getFullYear(d)+1,0,0);ja.setDateMs(d.getTime());
x()},la=function(d){x()},x=function(){var d=ta.getPureDate(),b=ja.getPureDate();if(d.getTime()>b.getTime()){var e=d;d=b;b=e}Ha.setHours(b,23,59,59,999);d=d.getTime();b=b.getTime();e=ob.getFilter();e.setValue(d,b,e.getRelativePeriodModel(),e.isContainNull());e.setRelativePeriodModel(null)}}function Ja(){var La=this,ob=new Qa,ta=new Qa,ja=new Qa,Da,na;this.setDateMs=function(ea){ob.setValue(Ha.getFullYear(ea));ta.setValue(Ha.getMonth(ea)+1);ja.setValue(Ha.getDate(ea));W()};this.getPureDate=function(){return Ha.createDateWithTime(ob.getValue(),
ta.getValue()-1,ja.getValue(),0,0,0,0)};this.setChangedListener=function(ea){na=ea};this.getJqUi=function(){if(!Da){ob.setConstraint(1900,2199,1);ta.setConstraint(1,12,1);ob.addValueChangedListener(ba);ta.addValueChangedListener(ba);ja.addValueChangedListener(ba);var ea=new hb(da.get("tinyDateYear","\u5e74")),aa=new hb(da.get("tinyDateMonth","\u6708")),la=new hb(da.get("tinyDateDay","\u65e5"));Da=$("<div>");l(ob,0,56);l(ea,0);l(ta,6,42);l(aa,0);l(ja,6,42);l(la,0)}return Da};var l=function(ea,aa,la){ea=
ea.getJqUi();ea.css({"float":"left",position:"relative",height:23,"margin-left":aa});la&&ea.css("width",la);Da.append(ea)},ba=function(ea,aa,la,x){ea!=ob&&ea!=ta||W();x!=Qa.CHANGED_BY_API&&na&&na(La)},W=function(){var ea=ob.getValue(),aa=ta.getValue(),la=ja.getValue();ea=2==aa?0==ea%4&&0!=ea%100||0==ea%400?29:28:4==aa||6==aa||9==aa||11==aa?30:31;ja.setConstraint(1,ea,1);la>ea&&ja.setValue(ea)}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&
(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.core&&(com.kingdee.bos.qing.core={});"undefined"==typeof com.kingdee.bos.qing.core.ui&&(com.kingdee.bos.qing.core.ui={});var oa=com.kingdee.bos.qing.core.ui;oa.ExtraFilter=function(){ab.call(this);var La=this,ob=this.protectedMethod,ta,ja,Da,na,l,ba,W;this.setContextApi=function(b,e,c){ta=b;ja=e;Da=c};this.protectedInitJqUi=function(b,e,c){W=ta();if(0<W.length){e=ob.getComfortableSize(b,
e);b=e[0];e=e[1];var a=parseInt(Math.max(.15*b,Math.min(.25*b,100)));for(var q=[],u=0;u<W.length;u++){var v=W[u];if(v instanceof fb)var y=v.getAssociatedField().getMetaField().isParentChildDimension()?v.isSingleValueMode()?new Lb:new xa:v.isSingleValueMode()?new qb:new sb;else if(v instanceof Va)y=new eb;else if(v instanceof Ka)y=new Ma;else throw Error("Modify here.");y.setFilter(v);y.setRequestPreparedValueListener(la);y.setEnteredListener(x);q.push(y)}na=new cb;na.setTabPanes(q);na.setTabHeadItemHeight(30);
na.setTabHeadWidth(a);a=na.getJqUi();l=$("<div>");ka.layoutCtrlWithLRTB(l,0,120,null,0,0,null);q=new Ga;q.setText(da.get("extraOk","\u786e\u5b9a"));q.addActionListener(ea);q.getJqUi().addClass("sa-extrafilter-footer-okcancel-"+(qa.isModern()?"right":"left"));ka.layoutCtrlMiddleAlign(q.getJqUi(),22);u=new Ga;u.setText(da.get("extraCancel","\u53d6\u6d88"));u.addActionListener(aa);u.getJqUi().addClass("sa-extrafilter-footer-okcancel-"+(qa.isModern()?"left":"right"));ka.layoutCtrlMiddleAlign(u.getJqUi(),
22);y=$("<div>");y.addClass("sa-extrafilter-footer");y.append(l);y.append(q.getJqUi());y.append(u.getJqUi());c.append(a);c.append(y);ka.layoutCtrlWithLRTB(a,0,0,null,0,30,null);ka.layoutCtrlWithLRTB(y,0,0,null,null,0,30)}else b=Math.min(160,parseInt(.9*b)),e=Math.min(60,parseInt(.9*e)),ob.createPromptLabel(da.get("extraNoFilters","\u672a\u8bbe\u7f6e\u7b5b\u9009\u5668")).appendTo(c),ob.initManualClosable(c);ka.layoutCtrlWithLRTB(c,null,4,b,4,null,e)};this.protectedAfterSlidedDown=function(){na&&na.refreshUi()};
var ea=function(b){Da(W);La.hide()},aa=function(b){La.hide()},la=function(b,e){b.getPreparedModel()?e(!1):ja(W,b,function(c){c&&e(!0)},na.getJqUi().parent())},x=function(b){if(ba)for(var e=0;e<ba.length;e++){var c=ba[e];c.hideWithAnimation(!1);c.maybeDestroy()}l.empty();if(!(160>ob.getJqModalLayer().prop("clientWidth")||80>ob.getJqModalLayer().prop("clientHeight"))&&(ba=b))for(e=0;e<ba.length;e++)c=ba[e],b=$("<div>"),b.addClass("sa-extrafilter-footer-tool"),b.on("click",d(c)),Wa.background(b,c.getIconName()),
l.append(b)},d=function(b){return function(e){var c=l.parent();e=c.prop("clientWidth");e=Math.min(400,e);var a=[0,0];a=ka.upwardCoordinate(c[0],a,ob.getJqModalLayer()[0]);c=a[0]-4;var q=a[1]+4;b.popup(ob.getJqModalLayer(),c,e,function(u){var v=ob.getJqModalLayer().prop("clientHeight")-2;q+u>v&&(q=v-u);return q})}}};var ka,Ha,Sa,da,qa,Ga,ra,cb,Qa,hb,Fb,pa,Ab,Z,Wa,fb,Va,Ka,ab,kb=oa.AbstractTextSearcher;(function(){var La=com.kingdee.bos.qing.common;ka=La.DomUtil;Ha=La.DateUtil;Sa=La.Internation;La=
com.kingdee.bos.qing.framework.common;da=La.MultilanguageManager.createPackageAccessor(oa);La=com.kingdee.bos.qing.ui.component;qa=La.SkinUiContext;Ga=La.WorkButton;ra=La.ToggleButton;cb=La.LeftTabContainer;Qa=La.Spinner;hb=La.Label;Fb=La.RegionSlider;pa=La.CheckBox;Ab=La.RadioButton;Z=La.ComboBox;La=com.kingdee.bos.qing.core;Wa=La.Icons;La=com.kingdee.bos.qing.core.model;fb=La.DiscreteFilter;Va=La.ContinuousFilter;Ka=La.ContinuousDateFilter;La=com.kingdee.bos.qing.core.commonui;ab=La.AbstractCoveredSlideDownUi})()})();(function(){function Ua(){var d=this,b=Ua.TYPE_LongPainting,e={};this.setSupportedType=function(a){b=a};this.setTypeMode=function(a,q){e[a]=q};this.isTypeSupported=function(a){return(b&a)==a};var c=function(a){var q=e[a];return d.isTypeSupported(a)?q?q:Ua.MODE_1:0};this.isAtLeastOne=function(a){return(c(a)&Ua.MASK_AtLeastOne)==Ua.MASK_AtLeastOne};this.isMulti=function(a){return(c(a)&Ua.MASK_Multi)==Ua.MASK_Multi}}function Mb(){var d=!1,b=!1,e=!1;this.setError=function(c){d=c};this.isError=function(){return d};
this.setUnmatchedType=function(c){e=c};this.isUnmatchedType=function(){return e};this.setTooModern=function(c){b=c};this.isTooModern=function(){return b}}function ub(d,b){function e(a){var q,u,v,y,C;(function(){q=$("<div>");q.addClass("sa-ctrl-common-modallayer");q.appendTo($(document.body));q.on("click",function(fa){P()});u=$("<div>");u.addClass("sa-toolbar-dropdown-area");u.appendTo(q);u.css("max-height",Math.floor(q.prop("clientHeight")-u.prop("offsetTop")-30));v=$("<div>");v.addClass("sa-toolbar-dropdown-container");
v.appendTo(u);y=$("<div>");y.addClass("sa-toolbar-dropdown-collapse");y.appendTo(u);var U=$("<div>");U.text("<<");U.addClass("sa-toolbar-dropdown-collapse-text");U.appendTo(y)})();this.getJqContainer=function(){return v};this.animateHeight=function(U,fa){0===U?P():(U+=y.prop("offsetHeight"),u&&u.animate({height:U},{duration:100,queue:!1,complete:function(){fa&&fa()}}))};this.setCollapseListener=function(U){C=U};var P=function(){u&&(u.animate({height:0},function(){q.remove()}),u=null,C&&C())}}var c=
!1;this.setCurrentName=function(a){b.setCurrentName(a)};this.showShortPrompt=function(a,q,u){b.showShortPrompt(a,q,u)};this.setProductInfoJqUi=function(a){b.setProductInfoJqUi(a)};this.setDirtyListener=function(a){b.hookDirtyListener(a)};this.clearDirty=function(){b.setDirty(!1)};this.isDirty=function(){return b.isDirty()};this.hideBriefOutput=function(){c=!0};this.isBriefOutputHid=function(){return c};this.insertToolbarButton=function(a,q,u,v){return d.addButtonForHeadCustom(a,q,u,v)};this.appendToolbarButton=
function(a,q,u,v){return d.addButtonForTailCustom(a,q,u,v)};this.insertToolbarSeperator=function(){d.addSeperatorForHeadCustom()};this.insertToolbarMenu=function(a,q,u,v){return d.addMenuButtonForHeadCustom(function(){return a},q,u,v)};this.appendToolbarMenu=function(a,q,u,v){return d.addMenuButtonForTailCustom(function(){return a},q,u,v)};this.popupWarningRuleEditor=function(a){b.popupToEditWarningRule(a)};this.popupWarningRuleSelector=function(a,q,u){b.popupToSelectWarningRule(a,q,u)};this.checkWarningRuleExist=
function(a){return b.checkWarningRuleExist(a)};this.showModalUi=function(a){return new e(a.getJqUi())};this.setConsumingStatisticsDisplayer=function(a){b.setConsumingStatisticsDisplayer(a)}}function mb(){var d=$("<div>"),b=[],e;this.getJqUi=function(){return d};this.setTabChangedListener=function(a){e=a};this.addTab=function(a,q){b.push(a);var u=a.getJqUi();Ja.layoutCtrlWithLRTB(u,0,0,null,0,22,null);u.appendTo(d);u=$("<div>");u.addClass("sa-viewtab-head");u.text(q);u.css({"text-align":"center","line-height":"20px",
border:"1px solid #bbb","border-top":"0px","border-bottom-left-radius":"5px","border-bottom-right-radius":"5px"});Ja.layoutCtrlWithLRTB(u,80*(b.length-1)+18,null,79,null,2,20);u.appendTo(d);u.data("myModel",a);u.on("click",function(v){c($(v.currentTarget))});c(u)};this.getTabCount=function(){return b.length};this.getView=function(a){return b[a]};this.getCurrentView=function(){if(1==b.length)return b[0];for(var a=0;a<b.length;a++){var q=b[a];if("none"!=q.getJqUi().css("display"))return q}throw Error("Sth must be wrong.");
};this.forEach=function(a){for(var q=0;q<b.length&&!a(b[q]);q++);};this.hideTabHead=function(){if(1!=b.length)throw Error("Wrong opportunity.");d.find(".sa-viewtab-head").css("display","none");var a=b[0],q=a.getJqUi();Ja.layoutCtrlWithLRTB(q,0,0,null,0,0,null);a.resize()};var c=function(a){for(var q=d.find(".sa-viewtab-head"),u=0;u<q.length;u++){var v=$(q[u]),y=v.data("myModel");v[0]==a[0]?(v.css("cursor","default"),v.css("background",""),y.getJqUi().css("display",""),y.resize(),e&&e(y)):(v.css("cursor",
"pointer"),v.css("background","#ddd"),y.getJqUi().css("display","none"))}}}function qb(){var d=new Sa,b,e=$("<div>"),c=$("<div>"),a=$("<div>"),q=$("<div>"),u=$("<div>");this.getJqUi=function(){b||(b=d.getJqUi(),b.addClass("sa-toolbar"),v(e),v(c),v(a),v(q),v(u));return b};this.refresh=function(){d.refresh()};this.addSeperator=function(){d.appendSeperator(a)};this.addSeperatorForHeadCustom=function(){d.appendSeperator(c)};this.addSeperatorForView=function(C){d.appendSeperator(C)};this.addButtonForViewTab=
function(C,P,U,fa){C=y(e,!1,C,P,U,fa);d.appendSeperator(e);return C};this.addButton=function(C,P,U,fa){return y(a,!1,C,P,U,fa)};this.addButtonForHeadCustom=function(C,P,U,fa){return y(c,!1,C,P,U,fa)};this.addButtonForTailCustom=function(C,P,U,fa){return y(u,!1,C,P,U,fa)};this.addButtonForView=function(C,P,U,fa,wa){return y(C,!1,P,U,fa,wa)};this.addMenuButton=function(C,P,U,fa){return y(a,!0,C,P,U,fa)};this.addMenuButtonForHeadCustom=function(C,P,U,fa){return y(c,!0,C,P,U,fa)};this.addMenuButtonForTailCustom=
function(C,P,U,fa){return y(u,!0,C,P,U,fa)};this.addMenuButtonForView=function(C,P,U,fa,wa){return y(C,!0,P,U,fa,wa)};this.updateIndividualPart=function(C){q.children().detach();q.append(C)};var v=function(C){C.css({"float":"left",position:"relative",height:"100%"});C.appendTo(b)},y=function(C,P,U,fa,wa,ma){C=d.createButton(C,P,U,wa,ma);C.setIconSetter(function(Ea,Xa){Ab.background(Ea,Xa)});C.setIconName(fa);return C}}function sb(){var d,b,e,c,a,q,u,v,y;this.getJqUi=function(){d||C();return d};var C=
function(){d=$("<div>");d.addClass("sa-statusbar");d.on("contextmenu",function(P){P.ctrlKey&&(P.preventDefault(),y())});b=$("<span>");b.addClass("sa-statusbar-name");b.appendTo(d);e=$("<span>");e.addClass("sa-statusbar-dirtystate");e.appendTo(d);c=$("<span>");c.addClass("sa-statusbar-prompt");c.appendTo(d);a=$("<span>");a.addClass("sa-statusbar-prompt");a.appendTo(d);q=$("<div>");Ja.layoutCtrlWithLRTB(q,null,0,200,0,0,null);q.appendTo(d)};this.setCurrentName=function(P){b.text(P)};this.setDirtyPromptVisible=
function(P){e.css("display",P?"":"none")};this.showDirtyState=function(P){e.text(P?"*":"")};this.showShortPrompt=function(P,U,fa){clearTimeout(u);c.text(P);c.css("color",fa?fa:"");if(U){var wa=0,ma=function(){if(5<wa)c.text("");else{if(0==wa%2){c.text(P);var Ea=650}else c.text(""),Ea=350;u=setTimeout(ma,Ea);wa++}};ma()}else u=setTimeout(function(){c.text("")},5E3)};this.showSecondaryShortPrompt=function(P){clearTimeout(v);a.text(P);v=setTimeout(function(){a.text("")},5E3)};this.setProductInfoJqUi=
function(P){q.append(P)};this.setConsumingStatisticsDisplayer=function(P){y=P}}function Vb(){function d(){var J,N=!0;this.setLevel=function(X){J=X};this.getLevel=function(){return J};this.isExpandable=function(){throw Error("Override me.");};this.isAlwaysHide=function(){throw Error("Override me.");};this.isEquals=function(X){throw Error("Override me.");};this.setSearchingVisible=function(X){N=X};this.protectedMethod={isSearchingVisible:function(){return N}}}function b(J){d.call(this);var N=this.protectedMethod;
this.isExpandable=function(){return!1};this.isAlwaysHide=function(){return J.isHide()||!N.isSearchingVisible()};this.getMetaField=function(){return J};this.isEquals=function(X){return X instanceof b?J.getFullName()==X.getMetaField().getFullName():!1}}function e(){d.call(this);var J=this.protectedMethod,N=!1;this.isExpandable=function(){return!0};this.isAlwaysHide=function(){return!J.isSearchingVisible()};this.isExpanded=function(){return N};this.setExpanded=function(X){N=X}}function c(J){e.call(this);
var N,X;this.getModel=function(){return J};this.setBelongsTo=function(Q,G){N=Q;X=G};this.getBelongsToMetaTable=function(){return N};this.getBelongsToSubView=function(){return X};this.isEquals=function(Q){return Q instanceof c&&J.getName()==Q.getModel().getName()&&N.getName()==Q.getBelongsToMetaTable().getName()?(Q=Q.getBelongsToSubView(),X?Q&&X.getName()==Q.getName():!Q):!1}}function a(J){e.call(this);var N;this.getParentChildDimension=function(){return J};this.setDefaultMetaField=function(X){N=X};
this.getDefaultMetaField=function(){return N};this.isEquals=function(X){return X instanceof a?J.getName()==X.getParentChildDimension().getName():!1}}function q(J){e.call(this);var N=null;this.getMetaTable=function(){return J};this.setSubView=function(X){N=X};this.getSubView=function(){return N};this.isSubViewNode=function(){return N?!0:!1};this.getDrawingDisplayName=function(){return N?N.getDisplayName():J.getDisplayName()};this.isDrawingAsElasticField=function(){return N&&"ElasticField"==N.getDisplayAs()};
this.isEquals=function(X){return X instanceof q&&J.getName()==X.getMetaTable().getName()?(X=X.getSubView(),N?X&&N.getName()==X.getName():!X):!1}}var u=this,v,y,C,P,U=0,fa=-1;(function(){v=new ra;v.setBorderVisible(!1);v.setCustomItemPainter(function(J,N){J.data(Vb.ITEM_MODEL,N);J.addClass("sa-metapane-item");if(N instanceof q){var X=Jb(N);J.css("font-weight","bold");var Q=N.isDrawingAsElasticField()?"meta_elastic":P;Q=nb(J,!0,Q,N.getDrawingDisplayName());wb(Q,N);Q=!C&&!N.isSubViewNode();(!X||N.isAlwaysHide()||
Q)&&J.css("display","none")}else if(N instanceof b){Jb(N)&&!N.isAlwaysHide()||J.css("display","none");N=N.getMetaField();if(N.isPreAgg())X="meta_preagg";else switch(N.getDataType()){case La.DT_STRING:X="meta_string";break;case La.DT_NUMBER:X="meta_number";break;case La.DT_DATE:X="meta_date";break;default:throw Error("Unknown data type.");}Q=N.isUserCreated();var G=nb(J,Q,X,N.getDisplayName());Q=G[0];X=G[1];G=G[2];N.isUserCreated()&&(Q.text("="),Q.addClass("sa-metapane-item-header_calculating"));N.isInvalid()&&
(Q=pa.createWarning(),Q.addClass("sa-metapane-item-img_usercreated_error"),Q.appendTo(X),G.addClass("sa-metapane-item-text_error"),J.attr("title",ka.get("calculatedFieldInvalid","\u8ba1\u7b97\u5b57\u6bb5#1\u65e0\u6548").replace("#1",N.getComplexText())))}else if(N instanceof a)X=Jb(N),Q=N.getParentChildDimension(),Q=nb(J,!0,"meta_tree1",Q.getAlias()),wb(Q,N),X&&!N.isAlwaysHide()||J.css("display","none");else if(N instanceof c)X=Jb(N),Q=nb(J,!0,"meta_folder",N.getModel().getDisplayName()),wb(Q,N),
X&&!N.isAlwaysHide()||J.css("display","none");else throw Error("Modify here.");J.css("margin-left",20*(U+(C?0:-1)))});v.setCustomSelectedsPainter(function(J,N){for(var X=0;X<J.length;X++){var Q=J[X];Ya(Q,!1)}for(X=0;X<N.length;X++)Q=N[X],Ya(Q,!0)})})();this.getJqUi=function(){return v.getJqUi()};this.addPressedListener=function(J){v.addPressedListener(J)};this.addDoubleClickListener=function(J){v.addDBLClickListener(J)};this.setMultiSelectable=function(J){v.setMultiSelectable(J)};this.requestSelectedVisible=
function(){setTimeout(function(){v.scrollSelectedToVisible()},0)};this.clearSelecteds=function(){v.setSelecteds([])};this.setSelectedMetaField=function(J,N){for(var X=0;X<y.length;X++){var Q=y[X],G=u.getMetaFieldFromItemModel(Q);if(G&&(N?G.getFullName()==J:G==J)){v.setSelecteds([Q]);return}}v.setSelecteds([])};this.getSelectedMetaFields=function(J){for(var N={},X=[],Q=v.getSelecteds(),G=0;G<Q.length;G++){var T=u.getMetaFieldFromItemModel(Q[G]);T?N[T.getFullName()]||(X.push(T),N[T.getFullName()]=!0):
J&&X.push(null)}return X};this.getSelectedLeafMetaField=function(){var J=v.getSelecteds()[0];return J instanceof b?J.getMetaField():null};this.getOnlyOneSelectedMetaTable=function(J,N){for(var X=null,Q=null,G=v.getSelecteds(),T=0;T<G.length;T++){var R=G[T];if(R instanceof q){var S=R.getMetaTable();if(J){var ca=R.getSubView();J[0]=ca?ca.getName():null}Q=R}else R instanceof c?(S=R.getBelongsToMetaTable(),J&&(ca=R.getBelongsToSubView(),J[0]=ca?ca.getName():null,J[1]=R.getModel().getName()),Q=R):(ca=
u.getMetaFieldFromItemModel(R),S=ca.getTable(),J&&(R=[],ca=S.searchSubViewContainsField(ca,R),R=R[0],J[0]=ca?ca.getName():null,J[1]=R?R.getName():null));if(X){if(X!=S)return null}else X=S}N&&Q&&Q.setExpanded(!0);return X};this.getMetaFieldFromItemModel=function(J){if(J instanceof b)return J.getMetaField();if(J instanceof a)return J.getDefaultMetaField();if(J instanceof q||J instanceof c)return null;throw Error("Modify here when new type appended.");};this.setMetaModel=function(J){C=J.isMultiTableMode();
P=J.isMdOfSrcMode()?"meta_table-md":J.isPreaggOfSrcMode()?"meta_table-preagg":"meta_table";for(var N=ma(),X=[],Q=0;Q<J.getTableCount();Q++){var G=J.getTable(Q),T=J.getTableTreeLevel(G),R=X.concat,S=N,ca=[],H=new q(G);H.setLevel(T);H.setExpanded(S(H,!0));ca.push(H);H=G.getSubViews();var I=G.getViewItems();if(I||H){var M=G;for(var K={},ha=0;ha<M.getFieldCount();ha++){var Aa=M.getField(ha);K[Aa.getPureName()]=Aa}M=K;Xa(ca,I,T+1,G,null,M,S);Ea(ca,H,T+1,G,M,S)}else for(H=0;H<G.getFieldCount();H++)I=G.getField(H),
bb(I,ca,T+1,S);X=R.call(X,ca)}v.setItemModels(X,wa);y=X};this.getVisibleItemsCount=function(){return v.getJqUi().find(".sa-metapane-item:visible").length};var wa=function(J,N){return J.isEquals(N)},ma=function(){for(var J=y?y.slice():[],N=J.length-1;0<=N;N--)J[N].isExpandable()||J.splice(N,1);return function(X,Q){for(var G=0;G<J.length;G++){var T=J[G];if(T.isEquals(X))return J.splice(G,1),T.isExpanded()}return Q}},Ea=function(J,N,X,Q,G,T){if(N)for(var R=0;R<N.length;R++){var S=N[R],ca=new q(Q);ca.setLevel(X);
ca.setSubView(S);ca.setExpanded(T(ca,!0));J.push(ca);ca=S.getViewItems();Xa(J,ca,X+1,Q,S,G,T);S=S.getSubViews();Ea(J,S,X+1,Q,G,T)}},Xa=function(J,N,X,Q,G,T,R){if(N)for(var S=0;S<N.length;S++){var ca=N[S];if("string"==typeof ca){var H=ca;H=T[H];bb(H,J,X,R)}else{var I=new c(ca);I.setLevel(X);I.setBelongsTo(Q,G);I.setExpanded(R(I,!1));J.push(I);ca=ca.getFieldNames();for(I=0;I<ca.length;I++)H=ca[I],H=T[H],bb(H,J,X+1,R)}}},bb=function(J,N,X,Q){if(J)if(J.getGroupName()){for(var G=J.getGroupName(),T=null,
R=0;R<N.length;R++){var S=N[R];if(T){if(!(S instanceof b&&S.getMetaField().getGroupName()==G)){T.getParentChildDimension().getDisplayFieldName()==J.getPureName()&&T.setDefaultMetaField(J);S=new b(J);S.setLevel(X+1);N.splice(R-1,0,S);J=null;break}}else if(S instanceof a){var ca=S.getParentChildDimension();G==ca.getName()&&(T=S)}}T&&J?(T.getParentChildDimension().getDisplayFieldName()==J.getPureName()&&T.setDefaultMetaField(J),S=new b(J),S.setLevel(X+1),N.push(S)):T||(ca=J.getTable().getParentChildDimensionByName(G),
null!=ca&&(S=new a(ca),S.setLevel(X),S.setDefaultMetaField(J),S.setExpanded(Q(S,!1)),N.push(S)),S=new b(J),S.setLevel(X+1),N.push(S))}else Q=new b(J),Q.setLevel(X),N.push(Q)},Jb=function(J){U=J.getLevel();if(0<=fa&&U>fa)var N=!1;else N=!0,J.isExpandable()&&(fa=J.isExpanded()?-1:U);return N},Ya=function(J,N){J=J.find(".sa-metapane-item-img");var X=J.data("myIconName");Ab.background(J,X+(N?"_selected":""))},nb=function(J,N,X,Q){var G=null;N&&(G=$("<div>"),G.addClass("sa-metapane-item-header"),G.appendTo(J));
N=$("<div>");N.addClass("sa-metapane-item-img");N.data("myIconName",X);N.appendTo(J);Ya(J,!1);X=$("<div>");X.addClass("sa-metapane-item-text");X.text(Q);X.appendTo(J);return[G,N,X]},wb=function(J,N){J=J[0];J.css("cursor","pointer");var X=$("<div>");X.text("\u25b2");X.addClass("sa-metapane-item-header-expand");X.appendTo(J);va(X,N.isExpanded());J.on("click",Y(N,X))},va=function(J,N){J.removeClass(N?"sa-metapane-item-header-expand_able":"sa-metapane-item-header-expand_ed");J.addClass(N?"sa-metapane-item-header-expand_ed":
"sa-metapane-item-header-expand_able")},Y=function(J,N){return function(X){X=J.isExpanded();X=!X;J.setExpanded(X);va(N,X);for(var Q=32767,G,T=!1,R=v.getJqUi().find(".sa-metapane-item"),S=0;S<R.length;S++){var ca=$(R[S]),H=ca.data(Vb.ITEM_MODEL);if(T){if(H.getLevel()<=J.getLevel())break;X?(H.getLevel()>Q?G=!1:(G=!0,Q=H.isExpandable()&&!H.isExpanded()?H.getLevel():32767),ca.css("display",!G||H.isAlwaysHide()?"none":"")):ca.css("display","none")}else H==J&&(T=!0)}}};this.protectedMethod={getListCtrl:function(){return v},
repaintListCtrl:function(J){J(y);v.setItemModels(y,wa)}}}function Lb(){Vb.call(this);var d=this,b=this.protectedMethod,e,c,a=!0,q,u=!1;this.getJqUi=function(){e||(e=$("<div>"),e.append(b.getListCtrl().getJqUi()),e.append(y().getJqUi()),v());return e};this.setSearchBoxVisible=function(P){a=P;e&&v()};this.clearSearching=function(){u&&(y().clear(),u=!1,C(""))};this.requestFocusAtSearchBox=function(){setTimeout(function(){y().setFoucs()},0)};this.setSearchBoxHideRequester=function(P){y().setAlwaysShowCleanIcon(!0);
y().addCloseListener(function(U){P()})};var v=function(){var P=y().getJqUi(),U=b.getListCtrl().getJqUi();a?(P.css("display","block"),Ja.layoutCtrlWithLRTB(P,0,0,null,0,null,23),Ja.layoutCtrlWithLRTB(U,0,0,null,23,0,null)):(P.css("display","none"),Ja.layoutCtrlWithLRTB(U,0,0,null,0,0,null))},y=function(){q||(q=new cb,q.setPlaceholder(ka.get("fieldSearchPlaceholder","\u641c\u7d22")),q.addSearchListener(function(P){P=$.trim(P.getText());(u=(P=P.toLowerCase())?!0:!1)&&d.clearSelecteds();C(P)}),q.setSearchListenerDelay(1E3));
return q},C=function(P){b.repaintListCtrl(function(U){for(var fa=!1,wa=-1,ma=[],Ea=U.length-1;0<=Ea;Ea--){var Xa=U[Ea];if(Xa.getLevel()>=wa)for(var bb=wa+1;bb<=Xa.getLevel();bb++)ma[bb]=!1;wa=Xa.getLevel();if(Xa.isExpandable()){if(bb=ma[wa+1],Xa.setSearchingVisible(bb),u&&bb)for(Xa.setExpanded(!0),bb=wa;0<bb;bb--)ma[bb]=!0}else bb=Xa.getMetaField(),bb.isHide()||(bb=u?0<=bb.getDisplayName().toLowerCase().indexOf(P):!0,Xa.setSearchingVisible(bb),ma[wa]=ma[wa]||bb,fa=fa||bb)}fa?(c&&c.remove(),c=null):
c||(U=new Qa,U.setText(ka.get("fieldNothingSearched","\u627e\u4e0d\u5230\u7b26\u5408\u7684\u7ed3\u679c")),U.setEnabled(!1),U.setAlign(Qa.ALIGN_CENTER),c=U.getJqUi(),c.appendTo(e),Ja.layoutCtrlWithLRTB(c,0,0,null,30,null,20),c.css({"z-index":999}))})}}function xa(){var d=this,b=$("<div>"),e=[],c=0;this.getJqUi=function(){return b};this.addChild=function(q){q.setRequestRelayoutListener(function(){clearTimeout(c);c=setTimeout(function(){d.relayout()},20)});e.push(q);b.append(q.getJqUi())};this.getChildCount=
function(){return e.length};this.getChild=function(q){return e[q]};this.childLeaveHome=function(q){e.splice(q,1)};this.clear=function(q){for(var u=e.length-1;0<=u;u--){var v=e[u];if(!q||v instanceof q)v.setRequestRelayoutListener(null),v.destroy(),v.getJqUi().remove(),e.splice(u,1)}};this.relayout=function(){var q=b.prop("clientHeight"),u=q;q=xa.GAP;for(var v=Math,y=v.max,C=0,P=0;P<e.length;P++)e[P].isVisible()&&C++;q=u-q*y.call(v,0,C-1);if(!(0>=q)){u=[];for(y=v=0;y<e.length;y++){var U=e[y];C=U.isVisible()?
U.getPerfectHeight():0;P={};P.index=y;P.min=U.isVisible()?U.getMinHeight():0;P.perfect=C;P.value=C;v+=C;for(U=0;U<u.length&&!(C<u[U].perfect);U++);u.splice(U,0,P)}for(q=v-q;0<q&&0<u.length;){v=u.pop();y=v.value;C=v.min;P=-1;for(U=0;U<u.length;U++){var fa=u[U];P=U;if(fa.value==y){P=U-1;break}}if(0<=P){if(U=u[P].value,fa=u.length-P,1<fa){var wa=y-U;fa*wa>q&&(wa=Math.floor(q/fa),U=y-wa)}}else wa=Math.ceil(q/(u.length+1)),U=y-wa;U=Math.max(C,U);wa=Math.min(y-U,q);U=y-wa;v.value=U;q-=wa;U==C?a(v):u.splice(0<=
P?P:0,0,v)}for(q=0;q<u.length;q++)a(u[q]);for(q=u=0;q<e.length;q++)v=e[q],y=v.getJqUi(),v.isVisible()?(C=y.height(),y.css("display",""),y.css("position","absolute"),y.css("left",0),y.css("right",0),y.css("top",u),u+=C+xa.GAP):y.css("display","none"),v.afterRelayout()}};var a=function(q){e[q.index].getJqUi().css("height",q.value)}}function eb(){hb.call(this);var d=this,b=this.protectedMethod,e=new ab,c=!0,a=this.showDialog;this.showDialog=function(u,v,y){v=v.clone();for(var C=v.getFieldCount()-1;0<=
C;C--){var P=v.getField(C);(P.isHide()||P.isUserCreated())&&v.removeField(C)}P=$(document.body);C=P.prop("clientWidth");P=P.prop("clientHeight");var U=Math.min(1,Math.max(.8,1.16-2E-4*C));C=parseInt(U*C);P=parseInt(U*P);d.setSize(C,P);b.setTitle(u);b.setSelectable(!0);b.getDialogCtrl().setFullScreenEnabled();b.getDialogCtrl().setResizeEnabled();b.getDialogCtrl().addResizeListener(function(){e.resize()});b.setFooterPaneCreator(null);b.setContentPaneCreator(function(){return e.getJqUi()});b.setClosingAction(function(fa){});
a();e.setupColumns(v.getFieldCount(),function(fa){return v.getField(fa)});e.updateColumnsVisible(function(fa){return!0},!0);e.setLoader(function(fa,wa){y(q).getMetaTableDetailRowData(v,fa,wa)});e.loadRows()};var q=function(u){if(c){e.setTotalRowsCount(u.totalRows);var v=e.appendRows}else v=e.lazyAppendRows;c=!1;var y=u.rows;v(y.length,function(C,P){return y[C][P]})}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos=
{});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.core&&(com.kingdee.bos.qing.core={});"undefined"==typeof com.kingdee.bos.qing.core.ui&&(com.kingdee.bos.qing.core.ui={});var Ma=com.kingdee.bos.qing.core.ui;Ma.ViewConfig=Ua;Ma.Main=function(){var d,b,e,c,a,q,u=new qb,v=new sb,y,C,P=new ja,U,fa,wa,ma=!1,Ea,Xa=new function(){this.createFacade=function(I,M,K){var ha=new Z(U,I,function(Aa,Ta,db){return M&&M(Aa,Ta,db)||y.getCurrentView().sharedErrorHandler(ha,
Aa,Ta,db)?!0:!1},K);return ha};this.getTopJqUi=function(){return q};this.getCommandManager=function(){return P};this.getMeta=function(){return a};this.isAnyCalculatedFieldUsed=function(I){var M=!1;y.forEach(function(K){return M=M||K.isAnyCalculatedFieldUsed(I)});return M};this.showStatusBarPrompt=function(I){v.showSecondaryShortPrompt(I)};this.getDesignerOperationJudger=function(I){var M=d?d[I]:null;if(!M){if(I==Ua.TYPE_LongPainting)M=new Wa;else if(I==Ua.TYPE_Square)M=new fb;else throw Error("Modify here.");
!d&&(d={});d[I]=M}return M};this.getAdditionalFiltersInfo=function(){return b?b.toDisplayJsonObject():null};this.getJsonAdditionalFilters=function(){return y.getCurrentView().isAdditionalFilterActive()?b?b.toExecutableJsonObject():null:null};this.getJsonAdditionalFieldNames=function(){return y.getCurrentView().isAdditionalFilterActive()?b?b.toMetaFieldNames():null:null}};this.setDesignerOperationJudger=function(I,M){d={};d[Ua.TYPE_LongPainting]=I;d[Ua.TYPE_Square]=M};this.setAdditionalFilterApi=function(I){b=
I};this.setViewIntegration=function(I){e=I};this.setViewConfig=function(I){C=I};this.setRemoteImpl=function(I){U=I};this.getConductor=function(){if(!fa){var I={};I.setDirty=nb;I.isDirty=function(){return ma};I.hookDirtyListener=function(M){Ea=M};I.setCurrentName=function(M){v.setCurrentName(M)};I.showShortPrompt=function(M,K,ha){v.showShortPrompt(M,K,ha)};I.setProductInfoJqUi=function(M){v.setProductInfoJqUi(M)};I.setConsumingStatisticsDisplayer=function(M){v.setConsumingStatisticsDisplayer(M)};I.popupToEditWarningRule=
S;I.popupToSelectWarningRule=ca;I.checkWarningRuleExist=H;fa=new ub(u,I)}return fa};this.setExhibitionContentChangedListener=function(I){wa=I};this.createJqUi=function(){q=$("<div>");q.addClass("sa-main");q.on("mousedown",function(M){1==M.which&&document.getSelection().removeAllRanges()});var I=N();Ja.makeSelectable(u.getJqUi(),!1);q.append(u.getJqUi());q.append(v.getJqUi());y=new mb;y.setTabChangedListener(function(M){M.updateToolbarIndividualPart(u);M=M.isDesignable();for(var K=0;K<I.length;K++){var ha=
I[K].getJqUi(),Aa=Ja.isInDomTree(ha[0]);M&&!Aa?ha.appendTo(ha.data("myJqParent")):M||(ha.data("myJqParent",ha.parent()),ha.detach())}v.setDirtyPromptVisible(M)});y.getJqUi().addClass("sa-main-body");q.append(y.getJqUi());va();y.forEach(function(M){M.setExhibitionContentChangedListener(wa)});P.addPerformedListener(J);return q};this.resize=function(){y.getCurrentView().resize();u.refresh()};this.prepareMeta=function(I){c=new kb;I&&c.fromJsonObject(I);Jb(new kb)};var bb=function(){for(var I=[],M=0,K=
y.getTabCount();M<K;M++){var ha=y.getView(M).getModelPage();I.push(ha)}M=new ob;M.setMeta(a);M.setModelPages(I);return M};this.getJsonModelBook=function(){return bb().toJsonObject(e)};this.setJsonModelBook=function(I,M,K){var ha=new Mb,Aa=new ob;try{I&&Aa.fromJsonObject(I,e,function(xb){xb&&(Jb(xb),Ya())});var Ta=Aa.getModelPages();I=0;for(var db=y.getTabCount();I<db;I++){var jb=y.getView(I),Na=Ta?Ta[I]:null;Na&&K&&K.transform(Na);if(Na&&!jb.isModelPageMatched(Na)){ha.setUnmatchedType(!0);break}jb.setModelPage(Na);
Na&&Va.verifyLinkageBizMeta(Na.getModel())}}catch(xb){ha.setError(!0),window.console&&console.error(xb)}nb(!1);Aa.isTooModern()&&v.showShortPrompt(ka.get("loadHighVersion","\u517c\u5bb9\u6027\u52a0\u8f7d\u9ad8\u7248\u672c\u6587\u6863"));ha.setTooModern(Aa.isTooModern());M&&M(ha)};this.born=function(){y.forEach(function(I){I.born()})};this.reExecute=function(){y.forEach(function(I){I.reExecute()})};this.destroy=function(){y.forEach(function(I){I.destroy()})};var Jb=function(I){a&&a.removeAllChangedListener();
a=I;a.merge(c);y.forEach(function(M){M.metaChanged(a)})},Ya=function(){a.isAnyCalculationFieldExist()&&Xa.createFacade(function(I){y.forEach(function(jb){jb.getModelPage().getModel().setListenerDumb(!0)});var M=new kb;M.fromJsonObject(I);for(I=a.getTableCount()-1;0<=I;I--)for(var K=a.getTable(I),ha=M.getTable(I),Aa=K.getFieldCount()-1;0<=Aa;Aa--){var Ta=K.getField(Aa);if(Ta.getFormula()){var db=ha.getField(Aa);Ta.setDisplayName(db.getDisplayName());Ta.setDataType(db.getDataType());Ta.setFormula(db.getFormula());
Ta.setFormulaDependence(db.getFormulaDependence());Ta.setInvalid(db.isInvalid());Ta.setFormulaAggStatus(db.getFormulaAggStatus())}}y.forEach(function(jb){jb.getModelPage().getModel().setListenerDumb(!1)})}).updateMeta(a)},nb=function(I){ma=I;v&&v.showDirtyState(ma);Ea&&Ea(ma)},wb=function(){C||(C=new Ua);return C},va=function(){var I=Ua.TYPE_LongPainting,M=wb().isMulti(I);wb().isAtLeastOne(I)&&Y(I);I=Ua.TYPE_Square;M=M||wb().isMulti(I);wb().isAtLeastOne(I)&&Y(I);M||1!=y.getTabCount()||y.hideTabHead()},
Y=function(I){var M;I==Ua.TYPE_LongPainting?M="\u6570\u636e\u5206\u6790":I==Ua.TYPE_Square&&(M="\u6570\u636e\u6597\u65b9");I=e.createView(I);I.setGlobalDependence(Xa);y.addTab(I,M)},J=function(I,M,K){nb(!0);I&&(M=M?"":(K?ka.get("undo","\u64a4\u6d88"):ka.get("redo","\u91cd\u505a"))+" ",M+=I.getCaption(),v.showShortPrompt(M))},N=function(){var I=u.addButton(Q,"btn_undo",ka.get("undo","\u64a4\u6d88")),M=u.addButton(G,"btn_redo",ka.get("redo","\u91cd\u505a"));X(I,M);P.addPerformedListener(function(K,
ha,Aa){X(I,M)});return fa&&fa.isBriefOutputHid()?[]:[u.addMenuButton(function(){var K=new Ga(T);K.setText(ka.get("briefOutputParam","\u8f93\u51fa\u53c2\u6570")+"...");var ha=new Ga(R);ha.setText(ka.get("warningRule","\u9884\u8b66\u89c4\u5219")+"...");var Aa=new qa;Aa.addItemModel(K);Aa.addItemModel(ha);return Aa},"btn_param",ka.get("brief","\u6458\u8981"))]},X=function(I,M){I.setEnabled(P.isCanUndo());M.setEnabled(P.isCanRedo())},Q=function(){P.isCanUndo()&&P.undo()},G=function(){P.isCanRedo()&&P.redo()},
T=function(){(new aa).edit(bb(),Xa)},R=function(){S()},S=function(I){(new la).edit(bb(),Xa,I)},ca=function(I,M,K){(new x).showDialog(bb(),I,M,K)},H=function(I){return x.checkWarningRuleExist(bb(),I)}};Ma.AbstractDesignerView=function(){var d=this,b,e;this.isDesignable=function(){return!0};this.setGlobalDependence=function(q){throw Error("Override me.");};this.metaChanged=function(q){throw Error("Override me.");};this.isAnyCalculatedFieldUsed=function(q){throw Error("Override me.");};this.isModelPageMatched=
function(q){return!1};this.setModelPage=function(q){throw Error("Override me.");};this.getModelPage=function(){throw Error("Override me.");};this.getJqUi=function(){throw Error("Override me.");};this.suspend=function(){throw Error("Override me.");};this.reExecute=function(){throw Error("Override me.");};this.isAdditionalFilterActive=function(){return!1};this.destroy=function(){};this.updateToolbarIndividualPart=function(q){b||(b=d.protectedCreateToolbarIndividualPart(q),b.css("position","relative"),
b.css("height","100%"));q.updateIndividualPart(b)};this.protectedCreateToolbarIndividualPart=function(q){return $("<div>To implement</div>")};this.resize=function(){d.protectedResizeImpl();var q=$(".sa-desk-executednotvisible");if(0<q.length){var u=q.data("myDelayRunning");u&&(q.removeData("myDelayRunning"),u())}};this.protectedResizeImpl=function(){throw Error("Override me.");};this.born=function(){d.getJqUi().is(":visible")||c()};this.setExhibitionContentChangedListener=function(q){e=q};this.protectedShowExecutingAccident=
function(q,u){throw Error("Override me.");};this.protectedAppendNecessaryDimensions=function(){throw Error("Override me.");};var c=function(q,u){var v=$("<div>");v.addClass("sa-desk-executednotvisible");v.text(ka.get("executedNotVisible","\u7b49\u5f85\u5237\u65b0"));var y=function(){v.remove();q&&q(u)};v.data("myDelayRunning",y);v.on("mousemove",function(C){d.protectedResizeImpl();y()});v.appendTo($(document.body))},a=function(q,u,v,y){switch(u){case 205401:case 205402:!y&&d.suspend();y=new Ha;y.setOptionType(Ha.OPTION_OK_CANCEL);
y.setMessage(ka.get("busyServer","\u670d\u52a1\u5668\u5fd9\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5\u3002"));y.setDetail(u+"\n"+v);y.setButtonText(Ha.RETURN_OK,ka.get("tryAgain","\u518d\u8bd5\u8bd5"));y.setButtonText(Ha.RETURN_CANCEL,ka.get("giveUp","\u653e\u5f03"));y.setClosingChecker(function(C){C==Ha.RETURN_OK&&q.tryAgain();return!0});y.showDialog();break;case 205403:case 205301:case 205302:!y&&d.suspend();y=new Ha;y.setOptionType(Ha.OPTION_OK);y.setMessage(Ka.toDisplayText(u,v));y.setDetail(u+"\n"+
v);y.showDialog();break;default:return!1}return!0};this.sharedErrorHandler=function(q,u,v,y){return a(q,u,v,!0)};this.protectedMethod={executingPerformanceErrorHandler:a,executingCommonErrorHandler:function(q,u){return(u=Ka.toDisplayText(q,u))?(d.protectedShowExecutingAccident(u,function(v){Ka.attemptToAppendNecessaryDimensions(q,v,d.protectedAppendNecessaryDimensions)}),!0):!1},fireExhibitionContentChangedEvent:function(q){e&&e(q)}}};Ma.MetaPane=function(){var d=this,b,e,c,a,q,u=new oa;this.setGlobalDependence=
function(G){b=G};this.getJqUi=function(){C();return e};this.addPressedListener=function(G){C();c.addPressedListener(function(T,R){G(d,R)})};this.clearSelecteds=function(){c.clearSelecteds()};this.getSelecteds=function(){return c.getSelectedMetaFields()};this.getDraggingMetaField=function(G){G=Ja.upwardSearchHasData(G,e,Vb.ITEM_MODEL);if(!G)return null;G=G.data(Vb.ITEM_MODEL);G=c.getMetaFieldFromItemModel(G);return!G||G.isInvalid()?null:G};this.setMeta=function(G){G.addChangedListener(function(T,R){R!=
La.KEY_FORMATSTRING&&R!=La.KEY_FISCALYEARSTART&&R!=La.KEY_SORTACCORDING&&y(T)});y(G)};this.addTitleBarButton=function(G){for(var T=e.find(".sa-metapane-button"),R=0;R<T.length;R++)$(T[R]).css("right",23*(T.length-R));G.addClass("sa-metapane-button");G.appendTo(e)};this.lockScroll=function(G){e.find(".sa-ctrl-list-owner").css("overflow",G?"hidden":"auto")};this.addClearSelectedAsker=function(G){u.addListener(G)};var v=function(G){u.fireEvent(function(T){T(G)})},y=function(G){c&&G&&c.setMetaModel(G);
ma(!0)},C=function(){if(!e){e=$("<div>");e.addClass("sa-metapane");var G=$("<div>");G.addClass("sa-metapane-title");G.appendTo(e);var T=$("<div>");T.text(ka.get("field","\u5b57\u6bb5"));T.attr("title",ka.get("ctrlSelectMoreField","[Ctrl]+\u9f20\u6807\uff0c\u53ef\u4ee5\u9009\u62e9\u591a\u4e2a\u5b57\u6bb5\u3002"));T.addClass("sa-metapane-title-text");T.appendTo(G);a=$("<div>");d.addTitleBarButton(a);a.on("mousedown",function(R){ma()});a.attr("title",ka.get("searchField","\u67e5\u627e\u5b57\u6bb5"));
G=$("<div>");Ab.background(G,"icon_search");G.addClass("sa-metapane-button-search-icon");G.appendTo(a);G=$("<div>");d.addTitleBarButton(G);G.on("mousedown",Ea);G.attr("title",ka.get("dropdownMenu","\u4e0b\u62c9\u83dc\u5355"));T=$("<div>");T.text("\u25b2");T.addClass("sa-metapane-button-operate-text");T.appendTo(G);P();c=new Lb;c.setSearchBoxVisible(!1);c.setMultiSelectable(!0);c.setSearchBoxHideRequester(function(){ma(!0)});G=c.getJqUi();G.addClass("sa-metapane-list");G.appendTo(e);y(b.getMeta());
b.getTopJqUi().on("mousedown",wa)}},P=function(){var G=new qa;fa(G,ka.get("dataFormat","\u6570\u5b57\u683c\u5f0f")+"...",J,Xa);fa(G,ka.get("fiscalYear","\u4f1a\u8ba1\u5e74\u5ea6")+"...",N,U(bb));G.addSeperator();fa(G,ka.get("sortAccording","\u6392\u5e8f\u4f9d\u636e")+"...",X,null);G.addSeperator();fa(G,ka.get("createCalculatedField","\u521b\u5efa\u8ba1\u7b97\u5b57\u6bb5")+"...",function(T){va(!0)},U(Jb));fa(G,ka.get("editCalculatedField","\u7f16\u8f91\u8ba1\u7b97\u5b57\u6bb5")+"...",function(T){va(!1)},
U(Ya));fa(G,ka.get("deleteCalculatedField","\u522a\u9664\u8ba1\u7b97\u5b57\u6bb5"),Y,U(Ya));G.addSeperator();fa(G,ka.get("viewMetaTableData","\u67e5\u770b\u539f\u59cb\u6570\u636e")+"...",Q,U(Jb));q=new da;q.setWidth(160);q.setModel(G)},U=function(G){return function(){return b.getMeta().isNormalSrcMode()&&G()}},fa=function(G,T,R,S){R=new Ga(R);R.setUserObject(S);R.setText(T);G.addItemModel(R)},wa=function(G){if(!G.ctrlKey&&!G.metaKey){var T=G.target;if(!(Ja.isDescendent(T,e[0])||(G=q.getJqUi(),G&&
0<G.length&&Ja.isDescendent(T,G[0])))){var R=!1;G=new function(){this.getTarget=function(){return T};this.retain=function(){R=!0}};v(G);R||d.clearSelecteds()}}},ma=function(G){G||a.hasClass("sa-metapane-button-search_press")?(a.removeClass("sa-metapane-button-search_press"),c.setSearchBoxVisible(!1),c.clearSearching()):(a.addClass("sa-metapane-button-search_press"),c.setSearchBoxVisible(!0),c.requestFocusAtSearchBox())},Ea=function(G){var T=$(G.currentTarget);G=$(G.target);if(q.isShowing())q.hide();
else{for(var R=q.getModel(),S=0,ca=R.getItemCount();S<ca;S++){var H=R.getItemModel(S);if(!R.isSeperator(H)){var I=H.getUserObject();I&&(I=I(),H.setEnabled(I))}}R=b.getTopJqUi();T=[e.innerWidth()-164,T.outerHeight()+4];T=Ja.upwardCoordinate(e[0],T,R[0]);q.show(R,T[0],T[1],G,!1)}},Xa=function(){for(var G=c.getSelectedMetaFields(!0),T=0<G.length,R=0;R<G.length;R++)if(!G[R]){T=!1;break}return T},bb=function(){for(var G=c.getSelectedMetaFields(!0),T=0<G.length,R=0;R<G.length;R++){var S=G[R];if(!S||S.getDataType()!=
La.DT_DATE){T=!1;break}}return T},Jb=function(){var G=b.getMeta();return 1!=G.getTableCount()||G.getTable(0).hasSubViews()?c.getOnlyOneSelectedMetaTable()?!0:!1:!0},Ya=function(){for(var G=c.getSelectedMetaFields(!0),T=0<G.length,R=0;R<G.length;R++){var S=G[R];if(!S||!S.getFormula()){T=!1;break}}return T},nb=function(G,T,R,S,ca){b.createFacade(function(H){var I=new kb;I.fromJsonObject(H);wb(I,T,R,S);ca&&ca()}).updateMeta(G)},wb=function(G,T,R,S){var ca=function(xb,Ub,ec){var kc=new Da;kc.setMethod(xb,
Ub);kc.setValue(ec);I.perform(kc)},H=ka.get("deleteCalculatedField","\u522a\u9664\u8ba1\u7b97\u5b57\u6bb5");"create"==T&&(H=ka.get("createCalculatedField","\u521b\u5efa\u8ba1\u7b97\u5b57\u6bb5"));"edit"==T&&(H=ka.get("editCalculatedField","\u7f16\u8f91\u8ba1\u7b97\u5b57\u6bb5"));var I=b.getCommandManager();I.compositeStart(H);T=b.getMeta();for(H=T.getTableCount()-1;0<=H;H--){for(var M=[],K=T.getTable(H),ha=G.getTable(H),Aa=K.getFieldCount()-1;0<=Aa;Aa--){for(var Ta=K.getField(Aa),db=!1,jb=ha.getFieldCount()-
1;0<=jb;jb--){var Na=ha.getField(jb);if(Ta.getPureName()==Na.getPureName()){db=M[jb]=!0;break}}db?Ta.getFormula()&&(ca(Ta.getDisplayName,Ta.setDisplayName,Na.getDisplayName()),ca(Ta.getDataType,Ta.setDataType,Na.getDataType()),ca(Ta.getFormula,Ta.setFormula,Na.getFormula()),ca(Ta.getFormulaDependence,Ta.setFormulaDependence,Na.getFormulaDependence()),ca(Ta.isInvalid,Ta.setInvalid,Na.isInvalid()),ca(Ta.getFormulaAggStatus,Ta.setFormulaAggStatus,Na.getFormulaAggStatus())):(db=new na(K,!1),db.setValue(Ta,
Aa),db.setViewContext(R,S),I.perform(db))}jb=0;for(Aa=ha.getFieldCount();jb<Aa;jb++)if(!M[jb]){db=new na(K,!0);db.setValue(ha.getField(jb).clone(),jb);db.setViewContext(R,S);I.perform(db);break}}I.compositeEnd()},va=function(G){ma(!0);var T=b.getMeta(),R=new kb;R.merge(T);var S=[],ca=c.getOnlyOneSelectedMetaTable(S,!0),H=null,I=null;ca=ca?ca:T.getTable(0);var M=ca.getName();ca=R.searchTableByName(M);var K=null;if(G)K=new La,K.setPureName("calculatingField"+(new Date).getTime()),K.setUserCreated(!0),
K.setFormatString("#,##0.00"),ca.insertField(K,ca.getFieldCount()),H=S[0],I=S[1],ca.updateFieldAtView(K.getPureName(),!0,H,I);else{S=c.getSelectedMetaFields()[0];c.setSelectedMetaField(S);for(var ha=ca.getFieldCount()-1;0<=ha;ha--){var Aa=ca.getField(ha);if(Aa.getPureName()==S.getPureName()){K=Aa;break}}}ca=new Lb;ca.setSearchBoxVisible(!0);ca.setMetaModel(T);S=new l;S.setContext(ca,R,K,!G);var Ta,db=null,jb=b.createFacade(function(Na){var xb=Na.ok,Ub=Na.errorPosition,ec=Na.errorPrompt;Ta=Na.dataType;
db(xb,Ub,ec)});jb.setShowBlocking(!1);S.setSyntaxValidator(function(Na,xb,Ub){db=Ub;jb.checkFormula(Na,T,K.getFullName())});S.setAcceptedListener(function(){K.setDataType(Ta?Ta:La.DT_NUMBER);var Na=null;G&&(Na=function(){var xb=T.searchTableByName(M);xb=xb.getField(xb.getFieldCount()-1);c.setSelectedMetaField(xb)});nb(R,G?"create":"edit",H,I,Na)});S.showDialog()},Y=function(G){var T=null,R=null,S=function(Ub){d.clearSelecteds();nb(Ub,"delete",T,R)};G=b.getMeta();var ca=new kb;ca.merge(G);var H=!1,
I=!1;G=[];for(var M=c.getSelectedMetaFields(),K=0;K<M.length;K++){var ha=M[K];H||(H=b.isAnyCalculatedFieldUsed(ha.getFullName()));for(var Aa=ca.getTableCount()-1;0<=Aa;Aa--)for(var Ta=ca.getTable(Aa),db=Ta.getFieldCount()-1;0<=db;db--){var jb=Ta.getField(db);if(jb.getFormula()){var Na=jb.getFormulaDependence();if(Na&&0<Na.length)for(var xb=0;xb<Na.length;xb++)Na[xb]==ha.getFullName()&&(I=!0,G.push(jb.getFullDisplayName()));jb.getFullName()==ha.getFullName()&&(xb=[],Na=Ta.searchSubViewContainsField(jb,
xb),xb=xb[0],T=Na?Na.getName():null,R=xb?xb.getName():null,Ta.removeField(db),Ta.updateFieldAtView(jb.getPureName(),!1,T,R))}}}if(H||I){if(H&&I)for(H=ka.get("usedAndQuotedPromot","\u4e00\u4e2a\u6216\u591a\u4e2a\u9009\u4e2d\u5b57\u6bb5\u5df2\u5728\u89c6\u56fe\u4e2d\u4f7f\u7528\uff0c\u5e76\u4e14\u5c06\u4f1a\u5f71\u54cd\u4ee5\u4e0b\u5b57\u6bb5\uff1a")+"\r\n",K=0;K<G.length;K++)H+="\u25aa "+G[K]+"\r\n";else if(I)for(H=ka.get("quotedPromot","\u5c06\u4f1a\u5f71\u54cd\u4ee5\u4e0b\u5b57\u6bb5\uff1a")+"\r\n",
K=0;K<G.length;K++)H+="\u25aa "+G[K]+"\r\n";else H=ka.get("usedPromot","\u5b57\u6bb5\u5df2\u5728\u89c6\u56fe\u4e2d\u4f7f\u7528\uff0c");H+=ka.get("sureDelete","\u786e\u5b9a\u5220\u9664\u5417\uff1f");G=new Ha;G.setOptionType(Ha.OPTION_OK_CANCEL);G.setMessage(H);G.showDialog();G.setClosingChecker(function(Ub){Ub==Ha.RETURN_OK&&S(ca);return!0})}else S(ca)},J=function(G){G=c.getSelectedMetaFields();var T=new W;T.setCommandManager(b.getCommandManager());T.showDialog(G)},N=function(G){G=c.getSelectedMetaFields();
var T=new ba;T.setCommandManager(b.getCommandManager());T.setTargetMetaFields(G);T.showDialog()},X=function(G){G=b.getMeta();var T=new ea;T.setCommandManager(b.getCommandManager());T.setMeta(G,function(){var R=new Lb;R.setSearchBoxVisible(!0);return R},function(R,S){return b.createFacade(R,S)});T.showDialog()},Q=function(){var G=b.getMeta(),T=c.getOnlyOneSelectedMetaTable();!T&&(T=G.getTable(0));G=T.getDisplayName();G=ka.get("viewMetaTableData","\u67e5\u770b\u539f\u59cb\u6570\u636e")+(G?" - "+G:"");
(new eb).showDialog(G,T,b.createFacade)}};Ma.SearchableMetaList=Lb;Ma.AdjustableLane=xa;Ma.DragDropHandler=function(){var d,b=[],e,c=null,a,q,u,v;this.bindParentUi=function(U){d=U};this.bindDragUi=function(U,fa,wa,ma,Ea){var Xa=!1,bb=[-1,-1],Jb=null,Ya=function(){e=Xa=!1;Jb=null;bb=[-1,-1]},nb=function(J){Ya()},wb=function(J){Xa=!0;e=!1;Jb=$(J.target);bb=[J.screenX,J.screenY]},va=function(J){Xa=!1},Y=function(J){var N=!1;Xa&&(N=5<Math.abs(J.screenX-bb[0])||5<Math.abs(J.screenY-bb[1]));N&&(Xa=!1,e=
!0,d.on("mousemove",y),d.on("mouseleave",C),d.on("mouseup",C),(c=fa(Jb))||Ya(),q=function(X,Q){wa&&wa(X,Q)},u=function(){ma&&ma()},v=Ea)};U.on("mousedown",wb);U.on("mouseup",nb);U.on("mouseleave",va);U.on("mousemove",Y);U.data("myDragEventHandlerSet",[wb,nb,va,Y])};this.unbindDragUi=function(U){var fa=U.data("myDragEventHandlerSet");U.off("mousedown",fa[0]);U.off("mouseup",fa[1]);U.off("mouseleave",fa[2]);U.off("mousemove",fa[3])};this.bindDropUi=function(U,fa,wa,ma,Ea,Xa){b.push(U);var bb;U=function(wb){e&&
(c&&(wb=bb&&Ea(c,bb),q(wb,bb),wb&&Xa(c,bb),u()),bb=c=null,P())};var Jb=function(wb){},Ya=function(wb){e&&ma()},nb=function(wb){if(e){var va=Ja.getCurrentTargetPosition(wb);va=Ja.upwardCoordinate(wb.target,va,fa[0]);bb=wa(va[0],va[1])}};fa.on("mouseup",U);fa.on("mouseenter",Jb);fa.on("mouseleave",Ya);fa.on("mousemove",nb);fa.data("myDropEventHandlerSet",[U,Jb,Ya,nb])};this.unbindDropUi=function(U,fa){var wa=fa.data("myDropEventHandlerSet");fa.off("mouseup",wa[0]);fa.off("mouseenter",wa[1]);fa.off("mouseleave",
wa[2]);fa.off("mousemove",wa[3]);for(fa=b.length-1;0<=fa;fa--)b[fa][0]==U[0]&&b.splice(fa,1)};var y=function(U){if(e){var fa=Ja.getCurrentTargetPosition(U);fa=Ja.upwardCoordinate(U.target,fa,d[0]);if(!a)for(a=$("<div>"),a.addClass("sa-dragdrop-dragingtips"),U=$("<span style='margin-left:5px;margin-right:5px'>"),U.text(c.getText()),U.appendTo(a),a.appendTo(d),U=0;U<b.length;U++)b[U].addClass("sa-dragdrop-droptarget");a.css({left:fa[0]+15+"px",top:fa[1]+10+"px"})}},C=function(U){q(!1);u();P()},P=function(){e=
!1;a&&(a.remove(),a=null,c&&v&&v(c));c=null;for(var U=0;U<b.length;U++)b[U].removeClass("sa-dragdrop-droptarget");d.off("mousemove",y);d.off("mouseleave",C);d.off("mouseup",C)}};Ma.MenuUtil=new function(){this.createActionMenuItem=function(b,e,c){e=d(e,c);return da.createActionMenuItem(b,e)};this.createCheckboxMenuItem=function(b,e,c,a){c=d(c,a);return da.createCheckbox(b,e,c)};this.createRadioMenuItem=function(b,e,c,a,q){a=d(a,q);return da.createRadio(b,e,c,a)};var d=function(b,e){return function(c){c.isCheckbox()&&
b.setValue(c.isChecked());e.perform(b)}}};Ma.AdditionalFilterSupporter=function(){function d(){hb.call(this);var C=this,P=this.protectedMethod;(function(){C.setSize(560,360);P.setTitle(ka.get("additionalFilters","\u4eea\u8868\u677f\u8054\u52a8\u7684\u7b5b\u9009\u6761\u4ef6"));P.setSelectable(!0);P.setFooterClosingOnly(!0);P.getDialogCtrl().setResizeEnabled();P.setContentPaneCreator(y);P.setClosingAction(function(U){})})()}var b,e,c=!0;this.setAdditionalFiltersInfo=function(C){b=C};this.setSwitchListener=
function(C){e=C};this.isSwitchOn=function(){return c};this.createButtonsOnFilterCard=function(C,P){var U=a(P);P=q(P);Ja.layoutCtrlWithLRTB(U,null,4,16,3,null,16);Ja.layoutCtrlWithLRTB(P,null,26,16,3,null,16);C=C.getJqUi();C.append(U);C.append(P)};var a=function(C){var P=$("<div>");P.css({cursor:"pointer"});Ab.background(P,"icon_additional_filter");P.on("click",function(U){(new d).showDialog()});u(P,C).setText(ka.get("additionalFiltersWatching","\u67e5\u770b\u4eea\u8868\u677f\u8054\u52a8\u7684\u7b5b\u9009\u6761\u4ef6\u3002"));
return P},q=function(C){var P=$("<div>");P.css({cursor:"pointer"});Ab.background(P,"icon_additional_filter");P.on("click",function(wa){c=!c;v(fa,U);e(c)});var U=u(P,C),fa=$("<div>");fa.appendTo(P);Ja.layoutCtrlWithLRTB(fa,0,0,null,0,0,null);v(fa,U);return P},u=function(C,P){C.on("mouseenter",function(fa){C.css({"box-shadow":"0 0 3px 0 #39f","background-color":"#39f4"})});C.on("mouseleave",function(fa){C.css({"box-shadow":"","background-color":""})});var U=new Fb;U.setContainer(P);U.mounting(C);return U},
v=function(C,P){Ab.background(C,c?"icon_switch_on":"icon_switch_off");C=c?ka.get("additionalFiltersOn","\u5df2\u5e94\u7528\u4eea\u8868\u677f\u8054\u52a8\u7684\u7b5b\u9009\u6761\u4ef6\u3002\u53ef\u70b9\u51fb\u6309\u94ae\u4f7f\u5176\u5ffd\u7565\u3002"):ka.get("additionalFiltersOff","\u5df2\u5ffd\u7565\u4eea\u8868\u677f\u8054\u52a8\u7684\u7b5b\u9009\u6761\u4ef6\u3002\u53ef\u70b9\u51fb\u6309\u94ae\u4f7f\u5176\u751f\u6548\u3002");P.setText(C)},y=function(){var C=$("<div>");C.css({overflow:"auto"});for(var P=
0;P<b.length;P++){var U=b[P],fa=$("<span>");fa.text(ta.getCaption(U));var wa=$("<span>");wa.css({"margin-left":"16px"});wa.text(ta.getValue(U));U=$("<div>");U.css({position:"relative","margin-bottom":"4px","padding-left":"12px","line-height":"24px"});U.append(fa);U.append(wa);U.appendTo(C)}return C}};var Ja,oa,ka,Ha,Sa,da,qa,Ga,ra,cb,Qa,hb,Fb,pa,Ab,Z,Wa,fb,Va,Ka,ab,kb,La,ob,ta,ja,Da,na,l=Ma.FormulaEditor,ba=Ma.FiscalYearStartSelector,W=Ma.NumberFormatSettingForMeta,ea=Ma.SortAccordingSelector,aa=
Ma.BriefOutputManageDialog,la=Ma.WarningRuleManageDialog,x=Ma.WarningRuleSelector;(function(){var d=com.kingdee.bos.qing.common;Ja=d.DomUtil;oa=d.EventListenerList;d=com.kingdee.bos.qing.framework.common;ka=d.MultilanguageManager.createPackageAccessor(Ma);d=com.kingdee.bos.qing.ui.component;Ha=d.MessageDialog;Sa=d.Toolbar;da=d.Menu;qa=d.MenuModel;Ga=d.MenuItemModel;ra=d.List;cb=d.SearchBox;Qa=d.Label;hb=d.AbstractModalDialog;Fb=d.Tips;d=com.kingdee.bos.qing.common.ui;pa=d.CommonIconUtil;d=com.kingdee.bos.qing.core;
Ab=d.Icons;Z=d.Facade;Wa=d.LongerDesignerOperationJudger;fb=d.SquareDesignerOperationJudger;Va=d.QingModelAssistant;d=com.kingdee.bos.qing.core.commonui;Ka=d.ErrorCodeParser;ab=d.DataDetailTable;d=com.kingdee.bos.qing.core.model;kb=d.Meta;La=d.MetaField;ob=d.ModelBook;d=com.kingdee.bos.qing.core.shared;ta=d.AdditionalFilterInfoParser;d=com.kingdee.bos.qing.core.controller;ja=d.CommandManager;Da=d.ActionChangeProperty;na=d.ActionInsertMetaField})();Ua.TYPE_LongPainting=1;Ua.TYPE_Square=16;Ua.MODE_1=
1;Ua.MODE_0N=16;Ua.MODE_1N=17;Ua.MASK_AtLeastOne=1;Ua.MASK_Multi=16;Vb.ITEM_MODEL="list-item-model";xa.GAP=6;xa.Child=function(){this.getJqUi=function(){throw Error("Override me.");};this.getMinHeight=function(){throw Error("Override me.");};this.getPerfectHeight=function(){throw Error("Override me.");};this.setRequestRelayoutListener=function(d){throw Error("Override me.");};this.isVisible=function(){return!0};this.afterRelayout=function(){};this.keepState=function(){};this.restoreState=function(){};
this.destroy=function(){}}})();(function(){function Ua(){var Ka=this,ab=[],kb=[];this.append=function(La,ob){ab.push(La);kb.push(ob)};this.isContainKey=function(La,ob){for(var ta=0;ta<ab.length;ta++)if(La==ab[ta])if(ob){if(kb[ta]&&kb[ta].getFieldSet()==ob)return!0}else return!0;return!1};this.isContainKeys=function(La,ob){for(var ta=0;ta<La.length;ta++)if(Ka.isContainKey(La[ta],ob))return!0;return!1};this.isContainFieldSet=function(La){for(var ob=0;ob<kb.length;ob++)if(kb[ob]&&La==kb[ob].getFieldSet())return!0;return!1};this.getTargetField=
function(La,ob){for(var ta=0;ta<ab.length;ta++)if(ob==ab[ta]&&kb[ta]&&La==kb[ta].getFieldSet())return kb[ta].getField();return null}}function Mb(Ka,ab){var kb=ab?ab:null,La;this.getFieldSet=function(){return Ka};this.getField=function(){return kb};this.setFieldSubEventTarget=function(ob){La=ob};this.getFieldSubEventTarget=function(){return La};this.toString=function(){return Ka.constructor.name+(La?"-"+La.toString():"")}}function ub(){Qa.call(this);var Ka=this,ab=this.protectedMethod,kb=new Ga,La=
ub.CHARTTYPE_TABLE,ob=new mb,ta=new mb,ja=new qb,Da=new sb,na=!1,l=!1,ba=null,W=null,ea;(function(){var b,e,c=function(a,q){ab.isListenerDumb()||(e||(e=new Ua),e.append(q,a),(a=a.getFieldSubEventTarget())&&a.getMetaFieldSubEventTarget()?(b&&clearTimeout(b),b=setTimeout(function(){la(e);e=null},50)):(la(e),e=null))};ob.addChangedListener(c);ta.addChangedListener(c);ja.addChangedListener(c);Da.addChangedListener(c)})();this.getBriefOutputableFieldsModel=function(){var b=[],e=[],c=function(a){for(var q=
0;q<a.getCount();q++){var u=a.get(q);(u.isDimension()?b:e).push(u)}};c(ta);c(ob);c(ja);c=new fb;c.setDimensionFields(b);c.setMeasureFields(e);return c};this.isExecutableContentEmpty=function(){return ob.isEmpty()&&ta.isEmpty()&&ja.isEmpty()&&Da.isEmpty()};this.clear=function(){var b=[],e=function(c){for(var a=[],q=0,u=c.getCount();q<u;q++)a.push(c.get(q));c=c.removeSome(a);return[a,c]};Ka.setListenerDumb(!0);b[0]=e(ob);b[1]=e(ta);b[2]=e(ja);b[3]=e(Da);Ka.setListenerDumb(!1);b[4]=na;b[5]=l;b[6]=ba;
b[7]=W;l=na=!1;W=ba=null;aa(ub.KEY_CLEAR);return b};this.undoClear=function(b){Ka.setListenerDumb(!0);var e=b[0];ob.undoRemoveSome(e[0],e[1]);e=b[1];ta.undoRemoveSome(e[0],e[1]);e=b[2];ja.undoRemoveSome(e[0],e[1]);e=b[3];Da.undoRemoveSome(e[0],e[1]);Ka.setListenerDumb(!1);na=b[4];l=b[5];ba=b[6];W=b[7];aa(ub.KEY_UNCLEAR)};this.setChartType=function(b){La=b;aa(ub.KEY_CHART_TYPE)};this.getChartType=function(){return La};this.getColumnAnalyticalFieldSet=function(){return ob};this.getRowAnalyticalFieldSet=
function(){return ta};this.getMarkFieldSet=function(){return ja};this.getFilterFieldSet=function(){return Da};this.setRowGrandTotal=function(b){na!=b&&(na=b,aa(ub.KEY_ROW_GRAND_TOTAL))};this.isRowGrandTotal=function(){return na};this.setColumnGrandTotal=function(b){l!=b&&(l=b,aa(ub.KEY_COLUMN_GRAND_TOTAL))};this.isColumnGrandTotal=function(){return l};this.setColumnsSortingLane=function(b){ba=b;aa(ub.KEY_SORTING_LANE)};this.getColumnsSortingLane=function(){return ba};this.setRowsSortingLane=function(b){W=
b;aa(ub.KEY_SORTING_LANE)};this.getRowsSortingLane=function(){return W};this.setLinkTargets=function(b){ea=b};this.getLinkTargets=function(){return ea};this.announceTreeExpanding=function(){aa(ub.KEY_TREE_EXPANDING)};this.addModelChangedListener=function(b){kb.addListener(b)};this.removeModelChangedListener=function(b){kb.removeListener(b)};var aa=function(b){var e=new Ua;e.append(b);la(e)},la=function(b){kb.fireEvent(function(e){e(b)})};this.getUsingMetaFields=function(b,e){return x(b,e,null)};this.createDependentMeta=
function(b,e){var c=b.getEliminationKeyMetaFields(),a=b.getDimensionNecessityMetaFields();c=c.concat(a);e=x(b,e,c);return b.createExecutingCopy(e)};var x=function(b,e,c){var a=ra.createSearchingUsingMetaFieldsTool(b),q=function(v){for(var y=0;y<v.getCount();y++){var C=v.get(y);a.checkField(C.getMetaField())}};q(ob);q(ta);q(ja);q(Da);if(e)for(q=0;q<e.length;q++){var u=b.searchMetaField(e[q]);u&&a.checkField(u)}if(c)for(q=0;q<c.length;q++)u=c[q],a.checkField(u);return a.getUsingMetaFields()};this.isAnyCalculatedFieldUsed=
function(b){var e=!1,c=function(a){for(var q=0;q<a.getCount();q++){var u=a.get(q);if(u.getMetaField().getFormula()&&(!b||b==u.getMetaField().getFullName())){e=!0;break}}};!e&&c(ob);!e&&c(ta);!e&&c(ja);!e&&c(Da);return e};this.howManyCalculatedFieldsUsed=function(){var b=0,e=function(c){for(var a=0;a<c.getCount();a++)c.get(a).getMetaField().getFormula()&&b++};e(ob);e(ta);e(ja);e(Da);return b};var d=function(b){var e={},c=[],a=function(y){for(var C=0;C<y.getCount();C++){var P=y.get(C),U=b?null:P.getId();
U?e[U]=!0:c.push(P)}};a(ob);a(ta);a(ja);a(Da);a=1;for(var q=0;q<c.length;q++){var u=c[q],v=null;do v="field"+a++;while(e[v]);u.setId(v);e[v]=!0}};this.toJsonObject=function(){d(!0);var b={};b.chartType=La;b.column=ob.toJsonObject();b.row=ta.toJsonObject();b.marks=[ja.toJsonObject()];b.filter=Da.toJsonObject();na&&(b.isRowGrandTotal=!0);l&&(b.isColumnGrandTotal=!0);ba&&(b.columnsSortingLane=ba.toJsonObject());W&&(b.rowsSortingLane=W.toJsonObject());ea&&(b.linkTargets=ea.toJsonObject());ab.sharedToJsonObject(b);
return b};this.fromJsonObject=function(b,e){La=b.chartType;ob.fromJsonObject(b.column,e);ta.fromJsonObject(b.row,e);Da.fromJsonObject(b.filter,e);ja.fromJsonObject(b.marks[0],e);na=b.isRowGrandTotal?!0:!1;l=b.isColumnGrandTotal?!0:!1;if(e=b.columnsSortingLane)ba=new Lb,ba.fromJsonObject(e);if(e=b.rowsSortingLane)W=new Lb,W.fromJsonObject(e);ea=null;if(e=b.linkTargets)ea=new Va,ea.fromJsonObject(e);d(!1);ab.sharedFromJsonObject(b)}}function mb(){var Ka=this,ab=[],kb=new Ga;this.isEmpty=function(){return 0==
ab.length};this.add=function(ja,Da){var na=Ka.getIndex(ja),l=-1;if(0<=na){var ba=Ka.protectedGetExtendInfo(na);l=Da>na?na:na+1}!Da&&0!=Da||0>Da?Ka.protectedAddItem(ja,ba):Ka.protectedInsertItem(Da,ja,ba);0<=l&&Ka.protectedRemoveItem(l,!1);La(mb.KEY_ADD,ja);return[l]};this.undoAdd=function(ja,Da){Da=Da[0];0<=Da?Ka.add(ja,Da):Ka.remove(ja)};this.replace=function(ja,Da){var na=Ka.get(ja),l=na.clone(),ba=Ka.protectedGetExtendInfo(ja),W=Ka.getIndex(Da);ja=0<=W&&W!=ja;var ea;ja&&(ea=Ka.protectedGetExtendInfo(W));
Ka.protectedReplaceItem(na,Da,ea);ja&&Ka.protectedRemoveItem(W,!0);La(mb.KEY_REPLACE,na);return[l,ba,W,ea]};this.undoReplace=function(ja,Da,na){var l=na[0],ba=na[1],W=na[2];na=na[3];0<=W&&Ka.protectedInsertItem(W,Da,na);ja=Ka.get(ja);Ka.protectedReplaceItem(ja,l,ba);La(mb.KEY_REPLACE,ja)};this.remove=function(ja){var Da=Ka.getIndex(ja);if(0>Da)throw Error("Sth must be wrong.");var na=Ka.protectedGetExtendInfo(Da);Ka.protectedRemoveItem(Da,!0);La(mb.KEY_REMOVE,ja);return[Da,na]};this.undoRemove=function(ja,
Da){Ka.protectedInsertItem(Da[0],ja,Da[1]);La(mb.KEY_ADD,ja)};this.removeSome=function(ja){for(var Da=[],na=ja.length-1;0<=na;na--){var l=Ka.getIndex(ja[na]),ba=Ka.protectedGetExtendInfo(l);Ka.protectedRemoveItem(l,!0);Da[na]=[l,ba]}La(mb.KEY_CHANGE);return Da};this.undoRemoveSome=function(ja,Da){for(var na=0;na<ja.length;na++)Ka.protectedInsertItem(Da[na][0],ja[na],Da[na][1]);La(mb.KEY_CHANGE)};this.keepLogicalOrder=function(){for(var ja=ab.slice(0),Da=[],na=[],l=!1,ba=!1,W=0;W<ab.length;W++){var ea=
ab[W];ea.isDimension()?(Da.push(ea),l&&(ba=!0)):ea.isMeasure()&&(l=!0,na.push(ea))}return ba?(ab=Da.concat(na),La(mb.KEY_CHANGE),[ja]):null};this.undoKeepLogicalOrder=function(ja){ja&&(ab=ja[0],La(mb.KEY_CHANGE))};this.getCount=function(){return ab.length};this.get=function(ja){return ab[ja]};this.getIndex=function(ja){for(var Da=0;Da<ab.length;Da++)if(ab[Da]==ja)return Da;return-1};this.getDimensionCount=function(){for(var ja=ab.length-1;0<=ja;ja--)if(ab[ja].isDimension())return ja+1;return 0};this.hasAnyDimension=
function(){return 0<Ka.getCount()&&Ka.get(0).isDimension()};this.addChangedListener=function(ja){kb.addListener(ja)};this.removeChangedListener=function(ja){kb.removeListener(ja)};var La=function(ja,Da,na){var l=new Mb(Ka,Da);na&&l.setFieldSubEventTarget(na);kb.fireEvent(function(ba){ba(l,ja)})};this.protectedAddItem=function(ja,Da){ab.push(ja);ja.addPropertyChangeListener(ob);ja.bindMetaEvent()};this.protectedInsertItem=function(ja,Da,na){ab.splice(ja,0,Da);Da.addPropertyChangeListener(ob);Da.bindMetaEvent()};
this.protectedReplaceItem=function(ja,Da,na){ja.setMetaField(Da.getMetaField());ja.bindMetaEvent();ja.setPartValue(Da.getPartValue());ja.setDateFormat(Da.getDateFormat());ja.setRole(Da.getRole(),Da.getAggregation())};this.protectedRemoveItem=function(ja,Da){ja=ab.splice(ja,1);Da&&ja[0].clearListener()};this.protectedGetExtendInfo=function(ja){return null};var ob=function(ja,Da){La(Da,null,ja)},ta=function(ja,Da){if(!ja.isDimension())return null;Da=ja.getMetaField();if(Da.getDataType()==cb.DT_DATE){ja=
ja.getPartValue();Da=[hb.PARTVALUE_DATE_YEAR,hb.PARTVALUE_DATE_QUARTER,hb.PARTVALUE_DATE_MONTH,hb.PARTVALUE_DATE_DAY];for(var na=0;na<Da.length;na++)if(Da[na]==ja)return[Da,na];return null}return(ja=Da.getTable())?ja.searchHierachy(Da):null};this.getInitialDateHierachyForField=function(ja,Da){if(ja.isMeasure()||ja.getMetaField().getDataType()!=cb.DT_DATE||ja.getPartValue())return null;var na=[hb.PARTVALUE_DATE_YEAR,hb.PARTVALUE_DATE_QUARTER,hb.PARTVALUE_DATE_MONTH,hb.PARTVALUE_DATE_DAY];for(--Da;0<=
Da;Da--){var l=ab[Da];if(l.getMetaField()==ja.getMetaField()){l=l.getPartValue();for(var ba=na.length-2;0<=ba;ba--)if(na[ba]==l)return na[ba+1]}}return hb.PARTVALUE_DATE_YEAR};this.getHierachyExpandableStates=function(ja){for(var Da=function(la,x,d){for(d+=1;d<x.length;d++)for(var b=x[d],e=0;e<ab.length;e++){var c=ab[e];if(c!=la&&c.getMetaField()==b)return!0}return!1},na=function(la,x,d){for(d+=1;d<x.length;d++)for(var b=x[d],e=0;e<ab.length;e++){var c=ab[e];if(c!=la&&c.getMetaField()==la.getMetaField()&&
b==c.getPartValue())return!0}return!1},l=[],ba=0;ba<ab.length;ba++){var W=ab[ba],ea=ta(W,ja),aa=ea?ea[0]:null;ea=ea?ea[1]:-1;aa&&ea!=aa.length-1?W.getMetaField().getDataType()==cb.DT_DATE?l[ba]=!na(W,aa,ea):l[ba]=!Da(W,aa,ea):l[ba]=null}return l};this.createFieldForHierachyExpanding=function(ja,Da){var na=ta(Da,ja);ja=na[0];var l=na[1];na=new Vb;Da.getMetaField().getDataType()==cb.DT_DATE?(ja=ja[l+1],na.setMetaField(Da.getMetaField()),na.setPartValue(ja)):na.setMetaField(ja[l+1]);na.setRole(hb.ROLE_DIMENSION);
na.setContinuous(!1);return na};this.searchFieldsForHierachyCollapsing=function(ja,Da){var na=[],l=ta(Da,ja),ba=l[0];l=l[1];for(var W=0;W<ab.length;W++){var ea=ab[W];if(ea!=Da){var aa=ta(ea,ja);if(aa){var la=aa[0];aa=aa[1];(Da.getMetaField().getDataType()==cb.DT_DATE?ea.getMetaField()==Da.getMetaField():ba==la)&&aa>l&&na.push(ea)}}}return na};this.toJsonObject=function(){for(var ja=[],Da=0;Da<ab.length;Da++)ja.push(ab[Da].toJsonObject());return{fields:ja}};this.fromJsonObject=function(ja,Da){ab.length=
0;ja=ja.fields;for(var na=0;na<ja.length;na++){var l=ja[na],ba=new Vb;ba.fromJsonObject(l,Da);Ka.protectedAddItem(ba)}};this.protectedMethod={fireChangedListener:La}}function qb(){mb.call(this);var Ka=this,ab=this.protectedMethod,kb=[];this.setFieldMatchingMarkType=function(na,l){var ba=Ka.getIndex(na);0<=ba&&(kb[ba]=l,ab.fireChangedListener(qb.KEY_FIELD_MARK_TYPE,na))};this.getFieldMatchingMarkType=function(na){na="number"==typeof na?parseInt(na):Ka.getIndex(na);return 0<=na?kb[na]:null};this.protectedGetExtendInfo=
function(na){return kb[na]};var La=this.protectedAddItem;this.protectedAddItem=function(na,l){La(na);kb.push(l?l:"")};var ob=this.protectedInsertItem;this.protectedInsertItem=function(na,l,ba){ob(na,l);kb.splice(na,0,ba?ba:"")};var ta=this.protectedRemoveItem;this.protectedRemoveItem=function(na,l){ta(na,l);kb.splice(na,1)};var ja=this.toJsonObject;this.toJsonObject=function(){for(var na=ja(),l=[],ba=0;ba<kb.length;ba++)l.push(kb[ba]);na.markTypes=l;return na};var Da=this.fromJsonObject;this.fromJsonObject=
function(na,l){Da(na,l);na=na.markTypes;for(l=0;l<na.length;l++)kb[l]=na[l]}}function sb(){mb.call(this);var Ka=this,ab=this.protectedMethod,kb=[];this.addSome=function(aa,la){for(var x=0;x<aa.length;x++)Ka.protectedAddItem(aa[x],la[x]);ab.fireChangedListener(mb.KEY_CHANGE)};this.setFilter=function(aa,la){aa=La(aa);0<=aa&&(kb[aa]=la,na(la,aa),ab.fireChangedListener(sb.KEY_FILTER,Ka.get(aa)))};this.getFilter=function(aa){aa=La(aa);return 0<=aa?kb[aa]:null};this.getFilterIndex=function(aa){for(var la=
0;la<kb.length;la++)if(kb[la]==aa)return la;return-1};var La=function(aa){return"number"==typeof aa?parseInt(aa):Ka.getIndex(aa)};this.protectedGetExtendInfo=function(aa){return kb[aa]};var ob=this.protectedAddItem;this.protectedAddItem=function(aa,la){ob(aa);aa=la?la:null;kb.push(aa);na(aa,kb.length-1)};var ta=this.protectedInsertItem;this.protectedInsertItem=function(aa,la,x){ta(aa,la);la=x?x:null;kb.splice(aa,0,la);na(la,aa)};var ja=this.protectedReplaceItem;this.protectedReplaceItem=function(aa,
la,x){ja(aa,la);aa=Ka.getIndex(aa);x=x?x:null;kb[aa]=x;na(x,aa)};var Da=this.protectedRemoveItem;this.protectedRemoveItem=function(aa,la){Da(aa,la);aa=kb.splice(aa,1);la&&((la=aa[0])&&la.removeValueChangedListener(l),la&&la.removePropertyChangeListener(ba))};var na=function(aa,la){aa&&(aa.addValueChangedListener(l),aa.addPropertyChangeListener(ba),la=Ka.get(la),aa.setAssociatedField(la))},l=function(aa){aa=Ka.get(Ka.getFilterIndex(aa));ab.fireChangedListener(sb.KEY_FILTER_VALUE,aa)},ba=function(aa,
la){la==Fb.KEY_ONSHOW&&(aa=Ka.get(Ka.getFilterIndex(aa)),ab.fireChangedListener(sb.KEY_FILTER_ONSHOW,aa))};this.getOnShowFilterCount=function(){for(var aa=0,la=0;la<Ka.getCount();la++)Ka.getFilter(la).isOnShow()&&aa++;return aa};this.copyFiltersForSetting=function(){for(var aa=[],la=0;la<Ka.getCount();la++){var x=Ka.getFilter(la).copyForSetting();aa.push(x)}return aa};this.applyFiltersFromSetting=function(aa){for(var la=0;la<Ka.getCount();la++)Ka.getFilter(la).applyFromSetting(aa[la])};this.toInsteadJson=
function(aa){for(var la=Ka.toJsonObject(),x=[],d=0;d<aa.length;d++){var b=aa[d].toJsonObject();x.push(b)}la.filters=x;return la};this.toPartJson=function(aa){var la=Ka.toJsonObject();0<=aa&&(la.fields.splice(aa,1),la.filters.splice(aa,1));return la};var W=this.toJsonObject;this.toJsonObject=function(){for(var aa=W(),la=[],x=0;x<kb.length;x++){var d=kb[x].toJsonObject();la.push(d)}aa.filters=la;return aa};var ea=this.fromJsonObject;this.fromJsonObject=function(aa,la){ea(aa,la);aa=aa.filters;kb=[];
for(la=0;la<aa.length;la++){var x=aa[la];switch(x.name){case Ab.FILTER_NAME:var d=new Ab;break;case Z.FILTER_NAME:d=new Z;break;case Wa.FILTER_NAME:d=new Wa;break;default:throw Error("Unknown filter name.");}d.fromJsonObject(x);kb[la]=d;na(d,la)}}}function Vb(){hb.call(this);var Ka=this.protectedMethod;this.bindMetaEvent=function(){Ka.bindMetaEvent()};this.protectedCreateInstance=function(){return new Vb}}function Lb(){var Ka=[],ab,kb=hb.SORT_ASC;this.getHeadValue=function(){return Ka};this.setHeadValue=
function(La){Ka=La};this.getMeasureIndex=function(){return ab||0===ab?ab:-1};this.setMeasureIndex=function(La){ab=La};this.getOrder=function(){return kb};this.setOrder=function(La){kb=La};this.toJsonObject=function(){for(var La={},ob=[],ta=0;ta<Ka.length;ta++)ob.push(Ka[ta].toJsonObject());La.headValue=ob;if(ab||0===ab)La.measure=ab;kb&&(La.order=kb);return La};this.fromJsonObject=function(La){Ka=[];for(var ob=La.headValue,ta=0;ta<ob.length;ta++){var ja=new pa;ja.fromJsonObject(ob[ta]);Ka.push(ja)}ab=
La.measure;kb=La.order}}function xa(){var Ka=this,ab=new Ga,kb,La,ob,ta,ja;this.getDesignerStatus=function(){!kb&&(kb=new eb);return kb};this.getExhibitionStatus=function(){!La&&(La=new Ma);return La};this.getChartConfig=function(){ob||(ob=new Ja,ob.addChangedListener(Da));return ob};this.addChartConfigChangedListener=function(na){ab.addListener(na)};this.removeChartConfigChangedListener=function(na){ab.removeListener(na)};var Da=function(na,l){ab.fireEvent(function(ba){ba(na,l?xa.KEY_EXECUTE:xa.KEY_REPAINT)})};
this._innerSetItems=function(na,l){La=na;ob=l};this.getExportSetting=function(){return ta};this.setExportSetting=function(na){ta=na};this.getExportConfig=function(){return ja};this.setExportConfig=function(na){ja=na};this.createExecutingCopy=function(na,l){var ba=La?La.getJsonTreeExpandStates()?!0:!1:!1;ba=l||ba?La:null;na=ob?ob.createExecutingCopy(na):null;var W=new xa;W._innerSetItems(ba,na);l&&W.setExportSetting(ta);l&&W.setExportConfig(ja);return W};this.toJsonObject=function(){var na={};kb&&
(na.designerStatus=JSON.stringify(kb.toJsonObject()));La&&(na.exhibitionStatus=La.toJsonObject());ob&&(na.chartConfig=Ka.getChartConfig().toJsonObject());ta&&(na.exportSetting=ta);ja&&(na.exportConfig=ja);return na};this.fromJsonObject=function(na){kb=new eb;var l=na.designerStatus;if(l)try{var ba=JSON.parse(l);kb.fromJsonObject(ba)}catch(W){window.console&&console.log(W)}else kb.setHide(!1);if(l=na.exhibitionStatus)La=new Ma,La.fromJsonObject(l);(l=na.chartConfig)&&Ka.getChartConfig().fromJsonObject(l);
ta=na.exportSetting;ja=na.exportConfig}}function eb(){var Ka=!0,ab=260,kb=320;this.isHide=function(){return Ka};this.setHide=function(La){Ka=La};this.getWidth=function(){return ab};this.setWidth=function(La){ab=La};this.getHeight=function(){return kb};this.setHeight=function(La){kb=La};this.toJsonObject=function(){var La={};La.hide=Ka;La.width=ab;La.height=kb;return La};this.fromJsonObject=function(La){Ka=La.hide;ab=La.width;kb=La.height}}function Ma(){var Ka,ab,kb,La,ob;this.setHeights=function(ta){Ka=
ta};this.getHeights=function(){return Ka};this.setWidths=function(ta){ab=ta};this.getWidths=function(){return ab};this.getPaintableWidths=function(){return La};this.getPaintableHeights=function(){return kb};this.collectPaintableStatus=function(ta,ja){kb=ta;La=ja};this.setJsonTreeExpandStates=function(ta){ob=ta};this.getJsonTreeExpandStates=function(){return ob};this.toJsonObject=function(){var ta={};Ka&&(ta.row=Ka);ab&&(ta.column=ab);ta.height=kb;ta.width=La;ob&&(ta.treeExpandState=ob);return ta};
this.fromJsonObject=function(ta){Ka=ta.row;ab=ta.column;kb=ta.height;La=ta.width;ob=ta.treeExpandState}}function Ja(){var Ka=this,ab=new Ga,kb=!1,La=!0,ob,ta,ja,Da=0,na=!1;this.addChangedListener=function(W){ab.addListener(W)};this.removeChangedListener=function(W){ab.removeListener(W)};var l=function(W){na|=W;clearTimeout(Da);Da=setTimeout(function(){ab.fireEvent(function(ea){ea(Ka,na)});na=!1},50)};this.setShowLabel=function(W){kb!=W&&(kb=W,l(!1))};this.isShowLabel=function(){return kb};this.setShowLegend=
function(W){La!=W&&(La=W,l(!0))};this.isShowLegend=function(){return La};this.getTableConfig=function(){ob||(ob=new ka,ob.setChangedListener(ba));return ob};this.getPieConfig=function(){ta||(ta=new Ha,ta.setChangedListener(ba));return ta};this.getRectTreeConfig=function(){ja||(ja=new Sa,ja.setChangedListener(ba));return ja};this.carry=function(W,ea,aa){ob=W;ta=ea;ja=aa};var ba=function(W,ea){l(ea)};this.backup=function(){var W=new Ja;W.setShowLabel(kb);W.setShowLegend(La);W.carry(Ka.getTableConfig().backup(),
Ka.getPieConfig().backup(),Ka.getRectTreeConfig().backup());return W};this.restore=function(W){Ka.setShowLabel(W.isShowLabel());Ka.setShowLegend(W.isShowLegend());Ka.getTableConfig().restore(W.getTableConfig());Ka.getPieConfig().restore(W.getPieConfig());Ka.getRectTreeConfig().restore(W.getRectTreeConfig())};this.createExecutingCopy=function(W){var ea=W==ub.CHARTTYPE_PIE?ta:null;W=W==ub.CHARTTYPE_TREEMAP?ja:null;var aa=new Ja;aa.setShowLabel(kb);aa.setShowLegend(La);aa.carry(ob,ea,W);return aa};this.toJsonObject=
function(){var W={};kb&&(W.showLabel=!0);!La&&(W.showLegend=!1);ob&&(W.table=ob.toJsonObject());ta&&(W.pie=ta.toJsonObject());ja&&(W.rectTree=ja.toJsonObject());return W};this.fromJsonObject=function(W){kb=!0===W.showLabel?!0:!1;La=!1===W.showLegend?!1:!0;var ea=W.table;ea&&Ka.getTableConfig().fromJsonObject(ea);(ea=W.pie)&&Ka.getPieConfig().fromJsonObject(ea);(W=W.rectTree)&&Ka.getRectTreeConfig().fromJsonObject(W)}}function oa(){var Ka=this,ab;this.setChangedListener=function(kb){ab=kb};this.protectedMethod=
{fireChanged:function(kb){ab&&ab(Ka,kb)}}}function ka(){oa.call(this);var Ka=this,ab=this.protectedMethod,kb=!1,La=ka.PML_ATCOLUMN,ob=!0,ta=!0;this.isTotalAhead=function(){return kb};this.setTotalAhead=function(ja){kb!=ja&&(kb=ja,ab.fireChanged(!0))};this.isParallelMeasureLayoutAtRow=function(){return La==ka.PML_ATROW};this.setParallelMeasureLayoutAtRow=function(ja){var Da=La;La=ja?ka.PML_ATROW:ka.PML_ATCOLUMN;La!=Da&&ab.fireChanged(!0)};this.isFrozenTop=function(){return ob};this.setFrozenTop=function(ja){ob!=
ja&&(ob=ja,ab.fireChanged(!1))};this.isFrozenLeft=function(){return ta};this.setFrozenLeft=function(ja){ta!=ja&&(ta=ja,ab.fireChanged(!1))};this.backup=function(){var ja=new ka;ja.setTotalAhead(kb);ja.setParallelMeasureLayoutAtRow(Ka.isParallelMeasureLayoutAtRow());ja.setFrozenTop(ob);ja.setFrozenLeft(ta);return ja};this.restore=function(ja){Ka.setTotalAhead(ja.isTotalAhead());Ka.setParallelMeasureLayoutAtRow(ja.isParallelMeasureLayoutAtRow());Ka.setFrozenTop(ja.isFrozenTop());Ka.setFrozenLeft(ja.isFrozenLeft())};
this.toJsonObject=function(){var ja={};kb&&(ja.totalAhead=!0);ja.parallelMeasureLayout=La;!ob&&(ja.frozenTop=!1);!ta&&(ja.frozenLeft=!1);return ja};this.fromJsonObject=function(ja){kb=ja.totalAhead?!0:!1;var Da=ja.parallelMeasureLayout;Da&&(La=Da);ob=!1!==ja.frozenTop;ta=!1!==ja.frozenLeft}}function Ha(){oa.call(this);var Ka=this,ab=this.protectedMethod,kb=0,La=Ha.LABEL_NUMBER,ob=!1;this.getTopN=function(){return kb};this.setTopN=function(ta){kb!=ta&&(kb=ta,ab.fireChanged(!0))};this.getLabelType=
function(){return La};this.setLabelType=function(ta){La!=ta&&(La=ta,ab.fireChanged(!1))};this.isHideNegative=function(){return ob};this.setHideNegative=function(ta){ob!=ta&&(ob=ta,ab.fireChanged(!0))};this.backup=function(){var ta=new Ha;ta.setTopN(kb);ta.setLabelType(La);ta.setHideNegative(ob);return ta};this.restore=function(ta){Ka.setTopN(ta.getTopN());Ka.setLabelType(ta.getLabelType());Ka.setHideNegative(ta.isHideNegative())};this.toJsonObject=function(){var ta={};kb&&(ta.topN=kb);La&&(ta.labelType=
La);ob&&(ta.hideNegative="true");return ta};this.fromJsonObject=function(ta){var ja=ta.topN;kb=ja?parseInt(ja):0;La=(ja=ta.labelType)?parseInt(ja):0;ob=ta.hideNegative?!0:!1}}function Sa(){oa.call(this);var Ka=this,ab=this.protectedMethod,kb=!1;this.isHideNegative=function(){return kb};this.setHideNegative=function(La){kb!=La&&(kb=La,ab.fireChanged(!0))};this.backup=function(){var La=new Sa;La.setHideNegative(kb);return La};this.restore=function(La){Ka.setHideNegative(La.isHideNegative())};this.toJsonObject=
function(){var La={};kb&&(La.hideNegative="true");return La};this.fromJsonObject=function(La){kb=La.hideNegative?!0:!1}}function da(Ka){var ab,kb;this.isNumberAxis=function(){return Ka==da.TYPE_NUMBER};this.isContinueAxis=function(){return Ka==da.TYPE_CONTINUE};this.setDirection=function(La){ab=La};this.getDirection=function(){return ab};this.setDisplayName=function(La){kb=La};this.getDisplayName=function(){return kb}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee=
{});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.longer&&(com.kingdee.bos.qing.longer={});"undefined"==typeof com.kingdee.bos.qing.longer.model&&(com.kingdee.bos.qing.longer.model={});var qa=com.kingdee.bos.qing.longer.model;qa.AnalyticalModel=ub;qa.AnalyticalFieldSet=mb;qa.MarkFieldSet=qb;qa.FilterFieldSet=sb;qa.AnalyticalField=Vb;qa.SortingLane=Lb;qa.PieChartConfig=Ha;qa.AnalyticalPreferences=
xa;qa.ChartContext=function(){var Ka=!0,ab=null,kb=null,La;this.setLandscape=function(ob){Ka=ob};this.isLandscape=function(){return Ka};this.setSecondaryType=function(ob){ab=ob};this.getSecondaryType=function(){return ab};this.setAxisModel=function(ob){kb=ob};this.getAxisModel=function(){return kb};this.isForAxis=function(){return kb?!0:!1};this.setChatConfig=function(ob){La=ob};this.getChartConfig=function(){return La};this.isShowLabel=function(){return La?La.isShowLabel():!1}};qa.AxisModel=da;var Ga,
ra,cb,Qa,hb,Fb,pa,Ab,Z,Wa,fb,Va;(function(){var Ka=com.kingdee.bos.qing.common;Ga=Ka.EventListenerList;Ka=com.kingdee.bos.qing.core.model;ra=Ka.Meta;cb=Ka.MetaField;Qa=Ka.AbstractQingModel;hb=Ka.AbstractAnalyticalField;Fb=Ka.AbstractFilter;pa=Ka.ExecutableValue;Ab=Ka.DiscreteFilter;Z=Ka.ContinuousFilter;Wa=Ka.ContinuousDateFilter;fb=Ka.BriefOutputableFields;Va=Ka.LinkTargets})();ub.KEY_CLEAR="clearAll";ub.KEY_UNCLEAR="unclearAll";ub.KEY_CHART_TYPE="chartType";ub.KEY_ROW_GRAND_TOTAL="isRowGrandTotal";
ub.KEY_COLUMN_GRAND_TOTAL="isColumnGrandTotal";ub.KEY_SORTING_LANE="sortingLane";ub.KEY_TREE_EXPANDING="treeExpanding";ub.CHARTTYPE_TABLE="Table";ub.CHARTTYPE_HEATMAP="HeatMap";ub.CHARTTYPE_PIE="Pie";ub.CHARTTYPE_LINE="Line";ub.CHARTTYPE_MLINE="MultiLine";ub.CHARTTYPE_AREA="Area";ub.CHARTTYPE_BAR="Bar";ub.CHARTTYPE_STACKBAR="StackBar";ub.CHARTTYPE_TREEMAP="TreeMap";ub.CHARTTYPE_SCATTER="Scatter";mb.KEY_ADD="add";mb.KEY_REMOVE="remove";mb.KEY_REPLACE="replace";mb.KEY_CHANGE="change";qb.KEY_FIELD_MARK_TYPE=
"setFieldMarkType";qb.TYPE_LABEL="label";qb.TYPE_COLOR="color";qb.TYPE_SIZE="size";qb.TYPE_ANGLE="angle";qb.TYPE_BLANK="blank";sb.KEY_FILTER="setFilter";sb.KEY_FILTER_VALUE="filterValueChanged";sb.KEY_FILTER_ONSHOW="filterOnShowChanged";Vb.InvalidPrompt_LEVEL_POSITION_WRONG=100;xa.KEY_REPAINT="repaint";xa.KEY_EXECUTE="execute";ka.PML_ATCOLUMN="AtColumn";ka.PML_ATROW="AtRow";Ha.LABEL_NAME=1;Ha.LABEL_NUMBER=2;Ha.LABEL_PERCENT=4;da.TYPE_NUMBER="number";da.TYPE_CONTINUE="continue";da.TYPE_DISCRETE="discrete";
da.DIR_TOP="top";da.DIR_BOTTOM="bottom";da.DIR_LEFT="left";da.DIR_RIGHT="right"})();(function(){"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.longer&&(com.kingdee.bos.qing.longer={});"undefined"==typeof com.kingdee.bos.qing.longer.controller&&(com.kingdee.bos.qing.longer.controller={});var Ua=com.kingdee.bos.qing.longer.controller,Mb,ub,mb,qb;(function(){var sb=com.kingdee.bos.qing.framework.common;
Mb=sb.MultilanguageManager.createPackageAccessor(Ua);sb=com.kingdee.bos.qing.core.controller;ub=sb.AbstractAction;mb=sb.AbstractActionAppendAllNecessaryDimensions;sb=com.kingdee.bos.qing.longer.model;qb=sb.AnalyticalField})();Ua.ActionClearModel=function(){ub.call(this);var sb,Vb;this.getCaption=function(){return Mb.get("clearModel","\u6e05\u9664")};this.setValue=function(Lb){sb=Lb};this.perform=function(){Vb=sb.clear()};this.unperform=function(){sb.undoClear(Vb)}};Ua.ActionAddAnalyticalField=function(sb){ub.call(this);
var Vb,Lb,xa,eb;this.getCaption=function(){return eb};this.setValue=function(Ma,Ja){Vb=Ma;Lb=Ja;eb=0<=sb.getIndex(Vb)?Mb.get("moveField","\u79fb\u52a8"):Mb.get("addField","\u6dfb\u52a0");eb+=Vb.getComplexText()};this.perform=function(){xa=sb.add(Vb,Lb)};this.unperform=function(){sb.undoAdd(Vb,xa)}};Ua.ActionReplaceAnalyticalField=function(sb){ub.call(this);var Vb,Lb,xa;this.getCaption=function(){return Mb.get("replaceField","\u66ff\u6362\u5206\u6790\u5b57\u6bb5")};this.setValue=function(eb,Ma){Lb=
eb;Vb=Ma};this.perform=function(){xa=sb.replace(Lb,Vb)};this.unperform=function(){sb.undoReplace(Lb,Vb,xa)}};Ua.ActionRemoveAnalyticalField=function(sb){ub.call(this);var Vb,Lb;this.getCaption=function(){return Mb.get("removeField","\u5220\u9664")+Vb.getComplexText()};this.setValue=function(xa){Vb=xa};this.perform=function(){Lb=sb.remove(Vb)};this.unperform=function(){sb.undoRemove(Vb,Lb)}};Ua.ActionKeepLogicalOrder=function(sb){ub.call(this);var Vb;this.perform=function(){Vb=sb.keepLogicalOrder()};
this.unperform=function(){sb.undoKeepLogicalOrder(Vb)}};Ua.ActionSetMarkType=function(sb){ub.call(this);var Vb=this,Lb,xa;this.getCaption=function(){return Mb.get("setMarkType","\u8bbe\u7f6e#1\u503c\u5c55\u73b0\u65b9\u5f0f").replace("#1",Lb.getComplexText())};this.setValue=function(eb,Ma){Lb=eb;xa=Ma};this.perform=function(){var eb=sb.getFieldMatchingMarkType(Lb);sb.setFieldMatchingMarkType(Lb,xa);xa=eb};this.unperform=function(){Vb.perform()}};Ua.ActionSetFilter=function(sb){ub.call(this);var Vb=
this,Lb,xa;this.setValue=function(eb,Ma){Lb=eb;xa=Ma};this.perform=function(){var eb=sb.getFilter(Lb);sb.setFilter(Lb,xa);xa=eb};this.unperform=function(){Vb.perform()}};Ua.ActionExpandHierachy=function(sb){ub.call(this);var Vb,Lb,xa,eb;this.getCaption=function(){return Mb.get("expandHierachy","\u5c55\u5f00")+Vb.getComplexText()};this.setValue=function(Ma,Ja){Vb=Ja;xa=sb.getIndex(Ja)+1;Lb=sb.createFieldForHierachyExpanding(Ma,Ja)};this.perform=function(){eb=sb.add(Lb,xa)};this.unperform=function(){sb.undoAdd(Lb,
eb)}};Ua.ActionCollapseHierachy=function(sb){ub.call(this);var Vb,Lb,xa;this.getCaption=function(){return Mb.get("collapseHierachy","\u6536\u8d77")+Vb.getComplexText()};this.setValue=function(eb,Ma){Vb=Ma;Lb=sb.searchFieldsForHierachyCollapsing(eb,Ma)};this.perform=function(){xa=sb.removeSome(Lb)};this.unperform=function(){sb.undoRemoveSome(Lb,xa)}};Ua.ActionSetAllSelectedForDiscreteFilter=function(sb){ub.call(this);var Vb,Lb;this.setCaption=function(xa){Vb=xa};this.getCaption=function(){return Vb};
this.perform=function(){Lb=sb.cloneAllSelectedValue();sb.setFullValue(!0)};this.unperform=function(){sb.resetAllSelectedValue(Lb)}};Ua.ActionAppendAllNecessaryDimensions=function(){mb.call(this);var sb=this.protectedMethod,Vb,Lb,xa;this.setValue=function(eb,Ma){Vb=Ma.getFilterFieldSet();Lb=[];xa=[];Ma=Ma.getUsingMetaFields(eb);sb.visitMissingNecessaryDimensions(eb,Ma,function(Ja){var oa=new qb;Lb.push(oa);xa.push(Ja);return oa})};this.perform=function(){Vb.addSome(Lb,xa)};this.unperform=function(){Vb.removeSome(Lb)}}})();(function(){function Ua(x){var d=this,b,e,c;this.getName=function(){return x};this.getText=function(){return b};this.getIconFileName=function(){return e};this.getSuppliedMarks=function(){throw Error("Override me.");};this.getCardsDynamicInfo=function(){c||(c=new Vb,c.getColumnCardInfo().setTitle(Qa.get("columnCardTitle","\u5217")),c.getRowCardInfo().setTitle(Qa.get("rowCardTitle","\u884c")),c.getMarkCardInfo().setTitle(Qa.get("markCardTitle","\u503c\u5c55\u73b0\u65b9\u5f0f")));return c};this.getCardsOperatingPrompt=
function(y){return new sb(null,null,null)};this.smartChangeModel=function(y,C,P){throw Error("Override me.");};this.smartDropField=function(y,C,P,U){};this.rowColReverse=function(y,C){C.compositeStart(Qa.get("rowColReverse","\u884c\u5217\u7f6e\u6362"));d.protectedRowColReverseImpl(y,C);C.compositeEnd()};this.isFieldValid=function(y,C,P){};this.isCellMeasurable=function(y){return!1};this.getSuggestedSize=function(y,C){throw Error("Override me.");};this.createJsonCellParser=function(){throw Error("Override me.");
};this.exhibit=function(y,C,P,U,fa,wa,ma){throw Error("Override me.");};this.isRowColReverseEnable=function(y){var C=y.getRowAnalyticalFieldSet();y=y.getColumnAnalyticalFieldSet();return 0<C.getCount()||0<y.getCount()};this.protectedRowColReverseImpl=function(y,C){var P=y.getRowAnalyticalFieldSet();y=y.getColumnAnalyticalFieldSet();for(var U=[],fa=[],wa=0;wa<P.getCount();wa++)U.push(P.get(wa));for(wa=0;wa<y.getCount();wa++)fa.push(y.get(wa));for(wa=0;wa<P.getCount();wa++){var ma=new kb(P);ma.setValue(P.get(wa));
C.perform(ma)}for(wa=0;wa<y.getCount();wa++)ma=new kb(y),ma.setValue(y.get(wa)),C.perform(ma);for(wa=0;wa<U.length;wa++)ma=new ab(y),ma.setValue(U[wa]),C.perform(ma);for(wa=0;wa<fa.length;wa++)ma=new ab(P),ma.setValue(fa[wa]),C.perform(ma)};var a=function(y){return y.getMarkFieldSet()},q=function(y,C,P,U,fa){for(var wa=0,ma=C.getCount();wa<ma;wa++){var Ea=C.get(wa);if(C instanceof Z){var Xa=C.getFieldMatchingMarkType(wa);for(var bb=!1,Jb=0;Jb<P.length;Jb++){var Ya=P[Jb][1];if(P[Jb][0]==Xa&&Ya==Ea.getRole()){bb=
!0;break}}bb||(Xa=null)}Ea.isDimension()?U.push(new ub(Ea,Xa)):Ea.isMeasure()&&fa.push(new ub(Ea,Xa));bb=new kb(C);bb.setValue(Ea);y.perform(bb)}},u=function(y,C,P,U){for(var fa=0;fa<C.length;fa++){var wa=C[fa];if(wa instanceof ub){var ma=wa.getField();var Ea=wa.getExtendInfo()}else ma=wa;if(!U||ma.getMetaField().getDataType()==U){wa=y;for(var Xa=Ea,bb=!1,Jb=0;Jb<wa.length;Jb++){var Ya=wa[Jb].getField();if(Ya.getMetaField()==ma.getMetaField()&&Ya.getRole()==ma.getRole())if(Ya.isMeasure()){if(Ya.getAggregation()==
ma.getAggregation()){bb=!0;break}}else{bb=!0;break}}bb?wa=!1:(wa.push(new ub(ma,Xa)),wa=!0);if(P&&wa){C.splice(fa,1);break}}}},v=function(y,C){for(var P=0;P<y.length;P++)if(y[P].getExtendInfo()==C)return P;return-1};this.protectedMethod={setText:function(y){b=y},setIconFileName:function(y){e=y},getCommonClickListener:function(y,C,P){return function(U,fa,wa){C.toggleMenu(U,fa)&&P.setMouseStateLocked(!0);U=y.getJsonForDetailSearching(wa);C.setDetailSearchingParam(U)}},getCommonTooltipsListener:function(y,
C,P){var U=function(){P.setMouseStateLocked(!1)};return function(fa,wa,ma){if(fa&&y){C.setPosition(fa,wa);fa=y.getDisplayShedTitle();wa=[];for(var Ea=0;Ea<fa.length;Ea++){var Xa=fa[Ea];wa.push({key:Xa.key,value:Xa.value})}wa=wa.concat(ma);C.setContent(wa);C.hookHideAnnouncer(U)}else C.hide()}},getMarkFieldSet:a,setCardsTitle:function(y,C,P){var U=d.getCardsDynamicInfo();y&&U.getColumnCardInfo().setTitle(y);C&&U.getRowCardInfo().setTitle(C);P&&U.getMarkCardInfo().setTitle(P)},isMeasureExist:function(y){for(var C=
y.getCount()-1;0<=C;C--){var P=y.get(C);if(P.isMeasure()&&!P.getInvalidPrompt())return!0}return!1},lookupMeasures:function(y,C){for(var P=0;P<y.getCount();P++){var U=y.get(P);U.isMeasure()&&C(U)}},lookupMarks:function(y,C,P){for(var U=0;U<y.getCount();U++){var fa=y.get(U);y.getFieldMatchingMarkType(U)==C&&P(fa)}},isMarkExist:function(y,C){for(var P=0;P<y.getCount();P++)if(y.getFieldMatchingMarkType(P)==C)return!0;return!1},setFieldInvalid:function(y,C){var P=new Fb.InvalidPrompt;P.setLevel(Ab.InvalidPrompt_LEVEL_POSITION_WRONG,
C?!0:!1);P.setPromptText(C);y.setInvalidPrompt(P)},washFields:function(y,C,P){var U=[],fa=[];q(y,C.getRowAnalyticalFieldSet(),P,U,fa);var wa=[],ma=[];q(y,C.getColumnAnalyticalFieldSet(),P,wa,ma);var Ea=[],Xa=[];q(y,a(C),P,Ea,Xa);y=new mb;y.setWashedFields(U,fa,wa,ma,Ea,Xa);return y},mergeAllNoDuplicated:function(y,C){u(y,C,!1)},mergeOnlyOneNoDuplicated:function(y,C,P){u(y,C,!0,P)},searchMark:function(y,C){C=v(y,C);return 0<=C?y[C]:null},pickupMark:function(y,C){C=v(y,C);if(0<=C){var P=y[C];y.splice(C,
1);return P}return null},patchMark:function(y,C,P){for(var U=0;U<y.length;U++){var fa=y[U];if(!fa.getExtendInfo()&&(fa.setExtendInfo(C),P))break}},appendFields:function(y,C,P){for(var U=0;U<C.length;U++){var fa=C[U],wa=fa.getField(),ma=new ab(P);ma.setValue(wa);y.perform(ma);P instanceof Z&&(fa=fa.getExtendInfo(),ma=new La(P),ma.setValue(wa,fa),y.perform(ma))}}}}function Mb(){this.isRowColReverseEnable=function(x){var d=x.getRowAnalyticalFieldSet();x=x.getColumnAnalyticalFieldSet();for(var b=[],e=
[],c=0;c<d.getCount();c++){var a=d.get(c);a.isDimension()&&b.push(a)}for(c=0;c<x.getCount();c++)a=x.get(c),a.isDimension()&&e.push(a);return 0<b.length||1<e.length};this.protectedRowColReverseImpl=function(x,d){var b=x.getRowAnalyticalFieldSet();x=x.getColumnAnalyticalFieldSet();for(var e=[],c=[],a=0;a<b.getCount();a++){var q=b.get(a);q.isDimension()&&e.push(q)}for(a=0;a<x.getCount();a++)q=x.get(a),q.isDimension()&&c.push(q);0<c.length&&c.pop();for(a=0;a<e.length;a++)q=new kb(b),q.setValue(e[a]),
d.perform(q);for(a=0;a<c.length;a++)q=new kb(x),q.setValue(c[a]),d.perform(q);for(a=e.length-1;0<=a;a--)q=new ab(x),q.setValue(e[a],0),d.perform(q);for(a=c.length-1;0<=a;a--)q=new ab(b),q.setValue(c[a],0),d.perform(q)}}function ub(x,d){var b=d;this.getField=function(){return x};this.getExtendInfo=function(){return b};this.setExtendInfo=function(e){b=e}}function mb(){var x,d,b,e,c,a;this.setWashedFields=function(q,u,v,y,C,P){x=q;d=u;b=v;e=y;c=C;a=P};this.getRowDimensionWrap=function(){return x};this.getRowMesaureWrap=
function(){return d};this.getColumnDimensionWrap=function(){return b};this.getColumnMesaureWrap=function(){return e};this.getMarkDimensionWrap=function(){return c};this.getMarkMesaureWrap=function(){return a}}function qb(){var x=this,d,b,e,c,a=-1,q=-1,u=-1,v=null,y=null;this.getMinWidth=function(){return d};this.getMaxWidth=function(){return b};this.getMinHeight=function(){return e};this.getMaxHeight=function(){return c};this.setSize=function(C,P){x.setMinSize(C,P);x.setMaxSize(C,P)};this.setMinSize=
function(C,P){d=C;e=P};this.setMaxSize=function(C,P){b=C;c=P};this.getWidthHeightRatio=function(){return a};this.setWidthHeightRatio=function(C){a=C};this.getLeftAxisColumnWidth=function(){return q};this.setLeftAxisColumnWidth=function(C){q=C};this.getTopAxisRowHeight=function(){return u};this.setTopAxisRowHeight=function(C){u=C};this.isLeftAsNumberAxis=function(){return v};this.setLeftAsNumberAxis=function(C){v=C};this.isTopAsNumberAxis=function(){return y};this.setTopAsNumberAxis=function(C){y=
C}}function sb(x,d,b){this.getColumnCardPrompt=function(){return x};this.getRowCardPrompt=function(){return d};this.getMarkCardPrompt=function(){return b}}function Vb(){function x(){var c;this.setTitle=function(a){c=a};this.getTitle=function(){return c}}var d=new x,b=new x,e=new x;this.getColumnCardInfo=function(){return d};this.getRowCardInfo=function(){return b};this.getMarkCardInfo=function(){return e}}function Lb(){var x=this,d;this.parseCommonCell=function(b){d=null;b&&(d=x.parseExhibitModel(b))};
this.getCommonModel=function(){return d};this.parseAxisModel=function(b){throw Error("Override me.");};this.parseExhibitModel=function(b){throw Error("Override me.");}}function xa(){Lb.call(this);var x=this;this.parseAxisModel=function(b){var e=b.title,c=new fb(b.axis);e&&c.setDisplayName(e);switch(b.dir){case "top":c.setDirection(fb.DIR_TOP);break;case "bottom":c.setDirection(fb.DIR_BOTTOM);break;case "left":c.setDirection(fb.DIR_LEFT);break;case "right":c.setDirection(fb.DIR_RIGHT)}return c};this.parseExhibitModel=
function(b){return d(b?b.chart:null)};var d=function(b){b?b=ob.createFromJson(b):(b=new ob,b.setCategories([]),b.setSeries([]));var e=b,c=x.getCommonModel();c&&e.merge(c);return b};this.protectedMethod={parseChartModelImpl:d}}function eb(){Lb.call(this);this.parseExhibitModel=function(x){return[ta.createFromJson(x?x.tree:{root:[]}),x]}}function Ma(){function x(){Lb.call(this);var b=this;this.parseExhibitModel=function(e){if(e){var c=b.getCommonModel();if(c){var a=c.colorTitle;a&&(e.colorTitle=a);
(c=c.title)&&(e.title=c)}}return e}}Ua.call(this,pa.CHARTTYPE_TABLE);var d=this.protectedMethod;d.setIconFileName("chart_table");d.setText(Qa.get("table","\u8868\u683c"));d.setCardsTitle(null,null,Qa.get("markCardTitleForTable","\u6570\u503c\u533a\u57df"));this.getSuppliedMarks=function(){return[Z.TYPE_LABEL,Z.TYPE_COLOR]};this.smartDropField=function(b,e,c,a){var q=d.getMarkFieldSet(b);e==q?(!c.isMeasure()&&c.getMetaField().isCanAsMeasure()&&(b=c.getMetaField().getDataType()==hb.DT_NUMBER,e=new Va(c),
e.setValue(b?Fb.AGGREGATION_SUM:Fb.AGGREGATION_COUNT),a.perform(e),b=new Ka(c),b.setValue(null),a.perform(b)),q=new La(q),q.setValue(c,Z.TYPE_LABEL),a.perform(q)):e!=b.getColumnAnalyticalFieldSet()&&e!=b.getRowAnalyticalFieldSet()||c.isDimension()||!c.getMetaField().isCanAsDimension()||(e=new Va(c),e.setValue(Fb.ROLE_DIMENSION),a.perform(e),c.getMetaField().getDataType()!=hb.DT_DATE||c.getPartValue()||(b=new Ka(c),b.setValue(Fb.PARTVALUE_DATE_YEAR),a.perform(b)))};this.smartChangeModel=function(b,
e,c){var a=d.washFields(e,b,[[Z.TYPE_LABEL,Fb.ROLE_MEASURE],[Z.TYPE_COLOR,Fb.ROLE_MEASURE]]),q=a.getRowDimensionWrap(),u=a.getRowMesaureWrap(),v=a.getColumnDimensionWrap(),y=a.getColumnMesaureWrap(),C=a.getMarkDimensionWrap();a=a.getMarkMesaureWrap();var P=c.getDimensionSelecteds();c=c.getMeasureSelecteds();1<q.length+C.length+P.length&&(0==v.length&&d.mergeOnlyOneNoDuplicated(v,C),0==v.length&&d.mergeOnlyOneNoDuplicated(v,P));d.mergeAllNoDuplicated(q,C);d.mergeAllNoDuplicated(q,P);d.mergeAllNoDuplicated(a,
u);d.mergeAllNoDuplicated(a,y);d.mergeAllNoDuplicated(a,c);d.patchMark(a,Z.TYPE_LABEL);d.appendFields(e,q,b.getRowAnalyticalFieldSet());d.appendFields(e,v,b.getColumnAnalyticalFieldSet());d.appendFields(e,a,d.getMarkFieldSet(b))};this.getCardsOperatingPrompt=function(b){var e=null,c=null,a=null;0==b.getRowAnalyticalFieldSet().getCount()+b.getColumnAnalyticalFieldSet().getCount()&&(e=c=Qa.get("tryDragTextField","\u5c1d\u8bd5\u5c06\u6587\u672c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));0==d.getMarkFieldSet(b).getCount()&&
(a=Qa.get("dragNumField","\u5c06\u6570\u503c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));return new sb(c,e,a)};this.isFieldValid=function(b,e,c){if(e==b.getRowAnalyticalFieldSet()||e==b.getColumnAnalyticalFieldSet()){if(null!=c&&c.isMeasure())return d.setFieldInvalid(c,Qa.get("tableRowColCardPrompt","\u5f53\u56fe\u8868\u7c7b\u578b\u4e3a\u201c\u8868\u683c\u201d\uff0c\u884c/\u5217\u4e0a\u4e0d\u80fd\u6709\u5ea6\u91cf\u3002")),!1}else if(e==d.getMarkFieldSet(b)){b=!0;for(var a=c=0;a<e.getCount();a++){var q=
e.get(a),u=e.getFieldMatchingMarkType(q);q.isDimension()?(d.setFieldInvalid(q,Qa.get("tableMarkCardPrompt","\u6570\u503c\u533a\u57df\u4e2d\u4e0d\u80fd\u6709\u7ef4\u5ea6\uff0c\u5c1d\u8bd5\u62d6\u5230\u884c/\u5217\u4e0a\u3002")),b=!1):u==Z.TYPE_COLOR&&(c++,1==c?d.setFieldInvalid(q,null):(d.setFieldInvalid(q,Qa.get("onlyOneFieldForColor","\u53ea\u80fd\u6709\u4e00\u4e2a\u5b57\u6bb5\u5c55\u73b0\u4e3a\u989c\u8272\u3002")),b=!1))}return b}return!0};this.isCellMeasurable=function(b){return!0};this.getSuggestedSize=
function(b,e){b=new qb;b.setSize(120,24);return b};this.createJsonCellParser=function(){return new x};this.exhibit=function(b,e,c,a,q,u,v){a&&(b.onmousemove=function(y){v.setPosition(y.clientX,y.clientY);y=[];for(var C=u.getDisplayShedTitle(),P=0;P<C.length;P++){var U=C[P];y.push({key:U.key,value:U.value})}y.push({key:a.title,value:a.text});a.colorTitle&&a.colorText&&y.push({key:a.colorTitle,value:a.colorText});v.setContent(y);b.style.cursor="pointer"},$(b).on("mouseleave",function(y){v.hide()}),
b.onclick=function(y){v.toggleMenu(y.clientX,y.clientY);y=u.getJsonForDetailSearching();v.setDetailSearchingParam(y)})}}function Ja(){function x(){Lb.call(this);var b=this;this.parseExhibitModel=function(e){if(e){var c=b.getCommonModel();if(c){var a=c.colorTitle;a&&(e.colorTitle=a);(c=c.sizeTitle)&&(e.sizeTitle=c)}}return e}}Ua.call(this,pa.CHARTTYPE_HEATMAP);var d=this.protectedMethod;d.setIconFileName("chart_heatmap");d.setText(Qa.get("heatmap","\u70ed\u529b\u56fe"));this.getSuppliedMarks=function(){return[Z.TYPE_SIZE,
Z.TYPE_COLOR]};this.smartDropField=function(b,e,c,a){b=d.getMarkFieldSet(b);e==b&&(c.isMeasure()?(e=new La(b),d.isMarkExist(b,Z.TYPE_SIZE)?d.isMarkExist(b,Z.TYPE_COLOR)?e.setValue(c,Z.TYPE_SIZE):e.setValue(c,Z.TYPE_COLOR):e.setValue(c,Z.TYPE_SIZE)):(e=new La(b),e.setValue(c,Z.TYPE_SIZE)),a.perform(e))};this.smartChangeModel=function(b,e,c){var a=d.washFields(e,b,[[Z.TYPE_SIZE,Fb.ROLE_MEASURE],[Z.TYPE_COLOR,Fb.ROLE_MEASURE]]),q=a.getRowDimensionWrap(),u=a.getRowMesaureWrap(),v=a.getColumnDimensionWrap(),
y=a.getColumnMesaureWrap(),C=a.getMarkDimensionWrap();a=a.getMarkMesaureWrap();var P=c.getDimensionSelecteds();c=c.getMeasureSelecteds();1<q.length+C.length+P.length&&(0==v.length&&d.mergeOnlyOneNoDuplicated(v,C),0==v.length&&d.mergeOnlyOneNoDuplicated(v,P));d.mergeAllNoDuplicated(q,C);d.mergeAllNoDuplicated(q,P);d.mergeAllNoDuplicated(a,u);d.mergeAllNoDuplicated(a,y);d.mergeAllNoDuplicated(a,c);d.searchMark(a,Z.TYPE_SIZE)||d.patchMark(a,Z.TYPE_SIZE,!0);d.searchMark(a,Z.TYPE_COLOR)||d.patchMark(a,
Z.TYPE_COLOR,!0);d.patchMark(a,Z.TYPE_SIZE);d.appendFields(e,q,b.getRowAnalyticalFieldSet());d.appendFields(e,v,b.getColumnAnalyticalFieldSet());d.appendFields(e,a,d.getMarkFieldSet(b))};this.getCardsOperatingPrompt=function(b){var e=null,c=null,a=null;0==b.getRowAnalyticalFieldSet().getCount()+b.getColumnAnalyticalFieldSet().getCount()&&(e=c=Qa.get("tryDragTextField","\u5c1d\u8bd5\u5c06\u6587\u672c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));0==d.getMarkFieldSet(b).getCount()&&(a=Qa.get("dragNumField",
"\u5c06\u6570\u503c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));return new sb(c,e,a)};this.isFieldValid=function(b,e,c){if(e==b.getRowAnalyticalFieldSet()||e==b.getColumnAnalyticalFieldSet()){if(null!=c&&c.isMeasure())return d.setFieldInvalid(c,Qa.get("heatmapRowColCardPrompt","\u5f53\u56fe\u8868\u7c7b\u578b\u4e3a\u201c\u70ed\u529b\u56fe\u201d\uff0c\u884c/\u5217\u4e0a\u4e0d\u80fd\u6709\u5ea6\u91cf\u3002")),!1}else if(e==d.getMarkFieldSet(b)){b=!0;for(var a=c=0,q=0;q<e.getCount();q++){var u=e.get(q),
v=e.getFieldMatchingMarkType(u);u.isDimension()?(d.setFieldInvalid(u,Qa.get("heatmapMarkCardPrompt","\u6570\u503c\u533a\u57df\u4e2d\u4e0d\u80fd\u6709\u7ef4\u5ea6\uff0c\u5c1d\u8bd5\u62d6\u5230\u884c/\u5217\u4e0a\u3002")),b=!1):v==Z.TYPE_COLOR?(c++,1==c?d.setFieldInvalid(u,null):(d.setFieldInvalid(u,Qa.get("onlyOneFieldForColor","\u53ea\u80fd\u6709\u4e00\u4e2a\u5b57\u6bb5\u5c55\u73b0\u4e3a\u989c\u8272\u3002")),b=!1)):v==Z.TYPE_SIZE&&(a++,1==a?d.setFieldInvalid(u,null):(d.setFieldInvalid(u,Qa.get("onlyOneFieldForSize",
"\u53ea\u80fd\u6709\u4e00\u4e2a\u5b57\u6bb5\u8868\u793a\u5927\u5c0f\u3002")),b=!1))}return b}return!0};this.isCellMeasurable=function(b){return!0};this.getSuggestedSize=function(b,e){b=new qb;b.setSize(60,30);return b};this.createJsonCellParser=function(){return new x};this.exhibit=function(b,e,c,a,q,u,v){if(a){var y=new Da;y.setColor(a.color);if("shape"==q.getSecondaryType()){var C=parseFloat(a.size);C=parseInt(.8*Math.min(e,c)*C);y.setDiameter(C);y.drawShape(b,e,c)}else"color"==q.getSecondaryType()&&
y.drawColorRect(b,e,c);y.setClickListener(function(U,fa,wa){d.getCommonClickListener(u,v,y)(U,fa,null)});y.setTooltipsListener(function(U,fa,wa){if(U&&u){v.setPosition(U,fa);U=u.getDisplayShedTitle();for(fa=0;fa<U.length;fa++){var ma=U[fa];wa.push({key:ma.key,value:ma.value})}"shape"==q.getSecondaryType()&&wa.push({key:a.sizeTitle,value:a.sizeText});a.colorTitle&&a.colorText&&wa.push({key:a.colorTitle,value:a.colorText});v.setContent(wa);b.style.cursor="pointer";v.hookHideAnnouncer(P)}else v.hide()});
var P=function(){y.setMouseStateLocked(!1)}}}}function oa(){function x(){xa.call(this);var e=this.protectedMethod;this.parseExhibitModel=function(c){return[e.parseChartModelImpl(c?c.pie:null),c]}}Ua.call(this,pa.CHARTTYPE_PIE);var d=this.protectedMethod;d.setIconFileName("chart_pie");d.setText(Qa.get("chartPie","\u997c\u56fe"));this.getSuppliedMarks=function(){return[Z.TYPE_ANGLE,Z.TYPE_COLOR,Z.TYPE_SIZE]};this.smartDropField=function(e,c,a,q){e=d.getMarkFieldSet(e);c==e&&(c=new La(e),a.isDimension()?
c.setValue(a,Z.TYPE_COLOR):d.isMarkExist(e,Z.TYPE_ANGLE)?c.setValue(a,Z.TYPE_SIZE):c.setValue(a,Z.TYPE_ANGLE),q.perform(c))};this.smartChangeModel=function(e,c,a){var q=d.washFields(c,e,[[Z.TYPE_COLOR,Fb.ROLE_DIMENSION],[Z.TYPE_ANGLE,Fb.ROLE_MEASURE],[Z.TYPE_SIZE,Fb.ROLE_MEASURE]]),u=q.getRowDimensionWrap(),v=q.getRowMesaureWrap(),y=q.getColumnDimensionWrap(),C=q.getColumnMesaureWrap(),P=q.getMarkDimensionWrap();q=q.getMarkMesaureWrap();var U=a.getDimensionSelecteds();a=a.getMeasureSelecteds();var fa=
d.pickupMark(P,Z.TYPE_COLOR);fa||(fa=[],0==fa.length&&d.mergeOnlyOneNoDuplicated(fa,P),0==fa.length&&d.mergeOnlyOneNoDuplicated(fa,U),0==fa.length&&d.mergeOnlyOneNoDuplicated(fa,u),0==fa.length&&d.mergeOnlyOneNoDuplicated(fa,y),fa=0==fa.length?null:new ub(fa[0].getField(),Z.TYPE_COLOR));1<u.length+P.length+U.length&&(0==y.length&&d.mergeOnlyOneNoDuplicated(y,P),0==y.length&&d.mergeOnlyOneNoDuplicated(y,U));d.mergeAllNoDuplicated(u,P);d.mergeAllNoDuplicated(u,U);d.mergeAllNoDuplicated(q,v);d.mergeAllNoDuplicated(q,
C);d.mergeAllNoDuplicated(q,a);d.searchMark(q,Z.TYPE_ANGLE)||d.patchMark(q,Z.TYPE_ANGLE,!0);d.patchMark(q,Z.TYPE_SIZE);d.searchMark(q,Z.TYPE_ANGLE)||(v=d.searchMark(q,Z.TYPE_SIZE))&&v.setExtendInfo(Z.TYPE_ANGLE);d.patchMark(P,Z.TYPE_COLOR);d.appendFields(c,u,e.getRowAnalyticalFieldSet());d.appendFields(c,y,e.getColumnAnalyticalFieldSet());fa&&d.appendFields(c,[fa],d.getMarkFieldSet(e));d.appendFields(c,q,d.getMarkFieldSet(e))};this.getCardsOperatingPrompt=function(e){var c=null;0==d.getMarkFieldSet(e).getCount()&&
(c=Qa.get("dragNumAndTextField","\u5c06\u4e00\u4e2a\u6570\u503c\u5b57\u6bb5\u548c\u4e00\u4e2a\u6587\u672c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));return new sb(null,null,c)};this.isFieldValid=function(e,c,a){if(c==e.getRowAnalyticalFieldSet()||c==e.getColumnAnalyticalFieldSet()){if(null!=a&&a.isMeasure())return d.setFieldInvalid(a,Qa.get("pieRowColCardPrompt","\u5f53\u56fe\u8868\u7c7b\u578b\u4e3a\u997c\u56fe\uff0c\u884c/\u5217\u4e0a\u4e0d\u80fd\u6709\u5ea6\u91cf\u3002")),!1}else if(c==d.getMarkFieldSet(e)){e=
!0;for(var q=0,u=0,v=0,y=0;y<c.getCount();y++){var C=c.get(y),P=c.getFieldMatchingMarkType(C),U=!0;C.isDimension()&&P!=Z.TYPE_COLOR?U=!1:C.isMeasure()&&P!=Z.TYPE_ANGLE&&P!=Z.TYPE_SIZE&&(U=!1);U?P==Z.TYPE_COLOR?(q++,1==q?d.setFieldInvalid(C,null):(d.setFieldInvalid(C,Qa.get("onlyOneFieldForColor","\u53ea\u80fd\u6709\u4e00\u4e2a\u5b57\u6bb5\u5c55\u73b0\u4e3a\u989c\u8272\u3002")),e=!1)):P==Z.TYPE_ANGLE?(u++,1==u?d.setFieldInvalid(C,null):(d.setFieldInvalid(C,Qa.get("onlyOneFieldForAngle","\u53ea\u80fd\u6709\u4e00\u4e2a\u5b57\u6bb5\u4f5c\u4e3a\u89d2\u5ea6\u3002")),
e=!1)):P==Z.TYPE_SIZE&&(v++,1==v?d.setFieldInvalid(C,null):(d.setFieldInvalid(C,Qa.get("onlyOneFieldForSize","\u53ea\u80fd\u6709\u4e00\u4e2a\u5b57\u6bb5\u8868\u793a\u5927\u5c0f\u3002")),e=!1)):(null!=a&&d.setFieldInvalid(a,Qa.get("pieMarkCardPrompt","\u7528\u7ef4\u5ea6\u8868\u793a\u989c\u8272\uff0c\u7528\u5ea6\u91cf\u8868\u793a\u89d2\u5ea6\u3002")),e=!1)}return e}return!0};this.isCellMeasurable=function(e){e=d.getMarkFieldSet(e);return d.isMarkExist(e,Z.TYPE_SIZE)};this.getSuggestedSize=function(e,
c){e=new qb;e.setSize(200,200);c.getRowAnalyticalFieldSet().hasAnyDimension()||(c.getColumnAnalyticalFieldSet().hasAnyDimension()?e.setLeftAxisColumnWidth(50):(e.setLeftAxisColumnWidth(10),e.setTopAxisRowHeight(10)));return e};this.createJsonCellParser=function(){return new x};this.exhibit=function(e,c,a,q,u,v,y){var C=q[0],P=q[1];q=parseInt(.8*Math.min(c,a));var U=P?P.size:null;U&&(U=parseFloat(U),q=parseInt(q*U));U=u.getChartConfig();var fa=new ba;fa.setModel(C);fa.getAttr().setShowDataLabel(u.isShowLabel());
fa.getAttr().setDataLabelType(b(U.getPieConfig().getLabelType()));fa.setDiameter(q);fa.draw(e,c,a);fa.setClickListener(function(ma,Ea,Xa){var bb=d.getCommonClickListener(v,y,fa);0<=Xa?(Xa=[fa.getModel().getCategories()[Xa].getExecutableValue()],bb(ma,Ea,Xa)):P&&P.sizeTitle&&bb(ma,Ea,null)});fa.setTooltipsListener(function(ma,Ea,Xa){if(ma&&v){y.setPosition(ma,Ea);ma=v.getDisplayShedTitle();Ea=[];for(var bb=0;bb<ma.length;bb++){var Jb=ma[bb];Ea.push({key:Jb.key,value:Jb.value})}if(Xa&&0!=Xa.length)Ea=
Ea.concat(Xa);else if(P&&P.sizeTitle)Ea.push({key:P.sizeTitle,value:P.sizeText});else{y.hide();return}y.setContent(Ea);y.hookHideAnnouncer(wa)}else y.hide()});var wa=function(){fa.setMouseStateLocked(!1)}};var b=function(e){var c=0;(e&Wa.LABEL_NAME)==Wa.LABEL_NAME&&(c|=ja.SHOW_LABEL_NAME);(e&Wa.LABEL_NUMBER)==Wa.LABEL_NUMBER&&(c|=ja.SHOW_LABEL_NUMBER);(e&Wa.LABEL_PERCENT)==Wa.LABEL_PERCENT&&(c|=ja.SHOW_LABEL_PERCENT);return c}}function ka(){Ua.call(this,pa.CHARTTYPE_LINE);Mb.call(this);var x=this.protectedMethod;
x.setIconFileName("chart_line");x.setText(Qa.get("chartLine","\u6298\u7ebf\u56fe"));x.setCardsTitle(Qa.get("columnCardTitleWithAxis","\u5217\uff08\u6a2a\u8f74\uff09"),Qa.get("rowCardTitleWithAxis","\u884c\uff08\u7eb5\u8f74\uff09")," ");this.getSuppliedMarks=function(){return[]};this.smartChangeModel=function(d,b,e){var c=x.washFields(b,d,[]),a=c.getRowDimensionWrap(),q=c.getRowMesaureWrap(),u=c.getColumnDimensionWrap(),v=c.getColumnMesaureWrap(),y=c.getMarkDimensionWrap();c=c.getMarkMesaureWrap();
var C=e.getDimensionSelecteds();e=e.getMeasureSelecteds();0==u.length&&x.mergeOnlyOneNoDuplicated(u,y,hb.DT_STRING);0==u.length&&x.mergeOnlyOneNoDuplicated(u,C,hb.DT_STRING);0==u.length&&x.mergeOnlyOneNoDuplicated(u,a,hb.DT_STRING);var P=u.length;u.length==P&&x.mergeOnlyOneNoDuplicated(u,y,hb.DT_DATE);u.length==P&&x.mergeOnlyOneNoDuplicated(u,C,hb.DT_DATE);u.length==P&&x.mergeOnlyOneNoDuplicated(u,a,hb.DT_DATE);x.mergeAllNoDuplicated(a,y);x.mergeAllNoDuplicated(a,C);x.mergeAllNoDuplicated(q,v);x.mergeAllNoDuplicated(q,
c);x.mergeAllNoDuplicated(q,e);x.appendFields(b,a,d.getRowAnalyticalFieldSet());x.appendFields(b,q,d.getRowAnalyticalFieldSet());x.appendFields(b,u,d.getColumnAnalyticalFieldSet())};this.getCardsOperatingPrompt=function(d){var b=null,e=null;0==d.getRowAnalyticalFieldSet().getCount()&&(b=Qa.get("dragNumField","\u5c06\u6570\u503c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));0==d.getColumnAnalyticalFieldSet().getCount()&&(e=Qa.get("tryDragDateField","\u5c1d\u8bd5\u5c06\u65e5\u671f\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));
return new sb(e,b,null)};this.isFieldValid=function(d,b,e){if(null==e){var c=0,a=!0;b==d.getRowAnalyticalFieldSet()&&x.lookupMeasures(d.getRowAnalyticalFieldSet(),function(q){c++;1==c?x.setFieldInvalid(q,null):(x.setFieldInvalid(q,Qa.get("chartLineRowCardPrompt","\u5f53\u56fe\u8868\u7c7b\u578b\u4e3a\u6298\u7ebf\u56fe\uff0c\u884c\u4e0a\u53ea\u80fd\u6709\u4e00\u4e2a\u5ea6\u91cf\u3002")),a=!1)});return a}return b==d.getRowAnalyticalFieldSet()?(c=0,a=!0,e.isMeasure()&&x.lookupMeasures(d.getRowAnalyticalFieldSet(),
function(q){c++;1==c?x.setFieldInvalid(q,null):(x.setFieldInvalid(q,Qa.get("chartLineRowCardPrompt","\u5f53\u56fe\u8868\u7c7b\u578b\u4e3a\u6298\u7ebf\u56fe\uff0c\u884c\u4e0a\u53ea\u80fd\u6709\u4e00\u4e2a\u5ea6\u91cf\u3002")),a=!1)}),a):b==d.getColumnAnalyticalFieldSet()&&e.isMeasure()?(x.setFieldInvalid(e,Qa.get("chartLineColCardPrompt","\u5f53\u56fe\u8868\u7c7b\u578b\u4e3a\u6298\u7ebf\u56fe\uff0c\u5217\u4e0a\u4e0d\u80fd\u6709\u5ea6\u91cf\u3002")),!1):!0};this.getSuggestedSize=function(d,b){d=new qb;
d.setMinSize(120,80);d.setMaxSize(640,480);d.setLeftAsNumberAxis(!0);d.setLeftAxisColumnWidth(100);d.setTopAsNumberAxis(!1);d.setTopAxisRowHeight(-1);return d};this.createJsonCellParser=function(){return new xa};this.exhibit=function(d,b,e,c,a,q,u){var v=new W;v.setModel(c);v.getAttr().setShowDataLabel(a.isShowLabel());a.isForAxis()?(c=a.getAxisModel(),c.isNumberAxis()?(c=c.getDisplayName(),v.drawNumberAxis(d,b,e,c)):c.isContinueAxis()&&v.drawCategoryAxis(d,b,e)):(v.draw(d,b,e),v.setClickListener(function(y,
C,P){0<=P&&(P=[v.getModel().getCategories()[P].getExecutableValue()],x.getCommonClickListener(q,u,v)(y,C,P))}),v.setTooltipsListener(x.getCommonTooltipsListener(q,u,v)))}}function Ha(){Ua.call(this,pa.CHARTTYPE_MLINE);Mb.call(this);var x=this.protectedMethod;x.setIconFileName("chart_mline");x.setText(Qa.get("chartMLine","\u591a\u7cfb\u5217\u6298\u7ebf\u56fe"));x.setCardsTitle(Qa.get("columnCardTitleWithAxis","\u5217\uff08\u6a2a\u8f74\uff09"),Qa.get("rowCardTitleWithAxis","\u884c\uff08\u7eb5\u8f74\uff09"),
null);this.getSuppliedMarks=function(){return[Z.TYPE_COLOR]};this.smartDropField=function(d,b,e,c){d=x.getMarkFieldSet(d);b==d&&(b=new La(d),b.setValue(e,Z.TYPE_COLOR),c.perform(b))};this.smartChangeModel=function(d,b,e){var c=x.washFields(b,d,[]),a=c.getRowDimensionWrap(),q=c.getRowMesaureWrap(),u=c.getColumnDimensionWrap(),v=c.getColumnMesaureWrap(),y=c.getMarkDimensionWrap(),C=c.getMarkMesaureWrap();c=e.getDimensionSelecteds();e=e.getMeasureSelecteds();0==u.length&&x.mergeOnlyOneNoDuplicated(u,
y,hb.DT_STRING);0==u.length&&x.mergeOnlyOneNoDuplicated(u,c,hb.DT_STRING);0==u.length&&x.mergeOnlyOneNoDuplicated(u,a,hb.DT_STRING);var P=u.length;u.length==P&&x.mergeOnlyOneNoDuplicated(u,y,hb.DT_DATE);u.length==P&&x.mergeOnlyOneNoDuplicated(u,c,hb.DT_DATE);u.length==P&&x.mergeOnlyOneNoDuplicated(u,a,hb.DT_DATE);x.mergeAllNoDuplicated(q,v);x.mergeAllNoDuplicated(q,C);x.mergeAllNoDuplicated(q,e);if(1==q.length){var U=x.pickupMark(y,Z.TYPE_COLOR);U||(v=[],0==v.length&&x.mergeOnlyOneNoDuplicated(v,
y),0==v.length&&x.mergeOnlyOneNoDuplicated(v,c),0==v.length&&x.mergeOnlyOneNoDuplicated(v,a),0==v.length&&1<u.length&&x.mergeOnlyOneNoDuplicated(v,u,hb.DT_STRING),U=0==v.length?null:new ub(v[0].getField(),Z.TYPE_COLOR))}x.mergeAllNoDuplicated(a,y);x.mergeAllNoDuplicated(a,c);x.appendFields(b,a,d.getRowAnalyticalFieldSet());x.appendFields(b,q,d.getRowAnalyticalFieldSet());x.appendFields(b,u,d.getColumnAnalyticalFieldSet());U&&x.appendFields(b,[U],x.getMarkFieldSet(d))};this.getCardsOperatingPrompt=
function(d){var b=null,e=null,c=null;0==d.getRowAnalyticalFieldSet().getCount()&&(b=Qa.get("dragNumField","\u5c06\u6570\u503c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));0==d.getColumnAnalyticalFieldSet().getCount()&&(e=Qa.get("tryDragDateField","\u5c1d\u8bd5\u5c06\u65e5\u671f\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));0==x.getMarkFieldSet(d).getCount()&&(c=Qa.get("tryDragTextFieldAsSeries","\u5c1d\u8bd5\u5c06\u6587\u672c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u4f5c\u4e3a\u7cfb\u5217\u3002"));return new sb(e,
b,c)};this.isFieldValid=function(d,b,e){if(null==e)if(b==d.getRowAnalyticalFieldSet()){if(b=x.getMarkFieldSet(d),x.isMarkExist(b,Z.TYPE_COLOR)){var c=0;x.lookupMeasures(d.getRowAnalyticalFieldSet(),function(u){c++;1==c&&x.setFieldInvalid(u,null)});if(1==c){var a=0;d=x.getMarkFieldSet(d);x.lookupMarks(d,Z.TYPE_COLOR,function(u){u.isDimension()&&(a++,1==a&&x.setFieldInvalid(u,null))})}}}else b==x.getMarkFieldSet(d)&&(a=0,x.lookupMarks(b,Z.TYPE_COLOR,function(u){u.isDimension()&&(a++,1==a&&x.setFieldInvalid(u,
null))}),0==a&&x.lookupMeasures(d.getRowAnalyticalFieldSet(),function(u){x.setFieldInvalid(u,null)}));else{if(b==d.getRowAnalyticalFieldSet()){c=0;var q=!0;b=x.getMarkFieldSet(d);x.isMarkExist(b,Z.TYPE_COLOR)&&x.lookupMeasures(d.getRowAnalyticalFieldSet(),function(u){c++;1==c?x.setFieldInvalid(u,null):(x.setFieldInvalid(u,Qa.get("seriesConflictPrompt","\u5df2\u4f7f\u7528\u7ef4\u5ea6\u503c\u8868\u793a\u591a\u4e2a\u989c\u8272\uff08\u7cfb\u5217\uff09\uff0c\u4e0d\u80fd\u540c\u65f6\u51fa\u73b0\u591a\u4e2a\u5ea6\u91cf\u3002")),
q=!1)});return q}if(b==d.getColumnAnalyticalFieldSet()){if(e.isMeasure())return x.setFieldInvalid(e,Qa.get("chartMLineColCardPrompt","\u5f53\u56fe\u8868\u7c7b\u578b\u4e3a\u591a\u7cfb\u5217\u6298\u7ebf\u56fe\uff0c\u5217\u4e0a\u4e0d\u80fd\u6709\u5ea6\u91cf\u3002")),!1}else if(b==x.getMarkFieldSet(d))return a=0,q=!0,x.lookupMarks(b,Z.TYPE_COLOR,function(u){u.isMeasure()?(x.setFieldInvalid(u,Qa.get("useDimensionForColor","\u7528\u7ef4\u5ea6\u8868\u793a\u989c\u8272\u3002")),q=!1):(a++,1==a?x.setFieldInvalid(u,
null):(x.setFieldInvalid(u,Qa.get("onlyOneFieldForColor","\u53ea\u80fd\u6709\u4e00\u4e2a\u5b57\u6bb5\u5c55\u73b0\u4e3a\u989c\u8272\u3002")),q=!1))}),0<a&&(c=0,x.lookupMeasures(d.getRowAnalyticalFieldSet(),function(u){c++;1<c&&(x.setFieldInvalid(u,Qa.get("seriesConflictPrompt","\u5df2\u4f7f\u7528\u7ef4\u5ea6\u503c\u8868\u793a\u591a\u4e2a\u989c\u8272\uff08\u7cfb\u5217\uff09\uff0c\u4e0d\u80fd\u540c\u65f6\u51fa\u73b0\u591a\u4e2a\u5ea6\u91cf\u3002")),q=!1)})),q}return!0};this.getSuggestedSize=function(d,
b){d=new qb;d.setMinSize(120,80);d.setMaxSize(640,480);d.setLeftAsNumberAxis(!0);d.setLeftAxisColumnWidth(100);d.setTopAsNumberAxis(!1);d.setTopAxisRowHeight(-1);return d};this.createJsonCellParser=function(){return new xa};this.exhibit=function(d,b,e,c,a,q,u){var v=new W;v.setModel(c);v.getAttr().setShowDataLabel(a.isShowLabel());a.isForAxis()?(c=a.getAxisModel(),c.isNumberAxis()?(c=c.getDisplayName(),v.drawNumberAxis(d,b,e,c)):c.isContinueAxis()&&v.drawCategoryAxis(d,b,e)):(v.draw(d,b,e),v.setClickListener(function(y,
C,P){0<=P&&(P=[v.getModel().getCategories()[P].getExecutableValue()],x.getCommonClickListener(q,u,v)(y,C,P))}),v.setTooltipsListener(x.getCommonTooltipsListener(q,u,v)))}}function Sa(){Ua.call(this,pa.CHARTTYPE_AREA);Mb.call(this);var x=this.protectedMethod;x.setIconFileName("chart_area");x.setText(Qa.get("chartArea","\u9762\u79ef\u56fe"));x.setCardsTitle(Qa.get("columnCardTitleWithAxis","\u5217\uff08\u6a2a\u8f74\uff09"),Qa.get("rowCardTitleWithAxis","\u884c\uff08\u7eb5\u8f74\uff09"),null);this.getSuppliedMarks=
function(){return[Z.TYPE_COLOR]};this.smartDropField=function(d,b,e,c){d=x.getMarkFieldSet(d);b==d&&(b=new La(d),b.setValue(e,Z.TYPE_COLOR),c.perform(b))};this.smartChangeModel=function(d,b,e){var c=x.washFields(b,d,[]),a=c.getRowDimensionWrap(),q=c.getRowMesaureWrap(),u=c.getColumnDimensionWrap(),v=c.getColumnMesaureWrap(),y=c.getMarkDimensionWrap(),C=c.getMarkMesaureWrap();c=e.getDimensionSelecteds();e=e.getMeasureSelecteds();0==u.length&&x.mergeOnlyOneNoDuplicated(u,y,hb.DT_STRING);0==u.length&&
x.mergeOnlyOneNoDuplicated(u,c,hb.DT_STRING);0==u.length&&x.mergeOnlyOneNoDuplicated(u,a,hb.DT_STRING);var P=u.length;u.length==P&&x.mergeOnlyOneNoDuplicated(u,y,hb.DT_DATE);u.length==P&&x.mergeOnlyOneNoDuplicated(u,c,hb.DT_DATE);u.length==P&&x.mergeOnlyOneNoDuplicated(u,a,hb.DT_DATE);x.mergeAllNoDuplicated(q,v);x.mergeAllNoDuplicated(q,C);x.mergeAllNoDuplicated(q,e);v=x.pickupMark(y,Z.TYPE_COLOR);v||(v=[],0==v.length&&x.mergeOnlyOneNoDuplicated(v,y),0==v.length&&x.mergeOnlyOneNoDuplicated(v,c),0==
v.length&&x.mergeOnlyOneNoDuplicated(v,a),0==v.length&&1<u.length&&x.mergeOnlyOneNoDuplicated(v,u,hb.DT_STRING),v=0==v.length?null:new ub(v[0].getField(),Z.TYPE_COLOR));x.mergeAllNoDuplicated(a,y);x.mergeAllNoDuplicated(a,c);x.appendFields(b,a,d.getRowAnalyticalFieldSet());x.appendFields(b,q,d.getRowAnalyticalFieldSet());x.appendFields(b,u,d.getColumnAnalyticalFieldSet());v&&x.appendFields(b,[v],x.getMarkFieldSet(d))};this.getCardsOperatingPrompt=function(d){var b=null,e=null,c=null;0==d.getRowAnalyticalFieldSet().getCount()&&
(b=Qa.get("dragNumField","\u5c06\u6570\u503c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));0==d.getColumnAnalyticalFieldSet().getCount()&&(e=Qa.get("tryDragDateField","\u5c1d\u8bd5\u5c06\u65e5\u671f\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));0==x.getMarkFieldSet(d).getCount()&&(c=Qa.get("tryDragTextFieldAsSeries","\u5c1d\u8bd5\u5c06\u6587\u672c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u4f5c\u4e3a\u7cfb\u5217\u3002"));return new sb(e,b,c)};this.isFieldValid=function(d,b,e){if(null==e){if(b==d.getRowAnalyticalFieldSet()){if(b=
x.getMarkFieldSet(d),x.isMarkExist(b,Z.TYPE_COLOR)){var c=0;x.lookupMeasures(d.getRowAnalyticalFieldSet(),function(u){c++;1==c&&x.setFieldInvalid(u,null)});if(1==c){var a=0;d=x.getMarkFieldSet(d);x.lookupMarks(d,Z.TYPE_COLOR,function(u){u.isDimension()&&(a++,1==a&&x.setFieldInvalid(u,null))})}}}else b==x.getMarkFieldSet(d)&&(a=0,x.lookupMarks(b,Z.TYPE_COLOR,function(u){u.isDimension()&&(a++,1==a&&x.setFieldInvalid(u,null))}),0==a&&x.lookupMeasures(d.getRowAnalyticalFieldSet(),function(u){x.setFieldInvalid(u,
null)}));return!0}if(b==d.getRowAnalyticalFieldSet()){c=0;var q=!0;b=x.getMarkFieldSet(d);x.isMarkExist(b,Z.TYPE_COLOR)&&x.lookupMeasures(d.getRowAnalyticalFieldSet(),function(u){c++;1==c?x.setFieldInvalid(u,null):(x.setFieldInvalid(u,Qa.get("seriesConflictPrompt","\u5df2\u4f7f\u7528\u7ef4\u5ea6\u503c\u8868\u793a\u591a\u4e2a\u989c\u8272\uff08\u7cfb\u5217\uff09\uff0c\u4e0d\u80fd\u540c\u65f6\u51fa\u73b0\u591a\u4e2a\u5ea6\u91cf\u3002")),q=!1)});return q}if(b==d.getColumnAnalyticalFieldSet())return e.isMeasure()?
(x.setFieldInvalid(e,Qa.get("chartAreaColCardPrompt","\u5f53\u56fe\u8868\u7c7b\u578b\u4e3a\u9762\u79ef\u56fe\uff0c\u5217\u4e0a\u4e0d\u80fd\u6709\u5ea6\u91cf\u3002")),!1):!0;if(b==x.getMarkFieldSet(d))return a=0,q=!0,x.lookupMarks(b,Z.TYPE_COLOR,function(u){u.isMeasure()?(x.setFieldInvalid(u,Qa.get("useDimensionForColor","\u7528\u7ef4\u5ea6\u8868\u793a\u989c\u8272\u3002")),q=!1):(a++,1==a?x.setFieldInvalid(u,null):(x.setFieldInvalid(u,Qa.get("onlyOneFieldForColor","\u53ea\u80fd\u6709\u4e00\u4e2a\u5b57\u6bb5\u5c55\u73b0\u4e3a\u989c\u8272\u3002")),
q=!1))}),0<a&&(c=0,x.lookupMeasures(d.getRowAnalyticalFieldSet(),function(u){c++;1<c&&(x.setFieldInvalid(u,Qa.get("seriesConflictPrompt","\u5df2\u4f7f\u7528\u7ef4\u5ea6\u503c\u8868\u793a\u591a\u4e2a\u989c\u8272\uff08\u7cfb\u5217\uff09\uff0c\u4e0d\u80fd\u540c\u65f6\u51fa\u73b0\u591a\u4e2a\u5ea6\u91cf\u3002")),q=!1)})),q};this.getSuggestedSize=function(d,b){d=new qb;d.setMinSize(120,90);d.setMaxSize(640,480);d.setLeftAsNumberAxis(!0);d.setLeftAxisColumnWidth(100);d.setTopAsNumberAxis(!1);d.setTopAxisRowHeight(-1);
return d};this.createJsonCellParser=function(){return new xa};this.exhibit=function(d,b,e,c,a,q,u){var v=new ea;v.setModel(c);v.getAttr().setShowDataLabel(a.isShowLabel());a.isForAxis()?(c=a.getAxisModel(),c.isNumberAxis()?(c=c.getDisplayName(),v.drawNumberAxis(d,b,e,c)):c.isContinueAxis()&&v.drawCategoryAxis(d,b,e)):(v.draw(d,b,e),v.setClickListener(function(y,C,P){0<=P&&(P=[v.getModel().getCategories()[P].getExecutableValue()],x.getCommonClickListener(q,u,v)(y,C,P))}),v.setTooltipsListener(x.getCommonTooltipsListener(q,
u,v)))}}function da(){Ua.call(this,pa.CHARTTYPE_BAR);var x=this.protectedMethod;x.setIconFileName("chart_bar");x.setText(Qa.get("chartBar","\u67f1\u5f62\u56fe"));x.setCardsTitle(Qa.get("columnCardTitleWithAxis","\u5217\uff08\u6a2a\u8f74\uff09"),Qa.get("rowCardTitleWithAxis","\u884c\uff08\u7eb5\u8f74\uff09")," ");this.getSuppliedMarks=function(){return[]};this.smartChangeModel=function(d,b,e){var c=x.washFields(b,d,[]),a=c.getRowDimensionWrap(),q=c.getRowMesaureWrap(),u=c.getColumnDimensionWrap(),
v=c.getColumnMesaureWrap(),y=c.getMarkDimensionWrap();c=c.getMarkMesaureWrap();var C=e.getDimensionSelecteds();e=e.getMeasureSelecteds();0==u.length&&x.mergeOnlyOneNoDuplicated(u,y);0==u.length&&x.mergeOnlyOneNoDuplicated(u,C);0==u.length&&x.mergeOnlyOneNoDuplicated(u,a);x.mergeAllNoDuplicated(a,y);x.mergeAllNoDuplicated(a,C);x.mergeAllNoDuplicated(q,v);x.mergeAllNoDuplicated(q,c);x.mergeAllNoDuplicated(q,e);x.appendFields(b,a,d.getRowAnalyticalFieldSet());x.appendFields(b,q,d.getRowAnalyticalFieldSet());
x.appendFields(b,u,d.getColumnAnalyticalFieldSet())};this.getCardsOperatingPrompt=function(d){var b=null,e=null;0==d.getRowAnalyticalFieldSet().getCount()&&(b=Qa.get("dragNumField","\u5c06\u6570\u503c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));0==d.getColumnAnalyticalFieldSet().getCount()&&(e=Qa.get("tryDragTextField","\u5c1d\u8bd5\u5c06\u6587\u672c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));return new sb(e,b,null)};this.isFieldValid=function(d,b,e){var c=!0,a=x.isMeasureExist(d.getRowAnalyticalFieldSet());
x.lookupMeasures(d.getColumnAnalyticalFieldSet(),function(q){q==e&&(c=!1);var u=a?Qa.get("chartBarRowColCardPrompt","\u5f53\u56fe\u8868\u7c7b\u578b\u4e3a\u67f1\u5f62\u56fe\uff0c\u5ea6\u91cf\u4e0d\u80fd\u540c\u65f6\u51fa\u73b0\u5728\u884c\u3001\u5217\u4e0a\u3002"):null;x.setFieldInvalid(q,u)});return c};this.isCellMeasurable=function(d){return!0};this.getSuggestedSize=function(d,b){b=new qb;d.isLandscape()?(b.setMinSize(20,100),b.setMaxSize(60,1E3),b.setLeftAsNumberAxis(!0),b.setLeftAxisColumnWidth(100),
b.setTopAsNumberAxis(!1),b.setTopAxisRowHeight(60)):(b.setMinSize(140,24),b.setMaxSize(1E3,40),b.setTopAsNumberAxis(!0),b.setTopAxisRowHeight(30),b.setLeftAsNumberAxis(!1),b.setLeftAxisColumnWidth(120));return b};this.createJsonCellParser=function(){return new xa};this.exhibit=function(d,b,e,c,a,q,u){var v=a.isLandscape()?new na:new l;v.setModel(c);v.getAttr().setShowDataLabel(a.isShowLabel());a.isForAxis()?(c=a.getAxisModel().getDisplayName(),v.drawNumberAxis(d,b,e,c)):(v.draw(d,b,e),v.setClickListener(function(y,
C,P){x.getCommonClickListener(q,u,v)(y,C,null)}),v.setTooltipsListener(x.getCommonTooltipsListener(q,u,v)))}}function qa(){Ua.call(this,pa.CHARTTYPE_STACKBAR);var x=this.protectedMethod;x.setIconFileName("chart_stackbar");x.setText(Qa.get("chartStackedBar","\u5806\u79ef\u67f1\u5f62\u56fe"));x.setCardsTitle(Qa.get("columnCardTitleWithAxis","\u5217\uff08\u6a2a\u8f74\uff09"),Qa.get("rowCardTitleWithAxis","\u884c\uff08\u7eb5\u8f74\uff09"),null);this.getSuppliedMarks=function(){return[Z.TYPE_COLOR]};this.smartDropField=
function(d,b,e,c){d=x.getMarkFieldSet(d);b==d&&(b=new La(d),b.setValue(e,Z.TYPE_COLOR),c.perform(b))};this.smartChangeModel=function(d,b,e){var c=x.washFields(b,d,[[Z.TYPE_COLOR,Fb.ROLE_DIMENSION]]),a=c.getRowDimensionWrap(),q=c.getRowMesaureWrap(),u=c.getColumnDimensionWrap(),v=c.getColumnMesaureWrap(),y=c.getMarkDimensionWrap();c=c.getMarkMesaureWrap();var C=e.getDimensionSelecteds();e=e.getMeasureSelecteds();var P=x.pickupMark(y,Z.TYPE_COLOR);P||(P=[],0==P.length&&x.mergeOnlyOneNoDuplicated(P,
y),0==P.length&&x.mergeOnlyOneNoDuplicated(P,C),0==P.length&&x.mergeOnlyOneNoDuplicated(P,a),P=0==P.length?null:new ub(P[0].getField(),Z.TYPE_COLOR));0==u.length&&x.mergeOnlyOneNoDuplicated(u,y);0==u.length&&x.mergeOnlyOneNoDuplicated(u,C);0==u.length&&x.mergeOnlyOneNoDuplicated(u,a);x.mergeAllNoDuplicated(a,y);x.mergeAllNoDuplicated(a,C);x.mergeAllNoDuplicated(q,v);x.mergeAllNoDuplicated(q,c);x.mergeAllNoDuplicated(q,e);x.appendFields(b,a,d.getRowAnalyticalFieldSet());x.appendFields(b,q,d.getRowAnalyticalFieldSet());
x.appendFields(b,u,d.getColumnAnalyticalFieldSet());P&&x.appendFields(b,[P],x.getMarkFieldSet(d))};this.getCardsOperatingPrompt=function(d){var b=null,e=null,c=null;0==d.getRowAnalyticalFieldSet().getCount()&&(b=Qa.get("dragNumField","\u5c06\u6570\u503c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));0==d.getColumnAnalyticalFieldSet().getCount()&&(e=Qa.get("tryDragTextField","\u5c1d\u8bd5\u5c06\u6587\u672c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));0==x.getMarkFieldSet(d).getCount()&&(c=Qa.get("dragTextField",
"\u5c06\u6587\u672c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));return new sb(e,b,c)};this.isFieldValid=function(d,b,e){if(b==x.getMarkFieldSet(d)){var c=!0,a=0;x.lookupMarks(b,Z.TYPE_COLOR,function(u){u.isMeasure()?(x.setFieldInvalid(u,Qa.get("useDimensionForColor","\u7528\u7ef4\u5ea6\u8868\u793a\u989c\u8272\u3002")),c=!1):(a++,1==a?x.setFieldInvalid(u,null):(x.setFieldInvalid(u,Qa.get("onlyOneFieldForColor","\u53ea\u80fd\u6709\u4e00\u4e2a\u5b57\u6bb5\u5c55\u73b0\u4e3a\u989c\u8272\u3002")),c=!1))})}else{c=
!0;var q=x.isMeasureExist(d.getRowAnalyticalFieldSet());x.lookupMeasures(d.getColumnAnalyticalFieldSet(),function(u){u==e&&(c=!1);var v=q?Qa.get("chartStackedBarRowColCardPrompt","\u5f53\u56fe\u8868\u7c7b\u578b\u4e3a\u5806\u79ef\u67f1\u5f62\u56fe\uff0c\u5ea6\u91cf\u4e0d\u80fd\u540c\u65f6\u51fa\u73b0\u5728\u884c\u3001\u5217\u4e0a\u3002"):null;x.setFieldInvalid(u,v)})}return c};this.isCellMeasurable=function(d){return!0};this.getSuggestedSize=function(d,b){b=new qb;d.isLandscape()?(b.setMinSize(20,
100),b.setMaxSize(60,1E3),b.setLeftAsNumberAxis(!0),b.setLeftAxisColumnWidth(100),b.setTopAsNumberAxis(!1),b.setTopAxisRowHeight(60)):(b.setMinSize(140,24),b.setMaxSize(1E3,40),b.setTopAsNumberAxis(!0),b.setTopAxisRowHeight(30),b.setLeftAsNumberAxis(!1),b.setLeftAxisColumnWidth(120));return b};this.createJsonCellParser=function(){return new xa};this.exhibit=function(d,b,e,c,a,q,u){var v=a.isLandscape()?new na:new l;v.setModel(c);v.getAttr().setShowDataLabel(a.isShowLabel());v.setStackMode(!0);a.isForAxis()?
(c=a.getAxisModel().getDisplayName(),v.drawNumberAxis(d,b,e,c)):(v.draw(d,b,e),v.setClickListener(function(y,C,P){x.getCommonClickListener(q,u,v)(y,C,null)}),v.setTooltipsListener(x.getCommonTooltipsListener(q,u,v)))}}function Ga(){Ua.call(this,pa.CHARTTYPE_TREEMAP);var x=this.protectedMethod;x.setIconFileName("chart_treemap");x.setText(Qa.get("chartTreeMap","\u6811\u56fe"));this.getSuppliedMarks=function(){return[Z.TYPE_BLANK,Z.TYPE_COLOR,Z.TYPE_SIZE]};this.smartDropField=function(d,b,e,c){d=x.getMarkFieldSet(d);
b==d&&(e.isDimension()?(b=new La(d),x.isMarkExist(d,Z.TYPE_COLOR)?b.setValue(e,Z.TYPE_BLANK):b.setValue(e,Z.TYPE_COLOR),c.perform(b)):e.isMeasure()&&(b=new La(d),x.isMarkExist(d,Z.TYPE_SIZE)?x.isMarkExist(d,Z.TYPE_COLOR)?b.setValue(e,Z.TYPE_SIZE):b.setValue(e,Z.TYPE_COLOR):b.setValue(e,Z.TYPE_SIZE),c.perform(b)))};this.smartChangeModel=function(d,b,e){var c=x.washFields(b,d,[[Z.TYPE_COLOR,Fb.ROLE_DIMENSION]]),a=c.getRowDimensionWrap(),q=c.getRowMesaureWrap(),u=c.getColumnDimensionWrap(),v=c.getColumnMesaureWrap(),
y=c.getMarkDimensionWrap();c=c.getMarkMesaureWrap();var C=e.getDimensionSelecteds();e=e.getMeasureSelecteds();var P=x.pickupMark(c,Z.TYPE_SIZE);if(!P){var U=[];0==U.length&&x.mergeOnlyOneNoDuplicated(U,c);0==U.length&&x.mergeOnlyOneNoDuplicated(U,e);0==U.length&&x.mergeOnlyOneNoDuplicated(U,q);0==U.length&&x.mergeOnlyOneNoDuplicated(U,v);P=0==U.length?null:new ub(U[0].getField(),Z.TYPE_SIZE)}U=x.pickupMark(c,Z.TYPE_COLOR);U||(U=[],0==U.length&&x.mergeOnlyOneNoDuplicated(U,c),0==U.length&&x.mergeOnlyOneNoDuplicated(U,
e),0==U.length&&x.mergeOnlyOneNoDuplicated(U,q),0==U.length&&x.mergeOnlyOneNoDuplicated(U,v),U=0==U.length?null:new ub(U[0].getField(),Z.TYPE_COLOR));if(U){var fa=x.searchMark(y,Z.TYPE_COLOR);fa&&fa.setExtendInfo(Z.TYPE_BLANK)}else U=x.pickupMark(y,Z.TYPE_COLOR),U||(U=[],0==U.length&&x.mergeOnlyOneNoDuplicated(U,y),0==U.length&&x.mergeOnlyOneNoDuplicated(U,C),0==U.length&&x.mergeOnlyOneNoDuplicated(U,a),0==U.length&&x.mergeOnlyOneNoDuplicated(U,u),U=0==U.length?null:new ub(U[0].getField(),Z.TYPE_COLOR));
x.mergeAllNoDuplicated(y,C);x.mergeAllNoDuplicated(c,q);x.mergeAllNoDuplicated(c,v);x.mergeAllNoDuplicated(c,e);x.patchMark(y,Z.TYPE_BLANK);x.patchMark(c,Z.TYPE_SIZE);U&&x.appendFields(b,[U],x.getMarkFieldSet(d));x.appendFields(b,y,x.getMarkFieldSet(d));P&&x.appendFields(b,[P],x.getMarkFieldSet(d));x.appendFields(b,c,x.getMarkFieldSet(d));x.appendFields(b,a,d.getRowAnalyticalFieldSet());x.appendFields(b,u,d.getColumnAnalyticalFieldSet())};this.getCardsOperatingPrompt=function(d){var b=null;0==x.getMarkFieldSet(d).getCount()&&
(b=Qa.get("dragNumAndTextField","\u5c06\u4e00\u4e2a\u6570\u503c\u5b57\u6bb5\u548c\u4e00\u4e2a\u6587\u672c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));return new sb(null,null,b)};this.isFieldValid=function(d,b,e){if(b==d.getRowAnalyticalFieldSet()||b==d.getColumnAnalyticalFieldSet()){if(null!=e&&e.isMeasure())return x.setFieldInvalid(e,Qa.get("chartTreeMapRowColCardPrompt","\u5f53\u56fe\u8868\u7c7b\u578b\u4e3a\u6811\u56fe\uff0c\u884c/\u5217\u4e0a\u4e0d\u80fd\u6709\u5ea6\u91cf\u3002")),!1}else if(b==
x.getMarkFieldSet(d)){var c=!0,a=0;x.lookupMarks(b,Z.TYPE_COLOR,function(u){a++;1==a?x.setFieldInvalid(u,null):(x.setFieldInvalid(u,Qa.get("onlyOneFieldForColor","\u53ea\u80fd\u6709\u4e00\u4e2a\u5b57\u6bb5\u5c55\u73b0\u4e3a\u989c\u8272\u3002")),c=!1)});var q=0;x.lookupMarks(b,Z.TYPE_SIZE,function(u){u.isDimension()?(x.setFieldInvalid(u,Qa.get("useMeasureForSize","\u7528\u5ea6\u91cf\u8868\u793a\u5927\u5c0f\u3002")),c=!1):(q++,1==q?x.setFieldInvalid(u,null):(x.setFieldInvalid(u,Qa.get("oneOneFieldForSize",
"\u53ea\u80fd\u6709\u4e00\u4e2a\u5b57\u6bb5\u5c55\u73b0\u4e3a\u5927\u5c0f\u3002")),c=!1))});x.lookupMarks(b,Z.TYPE_BLANK,function(u){u.isMeasure()&&(x.setFieldInvalid(u,Qa.get("useMeasureForSize","\u7528\u5ea6\u91cf\u8868\u793a\u5927\u5c0f\u3002")),c=!1)});return c}return!0};this.isCellMeasurable=function(d){return!0};this.getSuggestedSize=function(d,b){d=new qb;d.setMinSize(120,90);d.setMaxSize(720,540);d.setWidthHeightRatio(4/3);b.getRowAnalyticalFieldSet().hasAnyDimension()||(b.getColumnAnalyticalFieldSet().hasAnyDimension()?
d.setLeftAxisColumnWidth(50):(d.setLeftAxisColumnWidth(10),d.setTopAxisRowHeight(10)));return d};this.createJsonCellParser=function(){return new eb};this.exhibit=function(d,b,e,c,a,q,u){var v=c[0];c=(c=c[1])?c.size:null;var y=1;c&&(y*=parseFloat(c));b=Math.max(0,parseInt(b*Math.sqrt(y))-4);e=Math.max(0,parseInt(e*Math.sqrt(y))-3);var C=new aa;C.setModel(v);C.getAttr().setShowDataLabel(a.isShowLabel());C.getAttr().setIgnoreNegative(a.getChartConfig().getRectTreeConfig().isHideNegative());C.draw(d,
b,e);C.setClickListener(function(P,U,fa){if(fa){for(var wa=[],ma=v.getRoot(),Ea=0;Ea<fa.length;Ea++)ma=ma.getChild(fa[Ea]),wa.push(ma.getExecutableValue());x.getCommonClickListener(q,u,C)(P,U,wa)}});C.setTooltipsListener(x.getCommonTooltipsListener(q,u,C))}}function ra(){Ua.call(this,pa.CHARTTYPE_SCATTER);var x=this.protectedMethod;x.setIconFileName("chart_scatter");x.setText(Qa.get("chartScatter","\u6563\u70b9/\u6c14\u6ce1\u56fe"));x.setCardsTitle(Qa.get("columnCardTitleWithAxis","\u5217\uff08\u6a2a\u8f74\uff09"),
Qa.get("rowCardTitleWithAxis","\u884c\uff08\u7eb5\u8f74\uff09"),null);this.getSuppliedMarks=function(){return[Z.TYPE_BLANK,Z.TYPE_COLOR,Z.TYPE_SIZE]};this.smartDropField=function(b,e,c,a){b=x.getMarkFieldSet(b);e==b&&(c.isMeasure()?(e=new La(b),e.setValue(c,Z.TYPE_SIZE)):(e=new La(b),x.isMarkExist(b,Z.TYPE_BLANK)?e.setValue(c,Z.TYPE_COLOR):e.setValue(c,Z.TYPE_BLANK)),a.perform(e))};this.smartChangeModel=function(b,e,c){var a=x.washFields(e,b,[[Z.TYPE_BLANK,Fb.ROLE_DIMENSION],[Z.TYPE_COLOR,Fb.ROLE_DIMENSION],
[Z.TYPE_SIZE,Fb.ROLE_MEASURE]]),q=a.getRowDimensionWrap(),u=a.getRowMesaureWrap(),v=a.getColumnDimensionWrap(),y=a.getColumnMesaureWrap(),C=a.getMarkDimensionWrap();a=a.getMarkMesaureWrap();var P=c.getDimensionSelecteds();c=c.getMeasureSelecteds();0==u.length&&x.mergeOnlyOneNoDuplicated(u,c);0==y.length&&x.mergeOnlyOneNoDuplicated(y,c);0==u.length&&1<y.length&&x.mergeOnlyOneNoDuplicated(u,y);0==y.length&&1<u.length&&x.mergeOnlyOneNoDuplicated(y,u);0==u.length&&x.mergeOnlyOneNoDuplicated(u,a);for(0==
y.length&&x.mergeOnlyOneNoDuplicated(y,a);1<u.length;)x.mergeOnlyOneNoDuplicated(a,u);for(;1<y.length;)x.mergeOnlyOneNoDuplicated(a,y);x.mergeAllNoDuplicated(a,c);x.patchMark(a,Z.TYPE_SIZE);2>C.length&&x.mergeOnlyOneNoDuplicated(C,P);2>C.length&&x.mergeOnlyOneNoDuplicated(C,P);2>C.length&&x.mergeOnlyOneNoDuplicated(C,v);2>C.length&&x.mergeOnlyOneNoDuplicated(C,q);2>C.length&&x.mergeOnlyOneNoDuplicated(C,v);2>C.length&&x.mergeOnlyOneNoDuplicated(C,q);x.patchMark(C,Z.TYPE_BLANK,!0);x.patchMark(C,Z.TYPE_COLOR);
x.mergeAllNoDuplicated(q,P);x.appendFields(e,q,b.getRowAnalyticalFieldSet());x.appendFields(e,u,b.getRowAnalyticalFieldSet());x.appendFields(e,v,b.getColumnAnalyticalFieldSet());x.appendFields(e,y,b.getColumnAnalyticalFieldSet());x.appendFields(e,C,x.getMarkFieldSet(b));x.appendFields(e,a,x.getMarkFieldSet(b))};this.getCardsOperatingPrompt=function(b){var e=null,c=null,a=null;0==b.getRowAnalyticalFieldSet().getCount()&&(e=Qa.get("dragNumField","\u5c06\u6570\u503c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));
0==b.getColumnAnalyticalFieldSet().getCount()&&(c=Qa.get("dragNumField","\u5c06\u6570\u503c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));0==x.getMarkFieldSet(b).getCount()&&(a=Qa.get("dragTextField","\u5c06\u6587\u672c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));return new sb(c,e,a)};this.isFieldValid=function(b,e,c){if(e==b.getRowAnalyticalFieldSet()||e==b.getColumnAnalyticalFieldSet()){var a=0,q=!0;(null==c||c.isMeasure())&&x.lookupMeasures(e,function(u){a++;1==a?x.setFieldInvalid(u,null):(x.setFieldInvalid(u,
Qa.get("chartScatterRowColCardPrompt","\u5f53\u56fe\u8868\u7c7b\u578b\u4e3a\u6563\u70b9\u56fe\uff0c\u8981\u6c42\u884c\u5217\u4e0a\u5404\u6709\u4e14\u53ea\u6709\u4e00\u4e2a\u5ea6\u91cf\u3002")),q=!1)});return q}return e==x.getMarkFieldSet(b)?(q=!0,q=d(e,Fb.ROLE_MEASURE,Z.TYPE_SIZE,Qa.get("useMeasureForSize","\u7528\u5ea6\u91cf\u8868\u793a\u5927\u5c0f\u3002"),Qa.get("oneOneFieldForSize","\u53ea\u80fd\u6709\u4e00\u4e2a\u5b57\u6bb5\u5c55\u73b0\u4e3a\u5927\u5c0f\u3002"))&&q,q=d(e,Fb.ROLE_DIMENSION,Z.TYPE_BLANK,
Qa.get("useMeasureForSize","\u7528\u5ea6\u91cf\u8868\u793a\u5927\u5c0f\u3002"),Qa.get("chartScatterMarkCardPrompt","\u53ea\u80fd\u6709\u4e00\u4e2a\u7ef4\u5ea6\u3002"))&&q,q=d(e,Fb.ROLE_DIMENSION,Z.TYPE_COLOR,Qa.get("useDimensionForColor","\u7528\u7ef4\u5ea6\u8868\u793a\u989c\u8272\u3002"),Qa.get("onlyOneFieldForColor","\u53ea\u80fd\u6709\u4e00\u4e2a\u5b57\u6bb5\u5c55\u73b0\u4e3a\u989c\u8272\u3002"))&&q):!0};var d=function(b,e,c,a,q){var u=!0,v=0;x.lookupMarks(b,c,function(y){e==Fb.ROLE_DIMENSION&&
y.isMeasure()||e==Fb.ROLE_MEASURE&&y.isDimension()?(x.setFieldInvalid(y,a),u=!1):(v++,1==v?x.setFieldInvalid(y,null):(x.setFieldInvalid(y,q),u=!1))});return u};this.getSuggestedSize=function(b,e){b=new qb;b.setMinSize(120,120);b.setMaxSize(640,640);b.setLeftAsNumberAxis(!0);b.setLeftAxisColumnWidth(100);b.setTopAsNumberAxis(!0);b.setTopAxisRowHeight(30);return b};this.createJsonCellParser=function(){return new xa};this.exhibit=function(b,e,c,a,q,u,v){var y=new la;y.setModel(a);q.isForAxis()?(a=q.getAxisModel(),
q=a.getDisplayName(),a.getDirection()==fb.DIR_TOP?y.drawXAxis(b,e,c,q):a.getDirection()==fb.DIR_LEFT&&y.drawYAxis(b,e,c,q)):(y.draw(b,e,c),y.setClickListener(function(C,P,U){var fa=U[0],wa=U[1];0>fa||0>wa||(U=[],fa=y.getModel().getCategories()[fa].getExecutableValue(),void 0!==fa&&U.push(fa),fa=y.getModel().getSeries()[wa].getExecutableSeriesFieldValue(),void 0!==fa&&U.push(fa),x.getCommonClickListener(u,v,y)(C,P,U))}),y.setTooltipsListener(x.getCommonTooltipsListener(u,v,y)))}}"undefined"==typeof com&&
(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.longer&&(com.kingdee.bos.qing.longer={});"undefined"==typeof com.kingdee.bos.qing.longer.ui&&(com.kingdee.bos.qing.longer.ui={});var cb=com.kingdee.bos.qing.longer.ui,Qa,hb,Fb,pa,Ab,Z,Wa,fb,Va,Ka,ab,kb,La,ob,ta,ja,Da,na,l,ba,W,ea,aa,la;(function(){var x=com.kingdee.bos.qing.framework.common;
Qa=x.MultilanguageManager.createPackageAccessor(cb);x=com.kingdee.bos.qing.core.model;hb=x.MetaField;Fb=x.AbstractAnalyticalField;x=com.kingdee.bos.qing.longer.model;pa=x.AnalyticalModel;Ab=x.AnalyticalField;Z=x.MarkFieldSet;Wa=x.PieChartConfig;fb=x.AxisModel;x=com.kingdee.bos.qing.core.controller;Va=x.ActionChangeRole;Ka=x.ActionChangePartValue;x=com.kingdee.bos.qing.longer.controller;ab=x.ActionAddAnalyticalField;kb=x.ActionRemoveAnalyticalField;La=x.ActionSetMarkType;x=com.kingdee.bos.qing.chart.model;
ob=x.NormalChartModel;ta=x.TreeChartModel;ja=x.PieAttr;x=com.kingdee.bos.qing.chart.longer;Da=x.HeatMap;na=x.VerticalBar;l=x.HorizontalBar;ba=x.PieChart;W=x.LineChart;ea=x.AreaChart;aa=x.RectTreeChart;la=x.ScatterChart})();cb.ChartTypeFactory=new function(){var x,d={},b=function(){if(!x){var e=[Ma,da,qa,ka,Ha,Sa,oa,Ja,Ga,ra];x=[];for(var c=0;c<e.length;c++){var a=new e[c];x[c]=a;d[a.getName()]=a}}};this.getInstance=function(e){b();e=d[e];if(!e)throw Error("Unknown display-type name.");return e};this.getAllInstance=
function(){b();return x.slice(0)}}})();(function(){function Ua(){var ta,ja,Da;this.bindContext=function(d,b,e){ta=d;ja=b;Da=e};this.createLittleBox=function(d,b,e,c){d=na(d,b);l(d,e.getSort(),c,!1);d.on("click",function(a){var q=e.getSort();q=q==Ab.SORT_ASC?Ab.SORT_DESC:q==Ab.SORT_DESC?null:Ab.SORT_ASC;var u=new ab;u.setCaption(Sa.get("sortField","\u4fee\u6539#1\u7684\u6392\u5e8f\u65b9\u5f0f\u4e3a\uff1a").replace("#1",e.getComplexText())+Ab.sortToString(q));u.setMethod(e.getSort,e.setSort);u.setValue(q);var v=c?ja.getColumnAnalyticalFieldSet():
ja.getRowAnalyticalFieldSet(),y=c?ja.getColumnsSortingLane:ja.getRowsSortingLane,C=c?ja.setColumnsSortingLane:ja.setRowsSortingLane,P=y()?!0:!1;P&&0<v.getDimensionCount()&&x(P,v,e,q)&&(q=new ab,q.setMethod(y,C),q.setValue(null),y=Da.createCompositeAction(),y.setCaption(u.getCaption()),y.appendUnitAction(u),y.appendUnitAction(q),u=y);Da.perform(u);a=$(a.currentTarget);l(a,e.getSort(),c,!0)});return d};this.showOperatingTips=function(d,b){d=d.find(".sa-exhibition-sort-box");b?d.addClass("sa-exhibition-sort-box_clickable"):
d.removeClass("sa-exhibition-sort-box_clickable");for(var e=0;e<d.length;e++){var c=$(d[e]),a=c.data("my-sortable-direction");a&&hb.background(c,b?"icon_sortable-"+a:null)}};var na=function(d,b){var e=Ua.BOX_LEN-2,c=$("<div>");c.attr("title",Sa.get("sort","\u6392\u5e8f"));c.addClass("sa-exhibition-sort-box");c.css("left",d);c.css("top",b);c.css("width",e);c.css("height",e);return c},l=function(d,b,e,c){e=e?"h":"v";d.data("my-sortable-direction",b?null:e);var a=null;b==Ab.SORT_ASC?a="icon_sort-asc-":
b==Ab.SORT_DESC?a="icon_sort-desc-":c&&(a="icon_sortable-");hb.background(d,a?a+e:null)};this.createRowsSortingLittleBox=function(d,b,e){var c=ja.getRowsSortingLane();return ba(d,b,c,e)};this.showRowsSortingTips=function(d,b){var e=d.find(".sa-exhibition-sort-box");0==e.length&&(e=ba(d.width(),d.height(),null,b),hb.background(e,"icon_sortable-v"),d.append(e));e.addClass("sa-exhibition-sort-box_clickable")};this.hideRowsSortingTips=function(d){d=d.find(".sa-exhibition-sort-box");d.removeClass("sa-exhibition-sort-box_clickable");
d.data("my-sortable-direction")&&d.remove()};var ba=function(d,b,e,c){var a=e?e.getOrder():null;d=na(d-Ua.BOX_LEN-1,b-Ua.BOX_LEN-1);d.addClass("sa-exhibition-sort-box-top");l(d,a,!1,!1);d.on("click",function(q){var u=la(e,c),v=Ab.sortToString(u?u.getOrder():null),y=new ab;y.setCaption(Sa.get("sortRows","\u884c\u6392\u5e8f\uff1a")+v);y.setMethod(ja.getRowsSortingLane,ja.setRowsSortingLane);y.setValue(u);aa(y,null!=u,ja.getRowAnalyticalFieldSet());u=(u=ja.getRowsSortingLane())?u.getOrder():null;q=$(q.currentTarget);
l(q,u,!1,!0);ea(q[0],"sa-exhibition-sort-box-top")});return d};this.createColumnsSortingLittleBox=function(d,b,e){var c=ja.getColumnsSortingLane();return W(d,b,c,e)};this.showColumnsSortingLittleBox=function(d,b){var e=d.find(".sa-exhibition-sort-box");0==e.length&&(e=W(d.width(),d.height(),null,b),hb.background(e,"icon_sortable-h"),d.append(e));e.addClass("sa-exhibition-sort-box_clickable")};this.hideColumnsSortingTips=function(d){d=d.find(".sa-exhibition-sort-box");d.removeClass("sa-exhibition-sort-box_clickable");
d.data("my-sortable-direction")&&d.remove()};var W=function(d,b,e,c){var a=e?e.getOrder():null;d=na(d-Ua.BOX_LEN-1,b-Ua.BOX_LEN>>1);d.addClass("sa-exhibition-sort-box-left");l(d,a,!0,!1);d.on("click",function(q){var u=la(e,c),v=Ab.sortToString(u?u.getOrder():null),y=new ab;y.setCaption(Sa.get("sortColumns","\u5217\u6392\u5e8f\uff1a")+v);y.setMethod(ja.getColumnsSortingLane,ja.setColumnsSortingLane);y.setValue(u);aa(y,null!=u,ja.getColumnAnalyticalFieldSet());u=(u=ja.getColumnsSortingLane())?u.getOrder():
null;q=$(q.currentTarget);l(q,u,!0,!0);ea(q[0],"sa-exhibition-sort-box-left")});return d},ea=function(d,b){b=ta.find("."+b);for(var e=0;e<b.length;e++)d!=b[e]&&$(b[e]).remove()},aa=function(d,b,e){b&&0<e.getDimensionCount()&&x(b,e)&&(e=e.get(e.getDimensionCount()-1),b=new ab,b.setMethod(e.getSort,e.setSort),b.setValue(null),e=Da.createCompositeAction(),e.setCaption(d.getCaption()),e.appendUnitAction(d),e.appendUnitAction(b),d=e);Da.perform(d)},la=function(d,b){if(d)if(d=d.getOrder(),d==Ab.SORT_ASC){var e=
new fb;e.setOrder(Ab.SORT_DESC)}else d==Ab.SORT_DESC&&(e=null);else e=new fb,e.setOrder(Ab.SORT_ASC);if(e){d=[];for(var c=0;c<b.getExecutableValueItemCount();c++)d.push(b.getItemExecutableValue(c));e.setHeadValue(d);b=b.getMeasureIndex();0<=b&&e.setMeasureIndex(b)}return e},x=function(d,b,e,c){for(var a=!1,q=0,u=b.getDimensionCount();q<u;q++){var v=b.get(q);if(!(q<u-1)||v.isShowSubtotal())if(v==e?!c:!v.getSort()){a=!0;break}}return!a&&d}}function Mb(ta){var ja=this,Da,na;this.getType=function(){return ta};
this.setJsonModel=function(l){Da=l.title;na=ja.protectedParseJson(l)};this.protectedParseJson=function(l){throw Error("Override me.");};this.getModel=function(){return na};this.askHeight=function(){throw Error("Override me.");};this.draw=function(l){throw Error("Override me.");};this.getTitle=function(){return Da};this.protectedMethod={createCanvas:function(l,ba,W){var ea=Ha.createCanvas(),aa=$(ea);ka.layoutCtrl(aa,0,0,ba,W);aa.appendTo(l);return Ha.createContext2d(ea,ba,W)}}}function ub(){Mb.call(this,
Mb.TYPE_SIZE);var ta=this.protectedMethod,ja,Da,na,l;this.setBaseDiameter=function(W){ja=W;l&&(l.empty(),ba())};this.protectedParseJson=function(W){Da=W.ratios;na=W.texts;return[Da,na]};this.askHeight=function(){return 1+20*Da.length};this.draw=function(W){l=W;return ba()};var ba=function(){var W=l.innerWidth(),ea=l.innerHeight();ea=ta.createCanvas(l,W,ea);(new ra).draw(ea,ja,W,Da,na)}}function mb(){Mb.call(this,Mb.TYPE_CONTINUOUS_COLOR);var ta=this.protectedMethod,ja=this;this.protectedParseJson=
function(Da){return Fb.parseContontinuousColorLegendModel(Da)};this.askHeight=function(){return 40};this.draw=function(Da){var na=Da.innerWidth(),l=Da.innerHeight();Da=ta.createCanvas(Da,na,l);(new cb).draw(Da,na,ja.getModel())}}function qb(){Mb.call(this,Mb.TYPE_DISCRETE_COLOR);var ta=this.protectedMethod,ja=this;this.protectedParseJson=function(Da){var na=Da.colors,l=Da.texts,ba=Da.captions;Da=Da.othersInfo;null!=Da&&(na=na.slice(),l=l.slice(),na.push("rgba(0,0,0,0)"),l.push(Da),ba&&(ba=ba.slice(),
ba.push("")));Da=new Ga;Da.prepare(na,l,ba,0);return Da};this.askHeight=function(){return 20*ja.getModel().getItemCount()};this.draw=function(Da){var na=ja.getModel(),l=Da.innerWidth(),ba=Da.innerHeight();Da=ta.createCanvas(Da,l,ba);(new Qa).draw(Da,na)}}function sb(){var ta,ja;this.setShedTitleModel=function(Da){ta=Da};this.getShedTitleModel=function(){return ta};this.setBizRowIdx=function(Da){ja=Da};this.getBizRowIdx=function(){return ja}}function Vb(){var ta=[],ja=[],Da=[],na=-1;this.addItem=function(l,
ba,W,ea){ta.push(l);ja.push(ba);if(W){var aa=new Z;aa.asStringValue(W)}else ea&&(aa=new Z,aa.fromJsonObject(ea));Da.push(aa)};this.addItemForSubtotal=function(){var l=new Z;l.asSubtotal();Da.push(l)};this.getItemCount=function(){return ta.length};this.getItemTitle=function(l){return ta[l]};this.getItemValue=function(l){return ja[l]};this.getExecutableValueItemCount=function(){return Da.length};this.getItemExecutableValue=function(l){var ba=Da[l];ba||(ba=new Z,ba.asStringValue(ja[l]));return ba};this.getMeasureIndex=
function(){return na};this.setMeasureIndex=function(l){na=l}}function Lb(){var ta,ja;this.combine=function(l,ba){ta=l;ja=ba};this.getJsonForDetailSearching=function(l){var ba=Da(ta),W=Da(ja);ba={row:ba,column:W};if(l){W=[];for(var ea=0;ea<l.length;ea++){var aa=l[ea];void 0!==aa&&(""===aa?(aa=new Z,aa.asNull(),aa=aa.toJsonObject()):aa={complex:aa},W.push(aa))}ba.others=W}return ba};var Da=function(l){for(var ba=[],W=0,ea=l.getItemCount();W<ea;W++){var aa=l.getItemExecutableValue(W);ba.push(aa.toJsonObject())}return ba};
this.getDisplayShedTitle=function(){var l={},ba=[];ta&&na(ta,ba,l);ja&&na(ja,ba,l);return ba};var na=function(l,ba,W){for(var ea=0,aa=l.getItemCount();ea<aa;ea++){var la=l.getItemTitle(ea),x=l.getItemValue(ea);W[la]!==x&&(W[la]=x,ba.push({key:la,value:x}))}}}function xa(){var ta,ja,Da,na;this.setLeftHeight=function(l){ta=l};this.getLeftHeight=function(){return ta};this.setLeftWidth=function(l){ja=l};this.getLeftWidth=function(){return ja};this.setTopHeight=function(l){Da=l};this.getTopHeight=function(){return Da};
this.setTopWidth=function(l){na=l};this.getTopWidth=function(){return na}}function eb(){var ta=!1,ja=[],Da=!1;this.setHorizontal=function(na){ta=na};this.isHorizontal=function(){return ta};this.addKey=function(na){ja.push(na)};this.setKeys=function(na){ja=na};this.getKeys=function(){return ja};this.isSameKey=function(na){if(ta!=na.isHorizontal())return!1;na=na.getKeys();if(ja.length!=na.length)return!1;for(var l=0;l<ja.length;l++)if(ja[l]!=na[l])return!1;return!0};this.setExpanded=function(na){Da=
na};this.isExpanded=function(){return Da};this.fromJsonObject=function(na){ta=na.horizontal?!0:!1;Da=na.expanded?!0:!1;(na=na.keys)&&(ja=na.split(eb.SEPARATER))};this.toJsonObject=function(){var na={};ta&&(na.horizontal=!0);Da&&(na.expanded=!0);na.keys=ja.join(eb.SEPARATER);return na}}function Ma(){var ta,ja,Da,na,l,ba;this.setContent=function(W){throw Error("Override");};this.setPosition=function(W,ea){throw Error("Override");};this.hide=function(W){throw Error("Override");};this.toggleMenu=function(W,
ea){};this.destroy=function(){};this.setDetailSearchingParam=function(W){ta=W};this.setDetailShowedImpl=function(W,ea){ja=W;Da=ea};this.setLinkageImpl=function(W,ea){na=W;l=ea};this.hookHideAnnouncer=function(W){ba&&ba!=W&&ba();ba=W};this.protectedMethod={checkShowDetailAllowed:function(W){ja?ja(function(ea){W(ea)}):W(!0)},showDetail:function(){Da(ta)},checkLinkageAllowed:function(){return na()},jumpToBizUi:function(){l(ta)},fireHideAnnouncer:function(){ba&&ba();ba=null}}}function Ja(){Ma.call(this);
var ta=this,ja=this.protectedMethod,Da,na,l,ba,W,ea,aa,la=!1,x=!1;this.destroy=function(){Da&&Da.remove()};this.setPosition=function(v,y){Da||d();e(!0);var C=!0;a()&&(q(v,y)?C=!1:c(!1));if(C){var P=Da.width();C=Da.height();var U=document.body.clientHeight;v+15+P+25<document.body.clientWidth?(la=!1,v+=15):(la=!0,v=v-15-P);y+15+C+25<U?(x=!1,y+=15):(x=!0,y=y-15-C);Da.css({left:v,top:y})}};this.hide=function(v){!Da||!v&&a()||(e(!1),c(!1))};this.setContent=function(v){if(!a()){for(var y={},C=$(document.createDocumentFragment()),
P=0;P<v.length;P++){var U=v[P],fa=U.key,wa=U.value,ma=U.color;if(!y[fa]){y[fa]=!0;var Ea=$("<tr>");Ea.appendTo(C);var Xa=$("<td>");U=$("<td>");Xa.appendTo(Ea);U.appendTo(Ea);ma?(Ea=$("<span>"),Ea.css({display:"inline-block",position:"relative",width:"8px",height:"8px","margin-right":"4px","background-color":ma}),Ea.appendTo(Xa),ma=$("<span style='color:#787878'>"),ma.text(fa)):(ma=$("<span style='color:#787878'>"),ma.text(fa+": "));ma.appendTo(Xa);fa=$("<span style='font-size:12px; color:#333; font-weight:bold;'>");
fa.text(wa);fa.appendTo(U)}}l.empty();l.append(C)}};this.toggleMenu=function(v,y){if(!l||!l.is(":visible"))return!1;if(a())return c(!1),!1;c(!0);ea=v;aa=y;var C=function(P){a()&&q(P.clientX,P.clientY)||(ta.hide(!0),$(document.body).off("mousemove",C))};$(document.body).on("mousemove",C);return!0};var d=function(){Da=$("<div>");Da.addClass("sa-tooltips");Da.appendTo($(document.body));Da.mouseleave(function(v){c(!1);e(!1)});ba=b("icon_data_detail",Sa.get("viewData","\u67e5\u770b\u6570\u636e"),function(){ja.showDetail()});
W=b("icon_bill_linkage",Sa.get("linkage","\u5355\u636e\u8054\u67e5"),function(){ja.jumpToBizUi()});na=$("<div>");na.addClass("sa-tooltips-menu");na.append(ba);na.append(W);na.appendTo(Da);l=$("<table style='margin:6px'>");l.addClass("sa-tooltips-content");l.appendTo(Da)},b=function(v,y,C){var P=$("<div>");P.addClass("sa-tooltips-menu-button");P.css("display","none");P.attr("title",y);P.on("click",function(U){C()});y=$("<div>");y.appendTo(P);hb.background(y,v);ka.layoutCtrlCenterAlign(y,12);ka.layoutCtrlMiddleAlign(y,
12);return P},e=function(v){Da.css("display",v?"block":"none");!v&&ja.fireHideAnnouncer()},c=function(v){var y=a();v?y||(na.animate({height:"toggle",opacity:"toggle"},325),u()):y&&na.css("display","none")},a=function(){return na.is(":visible")},q=function(v,y){if(la){var C=Da.offset().left;var P=ea+10}else C=ea-10,P=Da.offset().left+Da.width();if(x){var U=Da.offset().top;var fa=aa+10}else U=aa-10,fa=Da.offset().top+Da.height();return C<v&&v<P&&U<y&&y<fa},u=function(){ja.checkShowDetailAllowed(function(y){ba.css("display",
y?"":"none")});var v=pa.isRuntimeSupported()&&ja.checkLinkageAllowed();W.css("display",v?"":"none")}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.longer&&(com.kingdee.bos.qing.longer={});"undefined"==typeof com.kingdee.bos.qing.longer.ui&&(com.kingdee.bos.qing.longer.ui={});var oa=com.kingdee.bos.qing.longer.ui;
oa.AbstractLegendUi=Mb;oa.Exhibition=function(){function ta(){KTableUIDraggableAdjustingHandler.CustomExpendor.call(this);this.isColumnDraggable=function(ua,Ia){return Ia<ua.getColumnsCount()-nb};this.rowDraggedAction=function(ua,Ia,ib){var rb,Tb=!1;if(Ia<Ea){ua=rb=Ia;var Kb=h().getColumnAnalyticalFieldSet();Ia=Ia<Kb.getCount()?Kb.get(Ia):null;Kb=hc(Ia);Ia=Kb.setTopHeight;Kb=Kb.getTopHeight()}else rb=Ea,ua=ua.getRowsCount()-1,Tb=z(),Kb=hc(Tb),Ia=Kb.setLeftHeight,Kb=Kb.getLeftHeight(),Tb=!0;var Eb=
new ja;Eb.setValue(Ia,rb,ua,ib,Kb);N.getCommandManager().perform(Eb);Tb&&w()};this.columnDraggedAction=function(ua,Ia,ib){var rb,Tb=!1;if(Ia<ma){ua=rb=Ia;var Kb=h().getRowAnalyticalFieldSet();Ia=Ia<Kb.getCount()?Kb.get(Ia):null;Kb=hc(Ia);Ia=Kb.setLeftWidth;Kb=Kb.getLeftWidth()}else rb=ma,ua=ua.getColumnsCount()-1-nb,Tb=L(),Kb=hc(Tb),Ia=Kb.setTopWidth,Kb=Kb.getTopWidth(),Tb=!0;var Eb=new Da;Eb.setValue(Ia,rb,ua,ib,Kb);N.getCommandManager().perform(Eb);Tb&&w();Gb()}}function ja(){Ka.call(this);var ua,
Ia,ib,rb,Tb;this.getCaption=function(){return Sa.get("dragRowHeight","\u8c03\u6574\u884c\u9ad8")};this.setValue=function(Eb,Ib,Wb,ic,rc){ua=Eb;Ia=Ib;ib=Wb;rb=ic;Tb=rc};this.perform=function(){var Eb=Kb();ua(Eb);rb=-rb};this.unperform=function(){Kb();ua(Tb);rb=-rb};var Kb=function(){var Eb=e.isSyncUIWhenModelChanged();e.setSyncUIWhenModelChanged(!1);for(var Ib=Ia;Ib<=ib;Ib++){var Wb=e.getRow(Ib);var ic=Wb.getHeight();ic=Math.max(0,ic+rb);Wb.setHeight(ic)}e.setSyncUIWhenModelChanged(Eb);e.updateUI(!0);
return ic}}function Da(){Ka.call(this);var ua,Ia,ib,rb,Tb;this.getCaption=function(){return Sa.get("dragColumnWidth","\u8c03\u6574\u5217\u5bbd")};this.setValue=function(Eb,Ib,Wb,ic,rc){ua=Eb;Ia=Ib;ib=Wb;rb=ic;Tb=rc};this.perform=function(){var Eb=Kb();ua(Eb);rb=-rb};this.unperform=function(){Kb();ua(Tb);rb=-rb};var Kb=function(){var Eb=e.isSyncUIWhenModelChanged();e.setSyncUIWhenModelChanged(!1);for(var Ib=Ia;Ib<=ib;Ib++){var Wb=e.getColumn(Ib);var ic=Wb.getWidth();ic=Math.max(0,ic+rb);Wb.setWidth(ic)}e.setSyncUIWhenModelChanged(Eb);
e.updateUI(!0);return ic}}function na(){Ka.call(this);var ua=this,Ia,ib,rb={};this.setMethod=function(Tb,Kb){Ia=Tb;ib=Kb};this.perform=function(){var Tb=Ia();ib(rb);rb=Tb};this.unperform=function(){ua.perform()}}function l(){Ka.call(this);var ua;this.perform=function(){ua=gb;gb=[]};this.unperform=function(){gb=ua}}function ba(){Ka.call(this);var ua,Ia,ib,rb,Tb;this.getCaption=function(){return Sa.get("expandOrCollapse","\u5c55\u5f00/\u6536\u8d77")};this.setValue=function(Kb){ua=Kb};this.perform=function(){Ia=
null;ib=-1;for(var Kb=gb.length-1;0<=Kb;Kb--)if(gb[Kb].isSameKey(ua)){ib=Kb;Ia=gb.splice(Kb,1)[0];break}rb=!1;ua.isExpanded()&&(rb=!0,gb.push(ua));Tb=null;128<gb.length&&(Tb=gb.splice(0,1)[0]);h().announceTreeExpanding()};this.unperform=function(){Tb&&gb.unshift(Tb);rb&&gb.pop();Ia&&gb.splice(ib,0,Ia);h().announceTreeExpanding()}}function W(ua){KTDefaultCellRender.call(this,ua);var Ia=this,ib=this.paintCellUI;this.paintCellUI=function(Eb,Ib){var Wb=Ib?Ib:Eb,ic=Ia.getCurrentRowIdx(),rc=Ia.getCurrentColIdx();
if(ic<Ea||rc<ma){var wc=Ia.getCell();if(wc&&!wc.getValue()){var yc=wc.getUserObject();if(yc&&"axis"==yc.type){Ib=Ia.getTextAreaWidth();yc=Ia.getTextAreaHeight();var vc=d.getCommonModel();wc=wc.getUserObject();wc=d.parseAxisModel(wc);var Ac=m();Ac.setAxisModel(wc);U.exhibit(Wb,Ib,yc,vc,Ac,null,null);Tb(Eb,ic,rc);return}}ib(Eb,Ib);Tb(Eb,ic,rc)}else g()?(ib(Wb),Eb=(Eb=Ia.getCell())?Eb.getUserObject():null,Eb=d.parseExhibitModel(Eb),ic=rb(),U.exhibit(Wb,0,0,Eb,null,ic,c)):(rc=Ia.getCell(),Eb=Ia.getTextAreaWidth(),
ic=Ia.getTextAreaHeight(),rc=rc?rc.getUserObject():null,rc=d.parseExhibitModel(rc),Ib=m(),yc=rb(),U.exhibit(Wb,Eb,ic,rc,Ib,yc,c))};var rb=function(){var Eb=Ia.getCurrentRow().getUserObject();Eb=Eb instanceof sb?Eb.getShedTitleModel():Eb;var Ib=Ia.getCurrentCol().getUserObject(),Wb=new Lb;Wb.combine(Eb,Ib);return Wb},Tb=function(Eb,Ib,Wb){Ya&&Ib<Ea&&Wb<ma?(Eb=$(Eb),Ib=h().getRowAnalyticalFieldSet(),Wb=Ia.getCurrentColIdx(),Wb>=Ib.getCount()||(Ib=Ib.get(Wb),Wb=Ia.getCellHeight()-Ua.BOX_LEN-1,Ib=ya.createLittleBox(1,
Wb,Ib,!1),Eb.append(Ib))):U.isCellMeasurable(h())&&(h().getRowAnalyticalFieldSet().hasAnyDimension()&&Ib==Ea-1?(Ib=Ia.getCurrentCol().getUserObject(),Wb=h().getRowsSortingLane(),Kb(Ib,Wb)&&ya.createRowsSortingLittleBox(Ia.getCellWidth(),Ia.getCellHeight(),Ib).appendTo($(Eb))):h().getColumnAnalyticalFieldSet().hasAnyDimension()&&Wb==ma-1&&(Ib=Ia.getCurrentRow().getUserObject(),Ib=Ib instanceof sb?Ib.getShedTitleModel():Ib,Wb=h().getColumnsSortingLane(),Kb(Ib,Wb)&&ya.createColumnsSortingLittleBox(Ia.getCellWidth(),
Ia.getCellHeight(),Ib).appendTo($(Eb))))},Kb=function(Eb,Ib){if(!Ib||!Eb)return!1;var Wb=Ib.getHeadValue();if(Wb.length!=Eb.getExecutableValueItemCount())return!1;for(var ic=0;ic<Wb.length;ic++)if(!Wb[ic].isTheSame(Eb.getItemExecutableValue(ic)))return!1;return Eb.getMeasureIndex()!=Ib.getMeasureIndex()?!1:!0}}function ea(){KTDiagonalRender.call(this);var ua,Ia=this.create;this.create=function(ib,rb,Tb,Kb,Eb,Ib){ib=Ia(ib,rb,Tb,Kb,Eb,Ib);ka.layoutCtrl($(ib),0,0,Eb,Ib);ua=$("<div>");ua.width(Eb);ua.height(Ib);
Eb=ua[0];Eb.appendChild(ib);Ib=ua;var Wb=[0];for(ib=0;ib<ma;ib++)Wb[ib+1]=Wb[ib]+e.getColumn(ib).getWidth();rb=[1];for(ib=0;ib<Ea;ib++)rb[ib+1]=rb[ib]+e.getRow(ib).getHeight();Kb=rb[rb.length-1]-Ua.BOX_LEN-2;var ic=h().getRowAnalyticalFieldSet();for(ib=0;ib<bb;ib++){var rc=ic.get(ib);rc&&(Tb=Wb[ib]+1,rc=ya.createLittleBox(Tb,Kb,rc,!1),Ib.append(rc))}Tb=Wb[Wb.length-1]-Ua.BOX_LEN-1;Wb=h().getColumnAnalyticalFieldSet();for(ib=0;ib<Jb;ib++)if(rc=Wb.get(ib))Kb=rb[ib],rc=ya.createLittleBox(Tb,Kb,rc,!0),
Ib.append(rc);return Eb}}var aa=120,la=this,x,d,b,e,c,a=!0,q=!0,u,v,y=!1,C,P=!1,U,fa,wa,ma,Ea,Xa,bb,Jb,Ya,nb=0,wb,va,Y,J,N,X,Q,G,T,R,S,ca,H,I,M,K,ha,Aa,Ta,db,jb,Na,xb,Ub,ec=10,kc=10,Pb=0,Qb=0,ac,bc,Bb,ya=new Ua,Oa={},Ra,Ca,Pa,gb=[],pb,Cb=-1,Rb=-1,Yb=-1,zb;this.getJqUi=function(){b||(b=$("<div>"),b.css("cursor","default"),b.on("contextmenu",function(ua){return!1}));return b};this.resize=function(ua){y||(x&&(ua=x,x=null,r(ua)),e&&(e.relayoutViews(),Gb()))};this.setFakeClipboardSupported=function(ua){a=
ua};this.setRowColumnDraggable=function(ua){q=ua};this.setScrollerVisible=function(ua,Ia){u=ua;v=Ia};this.keepCalm=function(ua){y!=ua&&((y=ua)||la.resize())};this.destroy=function(){c.destroy()};this.setTooltipsWidgetInstance=function(ua){c=ua};var vb=function(ua,Ia,ib){zb(pb,ua,-1,Ia,-1,ib)},p=function(ua,Ia,ib,rb){zb(pb,ua,Ia,-1,ib,rb)},f=function(ua){c.hide(!0);wb&&wb("");e=null;y=P=!1;ya.bindContext(b,h(),N.getCommandManager());Bb=bc=null;b.is(":visible")?r(ua):x=ua};this.reset=function(){Oa=
{};gb=[];Jb=bb=Ea=ma=0;y=!0;C=null};this.repaint=function(ua){ua?f(ua):e&&(e.updateUI(!0),Hb())};this.setPromptListener=function(ua){wb=ua};this.setLegendsNeededListener=function(ua){va=ua};this.setPreUpdateListener=function(ua){Y=ua};this.setExhibitionChangedListener=function(ua){J=ua};this.showNoDataPrompt=function(ua,Ia){b.empty();var ib=$("<div>");ib.addClass("sa-exhibition-nodata-prompt");ib.css({position:"relative",padding:"40px"});ib.appendTo(b);ib.text(ua);Ia&&Ia(b)};this.clearHeightWidthCacheAction=
function(){var ua=new na;ua.setMethod(function(){return Oa},function(Ia){Oa=Ia});N.getCommandManager().perform(ua)};this.clearTreeExpandState=function(){var ua=new l;N.getCommandManager().perform(ua)};this.collectStatus=function(ua){var Ia=ua.setHeights;a:{var ib=E(-1,-1);var rb=ia(-1);ib[ib.length-1]=rb;for(rb=0;rb<ib.length;rb++)if(-1!=ib[rb])break a;ib=null}Ia.call(ua,ib);Ia=ua.setWidths;a:{ib=F(-1,-1);rb=za(-1);ib[ib.length-1]=rb;for(rb=0;rb<ib.length;rb++)if(-1!=ib[rb])break a;ib=null}Ia.call(ua,
ib);Ia=E(A(),Qb);ib=ia(kc);Ia[Ia.length-1]=ib;ib=F(aa,Pb);rb=za(ec);ib[ib.length-1]=rb;ua.collectPaintableStatus(Ia,ib);Ia=[];if(0<gb.length)for(ib=0;ib<gb.length;ib++)rb=gb[ib].toJsonObject(),Ia.push(rb);ua.setJsonTreeExpandStates(Ia)};this.applyStatus=function(ua){Oa={};var Ia=ua.getHeights(),ib=ua.getWidths();if(Ia){for(var rb=h().getColumnAnalyticalFieldSet(),Tb=rb.getCount(),Kb=Ia.length-1,Eb=0;Eb<Kb;Eb++){var Ib=Ia[Eb];if(-1!=Ib){var Wb=Eb<Tb?rb.get(Eb):null;hc(Wb).setTopHeight(Ib)}}Ia=Ia[Ia.length-
1];-1!=Ia&&(rb=z(),hc(rb).setLeftHeight(Ia))}if(ib){Ia=h().getRowAnalyticalFieldSet();rb=Ia.getCount();Tb=ib.length-1;for(Kb=0;Kb<Tb;Kb++)Eb=ib[Kb],-1!=Eb&&(Ib=Kb<rb?Ia.get(Kb):null,hc(Ib).setLeftWidth(Eb));ib=ib[ib.length-1];-1!=ib&&(Ia=L(),hc(Ia).setTopWidth(ib))}if(ua=ua.getJsonTreeExpandStates())for(ib=0;ib<ua.length;ib++)Ia=ua[ib],rb=new eb,rb.fromJsonObject(Ia),gb.push(rb)};this.keepScrollStatus=function(ua){C=ua&&e?e.keepScrollStatus():null};this.setContextGetter=function(ua){N=ua};this.isExportable=
function(){return P};var h=function(){return N.getAnalyticalModel()};this.protectedMethod={initTooltipsWidget:function(ua,Ia,ib,rb){c||(c=new Ja);c.setDetailShowedImpl(ua,Ia);c.setLinkageImpl(ib,rb)},setCacheLoader:function(ua){zb=ua},createFacade:function(ua,Ia,ib){return N.createFacade(ua,Ia,ib)},getBlockingJqUi:function(){return N.getBlockingJqUi()},setExecutedModel:f};var k=function(){for(var ua=h().getRowAnalyticalFieldSet(),Ia=0;Ia<ua.getCount();Ia++)if(ua.get(Ia).getMetaField().isParentChildDimension())return!0;
return!1},g=function(){return U.getName()==Wa.CHARTTYPE_TABLE},m=function(){bc||(bc=new Va,wa==La.LANDSCAPE?bc.setLandscape(!0):wa==La.PORTRAIT&&bc.setLandscape(!1),bc.setSecondaryType(fa));bc.setChatConfig(N.getPreferences().getChartConfig());bc.setAxisModel(null);return bc},r=function(ua){if(ua){var Ia=k();X=new KTStyle;X.setVerticalAlign("middle");X.setFontSize(da.getFontSize());X.setFontUnit("px");X.setFontName(da.getFontName());X.setTextAlign("right");Q=new KTStyle;Q.setTextAlign("center");Q.setColor(kb.TOP_HEAD_COLOR);
Q.setBackgroundColor(kb.TOP_HEAD_BACKGROUND);G=new KTStyle;G.setTextAlign("right");G.setColor(kb.TOP_HEAD_COLOR);G.setBackgroundColor(kb.TOP_HEAD_BACKGROUND);T=new KTStyle;T.setTextAlign("left");T.setBackgroundColor(kb.LEFT_HEAD_BACKGROUND);R=new KTStyle;R.setTextAlign("left");S=new KTStyle;S.setBold(!0);ca=new KTStyle;ca.setBackgroundColor(Ia?kb.LEFT_HEAD_BACKGROUND:kb.ROW_BACKGROUND_ODD);I=ca.copy();I.setBold(!0);H=new KTStyle;H.setBackgroundColor(Ia?kb.LEFT_HEAD_BACKGROUND:kb.ROW_BACKGROUND_EVEN);
M=H.copy();M.setBold(!0);K=new KTStyle;K.setBold(!1);Ia?(ha=new KTBorderStyle,ha.setBorderWidth(1),ha.setBorderPen("solid"),ha.setBorderColor(kb.BORDER_COLOR)):ha=null;Ta=new KTBorderStyle;Ta.setLeftBorderWidth(1);Ta.setLeftBorderPen("solid");Ta.setLeftBorderColor(kb.BORDER_COLOR);db=new KTBorderStyle;db.setRightBorderWidth(1);db.setRightBorderPen("solid");db.setRightBorderColor(kb.BORDER_COLOR);jb=new KTBorderStyle;jb.setLeftBorderWidth(1);jb.setLeftBorderPen("solid");jb.setLeftBorderColor(kb.BORDER_COLOR);
jb.setRightBorderWidth(1);jb.setRightBorderPen("solid");jb.setRightBorderColor(kb.BORDER_COLOR);Aa=new KTBorderStyle;Aa.setBottomBorderWidth(1);Aa.setBottomBorderPen("solid");Aa.setBottomBorderColor(kb.BORDER_COLOR);Na=new KTBorderStyle;Na.setTopBorderWidth(1);Na.setTopBorderPen("solid");Na.setTopBorderColor(kb.BORDER_COLOR);xb=new KTBorderStyle;xb.setLeftBorderWidth(1);xb.setLeftBorderPen("solid");xb.setLeftBorderColor(kb.BORDER_COLOR);Ub=new KTBorderStyle;Ub.setRightBorderWidth(1);Ub.setRightBorderPen("solid");
Ub.setRightBorderColor(kb.BORDER_COLOR);Ub.setBottomBorderWidth(1);Ub.setBottomBorderPen("solid");Ub.setBottomBorderColor(kb.BORDER_COLOR);Ya=(Ia=(Ia=ua.leftTopHead)?Ia.plane:null)&&0<Ia.length?!0:!1;var ib=ua.topHead;Ea=0==ib.length?Ya?1:0:ib[0].length;var rb=ua.leftHead;ma=0==rb.length?Ya?Ia.length:0:rb[0].length;aa=1!=ma||Ya?120:160;Ia=0==Ea&&0==ma;P=!Ia;var Tb=ua.draw,Kb=Tb.type;fa=Tb.secondaryType;wa=Tb.direction;Tb=ua.commonCell;U=oa.ChartTypeFactory.getInstance(Kb);d=U.createJsonCellParser();
d.parseCommonCell(Tb);var Eb=ua.legends;Pa=Ca=Ra=null;if(Eb){Kb=Eb.size;Tb=Eb.continuousColor;Eb=Eb.discreteColor;if(Tb){var Ib=new mb;Ib.setJsonModel(Tb);Ra=Ib}Eb&&(Ib=new qb,Ib.setJsonModel(Eb),Ca=Ib);Kb&&(Ib=new ub,Ib.setJsonModel(Kb),Pa=Ib)}rb=rb.length;ib=ib.length;Kb=[Ra,Ca,Pa];Y&&Y(rb,ib,Kb);b.empty();Ia?(la.showNoDataPrompt(Sa.get("incompleteTemplate","\u5b9a\u4e49\u4e0d\u5b8c\u6574\uff0c\u65e0\u53ef\u89c6\u5316\u5185\u5bb9\u3002")),va([null,null,null])):(Ia=C,t(ua),w(),va([Ra,Ca,Pa]),Ia&&
e.restoreScrollStatus(Ia));e&&Hb()}else b.empty();J&&J()},w=function(){if(Pa){var ua=Math.min(ia(kc),za(ec));ua=parseInt(.8*ua);Pa.setBaseDiameter(ua)}},n=function(ua,Ia){ua?(pb=ua.cacheKey,Cb=ua.nextPartRowStart,Rb=ua.everyPartRows,(ua=ua.totalRows)&&(Yb=ua),g()&&void 0!==Cb&&(0<=Cb?(ua=Sa.get("promptLazyLoading","\u5171#1\u884c\uff0c\u5df2\u52a0\u8f7d#2\u884c\u3002"),ua=ua.replace("#1",Yb).replace("#2",Cb),wb&&wb(ua)):(ua=Sa.get("promptAllRowsLoaded","\u5171#1\u884c\uff0c\u5df2\u5168\u90e8\u52a0\u8f7d\u3002"),
ua=ua.replace("#1",Yb),wb&&wb(ua)))):(pb=null,Rb=Cb=-1,Yb=Ia,g()&&(ua=Sa.get("promptAllRowsLoaded","\u5171#1\u884c\uff0c\u5df2\u5168\u90e8\u52a0\u8f7d\u3002"),ua=ua.replace("#1",Yb),wb&&wb(ua)))},t=function(ua){var Ia=[];n(ua.exhibitionCache,ua.leftHead.length);e=new KTable;e.setCrossFrozenRenderMode(KTCrossFrozenRenderMode.STUPID_LIGHT);e.setSyncUIWhenModelChanged(!1);e.setMergeBlockTextVisibleAlways(!0);e.setDraggableAdjusting(q,Ea,ma,new ta);e.setCellAcrossListener($b);e.setMultiTreeSupported(!0,
Ea,ma);e.addCellClickListener(Nb);e.setLargeDataMode(!0,!1);N.getMeta().isMdOfSrcMode()?e.addTreeExpandListener(Ob):(e.setSyncMergeBlockWhenModelChanged(!1),pb&&void 0===Cb&&(e.addTreeExpandListener(tb),e.addTreeStateChangedListener(function(Ib,Wb){Ib=Wb.getCell().getTreeModel();Ib.isHorizontal()||Ib.isLazyLoaded()||!Ib.isExpanded()||Wb.preventDefault()})),pb&&void 0!==Cb&&e.addScrollToBottomListener(function(Ib,Wb){0<=Cb&&vb(Cb,Rb,function(ic){n(ic.exhibitionCache);e.lazyAppendData(!0);D(ic.leftHead,
ic.cells,Ia);e.lazyAppendData(!1)})}));u&&v&&e.setScrollerVisible(u,v);e.setStyle(X);ha&&e.setBorder(ha);var ib=new W(e);ib.setOutsideVisible(!1);e.setCellRender(ib);var rb=ua.shedTitle.atColumn;Xa=ua.shedTitle.atRow;Jb=rb.length;bb=Xa.length;ib=dc();var Tb=ua.rowsIdx,Kb=null;Tb&&(Kb=function(Ib,Wb){var ic=new sb;ic.setShedTitleModel(Wb);ic.setBizRowIdx(Tb[Ib]);Ib=e.addRow();Ib.setUserObject(ic);return Ib});var Eb=ua.warning;Eb&&lb(Eb);Za(ua.cells);O(ua.topHead,rb,ib);D(ua.leftHead,ua.cells,Ia,Kb);
yb(ua.mergeBlocks);e.setUICustomStyleMap({"background-color":kb.TABLE_CONTAINER_BACKGROUND});rb=$(e.getUI());rb.appendTo(b);rb.addClass("sa-exhibition-table");0<e.getRowsCount()&&0<e.getColumnsCount()&&(B(ua.leftTopHead),e.updateUI(!0,C));C=null;e.setSyncUIWhenModelChanged(!0);jc(ib)},B=function(ua){var Ia=ua.diagonal;ua=ua.plane;if(Ia){ua=Ia.crossRows;var ib=Ia.crossColumns,rb=Ia.titles;Ia=new KTDiagonalModel;Ia.setCrossRows(ua);Ia.setCrossColumns(ib);for(var Tb=[],Kb=[],Eb=0;Eb<ua;Eb++)Eb<ua-1&&
(Tb[Eb]=1),Ia.setText(rb[Eb],Eb),Ia.setLean(!0,Eb);for(Eb=0;Eb<ib;Eb++){Eb<ib-1&&(Kb[Eb]=1);var Ib=ib+ua-Eb-1;Ia.setText(rb[Ib],Ib);Ia.setLean(0<Eb,Ib)}Ia.setLinkToRows(Tb);Ia.setLinkToColumns(Kb);ua=e.getRow(0).getCell(0);ua.setValue(Ia);ua.setBorder(Ub);ua.setStyle(Q);e.setDiagonalRender(new ea)}else if(ua)for(ib=0;ib<ua.length;ib++)Ia=e.getRow(0).getCell(ib),Ia.setValue(ua[ib]),Ia.setBorder(Aa),Ia.setStyle(Q)},A=function(){return parseInt(10*((Ya?.5:ma/(0==Ea?1:Ea))-.5)+30)},E=function(ua,Ia){for(var ib=
[],rb=0,Tb=h().getColumnAnalyticalFieldSet(),Kb=Tb.getCount(),Eb=0;Eb<Ea;Eb++){if(Eb<Kb){var Ib=Tb.get(Eb);var Wb=fc(Ib,!0);!Wb&&Ib.getMetaField().isParentChildDimension()&&(Wb=50)}else Wb=fc(null,!0);ib[Eb]=Wb?Wb:Eb==Ea-1?Ia:ua;rb+=ib[Eb]}ib[Ea]=rb;return ib},F=function(ua,Ia){for(var ib=[],rb=0,Tb=h().getRowAnalyticalFieldSet(),Kb=Tb.getCount(),Eb=0;Eb<ma;Eb++){if(Eb<Kb){var Ib=Tb.get(Eb);Ib=lc(Ib,!0)}else Ib=lc(null,!0);ib[Eb]=Ib?Ib:Eb==ma-1?Ia:ua;rb+=ib[Eb]}ib[ma]=rb;return ib},z=function(){var ua=
h().getRowAnalyticalFieldSet();return 0<ua.getCount()?ua.get(ua.getCount()-1):null},L=function(){var ua=h().getColumnAnalyticalFieldSet();return 0<ua.getCount()?ua.get(ua.getCount()-1):null},ia=function(ua){var Ia=z();return(Ia=fc(Ia,!1))?Ia:ua},za=function(ua){var Ia=L();return(Ia=lc(Ia,!1))?Ia:ua},Za=function(ua){var Ia=0,ib=0;ua&&0<ua.length&&(Ia=ua.length,(ua=ua[0])&&0<ua.length&&(ib=ua.length));ua=m();var rb=U.getSuggestedSize(ua,h());ac=rb;var Tb=rb.getMinWidth(),Kb=rb.getMinHeight(),Eb=rb.getMaxWidth(),
Ib=rb.getMaxHeight();ua=rb.getWidthHeightRatio();var Wb=aa;Pb=rb.getLeftAxisColumnWidth();Pb=0<Pb?Pb:Wb;Wb=F(Wb,Pb);Wb=Wb[Wb.length-1];var ic=A();Qb=rb.getTopAxisRowHeight();Qb=0<Qb?Qb:ic;rb=E(ic,Qb);rb=rb[rb.length-1];Eb>Tb?(ic=b.innerWidth()-30,ib=parseInt((ic-Wb)/(0==ib?10:ib))+1,ec=ib<Tb?Tb:ib>Eb?Eb:ib):ec=Tb;Ib>Kb?(ib=b.innerHeight()-30,Ia=parseInt((ib-rb)/(0==Ia?10:Ia))+1,kc=Ia<Kb?Kb:Ia>Ib?Ib:Ia):kc=Kb;0<ua&&(Ia=parseInt(kc*ua),Ia<ec?ec=Ia:Ia>ec&&(kc=parseInt(ec/ua)))},lb=function(ua){var Ia=
$("<div>");Ia.text(ua);Ia.appendTo(b);Ia.addClass("sa-exhibition-warning");ua=new qa;ua.setText("X");ua.addActionListener(function(){Ia.remove()});ua.getJqUi().addClass("sa-exhibition-warning-close");ua.getJqUi().appendTo(Ia)},O=function(ua,Ia,ib){var rb=g(),Tb=ua.length,Kb=!1;256<Tb&&(Kb=!0,Tb=256,lb(Sa.get("tooMuchColumns","\u5217\u6570\u592a\u591a\u4e0d\u80fd\u663e\u793a\u5b8c\u6574\uff0c\u5c1d\u8bd5\u628a\u6570\u636e\u591a\u7684\u5b57\u6bb5\u653e\u5230\u884c\u4e0a\u3002")));for(var Eb=F(aa,Pb),
Ib=0;Ib<ma;Ib++){var Wb=e.addColumn();Wb.setWidth(Eb[Ib]);Ib==ma-1?(Wb.setStyle(R),0==Ib?Wb.setBorder(db):Wb.setBorder(jb)):(Wb.setStyle(T),Wb.setBorder(xb))}Eb=za(ec);nb=!k()&&rb||Kb?1:0;var ic=Tb+nb;for(Ib=0;Ib<ic;Ib++)Wb=e.addColumn(),Wb.setUserObject(new Vb),Wb.setWidth(Ib<Tb?Eb:4),0==Ib&&Wb.setBorder(xb);Eb=E(A(),Qb);ic=[];var rc=[];for(Ib=0;Ib<Ea;Ib++){var wc=e.addRow();wc.setHeight(Eb[Ib]);Ib==Ea-1&&wc.setBorder(Aa);(Wb=Ib<Ea-1||!rb)||(Wb=h().getColumnAnalyticalFieldSet(),Wb=0<Wb.getCount()?
Wb.get(Wb.getCount()-1).getMetaField().isParentChildDimension():!1);Wb?wc.setStyle(Q):wc.setStyle(G);for(var yc,vc=null,Ac=!0,Cc=!1,Jc=65535,Ec=0;Ec<Tb;Ec++){var Hc=ma+Ec;Wb=e.getColumn(Hc);var Fc=Wb.getUserObject(),Gc=Ba(ua[Ec][Ib],Fc,Ib<Ia.length?Ia[Ib]:null);Fc=Gc[0];var $a=Gc[1],Db=Gc[2];Gc=Gc[3];var Sb=null,cc=null;0<ib.length&&(cc=rc[Ec],cc||(cc=new eb,cc.setHorizontal(!0),rc[Ec]=cc));Fc||$a?(Sb=wc.getCell(Hc),Sb.setValue(Fc),Sb.setUserObject($a),!Gc&&Sb.setStyle(K),Db?((Ac=Fa(Ac,vc,Sb,Db,!0,
ib,cc))?vc=Cc:(vc=!0,Cc=Sb.getTreeModel(),Cc.getLevel()<=Jc&&(vc=!1,Jc=Cc.isExpanded()?65535:Cc.getLevel()),Cc=vc),ic[Ec]=ic[Ec]||vc):(cc&&cc.addKey(Fc),Ac=Ac?vc?vc.getValue()==Fc:!0:!1)):(cc&&cc.addKey(null),Ac=!1);Gc&&Wb.setStyle(S);Ib<Ea-1&&(Fc!=yc&&Wb.setBorder(xb),yc=Fc);ic[Ec]&&Wb.setHide(!0);vc=Sb}}!rb&&0<Ea&&!1===ac.isTopAsNumberAxis()&&(ua=e.getRow(Ea-1),Ia=ua.getStyle(),Ia=Ia.copy(),Ia.setWrapText(!0),Ia.setVerticalAlign("top"),ua.setStyle(Ia));if(Kb&&0<Ea)for(Hc=e.getColumnsCount()-1,e.getColumn(Hc).setWidth(40),
Ib=0;Ib<Ea;Ib++)wc=e.getRow(Ib),Sb=wc.getCell(Hc),Sb.setValue("...")},D=function(ua,Ia,ib,rb){rb||(rb=function(Ac,Cc){Ac=e.addRow();Ac.setUserObject(Cc);return Ac});for(var Tb=g(),Kb=e.getColumnsCount()-ma-nb,Eb=ia(kc),Ib=H,Wb=!1,ic=null,rc=0;rc<ua.length;rc++){Tb&&(Ib=Wb?ca:H);var wc=ua[rc],yc=new Vb,vc=rb(rc,yc);vc.setHeight(Eb);vc.setStyle(Ib);V(ib,wc,vc,ic,yc,Wb);(ic=Ia[rc])&&0<ic.length&&sa(Kb,ic,vc,Tb);Tb&&(Wb=!Wb);ic=vc}},V=function(ua,Ia,ib,rb,Tb,Kb){for(var Eb=!0,Ib=0;Ib<Ia.length;Ib++){var Wb=
Ba(Ia[Ib],Tb,Ib<Xa.length?Xa[Ib]:null),ic=Wb[0],rc=Wb[1],wc=Wb[2];Wb=Wb[3];if(ic||rc){var yc=rb?rb.getCell(Ib):null,vc=ib.getCell(Ib);vc.setValue(ic);vc.setUserObject(rc);!Wb&&vc.setStyle(K);Eb=wc?Fa(Eb,yc,vc,wc,!1,null,null):Eb?yc?yc.getValue()==ic:!0:!1}else Eb=!1;Wb&&ib.setStyle(Kb?I:M);Ib<ma-1&&(ic!=ua[Ib]&&ib.setBorder(Na),ua[Ib]=ic)}},sa=function(ua,Ia,ib,rb){for(var Tb=0;Tb<ua;Tb++){var Kb=Ia[Tb];if(Kb){var Eb=ib.getCell(Tb+ma);Eb.setUserObject(Kb);if(rb){var Ib=Kb.text;Ib&&(Eb.setValue(Ib),
Kb=Kb.color)&&(Ib=new KTStyle,Ib.setColor(" "+Kb),Eb.setStyle(Ib))}}}},Ba=function(ua,Ia,ib){var rb=null,Tb=null,Kb=null,Eb=!1,Ib=!1;if("string"==typeof ua)rb=ua,Eb=!0;else if(ua)switch(ua.type){case "ns":rb=ua.text;var Wb=ua.value;Eb=!0;break;case "axis":Kb=ua;break;case "subtotal":rb=ua.text;Ib=!0;break;case "measure":rb=ua.text;Ia.setMeasureIndex(ua.index);break;case "tree":rb=ua.text;var ic=ua;Eb=!0;Tb=ua.id;break;default:throw Error("Unknown HeadCell type.");}Ia&&ib&&(Eb?Ia.addItem(ib,rb,Tb,
Wb):Ib&&Ia.addItemForSubtotal());return[rb,Kb,ic,Ib]},Fa=function(ua,Ia,ib,rb,Tb,Kb,Eb){var Ib=rb.id;Eb&&Eb.addKey(Ib);var Wb;if(Ia){var ic=Ia.getUserObject();(ua=ua?Ib==ic:!1)&&(Wb=Ia.getTreeModel())}else ua=!1;if(!Wb){Ia=rb.level;ic=rb.last;var rc=rb.asParent?!0:!1;rb=rb.expanded?!0:!1;Wb=new KTCellTreeModel(Ia,Tb);(ic||0===ic)&&Wb.setLastChildLevel(ic);Wb.setHaveHandlerAlways(rc);if(Tb){if(Eb){rb=0>Ia;a:{if(0<Kb.length)for(Tb=0;Tb<Kb.length;Tb++)if(Ia=Kb[Tb],Ia.isSameKey(Eb)){Kb.splice(Tb,1);Kb=
Ia;break a}Kb=null}Kb&&(rb=Kb.isExpanded())}}else rc&&Wb.setLazyLoaded(rb);Wb.setExpanded(rb)}ib.setTreeModel(Wb);ib.setUserObject(Ib);return ua},yb=function(ua){for(var Ia=e.getColumnsCount()-nb,ib=[],rb=0;rb<ua.length;rb++){var Tb=ua[rb],Kb=Tb[2];Kb<Ia&&ib.push(new KTMergeBlock(Tb[0],Tb[1],Kb,Tb[3]<Ia?Tb[3]:Ia-1))}e.addMergeBlocks(ib)},Hb=function(){m().getChartConfig().getTableConfig().isFrozenTop()?e.setFrozenRows(Ea):e.setFrozenRows(0);Gb()},Gb=function(){if(m().getChartConfig().getTableConfig().isFrozenLeft()){for(var ua=
b.innerWidth(),Ia=0,ib=0,rb=Math.min(ma+1,e.getColumnsCount());ib<rb;ib++)Ia+=e.getColumn(ib).getWidth();e.setFrozenColumns(Ia>ua?0:ma)}else e.setFrozenColumns(0)},Nb=function(ua,Ia){a&&Ia.isLeftButton()&&(ua=(ua=Ia.getCell())?ua.getValue():"",ob.fakeCopy("string"==typeof ua?ua:""))},$b=function(ua,Ia,ib){var rb=!0,Tb=!0;if(ua){var Kb=Ia<Ea||ib<ma;if((Tb=ib>=e.getColumnsCount()-nb)||!g()&&!Kb)rb=!1}Kb=ua&&0<ua.length?ua[0]:null;if(Bb!=Kb){if(Bb){var Eb=Bb["qing-bg"];delete Bb["qing-bg"];Eb&&$(Bb).css("background-color",
Eb);Bb["qing-left-top-header"]?ya.showOperatingTips($(Bb),!1):Bb["qing-sorting-top-header"]?ya.hideRowsSortingTips($(Bb)):Bb["qing-sorting-left-header"]&&ya.hideColumnsSortingTips($(Bb))}Kb&&(rb&&(Kb["qing-bg"]=ua.css("background-color"),ua.css("background-color",kb.CELL_ACROSS_COLOR)),Ya&&0==Ia&&ib<ma||!Ya&&0==Ia&&0==ib?(ya.showOperatingTips(ua,!0),Kb["qing-left-top-header"]=!0):U.isCellMeasurable(h())&&(!Tb&&(h().getRowAnalyticalFieldSet().hasAnyDimension()&&Ia==Ea-1||Ya&&0==Ia&&ib>=ma)?(Ia=e.getColumn(ib).getUserObject(),
ya.showRowsSortingTips(ua,Ia),Kb["qing-sorting-top-header"]=!0):h().getColumnAnalyticalFieldSet().hasAnyDimension()&&ib==ma-1&&(Ia=e.getRow(Ia).getUserObject(),Ia=Ia instanceof sb?Ia.getShedTitleModel():Ia,ya.showColumnsSortingLittleBox(ua,Ia),Kb["qing-sorting-left-header"]=!0)));Bb=Kb}},nc=function(ua,Ia,ib,rb){var Tb=new eb;Tb.setExpanded(ua);Tb.setHorizontal(Ia);ua=function(Eb){Eb=Eb.getTreeModel()?Eb.getUserObject():Eb.getValue();Tb.addKey(Eb)};if(Ia)for(Ia=0;Ia<=ib;Ia++){var Kb=e.getRow(Ia).getCell(rb);
ua(Kb)}else for(ib=e.getRow(ib),Ia=0;Ia<=rb;Ia++)Kb=ib.getCell(Ia),ua(Kb);return Tb},Ob=function(ua,Ia){ua=Ia.isExpanded();var ib=Ia.getCell().getTreeModel().isHorizontal(),rb=Ia.getRowIdx();Ia=Ia.getColIdx();Ia=nc(ua,ib,rb,Ia);ua=new ba;ua.setValue(Ia);N.getCommandManager().perform(ua)},tb=function(ua,Ia){var ib=Ia.isExpanded(),rb=Ia.getCell().getTreeModel(),Tb=rb.isHorizontal();ua=Ia.getRowIdx();var Kb=Ia.getColIdx();Ia=nc(ib,Tb,ua,Kb);Zb(Ia,rb.getLevel());if(!Tb&&ib&&!rb.isLazyLoaded()){rb.setLazyLoaded(!0);
Ia=e.searchMergeBlock(ua,Kb);var Eb=(Ia?Ia.getRowIdxTo():ua)+1,Ib=!1;ua=e.getRow(ua).getUserObject().getBizRowIdx();p(ua,Kb,Eb,function(Wb){var ic=Wb.leftHead,rc=Wb.cells,wc=Wb.rowsIdx;Wb=Wb.mergeBlocks;Ib=0<Wb.length;var yc=e.isSyncUIWhenModelChanged();e.setSyncUIWhenModelChanged(!1);D(ic,rc,[],function(vc,Ac){var Cc=new sb;Cc.setShedTitleModel(Ac);Cc.setBizRowIdx(wc[vc]);vc=e.insertRow(Eb);vc.setUserObject(Cc);Ib=Xb(Eb,Kb)||Ib;Eb++;return vc});yb(Wb);Ib&&e.bucketingMergeBlocks(!0);e.setSyncUIWhenModelChanged(yc);
e.updateUI(!0)})}},Xb=function(ua,Ia){var ib=[],rb=!1;e.visitAllMergeBlocks(function(Eb){ua<=Eb.getRowIdxFrom()?(Eb.setRowIdxFrom(Eb.getRowIdxFrom()+1),Eb.setRowIdxTo(Eb.getRowIdxTo()+1),rb=!0):ua<=Eb.getRowIdxTo()?(Eb.setRowIdxTo(Eb.getRowIdxTo()+1),rb=!0):ua-1==Eb.getRowIdxTo()&&Eb.getColIdxTo()<Ia&&(Eb.setRowIdxTo(Eb.getRowIdxTo()+1),rb=!0,ib[Eb.getColIdxTo()]=!0)});for(var Tb=[],Kb=0;Kb<Ia;Kb++)ib[Kb]||Tb.push(new KTMergeBlock(ua-1,ua,Kb,Kb));0<Tb.length&&e.addMergeBlocks(Tb);return rb},Zb=function(ua,
Ia){for(var ib=gb.length-1;0<=ib;ib--)if(gb[ib].isSameKey(ua)){gb.splice(ib,1);break}ua.isExpanded()!=0>Ia&&(gb.push(ua),128<gb.length&&gb.splice(0,1))},dc=function(){for(var ua=[],Ia=0;Ia<gb.length;Ia++){var ib=gb[Ia];ib.isHorizontal()&&ua.push(ib)}return ua},jc=function(ua){for(var Ia=0;Ia<ua.length;Ia++)for(var ib=ua[Ia],rb=0;rb<gb.length;rb++)if(gb[rb].isSameKey(ib)){gb.splice(rb,1);break}},hc=function(ua){ua=qc(ua);var Ia=Oa[ua];Ia||(Ia=new xa,Oa[ua]=Ia);return Ia},qc=function(ua){if(ua){var Ia=
ua.getMetaField().getFullName();ua=ua.getPartValue();return Ia+(ua?"~"+ua:"")}return"qing-system-non-field"},fc=function(ua,Ia){ua=qc(ua);ua=Oa[ua];var ib;ua&&(ib=Ia?ua.getTopHeight():ua.getLeftHeight());return ib},lc=function(ua,Ia){ua=qc(ua);ua=Oa[ua];var ib;ua&&(ib=Ia?ua.getLeftWidth():ua.getTopWidth());return ib}};oa.AbstractTooltipsWidget=Ma;var ka,Ha,Sa,da,qa,Ga,ra,cb,Qa,hb,Fb,pa,Ab,Z,Wa,fb,Va,Ka,ab;(function(){var ta=com.kingdee.bos.qing.common;ka=ta.DomUtil;Ha=ta.CanvasUtil;ta=com.kingdee.bos.qing.framework.common;
Sa=ta.MultilanguageManager.createPackageAccessor(oa);da=ta.GlobalFont;ta=com.kingdee.bos.qing.ui.component;qa=ta.WorkButton;ta=com.kingdee.bos.qing.core;hb=ta.Icons;Fb=ta.CommonJsonParser;pa=ta.LinkageRegister;ta=com.kingdee.bos.qing.core.model;Ab=ta.AbstractAnalyticalField;Z=ta.ExecutableValue;ta=com.kingdee.bos.qing.longer.model;Wa=ta.AnalyticalModel;fb=ta.SortingLane;Va=ta.ChartContext;ta=com.kingdee.bos.qing.chart.model;Ga=ta.DiscreteColorLegendModel;ta=com.kingdee.bos.qing.chart.render;ra=ta.SizeLegendRender;
cb=ta.ContinuousColorLegendRender;Qa=ta.DiscreteColorLegendRender;ta=com.kingdee.bos.qing.core.controller;Ka=ta.AbstractAction;ab=ta.ActionChangeProperty})();var kb={BORDER_COLOR:"#d7e2e2",TOP_HEAD_COLOR:"#333",TOP_HEAD_BACKGROUND:"#f4f4f4",LEFT_HEAD_BACKGROUND:"#fff",ROW_BACKGROUND_EVEN:"#fff",ROW_BACKGROUND_ODD:"#f0f4fa",TABLE_CONTAINER_BACKGROUND:"#e9ecf1",CELL_ACROSS_COLOR:"#D6E6F8"},La=new function(){this.PORTRAIT="PORTRAIT";this.LANDSCAPE="LANDSCAPE"};Ua.BOX_LEN=15;Mb.TYPE_SIZE="size";Mb.TYPE_CONTINUOUS_COLOR=
"continuousColor";Mb.TYPE_DISCRETE_COLOR="discreteColor";eb.SEPARATER="_|_";var ob=new function(){var ta;this.fakeCopy=function(ja){ta||(ta=$("<div>"),ta.appendTo($(document.body)),ta.css({position:"absolute",left:-1E3,top:-1E3}));ta.text(ja);var Da=document.createRange();Da.setStart(ta[0],0);Da.setEnd(ta[0],0==ja.length?0:1);ja=window.getSelection();ja.removeAllRanges();ja.addRange(Da)}}})();(function(){function Ua(){function ka(){qb.call(this);var Z=this.protectedMethod,Wa,fb;(function(){Z.setTitle(mb.get("linkage","\u5355\u636e\u8054\u67e5"));Z.getDialogCtrl().setResizeEnabled();Z.setFooterPaneCreator(null);Z.setContentPaneCreator(function(){return Wa=$("<div>")});Z.setClosingAction(function(Va){fb&&fb(Va)})})();this.setClosingAction=function(Va){fb=Va};this.setContent=function(Va){ub.layoutCtrlWithLRTB(Va,0,0,null,0,0,null);Wa.empty();Wa.append(Va)};this.closeDialog=function(){Z.destroy()}}
var Ha,Sa,da,qa,Ga,ra,cb;this.setContext=function(Z,Wa,fb,Va,Ka,ab){Ha=Z;Sa=Wa;da=fb;qa=Va;Ga=Ka;ra=ab};this.jumping=function(){var Z=da.getLinkTargets().getRunnableItems();1<Z.length?hb(Z,function(Wa){Wa&&Qa(Wa)}):Qa(Z[0])};var Qa=function(Z){var Wa=[Z.getForeignKey()];qa&&(Wa=Wa.concat(qa));Wa=da.createDependentMeta(Sa,Wa);var fb=eb.makeJsonLongerClickedContext(ra);eb.jumpToListUi(Z,fb,Ha,Wa,da,Ga,function(Va,Ka){pa(Va,!1===Ka?8E3:5E3)},function(Va,Ka){Fb(Va,function(){Ka(!1)})})},hb=function(Z,
Wa){var fb=0,Va=$("<div>");Va.css("overflow","auto");for(var Ka=0;Ka<Z.length;Ka++){var ab=Z[Ka],kb=eb.makeItemDisplay(ab),La=new sb;La.setText(kb);La.setUserObject(ab);La.addActionListener(function(ob){Wa(ob.getUserObject())});La.getJqUi().appendTo(Va);ub.layoutCtrlWithLRTB(La.getJqUi(),0,0,null,fb,null,30);fb+=40}Ab(400,80+fb).setContent(Va)},Fb=function(Z,Wa){var fb=new Lb(Z);fb.setAlign(Lb.ALIGN_CENTER);var Va=new Vb(mb.get("buttonConfirm","\u6211\u77e5\u9053\u4e86"));Va.addActionListener(function(Ka){Wa()});
Z=$("<div>");Z.append(fb.getJqUi());Z.append(Va.getJqUi());ub.layoutCtrlWithLRTB(fb.getJqUi(),0,0,null,0,50,null);ub.layoutCtrlWithLRTB(Va.getJqUi(),null,null,null,null,10,26);ub.layoutCtrlCenterAlign(Va.getJqUi(),100);fb=Ab(400,200);fb.setContent(Z);fb.setClosingAction(function(Ka){Wa()})},pa=function(Z,Wa){Z=new Lb(Z);Z.setAlign(Lb.ALIGN_CENTER);var fb=$("<div>");fb.append(Z.getJqUi());ub.layoutCtrlWithLRTB(Z.getJqUi(),0,0,null,0,20,null);var Va=Ab(400,200);Va.setContent(fb);setTimeout(function(){Va.closeDialog()},
Wa)},Ab=function(Z,Wa){cb||(cb=new ka,cb.setSize(Z,Wa),cb.showDialog());return cb}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.longer&&(com.kingdee.bos.qing.longer={});"undefined"==typeof com.kingdee.bos.qing.longer.ui&&(com.kingdee.bos.qing.longer.ui={});var Mb=com.kingdee.bos.qing.longer.ui;
Mb.ExecutableExhibition=function(){Mb.Exhibition.call(this);var ka=this.protectedMethod,Ha,Sa,da,qa;this.setRenderingInterceptor=function(hb){da=hb};this.setExecutedListener=function(hb){Ha=hb};this.setExcutedModelChangedListener=function(hb){Sa=hb};this.initCacheLoader=function(){var hb=0;ka.setCacheLoader(function(Fb,pa,Ab,Z,Wa,fb){var Va=(new Date).getTime();ka.createFacade(function(Ka){Ka.timestamp<hb||fb(Ka.tableView)}).easter(Va,Fb,pa,Ab,Z,Wa);hb=Va})};this.initTooltipsWidget=function(hb,Fb,
pa,Ab,Z,Wa){ka.initTooltipsWidget(hb,function(fb){var Va=pa(),Ka=Ab(),ab=Z(),kb=Wa(),La=new oa;La.setContext(Va,Ka,ab,kb,ka.createFacade,Fb);La.setEncodedCoordinateGetter(function(){return JSON.stringify(fb)});La.showDialog()},function(){return Ab().getLinkTargets()?!0:!1},function(fb){var Va=pa(),Ka=Ab(),ab=Z(),kb=Wa(),La=new Ua;La.setContext(ka.createFacade,Va,Ka,ab,kb,fb);La.jumping()})};this.clearExecuted=function(){cb(null)};this.execute=function(hb,Fb,pa,Ab){var Z=ka.createFacade(function(fb){Ha&&
Ha(!0,void 0,void 0);var Va=fb.tableView;fb=fb.filterPreparedValues;Qa(Fb.getFilterFieldSet(),fb,-1);cb(Va)},function(fb,Va,Ka){fb=[fb,Va,Ka];Ha&&Ha(!1,fb,Z);return!0},function(){Wa.hideWaiting()});Z.setCancelable(!0);Z.setShowBlocking(!1);Z.setProgressListener(function(fb){Wa.hookProgressDisplayer(Ma.makeUiCreator(fb))});hb=Z.execute(hb,Fb,pa,Ab);var Wa=Ga(hb)};this.filteringExecute=function(hb,Fb,pa,Ab,Z){var Wa=ka.createFacade(function(Va){Ha&&Ha(!0,void 0,void 0);var Ka=Va.tableView;Va=Va.filterPreparedValues;
Qa(Fb.getFilterFieldSet(),Va,Z);cb(Ka)},function(Va,Ka,ab){Va=[Va,Ka,ab];Ha&&Ha(!1,Va,Wa);return!0},function(){fb.hideWaiting()});Wa.setCancelable(!0);Wa.setShowBlocking(!1);Wa.setProgressListener(function(Va){fb.hookProgressDisplayer(Ma.makeUiCreator(Va))});hb=Wa.filteringExecute(hb,Fb,pa,Ab,Z);var fb=Ga(hb)};this.christmasExecute=function(hb,Fb,pa,Ab,Z,Wa){var fb=ka.createFacade(function(Ka){if(fb.getUserObject()==qa){var ab=function(){Ha&&Ha(!0,void 0,void 0);var kb=Ka.tableView,La=Ka.filterPreparedValues,
ob=Ka.filterSelectedValues,ta=Fb.getFilterFieldSet();if(0<ta.getCount()){for(var ja=0;ja<ta.getCount();ja++){var Da=La[ja],na=ta.getFilter(ja);Da=Ja.create(Da);na.setPreparedModel(Da);ob&&!na.isFullValue()&&(Da=ob[ja])&&na.applySelectedValues(Da)}Wa&&Wa(ta)}cb(kb)};da?(da(ab),da=null):ab()}},function(Ka,ab,kb){if(fb.getUserObject()==qa){var La=function(){var ob=[Ka,ab,kb];Ha&&Ha(!1,ob,fb)};da?(da(La),da=null):La()}return!0},function(){Va.hideWaiting()});ra(fb);fb.setCancelable(!0);fb.setShowBlocking(!1);
fb.setProgressListener(function(Ka){Va.hookProgressDisplayer(Ma.makeUiCreator(Ka))});hb=fb.christmasExecute(hb,Fb,pa,Ab,Z);var Va=Ga(hb)};var Ga=function(hb){var Fb=new xa;Fb.setIconVisible(!0);Fb.hookOwner(ka.getBlockingJqUi(),null);Fb.showWaiting(Ma.getWaitingText(),hb);return Fb},ra=function(hb){qa=(new Date).getTime();hb.setUserObject(qa)},cb=function(hb){ka.setExecutedModel(hb);Sa&&Sa(hb)},Qa=function(hb,Fb,pa){for(var Ab=0;Ab<Fb.length;Ab++){var Z=Fb[Ab];Ab!=pa&&Z&&hb.getFilter(Ab).updatePreparedModel(Z)}}};
var ub,mb,qb,sb,Vb,Lb,xa,eb,Ma,Ja,oa;(function(){var ka=com.kingdee.bos.qing.common;ub=ka.DomUtil;ka=com.kingdee.bos.qing.framework.common;mb=ka.MultilanguageManager.createPackageAccessor(Mb);ka=com.kingdee.bos.qing.ui.component;qb=ka.AbstractModalDialog;sb=ka.WorkButton;Vb=ka.Button;Lb=ka.Label;ka=com.kingdee.bos.qing.common.shared;xa=ka.LongtimeWaitingMask;ka=com.kingdee.bos.qing.core.commonui;eb=ka.LinkageHelper;Ma=ka.ExecutingProgressParser;ka=com.kingdee.bos.qing.core.model;Ja=ka.AbstractFilterPreparedModel;
ka=com.kingdee.bos.qing.core.shared;oa=ka.DetailDataPopupDialog})()})();(function(){function Ua(){Ja.AbstractTabPane.call(this);var da=this,qa,Ga=$("<div>"),ra,cb;this.setModel=function(Qa){qa=Qa};this.ui2model=function(Qa){ra&&da.protectedUi2Model(Qa)};this.protectedUi2Model=function(){throw Error("Implement");};this.getJqUi=function(){return Ga};this.into=function(){ra||(ra=$("<div>"),ra.appendTo(Ga),Vb.layoutCtrlWithLRTB(ra,20,10,null,10,10,null),da.protectedInitUi(ra,qa))};this.protectedInitUi=function(Qa,hb){throw Error("Implement");};this.protectedMethod={appendCtrl:function(Qa,
hb,Fb,pa,Ab,Z){Qa.append(hb);Vb.layoutCtrl(hb,Fb,pa,Ab,Z)},createRadio:function(Qa,hb){!cb&&(cb={});var Fb=cb[Qa];Fb||(Fb=new Ha,cb[Qa]=Fb);Qa=new ka;Qa.setText(hb);Fb.addElement(Qa);return Qa}}}function Mb(){Ua.call(this);var da=this.protectedMethod,qa,Ga,ra,cb,Qa,hb;this.getTabHeadText=function(){return Lb.get("table","\u8868\u683c")};this.protectedInitUi=function(Fb,pa){var Ab=da.appendCtrl;qa=da.createRadio("PML",Lb.get("parallelMeasureAtColumn","\u5de6\u53f3\uff08\u5ea6\u91cf\u540d\u79f0\u663e\u793a\u5728\u4e0a\u8868\u5934\uff09"));
Ga=da.createRadio("PML",Lb.get("parallelMeasureAtRow","\u4e0a\u4e0b\uff08\u5ea6\u91cf\u540d\u79f0\u663e\u793a\u5728\u5de6\u8868\u5934\uff09"));var Z=new eb(Lb.get("parallelMeasureLayout","\u591a\u4e2a\u5ea6\u91cf\u5e76\u5217\u6392\u5e03\uff1a")),Wa=$("<div>");da.appendCtrl(Wa,Z.getJqUi(),0,0,300,23);da.appendCtrl(Wa,qa.getJqUi(),0,25,300,23);da.appendCtrl(Wa,Ga.getJqUi(),0,50,300,23);Ab.call(da,Fb,Wa,0,0,400,75);Ab=da.appendCtrl;ra=da.createRadio("subtotal",Lb.get("totalAhead","\u524d\u9762"));cb=
da.createRadio("subtotal",Lb.get("totalBehind","\u540e\u9762"));Z=new eb(Lb.get("totalPosition","\u5c0f\u8ba1/\u603b\u8ba1\u663e\u793a\u5728\uff1a"));Wa=$("<div>");da.appendCtrl(Wa,Z.getJqUi(),0,0,300,23);da.appendCtrl(Wa,ra.getJqUi(),0,25,300,23);da.appendCtrl(Wa,cb.getJqUi(),0,50,300,23);Ab.call(da,Fb,Wa,0,85,400,75);Ab=da.appendCtrl;Qa=new Ma;Qa.setText(Lb.get("frozenTop","\u4e0a\u8868\u5934"));hb=new Ma;hb.setText(Lb.get("frozenLeft","\u5de6\u8868\u5934"));Z=new eb(Lb.get("frozen","\u51bb\u7ed3\u8868\u5934\uff1a"));
Wa=$("<div>");da.appendCtrl(Wa,Z.getJqUi(),0,0,300,23);da.appendCtrl(Wa,Qa.getJqUi(),0,25,300,23);da.appendCtrl(Wa,hb.getJqUi(),0,50,300,23);Ab.call(da,Fb,Wa,0,170,400,75);Fb=pa.getTableConfig();Fb.isParallelMeasureLayoutAtRow()?Ga.setChecked(!0):qa.setChecked(!0);Fb.isTotalAhead()?ra.setChecked(!0):cb.setChecked(!0);Qa.setChecked(Fb.isFrozenTop());hb.setChecked(Fb.isFrozenLeft())};this.protectedUi2Model=function(Fb){Fb=Fb.getTableConfig();Fb.setParallelMeasureLayoutAtRow(Ga.isChecked());Fb.setTotalAhead(ra.isChecked());
Fb.setFrozenTop(Qa.isChecked());Fb.setFrozenLeft(hb.isChecked())}}function ub(){Ua.call(this);var da=this.protectedMethod,qa,Ga;this.getTabHeadText=function(){return Lb.get("general","\u5168\u90e8\u56fe\u8868")};this.protectedInitUi=function(ra,cb){qa=new Ma;qa.setText(Lb.get("showChartLabel","\u663e\u793a\u56fe\u8868\u6807\u7b7e"));qa.setChecked(cb.isShowLabel());da.appendCtrl(ra,qa.getJqUi(),0,0,200,20);Ga=new Ma;Ga.setText(Lb.get("showLegend","\u663e\u793a\u56fe\u4f8b"));Ga.setChecked(cb.isShowLegend());
da.appendCtrl(ra,Ga.getJqUi(),0,30,200,20)};this.protectedUi2Model=function(ra){ra.setShowLabel(qa.isChecked());ra.setShowLegend(Ga.isChecked())}}function mb(){Ua.call(this);var da=this.protectedMethod,qa,Ga,ra,cb,Qa,hb,Fb;this.getTabHeadText=function(){return Lb.get("chartPie","\u997c\u56fe")};this.protectedInitUi=function(Z,Wa){da.appendCtrl(Z,pa(),0,0,400,25);var fb=da.appendCtrl;ra=new Ma;ra.setText(Lb.get("chartLabelAsName","\u540d\u79f0"));ra.addCheckedListener(Ab);cb=new Ma;cb.setText(Lb.get("chartLabelAsNumber",
"\u6570\u503c"));cb.addCheckedListener(Ab);Qa=new Ma;Qa.setText(Lb.get("chartLabelAsPercent","\u767e\u5206\u6bd4"));Qa.addCheckedListener(Ab);var Va=new eb(Lb.get("showChartLabelAs","\u5f53\u663e\u793a\u56fe\u8868\u6807\u7b7e\u65f6\uff0c\u5c55\u73b0\uff1a")),Ka=$("<div>");da.appendCtrl(Ka,Va.getJqUi(),0,0,300,23);da.appendCtrl(Ka,ra.getJqUi(),0,25,200,23);da.appendCtrl(Ka,cb.getJqUi(),0,50,200,23);da.appendCtrl(Ka,Qa.getJqUi(),0,75,200,23);fb.call(da,Z,Ka,0,35,400,100);fb=da.appendCtrl;hb=da.createRadio("negative",
Lb.get("hideNegative","\u8d1f\u6570\u4e0d\u663e\u793a"));Fb=da.createRadio("negative",Lb.get("absNegative","\u8d1f\u6570\u4f7f\u7528\u7edd\u5bf9\u503c"));Va=new eb(Lb.get("pieChartNegative","\u5f53\u6570\u636e\u4e3a\u8d1f\u503c\u65f6\uff1a"));Ka=$("<div>");da.appendCtrl(Ka,Va.getJqUi(),0,0,300,23);da.appendCtrl(Ka,hb.getJqUi(),0,25,200,23);da.appendCtrl(Ka,Fb.getJqUi(),0,50,200,23);fb.call(da,Z,Ka,0,145,400,75);Z=Wa.getPieConfig();Wa=Z.getTopN();qa.setChecked(0!=Wa);0!=Wa?Ga.setValue(Wa):Ga.setValue(3);
Ga.setEnabled(qa.isChecked());Wa=Z.getLabelType();ra.setChecked((Wa&Sa.LABEL_NAME)==Sa.LABEL_NAME);cb.setChecked((Wa&Sa.LABEL_NUMBER)==Sa.LABEL_NUMBER);Qa.setChecked((Wa&Sa.LABEL_PERCENT)==Sa.LABEL_PERCENT);Z.isHideNegative()?hb.setChecked(!0):Fb.setChecked(!0)};this.protectedUi2Model=function(Z){Z=Z.getPieConfig();var Wa=Ga.getValue();Z.setTopN(qa.isChecked()&&null!=Wa&&""!=Wa?Wa:0);Z.setLabelType((ra.isChecked()?Sa.LABEL_NAME:0)|(cb.isChecked()?Sa.LABEL_NUMBER:0)|(Qa.isChecked()?Sa.LABEL_PERCENT:
0));Z.setHideNegative(hb.isChecked())};var pa=function(){qa=new Ma;qa.addCheckedListener(function(Va){Ga.setEnabled(qa.isChecked())});Ga=new oa;Ga.setConstraint(1,100,1);var Z=new eb(Lb.get("showTop","\u663e\u793a\u524d")),Wa=new eb(Lb.get("otherAs","\u9879\uff0c\u5176\u4f59\u9879\u663e\u793a\u4e3a\u201c\u5176\u5b83\u201d\u3002")),fb=$("<div>");da.appendCtrl(fb,qa.getJqUi(),0,0,20,23);da.appendCtrl(fb,Z.getJqUi(),20,0,40,23);da.appendCtrl(fb,Ga.getJqUi(),60,0,60,23);da.appendCtrl(fb,Wa.getJqUi(),
124,0,300,23);return fb},Ab=function(Z){ra.isChecked()||cb.isChecked()||Qa.isChecked()||Z.setChecked(!0)}}function qb(){Ua.call(this);var da=this.protectedMethod,qa,Ga;this.getTabHeadText=function(){return Lb.get("chartTreeMap","\u6811\u56fe")};this.protectedInitUi=function(ra,cb){var Qa=da.appendCtrl;qa=da.createRadio("negative",Lb.get("hideNegative","\u8d1f\u6570\u4e0d\u663e\u793a"));Ga=da.createRadio("negative",Lb.get("absNegative","\u8d1f\u6570\u4f7f\u7528\u7edd\u5bf9\u503c"));var hb=new eb(Lb.get("pieChartNegative",
"\u5f53\u6570\u636e\u4e3a\u8d1f\u503c\u65f6\uff1a")),Fb=$("<div>");da.appendCtrl(Fb,hb.getJqUi(),0,0,300,23);da.appendCtrl(Fb,qa.getJqUi(),0,25,200,23);da.appendCtrl(Fb,Ga.getJqUi(),0,50,200,23);Qa.call(da,ra,Fb,0,0,400,75);cb.getRectTreeConfig().isHideNegative()?qa.setChecked(!0):Ga.setChecked(!0)};this.protectedUi2Model=function(ra){ra.getRectTreeConfig().setHideNegative(qa.isChecked())}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&
(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.longer&&(com.kingdee.bos.qing.longer={});"undefined"==typeof com.kingdee.bos.qing.longer.ui&&(com.kingdee.bos.qing.longer.ui={});var sb=com.kingdee.bos.qing.longer.ui;sb.ChartSetting=function(){xa.call(this);var da=this,qa=this.protectedMethod,Ga,ra,cb=[new ub,new Mb,new mb,new qb],Qa,hb=this.showDialog;this.showDialog=function(){da.setSize(640,480);qa.setContentPaneCreator(Fb);
qa.setClosingAction(function(pa){if(pa){for(pa=0;pa<cb.length;pa++)cb[pa].ui2model(Qa);Ga(Qa)}});qa.setTitle(Lb.get("chartSetting","\u56fe\u8868\u8bbe\u7f6e"));hb();ra.refreshUi()};this.setChartConfig=function(pa){Qa=pa;for(var Ab=0;Ab<cb.length;Ab++)cb[Ab].setModel(pa)};this.setAcceptedListener=function(pa){Ga=pa};var Fb=function(){ra=new Ja;ra.setBorderVisible(!0);ra.setTabPanes(cb);ra.setTabHeadItemHeight(40);ra.setTabHeadWidth(120);return ra.getJqUi()}};var Vb,Lb,xa,eb,Ma,Ja,oa,ka,Ha,Sa;(function(){var da=
com.kingdee.bos.qing.common;Vb=da.DomUtil;da=com.kingdee.bos.qing.framework.common;Lb=da.MultilanguageManager.createPackageAccessor(sb);da=com.kingdee.bos.qing.ui.component;xa=da.AbstractModalDialog;eb=da.Label;Ma=da.CheckBox;Ja=da.LeftTabContainer;oa=da.Spinner;ka=da.RadioButton;Ha=da.RadioButtonGroup;da=com.kingdee.bos.qing.longer.model;Sa=da.PieChartConfig})()})();(function(){function Ua(){var ya=this,Oa,Ra,Ca,Pa=[],gb=[];this.destroy=function(){ya.getExhibition().destroy()};this.getJqUi=function(){Ra||(Ra=new Da,Ra.setHorizontalSplit(!0),Ra.setFirstSize(-1,200,-1),Ra.setSecondSize(0,0,0),Ra.setFirstChild(ya.getExhibition()),Ra.setSecondChild(Da.createChildWrapper($("<div>"))),Ra.hideSecondHalf(!0),Ra.setEnabled(!1));return Ra.getJqUi()};this.resize=function(p){Ra.resize(p)};this.setContextGetter=function(p){Oa=p};this.clearLegends=function(){gb.length=0;Rb(!0)};
this.clearFilterCards=function(){vb(Pa)};this.refreshRightLanes=function(){Rb()};this.execute=function(p){var f=Oa.getAnalyticalModel(),h=f.createDependentMeta(Oa.getMeta(),Oa.getJsonAdditionalFieldNames()),k=Oa.getPreferences().createExecutingCopy(f.getChartType());ya.getExhibition().setExecutedListener(function(g,m,r){p(g,m,r)});ya.getExhibition().execute(h,f,k,Oa.getJsonAdditionalFilters())};this.filteringExecute=function(p,f){var h=Oa.getAnalyticalModel(),k=h.createDependentMeta(Oa.getMeta(),
Oa.getJsonAdditionalFieldNames()),g=Oa.getPreferences().createExecutingCopy(h.getChartType());ya.getExhibition().setExecutedListener(function(m,r,w){f(m,r,w)});ya.getExhibition().filteringExecute(k,h,g,Oa.getJsonAdditionalFilters(),p)};this.christmasExecute=function(p,f){var h=Oa.getAnalyticalModel(),k=h.createDependentMeta(Oa.getMeta(),Oa.getJsonAdditionalFieldNames()),g=Oa.getPreferences().createExecutingCopy(h.getChartType());ya.getExhibition().setExecutedListener(function(m,r,w){f(m,r,w)});ya.getExhibition().christmasExecute(k,
h,g,Oa.getJsonAdditionalFilters(),p,function(m){0<m.getOnShowFilterCount()&&zb(m)})};this.getExhibition=function(){Ca||pb();return Ca};var pb=function(){Ca=new ac;Ca.getJqUi().addClass("sa-exhibition");Ca.initCacheLoader();Ca.setLegendsNeededListener(Cb);Ca.setContextGetter(Oa);Ca.initTooltipsWidget(function(p){Oa.loadDesignerOperationJudger(function(f){p(f.isDataDetailReadable())})},function(p){Oa.loadDesignerOperationJudger(function(f){p(f.isExportable())})},function(){return Oa.getMeta()},function(){return Oa.getAnalyticalModel()},
function(){return Oa.getJsonAdditionalFieldNames()},function(){return Oa.getJsonAdditionalFilters()})},Cb=function(p){for(var f=0;f<p.length;f++){var h=p[f];if(h){var k=gb[f];if(!k){switch(h.getType()){case bc.TYPE_CONTINUOUS_COLOR:k=new hb;break;case bc.TYPE_DISCRETE_COLOR:k=new Fb;break;case bc.TYPE_SIZE:k=new Qa;break;default:throw Error("Unknown legend-ui type.");}k.setHorizontalOtherwiseVertical(!1);gb[f]=k}h=h.getTitle();k.setTitle(Va.get("legend","\u56fe\u4f8b")+(h?": "+h:""))}else gb[f]=null}Rb();
for(f=0;f<p.length;f++)if(h=p[f])k=gb[f],k.setLegendUi(h)},Rb=function(p){ya.getExhibition().keepCalm(!0);for(var f=0;f<Pa.length;f++)for(var h=Pa[f],k=0;k<h.getChildCount();k++){var g=h.getChild(k);g.keepState()}Ra.setSecondSize(0,0,0);Ra.hideSecondHalf(!0);h=Oa.getAnalyticalModel().getFilterFieldSet();var m=Pa.slice();Pa.length=0;k=function(w){for(var n=0;n<m.length;n++)for(var t=m[n],B=0;B<t.getChildCount();B++){var A=t.getChild(B);if(A.getFilter&&A.getFilter()==w)return t.childLeaveHome(B),A}return null};
g=function(w){for(var n=0;n<m.length;n++)for(var t=m[n],B=0;B<t.getChildCount();B++)t.getChild(B)==w&&t.childLeaveHome(B)};var r=0;for(f=0;f<gb.length;f++)r+=gb[f]?1:0;(0<h.getOnShowFilterCount()||0<r)&&zb(h,k,g);for(f=0;f<Pa.length;f++)for(h=Pa[f],k=0;k<h.getChildCount();k++)g=h.getChild(k),g.restoreState();vb(m);!p&&ya.getExhibition().keepCalm(!1)},Yb=function(){for(var p=0;p<Pa.length;p++)Pa[p].relayout()},zb=function(p,f,h){var k=new Aa;Pa.unshift(k);for(var g=ya.getExhibition().getJqUi().innerHeight(),
m=0,r=p.getCount(),w=0,n=r+gb.length;w<n;w++){var t=!0;if(w<r){var B=p.getFilter(w);t=B.isOnShow();var A=f?f(B):null;A||(p.get(w),A=xa.create(B,Oa),A.setHorizontalOtherwiseVertical(!1));B=A}else{B=gb[w-r];if(!B)continue;h&&h(B)}t=t?Math.max(B.getMinHeight(),Math.min(120,B.getPerfectHeight())):0;m+t>g&&0<m&&(m=0,k=new Aa,Pa.unshift(k));m+=t+Aa.GAP;k.addChild(B)}p=$("<div>");for(w=f=0;w<Pa.length;w++)k=Pa[w],k=k.getJqUi(),Wa.layoutCtrlWithLRTB(k,f,null,Z.FILTER_LANE_WIDTH,0,2,null),p.append(k),f+=Z.FILTER_LANE_WIDTH+
Z.FILTER_LANE_GAP;w=Pa.length*(Z.FILTER_LANE_WIDTH+Z.FILTER_LANE_GAP)-Z.FILTER_LANE_GAP;Ra.setSecondSize(w,w,w);Ra.setSecondChild(Da.createChildWrapper(p,Yb));Ra.hideSecondHalf(!1)},vb=function(p){for(var f=0;f<p.length;f++){var h=p[f];h.clear();h.getJqUi().remove()}p.length=0}}function Mb(){var ya=this,Oa,Ra,Ca=$("<div>"),Pa=$("<div>"),gb=$("<div>"),pb,Cb;this.setDependence=function(vb){Oa=vb};this.getJqUi=function(){Rb();return Ra};this.setTitle=function(vb){Pa.text(vb)};this.setHorizontalOtherwiseVertical=
function(vb){if("undefined"==typeof pb||pb!=vb)(pb=vb)?(Ca.css("left",0),Ca.css("width",Z.CARD_TITLE_WIDTH+"px"),Ca.css("top",0),Ca.css("height","100%"),gb.css("left",Z.CARD_TITLE_WIDTH+"px"),gb.css("right",0),gb.css("top",0),gb.css("height","100%")):(Ca.css("left",0),Ca.css("right",0),Ca.css("top",0),Ca.css("height",Z.CARD_TITLE_HEIGHT+"px"),gb.css("left",0),gb.css("right",0),gb.css("top",Z.CARD_TITLE_HEIGHT+"px"),gb.css("bottom",0))};this.isHorizontalOtherwiseVertical=function(){return pb};this.protectedInitCustomUi=
function(vb,p){};var Rb=function(){if(!Ra){Ra=$("<div>");Ra.addClass("sa-card");Ra.mouseenter(function(h){ya.protectedShowOperateButton(!0)});Ra.mouseleave(function(h){ya.protectedShowOperateButton(!1)});Ca.addClass("sa-card-titlebar");Ca.css("position","absolute");Ca.appendTo(Ra);gb.addClass("sa-card-container");gb.css("position","absolute");gb.appendTo(Ra);Pa.addClass("sa-card-title");Pa.appendTo(Ca);var vb=$("<div>");vb.appendTo(Ca);ya.protectedInitCustomUi(gb,vb);if(Cb){var p=$("<div>");p.addClass("sa-card-operate-item");
p.appendTo(Ca);p.on("mousedown",Yb);var f=$("<div>");f.text("\u25b2");f.addClass("sa-card-operate-text");f.appendTo(p);Wa.layoutCtrlWithLRTB(vb,null,20,null,0,0,null)}else Wa.layoutCtrlWithLRTB(vb,null,2,null,0,0,null);ya.protectedShowOperateButton(!1)}};this.protectedShowOperateButton=function(vb){Ca.find(".sa-card-operate-item").css("display",vb?"block":"none")};var Yb=function(vb){var p=$(vb.target),f=$(vb.currentTarget);if((vb=f.data("menu"))&&vb.isShowing())f.data("menu",null),vb.hide();else{vb=
new ab;vb.setWidth(160);vb.setModel(Cb());vb.setHideListener(function(){f.data("menu",null)});f.data("menu",vb);var h=Ra.parent(),k=[f.outerWidth()-160-2,f.outerHeight()];k=Wa.upwardCoordinate(f[0],k,h[0]);vb.show(h,k[0],k[1],p,!0)}},zb=function(){return Oa.getAnalyticalModel()};this.protectedMethod={setOperateMenuCreator:function(vb){Cb=vb},getViewCtx:function(){return Oa},getAnalyticalModel:zb,getExecutingPreferences:function(){return Oa.getPreferences().createExecutingCopy(zb().getChartType())},
getTitle:function(){return Pa.text()},getJqAll:function(){return Ra},getJqContainer:function(){return gb}}}function ub(){Mb.call(this);var ya=this,Oa=this.protectedMethod,Ra=0,Ca=0,Pa,gb;this.setMetaPaneVisitor=function(zb){gb=zb};this.protectedInitCustomUi=function(zb,vb){zb.on("click",function(p){p=$(p.target);if(p.hasClass("sa-charttypecard-button")){p=p.data("model");var f=Oa.getViewCtx().getCommandManager();f.compositeStart(Va.get("changeChartTypeTo","\u56fe\u8868\u7c7b\u578b\u5207\u6362\u4e3a")+
p.getText());var h=Oa.getAnalyticalModel(),k=h.getChartType()!=p.getName(),g=new bb;g.setMethod(h.getChartType,h.setChartType);g.setValue(p.getName());f.perform(g);p.smartChangeModel(h,f,gb);gb.clearAllSelecteds();k&&Pa&&Pa();f.compositeEnd()}});zb.on("mouseover",function(p){Yb($(p.target))});zb.on("mouseleave",function(p){Yb(null)})};this.updateDisplay=function(){pb(Cb());Rb()};this.relayout=function(zb){if(Ra!=zb){Ra=zb;var vb=Oa.getJqContainer();zb-=2;vb.empty();var p=4,f=4;zb=Math.max(36,zb);
for(var h=Qb.getAllInstance(),k=0;k<h.length;k++){p+28+4>zb&&(p=4,f+=27);var g=h[k],m=$("<div>");m.data("model",g);m.addClass("sa-charttypecard-button");m.css("left",p);m.css("top",f);m.css("width",28);m.css("height",21);x.background(m,g.getIconFileName());m.appendTo(vb);p+=34}Ca=Z.CARD_TITLE_HEIGHT+(f+21+4)+2;Oa.getAnalyticalModel()&&Rb()}return Ca};this.setChangedCoworker=function(zb){Pa=zb};var pb=function(zb){ya.setTitle(Va.get("chartTypeCardTitle","\u56fe\u8868\u7c7b\u578b")+": "+zb.getText())},
Cb=function(){var zb=Oa.getAnalyticalModel().getChartType();return Qb.getInstance(zb)},Rb=function(){var zb=Cb(),vb=Oa.getJqContainer().find(".sa-charttypecard-button");vb.removeClass("sa-charttypecard-button_selected");for(var p=0;p<vb.length;p++){var f=$(vb[p]);if(f.data("model").getName()==zb.getName()){f.addClass("sa-charttypecard-button_selected");break}}},Yb=function(zb){zb&&zb.hasClass("sa-charttypecard-button")?(zb=zb.data("model"),pb(zb)):pb(Cb())}}function mb(){Mb.call(this);var ya=this,
Oa=this.protectedMethod,Ra,Ca,Pa,gb=[],pb,Cb,Rb;this.setModel=function(f){Ra&&Ra.removeChangedListener(Yb);(Ra=f)&&Ra.addChangedListener(Yb);ya.checkAllInvalidFields();ya.protectedUpdateUi()};this.getModel=function(){return Ra};this.setItemPressListener=function(f){Cb=f};this.setItemMenuCreator=function(f){pb=f};this.setDragDropHandler=function(f){var h=-1;f.bindDragUi(Oa.getJqAll(),function(k){if(k.hasClass("sa-carditem-text")){a:{k=k.parent()[0];for(var g=0;g<gb.length;g++)if(gb[g].getJqUi()[0]==
k){h=g;break a}h=-1}k=gb[h];k.getJqUi().addClass("sa-carditem_draging");return k.getAnalyticalField()}return null},function(k,g){if(0<=h){var m=gb[h];m.getJqUi().removeClass("sa-carditem_draging");k&&g.dropOwner!==ya&&(k=new X(Ra),k.setValue(m.getAnalyticalField()),Oa.getViewCtx().getCommandManager().compositeStart(Va.get("move","\u79fb\u52a8")+m.getAnalyticalField().getComplexText()),Oa.getViewCtx().getCommandManager().perform(k))}},function(){h=-1},function(k){var g=new X(Ra);g.setValue(k);Oa.getViewCtx().getCommandManager().perform(g)});
f.bindDropUi(Oa.getJqAll(),Oa.getJqContainer(),function(k,g){p();var m=gb.length;ya.isHorizontalOtherwiseVertical()?(g=(k-.5*Z.CARD_ITEM_H_SPACING)/(Z.CARD_ITEM_WIDTH+Z.CARD_ITEM_H_SPACING)+.25,g=0>g?0:g,k=parseInt(g),g=.5<g-k?"replace":"insert"):(g=(g-.5*Z.CARD_ITEM_V_SPACING)/(Z.CARD_ITEM_HEIGHT+Z.CARD_ITEM_V_SPACING)+.33,g=0>g?0:g,k=parseInt(g),g=.67<g-k?"replace":"insert");k>=m&&(k=m,g="insert");m={action:g,index:k,dropOwner:ya};0<=h&&(k="insert"==m.action&&(m.index==h||m.index==h+1),"replace"==
m.action&&m.index==h||k)&&(m.action="none",m.index=null);k=m.index;"replace"==m.action?gb[k].getJqUi().addClass("sa-carditem_replacable"):"insert"==m.action&&(Ca||(Ca=$("<div>"),Ca.addClass("sa-card-insertprompt-"+(ya.isHorizontalOtherwiseVertical()?"h":"v")),Ca.appendTo(Oa.getJqContainer())),ya.isHorizontalOtherwiseVertical()?Ca.css("left",k*(Z.CARD_ITEM_WIDTH+Z.CARD_ITEM_H_SPACING)):Ca.css("top",k*(Z.CARD_ITEM_HEIGHT+Z.CARD_ITEM_V_SPACING)));return m},function(){p()},function(k,g){k=g.action;return"insert"==
k||"replace"==k},function(k,g){p();var m=g.action;g=g.index;var r=null,w=-1;"replace"==m?(r=new N(Ra),r.setValue(g,k),w=g):"insert"==m&&(r=new J(Ra),r.setValue(k,g));r&&ya.protectedDropHandlerDataPusher(r,k,g,0<=h,w)})};this.protectedDropHandlerDataPusher=function(f,h,k,g,m){var r=Oa.getViewCtx().getCommandManager();r.isCompositeStarted()||r.compositeStart(f.getCaption());-1!=m&&ya.protectedInitialDateHierachy(r,h,k);r.perform(f);-1==m&&(ya.protectedInitialDateHierachy(r,h,k),g||(f=Oa.getAnalyticalModel(),
Qb.getInstance(f.getChartType()).smartDropField(f,Ra,h,r)),ya.protectedKeepLogicalOrder(r));r.isCompositeStarted()&&r.compositeEnd()};this.protectedInitialDateHierachy=function(f,h,k){if(k=ya.getModel().getInitialDateHierachyForField(h,k))h=new Ya(h),h.setValue(k),f.perform(h)};this.protectedKeepLogicalOrder=function(f){};var Yb=function(f,h){h!=ma.KEY_ADD&&h!=ma.KEY_REMOVE&&h!=ma.KEY_REPLACE&&h!=ma.KEY_CHANGE||ya.protectedUpdateUi();if(h==ma.KEY_REPLACE){h=f.getField();var k=h.getMetaField();f=k.getPureName();
k=k.getTable();bMetaLost=!k||!k.searchMetaField(f);f=new a.InvalidPrompt;f.setLevel(a.InvalidPrompt.LEVEL_META_LOST,bMetaLost);h.setInvalidPrompt(f)}else h==ma.KEY_REMOVE||h==ma.KEY_CHANGE?zb(null):(h=(h=f.getField())?h:f.getFieldSubEventTarget().getField(),vb(h),zb(h))};this.checkAllInvalidFields=function(){if(Ra)for(var f=0,h=Ra.getCount();f<h;f++){var k=Ra.get(f);vb(k);zb(k)}};var zb=function(f){var h=Oa.getAnalyticalModel();Qb.getInstance(h.getChartType()).isFieldValid(h,Ra,f)&&null!=f&&(h=new a.InvalidPrompt,
f.isMeasure()&&!f.getMetaField().isCanAsMeasure()||f.isDimension()&&!f.getMetaField().isCanAsDimension()?(h.setLevel(wa.InvalidPrompt_LEVEL_POSITION_WRONG,!0),h.setPromptText(Va.get("invalidRole","\u7ef4\u5ea6/\u5ea6\u91cf\u7528\u6cd5\u4e0d\u6b63\u786e"))):ya.protectedCustomCheckInvalidField(h,f)?h.setLevel(wa.InvalidPrompt_LEVEL_POSITION_WRONG,!0):h.setLevel(wa.InvalidPrompt_LEVEL_POSITION_WRONG,!1),f.setInvalidPrompt(h))};this.protectedCustomCheckInvalidField=function(f,h){return!1};var vb=function(f){var h=
f.getMetaField(),k=h.getTable(),g=k&&k.searchMetaField(h.getPureName())?!1:!0;k=new a.InvalidPrompt;k.setLevel(a.InvalidPrompt.LEVEL_META_LOST,g);f.setInvalidPrompt(k);g=h.isInvalid()?!0:!1;k=new a.InvalidPrompt;k.setLevel(a.InvalidPrompt.LEVEL_META_INVALID,g);f.setInvalidPrompt(k);k=h.isRelativeAggregation();g=f.getAggregation()==a.AGGREGATION_AGG;h=a.isAggregationFittedDataType(f.getAggregation(),h.getDataType());h=f.isMeasure()&&(k&&!g||!k&&g||!h);k=new a.InvalidPrompt;k.setLevel(a.InvalidPrompt.LEVEL_AGG,
h);f.setInvalidPrompt(k)};this.showOperatingPrompt=function(f){f?(Rb||(Rb=$("<div>"),Rb.addClass("sa-card-operating-prompt"),Rb.appendTo(Oa.getJqContainer())),Rb.text(f)):(Rb&&Rb.remove(),Rb=null)};this.protectedUpdateUi=function(){for(var f=0;f<gb.length;f++){var h=gb[f];h.destroy();h.getJqUi().remove()}gb=[];var k=Oa.getJqContainer();if(Ra){for(f=0;f<Ra.getCount();f++)h=Ra.get(f),h=ya.protectedCreateItem(h),k.append(h.getJqUi()),gb.push(h);f=gb;if(ya.isHorizontalOtherwiseVertical())for(k=1,h=0;h<
f.length;h++){k+=Z.CARD_ITEM_H_SPACING;var g=f[h].getJqUi();Wa.layoutCtrlWithLRTB(g,k,null,Z.CARD_ITEM_WIDTH-2,2,2,null);k+=Z.CARD_ITEM_WIDTH}else{var m=1;for(h=0;h<f.length;h++)m+=Z.CARD_ITEM_V_SPACING,g=f[h].getJqUi(),Wa.layoutCtrlWithLRTB(g,4,4,null,m,null,Z.CARD_ITEM_HEIGHT-2),m+=Z.CARD_ITEM_HEIGHT;Pa||(Pa=$("<div>"),Pa.appendTo(k));Wa.layoutCtrl(Pa,0,m,1,20)}}return gb};this.protectedCreateItem=function(f){var h=new Vb(f);h.setActionListener(function(k,g){var m=k.getJqUi(),r=m.data("menu");if(r&&
r.isShowing())m.data("menu",null),r.hide();else{var w=k.getJqUi(),n=w.outerWidth(),t=w.outerHeight(),B=Math.min(180,Math.max(n,140));r=new ab;r.setWidth(B);r.setModel(pb(Ra,f,k));r.setHideListener(function(){m.data("menu",null)});m.data("menu",r);k=Oa.getViewCtx().getTopJqUi();n=[n-B-2,t+1];n=Wa.upwardCoordinate(w[0],n,k[0]);r.show(k,n[0],n[1],g,!0,[0,-t-2])}});h.setTextPressListener(function(k){Cb&&Cb(f)});return h};var p=function(){ya.isHorizontalOtherwiseVertical()?Ca&&Ca.css("left","-65536px"):
Ca&&Ca.css("top","-65536px");for(var f=0;f<gb.length;f++)gb[f].getJqUi().removeClass("sa-carditem_replacable")}}function qb(){mb.call(this);var ya=this,Oa=this.protectedMethod,Ra=this.setModel;this.setModel=function(pb){var Cb=ya.getModel();Cb&&Cb.removeChangedListener(Ca);Ra(pb);pb&&pb.addChangedListener(Ca)};var Ca=function(pb,Cb){Cb!=a.KEY_PARTVALUE&&Cb!=a.KEY_FORMULA||ya.protectedUpdateUi()};this.protectedKeepLogicalOrder=function(pb){var Cb=ya.getModel();Cb=new Q(Cb);pb.perform(Cb)};this.protectedCustomCheckInvalidField=
function(pb,Cb){var Rb=!1;Oa.getViewCtx().getMeta().isMdOfSrcMode()&&Cb.isDimension()&&!Cb.getMetaField().isParentChildDimension()&&(Rb=!0,pb.setPromptText(Va.get("invalidPcdDimension","\u884c/\u5217\u4e0a\u7684\u7ef4\u5ea6\u5fc5\u987b\u662f\u7236\u5b50\u7ef4")));return Rb};var Pa=this.protectedUpdateUi;this.protectedUpdateUi=function(){var pb=Pa();gb(pb)};var gb=function(pb){for(var Cb=Oa.getViewCtx().getMeta(),Rb=ya.getModel().getHierachyExpandableStates(Cb),Yb=0;Yb<Rb.length;Yb++){var zb=Rb[Yb],
vb=pb[Yb];null==zb?vb.setShowIcon(null):(vb.setShowIcon(zb?"icon_expandable":"icon_collapsable"),vb.getJqUi().data("expandable",zb),vb.setIconPressListener(function(p,f){f=p.getJqUi().data("expandable");p.getJqUi().data("expandable",!f);f=f?new S(ya.getModel()):new ca(ya.getModel());f.setValue(Cb,p.getAnalyticalField());Oa.getViewCtx().getCommandManager().perform(f)}))}}}function sb(){mb.call(this);var ya=this,Oa=this.protectedMethod,Ra=!0,Ca=this.setModel;this.setModel=function(zb){var vb=ya.getModel();
vb&&vb.removeChangedListener(Pa);Ca(zb);zb&&zb.addChangedListener(Pa)};var Pa=function(zb,vb){vb==Ea.KEY_FIELD_MARK_TYPE&&ya.protectedUpdateUi()};this.setChartType=function(zb){Ra=0==Qb.getInstance(zb).getSuppliedMarks()?!1:!0;zb=ya.getJqUi().find(".sa-card-title");var vb=ya.getJqUi().find(".sa-card-container");Ra?(zb.removeClass("sa-card-title_disabled"),vb.removeClass("sa-card-container_disabled")):(zb.addClass("sa-card-title_disabled"),vb.addClass("sa-card-container_disabled"))};var gb=this.protectedCreateItem;
this.protectedCreateItem=function(zb){var vb=gb(zb);zb=(zb=ya.getModel().getFieldMatchingMarkType(zb))?Rb(zb).icon:"";vb.setShowIcon(zb);vb.getJqUi().find(".sa-carditem-icon").addClass("sa-markcard-item-icon");vb.setIconPressListener(pb);return vb};var pb=function(zb,vb){var p=zb.getJqUi(),f=p.data("markTypeMenu");if(f&&f.isShowing())p.data("markTypeMenu",null),f.hide();else{p.outerWidth();var h=p.outerHeight();f=new ab;f.setWidth(120);f.setModel(Cb(zb.getAnalyticalField()));f.setIconSetter(function(g,
m){x.background(g,m)});f.setHideListener(function(){p.data("markTypeMenu",null)});p.data("markTypeMenu",f);zb=Oa.getViewCtx().getTopJqUi();var k=[0,h+1];k=Wa.upwardCoordinate(p[0],k,zb[0]);f.show(zb,k[0],k[1],vb,!0,[0,-h-2])}},Cb=function(zb){var vb=new kb,p=ya.getModel(),f=Oa.getAnalyticalModel().getChartType();f=Qb.getInstance(f).getSuppliedMarks();for(var h=0;h<f.length;h++){var k=f[h],g=new G(p);g.setValue(zb,k);k=Rb(k);g=db.createActionMenuItem(k.title,g,Oa.getViewCtx().getCommandManager());
k.icon&&g.setIconName(k.icon);vb.addItemModel(g)}return vb},Rb=function(zb){switch(zb){case Ea.TYPE_LABEL:zb=Va.get("markTypeNumber","\u6570\u5b57");var vb="mark_label";break;case Ea.TYPE_COLOR:zb=Va.get("markTypeColor","\u989c\u8272");vb="mark_color";break;case Ea.TYPE_SIZE:zb=Va.get("markTypeSize","\u5927\u5c0f");vb="mark_size";break;case Ea.TYPE_ANGLE:zb=Va.get("markTypeAngle","\u89d2\u5ea6");vb="mark_angle";break;case Ea.TYPE_BLANK:zb="";vb="mark_empty";break;default:throw Error("Unknown mark-type: "+
zb);}return{title:zb,icon:vb}},Yb=this.setDragDropHandler;this.setDragDropHandler=function(zb,vb){void 0!==vb&&!0!==vb||!Ra?(zb.unbindDragUi(Oa.getJqAll()),zb.unbindDropUi(Oa.getJqAll(),Oa.getJqContainer())):Yb(zb)}}function Vb(ya){var Oa=this,Ra,Ca,Pa=null,gb,pb,Cb;this.getAnalyticalField=function(){return ya};this.destroy=function(){ya.removePropertyChangeListener(zb);ya.setInvalidPromptListener(null)};this.getJqUi=function(){if(!Ra){Ra=$("<div>");Ra.addClass("sa-carditem");Ra.mouseenter(h);Ra.mouseleave(k);
var g=$("<div>");g.addClass("sa-carditem-text");g.text(ya.getText());g.appendTo(Ra);g.on("mousedown",function(m){pb&&pb(Oa)});g=$("<div>");g.addClass("sa-carditem-icon");g.appendTo(Ra);g.on("mousedown",function(m){m=$(m.target);Cb&&Cb(Oa,m)});Oa.setShowIcon(Pa);Yb();vb();ya.addPropertyChangeListener(zb);ya.setInvalidPromptListener(vb)}return Ra};var Rb=function(){return Ra.find(".sa-carditem-text")};this.setActionListener=function(g){gb=g};this.setTextPressListener=function(g){pb=g};this.setIconPressListener=
function(g){Cb=g};this.setShowIcon=function(g){Pa=g;if(Ra){g=null!==Pa;Rb().css("left",g?20:4);var m=Ra.find(".sa-carditem-icon");m.css("display",g?"":"none");x.background(m,Pa)}};this.modifyDisplayName=function(g){var m=ya.getDisplayName();m||(m=ya.getMetaField().getDisplayName());var r=$("<div>");r.css("background-color","#fff");r.css("z-index","65535");r.appendTo(Ra);Wa.layoutCtrlWithLRTB(r,-1,-1,null,-1,-1,null);var w=new na;w.setText(m);w.addAcceptableListener(function(F,z){z&&A(B());E()});var n=
w.getJqUi();Wa.layoutCtrlWithLRTB(n,0,20,null,0,0,null);n.appendTo(r);w.requestFocus();n=$("<div>");n.attr("title",Va.get("reset","\u91cd\u7f6e"));n.on("click",function(F){A(null);E()});x.background(n,"icon_reset");Wa.layoutCtrlWithLRTB(n,null,2,16,"50%",null,16);n.css("margin-top","-8px");n.css("cursor","pointer");n.appendTo(r);var t=function(F){Wa.isDescendent(F.target,Ra[0])||(A(B()),E())},B=function(){var F=$.trim(w.getText());!F&&(F=null);return F},A=function(F){var z=new bb;z.setCaption(Va.get("raname",
"\u91cd\u547d\u540d")+" ["+m+"] ");z.setMethod(ya.getDisplayName,ya.setDisplayName);z.setValue(F);g.perform(z)},E=function(){document.body.removeEventListener("mousedown",t);r.remove()};document.body.addEventListener("mousedown",t)};var Yb=function(){Ca=$("<div>");Ca.addClass("sa-carditem-menubtn");Ca.appendTo(Ra);Ca.on("mousedown",function(m){m=$(m.target);gb(Oa,m)});var g=$("<div>");g.text("\u25b2");g.addClass("sa-carditem-menubtn-text");g.appendTo(Ca);f(!1)},zb=function(g,m){if(m==a.KEY_PARTVALUE||
m==a.KEY_ROLE||m==a.KEY_FORMULA||m==a.KEY_DISPLAYNAME||m==a.KEY_QUICKSETUP)g=g.getField(),Rb().text(g.getText()),p(g.getTextTooltips())},vb=function(){var g=ya.getInvalidPrompt();if(g){g=g.getLevel()==a.InvalidPrompt.LEVEL_META_LOST?Va.get("notExistField","\u4e0d\u5b58\u5728\u7684\u5b57\u6bb5"):g.getLevel()==a.InvalidPrompt.LEVEL_META_INVALID?Va.get("invalidField","\u65e0\u6548\u7684\u5b57\u6bb5"):g.getLevel()==a.InvalidPrompt.LEVEL_AGG?Va.get("invalidAggregation","\u805a\u5408\u65b9\u5f0f\u4e0d\u6b63\u786e"):
g.getPromptText();var m=aa.createWarning();m.appendTo(Ra);m.addClass("sa-carditem-erroricon");Ra.addClass("sa-carditem_error");Ra.attr("title",g);p(null)}else Ra.find(".sa-carditem-erroricon").remove(),Ra.removeClass("sa-carditem_error"),Ra.attr("title",null),p(ya.getTextTooltips())},p=function(g){Rb().attr("title",g)},f=function(g){Ca.css("display",g?"block":"none")},h=function(g){f(!0)},k=function(g){f(!1)}}function Lb(){Aa.Child.call(this);mb.call(this);var ya=this,Oa=this.protectedMethod,Ra,Ca=
this.setModel;this.setModel=function(Rb){var Yb=ya.getModel();Yb&&Yb.removeChangedListener(Pa);Ca(Rb);Rb&&Rb.addChangedListener(Pa)};var Pa=function(Rb,Yb){(Yb==ma.KEY_ADD||Yb==ma.KEY_REMOVE||Yb==ma.KEY_CHANGE)&&Ra&&Ra()};this.protectedInitialDateHierachy=function(Rb,Yb,zb){};this.setRequestRelayoutListener=function(Rb){Ra=Rb};this.getMinHeight=function(){return Z.CARD_TITLE_HEIGHT+.8*(Z.CARD_ITEM_HEIGHT+Z.CARD_ITEM_V_SPACING)};this.getPerfectHeight=function(){var Rb=ya.getModel().getCount();return Z.CARD_TITLE_HEIGHT+
(Z.CARD_ITEM_HEIGHT+Z.CARD_ITEM_V_SPACING)*Math.max(1.5,Rb+.8)};var gb=this.protectedDropHandlerDataPusher;this.protectedDropHandlerDataPusher=function(Rb,Yb,zb,vb,p){vb?gb(Rb,Yb,zb,vb,p):pb(Yb,function(f,h){var k=Oa.getViewCtx().getCommandManager();if(f){var g=ya.getModel(),m=g.toPartJson(p),r=Oa.getAnalyticalModel(),w=Oa.getExecutingPreferences(),n=Oa.getViewCtx().createFacade(function(A){A=q.create(A);var E=u.create(A);A=new R(g);A.setValue(zb,E);k.isCompositeStarted()||(E=Va.get("addFilterField",
"\u6dfb\u52a0#1\u4f5c\u4e3a\u7b5b\u9009\u5b57\u6bb5").replace("#1",h.getComplexText()),k.compositeStart(E));for(E=0;E<f.length;E++)k.perform(f[E]);k.perform(Rb);k.perform(A);k.compositeEnd()},function(A,E,F){k.isCompositeStarted()&&k.compositeAbort();var z=b.toDisplayText(A,E);z||(z=A+"\n"+E);A=new l;A.setOptionType(l.OPTION_OK);A.setMessage(z);F&&A.setDetail(F);A.showDialog();return!0}),t=r.createDependentMeta(Oa.getViewCtx().getMeta(),[h.getMetaField().getFullName()]),B=Oa.getViewCtx().getJsonAdditionalFilters();
n.getFilterPreparedValue(t,r,w,m,h,B)}else k.isCompositeStarted()&&k.compositeAbort()})};var pb=function(Rb,Yb){var zb=Rb.clone(),vb=Rb.getMetaField(),p=vb.getDataType();p==e.DT_NUMBER?vb.isRelativeAggregation()?(vb=Cb(Rb,zb,a.AGGREGATION_AGG,null),Yb(vb,zb)):(vb=" ["+vb.getDisplayName()+"] ",p=new xb,p.showDialog(ya.getJqUi(),vb,function(f,h){var k=null;f&&(k=Cb(Rb,zb,h,null),f=Rb.isContinuous(),h=new bb,h.setMethod(Rb.isContinuous,Rb.setContinuous),h.setValue(f),k.push(h));Yb(k,zb)})):p==e.DT_DATE?
(vb=" ["+vb.getDisplayName()+"] ",p=new Ub,p.showDialog(ya.getJqUi(),vb,function(f,h){var k=null;f&&(k=Cb(Rb,zb,null,h),f=h==a.PARTVALUE_DATE_EXACT?!0:!1,zb.setContinuous(f),h=new bb,h.setMethod(Rb.isContinuous,Rb.setContinuous),h.setValue(f),k.push(h));Yb(k,zb)})):(vb=Cb(Rb,zb,null,null),Yb(vb,zb))},Cb=function(Rb,Yb,zb,vb){Yb.setRole(zb?a.ROLE_MEASURE:a.ROLE_DIMENSION,zb);Yb.setPartValue(vb);Yb.setDateFormat(null);Yb=new Jb(Rb);Yb.setValue(zb?zb:a.ROLE_DIMENSION);Rb=new Ya(Rb);Rb.setValue(vb);return[Yb,
Rb]}}function xa(){Aa.Child.call(this);Mb.call(this);var ya=this,Oa=this.protectedMethod,Ra,Ca,Pa,gb,pb;this.getFilter=function(){return Ca};this.setFilter=function(t){Ca&&zb();if(Ca=t)Ca.addValueChangedListener(p),Ca.addPreparedValueUpdatedListener(f),Ca.addPropertyChangeListener(h),Ca.getAssociatedField().addPropertyChangeListener(k);vb()};var Cb=function(){if(!pb){var t=pb=ya.protectedCreateFilterPane();t.bindCardDependence.call(t,{getViewCtx:Oa.getViewCtx,getTitle:Oa.getTitle,getFilterModel:ya.getFilter,
fireRequestParentRelayout:Rb,updateUi:vb,tryToMarkNothingToSelect:w,popupFilterDialog:n})}return pb};this.protectedCreateFilterPane=function(){throw Error("Override");};this.destroy=function(){zb()};this.setRequestRelayoutListener=function(t){Pa=t};var Rb=function(){Pa&&Pa()};this.afterRelayout=function(){Cb().afterRelayout()};this.isVisible=function(){return Ca.isOnShow()};this.protectedInitCustomUi=function(t,B){Ra=B;ya.protectedInitOperateMenu();Cb().createUi(t);Cb().createCustomOperator(Ra)};
this.protectedInitOperateMenu=function(){};this.getMinHeight=function(){return Ca.isStateValid()?Cb().getCardMinHeight():xa.INVALID_HEIGHT};this.getPerfectHeight=function(){return Ca.isStateValid()?Cb().getCardPerfectHeight():xa.INVALID_HEIGHT};this.keepState=function(){Cb().keepScrollState()};this.restoreState=function(){Cb().restoreScrollState()};var Yb=this.protectedShowOperateButton;this.protectedShowOperateButton=function(t){Ca.isStateValid()?Yb(t):Yb(!1)};var zb=function(){Ca.removeValueChangedListener(p);
Ca.removePreparedValueUpdatedListener(f);Ca.removePropertyChangeListener(h);Ca.getAssociatedField().removePropertyChangeListener(k)},vb=function(){ya.setTitle(Ca.getAssociatedField().getText());Oa.getJqContainer();gb&&gb.remove();var t=Ca.isStateValid(),B=new a.InvalidPrompt;B.setLevel(a.InvalidPrompt.LEVEL_FILTER_UNMATCHED,!t);t?Cb().refreshUi():(t=Ca.getStateDisplay(),r(t),B.setPromptText(t));t=Oa.getAnalyticalModel().getFilterFieldSet();var A=t.getFilterIndex(Ca);t.get(A).setInvalidPrompt(B)},
p=function(t){t.isStateValid()&&Cb().filterValueChangedHandler(t)},f=function(t){t.isStateValid()&&Cb().affectedPreparedValueUpdatedHandler(t)},h=function(t,B){B==u.KEY_AFFECTED?m():(ya.protectedDoPropertyChanged(t,B),Cb().propertyChangedHandler(t,B))};this.protectedDoPropertyChanged=function(t,B){};var k=function(t,B){B==a.KEY_DISPLAYNAME?ya.setTitle(Ca.getAssociatedField().getText()):B==a.KEY_SORT&&m()},g=function(t){ya.getFilter().updatePreparedModel(t)},m=function(){var t=Oa.getViewCtx().createFacade(g),
B=Oa.getViewCtx().getMeta(),A=Oa.getAnalyticalModel(),E=Oa.getExecutingPreferences(),F=ya.getFilter().getAssociatedField(),z=Oa.getViewCtx().getJsonAdditionalFilters();t.getFilterPreparedValue(B,A,E,null,F,z)},r=function(t){gb||(gb=$("<div>"),gb.addClass("sa-filtercard-nochoice"));var B=Oa.getJqContainer();gb.text(t);gb.appendTo(B)},w=function(){0<ya.getFilter().getSelectableItems().length||(ya.getFilter().isJustShowAffected()?r(Va.get("noOptionValue","\u6ca1\u6709\u76f8\u5173\u503c\u9009\u9879\n\u60a8\u53ef\u4ee5\u5c1d\u8bd5\u5207\u6362\u5230\u5168\u90e8\u503c")):
r(Va.get("noAlternativeValues","\u6ca1\u6709\u5907\u9009\u503c")))},n=function(){var t=Oa.getTitle(),B=Oa.getJqAll(),A=Oa.getViewCtx().getCommandManager();(new pa).showDialog(t,ya.getFilter(),A,B,!0)};this.protectedMethod.resetFilterPane=function(){var t=Oa.getJqContainer();t.empty();Ra.empty();pb=null;Cb().createUi(t);Cb().createCustomOperator(Ra);Rb()}}function eb(){xa.call(this);var ya=this.protectedMethod;this.protectedCreateFilterPane=function(){return new qa};this.protectedDoPropertyChanged=
function(Oa,Ra){Ra==v.KEY_CTRLTYPE&&ya.resetFilterPane()}}function Ma(){xa.call(this);var ya=this,Oa=this.protectedMethod;this.protectedCreateFilterPane=function(){switch(ya.getFilter().getCtrlType()){case v.CTRLTYPE_RADIOBUTTON_POPUP:case v.CTRLTYPE_CHECKBOX_POPUP:return new qa;case v.CTRLTYPE_RADIOBUTTON_LIST:return new da;default:return new Sa}};this.protectedDoPropertyChanged=function(Ra,Ca){Ca==v.KEY_CTRLTYPE&&Oa.resetFilterPane()}}function Ja(){xa.call(this);this.protectedCreateFilterPane=function(){return new Ga}}
function oa(){xa.call(this);this.protectedCreateFilterPane=function(){return new ra}}function ka(){var ya=this,Oa;this.bindCardDependence=function(Ra){Oa=Ra};this.createUi=function(Ra){throw Error("Override");};this.getCardMinHeight=function(){return ya.getCardPerfectHeight()};this.getCardPerfectHeight=function(){throw Error("Override");};this.refreshUi=function(){throw Error("Override");};this.createCustomOperator=function(Ra){};this.propertyChangedHandler=function(Ra,Ca){};this.filterValueChangedHandler=
function(Ra){Oa.updateUi()};this.affectedPreparedValueUpdatedHandler=function(Ra){Oa.updateUi()};this.afterRelayout=function(){};this.keepScrollState=function(){};this.restoreScrollState=function(){};this.protectedMethod={};this.protectedMethod.getCardApi=function(){return Oa}}function Ha(){ka.call(this);var ya=this,Oa=this.protectedMethod,Ra,Ca,Pa=null,gb,pb;this.createUi=function(vb){gb=vb;Ra=new ta;Ra.setItemHeight(21);Ra.getJqUi().addClass("sa-filtercard-pane");Ra.getJqUi().appendTo(vb);Oa.getCardApi().updateUi();
Cb(vb)};this.getCardMinHeight=function(){return Z.CARD_TITLE_HEIGHT+31.5+(Ca&&Ca.getJqUi().is(":visible")?21:0)};this.getCardPerfectHeight=function(){var vb=Oa.getCardApi().getFilterModel().getSelectableItems().length;vb+=ya.protectedGetCustomItemCount();return Z.CARD_TITLE_HEIGHT+21*Math.max(1.5,vb)+(Ca&&Ca.getJqUi().is(":visible")?21:0)+2};this.protectedGetCustomItemCount=function(){return 0};this.refreshUi=function(){Ra&&(Rb(),Ra.repaint(),Oa.getCardApi().tryToMarkNothingToSelect())};this.createCustomOperator=
function(vb){var p=vb.parent().find(".sa-card-operate-item").is(":visible"),f=$("<div>");f.css("display",p?"":"none");f.addClass("sa-card-operate-item");f.html("&nbsp;");f.mousedown(zb);f.appendTo(vb);x.background(f,"icon_search")};this.affectedPreparedValueUpdatedHandler=function(vb){ya.keepScrollState();Oa.getCardApi().updateUi();Oa.getCardApi().fireRequestParentRelayout()};this.afterRelayout=function(){ya.restoreScrollState();Ca.getJqUi().is(":visible")&&Ca.setFoucs()};this.keepScrollState=function(){Ra.keepState()};
this.restoreScrollState=function(){0<Oa.getCardApi().getFilterModel().getSelectableItems().length&&Ra.restoreState()};var Cb=function(vb){Ca=new ea;Ca.setAlwaysShowCleanIcon(!0);Ca.setSearchListenerDelay(1E3);Ca.addSearchListener(function(p){Yb(p.getText())});Ca.addCloseListener(function(p){zb()});Wa.layoutCtrlWithLRTB(Ca.getJqUi(),0,0,null,0,null,20);Ca.getJqUi().css("display","none");Ca.getJqUi().css("z-index",1024);Ca.getJqUi().appendTo(vb)},Rb=function(){var vb=Oa.getCardApi().getFilterModel();
vb&&(vb=vb.getSelectableItems(),Pa&&(vb=$.grep(vb,function(p){return 0<=p.getDisplayText().toLowerCase().indexOf(Pa)})),0==vb.length?(!pb&&Pa&&(vb=new ba,vb.setText(Va.get("nothingSearched","\u627e\u4e0d\u5230\u7b26\u5408\u7684\u7ed3\u679c")),vb.setEnabled(!1),vb.setAlign(ba.ALIGN_CENTER),pb=vb.getJqUi(),pb.addClass("sa-filtercard-search-nodata-result"),pb.appendTo(gb)),Ra.setItemCount(0)):(pb&&pb.remove(),pb=null,ya.protectedSetupDynamicScroller(Ra,vb,Pa?!0:!1)))};this.protectedSetupDynamicScroller=
function(vb,p,f){throw Error("Override");};var Yb=function(vb){0!=Oa.getCardApi().getFilterModel().getSelectableItems().length&&(vb=vb.toLowerCase(),Pa!=vb&&(Pa=vb,Oa.getCardApi().updateUi()))},zb=function(){var vb="none"!=Ca.getJqUi().css("display");vb&&(Ca.clear(),Yb(""));Ca.getJqUi().css("display",vb?"none":"block");Ra.getJqUi().css("top",vb?0:20);ya.keepScrollState();Oa.getCardApi().fireRequestParentRelayout();Oa.getCardApi().tryToMarkNothingToSelect()};this.protectedMethod.visitingPaintedItems=
function(vb){for(var p=Ra.getPaintedItems(),f=0;f<p.length;f++)vb(p[f])}}function Sa(){Ha.call(this);var ya=this.protectedMethod,Oa;this.propertyChangedHandler=function(pb,Cb){Cb==v.KEY_EXCLUDE&&ya.visitingPaintedItems(function(Rb){(Rb=Rb.data("userObject"))&&Ca(Rb)})};this.filterValueChangedHandler=function(pb){Oa&&Ra()};this.protectedGetCustomItemCount=function(){return 1};this.protectedSetupDynamicScroller=function(pb,Cb,Rb){var Yb=!Rb;pb.setItemCount(Yb?Cb.length+1:Cb.length);pb.setItemUiCreator(function(zb){if(Yb&&
0==zb){zb=ya.getCardApi().getFilterModel();for(var vb=!0,p=0;p<Cb.length;p++){var f=Cb[p].getValue();f=zb.isValueSelected(f);vb=vb&&f;if(0==vb)break}Oa=new La;Oa.setChecked(vb);Oa.setText(Va.get("selectAll","\u5168\u9009"));Oa.getJqUi().addClass("sa-filtercard-discreteitem-all");Oa.addCheckedListener(gb);zb=Oa.getJqUi();zb.addClass("sa-filtercard-discreteitem");return zb}zb=Yb?Cb[zb-1]:Cb[zb];vb=ya.getCardApi().getFilterModel();p=zb.getValue();p=vb.isValueSelected(p);f=zb.getDisplayText();vb=new La;
vb.addCheckedListener(Pa);vb.setUserObject(zb);vb.setText(f);vb.setChecked(p);Ca(vb);zb=vb.getJqUi();zb.addClass("sa-filtercard-discreteitem");zb.data("userObject",vb);return zb})};var Ra=function(){var pb=ya.getCardApi().getFilterModel(),Cb=pb.isFullValue();ya.visitingPaintedItems(function(Rb){if(Rb=Rb.data("userObject")){if(Cb)var Yb=!0;else Yb=Rb.getUserObject(),Yb=pb.isValueSelected(Yb.getValue());Rb.setChecked(Yb)}});Oa.setChecked(Cb)},Ca=function(pb){var Cb=ya.getCardApi().getFilterModel().isExclude();
pb.setCustomStyle("text-decoration",Cb?"line-through":"")},Pa=function(pb,Cb){if(Cb){Cb=ya.getCardApi().getFilterModel();Cb=new wb(Cb);var Rb=pb.getUserObject();Cb.setValue(Rb.getValue(),pb.isChecked(),Rb.getDisplayText());ya.getCardApi().getViewCtx().getCommandManager().perform(Cb)}},gb=function(pb,Cb){Cb&&(Cb=ya.getCardApi().getFilterModel(),pb.isChecked()?(pb=new H(Cb),Cb=Va.get("selectAllFilterValue","\u5168\u9009\u7b5b\u9009\u503c")+":"+ya.getCardApi().getTitle()):(pb=new bb,pb.setMethod(Cb.isFullValue,
Cb.setFullValue),pb.setValue(!1),Cb=Va.get("clearAllFilterValue","\u5168\u6e05\u7b5b\u9009\u503c")+":"+ya.getCardApi().getTitle()),pb.setCaption(Cb),ya.getCardApi().getViewCtx().getCommandManager().perform(pb))}}function da(){Ha.call(this);var ya=this.protectedMethod;this.filterValueChangedHandler=function(Ca){Ra()};this.protectedSetupDynamicScroller=function(Ca,Pa,gb){Ca.setItemCount(Pa.length);Ca.setItemUiCreator(function(pb){pb=Pa[pb];var Cb=ya.getCardApi().getFilterModel(),Rb=pb.getValue();Rb=
Cb.isValueSelected(Rb);var Yb=pb.getDisplayText();Cb=new ob;Cb.addCheckedListener(Oa);Cb.setUserObject(pb);Cb.setText(Yb);Cb.setChecked(Rb);pb=Cb.getJqUi();pb.addClass("sa-filtercard-discreteitem");pb.data("userObject",Cb);return pb})};var Oa=function(Ca,Pa){Pa&&(Ca.isChecked()?(Ca=Ca.getUserObject(),Pa=ya.getCardApi().getFilterModel(),Pa.isValueSelected(Ca.getValue())||(Pa=new va(Pa),Pa.setValue(Ca.getValue(),Ca.getDisplayText()),ya.getCardApi().getViewCtx().getCommandManager().perform(Pa))):Ca.setChecked(!0))},
Ra=function(){var Ca=ya.getCardApi().getFilterModel();ya.visitingPaintedItems(function(Pa){Pa=Pa.data("userObject");var gb=Pa.getUserObject();gb=Ca.isValueSelected(gb.getValue());Pa.setChecked(gb)})}}function qa(){ka.call(this);var ya=this.protectedMethod,Oa,Ra=0;this.createUi=function(pb){Oa=$("<div>");Oa.addClass("sa-filtercard-pane");Oa.addClass("sa-filtercard-f7");Oa.on("click",function(Cb){ya.getCardApi().popupFilterDialog()});Oa.on("mouseenter",function(Cb){Oa.addClass("sa-filtercard-f7_hover")});
Oa.on("mouseleave",function(Cb){Oa.removeClass("sa-filtercard-f7_hover")});Oa.appendTo(pb);ya.getCardApi().updateUi()};this.getCardMinHeight=function(){return Z.CARD_TITLE_HEIGHT+42};this.getCardPerfectHeight=function(){var pb=Math.max(2,gb()+1);return Z.CARD_TITLE_HEIGHT+21*pb};this.refreshUi=function(){Ra=0;ya.getCardApi().fireRequestParentRelayout();ya.getCardApi().tryToMarkNothingToSelect()};this.afterRelayout=function(){var pb=Oa.height();Ra!=pb&&(Ra=pb,ya.getCardApi().getFilterModel().isStateValid()&&
Ca())};this.propertyChangedHandler=function(pb,Cb){Cb==v.KEY_EXCLUDE&&Ca()};var Ca=function(){Oa.empty();var pb=ya.getCardApi().getFilterModel(),Cb=pb.getSelectableItems();if(0!=Cb.length){for(var Rb=gb(),Yb=0,zb=Ra,vb=!1,p=0;p<Cb.length;p++){var f=Cb[p];if(pb.isValueSelected(f.getValue())){var h=Pa();pb.isExclude()&&h.css("text-decoration","line-through");h.addClass("sa-filtercard-f7-item");h.text(f.getDisplayText());h.appendTo(Oa);Yb++;zb-=21;if(42>zb){vb=Yb<Rb;break}}}vb&&(h=Pa(),h.addClass("sa-filtercard-f7-item"),
h.text("..."),h.appendTo(Oa));pb=pb.isFullValue()?Va.get("totalItemsAll","\u5df2\u9009\u62e9\u5168\u90e8\u9009\u9879"):Va.get("totalItemsCount","\u5df2\u9009\u62e9#1\u9879").replace("#1",Rb);Cb=Pa();Cb.text(pb);Cb.css("text-align","right");Cb.css("padding-right","4px");Cb.appendTo(Oa);Wa.layoutCtrlWithLRTB(Cb,0,0,null,null,0,null)}},Pa=function(){var pb=$("<div>");pb.css("height","21px");pb.css("line-height","21px");return pb},gb=function(){for(var pb=0,Cb=ya.getCardApi().getFilterModel(),Rb=Cb.getSelectableItems(),
Yb=0;Yb<Rb.length;Yb++)Cb.isValueSelected(Rb[Yb].getValue())&&pb++;return pb}}function Ga(){ka.call(this);var ya=this.protectedMethod,Oa;this.createUi=function(Ca){Oa=new ja;Oa.addValueChangedListener(Ra);var Pa=Oa.getJqUi();Pa.addClass("sa-filtercard-pane");Pa.appendTo(Ca);ya.getCardApi().updateUi()};this.getCardPerfectHeight=function(){return Z.CARD_TITLE_HEIGHT+45};this.refreshUi=function(){var Ca=ya.getCardApi().getFilterModel();if(Oa&&Ca){var Pa=Ca.getPreparedModel();if(Pa){if(Ca.isJustShowAffected()){var gb=
Pa.getSelectedMin();Pa=Pa.getSelectedMax();var pb=Math.min(Pa,Math.max(gb,Ca.getFloor()));var Cb=Math.min(Pa,Math.max(gb,Ca.getCeiling()))}else gb=Pa.getMin(),Pa=Pa.getMax(),pb=Ca.getFloor(),Cb=Ca.getCeiling();Oa.setFormatString(Ca.getFormatString());Oa.setLimited(gb,Pa);Oa.setValue(pb,Cb)}}};var Ra=function(Ca){Ca=Ca.getValue();var Pa=ya.getCardApi().getFilterModel(),gb=new Y(Pa);gb.setValue(Ca[0],Ca[1],Pa.isContainNull());ya.getCardApi().getViewCtx().getCommandManager().perform(gb)}}function ra(){ka.call(this);
var ya=this.protectedMethod,Oa;this.createUi=function(Pa){var gb=$("<div>");gb.addClass("sa-filtercard-pane");gb.appendTo(Pa);Oa=$("<div>");Oa.addClass("sa-filtercard-daterange");Oa.on("click",function(pb){ya.getCardApi().popupFilterDialog()});Oa.appendTo(gb);Wa.layoutCtrlWithLRTB(Oa,4,4,null,6,null,54);ya.getCardApi().updateUi()};this.getCardPerfectHeight=function(){return Z.CARD_TITLE_HEIGHT+6+54};this.refreshUi=function(){var Pa=ya.getCardApi().getFilterModel();Oa&&Pa&&Pa.getPreparedModel()&&(Pa.getRelativePeriodModel()?
ya.getCardApi().getViewCtx().createFacade(function(gb){var pb=new C;pb.fromJsonObject(gb);Pa.setFromDateMs(pb.getFromDateMs());Pa.setToDateMs(pb.getToDateMs());Ra()}).parseDateRange(Pa):Ra())};var Ra=function(){Oa.empty();var Pa=ya.getCardApi().getFilterModel(),gb=Pa.getFromDateMs();Pa=Pa.getToDateMs();var pb=new fb;pb.setFormatString(Va.get("dateFilterFormat","yyyy-MM-dd"));gb=pb.format(gb);Pa=pb.format(Pa);pb=$("<div>");pb.text(gb);gb=$("<div>");gb.text("~");var Cb=$("<div>");Cb.text(Pa);Ca(pb,
16,"left");Ca(gb,16,"center");Ca(Cb,16,"right")},Ca=function(Pa,gb,pb){Pa.css({position:"relative",height:gb+"px","line-height":gb+"px","text-align":pb});Pa.appendTo(Oa)}}function cb(){Aa.Child.call(this);Mb.call(this);var ya=this,Oa=this.protectedMethod,Ra,Ca;this.setRequestRelayoutListener=function(Pa){Ra=Pa};this.setLegendUi=function(Pa){Ca=Pa;ya.keepState();Ra&&Ra();ya.restoreState()};this.getMinHeight=function(){return 50};this.getPerfectHeight=function(){return Z.CARD_TITLE_HEIGHT+(Ca?Ca.askHeight():
0)};this.keepState=function(){var Pa=Oa.getJqContainer();Pa.data("myScrollTop",Pa.prop("scrollTop"))};this.restoreState=function(){var Pa=Oa.getJqContainer(),gb=Pa.data("myScrollTop");gb&&Pa.prop("scrollTop",gb)};this.afterRelayout=function(){if(Ca){var Pa=Oa.getJqContainer();Pa.empty();Ca.draw(Pa)}}}function Qa(){cb.call(this)}function hb(){cb.call(this)}function Fb(){cb.call(this)}function pa(){Ka.call(this);var ya=this,Oa=this.protectedMethod,Ra=this.showDialog;this.showDialog=function(Pa,gb,pb,
Cb,Rb){Oa.setTitle(Pa);var Yb=ec.create(gb);Oa.setContentPaneCreator(function(){return Yb.getJqUi()});Oa.setClosingAction(function(zb){zb&&Yb.accepting(pb)});Pa=$(document.body);gb=Yb.getSuggestDialogSize(Pa);Ca(Pa,Cb,gb,Rb);Ra()};var Ca=function(Pa,gb,pb,Cb){var Rb=pb[0],Yb=pb[1],zb=pb[2],vb=Wa.upwardCoordinate(gb[0],[0,0],Pa[0]),p=vb[0];vb=vb[1];p=Cb?p-Rb:p+gb.outerWidth();Pa=Pa.innerHeight()-10;vb+Yb>Pa&&(vb=Pa-Yb);ya.setSize(Rb,Yb);ya.setPosition(p,vb);zb&&(Rb=pb[3],pb=pb[4],Oa.setMinSize(Rb,
pb),Oa.getDialogCtrl().setMinSize(Rb,pb),Oa.getDialogCtrl().setResizeEnabled())}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.longer&&(com.kingdee.bos.qing.longer={});"undefined"==typeof com.kingdee.bos.qing.longer.ui&&(com.kingdee.bos.qing.longer.ui={});var Ab=com.kingdee.bos.qing.longer.ui;Ab.LongPaintingDesk=
function(){K.call(this);var ya=this,Oa=this.protectedMethod,Ra,Ca,Pa,gb,pb,Cb,Rb,Yb,zb,vb,p,f,h,k=null,g,m,r=!1,w=[],n=!1,t=!1,B,A;this.setGlobalDependence=function($a){Ra=$a};this.isDesignable=function(){return F().isDesignable()};this.metaChanged=function($a){Cb&&$a&&(Cb.setMeta($a),$a.addChangedListener(function(Db){Ca.isAnyCalculatedFieldUsed()&&ib()}))};this.isAnyCalculatedFieldUsed=function($a){return Ca.isAnyCalculatedFieldUsed($a)};this.isModelPageMatched=function($a){return $a.getModel()instanceof
fa};this.setModelPage=function($a){$a?(za($a.getPreferences()),Za($a.getModel())):(za(new U),Za(new fa));L();F().isDesignable()?hc():(gb.collapseFirstHalf(!0),pb.getJqUi().detach())};this.getModelPage=function(){z();var $a=new c;$a.setModel(Ca);$a.setPreferences(Pa);return $a};this.getJqUi=function(){if(!gb){O();D();pb=new Da;pb.setSplitLineWide(Z.DESK_SPLIT_GAP_V);pb.setHorizontalSplit(!1);pb.setResizeMode(Da.RESIZE_MODE_SECOND_FIXED);pb.setFirstSize(-1,80,-1);pb.setSecondChild(Da.createChildWrapper(Yb,
qc));var $a=g.getJqUi(),Db=$("<div>");Db.append($a);Wa.layoutCtrlWithLRTB($a,0,Z.DESK_PADDING_RIGHT,null,Z.DESK_PADDING_TOP,Z.DESK_PADDING_BOTTOM,null);gb=new Da;gb.setHorizontalSplit(!0);gb.collapseFirstHalf(!0);gb.setSecondSize(-1,320,-1);gb.setFirstChild(pb);gb.setSecondChild(Da.createChildWrapper(Db,g.resize));gb.getJqUi().addClass("sa-desk");Wa.makeSelectable(gb.getJqUi(),!1);lb();Rb=new Ta;Rb.bindParentUi(Ra.getTopJqUi());Fa(Cb,Rb);vb.setDragDropHandler(Rb);p.setDragDropHandler(Rb);f.setDragDropHandler(Rb);
h.setDragDropHandler(Rb);za(new U);Za(new fa);L();gb.collapseFirstHalf(!0)}return gb.getJqUi()};this.protectedCreateToolbarIndividualPart=function($a){var Db=$("<div>");$a.addSeperatorForView(Db);if(F().isDesignable()){$a.addMenuButtonForView(Db,$b,"btn_analysis",Va.get("analysis","\u5206\u6790"));var Sb=$a.addButtonForView(Db,Xb,"btn_reverse",Va.get("rowColReverse","\u884c\u5217\u7f6e\u6362"));$a.addButtonForView(Db,Zb,"btn_clear",Va.get("clear","\u6e05\u9664"))}var cc=$a.addButtonForView(Db,dc,
null,"");$a.addSeperatorForView(Db);var gc=F().isExportable(),sc=F().isPrintable(),oc=(new la).create(gc,sc,{createFacade:Ra.createFacade,createJsonModelWrapper:function(){z();var pc=Pa.createExecutingCopy(Ca.getChartType(),!0),mc=Ca.createDependentMeta(Ra.getMeta(),Ra.getJsonAdditionalFieldNames()),uc={};uc.meta=mc.toJsonObject();uc.model=Ca.toJsonObject();uc.preferences=pc.toJsonObject();return uc},createJsonAdditionalFilters:function(){return Ra.getJsonAdditionalFilters()},getExportSetting:function(){return Pa.getExportSetting()},
setExportSetting:function(pc){return Pa.setExportSetting(pc)},getExportConfig:function(){return Pa.getExportConfig()},setExportConfig:function(pc){return Pa.setExportConfig(pc)}},function(pc,mc,uc){return $a.addMenuButtonForView(Db,function(){return pc},mc,uc)},function(pc,mc){return Va.get(pc,mc)}),tc=function(){for(var pc=!n&&V().isExportable(),mc=0;mc<oc.length;mc++)oc[mc].setEnabled(pc);pc=!Ca.isExecutableContentEmpty();Oa.fireExhibitionContentChangedEvent(pc)};B=function(pc){tc()};V().setExhibitionChangedListener(function(){tc()});
A=function(){Sb&&Nb(Sb)};Gb(cc);Sb&&Nb(Sb);Ra.getCommandManager().addPerformedListener(function(pc,mc,uc){Sb&&Nb(Sb)});return Db};var E=this.born;this.born=function(){Pa.getDesignerStatus().setHide(!1);hc();E()};this.protectedResizeImpl=function(){gb.resize();Ca&&g.refreshRightLanes()};this.suspend=function(){t=!0;sa();B&&B(!0)};this.protectedShowExecutingAccident=function($a,Db){ua();r=!0;V().showNoDataPrompt($a,Db)};this.protectedAppendNecessaryDimensions=function(){var $a=new I;$a.setValue(Ra.getMeta(),
Ca);Ra.getCommandManager().perform($a)};this.reExecute=function(){r=!0;Ib()};this.isAdditionalFilterActive=function(){return k&&k.isSwitchOn()};this.destroy=function(){V().destroy()};var F=function(){return Ra.getDesignerOperationJudger(M.TYPE_LongPainting)},z=function(){var $a=Pa.getDesignerStatus();$a.setWidth(gb.getNonemptyFirstWide());$a.setHeight(pb.getNonemptySecondWide());$a=Pa.getExhibitionStatus();V().collectStatus($a)},L=function(){var $a=Pa.getDesignerStatus(),Db=$a.getHeight();Db=200>
Db?200:640<Db?640:Db;pb.clearState();pb.setSecondSize(Db,200,640);$a=$a.getWidth();$a=200>$a?200:640<$a?640:$a;gb.clearState();gb.setFirstSize($a,200,640);$a=Pa.getExhibitionStatus();V().applyStatus($a)},ia=function(){V().clearHeightWidthCacheAction()},za=function($a){Pa&&Pa.removeChartConfigChangedListener(Tb);Pa=$a;Pa.addChartConfigChangedListener(Tb)},Za=function($a){V().reset();ua();Ra.getCommandManager().reset();Ca&&Ca.removeModelChangedListener(Kb);Ca=$a;Ca.addModelChangedListener(Kb);A&&A();
vb.setModel(Ca.getFilterFieldSet());p.setModel(Ca.getColumnAnalyticalFieldSet());f.setModel(Ca.getRowAnalyticalFieldSet());h.setModel(Ca.getMarkFieldSet());fc();lc();rb();Ca.isExecutableContentEmpty()||Wb(!0)},lb=function(){Cb=new ha;Cb.setGlobalDependence(Ra);ya.metaChanged(Ra.getMeta());var $a=Cb.getJqUi();Wa.layoutCtrlWithLRTB($a,Z.DESK_PADDING_LEFT,0,null,Z.DESK_PADDING_TOP,0,null);var Db=$("<div>");Db.append($a);pb.setFirstChild(Da.createChildWrapper(Db));$a=$("<div>");$a.on("click",function(Sb){jc()});
$a.attr("title",Va.get("collapseDesignPanel","\u6536\u8d77\u8bbe\u8ba1\u9762\u677f"));Db=$("<div>");Db.addClass("sa-metapane-button-collapse-icon");x.background(Db,"icon_left_collapse");$a.append(Db);Cb.addTitleBarButton($a);Cb.addClearSelectedAsker(function(Sb){Wa.isDescendent(Sb.getTarget(),zb.getJqUi()[0])&&Sb.retain()})},O=function(){var $a=Gc();zb=new ub;zb.setDependence($a);zb.setHorizontalOtherwiseVertical(!1);zb.setChangedCoworker(ia);zb.setMetaPaneVisitor(Hb());vb=new Lb;vb.setDependence($a);
vb.setTitle(Va.get("filterFieldCardTitle","\u6570\u636e\u7b5b\u9009"));vb.setHorizontalOtherwiseVertical(!1);vb.setItemMenuCreator(rc);p=new qb;p.setDependence($a);p.setTitle(Va.get("columnCardTitle","\u5217"));p.setHorizontalOtherwiseVertical(!1);p.setItemMenuCreator(rc);p.setItemPressListener(Hc);f=new qb;f.setDependence($a);f.setTitle(Va.get("rowCardTitle","\u884c"));f.setHorizontalOtherwiseVertical(!1);f.setItemMenuCreator(rc);f.setItemPressListener(Hc);h=new sb;h.setDependence($a);h.setTitle(Va.get("markCardTitle",
"\u503c\u5c55\u73b0\u65b9\u5f0f"));h.setHorizontalOtherwiseVertical(!1);h.setItemMenuCreator(rc);h.setItemPressListener(Hc);Yb=$("<div>");Yb.append(zb.getJqUi());Yb.append(vb.getJqUi());Yb.append(p.getJqUi());Yb.append(f.getJqUi());Yb.append(h.getJqUi());if($a=Ra.getAdditionalFiltersInfo())k=new Pb,k.setAdditionalFiltersInfo($a),k.createButtonsOnFilterCard(vb,Ra.getTopJqUi()),k.setSwitchListener(function(Db){Ib()})},D=function(){var $a=Gc();g=new Ua;g.setContextGetter($a);V().setPromptListener(function(Db){Ra.showStatusBarPrompt(Db)})},
V=function(){return g.getExhibition()},sa=function(){var $a=V().getJqUi(),Db=$a.find(".sa-exhibition-suspend-mask");0==Db.length&&(Db=$("<div>"),Db.addClass("sa-exhibition-suspend-mask"),Db.appendTo($a));Db.empty();return Db},Ba=function(){var $a=sa(),Db=new W;Db.setText(Va.get("executingCanceled","\u91cd\u65b0\u6267\u884c"));Db.addActionListener(function(Sb){Ib()});Db.getJqUi().css({position:"relative",width:"320px",height:"30px",margin:"20px"});Db.getJqUi().appendTo($a)},Fa=function($a,Db){Db.bindDragUi($a.getJqUi(),
function(Sb){Sb=$a.getDraggingMetaField(Sb);if(!Sb)return null;var cc=Sb.getDataType()!=e.DT_NUMBER&&Sb.isCanAsDimension();Sb=yb(Sb,cc);$a.lockScroll(!0);return Sb},function(Sb,cc){Sb&&$a.clearSelecteds();$a.lockScroll(!1)})},yb=function($a,Db){var Sb=new wa;Sb.setMetaField($a);Db?(Sb.setRole(a.ROLE_DIMENSION),Sb.setContinuous(!1),$a.getHierachy()&&Sb.setMetaField($a.getHierachy()[0])):($a=$a.isRelativeAggregation()?a.AGGREGATION_AGG:a.AGGREGATION_SUM,Sb.setRole(a.ROLE_MEASURE,$a),Sb.setContinuous(!0));
return Sb},Hb=function(){var $a=function(Db,Sb){for(var cc=[],gc=0;gc<Db.length;gc++){var sc=Db[gc];if(!(sc.isInvalid()||Sb&&sc.getDataType()==e.DT_NUMBER||!Sb&&sc.getDataType()!=e.DT_NUMBER)){var oc=yb(sc,Sb);sc.getDataType()==e.DT_DATE&&oc.setPartValue(a.PARTVALUE_DATE_YEAR);cc.push(oc)}}return cc};return{getDimensionSelecteds:function(){return $a(Cb.getSelecteds(),!0)},getMeasureSelecteds:function(){return $a(Cb.getSelecteds(),!1)},clearAllSelecteds:function(){Cb.clearSelecteds()}}},Gb=function($a){n?
($a.setText(Va.get("exeImmediately","\u5373\u65f6\u6267\u884c")),$a.setIconName("btn_resume"),$a.setTooltips(Va.get("exeImmediatelyCurrent","\u5f53\u524d\u4e3a\u201c\u6682\u7f13\u6267\u884c\u201d\u6a21\u5f0f\uff0c\u70b9\u51fb\u5207\u6362\u4e3a\u201c\u5373\u65f6\u6267\u884c\u201d"))):($a.setText(Va.get("exeDelay","\u6682\u7f13\u6267\u884c")),$a.setIconName("btn_suspend"),$a.setTooltips(Va.get("exeDelayCurrent","\u5f53\u524d\u4e3a\u201c\u5373\u65f6\u6267\u884c\u201d\u6a21\u5f0f\uff0c\u70b9\u51fb\u5207\u6362\u4e3a\u201c\u6682\u7f13\u6267\u884c\u201d")))},
Nb=function($a){var Db=Qb.getInstance(Ca.getChartType());$a.setEnabled(Db.isRowColReverseEnable(Ca))},$b=function(){var $a=new kb;$a.addItemModel(nc());$a.addItemModel(Ob());if(Ra.getMeta().isNormalSrcMode()){$a.addSeperator();var Db=$a.addItemModel,Sb=ab.createSubMenu(Va.get("total","\u5408\u8ba1")),cc=Ca.isRowGrandTotal(),gc=new bb;gc.setCaption(cc?Va.get("showRowTotalNo","\u4e0d\u663e\u793a\u884c\u603b\u8ba1"):Va.get("showRowTotalYes","\u663e\u793a\u884c\u603b\u8ba1"));gc.setMethod(Ca.isRowGrandTotal,
Ca.setRowGrandTotal);Sb.addItemModel(db.createCheckboxMenuItem(Va.get("showRowTotal","\u663e\u793a\u884c\u603b\u8ba1"),cc,gc,Ra.getCommandManager()));cc=Ca.isColumnGrandTotal();gc=new bb;gc.setCaption(cc?Va.get("showColTotalNo","\u4e0d\u663e\u793a\u5217\u603b\u8ba1"):Va.get("showColTotalYes","\u663e\u793a\u5217\u603b\u8ba1"));gc.setMethod(Ca.isColumnGrandTotal,Ca.setColumnGrandTotal);Sb.addItemModel(db.createCheckboxMenuItem(Va.get("showColTotal","\u663e\u793a\u5217\u603b\u8ba1"),cc,gc,Ra.getCommandManager()));
Db.call($a,Sb)}d.isDesigntimeSupported()&&Ra.getMeta().isNormalSrcMode()&&($a.addSeperator(),$a.addItemModel(tb()));return $a},nc=function(){var $a=Pa.getChartConfig(),Db=$a.isShowLabel(),Sb=Ra.getCommandManager();return ab.createCheckbox(Va.get("showChartLabel","\u663e\u793a\u56fe\u8868\u6807\u7b7e"),Db,function(cc){var gc=new bb;gc.setCaption(cc.isChecked()?Va.get("showChartLabelYes","\u663e\u793a\u56fe\u8868\u6807\u7b7e"):Va.get("showChartLabelNo","\u4e0d\u663e\u793a\u56fe\u8868\u6807\u7b7e"));
gc.setMethod($a.isShowLabel,$a.setShowLabel);gc.setValue(cc.isChecked());Sb.perform(gc)})},Ob=function(){return ab.createActionMenuItem(Va.get("chartSetting","\u56fe\u8868\u8bbe\u7f6e")+"...",function($a){$a=new Bb;var Db=Pa.getChartConfig();$a.setChartConfig(Db.backup());$a.setAcceptedListener(function(Sb){var cc=new bb;cc.setCaption(Va.get("chartSetting","\u56fe\u8868\u8bbe\u7f6e"));cc.setMethod(Db.backup,Db.restore);cc.setValue(Sb);Ra.getCommandManager().perform(cc)});$a.showDialog()})},tb=function(){return ab.createActionMenuItem(Va.get("linkageSetting",
"\u5355\u636e\u8054\u67e5\u8bbe\u7f6e")+"...",function($a){$a=($a=Ca.getLinkTargets())?$a.toArray():[];d.setup($a,function(){return(new P).addItem()},function(Db){if(Db){var Sb=new bb;Sb.setCaption(Va.get("linkageSetting","\u5355\u636e\u8054\u67e5\u8bbe\u7f6e"));Sb.setMethod(Ca.getLinkTargets,Ca.setLinkTargets);if(0==Db.length)Sb.setValue(null);else{var cc=new P;cc.fromArray(Db);Sb.setValue(cc)}Ra.getCommandManager().perform(Sb)}})})},Xb=function(){var $a=Qb.getInstance(Ca.getChartType());$a.isRowColReverseEnable(Ca)&&
$a.rowColReverse(Ca,Ra.getCommandManager())},Zb=function(){var $a=new T;$a.setValue(Ca);Ra.getCommandManager().compositeStart($a.getCaption());Ra.getCommandManager().perform($a);ia();V().clearTreeExpandState();Ra.getCommandManager().compositeEnd()},dc=function($a){var Db=!n;n!=Db&&(n=Db,!n&&t&&Ib());Gb($a)},jc=function(){var $a=!Pa.getDesignerStatus().isHide();Pa.getDesignerStatus().setHide($a);hc()},hc=function(){var $a=!Pa.getDesignerStatus().isHide(),Db=gb.getJqSplitLine();Db.children(".sa-desk-splitline-button").remove();
$a?(gb.setSplitLineWide(Z.DESK_SPLIT_GAP_H),gb.collapseFirstHalf(!1)):($a=$("<div>"),$a.text(">>"),$a.addClass("sa-desk-splitline-button"),$a.on("click",jc),gb.setSplitLineWide(18),gb.collapseFirstHalf(!0),Db.append($a))},qc=function($a){$a=Z.DESK_PADDING_LEFT;var Db=Z.DESK_PADDING_BOTTOM,Sb=Z.CARD_GAP,cc=Yb.innerWidth()-$a-Sb,gc=cc>>1;cc-=gc;var sc=gc+Sb+cc,oc=zb.relayout(sc),tc=Yb.innerHeight()-0-Db-oc-2*Sb;Db=tc>>1;tc-=Db;var pc=$a+gc+Sb,mc=0,uc=vb.getJqUi(),zc=uc.outerWidth()-uc.innerWidth();
Wa.layoutCtrl(uc,$a,mc,gc-zc,Db-zc);Wa.layoutCtrl(p.getJqUi(),pc,mc,cc-zc,Db-zc);mc+=Db+Sb;Wa.layoutCtrl(f.getJqUi(),$a,mc,gc-zc,tc-zc);Wa.layoutCtrl(h.getJqUi(),pc,mc,cc-zc,tc-zc);mc+=tc+Sb;Wa.layoutCtrl(zb.getJqUi(),$a,mc,sc-zc,oc-zc)},fc=function(){Rb&&(h.setDragDropHandler(Rb,!1),h.setChartType(Ca.getChartType()),h.setDragDropHandler(Rb,!0))},lc=function(){var $a=Ca.getChartType();$a=Qb.getInstance($a).getCardsDynamicInfo();p.setTitle($a.getColumnCardInfo().getTitle());f.setTitle($a.getRowCardInfo().getTitle());
h.setTitle($a.getMarkCardInfo().getTitle());zb.updateDisplay()},ua=function(){Ia();Ca&&(g.clearLegends(),g.clearFilterCards());V().clearExecuted()},Ia=function(){m&&m.isVisible()&&m.hideDialog();$(document.body).find(".sa-ctrl-common-modallayer").remove()},ib=function(){f.checkAllInvalidFields();p.checkAllInvalidFields();h.checkAllInvalidFields();vb.checkAllInvalidFields()},rb=function(){var $a=Qb.getInstance(Ca.getChartType()).getCardsOperatingPrompt(Ca);f.showOperatingPrompt($a.getRowCardPrompt());
p.showOperatingPrompt($a.getColumnCardPrompt());h.showOperatingPrompt($a.getMarkCardPrompt())},Tb=function($a,Db){Db==U.KEY_EXECUTE?Ra.getCommandManager().untilWakeup(Ib):Db==U.KEY_REPAINT&&Ra.getCommandManager().untilWakeup(V().repaint)},Kb=function($a){A&&A();$a.isContainKeys([fa.KEY_CHART_TYPE,fa.KEY_CLEAR,fa.KEY_UNCLEAR,ma.KEY_ADD,ma.KEY_REMOVE])&&Ra.getCommandManager().untilWakeup(rb);if($a.isContainKey(fa.KEY_CLEAR))ua();else{$a.isContainKeys([fa.KEY_CLEAR,fa.KEY_UNCLEAR,ma.KEY_REMOVE,ma.KEY_REPLACE])&&
Ia();$a.isContainKey(fa.KEY_CHART_TYPE)&&(fc(),lc(),Ra.getCommandManager().untilWakeup(ib));var Db=!1;if($a.isContainFieldSet(Ca.getFilterFieldSet())){if($a.isContainKey(Xa.KEY_FILTER_ONSHOW)){g.refreshRightLanes();return}if($a.isContainKey(a.KEY_SORT))Db=!0;else if($a.isContainKeys([e.KEY_FORMATSTRING,e.KEY_FISCALYEARSTART,e.KEY_SORTACCORDING,a.KEY_FORMULA],Ca.getFilterFieldSet()))r=!0;else if($a.isContainKey(Xa.KEY_FILTER_VALUE,Ca.getFilterFieldSet()))$a=$a.getTargetField(Ca.getFilterFieldSet(),
Xa.KEY_FILTER_VALUE),w.push($a);else{a:{var Sb=Ca.getFilterFieldSet();for(var cc=0;cc<Sb.getCount();cc++)if(Sb.get(cc),!Sb.getFilter(cc)){Sb=!1;break a}Sb=!0}Sb&&g.refreshRightLanes();if($a.isContainKey(ma.KEY_ADD))$a=$a.getTargetField(Ca.getFilterFieldSet(),ma.KEY_ADD),!$a.getMetaField().isNecessaryDimension()&&(Db=!0);else if($a.isContainKey(Xa.KEY_FILTER)||$a.isContainKey(a.KEY_DISPLAYNAME))Db=!0}}else $a.isContainKeys([fa.KEY_TREE_EXPANDING,fa.KEY_SORTING_LANE,a.KEY_SORT])&&V().keepScrollStatus(!0);
Db||Ra.getCommandManager().untilWakeup(Ib)}},Eb=function(){for(var $a=w.length-1;0<=$a;$a--){var Db=w[$a];Db=Ca.getFilterFieldSet().getIndex(Db);if(0<=Db)return Db}return-1},Ib=function(){t=!0;n?(sa(),B&&B(!0)):(B&&B(!1),t=!1,Ca.isExecutableContentEmpty()?(g.clearLegends(),V().clearExecuted()):(window.console&&console.log("remote request data..."),r?(r=!1,ua(),Wb(!1)):0<=Eb()?(z(),g.filteringExecute(Eb(),ic)):(z(),g.execute(ic))))},Wb=function($a){!$a&&z();g.christmasExecute($a,function(Db,Sb,cc){ic(Db,
Sb,cc);Db||(Db=Sb[0],205301!=Db&&205302!=Db&&205403!=Db&&-1!=Db)||(r=!0)})},ic=function($a,Db,Sb){if($a)w=[];else{$a=Db[0];var cc=Db[1];Db=Db[2];-1==$a?Ba():Oa.executingPerformanceErrorHandler(Sb,$a,cc)||Oa.executingCommonErrorHandler($a,cc)||(Sb=new l,Sb.setOptionType(l.OPTION_OK),Sb.setMessage($a+"\n"+cc),Db&&Sb.setDetail(Db),Sb.showDialog())}},rc=function($a,Db,Sb){var cc=$a==Ca.getColumnAnalyticalFieldSet()||$a==Ca.getRowAnalyticalFieldSet(),gc=$a==Ca.getFilterFieldSet(),sc=Db.getMetaField().getDataType()==
e.DT_DATE&&Db.isDimension(),oc=Db.getMetaField().getDataType()==e.DT_DATE&&Db.isMeasure()&&Db.getAggregation()!=a.AGGREGATION_COUNT&&Db.getAggregation()!=a.AGGREGATION_CNTD,tc=new kb;if(!gc&&Db.isMeasure()&&!oc){var pc=ab.createActionMenuItem(Va.get("dataFormatForNumber","\u6570\u5b57\u683c\u5f0f")+"...",function(mc){m||(m=new jb(ya.getJqUi()),m.setCommandManager(Ra.getCommandManager()));m.showDialog();m.setModel(Db)});tc.addItemModel(pc);$a==Ca.getMarkFieldSet()&&Ea.TYPE_COLOR==$a.getFieldMatchingMarkType(Db)&&
(pc=ab.createActionMenuItem(Va.get("markTypeColor","\u989c\u8272")+"...",function(mc){mc=Db.getContinuousColor();var uc=new kc;uc.setTitle(Va.get("markTypeColor","\u989c\u8272"));uc.setup(mc,Ra.createFacade,function(zc){var Ic=new bb;Ic.setCaption(Db.getComplexText()+Va.get("markTypeColor","\u989c\u8272"));Ic.setMethod(Db.getContinuousColor,Db.setContinuousColor);Ic.setValue(zc);Ra.getCommandManager().perform(Ic)});uc.showDialog()}),tc.addItemModel(pc));tc.addSeperator()}gc||!sc&&!oc||(pc=ab.createActionMenuItem(Va.get("dataFormatForDate",
"\u6570\u5b57\u683c\u5f0f")+"...",function(mc){mc=new Na;mc.setCommandManager(Ra.getCommandManager());mc.showDialog(Db)}),tc.addItemModel(pc),tc.addSeperator());cc&&Ra.getMeta().isNormalSrcMode()&&wc(Db,$a)&&(sc=Db.isShowSubtotal(),oc=new bb,oc.setCaption(Db.getComplexText()+(sc?Va.get("showSubtotalNo","\u4e0d\u663e\u793a\u5c0f\u8ba1"):Va.get("showSubtotalYes","\u663e\u793a\u5c0f\u8ba1"))),oc.setMethod(Db.isShowSubtotal,Db.setShowSubtotal),tc.addItemModel(db.createCheckboxMenuItem(Va.get("showSubtotal",
"\u5c0f\u8ba1"),sc,oc,Ra.getCommandManager())),tc.addSeperator());gc?yc(Sb,tc,$a,Db):(Db.getMetaField().isCanAsDimension()&&Db.getMetaField().isCanAsMeasure()&&(Cc(tc,$a,Db,cc),tc.addSeperator()),Db.isMeasure()&&Ra.getMeta().isNormalSrcMode()&&(Jc(tc,Db),tc.addSeperator(),cc=Db.getMetaField().getFormulaAggStatus(),cc!=e.FORMULA_STATUS_WITHTOTAL&&cc!=e.FORMULA_STATUS_INTERLINE&&(Ec(tc,Db),tc.addSeperator())));Db.isInvalid()||(pc=ab.createActionMenuItem(Va.get("rename","\u91cd\u547d\u540d"),function(mc){Sb.modifyDisplayName(Ra.getCommandManager())}),
tc.addItemModel(pc));oc=new X($a);oc.setValue(Db);pc=db.createActionMenuItem(Va.get("remove","\u79fb\u9664"),oc,Ra.getCommandManager());tc.addItemModel(pc);return tc},wc=function($a,Db){if(!$a.isDimension())return!1;for(var Sb=!1,cc=Db.getCount()-1;0<=cc;cc--){var gc=Db.get(cc);if(gc==$a)break;if(gc.isDimension()){Sb=!0;break}}return Sb},yc=function($a,Db,Sb,cc){var gc=Sb.getFilter(cc),sc=Ra.getCommandManager();gc.isStateValid()&&Db.addItemModel(ab.createActionMenuItem(Va.get("filterSelectData","\u6570\u636e\u7b5b\u9009")+
"...",function(pc){pc=gc.getAssociatedField().getText();var mc=$a.getJqUi();(new pa).showDialog(pc,gc,sc,mc,!1)}));Sb=gc.isOnShow()?Va.get("filterHide","\u9690\u85cf\u7b5b\u9009\u5668"):Va.get("filterShow","\u663e\u793a\u7b5b\u9009\u5668");Sb+=cc.getComplexText();var oc=new bb;oc.setCaption(Sb);oc.setMethod(gc.isOnShow,gc.setOnShow);Sb=db.createCheckboxMenuItem(Va.get("filterOnShowSwitch","\u663e\u793a\u7b5b\u9009\u5668"),gc.isOnShow(),oc,sc);Db.addItemModel(Sb);if(gc instanceof v){var tc=!cc.getMetaField().isParentChildDimension();
Sb=function(pc,mc){var uc=gc.getCtrlType();!uc&&(uc=tc?v.CTRLTYPE_CHECKBOX_LIST:v.CTRLTYPE_CHECKBOX_POPUP);uc=uc==mc;var zc=new nb;zc.setCaption(Va.get("filterChangeProperty","\u7b5b\u9009\u5668#1: #2").replace("#1",cc.getComplexText()).replace("#2",pc));zc.setValue(gc,mc);return db.createRadioMenuItem(pc,"ctrlType",uc,zc,sc)};oc=ab.createSubMenu(Va.get("mode","\u6a21\u5f0f"));tc&&oc.addItemModel(Sb(Va.get("multiSelectedList","\u591a\u9009\u5217\u8868"),v.CTRLTYPE_CHECKBOX_LIST));oc.addItemModel(Sb(Va.get("multiSelectedPopup",
"\u591a\u9009\u5f39\u7a97\u9009\u62e9\u5668"),v.CTRLTYPE_CHECKBOX_POPUP));tc&&oc.addItemModel(Sb(Va.get("singleSelectedList","\u5355\u9009\u5217\u8868"),v.CTRLTYPE_RADIOBUTTON_LIST));oc.addItemModel(Sb(Va.get("singleSelectedPopup","\u5355\u9009\u5f39\u7a97\u9009\u62e9\u5668"),v.CTRLTYPE_RADIOBUTTON_POPUP));Db.addItemModel(oc);vc(Db,cc,!1)}Db.addSeperator();Ra.getMeta().isNormalSrcMode()&&(oc=Sb=null,gc instanceof y?(Sb=Va.get("rangeForAllValues","\u8303\u56f4\u5305\u62ec\u5168\u90e8\u503c"),oc=Va.get("rangeForRelevantValues",
"\u8303\u56f4\u4ec5\u5305\u62ec\u76f8\u5173\u503c")):gc instanceof v&&(Sb=Va.get("optionForAllValues","\u5907\u9009\u503c\u4e3a\u5168\u90e8\u503c"),oc=Va.get("optionForRelevantValues","\u5907\u9009\u503c\u4ec5\u4e3a\u76f8\u5173\u503c")),null!=Sb&&null!=oc&&(Db.addItemModel(Ac(Sb,!1,gc,cc,sc)),Db.addItemModel(Ac(oc,!0,gc,cc,sc)),Db.addSeperator()))},vc=function($a,Db,Sb){var cc=Va.get("sort","\u6392\u5e8f"),gc=ab.createSubMenu(cc);$a.addItemModel(gc);$a=function(sc,oc){void 0===oc&&(oc=sc);var tc=
a.sortToString(sc);sc=Db.getSort()==sc||Db.getSort()==oc;var pc=new bb;pc.setCaption(cc+"-"+tc);pc.setMethod(Db.getSort,Db.setSort);pc.setValue(oc);return db.createRadioMenuItem(tc,"sort",sc,pc,Ra.getCommandManager())};Sb?(gc.addItemModel($a(null)),gc.addItemModel($a(a.SORT_ASC))):gc.addItemModel($a(a.SORT_ASC,null));gc.addItemModel($a(a.SORT_DESC))},Ac=function($a,Db,Sb,cc,gc){var sc=Sb.isJustShowAffected()==Db,oc=new bb;oc.setCaption(Va.get("filterChangeProperty","\u7b5b\u9009\u5668#1: #2").replace("#1",
cc.getComplexText()).replace("#2",$a));oc.setMethod(Sb.isJustShowAffected,Sb.setJustShowAffected);oc.setValue(Db);return db.createRadioMenuItem($a,"affected",sc,oc,gc)},Cc=function($a,Db,Sb,cc){var gc=function(xc){cc&&xc.push(new Q(Db));for(var Bc=Ra.getCommandManager().createCompositeAction(),Dc=0;Dc<xc.length;Dc++){var Kc=xc[Dc];Bc.appendUnitAction(Kc);0==Dc&&Bc.setCaption(Kc.getCaption())}return Bc},sc=function(xc){var Bc=new Jb(Sb);Bc.setValue(xc);return Bc},oc=function(xc){var Bc=new Ya(Sb);
Bc.setValue(xc);return Bc},tc=Sb.getMetaField().getDataType()==e.DT_NUMBER,pc=Sb.getMetaField().getDataType()==e.DT_DATE;if(pc){var mc=ab.createSubMenu(Va.get("dimension","\u7ef4\u5ea6"),!0,"role");$a.addItemModel(mc);var uc=function(xc){var Bc=sc(a.ROLE_DIMENSION),Dc=oc(xc);Bc=gc([Bc,Dc]);Dc=a.partValueToString(xc);xc=xc==Sb.getPartValue();return db.createRadioMenuItem(Dc,"role",xc,Bc,Ra.getCommandManager())};mc.addItemModel(uc(a.PARTVALUE_DATE_YEAR));mc.addItemModel(uc(a.PARTVALUE_DATE_QUARTER));
mc.addItemModel(uc(a.PARTVALUE_DATE_MONTH));mc.addItemModel(uc(a.PARTVALUE_DATE_DAY));mc.addItemModel(uc(a.PARTVALUE_DATE_YQ));mc.addItemModel(uc(a.PARTVALUE_DATE_YM));mc.addItemModel(uc(a.PARTVALUE_DATE_YMD))}else mc=sc(a.ROLE_DIMENSION),uc=oc(null),mc=gc([mc,uc]),uc=Sb.isDimension(),mc=db.createRadioMenuItem(Va.get("dimension","\u7ef4\u5ea6"),"role",uc,mc,Ra.getCommandManager()),$a.addItemModel(mc);var zc=Sb.isMeasure(),Ic=Sb.getAggregation();mc=ab.createSubMenu(Va.get("measure","\u5ea6\u91cf")+
(zc?"("+a.aggregationToString(Ic)+")":""),!0,"role");$a.addItemModel(mc);$a=function(xc){var Bc=sc(xc);if(!pc||!(Ic==a.AGGREGATION_MAX&&xc==a.AGGREGATION_MIN||Ic==a.AGGREGATION_MIN&&xc==a.AGGREGATION_MAX)){var Dc=oc(null);Bc=gc([Bc,Dc])}Dc=zc&&Ic==xc;xc=a.aggregationToString(xc);return db.createRadioMenuItem(xc,"role",Dc,Bc,Ra.getCommandManager())};tc&&(mc.addItemModel($a(a.AGGREGATION_SUM)),mc.addItemModel($a(a.AGGREGATION_AVG)),mc.addItemModel($a(a.AGGREGATION_MEDIAN)));if(tc||pc)mc.addItemModel($a(a.AGGREGATION_MAX)),
mc.addItemModel($a(a.AGGREGATION_MIN));mc.addItemModel($a(a.AGGREGATION_COUNT));mc.addItemModel($a(a.AGGREGATION_CNTD))},Jc=function($a,Db){var Sb=Va.get("totalUsing","\u6c47\u603b\u8ba1\u7b97\u65b9\u5f0f"),cc=ab.createSubMenu(Sb);$a.addItemModel(cc);Sb=Db.getComplexText()+Sb;$a=function(oc){var tc=Db.getTotalUsing()==oc,pc=oc?a.aggregationToString(oc):Va.get("totalUsingAuto","\u8ddf\u968f\u5ea6\u91cf"),mc=new bb;mc.setCaption(Sb+"-"+pc);mc.setMethod(Db.getTotalUsing,Db.setTotalUsing);mc.setValue(oc);
return db.createRadioMenuItem(pc,"totalUsing",tc,mc,Ra.getCommandManager())};cc.addItemModel($a(null));cc.addItemModel($a(a.AGGREGATION_SUM));cc.addItemModel($a(a.AGGREGATION_AVG));cc.addItemModel($a(a.AGGREGATION_MEDIAN));cc.addItemModel($a(a.AGGREGATION_MAX));cc.addItemModel($a(a.AGGREGATION_MIN));cc.addSeperator();$a=Db.isTotalDisplayHidden();var gc=Va.get("totalUsingHidden","\u9690\u85cf"),sc=new bb;sc.setCaption(Sb+"-"+gc+"-"+($a?"\u00d7":"\u221a"));sc.setMethod(Db.isTotalDisplayHidden,Db.setTotalDisplayHidden);
$a=db.createCheckboxMenuItem(gc,$a,sc,Ra.getCommandManager());cc.addItemModel($a)},Ec=function($a,Db){var Sb=function(sc){var oc=Db.getQuickSetup()==sc,tc=a.quickSetupToString(sc);return ab.createCheckbox(tc,oc,function(pc){pc=pc.isChecked()?sc:null;var mc=new bb;mc.setCaption(cc+"-"+tc);mc.setMethod(Db.getQuickSetup,Db.setQuickSetup);mc.setValue(pc);Ra.getCommandManager().perform(mc)})},cc=Va.get("quickSetup1","\u8ba1\u7b97"),gc=ab.createSubMenu(cc,!0);$a.addItemModel(gc);gc.addItemModel(Sb(a.QUICKSETUP_LASTPERIOD_VALUE));
gc.addItemModel(Sb(a.QUICKSETUP_LASTPERIOD_DIFF));gc.addItemModel(Sb(a.QUICKSETUP_LASTPERIOD_RATIO));gc.addSeperator();gc.addItemModel(Sb(a.QUICKSETUP_SAMEPERIODLASTYEAR_VALUE));gc.addItemModel(Sb(a.QUICKSETUP_SAMEPERIODLASTYEAR_DIFF));gc.addItemModel(Sb(a.QUICKSETUP_SAMEPERIODLASTYEAR_RATIO));gc.addSeperator();gc.addItemModel(Sb(a.QUICKSETUP_RUNNINGSUM));gc.addItemModel(Sb(a.QUICKSETUP_RUNNINGSUMY));cc=Va.get("quickSetup2","\u5360\u6bd4");gc=ab.createSubMenu(cc,!0);$a.addItemModel(gc);gc.addItemModel(Sb(a.QUICKSETUP_RATIO_10));
gc.addItemModel(Sb(a.QUICKSETUP_RATIO_01));gc.addItemModel(Sb(a.QUICKSETUP_RATIO_11));gc.addItemModel(Sb(a.QUICKSETUP_RATIO_90));gc.addItemModel(Sb(a.QUICKSETUP_RATIO_09));gc.addItemModel(Sb(a.QUICKSETUP_RATIO_99))},Hc=function($a){m&&m.isVisible()&&$a.isMeasure()&&$a!=m.getModel()&&(m.acceptEditing(),m.setModel($a))},Fc=function($a){$a(F())},Gc=function(){return{createFacade:Ra.createFacade,getTopJqUi:Ra.getTopJqUi,getCommandManager:Ra.getCommandManager,getMeta:Ra.getMeta,getAnalyticalModel:function(){return Ca},
getPreferences:function(){return Pa},getJsonAdditionalFilters:Ra.getJsonAdditionalFilters,getJsonAdditionalFieldNames:Ra.getJsonAdditionalFieldNames,loadDesignerOperationJudger:Fc,getBlockingJqUi:function(){return $(document.body)}}}};Ab.LongPaintingDesk.setSkin=function(ya){Z=ya};Ab.ExecutedArea=Ua;var Z,Wa,fb,Va,Ka,ab,kb,La,ob,ta,ja,Da,na,l,ba,W,ea,aa,la,x,d,b,e,c,a,q,u,v,y,C,P,U,fa,wa,ma,Ea,Xa,bb,Jb,Ya,nb,wb,va,Y,J,N,X,Q,G,T,R,S,ca,H,I,M,K,ha,Aa,Ta,db,jb,Na,xb,Ub,ec,kc,Pb,Qb=Ab.ChartTypeFactory,
ac=Ab.ExecutableExhibition,bc=Ab.AbstractLegendUi,Bb=Ab.ChartSetting;(function(){var ya=com.kingdee.bos.qing.common;Wa=ya.DomUtil;fb=ya.DateFormater;ya=com.kingdee.bos.qing.framework.common;Va=ya.MultilanguageManager.createPackageAccessor(Ab);ya=com.kingdee.bos.qing.ui.component;Ka=ya.AbstractModalDialog;ab=ya.Menu;kb=ya.MenuModel;La=ya.CheckBox;ob=ya.RadioButton;ta=ya.DynamicScroller;ja=ya.RegionSlider;Da=ya.SplitPane;na=ya.TextField;l=ya.MessageDialog;ba=ya.Label;W=ya.WorkButton;ea=ya.SearchBox;
ya=com.kingdee.bos.qing.common.ui;aa=ya.CommonIconUtil;ya=com.kingdee.bos.qing.exportmanage;la=ya.ExportMenuCreator;ya=com.kingdee.bos.qing.core;x=ya.Icons;d=ya.LinkageRegister;ya=com.kingdee.bos.qing.core.commonui;b=ya.ErrorCodeParser;ya=com.kingdee.bos.qing.core.model;e=ya.MetaField;c=ya.ModelPage;a=ya.AbstractAnalyticalField;q=ya.AbstractFilterPreparedModel;u=ya.AbstractFilter;v=ya.DiscreteFilter;y=ya.ContinuousFilter;C=ya.ContinuousDateFilter;P=ya.LinkTargets;ya=com.kingdee.bos.qing.longer.model;
U=ya.AnalyticalPreferences;fa=ya.AnalyticalModel;wa=ya.AnalyticalField;ma=ya.AnalyticalFieldSet;Ea=ya.MarkFieldSet;Xa=ya.FilterFieldSet;ya=com.kingdee.bos.qing.core.controller;bb=ya.ActionChangeProperty;Jb=ya.ActionChangeRole;Ya=ya.ActionChangePartValue;nb=ya.ActionChangeFilterCtrlType;wb=ya.ActionAddSelectedValueForDiscreteFilter;va=ya.ActionChangeSelectedValueForDiscreteFilter;Y=ya.ActionChangeValueForContinuousFilter;ya=com.kingdee.bos.qing.longer.controller;J=ya.ActionAddAnalyticalField;N=ya.ActionReplaceAnalyticalField;
X=ya.ActionRemoveAnalyticalField;Q=ya.ActionKeepLogicalOrder;G=ya.ActionSetMarkType;T=ya.ActionClearModel;R=ya.ActionSetFilter;S=ya.ActionExpandHierachy;ca=ya.ActionCollapseHierachy;H=ya.ActionSetAllSelectedForDiscreteFilter;I=ya.ActionAppendAllNecessaryDimensions;ya=com.kingdee.bos.qing.core.ui;M=ya.ViewConfig;K=ya.AbstractDesignerView;ha=ya.MetaPane;Aa=ya.AdjustableLane;Ta=ya.DragDropHandler;db=ya.MenuUtil;jb=ya.NumberFormatSetting;Na=ya.DateFormatSetting;xb=ya.NumberFilterAggregationSelector;Ub=
ya.DateFilterPartValueSelector;ec=ya.AbstractPopupFilterPane;kc=ya.ContinuousColorSettingDialog;Pb=ya.AdditionalFilterSupporter})();xa.INVALID_HEIGHT=60;xa.create=function(ya,Oa){if(ya instanceof v)var Ra=ya.getAssociatedField().getMetaField().isParentChildDimension()?new eb:new Ma;else if(ya instanceof y)Ra=new Ja;else if(ya instanceof C)Ra=new oa;else throw Error("Modify here.");Ra.setDependence(Oa);Ra.setFilter(ya);return Ra}})();(function(){function Ua(){var f=this,h=[],k=[];this.append=function(g,m){h.push(g);k.push(m)};this.isContainKey=function(g){for(var m=0;m<h.length;m++)if(g==h[m])return!0;return!1};this.isContainKeys=function(g){for(var m=0;m<g.length;m++)if(f.isContainKey(g[m]))return!0;return!1};this.isContainItemModelSet=function(g){for(var m=0;m<k.length;m++)if(k[m]&&g==k[m].getItemModelSet())return!0;return!1};this.getTargetItemModels=function(g,m){for(var r=0;r<h.length;r++)if(m==h[r]&&k[r]&&g==k[r].getItemModelSet())return k[r].getItemModels();
return null};this.isContainChartPropertyKey=function(){for(var g=0;g<h.length;g++)if(h[g].substring(0,2)==p.Prefix)return!0;return!1};this.isRepaintNeeded=function(){for(var g=0;g<h.length;g++){var m=h[g];if(m.substring(m.length-4)==p.NeedRepaint)return!0}return!1};this.isExecuteNeeded=function(){for(var g=0;g<h.length;g++){var m=h[g];if(m.substring(m.length-4)==p.NeedExecute)return!0}return!1};this.toString=function(){return h.join(";")+" <---\x3e "+k.join(";")}}function Mb(f,h){var k;this.getItemModelSet=
function(){return f};this.getItemModels=function(){return h};this.setSubEventTarget=function(g){k=g};this.getSubEventTarget=function(){return k};this.toString=function(){return f.constructor.name+(k?"-"+k.toString():"")};this.getSubEventMetaField=function(){return k?k.getSubEventMetaField():null}}function ub(f){this.getSubEventMetaField=function(){return null};this.toString=function(){return f.constructor.name+f.getSquareField().getComplexText()}}function mb(){ya.call(this);var f=this,h=this.protectedMethod,
k=new xb,g,m,r,w;this.getLinkTargets=function(){return w.getChartProperty().getLinkTargets()};this.getBriefOutputableFieldsModel=function(){var z=f.getChart().getBriefOutputableDimensionsAndMeasures(),L=new Yb;L.setDimensionFields(z[0]);L.setMeasureFields(z[1]);return L};this.addModelChangedListener=function(z){k.addListener(z)};this.removeModelChangedListener=function(z){k.removeListener(z)};var n=function(z){f.checkAllFields();k.fireEvent(function(L){L(z)})},t=function(z,L){h.isListenerDumb()||
(m||(m=new Ua),m.append(L,z),z&&z.getSubEventMetaField()?(g&&clearTimeout(g),g=setTimeout(function(){n(m);m=null},50)):(n(m),m=null))};this.getFilterSet=function(){r||(r=new Vb,r.setItemCountMin(0),r.setItemCountMax(65535),r.addChangedListener(t));return r};this.getChart=function(){w||f.setChart(new nb);return w};this.setChart=function(z){w&&(w.setChangedListener(null),w.awake(!1));if(w=z)w.setChangedListener(t),w.awake(!0);f.checkAllFields();t(null,mb.KEY_CHART_TYPE)};this.getChartTypeName=function(){return f.getChart().getChartTypeName()};
this.isExecutableContentEmpty=function(){return f.getChart().isExecutableContentEmpty()};this.getUsingMetaFields=function(z,L){return B(z,!0,!1,L,null)};this.createDependentMeta=function(z,L){var ia=z.getEliminationKeyMetaFields(),za=z.getDimensionNecessityMetaFields();ia=ia.concat(za);L=B(z,!1,!0,L,ia);return z.createExecutingCopy(L)};var B=function(z,L,ia,za,Za){var lb=bc.createSearchingUsingMetaFieldsTool(z),O=function(V){lb.checkField(V.getMetaField())};w.lookupAllItemModelSet(O,L);f.getFilterSet().traversalItems(O);
if(L&&w.isRollInSupported()){L=1;for(var D=w.getRollInState().getCurrentRollInFieldCount();L<=D;L++)O(w.lookupRolledInField(L))}ia&&w.getChartProperty().lookupAllMetaFieldBinding(function(V){(V=z.searchMetaField(V))&&lb.checkField(V)});if(za)for(L=0;L<za.length;L++)(ia=z.searchMetaField(za[L]))&&lb.checkField(ia);if(Za)for(L=0;L<Za.length;L++)ia=Za[L],lb.checkField(ia);return lb.getUsingMetaFields()};this.isAnyCalculatedFieldUsed=function(z){var L=!1,ia=function(za){za=za.getMetaField();return!za.getFormula()||
z&&z!=za.getFullName()?!1:L=!0};w.lookupAllItemModelSet(ia);!L&&f.getFilterSet().traversalItems(ia);return L};this.howManyCalculatedFieldsUsed=function(){var z=0,L=function(ia){ia.getMetaField().getFormula()&&z++};w.lookupAllItemModelSet(L);f.getFilterSet().traversalItems(L);return z};this.checkAllFields=function(){w.lookupAllItemModelSet(A);f.getFilterSet().traversalItems(A);w.checkAllFieldsProblem()};var A=function(z){var L=z.getSquareField();z=z.getMetaField();var ia=z.getTable(),za=ia&&ia.searchMetaField(z.getPureName())?
!1:!0;ia=new Oa.InvalidPrompt;ia.setLevel(Oa.InvalidPrompt.LEVEL_META_LOST,za);L.setInvalidPrompt(ia);za=z.isInvalid()?!0:!1;ia=new Oa.InvalidPrompt;ia.setLevel(Oa.InvalidPrompt.LEVEL_META_INVALID,za);L.setInvalidPrompt(ia);ia=z.isRelativeAggregation();za=L.getAggregation()==Oa.AGGREGATION_AGG;z=Oa.isAggregationFittedDataType(L.getAggregation(),z.getDataType());z=L.isMeasure()&&(ia&&!za||!ia&&za||!z);ia=new Oa.InvalidPrompt;ia.setLevel(Oa.InvalidPrompt.LEVEL_AGG,z);L.setInvalidPrompt(ia)},E=function(z){var L=
{},ia=[],za=function(D){D=D.getSquareField();var V=z?null:D.getId();V?L[V]=!0:ia.push(D)};f.getChart().lookupAllItemModelSet(za);f.getFilterSet().traversalItems(za);za=1;for(var Za=0;Za<ia.length;Za++){var lb=ia[Za],O=null;do O="field"+za++;while(L[O]);lb.setId(O);L[O]=!0}};this.toJsonObject=function(){E(!0);var z={};z.filters=r.toJsonObject(!0);var L=w.toJsonObject();L.chartType=w.getChartTypeName();z.chart=L;h.sharedToJsonObject(z);return z};this.fromJsonObject=function(z,L){var ia=z.filters;ia&&
f.getFilterSet().fromJsonObject(xa,ia,L,!0);ia=z.chart;var za=F(ia.chartType);za.fromJsonObject(ia,L);f.setChart(za);E(!1);h.sharedFromJsonObject(z)};var F=function(z){switch(z){case mb.ChartType_KPI:return new P;case mb.ChartType_Pie:return new fa;case mb.ChartType_Ring:return new wa;case mb.ChartType_Rose:return new ma;case mb.ChartType_Column:return new nb;case mb.ChartType_StackedColumn:return new wb;case mb.ChartType_PercentStackedColumn:return new va;case mb.ChartType_Bar:return new bb;case mb.ChartType_StackedBar:return new Jb;
case mb.ChartType_PercentStackedBar:return new Ya;case mb.ChartType_Line:return new Y;case mb.ChartType_Area:return new J;case mb.ChartType_PercentArea:return new N;case mb.ChartType_Map:return new X;case mb.ChartType_GIS:return new Q;case mb.ChartType_Radar:return new G;case mb.ChartType_ProgressBar:return new R;case mb.ChartType_ProgressColumn:return new S;case mb.ChartType_ProgressCircle:return new ca;case mb.ChartType_Dial:return new H;case mb.ChartType_Composite:return new I;case mb.ChartType_Grid:return new M;
case mb.ChartType_CustomList:return new K;case mb.ChartType_Waterfall:return new ha;case mb.ChartType_Funnel:return new Aa;case mb.ChartType_Scatter:return new Ta;case mb.ChartType_RectTree:return new db;case mb.ChartType_Sunburst:return new jb;default:throw Error("Modify here.");}}}function qb(){Lb.call(this);Oa.call(this);var f=this,h=this.protectedMethod;this.getSquareField=function(){return f};this.protectedCreateInstance=function(){return new qb};this.bindMetaEvent=function(){h.bindMetaEvent()};
this.setDiscreteColor=function(k){h.innerSetDiscreteColor(k)}}function sb(){var f=this,h=0,k=1,g=[],m=new xb;this.setItemCountMin=function(n){h=n};this.getItemCountMin=function(){return h};this.setItemCountMax=function(n){k=n};this.getItemCountMax=function(){return k};this.addChangedListener=function(n){m.addListener(n)};this.removeChangedListener=function(n){m.removeListener(n)};var r=function(n,t){m.fireEvent(function(B){B(n,t)})};this.getItemModelCount=function(){return g.length};this.getItemModel=
function(n){return g[n]};this.goodbyeItemModel=function(n){(n=g[n])&&n.clearListener();return n};this.getItemModelIndex=function(n){for(var t=0;t<g.length;t++)if(g[t]==n)return t;return-1};this.traversalItems=function(n){for(var t=!1,B=0;B<g.length&&!(t=n(g[B]));B++);return t};this.awake=function(n,t){t.removePropertyChangeListener(w);n&&t.addPropertyChangeListener(w)};this.addItemModel=function(n){g.push(n);n.addPropertyChangeListener(w);n.bindMetaEvent();r(new Mb(f,[n]),sb.KEY_ADD)};this.insertItemModel=
function(n,t){g.splice(t,0,n);n.addPropertyChangeListener(w);n.bindMetaEvent();r(new Mb(f,[n]),sb.KEY_ADD)};this.appendItemModels=function(n){for(var t=0;t<n.length;t++){var B=n[t];g.push(B);B.addPropertyChangeListener(w);B.bindMetaEvent()}r(new Mb(f,n),sb.KEY_ADD)};this.removeItemModels=function(n){for(var t=0;t<n.length;t++){var B=n[t];B.clearListener();B=f.getItemModelIndex(B);g.splice(B,1)}r(new Mb(f,n),sb.KEY_REMOVE)};this.removeItemModel=function(n){n.clearListener();var t=f.getItemModelIndex(n);
g.splice(t,1);r(new Mb(f,[n]),sb.KEY_REMOVE)};this.moveItemModel=function(n,t){if(t>n){--t;var B=n}else B=n+1;n=g.splice(n,1)[0];g.splice(t,0,n);r(new Mb(f,[n]),sb.KEY_MOVE);return[t,B]};var w=function(n,t){var B=new Mb(f);B.setSubEventTarget(n);r(B,t)};this.getInitialDateHierachyForField=function(n,t){if(n.getMetaField().getDataType()!=Bb.DT_DATE||n.getPartValue())return null;var B=[Oa.PARTVALUE_DATE_YEAR,Oa.PARTVALUE_DATE_QUARTER,Oa.PARTVALUE_DATE_MONTH,Oa.PARTVALUE_DATE_DAY];for(--t;0<=t;t--){var A=
g[t];if(A.getMetaField()==n.getMetaField()){A=A.getPartValue();for(var E=B.length-2;0<=E;E--)if(B[E]==A)return B[E+1]}}return Oa.PARTVALUE_DATE_YEAR};this.toJsonObject=function(n){for(var t=[],B=0;B<g.length;B++)t.push(g[B].toJsonObject());return n?t:{fields:t}};this.fromJsonObject=function(n,t,B,A){t=t?A?t:t.fields:[];g=[];for(A=0;A<t.length;A++){var E=t[A],F=new n;F.fromJsonObject(E,B);F.bindMetaEvent();F.addPropertyChangeListener(w);g.push(F)}}}function Vb(){sb.call(this);var f=this;this.copyFiltersForSetting=
function(){for(var h=[],k=0;k<f.getItemModelCount();k++){var g=f.getItemModel(k);g.isOutsideAllowed()&&(g=g.getUsableFilter().copyForSetting(),h.push(g))}return h};this.applyFiltersFromSetting=function(h){for(var k=0,g=0;g<f.getItemModelCount();g++){var m=f.getItemModel(g);if(m.isOutsideAllowed()){m=m.getUsableFilter();var r=h[k++];m.applyFromSetting(r)}}};this.toInsteadJson=function(h){for(var k=0,g=[],m=0;m<f.getItemModelCount();m++){var r=f.getItemModel(m);if(r.isOutsideAllowed()){var w=h[k++];
g.push(r.toInsteadJson(w))}else g.push(r.toJsonObject())}return g}}function Lb(){this.getMetaField=function(){throw Error("Override me.");};this.getSquareField=function(){throw Error("Override me.");};this.addPropertyChangeListener=function(f){throw Error("Override me.");};this.removePropertyChangeListener=function(f){throw Error("Override me.");};this.clearListener=function(){throw Error("Override me.");};this.toJsonObject=function(){throw Error("Override me.");};this.fromJsonObject=function(f,h){throw Error("Override me.");
};this.bindMetaEvent=function(){throw Error("Override me.");}}function xa(){Lb.call(this);var f=this,h=new xb,k,g,m=!1;this.getMetaField=function(){return k.getMetaField()};this.setSquareField=function(n){k=n};this.getSquareField=function(){return k};this.setFilter=function(n){g&&g.removeValueChangedListener(w);(g=n)&&g.addValueChangedListener(w)};this.getFilter=function(){return g};this.getUsableFilter=function(){g.setAssociatedField(k);return g};this.setOutsideAllowed=function(n){m=n};this.isOutsideAllowed=
function(){return m};this.addPropertyChangeListener=function(n){h.addListener(n)};this.removePropertyChangeListener=function(n){h.removeListener(n)};this.clearListener=function(){h.removeAllListener()};var r=function(n){var t=new ub(f);h.fireEvent(function(B){B(t,n)})},w=function(n){r(xa.KEY_FILTER_VALUE)};this.toInsteadJson=function(n){var t=f.toJsonObject();t.filter=n.toJsonObject();return t};this.toJsonObject=function(){var n={};n.field=k.toJsonObject();n.filter=g.toJsonObject();m&&(n.outsideAllowed=
!0);return n};this.fromJsonObject=function(n,t){var B=n.field,A=new qb;A.fromJsonObject(B,t);f.setSquareField(A);t=n.filter;switch(t.name){case Ra.FILTER_NAME:g=new Ra;break;case Ca.FILTER_NAME:g=new Ca;break;case Pa.FILTER_NAME:g=new Pa;break;default:throw Error("Unknown filter name.");}g.fromJsonObject(t);g.addValueChangedListener(w);m=n.outsideAllowed?!0:!1};this.bindMetaEvent=function(){}}function eb(){var f,h,k=!1;this.addOneLevel=function(g,m){f&&h||(f=[],h=[]);f.push(g);h.push(m)};this.setValueCount=
function(g){0<=g&&g<f.length&&(f.length=g,h.length=g)};this.getValueCount=function(){return f?f.length:0};this.getValueByIndex=function(g){return f[g]};this.getTextByIndex=function(g){return h[g]};this.isPcdNextLevel=function(){return k};this.setPcdNextLevel=function(g){k=g};this.toJsonObject=function(){var g={};g.values=f;g.texts=h;g.pcdNextLevel=k;return g};this.fromJsonObject=function(g){f=g.values;h=g.texts;k=g.pcdNextLevel?!0:!1}}function Ma(){var f=this,h=[],k=0,g=!1,m=new xb;this.addStateChangedListener=
function(w){m.addListener(w)};this.removeStateChangedListener=function(w){m.removeListener(w)};var r=function(){m.fireEvent(function(w){w(f)})};this.updateItemCountLimited=function(w){g=!1;for(var n=0,t=0,B=w.getItemModelCount();t<B;t++){if(w.getItemModel(t).isInvalid()){g=!0;break}n++}k=n};this.getCurrentRollInFieldCount=function(){var w=h.length;0<w&&h[w-1].isPcdNextLevel()&&w--;return w};this.isRollInNextFieldEnabled=function(){return f.getCurrentRollInFieldCount()<k};this.isRollOutEnabled=function(){return 0<
h.length&&!g};this.getItemCount=function(){return h.length};this.getItem=function(w){return h[w]};this.updateItems=function(w){var n=h;h=w;return n};this.backupItems=function(){for(var w=[],n=0;n<h.length;n++){for(var t=new eb,B=h[n],A=0;A<B.getValueCount();A++)t.addOneLevel(B.getValueByIndex(A),B.getTextByIndex(A)),t.setPcdNextLevel(B.isPcdNextLevel());w.push(t)}return w};this.restoreItems=function(w){h=w;r()};this.rollIn=function(w){for(var n=0;n<w.length;n++){var t=w[n];t.isPcdNextLevel()?h.push(t):
f.isRollInNextFieldEnabled()&&h.push(t)}r()};this.rollOut=function(w,n){if(0<n){var t=h[w];t.setValueCount(n);t.setPcdNextLevel(!0);h.length=w+1}else h.length=w;r()}}function Ja(){var f=320,h=190,k=20,g=20,m=40,r=20;this.isFullArea=function(){return 0>=f||0>=h};this.getWidth=function(){return f};this.getHeight=function(){return h};this.getPaddingLeft=function(){return k};this.getPaddingRight=function(){return g};this.getPaddingTop=function(){return m};this.getPaddingBottom=function(){return r};this.toJsonObject=
function(){var w={};w.width=f;w.height=h;w.paddingLeft=k;w.paddingRight=g;w.paddingTop=m;w.paddingBottom=r;return w};this.fromJsonObject=function(w){f=w.width;h=w.height;k=w.paddingLeft;g=w.paddingRight;m=w.paddingTop;r=w.paddingBottom}}function oa(){var f=this,h=new xb,k,g=!1,m=!1,r,w=oa.ShowLegend_Right,n=oa.ShowDataEmptyTips_Auto,t,B,A=!1,E,F,z=!0;this.addChangedListener=function(ia){h.addListener(ia)};this.removeChangedListener=function(ia){h.removeListener(ia)};var L=function(ia,za){h.fireEvent(function(Za){Za(ia,
za)})};this.lookupAllMetaFieldBinding=function(ia){};this.setTitle=function(ia){k=ia;L(oa.KEY_TITLE,k)};this.getTitle=function(){return k};this.setShowLabel=function(ia){g=ia;L(oa.KEY_SHOW_LABEL,g)};this.isShowLabel=function(){return g};this.setDataLabelOverlappable=function(ia){m=ia;L(oa.KEY_LABEL_OVERLAPPABLE,m)};this.isDataLabelOverlappable=function(){return m};this.setLabelFormat=function(ia){r=ia;L(oa.KEY_LABEL_FORMAT,r)};this.getLabelFormat=function(){return r};this.setShowLegend=function(ia){w=
ia;L(oa.KEY_SHOW_LEGEND,w)};this.getShowLegend=function(){return w};this.setShowDataEmptyTips=function(ia){n=ia;L(oa.KEY_SHOW_DATA_EMPTY_TIPS,n)};this.getShowDataEmptyTips=function(){return n};this.setDescription=function(ia){t=ia;L(oa.KEY_DESCRIPTION,t)};this.getDescription=function(){return t};this.setLinkTargets=function(ia){B=ia;L(oa.KEY_LINKAGE,B)};this.getLinkTargets=function(){return B};this.setDataDetailExamining=function(ia){A=ia;L(oa.KEY_DATA_DETAIL,A)};this.isDataDetailExamining=function(){return A};
this.setStyleScripts=function(ia){E=ia;L(oa.KEY_STYLE_SCRIPTS,E)};this.getStyleScripts=function(){return E};this.setPalette=function(ia){F=ia;L(oa.KEY_PALETTE,F)};this.getPalette=function(){return F};this.setAnimation=function(ia){z=ia;L(oa.KEY_ANIMATION,z)};this.isAnimation=function(){return z};this.moveOut=function(ia){ia.title=k;ia.labelOverlappable=m;ia.labelFormat=r;ia.showDataEmptyTips=n;ia.description=t;ia.linkTargets=B;ia.dataDetailExamining=A;ia.palette=F;ia.animation=z;var za=f.protectedCustomMovingKey();
ia[za[0]?za[0]:"showLabel"]=g;ia[za[1]?za[1]:"showLegend"]=w;f.protectedMoveOut(ia)};this.moveIn=function(ia){k=ia.title;m=ia.labelOverlappable;r=ia.labelFormat;n=ia.showDataEmptyTips;t=ia.description;z=ia.animation;A=ia.dataDetailExamining;var za=ia.linkTargets;za&&(B=za);(za=ia.palette)&&(F=za);za=f.protectedCustomMovingKey();var Za=ia[za[0]?za[0]:"showLabel"];void 0!==Za&&(g=Za);za=ia[za[1]?za[1]:"showLegend"];void 0!==za&&(w=za);f.protectedMoveIn(ia)};this.protectedCustomMovingKey=function(){return["showLabel",
"showLegend"]};this.protectedMoveOut=function(ia){throw Error("Override me");};this.protectedMoveIn=function(ia){throw Error("Override me");};this.toJsonObject=function(ia){var za={};za.type=f.protectedGetTypeForJson();za.title=k;g&&(za.showLabel=!0);m&&(za.labelOverlappable=!0);z&&(za.animation=!0);A&&(za.dataDetailExamining=!0);za.labelFormat=r;za.showLegend=w;za.showDataEmptyTips=n;za.description=t;za.styleScripts=E;F&&(za.palette=F.toJsonObject());B&&ia.isLinkageSupported()&&(za.linkTargets=B.toJsonObject());
f.protectedToJsonObject(za,ia);return za};this.fromJsonObject=function(ia,za){k=ia.title;g=ia.showLabel?!0:!1;m=ia.labelOverlappable?!0:!1;z=ia.animation?!0:!1;A=ia.dataDetailExamining?!0:!1;r=ia.labelFormat;w=ia.showLegend;n=ia.showDataEmptyTips;t=ia.description;E=ia.styleScripts;F=null;var Za=ia.palette;Za&&(F=new pb,F.fromJsonObject(Za));B=null;(Za=ia.linkTargets)&&za.isLinkageSupported()&&(B=new zb,B.fromJsonObject(Za));f.protectedFromJsonObject(ia,za)};this.protectedGetTypeForJson=function(){throw Error("Override me");
};this.protectedToJsonObject=function(ia,za){throw Error("Override me");};this.protectedFromJsonObject=function(ia,za){throw Error("Override me");};this.toRenderAttr=function(ia){ia.setShowDataLabel(g);ia.setDataLabelOverlappable(m);ia.setDataLabelFormat(r);ia.setAnimation(z);switch(w){case oa.ShowLegend_Right:var za=ec.ShowLegend_Right;break;case oa.ShowLegend_Bottom:za=ec.ShowLegend_Bottom;break;default:za=ec.ShowLegend_Non}ia.setShowLegend(za);f.protectedToRenderAttr(ia)};this.protectedToRenderAttr=
function(ia){throw Error("Override me");};this.protectedMethod={fireChangedEvent:L,toRenderAttrForRulerScale:function(ia){switch(ia){case oa.RulerScale_Linear:ia=ec.RulerScale_Linear;break;case oa.RulerScale_Log:ia=ec.RulerScale_Log;break;default:ia=ec.RulerScale_Auto}return ia},toRenderAttrForRulerStart:function(ia){return ia==oa.RulerStart_Nonzero?ec.RulerStart_Nonzero:ec.RulerStart_Zero}}}function ka(){var f=this.protectedMethod,h,k=null;this.setLegendFormat=function(g){h=g;f.fireChangedEvent(oa.KEY_LEGEND_FORMAT,
h)};this.getLegendFormat=function(){return h};this.setContinuousColor=function(g){k=g;f.fireChangedEvent(oa.KEY_CONTINUOUS_COLOR,k)};this.getContinuousColor=function(){return k};f.moveInWithMixColorMode=function(g){var m=g.legendFormat;m&&(h=m);k=g.continuousColor};f.moveOutWithMixColorMode=function(g){g.legendFormat=h;g.continuousColor=k};f.toJsonObjectWithMixColorMode=function(g,m){h&&(g.legendFormat=h);k&&(g.continuousColor=k.toJsonObject())};f.fromJsonObjectWithMixColorMode=function(g,m){h=g.legendFormat;
k=null;if(g=g.continuousColor)k=new Cb,k.fromJsonObject(g)}}function Ha(){var f=this.protectedMethod,h=null;this.setTooltipsAutoDisplay=function(k){h=k;f.fireChangedEvent(oa.KEY_TOOLTIPS_AUTO_DISPLAY,h)};this.getTooltipsAutoDisplay=function(){return h};f.moveOutWithTooltipsAutoDisplay=function(k){k.tooltipsAutoDisplay=h};f.moveInWithTooltipsAutoDisplay=function(k){h=k.tooltipsAutoDisplay};f.toJsonObjectWithTooltipsAutoDisplay=function(k){h&&(k.tooltipsAutoDisplay=h.toJsonObject())};f.fromJsonObjectWithTooltipsAutoDisplay=
function(k){h=null;if(k=k.tooltipsAutoDisplay)h=new Sa,h.fromJsonObject(k)};f.toRenderAttrWithTooltipsAutoDisplay=function(k){k.setTooltipsSelfDrivingDuration(h?h.getDuration():-1)}}function Sa(){var f=2;this.setDuration=function(h){f=h};this.getDuration=function(){return f};this.toJsonObject=function(){var h={};h.duration=f;return h};this.fromJsonObject=function(h){f=h.duration}}function da(){var f,h=!1,k=!1,g=null,m=!1,r=-1,w=!1;this.setChangedListener=function(n){f=n};this.setOrder=function(n,
t){h=n;k=t;f()};this.isOrderByMeasure=function(){return h};this.isAsc=function(){return k};this.setSortAccording=function(n){g=n;f()};this.getSortAccording=function(){return g};this.setTopnSwitch=function(n){(m=n)&&-1==r&&(r=8);f()};this.isTopnSwitch=function(){return m};this.setTopnItems=function(n){r=n;m=0>=r?!1:!0;f()};this.getTopnItems=function(){return r};this.setOthersAsAnItem=function(n){w=n;f()};this.isOthersAsAnItem=function(){return w};this.toJsonObject=function(){var n={};n.order=h?k?"ASC":
"DESC":"NUL";n.according=g?g.toJsonObject():null;n.topN=m?r:-1;n.others=w;return n};this.fromJsonObject=function(n){var t=n.order;h="ASC"==t||"DESC"==t?!0:!1;k="ASC"==t?!0:!1;g=null;if(t=n.according)g=new qa,g.fromJsonObject(t);r=(t=n.topN)?t:-1;m=0>=r?!1:!0;w=n.others?!0:!1}}function qa(){var f=this,h,k,g;this.setupMeasureIndexMode=function(m){h=m;g=k=null};this.setupAnyFieldMode=function(m,r){h=-1;k=m;g=r};this.isMeasureIndexMode=function(){return"number"==typeof h&&0<=h};this.isAnyFieldMode=function(){return k&&
g};this.getMeasureIndex=function(){return h};this.getMetaFieldFullName=function(){return k};this.getAggregation=function(){return g};this.toJsonObject=function(){var m={};f.isMeasureIndexMode()&&(m.measure=h);f.isAnyFieldMode()&&(m.metaField=k,m.aggregation=g);return m};this.fromJsonObject=function(m){var r=m.measure;h=r||0===r?r:-1;k=m.metaField;g=m.aggregation}}function Ga(){function f(){var n,t,B,A;this.isLoading=function(){return n?!1:!0};this.parseJson=function(E){n=E?E.content:"";t=(E=E?E.backImage:
null)?E.url:null;B=E?E.pageWidth:0;A=E?E.pageHeight:0};this.getContent=function(){return n};this.getBackImageUrl=function(){return t};this.getPageWidth=function(){return B};this.getPageHeight=function(){return A}}oa.call(this);Ha.call(this);ka.call(this);var h=this,k=this.protectedMethod,g,m,r=null,w;this.setOutsideReference=function(n){r=null;g=n;k.fireChangedEvent(Ga.KEY_TEMPLATE_REF,g)};this.getOutsideReference=function(){return g};this.setDimensionToRegion=function(n){!m&&(m=new ra);m.setDimensionToRegion(n);
k.fireChangedEvent(Ga.KEY_REGION_MAPPING,m)};this.getDimensionToRegion=function(){!m&&(m=new ra);return m.getDimensionToRegion()};this.rtTemplateLoaded=function(n){r=new f;r.parseJson(n);n&&(w(),w=null)};this.askRtTemplateNeedReload=function(n){var t=r?!1:!0;t&&(w=n);return t};this.askRtTemplateLoading=function(n){var t=r&&r.isLoading();t&&(w=n);return t};this.protectedMoveOut=function(n){n.mapOutsideReference=g;n.mapRegionMapping=m;n.mapRtTemplate=r;k.moveOutWithTooltipsAutoDisplay(n);k.moveOutWithMixColorMode(n)};
this.protectedMoveIn=function(n){var t=n.mapOutsideReference;t&&(g=t);(t=n.mapRegionMapping)&&(m=t);(t=n.mapRtTemplate)&&(r=t);k.moveInWithTooltipsAutoDisplay(n);k.moveInWithMixColorMode(n)};this.protectedGetTypeForJson=function(){return"Map"};this.protectedToJsonObject=function(n,t){g&&(n.reference=g.toJsonObject());if(m){var B={};m.toJsonObject(B);n.regionMapping=B}k.toJsonObjectWithTooltipsAutoDisplay(n);k.toJsonObjectWithMixColorMode(n,t)};this.protectedFromJsonObject=function(n,t){g=null;var B=
n.reference;B&&(g=new Rb,g.fromJsonObject(B));m=null;if(B=n.regionMapping)m=new ra,m.fromJsonObject(B);r=null;k.fromJsonObjectWithTooltipsAutoDisplay(n);k.fromJsonObjectWithMixColorMode(n,t)};this.protectedToRenderAttr=function(n){h.rtTemplateToRenderAttr(n);n.setRegionMapping(m);k.toRenderAttrWithTooltipsAutoDisplay(n)};this.rtTemplateToRenderAttr=function(n){n.setTemplateContent(r?r.getContent():"");n.setBackImageUrl(r?r.getBackImageUrl():null);n.setPageSize(r?r.getPageWidth():0,r?r.getPageHeight():
0)}}function ra(){var f,h;this.setDimensionToRegion=function(k){f=k};this.getDimensionToRegion=function(){return f};this.toJsonObject=function(k){f&&(k.mapping=f);if(h){var g={},m;for(m in h){var r={};h[m].toJsonObject(r);g[m]=r}k.subLevels=g}};this.fromJsonObject=function(k){f=k.mapping;k=k.subLevels;for(var g in k){var m=k[g],r=new ra;r.fromJsonObject(m);!h&&(h={});h[g]=r}}}function cb(){oa.call(this);var f=this.protectedMethod,h=cb.USAGE_MARKER,k,g=108.9535,m=34.2657,r=4,w;this.setUsage=function(n){h=
n;f.fireChangedEvent(cb.KEY_USAGE,h)};this.getUsage=function(){return h};this.setThird=function(n){k=n;f.fireChangedEvent(cb.KEY_THIRD,k)};this.getThird=function(){return k};this.setCustomScript=function(n){w=n;f.fireChangedEvent(cb.KEY_SCRIPT,w)};this.getCustomScript=function(){return w};this.setInitialContext=function(n,t,B){g=n;m=t;r=B};this.getInitialLongitude=function(){return g};this.getInitialLatitude=function(){return m};this.getInitialZoom=function(){return r};this.protectedMoveOut=function(n){n.gisUsage=
h;n.gisThird=k;n.gisCustomScript=w;n.gisInitialContext=[g,m,r]};this.protectedMoveIn=function(n){var t=n.gisUsage;t&&(h=t);(t=n.gisThird)&&(k=t);(t=n.gisCustomScript)&&(w=t);if(n=n.gisInitialContext)g=n[0],m=n[1],r=n[2]};this.protectedGetTypeForJson=function(){return"GIS"};this.protectedToJsonObject=function(n){n.usage=h;n.third=k;n.longitude=1E-6*parseInt(1E6*g+.5);n.latitude=1E-6*parseInt(1E6*m+.5);n.zoom=r;n.customScript=w};this.protectedFromJsonObject=function(n){h=n.usage;k=n.third;g=parseFloat(n.longitude);
m=parseFloat(n.latitude);r=n.zoom;w=n.customScript};this.protectedToRenderAttr=function(n){n.setPropertyDirty(!0);n.setLongitude(g);n.setLatitude(m);n.setZoom(r);n.setUsage(h);n.setCustomScript(w)}}function Qa(){oa.call(this);var f=this,h=this.protectedMethod,k,g,m,r=0,w;this.setCaption=function(n){k=n;h.fireChangedEvent(Qa.KEY_CAPTION,k)};this.getCaption=function(){return k};this.setPrimaryString=function(n){g=n;h.fireChangedEvent(Qa.KEY_P_DISPLAY,g)};this.getPrimaryString=function(){return g};this.setSecondaryString=
function(n){m=n;h.fireChangedEvent(Qa.KEY_S_DISPLAY,m)};this.getSecondaryString=function(){return m};this.setDataEmptyInstead=function(n){r=n;h.fireChangedEvent(Qa.KEY_P_DATA_EMPTY_INSTEAD,r)};this.getDataEmptyInstead=function(){return r};this.setCustomStyles=function(n){w=n;h.fireChangedEvent(Qa.KEY_P_CUSTOM_STYLES,w)};this.getCustomStyles=function(){return w};this.getPrimaryPostfix=function(){if(g){var n=g.indexOf("${0}$");return 0>n?g:g.substring(n+5)}return""};this.setPrimaryPostfix=function(n){f.setPrimaryString("${0}$"+
(n?n:""))};this.getSecondaryPrefix=function(){if(m){var n=m.indexOf("${0}$");return 0>n?"":m.substring(0,n)}return""};this.setSecondaryPrefix=function(n){f.setSecondaryString((n?n:"")+"${0}$"+f.getSecondaryPostfix())};this.getSecondaryPostfix=function(){if(m){var n=m.indexOf("${0}$");return 0>n?m:m.substring(n+5)}return""};this.setSecondaryPostfix=function(n){f.setSecondaryString(f.getSecondaryPrefix()+"${0}$"+(n?n:""))};this.protectedMoveOut=function(n){n.caption=k;n.primaryString=g;n.secondaryString=
m;n.dataEmptyInstead=r;n.kpiCustomStyles=w;n.kpiStyleScripts=f.getStyleScripts()};this.protectedMoveIn=function(n){var t=n.caption;t&&(k=t);(t=n.primaryString)&&(g=t);(t=n.secondaryString)&&(m=t);t=n.dataEmptyInstead;void 0!==t&&(r=t);(t=n.kpiCustomStyles)&&(w=t);n.kpiStyleScripts&&f.setStyleScripts(n.kpiStyleScripts)};this.protectedGetTypeForJson=function(){return"KPI"};this.protectedToJsonObject=function(n){k&&(n.caption=k);g&&(n.primaryString=g);m&&(n.secondaryString=m);w&&(n.customStyles=w.toJsonObject());
n.primaryInstead=r};this.protectedFromJsonObject=function(n){k=n.caption;g=n.primaryString;m=n.secondaryString;var t=parseFloat(n.primaryInstead);!isNaN(t)&&(r=t);w=null;if(n=n.customStyles)w=new hb,w.fromJsonObject(n)};this.protectedToRenderAttr=function(n){}}function hb(){var f=this,h=new vb,k=new vb,g=new vb,m=new vb,r=new vb;this.getCaptionStyleItem=function(){return h};this.getPrimaryValueStyleItem=function(){return k};this.getPrimaryTextStyleItem=function(){return g};this.getSecondaryValueStyleItem=
function(){return m};this.getSecondaryTextStyleItem=function(){return r};this.copy=function(){var B=new hb;B.fromJsonObject(f.toJsonObject());return B};this.isColorEmpty=function(){return w("getColor")};this.separateColor=function(){return n("setColor","getColor")};this.mergeColorFrom=function(B){t(B,"setColor","getColor")};this.isFontEmpty=function(){return w("getFontSize")};this.separateFont=function(){return n("setFontSize","getFontSize")};this.mergeFontFrom=function(B){t(B,"setFontSize","getFontSize")};
this.isAlignEmpty=function(){return w("getAlign")};this.separateAlign=function(){return n("setAlign","getAlign")};this.mergeAlignFrom=function(B){t(B,"setAlign","getAlign")};var w=function(B){return h[B]()||k[B]()||g[B]()||m[B]()||r[B]()?!1:!0},n=function(B,A){if(w(A))return null;var E=new hb;E.getCaptionStyleItem()[B](h[A]());E.getPrimaryValueStyleItem()[B](k[A]());E.getPrimaryTextStyleItem()[B](g[A]());E.getSecondaryValueStyleItem()[B](m[A]());E.getSecondaryTextStyleItem()[B](r[A]());return E},
t=function(B,A,E){h[A](B?B.getCaptionStyleItem()[E]():null);k[A](B?B.getPrimaryValueStyleItem()[E]():null);g[A](B?B.getPrimaryTextStyleItem()[E]():null);m[A](B?B.getSecondaryValueStyleItem()[E]():null);r[A](B?B.getSecondaryTextStyleItem()[E]():null)};this.toJsonObject=function(){var B={};B.c=h.toJsonObject();B.pv=k.toJsonObject();B.pt=g.toJsonObject();B.sv=m.toJsonObject();B.st=r.toJsonObject();return B};this.fromJsonObject=function(B){h.fromJsonObject(B.c);k.fromJsonObject(B.pv);g.fromJsonObject(B.pt);
m.fromJsonObject(B.sv);r.fromJsonObject(B.st)}}function Fb(){oa.call(this);var f=this.protectedMethod,h=this,k=!0,g,m=!1,r,w=oa.RulerScale_Linear,n,t,B=oa.RulerStart_Zero,A,E;this.lookupAllMetaFieldBinding=function(F){if(k&&E&&E.getSortAccording()){var z=E.getSortAccording().getMetaFieldFullName();z&&F(z)}};this.setSortSupported=function(F){k=F};this.setXUnitText=function(F){g=F;f.fireChangedEvent(pa.KEY_X_UNIT_TEXT,g)};this.getXUnitText=function(){return g};this.setXShowAssistantLine=function(F){m=
F;f.fireChangedEvent(pa.KEY_X_ASSISTANT_LINE,m)};this.isXShowAssistantLine=function(){return m};this.setYUnitText=function(F){r=F;f.fireChangedEvent(pa.KEY_Y_UNIT_TEXT,r)};this.getYUnitText=function(){return r};this.setYRulerScale=function(F){w=F;f.fireChangedEvent(pa.KEY_Y_RULER_SCALE,w)};this.getYRulerScale=function(){return w};this.setYRulerScope=function(F){n=F[0];t=F[1];B=F[2];f.fireChangedEvent(pa.KEY_Y_RULER_START,B)};this.getYRulerScope=function(){return[n,t,B]};this.setReflines=function(F){A=
F;f.fireChangedEvent(pa.KEY_REFLINES,A)};this.getReflines=function(){return A};this.getSort=function(){E||(E=new da,E.setChangedListener(function(){f.fireChangedEvent(pa.KEY_SORT,E)}));return E};this.protectedMoveOut=function(F){F.cAxisUnitText=g;F.cAxisAssistantLine=m;F.pAxisUnitText=r;F.pAxisRulerScale=w;F.pAxisRulerMin=n;F.pAxisRulerMax=t;F.pAxisRulerStart=B;F.pAxisReflines=A;k&&E&&(F.sort=E.toJsonObject());F.styleScripts=h.getStyleScripts()};this.protectedMoveIn=function(F){var z=F.cAxisUnitText;
z&&(g=z);z=F.cAxisAssistantLine;void 0!==z&&(m=z);(z=F.pAxisUnitText)&&(r=z);(z=F.pAxisRulerScale)&&(w=z);(z=F.pAxisRulerMin)&&(n=z);(z=F.pAxisRulerMax)&&(t=z);(z=F.pAxisRulerStart)&&(B=z);(z=F.pAxisReflines)&&(A=z);z=F.sort;k&&z&&h.getSort().fromJsonObject(z);(F=F.styleScripts)&&h.setStyleScripts(F)};this.protectedGetTypeForJson=function(){return"XSYN"};this.protectedToJsonObject=function(F){g&&(F.xUnitText=g);m&&(F.xShowAssistantLine=m);r&&(F.yUnitText=r);w&&(F.yRulerScale=w);n&&(F.yRulerMin=n);
t&&(F.yRulerMax=t);B&&(F.yRulerStart=B);if(A){for(var z=[],L=0;L<A.length;L++)z.push(A[L].toJsonObject());F.reflines=z}k&&E&&(F.sort=E.toJsonObject())};this.protectedFromJsonObject=function(F){g=F.xUnitText;m=F.xShowAssistantLine?!0:!1;r=F.yUnitText;w=(w=F.yRulerScale)?w:oa.RulerScale_Linear;n=F.yRulerMin;t=F.yRulerMax;B=(B=F.yRulerStart)?B:oa.RulerStart_Zero;var z=F.reflines;if(z){A=[];for(var L=0;L<z.length;L++){var ia=z[L],za=new gb;za.fromJsonObject(ia);A.push(za)}}F=F.sort;k&&F&&h.getSort().fromJsonObject(F)};
this.protectedToRenderAttr=function(F){F.setXUnitText(g);F.setXShowAssistantLine(m);F.setYUnitText(r);F.setYRulerScale(f.toRenderAttrForRulerScale(w));F.setYRulerMin(n?parseFloat(n):null);F.setYRulerMax(t?parseFloat(t):null);F.setYRulerStart(f.toRenderAttrForRulerStart(B))}}function pa(){Fb.call(this);var f=this.protectedMethod,h="#,##0";this.setYFormat=function(n){h=n;f.fireChangedEvent(pa.KEY_Y_FORMAT,h)};this.getYFormat=function(){return h};var k=this.protectedMoveOut;this.protectedMoveOut=function(n){k(n);
n.pAxisFormat=h};var g=this.protectedMoveIn;this.protectedMoveIn=function(n){g(n);n=n.pAxisFormat;void 0!==n&&(h=n)};var m=this.protectedToJsonObject;this.protectedToJsonObject=function(n){m(n);h&&(n.yFormat=h)};var r=this.protectedFromJsonObject;this.protectedFromJsonObject=function(n){r(n);h=n.yFormat};var w=this.protectedToRenderAttr;this.protectedToRenderAttr=function(n){w(n);n.setYFormat(h)}}function Ab(){Fb.call(this);var f=this.protectedMethod,h="{-2}0.00%";this.setYFormat=function(n){h=n;
f.fireChangedEvent(pa.KEY_Y_FORMAT,h)};this.getYFormat=function(){return h};var k=this.protectedMoveOut;this.protectedMoveOut=function(n){k(n);n.pAxisFormatForPercent=h};var g=this.protectedMoveIn;this.protectedMoveIn=function(n){g(n);n=n.pAxisFormatForPercent;void 0!==n&&(h=n)};var m=this.protectedToJsonObject;this.protectedToJsonObject=function(n){m(n);h&&(n.yFormat=h)};var r=this.protectedFromJsonObject;this.protectedFromJsonObject=function(n){r(n);h=n.yFormat};var w=this.protectedToRenderAttr;
this.protectedToRenderAttr=function(n){w(n);n.setYFormat(h)}}function Z(){var f=this.protectedMethod,h=!1,k=!1,g=Z.CONNECT_NULL_AS_DIRECT;this.setSmooth=function(m){h=m;f.fireChangedEvent(Z.KEY_SMOOTH,h)};this.isSmooth=function(){return h};this.setPaintingPoint=function(m){k=m;f.fireChangedEvent(Z.KEY_PAINT_POINT,k)};this.isPaintingPoint=function(){return k};this.setZeroInsteadNull=function(m){g=m?Z.CONNECT_NULL_AS_ZERO:Z.CONNECT_NULL_AS_DIRECTION;f.fireChangedEvent(Z.KEY_CONNECT_NULL_AS,m)};this.isZeroInsteadNull=
function(){return g==Z.CONNECT_NULL_AS_ZERO};f.lineMoveOut=function(m){m.lineChart=[h,k,g]};f.lineMoveIn=function(m){if(m=m.lineChart)h=m[0],k=m[1],g=m[2]};f.lineToJsonObject=function(m){m.smooth=h;m.paintPoint=k;m.connectNullAs=g==Z.CONNECT_NULL_AS_ZERO?"ZERO":null};f.lineFromJsonObject=function(m){h=m.smooth;k=m.paintPoint;g="ZERO"==m.connectNullAs?Z.CONNECT_NULL_AS_ZERO:Z.CONNECT_NULL_AS_DIRECTION};f.lineToRenderAttr=function(m){m.setSmooth(h);m.setPaintingPoint(k);m.setZeroInsteadNull(g==Z.CONNECT_NULL_AS_ZERO)}}
function Wa(){pa.call(this);Z.call(this);var f=this.protectedMethod,h=!1;this.setTooltipsSorted=function(n){h=n;f.fireChangedEvent(Wa.KEY_TOOLTIPS_SORTED,h)};this.isTooltipsSorted=function(){return h};var k=this.protectedMoveOut;this.protectedMoveOut=function(n){k(n);f.lineMoveOut(n);n.tooltipsSorted=h};var g=this.protectedMoveIn;this.protectedMoveIn=function(n){g(n);f.lineMoveIn(n);n=n.tooltipsSorted;void 0!==n&&(h=n)};this.protectedGetTypeForJson=function(){return"Line"};var m=this.protectedToJsonObject;
this.protectedToJsonObject=function(n){m(n);f.lineToJsonObject(n);n.tooltipsSorted=h};var r=this.protectedFromJsonObject;this.protectedFromJsonObject=function(n){r(n);f.lineFromJsonObject(n);h=n.tooltipsSorted};var w=this.protectedToRenderAttr;this.protectedToRenderAttr=function(n){w(n);f.lineToRenderAttr(n);n.setTooltipsSorted(h)}}function fb(){oa.call(this);var f=this.protectedMethod,h=this,k=!0,g,m,r=oa.RulerScale_Linear,w,n,t=oa.RulerStart_Zero,B,A;this.lookupAllMetaFieldBinding=function(E){if(k&&
A&&A.getSortAccording()){var F=A.getSortAccording().getMetaFieldFullName();F&&E(F)}};this.setSortSupported=function(E){k=E};this.setYUnitText=function(E){g=E;f.fireChangedEvent(Va.KEY_Y_UNIT_TEXT,g)};this.getYUnitText=function(){return g};this.setXUnitText=function(E){m=E;f.fireChangedEvent(Va.KEY_X_UNIT_TEXT,m)};this.getXUnitText=function(){return m};this.setXRulerScale=function(E){r=E;f.fireChangedEvent(Va.KEY_X_RULER_SCALE,r)};this.getXRulerScale=function(){return r};this.setXRulerScope=function(E){w=
E[0];n=E[1];t=E[2];f.fireChangedEvent(Va.KEY_X_RULER_START,t)};this.getXRulerScope=function(){return[w,n,t]};this.setReflines=function(E){B=E;f.fireChangedEvent(Va.KEY_REFLINES,B)};this.getReflines=function(){return B};this.getSort=function(){A||(A=new da,A.setChangedListener(function(){f.fireChangedEvent(Va.KEY_SORT,A)}));return A};this.protectedMoveOut=function(E){E.cAxisUnitText=g;E.pAxisUnitText=m;E.pAxisRulerScale=r;E.pAxisRulerMin=w;E.pAxisRulerMax=n;E.pAxisRulerStart=t;E.pAxisReflines=B;k&&
A&&(E.sort=A.toJsonObject());E.styleScripts=h.getStyleScripts()};this.protectedMoveIn=function(E){var F=E.cAxisUnitText;F&&(g=F);(F=E.pAxisUnitText)&&(m=F);(F=E.pAxisRulerScale)&&(r=F);(F=E.pAxisRulerMin)&&(w=F);(F=E.pAxisRulerMax)&&(n=F);(F=E.pAxisRulerStart)&&(t=F);(F=E.pAxisReflines)&&(B=F);F=E.sort;k&&F&&h.getSort().fromJsonObject(F);(E=E.styleScripts)&&h.setStyleScripts(E)};this.protectedGetTypeForJson=function(){return"YSXN"};this.protectedToJsonObject=function(E){g&&(E.yUnitText=g);m&&(E.xUnitText=
m);r&&(E.xRulerScale=r);w&&(E.xRulerMin=w);n&&(E.xRulerMax=n);t&&(E.xRulerStart=t);if(B){for(var F=[],z=0;z<B.length;z++)F.push(B[z].toJsonObject());E.reflines=F}k&&A&&(E.sort=A.toJsonObject())};this.protectedFromJsonObject=function(E){g=E.yUnitText;m=E.xUnitText;r=(r=E.xRulerScale)?r:oa.RulerScale_Linear;w=E.xRulerMin;n=E.xRulerMax;t=(t=E.xRulerStart)?t:oa.RulerStart_Zero;var F=E.reflines;if(F){B=[];for(var z=0;z<F.length;z++){var L=F[z],ia=new gb;ia.fromJsonObject(L);B.push(ia)}}E=E.sort;k&&E&&
h.getSort().fromJsonObject(E)};this.protectedToRenderAttr=function(E){E.setYUnitText(g);E.setXUnitText(m);E.setXRulerScale(f.toRenderAttrForRulerScale(r));E.setXRulerMin(w?parseFloat(w):null);E.setXRulerMax(n?parseFloat(n):null);E.setXRulerStart(f.toRenderAttrForRulerStart(t))}}function Va(){fb.call(this);var f=this.protectedMethod,h="#,##0";this.setXFormat=function(n){h=n;f.fireChangedEvent(Va.KEY_X_FORMAT,h)};this.getXFormat=function(){return h};var k=this.protectedMoveOut;this.protectedMoveOut=
function(n){k(n);n.pAxisFormat=h};var g=this.protectedMoveIn;this.protectedMoveIn=function(n){g(n);n=n.pAxisFormat;void 0!==n&&(h=n)};var m=this.protectedToJsonObject;this.protectedToJsonObject=function(n){m(n);h&&(n.xFormat=h)};var r=this.protectedFromJsonObject;this.protectedFromJsonObject=function(n){r(n);h=n.xFormat};var w=this.protectedToRenderAttr;this.protectedToRenderAttr=function(n){w(n);n.setXFormat(h)}}function Ka(){fb.call(this);var f=this.protectedMethod,h="{-2}0.00%";this.setXFormat=
function(n){h=n;f.fireChangedEvent(Va.KEY_X_FORMAT,h)};this.getXFormat=function(){return h};var k=this.protectedMoveOut;this.protectedMoveOut=function(n){k(n);n.pAxisFormatForPercent=h};var g=this.protectedMoveIn;this.protectedMoveIn=function(n){g(n);n=n.pAxisFormatForPercent;void 0!==n&&(h=n)};var m=this.protectedToJsonObject;this.protectedToJsonObject=function(n){m(n);h&&(n.xFormat=h)};var r=this.protectedFromJsonObject;this.protectedFromJsonObject=function(n){r(n);h=n.xFormat};var w=this.protectedToRenderAttr;
this.protectedToRenderAttr=function(n){w(n);n.setXFormat(h)}}function ab(){oa.call(this);var f=this.protectedMethod,h=-1,k=ab.SHOW_LABEL_PERCENT,g=!1,m=ab.LegendOrderMode_AUTO;this.setTopN=function(r){h=r;f.fireChangedEvent(ab.KEY_TOPN,h)};this.getTopN=function(){return h};this.setLabelType=function(r){k=r;f.fireChangedEvent(ab.KEY_LABEL_TYPE,k)};this.getLabelType=function(){return k};this.setIgnoreNegative=function(r){g=r;f.fireChangedEvent(oa.KEY_NEGATIVE,g)};this.isIgnoreNegative=function(){return g};
this.setLegendOrderMode=function(r){m=r;f.fireChangedEvent(ab.KEY_LEGEND_ORDER_MODE,m)};this.getLegendOrderMode=function(){return m};this.protectedMoveOut=function(r){r.topN=h;r.labelType=k;r.ignoreNegative=g;r.legendOrderMode=m};this.protectedMoveIn=function(r){var w=r.topN;w&&(h=w);(w=r.labelType)&&(k=w);w=r.ignoreNegative;!0!==w&&!1!==w||(g=w);(r=r.legendOrderMode)&&(m=r)};this.protectedToJsonObject=function(r){0<=h&&(r.topN=h);r.labelType=k;g&&(r.hideNegative=g);r.legendOrderMode=m};this.protectedFromJsonObject=
function(r){h=(h=r.topN)?h:-1;k=r.labelType;g=r.hideNegative?!0:!1;m=r.legendOrderMode};this.protectedToRenderAttr=function(r){var w=0;(k&ab.SHOW_LABEL_NAME)==ab.SHOW_LABEL_NAME&&(w|=kc.SHOW_LABEL_NAME);(k&ab.SHOW_LABEL_NUMBER)==ab.SHOW_LABEL_NUMBER&&(w|=kc.SHOW_LABEL_NUMBER);(k&ab.SHOW_LABEL_PERCENT)==ab.SHOW_LABEL_PERCENT&&(w|=kc.SHOW_LABEL_PERCENT);r.setDataLabelType(w);r.setIgnoreNegative(g)}}function kb(){ab.call(this);this.protectedGetTypeForJson=function(){return"Pie"}}function La(){ab.call(this);
var f=this.protectedMethod,h=!0;this.setShowTotal=function(n){h=n;f.fireChangedEvent(La.KEY_SHOW_TOTAL,h)};this.isShowTotal=function(){return h};var k=this.protectedMoveOut;this.protectedMoveOut=function(n){k(n);n.showTotal=h};var g=this.protectedMoveIn;this.protectedMoveIn=function(n){g(n);n=n.showTotal;!0!==n&&!1!==n||(h=n)};this.protectedGetTypeForJson=function(){return"Ring"};var m=this.protectedToJsonObject;this.protectedToJsonObject=function(n){m(n);h&&(n.showTotal=h)};var r=this.protectedFromJsonObject;
this.protectedFromJsonObject=function(n){r(n);h=n.showTotal?!0:!1};var w=this.protectedToRenderAttr;this.protectedToRenderAttr=function(n){w(n);n.setHollow(!0);n.setShowTotalWhenHollow(h)}}function ob(){ab.call(this);var f=this.protectedMethod,h=!1;this.setAverageAngle=function(n){h=n;f.fireChangedEvent(ob.KEY_AVERAGE_ANGLE,h)};this.isAverageAngle=function(){return h};var k=this.protectedMoveOut;this.protectedMoveOut=function(n){k(n);n.averageAngle=h};var g=this.protectedMoveIn;this.protectedMoveIn=
function(n){g(n);n=n.averageAngle;!0!==n&&!1!==n||(h=n)};this.protectedGetTypeForJson=function(){return"Rose"};var m=this.protectedToJsonObject;this.protectedToJsonObject=function(n){m(n);h&&(n.averageAngle=h)};var r=this.protectedFromJsonObject;this.protectedFromJsonObject=function(n){r(n);h=n.averageAngle?!0:!1};var w=this.protectedToRenderAttr;this.protectedToRenderAttr=function(n){w(n);n.setPresentByRadius(!0);n.setPresentByAngle(!h)}}function ta(){oa.call(this);var f=this.protectedMethod,h="#,##0",
k=ta.OUTER_CIRCLE_DIMENSION,g=!0,m=!0;this.setRadarFormat=function(r){h=r;f.fireChangedEvent(ta.KEY_RADAR_FORMAT,h)};this.getRadarFormat=function(){return h};this.setOuterCircle=function(r){k=r;f.fireChangedEvent(ta.KEY_OUTER_CIRCLE,k)};this.getOuterCircle=function(){return k};this.setShowRulerMarkLabel=function(r){g=r;f.fireChangedEvent(ta.KEY_SHOW_RULER_MARK_LABEL,g)};this.isShowRulerMarkLabel=function(){return g};this.setFillColor=function(r){m=r;f.fireChangedEvent(ta.KEY_FILL_COLOR,m)};this.isFillColor=
function(){return m};this.protectedMoveOut=function(r){r.pAxisFormat=h;r.radarOuterCircle=k;r.radarShowRulerMarkLabel=g;r.radarFillColor=m};this.protectedMoveIn=function(r){var w=r.pAxisFormat;void 0!==w&&(h=w);(w=r.radarOuterCircle)&&(k=w);((w=r.radarShowRulerMarkLabel)||!1===w)&&(g=w?!0:!1);((r=r.radarFillColor)||!1===r)&&(m=r?!0:!1)};this.protectedGetTypeForJson=function(){return"Radar"};this.protectedToJsonObject=function(r){r.axisFormat=h;r.outerCircle=k;g&&(r.showRulerMarkLabel=!0);m&&(r.fillColor=
!0)};this.protectedFromJsonObject=function(r){h=r.axisFormat;k=r.outerCircle;g=r.showRulerMarkLabel?!0:!1;m=r.fillColor?!0:!1};this.protectedToRenderAttr=function(r){r.setRadarFormat(h);r.setShowRulerMarkLabel(g);r.setDimensionOutside(k==ta.OUTER_CIRCLE_DIMENSION);r.setFillColor(m)}}function ja(){var f=this.protectedMethod,h=ja.SHOW_LABEL_NUMBER,k;this.setLabelType=function(g){h=g;f.fireChangedEvent(ja.KEY_LABEL_TYPE,h)};this.getLabelType=function(){return h};this.setThicknessPercent=function(g){k=
g;f.fireChangedEvent(ja.KEY_THICKNESS_PERCENT,k)};this.getThicknessPercent=function(){return k?k:100};f.progressMoveOut=function(g){g.progressThicknessPercent=k};f.progressMoveIn=function(g){g=g.progressThicknessPercent;void 0!==g&&(k=g)};f.progressToJsonObject=function(g){100!=k&&(g.thicknessPercent=k)};f.progressFromJsonObject=function(g){k=g.thicknessPercent};f.progressToRenderAttr=function(g){g.setOverlapShrinkingPercent(k)}}function Da(){ja.multiExtends(Va,this);var f=this,h=this.protectedMethod,
k=this.protectedMoveOut;this.protectedMoveOut=function(n){k(n);h.progressMoveOut(n);n.progressLabelType=f.getLabelType()};var g=this.protectedMoveIn;this.protectedMoveIn=function(n){g(n);h.progressMoveIn(n);n=n.progressLabelType;void 0!==n&&f.setLabelType(n)};var m=this.protectedToJsonObject;this.protectedToJsonObject=function(n){m(n);h.progressToJsonObject(n);var t=f.getLabelType();t&&(n.labelType=t)};var r=this.protectedFromJsonObject;this.protectedFromJsonObject=function(n){r(n);h.progressFromJsonObject(n);
f.setLabelType(n.labelType)};this.protectedGetTypeForJson=function(){return"ProgressBar"};var w=this.protectedToRenderAttr;this.protectedToRenderAttr=function(n){w(n);h.progressToRenderAttr(n);n.setLabelType(f.getLabelType())}}function na(){ja.multiExtends(pa,this);var f=this,h=this.protectedMethod,k=this.protectedMoveOut;this.protectedMoveOut=function(n){k(n);h.progressMoveOut(n);n.progressLabelType=f.getLabelType()};var g=this.protectedMoveIn;this.protectedMoveIn=function(n){g(n);h.progressMoveIn(n);
n=n.progressLabelType;void 0!==n&&f.setLabelType(n)};var m=this.protectedToJsonObject;this.protectedToJsonObject=function(n){m(n);h.progressToJsonObject(n);var t=f.getLabelType();t&&(n.labelType=t)};var r=this.protectedFromJsonObject;this.protectedFromJsonObject=function(n){r(n);h.progressFromJsonObject(n);f.setLabelType(n.labelType)};this.protectedGetTypeForJson=function(){return"ProgressColumn"};var w=this.protectedToRenderAttr;this.protectedToRenderAttr=function(n){w(n);h.progressToRenderAttr(n);
n.setLabelType(f.getLabelType())}}function l(){ja.multiExtends(oa,this);var f=this.protectedMethod,h=0,k=!0,g=0,m=Ub.get("progressCompletedRate","\u5b8c\u6210\u7387"),r="#,##0";this.protectedCustomMovingKey=function(){return[null,"progressCircleShowLegend"]};this.setPercentageDecimalDigit=function(w){h=w;f.fireChangedEvent(l.KEY_PERCENTAGE_DIGIT,h)};this.getPercentageDecimalDigit=function(){return h};this.setPercentageCeiling=function(w){k=w;f.fireChangedEvent(l.KEY_PERCENTAGE_CEILING,k)};this.isPercentageCeiling=
function(){return k};this.setDataEmptyPercentageInstead=function(w){g=w;f.fireChangedEvent(l.KEY_PERCENTAGE_INSTEAD,g)};this.getDataEmptyPercentageInstead=function(){return g};this.setLabelDesc=function(w){m=w;f.fireChangedEvent(l.KEY_LABEL_DESC,m)};this.getLabelDesc=function(){return m};this.setLegendFormat=function(w){r=w;f.fireChangedEvent(l.KEY_LEGEND_FORMAT,r)};this.getLegendFormat=function(){return r};this.protectedMoveOut=function(w){f.progressMoveOut(w);w.progressPercentageDigit=h;w.progressPercentageCeiling=
k;w.progressPercentageInstead=g;w.progressLabelDesc=m;w.pAxisFormat=r};this.protectedMoveIn=function(w){f.progressMoveIn(w);var n=w.progressPercentageDigit;void 0!==n&&(h=n);n=w.progressPercentageCeiling;void 0!==n&&(k=n);n=w.progressPercentageInstead;void 0!==n&&(g=n);n=w.progressLabelDesc;void 0!==n&&(m=n);w=w.pAxisFormat;void 0!==w&&(r=w)};this.protectedToJsonObject=function(w){f.progressToJsonObject(w);w.percentageDecimalDigit=h;w.percentageCeiling=k;w.percentageInstead=g;m&&(w.labelDesc=m);r&&
(w.legendFormat=r)};this.protectedFromJsonObject=function(w){f.progressFromJsonObject(w);h=w.percentageDecimalDigit;k=w.percentageCeiling;g=w.percentageInstead;m=w.labelDesc;r=w.legendFormat};this.protectedGetTypeForJson=function(){return"ProgressCircle"};this.protectedToRenderAttr=function(w){f.progressToRenderAttr(w);w.setPercentageDecimalDigit(h);w.setPercentageCeiling(k);w.setDataEmptyPercentageInstead(g);w.setLabelDesc(m)}}function ba(){function f(){var L=this,ia,za,Za,lb,O;this.setEndValue=
function(D){return ia=D};this.getEndValue=function(){return ia};this.setLabel=function(D){za=D};this.getLabel=function(){return za};this.setColor=function(D){Za=D};this.getColor=function(){return Za};this.isBoundField=function(){return lb&&O};this.bindField=function(D,V){lb=D;O=V};this.getMetaFieldFullName=function(){return lb};this.getAggregation=function(){return O};this.copyToEdit=function(){var D=new f;D.fromJsonObject(L.toJsonObject());return D};this.toJsonObject=function(){var D={};D.endValue=
ia;D.label=za;D.color=Za;D.metaField=lb;D.aggregation=O;return D};this.fromJsonObject=function(D){ia=D.endValue;za=D.label;Za=D.color;lb=D.metaField;O=D.aggregation}}oa.call(this);var h=this.protectedMethod,k=ba.PAN_STYLE_WITH_TRACK,g=240,m=0,r=!0,w="#,##0",n=!0,t=!0,B=!1,A,E="#,##0",F=0,z=null;this.protectedGetTypeForJson=function(){return"Dial"};this.lookupAllMetaFieldBinding=function(L){if(z)for(var ia=0;ia<z.length;ia++){var za=z[ia].getMetaFieldFullName();za&&L(za)}};this.setPanStyle=function(L){k=
L;h.fireChangedEvent(ba.KEY_PAN_STYLE,k)};this.getPanStyle=function(){return k};this.setArcDegree=function(L){g=L;h.fireChangedEvent(ba.KEY_ARC_DEGREE,g)};this.getArcDegree=function(){return g};this.setRotateDegree=function(L){m=L;h.fireChangedEvent(ba.KEY_ROTATE_DEGREE,m)};this.getRotateDegree=function(){return m};this.setShowRulerMarkLabel=function(L){r=L;h.fireChangedEvent(ba.KEY_SHOW_RULER_MARK_LABEL,r)};this.isShowRulerMarkLabel=function(){return r};this.setRulerMarkLabelFormat=function(L){w=
L;h.fireChangedEvent(ba.KEY_RULER_MARK_FORMAT,w)};this.getRulerMarkLabelFormat=function(){return w};this.setShowPointerLabel=function(L){n=L[0];t=L[1];B=L[2];h.fireChangedEvent(ba.KEY_SHOW_POINTER_LABEL,L)};this.getShowPointerLabel=function(){return[n,t,B]};this.isShowPointerName=function(){return n};this.isShowPointerNumber=function(){return t};this.setPointerName=function(L){A=L;h.fireChangedEvent(ba.KEY_POINTER_NAME,A)};this.getPointerName=function(){return A};this.setPointerNumberFormat=function(L){E=
L;h.fireChangedEvent(ba.KEY_POINTER_NUMBER_FORMAT,E)};this.getPointerNumberFormat=function(){return E};this.setDataEmptyInstead=function(L){F=L;h.fireChangedEvent(ba.KEY_DATA_EMPTY_INSTEAD,F)};this.getDataEmptyInstead=function(){return F};this.setSections=function(L){z=L;h.fireChangedEvent(ba.KEY_SECTIONS,F)};this.getSections=function(){return z};this.protectedMoveOut=function(L){L.dial=[k,g,m,r,w,n,t,B,A,E,F,z]};this.protectedMoveIn=function(L){if(L=L.dial){var ia=0;k=L[ia++];g=L[ia++];m=L[ia++];
r=L[ia++];w=L[ia++];n=L[ia++];t=L[ia++];B=L[ia++];A=L[ia++];E=L[ia++];F=L[ia++];z=L[ia]}};this.protectedToJsonObject=function(L){L.panStyle=k==ba.PAN_STYLE_ONLY_MARK?"OnlyMark":"WithTrack";L.arcDegree=g;0!=m&&(L.rotateDegree=m);L.showRulerLabel=r;L.rulerLabelFormat=w;L.showPointerName=n;L.showPointerNumber=t;L.showPointerPercent=B;L.pointerName=A;L.pointerNumberFormat=E;L.dataEmptyInstead=F;if(z){for(var ia=[],za=0;za<z.length;za++)ia.push(z[za].toJsonObject());L.sections=ia}};this.protectedFromJsonObject=
function(L){k="OnlyMark"==L.panStyle?ba.PAN_STYLE_ONLY_MARK:ba.PAN_STYLE_WITH_TRACK;g=L.arcDegree;m=L.rotateDegree?L.rotateDegree:0;r=L.showRulerLabel;w=L.rulerLabelFormat;n=L.showPointerName;t=L.showPointerNumber;B=L.showPointerPercent;A=L.pointerName;E=L.pointerNumberFormat;F=parseFloat(L.dataEmptyInstead);z=null;if((L=L.sections)&&0<L.length){z=[];for(var ia=0;ia<L.length;ia++){var za=L[ia],Za=new f;Za.fromJsonObject(za);z.push(Za)}}};this.protectedToRenderAttr=function(L){var ia=0;n&&(ia|=Pb.SHOW_LABEL_NAME);
t&&(ia|=Pb.SHOW_LABEL_NUMBER);B&&(ia|=Pb.SHOW_LABEL_PERCENT);L.setPanStyle(k==ba.PAN_STYLE_ONLY_MARK?Pb.PAN_STYLE_ONLY_MARK:Pb.PAN_STYLE_WITH_TRACK);L.setArcDegree(g);L.setRotate(m);L.setShowRulerMarkLabel(r);L.setRulerMarkLabelFormat(w);L.setPointerLabelType(ia);L.setPointerName(A);L.setPointerNumberFormat(E)};this.createSection=function(){return new f}}function W(){oa.call(this);Z.call(this);var f=this,h=this.protectedMethod,k=!1,g=!1,m="#,##0",r,w=oa.RulerScale_Linear,n,t,B=oa.RulerStart_Zero,
A,E="#,##0",F,z=oa.RulerScale_Linear,L,ia,za=oa.RulerStart_Zero,Za,lb;this.lookupAllMetaFieldBinding=function(O){if(lb&&lb.getSortAccording()){var D=lb.getSortAccording().getMetaFieldFullName();D&&O(D)}};this.protectedGetTypeForJson=function(){return"Composite"};this.setShowLabel=function(O){k=16==(O&16);g=1==(O&1);h.fireChangedEvent(oa.KEY_SHOW_LABEL,O)};this.getShowLabel=function(){return(k?16:0)|(g?1:0)};this.isShowLabel=function(){return 0!=f.getShowLabel()};this.setLeftYUnitText=function(O){r=
O;h.fireChangedEvent(W.KEY_LY_UNIT_TEXT,r)};this.getLeftYUnitText=function(){return r};this.setLeftYRulerScale=function(O){w=O;h.fireChangedEvent(W.KEY_LY_RULER_SCALE,w)};this.getLeftYRulerScale=function(){return w};this.setLeftYRulerScope=function(O){n=O[0];t=O[1];B=O[2];h.fireChangedEvent(W.KEY_LY_RULER_START,B)};this.getLeftYRulerScope=function(){return[n,t,B]};this.setLeftYFormat=function(O){m=O;h.fireChangedEvent(W.KEY_LY_FORMAT,m)};this.getLeftYFormat=function(){return m};this.setLeftReflines=
function(O){A=O;h.fireChangedEvent(W.KEY_LEFT_REFLINES,A)};this.getLeftReflines=function(){return A};this.setRightYUnitText=function(O){F=O;h.fireChangedEvent(W.KEY_RY_UNIT_TEXT,F)};this.getRightYUnitText=function(){return F};this.setRightYRulerScale=function(O){z=O;h.fireChangedEvent(W.KEY_RY_RULER_SCALE,z)};this.getRightYRulerScale=function(){return z};this.setRightYRulerScope=function(O){L=O[0];ia=O[1];za=O[2];h.fireChangedEvent(W.KEY_RY_RULER_START,za)};this.getRightYRulerScope=function(){return[L,
ia,za]};this.setRightYFormat=function(O){E=O;h.fireChangedEvent(W.KEY_RY_FORMAT,E)};this.getRightYFormat=function(){return E};this.setRightReflines=function(O){Za=O;h.fireChangedEvent(W.KEY_RIGHT_REFLINES,Za)};this.getRightReflines=function(){return Za};this.getSort=function(){lb||(lb=new da,lb.setChangedListener(function(){h.fireChangedEvent(W.KEY_SORT,lb)}));return lb};this.protectedMoveIn=function(O){h.lineMoveIn(O);var D=O.showLabel1;void 0!==D&&(k=D);D=O.showLabel2;void 0!==D&&(g=D);(D=O.pAxisUnitText)&&
(r=D);(D=O.pAxisRulerScale)&&(w=D);(D=O.pAxisRulerMin)&&(n=D);(D=O.pAxisRulerMax)&&(t=D);(D=O.pAxisRulerStart)&&(B=D);(D=O.pAxisFormat)&&(m=D);(D=O.pAxisReflines)&&(A=D);(D=O.sAxisUnitText)&&(F=D);(D=O.sAxisRulerScale)&&(z=D);(D=O.sAxisRulerMin)&&(L=D);(D=O.sAxisRulerMax)&&(ia=D);(D=O.sAxisRulerStart)&&(za=D);(D=O.sAxisFormat)&&(E=D);(D=O.sAxisReflines)&&(Za=D);(D=O.styleScripts)&&f.setStyleScripts(D);(O=O.compositeSort)&&f.getSort().fromJsonObject(O)};this.protectedMoveOut=function(O){h.lineMoveOut(O);
O.showLabel1=k;O.showLabel2=g;O.pAxisUnitText=r;O.pAxisRulerScale=w;O.pAxisRulerMin=n;O.pAxisRulerMax=t;O.pAxisRulerStart=B;O.pAxisFormat=m;O.pAxisReflines=A;O.sAxisUnitText=F;O.sAxisRulerScale=z;O.sAxisRulerMin=L;O.sAxisRulerMax=ia;O.sAxisRulerStart=za;O.sAxisFormat=E;O.sAxisReflines=Za;O.styleScripts=f.getStyleScripts();lb&&(O.compositeSort=lb.toJsonObject())};this.protectedToRenderAttr=function(O){h.lineToRenderAttr(O);O.setShowDataLabel(k,g);O.setPYUnitText(r);O.setPYFormat(m);O.setPYRulerScale(w);
O.setPYRulerMin(n?parseFloat(n):null);O.setPYRulerMax(t?parseFloat(t):null);O.setPYRulerStart(B);O.setSYUnitText(F);O.setSYFormat(E);O.setSYRulerScale(z);O.setSYRulerMin(L?parseFloat(L):null);O.setSYRulerMax(ia?parseFloat(ia):null);O.setSYRulerStart(za)};this.protectedToJsonObject=function(O){h.lineToJsonObject(O);O.showLabelForLeft=k;O.showLabelForRight=g;r&&(O.leftYUnitText=r);w&&(O.leftYRulerScale=w);n&&(O.leftYRulerMin=n);t&&(O.leftYRulerMax=t);B&&(O.leftYRulerStart=B);m&&(O.leftYFormat=m);if(A){for(var D=
[],V=0;V<A.length;V++){var sa=A[V];D.push(sa.toJsonObject())}O.leftReflines=D}F&&(O.rightYUnitText=F);z&&(O.rightYRulerScale=z);L&&(O.rightYRulerMin=L);ia&&(O.rightYRulerMax=ia);za&&(O.rightYRulerStart=za);E&&(O.rightYFormat=E);if(Za){D=[];for(V=0;V<Za.length;V++)sa=Za[V],D.push(sa.toJsonObject());O.rightReflines=D}lb&&(O.sort=lb.toJsonObject())};this.protectedFromJsonObject=function(O){h.lineFromJsonObject(O);k=O.showLabelForLeft;g=O.showLabelForRight;r=O.leftYUnitText;w=(w=O.leftYRulerScale)?w:
oa.RulerScale_Linear;n=O.leftYRulerMin;t=O.leftYRulerMax;B=(B=O.leftYRulerStart)?B:oa.RulerStart_Zero;m=O.leftYFormat;var D=O.leftReflines;if(D){A=[];for(var V=0;V<D.length;V++){var sa=D[V],Ba=new gb;Ba.fromJsonObject(sa);A.push(Ba)}}F=O.rightYUnitText;z=(z=O.rightYRulerScale)?z:oa.RulerScale_Linear;L=O.rightYRulerMin;ia=O.rightYRulerMax;za=(za=O.rightYRulerStart)?za:oa.RulerStart_Zero;E=O.rightYFormat;if(D=O.rightReflines)for(Za=[],V=0;V<D.length;V++)sa=D[V],Ba=new gb,Ba.fromJsonObject(sa),Za.push(Ba);
(O=O.sort)&&f.getSort().fromJsonObject(O)}}function ea(){oa.call(this);var f=this,h=this.protectedMethod,k=!1,g=-1,m=ea.DESCEND_SORT,r,w=!0,n=!1,t=-1,B,A=this.setLinkTargets;this.setLinkTargets=function(F){A(F);F&&h.fireChangedEvent(oa.KEY_LINKAGE+p.NeedExecute,F)};var E=this.setDataDetailExamining;this.setDataDetailExamining=function(F){E(F);F&&h.fireChangedEvent(oa.KEY_DATA_DETAIL+p.NeedExecute,F)};this.setTopnSwitch=function(F){(k=F)&&-1==g&&(g=20);h.fireChangedEvent(ea.KEY_TOP_N,g)};this.isTopnSwitch=
function(){return k};this.setTopnItems=function(F){g=F;k=0>=g?!1:!0;h.fireChangedEvent(ea.KEY_TOP_N,g)};this.getTopnItems=function(){return g};this.setSortord=function(F){m=F;h.fireChangedEvent(ea.KEY_SORTORD,m)};this.getSortord=function(){return m};this.setSortField=function(F){r=F;h.fireChangedEvent(ea.KEY_SORT_FIELD,r)};this.getSortField=function(){return r};this.setAutoScroll=function(F){w=F;h.fireChangedEvent(ea.KEY_AUTO_SCROLL,w)};this.isAutoScroll=function(){return w};this.setStickNRow=function(F){(n=
F)&&-1==t&&(t=3);h.fireChangedEvent(ea.KEY_STICK_ROWS,t)};this.isStickNRow=function(){return n};this.setStickRows=function(F){t=F;n=0>=t?!1:!0;h.fireChangedEvent(ea.KEY_STICK_ROWS,t)};this.getStickRows=function(){return t};this.setAffectionSrcField=function(F){B=F;h.fireChangedEvent(ea.KEY_AFFECTIOM_SRC_FIELD,B)};this.getAffectionSrcField=function(){return B};h.listMoveIn=function(F){var z=F.listTopnSwitch;void 0!==z&&(k=z);z=F.listTopnItem;void 0!==z&&(g=z);z=F.listSortord;void 0!==z&&(m=z);z=F.listSortField;
void 0!==z&&(r=z);z=F.listAutoScroll;void 0!==z&&(w=z);z=F.listStickNRow;void 0!==z&&(n=z);z=F.listStickRows;void 0!==z&&(t=z);(z=F.listStyleScripts)&&f.setStyleScripts(z);F=F.listAffectionSrcField;void 0!==F&&(B=F)};h.listMoveOut=function(F){F.listTopnSwitch=k;F.listTopnItem=g;F.listSortord=m;F.listSortField=r;F.listAutoScroll=w;F.listStickNRow=n;F.listStickRows=t;F.listStyleScripts=f.getStyleScripts();F.listAffectionSrcField=B};h.listToRenderAttr=function(F){F.setAutoScroll(w);F.setStickRows(w&&
n?t:0)};h.listToJsonObject=function(F,z){F.topN=k?g:-1;F.autoScroll=w;F.stickRows=n?t:-1;if(r&&r.isMeasure())for(var L=0;L<z.getItemModelCount();L++){var ia=z.getItemModel(L);if(ia==r){F.sortFields=[L];F.sortords=[m];break}}if(B&&B.isDimension())for(L=0;L<z.getItemModelCount();L++)if(ia=z.getItemModel(L),ia==B){F.affectionSrcFields=[L];break}};h.listFromJsonObject=function(F,z){var L=F.topN;g=L?L:-1;k=0>=g?!1:!0;w=F.autoScroll;t=(L=F.stickRows)?L:-1;n=0>=t?!1:!0;L=F.sortFields;var ia=F.sortords;L&&
0<L.length&&(r=z.getItemModel(L[0]),(L=ia[0])&&(m=L));(F=F.affectionSrcFields)&&0<F.length&&(B=z.getItemModel(F[0]))}}function aa(){ea.call(this);var f=this.protectedMethod,h=!1,k="No.",g=!0;this.setShowRowNum=function(m){h=m;f.fireChangedEvent(aa.KEY_SHOW_ROWNUM,h)};this.isShowRowNum=function(){return h};this.setTitleOfRowNum=function(m){k=m;f.fireChangedEvent(aa.KEY_ROWNUM_TITLE,k)};this.getTitleOfRowNum=function(){return k};this.setShowHeader=function(m){g=m;f.fireChangedEvent(aa.KEY_SHOW_HEADER,
g)};this.isShowHeader=function(){return g};this.protectedGetTypeForJson=function(){return"Grid"};this.protectedMoveIn=function(m){f.listMoveIn(m);var r=m.gridShowHeader;void 0!==r&&(g=r);r=m.gridShowRowNum;void 0!==r&&(h=r);m=m.gridTitleOfRowNum;void 0!==m&&(k=m)};this.protectedMoveOut=function(m){f.listMoveOut(m);m.gridShowHeader=g;m.gridShowRowNum=h;m.gridTitleOfRowNum=k};this.protectedToRenderAttr=function(m){f.listToRenderAttr(m);m.setShowHeader(g);m.setShowRowNum(h)};this.protectedToJsonObject=
function(m,r){f.listToJsonObject(m,r.getColumnSet());m.showHeader=g;m.showRowNum=h;m.titleOfRowNum=k};this.protectedFromJsonObject=function(m,r){f.listFromJsonObject(m,r.getColumnSet());g=m.showHeader?!0:!1;h=m.showRowNum?!0:!1;k=m.titleOfRowNum}}function la(){ea.call(this);var f=this.protectedMethod,h=360,k,g,m=new x,r,w,n;this.getDesigningWidth=function(){return h};this.setCustomDesign=function(t,B,A){g=t;m=B;r=A;f.fireChangedEvent(la.KEY_CUSTOM_CONTENT,m)};this.getCustomHead=function(){return g};
this.getCustomContent=function(){return m};this.getCustomTail=function(){return r};this.setSplitLineColor=function(t){k=t;f.fireChangedEvent(la.KEY_SPLITLINE_COLOR,k)};this.getSplitLineColor=function(){return k};this.setBodyVerticalAlign=function(t){w=t;f.fireChangedEvent(la.KEY_BODY_V_ALIGN,w)};this.getBodyVerticalAlign=function(){return w};this.setBodyShareToRow=function(t){n=t;f.fireChangedEvent(la.KEY_BODY_SHARE_TO_ROW,n)};this.getBodyShareToRow=function(){return n};this.protectedGetTypeForJson=
function(){return"CustomList"};this.protectedMoveIn=function(t){f.listMoveIn(t);var B=t.customListSplitLine;void 0!==B&&(k=B);B=t.customListContent;void 0!==B&&(m=B);B=t.customListHead;void 0!==B&&(g=B);B=t.customListTail;void 0!==B&&(r=B);B=t.customListBodyVAlign;void 0!==B&&(w=B);t=t.customListBodyShareToRow;void 0!==t&&(n=t)};this.protectedMoveOut=function(t){f.listMoveOut(t);t.customListSplitLine=k;t.customListContent=m;t.customListHead=g;t.customListTail=r;t.customListBodyVAlign=w;t.customListBodyShareToRow=
n};this.protectedToRenderAttr=function(t){f.listToRenderAttr(t);t.setSplitLineColor(k);var B=g?g.getRowHeight():0,A=r?r.getRowHeight():0;t.setDesigntimeRowSize(h,m.getRowHeight(),B,A);B=m.getContentAreas();for(A=0;A<B.length;A++){var E=B[A];t.addDesigntimeRect(E.getX(),E.getY(),E.getWidth(),E.getHeight())}if(null!=g)for(t.setHeaderBackgroundColor(g.getBackgroundColor()),B=g.getContentAreas(),A=0;A<B.length;A++)E=B[A],t.addDesigntimeHeaderRect(E.getX(),E.getY(),E.getWidth(),E.getHeight());if(null!=
r)for(t.setFooterBackgroundColor(r.getBackgroundColor()),B=r.getContentAreas(),A=0;A<B.length;A++)E=B[A],t.addDesigntimeFooterRect(E.getX(),E.getY(),E.getWidth(),E.getHeight());t.setBodyMiddleAlign(w==la.BODY_VALIGN_MIDDLE);t.setDynamicRowHeightMode(n==la.BODY_SHARE_TO_ROW_REDUCABLE?ac.DynamicRowHeight_Reduced:n==la.BODY_SHARE_TO_ROW_INCREASABLE?ac.DynamicRowHeight_Increased:n==la.BODY_SHARE_TO_ROW_ADJUSTABLE?ac.DynamicRowHeight_Both:ac.DynamicRowHeight_None)};this.protectedToJsonObject=function(t,
B){f.listToJsonObject(t,B.getFieldSet());t.width=h;k&&(t.splitLineColor=k);t.content=m.toJsonObject();g&&(t.head=g.toJsonObject());r&&(t.tail=r.toJsonObject());w&&(t.bodyVAlign=w);n&&(t.bodyShareToRow=n)};this.protectedFromJsonObject=function(t,B){f.listFromJsonObject(t,B.getFieldSet());h=t.width;k=t.splitLineColor;B=t.content;m=new x;m.fromJsonObject(B);g=null;if(B=t.head)g=new x,g.fromJsonObject(B);r=null;if(B=t.tail)r=new x,r.fromJsonObject(B);w=t.bodyVAlign;n=t.bodyShareToRow}}function x(){var f=
this,h=40,k=[],g;this.setRowHeight=function(m){h=m};this.getRowHeight=function(){return h};this.setContentAreas=function(m){k=m};this.getContentAreas=function(){return k};this.setBackgroundColor=function(m){g=m};this.getBackgroundColor=function(){return g};this.copyToEdit=function(){var m=new x;m.fromJsonObject(f.toJsonObject());return m};this.toJsonObject=function(){var m={};m.rowHeight=h;for(var r=[],w=0;w<k.length;w++)r.push(k[w].toJsonObject());m.areas=r;g&&(m.backgroundColor=g);return m};this.fromJsonObject=
function(m){h=m.rowHeight;k=[];for(var r=m.areas,w=0;w<r.length;w++){var n=r[w],t=new d;t.fromJsonObject(n);k.push(t)}g=m.backgroundColor}}function d(){var f,h,k,g,m,r,w,n=new vb;this.setRectangle=function(t,B,A,E){f=t;h=B;k=A;g=E};this.getX=function(){return f};this.getY=function(){return h};this.getWidth=function(){return k};this.getHeight=function(){return g};this.setFieldIndex=function(t){m=t;r=null};this.getFieldIndex=function(){return m};this.setCustomText=function(t){m=-1;r=t};this.getCustomText=
function(){return r};this.setColorBar=function(t){w=t};this.getColorBar=function(){return w};this.setCustomStyle=function(t){n=t};this.getCustomStyle=function(){return n};this.toJsonObject=function(){var t={};t.x=f;t.y=h;t.width=k;t.height=g;0<=m&&(t.field=m);r&&(t.text=r);w&&(t.colorBar=w.toJsonObject());t.style=n.toJsonObject();return t};this.fromJsonObject=function(t){f=t.x;h=t.y;k=t.width;g=t.height;var B=t.field;m=B||0===B?B:-1;r=(B=t.text)?B:null;w=(B=t.colorBar)?b.from(B):null;n=new vb;n.fromJsonObject(t.style)}}
function b(){var f,h,k,g,m;this.setMin=function(r){f=r};this.getMin=function(){return f};this.setMax=function(r){h=r};this.getMax=function(){return h};this.setNormalColor=function(r){k=r};this.getNormalColor=function(){return k};this.setNegativeColor=function(r){g=r};this.getNegativeColor=function(){return g};this.setAxisColor=function(r){m=r};this.getAxisColor=function(){return m};this.toJsonObject=function(){var r={};f&&(r.min=f);h&&(r.max=h);k&&(r.color=k);g&&(r.negativeColor=g);m&&(r.axisColor=
m);return r};this.fromJsonObject=function(r){f=r.min;h=r.max;k=r.color;g=r.negativeColor;m=r.axisColor}}function e(){oa.call(this);var f=this.protectedMethod,h=!1,k=!1,g=!1,m=!1,r=-1,w=-1,n=!1,t=!1,B,A="#,##0";this.isSortByName=function(){return h};this.setSortByName=function(E){h=E;f.fireChangedEvent(e.KEY_SORT_BY_NAME,h)};this.isNegativeAsc=function(){return g};this.setNegativeAsc=function(E){g=E;f.fireChangedEvent(e.KEY_NEGATIVE_ASC,g)};this.getNegativeTopN=function(){return r};this.setNegativeTopN=
function(E){r=E;f.fireChangedEvent(e.KEY_NEGATIVE_TOP_N,r)};this.getPositiveTopN=function(){return w};this.setPositiveTopN=function(E){w=E;f.fireChangedEvent(e.KEY_POSITIVE_TOP_N,w)};this.isWithoutTotal=function(){return n};this.setWithoutTotal=function(E){n=E;f.fireChangedEvent(e.KEY_WITHOUT_TOTAL,n)};this.isStartFromStage=function(){return t};this.setStartFromStage=function(E){t=E;f.fireChangedEvent(e.KEY_START_FROM_STAGE,t)};this.getYUnitText=function(){return B};this.setYUnitText=function(E){B=
E;f.fireChangedEvent(e.KEY_Y_UNIT_TEXT,B)};this.getYFormat=function(){return A};this.setYFormat=function(E){A=E;f.fireChangedEvent(e.KEY_Y_FORMAT,A)};this.protectedGetTypeForJson=function(){return"Waterfall"};this.protectedMoveIn=function(E){var F=E.waterfall;F&&(h=F[0],k=F[1],g=F[2],m=F[3],r=F[4],w=F[5],n=F[6],t=F[7]);(F=E.pAxisUnitText)&&(B=F);E=E.pAxisFormat;void 0!==E&&(A=E)};this.protectedMoveOut=function(E){E.waterfall=[h,k,g,m,r,w,n,t];E.pAxisUnitText=B;E.pAxisFormat=A};this.protectedToRenderAttr=
function(E){E.setYUnitText(B);E.setYFormat(A)};this.protectedToJsonObject=function(E,F){h&&(E.sortByName=h);k&&(E.negativeAhead=k);g&&(E.negativeAsc=g);m&&(E.positiveAsc=m);0<r&&(E.negativeTopN=r);0<w&&(E.positiveTopN=w);n&&(E.withoutTotal=n);t&&(E.startFromStage=t);B&&(E.yUnitText=B);A&&(E.yFormat=A)};this.protectedFromJsonObject=function(E,F){h=E.sortByName?!0:!1;k=E.negativeAhead?!0:!1;g=E.negativeAsc?!0:!1;m=E.positiveAsc?!0:!1;r=(F=E.negativeTopN)?F:-1;w=(F=E.positiveTopN)?F:-1;n=E.withoutTotal?
!0:!1;t=E.startFromStage?!0:!1;B=E.yUnitText;A=E.yFormat}}function c(){oa.call(this);var f=this.protectedMethod,h=!1,k=!1,g=c.RATIO_BY_STEP,m=c.LADDER_PERFECT,r,w=c.LABEL_POSITION_LEFT,n=c.LABEL_POSITION_HIDE,t=c.LABEL_POSITION_RIGHT;this.protectedCustomMovingKey=function(){return[null,"funnelShowLegend"]};this.isSortByName=function(){return h};this.setSortByName=function(F){h=F;f.fireChangedEvent(c.KEY_SORT_BY_NAME,h)};this.setIgnoreNegative=function(F){k=F;f.fireChangedEvent(oa.KEY_NEGATIVE,k)};
this.isIgnoreNegative=function(){return k};this.setRatioBy=function(F){g=F;f.fireChangedEvent(c.KEY_RATIOBY,g)};this.getRatioBy=function(){return g};this.setLadder=function(F){m=F;f.fireChangedEvent(c.KEY_LADDER,m)};this.getLadder=function(){return m};this.setRatioFormat=function(F){r=F;f.fireChangedEvent(c.KEY_RATIO_FORMAT,r)};this.getRatioFormat=function(){return r};this.setNameLabelPosition=function(F){w=F;f.fireChangedEvent(c.KEY_LABEL_NAME,w)};this.getNameLabelPosition=function(){return w};this.setValueLabelPosition=
function(F){n=F;f.fireChangedEvent(c.KEY_LABEL_VALUE,n)};this.getValueLabelPosition=function(){return n};this.setRatioLabelPosition=function(F){t=F;f.fireChangedEvent(c.KEY_LABEL_RATIO,t)};this.getRatioLabelPosition=function(){return t};this.isShowLabel=function(){return w!=c.LABEL_POSITION_HIDE||n!=c.LABEL_POSITION_HIDE||t!=c.LABEL_POSITION_HIDE};this.protectedMoveIn=function(F){var z=F.funnel;z&&(h=z[0],g=z[1],m=z[2],w=z[3],n=z[4],t=z[5],r=z[6]);F=F.ignoreNegative;!0!==F&&!1!==F||(k=F)};this.protectedMoveOut=
function(F){F.funnel=[h,g,m,w,n,t,r];F.ignoreNegative=k};this.protectedToRenderAttr=function(F){F.setLadderPerfect(m==c.LADDER_PERFECT);F.setPercentageFormat(r);g==c.RATIO_BY_STEP&&F.markRatioByStep();g==c.RATIO_BY_START&&F.markRatioByStart();g==c.RATIO_BY_TOTAL&&F.markRatioByTotal();F.setLabelNamePosition(B(w));F.setLabelValuePosition(B(n));F.setLabelPercentPosition(B(t))};var B=function(F){return F==c.LABEL_POSITION_LEFT?Qb.LABEL_LEFT:F==c.LABEL_POSITION_RIGHT?Qb.LABEL_RIGHT:F==c.LABEL_POSITION_CENTER?
Qb.LABEL_CENTER:Qb.LABEL_NONE};this.protectedGetTypeForJson=function(){return"Funnel"};this.protectedToJsonObject=function(F,z){h&&(F.sortByName=!0);k&&(F.hideNegative=!0);F.ratioBy=g==c.RATIO_BY_STEP?"STEP":g==c.RATIO_BY_START?"START":g==c.RATIO_BY_TOTAL?"TOTAL":null;F.ladder=m==c.LADDER_PERFECT?"PERFECT":m==c.LADDER_ACTUAL?"ACTUAL":null;F.nameLabel=A(w);F.valueLabel=A(n);F.ratioLabel=A(t);F.ratioFormat=r};var A=function(F){return F==c.LABEL_POSITION_LEFT?"LEFT":F==c.LABEL_POSITION_CENTER?"CENTER":
F==c.LABEL_POSITION_RIGHT?"RIGHT":null};this.protectedFromJsonObject=function(F,z){h=F.sortByName?!0:!1;k=F.hideNegative?!0:!1;z=F.ratioBy;g="START"==z?c.RATIO_BY_START:"TOTAL"==z?c.RATIO_BY_TOTAL:c.RATIO_BY_STEP;m="ACTUAL"==F.ladder?c.LADDER_ACTUAL:c.LADDER_PERFECT;w=E(F.nameLabel);n=E(F.valueLabel);t=E(F.ratioLabel);r=F.ratioFormat};var E=function(F){return"LEFT"==F?c.LABEL_POSITION_LEFT:"CENTER"==F?c.LABEL_POSITION_CENTER:"RIGHT"==F?c.LABEL_POSITION_RIGHT:c.LABEL_POSITION_HIDE}}function a(){oa.call(this);
var f=this.protectedMethod,h="#,##0",k,g,m,r=oa.RulerStart_Zero,w,n="#,##0",t,B,A,E=oa.RulerStart_Zero,F;this.setXFormat=function(z){h=z;f.fireChangedEvent(a.KEY_X_FORMAT,h)};this.getXFormat=function(){return h};this.setXUnitText=function(z){k=z;f.fireChangedEvent(a.KEY_X_UNIT_TEXT,k)};this.getXUnitText=function(){return k};this.setXRulerScope=function(z){g=z[0];m=z[1];r=z[2];f.fireChangedEvent(a.KEY_X_RULER_START,r)};this.getXRulerScope=function(){return[g,m,r]};this.setXReflines=function(z){w=z;
f.fireChangedEvent(a.KEY_X_REFLINES,w)};this.getXReflines=function(){return w};this.setYFormat=function(z){n=z;f.fireChangedEvent(a.KEY_Y_FORMAT,n)};this.getYFormat=function(){return n};this.setYUnitText=function(z){t=z;f.fireChangedEvent(a.KEY_Y_UNIT_TEXT,t)};this.getYUnitText=function(){return t};this.setYRulerScope=function(z){B=z[0];A=z[1];E=z[2];f.fireChangedEvent(a.KEY_Y_RULER_START,E)};this.getYRulerScope=function(){return[B,A,E]};this.setYReflines=function(z){F=z;f.fireChangedEvent(a.KEY_Y_REFLINES,
F)};this.getYReflines=function(){return F};this.protectedMoveIn=function(z){var L=z.sAxisFormat;void 0!==L&&(h=L);(L=z.sAxisUnitText)&&(k=L);(L=z.sAxisRulerMin)&&(g=L);(L=z.sAxisRulerMax)&&(m=L);(L=z.sAxisRulerStart)&&(r=L);(L=z.sAxisReflines)&&(w=L);L=z.pAxisFormat;void 0!==L&&(n=L);(L=z.pAxisUnitText)&&(t=L);(L=z.pAxisRulerMin)&&(B=L);(L=z.pAxisRulerMax)&&(A=L);(L=z.pAxisRulerStart)&&(E=L);(z=z.pAxisReflines)&&(F=z)};this.protectedMoveOut=function(z){z.sAxisFormat=h;z.sAxisUnitText=k;z.sAxisRulerMin=
g;z.sAxisRulerMax=m;z.sAxisRulerStart=r;z.sAxisReflines=w;z.pAxisFormat=n;z.pAxisUnitText=t;z.pAxisRulerMin=B;z.pAxisRulerMax=A;z.pAxisRulerStart=E;z.pAxisReflines=F};this.protectedToRenderAttr=function(z){z.setXFormat(h);z.setXUnitText(k);z.setXRulerStart(f.toRenderAttrForRulerStart(r));z.setXRulerMin(g?parseFloat(g):null);z.setXRulerMax(m?parseFloat(m):null);z.setYFormat(n);z.setYUnitText(t);z.setYRulerStart(f.toRenderAttrForRulerStart(E));z.setYRulerMin(B?parseFloat(B):null);z.setYRulerMax(A?parseFloat(A):
null)};this.protectedGetTypeForJson=function(){return"Scatter"};this.protectedToJsonObject=function(z,L){h&&(z.xFormat=h);k&&(z.xUnitText=k);g&&(z.xRulerMin=g);m&&(z.xRulerMax=m);r&&(z.xRulerStart=r);if(w){L=[];for(var ia=0;ia<w.length;ia++){var za=w[ia];L.push(za.toJsonObject())}z.xReflines=L}n&&(z.yFormat=n);t&&(z.yUnitText=t);B&&(z.yRulerMin=B);A&&(z.yRulerMax=A);E&&(z.yRulerStart=E);if(F){L=[];for(ia=0;ia<F.length;ia++)za=F[ia],L.push(za.toJsonObject());z.yReflines=L}};this.protectedFromJsonObject=
function(z,L){h=z.xFormat;k=z.xUnitText;g=z.xRulerMin;m=z.xRulerMax;r=(r=z.xRulerStart)?r:oa.RulerStart_Zero;if(L=z.xReflines){w=[];for(var ia=0;ia<L.length;ia++){var za=L[ia],Za=new gb;Za.fromJsonObject(za);w.push(Za)}}n=z.yFormat;t=z.yUnitText;B=z.yRulerMin;A=z.yRulerMax;E=(E=z.yRulerStart)?E:oa.RulerStart_Zero;if(L=z.yReflines)for(F=[],ia=0;ia<L.length;ia++)za=L[ia],Za=new gb,Za.fromJsonObject(za),F.push(Za)}}function q(){oa.call(this);ka.call(this);var f=this.protectedMethod,h=!1;this.setIgnoreNegative=
function(k){h=k;f.fireChangedEvent(oa.KEY_NEGATIVE,h)};this.isIgnoreNegative=function(){return h};this.protectedMoveIn=function(k){var g=k.ignoreNegative;!0!==g&&!1!==g||(h=g);f.moveInWithMixColorMode(k)};this.protectedMoveOut=function(k){k.ignoreNegative=h;f.moveOutWithMixColorMode(k)};this.protectedToRenderAttr=function(k){k.setIgnoreNegative(h)};this.protectedGetTypeForJson=function(){return"RectTree"};this.protectedToJsonObject=function(k,g){h&&(k.hideNegative=!0);f.toJsonObjectWithMixColorMode(k,
g)};this.protectedFromJsonObject=function(k,g){h=k.hideNegative?!0:!1;f.fromJsonObjectWithMixColorMode(k,g)}}function u(){oa.call(this);var f=this.protectedMethod,h=!1,k=ab.LegendOrderMode_AUTO;this.protectedCustomMovingKey=function(){return["sunburstShowLabel","sunburstShowLegend"]};this.setIgnoreNegative=function(g){h=g;f.fireChangedEvent(oa.KEY_NEGATIVE,h)};this.isIgnoreNegative=function(){return h};this.setLegendOrderMode=function(g){k=g;f.fireChangedEvent(ab.KEY_LEGEND_ORDER_MODE,k)};this.getLegendOrderMode=
function(){return k};this.protectedMoveIn=function(g){var m=g.ignoreNegative;!0!==m&&!1!==m||(h=m);(g=g.legendOrderMode)&&(k=g)};this.protectedMoveOut=function(g){g.ignoreNegative=h;g.legendOrderMode=k};this.protectedToRenderAttr=function(g){g.setIgnoreNegative(h)};this.protectedGetTypeForJson=function(){return"Sunburst"};this.protectedToJsonObject=function(g,m){h&&(g.hideNegative=!0);g.legendOrderMode=k};this.protectedFromJsonObject=function(g,m){h=g.hideNegative?!0:!1;k=g.legendOrderMode}}function v(){var f=
this,h,k,g,m,r,w={};this.getChartTypeName=function(){throw Error("Override me.");};this.getRollSet=function(){g||(g=A(!0));return g};this.getRollInState=function(){m||(m=new Ma,m.updateItemCountLimited(f.getRollSet()),m.addStateChangedListener(B));return m};this.getBeRolledSet=function(){return null};this.isRollInSupported=function(){return f.getBeRolledSet()?!0:!1};this.isRollInFieldSupported=function(){return f.getBeRolledSet()?!0:!1};this.lookupRolledInField=function(z){if(0==z){z=f.getBeRolledSet();
for(var L=0;L<z.getItemModelCount();L++){var ia=z.getItemModel(L);if(!ia.getInvalidPrompt())return ia}}else{var za=z-1,Za=0;z=f.getRollSet();for(L=0;L<z.getItemModelCount();L++)if(ia=z.getItemModel(L),!ia.getInvalidPrompt()){if(Za==za)return ia;Za++}}return null};this.isDataExaminingSupported=function(){return!1};this.isLinkageSupported=function(){return!1};this.getChartProperty=function(){r||(r=f.protectedCreateChartProperty(),r.addChangedListener(t));return r};this.protectedCreateChartProperty=
function(){throw Error("Override me.");};this.getGarbageProperties=function(){f.getChartProperty().moveOut(w);return w};this.setGarbageProperties=function(z){w=z;f.getChartProperty().moveIn(w)};this.getGarbageFields=function(){return k};this.setGarbageFields=function(z){k=z};this.setChangedListener=function(z){h=z};var n=function(z,L){h&&h(z,L)},t=function(z,L){h&&h(null,z)},B=function(){h&&h(null,Ma.KEY_STATE_CHANGED)},A=function(z,L){var ia=new sb;ia.setItemCountMin(L?1:0);ia.setItemCountMax(z?
65535:1);ia.addChangedListener(n);return ia};this.awake=function(z){for(var L=E(),ia=0;ia<L.length;ia++){var za=L[ia];za.traversalItems(function(Za){za.awake(z,Za)})}};this.isExecutableContentEmpty=function(){for(var z=E(),L=0;L<z.length;L++)if(0<z[L].getItemModelCount())return!1;return!0};this.getBriefOutputableDimensionsAndMeasures=function(){var z=[],L=[];f.lookupAllItemModelSet(function(ia){ia=ia.getSquareField();(ia.isDimension()?z:L).push(ia)},!0);return[z,L]};this.lookupAllItemModelSet=function(z,
L){for(var ia=!1,za=f.protectedGetAllItemModelSet(),Za=0;Za<za.length&&!(ia=za[Za].traversalItems(z));Za++);!ia&&!L&&f.isRollInSupported()&&g&&g.traversalItems(z)};var E=function(){var z=f.protectedGetAllItemModelSet();g&&z.push(g);return z};this.protectedGetAllItemModelSet=function(){throw Error("Override me.");};this.checkAllFieldsProblem=function(){f.protectedCheckAllFieldsProblemImpl();g&&F(g);for(var z=E(),L=0;L<z.length;L++)for(var ia=z[L],za=0;za<ia.getItemModelCount();za++){var Za=ia.getItemModel(za),
lb=Za.getSquareField();Za=Za.getMetaField();if(!lb.getInvalidPrompt()||lb.getInvalidPrompt().getLevel()==qb.InvalidPrompt_LEVEL_BAD_USAGE)if(lb.isMeasure()&&!Za.isCanAsMeasure()||lb.isDimension()&&!Za.isCanAsDimension())Za=new Oa.InvalidPrompt,Za.setLevel(qb.InvalidPrompt_LEVEL_BAD_USAGE,!0),Za.setPromptText(Ub.get("invalidRole","\u7ef4\u5ea6/\u5ea6\u91cf\u7528\u6cd5\u4e0d\u6b63\u786e")),lb.setInvalidPrompt(Za)}z=E();for(L=0;L<z.length;L++)for(ia=z[L],za=1,lb=0;lb<ia.getItemModelCount();lb++)if(Za=
ia.getItemModel(lb).getSquareField(),!Za.getInvalidPrompt()||Za.getInvalidPrompt().getLevel()==qb.InvalidPrompt_LEVEL_TOO_MANY){var O=za>ia.getItemCountMax(),D=new Oa.InvalidPrompt;D.setLevel(qb.InvalidPrompt_LEVEL_TOO_MANY,O);Za.setInvalidPrompt(D);za++}};this.protectedCheckAllFieldsProblemImpl=function(){throw Error("Override me.");};var F=function(z){z.traversalItems(function(L){L=L.getSquareField();var ia=!1,za=null;L.isDimension()||(ia=!0,za=Ub.get("onlyDimensionAllowed","\u6b64\u5904\u53ea\u80fd\u51fa\u73b0\u7ef4\u5ea6\u3002"));
var Za=new Oa.InvalidPrompt;Za.setLevel(qb.InvalidPrompt_LEVEL_BAD_USAGE,ia);Za.setPromptText(za);L.setInvalidPrompt(Za)})};this.toJsonObject=function(z){z={};f.protectedToJsonObject(z);if(g&&f.isRollInSupported()){var L=z,ia={};ia.fields=f.getRollSet().toJsonObject(!0);var za=f.getRollInState(),Za=za.getItemCount();if(0<Za){for(var lb=[],O=0;O<Za;O++){var D=za.getItem(O);lb.push(D.toJsonObject())}ia.state=lb}L.roll=ia}z.chartProperty=f.getChartProperty().toJsonObject(f);return z};this.fromJsonObject=
function(z,L){f.protectedFromJsonObject(z,L);var ia=z.roll;if(ia){var za=ia.fields;ia=ia.state;f.getRollSet().fromJsonObject(qb,za,L,!0);if(ia){L=[];for(za=0;za<ia.length;za++){var Za=ia[za],lb=new eb;lb.fromJsonObject(Za);L.push(lb)}f.getRollInState().updateItems(L)}}f.getChartProperty().fromJsonObject(z.chartProperty,f)};this.protectedToJsonObject=function(z){throw Error("Override me.");};this.protectedFromJsonObject=function(z,L){throw Error("Override me.");};this.protectedMethod={createItemModelSet:A,
checkProblemWithOnlyDimensionAllowed:F,checkProblemWithOnlyMeasureAllowed:function(z){z.traversalItems(function(L){L=L.getSquareField();var ia=!1,za=null;L.isMeasure()||(ia=!0,za=Ub.get("onlyMeasureAllowed","\u6b64\u5904\u53ea\u80fd\u51fa\u73b0\u5ea6\u91cf\u3002"));var Za=new Oa.InvalidPrompt;Za.setLevel(qb.InvalidPrompt_LEVEL_BAD_USAGE,ia);Za.setPromptText(za);L.setInvalidPrompt(Za)})},checkProblemAboutMultiSeriesMeasureSet:function(z,L){z=0<z.getItemModelCount();for(var ia=!1,za=0;za<L.getItemModelCount();za++){var Za=
L.getItemModel(za).getSquareField(),lb=!1,O=null;Za.isMeasure()?(z&&ia&&(lb=!0,O=Ub.get("seriesConflictPrompt","\u5df2\u4f7f\u7528\u7ef4\u5ea6\u503c\u8868\u793a\u591a\u4e2a\u7cfb\u5217\uff0c\u4e0d\u80fd\u540c\u65f6\u51fa\u73b0\u591a\u4e2a\u5ea6\u91cf\u3002")),ia=!0):(lb=!0,O=Ub.get("onlyMeasureAllowed","\u6b64\u5904\u53ea\u80fd\u51fa\u73b0\u5ea6\u91cf\u3002"));var D=new Oa.InvalidPrompt;D.setLevel(qb.InvalidPrompt_LEVEL_BAD_USAGE,lb);D.setPromptText(O);Za.setInvalidPrompt(D)}}}}function y(){var f=
this;this.isDataExaminingSupported=function(){return!0};this.lookupDataExaminingCoordinateFields=function(){return f.lookupLinkageKeyField()}}function C(){y.call(this);var f=this;this.isLinkageSupported=function(){return!0};this.lookupLinkageKeyField=function(){return f.isRollInSupported()?f.lookupRolledInField(f.getRollInState().getCurrentRollInFieldCount()):f.protectedCustomLookupLinkageKeyField()};this.protectedCustomLookupLinkageKeyField=function(){return null}}function P(){v.call(this);C.call(this);
var f=this,h=this.protectedMethod,k,g;this.getChartTypeName=function(){return mb.ChartType_KPI};this.getPrimarySet=function(){k||(k=h.createItemModelSet());return k};this.getSecondarySet=function(){g||(g=h.createItemModelSet());return g};this.protectedCreateChartProperty=function(){return new Qa};this.protectedCheckAllFieldsProblemImpl=function(){h.checkProblemWithOnlyMeasureAllowed(f.getPrimarySet());h.checkProblemWithOnlyMeasureAllowed(f.getSecondarySet())};this.protectedGetAllItemModelSet=function(){return[f.getPrimarySet(),
f.getSecondarySet()]};this.protectedToJsonObject=function(m){m.primary=f.getPrimarySet().toJsonObject();m.secondary=f.getSecondarySet().toJsonObject()};this.protectedFromJsonObject=function(m,r){f.getPrimarySet().fromJsonObject(qb,m.primary,r);f.getSecondarySet().fromJsonObject(qb,m.secondary,r)}}function U(){v.call(this);C.call(this);var f=this,h=this.protectedMethod,k,g;this.getBeRolledSet=function(){return f.getColorSet()};this.getAngleSet=function(){k||(k=h.createItemModelSet(!1,!0));return k};
this.getColorSet=function(){g||(g=h.createItemModelSet());return g};this.protectedCheckAllFieldsProblemImpl=function(){h.checkProblemWithOnlyDimensionAllowed(f.getColorSet());h.checkProblemWithOnlyMeasureAllowed(f.getAngleSet())};this.protectedGetAllItemModelSet=function(){return[f.getAngleSet(),f.getColorSet()]};this.protectedToJsonObject=function(m){m.angle=f.getAngleSet().toJsonObject();m.color=f.getColorSet().toJsonObject()};this.protectedFromJsonObject=function(m,r){f.getAngleSet().fromJsonObject(qb,
m.angle,r);f.getColorSet().fromJsonObject(qb,m.color,r)}}function fa(){U.call(this);this.getChartTypeName=function(){return mb.ChartType_Pie};this.protectedCreateChartProperty=function(){return new kb}}function wa(){U.call(this);this.getChartTypeName=function(){return mb.ChartType_Ring};this.protectedCreateChartProperty=function(){return new La}}function ma(){U.call(this);this.getChartTypeName=function(){return mb.ChartType_Rose};this.protectedCreateChartProperty=function(){return new ob}}function Ea(){v.call(this);
var f=this,h=this.protectedMethod,k,g,m;this.getBeRolledSet=function(){return f.getXAxis()};this.getXAxis=function(){k||(k=h.createItemModelSet());return k};this.getYAxis=function(){g||(g=h.createItemModelSet(!0,!0));return g};this.getSeries=function(){m||(m=h.createItemModelSet());return m};this.protectedCreateChartProperty=function(){return new pa};this.protectedCheckAllFieldsProblemImpl=function(){h.checkProblemWithOnlyDimensionAllowed(f.getXAxis());h.checkProblemWithOnlyDimensionAllowed(f.getSeries());
h.checkProblemAboutMultiSeriesMeasureSet(f.getSeries(),f.getYAxis())};this.protectedGetAllItemModelSet=function(){return[f.getXAxis(),f.getYAxis(),f.getSeries()]};this.protectedToJsonObject=function(r){r.xAxis=f.getXAxis().toJsonObject();r.yAxis=f.getYAxis().toJsonObject();r.series=f.getSeries().toJsonObject()};this.protectedFromJsonObject=function(r,w){f.getXAxis().fromJsonObject(qb,r.xAxis,w);f.getYAxis().fromJsonObject(qb,r.yAxis,w);f.getSeries().fromJsonObject(qb,r.series,w)}}function Xa(){v.call(this);
var f=this,h=this.protectedMethod,k,g,m;this.getBeRolledSet=function(){return f.getYAxis()};this.getXAxis=function(){k||(k=h.createItemModelSet(!0,!0));return k};this.getYAxis=function(){g||(g=h.createItemModelSet());return g};this.getSeries=function(){m||(m=h.createItemModelSet());return m};this.protectedCreateChartProperty=function(){return new Va};this.protectedCheckAllFieldsProblemImpl=function(){h.checkProblemWithOnlyDimensionAllowed(f.getYAxis());h.checkProblemWithOnlyDimensionAllowed(f.getSeries());
h.checkProblemAboutMultiSeriesMeasureSet(f.getSeries(),f.getXAxis())};this.protectedGetAllItemModelSet=function(){return[f.getXAxis(),f.getYAxis(),f.getSeries()]};this.protectedToJsonObject=function(r){r.xAxis=f.getXAxis().toJsonObject();r.yAxis=f.getYAxis().toJsonObject();r.series=f.getSeries().toJsonObject()};this.protectedFromJsonObject=function(r,w){f.getXAxis().fromJsonObject(qb,r.xAxis,w);f.getYAxis().fromJsonObject(qb,r.yAxis,w);f.getSeries().fromJsonObject(qb,r.series,w)}}function bb(){Xa.call(this);
C.call(this);this.getChartTypeName=function(){return mb.ChartType_Bar}}function Jb(){Xa.call(this);C.call(this);this.getChartTypeName=function(){return mb.ChartType_StackedBar}}function Ya(){Xa.call(this);C.call(this);this.getChartTypeName=function(){return mb.ChartType_PercentStackedBar};this.protectedCreateChartProperty=function(){return new Ka}}function nb(){Ea.call(this);C.call(this);this.getChartTypeName=function(){return mb.ChartType_Column}}function wb(){Ea.call(this);C.call(this);this.getChartTypeName=
function(){return mb.ChartType_StackedColumn}}function va(){Ea.call(this);C.call(this);this.getChartTypeName=function(){return mb.ChartType_PercentStackedColumn};this.protectedCreateChartProperty=function(){return new Ab}}function Y(){Ea.call(this);C.call(this);this.getChartTypeName=function(){return mb.ChartType_Line};this.protectedCreateChartProperty=function(){return new Wa}}function J(){Ea.call(this);C.call(this);this.getChartTypeName=function(){return mb.ChartType_Area};this.protectedCreateChartProperty=
function(){var f=new pa;f.setSortSupported(!1);return f}}function N(){Ea.call(this);C.call(this);this.getChartTypeName=function(){return mb.ChartType_PercentArea};this.protectedCreateChartProperty=function(){var f=new Ab;f.setSortSupported(!1);return f}}function X(){v.call(this);var f=this,h=this.protectedMethod,k,g,m;this.getChartTypeName=function(){return mb.ChartType_Map};this.getDimensionSet=function(){k||(k=h.createItemModelSet());return k};this.getMeasureSet=function(){g||(g=h.createItemModelSet());
return g};this.getInfomationSet=function(){m||(m=h.createItemModelSet(!0),m.setItemCountMax(8));return m};this.getBriefOutputableDimensionsAndMeasures=function(){var r=[],w=[],n=function(t){t=t.getSquareField();(t.isDimension()?r:w).push(t)};f.getDimensionSet().traversalItems(n);f.getMeasureSet().traversalItems(n);return[r,w]};this.protectedCreateChartProperty=function(){return new Ga};this.protectedCheckAllFieldsProblemImpl=function(){h.checkProblemWithOnlyDimensionAllowed(f.getDimensionSet());h.checkProblemWithOnlyMeasureAllowed(f.getMeasureSet())};
this.protectedGetAllItemModelSet=function(){return[f.getDimensionSet(),f.getMeasureSet(),f.getInfomationSet()]};this.protectedToJsonObject=function(r){r.dimension=f.getDimensionSet().toJsonObject();r.measure=f.getMeasureSet().toJsonObject();r.infomation=f.getInfomationSet().toJsonObject()};this.protectedFromJsonObject=function(r,w){f.getDimensionSet().fromJsonObject(qb,r.dimension,w);f.getMeasureSet().fromJsonObject(qb,r.measure,w);f.getInfomationSet().fromJsonObject(qb,r.infomation,w)}}function Q(){v.call(this);
var f=this,h=this.protectedMethod,k,g,m,r,w;this.getChartTypeName=function(){return mb.ChartType_GIS};this.getCoordinateSet=function(){k||(k=h.createItemModelSet(),k.setItemCountMin(2),k.setItemCountMax(2));return k};this.getColorSet=function(){g||(g=h.createItemModelSet(!1,!1));return g};this.getSizeSet=function(){m||(m=h.createItemModelSet(!1,!1));return m};this.getCaptionSet=function(){r||(r=h.createItemModelSet(!1,!1));return r};this.getInfomationSet=function(){w||(w=h.createItemModelSet(!0),
w.setItemCountMax(8));return w};this.getBriefOutputableDimensionsAndMeasures=function(){var n=[],t=[],B=function(A){A=A.getSquareField();(A.isDimension()?n:t).push(A)};f.getCoordinateSet().traversalItems(B);f.getSizeSet().traversalItems(B);return[n,t]};this.protectedCreateChartProperty=function(){return new cb};this.protectedCheckAllFieldsProblemImpl=function(){h.checkProblemWithOnlyDimensionAllowed(f.getCoordinateSet());h.checkProblemWithOnlyDimensionAllowed(f.getColorSet());h.checkProblemWithOnlyDimensionAllowed(f.getCaptionSet());
h.checkProblemWithOnlyMeasureAllowed(f.getSizeSet())};this.protectedGetAllItemModelSet=function(){return[f.getCoordinateSet(),f.getColorSet(),f.getSizeSet(),f.getCaptionSet(),f.getInfomationSet()]};this.protectedToJsonObject=function(n){n.coordinate=f.getCoordinateSet().toJsonObject();n.color=f.getColorSet().toJsonObject();n.size=f.getSizeSet().toJsonObject();n.caption=f.getCaptionSet().toJsonObject();n.infomation=f.getInfomationSet().toJsonObject()};this.protectedFromJsonObject=function(n,t){f.getCoordinateSet().fromJsonObject(qb,
n.coordinate,t);f.getColorSet().fromJsonObject(qb,n.color,t);f.getSizeSet().fromJsonObject(qb,n.size,t);f.getCaptionSet().fromJsonObject(qb,n.caption,t);f.getInfomationSet().fromJsonObject(qb,n.infomation,t)}}function G(){v.call(this);var f=this,h=this.protectedMethod,k,g;this.getChartTypeName=function(){return mb.ChartType_Radar};this.protectedCreateChartProperty=function(){return new ta};this.getDimensionSet=function(){var m=f.getChartProperty().getOuterCircle()==ta.OUTER_CIRCLE_MEASURE;k||(k=h.createItemModelSet(!0,
!0));k.setItemCountMin(m?0:1);return k};this.getMeasureSet=function(){g||(g=h.createItemModelSet(!0,!0));return g};this.protectedCheckAllFieldsProblemImpl=function(){for(var m=f.getDimensionSet(),r=f.getMeasureSet(),w=f.getChartProperty().getOuterCircle()==ta.OUTER_CIRCLE_DIMENSION,n=1<m.getItemModelCount(),t=!1,B=0;B<r.getItemModelCount();B++){var A=r.getItemModel(B);A=A.getSquareField();var E=!1,F=null;A.isMeasure()?(w&&n&&t&&(E=!0,F=Ub.get("seriesConflictPrompt","\u5df2\u4f7f\u7528\u7ef4\u5ea6\u503c\u8868\u793a\u591a\u4e2a\u7cfb\u5217\uff0c\u4e0d\u80fd\u540c\u65f6\u51fa\u73b0\u591a\u4e2a\u5ea6\u91cf\u3002")),
t=!0):(E=!0,F=Ub.get("onlyMeasureAllowed","\u6b64\u5904\u53ea\u80fd\u51fa\u73b0\u5ea6\u91cf\u3002"));var z=new Oa.InvalidPrompt;z.setLevel(qb.InvalidPrompt_LEVEL_BAD_USAGE,E);z.setPromptText(F);A.setInvalidPrompt(z)}r=w?2:1;for(B=0;B<m.getItemModelCount();B++)A=m.getItemModel(B),A=A.getSquareField(),E=!1,F=null,A.isMeasure()?(E=!0,F=Ub.get("onlyDimensionAllowed","\u6b64\u5904\u53ea\u80fd\u51fa\u73b0\u7ef4\u5ea6\u3002")):(0>=r&&(F=Ub.get("exceedCountLimit","\u8d85\u51fa\u4e2a\u6570\u9650\u5236"),E=
!0),r--),z=new Oa.InvalidPrompt,z.setLevel(qb.InvalidPrompt_LEVEL_BAD_USAGE,E),z.setPromptText(F),A.setInvalidPrompt(z)};this.protectedGetAllItemModelSet=function(){return[f.getDimensionSet(),f.getMeasureSet()]};this.protectedToJsonObject=function(m){m.dimension=f.getDimensionSet().toJsonObject();m.measure=f.getMeasureSet().toJsonObject()};this.protectedFromJsonObject=function(m,r){f.getDimensionSet().fromJsonObject(qb,m.dimension,r);f.getMeasureSet().fromJsonObject(qb,m.measure,r)}}function T(){v.call(this);
var f=this.protectedMethod,h=this,k,g,m;this.getDimension=function(){m||(m=f.createItemModelSet(!1,!1));return m};this.getDesired=function(){k||(k=f.createItemModelSet(!1,!0));return k};this.getCompleted=function(){g||(g=f.createItemModelSet(!1,!0));return g};this.protectedCheckAllFieldsProblemImpl=function(){f.checkProblemWithOnlyMeasureAllowed(h.getDesired());f.checkProblemWithOnlyMeasureAllowed(h.getCompleted());f.checkProblemWithOnlyDimensionAllowed(h.getDimension())};this.protectedToJsonObject=
function(r){r.desired=h.getDesired().toJsonObject();r.completed=h.getCompleted().toJsonObject();r.dimension=h.getDimension().toJsonObject()};this.protectedFromJsonObject=function(r,w){h.getDimension().fromJsonObject(qb,r.dimension,w);h.getDesired().fromJsonObject(qb,r.desired,w);h.getCompleted().fromJsonObject(qb,r.completed,w)};this.protectedGetAllItemModelSet=function(){return[h.getDimension(),h.getDesired(),h.getCompleted()]}}function R(){T.call(this);C.call(this);var f=this;this.getChartTypeName=
function(){return mb.ChartType_ProgressBar};this.protectedCreateChartProperty=function(){return new Da};this.getBeRolledSet=function(){return f.getDimension()};this.getXAxis=function(){var h=new sb,k=f.getCompleted().getItemModel(0),g=f.getDesired().getItemModel(0);g&&h.addItemModel(g);k&&h.addItemModel(k);return h}}function S(){T.call(this);C.call(this);var f=this;this.getChartTypeName=function(){return mb.ChartType_ProgressColumn};this.protectedCreateChartProperty=function(){return new na};this.getBeRolledSet=
function(){return f.getDimension()};this.getYAxis=function(){var h=new sb,k=f.getCompleted().getItemModel(0),g=f.getDesired().getItemModel(0);g&&h.addItemModel(g);k&&h.addItemModel(k);return h}}function ca(){T.call(this);C.call(this);this.getChartTypeName=function(){return mb.ChartType_ProgressCircle};this.protectedCreateChartProperty=function(){var f=new l;f.setShowLegend(oa.ShowLegend_Bottom);return f}}function H(){v.call(this);C.call(this);var f=this,h=this.protectedMethod,k;this.getChartTypeName=
function(){return mb.ChartType_Dial};this.protectedCreateChartProperty=function(){return new ba};this.getMeasureSet=function(){k||(k=h.createItemModelSet(!1,!0));return k};this.protectedCheckAllFieldsProblemImpl=function(){h.checkProblemWithOnlyMeasureAllowed(f.getMeasureSet())};this.protectedGetAllItemModelSet=function(){return[f.getMeasureSet()]};this.protectedToJsonObject=function(g){g.measure=f.getMeasureSet().toJsonObject()};this.protectedFromJsonObject=function(g,m){f.getMeasureSet().fromJsonObject(qb,
g.measure,m)}}function I(){v.call(this);C.call(this);var f=this,h=this.protectedMethod,k,g,m,r,w;this.getChartTypeName=function(){return mb.ChartType_Composite};this.getBeRolledSet=function(){return f.getXAxis()};this.protectedCreateChartProperty=function(){return new W};this.getXAxis=function(){k||(k=h.createItemModelSet(!1,!1));return k};this.getLeftYAxis=function(){g||(g=h.createItemModelSet(!0,!0));return g};this.getRightYAxis=function(){m||(m=h.createItemModelSet(!0,!0));return m};this.getLeftSeries=
function(){r||(r=h.createItemModelSet(!1,!1));return r};this.getRightSeries=function(){w||(w=h.createItemModelSet(!1,!1));return w};this.protectedGetAllItemModelSet=function(){return[f.getXAxis(),f.getLeftYAxis(),f.getRightYAxis(),f.getLeftSeries(),f.getRightSeries()]};this.protectedCheckAllFieldsProblemImpl=function(){h.checkProblemWithOnlyDimensionAllowed(f.getXAxis());h.checkProblemWithOnlyMeasureAllowed(f.getLeftYAxis());h.checkProblemWithOnlyMeasureAllowed(f.getRightYAxis());h.checkProblemWithOnlyDimensionAllowed(f.getLeftSeries());
h.checkProblemWithOnlyDimensionAllowed(f.getRightSeries());h.checkProblemAboutMultiSeriesMeasureSet(f.getLeftSeries(),f.getLeftYAxis());h.checkProblemAboutMultiSeriesMeasureSet(f.getRightSeries(),f.getRightYAxis())};this.protectedToJsonObject=function(n){n.xAxis=f.getXAxis().toJsonObject();n.leftYAxis=f.getLeftYAxis().toJsonObject();n.leftSeries=f.getLeftSeries().toJsonObject();n.rightYAxis=f.getRightYAxis().toJsonObject();n.rightSeries=f.getRightSeries().toJsonObject()};this.protectedFromJsonObject=
function(n,t){f.getXAxis().fromJsonObject(qb,n.xAxis,t);f.getLeftYAxis().fromJsonObject(qb,n.leftYAxis,t);f.getLeftSeries().fromJsonObject(qb,n.leftSeries,t);f.getRightYAxis().fromJsonObject(qb,n.rightYAxis,t);f.getRightSeries().fromJsonObject(qb,n.rightSeries,t)}}function M(){v.call(this);C.call(this);var f=this,h=this.protectedMethod,k;this.getChartTypeName=function(){return mb.ChartType_Grid};this.protectedCreateChartProperty=function(){return new aa};this.getColumnSet=function(){k||(k=h.createItemModelSet(!0,
!0),k.setItemCountMax(20));return k};this.protectedGetAllItemModelSet=function(){return[f.getColumnSet()]};this.protectedCheckAllFieldsProblemImpl=function(){for(var g=f.getColumnSet(),m=0;m<g.getItemModelCount();m++){var r=new Oa.InvalidPrompt;r.setLevel(qb.InvalidPrompt_LEVEL_BAD_USAGE,!1);g.getItemModel(m).setInvalidPrompt(r)}};this.protectedToJsonObject=function(g){g.columnSet=f.getColumnSet().toJsonObject()};this.protectedFromJsonObject=function(g,m){f.getColumnSet().fromJsonObject(qb,g.columnSet,
m)}}function K(){v.call(this);C.call(this);var f=this,h=this.protectedMethod,k;this.getChartTypeName=function(){return mb.ChartType_CustomList};this.protectedCreateChartProperty=function(){var g=new la,m=g.getDesigningWidth(),r=4,w=4,n=m-8,t=new d;t.setRectangle(r,w,n,20);t.setFieldIndex(0);t.getCustomStyle().setFontSize(14);t.getCustomStyle().setBold(!0);w=w+20+0;var B=Math.round(.6*m);n=new d;n.setRectangle(r,w,B,20);n.setFieldIndex(1);n.getCustomStyle().setFontSize(12);r=r+B+4;B=m-4-r;m=new d;
m.setRectangle(r,w,B,20);m.setFieldIndex(2);m.getCustomStyle().setAlign("right");m.getCustomStyle().setFontSize(12);r=w+20+4;w=new x;w.setRowHeight(r);w.setContentAreas([t,n,m]);g.setCustomDesign(null,w,null);return g};this.getFieldSet=function(){k||(k=h.createItemModelSet(!0,!0),k.setItemCountMax(20));return k};this.protectedGetAllItemModelSet=function(){return[f.getFieldSet()]};this.protectedCheckAllFieldsProblemImpl=function(){for(var g=f.getFieldSet(),m=0;m<g.getItemModelCount();m++){var r=new Oa.InvalidPrompt;
r.setLevel(qb.InvalidPrompt_LEVEL_BAD_USAGE,!1);g.getItemModel(m).setInvalidPrompt(r)}};this.protectedToJsonObject=function(g){g.fieldSet=f.getFieldSet().toJsonObject()};this.protectedFromJsonObject=function(g,m){f.getFieldSet().fromJsonObject(qb,g.fieldSet,m)}}function ha(){v.call(this);var f=this,h=this.protectedMethod,k,g,m;this.getChartTypeName=function(){return mb.ChartType_Waterfall};this.getStageSet=function(){k||(k=h.createItemModelSet(!1,!1));return k};this.getClauseSet=function(){g||(g=
h.createItemModelSet(!1,!0));return g};this.getMeasureSet=function(){m||(m=h.createItemModelSet(!1,!0));return m};this.protectedCreateChartProperty=function(){return new e};this.protectedCheckAllFieldsProblemImpl=function(){h.checkProblemWithOnlyDimensionAllowed(f.getStageSet());h.checkProblemWithOnlyDimensionAllowed(f.getClauseSet());h.checkProblemWithOnlyMeasureAllowed(f.getMeasureSet())};this.protectedGetAllItemModelSet=function(){return[f.getStageSet(),f.getClauseSet(),f.getMeasureSet()]};this.protectedToJsonObject=
function(r){r.stage=f.getStageSet().toJsonObject();r.clause=f.getClauseSet().toJsonObject();r.measure=f.getMeasureSet().toJsonObject()};this.protectedFromJsonObject=function(r,w){f.getStageSet().fromJsonObject(qb,r.stage,w);f.getClauseSet().fromJsonObject(qb,r.clause,w);f.getMeasureSet().fromJsonObject(qb,r.measure,w)}}function Aa(){v.call(this);C.call(this);var f=this,h=this.protectedMethod,k,g;this.getChartTypeName=function(){return mb.ChartType_Funnel};this.getDimensionSet=function(){k||(k=h.createItemModelSet(!1,
!1));return k};this.getMeasureSet=function(){g||(g=h.createItemModelSet(!0,!0),g.setItemCountMax(10));return g};this.protectedCreateChartProperty=function(){var m=new c;m.setShowLegend(oa.ShowLegend_Non);return m};this.protectedCheckAllFieldsProblemImpl=function(){h.checkProblemWithOnlyDimensionAllowed(f.getDimensionSet());h.checkProblemWithOnlyMeasureAllowed(f.getMeasureSet());h.checkProblemAboutMultiSeriesMeasureSet(f.getDimensionSet(),f.getMeasureSet())};this.protectedGetAllItemModelSet=function(){return[f.getDimensionSet(),
f.getMeasureSet()]};this.protectedCustomLookupLinkageKeyField=function(){var m=null;f.getDimensionSet().traversalItems(function(r){r=r.getSquareField();return r.isDimension()&&!r.isInvalid()?(m=r,!0):!1});return m};this.protectedToJsonObject=function(m){m.dimension=f.getDimensionSet().toJsonObject();m.measure=f.getMeasureSet().toJsonObject()};this.protectedFromJsonObject=function(m,r){f.getDimensionSet().fromJsonObject(qb,m.dimension,r);f.getMeasureSet().fromJsonObject(qb,m.measure,r)}}function Ta(){v.call(this);
var f=this,h=this.protectedMethod,k,g,m,r,w;this.getChartTypeName=function(){return mb.ChartType_Scatter};this.getXAxisFieldSet=function(){!k&&(k=h.createItemModelSet(!1,!1));return k};this.getYAxisFieldSet=function(){!g&&(g=h.createItemModelSet(!1,!1));return g};this.getZAxisFieldSet=function(){!m&&(m=h.createItemModelSet(!1,!1));return m};this.getCategoryFieldSet=function(){!r&&(r=h.createItemModelSet(!1,!1));return r};this.getSeriesFieldSet=function(){!w&&(w=h.createItemModelSet(!1,!1));return w};
this.protectedCreateChartProperty=function(){return new a};this.protectedCheckAllFieldsProblemImpl=function(){h.checkProblemWithOnlyMeasureAllowed(f.getXAxisFieldSet());h.checkProblemWithOnlyMeasureAllowed(f.getYAxisFieldSet());h.checkProblemWithOnlyMeasureAllowed(f.getZAxisFieldSet());h.checkProblemWithOnlyDimensionAllowed(f.getCategoryFieldSet());h.checkProblemWithOnlyDimensionAllowed(f.getSeriesFieldSet())};this.protectedGetAllItemModelSet=function(){return[f.getXAxisFieldSet(),f.getYAxisFieldSet(),
f.getZAxisFieldSet(),f.getCategoryFieldSet(),f.getSeriesFieldSet()]};this.protectedToJsonObject=function(n){n.xAxis=f.getXAxisFieldSet().toJsonObject();n.yAxis=f.getYAxisFieldSet().toJsonObject();n.zAxis=f.getZAxisFieldSet().toJsonObject();n.category=f.getCategoryFieldSet().toJsonObject();n.series=f.getSeriesFieldSet().toJsonObject()};this.protectedFromJsonObject=function(n,t){f.getXAxisFieldSet().fromJsonObject(qb,n.xAxis,t);f.getYAxisFieldSet().fromJsonObject(qb,n.yAxis,t);f.getZAxisFieldSet().fromJsonObject(qb,
n.zAxis,t);f.getCategoryFieldSet().fromJsonObject(qb,n.category,t);f.getSeriesFieldSet().fromJsonObject(qb,n.series,t)}}function db(){v.call(this);var f=this,h=this.protectedMethod,k,g,m;this.getChartTypeName=function(){return mb.ChartType_RectTree};this.getSizeSet=function(){!k&&(k=h.createItemModelSet(!1,!0));return k};this.getDimensionSet=function(){g||(g=h.createItemModelSet(!0,!1),g.setItemCountMax(5));return g};this.getColorSet=function(){!m&&(m=h.createItemModelSet(!1,!1));return m};this.protectedCreateChartProperty=
function(){return new q};this.protectedCheckAllFieldsProblemImpl=function(){h.checkProblemWithOnlyMeasureAllowed(f.getSizeSet());h.checkProblemWithOnlyDimensionAllowed(f.getDimensionSet())};this.protectedGetAllItemModelSet=function(){return[f.getSizeSet(),f.getDimensionSet(),f.getColorSet()]};this.protectedToJsonObject=function(r){r.measure=f.getSizeSet().toJsonObject();r.dimension=f.getDimensionSet().toJsonObject();r.color=f.getColorSet().toJsonObject()};this.protectedFromJsonObject=function(r,w){f.getSizeSet().fromJsonObject(qb,
r.measure,w);f.getDimensionSet().fromJsonObject(qb,r.dimension,w);f.getColorSet().fromJsonObject(qb,r.color,w)}}function jb(){v.call(this);var f=this,h=this.protectedMethod,k,g;this.getChartTypeName=function(){return mb.ChartType_Sunburst};this.getSizeSet=function(){!k&&(k=h.createItemModelSet(!1,!0));return k};this.getDimensionSet=function(){g||(g=h.createItemModelSet(!0,!0),g.setItemCountMin(2),g.setItemCountMax(5));return g};this.protectedCreateChartProperty=function(){var m=new u;m.setShowLegend(oa.ShowLegend_Non);
m.setShowLabel(!0);return m};this.protectedCheckAllFieldsProblemImpl=function(){h.checkProblemWithOnlyMeasureAllowed(f.getSizeSet());h.checkProblemWithOnlyDimensionAllowed(f.getDimensionSet())};this.protectedGetAllItemModelSet=function(){return[f.getSizeSet(),f.getDimensionSet()]};this.protectedToJsonObject=function(m){m.measure=f.getSizeSet().toJsonObject();m.dimension=f.getDimensionSet().toJsonObject()};this.protectedFromJsonObject=function(m,r){f.getSizeSet().fromJsonObject(qb,m.measure,r);f.getDimensionSet().fromJsonObject(qb,
m.dimension,r)}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.square&&(com.kingdee.bos.qing.square={});"undefined"==typeof com.kingdee.bos.qing.square.model&&(com.kingdee.bos.qing.square.model={});var Na=com.kingdee.bos.qing.square.model;Na.SquarePreferences=function(){var f=new Ja,h=new xb;this.getPreviewSetup=
function(){return f};this.setPreviewSetup=function(g){f=g;k(f)};this.addPreviewSetupChangedListener=function(g){h.addListener(g)};this.removePreviewSetupChangedListener=function(g){h.removeListener(g)};var k=function(g){h.fireEvent(function(m){m(g)})};this.toJsonObject=function(){var g={};g.previewSetup=f.toJsonObject();return g};this.fromJsonObject=function(g){(g=g.previewSetup)&&f.fromJsonObject(g)}};Na.PreviewSetupItem=function(f,h,k,g,m,r){var w=this,n;this.getDisplayText=function(){var t=f,B=
w.getPreviewSetup();B.isFullArea()||(t=t+" ("+B.getWidth(),t=t+"*"+B.getHeight(),t+=")");return t};this.getPreviewSetup=function(){n||(n=new Ja,n.fromJsonObject({width:h,height:k,paddingLeft:r,paddingRight:r,paddingTop:g,paddingBottom:m}));return n}};Na.SquareModel=mb;Na.SquareField=qb;Na.FilterItemModel=xa;Na.ItemModelSet=sb;Na.RollInStateItem=eb;Na.AbstractChartProperty=oa;Na.AbstractPieChartProperty=ab;Na.AbstractLineChartProperty=Z;Na.PieChartProperty=kb;Na.RingChartProperty=La;Na.RoseChartProperty=
ob;Na.XSYNChartProperty=pa;Na.YSXNChartProperty=Va;Na.LineChartProperty=Wa;Na.KPIChartProperty=Qa;Na.MapChartProperty=Ga;Na.GISChartProperty=cb;Na.RadarChartProperty=ta;Na.AbstractProgressChartProperty=ja;Na.ProgressBarChartProperty=Da;Na.ProgressColumnChartProperty=na;Na.ProgressCircleChartProperty=l;Na.CompositeChartProperty=W;Na.AbstractListChartProperty=ea;Na.GridChartProperty=aa;Na.CustomListChartProperty=la;Na.WaterfallChartProperty=e;Na.FunnelChartProperty=c;Na.ScatterChartProperty=a;Na.DialChartProperty=
ba;Na.RectTreeChartProperty=q;Na.SunburstChartProperty=u;Na.SortAccording=qa;Na.KPICustomStyles=hb;Na.TooltipsAutoDisplay=Sa;Na.ChartKPI=P;Na.ChartPie=fa;Na.ChartRing=wa;Na.ChartRose=ma;Na.ChartColumn=nb;Na.ChartStackColumn=wb;Na.ChartPercentStackColumn=va;Na.ChartBar=bb;Na.ChartStackBar=Jb;Na.ChartPercentStackBar=Ya;Na.ChartLine=Y;Na.ChartArea=J;Na.ChartPercentArea=N;Na.ChartMap=X;Na.ChartGIS=Q;Na.ChartRadar=G;Na.ChartProgressBar=R;Na.ChartProgressColumn=S;Na.ChartProgressCircle=ca;Na.ChartComposite=
I;Na.ChartGrid=M;Na.ChartCustomList=K;Na.ChartWaterfall=ha;Na.ChartFunnel=Aa;Na.ChartScatter=Ta;Na.ChartDial=H;Na.ChartRectTree=db;Na.ChartSunburst=jb;var xb,Ub,ec,kc,Pb,Qb,ac,bc,Bb,ya,Oa,Ra,Ca,Pa,gb,pb,Cb,Rb,Yb,zb,vb;(function(){var f=com.kingdee.bos.qing.common;xb=f.EventListenerList;f=com.kingdee.bos.qing.framework.common;Ub=f.MultilanguageManager.createPackageAccessor(Na);f=com.kingdee.bos.qing.chart.model;ec=f.AbstractAttr;kc=f.PieAttr;Pb=f.DialAttr;Qb=f.FunnelAttr;ac=f.CustomListAttr;f=com.kingdee.bos.qing.core.model;
bc=f.Meta;Bb=f.MetaField;ya=f.AbstractQingModel;Oa=f.AbstractAnalyticalField;Ra=f.DiscreteFilter;Ca=f.ContinuousFilter;Pa=f.ContinuousDateFilter;gb=f.Refline;pb=f.Palette;Cb=f.ContinuousColor;Rb=f.OutsideReference;Yb=f.BriefOutputableFields;zb=f.LinkTargets;vb=f.CommonStyle})();mb.KEY_CHART_TYPE="chartModelInstance";mb.ChartType_KPI="KPI";mb.ChartType_Pie="Pie";mb.ChartType_Ring="Ring";mb.ChartType_Rose="Rose";mb.ChartType_Column="Column";mb.ChartType_StackedColumn="StackedColumn";mb.ChartType_PercentStackedColumn=
"PercentStackedColumn";mb.ChartType_Bar="Bar";mb.ChartType_StackedBar="StackedBar";mb.ChartType_PercentStackedBar="PercentStackedBar";mb.ChartType_Line="Line";mb.ChartType_Area="Area";mb.ChartType_PercentArea="PercentArea";mb.ChartType_Map="Map";mb.ChartType_GIS="GIS";mb.ChartType_Radar="Radar";mb.ChartType_ProgressBar="ProgressBar";mb.ChartType_ProgressColumn="ProgressColumn";mb.ChartType_ProgressCircle="ProgressCircle";mb.ChartType_Composite="Composite";mb.ChartType_Grid="Grid";mb.ChartType_CustomList=
"CustomList";mb.ChartType_Waterfall="Waterfall";mb.ChartType_Funnel="Funnel";mb.ChartType_Scatter="Scatter";mb.ChartType_Dial="Dial";mb.ChartType_RectTree="RectTree";mb.ChartType_Sunburst="Sunburst";qb.InvalidPrompt_LEVEL_BAD_USAGE=100;qb.InvalidPrompt_LEVEL_TOO_MANY=101;sb.KEY_ADD="ItemModelSet.add";sb.KEY_REMOVE="ItemModelSet.remove";sb.KEY_MOVE="ItemModelSet.move";xa.KEY_FILTER_VALUE="filterValue";Ma.KEY_STATE_CHANGED="rollInStateChanged";var p={Prefix:"P_",NeedRepaint:"_REP",NeedExecute:"_EXE"};
oa.KEY_TITLE=p.Prefix+"title";oa.KEY_SHOW_LABEL=p.Prefix+"showLabel"+p.NeedRepaint;oa.KEY_LABEL_OVERLAPPABLE=p.Prefix+"labelOverlappable"+p.NeedRepaint;oa.KEY_LABEL_FORMAT=p.Prefix+"labelFormat"+p.NeedRepaint;oa.KEY_SHOW_LEGEND=p.Prefix+"showLegend"+p.NeedExecute;oa.KEY_SHOW_DATA_EMPTY_TIPS=p.Prefix+"showDataEmptyTips"+p.NeedExecute;oa.KEY_DESCRIPTION=p.Prefix+"description";oa.KEY_LINKAGE=p.Prefix+"linkage";oa.KEY_DATA_DETAIL=p.Prefix+"dataDetailExamining";oa.KEY_STYLE_SCRIPTS=p.Prefix+"styleScripts"+
p.NeedExecute;oa.KEY_PALETTE=p.Prefix+"palette"+p.NeedExecute;oa.KEY_ANIMATION=p.Prefix+"animation"+p.NeedRepaint;oa.KEY_TOOLTIPS_AUTO_DISPLAY=p.Prefix+"tooltipsAutoDisplay"+p.NeedRepaint;oa.KEY_NEGATIVE=p.Prefix+"negative"+p.NeedExecute;oa.KEY_LEGEND_FORMAT=p.Prefix+"legendFormat"+p.NeedExecute;oa.KEY_CONTINUOUS_COLOR=p.Prefix+"continuousColor"+p.NeedExecute;oa.ShowLegend_Non="NON";oa.ShowLegend_Right="RIGHT";oa.ShowLegend_Bottom="BOTTOM";oa.RulerScale_Auto="AUTO";oa.RulerScale_Linear="LINEAR";oa.RulerScale_Log=
"LOG";oa.RulerStart_Zero="ZERO";oa.RulerStart_Nonzero="NONZERO";oa.ShowDataEmptyTips_Auto="AUTO";oa.ShowDataEmptyTips_Yes="YES";oa.ShowDataEmptyTips_No="NO";Ga.KEY_TEMPLATE_REF=p.Prefix+"mapOutsideReference"+p.NeedRepaint;Ga.KEY_REGION_MAPPING=p.Prefix+"mapRegionMapping"+p.NeedRepaint;cb.KEY_USAGE=p.Prefix+"gisUsage"+p.NeedExecute;cb.KEY_THIRD=p.Prefix+"gisThird"+p.NeedRepaint;cb.KEY_SCRIPT=p.Prefix+"gisScript"+p.NeedRepaint;cb.USAGE_MARKER="MARKER";cb.USAGE_BUBBLE="BUBBLE";Qa.KEY_CAPTION=p.Prefix+
"caption"+p.NeedExecute;Qa.KEY_P_DISPLAY=p.Prefix+"primaryString"+p.NeedExecute;Qa.KEY_S_DISPLAY=p.Prefix+"secondaryString"+p.NeedExecute;Qa.KEY_P_DATA_EMPTY_INSTEAD=p.Prefix+"dataEmptyInstead"+p.NeedExecute;Qa.KEY_P_CUSTOM_STYLES=p.Prefix+"customStyles"+p.NeedExecute;pa.KEY_X_UNIT_TEXT=p.Prefix+"xUnitText"+p.NeedRepaint;pa.KEY_X_ASSISTANT_LINE=p.Prefix+"xAssistantLine"+p.NeedRepaint;pa.KEY_Y_UNIT_TEXT=p.Prefix+"yUnitText"+p.NeedRepaint;pa.KEY_Y_FORMAT=p.Prefix+"yFormat"+p.NeedRepaint;pa.KEY_Y_RULER_SCALE=
p.Prefix+"yRulerScale"+p.NeedRepaint;pa.KEY_Y_RULER_START=p.Prefix+"yRulerStart"+p.NeedRepaint;pa.KEY_REFLINES=p.Prefix+"reflines"+p.NeedExecute;pa.KEY_SORT=p.Prefix+"sort"+p.NeedExecute;Z.KEY_SMOOTH=p.Prefix+"smooth"+p.NeedRepaint;Z.KEY_PAINT_POINT=p.Prefix+"paintPoint"+p.NeedRepaint;Z.KEY_CONNECT_NULL_AS=p.Prefix+"connectNullAs"+p.NeedRepaint;Z.CONNECT_NULL_AS_DIRECTION=0;Z.CONNECT_NULL_AS_ZERO=1;Wa.KEY_TOOLTIPS_SORTED=p.Prefix+"tooltipsSorted"+p.NeedRepaint;Va.KEY_Y_UNIT_TEXT=p.Prefix+"yUnitText"+
p.NeedRepaint;Va.KEY_X_UNIT_TEXT=p.Prefix+"xUnitText"+p.NeedRepaint;Va.KEY_X_FORMAT=p.Prefix+"xFormat"+p.NeedRepaint;Va.KEY_X_RULER_SCALE=p.Prefix+"xRulerScale"+p.NeedRepaint;Va.KEY_X_RULER_START=p.Prefix+"xRulerStart"+p.NeedRepaint;Va.KEY_REFLINES=p.Prefix+"reflines"+p.NeedExecute;Va.KEY_SORT=p.Prefix+"sort"+p.NeedExecute;ab.KEY_TOPN=p.Prefix+"topN"+p.NeedExecute;ab.KEY_LABEL_TYPE=p.Prefix+"labelType"+p.NeedRepaint;ab.KEY_LEGEND_ORDER_MODE=p.Prefix+"legendOrderMode"+p.NeedExecute;ab.SHOW_LABEL_NAME=
1;ab.SHOW_LABEL_NUMBER=2;ab.SHOW_LABEL_PERCENT=4;ab.LegendOrderMode_AUTO="AUTO";ab.LegendOrderMode_VALUE="VALUE";ab.LegendOrderMode_NAME="NAME";La.KEY_SHOW_TOTAL=p.Prefix+"ringShowTotal"+p.NeedRepaint;ob.KEY_AVERAGE_ANGLE=p.Prefix+"roseAverageAngle"+p.NeedRepaint;ta.KEY_RADAR_FORMAT=p.Prefix+"radarAxisFormat"+p.NeedExecute;ta.KEY_OUTER_CIRCLE=p.Prefix+"radarOuterCircle"+p.NeedExecute;ta.KEY_SHOW_RULER_MARK_LABEL=p.Prefix+"radarShowRulerMarkLabel"+p.NeedRepaint;ta.KEY_FILL_COLOR=p.Prefix+"radarFillColor"+
p.NeedRepaint;ta.OUTER_CIRCLE_DIMENSION="dimension";ta.OUTER_CIRCLE_MEASURE="measure";ja.multiExtends=function(f,h){f.call(h);ja.call(h)};ja.KEY_LABEL_TYPE=p.Prefix+"labelType"+p.NeedRepaint;ja.KEY_THICKNESS_PERCENT=p.Prefix+"thicknessPercent"+p.NeedRepaint;ja.SHOW_LABEL_NUMBER=1;ja.SHOW_LABEL_PERCENT=2;l.KEY_PERCENTAGE_DIGIT=p.Prefix+"progressPercentageDigit"+p.NeedRepaint;l.KEY_PERCENTAGE_CEILING=p.Prefix+"progressPercentageCeiling"+p.NeedRepaint;l.KEY_PERCENTAGE_INSTEAD=p.Prefix+"progressPercentageInstead"+
p.NeedRepaint;l.KEY_LABEL_DESC=p.Prefix+"progressLabel"+p.NeedRepaint;l.KEY_LEGEND_FORMAT=p.Prefix+"progressLegendFormat"+p.NeedExecute;ba.KEY_PAN_STYLE=p.Prefix+"dialPanStyle"+p.NeedRepaint;ba.KEY_ARC_DEGREE=p.Prefix+"dialArcDegree"+p.NeedRepaint;ba.KEY_ROTATE_DEGREE=p.Prefix+"dialRotateDegree"+p.NeedRepaint;ba.KEY_SHOW_RULER_MARK_LABEL=p.Prefix+"dialShowRulerMarkLabel"+p.NeedRepaint;ba.KEY_RULER_MARK_FORMAT=p.Prefix+"dialRulerMarkFormat"+p.NeedRepaint;ba.KEY_SHOW_POINTER_LABEL=p.Prefix+"dialShowPointerLabel"+
p.NeedRepaint;ba.KEY_POINTER_NAME=p.Prefix+"dialPointerName"+p.NeedRepaint;ba.KEY_POINTER_NUMBER_FORMAT=p.Prefix+"dialPointerNumberFormat"+p.NeedRepaint;ba.KEY_DATA_EMPTY_INSTEAD=p.Prefix+"dialDataEmptyInstead"+p.NeedExecute;ba.KEY_SECTIONS=p.Prefix+"dialSections"+p.NeedExecute;ba.PAN_STYLE_ONLY_MARK=1;ba.PAN_STYLE_WITH_TRACK=2;W.KEY_LY_UNIT_TEXT=p.Prefix+"leftYUnitText"+p.NeedRepaint;W.KEY_LY_FORMAT=p.Prefix+"leftYFormat"+p.NeedExecute;W.KEY_LY_RULER_SCALE=p.Prefix+"leftYRulerScale"+p.NeedRepaint;
W.KEY_LY_RULER_START=p.Prefix+"leftYRulerStart"+p.NeedRepaint;W.KEY_LEFT_REFLINES=p.Prefix+"leftReflines"+p.NeedExecute;W.KEY_RY_UNIT_TEXT=p.Prefix+"rightYUnitText"+p.NeedRepaint;W.KEY_RY_FORMAT=p.Prefix+"rightYFormat"+p.NeedExecute;W.KEY_RY_RULER_SCALE=p.Prefix+"rightYRulerScale"+p.NeedRepaint;W.KEY_RY_RULER_START=p.Prefix+"rightYRulerStart"+p.NeedRepaint;W.KEY_RIGHT_REFLINES=p.Prefix+"rightReflines"+p.NeedExecute;W.KEY_SORT=p.Prefix+"compositeSort"+p.NeedExecute;ea.KEY_TOP_N=p.Prefix+"listTopN"+
p.NeedExecute;ea.KEY_SORT_FIELD=p.Prefix+"listSortField"+p.NeedExecute;ea.KEY_SORTORD=p.Prefix+"listSortord"+p.NeedExecute;ea.KEY_AUTO_SCROLL=p.Prefix+"listAutoScroll"+p.NeedRepaint;ea.KEY_STICK_ROWS=p.Prefix+"listStickRows"+p.NeedRepaint;ea.KEY_AFFECTIOM_SRC_FIELD=p.Prefix+"listAffctionSrcField";ea.ASCEND_SORT="ascend";ea.DESCEND_SORT="descend";aa.KEY_SHOW_HEADER=p.Prefix+"gridShowHeader"+p.NeedRepaint;aa.KEY_SHOW_ROWNUM=p.Prefix+"gridShowRowNum"+p.NeedExecute;aa.KEY_ROWNUM_TITLE=p.Prefix+"gridIdxColTitle"+
p.NeedExecute;la.KEY_CUSTOM_CONTENT=p.Prefix+"customListContent"+p.NeedExecute;la.KEY_SPLITLINE_COLOR=p.Prefix+"customListSplitLineColor"+p.NeedRepaint;la.KEY_BODY_V_ALIGN=p.Prefix+"customListBodyVAlign"+p.NeedRepaint;la.KEY_BODY_SHARE_TO_ROW=p.Prefix+"customListBodyShareToRow"+p.NeedRepaint;la.BODY_VALIGN_TOP="top";la.BODY_VALIGN_MIDDLE="middle";la.BODY_SHARE_TO_ROW_REDUCABLE="reducable";la.BODY_SHARE_TO_ROW_INCREASABLE="increasable";la.BODY_SHARE_TO_ROW_ADJUSTABLE="adjustable";la.createContentPanelModel=
function(f){var h=new x;f&&h.setRowHeight(f);return h};la.createContentAreaModel=function(){return new d};la.createColorBarModel=function(){return new b};b.from=function(f){var h=new b;h.fromJsonObject(f);return h};e.KEY_SORT_BY_NAME=p.Prefix+"waterfallSortByName"+p.NeedExecute;e.KEY_NEGATIVE_ASC=p.Prefix+"waterfallNegativeAsc"+p.NeedExecute;e.KEY_NEGATIVE_TOP_N=p.Prefix+"waterfallNegativeTopN"+p.NeedExecute;e.KEY_POSITIVE_TOP_N=p.Prefix+"waterfallPositiveTopN"+p.NeedExecute;e.KEY_START_FROM_STAGE=
p.Prefix+"waterfallStartFromStage"+p.NeedExecute;e.KEY_WITHOUT_TOTAL=p.Prefix+"waterfallWithoutTotal"+p.NeedExecute;e.KEY_Y_UNIT_TEXT=p.Prefix+"yUnitText"+p.NeedRepaint;e.KEY_Y_FORMAT=p.Prefix+"yFormat"+p.NeedRepaint;c.KEY_SORT_BY_NAME=p.Prefix+"funnelSortByName"+p.NeedExecute;c.KEY_RATIOBY=p.Prefix+"funnelRatioBy"+p.NeedRepaint;c.KEY_LADDER=p.Prefix+"funnelLadder"+p.NeedRepaint;c.KEY_LABEL_NAME=p.Prefix+"labelNamePosition"+p.NeedRepaint;c.KEY_LABEL_VALUE=p.Prefix+"labelValuePosition"+p.NeedRepaint;
c.KEY_LABEL_RATIO=p.Prefix+"labelRatioPosition"+p.NeedRepaint;c.KEY_RATIO_FORMAT=p.Prefix+"ratioFormat"+p.NeedRepaint;c.RATIO_BY_STEP=1;c.RATIO_BY_START=2;c.RATIO_BY_TOTAL=3;c.LADDER_PERFECT=1;c.LADDER_ACTUAL=2;c.LABEL_POSITION_HIDE=0;c.LABEL_POSITION_LEFT=1;c.LABEL_POSITION_CENTER=2;c.LABEL_POSITION_RIGHT=3;a.KEY_X_FORMAT=p.Prefix+"xFormat"+p.NeedRepaint;a.KEY_X_UNIT_TEXT=p.Prefix+"xUnitText"+p.NeedRepaint;a.KEY_X_RULER_START=p.Prefix+"xRulerStart"+p.NeedRepaint;a.KEY_X_REFLINES=p.Prefix+"xReflines"+
p.NeedExecute;a.KEY_Y_FORMAT=p.Prefix+"yFormat"+p.NeedRepaint;a.KEY_Y_UNIT_TEXT=p.Prefix+"yUnitText"+p.NeedRepaint;a.KEY_Y_RULER_START=p.Prefix+"yRulerStart"+p.NeedRepaint;a.KEY_Y_REFLINES=p.Prefix+"yReflines"+p.NeedExecute})();(function(){"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.square&&(com.kingdee.bos.qing.square={});"undefined"==typeof com.kingdee.bos.qing.square.controller&&(com.kingdee.bos.qing.square.controller={});var Ua=com.kingdee.bos.qing.square.controller;Ua.ActionAddItem=function(){ub.call(this);var xa,
eb,Ma,Ja,oa,ka,Ha,Sa;this.getCaption=function(){return xa};this.setValue=function(qa,Ga,ra,cb,Qa){eb=qa;Ma=Ga;Ja=ra;oa=eb.getItemModelIndex(Ma);(ka=0<=oa)?(xa=Mb.get("moveItem","\u5728#1\u4e2d\u79fb\u52a8#2"),xa=xa.replace("#1",cb),xa=xa.replace("#2",Ma.getSquareField().getComplexText())):(xa=Mb.get("appendItem","\u6dfb\u52a0#1\u5230#2"),xa=xa.replace("#1",Ma.getSquareField().getComplexText()),xa=xa.replace("#2",cb));Ha=Qa};this.perform=function(){Ha&&(Sa=Ha.updateItems([]));ka?da():eb.insertItemModel(Ma,
Ja)};this.unperform=function(){Ha&&Ha.updateItems(Sa);ka?da():eb.removeItemModel(Ma)};var da=function(){var qa=eb.moveItemModel(oa,Ja);oa=qa[0];Ja=qa[1]}};Ua.ActionRemoveItem=function(){ub.call(this);var xa,eb,Ma,Ja,oa,ka;this.getCaption=function(){return xa};this.setValue=function(Ha,Sa,da,qa){eb=Ha;Ma=Sa;da&&(xa=Mb.get("removeItem","\u4ece#1\u5220\u9664#2"),xa=xa.replace("#1",da),xa=xa.replace("#2",Ma.getSquareField().getComplexText()));oa=qa};this.perform=function(){oa&&(ka=oa.updateItems([]));
Ja=eb.getItemModelIndex(Ma);eb.removeItemModel(Ma)};this.unperform=function(){oa&&oa.updateItems(ka);eb.insertItemModel(Ma,Ja)}};Ua.ActionClearAll=function(){ub.call(this);var xa=this,eb,Ma,Ja;this.getCaption=function(){return eb};this.setValue=function(oa,ka,Ha){eb=Ha;Ma=oa;Ha=new qb;oa=ka(Ha.getChartTypeName());Ha=oa.willTransform(Ha);oa=Ma.getChart();oa=ka(oa.getChartTypeName());Ja=oa.transform(Ha)};this.perform=function(){var oa=Ma.getChart();Ma.setChart(Ja);Ja=oa};this.unperform=function(){xa.perform()}};
Ua.ActionRollIn=function(){ub.call(this);var xa,eb,Ma,Ja,oa,ka;this.getCaption=function(){return xa};this.setValue=function(Ha,Sa,da,qa,Ga){xa=Mb.get("rollInTo","\u4e0b\u94bb#1\u5230\uff1a#2");xa=xa.replace("#1",Ha?Ha.getComplexText():"");xa=xa.replace("#2",qa?qa:Mb.get("rollInToNext","\u4e0b\u4e00\u5c42"));eb=Sa;Ja=da;oa=qa;Ma=Ga};this.perform=function(){ka=eb.backupItems();var Ha=0<eb.getItemCount()?eb.getItem(eb.getItemCount()-1):null,Sa=[];Ha&&Ha.isPcdNextLevel()||(Ha=new sb,Sa=[Ha]);Ha.setPcdNextLevel(Ma);
Ha.addOneLevel(Ja,oa);eb.rollIn(Sa)};this.unperform=function(){eb.restoreItems(ka);ka=null}};Ua.ActionRollOut=function(){ub.call(this);var xa,eb,Ma,Ja,oa;this.getCaption=function(){return xa};this.setValue=function(ka,Ha,Sa,da){xa=Mb.get("rollOutTo","\u4e0a\u5377\u56de#1");xa=xa.replace("#1",ka?ka.getComplexText():0==Sa?Mb.get("rollOutToTop","\u9876\u5c42"):"");eb=Ha;Ma=Sa;Ja=da};this.perform=function(){oa=eb.backupItems();eb.rollOut(Ma,Ja)};this.unperform=function(){eb.restoreItems(oa);oa=null}};
Ua.ActionAppendAllNecessaryDimensions=function(){mb.call(this);var xa=this.protectedMethod,eb,Ma;this.setValue=function(Ja,oa){eb=oa.getFilterSet();Ma=[];oa=oa.getUsingMetaFields(Ja);xa.visitMissingNecessaryDimensions(Ja,oa,function(ka){var Ha=new Vb,Sa=new Lb;Sa.setSquareField(Ha);Sa.setFilter(ka);Ma.push(Sa);return Ha})};this.perform=function(){eb.appendItemModels(Ma)};this.unperform=function(){eb.removeItemModels(Ma)}};var Mb,ub,mb,qb,sb,Vb,Lb;(function(){var xa=com.kingdee.bos.qing.framework.common;
Mb=xa.MultilanguageManager.createPackageAccessor(Ua);xa=com.kingdee.bos.qing.core.controller;ub=xa.AbstractAction;mb=xa.AbstractActionAppendAllNecessaryDimensions;xa=com.kingdee.bos.qing.square.model;qb=xa.ChartColumn;sb=xa.RollInStateItem;Vb=xa.SquareField;Lb=xa.FilterItemModel})()})();(function(){function Ua(){var p=this,f,h,k,g,m=[];this.setSquareModel=function(Fa){f&&f.removeModelChangedListener(n);(f=Fa)&&f.addModelChangedListener(n);h&&h.removeChangedListener(t);(h=Fa?Fa.getChart().getChartProperty():null)&&h.addChangedListener(t)};this.setGlobalDependence=function(Fa){k=Fa};var r=function(Fa,yb){return k.createFacade(Fa,yb)},w=function(){return k.getMeta()};this.getJqUi=function(){if(!g){g=$("<div>");g.addClass("square-property-pane");p.protectedInitUi(g);var Fa=[];f.getChart().isDataExaminingSupported()&&
Fa.push("dataDetail");va.isDesigntimeSupported()&&f.getChart().isLinkageSupported()&&Fa.push("linkTargets");0<Fa.length&&(Fa=B(l.get("dataAssociation","\u6570\u636e\u7a7f\u900f"),Fa),g.append(Fa.createJqUi()));Fa=B(l.get("common","\u901a\u7528"),["showDataEmptyTips","description"]);g.append(Fa.createJqUi())}return g};this.protectedInitUi=function(Fa){throw Error("Override me");};var n=function(Fa){if(f)for(var yb=0;yb<m.length;yb++)m[yb].careForSquareModelChanged(Fa)},t=function(Fa,yb){for(var Hb=
0;Hb<m.length;Hb++){var Gb=m[Hb];Fa==Gb.getPropertyKey()&&Gb.updateEditor();Gb.careForPropertyChanged(Fa,yb)}},B=function(Fa,yb){var Hb=new Ma;Hb.setTitle(Fa);for(Fa=0;Fa<yb.length;Fa++){var Gb=yb[Fa];switch(Gb){case "showLabel":var Nb=h;Gb=l.get("dataLabel","\u6570\u636e\u6807\u7b7e");var $b=E();L($b,Gb,Na.KEY_SHOW_LABEL,Nb.isShowLabel,Nb.setShowLabel);Nb=$b;break;case "labelOverlappable":Nb=za(h);break;case "labelFormat":Nb=Za(h);break;case "showLegend":Nb=h;Gb=l.get("legendPosition","\u4f4d\u7f6e");
$b=F([Na.ShowLegend_Non,Na.ShowLegend_Right,Na.ShowLegend_Bottom],sa);L($b,Gb,Na.KEY_SHOW_LEGEND,Nb.getShowLegend,Nb.setShowLegend);Nb=$b;break;case "showDataEmptyTips":Nb=h;Gb=l.get("showDataEmptyTips","\u65e0\u6570\u636e\u65f6\u63d0\u793a");$b=F([Na.ShowDataEmptyTips_Auto,Na.ShowDataEmptyTips_Yes,Na.ShowDataEmptyTips_No],Ba);L($b,Gb,Na.KEY_SHOW_DATA_EMPTY_TIPS,Nb.getShowDataEmptyTips,Nb.setShowDataEmptyTips);Nb=$b;break;case "description":Nb=h;Gb=l.get("introduction","\u5361\u7247\u8bf4\u660e");
$b=A();L($b,Gb,Na.KEY_DESCRIPTION,Nb.getDescription,Nb.setDescription);Nb=$b;break;case "linkTargets":Nb=lb(h);break;case "dataDetail":Nb=O(h);break;case "conditionStyle":Nb=h;Gb=l.get("conditionStyle","\u6761\u4ef6\u6837\u5f0f");$b=new Va;L($b,Gb,Na.KEY_STYLE_SCRIPTS,Nb.getStyleScripts,Nb.setStyleScripts);Nb=$b;break;case "palette":Nb=D(h,f.getChart());break;case "ignoreNegative":Nb=V(h);break;case "animation":Nb=h;Gb=l.get("animation","\u52a8\u753b");$b=E();L($b,Gb,Na.KEY_ANIMATION,Nb.isAnimation,
Nb.setAnimation);Nb=$b;break;default:if(Nb=p.protectedCreateEditItem(Gb,h),!Nb)throw Error("Unknown key of EditItem: "+Gb);}Nb.setCommandManager(k.getCommandManager());Hb.addEditItem(Nb);m.push(Nb)}return Hb},A=function(){var Fa=new ka;Fa.setMultiLine(!0);return Fa},E=function(){return new Ha},F=function(Fa,yb,Hb){var Gb=new da;Gb.setSelectable(Fa,Hb,yb);return Gb},z=function(Fa){var yb=new cb;Fa&&yb.setDisplayForEmpty(Fa);return yb},L=function(Fa,yb,Hb,Gb,Nb){Fa.setPropertyKey(Hb);Fa.setCaption(yb);
Fa.setMethod(Gb,Nb)},ia=function(Fa,yb){Fa.setVisible(yb)};this.protectedCreateEditItem=function(Fa,yb){return null};var za=function(Fa){var yb=l.get("dataLabelOverlappable","\u6807\u7b7e\u5141\u8bb8\u91cd\u53e0"),Hb=E();L(Hb,yb,Na.KEY_LABEL_OVERLAPPABLE,Fa.isDataLabelOverlappable,Fa.setDataLabelOverlappable);Hb.addCareForBrotherListener(function(Gb,Nb,$b){Nb==Na.KEY_SHOW_LABEL&&Gb.setVisible($b?!0:!1)});ia(Hb,Fa.isShowLabel());return Hb},Za=function(Fa){var yb=l.get("dataLabelFormat","\u6807\u7b7e\u6570\u503c\u683c\u5f0f"),
Hb=l.get("dataLabelFormatFollowAxis","\u8ddf\u968f\u6570\u8f74");Hb=z(Hb);L(Hb,yb,Na.KEY_LABEL_FORMAT,Fa.getLabelFormat,Fa.setLabelFormat);Hb.addCareForBrotherListener(function(Gb,Nb,$b){Nb==Na.KEY_SHOW_LABEL&&Gb.setVisible($b?!0:!1)});ia(Hb,Fa.isShowLabel());return Hb},lb=function(Fa){var yb=l.get("linkage","\u8054\u67e5\u76ee\u6807"),Hb=new Qa;L(Hb,yb,Na.KEY_LINKAGE,Fa.getLinkTargets,Fa.setLinkTargets);Hb.setUsableChecker(function(){if(!w().isNormalSrcMode()){var Gb=C.createFeedbackDialog();Gb.setOptionType(C.OPTION_OK);
Gb.setMsgImageType(C.MSG_WARNING);Gb.setMessage(l.get("linkageDisabledPrompt","\u5f53\u524d\u6570\u636e\u6e90\u7c7b\u578b\u4e0d\u652f\u6301\u5355\u636e\u8054\u67e5\u3002"));Gb.showDialog();return!1}return!0});return Hb},O=function(Fa){var yb=l.get("dataExamining","\u67e5\u770b\u660e\u7ec6"),Hb=F([!1,!0],function(Gb,Nb,$b){Gb=$b?Gb?l.get("dataExaminingDescription","\u652f\u6301\u70b9\u51fb\u67e5\u770b"):l.get("dataExaminingOn","\u5f00\u542f"):Gb?l.get("itemEmpty","\u672a\u8bbe\u7f6e"):l.get("dataExaminingOff",
"\u5173\u95ed");Nb.text(Gb)});L(Hb,yb,Na.KEY_DATA_DETAIL,Fa.isDataDetailExamining,Fa.setDataDetailExamining);return Hb},D=function(Fa,yb){var Hb=l.get("palette","\u8c03\u8272\u677f"),Gb=new Fb;L(Gb,Hb,Na.KEY_PALETTE,function(){var $b=null,nc=Nb();nc&&(nc=nc.getDiscreteColor())&&($b=nc.getPaletteMapping());return[Fa.getPalette(),$b]},function($b){var nc=$b[0];$b=$b[1];var Ob=Nb();if(Ob){var tb=null;$b&&(tb=new G,tb.setPaletteMapping($b));Ob.setDiscreteColor(tb)}Fa.setPalette(nc)});Gb.setPresetPaletteGetter(function($b){switch(f.getChart().getChartTypeName()){case ha.ChartType_Line:case ha.ChartType_Radar:var nc=
"contrastingLine";break;case ha.ChartType_GIS:case ha.ChartType_Scatter:nc="contrastingArea";break;default:nc="base"}r($b).getPresetPalettes("chartPalette",nc)});var Nb=function(){var $b=null;p.protectedGetColorFieldSetForPalette(yb).traversalItems(function(nc){var Ob=!1;!nc.isInvalid()&&nc.isDimension()&&($b=nc,Ob=!0);return Ob});return $b};Gb.bindColorFieldAsker({isColorFieldExist:function(){return Nb()?!0:!1},getMemberTextGetter:function(){return function($b){var nc=Nb();r(function(Ob){var tb=
[];Ob=R.create(Ob).getItems();for(var Xb=0;Xb<Ob.length;Xb++){var Zb=Ob[Xb];Zb=Zb.isValueNull()||""==Zb.getValue()?"":Zb.getDisplayText();tb.push(Zb)}$b(tb)}).getSquareFilterPreparedValue(w(),f,null,nc,null)}},getOtherFieldWithColor:function(){var $b=Nb(),nc=null;f.getChart().lookupAllItemModelSet(function(Ob){var tb=!1;Ob=Ob.getSquareField();Ob!=$b&&Ob.getDiscreteColor()&&(nc=Ob,tb=!0);return tb});return nc}});return Gb};this.protectedGetColorFieldSetForPalette=function(Fa){throw Error("Implement");
};var V=function(Fa){var yb=l.get("negativeAs","\u8d1f\u6570"),Hb=F([!1,!0],function(Gb,Nb,$b){Gb=$b?l.get("negativeAsNone","\u5ffd\u7565"):l.get("negativeAsAbs","\u6309\u7edd\u5bf9\u503c\u8ba1\u7b97");Nb.text(Gb)});L(Hb,yb,Na.KEY_NEGATIVE,Fa.isIgnoreNegative,Fa.setIgnoreNegative);return Hb},sa=function(Fa,yb,Hb){switch(Hb){case Na.ShowLegend_Non:Fa=l.get("legendHide","\u9690\u85cf");break;case Na.ShowLegend_Right:Fa=l.get("legendRight","\u53f3\u4fa7");break;case Na.ShowLegend_Bottom:Fa=l.get("legendBottom",
"\u5e95\u90e8");break;default:Fa=Hb}yb.text(Fa)},Ba=function(Fa,yb,Hb){switch(Hb){case Na.ShowDataEmptyTips_Auto:Fa=l.get("showDataEmptyTipsAuto","\uff08\u6309\u56fe\u8868\uff09\u81ea\u52a8");break;case Na.ShowDataEmptyTips_Yes:Fa=l.get("showDataEmptyTipsYes","\u5f00");break;case Na.ShowDataEmptyTips_No:Fa=l.get("showDataEmptyTipsNo","\u5173");break;default:Fa=Hb}yb.text(Fa)};this.protectedMethod={appendCard:function(Fa,yb,Hb){yb=B(yb,Hb);Fa.append(yb.createJqUi())},createCard:B,initEditItem:L,syncEditItemVisible:ia,
createTextEditItem:function(){return new oa},createPopupTextEditItem:function(){return new ka},createPopupTextAreaEditItem:A,createBooleanEditItem:E,createNumberEditItem:function(Fa,yb,Hb){var Gb=new Sa;Gb.setConstraint(Fa,yb,Hb);return Gb},createFloatNumberEditItem:function(Fa,yb,Hb){Fa=void 0===Fa?-999999999999999:Fa;yb=void 0===yb?999999999999999:yb;Hb=void 0===Hb?1:Hb;var Gb=new Sa;Gb.setConstraint(Fa,yb,Hb);Gb.getCtrl().setAcceptEditingDecorator(function(Nb){return Nb});return Gb},createSelectableEditItem:F,
createNumberFormatEditItem:z,createItemPalette:D,createFacade:r,getMeta:w,getSquareModel:function(){return f},getGlobal:function(){return k}}}function Mb(){var p=this,f=this.protectedMethod;this.protectedInitLegendFormatEditItem=function(m,r){m.addCareForModelChangedListener(function(w,n){k(n,w,r)});g(p.protectedGetColorFieldSet(),m,r)};this.protectedInitContinuousColorEditItem=function(m,r){m.addCareForModelChangedListener(function(w,n){k(n,w,r)});g(p.protectedGetColorFieldSet(),m,r)};var h=function(m,
r){m.addCareForModelChangedListener(function(w,n){k(n,w,r)});g(p.protectedGetColorFieldSet(),m,r)},k=function(m,r,w){var n=p.protectedGetColorFieldSet();m.isContainItemModelSet(n)&&g(n,r,w)},g=function(m,r,w){var n=!1;m.traversalItems(function(t){var B=!1;t.isInvalid()||(n=t.isMeasure(),B=!0);return B});w(r,n)};this.protectedGetColorFieldSet=function(){throw Error("Implement");};this.protectedMethod.createEditItemWithMixColorMode=function(m,r){switch(m){case "legendFormat":m=l.get("numberFormat",
"\u6570\u5b57\u683c\u5f0f");var w=l.get("numberFormatFollowField","\u8ddf\u968f\u5ea6\u91cf\u5b57\u6bb5");w=f.createNumberFormatEditItem(w);f.initEditItem(w,m,Na.KEY_LEGEND_FORMAT,r.getLegendFormat,r.setLegendFormat);p.protectedInitLegendFormatEditItem(w,function(n,t){n.setVisible(t)});break;case "continuousColor":m=l.get("palette","\u8c03\u8272\u677f");w=new kb;w.setFacadeCreator(f.createFacade);f.initEditItem(w,m,Na.KEY_CONTINUOUS_COLOR,r.getContinuousColor,r.setContinuousColor);p.protectedInitContinuousColorEditItem(w,
function(n,t){n.setVisible(t)});break;case "discreteColor":w=f.createItemPalette(r,f.getSquareModel().getChart()),h(w,function(n,t){n.setVisible(!t)})}return w}}function ub(){function p(){Ja.call(this);var k=this.protectedMethod,g,m;this.protectedCreateEditorJqUi=function(w){g=new ea;g.setChecked(w?!0:!1);g.addCheckedListener(r);return g.getJqUi()};this.updateEditor=function(){if(!m){var w=k.getOriValue();g.setChecked(w?!0:!1)}};var r=function(w,n){n&&(m=!0,w=g.isChecked()?new Ta:null,k.actionPerformed(w),
m=!1)}}var f=this.protectedMethod,h=function(k){var g=function(n,t){n.setVisible(t&&0<t.getDuration())},m=Na.KEY_TOOLTIPS_AUTO_DISPLAY,r=l.get("tooltipsAutoDisplayDuration","\u6bcf\u9879\u65f6\u957f(\u79d2)"),w=f.createNumberEditItem(1,10,1);f.initEditItem(w,r,m,function(){var n=k.getTooltipsAutoDisplay();return n?n.getDuration():1},function(n){var t=new Ta;t.setDuration(n);k.setTooltipsAutoDisplay(t)});w.addCareForBrotherListener(function(n,t,B){t==m&&g(n,B)});g(w,k.getTooltipsAutoDisplay());return w};
this.protectedMethod.createEditItemWithTooltipsAutoDisplay=function(k,g){var m=null;switch(k){case "tooltipsAutoDisplay":k=l.get("tooltipsAutoDisplayOn","\u81ea\u52a8\u5c55\u793a");m=new p;f.initEditItem(m,k,Na.KEY_TOOLTIPS_AUTO_DISPLAY,g.getTooltipsAutoDisplay,g.setTooltipsAutoDisplay);break;case "tooltipsAutoDisplayDuration":m=h(g)}return m}}function mb(){var p=this.protectedMethod,f=function(k,g,m){switch(m){case Na.RulerScale_Auto:k=l.get("rulerScaleAuto","\u81ea\u52a8\u8bc6\u522b");break;case Na.RulerScale_Linear:k=
l.get("rulerScaleLinear","\u7ebf\u6027");break;case Na.RulerScale_Log:k=l.get("rulerScaleLog","\u5bf9\u6570");break;default:k=m}g.text(k)},h=function(k,g,m){g.text(m?l.get("topnOthersAsAnItem","\u5408\u5e76\u6210\u4e00\u9879"):l.get("topnOthersNone","\u4e0d\u663e\u793a"))};p.createReflinesEditItem=function(){return new ab};p.createRulerScaleEditItem=function(){return p.createSelectableEditItem([Na.RulerScale_Linear,Na.RulerScale_Log,Na.RulerScale_Auto],f)};p.createRulerScopeEditItem=function(){return new Ka};
p.createOrderEditItem=function(k,g){var m=l.get("order","\u6392\u5e8f"),r=p.createSelectableEditItem(["null","true","false"],function(w,n,t){w="true"===t?l.get("orderAsc","\u5347\u5e8f"):"false"===t?l.get("orderDesc","\u964d\u5e8f"):l.get("orderNone","(\u65e0)");n.text(w)});p.initEditItem(r,m,g,function(){var w=k.getSort();return w.isOrderByMeasure()?w.isAsc()?"true":"false":"null"},function(w){var n="null"===w?!1:!0;w="true"===w?!0:!1;k.getSort().setOrder(n,w)});return r};p.createSortAccordingEditItem=
function(k,g){k=k.getSort();var m=l.get("sortAccording","\u6392\u5e8f\u4f9d\u636e"),r=new Ga;p.initEditItem(r,m,g,k.getSortAccording,k.setSortAccording);r.setModelContext(p.getMeta,p.getSquareModel().getChart());r.addCareForBrotherListener(function(w,n,t){n==g&&w.setVisible(t.isOrderByMeasure())});r.setVisible(k.isOrderByMeasure());return r};p.createTopnSwitchEditItem=function(k,g){k=k.getSort();var m=l.get("topN","\u524dN\u9879"),r=p.createBooleanEditItem();p.initEditItem(r,m,g,k.isTopnSwitch,k.setTopnSwitch);
r.addCareForBrotherListener(function(w,n,t){n==g&&w.setVisible(t.isOrderByMeasure())});r.setVisible(k.isOrderByMeasure());return r};p.createTopnItemsEditItem=function(k,g){var m=function(n,t){n.setVisible(t.isOrderByMeasure()&&t.isTopnSwitch())};k=k.getSort();var r=l.get("topnItems","\u6761\u76ee\u6570"),w=p.createNumberEditItem(1,100,1);p.initEditItem(w,r,g,k.getTopnItems,k.setTopnItems);w.addCareForBrotherListener(function(n,t,B){t==g&&m(n,B)});m(w,k);return w};p.createTopnOthersEditItem=function(k,
g){var m=function(n,t){n.setVisible(t.isOrderByMeasure()&&t.isTopnSwitch())};k=k.getSort();var r=l.get("topnOthers","\u5176\u5b83\u6761\u76ee"),w=p.createSelectableEditItem([!1,!0],h);p.initEditItem(w,r,g,k.isOthersAsAnItem,k.setOthersAsAnItem);w.addCareForBrotherListener(function(n,t,B){t==g&&m(n,B)});m(w,k);return w}}function qb(){mb.call(this);var p=this.protectedMethod;this.protectedGetColorFieldSetForPalette=function(k){return k.getSeries()};var f=this.protectedCreateEditItem;this.protectedCreateEditItem=
function(k,g){switch(k){case "xUnitText":k=l.get("axisUnit","\u6807\u9898/\u5355\u4f4d");var m=p.createTextEditItem();p.initEditItem(m,k,Pb.KEY_X_UNIT_TEXT,g.getXUnitText,g.setXUnitText);break;case "xAssistantLine":k=l.get("axisAssistantLine","\u7f51\u683c\u7ebf");m=p.createBooleanEditItem();p.initEditItem(m,k,Pb.KEY_X_ASSISTANT_LINE,g.isXShowAssistantLine,g.setXShowAssistantLine);break;case "yUnitText":k=l.get("axisUnit","\u6807\u9898/\u5355\u4f4d");m=p.createTextEditItem();p.initEditItem(m,k,Pb.KEY_Y_UNIT_TEXT,
g.getYUnitText,g.setYUnitText);break;case "yRulerScale":k=l.get("rulerScale","\u6807\u5c3a\u6bd4\u4f8b");m=p.createRulerScaleEditItem();p.initEditItem(m,k,Pb.KEY_Y_RULER_SCALE,g.getYRulerScale,g.setYRulerScale);break;case "yRulerStart":k=l.get("rulerScope","\u6570\u8f74\u8303\u56f4");m=p.createRulerScopeEditItem();p.initEditItem(m,k,Pb.KEY_Y_RULER_START,g.getYRulerScope,g.setYRulerScope);break;case "yFormat":k=l.get("numberFormat","\u6570\u5b57\u683c\u5f0f");m=l.get("numberFormatFollowField","\u8ddf\u968f\u5ea6\u91cf\u5b57\u6bb5");
m=p.createNumberFormatEditItem(m);p.initEditItem(m,k,Pb.KEY_Y_FORMAT,g.getYFormat,g.setYFormat);break;case "reflines":k=l.get("refline","\u53c2\u8003\u7ebf");m=p.createReflinesEditItem();p.initEditItem(m,k,Pb.KEY_REFLINES,g.getReflines,g.setReflines);m.setMeasureFieldsGetter(h);break;case "order":m=p.createOrderEditItem(g,Pb.KEY_SORT);break;case "sortAccording":m=p.createSortAccordingEditItem(g,Pb.KEY_SORT);break;case "topNSwitch":m=p.createTopnSwitchEditItem(g,Pb.KEY_SORT);break;case "topNItems":m=
p.createTopnItemsEditItem(g,Pb.KEY_SORT);break;case "topNOthers":m=p.createTopnOthersEditItem(g,Pb.KEY_SORT);break;default:m=f(k,g)}return m};var h=function(){for(var k=[],g=p.getSquareModel().getChart().getYAxis(),m=0,r=g.getItemModelCount();m<r;m++){var w=g.getItemModel(m);w.isMeasure()&&k.push(w)}return k}}function sb(){var p=this.protectedMethod;p.createSmoothEditItem=function(f){var h=l.get("lineSmooth","\u5e73\u6ed1\u66f2\u7ebf"),k=p.createBooleanEditItem();p.initEditItem(k,h,Ub.KEY_SMOOTH,
f.isSmooth,f.setSmooth);return k};p.createPaintPointEditItem=function(f,h){var k=l.get("linePoint","\u6298\u7ebf\u6570\u636e\u70b9"),g=p.createBooleanEditItem();p.initEditItem(g,k,Ub.KEY_PAINT_POINT,function(){return f.isPaintingPoint()||h(f)},f.setPaintingPoint);g.addCareForBrotherListener(function(m,r,w){r==Na.KEY_SHOW_LABEL&&(h(f)?(g.getCtrl().setChecked(!0),g.getCtrl().setEnabled(!1)):(g.getCtrl().setChecked(f.isPaintingPoint()),g.getCtrl().setEnabled(!0)))});h(f)&&g.getCtrl().setEnabled(!1);
return g};p.createNullAsZeroEditItem=function(f){var h=l.get("lineNullAsZero","\u7a7a\u503c\u7ed8\u5236\u4e3a\u96f6"),k=p.createBooleanEditItem();p.initEditItem(k,h,Ub.KEY_CONNECT_NULL_AS,f.isZeroInsteadNull,f.setZeroInsteadNull);return k}}function Vb(){mb.call(this);var p=this.protectedMethod;this.protectedGetColorFieldSetForPalette=function(k){return k.getSeries()};var f=this.protectedCreateEditItem;this.protectedCreateEditItem=function(k,g){switch(k){case "yUnitText":k=l.get("axisUnit","\u6807\u9898/\u5355\u4f4d");
var m=p.createTextEditItem();p.initEditItem(m,k,Qb.KEY_Y_UNIT_TEXT,g.getYUnitText,g.setYUnitText);break;case "xUnitText":k=l.get("axisUnit","\u6807\u9898/\u5355\u4f4d");m=p.createTextEditItem();p.initEditItem(m,k,Qb.KEY_X_UNIT_TEXT,g.getXUnitText,g.setXUnitText);break;case "xRulerScale":k=l.get("rulerScale","\u6807\u5c3a\u6bd4\u4f8b");m=p.createRulerScaleEditItem();p.initEditItem(m,k,Qb.KEY_X_RULER_SCALE,g.getXRulerScale,g.setXRulerScale);break;case "xRulerStart":k=l.get("rulerScope","\u6570\u8f74\u8303\u56f4");
m=p.createRulerScopeEditItem();p.initEditItem(m,k,Qb.KEY_X_RULER_START,g.getXRulerScope,g.setXRulerScope);break;case "xFormat":k=l.get("numberFormat","\u6570\u5b57\u683c\u5f0f");m=l.get("numberFormatFollowField","\u8ddf\u968f\u5ea6\u91cf\u5b57\u6bb5");m=p.createNumberFormatEditItem(m);p.initEditItem(m,k,Qb.KEY_X_FORMAT,g.getXFormat,g.setXFormat);break;case "reflines":k=l.get("refline","\u53c2\u8003\u7ebf");m=p.createReflinesEditItem();p.initEditItem(m,k,Qb.KEY_REFLINES,g.getReflines,g.setReflines);
m.setMeasureFieldsGetter(h);break;case "order":m=p.createOrderEditItem(g,Qb.KEY_SORT);break;case "sortAccording":m=p.createSortAccordingEditItem(g,Pb.KEY_SORT);break;case "topNSwitch":m=p.createTopnSwitchEditItem(g,Qb.KEY_SORT);break;case "topNItems":m=p.createTopnItemsEditItem(g,Qb.KEY_SORT);break;case "topNOthers":m=p.createTopnOthersEditItem(g,Qb.KEY_SORT);break;default:m=f(k,g)}return m};var h=function(){for(var k=[],g=p.getSquareModel().getChart().getXAxis(),m=0,r=g.getItemModelCount();m<r;m++){var w=
g.getItemModel(m);w.isMeasure()&&k.push(w)}return k}}function Lb(){var p=this.protectedMethod;this.protectedGetColorFieldSetForPalette=function(r){return r.getColorSet()};var f=this.protectedCreateEditItem;this.protectedCreateEditItem=function(r,w){switch(r){case "labelType":w=h(w);break;case "topN":r=l.get("topN","\u524dN\u9879");for(var n=[-1],t=1;20>=t;t++)n.push(t);n=p.createSelectableEditItem(n,g);p.initEditItem(n,r,xb.KEY_TOPN,w.getTopN,w.setTopN);w=n;break;case "legendOrderMode":w=m(w);break;
default:w=f(r,w)}return w};var h=function(r){var w=l.get("showDataLabelAs","\u6807\u7b7e\u663e\u793a"),n=p.createSelectableEditItem([xb.SHOW_LABEL_NAME,xb.SHOW_LABEL_NUMBER,xb.SHOW_LABEL_PERCENT,xb.SHOW_LABEL_NAME|xb.SHOW_LABEL_NUMBER,xb.SHOW_LABEL_NAME|xb.SHOW_LABEL_PERCENT,xb.SHOW_LABEL_NUMBER|xb.SHOW_LABEL_PERCENT,xb.SHOW_LABEL_NUMBER|xb.SHOW_LABEL_PERCENT|xb.SHOW_LABEL_NAME],k);p.initEditItem(n,w,xb.KEY_LABEL_TYPE,r.getLabelType,r.setLabelType);n.addCareForBrotherListener(function(t,B,A){B==Na.KEY_SHOW_LABEL&&
p.syncEditItemVisible(t,A?!0:!1)});p.syncEditItemVisible(n,r.isShowLabel());return n},k=function(r,w,n){r="";(n&xb.SHOW_LABEL_NAME)==xb.SHOW_LABEL_NAME&&(r=l.get("showDataLabelAsName","\u540d\u79f0"));(n&xb.SHOW_LABEL_NUMBER)==xb.SHOW_LABEL_NUMBER&&(r.length&&(r+="+"),r+=l.get("showDataLabelAsNumber","\u6570\u503c"));(n&xb.SHOW_LABEL_PERCENT)==xb.SHOW_LABEL_PERCENT&&(r.length&&(r+="+"),r+=l.get("showDataLabelAsPercent","\u767e\u5206\u6bd4"));w.text(r)},g=function(r,w,n){r=0<n?l.get("topNItem","\u524d #1 \u9879\u53ca\u201c\u5176\u5b83\u201d").replace("#1",
n):l.get("itemNone","(\u65e0)");w.text(r)},m=function(r){var w=l.get("legendOrderBy","\u6761\u76ee\u987a\u5e8f"),n=p.createSelectableEditItem([xb.LegendOrderMode_AUTO,xb.LegendOrderMode_VALUE,xb.LegendOrderMode_NAME],function(t,B,A){t="";switch(A){case xb.LegendOrderMode_AUTO:t=l.get("legendOrderByAuto","\u81ea\u52a8");break;case xb.LegendOrderMode_VALUE:t=l.get("legendOrderByValue","\u6309\u5927\u5c0f");break;case xb.LegendOrderMode_NAME:t=l.get("legendOrderByName","\u6309\u540d\u79f0")}B.text(t)});
p.initEditItem(n,w,xb.KEY_LEGEND_ORDER_MODE,r.getLegendOrderMode,r.setLegendOrderMode);return n}}function xa(){var p=this.protectedMethod,f=this.protectedCreateEditItem;this.protectedCreateEditItem=function(k,g){switch(k){case "progressLabelType":var m=l.get("showDataLabelAs","\u6807\u7b7e\u663e\u793a");k=p.createSelectableEditItem([Ra.SHOW_LABEL_NUMBER,Ra.SHOW_LABEL_PERCENT,Ra.SHOW_LABEL_NUMBER|Ra.SHOW_LABEL_PERCENT],h);p.initEditItem(k,m,Ra.KEY_LABEL_TYPE,g.getLabelType,g.setLabelType);k.addCareForBrotherListener(function(r,
w,n){w==Na.KEY_SHOW_LABEL&&p.syncEditItemVisible(r,n?!0:!1)});p.syncEditItemVisible(k,g.isShowLabel());break;case "progressPalette":m=l.get("palette","\u8c03\u8272\u677f");k=new pa;p.initEditItem(k,m,Na.KEY_PALETTE,g.getPalette,g.setPalette);k.setPresetPaletteGetter(function(r){p.createFacade(r).getPresetPalettes("chartProgress",null)});break;case "progressThickness":m=l.get("progressThickness","\u8fdb\u5ea6\u6761\u5185\u5f84");k=p.createNumberEditItem(40,100,10);k.getCtrl().setCustomPainter(function(r){return r+
"%"});p.initEditItem(k,m,Ra.KEY_THICKNESS_PERCENT,g.getThicknessPercent,g.setThicknessPercent);break;default:k=f(k,g)}return k};var h=function(k,g,m){k="";(m&Ra.SHOW_LABEL_NUMBER)==Ra.SHOW_LABEL_NUMBER&&(k.length&&(k+="+"),k+=l.get("showDataLabelAsNumber","\u6570\u503c"));(m&Ra.SHOW_LABEL_PERCENT)==Ra.SHOW_LABEL_PERCENT&&(k.length&&(k+="+"),k+=l.get("showDataLabelAsPercent","\u767e\u5206\u6bd4"));g.text(k)}}function eb(){Ua.call(this);var p=this.protectedMethod,f=function(n,t){if("listShowTopN"==
n){n=l.get("gridShowTopN","\u663e\u793a\u524dN\u884c");var B=p.createBooleanEditItem();p.initEditItem(B,n,pb.KEY_TOP_N,t.isTopnSwitch,t.setTopnSwitch);return B}if("listShowTopRows"==n)return n=l.get("gridShowTopRows","\u884c\u6570"),B=p.createNumberEditItem(1,100,1),p.initEditItem(B,n,pb.KEY_TOP_N,t.getTopnItems,t.setTopnItems),B.addCareForBrotherListener(function(A,E,F){E==pb.KEY_TOP_N&&p.syncEditItemVisible(A,t.isTopnSwitch())}),p.syncEditItemVisible(B,t.isTopnSwitch()),B},h=function(n,t){if("listAutoScroll"==
n){n=l.get("gridAutoScroll","\u81ea\u52a8\u6eda\u52a8");var B=p.createBooleanEditItem();p.initEditItem(B,n,pb.KEY_AUTO_SCROLL,t.isAutoScroll,t.setAutoScroll);return B}if("listStickTopN"==n)return n=l.get("gridStickTopN","\u51bb\u7ed3\u524dN\u884c"),B=p.createBooleanEditItem(),p.initEditItem(B,n,pb.KEY_STICK_ROWS,t.isStickNRow,t.setStickNRow),B.addCareForBrotherListener(function(A,E,F){E==pb.KEY_AUTO_SCROLL&&p.syncEditItemVisible(A,t.isAutoScroll())}),p.syncEditItemVisible(B,t.isAutoScroll()),B;if("listStickTopRows"==
n)return n=l.get("gridStickTopRows","\u51bb\u7ed3\u884c\u6570"),B=p.createNumberEditItem(1,10,1),p.initEditItem(B,n,pb.KEY_STICK_ROWS,t.getStickRows,t.setStickRows),B.addCareForBrotherListener(function(A,E,F){E!=pb.KEY_AUTO_SCROLL&&E!=pb.KEY_STICK_ROWS||p.syncEditItemVisible(A,t.isAutoScroll()&&t.isStickNRow())}),p.syncEditItemVisible(B,t.isAutoScroll()&&t.isStickNRow()),B},k=function(n,t,B){if("listSortField"==n){var A=l.get("gridSortField","\u6392\u5e8f\u5b57\u6bb5");n=new qa;n.setDisplayForNon(l.get("gridNoSortField",
"\u65e0\uff08\u6309\u7ef4\u5ea6\uff09"));p.initEditItem(n,A,pb.KEY_SORT_FIELD,t.getSortField,t.setSortField);n.addCareForModelChangedListener(function(F,z){if(z.isContainItemModelSet(B)){z=r(B);var L=t.getSortField();!m(L,z)&&(L=null);F.updateCtrlState(z,L)}});A=r(B);var E=t.getSortField();!m(E,A)&&(E=null);n.updateCtrlState(A,E);return n}if("listSortord"==n)return A=l.get("gridSortord","\u6392\u5e8f\u65b9\u5f0f"),n=p.createSelectableEditItem([pb.ASCEND_SORT,pb.DESCEND_SORT],function(F,z,L){F=L==
pb.ASCEND_SORT?l.get("orderAsc","\u5347\u5e8f"):L==pb.DESCEND_SORT?l.get("orderDesc","\u964d\u5e8f"):"";z.text(F)}),p.initEditItem(n,A,pb.KEY_SORTORD,t.getSortord,t.setSortord),n.addCareForBrotherListener(function(F,z,L){z==pb.KEY_SORT_FIELD&&p.syncEditItemVisible(F,L?!0:!1)}),n.addCareForModelChangedListener(function(F,z){if(z.isContainItemModelSet(B)){z=r(B);var L=t.getSortField();z=m(L,z);p.syncEditItemVisible(F,z)}}),p.syncEditItemVisible(n,t.getSortField()?!0:!1),n},g=function(n,t,B){var A=l.get("affectionSrcField",
"\u8054\u52a8\u6e90\u5b57\u6bb5");n=new qa;n.setDisplayForNon(l.get("itemEmpty","\u65e0"));p.initEditItem(n,A,pb.KEY_AFFECTIOM_SRC_FIELD,t.getAffectionSrcField,t.setAffectionSrcField);n.addCareForModelChangedListener(function(F,z){if(z.isContainItemModelSet(B)){z=w(B);var L=t.getAffectionSrcField();!m(L,z)&&(L=null);F.updateCtrlState(z,L)}});A=w(B);var E=t.getAffectionSrcField();!m(E,A)&&(E=null);n.updateCtrlState(A,E);return n},m=function(n,t){for(var B=!1,A=0;A<t.length;A++)if(n==t[A]){B=!0;break}return B},
r=function(n){for(var t=[],B=0;B<n.getItemModelCount();B++){var A=n.getItemModel(B);A.isMeasure()&&!A.isInvalid()&&t.push(A)}return t},w=function(n){for(var t=[],B=0;B<n.getItemModelCount();B++){var A=n.getItemModel(B);A.isDimension()&&!A.isInvalid()&&A.getMetaField().getDataType()==N.DT_STRING&&t.push(A)}return t};p.listCreateEditItem=function(n,t,B){switch(n){case "listShowTopN":case "listShowTopRows":var A=f(n,t);break;case "listSortField":case "listSortord":A=k(n,t,B);break;case "listAutoScroll":case "listStickTopN":case "listStickTopRows":A=
h(n,t);break;case "listAffectionSrcField":A=g(n,t,B)}return A}}function Ma(){var p=$("<div>"),f=$("<div>");this.setTitle=function(h){p.text(h)};this.addEditItem=function(h){f.append(h.createJqUi())};this.createJqUi=function(){var h=$("<div>");h.addClass("square-property-card");p.addClass("square-property-card-title");p.appendTo(h);f.addClass("square-property-card-content");f.appendTo(h);return h}}function Ja(){var p=this,f=$("<div>"),h,k,g,m,r,w,n;this.setCaption=function(t){h=t};this.setMethod=function(t,
B){k=t;g=B};this.setPropertyKey=function(t){r=t};this.getPropertyKey=function(){return r};this.createJqUi=function(){var t=$("<div>");t.addClass("square-property-item-caption");t.text(h);var B=p.protectedCreateEditorJqUi(k());B.addClass("square-property-item-editor");f.addClass("square-property-item");f.append(t);f.append(B);return f};this.updateEditor=function(){throw Error("Override me");};this.setVisible=function(t){f.css("display",t?"block":"none")};this.addCareForBrotherListener=function(t){w=
t};this.careForPropertyChanged=function(t,B){w&&w(p,t,B)};this.addCareForModelChangedListener=function(t){n=t};this.careForSquareModelChanged=function(t){n&&n(p,t)};this.setCommandManager=function(t){m=t};this.protectedCreateEditorJqUi=function(t){throw Error("Override me");};this.protectedMethod={actionPerformed:function(t){var B=new S;B.setCaption(l.get("changeProperty","\u4fee\u6539\u5c5e\u6027")+"-"+h);B.setMethod(k,g);B.setValue(t);m.perform(B)},getCommandManager:function(){return m},getOriValue:function(){return k()},
getCaption:function(){return h}}}function oa(){Ja.call(this);var p=this.protectedMethod,f,h,k;this.protectedCreateEditorJqUi=function(r){f=new W;f.setText(r?r:"");f.addEditedListener(g);return f.getJqUi()};this.updateEditor=function(){if(!k){var r=p.getOriValue();f.setText(r?r:"")}};var g=function(r){clearTimeout(h);h=setTimeout(m,1E3)},m=function(){var r=f.getText();r!=p.getOriValue()&&(k=!0,p.actionPerformed(r),k=!1)}}function ka(){function p(){la.call(this);var t=this,B=this.protectedMethod,A=
new a,E,F,z;this.setCaption=function(Za,lb){B.setTitle(Za);A.setText(lb)};this.setText=function(Za,lb){L().setText(Za);z=function(O){var D=O?$.trim(L().getText()):null;lb(O,D)};B.setClosingAction(z)};this.showDialogLeftAnchorTo=function(Za){if(Za){var lb=t.protectedGetDialogSize(),O=lb[0];lb=lb[1];t.setSize(O,lb);Za=ba.upwardCoordinate(Za[0],[0,0],document.body);t.setPosition(Math.max(0,Za[0]-O-10),Math.max(6,Za[1]-lb+40))}L().addEditedListener(za);B.setContentPaneCreator(ia);B.setSelectable(!0);
t.showDialog();L().requestFocus()};this.protectedGetDialogSize=function(){return[360,200]};this.setClosingChecker=function(Za){Za&&(F=function(){var lb=Za($.trim(L().getText()));lb&&B.getMessageCurtain().showPrompt(lb);return lb?!1:!0},B.setClosingChecker(F))};var L=function(){E||(E=t.protectedCreateTextCtrl(function(){if(!F||F())z(!0),B.destroy()}));return E};this.protectedCreateTextCtrl=function(Za){throw Error("Implement");};var ia=function(){ba.layoutCtrlWithLRTB(A.getJqUi(),0,0,null,0,null,23);
t.protectedLayoutTextCtrl(L().getJqUi());var Za=$("<div>");Za.append(A.getJqUi());Za.append(L().getJqUi());return Za};this.protectedLayoutTextCtrl=function(Za){ba.layoutCtrlWithLRTB(Za,0,0,null,30,null,23)};var za=function(Za){B.getMessageCurtain().hide()}}function f(){p.call(this);this.protectedCreateTextCtrl=function(t){var B=new W;B.addAcceptableListener(function(A,E){E&&t()});return B}}function h(){p.call(this);this.protectedCreateTextCtrl=function(t){return new q};this.protectedGetDialogSize=
function(){return[640,480]};this.protectedLayoutTextCtrl=function(t){ba.layoutCtrlWithLRTB(t,0,0,null,30,0,null)}}Ja.call(this);var k=this.protectedMethod,g,m=!1;this.setMultiLine=function(t){m=t};this.protectedCreateEditorJqUi=function(t){g=new x;g.addActionListener(w);g.addClearListener(n);g.setClearable(!0);r();return g.getJqUi()};this.updateEditor=function(){r()};var r=function(){var t=k.getOriValue();g.setModel(t?t:"")},w=function(t){t=m?new h:new f;t.setCaption(k.getCaption(),k.getCaption());
t.setText(k.getOriValue(),function(B,A){B&&k.actionPerformed(A)});t.showDialogLeftAnchorTo(g.getJqUi())},n=function(t){k.actionPerformed("")}}function Ha(){Ja.call(this);var p=this.protectedMethod,f=new ea,h;this.getCtrl=function(){return f};this.protectedCreateEditorJqUi=function(g){f.setChecked(g?!0:!1);f.addCheckedListener(k);return f.getJqUi()};this.updateEditor=function(){if(!h){var g=p.getOriValue();f.setChecked(g?!0:!1)}};var k=function(g,m){m&&(h=!0,p.actionPerformed(f.isChecked()),h=!1)}}
function Sa(){Ja.call(this);var p=this.protectedMethod,f=new c,h;this.getCtrl=function(){return f};this.setConstraint=function(g,m,r){f.setConstraint(g,m,r)};this.protectedCreateEditorJqUi=function(g){f.setValue(g);f.addValueChangedListener(k);return f.getJqUi()};this.updateEditor=function(){var g=p.getOriValue();f.setValue(g)};var k=function(g,m,r,w){w==c.CHANGED_BY_MANUAL_ADJUST?(clearTimeout(h),h=setTimeout(function(){p.actionPerformed(f.getValue())},625)):w==c.CHANGED_BY_MANUAL_EDIT&&p.actionPerformed(f.getValue())}}
function da(){Ja.call(this);var p=this.protectedMethod,f=new aa,h;this.setSelectable=function(g,m,r){f.setItemModels(g,m);f.setCustomPainter(r)};this.protectedCreateEditorJqUi=function(g){f.setSelected(g);f.addSelectedChangedListener(k);return f.getJqUi()};this.updateEditor=function(){if(!h){var g=p.getOriValue();f.setSelected(g)}};var k=function(g,m,r){h=!0;p.actionPerformed(f.getSelected());h=!1}}function qa(){Ja.call(this);var p=this.protectedMethod,f,h=new aa,k;this.setDisplayForNon=function(r){f=
r};this.updateCtrlState=function(r,w){r=["Non"].concat(r);h.setItemModels(r);r=w;h.setSelected(r?r:"Non")};this.protectedCreateEditorJqUi=function(r){h.setCustomPainter(m);h.addSelectedChangedListener(g);return h.getJqUi()};this.updateEditor=function(){if(!k){var r=p.getOriValue();h.setSelected(r?r:"Non")}};var g=function(r,w,n){k=!0;r=p.actionPerformed;w=h.getSelected();r.call(p,"Non"==w?null:w);k=!1},m=function(r,w,n){n&&"Non"!=n?w.text(n.getText()):w.text(f)}}function Ga(){function p(){la.call(this);
var t=this,B=this.protectedMethod,A,E,F,z,L,ia;this.edit=function(sa,Ba,Fa,yb){var Hb=za(Ba),Gb=Ba.getChartTypeName()==ha.ChartType_ProgressBar||Ba.getChartTypeName()==ha.ChartType_ProgressColumn;B.setTitle(l.get("sortAccording","\u6392\u5e8f\u4f9d\u636e"));t.setSize(600,400);B.setContentPaneCreator(function(){return Za(sa,Hb,Fa,Gb)});B.setClosingAction(function(Nb){if(Nb){Nb=null;if(E.isChecked()){var $b=z.getSelected()[0];Nb=new db;Nb.setupMeasureIndexMode($b)}else if(F.isChecked()){$b=L.getEditingMetaFieldFullName();
var nc=L.getEditingAggregation();$b&&nc&&(Nb=new db,Nb.setupAnyFieldMode($b,nc))}yb(Nb)}})};var za=function(sa){var Ba=[],Fa=0;sa.lookupAllItemModelSet(function(yb){yb=yb.getSquareField();yb.isMeasure()&&!yb.isInvalid()&&Ba.push([Fa++,yb])},!0);return Ba},Za=function(sa,Ba,Fa,yb){ia=$("<div>");ia.css({color:"#930"});Fa=O(Ba,Fa);Fa=D(sa,Fa);A=new u;A.setText(l.get("sortAccordingDefault","\u7cfb\u7edf\u9ed8\u8ba4")+(yb?l.get("orderByRatio","(\u6309\u5b8c\u6210\u7387)"):""));E=new u;E.setText(l.get("sortAccordingMeasure",
"\u6307\u5b9a\u5ea6\u91cf"));E.setEnabled(1<Ba.length);F=new u;F.setText(l.get("sortAccordingCustom","\u81ea\u5b9a\u4e49"));sa=new v;sa.addElement(A);sa.addElement(E);sa.addElement(F);sa.addChangedListener(function(Hb,Gb){Gb&&ia.text("");z.setEnabled(Hb==E);L.setEnabled(Hb==F)});A.setChecked(!Fa);E.setChecked(Fa&&Fa.isMeasureIndexMode());F.setChecked(Fa&&Fa.isAnyFieldMode());Fa=L.getMetaFieldJqUi();sa=L.getAggregationJqUi();Ba=$("<div>");lb(Ba,A.getJqUi(),0,0,160,23);lb(Ba,E.getJqUi(),0,30,160,23);
lb(Ba,z.getJqUi(),20,60,320,23);lb(Ba,F.getJqUi(),0,100,160,23);lb(Ba,Fa,20,130,320,23);lb(Ba,sa,360,130,100,23);lb(Ba,ia,0,180,"100%",80);return Ba},lb=function(sa,Ba,Fa,yb,Hb,Gb){ba.layoutCtrl(Ba,Fa,yb,Hb,Gb);sa.append(Ba)},O=function(sa,Ba){z=new aa;z.setCustomPainter(function(Hb,Gb,Nb){Hb="";Nb instanceof Array&&(Hb=Nb[0]+1,Nb=Nb[1].getComplexText(),Hb=l.get("sortAccordingMeasureIndex","\u7b2c#1\u4e2a\u5ea6\u91cf").replace("#1",Hb),Hb+=Nb);Gb.text(Hb)});z.setItemModels(sa,function(Hb,Gb){return(Hb instanceof
Array?Hb[0]:-1)===(Gb instanceof Array?Gb[0]:-1)});if(Ba&&Ba.isMeasureIndexMode())if(1>=sa.length){Ba=null;var Fa=l.get("sortAccordingPrompt1","\u5f53\u524d\u7ed1\u5b9a\u7684\u5b57\u6bb5\u5c11\u4e8e2\u4e2a\u5ea6\u91cf\uff0c\u5df2\u81ea\u52a8\u5c06\u4e4b\u524d\u8bbe\u7f6e\u7684\u201c\u6307\u5b9a\u5ea6\u91cf\u201d\u4fee\u590d\u4e3a\u201c\u7cfb\u7edf\u9ed8\u8ba4\u201d\u3002");V(Fa)}else{if(Ba.getMeasureIndex()<sa.length)var yb=Ba.getMeasureIndex();else yb=0,Fa=l.get("sortAccordingPrompt2","\u4e4b\u524d\u6307\u5b9a\u7684\u7b2c#1\u4e2a\u5ea6\u91cf\u4e0d\u5b58\u5728\uff0c\u5df2\u4fee\u590d\u4e3a\u7b2c1\u4e2a\u5ea6\u91cf\u3002"),
Fa=Fa.replace("#1",Ba.getMeasureIndex()+1),V(Fa);z.setSelected(sa[yb])}else 0<sa.length&&z.setSelected(sa[0]);return Ba},D=function(sa,Ba){L=new ra;L.initCtrl(sa,function(Fa,yb){Ba&&Ba.isAnyFieldMode()&&yb(Fa,Ba.getMetaFieldFullName(),Ba.getAggregation(),function(Hb){Ba=null;var Gb=l.get("sortAccordingPrompt3","\u65e0\u6548\u7684\u8ba1\u7b97\u5b57\u6bb5#1\uff0c\u5df2\u81ea\u52a8\u5c06\u4e4b\u524d\u8bbe\u7f6e\u7684\u201c\u81ea\u5b9a\u4e49\u201d\u4fee\u590d\u4e3a\u201c\u7cfb\u7edf\u9ed8\u8ba4\u201d\u3002");
Gb=Gb.replace("#1",Hb.getComplexText());V(Gb)},function(Hb,Gb){Hb=Hb?X.aggregationToString(Hb):"nul";Gb=Gb?X.aggregationToString(Gb):"nul";var Nb=l.get("sortAccordingPrompt4","\u7531\u4e8e\u5b57\u6bb5\u6570\u636e\u7c7b\u578b\u53d8\u5316\u3001\u8ba1\u7b97\u5b57\u6bb5\u5185\u5bb9\u53d8\u5316\u6216\u5176\u5b83\u76f8\u5173\u539f\u56e0\uff0c\u5df2\u81ea\u52a8\u5c06\u4e4b\u524d\u8bbe\u7f6e\u7684\u805a\u5408\u65b9\u5f0f\u201c#1\u201d\u4fee\u590d\u4e3a\u201c#2\u201d\u3002");Nb=Nb.replace("#1",Hb);Nb=Nb.replace("#2",
Gb);V(Nb)},function(Hb){Ba=null;Hb=l.get("sortAccordingPrompt5","\u627e\u4e0d\u5230\u5b57\u6bb5\u201c#1\u201d\uff0c\u5df2\u81ea\u52a8\u5c06\u4e4b\u524d\u8bbe\u7f6e\u7684\u201c\u81ea\u5b9a\u4e49\u201d\u4fee\u590d\u4e3a\u201c\u7cfb\u7edf\u9ed8\u8ba4\u201d\u3002").replace("#1",Hb);V(Hb)})});return Ba},V=function(sa){sa+=" "+l.get("sortAccordingPromptPostfix","\u6309\u201c\u786e\u5b9a\u201d\u6309\u94ae\u5b8c\u6210\u4fee\u6539\u3002");ia.text(sa)}}Ja.call(this);var f=this,h=this.protectedMethod,k,g,m;
this.setModelContext=function(t,B){g=t;m=B};this.protectedCreateEditorJqUi=function(t){k=new x;k.setCustomPainter(r);k.addActionListener(n);k.addClearListener(w);k.setClearable(!0);f.updateEditor();return k.getJqUi()};this.updateEditor=function(){var t=h.getOriValue();k.setModel(t)};var r=function(t){return t?t.isMeasureIndexMode()?l.get("sortAccordingMeasure","\u6307\u5b9a\u5ea6\u91cf"):t.isAnyFieldMode()?l.get("sortAccordingCustom","\u81ea\u5b9a\u4e49"):"Error":l.get("sortAccordingDefault","\u7cfb\u7edf\u9ed8\u8ba4")},
w=function(t){h.actionPerformed(null)},n=function(t){t=g();var B=new p;B.edit(t,m,h.getOriValue(),function(A){h.actionPerformed(A)});B.showDialog()}}function ra(){var p=new wb,f=new aa,h;this.getEditingMetaFieldFullName=function(){return p.getSelected()};this.getEditingAggregation=function(){return f.getSelected()};this.getMetaFieldJqUi=function(){return p.getJqUi()};this.getAggregationJqUi=function(){return f.getJqUi()};this.setEnabled=function(m){p.setEnabled(m);f.setEnabled(m)};this.setSelectionListener=
function(m){h=m};this.initCtrl=function(m,r){var w=new J;w.merge(m);p.setModel(w);p.setSelectedListener(function(n){n=w.searchMetaField(n);g(n);h&&h()});f.addSelectedChangedListener(function(n,t,B){h&&h()});f.setCustomPainter(function(n,t,B){t.text(B?X.aggregationToString(B):"")});r(w,k)};var k=function(m,r,w,n,t,B){(m=m.searchMetaField(r))?m.isInvalid()?(p.setSelected(r),n(m)):(p.setSelected(r),f.setSelected(w),g(m),r=f.getSelected(),r!=w&&t(w,r)&&f.setSelected(null)):B(r)},g=function(m){if(m.isInvalid())f.setItemModels([]),
f.setSelected(null);else{var r=[];m.isRelativeAggregation()?r.push(X.AGGREGATION_AGG):(m.getDataType()==N.DT_NUMBER&&(r.push(X.AGGREGATION_SUM),r.push(X.AGGREGATION_AVG),r.push(X.AGGREGATION_MEDIAN),r.push(X.AGGREGATION_MAX),r.push(X.AGGREGATION_MIN)),r.push(X.AGGREGATION_COUNT),r.push(X.AGGREGATION_CNTD));f.setItemModels(r);m=f.getSelected();-1==r.indexOf(m)&&f.setSelected(r[0])}}}function cb(){function p(){la.call(this);var n=this,t=this.protectedMethod,B;this.edit=function(A,E){t.setTitle(l.get("numberFormat",
"\u6570\u5b57\u683c\u5f0f"));B||(B=new ma,n.setSize(428,257),t.setContentPaneCreator(function(){return B.getJqUi()}),t.setClosingChecker(B.isValidToAccepted),t.setClosingAction(function(z){z&&(z=B.getModel().encode(),E(z))}));var F=new wa;F.decode(A?A:"#,##0");B.setModel(F)}}Ja.call(this);var f=this,h=this.protectedMethod,k,g=l.get("itemEmpty","\u672a\u8bbe\u7f6e");this.protectedCreateEditorJqUi=function(n){k=new x;k.setCustomPainter(w);k.addActionListener(m);k.addClearListener(r);k.setClearable(!0);
f.updateEditor();return k.getJqUi()};this.updateEditor=function(){var n=h.getOriValue();k.setModel(n)};this.setDisplayForEmpty=function(n){g=n};var m=function(n){n=new p;n.edit(h.getOriValue(),function(t){h.actionPerformed(t)});n.showDialog()},r=function(n){h.actionPerformed(null)},w=function(n){return n?(new Ea).toSampleString(n):g}}function Qa(){Ja.call(this);var p=this,f=this.protectedMethod,h,k;this.setUsableChecker=function(w){k=w};this.protectedCreateEditorJqUi=function(w){h=new x;h.setCustomPainter(g);
h.addActionListener(m);h.addClearListener(r);h.setClearable(!0);p.updateEditor();return h.getJqUi()};this.updateEditor=function(){var w=f.getOriValue();w=w?w.getItemCount():0;h.setModel(w)};var g=function(w){return w?l.get("linkageInputterDisplay","\u5df2\u8bbe\u7f6e#1\u9879\u76ee\u6807").replace("#1",w):l.get("itemEmpty","\u672a\u8bbe\u7f6e")},m=function(w){k()&&(w=(w=f.getOriValue())?w.toArray():[],va.setup(w,function(){return(new T).addItem()},function(n){if(n)if(0==n.length)f.actionPerformed(null);
else{var t=new T;t.fromArray(n);f.actionPerformed(t)}}))},r=function(w){f.actionPerformed(null)}}function hb(){function p(){la.call(this);var t=this.protectedMethod,B=!1,A;this.edit=function(ia,za){B=ia;t.setTitle(l.get("palette","\u8c03\u8272\u677f"));t.setContentPaneCreator(function(){var Za={isCustom:function(){return B},getDefaultPalette:function(){return r[hb.DEFAULT_WHITE]},getJqCustomRadioButton:function(){return A}};return h.protectedCreateDialogMainPane({createPaletteJqUi:function(){return E(za)},
getFirstTabChannel:function(){return Za}})});t.setClosingChecker(function(){return h.protectedDialogClosingAsker(B,t.getMessageCurtain())});t.setClosingAction(function(Za){Za&&h.protectedDialogConfirmed(B?h.protectedAcceptCustomEditing(za):null)})};var E=function(ia){var za=new y;za.setText(l.get("paletteResetToPreset","\u91cd\u7f6e"));za.addActionListener(function(Ba){F(Ba.getJqUi(),ia)});var Za=new y;Za.setText(l.get("paletteCopy","\u590d\u5236"));Za.addActionListener(function(Ba){z(Ba.getJqUi(),
ia)});var lb=new y;lb.setText(l.get("palettePaste","\u7c98\u8d34"));lb.addActionListener(function(Ba){L(Ba.getJqUi(),ia)});var O=h.protectedCreateSettingUi(ia),D=$("<div>");D.css("border-top","1px solid #f0f0f0");var V=$("<div>");V.append(Za.getJqUi());V.append(lb.getJqUi());V.append(za.getJqUi());V.append(D);V.append(O);ba.layoutCtrlWithLRTB(za.getJqUi(),null,0,60,0,null,23);ba.layoutCtrlWithLRTB(lb.getJqUi(),null,60,60,0,null,23);ba.layoutCtrlWithLRTB(Za.getJqUi(),null,120,60,0,null,23);ba.layoutCtrlWithLRTB(D,
0,0,null,30,null,0);ba.layoutCtrlWithLRTB(O,20,0,null,40,0,null);za=new u;za.setText(l.get("paletteDefault","\u7cfb\u7edf\u9ed8\u8ba4")+" "+l.get("paletteDefaultPrompt","\uff08\u81ea\u52a8\u9002\u914d\u5916\u89c2\u98ce\u683c\uff09"));var sa=new u;sa.setText(l.get("paletteCustom","\u81ea\u5b9a\u4e49"));A=sa.getJqUi();Za=new v;Za.addElement(za);Za.addElement(sa);Za.addChangedListener(function(Ba,Fa){B=Ba==sa;V.css("visibility",B?"visible":"hidden")});za.setChecked(!B);sa.setChecked(B);Za=$("<div>");
Za.append(za.getJqUi());Za.append(sa.getJqUi());Za.append(V);ba.layoutCtrlWithLRTB(za.getJqUi(),0,null,320,0,null,23);ba.layoutCtrlWithLRTB(sa.getJqUi(),0,null,320,33,null,23);ba.layoutCtrlWithLRTB(V,0,0,null,35,0,null);return Za},F=function(ia,za){var Za=new f;Za.setConfirmedListener(function(lb){lb&&(lb=Za.getSelected(),(lb=r[lb])&&h.protectedResetDefault(lb,za))});Za.show(ia)},z=function(ia,za){var Za=new d;Za.setText(l.get("paletteCopyAsk","\u662f\u5426\u5c06\u5f53\u524d\u81ea\u5b9a\u4e49\u8bbe\u7f6e\u590d\u5236\u5230\u526a\u8d34\u677f\uff1f"));
Za.setConfirmedListener(function(lb){if(lb)if(lb=h.protectedGetClipboardKey(),za=h.protectedAcceptCustomEditing(za)){var O=JSON.stringify(za.toJsonObject());window.sessionStorage.setItem(lb,O);t.getMessageCurtain().showSuccess(l.get("paletteCopySuccess","\u5df2\u590d\u5236\u5230\u526a\u8d34\u677f\u3002"))}else t.getMessageCurtain().showPrompt(l.get("paletteCopyInvalid","\u65e0\u6548\u7684\u81ea\u5b9a\u4e49\u8bbe\u7f6e\uff0c\u4e0d\u80fd\u590d\u5236\u3002"))});Za.show(ia)},L=function(ia,za){var Za=
new d;Za.setText(l.get("palettePasteAsk","\u662f\u5426\u4ece\u526a\u8d34\u677f\u590d\u539f\u81ea\u5b9a\u4e49\u8bbe\u7f6e\uff1f"));Za.setConfirmedListener(function(lb){lb&&(lb=h.protectedGetClipboardKey(),(lb=window.sessionStorage.getItem(lb))?(lb=JSON.parse(lb),h.protectedRestoreFromClipboard(lb,za),t.getMessageCurtain().showSuccess(l.get("palettePasteSuccess","\u5df2\u4ece\u526a\u8d34\u677f\u590d\u539f\u3002"))):t.getMessageCurtain().showPrompt(l.get("palettePasteInvalid","\u526a\u8d34\u677f\u6ca1\u6709\u5185\u5bb9\u3002")))});
Za.show(ia)}}function f(){d.call(this);var t;this.protectedDecorateContent=function(A){var E=new v;E.addChangedListener(function(ia,za){t=ia.getUserObject()});var F=B(A,E,"paletteResetToPresetWhite","\u9002\u914d\u6de1\u96c5\u767d",hb.DEFAULT_WHITE),z=B(A,E,"paletteResetToPresetDarkBlue","\u9002\u914d\u6df1\u9083\u84dd",hb.DEFAULT_DARK),L=B(A,E,"paletteResetToPresetGold","\u9002\u914d\u571f\u8c6a\u91d1",hb.DEFAULT_GOLD);E=B(A,E,"paletteResetToPresetCyan","\u9002\u914d\u9759\u8c27\u9752",hb.DEFAULT_CYAN);
F.setChecked(!0);A.css("width",600);ba.layoutCtrl(F.getJqUi(),20,4,120,23);ba.layoutCtrl(z.getJqUi(),160,4,120,23);ba.layoutCtrl(L.getJqUi(),300,4,120,23);ba.layoutCtrl(E.getJqUi(),440,4,120,23)};this.getSelected=function(){return t};var B=function(A,E,F,z,L){var ia=new u;ia.setText(l.get(F,z));ia.setUserObject(L);ia.setChecked(!1);E.addElement(ia);A.append(ia.getJqUi());return ia}}Ja.call(this);var h=this,k=this.protectedMethod,g,m,r;this.setPresetPaletteGetter=function(t){m=t};this.protectedCreateEditorJqUi=
function(t){g=new x;g.addActionListener(w);h.updateEditor();return g.getJqUi()};this.protectedGetPaletteModel=function(){return k.getOriValue()};this.updateEditor=function(){var t=h.protectedGetPaletteModel()?l.get("paletteCustom","\u81ea\u5b9a\u4e49"):l.get("paletteDefault","\u7cfb\u7edf\u9ed8\u8ba4");g.setModel(t)};var w=function(t){var B=(t=h.protectedGetPaletteModel())?!0:!1;t=h.protectedInitEditableModel(t);var A=new p;h.protectedInitDialog(A);A.edit(B,t);A.showDialog();n(t)},n=function(t){var B=
function(){h.protectedInitDisplay(t,r[hb.DEFAULT_WHITE])};r?setTimeout(B,0):(r={},m(function(A){for(var E=[],F=0;F<A.length;F++){var z=A[F],L=new Q;L.fromJsonObject(z);E.push(L)}for(F=0;F<E.length;F++)(A=E[F])?r[A.getPresetName()]=A:window.console&&window.console.warn("Load preset palette error.");B()}))};this.protectedInitDisplay=function(t,B){throw Error("Implement");};this.protectedInitEditableModel=function(t){throw Error("Implement");};this.protectedAcceptCustomEditing=function(t){return t};
this.protectedInitDialog=function(t){t.setSize(720,480)};this.protectedCreateSettingUi=function(t){throw Error("Implement");};this.protectedResetDefault=function(t,B){throw Error("Implement");};this.protectedGetClipboardKey=function(){throw Error("Implement");};this.protectedRestoreFromClipboard=function(t,B){throw Error("Implement");};this.protectedCreateDialogMainPane=function(t){return t.createPaletteJqUi()};this.protectedDialogClosingAsker=function(t,B){return!0};this.protectedDialogConfirmed=
function(t){k.actionPerformed(t)}}function Fb(){function p(n){fa.AbstractTabPane.call(this);var t;this.getTabHeadText=function(){return l.get("paletteSettingTabColor","\u989c\u8272")};this.getJqUi=function(){if(!t){t=$("<div>");var B=n.createPaletteJqUi();B.appendTo(t);ba.layoutCtrlWithLRTB(B,20,20,null,10,10,null)}return t};this.promptEditingInvalid=function(B){var A=g.checkEditingInvalid();return A?(B.jumpToTab(0),B=new d,B.setText(A.getPrompt()),B.show(A.getJqAnchor(),!0),!0):!1}}function f(){fa.AbstractTabPane.call(this);
var n,t,B=new M,A,E;this.setEnabled=function(z){n=z};this.setMemberTextRequester=function(z){B.setMemberTextRequester(z)};this.setForwardTabChannel=function(z){t=z};this.setInitMappingModel=function(z){B.setInitMapping(z)};this.getEditedMappingModel=function(){return B.getEditedMapping()};this.announceClick=function(z){B.announceClick(z)};this.getTabHeadText=function(){return l.get("paletteSettingTabMapping","\u503c\u6620\u5c04")};this.getJqUi=function(){A||(A=$("<div>"),A.append(B.getJqUi()),ba.layoutCtrlWithLRTB(B.getJqUi(),
20,20,null,10,10,null),n||(E=$("<div>"),E.text(l.get("paletteMappingNoColorField","\u6ca1\u6709\u8868\u793a\u989c\u8272\u7684\u7ef4\u5ea6\u5b57\u6bb5\uff0c\u4e0d\u80fd\u505a\u503c\u6620\u5c04\u3002")),E.css({"line-height":"200px","text-align":"center",color:"#666","background-color":"rgba(248,248,248,0.8)"}),A.append(E),ba.layoutCtrlWithLRTB(E,0,0,null,0,0,null)));return A};this.into=function(){n&&F()};var F=function(z){if(t.isCustom()){var L=new Q;g.acceptEditing(L);L=L.getColors()}else L=t.getDefaultPalette().getColors();
B.updatePalette(L,z)};this.promptEditingInvalid=function(z){if(n){B.announceClick(A);F(!0);var L=B.checkEditingInvalid();if(L){z.jumpToTab(1);z=L.getJqAnchor();var ia=L.getPrompt();(L=L.isSolidInvalid())&&(ia+=l.get("paletteMappingPrompt1","\u5982\u679c\u786e\u5b9e\u4e0d\u4f7f\u7528\u4e2d\u95f4\u7684\u989c\u8272\u2026\u2026"));var za=new d;za.setText(ia);za.setConfirmedButtonText(l.get("paletteMappingToContinue","\u7ee7\u7eed"));L&&za.setConfirmedListener(function(Za){Za=t.getJqCustomRadioButton().children().eq(0);
var lb=l.get("paletteMappingPrompt2","\u2026\u2026\u5e94\u8be5\u5728\u989c\u8272\u201c\u81ea\u5b9a\u4e49\u201d\u4e2d\u5c06\u7528\u4e0d\u5230\u7684\u989c\u8272\u8c03\u6574\u5230\u540e\u9762\u6216\u8005\u5220\u9664\u6389\u3002");k.jumpToTab(0);var O=new d;O.setText(lb);O.show(Za,!0)});za.show(z,!0);return!0}}return!1}}hb.call(this);var h=this.protectedMethod,k,g,m,r,w;this.bindColorFieldAsker=function(n){w=n};this.protectedCreateDialogMainPane=function(n){m=new p(n);r=new f;r.setEnabled(w.isColorFieldExist());
r.setMemberTextRequester(w.getMemberTextGetter());r.setForwardTabChannel(n.getFirstTabChannel());r.setInitMappingModel(h.getOriValue()[1]);k=new fa;k.setBorderVisible(!0);k.setTabPanes([m,r]);k.setTabHeadItemHeight(40);k.setTabHeadWidth(120);setTimeout(function(){k.refreshUi()},0);n=k.getJqUi();n.on("click",function(t){r.announceClick($(t.target))});return n};this.protectedDialogClosingAsker=function(n,t){t=!0;n&&m.promptEditingInvalid(k)?t=!1:r.promptEditingInvalid(k)&&(t=!1);return t};this.protectedDialogConfirmed=
function(n){var t=w.getOtherFieldWithColor();t&&h.getCommandManager().compositeStart(l.get("changeProperty","\u4fee\u6539\u5c5e\u6027")+"-"+h.getCaption());var B=r.getEditedMappingModel();h.actionPerformed([n,B]);t&&(n=new S,n.setMethod(t.getDiscreteColor,t.setDiscreteColor),n.setValue(null),h.getCommandManager().perform(n),h.getCommandManager().compositeEnd())};this.protectedGetPaletteModel=function(){return h.getOriValue()[0]};this.protectedInitEditableModel=function(n){var t=new Q;n&&t.setColors(n.getColors().slice(0));
return t};this.protectedInitDisplay=function(n,t){0==n.getColors().length&&(t=t.getColors().slice(0),n.setColors(t));g.setPalette(n)};this.protectedAcceptCustomEditing=function(n){g.acceptEditing(n);return 0==n.getColors().length?null:n};this.protectedResetDefault=function(n,t){n=n.getColors().slice(0);t.setColors(n);g.setPalette(t)};this.protectedGetClipboardKey=function(){return"kd.qing.core.palette.share"};this.protectedRestoreFromClipboard=function(n,t){t.fromJsonObject(n);g.setPalette(t)};this.protectedCreateSettingUi=
function(n){g=new I;g.setPalette(n);n=g.createJqUi();var t=$("<div>");t.append(n);ba.layoutCtrlWithLRTB(n,0,0,null,16,0,null);return t}}function pa(){hb.call(this);var p,f;this.protectedInitDialog=function(k){k.setSize(400,300)};this.protectedInitEditableModel=function(k){var g=new Q;k&&g.setColors(k.getColors().slice(0));return g};this.protectedInitDisplay=function(k,g){0==k.getColors().length&&(g=g.getColors().slice(0),k.setColors(g));h(k)};this.protectedResetDefault=function(k,g){k=k.getColors().slice(0);
g.setColors(k);h(g)};this.protectedGetClipboardKey=function(){return"kd.qing.core.palette.progress"};this.protectedRestoreFromClipboard=function(k,g){g.fromJsonObject(k);h(g)};this.protectedCreateSettingUi=function(k){var g=new a(l.get("desiredProgress","\u76ee\u6807\u503c")),m=new a(l.get("completedProgress","\u5b9e\u9645\u503c"));p=new b;p.addSelectedListener(function(w){k.getColors()[0]=w.encodeToHexRgb()});f=new b;f.addSelectedListener(function(w){k.getColors()[1]=w.encodeToHexRgb()});h(k);var r=
$("<div>");r.append(g.getJqUi());r.append(m.getJqUi());r.append(p.getJqUi());r.append(f.getJqUi());ba.layoutCtrlWithLRTB(g.getJqUi(),0,null,120,10,null,23);ba.layoutCtrlWithLRTB(m.getJqUi(),180,null,120,10,null,23);ba.layoutCtrlWithLRTB(p.getJqUi(),0,null,120,33,null,23);ba.layoutCtrlWithLRTB(f.getJqUi(),180,null,120,33,null,23);return r};var h=function(k){p.getModel().decodeFrom(k.getColors()[0]);f.getModel().decodeFrom(k.getColors()[1])}}function Ab(){hb.call(this);var p,f,h;this.protectedInitDialog=
function(m){m.setSize(400,360)};this.protectedInitEditableModel=function(m){var r=new Q;m&&r.setColors(m.getColors().slice(0));return r};this.protectedInitDisplay=function(m,r){0==m.getColors().length&&(r=r.getColors().slice(0),m.setColors(r));g(m)};this.protectedResetDefault=function(m,r){m=m.getColors().slice(0);r.setColors(m);g(r)};this.protectedGetClipboardKey=function(){return"kd.qing.core.palette.waterfall"};this.protectedRestoreFromClipboard=function(m,r){r.fromJsonObject(m);g(r)};this.protectedCreateSettingUi=
function(m){var r=$("<div>");p=k(m,0,r,0,10,100,l.get("waterfallPatettePositive","\u6761\u76ee\u6b63\u503c"));f=k(m,1,r,140,10,100,l.get("waterfallPatetteNegative","\u6761\u76ee\u8d1f\u503c"));h=k(m,2,r,0,70,240,l.get("waterfallStage","\u9636\u6bb5"));g(m);return r};var k=function(m,r,w,n,t,B,A){A=new a(A);var E=new b;E.addSelectedListener(function(F){m.getColors()[r]=F.encodeToHexRgb()});w.append(A.getJqUi());w.append(E.getJqUi());ba.layoutCtrlWithLRTB(A.getJqUi(),n,null,B,t,null,23);ba.layoutCtrlWithLRTB(E.getJqUi(),
n,null,B,t+23,null,23);return E},g=function(m){p.getModel().decodeFrom(m.getColors()[0]);f.getModel().decodeFrom(m.getColors()[1]);h.getModel().decodeFrom(m.getColors()[2])}}function Z(){hb.call(this);var p=["#bbbbbb #666666 #6c7fae #08C2B6 #ff9933 #ff3333".split(" "),"#d5d5d5 #808080 #7f93bd #09DCCE #ff9966 #ff6666".split(" "),"#f0f0f0 #999999 #90a1c6 #0AEBDC #ffcc66 #ff9999".split(" ")],f,h,k,g,m;this.protectedInitDialog=function(A){A.setSize(560,420)};this.protectedInitEditableModel=function(A){var E=
new jb;A&&E.mergeColorFrom(A);return E};this.protectedInitDisplay=function(A,E){A.isColorEmpty()&&B(A,E);r(A)};this.protectedResetDefault=function(A,E){B(E,A);r(E)};this.protectedGetClipboardKey=function(){return"kd.qing.core.palette.kpi"};this.protectedRestoreFromClipboard=function(A,E){var F=new jb;F.fromJsonObject(A);E.mergeColorFrom(F);r(E)};this.protectedCreateSettingUi=function(A){f=n(l.get("kpiStyleCaption","\u4e3b\u6307\u6807\u6458\u8981"),A.getCaptionStyleItem());h=n(l.get("kpiStylePrimaryValue",
"\u4e3b\u6307\u6807\u6570\u503c"),A.getPrimaryValueStyleItem());k=n(l.get("kpiStylePrimaryText","\u4e3b\u6307\u6807\u6587\u5b57"),A.getPrimaryTextStyleItem());g=n(l.get("kpiStyleSecondaryValue","\u526f\u6307\u6807\u6570\u503c"),A.getSecondaryValueStyleItem());m=n(l.get("kpiStyleSecondaryText","\u526f\u6307\u6807\u6587\u5b57"),A.getSecondaryTextStyleItem());r(A);A=$("<div>");t(A,f[0],0,null,160,0,null,60);t(A,h[0],0,null,160,60,null,60);t(A,k[0],280,null,160,60,null,60);t(A,g[0],0,null,160,120,null,
60);t(A,m[0],280,null,160,120,null,60);return A};var r=function(A){w(f,A.getCaptionStyleItem());w(h,A.getPrimaryValueStyleItem());w(k,A.getPrimaryTextStyleItem());w(g,A.getSecondaryValueStyleItem());w(m,A.getSecondaryTextStyleItem())},w=function(A,E){var F=(E=E.getColor())?!0:!1;!E&&(E="#808080");var z=A[2];A[1].setChecked(F);z.getModel().decodeFrom(E);z.getJqUi().css("display",F?"":"none")},n=function(A,E){var F=new ea;F.setText(A);F.addCheckedListener(function(L,ia){ia&&(L=L.isChecked(),z.getJqUi().css("display",
L?"":"none"),E.setColor(L?z.getModel().encodeToHexRgb():null))});var z=new b;z.setColorPool(p);z.addSelectedListener(function(L){E.setColor(L.encodeToHexRgb())});A=$("<div>");t(A,F.getJqUi(),0,0,null,0,null,23);t(A,z.getJqUi(),0,0,null,23,null,23);return[A,F,z]},t=function(A,E,F,z,L,ia,za,Za){A.append(E);ba.layoutCtrlWithLRTB(E,F,z,L,ia,za,Za)},B=function(A,E){E=E.getColors();A.getCaptionStyleItem().setColor(E[0]);A.getPrimaryValueStyleItem().setColor(E[1]);A.getPrimaryTextStyleItem().setColor(E[2]);
A.getSecondaryValueStyleItem().setColor(E[3]);A.getSecondaryTextStyleItem().setColor(E[4])}}function Wa(){function p(){la.call(this);var r=this.protectedMethod,w=!1;this.edit=function(A,E,F){w=A;r.setTitle(l.get("styleFontSize","\u5b57\u53f7"));r.setContentPaneCreator(function(){return n(E)});r.setClosingAction(function(z){z&&F(w?E:null)})};var n=function(A){var E=t(l.get("kpiStyleCaption","\u4e3b\u6307\u6807\u6458\u8981"),A.getCaptionStyleItem()),F=t(l.get("kpiStylePrimaryValue","\u4e3b\u6307\u6807\u6570\u503c"),
A.getPrimaryValueStyleItem()),z=t(l.get("kpiStylePrimaryText","\u4e3b\u6307\u6807\u6587\u5b57"),A.getPrimaryTextStyleItem()),L=t(l.get("kpiStyleSecondaryValue","\u526f\u6307\u6807\u6570\u503c"),A.getSecondaryValueStyleItem());A=t(l.get("kpiStyleSecondaryText","\u526f\u6307\u6807\u6587\u5b57"),A.getSecondaryTextStyleItem());var ia=$("<div>");B(ia,E,0,null,160,0,null,60);B(ia,F,0,null,160,60,null,60);B(ia,z,280,null,160,60,null,60);B(ia,L,0,null,160,120,null,60);B(ia,A,280,null,160,120,null,60);E=new u;
E.setText(l.get("paletteDefault","\u7cfb\u7edf\u9ed8\u8ba4"));var za=new u;za.setText(l.get("paletteCustom","\u81ea\u5b9a\u4e49"));F=new v;F.addElement(E);F.addElement(za);F.addChangedListener(function(Za,lb){w=Za==za;ia.css("visibility",w?"visible":"hidden")});E.setChecked(!w);za.setChecked(w);F=$("<div>");F.append(E.getJqUi());F.append(za.getJqUi());F.append(ia);ba.layoutCtrlWithLRTB(E.getJqUi(),0,null,240,0,null,23);ba.layoutCtrlWithLRTB(za.getJqUi(),0,null,240,33,null,23);ba.layoutCtrlWithLRTB(ia,
20,0,null,70,0,null);return F},t=function(A,E){A=new a(A);var F=E.getFontSize();!F&&(F=16);var z=new c;z.setConstraint(6,999,1);z.setValue(F);z.addValueChangedListener(function(L,ia,za,Za){E.setFontSize(za)},!0);F=$("<div>");B(F,A.getJqUi(),0,0,null,0,null,23);B(F,z.getJqUi(),0,0,null,23,null,23);return F},B=function(A,E,F,z,L,ia,za,Za){A.append(E);ba.layoutCtrlWithLRTB(E,F,z,L,ia,za,Za)}}Ja.call(this);var f=this,h=this.protectedMethod,k;this.protectedCreateEditorJqUi=function(r){k=new x;k.addActionListener(g);
f.updateEditor();return k.getJqUi()};this.updateEditor=function(){var r=h.getOriValue()?l.get("paletteCustom","\u81ea\u5b9a\u4e49"):l.get("paletteDefault","\u7cfb\u7edf\u9ed8\u8ba4");k.setModel(r)};var g=function(r){var w=(r=h.getOriValue())?!0:!1;r=m(r);var n=new p;n.setSize(560,420);n.edit(w,r,function(t){h.actionPerformed(t)});n.showDialog()},m=function(r){var w=new jb;w.getCaptionStyleItem().setFontSize(16);w.getPrimaryValueStyleItem().setFontSize(32);w.getPrimaryTextStyleItem().setFontSize(16);
w.getSecondaryValueStyleItem().setFontSize(16);w.getSecondaryTextStyleItem().setFontSize(16);r&&w.mergeFontFrom(r);return w}}function fb(){function p(){la.call(this);var r=this.protectedMethod,w=!1;this.edit=function(A,E,F){w=A;r.setTitle(l.get("styleAlign","\u5bf9\u9f50"));r.setContentPaneCreator(function(){return n(E)});r.setClosingAction(function(z){z&&F(w?E:null)})};var n=function(A){var E=t(l.get("kpiRowOfCaption","\u4e3b\u6307\u6807\u6458\u8981\u6240\u5728\u884c"),A.getCaptionStyleItem()),F=
t(l.get("kpiRowOfPrimary","\u4e3b\u6307\u6807\u6240\u5728\u884c"),A.getPrimaryValueStyleItem());A=t(l.get("kpiRowOfSecondary","\u526f\u6307\u6807\u6240\u5728\u884c"),A.getSecondaryValueStyleItem());var z=$("<div>");B(z,E,0,null,200,0,null,60);B(z,F,0,null,200,60,null,60);B(z,A,0,null,200,120,null,60);E=new u;E.setText(l.get("paletteDefault","\u7cfb\u7edf\u9ed8\u8ba4"));var L=new u;L.setText(l.get("paletteCustom","\u81ea\u5b9a\u4e49"));F=new v;F.addElement(E);F.addElement(L);F.addChangedListener(function(ia,
za){w=ia==L;z.css("visibility",w?"visible":"hidden")});E.setChecked(!w);L.setChecked(w);F=$("<div>");F.append(E.getJqUi());F.append(L.getJqUi());F.append(z);ba.layoutCtrlWithLRTB(E.getJqUi(),0,null,240,0,null,23);ba.layoutCtrlWithLRTB(L.getJqUi(),0,null,240,33,null,23);ba.layoutCtrlWithLRTB(z,20,0,null,70,0,null);return F},t=function(A,E){A=new a(A);var F=E.getAlign();!F&&(F="center");var z=new aa;z.setItemModels(["left","center","right"]);z.setSelected(F);z.addSelectedChangedListener(function(L,
ia,za){E.setAlign(za)});z.setCustomPainter(function(L,ia,za){L="left"==za?l.get("styleAlignLeft","\u5de6\u5bf9\u9f50"):"center"==za?l.get("styleAlignCenter","\u5c45\u4e2d"):"right"==za?l.get("styleAlignRight","\u53f3\u5bf9\u9f50"):"";ia.text(L)});F=$("<div>");B(F,A.getJqUi(),0,0,null,0,null,23);B(F,z.getJqUi(),0,0,null,23,null,23);return F},B=function(A,E,F,z,L,ia,za,Za){A.append(E);ba.layoutCtrlWithLRTB(E,F,z,L,ia,za,Za)}}Ja.call(this);var f=this,h=this.protectedMethod,k;this.protectedCreateEditorJqUi=
function(r){k=new x;k.addActionListener(g);f.updateEditor();return k.getJqUi()};this.updateEditor=function(){var r=h.getOriValue()?l.get("paletteCustom","\u81ea\u5b9a\u4e49"):l.get("paletteDefault","\u7cfb\u7edf\u9ed8\u8ba4");k.setModel(r)};var g=function(r){var w=(r=h.getOriValue())?!0:!1;r=m(r);var n=new p;n.setSize(560,420);n.edit(w,r,function(t){h.actionPerformed(t)});n.showDialog()},m=function(r){var w=new jb;w.getCaptionStyleItem().setAlign("center");w.getPrimaryValueStyleItem().setAlign("center");
w.getPrimaryTextStyleItem().setAlign(null);w.getSecondaryValueStyleItem().setAlign("center");w.getSecondaryTextStyleItem().setAlign(null);r&&w.mergeAlignFrom(r);return w}}function Va(){function p(){la.call(this);var n=this,t=this.protectedMethod,B;this.edit=function(E,F){t.setTitle(l.get("conditionStyle","\u6761\u4ef6\u6837\u5f0f"));B||(B=new f,n.setSize(640,400),t.setContentPaneCreator(A),t.setClosingAction(function(z){z&&F(B.getModel())}));B.setModel(E)};var A=function(){return B.getJqUi()}}function f(){function n(){H.AbstractOneItemPanel.call(this);
var E,F=new q;this.setModel=function(z){E=z;F.setText(z.script);z.focus&&setTimeout(F.requestFocus,0)};this.protectedGetHeight=function(){return 90};this.protectedInitJqUi=function(z){F.addEditedListener(function(L){L=$.trim(L.getText());E.script=L});z.append(F.getJqUi());ba.layoutCtrlWithLRTB(F.getJqUi(),10,40,null,0,null,80)}}H.call(this);var t=this.protectedMethod,B;this.getModel=function(){for(var E=null,F=0;F<B.length;F++){var z=B[F].script;z&&(!E&&(E=[]),E.push(z))}return E};this.setModel=function(E){B=
[];if(E)for(var F=0;F<E.length;F++){var z=A(E[F]);B.push(z)}t.updateUi()};this.protectedGetAddButtonText=function(){return l.get("conditionStyleAppend","\u6dfb\u52a0\u4e00\u884c\u811a\u672c")};this.protectedUpdateUiImpl=function(){t.clearAllItemUi();for(var E=0;E<B.length;E++)t.appendItemUi(B[E])};this.protectedCreateOneItemPanel=function(E){var F=new n;F.setModel(E);return F};this.protectedAddItemAction=function(){var E=A("");E.focus=!0;B.push(E);t.appendItemUi(E)};this.protectedDeleteItemModel=
function(E){B.splice(E,1)};var A=function(E){var F={};F.script=E;return F}}Ja.call(this);var h=this,k=this.protectedMethod,g;this.protectedCreateEditorJqUi=function(n){g=new x;g.setCustomPainter(m);g.addActionListener(r);g.addClearListener(w);g.setClearable(!0);h.updateEditor();return g.getJqUi()};this.updateEditor=function(){var n=k.getOriValue();g.setModel(n?n.length:0)};var m=function(n){return n?l.get("conditionStyleInputterDisplay","\u5df2\u8bbe\u7f6e#1\u9879").replace("#1",n):l.get("itemEmpty",
"\u672a\u8bbe\u7f6e")},r=function(n){n=new p;n.edit(k.getOriValue(),function(t){k.actionPerformed(t)});n.showDialog()},w=function(n){k.actionPerformed(null)}}function Ka(){function p(){la.call(this);var t=this,B=this.protectedMethod,A,E,F,z;this.edit=function(za,Za){B.setTitle(l.get("rulerScope","\u6570\u8f74\u8303\u56f4"));t.setSize(480,360);B.setContentPaneCreator(function(){return L(za)});B.setClosingAction(function(lb){if(lb){lb=A.getValue();var O=E.getValue(),D=z.getSelected();if(lb&&O){var V=
parseFloat(lb),sa=parseFloat(O);V>sa&&(V=lb,lb=O,O=V)}Za([lb,O,D])}})};var L=function(za){var Za=za[0],lb=za[1];za=za[2];A=new f;A.setCaption(l.get("rulerScopeMin","\u6700\u5c0f\u503c"));A.setValue(Za);Za=A.createJqUi(ia);E=new f;E.setCaption(l.get("rulerScopeMax","\u6700\u5927\u503c"));E.setValue(lb);lb=E.createJqUi(ia);F=new a;F.setText(l.get("rulerStart","\u96f6\u523b\u5ea6"));F.setEnabled(!1);z=new aa;z.setItemModels([Na.RulerStart_Zero,Na.RulerStart_Nonzero]);z.setCustomPainter(function(O,D,
V){D.text(r(V))});z.setSelected(za);ia();za=$("<div>");za.append(Za);za.append(lb);za.append(F.getJqUi());za.append(z.getJqUi());ba.layoutCtrl(Za,0,0,200,120);ba.layoutCtrl(lb,240,0,200,120);ba.layoutCtrl(F.getJqUi(),0,160,200,23);ba.layoutCtrl(z.getJqUi(),0,190,200,23);return za},ia=function(){var za=!A.getValue()&&!E.getValue();F.setEnabled(za);z.setEnabled(za)}}function f(){var t=new a,B=new u,A=new u,E=new c;this.setCaption=function(F){t.setText(F)};this.setValue=function(F){var z=F?!0:!1;B.setChecked(!z);
A.setChecked(z);E.setValue(F?parseFloat(F):0);E.setEnabled(A.isChecked())};this.getValue=function(){return A.isChecked()?E.getValue()+"":null};this.createJqUi=function(F){B.setText(l.get("rulerScopeAuto","\u81ea\u52a8"));A.setText(l.get("rulerScopeFixed","\u56fa\u5b9a"));var z=new v;z.addElement(B);z.addElement(A);z.addChangedListener(function(L,ia){E.setEnabled(A.isChecked());F()});E.setConstraint(-999999999999999,999999999999999,1);E.supportDecimal(10);z=$("<div>");z.append(t.getJqUi());z.append(B.getJqUi());
z.append(A.getJqUi());z.append(E.getJqUi());ba.layoutCtrlWithLRTB(t.getJqUi(),0,0,null,0,null,23);ba.layoutCtrlWithLRTB(B.getJqUi(),0,0,null,30,null,23);ba.layoutCtrlWithLRTB(A.getJqUi(),0,0,null,60,null,23);ba.layoutCtrlWithLRTB(E.getJqUi(),20,0,null,90,null,23);return z}}Ja.call(this);var h=this,k=this.protectedMethod,g;this.protectedCreateEditorJqUi=function(t){g=new x;g.setCustomPainter(m);g.addActionListener(w);g.addClearListener(n);g.setClearable(!0);h.updateEditor();return g.getJqUi()};this.updateEditor=
function(){var t=k.getOriValue();if(t){var B=t[1],A=t[2];t[0]||B||A!=Na.RulerStart_Zero||(t=null)}g.setModel(t)};var m=function(t){if(t){var B=t[0],A=t[1];t=t[2];return B||A?"#1 ~ #2".replace("#1",B?B:"").replace("#2",A?A:""):r(t)}return r(Na.RulerStart_Zero)},r=function(t){switch(t){case Na.RulerStart_Zero:return l.get("rulerStartZero","\u5305\u542b\u96f6");case Na.RulerStart_Nonzero:return l.get("rulerStartNonzero","\u5141\u8bb8\u4e0d\u5305\u542b\u96f6");default:return t}},w=function(t){t=new p;
t.edit(k.getOriValue(),function(B){k.actionPerformed(B)});t.showDialog()},n=function(t){t=[null,null,Na.RulerStart_Zero];g.setModel(null);k.actionPerformed(t)}}function ab(){function p(){la.call(this);var n=this,t=this.protectedMethod,B;this.edit=function(A,E){t.setTitle(l.get("refline","\u53c2\u8003\u7ebf"));B||(B=new ca,B.setMeasureFields(k()),B.setPromptDisplayer(function(F){t.getMessageCurtain().showPrompt(F)}),n.setSize(400,380),t.setContentPaneCreator(function(){return B.getJqUi()}),t.setClosingChecker(B.isValidToAccepted),
t.setClosingAction(function(F){F&&E(B.getModel())}));B.setModel(A)}}Ja.call(this);var f=this,h=this.protectedMethod,k,g;this.setMeasureFieldsGetter=function(n){k=n};this.protectedCreateEditorJqUi=function(n){g=new x;g.setCustomPainter(m);g.addActionListener(r);g.addClearListener(w);g.setClearable(!0);f.updateEditor();return g.getJqUi()};this.updateEditor=function(){var n=h.getOriValue();g.setModel(n?n.length:0)};var m=function(n){return n?l.get("reflineItem","\u5df2\u8bbe\u7f6e#1\u6761\u53c2\u8003\u7ebf").replace("#1",
n):l.get("itemEmpty","\u672a\u8bbe\u7f6e")},r=function(n){n=new p;n.edit(h.getOriValue(),function(t){h.actionPerformed(t)});n.showDialog()},w=function(n){h.actionPerformed(null)}}function kb(){Ja.call(this);var p=this,f=this.protectedMethod,h,k;this.setFacadeCreator=function(r){h=r};this.protectedCreateEditorJqUi=function(r){k=new x;k.setCustomPainter(g);k.addActionListener(m);k.setClearable(!1);p.updateEditor();return k.getJqUi()};this.updateEditor=function(){var r=f.getOriValue();k.setModel(r)};
var g=function(r){return r?l.get("paletteCustom","\u81ea\u5b9a\u4e49"):l.get("paletteDefault","\u7cfb\u7edf\u9ed8\u8ba4")},m=function(r){r=new K;r.setTitle(l.get("palette","\u8c03\u8272\u677f"));r.setup(k.getModel(),h,function(w){f.actionPerformed(w)});r.showDialog()}}function La(){Ja.call(this);var p=this,f=this.protectedMethod,h;this.protectedCreateEditorJqUi=function(m){h=new x;h.setCustomPainter(k);h.addActionListener(g);h.setClearable(!1);p.updateEditor();return h.getJqUi()};this.updateEditor=
function(){var m=f.getOriValue();h.setModel(m)};var k=function(m){return m=(m=m?m.getRefName():l.get("itemEmpty","\u672a\u8bbe\u7f6e"))?m:l.get("mapTemplateNotFound","\u627e\u4e0d\u5230\u6a21\u677f")},g=function(m){Y.selectTemplate(f.getOriValue(),function(r){r&&f.actionPerformed(r)})}}function ob(){function p(){la.call(this);var B=this,A=this.protectedMethod,E,F=function(L){E||(E=new f,B.setSize(640,480),A.setContentPaneCreator(function(){return E.getJqUi()}),A.setClosingAction(function(ia){ia&&
L(E.getEditedResult())}),A.setTitle(l.get("mapRegionMapping","\u5730\u57df\u6620\u5c04")))},z=this.showDialog;this.showDialog=function(L,ia){F(ia);z();r(function(za,Za){za?E.prepareToStart(Za,za,L):A.getMessageCurtain().showPrompt(l.get("mapRegionNotFound","\u627e\u4e0d\u5230\u5730\u56fe\u4fe1\u606f\u3002"))})}}function f(){function B(z){KTDefaultCellRender.call(this,z);var L=this,ia=this.paintCellUI;this.paintCellUI=function(Za,lb){L.getCurrentRowIdx()>=Xa.getHeadRowCount()&&1==L.getCurrentColIdx()?
(lb=(lb=L.getCell())?lb.getValue():null,za(Za,L.getCellWidth(),L.getCellHeight(),lb,L.getCurrentRow())):ia(Za,lb)};var za=function(Za,lb,O,D,V){var sa=[null].concat(E.slice(0)),Ba=Xa.createCtrlInCell(Za,lb,O,aa);Ba.setSelected(D?D:null);Ba.setItemModels(sa);Ba.addSelectedChangedListener(function(Fa,yb,Hb){Fa=V.getCell(1);Fa.setValue(Hb);Fa.getUserObject()&&(Fa.setUserObject(!1),Ba.setSelected(Hb))});Ba.setCustomPainter(function(Fa,yb,Hb){yb.text(Hb?Hb:"");Fa&&((Fa=V.getCell(1))&&Fa.getUserObject()?
(Fa=bb.createWarning(),Fa.addClass("square-property-map-mapping-membernotexist"),Fa.appendTo($(yb).parent())):$(yb).parent().find(".square-property-map-mapping-membernotexist").remove())})}}var A,E;this.getJqUi=function(){if(!A){A=Xa.createTable();Xa.bindTableListenerForCtrl(A);var z=new B(A);z.setOutsideVisible(!1);A.setCellRender(z);z=A.addColumn();z.setWidth(200);z=A.addColumn();z.setWidth(240);z=Xa.createHeadRow(A);z.getCell(0).setValue(l.get("mapRegion","\u5730\u56fe\u4e0a\u7684\u533a\u57df"));
z.getCell(1).setValue(l.get("mapDimensionMember","\u6570\u636e"))}return $(A.getUI())};this.prepareToStart=function(z,L,ia){E=z;if(ia){z={};for(var za in ia)for(var Za=ia[za],lb=0;lb<Za.length;lb++)z[Za[lb]]=za;ia=z}else if(E){ia=F();za={};for(z=0;z<L.length;z++)lb=L[z],Za=lb.name,lb=lb.display,ia[lb]&&(za[Za]=lb);ia=za}else ia={};!E&&(E=[]);za=F();for(z=0;z<L.length;z++){lb=L[z];Za=lb.name;var O=lb.display;lb=Xa.createRow(A);var D=lb.getCell(0);D.setValue(O);D.setUserObject(Za);if(Za=ia[Za])D=lb.getCell(1),
D.setValue(Za),za[Za]||D.setUserObject(!0)}Xa.refresh(A)};this.getEditedResult=function(){for(var z=null,L=Xa.getHeadRowCount();L<A.getRowsCount();L++){var ia=A.getRow(L),za=ia.getCell(1);if(null!=za.getValue()){za=za.getValue();z||(z={});var Za=z[za];Za||(Za=[],z[za]=Za);za=ia.getCell(0);ia=za.getUserObject();Za.push(ia)}}return z};var F=function(){for(var z={},L=0;L<E.length;L++)z[E[L]]=!0;return z}}Ja.call(this);var h=this,k=this.protectedMethod,g,m,r;this.getJqCtrlUi=function(){return g.getJqUi()};
this.setBeforePopupChecker=function(B){m=B};this.setRegionGetter=function(B){r=B};this.protectedCreateEditorJqUi=function(B){g=new x;g.setCustomPainter(w);g.addActionListener(n);g.addClearListener(t);g.setClearable(!0);h.updateEditor();return g.getJqUi()};this.updateEditor=function(){var B=k.getOriValue();g.setModel(B)};var w=function(B){var A=0;if(B)for(var E in B)A++;return A?l.get("mapRegionItemText","\u5df2\u6620\u5c04#1\u9879").replace("#1",A):l.get("itemEmpty","\u672a\u8bbe\u7f6e")},n=function(B){if(m()){B=
new p;var A=k.getOriValue();B.showDialog(A,function(E){k.actionPerformed(E)})}},t=function(B){k.actionPerformed(null)}}function ta(){function p(){la.call(this);var B=this,A=this.protectedMethod,E=this.showDialog;this.showDialog=function(z,L,ia,za){var Za=0<z.length?z[0]:ia();z=1<z.length?z.slice(1):[ia()];var lb=new k;lb.setModel(Za);var O=lb.createJqUi(za()),D=new f;D.setEditingSections(z,ia,za);A.setTitle(l.get("dialSection","\u5206\u6bb5"));B.setSize(800,450);A.setContentPaneCreator(function(){var V=
new a(l.get("dialSectionFrom","\u4ece"));ba.layoutCtrlWithLRTB(V.getJqUi(),8,null,32,0,null,23);ba.layoutCtrlWithLRTB(O,40,null,400,0,null,23);ba.layoutCtrlWithLRTB(D.getJqUi(),0,0,null,40,0,null);var sa=$("<div>");sa.append(V.getJqUi());sa.append(O);sa.append(D.getJqUi());return sa});A.setClosingChecker(function(){return lb.isBoundFieldUncompleted()?(F(O,l.get("dialSectionPromptA1","\u672a\u8bbe\u7f6e\u5b8c\u6574\u3002")),!1):D.checkingInput(lb.getEditingNumber(),F)});A.setClosingAction(function(V){V&&
(lb.acceptEditing(),V=[Za].concat(D.getEditedResult()),L(V))});E()};var F=function(z,L){var ia=new d;ia.setText(L);ia.show(z,!0)}}function f(){H.call(this);var B=this.protectedMethod,A,E,F;this.setEditingSections=function(z,L,ia){A=z;E=L;F=ia};this.checkingInput=function(z,L){var ia=A.length,za=!0,Za=[z];B.visitAllItemPanel(function(lb,O){var D=!1;lb.checkingInput(Za,function(V,sa){B.scrollItemUiToVisible(O,function(){L(V,sa)})},O,ia)||(za=!1,D=!0);return D});return za};this.getEditedResult=function(){B.visitAllItemPanel(function(z,
L){z.acceptEditing()});return A};this.protectedGetAddButtonText=function(){return l.get("dialSectionAppend","\u6dfb\u52a0\u5206\u6bb5")};this.protectedUpdateUiImpl=function(){B.clearAllItemUi();for(var z=0;z<A.length;z++)B.appendItemUi(A[z])};this.protectedCreateOneItemPanel=function(z){var L=new h;L.setMetaGetter(F);L.setItemModel(z);return L};this.protectedAddItemAction=function(){var z=E();A.push(z);B.appendItemUi(z)};this.protectedDeleteItemModel=function(z){A.splice(z,1)}}function h(){H.AbstractOneItemPanel.call(this);
var B,A,E,F,z,L;this.setMetaGetter=function(za){B=za};this.setItemModel=function(za){A=za};this.checkingInput=function(za,Za,lb,O){var D=za[0],V=F.getEditingNumber();if(null!==V){if(null!==D&&V<=D)return Za(E,l.get("dialSectionPromptA2","\u5206\u6bb5\u6570\u503c\u5fc5\u987b\u9012\u589e\u3002")),!1;za[0]=V}return F.isBoundFieldUncompleted()?(Za(E,l.get("dialSectionPromptA1","\u672a\u8bbe\u7f6e\u5b8c\u6574\u3002")),!1):!z.getColor()&&(1<O||0<lb)?(za=l.get("dialSectionPromptA3","\u5f53\u53ea\u6709\u4e00\u4e2a\u5206\u6bb5\u65f6\u624d\u53ef\u4ee5\u9009\u62e9\u989c\u8272\u4e3a\u201c#1\u201d\u3002"),
za=za.replace("#1",l.get("dialSectionColorDefault","\u7f3a\u7701")),Za(z.getJqUi(),za),!1):!0};this.acceptEditing=function(){A.setColor(z.getColor());A.setLabel(L.getText());F.acceptEditing()};this.protectedGetHeight=function(){return 50};this.protectedInitJqUi=function(za){var Za=B();F=new k;F.setModel(A);E=F.createJqUi(Za);z=new Jb;z.setDisplayForNull(l.get("dialSectionColorDefault","\u7f3a\u7701"));z.setColorPool([["#40A9FF","#73D13D","#F8CC57","#F57582"],["#1890FF","#3FB27F","#F0B30A","#FF5A75"],
["#6C7FAE","#08C2B6","#FF9933","#FF3333"]]);z.setColor(A.getColor());L=new W;L.setText(A.getLabel());Za=new a(l.get("dialSectionTo","\u5230"));var lb=new a(l.get("dialSectionColor","\u989c\u8272")),O=new a(l.get("dialSectionLabel","\u6807\u7b7e"));ia(za,Za.getJqUi(),8,32);ia(za,E,40,400);ia(za,lb.getJqUi(),460,40);ia(za,z.getJqUi(),500,60);ia(za,O.getJqUi(),580,40);ia(za,L.getJqUi(),620,100)};var ia=function(za,Za,lb,O){Za.appendTo(za);ba.layoutCtrlWithLRTB(Za,lb,null,O,10,null,23)}}function k(){var B=
[1,2],A,E=new aa,F=new c,z=new ra,L;this.setModel=function(O){A=O};this.getEditingNumber=function(){return 1==E.getSelected()?F.getValue():null};this.isBoundFieldUncompleted=function(){return 2==E.getSelected()?z.getEditingMetaFieldFullName()&&z.getEditingAggregation()?!1:!0:!1};this.acceptEditing=function(){1==E.getSelected()?(A.setEndValue(F.getValue()),A.bindField(null,null)):2==E.getSelected()&&(A.setEndValue(null),A.bindField(z.getEditingMetaFieldFullName(),z.getEditingAggregation()))};this.createJqUi=
function(O){var D=$("<div>");Za(O,D);ia(D,E.getJqUi(),0,null,64);ia(D,F.getJqUi(),72,0,null);ia(D,z.getMetaFieldJqUi(),72,84,null);ia(D,z.getAggregationJqUi(),null,0,84);return D};var ia=function(O,D,V,sa,Ba){ba.layoutCtrlWithLRTB(D,V,sa,Ba);ba.layoutCtrlMiddleAlign(D,23);O.append(D)},za=function(O){F.getJqUi().css("display",1==O?"":"none");z.getMetaFieldJqUi().css("display",2==O?"":"none");z.getAggregationJqUi().css("display",2==O?"":"none")},Za=function(O,D){E.setSelected(A.isBoundField()?2:1);
E.setItemModels(B);E.setCustomPainter(function(sa,Ba,Fa){sa=2==Fa?l.get("dialSectionBoundaryBindField","\u7ed1\u5b57\u6bb5"):1==Fa?l.get("dialSectionBoundaryConstant","\u6570\u503c"):"";Ba.text(sa)});E.addSelectedChangedListener(function(sa,Ba,Fa){L&&(L.remove(),L=null);za(Fa)});za(E.getSelected());var V=parseFloat(A.getEndValue());F.setValue(isNaN(V)?0:V);F.setConstraint(-999999999999999,999999999999999,1);F.supportDecimal(10);z.setSelectionListener(function(){L&&(L.remove(),L=null)});z.initCtrl(O,
function(sa,Ba){A.isBoundField()&&Ba(sa,A.getMetaFieldFullName(),A.getAggregation(),function(Fa){var yb=l.get("dialSectionPromptB1","\u65e0\u6548\u7684\u8ba1\u7b97\u5b57\u6bb5#1\u3002");yb=yb.replace("#1",Fa.getComplexText());lb(D,yb)},function(Fa,yb){Fa=Fa?X.aggregationToString(Fa):"nul";yb=yb?X.aggregationToString(yb):"nul";var Hb=l.get("dialSectionPromptB2","\u7531\u4e8e\u5b57\u6bb5\u6570\u636e\u7c7b\u578b\u53d8\u5316\u3001\u8ba1\u7b97\u5b57\u6bb5\u5185\u5bb9\u53d8\u5316\u6216\u5176\u5b83\u76f8\u5173\u539f\u56e0\uff0c\u4e4b\u524d\u8bbe\u7f6e\u7684\u805a\u5408\u65b9\u5f0f\u201c#1\u201d\u5df2\u4e0d\u9002\u7528\u3002");
Hb=Hb.replace("#1",Fa);Hb=Hb.replace("#2",yb);lb(D,Hb);return!0},function(Fa){Fa=l.get("dialSectionPromptB3","\u627e\u4e0d\u5230\u5b57\u6bb5\u201c#1\u201d\u3002").replace("#1",Fa);lb(D,Fa)})})},lb=function(O,D){L||(L=bb.createWarning(),L.css("z-index",1),L.appendTo(O),ba.layoutCtrl(L,-10,0,null,null));L.attr("title",D)}}Ja.call(this);var g=this,m=this.protectedMethod,r,w,n;this.bindModelContext=function(B,A){w=B;n=A};this.protectedCreateEditorJqUi=function(B){r=new x;r.setCustomPainter(function(A){return A&&
1<A.length?l.get("dialSectionCount","#1\u4e2a\u5206\u6bb5").replace("#1",A.length-1):l.get("itemEmpty","\u672a\u8bbe\u7f6e")});r.addActionListener(function(A){(new p).showDialog(t(r.getModel()),function(E){m.actionPerformed(1<E.length?E:null)},function(){var E=n();E.setColor("#40A9FF");return E},w)});r.addClearListener(function(A){m.actionPerformed(null)});r.setClearable(!0);g.updateEditor();return r.getJqUi()};this.updateEditor=function(){r.setModel(m.getOriValue())};var t=function(B){var A=[];if(B)for(var E=
0;E<B.length;E++)A.push(B[E].copyToEdit());return A}}function ja(){function p(){la.call(this);var z=this,L=this.protectedMethod;this.edit=function(ia,za,Za,lb){var O=new f;O.setSelectableFields(lb);z.setSize(980,580);L.getDialogCtrl().setFullScreenEnabled(U.FULLSCREEN_ONLY_HEIGHT);L.setTitle(l.get("chartCustomList","\u81ea\u5b9a\u4e49\u5217\u8868"));L.setContentPaneCreator(O.createJqUi);L.setClosingChecker2(function(V){O.toAccepted(V,L.getMessageCurtain().showPrompt)},function(V){O.toCancel(V)},!0);
L.setClosingAction(function(V){V&&(V=[O.getEditedHeadModel(),O.getEditedContentModel(),O.getEditedTailModel()],Za(V))});lb=za[0];var D=za[1];za=za[2];lb&&(lb=lb.copyToEdit());D&&(D=D.copyToEdit());za&&(za=za.copyToEdit());O.setEditingModel(ia,lb,D,za)}}function f(){var z=this,L,ia,za,Za,lb,O,D,V,sa,Ba,Fa,yb,Hb,Gb,Nb,$b;this.toAccepted=function(fc,lc){var ua=!0;hc()&&(ua=!1,lc(l.get("clistPromptWarning","\u5b58\u5728\u672a\u89e3\u51b3\u7684\u95ee\u9898\u3002")));fc(ua)};this.toCancel=function(fc){if(L){var lc=
C.createFeedbackDialog();lc.setOptionType(C.OPTION_YES_NO);lc.setMsgImageType(C.MSG_CONFIRM);lc.setMessage(l.get("clistAskAbort","\u662f\u5426\u653e\u5f03\u5f53\u524d\u7684\u4fee\u6539\uff1f"));lc.setClosingChecker(function(ua){fc(ua==C.RETURN_YES);return!0});lc.showDialog()}else fc(!0)};this.setSelectableFields=function(fc){ia=fc};this.createJqUi=function(){var fc=new P;fc.setTitle(l.get("clistSettingGroupWhole","\u8868"));Fa=new P;Gb=new P;var lc=new P;lc.setTitle(l.get("clistSettingGroupPreview",
"\u9884\u89c8"));Ob(Fa.getJqContainer());tb(Gb.getJqContainer());Xb(lc.getJqContainer());nc(fc.getJqContainer());setTimeout(function(){Zb();hc()},0);var ua=$("<div>");ua.append(fc.getJqUi());ua.append(Fa.getJqUi());ua.append(Gb.getJqUi());ua.append(lc.getJqUi());ba.layoutCtrlWithLRTB(fc.getJqUi(),0,null,400,0,null,80);ba.layoutCtrlWithLRTB(Fa.getJqUi(),0,null,400,84,null,80);ba.layoutCtrlWithLRTB(lc.getJqUi(),0,null,400,168,0,null);ba.layoutCtrlWithLRTB(Gb.getJqUi(),404,0,null,0,0,null);return ua};
this.setEditingModel=function(fc,lc,ua,Ia){za=fc;Za=lc;lb=ua;O=Ia;D=ua;L=!1};this.getEditedHeadModel=function(){return V.isChecked()?Za:null};this.getEditedContentModel=function(){return lb};this.getEditedTailModel=function(){return sa.isChecked()?O:null};var nc=function(fc){var lc=function(rb,Tb,Kb){Tb.setTabEnabled(Kb,rb.isChecked());rb.isChecked()?Tb.setCurrentId(Kb):jc(!1);hc();L=!0},ua=Za?!0:!1,Ia=O?!0:!1;V=new ea;V.setText(l.get("clistHead","\u8868\u5934"));V.setChecked(ua);V.addCheckedListener(function(rb,
Tb){Tb&&lc(rb,ib,"head")});sa=new ea;sa.setText(l.get("clistTail","\u8868\u5c3e"));sa.setChecked(Ia);sa.addCheckedListener(function(rb,Tb){Tb&&lc(rb,ib,"tail")});Ba=new a(l.get("clistBody","\u8868\u4f53"));Ba.getJqUi().on("click",function(rb){ib.setCurrentId("body")});var ib=new r;ib.setTabs(["head","body","tail"]);ib.setTabEnabled("head",ua);ib.setTabEnabled("tail",Ia);ib.setCurrentId("body");ib.setSelectionListener(function(rb){if("head"==rb){!Za&&(Za=Rb.createContentPanelModel(28));D=Za;var Tb=
l.get("clistHead","\u8868\u5934");dc(Tb,!1);$b.markCurrentAsHead()}"body"==rb&&Zb();"tail"==rb&&(!O&&(O=Rb.createContentPanelModel(28)),D=O,rb=l.get("clistTail","\u8868\u5c3e"),dc(rb,!1),$b.markCurrentAsTail())});fc.append(V.getJqUi());fc.append(Ba.getJqUi());fc.append(sa.getJqUi());fc.append(ib.getJqUi());ba.layoutCtrlWithLRTB(V.getJqUi(),20,null,100,0,null,22);ba.layoutCtrlWithLRTB(Ba.getJqUi(),140,null,100,0,null,22);ba.layoutCtrlWithLRTB(sa.getJqUi(),260,null,100,0,null,22);ba.layoutCtrlWithLRTB(ib.getJqUi(),
10,null,360,22,null,22)},Ob=function(fc){var lc=new a(l.get("clistRowHeight","\u884c\u9ad8")),ua=new a(l.get("styleBackgroundColor","\u80cc\u666f\u989c\u8272"));yb=new c;yb.setConstraint(1,200,1);yb.addValueChangedListener(function(Ia,ib,rb,Tb){D.setRowHeight(rb);jc(!0);Nb.updateInvalidPrompt();hc();L=!0},!0);Hb=new Ya;Hb.setColorPool(e.getColorPool7());Hb.setChangedListener(function(Ia){D.setBackgroundColor(Ia.getNullableColor());jc(!0);L=!0});Hb.setUserObject(function(Ia){Ia?(ua.getJqUi().show(),
Hb.getJqUi().show()):(ua.getJqUi().hide(),Hb.getJqUi().hide())});fc.append(lc.getJqUi());fc.append(yb.getJqUi());fc.append(ua.getJqUi());fc.append(Hb.getJqUi());ba.layoutCtrlWithLRTB(lc.getJqUi(),10,null,120,0,null,19);ba.layoutCtrlWithLRTB(yb.getJqUi(),10,null,120,19,null,23);ba.layoutCtrlWithLRTB(ua.getJqUi(),230,null,140,0,null,19);ba.layoutCtrlWithLRTB(Hb.getJqUi(),230,null,140,19,null,23)},tb=function(fc){Nb=new h;Nb.setContext(ia,za);Nb.setModifiedListener(function(lc){if(0<=lc){var ua=D.getContentAreas()[lc];
$b.refreshArea(lc,ua);$b.scrollCurrentVisible()}else jc(!0);hc();L=!0});Nb.setItemHoverListener(function(lc,ua){$b.markHoverArea(lc,ua)});fc.append(Nb.getJqUi());ba.layoutCtrlWithLRTB(Nb.getJqUi(),0,0,null,0,0,null)},Xb=function(fc){$b=new m;$b.setAllFields(ia);fc.append($b.getJqUi())},Zb=function(){var fc=l.get("clistBody","\u8868\u4f53");D=lb;dc(fc,!0);$b.markCurrentAsBody()},dc=function(fc,lc){Fa.setTitle(l.get("clistSettingGroupAttr","#1\u5c5e\u6027").replace("#1",fc));Gb.setTitle(l.get("clistSettingGroupContent",
"#1\u5185\u5bb9").replace("#1",fc));yb.setValue(D.getRowHeight());Hb.setNullableColor(D.getBackgroundColor());Nb.setCurrentModel(D,lc);jc(!1);Hb.getUserObject()(!lc)},jc=function(fc){$b.refreshAll(za,z.getEditedHeadModel(),z.getEditedContentModel(),z.getEditedTailModel());fc&&$b.scrollCurrentVisible()},hc=function(){var fc=qc(V,!0,z.getEditedHeadModel()),lc=qc(Ba,!1,z.getEditedContentModel()),ua=qc(sa,!0,z.getEditedTailModel());return fc||lc||ua},qc=function(fc,lc,ua){var Ia=!1,ib=fc.getUserObject();
if(ua)for(var rb=ua.getContentAreas(),Tb=0;Tb<rb.length;Tb++)if(Nb.checkOneAreaInvalid(ua,lc,rb[Tb])){Ia=!0;ib||(ib=f.createWarningIcon(-10,-16,140,l.get("clistPromptWarning","\u5b58\u5728\u672a\u89e3\u51b3\u7684\u95ee\u9898\u3002")),fc.setUserObject(ib));ib.appendTo(fc.getJqUi().parent());lc=fc.getJqUi().prop("offsetLeft")-10;fc=fc.getJqUi().prop("offsetTop")+fc.getJqUi().prop("offsetHeight")-8;ba.layoutCtrl(ib,lc,fc);break}!Ia&&ib&&ib.detach();return Ia}}function h(){H.call(this);var z=this,L=this.protectedMethod,
ia,za,Za,lb,O,D;this.setContext=function(sa,Ba){ia=sa;za=Ba};this.setCurrentModel=function(sa,Ba){Za=sa;lb=Ba;L.updateUi()};this.setModifiedListener=function(sa){O=sa};this.setItemHoverListener=function(sa){D=sa};this.updateInvalidPrompt=function(){L.visitAllItemPanel(function(sa,Ba){sa.updateInvalidPrompt()})};this.protectedGetAddButtonText=function(){return l.get("clistAppendArea","\u6dfb\u52a0\u663e\u793a\u533a\u57df")};this.protectedUpdateUiImpl=function(){L.clearAllItemUi();if(Za)for(var sa=
Za.getContentAreas(),Ba=0;Ba<sa.length;Ba++)L.appendItemUi(sa[Ba])};this.protectedCreateOneItemPanel=function(sa){var Ba=new k;Ba.setModifiedListener(function(Fa){Fa=L.searchItemPanelIndex(Fa);O(Fa)});Ba.setHoverListener(function(Fa,yb){Fa=L.searchItemPanelIndex(Fa);0<=Fa&&D(Fa,yb)});Ba.setItemModel(sa,ia,function(Fa){return z.checkOneAreaInvalid(Za,!lb,Fa)},lb);return Ba};this.protectedAddItemAction=function(){var sa=Rb.createContentAreaModel();V(sa,88,20);lb?sa.setFieldIndex(0):sa.setCustomText("");
Za.getContentAreas().push(sa);L.appendItemUi(sa);O(-1)};this.protectedDeleteItemModel=function(sa){Za.getContentAreas().splice(sa,1);O(-1)};this.protectedMovable=function(){return!0};this.protectedMoveItemModel=function(sa,Ba){var Fa=Za.getContentAreas();sa=Fa.splice(sa,1)[0];Fa.splice(Ba,0,sa);O(-1)};this.checkOneAreaInvalid=function(sa,Ba,Fa){var yb=[];(Fa.getX()>za||Fa.getX()+Fa.getWidth()>za)&&yb.push(l.get("clistPrompt1","\u663e\u793a\u533a\u57df\u8303\u56f4\u8d85\u51fa\u884c\u5bbd#1\u3002").replace("#1",
za));sa=sa.getRowHeight();(Fa.getY()>sa||Fa.getY()+Fa.getHeight()>sa)&&yb.push(l.get("clistPrompt2","\u663e\u793a\u533a\u57df\u8303\u56f4\u8d85\u51fa\u884c\u9ad8#1\u3002").replace("#1",sa));Ba&&0<=Fa.getFieldIndex()&&(Ba=ia[Fa.getFieldIndex()])&&Ba.isDimension()&&yb.push(l.get("clistPrompt3","\u5728\u8868\u5934\u3001\u8868\u5c3e\u7ed1\u5b9a\u7ef4\u5ea6\u5b57\u6bb5\u6ca1\u6709\u610f\u4e49\uff0c\u4f46\u53ef\u4ee5\u7ed1\u5b9a\u5ea6\u91cf\u5b57\u6bb5\u4f5c\u4e3a\u603b\u8ba1\u3002"));Fa.getColorBar()&&
((Ba=0<=Fa.getFieldIndex()?ia[Fa.getFieldIndex()]:null)&&Ba.isMeasure()||yb.push(l.get("clistPrompt4","\u53ea\u6709\u5728\u7ed1\u5b9a\u5ea6\u91cf\u5b57\u6bb5\u65f6\u624d\u53ef\u4ee5\u7ed8\u5236\u6570\u636e\u6761\u3002")));return 0==yb.length?null:yb};var V=function(sa,Ba,Fa){var yb=Za.getRowHeight(),Hb=za,Gb=function(nc){for(var Ob=nc+Fa,tb=Hb-Ba,Xb=4;Xb<=tb;Xb++){a:{var Zb=Xb;for(var dc=nc,jc=Xb+Ba,hc=Ob,qc=Za.getContentAreas(),fc=0;fc<qc.length;fc++){var lc=qc[fc],ua=lc.getX(),Ia=lc.getY(),ib=ua+
lc.getWidth();lc=Ia+lc.getHeight();if(!(dc>=lc||hc<=Ia||Zb>=ib||jc<=ua)){Zb=!0;break a}}Zb=!1}if(!Zb)return sa.setRectangle(Xb,nc,Ba,Fa),!0}return!1},Nb=!1;if(yb<=Fa)Nb=Gb(0);else if(yb<=1.5*Fa)Nb=Gb(yb-Fa>>1);else{var $b=yb-Fa;for(yb=2;yb<=$b&&!(Nb=Gb(yb));yb++);}!Nb&&sa.setRectangle(0,0,Ba,Fa)}}function k(){H.AbstractOneItemPanel.call(this);var z=this,L,ia,za,Za,lb,O,D;this.setItemModel=function(Zb,dc,jc,hc){za=Zb;L=dc;ia=jc;Za=hc};this.setModifiedListener=function(Zb){lb=Zb};var V=function(){lb(z);
sa()};this.setHoverListener=function(Zb){O=Zb};this.updateInvalidPrompt=function(){sa()};var sa=function(){var Zb=ia(za),dc=D.children(".q-sys-warning");dc.remove();Zb&&(Zb=Zb.join("\r\n"),dc=f.createWarningIcon(16,0,400,Zb),dc.addClass("q-sys-warning"),dc.appendTo(D),ba.layoutCtrl(dc,-8,2))};this.protectedGetHeight=function(){return 182};this.protectedInitJqUi=function(Zb){D=$("<div>");D.on("mouseenter",function(jc){D.addClass("square-customlist-current");O(z,!0)});D.on("mouseleave",function(jc){D.removeClass("square-customlist-current");
O(z,!1)});var dc=Ba(D,4);dc=Fa(D,dc+12);dc=Hb(D,dc+16);ba.layoutCtrlWithLRTB(D,8,32,null,0,null,dc+8);D.appendTo(Zb);sa()};var Ba=function(Zb,dc){var jc=function(rb,Tb,Kb,Eb){za.setRectangle(hc.getValue(),qc.getValue(),fc.getValue(),lc.getValue());V()},hc=new c;hc.setConstraint(0,999,1);hc.setValue(za.getX());hc.addValueChangedListener(jc,!0);var qc=new c;qc.setConstraint(0,999,1);qc.setValue(za.getY());qc.addValueChangedListener(jc,!0);var fc=new c;fc.setConstraint(0,999,1);fc.setValue(za.getWidth());
fc.addValueChangedListener(jc,!0);var lc=new c;lc.setConstraint(0,999,1);lc.setValue(za.getHeight());lc.addValueChangedListener(jc,!0);jc=tb(new a(l.get("clistRectX","\u4f4d\u7f6e-\u5de6")),hc);var ua=tb(new a(l.get("clistRectY","\u4f4d\u7f6e-\u4e0a")),qc),Ia=tb(new a(l.get("clistRectWidth","\u5bbd\u5ea6")),fc),ib=tb(new a(l.get("clistRectHeight","\u9ad8\u5ea6")),lc);Ob(Zb,jc,10,dc,100,42);Ob(Zb,ua,130,dc,100,42);Ob(Zb,Ia,250,dc,100,42);Ob(Zb,ib,370,dc,100,42);return dc+42},Fa=function(Zb,dc){var jc=
0<=za.getFieldIndex(),hc=new aa;hc.setItemModels($b());hc.setCustomPainter(nc);hc.setSelected(za.getFieldIndex());hc.addSelectedChangedListener(function(Ia,ib,rb){za.setFieldIndex(rb);V()});var qc=new W;qc.setPlaceholder(l.get("clistCustomTextPlaceholder","\u5728\u6b64\u5904\u586b\u5199\u6587\u5b57"));qc.setText(jc||!za.getCustomText()?"":za.getCustomText());qc.addEditedListener(function(Ia){lc.isChecked()&&(za.setCustomText(Ia.getText()),V())});var fc=new u;fc.setText(l.get("clistBindField","\u7ed1\u5b9a\u5b57\u6bb5"));
var lc=new u;lc.setText(l.get("clistCustomText","\u586b\u5199\u6587\u5b57"));var ua=new v;ua.addElement(fc);ua.addElement(lc);ua.addChangedListener(function(Ia,ib){hc.getJqUi().css("display",fc.isChecked()?"":"none");qc.getJqUi().css("display",lc.isChecked()?"":"none");fc.isChecked()&&za.setFieldIndex(hc.getSelected());lc.isChecked()&&za.setCustomText(qc.getText());ib&&V()});fc.setChecked(jc);lc.setChecked(!jc);Za&&yb(Zb,dc);Ob(Zb,fc.getJqUi(),10,dc,100,23);Ob(Zb,lc.getJqUi(),130,dc,100,23);dc+=24;
Ob(Zb,hc.getJqUi(),10,dc,460,23);Ob(Zb,qc.getJqUi(),10,dc,460,23);return dc+24},yb=function(Zb,dc){var jc=new ea;jc.addCheckedListener(function(fc,lc){za.setColorBar(fc.isChecked()?qc:null);hc.setEnabled(fc.isChecked());lc&&V()});var hc=new x;hc.setModel(l.get("clistColorBar","\u6570\u636e\u6761"));hc.addActionListener(function(fc){fc=new g;fc.edit(qc);fc.showDialog();V()});Ob(Zb,hc.getJqUi(),384,dc+1,86,20);Ob(Zb,jc.getJqUi(),370,dc+1,20,20);var qc=za.getColorBar();jc.setChecked(qc?!0:!1);hc.setEnabled(jc.isChecked());
!qc&&(qc=Rb.createColorBarModel())},Hb=function(Zb,dc){var jc=Gb(l.get("styleAlign","\u5bf9\u9f50"),function(rb){za.getCustomStyle().setAlign(rb?hc.getSelected():null);V()}),hc=new aa;hc.setItemModels(["left","center","right"]);hc.setCustomPainter(function(rb,Tb,Kb){rb="left"==Kb?l.get("styleAlignLeft","\u5de6\u5bf9\u9f50"):"center"==Kb?l.get("styleAlignCenter","\u5c45\u4e2d"):"right"==Kb?l.get("styleAlignRight","\u53f3\u5bf9\u9f50"):"";Tb.text(rb)});hc.setSelected(Nb(jc,hc,"isAlignUnsure","getAlign",
"left"));hc.addSelectedChangedListener(function(rb,Tb,Kb){za.getCustomStyle().setAlign(Kb);V()});var qc=Gb(l.get("styleColor","\u989c\u8272"),function(rb){za.getCustomStyle().setColor(rb?fc.getModel().encodeToHexRgb():null);V()}),fc=new b;fc.setColorPool(e.getColorPool7());fc.getModel().decodeFrom(Nb(qc,fc,"isColorUnsure","getColor","#808080"));fc.addSelectedListener(function(rb){za.getCustomStyle().setColor(rb.encodeToHexRgb());V()});var lc=Gb(l.get("styleFontSize","\u5b57\u53f7"),function(rb){za.getCustomStyle().setFontSize(rb?
ua.getValue():null);V()}),ua=new c;ua.setConstraint(0,99,1);ua.setValue(Nb(lc,ua,"isFontSizeUnsure","getFontSize",14));ua.addValueChangedListener(function(rb,Tb,Kb,Eb){za.getCustomStyle().setFontSize(Kb);V()},!0);var Ia=Gb(l.get("styleFontStyle","\u5b57\u5f62"),function(rb){za.getCustomStyle().setBold(rb?"bold"==ib.getSelected():null);V()}),ib=new aa;ib.setItemModels(["normal","bold"]);ib.setCustomPainter(function(rb,Tb,Kb){rb="normal"==Kb?l.get("styleFontStyleNormal","\u5e38\u89c4"):"bold"==Kb?l.get("styleFontStyleBold",
"\u7c97\u4f53"):"";Tb.text(rb)});ib.setSelected(Nb(Ia,ib,"isBoldUnsure","isBold",!1)?"bold":"normal");ib.addSelectedChangedListener(function(rb,Tb,Kb){za.getCustomStyle().setBold("bold"==Kb);V()});jc=Xb(jc,hc);qc=Xb(qc,fc);lc=Xb(lc,ua);Ia=Xb(Ia,ib);Ob(Zb,jc,10,dc,100,42);Ob(Zb,qc,130,dc,100,42);Ob(Zb,lc,250,dc,100,42);Ob(Zb,Ia,370,dc,100,42);return dc+42},Gb=function(Zb,dc){var jc=new ea;jc.setText(Zb);jc.addCheckedListener(function(hc,qc){qc&&dc(hc.isChecked())});return jc},Nb=function(Zb,dc,jc,
hc,qc){if(za.getCustomStyle()[jc]())return Zb.setChecked(!1),dc.setEnabled(!1),qc;Zb.setChecked(!0);return za.getCustomStyle()[hc]()},$b=function(){for(var Zb=[],dc=0;dc<L.length;dc++)Zb.push(dc);return Zb},nc=function(Zb,dc,jc){Zb="";0<=jc&&(jc<L.length?(jc=L[jc],Zb+=jc.isDimension()?l.get("dimension","\u7ef4\u5ea6"):l.get("measure","\u5ea6\u91cf"),Zb+=jc.getComplexText()):Zb=l.get("clistBindFieldWhich","\u7b2c#1\u4e2a\u5b57\u6bb5").replace("#1",jc+1));dc.text(Zb)},Ob=function(Zb,dc,jc,hc,qc,fc){ba.layoutCtrl(dc,
jc,hc,qc,fc);Zb.append(dc)},tb=function(Zb,dc){ba.layoutCtrlWithLRTB(Zb.getJqUi(),0,0,null,0,null,19);ba.layoutCtrlWithLRTB(dc.getJqUi(),0,0,null,19,null,23);var jc=$("<div>");jc.append(Zb.getJqUi());jc.append(dc.getJqUi());return jc},Xb=function(Zb,dc){var jc=tb(Zb,dc);Zb.addCheckedListener(function(hc,qc){dc.setEnabled(hc.isChecked())});return jc}}function g(){la.call(this);var z=this,L=this.protectedMethod;this.edit=function(lb){z.setSize(480,320);L.setTitle(l.get("clistColorBar","\u6570\u636e\u6761"));
L.setContentPaneCreator(function(){return ia(lb)});L.setFooterClosingOnly(!0);L.setClosingAction(function(O){})};var ia=function(lb){var O=new a(l.get("clistColorBarScopeMin","\u6700\u5c0f\u503c")),D=new a(l.get("clistColorBarScopeMax","\u6700\u5927\u503c")),V=new a(l.get("clistColorBarPositive","\u6b63\u6570\u989c\u8272")),sa=new a(l.get("clistColorBarNegative","\u8d1f\u6570\u989c\u8272")),Ba=new a(l.get("clistColorBarAxis","\u96f6\u523b\u5ea6\u8f74\u989c\u8272")),Fa=new aa,yb=new c;za(Fa,yb,lb.getMin(),
"0",function(tb){lb.setMin(tb)});var Hb=new aa,Gb=new c;za(Hb,Gb,lb.getMax(),"1",function(tb){lb.setMax(tb)});var Nb=new Jb;Nb.setColorPool(e.getColorPool7());Nb.setColorSelectedListener(function(tb){lb.setNormalColor(tb.getColor())});Nb.setColor(lb.getNormalColor());var $b=new Jb;$b.setDisplayForNull(l.get("clistColorBarNegativeDefault","\u4e0e\u6b63\u6570\u76f8\u540c"));$b.setColorPool(e.getColorPool7());$b.setColorSelectedListener(function(tb){lb.setNegativeColor(tb.getColor())});$b.setColor(lb.getNegativeColor());
var nc=new Jb;nc.setDisplayForNull(l.get("clistColorBarAxisDefault","\u65e0"));nc.setColorPool(e.getColorPool7());nc.setColorSelectedListener(function(tb){lb.setAxisColor(tb.getColor())});nc.setColor(lb.getAxisColor());ba.layoutCtrl(O.getJqUi(),10,0,100,23);ba.layoutCtrl(Fa.getJqUi(),120,0,120,23);ba.layoutCtrl(yb.getJqUi(),250,0,160,23);ba.layoutCtrl(D.getJqUi(),10,30,100,23);ba.layoutCtrl(Hb.getJqUi(),120,30,120,23);ba.layoutCtrl(Gb.getJqUi(),250,30,160,23);ba.layoutCtrl(V.getJqUi(),10,60,100,23);
ba.layoutCtrl(Nb.getJqUi(),120,60,120,23);ba.layoutCtrl(sa.getJqUi(),10,90,100,23);ba.layoutCtrl($b.getJqUi(),120,90,120,23);ba.layoutCtrl(Ba.getJqUi(),10,120,100,23);ba.layoutCtrl(nc.getJqUi(),120,120,120,23);var Ob=$("<div>");Ob.append(O.getJqUi());Ob.append(Fa.getJqUi());Ob.append(yb.getJqUi());Ob.append(D.getJqUi());Ob.append(Hb.getJqUi());Ob.append(Gb.getJqUi());Ob.append(V.getJqUi());Ob.append(Nb.getJqUi());Ob.append(sa.getJqUi());Ob.append($b.getJqUi());Ob.append(Ba.getJqUi());Ob.append(nc.getJqUi());
return Ob},za=function(lb,O,D,V,sa){lb.setItemModels(["auto","number"]);lb.setCustomPainter(function(Ba,Fa,yb){Fa.text("number"==yb?l.get("clistColorBarScopeNumber","\u6570\u503c"):l.get("clistColorBarScopeAuto","\u81ea\u52a8"))});lb.addSelectedChangedListener(function(Ba,Fa,yb){Ba=Za(lb,O)?O.getValue()+"":null;sa(Ba)});O.setConstraint(-999999999999999,999999999999999,1);O.supportDecimal(10);O.addValueChangedListener(function(Ba,Fa,yb,Hb){Ba=Ba.getValue()+"";sa(Ba)},!0);V=parseFloat(D?D:V);isNaN(V)&&
(V=0);lb.setSelected(D?"number":"auto");O.setValue(V);Za(lb,O)},Za=function(lb,O){(lb="number"==lb.getSelected())?O.getJqUi().show():O.getJqUi().hide();return lb}}function m(){var z,L,ia,za,Za,lb,O=new nb,D;this.setAllFields=function(Ob){D=Ob};this.getJqUi=function(){z||(L=Ba(),ia=Ba(),lb=Ba(),za=Fa(!0),Za=Fa(!1),z=$("<div>"),z.append(L),z.append(ia),z.append(za),z.append(Za),z.append(lb),ba.layoutCtrlWithLRTB(z,0,0,null,0,null,null));return z};this.scrollCurrentVisible=function(){nc()};this.refreshAll=
function(Ob,tb,Xb,Zb){tb=yb(L,tb,0,Ob);tb=yb(ia,Xb,tb+10,Ob);tb=Nb(za,tb+6);Xb=!Zb||tb+Xb.getRowHeight()+Zb.getRowHeight()+18<z.parent().prop("clientHeight");$b(Za,Xb);Xb&&(tb=Nb(Za,tb+6));tb=yb(lb,Zb,tb+10,Ob);z.css("height",tb+2)};this.refreshArea=function(Ob,tb){var Xb=sa(),Zb=Xb.prop("clientWidth"),dc=Xb.prop("clientHeight");Ob=Xb.children().eq(Ob);Hb(Ob,tb,Zb,dc)};this.markCurrentAsHead=function(){O.setTimes(3);V(L,!0);V(ia,!1);V(lb,!1);nc()};this.markCurrentAsBody=function(){O.setTimes(3);V(L,
!1);V(ia,!0);V(lb,!1);nc()};this.markCurrentAsTail=function(){O.setTimes(3);V(L,!1);V(ia,!1);V(lb,!0);nc()};var V=function(Ob,tb){Ob.css({"z-index":tb?3:2});tb?(Ob.addClass("square-customlist-current"),O.setAction(function(){Ob.removeClass("square-customlist-current")}),setTimeout(function(){O.blink(Ob)},0)):(Ob.data("display")&&Ob.show(),Ob.removeClass("square-customlist-current"))},sa=function(){return 3==L.css("z-index")?L:3==lb.css("z-index")?lb:ia};this.markHoverArea=function(Ob,tb){Ob=sa().children().eq(Ob);
tb?(Ob.addClass("square-customlist-current"),Ob.css("z-index",3)):(Ob.removeClass("square-customlist-current"),Ob.css("z-index",2))};var Ba=function(){var Ob=$("<div>");Ob.css({"z-index":2,"background-color":"#fff",border:"1px solid #ccc",overflow:"hidden"});return Ob},Fa=function(Ob){var tb=$("<div>");tb.css({"z-index":1,border:"1px dashed #e0e0e0"});if(Ob){Ob=$("<div>");var Xb=$("<div>"),Zb=$("<div>");Xb.css({"margin-left":"-40px","border-right":"1px solid #f0f0f0","border-bottom":"1px solid #f0f0f0"});
Zb.css({"margin-left":"20px","border-left":"1px solid #f0f0f0","border-bottom":"1px solid #f0f0f0"});Ob.css({"margin-left":"-28px","border-left":"1px solid #f0f0f0","border-bottom":"1px solid #f0f0f0",transform:"rotate(-45deg)"});ba.layoutCtrlWithLRTB(Xb,"50%",null,20,4,null,16);ba.layoutCtrlWithLRTB(Zb,"50%",null,20,4,null,16);ba.layoutCtrlWithLRTB(Ob,"50%",null,56,-8,null,56);tb.append(Xb);tb.append(Zb);tb.append(Ob)}return tb},yb=function(Ob,tb,Xb,Zb){Ob.empty();if(!tb)return $b(Ob,!1),Xb;$b(Ob,
!0);var dc=tb.getBackgroundColor();Ob.css("background-color",dc?dc:"");dc=tb.getRowHeight();ba.layoutCtrl(Ob,8,Xb,Zb,dc);tb=tb.getContentAreas();for(var jc=0;jc<tb.length;jc++){var hc=tb[jc],qc=$("<div>");qc.css({"box-sizing":"border-box",border:"1px solid #f0f0f0"});ba.makeTextOmissible(qc);Hb(qc,hc,Zb,dc);qc.appendTo(Ob)}return Xb+dc},Hb=function(Ob,tb,Xb,Zb){Xb=Gb(tb.getX(),tb.getWidth(),Xb);var dc=Gb(tb.getY(),tb.getHeight(),Zb),jc=Xb[1];Zb=4>jc?0:2;ba.layoutCtrl(Ob,Xb[0],dc[0],jc,dc[1]);Xb=tb.getFieldIndex();
Xb=0<=Xb?Xb<D.length?D[Xb].getComplexText():l.get("clistBindFieldWhich","\u7b2c#1\u4e2a\u5b57\u6bb5").replace("#1",Xb+1):tb.getCustomText();Ob.text(Xb);Ob.attr("title",Xb);var hc=tb.getCustomStyle();Xb=hc.isAlignUnsure()?"left":hc.getAlign();dc=hc.isColorUnsure()?"#808080":hc.getColor();jc=(hc.isFontSizeUnsure()?14:hc.getFontSize())+"px";hc=hc.isBoldUnsure()||!hc.isBold()?"":"bold";Ob.css({"line-height":tb.getHeight()+"px","padding-left":Zb+"px","padding-right":Zb+"px","text-align":Xb,color:dc,"font-size":jc,
"font-weight":hc})},Gb=function(Ob,tb,Xb){0>Ob+tb?tb=Ob=0:Ob>Xb-2&&(Ob=Xb-2);return[Ob,tb]},Nb=function(Ob,tb){var Xb=ia.prop("offsetLeft"),Zb=ia.prop("clientWidth"),dc=ia.prop("clientHeight");ba.layoutCtrl(Ob,Xb,tb,Zb,dc);return tb+dc},$b=function(Ob,tb){Ob.data("display",tb);Ob.css("display",tb?"":"none")},nc=function(){var Ob=z.parent(),tb=sa(),Xb=tb.prop("offsetTop");tb=tb.prop("offsetTop")+tb.prop("offsetHeight");var Zb=-1;Ob.prop("scrollTop")>Xb?Zb=Xb:Ob.prop("scrollTop")+Ob.prop("clientHeight")<
tb&&(Zb=tb-Ob.prop("clientHeight"));0<=Zb&&Ob.animate({scrollTop:Zb},250)}}function r(){var z=this,L,ia,za,Za,lb,O;this.setSelectionListener=function(Gb){O=Gb};this.setTabs=function(Gb){L=Gb;ia={};for(var Nb=0;Nb<Gb.length;Nb++)ia[Gb[Nb]]=!0;za&&D()};this.setTabEnabled=function(Gb,Nb){ia[Gb]=Nb;if(!Nb&&lb==Gb)for(var $b=0;$b<L.length;$b++)if(Gb=L[$b],Nb=ia[Gb]){lb=Gb;O&&O(lb);break}za&&D()};this.setCurrentId=function(Gb){lb=Gb;za&&V(!0);O&&O(lb)};this.getCurrentId=function(){return lb};this.getJqUi=
function(){za||(za=$("<div>"),Za=$("<div>"),Za.css("border-radius","4px"),Za.css("pointer-events","none"),Za.addClass("square-customlist-similartab-slider"),setTimeout(D,0));return za};var D=function(){za.empty();for(var Gb=1/L.length*100+"%",Nb=0;Nb<L.length;Nb++){var $b=L[Nb],nc=ia[$b],Ob=Nb/L.length*100+"%",tb=$("<div>");tb.attr("name",$b);tb.css({position:"absolute",left:Ob,width:Gb,top:0,bottom:0});tb.css("cursor",nc?"pointer":"default");tb.appendTo(za);tb.on("click",Fa);tb.on("mouseenter",yb);
tb.on("mouseleave",Hb);$b=$("<div>");$b.css("box-sizing","border-box");$b.addClass("square-customlist-similartab_"+(nc?"enabled":"disable"));$b.appendTo(tb);ba.layoutCtrlWithLRTB($b,0,0,null);ba.layoutCtrlMiddleAlign($b,12)}Za.appendTo(za);ba.layoutCtrlWithLRTB(Za,0,null,Gb);ba.layoutCtrlMiddleAlign(Za,6);V()},V=function(Gb){for(var Nb,$b=0;$b<L.length;$b++)if(L[$b]==lb){Nb=za.children('[name="'+lb+'"]').eq(0);break}Nb&&(Nb={left:Nb.prop("offsetLeft")},Gb?Za.animate(Nb,125):Za.css(Nb))},sa=function(Gb,
Nb){Gb&&(Gb=Gb.children(),Nb?Gb.addClass("square-customlist-similartab_hover"):Gb.removeClass("square-customlist-similartab_hover"))},Ba=function(Gb){Gb=$(Gb.currentTarget);var Nb=Gb.attr("name");return ia[Nb]?Gb:null},Fa=function(Gb){(Gb=Ba(Gb))&&z.setCurrentId(Gb.attr("name"))},yb=function(Gb){Gb=Ba(Gb);sa(Gb,!0)},Hb=function(Gb){Gb=Ba(Gb);sa(Gb,!1)}}Ja.call(this);var w=this,n=this.protectedMethod,t,B,A;this.setContextModel=function(z,L){B=z;A=L};this.protectedCreateEditorJqUi=function(z){t=new x;
t.setCustomPainter(function(L){return l.get("clistContentDisplay","#1\u4e2a\u663e\u793a\u533a\u57df").replace("#1",L)});t.addActionListener(E);w.updateEditor();return t.getJqUi()};this.updateEditor=function(){var z=0,L=n.getOriValue();L&&(z=L[1].getContentAreas().length);t.setModel(z)};var E=function(z){z=new p;z.edit(B.getDesigningWidth(),n.getOriValue(),function(L){n.actionPerformed(L)},F());z.showDialog()},F=function(){for(var z=[],L=0,ia=A.getItemModelCount();L<ia;L++){var za=A.getItemModel(L);
z.push(za)}return z};f.createWarningIcon=function(z,L,ia,za){var Za=bb.createWarning();Za.on("mouseenter",function(lb){lb=$("<div>");lb.addClass("q-sys-warning-text");lb.css({"text-align":"left","white-space":"pre","font-weight":"normal","line-height":"20px",background:"rgba(255,255,255,0.9)"});lb.text(za);lb.appendTo(Za);ba.layoutCtrl(lb,z,L,ia,null)});Za.on("mouseleave",function(lb){Za.children(".q-sys-warning-text").remove()});return Za}}function Da(){Ja.call(this);var p=this,f=this.protectedMethod,
h;this.protectedCreateEditorJqUi=function(k){h=new Ya;h.setColorPool(e.getColorPool7());h.setChangedListener(function(g){f.actionPerformed(g.getNullableColor())});p.updateEditor();return h.getJqUi()};this.updateEditor=function(){h.setNullableColor(f.getOriValue())}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.square&&
(com.kingdee.bos.qing.square={});"undefined"==typeof com.kingdee.bos.qing.square.ui&&(com.kingdee.bos.qing.square.ui={});var na=com.kingdee.bos.qing.square.ui;na.XSYNPropertyPane=function(){Ua.call(this);qb.call(this);var p=this.protectedMethod;this.protectedInitUi=function(f){p.appendCard(f,l.get("plotArea","\u7ed8\u56fe\u533a"),["showLabel","labelOverlappable","labelFormat","palette","conditionStyle"]);p.appendCard(f,l.get("legend","\u56fe\u4f8b"),["showLegend"]);p.appendCard(f,l.get("yAxis","\u7eb5\u8f74"),
["yUnitText","yFormat","yRulerScale","yRulerStart","reflines"]);p.appendCard(f,l.get("data","\u6570\u636e"),["order","sortAccording","topNSwitch","topNItems","topNOthers"])}};na.YSXNPropertyPane=function(){Ua.call(this);Vb.call(this);var p=this.protectedMethod;this.protectedInitUi=function(f){var h=p.createCard(l.get("plotArea","\u7ed8\u56fe\u533a"),["showLabel","labelOverlappable","labelFormat","palette","conditionStyle"]),k=p.createCard(l.get("legend","\u56fe\u4f8b"),["showLegend"]),g=p.createCard(l.get("xAxis",
"\u6a2a\u8f74"),["xUnitText","xFormat","xRulerScale","xRulerStart","reflines"]),m=p.createCard(l.get("data","\u6570\u636e"),["order","sortAccording","topNSwitch","topNItems","topNOthers"]);f.append(h.createJqUi());f.append(k.createJqUi());f.append(g.createJqUi());f.append(m.createJqUi())}};na.XSYNPropertyPaneForStacked=function(){Ua.call(this);qb.call(this);var p=this.protectedMethod;this.protectedInitUi=function(f){p.appendCard(f,l.get("plotArea","\u7ed8\u56fe\u533a"),["showLabel","labelOverlappable",
"labelFormat","palette","conditionStyle"]);p.appendCard(f,l.get("legend","\u56fe\u4f8b"),["showLegend"]);p.appendCard(f,l.get("yAxis","\u7eb5\u8f74"),["yUnitText","yFormat","reflines"]);p.appendCard(f,l.get("data","\u6570\u636e"),["order","sortAccording","topNSwitch","topNItems","topNOthers"])}};na.XSYNPropertyPaneForPercentStacked=function(){Ua.call(this);qb.call(this);var p=this.protectedMethod;this.protectedInitUi=function(f){p.appendCard(f,l.get("plotArea","\u7ed8\u56fe\u533a"),["showLabel","labelOverlappable",
"palette","conditionStyle"]);p.appendCard(f,l.get("legend","\u56fe\u4f8b"),["showLegend"]);p.appendCard(f,l.get("yAxis","\u7eb5\u8f74"),["yUnitText"])}};na.YSXNPropertyPaneForStacked=function(){Ua.call(this);Vb.call(this);var p=this.protectedMethod;this.protectedInitUi=function(f){var h=p.createCard(l.get("plotArea","\u7ed8\u56fe\u533a"),["showLabel","labelOverlappable","labelFormat","palette","conditionStyle"]),k=p.createCard(l.get("legend","\u56fe\u4f8b"),["showLegend"]),g=p.createCard(l.get("xAxis",
"\u6a2a\u8f74"),["xUnitText","xFormat","reflines"]),m=p.createCard(l.get("data","\u6570\u636e"),["order","sortAccording","topNSwitch","topNItems","topNOthers"]);f.append(h.createJqUi());f.append(k.createJqUi());f.append(g.createJqUi());f.append(m.createJqUi())}};na.YSXNPropertyPaneForPercentStacked=function(){Ua.call(this);Vb.call(this);var p=this.protectedMethod;this.protectedInitUi=function(f){var h=p.createCard(l.get("plotArea","\u7ed8\u56fe\u533a"),["showLabel","labelOverlappable","palette","conditionStyle"]),
k=p.createCard(l.get("legend","\u56fe\u4f8b"),["showLegend"]),g=p.createCard(l.get("xAxis","\u6a2a\u8f74"),["xUnitText"]);f.append(h.createJqUi());f.append(k.createJqUi());f.append(g.createJqUi())}};na.LineChartPropertyPane=function(){Ua.call(this);qb.call(this);sb.call(this);var p=this.protectedMethod;this.protectedInitUi=function(h){p.appendCard(h,l.get("plotArea","\u7ed8\u56fe\u533a"),"nullAsZero smooth paintPoint showLabel labelOverlappable labelFormat palette conditionStyle".split(" "));p.appendCard(h,
l.get("legend","\u56fe\u4f8b"),["showLegend"]);p.appendCard(h,l.get("yAxis","\u7eb5\u8f74"),["yUnitText","yFormat","yRulerScale","yRulerStart","reflines"]);p.appendCard(h,l.get("xAxis","\u6a2a\u8f74"),["xAssistantLine"]);p.appendCard(h,l.get("tooltips","\u60ac\u505c\u4fe1\u606f"),["tooltipsSorted"])};var f=this.protectedCreateEditItem;this.protectedCreateEditItem=function(h,k){switch(h){case "smooth":h=p.createSmoothEditItem(k);break;case "paintPoint":h=p.createPaintPointEditItem(k,function(m){return m.isShowLabel()});
break;case "nullAsZero":h=p.createNullAsZeroEditItem(k);break;case "tooltipsSorted":var g=l.get("tooltipsSorted","\u591a\u6570\u503c\u6392\u5e8f");h=p.createBooleanEditItem();p.initEditItem(h,g,ac.KEY_TOOLTIPS_SORTED,k.isTooltipsSorted,k.setTooltipsSorted);break;default:h=f(h,k)}return h}};na.AreaChartPropertyPane=function(){Ua.call(this);qb.call(this);var p=this.protectedMethod;this.protectedInitUi=function(f){p.appendCard(f,l.get("plotArea","\u7ed8\u56fe\u533a"),["showLabel","labelOverlappable",
"labelFormat","palette","conditionStyle"]);p.appendCard(f,l.get("legend","\u56fe\u4f8b"),["showLegend"]);p.appendCard(f,l.get("yAxis","\u7eb5\u8f74"),["yUnitText","yFormat","reflines"]);p.appendCard(f,l.get("xAxis","\u6a2a\u8f74"),["xAssistantLine"])}};na.PieChartPropertyPane=function(){Ua.call(this);Lb.call(this);var p=this.protectedMethod;this.protectedInitUi=function(f){var h=p.createCard(l.get("plotArea","\u7ed8\u56fe\u533a"),["showLabel","labelOverlappable","labelType","palette"]),k=p.createCard(l.get("legend",
"\u56fe\u4f8b"),["showLegend","legendOrderMode"]),g=p.createCard(l.get("data","\u6570\u636e"),["topN","ignoreNegative"]);f.append(h.createJqUi());f.append(k.createJqUi());f.append(g.createJqUi())}};na.RingChartPropertyPane=function(){Ua.call(this);Lb.call(this);var p=this.protectedMethod;this.protectedInitUi=function(h){var k=p.createCard(l.get("plotArea","\u7ed8\u56fe\u533a"),["showLabel","labelOverlappable","labelType","showTotal","palette"]),g=p.createCard(l.get("legend","\u56fe\u4f8b"),["showLegend",
"legendOrderMode"]),m=p.createCard(l.get("data","\u6570\u636e"),["topN","ignoreNegative"]);h.append(k.createJqUi());h.append(g.createJqUi());h.append(m.createJqUi())};var f=this.protectedCreateEditItem;this.protectedCreateEditItem=function(h,k){switch(h){case "showTotal":var g=l.get("showTotal","\u663e\u793a\u603b\u8ba1");h=p.createBooleanEditItem();p.initEditItem(h,g,ec.KEY_SHOW_TOTAL,k.isShowTotal,k.setShowTotal);break;default:h=f(h,k)}return h}};na.RoseChartPropertyPane=function(){Ua.call(this);
Lb.call(this);var p=this.protectedMethod;this.protectedInitUi=function(h){var k=p.createCard(l.get("plotArea","\u7ed8\u56fe\u533a"),["showLabel","labelOverlappable","labelType","averageAngle","palette"]),g=p.createCard(l.get("legend","\u56fe\u4f8b"),["showLegend","legendOrderMode"]),m=p.createCard(l.get("data","\u6570\u636e"),["topN","ignoreNegative"]);h.append(k.createJqUi());h.append(g.createJqUi());h.append(m.createJqUi())};var f=this.protectedCreateEditItem;this.protectedCreateEditItem=function(h,
k){switch(h){case "averageAngle":var g=l.get("averageAngle","\u5e73\u5206\u89d2\u5ea6");h=p.createBooleanEditItem();p.initEditItem(h,g,kc.KEY_AVERAGE_ANGLE,k.isAverageAngle,k.setAverageAngle);break;default:h=f(h,k)}return h}};na.KPIChartPropertyPane=function(){Ua.call(this);var p=this.protectedMethod;this.protectedInitUi=function(f){var h=p.createCard(l.get("primaryKpi","\u4e3b\u6307\u6807"),["caption","primayPostText","dataEmptyInstead"]),k=p.createCard(l.get("secondaryKpi","\u526f\u6307\u6807"),
["secondaryPreText","secondaryPostText"]),g=p.createCard(l.get("kpiStyleGroup","\u6837\u5f0f"),["kpiCustomColor","kpiCustomFont","kpiCustomAlign","conditionStyle"]),m=p.createCard(l.get("animation","\u52a8\u753b"),["animation"]);f.append(h.createJqUi());f.append(k.createJqUi());f.append(g.createJqUi());f.append(m.createJqUi())};this.protectedCreateEditItem=function(f,h){switch(f){case "caption":f=l.get("kpiCaptionLine","\u6458\u8981");var k=p.createPopupTextEditItem();p.initEditItem(k,f,bc.KEY_CAPTION,
h.getCaption,h.setCaption);break;case "primayPostText":f=l.get("kpiPostText","\u540e\u7f6e\u6587\u5b57");k=p.createPopupTextEditItem();p.initEditItem(k,f,bc.KEY_P_DISPLAY,h.getPrimaryPostfix,h.setPrimaryPostfix);break;case "secondaryPreText":f=l.get("kpiPreText","\u524d\u7f6e\u6587\u5b57");k=p.createPopupTextEditItem();p.initEditItem(k,f,bc.KEY_S_DISPLAY,h.getSecondaryPrefix,h.setSecondaryPrefix);break;case "secondaryPostText":f=l.get("kpiPostText","\u540e\u7f6e\u6587\u5b57");k=p.createPopupTextEditItem();
p.initEditItem(k,f,bc.KEY_S_DISPLAY,h.getSecondaryPostfix,h.setSecondaryPostfix);break;case "dataEmptyInstead":f=l.get("dataEmptyInstead","\u65e0\u6570\u636e\u65f6\u663e\u793a");k=p.createFloatNumberEditItem();p.initEditItem(k,f,bc.KEY_P_DATA_EMPTY_INSTEAD,h.getDataEmptyInstead,h.setDataEmptyInstead);break;case "kpiCustomColor":f=l.get("palette","\u8c03\u8272\u677f");k=new Z;p.initEditItem(k,f,bc.KEY_P_CUSTOM_STYLES,function(){var g=h.getCustomStyles();return g?g.separateColor():null},function(g){var m=
h.getCustomStyles();g?(m=m?m.copy():new jb,m.mergeColorFrom(g)):m&&m.mergeColorFrom(null);h.setCustomStyles(m)});k.setPresetPaletteGetter(function(g){p.createFacade(g).getPresetPalettes("chartKpi",null)});break;case "kpiCustomFont":f=l.get("styleFontSize","\u5b57\u53f7");k=new Wa;p.initEditItem(k,f,bc.KEY_P_CUSTOM_STYLES,function(){var g=h.getCustomStyles();return g?g.separateFont():null},function(g){var m=h.getCustomStyles();g?(m=m?m.copy():new jb,m.mergeFontFrom(g)):m&&m.mergeFontFrom(null);h.setCustomStyles(m)});
break;case "kpiCustomAlign":f=l.get("styleAlign","\u5bf9\u9f50"),k=new fb,p.initEditItem(k,f,bc.KEY_P_CUSTOM_STYLES,function(){var g=h.getCustomStyles();return g?g.separateAlign():null},function(g){var m=h.getCustomStyles();g?(m=m?m.copy():new jb,m.mergeAlignFrom(g)):m&&m.mergeAlignFrom(null);h.setCustomStyles(m)})}return k}};na.MapChartPropertyPane=function(){Ua.call(this);ub.call(this);Mb.call(this);var p=this,f=this.protectedMethod;this.protectedInitUi=function(k){var g=f.createCard(l.get("chartMap",
"\u5730\u56fe"),["mapTemplate","mapRegionMapping"]),m=f.createCard(l.get("plotArea","\u7ed8\u56fe\u533a"),["continuousColor"]),r=f.createCard(l.get("legend","\u56fe\u4f8b"),["showLegend","legendFormat"]),w=f.createCard(l.get("tooltips","\u60ac\u505c\u4fe1\u606f"),["tooltipsAutoDisplay","tooltipsAutoDisplayDuration"]);g=g.createJqUi();m=m.createJqUi();r=r.createJqUi();w=w.createJqUi();k.append(g);k.append(m);k.append(r);k.append(w)};this.protectedInitLegendFormatEditItem=function(k,g){};this.protectedInitContinuousColorEditItem=
function(k,g){};this.protectedCreateEditItem=function(k,g){switch(k){case "mapTemplate":var m=l.get("mapTemplate","\u5730\u56fe\u6a21\u677f");var r=new La;f.initEditItem(r,m,Bb.KEY_TEMPLATE_REF,g.getOutsideReference,g.setOutsideReference);break;case "mapRegionMapping":m=l.get("mapRegionMapping","\u5730\u57df\u6620\u5c04"),r=new ob,f.initEditItem(r,m,Bb.KEY_REGION_MAPPING,g.getDimensionToRegion,g.setDimensionToRegion),r.setBeforePopupChecker(function(){var w=r;var n=f.getSquareModel().getChart(),t=
n.getChartProperty().getOutsideReference();t&&t.getRefToId()?0==n.getDimensionSet().getItemModelCount()?(t=l.get("dimensionForMap","\u5730\u57df"),n="square-card-title",n=f.getGlobal().getTopJqUi().find("."+n+":contains('"+t+"')"),0==n.length&&(n=w.getJqCtrlUi()),w=new d,w.setText(l.get("mapNoDimensionPrompt","\u8bf7\u5148\u7ed1\u5b9a\u8868\u793a\u5730\u57df\u7684\u5b57\u6bb5\u3002")),w.show(n,!0),w=!1):w=!0:(t=l.get("mapTemplate","\u5730\u56fe\u6a21\u677f"),n="square-property-item-caption",n=p.getJqUi().find("."+
n+":contains('"+t+"')"),0==n.length&&(n=w.getJqCtrlUi()),w=new d,w.setText(l.get("mapNoTemplatePrompt","\u8bf7\u5148\u6307\u5b9a\u5730\u56fe\u6a21\u677f\u3002")),w.show(n,!0),w=!1);return w}),r.setRegionGetter(function(w){h(g.getOutsideReference(),w)})}!r&&(r=f.createEditItemWithTooltipsAutoDisplay(k,g));!r&&(r=f.createEditItemWithMixColorMode(k,g));return r};var h=function(k,g){var m=f.getMeta(),r=f.getSquareModel();f.createFacade(function(w){g(w.regions,w.data)}).loadMapRegions(k,m,r)}};na.GISChartPropertyPane=
function(){Ua.call(this);var p=this.protectedMethod;this.protectedInitUi=function(k){var g=p.createCard(l.get("chartGis","GIS\u5730\u56fe"),["customInitScript"]),m=p.createCard(l.get("plotArea","\u7ed8\u56fe\u533a"),["usage","palette"]);g=g.createJqUi();m=m.createJqUi();k.append(g);k.append(m)};this.protectedGetColorFieldSetForPalette=function(k){return k.getColorSet()};this.protectedCreateEditItem=function(k,g){switch(k){case "third":k=l.get("gisThird","\u5730\u56fe\u7c7b\u578b");var m=["baidu"];
m=p.createSelectableEditItem(m,f);p.initEditItem(m,k,ya.KEY_THIRD,g.getThird,g.setThird);break;case "usage":k=l.get("gisUsage","\u6807\u8bb0");m=[ya.USAGE_MARKER,ya.USAGE_BUBBLE];m=p.createSelectableEditItem(m,h);p.initEditItem(m,k,ya.KEY_USAGE,g.getUsage,g.setUsage);break;case "customInitScript":k=l.get("gisCustomScript","\u81ea\u5b9a\u4e49\u811a\u672c"),m=p.createPopupTextAreaEditItem(),p.initEditItem(m,k,ya.KEY_SCRIPT,g.getCustomScript,g.setCustomScript)}return m};var f=function(k,g,m){switch(m){case "baidu":k=
l.get("gisThirdBaidu","\u767e\u5ea6\u5730\u56fe");break;default:k=m}g.text(k)},h=function(k,g,m){switch(m){case ya.USAGE_MARKER:k=l.get("gisUsageMarker","\u4f4d\u7f6e\u6807\u8bb0");break;case ya.USAGE_BUBBLE:k=l.get("gisUsageBubble","\u6c14\u6ce1");break;default:k=m}g.text(k)}};na.RadarChartPropertyPane=function(){Ua.call(this);var p=this.protectedMethod;this.protectedInitUi=function(h){var k=p.createCard(l.get("chartRadar","\u96f7\u8fbe\u56fe"),["outerCircleMode"]),g=p.createCard(l.get("plotArea",
"\u7ed8\u56fe\u533a"),"fillRadarAreaColor showLabel labelOverlappable showRulerMarkLabel radarAxisFormat palette".split(" ")),m=p.createCard(l.get("legend","\u56fe\u4f8b"),["showLegend"]);h.append(k.createJqUi());h.append(g.createJqUi());h.append(m.createJqUi())};this.protectedGetColorFieldSetForPalette=function(h){if(h.getChartProperty().getOuterCircle()==Oa.OUTER_CIRCLE_MEASURE)return h.getDimensionSet();var k=!1,g=null;h.getDimensionSet().traversalItems(function(m){var r=!1;!m.isInvalid()&&m.isDimension()&&
(k?(g=m,r=!0):k=!0);return r});h=new Aa;g&&h.addItemModel(g);return h};this.protectedCreateEditItem=function(h,k){switch(h){case "radarAxisFormat":h=l.get("radarRulerMarkLabelFormat","\u523b\u5ea6\u503c\u683c\u5f0f");var g=p.createNumberFormatEditItem();p.initEditItem(g,h,Oa.KEY_RADAR_FORMAT,k.getRadarFormat,k.setRadarFormat);g.addCareForBrotherListener(function(m,r,w){r==Oa.KEY_SHOW_RULER_MARK_LABEL&&p.syncEditItemVisible(m,w?!0:!1)});p.syncEditItemVisible(g,k.isShowRulerMarkLabel());break;case "outerCircleMode":h=
l.get("radarOuterCircleMode","\u6a21\u5f0f");g=p.createSelectableEditItem([Oa.OUTER_CIRCLE_DIMENSION,Oa.OUTER_CIRCLE_MEASURE],f);p.initEditItem(g,h,Oa.KEY_OUTER_CIRCLE,k.getOuterCircle,k.setOuterCircle);break;case "showRulerMarkLabel":h=l.get("radarRulerMarkLabel","\u523b\u5ea6\u503c");g=new Ha;p.initEditItem(g,h,Oa.KEY_SHOW_RULER_MARK_LABEL,k.isShowRulerMarkLabel,k.setShowRulerMarkLabel);break;case "fillRadarAreaColor":h=l.get("radarAreaFillColor","\u586b\u5145\u989c\u8272"),g=new Ha,p.initEditItem(g,
h,Oa.KEY_FILL_COLOR,k.isFillColor,k.setFillColor)}return g};var f=function(h,k,g){switch(g){case Oa.OUTER_CIRCLE_DIMENSION:h=l.get("radarDimension","\u7ef4\u5ea6");break;case Oa.OUTER_CIRCLE_MEASURE:h=l.get("radarMeasure","\u5ea6\u91cf");break;default:h=g}h=l.get("radarAsOuterCircle","#1\u4f5c\u4e3a\u5916\u5708").replace("#1",h);k.text(h)}};na.ProgressBarChartPropertyPane=function(){Ua.call(this);xa.call(this);Vb.call(this);var p=this.protectedMethod;this.protectedInitUi=function(f){var h=p.createCard(l.get("chartProgress",
"\u8fdb\u5ea6\u56fe"),["progressThickness"]),k=p.createCard(l.get("plotArea","\u7ed8\u56fe\u533a"),"showLabel labelOverlappable progressLabelType labelFormat progressPalette conditionStyle".split(" ")),g=p.createCard(l.get("legend","\u56fe\u4f8b"),["showLegend"]),m=p.createCard(l.get("xAxis","\u6a2a\u8f74"),["xUnitText","xFormat","reflines"]),r=p.createCard(l.get("data","\u6570\u636e"),["order","sortAccording","topNSwitch","topNItems","topNOthers"]);f.append(h.createJqUi());f.append(k.createJqUi());
f.append(g.createJqUi());f.append(m.createJqUi());f.append(r.createJqUi())}};na.ProgressColumnChartPropertyPane=function(){Ua.call(this);xa.call(this);qb.call(this);var p=this.protectedMethod;this.protectedInitUi=function(f){p.appendCard(f,l.get("chartProgress","\u8fdb\u5ea6\u56fe"),["progressThickness"]);p.appendCard(f,l.get("plotArea","\u7ed8\u56fe\u533a"),"showLabel labelOverlappable progressLabelType labelFormat progressPalette conditionStyle".split(" "));p.appendCard(f,l.get("legend","\u56fe\u4f8b"),
["showLegend"]);p.appendCard(f,l.get("yAxis","\u7eb5\u8f74"),["yUnitText","yFormat","reflines"]);p.appendCard(f,l.get("data","\u6570\u636e"),["order","sortAccording","topNSwitch","topNItems","topNOthers"])}};na.ProgressCirclePropertyPane=function(){Ua.call(this);xa.call(this);var p=this.protectedMethod;this.protectedInitUi=function(g){var m=p.createCard(l.get("chartProgress","\u8fdb\u5ea6\u56fe"),["progressThickness"]),r=p.createCard(l.get("progressCompletion","\u5b8c\u6210\u7387"),["progressDecimalDigit",
"progressPercentageCeiling","progressPercentageInstead","progressLabelDesc"]),w=p.createCard(l.get("plotArea","\u7ed8\u56fe\u533a"),["progressPalette"]),n=p.createCard(l.get("legend","\u56fe\u4f8b"),["showLegend","progressCircleLegendFormat"]),t=p.createCard(l.get("animation","\u52a8\u753b"),["animation"]);g.append(m.createJqUi());g.append(r.createJqUi());g.append(w.createJqUi());g.append(n.createJqUi());g.append(t.createJqUi())};var f=this.protectedCreateEditItem;this.protectedCreateEditItem=function(g,
m){switch(g){case "progressDecimalDigit":g=l.get("progressDecimalDigit","\u767e\u5206\u6bd4\u5c0f\u6570\u4f4d");var r=p.createNumberEditItem(0,4,1);p.initEditItem(r,g,Ca.KEY_PERCENTAGE_DIGIT,m.getPercentageDecimalDigit,m.setPercentageDecimalDigit);break;case "progressPercentageCeiling":g=l.get("progressPercentageCeiling","\u5c01\u9876");r=p.createSelectableEditItem([!1,!0],h);p.initEditItem(r,g,Ca.KEY_PERCENTAGE_CEILING,m.isPercentageCeiling,m.setPercentageCeiling);break;case "progressPercentageInstead":g=
l.get("dataEmptyInstead","\u65e0\u6570\u636e\u65f6\u663e\u793a");r=p.createSelectableEditItem([0,100],k);p.initEditItem(r,g,Ca.KEY_PERCENTAGE_INSTEAD,m.getDataEmptyPercentageInstead,m.setDataEmptyPercentageInstead);break;case "progressLabelDesc":g=l.get("progressLabelText","\u6807\u7b7e");r=p.createTextEditItem();p.initEditItem(r,g,Ca.KEY_LABEL_DESC,m.getLabelDesc,m.setLabelDesc);break;case "progressCircleLegendFormat":g=l.get("numberFormat","\u6570\u5b57\u683c\u5f0f");r=l.get("numberFormatFollowField",
"\u8ddf\u968f\u5ea6\u91cf\u5b57\u6bb5");r=p.createNumberFormatEditItem(r);p.initEditItem(r,g,Ca.KEY_LEGEND_FORMAT,m.getLegendFormat,m.setLegendFormat);break;default:r=f(g,m)}return r};var h=function(g,m,r){g=r?l.get("progressPercentageCeilingY","\u6700\u5927100%"):l.get("progressPercentageCeilingN","\u5141\u8bb8\u8d85\u8fc7100%");m.text(g)},k=function(g,m,r){m.text(100==r?"100%":"0%")}};na.CompositeChartPropertyPane=function(){Ua.call(this);mb.call(this);sb.call(this);var p=this.protectedMethod;this.protectedInitUi=
function(m){var r=p.createCard(l.get("plotArea","\u7ed8\u56fe\u533a"),"smooth paintPoint myShowLabel labelOverlappable labelFormat palette conditionStyle".split(" ")),w=p.createCard(l.get("legend","\u56fe\u4f8b"),["showLegend"]),n=p.createCard(l.get("leftYAxis","\u5de6\u8f74"),["leftYUnitText","leftYFormat","leftYRulerScale","leftYRulerStart","leftReflines"]),t=p.createCard(l.get("rightYAxis","\u53f3\u8f74"),["rightYUnitText","rightYFormat","rightYRulerScale","rightYRulerStart","rightReflines"]),
B=p.createCard(l.get("data","\u6570\u636e"),["compositeOrder","sortAccording"]);m.append(r.createJqUi());m.append(w.createJqUi());m.append(n.createJqUi());m.append(t.createJqUi());m.append(B.createJqUi())};this.protectedGetColorFieldSetForPalette=function(m){return m.getLeftSeries()};var f=this.protectedCreateEditItem;this.protectedCreateEditItem=function(m,r){switch(m){case "smooth":var w=p.createSmoothEditItem(r);break;case "paintPoint":w=p.createPaintPointEditItem(r,function(n){return 1==(n.getShowLabel()&
1)});break;case "myShowLabel":w=h(r);break;case "leftYUnitText":m=l.get("axisUnit","\u6807\u9898/\u5355\u4f4d");w=p.createTextEditItem();p.initEditItem(w,m,gb.KEY_LY_UNIT_TEXT,r.getLeftYUnitText,r.setLeftYUnitText);break;case "leftYRulerScale":m=l.get("rulerScale","\u6807\u5c3a\u6bd4\u4f8b");w=p.createRulerScaleEditItem();p.initEditItem(w,m,gb.KEY_LY_RULER_SCALE,r.getLeftYRulerScale,r.setLeftYRulerScale);break;case "leftYRulerStart":m=l.get("rulerScope","\u6570\u8f74\u8303\u56f4");w=p.createRulerScopeEditItem();
p.initEditItem(w,m,gb.KEY_LY_RULER_START,r.getLeftYRulerScope,r.setLeftYRulerScope);break;case "leftYFormat":m=l.get("numberFormat","\u6570\u5b57\u683c\u5f0f");w=l.get("numberFormatFollowField","\u8ddf\u968f\u5ea6\u91cf\u5b57\u6bb5");w=p.createNumberFormatEditItem(w);p.initEditItem(w,m,gb.KEY_LY_FORMAT,r.getLeftYFormat,r.setLeftYFormat);break;case "leftReflines":m=l.get("refline","\u53c2\u8003\u7ebf");w=p.createReflinesEditItem();p.initEditItem(w,m,gb.KEY_LEFT_REFLINES,r.getLeftReflines,r.setLeftReflines);
w.setMeasureFieldsGetter(k);break;case "rightYUnitText":m=l.get("axisUnit","\u6807\u9898/\u5355\u4f4d");w=p.createTextEditItem();p.initEditItem(w,m,gb.KEY_RY_UNIT_TEXT,r.getRightYUnitText,r.setRightYUnitText);break;case "rightYRulerScale":m=l.get("rulerScale","\u6807\u5c3a\u6bd4\u4f8b");w=p.createRulerScaleEditItem();p.initEditItem(w,m,gb.KEY_RY_RULER_SCALE,r.getRightYRulerScale,r.setRightYRulerScale);break;case "rightYRulerStart":m=l.get("rulerScope","\u6570\u8f74\u8303\u56f4");w=p.createRulerScopeEditItem();
p.initEditItem(w,m,gb.KEY_RY_RULER_START,r.getRightYRulerScope,r.setRightYRulerScope);break;case "rightYFormat":m=l.get("numberFormat","\u6570\u5b57\u683c\u5f0f");w=l.get("numberFormatFollowField","\u8ddf\u968f\u5ea6\u91cf\u5b57\u6bb5");w=p.createNumberFormatEditItem(w);p.initEditItem(w,m,gb.KEY_RY_FORMAT,r.getRightYFormat,r.setRightYFormat);break;case "rightReflines":m=l.get("refline","\u53c2\u8003\u7ebf");w=p.createReflinesEditItem();p.initEditItem(w,m,gb.KEY_RIGHT_REFLINES,r.getRightReflines,r.setRightReflines);
w.setMeasureFieldsGetter(g);break;case "compositeOrder":w=p.createOrderEditItem(r,gb.KEY_SORT);break;case "sortAccording":w=p.createSortAccordingEditItem(r,gb.KEY_SORT);break;default:w=f(m,r)}return w};var h=function(m){var r=l.get("dataLabel","\u6570\u636e\u6807\u7b7e"),w=p.createSelectableEditItem([0,16,1,17],function(n,t,B){n=16==B?l.get("dataLabelForColumn","\u67f1\u5b50"):1==B?l.get("dataLabelForLine","\u6298\u7ebf"):17==B?l.get("dataLabelForColumnLine","\u67f1\u5b50+\u6298\u7ebf"):l.get("dataLabelNone",
"\u65e0");t.text(n)});p.initEditItem(w,r,Na.KEY_SHOW_LABEL,m.getShowLabel,m.setShowLabel);return w},k=function(){for(var m=[],r=p.getSquareModel().getChart().getLeftYAxis(),w=0,n=r.getItemModelCount();w<n;w++){var t=r.getItemModel(w);t.isMeasure()&&m.push(t)}return m},g=function(){for(var m=[],r=p.getSquareModel().getChart().getRightYAxis(),w=0,n=r.getItemModelCount();w<n;w++){var t=r.getItemModel(w);t.isMeasure()&&m.push(t)}return m}};na.GridChartPropertyPane=function(){eb.call(this);var p=this.protectedMethod;
this.protectedInitUi=function(h){var k=p.createCard(l.get("chartGrid","\u5217\u8868"),["gridShowHeader","gridShowRowNum","gridRowNumTitle","conditionStyle"]),g=p.createCard(l.get("gridAutoScroll","\u81ea\u52a8\u6eda\u52a8"),["listAutoScroll","listStickTopN","listStickTopRows"]),m=p.createCard(l.get("data","\u6570\u636e"),["listShowTopN","listShowTopRows","listSortField","listSortord"]),r=p.createCard(l.get("affection","\u8054\u52a8"),["listAffectionSrcField"]);h.append(k.createJqUi());h.append(g.createJqUi());
h.append(m.createJqUi());h.append(r.createJqUi())};this.protectedCreateEditItem=function(h,k){switch(h){case "gridShowHeader":h=l.get("gridShowHeader","\u663e\u793a\u8868\u5934");var g=p.createBooleanEditItem();p.initEditItem(g,h,Cb.KEY_SHOW_HEADER,k.isShowHeader,k.setShowHeader);k=g;break;case "gridShowRowNum":case "gridRowNumTitle":k=f(h,k);break;default:g=p.getSquareModel().getChart().getColumnSet(),k=p.listCreateEditItem(h,k,g)}return k};var f=function(h,k){if("gridShowRowNum"==h){h=l.get("gridShowRowNum",
"\u663e\u793a\u884c\u53f7");var g=p.createBooleanEditItem();p.initEditItem(g,h,Cb.KEY_SHOW_ROWNUM,k.isShowRowNum,k.setShowRowNum);return g}if("gridRowNumTitle"==h)return h=l.get("gridRowNumTitle","\u884c\u53f7\u6807\u9898"),g=p.createTextEditItem(),p.initEditItem(g,h,Cb.KEY_ROWNUM_TITLE,k.getTitleOfRowNum,k.setTitleOfRowNum),g.addCareForBrotherListener(function(m,r,w){r==Cb.KEY_SHOW_ROWNUM&&p.syncEditItemVisible(m,w)}),p.syncEditItemVisible(g,k.isShowRowNum()),g}};na.CustomListChartPropertyPane=function(){eb.call(this);
var p=this.protectedMethod;this.protectedInitUi=function(f){var h=p.createCard(l.get("chartCustomList","\u81ea\u5b9a\u4e49\u5217\u8868"),["customContent","splitLine","conditionStyle","bodyVAlign","bodyShareToRow"]),k=p.createCard(l.get("gridAutoScroll","\u81ea\u52a8\u6eda\u52a8"),["listAutoScroll","listStickTopN","listStickTopRows"]),g=p.createCard(l.get("data","\u6570\u636e"),["listShowTopN","listShowTopRows","listSortField","listSortord"]),m=p.createCard(l.get("affection","\u8054\u52a8"),["listAffectionSrcField"]);
f.append(h.createJqUi());f.append(k.createJqUi());f.append(g.createJqUi());f.append(m.createJqUi())};this.protectedCreateEditItem=function(f,h){var k=p.getSquareModel().getChart().getFieldSet();switch(f){case "customContent":var g=l.get("clistContent","\u5185\u5bb9");f=new ja;p.initEditItem(f,g,Rb.KEY_CUSTOM_CONTENT,function(){return[h.getCustomHead(),h.getCustomContent(),h.getCustomTail()]},function(m){h.setCustomDesign(m[0],m[1],m[2])});f.setContextModel(h,k);break;case "splitLine":g=l.get("clistSplitlineColor",
"\u5206\u9694\u7ebf\u989c\u8272");f=new Da;p.initEditItem(f,g,Rb.KEY_SPLITLINE_COLOR,h.getSplitLineColor,h.setSplitLineColor);break;case "bodyVAlign":g=l.get("clistBodyVAlign","\u5782\u76f4\u65b9\u5411");f=p.createSelectableEditItem([null,Rb.BODY_VALIGN_MIDDLE],function(m,r,w){m=w==Rb.BODY_VALIGN_MIDDLE?l.get("clistBodyVAlignMiddle","\u7a7a\u95f4\u5145\u8db3\u65f6\u5c45\u4e2d"):l.get("clistBodyVAlignTop","\u603b\u662f\u4ece\u9876\u90e8\u5f00\u59cb");r.text(m)});p.initEditItem(f,g,Rb.KEY_BODY_V_ALIGN,
h.getBodyVerticalAlign,h.setBodyVerticalAlign);break;case "bodyShareToRow":g=l.get("clistBodyShareToRow","\u52a8\u6001\u884c\u9ad8");f=p.createSelectableEditItem([null,Rb.BODY_SHARE_TO_ROW_REDUCABLE,Rb.BODY_SHARE_TO_ROW_INCREASABLE,Rb.BODY_SHARE_TO_ROW_ADJUSTABLE],function(m,r,w){m=w==Rb.BODY_SHARE_TO_ROW_REDUCABLE?l.get("clistBodyShareToRowReducable","\u5f53\u51fa\u73b0\u6eda\u52a8\u65f6\u538b\u7f29"):w==Rb.BODY_SHARE_TO_ROW_INCREASABLE?l.get("clistBodyShareToRowIncreasable","\u5f53\u7a7a\u95f4\u5145\u8db3\u65f6\u4f38\u5c55"):
w==Rb.BODY_SHARE_TO_ROW_ADJUSTABLE?l.get("clistBodyShareToRowAdjustable","\u538b\u7f29\u6216\u4f38\u5c55"):l.get("clistBodyShareToRowNone","\u5173\u95ed");r.text(m)});p.initEditItem(f,g,Rb.KEY_BODY_SHARE_TO_ROW,h.getBodyShareToRow,h.setBodyShareToRow);break;default:f=p.listCreateEditItem(f,h,k)}return f}};na.WaterfallChartPropertyPane=function(){Ua.call(this);qb.call(this);var p=this.protectedMethod;this.protectedInitUi=function(B){p.appendCard(B,l.get("plotArea","\u7ed8\u56fe\u533a"),["showLabel",
"labelOverlappable","labelFormat","waterfallPalette"]);p.appendCard(B,l.get("yAxis","\u7eb5\u8f74"),["yUnitText","yFormat"]);p.appendCard(B,l.get("data","\u6570\u636e"),["waterfallSortByName","waterfallNegativeAsc","waterfallPositiveTopN","waterfallNegativeTopN"]);p.appendCard(B,l.get("waterfallSingleDim","\u5355\u7ef4\u5ea6\u6a21\u5f0f"),["waterfallTotal"]);p.appendCard(B,l.get("waterfallDoubleDim","\u53cc\u7ef4\u5ea6\u6a21\u5f0f\uff08\u6709\u9636\u6bb5\uff09"),["waterfallStartFrom"])};var f=this.protectedCreateEditItem;
this.protectedCreateEditItem=function(B,A){switch(B){case "waterfallTotal":B=h(A);break;case "waterfallStartFrom":B=k(A);break;case "waterfallSortByName":B=g(A);break;case "waterfallNegativeAsc":B=m(A);break;case "waterfallNegativeTopN":B=r(A);break;case "waterfallPositiveTopN":B=w(A);break;case "waterfallPalette":B=t(A);break;default:B=f(B,A)}return B};var h=function(B){var A=l.get("showTotal","\u663e\u793a\u603b\u8ba1"),E=p.createBooleanEditItem();p.initEditItem(E,A,Na.KEY_WITHOUT_TOTAL,function(){return!B.isWithoutTotal()},
function(F){B.setWithoutTotal(!F)});return E},k=function(B){var A=l.get("waterfallStartFrom","\u8d77\u59cb\u4e8e"),E=p.createSelectableEditItem([!1,!0],function(F,z,L){var ia;!1===L?ia=l.get("waterfallStartFromClause","\u6761\u76ee"):!0===L&&(ia=l.get("waterfallStartFromStage","\u7b2c\u4e00\u9636\u6bb5\u6c47\u603b"));z.text(ia)});p.initEditItem(E,A,Yb.KEY_START_FROM_STAGE,B.isStartFromStage,B.setStartFromStage);return E},g=function(B){var A=l.get("waterfallSortBy","\u6761\u76ee\u987a\u5e8f"),E=p.createSelectableEditItem([!0,
!1],function(F,z,L){var ia;!1===L?ia=l.get("waterfallSortByMeasure","\u6309\u5ea6\u91cf"):!0===L&&(ia=l.get("waterfallSortByName","\u6309\u540d\u79f0"));z.text(ia)});p.initEditItem(E,A,Yb.KEY_SORT_BY_NAME,B.isSortByName,B.setSortByName);return E},m=function(B){var A=function(z,L){z.setVisible(!L)},E=l.get("waterfallNegitiveOrder","\u8d1f\u503c"),F=p.createSelectableEditItem([!1,!0],function(z,L,ia){var za;!1===ia?za=l.get("waterfallNegitiveOrderDesc","\u5c0f\u5757\u5728\u524d"):!0===ia&&(za=l.get("waterfallNegitiveOrderAsc",
"\u5927\u5757\u5728\u524d"));L.text(za)});p.initEditItem(F,E,Yb.KEY_NEGATIVE_ASC,B.isNegativeAsc,B.setNegativeAsc);F.addCareForBrotherListener(function(z,L,ia){L==Yb.KEY_SORT_BY_NAME&&A(z,ia)});A(F,B.isSortByName());return F},r=function(B){var A=function(z,L){z.setVisible(!L)},E=l.get("waterfallNegativeTopN","\u8d1f\u503c\u524dN\u9879"),F=n();p.initEditItem(F,E,Yb.KEY_NEGATIVE_TOP_N,B.getNegativeTopN,B.setNegativeTopN);F.addCareForBrotherListener(function(z,L,ia){L==Yb.KEY_SORT_BY_NAME&&A(z,ia)});
A(F,B.isSortByName());return F},w=function(B){var A=function(z,L){z.setVisible(!L)},E=l.get("waterfallPositiveTopN","\u6b63\u503c\u524dN\u9879"),F=n();p.initEditItem(F,E,Yb.KEY_POSITIVE_TOP_N,B.getPositiveTopN,B.setPositiveTopN);F.addCareForBrotherListener(function(z,L,ia){L==Yb.KEY_SORT_BY_NAME&&A(z,ia)});A(F,B.isSortByName());return F},n=function(){for(var B=[-1],A=1;10>=A;A++)B.push(A);return p.createSelectableEditItem(B,function(E,F,z){E=0<z?l.get("topNItem","\u524d #1 \u9879\u53ca\u201c\u5176\u5b83\u201d").replace("#1",
z):l.get("itemNone","(\u65e0)");F.text(E)})},t=function(B){var A=l.get("palette","\u8c03\u8272\u677f"),E=new Ab;p.initEditItem(E,A,Na.KEY_PALETTE,B.getPalette,B.setPalette);E.setPresetPaletteGetter(function(F){p.createFacade(F).getPresetPalettes("chartWaterfall",null)});return E}};na.FunnelChartPropertyPane=function(){Ua.call(this);var p=this.protectedMethod;this.protectedInitUi=function(w){var n=p.createCard(l.get("plotArea","\u7ed8\u56fe\u533a"),"ladder nameLabelPosition valueLabelPosition ratioLabelPosition funnelLabelOverlappable palette".split(" ")),
t=p.createCard(l.get("legend","\u56fe\u4f8b"),["showLegend"]),B=p.createCard(l.get("data","\u6570\u636e"),["funnelSortByName","ignoreNegative","ratioBy","ratioFormat"]);w.append(n.createJqUi());w.append(t.createJqUi());w.append(B.createJqUi())};this.protectedGetColorFieldSetForPalette=function(w){return w.getDimensionSet()};this.protectedCreateEditItem=function(w,n){switch(w){case "ladder":var t=f(n);break;case "nameLabelPosition":w=l.get("funnelLabelName","\u540d\u79f0\u6807\u7b7e\u4f4d\u7f6e");
t=h();p.initEditItem(t,w,zb.KEY_LABEL_NAME,n.getNameLabelPosition,n.setNameLabelPosition);break;case "valueLabelPosition":w=l.get("funnelLabelValue","\u6570\u503c\u6807\u7b7e\u4f4d\u7f6e");t=h();p.initEditItem(t,w,zb.KEY_LABEL_VALUE,n.getValueLabelPosition,n.setValueLabelPosition);break;case "ratioLabelPosition":w=l.get("funnelLabelPercent","\u6bd4\u7387\u6807\u7b7e\u4f4d\u7f6e");t=h();p.initEditItem(t,w,zb.KEY_LABEL_RATIO,n.getRatioLabelPosition,n.setRatioLabelPosition);break;case "funnelLabelOverlappable":t=
k(n);break;case "funnelSortByName":t=g(n);break;case "ratioBy":t=m(n);break;case "ratioFormat":t=r(n)}return t};var f=function(w){var n=l.get("funnelLadder","\u68af\u5f62\u5916\u89c2"),t=p.createSelectableEditItem([zb.LADDER_PERFECT,zb.LADDER_ACTUAL],function(B,A,E){B="";switch(E){case zb.LADDER_PERFECT:B=l.get("funnelLadderPerfect","\u6574\u4f53\u68af\u5f62");break;case zb.LADDER_ACTUAL:B=l.get("funnelLadderActual","\u9010\u7ea7\u68af\u5f62")}A.text(B)});p.initEditItem(t,n,zb.KEY_LADDER,w.getLadder,
w.setLadder);return t},h=function(){return p.createSelectableEditItem([zb.LABEL_POSITION_LEFT,zb.LABEL_POSITION_CENTER,zb.LABEL_POSITION_RIGHT,zb.LABEL_POSITION_HIDE],function(w,n,t){w=t==zb.LABEL_POSITION_LEFT?l.get("funnelLabelPositionLeft","\u5de6"):t==zb.LABEL_POSITION_CENTER?l.get("funnelLabelPositionCenter","\u4e2d"):t==zb.LABEL_POSITION_RIGHT?l.get("funnelLabelPositionRight","\u53f3"):l.get("funnelLabelPositionHide","\u9690\u85cf");n.text(w)})},k=function(w){var n=l.get("dataLabelOverlappable",
"\u6807\u7b7e\u5141\u8bb8\u91cd\u53e0"),t=p.createBooleanEditItem();p.initEditItem(t,n,Na.KEY_LABEL_OVERLAPPABLE,w.isDataLabelOverlappable,w.setDataLabelOverlappable);t.addCareForBrotherListener(function(B,A,E){A!=zb.KEY_LABEL_NAME&&A!=zb.KEY_LABEL_VALUE&&A!=zb.KEY_LABEL_RATIO||p.syncEditItemVisible(B,w.isShowLabel())});p.syncEditItemVisible(t,w.isShowLabel());return t},g=function(w){var n=l.get("funnelSortBy","\u6392\u5e8f"),t=p.createSelectableEditItem([!0,!1],function(B,A,E){B=E?l.get("funnelSortByName",
"\u6309\u540d\u79f0"):l.get("funnelSortByMeasure","\u6309\u5ea6\u91cf\u4ece\u5927\u5230\u5c0f");A.text(B)});p.initEditItem(t,n,zb.KEY_SORT_BY_NAME,w.isSortByName,w.setSortByName);return t},m=function(w){var n=l.get("funnelRatioBy","\u6bd4\u7387\u8ba1\u7b97\u65b9\u5f0f"),t=p.createSelectableEditItem([zb.RATIO_BY_STEP,zb.RATIO_BY_START,zb.RATIO_BY_TOTAL],function(B,A,E){B="";switch(E){case zb.RATIO_BY_STEP:B=l.get("funnelRatioByStep","\u9010\u7ea7\u5dee\u5f02");break;case zb.RATIO_BY_START:B=l.get("funnelRatioByStart",
"\u5360\u7b2c\u4e00\u5c42\u767e\u5206\u6bd4");break;case zb.RATIO_BY_TOTAL:B=l.get("funnelRatioByTotal","\u5360\u5408\u8ba1\u7684\u767e\u5206\u6bd4")}A.text(B)});p.initEditItem(t,n,zb.KEY_RATIOBY,w.getRatioBy,w.setRatioBy);return t},r=function(w){var n=l.get("funnelRatioFormat","\u6bd4\u7387\u683c\u5f0f"),t=p.createNumberFormatEditItem();p.initEditItem(t,n,zb.KEY_RATIO_FORMAT,function(){var B=w.getRatioFormat();!B&&(B="{-2}#,##0.00%");return B},w.setRatioFormat);return t}};na.ScatterChartPropertyPane=
function(){Ua.call(this);mb.call(this);var p=this.protectedMethod;this.protectedInitUi=function(k){var g=p.createCard(l.get("plotArea","\u7ed8\u56fe\u533a"),["palette"]),m=p.createCard(l.get("legend","\u56fe\u4f8b"),["showLegend"]),r=p.createCard(l.get("xAxis","\u6a2a\u8f74"),["xUnitText","xFormat","xRulerStart","xReflines"]),w=p.createCard(l.get("yAxis","\u7eb5\u8f74"),["yUnitText","yFormat","yRulerStart","yReflines"]);k.append(g.createJqUi());k.append(m.createJqUi());k.append(r.createJqUi());k.append(w.createJqUi())};
this.protectedGetColorFieldSetForPalette=function(k){return k.getSeriesFieldSet()};var f=this.protectedCreateEditItem;this.protectedCreateEditItem=function(k,g){switch(k){case "xUnitText":k=l.get("axisUnit","\u6807\u9898/\u5355\u4f4d");var m=p.createTextEditItem();p.initEditItem(m,k,vb.KEY_X_UNIT_TEXT,g.getXUnitText,g.setXUnitText);break;case "xRulerStart":k=l.get("rulerScope","\u6570\u8f74\u8303\u56f4");m=p.createRulerScopeEditItem();p.initEditItem(m,k,vb.KEY_X_RULER_START,g.getXRulerScope,g.setXRulerScope);
break;case "xFormat":k=l.get("numberFormat","\u6570\u5b57\u683c\u5f0f");m=l.get("numberFormatFollowField","\u8ddf\u968f\u5ea6\u91cf\u5b57\u6bb5");m=p.createNumberFormatEditItem(m);p.initEditItem(m,k,vb.KEY_X_FORMAT,g.getXFormat,g.setXFormat);break;case "xReflines":k=l.get("refline","\u53c2\u8003\u7ebf");m=p.createReflinesEditItem();p.initEditItem(m,k,vb.KEY_X_REFLINES,g.getXReflines,g.setXReflines);m.setMeasureFieldsGetter(function(){return h(p.getSquareModel().getChart().getXAxisFieldSet())});break;
case "yUnitText":k=l.get("axisUnit","\u6807\u9898/\u5355\u4f4d");m=p.createTextEditItem();p.initEditItem(m,k,vb.KEY_Y_UNIT_TEXT,g.getYUnitText,g.setYUnitText);break;case "yRulerStart":k=l.get("rulerScope","\u6570\u8f74\u8303\u56f4");m=p.createRulerScopeEditItem();p.initEditItem(m,k,vb.KEY_Y_RULER_START,g.getYRulerScope,g.setYRulerScope);break;case "yFormat":k=l.get("numberFormat","\u6570\u5b57\u683c\u5f0f");m=l.get("numberFormatFollowField","\u8ddf\u968f\u5ea6\u91cf\u5b57\u6bb5");m=p.createNumberFormatEditItem(m);
p.initEditItem(m,k,vb.KEY_Y_FORMAT,g.getYFormat,g.setYFormat);break;case "yReflines":k=l.get("refline","\u53c2\u8003\u7ebf");m=p.createReflinesEditItem();p.initEditItem(m,k,vb.KEY_Y_REFLINES,g.getYReflines,g.setYReflines);m.setMeasureFieldsGetter(function(){return h(p.getSquareModel().getChart().getYAxisFieldSet())});break;default:m=f(k,g)}return m};var h=function(k){for(var g=[],m=0,r=k.getItemModelCount();m<r;m++){var w=k.getItemModel(m);if(w.isMeasure()){g.push(w);break}}return g}};na.DialChartPropertyPane=
function(){Ua.call(this);var p=this.protectedMethod;this.protectedInitUi=function(f){var h=p.createCard(l.get("dialPan","\u8868\u76d8"),"sections arcDegree arcDegreeCustom rotate panStyle showRulerMark rulerMarkFormat".split(" ")),k=p.createCard(l.get("dialPointer","\u6307\u9488"),["pointerLabel","pointerName","pointerNumberFormat","dataEmptyInstead"]),g=p.createCard(l.get("animation","\u52a8\u753b"),["animation"]);f.append(h.createJqUi());f.append(k.createJqUi());f.append(g.createJqUi())};this.protectedCreateEditItem=
function(f,h){switch(f){case "sections":f=l.get("dialSection","\u5206\u6bb5");var k=new ta;k.bindModelContext(p.getMeta,h.createSection);p.initEditItem(k,f,Pa.KEY_SECTIONS,h.getSections,h.setSections);break;case "arcDegree":f=l.get("dialArc","\u76d8\u9762\u5706\u5f27");k=[240,180];k=p.createSelectableEditItem(k,function(g,m,r){g=180==r?l.get("dialArcSemiCircle","\u534a\u5706"):240==r?l.get("dialArcQuasiCircle","\u51c6\u5706"):"";m.text(g)});p.initEditItem(k,f,Pa.KEY_ARC_DEGREE,h.getArcDegree,h.setArcDegree);
break;case "arcDegreeCustom":f="\u81ea\u5b9a\u4e49\u5ea6\u6570";k=p.createNumberEditItem(0,360,10);p.initEditItem(k,f,Pa.KEY_ARC_DEGREE,h.getArcDegree,h.setArcDegree);p.syncEditItemVisible(k,!1);break;case "rotate":f="\u65cb\u8f6c";k=p.createNumberEditItem(-180,180,10);p.initEditItem(k,f,Pa.KEY_ROTATE_DEGREE,h.getRotateDegree,h.setRotateDegree);p.syncEditItemVisible(k,!1);break;case "panStyle":f=l.get("dialPanStyle","\u76d8\u9762\u98ce\u683c");k=[Pa.PAN_STYLE_WITH_TRACK,Pa.PAN_STYLE_ONLY_MARK];k=
p.createSelectableEditItem(k,function(g,m,r){g=r==Pa.PAN_STYLE_ONLY_MARK?l.get("dialPanStyleMark","\u523b\u5ea6\u578b"):r==Pa.PAN_STYLE_WITH_TRACK?l.get("dialPanStyleTrack","\u8272\u5757\u578b"):"";m.text(g)});p.initEditItem(k,f,Pa.KEY_PAN_STYLE,h.getPanStyle,h.setPanStyle);break;case "showRulerMark":f=l.get("dialRulerMark","\u523b\u5ea6\u503c");k=p.createBooleanEditItem();p.initEditItem(k,f,Pa.KEY_SHOW_RULER_MARK_LABEL,h.isShowRulerMarkLabel,h.setShowRulerMarkLabel);break;case "rulerMarkFormat":f=
l.get("dialRulerMarkFormat","\u523b\u5ea6\u503c\u683c\u5f0f");k=l.get("numberFormatFollowField","\u8ddf\u968f\u5ea6\u91cf\u5b57\u6bb5");k=p.createNumberFormatEditItem(k);p.initEditItem(k,f,Pa.KEY_RULER_MARK_FORMAT,h.getRulerMarkLabelFormat,h.setRulerMarkLabelFormat);k.addCareForBrotherListener(function(g,m,r){m==Pa.KEY_SHOW_RULER_MARK_LABEL&&p.syncEditItemVisible(g,h.isShowRulerMarkLabel())});p.syncEditItemVisible(k,h.isShowRulerMarkLabel());break;case "pointerLabel":f=l.get("showDataLabelAs","\u6807\u7b7e\u663e\u793a");
k=[[!0,!1,!1],[!1,!0,!1],[!1,!1,!0],[!1,!0,!0],[!0,!1,!0],[!0,!0,!1]];k=p.createSelectableEditItem(k,function(g,m,r){g="";r&&(r[2]&&(g+=l.get("showDataLabelAsPercent","\u767e\u5206\u6bd4")),r[1]&&g.length&&(g+="+"),r[1]&&(g+=l.get("showDataLabelAsNumber","\u6570\u503c")),r[0]&&g.length&&(g+="+"),r[0]&&(g+=l.get("showDataLabelAsName","\u540d\u79f0")));m.text(g)},function(g,m){return g&&m&&g[0]==m[0]&&g[1]==m[1]&&g[2]==m[2]});p.initEditItem(k,f,Pa.KEY_SHOW_POINTER_LABEL,h.getShowPointerLabel,h.setShowPointerLabel);
break;case "pointerName":f=l.get("dialPointerName","\u540d\u79f0");k=p.createTextEditItem();p.initEditItem(k,f,Pa.KEY_POINTER_NAME,h.getPointerName,h.setPointerName);k.addCareForBrotherListener(function(g,m,r){m==Pa.KEY_SHOW_POINTER_LABEL&&p.syncEditItemVisible(g,h.isShowPointerName())});p.syncEditItemVisible(k,h.isShowPointerName());break;case "pointerNumberFormat":f=l.get("numberFormat","\u6570\u5b57\u683c\u5f0f");k=l.get("numberFormatFollowField","\u8ddf\u968f\u5ea6\u91cf\u5b57\u6bb5");k=p.createNumberFormatEditItem(k);
p.initEditItem(k,f,Pa.KEY_POINTER_NUMBER_FORMAT,h.getPointerNumberFormat,h.setPointerNumberFormat);k.addCareForBrotherListener(function(g,m,r){m==Pa.KEY_SHOW_POINTER_LABEL&&p.syncEditItemVisible(g,h.isShowPointerNumber())});p.syncEditItemVisible(k,h.isShowPointerNumber());break;case "dataEmptyInstead":f=l.get("dataEmptyInstead","\u65e0\u6570\u636e\u65f6\u663e\u793a"),k=p.createFloatNumberEditItem(),p.initEditItem(k,f,Pa.KEY_DATA_EMPTY_INSTEAD,h.getDataEmptyInstead,h.setDataEmptyInstead)}return k}};
na.RectTreeChartPropertyPane=function(){Ua.call(this);Mb.call(this);var p=this.protectedMethod;this.protectedInitUi=function(f){var h=p.createCard(l.get("plotArea","\u7ed8\u56fe\u533a"),["showLabel","discreteColor","continuousColor"]),k=p.createCard(l.get("legend","\u56fe\u4f8b"),["showLegend","legendFormat"]),g=p.createCard(l.get("data","\u6570\u636e"),["ignoreNegative"]);f.append(h.createJqUi());f.append(k.createJqUi());f.append(g.createJqUi())};this.protectedCreateEditItem=function(f,h){return p.createEditItemWithMixColorMode(f,
h)};this.protectedGetColorFieldSet=function(){return p.getSquareModel().getChart().getColorSet()};this.protectedGetColorFieldSetForPalette=function(f){return f.getColorSet()}};na.SunburstChartPropertyPane=function(){Ua.call(this);Lb.call(this);var p=this.protectedMethod;this.protectedInitUi=function(f){var h=p.createCard(l.get("plotArea","\u7ed8\u56fe\u533a"),["showLabel","palette"]),k=p.createCard(l.get("legend","\u56fe\u4f8b"),["showLegend","legendOrderMode"]),g=p.createCard(l.get("data","\u6570\u636e"),
["ignoreNegative"]);f.append(h.createJqUi());f.append(k.createJqUi());f.append(g.createJqUi())};this.protectedGetColorFieldSetForPalette=function(f){return f.getDimensionSet()}};var l,ba,W,ea,aa,la,x,d,b,e,c,a,q,u,v,y,C,P,U,fa,wa,ma,Ea,Xa,bb,Jb,Ya,nb,wb,va,Y,J,N,X,Q,G,T,R,S,ca,H,I,M,K,ha,Aa,Ta,db,jb,Na,xb,Ub,ec,kc,Pb,Qb,ac,bc,Bb,ya,Oa,Ra,Ca,Pa,gb,pb,Cb,Rb,Yb,zb,vb;(function(){var p=com.kingdee.bos.qing.framework.common;l=p.MultilanguageManager.createPackageAccessor(na);p=com.kingdee.bos.qing.common;
ba=p.DomUtil;p=com.kingdee.bos.qing.ui.component;W=p.TextField;ea=p.CheckBox;aa=p.ComboBox;la=p.AbstractModalDialog;x=p.F7Selector;d=p.SimpleConfirmer;b=p.ComboColor;e=p.ColorChooser;c=p.Spinner;a=p.Label;q=p.TextArea;u=p.RadioButton;v=p.RadioButtonGroup;y=p.WorkButton;C=p.MessageDialog;P=p.TitleContainer;U=p.Dialog;fa=p.LeftTabContainer;p=com.kingdee.bos.qing.common.ui;wa=p.NumberFormatModel;ma=p.NumberFormatSettingPanel;Ea=p.NumberFormatSample;Xa=p.TableUtil;bb=p.CommonIconUtil;Jb=p.ColorSelector;
Ya=p.ColorWithOpacitySelector;nb=p.BlinkHelper;p=com.kingdee.bos.qing.core.commonui;wb=p.MetaFieldSelector;p=com.kingdee.bos.qing.core;va=p.LinkageRegister;Y=p.MapLibraryRegister;p=com.kingdee.bos.qing.core.model;J=p.Meta;N=p.MetaField;X=p.AbstractAnalyticalField;Q=p.Palette;G=p.DiscreteColor;T=p.LinkTargets;R=p.AbstractFilterPreparedModel;p=com.kingdee.bos.qing.core.controller;S=p.ActionChangeProperty;p=com.kingdee.bos.qing.core.ui;ca=p.ReflinesPanel;H=p.AbstractEditableItemsPanel;I=p.PaletteSettingPanel;
M=p.PaletteMappingSettingPanel;K=p.ContinuousColorSettingDialog;p=com.kingdee.bos.qing.square.model;ha=p.SquareModel;Aa=p.ItemModelSet;Ta=p.TooltipsAutoDisplay;db=p.SortAccording;jb=p.KPICustomStyles;Na=p.AbstractChartProperty;xb=p.AbstractPieChartProperty;Ub=p.AbstractLineChartProperty;ec=p.RingChartProperty;kc=p.RoseChartProperty;Pb=p.XSYNChartProperty;Qb=p.YSXNChartProperty;ac=p.LineChartProperty;bc=p.KPIChartProperty;Bb=p.MapChartProperty;ya=p.GISChartProperty;Oa=p.RadarChartProperty;Ra=p.AbstractProgressChartProperty;
Ca=p.ProgressCircleChartProperty;Pa=p.DialChartProperty;gb=p.CompositeChartProperty;pb=p.AbstractListChartProperty;Cb=p.GridChartProperty;Rb=p.CustomListChartProperty;Yb=p.WaterfallChartProperty;zb=p.FunnelChartProperty;vb=p.ScatterChartProperty})();hb.DEFAULT_WHITE="white";hb.DEFAULT_DARK="darkBlue";hb.DEFAULT_GOLD="gold";hb.DEFAULT_CYAN="cyan"})();(function(){function Ua(){var O=this,D,V,sa;this.isReleased=function(){return!0};this.getName=function(){return D};this.getText=function(){return V};this.getIconFileName=function(){return sa};this.createFieldCards=function(Ba,Fa){throw Error("Override me.");};this.smartCreateSquareFieldFromMetaField=function(Ba,Fa){return null};this.createPropertyPane=function(){throw Error("Override me.");};this.willTransform=function(Ba){var Fa=new qb;O.protectedWillTransformImpl(Ba,Fa);Fa.collectRoll(Ba.getRollSet());
Fa.collectOthers(Ba.getGarbageFields());return Fa};this.protectedWillTransformImpl=function(Ba,Fa){throw Error("Override me.");};this.transform=function(Ba){var Fa=[];Ba.popRollField(Fa);var yb=O.protectedTransformImpl(Ba);Ba.setupItemModelSet(yb.getRollSet(),Fa);yb.setGarbageFields(Ba.recycle());return yb};this.protectedTransformImpl=function(){throw Error("Override me.");};this.parseJsonChartModel=function(Ba){Ba=Q.createFromJson(Ba);var Fa=Ba.getCategories();return Fa&&0!=Fa.length?Ba:null};this.createChartCtrl=
function(Ba,Fa){Fa=O.protectedCreateChartCtrlImpl(Ba,Fa);Fa.setModel(Ba);return Fa};this.protectedCreateChartCtrlImpl=function(Ba,Fa){throw Error("Override me.");};this.transformToDrillTarget=function(Ba,Fa){return 0<=Ba?new function(yb){this.getValue=function(){return yb.getExecutableValue()};this.getText=function(){return yb.getLabel()};this.isAsParent=function(){return yb.isAsParent()}}(Fa.getModel().getCategories()[Ba]):null};this.transformToJumpTarget=function(Ba,Fa,yb){return 0<=Ba&&yb.isLinkageSupported()?
(Ba=Fa.getModel().getCategories()[Ba],new function(Hb,Gb){this.getItemCount=function(){return Hb?1:0};this.getField=function(Nb){return Hb};this.getMember=function(Nb){return Gb}}(yb.lookupLinkageKeyField(),Ba.getExecutableValue())):null};this.transformToExaminingTarget=function(Ba,Fa,yb){if(0<=Ba&&yb.isDataExaminingSupported()){Ba=Fa.getModel().getCategories()[Ba];var Hb=yb.lookupDataExaminingCoordinateFields(),Gb=Hb?!0:!1;return new function(Nb){this.getJson=function(){var $b={};$b.fields=Gb?[Hb.getId()]:
[];$b.values=Gb?[Nb.getExecutableValue()]:[];return $b}}(Ba)}return null};this.customLoading=function(Ba,Fa,yb,Hb){Hb()};this.protectedMethod={setName:function(Ba){D=Ba},setText:function(Ba){V=Ba},setIconFileName:function(Ba){sa=Ba}}}function Mb(){this.select=function(O,D){0>O?D.getSelectionModel().deselectCategories():(O=D.getModel().getCategories()[O],D.getSelectionModel().toggleSelectCategory(O))};this.isSelected=function(O,D){if(0>O)return!1;O=D.getModel().getCategories()[O];return D.getSelectionModel().isSelected(O,
null)}}function ub(){this.select=function(O,D){"string"==typeof O?D.getSelectionModel().toggleSelect(O):D.getSelectionModel().deselect()};this.isSelected=function(O,D){return"string"==typeof O?D.getSelectionModel().isSelected(O):!1}}function mb(){this.select=function(O,D){0>O?D.getSelectionModel().deselect():(O=D.getModel().getRow(O),D.getSelectionModel().toggleSelect(O))};this.isSelected=function(O,D){if(0>O)return!1;O=D.getModel().getRow(O);return D.getSelectionModel().isSelected(O)}}function qb(){var O=
this,D=[],V=[],sa=[],Ba=[],Fa=[],yb=[],Hb=[],Gb=[],Nb=[],$b=[],nc=function(tb,Xb){for(var Zb=0,dc=tb.getItemModelCount();Zb<dc;Zb++)Xb.push(tb.goodbyeItemModel(Zb))},Ob=function(tb,Xb,Zb,dc){for(var jc=0;jc<tb.length&&!(dc&&Zb.length>=dc);){var hc=tb[jc];Xb&&hc.isDimension()||!Xb&&hc.isMeasure()?(Zb.push(hc),tb.splice(jc,1)):jc++}};this.getRemainDimensionCount=function(){var tb=0,Xb=function(Zb){for(var dc=0;dc<Zb.length;dc++)Zb[dc].isDimension()&&tb++};Xb(D);Xb(V);Xb(sa);Xb(Ba);Xb(Fa);Xb(yb);Xb(Hb);
Xb(Gb);Xb(Nb);Xb($b);return tb};this.collectXAxis=function(tb){nc(tb,D)};this.popXAxisDimension=function(tb,Xb){Ob(D,!0,tb,Xb)};this.popXAxisMeasure=function(tb,Xb){Ob(D,!1,tb,Xb)};this.collectYAxis=function(tb){nc(tb,V)};this.popYAxisDimension=function(tb,Xb){Ob(V,!0,tb,Xb)};this.popYAxisMeasure=function(tb,Xb){Ob(V,!1,tb,Xb)};this.collectSeries=function(tb){nc(tb,sa)};this.popSeriesDimension=function(tb,Xb){Ob(sa,!0,tb,Xb)};this.popSeriesMeasure=function(tb,Xb){Ob(sa,!1,tb,Xb)};this.collectColorField=
function(tb){nc(tb,Ba)};this.popDiscreteColorField=function(tb,Xb){Ob(Ba,!0,tb,Xb);Ob(sa,!0,tb,Xb)};this.popGradualColorField=function(tb,Xb){Ob(Ba,!1,tb,Xb)};this.collectSizeField=function(tb){nc(tb,Fa)};this.popSizeField=function(tb,Xb){Ob(Fa,!1,tb,Xb)};this.collectAngleField=function(tb){nc(tb,yb)};this.popAngleField=function(tb,Xb){Ob(yb,!1,tb,Xb)};this.collectRoll=function(tb){nc(tb,Hb)};this.popRollField=function(tb){Ob(Hb,!0,tb)};this.collectInformationField=function(tb){nc(tb,Gb)};this.popInformationField=
function(tb){Ob(Gb,!0,tb);Ob(Gb,!1,tb)};this.popAnyDimension=function(tb,Xb){Ob(D,!0,tb,Xb);Ob(V,!0,tb,Xb);Ob(sa,!0,tb,Xb);O.popDiscreteColorField(tb,Xb);Ob(Hb,!0,tb,Xb);Ob(Gb,!0,tb,Xb);Ob(Nb,!0,tb,Xb);Ob($b,!0,tb,Xb)};this.popAnyMeasure=function(tb,Xb){Ob(D,!1,tb,Xb);Ob(V,!1,tb,Xb);Ob(sa,!1,tb,Xb);O.popGradualColorField(tb,Xb);O.popSizeField(tb,Xb);O.popAngleField(tb,Xb);Ob(Hb,!1,tb,Xb);Ob(Gb,!1,tb,Xb);Ob(Nb,!1,tb,Xb);Ob($b,!1,tb,Xb)};this.collectOthers=function(tb){tb&&0<tb.length&&(Nb=Nb.concat(tb))};
this.collectNewSelecteds=function(tb){tb&&0<tb.length&&($b=$b.concat(tb))};this.recycle=function(){var tb=[];tb=tb.concat(D);tb=tb.concat(V);tb=tb.concat(sa);tb=tb.concat(Ba);tb=tb.concat(Fa);tb=tb.concat(yb);tb=tb.concat(Hb);tb=tb.concat(Gb);return tb=tb.concat(Nb)};this.setupItemModelSet=function(tb,Xb){for(var Zb=0;Zb<Xb.length;Zb++)tb.addItemModel(Xb[Zb])}}function sb(){Ua.call(this);var O=this;this.createFieldCards=function(D,V){var sa=new D;sa.setTitle(l.get("xAxis","\u6a2a\u8f74"));sa.setItemModelSet(V.getXAxis());
sa.setOperatingPrompt(l.get("dragTextFieldHere","\u5c06\u6587\u672c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));var Ba=new D;Ba.setTitle(l.get("yAxis","\u7eb5\u8f74"));Ba.setItemModelSet(V.getYAxis());Ba.setOperatingPrompt(l.get("dragNumberFieldHere","\u5c06\u6570\u503c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));var Fa=new D;Fa.setTitle(l.get("series","\u7cfb\u5217"));Fa.setItemModelSet(V.getSeries());Fa.setOperatingPrompt(l.get("tryDragTextFieldHere","\u5c1d\u8bd5\u5c06\u6587\u672c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));
D=new D;D.setTitle(l.get("roll","\u94bb\u53d6\u5230"));D.setItemModelSet(V.getRollSet());D.setOperatingPrompt(l.get("tryDragTextFieldHere","\u5c1d\u8bd5\u5c06\u6587\u672c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));return[sa,Ba,Fa,D]};this.protectedWillTransformImpl=function(D,V){V.collectXAxis(D.getXAxis());V.collectYAxis(D.getYAxis());V.collectSeries(D.getSeries())};this.protectedTransformImpl=function(D){var V=[],sa=[],Ba=[];D.popYAxisMeasure(sa);D.popXAxisDimension(V,1);D.popSeriesDimension(Ba,
1);D.popAnyMeasure(sa);1!=D.getRemainDimensionCount()&&1>Ba.length&&D.popDiscreteColorField(Ba,1);1>V.length&&D.popAnyDimension(V,1);1>Ba.length&&D.popAnyDimension(Ba,1);var Fa=O.protectedCreateChartModelImpl();D.setupItemModelSet(Fa.getXAxis(),V);D.setupItemModelSet(Fa.getYAxis(),sa);D.setupItemModelSet(Fa.getSeries(),Ba);return Fa};this.protectedCreateChartModelImpl=function(){throw Error("Override me");}}function Vb(){Ua.call(this);var O=this;this.createFieldCards=function(D,V){var sa=new D;sa.setTitle(l.get("xAxis",
"\u6a2a\u8f74"));sa.setItemModelSet(V.getXAxis());sa.setOperatingPrompt(l.get("dragNumberFieldHere","\u5c06\u6570\u503c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));var Ba=new D;Ba.setTitle(l.get("yAxis","\u7eb5\u8f74"));Ba.setItemModelSet(V.getYAxis());Ba.setOperatingPrompt(l.get("dragTextFieldHere","\u5c06\u6587\u672c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));var Fa=new D;Fa.setTitle(l.get("series","\u7cfb\u5217"));Fa.setItemModelSet(V.getSeries());Fa.setOperatingPrompt(l.get("tryDragTextFieldHere",
"\u5c1d\u8bd5\u5c06\u6587\u672c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));D=new D;D.setTitle(l.get("roll","\u94bb\u53d6\u5230"));D.setItemModelSet(V.getRollSet());D.setOperatingPrompt(l.get("tryDragTextFieldHere","\u5c1d\u8bd5\u5c06\u6587\u672c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));return[sa,Ba,Fa,D]};this.protectedWillTransformImpl=function(D,V){V.collectXAxis(D.getXAxis());V.collectYAxis(D.getYAxis());V.collectSeries(D.getSeries())};this.protectedTransformImpl=function(D){var V=[],sa=
[],Ba=[];D.popXAxisMeasure(V);D.popYAxisDimension(sa,1);D.popSeriesDimension(Ba,1);D.popAnyMeasure(V);1!=D.getRemainDimensionCount()&&1>Ba.length&&D.popDiscreteColorField(Ba,1);1>sa.length&&D.popAnyDimension(sa,1);1>Ba.length&&D.popAnyDimension(Ba,1);var Fa=O.protectedCreateChartModelImpl();D.setupItemModelSet(Fa.getXAxis(),V);D.setupItemModelSet(Fa.getYAxis(),sa);D.setupItemModelSet(Fa.getSeries(),Ba);return Fa};this.protectedCreateChartModelImpl=function(){throw Error("Override me");}}function Lb(){sb.call(this);
Mb.call(this);var O=this.protectedMethod;O.setName(ea.ChartType_Column);O.setIconFileName("chart_msbar");O.setText(l.get("chartColumn","\u591a\u7cfb\u5217\u67f1\u5f62\u56fe"));this.createPropertyPane=function(){return new gb};this.protectedCreateChartModelImpl=function(){return new c};this.protectedCreateChartCtrlImpl=function(D,V){return new ca}}function xa(){sb.call(this);Mb.call(this);var O=this.protectedMethod;O.setName(ea.ChartType_StackedColumn);O.setIconFileName("chart_stackbar");O.setText(l.get("chartStackColumn",
"\u5806\u79ef\u67f1\u5f62\u56fe"));var D=this.createFieldCards;this.createFieldCards=function(V,sa){V=D(V,sa);V[2].setTitle(l.get("stack","\u5806\u79ef"));return V};this.createPropertyPane=function(){return new Cb};this.protectedCreateChartModelImpl=function(){return new a};this.protectedCreateChartCtrlImpl=function(V,sa){return new I}}function eb(){sb.call(this);Mb.call(this);var O=this.protectedMethod;O.setName(ea.ChartType_PercentStackedColumn);O.setIconFileName("chart_percentbar");O.setText(l.get("chartPercentStackColumn",
"\u767e\u5206\u6bd4\u5806\u79ef\u67f1\u5f62\u56fe"));var D=this.createFieldCards;this.createFieldCards=function(V,sa){V=D(V,sa);V[2].setTitle(l.get("stack","\u5806\u79ef"));return V};this.createPropertyPane=function(){return new Rb};this.protectedCreateChartModelImpl=function(){return new q};this.protectedCreateChartCtrlImpl=function(V,sa){return new M}}function Ma(){Vb.call(this);Mb.call(this);var O=this.protectedMethod;O.setName(ea.ChartType_Bar);O.setIconFileName("chart_horizontalmsbar");O.setText(l.get("chartBar",
"\u591a\u7cfb\u5217\u6761\u5f62\u56fe"));this.createPropertyPane=function(){return new pb};this.protectedCreateChartModelImpl=function(){return new u};this.protectedCreateChartCtrlImpl=function(D,V){return new H}}function Ja(){Vb.call(this);Mb.call(this);var O=this.protectedMethod;O.setName(ea.ChartType_StackedBar);O.setIconFileName("chart_horizontalstackbar");O.setText(l.get("chartStackBar","\u5806\u79ef\u6761\u5f62\u56fe"));var D=this.createFieldCards;this.createFieldCards=function(V,sa){V=D(V,
sa);V[2].setTitle(l.get("stack","\u5806\u79ef"));return V};this.createPropertyPane=function(){return new Yb};this.protectedCreateChartModelImpl=function(){return new v};this.protectedCreateChartCtrlImpl=function(V,sa){return new K}}function oa(){Vb.call(this);Mb.call(this);var O=this.protectedMethod;O.setName(ea.ChartType_PercentStackedBar);O.setIconFileName("chart_horizontalpercentbar");O.setText(l.get("chartPercentStackBar","\u767e\u5206\u6bd4\u5806\u79ef\u6761\u5f62\u56fe"));var D=this.createFieldCards;
this.createFieldCards=function(V,sa){V=D(V,sa);V[2].setTitle(l.get("stack","\u5806\u79ef"));return V};this.createPropertyPane=function(){return new zb};this.protectedCreateChartModelImpl=function(){return new y};this.protectedCreateChartCtrlImpl=function(V,sa){return new ha}}function ka(){sb.call(this);var O=this.protectedMethod;O.setName(ea.ChartType_Line);O.setIconFileName("chart_mline");O.setText(l.get("chartLine","\u6298\u7ebf\u56fe"));var D=this.createFieldCards;this.createFieldCards=function(V,
sa){V=D(V,sa);V[0].setOperatingPrompt(l.get("dragDateFieldHere","\u5c06\u65e5\u671f\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));V[3].setOperatingPrompt(l.get("tryDragDateFieldHere","\u5c1d\u8bd5\u5c06\u65e5\u671f\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));return V};this.createPropertyPane=function(){return new vb};this.protectedCreateChartModelImpl=function(){return new C};this.protectedCreateChartCtrlImpl=function(V,sa){return new Aa}}function Ha(){sb.call(this);var O=this.protectedMethod;O.setName(ea.ChartType_Area);
O.setIconFileName("chart_area");O.setText(l.get("chartArea","\u9762\u79ef\u56fe"));var D=this.createFieldCards;this.createFieldCards=function(V,sa){V=D(V,sa);V[0].setOperatingPrompt(l.get("dragDateFieldHere","\u5c06\u65e5\u671f\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));V[3].setOperatingPrompt(l.get("tryDragDateFieldHere","\u5c1d\u8bd5\u5c06\u65e5\u671f\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));return V};this.createPropertyPane=function(){return new p};this.protectedCreateChartModelImpl=function(){return new P};
this.protectedCreateChartCtrlImpl=function(V,sa){return new Ta}}function Sa(){Ha.call(this);var O=this.protectedMethod;O.setName(ea.ChartType_PercentArea);O.setIconFileName("chart_percentarea");O.setText(l.get("chartPercentArea","\u767e\u5206\u6bd4\u9762\u79ef\u56fe"));this.createPropertyPane=function(){return new Rb};this.protectedCreateChartModelImpl=function(){return new U};this.protectedCreateChartCtrlImpl=function(D,V){return new db}}function da(){Ua.call(this);Mb.call(this);var O=this;this.createFieldCards=
function(D,V){var sa=new D;sa.setItemModelSet(V.getAngleSet());sa.setOperatingPrompt(l.get("dragNumberFieldHere","\u5c06\u6570\u503c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));var Ba=new D;Ba.setTitle(l.get("color","\u989c\u8272"));Ba.setItemModelSet(V.getColorSet());Ba.setOperatingPrompt(l.get("dragTextFieldHere","\u5c06\u6587\u672c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));D=new D;D.setTitle(l.get("roll","\u94bb\u53d6\u5230"));D.setItemModelSet(V.getRollSet());D.setOperatingPrompt(l.get("tryDragTextFieldHere",
"\u5c1d\u8bd5\u5c06\u6587\u672c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));O.protectedInitFieldCards(sa,Ba,D);return[sa,Ba,D]};this.protectedInitFieldCards=function(D,V,sa){D.setTitle(l.get("angle","\u89d2\u5ea6"))};this.protectedWillTransformImpl=function(D,V){V.collectAngleField(D.getAngleSet());V.collectColorField(D.getColorSet())};this.protectedTransformImpl=function(D){var V=[],sa=[];D.popAngleField(V,1);D.popDiscreteColorField(sa,1);1>V.length&&D.popAnyMeasure(V,1);1>sa.length&&D.popAnyDimension(sa,
1);var Ba=O.protectedCreateModel();D.setupItemModelSet(Ba.getAngleSet(),V);D.setupItemModelSet(Ba.getColorSet(),sa);return Ba};this.protectedCreateModel=function(){throw Error("Override");};this.protectedCreateChartCtrlImpl=function(D,V){return new S}}function qa(){da.call(this);var O=this.protectedMethod;O.setName(ea.ChartType_Pie);O.setIconFileName("chart_pie");O.setText(l.get("chartPie","\u997c\u56fe"));this.createPropertyPane=function(){return new f};this.protectedCreateModel=function(){return new d}}
function Ga(){da.call(this);var O=this.protectedMethod;O.setName(ea.ChartType_Ring);O.setIconFileName("chart_ring");O.setText(l.get("chartRing","\u73af\u5f62\u56fe"));this.createPropertyPane=function(){return new h};this.protectedCreateModel=function(){return new b}}function ra(){da.call(this);var O=this.protectedMethod;O.setName(ea.ChartType_Rose);O.setIconFileName("chart_rose");O.setText(l.get("chartRose","\u73ab\u7470\u56fe"));this.protectedInitFieldCards=function(D,V,sa){D.setTitle(l.get("radius",
"\u534a\u5f84"))};this.createPropertyPane=function(){return new k};this.protectedCreateModel=function(){return new e}}function cb(){Ua.call(this);var O=this.protectedMethod;O.setName(ea.ChartType_KPI);O.setIconFileName("chart_kpi");O.setText(l.get("chartKpi","\u4e1a\u52a1\u6307\u6807"));this.createFieldCards=function(D,V){var sa=new D;sa.setTitle(l.get("primaryKpi","\u4e3b\u6307\u6807"));sa.setItemModelSet(V.getPrimarySet());sa.setOperatingPrompt(l.get("dragNumberFieldHere","\u5c06\u6570\u503c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));
D=new D;D.setTitle(l.get("secondaryKpi","\u526f\u6307\u6807"));D.setItemModelSet(V.getSecondarySet());D.setOperatingPrompt(l.get("dragNumberFieldHere","\u5c06\u6570\u503c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));return[sa,D]};this.createPropertyPane=function(){return new g};this.protectedWillTransformImpl=function(D,V){V.collectXAxis(D.getPrimarySet());V.collectXAxis(D.getSecondarySet())};this.protectedTransformImpl=function(D){var V=[],sa=[];D.popAnyMeasure(V,1);D.popAnyMeasure(sa);var Ba=new x;
D.setupItemModelSet(Ba.getPrimarySet(),V);D.setupItemModelSet(Ba.getSecondarySet(),sa);return Ba};this.protectedCreateChartCtrlImpl=function(D,V){D=new R;D.setClickableChecker(function(){return V.getChartProperty().getLinkTargets()?!0:!1});return D}}function Qa(){Ua.call(this);ub.call(this);var O=this.protectedMethod;O.setName(ea.ChartType_Map);O.setIconFileName("chart_map");O.setText(l.get("chartMap","\u5730\u56fe"));this.createFieldCards=function(V,sa){var Ba=new V;Ba.setTitle(l.get("dimensionForMap",
"\u5730\u57df"));Ba.setItemModelSet(sa.getDimensionSet());Ba.setOperatingPrompt(l.get("dragGeographicFieldHere","\u5c06\u8868\u793a\u5730\u57df\u7684\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));Ba.setPerfectHeight(100);var Fa=new V;Fa.setTitle(l.get("measureForMap","\u6570\u503c\uff08\u989c\u8272\uff09"));Fa.setItemModelSet(sa.getMeasureSet());Fa.setOperatingPrompt(l.get("dragNumberFieldHere","\u5c06\u6570\u503c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));Fa.setPerfectHeight(100);V=new V;V.setTitle(l.get("infomation",
"\u8be6\u7ec6\u4fe1\u606f"));V.setItemModelSet(sa.getInfomationSet());V.setPerfectHeight(180);return[Ba,Fa,V]};this.createPropertyPane=function(){return new m};this.protectedWillTransformImpl=function(V,sa){sa.collectXAxis(V.getDimensionSet());sa.collectColorField(V.getMeasureSet());sa.collectInformationField(V.getInfomationSet())};this.protectedTransformImpl=function(V){var sa=[],Ba=[];V.popAnyDimension(sa,1);V.popAnyMeasure(Ba,1);var Fa=[];V.popAnyDimension(Fa);V.popAnyMeasure(Fa);var yb=new fa;
V.setupItemModelSet(yb.getDimensionSet(),sa);V.setupItemModelSet(yb.getMeasureSet(),Ba);V.setupItemModelSet(yb.getInfomationSet(),Fa);return yb};this.protectedCreateChartCtrlImpl=function(V,sa){return new jb};this.transformToDrillTarget=function(V,sa){return"string"==typeof V?new function(Ba){this.getValue=function(){return Ba};this.getText=function(){return Ba};this.isAsParent=function(){return!1}}(V):null};this.transformToJumpTarget=function(V,sa,Ba){return null};this.transformToExaminingTarget=
function(V,sa,Ba){return null};this.customLoading=function(V,sa,Ba,Fa){var yb=V.getChartProperty();V=function(Hb,Gb,Nb){return function(){Hb.rtTemplateToRenderAttr(Gb);Nb()}}(yb,Ba.getAttr(),Fa);yb.askRtTemplateNeedReload(V)?(yb.rtTemplateLoaded(null),(Fa=yb.getOutsideReference())?(sa=sa(function(Hb){yb.rtTemplateLoaded(Hb)},function(Hb,Gb){var Nb={};Nb.content=D(Hb+" "+Gb);yb.rtTemplateLoaded(Nb);return!0}),sa.setShowBlocking(!1),sa.loadMapTemplate(Fa)):(sa={},sa.content=D(l.get("chartmapTemplateNeeded",
"\u672a\u8bbe\u7f6e\u5730\u56fe\u6a21\u677f\u3002")),yb.rtTemplateLoaded(sa))):yb.askRtTemplateLoading(V)||Fa()};var D=function(V){var sa=$("<div>"),Ba=$("<div>");Ba.css("color","#ccc");Ba.text(V);Ba.appendTo(sa);return sa.html()}}function hb(){Ua.call(this);ub.call(this);var O=this.protectedMethod;O.setName(ea.ChartType_GIS);O.setIconFileName("chart_gis");O.setText(l.get("chartGis","GIS\u5730\u56fe"));this.createFieldCards=function(V,sa){var Ba=D(V,sa.getCoordinateSet(),l.get("longitudeLatitude",
"\u7ecf\u7eac\u5ea6"),l.get("dragLongitudeLatitudeFieldHere","\u5c06\u8868\u793a\u7ecf\u5ea6\u548c\u7eac\u5ea6\u7684\u4e24\u4e2a\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));Ba.setPerfectHeight(100);var Fa=D(V,sa.getCaptionSet(),l.get("caption","\u540d\u79f0"),l.get("tryDragTextFieldHere","\u5c1d\u8bd5\u5c06\u6587\u672c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002")),yb=D(V,sa.getColorSet(),l.get("color","\u989c\u8272"),l.get("tryDragTextFieldHere","\u5c1d\u8bd5\u5c06\u6587\u672c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002")),
Hb=D(V,sa.getSizeSet(),l.get("size","\u5927\u5c0f"),l.get("tryDragNumberFieldHere","\u5c1d\u8bd5\u5c06\u6570\u503c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));V=D(V,sa.getInfomationSet(),l.get("infomation","\u8be6\u7ec6\u4fe1\u606f"),null);V.setPerfectHeight(180);return[Ba,Fa,yb,Hb,V]};var D=function(V,sa,Ba,Fa){V=new V;V.setTitle(Ba);V.setItemModelSet(sa);V.setOperatingPrompt(Fa);V.setPerfectHeight(72);return V};this.smartCreateSquareFieldFromMetaField=function(V,sa,Ba){return Ba==sa.getCoordinateSet()&&
V.getDataType()==ba.DT_NUMBER?(sa=new aa,sa.setMetaField(V),sa.setRole(W.ROLE_DIMENSION),sa.setContinuous(!1),sa):null};this.createPropertyPane=function(){return new r};this.protectedWillTransformImpl=function(V,sa){if(1<V.getCoordinateSet().getItemModelCount()){var Ba=new la;Ba.addItemModel(V.getCoordinateSet().goodbyeItemModel(1));sa.collectYAxis(Ba)}0<V.getCoordinateSet().getItemModelCount()&&(Ba=new la,Ba.addItemModel(V.getCoordinateSet().goodbyeItemModel(0)),sa.collectXAxis(Ba));sa.collectSizeField(V.getSizeSet());
sa.collectColorField(V.getColorSet());sa.collectInformationField(V.getCaptionSet());sa.collectInformationField(V.getInfomationSet())};this.protectedTransformImpl=function(V){var sa=[];V.popXAxisDimension(sa,1);V.popYAxisDimension(sa,1);2>sa.length&&V.popAnyDimension(sa,2);var Ba=[];V.popDiscreteColorField(Ba);var Fa=[];V.popSizeField(Fa);var yb=[];V.popAnyDimension(yb,1);var Hb=[];V.popAnyDimension(Hb);V.popAnyMeasure(Hb);var Gb=new wa;V.setupItemModelSet(Gb.getCoordinateSet(),sa);V.setupItemModelSet(Gb.getColorSet(),
Ba);V.setupItemModelSet(Gb.getSizeSet(),Fa);V.setupItemModelSet(Gb.getCaptionSet(),yb);V.setupItemModelSet(Gb.getInfomationSet(),Hb);return Gb};this.protectedCreateChartCtrlImpl=function(V,sa){V=new Na;V.setDesigntimeInitializationChangedListener(function(Ba,Fa,yb){sa.getChartProperty().setInitialContext(Ba,Fa,yb)});return V};this.customLoading=function(V,sa,Ba,Fa){Pa.isServerConfigLoaded()?Fa():(V=sa(function(yb){Pa.setServerConfig(yb.host,yb.path);Fa()}),V.setShowBlocking(!1),V.getGisServerConfig())}}
function Fb(){Ua.call(this);var O=this.protectedMethod;O.setName(ea.ChartType_Radar);O.setIconFileName("chart_radar");O.setText(l.get("chartRadar","\u96f7\u8fbe\u56fe"));this.protectedCreateChartCtrlImpl=function(D,V){return new xb};this.protectedWillTransformImpl=function(D,V){V.collectYAxis(D.getMeasureSet());V.collectXAxis(D.getDimensionSet())};this.protectedTransformImpl=function(D){var V=[],sa=[];D.popAnyMeasure(sa);D.popAnyDimension(V,1<sa.length?1:2);var Ba=new ma;D.setupItemModelSet(Ba.getDimensionSet(),
V);D.setupItemModelSet(Ba.getMeasureSet(),sa);return Ba};this.createFieldCards=function(D,V){var sa=new D;sa.setTitle(l.get("dimensionForRadar","\u7ef4\u5ea6"));sa.setItemModelSet(V.getDimensionSet());sa.setOperatingPrompt(l.get("dragTextFieldHere","\u5c06\u6587\u672c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));D=new D;D.setTitle(l.get("measureForRadar","\u5ea6\u91cf"));D.setItemModelSet(V.getMeasureSet());D.setOperatingPrompt(l.get("dragNumberFieldHere","\u5c06\u6570\u503c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));
return[sa,D]};this.createPropertyPane=function(){return new w}}function pa(){Ua.call(this);this.protectedCreateProgressFieldCards=function(O,D,V){var sa=[],Ba=new O;Ba.setTitle(l.get("desiredProgress","\u76ee\u6807\u503c"));Ba.setItemModelSet(D.getDesired());Ba.setOperatingPrompt(l.get("dragNumberFieldHere","\u5c06\u6570\u503c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));sa.push(Ba);Ba=new O;Ba.setTitle(l.get("completedProgress","\u5b9e\u9645\u503c"));Ba.setItemModelSet(D.getCompleted());Ba.setOperatingPrompt(l.get("dragNumberFieldHere",
"\u5c06\u6570\u503c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));sa.push(Ba);if(V!=pa.CIRCLE){switch(V){case pa.BAR:var Fa=l.get("yAxis","\u7eb5\u8f74");break;case pa.COLUMN:Fa=l.get("xAxis","\u6a2a\u8f74")}V=new O;V.setTitle(Fa);V.setItemModelSet(D.getDimension());V.setOperatingPrompt(l.get("dragTextFieldHere","\u5c06\u6587\u672c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));sa.unshift(V);O=new O;O.setTitle(l.get("roll","\u94bb\u53d6\u5230"));O.setItemModelSet(D.getRollSet());O.setOperatingPrompt(l.get("tryDragTextFieldHere",
"\u5c1d\u8bd5\u5c06\u6587\u672c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));sa.push(O)}return sa};this.protectedWillTransformImpl=function(O,D){O instanceof bb||D.collectXAxis(O.getDimension());D.collectYAxis(O.getDesired());D.collectYAxis(O.getCompleted())};this.protectedProgressTransformImpl=function(O,D){var V=D instanceof bb,sa=[],Ba=[],Fa=[];!V&&O.popAnyDimension(sa,1);O.popAnyMeasure(Ba,1);O.popAnyMeasure(Fa,1);!V&&O.setupItemModelSet(D.getDimension(),sa);O.setupItemModelSet(D.getDesired(),
Ba);O.setupItemModelSet(D.getCompleted(),Fa);return D}}function Ab(){pa.call(this);Mb.call(this);var O=this.protectedMethod,D=this;O.setName(ea.ChartType_ProgressBar);O.setIconFileName("chart_progresshbar");O.setText(l.get("chartProgressBar","\u6761\u5f62\u8fdb\u5ea6\u56fe"));this.protectedCreateChartCtrlImpl=function(V,sa){return new Ub};this.createFieldCards=function(V,sa){return D.protectedCreateProgressFieldCards(V,sa,pa.BAR)};this.createPropertyPane=function(){return new n};this.protectedTransformImpl=
function(V){return D.protectedProgressTransformImpl(V,new Ea)}}function Z(){pa.call(this);Mb.call(this);var O=this.protectedMethod,D=this;O.setName(ea.ChartType_ProgressColumn);O.setIconFileName("chart_progressvbar");O.setText(l.get("chartProgressColumn","\u67f1\u5f62\u8fdb\u5ea6\u56fe"));this.protectedCreateChartCtrlImpl=function(V,sa){return new ec};this.createFieldCards=function(V,sa){return D.protectedCreateProgressFieldCards(V,sa,pa.COLUMN)};this.createPropertyPane=function(){return new t};this.protectedTransformImpl=
function(V){return D.protectedProgressTransformImpl(V,new Xa)}}function Wa(){pa.call(this);var O=this.protectedMethod,D=this;O.setName(ea.ChartType_ProgressCircle);O.setIconFileName("chart_progresscircle");O.setText(l.get("chartProgressCircle","\u73af\u5f62\u8fdb\u5ea6\u56fe"));this.protectedCreateChartCtrlImpl=function(V,sa){return new kc};this.createFieldCards=function(V,sa){return D.protectedCreateProgressFieldCards(V,sa,pa.CIRCLE)};this.createPropertyPane=function(){return new B};this.protectedTransformImpl=
function(V){return D.protectedProgressTransformImpl(V,new bb)}}function fb(){Ua.call(this);var O=this.protectedMethod;O.setName(ea.ChartType_Dial);O.setIconFileName("chart_dial");O.setText(l.get("chartDial","\u4eea\u8868\u56fe"));this.protectedCreateChartCtrlImpl=function(D,V){return new Oa};this.protectedWillTransformImpl=function(D,V){V.collectYAxis(D.getMeasureSet())};this.protectedTransformImpl=function(D){var V=[];D.popAnyMeasure(V,1);var sa=new J;D.setupItemModelSet(sa.getMeasureSet(),V);return sa};
this.createFieldCards=function(D,V){D=new D;D.setTitle(l.get("pointerValue","\u6307\u9488\u503c"));D.setItemModelSet(V.getMeasureSet());D.setOperatingPrompt(l.get("dragNumberFieldHere","\u5c06\u6570\u503c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));return[D]};this.createPropertyPane=function(){return new za}}function Va(){Ua.call(this);Mb.call(this);var O=this.protectedMethod;O.setName(ea.ChartType_Composite);O.setIconFileName("chart_composite");O.setText(l.get("chartComposite","\u7ec4\u5408\u56fe"));
this.protectedCreateChartCtrlImpl=function(D,V){return new Pb};this.protectedWillTransformImpl=function(D,V){V.collectXAxis(D.getXAxis());V.collectYAxis(D.getLeftYAxis());V.collectYAxis(D.getRightYAxis());V.collectSeries(D.getLeftSeries());V.collectSeries(D.getRightSeries())};this.protectedTransformImpl=function(D){var V=new Jb,sa=[],Ba=[],Fa=[];D.popYAxisMeasure(Ba);D.popXAxisDimension(sa,1);D.popSeriesDimension(Fa,1);D.popAnyMeasure(Ba);1!=D.getRemainDimensionCount()&&1>Fa.length&&D.popDiscreteColorField(Fa,
1);1>sa.length&&D.popAnyDimension(sa,1);1>Fa.length&&D.popAnyDimension(Fa,1);D.setupItemModelSet(V.getXAxis(),sa);1<Ba.length&&(sa=Ba.slice(1),Ba=[Ba[0]],D.setupItemModelSet(V.getRightYAxis(),sa));D.setupItemModelSet(V.getLeftYAxis(),Ba);D.setupItemModelSet(V.getLeftSeries(),Fa);return V};this.createFieldCards=function(D,V){var sa=new D;sa.setTitle(l.get("xAxis","\u6a2a\u8f74"));sa.setItemModelSet(V.getXAxis());sa.setOperatingPrompt(l.get("dragTextFieldHere","\u5c06\u6587\u672c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));
var Ba=new D;Ba.setTitle(l.get("leftYAxis","\u5de6\u8f74"));Ba.setItemModelSet(V.getLeftYAxis());Ba.setOperatingPrompt(l.get("dragNumberFieldHere","\u5c06\u6570\u503c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));var Fa=new D;Fa.setTitle(l.get("leftSeries","\u7cfb\u5217\uff08\u5de6\uff09"));Fa.setItemModelSet(V.getLeftSeries());Fa.setOperatingPrompt(l.get("tryDragTextFieldHere","\u5c1d\u8bd5\u5c06\u6587\u672c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));var yb=new D;yb.setTitle(l.get("rightYAxis",
"\u53f3\u8f74"));yb.setItemModelSet(V.getRightYAxis());yb.setOperatingPrompt(l.get("dragNumberFieldHere","\u5c06\u6570\u503c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));var Hb=new D;Hb.setTitle(l.get("rightSeries","\u7cfb\u5217\uff08\u53f3\uff09"));Hb.setItemModelSet(V.getRightSeries());Hb.setOperatingPrompt(l.get("tryDragTextFieldHere","\u5c1d\u8bd5\u5c06\u6587\u672c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));D=new D;D.setTitle(l.get("roll","\u94bb\u53d6\u5230"));D.setItemModelSet(V.getRollSet());
D.setOperatingPrompt(l.get("tryDragTextFieldHere","\u5c1d\u8bd5\u5c06\u6587\u672c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));return[sa,Ba,Fa,yb,D]};this.createPropertyPane=function(){return new A}}function Ka(){Ua.call(this);mb.call(this);this.transformToDrillTarget=function(O,D){return null};this.transformToJumpTarget=function(O,D,V){if(0<=O&&V.isLinkageSupported()){O=D.getModel().getRow(O).getLinkageKeywordValues();var sa=[];V.lookupAllItemModelSet(function(Ba){Ba=Ba.getSquareField();Ba.isDimension()&&
!Ba.isInvalid()&&sa.push(Ba)});return new function(Ba,Fa){this.getItemCount=function(){return Ba.length};this.getField=function(yb){return Ba[yb]};this.getMember=function(yb){return Fa[yb]}}(sa,O)}return null};this.transformToExaminingTarget=function(O,D,V){if(0<=O&&V.isDataExaminingSupported()){O=D.getModel().getRow(O).getLinkageKeywordValues();var sa=[];V.lookupAllItemModelSet(function(Fa){Fa=Fa.getSquareField();Fa.isDimension()&&!Fa.isInvalid()&&sa.push(Fa.getId())});var Ba=0<sa.length;return new function(Fa,
yb){this.getJson=function(){var Hb={};Hb.fields=Ba?Fa:[];Hb.values=Ba?yb:[];return Hb}}(sa,O)}return null}}function ab(){Ka.call(this);var O=this.protectedMethod;O.setName(ea.ChartType_Grid);O.setIconFileName("chart_grid");O.setText(l.get("chartGrid","\u5217\u8868"));this.protectedCreateChartCtrlImpl=function(D,V){return new Qb};this.createFieldCards=function(D,V){D=new D;D.setTitle(l.get("gridColumnSet","\u5217"));D.setItemModelSet(V.getColumnSet());D.setOperatingPrompt(l.get("dragAnyFieldHere",
"\u5c06\u4efb\u610f\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));D.setPerfectHeight(180);return[D]};this.createPropertyPane=function(){return new E};this.protectedWillTransformImpl=function(D,V){V.collectXAxis(D.getColumnSet())};this.protectedTransformImpl=function(D){var V=[],sa=[];D.popAnyMeasure(V);D.popAnyDimension(sa);var Ba=new Ya;D.setupItemModelSet(Ba.getColumnSet(),sa.concat(V));return Ba};this.parseJsonChartModel=function(D){D=G.createFromJson(D);return 0==D.getColumnCount()?null:D}}function kb(){Ka.call(this);
var O=this.protectedMethod;O.setName(ea.ChartType_CustomList);O.setIconFileName("chart_customlist");O.setText(l.get("chartCustomList","\u81ea\u5b9a\u4e49\u5217\u8868"));this.protectedCreateChartCtrlImpl=function(D,V){return new ac};this.createFieldCards=function(D,V){D=new D;D.setTitle(l.get("customListFieldSet","\u5b57\u6bb5"));D.setItemModelSet(V.getFieldSet());D.setOperatingPrompt(l.get("dragAnyFieldHere","\u5c06\u4efb\u610f\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));D.setPerfectHeight(180);
return[D]};this.createPropertyPane=function(){return new F};this.protectedWillTransformImpl=function(D,V){V.collectXAxis(D.getFieldSet())};this.protectedTransformImpl=function(D){var V=[],sa=[];D.popAnyMeasure(V);D.popAnyDimension(sa);var Ba=new nb;D.setupItemModelSet(Ba.getFieldSet(),sa.concat(V));return Ba};this.parseJsonChartModel=function(D){return G.createFromJson(D)}}function La(){Ua.call(this);var O=this.protectedMethod;O.setName(ea.ChartType_Waterfall);O.setIconFileName("chart_waterfall");
O.setText(l.get("chartWaterfall","\u7011\u5e03\u56fe"));this.protectedCreateChartCtrlImpl=function(D,V){return new bc};this.createFieldCards=function(D,V){var sa=new D;sa.setTitle(l.get("waterfallMeasure","\u5ea6\u91cf"));sa.setItemModelSet(V.getMeasureSet());sa.setOperatingPrompt(l.get("dragNumberFieldHere","\u5c06\u6570\u503c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));var Ba=new D;Ba.setTitle(l.get("waterfallClause","\u6761\u76ee"));Ba.setItemModelSet(V.getClauseSet());Ba.setOperatingPrompt(l.get("dragTextFieldHere",
"\u5c06\u6587\u672c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));D=new D;D.setTitle(l.get("waterfallStage","\u9636\u6bb5"));D.setItemModelSet(V.getStageSet());D.setOperatingPrompt(l.get("tryDragTextFieldHere","\u5c1d\u8bd5\u5c06\u6587\u672c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));return[sa,Ba,D]};this.createPropertyPane=function(){return new z};this.protectedWillTransformImpl=function(D,V){V.collectYAxis(D.getMeasureSet());V.collectXAxis(D.getClauseSet());V.collectSeries(D.getStageSet())};this.protectedTransformImpl=
function(D){var V=[],sa=[],Ba=[];D.popAnyMeasure(V,1);D.popAnyDimension(sa,1);D.popAnyDimension(Ba,1);var Fa=new wb;D.setupItemModelSet(Fa.getMeasureSet(),V);D.setupItemModelSet(Fa.getClauseSet(),sa);D.setupItemModelSet(Fa.getStageSet(),Ba);return Fa}}function ob(){Ua.call(this);Mb.call(this);var O=this.protectedMethod;O.setName(ea.ChartType_Funnel);O.setIconFileName("chart_funnel");O.setText(l.get("chartFunnel","\u6f0f\u6597\u56fe"));this.protectedCreateChartCtrlImpl=function(D,V){return new Bb};
this.createFieldCards=function(D,V){var sa=new D;sa.setTitle(l.get("measure","\u5ea6\u91cf"));sa.setItemModelSet(V.getMeasureSet());sa.setOperatingPrompt(l.get("dragNumberFieldHere","\u5c06\u6570\u503c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));D=new D;D.setTitle(l.get("dimension","\u7ef4\u5ea6"));D.setItemModelSet(V.getDimensionSet());D.setOperatingPrompt(l.get("dragTextFieldHere","\u5c06\u6587\u672c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));return[D,sa]};this.createPropertyPane=function(){return new L};
this.protectedWillTransformImpl=function(D,V){V.collectSizeField(D.getMeasureSet());V.collectColorField(D.getDimensionSet())};this.protectedTransformImpl=function(D){var V=[],sa=[];D.popSizeField(V);D.popAnyMeasure(V);D.popDiscreteColorField(sa,1);1>sa.length&&D.popAnyDimension(sa,1);var Ba=new va;D.setupItemModelSet(Ba.getMeasureSet(),V);D.setupItemModelSet(Ba.getDimensionSet(),sa);return Ba}}function ta(){Ua.call(this);var O=this.protectedMethod;O.setName(ea.ChartType_Scatter);O.setIconFileName("chart_scatter");
O.setText(l.get("chartScatter","\u6563\u70b9/\u6c14\u6ce1\u56fe"));this.protectedCreateChartCtrlImpl=function(D,V){return new ya};this.createFieldCards=function(D,V){var sa=new D;sa.setTitle(l.get("xAxis","\u6a2a\u8f74"));sa.setItemModelSet(V.getXAxisFieldSet());sa.setOperatingPrompt(l.get("dragNumberFieldHere","\u5c06\u6570\u503c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));var Ba=new D;Ba.setTitle(l.get("yAxis","\u7eb5\u8f74"));Ba.setItemModelSet(V.getYAxisFieldSet());Ba.setOperatingPrompt(l.get("dragNumberFieldHere",
"\u5c06\u6570\u503c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));var Fa=new D;Fa.setTitle(l.get("size","\u5927\u5c0f"));Fa.setItemModelSet(V.getZAxisFieldSet());Fa.setOperatingPrompt(l.get("tryDragNumberFieldHere","\u5c1d\u8bd5\u5c06\u6570\u503c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));var yb=new D;yb.setTitle(l.get("detail","\u7ec6\u5206"));yb.setItemModelSet(V.getCategoryFieldSet());yb.setOperatingPrompt(l.get("dragTextFieldHere","\u5c06\u6587\u672c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));
D=new D;D.setTitle(l.get("color","\u989c\u8272"));D.setItemModelSet(V.getSeriesFieldSet());D.setOperatingPrompt(l.get("tryDragTextFieldHere","\u5c1d\u8bd5\u5c06\u6587\u672c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));return[sa,Ba,yb,D,Fa]};this.createPropertyPane=function(){return new ia};this.protectedWillTransformImpl=function(D,V){V.collectXAxis(D.getXAxisFieldSet());V.collectYAxis(D.getYAxisFieldSet());V.collectSizeField(D.getZAxisFieldSet());V.collectColorField(D.getSeriesFieldSet());V.collectXAxis(D.getCategoryFieldSet())};
this.protectedTransformImpl=function(D){var V=[],sa=[],Ba=[],Fa=[],yb=[];D.popSizeField(Ba,1);D.popAnyMeasure(V,1);D.popAnyMeasure(sa,1);0==Ba.length&&D.popAnyMeasure(Ba,1);D.popDiscreteColorField(Fa,1);D.popAnyDimension(yb,1);0==Fa.length&&D.popAnyDimension(Fa,1);var Hb=new Y;D.setupItemModelSet(Hb.getXAxisFieldSet(),V);D.setupItemModelSet(Hb.getYAxisFieldSet(),sa);D.setupItemModelSet(Hb.getZAxisFieldSet(),Ba);D.setupItemModelSet(Hb.getCategoryFieldSet(),yb);D.setupItemModelSet(Hb.getSeriesFieldSet(),
Fa);return Hb}}function ja(){Ua.call(this);var O=this.protectedMethod;O.setName(ea.ChartType_RectTree);O.setIconFileName("chart_treemap");O.setText(l.get("chartRectTree","\u6811\u56fe"));this.protectedCreateChartCtrlImpl=function(D,V){return new Ra};this.createFieldCards=function(D,V){var sa=new D;sa.setTitle(l.get("size","\u5927\u5c0f"));sa.setItemModelSet(V.getSizeSet());sa.setOperatingPrompt(l.get("dragNumberFieldHere","\u5c06\u6570\u503c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));sa.setPerfectHeight(88);
var Ba=new D;Ba.setTitle(l.get("detail","\u7ec6\u5206"));Ba.setItemModelSet(V.getDimensionSet());Ba.setOperatingPrompt(l.get("dragTextFieldHere","\u5c06\u6587\u672c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));Ba.setPerfectHeight(160);D=new D;D.setTitle(l.get("color","\u989c\u8272"));D.setItemModelSet(V.getColorSet());D.setPerfectHeight(88);return[sa,Ba,D]};this.createPropertyPane=function(){return new Za};this.protectedWillTransformImpl=function(D,V){V.collectXAxis(D.getDimensionSet());V.collectSizeField(D.getSizeSet());
V.collectColorField(D.getColorSet())};this.protectedTransformImpl=function(D){var V=[],sa=[],Ba=[];D.popSizeField(V,1);0==V.length&&D.popAnyMeasure(V,1);D.popGradualColorField(sa,1);0==sa.length&&D.popDiscreteColorField(sa,1);D.popAnyDimension(Ba);var Fa=new N;D.setupItemModelSet(Fa.getDimensionSet(),Ba);D.setupItemModelSet(Fa.getSizeSet(),V);D.setupItemModelSet(Fa.getColorSet(),sa);return Fa};this.parseJsonChartModel=function(D){return T.createFromJson(D)};this.transformToDrillTarget=function(D,
V){return null};this.transformToJumpTarget=function(D,V,sa){return null};this.transformToExaminingTarget=function(D,V,sa){return null}}function Da(){Ua.call(this);var O=this.protectedMethod;O.setName(ea.ChartType_Sunburst);O.setIconFileName("chart_sunburst");O.setText(l.get("chartSunburst","\u65ed\u65e5\u56fe"));this.protectedCreateChartCtrlImpl=function(D,V){return new Ca};this.createFieldCards=function(D,V){var sa=new D;sa.setTitle(l.get("size","\u5927\u5c0f"));sa.setItemModelSet(V.getSizeSet());
sa.setOperatingPrompt(l.get("dragNumberFieldHere","\u5c06\u6570\u503c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));sa.setPerfectHeight(88);D=new D;D.setTitle(l.get("detail","\u7ec6\u5206"));D.setItemModelSet(V.getDimensionSet());D.setOperatingPrompt(l.get("dragTextFieldHere","\u5c06\u6587\u672c\u5b57\u6bb5\u62d6\u5230\u8fd9\u91cc\u3002"));D.setPerfectHeight(160);return[sa,D]};this.createPropertyPane=function(){return new lb};this.protectedWillTransformImpl=function(D,V){for(var sa=new la,Ba=new la,
Fa=0;Fa<D.getDimensionSet().getItemModelCount();Fa++)(0==Fa?sa:Ba).addItemModel(D.getDimensionSet().goodbyeItemModel(Fa));V.collectColorField(sa);V.collectXAxis(Ba);V.collectSizeField(D.getSizeSet())};this.protectedTransformImpl=function(D){var V=[];D.popSizeField(V,1);0==V.length&&D.popAnyMeasure(V,1);var sa=[];D.popDiscreteColorField(sa,1);D.popAnyDimension(sa);var Ba=new X;D.setupItemModelSet(Ba.getDimensionSet(),sa);D.setupItemModelSet(Ba.getSizeSet(),V);return Ba};this.parseJsonChartModel=function(D){return T.createFromJson(D)};
this.transformToDrillTarget=function(D,V){return null};this.transformToJumpTarget=function(D,V,sa){return null};this.transformToExaminingTarget=function(D,V,sa){return null}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.square&&(com.kingdee.bos.qing.square={});"undefined"==typeof com.kingdee.bos.qing.square.ui&&
(com.kingdee.bos.qing.square.ui={});var na=com.kingdee.bos.qing.square.ui,l,ba,W,ea,aa,la,x,d,b,e,c,a,q,u,v,y,C,P,U,fa,wa,ma,Ea,Xa,bb,Jb,Ya,nb,wb,va,Y,J,N,X,Q,G,T,R,S,ca,H,I,M,K,ha,Aa,Ta,db,jb,Na,xb,Ub,ec,kc,Pb,Qb,ac,bc,Bb,ya,Oa,Ra,Ca,Pa,gb=na.XSYNPropertyPane,pb=na.YSXNPropertyPane,Cb=na.XSYNPropertyPaneForStacked,Rb=na.XSYNPropertyPaneForPercentStacked,Yb=na.YSXNPropertyPaneForStacked,zb=na.YSXNPropertyPaneForPercentStacked,vb=na.LineChartPropertyPane,p=na.AreaChartPropertyPane,f=na.PieChartPropertyPane,
h=na.RingChartPropertyPane,k=na.RoseChartPropertyPane,g=na.KPIChartPropertyPane,m=na.MapChartPropertyPane,r=na.GISChartPropertyPane,w=na.RadarChartPropertyPane,n=na.ProgressBarChartPropertyPane,t=na.ProgressColumnChartPropertyPane,B=na.ProgressCirclePropertyPane,A=na.CompositeChartPropertyPane,E=na.GridChartPropertyPane,F=na.CustomListChartPropertyPane,z=na.WaterfallChartPropertyPane,L=na.FunnelChartPropertyPane,ia=na.ScatterChartPropertyPane,za=na.DialChartPropertyPane,Za=na.RectTreeChartPropertyPane,
lb=na.SunburstChartPropertyPane;(function(){var O=com.kingdee.bos.qing.framework.common;l=O.MultilanguageManager.createPackageAccessor(na);O=com.kingdee.bos.qing.core.model;ba=O.MetaField;W=O.AbstractAnalyticalField;O=com.kingdee.bos.qing.square.model;ea=O.SquareModel;aa=O.SquareField;la=O.ItemModelSet;x=O.ChartKPI;d=O.ChartPie;b=O.ChartRing;e=O.ChartRose;c=O.ChartColumn;a=O.ChartStackColumn;q=O.ChartPercentStackColumn;u=O.ChartBar;v=O.ChartStackBar;y=O.ChartPercentStackBar;C=O.ChartLine;P=O.ChartArea;
U=O.ChartPercentArea;fa=O.ChartMap;wa=O.ChartGIS;ma=O.ChartRadar;Ea=O.ChartProgressBar;Xa=O.ChartProgressColumn;bb=O.ChartProgressCircle;Jb=O.ChartComposite;Ya=O.ChartGrid;nb=O.ChartCustomList;wb=O.ChartWaterfall;va=O.ChartFunnel;Y=O.ChartScatter;J=O.ChartDial;N=O.ChartRectTree;X=O.ChartSunburst;O=com.kingdee.bos.qing.chart.model;Q=O.NormalChartModel;G=O.GridChartModel;T=O.TreeChartModel;O=com.kingdee.bos.qing.chart.square;R=O.KPICardChart;S=O.PieChart;ca=O.ColumnChart;H=O.BarChart;I=O.StackedColumnChart;
M=O.PercentStackedColumnChart;K=O.StackedBarChart;ha=O.PercentStackedBarChart;Aa=O.LineChart;Ta=O.AreaChart;db=O.PercentAreaChart;jb=O.MapChart;Na=O.GISChart;xb=O.RadarChart;Ub=O.ProgressBarChart;ec=O.ProgressColumnChart;kc=O.ProgressCircleChart;Pb=O.CompositeChart;Qb=O.GridChart;ac=O.CustomListChart;bc=O.WaterfallChart;Bb=O.FunnelChart;ya=O.ScatterChart;Oa=O.DialChart;Ra=O.RectTreeChart;Ca=O.SunburstChart;O=com.kingdee.bos.qing.chart.gis;Pa=O.GISChartGlobal})();na.ChartTypeFactory=new function(){var O,
D={},V=function(){if(!O){var sa=[ab,kb,cb,Lb,xa,eb,Ma,Ja,oa,ka,Ha,Sa,Z,Ab,Wa,Va,La,ob,qa,Ga,ra,Da,ja,fb,Fb,Qa,hb,ta];O=[];for(var Ba=0;Ba<sa.length;Ba++){var Fa=new sa[Ba];O[Ba]=Fa;D[Fa.getName()]=Fa}}};this.getInstance=function(sa){V();sa=D[sa];if(!sa)throw Error("Unknown chart type.");return sa};this.getAllInstance=function(){V();return O.slice(0)}};pa.BAR="bar";pa.COLUMN="column";pa.CIRCLE="circle"})();(function(){function Ua(l,ba){this.getChartTypeName=function(){return l};this.getLegendModel=function(){return ba}}function Mb(){var l=this,ba,W,ea,aa,la,x,d,b,e,c,a,q,u,v,y,C,P,U,fa;this.destroy=function(){l.setRollOutHandler(null);d=x=v=q=a=null};this.setAppointedSize=function(M,K){y=M;C=K};this.setTooltipsWidget=function(M){e=M};this.getTooltipsWidget=function(){e||(e=na);return e};var wa=function(){c||(c=new Lb);return c};this.setPredrawListener=function(M){a=M};this.setSelectionListener=function(M){q=
M};var ma=function(M,K,ha){q&&q(M,K,ha)};this.setRollOutHandler=function(M){var K={getRollInState:function(){return la}};K.lookupRolledInField=nb;K.getCommandManager=l.getCommandManager;K.getOperatingMenu=Y;K.decorateCrumb=bb;u&&u.bindDependence(null);(u=M)&&u.bindDependence(K)};var Ea=function(){u||l.setRollOutHandler(new eb);return u};this.setCosmeticHandler=function(M){v=M};this.setCommandManager=function(M){x=M};this.getCommandManager=function(){null==x&&(x=new ob);return x};this.setContextApi=
function(M){d=M};this.setModel=function(M,K){aa=K;la=aa.getRollInState();fa=ea=W=null;if(M){K=M.chartType;var ha=M.chart,Aa=M.legends,Ta=M.dataEmpty?!0:!1,db=M.basicInsights;ea=M.warning;M=null;if(Aa){var jb=Aa.discreteColor;if(jb){var Na=jb.colors,xb=jb.texts,Ub=jb.captions;jb=jb.others;M=new Ka;M.prepare(Na,xb,Ub,jb);M.setAdditionalText(cb.get("itemsAndSoOn","\u5176\u5b83#1\u9879"))}(Aa=Aa.continuousColor)&&(M=Ab.parseContontinuousColorLegendModel(Aa))}Aa=M;ba=Da.getInstance(K);if(ha=ba.parseJsonChartModel(ha))W=
ba.createChartCtrl(ha,aa),W.setLegendModel(Aa),W.setTooltipsListener(Jb),Ta||(W.setClickListener(X),W.isSelectionSupported()&&W.setSelectionListener(ma)),W.getAttr().setDataEmpty(Ta);l.reset(aa.getChartProperty());db&&(fa=new Sa,fa.basicFromJsonObject(db));return new Ua(K,Aa)}return null};this.createChartInfoUi=function(M,K,ha,Aa,Ta){return{createJqUi:function(){var db=new Ja;db.setTitle(cb.get("chartInfo","\u56fe\u8868\u4fe1\u606f"));db.setClosingActor(K);ha&&db.setSizeSuggester(Aa,Ta,ha);return db.createJqUi(d.getSquareModel(),
M)}}};this.createInsightUi=function(M,K,ha,Aa){return{createJqUi:function(){var Ta=new oa;Ta.setTitle(cb.get("insight","\u6d1e\u5bdf"));Ta.setClosingActor(M);K&&Ta.setSizeSuggester(ha,Aa,K);return Ta.createJqUi(l,fa)}}};this.createInsightContentMaker=function(){return fa?new Ha(l,fa):null};this.reset=function(M){W&&M.toRenderAttr(W.getAttr());P=v?v(W):null};this.drawChart=function(M,K){if(d){l.getTooltipsWidget().hide();for(var ha=!1,Aa=M.children(),Ta=0;Ta<Aa.length;Ta++){var db=Aa.eq(Ta);b&&b[0]==
db[0]?ha=!0:db.remove()}ha||(b=$("<div>"),b.appendTo(M),qa.layoutCtrlWithLRTB(b,0,0,null,0,0,null));W?(W.isErasingWhenRedraw()&&b.empty(),ba.customLoading(aa,d.createFacade,W,function(){a&&a(W);W.setMouseStateLocked(!1);W.getAttr().setReserveRollOutSpace(Ea().isRollOutEnabled());var jb=y?y:b.innerWidth(),Na=C?C:b.innerHeight();W.draw(b[0],jb,Na)})):(b.empty(),ha=$("<div>"),ha.addClass("square-exhibition-nothing"),ha.text(K),ha.appendTo(M));ea&&Xa(M,ea);Ea().paint(M);Y().abandon();Y().setJqParent(M);
Y().setBeforeSlideListener(function(){W.setMouseStateLocked(!0);l.getTooltipsWidget().hide()});Y().setAfterSlideListener(function(){W.setMouseStateLocked(!1)})}};var Xa=function(M,K){var ha=$("<div>");ha.text(K);ha.attr("title",K);ha.css("z-index","65535");ha.addClass("square-exhibition-nodata");bb(ha,Mb.STYLE_PROMPTLABEL_COLOR,null,Mb.STYLE_PROMPTLABEL_FONTSIZE_ENHANCED);ha.appendTo(M)},bb=function(M,K,ha,Aa){K=P?P[K]:null;!K&&(K=ha);K&&M.css("color",K);(ha=P?P[Aa]:null)&&M.css("fontSize",100+10*
parseInt(ha)+"%")},Jb=function(M,K,ha,Aa){Aa?ha?(ha=Ya(ha),wa().bindAssociatedChart(b,W),wa().setContent(ha),wa().show(M,K)):wa().hide():(Aa=l.getTooltipsWidget(),ha?(ha=Ya(ha),Aa.bindAssociatedChart(b,W),Aa.setContent(ha),Aa.show(M,K)):Aa.hide())},Ya=function(M){var K;if(la)for(var ha=la.getItemCount()-1;0<=ha;ha--){var Aa=nb(ha);if(Aa){var Ta=la.getItem(ha);if(!Ta.isPcdNextLevel()){var db={};db.key=Aa.getTextForExhibition();db.value=Ta.getTextByIndex(Ta.getValueCount()-1);!K&&(K=M.slice(0));K.splice(0,
0,db)}}}!K&&(K=M);return K},nb=function(M){return aa.lookupRolledInField(M)},wb=function(M){return M?(M=nb(la.getCurrentRollInFieldCount()))&&M.getMetaField().isParentChildDimension():!1},va=function(){var M=aa.getChartProperty().getLinkTargets();return M&&0<M.getRunnableItems().length},Y=function(){U||(U=new qb);return U},J=function(M,K,ha){Y().slide(K,function(Aa){switch(Aa){case 1:M.confirmExamining();Y().abandon();break;case 2:M.confirmDrilling();break;case 3:M.confirmSelecting();Y().abandon();
break;case 4:M.confirmJumping();break;default:return}ha()})},N=function(){var M=aa.getChartProperty().getLinkTargets().getRunnableItems();return[ca(M),4]},X=function(M,K,ha){M=!1;aa.isDataExaminingSupported()&&aa.getChartProperty().isDataDetailExamining()&&(M=ba.transformToExaminingTarget(ha,W,aa)?!0:!1);var Aa=!1;K=null;var Ta=!1,db=!1;aa.isRollInSupported()&&(Ta=(Aa=(K=ba.transformToDrillTarget(ha,W))?!0:!1)&&wb(K.isAsParent()),db=aa.isRollInFieldSupported()&&la.isRollInNextFieldEnabled(),Aa=Aa&&
(db||Ta));var jb=!1;Wa.isRuntimeSupported()&&aa.isLinkageSupported()&&va()&&(jb=ba.transformToJumpTarget(ha,W,aa)?!0:!1);var Na=!1;W.isSelectionSupported()&&W.isSelectable()&&(Na=!db);var xb=(M?1:0)+(Aa?1:0)+(jb?1:0)+(Na?1:0),Ub=new mb;1<xb?(xb=[],M&&xb.push([cb.get("dataExamining","\u67e5\u770b\u660e\u7ec6"),1]),Aa&&xb.push([T(Ta,db,K),2]),Na&&xb.push([ba.isSelected(ha,W)?cb.get("affectionCancel","\u53d6\u6d88\u8054\u52a8"):cb.get("affectionConfirm","\u8054\u52a8"),3]),jb&&xb.push(N()),J(Ub,xb,function(){Q(Ub,
ha)})):(M&&Ub.confirmExamining(),Aa&&Ub.confirmDrilling(),Na&&Ub.confirmSelecting(),jb&&Ub.confirmJumping(),Q(Ub,ha))},Q=function(M,K){if(M.isExaminingConfirmed())M=ba.transformToExaminingTarget(K,W,aa),G(M);else if(M.isDrillingConfirmed())M=ba.transformToDrillTarget(K,W),R(M);else if(M.isSelectingConfirmed())ba.select(K,W),fb.occur(fb.SQUARE_AFFECTION,1);else if(M.isJumpingConfirmed()){M=new ub;K=ba.transformToJumpTarget(K,W,aa);for(var ha=K.getItemCount(),Aa=0;Aa<ha;Aa++){var Ta=K.getField(Aa),
db=K.getMember(Aa);M.addItem(Ta,db)}H(M)}},G=function(M){var K=d.getMeta(),ha=d.getSquareModel(),Aa=d.getJsonAdditionalFieldNames(),Ta=d.getJsonAdditionalFilters(),db=new La;db.setContext(K,ha,Aa,Ta,d.createFacade,function(jb){jb(!1)});db.setEncodedCoordinateGetter(function(){return JSON.stringify(M.getJson())});db.showDialog()},T=function(M,K,ha){if(M&&K)return cb.get("drillDown","\u5411\u4e0b\u94bb\u53d6")+"...";if(M)return M=nb(la.getCurrentRollInFieldCount()),K=cb.get("drillDownPcd","\u94bb\u53d6\u5230#1\u201c#2\u201d\u7684\u4e0b\u4e00\u5c42\u7ea7"),
K=K.replace("#1",M.getComplexText()),K=K.replace("#2",ha.getText());if(K)return M=nb(la.getCurrentRollInFieldCount()+1),ha=cb.get("drillDownField","\u94bb\u53d6\u5230#1"),ha=ha.replace("#1",M.getComplexText());throw Error("Impossible");},R=function(M){var K=M.getValue(),ha=M.getText(),Aa=M.isAsParent(),Ta=wb(Aa);Aa=aa.isRollInFieldSupported()&&la.isRollInNextFieldEnabled();var db=nb(la.getCurrentRollInFieldCount());Ta&&Aa?(Ta=T(Ta,!1,M),M=T(!1,Aa,M),M=[[Ta,1],[M,2]],Y().slide(M,function(jb){switch(jb){case 1:S(db,
K,ha,!0);break;case 2:S(db,K,ha,!1)}})):S(db,K,ha,Ta)},S=function(M,K,ha,Aa){var Ta=new ta;Ta.setValue(M,la,K,ha,Aa);l.getCommandManager().perform(Ta);fb.occur(fb.SQUARE_DRILLDOWN,1)},ca=function(M,K){if(void 0===K){if(1<M.length)return cb.get("linkageJumper","\u8054\u67e5")+"...";K=0}return Va.makeItemDisplay(M[K])},H=function(M){var K=aa.getChartProperty().getLinkTargets().getRunnableItems();if(1<K.length){for(var ha=[],Aa=0;Aa<K.length;Aa++){var Ta=ca(K,Aa);ha.push([Ta,Aa])}Y().slide(ha,function(db){null!==
db&&I(K[db],M)})}else I(K[0],M)},I=function(M,K){Y().sayGoodbye(cb.get("linkageJumper","\u8054\u67e5")+"...",6E4);var ha=d.getJsonAdditionalFieldNames(),Aa=d.getJsonAdditionalFilters(),Ta=[M.getForeignKey()];ha&&(Ta=Ta.concat(ha));ha=d.getDependentMeta(Ta);Ta=d.getSquareModel();K=Va.makeJsonSquareClickedContext(K);Va.jumpToListUi(M,K,d.createFacade,ha,Ta,Aa,function(db,jb){Y().sayGoodbye(db,!1===jb?8E3:5E3)},function(db,jb){var Na=new hb;Na.setText(db);Na.setConfirmedListener(function(xb){jb(!1)});
Na.setSecondRelatedYGetter(function(xb){return parseInt(.1*xb.outerHeight())});Na.show(b,!0)});fb.occur(fb.SQUARE_NAVIGATETO,M.getUsableDisplayName())};this.makeBasicInsight=function(M){var K=d.getDependentMeta(),ha=d.getSquareModel(),Aa=d.getJsonAdditionalFilters();d.createFacade(function(Ta){fa.basicFromJsonObject(Ta);M()},function(Ta,db,jb){fa.basicFromJsonObject({});M(Ta,db)}).makeBasicInsight(K,ha,null,Aa)};this.makeAdvancedInsight=function(M){var K=d.getDependentMeta(),ha=d.getSquareModel(),
Aa=d.getJsonAdditionalFilters();d.createFacade(function(Ta){fa.advancedFromJsonObject(Ta);M()},function(Ta,db,jb){fa.advancedFromJsonObject({});M(Ta,db)}).makeAdvancedInsight(K,ha,null,Aa)}}function ub(){function l(W,ea){var aa=W.getMetaField().getFullName(),la=W.getPartValue();this.toJsonObject=function(){var x={};x.fieldName=aa;x.partValue=la;x.value=ea;return x}}var ba=[];this.addItem=function(W,ea){ba.push(new l(W,ea))};this.toJsonObject=function(){for(var W=[],ea=0;ea<ba.length;ea++)W.push(ba[ea].toJsonObject());
ea={};ea.items=W;return ea}}function mb(){var l=!1,ba=!1,W=!1,ea=!1;this.confirmExamining=function(){l=!0};this.isExaminingConfirmed=function(){return l};this.confirmDrilling=function(){ba=!0};this.isDrillingConfirmed=function(){return ba};this.confirmSelecting=function(){W=!0};this.isSelectingConfirmed=function(){return W};this.confirmJumping=function(){ea=!0};this.isJumpingConfirmed=function(){return ea}}function qb(){var l=this,ba,W,ea,aa,la,x,d;this.setJqParent=function(q){ba=q};this.setBeforeSlideListener=
function(q){la=q};this.setAfterSlideListener=function(q){x=q};this.slide=function(q,u){la&&la();ea&&b(ea);q=ea=c(q,u);u=ba.prop("clientWidth");var v=ba.prop("clientHeight"),y=Math.min(240,parseInt(.9*u)),C=parseInt(.9*v);qa.layoutCtrl(q,0,0,y,0);q.appendTo(e());for(var P=y=0,U=aa.children(),fa=0;fa<U.length;fa++){var wa=$(U[fa]),ma=wa.width();wa=wa.outerWidth(!0);y=Math.max(y,ma);P=Math.max(P,wa)}q.css("width",P);for(fa=0;fa<U.length;fa++){wa=$(U[fa]);wa.css("width",y);var Ea=wa.prop("offsetTop")+
wa.prop("offsetHeight")}Ea=Math.min(C,aa.prop("offsetTop")+Ea+8);C=parseInt(.5*(u-P));v=parseInt(.5*(v-Ea));qa.layoutCtrl(q,u,v,P,Ea);q.animate({left:C},250)};this.abandon=function(){W&&W.remove();ea=W=null};this.sayGoodbye=function(q,u){ea&&b(ea);clearTimeout(d);var v=ba.find(".square-exhibition-menu-bye");if(0==v.length){var y=ba.prop("clientWidth");v=$("<div>");v.addClass("square-exhibition-menu-bye");qa.layoutCtrl(v,y,"40%","100%",20);v.appendTo(e());v.animate({left:0},500)}v.text(q);d=setTimeout(l.abandon,
u?u:5E3)};var b=function(q,u){var v=0-q.prop("offsetWidth");q.animate({left:v},250,function(){q.remove();u&&u()})},e=function(){W||(W=$("<div>"),W.css("background-color","rgba(0,0,0,0.001)"),W.appendTo(ba),qa.layoutCtrlWithLRTB(W,0,0,null,0,0,null));return W},c=function(q,u){var v=$("<div>");v.css("z-index",8);v.addClass("square-exhibition-menu");var y=$("<div>");y.text("\u00d7");y.addClass("square-exhibition-menu-close");y.on("click",function(fa){b(v,l.abandon);a(null,u,null)()});y.appendTo(v);qa.layoutCtrlWithLRTB(y,
null,0,20,0,null,20);aa=$("<div>");aa.css({"overflow-x":"hidden","overflow-y":"auto"});aa.appendTo(v);qa.layoutCtrlWithLRTB(aa,0,0,null,16,8,null);for(y=0;y<q.length;y++){var C=q[y][0],P=q[y][1],U=$("<div>");U.css({position:"relative",display:"inline-block"});U.addClass("square-exhibition-menu-item");U.text(C);U.on("click",a(U,u,P));U.appendTo(aa)}return v},a=function(q,u,v){return function(y){q&&q.addClass("square-exhibition-menu-item_selected");x&&x();u(v)}}}function sb(){this.bindAssociatedChart=
function(l,ba){};this.setContent=function(l){throw Error("Override");};this.show=function(l,ba){throw Error("Override");};this.hide=function(){throw Error("Override");}}function Vb(){sb.call(this);var l=this,ba,W=null,ea=!1,aa=!1,la=function(){ba||(ba=$("<div>"),ba.addClass("square-tooltips"),ba.css("display","none"),l.protectedInitUi(ba))};this.protectedInitUi=function(b){throw Error("Implement");};this.protectedGetJqOwner=function(){throw Error("Implement");};this.protectedTransformXY=function(b,
e){return[b,e]};this.setDumb=function(b){(aa=b)&&ba&&l.hide()};this.show=function(b,e){la();if(!aa){var c=l.protectedTransformXY(b,e);b=c[0];e=c[1];c=l.protectedGetJqOwner();var a=c.prop("clientWidth"),q=c.prop("clientHeight");ba.css("max-width",.8*a);ba.css("max-height",.8*q);var u=ba.outerWidth(),v=ba.outerHeight();c=b+15;var y=e+10,C=-1,P=-1,U=-1,fa=-1;y+v>q&&(fa=y+v-q,P=q-v,e=e-10-v,0>e?(e=-e,e<fa&&(fa=e,P=0)):(fa=-1,P=e));c+u>a&&(U=c+u-a,C=a-u,b=b-15-u,0>b?(b=-b,b<U&&(U=b,C=0)):(U=-1,C=b));0<
U&&0<fa?.5*U>fa?(c=C,y=0==P?-fa:P+fa):(c=0==C?-U:C+U,y=P):(c=0>C?c:C,y=0>P?y:P);"block"==ba.css("display")?(W=[c,y],d()):(ba.css("left",c),ba.css("top",y),ba.css("display","block"))}};this.hide=function(){W=null;ba&&ba.css("display","none")};this.setContent=function(b){la();ba.empty();var e=$("<table>");e.css("margin",6);for(var c=0;c<b.length;c++){var a=b[c],q=a.key,u=a.value,v=a.ratio,y=a.color,C=a.lineIconStyle;a=$("<tr>");var P=$("<td>");P.addClass("square-tooltips-title");if(y){if(C){C=document.createElement("canvas");
C.width=8;C.height=8;var U=$(C);U.addClass("square-tooltips-title-color");U.appendTo(P);C=C.getContext("2d");C.fillStyle=y;C.strokeStyle=y;C.lineWidth=2;C.beginPath();C.moveTo(0,4);C.lineTo(8,4);C.stroke();C.arc(4,4,2.2,0,2*Math.PI);C.fill()}else C=$("<span>"),C.addClass("square-tooltips-title-color"),C.css("background-color",y),C.appendTo(P);C=$("<span>");C.addClass("square-tooltips-title-text");C.text(q);C.appendTo(P)}else P.text(q+(q?":":""));a.append(P);q=$("<td>");q.addClass("square-tooltips-value");
y&&q.css("text-align","right");q.text(u);a.append(q);v?(u=$("<td>"),u.addClass("square-tooltips-value"),u.css("padding-left","4px"),u.css("text-align","right"),u.text(v),a.append(u)):q.attr("colspan",2);e.append(a)}e.appendTo(ba)};var x=function(){var b=null;W&&(b=W,W=null);return b},d=function(){if(!ea){var b=x();b&&(ea=!0,ba.stop(),ba.animate({left:b[0],top:b[1]},150,function(){ea=!1;d()}))}}}function Lb(){Vb.call(this);var l,ba;this.bindAssociatedChart=function(W,ea){ba=W;l&&!qa.isInDomTree(l[0])&&
l.appendTo(ba)};this.protectedInitUi=function(W){l=W;l.appendTo(ba)};this.protectedGetJqOwner=function(){return ba};this.protectedTransformXY=function(W,ea){var aa=qa.upwardCoordinate(ba[0],[0,0],document.body);return[W-aa[0],ea-aa[1]]}}function xa(){var l;this.paint=function(ea){};this.bindDependence=function(ea){l=ea};var ba=function(){return l.getRollInState()},W=function(ea){return l.lookupRolledInField(ea)};this.isRollOutEnabled=function(){var ea=ba();return ea?ea.isRollOutEnabled():!1};this.protectedMethod=
{performRollOutAction:function(ea,aa){var la=ba();"undefined"==typeof ea&&(ea=la.getItemCount()-1);"undefined"==typeof aa&&(aa=la.getItem(la.getItemCount()-1).getValueCount()-1);var x=W(ea),d=new ja;d.setValue(x,la,ea,aa);l.getCommandManager().perform(d)},getRollInState:ba,lookupRolledInField:W,getOperatingMenu:function(){return l.getOperatingMenu()},decorateCrumb:function(ea,aa,la,x){l.decorateCrumb(ea,aa,la,x)}}}function eb(){xa.call(this);var l=this,ba=this.protectedMethod,W,ea,aa,la=!1,x,d;this.paint=
function(v){if(l.isRollOutEnabled()){var y=Ga.createCanvas();W=Ga.createContext2d(y,32,32);y=$(y);qa.layoutCtrl(y,0,0,32,32);y.appendTo(v);ea=$("<div>");ea.css({"line-height":"18px",overflow:"hidden"});ba.decorateCrumb(ea,Mb.STYLE_CRUMB_COLOR,"#999",Mb.STYLE_CRUMB_FONTSIZE_ENHANCED);x=ea.css("color");d=ra.isTheSame(x,"#999")?null:x;qa.layoutCtrlWithLRTB(ea,28,0,null,0,null,18);ea.appendTo(v);aa=[];v="";for(var C=ba.getRollInState(),P=0;P<C.getItemCount();P++){0<P&&(v+=" > ");for(var U=C.getItem(P),
fa=0;fa<U.getValueCount();fa++){0<fa&&(v+=" > ");var wa=U.getTextByIndex(fa);if(!wa){wa=(wa=ba.lookupRolledInField(P+1))?wa.getComplexText():"";var ma=0<fa?U.getTextByIndex(fa-1):"";wa+=ma}v+=wa;aa.push([wa,P,fa])}}for(P=aa.length-1;0<=P;P--)C=aa[P],U=0==P?cb.get("drillUpToTop","\u8fd4\u56de\u5230\u9876\u5c42"):aa[P-1][0],C[0]=U;P=$("<span>");P.text(v);P.css({"white-space":"nowrap"});P.appendTo(ea);v=P.parent().prop("clientWidth");wa=P.prop("offsetWidth");if(wa>v){C=P.text();U=C.length;fa=Math.ceil(C.length*
v/wa);do fa--,wa="..."+C.substring(U-fa),P.text(wa),wa=P.prop("offsetWidth");while(wa>v&&0<=fa)}b(y);b(P);q()}};var b=function(v){v.css({cursor:"pointer"});v.attr("title",cb.get("drillUp","\u8fd4\u56de"));v.on("click",e);v.on("mouseenter",c);v.on("mouseleave",a)},e=function(v){u(W,"rgba(120,180,240,0.5)","#f09040");ea.css("color","#f09040");if(1==aa.length)setTimeout(function(){ba.performRollOutAction()},175);else{la=!0;setTimeout(function(){la=!1;q()},225);v=[];for(var y=0;y<aa.length;y++)v.push([aa[y][0],
y]);ba.getOperatingMenu().slide(v,function(C){"number"==typeof C&&(C=aa[C],ba.performRollOutAction(C[1],C[2]));ba.getOperatingMenu().abandon()})}},c=function(v){u(W,"rgba(120,180,240,0.25)","#00a0d1");ea.css("color","#00a0d1")},a=function(v){!la&&q()},q=function(){u(W,"rgba(120,180,240,0.15)",d||"rgba(64,128,240,0.6)");ea.css("color",x)},u=function(v,y,C){v.clearRect(0,0,v.canvas.width,v.canvas.height);v.fillStyle=y;v.beginPath();v.moveTo(0,0);v.arc(0,0,32,0,.5*Math.PI);v.closePath();v.fill();v.fillStyle=
C;v.beginPath();v.moveTo(13,4);v.lineTo(3,13);v.lineTo(9,13);v.lineTo(9,20);v.lineTo(17,20);v.lineTo(17,13);v.lineTo(23,13);v.closePath();v.fill()}}function Ma(){var l,ba,W,ea;this.setTitle=function(la){l=la};this.setSizeSuggester=function(la,x,d){ba=[la,x,d]};this.setClosingActor=function(la){W=la};var aa=function(){var la=$("<div>");la.css({"border-left":"1px solid #808080","transform-origin":"left top",transform:"rotate(-45deg)"});qa.layoutCtrlWithLRTB(la,0,null,"141%",0,null,"141%");var x=$("<div>");
x.css({"border-right":"1px solid #808080","transform-origin":"right top",transform:"rotate(45deg)"});qa.layoutCtrlWithLRTB(x,null,0,"141%",0,null,"141%");var d=$("<div>");d.css({overflow:"hidden"});d.append(la);d.append(x);qa.layoutCtrlCenterAlign(d,12);qa.layoutCtrlMiddleAlign(d,12);la=$("<div>");la.css({cursor:"pointer"});la.append(d);return la};this.protectedMethod={createSimilarDialog:function(la){ea=function(){la.appendTo(b);qa.layoutCtrlWithLRTB(la,10,4,null,32,4,null);return[14,36]};var x=
$("<div>");x.css({"font-size":"16px","font-weight":"bold","line-height":"24px"});x.text(l);var d=aa();d.on("click",function(e){W()});var b=$("<div>");b.append(x);b.append(d);qa.layoutCtrlWithLRTB(x,10,10,null,4,null,28);qa.layoutCtrlWithLRTB(d,null,6,16,6,null,16);ea();return b},appendAction:function(la,x,d,b){var e=6+30*(la.children(".q-sys-action").length+1),c=$("<div>");Z.background(c,x);qa.layoutCtrlCenterAlign(c,12);qa.layoutCtrlMiddleAlign(c,12);x=$("<div>");x.addClass("q-sys-action");x.css({cursor:"pointer"});
x.attr("title",d);x.on("click",function(a){b($(a.target))});qa.layoutCtrlWithLRTB(x,null,e,16,6,null,16);x.append(c);la.append(x)},resize:function(la){if(ba){var x=ba[0],d=ba[1],b=ba[2],e=la.prop("scrollTop");la.appendTo($(document.body));la.css({"max-width":x+"px","max-height":d+"px"});qa.layoutCtrlWithLRTB(la,-1E4,"","auto",-1E4,"","auto");x=la.prop("offsetWidth");d=la.prop("offsetHeight");var c=ea();e&&la.prop("scrollTop",e);b(x+c[0],d+c[1])}},createTitle:function(la,x,d){var b=$("<div>");b.text(x);
b.css({position:"relative","margin-top":"4px","font-weight":"bold","line-height":"24px"});d&&b.css(d);la.append(b);return b},createLine:function(la,x){var d=$("<div>");d.css({position:"relative","margin-bottom":"4px","padding-left":"12px","line-height":"24px"});x&&d.css(x);la.append(d);return d},createListLine:function(la,x){var d=$("<li>");d.css({position:"relative","padding-left":"4px","line-height":"24px"});x&&d.css(x);la.append(d);return d},createSpan:function(la,x,d){var b=$("<span>");b.text(x);
d&&b.css(d);la.append(b);return b}}}function Ja(){function l(){var W,ea;this.setTitle=function(aa){W=aa};this.getTitle=function(){return W};this.setItemModelSet=function(aa){ea=aa};this.getItemModelSet=function(){return ea};this.setOperatingPrompt=function(){};this.setPerfectHeight=function(){}}Ma.call(this);var ba=this.protectedMethod;this.createJqUi=function(W,ea){var aa=$("<div>");aa.css({overflow:"auto",color:"#333","font-size":"14px"});for(var la=Da.getInstance(W.getChartTypeName()).createFieldCards(l,
W.getChart()),x=0;x<la.length;x++){var d=la[x],b=d.getTitle();d=d.getItemModelSet();var e=0==d.getItemModelCount();if(!e||0!=d.getItemCountMin()){ba.createTitle(aa,b);var c=ba.createLine(aa);e?ba.createSpan(c,""):d.traversalItems(function(a){a=a.getSquareField();ba.createSpan(c,a.getTextTooltips(),{"margin-right":"8px"})})}}W=W.getFilterSet();0!=W.getItemModelCount()&&(ba.createTitle(aa,cb.get("filterCardTitle","\u7b5b\u9009\u5668")),W.traversalItems(function(a){var q=a.getSquareField(),u=a.getUsableFilter(),
v=ba.createLine(aa);a.isOutsideAllowed()&&(a=ba.createSpan(v,""),qa.layoutCtrl(a,0,6,12,12),Z.background(a,"icon_extra_filter"));ba.createSpan(v,q.getTextTooltips());ba.createSpan(v,ab.getFilterDisplayText(u,q.getPartValue()),{"margin-left":"16px"})}));ea&&(c=ba.createLine(aa,{padding:"10px",cursor:"pointer",color:"#39f"}),c.text(cb.get("chartInfoMoreFilters","\u66f4\u591a\u5916\u90e8\u7b5b\u9009\u5668")+"..."),c.on("click",function(a){$(a.currentTarget).remove();a=$(document.createDocumentFragment());
ba.createTitle(a,cb.get("chartInfoAffectionFilters","\u8054\u52a8\u7b5b\u9009\u5668"));for(var q=0;q<ea.length;q++){var u=ea[q],v=ba.createLine(a);ba.createSpan(v,kb.getCaption(u));ba.createSpan(v,kb.getValue(u),{"margin-left":"16px"})}aa.append(a);ba.resize(aa)}));W=ba.createSimilarDialog(aa);ba.resize(aa);return W}}function oa(){Ma.call(this);ka.call(this);var l=this.protectedMethod,ba,W,ea,aa=!0;this.createJqUi=function(e,c){var a=$("<div>");a.css({overflow:"auto",color:"#333","font-size":"14px"});
c&&(ba=function(){e.makeAdvancedInsight(function(u,v){"number"==typeof u?(u=u+"\n"+v,a.empty(),v=l.createLine(a),l.createSpan(v,u)):b(a,c)})},W=function(){e.makeBasicInsight(function(u,v){"number"==typeof u?(u=u+"\n"+v,a.empty(),v=l.createLine(a),l.createSpan(v,u)):(d(a,c),l.resize(a))})},d(a,c));var q=l.createSimilarDialog(a);l.resize(a);l.appendAction(q,"icon_extra_level",cb.get("insightLevel","\u7ea7\u522b"),function(u){la(u,q,a,c)});return q};var la=function(e,c,a,q){if(ea&&ea.isShowing())ea.hide(),
ea=null;else{var u=new Fb;u.addItemModel(pa.createRadio(cb.get("insightLevelBasic","\u7b80\u8981"),"level",aa,function(v){aa=!0;d(a,q);l.resize(a)}));u.addItemModel(pa.createRadio(cb.get("insightLevelAdvanced","\u8be6\u7ec6"),"level",!aa,function(v){aa=!1;q.getBasicState()||(q.isAdvancedLoaded()?b(a,q):ba())}));ea=new pa;ea.setModel(u);ea.setHideListener(function(){ea=null});u=[0,18];u=qa.upwardCoordinate(e[0],u,c[0]);ea.show(c,u[0],u[1],e,!0)}},x=function(e,c){e=l.createLine(e,{"margin-top":"10px"});
l.createSpan(e,c)},d=function(e,c){var a=$(document.createDocumentFragment());c.getBasicState()==Sa.STATE_DATA_EMPTY?x(a,cb.get("insightNoData","\u6ca1\u6709\u6570\u636e\u3002")):c.getBasicState()==Sa.STATE_MISSING_MEASURE?x(a,cb.get("insightNoMeasure","\u6ca1\u6709\u5ea6\u91cf\u5b57\u6bb5\u3002")):c.getBasicState()==Sa.STATE_BLOATED_DIMENSION?(x(a,cb.get("waiting","\u8bf7\u7a0d\u5019")+"..."),W()):(c=c.getBasicGroups(),l.createInsightsUi(a,c));e.empty();e.append(a)},b=function(e,c){var a=$(document.createDocumentFragment());
c=c.getUsableAdvancedGroups();l.createInsightsUi(a,c);e.empty();e.append(a);l.resize(e)};this.protectedCreateJqInsightSubtitle=function(e,c){return l.createTitle(e,c)};this.protectedCreateJqInsightLine=function(e){return l.createListLine(e)}}function ka(){var l=this;this.protectedCreateJqInsightSubtitle=function(ea,aa){throw Error("Implement");};this.protectedCreateJqInsightLine=function(ea){throw Error("Implement");};var ba=function(ea,aa){var la=$("<span>");la.text(aa);ea.append(la);return la},
W=function(ea,aa,la){if(0>la)return[ea];for(var x=aa.getVariate(la),d="${"+x.getName()+"}$",b=d.length,e=[],c=ea;c;){var a=c.indexOf(d);0>a?(e.push(c),c=null):(ea=c.substring(0,a),c=c.substring(a+b),e.push(ea),e.push(x),c=0<c.length?c:null)}x=[];for(d=0;d<e.length;d++)b=e[d],"string"==typeof b?0<b.length&&(b=W(b,aa,la-1),x=x.concat(b)):x.push(b);return x};!this.protectedMethod&&(this.protectedMethod={});this.protectedMethod.createInsightsUi=function(ea,aa){for(var la=0;la<aa.length;la++){var x=aa[la];
l.protectedCreateJqInsightSubtitle(ea,x.getTitle());for(var d=0;d<x.getSentenceCount();d++){for(var b=l.protectedCreateJqInsightLine(ea),e=x.getSentence(d),c=W(e.getText(),e,e.getVariateCount()-1),a=0;a<c.length;a++){var q=c[a];if("string"==typeof q)ba(b,q);else{var u=q,v=(q=u.getTips())?!0:!1;u=ba(b,u.getValue());v&&u.css("text-decoration","underline");v&&u.attr("title",q)}}e.setReadableText(b.text())}}}}function Ha(l,ba){ka.call(this);var W=this,ea=this.protectedMethod;this.hookJqInsightSubtitleCreator=
function(x){W.protectedCreateJqInsightSubtitle=function(d,b){var e=x();e.text(b);d.append(e);return e}};this.hookJqInsightLineCreator=function(x){W.protectedCreateJqInsightLine=function(d){var b=x();d.append(b);return b}};this.requestJqContent=function(x){var d=$("<div>");d.text("");aa(d,ba,function(b){d.append(b);x(d)})};var aa=function(x,d,b){var e=$(document.createDocumentFragment());if(d.getBasicState()!=Sa.STATE_DATA_EMPTY&&d.getBasicState()!=Sa.STATE_MISSING_MEASURE){if(d.getBasicState()==Sa.STATE_BLOATED_DIMENSION){l.makeBasicInsight(function(a,
q){"number"==typeof a?(la(x,a+" "+q),b(e)):aa(x,d,b)});return}if(d.getBasicState()==Sa.STATE_NO_ADVANCED){var c=d.getBasicGroups();ea.createInsightsUi(e,c)}else if(!d.getBasicState()){l.makeAdvancedInsight(function(a,q){"number"==typeof a?la(x,a+" "+q):(a=d.getUsableAdvancedGroups(),ea.createInsightsUi(e,a));b(e)});return}}b(e)},la=function(x,d){var b=$("<span>");b.text(d);x.append(b);return b}}function Sa(){function l(){var e,c;this.fromJsonObject=function(a){c=[];e=a.title;if(a=a.sentences)for(var q=
0;q<a.length;q++){var u=a[q],v=new ba;v.fromJsonObject(u);c.push(v)}};this.getTitle=function(){return e};this.getSentenceCount=function(){return c?c.length:0};this.getSentence=function(a){return c[a]};this.mergeFrom=function(a){e=a.getTitle();!c&&(c=[]);for(var q=0;q<a.getSentenceCount();q++)c.push(a.getSentence(q))}}function ba(){var e,c,a;this.fromJsonObject=function(q){e=q.text;c=[];if(q=q.variates)for(var u=0;u<q.length;u++){var v=q[u],y=new W;y.fromJsonObject(v);c.push(y)}};this.getText=function(){return e};
this.getVariateCount=function(){return c.length};this.getVariate=function(q){return c[q]};this.setReadableText=function(q){a=q};this.getReadableText=function(){return a}}function W(){var e,c,a;this.fromJsonObject=function(q){e=q.name;c=q.value;a=q.tips};this.getName=function(){return e};this.getValue=function(){return c};this.getTips=function(){return a}}var ea=this,aa,la,x,d;this.basicFromJsonObject=function(e){la=[];aa=e.state;b(e,la)};this.advancedFromJsonObject=function(e){d=[];x=e.state;b(e,
d)};this.getBasicState=function(){return aa};this.getBasicGroups=function(){return la};this.getAdvancedState=function(){return x};this.isAdvancedLoaded=function(){return d?!0:!1};this.getUsableAdvancedGroups=function(){for(var e={},c=0;c<d.length;c++){var a=d[c];e[a.getTitle()]=a}var q=[];for(c=0;c<la.length;c++){a=la[c];var u=new l;u.mergeFrom(a);q.push(u);(a=e[a.getTitle()])&&u.mergeFrom(a)}return q};this.getReadableTextGroups=function(){for(var e=ea.isAdvancedLoaded()?ea.getUsableAdvancedGroups():
la,c=[],a=0;a<e.length;a++){for(var q=[],u=e[a],v=0;v<u.getSentenceCount();v++){var y=u.getSentence(v);q.push(y.getReadableText())}c.push(q)}return c};var b=function(e,c){if(e=e.groups)for(var a=0;a<e.length;a++){var q=e[a],u=new l;u.fromJsonObject(q);c.push(u)}}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.square&&
(com.kingdee.bos.qing.square={});"undefined"==typeof com.kingdee.bos.qing.square.ui&&(com.kingdee.bos.qing.square.ui={});var da=com.kingdee.bos.qing.square.ui;da.Exhibition=function(){var l=new Mb,ba,W,ea,aa;var la=$("<div>");la.addClass("square-exhibition-card");var x=$("<div>");x.addClass("square-exhibition-card-titlebar");x.appendTo(la);var d=$("<div>");d.addClass("square-exhibition-card-titlebar-text");d.appendTo(x);var b=$("<div>");b.css("overflow","hidden");b.appendTo(la);this.destroy=function(){l.destroy()};
this.setCommandManagerGetter=function(a){ba=a};this.setContextApi=function(a){l.setContextApi(a)};this.getJqUi=function(){return la};this.resize=function(){W&&(W.isFullArea()||c(),clearTimeout(ea),ea=setTimeout(e,250))};this.showSuspendedRunningMask=function(){if(0==la.find(".sa-exhibition-suspend-mask").length){var a=$("<div>");a.addClass("sa-exhibition-suspend-mask");a.appendTo(la)}};this.setPreviewSetup=function(a){W=a;var q=a.getPaddingLeft(),u=a.getPaddingRight(),v=a.getPaddingTop(),y=a.getPaddingBottom();
qa.layoutCtrlWithLRTB(b,q,u,null,v,y,null);a.isFullArea()?(x.css("display","none"),la.addClass("square-exhibition-card_fullarea"),la.removeClass("square-exhibition-card_notfull")):(x.css("display","block"),la.addClass("square-exhibition-card_notfull"),la.removeClass("square-exhibition-card_fullarea"));c();e()};this.setTitle=function(a,q){d.text(a);x.find(".square-exhibition-card-titlebar-tips").remove();q&&(a=new Qa,a.setIconType(Qa.ICON_TYPE_QUESTION),a.setTipsText(q),a.setContainer(la),q=a.getJqUi(),
q.addClass("square-exhibition-card-titlebar-tips"),q.appendTo(x))};this.setModel=function(a,q,u){if(ba){var v=ba();l.setCommandManager(v)}aa=u;l.setModel(a,q);e()};this.repaint=function(a){a&&l.reset(a);e()};var e=function(){l.drawChart(b,aa)},c=function(){var a="",q="",u="",v="";W.isFullArea()||(a=la.parent().innerWidth(),q=la.parent().innerHeight(),u=W.getWidth(),v=W.getHeight(),a=(a>u?a-u>>1:0)+"px",q=(q>v?q-v>>1:0)+"px",u+="px",v+="px");la.css({left:a,top:q,width:u,height:v})}};da.ExhibitionContent=
Mb;da.AbstractTooltipsWidget=sb;da.AbstractRollOutHandler=xa;var qa,Ga,ra,cb,Qa,hb,Fb,pa,Ab,Z,Wa,fb,Va,Ka,ab,kb,La,ob,ta,ja,Da=da.ChartTypeFactory;(function(){var l=com.kingdee.bos.qing.common;qa=l.DomUtil;Ga=l.CanvasUtil;ra=l.ColorUtil;l=com.kingdee.bos.qing.framework.common;cb=l.MultilanguageManager.createPackageAccessor(da);l=com.kingdee.bos.qing.ui.component;Qa=l.HelpIcon;hb=l.SimpleConfirmer;Fb=l.MenuModel;pa=l.Menu;l=com.kingdee.bos.qing.core;Ab=l.CommonJsonParser;Z=l.Icons;Wa=l.LinkageRegister;
fb=l.UserOperationReporter;l=com.kingdee.bos.qing.core.commonui;Va=l.LinkageHelper;l=com.kingdee.bos.qing.chart.model;Ka=l.DiscreteColorLegendModel;l=com.kingdee.bos.qing.core.shared;ab=l.FilterInterpreter;kb=l.AdditionalFilterInfoParser;La=l.DetailDataPopupDialog;l=com.kingdee.bos.qing.core.controller;ob=l.CommandManager;l=com.kingdee.bos.qing.square.controller;ta=l.ActionRollIn;ja=l.ActionRollOut})();Mb.STYLE_PROMPTLABEL_COLOR="promptLabelColor";Mb.STYLE_PROMPTLABEL_FONTSIZE_ENHANCED="promptLabelFontSizeEnhanced";
Mb.STYLE_CRUMB_COLOR="crumbColor";Mb.STYLE_CRUMB_FONTSIZE_ENHANCED="crumbFontSizeEnhanced";var na=new function(){Vb.call(this);var l=this,ba,W,ea;this.bindAssociatedChart=function(d,b){W=d;ea=b};this.protectedInitUi=function(d){d.on("mousemove",aa);d.on("mouseleave",la);ba=$(document.body);ba.append(d)};this.protectedGetJqOwner=function(){return ba};var aa=function(d){(d=x(d))&&l.show(d[0],d[1])},la=function(d){x(d)},x=function(d){if(!W.is(":visible"))return null;var b=l.protectedGetJqOwner()[0],
e=qa.getCurrentTargetPosition(d);var c=b.clientLeft;var a=b.clientTop;for(d=d.target;d!=b;){if(d==document.body)throw Error("Not immediate family.");var q=d.parentNode;c+=q.clientLeft+d.offsetLeft;a+=q.clientTop+d.offsetTop;d=q;for(q=d.nodeName.toLowerCase();"td"==q||"tr"==q||"tbody"==q;)d=d.parentNode,q=d.nodeName.toLowerCase()}c=[c+e[0],a+e[1]];e=c[0];c=c[1];b=qa.upwardCoordinate(W[0],[0,0],b);a=c-b[1];return e-b[0]>W.prop("clientWidth")||a>W.prop("clientHeight")?(l.hide(),ea.clearMouseState(),
null):[e,c]}};Sa.STATE_DATA_EMPTY=1;Sa.STATE_MISSING_MEASURE=2;Sa.STATE_BLOATED_DIMENSION=3;Sa.STATE_NO_ADVANCED=4})();(function(){function Ua(){d.call(this);var ma=this,Ea=this.protectedMethod,Xa,bb,Jb,Ya,nb,wb,va,Y,J,N,X=null,Q,G,T,R,S=!1,ca,H,I,M=!1,K=!1,ha=!1;this.setGlobalDependence=function(A){Xa=A};this.metaChanged=function(A){Y&&A&&(Y.setMeta(A),A.addChangedListener(function(E){bb.isAnyCalculatedFieldUsed()&&bb.checkAllFields()}))};this.isAnyCalculatedFieldUsed=function(A){return bb.isAnyCalculatedFieldUsed(A)};this.isModelPageMatched=function(A){return A.getModel()instanceof kb};this.setModelPage=function(A){Qb();
if(A){var E=A.getPreferences();Jb&&Jb.removePreviewSetupChangedListener(Ra);Jb=E;Jb.addPreviewSetupChangedListener(Ra);db(A.getModel())}else jb()};this.getModelPage=function(){var A=new pa;A.setModel(bb);A.setPreferences(Jb);return A};this.getJqUi=function(){if(!Ya){Ub();xb();ca=$("<div>");var A=N.getJqUi();Ma.layoutCtrlWithLRTB(A,0,0,null,0,0,null);var E=$("<div>");E.addClass("square-filtercardwrap");E.append(A);Ma.layoutCtrlWithLRTB(E,eb.DESK_PADDING_LEFT,0,null,0,eb.DESK_PADDING_BOTTOM,null);A=
$("<div>");A.addClass("square-exhibitionwrap");A.append(R.getJqUi());nb=new oa;nb.setHorizontalSplit(!1);nb.setSplitLineWide(eb.DESK_SPLIT_GAP_V);nb.setResizeMode(oa.RESIZE_MODE_SECOND_FIXED);nb.setFirstSize(-1,200,-1);nb.setSecondSize(160,60,400);nb.setSecondChild(oa.createChildWrapper(E));va=new oa;va.setHorizontalSplit(!0);va.setSplitLineWide(eb.DESK_SPLIT_GAP_H);va.setResizeMode(oa.RESIZE_MODE_SECOND_FIXED);va.setFirstSize(-1,120,-1);va.setSecondSize(234,20,600);va.setFirstChild(oa.createChildWrapper(A,
R.resize));va.setSecondChild(oa.createChildWrapper(ca));wb=new oa;wb.setHorizontalSplit(!0);wb.setSplitLineWide(eb.DESK_SPLIT_GAP_H);wb.setResizeMode(oa.RESIZE_MODE_FIRST_FIXED);wb.setFirstSize(210,120,400);wb.setSecondSize(-1,120,-1);wb.setFirstChild(oa.createChildWrapper(Q,Bb));wb.setSecondChild(va);Ya=new oa;Ya.setHorizontalSplit(!0);Ya.setSplitLineWide(eb.DESK_SPLIT_GAP_H);Ya.setResizeMode(oa.RESIZE_MODE_FIRST_FIXED);Ya.setFirstSize(190,100,400);Ya.setSecondSize(-1,600,-1);Ya.setFirstChild(nb);
Ya.setSecondChild(wb);Ya.getJqUi().addClass("sa-desk");Ma.makeSelectable(Ya.getJqUi(),!1);Na();J=new c;J.bindParentUi(Xa.getTopJqUi());bc(Y,J);E=new c;E.bindParentUi(Xa.getTopJqUi());bc(Y,E);N.setDragDropHandler(E);jb()}return Ya.getJqUi()};var Aa=this.born;this.born=function(){Qb();Aa()};this.protectedCreateToolbarIndividualPart=function(A){var E=$("<div>");A.addSeperatorForView(E);A.addButtonForView(E,h,"btn_clear",Ja.get("clear","\u6e05\u9664"));var F=A.addButtonForView(E,k,null,"");A.addMenuButtonForView(E,
f,"btn_preview",Ja.get("previewSetup","\u9884\u89c8\u5c3a\u5bf8"),null);g(F);return E};this.protectedResizeImpl=function(){Ya.resize()};this.protectedShowExecutingAccident=function(A,E){ya();Yb(A,E);K=!0};this.protectedAppendNecessaryDimensions=function(){var A=new x;A.setValue(Xa.getMeta(),bb);Xa.getCommandManager().perform(A)};this.suspend=function(){K=!0;Yb();Ta()};this.reExecute=function(){pb()};this.isAdditionalFilterActive=function(){return X&&X.isSwitchOn()};this.destroy=function(){R.destroy()};
var Ta=function(){Ea.fireExhibitionContentChangedEvent(!M&&S)},db=function(A){ya();Xa.getCommandManager().reset();bb&&bb.removeModelChangedListener(Ca);bb=A;bb.addModelChangedListener(Ca);N.setItemModelSet(bb.getFilterSet());N.repaint();Oa();R.setPreviewSetup(Jb.getPreviewSetup());ac();pb()},jb=function(){var A=new ab,E;2<=wa.length?E=wa[1]:1==wa.length&&(E=wa[0]);E&&A.setPreviewSetup(E.getPreviewSetup());Jb&&Jb.removePreviewSetupChangedListener(Ra);Jb=A;Jb.addPreviewSetupChangedListener(Ra);db(new kb)},
Na=function(){Y=new b;Y.setGlobalDependence(Xa);ma.metaChanged(Xa.getMeta());var A=Y.getJqUi();Ma.layoutCtrlWithLRTB(A,eb.DESK_PADDING_LEFT,0,null,eb.DESK_PADDING_TOP,0,null);var E=$("<div>");E.append(A);nb.setFirstChild(oa.createChildWrapper(E));Y.addClearSelectedAsker(function(F){Ma.isDescendent(F.getTarget(),G.getJqUi()[0])&&F.retain()})},xb=function(){var A=B();G=new ub;G.setDependence(A);G.setMetaPaneVisitor(m());T=new e;Q=$("<div>");Q.addClass("square-designarea");Q.append(G.getJqUi());Q.append(T.getJqUi());
Ma.layoutCtrlWithLRTB(Q,0,0,null,eb.DESK_PADDING_TOP,eb.DESK_PADDING_BOTTOM);N=new sb;N.setTitle(Ja.get("filterCardTitle","\u7b5b\u9009\u5668"));N.setDependence(A);if(A=Xa.getAdditionalFiltersInfo())X=new P,X.setAdditionalFiltersInfo(A),X.createButtonsOnFilterCard(N,Xa.getTopJqUi()),X.setSwitchListener(function(E){pb()})},Ub=function(){R=new fa;R.setCommandManagerGetter(Xa.getCommandManager);R.setContextApi({createFacade:Xa.createFacade,getMeta:function(){return Xa.getMeta()},getDependentMeta:ec,
getSquareModel:function(){return bb},getJsonAdditionalFieldNames:kc,getJsonAdditionalFilters:Pb});R.getJqUi().css("display","none")},ec=function(A){var E=kc(),F=[];A&&(F=F.concat(A));E&&(F=F.concat(E));return bb.createDependentMeta(Xa.getMeta(),F)},kc=function(){return Xa.getJsonAdditionalFieldNames()},Pb=function(){return Xa.getJsonAdditionalFilters()},Qb=function(){R.getJqUi().css("display","")},ac=function(){var A=bb.getChart().getChartProperty().getTitle();A=A?A:Ja.get("defaultExhibitionTitle",
"\u5361\u7247\u9884\u89c8");var E=bb.getChart().getChartProperty().getDescription();R.setTitle(A,E)},bc=function(A,E){E.bindDragUi(A.getJqUi(),function(F){F=A.getDraggingMetaField(F);if(!F)return null;A.lockScroll(!0);var z=new Lb;z.setMetaField(F);return z},function(F,z){F&&A.clearSelecteds();A.lockScroll(!1)},null,function(F){})},Bb=function(A){A=Q.innerWidth();A=G.relayout(A);var E=G.getJqUi(),F=E.outerWidth()-E.innerWidth();Ma.layoutCtrlWithLRTB(E,0,0,null,0,null,A-F);A=A+eb.CARD_GAP+1;Ma.layoutCtrlWithLRTB(T.getJqUi(),
0,0,null,A,0,null);T.relayout()},ya=function(){I&&I.isVisible()&&I.hideDialog();$(document.body).find(".sa-ctrl-common-modallayer").remove()},Oa=function(){var A=bb.getChartTypeName();A=U.getInstance(A);G.updateDisplay(A);var E=A.createFieldCards(qb,bb.getChart()),F=B();T.clear();for(var z=0;z<E.length;z++){var L=E[z];T.addChild(L);L.setDependence(F);L.setDragDropHandler(J);L.setItemPressListener(n)}T.relayout();A=A.createPropertyPane();H&&(H.setSquareModel(null),H.setGlobalDependence(null));H=A;
H.setSquareModel(bb);H.setGlobalDependence(Xa);A=H.getJqUi();ca.empty();ca.append(A);Ma.layoutCtrlWithLRTB(A,0,eb.DESK_PADDING_RIGHT,null,eb.DESK_PADDING_TOP,eb.DESK_PADDING_BOTTOM)},Ra=function(A){R.setPreviewSetup(Jb.getPreviewSetup())},Ca=function(A){if(!ha){var E=bb.getChart().getRollSet();A.isContainItemModelSet(E)&&(A.isContainKey(ta.KEY_ADD)||A.isContainKey(ta.KEY_REMOVE)||A.isContainKey(ta.KEY_MOVE)||A.isContainKey(Z.KEY_ROLE))&&bb.getChart().getRollInState().updateItemCountLimited(E);if(A.isContainChartPropertyKey()&&
(A.isContainKeys([Da.KEY_TITLE,Da.KEY_DESCRIPTION])&&ac(),A.isRepaintNeeded()&&!K&&R.repaint(bb.getChart().getChartProperty()),!A.isExecuteNeeded()&&!K))return;A.isContainKey(kb.KEY_CHART_TYPE)&&(Oa(),ac());A.isContainKeys([kb.KEY_CHART_TYPE,ta.KEY_REMOVE])&&ya();E=!1;var F=bb.getFilterSet();A.isContainItemModelSet(F)&&(A.isContainKey(ta.KEY_ADD)?(A=A.getTargetItemModels(F,ta.KEY_ADD),E=!gb(A)):A.isContainKey(ta.KEY_REMOVE)?(A=A.getTargetItemModels(F,ta.KEY_REMOVE),E=!gb(A)):A.isContainKey(ta.KEY_MOVE)&&
(E=!0));E||Xa.getCommandManager().untilWakeup(pb)}},Pa=function(A){pb()},gb=function(A){for(;0<A.length;)return!0;return!1},pb=function(){K=!0;if(M)Yb(),Ta();else if(Ta(),K=!1,bb.isExecutableContentEmpty())p(null,Ja.get("prepareToStart","\u8bf7\u5f00\u59cb\u4f60\u7684\u8868\u6f14~~~"));else{var A="";for(var E=0,F=T.getChildCount();E<F;E++){var z=T.getChild(E);if(z instanceof qb){var L=z.getItemModelSet();L.getItemModelCount()<L.getItemCountMin()&&(A&&(A+="\n"),A+=z.getComplexTitle())}}A&&(A=Ja.get("missingNecessaryField",
"\u4ee5\u4e0b\u4f4d\u7f6e\u7f3a\u5c11\u5b57\u6bb5")+"\n"+A);A?p(null,A):Cb()}},Cb=function(){var A=ec(),E=Pb(),F=Xa.createFacade(function(L){p(L.squareView)},function(L,ia){return-1==L?(K=!0,vb(),!0):Ea.executingPerformanceErrorHandler(F,L,ia)||Ea.executingCommonErrorHandler(L,ia)?!0:!1},function(){z.hideWaiting()});F.setCancelable(!0);F.setShowBlocking(!1);F.setProgressListener(function(L){z.hookProgressDisplayer(Fb.makeUiCreator(L))});A=F.squareExecute(A,bb,null,E);var z=Rb(A)},Rb=function(A){var E=
new Qa;E.hookOwner($(document.body),null);E.setIconVisible(!0);E.showWaiting(Fb.getWaitingText(),A);return E},Yb=function(A,E){var F=R.getJqUi().parent(),z=F.find(".square-exhibition-shade");0==z.length&&(z=$("<div>"),z.addClass("square-exhibition-shade"),z.appendTo(F),Ma.layoutCtrlWithLRTB(z,0,0,null,0,0,null));z.empty();A&&(F=$("<div>"),F.css({position:"relative",padding:"20px"}),F.addClass("square-exhibition-shade-text"),F.text(A),F.appendTo(z));E&&E(z);return z},zb=function(){R.getJqUi().parent().find(".square-exhibition-shade").remove()},
vb=function(){var A=Yb(Ja.get("executingCanceled","\u5f53\u524d\u6267\u884c\u5df2\u88ab\u53d6\u6d88\u3002")),E=new qa;E.setText(Ja.get("executingRetry","\u91cd\u65b0\u6267\u884c"));E.addActionListener(function(F){zb();pb()});E.getJqUi().css({position:"relative",width:"120px",height:"30px",margin:"20px"});E.getJqUi().appendTo(A)},p=function(A,E){zb();R.setModel(A,bb.getChart(),E);S=A?!0:!1;Ta()},f=function(){for(var A=1,E=1,F=0;F<wa.length;F++){var z=wa[F];z=z.getPreviewSetup();0<z.getWidth()&&0<z.getHeight()&&
(A=Math.max(A,z.getWidth()),E=Math.max(E,z.getHeight()))}var L=function(D){return function(V,sa){var Ba=D.getPreviewSetup();if(0<Ba.getWidth()&&0<Ba.getHeight()){V=Ba.getWidth()/A*1.4;Ba=Ba.getHeight()/E;var Fa=$("<span>");Fa.css({display:"inline-block",width:V+"em",height:Ba+"em","margin-left":"8px",background:"#ddd","box-shadow":"0 0 0 1px #bbb"});sa.append(Fa)}}},ia=Jb.getPreviewSetup(),za=new Ha;for(F=0;F<wa.length;F++){z=wa[F];var Za=z.getPreviewSetup(),lb=!1;Za.getWidth()==ia.getWidth()&&Za.getHeight()==
ia.getHeight()&&(lb=!0);var O=new na;O.setCaption(Ja.get("changePreviewSetup","\u5207\u6362\u9884\u89c8\u5c3a\u5bf8\u4e3a:#1").replace("#1",z.getDisplayText()));O.setMethod(Jb.getPreviewSetup,Jb.setPreviewSetup);O.setValue(Za);Za=a.createRadioMenuItem(z.getDisplayText(),"preview",lb,O,Xa.getCommandManager());Za.hookTextDecorator(L(z));za.addItemModel(Za)}return za},h=function(){var A=new la;A.setValue(bb,U.getInstance,Ja.get("clear","\u6e05\u9664"));Xa.getCommandManager().perform(A)},k=function(A){var E=
!M;M!=E&&(M=E,!M&&K&&pb());g(A)},g=function(A){M?(A.setText(Ja.get("exeImmediately","\u5373\u65f6\u6267\u884c")),A.setIconName("btn_resume"),A.setTooltips(Ja.get("exeImmediatelyCurrent","\u5f53\u524d\u4e3a\u201c\u6682\u7f13\u6267\u884c\u201d\u6a21\u5f0f\uff0c\u70b9\u51fb\u5207\u6362\u4e3a\u201c\u5373\u65f6\u6267\u884c\u201d"))):(A.setText(Ja.get("exeDelay","\u6682\u7f13\u6267\u884c")),A.setIconName("btn_suspend"),A.setTooltips(Ja.get("exeDelayCurrent","\u5f53\u524d\u4e3a\u201c\u5373\u65f6\u6267\u884c\u201d\u6a21\u5f0f\uff0c\u70b9\u51fb\u5207\u6362\u4e3a\u201c\u6682\u7f13\u6267\u884c\u201d")))},
m=function(){return{getSelecteds:function(){for(var A=Y.getSelecteds(),E=[],F=0;F<A.length;F++){var z=A[F];z.isInvalid()||E.push(z)}return E},clearAllSelecteds:function(){Y.clearSelecteds()}}},r=function(A){I||(I=new q(ma.getJqUi()),I.setCommandManager(Xa.getCommandManager()));I.showDialog();I.setModel(A)},w=function(A){var E=new u;E.setCommandManager(Xa.getCommandManager());E.showDialog(A)},n=function(A){I&&I.isVisible()&&A.isMeasure()&&A!=I.getModel()&&(I.acceptEditing(),I.setModel(A))},t=function(A){ha=
A},B=function(){return{getGlobal:function(){return Xa},getSquareModel:function(){return bb},getJsonAdditionalFilters:Pb,showNumberFormatSettingDialog:r,showDateFormatSettingDialog:w,setExecutingDumb:t,askToExecute:Pa}}}function Mb(){var ma=this,Ea,Xa,bb=$("<div>"),Jb=$("<div>"),Ya=$("<div>");this.setDependence=function(va){Ea=va};this.getJqUi=function(){Xa||(Xa=$("<div>"),Xa.addClass("square-card"),bb.addClass("square-card-titlebar"),bb.css("position","absolute"),bb.css("left",0),bb.css("right",0),
bb.css("top",0),bb.css("height",eb.CARD_TITLE_HEIGHT+"px"),bb.appendTo(Xa),Jb.addClass("square-card-title"),Jb.appendTo(bb),Ya.addClass("square-card-container"),Ya.css("position","absolute"),Ya.css("left",1),Ya.css("right",1),Ya.css("top",eb.CARD_TITLE_HEIGHT+"px"),Ya.css("bottom",0),Ya.appendTo(Xa),ma.protectedInitCustomUi(Ya));return Xa};this.setTitle=function(va){Jb.text(va)};var nb=function(){return Jb.text()};this.getComplexTitle=function(){return" <"+nb()+"> "};this.protectedInitCustomUi=function(va){};
var wb=function(){return Ea.getSquareModel()};this.protectedMethod={getGlobal:function(){return Ea.getGlobal()},getSquareModel:wb,getJsonAdditionalFilters:function(){return Ea.getJsonAdditionalFilters()},getChartTypeInstance:function(){var va=wb().getChartTypeName();return U.getInstance(va)},getTitle:nb,getJqAll:function(){return Xa},getJqContainer:function(){return Ya},showNumberFormatSettingDialog:function(va){Ea.showNumberFormatSettingDialog(va)},showDateFormatSettingDialog:function(va){Ea.showDateFormatSettingDialog(va)},
createSquareFieldFromMetaField:function(va){var Y=new La;Y.setMetaField(va);va.getDataType()==Ab.DT_NUMBER?(va=va.isRelativeAggregation()?Z.AGGREGATION_AGG:Z.AGGREGATION_SUM,Y.setRole(Z.ROLE_MEASURE,va),Y.setContinuous(!0)):(Y.setRole(Z.ROLE_DIMENSION),Y.setContinuous(!1),va.getHierachy()&&Y.setMetaField(va.getHierachy()[0]));return Y},setExecutingDumb:function(va){Ea.setExecutingDumb(va)},askToExecute:function(va){Ea.askToExecute(va)}}}function ub(){Mb.call(this);var ma=this,Ea=this.protectedMethod,
Xa=0,bb=0,Jb,Ya,nb=!1;this.setMetaPaneVisitor=function(J){Ya=J};this.protectedInitCustomUi=function(J){J.on("click",function(N){N=$(N.target);if(N.hasClass("sa-charttypecard-button")){N=N.data("model");var X=Ea.getSquareModel(),Q=X.getChartTypeName(),G=U.getInstance(Q),T=X.getChart();Q=Q!=N.getName();var R=T.getGarbageProperties();G=G.willTransform(T);T=G.collectNewSelecteds;for(var S=Ya.getSelecteds(),ca=[],H=0;H<S.length;H++){var I=S[H],M=Ea.createSquareFieldFromMetaField(I);I.getDataType()==Ab.DT_DATE&&
M.getRole()==Z.ROLE_DIMENSION&&M.setPartValue(Z.PARTVALUE_DATE_YEAR);ca.push(M)}T.call(G,ca);G=N.transform(G);G.setGarbageProperties(R);R=Ea.getGlobal().getCommandManager();T=new na;T.setCaption(Ja.get("changeChartTypeTo","\u56fe\u8868\u7c7b\u578b\u5207\u6362\u4e3a: #1").replace("#1",N.getText()));T.setMethod(X.getChart,X.setChart);T.setValue(G);R.perform(T);Ya.clearAllSelecteds();Q&&Jb&&Jb()}});J.on("mouseover",function(N){Y($(N.target))});J.on("mouseleave",function(N){Y(null)});J.on("dblclick",
function(N){N.ctrlKey&&N.altKey&&(nb=!0)})};this.updateDisplay=function(J){wb(J);va()};this.relayout=function(J){if(Xa!=J){Xa=J;var N=Ea.getJqContainer();J-=2;N.empty();var X=4,Q=4;J=Math.max(36,J);for(var G=U.getAllInstance(),T=0;T<G.length;T++){X+28+4>J&&(X=4,Q+=27);var R=G[T];if(R.isReleased()||nb){var S=$("<div>");S.data("model",R);S.addClass("sa-charttypecard-button");S.css("left",X);S.css("top",Q);S.css("width",28);S.css("height",21);cb.background(S,R.getIconFileName());S.appendTo(N);X+=34}}bb=
eb.CARD_TITLE_HEIGHT+(Q+21+4)+2;Ea.getSquareModel()&&va()}return bb};this.setChangedCoworker=function(J){Jb=J};var wb=function(J){ma.setTitle(Ja.get("chartTypeCardTitle","\u56fe\u8868\u7c7b\u578b")+": "+J.getText())},va=function(){var J=Ea.getChartTypeInstance(),N=Ea.getJqContainer().find(".sa-charttypecard-button");N.removeClass("sa-charttypecard-button_selected");for(var X=0;X<N.length;X++){var Q=$(N[X]);if(Q.data("model").getName()==J.getName()){Q.addClass("sa-charttypecard-button_selected");break}}},
Y=function(J){J&&J.hasClass("sa-charttypecard-button")?(J=J.data("model"),wb(J)):wb(Ea.getChartTypeInstance())}}function mb(){e.Child.call(this);Mb.call(this);var ma=this,Ea=this.protectedMethod,Xa,bb,Jb,Ya=[],nb,wb,va,Y=120;this.setItemModelSet=function(T){Xa=T;Xa.addChangedListener(J)};this.getItemModelSet=function(){return Xa};this.destroy=function(){Xa.removeChangedListener(J);va.unbindDragUi(Ea.getJqAll());va.unbindDropUi(Ea.getJqAll(),Ea.getJqContainer());va=null;N()};this.protectedInitCustomUi=
function(T){Xa&&X()};this.getMinHeight=function(){return 60};this.setPerfectHeight=function(T){Y=T};this.getPerfectHeight=function(){return Y};this.setRequestRelayoutListener=function(T){};this.setItemPressListener=function(T){nb=T};this.setDragDropHandler=function(T){va=T;var R=Ea.getGlobal().getCommandManager(),S=-1;T.bindDragUi(Ea.getJqAll(),function(ca){if(ca.hasClass("sa-carditem-text")){a:{ca=ca.parent()[0];for(var H=0;H<Ya.length;H++)if(Ya[H].getJqUi()[0]==ca){S=H;break a}S=-1}ca=Ya[S];ca.getJqUi().addClass("sa-carditem_draging");
ca=ca.getItemModel();H=new Lb;H.setItemModel(ca);return H}return null},function(ca,H){if(0<=S){var I=Ya[S];I.getJqUi().removeClass("sa-carditem_draging");H=H?H.dropOwner:null;if(ca&&H!==ma){ca=Ea.getSquareModel().getChart().getRollInState();var M=Ja.get("moveItemBetweenCards","\u79fb\u52a8#1\uff0c\u4ece#2\u5230#3");M=M.replace("#1",I.getItemModel().getComplexText());M=M.replace("#2",ma.getComplexTitle());M=M.replace("#3",H.getComplexTitle());H=new aa;H.setValue(Xa,I.getItemModel(),null,ca);R.compositeStart(M);
R.perform(H)}}},function(){S=-1},function(ca){var H=null;Xa!=Ea.getSquareModel().getFilterSet()&&(H=Ea.getSquareModel().getChart().getRollInState());ca=ca.getItemModel();var I=new aa;I.setValue(Xa,ca,ma.getComplexTitle(),H);R.perform(I)});T.bindDropUi(Ea.getJqAll(),Ea.getJqContainer(),function(ca,H){G();ca=Ya.length;H=(H-.5*eb.CARD_ITEM_V_SPACING)/(eb.CARD_ITEM_HEIGHT+eb.CARD_ITEM_V_SPACING)+.33;H=parseInt(0>H?0:H);H>=ca&&(H=ca);ca={action:"insert",index:H,dropOwner:ma};0<=S&&"insert"==ca.action&&
(ca.index==S||ca.index==S+1)&&(ca.action="none",ca.index=null);H=ca.index;"replace"==ca.action?Ya[H].getJqUi().addClass("sa-carditem_replacable"):"insert"==ca.action&&(bb||(bb=$("<div>"),bb.addClass("sa-card-insertprompt-v"),bb.appendTo(Ea.getJqContainer())),bb.css("top",H*(eb.CARD_ITEM_HEIGHT+eb.CARD_ITEM_V_SPACING)));return ca},function(){G()},function(ca,H){return"insert"==H.action},function(ca,H){G();var I=H.index;"insert"==H.action&&ma.protectedDropHandlerDataPusher(R,ca,I,0<=S)})};this.protectedDropHandlerDataPusher=
function(T,R,S,ca){throw Error("Override me.");};var J=function(T,R){R!=ta.KEY_ADD&&R!=ta.KEY_REMOVE&&R!=ta.KEY_MOVE||X()};this.setOperatingPrompt=function(T){T?(wb||(wb=$("<div>"),wb.addClass("sa-card-operating-prompt"),wb.appendTo(Ea.getJqContainer())),wb.text(T)):(wb&&wb.remove(),wb=null)};var N=function(){for(var T=0;T<Ya.length;T++){var R=Ya[T];R.destroy();R.getJqUi().remove()}Ya=[]},X=function(){N();for(var T=Ea.getJqContainer(),R=0;R<Xa.getItemModelCount();R++){var S=Xa.getItemModel(R);S=Q(S);
T.append(S.getJqUi());Ya.push(S)}wb&&(Ya.length?wb.hide():wb.show());R=Ya;S=1;for(var ca=0;ca<R.length;ca++){S+=eb.CARD_ITEM_V_SPACING;var H=R[ca].getJqUi();Ma.layoutCtrlWithLRTB(H,4,4,null,S,null,eb.CARD_ITEM_HEIGHT-2);S+=eb.CARD_ITEM_HEIGHT}Jb||(Jb=$("<div>"),Jb.appendTo(T));Ma.layoutCtrl(Jb,0,S,1,20);return Ya},Q=function(T){var R=new Vb(T);R.setActionListener(function(S,ca){var H=S.getJqUi(),I=H.data("menu");if(I&&I.isShowing())H.data("menu",null),I.hide();else{var M=R.getJqUi(),K=M.outerWidth(),
ha=M.outerHeight(),Aa=Math.min(180,Math.max(K,140));I=new ka;I.setWidth(Aa);I.setModel(ma.protectedCreateMenuModel(H,S,Ea.getGlobal().getCommandManager()));I.setHideListener(function(){H.data("menu",null)});H.data("menu",I);S=Ea.getGlobal().getTopJqUi();K=[K-Aa-2,ha+1];K=Ma.upwardCoordinate(M[0],K,S[0]);I.show(S,K[0],K[1],ca,!0,[0,-ha-2])}});R.setTextPressListener(function(S){nb&&nb(T)});return R};this.protectedCreateMenuModel=function(T,R,S){throw Error("Override me.");};var G=function(){bb&&bb.css("top",
"-65536px");for(var T=0;T<Ya.length;T++)Ya[T].getJqUi().removeClass("sa-carditem_replacable")};this.protectedMethod.updateUi=X}function qb(){mb.call(this);var ma=this,Ea=this.protectedMethod;this.protectedDropHandlerDataPusher=function(Jb,Ya,nb,wb){(wb=Ya.getMetaField())?(Ya=Ea.getChartTypeInstance().smartCreateSquareFieldFromMetaField(wb,Ea.getSquareModel().getChart(),ma.getItemModelSet()),Ya||(Ya=Ea.createSquareFieldFromMetaField(wb),(wb=ma.getItemModelSet().getInitialDateHierachyForField(Ya,nb))&&
Ya.setPartValue(wb))):Ya=Ya.getItemModel();wb=Ea.getSquareModel().getChart().getRollInState();var va=new ea;va.setValue(ma.getItemModelSet(),Ya,nb,ma.getComplexTitle(),wb);Jb.perform(va);Jb.isCompositeStarted()&&Jb.compositeEnd()};this.protectedCreateMenuModel=function(Jb,Ya,nb){var wb=Ya.getItemModel(),va=wb.getMetaField().getDataType()==Ab.DT_DATE&&wb.isDimension(),Y=wb.getMetaField().getDataType()==Ab.DT_DATE&&wb.isMeasure()&&wb.getAggregation()!=Z.AGGREGATION_COUNT&&wb.getAggregation()!=Z.AGGREGATION_CNTD;
Jb=new Ha;if(va||Y)Jb.addItemModel(ka.createActionMenuItem(Ja.get("dataFormatForDate","\u6570\u5b57\u683c\u5f0f")+"...",function(J){Ea.showDateFormatSettingDialog(wb)})),Jb.addSeperator();wb.isMeasure()&&!Y&&(Jb.addItemModel(ka.createActionMenuItem(Ja.get("dataFormatForNumber","\u6570\u5b57\u683c\u5f0f")+"...",function(J){Ea.showNumberFormatSettingDialog(wb)})),Jb.addSeperator());wb.getMetaField().isCanAsDimension()&&wb.getMetaField().isCanAsMeasure()&&(Xa(Jb,wb,nb),Jb.addSeperator());wb.isMeasure()&&
Ea.getGlobal().getMeta().isNormalSrcMode()&&(bb(Jb,wb,nb),Jb.addSeperator());wb.isInvalid()||(va=ka.createActionMenuItem(Ja.get("rename","\u91cd\u547d\u540d"),function(J){Ya.modifyDisplayName(nb)}),Jb.addItemModel(va));va=Ea.getSquareModel().getChart().getRollInState();Y=new aa;Y.setValue(ma.getItemModelSet(),wb,ma.getComplexTitle(),va);va=a.createActionMenuItem(Ja.get("remove","\u79fb\u9664"),Y,nb);Jb.addItemModel(va);return Jb};var Xa=function(Jb,Ya,nb){var wb=function(R){for(var S=nb.createCompositeAction(),
ca=0;ca<R.length;ca++){var H=R[ca];S.appendUnitAction(H);0==ca&&S.setCaption(H.getCaption())}return S},va=function(R){var S=new l(Ya);S.setValue(R);return S},Y=function(R){var S=new ba(Ya);S.setValue(R);return S},J=Ya.getMetaField().getDataType()==Ab.DT_NUMBER,N=Ya.getMetaField().getDataType()==Ab.DT_DATE;if(N){var X=ka.createSubMenu(Ja.get("dimension","\u7ef4\u5ea6"),!0,"role");Jb.addItemModel(X);var Q=function(R){var S=va(Z.ROLE_DIMENSION),ca=Y(R);S=wb([S,ca]);ca=Z.partValueToString(R);R=R==Ya.getPartValue();
return a.createRadioMenuItem(ca,"role",R,S,nb)};X.addItemModel(Q(Z.PARTVALUE_DATE_YEAR));X.addItemModel(Q(Z.PARTVALUE_DATE_QUARTER));X.addItemModel(Q(Z.PARTVALUE_DATE_MONTH));X.addItemModel(Q(Z.PARTVALUE_DATE_DAY));X.addItemModel(Q(Z.PARTVALUE_DATE_YQ));X.addItemModel(Q(Z.PARTVALUE_DATE_YM));X.addItemModel(Q(Z.PARTVALUE_DATE_YMD))}else X=va(Z.ROLE_DIMENSION),Q=Y(null),X=wb([X,Q]),Q=Ya.isDimension(),X=a.createRadioMenuItem(Ja.get("dimension","\u7ef4\u5ea6"),"role",Q,X,nb),Jb.addItemModel(X);var G=
Ya.isMeasure(),T=Ya.getAggregation();X=ka.createSubMenu(Ja.get("measure","\u5ea6\u91cf")+(G?"("+Z.aggregationToString(T)+")":""),!0,"role");Jb.addItemModel(X);Jb=function(R){var S=va(R);if(!N||!(T==Z.AGGREGATION_MAX&&R==Z.AGGREGATION_MIN||T==Z.AGGREGATION_MIN&&R==Z.AGGREGATION_MAX)){var ca=Y(null);S=wb([S,ca])}ca=G&&T==R;R=Z.aggregationToString(R);return a.createRadioMenuItem(R,"role",ca,S,nb)};J&&(X.addItemModel(Jb(Z.AGGREGATION_SUM)),X.addItemModel(Jb(Z.AGGREGATION_AVG)),X.addItemModel(Jb(Z.AGGREGATION_MEDIAN)));
if(J||N)X.addItemModel(Jb(Z.AGGREGATION_MAX)),X.addItemModel(Jb(Z.AGGREGATION_MIN));X.addItemModel(Jb(Z.AGGREGATION_COUNT));X.addItemModel(Jb(Z.AGGREGATION_CNTD))},bb=function(Jb,Ya,nb){var wb=Ja.get("quickSetup","\u6309\u65e5\u671f\u8ba1\u7b97"),va=ka.createSubMenu(wb);Jb.addItemModel(va);Jb=function(Y){var J=Ya.getQuickSetup()==Y,N=Z.quickSetupToString(Y);return ka.createCheckbox(N,J,function(X){X=X.isChecked()?Y:null;var Q=new na;Q.setCaption(wb+"-"+N);Q.setMethod(Ya.getQuickSetup,Ya.setQuickSetup);
Q.setValue(X);nb.perform(Q)})};va.addItemModel(Jb(Z.QUICKSETUP_LASTPERIOD_VALUE));va.addItemModel(Jb(Z.QUICKSETUP_LASTPERIOD_DIFF));va.addItemModel(Jb(Z.QUICKSETUP_LASTPERIOD_RATIO));va.addSeperator();va.addItemModel(Jb(Z.QUICKSETUP_SAMEPERIODLASTYEAR_VALUE));va.addItemModel(Jb(Z.QUICKSETUP_SAMEPERIODLASTYEAR_DIFF));va.addItemModel(Jb(Z.QUICKSETUP_SAMEPERIODLASTYEAR_RATIO))}}function sb(){function ma(){Sa.call(this);var Q=this,G=this.protectedMethod,T=this.showDialog;this.showDialog=function(S,ca,
H,I,M){G.setTitle(Ja.get("filterDialogTitle","#1\u6570\u636e\u7b5b\u9009").replace("#1",S.getComplexText()));var K=C.create(ca);G.setContentPaneCreator(function(){return K.getJqUi()});G.setClosingAction(function(ha){var Aa=!1;ha&&(Aa=K.accepting(I));!Aa&&M&&M()});S=$(document.body);ca=K.getSuggestDialogSize(S);R(S,H,ca);T()};var R=function(S,ca,H){var I=H[0],M=H[1],K=H[2],ha=[ca.outerWidth(),0];ha=Ma.upwardCoordinate(ca[0],ha,S[0]);S=S.innerHeight()-10;ha[1]+M>S&&(ha[1]=S-M);Q.setSize(I,M);Q.setPosition(ha[0],
ha[1]);K&&(I=H[3],H=H[4],G.setMinSize(I,H),G.getDialogCtrl().setMinSize(I,H),G.getDialogCtrl().setResizeEnabled())}}mb.call(this);var Ea=this,Xa=this.protectedMethod,bb=this.setItemModelSet;this.setItemModelSet=function(Q){bb(Q);Q.traversalItems(function(G){var T=G.getFilter();G=G.getSquareField();T.checkState(G);T.isStateValid()||Jb(T,G)})};this.repaint=function(){Xa.updateUi()};var Jb=function(Q,G){var T=new Z.InvalidPrompt;T.setLevel(Z.InvalidPrompt.LEVEL_FILTER_UNMATCHED,!0);T.setPromptText(Q.getStateDisplay());
G.setInvalidPrompt(T)};this.protectedCreateMenuModel=function(Q,G,T){var R=G.getItemModel(),S=R.getUsableFilter(),ca=R.getSquareField(),H=new Ha;H.addItemModel(ka.createActionMenuItem(Ja.get("filterSelectData","\u6570\u636e\u7b5b\u9009")+"...",function(Aa){Aa=Xa.getSquareModel();var Ta=Aa.createDependentMeta(Xa.getGlobal().getMeta());J(Ta,Aa,ca,function(db){db=Wa.create(db);S.setPreparedModel(db);S.isStateValid()?X(Q,R,T):(Jb(S,ca),db=new Ga,db.setOptionType(Ga.OPTION_OK),db.setMessage(S.getStateDisplay()),
db.showDialog())})}));var I=Ja.get("outsideAllowed","\u5141\u8bb8\u9605\u8bfb\u8005\u81ea\u884c\u7b5b\u9009"),M=R.isOutsideAllowed();H.addItemModel(ka.createCheckbox(I,M,function(Aa){Aa=new na;Aa.setCaption(ca.getComplexText()+" "+I+" - "+(M?Ja.get("outsideAllowedFalse","\u5426"):Ja.get("outsideAllowedTrue","\u662f")));Aa.setMethod(R.isOutsideAllowed,R.setOutsideAllowed);Aa.setValue(!M);T.perform(Aa)}));if(S instanceof Va){var K=function(Aa,Ta){var db=S.getCtrlType();!db&&(db=Va.CTRLTYPE_CHECKBOX_POPUP);
db=db==Ta;var jb=new W;jb.setCaption(Ja.get("filterChangeProperty","\u7b5b\u9009\u5668#1: #2").replace("#1",ca.getComplexText()).replace("#2",Aa));jb.setValue(S,Ta);return a.createRadioMenuItem(Aa,"ctrlType",db,jb,T)},ha=ka.createSubMenu(Ja.get("mode","\u6a21\u5f0f"));ha.addItemModel(K(Ja.get("multiSelected","\u591a\u9009"),Va.CTRLTYPE_CHECKBOX_POPUP));ha.addItemModel(K(Ja.get("singleSelected","\u5355\u9009"),Va.CTRLTYPE_RADIOBUTTON_POPUP));H.addItemModel(ha);Ya(H,ca,T)}H.addSeperator();Xa.getGlobal().getMeta().isNormalSrcMode()&&
(ha=K=null,S instanceof Ka?(K=Ja.get("rangeForAllValues","\u8303\u56f4\u5305\u62ec\u5168\u90e8\u503c"),ha=Ja.get("rangeForRelevantValues","\u8303\u56f4\u4ec5\u5305\u62ec\u76f8\u5173\u503c")):S instanceof Va&&(K=Ja.get("optionForAllValues","\u5907\u9009\u503c\u4e3a\u5168\u90e8\u503c"),ha=Ja.get("optionForRelevantValues","\u5907\u9009\u503c\u4ec5\u4e3a\u76f8\u5173\u503c")),null!=K&&null!=ha&&(H.addItemModel(nb(K,!1,S,ca,T)),H.addItemModel(nb(ha,!0,S,ca,T)),H.addSeperator()));K=ka.createActionMenuItem(Ja.get("rename",
"\u91cd\u547d\u540d"),function(Aa){G.modifyDisplayName(T)});H.addItemModel(K);K=new aa;K.setValue(Ea.getItemModelSet(),R,Ea.getComplexTitle());K=a.createActionMenuItem(Ja.get("remove","\u79fb\u9664"),K,T);H.addItemModel(K);return H};var Ya=function(Q,G,T){var R=Ja.get("sort","\u6392\u5e8f"),S=ka.createSubMenu(R);Q.addItemModel(S);Q=function(ca,H){void 0===H&&(H=ca);var I=Z.sortToString(ca);ca=G.getSort()==ca||G.getSort()==H;var M=new na;M.setCaption(R+"-"+I);M.setMethod(G.getSort,G.setSort);M.setValue(H);
return a.createRadioMenuItem(I,"sort",ca,M,T)};S.addItemModel(Q(Z.SORT_ASC,null));S.addItemModel(Q(Z.SORT_DESC))},nb=function(Q,G,T,R,S){var ca=T.isJustShowAffected()==G,H=new na;H.setCaption(Ja.get("filterChangeProperty","\u7b5b\u9009\u5668#1: #2").replace("#1",R.getComplexText()).replace("#2",Q));H.setMethod(T.isJustShowAffected,T.setJustShowAffected);H.setValue(G);return a.createRadioMenuItem(Q,"affected",ca,H,S)};this.protectedDropHandlerDataPusher=function(Q,G,T,R){R?(G=G.getItemModel(),N(Q,
G,T)):(G=G.getMetaField(),wb(Q,G,T))};var wb=function(Q,G,T){var R=G.getDataType();if(R==Ab.DT_NUMBER)if(G.isRelativeAggregation())R=va(G,Z.AGGREGATION_AGG,null,!0),Y(Q,R,T);else{R=" ["+G.getDisplayName()+"] ";var S=new v;S.showDialog(Ea.getJqUi(),R,function(ca,H){ca&&(ca=va(G,H,null,!0),Y(Q,ca,T))})}else R==Ab.DT_DATE?(R=" ["+G.getDisplayName()+"] ",S=new y,S.showDialog(Ea.getJqUi(),R,function(ca,H){ca&&(ca=va(G,null,H,H==Z.PARTVALUE_DATE_EXACT?!0:!1),Y(Q,ca,T))})):(R=va(G,null,null,!1),Y(Q,R,T))},
va=function(Q,G,T,R){var S=new La;S.setMetaField(Q);G?S.setRole(Z.ROLE_MEASURE,G):S.setRole(Z.ROLE_DIMENSION);S.setContinuous(R);S.setPartValue(T);return S},Y=function(Q,G,T){var R=Xa.getSquareModel(),S=R.createDependentMeta(Xa.getGlobal().getMeta(),[G.getMetaField().getFullName()]);J(S,R,G,function(ca){ca=Wa.create(ca);ca=fb.create(ca);var H=new ob;H.setSquareField(G);H.setFilter(ca);Xa.setExecutingDumb(!0);N(Q,H,T);Xa.setExecutingDumb(!1);X(Ea.getJqUi(),H,Q,function(){Xa.askToExecute(H)})})},J=
function(Q,G,T,R){Xa.getGlobal().createFacade(R,function(S,ca,H){var I=hb.toDisplayText(S,ca);I||(I=S+"\n"+ca);S=new Ga;S.setOptionType(Ga.OPTION_OK);S.setMessage(I);H&&S.setDetail(H);S.showDialog();return!0}).getSquareFilterPreparedValue(Q,G,null,T,Xa.getJsonAdditionalFilters())},N=function(Q,G,T){var R=new ea;R.setValue(Ea.getItemModelSet(),G,T,Ea.getComplexTitle());Q.perform(R)},X=function(Q,G,T,R){var S=G.getUsableFilter();G=G.getSquareField();(new ma).showDialog(G,S,Q,T,R)}}function Vb(ma){var Ea=
this,Xa,bb,Jb,Ya;this.getItemModel=function(){return ma};this.destroy=function(){ma.getSquareField().removePropertyChangeListener(wb);ma.getSquareField().setInvalidPromptListener(null)};this.getJqUi=function(){if(!Xa){Xa=$("<div>");Xa.addClass("sa-carditem");Xa.mouseenter(N);Xa.mouseleave(X);var Q=$("<div>");Q.addClass("sa-carditem-text");Q.text(ma.getSquareField().getText());Q.appendTo(Xa);Q.on("mousedown",function(G){Ya&&Ya(Ea)});nb();va();ma.getSquareField().addPropertyChangeListener(wb);ma.getSquareField().setInvalidPromptListener(va)}return Xa};
this.setActionListener=function(Q){Jb=Q};this.setTextPressListener=function(Q){Ya=Q};this.modifyDisplayName=function(Q){var G=ma.getSquareField(),T=G.getDisplayName();T||(T=G.getMetaField().getDisplayName());var R=$("<div>");R.css("background-color","#fff");R.css("z-index","65535");R.appendTo(Xa);Ma.layoutCtrlWithLRTB(R,-1,-1,null,-1,-1,null);var S=new da;S.setText(T);S.addAcceptableListener(function(ha,Aa){Aa&&M(I());K()});var ca=S.getJqUi();Ma.layoutCtrlWithLRTB(ca,0,20,null,0,0,null);ca.appendTo(R);
S.requestFocus();ca=$("<div>");ca.attr("title",Ja.get("reset","\u91cd\u7f6e"));ca.on("click",function(ha){M(null);K()});cb.background(ca,"icon_reset");Ma.layoutCtrlWithLRTB(ca,null,2,16,"50%",null,16);ca.css("margin-top","-8px");ca.css("cursor","pointer");ca.appendTo(R);var H=function(ha){Ma.isDescendent(ha.target,Xa[0])||(M(I()),K())},I=function(){var ha=$.trim(S.getText());!ha&&(ha=null);return ha},M=function(ha){var Aa=new na;Aa.setCaption(Ja.get("raname","\u91cd\u547d\u540d")+" ["+T+"] ");Aa.setMethod(G.getDisplayName,
G.setDisplayName);Aa.setValue(ha);Q.perform(Aa)},K=function(){document.body.removeEventListener("mousedown",H);R.remove()};document.body.addEventListener("mousedown",H)};var nb=function(){bb=$("<div>");bb.addClass("sa-carditem-menubtn");bb.appendTo(Xa);bb.on("mousedown",function(G){G=$(G.target);Jb(Ea,G)});var Q=$("<div>");Q.text("\u25b2");Q.addClass("sa-carditem-menubtn-text");Q.appendTo(bb);J(!1)},wb=function(Q,G){if(G==Z.KEY_PARTVALUE||G==Z.KEY_ROLE||G==Z.KEY_FORMULA||G==Z.KEY_DISPLAYNAME||G==
Z.KEY_QUICKSETUP)Q=Q.getField(),Xa.find(".sa-carditem-text").text(Q.getText()),Y(Q.getTextTooltips())},va=function(){var Q=ma.getSquareField().getInvalidPrompt();if(Q){Q=Q.getLevel()==Z.InvalidPrompt.LEVEL_META_LOST?Ja.get("notExistField","\u4e0d\u5b58\u5728\u7684\u5b57\u6bb5"):Q.getLevel()==Z.InvalidPrompt.LEVEL_META_INVALID?Ja.get("invalidField","\u65e0\u6548\u7684\u5b57\u6bb5"):Q.getLevel()==Z.InvalidPrompt.LEVEL_AGG?Ja.get("invalidAggregation","\u805a\u5408\u65b9\u5f0f\u4e0d\u6b63\u786e"):Q.getLevel()==
La.InvalidPrompt_LEVEL_TOO_MANY?Ja.get("exceedCountLimit","\u8d85\u51fa\u4e2a\u6570\u9650\u5236"):Q.getPromptText();var G=ra.createWarning();G.appendTo(Xa);G.addClass("sa-carditem-erroricon");Xa.addClass("sa-carditem_error");Xa.attr("title",Q);Y(null)}else Xa.find(".sa-carditem-erroricon").remove(),Xa.removeClass("sa-carditem_error"),Xa.attr("title",null),Y(ma.getSquareField().getTextTooltips())},Y=function(Q){Xa.find(".sa-carditem-text").attr("title",Q)},J=function(Q){bb.css("display",Q?"block":
"none")},N=function(Q){J(!0)},X=function(Q){J(!1)}}function Lb(){var ma,Ea;this.setMetaField=function(Xa){ma=Xa};this.getMetaField=function(){return ma};this.setItemModel=function(Xa){Ea=Xa};this.getItemModel=function(){return Ea};this.getText=function(){return ma?ma.getDisplayName():Ea.getSquareField().getText()}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing=
{});"undefined"==typeof com.kingdee.bos.qing.square&&(com.kingdee.bos.qing.square={});"undefined"==typeof com.kingdee.bos.qing.square.ui&&(com.kingdee.bos.qing.square.ui={});var xa=com.kingdee.bos.qing.square.ui;xa.SquareDesk=Ua;xa.SquareDesk.setSkin=function(ma){eb=ma};var eb,Ma,Ja,oa,ka,Ha,Sa,da,qa,Ga,ra,cb,Qa,hb,Fb,pa,Ab,Z,Wa,fb,Va,Ka,ab,kb,La,ob,ta,ja,Da,na,l,ba,W,ea,aa,la,x,d,b,e,c,a,q,u,v,y,C,P,U=xa.ChartTypeFactory,fa=xa.Exhibition;(function(){var ma=com.kingdee.bos.qing.common;Ma=ma.DomUtil;
ma=com.kingdee.bos.qing.framework.common;Ja=ma.MultilanguageManager.createPackageAccessor(xa);ma=com.kingdee.bos.qing.ui.component;oa=ma.SplitPane;ka=ma.Menu;Ha=ma.MenuModel;Sa=ma.AbstractModalDialog;da=ma.TextField;qa=ma.WorkButton;Ga=ma.MessageDialog;ma=com.kingdee.bos.qing.common.ui;ra=ma.CommonIconUtil;ma=com.kingdee.bos.qing.common.shared;Qa=ma.LongtimeWaitingMask;ma=com.kingdee.bos.qing.core;cb=ma.Icons;ma=com.kingdee.bos.qing.core.commonui;hb=ma.ErrorCodeParser;Fb=ma.ExecutingProgressParser;
ma=com.kingdee.bos.qing.core.model;pa=ma.ModelPage;Ab=ma.MetaField;Z=ma.AbstractAnalyticalField;Wa=ma.AbstractFilterPreparedModel;fb=ma.AbstractFilter;Va=ma.DiscreteFilter;Ka=ma.ContinuousFilter;ma=com.kingdee.bos.qing.square.model;ab=ma.SquarePreferences;kb=ma.SquareModel;La=ma.SquareField;ob=ma.FilterItemModel;ta=ma.ItemModelSet;ja=ma.PreviewSetupItem;Da=ma.AbstractChartProperty;ma=com.kingdee.bos.qing.core.controller;na=ma.ActionChangeProperty;l=ma.ActionChangeRole;ba=ma.ActionChangePartValue;
W=ma.ActionChangeFilterCtrlType;ma=com.kingdee.bos.qing.square.controller;ea=ma.ActionAddItem;aa=ma.ActionRemoveItem;la=ma.ActionClearAll;x=ma.ActionAppendAllNecessaryDimensions;ma=com.kingdee.bos.qing.core.ui;d=ma.AbstractDesignerView;b=ma.MetaPane;e=ma.AdjustableLane;c=ma.DragDropHandler;a=ma.MenuUtil;q=ma.NumberFormatSetting;u=ma.DateFormatSetting;v=ma.NumberFilterAggregationSelector;y=ma.DateFilterPartValueSelector;C=ma.AbstractPopupFilterPane;P=ma.AdditionalFilterSupporter})();var wa=[new ja("Full",
-1,-1,20,20,20)];Ua.setPreviewSetupItems=function(ma){wa=ma}})();
//qingVersionTag: 20250324