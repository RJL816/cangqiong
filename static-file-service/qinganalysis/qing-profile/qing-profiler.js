var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(z,F,B){if(z==Array.prototype||z==Object.prototype)return z;z[F]=B.value;return z};
$jscomp.getGlobal=function(z){z=["object"==typeof globalThis&&globalThis,z,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var F=0;F<z.length;++F){var B=z[F];if(B&&B.Math==Math)return B}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(z,F){var B=$jscomp.propertyToPolyfillSymbol[F];if(null==B)return z[F];B=z[B];return void 0!==B?B:z[F]};$jscomp.polyfill=function(z,F,B,w){F&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(z,F,B,w):$jscomp.polyfillUnisolated(z,F,B,w))};
$jscomp.polyfillUnisolated=function(z,F,B,w){B=$jscomp.global;z=z.split(".");for(w=0;w<z.length-1;w++){var O=z[w];if(!(O in B))return;B=B[O]}z=z[z.length-1];w=B[z];F=F(w);F!=w&&null!=F&&$jscomp.defineProperty(B,z,{configurable:!0,writable:!0,value:F})};
$jscomp.polyfillIsolated=function(z,F,B,w){var O=z.split(".");z=1===O.length;w=O[0];w=!z&&w in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var W=0;W<O.length-1;W++){var ba=O[W];if(!(ba in w))return;w=w[ba]}O=O[O.length-1];B=$jscomp.IS_SYMBOL_NATIVE&&"es6"===B?w[O]:null;F=F(B);null!=F&&(z?$jscomp.defineProperty($jscomp.polyfills,O,{configurable:!0,writable:!0,value:F}):F!==B&&(void 0===$jscomp.propertyToPolyfillSymbol[O]&&(B=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[O]=$jscomp.IS_SYMBOL_NATIVE?
$jscomp.global.Symbol(O):$jscomp.POLYFILL_PREFIX+B+"$"+O),$jscomp.defineProperty(w,$jscomp.propertyToPolyfillSymbol[O],{configurable:!0,writable:!0,value:F})))};$jscomp.polyfill("Object.is",function(z){return z?z:function(F,B){return F===B?0!==F||1/F===1/B:F!==F&&B!==B}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(z){return z?z:function(F,B){var w=this;w instanceof String&&(w=String(w));var O=w.length;B=B||0;for(0>B&&(B=Math.max(B+O,0));B<O;B++){var W=w[B];if(W===F||Object.is(W,F))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(z,F,B){if(null==z)throw new TypeError("The 'this' value for String.prototype."+B+" must not be null or undefined");if(F instanceof RegExp)throw new TypeError("First argument to String.prototype."+B+" must not be a regular expression");return z+""};$jscomp.polyfill("String.prototype.includes",function(z){return z?z:function(F,B){return-1!==$jscomp.checkStringArgs(this,F,"includes").indexOf(F,B||0)}},"es6","es3");
$jscomp.findInternal=function(z,F,B){z instanceof String&&(z=String(z));for(var w=z.length,O=0;O<w;O++){var W=z[O];if(F.call(B,W,O,z))return{i:O,v:W}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(z){return z?z:function(F,B){return $jscomp.findInternal(this,F,B).v}},"es6","es3");
(function(){"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.profiler&&(com.kingdee.bos.qing.profiler={});"undefined"==typeof com.kingdee.bos.qing.profiler.common&&(com.kingdee.bos.qing.profiler.common={});var z=com.kingdee.bos.qing.profiler.common;z.ProfileFacade=function(w,O,W,ba){F.call(this,w,O,
W,ba);var R=this.protectedMethod;R.setShowBlocking(!0);this.startProfiler=function(){R.remote("startProfiler",{})};this.shutDownProfiler=function(){R.remote("shutDownProfiler",{})};this.createGlobalTraceId=function(){R.remote("createGlobalTraceId",{})};this.searchServerState=function(){R.remote("searchServerState",{})};this.isProfilerStarted=function(){R.remote("isProfilerStarted",{})};this.checkLoginState=function(){R.remote("checkLoginState",{})};this.login=function(X,ca){R.remote("loginProfileServer",
{account:X,password:ca})};this.logout=function(){R.remote("logout",{})};this.loadProfilerServers=function(){R.remote("getAllProfilerAddress",{})};this.executeCmd=function(X,ca,ea,pa){R.remote("submitCmd",{action:"start",requestId:ca,serverIp:ea,cmdType:X,cmdParams:pa})};this.cancelCmdExecution=function(X,ca){R.remote("submitCmd",{action:"stop",requestId:ca,cmdType:X})};this.pullCmdResult=function(X,ca,ea){R.remote("getCmdResult",{requestId:ca,cmdType:X,cmdParams:ea})};this.getHelp=function(X){R.remote("getHelpContent",
{cmdType:X})};this.getAliveClients=function(){R.remote("getAliveClientIds",{})};this.loadAsyncProfilerResult=function(){R.remote("loadAsyncProfilerResult",{})};this.deleteHeapDumpResult=function(X,ca){R.remote("deleteHeapDumpFile",{ip:X,requestId:ca})};this.getAllHeapDumpResults=function(){R.remote("getAllHeapdumpResult",{})}};z.RemoteImpl=function(){B.call(this);var w;this.getRemoteUrl=function(O){return w};this.setRemoteUrl=function(O){w=O}};z.ProfileUtil=new function(){this.getText=function(w){return CryptoJS.AES.encrypt(w,
CryptoJS.enc.Utf8.parse(atob("MTIzNDU2NzgwMDAwMDAwMA==")),{mode:CryptoJS.mode.ECB,padding:CryptoJS.pad.Pkcs7}).toString()}};var F,B;(function(){var w=com.kingdee.bos.qing.framework.common;F=w.AbstractFacade;B=w.AbstractRemoteCall})()})();(function(){function z(p,n,r,x){var C;this.getDisplayName=function(){return r?r:p};this.isHistoryCmdReservable=function(){return x};this.setCmdModel=function(D){C=D};this.getCmdModel=function(){return C};this.getName=function(){return p};this.getDefaultParams=function(){return n};this.isAppendable=function(){return"trace"==p||"watch"==p||"stack"==p}}function F(p,n){this.getName=function(){return p};this.isNullable=function(){return n}}function B(){var p,n,r,x,C,D,H,L;this.getCacheRule=function(){return H};
this.isGlobal=function(){return p};this.getCmdName=function(){return n};this.getServerRegion=function(){return r};this.isPeriodic=function(){return x};this.getCmdType=function(){return C};this.getRequestIdRule=function(){return D};this.getCmdResultType=function(){return L};this.fromJsonObject=function(K){p=K.isGlobal;n=K.cmd;r=K.serverExecuteRegion;x=K.isPeriodicOpened;C=K.cmdType;D=K.requestIdRule;H=K.cacheStrategy;L=K.cmdResultType}}function w(){var p=this,n,r,x,C,D;this.fromJsonObject=function(H){n=
H.source;r=H.cmdName;x=H.requestId;C=H.status;D=H.stamp;p.protectedFromJsonObject(H)};this.getSource=function(){return n};this.getCmdName=function(){return r};this.getRequestId=function(){return x};this.getStatus=function(){return C};this.getStatusDesc=function(){return C==w.STATUS_FAILED?"failed":C==w.STATUS_SUCCEED?"succeed":C==w.STATUS_RUNNING?"running":"unknown"};this.getStamp=function(){return D};this.getResultType=function(){throw Error("Override me.");};this.protectedFromJsonObject=function(H){throw Error("Override me.");
}}function O(){var p,n,r,x,C,D,H,L;this.getSql=function(){return p};this.getCost=function(){return n};this.getServerAddress=function(){return r};this.getStartTime=function(){return C};this.getError=function(){return D};this.getState=function(){return H};this.getIndex=function(){return x};this.fromJsonObject=function(K){p=K.sql;n=K.cost;r=K.serverIp;C=K.startTime;D=K.errorStack;x=K.index;H=0==K.state?"Succeed":"Failed";L=K};this.getRawJson=function(){return L}}function W(){w.call(this);var p,n,r,x;
this.protectedFromJsonObject=function(C){p=C.fileSize;n=C.fileSimpleName;r=C.parentFilePath;x=C.errMsg};this.getErrMsg=function(){return x};this.getFileSize=function(){return p};this.getFileName=function(){return n};this.getParentPath=function(){return r}}function ba(){w.call(this);var p;this.getTraceId=function(){return p};this.protectedFromJsonObject=function(n){p=n.traceId}}function R(){w.call(this);var p=[];this.protectedFromJsonObject=function(n){if(n=n.keyValues)for(var r=0;r<n.length;r++){var x=
new X;x.fromJsonObject(n[r]);p.push(x)}};this.getKeyValues=function(){return p}}function X(){var p,n;this.fromJsonObject=function(r){p=r.key;n=r.value};this.getKey=function(){return p};this.getValue=function(){return n}}function ca(){var p,n,r,x=[],C,D,H;this.getTraceCode=function(){return p};this.getTotalRealTime=function(){return r};this.getTotalCpuTime=function(){return n};this.fromJsonObject=function(L){p=L.traceCode;n=L.totalCpuTime;r=L.totalRealTime;C=L.className;D=L.method;H=L.lineNumber;if(L=
L.children)for(var K=0;K<L.length;K++){var N=new ca;N.fromJsonObject(L[K]);x.push(N)}};this.getLineNumber=function(){return H};this.getClassName=function(){return C};this.getMethodName=function(){return D};this.getChildrenMethods=function(){return x}}function ea(){var p,n,r=[],x,C;this.getThreadId=function(){return p};this.getThreadName=function(){return n};this.getRootMethods=function(){return r};this.fromJsonObject=function(D){p=D.threadId;n=D.threadName;var H=D.rootTraceMethods;x=D.totalThreadCpuTime;
C=D.totalThreadTime;for(D=0;D<H.length;D++){var L=new ca;L.fromJsonObject(H[D]);r.push(L)}};this.getThreadCpuTime=function(){return x};this.getThreadTotalTime=function(){return C}}function pa(){w.call(this);var p=[];this.getThreadTraces=function(){return p};this.protectedFromJsonObject=function(n){if(n=n.threadCpuSampleResults)for(var r=0;r<n.length;r++){var x=new ea;x.fromJsonObject(n[r]);p.push(x)}}}function ua(){var p,n,r,x;this.getContent=function(){return"ts="+x+";thread_name="+p+";threadId="+
n+";classLoader="+r};this.getNodeId=function(){return n+"_"+p+"_"+n};this.fromJsonObject=function(C){p=C.threadName;n=C.threadId;r=C.classloader;x=C.timestamp}}function M(){var p=this,n,r=[],x=!1,C=0,D,H=[],L={};this.getNodeId=function(){return n.getNodeId()};this.getContent=function(){return n.getContent()};this.setTreeLevel=function(N){C=N};this.getLevel=function(){return C};this.getPaths=function(){return H};this.setParentTrace=function(N){D=N};this.getParentTrace=function(){return D};this.fromJsonObject=
function(N){if(x=N.isThreadTrace)n=new ua,n.fromJsonObject(N.traceData),C=0;else{n=new T;n.fromJsonObject(N.traceData);for(var ha=D.getPaths(),ia=0;ia<ha.length;ia++)H.push(ha[ia])}H.push(p.getNodeId());if(N=N.children)for(ia=0;ia<N.length;ia++)ha=new M,ha.setTreeLevel(C+1),ha.setParentTrace(p),ha.fromJsonObject(N[ia]),r.push(ha),L[ha.getNodeId()]=ha};this.findChildNode=function(N){return L[N]};var K=function(N){return null==N.getParentTrace()?N:K(N.getParentTrace())};this.getChildrenTraces=function(){return r};
this.deepFindMethod=function(N){var ha=N.getNodeId();N=N.getPaths();var ia=N.length-2;if(0>ia)return ha==p.getNodeId()?p:null;for(var qa=K(p),Aa=1;Aa<=ia;Aa++)if(qa=qa.findChildNode(N[Aa]),null==qa)return null;return qa.findChildNode(ha)}}function T(){var p,n,r,x,C;this.getNodeId=function(){return p};this.getClassAndMethod=function(){return p};this.getTotalCost=function(){return n};this.getTimes=function(){return r};this.getContent=function(){return x?n+" ms "+p+" counts="+r+" [throwMsg:"+C+"]":n+
" ms "+p+" counts="+r};this.fromJsonObject=function(D){p=D.classAndMethod;n=D.totalCost;r=D.times;x=D.throwException;C=D.throwMsg}}function ja(){w.call(this);var p=[],n;this.protectedFromJsonObject=function(r){var x=r.traceRoots;n=r.traceId;if(x)for(r=0;r<x.length;r++){var C=new M;C.fromJsonObject(x[r]);p.push(C)}};this.getTraceRoots=function(){return p};this.getTraceId=function(){return n}}function ra(){w.call(this);var p,n,r,x,C,D,H,L,K;this.getHashCode=function(){return L};this.getIndex=function(){return p};
this.getTime=function(){return n};this.getCost=function(){return r};this.isReturned=function(){return x};this.isThrowExp=function(){return C};this.getClassName=function(){return D};this.getMethod=function(){return H};this.getErrorInfo=function(){return K};this.protectedFromJsonObject=function(N){p=N.index;n=N.time;r=N.cost;x=N.isRet;C=N.isExp;D=N.className;H=N.method;L=N.objHashCode;K=N.errorInfo};this.getResultType=function(){return w.TT_RESULT}}function Fa(){w.call(this);var p=[],n;this.protectedFromJsonObject=
function(r){var x=r.methodRunningInfos;if(x)for(var C=0;C<x.length;C++){var D=new ra;D.fromJsonObject(x[C]);p.push(D)}n=r.errorInfo};this.getErrorInfo=function(){return n};this.getTTStatisticInfos=function(){return p};this.getResultType=function(){return w.TT_LIST_RESULT}}function Ga(){w.call(this);var p=[];this.protectedFromJsonObject=function(n){if(n=n.monitorInfos)for(var r=0;r<n.length;r++){var x=new Ha;x.fromJsonObject(n[r]);p.push(x)}};this.getMonitorInfos=function(){return p};this.getResultType=
function(){return w.MONITOR_RESULT}}function Ha(){var p,n,r,x,C,D,H,L;this.getMethodName=function(){return L};this.fromJsonObject=function(K){p=K.time;n=K.className;L=K.methodName;r=K.total;x=K.success;C=K.failed;D=K.avgRt;H=K.failRates};this.getTime=function(){return p};this.getClassName=function(){return n};this.getTotal=function(){return r};this.getSuccess=function(){return x};this.getFailed=function(){return C};this.getAvgRt=function(){return D};this.getFailRate=function(){return H}}function Ia(){var p,
n,r,x,C;this.getMemName=function(){return p};this.getUsed=function(){return n};this.getTotal=function(){return r};this.getMax=function(){return x};this.getUsage=function(){return C};this.fromJsonObject=function(D){p=D.memName;n=D.used;r=D.total;x=D.max;C=D.usage}}function Ba(){var p,n,r,x,C,D,H;this.fromJsonObject=function(L){p=L.threadId;n=L.name;r=L.group;x=L.priority;C=L.state;D=L.cpu;H=L.time};this.getCpu=function(){return D};this.getId=function(){return p};this.getName=function(){return n};this.getGroup=
function(){return r};this.getPriority=function(){return x};this.getStatus=function(){return C};this.getTime=function(){return H}}function Ja(){w.call(this);var p=[],n,r;this.fromJsonObject=function(x){n=x.innerResultType;if(x.cmdResults){x=x.cmdResults;for(var C=0;C<x.length;C++){var D=x[C],H=com.kingdee.bos.qing.profiler.common.CmdResultUtil.newCmdResult(n);H.fromJsonObject(D);if(n==w.TRACE||n==w.ENHANCE)r=H.getTraceId();p.push(H)}}};this.getTraceId=function(){return r};this.getInnerResultType=function(){return n};
this.getAllCmdResults=function(){return p};this.getResultType=function(){return w.COMPOSITE}}function Ka(){w.call(this);var p,n,r;this.protectedFromJsonObject=function(x){p=x.response;x.attach&&(r=x.attachResultType,n=com.kingdee.bos.qing.profiler.common.CmdResultUtil.newCmdResult(r),n.fromJsonObject(x.attach))};this.getResultType=function(){return w.RESPONSE};this.getAttach=function(){return n};this.getResponse=function(){return p}}function Pa(){var p,n,r;this.fromJsonObject=function(x){p=x.name;
n=x.gcCount;r=x.gcTime};this.getName=function(){return p};this.getGcCount=function(){return n};this.getGcTime=function(){return r}}function La(){var p,n;this.getClientId=function(){return p};this.getTitle=function(){return n};this.fromJsonObject=function(r){p=r.clientId;n=r.title}}function Ma(){w.call(this);var p=[],n=[],r=[],x=[];this.protectedFromJsonObject=function(C){for(var D=C.threadInfos,H=0;H<D.length;H++){var L=D[H],K=new Ba;K.fromJsonObject(L);p.push(K)}D=C.memoryInfos;for(H=0;H<D.length;H++)L=
D[H],K=new Ia,K.fromJsonObject(L),n.push(K);D=C.gcInfos;for(H=0;H<D.length;H++)L=D[H],K=new Pa,K.fromJsonObject(L),r.push(K);C=C.runtimeInfos;for(D=0;D<C.length;D++)H=new X,H.fromJsonObject(C[D]),x.push(H)};this.getRuntimeInfos=function(){return x};this.getThreadInfos=function(){return p};this.getMemoryInfos=function(){return n};this.getGcInfos=function(){return r};this.getResultType=function(){return w.DASHBOARD_RESULT}}function Na(){w.call(this);var p;this.protectedFromJsonObject=function(n){p=
n.result};this.getResult=function(){return p};this.getResultType=function(){return w.TEXT_RESULT}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.profiler&&(com.kingdee.bos.qing.profiler={});"undefined"==typeof com.kingdee.bos.qing.profiler.common&&(com.kingdee.bos.qing.profiler.common={});var P=com.kingdee.bos.qing.profiler.common;
P.QingProfilerCmd=z;P.ThreadInfo=Ba;P.CmdResult=w;P.DashboardResult=Ma;P.CmdExecuteResponse=Ka;P.TextResult=Na;P.MemoryInfo=Ia;P.MonitorResult=Ga;P.MethodMonitorInfo=Ha;P.CmdParameter=F;P.TTStatisticResultList=Fa;P.TTMethodBaseInfo=ra;P.ListCmdResult=function(){var p=[],n;this.fromJsonObject=function(r){var x=r.cmdResults;n=r.cmdResultType;for(r=0;r<x.length;r++){var C=x[r],D=P.CmdResultUtil.newCmdResult(n);D.fromJsonObject(C);p.push(D)}};this.getCmdResults=function(){return p}};P.MethodTraceInfo=
T;P.ThreadTraceInfo=ua;P.TraceInfo=M;P.ExecutingCmd=function(p,n,r,x,C){this.getClientId=function(){return p};this.getCmdParams=function(){return r};this.getCmd=function(){return n};this.getInterVal=function(){return x};this.getTraceId=function(){return C}};P.CmdModel=B;P.EnhanceCmdResult=ba;P.CmdSubmitRequest=function(p,n,r,x){this.getRequestId=function(){return p};this.getCmd=function(){return n};this.getCmdParams=function(){return r};this.getServerIp=function(){return x}};P.MethodStackTrace=ca;
P.ThreadCpuSampleResult=ea;P.SqlTraceList=function(){w.call(this);var p=[];this.getSqlTraces=function(){return p};this.protectedFromJsonObject=function(n){if(n=n.traceList)for(var r=0;r<n.length;r++){var x=new O;x.fromJsonObject(n[r]);p.push(x)}}};P.HeapDumpResult=W;P.SqlTrace=O;P.ClientIdInfo=La;P.ClientIdInfoList=function(){var p=[];this.fromJsonObject=function(n){n=n.clientIdInfos;for(var r=0;r<n.length;r++){var x=new La;x.fromJsonObject(n[r]);p.push(x)}};this.getAllClients=function(){return p}};
P.CompositeCmdResult=Ja;P.AsyncProfilerResultFiles=function(){var p,n={};this.fromJsonObject=function(r){p=r.versions;r=r.fileCache;if(p)for(var x=0;x<p.length;x++)n[p[x]]=r[p[x]]};this.getFileCache=function(r){return n[r]};this.getAllVersions=function(){return p}};P.CmdResultUtil=new function(){this.newCmdResult=function(p){switch(p){case w.TEXT_RESULT:return new Na;case w.DASHBOARD_RESULT:return new Ma;case w.MONITOR_RESULT:return new Ga;case w.TT_LIST_RESULT:return new Fa;case w.TT_RESULT:return new ra;
case w.RESPONSE:return new Ka;case w.CPUSAMPLE:return new pa;case w.TRACE:return new ja;case w.KEYVALUE:return new R;case w.ENHANCE:return new ba;case w.HEAPDUMP:return new W;case w.COMPOSITE:return new Ja}return null}};z.GLOBAL_UNIQUE_REQUESTID="98765$43210";F.NOPARAMS=0;F.GLOBAL=1;F.REQUEST_USED=2;F.SERVERIP_USED=3;z.CMDTYPES=[new z("dashboard","-i 3000 -n 100",null,!0),new z("samplecpu","-i 200 -ic com.kingdee.*;kd.bos.* -it qing -et profile -n 30 -d 50 ",null,!0),new z("async_profiler","","async profiler",
!1),new z("trace","",null,!0),new z("appendtrace","",null,!1),new z("appendwatch","",null,!1),new z("monitor","",null,!0),new z("watch","",null,!0),new z("stack","",null,!0),new z("thread","",null,!0),new z("sc","","search class",!0),new z("vmtool","--action getInstances --className ",null,!0),new z("jad","",null,!0),new z("heapdump","",null,!1),new z("sysprop","",null,!1),new z("sysenv","",null,!1),new z("jvm","",null,!1)];B.REALTIME_TYPE=0;B.NON_REALTIME_TYPE=1;B.APPEND="APPEND";B.REPLACE="REPLACE";
B.EXECUTE_PARTIAL_SERVER=0;B.EXECUTE_ALL_SERVER=1;B.REQUESTID_GLOABL="GLOBAL_UNIQUE";B.REQUESTID_RANDOM="RANDOM";B.REQUESTID_MANUAL="MANUAL_INPUT";w.TEXT_RESULT=0;w.DASHBOARD_RESULT=1;w.MONITOR_RESULT=2;w.TT_LIST_RESULT=3;w.TT_RESULT=4;w.RESPONSE=5;w.CPUSAMPLE=6;w.TRACE=7;w.KEYVALUE=8;w.SQLTRACELIST=9;w.ENHANCE=10;w.HEAPDUMP=11;w.COMPOSITE=12;w.STATUS_FAILED=0;w.STATUS_SUCCEED=1;w.STATUS_RUNNING=2})();(function(){function z(g){var d,c,h,e,a,b,k;this.setMessageDialog=function(l){k=l};this.getMessageDialog=function(){return k};this.setRemoteImpl=function(l){e=l};this.getRemoteImpl=function(){return e};this.showMessage=function(l,q,v){clearTimeout(b);a.text(l);v&&a.css("color",v);b=setTimeout(function(){a.text("")},q)};this.getJqUi=function(){if(!d){d=$("<div>");a=$("<div>");var l=new na;l.setText("\u7528\u6237:");c=new Va;var q=new na;q.setText("\u5bc6\u7801:");h=new Wa;l=l.getJqUi();var v=c.getJqUi();
q=q.getJqUi();var f=h.getJqUi();V.layoutCtrl(l,5,0,70,23);V.layoutCtrl(v,80,0,190,23);V.layoutCtrl(q,5,30,70,23);V.layoutCtrl(f,80,30,190,23);V.layoutCtrl(a,5,60,200,23);l.appendTo(d);v.appendTo(d);q.appendTo(d);f.appendTo(d);a.appendTo(d)}return d};this.getAccount=function(){return c.getText()};this.getPassword=function(){return Xa.getText(h.getPassword())}}function F(g){var d=$("<div class='sa-ctrl-common-modallayer'>"),c=new Ya(d),h=0,e=0,a=320,b=240,k=g?g:$(document.body);this.setSize=function(f,
t){a=f;b=t};this.confirm=function(f,t,m){c.showFooterPane();l(f,q(t,b),m)};this.dialog=function(f,t,m){c.showFooterPane();l(f,t,m)};this.alert=function(f,t){t=q(t,b);t.append(v());l(f,t)};this.destroy=function(){c.destroy();d.remove()};var l=function(f,t,m){d.appendTo(k);if(!h){var u=k.prop("clientWidth"),y=k.prop("clientHeight");h=u-a>>1;e=(y-b)/3}c.setBounds(h,e,a,b);c.setToolbarVisible(!1);c.setContent(t);c.setTitle(f);c.addClosingListener(function(I,S){if(S&&m)m(S);else return I.destroy(),d.remove(),
!0});c.addClosedListener(function(I){I.destroy();d.remove()});c.show()},q=function(f,t){var m=$("<div>"),u=$("<div>");u.text(f);u.css("font","12px \u5fae\u8f6f\u96c5\u9ed1");u.css("margin-top",t?(t-126)/2:"40px");u.css("text-align","center");m.append(u);return m},v=function(){var f=$("<div>");f.addClass("sa-ctrl-dialog-footer");var t=new Za(Qa.get("ok","\u786e\u5b9a"));t.getJqUi().css("bottom","10px");t.getJqUi().css("position","absolute");t.getJqUi().css("margin-left","-50px");t.getJqUi().css("left",
"50%");t.getJqUi().css("width","100px");t.getJqUi().css("height","28px");t.addActionListener(function(m){m.setEnabled(!1);c.destroy();d.remove()});f.append(t.getJqUi());return f}}function B(g){sa.call(this);var d=this,c=this.protectedMethod,h,e,a=function(b){if(!h){h=$("<div>");h.addClass("profile-command-paras-type");var k=new na;k.setText("\u9009\u62e9\u9875\u7b7e:");k=k.getJqUi();e=new Oa;e.setItemModels(b);e.setCustomPainter(function(l,q,v){v&&q.text(v.getTitle())});b=e.getJqUi();V.layoutCtrl(k,
10,10,100,23);V.layoutCtrl(b,120,10,280,23);h.append(k);h.append(b)}return h};this.initUI=function(b){c.setTitle("\u8bbe\u7f6etrace\u76ee\u6807\u9875\u7b7e");d.setSize(430,170);c.setContentPaneCreator(function(){return a(b)});c.setClosingAction(function(k){k&&g(e.getSelected())});c.setClosingChecker(function(){return!0})}}function w(g,d){sa.call(this);var c=this,h=this.protectedMethod,e,a;this.initUI=function(){h.setTitle("\u8bbe\u7f6e\u547d\u4ee4\u53c2\u6570");c.setSize(500,320);h.setContentPaneCreator(function(){if(!e){e=
$("<div>");e.addClass("profile-command-paras-type");var b=new na;b.setText("Cmd Params:");b=b.getJqUi();a=new oa;var k=a.getJqUi();V.layoutCtrl(b,10,10,100,23);V.layoutCtrl(k,120,10,350,200);e.append(b);e.append(k)}return e});h.setClosingAction(function(b){b&&g(a.getText(),d)});h.setClosingChecker(function(){return!0})}}function O(g,d){X.call(this,g,d);var c=[];this.setAllAliveClients=function(h){c=h};this.protectedGetParamPanel=function(h){return new M(h,c)}}function W(g,d){X.call(this,g,d);var c;
this.setServers=function(h){c=h};this.protectedGetParamPanel=function(h){h=new T(h);h.setServerAddress(c);return h}}function ba(g,d){X.call(this,g,d);this.protectedGetParamPanel=function(c){return new ua(c)}}function R(g){sa.call(this);var d=this,c=this.protectedMethod,h=new oa,e=function(){for(var a="",b=0;b<g.length;b++){var k="CmdReq"+b+". Params:"+g[b].getCmdParams();a+=k;a+="\r\n"}h.setText(a);return h.getJqUi()};this.initUI=function(){c.setTitle("\u5386\u53f2\u547d\u4ee4");d.setSize(600,320);
c.setContentPaneCreator(function(){return e()});c.setContentPaneCreator(function(){return e()});c.setClosingAction(function(a){});c.setClosingChecker(function(){return!0})}}function X(g,d){sa.call(this);var c=this,h=this.protectedMethod,e;this.protectedGetParamPanel=function(a){throw Error("override me");};this.initUI=function(){h.setTitle("\u8bbe\u7f6e\u547d\u4ee4\u53c2\u6570");c.setSize(430,320);h.setContentPaneCreator(function(){e=c.protectedGetParamPanel(g);return e.getJqUi()});h.setClosingAction(function(a){a&&
(a=new wa(e.getRequestId(),g,e.buildCmdParamLine(),e.getServerIp()),d(a))});h.setClosingChecker(function(){return!0})}}function ca(){sa.call(this);var g=this,d=this.protectedMethod,c;this.refresh=function(){A.refresh(c)};this.initUI=function(h){d.setTitle("\u670d\u52a1\u72b6\u6001");g.setSize(320,280);d.setContentPaneCreator(function(){var e=$("<div>");c=A.createTable();c.setSyncUIWhenModelChanged(!1);A.bindTableListenerForCtrl(c);var a=new KTDefaultCellRender(c);a.setOutsideVisible(!0);c.setCellRender(a);
a=c.getSelectionModel();a.setMode(KTSelectionModel.MODE_SINGLE);a.setPolicy(KTSelectionModel.POLICY_ROW);c.addColumns(2);c.getColumn(0).setWidth(150);c.getColumn(1).setWidth(80);a=A.createHeadRow(c);a.setHeight(25);a.getCell(0).setValue("Server");a.getCell(1).setValue("State");A.clearWithoutHead(c);if(0<h.length)for(a=0;a<h.length;a++){var b=A.createRow(c);b.setHeight(23);b.getCell(0).setValue(h[a].serverIp);b.getCell(1).setValue(h[a].state)}A.refresh(c);$(c.getUI()).appendTo(e);c.updateUI();return e});
d.setClosingAction(function(){});d.setClosingChecker(function(){})}}function ea(){var g,d;this.setMessageContainer=function(c){d=c};this.setRemoteImpl=function(c){g=c};this.handleCmdSubmitSuccess=function(c){};this.handleCmdSubmitError=function(c){};this.handleStopCmdSuccess=function(c,h){};this.displayResult=function(c){};this.handleStopCmdError=function(c,h,e){};this.focusMe=function(){};this.refreshServer=function(c){};this.getRunningCmds=function(){return[]};this.refreshMiddleCmdResult=function(c){};
this.protectedMethod={getRemote:function(){return g},getMsgCurtain:function(){return d}}}function pa(){ea.call(this);var g=this.protectedMethod,d=[],c=this;this.isNeedOpenInterval=function(e){return e.isPeriodic()};this.handleCmdSubmitSuccess=function(e,a){var b=e.getRequestId(),k=e.getCmdParams();e=e.getCmd();var l=e.getCmdModel(),q;c.isNeedOpenInterval(l)&&(q=setInterval(h,2E3,e,b,k));l.getCmdType()==Y.NON_REALTIME_TYPE&&(e.isAppendable()?(a=a.getAttach().getTraceId(),b=new xa(b,e,k,q,a)):b=new xa(b,
e,k,q,-1),d.push(b));g.getMsgCurtain().showSuccess("cmd execute succeed:"+e.getName())};this.refreshMiddleCmdResult=function(e){var a=d.filter(function(b){return b.getClientId()==e});a&&0<a.length&&(a=a[0],h(a.getCmd(),e,a.getCmdParams()))};var h=function(e,a,b){var k=new Z(g.getRemote(),function(l){if(l){var q=new Ra;q.fromJsonObject(l);l=q.getCmdResults();for(q=0;q<l.length;q++)c.displayResult(l[q])}},function(l,q,v){l=-1;for(q=0;q<d.length;q++)if(d[q].getClientId()==a){l=q;var f=d[q];break}-1<
l&&(d.splice(l,1),f&&(f=f.getInterVal())&&clearInterval(f));return!0});k.setShowBlocking(!1);k.pullCmdResult(e.getName(),a,b)};this.getRunningCmds=function(){return d};this.handleCmdSubmitError=function(e,a,b){var k=b.getCmd(),l=b.getRequestId();b=b.getCmdParams();return 5001008==e?(g.getMsgCurtain().showPrompt(a),!d.some(function(q){return q.getClientId()==l})&&k.getCmdModel().isPeriodic()&&(e=setInterval(h,3E3,k,l,b),d.push(new xa(l,k,b,e))),!0):!1};this.handleStopCmdSuccess=function(e,a){e.getInterVal()&&
clearInterval(e.getInterVal());e=d.indexOf(e);d.splice(e,1)};this.handleStopCmdError=function(e,a,b){return 5001013==a?(a=d.indexOf(e),d.splice(a,1),g.getMsgCurtain().showSuccess("cmd canceld:"+e.getCmd().getName()),!0):!1}}function ua(g){var d,c;this.getJqUi=function(){if(!d){d=$("<div>");d.addClass("profile-command-paras-type");var h=new na;h.setText("Cmd Params:");h=h.getJqUi();c=new oa;c.setText(g.getDefaultParams());var e=c.getJqUi();V.layoutCtrl(h,10,10,100,23);V.layoutCtrl(e,120,10,280,200);
d.append(h);d.append(e)}return d};this.getRequestId=function(){return fa.GLOBAL_UNIQUE_REQUESTID};this.getServerIp=function(){return""};this.buildCmdParamLine=function(){return c.getText()}}function M(g,d){var c,h,e;this.getJqUi=function(){if(!c){c=$("<div>");c.addClass("profile-command-paras-type");var a=new na;a.setText("RequestId:");a=a.getJqUi();e=new Oa;e.setItemModels(d);e.setCustomPainter(function(q,v,f){f&&v.text(f.getTitle())});var b=e.getJqUi(),k=new na;k.setText("Cmd Params:");k=k.getJqUi();
h=new oa;h.setText(g.getDefaultParams());var l=h.getJqUi();V.layoutCtrl(a,10,10,100,23);V.layoutCtrl(b,120,10,280,23);V.layoutCtrl(k,10,42,100,23);V.layoutCtrl(l,120,42,280,170);c.append(a);c.append(b);c.append(k);c.append(l)}return c};this.getRequestId=function(){var a=e.getSelected();return a?a.getClientId():""};this.getServerIp=function(){return""};this.buildCmdParamLine=function(){return h?h.getText():""}}function T(g){var d,c,h,e=[];this.setServerAddress=function(a){e=a};this.getJqUi=function(){if(!d){d=
$("<div>");d.addClass("profile-command-paras-type");var a=new na;a.setText("ServerIp:");a=a.getJqUi();c=new Oa;c.setItemModels(e);0<e.length&&c.setSelected(e[0]);var b=c.getJqUi(),k=new na;k.setText("Cmd Params:");k=k.getJqUi();h=new oa;h.setText(g.getDefaultParams());var l=h.getJqUi();V.layoutCtrl(a,10,10,100,23);V.layoutCtrl(b,120,10,160,23);V.layoutCtrl(k,10,42,100,23);V.layoutCtrl(l,120,42,280,170);d.append(a);d.append(b);d.append(k);d.append(l)}return d};this.getRequestId=function(){return Sa.createUUID()};
this.getServerIp=function(){return c.getSelected()};this.buildCmdParamLine=function(){return h?h.getText():""}}function ja(g,d){ka.AbstractTabPane.call(this);var c=this,h=new oa,e;this.getTitle=function(){return d};this.clearData=function(){h.setText("")};this.displayResult=function(a){var b=g.getCmdModel().getCacheRule();b&&b==Y.APPEND?(b=a.getSource(),b=h.getText()+"\n-----------------------"+b+"----------------------\n",h.setText(b+a.getResult())):h.setText(a.getResult())};this.getJqUi=function(){e||
(e=h.getJqUi());return e};this.focusMe=function(){};this.into=function(){c.focusMe()}}function ra(g){function d(v,f){KTDefaultCellRender.call(this,v);var t=this,m=this.paintCellUI;this.paintCellUI=function(u,y){if(t.getCurrentRowIdx()<A.getHeadRowCount()||!t.getCell())m(u,y);else if(5==t.getCurrentColIdx()){u=$(u);var I=t.getCurrentRow().getUserObject();y=$("<div>");y.text("\u4e0b\u8f7d");y.addClass("profiler-btn-in-tablecell");y.css("left","25px");y.appendTo(u);y.on("click",function(S){if(I.getStatus()!=
aa.STATUS_SUCCEED)c.getMsgCurtain().showError("dump file not ready");else{S=com.kingdee.bos.qing.common.Util;var U=c.getRemote().getRemoteUrl().replace("profile.do","downloadHeapDumpFile.do");U=S.appendParamToUrl(U,"fileName",I.getFileName());window.open(U,"_self")}});y=$("<div>");y.text("\u5220\u9664");y.addClass("profiler-btn-in-tablecell");y.css("right","25px");y.appendTo(u);y.on("click",function(S){S=I.getRequestId();var U=I.getSource();(new Z(c.getRemote(),function(va){va=a.indexOf(I);a.splice(va,
1);q()},function(va,ya){c.getMsgCurtain().showError(ya);return!0})).deleteHeapDumpResult(U,S)})}else m(u,y)}}ea.call(this);var c=this.protectedMethod,h=this,e,a=[],b,k;this.getJqUi=function(){if(!e){b=A.createTable();var v=$(b.getUI());v.addClass("profiler-key-value-table");var f=new d(b);f.setOutsideVisible(!0);b.setCellRender(f);f=b.getSelectionModel();f.setMode(KTSelectionModel.MODE_SINGLE);f.setPolicy(KTSelectionModel.POLICY_ROW);b.addColumns(6);b.getColumn(0).setWidth(120);b.getColumn(1).setWidth(280);
b.getColumn(2).setWidth(100);b.getColumn(3).setWidth(100);b.getColumn(4).setWidth(500);b.getColumn(5).setWidth(150);f=A.createHeadRow(b);f.getCell(0).setValue("ServiceIp");f.getCell(1).setValue("FileName");f.getCell(2).setValue("Size");f.getCell(3).setValue("State");f.getCell(4).setValue("Error detail");f.getCell(5).setValue("Operation");e=v;l()}return e};this.focusMe=function(){b&&A.refresh(b)};var l=function(){var v=new Z(c.getRemote(),function(f){a=[];if(f){for(var t=0;t<f.length;t++){var m=new $a;
m.fromJsonObject(f[t]);a.push(m)}q()}else k&&clearInterval(k),A.clearWithoutHead(b),A.refresh(b)});v.setShowBlocking(!1);v.getAllHeapDumpResults()},q=function(){A.clearWithoutHead(b);for(var v=!1,f=0;f<a.length;f++){var t=a[f],m=A.createRow(b);m.setHeight(23);m.setUserObject(t);m.getCell(0).setValue(t.getSource());m.getCell(1).setValue(t.getFileName());var u=t.getFileSize()/1048576;m.getCell(2).setValue(u.toFixed(2)+"MB");m.getCell(3).setValue(t.getStatusDesc());m.getCell(4).setValue(t.getErrMsg());
m.getCell(5).setValue("");v=v||t.getStatus()==aa.STATUS_RUNNING}A.refresh(b);v?k||(k=setInterval(l,3E3)):k&&(clearInterval(k),k=null)};this.displayResult=function(v){a.push(v);var f=A.createRow(b);f.setHeight(23);f.setUserObject(v);f.getCell(0).setValue(v.getSource());f.getCell(1).setValue(v.getFileName());var t=v.getFileSize()/1048576;f.getCell(2).setValue(t.toFixed(2)+"MB");f.getCell(3).setValue(v.getStatusDesc());f.getCell(4).setValue(v.getErrMsg());f.getCell(5).setValue("");A.refresh(b);v.getStatus()==
aa.STATUS_RUNNING&&(k||(k=setInterval(l,3E3)))};this.handleCmdSubmitSuccess=function(v,f){(v=f.getAttach())&&h.displayResult(v)}}function Fa(g){ea.call(this);var d=this,c=new oa,h;this.clearData=function(){c.setText("")};this.refreshServer=function(e){};this.displayResult=function(e){var a=g.getCmdModel().getCacheRule();a&&a==Y.APPEND?(a=e.getSource(),a=c.getText()+"\n-----------------------"+a+"----------------------\n",c.setText(a+e.getResult())):c.setText(e.getResult())};this.getJqUi=function(){h||
(h=c.getJqUi());return h};this.focusMe=function(){};this.handleCmdSubmitSuccess=function(e,a){(e=a.getAttach())&&d.displayResult(e)}}function Ga(){var g=-1;this.setListenerId=function(d){g=d};this.getListenerId=function(){return g};this.getContent=function(){return-1==g?"servers":"servers[listenerId:"+g+"]"}}function Ha(g){this.getContent=function(){return g}}function Ia(g,d){Ta.AbstractTabPane.call(this);var c=this,h,e,a,b=d.getClientId(),k=d.getTitle(),l,q,v,f,t,m=[];this.setParent=function(E){v=
E};this.setHistoryCmdRequest=function(E){m=E};this.setRemoteImpl=function(E){q=E};this.getRunningCmd=function(){return a};this.getJqUi=function(){if(!h){h=$("<div>");l=new qa;f=l.addButtonForTailCustom(u,"","\u5f00\u59cb","");l.addButtonForTailCustom(Ca,"","\u6e05\u5c4f","");t=l.addButtonForTailCustom(y,"","\u8ffd\u52a0Trace");t.setEnabled(!1);h.append(l.getJqUi());e=new la;var E=new la.BranchNode(new Ga);e.setRoot(E);e.getRoot().setExpanded(!0);e.setRootVisible(!0);e.setNodePainter(kb);e.getJqUi().addClass("profiler-tree");
h.append(e.getJqUi())}return h};var u=function(){if(a)ya();else{var E=new w(U,a);E.initUI();E.showDialog()}},y=function(){if(a){var E=new w(U,a);E.initUI();E.showDialog()}};this.protectedAskCloseable=function(E){a&&(clearInterval(a.getInterVal()),(new Z(q)).cancelCmdExecution(a.getCmd().getName(),a.getClientId()));E(!0)};var I=function(E){for(var G=null,J=0;J<fa.CMDTYPES.length;J++)if("appendtrace"==fa.CMDTYPES[J].getName()){G=fa.CMDTYPES[J];break}J=new Z(q,function(da){if(da){var ta=new za;ta.fromJsonObject(da);
da=1==ta.getStatus()?0:-1;v.showMessage("append trace result:"+ta.getResponse(),da);return!0}});var Q=(new Date).getTime();J.executeCmd(G.getName(),Q,"",E)},S=function(E){var G=new wa(b,g,E,null);m.push(G);(new Z(q,function(J){if(J){var Q=new za;Q.fromJsonObject(J);J=Q.getAttach().getTraceId();e.getRoot().getUserObject().setListenerId(J);e.refresh(e.getRoot(),!0);Q=setInterval(va,2E3,g,b,E);a=new xa(b,g,E,Q,J);v.showMessage("cmd execute succeed:"+g.getName(),0);f.setText("\u7ed3\u675f");t.setEnabled(!0);
return!0}})).executeCmd(g.getName(),b,"",E)},U=function(E,G){E.includes("--traceId")?v.showMessage(" parameter 'traceId' can not be configured by manual"+g.getName(),-1):null==G?S(E):(G=G.getTraceId(),E.includes("--listenerId")?v.showMessage(" parameter 'listenerId' can not be configured by manual"+g.getName(),-1):I(E+" --listenerId "+G))},va=function(){var E=new Z(q,function(G){if(G){var J=new Ra;J.fromJsonObject(G);G=J.getCmdResults();for(J=0;J<G.length;J++)c.displayResult(G[J])}},function(G,J,
Q){if(a)return clearInterval(a.getInterVal()),!0});E.setShowBlocking(!1);E.pullCmdResult(g.getName(),b,a.getCmdParams())},ya=function(){a&&clearInterval(a.getInterVal());(new Z(q,function(E){E&&(a=null,v.showMessage("cmd stop succeed:"+g.getName(),0),f.setText("\u5f00\u59cb"),t.setEnabled(!1))})).cancelCmdExecution(a.getCmd().getName(),a.getClientId())},Ca=function(){e.removeAllChildren(e.getRoot());e.getRoot().getUserObject().setListenerId(-1);e.refresh()},kb=function(E,G){G=G.getUserObject();null!=
G&&E.text(G.getContent())},lb=function(E,G){E=E.getAllChildren();for(var J=0;J<E.length;J++)if(E[J].getUserObject().getContent()==G)return E[J];return null};this.getTitle=function(){return k};this.into=function(){e.refresh()};this.displayResult=function(E){var G=E.getSource();E=E.getTraceRoots();var J=lb(e.getRoot(),G);if(J)for(G=0;G<E.length;G++){var Q=E[G],da=ab(J,Q);-1==da?Da(Q,J):(da=J.getAllChildren()[da],da.deepFirstVisiting(function(ta){var bb=Q.deepFindMethod(ta.getUserObject());bb&&ta.setUserObject(bb)},
!0),cb(da,Q))}else for(J=new la.BranchNode(new Ha(G)),e.getRoot().addChild(J),G=0;G<E.length;G++)Da(E[G],J);e.refresh(J)};var cb=function(E,G){if(E.isLeafNode()){if(0<G.getChildrenTraces().length){var J=E.getParent(),Q=ab(J,G);J.removeChild(E);Da(G,J,Q)}}else{var da=E.getAllChildren();J={};for(Q=0;Q<da.length;Q++){var ta=da[Q].getUserObject().getNodeId();J[ta]=da[Q]}G=G.getChildrenTraces();for(Q=0;Q<G.length;Q++)(da=J[G[Q].getNodeId()])?cb(da,G[Q]):Da(G[Q],E)}},ab=function(E,G){E=E.getAllChildren();
if(!E||0==E.length)return-1;for(var J=0;J<E.length;J++)if(G.getNodeId()==E[J].getUserObject().getNodeId())return J;return-1},Da=function(E,G,J){var Q=E.getChildrenTraces();if(0==Q.length)Q=new la.LeafNode(E),J?G.addChild(Q,J):G.addChild(Q);else for(E=new la.BranchNode(E),E.setExpanded(!0),J?G.addChild(E,J):G.addChild(E),G=0;G<Q.length;G++)Da(Q[G],E)}}function Ba(g){ea.call(this);var d=this,c=this.protectedMethod,h,e={},a,b=[];this.showMessage=function(k,l){0==l?c.getMsgCurtain().showSuccess(k):1==
l?c.getMsgCurtain().showPrompt(k):c.getMsgCurtain().showError(k)};this.getRunningCmds=function(){for(var k=[],l=0;l<b.length;l++){var q=e[b[l]];q&&(q=q.getRunningCmd())&&k.push(q)}return k};this.getJqUi=function(){h||(a=new Ta,h=a.getJqUi());return h};this.createNewTargetTab=function(k){var l=new Ia(g,k);l.setRemoteImpl(c.getRemote());l.setParent(d);a.addTab(l,!0);e[k.getClientId()]=l;b.push(k.getClientId());return l}}function Ja(){pa.call(this);var g,d;this.clearData=function(){A.clearWithoutHead(d);
A.refresh(d)};this.displayResult=function(c){A.clearWithoutHead(d);var h=c.getMonitorInfos();if(h){for(var e=0,a=h.length;e<a;e++){var b=h[e],k=A.createRow(d);k.setHeight(30);k.getCell(0).setValue(b.getTime());k.getCell(1).setValue(b.getClassName());k.getCell(2).setValue(b.getMethodName());k.getCell(3).setValue(b.getTotal());k.getCell(4).setValue(b.getSuccess());k.getCell(5).setValue(b.getFailed());k.getCell(6).setValue(b.getAvgRt());k.getCell(7).setValue(b.getFailRate());k.getCell(8).setValue(c.getSource())}A.refresh(d)}};
this.focusMe=function(){A.refresh(d)};this.getJqUi=function(){if(!g){d=A.createTable();var c=new KTDefaultCellRender(d);c.setOutsideVisible(!0);d.setCellRender(c);c=d.getSelectionModel();c.setMode(KTSelectionModel.MODE_SINGLE);c.setPolicy(KTSelectionModel.POLICY_ROW);d.addColumns(9);d.getColumn(0).setWidth(150);d.getColumn(1).setWidth(300);d.getColumn(2).setWidth(120);d.getColumn(3).setWidth(100);d.getColumn(4).setWidth(80);d.getColumn(5).setWidth(80);d.getColumn(6).setWidth(100);d.getColumn(7).setWidth(100);
d.getColumn(8).setWidth(150);c=A.createHeadRow(d);c.getCell(0).setValue("TIME");c.getCell(1).setValue("CLASSNAME");c.getCell(2).setValue("METHOD");c.getCell(3).setValue("TOTAL");c.getCell(4).setValue("SUCCESS");c.getCell(5).setValue("FAILED");c.getCell(6).setValue("AVG_RT");c.getCell(7).setValue("FAILRATE");c.getCell(8).setValue("SERVERIP");g=$(d.getUI());V.layoutCtrlWithLRTB(g,0,0,null,0,0,null)}return g};this.refreshServer=function(c){}}function Ka(g){ka.AbstractTabPane.call(this);var d=this,c,
h;this.getTitle=function(){return g};this.into=function(){d.focusMe()};this.clearData=function(){h.getRoot().removeAllChildren();c.empty()};var e=function(k,l){var q=k.getChildrenMethods();if(q&&0<q.length)for(k=new la.BranchNode(k),k.setExpanded(!0),l.addChild(k),l=0;l<q.length;l++)e(q[l],k);else l.addChild(new la.LeafNode(k))};this.displayResult=function(k){d.clearData();a();c.append(h.getJqUi());k=k.getThreadTraces();var l=h.getRoot();if(k)for(var q=0;q<k.length;q++){var v=k[q],f=new la.BranchNode(v);
l.addChild(f);v=v.getRootMethods();for(var t=0;t<v.length;t++)e(v[t],f)}h.refresh(l)};this.focusMe=function(){h&&h.refresh()};var a=function(){h=new la;var k=new la.BranchNode("ThreadTrace");h.setRoot(k);h.getRoot().setExpanded(!0);h.setRootVisible(!0);h.setNodePainter(b);h.getJqUi().addClass("profiler-samplecpu-tree")},b=function(k,l){l=l.getUserObject();if(l instanceof db){var q="ct:"+l.getTotalCpuTime()+" ms; ",v="rt:"+l.getTotalRealTime()+" ms;";l=l.getClassName()+"."+l.getMethodName()+"(line:"+
l.getLineNumber()+")";k.text(q+v+l)}else l instanceof eb?(q="Total cpu time:"+l.getThreadCpuTime()+" ms ",v="Total real time:"+l.getThreadTotalTime()+" ms ",l="Id:"+l.getThreadId()+", Name:"+l.getThreadName(),k.text(q+v+l)):k.text(l)};this.getJqUi=function(){c||(c=$("<div>"),a(),c.append(h.getJqUi()));return c}}function Pa(g,d){function c(m,u){KTDefaultCellRender.call(this,m);var y=this,I=this.paintCellUI;this.paintCellUI=function(S,U){if(y.getCurrentRowIdx()<A.getHeadRowCount()||!y.getCell())I(S,
U);else if(1==y.getCurrentColIdx()){S=$(S);var va=y.getCurrentRow().getUserObject();U=$("<div>");U.text("\u4e0b\u8f7d");U.addClass("profiler-btn-in-tablecell");U.css("left","50px");U.appendTo(S);U.on("click",function(ya){ya=com.kingdee.bos.qing.common.Util;var Ca=h.getRemote().getRemoteUrl().replace("profile.do","downloadAsyncProfilerFile.do");Ca=ya.appendParamToUrl(Ca,"fileName",va);window.open(Ca,"_self")})}else I(S,U)}}ea.call(this);var h=this.protectedMethod,e,a=this,b={},k,l=[],q,v=function(){q=
A.createTable();var m=$(q.getUI());m.addClass("profiler-key-value-table");var u=new c(q);u.setOutsideVisible(!0);q.setCellRender(u);u=q.getSelectionModel();u.setMode(KTSelectionModel.MODE_SINGLE);u.setPolicy(KTSelectionModel.POLICY_ROW);q.addColumns(2);q.getColumn(0).setWidth(300);q.getColumn(1).setWidth(150);u=A.createHeadRow(q);u.getCell(0).setValue("FileName");u.getCell(1).setValue("Operation");return m},f=function(){(new Z(h.getRemote(),function(m){if(m){var u=new fb;u.fromJsonObject(m);m=u.getAllVersions();
for(var y=0;y<m.length;y++)for(var I=u.getFileCache(m[y]),S=0;S<I.length;S++){var U=A.createRow(q);U.setHeight(23);U.setUserObject(I[S]);U.getCell(0).setValue(I[S]);U.getCell(1).setValue("")}A.refresh(q);return!0}})).loadAsyncProfilerResult()};this.handleCmdSubmitSuccess=function(m,u){var y=m.getRequestId(),I=m.getCmdParams();m=m.getCmd();var S=m.getCmdModel();(u=u.getAttach())&&a.displayResult(u);S.getCmdType()==Y.NON_REALTIME_TYPE&&(y=new xa(y,m,I,null),l.push(y))};this.getRunningCmds=function(){return l};
this.clearData=function(){for(var m=0;m<d.length;m++)b[d[m]].clearData()};this.refreshServer=function(m){for(var u=0;u<m.length;u++)b[m[u]]||(b[m[u]]=new ja(g,m[u]),k.addTab(b[m[u]],!0))};this.displayResult=function(m){if(m.getResultType()==aa.COMPOSITE){m=m.getAllCmdResults();for(var u=0;u<m.length;u++){var y=m[u].getSource();b[y].displayResult(m[u])}}else u=m.getSource(),b[u].displayResult(m)};this.handleStopCmdSuccess=function(m,u){m.getInterVal()&&clearInterval(m.getInterVal());m=l.indexOf(m);
l.splice(m,1);u=u.getAttach();if(null!=u)if(m=u.getResultType(),m==aa.TEXT_RESULT)t(u),A.refresh(q),a.displayResult(u);else if(m==aa.COMPOSITE){u=u.getAllCmdResults();for(m=0;m<u.length;m++)t(u[m]),a.displayResult(u[m]);A.refresh(q)}};var t=function(m){m=m.getResult();m=JSON.parse(m);var u=A.createRow(q);u.setHeight(23);u.setUserObject(m.file);u.getCell(0).setValue(m.file);u.getCell(1).setValue("")};this.getJqUi=function(){if(!e){k=new ka;k.setTabLevel(ka.SECOND_LEVEL);for(var m=0;m<d.length;m++)b[d[m]]=
new ja(g,d[m]),k.addTab(b[d[m]],!0);v();f();m=new ma;m.setHorizontalSplit(!0);m.setEnabled(!1);m.setFirstSize(1200,-1,-1);m.setSecondSize(500,-1,-1);m.setFirstChild(ma.createChildWrapper(k.getJqUi()));m.setSecondChild(ma.createChildWrapper($(q.getUI()),function(){q.relayoutViews()}));e=m.getJqUi()}return e};this.focusMe=function(){k.getCurrentTabPane().focusMe();A.refresh(q)}}function La(g){P.call(this,g);this.protectedGetDisplayer=function(d){return new n(d)}}function Ma(g,d){P.call(this,d);this.protectedGetDisplayer=
function(c){return new ja(g,c)}}function Na(g){P.call(this,g);this.protectedGetDisplayer=function(d){return new Ka(d)};this.isNeedOpenInterval=function(d){return!1}}function P(g){pa.call(this);var d,c=this,h={},e;this.clearData=function(){for(var a=0;a<g.length;a++)h[g[a]].clearData()};this.refreshServer=function(a){for(var b=0;b<a.length;b++)h[a[b]]||(h[a[b]]=c.protectedGetDisplayer(a[b]),e.addTab(h[a[b]],!0))};this.displayResult=function(a){if(a.getResultType()==aa.COMPOSITE){a=a.getAllCmdResults();
for(var b=0;b<a.length;b++){var k=a[b].getSource();h[k].displayResult(a[b])}}else b=a.getSource(),h[b].displayResult(a)};this.protectedGetDisplayer=function(a){throw Error("over ride me ");};this.getJqUi=function(){if(!d){d=$("<div>");e=new ka;e.setTabLevel(ka.SECOND_LEVEL);for(var a=0;a<g.length;a++)h[g[a]]=c.protectedGetDisplayer(g[a]),e.addTab(h[g[a]],!0);d.append(e.getJqUi())}return d};this.focusMe=function(){e.getCurrentTabPane().focusMe()}}function p(){ea.call(this);var g,d,c=this,h;this.getJqUi=
function(){if(!d){e();var b=new ma;b.setHorizontalSplit(!0);b.setEnabled(!1);b.setFirstSize(1100,-1,-1);b.setSecondSize(580,-1,-1);b.setFirstChild(ma.createChildWrapper($(g.getUI()),function(){g.relayoutViews()}));h=new oa;b.setSecondChild(ma.createChildWrapper(h.getJqUi()));d=b.getJqUi()}return d};var e=function(){g=A.createTable();$(g.getUI()).addClass("profiler-key-value-table");var b=new KTDefaultCellRender(g);b.setOutsideVisible(!0);g.setCellRender(b);b=g.getSelectionModel();b.setMode(KTSelectionModel.MODE_SINGLE);
b.setPolicy(KTSelectionModel.POLICY_ROW);b.addChangeListener(a);g.addColumns(2);g.getColumn(0).setWidth(300);g.getColumn(1).setWidth(850);b=A.createHeadRow(g);b.getCell(0).setValue("KEY");b.getCell(1).setValue("VALUE")},a=function(b,k){KTSelectionModel.CHANGE_ADD==b&&0<k.length&&(b=g.getRow(k[0].getRowIdx()).getUserObject(),h.setText(b.getValue))};this.clearData=function(){A.clearWithoutHead(g);A.refresh(g)};this.displayResult=function(b){A.clearWithoutHead(g);b=b.getKeyValues();for(var k=0;k<b.length;k++){var l=
b[k],q=A.createRow(g);q.getCell(0).setValue(l.getKey());q.getCell(1).setValue(l.getValue());q.setUserObject(l)}A.refresh(g)};this.focusMe=function(){g&&A.refresh(g)};this.handleCmdSubmitSuccess=function(b,k){(b=k.getAttach())&&c.displayResult(b)}}function n(g){ka.AbstractTabPane.call(this);var d=this,c,h,e,a,b;this.clearData=function(){A.clearWithoutHead(h);A.clearWithoutHead(e);A.clearWithoutHead(a);A.clearWithoutHead(b);A.refresh(h);A.refresh(e);A.refresh(a);A.refresh(b)};this.displayResult=function(f){if(f instanceof
gb){A.clearWithoutHead(h);var t=f.getThreadInfos();if(t){for(var m=0,u=t.length;m<u;m++){var y=t[m],I=A.createRow(h);I.setHeight(30);I.getCell(0).setValue(y.getId());I.getCell(1).setValue(y.getName());I.getCell(2).setValue(y.getGroup());I.getCell(3).setValue(y.getPriority());I.getCell(4).setValue(y.getStatus());I.getCell(5).setValue(y.getCpu())}A.refresh(h)}A.clearWithoutHead(e);if(t=f.getMemoryInfos()){m=0;for(u=t.length;m<u;m++)y=t[m],I=A.createRow(e),I.setHeight(30),I.getCell(0).setValue(y.getMemName()),
I.getCell(1).setValue(y.getUsed()),I.getCell(2).setValue(y.getTotal()),I.getCell(3).setValue(y.getMax()),I.getCell(4).setValue(y.getUsage());A.refresh(e)}A.clearWithoutHead(a);if(t=f.getGcInfos()){m=0;for(u=t.length;m<u;m++)y=t[m],I=A.createRow(a),I.setHeight(20),I.getCell(0).setValue(y.getName()),I.getCell(1).setValue(y.getGcCount()),I.getCell(2).setValue(y.getGcTime());A.refresh(a)}A.clearWithoutHead(b);if(f=f.getRuntimeInfos()){t=0;for(m=f.length;t<m;t++)u=f[t],y=A.createRow(b),y.setHeight(20),
y.getCell(0).setValue(u.getKey()),y.getCell(1).setValue(u.getValue());A.refresh(b)}}};this.getTitle=function(){return g};this.focusMe=function(){h&&(A.refresh(h),A.refresh(e),A.refresh(a),A.refresh(b))};this.getJqUi=function(){if(!c){v();q();l();k();var f=$(h.getUI()),t=$(e.getUI()),m=$(a.getUI()),u=$(b.getUI()),y=$("<div>");y.append(t);t=$("<div>");t.addClass("dashboard-gc");t.append(m);m=$("<div>");m.addClass("dashboard-runtime");m.append(u);y.append(t);y.append(m);u=new ma;u.setHorizontalSplit(!1);
u.setEnabled(!0);u.setFirstSize(380,-1,-1);u.setSecondSize(250,-1,-1);u.setResizeMode(ma.RESIZE_MODE_SECOND_FIXED);u.setFirstChild(ma.createChildWrapper(f,function(){h.relayoutViews()}));u.setSecondChild(ma.createChildWrapper(y));c=u.getJqUi()}return c};var k=function(){b=A.createTable();var f=new KTDefaultCellRender(b);f.setOutsideVisible(!0);b.setCellRender(f);f=b.getSelectionModel();f.setMode(KTSelectionModel.MODE_SINGLE);f.setPolicy(KTSelectionModel.POLICY_ROW);b.addColumns(2);b.getColumn(0).setWidth(100);
b.getColumn(1).setWidth(250);f=A.createHeadRow(b);f.getCell(0).setValue("KEY");f.getCell(1).setValue("VALUE")},l=function(){a=A.createTable();var f=new KTDefaultCellRender(a);f.setOutsideVisible(!0);a.setCellRender(f);f=a.getSelectionModel();f.setMode(KTSelectionModel.MODE_SINGLE);f.setPolicy(KTSelectionModel.POLICY_ROW);a.addColumns(3);a.getColumn(0).setWidth(150);a.getColumn(1).setWidth(150);a.getColumn(2).setWidth(150);f=A.createHeadRow(a);f.getCell(0).setValue("NAME");f.getCell(1).setValue("COUNT");
f.getCell(2).setValue("TIME")},q=function(){e=A.createTable();var f=new KTDefaultCellRender(e);f.setOutsideVisible(!0);e.setCellRender(f);f=e.getSelectionModel();f.setMode(KTSelectionModel.MODE_SINGLE);f.setPolicy(KTSelectionModel.POLICY_ROW);e.addColumns(5);e.getColumn(0).setWidth(150);e.getColumn(1).setWidth(100);e.getColumn(2).setWidth(100);e.getColumn(3).setWidth(100);e.getColumn(4).setWidth(100);f=A.createHeadRow(e);f.getCell(0).setValue("MEMORY");f.getCell(1).setValue("USED");f.getCell(2).setValue("TOTAL");
f.getCell(3).setValue("MAX");f.getCell(4).setValue("USAGE")},v=function(){h=A.createTable();var f=new KTDefaultCellRender(h);f.setOutsideVisible(!0);h.setCellRender(f);f=h.getSelectionModel();f.setMode(KTSelectionModel.MODE_SINGLE);f.setPolicy(KTSelectionModel.POLICY_ROW);h.addColumns(6);h.getColumn(0).setWidth(100);h.getColumn(1).setWidth(600);h.getColumn(2).setWidth(120);h.getColumn(3).setWidth(100);h.getColumn(4).setWidth(150);h.getColumn(5).setWidth(100);f=A.createHeadRow(h);f.getCell(0).setValue("ID");
f.getCell(1).setValue("NAME");f.getCell(2).setValue("GROUP");f.getCell(3).setValue("PRIORITY");f.getCell(4).setValue("STATE");f.getCell(5).setValue("%CPU")};this.into=function(){d.focusMe()}}function r(g){N.call(this,g);var d=this.protectedMethod;this.protectedInnitToolBar=function(c){c.addButtonForTailCustom(d.executeCmdAction,"","\u6267\u884c","");c.addButtonForTailCustom(d.clearResult,"","\u6e05\u9664","");c.addButtonForTailCustom(d.getHelpContent,"","\u5e2e\u52a9","")};this.protectedExecuteCmd=
function(){var c=new W(d.getCmd(),d.submitCmd);c.setServers(d.getServerAddresses());c.initUI();c.showDialog()}}function x(g){D.call(this,g);var d=this.protectedMethod;this.protectedInnitToolBar=function(e){e.addButtonForTailCustom(d.executeCmdAction,"","\u5f00\u59cb","");e.addButtonForTailCustom(h,"","\u5237\u65b0","");e.addButtonForTailCustom(c,"","\u91cd\u7f6e\u6570\u636e","");e.addButtonForTailCustom(d.cancelCmdAction,"","\u7ed3\u675f","");e.addButtonForTailCustom(d.displayRunningCmds,"","\u5f53\u524d\u8fd0\u884c\u547d\u4ee4",
"");e.addButtonForTailCustom(d.clearResult,"","\u6e05\u9664","");e.addButtonForTailCustom(d.getHelpContent,"","\u5e2e\u52a9","")};var c=function(){var e=new fa("reset",""),a=new Y,b={isGlobal:!0,cmd:"reset"};b.serverExecuteRegion=Y.EXECUTE_ALL_SERVER;b.isPeriodicOpened=!1;b.cmdType=Y.REALTIME_TYPE;b.requestIdRule=Y.REQUESTID_RANDOM;b.cmdResultType=aa.TEXT_RESULT;a.fromJsonObject(b);e.setCmdModel(a);a=fa.GLOBAL_UNIQUE_REQUESTID+" samplecpu";e=new wa(Sa.createUUID(),e,a,"");d.submitCmd(e);d.clearResult()},
h=function(){d.refreshMiddleCmdResult(fa.GLOBAL_UNIQUE_REQUESTID)}}function C(g){N.call(this,g);var d=this.protectedMethod;this.protectedInnitToolBar=function(a){a.addButtonForTailCustom(c,"","\u6267\u884ccpu","");a.addButtonForTailCustom(h,"","\u6267\u884cMem","");a.addButtonForTailCustom(d.cancelCmdAction,"","\u7ed3\u675f","");a.addButtonForTailCustom(d.displayRunningCmds,"","\u5f53\u524d\u8fd0\u884c\u547d\u4ee4","");a.addButtonForTailCustom(e,"","\u5b9e\u65f6\u67e5\u8be2","");a.addButtonForTailCustom(d.clearResult,
"","\u6e05\u9664","");a.addButtonForTailCustom(d.getHelpContent,"","\u5e2e\u52a9","")};this.protectedInitResultDisplayer=function(){return new Pa(d.getCmd(),d.getServerAddresses())};var c=function(){var a=d.getCmd();d.submitCmd(new wa(fa.GLOBAL_UNIQUE_REQUESTID,a,"start",""))},h=function(){var a=d.getCmd();d.submitCmd(new wa(fa.GLOBAL_UNIQUE_REQUESTID,a,"start --event alloc",""))},e=function(){var a=new fa("async_profiler_search"),b=new Y,k={isGlobal:!1,cmd:"async_profiler_search"};k.serverExecuteRegion=
Y.EXECUTE_PARTIAL_SERVER;k.isPeriodicOpened=!1;k.cmdType=Y.REALTIME_TYPE;k.requestIdRule=Y.REQUESTID_RANDOM;k.cacheStrategy=Y.APPEND;k.cmdResultType=aa.TEXT_RESULT;b.fromJsonObject(k);a.setCmdModel(b);a=new W(a,d.submitCmd);a.setServers(d.getServerAddresses());a.initUI();a.showDialog()}}function D(g){N.call(this,g);var d=this.protectedMethod;this.protectedInnitToolBar=function(a){a.addButtonForTailCustom(d.executeCmdAction,"","\u5f00\u59cb","");a.addButtonForTailCustom(d.cancelCmdAction,"","\u7ed3\u675f",
"");a.addButtonForTailCustom(c,"","\u5f53\u524d\u8fd0\u884c\u547d\u4ee4","");a.addButtonForTailCustom(d.clearResult,"","\u6e05\u9664","");a.addButtonForTailCustom(d.getHelpContent,"","\u5e2e\u52a9","")};var c=function(){var a=new K(d.getRunningCmds(),g.isAppendable());a.setCancelFunction(d.doCancelOneCmd);g.isAppendable()&&a.setAppendEnhanceFunction(h);a.initUi();a.showDialog();a.refrehTable()},h=function(a){a=new w(e,a);a.initUI();a.showDialog()},e=function(a,b){var k=b.getTraceId();if(a.includes("--listenerId"))d.showMessage(" parameter 'listenerId' can not be configured by manual"+
b.getCmd().getName(),1);else{a=a+" --listenerId "+k;k=new Z(d.getRemote(),function(q){if(q){var v=new za;v.fromJsonObject(q);q=1==v.getStatus()?0:-1;d.showMessage("append enhance result:"+v.getResponse(),q);return!0}});var l=(new Date).getTime();k.executeCmd("append"+b.getCmd().getName(),l,"",a)}};this.protectedExecuteCmd=function(){var a=d.getCmd(),b=a.getCmdModel().getRequestIdRule();b==Y.REQUESTID_GLOABL?(b=new ba(a,d.submitCmd),b.initUI(),b.showDialog()):b==Y.REQUESTID_MANUAL&&(new Z(d.getRemote(),
function(k){if(k){var l=new Ua;l.fromJsonObject(k);k=new O(a,d.submitCmd);k.setAllAliveClients(l.getAllClients());k.initUI();k.showDialog();return!0}})).getAliveClients()}}function H(g){D.call(this,g);var d=this,c=this.protectedMethod,h;this.protectedInnitToolBar=function(b){b.addButtonForTailCustom(e,"","\u65b0\u589eTrace\u76ee\u6807","");b.addButtonForTailCustom(c.getHelpContent,"","\u5e2e\u52a9","")};var e=function(){(new Z(c.getRemote(),function(b){if(b){var k=new Ua;k.fromJsonObject(b);b=new B(a);
b.initUI(k.getAllClients());b.showDialog();return!0}})).getAliveClients()},a=function(b){h.createNewTargetTab(b).setHistoryCmdRequest(d.getHistoryCmd())};this.protectedInitResultDisplayer=function(){return h=new Ba(c.getCmd())}}function L(){sa.call(this);var g=this,d=this.protectedMethod,c;this.initUi=function(h){d.setTitle("\u5e2e\u52a9\u8bf4\u660e");g.setSize(700,700);d.setContentPaneCreator(function(){if(!c){c=$("<div>");c.addClass("profiler-help-content");var e=(new showdown.Converter({tables:!0})).makeHtml(h);
c.html(e)}return c});d.setClosingAction(function(e){});d.setClosingChecker(function(){return!0})}}function K(g,d){function c(v,f){KTDefaultCellRender.call(this,v);var t=this,m=this.paintCellUI;this.paintCellUI=function(u,y){if(t.getCurrentRowIdx()<A.getHeadRowCount()||!t.getCell())m(u,y);else if(3==t.getCurrentColIdx()){u=$(u);var I=t.getCurrentRow().getUserObject();y=$("<div>");y.text("\u7ed3\u675f");y.addClass("profiler-btn-in-tablecell");y.addClass("profiler-cmd-btn-cancel");y.appendTo(u);y.on("click",
function(S){k(I,q)});f&&(y=$("<div>"),y.text("\u8ffd\u52a0"),y.addClass("profiler-btn-in-tablecell"),y.css("left","50px"),y.appendTo(u),y.on("click",function(S){l(I)}))}else m(u,y)}}sa.call(this);var h=this,e=this.protectedMethod,a,b,k,l,q=function(){A.clearWithoutHead(a);for(var v=0;v<g.length;v++){var f=A.createRow(a);f.setHeight(23);f.setUserObject(g[v]);f.getCell(0).setValue(g[v].getClientId());f.getCell(1).setValue(g[v].getCmd().getName());f.getCell(2).setValue(g[v].getCmdParams());f.getCell(3).setValue("")}A.refresh(a)};
this.setCancelFunction=function(v){k=v};this.setAppendEnhanceFunction=function(v){l=v};this.refrehTable=function(){A.refresh(a)};this.initUi=function(){e.setTitle("\u5f53\u524d\u8fd0\u884c\u547d\u4ee4");h.setSize(600,250);e.setContentPaneCreator(function(){if(!b){b=$("<div>");a=A.createTable();A.bindTableListenerForCtrl(a);a.setSyncUIWhenModelChanged(!0);var v=new c(a,d);v.setOutsideVisible(!0);a.setCellRender(v);v=a.getSelectionModel();v.setMode(KTSelectionModel.MODE_SINGLE);v.setPolicy(KTSelectionModel.POLICY_ROW);
a.addColumns(4);a.getColumn(0).setWidth(150);a.getColumn(1).setWidth(100);a.getColumn(2).setWidth(200);a.getColumn(3).setWidth(100);v=A.createHeadRow(a);v.getCell(0).setValue("REQUEST ID");v.getCell(1).setValue("CMD NAME");v.getCell(2).setValue("PARAMS");v.getCell(3).setValue("");q();b.append($(a.getUI()))}return b});e.setClosingAction(function(v){});e.setClosingChecker(function(){return!0})}}function N(g){ka.AbstractTabPane.call(this);var d=this,c,h,e=new qa,a,b,k,l=[];this.getTitle=function(){return g.getDisplayName()};
this.getJqUi=function(){if(!c){c=$("<div>");d.protectedInnitToolBar(e);g.isHistoryCmdReservable()&&e.addButtonForTailCustom(q,"","\u67e5\u770b\u5386\u53f2\u547d\u4ee4","");c.append(e.getJqUi());var f=$("<div>");f.addClass("cmd-result-displayer");h=d.protectedInitResultDisplayer();h.setRemoteImpl(b);h.setMessageContainer(a.getConductor().getMessageCurtain());f.append(h.getJqUi());c.append(f)}return c};var q=function(){var f=new R(l);f.initUI();f.showDialog()};this.protectedInnitToolBar=function(f){throw Error("override me");
};this.refreshServer=function(f){h&&h.refreshServer(f)};this.clearInterval=function(){if(h){for(var f=h.getRunningCmds(),t=0;t<f.length;t++){var m=f[t].getInterVal();m&&clearInterval(m)}f.splice(0,f.length)}};this.protectedInitResultDisplayer=function(){var f=g.getCmdModel();switch(f.getCmdResultType()){case aa.TEXT_RESULT:case aa.ENHANCE:return f.getServerRegion()==Y.EXECUTE_ALL_SERVER?new Ma(g,k):new Fa(g);case aa.DASHBOARD_RESULT:return new La(k);case aa.HEAPDUMP:return new ra(g);case aa.MONITOR_RESULT:return new Ja;
case aa.CPUSAMPLE:return new Na(k);case aa.TRACE:return new Ba;case aa.KEYVALUE:return new p}return null};this.setServerIps=function(f){k=f};this.into=function(){h.focusMe()};this.setParent=function(f){a=f};this.setRemote=function(f){b=f};this.clearOnLogout=function(){};this.resize=function(){};this.protectedExecuteCmd=function(){throw Error("override me");};var v=function(f,t){(new Z(b,function(m){if(m){var u=new za;u.fromJsonObject(m);a.getConductor().getMessageCurtain().showSuccess("cmd cancled:"+
g.getName());h.handleStopCmdSuccess(f,u);t&&t()}},function(m,u,y){return h.handleStopCmdError(f,m,u)})).cancelCmdExecution(g.getName(),f.getClientId())};this.getHistoryCmd=function(){return l};this.protectedMethod={getRunningCmds:function(){return h.getRunningCmds()},executeCmdAction:function(){d.protectedExecuteCmd()},doCancelOneCmd:v,cancelCmdAction:function(){var f=h.getRunningCmds();f&&0!=f.length?1==f.length&&v(f[0]):a.getConductor().getMessageCurtain().showPrompt("no cmd executing")},clearResult:function(){h.clearData()},
getServerAddresses:function(){return k},displayRunningCmds:function(){var f=new K(h.getRunningCmds(),!1);f.setCancelFunction(v);f.initUi();f.showDialog();f.refrehTable()},getCmd:function(){return g},submitCmd:function(f){g.isHistoryCmdReservable()&&l.push(f);var t=f.getCmd(),m=f.getRequestId(),u=f.getCmdParams();(new Z(b,function(y){if(y){var I=new za;I.fromJsonObject(y);h.handleCmdSubmitSuccess(f,I);return!0}},function(y,I,S){return h.handleCmdSubmitError(y,I,f)})).executeCmd(t.getName(),m,f.getServerIp(),
u)},refreshMiddleCmdResult:function(f){h.refreshMiddleCmdResult(f)},getRemote:function(){return b},showMessage:function(f,t){0==t?a.getConductor().getMessageCurtain().showSuccess(f):1==t?a.getConductor().getMessageCurtain().showPrompt(f):a.getConductor().getMessageCurtain().showError(f)},getHelpContent:function(){(new Z(b,function(f){if(f){var t=new L;t.initUi(f);t.showDialog()}},function(f,t,m){return!1})).getHelp(g.getName())}}}function ha(){var g,d,c,h,e={},a=[],b=[];this.setServers=function(k){a=
k};this.setSupportedCmds=function(k){for(var l=0;l<k.length;l++){var q=new Y;q.fromJsonObject(k[l]);for(var v=0;v<fa.CMDTYPES.length;v++)if(fa.CMDTYPES[v].getName()==q.getCmdName()){fa.CMDTYPES[v].setCmdModel(q);b.push(fa.CMDTYPES[v]);break}}};this.refreshNewStartedServer=function(k){for(var l=0;l<k.length;l++)0>a.indexOf(k[l])&&a.push(k[l]);for(l=0;l<b.length;l++)e[b[l].getName()].refreshServer(k)};this.clearAllOnLogout=function(){for(var k=0;k<b.length;k++)e[b[k].getName()].clearInterval()};this.getJqUi=
function(){if(!g){g=$("<div>");g.addClass("profiler-main");d=new ka;d.setTabLevel(ka.SECOND_LEVEL);for(var k=0;k<b.length;k++){var l=b[k],q=l.getCmdModel();"async_profiler"==l.getName()?e[l.getName()]=new C(l):"trace"==l.getName()?e[l.getName()]=new H(l):"samplecpu"==l.getName()?e[l.getName()]=new x(l):q.getCmdType()==Y.REALTIME_TYPE?e[l.getName()]=new r(l):e[l.getName()]=new D(l);e[l.getName()].setParent(h);e[l.getName()].setRemote(c);e[l.getName()].setServerIps(a);q=0==k?!0:!1;d.addTab(e[l.getName()],
q)}g.append(d.getJqUi())}return g};this.setParent=function(k){h=k};this.setRemoteImpl=function(k){c=k};this.doResize=function(){d.getCurrentTabPane().resize()}}function ia(g){var d=this,c,h=!0,e;this.getJqUi=function(){if(!c)return c=$("<div>"),c.text(g),c.addClass("profiler-sa-ctrl-tbbtn"),c.on("click",a),c};this.setActionListener=function(b){e=b};var a=function(){h&&e&&e(d)};this.setText=function(b){c.text(b)};this.setEnabled=function(b){(h=b)?(c.addClass("profiler-sa-ctrl-tbbtn_enabled"),c.removeClass("profiler-sa-ctrl-tbbtn_disabled")):
(c.addClass("profiler-sa-ctrl-tbbtn_disabled"),c.removeClass("profiler-sa-ctrl-tbbtn_enabled"))}}function qa(){var g,d=$("<div>"),c=$("<div>"),h=$("<div>");this.getJqUi=function(){g||(g=$("<div>"),g.addClass("profiler-toolbar"),d.addClass("profiler-toolbar-sub"),d.appendTo(g),c.addClass("profiler-toolbar-sub"),c.appendTo(g),h.addClass("profiler-toolbar-sub"),h.appendTo(g));return g};this.addSeperator=function(){e(c)};this.addSeperatorForHeadCustom=function(){e(d)};this.addButton=function(b,k,l,q){return a(c,
!1,b,k,l,q)};this.addButtonForHeadCustom=function(b,k,l,q){return a(d,!1,b,k,l,q)};this.addButtonForTailCustom=function(b,k,l,q){return a(h,!1,b,k,l,q)};this.addMenuButtonForTailCustom=function(b,k,l,q){return a(h,!0,b,k,l,q)};var e=function(b){var k=$("<div>");k.addClass("profiler-toolbar-seperator");k.appendTo(b)},a=function(b,k,l,q,v,f){k=new ia(v);k.setActionListener(l);k.getJqUi().appendTo(b);return k}}function Aa(g,d){this.getMessageCurtain=function(){return d.messageCurtain};this.insertToolbarButton=
function(c,h,e,a){return g.addButtonForHeadCustom(c,h,e,a)};this.appendToolbarButton=function(c,h,e,a){return g.addButtonForTailCustom(c,h,e,a)};this.insertToolbarSeperator=function(){g.addSeperatorForHeadCustom()};this.insertToolbarMenu=function(c,h,e,a){return g.addMenuButtonForHeadCustom(function(){return c},h,e,a)};this.appendToolbarMenu=function(c,h,e,a){return g.addMenuButtonForTailCustom(function(){return c},h,e,a)};this.setDirtyListener=function(c){d.hookDirtyListener(c)};this.clearDirty=
function(){d.setDirty(!1)};this.isDirty=function(){return d.isDirty()}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.profiler&&(com.kingdee.bos.qing.profiler={});"undefined"==typeof com.kingdee.bos.qing.profiler.component&&(com.kingdee.bos.qing.profiler.component={});var hb=com.kingdee.bos.qing.profiler.component;
hb.ProfileMain=function(){var g=this,d,c,h=new qa,e,a=!1,b,k=new ib,l;this.createJqUi=function(){d||(d=$("<div>"),k.getJqUi().appendTo(d),h.getJqUi().appendTo(d));return d};this.setRemoteUrl=function(f){l=f};this.openServerStateDialog=function(f){var t=new ca;t.initUI(f);t.showDialog();t.refresh()};this.refreshStartedServer=function(f){c.refreshNewStartedServer(f)};this.login=function(f){var t=new z;t.setRemoteImpl(g.getRemoteImpl());var m=new F($(window.document.body));m.setSize(312,200);t.setMessageDialog(m);
m.dialog("\u767b\u5f55",t.getJqUi(),function(u){u&&(new Z(g.getRemoteImpl(),function(y){if(!y)return t.showMessage("error exist after login ",5E3,"#f62222"),!0;var I=y.supportedCmds;y=y.currentRunningServers;c=new ha;c.setServers(y);c.setSupportedCmds(I);c.setParent(g);c.setRemoteImpl(g.getRemoteImpl());d.append(c.getJqUi());m.destroy();f.setText("\u9000\u51fa");f.setActionListener(q);return!0},function(y,I,S){m.destroy();y=Ea.createFeedbackDialog();y.setOptionType(Ea.OPTION_OK);y.setMsgImageType(Ea.MSG_WRONG);
y.setButtonText(Ea.OPTION_OK,Qa.get("iknow","\u6211\u77e5\u9053\u4e86"));y.setMessage(I);y.setDetail(S);y.showDialog();return!0})).login(t.getAccount(),t.getPassword())})};var q=function(f){g.logout(function(){c.clearAllOnLogout();d.find(".profiler-main").remove();f.setText("\u767b\u5f55");f.setActionListener(function(t){g.login(t)})})};this.logout=function(f){(new Z(g.getRemoteImpl(),f)).logout()};this.getRemoteImpl=function(){var f=new jb;f.setRemoteUrl(l);return f};this.reSize=function(){};this.getConductor=
function(){if(!e){var f={};f.messageCurtain=k;f.setDirty=v;f.isDirty=function(){return a};f.hookDirtyListener=function(t){b=t};e=new Aa(h,f)}return e};var v=function(f){a=f;b&&b(a)}};var Sa,V,A,Ya,ka,Ta,Za,na,Va,Wa,la,Qa,ib,Ea,oa,ma,fa,aa,xa,Oa,za,db,gb,fb,Ra,Z,sa,eb,Ua,$a,jb,Xa,Y,wa;(function(){var g=com.kingdee.bos.qing.common;Sa=g.Util;V=g.DomUtil;g=com.kingdee.bos.qing.framework.common;Qa=g.MultilanguageManager.createPackageAccessor(hb);g=com.kingdee.bos.qing.common.ui;A=g.TableUtil;g=com.kingdee.bos.qing.ui.component;
Ya=g.Dialog;ka=g.TabContainer;Ta=g.DynamicTabContainer;na=g.Label;Za=g.Button;Va=g.TextField;Wa=g.PasswordField;la=g.Tree;ib=g.MessageCurtain;Ea=g.MessageDialog;oa=g.TextArea;ma=g.SplitPane;Oa=g.ComboBox;sa=g.AbstractModalDialog;g=com.kingdee.bos.qing.profiler.common;xa=g.ExecutingCmd;fa=g.QingProfilerCmd;aa=g.CmdResult;$a=g.HeapDumpResult;za=g.CmdExecuteResponse;gb=g.DashboardResult;fb=g.AsyncProfilerResultFiles;Y=g.CmdModel;wa=g.CmdSubmitRequest;db=g.MethodStackTrace;eb=g.ThreadCpuSampleResult;
Ra=g.ListCmdResult;Ua=g.ClientIdInfoList;Z=g.ProfileFacade;jb=g.RemoteImpl;Xa=g.ProfileUtil})()})();(function(){"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.profiler&&(com.kingdee.bos.qing.profiler={});com.kingdee.bos.qing.profiler.ProfilerScene=function(){var B,w,O,W;(function(){var M=com.kingdee.bos.qing;B=M.CodeLoader;M=com.kingdee.bos.qing.framework.common;w=M.WebPageInitializer;O=M.WindowResizeObserver;
M=com.kingdee.bos.qing.profiler.component;W=M.ProfileMain})();var ba=this,R;this.start=function(M){B.setCallback(function(){w.init();ua();pa(M?M:document.body)});B.loadSkinJs("common","skin");B.loadSkinCss("common","qing-ui-component");B.loadSkinCss("qing-profile","profiler-ui-component");ba.protectedImportMoreCode(B)};this.getUrlParam=function(M){return com.kingdee.bos.qing.common.Util.decodeParamFromUrl(window.location.search,M)};this.protectedGetRemoteUrl=function(){throw Error("Override me.");
};this.protectedImportMoreCode=function(M){};this.protectedCustomInitEnv=function(){throw Error("Override me.");};var X=function(M){(new F(ba.getRemoteImpl(),function(T){M.getConductor().getMessageCurtain().showSuccess(T,2E3);return!0},function(T,ja,ra){M.getConductor().getMessageCurtain().showError(ja,2E3);return!0})).shutDownProfiler()},ca=function(M){(new F(ba.getRemoteImpl(),function(T){M.openServerStateDialog(T)},function(T,ja,ra){M.getConductor().getMessageCurtain().showError(ja);return!0})).searchServerState()},
ea=function(M){(new F(ba.getRemoteImpl(),function(T){if(T&&0<T.length)return M.refreshStartedServer(T),!0;M.getConductor().getMessageCurtain().showPrompt("no server started",2E3);return!0},function(T,ja,ra){M.getConductor().getMessageCurtain().showError(ja,2E3);return!0})).startProfiler()};this.protectedCustomInitDesigner=function(M){M.getConductor().insertToolbarButton(function(T){M.login(T)},"","\u767b\u5f55");M.getConductor().insertToolbarButton(function(T){ea(M)},"","\u542f\u52a8");M.getConductor().insertToolbarButton(function(T){X(M)},
"","\u505c\u6b62");M.getConductor().insertToolbarButton(function(T){ca(M)},"","\u670d\u52a1\u72b6\u6001")};this.getRemoteImpl=function(){var M=new z;M.setRemoteUrl(ba.protectedGetRemoteUrl());return M};var pa=function(M){R=new W;var T=new O;T.setCallbackImmediately(function(){ua()});T.setDelay(250);T.setCallback(function(){R.reSize()});T.observe();ba.protectedCustomInitDesigner(R);T=R.createJqUi();$(M).append(T);R.reSize();R.setRemoteUrl(ba.protectedGetRemoteUrl())},ua=function(){document.body.style.height=
document.documentElement.clientHeight+"px"}};var z,F;(function(){var B=com.kingdee.bos.qing.profiler.common;z=B.RemoteImpl;F=B.ProfileFacade})()})();
//qingVersionTag: 20250324