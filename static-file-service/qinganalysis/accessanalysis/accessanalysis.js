(function(){function R(){var x=this,E=0,F=0,p=0,t=0,G=0,H=0;this.setVisit=function(q){E=q};this.getVisit=function(){return E};this.setExport=function(q){F=q};this.getExport=function(){return F};this.setPrint=function(q){p=q};this.getPrint=function(){return p};this.setPublish=function(q){t=q};this.getPublish=function(){return t};this.setPush=function(q){G=q};this.getPush=function(){return G};this.setTotal=function(q){H=q};this.getTotal=function(){return H};this.fromJsonObject=function(q){q&&(x.setVisit(q.visit),
x.setExport(q["export"]),x.setPrint(q.print),x.setPublish(q.publish),x.setPush(q.push),x.setTotal(q.total))};this.toJsonObject=function(){var q={};q.visit=E;q["export"]=F;q.print=p;q.publish=t;q.push=G;q.total=H;return q}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.accessanalysis&&(com.kingdee.bos.qing.accessanalysis=
{});"undefined"==typeof com.kingdee.bos.qing.accessanalysis.theme&&(com.kingdee.bos.qing.accessanalysis.theme={});"undefined"==typeof com.kingdee.bos.qing.accessanalysis.theme.model&&(com.kingdee.bos.qing.accessanalysis.theme.model={});var S=com.kingdee.bos.qing.accessanalysis.theme.model;S.DataAccessModel=function(){R.call(this);var x,E,F,p,t,G,H,q,J,k;this.setId=function(n){x=n};this.getId=function(){return x};this.setPubName=function(n){E=n};this.getPubName=function(){return E};this.setPubPath=
function(n){F=n};this.getPubPath=function(){return F};this.setPubPathName=function(n){p=n};this.getPubPathName=function(){return p};this.setPubType=function(n){t=n};this.getPubType=function(){return t};this.setCreateTime=function(n){G=n};this.getCreateTime=function(){return G};this.setCreateTimeFormat=function(n){H=n};this.getCreateTimeFormat=function(){return H};this.setCreatorId=function(n){q=n};this.getCreatorId=function(){return q};this.setCreatorName=function(n){J=n};this.getCreatorName=function(){return J};
this.setSourceType=function(n){k=n};this.getSourceType=function(){return k};this.isPreset=function(){return"100000"==q};this.isTimedPush=function(){return"6"==t||"2"==t&&"lightapp"!=F};this.isLightApp=function(){return"2"==t};var D=this.fromJsonObject;this.fromJsonObject=function(n){n&&(D(n),x=n.id,E=n.pubName,F=n.pubPath,p=n.pubPathName,t=n.pubType,G=n.createTime,H=n.createTimeFormat,q=n.creatorId,J=n.creatorName,k=n.sourceType)};var K=this.toJsonObject;this.toJsonObject=function(){var n=K();n.id=
x;n.pubName=E;n.pubPath=F;n.pubPathName=p;n.pubType=t;n.createTime=G;n.createTimeFormat=H;n.creatorId=q;n.creatorName=J;n.sourceType=k;return n}};S.UserAccessModel=function(){R.call(this);var x,E;this.getUserId=function(){return x};this.getUserName=function(){return E};var F=this.fromJsonObject;this.fromJsonObject=function(t){t&&(F(t),x=t.userId,E=t.userName)};var p=this.toJsonObject;this.toJsonObject=function(){var t=p();t.userId=x;t.userName=E;return t}};S.OperationRecordModel=function(){var x,
E,F,p,t,G,H,q,J,k,D,K,n,U,P,T;this.setId=function(h){x=h};this.getId=function(){return x};this.setUserId=function(h){E=h};this.getUserId=function(){return E};this.setUserName=function(h){F=h};this.getUserName=function(){return F};this.setSourceId=function(h){p=h};this.getSourceId=function(){return p};this.setOperationType=function(h){t=h};this.getOperationType=function(){return t};this.setOperationTime=function(h){G=h};this.getOperationTime=function(){return G};this.setOperationTimeFormat=function(h){H=
h};this.getOperationTimeFormat=function(){return H};this.setPageId=function(h){q=h};this.getPageId=function(){return q};this.setSourceType=function(h){J=h};this.getSourceType=function(){return J};this.setAppType=function(h){k=h};this.getAppType=function(){return k};this.setPubName=function(h){D=h};this.getPubName=function(){return D};this.setPubType=function(h){K=h};this.getPubType=function(){return K};this.setPubPath=function(h){n=h};this.getPubPath=function(){return n};this.setPubPathName=function(h){U=
h};this.getPubPathName=function(){return U};this.setCreatorId=function(h){P=h};this.getCreatorId=function(){return P};this.setCreatorName=function(h){T=h};this.getCreatorName=function(){return T};this.isPreset=function(){return"100000"==P};this.isTimedPush=function(){return"6"==K||"2"==K&&"lightapp"!=n};this.isLightApp=function(){return"2"==K};this.fromJsonObject=function(h){h&&(x=h.id,E=h.userId,F=h.userName,p=h.sourceId,t=h.operationType,G=h.operationTime,H=h.operationTimeFormat,q=h.pageId,J=h.sourceType,
k=h.appType,D=h.pubName,K=h.pubType,n=h.pubPath,U=h.pubPathName,P=h.creatorId,T=h.creatorName)};this.toJsonObject=function(){var h={};h.id=x;h.userId=E;h.userName=F;h.sourceId=p;h.operationType=t;h.operationTime=G;h.operationTimeFormat=H;h.pageId=q;h.sourceType=J;h.appType=k;h.pubName=D;h.pubType=K;h.pubPath=n;h.pubPathName=U;h.creatorId=P;h.creatorName=T;return h}};S.OperationUtil=new function(){this.getOperationText=function(E){return E==M.QING_VISIT?N.get("look","\u67e5\u770b"):E==M.QING_EXPORT?
N.get("export","\u5bfc\u51fa"):E==M.QING_PRINT?N.get("print","\u6253\u5370"):E==M.QING_PUBLISH?N.get("publish","\u53d1\u5e03"):E==M.QING_PUSH?N.get("push","\u63a8\u9001\u914d\u7f6e"):N.get("MagicOperation","\u795e\u5947\u7684\u64cd\u4f5c")};var x;this.formatDateTime=function(E){null==x&&(x=new L,x.setFormatString("yyyy-MM-dd HH:mm:ss"));return x.format(E)}};var N,L,M;(function(){var x=com.kingdee.bos.qing.framework.common;N=x.MultilanguageManager.createPackageAccessor(com.kingdee.bos.qing.accessanalysis.theme);
x=com.kingdee.bos.qing.common;L=x.DateFormater;x=com.kingdee.bos.qing.behavior;M=x.BehaviorManager.OperationType})()})();(function(){"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.accessanalysis&&(com.kingdee.bos.qing.accessanalysis={});"undefined"==typeof com.kingdee.bos.qing.accessanalysis.theme&&(com.kingdee.bos.qing.accessanalysis.common={});"undefined"==typeof com.kingdee.bos.qing.accessanalysis.theme.common&&
(com.kingdee.bos.qing.accessanalysis.theme.common={});var R=com.kingdee.bos.qing.accessanalysis.theme.common;R.AccessAnalysisFacade=function(L,M,x,E){S.call(this,L,M,x,E);var F=this.protectedMethod;F.setShowBlocking(!0);this.getNumberOfOperationsByAggUser=function(p,t,G,H,q,J,k){p={userIds:JSON.stringify(p),startTime:t,endTime:G,field:H,order:q,targetPage:J,pageSize:k,timeZone:(new Date).getTimezoneOffset()/60};F.remote("getNumberOfOperationsByAggUser",p)};this.getNumberOfOperationsBySingleUserAggPublish=
function(p,t,G,H,q,J,k){p={userId:p,startTime:t,endTime:G,field:H,order:q,targetPage:J,pageSize:k,timeZone:(new Date).getTimezoneOffset()/60};F.remote("getNumberOfOperationsBySingleUserAggPublish",p)};this.getOperationRecordBySingleUserAndOperationType=function(p,t,G,H,q,J,k,D){p={userId:p,operationType:t,startTime:G,endTime:H,field:q,order:J,targetPage:k,pageSize:D,timeZone:(new Date).getTimezoneOffset()/60};F.remote("getOperationRecordBySingleUserAndOperationType",p)};this.getOperationRecordByUserAndPublish=
function(p,t,G,H,q,J,k,D,K,n){p={id:p,pubPath:t,userId:G,operationType:H,startTime:q,endTime:J,field:k,order:D,targetPage:K,pageSize:n,timeZone:(new Date).getTimezoneOffset()/60};F.remote("getOperationRecordByUserAndPublish",p)};this.getNumberOfOperationsByAggPublish=function(p,t,G,H,q,J,k){p={selectedValue:JSON.stringify(p),startTime:t,endTime:G,field:H,order:q,targetPage:J,pageSize:k,timeZone:(new Date).getTimezoneOffset()/60};F.remote("getNumberOfOperationsByAggPublish",p)};this.getNumberOfOperationsBySinglePublishAggUser=
function(p,t,G,H,q,J,k,D){p={id:p,pubPath:t,startTime:G,endTime:H,field:q,order:J,targetPage:k,pageSize:D,timeZone:(new Date).getTimezoneOffset()/60};F.remote("getNumberOfOperationsBySinglePublishAggUser",p)};this.getOperationRecordBySinglePublishAndOperationType=function(p,t,G,H,q,J,k,D,K){p={id:p,pubPath:t,operationType:G,startTime:H,endTime:q,field:J,order:k,targetPage:D,pageSize:K,timeZone:(new Date).getTimezoneOffset()/60};F.remote("getOperationRecordBySinglePublishAndOperationType",p)};this.exportExcel=
function(p){p.timeZone=(new Date).getTimezoneOffset()/60;F.remote("exportExcel",p)};this.checkPermission=function(){var p={},t=R.AccessAnalysisAppendParams.getFunAppendMoreParams();t&&t(p);F.remote("checkPermission",p)}};R.RemoteImpl=function(){N.call(this);var L;this.getRemoteUrl=function(){return L};this.setRemoteUrl=function(M){L=M}};var S,N;(function(){var L=com.kingdee.bos.qing.framework.common;S=L.AbstractFacade;N=L.AbstractRemoteCall})();R.AccessAnalysisAppendParams=new function(){var L;this.addFunAppendMoreParams=
function(M){L=M};this.getFunAppendMoreParams=function(){return L}}})();(function(){function R(){p.call(this);var g=this,A,u,v,y;g.setSize(1200,570);var z=[k.get("PublishOrPushName","\u53d1\u5e03/\u63a8\u9001\u540d\u79f0"),k.get("PubPath","\u8def\u5f84"),k.get("viewTimes","\u67e5\u770b\u6b21\u6570"),k.get("exportTimes","\u5bfc\u51fa\u6b21\u6570"),k.get("printTimes","\u6253\u5370\u6b21\u6570"),k.get("publishTimes","\u53d1\u5e03\u6b21\u6570"),k.get("pushTimes","\u63a8\u9001\u914d\u7f6e\u6b21\u6570"),k.get("total","\u603b\u8ba1")];g.setHeadCellValueAndSize(z,[120,150,80,
85,80,85,80,80]);var B="pubName pubPathName qing_visit qing_export qing_print qing_publish qing_push qing_total".split(" ");g.setSortEnabled(B,2);g.setUnSortIndex([0,1]);this.cellShow=function(l,f,a,c,b){0==c?(l=$(l),f=$("<div>"),f.addClass("access-analysis-data-table-cell-left"),b.isPreset()&&(a=$("<div>"),a.text(k.get("preset","\u9884\u7f6e")),a.addClass("select-publish-name-preset-tag"),a.appendTo(l)),a=b.getPubName(),f.text(a),f.attr("title",a),l.append(f)):1==c?(l=$(l),f=$("<div>"),f.addClass("access-analysis-data-table-cell-left"),
a=b.getPubPathName(),f.text(a),f.attr("title",a),l.append(f)):2==c?(l=$(l),f=$("<div>"),f.addClass("access-analysis-data-table-cell-center"),a=b.getVisit(),C(f,a,b,h.QING_VISIT),l.append(f)):3==c?(l=$(l),f=$("<div>"),f.addClass("access-analysis-data-table-cell-center"),a="-",b.isLightApp()||"dashboard"==b.getSourceType()||(a=b.getExport()),C(f,a,b,h.QING_EXPORT),l.append(f)):4==c?(l=$(l),f=$("<div>"),f.addClass("access-analysis-data-table-cell-center"),a="-",b.isLightApp()||"dashboard"==b.getSourceType()||
(a=b.getPrint()),C(f,a,b,h.QING_PRINT),l.append(f)):5==c?(l=$(l),f=$("<div>"),f.addClass("access-analysis-data-table-cell-center"),a="-",b.isTimedPush()||b.isLightApp()||b.isPreset()||"dashboard"==b.getSourceType()||(a=b.getPublish()),C(f,a,b,h.QING_PUBLISH),l.append(f)):6==c?(l=$(l),f=$("<div>"),f.addClass("access-analysis-data-table-cell-center"),a="-",b.isTimedPush()||b.isLightApp()||b.isPreset()||"dashboard"==b.getSourceType()||(a=b.getPush()),C(f,a,b,h.QING_PUSH),l.append(f)):7==c&&(l=$(l),f=
$("<div>"),f.addClass("access-analysis-data-table-cell-center"),a=b.getTotal(),C(f,a,b),l.append(f))};var C=function(l,f,a,c){var b=$("<span>");0!=f&&"-"!=f&&(b.on("click",function(){var e=new N;e.setTitle(k.get("accessDetails","\u8bbf\u95ee\u660e\u7ec6"));e.setFilterConditions(a.getId(),a.getPubPath(),A,c,u,v);e.showDialog()}),b.addClass("access-analysis-click-open-panel"));b.text(f);b.appendTo(l)};this.remoteQueryData=function(l,f,a,c,b){(new D(g.getRemoteImpl(),function(e){y=e.totalRow;null==b?
g.getPaginationBar().resetPaginationAndJumpToFirstPage(y):b(y);e=e.data;var d=[];for(r in e){var m=new n;m.fromJsonObject(e[r]);d.push(m)}var r=function(){g.updateTable(d)};(new x).fixLappPublishInfo(d,r,r)},function(){})).getNumberOfOperationsBySingleUserAggPublish(A,u,v,l,f,a,c)};this.doExportData=function(l,f,a,c){var b={},e;for(e in z)b[z[e]]=B[e];l={exportData:Y.USER_INDEX_CLICK_NAME,tableHeads:JSON.stringify(z),headAndFieldMapping:JSON.stringify(b),userId:A,startTime:u,endTime:v,field:l,order:f};
a=new D(g.getRemoteImpl(),a,c);a.setBlockingPrompt(k.get("loading","\u6b63\u5728\u5bfc\u51fa..."));a.exportExcel(l)};this.setFilterConditions=function(l,f,a){A=l;u=f;v=a};this.getTotalRow=function(){return y}}function S(){p.call(this);var g=this,A,u,v,y,z;g.setSize(1E3,570);var B=[k.get("PublishOrPushName","\u53d1\u5e03/\u63a8\u9001\u540d\u79f0"),k.get("PubPath","\u8def\u5f84"),k.get("operationTime","\u64cd\u4f5c\u65f6\u95f4"),k.get("operationalBehavior","\u64cd\u4f5c\u884c\u4e3a")];g.setHeadCellValueAndSize(B,
[120,150,80,80]);var C=["pubName","pubPathName","operationTime","operationType"];g.setSortEnabled(C,2);g.setUnSortIndex([0,1,3]);this.cellShow=function(l,f,a,c,b){0==c?(l=$(l),f=$("<div>"),f.addClass("access-analysis-data-table-cell-left"),b.isPreset()&&(a=$("<div>"),a.text(k.get("preset","\u9884\u7f6e")),a.addClass("select-publish-name-preset-tag"),a.appendTo(l)),b=b.getPubName(),f.text(b),f.attr("title",b),l.append(f)):1==c?(l=$(l),f=$("<div>"),f.addClass("access-analysis-data-table-cell-left"),
b=b.getPubPathName(),f.text(b),f.attr("title",b),l.append(f)):2==c?(l=$(l),f=$("<div>"),f.addClass("access-analysis-data-table-cell-left"),b=b.getOperationTimeFormat(),f.text(b),f.attr("title",b),l.append(f)):3==c&&(l=$(l),f=$("<div>"),f.addClass("access-analysis-data-table-cell-left"),b=T.getOperationText(b.getOperationType()),f.text(b),f.attr("title",b),l.append(f))};this.remoteQueryData=function(l,f,a,c,b){(new D(g.getRemoteImpl(),function(e){z=e.totalRow;null==b?g.getPaginationBar().resetPaginationAndJumpToFirstPage(z):
b(z);e=e.data;var d=[];for(r in e){var m=new P;m.fromJsonObject(e[r]);d.push(m)}var r=function(){g.updateTable(d)};(new x).fixLappPublishInfo(d,r,r)},function(){})).getOperationRecordBySingleUserAndOperationType(A,u,v,y,l,f,a,c)};this.doExportData=function(l,f,a,c){var b={},e;for(e in B)b[B[e]]=C[e];l={exportData:Y.USER_INDEX_CLICK_TYPE,tableHeads:JSON.stringify(B),headAndFieldMapping:JSON.stringify(b),userId:A,operationType:u,startTime:v,endTime:y,field:l,order:f};a=new D(g.getRemoteImpl(),a,c);
a.setBlockingPrompt(k.get("loading","\u6b63\u5728\u5bfc\u51fa..."));a.exportExcel(l)};this.setFilterConditions=function(l,f,a,c){A=l;u=f;v=a;y=c};this.getTotalRow=function(){return z}}function N(){p.call(this);var g=this,A,u,v,y,z,B,C;g.setSize(500,570);var l=[k.get("operationTime","\u64cd\u4f5c\u65f6\u95f4"),k.get("operationalBehavior","\u64cd\u4f5c\u884c\u4e3a")];g.setHeadCellValueAndSize(l,[150,100]);var f=["operationTime","operationType"];g.setSortEnabled(f,0);g.setUnSortIndex([1]);this.cellShow=
function(a,c,b,e,d){0==e?(a=$(a),c=$("<div>"),c.addClass("access-analysis-data-table-cell-left"),d=d.getOperationTimeFormat(),c.text(d),c.attr("title",d),a.append(c)):1==e&&(a=$(a),c=$("<div>"),c.addClass("access-analysis-data-table-cell-left"),d=T.getOperationText(d.getOperationType()),c.text(d),c.attr("title",d),a.append(c))};this.remoteQueryData=function(a,c,b,e,d){(new D(g.getRemoteImpl(),function(m){C=m.totalRow;null==d?g.getPaginationBar().resetPaginationAndJumpToFirstPage(C):d(C);m=m.data;
var r=[],w;for(w in m){var I=new P;I.fromJsonObject(m[w]);r.push(I)}g.updateTable(r)},function(){})).getOperationRecordByUserAndPublish(A,u,v,y,z,B,a,c,b,e)};this.doExportData=function(a,c,b,e){var d={},m;for(m in l)d[l[m]]=f[m];a={exportData:Y.OPERATION_TIME_AND_TYPE,tableHeads:JSON.stringify(l),headAndFieldMapping:JSON.stringify(d),id:A,pubPath:u,userId:v,operationType:y,startTime:z,endTime:B,field:a,order:c};b=new D(g.getRemoteImpl(),b,e);b.setBlockingPrompt(k.get("loading","\u6b63\u5728\u5bfc\u51fa..."));
b.exportExcel(a)};this.setFilterConditions=function(a,c,b,e,d,m){A=a;u=c;v=b;y=e;z=d;B=m};this.getTotalRow=function(){return C}}function L(){p.call(this);var g=this,A,u,v,y,z,B=!0,C=!0,l=!0,f=!0;g.setSize(1E3,570);var a=[k.get("visitor","\u8bbf\u95ee\u8005"),k.get("viewTimes","\u67e5\u770b\u6b21\u6570"),k.get("exportTimes","\u5bfc\u51fa\u6b21\u6570"),k.get("printTimes","\u6253\u5370\u6b21\u6570"),k.get("publishTimes","\u53d1\u5e03\u6b21\u6570"),k.get("pushTimes","\u63a8\u9001\u914d\u7f6e\u6b21\u6570"),
k.get("total","\u603b\u8ba1")];g.setHeadCellValueAndSize(a,[120,80,80,80,80,80,80]);var c="userName qing_visit qing_export qing_print qing_publish qing_push qing_total".split(" ");g.setSortEnabled(c,1);g.setUnSortIndex([0]);this.cellShow=function(e,d,m,r,w){0===r?(e=$(e),d=$("<div>"),d.addClass("access-analysis-data-table-cell-left"),m=w.getUserName(),d.text(m),d.attr("title",m),e.append(d)):1===r?(e=$(e),d=$("<div>"),d.addClass("access-analysis-data-table-cell-center"),m=w.getVisit(),b(d,m,w,h.QING_VISIT),
e.append(d)):2===r?(e=$(e),d=$("<div>"),d.addClass("access-analysis-data-table-cell-center"),m="-",B&&(m=w.getExport()),b(d,m,w,h.QING_EXPORT),e.append(d)):3===r?(e=$(e),d=$("<div>"),d.addClass("access-analysis-data-table-cell-center"),m="-",C&&(m=w.getPrint()),b(d,m,w,h.QING_PRINT),e.append(d)):4===r?(e=$(e),d=$("<div>"),d.addClass("access-analysis-data-table-cell-center"),m="-",l&&(m=w.getPublish()),b(d,m,w,h.QING_PUBLISH),e.append(d)):5===r?(e=$(e),d=$("<div>"),d.addClass("access-analysis-data-table-cell-center"),
m="-",f&&(m=w.getPush()),b(d,m,w,h.QING_PUSH),e.append(d)):6===r&&(e=$(e),e.addClass("access-analysis-data-table-cell-btb"),d=$("<div>"),d.addClass("access-analysis-data-table-cell-center"),m=w.getTotal(),b(d,m,w),e.append(d))};var b=function(e,d,m,r){var w=$("<span>");0!=d&&"-"!=d&&(w.addClass("access-analysis-click-open-panel"),w.on("click",function(){var I=new N;I.setTitle(k.get("accessDetails","\u8bbf\u95ee\u660e\u7ec6"));I.setFilterConditions(A,u,m.getUserId(),r,v,y);I.showDialog()}));w.text(d);
w.appendTo(e)};this.remoteQueryData=function(e,d,m,r,w){(new D(g.getRemoteImpl(),function(I){z=I.totalRow;null==w?g.getPaginationBar().resetPaginationAndJumpToFirstPage(z):w(z);I=I.data;var V=[],W;for(W in I){var X=new U;X.fromJsonObject(I[W]);V.push(X)}g.updateTable(V)},function(){})).getNumberOfOperationsBySinglePublishAggUser(A,u,v,y,e,d,m,r)};this.doExportData=function(e,d,m,r){var w={},I;for(I in a)w[a[I]]=c[I];e={exportData:Y.DATA_INDEX_CLICK_NAME,tableHeads:JSON.stringify(a),headAndFieldMapping:JSON.stringify(w),
id:A,pubPath:u,startTime:v,endTime:y,field:e,order:d,showExport:B,showPrint:C,showPublish:l,showPush:f};m=new D(g.getRemoteImpl(),m,r);m.setBlockingPrompt(k.get("loading","\u6b63\u5728\u5bfc\u51fa..."));m.exportExcel(e)};this.setFilterConditions=function(e,d,m,r){A=e;u=d;v=m;y=r};this.setShowOperation=function(e,d,m,r){B=e;C=d;l=m;f=r};this.getTotalRow=function(){return z}}function M(){p.call(this);var g=this,A,u,v,y,z,B;g.setSize(1E3,570);var C=[k.get("visitor","\u8bbf\u95ee\u8005"),k.get("operationTime",
"\u64cd\u4f5c\u65f6\u95f4"),k.get("operationalBehavior","\u64cd\u4f5c\u884c\u4e3a")];g.setHeadCellValueAndSize(C,[90,80,50]);var l=["userName","operationTime","operationType"];g.setSortEnabled(l,1);g.setUnSortIndex([0,2]);this.cellShow=function(f,a,c,b,e){0==b?(f=$(f),a=$("<div>"),a.addClass("access-analysis-data-table-cell-left"),e=e.getUserName(),a.text(e),a.attr("title",e),f.append(a)):1==b?(f=$(f),a=$("<div>"),a.addClass("access-analysis-data-table-cell-left"),e=e.getOperationTimeFormat(),a.text(e),
a.attr("title",e),f.append(a)):2==b&&(f=$(f),a=$("<div>"),a.addClass("access-analysis-data-table-cell-left"),e=T.getOperationText(e.getOperationType()),a.text(e),a.attr("title",e),f.append(a))};this.remoteQueryData=function(f,a,c,b,e){(new D(g.getRemoteImpl(),function(d){B=d.totalRow;null==e?g.getPaginationBar().resetPaginationAndJumpToFirstPage(B):e(B);d=d.data;var m=[],r;for(r in d){var w=new P;w.fromJsonObject(d[r]);m.push(w)}g.updateTable(m)},function(){})).getOperationRecordBySinglePublishAndOperationType(A,
u,v,y,z,f,a,c,b)};this.doExportData=function(f,a,c,b){var e={},d;for(d in C)e[C[d]]=l[d];f={exportData:Y.DATA_INDEX_CLICK_TYPE,tableHeads:JSON.stringify(C),headAndFieldMapping:JSON.stringify(e),id:A,pubPath:u,operationType:v,startTime:y,endTime:z,field:f,order:a};c=new D(g.getRemoteImpl(),c,b);c.setBlockingPrompt(k.get("loading","\u6b63\u5728\u5bfc\u51fa..."));c.exportExcel(f)};this.setFilterConditions=function(f,a,c,b,e){A=f;u=a;v=c;y=b;z=e};this.getTotalRow=function(){return B}}function x(){this.fixLappPublishInfo=
function(u,v,y){var z={},B=[],C=[],l;for(l in u){var f=u[l];if(!f.isTimedPush()&&f.isLightApp()){var a=null;f instanceof n?a=f.getId():f instanceof P&&(a=f.getSourceId());B.push(a);C.push(f)}}0<B.length?(u=A()+"/qing/lappPrivateInfo.do",F.setLappPrivateUrl(u),F.getLappPublishInfosByPublishIds(g(),B,function(c){for(var b in c){var e=c[b];z[e.publishId]=e}for(b in C)if(c=C[b],e=null,c instanceof n?e=c.getId():c instanceof P&&(e=c.getSourceId()),e=z[e])c.setPubName(e.name),c.setPubPath(e.parentId),c.setPubPathName("\u79fb\u52a8\u8f7b\u5e94\u7528\uff1a"+
e.directoryName);v()},function(c,b){y&&y(c,b);return!0})):v()};var g=function(){var u=A()+"/qing/publishTo.do",v=new K;v.setRemoteUrl(u);return v},A=function(){var u=J.decodeParamFromUrl(location.search,"path");return u?u:"/ierp"}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.accessanalysis&&(com.kingdee.bos.qing.accessanalysis=
{});"undefined"==typeof com.kingdee.bos.qing.accessanalysis.theme&&(com.kingdee.bos.qing.accessanalysis.theme={});var E=com.kingdee.bos.qing.accessanalysis.theme;E.UAccessAnalysisAggUserIndex=function(){q.call(this);t.call(this);var g=this,A,u=[],v,y,z;var B=[k.get("visitor","\u8bbf\u95ee\u8005"),k.get("viewTimes","\u67e5\u770b\u6b21\u6570"),k.get("exportTimes","\u5bfc\u51fa\u6b21\u6570"),k.get("printTimes","\u6253\u5370\u6b21\u6570"),k.get("publishTimes","\u53d1\u5e03\u6b21\u6570"),k.get("pushTimes",
"\u63a8\u9001\u914d\u7f6e\u6b21\u6570"),k.get("total","\u603b\u8ba1")];g.setHeadCellValueAndSize(B,[80,80,80,80,80,80,80]);var C="userName qing_visit qing_export qing_print qing_publish qing_push qing_total".split(" ");g.setSortEnabled(C,1);g.setUnSortIndex([0]);g.setFilterTips(k.get("visitor","\u8bbf\u95ee\u8005"));this.createFilterContent=function(){A=new H;A.setConfirmClear(!1);A.setShowDisabledFilter(!0);var a=A.getJqUi();a.children(".sa-ctrl-textfield-input").css("width","86%");return a};this.cellShow=
function(a,c,b,e,d){0===e?(a=$(a),c=$("<div>"),c.addClass("access-analysis-data-table-cell-left"),b=d.getUserName(),l(c,b,d,0,h.QING_VISIT),c.attr("title",b),a.append(c)):1===e?(a=$(a),c=$("<div>"),c.addClass("access-analysis-data-table-cell-center"),b=d.getVisit(),l(c,b,d,1,h.QING_VISIT),a.append(c)):2===e?(a=$(a),c=$("<div>"),c.addClass("access-analysis-data-table-cell-center"),b=d.getExport(),l(c,b,d,2,h.QING_EXPORT),a.append(c)):3===e?(a=$(a),c=$("<div>"),c.addClass("access-analysis-data-table-cell-center"),
b=d.getPrint(),l(c,b,d,3,h.QING_PRINT),a.append(c)):4===e?(a=$(a),c=$("<div>"),c.addClass("access-analysis-data-table-cell-center"),b=d.getPublish(),l(c,b,d,4,h.QING_PUBLISH),a.append(c)):5===e?(a=$(a),c=$("<div>"),c.addClass("access-analysis-data-table-cell-center"),b=d.getPush(),l(c,b,d,5,h.QING_PUSH),a.append(c)):6===e&&(a=$(a),a.addClass("access-analysis-data-table-cell-btb"),c=$("<div>"),c.addClass("access-analysis-data-table-cell-center"),b=d.getTotal(),l(c,b,d,6),a.append(c))};var l=function(a,
c,b,e,d){var m=$("<span>");if(0==e||0!=c)m.addClass("access-analysis-click-open-panel"),m.on("click",function(){if(0==e){var r=new R;r.setTitle(k.get("accessRecords","\u8bbf\u95ee\u8bb0\u5f55")+"-"+b.getUserName());r.setFilterConditions(b.getUserId(),v,y);r.showDialog()}else r=new S,r.setTitle(k.get("accessDetails","\u8bbf\u95ee\u660e\u7ec6")+"-"+b.getUserName()),r.setFilterConditions(b.getUserId(),d,v,y),r.showDialog()});m.text(c);m.appendTo(a)},f=this.queryDataByFilter;this.queryDataByFilter=function(){var a=
A.getSelectedValue();u=[];for(var c=0;c<a.length;c++)u.push(a[c].getValue());a=g.getDateRangeSelect().getDateRange();v=a[0];y=a[1];a=new D(g.getRemoteImpl(),function(b){0==b?g.getMessageCurtain().showPrompt(k.get("noMenuPermission","\u60a8\u7684\u83dc\u5355\u6743\u9650\u5df2\u53d1\u751f\u53d8\u66f4\uff0c\u65e0\u6cd5\u7ee7\u7eed\u64cd\u4f5c\u3002")):f()});a.setShowBlocking(!0);a.checkPermission()};this.remoteQueryData=function(a,c,b,e,d){(new D(g.getRemoteImpl(),function(m){z=m.totalRow;null==d?g.getPaginationBar().resetPaginationAndJumpToFirstPage(z):
d(z);var r=0,w=0,I=0,V=0,W=0,X=0;m=m.data;var Z=[],Q;for(Q in m){var O=new U;O.fromJsonObject(m[Q]);Z.push(O);r+=O.getVisit();w+=O.getExport();I+=O.getPrint();V+=O.getPublish();W+=O.getPush();X+=O.getTotal()}g.updateTable(Z);g.relayout();r=[k.get("total","\u5408\u8ba1"),r,w,I,V,W,X];g.updateTotalComponent(r)},function(){})).getNumberOfOperationsByAggUser(u,v,y,a,c,b,e)};this.doExportData=function(a,c,b,e){var d={},m;for(m in B)d[B[m]]=C[m];a={exportData:Y.USER_INDEX,tableHeads:JSON.stringify(B),headAndFieldMapping:JSON.stringify(d),
userIds:JSON.stringify(u),startTime:v,endTime:y,field:a,order:c};b=new D(g.getRemoteImpl(),b,e);b.setBlockingPrompt(k.get("loading","\u6b63\u5728\u5bfc\u51fa..."));b.exportExcel(a)};this.getTotalRow=function(){return z}};E.DAccessAnalysisAggPublishIndex=function(){q.call(this);t.call(this);var g=this,A,u,v,y,z;var B=[k.get("PublishOrPushName","\u53d1\u5e03/\u63a8\u9001\u540d\u79f0"),k.get("PubPath","\u8def\u5f84"),k.get("createTime","\u521b\u5efa\u65f6\u95f4"),k.get("creator","\u521b\u5efa\u4eba"),
k.get("viewTimes","\u67e5\u770b\u6b21\u6570"),k.get("exportTimes","\u5bfc\u51fa\u6b21\u6570"),k.get("printTimes","\u6253\u5370\u6b21\u6570"),k.get("publishTimes","\u53d1\u5e03\u6b21\u6570"),k.get("pushTimes","\u63a8\u9001\u914d\u7f6e\u6b21\u6570"),k.get("total","\u603b\u8ba1")];g.setHeadCellValueAndSize(B,[80,80,80,80,80,80,80,80,80,80]);var C="pubName pubPathName createTime creatorName qing_visit qing_export qing_print qing_publish qing_push qing_total".split(" ");g.setSortEnabled(C,4);g.setUnSortIndex([0,
1,3]);g.setFilterTips(k.get("PublishOrPushName","\u53d1\u5e03/\u63a8\u9001\u540d\u79f0"));this.createFilterContent=function(){A=new G;var a=A.getJqUi();a.children(".sa-ctrl-textfield-input").css("width","86%");return a};this.cellShow=function(a,c,b,e,d){0==e?(a=$(a),c=$("<div>"),c.addClass("access-analysis-data-table-cell-left"),d.isPreset()&&(b=$("<div>"),b.text(k.get("preset","\u9884\u7f6e")),b.addClass("select-publish-name-preset-tag"),b.appendTo(a)),b=d.getPubName(),l(c,b,d,0),c.attr("title",
b),a.append(c)):1==e?(a=$(a),c=$("<div>"),c.addClass("access-analysis-data-table-cell-left"),b=d.getPubPathName(),c.text(b),c.attr("title",b),a.append(c)):2==e?(a=$(a),c=$("<div>"),c.addClass("access-analysis-data-table-cell-left"),b=d.getCreateTimeFormat(),c.text(b),c.attr("title",b),a.append(c)):3==e?(a=$(a),c=$("<div>"),c.addClass("access-analysis-data-table-cell-left"),b=d.getCreatorName(),c.text(b),c.attr("title",b),a.append(c)):4==e?(a=$(a),c=$("<div>"),c.addClass("access-analysis-data-table-cell-center"),
b=d.getVisit(),l(c,b,d,4,h.QING_VISIT),a.append(c)):5==e?(a=$(a),c=$("<div>"),c.addClass("access-analysis-data-table-cell-center"),b="-",d.isLightApp()||"dashboard"==d.getSourceType()||(b=d.getExport()),l(c,b,d,5,h.QING_EXPORT),a.append(c)):6==e?(a=$(a),c=$("<div>"),c.addClass("access-analysis-data-table-cell-center"),b="-",d.isLightApp()||"dashboard"==d.getSourceType()||(b=d.getPrint()),l(c,b,d,6,h.QING_PRINT),a.append(c)):7==e?(a=$(a),c=$("<div>"),c.addClass("access-analysis-data-table-cell-center"),
b="-",d.isTimedPush()||d.isLightApp()||d.isPreset()||"dashboard"==d.getSourceType()||(b=d.getPublish()),l(c,b,d,7,h.QING_PUBLISH),a.append(c)):8==e?(a=$(a),c=$("<div>"),c.addClass("access-analysis-data-table-cell-center"),b="-",d.isTimedPush()||d.isLightApp()||d.isPreset()||"dashboard"==d.getSourceType()||(b=d.getPush()),l(c,b,d,8,h.QING_PUSH),a.append(c)):9==e&&(a=$(a),c=$("<div>"),c.addClass("access-analysis-data-table-cell-center"),b=d.getTotal(),l(c,b,d,9),a.append(c))};var l=function(a,c,b,e,
d){var m=$("<span>");if(0==e||0!=c&&"-"!=c)m.on("click",function(){if(0==e){var r=!b.isLightApp()&&"dashboard"!=b.getSourceType(),w=!(b.isTimedPush()||b.isLightApp()||b.isPreset())&&"dashboard"!=b.getSourceType(),I=new L;I.setTitle(k.get("accessRecords","\u8bbf\u95ee\u8bb0\u5f55")+"-"+b.getPubName());I.setFilterConditions(b.getId(),b.getPubPath(),v,y);I.setShowOperation(r,r,w,w);I.showDialog()}else r=new M,r.setTitle(k.get("accessDetails","\u8bbf\u95ee\u660e\u7ec6")+"-"+b.getPubName()),r.setFilterConditions(b.getId(),
b.getPubPath(),d,v,y),r.showDialog()}),m.addClass("access-analysis-click-open-panel");m.text(c);m.appendTo(a)},f=this.queryDataByFilter;this.queryDataByFilter=function(){u=A.getSelectedValue();var a=g.getDateRangeSelect().getDateRange();v=a[0];y=a[1];a=new D(g.getRemoteImpl(),function(c){0==c?g.getMessageCurtain().showPrompt(k.get("noMenuPermission","\u60a8\u7684\u83dc\u5355\u6743\u9650\u5df2\u53d1\u751f\u53d8\u66f4\uff0c\u65e0\u6cd5\u7ee7\u7eed\u64cd\u4f5c\u3002")):f()});a.setShowBlocking(!0);a.checkPermission()};
this.remoteQueryData=function(a,c,b,e,d){(new D(g.getRemoteImpl(),function(m){z=m.totalRow;null==d?g.getPaginationBar().resetPaginationAndJumpToFirstPage(z):d(z);var r=0,w=0,I=0,V=0,W=0,X=0;m=m.data;var Z=[];for(O in m){var Q=new n;Q.fromJsonObject(m[O]);Z.push(Q);r+=Q.getVisit();w+=Q.getExport();I+=Q.getPrint();V+=Q.getPublish();W+=Q.getPush();X+=Q.getTotal()}var O=function(){g.updateTable(Z);var aa=[k.get("total","\u5408\u8ba1"),null,null,null,r,w,I,V,W,X];g.updateTotalComponent(aa);g.relayout()};
(new x).fixLappPublishInfo(Z,O,O)},function(){})).getNumberOfOperationsByAggPublish(u,v,y,a,c,b,e)};this.doExportData=function(a,c,b,e){var d={},m;for(m in B)d[B[m]]=C[m];a={exportData:Y.DATA_INDEX,tableHeads:JSON.stringify(B),headAndFieldMapping:JSON.stringify(d),selectedValue:JSON.stringify(u),startTime:v,endTime:y,field:a,order:c};b=new D(g.getRemoteImpl(),b,e);b.setBlockingPrompt(k.get("loading","\u6b63\u5728\u5bfc\u51fa..."));b.exportExcel(a)};this.getTotalRow=function(){return z}};var F,p,t,
G,H,q,J,k,D,K,n,U,P,T,h;(function(){var g=com.kingdee.bos.qing.timedpush;F=g.LappIntegration;g=com.kingdee.bos.qing.accessanalysis;p=g.AbstractAccessAnalysisDialog;t=g.AbstractAccessAnalysisIndex;G=g.PublishNameDialogSelector;H=g.UserDialogSelectorDisPlay;q=g.AbstractPage;g=com.kingdee.bos.qing.common;J=g.Util;g=com.kingdee.bos.qing.framework.common;k=g.MultilanguageManager.createPackageAccessor(E);g=com.kingdee.bos.qing.accessanalysis.theme.common;D=g.AccessAnalysisFacade;K=g.RemoteImpl;g=com.kingdee.bos.qing.accessanalysis.theme.model;
n=g.DataAccessModel;U=g.UserAccessModel;P=g.OperationRecordModel;T=g.OperationUtil;g=com.kingdee.bos.qing.behavior;h=g.BehaviorManager.OperationType})();var Y={USER_INDEX:0,USER_INDEX_CLICK_TYPE:1,USER_INDEX_CLICK_NAME:2,DATA_INDEX:3,DATA_INDEX_CLICK_TYPE:4,DATA_INDEX_CLICK_NAME:5,OPERATION_TIME_AND_TYPE:6}})();
//qingVersionTag: 20250324