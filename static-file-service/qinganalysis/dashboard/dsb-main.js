var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(p,Wb,kb){p instanceof String&&(p=String(p));for(var Mb=p.length,oc=0;oc<Mb;oc++){var Ub=p[oc];if(Wb.call(kb,Ub,oc,p))return{i:oc,v:Ub}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(p,Wb,kb){if(p==Array.prototype||p==Object.prototype)return p;p[Wb]=kb.value;return p};$jscomp.getGlobal=function(p){p=["object"==typeof globalThis&&globalThis,p,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var Wb=0;Wb<p.length;++Wb){var kb=p[Wb];if(kb&&kb.Math==Math)return kb}throw Error("Cannot find global object");};
$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(p,Wb){var kb=$jscomp.propertyToPolyfillSymbol[Wb];if(null==kb)return p[Wb];kb=p[kb];return void 0!==kb?kb:p[Wb]};
$jscomp.polyfill=function(p,Wb,kb,Mb){Wb&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(p,Wb,kb,Mb):$jscomp.polyfillUnisolated(p,Wb,kb,Mb))};$jscomp.polyfillUnisolated=function(p,Wb,kb,Mb){kb=$jscomp.global;p=p.split(".");for(Mb=0;Mb<p.length-1;Mb++){var oc=p[Mb];if(!(oc in kb))return;kb=kb[oc]}p=p[p.length-1];Mb=kb[p];Wb=Wb(Mb);Wb!=Mb&&null!=Wb&&$jscomp.defineProperty(kb,p,{configurable:!0,writable:!0,value:Wb})};
$jscomp.polyfillIsolated=function(p,Wb,kb,Mb){var oc=p.split(".");p=1===oc.length;Mb=oc[0];Mb=!p&&Mb in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var Ub=0;Ub<oc.length-1;Ub++){var lb=oc[Ub];if(!(lb in Mb))return;Mb=Mb[lb]}oc=oc[oc.length-1];kb=$jscomp.IS_SYMBOL_NATIVE&&"es6"===kb?Mb[oc]:null;Wb=Wb(kb);null!=Wb&&(p?$jscomp.defineProperty($jscomp.polyfills,oc,{configurable:!0,writable:!0,value:Wb}):Wb!==kb&&(void 0===$jscomp.propertyToPolyfillSymbol[oc]&&(kb=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[oc]=
$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(oc):$jscomp.POLYFILL_PREFIX+kb+"$"+oc),$jscomp.defineProperty(Mb,$jscomp.propertyToPolyfillSymbol[oc],{configurable:!0,writable:!0,value:Wb})))};$jscomp.polyfill("Array.prototype.find",function(p){return p?p:function(Wb,kb){return $jscomp.findInternal(this,Wb,kb).v}},"es6","es3");
$jscomp.polyfill("Array.prototype.fill",function(p){return p?p:function(Wb,kb,Mb){var oc=this.length||0;0>kb&&(kb=Math.max(0,oc+kb));if(null==Mb||Mb>oc)Mb=oc;Mb=Number(Mb);0>Mb&&(Mb=Math.max(0,oc+Mb));for(kb=Number(kb||0);kb<Mb;kb++)this[kb]=Wb;return this}},"es6","es3");$jscomp.typedArrayFill=function(p){return p?p:Array.prototype.fill};$jscomp.polyfill("Int8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Uint8ClampedArray.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Float32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Float64Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
(function(){function p(){var Va=this,ba=[];this.clone=function(){for(var t=new p,V=0;V<ba.length;V++){var la=ba[V].clone();t.addParagraph(la)}return t};this.getParagraphCount=function(){return ba.length};this.getParagraph=function(t){return ba[t]};this.addParagraph=function(t){ba.push(t)};this.insertParagraph=function(t){var V=new Wb;ba.splice(t,0,V);return V};this.getAllText=function(t,V){var la="";db(V,function(Qa,ca,na,k){ca=k.getText();V&&(Qa==V.getToParagraphIndex()&&na==V.getToContentIndex()&&
(ca=ca.substring(0,V.getToOffset())),Qa==V.getFromParagraphIndex()&&na==V.getFromContentIndex()&&(ca=ca.substring(V.getFromOffset())));la+=ca},function(){t&&(la+=t)});return la};this.getAllTextLength=function(t){var V=0;db(t,function(la,Qa,ca,na){V+=na.getTextLength();t&&(la==t.getFromParagraphIndex()&&ca==t.getFromContentIndex()&&(V-=t.getFromOffset()),la==t.getToParagraphIndex()&&ca==t.getToContentIndex()&&(V-=na.getTextLength()-t.getToOffset()))});return V};this.getScope=function(t){var V=[0,0];
if(t){var la=0,Qa=0;db(null,function(ca,na,k,Wa){ca==t.getFromParagraphIndex()&&k==t.getFromContentIndex()&&(V[0]=la+t.getFromOffset(),Qa++);ca==t.getToParagraphIndex()&&k==t.getToContentIndex()&&(V[1]=la+t.getToOffset(),Qa++);la+=Wa.getTextLength();return 2<=Qa})}return V};this.replaceText=function(t,V,la){t+=1;var Qa,ca,na=0;db(null,function(ta,Ra,Oa,Qb){Ra=na+Qb.getTextLength();!Qa&&Ra>=t&&(Qa=new oc(ta,Oa,t-na));!ca&&Ra>=V&&(ca=new oc(ta,Oa,V-na));na=Ra;return Qa&&ca?!0:!1});var k=ba[Qa.getParagraphIndex()].getContent(Qa.getContentIndex()),
Wa=Qa.getOffset()-1;Qa.update(Qa.getContentIndex(),Wa);jb(new Ub(Qa,ca));var fa=k.getText();k.setText(fa.substring(0,Wa)+la+fa.substring(Wa))};this.replaceVar=function(t,V,la){t+=1;var Qa,ca,na=0;db(null,function(Oa,Qb,Ka,$b){Qb=na+$b.getTextLength();!Qa&&Qb>=t&&(Qa=new oc(Oa,Ka,t-na));!ca&&Qb>=V&&(ca=new oc(Oa,Ka,V-na));na=Qb;return Qa&&ca?!0:!1});var k=ba[Qa.getParagraphIndex()].getContent(Qa.getContentIndex()),Wa=new kb;Wa.setText(la);Wa.brushStyleBy(k);Qa.update(Qa.getContentIndex(),Qa.getOffset()-
1);jb(new Ub(Qa,ca));la=Qa.getOffset();k=ba[Qa.getParagraphIndex()];if(0==la)k.insertContent(Qa.getContentIndex(),Wa);else{var fa=k.getContent(Qa.getContentIndex()),ta=fa.getText();if(ta.length>la){fa.setText(ta.substring(la));var Ra=new kb;Ra.setText(ta.substring(0,la));Ra.brushStyleBy(fa);k.insertContent(Qa.getContentIndex(),Ra)}k.insertContent(Qa.getContentIndex()+1,Wa)}return Wa};this.inputText=function(t,V,la){!t.isCollapse()&&jb(t);var Qa=t.getFromParagraphIndex(),ca=t.getFromParagraphIndex(),
na=t.getFromContentIndex(),k=t.getFromOffset();t=ba[ca];var Wa=t.getContent(na),fa=Wa.getText();Wa.setText(fa.substring(0,k));var ta=new kb;ta.setText(fa.substring(k));ta.brushStyleBy(Wa);t.insertContent(na+1,ta);na++;k=0;fa=V.length;for(ta=0;ta<fa;ta++){var Ra=V[ta];Cb.cleanInvalidChar(Ra,function(Oa){Ra=Oa});k=new kb;k.setText(Ra);k.brushStyleBy(Wa);la&&la.applyTo(k);t=ba[ca];t.insertContent(na,k);k=Ra.length;t=new Ub(new oc(ca,na,k));ta<fa-1&&(bb(t),ca++,k=na=0)}t=new Ub(new oc(ca,na,k));Aa(Qa,
ca,t);return t};this.inputCommand=function(t,V){var la=!t.isCollapse(),Qa=t.getFromParagraphIndex(),ca=Qa,na=Qa;switch(V){case 13:bb(t);la&&jb(t);var k=new oc(Qa+1,0,0);na=Qa+1;break;case 8:if(la)jb(t);else{k=t;ca=k.getFromParagraphIndex();na=k.getFromContentIndex();k=k.getFromOffset();V=ba[ca];if(0==k)if(0==na){if(0!=ca){var Wa=ba[ca-1];ba.splice(ca,1);ca--;na=Wa.getContentCount()-1;k=Wa.getContent(na).getTextLength();for(var fa=0;fa<V.getContentCount();fa++)la=V.getContent(fa),Wa.addContent(la)}}else k=
V.getContent(na-1),Wa=k.getText(),k.setText(Wa.substring(0,Wa.length-1)),na--,k=k.getTextLength();else la=V.getContent(na),Wa=la.getText(),la.setText(Wa.substring(0,k-1)+Wa.substring(k)),k--,0==k&&0<na&&(na--,k=V.getContent(na).getTextLength());k=new oc(ca,na,k);na=ca=k.getParagraphIndex()}break;case 46:if(la)jb(t);else{la=t;V=la.getFromParagraphIndex();Wa=la.getFromContentIndex();fa=la.getFromOffset();la=ba[V];var ta=la.getContent(Wa);if(fa==ta.getTextLength())if(Wa==la.getContentCount()-1){if(V!=
ba.length-1){Wa=ba[V+1];for(fa=0;fa<Wa.getContentCount();fa++)la.addContent(Wa.getContent(fa));ba.splice(V+1,1)}}else V=la.getContent(Wa+1),1<V.getTextLength()?V.setText(V.getText().substring(1)):la.removeContent(Wa+1);else V=ta.getText(),ta.setText(V.substring(0,fa)+V.substring(fa+1))}}k||(k=new oc(Qa,t.getFromContentIndex(),t.getFromOffset()));t=new Ub(k);Aa(ca,na,t);return t};this.changeParagraphStyle=function(t,V){for(var la=t.getFromParagraphIndex();la<=t.getToParagraphIndex();la++)V(ba[la])};
this.changeContentStyle=function(t,V){for(var la=t.getFromParagraphIndex(),Qa=t.getFromContentIndex(),ca=t.getFromOffset(),na=t.getToParagraphIndex(),k=t.getToContentIndex(),Wa=t.getToOffset(),fa=na;fa>=la;fa--){var ta=ba[fa],Ra=ta.getContentCount()-1;if(fa==na){var Oa=ta.getContent(k),Qb=Oa.getText();Oa.setText(Qb.substring(0,Wa));var Ka=new kb;Ka.setText(Qb.substring(Wa));Ka.brushStyleBy(Oa);ta.insertContent(k+1,Ka);Ra=k}Qb=0;fa==la&&(Oa=ta.getContent(Qa),Qb=Oa.getText(),Oa.setText(Qb.substring(ca)),
Ka=new kb,Ka.setText(Qb.substring(0,ca)),Ka.brushStyleBy(Oa),ta.insertContent(Qa,Ka),Ra++,Qb=Qa+1,t.updateStartPosition(Qa+1,0),la==na&&t.updateEndPosition(Ra,ta.getContent(Ra).getTextLength()));for(;Ra>=Qb;Ra--)Oa=ta.getContent(Ra),V(Oa)}Aa(la,na,t)};var bb=function(t){var V=t.getToParagraphIndex(),la=ba[V];V=Va.insertParagraph(V+1);V.brushStyleBy(la);for(var Qa=la.getContentCount()-1;Qa>t.getToContentIndex();Qa--){var ca=la.removeContent(Qa);V.insertContent(0,ca)}ca=la.getContent(t.getToContentIndex());
la=ca.getText().substring(t.getToOffset());ca.setText(ca.getText().substring(0,t.getToOffset()));t=new kb;t.setText(la);t.brushStyleBy(ca);V.insertContent(0,t)},jb=function(t){if(t.isInsideOneParagraph()){var V=ba[t.getFromParagraphIndex()];if(t.isInsideOneContent()){var la=V.getContent(t.getFromContentIndex());V=la.getText();la.setText(V.substring(0,t.getFromOffset())+V.substring(t.getToOffset()))}else for(la=V.getContent(t.getFromContentIndex()),la.setText(la.getText().substring(0,t.getFromOffset())),
la=V.getContent(t.getToContentIndex()),la.setText(la.getText().substring(t.getToOffset())),la=t.getToContentIndex()-1;la>t.getFromContentIndex();la--)V.removeContent(la)}else{V=ba[t.getFromParagraphIndex()];la=V.getContent(t.getFromContentIndex());la.setText(la.getText().substring(0,t.getFromOffset()));for(la=V.getContentCount()-1;la>t.getFromContentIndex();la--)V.removeContent(la);var Qa=ba[t.getToParagraphIndex()];la=Qa.getContent(t.getToContentIndex());la.setText(la.getText().substring(t.getToOffset()));
for(la=t.getToContentIndex()-1;0<=la;la--)Qa.removeContent(la);ba.splice(t.getFromParagraphIndex()+1,t.getToParagraphIndex()-t.getFromParagraphIndex());for(la=0;la<Qa.getContentCount();la++)V.addContent(Qa.getContent(la))}},Aa=function(t,V,la){for(;V>=t;V--)for(var Qa=ba[V],ca=null,na=Qa.getContentCount()-1;0<=na;na--){var k=Qa.getContent(na);if(k.isTextEmpty()&&1<Qa.getContentCount()){Qa.removeContent(na);if(V==la.getFromParagraphIndex())if(na<la.getFromContentIndex())la.updateStartPosition(la.getFromContentIndex()-
1);else if(na==la.getFromContentIndex()){k=0==na?0:na-1;var Wa=0==na?0:Qa.getContent(na-1).getTextLength();la.updateStartPosition(k,Wa)}V==la.getToParagraphIndex()&&(na<la.getToContentIndex()?la.updateEndPosition(la.getToContentIndex()-1):na==la.getToContentIndex()&&(k=0==na?0:na-1,Wa=0==na?0:Qa.getContent(na-1).getTextLength(),la.updateEndPosition(k,Wa)))}else ca&&k.isStyleDuplicated(ca)&&(Wa=k.getTextLength(),k.setText(k.getText()+ca.getText()),ca=na+1,Qa.removeContent(ca),V==la.getFromParagraphIndex()&&
(ca<la.getFromContentIndex()?la.updateStartPosition(la.getFromContentIndex()-1):ca==la.getFromContentIndex()&&la.updateStartPosition(la.getFromContentIndex()-1,Wa+la.getFromOffset())),V==la.getToParagraphIndex()&&(ca<la.getToContentIndex()?la.updateEndPosition(la.getToContentIndex()-1):ca==la.getToContentIndex()&&la.updateEndPosition(la.getToContentIndex()-1,Wa+la.getToOffset()))),ca=k}},db=function(t,V,la){for(var Qa=t?t.getFromParagraphIndex():0,ca=t?t.getToParagraphIndex():ba.length-1,na=Qa;na<=
ca;na++){na>Qa&&la&&la();for(var k=ba[na],Wa=t&&na==Qa?t.getFromContentIndex():0,fa=t&&na==ca?t.getToContentIndex():k.getContentCount()-1;Wa<=fa;Wa++){var ta=k.getContent(Wa);if(V(na,k,Wa,ta))return}}}}function Wb(){var Va=this,ba=[],bb="left",jb=1.5,Aa=0,db=0,t=0;this.getContentCount=function(){return ba.length};this.getContent=function(V){return ba[V]};this.removeContent=function(V){return ba.splice(V,1)[0]};this.addContent=function(V){ba.push(V)};this.insertContent=function(V,la){ba.splice(V,0,
la)};this.isTextEmpty=function(){for(var V=0;V<ba.length;V++)if(!ba[V].isTextEmpty())return!1;return!0};this.clone=function(){var V=new Wb;V.brushStyleBy(Va);for(var la=0;la<ba.length;la++){var Qa=ba[la].clone();V.addContent(Qa)}return V};this.brushStyleBy=function(V){bb=V.getAlign();jb=V.getLineHeight();Aa=V.getMarginBefore();db=V.getMarginAfter();t=V.getIndent()};this.getMaxFontSize=function(){for(var V=0,la=0;la<ba.length;la++)V=Math.max(V,ba[la].getFontSize());return V};this.getAlign=function(){return bb};
this.setAlign=function(V){bb=V};this.getLineHeight=function(){return jb};this.setLineHeight=function(V){jb=V};this.getMarginBefore=function(){return Aa};this.setMarginBefore=function(V){Aa=V};this.getMarginAfter=function(){return db};this.setMarginAfter=function(V){db=V};this.getIndent=function(){return t};this.setIndent=function(V){t=V}}function kb(){var Va=this,ba="",bb,jb=12,Aa=!1,db=!1,t,V;this.getText=function(){return ba};this.setText=function(la){ba=la};this.getTextLength=function(){return ba.length};
this.isTextEmpty=function(){return ba?!1:!0};this.clone=function(){var la=new kb;la.setText(ba);la.brushStyleBy(Va);return la};this.brushStyleBy=function(la){bb=la.getFontName();jb=la.getFontSize();Aa=la.isBold();db=la.isItalic();t=la.getColor()};this.isStyleDuplicated=function(la){return bb==la.getFontName()&&jb==la.getFontSize()&&Aa==la.isBold()&&db==la.isItalic()&&t==la.getColor()};this.getFontName=function(){return bb};this.setFontName=function(la){bb=la};this.getFontSize=function(){return jb};
this.setFontSize=function(la){jb=la};this.isBold=function(){return Aa};this.setBold=function(la){Aa=la};this.isItalic=function(){return db};this.setItalic=function(la){db=la};this.getColor=function(){return t};this.setColor=function(la){t=la};this.hookUiCustomDecorator=function(la){V=la};this.uiCustomDecorating=function(la){V&&V(la)}}function Mb(){kb.call(this);var Va=this;this.applyTo=function(ba){void 0!==Va.getFontName()&&ba.setFontName(Va.getFontName());void 0!==Va.getFontSize()&&ba.setFontSize(Va.getFontSize());
void 0!==Va.isBold()&&ba.setBold(Va.isBold());void 0!==Va.isItalic()&&ba.setItalic(Va.isItalic());void 0!==Va.getColor()&&ba.setColor(Va.getColor())}}function oc(Va,ba,bb){var jb=ba,Aa=bb;this.getParagraphIndex=function(){return Va};this.getContentIndex=function(){return jb};this.getOffset=function(){return Aa};this.update=function(db,t){jb=db;"number"==typeof t&&(Aa=t)};this.toString=function(){return Va+","+jb+","+Aa}}function Ub(Va,ba){var bb=this,jb=ba?ba:new oc(Va.getParagraphIndex(),Va.getContentIndex(),
Va.getOffset());this.isInsideOneParagraph=function(){return Va.getParagraphIndex()==jb.getParagraphIndex()};this.isInsideOneContent=function(){return bb.isInsideOneParagraph()&&Va.getContentIndex()==jb.getContentIndex()};this.isCollapse=function(){return bb.isInsideOneContent()&&Va.getOffset()==jb.getOffset()};this.getFromParagraphIndex=function(){return Va.getParagraphIndex()};this.getToParagraphIndex=function(){return jb.getParagraphIndex()};this.getFromContentIndex=function(){return Va.getContentIndex()};
this.getToContentIndex=function(){return jb.getContentIndex()};this.getFromOffset=function(){return Va.getOffset()};this.getToOffset=function(){return jb.getOffset()};this.updateStartPosition=function(Aa,db){Va.update(Aa,db)};this.updateEndPosition=function(Aa,db){jb.update(Aa,db)};this.toString=function(){return Va.toString()+"~"+jb.toString()}}function lb(){var Va=RegExp("\u21b5","gm"),ba=this,bb,jb,Aa="#333333",db="transparent";this.getJqUi=function(){jb||(jb=$("<div>"),jb.css("padding","4px 6px"),
jb.css("overflow-x","hidden"),jb.css("overflow-y","auto"),jb.css("white-space","pre-wrap"),bb&&t());return jb};this.setModel=function(V){bb=V;jb&&t()};this.setDefaultColor=function(V){Aa=V;ba.refresh()};this.getDefaultColor=function(){return Aa};this.setOccupierColor=function(V){db=V;jb&&jb.find(".occupier").css("color",db)};this.refresh=function(){bb&&jb&&t()};this.searchJqUiOfParagraphs=function(){return ba.getJqUi().children(".paragraph")};this.searchJqUiOfContents=function(V){return V?V.children(".content"):
ba.getJqUi().find(".content")};this.searchJqUiOfContent=function(V,la){V=".paragraph:eq(#1) .content:eq(#2)".replace("#1",V).replace("#2",la);return ba.getJqUi().find(V)};this.searchHtmlUiOfText=function(V){V=V[0];var la=V.childNodes;return la&&0<la.length?(V=la[0],[V,V.length]):[V,0]};this.searchText=function(){var V=ba.getJqUi().text();return V=V.replace(Va,"")};this.upwardSearchOccupier=function(V){for(V=$(V);!V.hasClass("occupier");)if(V=V.parent(),0==V.length||V[0]==jb[0]||V[0]==document.body)return null;
return V};this.searchOccupierInstead=function(V){return ba.searchJqUiOfContents($(V).parent())[0]};var t=function(){for(var V=$(document.createDocumentFragment()),la=0;la<bb.getParagraphCount();la++){var Qa=bb.getParagraph(la),ca=0<la?bb.getParagraph(la-1):null,na=$("<div>");na.addClass("paragraph");na.appendTo(V);var k=na,Wa=Qa;ca=ca?ca.getMarginAfter():0;k.css("text-align",Wa.getAlign());k.css("line-height",Wa.getLineHeight()+"em");k.css("margin-top",ca+Wa.getMarginBefore()+"px");k.css("margin-bottom",
Wa.getMarginAfter()+"px");k.css("text-indent",Wa.getIndent()+"em");k.css("font-size",Wa.getMaxFontSize()+"px");for(k=0;k<Qa.getContentCount();k++){Wa=Qa.getContent(k);ca=$("<span>");ca.addClass("content");ca.text(Wa.getText());ca.appendTo(na);var fa=ca,ta=Wa;fa.css("font-family",ta.getFontName()?ta.getFontName():"");fa.css("font-size",ta.getFontSize()+"px");ta.isBold()&&fa.css("font-weight","bold");ta.isItalic()&&fa.css("font-style","italic");ta.getColor()&&fa.css("color",ta.getColor());Wa.uiCustomDecorating(ca)}Qa.isTextEmpty()&&
(Qa=$("<span>"),Qa.addClass("occupier"),Qa.text("\u21b5"),Qa.css("font-size","8px"),Qa.css("color",db),Qa.appendTo(na))}jb.empty();jb.append(V);jb.css("color",Aa)}}function Jb(){var Va,ba,bb,jb,Aa,db,t,V,la,Qa,ca,na,k,Wa,fa,ta,Ra;this.hookDefaultColorGetter=function(Na){Va=Na};this.getJqUi=function(){if(!jb){Aa=$b(Bb.get("fontName","\u5b57\u4f53"));db=pc(Bb.get("fontSize","\u5b57\u53f7"));t=Bc("rich-bold",Bb.get("bold","\u52a0\u7c97"));V=yc("rich-italic",Bb.get("italic","\u659c\u4f53"));la=gb("rich-color",
Bb.get("color","\u5b57\u4f53\u989c\u8272"));Qa=Gc("left","rich-left",Bb.get("alignLeft","\u5de6\u5bf9\u9f50"));ca=Gc("center","rich-center",Bb.get("alignCenter","\u5c45\u4e2d"));na=Gc("right","rich-right",Bb.get("alignRight","\u53f3\u5bf9\u9f50"));k=Gc("justify","rich-justify",Bb.get("alignJustify","\u4e24\u7aef\u5bf9\u9f50"));Wa=fb("rich-lineheight",Bb.get("lineHeight","\u884c\u8ddd"));fa=Qc("rich-indent",Bb.get("indent","\u6bb5\u9996\u7f29\u8fdb"));ta=Pa(!0,"rich-marginbefore",Bb.get("marginBefore",
"\u6bb5\u524d\u95f4\u8ddd"));Ra=Pa(!1,"rich-marginafter",Bb.get("marginAfter","\u6bb5\u540e\u95f4\u8ddd"));jb=$("<div>");var Na=Oa(Aa,0,108);Na=Oa(db,Na,44);Na=Oa(t,Na,20);Na=Oa(V,Na,20);Na=Oa(la,Na,32);Na=Oa(Qa,Na,20);Na=Oa(ca,Na,20);Na=Oa(na,Na,20);Na=Oa(k,Na,20);Na=Oa(Wa,Na,32);Na=Oa(fa,Na,32);Na=Oa(ta,Na,32);Oa(Ra,Na,32)}return jb};this.updateState=function(Na,eb){Aa.setSelectedModel(eb.getFontName());db.setSelectedModel(eb.getFontSize());t.setSelected(eb.isBold());V.setSelected(eb.isItalic());
la.setSelectedModel(eb.getColor());fa.setSelectedModel(Na.getIndent());Qa.setSelected("left"==Na.getAlign());ca.setSelected("center"==Na.getAlign());na.setSelected("right"==Na.getAlign());k.setSelected("justify"==Na.getAlign());Wa.setSelectedModel(Na.getLineHeight());ta.setSelectedModel(Na.getMarginBefore());Ra.setSelectedModel(Na.getMarginAfter())};this.setStyleModifyListener=function(Na,eb){ba=Na;bb=eb};var Oa=function(Na,eb,Lb){jb.append(Na.getJqUi());Xa.layoutCtrl(Na.getJqUi(),eb,0,Lb,20);return eb+
Lb+4},Qb=function(Na,eb){var Lb=new Hb,ob=Lb.getJqUi();ob.attr("title",eb);eb=$("<div>");Ab.background(eb,Na);eb.appendTo(ob);Xa.layoutCtrlCenterAlign(eb,16);Xa.layoutCtrlMiddleAlign(eb,16);return Lb},Ka=function(Na,eb,Lb,ob,Pb){var ec=new Da;Lb&&ec.setCustomPainter(function(E,ib){ib.data("init")||(ib.data("init",!0),sb(ib),E=$("<div>"),Ab.background(E,Lb),E.appendTo(ib),Xa.layoutCtrlCenterAlign(E,16),Xa.layoutCtrlMiddleAlign(E,16))});ec.setDropdownCreator(function(E,ib,bc,nc){nc=new Ca;nc.setText(Na+
" ("+eb+")");var Xb=new Eb;ob(Xb);Xb.setValue(ib);Xb.addValueChangedListener(function(Mc,Kc,Ic,Rc){Rc==Eb.CHANGED_BY_MANUAL_EDIT&&bc(Ic)});ib=new vb;ib.setText(Bb.get("confirmButton","\u786e\u5b9a"));ib.addActionListener(function(Mc){bc(Xb.getValue())});Xa.layoutCtrlWithLRTB(nc.getJqUi(),10,10,null,4,null,23);Xa.layoutCtrlWithLRTB(Xb.getJqUi(),10,null,68,30,null,23);Xa.layoutCtrlWithLRTB(ib.getJqUi(),null,10,42,30,null,23);E.append(nc.getJqUi());E.append(Xb.getJqUi());E.append(ib.getJqUi());E.css("background-color",
"#fff");return[140,66]});ec.addSelectionListener(function(E,ib){ib&&Pb(E.getSelectedModel())});ec.getJqUi().attr("title",Na);return ec},$b=function(Na){var eb=new Da;eb.setDropdownCreator(function(Lb,ob,Pb,ec){ec=new Ca;ec.setText(Na);var E=new cc;E.setUiListMode(!0);E.setDefaultDisplay("("+Bb.get("systemDefaultFont","\u9ed8\u8ba4\u5b57\u4f53")+")");E.setSelected(ob);E.setSelectionListener(function(ib,bc){setTimeout(function(){Pb(bc)},0)});Xa.layoutCtrlWithLRTB(ec.getJqUi(),10,10,null,4,null,23);
Xa.layoutCtrlWithLRTB(E.getJqUi(),10,10,null,30,10,null);Lb.append(ec.getJqUi());Lb.append(E.getJqUi());Lb.css("background-color","#fff");return[240,200]});eb.addSelectionListener(function(Lb,ob){ob&&bb(function(Pb){Pb.setFontName(Lb.getSelectedModel())})});eb.getJqUi().attr("title",Na);eb.setCustomPainter(function(Lb,ob){if(Lb){var Pb=cc.searchDisplayName(Lb);!Pb&&(Pb=Lb)}else Pb="("+Bb.get("systemDefaultFont","\u9ed8\u8ba4\u5b57\u4f53")+")";ob.text(Pb)});return eb},pc=function(Na){Na=Ka(Na,Bb.get("unitPx",
"\u50cf\u7d20"),null,function(eb){eb.setConstraint(10,100,1)},function(eb){bb(function(Lb){Lb.setFontSize(eb)})});Na.setCustomPainter(function(eb,Lb){sb(Lb);Lb.text(eb);Lb.css("left",0);Lb.css("right",12)});return Na},Bc=function(Na,eb){Na=Qb(Na,eb);Na.addActionListener(function(Lb){var ob=Lb.isSelected();bb(function(Pb){Pb.setBold(ob)})});return Na},yc=function(Na,eb){Na=Qb(Na,eb);Na.addActionListener(function(Lb){var ob=Lb.isSelected();bb(function(Pb){Pb.setItalic(ob)})});return Na},Gc=function(Na,
eb,Lb){eb=Qb(eb,Lb);eb.addActionListener(function(ob){ob.isSelected()?(Qa.setSelected(!1),ca.setSelected(!1),na.setSelected(!1),k.setSelected(!1),ob.setSelected(!0),ba(function(Pb){Pb.setAlign(Na)})):(ob.setSelected(!0),ba(null))});return eb},Qc=function(Na,eb){return Ka(eb,Bb.get("unitEm","\u500d"),Na,function(Lb){Lb.setConstraint(0,10,.5);Lb.supportDecimal(2)},function(Lb){ba(function(ob){ob.setIndent(Lb)})})},Pa=function(Na,eb,Lb){return Ka(Lb,Bb.get("unitPx","\u50cf\u7d20"),eb,function(ob){ob.setConstraint(0,
100,1)},function(ob){ba(function(Pb){Na?Pb.setMarginBefore(ob):Pb.setMarginAfter(ob)})})},fb=function(Na,eb){return Ka(eb,Bb.get("unitEm","\u500d"),Na,function(Lb){Lb.setConstraint(.1,10,.1);Lb.supportDecimal(2)},function(Lb){ba(function(ob){ob.setLineHeight(Lb)})})},gb=function(Na,eb){var Lb=new Da;Lb.setCustomPainter(function(ob,Pb){var ec=Pb.data("myColorUi");ec||(sb(Pb),Pb.css("overflow","visible"),ec=$("<div>"),Ab.background(ec,Na),ec.appendTo(Pb),Xa.layoutCtrl(ec,2,0,16,16),ec=$("<div>"),ec.css("border",
"1px solid #f0f0f0"),ec.appendTo(Pb),Xa.layoutCtrl(ec,2,11,14,4),Pb.data("myColorUi",ec));ec.css("background-color",ob?ob:Va())});Lb.setDropdownCreator(function(ob,Pb,ec,E){E=new Rb;E.setColorConfirmedListener(function(ib){ec(ib)});Pb=E.createJqUi(Pb,Bb.get("systemDefault","\u7cfb\u7edf\u9ed8\u8ba4"));Pb.appendTo(ob);return[Pb.outerWidth(),Pb.outerHeight()]});Lb.addSelectionListener(function(ob,Pb){Pb&&bb(function(ec){var E=ob.getSelectedModel();ec.setColor(E)})});Lb.getJqUi().attr("title",eb);return Lb},
sb=function(Na){Na.css("left",0);Na.css("right",12);Na.next().css("right",0)}}function Rb(){var Va=["#ffffff #000000 #1f497d #c0504d #9bbb59 #8064a2 #4bacc6 #f79646".split(" "),"#f2f2f2 #7f7f7f #c6d9f0 #f2dcdb #ebf1dd #e5e0ec #dbeef3 #fdeada".split(" "),"#d8d8d8 #595959 #8db3e2 #e5b9b7 #d7e3bc #ccc1d9 #b7dde8 #fbd5b5".split(" "),"#bfbfbf #3f3f3f #548dd4 #d99694 #c3d69b #b2a2c7 #92cddc #fac08f".split(" "),"#a5a5a5 #262626 #17365d #953734 #76923c #5f497a #31859b #e36c09".split(" "),"#7f7f7f #0c0c0c #0f243e #632423 #4f6128 #3f3151 #205867 #974806".split(" "),
"#c00000 #ff0000 #ffc000 #ffff00 #92d050 #00b050 #00b0f0 #7030a0".split(" ")],ba;this.setColorConfirmedListener=function(bb){ba=bb};this.createJqUi=function(bb,jb){var Aa=new Hb;Aa.setText(jb);Aa.addActionListener(function(db){db.setSelected(!0);ba(null)});jb=Aa.getJqUi();jb.css("line-height","18px");bb?jb.css("border","1px solid #dbdbdb"):(Aa.setSelected(!0),bb="#808080");Aa=new Kb;Aa.setColorPool(Va);Aa.getModel().decodeFrom(bb);Aa.addSelectedListener(function(db){db=db.encodeToHexRgb();ba(db)});
bb=Aa.createJqUi();Aa=$("<div>");Aa.append(jb);Aa.append(bb);Xa.layoutCtrlWithLRTB(jb,6,6,null,8,null,20);Xa.layoutCtrlWithLRTB(bb,0,0,null,28,0,null);Aa.css("background-color","#fff");Aa.css("width",bb.outerWidth());Aa.css("height",bb.outerHeight()+28);return Aa}}function Ta(){var Va,ba=$("<div>"),bb=$("<div>");this.getJqUi=function(){Va||(ba.css({color:"#bbb"}),bb.css({color:"#bbb","text-align":"right"}),Va=$("<div>"),Va.append(ba),Va.append(bb),Xa.layoutCtrlWithLRTB(ba,4,"50%",null,0,0,null),Xa.layoutCtrlWithLRTB(bb,
"50%",4,null,0,0,null));return Va};this.setCursorPosition=function(Aa,db){var t="";if(db){var V=Bb.get("statusCursor","\u6bb5\u843d#1, \u5b57\u7b26#2"),la=db.getFromParagraphIndex(),Qa=jb(Aa,la,db.getFromContentIndex(),db.getFromOffset());t=V.replace("#1",la+1).replace("#2",Qa+1);db.isCollapse()||(la=db.getToParagraphIndex(),Qa=jb(Aa,la,db.getToContentIndex(),db.getToOffset()),t=t+"~"+V.replace("#1",la+1).replace("#2",Qa+1))}ba.text(t)};this.setInputableCharacterCount=function(Aa){var db=Bb.get("statusRemainChar",
"\u8fd8\u53ef\u4ee5\u8f93\u5165#1\u5b57");db=db.replace("#1",Aa);bb.text(db)};this.warningMaxCharacters=function(Aa){var db=$("<div>");db.css("background-color","#fff");var t=$("<div>");t.text(Bb.get("statusWarningMaxChar","\u5b57\u6570\u8d85\u8fc7#1\u5b57\u4e0a\u9650").replace("#1",Aa));t.css("color","#930");Xa.layoutCtrlWithLRTB(db,0,0,null,0,0,null);Xa.layoutCtrlWithLRTB(t,0,0,null,0,0,null);db.append(t);Va.append(db);Aa=new rb;Aa.setDuration(850,150);Aa.setAction(function(){db.remove()});Aa.blink(t)};
var jb=function(Aa,db,t,V){Aa=Aa.getParagraph(db);for(db=0;db<t;db++)V+=Aa.getContent(db).getTextLength();return V}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.common&&(com.kingdee.bos.qing.common={});"undefined"==typeof com.kingdee.bos.qing.common.rich&&(com.kingdee.bos.qing.common.rich={});var Ga=
com.kingdee.bos.qing.common.rich;Ga.Chapter=p;Ga.RichDisplayer=lb;Ga.RichEditor=function(){var Va=String.fromCharCode(13),ba=String.fromCharCode(10),bb=Va+ba,jb=new RegExp(Va,"gm"),Aa=new RegExp(bb,"gm"),db,t,V,la,Qa,ca=1E3,na,k,Wa;this.setMaxCharacters=function(E){ca=E};this.setModel=function(E){db=E;Ra().setModel(E);Na()};this.setDefaultColor=function(E){Ra().setDefaultColor(E)};this.setBackgroundColor=function(E){!E&&(E="#fff");var ib=jc.decodeStringToRgbaArray(E),bc=jc.rgbToHsl(ib[0],ib[1],ib[2]);
ib=bc[0];bc=bc[2];30<ib&&190>ib?(ib=40<bc?"#000":"#fff",bc=40<bc?"#333":"#ccc"):(ib=70<bc?"#000":"#fff",bc=70<bc?"#333":"#ccc");Ra().setOccupierColor(bc);Ra().getJqUi().css({"background-color":E,"caret-color":ib})};this.getJqUi=function(){if(!t){var E=fa().getJqUi();fa().updateState(db.getParagraph(0),db.getParagraph(0).getContent(0));var ib=Ra().getJqUi();ib.css("border","1px solid #ccc");ib.css("outline","none");var bc=ta().getJqUi();0>Math.max(0,ca-na.length)+0-0&&ta().warningMaxCharacters(ca);
t=$("<div>");t.append(E);t.append(ib);t.append(bc);Xa.layoutCtrlWithLRTB(E,0,0,null,0,null,24);Xa.layoutCtrlWithLRTB(ib,0,0,null,24,24,null);Xa.layoutCtrlWithLRTB(bc,0,0,null,null,0,24)}return t};this.requestFocus=function(){Ra().getJqUi().focus();if(k)ob(k);else{var E=db.getParagraphCount()-1,ib=db.getParagraph(E),bc=ib.getContentCount()-1;ib=ib.getContent(bc).getTextLength();E=new oc(E,bc,ib);ob(new Ub(E));Ka()}};this.getSelectingScope=function(){return db.getScope(k)};this.inputTextOnCursor=function(E){sb([E])};
var fa=function(){la||(la=new Jb,la.hookDefaultColorGetter(Ra().getDefaultColor),la.setStyleModifyListener(function(E){if(k){var ib=E?!0:!1;ib&&db.changeParagraphStyle(k,E);ib&&Ra().refresh();ob(k)}},function(E){if(k){var ib=E?!0:!1;if(ib)if(k.isCollapse()){var bc=db.getParagraph(k.getFromParagraphIndex()).getContent(k.getFromContentIndex());bc.isTextEmpty()?E(bc):(!Wa&&(Wa=Mb.create()),E(Wa))}else db.changeContentStyle(k,E);ib&&Ra().refresh();ob(k)}}));return la},ta=function(){Qa||(Qa=new Ta);return Qa},
Ra=function(){if(!V){V=new lb;var E=V.getJqUi();E.attr("contenteditable",!0);E.on("compositionstart",Pa);E.on("compositionend",fb);E.on("keydown",yc);E.on("keyup",Gc);E.on("mousedown",Oa);E.on("paste",$b);E.on("cut",pc);E.on("copy",Bc)}return V},Oa=function(E){E.shiftKey||window.getSelection().removeAllRanges();E=$(document.body);E.on("mouseup",Qb);E.on("mouseleave",Qb)},Qb=function(E){E=$(document.body);E.off("mouseup",Qb);E.off("mouseleave",Qb);Ka()},Ka=function(){Wa=null;var E=window.getSelection(),
ib=E.anchorNode,bc=E.anchorOffset,nc=E.focusNode,Xb=E.focusOffset;if(ib&&nc){E=ib==nc;var Mc=!1,Kc=Ra().upwardSearchOccupier(ib);if(Kc){Mc=!0;var Ic=Kc.siblings();ib=0==Ic.length?Kc.parent()[0]:Ic[0];bc=0;E&&(nc=ib,Xb=0)}!E&&(Kc=Ra().upwardSearchOccupier(nc))&&(Mc=!0,Ic=Kc.siblings(),nc=0==Ic.length?Kc.parent()[0]:Ic[0],Xb=0);E&&Mc&&Pb(ib,bc,nc,Xb);Xb=[ib,bc,nc,Xb];ib=Xb[0];bc=Xb[1];nc=Xb[2];Xb=Xb[3];Mc=Ra().searchJqUiOfParagraphs();for(Kc=0;Kc<Mc.length;Kc++){Ic=Mc.eq(Kc);Ic=Ra().searchJqUiOfContents(Ic);
for(var Rc=0;Rc<Ic.length;Rc++){var Zc=Ic.eq(Rc),$c=Ra().searchHtmlUiOfText(Zc)[0];Zc=Lb($c,ib);$c=E?Zc:Lb($c,nc);if(!g&&(Zc||$c)){var v=E?Math.min(bc,Xb):Zc?bc:Xb;var g=new oc(Kc,Rc,v);if(!E)continue}if(g&&!r&&(Zc||$c)){v=E?Math.max(bc,Xb):$c?Xb:bc;var r=new oc(Kc,Rc,v);break}}}!g&&(g=eb());!r&&(r=eb());g=new Ub(g,r)}else g=null;g&&(g.isCollapse()?0==g.getFromOffset()&&0<g.getFromContentIndex()&&(r=g.getFromContentIndex()-1,E=db.getParagraph(g.getFromParagraphIndex()),nc=E.getContent(r),E=nc.getTextLength(),
g.updateStartPosition(r,E),g.updateEndPosition(r,E)):(E=db.getParagraph(g.getFromParagraphIndex()),nc=E.getContent(g.getFromContentIndex()),g.getFromOffset()==nc.getTextLength()&&g.getFromContentIndex()<E.getContentCount()-1&&g.updateStartPosition(g.getFromContentIndex()+1,0),0==g.getToOffset()&&0<g.getToContentIndex()&&(E=db.getParagraph(g.getToParagraphIndex()),nc=E.getContent(g.getToContentIndex()-1),g.updateEndPosition(g.getToContentIndex()-1,nc.getTextLength()))),k=g,g=db.getParagraph(k.getFromParagraphIndex()),
r=g.getContent(k.getFromContentIndex()),fa().updateState(g,r),ta().setCursorPosition(db,k))},$b=function(E){E.preventDefault();E=(E.originalEvent.clipboardData||window.clipboardData).getData("Text");E=E.replace(Aa,ba);E=E.replace(jb,ba);E=E.split(ba);sb(E)},pc=function(E){E.preventDefault();k.isCollapse()||(ec(E),sb([""]))},Bc=function(E){E.preventDefault();k.isCollapse()||ec(E)},yc=function(E){if(13==E.keyCode||8==E.keyCode||46==E.keyCode)E.preventDefault(),E=db.inputCommand(k,E.keyCode),Ra().refresh(),
Na(),ob(E),Ka();else if(E.ctrlKey&&65==E.keyCode){E.preventDefault();var ib=Ra().searchJqUiOfContents();E=Ra().searchHtmlUiOfText(ib.eq(0));ib=Ra().searchHtmlUiOfText(ib.eq(ib.length-1));Pb(E[0],0,ib[0],ib[1]);Ka()}},Gc=function(E){Qc||(33<=E.keyCode&&40>=E.keyCode?Ka():gb())},Qc=!1,Pa=function(E){Qc=!0},fb=function(E){Qc=!1;gb()},gb=function(){var E=Ra().searchText();if(E!==na){for(var ib=Math.min(na.length,E.length),bc=ib,nc=0;nc<ib;nc++)if(na[nc]!==E[nc]){bc=nc;break}nc=E.length-(ib-bc);for(var Xb=
ib;Xb>bc;Xb--){var Mc=ib-Xb;if(na[na.length-1-Mc]!==E[E.length-1-Mc]){nc=E.length-Mc;break}}E=E.substring(bc,nc);sb([E])}},sb=function(E){var ib=E.join("").length,bc=k.isCollapse()?0:db.getAllTextLength(k);0>Math.max(0,ca-na.length)+bc-ib?(Ra().refresh(),ob(k),ta().warningMaxCharacters(ca)):(E=db.inputText(k,E,Wa),Ra().refresh(),Na(),ob(E),Ka())},Na=function(){na=Ra().searchText();ta().setInputableCharacterCount(Math.max(0,ca-na.length))},eb=function(){var E=db.getParagraphCount()-1,ib=db.getParagraph(E),
bc=ib.getContentCount()-1;ib=ib.getContent(bc).getTextLength();return new oc(E,bc,ib)},Lb=function(E,ib){for(var bc=Ra().getJqUi()[0];E!=ib;)if(E=E.parentNode,E==bc||E==document.body)return!1;return!0},ob=function(E){var ib=E.getFromParagraphIndex(),bc=E.getFromContentIndex(),nc=E.getFromOffset();ib=Ra().searchJqUiOfContent(ib,bc);ib=Ra().searchHtmlUiOfText(ib)[0];bc=E.getToParagraphIndex();var Xb=E.getToContentIndex();E=E.getToOffset();Xb=Ra().searchJqUiOfContent(bc,Xb);var Mc=Ra().searchHtmlUiOfText(Xb),
Kc=Mc[1];Pb(ib,nc,Mc[0],E);nc=Math.max(db.getParagraph(bc).getMaxFontSize(),Xb.prop("offsetHeight"));ib=0==Kc?1:E/Kc;nc=Xb.prop("offsetTop")+parseInt(nc*ib);ib=Ra().getJqUi();bc=ib.prop("scrollTop");E=bc+ib.prop("clientHeight");if(nc<bc||nc>E)E=bc+parseInt(.5*ib.prop("clientHeight")),ib.prop("scrollTop",bc+(nc-E))},Pb=function(E,ib,bc,nc){var Xb=document.createRange();Xb.setStart(E,ib);Xb.setEnd(bc,nc);E=window.getSelection();E.removeAllRanges();E.addRange(Xb)},ec=function(E){(E.originalEvent.clipboardData||
window.clipboardData).setData("Text",db.getAllText(bb,k))}};var Cb,Xa,jc,dc,Bb,Hb,Da,Eb,Ca,vb,Kb,rb,cc;(function(){var Va=com.kingdee.bos.qing.common;Cb=Va.Util;Xa=Va.DomUtil;jc=Va.ColorUtil;Va=com.kingdee.bos.qing.framework.common;dc=Va.AbstractIcons;Bb=Va.MultilanguageManager.createPackageAccessor(Ga);Va=com.kingdee.bos.qing.ui.component;Hb=Va.ToggleButton;Da=Va.DropdownSelector;Eb=Va.Spinner;Ca=Va.Label;vb=Va.WorkButton;Kb=Va.ColorChooser;Va=com.kingdee.bos.qing.common.ui;rb=Va.BlinkHelper;cc=
Va.FontSelector})();var Ab=new function(){dc.call(this);var Va=this.protectedMethod;this.protectedInit=function(bb,jb){com.kingdee.bos.qing.common.ComboIcon.define(jb,"rich");ba(0,0,"rich-bold");ba(0,1,"rich-italic");ba(0,2,"rich-underline");ba(0,3,"rich-strikethrough");ba(0,4,"rich-color");ba(1,0,"rich-left");ba(1,1,"rich-center");ba(1,2,"rich-right");ba(1,3,"rich-justify");ba(1,4,"rich-lineheight");ba(1,5,"rich-marginbefore");ba(1,6,"rich-marginafter");ba(1,7,"rich-indent")};var ba=function(bb,
jb,Aa){Va.registIcon(bb,jb,Aa)}};p.create=function(Va){var ba=new p,bb=ba.insertParagraph(0),jb=new kb;bb.insertContent(0,jb);Va&&Va(bb,jb);return ba};p.createParagraph=function(){return new Wb};p.createContent=function(){return new kb};Mb.create=function(){var Va=new Mb;Va.setFontName(void 0);Va.setFontSize(void 0);Va.setBold(void 0);Va.setItalic(void 0);Va.setColor(void 0);return Va}})();(function(){function p(){var Da=this,Eb={},Ca={},vb={};vb[p.LINE_WIDE_1]=.75;vb[p.LINE_WIDE_2]=1.5;vb[p.LINE_WIDE_3]=2.25;vb[p.LINE_WIDE_4]=3;vb[p.LINE_WIDE_5]=4;var Kb=[],rb={};rb[p.LINECOLOR_MAIN]="#808080";rb[p.LINECOLOR_STRONG]=null;var cc=rb[p.LINECOLOR_WEAK]=null;this.setEdge=function(t,V){Eb[t]=V;V.bindDirection(t)};this.getEdge=function(t){return Eb[t]};this.setCorner=function(t,V){Ca[t]=V;V.bindDirection(t)};this.getCorner=function(t){return Ca[t]};this.setLineThickness=function(t,V){vb[t]=
V};this.getLineThickness=function(t){return vb[t]};this.getAllLightItems=function(){return Kb};this.getLightItems=function(t){for(var V=null,la=0;la<Kb.length;la++){var Qa=Kb[la];Qa.getDir()==t&&(!V&&(V=[]),V.push(Qa))}return V};this.validateLightItems=function(){for(var t=Kb.length-1;0<=t;t--){var V=Kb[t],la=V.getDir(),Qa=V.getPosition();V=V.getLogicColor();la&&(Qa||0===Qa)&&V||Kb.splice(t,1)}Kb.sort(function(ca,na){var k=ca.getDir()-na.getDir();0==k&&(k=ca.getPosition()-na.getPosition());return k})};
this.setLineColor=function(t,V){rb[t]=V};this.getLineColor=function(t){return rb[t]};this.hookBackgroundColor=function(t){cc=t};this.getBackgroundColor=function(){return cc};this.copyToEdit=function(){var t=new p;t.fromJsonObject(Da.toJsonObject());return t};this.toJsonObject=function(){var t={};t.edgeN=Ab(p.DIR_N);t.edgeS=Ab(p.DIR_S);t.edgeW=Ab(p.DIR_W);t.edgeE=Ab(p.DIR_E);t.cornerNW=Da.getCorner(p.DIR_NW).toJsonObject();t.cornerNE=Da.getCorner(p.DIR_NE).toJsonObject();t.cornerSW=Da.getCorner(p.DIR_SW).toJsonObject();
t.cornerSE=Da.getCorner(p.DIR_SE).toJsonObject();var V={};bb(V,p.LINE_WIDE_1);bb(V,p.LINE_WIDE_2);bb(V,p.LINE_WIDE_3);bb(V,p.LINE_WIDE_4);bb(V,p.LINE_WIDE_5);t.lineThickness=V;V={};Aa(V,p.LINECOLOR_MAIN);Aa(V,p.LINECOLOR_STRONG);Aa(V,p.LINECOLOR_WEAK);t.lineColor=V;return t};this.fromJsonObject=function(t){Kb=[];Va(t.edgeN,p.DIR_N);Va(t.edgeS,p.DIR_S);Va(t.edgeW,p.DIR_W);Va(t.edgeE,p.DIR_E);Da.validateLightItems();ba(t.cornerNW,p.DIR_NW);ba(t.cornerNE,p.DIR_NE);ba(t.cornerSW,p.DIR_SW);ba(t.cornerSE,
p.DIR_SE);var V=t.lineThickness;jb(V,p.LINE_WIDE_1);jb(V,p.LINE_WIDE_2);jb(V,p.LINE_WIDE_3);jb(V,p.LINE_WIDE_4);jb(V,p.LINE_WIDE_5);t=t.lineColor;db(t,p.LINECOLOR_MAIN);db(t,p.LINECOLOR_STRONG);db(t,p.LINECOLOR_WEAK)};var Ab=function(t){return Da.getEdge(t).toJsonObject(Da.getLightItems(t))},Va=function(t,V){var la=[],Qa=new kb;Qa.fromJsonObject(t,la);Da.setEdge(V,Qa);if(0<la.length)for(t=0;t<la.length;t++)Qa=la[t],Qa.setDir(V),Kb.push(Qa)},ba=function(t,V){var la=new Mb;la.fromJsonObject(t);Da.setCorner(V,
la)},bb=function(t,V){var la=Da.getLineThickness(V);la=Math.round(100*la);V=Bb.encodeLogicLineWide(V);t[V]=la},jb=function(t,V){var la=Bb.encodeLogicLineWide(V);t=t[la];Da.setLineThickness(V,t||0===t?t/100:1)},Aa=function(t,V){var la=Bb.encodeLogicColor(V);(V=Da.getLineColor(V))&&(t[la]=V)},db=function(t,V){var la=Bb.encodeLogicColor(V);t=t[la];Da.setLineColor(V,t?t:null)}}function Wb(){var Da;this.bindDirection=function(Eb){Da=Eb};this.getDirection=function(){return Da};this.isDirection=function(Eb){return 0<
(Da&Eb)};this.isTheDirection=function(Eb){return Da==Eb}}function kb(){Wb.call(this);var Da=this,Eb=kb.TYPE_STRAIGHT,Ca=!1,vb=p.LINE_WIDE_2,Kb=p.LINE_NONE,rb=[40,80],cc=kb.FLIP_NONE,Ab=null,Va=null;this.setType=function(ba){Eb=ba};this.getType=function(){return Eb};this.setTitleEnhanced=function(ba){Ca=ba};this.isTitleEnhanced=function(){return Ca};this.setMajorLineLogicWide=function(ba){vb=ba};this.getMajorLineLogicWide=function(){return vb};this.setMinorLineLogicWide=function(ba){Kb=ba};this.getMinorLineLogicWide=
function(){return Kb};this.setTurning=function(ba,bb){rb=[];(ba||0===ba)&&rb.push(ba);(bb||0===bb)&&rb.push(bb)};this.getFirstTurning=function(){var ba=rb[0];return ba?ba:0};this.getSecondTurning=function(){var ba=rb[1];return ba||0===ba?ba:100};this.setFlip=function(ba){cc=ba};this.getFlip=function(){return cc};this.setCustomMinorLine=function(ba){Ab=ba};this.getCustomMinorLine=function(){return Ab};this.isCustomMinorLine=function(){return Ab?!0:!1};this.hookParsedPartsBlock=function(ba){Va=ba};
this.getParsedPartsBlock=function(ba){return Va?Va[ba]:null};this.toJsonObject=function(ba){var bb={};bb.type=Bb.encodeEdgeType(Eb);if(Eb!=kb.TYPE_NONE){bb.majorWide=Bb.encodeLogicLineWide(vb);bb.minorWide=Bb.encodeLogicLineWide(Kb);bb.flip=Bb.encodeFlip(cc);if(Eb==kb.TYPE_SINGLE_TURN||Eb==kb.TYPE_DOUBLE_TURN)bb.turnPos1=rb[0],Eb==kb.TYPE_DOUBLE_TURN&&(bb.turnPos2=rb[1]),Ca&&(bb.titleEnhanced=!0);Ab&&Kb!=p.LINE_NONE&&(bb.customMinor=Ab)}if(ba){for(var jb=[],Aa=0;Aa<ba.length;Aa++)jb.push(ba[Aa].toJsonObject());
bb.lightItems=jb}return bb};this.fromJsonObject=function(ba,bb){Eb=Bb.decodeEdgeType(ba.type);var jb=ba.majorWide;jb&&(vb=Bb.decodeLogicLineWide(jb));(jb=ba.minorWide)&&(Kb=Bb.decodeLogicLineWide(jb));(jb=ba.flip)&&(cc=Bb.decodeFlip(jb));jb=ba.turnPos1;var Aa=ba.turnPos2;(jb||0===jb)&&(rb[0]=jb);(Aa||0===Aa)&&(rb[1]=Aa);Ca=ba.titleEnhanced?!0:!1;Ab=ba.customMinor;if(ba=ba.lightItems)for(jb=0;jb<ba.length;jb++){Aa=ba[jb];var db=new oc;db.fromJsonObject(Aa);bb.push(db)}Ab&&(ba=new Ub,bb=ba.decode(Ab),
ba=ba.getException(),Da.hookParsedPartsBlock(ba?null:bb))}}function Mb(){Wb.call(this);var Da=Mb.TYPE_NONE,Eb=p.LINE_WIDE_2,Ca=6;this.setType=function(vb){Da=vb};this.getType=function(){return Da};this.setLineLogicWide=function(vb){Eb=vb};this.getLineLogicWide=function(){return Eb};this.setRadius=function(vb){Ca=vb};this.getRadius=function(){return Ca};this.toJsonObject=function(){var vb={};vb.type=Bb.encodeCornerType(Da);Da!=Mb.TYPE_NONE&&(vb.lineWide=Bb.encodeLogicLineWide(Eb),vb.radius=Ca);return vb};
this.fromJsonObject=function(vb){Da=Bb.decodeCornerType(vb.type);var Kb=vb.lineWide;Kb&&(Eb=Bb.decodeLogicLineWide(Kb));((vb=vb.radius)||0===vb)&&(Ca=vb)}}function oc(){var Da,Eb=10,Ca=p.LINECOLOR_MAIN;this.setDir=function(vb){Da=vb};this.getDir=function(){return Da};this.setPosition=function(vb){Eb=vb};this.getPosition=function(){return Eb};this.setLogicColor=function(vb){Ca=vb};this.getLogicColor=function(){return Ca};this.toJsonObject=function(){var vb={};vb.pos=Eb;vb.color=Bb.encodeLogicColor(Ca);
return vb};this.fromJsonObject=function(vb){Eb=vb.pos;Ca=Bb.decodeLogicColor(vb.color)}}function Ub(){function Da(Aa,db,t,V){this.getContent=function(){return Aa};this.getType=function(){return db};this.getCharIndex=function(){return t};this.getWordLength=function(){return V}}Da.UNIT=1;Da.PREFIX=2;Da.SUFFIX=3;Da.LB=4;Da.RB=5;var Eb=Da.UNIT,Ca=Da.PREFIX,vb=Da.LB,Kb,rb,cc;this.getException=function(){return Kb};this.decode=function(Aa){Kb=null;for(var db=[],t=[],V=!1,la=!1,Qa=[],ca="",na=0;na<Aa.length;na++){var k=
Aa.charAt(na),Wa=!0;if(V)if(Wa=!1,"}"==k){var fa=na-ca.length,ta=ca,Ra=fa,Oa=$.trim(ta);Oa&&(dc.decodeStringToRgbArray(Oa)||(Kb=new lb(lb.INVALID_PREFIX,Ra,ta.length,"Invalid prefix '{"+ta+"}'.")));if(Kb)break;Qa.push(new Da(Oa,Da.PREFIX,fa-1,ca.length+2));ca="";V=!1}else ca+=k;else la&&(Ab(k)?(ca+=k,Wa=!1):(Qa.push(new Da(ca,Da.SUFFIX,na-ca.length)),ca="",la=!1));if(Wa)if(";"==k)t.push(Qa),Qa=[];else if(Hb.isUnitKeyChar(k))Qa.push(new Da(k,Da.UNIT,na));else if(Ab(k))ca=k,la=!0;else if("~"==k)Qa.push(new Da(k,
Da.SUFFIX,na));else if("{"==k)V=!0;else if("}"==k){Kb=new lb(lb.UNPAIRED_BRACE,na,1,"Unpaired brace '}'.");break}else if("("==k)Qa.push(new Da(k,Da.LB,na));else if(")"==k)Qa.push(new Da(k,Da.RB,na));else if(" "!=k){Kb=new lb(lb.UNKNOWN_CHAR,na,1,"Invalid char '"+k+"'.");break}}Kb||(V?(na=Aa.length-ca.length-1,Kb=new lb(lb.UNPAIRED_BRACE,na,1,"Unpaired brace '{'.")):la&&(na=Aa.length-ca.length,Qa.push(new Da(ca,Da.SUFFIX,na))));t.push(Qa);if(!Kb)for(Aa=0;Aa<t.length;Aa++){la=t[Aa];cc=null;rb=[];for(V=
0;V<la.length;V++){Qa=la[V];switch(Qa.getType()){case Da.UNIT:Va()==Eb&&bb();rb.push(Qa);break;case Da.PREFIX:switch(Va()){case Ca:rb.pop();break;case Eb:bb()}rb.push(Qa);break;case Da.SUFFIX:switch(Va()){case 255:ca=rb.pop();jb(ca,Qa);rb.push(ca);break;case Eb:bb(Qa);break;default:ca=Qa.getContent(),Kb=new lb(lb.REDUNDANT_SUFFIX,Qa.getCharIndex(),ca.length,"Missing block-unit before '"+ca+"'.")}break;case Da.LB:Va()==Eb&&bb();rb.push(Qa);break;case Da.RB:switch(Va()){case vb:ca=rb.pop();na=Qa.getCharIndex()-
ca.getCharIndex()+1;Kb=new lb(lb.EMPTY_BRACKET,ca.getCharIndex(),na,"Empty bracket pairs.");break;case Eb:bb();break;case Ca:na=rb.pop(),ca=na.getContent(),Kb=new lb(lb.REDUNDANT_PREFIX,na.getCharIndex(),na.getWordLength(),"Missing block-unit after '{"+ca+"}'.")}if(!Kb){ca=[];for(na=!1;0<rb.length;)if(k=Va(),255==k)k=rb.pop(),ca.push(k);else if(k==vb){rb.pop();na=!0;break}else throw Error("Impossible");if(na){if(Qa=new Ga,Va()==Ca&&(na=rb.pop(),Qa.setAppointedColor(na.getContent())),0<ca.length){for(;0<
ca.length;)Qa.addSubBlock(ca.pop());rb.push(Qa)}}else Kb=new lb(lb.REDUNDANT_RB,Qa.getCharIndex(),1,"Missing '('.")}break;default:throw Error("Impossible");}if(Kb)break}switch(Va()){case Eb:bb();break;case Ca:V=rb.pop(),la=V.getContent(),Kb=new lb(lb.REDUNDANT_PREFIX,V.getCharIndex(),V.getWordLength(),"Missing block-unit after '{"+la+"}'.")}if(!Kb)for(V=rb.length-1;0<=V;V--)if(la=rb[V],Qa=ba(la),Qa==vb){Kb=new lb(lb.REDUNDANT_LB,la.getCharIndex(),1,"Missing ')'.");break}else if(255!=Qa)throw Error("Impossible");
la=null;if(!Kb)if(1==rb.length)la=rb[0];else if(1<rb.length)for(la=new Ga,V=0;V<rb.length;V++)la.addSubBlock(rb[V]);if(Kb)break;db.push(la)}return db};var Ab=function(Aa){Aa=Aa.charCodeAt(0);return 48<=Aa&&57>=Aa},Va=function(){return 0==rb.length?0:ba(rb[rb.length-1])},ba=function(Aa){if(Aa instanceof Da)switch(Aa.getType()){case Da.UNIT:return Eb;case Da.PREFIX:return Ca;case Da.LB:return vb}else if(Aa instanceof Ta||Aa instanceof Ga)return 255;throw Error("Impossible");},bb=function(Aa){var db=
rb.pop(),t=new Ta;t.setUnitKey(db.getContent());Va()==Ca&&(db=rb.pop(),t.setAppointedColor(db.getContent()));Aa&&jb(t,Aa);rb.push(t)},jb=function(Aa,db){var t=db.getContent(),V="~"==t?-1:parseInt(t);0===V?Kb=new lb(lb.REDUNDANT_SUFFIX,db.getCharIndex(),1,"Zero suffix."):9999<V&&(Kb=new lb(lb.REDUNDANT_SUFFIX,db.getCharIndex(),t.length,"Suffix '"+t+"' is larger than 9999."));Aa.setTimes(V);cc==Aa&&(Kb=new lb(lb.REDUNDANT_SUFFIX,db.getCharIndex(),t.length,"Duplicated suffix '"+t+"'."));cc=Aa}}function lb(Da,
Eb,Ca,vb){this.getCode=function(){return Da};this.getCharStart=function(){return Eb};this.getCharLength=function(){return Ca};this.getMessage=function(){return vb}}function Jb(Da,Eb){this.getChar=function(){return Da};this.isDrawingOnePixel=function(){return(Eb&Jb.SHAPE)!=Jb.SHAPE}}function Rb(){var Da=this,Eb=1,Ca,vb,Kb;this.isAtom=function(){throw Error("Implement");};this.setTimes=function(rb){Eb=rb};this.getTimes=function(){return Eb};this.setRtTimes=function(rb){Ca=rb;vb=Math.floor(rb)};this.getComputableTimes=
function(){return Ca};this.getDrawingTimes=function(){return vb};this.setAppointedColor=function(rb){Kb=rb?rb:""};this.getAppointedColor=function(){return Kb};this.isAppointedColorErased=function(){return""===Kb};this.getUnitLength=function(rb){throw Error("Implement");};this.encode=function(){var rb="";Kb?rb="{"+Kb+"}":Da.isAppointedColorErased()&&(rb="{}");var cc="";0>Eb?cc="~":1!=Eb&&(cc=Eb);return rb+Da.protectedEncodeUnit((rb?!0:!1)||(cc?!0:!1))+cc};this.protectedEncodeUnit=function(rb){throw Error("Implement");
}}function Ta(){Rb.call(this);var Da;this.isAtom=function(){return!0};this.setUnitKey=function(Eb){Da=Hb.searchUnitKey(Eb)};this.getUnitKey=function(){return Da};this.getUnitLength=function(Eb){return Da.isDrawingOnePixel()?1:Eb};this.protectedEncodeUnit=function(Eb){return Da.getChar()}}function Ga(){Rb.call(this);var Da=[];this.isAtom=function(){return!1};this.addSubBlock=function(Eb){Da.push(Eb)};this.getSubBlockCount=function(){return Da.length};this.getSubBlock=function(Eb){return Da[Eb]};this.getUnitLength=
function(Eb){for(var Ca=0,vb=0;vb<Da.length;vb++){var Kb=Da[vb];Ca+=Kb.getUnitLength(Eb)*Kb.getComputableTimes()}return Ca};this.protectedEncodeUnit=function(Eb){for(var Ca="",vb=0;vb<Da.length;vb++){var Kb=Da[vb];0<vb&&(Ca+=" ");Ca+=Kb.encode()}Eb&&(Ca="("+Ca+")");return Ca}}function Cb(Da){var Eb=this,Ca,vb=[],Kb;this.getEdge=function(){return Da};var rb=function(){return Da.isDirection(p.DIR_W|p.DIR_E)},cc=function(){return Da.isDirection(p.DIR_S|p.DIR_W)};this.isFlipLeading=function(){return rb()?
(Da.getFlip()&kb.FLIP_V)==kb.FLIP_V:(Da.getFlip()&kb.FLIP_H)==kb.FLIP_H};this.isFlipOrthogonal=function(){return rb()?(Da.getFlip()&kb.FLIP_H)==kb.FLIP_H:(Da.getFlip()&kb.FLIP_V)==kb.FLIP_V};this.setMajorPoints=function(Ab){Ca=Ab};this.getMajorPointCount=function(){return Ca.length};this.getMajorPoint=function(Ab){return Ca[Ab]};this.addMinorPart=function(Ab,Va){vb.push([Ab,Va])};this.getMinorPartCount=function(){return vb.length};this.getMinorPointA=function(Ab){return vb[Ab][0]};this.getMinorPointB=
function(Ab){return vb[Ab][1]};this.unified=function(Ab,Va){return rb()?[Va,Ab]:[Ab,Va]};this.unifiedMajorPoints=function(){var Ab=rb(),Va=cc();if(Ab||Va){for(var ba=[],bb=Ca.length-1;0<=bb;bb--){var jb=Ca[bb];Ab&&jb.exchangeXY();Va&&ba.push(jb)}Va&&(Ca=ba)}};this.connectToBrother=function(Ab,Va,ba,bb){var jb=Da.isDirection(p.DIR_W|p.DIR_N),Aa=jb?Ab.getAxialP1():Ab.getAxialPn(),db=jb?Va.getAxialP1():Va.getAxialPn();Va=Eb.getAxialP1();jb=Eb.getAxialPn();var t=(Ab=0<vb.length)?vb[0][0]:null,V=Ab?vb[vb.length-
1][1]:null;rb()?(ba=Aa.getY()+ba,bb=db.getY()-bb,Va.moveYTo(ba),jb.moveYTo(bb),Ab&&t.moveXTo(ba),Ab&&V.moveXTo(bb)):(ba=Aa.getX()+ba,bb=db.getX()-bb,Va.moveXTo(ba),jb.moveXTo(bb),Ab&&t.moveXTo(ba),Ab&&V.moveXTo(bb))};this.getClockwiseP1=function(){return Ca[0]};this.getClockwisePn=function(){return Ca[Ca.length-1]};this.getAxialP1=function(){return cc()?Ca[Ca.length-1]:Ca[0]};this.getAxialPn=function(){return cc()?Ca[0]:Ca[Ca.length-1]};this.setDrawingColor=function(Ab){Kb=Ab};this.getDrawingColor=
function(){return Kb}}function Xa(Da,Eb){var Ca=Da,vb=Eb;this.getX=function(){return Ca};this.getY=function(){return vb};this.exchangeXY=function(){var Kb=Ca;Ca=vb;vb=Kb};this.adjust=function(Kb,rb){Ca+=Kb;vb+=rb};this.moveXTo=function(Kb){Ca=Kb};this.moveYTo=function(Kb){vb=Kb}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==
typeof com.kingdee.bos.qing.dsb&&(com.kingdee.bos.qing.dsb={});"undefined"==typeof com.kingdee.bos.qing.dsb.look&&(com.kingdee.bos.qing.dsb.look={});var jc=com.kingdee.bos.qing.dsb.look;p.Edge=kb;p.Corner=Mb;jc.CardLook=p;jc.DecorationParser=Ub;jc.ParsingException=lb;jc.CardLookRenderer=function(){var Da=.5*Math.PI,Eb,Ca;this.setModel=function(ca){Eb=ca};this.draw=function(ca,na,k,Wa,fa){Ca=ca;var ta=Eb.getEdge(p.DIR_N),Ra=Eb.getEdge(p.DIR_S),Oa=Eb.getEdge(p.DIR_W);ca=Eb.getEdge(p.DIR_E);var Qb=Eb.getCorner(p.DIR_NW),
Ka=Eb.getCorner(p.DIR_NE),$b=Eb.getCorner(p.DIR_SW),pc=Eb.getCorner(p.DIR_SE),Bc=na+.5;na=na+Wa-.5;Wa=k+.5;var yc=k+fa-.5;k=Bc+10;fa=na-10;var Gc=Wa+Kb(ta);yc-=Kb(Ra);var Qc=vb(ta,k,Wa,fa),Pa=vb(Ra,k,yc,fa);ta=Gc+10;Ra=yc-10;var fb=vb(Oa,ta,Bc,Ra);Oa=na-Kb(ca);var gb=vb(ca,ta,Oa,Ra);Qc.connectToBrother(fb,gb,ba(Qb),ba(Ka));Pa.connectToBrother(fb,gb,ba($b),ba(pc));fb.connectToBrother(Qc,Pa,ba(Qb),ba($b));gb.connectToBrother(Qc,Pa,ba(Ka),ba(pc));ca=function(sb){Aa(Qc,sb);db(Ka,Qc,gb,sb);Aa(gb,sb);db(pc,
gb,Pa,sb);Aa(Pa,sb);db($b,Pa,fb,sb);Aa(fb,sb);db(Qb,fb,Qc,sb)};if(Oa=Eb.getBackgroundColor())Ca.beginPath(),ca(!1),Ca.closePath(),Ca.fillStyle=Oa,Ca.fill();ca(!0);t(Qc);t(Pa);t(fb);t(gb)};var vb=function(ca,na,k,Wa){var fa=new Cb(ca),ta=k,Ra=fa.getEdge(),Oa=fa.isFlipLeading(),Qb=fa.isFlipOrthogonal(),Ka=Wa-na;ta+=.5*Ab(Ra);var $b=rb(Ra)?30:6;k=[];if(Ra.getType()==kb.TYPE_SINGLE_TURN&&Ka>2*$b){Ka-=$b;var pc=$b*cc(Ra),Bc=Oa?100-Ra.getFirstTurning():Ra.getFirstTurning();Qb=Oa^Qb?!0:!1;Oa=ta+(Qb?$b:0);
ta+=Qb?0:$b;$b=na+pc+Bc/100*Ka;Ka=$b-pc;$b+=pc;k.push(new Xa(na,Oa));k.push(new Xa(Ka,Oa));k.push(new Xa($b,ta));k.push(new Xa(Wa,ta))}else Ra.getType()==kb.TYPE_DOUBLE_TURN&&Ka>3*$b?(Ka-=$b,pc=$b*cc(Ra),Bc=Oa?100-Ra.getSecondTurning():Ra.getFirstTurning(),Ra=Oa?100-Ra.getFirstTurning():Ra.getSecondTurning(),Oa=ta+(Qb?0:$b),ta+=Qb?$b:0,$b=na+pc+Bc/100*Ka,Qb=na+pc+Ra/100*Ka,Ka=$b-pc,$b+=pc,Bc=Qb-pc,pc=Qb+pc,k.push(new Xa(na,Oa)),k.push(new Xa(Ka,Oa)),k.push(new Xa($b,ta)),k.push(new Xa(Bc,ta)),k.push(new Xa(pc,
Oa))):(Oa=Ra.getMinorLineLogicWide()!=p.LINE_NONE&&Qb?ta+2+Va(Ra):ta,k.push(new Xa(na,Oa))),k.push(new Xa(Wa,Oa));fa.setMajorPoints(k);if(ca.getMinorLineLogicWide()!=p.LINE_NONE)for(ca=.5*Ab(fa.getEdge()),na=.5*Va(fa.getEdge()),Wa=fa.getMajorPointCount(),k=0;k<Wa;k+=2)Ka=fa.getMajorPoint(k),Oa=fa.getMajorPoint(k+1),pc=Ka.getX(),Oa=Oa.getX(),Ka=Ka.getY(),ta=0<k?k-1:k+2<Wa?k+2:-1,ta=0>ta?fa.isFlipOrthogonal()?-65535:65535:fa.getMajorPoint(ta).getY(),$b=ta<Ka?-1:1,Ka=rb(fa.getEdge())?ta-na*$b:Ka+(ca+
2+na)*$b,fa.addMinorPart(new Xa(pc,Ka),new Xa(Oa,Ka));fa.unifiedMajorPoints();return fa},Kb=function(ca){var na=0;if(ca.getType()!=kb.TYPE_NONE)if(na=Ab(ca),ca.getType()==kb.TYPE_STRAIGHT)ca.getMinorLineLogicWide()==p.LINE_NONE||(na=na+2+Va(ca));else if(ca.getType()==kb.TYPE_SINGLE_TURN||ca.getType()==kb.TYPE_DOUBLE_TURN)na+=rb(ca)?30:6;return na},rb=function(ca){return ca.isTitleEnhanced()&&ca.isDirection(p.DIR_N)&&(ca.getType()==kb.TYPE_SINGLE_TURN||ca.getType()==kb.TYPE_DOUBLE_TURN)},cc=function(ca){return rb(ca)?
.2:.5},Ab=function(ca){return ca.getType()==kb.TYPE_NONE?0:Eb.getLineThickness(ca.getMajorLineLogicWide())},Va=function(ca){return ca.getMinorLineLogicWide()==p.LINE_NONE?0:Eb.getLineThickness(ca.getMinorLineLogicWide())},ba=function(ca){return ca.getType()==Mb.TYPE_NONE?0:Math.min(ca.getRadius(),10)},bb=function(ca){ca=Eb.getLineColor(ca);!ca&&(ca="rgba(128,128,128,0)");return ca},jb=function(ca){var na=ca.getDrawingColor();if(!na){na=bb(p.LINECOLOR_MAIN);var k=Eb.getLightItems(ca.getEdge().getDirection());
if(k){var Wa=ca.getAxialP1(),fa=ca.getAxialPn();Wa=Ca.createLinearGradient(Wa.getX(),Wa.getY(),fa.getX(),fa.getY());Wa.addColorStop(0,na);for(fa=0;fa<k.length;fa++){var ta=k[fa],Ra=ta.getPosition()/100;ta=bb(ta.getLogicColor());Wa.addColorStop(Ra,ta)}Wa.addColorStop(1,na);na=Wa}ca.setDrawingColor(na)}Ca.strokeStyle=na},Aa=function(ca,na){var k=!0;if(na){var Wa=Ab(ca.getEdge());if(k=0!=Wa)Ca.beginPath(),Ca.lineCap="butt",Ca.lineWidth=Wa,jb(ca)}if(k){for(k=0;k<ca.getMajorPointCount();k++)Wa=ca.getMajorPoint(k),
Ca.lineTo(Wa.getX(),Wa.getY());na&&Ca.stroke()}},db=function(ca,na,k,Wa){var fa=ca.getType()==Mb.TYPE_NONE?0:Eb.getLineThickness(ca.getLineLogicWide());var ta=na.getClockwisePn(),Ra=k.getClockwiseP1();ta=new Xa(ta.getX(),ta.getY());Ra=new Xa(Ra.getX(),Ra.getY());var Oa=ta,Qb=Ra,Ka=Ab(na.getEdge()),$b=Ab(k.getEdge()),pc=fa>Ka,Bc=fa>$b,yc=0,Gc=0;ca.isTheDirection(p.DIR_NE)?(Bc&&(yc=.5*($b-fa)),pc&&(Gc=.5*(-Ka+fa))):ca.isTheDirection(p.DIR_SE)?(pc&&(yc=.5*(Ka-fa)),Bc&&(Gc=.5*($b-fa))):ca.isTheDirection(p.DIR_SW)?
(Bc&&(yc=.5*(-$b+fa)),pc&&(Gc=.5*(Ka-fa))):ca.isTheDirection(p.DIR_NW)&&(pc&&(yc=.5*(-Ka+fa)),Bc&&(Gc=.5*(-$b+fa)));Oa.adjust(yc,Gc);Qb.adjust(yc,Gc);Oa=!0;Wa&&(Oa=0!=fa,Ca.beginPath(),Ca.lineCap="square",Ca.lineWidth=fa,Ca.strokeStyle=bb(p.LINECOLOR_MAIN),Ca.moveTo(ta.getX(),ta.getY()));if(Oa){fa=ca.isTheDirection(p.DIR_NE)||ca.isTheDirection(p.DIR_SW);if(ca.getType()==Mb.TYPE_HARD)ca=fa?Ra.getX():ta.getX(),k=fa?ta.getY():Ra.getY(),Ca.lineTo(ca,k),Ca.lineTo(Ra.getX(),Ra.getY());else if(ca.getType()==
Mb.TYPE_LEAN)for(fa=ta,ta=Ra,Ra=[],Ra.push(fa),Ra.push(ta),Wa&&(Oa=0==Ab(na.getEdge()),na=0==Ab(k.getEdge()),Oa||na)&&(k=.5*ca.getRadius(),ca=ca.isTheDirection(p.DIR_NE)?[-1,0,0,1]:ca.isTheDirection(p.DIR_SE)?[0,-1,-1,0]:ca.isTheDirection(p.DIR_SW)?[1,0,0,-1]:ca.isTheDirection(p.DIR_NW)?[0,1,1,0]:[0,0,0,0],Oa&&(Oa=fa.getX()+k*ca[0],fa=fa.getY()+k*ca[1],Ra.unshift(new Xa(Oa,fa))),na&&(na=ta.getX()+k*ca[2],ca=ta.getY()+k*ca[3],Ra.push(new Xa(na,ca)))),Wa&&Ca.moveTo(Ra[0].getX(),Ra[0].getY()),ca=1;ca<
Ra.length;ca++)Ca.lineTo(Ra[ca].getX(),Ra[ca].getY());else ca.getType()==Mb.TYPE_ROUND&&(k=fa?ta.getX():Ra.getX(),Ra=fa?Ra.getY():ta.getY(),ta=ca.isTheDirection(p.DIR_SE)?[0,1]:ca.isTheDirection(p.DIR_SW)?[1,2]:ca.isTheDirection(p.DIR_NW)?[2,3]:ca.isTheDirection(p.DIR_NE)?[3,4]:[0,0],na=Da*ta[0],ta=Da*ta[1],Ca.arc(k,Ra,ca.getRadius(),na,ta));Wa&&Ca.stroke()}},t=function(ca){var na=ca.getEdge(),k=Va(na);if(0!=k&&na.getType()!=kb.TYPE_NONE){jb(ca);Ca.lineCap="butt";Ca.fillStyle=Ca.strokeStyle;for(var Wa=
0;Wa<ca.getMinorPartCount();Wa++){var fa=ca.getMinorPointA(Wa),ta=ca.getMinorPointB(Wa),Ra=ta.getX()-fa.getX();if(0<Ra)if(na.isCustomMinorLine()){var Oa=na.getParsedPartsBlock(Wa);Oa&&(V(Oa,Ra,k),la(ca,Oa,fa.getX(),fa.getY(),ta.getX(),k))}else fa=ca.unified(fa.getX(),fa.getY()),ta=ca.unified(ta.getX(),ta.getY()),Ca.beginPath(),Ca.lineWidth=k,Ca.moveTo(fa[0],fa[1]),Ca.lineTo(ta[0],ta[1]),Ca.stroke()}}},V=function(ca,na,k){var Wa=[],fa=0,ta=0,Ra=function(Oa,Qb){var Ka=Oa.getTimes();0>Ka?0>Qb?Oa.setRtTimes(1):
Wa.push(Oa):Oa.setRtTimes(Ka);Qb=0>Qb&&0>Ka?1:Ka*Qb;if(Oa.isAtom())Oa=Oa.getUnitLength(k)*Qb,0>Qb?ta+=Oa:fa+=Oa;else for(Ka=0;Ka<Oa.getSubBlockCount();Ka++){var $b=Oa.getSubBlock(Ka);Ra($b,Qb)}};Ra(ca,1);ca=na-fa;ca=0<ca?ca/Math.abs(ta):0;for(na=0;na<Wa.length;na++)Wa[na].setRtTimes(ca)},la=function(ca,na,k,Wa,fa,ta){var Ra=ta*cc(ca.getEdge()),Oa=function(Qb,Ka){Qb.isAppointedColorErased()?(Ca.fillStyle=ca.getDrawingColor(),Ca.strokeStyle=ca.getDrawingColor()):Qb.getAppointedColor()&&(Ca.fillStyle=
Qb.getAppointedColor(),Ca.strokeStyle=Qb.getAppointedColor());if(!(Ka>=fa)){var $b=Qb.getUnitLength(ta),pc=$b*Qb.getComputableTimes();if(Qb.isAtom())if(Qb.getUnitKey().isDrawingOnePixel()){pc=Math.min(pc,fa-Ka);$b=Ka;var Bc=pc;Ka=Qb.getUnitKey();if(Ka!=Ta.BLANK){var yc=.5*ta;Qb=Wa-yc;Bc=$b+Bc;yc=Wa+yc;Ka=Ka==Ta.LEAN_LEFT?-Ra:Ka==Ta.LEAN_RIGHT?Ra:0;Qa(ca,$b+Ka,Qb,Bc+Ka,Qb,Bc-Ka,yc,$b-Ka,yc);Ca.fill()}}else{Bc=Qb.getUnitKey();yc=.2*ta;var Gc=.5*ta,Qc=ta-yc,Pa=.5*Qc;Ca.lineWidth=yc;for(var fb=0;fb<Qb.getDrawingTimes()&&
!(Ka+$b>fa);fb++){if(Bc==Ta.CIRCLE||Bc==Ta.DISC){var gb=Bc==Ta.CIRCLE?Pa:Gc,sb=ca.unified(Ka+Gc,Wa);Ca.beginPath();Ca.arc(sb[0],sb[1],gb,0,2*Math.PI);Bc==Ta.CIRCLE?Ca.stroke():Ca.fill()}else if(Bc==Ta.SQUARE){gb=Ka+.5*yc;sb=gb+Qc;var Na=Wa-Pa,eb=Wa+Pa;Qa(ca,gb,Na,sb,Na,sb,eb,gb,eb);Ca.stroke()}Ka+=$b}}else for($b=0;$b<Qb.getDrawingTimes();$b++)for(Bc=0;Bc<Qb.getSubBlockCount();Bc++)yc=Qb.getSubBlock(Bc),yc=Oa(yc,Ka),Ka+=yc;return pc}};Oa(na,k)},Qa=function(ca,na,k,Wa,fa,ta,Ra,Oa,Qb){na=ca.unified(na,
k);Wa=ca.unified(Wa,fa);ta=ca.unified(ta,Ra);ca=ca.unified(Oa,Qb);Ca.beginPath();Ca.moveTo(na[0],na[1]);Ca.lineTo(Wa[0],Wa[1]);Ca.lineTo(ta[0],ta[1]);Ca.lineTo(ca[0],ca[1]);Ca.closePath()}};var dc=com.kingdee.bos.qing.common.ColorUtil;p.DIR_N=1;p.DIR_S=2;p.DIR_W=4;p.DIR_E=8;p.DIR_NW=p.DIR_N|p.DIR_W;p.DIR_NE=p.DIR_N|p.DIR_E;p.DIR_SW=p.DIR_S|p.DIR_W;p.DIR_SE=p.DIR_S|p.DIR_E;p.LINE_NONE=0;p.LINE_WIDE_1=1;p.LINE_WIDE_2=2;p.LINE_WIDE_3=3;p.LINE_WIDE_4=4;p.LINE_WIDE_5=5;p.LINECOLOR_MAIN=1;p.LINECOLOR_STRONG=
2;p.LINECOLOR_WEAK=3;p.create=function(){var Da=new p;Da.setEdge(p.DIR_N,new kb);Da.setEdge(p.DIR_S,new kb);Da.setEdge(p.DIR_W,new kb);Da.setEdge(p.DIR_E,new kb);Da.setCorner(p.DIR_NW,new Mb);Da.setCorner(p.DIR_NE,new Mb);Da.setCorner(p.DIR_SW,new Mb);Da.setCorner(p.DIR_SE,new Mb);return Da};p.createLightItem=function(Da,Eb,Ca){var vb=new oc;vb.setDir(Da);vb.setPosition(Eb);vb.setLogicColor(Ca);return vb};kb.TYPE_NONE=0;kb.TYPE_STRAIGHT=1;kb.TYPE_SINGLE_TURN=2;kb.TYPE_DOUBLE_TURN=3;kb.FLIP_NONE=0;
kb.FLIP_H=1;kb.FLIP_V=2;kb.FLIP_BOTH=kb.FLIP_H|kb.FLIP_V;Mb.TYPE_NONE=0;Mb.TYPE_HARD=1;Mb.TYPE_ROUND=2;Mb.TYPE_LEAN=3;var Bb=new function(){this.encodeEdgeType=function(Da){return Da==kb.TYPE_STRAIGHT?"STRAIGHT":Da==kb.TYPE_SINGLE_TURN?"SINGLE_TURN":Da==kb.TYPE_DOUBLE_TURN?"DOUBLE_TURN":"NONE"};this.decodeEdgeType=function(Da){return"STRAIGHT"==Da?kb.TYPE_STRAIGHT:"SINGLE_TURN"==Da?kb.TYPE_SINGLE_TURN:"DOUBLE_TURN"==Da?kb.TYPE_DOUBLE_TURN:kb.TYPE_NONE};this.encodeCornerType=function(Da){return Da==
Mb.TYPE_HARD?"HARD":Da==Mb.TYPE_ROUND?"ROUND":Da==Mb.TYPE_LEAN?"LEAN":"NONE"};this.decodeCornerType=function(Da){return"HARD"==Da?Mb.TYPE_HARD:"ROUND"==Da?Mb.TYPE_ROUND:"LEAN"==Da?Mb.TYPE_LEAN:Mb.TYPE_NONE};this.encodeLogicLineWide=function(Da){return Da==p.LINE_WIDE_1?"W1":Da==p.LINE_WIDE_2?"W2":Da==p.LINE_WIDE_3?"W3":Da==p.LINE_WIDE_4?"W4":Da==p.LINE_WIDE_5?"W5":"NONE"};this.decodeLogicLineWide=function(Da){return"W1"==Da?p.LINE_WIDE_1:"W2"==Da?p.LINE_WIDE_2:"W3"==Da?p.LINE_WIDE_3:"W4"==Da?p.LINE_WIDE_4:
"W5"==Da?p.LINE_WIDE_5:p.LINE_NONE};this.encodeLogicColor=function(Da){return Da==p.LINECOLOR_STRONG?"STRONG":Da==p.LINECOLOR_WEAK?"WEAK":"MAIN"};this.decodeLogicColor=function(Da){return"STRONG"==Da?p.LINECOLOR_STRONG:"WEAK"==Da?p.LINECOLOR_WEAK:p.LINECOLOR_MAIN};this.encodeFlip=function(Da){return Da==kb.FLIP_H?"H":Da==kb.FLIP_V?"V":Da==kb.FLIP_BOTH?"BOTH":"NONE"};this.decodeFlip=function(Da){return"H"==Da?kb.FLIP_H:"V"==Da?kb.FLIP_V:"BOTH"==Da?kb.FLIP_BOTH:kb.FLIP_NONE}};lb.UNKNOWN_CHAR=1;lb.INVALID_PREFIX=
2;lb.UNPAIRED_BRACE=3;lb.REDUNDANT_PREFIX=11;lb.REDUNDANT_SUFFIX=12;lb.REDUNDANT_LB=13;lb.REDUNDANT_RB=14;lb.EMPTY_BRACKET=15;var Hb=new function(){var Da="",Eb={};this.register=function(Ca,vb){Da+=Ca;vb=new Jb(Ca,vb);return Eb[Ca]=vb};this.isUnitKeyChar=function(Ca){return 1==Ca.length&&0<=Da.indexOf(Ca)};this.searchUnitKey=function(Ca){return Eb[Ca]}};Jb.SHAPELESS=0;Jb.SHAPE=256;Ta.BLANK=Hb.register("_",0|Jb.SHAPELESS);Ta.LINE=Hb.register("|",1|Jb.SHAPELESS);Ta.LEAN_LEFT=Hb.register("\\",2|Jb.SHAPELESS);
Ta.LEAN_RIGHT=Hb.register("/",3|Jb.SHAPELESS);Ta.CIRCLE=Hb.register("O",4|Jb.SHAPE);Ta.DISC=Hb.register("o",5|Jb.SHAPE);Ta.SQUARE=Hb.register("=",6|Jb.SHAPE)})();(function(){function p(){this.initUi=function(Ga,Cb){throw Error("Implement");};this.resize=function(Ga,Cb){};this.run=function(Ga,Cb,Xa){throw Error("Implement");};this.fireEvent=function(Ga,Cb,Xa){throw Error("Implement");};this.destroy=function(Ga,Cb){}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.dsb&&
(com.kingdee.bos.qing.dsb={});var Wb=com.kingdee.bos.qing.dsb,kb,Mb,oc,Ub,lb,Jb,Rb;(function(){var Ga=com.kingdee.bos.qing.common;kb=Ga.DomUtil;Mb=Ga.ColorUtil;Ga=com.kingdee.bos.qing.framework.common;oc=Ga.AbstractFacade;Ub=Ga.AbstractIcons;lb=Ga.Resource;Ga=com.kingdee.bos.qing.core.model;Jb=Ga.Palette;Ga=com.kingdee.bos.qing.square.model;Rb=Ga.SquareModel})();Wb.Facade=function(Ga,Cb,Xa,jc){oc.call(this,Ga,Cb,Xa,jc);var dc=this.protectedMethod;this.squareLoadSchema=function(Bb){Bb={ref:JSON.stringify(Bb)};
return dc.remote("squareLoadSchema",Bb)};this.squareSaveSchema=function(Bb,Hb){Bb={ref:JSON.stringify(Bb),model:JSON.stringify(Hb)};dc.remote("squareSaveSchema",Bb)};this.longerLoadSchema=function(Bb){Bb={ref:JSON.stringify(Bb)};return dc.remote("longerLoadSchema",Bb)};this.longerSaveSchema=function(Bb,Hb){Bb={ref:JSON.stringify(Bb),model:JSON.stringify(Hb)};dc.remote("longerSaveSchema",Bb)};this.refreshData=function(Bb,Hb,Da){Bb={ref:JSON.stringify(Bb)};Hb&&(Bb.tag=Hb,Da&&(Bb.loafingMode=!0));return dc.remote("refreshData",
Bb)};this.getWidgetBoundMeta=function(Bb){dc.remote("getWidgetBoundMeta",{tag:Bb})};this.getFilterPreparedValue=function(Bb,Hb,Da,Eb,Ca,vb,Kb,rb){Bb={tag:Bb,formalizedType:Hb,metaFieldFullName:Da,displayMetaFieldFullName:Eb,orderByMetaFieldFullName:Ca,orderByAsc:vb,additionalFilters:Kb?JSON.stringify(Kb):null,lightWeight:rb};dc.remote("getFilterPreparedValue",Bb)};this.parseRelativePeriod=function(Bb,Hb){Bb={part:Hb,relative:JSON.stringify(Bb.toJsonObject())};dc.remote("parseRelativePeriod",Bb)};
this.changeTestableCurrentTimeForRelativePeriod=function(Bb){dc.remote("changeTestableCurrentTimeForRelativePeriod",{current:Bb})};this.loadPresetCosmetic=function(Bb){dc.remote("loadPresetCosmetic",{skin:Bb})};this.runtimeKeepAlive=function(){dc.remote("runtimeKeepAlive",{})}};Wb.Icons=new function(){Ub.call(this);var Ga=this.protectedMethod,Cb;this.createLoadingIcon=function(){var Bb=$("<div>");Bb.addClass("sa-common-loading-icon");Bb.css("background-image",lb.getIconUrl("common","loading.gif"));
kb.layoutCtrlCenterAlign(Bb,40);kb.layoutCtrlMiddleAlign(Bb,40);return Bb};this.setComboIconImpl=function(Bb){Cb=Bb};this.protectedInit=function(Bb,Hb){if(!Cb)throw Error("Please setComboIconImpl() first.");Cb.define(Hb,"toolbar");jc(0,0,"btn_undo");jc(0,1,"btn_redo");jc(4,2,"btn_preview");jc(4,3,"btn_backward");jc(4,6,"btn_info");jc(4,7,"btn_overall");jc(4,8,"btn_setting");Cb.define(Hb,"toolbox");Xa(0,0,"widget_unreleased");Xa(0,1,"widget_square");Xa(0,2,"widget_longer");Xa(0,3,"widget_ext");Xa(1,
0,"widget_iframe");Xa(1,1,"widget_tabbedall");Xa(1,2,"widget_tabbedone");Xa(1,3,"widget_panel");Xa(2,0,"widget_label");Xa(2,1,"widget_picture");Xa(2,2,"widget_rich");Xa(2,3,"widget_clock");Xa(3,0,"widget_combobox");Xa(3,1,"widget_calendar");Xa(3,2,"widget_buttongroup");Xa(3,3,"widget_f7");Xa(4,0,"widget_programable");Xa(4,1,"widget_customcard");Xa(4,2,"widget_cloudhub");Xa(4,3,"widget_qingreport");Xa(5,0,"widget_calendaryear");Xa(5,1,"widget_calendarquarter");Xa(5,2,"widget_calendarmonth");Xa(5,3,
"widget_calendarday");Xa(6,0,"widget_titlebar");Cb.define(Hb,"outline");dc(0,0,"widget_page_min");dc(0,1,"widget_square_min");dc(0,2,"widget_longer_min");dc(0,3,"widget_ext_min");dc(2,0,"widget_iframe_min");dc(2,1,"widget_tabbedall_min");dc(2,2,"widget_tabbedone_min");dc(2,3,"widget_panel_min");dc(4,0,"widget_label_min");dc(4,1,"widget_picture_min");dc(4,2,"widget_rich_min");dc(4,3,"widget_clock_min");dc(6,0,"widget_combobox_min");dc(6,1,"widget_calendar_min");dc(6,2,"widget_buttongroup_min");dc(6,
3,"widget_f7_min");dc(8,0,"widget_programable_min");dc(8,1,"widget_customcard_min");dc(8,2,"widget_cloudhub_min");dc(8,3,"widget_qingreport_min");dc(10,0,"widget_calendaryear_min");dc(10,1,"widget_calendarquarter_min");dc(10,2,"widget_calendarmonth_min");dc(10,3,"widget_calendarday_min");dc(12,0,"widget_titlebar_min");Cb.define(Hb,"operate");Xa(0,0,"minidelete");Cb.define(Hb,"card");Xa(0,0,"edit");Xa(0,1,"analysis");Xa(0,2,"refresh");Xa(0,3,"filter");Xa(0,4,"fullscreen");Xa(1,4,"quitFullscreen");
Xa(1,0,"others");Xa(1,1,"info");Xa(1,2,"play");Xa(1,3,"pause");Xa(1,5,"insight");Cb.define(Hb,"ctrl");Xa(0,0,"left");Xa(0,1,"right");Cb.define(Hb,"exhibitionmode");Xa(0,0,"icon_exmode_full");Xa(1,0,"icon_exmode_fit");Xa(2,0,"icon_exmode_hfull");Xa(3,0,"icon_exmode_idle")};var Xa=function(Bb,Hb,Da){Ga.registIcon(Bb,Hb,Da)},jc=function(Bb,Hb,Da){Xa(Bb,Hb,Da);Xa(Bb+1,Hb,Da+"_hover");Xa(Bb+2,Hb,Da+"_disabled")},dc=function(Bb,Hb,Da){Xa(Bb,Hb,Da);Xa(Bb+1,Hb,Da+"_selected")}};Wb.AbstractQingReportExecutor=
p;Wb.AbstractExtReportExecutor=function(){this.initUi=function(Ga,Cb){throw Error("Override");};this.resize=function(Ga,Cb){};this.run=function(Ga,Cb,Xa){throw Error("Override");};this.updateTitle=function(Ga,Cb){throw Error("Override");};this.destroy=function(Ga,Cb){}};Wb.AbstractProgramableCardExecutor=function(){this.initUi=function(Ga,Cb){throw Error("Override");};this.resize=function(Ga,Cb){};this.run=function(Ga,Cb,Xa){throw Error("Override");};this.destroy=function(Ga,Cb){}};Wb.AbstractCosmicCustomCardExecutor=
function(){this.initUi=function(Ga,Cb){throw Error("Override");};this.resize=function(Ga,Cb){};this.run=function(Ga,Cb,Xa){throw Error("Override");};this.destroy=function(Ga,Cb){}};Wb.AbstractCloudhubSubscribesExecutor=function(){this.initUi=function(Ga,Cb){throw Error("Override");};this.resize=function(Ga,Cb){};this.run=function(Ga,Cb,Xa){throw Error("Override");};this.destroy=function(Ga,Cb){}};Wb.VisualWidgetEditableConfirmer=function(Ga,Cb){this.getRtSquareEditableConfirmer=function(){return Ga};
this.getRtLongerEditableConfirmer=function(){return Cb}};Wb.ImageBorderRenerer=function(){var Ga,Cb,Xa,jc,dc;this.setModel=function(Bb,Hb,Da,Eb,Ca){dc=Bb;Ga=Hb;Cb=Da;Xa=Eb;jc=Ca};this.draw=function(Bb,Hb,Da,Eb,Ca){var vb=dc.width,Kb=dc.height,rb=Math.max(0,Math.min(vb,Ga)),cc=Math.max(0,Math.min(vb,Cb)),Ab=Math.max(0,vb-rb-cc),Va=0+rb;vb-=cc;var ba=Math.max(0,Math.min(Kb,Xa)),bb=Math.max(0,Math.min(Kb,jc)),jb=Math.max(0,Kb-ba-bb),Aa=0+ba;Kb-=bb;var db=Math.max(0,Eb-rb-cc),t=Hb+rb;Eb-=cc;var V=Math.max(0,
Ca-ba-bb),la=Da+ba;Ca-=bb;Bb.drawImage(dc,0,0,rb,ba,Hb,Da,rb,ba);Bb.drawImage(dc,Va,0,Ab,ba,t,Da,db,ba);Bb.drawImage(dc,vb,0,cc,ba,Eb,Da,cc,ba);Bb.drawImage(dc,0,Aa,rb,jb,Hb,la,rb,V);Bb.drawImage(dc,Va,Aa,Ab,jb,t,la,db,V);Bb.drawImage(dc,vb,Aa,cc,jb,Eb,la,cc,V);Bb.drawImage(dc,0,Kb,rb,bb,Hb,Ca,rb,bb);Bb.drawImage(dc,Va,Kb,Ab,bb,t,Ca,db,bb);Bb.drawImage(dc,vb,Kb,cc,bb,Eb,Ca,cc,bb)}};Wb.IntegrationRegister=new function(){var Ga,Cb,Xa,jc,dc,Bb,Hb,Da,Eb,Ca,vb,Kb,rb,cc,Ab,Va;this.registerWidgetSourceSelector=
function(ba){Ga=ba};this.getWidgetSourceSelector=function(){return Ga};this.registerQingReportExecutor=function(ba){Eb=ba};this.getQingReportExecutor=function(){return Eb};this.registerExtReportSourceSelector=function(ba){Ca=ba};this.getExtReportSourceSelector=function(){return Ca};this.registerExtReportExecutor=function(ba){vb=ba};this.getExtReportExecutor=function(){return vb};this.registerCosmicCustomCardSourceSelector=function(ba){rb=ba};this.getCosmicCustomCardSourceSelector=function(){return rb};
this.registerCosmicCustomCardExecutor=function(ba){cc=ba};this.getCosmicCustomCardExecutor=function(){return cc};this.registerCloudhubSubscribesSourceSelector=function(ba){Ab=ba};this.getCloudhubSubscribesSourceSelector=function(){return Ab};this.registerCloudhubSubscribesExecutor=function(ba){Va=ba};this.getCloudhubSubscribesExecutor=function(){return Va};this.registerProgramableCardExecutor=function(ba){Kb=ba};this.getProgramableCardExecutor=function(){return Kb};this.registerSquareDesignerCreator=
function(ba){Cb=ba};this.showSquareDesigner=function(ba,bb,jb,Aa,db,t,V){Cb(ba,bb,jb,Aa,db,t,V)};this.registerSquareAnalysisHandler=function(ba){Xa=ba};this.squareAnalysis=function(ba,bb,jb,Aa,db,t){Xa(ba,bb,jb,Aa,db,t)};this.registerSquareSceneCreator=function(ba){jc=ba};this.createDashboardSquareScene=function(ba,bb){jc(ba,bb)};this.registerLongerDesignerCreator=function(ba){dc=ba};this.showLongerDesigner=function(ba,bb,jb,Aa,db,t,V){dc(ba,bb,jb,Aa,db,t,V)};this.registerLongerSceneCreator=function(ba){Bb=
ba};this.createDashboardLongerScene=function(ba,bb){Bb(ba,bb)};this.registerBuiltinVisualWidgetEditableConfirmerParser=function(ba){Hb=ba};this.parseBuiltinVisualWidgetEditableConfirmer=function(ba){return Hb(ba)};this.registerPictrueLoader=function(ba){Da=ba};this.getPictureLoader=function(){return Da}};p.EVENT_FILTER="filter";var Ta=new function(){var Ga;this.unpack=function(Cb){Ga=Cb};this.dipSome=function(Cb){var Xa={};if(Ga)for(var jc=0;jc<Cb.length;jc++)Ga.pickItems(Cb[jc],Xa);return Xa};this.dip=
function(Cb){return Ga?Ga.pickItems(Cb):null}};Ta.DSB_PAGE="page";Ta.DSB_PAGE_TITLE_BAR="pageTitleBar";Ta.DSB_CARD="card";Ta.DSB_LABEL="label";Ta.DSB_INPUTER="sinlgeLineInputer";Ta.DSB_TABBED_HEAD="tabbedHead";Ta.DSB_BUTTON_GROUP="buttonGroup";Ta.DESIGN="designtime";Ta.SQUARE_EXHIBITION="squareExhibition";Ta.CHART_COMMON="chartCommon";Ta.CHART_PALETTE="chartPalette";Ta.CHART_PROGRESS="chartProgress";Ta.getPageBackgroundColor=function(){return Ta.dip(Ta.DSB_PAGE)[Ta.Key_Page_BackgroundColor]};Ta.getCardBackgroundColor=
function(Ga,Cb){Cb=Cb?Cb:Ta.dip(Ta.DSB_CARD);var Xa=Cb[Ta.Key_Card_BackgroundColor]||"#ffffff";Ga&&(Ga=parseFloat(Cb[Ta.Key_Card_BackgroundOpacity]||1),Xa=Mb.withOpacityToRgba(Xa,Ga));return Xa};Ta.decorateCardSimpleBorder=function(Ga,Cb,Xa){Xa=Xa?Xa:Ta.dip(Ta.DSB_CARD);var jc=parseInt(Xa[Ta.Key_Card_BorderRadius]||0);Cb.css("border-radius",jc+"px");Ga=Ta.getCardBackgroundColor(Ga,Xa);Cb.css("background-color",Ga);(Xa=Xa[Ta.Key_Card_ShadowColor]||"")&&(Xa="0 1px 3px 0 "+Xa);Cb.css("box-shadow",Xa)};
Ta.undecorateCardSimpleBorder=function(Ga){Ga.css("border-radius","");Ga.css("background-color","");Ga.css("box-shadow","")};Ta.decorateCardTitle=function(Ga,Cb){Cb=Cb?Cb:Ta.dip(Ta.DSB_CARD);var Xa=Cb[Ta.Key_Card_TitleColor]||"#5b6373";Cb=parseInt(Cb[Ta.Key_Card_TitleFontSize]||12);Ga.css("color",Xa);Ga.css("font-size",Cb+"px")};Ta.decorateCardModalLayer=function(Ga,Cb,Xa){Xa=Xa?Xa:Ta.dip(Ta.DSB_CARD);var jc=Xa[Ta.Key_Card_ModalLayerColor]||"#999999";Cb?(jc=Mb.withOpacityToRgba(jc,.5),Cb="rgba(128,128,128,0.001)"):
(Cb=Xa[Ta.Key_Card_BackgroundColor]||"#ffffff",Cb=Mb.withOpacityToRgba(Cb,.8));Ga.css("color",jc);Ga.css("background-color",Cb)};Ta.decorateLabel=function(Ga,Cb){Cb=Cb?Cb:Ta.dip(Ta.DSB_LABEL);Ga.css("color",Cb[Ta.Key_Label_Color]||"#808080")};Ta.decorateInputer=function(Ga,Cb){Cb=Cb?Cb:Ta.dip(Ta.DSB_INPUTER);var Xa=Cb[Ta.Key_Inputer_Color]||"#808080";Cb=Cb[Ta.Key_Inputer_UnderlineColor]||"#808080";Ga.css("background-color","transparent");Ga.css("color",Xa);Ga.css("box-shadow","0 1px 0 0 "+Cb)};Ta.decorateDesigntimeRectangle=
function(Ga,Cb){Cb=Cb?Cb:Ta.dip(Ta.DESIGN);Ga.css("box-shadow","inset 0 0 0 1px "+Cb[Ta.Key_Design_ColorC])};Ta.getChartDefaultPalette=function(Ga){if(!Ga)return null;a:{switch(Ga){case Rb.ChartType_ProgressBar:case Rb.ChartType_ProgressColumn:case Rb.ChartType_ProgressCircle:var Cb=Ta.dip(Ta.CHART_PROGRESS);Ga=Cb[Ta.Key_ChartProgress_DesiredColor]+","+Cb[Ta.Key_ChartProgress_CompleteColor];break a;case Rb.ChartType_Grid:case Rb.ChartType_CustomList:case Rb.ChartType_KPI:case Rb.ChartType_Dial:case Rb.ChartType_Map:case Rb.ChartType_Waterfall:Ga=
"";break a;case Rb.ChartType_Line:case Rb.ChartType_Radar:Ga=Ta.Key_Palette_ContrastingLine;break;case Rb.ChartType_GIS:case Rb.ChartType_Scatter:Ga=Ta.Key_Palette_ContrastingArea;break;default:Ga=Ta.Key_Palette_Base}Cb=Ta.dip(Ta.CHART_PALETTE);Ga=Cb[Ga]}Cb=new Jb;Cb.decodeFromString(Ga);return Cb};Ta.Key_Page_BackgroundColor="backgroundColor";Ta.Key_Page_WatermarkColor="watermarkColor";Ta.Key_PageTitleBar_BackgroundColor="backgroundColor";Ta.Key_PageTitleBar_SeparaterLineWidth="separaterLineWidth";
Ta.Key_PageTitleBar_SeparaterColor="separaterColor";Ta.Key_Card_BackgroundColor="backgroundColor";Ta.Key_Card_BackgroundOpacity="backgroundOpacity";Ta.Key_Card_ShadowColor="shadowColor";Ta.Key_Card_BorderRadius="borderRadius";Ta.Key_Card_TitleColor="titleColor";Ta.Key_Card_TitleFontSize="titleFontSize";Ta.Key_Card_ModalLayerColor="modalLayerColor";Ta.Key_Label_Color="color";Ta.Key_Inputer_Color="color";Ta.Key_Inputer_UnderlineColor="underlineColor";Ta.Key_TabbedHead_MainColor="mainColor";Ta.Key_TabbedHead_InverseColor=
"inverseColor";Ta.Key_ButtonGroup_Color="color";Ta.Key_ButtonGroup_BackgroundColor="backgroundColor";Ta.Key_ButtonGroup_BorderColor="borderColor";Ta.Key_ButtonGroup_Color_Selected="color_selected";Ta.Key_ButtonGroup_BackgroundColor_Selected="backgroundColor_selected";Ta.Key_ButtonGroup_BorderColor_Selected="borderColor_selected";Ta.Key_ButtonGroup_BackgroundColor_Hover="backgroundColor_hover";Ta.Key_Design_Adjustable="adjustable";Ta.Key_Design_Unadjustable="unadjustable";Ta.Key_Design_ColorA="colorA";
Ta.Key_Design_ColorB="colorB";Ta.Key_Design_ColorC="colorC";Ta.Key_Palette_Base="base";Ta.Key_Palette_ContrastingLine="contrastingLine";Ta.Key_Palette_ContrastingArea="contrastingArea";Ta.Key_ChartProgress_DesiredColor="progressDesiredColor";Ta.Key_ChartProgress_CompleteColor="progressCompleteColor";Wb.CosmeticBag=Ta})();
(function(){function p(){var Ca=[],vb=!0,Kb=p.POSITION_LEFT|p.POSITION_TOP,rb,cc,Ab,Va=!1,ba;this.addMenuItem=function(fa,ta,Ra,Oa){Ca.push([fa,ta,Ra,Oa?!0:!1])};this.setMenuItem=function(fa,ta,Ra,Oa,Qb){var Ka=Ca[fa];Ka||(Ka=[],Ca[fa]=Ka);ta&&(Ka[0]=ta);Ra&&(Ka[1]=Ra);Oa&&(Ka[2]=Oa);!0!==Qb&&!1!==Qb||(Ka[3]=Qb);!vb&&rb&&rb.is(":visible")&&(Ra=Ab.children().eq(fa),ta=Ra.children().eq(0),Ra=Ra.children().eq(1),Bb.background(ta,Ca[fa][0]),Ra.text(Ca[fa][1]))};this.setGourd6Mode=function(fa){vb=fa;rb&&
t();vb?window.localStorage.removeItem("kd.qing.dsb.CornerMenu.gourd6"):window.localStorage.setItem("kd.qing.dsb.CornerMenu.gourd6",vb)};this.isGourd6Mode=function(){return vb};this.setPosition=function(fa){Kb=fa;rb&&(db(),vb&&Ab.css(V()));fa=((Kb&p.POSITION_BOTTOM)==p.POSITION_BOTTOM?"S":"N")+(Aa()?"E":"W");"NW"==fa?window.localStorage.removeItem("kd.qing.dsb.CornerMenu.position"):window.localStorage.setItem("kd.qing.dsb.CornerMenu.position",fa)};this.getPosition=function(){return Kb};this.setup=
function(fa,ta){if(!rb){var Ra=window.localStorage.getItem("kd.qing.dsb.CornerMenu.position");Ra&&(Kb=("S"==Ra.charAt(0)?p.POSITION_BOTTOM:p.POSITION_TOP)|("E"==Ra.charAt(1)?p.POSITION_RIGHT:p.POSITION_LEFT));(Ra=window.localStorage.getItem("kd.qing.dsb.CornerMenu.gourd6"))&&(vb="false"!=Ra);rb=$("<div>");rb.css({cursor:"pointer","z-index":ta});bb().appendTo(rb);Ab=$("<div>");Ab.css({"background-color":k(),color:Hb.dip(Hb.DSB_LABEL)[Hb.Key_Label_Color],border:"1px solid "+Wa(),"border-radius":"6px"});
Ab.appendTo(rb);rb.appendTo(fa);jb(fa);db();t()}};var bb=function(){var fa=$("<div>");fa.css({"background-color":na(),"border-radius":"6px"});cc=$("<div>");cc.append(fa);cc.on("click",function(ta){la();ta.stopPropagation()});return cc},jb=function(fa){var ta=0,Ra=-1,Oa=-1;ba=function(){ta=0};var Qb=function(){vb&&(!Va&&(new Date).getTime()>ta?(rb.hide(),ta=0):setTimeout(Qb,2E3))};fa.on("mousemove",function(Ka){!vb||Ka.screenX==Ra&&Ka.screenY==Oa||(Ra=Ka.screenX,Oa=Ka.screenY,0==ta&&(rb.show(),setTimeout(Qb,
2E3)),ta=(new Date).getTime()+3E3)});fa.on("click",function(Ka){vb&&Va&&(Va=!1,Ab.animate(V(),250))})},Aa=function(){return(Kb&p.POSITION_RIGHT)==p.POSITION_RIGHT},db=function(){var fa=0,ta="",Ra=-12,Oa="",Qb=-6,Ka="";Aa()&&(fa="",ta=0,Ra="",Oa=-12,Qb="",Ka=-6);var $b=0,pc="",Bc=6,yc="";(Kb&p.POSITION_BOTTOM)==p.POSITION_BOTTOM&&($b="",pc=0,Bc="",yc=6);Mb.layoutCtrlWithLRTB(rb,fa,ta,0,$b,pc,0);Mb.layoutCtrlWithLRTB(cc,fa,ta,40,$b,pc,40);Mb.layoutCtrlWithLRTB(cc.children(),Ra,Oa,24,6,null,12);Mb.layoutCtrlWithLRTB(Ab,
Qb,Ka,"auto",Bc,yc,"auto")},t=function(){Ab.stop();vb?(Va&&(Va=!1,Ab.animate(V(),250)),cc.show(),rb.hide(),ba()):(cc.hide(),rb.show(),la())},V=function(){var fa=Aa()?"right":"left",ta=Ab.prop("offsetWidth"),Ra={};Ra[fa]=-ta;return Ra},la=function(){Va=!0;Ab.empty();for(var fa=$(document.createDocumentFragment()),ta=0,Ra=0;Ra<Ca.length;Ra++)if(Ca[Ra]){var Oa=ca(Ra);0<ta&&Oa.css("border-top","1px solid "+Wa());Oa.appendTo(fa);ta++}fa.appendTo(Ab);Ab.css(V());fa=Ab;ta=fa.animate;Ra=Aa()?"right":"left";
Oa={};Oa[Ra]=-6;ta.call(fa,Oa,325)},Qa=function(fa,ta){var Ra=Ca[fa];fa=Ra[1];if(Ra[3]){Ra=k();var Oa=$("<div>");Oa.text(fa);Oa.css({"white-space":"nowrap",color:Hb.dip(Hb.DSB_LABEL)[Hb.Key_Label_Color]});Oa.css("text-shadow","-1px -1px "+Ra+", 1px 1px "+Ra+", -1px 1px "+Ra+", 1px -1px "+Ra);Aa()?(ta=Mb.upwardCoordinate(ta[0],[ta.prop("offsetWidth"),0],rb[0]),Mb.layoutCtrlWithLRTB(Oa,null,0+rb.prop("offsetWidth")-ta[0],"auto",ta[1],null,"auto")):(ta=Mb.upwardCoordinate(ta[0],[0,0],rb[0]),Mb.layoutCtrl(Oa,
ta[0],ta[1],"auto","auto"));Oa.appendTo(rb);Oa.animate({"font-size":"28px"},325,function(){setTimeout(function(){Oa.remove()},1E3)})}},ca=function(fa){var ta=$("<div>");Mb.layoutCtrlWithLRTB(ta,12,null,16);Mb.layoutCtrlMiddleAlign(ta,16);Bb.background(ta,Ca[fa][0]);var Ra=$("<div>");Ra.css({position:"relative","white-space":"nowrap","line-height":"24px"});Ra.text(Ca[fa][1]);var Oa=$("<div>");Oa.css({position:"relative",height:"24px",padding:"6px 12px 6px 32px"});Oa.on("click",function(Qb){Qa(fa,Ra);
(0,Ca[fa][2])()});Oa.append(ta);Oa.append(Ra);return Oa},na=function(){var fa=Hb.dip(Hb.DSB_LABEL)[Hb.Key_Label_Color];return fa=oc.withOpacityToRgba(fa,.2)},k=function(){var fa=Hb.dip(Hb.DSB_CARD)[Hb.Key_Card_BackgroundColor];return fa=oc.withOpacityToRgba(fa,.8)},Wa=function(){var fa=Hb.dip(Hb.DSB_LABEL)[Hb.Key_Label_Color];return fa=oc.withOpacityToRgba(fa,.3)}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos=
{});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.dsb&&(com.kingdee.bos.qing.dsb={});"undefined"==typeof com.kingdee.bos.qing.dsb.commonui&&(com.kingdee.bos.qing.dsb.commonui={});var Wb=com.kingdee.bos.qing.dsb.commonui;Wb.AbstractDialogWithJsonExportor=function(){lb.call(this);var Ca=this.protectedMethod,vb,Kb=function(cc,Ab){for(var Va=new Rb,ba=0;ba<Ab.length;ba++){var bb=Ab[ba];"/"==bb?Va.addSeperator():Va.addItemModel(bb)}ba=$(cc.currentTarget);
cc=ba.parent();Ab=cc.prop("clientHeight");ba=ba.prop("offsetLeft");bb=new Jb;bb.setModel(Va);bb.show(cc,ba,Ab,null,!0);return bb},rb=function(cc,Ab,Va,ba,bb){Eb.isSupported()&&"function"==typeof FileReader?(vb||(vb=$("<div>"),vb.appendTo(bb()),Mb.layoutCtrl(vb,-1E3,-1E3,0,0)),vb.empty(),bb=new dc,bb.appendInvislbelUiTo(vb),bb.selectFile(function(jb){if(jb=jb.getFile()){var Aa=new FileReader;Aa.onload=function(db){db=db.target.result;try{var t=JSON.parse(db)}catch(ca){Ca.getMessageCurtain().showPrompt(Ub.get("promptParseFileError",
"\u89e3\u6790\u6587\u4ef6\u65f6\u53d1\u751f\u9519\u8bef\u3002")+ca,6E4);return}if(t.qingStyleType!=cc)Ca.getMessageCurtain().showPrompt(Ub.get("promptFileTypeVerifyError","\u6587\u4ef6\u7c7b\u578b\u4e0d\u5339\u914d\u3002"),6E4);else{db=!1;var V=parseInt(t.version),la=parseInt(Ab);if(isNaN(V))Ca.getMessageCurtain().showPrompt(Ub.get("promptFileVersionVerifyError","\u6587\u4ef6\u7248\u672c\u4fe1\u606f\u9519\u8bef\u3002"),6E4);else if(V>la)Ca.getMessageCurtain().showPrompt(Ub.get("promptFileVersionHigherError",
"\u4e0d\u652f\u6301\u89e3\u6790\u4ece\u9ad8\u7248\u672c\u73af\u5883\u5bfc\u51fa\u7684\u6587\u4ef6\u3002"),6E4);else{V<la&&(db=!0);try{var Qa=t.content;db&&Va(V,Qa);ba(Qa,function(ca){ca&&Ca.getMessageCurtain().showSuccess(Ub.get("promptImportFromFileSuccess","\u5df2\u4ece\u9009\u4e2d\u6587\u4ef6\u5bfc\u5165\u3002"))})}catch(ca){Ca.getMessageCurtain().showPrompt(Ub.get("promptImportFromFileError","\u5bfc\u5165\u65f6\u53d1\u751f\u9519\u8bef\u3002")+ca,6E4)}}}};Aa.onerror=function(db){Ca.getMessageCurtain().showPrompt(Ub.get("promptReadFileError",
"\u8bfb\u53d6\u6587\u4ef6\u65f6\u53d1\u751f\u9519\u8bef\u3002")+Aa.error,6E4)};Aa.readAsText(jb)}},"."+cc)):Ca.getMessageCurtain().showPrompt(Ub.get("promptCannotSupportFile","\u7531\u4e8e\u6d4f\u89c8\u5668\u517c\u5bb9\u6027\u7684\u95ee\u9898\uff0c\u5f53\u524d\u73af\u5883\u4e0d\u652f\u6301\u5bfc\u5165\u3001\u5bfc\u51fa\u6587\u4ef6\u3002"))};Ca.initToolbarExportButton=function(cc,Ab,Va,ba,bb,jb,Aa,db){Ca.getDialogCtrl().createToolbarButton(Ub.get("exportTo","\u5bfc\u51fa"),function(t){var V=Jb.createActionMenuItem(Ub.get("exportToFile",
"\u5bfc\u51fa\u5230\u6587\u4ef6"),function(){if(Eb.isSupported()&&"function"==typeof FileReader){var Qa={};Qa.qingStyleType=cc;Qa.version=Ab;Qa.content=ba();Qa=JSON.stringify(Qa);var ca=kb.formatDate("yyyyMMdd_HHmmss")+"."+cc;Eb.write(ca,Qa)}else Ca.getMessageCurtain().showPrompt(Ub.get("promptCannotSupportFile","\u7531\u4e8e\u6d4f\u89c8\u5668\u517c\u5bb9\u6027\u7684\u95ee\u9898\uff0c\u5f53\u524d\u73af\u5883\u4e0d\u652f\u6301\u5bfc\u5165\u3001\u5bfc\u51fa\u6587\u4ef6\u3002"))}),la=Jb.createActionMenuItem(Ub.get("exportToClipboard",
"\u5bfc\u51fa\u5230\u6837\u5f0f\u526a\u8d34\u677f"),function(){var Qa=Va(Da),ca=ba();Da.copy(Qa,ca);Ca.getMessageCurtain().showSuccess(Ub.get("promptExportSuccess","\u5df2\u5bfc\u51fa\u3002"))});Kb(t,[V,la])},db?!0:!1);Ca.getDialogCtrl().createToolbarButton(Ub.get("importFrom","\u5bfc\u5165"),function(t){var V=Jb.createActionMenuItem(Ub.get("importFromFile","\u4ece\u6587\u4ef6\u5bfc\u5165")+"...",function(){rb(cc,Ab,bb,jb,Aa)}),la=Jb.createActionMenuItem(Ub.get("importFromClipboard","\u4ece\u6837\u5f0f\u526a\u8d34\u677f\u5bfc\u5165"),
function(){var Qa=Va(Da);(Qa=Da.paste(Qa))?jb(Qa,function(ca){ca&&Ca.getMessageCurtain().showSuccess(Ub.get("promptImportFromClipboardSuccess","\u5df2\u4ece\u6837\u5f0f\u526a\u8d34\u677f\u5bfc\u5165\u3002"))}):Ca.getMessageCurtain().showPrompt(Ub.get("promptImportFromClipboardEmpty","\u6837\u5f0f\u526a\u8d34\u677f\u4e2d\u6ca1\u6709\u5185\u5bb9\u3002"))});Kb(t,[V,la])})};Ca.popupMenu=Kb};Wb.CornerMenu=p;var kb,Mb,oc,Ub,lb,Jb,Rb,Ta,Ga,Cb,Xa,jc,dc,Bb,Hb;(function(){var Ca=com.kingdee.bos.qing.common;
kb=Ca.Util;Mb=Ca.DomUtil;oc=Ca.ColorUtil;Ca=com.kingdee.bos.qing.framework.common;Ub=Ca.MultilanguageManager.createPackageAccessor(Wb);Ca=com.kingdee.bos.qing.ui.component;lb=Ca.AbstractModalDialog;Jb=Ca.Menu;Rb=Ca.MenuModel;Ta=Ca.LeftTabContainer;Ga=Ca.CheckBox;Cb=Ca.RadioButton;Xa=Ca.RadioButtonGroup;jc=Ca.Label;Ca=com.kingdee.bos.qing.common.ui;dc=Ca.LocalFileSelector;Ca=com.kingdee.bos.qing.dsb;Bb=Ca.Icons;Hb=Ca.CosmeticBag})();var Da=new function(){this.getKeyOfCosmetic=function(){return"kd.qing.dashboard.style"};
this.getKeyOfCardlook=function(){return"kd.qing.dashboard.cardlook"};this.copy=function(Ca,vb){window.sessionStorage.setItem(Ca,JSON.stringify(vb))};this.paste=function(Ca){return(Ca=window.sessionStorage.getItem(Ca))?JSON.parse(Ca):null}},Eb=new function(){this.isSupported=function(){if("undefined"===typeof Blob)return!1;try{new Blob(["test"])}catch(Kb){return!1}return Ca()||"function"==typeof navigator.msSaveBlob};this.write=function(Kb,rb){var cc=Ca();cc?(rb=vb(rb),rb=URL.createObjectURL(rb),cc.href=
rb,cc.download=Kb,Kb=new MouseEvent("click"),cc.dispatchEvent(Kb),URL.revokeObjectURL(rb)):(rb=vb(rb),navigator.msSaveBlob(rb,Kb))};var Ca=function(){var Kb=document.createElementNS("http://www.w3.org/1999/xhtml","a");return"download"in Kb?Kb:null},vb=function(Kb){return new Blob([Kb],{type:"application/octet-stream"})}};p.POSITION_LEFT=1;p.POSITION_RIGHT=2;p.POSITION_TOP=16;p.POSITION_BOTTOM=32;p.ConfigDialog=function(){function Ca(jb,Aa){Ta.AbstractTabPane.call(this);var db;this.getTabHeadText=
function(){return jb};this.getJqUi=function(){db||(db=$("<div>"),db.css({color:"#666","white-space":"pre-wrap",padding:"10px 20px","line-height":"24px"}));return db};this.into=function(){db.text()||0!=db.children().length||Aa(db)}}function vb(jb){Ta.AbstractTabPane.call(this);var Aa;this.getTabHeadText=function(){return Ub.get("cornerMenuTabConfig","\u83dc\u5355\u4e2a\u6027\u5316")};this.getJqUi=function(){!Aa&&db();return Aa};var db=function(){Aa=$("<div>");var la=new jc;la.setText(Ub.get("cornerMenuConfigPosition",
"\u83dc\u5355\u4f4d\u7f6e"));var Qa=V(Ub.get("cornerMenuConfigPositionNW","\u5de6\u4e0a\u89d2"),p.POSITION_LEFT|p.POSITION_TOP),ca=V(Ub.get("cornerMenuConfigPositionNE","\u53f3\u4e0a\u89d2"),p.POSITION_RIGHT|p.POSITION_TOP),na=V(Ub.get("cornerMenuConfigPositionSW","\u5de6\u4e0b\u89d2"),p.POSITION_LEFT|p.POSITION_BOTTOM),k=V(Ub.get("cornerMenuConfigPositionSE","\u53f3\u4e0b\u89d2"),p.POSITION_RIGHT|p.POSITION_BOTTOM),Wa=new Xa;Wa.addElement(Qa);Wa.addElement(ca);Wa.addElement(na);Wa.addElement(k);
Wa.addChangedListener(function(fa,ta){ta&&jb.setPosition(fa.getUserObject())});Wa=new Ga;Wa.setText(Ub.get("cornerMenuConfigKeepMenu","\u83dc\u5355\u4e00\u76f4\u505c\u7559\u5728\u754c\u9762\u4e0a"));Wa.setChecked(!jb.isGourd6Mode());Wa.addCheckedListener(function(fa,ta){ta&&jb.setGourd6Mode(!fa.isChecked())});t(la.getJqUi(),20,10,120,20);t(Qa.getJqUi(),20,40,120,23);t(ca.getJqUi(),160,40,120,23);t(na.getJqUi(),20,80,120,23);t(k.getJqUi(),160,80,120,23);t(Wa.getJqUi(),20,130,200,23)},t=function(la,
Qa,ca,na,k){la.appendTo(Aa);Mb.layoutCtrl(la,Qa,ca,na,k)},V=function(la,Qa){var ca=new Cb;ca.setText(la);ca.setUserObject(Qa);ca.setChecked(jb.getPosition()==Qa);return ca}}function Kb(jb){Ta.AbstractTabPane.call(this);var Aa;this.getTabHeadText=function(){return Ub.get("cornerMenuTabPersonalization","\u4eea\u8868\u677f\u8bbe\u7f6e")};this.getJqUi=function(){Aa||(Aa=$("<div>"),jb(Aa));return Aa}}lb.call(this);var rb=this,cc=this.protectedMethod,Ab,Va,ba,bb;this.setContextCreator=function(jb){Va=new Ca(Ub.get("cornerMenuTabContextInfo",
"\u4eea\u8868\u677f\u4fe1\u606f"),jb)};this.setEnvCreator=function(jb){ba=new Ca(Ub.get("cornerMenuTabEnvInfo","\u73af\u5883\u4fe1\u606f"),jb)};this.setPersonalizationCreator=function(jb){bb=new Kb(jb)};this.show=function(jb,Aa){rb.setSize(640,360);cc.setTitle(jb);cc.setFooterClosingOnly(!0);cc.setContentPaneCreator(function(){Ab=new Ta;Ab.setBorderVisible(!0);Ab.setTabPanes([new vb(Aa),bb,ba,Va]);Ab.setTabHeadItemHeight(44);Ab.setTabHeadWidth(100);return Ab.getJqUi()});cc.setClosingAction(function(db){});
rb.showDialog();Ab.refreshUi()}}})();(function(){function p(){var v=this,g,r=new bc,y=new bc,R;this.addPropertyChangedListener=function(wb){r.addListener(wb)};this.removePropertyChangedListener=function(wb){r.removeListener(wb)};var T=function(wb,Fa){r.fireEvent(function(ua){ua(wb,Fa)})};this.addChildrenChangedListener=function(wb){y.addListener(wb)};this.removeChildrenChangedListener=function(wb){y.removeListener(wb)};var Y=function(wb,Fa,ua){y.fireEvent(function(Sb){Sb(wb,Fa,ua)})};this.getPage=function(){if(!g){g=new Da;var wb=g.getWidgetTypeName();
g.setName(wb);g.setDisplayName($c.getInstance(wb).getTypeDisplayName());g.setRectangle(0,0,1024,768);g.setCardBorder(ca.createInstance(ca.TYPE_SIMPLE));g.addPropertyChangedListener(function(Fa,ua){T(Fa,ua)});g.addChildrenChangedListener(function(Fa,ua,Sb){Y(Fa,ua,Sb)})}return g};this.getCurrentCosmeticModel=function(){return R};this.setCurrentCosmeticModel=function(wb){R=wb};this.allocateNameForNewWidget=function(wb,Fa,ua,Sb){var hc=Fa.getTypeDisplayName();ua=pa(hc,ua);wb.setDisplayName(ua);Fa=Fa.getTypeName();
Sb=Ba(Fa+(new Date).getTime(),"z",Sb);wb.setName(Sb)};this.reallocateNameForCopyPasteWidget=function(wb){ia(wb,function(Fa,ua){Fa.setDisplayName(ua)},function(Fa,ua){Fa.setName(ua)})};this.reallocateNameForCutPasteWidget=function(wb,Fa,ua){ia(wb,Fa,ua)};var ia=function(wb,Fa,ua){var Sb={},hc={};for(wb=[wb];0<wb.length;){var wc=wb.shift(),ma=wc.getDisplayName();v.isDisplayNameExist(ma)?(ma=pa(ma+"_",Sb),Fa(wc,ma)):Sb[ma]=!0;ma=wc.getName();var qa=Ba(ma,"_",hc);qa!=ma&&ua(wc,qa);if(wc.isContainer())for(ma=
0;ma<wc.getWidgetCount();ma++)wb.push(wc.getWidget(ma))}},pa=function(wb,Fa){for(var ua=1,Sb=wb+ua;v.isDisplayNameExist(Sb)||Fa&&Fa[Sb];)ua++,Sb=wb+ua;Fa&&(Fa[Sb]=!0);return Sb},Ba=function(wb,Fa,ua){for(var Sb=1,hc=wb;Ya(hc,"getName")||ua&&ua[hc];)hc=wb+Fa+Sb,Sb++;ua&&(ua[hc]=!0);return hc},Ya=function(wb,Fa){var ua=!1;v.getPage().traversalMeAndDescendents(function(Sb){return Sb[Fa]()==wb?ua=!0:!1});return ua};this.isDisplayNameExist=function(wb){return Ya(wb,"getDisplayName")};this.searchWidgetByName=
function(wb){return v.getPage().searchWidgetByName(wb)};this.collectStylesToJsonObject=function(wb){var Fa=[];wb.isContainer()?wb.traversalMeAndDescendents(function(hc){$a(hc,Fa)}):$a(wb,Fa);wb=null;if(0<Fa.length){wb=[];for(var ua=0;ua<Fa.length;ua++){var Sb=Fa[ua].toJsonObject();wb.push(Sb)}}return wb};var $a=function(wb,Fa){wb.isInstanceOf(p.WidgetSuperType_WithCommonStyle)&&wb.collectStyleAndAllocateId(function(ua){for(var Sb=-1,hc=0;hc<Fa.length;hc++)if(Fa[hc].isEquals(ua)){Sb=hc;break}0>Sb&&
(Sb=Fa.length,Fa.push(ua));return""+Sb})};this.distributeStylesFromJsonObject=function(wb,Fa){for(var ua=[],Sb=0;Sb<Fa.length;Sb++){var hc=Fa[Sb],wc=new Qa;wc.fromJsonObject(hc);ua.push(wc)}wb.isContainer()?wb.traversalMeAndDescendents(function(ma){Fb(ma,ua)}):Fb(wb,ua)};var Fb=function(wb,Fa){wb.isInstanceOf(p.WidgetSuperType_WithCommonStyle)&&wb.distributeStyle(function(ua){return ua?(ua=parseInt(ua),Fa[ua]):null})};this.toJsonObject=function(){var wb={},Fa=v.collectStylesToJsonObject(v.getPage());
Fa&&(wb.styles=Fa);(Fa=v.getPage().getJsonCustomCosmetic())&&(wb.cosmetic=Fa);wb.page=v.getPage().toJsonObject();return wb};this.fromJsonObject=function(wb,Fa){var ua=wb.isTooModern?!0:!1;Fa&&Fa.setTooModern(ua);Fa=wb.page;v.getPage().fromJsonObject(Fa);(Fa=wb.cosmetic)&&v.getPage().setJsonCustomCosmetic(Fa);(wb=wb.styles)&&v.distributeStylesFromJsonObject(v.getPage(),wb)}}function Wb(){var v=this,g=new bc,r,y,R,T,Y,ia,pa,Ba=!1,Ya=!1,$a=!0,Fb,wb=!0;this.isContainer=function(){return!1};this.getSuperType=
function(){return 0};this.isInstanceOf=function(ua){return(v.getSuperType()&ua)==ua};this.getWidgetTypeName=function(){throw Error("Override me");};this.addPropertyChangedListener=function(ua){g.addListener(ua)};this.removePropertyChangedListener=function(ua){g.removeListener(ua)};var Fa=function(ua,Sb){g.fireEvent(function(hc){hc(ua,Sb)})};this.bindParent=function(ua){r=ua};this.getParent=function(){return r};this.getTopPage=function(){for(var ua=v;ua.getParent();)ua=ua.getParent();return ua};this.upToVisitPath=
function(ua){for(var Sb=v;Sb.getParent()&&(Sb=Sb.getParent(),!ua(Sb)););};this.isOpacityRequired=function(){var ua=!1;v.upToVisitPath(function(Sb){var hc=!1;Sb.isInstanceOf(p.WidgetSuperType_ContainerWithBackground)&&(ua=Sb.isWidgetOpacityRequired())&&(hc=!0);return hc});return ua};this.setName=function(ua){y=ua};this.getName=function(){return y};this.setDisplayName=function(ua){R=ua;Fa(v,p.KEY_DISPLAY_NAME)};this.getDisplayName=function(){return R};this.getX=function(){return T};this.getY=function(){return Y};
this.getWidth=function(){return ia};this.getHeight=function(){return pa};this.setPosition=function(ua,Sb){T=ua;Y=Sb};this.setSize=function(ua,Sb){ia=ua;pa=Sb};this.setRectangle=function(ua,Sb,hc,wc){T=ua;Y=Sb;ia=hc;pa=wc;Fa(v,p.KEY_RECT)};this.markFullscreen=function(ua,Sb){ua&&!Fb?(Fb=[T,Y,ia,pa],Fa(v,Sb?p.KEY_FULLSCREEN_BY_ANCESTOR:p.KEY_FULLSCREEN)):!ua&&Fb&&(v.setRectangle(Fb[0],Fb[1],Fb[2],Fb[3]),Fb=null,Fa(v,Sb?p.KEY_FULLSCREEN_BY_ANCESTOR:p.KEY_FULLSCREEN))};this.hasBeenFullscreen=function(){return Fb?
!0:!1};this.isWidthLockedAlways=function(ua){return ua.isWidthLockedAlways()};this.isHeightLockedAlways=function(ua){return ua.isHeightLockedAlways()};this.isWidthLocked=function(){return Ba};this.setWidthLocked=function(ua){Ba=ua};this.isHeightLocked=function(){return Ya};this.setHeightLocked=function(ua){Ya=ua};this.isCanBeContained=function(ua,Sb){return!0};this.isMovable=function(){return!0};this.isVisible=function(){return $a};this.setVisible=function(ua){$a!=ua&&($a=ua,Fa(v,p.KEY_VISIBLE))};
this.isEldestSon=function(){return!1};this.setSkinActive=function(ua){wb=ua};this.isSkinActive=function(){return wb};this.toJsonObject=function(){var ua={};ua.widgetType=v.getWidgetTypeName();ua.name=y;ua.displayName=R;ua.x=T;ua.y=Y;ua.width=ia;ua.height=pa;Ba&&(ua.widthLocked=!0);Ya&&(ua.heightLocked=!0);!$a&&(ua.visible=!1);v.protectedToJsonObject(ua);return ua};this.fromJsonObject=function(ua){y=ua.name;R=ua.displayName;T=ua.x;Y=ua.y;ia=ua.width;pa=ua.height;Ba=ua.widthLocked?!0:!1;Ya=ua.heightLocked?
!0:!1;$a=!1===ua.visible?!1:!0;v.protectedFromJsonObject(ua)};this.protectedToJsonObject=function(ua){throw Error("Override");};this.protectedFromJsonObject=function(ua){throw Error("Override");};this.protectedMethod={firePropertyChangedEvent:Fa}}function kb(){Wb.call(this);var v=this,g=this.protectedMethod,r=[],y=new bc,R;this.isContainer=function(){return!0};this.isCanContain=function(Ba,Ya){return!0};this.setLayoutAdapter=function(Ba){R=Ba};this.getLayoutAdapter=function(){return R};this.addChildrenChangedListener=
function(Ba){y.addListener(Ba)};this.removeChildrenChangedListener=function(Ba){y.removeListener(Ba)};var T=function(Ba,Ya,$a){y.fireEvent(function(Fb){Fb(Ba,Ya,$a)})};this.getClientWidth=function(Ba){Ba=Ba?Ba:v.getWidth();return v.protectedConfirmClientWidth(Ba)};this.protectedConfirmClientWidth=function(Ba){return Ba};this.getClientHeight=function(Ba){Ba=Ba?Ba:v.getHeight();return v.protectedConfirmClientHeight(Ba)};this.protectedConfirmClientHeight=function(Ba){return Ba};this.setClientSize=function(Ba,
Ya){v.setSize(Ba,Ya)};this.addWidget=function(Ba,Ya){"number"==typeof Ya?r.splice(Ya,0,Ba):r.push(Ba);Ba.bindParent(v);Ba.addPropertyChangedListener(ia);Ba.isContainer()&&Ba.addChildrenChangedListener(pa);T(p.KEY_ADD_CHILD,v,Ba)};this.removeWidget=function(Ba){for(var Ya=0;Ya<r.length;Ya++)if(r[Ya]==Ba)return r.splice(Ya,1),Ba.bindParent(null),Ba.removePropertyChangedListener(ia),Ba.isContainer()&&Ba.removeChildrenChangedListener(pa),T(p.KEY_REMOVE_CHILD,v,Ba),Ya;return-1};this.moveWidgetTo=function(Ba,
Ya){for(var $a=!1,Fb=0;Fb<r.length;Fb++)if(r[Fb]==Ba){r.splice(Fb,1);$a=!0;break}$a&&(r.splice(Ya,0,Ba),T(p.KEY_MOVE_CHILD,v,Ba))};this.getWidgetCount=function(){return r.length};this.getWidget=function(Ba){return r[Ba]};this.traversalMeAndDescendents=function(Ba){Y(Ba,!0)};this.traversalDescendents=function(Ba){Y(Ba,!1)};var Y=function(Ba,Ya){for(var $a=[v];0<$a.length;){var Fb=$a.pop(),wb=!1;if(Ya||Fb!=v)wb=Ba(Fb);if(wb)break;if(Fb.isContainer())for(wb=Fb.getWidgetCount()-1;0<=wb;wb--)$a.push(Fb.getWidget(wb))}};
this.deepFirstTraversalDescendents=function(Ba,Ya){for(var $a=!1,Fb=0;Fb<r.length;Fb++){var wb=r[Fb];($a=Ba(wb))||!wb.isContainer()||Ya&&!Ya(wb)||($a=wb.deepFirstTraversalDescendents(Ba,Ya));if($a)break}return $a};this.searchWidgetByName=function(Ba){var Ya=null;v.traversalMeAndDescendents(function($a){return $a.getName()==Ba?(Ya=$a,!0):!1});return Ya};this.isDescendentsContain=function(Ba){var Ya=!1;v.traversalDescendents(function($a){return $a==Ba?Ya=!0:!1});return Ya};var ia=function(Ba,Ya){v.protectedDoDescendantPropertyChanged(Ba,
Ya);g.firePropertyChangedEvent(Ba,Ya)};this.protectedDoDescendantPropertyChanged=function(Ba,Ya){};var pa=function(Ba,Ya,$a){T(Ba,Ya,$a)};this.protectedMethod.containerToJsonObject=function(Ba){for(var Ya=[],$a=0;$a<r.length;$a++){var Fb=r[$a].toJsonObject();Ya.push(Fb)}Ba.widgets=Ya};this.protectedMethod.containerFromJsonObject=function(Ba){Ba=Ba.widgets;for(var Ya=0;Ya<Ba.length;Ya++){var $a=Ba[Ya],Fb=$c.getInstance($a.widgetType).createWidgetModel();Fb.fromJsonObject($a);v.addWidget(Fb)}};this.protectedMethod.isMySon=
function(Ba){for(var Ya=0;Ya<v.getWidgetCount();Ya++)if(v.getWidget(Ya)==Ba)return!0;return!1}}function Mb(){kb.call(this);var v=this;this.getSuperType=function(){return p.WidgetSuperType_CompositeContainer};var g=this.setSize;this.setSize=function(Y,ia){g(Y,ia);T()};var r=this.setRectangle;this.setRectangle=function(Y,ia,pa,Ba){r(Y,ia,pa,Ba);T()};var y=this.addWidget;this.addWidget=function(Y,ia){y(Y,ia);v.protectedSyncSubRect(Y);v.protectedAfterAddWidget(Y)};this.protectedAfterAddWidget=function(Y){};
var R=this.removeWidget;this.removeWidget=function(Y){var ia=R(Y);v.protectedAfterRemoveWidget(Y);return ia};this.protectedAfterRemoveWidget=function(Y){};var T=function(){for(var Y=0;Y<v.getWidgetCount();Y++){var ia=v.getWidget(Y);v.protectedSyncSubRect(ia)}};this.protectedSyncSubRect=function(Y){throw Error("Implement");};this.protectedMethod.syncSubsRect=T}function oc(){var v=this,g=this.protectedMethod,r;this.getSuperType=function(){return p.WidgetSuperType_ContainerWithBackground};this.setBackgroundPicture=
function(y){r=y;g.firePropertyChangedEvent(v,p.KEY_PAGE_BACKGROUND)};this.getBackgroundPicture=function(){return r};this.isWidgetOpacityRequired=function(){return r?!0:!1};g.backgroundToJsonObject=function(y){r&&(y.background=r.toJsonObject())};g.backgroundFromJsonObject=function(y){r=null;if(y=y.background)r=new ba,r.fromJsonObject(y)}}function Ub(){this.getSuperType=function(){return p.WidgetSuperType_CardSurfaceAbout}}function lb(){var v=null,g=null,r=null,y=!1,R=lb.TitlePosition_Auto,T=lb.TitlePosition_Auto,
Y=null,ia=null;this.setTopBarIcon=function(pa){v=pa};this.getTopBarIcon=function(){return v};this.getCardTitleHorizontalPosition=function(){return R};this.getCardTitleOffsetX=function(){return Y};this.getCardTitleVerticalPosition=function(){return T};this.getCardTitleOffsetY=function(){return ia};this.getTopBarIconOffset=function(){return g};this.getTopBarIconSize=function(){return r};this.isTopBarIconWidthAsPercentage=function(){return y};this.setTitleLayout=function(pa,Ba,Ya,$a,Fb,wb,Fa){g=pa;r=
Ba;y=Ya;R=$a;T=wb;Y=R==lb.TitlePosition_Offset?Fb:null;ia=T==lb.TitlePosition_Offset?Fa:null};this.toJsonObject=function(){var pa={};v&&(pa.topBarIcon=v.toJsonObject(),g&&(pa.iconOffset=g),r&&(pa.iconSize=r),y&&(pa.iconWidthAsPercentage=!0));pa.titleHorizontalPosition=R;pa.titleVerticalPosition=T;pa.titleOffsetX=Y;pa.titleOffsetY=ia;return pa};this.fromJsonObject=function(pa){v=null;var Ba=pa.topBarIcon;if(Ba){v=ba.createPeer();v.fromJsonObject(Ba);Ba=pa.iconOffset;var Ya=pa.iconSize;g=Ba?Ba:null;
r=Ya?Ya:null;y=pa.iconWidthAsPercentage?!0:!1}Ba=pa.titleHorizontalPosition;Ya=pa.titleVerticalPosition;R=Ba?Ba:lb.TitlePosition_Auto;T=Ya?Ya:lb.TitlePosition_Auto;Y=R==lb.TitlePosition_Offset?pa.titleOffsetX:null;ia=T==lb.TitlePosition_Offset?pa.titleOffsetY:null}}function Jb(){Ub.call(this);var v=this,g=this.protectedMethod,r=Jb.Surface_Unified,y=null,R=null,T,Y=null,ia=null,pa=null,Ba,Ya=null;this.getSuperType=function(){return p.WidgetSuperType_CardSimilary};this.isBareSurface=function(){return r==
Jb.Surface_Bare?!0:v.isBareSurfacePassively()};this.isBareSurfacePassively=function(){for(var $a=v.getParent();$a&&$a.getWidgetTypeName()!=p.WidgetType_Page;){if($a.isInstanceOf(p.WidgetSuperType_CardSimilary))return!0;$a=$a.getParent()}return!1};this.getUsableCardBorder=function(){if(v.isSkinActive()){var $a=r==Jb.Surface_Custom?y:null;return $a?$a:v.getTopPage().getCardBorder()}return ca.createInstance(ca.TYPE_SIMPLE)};this.getUsableCardTopBarCommon=function(){return v.isSkinActive()?Ya?Ya:v.getTopPage().getCardTopBarCommon():
null};this.getUsableCardTopBarIcon=function(){var $a=v.getUsableCardTopBarCommon();return $a?$a.getTopBarIcon():null};this.getActiveBackgroundColor=function(){return r==Jb.Surface_Custom?v.getUsableCardBorder().getType()==ca.TYPE_IMAGE?null:R:null};this.setCardSurfaceMode=function($a){r=$a;g.firePropertyChangedEvent(v,p.KEY_CARD_SURFACE)};this.getCardSurfaceMode=function(){return r};this.setCardBorder=function($a){y&&y.hookPropertyChangedListener(null);(y=$a)&&y.hookPropertyChangedListener(function(){g.firePropertyChangedEvent(v,
p.KEY_CARD_SURFACE)});g.firePropertyChangedEvent(v,p.KEY_CARD_SURFACE)};this.getCardBorder=function(){return y};this.setBackgroundColor=function($a){R=$a;g.firePropertyChangedEvent(v,p.KEY_CARD_SURFACE)};this.getBackgroundColor=function(){return R};this.setCardTitle=function($a){T=$a;g.firePropertyChangedEvent(v,p.KEY_CARD_TITLE)};this.getCardTitle=function(){return T};this.getTitleFontName=function(){return Y};this.getTitleFontSize=function(){return ia};this.getTitleColor=function(){return pa};this.setTitleStyle=
function($a,Fb,wb){Y=$a;ia=Fb;pa=wb;g.firePropertyChangedEvent(v,p.KEY_CARD_TITLE)};this.setCardDescription=function($a){Ba=$a;g.firePropertyChangedEvent(v,p.KEY_CARD_TITLE)};this.getCardDescription=function(){return Ba};this.setCardTopBarCommon=function($a){Ya=$a;g.firePropertyChangedEvent(v,p.KEY_CARD_TITLE)};this.getCardTopBarCommon=function(){return Ya};this.getPaddingLeft=function(){return v.isBareSurface()?0:20};this.getPaddingRight=function(){return v.isBareSurface()?0:20};this.getPaddingTop=
function(){return v.isBareSurface()?16:v.isSkinActive()&&(T||v.getUsableCardTopBarIcon())?40:20};this.getPaddingBottom=function(){return v.isBareSurface()?0:10};this.protectedMethod.cardSimilaryToJsonObject=function($a){r!=Jb.Surface_Unified&&($a.cardSurfaceMode=r==Jb.Surface_Bare?"bare":r==Jb.Surface_Custom?"custom":null,r==Jb.Surface_Custom&&(R&&($a.backgroundColor=R),y&&($a.cardBorder=y.toJsonObject())));v.isBareSurface()||(T&&($a.cardTitle=T,$a.titleFontName=Y,$a.titleFontSize=ia,$a.titleColor=
pa),Ya&&($a.topBar=Ya.toJsonObject()));Ba&&($a.cardDescription=Ba)};this.protectedMethod.cardSimilaryFromJsonObject=function($a){var Fb=$a.cardSurfaceMode;r="bare"==Fb?Jb.Surface_Bare:"custom"==Fb?Jb.Surface_Custom:Jb.Surface_Unified;R=(Fb=$a.backgroundColor)?Fb:null;Fb=null;var wb=$a.cardBorder;wb&&(Fb=ca.createInstance(wb.type),Fb.fromJsonObject(wb));v.setCardBorder(Fb);T=$a.cardTitle;Fb=$a.titleFontName;wb=$a.titleFontSize;var Fa=$a.titleColor;Y=Fb?Fb:null;ia=wb?wb:null;pa=Fa?Fa:null;Ya=null;if(Fb=
$a.topBar)Ya=new lb,Ya.fromJsonObject(Fb);Ba=$a.cardDescription}}function Rb(){var v=this,g=this.protectedMethod,r;this.getSuperType=function(){return p.WidgetSuperType_FilterSimilary};this.getSourceDataType=function(){throw Error("Override");};var y=function(R){r=R&&R.getItemCount()?R:null};this.setAffectedTargets=function(R){y(R);g.firePropertyChangedEvent(v,p.KEY_AFFECTED_TARGETS)};this.getAffectedTargets=function(){return r};this.checkCircularAffection=function(R){R=R?R:v.getAffectedTargets();
if(!R)return null;for(var T=[v,[v.getDisplayName()]],Y=[T],ia={};0<Y.length;){T=Y.shift();var pa=T[0];T=T[1];if(ia[pa.getName()]){if(pa==v)return T.join(" -> ")}else if(ia[pa.getName()]=!0,pa=pa==v?R:pa.isInstanceOf(p.WidgetSuperType_FilterSimilary)?pa.getAffectedTargets():null)for(var Ba=0,Ya=pa.getItemCount();Ba<Ya;Ba++){var $a=null,Fb=pa.getItem(Ba);Fb.isAffectingInsideDashboard()&&v.getTopPage().traversalMeAndDescendents(function(Fa){return Fa.getName()==Fb.getTargetWidgetName()?($a=Fa,!0):!1});
if($a){var wb=T.slice(0);wb.push($a.getDisplayName());Y.push([$a,wb])}}}return null};this.protectedMethod.innerSetAffectedTargets=y;this.protectedMethod.filterSimilaryToJsonObject=function(R){if(r){var T={};r.toJsonObject(T);R.affectedTargets=T}};this.protectedMethod.filterSimilaryFromJsonObject=function(R){if(R=R.affectedTargets)r=new pc,r.fromJsonObject(R)}}function Ta(){var v=this,g=this.protectedMethod,r=0;this.setFontSizeEnhanced=function(y){r=y;g.firePropertyChangedEvent(v,p.KEY_FONT_SIZE_ENHANCED)};
this.getFontSizeEnhanced=function(){return r};this.protectedMethod.fontSizeEnhancedToJsonObject=function(y){r&&(y.fontSizeEnhanced=r)};this.protectedMethod.fontSizeEnhancedFromJsonObject=function(y){r=(y=y.fontSizeEnhanced)?y:0}}function Ga(){Ta.call(this);var v=this,g=this.protectedMethod,r,y,R;this.getSuperType=function(){return p.WidgetSuperType_WithLabel};this.setFrontLabel=function(T){r=T;g.firePropertyChangedEvent(v,p.KEY_FILTER_FRONT_LABEL)};this.getFrontLabel=function(){return r};this.setFrontLabelPosition=
function(T){y=T;g.firePropertyChangedEvent(v,p.KEY_FILTER_FRONT_LABEL_POSITION)};this.getFrontLabelPosition=function(){return y};this.setFrontLabelLength=function(T){R=T;g.firePropertyChangedEvent(v,p.KEY_FILTER_FRONT_LABEL_LENGTH)};this.getFrontLabelLength=function(){return R};this.protectedMethod.inputCtrlWithLabelToJsonObject=function(T){var Y={};T.withLabel=Y;r&&(Y.frontLabel=r);R&&(Y.frontLabelLength=R);y&&(Y.frontLabelPosition=y);g.fontSizeEnhancedToJsonObject(Y)};this.protectedMethod.inputCtrlWithLabelFromJsonObject=
function(T){T=T.withLabel;var Y=T.frontLabel;Y&&(r=Y);(Y=T.frontLabelLength)&&(R=Y);(Y=T.frontLabelPosition)&&(y=Y);g.fontSizeEnhancedFromJsonObject(T)}}function Cb(){var v=this,g=this.protectedMethod,r,y=!0,R=new Ka,T=!1;this.getSuperType=function(){return p.WidgetSuperType_DiscreteItemFilter};this.setFilterSource=function(Y){r=Y;g.firePropertyChangedEvent(v,p.KEY_FILTER_SOURCE)};this.getFilterSource=function(){return r};this.isIncludeItemAllSupported=function(){return!1};this.setIncludedItemAll=
function(Y){y=Y;g.firePropertyChangedEvent(v,p.KEY_DISCRETE_INCLUDED_ITEMALL)};this.isIncludedItemAll=function(){return y};this.getOriginatedExecutingTag=function(){if(r&&r.getType()==fa.TYPE_VisualWidget){var Y=v.getTopPage().searchWidgetByName(r.getSourceWidgetName());return Y?Y.getOriginatedExecutingTag():null}return null};this.isLightWeight=function(){return!0};this.setDefaultSelected=function(Y){R=Y;g.firePropertyChangedEvent(v,p.KEY_FILTER_DEFAULT_SELECTED)};this.getDefaultSelected=function(){return R};
this.setMultiSelectable=function(Y){T=Y;g.firePropertyChangedEvent(v,p.KEY_DISCRETE_MULTISELECTABLE)};this.isMultiSelectable=function(){return T};this.protectedMethod.discreteItemFilterToJsonObject=function(Y){if(r){var ia={};r.toJsonObject(ia);Y.filterSource=ia}Y.includedItemAll=y;R&&(ia={},R.toJsonObject(ia),Y.defaultSelected=ia);Y.multiSelectable=T};this.protectedMethod.discreteItemFromJsonObject=function(Y){var ia=Y.filterSource;if(ia){var pa=ia.type;r=fa.createInstance(pa);r.fromJsonObject(ia)}y=
Y.includedItemAll?!0:!1;if(ia=Y.defaultSelected)pa=ia.type,R=Qb.createInstance(pa),R.fromJsonObject(ia);T=Y.multiSelectable}}function Xa(){var v=this,g;this.getSuperType=function(){return p.WidgetSuperType_AffectedTarget};this.getExecutingInputParams=function(r){!g&&r&&(g=new sb);return g};this.getAffectedParamType=function(){throw Error("Override");};this.isTheAffectedTargetOfAnother=function(){var r=!1;v.getTopPage().traversalDescendents(function(y){return y!=v&&y.isInstanceOf(p.WidgetSuperType_FilterSimilary)&&
(y=y.getAffectedTargets())&&(y=y.getTarget(v.getName()))&&y.isSettingComplete()?r=!0:!1});return r}}function jc(){var v=this,g=this.protectedMethod,r;this.getSuperType=function(){return p.WidgetSuperType_Referable};this.setReferenceCustomMap=function(y){r=y;g.firePropertyChangedEvent(v,p.KEY_REF)};this.getReferenceCustomMap=function(){return r};this.copyReference=function(y){throw Error("Implement");};this.protectedMethod.referableToJsonObject=function(y){y.ref=r};this.protectedMethod.referableFromJsonObject=
function(y){r=y.ref}}function dc(){var v=this,g=this.protectedMethod,r;this.setRefreshTiming=function(y){r=y;g.firePropertyChangedEvent(v,p.KEY_REFRESH_TIMING)};this.getRefreshTiming=function(){return r};this.protectedMethod.autoRefreshableToJsonObject=function(y){0<r&&(y.refreshTiming=r)};this.protectedMethod.autoRefreshableFromJsonObject=function(y){y=y.refreshTiming;r=0<y?y:-1}}function Bb(){var v=this;this.getSuperType=function(){return p.WidgetSuperType_FullscreenSupported};this.isAncestorForbidFullscreen=
function(){for(var g=v.getParent();g;){if(g instanceof t&&g.getFullscreenAllowed()==t.FULLSCREEN_ALLOWED_ALONE)return!0;g=g.getParent()}return!1}}function Hb(){var v=this,g=this.protectedMethod,r,y;this.getSuperType=function(){return p.WidgetSuperType_WithCommonStyle};this.setStyle=function(R){y=R;g.firePropertyChangedEvent(v,p.KEY_STYLE)};this.getStyle=function(){y||(y=new Qa,y.setFontSize(14),y.setAlign("center"),y.setColor(null));return y};this.distributeStyle=function(R){y=R(r)};this.collectStyleAndAllocateId=
function(R){r=R(y)};g.styleToJsonObject=function(R){R.styleId=r};g.styleFromJsonObject=function(R){r=R.styleId}}function Da(){kb.call(this);oc.call(this);var v=this,g=this.protectedMethod,r=p.ExhibitionMode_Full,y=p.Skin_White,R,T=ca.createInstance(ca.TYPE_SIMPLE),Y=null,ia,pa=p.MobileLayoutConverter_ByPosition,Ba=!1,Ya=null;this.getSuperType=function(){return p.WidgetSuperType_ContainerWithBackground};this.getWidgetTypeName=function(){return p.WidgetType_Page};this.isVisible=function(){return!0};
this.setVisible=function(){throw Error("Unsupported");};this.getX=function(){throw Error("Unsupported");};this.getY=function(){throw Error("Unsupported");};var $a=this.setSize;this.setSize=function(ua,Sb){$a(ua,Sb);Fb()};this.setRectangle=function(ua,Sb,hc,wc){v.setSize(hc,wc);g.firePropertyChangedEvent(v,p.KEY_PAGE_SIZE)};var Fb=function(){if(0<v.getWidgetCount()){var ua=v.getWidget(0);if(ua instanceof Eb){var Sb=v.getWidth();ua.setRectangle(0,0,Sb,ua.getHeight())}}},wb=this.addWidget;this.addWidget=
function(ua,Sb){wb(ua,Sb);ua instanceof Eb&&Fb()};this.isCanContain=function(ua,Sb){if(ua instanceof Eb){ua=0;for(var hc=v.getWidgetCount();ua<hc;ua++)if(v.getWidget(ua)instanceof Eb)return Sb&&Sb.push(Xb.get("widgetPageCanContainPrompt","\u9875\u9762\u4e2d\u5df2\u5b58\u5728\u6807\u9898\u680f\u3002")),!1}return!0};this.isMobileDesired=function(){var ua=500>=v.getWidth(),Sb=1.5<=v.getHeight()/v.getWidth();return ua&&Sb};this.setExhibitionMode=function(ua){r=ua;g.firePropertyChangedEvent(v,p.KEY_PAGE_EXHIBITION_MODE)};
this.getExhibitionMode=function(){return r};this.setSkin=function(ua,Sb){y=ua;R=Sb;g.firePropertyChangedEvent(v,p.KEY_PAGE_SKIN)};this.getSkin=function(){return y};this.setJsonCustomCosmetic=function(ua){R=new Pb;R.fromJsonObject(ua)};this.getJsonCustomCosmetic=function(){return R?R.toJsonObject():null};this.getCustomCosmetic=function(){return R};this.setCardBorder=function(ua){T&&T.hookPropertyChangedListener(null);T=ua;T.hookPropertyChangedListener(function(){g.firePropertyChangedEvent(v,p.KEY_PAGE_UNIFIED_CARD)});
g.firePropertyChangedEvent(v,p.KEY_PAGE_UNIFIED_CARD)};this.getCardBorder=function(){return T};this.setCardTopBarCommon=function(ua){Y=ua;g.firePropertyChangedEvent(v,p.KEY_PAGE_UNIFIED_CARD)};this.getCardTopBarCommon=function(){return Y};this.setWatermark=function(ua){ia=ua;g.firePropertyChangedEvent(v,p.KEY_PAGE_WATERMARK)};this.getWatermark=function(){return ia};var Fa=this.isWidgetOpacityRequired;this.isWidgetOpacityRequired=function(){return Fa()||(ia?!0:!1)};this.setMobileLayoutConverter=function(ua){pa=
ua;g.firePropertyChangedEvent(v,p.KEY_PAGE_MOBILE_LAYOUT_CONVERTER)};this.getMobileLayoutConverter=function(){return pa};this.setMobileSkinActive=function(ua){Ba=ua;g.firePropertyChangedEvent(v,p.KEY_PAGE_MOBILE_SKIN_ACTIVE)};this.isMobileSkinActive=function(){return Ba};this.setRunningMode=function(ua){Ya=ua};this.getRunningMode=function(){return Ya};this.protectedToJsonObject=function(ua){g.containerToJsonObject(ua);g.backgroundToJsonObject(ua);ua.exhibitionMode=r;ua.skin=y;ua.cardBorder=T.toJsonObject();
Y&&(ua.cardTopBarCommon=Y.toJsonObject());ua.watermark=ia;ua.mobileLayoutConverter=pa;Ba&&(ua.mobileSkinActive=!0);Ya&&(ua.runningMode=Ya)};this.protectedFromJsonObject=function(ua){g.containerFromJsonObject(ua);g.backgroundFromJsonObject(ua);var Sb=ua.exhibitionMode;r=Sb?Sb:p.ExhibitionMode_Idle;y=(Sb=ua.skin)?Sb:p.Skin_White;Sb=ua.cardBorder;var hc=ca.createInstance(Sb.type);hc.fromJsonObject(Sb);v.setCardBorder(hc);Y=null;if(Sb=ua.cardTopBarCommon)Y=new lb,Y.fromJsonObject(Sb);ia=ua.watermark;
pa=(Sb=ua.mobileLayoutConverter)?Sb:p.MobileLayoutConverter_ByPosition;Ba=ua.mobileSkinActive?!0:!1;Ya=(ua=ua.runningMode)?ua:null}}function Eb(){function v(){var T=null,Y=0,ia=null;this.setBackgroundColor=function(pa){T=pa};this.getBackgroundColor=function(){return T};this.setSeparaterLineWidth=function(pa){Y=pa};this.getSeparaterLineWidth=function(){return Y};this.setSeparaterColor=function(pa){ia=pa};this.getSepataterColor=function(){return ia};this.toJsonObject=function(){var pa={};pa.backgroundColor=
T;pa.separaterLineWidth=Y;pa.separaterColor=ia;return pa};this.fromJsonObject=function(pa){T=pa.backgroundColor;var Ba=pa.separaterLineWidth;Y=Ba?Ba:0;ia=pa.separaterColor}}kb.call(this);oc.call(this);var g=this,r=this.protectedMethod,y=!1,R=null;this.getSuperType=function(){return p.WidgetSuperType_ContainerWithBackground};this.getWidgetTypeName=function(){return p.WidgetType_PageTitleBar};this.isMovable=function(){return!1};this.isCanBeContained=function(T,Y){if(T instanceof Da)return!0;Y&&Y.push(Xb.get("widgetPageTitleBarCanBeContainedPrompt",
"\u9875\u9762\u6807\u9898\u680f\u53ea\u80fd\u51fa\u73b0\u5728\u9875\u9762\u4e2d\u3002"));return!1};this.setWidthLocked=function(T){};this.isEldestSon=function(){return!0};this.protectedConfirmClientHeight=function(T){return T-(R?R.getSeparaterLineWidth():0)};this.setFrozen=function(T){y=T;r.firePropertyChangedEvent(g,Eb.KEY_FROZEN)};this.isFrozen=function(){return y};this.setSurfaceModel=function(T){R=T;r.firePropertyChangedEvent(g,Eb.KEY_SURFACE)};this.getSurfaceModel=function(){return R};this.createSurfaceModel=
function(){return new v};this.protectedToJsonObject=function(T){r.containerToJsonObject(T);r.backgroundToJsonObject(T);T.frozen=y;if(R){var Y=R.toJsonObject();T.surface=Y}};this.protectedFromJsonObject=function(T){r.containerFromJsonObject(T);r.backgroundFromJsonObject(T);y=T.frozen?!0:!1;R=null;if(T=T.surface)R=new v,R.fromJsonObject(T)}}function Ca(){var v=this,g,r;this.getSuperType=function(){return p.WidgetSuperType_BuiltinVisual};this.setExecutingTag=function(y){g=y};this.getExecutingTag=function(){return g};
this.deliveryTemporary=function(y,R,T){r=[y,R,T]};this.pickupTmpJsonModelBook=function(){var y=r;r=null;return y};this.getAffectedParamType=function(){return p.AffectedType_BindField|p.AffectedType_Param};this.getOriginatedExecutingTag=function(){return v.getExecutingTag()}}function vb(){function v(y,R,T,Y,ia){this.getQingModelIndex=function(){return y};this.getQingModel=function(){return R};this.getQingModelPreferences=function(){return T};this.getName=function(){return Y};this.getDescription=function(){return ia}}
var g=null,r=null;this.getSuperType=function(){return p.WidgetSuperType_OutputParamProvider};this.clearAllParamInfo=function(){g=[];r=[]};this.appendOutputParamInfo=function(y,R,T,Y,ia){g.push(new v(y,R,T,Y,ia))};this.getOutputParamsInfo=function(){return g};this.appendWarningRuleInfo=function(y,R,T,Y,ia){r.push(new v(y,R,T,Y,ia))};this.getWarningRulesInfo=function(){return r}}function Kb(){Wb.call(this);Xa.call(this);dc.call(this);var v=this,g=this.protectedMethod,r,y;this.getSuperType=function(){return p.WidgetSuperType_AffectedTarget};
this.getWidgetTypeName=function(){return p.WidgetType_ExtReport};this.getDashboardSkinName=function(){return v.getTopPage().getSkin()};this.setTitle=function(R){r=R;g.firePropertyChangedEvent(v,Kb.KEY_TITLE)};this.getTitle=function(){return r};this.setEncodedModel=function(R){y=R;g.firePropertyChangedEvent(v,Kb.KEY_MODEL)};this.getEncodedModel=function(){return y};this.getExecutableAffectedParams=function(){var R=v.getExecutingInputParams();return R?R.createExternalParamsApi().toJsonObject():{}};
this.getAffectedParamType=function(){return p.AffectedType_Param};this.protectedToJsonObject=function(R){R.title=r;R.encodedModel=y;g.autoRefreshableToJsonObject(R)};this.protectedFromJsonObject=function(R){r=R.title;y=R.encodedModel;g.autoRefreshableFromJsonObject(R)}}function rb(){Wb.call(this);var v=this,g=this.protectedMethod,r;this.getWidgetTypeName=function(){return p.WidgetType_CosmicCustomCard};this.setEncodedModel=function(y){r=y;g.firePropertyChangedEvent(v,rb.KEY_MODEL)};this.getEncodedModel=
function(){return r};this.protectedToJsonObject=function(y){y.encodedModel=r};this.protectedFromJsonObject=function(y){r=y.encodedModel}}function cc(){Xa.call(this);Rb.call(this);var v=this,g=this.protectedMethod,r;this.getSuperType=function(){return p.WidgetSuperType_Text};this.getAffectedParamType=function(){return p.AffectedType_Param};this.getSourceDataType=function(){return Ic.DT_STRING};this.setAffectedTargets=function(y){g.innerSetAffectedTargets(y)};this.getPredefinedTextFragments=function(){return r};
this.parseOutputParam=function(y){var R=function(ia){ia=cc.parseRef(ia);for(var pa=0;pa<ia.length;pa++){var Ba=ia[pa][2];0<Ba.indexOf("#")&&(Ba=Ba.split("#"),y(Ba[0],Ba[1]))}};R(v.protectedGetText());if(r)for(var T=0;T<r.getFragmentCount();T++){var Y=r.getFragment(T).getDisplay();R(Y)}};this.protectedGetText=function(){throw Error("Implement");};g.innerSetPredefinedTextFragments=function(y){r=y};g.textToJsonObject=function(y){if(r){var R={};r.toJsonObject(R);y.predefined=R}};g.textFromJsonObject=
function(y){r=null;if(y=y.predefined)r=new Na,r.fromJsonObject(y)}}function Ab(){Wb.call(this);cc.call(this);Hb.call(this);var v=this,g=this.protectedMethod,r,y=0,R=!1;this.getSuperType=function(){return p.WidgetSuperType_Text|p.WidgetSuperType_AffectedTarget|p.WidgetSuperType_FilterSimilary|p.WidgetSuperType_WithCommonStyle};this.getWidgetTypeName=function(){return p.WidgetType_Label};this.setContent=function(T,Y){g.innerSetPredefinedTextFragments(T);r=Y;g.firePropertyChangedEvent(v,Ab.KEY_CONTENT)};
this.getContent=function(){return r};this.protectedGetText=function(){return r};this.setWalkingSpeed=function(T){y=T;g.firePropertyChangedEvent(v,Ab.KEY_WALKING)};this.getWalkingSpeed=function(){return y};this.setRuntimeWalkable=function(T){R=T};this.isRuntimeWalkable=function(){return R};this.isHeightLocked=function(){return!0};this.protectedToJsonObject=function(T){g.styleToJsonObject(T);g.textToJsonObject(T);T.text=r;y&&(T.walking=y)};this.protectedFromJsonObject=function(T){g.styleFromJsonObject(T);
g.textFromJsonObject(T);r=T.text;y=(T=T.walking)?T:0}}function Va(){Wb.call(this);cc.call(this);var v=this,g=this.protectedMethod,r;this.getSuperType=function(){return p.WidgetSuperType_Text|p.WidgetSuperType_AffectedTarget|p.WidgetSuperType_FilterSimilary};this.getWidgetTypeName=function(){return p.WidgetType_Rich};this.setContent=function(y,R){g.innerSetPredefinedTextFragments(y);r=R;g.firePropertyChangedEvent(v,Va.KEY_CONTENT)};this.getContent=function(){return r};this.protectedGetText=function(){return r.getAllText()};
this.protectedToJsonObject=function(y){for(var R=[],T=0;T<r.getParagraphCount();T++){for(var Y=r.getParagraph(T),ia=[],pa=0;pa<Y.getContentCount();pa++){var Ba=Y.getContent(pa),Ya={};Ya.text=Ba.getText();Ya.fontName=Ba.getFontName();Ya.fontSize=Ba.getFontSize();Ba.isBold()&&(Ya.bold=!0);Ba.isItalic()&&(Ya.italic=!0);Ba.getColor()&&(Ya.color=Ba.getColor());ia.push(Ya)}pa={};pa.contents=ia;pa.lineHeight=parseInt(100*Y.getLineHeight()+.5);0!=Y.getIndent()&&(pa.indent=parseInt(100*Y.getIndent()+.5));
0!=Y.getMarginBefore()&&(pa.marginBefore=Y.getMarginBefore());0!=Y.getMarginAfter()&&(pa.marginAfter=Y.getMarginAfter());"left"!=Y.getAlign()&&(pa.align=Y.getAlign());R.push(pa)}T={};T.paragraphs=R;y.model=T;g.textToJsonObject(y)};this.protectedFromJsonObject=function(y){r=new Mc;for(var R=y.model.paragraphs,T=0;T<R.length;T++){var Y=R[T],ia=Y.align,pa=Y.indent,Ba=Y.lineHeight,Ya=Y.marginBefore,$a=Y.marginAfter,Fb=Mc.createParagraph();Fb.setAlign(ia?ia:"left");Fb.setIndent(pa?.01*pa:0);Fb.setLineHeight(Ba?
.01*Ba:1);Fb.setMarginBefore(Ya?Ya:0);Fb.setMarginAfter($a?$a:0);Y=Y.contents;for(ia=0;ia<Y.length;ia++)pa=Y[ia],Ba=Mc.createContent(),Ba.setText(pa.text),Ba.setFontName(pa.fontName),Ba.setFontSize(pa.fontSize),Ba.setBold(pa.bold?!0:!1),Ba.setItalic(pa.italic?!0:!1),Ba.setColor(pa.color),Fb.addContent(Ba);r.addParagraph(Fb)}g.textFromJsonObject(y)}}function ba(){Wb.call(this);jc.call(this);var v=this,g=this.protectedMethod,r=ba.SCALE_ADAPTIVE,y=ba.HALIGN_CENTER|ba.VALIGN_MIDDLE;this.getSuperType=
function(){return p.WidgetSuperType_Referable};this.getWidgetTypeName=function(){return p.WidgetType_Picture};this.copyReference=function(R){Rc.getWidgetSourceSelector().copyPicture(v.getReferenceCustomMap(),function(T){v.setReferenceCustomMap(T);R()})};this.setScale=function(R){r=R;g.firePropertyChangedEvent(v,ba.KEY_SCALE)};this.getScale=function(){return r};this.isAlignNeccessary=function(){return r==ba.SCALE_NON||r==ba.SCALE_ADAPTIVE};this.setAlign=function(R){y=R;g.firePropertyChangedEvent(v,
ba.KEY_ALIGN)};this.getAlign=function(){return y};this.isAlignTo=function(R){return(y&R)==R};this.isWidthLocked=function(){return r==ba.SCALE_NON};this.isHeightLocked=function(){return r==ba.SCALE_NON};this.protectedToJsonObject=function(R){g.referableToJsonObject(R);R.scale=r;R.horizontalAlign=v.isAlignTo(ba.HALIGN_LEFT)?"left":v.isAlignTo(ba.HALIGN_RIGHT)?"right":v.isAlignTo(ba.HALIGN_CENTER)?"center":null;R.verticalAlign=v.isAlignTo(ba.VALIGN_TOP)?"top":v.isAlignTo(ba.VALIGN_BOTTOM)?"bottom":v.isAlignTo(ba.VALIGN_MIDDLE)?
"middle":null};this.protectedFromJsonObject=function(R){g.referableFromJsonObject(R);r=R.scale;var T=R.horizontalAlign;R=R.verticalAlign;y=("left"==T?ba.HALIGN_LEFT:"right"==T?ba.HALIGN_RIGHT:"center"==T?ba.HALIGN_CENTER:0)+("top"==R?ba.VALIGN_TOP:"bottom"==R?ba.VALIGN_BOTTOM:"middle"==R?ba.VALIGN_MIDDLE:0)}}function bb(){Wb.call(this);Xa.call(this);var v=this,g=this.protectedMethod,r;this.getWidgetTypeName=function(){return p.WidgetType_Iframe};this.setUrl=function(y){r=y;g.firePropertyChangedEvent(v,
bb.KEY_URL)};this.getUrl=function(){return r};this.getUsableUrl=function(){var y=r,R=v.getExecutingInputParams();R&&(R=R.createExternalParamsApi().toUrlParams())&&(y+=(0>y.indexOf("?")?"?":"&")+R);return y};this.getAffectedParamType=function(){return p.AffectedType_Param};this.protectedToJsonObject=function(y){y.url=r};this.protectedFromJsonObject=function(y){r=y.url}}function jb(){Wb.call(this);Hb.call(this);var v=this,g=this.protectedMethod,r;this.getSuperType=function(){return p.WidgetSuperType_WithCommonStyle};
this.getWidgetTypeName=function(){return p.WidgetType_Clock};this.setFormatString=function(y){r="yyyy.MM.dd HH:mm:ss"==y?null:y;g.firePropertyChangedEvent(v,jb.KEY_FORMAT)};this.getFormatString=function(){return r?r:"yyyy.MM.dd HH:mm:ss"};this.isHeightLocked=function(){return!0};this.protectedToJsonObject=function(y){g.styleToJsonObject(y);y.formatString=r};this.protectedFromJsonObject=function(y){g.styleFromJsonObject(y);r=y.formatString}}function Aa(){Wb.call(this);Cb.call(this);Rb.call(this);Xa.call(this);
var v=this,g=this.protectedMethod,r=Aa.LAYOUT_MODE_HORIZONTAL,y=4,R=2,T=Aa.SIZE_MODE_LARGE;this.getSuperType=function(){return p.WidgetSuperType_DiscreteItemFilter|p.WidgetSuperType_FilterSimilary|p.WidgetSuperType_AffectedTarget};this.getWidgetTypeName=function(){return p.WidgetType_ButtonGroup};this.isHeightLockedAlways=function(Y){return r==Aa.LAYOUT_MODE_HORIZONTAL};this.getSourceDataType=function(){return Ic.DT_STRING};this.getAffectedParamType=function(){return p.AffectedType_BindField};this.isIncludeItemAllSupported=
function(){return!0};this.isMultiSelectable=function(){return!1};this.setLayoutMode=function(Y){r=Y;g.firePropertyChangedEvent(v,Aa.KEY_LAYOUT_MODE)};this.getLayoutMode=function(){return r};this.setCharsPerItemWhenWrap=function(Y){y=Y;g.firePropertyChangedEvent(v,Aa.KEY_CHARS_PER_ITEM)};this.getCharsPerItemWhenWrap=function(){return y};this.setItemsPerRowWhenWrap=function(Y){R=Y;g.firePropertyChangedEvent(v,Aa.KEY_ITEMS_PER_ROW)};this.getItemsPerRowWhenWrap=function(){return R};this.setSizeMode=function(Y){T=
Y;g.firePropertyChangedEvent(v,Aa.KEY_SIZE_MODE)};this.getSizeMode=function(){return T};this.protectedToJsonObject=function(Y){Y.layoutMode=r;Y.minCharsPerItem=y;Y.maxItemsPerRow=R;Y.sizeMode=T;g.discreteItemFilterToJsonObject(Y);g.filterSimilaryToJsonObject(Y)};this.protectedFromJsonObject=function(Y){var ia=Y.layoutMode;r=ia?ia:Aa.LAYOUT_MODE_HORIZONTAL;y=(ia=Y.minCharsPerItem)?ia:4;R=(ia=Y.maxItemsPerRow)?ia:2;T=(ia=Y.sizeMode)?ia:Aa.SIZE_MODE_SMALL;g.discreteItemFromJsonObject(Y);g.filterSimilaryFromJsonObject(Y)}}
function db(){Wb.call(this);Rb.call(this);Ga.call(this);var v=this,g=this.protectedMethod,r=!1,y,R,T;this.getSuperType=function(){return p.WidgetSuperType_Calendar|p.WidgetSuperType_FilterSimilary|p.WidgetSuperType_WithLabel};this.getSourceDataType=function(){return Ic.DT_DATE};this.setInitialValue=function(Y,ia,pa,Ba){y=Y;R=ia;T=pa;r=Ba;g.firePropertyChangedEvent(v,db.KEY_DATE_INITIAL)};this.isContainNull=function(){return r};this.getFromDate=function(){return y};this.getToDate=function(){return R};
this.updateDate=function(Y,ia){y=Y;R=ia};this.getRelativeModel=function(){return T};this.protectedToJsonObject=function(Y){Y.containNull=r;Y.dateFrom=y;Y.dateTo=R;T&&(Y.relative=T.toJsonObject());g.filterSimilaryToJsonObject(Y);g.inputCtrlWithLabelToJsonObject(Y)};this.protectedFromJsonObject=function(Y){r=Y.containNull?!0:!1;y=Y.dateFrom;R=Y.dateTo;var ia=Y.relative;ia?(T=v.protectedCreateRelativeModel(),T.fromJsonObject(ia)):T=null;g.filterSimilaryFromJsonObject(Y);g.inputCtrlWithLabelFromJsonObject(Y)};
this.protectedCreateRelativeModel=function(){throw Error("Implement");}}function t(){kb.call(this);Jb.call(this);Bb.call(this);var v=this,g=this.protectedMethod,r=t.FULLSCREEN_ALLOWED_NONE;this.getSuperType=function(){return p.WidgetSuperType_CardSimilary|p.WidgetSuperType_FullscreenSupported};this.getWidgetTypeName=function(){return p.WidgetType_Panel};this.isCanContain=function(y,R){return y instanceof t?(R&&R.push(Xb.get("widgetPanelCanContainPrompt","\u4e0d\u5141\u8bb8\u5728\u7ec4\u5408\u5361\u7247\u91cc\u653e\u7f6e\u7ec4\u5408\u5361\u7247\u3002")),
!1):!0};this.getPaddingTop=function(){var y=v.isBareSurface(),R=!y&&v.getUsableCardTopBarIcon()?!0:!1,T=!y&&v.getCardTitle()?!0:!1,Y=v.getCardDescription()?!0:!1,ia=!(r==t.FULLSCREEN_ALLOWED_NONE||v.isAncestorForbidFullscreen()),pa=!y&&v.getUsableCardBorder().getType()==ca.TYPE_SIMPLE;return!y&&(R||T||ia)?R||!pa?40:30:Y?20:10};this.protectedConfirmClientWidth=function(y){return Math.max(0,y-v.getPaddingLeft()-v.getPaddingRight())};this.protectedConfirmClientHeight=function(y){return Math.max(0,y-
v.getPaddingTop()-v.getPaddingBottom())};this.setClientSize=function(y,R){v.setSize(y+v.getPaddingLeft()+v.getPaddingRight(),R+v.getPaddingTop()+v.getPaddingBottom())};this.setFullscreenAllowed=function(y){r=y;g.firePropertyChangedEvent(v,t.KEY_FULLSCREEN_ALLOWED)};this.getFullscreenAllowed=function(){return r};this.protectedToJsonObject=function(y){r&&(y.fullscreenAllowed=r);g.containerToJsonObject(y);g.cardSimilaryToJsonObject(y)};this.protectedFromJsonObject=function(y){var R=y.fullscreenAllowed;
r=R?R:t.FULLSCREEN_ALLOWED_NONE;g.containerFromJsonObject(y);g.cardSimilaryFromJsonObject(y)}}function V(){Mb.call(this);Ub.call(this);Xa.call(this);Ta.call(this);var v=this,g=this.protectedMethod,r=V.HEAD_TOP_LEFT,y=V.HEAD_PATTERN_BAR,R=!1;this.getSuperType=function(){return p.WidgetSuperType_CompositeContainer|p.WidgetSuperType_CardSurfaceAbout|p.WidgetSuperType_AffectedTarget};this.getWidgetTypeName=function(){return p.WidgetType_TabbedContainer};this.isCanContain=function(T,Y){if(T instanceof
la)return!0;Y&&Y.push(Xb.get("widgetTabbedContainerCanContainPrompt","\u9875\u7b7e\u63a7\u4ef6\u4e0b\u4e00\u7ea7\u53ea\u80fd\u662f\u5b50\u9875\u7b7e\u3002"));return!1};this.protectedDoDescendantPropertyChanged=function(T,Y){if(Y==p.KEY_VISIBLE&&T.isVisible()){if(g.isMySon(T)){for(Y=0;Y<v.getWidgetCount();Y++){var ia=v.getWidget(Y);ia!=T&&ia.setVisible(!1)}g.firePropertyChangedEvent(v,V.KEY_TABBED_SELECTED)}}else Y==la.KEY_HEAD_TEXT&&g.isMySon(T)&&g.firePropertyChangedEvent(v,Y)};this.protectedAfterAddWidget=
function(T){T.setVisible(!1);T.setVisible(!0)};this.protectedAfterRemoveWidget=function(T){if(0<v.getWidgetCount()){T=v.getWidget(0);for(var Y=0;Y<v.getWidgetCount();Y++){var ia=v.getWidget(Y);if(ia.isVisible()){T=ia;break}}T.setVisible(!1);T.setVisible(!0)}else g.firePropertyChangedEvent(v,V.KEY_TABBED_SELECTED)};this.protectedSyncSubRect=function(T){var Y=v.getWidth(),ia=v.getHeight(),pa=v.getHeadHeight();r==V.HEAD_TOP_LEFT||r==V.HEAD_TOP_RIGHT?T.setRectangle(0,pa,Y,Math.max(0,ia-pa)):r==V.HEAD_BOTTOM_LEFT||
r==V.HEAD_BOTTOM_RIGHT?T.setRectangle(0,0,Y,Math.max(0,ia-pa)):T.setRectangle(0,0,Y,ia)};this.getAffectedParamType=function(){return p.AffectedType_Tab};this.switchToSubTabbed=function(T){T=v.getWidget(T);T.setVisible(!0);g.firePropertyChangedEvent(T,V.KEY_SWITCH_SUB)};this.setHeadPosition=function(T){r=T;g.syncSubsRect();g.firePropertyChangedEvent(v,V.KEY_HEAD_POSITION)};this.getHeadPosition=function(){return r};this.setHeadPattern=function(T){y=T;g.syncSubsRect();g.firePropertyChangedEvent(v,V.KEY_HEAD_PATTERN)};
this.getHeadPattern=function(){return y};this.getHeadHeight=function(){switch(y){case V.HEAD_PATTERN_BAR:return 50;case V.HEAD_PATTERN_BARE:return 24;default:return 0}};this.setSlideshowEnabled=function(T){R=T;g.firePropertyChangedEvent(v,V.KEY_SLIDESHOW)};this.isSlideshowEnabled=function(){return R};this.isTopLevelSlideshow=function(){if(R){for(var T=v;T.getParent();)if(T=T.getParent(),T instanceof V&&T.isSlideshowEnabled())return!1;return!0}return!1};this.isAllDescendentSlideshowRuntimePrepared=
function(){var T=!0;v.traversalDescendents(function(Y){var ia=!1;Y instanceof la&&Y.getParent().isSlideshowEnabled()&&(T=T&&Y.getDurationMode().isReadyToPlay(),!T&&(ia=!0));return ia});return T};this.searchVisibleSubTabbedIndex=function(){for(var T=0;T<v.getWidgetCount();T++)if(v.getWidget(T).isVisible())return T;return-1};this.protectedToJsonObject=function(T){T.position=r;T.pattern=y;T.slideshow=R;g.fontSizeEnhancedToJsonObject(T);g.containerToJsonObject(T)};this.protectedFromJsonObject=function(T){r=
T.position;y=T.pattern;R=T.slideshow;g.fontSizeEnhancedFromJsonObject(T);g.containerFromJsonObject(T);for(T=0;T<v.getWidgetCount();T++)v.getWidget(T).setVisible(0==T)}}function la(){kb.call(this);oc.call(this);Rb.call(this);var v=this,g=this.protectedMethod,r,y=new Lb;this.getSuperType=function(){return p.WidgetSuperType_FilterSimilary|p.WidgetSuperType_ContainerWithBackground};this.getWidgetTypeName=function(){return p.WidgetType_OneTabbed};this.isMovable=function(){return!1};this.isCanBeContained=
function(T,Y){if(T instanceof V)return!0;Y&&Y.push(Xb.get("widgetOneTabbedCanBeContainedPrompt","\u9875\u7b7e\u53ea\u80fd\u51fa\u73b0\u5728\u9875\u7b7e\u63a7\u4ef6\u4e2d\u3002"));return!1};this.getSourceDataType=function(){return Ic.DT_STRING};this.setAffectedTargets=function(T){throw Error("Unsupported");};this.getAffectedTargets=function(){var T=null;y.getType()==eb.TYPE_ByData&&(T=(T=y.getAffectedTargets())&&T.getItemCount()?T:null);return T};this.setHeadText=function(T){r=T;g.firePropertyChangedEvent(v,
la.KEY_HEAD_TEXT)};this.getHeadText=function(){return r};this.setDurationMode=function(T){y.removeDirtyListener(R);y=T;y.addDirtyListener(R);g.firePropertyChangedEvent(v,la.KEY_DURATION_MODE)};this.getDurationMode=function(){return y};var R=function(){g.firePropertyChangedEvent(v,la.KEY_DURATION_MODE)};this.protectedToJsonObject=function(T){g.containerToJsonObject(T);g.backgroundToJsonObject(T);T.headText=r;var Y={};y.toJsonObject(Y);T.durationMode=Y};this.protectedFromJsonObject=function(T){g.containerFromJsonObject(T);
g.backgroundFromJsonObject(T);r=T.headText;if(T=T.durationMode){var Y=eb.createInstance(T.type);Y.fromJsonObject(T);y.removeDirtyListener(R);y=Y;y.addDirtyListener(R)}}}function Qa(){var v=this,g,r,y=!1,R=!1,T,Y,ia;this.getFontName=function(){return g};this.setFontName=function(pa){g=pa};this.getFontSize=function(){return r};this.setFontSize=function(pa){r=pa};this.isBold=function(){return y};this.setBold=function(pa){y=pa};this.isItalic=function(){return R};this.setItalic=function(pa){R=pa};this.getColor=
function(){return T};this.setColor=function(pa){T=pa};this.getBackground=function(){return Y};this.setBackground=function(pa){Y=pa};this.getAlign=function(){return ia};this.setAlign=function(pa){ia=pa};this.isEquals=function(pa){return pa&&g==pa.getFontName()&&r==pa.getFontSize()&&y==pa.isBold()&&R==pa.isItalic()&&T==pa.getColor()&&Y==pa.getBackground()&&ia==pa.getAlign()};this.copy=function(){var pa=new Qa;pa.setFontName(v.getFontName());pa.setFontSize(v.getFontSize());pa.setBold(v.isBold());pa.setItalic(v.isItalic());
pa.setColor(v.getColor());pa.setBackground(v.getBackground());pa.setAlign(v.getAlign());return pa};this.toJsonObject=function(){var pa={};pa.fontName=g;pa.fontSize=r;y&&(pa.bold=!0);R&&(pa.italic=!0);pa.color=T;pa.background=Y;pa.align=ia;return pa};this.fromJsonObject=function(pa){g=pa.fontName;r=pa.fontSize;y=pa.bold?!0:!1;R=pa.italic?!0:!1;T=pa.color;Y=pa.background;ia=pa.align}}function ca(){var v=this,g;this.getType=function(){throw Error("Override");};this.hookPropertyChangedListener=function(r){g=
r};this.toJsonObject=function(){var r={};r.type=v.getType();v.protectedToJsonObject(r);return r};this.protectedToJsonObject=function(r){};this.fromJsonObject=function(r){v.protectedFromJsonObject(r)};this.protectedFromJsonObject=function(r){};this.protectedMethod={firePropertyChangedEvent:function(){g&&g()}}}function na(){ca.call(this);this.getType=function(){return ca.TYPE_SIMPLE}}function k(){ca.call(this);var v=this.protectedMethod,g=Zc.create();this.getType=function(){return ca.TYPE_MODEL};this.getCardLook=
function(){return g};this.setCardLook=function(r){g=r;v.firePropertyChangedEvent()};this.protectedToJsonObject=function(r){r.cardLook=g.toJsonObject()};this.protectedFromJsonObject=function(r){g.fromJsonObject(r.cardLook)}}function Wa(){ca.call(this);var v=this.protectedMethod,g,r=[0,0,0,0],y,R;this.getType=function(){return ca.TYPE_IMAGE};this.getImage=function(){return g};this.getFixedEdges=function(){return r};this.setDefinition=function(Y,ia){R=y=null;g=Y;r=ia;v.firePropertyChangedEvent()};this.loadImage=
function(Y){R?R.push(Y):y?Y(y):g?(!R&&(R=[]),R.push(Y),Y=g.getReferenceCustomMap(),Rc.getPictureLoader()(Y,function(ia,pa,Ba){var Ya=new Image;Ya.onload=function($a){y=Ya;T(y)};Ya.src=ia},function(ia){window.console&&window.console.error("Load image error: "+ia);T(null)})):Y(null)};var T=function(Y){for(var ia=0;ia<R.length;ia++)(0,R[ia])(Y);R=null};this.protectedToJsonObject=function(Y){g&&(Y.image=g.toJsonObject(),Y.left=r[0],Y.right=r[1],Y.top=r[2],Y.bottom=r[3])};this.protectedFromJsonObject=
function(Y){g=R=y=null;r=[0,0,0,0];var ia=Y.image;ia&&(g=ba.createPeer(),g.fromJsonObject(ia),r[0]=Y.left,r[1]=Y.right,r[2]=Y.top,r[3]=Y.bottom)}}function fa(){var v=this;this.getType=function(){throw Error("Override");};this.toShortDisplay=function(g){throw Error("Override");};this.isValid=function(){throw Error("Override");};this.isConfirmedToGetPreparedValue=function(g){return!0};this.isPreparedValueRelatedToWidget=function(g){return!1};this.getPreparedValue=function(g,r,y,R){throw Error("Override");
};this.getPreparedValuePeer=function(g,r,y){throw Error("Override");};this.toJsonObject=function(g){g.type=v.getType();v.protectedToJsonObject(g)};this.fromJsonObject=function(g){v.protectedFromJsonObject(g)};this.protectedToJsonObject=function(g){throw Error("Override");};this.protectedFromJsonObject=function(g){throw Error("Override");}}function ta(){fa.call(this);var v=this,g,r,y,R,T=!0;this.getType=function(){return fa.TYPE_VisualWidget};this.setSourceWidgetName=function(ia){g=ia};this.getSourceWidgetName=
function(){return g};this.setMetaFieldFullName=function(ia){r=ia};this.getMetaFieldFullName=function(){return r};this.setDisplayMetaFieldFullName=function(ia){y=ia};this.getDisplayMetaFieldFullName=function(){return y};this.setOrderByMetaFieldFullName=function(ia){R=ia};this.getOrderByMetaFieldFullName=function(){return R};this.setOrderByAsc=function(ia){T=ia};this.isOrderByAsc=function(){return T};this.toShortDisplay=function(ia){return v.isValid()?(ia=ia.searchWidgetByName(g))?Xb.get("displayFilterSourceFromRef",
"\u6765\u81ea\u201c#1\u201d").replace("#1",ia.getDisplayName()):Xb.get("displayFilterSourceNotExist","\u4e0d\u5b58\u5728\u201c#1\u201d").replace("#1",g):Xb.get("displayFilterSourceIncomplete","\u8bbe\u7f6e\u4e0d\u5b8c\u6574")};this.isValid=function(){return g&&r};this.isConfirmedToGetPreparedValue=function(ia){return(ia=ia.getTopPage().searchWidgetByName(g))?ia.getExecutingTag()?!0:!1:!1};this.isPreparedValueRelatedToWidget=function(ia){return g==ia};this.getPreparedValue=function(ia,pa,Ba,Ya){var $a=
ia.isLightWeight();ia=ia.getTopPage().searchWidgetByName(g);Y(ia,pa,$a,Ba,Ya)};this.getPreparedValuePeer=function(ia,pa,Ba){ia=ia.getTopPage().searchWidgetByName(g);Y(ia,null,!1,pa,Ba)};var Y=function(ia,pa,Ba,Ya,$a){ia?(ia=ia.getExecutingTag(),Ya=Ya(function(Fb){var wb=[];Fb=Fb.values;for(var Fa=0;Fa<Fb.length;Fa++){var ua=Fb[Fa],Sb=new Oa;Sb.setValue(ua.value);Sb.setText(ua.text);wb.push(Sb)}$a(wb)},function(Fb,wb){console&&console.log("errorCode:"+Fb+", "+wb);902002==Fb?(Fb=new Oa,Fb.setValue(null),
Fb.setText(Xb.get("tooManyItems","\u8d85\u8fc71000\u9879\uff0c\u5efa\u8bae\u4f7f\u7528\u5f39\u7a97\u9009\u62e9\u5668\u4ee3\u66ff\u3002")),$a([Fb])):$a(null);return!0}),Ya.setShowBlocking(!1),Ya.getFilterPreparedValue(ia,"Discrete",r,y,R,T,pa,Ba)):$a(null)};this.protectedToJsonObject=function(ia){ia.sourceWidgetName=g;ia.metaFieldFullName=r;ia.displayMetaFieldFullName=y;ia.orderByMetaFieldFullName=R;ia.asc=T};this.protectedFromJsonObject=function(ia){g=ia.sourceWidgetName;r=ia.metaFieldFullName;y=
ia.displayMetaFieldFullName;R=ia.orderByMetaFieldFullName;T=ia.asc}}function Ra(){fa.call(this);var v=this,g=[];this.getType=function(){return fa.TYPE_CustomList};this.addItem=function(y,R){g.push(r(y,R))};var r=function(y,R){var T=new Oa;T.setValue(y);T.setText(R);return T};this.insertItem=function(y,R,T){g.splice(y,0,r(R,T))};this.deleteItem=function(y){g.splice(y,1)};this.getItemsCount=function(){return g.length};this.getItemValue=function(y){return(y=g[y])?y.getValue():null};this.getItemText=
function(y){return(y=g[y])?y.getText():null};this.toShortDisplay=function(y){return v.isValid()?Xb.get("displayFilterSourceFromCustom","\u5171#1\u9879").replace("#1",g.length):Xb.get("displayFilterSourceIncomplete","\u8bbe\u7f6e\u4e0d\u5b8c\u6574")};this.isValid=function(){return 0<g.length};this.getPreparedValue=function(y,R,T,Y){y=g.slice(0);Y(y)};this.getPreparedValuePeer=function(y,R,T){y=g.slice(0);T(y)};this.protectedToJsonObject=function(y){for(var R=[],T=0;T<g.length;T++){var Y=g[T],ia={};
ia.value=Y.getValue();ia.text=Y.getText();R.push(ia)}y.items=R};this.protectedFromJsonObject=function(y){y=y.items;for(var R=0;R<y.length;R++){var T=y[R],Y=new Oa;Y.setValue(T.value);Y.setText(T.text);g.push(Y)}}}function Oa(){var v,g;this.setValue=function(r){v=r};this.getValue=function(){return v};this.setText=function(r){g=r};this.getText=function(){return g};this.getDisplayText=function(){var r=g;void 0!==r&&null!==r||(r=v);return r}}function Qb(){var v=this;this.getType=function(){throw Error("Override");
};this.toShortDisplay=function(){throw Error("Override");};this.isSingleSelectableFitting=function(){return!1};this.getItems=function(g,r,y){throw Error("Override");};this.toJsonObject=function(g){g.type=v.getType();v.protectedToJsonObject(g)};this.fromJsonObject=function(g){v.protectedFromJsonObject(g)};this.protectedToJsonObject=function(g){throw Error("Override");};this.protectedFromJsonObject=function(g){throw Error("Override");}}function Ka(){Qb.call(this);var v=0;this.getType=function(){return Qb.TYPE_ByIndex};
this.toShortDisplay=function(){return Xb.get("displayDefaultSelectedByIndex","\u7b2c\u4e00\u9879")};this.isSingleSelectableFitting=function(){return!0};this.getItems=function(g,r,y){r=0<=v&&v<g.length?v:0;var R=[];0<g.length&&R.push(g[r]);y(R)};this.protectedToJsonObject=function(g){g.index=v};this.protectedFromJsonObject=function(g){v=g.index}}function $b(){Qb.call(this);var v=null;this.getType=function(){return Qb.TYPE_ByAppointed};this.toShortDisplay=function(){if(v){if(1==v.length){var g=v[0];
return g?g:Xb.get("displayDefaultSelectedByAppointedNull","\uff08\u7a7a\uff09")}return Xb.get("displayDefaultSelectedByAppointedSome","\u5df2\u6307\u5b9a#1\u9879").replace("#1",v.length)}return Xb.get("displayDefaultSelectedByAppointedAll","\u5168\u90e8")};this.isSingleSelectableFitting=function(){return v&&1==v.length};this.getItems=function(g,r,y){var R=null;if(v){for(var T={},Y=0;Y<v.length;Y++){var ia=v[Y];!ia&&(ia="");T[ia]=!0}R=[];for(Y=0;Y<g.length;Y++){var pa=g[Y];ia=pa.getValue();!ia&&(ia=
"");if(T[ia]&&(R.push(pa),!r))break}}y(R)};this.setAppointedValue=function(g){v=g};this.protectedToJsonObject=function(g){g.appointeds=v};this.protectedFromJsonObject=function(g){v=(g=g.appointeds)?g:null}}function pc(){var v=[];this.addItem=function(g){v.push(g)};this.getItemCount=function(){return v.length};this.getItem=function(g){return v[g]};this.getTarget=function(g){for(var r=0;r<v.length;r++){var y=v[r];if(y.isAffectingInsideDashboard()&&g==y.getTargetWidgetName())return y}return null};this.reverse=
function(g,r){for(var y=0;y<v.length;y++){var R=v[y];if(R.isAffectingInsideDashboard()&&R.isSettingComplete()){var T=R.getTargetWidgetName(),Y=r[T];Y||(Y=new gb,r[T]=Y);Y.put(g,R)}}};this.checkDuplicated=function(){for(var g={},r=0;r<v.length;r++){var y=v[r];if(y.isAffectingInsideDashboard()){y=y.getTargetWidgetName();if(g[y])return y;g[y]=!0}}return null};this.toJsonObject=function(g){for(var r=[],y=0;y<v.length;y++){var R={},T=v[y];T.toJsonObject(R);switch(T.getType()){case p.AffectedType_BindField:R.type=
"binding";break;case p.AffectedType_Param:R.type="param";break;case p.AffectedType_Tab:R.type="tab";break;case p.AffectedType_Hotlink:R.type="hotlink";break;default:throw Error("Modify here");}r.push(R)}g.items=r};this.fromJsonObject=function(g){v=[];if(g=g.items)for(var r=0;r<g.length;r++){var y=g[r];switch(y.type){case "binding":var R=new Gc;break;case "param":R=new Qc;break;case "tab":R=new Pa;break;case "hotlink":R=new fb;break;default:throw Error("Modify here");}R.fromJsonObject(y);v.push(R)}}}
function Bc(){this.getType=function(){throw Error("Implement");};this.isAffectingInsideDashboard=function(){return!1};this.isSettingComplete=function(){throw Error("Implement");};this.toJsonObject=function(v){throw Error("Implement");};this.fromJsonObject=function(v){throw Error("Implement");}}function yc(){Bc.call(this);var v=this,g;this.setTargetWidgetName=function(r){g=r};this.getTargetWidgetName=function(){return g};this.isAffectingInsideDashboard=function(){return!0};this.getUsableParamName=
function(){throw Error("Implement");};this.isSettingComplete=function(){return g&&v.protectedIsComplete()};this.protectedIsComplete=function(){throw Error("Implement");};this.toJsonObject=function(r){r.widget=g;v.protectedToJsonObject(r)};this.protectedToJsonObject=function(r){throw Error("Implement");};this.fromJsonObject=function(r){g=r.widget;v.protectedFromJsonObject(r)};this.protectedFromJsonObject=function(r){throw Error("Implement");}}function Gc(){yc.call(this);var v;this.setMetaFieldFullName=
function(g){v=g};this.getMetaFieldFullName=function(){return v};this.getType=function(){return p.AffectedType_BindField};this.protectedIsComplete=function(){return v?!0:!1};this.getUsableParamName=function(){return v};this.protectedToJsonObject=function(g){g.metaField=v};this.protectedFromJsonObject=function(g){v=g.metaField}}function Qc(){yc.call(this);var v;this.setParamName=function(g){v=g};this.getParamName=function(){return v};this.getType=function(){return p.AffectedType_Param};this.protectedIsComplete=
function(){return v?!0:!1};this.getUsableParamName=function(){return v};this.protectedToJsonObject=function(g){g.param=v};this.protectedFromJsonObject=function(g){v=g.param}}function Pa(){yc.call(this);var v=0;this.setTabIndex=function(g){v=g};this.getTabIndex=function(){return v};this.getType=function(){return p.AffectedType_Tab};this.protectedIsComplete=function(){return!0};this.getUsableParamName=function(){return"tab"};this.protectedToJsonObject=function(g){g.tabIndex=v};this.protectedFromJsonObject=
function(g){v=g.tabIndex}}function fb(){Bc.call(this);var v,g,r;this.setMode=function(y){v=y};this.getMode=function(){return v};this.setUrl=function(y){g=y};this.getUrl=function(){return g};this.setUsableUrl=function(y){r=y};this.getUsableUrl=function(){return r};this.getType=function(){return p.AffectedType_Hotlink};this.isSettingComplete=function(){return g?!0:!1};this.toJsonObject=function(y){y.mode=v;y.url=g};this.fromJsonObject=function(y){v=y.mode;g=y.url}}function gb(){var v={};this.put=function(g,
r){v[g]=r};this.getAllParamName=function(){var g=[],r;for(r in v)g.push(v[r].getUsableParamName());return g};this.getAllParamAttr=function(){var g=[],r;for(r in v)g.push(v[r].getType()==p.AffectedType_BindField);return g}}function sb(){var v=[],g=[],r={},y=!1;this.repickParams=function(ia){var pa=ia?ia.getAllParamName():[];y=!1;for(var Ba=0;Ba<v.length;Ba++){for(var Ya=v[Ba],$a=!1,Fb=0;Fb<pa.length;Fb++)if(Ya==pa[Fb]){$a=!0;break}if(!$a){y=!0;break}}v=pa;g=ia?ia.getAllParamAttr():[];ia={};for(pa=
0;pa<v.length;pa++)Ba=v[pa],Ya=r[Ba],void 0!==Ya&&(ia[Ba]=Ya);r=ia};this.checkAffectedChainBroken=function(){var ia=y;y=!1;return ia};this.putParamValue=function(ia,pa,Ba){if(!Ba||Ba instanceof Array&&0==Ba.length)return pa=void 0!==r[ia],delete r[ia],pa;var Ya=r[ia];Ya=Ya?JSON.stringify(Y(Ya.dataType,Ya.value)):null;var $a=JSON.stringify(Y(pa,Ba)),Fb={};Fb.dataType=pa;Fb.value=Ba;r[ia]=Fb;return Ya!=$a};this.isAllParamsAttend=function(){for(var ia=0;ia<v.length;ia++)if(void 0===r[v[ia]])return!1;
return!0};var R=function(ia,pa){for(var Ba={},Ya=0;Ya<v.length;Ya++){var $a=v[Ya];if(!Ba[$a]){Ba[$a]=!0;var Fb=r[$a];if(Fb){var wb=Fb.value;Fb=Fb.dataType;if(!pa)if(wb instanceof Oa&&wb.getValue()==fa.ITEM_ALL)continue;else if(wb instanceof Array&&1==wb.length&&wb[0].getValue()==fa.ITEM_ALL)continue;ia($a,wb,g[Ya],Fb)}}}},T=function(ia){if(ia instanceof Oa)var pa=[ia.getValue()];else if(ia instanceof Array){pa=[];for(var Ba=0;Ba<ia.length;Ba++)pa.push(ia[Ba].getValue())}else throw Error("Unsupport");
return pa},Y=function(ia,pa){if(ia==Ic.DT_STRING)ia=T(pa);else if(ia==Ic.DT_DATE)ia=[JSON.stringify(pa.getJsonDateRange())];else throw Error("Unsupport");return ia};this.createParamValueSearcherApi=function(){var ia={};R(function(Ba,Ya,$a,Fb){if(Ya instanceof Oa)var wb=Ya.getText();else if(Ya instanceof Array){$a=[];for(Fb=0;Fb<Ya.length;Fb++)$a.push(Ya[Fb].getText());wb=$a.join(" ")}ia[Ba]=wb},!0);var pa=!1;R(function(Ba,Ya,$a,Fb){pa=!0});return{searchDisplayText:function(Ba){return ia[Ba]},isAnyOneExceptedItemAll:function(){return pa}}};
this.createAdditionalFilterApi=function(){var ia=function(){var Ya=null,$a=null;R(function(Fb,wb,Fa,ua){Ya||($a=[],Ya={},Ya.items=$a);if(Fa||ua==Ic.DT_STRING)wb=Y(ua,wb),Fa=pa(Fa,ua,Fb,wb),$a.push(Fa);else if(ua==Ic.DT_DATE)if(pc.isDoubleParamName(Fb)){Fb=pc.decodeDoubleParamName(Fb);var Sb=Fb[0];Fb=Fb[1];if(Sb){var hc=[wb.getParamScopeStart()];Sb=pa(Fa,ua,Sb,hc);$a.push(Sb)}Fb&&(wb=[wb.getParamScopeEnd()],Fa=pa(Fa,ua,Fb,wb),$a.push(Fa))}else wb=[wb.getParamSingleValue()],Fa=pa(Fa,ua,Fb,wb),$a.push(Fa)});
return Ya},pa=function(Ya,$a,Fb,wb){var Fa={};Fa.key=Fb;Fa.isMetaFieldBound=Ya;Fa.selectedValue=wb;Fa.valueDataType=$a;return Fa},Ba={};Ba.toExecutableJsonObject=ia;Ba.toMetaFieldNames=function(){var Ya=[];R(function($a,Fb,wb,Fa){wb&&Ya.push($a)});return Ya};Ba.toDisplayJsonObject=function(){var Ya=ia();return Ya?Ya.items:null};return Ba};this.createExternalParamsApi=function(){return{toJsonObject:function(){var ia={};R(function(pa,Ba,Ya,$a){if(!Ya)if($a==Ic.DT_STRING)ia[pa]=T(Ba);else if($a==Ic.DT_DATE)pc.isDoubleParamName(pa)?
(Ya=pc.decodeDoubleParamName(pa),pa=Ya[0],Ya=Ya[1],pa&&(ia[pa]=[Ba.getParamScopeStart()]),Ya&&(ia[Ya]=[Ba.getParamScopeEnd()])):ia[pa]=[Ba.getParamSingleValue()];else throw Error("Unsupport");});return ia},toUrlParams:function(){var ia="",pa=function(Ba,Ya){0<ia.length&&(ia+="&");ia+=Ba+"="+encodeURIComponent(Ya)};R(function(Ba,Ya,$a,Fb){if(!$a)if(Fb==Ic.DT_STRING)if(Ya instanceof Oa)pa(Ba,Ya.getValue());else if(Ya instanceof Array&&0<Ya.length)pa(Ba,Ya[0].getValue());else throw Error("Unsupport");
else if(Fb==Ic.DT_DATE)pc.isDoubleParamName(Ba)?($a=pc.decodeDoubleParamName(Ba),Ba=$a[0],$a=$a[1],Ba&&pa(Ba,Ya.getParamScopeStart()),$a&&pa($a,Ya.getParamScopeEnd())):pa(Ba,Ya.getParamSingleValue());else throw Error("Unsupport");});return ia}}}}function Na(){var v=[];this.setFragments=function(g){v=g};this.getFragmentCount=function(){return v.length};this.getFragment=function(g){return v[g]};this.toJsonObject=function(g){for(var r=[],y=0;y<v.length;y++){var R={};v[y].toJsonObject(R);r.push(R)}g.fragments=
r};this.fromJsonObject=function(g){v=[];g=g.fragments;for(var r=0;r<g.length;r++){var y=g[r],R=new Na.Fragment;R.fromJsonObject(y);v.push(R)}}}function eb(){var v=this,g=new bc;this.getType=function(){throw Error("Implement");};this.isReadyToPlay=function(){return!0};this.playStart=function(r,y){throw Error("Implement");};this.playStop=function(){throw Error("Implement");};this.getPlayingData=function(){return null};this.resetPlayingStatus=function(){};this.addDirtyListener=function(r){g.addListener(r)};
this.removeDirtyListener=function(r){g.removeListener(r)};this.toJsonObject=function(r){r.type=v.getType();v.protectedToJsonObject(r)};this.protectedToJsonObject=function(r){throw Error("Implement");};this.fromJsonObject=function(r){v.protectedFromJsonObject(r)};this.protectedFromJsonObject=function(r){throw Error("Implement");};this.protectedMethod={fireDirtyEvent:function(){g.fireEvent(function(r){r()})}}}function Lb(){eb.call(this);var v=this.protectedMethod,g=10,r;this.getType=function(){return eb.TYPE_ByFixedTime};
this.playStart=function(y,R){y()||(r=setTimeout(function(){R(!0)},1E3*g));return!1};this.playStop=function(){r&&clearTimeout(r)};this.getDuration=function(){return g};this.setDuration=function(y){g=y;v.fireDirtyEvent()};this.protectedToJsonObject=function(y){y.duration=g};this.protectedFromJsonObject=function(y){g=y.duration}}function ob(){eb.call(this);var v=this,g=this.protectedMethod,r,y,R=10,T,Y=-1,ia,pa={},Ba,Ya,$a;this.getType=function(){return eb.TYPE_ByData};this.setFilterSource=function(Fa){r=
Fa;g.fireDirtyEvent()};this.getFilterSource=function(){return r};this.setAffectedTargets=function(Fa){y=Fa;g.fireDirtyEvent()};this.getAffectedTargets=function(){return y};this.setEachDuration=function(Fa){R=Fa;g.fireDirtyEvent()};this.getEachDuration=function(){return R};this.createWidgetPeer=function(){return new function(){this.getFilterSource=function(){return r};this.isIncludeItemAllSupported=function(){return!1}}};this.setRuntimeData=function(Fa){Y=(T=Fa)&&0<T.length?0:-1;pa={};v.lookForAffectedTargetWidgets(function(ua){pa[ua]=
null})};this.lookForAffectedTargetWidgets=function(Fa){if(y)for(var ua=0;ua<y.getItemCount();ua++){var Sb=y.getItem(ua);!Sb.isSettingComplete()||Sb.getType()!=p.AffectedType_BindField&&Sb.getType()!=p.AffectedType_Param||Fa(Sb.getTargetWidgetName())}};this.isReadyToPlay=function(){return void 0!==T};this.getPlayingData=function(){return T[Y]};this.resetPlayingStatus=function(){-1!=Y&&(Y=0)};this.playStart=function(Fa,ua){if(-1==Y)return Fa()||($a=setTimeout(function(){ua(!0)},1E3*R)),!1;Fb();Ba=Fa;
Ya=ua;return!0};this.playStop=function(){$a&&clearTimeout($a)};var Fb=function(){ia=""+Math.random();for(var Fa in pa)pa[Fa]=null},wb=function(){for(var Fa in pa)if(!pa[Fa])return!1;return!0};this.getPlayingRoundId=function(){return ia};this.untilAllAffectedTargetsExecuted=function(Fa,ua,Sb){if(ia==Fa&&(pa[ua]=Sb,wb()&&(Fa=Ba&&Ba(),Ba=null,!Fa))){for(var hc in pa)(0,pa[hc])();$a=setTimeout(function(){var wc=Y==T.length-1;Y++;Y>=T.length&&(Y=0);Ya&&Ya(wc);Ya=null},1E3*R)}};this.protectedToJsonObject=
function(Fa){if(r){var ua={};r.toJsonObject(ua);Fa.filterSource=ua}y&&(ua={},y.toJsonObject(ua),Fa.affectedTargets=ua);Fa.eachDuration=R};this.protectedFromJsonObject=function(Fa){var ua=Fa.filterSource;ua&&(r=fa.createInstance(ua.type),r.fromJsonObject(ua));if(ua=Fa.affectedTargets)y=new pc,y.fromJsonObject(ua);R=Fa.eachDuration}}function Pb(v){var g=v?v:{},r;this.getItems=function(y){return g[y]};this.pickItems=function(y,R){!R&&(R={});var T=g[y];if(T)for(var Y=0;Y<T.length;Y++){var ia=T[Y];R[ia.getKey()]=
ia.getValue()}if(r&&(y=r[y]))for(var pa in y)R[pa]=y[pa];return R};this.copyToEdit=function(){var y={},R;for(R in g){for(var T=g[R],Y=[],ia=0;ia<T.length;ia++){var pa=T[ia];pa=new E(pa.getKey(),pa.getValue());Y.push(pa)}y[R]=Y}return new Pb(y)};this.setPriorPreview=function(y){r=y};this.toJsonObject=function(){var y={};for(Ba in g){for(var R=g[Ba],T=[],Y=0;Y<R.length;Y++){var ia=R[Y],pa={};pa.key=ia.getKey();pa.value=ia.getValue();T.push(pa)}y[Ba]=T}var Ba={};Ba.groups=y;return Ba};this.fromJsonObject=
function(y){y=y.groups;g={};for(var R in y){for(var T=y[R],Y=[],ia=0;ia<T.length;ia++){var pa=T[ia];pa=new ec(pa.key,pa.value);Y.push(pa)}g[R]=Y}}}function ec(v,g){this.getKey=function(){return v};this.getValue=function(){return g}}function E(v,g){ec.call(this,v);var r=g;this.getValue=function(){return r};this.setValue=function(y){r=y}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&
(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.dsb&&(com.kingdee.bos.qing.dsb={});"undefined"==typeof com.kingdee.bos.qing.dsb.model&&(com.kingdee.bos.qing.dsb.model={});var ib=com.kingdee.bos.qing.dsb.model;ib.DashboardModel=p;ib.WidgetUnknown=function(){Wb.call(this);var v;this.getUnknownType=function(){return v};this.getWidgetTypeName=function(){return p.WidgetType_Unknown};this.protectedToJsonObject=function(g){g="Can not save due to unknown type '#1' exist.".replace("#1",
v);var r=new Kc;r.setOptionType(Kc.OPTION_OK);r.setMessage(g);r.showDialog();throw Error(g);};this.protectedFromJsonObject=function(g){v=g.widgetType}};ib.WidgetPageTitleBar=Eb;ib.AbstractCardSimilary=Jb;ib.WidgetSquare=function(){Wb.call(this);Jb.call(this);Xa.call(this);Rb.call(this);jc.call(this);dc.call(this);Ca.call(this);vb.call(this);Bb.call(this);var v=this,g=this.protectedMethod;this.getSuperType=function(){return p.WidgetSuperType_BuiltinVisual|p.WidgetSuperType_CardSimilary|p.WidgetSuperType_AffectedTarget|
p.WidgetSuperType_FilterSimilary|p.WidgetSuperType_OutputParamProvider|p.WidgetSuperType_FullscreenSupported|p.WidgetSuperType_Referable};this.getWidgetTypeName=function(){return p.WidgetType_Square};this.getSourceDataType=function(){return Ic.DT_STRING};this.copyReference=function(r){Rc.getWidgetSourceSelector().copySquare(v.getReferenceCustomMap(),function(y){v.setReferenceCustomMap(y);r()})};this.protectedToJsonObject=function(r){g.autoRefreshableToJsonObject(r);g.referableToJsonObject(r);g.cardSimilaryToJsonObject(r);
g.filterSimilaryToJsonObject(r)};this.protectedFromJsonObject=function(r){g.autoRefreshableFromJsonObject(r);g.referableFromJsonObject(r);g.cardSimilaryFromJsonObject(r);g.filterSimilaryFromJsonObject(r)}};ib.WidgetLonger=function(){Wb.call(this);Jb.call(this);Xa.call(this);jc.call(this);dc.call(this);Ca.call(this);vb.call(this);Bb.call(this);var v=this,g=this.protectedMethod;this.getSuperType=function(){return p.WidgetSuperType_BuiltinVisual|p.WidgetSuperType_CardSimilary|p.WidgetSuperType_AffectedTarget|
p.WidgetSuperType_OutputParamProvider|p.WidgetSuperType_FullscreenSupported|p.WidgetSuperType_Referable};this.getWidgetTypeName=function(){return p.WidgetType_Longer};this.copyReference=function(r){Rc.getWidgetSourceSelector().copyLonger(v.getReferenceCustomMap(),function(y){v.setReferenceCustomMap(y);r()})};this.protectedToJsonObject=function(r){g.autoRefreshableToJsonObject(r);g.referableToJsonObject(r);g.cardSimilaryToJsonObject(r)};this.protectedFromJsonObject=function(r){g.autoRefreshableFromJsonObject(r);
g.referableFromJsonObject(r);g.cardSimilaryFromJsonObject(r)}};ib.WidgetQingReport=function(){Wb.call(this);Xa.call(this);jc.call(this);dc.call(this);Jb.call(this);Bb.call(this);var v=this,g=this.protectedMethod;this.getSuperType=function(){return p.WidgetSuperType_AffectedTarget|p.WidgetSuperType_Referable|p.WidgetSuperType_CardSimilary|p.WidgetSuperType_FullscreenSupported};this.getWidgetTypeName=function(){return p.WidgetType_QingReport};this.copyReference=function(r){Rc.getWidgetSourceSelector().copyQingReport(v.getReferenceCustomMap(),
function(y){v.setReferenceCustomMap(y);r()})};this.getExecutableAffectedParams=function(){var r=v.getExecutingInputParams();return r?r.createExternalParamsApi().toJsonObject():{}};this.getAffectedParamType=function(){return p.AffectedType_Param};this.protectedToJsonObject=function(r){g.autoRefreshableToJsonObject(r);g.referableToJsonObject(r);g.cardSimilaryToJsonObject(r)};this.protectedFromJsonObject=function(r){g.autoRefreshableFromJsonObject(r);g.referableFromJsonObject(r);g.cardSimilaryFromJsonObject(r)}};
ib.WidgetExtReport=Kb;ib.WidgetProgramableCard=function(){Wb.call(this);jc.call(this);dc.call(this);var v=this,g=this.protectedMethod;this.getWidgetTypeName=function(){return p.WidgetType_ProgramableCard};this.getDashboardSkinName=function(){return v.getTopPage().getSkin()};this.protectedToJsonObject=function(r){g.referableToJsonObject(r);g.autoRefreshableToJsonObject(r)};this.protectedFromJsonObject=function(r){g.referableFromJsonObject(r);g.autoRefreshableFromJsonObject(r)}};ib.WidgetCosmicCustomCard=
rb;ib.WidgetCloudhubSubscribes=function(){Wb.call(this);var v;this.getWidgetTypeName=function(){return p.WidgetType_CloudhubSubscribes};this.setEncodedModel=function(g){v=g};this.getEncodedModel=function(){return v};this.protectedToJsonObject=function(g){g.encodedModel=v};this.protectedFromJsonObject=function(g){v=g.encodedModel}};ib.AbstractTextWidget=cc;ib.WidgetLabel=Ab;ib.WidgetRich=Va;ib.WidgetPicture=ba;ib.WidgetIframe=bb;ib.WidgetClock=jb;ib.WidgetCombobox=function(){Wb.call(this);Cb.call(this);
Rb.call(this);Ga.call(this);Xa.call(this);var v=this.protectedMethod;this.getSuperType=function(){return p.WidgetSuperType_DiscreteItemFilter|p.WidgetSuperType_FilterSimilary|p.WidgetSuperType_AffectedTarget|p.WidgetSuperType_WithLabel};this.getWidgetTypeName=function(){return p.WidgetType_Combobox};this.getSourceDataType=function(){return Ic.DT_STRING};this.getAffectedParamType=function(){return p.AffectedType_BindField};this.isIncludeItemAllSupported=function(){return!0};this.isMultiSelectable=
function(){return!1};this.protectedToJsonObject=function(g){v.discreteItemFilterToJsonObject(g);v.filterSimilaryToJsonObject(g);v.inputCtrlWithLabelToJsonObject(g)};this.protectedFromJsonObject=function(g){v.discreteItemFromJsonObject(g);v.filterSimilaryFromJsonObject(g);v.inputCtrlWithLabelFromJsonObject(g)}};ib.WidgetButtonGroup=Aa;ib.WidgetF7=function(){Wb.call(this);Cb.call(this);Rb.call(this);Ga.call(this);Xa.call(this);var v=this.protectedMethod;this.getSuperType=function(){return p.WidgetSuperType_DiscreteItemFilter|
p.WidgetSuperType_FilterSimilary|p.WidgetSuperType_AffectedTarget|p.WidgetSuperType_WithLabel};this.getWidgetTypeName=function(){return p.WidgetType_F7};this.getSourceDataType=function(){return Ic.DT_STRING};this.getAffectedParamType=function(){return p.AffectedType_BindField};this.isLightWeight=function(){return!1};this.protectedToJsonObject=function(g){v.discreteItemFilterToJsonObject(g);v.filterSimilaryToJsonObject(g);v.inputCtrlWithLabelToJsonObject(g)};this.protectedFromJsonObject=function(g){v.discreteItemFromJsonObject(g);
v.filterSimilaryFromJsonObject(g);v.inputCtrlWithLabelFromJsonObject(g)}};ib.AbstractCalendar=db;ib.WidgetCalendar=function(){db.call(this);this.getWidgetTypeName=function(){return p.WidgetType_Calendar};this.protectedCreateRelativeModel=function(){return new nc}};ib.WidgetCalendarYear=function(){db.call(this);this.getWidgetTypeName=function(){return p.WidgetType_CalendarYear};this.protectedCreateRelativeModel=function(){return new db.SimpleRelative}};ib.WidgetCalendarQuarter=function(){db.call(this);
this.getWidgetTypeName=function(){return p.WidgetType_CalendarQuarter};this.protectedCreateRelativeModel=function(){return new db.SimpleRelative}};ib.WidgetCalendarMonth=function(){db.call(this);this.getWidgetTypeName=function(){return p.WidgetType_CalendarMonth};this.protectedCreateRelativeModel=function(){return new db.SimpleRelative}};ib.WidgetCalendarDay=function(){db.call(this);this.getWidgetTypeName=function(){return p.WidgetType_CalendarDay};this.protectedCreateRelativeModel=function(){return new db.SimpleRelative}};
ib.WidgetPanel=t;ib.WidgetTabbedContainer=V;ib.WidgetOneTabbed=la;ib.AbstractFilterSource=fa;ib.FilterSourceFromVisualWidget=ta;ib.ValueTextItem=Oa;ib.DateSelected=function(v,g,r){var y,R,T;this.getJsonDateRange=function(){var Y={};Y.containNull=r;Y.dateFrom=v;Y.dateTo=g;var ia={};ia.dateRange=Y;return ia};this.setParamValue=function(Y,ia,pa){y=Y;R=ia;T=pa};this.getParamSingleValue=function(){return y};this.getParamScopeStart=function(){return R};this.getParamScopeEnd=function(){return T}};ib.AbstractDefaultSelected=
Qb;ib.AffectedTargets=pc;ib.PredefinedTextFragments=Na;ib.AbstractDurationMode=eb;ib.CosmeticModel=Pb;ib.PreviewCardModel=function(){Wb.call(this);Jb.call(this);var v=this,g=this.protectedMethod,r,y;this.copyFromWidget=function(R){R=R.toJsonObject();v.fromJsonObject(R)};this.hookUsableCardBorderGetter=function(R){r=R};this.hookUsableCardTopBarCommonGetter=function(R){y=R};this.getUsableCardBorder=function(){return r()};this.getUsableCardTopBarCommon=function(){return y()};this.isBareSurface=function(){return!1};
this.protectedFromJsonObject=function(R){g.cardSimilaryFromJsonObject(R)}};ib.AbstractCardBorder=ca;ib.CardTopBarCommon=lb;var bc,nc,Xb,Mc,Kc,Ic,Rc,Zc;(function(){var v=com.kingdee.bos.qing.common;bc=v.EventListenerList;nc=v.RelativePeriodModel;v=com.kingdee.bos.qing.framework.common;Xb=v.MultilanguageManager.createPackageAccessor(ib);v=com.kingdee.bos.qing.common.rich;Mc=v.Chapter;v=com.kingdee.bos.qing.ui.component;Kc=v.MessageDialog;v=com.kingdee.bos.qing.core.model;Ic=v.MetaField;v=com.kingdee.bos.qing.dsb;
Rc=v.IntegrationRegister;v=com.kingdee.bos.qing.dsb.look;Zc=v.CardLook})();var $c=new function(){var v,g,r;this.registerAll=function(R){v=R};this.registerUnknown=function(R){r=R};var y=function(){var R=v;v=[];g={};for(var T=0;T<R.length;T++){var Y=new R[T];if(Y.isSupported()){var ia=Y.getTypeName();g[ia]=Y;ia!=p.WidgetType_Page&&v.push(Y)}}};this.getInstance=function(R){!g&&y();var T=g[R];T||(R!=p.WidgetType_Unknown&&window.console&&window.console.error("Unknown chart type: "+R),T=r);return T};this.getToolboxInstances=
function(){!g&&y();return v.slice(0)}};ib.WidgetTypeManager=$c;p.KEY_ADD_CHILD="addChild";p.KEY_REMOVE_CHILD="removeChild";p.KEY_MOVE_CHILD="moveChild";p.KEY_DISPLAY_NAME="displayName";p.KEY_RECT="rectangle";p.KEY_VISIBLE="visible";p.KEY_FULLSCREEN="fullscreen";p.KEY_FULLSCREEN_BY_ANCESTOR="fullscreenByAncestor";p.KEY_PAGE_SIZE="pageSize";p.KEY_PAGE_EXHIBITION_MODE="pageExhibitionMode";p.KEY_PAGE_SKIN="pageSkin";p.KEY_PAGE_UNIFIED_CARD="pageUnifiedCard";p.KEY_PAGE_WATERMARK="pageWatermark";p.KEY_PAGE_BACKGROUND=
"pageBackground";p.KEY_PAGE_MOBILE_LAYOUT_CONVERTER="pageMobileLayoutConverter";p.KEY_PAGE_MOBILE_SKIN_ACTIVE="pageMobileSkinActive";p.KEY_REF="reference";p.KEY_REFRESH_TIMING="refreshTiming";p.KEY_CARD_TITLE="cardTitle";p.KEY_CARD_SURFACE="cardSurface";p.KEY_FILTER_SOURCE="filterSource";p.KEY_FILTER_DEFAULT_SELECTED="filterDefaultSelected";p.KEY_AFFECTED_TARGETS="affectedTargets";p.KEY_FILTER_FRONT_LABEL="frontLabel";p.KEY_FILTER_FRONT_LABEL_POSITION="frontLabelPosition";p.KEY_FILTER_FRONT_LABEL_LENGTH=
"frontLabelLength";p.KEY_FONT_SIZE_ENHANCED="fontSizeEnhanced";p.KEY_DISCRETE_INCLUDED_ITEMALL="includedItemAll";p.KEY_DISCRETE_MULTISELECTABLE="multiSelectable";p.KEY_STYLE="commonStyle";p.ExhibitionMode_Full="Full";p.ExhibitionMode_Fit="Fit";p.ExhibitionMode_HFull="HFull";p.ExhibitionMode_Idle="Idle";p.Skin_Custom="custom";p.Skin_White="white";p.Skin_DarkBlue="darkBlue";p.Skin_Gold="gold";p.Skin_Cyan="cyan";p.MobileLayoutConverter_ByPosition="ByPosition";p.MobileLayoutConverter_InOrder="InOrder";
p.RunningMode_Normal="NORMAL";p.RunningMode_Auto="AUTO";p.RunningMode_Lazy="LAZY";p.WidgetType_Unknown="Unknown";p.WidgetType_Page="Page";p.WidgetType_PageTitleBar="PageTitleBar";p.WidgetType_Square="Square";p.WidgetType_Longer="LongPainting";p.WidgetType_QingReport="QingReport";p.WidgetType_ExtReport="ExtReport";p.WidgetType_ProgramableCard="ProgramableCard";p.WidgetType_CosmicCustomCard="CosmicCustomCard";p.WidgetType_CloudhubSubscribes="CloudhubSubscribes";p.WidgetType_Label="Label";p.WidgetType_Rich=
"Rich";p.WidgetType_Picture="Picture";p.WidgetType_Iframe="Iframe";p.WidgetType_Clock="Clock";p.WidgetType_Combobox="Combobox";p.WidgetType_ButtonGroup="ButtonGroup";p.WidgetType_F7="F7";p.WidgetType_Calendar="Calendar";p.WidgetType_CalendarYear="CalendarYear";p.WidgetType_CalendarQuarter="CalendarQuarter";p.WidgetType_CalendarMonth="CalendarMonth";p.WidgetType_CalendarDay="CalendarDay";p.WidgetType_Panel="Panel";p.WidgetType_TabbedContainer="TabbedContainer";p.WidgetType_OneTabbed="OneTabbed";p.WidgetSuperType_CardSurfaceAbout=
1;p.WidgetSuperType_CardSimilary=2|p.WidgetSuperType_CardSurfaceAbout;p.WidgetSuperType_FilterSimilary=4;p.WidgetSuperType_AffectedTarget=8;p.WidgetSuperType_BuiltinVisual=16;p.WidgetSuperType_CompositeContainer=32;p.WidgetSuperType_WithLabel=64;p.WidgetSuperType_OutputParamProvider=128;p.WidgetSuperType_FullscreenSupported=256;p.WidgetSuperType_WithCommonStyle=512;p.WidgetSuperType_ContainerWithBackground=1024;p.WidgetSuperType_Referable=2048;p.WidgetSuperType_DiscreteItemFilter=4096;p.WidgetSuperType_Text=
8192;p.WidgetSuperType_Calendar=16384;p.AffectedType_BindField=1;p.AffectedType_Param=2;p.AffectedType_Tab=4;p.AffectedType_Hotlink=8;lb.TitlePosition_Auto="Auto";lb.TitlePosition_MidOfIcon="MidOfIcon";lb.TitlePosition_Offset="Offset";Jb.Surface_Unified=0;Jb.Surface_Bare=1;Jb.Surface_Custom=2;Eb.KEY_FROZEN="frozen";Eb.KEY_SURFACE="surface";Kb.KEY_TITLE="title";Kb.KEY_MODEL="encodedModel";rb.KEY_MODEL="encodedModel";cc.parseRef=function(v){for(var g=[],r=[],y=0;y<v.length;){var R=v.indexOf("${",y);
y=v.indexOf("}$",y);if(-1==y)y=v.length;else if(-1==R||y<R){if(0<r.length){R=r.pop();var T=y,Y=v.substring(R[0]+2,T),ia=Y.indexOf(",");if(0<ia){var pa=Y.substring(0,ia);Y=Y.substring(ia+1)}else pa=Y,Y="";R[1]=T+2;R[2]=$.trim(pa);R[3]=Y;g.push(R)}y+=2}else r.push([R,null,null]),y=R+2}return g};Ab.KEY_CONTENT="labelContent";Ab.KEY_WALKING="labelWalking";Va.KEY_CONTENT="richContent";ba.createPeer=function(){var v=new ba;v.setScale(null);v.setAlign(0);return v};ba.KEY_SCALE="pictureScale";ba.KEY_ALIGN=
"pictureAlign";ba.SCALE_NON="original";ba.SCALE_ADAPTIVE="adaptive";ba.SCALE_FULL="full";ba.SCALE_TILED="tiled";ba.HALIGN_LEFT=1;ba.HALIGN_CENTER=2;ba.HALIGN_RIGHT=4;ba.VALIGN_TOP=16;ba.VALIGN_MIDDLE=32;ba.VALIGN_BOTTOM=64;bb.KEY_URL="iframeUrl";jb.KEY_FORMAT="formatString";Aa.askButtonHeight=function(v){return v>=Aa.SIZE_MODE_LARGE?40:v>=Aa.SIZE_MODE_MIDDLE?32:25};Aa.KEY_LAYOUT_MODE="layoutMode";Aa.KEY_CHARS_PER_ITEM="charsPerItem";Aa.KEY_ITEMS_PER_ROW="itemsPerRow";Aa.KEY_SIZE_MODE="sizeMode";Aa.LAYOUT_MODE_HORIZONTAL=
"H";Aa.LAYOUT_MODE_WRAP="W";Aa.SIZE_MODE_SMALL=1;Aa.SIZE_MODE_MIDDLE=3;Aa.SIZE_MODE_LARGE=5;db.KEY_DATE_INITIAL="dateInitialValue";db.SimpleRelative=function(){var v=0;this.getOffset=function(){return v};this.setOffset=function(g){v=g};this.toJsonObject=function(){var g={};v&&(g.offset=v);return g};this.fromJsonObject=function(g){v=(g=g.offset)?g:0}};t.KEY_FULLSCREEN_ALLOWED="fullScreenAllowed";t.FULLSCREEN_ALLOWED_NONE=0;t.FULLSCREEN_ALLOWED_ALONE=1;t.FULLSCREEN_ALLOWED_ALIVE=2;V.KEY_TABBED_SELECTED=
"tabbedSelected";V.KEY_HEAD_POSITION="tabbedHeadPosition";V.KEY_HEAD_PATTERN="tabbedHeadPattern";V.KEY_SWITCH_SUB="switchToSubTabbed";V.KEY_SLIDESHOW="slideshow";V.HEAD_TOP_LEFT="TL";V.HEAD_TOP_RIGHT="TR";V.HEAD_BOTTOM_LEFT="BL";V.HEAD_BOTTOM_RIGHT="BR";V.HEAD_PATTERN_HIDDEN="hidden";V.HEAD_PATTERN_BAR="bar";V.HEAD_PATTERN_BARE="bare";la.KEY_HEAD_TEXT="oneTabbedHeadText";la.KEY_DURATION_MODE="durationMode";ca.createInstance=function(v){switch(v){case ca.TYPE_SIMPLE:return new na;case ca.TYPE_MODEL:return new k;
case ca.TYPE_IMAGE:return new Wa;default:throw Error("Modify here");}};ca.TYPE_SIMPLE="Simple";ca.TYPE_MODEL="Model";ca.TYPE_IMAGE="Image";fa.createInstance=function(v){switch(v){case fa.TYPE_VisualWidget:return new ta;case fa.TYPE_CustomList:return new Ra;default:throw Error("Modify here");}};fa.TYPE_VisualWidget="VisualWidget";fa.TYPE_CustomList="CustomList";fa.createItemAll=function(){var v=new Oa;v.setValue(fa.ITEM_ALL);v.setText(Xb.get("itemAll","\uff08\u5168\u90e8\uff09"));return v};fa.ITEM_ALL=
"com.kingdee.bos.qing.ALL";Qb.createInstance=function(v){switch(v){case Qb.TYPE_ByIndex:return new Ka;case Qb.TYPE_ByAppointed:return new $b;default:throw Error("Modify here");}};Qb.TYPE_ByIndex="ByIndex";Qb.TYPE_ByVariant="ByVariant";Qb.TYPE_ByAppointed="ByAppointed";pc.createItem=function(v){for(var g=[Gc,Qc,Pa,fb],r=0;r<g.length;r++){var y=new g[r];if(y.getType()==v)return y}throw Error("Unknown AffectedTargetItem.type: "+v);};pc.encodeDoubleParamName=function(v,g){return v+","+g};pc.isDoubleParamName=
function(v){return 0<=v.indexOf(",")};pc.decodeDoubleParamName=function(v){return v.split(",")};Na.Fragment=function(){var v=this,g,r,y;this.setName=function(R){g=R};this.getName=function(){return g};this.setDisplay=function(R){r=R};this.getDisplay=function(){return r};this.setAffectedTargets=function(R){y=R};this.getAffectedTargets=function(){return y};this.copy=function(){var R={};v.toJsonObject(R);var T=new Na.Fragment;T.fromJsonObject(R);return T};this.toJsonObject=function(R){R.name=g;R.display=
r;if(y){var T={};y.toJsonObject(T);R.affectedTargets=T}};this.fromJsonObject=function(R){g=R.name;r=R.display;if(R=R.affectedTargets)y=new pc,y.fromJsonObject(R)}};eb.createInstance=function(v){switch(v){case eb.TYPE_ByFixedTime:return new Lb;case eb.TYPE_ByData:return new ob;default:throw Error("Modify here");}};eb.TYPE_ByFixedTime="ByFixedTime";eb.TYPE_ByData="ByData";Pb.createEditableItem=function(v,g){return new E(v,g)}})();(function(){function p(){var Ub;this.setCaption=function(lb){Ub=lb};this.getCaption=function(){return Ub};this.perform=function(){throw Error("Override me.");};this.unperform=function(){throw Error("Override me.");}}function Wb(){var Ub,lb=[],Jb;this.setCaption=function(Rb){Ub=Rb};this.getCaption=function(){return Ub};this.appendUnitAction=function(Rb){lb.push(Rb)};this.perform=function(){Jb&&Jb(!0);for(var Rb=0,Ta=lb.length-1;Rb<=Ta;Rb++)lb[Rb].perform();Jb&&Jb(!1)};this.unperform=function(){Jb&&
Jb(!0);for(var Rb=lb.length-1;0<=Rb;Rb--)lb[Rb].unperform();Jb&&Jb(!1)};this.setAnnouncer=function(Rb){Jb=Rb}}function kb(){p.call(this);var Ub,lb,Jb;this.setValue=function(Rb,Ta){Ub=Rb;lb=Ta};this.perform=function(){Jb=Ub.removeWidget(lb)};this.unperform=function(){Ub.addWidget(lb,Jb)}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==
typeof com.kingdee.bos.qing.dsb&&(com.kingdee.bos.qing.dsb={});"undefined"==typeof com.kingdee.bos.qing.dsb.controller&&(com.kingdee.bos.qing.dsb.controller={});var Mb=com.kingdee.bos.qing.dsb.controller;Mb.CommandManager=function(){var Ub=32,lb=[],Jb=[],Rb=null,Ta=!1,Ga=new oc,Cb=new oc;this.setActionCapacity=function(Hb){Ub=Hb};this.addPerformedListener=function(Hb){Cb.addListener(Hb)};this.perform=function(Hb){Rb?Rb.appendUnitAction(Hb):(Hb.perform(),Xa(lb,Hb),Jb.length=0,jc(Hb,!0))};this.compositeStart=
function(Hb){if(null!=Rb)throw Error("Can not start composite command twice.");Rb=new Wb;Rb.setAnnouncer(Bb);Rb.setCaption(Hb)};this.compositeEnd=function(){Rb.perform();var Hb=Rb;Xa(lb,Hb);Jb.length=0;jc(Hb,!0);Rb=null};this.compositeAbort=function(){Rb=null};this.isCompositeStarted=function(){return null!=Rb};this.createCompositeAction=function(){var Hb=new Wb;Hb.setAnnouncer(Bb);return Hb};this.untilWakeup=function(Hb){Ta?Ga.addListener(Hb):Hb()};this.isCanUndo=function(){return 0<lb.length};this.isCanRedo=
function(){return 0<Jb.length};this.undo=function(){var Hb=lb.pop();Hb&&(Hb.unperform(),Xa(Jb,Hb),jc(Hb,!1,!0))};this.redo=function(){var Hb=Jb.pop();Hb&&(Hb.perform(),Xa(lb,Hb),jc(Hb,!1,!1))};this.reset=function(){lb.length=0;Jb.length=0;jc(null)};var Xa=function(Hb,Da){Hb.push(Da);Hb.length>Ub&&Hb.splice(0,1)},jc=function(Hb,Da,Eb){Cb.fireEvent(function(Ca){Ca(Hb,Da,Eb)})},dc=function(){Ta=!1;Ga.fireEvent(function(Hb){Hb()});Ga.removeAllListener()},Bb=function(Hb){Hb?Ta=!0:dc()}};Mb.AbstractAction=
p;Mb.ActionChangeProperty=function(){p.call(this);var Ub=this,lb,Jb,Rb;this.setMethod=function(Ta,Ga){lb=Ta;Jb=Ga};this.setValue=function(Ta){Rb=Ta};this.perform=function(){var Ta=lb();Jb(Rb);Rb=Ta};this.unperform=function(){Ub.perform()}};Mb.ActionAddWidget=function(){p.call(this);var Ub,lb;this.setValue=function(Jb,Rb){Ub=Jb;lb=Rb};this.perform=function(){var Jb=lb.isEldestSon()?0:null;Ub.addWidget(lb,Jb)};this.unperform=function(){Ub.removeWidget(lb)}};Mb.ActionRemoveWidget=kb;Mb.ActionMoveWidget=
function(){p.call(this);var Ub,lb,Jb,Rb;this.setValue=function(Ta,Ga){Ub=Ta.getParent();lb=Ta;Ta=Ub.getWidget(0).isEldestSon()?1:0;for(var Cb=Ub.getWidgetCount(),Xa=0;Xa<Cb;Xa++)if(Ub.getWidget(Xa)==lb){Jb=Xa;break}Rb=Jb+Ga;Rb=Math.min(Cb-1,Math.max(Ta,Rb))};this.perform=function(){Ub.moveWidgetTo(lb,Rb)};this.unperform=function(){Ub.moveWidgetTo(lb,Jb)}};Mb.ActionCutWidget=function(){p.call(this);var Ub,lb,Jb;this.setValue=function(Rb,Ta){Jb=Ta;Ub=new kb;Ub.setValue(Rb,Ta)};this.setClipboard=function(Rb){lb=
Rb};this.perform=function(){Ub.perform();lb.putByCut(Jb)};this.unperform=function(){lb.pickToPasteByCut();Ub.unperform()}};Mb.ActionPasteAfterCutWidget=function(){p.call(this);var Ub,lb,Jb,Rb;this.setValue=function(Ta){lb=Ta};this.setClipboard=function(Ta){Ub=Ta};this.perform=function(){Jb=Ub.pickToPasteByCut();var Ta=Jb.getX(),Ga=Jb.getY(),Cb=Jb.getWidth(),Xa=Jb.getHeight();Ta+Cb>lb.getClientWidth()||Ga+Xa>lb.getClientHeight()?(Jb.setPosition(0,0),Rb=[Ta,Ga]):Rb=null;Ta=Jb.isEldestSon()?0:null;lb.addWidget(Jb,
Ta)};this.unperform=function(){lb.removeWidget(Jb);Ub.putByCut(Jb);Rb&&(Jb.setPosition(Rb[0],Rb[1]),Rb=null)}};Mb.ActionChangeWidgetRect=function(){p.call(this);var Ub=this,lb,Jb;this.setValue=function(Rb,Ta,Ga,Cb,Xa){lb=Rb;Jb=[Ta,Ga,Cb,Xa]};this.perform=function(){var Rb=[lb.getX(),lb.getY(),lb.getWidth(),lb.getHeight()];lb.setRectangle(Jb[0],Jb[1],Jb[2],Jb[3]);Jb=Rb};this.unperform=function(){Ub.perform()}};Mb.ActionChangePageRect=function(){p.call(this);var Ub=this,lb,Jb,Rb;this.setValue=function(Ta,
Ga,Cb){lb=Ta;Jb=Ga;Rb=Cb};this.perform=function(){var Ta=lb.getWidth(),Ga=lb.getHeight();lb.setRectangle(0,0,Jb,Rb);Jb=Ta;Rb=Ga};this.unperform=function(){Ub.perform()}};Mb.ActionModifyStyle=function(){p.call(this);var Ub,lb,Jb,Rb,Ta;this.setContext=function(Ga,Cb,Xa,jc){Ub=Ga;lb=Cb;Jb=Xa;Rb=jc};this.perform=function(){Ta=Ub();var Ga=Ta.copy();Ga[Jb](Rb);lb(Ga)};this.unperform=function(){lb(Ta)}};Mb.ActionChangeDateRange=function(){p.call(this);var Ub=this,lb,Jb;this.setValue=function(Rb,Ta,Ga,Cb,
Xa){lb=Rb;Jb=[Ta,Ga,Cb,Xa]};this.perform=function(){var Rb=[lb.getFromDate(),lb.getToDate(),lb.getRelativeModel(),lb.isContainNull()];lb.setInitialValue(Jb[0],Jb[1],Jb[2],Jb[3]);Jb=Rb};this.unperform=function(){Ub.perform()}};var oc=com.kingdee.bos.qing.common.EventListenerList})();(function(){function p(){fa.call(this);var M=this.protectedMethod,H=new ta,L=new Ra;(function(){M.setContentPaneCreator(function(){t.layoutCtrlWithLRTB(H.getJqUi(),0,0,null,0,null,23);t.layoutCtrlWithLRTB(L.getJqUi(),0,0,null,23,0,null);var I=$("<div>");I.append(H.getJqUi());I.append(L.getJqUi());return I})})();this.setTitle=function(I,J){M.setTitle(I);H.setText(J)};var A=this.showDialog;this.showDialog=function(I,J){M.setClosingAction(function(f){J(f,$.trim(L.getText()))});A();L.setText(I?I:"");
L.requestFocus()}}function Wb(){fa.call(this);var M=this,H=this.protectedMethod,L,A,I,J,f=!1;this.show=function(h,u,U){L=u;A=h;var da={},ya={};L.traversalDescendents(function(oa){kb.isWidgetNameInvalid(oa.getDisplayName())||(da[oa.getName()]=oa.getDisplayName(),ya[oa.getDisplayName()]=oa.getName())});e(da);H.getDialogCtrl().createToolbarButton(k.get("textRefMenuVar","\u63d2\u5165\u53d8\u91cf"),w);H.getDialogCtrl().createToolbarButton(k.get("textRefMenuLink","\u63d2\u5165\u94fe\u63a5"),mb);H.setClosingAction(function(oa){var za=
f?d(ya):null,wa=oa?M.protectedAcceptEditedContent(ya):null;U(f,za,oa,wa)});M.protectedBeforeShow(A,da);M.showDialog();H.getDialogCtrl().setToolbarVisible(!0);H.getDialogCtrl().setSelectable(!0);M.protectedCtrlOnFocus()};this.protectedBeforeShow=function(h,u){throw Error("Implement");};this.protectedAcceptEditedContent=function(h){throw Error("Implement");};this.protectedCtrlOnFocus=function(){throw Error("Implement");};this.protectedGetTextAndCursor=function(){throw Error("Implement");};this.protectedDoInsertRefTag=
function(h,u){throw Error("Implement");};var aa=function(h,u,U){h=qb.parseRef(h);for(var da=h.length-1;0<=da;da--){var ya=h[da],oa=ya[0],za=ya[1],wa=ya[2],Ib=wa.indexOf("#");0<Ib&&(ya=wa.substring(0,Ib),wa=wa.substring(Ib+1),(ya=u[ya])&&U(oa,za,"${"+ya+"#"+wa+"}$"))}},e=function(h){var u=A.getPredefinedTextFragments();I=[];J=[];if(u)for(var U=0;U<u.getFragmentCount();U++){var da=u.getFragment(U).copy(),ya=da.getDisplay();aa(ya,h,function(za,wa,Ib){ya=ya.substring(0,za)+Ib+ya.substring(wa)});da.setDisplay(ya);
var oa=da.getAffectedTargets().getItem(0).getType();q(oa).push(da)}},d=function(h){var u=I.concat(J);if(0==u.length)return null;for(var U=0;U<u.length;U++){var da=u[U],ya=da.getDisplay();aa(ya,h,function(oa,za,wa){ya=ya.substring(0,oa)+wa+ya.substring(za)});da.setDisplay(ya)}h=new Ha;h.setFragments(u);return h},q=function(h){return h==ea.AffectedType_Tab?I:h==ea.AffectedType_Hotlink?J:null},z=function(h,u){var U=$(h.currentTarget);h=U.parent();var da=h.prop("clientHeight");U=U.prop("offsetLeft");
var ya=new yc;ya.setModel(u);ya.show(h,U,da,null,!0)},w=function(h){var u=yc.createSubMenu(k.get("textRefMenuInsertX","\u5728\u5149\u6807\u4f4d\u7f6e\u63d2\u5165#1").replace("#1",k.get("textRefOfParam","\u8054\u52a8\u53c2\u6570")));B(u);var U=yc.createActionMenuItem(k.get("textRefOfOutputParam","\u53ef\u89c6\u5316\u5185\u5bb9\u7684\u8f93\u51fa\u53c2\u6570")+"...",Ea),da=new Gc;da.addItemModel(u);da.addItemModel(U);z(h,da)},B=function(h){for(var u=W(),U=0;U<u.length;U++)h.addItemModel(ja("","#",u[U]));
0==u.length&&(u=yc.createActionMenuItem(k.get("textRefParamNameNotFound","\u5176\u5b83\u7ec4\u4ef6\u672a\u8bbe\u7f6e\u4f5c\u7528\u4e8e\u5f53\u524d\u7ec4\u4ef6\u7684\u53c2\u6570"),function(da){}),u.setEnabled(!1),h.addItemModel(u),h.addSeperator(),u=ja("","#","param",!0),u.setText(k.get("textRefParamNameDemo","\u793a\u4f8b")+": "+u.getText()),h.addItemModel(u))},W=function(){var h=[];L.traversalDescendents(function(u){u!=A&&u.isInstanceOf(ea.WidgetSuperType_FilterSimilary)&&(u=u.getAffectedTargets())&&
(u=u.getTarget(A.getName()))&&u.isSettingComplete()&&u.getType()==ea.AffectedType_Param&&h.push(u.getParamName())});return h},ja=function(h,u,U,da){var ya="${"+u+U+"}$";h=h?h.replace("#1",ya):ya;var oa=da?U.length:0;return yc.createActionMenuItem(h,function(za){M.protectedDoInsertRefTag(ya,oa);M.protectedCtrlOnFocus()})},Ea=function(h){h=Ua();(new kb).show(L,A,h,function(u,U){M.protectedDoInsertRefTag("${"+u+"#"+U+"}$",0)},function(){M.protectedCtrlOnFocus()})},Ua=function(){var h=M.protectedGetTextAndCursor(),
u=h[0],U=h[1];h=h[2];U=u.substring(0,U+2).lastIndexOf("${",U);h=u.indexOf("}$",h-2);return 0<=U&&0<=h&&(u=u.substring(U+2,h).split("#"),2==u.length)?u:null},mb=function(h){var u=new Gc;u.addItemModel(Gb(ea.AffectedType_Tab));u.addItemModel(Gb(ea.AffectedType_Hotlink));z(h,u)},Gb=function(h){var u=yc.createSubMenu(Wb.getAffectedTypeDisplay(h)),U=yc.createActionMenuItem(k.get("textRefMenuLinkAdd","\u6dfb\u52a0\u65b0\u7684\u5b9a\u4e49")+"...",tb);U.setUserObject(h);u.addItemModel(U);U=q(h);if(0<U.length){u.addSeperator();
for(var da=0;da<U.length;da++){var ya=U[da];u.addItemModel(ja(k.get("textRefMenuInsertX","\u5728\u5149\u6807\u4f4d\u7f6e\u63d2\u5165#1"),"",ya.getName()))}U=yc.createActionMenuItem(k.get("textRefMenuLinkEdit","\u7ef4\u62a4\u5df2\u521b\u5efa\u7684\u5b9a\u4e49")+"...",va);U.setUserObject(h);u.addItemModel(U)}return u},zb=function(h){return k.get("predefinedFragmentDialogTitle","#1\u7684\u5b9a\u4e49").replace("#1",Wb.getAffectedTypeDisplay(h))},tb=function(h){var u=M.protectedGetTextAndCursor();u=u[0].substring(u[1],
u[2]);var U=new Ha.Fragment;U.setName(sa("link"));U.setDisplay(u);var da=h.getUserObject();(new Mb).show(zb(da),da,U,L,function(ya,oa,za){oa=l(da,ya,oa,za);!oa&&(oa=D(da,ya,null,q(da)));return oa},function(ya){ya&&(f=!0,q(da).push(U),ya="${"+U.getName()+"}$",M.protectedDoInsertRefTag(ya,0));M.protectedCtrlOnFocus()})},va=function(h){var u=h.getUserObject(),U=q(u);(new oc).show(zb(u),u,U,L,function(da){for(var ya=da.length-1;0<=ya;ya--){var oa=da[ya],za=D(u,oa.getName(),oa,da);if(za)return[oa,za]}for(ya=
0;ya<da.length;ya++)if(oa=da[ya],za=l(u,oa.getName(),oa.getDisplay(),oa.getAffectedTargets()))return[oa,za];return null},function(da){f=!0;for(var ya=U.length=0;ya<da.length;ya++)U.push(da[ya])})},sa=function(h){var u=I.concat(J),U=0;do var da=h+ ++U;while(G(da,u,null));return da},G=function(h,u,U){for(var da=0;da<u.length;da++){var ya=u[da];if(ya!=U&&ya.getName()==h)return ya}return null},D=function(h,u,U,da){da=(h==ea.AffectedType_Tab?J:h==ea.AffectedType_Hotlink?I:null).concat(da);return(u=G(u,
da,U))?(u=u.getAffectedTargets().getItem(0).getType(),h=u==h?"":Wb.getAffectedTypeDisplay(u),k.get("predefinedFragmentCheck1","\u5df2\u5b58\u5728\u76f8\u540c\u540d\u79f0\u7684#1\u5b9a\u4e49\u3002").replace("#1",h)):null},l=function(h,u,U,da){if(!u)return k.get("predefinedFragmentCheck2","\u5fc5\u987b\u5b9a\u4e49\u540d\u79f0\uff0c\u4ee5\u4f9b\u6587\u5b57\u5185\u5bb9\u5f15\u7528\u3002");if(20<u.length)return k.get("predefinedFragmentCheck3","\u540d\u79f0\u4e0d\u80fd\u8d85\u8fc7#1\u4e2a\u5b57\u7b26\u3002").replace("#1",
20);if(!db.checkVariableNaming(u))return k.get("predefinedFragmentCheck4","\u540d\u79f0\u5fc5\u987b\u4ee5\u5b57\u6bcd\u5f00\u5934\uff0c\u53ea\u80fd\u5305\u542b\u5b57\u6bcd\u3001\u6570\u5b57\u3001\u4e0b\u5212\u7ebf\u3002");if(!U)return k.get("predefinedFragmentCheck5","\u5fc5\u987b\u6709\u663e\u793a\u6587\u5b57\u3002");if(!da||0==da.getItemCount())return k.get("predefinedFragmentCheck6","#1\u76ee\u6807\u672a\u5b9a\u4e49\u3002").replace("#1",Wb.getAffectedTypeDisplay(h));for(u=0;u<da.getItemCount();u++)if(!da.getItem(u).isSettingComplete())return k.get("predefinedFragmentCheck7",
"#1\u76ee\u6807\u5b9a\u4e49\u4e0d\u5b8c\u6574\u3002").replace("#1",Wb.getAffectedTypeDisplay(h));return(h=da.checkDuplicated())?(u=(da=L.searchWidgetByName(h))?da.getDisplayName():h,k.get("affectedTargetDuplicated","\u91cd\u590d\u7684\u76ee\u6807\u7ec4\u4ef6\uff1a#1\u3002").replace("#1",u)):null};H.replaceOutputParamDisplayName=aa;H.popupMenu=z}function kb(){fa.call(this);var M=this,H=this.protectedMethod,L;this.show=function(aa,e,d,q,z){H.setTitle(k.get("textRefOfOutputParam","\u53ef\u89c6\u5316\u5185\u5bb9\u7684\u8f93\u51fa\u53c2\u6570"));
M.setSize(400,480);H.setContentPaneCreator(function(){var w=e,B=new Pa.BranchNode;B.setExpanded(!0);for(var W=f(aa,w),ja=0;ja<W.length;ja++){var Ea=W[ja];w=Ea[0];var Ua=Ea[1];Ea=new Pa.BranchNode(w);Ea.setSelectable(!1);B.addChild(Ea);if(kb.isWidgetNameInvalid(w.getDisplayName()))Ua=kb.INVALID_CHAR_INSIDE_WIDGET_NAME.join("  "),Ua=new Pa.LeafNode(k.get("outputParamInvalidChar","\u7ec4\u4ef6\u540d\u79f0\u5305\u542b\u975e\u6cd5\u5b57\u7b26")+"  "+Ua),Ua.setSelectable(!1),Ea.addChild(Ua);else for(w=
0;w<Ua.length;w++){var mb=new Pa.LeafNode(Ua[w]);Ea.addChild(mb)}}0==W.length&&(Ua=new Pa.LeafNode(k.get("outputParamNotFound","\u672a\u53d1\u73b0\u5176\u5b83\u7ec4\u4ef6\u7684\u8f93\u51fa\u53c2\u6570")),Ua.setSelectable(!1),B.addChild(Ua));W=J(B,d);return A(B,W)});H.setClosingChecker(function(){return L?!0:(H.getMessageCurtain().showPrompt(k.get("outputParamSelectingRequired","\u672a\u9009\u62e9\u53c2\u6570\u3002")),!1)});H.setClosingAction(function(w){w&&q(L[0],L[1]);z()});M.showDialog()};var A=
function(aa,e){var d=$("<div>");d.css({border:"1px solid #ddd","box-sizing":"border-box",padding:"6px",color:"#808080"});var q=new Pa;q.setRoot(aa);q.setRootVisible(!1);q.setNodePainter(function(z,w){w.isLeafNode()?(w=w.getUserObject(),"string"==typeof w?z.css("white-space","pre-wrap"):w=w.getName(),z.text(w)):(w=w.getUserObject(),z.text(w.getDisplayName()))});q.addSelectedListener(function(z){z=z.getSelecteds();I(0<z.length?z[0]:null,d)});q.getJqUi().css({border:"1px solid #ddd"});e&&(q.expandToNode(e),
q.setSelecteds([e]),q.scrollSelectedToVisible(),I(e,d));aa=$("<div>");aa.append(q.getJqUi());aa.append(d);t.layoutCtrlWithLRTB(q.getJqUi(),0,0,null,0,60,null);t.layoutCtrlWithLRTB(d,0,0,null,null,0,50);return aa},I=function(aa,e){if(aa){var d=aa.getParent().getUserObject();aa=aa.getUserObject();var q=aa.getDescription();e.text(q?q:k.get("outputParamNoDescription","\u8be5\u8f93\u51fa\u53c2\u6570\u65e0\u63cf\u8ff0\u3002"));L=[d.getDisplayName(),aa.getName()]}else e.text(""),L=null},J=function(aa,e){var d=
null;if(e){var q=e[0],z=e[1];aa.visiting(function(w){if(w.isLeafNode()){var B=!1,W=w.getParent().getUserObject(),ja=w.getUserObject();W&&W.getDisplayName()==q&&"string"!=typeof ja&&ja.getName()==z&&(B=!0,d=w);return B}})}return d},f=function(aa,e){var d=[];aa.traversalDescendents(function(q){if(q!=e&&q.isInstanceOf(ea.WidgetSuperType_OutputParamProvider)){var z=q.getOutputParamsInfo();z&&0<z.length&&d.push([q,z])}});return d}}function Mb(){fa.call(this);var M=this,H=this.protectedMethod;this.show=
function(L,A,I,J,f,aa){var e;H.setTitle(L);M.setSize(640,480);H.setContentPaneCreator(function(){e=new lb;e.setContext(A,J);e.setEditingModel(I);return e.getJqUi()});H.setClosingChecker(function(){var d=f(e.getEditingName(),e.getEditingDisplay(),e.getEditingAffectedTargets());return d?(H.getMessageCurtain().showPrompt(d),!1):!0});H.setClosingAction(function(d){d&&(I.setName(e.getEditingName()),I.setDisplay(e.getEditingDisplay()),I.setAffectedTargets(e.getEditingAffectedTargets()));aa(d)});M.showDialog()}}
function oc(){fa.call(this);var M=this,H=this.protectedMethod;this.show=function(L,A,I,J,f,aa){var e;H.setTitle(L);M.setSize(640,480);H.setContentPaneCreator(function(){e=new Ub;e.setContext(A,J);e.setEditingModel(I);return e.getJqUi()});H.setClosingChecker(function(){e.acceptCurrent();var d=f(e.getEditingModel());if(d){var q=d[1];e.jumpToSelected(d[0]);H.getMessageCurtain().showPrompt(q);return!1}return!0});H.setClosingAction(function(d){d&&aa(e.getEditingModel())});M.showDialog()}}function Ub(){var M,
H,L=$("<div>"),A=new Bc,I=new Qc,J=new lb;this.setContext=function(d,q){J.setContext(d,q)};this.setEditingModel=function(d){M=[];for(var q=0;q<d.length;q++)M.push(d[q].copy());I.setItemModels(M);I.setSelecteds([M[0]]);f()};this.getEditingModel=function(){return M};this.acceptCurrent=function(){var d=I.getSelecteds();1==d.length&&e(d[0]);I.setItemModels(M)};this.getJqUi=function(){if(!H){var d=new ta(k.get("predefinedFragmentEditorCaption","\u5df2\u521b\u5efa\u7684\u5b9a\u4e49"));A.setText(k.get("predefinedFragmentEditorDelete",
"\u5220\u9664"));A.addActionListener(aa);I.setMultiSelectable(!0);I.setContinuousSelectingEnabled(!0);I.setCustomItemPainter(function(q,z){q.css({height:"32px","line-height":"32px"});q.text(z.getName())});I.addSelectedChangedListener(function(q,z,w){1==z.length&&e(z[0]);f();I.setItemModels(M)});L.css("background-color","rgba(255,255,255,0.6)");H=$("<div>");H.append(d.getJqUi());H.append(A.getJqUi());H.append(I.getJqUi());H.append(J.getJqUi());H.append(L);t.layoutCtrlWithLRTB(d.getJqUi(),0,null,100,
0,null,23);t.layoutCtrlWithLRTB(A.getJqUi(),110,null,50,0,null,23);t.layoutCtrlWithLRTB(I.getJqUi(),0,null,160,23,0,null);t.layoutCtrlWithLRTB(J.getJqUi(),180,0,null,0,0,null);t.layoutCtrlWithLRTB(L,180,0,null,0,0,null)}return H};this.jumpToSelected=function(d){I.setSelecteds([d])};var f=function(){var d=I.getSelecteds();1==d.length?(J.setEditingModel(d[0]),L.css("display","none"),A.setEnabled(!0)):(J.setEditingModel(new Ha.Fragment),L.css("display",""),A.setEnabled(0!=d.length))},aa=function(d){d=
I.getSelecteds();for(var q=M.length-1;0<=q;q--)for(var z=0;z<d.length;z++)if(M[q]==d[z]){M.splice(q,1);break}I.setItemModels(M);I.setSelecteds(0<M.length?[M[0]]:[])},e=function(d){d.setName(J.getEditingName());d.setDisplay(J.getEditingDisplay());d.setAffectedTargets(J.getEditingAffectedTargets())}}function lb(){var M,H=new Ka,L=new Ka,A=new ta,I;this.setContext=function(J,f){A.setText(Wb.getAffectedTypeDisplay(J));J==ea.AffectedType_Tab?I=new Xa:J==ea.AffectedType_Hotlink&&(I=new Jb);I.setContext(f);
I.setSettingModel(null)};this.setEditingModel=function(J){H.setText(J.getName());L.setText(J.getDisplay());I.setSettingModel(J.getAffectedTargets())};this.getJqUi=function(){if(!M){var J=new ta(k.get("predefinedFragmentName","\u540d\u79f0")),f=new ta(k.get("predefinedFragmentDisplay","\u663e\u793a\u6587\u5b57")),aa=$("<div>");aa.css("border","1px solid #ddd");M=$("<div>");M.append(J.getJqUi());M.append(H.getJqUi());M.append(f.getJqUi());M.append(L.getJqUi());M.append(aa);M.append(A.getJqUi());M.append(I.getJqUi());
t.layoutCtrlWithLRTB(J.getJqUi(),0,null,100,0,null,23);t.layoutCtrlWithLRTB(H.getJqUi(),100,0,null,0,null,23);t.layoutCtrlWithLRTB(f.getJqUi(),0,null,100,30,null,23);t.layoutCtrlWithLRTB(L.getJqUi(),100,0,null,30,null,23);t.layoutCtrlWithLRTB(A.getJqUi(),0,0,null,60,null,23);t.layoutCtrlWithLRTB(aa,0,0,null,85,0,null);t.layoutCtrlWithLRTB(I.getJqUi(),10,10,null,85,0,null)}return M};this.getEditingName=function(){return $.trim(H.getText())};this.getEditingDisplay=function(){return $.trim(L.getText())};
this.getEditingAffectedTargets=function(){return I.getSettingResult()}}function Jb(){var M,H,L,A=new Wa,I=new Ra;this.setContext=function(J){};this.setSettingModel=function(J){M=[];H=[];if(J){var f=new xa,aa={};J.toJsonObject(aa);f.fromJsonObject(aa);J=0;for(aa=f.getItemCount();J<aa;J++){var e=f.getItem(J);(e.getType()==ea.AffectedType_Hotlink?M:H).push(e)}}0==M.length&&(e=xa.createItem(ea.AffectedType_Hotlink),M.push(e));I.setText(M[0].getUrl());A.setSelected(M[0].getMode()?M[0].getMode():"default")};
this.getJqUi=function(){if(!L){var J=new ta(k.get("hotlinkMode","\u6253\u5f00\u65b9\u5f0f")),f=new ta("URL");A.setItemModels(["default","biz"]);A.setCustomPainter(function(aa,e,d){aa="default"==d?k.get("hotlinkModeA","\u4f18\u5148\u5c1d\u8bd5\u5728\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00\u9875\u7b7e"):"biz"==d?k.get("hotlinkModeB","\u4f18\u5148\u5c1d\u8bd5\u5728\u5e94\u7528\u4e2d\u6253\u5f00\u9875\u7b7e"):d;e.text(aa)});A.addSelectedChangedListener(function(aa,e,d){M[0].setMode("default"==d?null:d)});
I.addEditedListener(function(aa){M[0].setUrl($.trim(aa.getText()))});L=$("<div>");L.append(J.getJqUi());L.append(A.getJqUi());L.append(f.getJqUi());L.append(I.getJqUi());t.layoutCtrlWithLRTB(J.getJqUi(),0,0,null,0,null,23);t.layoutCtrlWithLRTB(A.getJqUi(),0,0,null,25,null,23);t.layoutCtrlWithLRTB(f.getJqUi(),0,0,null,60,null,23);t.layoutCtrlWithLRTB(I.getJqUi(),0,0,null,85,10,null)}return L};this.getSettingResult=function(){for(var J=new xa,f=0;f<M.length;f++)J.addItem(M[f]);for(f=0;f<H.length;f++)J.addItem(H[f]);
return J}}function Rb(){var M;this.setContext=function(H){M=H};this.getModelType=function(){throw Error("Override");};this.createJqUi=function(H){throw Error("Override");};this.applySettingResult=function(H){throw Error("Override");};this.into=function(){};this.protectedMethod={getPage:function(){return M.getDashboardModel().getPage()},createFacade:function(H,L){return M.createFacade(H,L)}}}function Ta(){Rb.call(this);var M,H,L;this.createJqUi=function(d){M=$("<div>");H=Xb.createTable();H.getCellRender().setOutsideVisible(!1);
Xb.bindTextEditor(H,J,f);Xb.bindTableListenerForCtrl(H,aa);H.addColumns(3);H.getColumn(0).setWidth(200);H.getColumn(1).setWidth(200);H.getColumn(2).setWidth(100);var q=Xb.createHeadRow(H);q.getCell(0).setValue(k.get("filterSourceCustomValue","\u503c"));q.getCell(1).setValue(k.get("filterSourceCustomText","\u663e\u793a\u503c"));q=$(H.getUI());q.appendTo(M);t.layoutCtrlWithLRTB(q,0,0,null,0,0,null);I(d);return M};this.into=function(){Xb.refresh(H)};this.getModelType=function(){return ha.TYPE_CustomList};
this.applySettingResult=function(d){A(d,!1)};var A=function(d,q){for(var z=0,w=Xb.getHeadRowCount(),B=H.getRowsCount();w<B;w++){var W=H.getRow(w),ja=W.getCell(0).getValue();W=W.getCell(1).getValue();var Ea=ja||W;(q||Ea)&&d.addItem(ja,W);Ea&&(z=w)}if(q)for(w=q=z+1,B=d.getItemsCount();w<B;w++)d.deleteItem(q)},I=function(d){H.setSyncUIWhenModelChanged(!1);Xb.clearWithoutHead(H);for(var q=d?d.getItemsCount():0,z=Math.max(8,q+2),w=0;w<z;w++){var B="",W="";w<q&&(B=d.getItemValue(w),W=d.getItemText(w));
var ja=Xb.createRow(H);ja.getCell(0).setValue(B);ja.getCell(1).setValue(W)}Xb.refresh(H);H.setSyncUIWhenModelChanged(!0)},J=function(d,q){return 0==q||1==q},f=function(d,q,z,w,B){z.setValue(w);return!0},aa=function(d,q,z,w){d=null;if(q){d=H.searchJqCell(z,2);var B=z-Xb.getHeadRowCount();e(d,k.get("insertRow","\u63d2\u5165"),function(W){W=ha.createInstance(ha.TYPE_CustomList);A(W,!0);W.insertItem(B,"","");I(W)});e(d,k.get("deleteRow","\u5220\u9664"),function(W){W=ha.createInstance(ha.TYPE_CustomList);
A(W,!0);W.deleteItem(B);I(W)})}else L&&L.empty();L=d},e=function(d,q,z){var w=$("<div>");w.text(q);w.css({display:"inline-block",position:"relative",width:"40px","line-height":"20px",margin:"4px","text-align":"center",border:"1px solid #39f",color:"#39f",cursor:"pointer"});w.on("click",z);w.appendTo(d)}}function Ga(){Rb.call(this);var M=this.protectedMethod,H,L,A,I,J,f,aa,e,d,q,z;this.createJqUi=function(sa){w();W(sa);return H};this.getModelType=function(){return ha.TYPE_VisualWidget};this.applySettingResult=
function(sa){var G=L.getSelected();G?(sa.setSourceWidgetName(G.getName()),sa.setMetaFieldFullName(A.getSelected()),sa.setDisplayMetaFieldFullName(f.isChecked()?e.getSelected():null),sa.setOrderByMetaFieldFullName(aa.isChecked()?d.getSelected():null),sa.setOrderByAsc(z.getSelected())):(sa.setSourceWidgetName(null),sa.setMetaFieldFullName(null),sa.setDisplayMetaFieldFullName(null),sa.setOrderByMetaFieldFullName(null),sa.setOrderByAsc(!0))};var w=function(){L=new Wa;L.setCustomPainter(function(l,h,u){l?
u&&h.text(u.getDisplayName()):u&&N.paint(u,h)});L.addSelectedChangedListener(Ua);A=new R;e=new R;d=new R;I=new Bc;I.setText(k.get("filterSourceRefAdvancedButton","\u9ad8\u7ea7\u8bbe\u7f6e\u9879")+"...");I.getJqUi().css("text-align","left");I.addActionListener(function(l){va(!0)});f=new $b;f.setText(k.get("filterSourceRefWidgetMeta2","\u663e\u793a\u5b57\u6bb5"));f.addCheckedListener(Ea);aa=new $b;aa.setText(k.get("filterSourceRefWidgetMeta3","\u6392\u5e8f\u5b57\u6bb5"));aa.addCheckedListener(Ea);z=
new Wa;z.setCustomPainter(tb);var sa=new ta(k.get("filterSourceRefBasic","\u57fa\u672c\uff1a"));J=new ta(k.get("filterSourceRefAdvanced","\u9ad8\u7ea7\uff1a"));var G=new ta(k.get("filterSourceRefWidget","\u7ec4\u4ef6")),D=new ta(k.get("filterSourceRefWidgetMeta1","\u5b57\u6bb5"));q=new ta(k.get("filterSourceOrderBy","\u6392\u5e8f"));H=$("<div>");H.append(sa.getJqUi());H.append(J.getJqUi());H.append(I.getJqUi());t.layoutCtrl(sa.getJqUi(),0,0,100,23);t.layoutCtrl(J.getJqUi(),0,99,100,23);t.layoutCtrl(I.getJqUi(),
0,99,120,23);B(G,L,33);B(D,A,66);B(f,e,132);B(aa,d,165);B(q,z,198);va(!1)},B=function(sa,G,D){H.append(sa.getJqUi());H.append(G.getJqUi());t.layoutCtrl(sa.getJqUi(),40,D,106,23);t.layoutCtrl(G.getJqUi(),140,D,320,23)},W=function(sa){var G=sa?sa.getSourceWidgetName():null,D=sa?sa.isOrderByAsc():!0,l=null,h=[];M.getPage().traversalMeAndDescendents(function(u){u.isInstanceOf(ea.WidgetSuperType_BuiltinVisual)&&(h.push(u),u.getName()==G&&(l=u))});L.setItemModels(h);sa?(L.setSelected(l),mb(l,!0,function(){var u=
sa.getDisplayMetaFieldFullName()?!0:!1,U=sa.getOrderByMetaFieldFullName()?!0:!1;A.setSelected(sa.getMetaFieldFullName());e.setSelected(sa.getDisplayMetaFieldFullName());d.setSelected(sa.getOrderByMetaFieldFullName());f.setChecked(u);aa.setChecked(U);e.setEnabled(f.isChecked());d.setEnabled(aa.isChecked());va(u||U||!D)})):(mb(null,!0),f.setChecked(!1),aa.setChecked(!1),e.setEnabled(f.isChecked()),d.setEnabled(aa.isChecked()),va(!1));ja(D)},ja=function(sa){z.setItemModels([!0,!1]);z.setSelected(sa)},
Ea=function(sa,G){(sa==f?e:sa==aa?d:null).setEnabled(sa.isChecked());ja(z.getSelected())},Ua=function(sa,G,D){mb(D,!1,function(){A.setSelected(null);e.setSelected(null);d.setSelected(null)})},mb=function(sa,G,D){if(sa){var l=sa.getExecutingTag();if(l){var h=M.createFacade(function(u){Gb(u,A,[Y.DT_STRING]);Gb(u,e,[Y.DT_STRING]);Gb(u,d,[Y.DT_STRING,Y.DT_NUMBER]);D&&D()});h.setShowBlocking(!1);h.getWidgetBoundMeta(l)}else setTimeout(function(){zb(sa,G)},0)}else Gb(null,A),Gb(null,e),Gb(null,d)},Gb=function(sa,
G,D){var l=new T;sa&&l.fromJsonObject(sa);G.setModel(l,D)},zb=function(sa,G){var D=k.get("filterSourceRefWidgetPrompt","\u201c#1\u201d\u6570\u636e\u672a\u51c6\u5907\u597d\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5\u3002");D=D.replace("#1",sa.getDisplayName());sa=new pc;G||sa.setConfirmedListener(function(l){L.setSelected(null)});sa.setText(D);sa.show(L.getJqUi(),!0)},tb=function(sa,G,D){var l;aa.isChecked()?l=k.get("filterSourceOrderByWhat","\u6309#1").replace("#1",k.get("filterSourceRefWidgetMeta3","\u6392\u5e8f\u5b57\u6bb5")):
f.isChecked()&&(l=k.get("filterSourceOrderByWhat","\u6309#1").replace("#1",k.get("filterSourceRefWidgetMeta2","\u663e\u793a\u5b57\u6bb5")));sa=D?k.get("filterSourceOrderByAsc","ASC"):k.get("filterSourceOrderByDesc","DESC");G.text(sa+(l?"--"+l:""))},va=function(sa){I.getJqUi().css("display",sa?"none":"");sa=sa?"":"none";J.getJqUi().css("display",sa);f.getJqUi().css("display",sa);e.getJqUi().css("display",sa);aa.getJqUi().css("display",sa);d.getJqUi().css("display",sa);q.getJqUi().css("display",sa);
z.getJqUi().css("display",sa)}}function Cb(){function M(){var q,z,w,B=!0;this.getTargetWidgetName=function(){return q};this.setTargetWidgetName=function(W){q=W};this.getMetaFieldFullName=function(){return z};this.setMetaFieldFullName=function(W){z=W};this.getParamName=function(){return w};this.setParamName=function(W){w=W};this.isBindingField=function(){return B};this.markBindingField=function(W){B=W}}function H(){ia.AbstractOneItemPanel.call(this);var q=this,z,w,B,W,ja,Ea,Ua,mb,Gb=null;this.setModel=
function(oa){z=oa};this.isEditingParamNameInvalid=function(){return ja.isChecked()&&!q.protectedIsEditingParamNameValid()};this.protectedIsEditingParamNameValid=function(){throw Error("Implement");};this.protectedGetHeight=function(){return 110+30*(q.protectedBindParamDetailUiRows()-1)};this.protectedInitJqUi=function(oa){var za=new ta(k.get("affectedTargetWidget","\u7ec4\u4ef6"));B=new ta(k.get("affectedTargetType","\u4f5c\u7528\u65b9\u5f0f"));w=new Wa;w.setCustomPainter(function(Ib,qc,Lc){Ib?Lc&&
qc.text(Lc.getDisplayName()):Lc&&N.paint(Lc,qc)});w.addSelectedChangedListener(sa);W=new Oa;W.setText(k.get("affectedTargetTypeMeta","\u7ed1\u5b9a\u5b57\u6bb5\u4f5c\u4e3a\u7b5b\u9009\u5668"));ja=new Oa;ja.setText(k.get("affectedTargetTypeParam","\u53c2\u6570"));var wa=new Qb;wa.addElement(W);wa.addElement(ja);wa.addChangedListener(G);zb();wa=30*(q.protectedBindParamDetailUiRows()-1)+23;oa.append(za.getJqUi());oa.append(w.getJqUi());oa.append(B.getJqUi());oa.append(W.getJqUi());oa.append(ja.getJqUi());
oa.append(Ea);oa.append(Ua);t.layoutCtrlWithLRTB(za.getJqUi(),0,null,72,6,null,23);t.layoutCtrlWithLRTB(B.getJqUi(),0,null,72,36,null,23);t.layoutCtrlWithLRTB(w.getJqUi(),72,100,null,6,null,23);t.layoutCtrlWithLRTB(Ea,0,100,null,66,null,23);t.layoutCtrlWithLRTB(Ua,0,100,null,66,null,wa);l()};var zb=function(){var oa=new ta;oa.setText(k.get("affectedTargetWidgetMeta","\u5b57\u6bb5"));mb=new R;mb.setSelectedListener(D);Ea=$("<div>");Ea.append(oa.getJqUi());Ea.append(mb.getJqUi());t.layoutCtrlWithLRTB(oa.getJqUi(),
0,null,72,0,null,23);t.layoutCtrlWithLRTB(mb.getJqUi(),72,0,null,0,null,23);Ua=$("<div>");q.protectedInitBindParamDetailUi(Ua,z,function(){return ya(!0)})};this.protectedBindParamDetailUiRows=function(){throw Error("Implement");};this.protectedInitBindParamDetailUi=function(oa,za,wa){throw Error("Implement");};this.protectedPrepareCtrlState=function(oa){throw Error("Implement");};var tb=function(oa,za){var wa=oa.css("display");za&&"none"==wa?(za=oa.data("myOriDisplay"),oa.css("display",za)):za||"none"==
wa||(oa.data("myOriDisplay",wa),oa.css("display","none"))},va=function(oa,za){tb(oa.getJqUi(),za)},sa=function(oa,za,wa){z.setTargetWidgetName(wa?wa.getName():null);z.setMetaFieldFullName(null);z.setParamName(null);h(wa)},G=function(oa,za){za&&U(oa)},D=function(){z.setMetaFieldFullName(mb.getSelected())},l=function(){var oa=null,za=[];J.getTopPage().traversalMeAndDescendents(function(Jc){if(Jc!=J){var Sa=aa(Jc);if(0<=Sa){var bd=za[Sa];bd||(bd=[],za[Sa]=bd);bd.push(Jc);z.getTargetWidgetName()==Jc.getName()&&
(oa=Jc)}}});for(var wa=[],Ib=0;Ib<za.length;Ib++){var qc=za[Ib];if(qc)for(var Lc=0;Lc<qc.length;Lc++)wa.push(qc[Lc])}w.setItemModels(wa);w.setSelected(oa);h(oa)},h=function(oa){if(oa){var za=z.getMetaFieldFullName()?!0:!1,wa=z.getParamName()?!0:!1;va(B,!0);var Ib=null,qc=0,Lc=72,Jc=ea.AffectedType_BindField;(oa.getAffectedParamType()&Jc)==Jc?(u(W,Lc,za),Ib=W,qc++,Lc+=168):va(W,!1);J.getSourceDataType()==Y.DT_STRING||J.getSourceDataType()==Y.DT_DATE?(Jc=ea.AffectedType_Param,oa=(oa.getAffectedParamType()&
Jc)==Jc):oa=!1;oa?(u(ja,Lc,wa),!Ib&&(Ib=ja),qc++):va(ja,!1);1==qc&&Ib.setEnabled(!1);za||wa||(Ib.setChecked(!0),U(Ib))}else va(B,!1),va(W,!1),va(ja,!1),U(null)},u=function(oa,za,wa){oa.setEnabled(!0);va(oa,!0);t.layoutCtrlWithLRTB(oa.getJqUi(),za,null,160,36,null,23);wa&&(oa.setChecked(!0),U(oa))},U=function(oa){tb(Ea,oa==W?!0:!1);tb(Ua,oa==ja?!0:!1);oa==W?(da(),z.markBindingField(!0)):oa==ja&&(q.protectedPrepareCtrlState(z),z.markBindingField(!1));ya(oa==ja?!0:!1)},da=function(){var oa=w.getSelected();
if(oa){if(Gb==oa)return;Gb=oa;if(oa=oa.getOriginatedExecutingTag()){mb.setModel(new T);var za=f(function(wa){var Ib=new T;Ib.fromJsonObject(wa);mb.setModel(Ib,[J.getSourceDataType()]);mb.setSelected(z.getMetaFieldFullName())},function(wa,Ib){Gb=null});za.setShowBlocking(!1);za.getWidgetBoundMeta(oa);return}}mb.setModel(new T);mb.setSelected(z.getMetaFieldFullName())},ya=function(oa){Ua.parent().find(".dsb-setting-affectedtarget-prompt").remove();if(oa&&ja.isChecked()&&!q.protectedIsEditingParamNameValid()){oa=
$("<div>");oa.addClass("dsb-setting-affectedtarget-prompt");oa.css("color","#c00");oa.text(k.get("affectedTargetParamNamePrompt","\u53c2\u6570\u540d\u79f0\u5fc5\u987b\u4ee5\u5b57\u6bcd\u5f00\u5934\uff0c\u53ea\u80fd\u5305\u542b\u5b57\u6bcd\u3001\u6570\u5b57\u3001\u4e0b\u5212\u7ebf\u3002"));var za=90+30*(q.protectedBindParamDetailUiRows()-1);t.layoutCtrlWithLRTB(oa,72,100,null,za,null,20);Ua.parent().append(oa);return!1}return!0};!this.protectedMethod&&(this.protectedMethod={});this.protectedMethod.setCtrlVisible=
va;this.protectedMethod.isParamNameValid=function(oa){return db.checkVariableNaming(oa)}}function L(){H.call(this);var q=this.protectedMethod,z;this.protectedBindParamDetailUiRows=function(){return 1};this.protectedInitBindParamDetailUi=function(w,B,W){var ja=new ta;ja.setText(k.get("affectedTargetParamName","\u53c2\u6570\u540d\u79f0"));z=new Ka;z.addEditedListener(function(Ea){W()&&B.setParamName($.trim(z.getText()))});w.append(ja.getJqUi());w.append(z.getJqUi());t.layoutCtrlWithLRTB(ja.getJqUi(),
0,null,72,0,null,23);t.layoutCtrlWithLRTB(z.getJqUi(),72,0,null,0,null,23)};this.protectedPrepareCtrlState=function(w){w=w.getParamName();z.setText(w?w:"")};this.protectedIsEditingParamNameValid=function(){var w=$.trim(z.getText());return!w||q.isParamNameValid(w)}}function A(q){H.call(this);var z=this.protectedMethod,w,B,W,ja,Ea,Ua;this.protectedBindParamDetailUiRows=function(){return 2};this.protectedInitBindParamDetailUi=function(zb,tb,va){var sa=new ta;sa.setText(k.get("dateParamType","\u53c2\u6570\u7c7b\u578b"));
w=new Wa;w.setItemModels(q?[1,2]:[2]);w.setCustomPainter(function(l,h,u){h.text(1==u?k.get("dateParamType1","\u6309\u65f6\u95f4\u7c92\u5ea6\u5bf9\u5e94\u4e00\u4e2a\u53c2\u6570"):2==u?k.get("dateParamType2","\u6309\u65e5\u671f\u8303\u56f4\u5bf9\u5e94\u4e8c\u4e2a\u53c2\u6570"):"")});w.addSelectedChangedListener(function(l,h,u){mb(2==u);va()});!q&&w.setEnabled(!1);var G=new ta;G.setText(k.get("affectedTargetParamName","\u53c2\u6570\u540d\u79f0"));B=new Ka;B.addEditedListener(function(l){va()&&tb.setParamName($.trim(B.getText()))});
W=new ta;W.setText(k.get("dateParamType2Caption1","\uff08\u8d77\uff09"));Ea=new ta;Ea.setText(k.get("dateParamType2Caption2","\uff08\u6b62\uff09"));ja=new Ka;ja.addEditedListener(function(l){va()&&tb.setParamName(xa.encodeDoubleParamName($.trim(ja.getText()),$.trim(Ua.getText())))});Ua=new Ka;Ua.addEditedListener(function(l){va()&&tb.setParamName(xa.encodeDoubleParamName($.trim(ja.getText()),$.trim(Ua.getText())))});var D=new nc;D.setTipsHtml(Gb());zb.append(sa.getJqUi());zb.append(w.getJqUi());zb.append(G.getJqUi());
zb.append(B.getJqUi());zb.append(W.getJqUi());zb.append(ja.getJqUi());zb.append(Ea.getJqUi());zb.append(Ua.getJqUi());zb.append(D.getJqUi());t.layoutCtrlWithLRTB(sa.getJqUi(),0,null,72,0,null,23);t.layoutCtrlWithLRTB(w.getJqUi(),72,0,null,0,null,23);t.layoutCtrlWithLRTB(D.getJqUi(),null,-20,16,4,null,16);t.layoutCtrlWithLRTB(G.getJqUi(),0,null,72,30,null,23);t.layoutCtrlWithLRTB(B.getJqUi(),72,0,null,30,null,23);t.layoutCtrlWithLRTB(ja.getJqUi(),72,null,132,30,null,23);t.layoutCtrlWithLRTB(W.getJqUi(),
204,null,60,30,null,23);t.layoutCtrlWithLRTB(Ua.getJqUi(),null,60,132,30,null,23);t.layoutCtrlWithLRTB(Ea.getJqUi(),null,0,60,30,null,23)};this.protectedPrepareCtrlState=function(zb){var tb=(zb=zb.getParamName())&&xa.isDoubleParamName(zb)||!q;w.setSelected(tb?2:1);mb(tb);tb?(zb=xa.decodeDoubleParamName(zb?zb:""),ja.setText(zb[0]),Ua.setText(zb[1])):B.setText(zb?zb:"")};this.protectedIsEditingParamNameValid=function(){if(2==w.getSelected()){var zb=$.trim(ja.getText()),tb=$.trim(Ua.getText());zb=!zb||
z.isParamNameValid(zb);tb=!tb||z.isParamNameValid(tb);return zb&&tb}tb=$.trim(B.getText());return!tb||z.isParamNameValid(tb)};var mb=function(zb){z.setCtrlVisible(B,!zb);z.setCtrlVisible(W,zb);z.setCtrlVisible(ja,zb);z.setCtrlVisible(Ea,zb);z.setCtrlVisible(Ua,zb)},Gb=function(){var zb=function(U){var da=$("<tr>");da.appendTo(U);return da},tb=function(U,da,ya){var oa=$("<td>");oa.text(da);oa.css({border:"1px solid #ccc",padding:"4px 4px"});oa.appendTo(U);if(ya)for(var za in ya)oa.attr(za,ya[za]);
return oa},va=new ca,sa=new Date(2024,7,1),G=function(U,da){va.setFormatString(U);var ya='"'+va.format(sa)+'"';va.setFormatString(da);da=va.format(sa);var oa=k.get("dateParamHelpExampleStructure","#1\uff0c\u4f8b\u5982#2\uff0c\u6307#3\u3002");return oa=oa.replace("#1",U).replace("#2",ya).replace("#3",da)},D=$("<div>");D.text(k.get("dateParamHelpText","\u53c2\u6570\u503c\u662f\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u7531\u82e5\u5e72\u4f4d\u6570\u5b57\u7ec4\u6210\u3002"));D.css({"font-weight":"bold"});
var l=$("<table>");l.css({"border-collapse":"collapse",margin:"6px 0px"});var h=zb(l);tb(h,k.get("dateParamHelpHead0","\u7ec4\u4ef6"),{rowspan:2});tb(h,k.get("dateParamType1","\u6309\u65f6\u95f4\u7c92\u5ea6\u5bf9\u5e94\u4e00\u4e2a\u53c2\u6570"),{colspan:2});tb(h,k.get("dateParamType2","\u6309\u65e5\u671f\u8303\u56f4\u5bf9\u5e94\u4e24\u4e2a\u53c2\u6570"),{colspan:2});h=zb(l);tb(h,k.get("dateParamHelpHead1","\u53c2\u6570\u503c\u4f4d\u6570"));tb(h,k.get("dateParamHelpHead2","\u53c2\u6570\u503c\u683c\u5f0f"));
tb(h,k.get("dateParamHelpHead1","\u53c2\u6570\u503c\u4f4d\u6570"));tb(h,k.get("dateParamHelpHead2","\u53c2\u6570\u503c\u683c\u5f0f"));h=zb(l);tb(h,k.get("widgetCalendarYear","\u65e5\u671f-\u5e74"));tb(h,"4");tb(h,"yyyy");tb(h,"8",{rowspan:5});tb(h,"yyyyMMdd",{rowspan:5});h=zb(l);tb(h,k.get("widgetCalendarQuarter","\u65e5\u671f-\u5e74\u5b63"));tb(h,"5");tb(h,"yyyyq");h=zb(l);tb(h,k.get("widgetCalendarMonth","\u65e5\u671f-\u5e74\u6708"));tb(h,"6");tb(h,"yyyyMM");h=zb(l);tb(h,k.get("widgetCalendarDay",
"\u65e5\u671f-\u5e74\u6708\u65e5"));tb(h,"8");tb(h,"yyyyMMdd");zb=zb(l);tb(zb,k.get("widgetCalendar","\u65e5\u671f-\u65e5\u671f\u8303\u56f4"));tb(zb,k.get("dateParamHelpNone","\u65e0"),{colspan:2});tb=$("<div>");tb.text(G("yyyy",k.get("dateParamHelpFormat1","yyyy\u5e74")));zb=$("<div>");zb.text(G("yyyyq",k.get("dateParamHelpFormat2","yyyy\u5e74\u7b2cq\u5b63\u5ea6")));h=$("<div>");h.text(G("yyyyMM",k.get("dateParamHelpFormat3","yyyy\u5e74M\u6708")));var u=$("<div>");u.text(G("yyyyMMdd",k.get("dateParamHelpFormat4",
"yyyy\u5e74M\u6708d\u65e5")));G=$("<div>");G.append(D);G.append(l);G.append(tb);G.append(zb);G.append(h);G.append(u);return G.html()}}ia.call(this);var I=this.protectedMethod,J,f,aa,e,d;this.setContext=function(q,z,w){J=q;f=z;aa=w;e=[];d=[];if(z=J.getAffectedTargets())for(q=new xa,w={},z.toJsonObject(w),q.fromJsonObject(w),z=0,w=q.getItemCount();z<w;z++){var B=q.getItem(z);if(B.getType()==ea.AffectedType_BindField||B.getType()==ea.AffectedType_Param){var W=new M;W.setTargetWidgetName(B.getTargetWidgetName());
if(B.getType()==ea.AffectedType_BindField)W.markBindingField(!0),W.setMetaFieldFullName(B.getMetaFieldFullName());else if(B.getType()==ea.AffectedType_Param)W.markBindingField(!1),W.setParamName(B.getParamName());else throw Error("Modify here");e.push(W)}else d.push(B)}};this.checkSettingResult=function(){var q=null;I.visitAllItemPanel(function(z,w){return z.isEditingParamNameInvalid()?(q=k.get("affectedTargetIllegalParamName","\u53c2\u6570\u540d\u79f0\u5305\u542b\u975e\u6cd5\u5b57\u7b26"),I.scrollItemUiToVisible(w,
function(){}),!0):!1});return q};this.getSettingResult=function(){for(var q=new xa,z=0;z<e.length;z++){var w=e[z];if(w.isBindingField()){var B=xa.createItem(ea.AffectedType_BindField);B.setMetaFieldFullName(w.getMetaFieldFullName())}else B=xa.createItem(ea.AffectedType_Param),B.setParamName(w.getParamName());B.setTargetWidgetName(w.getTargetWidgetName());q.addItem(B)}for(z=0;z<d.length;z++)B=d[z],q.addItem(B);return q};this.protectedGetAddButtonText=function(){return k.get("affectedTargetAdd","\u6dfb\u52a0\u76ee\u6807\u7ec4\u4ef6")};
this.protectedUpdateUiImpl=function(){I.clearAllItemUi();for(var q=0;q<e.length;q++)I.appendItemUi(e[q])};this.protectedCreateOneItemPanel=function(q){var z=J.getSourceDataType()==Y.DT_DATE,w=!(J instanceof fc);z=z?new A(w):new L;z.setModel(q);return z};this.protectedAddItemAction=function(){var q=new M;e.push(q);I.appendItemUi(q)};this.protectedDeleteItemModel=function(q){e.splice(q,1)}}function Xa(){function M(){ia.AbstractOneItemPanel.call(this);var J,f,aa,e,d;this.setModel=function(ja){J=ja};
this.protectedGetHeight=function(){return 100};this.protectedInitJqUi=function(ja){var Ea=new ta(k.get("tabSwitchTargetWidget","\u9875\u7b7e\u63a7\u4ef6")),Ua=new ta(k.get("tabSwitchTargetSubTabbed","\u5207\u6362\u5230\u9875\u7b7e"));f=new Wa;f.setCustomPainter(function(Gb,zb,tb){tb&&zb.text(tb.getDisplayName())});f.addSelectedChangedListener(w);aa=new Oa;aa.setText("");e=new Oa;e.setText(k.get("tabSwitchTargetMatching","\u6309\u9009\u4e2d\u503c"));var mb=new Qb;mb.addElement(aa);mb.addElement(e);
mb.addChangedListener(B);d=new Wa;d.setCustomPainter(function(Gb,zb,tb){Gb="";var va=f.getSelected();tb&&va&&(tb>va.getWidgetCount()?Gb=k.get("tabSwitchTargetIndexNotExist","(\u4e0d\u5b58\u5728\u7b2c#1\u4e2a\u9875\u7b7e)").replace("#1",tb):(Gb=va.getWidget(tb-1).getHeadText(),Gb=k.get("tabSwitchTargetIndex","#2 (\u7b2c#1\u4e2a\u9875\u7b7e)").replace("#1",tb).replace("#2",Gb)));zb.text(Gb)});d.addSelectedChangedListener(W);ja.append(Ea.getJqUi());ja.append(f.getJqUi());ja.append(Ua.getJqUi());ja.append(aa.getJqUi());
ja.append(e.getJqUi());ja.append(d.getJqUi());t.layoutCtrlWithLRTB(Ea.getJqUi(),0,null,100,6,null,23);t.layoutCtrlWithLRTB(f.getJqUi(),100,100,null,6,null,23);t.layoutCtrlWithLRTB(Ua.getJqUi(),0,null,100,36,null,23);t.layoutCtrlWithLRTB(aa.getJqUi(),100,null,20,36,null,23);t.layoutCtrlWithLRTB(d.getJqUi(),116,100,null,36,null,23);t.layoutCtrlWithLRTB(e.getJqUi(),100,100,null,66,null,23);q()};var q=function(){var ja=null,Ea=[];L.traversalMeAndDescendents(function(Ua){Ua.getWidgetTypeName()==ea.WidgetType_TabbedContainer&&
(Ea.push(Ua),J.getTargetWidgetName()==Ua.getName()&&(ja=Ua))});f.setItemModels(Ea);f.setSelected(ja);z(ja)},z=function(ja){var Ea=[];if(ja)for(var Ua=0;Ua<ja.getWidgetCount();Ua++)Ea.push(Ua+1);d.setItemModels(Ea);d.setSelected(J.getTabIndex()+1);0>J.getTabIndex()?e.setChecked(!0):aa.setChecked(!0)},w=function(ja,Ea,Ua){J.setTargetWidgetName(Ua?Ua.getName():null);J.setTabIndex(0);z(Ua)},B=function(ja,Ea){Ea&&(aa.isChecked()?(ja=d.getSelected(),ja||(ja=1,d.setSelected(ja)),J.setTabIndex(ja-1)):J.setTabIndex(-1))},
W=function(ja,Ea,Ua){ja=d.getSelected();J.setTabIndex(ja?ja-1:0);aa.setChecked(!0)}}ia.call(this);var H=this.protectedMethod,L,A,I;this.setContext=function(J){L=J};this.setSettingModel=function(J){A=[];I=[];if(J){var f=new xa,aa={};J.toJsonObject(aa);f.fromJsonObject(aa);J=0;for(aa=f.getItemCount();J<aa;J++){var e=f.getItem(J);(e.getType()==ea.AffectedType_Tab?A:I).push(e)}}H.updateUi()};this.getSettingResult=function(){for(var J=new xa,f=0;f<A.length;f++)J.addItem(A[f]);for(f=0;f<I.length;f++)J.addItem(I[f]);
return J};this.protectedGetAddButtonText=function(){return k.get("affectedTargetAdd","\u6dfb\u52a0\u76ee\u6807\u7ec4\u4ef6")};this.protectedUpdateUiImpl=function(){H.clearAllItemUi();for(var J=0;J<A.length;J++)H.appendItemUi(A[J])};this.protectedCreateOneItemPanel=function(J){var f=new M;f.setModel(J);return f};this.protectedAddItemAction=function(){var J=xa.createItem(ea.AffectedType_Tab);A.push(J);H.appendItemUi(J)};this.protectedDeleteItemModel=function(J){A.splice(J,1)}}function jc(){fa.call(this);
var M=this,H=this.protectedMethod,L,A,I,J=this.showDialog;this.showDialog=function(d,q,z){L=q;M.setSize(640,480);H.setTitle(k.get("dateRangeInitialDialogTitle","\u201c#1\u201d\u7684\u521d\u59cb\u503c").replace("#1",q.getDisplayName()));H.setContentPaneCreator(f);H.setClosingAction(function(w){if(w){var B=I.isChecked();w=[null];var W=e(w);W?(w=w[0],d.createFacade(function(ja){z(!0,ja.fromDate,ja.toDate,W,B)}).parseRelativePeriod(W,w)):(w=M.protectedGetEditingAbsoluteModel(),z(!0,w[0],w[1],W,B))}else z(!1)});
J();aa()};var f=function(){A=new Mc;A.addItem("absolute",120,M.protectedCreateAbsoluteJqUi(L),k.get("dateRangeAbsolute","\u6307\u5b9a\u65e5\u671f"));A.addItem("relative",120,M.protectedCreateRelativeJqUi(L),k.get("dateRangeRelative","\u76f8\u5bf9\u65e5\u671f"));A.setSelectedChangedListener(function(z,w,B){"absolute"==w&&M.protectedIntoAbsoluteUi();"relative"==w&&M.protectedIntoRelativeUi()});I=new $b;I.setText(k.get("dateRangeContainNull","\u5305\u542b\u7a7a\u503c"));var d=I.getJqUi();t.layoutCtrlWithLRTB(A.getJqUi(),
0,0,null,0,26,null);t.layoutCtrlWithLRTB(d,0,null,200,null,0,23);var q=$("<div>");q.append(A.getJqUi());q.append(d);return q};this.protectedCreateAbsoluteJqUi=function(d){throw Error("Implement");};this.protectedIntoAbsoluteUi=function(){};this.protectedCreateRelativeJqUi=function(d){throw Error("Implement");};this.protectedIntoRelativeUi=function(){};var aa=function(){var d=L.getRelativeModel()?!0:!1;A.setSelected(d?"relative":"absolute");I.setChecked(L.isContainNull())},e=function(d){return"relative"==
A.getSelected()?M.protectedGetEditingRelativeModel(d):null};this.protectedGetEditingRelativeModel=function(d){throw Error("Implement");};this.protectedGetEditingAbsoluteModel=function(){throw Error("Implement");}}function dc(){function M(){var A;this.getJqUi=function(){return I().getJqUi()};this.setDateRange=function(J,f){J=J?J:na.createTimestamp();J=na.getFullYear(J);I().setSelecteds([J])};this.getDateRange=function(){var J=I().getSelecteds()[0],f=na.createDateWithTime(J,0,1,0,0,0,0);J=na.createDateWithTime(J,
11,31,23,59,59,999);return[f.getTime(),J.getTime()]};this.into=function(){I().scrollSelectedToVisible()};var I=function(){if(!A){for(var J=[],f=1970;2099>=f;f++)J.push(f);A=new Qc;A.setToggleSelectingEnabled(!1);A.setBorderVisible(!1);A.setItemModels(J)}return A}}jc.call(this);var H,L;this.protectedCreateAbsoluteJqUi=function(A){H=new M;H.setDateRange(A.getFromDate(),A.getToDate());return H.getJqUi()};this.protectedIntoAbsoluteUi=function(){H.into()};this.protectedCreateRelativeJqUi=function(A){L=
new ab.SimpleRelative;(A=A.getRelativeModel())?(A=A.toJsonObject(),L.fromJsonObject(A)):L.setOffset(0);A=new Eb;A.setModel(L);A.setDisplay(dc.modelToDisplayText());return A.getJqUi()};this.protectedGetEditingRelativeModel=function(A){A[0]="y";return L};this.protectedGetEditingAbsoluteModel=function(){return H.getDateRange()}}function Bb(){function M(){var A=new gb;this.getJqUi=function(){return A.getJqUi()};this.setDateRange=function(I,J){J=I?I:na.createTimestamp();I=na.getFullYear(J);J=Math.floor(na.getMonth(J)/
3);A.setSelectedYear(I);A.setSelectedQuarter(J)};this.getDateRange=function(){var I=A.getSelectedYear(),J=A.getSelectedQuarter();return gb.toDateRange(I,J)};this.into=function(){A.scrollSelectedToVisible()}}jc.call(this);var H,L;this.protectedCreateAbsoluteJqUi=function(A){H=new M;H.setDateRange(A.getFromDate(),A.getToDate());return H.getJqUi()};this.protectedIntoAbsoluteUi=function(){H.into()};this.protectedCreateRelativeJqUi=function(A){L=new ab.SimpleRelative;(A=A.getRelativeModel())?(A=A.toJsonObject(),
L.fromJsonObject(A)):L.setOffset(0);A=new Eb;A.setModel(L);A.setDisplay(Bb.modelToDisplayText());return A.getJqUi()};this.protectedGetEditingRelativeModel=function(A){A[0]="q";return L};this.protectedGetEditingAbsoluteModel=function(){return H.getDateRange()}}function Hb(){function M(){var A=new sb;this.getJqUi=function(){return A.getJqUi()};this.setDateRange=function(I,J){J=I?I:na.createTimestamp();I=na.getFullYear(J);J=na.getMonth(J);A.setSelectedYear(I);A.setSelectedMonth(J+1)};this.getDateRange=
function(){var I=A.getSelectedYear(),J=A.getSelectedMonth()-1;return sb.toDateRange(I,J)};this.into=function(){A.scrollSelectedToVisible()}}jc.call(this);var H,L;this.protectedCreateAbsoluteJqUi=function(A){H=new M;H.setDateRange(A.getFromDate(),A.getToDate());return H.getJqUi()};this.protectedIntoAbsoluteUi=function(){H.into()};this.protectedCreateRelativeJqUi=function(A){L=new ab.SimpleRelative;(A=A.getRelativeModel())?(A=A.toJsonObject(),L.fromJsonObject(A)):L.setOffset(0);A=new Eb;A.setModel(L);
A.setDisplay(Hb.modelToDisplayText());return A.getJqUi()};this.protectedGetEditingRelativeModel=function(A){A[0]="m";return L};this.protectedGetEditingAbsoluteModel=function(){return H.getDateRange()}}function Da(){function M(){var A=new Na;this.getJqUi=function(){return A.getJqUi()};this.setDateRange=function(I,J){var f=I?I:na.createTimestamp();I=na.getFullYear(f);J=na.getMonth(f);f=na.getDate(f);A.setSelected(I,J+1,f)};this.getDateRange=function(){var I=A.getSelectedYear(),J=A.getSelectedMonth()-
1,f=A.getSelectedDay(),aa=na.createDateWithTime(I,J,f,0,0,0,0);I=na.createDateWithTime(I,J,f,23,59,59,999);return[aa.getTime(),I.getTime()]};this.into=function(){}}jc.call(this);var H,L;this.protectedCreateAbsoluteJqUi=function(A){H=new M;H.setDateRange(A.getFromDate(),A.getToDate());return H.getJqUi()};this.protectedIntoAbsoluteUi=function(){H.into()};this.protectedCreateRelativeJqUi=function(A){L=new ab.SimpleRelative;(A=A.getRelativeModel())?(A=A.toJsonObject(),L.fromJsonObject(A)):L.setOffset(0);
A=new Eb;A.setModel(L);A.setDisplay(Da.modelToDisplayText());return A.getJqUi()};this.protectedGetEditingRelativeModel=function(A){A[0]="d";return L};this.protectedGetEditingAbsoluteModel=function(){return H.getDateRange()}}function Eb(){var M=new Oa,H=new Oa,L=new Oa,A=new fb,I=new fb,J,f;this.setModel=function(d){f=d;d=d.getOffset();0==d?(H.setChecked(!0),A.setValue(1),I.setValue(1)):0>d?(M.setChecked(!0),A.setValue(-d),I.setValue(1)):(L.setChecked(!0),I.setValue(d),A.setValue(1));e()};this.getJqUi=
function(){!J&&aa();return J};this.setDisplay=function(d){M.setText(d[0]);H.setText(d[1]);L.setText(d[2])};var aa=function(){var d=new Qb;d.addElement(M);d.addElement(H);d.addElement(L);d.addChangedListener(function(q,z){z&&(e(),z=0,q==M?z=-A.getValue():q==L&&(z=I.getValue()),f.setOffset(z))});A.setConstraint(1,9999,1);A.addValueChangedListener(function(q,z,w,B){f.setOffset(-w)},!0);I.setConstraint(1,9999,1);I.addValueChangedListener(function(q,z,w,B){f.setOffset(w)},!0);J=$("<div>");J.append(M.getJqUi());
J.append(H.getJqUi());J.append(L.getJqUi());J.append(A.getJqUi());J.append(I.getJqUi());t.layoutCtrl(M.getJqUi(),0,10,140,23);t.layoutCtrl(H.getJqUi(),0,45,140,23);t.layoutCtrl(L.getJqUi(),0,80,140,23);t.layoutCtrl(A.getJqUi(),140,10,80,23);t.layoutCtrl(I.getJqUi(),140,80,80,23)},e=function(){A.setEnabled(M.isChecked());I.setEnabled(L.isChecked())}}function Ca(){var M;this.setContext=function(H){M=H};this.getModelType=function(){throw Error("Override");};this.createJqUi=function(H,L){throw Error("Override");
};this.applySettingResult=function(H){throw Error("Override");};this.into=function(){};this.isWaiting=function(){return!1};this.protectedMethod={createFacade:function(H,L){return M.createFacade(H,L)}}}function vb(){Ca.call(this);this.getModelType=function(){return Ia.TYPE_ByIndex};this.createJqUi=function(M,H){M=new ta(k.get("defaultSelectedByIndexDescription","\u6bcf\u6b21\u6267\u884c\u65f6\u521d\u59cb\u72b6\u6001\u4e3a\u9009\u4e2d\u5907\u9009\u503c\u7684\u7b2c\u4e00\u9879\u3002"));H=$("<div>");
H.append(M.getJqUi());t.layoutCtrlWithLRTB(M.getJqUi(),0,0,null,0,null,30);return H};this.applySettingResult=function(M){}}function Kb(){function M(){var q=this,z=this.protectedMethod,w,B;this.setItems=function(W,ja){w=W;B={};W=ja?ja:q.protectedGetInsteadSelecteds(w);for(ja=0;ja<W.length;ja++)B[W[ja].getValue()]=!0};this.acceptSelectedValue=function(){var W=z.acceptSelectingResult();!W&&(W=B);for(var ja=[],Ea=!0,Ua=0;Ua<w.length;Ua++){var mb=w[Ua].getValue();W[mb]?ja.push(mb):Ea=!1}0<w.length&&Ea&&
(ja=null);return ja};this.protectedGetSelectableItems=function(){return w};this.protectedCloneSelectedValue=function(){return B};this.protectedGetInsteadSelecteds=function(W){throw Error("Implement");}}function H(){pa.call(this);M.call(this);this.protectedGetInsteadSelecteds=function(q){return 0==q.length?[]:[q[0]]}}function L(){Ba.call(this);M.call(this);this.protectedGetInsteadSelecteds=function(q){return q}}Ca.call(this);var A=this.protectedMethod,I,J,f,aa,e=!0;this.getModelType=function(){return Ia.TYPE_ByAppointed};
this.createJqUi=function(q,z){I=q;J=z;return f=$("<div>")};this.applySettingResult=function(q){var z=aa.acceptSelectedValue();q.setAppointedValue(z)};this.isWaiting=function(){return e};this.into=function(){aa||d(function(){var q=aa.getJqUi();q.appendTo(f);t.layoutCtrlWithLRTB(q,0,0,null,0,0,null)})};var d=function(q){var z=I.isMultiSelectable();aa=z?new L:new H;var w=I.getFilterSource();if(w){var B=new ta(k.get("defaultSelectedByAppointedWaiting","\u6b63\u5728\u83b7\u53d6\u5907\u9009\u503c")+"...");
B.getJqUi().appendTo(f);e=!0;w.getPreparedValue(I,null,A.createFacade,function(W){var ja=W?W:[];J?J.getItems(ja,z,function(Ea){aa.setItems(ja,Ea);q()}):(aa.setItems(ja,null),q());e=!1;B.getJqUi().remove()})}else aa.setItems([],null),q()}}function rb(M){eb.AbstractTabPane.call(this);var H=this,L,A;this.hookContext=function(I){A=I;A.addModelChangedListener(function(){H.protectedUpdateCtrlState()})};this.getTabHeadText=function(){return M};this.getJqUi=function(){L||(L=$("<div>"),L.css("overflow","auto"),
H.protectedInitUi(L),H.protectedUpdateCtrlState());return L};this.protectedInitUi=function(I){};this.protectedUpdateCtrlState=function(){};this.protectedMethod={};this.protectedMethod.getModel=function(){return A.getModel()};this.protectedMethod.modified=function(){A.modified()};this.protectedMethod.layout=function(I,J,f,aa,e,d,q){e=new ta(e);var z=[e.getJqUi(),J.getJqUi()];J.setUserObject(z);I.append(e.getJqUi());I.append(J.getJqUi());t.layoutCtrl(e.getJqUi(),f,aa,160,20);t.layoutCtrl(J.getJqUi(),
f,aa+20,160,23);d&&(z.push(d.getJqUi()),I.append(d.getJqUi()),J.getJqUi().css("width",136),t.layoutCtrl(d.getJqUi(),f+140,aa+20,20,23));q&&z.push(q)};this.protectedMethod.updateVisible=function(I,J){J=J?"":"none";I=I.getUserObject();for(var f=0;f<I.length;f++)I[f].css("display",J)}}function cc(M){rb.call(this,M);var H=[Fa.LINE_WIDE_1,Fa.LINE_WIDE_2,Fa.LINE_WIDE_3,Fa.LINE_WIDE_4,Fa.LINE_WIDE_5],L=null,A=this.protectedMethod,I,J,f,aa,e,d,q,z,w,B,W,ja,Ea,Ua,mb,Gb,zb,tb,va,sa;this.protectedInitUi=function(Vb){var Ob=
$("<div>"),Yb=l(Ob,Fa.DIR_N,[-2,-2,"50%",-2]),uc=l(Ob,Fa.DIR_S,[-2,-2,-2,"50%"]),Sc=l(Ob,Fa.DIR_W,["50%",-2,-2,-2]),Cc=l(Ob,Fa.DIR_E,[-2,"50%",-2,-2]),Hc=l(Ob,Fa.DIR_NW,["50%",-2,"50%",-2]),Nc=l(Ob,Fa.DIR_NE,[-2,"50%","50%",-2]),dd=l(Ob,Fa.DIR_SW,["50%",-2,-2,"50%"]),cd=l(Ob,Fa.DIR_SE,[-2,"50%",-2,"50%"]);t.layoutCtrlWithLRTB(Hc,0,null,40,0,null,40);t.layoutCtrlWithLRTB(Yb,50,50,null,0,null,40);t.layoutCtrlWithLRTB(Nc,null,0,40,0,null,40);t.layoutCtrlWithLRTB(Sc,0,null,40,50,50,null);t.layoutCtrlWithLRTB(Cc,
null,0,40,50,50,null);t.layoutCtrlWithLRTB(dd,0,null,40,null,0,40);t.layoutCtrlWithLRTB(uc,50,50,null,null,0,40);t.layoutCtrlWithLRTB(cd,null,0,40,null,0,40);I=Ob;J=$("<div>");f=$("<div>");Vb.append(I);Vb.append(J);Vb.append(f);t.layoutCtrlWithLRTB(I,80,100,null,20,null,140);t.layoutCtrlWithLRTB(J,0,0,null,160,0,null);t.layoutCtrlWithLRTB(f,0,0,null,160,0,null);G();D()};this.protectedUpdateCtrlState=function(){h(I.children().eq(0))};var G=function(){aa=new Wa;aa.setItemModels([ua.TYPE_NONE,ua.TYPE_STRAIGHT,
ua.TYPE_SINGLE_TURN,ua.TYPE_DOUBLE_TURN]);aa.setCustomPainter(function(Ob,Yb,uc){Yb.text(bd(uc))});aa.addSelectedChangedListener(function(Ob,Yb,uc){tb.setType(uc);Jc(tb);A.modified()});e=u(!1);e.addSelectedChangedListener(function(Ob,Yb,uc){tb.setMajorLineLogicWide(uc);A.modified()});d=u(!0);d.addSelectedChangedListener(function(Ob,Yb,uc){tb.setMinorLineLogicWide(uc);Lc(tb);A.modified()});q=U();z=U();w=new fb;w.setConstraint(0,100,1);w.setCustomPainter(function(Ob){return Ob+"%"});w.addValueChangedListener(function(Ob,
Yb,uc,Sc){tb.setTurning(uc,Math.min(100,uc+20));A.modified()},!0);B=new Lb;B.setDropdownCreator(da);W=new Wa;W.setItemModels([ua.FLIP_NONE,ua.FLIP_H,ua.FLIP_V,ua.FLIP_BOTH]);W.setCustomPainter(function(Ob,Yb,uc){Ob=uc==ua.FLIP_NONE?k.get("cardlookItemNone","\u65e0"):uc==ua.FLIP_H?k.get("cardlookFlipH","\u6c34\u5e73\u7ffb\u8f6c"):uc==ua.FLIP_V?k.get("cardlookFlipV","\u5782\u76f4\u7ffb\u8f6c"):uc==ua.FLIP_BOTH?k.get("cardlookFlipBoth","\u6c34\u5e73\u7ffb\u8f6c + \u5782\u76f4\u7ffb\u8f6c"):"";Yb.text(Ob)});
W.addSelectedChangedListener(function(Ob,Yb,uc){tb.setFlip(uc);A.modified()});ja=new Lb;ja.setDropdownCreator(ya);var Vb=qc();Ea=new ob;Ea.addStateChangeListener(function(Ob,Yb,uc){Yb&&(tb.setTitleEnhanced(uc),A.modified())});A.layout(J,aa,20,20,k.get("cardlookEdgeType","\u8fb9\u578b"));A.layout(J,e,20,80,k.get("cardlookLineWide","\u7ebf\u5bbd"),q);A.layout(J,d,20,140,k.get("cardlookMinorLine","\u88c5\u9970\u7ebf"),z);A.layout(J,ja,20,200,k.get("cardlookCustomDecoration","\u81ea\u5b9a\u4e49\u88c5\u9970\u7ebf"),
null,Vb);A.layout(J,w,220,20,k.get("cardlookTurnPosition","\u62d0\u5f2f\u4f4d\u7f6e"));A.layout(J,B,220,20,k.get("cardlookTurnPosition","\u62d0\u5f2f\u4f4d\u7f6e"));A.layout(J,W,220,80,k.get("cardlookFlip","\u7ffb\u8f6c"));A.layout(J,Ea,220,140,k.get("cardlookTitleEnhanced","\u6807\u9898\u680f\u5927\u62d0\u5f2f"));t.layoutCtrl(Vb,10,226,null,null);Vb.appendTo(J)},D=function(){Ua=new Wa;Ua.setItemModels([Sb.TYPE_NONE,Sb.TYPE_HARD,Sb.TYPE_ROUND,Sb.TYPE_LEAN]);Ua.setCustomPainter(function(Vb,Ob,Yb){Vb=
Yb==Sb.TYPE_HARD?k.get("cardlookCornerTypeHard","\u76f4\u89d2"):Yb==Sb.TYPE_ROUND?k.get("cardlookCornerTypeRound","\u5706\u89d2"):Yb==Sb.TYPE_LEAN?k.get("cardlookCornerTypeLean","\u5207\u89d2"):Yb==Sb.TYPE_NONE?k.get("cardlookItemNone","\u65e0"):"";Ob.text(Vb)});Ua.addSelectedChangedListener(function(Vb,Ob,Yb){tb.setType(Yb);Sa(tb);A.modified()});mb=u(!1);mb.addSelectedChangedListener(function(Vb,Ob,Yb){tb.setLineLogicWide(Yb);A.modified()});Gb=U();zb=new fb;zb.setConstraint(0,10,1);zb.addValueChangedListener(function(Vb,
Ob,Yb,uc){tb.setRadius(Yb);A.modified()},!0);A.layout(f,Ua,20,20,k.get("cardlookCornerType","\u89d2\u578b"));A.layout(f,mb,20,80,k.get("cardlookLineWide","\u7ebf\u5bbd"),Gb);A.layout(f,zb,220,20,k.get("cardlookCornerSize","\u5927\u5c0f"))},l=function(Vb,Ob,Yb){var uc=$("<div>");uc.data("q-sys-dir",Ob);uc.css({cursor:"pointer",overflow:"hidden"});uc.appendTo(Vb);uc.on("click",function(Sc){h(uc)});Vb=$("<div>");Vb.css({border:"2px solid gray"});Vb.appendTo(uc);t.layoutCtrlWithLRTB(Vb,Yb[0],Yb[1],null,
Yb[2],Yb[3],null);return uc},h=function(Vb){var Ob=Vb.data("q-sys-dir"),Yb=Ob==Fa.DIR_N||Ob==Fa.DIR_S||Ob==Fa.DIR_W||Ob==Fa.DIR_E;tb=Yb?A.getModel().getEdge(Ob):A.getModel().getCorner(Ob);va=Ob;J.css("display",Yb?"":"none");f.css("display",Yb?"none":"");Ob=I.children();Ob.css({"background-color":"#f7f7f7","box-shadow":""});Ob.children().css({"border-color":"#ddd"});Vb.css({"background-color":"#ddd","box-shadow":"0 0 0 2px #ccc"});Vb.children().css({"border-color":"#666"});Yb?(aa.setSelected(tb.getType()),
W.setSelected(tb.getFlip()),Ea.setOn(tb.isTitleEnhanced()),e.setSelected(tb.getMajorLineLogicWide()),d.setSelected(tb.getMinorLineLogicWide()),Jc(tb)):(Ua.setSelected(tb.getType()),zb.setValue(tb.getRadius()),mb.setSelected(tb.getLineLogicWide()),Sa(tb))},u=function(Vb){var Ob=Vb?[Fa.LINE_NONE].concat(H):H,Yb=new Wa;Yb.setItemModels(Ob);Yb.setCustomPainter(function(uc,Sc,Cc){var Hc=Cc==Fa.LINE_NONE,Nc=Hc?k.get("cardlookItemNone","\u65e0"):za(Cc);Sc.text(Nc);uc||Hc||(uc=A.getModel().getLineThickness(Cc),
Cc=$("<div>"),Cc.text(uc+"px"),Cc.css({"text-align":"right","line-height":"16px"}),Cc.appendTo(Sc),t.layoutCtrlWithLRTB(Cc,null,4,40),t.layoutCtrlMiddleAlign(Cc,16))});Yb.refreshSelectableItems=function(){Yb.setItemModels(Ob)};return Yb},U=function(){var Vb=new Lb;Vb.setIconName("editor");Vb.setDropdownCreator(oa);return Vb},da=function(Vb,Ob,Yb,uc){Ob=new Pb;Ob.setFormatString("0%");Ob.setLimited(0,100);Ob.setValue(tb.getFirstTurning(),tb.getSecondTurning());Ob.addValueChangedListener(function(Sc){Sc=
Sc.getValue();tb.setTurning(Sc[0],Sc[1]);wa(tb);A.modified()});Yb=new Bc(k.get("cardlookButtonClose","\u5173\u95ed"));Yb.addActionListener(function(Sc){uc()});Vb.css("background","#fff");Vb.append(Ob.getJqUi());Vb.append(Yb.getJqUi());t.layoutCtrlWithLRTB(Ob.getJqUi(),10,10,null,20,46,null);t.layoutCtrlWithLRTB(Yb.getJqUi(),10,10,null,null,10,26);return[244,120]},ya=function(Vb,Ob,Yb,uc,Sc){var Cc="";Ob=function(Vc){Cc+=Vc+"\r\n"};Ob(k.get("cardlookDecorationExplain","\u53ef\u7528\u7b26\u53f7\uff1a"));
Ob("_ \t"+k.get("cardlookDecorationExplain01","\u8c61\u5f62\u7b26\u53f7\uff0c\u5728\u88c5\u9970\u7ebf\u7684\u957f\u5ea6\u4e0a\u7559\u4e00\u4e2a\u50cf\u7d20\u7684\u7a7a\u767d\u3002"));Ob("| \t"+k.get("cardlookDecorationExplain02","\u8c61\u5f62\u7b26\u53f7\uff0c\u4ee5\u6807\u51c6\u5bbd\u5ea6\u7684\u65b9\u5f0f\u7ed8\u5236\u4e00\u4e2a\u50cf\u7d20\u7684\u957f\u5ea6\u3002"));Ob("/ \t"+k.get("cardlookDecorationExplain03","\u8c61\u5f62\u7b26\u53f7\uff0c\u4ee5\u5bbd\u5ea6\u503e\u659c\u7684\u65b9\u5f0f\u7ed8\u5236\u4e00\u4e2a\u50cf\u7d20\u7684\u957f\u5ea6\u3002"));
Ob("\\\t"+k.get("cardlookDecorationExplain04","\u8c61\u5f62\u7b26\u53f7\uff0c\u4ee5\u5bbd\u5ea6\u53cd\u5411\u503e\u659c\u7684\u65b9\u5f0f\u7ed8\u5236\u4e00\u4e2a\u50cf\u7d20\u7684\u957f\u5ea6\u3002"));Ob("O \t"+k.get("cardlookDecorationExplain05","\u8c61\u5f62\u7b26\u53f7\uff0c\u4e00\u4e2a\u7a7a\u5fc3\u5706\uff0c\u76f4\u5f84\u7b49\u4e8e\u7ebf\u5bbd\u3002"));Ob("o \t"+k.get("cardlookDecorationExplain06","\u8c61\u5f62\u7b26\u53f7\uff0c\u4e00\u4e2a\u5b9e\u5fc3\u5706\uff0c\u76f4\u5f84\u7b49\u4e8e\u7ebf\u5bbd\u3002"));
Ob("= \t"+k.get("cardlookDecorationExplain07","\u8c61\u5f62\u7b26\u53f7\uff0c\u4e00\u4e2a\u7a7a\u5fc3\u65b9\u5757\uff0c\u8fb9\u957f\u7b49\u4e8e\u7ebf\u5bbd\u3002"));Ob("2 \t"+k.get("cardlookDecorationExplain08","\u6b63\u6574\u6570\u4f5c\u4e3a\u8c61\u5f62\u7b26\u53f7\u7684\u540e\u7f00\uff0c\u8868\u793a\u91cd\u590d\u6b21\u6570\uff08\u7701\u7565\u65f6\u4e3a1\uff09\u3002\u4f8b\u5982 #1 \u662f\u957f\u5ea6\u4e3a#2\u4e2a\u50cf\u7d20\u7684\u77e9\u5f62\u3002").replace("#1","|6").replace("#2","6"));Ob("~ \t"+
k.get("cardlookDecorationExplain09","\u6ce2\u6d6a\u53f7\u4e5f\u53ef\u4f5c\u4e3a\u540e\u7f00\uff0c\u8868\u793a\u5c3d\u53ef\u80fd\u91cd\u590d\u3002\u4f8b\u5982 #1 \u5728\u5706\u5708\u4e4b\u524d\u8865\u8db3\u7a7a\u767d\uff0c\u4f7f\u5706\u5708\u5411\u540e\u5bf9\u9f50\u3002").replace("#1","_~O"));Ob("{ }\t"+k.get("cardlookDecorationExplain10","\u82b1\u62ec\u53f7\u4e2d\u586b\u989c\u8272\u503c\uff0c\u4f5c\u4e3a\u8c61\u5f62\u7b26\u53f7\u7684\u524d\u7f00\uff0c\u8868\u793a\u4ece\u6b64\u5904\u5f00\u59cb\u6539\u989c\u8272\uff0c\u7a7a\u82b1\u62ec\u53f7\u8868\u793a\u6539\u56de\u8fb9\u6846\u989c\u8272\u3002"));
Ob("( )\t"+k.get("cardlookDecorationExplain11","\u5c0f\u62ec\u53f7\u53ef\u4ee5\u7ec4\u5408\u591a\u7ec4\u8c61\u5f62\u7b26\u53f7\uff0c\u518d\u63cf\u8ff0\u91cd\u590d\u6b21\u6570\u3002\u4f8b\u5982 #1 \u662f\u4e00\u6761\u865a\u7ebf\u3002").replace("#1","(|4_4)~"));Ob("; \t"+k.get("cardlookDecorationExplain12","\u62d0\u5f2f\u5206\u6bb5\u6807\u8bc6\u3002\u4f8b\u5982 #1 \u662f\u5728\u53cc\u62d0\u5f2f\u7684\u524d\u540e\u4e24\u6bb5\u4e2d\u6dfb\u52a0\u5706\u5708\uff0c\u4e2d\u95f4\u6bb5\u6ca1\u6709\u5185\u5bb9\u3002").replace("#1",
"O;;O"));Ob=$("<div>");Ob.css({color:"#666","white-space":"pre-wrap","line-height":"24px",overflow:"auto"});Ob.text(Cc);Yb=new ta(k.get("cardlookDecorationString","\u88c5\u9970\u7ebf\u63cf\u8ff0\u4e32\uff1a"));var Hc=new Ka;Hc.setText($.trim(tb.getCustomMinorLine()));Hc.addEditedListener(function(Vc){tb.setCustomMinorLine(Vc.getText());Ib(tb);dd();A.modified()});var Nc=$("<div>");Nc.css({cursor:"pointer","white-space":"pre-wrap",color:"#c00"});Nc.on("click",function(Vc){Hc.setSelectingScope(sa?sa[2]:
null,sa?sa[3]:null);Hc.requestFocus()});var dd=function(){var Vc=sa?sa[0]:null;Nc.css("display",Vc?"":"none");Nc.text(Vc);Nc.attr("title",Vc+"\r\n"+(sa?sa[1]:null))};dd();var cd=new Bc(k.get("cardlookButtonClose","\u5173\u95ed"));cd.addActionListener(function(Vc){uc()});Vb.removeClass("sa-ctrl-common-unselectable");Vb.css("background","#fff");Vb.append(Yb.getJqUi());Vb.append(Hc.getJqUi());Vb.append(Nc);Vb.append(Ob);Vb.append(cd.getJqUi());t.layoutCtrlWithLRTB(cd.getJqUi(),null,10,60,10,null,26);
t.layoutCtrlWithLRTB(Yb.getJqUi(),20,120,null,10,null,20);t.layoutCtrlWithLRTB(Hc.getJqUi(),20,20,null,30,null,23);t.layoutCtrlWithLRTB(Nc,20,20,null,60,null,40);t.layoutCtrlWithLRTB(Ob,20,20,null,100,10,null);setTimeout(Hc.requestFocus,0);Sc(function(){Vb.css("left",Math.max(4,Vb.prop("offsetLeft")-240))});return[600,480]},oa=function(Vb,Ob,Yb,uc){Ob=function(Hc){var Nc=new fb;Nc.supportDecimal(2);Nc.setConstraint(0,40,1);Nc.setValue(A.getModel().getLineThickness(Hc));Nc.addValueChangedListener(function(dd,
cd,Vc,pb){A.getModel().setLineThickness(Hc,Vc);A.modified();e.refreshSelectableItems();d.refreshSelectableItems();mb.refreshSelectableItems()},!0);A.layout(Sc,Nc,0,56*Cc,za(Hc))};Vb.css("background","#fff");var Sc=$("<div>");Sc.css("overflow","auto");for(var Cc=0;Cc<H.length;Cc++)Ob(H[Cc]);Ob=new ta(k.get("cardlookLineWideMapping","\u7ebf\u5bbd\u540d\u79f0\u5bf9\u5e94\u7684\u50cf\u7d20"));Ob.getJqUi().appendTo(Vb);Sc.appendTo(Vb);Yb=new Bc(k.get("cardlookButtonClose","\u5173\u95ed"));Yb.addActionListener(function(Hc){uc()});
Yb.getJqUi().appendTo(Vb);t.layoutCtrlWithLRTB(Ob.getJqUi(),20,20,null,10,null,20);t.layoutCtrlWithLRTB(Sc,20,0,null,40,40,null);t.layoutCtrlWithLRTB(Yb.getJqUi(),20,20,null,null,10,26);return[200,360]},za=function(Vb){L||(L=["",k.get("cardlookLineWide1","\u4e00"),k.get("cardlookLineWide2","\u4e8c"),k.get("cardlookLineWide3","\u4e09"),k.get("cardlookLineWide4","\u56db"),k.get("cardlookLineWide5","\u4e94")]);return k.get("cardlookLineWide","\u7ebf\u5bbd")+L[Vb]},wa=function(Vb){Vb=Vb.getFirstTurning()+
"%, "+Vb.getSecondTurning()+"%";B.setSelectedModel(Vb)},Ib=function(Vb){var Ob=$.trim(Vb.getCustomMinorLine());ja.setSelectedModel(Ob);var Yb=null,uc=-1,Sc=0;if(Ob){var Cc=new wc,Hc=Cc.decode(Ob);if(Cc=Cc.getException()){Yb=Cc;switch(Yb.getCode()){case ma.UNKNOWN_CHAR:Yb=k.get("cardlookDecorationError1","\u4e0d\u53ef\u8bc6\u522b\u7684\u5b57\u7b26\u3002");break;case ma.INVALID_PREFIX:Yb=k.get("cardlookDecorationError2","\u4e0d\u53ef\u8bc6\u522b\u7684\u989c\u8272\u503c\u3002");break;case ma.UNPAIRED_BRACE:Yb=
k.get("cardlookDecorationError3","\u4e0d\u6210\u5bf9\u7684\u82b1\u62ec\u53f7\u3002");break;case ma.REDUNDANT_PREFIX:Yb=k.get("cardlookDecorationError4","\u524d\u7f00\u540e\u672a\u8ddf\u968f\u8c61\u5f62\u7b26\u53f7\u3002");break;case ma.REDUNDANT_SUFFIX:Yb=k.get("cardlookDecorationError5","\u9519\u8bef\u6216\u591a\u4f59\u7684\u540e\u7f00\u3002");break;case ma.REDUNDANT_LB:Yb=k.get("cardlookDecorationError6","\u6ca1\u6709\u5339\u914d\u7684\u53f3\u62ec\u53f7\u3002");break;case ma.REDUNDANT_RB:Yb=k.get("cardlookDecorationError7",
"\u6ca1\u6709\u5339\u914d\u7684\u5de6\u62ec\u53f7\u3002");break;case ma.EMPTY_BRACKET:Yb=k.get("cardlookDecorationError8","\u7a7a\u62ec\u53f7\u3002");break;default:Yb=Yb.getMessage()}uc=Cc.getCharStart();Sc=Cc.getCharLength();Vb.hookParsedPartsBlock(null)}else{Vb.hookParsedPartsBlock(Hc);var Nc=Vb.getType()==ua.TYPE_SINGLE_TURN?2:Vb.getType()==ua.TYPE_DOUBLE_TURN?3:1;Hc.length>Nc&&(Yb=bd(Vb.getType()),Yb=k.get("cardlookDecorationError9","\u8fb9\u578b\u4e3a#1\uff0c\u6700\u591a\u5206#2\u6bb5\u3002").replace("#1",
Yb).replace("#2",Nc),uc=Ob.lastIndexOf(";"),Sc=1)}0<=uc&&(Vb=uc+1,Vb=1==Sc?Vb:Vb+"-"+(uc+Sc),Yb+="\r\n"+k.get("cardlookDecorationErrorAt","\u4f4d\u4e8e\u7b2c#1\u4e2a\u5b57\u7b26\u3002").replace("#1",Vb))}Cc=Cc?Cc.getMessage():"";sa=Yb?[Yb,Cc,uc,uc+Sc]:null;Cc=J.children(".q-sys-warning");Cc.attr("title",Yb);Cc.css("visibility",Yb?"visible":"hidden")},qc=function(){var Vb=Rc.createWarning();Vb.addClass("q-sys-warning");return Vb},Lc=function(Vb){var Ob=Vb.getType()==ua.TYPE_NONE,Yb=Vb.getMinorLineLogicWide()!=
Fa.LINE_NONE;Ob=!Ob&&Yb;A.updateVisible(ja,Ob);Ob&&Ib(Vb)},Jc=function(Vb){var Ob=Vb.getType()==ua.TYPE_NONE,Yb=Vb.getType()==ua.TYPE_SINGLE_TURN,uc=Vb.getType()==ua.TYPE_DOUBLE_TURN,Sc=Yb||uc;A.updateVisible(e,!Ob);A.updateVisible(d,!Ob);A.updateVisible(W,!Ob);A.updateVisible(Ea,Sc&&va==Fa.DIR_N);A.updateVisible(w,Yb);A.updateVisible(B,uc);Yb&&w.setValue(Vb.getFirstTurning());uc&&wa(Vb);Lc(Vb)},Sa=function(Vb){Vb=Vb.getType()==Sb.TYPE_NONE;A.updateVisible(mb,!Vb);A.updateVisible(zb,!Vb)},bd=function(Vb){return Vb==
ua.TYPE_STRAIGHT?k.get("cardlookEdgeTypeStraight","\u76f4\u7ebf"):Vb==ua.TYPE_SINGLE_TURN?k.get("cardlookEdgeTypeSingleTurn","\u5355\u62d0\u5f2f"):Vb==ua.TYPE_DOUBLE_TURN?k.get("cardlookEdgeTypeDoubleTurn","\u53cc\u62d0\u5f2f"):Vb==ua.TYPE_NONE?k.get("cardlookItemNone","\u65e0"):""}}function Ab(M){function H(d){KTDefaultCellRender.call(this,d);var q=[Fa.DIR_N,Fa.DIR_S,Fa.DIR_W,Fa.DIR_E],z=[Fa.LINECOLOR_MAIN,Fa.LINECOLOR_STRONG,Fa.LINECOLOR_WEAK],w=this,B=this.paintCellUI;this.paintCellUI=function(mb,
Gb){if(w.getCurrentRowIdx()<Xb.getHeadRowCount())B(mb,Gb);else{var zb=w.getCurrentRow(),tb=w.getCell();Gb=W(tb);var va=function(sa){tb.setValue(sa);sa=L.getModel().getAllLightItems();sa.length=0;for(var G=Xb.getHeadRowCount(),D=I.getRowsCount();G<D;G++){var l=I.getRow(G),h=l.getCell(0).getValue(),u=l.getCell(1).getValue();l=l.getCell(2).getValue();sa.push(Fa.createLightItem(h,u,l))}Xb.refresh(I);L.modified()};switch(w.getCurrentColIdx()){case 0:ja(mb,w.getCellWidth(),w.getCellHeight(),Gb,function(sa){null===
W(zb.getCell(1))&&zb.getCell(1).setValue(50);null===W(zb.getCell(2))&&zb.getCell(2).setValue(Fa.LINECOLOR_STRONG);va(sa)});break;case 1:Ea(mb,w.getCellWidth(),w.getCellHeight(),Gb,va);break;case 2:Ua(mb,w.getCellWidth(),w.getCellHeight(),Gb,va)}}};var W=function(mb){return(mb=mb?mb.getValue():null)||0===mb?mb:null},ja=function(mb,Gb,zb,tb,va){mb=Xb.createCtrlInCell(mb,Gb,zb,Wa);mb.setSelected(tb);mb.setItemModels(q);mb.setCustomPainter(function(sa,G,D){sa=D==Fa.DIR_N?k.get("cardlookEdgeN","\u4e0a"):
D==Fa.DIR_S?k.get("cardlookEdgeS","\u4e0b"):D==Fa.DIR_W?k.get("cardlookEdgeW","\u5de6"):D==Fa.DIR_E?k.get("cardlookEdgeE","\u53f3"):"";G.text(sa)});mb.addSelectedChangedListener(function(sa,G,D){va(D)})},Ea=function(mb,Gb,zb,tb,va){mb=Xb.createCtrlInCell(mb,Gb,zb,fb);mb.setConstraint(0,100,1);mb.setValue(tb);mb.setCustomPainter(function(sa){return null===sa?"":sa+"%"});mb.addValueChangedListener(function(sa,G,D,l){va(D)},!0)},Ua=function(mb,Gb,zb,tb,va){mb=Xb.createCtrlInCell(mb,Gb,zb,Wa);mb.setSelected(tb);
mb.setItemModels(z);mb.setCustomPainter(function(sa,G,D){sa=D==Fa.LINECOLOR_MAIN?k.get("cardlookLineColorMain","\u4e3b\u8272"):D==Fa.LINECOLOR_STRONG?k.get("cardlookLineColorStrong","\u5f3a\u8c03"):D==Fa.LINECOLOR_WEAK?k.get("cardlookLineColorWeak","\u6de1\u5316"):"";G.text(sa)});mb.addSelectedChangedListener(function(sa,G,D){va(D)})}}rb.call(this,M);var L=this.protectedMethod,A={},I;this.into=function(){Xb.refresh(I)};this.protectedInitUi=function(d){var q=J(Fa.LINECOLOR_MAIN),z=J(Fa.LINECOLOR_STRONG),
w=J(Fa.LINECOLOR_WEAK);L.layout(d,q,20,20,k.get("cardlookLineColorMain","\u4e3b\u8272"));L.layout(d,z,20,80,k.get("cardlookLineColorStrong","\u8f85\u8272\uff08\u5f3a\u8c03\uff09"));L.layout(d,w,220,80,k.get("cardlookLineColorWeak","\u8f85\u8272\uff08\u6de1\u5316\uff09"));q=new ta(k.get("cardlookLight","\u6a21\u62df\u53d1\u5149"));I=Xb.createTable();I.setSyncUIWhenModelChanged(!1);z=new H(I);z.setOutsideVisible(!1);I.setCellRender(z);I.addColumns(4);I.getColumn(0).setWidth(80);I.getColumn(1).setWidth(72);
I.getColumn(2).setWidth(100);I.getColumn(3).setWidth(100);z=Xb.createHeadRow(I);z.getCell(0).setValue(k.get("cardlookLightEdge","\u8fb9"));z.getCell(1).setValue(k.get("cardlookLightPos","\u4f4d\u7f6e"));z.getCell(2).setValue(k.get("cardlookLightColor","\u989c\u8272"));f();z=$(I.getUI());t.layoutCtrlWithLRTB(q.getJqUi(),20,20,null,146,null,20);t.layoutCtrlWithLRTB(z,20,20,null,170,10,null);d.append(q.getJqUi());d.append(z)};this.protectedUpdateCtrlState=function(){for(var d in A)A[d].setNullableColor(L.getModel().getLineColor(d));
I&&e()};var J=function(d){var q=new Zc;q.setColorPool(ec.getColorPool7());q.setDisplayForNull(k.get("colorNull","\u65e0"));q.setChangedListener(function(z){L.getModel().setLineColor(d,z.getNullableColor());L.modified()});return A[d]=q},f=function(){var d=null;Xb.bindTableListenerForCtrl(I,function(q,z,w,B){q=null;if(z){q=I.searchJqCell(w,3);var W=w-Xb.getHeadRowCount();aa(q,k.get("insertRow","\u63d2\u5165"),function(ja){ja=Fa.createLightItem(null,null,null);L.getModel().getAllLightItems().splice(W,
0,ja);e()});aa(q,k.get("deleteRow","\u5220\u9664"),function(ja){L.getModel().getAllLightItems().splice(W,1);e();L.modified()})}else d&&d.empty();d=q})},aa=function(d,q,z){var w=$("<div>");w.text(q);w.css({display:"inline-block",position:"relative",width:"40px","line-height":"20px",margin:"4px","text-align":"center",color:"#39f",cursor:"pointer"});w.on("click",z);w.appendTo(d)},e=function(){Xb.clearWithoutHead(I);for(var d=L.getModel().getAllLightItems(),q=d.length,z=Math.max(4,q+2),w=0;w<z;w++){var B=
"",W="",ja="";w<q&&(ja=d[w],B=ja.getDir(),W=ja.getPosition(),ja=ja.getLogicColor());var Ea=Xb.createRow(I);Ea.getCell(0).setValue(B);Ea.getCell(1).setValue(W);Ea.getCell(2).setValue(ja)}Xb.refresh(I)}}function Va(){var M=$("<div>"),H;this.setPageBackground=function(L){M.css("background-color",L)};this.getJqUi=function(){H||(H=$(Qa.createCanvas()),H.appendTo(M));return M};this.refresh=function(L){var A=M.prop("clientWidth"),I=M.prop("clientHeight");if(.618*A<I){var J=Math.max(Math.round(.2*A),20);
A=Math.max(40,A-J);I=Math.round(.618*A)}else J=Math.max(Math.round(.2*I),20),I=Math.max(30,I-J),A=Math.round(I/.618);t.layoutCtrlCenterAlign(H,A);t.layoutCtrlMiddleAlign(H,I);J=Qa.createContext2d(H[0],A,I);var f=new hc;f.setModel(L);f.draw(J,0,0,A,I)}}function ba(){var M=this,H,L=new Oa,A=new Oa;this.getJqUi=function(){if(!H){L.setText(k.get("unifiedInPage","\u9875\u9762\u7edf\u4e00"));A.setText(k.get("custom","\u81ea\u5b9a\u4e49"));var J=new Qb;J.addElement(L);J.addElement(A);J.addChangedListener(function(aa,
e){e&&I(f)});var f=$("<div>");M.protectedInitCustomDetailPanel(f);I(f);H=$("<div>");H.append(L.getJqUi());H.append(A.getJqUi());H.append(f);t.layoutCtrlWithLRTB(L.getJqUi(),0,0,null,0,null,23);t.layoutCtrlWithLRTB(A.getJqUi(),0,0,null,30,null,23);t.layoutCtrlWithLRTB(f,20,0,null,60,0,null)}return H};this.protectedInitCustomDetailPanel=function(J){throw Error("Implement");};var I=function(J){var f=A.isChecked();J.css("display",f?"":"none");f&&M.protectedCustomDetailPanelVisible()};this.protectedCustomDetailPanelVisible=
function(){};this.protectedMethod={initRadioButton:function(J){A.setChecked(J);L.setChecked(!J)},isCustomChecked:function(){return A.isChecked()}}}function bb(){fa.call(this);var M=this,H=this.protectedMethod,L=new function(){ba.call(this);var I=this.protectedMethod;this.protectedInitCustomDetailPanel=function(J){var f=A.createUi();J.append(f);t.layoutCtrlWithLRTB(f,10,0,null,10,0,null)};this.protectedCustomDetailPanelVisible=function(){A.refreshPreviewCard()};this.setCustomChecked=function(J){I.initRadioButton(J)};
this.isCustomChecked=function(){return I.isCustomChecked()}},A=new jb;this.setWidget=function(I){var J=new Db;J.copyFromWidget(I);J.hookUsableCardBorderGetter(function(){return I.getUsableCardBorder()});J.hookUsableCardTopBarCommonGetter(function(){return J.getCardTopBarCommon()});var f=!0;J.getCardTopBarCommon()||(f=!1,J.setCardTopBarCommon(new ub));L.setCustomChecked(f);A.setWidgetInstead(J);H.setTitle(k.get("cardTitleLayoutDialogTitle","\u5361\u7247\u6807\u9898\u680f\u56fe\u7247")+" -- "+I.getDisplayName())};
this.show=function(I){M.setSize(960,600);H.setContentPaneCreator(function(){return L.getJqUi()});H.setClosingAction(function(J){J&&(L.isCustomChecked()?I(A.acceptModified()):I(null))});H.getDialogCtrl().setMinSize(720,400);H.getDialogCtrl().setResizeEnabled();H.getDialogCtrl().setFullScreenEnabled();H.getDialogCtrl().addResizeListener(function(J,f){A.refreshPreviewCard()});M.showDialog();A.refreshPreviewCard()}}function jb(){function M(B){var W,ja=new ta(B),Ea=new Oa,Ua=new Oa,mb=new Oa,Gb=new fb;
Ea.setChecked(!0);Ua.setChecked(!1);mb.setChecked(!1);Gb.setValue(0);ja.setEnabled(!1);Ea.setEnabled(!1);Ua.setEnabled(!1);mb.setEnabled(!1);Gb.setEnabled(!1);this.setModel=function(tb,va,sa){Ea.setChecked(tb==ub.TitlePosition_Auto);Ua.setChecked(tb==ub.TitlePosition_MidOfIcon);mb.setChecked(tb==ub.TitlePosition_Offset);Gb.setValue(va||0===va?va:sa);ja.setEnabled(!0);Ea.setEnabled(!0);Ua.setEnabled(!0);mb.setEnabled(!0);Gb.setEnabled(mb.isChecked())};this.getPositionMode=function(){return mb.isChecked()?
ub.TitlePosition_Offset:Ua.isChecked()?ub.TitlePosition_MidOfIcon:ub.TitlePosition_Auto};this.getOffsetValue=function(){return Gb.getValue()};this.getJqUi=function(){W||(zb(),W=$("<div>"),d(W,ja,0,0,160,23),d(W,Ea,20,25,160,23),d(W,Ua,20,50,160,23),d(W,mb,20,75,80,23),d(W,Gb,100,75,60,23));return W};var zb=function(){Ea.setText(k.get("cardTitleLayoutAuto","\u81ea\u52a8"));Ua.setText(k.get("cardTitleLayoutMidOfIcon","\u5728\u56fe\u7247\u8303\u56f4\u5185\u5c45\u4e2d"));mb.setText(k.get("cardTitleLayoutOffset",
"\u504f\u79fb"));var tb=new Qb;tb.addElement(Ea);tb.addElement(Ua);tb.addElement(mb);tb.addChangedListener(function(va,sa){sa&&(Gb.setEnabled(mb.isChecked()),q())});Gb.setConstraint(0,999,1);Gb.addValueChangedListener(function(va,sa,G,D){q()},!0)}}var H=new bc,L=new function(){var B=this,W,ja=new Oa,Ea=new Oa,Ua=new fb,mb=new fb,Gb=new ta(k.get("positionX","\u6c34\u5e73\u65b9\u5411")),zb=new ta(k.get("positionY","\u5782\u76f4\u65b9\u5411"));this.syncUsable=function(sa){ja.setEnabled(sa);Ea.setEnabled(sa);
sa?va():(Gb.setEnabled(!1),zb.setEnabled(!1),Ua.setEnabled(!1),mb.setEnabled(!1))};this.setModel=function(sa){var G=sa?!0:!1,D=sa?sa[0]:20;sa=sa?sa[1]:8;ja.setChecked(!G);Ea.setChecked(G);Ua.setValue(D);mb.setValue(sa);B.syncUsable(!0)};this.getIconOffset=function(){return Ea.isChecked()?[Ua.getValue(),mb.getValue()]:null};this.getJqUi=function(){W||(W=$("<div>"),tb());return W};var tb=function(){ja.setText(k.get("cardTitleLayoutAuto","\u81ea\u52a8"));Ea.setText(k.get("cardTitleLayoutAppointed","\u6307\u5b9a"));
var sa=new Qb;sa.addElement(ja);sa.addElement(Ea);sa.addChangedListener(function(G,D){D&&(va(),q())});Ua.setConstraint(0,999,1);Ua.addValueChangedListener(function(G,D,l,h){q()},!0);mb.setConstraint(0,999,1);mb.addValueChangedListener(function(G,D,l,h){q()},!0);d(W,ja,20,0,120,23);d(W,Ea,20,25,120,23);d(W,Gb,40,50,100,23);d(W,Ua,40,75,60,23);d(W,zb,40,100,100,23);d(W,mb,40,125,60,23)},va=function(){var sa=Ea.isChecked();Gb.setEnabled(sa);zb.setEnabled(sa);Ua.setEnabled(sa);mb.setEnabled(sa)}},A=new function(){var B=
this,W,ja=new Oa,Ea=new Oa,Ua=new fb,mb=new fb,Gb=new Wa,zb=new ta(k.get("sizeWidth","\u5bbd\u5ea6")),tb=new ta(k.get("sizeHeight","\u9ad8\u5ea6"));this.syncUsable=function(D){ja.setEnabled(D);Ea.setEnabled(D);D?sa():(zb.setEnabled(!1),tb.setEnabled(!1),Ua.setEnabled(!1),mb.setEnabled(!1),Gb.setEnabled(!1))};this.setModel=function(D,l){var h=D?!0:!1,u=D?D[0]:24;D=D?D[1]:24;ja.setChecked(!h);Ea.setChecked(h);Ua.setValue(u);mb.setValue(D);Gb.setSelected(l);B.syncUsable(!0);G()};this.getIconSize=function(){return Ea.isChecked()?
[Ua.getValue(),mb.getValue()]:null};this.isWidthAsPercentage=function(){return Ea.isChecked()?Gb.getSelected():!1};this.getJqUi=function(){W||(W=$("<div>"),va());return W};var va=function(){ja.setText(k.get("cardTitleLayoutAuto","\u81ea\u52a8"));Ea.setText(k.get("cardTitleLayoutAppointed","\u6307\u5b9a"));var D=new Qb;D.addElement(ja);D.addElement(Ea);D.addChangedListener(function(l,h){h&&(sa(),q())});G();Ua.addValueChangedListener(function(l,h,u,U){q()},!0);Ua.setCustomPainter(function(l){var h=
Gb.getSelected();return l+(h?"%":"")});mb.setConstraint(1,999,1);mb.addValueChangedListener(function(l,h,u,U){q()},!0);Gb.setItemModels([!1,!0]);Gb.setCustomPainter(function(l,h,u){h.text(!0===u?k.get("cardTitleLayoutPercentageOfCardWidth","\u5361\u7247\u5bbd\u5ea6\u6bd4\u4f8b"):"px")});Gb.addSelectedChangedListener(function(l,h,u){G();Ua.setValue(!0===u?100:24);q()});d(W,ja,20,0,120,23);d(W,Ea,20,25,120,23);d(W,zb,40,50,100,23);d(W,Ua,40,75,60,23);d(W,Gb,104,75,100,23);d(W,tb,40,100,100,23);d(W,
mb,40,125,60,23)},sa=function(){var D=Ea.isChecked();zb.setEnabled(D);tb.setEnabled(D);Ua.setEnabled(D);mb.setEnabled(D);Gb.setEnabled(D)},G=function(){var D=Gb.getSelected();Ua.setConstraint(1,D?100:999,1)}},I=new M(k.get("positionX","\u6c34\u5e73\u65b9\u5411")),J=new M(k.get("positionY","\u5782\u76f4\u65b9\u5411")),f=new kc,aa;this.setWidgetInstead=function(B){aa=B;B=aa.getCardTopBarCommon();var W=B.getTopBarIcon();W&&W.getReferenceCustomMap()?(L.setModel(B.getTopBarIconOffset()),A.setModel(B.getTopBarIconSize(),
B.isTopBarIconWidthAsPercentage())):(L.setModel(null),L.syncUsable(!1),A.setModel(null,!1),A.syncUsable(!1));aa.getCardTitle()&&(I.setModel(B.getCardTitleHorizontalPosition(),B.getCardTitleOffsetX(),20),J.setModel(B.getCardTitleVerticalPosition(),B.getCardTitleOffsetY(),10));z();f.bindWidget(aa)};this.acceptModified=function(){return aa.getCardTopBarCommon()};this.refreshPreviewCard=function(){w()};this.createUi=function(){H.setClearable(!0);H.addActionListener(function(mb){mb=Fb.getWidgetSourceSelector();
var Gb=aa.getCardTopBarCommon().getTopBarIcon();Gb=Gb?Gb.getReferenceCustomMap():null;mb.selectPicture(Gb,function(zb){if(zb){var tb=xb.createPeer();tb.setReferenceCustomMap(zb);aa.getCardTopBarCommon().setTopBarIcon(tb);z();L.syncUsable(!0);A.syncUsable(!0);w()}})});H.addClearListener(function(mb){aa.getCardTopBarCommon().setTopBarIcon(null);z();L.syncUsable(!1);A.syncUsable(!1);w()});var B=new ta(k.get("pictureUrl","\u56fe\u7247\u6587\u4ef6")),W=$("<div>");d(W,B,20,0,80,23);d(W,H,100,0,320,23);
B=$("<div>");d(B,I,0,0,200,120);d(B,J,240,0,200,120);W=e(k.get("cardTitleLayoutIconSrc","\u56fe\u7247\u6765\u6e90"),W);var ja=e(k.get("cardTitleLayoutIconPosition","\u56fe\u7247\u4f4d\u7f6e"),L.getJqUi()),Ea=e(k.get("cardTitleLayoutIconSize","\u56fe\u7247\u5927\u5c0f"),A.getJqUi()),Ua=e(k.get("cardTitleLayoutTextPosition","\u6587\u5b57\u4f4d\u7f6e"),B);B=$("<div>");B.css("overflow","auto");B.append(W);B.append(ja);B.append(Ea);B.append(Ua);t.layoutCtrl(W,0,0,440,70);t.layoutCtrl(ja,0,70,200,190);
t.layoutCtrl(Ea,240,70,200,190);t.layoutCtrl(Ua,0,260,440,140);ja=new ta("\u2191 "+k.get("cardTitleLayoutTopTips","\u4e0a\u8fb9\u8ddd\uff08\u6807\u9898\u680f\u9ad8\u5ea6\uff09")+" 40px");Ea=new ta("\u2190 "+k.get("cardTitleLayoutLeftTips","\u5de6\u8fb9\u8ddd")+" 20px");Ua=new ta(k.get("cardTitleLayoutRightTips","\u53f3\u8fb9\u8ddd")+" 20px \u2192");ja.setAlign(ta.ALIGN_CENTER);Ua.setAlign(ta.ALIGN_RIGHT);t.layoutCtrlWithLRTB(ja.getJqUi(),2,2,null,0,null,20);t.layoutCtrlWithLRTB(Ea.getJqUi(),2,2,null,
"30%",null,20);t.layoutCtrlWithLRTB(Ua.getJqUi(),2,2,null,"60%",null,20);W=$("<div>");W.css("background-color",$a.getPageBackgroundColor());W.append(f.getJqUi());f.getJqContent().css("border","1px dashed #999");f.getJqContent().append(ja.getJqUi());f.getJqContent().append(Ea.getJqUi());f.getJqContent().append(Ua.getJqUi());ja=$("<div>");ja.append(B);ja.append(W);t.layoutCtrlWithLRTB(B,0,null,480,0,0,null);t.layoutCtrlWithLRTB(W,480,0,null,0,0,null);return ja};var e=function(B,W){B=new ta(B);B.getJqUi().css("font-weight",
"bold");var ja=$("<div>");ja.css("border-bottom","1px solid #ccc");var Ea=$("<div>");Ea.append(B.getJqUi());Ea.append(ja);Ea.append(W);t.layoutCtrlWithLRTB(B.getJqUi(),0,0,null,0,null,20);t.layoutCtrlWithLRTB(ja,0,0,null,25,null,0);t.layoutCtrlWithLRTB(W,0,0,null,30,0,null);return Ea},d=function(B,W,ja,Ea,Ua,mb){B.append(W.getJqUi());t.layoutCtrl(W.getJqUi(),ja,Ea,Ua,mb)},q=function(){var B=L.getIconOffset(),W=A.getIconSize(),ja=A.isWidthAsPercentage(),Ea=I.getPositionMode(),Ua=I.getOffsetValue(),
mb=J.getPositionMode(),Gb=J.getOffsetValue();aa.getCardTopBarCommon().setTitleLayout(B,W,ja,Ea,Ua,mb,Gb);w()},z=function(){var B=aa.getCardTopBarCommon().getTopBarIcon();B=B&&B.getReferenceCustomMap()?k.get("refHasSet","\u5df2\u8bbe\u7f6e"):"";H.setModel(B)},w=function(){var B=f.getJqUi(),W=B.parent(),ja=W.prop("clientWidth");W=W.prop("clientHeight");if(.618*ja<W){var Ea=Math.max(Math.round(.2*ja),20);ja=Math.max(40,ja-Ea);W=Math.round(.618*ja)}else Ea=Math.max(Math.round(.2*W),20),W=Math.max(30,
W-Ea),ja=Math.round(W/.618);t.layoutCtrlCenterAlign(B,ja);t.layoutCtrlMiddleAlign(B,W);B.css("line-height","");f.updateTopBar(aa.getCardDescription())}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.dsb&&(com.kingdee.bos.qing.dsb={});"undefined"==typeof com.kingdee.bos.qing.dsb.ui&&(com.kingdee.bos.qing.dsb.ui=
{});var Aa=com.kingdee.bos.qing.dsb.ui;Aa.UrlInputDialog=function(){p.call(this);this.setSize(640,240);this.setTitle(k.get("widgetIframe","\u7f51\u9875"),k.get("iframeUrl","\u7f51\u9875\u5730\u5740"))};Aa.RichEditorDialog=function(){Wb.call(this);var M=this,H=this.protectedMethod,L=new y,A,I,J;this.protectedBeforeShow=function(e,d){M.setSize(640,480);H.setTitle(k.get("widgetRich","\u591a\u884c\u6587\u5b57"));H.setContentPaneCreator(function(){return L.getJqUi()});A=(A=e.getContent())?A.clone():r.create(function(z,
w){w.setFontSize(16)});H.replaceOutputParamDisplayName(A.getAllText(),d,function(z,w,B){A.replaceText(z,w,B)});L.setModel(A);L.setMaxCharacters(1E3);d=$a.dip($a.DSB_LABEL)[$a.Key_Label_Color];L.setDefaultColor(d);d=$a.dip($a.DSB_CARD)[$a.Key_Card_BackgroundColor];var q=$a.dip($a.DSB_PAGE)[$a.Key_Page_BackgroundColor];I=[null,d,q];J=f(e)?1:2;L.setBackgroundColor(I[J]);H.getDialogCtrl().createToolbarButton(k.get("richBackground","\u5207\u6362\u53c2\u8003\u80cc\u666f"),function(z){var w=new Gc;w.addItemModel(aa(k.get("richBackgroundAsDefault",
"\u9ed8\u8ba4\u989c\u8272"),0));w.addItemModel(aa(k.get("richBackgroundAsCard","\u5361\u7247\u80cc\u666f\u989c\u8272"),1));w.addItemModel(aa(k.get("richBackgroundAsPage","\u9875\u9762\u80cc\u666f\u989c\u8272"),2));H.popupMenu(z,w)},!0)};this.protectedAcceptEditedContent=function(e){H.replaceOutputParamDisplayName(A.getAllText(),e,function(d,q,z){A.replaceText(d,q,z)});return A};this.protectedCtrlOnFocus=function(){L.requestFocus()};this.protectedGetTextAndCursor=function(){var e=A.getAllText(),d=
L.getSelectingScope();return[e,d[0],d[1]]};this.protectedDoInsertRefTag=function(e,d){L.inputTextOnCursor(e)};var f=function(e){var d=!1;for(e=e.getParent();e&&e.getWidgetTypeName()!=ea.WidgetType_Page;){if(e.isInstanceOf(ea.WidgetSuperType_CardSimilary)){d=!0;break}e=e.getParent()}return d},aa=function(e,d){e=yc.createRadio(e,"bg",d==J,function(q){J=q.getUserObject();L.setBackgroundColor(I[J])});e.setUserObject(d);return e}};Aa.LabelContentDialog=function(){Wb.call(this);var M=this,H=this.protectedMethod,
L=new Ra;this.protectedBeforeShow=function(A,I){M.setSize(480,320);H.setTitle(k.get("widgetLabel","\u6587\u5b57"));H.setContentPaneCreator(function(){var f=new ta(k.get("labelContent","\u663e\u793a\u6587\u5b57"));t.layoutCtrlWithLRTB(f.getJqUi(),0,0,null,0,null,23);t.layoutCtrlWithLRTB(L.getJqUi(),0,0,null,30,0,null);var aa=$("<div>");aa.append(f.getJqUi());aa.append(L.getJqUi());return aa});var J=$.trim(A.getContent());H.replaceOutputParamDisplayName(J,I,function(f,aa,e){J=J.substring(0,f)+e+J.substring(aa)});
L.setText(J)};this.protectedAcceptEditedContent=function(A){var I=$.trim(L.getText());H.replaceOutputParamDisplayName(I,A,function(J,f,aa){I=I.substring(0,J)+aa+I.substring(f)});return I};this.protectedCtrlOnFocus=function(){L.requestFocus()};this.protectedGetTextAndCursor=function(){var A=L.getText(),I=L.getSelectingScope();return[A,I[0],I[1]]};this.protectedDoInsertRefTag=function(A,I){var J=L.getText(),f=L.getSelectingScope(),aa=f[0];f=f[1];J=J.substring(0,aa)+A+J.substring(f);L.setText(J);0<I?
(A=aa+3,I=A+I):I=A=aa+A.length;L.setSelectingScope(A,I)}};Aa.TextInputDialog=function(){fa.call(this);var M=this,H=this.protectedMethod,L=new ta,A=new Ka,I,J,f=!0,aa=65535;this.setCaption=function(B,W){H.setTitle(B);L.setText(W)};this.setText=function(B,W){A.setText(B);J=function(ja){var Ea=ja?$.trim(A.getText()):null;W(ja,Ea)};H.setClosingAction(J)};this.showDialogLeftAnchorTo=function(B){B&&(M.setSize(400,200),B=t.upwardCoordinate(B[0],[0,0],document.body),M.setPosition(Math.max(0,B[0]-400-10),
Math.max(6,B[1]-200+40)));e()};this.showDialogRightAnchorTo=function(B){B&&(M.setSize(400,200),B=t.upwardCoordinate(B[0],[B.outerWidth(),0],document.body),M.setPosition(B[0]+10,Math.max(6,B[1]-200+40)));e()};var e=function(){A.addAcceptableListener(q);A.addEditedListener(z);H.setContentPaneCreator(d);H.setClosingChecker(w);M.showDialog();A.requestFocus()};this.setEmptyEnabled=function(B){f=B};this.setMaxLength=function(B){aa=B};this.setClosingChecker=function(B){I=B?function(){var W=B($.trim(A.getText()));
W&&H.getMessageCurtain().showPrompt(W);return W?!1:!0}:null};var d=function(){t.layoutCtrlWithLRTB(L.getJqUi(),0,0,null,0,null,23);t.layoutCtrlWithLRTB(A.getJqUi(),0,0,null,30,null,23);var B=$("<div>");B.append(L.getJqUi());B.append(A.getJqUi());return B},q=function(B,W){W&&w()&&(J(!0),H.destroy())},z=function(B){(B=H.getMessageCurtain(!0))&&B.hide()},w=function(){var B=$.trim(A.getText()),W;f||0!=B.length?B.length>aa&&(W=k.get("textCheckLength","\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7#1\u4e2a\u5b57\u7b26").replace("#1",
aa)):W=k.get("textCheckEmpty","\u4e0d\u5141\u8bb8\u4e3a\u7a7a");return W?(H.getMessageCurtain().showPrompt(W),!1):!I||I()}};Aa.TextAreaDialog=p;Aa.FilterSourceDialog=function(){fa.call(this);var M=this,H=this.protectedMethod,L,A,I,J,f,aa;this.setTitle=function(w){L=w};var e=this.showDialog;this.showDialog=function(w,B,W){M.setSize(640,480);var ja=L||k.get("filterSourceDialogTitle","\u201c#1\u201d\u7684\u5907\u9009\u503c").replace("#1",B.getDisplayName());H.setTitle(ja);H.setContentPaneCreator(function(){return d(B,
w)});H.setClosingAction(function(Ea){var Ua=null,mb=!0;Ea&&(Ua=ha.createInstance(aa.getModelType()),aa.applySettingResult(Ua),mb=f?f.isChecked():!1);W(Ea,Ua,mb)});e();z(B)};var d=function(w,B){I=new Ga;I.setContext(B);J=new Ta;A=new Mc;A.setBottomLineVisible(w.isIncludeItemAllSupported());q(w,I,120,k.get("filterSourceFromRef","\u5f15\u7528"));q(w,J,120,k.get("filterSourceFromCustom","\u81ea\u5b9a\u4e49"));A.setSelectedChangedListener(function(W,ja,Ea){aa=Ea.data("myWrap");aa.into()});B=$("<div>");
B.append(A.getJqUi());w.isIncludeItemAllSupported()?(f=new $b,f.setText(k.get("filterSourceIncludedItemAll","\u643a\u5e26\u9009\u9879\u201c\u5168\u90e8\u201d")),w=f.getJqUi(),w.appendTo(B),t.layoutCtrlWithLRTB(A.getJqUi(),0,0,null,0,26,null),t.layoutCtrlWithLRTB(w,0,null,200,null,0,23)):t.layoutCtrlWithLRTB(A.getJqUi(),0,0,null,0,0,null);return B},q=function(w,B,W,ja){var Ea=B.getModelType();(w=w.getFilterSource())&&w.getType()==B.getModelType()||(w=null);w=B.createJqUi(w);w.data("myWrap",B);A.addItem(Ea,
W,w,ja)},z=function(w){var B=w.getFilterSource();B=B?B.getType():I.getModelType();A.setSelected(B);f&&f.setChecked(w.isIncludedItemAll())}};Aa.AffectedTargetDialog=function(){fa.call(this);var M=this,H=this.protectedMethod,L=this.showDialog;this.showDialog=function(A,I,J,f){var aa=new Cb;aa.setContext(I,A.createFacade,J);M.setSize(640,480);H.setTitle(k.get("affectedTargetDialogTitle","\u201c#1\u201d\u4f5c\u7528\u4e8e").replace("#1",I.getDisplayName()));H.setContentPaneCreator(function(){return aa.getJqUi()});
H.setClosingAction(function(e){var d=null;e&&(d=aa.getSettingResult());f(d)});H.setClosingChecker(function(){var e=aa.checkSettingResult();if(e)return H.getMessageCurtain().showPrompt(e,1E4),!1;e=aa.getSettingResult();var d=I.checkCircularAffection(e);return d?(e=k.get("affectedTargetCircular","\u5b58\u5728\u73af\u72b6\u7684\u201c\u4f5c\u7528\u4e8e\u201d\u8bbe\u7f6e\uff1a#1").replace("#1",d),H.getMessageCurtain().showPrompt(e,1E4),!1):(e=e.checkDuplicated())?(e=(d=I.getTopPage().searchWidgetByName(e))?
d.getDisplayName():e,e=k.get("affectedTargetDuplicated","\u91cd\u590d\u7684\u76ee\u6807\u7ec4\u4ef6\uff1a#1").replace("#1",e),H.getMessageCurtain().showPrompt(e,1E4),!1):!0});L()}};Aa.TabSwitchDialog=function(){fa.call(this);var M=this,H=this.protectedMethod,L=this.showDialog;this.showDialog=function(A,I){var J=new Xa;J.setContext(A.getTopPage());J.setSettingModel(A.getAffectedTargets());M.setSize(640,480);var f=k.get("tabSwitchDialogTitle","\u201c#1\u201d\u8054\u52a8\u201c#2\u201d");f=f.replace("#1",
A.getDisplayName());f=f.replace("#2",qa.getInstance(ea.WidgetType_TabbedContainer).getTypeDisplayName());H.setTitle(f);H.setContentPaneCreator(function(){return J.getJqUi()});H.setClosingAction(function(aa){aa=aa?J.getSettingResult():null;I(aa)});H.setClosingChecker(function(){var aa=J.getSettingResult().checkDuplicated();if(aa){var e=A.getTopPage().searchWidgetByName(aa);aa=e?e.getDisplayName():aa;aa=k.get("affectedTargetDuplicated","\u91cd\u590d\u7684\u76ee\u6807\u7ec4\u4ef6\uff1a#1").replace("#1",
aa);H.getMessageCurtain().showPrompt(aa,1E4);return!1}return!0});L()}};Aa.DateRangeInitialDialog=function(){jc.call(this);var M,H;this.protectedCreateAbsoluteJqUi=function(L){M=new Kc;M.setDateRange(L.getFromDate(),L.getToDate());return M.getJqUi()};this.protectedCreateRelativeJqUi=function(L){H=new V;(L=L.getRelativeModel())?(L=L.toJsonObject(),H.fromJsonObject(L)):(H.setPeriod(V.PERIOD_DAY),H.setWhichPeriod(0));L=$("<div>");var A=new Ic;A.setContainsTime(!1);A.setModel(H);A.getJqUi().appendTo(L);
t.layoutCtrlWithLRTB(A.getJqUi(),0,0,null,0,0,null);return L};this.protectedGetEditingRelativeModel=function(L){return H};this.protectedGetEditingAbsoluteModel=function(){return M.getDateRange()}};Aa.CalendarYearInitialDialog=dc;Aa.CalendarQuarterInitialDialog=Bb;Aa.CalendarMonthInitialDialog=Hb;Aa.CalendarDayInitialDialog=Da;Aa.DefaultSelectedDialog=function(){fa.call(this);var M=this,H=this.protectedMethod,L,A,I=this.showDialog;this.showDialog=function(e,d,q){M.setSize(640,480);H.setTitle(k.get("defaultSelectedDialogTitle",
"\u201c#1\u201d\u7684\u9ed8\u8ba4\u9009\u4e2d\u503c").replace("#1",d.getDisplayName()));H.setContentPaneCreator(function(){return J(d,e)});H.setClosingChecker(function(){var z=!0;A.isWaiting()&&(H.getMessageCurtain().showPrompt(k.get("defaultSelectedDialogPrompt1","\u8bbe\u7f6e\u754c\u9762\u672a\u51c6\u5907\u597d\u3002")),z=!1);return z});H.setClosingAction(function(z){var w=null;z&&(w=Ia.createInstance(A.getModelType()),A.applySettingResult(w));q(w)});I();aa(d)};var J=function(e,d){var q=new vb,
z=new Kb;z.setContext(d);L=new Mc;L.setBottomLineVisible(!1);f(e,q,100,k.get("defaultSelectedByIndex","\u7b2c\u4e00\u9879"));f(e,z,100,k.get("defaultSelectedByAppointed","\u6307\u5b9a"));L.setSelectedChangedListener(function(w,B,W){A=W.data("myWrap");A.into()});e=$("<div>");e.append(L.getJqUi());t.layoutCtrlWithLRTB(L.getJqUi(),0,0,null,0,0,null);return e},f=function(e,d,q,z){var w=d.getModelType(),B=e.getDefaultSelected();B&&B.getType()==d.getModelType()||(B=null);e=d.createJqUi(e,B);e.data("myWrap",
d);L.addItem(w,q,e,z)},aa=function(e){var d=e.getDefaultSelected();e=d?d.getType():e.isMultiSelectable()?Ia.TYPE_ByAppointed:Ia.TYPE_ByIndex;L.setSelected(e)}};Aa.ClockFormatDialog=function(){fa.call(this);var M=this,H=this.protectedMethod,L=["yyyy.MM.dd HH:mm:ss","yyyy.MM.dd","HH:mm:ss"],A,I,J,f;(function(){M.setSize(400,300);H.setTitle(k.get("clockFormatString","\u663e\u793a\u683c\u5f0f"));H.setContentPaneCreator(function(){var q=$("<div>");e(q);return q})})();var aa=this.showDialog;this.showDialog=
function(q,z){f=q;H.setClosingAction(function(B){z(B,f)});aa();var w=!1;A.toCheckTheElement(function(B){return B.getUserObject()==q?w=!0:!1});w||(J.setText(f),I.setChecked(!0))};var e=function(q){A=new Qb;A.addChangedListener(function(W,ja){W==I?ja?J.setText(f):f=$.trim(J.getText()):(f=W.getUserObject(),J.setText(""))});for(var z=0,w=0;w<L.length;w++){var B=d(L[w]);A.addElement(B);B.getJqUi().appendTo(q);t.layoutCtrlWithLRTB(B.getJqUi(),0,0,null,z,null,23);z+=30}I=new Oa;A.addElement(I);J=new Ka;
J.getJqUi().on("click",function(W){J.setText(f);I.setChecked(!0)});J.addEditedListener(function(W){f=$.trim(J.getText())});w=new la;w.addStableChild(I,20);w.addStableChild(new ta(k.get("custom","\u81ea\u5b9a\u4e49")));w.addGap(8);w.addActiveChild(J);w.getJqUi().appendTo(q);t.layoutCtrlWithLRTB(w.getJqUi(),0,0,null,z,null,23)},d=function(q){var z=db.formatDate(q),w=new Oa;w.setText(z);w.setUserObject(q);return w}};Aa.CardLookConfigDialog=function(){wb.call(this);var M=this,H=this.protectedMethod,L,
A,I=new Va,J=new ta,f,aa=new cc(k.get("cardlookTabLine","\u8fb9\u6846\u5f62\u72b6")),e=new Ab(k.get("cardlookTabColor","\u8fb9\u6846\u989c\u8272")),d=!1,q=[];this.setCardLookModel=function(oa){L=oa.copyToEdit()};this.setContextStyle=function(oa,za){I.setPageBackground(oa);A=za};this.show=function(oa,za){L.hookBackgroundColor(A);d=!1;M.setSize(960,600);H.setTitle(k.get("cardlookDialogTitle","\u81ea\u5b9a\u4e49\u5361\u7247\u8fb9\u6846")+" -- "+oa);H.getDialogCtrl().setResizeEnabled();H.getDialogCtrl().setFullScreenEnabled();
H.getDialogCtrl().addResizeListener(function(wa,Ib){f.refreshUi();B()});H.setContentPaneCreator(z);H.setClosingAction(function(wa){wa&&(L.validateLightItems(),za(L))});H.setClosingChecker2(function(wa){wa(!0)},function(wa){if(d){var Ib=!1,qc=ib.createFeedbackDialog();qc.setOptionType(ib.OPTION_YES_NO);qc.setMessage(k.get("askAbort","\u662f\u5426\u653e\u5f03\u60a8\u7684\u4fee\u6539\uff1f"));qc.setClosingChecker(function(Lc){Ib=Lc==ib.RETURN_YES;return!0});qc.setClosedAction(function(){wa(Ib)});qc.showDialog()}else wa(!0)},
!0);w();M.showDialog();H.getDialogCtrl().setToolbarVisible(!0);H.initToolbarExportButton("qing-style-cardlook","20230331",W,ja,Gb,mb,function(){return f.getJqUi().parent()});zb()};var z=function(){f=new eb;f.setTabPanes([aa,e]);f.setTabHeadItemHeight(48);f.setTabHeadWidth(100);setTimeout(function(){f.refreshUi();B()},0);var oa=$("<div>");oa.css("border","1px solid #e0e0e0");oa.append(f.getJqUi());oa.append(J.getJqUi());oa.append(I.getJqUi());t.layoutCtrlWithLRTB(f.getJqUi(),0,null,520,0,0,null);t.layoutCtrlWithLRTB(J.getJqUi(),
520,20,null,10,null,30);t.layoutCtrlWithLRTB(I.getJqUi(),520,20,null,40,20,null);return oa},w=function(){var oa={getModel:function(){return L},modified:function(){B();d=!0},addModelChangedListener:function(za){q.push(za)}};aa.hookContext(oa);e.hookContext(oa)},B=function(){J.setText(k.get("preview","\u9884\u89c8"));I.refresh(L)},W=function(oa){return oa.getKeyOfCardlook()},ja=function(){return L.toJsonObject()},Ea=function(oa){L=Ua(oa);B();for(oa=0;oa<q.length;oa++)(0,q[oa])();d=!1},Ua=function(oa){var za=
new Fa;za.fromJsonObject(oa);za.hookBackgroundColor(A);return za},mb=function(oa,za){if(d){var wa=ib.createFeedbackDialog();wa.setOptionType(ib.OPTION_YES_NO);wa.setMessage(k.get("cardlookOverwriteAsker","\u5f53\u524d\u6b63\u5728\u7f16\u8f91\u7684\u72b6\u6001\u5c06\u88ab\u8986\u76d6\uff0c\u662f\u5426\u7ee7\u7eed\uff1f"));wa.setClosingChecker(function(Ib){Ib==ib.RETURN_YES?(Ea(oa),za(!0)):za(!1);return!0});wa.showDialog()}else Ea(oa),za(!0)},Gb=function(oa,za){},zb=function(){H.getDialogCtrl().createToolbarButton(k.get("cardlookImportDemo",
"\u5e94\u7528\u9884\u7f6e\u6837\u5f0f"),function(oa){for(var za=[],wa=[k.get("cardlookDemoLight","\u9002\u7528\u4e8e\u6d45\u8272\u80cc\u666f"),[va,sa,G],k.get("cardlookDemoDark","\u9002\u7528\u4e8e\u6df1\u8272\u80cc\u666f"),[D,l,h,u,U,da,ya]],Ib=0,qc=0;qc<wa.length;qc+=2){var Lc=wa[qc+1],Jc=yc.createSubMenu(wa[qc]);za.push(Jc);for(var Sa=0;Sa<Lc.length;Sa++){var bd=k.get("cardlookDemo","\u793a\u4f8b")+ ++Ib,Vb=Lc[Sa];bd=yc.createActionMenuItem(bd,tb);bd.setUserObject(Vb);Jc.addItemModel(bd)}}H.popupMenu(oa,
za).setItemHoverListener(function(Ob,Yb,uc){if(uc=Yb.getUserObject())Ob?(Ob=Yb.getText(),Yb=JSON.parse(uc),Yb=Ua(Yb),I.refresh(Yb),J.setText(Ob)):B()})},!0)},tb=function(oa){oa=oa.getUserObject();oa=JSON.parse(oa);mb(oa,function(za){!za&&B()})},va='{"edgeN":{"type":"SINGLE_TURN","majorWide":"W1","minorWide":"W5","flip":"H","turnPos1":60,"customMinor":"_2/~;","lightItems":[{"pos":60,"color":"STRONG"}]},"edgeS":{"type":"STRAIGHT","majorWide":"W1","minorWide":"NONE","flip":"NONE","lightItems":[{"pos":60,"color":"STRONG"}]},"edgeW":{"type":"STRAIGHT","majorWide":"W1","minorWide":"NONE","flip":"NONE","lightItems":[{"pos":60,"color":"STRONG"}]},"edgeE":{"type":"STRAIGHT","majorWide":"W1","minorWide":"NONE","flip":"NONE","lightItems":[{"pos":60,"color":"STRONG"}]},"cornerNW":{"type":"LEAN","lineWide":"W1","radius":5},"cornerNE":{"type":"LEAN","lineWide":"W1","radius":10},"cornerSW":{"type":"LEAN","lineWide":"W1","radius":10},"cornerSE":{"type":"LEAN","lineWide":"W1","radius":10},"lineThickness":{"W1":75,"W2":150,"W3":225,"W4":300,"W5":400},"lineColor":{"MAIN":"rgba(61,204,192,1)","STRONG":"rgba(153,217,43,1)"}}',
sa='{"edgeN":{"type":"STRAIGHT","majorWide":"W3","minorWide":"NONE","flip":"NONE","lightItems":[{"pos":50,"color":"STRONG"}]},"edgeS":{"type":"DOUBLE_TURN","majorWide":"W2","minorWide":"NONE","flip":"NONE","turnPos1":20,"turnPos2":80},"edgeW":{"type":"NONE"},"edgeE":{"type":"NONE"},"cornerNW":{"type":"NONE"},"cornerNE":{"type":"NONE"},"cornerSW":{"type":"NONE"},"cornerSE":{"type":"NONE"},"lineThickness":{"W1":75,"W2":150,"W3":225,"W4":300,"W5":200},"lineColor":{"MAIN":"rgba(149,190,255,1)","STRONG":"rgba(255,202,202,1)"}}',
G='{"edgeN":{"type":"SINGLE_TURN","majorWide":"W2","minorWide":"W5","flip":"NONE","turnPos1":40,"titleEnhanced":true,"customMinor":"{#fc9}_6|6"},"edgeS":{"type":"STRAIGHT","majorWide":"W2","minorWide":"NONE","flip":"NONE"},"edgeW":{"type":"STRAIGHT","majorWide":"W2","minorWide":"NONE","flip":"NONE"},"edgeE":{"type":"STRAIGHT","majorWide":"W2","minorWide":"NONE","flip":"BOTH"},"cornerNW":{"type":"NONE"},"cornerNE":{"type":"ROUND","lineWide":"W2","radius":6},"cornerSW":{"type":"NONE"},"cornerSE":{"type":"NONE"},"lineThickness":{"W1":75,"W2":150,"W3":225,"W4":500,"W5":2400},"lineColor":{"MAIN":"rgba(149,190,255,1)"}}',
D='{"edgeN":{"type":"SINGLE_TURN","majorWide":"W2","minorWide":"W5","flip":"NONE","turnPos1":60,"customMinor":";(\\\\5_5)~","lightItems":[{"pos":60,"color":"STRONG"}]},"edgeS":{"type":"STRAIGHT","majorWide":"W2","minorWide":"NONE","flip":"NONE","lightItems":[{"pos":60,"color":"STRONG"}]},"edgeW":{"type":"STRAIGHT","majorWide":"W2","minorWide":"NONE","flip":"NONE","lightItems":[{"pos":60,"color":"STRONG"}]},"edgeE":{"type":"STRAIGHT","majorWide":"W2","minorWide":"NONE","flip":"NONE","lightItems":[{"pos":60,"color":"STRONG"}]},"cornerNW":{"type":"LEAN","lineWide":"W2","radius":5},"cornerNE":{"type":"LEAN","lineWide":"W2","radius":5},"cornerSW":{"type":"LEAN","lineWide":"W2","radius":5},"cornerSE":{"type":"LEAN","lineWide":"W2","radius":5},"lineThickness":{"W1":75,"W2":150,"W3":225,"W4":300,"W5":400},"lineColor":{"MAIN":"rgba(19,61,208,1)","STRONG":"rgba(2,194,250,1)"}}',
l='{"edgeN":{"type":"STRAIGHT","majorWide":"W2","minorWide":"NONE","flip":"NONE","lightItems":[{"pos":60,"color":"STRONG"}]},"edgeS":{"type":"STRAIGHT","majorWide":"W2","minorWide":"NONE","flip":"NONE","lightItems":[{"pos":60,"color":"STRONG"}]},"edgeW":{"type":"STRAIGHT","majorWide":"W2","minorWide":"NONE","flip":"NONE","lightItems":[{"pos":60,"color":"STRONG"}]},"edgeE":{"type":"DOUBLE_TURN","majorWide":"W2","minorWide":"W4","flip":"NONE","turnPos1":50,"turnPos2":90,"customMinor":";/~;","lightItems":[{"pos":60,"color":"STRONG"}]},"cornerNW":{"type":"HARD","lineWide":"W2","radius":5},"cornerNE":{"type":"HARD","lineWide":"W2","radius":5},"cornerSW":{"type":"HARD","lineWide":"W2","radius":5},"cornerSE":{"type":"HARD","lineWide":"W2","radius":5},"lineThickness":{"W1":100,"W2":150,"W3":225,"W4":300,"W5":1000},"lineColor":{"MAIN":"rgba(19,61,208,1)","STRONG":"rgba(2,194,250,1)"}}',
h='{"edgeN":{"type":"STRAIGHT","majorWide":"W1","minorWide":"NONE","flip":"NONE","lightItems":[{"pos":60,"color":"STRONG"}]},"edgeS":{"type":"STRAIGHT","majorWide":"W1","minorWide":"NONE","flip":"NONE","lightItems":[{"pos":60,"color":"STRONG"}]},"edgeW":{"type":"STRAIGHT","majorWide":"W1","minorWide":"W4","flip":"NONE","customMinor":"_15(|2_3)10","lightItems":[{"pos":60,"color":"STRONG"}]},"edgeE":{"type":"STRAIGHT","majorWide":"W1","minorWide":"NONE","flip":"NONE","lightItems":[{"pos":60,"color":"STRONG"}]},"cornerNW":{"type":"HARD","lineWide":"W3","radius":10},"cornerNE":{"type":"HARD","lineWide":"W3","radius":10},"cornerSW":{"type":"HARD","lineWide":"W3","radius":10},"cornerSE":{"type":"HARD","lineWide":"W3","radius":10},"lineThickness":{"W1":100,"W2":150,"W3":225,"W4":500,"W5":1000},"lineColor":{"MAIN":"rgba(19,61,208,1)","STRONG":"rgba(2,194,250,1)"}}',
u='{"edgeN":{"type":"STRAIGHT","majorWide":"W2","minorWide":"NONE","flip":"NONE","lightItems":[{"pos":60,"color":"STRONG"}]},"edgeS":{"type":"STRAIGHT","majorWide":"W2","minorWide":"NONE","flip":"NONE","lightItems":[{"pos":60,"color":"STRONG"}]},"edgeW":{"type":"DOUBLE_TURN","majorWide":"W2","minorWide":"W3","flip":"V","turnPos1":50,"turnPos2":80,"customMinor":"_2/~;;\\\\~_2","lightItems":[{"pos":60,"color":"STRONG"}]},"edgeE":{"type":"DOUBLE_TURN","majorWide":"W2","minorWide":"W3","flip":"H","turnPos1":50,"turnPos2":80,"customMinor":"_2\\\\~;;/~_2","lightItems":[{"pos":60,"color":"STRONG"}]},"cornerNW":{"type":"LEAN","lineWide":"W2","radius":5},"cornerNE":{"type":"LEAN","lineWide":"W2","radius":5},"cornerSW":{"type":"LEAN","lineWide":"W2","radius":5},"cornerSE":{"type":"LEAN","lineWide":"W2","radius":5},"lineThickness":{"W1":100,"W2":150,"W3":225,"W4":300,"W5":1000},"lineColor":{"MAIN":"rgba(19,61,208,1)","STRONG":"rgba(2,194,250,1)"}}',
U='{"edgeN":{"type":"SINGLE_TURN","majorWide":"W2","minorWide":"W5","flip":"NONE","turnPos1":40,"customMinor":";(\\\\5_3)5\\\\20","lightItems":[{"pos":40,"color":"STRONG"}]},"edgeS":{"type":"STRAIGHT","majorWide":"W2","minorWide":"NONE","flip":"NONE","lightItems":[{"pos":60,"color":"STRONG"}]},"edgeW":{"type":"STRAIGHT","majorWide":"W2","minorWide":"NONE","flip":"NONE","lightItems":[{"pos":60,"color":"STRONG"}]},"edgeE":{"type":"SINGLE_TURN","majorWide":"W2","minorWide":"NONE","flip":"NONE","turnPos1":60,"lightItems":[{"pos":60,"color":"STRONG"}]},"cornerNW":{"type":"LEAN","lineWide":"W2","radius":10},"cornerNE":{"type":"LEAN","lineWide":"W2","radius":10},"cornerSW":{"type":"LEAN","lineWide":"W2","radius":10},"cornerSE":{"type":"LEAN","lineWide":"W2","radius":10},"lineThickness":{"W1":100,"W2":150,"W3":225,"W4":300,"W5":500},"lineColor":{"MAIN":"rgba(19,61,208,1)","STRONG":"rgba(2,194,250,1)"}}',
da='{"edgeN":{"type":"DOUBLE_TURN","majorWide":"W2","minorWide":"W5","flip":"V","turnPos1":30,"turnPos2":70,"customMinor":"_~(\\\\4_4)3;;(_4/4)3","lightItems":[{"pos":50,"color":"STRONG"}]},"edgeS":{"type":"STRAIGHT","majorWide":"W2","minorWide":"NONE","flip":"NONE","lightItems":[{"pos":50,"color":"STRONG"}]},"edgeW":{"type":"STRAIGHT","majorWide":"W2","minorWide":"NONE","flip":"NONE","lightItems":[{"pos":50,"color":"STRONG"}]},"edgeE":{"type":"STRAIGHT","majorWide":"W2","minorWide":"NONE","flip":"NONE","lightItems":[{"pos":50,"color":"STRONG"}]},"cornerNW":{"type":"LEAN","lineWide":"W2","radius":6},"cornerNE":{"type":"LEAN","lineWide":"W2","radius":6},"cornerSW":{"type":"LEAN","lineWide":"W2","radius":6},"cornerSE":{"type":"LEAN","lineWide":"W2","radius":6},"lineThickness":{"W1":75,"W2":150,"W3":225,"W4":300,"W5":400},"lineColor":{"MAIN":"rgba(209,19,13,1)","STRONG":"rgba(255,173,182,1)"}}',
ya='{"edgeN":{"type":"SINGLE_TURN","majorWide":"W2","minorWide":"NONE","flip":"NONE","turnPos1":60,"lightItems":[{"pos":50,"color":"STRONG"}]},"edgeS":{"type":"STRAIGHT","majorWide":"W2","minorWide":"NONE","flip":"NONE","lightItems":[{"pos":50,"color":"STRONG"}]},"edgeW":{"type":"SINGLE_TURN","majorWide":"W2","minorWide":"W5","flip":"NONE","turnPos1":80,"customMinor":";{#963}(\\\\5_2)~","lightItems":[{"pos":50,"color":"STRONG"}]},"edgeE":{"type":"DOUBLE_TURN","majorWide":"W2","minorWide":"W4","flip":"NONE","turnPos1":20,"turnPos2":70,"customMinor":";;(O_4)~","lightItems":[{"pos":50,"color":"STRONG"}]},"cornerNW":{"type":"ROUND","lineWide":"W2","radius":4},"cornerNE":{"type":"NONE"},"cornerSW":{"type":"NONE"},"cornerSE":{"type":"ROUND","lineWide":"W2","radius":4},"lineThickness":{"W1":75,"W2":150,"W3":225,"W4":300,"W5":400},"lineColor":{"MAIN":"rgba(255,153,28,1)","STRONG":"rgba(255,224,166,1)"}}'};
Aa.PageTitleBarSurfaceDialog=function(){function M(){ba.call(this);var J=this.protectedMethod,f,aa,e,d;this.setModel=function(q){f=q;J.initRadioButton(q?!0:!1)};this.acceptModel=function(q){q.setBackgroundColor(aa.getColor());q.setSeparaterLineWidth(e.getValue());q.setSeparaterColor(d.getColor())};this.isCustomChecked=function(){return J.isCustomChecked()};this.protectedInitCustomDetailPanel=function(q){if(f){var z=f.getBackgroundColor();var w=f.getSeparaterLineWidth();var B=f.getSepataterColor()}else B=
$a.dip($a.DSB_PAGE_TITLE_BAR),z=B[$a.Key_PageTitleBar_BackgroundColor],w=parseInt(B[$a.Key_PageTitleBar_SeparaterLineWidth]),B=B[$a.Key_PageTitleBar_SeparaterColor];aa=new $c;aa.setDisplayForNull(k.get("colorNull","\u65e0"));aa.setColor(z?z:null);e=new fb;e.setConstraint(0,10,1);e.setValue(w?w:0);d=new $c;d.setDisplayForNull(k.get("colorNull","\u65e0"));d.setColor(B?B:0);z=new ta(k.get("titleBarBackgroundColor","\u80cc\u666f\u989c\u8272"));w=new ta(k.get("titleBarSeparaterLineWidth","\u5206\u9694\u7ebf\u7ebf\u5bbd"));
B=new ta(k.get("titleBarSeparaterColor","\u5206\u9694\u7ebf\u989c\u8272"));q.append(z.getJqUi());q.append(aa.getJqUi());q.append(w.getJqUi());q.append(e.getJqUi());q.append(B.getJqUi());q.append(d.getJqUi());t.layoutCtrlWithLRTB(z.getJqUi(),0,null,140,0,null,23);t.layoutCtrlWithLRTB(aa.getJqUi(),0,null,140,25,null,23);t.layoutCtrlWithLRTB(B.getJqUi(),220,null,140,0,null,23);t.layoutCtrlWithLRTB(d.getJqUi(),220,null,140,25,null,23);t.layoutCtrlWithLRTB(w.getJqUi(),220,null,140,70,null,23);t.layoutCtrlWithLRTB(e.getJqUi(),
220,null,140,95,null,23)}}fa.call(this);var H=this,L=this.protectedMethod,A,I=this.showDialog;this.showDialog=function(J,f){H.setSize(480,320);L.setTitle(k.get("titleBarSurfaceDialogTitle","\u9875\u9762\u6807\u9898\u680f\u6837\u5f0f"));L.setContentPaneCreator(function(){A=new M;A.setModel(J.getSurfaceModel());return A.getJqUi()});L.setClosingAction(function(aa){aa&&(aa=null,A.isCustomChecked()&&(aa=J.createSurfaceModel(),A.acceptModel(aa)),f(aa))});I()}};Aa.CardTopBarTitleLayoutDialog=bb;Aa.PageCardTopBarTitleLayoutDialog=
function(){fa.call(this);var M=this,H=this.protectedMethod,L=new jb;this.setWidget=function(A){var I=new Db;I.setCardTitle(k.get("previewCardTitle","\u5361\u7247\u6807\u9898"));if(A.getCardTopBarCommon()){var J=new ub;J.fromJsonObject(A.getCardTopBarCommon().toJsonObject());I.setCardTopBarCommon(J)}I.hookUsableCardBorderGetter(function(){return A.getCardBorder()});I.hookUsableCardTopBarCommonGetter(function(){return I.getCardTopBarCommon()});I.getCardTopBarCommon()||I.setCardTopBarCommon(new ub);
L.setWidgetInstead(I)};this.show=function(A){M.setSize(960,540);H.setTitle(k.get("cardTitleLayoutDialogTitle","\u5361\u7247\u6807\u9898\u680f\u56fe\u7247")+" -- "+k.get("unifiedInPage","\u9875\u9762\u7edf\u4e00"));H.setContentPaneCreator(function(){return L.createUi()});H.setClosingAction(function(I){I&&A(L.acceptModified())});H.getDialogCtrl().setMinSize(720,400);H.getDialogCtrl().setResizeEnabled();H.getDialogCtrl().setFullScreenEnabled();H.getDialogCtrl().addResizeListener(function(I,J){L.refreshPreviewCard()});
M.showDialog();L.refreshPreviewCard()}};Aa.CardTitleStyleDialog=function(){fa.call(this);var M=this,H=this.protectedMethod,L=new function(){ba.call(this);var J=this.protectedMethod,f=new v;this.setValue=function(aa){J.initRadioButton(aa?!0:!1);f.setSelected(aa)};this.getValue=function(){var aa=J.isCustomChecked()?f.getSelected():null;return aa?aa:null};this.protectedInitCustomDetailPanel=function(aa){aa.append(f.getJqUi());t.layoutCtrlWithLRTB(f.getJqUi(),0,0,null,0,null,23)}},A=new function(){ba.call(this);
var J=this.protectedMethod,f=new fb;this.setValue=function(aa){var e=aa?!0:!1;J.initRadioButton(e);f.setValue(e?aa:12)};this.getValue=function(){return J.isCustomChecked()?f.getValue():null};this.protectedInitCustomDetailPanel=function(aa){f.setConstraint(1,99,1);aa.append(f.getJqUi());t.layoutCtrlWithLRTB(f.getJqUi(),0,0,null,0,null,23)}},I=new function(){ba.call(this);var J=this.protectedMethod,f=new E;this.setValue=function(aa){var e=aa?!0:!1;J.initRadioButton(e);f.getModel().decodeFrom(e?aa:"#808080")};
this.getValue=function(){return J.isCustomChecked()?f.getModel().encodeToHexRgb():null};this.protectedInitCustomDetailPanel=function(aa){f.setColorPool(ec.getColorPool7());aa.append(f.getJqUi());t.layoutCtrlWithLRTB(f.getJqUi(),0,0,null,0,null,23)}};this.setWidget=function(J){L.setValue(J.getTitleFontName());A.setValue(J.getTitleFontSize());I.setValue(J.getTitleColor());H.setTitle(k.get("cardTitleStyleDialogTitle","\u5361\u7247\u6807\u9898\u6837\u5f0f")+" -- "+J.getDisplayName())};this.show=function(J){M.setSize(640,
360);H.setContentPaneCreator(function(){var f=new ta(k.get("labelFontName","\u5b57\u4f53")),aa=new ta(k.get("labelFontSize","\u5b57\u53f7")),e=new ta(k.get("labelColor","\u989c\u8272")),d=$("<div>");d.append(f.getJqUi());d.append(aa.getJqUi());d.append(e.getJqUi());d.append(L.getJqUi());d.append(A.getJqUi());d.append(I.getJqUi());t.layoutCtrl(f.getJqUi(),0,0,140,23);t.layoutCtrl(aa.getJqUi(),200,0,140,23);t.layoutCtrl(e.getJqUi(),400,0,140,23);t.layoutCtrl(L.getJqUi(),0,30,160,100);t.layoutCtrl(A.getJqUi(),
200,30,160,100);t.layoutCtrl(I.getJqUi(),400,30,160,100);return d});H.setClosingAction(function(f){if(f){f=L.getValue();var aa=A.getValue(),e=I.getValue();J(f,aa,e)}});M.showDialog()}};Aa.CardBorderOfImageDialog=function(){fa.call(this);var M=this,H=this.protectedMethod,L=!1,A=new bc,I=new fb,J=new fb,f=new fb,aa=new fb,e,d=$(Qa.createCanvas()),q=[30,30,240,180],z;this.setImage=function(G,D){A.setModel(G);I.setValue(D[0]);J.setValue(D[1]);f.setValue(D[2]);aa.setValue(D[3])};this.show=function(G,D){L=
!1;M.setSize(480,520);H.setTitle(k.get("cardImgBorderDialogTitle","\u81ea\u5b9a\u4e49\u5361\u7247\u8fb9\u6846\uff08\u8d34\u56fe\uff09")+" -- "+G);H.setContentPaneCreator(w);H.setClosingAction(function(l){l&&(l=[I.getValue(),J.getValue(),f.getValue(),aa.getValue()],D(A.getModel(),l))});H.setClosingChecker2(function(l){l(!0)},function(l){if(L){var h=!1,u=ib.createFeedbackDialog();u.setOptionType(ib.OPTION_YES_NO);u.setMessage(k.get("askAbort","\u662f\u5426\u653e\u5f03\u60a8\u7684\u4fee\u6539\uff1f"));
u.setClosingChecker(function(U){h=U==ib.RETURN_YES;return!0});u.setClosedAction(function(){l(h)});u.showDialog()}else l(!0)},!0);M.showDialog();mb(!1)};var w=function(){var G=new ta(k.get("pictureUrl","\u56fe\u7247\u6587\u4ef6")),D=new ta(k.get("cardImgBorderFixedLeft","\u56fa\u5b9a\u5de6")),l=new ta(k.get("cardImgBorderFixedRight","\u56fa\u5b9a\u53f3")),h=new ta(k.get("cardImgBorderFixedTop","\u56fa\u5b9a\u4e0a")),u=new ta(k.get("cardImgBorderFixedBottom","\u56fa\u5b9a\u4e0b")),U=new ta(k.get("cardImgBorderFixedAdjusting",
"\u4f38\u7f29")),da=new ta(k.get("cardImgBorderFixedAdjusting","\u4f38\u7f29"));U.setAlign(ta.ALIGN_CENTER);da.setAlign(ta.ALIGN_RIGHT);A.addActionListener(Ua);A.setCustomPainter(ja);W(I);W(J);W(f);W(aa);e=$("<div>");e.css("color","#c30");var ya=$("<div>");B(ya,G,20,0,400,23);B(ya,A,20,30,400,23);B(ya,D,100,90,80,20);B(ya,I,100,110,60,23);B(ya,U,190,110,80,20);B(ya,l,300,90,80,20);B(ya,J,300,110,60,23);B(ya,h,20,160,80,20);B(ya,f,20,180,60,23);B(ya,da,20,242,60,20);B(ya,u,20,300,80,20);B(ya,aa,20,
320,60,23);ya.append(d);t.layoutCtrl(d,80,133,360,268);ya.append(e);t.layoutCtrl(e,20,60,400,20);return ya},B=function(G,D,l,h,u,U){G.append(D.getJqUi());t.layoutCtrl(D.getJqUi(),l,h,u,U)},W=function(G){G.setConstraint(0,999,1);G.addValueChangedListener(function(D,l,h,u){Ea();zb()},!0)},ja=function(G){return G&&G.getReferenceCustomMap()?k.get("refHasSet","\u5df2\u8bbe\u7f6e"):""},Ea=function(){if(z){var G=z.width,D=z.height,l=I.getValue(),h=J.getValue(),u=f.getValue(),U=aa.getValue();l+h>=G?(G=k.get("cardImgBorderWarning",
"\u201c#1\u201d\u548c\u201c#2\u201d\u7684\u503c\u52a0\u8d77\u6765\u5fc5\u987b\u5c0f\u4e8e#3\u3002").replace("#1",k.get("cardImgBorderFixedLeft","\u56fa\u5b9a\u5de6")).replace("#2",k.get("cardImgBorderFixedRight","\u56fa\u5b9a\u53f3")).replace("#3",k.get("cardImgBorderImageWidth","\u56fe\u7247\u5bbd\u5ea6")),e.text(G)):u+U>=D?(G=k.get("cardImgBorderWarning","\u201c#1\u201d\u548c\u201c#2\u201d\u7684\u503c\u52a0\u8d77\u6765\u5fc5\u987b\u5c0f\u4e8e#3").replace("#1",k.get("cardImgBorderFixedTop","\u56fa\u5b9a\u4e0a")).replace("#2",
k.get("cardImgBorderFixedBottom","\u56fa\u5b9a\u4e0b")).replace("#3",k.get("cardImgBorderImageHeight","\u56fe\u7247\u9ad8\u5ea6")),e.text(G)):e.text("")}},Ua=function(G){var D=G.getModel();D=D?D.getReferenceCustomMap():null;Fb.getWidgetSourceSelector().selectPicture(D,function(l){if(l){var h=xb.createPeer();h.setReferenceCustomMap(l);G.setModel(h);e.text("");mb(!0)}})},mb=function(G){z=null;var D=A.getModel();(D=D?D.getReferenceCustomMap():null)?Fb.getPictureLoader()(D,function(l,h,u){var U=new Image;
U.onload=function(da){z=U;G?Gb():Ea();zb()};U.src=l},function(l){Gb();zb();e.text(k.get("cardImgBorderWarning2","\u627e\u4e0d\u5230\u56fe\u7247\uff1a")+l)}):(Gb(),zb(),e.text(k.get("cardImgBorderWarning1","\u672a\u6307\u5b9a\u56fe\u7247\u3002")))},Gb=function(){var G=Math.min(20,Math.floor((z?z.width:0)/3)),D=Math.min(20,Math.floor((z?z.height:0)/3));I.setValue(G);J.setValue(G);f.setValue(D);aa.setValue(D)},zb=function(){var G=d.prop("clientWidth"),D=d.prop("clientHeight");G=Qa.createContext2d(d[0],
G,D);var l=q[0],h=q[1],u=q[2],U=q[3],da=z?z.width:u;D=z?z.height:U;var ya=da/D,oa=u/U,za=l,wa=h,Ib=u,qc=U;ya>oa?(qc=u/da*D,wa=h+(U-qc)/2):ya<oa&&(Ib=U/D*da,za=l+(u-Ib)/2);z&&G.drawImage(z,0,0,da,D,za,wa,Ib,qc);G.strokeStyle="#000";G.lineWidth=1;G.strokeRect(za,wa,Ib,qc);l=Ib/da;ya=I.getValue()*l;var Lc=J.getValue()*l;oa=f.getValue()*l;var Jc=aa.getValue()*l;U=za;l=za+Ib;h=wa;u=wa+qc;ya=Math.min(l,za+ya);Ib=Math.max(U,za+Ib-Lc);za=Math.min(u,wa+oa);wa=Math.max(h,wa+qc-Jc);G.setLineDash([4,2]);tb(G,
U,ya,Ib,l,h,za,wa,u);G.strokeStyle="#fff";G.lineWidth=.5;tb(G,U,ya+.5,Ib-.5,l,h,za+.5,wa-.5,u);G.setLineDash([]);G.strokeStyle="#808080";G.fillStyle="#808080";G.lineWidth=.5;va(G,U,ya,h-16,12,I);va(G,Ib,l,h-20,16,J);sa(G,h,za,U-16,12,f);sa(G,wa,u,U-20,12,aa);Ib>ya&&(qc=.5*(U+l),Ib=.5*(ya+Ib),G.beginPath(),G.moveTo(qc,0),G.lineTo(Ib,h-4),G.stroke());wa>za&&(qc=.5*(h+u),wa=.5*(za+wa),G.beginPath(),G.moveTo(4,qc),G.lineTo(U-2,wa),G.stroke());z&&(G.beginPath(),G.moveTo(U,u+4),G.lineTo(U,u+30),G.moveTo(l,
u+4),G.lineTo(l,u+30),G.moveTo(U,u+20),G.lineTo(l,u+20),G.stroke(),G.font="12px serif",wa=k.get("cardImgBorderImageWidth","\u56fe\u7247\u5bbd\u5ea6"),qc=G.measureText(wa).width,G.fillText(wa,.5*(U+l-qc),u+36),G.font="14px serif",wa=G.measureText(da).width,G.fillText(da,.5*(U+l-wa),u+50),G.beginPath(),G.moveTo(l+4,h),G.lineTo(l+30,h),G.moveTo(l+4,u),G.lineTo(l+30,u),G.moveTo(l+20,h),G.lineTo(l+20,u),G.stroke(),G.font="12px serif",da=k.get("cardImgBorderImageHeight","\u56fe\u7247\u9ad8\u5ea6"),G.fillText(da,
l+24,.5*(h+u)),G.font="14px serif",G.fillText(D,l+24,.5*(h+u)+16))},tb=function(G,D,l,h,u,U,da,ya,oa){G.beginPath();G.moveTo(l,U);G.lineTo(l,oa);G.moveTo(h,U);G.lineTo(h,oa);G.moveTo(D,da);G.lineTo(u,da);G.moveTo(D,ya);G.lineTo(u,ya);G.stroke()},va=function(G,D,l,h,u,U){U=U.getJqUi();U=U.prop("offsetLeft")-d.prop("offsetLeft")+.5*U.prop("offsetWidth");G.beginPath();G.moveTo(D,h+u);G.lineTo(D,h);G.lineTo(l,h);G.lineTo(l,h+u);G.moveTo(D+.5*(l-D),h);G.lineTo(U,0);G.stroke()},sa=function(G,D,l,h,u,U){U=
U.getJqUi();U=U.prop("offsetTop")-d.prop("offsetTop")+U.prop("offsetHeight");G.beginPath();G.moveTo(h+u,D);G.lineTo(h,D);G.lineTo(h,l);G.lineTo(h+u,l);G.moveTo(h,D+.5*(l-D));G.lineTo(0,U);G.stroke()}};Aa.OverallCutPasteDialog=function(){function M(J,f){this.getWannaWidget=function(){return J};this.getWannaContainer=function(){return f}}fa.call(this);var H=this,L=this.protectedMethod,A=new function(){g.call(this);var J=this.protectedMethod,f,aa,e={};this.setPage=function(D){d().setRoot(Ua(D));q().setRoot(mb(D));
J.getButtonDeselect().setEnabled(!1)};this.getWanna=function(){var D=[],l;for(l in e){var h=e[l];h=[h.getWannaWidget(),h.getWannaContainer()];D.push(h)}return D};this.protectedCreateLeftJqTitle=function(){return(new ta(k.get("overallCutPasteSrc","\u7ec4\u4ef6"))).getJqUi()};this.protectedCreateRightJqTitle=function(){return(new ta(k.get("overallCutPasteDest","\u79fb\u52a8\u5230\u5bb9\u5668"))).getJqUi()};this.protectedGetLeftCtrl=function(){return d()};this.protectedGetRightCtrl=function(){return q()};
this.protectedSelect=function(D){D?Gb():zb()};var d=function(){f||(f=z(),f.setNodePainter(B));return f},q=function(){aa||(aa=z(),aa.setNodePainter(W),aa.addSelectedListener(function(D){D=w(D);D=(null==D?null:D.getUserObject())instanceof M;J.getButtonSelect().setEnabled(!D);J.getButtonDeselect().setEnabled(D)}));return aa},z=function(){var D=new Pa;D.getJqUi().css({border:"1px solid #ddd",color:"#666"});D.setNodeSelectingStateUpdater(function(l,h,u){Ea(l,u)});return D},w=function(D){D=D.getSelecteds();
return 0==D.length?null:D[0]},B=function(D,l){l=l.getUserObject();ja(D,l,l.getDisplayName())},W=function(D,l){l=l.getUserObject();if(l instanceof M){l=l.getWannaWidget();var h=l.getDisplayName();l.isContainer()&&0<l.getWidgetCount()&&(h+=k.get("overallCutPasteWithDescendents","\uff08\u53ca\u5176\u5b50\u8282\u70b9\uff09"));D.css({"box-shadow":"0 0 0 1px #808080 inset"})}else h=l.getDisplayName();ja(D,l,h)},ja=function(D,l,h){l=qa.getInstance(l.getWidgetTypeName()).getIconFileName()+"_min";D.text(h);
D.css("padding-left","18px");h=$("<div>");h.data("myIconName",l);h.appendTo(D);t.layoutCtrl(h,0,3,16,16);Ea(D,!1)},Ea=function(D,l){D=D.children().first();var h=D.data("myIconName");Ya.background(D,h+(l?"_selected":""))},Ua=function(D){if(D.isContainer()){var l=new Pa.BranchNode(D);l.setExpanded(!0);for(var h=0;h<D.getWidgetCount();h++)l.addChild(Ua(D.getWidget(h)))}else l=new Pa.LeafNode(D);return l},mb=function(D){var l=new Pa.BranchNode(D);l.setExpanded(!0);for(var h=0;h<D.getWidgetCount();h++){var u=
D.getWidget(h);u.isContainer()&&l.addChild(mb(u))}return l},Gb=function(){var D=w(d());if(null==D)I(k.get("overallCutPastePrompt1","\u5de6\u4fa7\u672a\u9009\u62e9\u5c06\u8981\u79fb\u52a8\u7684\u7ec4\u4ef6\u3002"));else{var l=D.getUserObject(),h=w(q());if(null==h)I(k.get("overallCutPastePrompt2","\u53f3\u4fa7\u672a\u9009\u62e9\u76ee\u6807\u5bb9\u5668\u3002"));else{var u=h.getUserObject();if(l.getWidgetTypeName()==ea.WidgetType_Page||l.getWidgetTypeName()==ea.WidgetType_PageTitleBar||l.getWidgetTypeName()==
ea.WidgetType_Unknown)I(k.get("overallCutPastePrompt3","\u201c#1\u201d\u662f\u4e0d\u80fd\u79fb\u52a8\u7684\u7ec4\u4ef6\u3002").replace("#1",l.getDisplayName()));else if(l.getParent()==u)I(k.get("overallCutPastePrompt4","\u5bb9\u5668\u6ca1\u6709\u6539\u53d8\u3002"));else if(l.isContainer()&&l.isDescendentsContain(u)||l==u)I(k.get("overallCutPastePrompt5","\u4e0d\u80fd\u79fb\u52a8\u5230\u81ea\u5df1\u6216\u81ea\u5df1\u7684\u4e0b\u7ea7\u7ec4\u4ef6\u4e4b\u4e0b\u3002"));else{var U=[];if(u.isCanContain(l,
U)&&l.isCanBeContained(u,U)){if(l.isContainer()){if(tb(l)){D=k.get("overallCutPastePrompt6","\u201c#1\u201d\u6216\u5176\u4e0b\u7ea7\u5df2\u4f5c\u4e3a\u76ee\u6807\u5bb9\u5668\u63a5\u6536\u4e86\u7ec4\u4ef6\uff0c\u672c\u6b21\u4e0d\u80fd\u79fb\u52a8\u3002");I(D.replace("#1",l.getDisplayName()));return}if(va(l)){D=k.get("overallCutPastePrompt7","\u201c#1\u201d\u672c\u6b21\u4e0d\u80fd\u79fb\u52a8\uff0c\u56e0\u4e3a\u5b83\u7684\u4e0b\u7ea7\u7ec4\u4ef6\u5df2\u51c6\u5907\u79fb\u52a8\u3002");I(D.replace("#1",
l.getDisplayName()));return}}U=sa(D);u=new M(l,u);e[l.getName()]=u;d().removeChild(D.getParent(),D);d().setSelecteds(U?[U]:null);q().addChild(h,new Pa.LeafNode(u));l.isContainer()&&q().getRoot().visiting(function(da){return da.getUserObject()==l?(q().removeChild(da.getParent(),da),!0):!1});q().expandToNode(h)}else D=U.join(" "),I(D)}}}},zb=function(){var D=w(q()),l=sa(D),h=D.getUserObject().getWannaWidget();delete e[h.getName()];q().removeChild(D.getParent(),D);d().getRoot().visiting(function(u){if(u.getUserObject()==
h.getParent()){var U=Ua(h),da=G(u,U);d().addChild(u,U,da);d().setSelecteds([U]);d().expandToNode(U);d().scrollSelectedToVisible();l?q().setSelecteds([l]):(q().setSelecteds(null),J.getButtonSelect().setEnabled(!0),J.getButtonDeselect().setEnabled(!1));return!0}return!1});h.isContainer()&&q().getRoot().visiting(function(u){if(u.getUserObject()==h.getParent()){var U=mb(h),da=G(u,U);q().addChild(u,U,da);return!0}return!1})},tb=function(D){for(var l in e){var h=e[l];if(D==h.getWannaContainer()||D.isDescendentsContain(h.getWannaContainer()))return!0}return!1},
va=function(D){for(var l in e)if(D.isDescendentsContain(e[l].getWannaWidget()))return!0;return!1},sa=function(D){for(var l=!1,h=null,u=D.getParent(),U=u.getChildCount()-1;0<=U;U--){var da=u.getChild(U);da==D?l=!0:h=da;if(l&&null!=h)break}return h},G=function(D,l){var h=function(ya,oa){for(var za=0;za<ya.getWidgetCount();za++)if(ya.getWidget(za)==oa)return za;return Infinity},u=D.getUserObject();l=l.getUserObject();l=h(u,l);for(var U=0;U<D.getChildCount();U++){var da=D.getChild(U);da=h(u,da.getUserObject());
if(l<da)break}return U}};this.show=function(J,f){H.setSize(720,560);L.setTitle(k.get("overallCutPaste","\u8de8\u5bb9\u5668\u79fb\u52a8\u7ec4\u4ef6"));L.setContentPaneCreator(function(){return A.getJqUi()});L.setClosingAction(function(aa){aa&&(aa=A.getWanna(),0<aa.length&&f(aa))});L.getDialogCtrl().setResizeEnabled();L.getDialogCtrl().setFullScreenEnabled();L.getDialogCtrl().addResizeListener(function(aa,e){A.relayout()});H.showDialog();A.relayout();A.setPage(J)};var I=function(J){L.getMessageCurtain().showPrompt(J)}};
Aa.OverallCommunicationDialog=function(){function M(pb,Ma,nb){var ac,zc;this.getLeftTreeNode=function(){return pb};this.getRightTreeNode=function(){return Ma};this.getBizModel=function(){return nb};this.hookEndPoints=function(ic,Oc){ac=ic;zc=Oc};this.getEndPoint1=function(){return ac};this.getEndPoint2=function(){return zc}}fa.call(this);var H=this,L=this.protectedMethod,A,I,J=2,f=10,aa=10,e,d,q,z,w,B,W,ja,Ea,Ua={};this.show=function(pb){A=pb;I=pb.getDashboardModel().getPage();J=parseInt(sessionStorage.getItem("q.dsb.OverallCommunication.type"))||
2;f=parseInt(sessionStorage.getItem("q.dsb.OverallCommunication.srcView"))||10;aa=parseInt(sessionStorage.getItem("q.dsb.OverallCommunication.destView"))||10;H.setSize(800,600);L.setTitle(k.get("overallAffecting","\u7ec4\u4ef6\u5173\u7cfb\u89c6\u56fe"));L.setFooterPaneCreator(null);L.setContentPaneCreator(function(){e=new ta("Src");d=new ta("Dest");q=l();z=l();W=$("<div>");W.append($(Qa.createCanvas()));W.on("click",bd);W.on("mousemove",Sa);B=$("<div>");B.css({color:"#666","text-align":"center"});
w=new Bc;w.addActionListener(Yb);Ob();var Ma=$("<div>");Ma.append(w.getJqUi());Gb();var nb=e.getJqUi();t.layoutCtrlWithLRTB(nb,0,null,"40%",0,null,20);Ma.append(nb);nb=d.getJqUi();t.layoutCtrlWithLRTB(nb,null,0,"40%",0,null,20);Ma.append(nb);nb=q.getJqUi();t.layoutCtrlWithLRTB(nb,0,null,"40%",20,60,null);Ma.append(nb);nb=z.getJqUi();t.layoutCtrlWithLRTB(nb,null,0,"40%",20,60,null);Ma.append(nb);nb=W;t.layoutCtrlWithLRTB(nb,"40%","40%",null,20,60,null);Ma.append(nb);nb=B;t.layoutCtrlWithLRTB(nb,0,
0,null,null,2,34);Ma.append(nb);return Ma});L.setClosingAction(function(Ma){mb()});L.getDialogCtrl().setResizeEnabled();L.getDialogCtrl().setFullScreenEnabled();L.getDialogCtrl().addResizeListener(function(Ma,nb){Lc()});L.getDialogCtrl().createToolbarButton(k.get("overallAffectingType","\u7c7b\u522b"),zb);L.getDialogCtrl().createToolbarButton(k.get("overallAffectingSrcView","\u5de6\u4fa7\u663e\u793a"),tb,!0);L.getDialogCtrl().createToolbarButton(k.get("overallAffectingDestView","\u53f3\u4fa7\u663e\u793a"),
va);L.getDialogCtrl().createToolbarButton(k.get("quit","\u9000\u51fa"),function(Ma){mb();L.destroy()},!0);H.showDialog();L.getDialogCtrl().setToolbarVisible(!0);h()};var mb=function(){sessionStorage.setItem("q.dsb.OverallCommunication.type",J);sessionStorage.setItem("q.dsb.OverallCommunication.srcView",f);sessionStorage.setItem("q.dsb.OverallCommunication.destView",aa)},Gb=function(){var pb=1==J?"":0,Ma=1==J?0:"";t.layoutCtrlWithLRTB(w.getJqUi(),pb,Ma,"40%",null,38,20)},zb=function(pb){var Ma=function(ac,
zc){return yc.createRadio(D(ac),"type",J==ac,function(ic){J=ac;h()})},nb=new Gc;nb.addItemModel(Ma(1));nb.addItemModel(Ma(2));nb.addItemModel(Ma(3));G(pb,nb)},tb=function(pb){sa(pb,function(Ma,nb){return yc.createRadio(nb,"srcView",f==Ma,function(ac){f=Ma;u()})})},va=function(pb){sa(pb,function(Ma,nb){return yc.createRadio(nb,"destView",aa==Ma,function(ac){aa=Ma;u()})})},sa=function(pb,Ma){var nb=Ma(10,k.get("overallAffectingViewAll","\u5168\u90e8\u7ec4\u4ef6"));Ma=Ma(11,k.get("overallAffectingViewConnected",
"\u5df2\u8fde\u63a5\u7684\u7ec4\u4ef6"));var ac=new Gc;ac.addItemModel(nb);ac.addItemModel(Ma);G(pb,ac)},G=function(pb,Ma){var nb=$(pb.currentTarget);pb=nb.parent();var ac=pb.prop("clientHeight");nb=nb.prop("offsetLeft");var zc=new yc;zc.setModel(Ma);zc.show(pb,nb,ac,null,!0)},D=function(pb){switch(pb){case 1:return k.get("overallAffectingFilterSource","\u7b5b\u9009\u5668\u5907\u9009\u503c");case 2:return k.get("affectingGroupTitle","\u8054\u52a8\uff1a")+k.get("affectedTarget","\u4f5c\u7528\u4e8e");
case 3:return k.get("affectingGroupTitle","\u8054\u52a8\uff1a")+k.get("tabSwitch","\u9875\u7b7e\u5207\u6362");default:return null}},l=function(){var pb=new Pa;pb.getJqUi().css({"box-sizing":"border-box",border:"1px solid #ddd",color:"#666"});pb.getJqUi().on("scroll",function(Ma){Lc()});pb.addExpandedListener(function(Ma,nb){Lc()});pb.setNodePainter(ya);pb.setNodeSelectingStateUpdater(function(Ma,nb,ac){oa(Ma,ac)});pb.addSelectedListener(function(Ma,nb){Ea=null;var ac=Ma==q?nb:q.getSelecteds()[0];
Ma=Ma==q?z.getSelecteds()[0]:nb;if(ac&&Ma)for(nb=0;nb<ja.length;nb++){var zc=ja[nb];if(zc.getLeftTreeNode()==ac&&zc.getRightTreeNode()==Ma){Ea=zc;break}}Ob();Lc();uc()});return pb},h=function(){1==J?(e.setText(k.get("overallAffectingSrcTitleA","\u5907\u9009\u503c\u6765\u6e90\u7ec4\u4ef6")),d.setText(k.get("overallAffectingDestTitleA","\u9700\u8981\u5907\u9009\u503c\u7684\u7b5b\u9009\u5668"))):2==J?(e.setText(k.get("overallAffectingSrcTitleB","\u8054\u52a8\u6e90\u7ec4\u4ef6")),d.setText(k.get("overallAffectingDestTitleB1",
"\u8054\u52a8\u201c\u4f5c\u7528\u4e8e\u201d\u76ee\u6807\u7ec4\u4ef6"))):3==J&&(e.setText(k.get("overallAffectingSrcTitleB","\u8054\u52a8\u6e90\u7ec4\u4ef6")),d.setText(k.get("overallAffectingDestTitleB2","\u8054\u52a8\u201c\u9875\u7b7e\u5207\u6362\u201d\u76ee\u6807\u7ec4\u4ef6")));Gb();u()},u=function(){var pb=[],Ma={},nb={};1==J?za(Ma,nb,pb):2==J?wa(Ib,Ma,nb,pb):3==J&&wa(qc,Ma,nb,pb);Ma=11==f?Ma:null;nb=11==aa?nb:null;q.setRoot(da(I,Ma));z.setRoot(da(I,nb));U(pb)},U=function(pb){var Ma={},nb={};
q.getRoot().visiting(function(Pc){var fd=Pc.getUserObject().getName();Ma[fd]=Pc});z.getRoot().visiting(function(Pc){var fd=Pc.getUserObject().getName();nb[fd]=Pc});Ea=null;ja=[];for(var ac=0;ac<pb.length;ac++){var zc=pb[ac],ic=zc[0],Oc=zc[1];ja.push(new M(ic?Ma[ic]:null,Oc?nb[Oc]:null,zc[2]))}0==ja.length&&L.getMessageCurtain().showPrompt(k.get("overallAffectingPromptNoLink","\u201c#1\u201d\u672a\u53d1\u73b0\u4efb\u4f55\u7ec4\u4ef6\u5173\u7cfb\u3002").replace("#1",D(J)));Ob();Lc();uc()},da=function(pb,
Ma){var nb=null;if(pb.isContainer()){nb=new Pa.BranchNode(pb);nb.setExpanded(!0);for(var ac=0;ac<pb.getWidgetCount();ac++){var zc=pb.getWidget(ac);zc=da(zc,Ma);null!=zc&&nb.addChild(zc)}0==nb.getChildCount()&&Ma&&!Ma[pb.getName()]&&pb.getWidgetTypeName()!=ea.WidgetType_Page&&(nb=null)}else if(!Ma||Ma[pb.getName()])nb=new Pa.LeafNode(pb);return nb},ya=function(pb,Ma){var nb=Ma.getUserObject();Ma=qa.getInstance(nb.getWidgetTypeName()).getIconFileName()+"_min";pb.text(nb.getDisplayName());pb.css("padding-left",
"18px");nb=$("<div>");nb.data("myIconName",Ma);nb.appendTo(pb);t.layoutCtrl(nb,0,3,16,16);oa(pb,!1)},oa=function(pb,Ma){pb=pb.children().first();var nb=pb.data("myIconName");Ya.background(pb,nb+(Ma?"_selected":""))},za=function(pb,Ma,nb){I.traversalDescendents(function(ac){var zc=null;ac.isInstanceOf(ea.WidgetSuperType_DiscreteItemFilter)?zc=ac.getFilterSource():ac.getWidgetTypeName()==ea.WidgetType_OneTabbed&&ac.getDurationMode().getType()==rc.TYPE_ByData&&(zc=ac.getDurationMode().getFilterSource());
if(zc&&zc.getType()==ha.TYPE_VisualWidget){ac=ac.getName();Ma[ac]=!0;var ic=zc.getSourceWidgetName();ic&&(pb[ic]=!0);nb.push([ic,ac,zc])}})},wa=function(pb,Ma,nb,ac){I.traversalDescendents(function(zc){if(zc.isInstanceOf(ea.WidgetSuperType_Text)){var ic=zc.getPredefinedTextFragments();if(ic)for(var Oc=0;Oc<ic.getFragmentCount();Oc++){var Pc=ic.getFragment(Oc).getAffectedTargets();Pc&&pb(zc,Pc,Ma,nb,ac)}}else zc.isInstanceOf(ea.WidgetSuperType_FilterSimilary)&&(Pc=zc.getAffectedTargets())&&pb(zc,Pc,
Ma,nb,ac)})},Ib=function(pb,Ma,nb,ac,zc){pb=pb.getName();for(var ic=0;ic<Ma.getItemCount();ic++){var Oc=Ma.getItem(ic),Pc=Oc.getType();if(Pc==ea.AffectedType_BindField||Pc==ea.AffectedType_Param)Pc=Oc.getTargetWidgetName(),nb[pb]=!0,Pc&&(ac[Pc]=!0),zc.push([pb,Pc,Oc])}},qc=function(pb,Ma,nb,ac,zc){pb=pb.getName();for(var ic=0;ic<Ma.getItemCount();ic++){var Oc=Ma.getItem(ic);if(Oc.getType()==ea.AffectedType_Tab){var Pc=Oc.getTargetWidgetName();if(0<=Oc.getTabIndex()){var fd=I.searchWidgetByName(Pc);
Pc=null;fd&&Oc.getTabIndex()<fd.getWidgetCount()&&(Pc=fd.getWidget(Oc.getTabIndex()).getName())}nb[pb]=!0;Pc&&(ac[Pc]=!0);zc.push([pb,Pc,Oc])}}},Lc=function(){var pb={};q.searchAllNodeUi(function(Tc,nd){pb[Tc.getUserObject().getName()]=nd;nd.css("box-shadow","")});var Ma={};z.searchAllNodeUi(function(Tc,nd){Ma[Tc.getUserObject().getName()]=nd;nd.css("box-shadow","")});var nb=W.children().first(),ac=W.prop("offsetWidth"),zc=W.prop("offsetHeight");nb.css({width:ac,height:zc});nb=Qa.createContext2d(nb[0],
ac,zc);nb.textBaseline="middle";nb.fillStyle="#999";zc=-q.getJqUi().prop("scrollTop");for(var ic=-z.getJqUi().prop("scrollTop"),Oc=0;Oc<ja.length;Oc++){var Pc=ja[Oc];nb.strokeStyle=Ea==Pc?"#666":"#999";nb.lineWidth=Ea==Pc?2:.5;nb.setLineDash([]);var fd=0,od=ac,hd=null,id=null,pd=Pc.getLeftTreeNode(),kd=Pc.getRightTreeNode();pd&&(hd=pb[pd.getUserObject().getName()],hd||(hd=Jc(pb,pd),nb.setLineDash([4,4])),hd.css("box-shadow","0 0 0 1px #f0f0f0"),hd=zc+hd.prop("offsetTop")+12);kd&&(id=Ma[kd.getUserObject().getName()],
id||(id=Jc(Ma,kd),nb.setLineDash([4,4])),id.css("box-shadow","0 0 0 1px #f0f0f0"),id=ic+id.prop("offsetTop")+12);pd||(fd=Math.round(.8*ac),hd=id,nb.fillText("?",fd-16,hd));kd||(od=Math.round(.2*ac),id=hd,nb.fillText("?",od+4,id));Pc.hookEndPoints([fd,hd],[od,id]);nb.beginPath();nb.moveTo(fd,hd);nb.lineTo(od,id);nb.stroke()}},Jc=function(pb,Ma){do{Ma=Ma.getParent();var nb=pb[Ma.getUserObject().getName()]}while(!nb);return nb},Sa=function(pb){pb=Vb(pb);W.css("cursor",pb?"pointer":"")},bd=function(pb){if(Ea=
Vb(pb))pb=Ea.getLeftTreeNode(),q.setSelecteds(pb?[pb]:[]),pb&&q.expandToNode(pb),pb&&q.scrollSelectedToVisible(),pb=Ea.getRightTreeNode(),z.setSelecteds(pb?[pb]:[]),pb&&z.expandToNode(pb),pb&&z.scrollSelectedToVisible();Ob();Lc();uc()},Vb=function(pb){pb=t.getCurrentTargetPosition(pb);for(var Ma=65535,nb=null,ac=0;ac<ja.length;ac++){var zc=ja[ac];var ic=zc;var Oc=pb[0];var Pc=pb[1],fd=ic.getEndPoint1()[0],od=ic.getEndPoint1()[1],hd=ic.getEndPoint2()[0];ic=ic.getEndPoint2()[1];if(Oc<fd-20||Oc>hd+20||
Pc<Math.min(od,ic)-20||Pc>Math.max(od,ic)+20)Oc=Infinity;else{var id=ic-od,pd=fd-hd;Oc=Math.abs((id*Oc+pd*Pc+(od*hd-fd*ic))/Math.sqrt(id*id+pd*pd))}6>Oc&&Oc<Ma&&(Ma=Oc,nb=zc)}return nb},Ob=function(){var pb="",Ma=null;Ea&&(pb=Ea.getLeftTreeNode(),Ma=Ea.getRightTreeNode(),Ma=(1==J?Ma:pb).getUserObject(),pb=k.get("overallAffectingToSelectWidget","\u5728\u8bbe\u8ba1\u533a\u9009\u4e2d\u201c#1\u201d").replace("#1",Ma.getDisplayName()));w.setText(pb);w.setUserObject(Ma);w.getJqUi().css("display",Ma?"":
"none")},Yb=function(pb){pb=w.getUserObject();A.selectWidget(pb);L.getMessageCurtain().showSuccess(k.get("overallAffectingPromptWidgetSelected","\u5df2\u5728\u8bbe\u8ba1\u533a\u9009\u4e2d\u201c#1\u201d\u3002").replace("#1",pb.getDisplayName()))},uc=function(){Cc(!1);var pb="";if(Ea){var Ma=Ea.getBizModel();1==J?pb=cd(Ma):2==J&&Ma.getType()==ea.AffectedType_BindField?pb=Vc(Ma,function(nb){var ac=Ma.getMetaFieldFullName();if(ac){var zc=nb.getOriginatedExecutingTag();zc?(nb=k.get("overallAffectingDetailBindField",
"\u76ee\u6807"),nb=dd(nb,zc,ac)):(nb=k.get("overallAffectingDetailMissingDestTag","\u672a\u627e\u5230\u76ee\u6807\u7ec4\u4ef6\u7684\u6570\u636e\u6765\u6e90\u3002"),Cc(!0))}else nb=k.get("overallAffectingDetailNoBindField","\u672a\u7ed1\u5b9a\u5b57\u6bb5\u3002"),Cc(!0);return nb}):2==J&&Ma.getType()==ea.AffectedType_Param?pb=Vc(Ma,function(nb){var ac=Ma.getParamName();ac?(nb=k.get("overallAffectingDetailParamName","\u53c2\u6570\u540d\u79f0\u201c#1\u201d\u3002"),nb=nb.replace("#1",ac)):(nb=k.get("overallAffectingDetailNoParamName",
"\u53c2\u6570\u672a\u586b\u5199\u540d\u79f0\u3002"),Cc(!0));return nb}):3==J&&(pb=Vc(Ma,function(nb){var ac=Ma.getTabIndex();ac=0>ac?k.get("overallAffectingDetailTabByValue","\u6309\u9009\u4e2d\u503c\u5207\u6362\u5230\u201c#1\u201d\u7684\u9875\u7b7e\u3002"):k.get("overallAffectingDetailTabByIndex","\u56fa\u5b9a\u5207\u6362\u5230\u201c#1\u201d\u7684\u7b2c#2\u4e2a\u9875\u7b7e\u3002").replace("#2",ac+1);return ac=ac.replace("#1",nb.getDisplayName())}))}Sc(pb)},Sc=function(pb){var Ma=pb,nb=pb.indexOf("${"),
ac=pb.indexOf("}$");0<=nb&&nb<ac&&(Ma="...",B.data("myText",pb));B.empty();B.data("myWarning")&&(pb=Rc.createWarning(),pb.css("display","inline-block"),B.append(pb));pb=$("<span>");pb.text(Ma);B.append(pb)},Cc=function(pb){B.data("myWarning",pb)},Hc=function(pb,Ma){return(pb=pb.searchMetaField(Ma))?pb.getDisplayName():null},Nc=function(pb,Ma){var nb=Ua[pb];if(nb)return Hc(nb,Ma);var ac="T"+Math.random();nb=A.createFacade(function(zc){var ic=new T;zc&&ic.fromJsonObject(zc);Ua[pb]=ic;zc=Hc(ic,Ma);if(ic=
B.data("myText")){var Oc="${"+ac+"}$";0<=ic.indexOf(Oc)&&(ic=ic.replace(Oc,zc?zc:"?"),!zc&&Cc(!0),Sc(ic))}});nb.setShowBlocking(!1);nb.getWidgetBoundMeta(pb);return"${"+ac+"}$"},dd=function(pb,Ma,nb){(Ma=Nc(Ma,nb))?pb+=k.get("overallAffectingDetailField","\u5b57\u6bb5[#1]\u3002").replace("#1",Ma):(pb+=k.get("overallAffectingDetailFieldNotFound","\u627e\u4e0d\u5230\u5b57\u6bb5[#1]\u3002").replace("#1",nb),Cc(!0));return pb},cd=function(pb){var Ma=Ea.getRightTreeNode().getUserObject(),nb=Ma.getWidgetTypeName()==
ea.WidgetType_OneTabbed?k.get("overallAffectingDetailSlideshowSrc","\u201c#1\u201d\u8f6e\u64ad\u6570\u636e\u9879\u6765\u6e90\u4e8e\u201c#2\u201d\u3002"):k.get("overallAffectingDetailFilterSource","\u201c#1\u201d\u5907\u9009\u503c\u6765\u6e90\u4e8e\u201c#2\u201d\u3002");nb=nb.replace("#1",Ma.getDisplayName());if(Ma=pb.getSourceWidgetName())if(Ma=I.searchWidgetByName(Ma))if(nb=nb.replace("#2",Ma.getDisplayName()),Ma=Ma.getExecutingTag()){var ac=pb.getMetaFieldFullName();ac?nb=dd(nb,Ma,ac):(nb+=k.get("overallAffectingDetailNoBindField",
"\u672a\u7ed1\u5b9a\u5b57\u6bb5\u3002"),Cc(!0));if(ac=pb.getDisplayMetaFieldFullName())nb+=k.get("overallAffectingDetailDisplayField","\u663e\u793a\u503c"),nb=dd(nb,Ma,ac);if(ac=pb.getOrderByMetaFieldFullName())nb+=k.get("overallAffectingDetailSortingField","\u6392\u5e8f\u4f9d\u636e"),nb=dd(nb,Ma,ac)}else nb+=k.get("overallAffectingDetailMissingSrcTag","\u672a\u627e\u5230\u5907\u9009\u503c\u6765\u6e90\u7ec4\u4ef6\u7684\u6570\u636e\u6765\u6e90\u3002"),Cc(!0);else nb=nb.replace("#2","?"),nb+=k.get("overallAffectingDetailMissingSrcWidget",
"\u6765\u6e90\u7ec4\u4ef6\u5df2\u88ab\u5220\u9664\u3002"),Cc(!0);else nb=nb.replace("#2","?"),nb+=k.get("overallAffectingDetailNoSrcWidget","\u672a\u8bbe\u7f6e\u6765\u6e90\u7ec4\u4ef6\u3002"),Cc(!0);return nb},Vc=function(pb,Ma){var nb=Ea.getLeftTreeNode().getUserObject(),ac=nb.getWidgetTypeName()==ea.WidgetType_OneTabbed?k.get("overallAffectingDetailSlideshowDest","\u201c#1\u201d\u8f6e\u64ad\u8054\u52a8\u201c#2\u201d\u3002"):k.get("overallAffectingDetailAffection","\u201c#1\u201d\u8054\u52a8\u201c#2\u201d\u3002");
ac=ac.replace("#1",nb.getDisplayName());(pb=pb.getTargetWidgetName())?(pb=I.searchWidgetByName(pb))?(ac=ac.replace("#2",pb.getDisplayName()),ac+=Ma(pb)):(ac=ac.replace("#2","?"),ac+=k.get("overallAffectingDetailMissingDestWidget","\u76ee\u6807\u7ec4\u4ef6\u5df2\u88ab\u5220\u9664\u3002"),Cc(!0)):(ac=ac.replace("#2","?"),ac+=k.get("overallAffectingDetailNoDestWidget","\u672a\u8bbe\u7f6e\u8054\u52a8\u76ee\u6807\u7ec4\u4ef6\u3002"),Cc(!0));return ac}};Aa.PerformanceSettingDialog=function(){fa.call(this);
var M=this,H=this.protectedMethod,L;this.show=function(aa,e){L=aa.getRunningMode();!L&&(L=ea.RunningMode_Normal);M.setSize(720,450);H.setTitle(k.get("performanceLab","\u6027\u80fd\u5b9e\u9a8c\u5ba4"));H.setContentPaneCreator(A);H.setClosingAction(function(d){d&&(L==ea.RunningMode_Normal?null:L)!=aa.getRunningMode()&&e(L)});M.showDialog()};var A=function(){var aa=k.get("runningModeTitle","\u6570\u636e\u6597\u65b9\u3001\u6570\u636e\u5206\u6790\u7ec4\u4ef6\u7684\u6267\u884c\u6a21\u5f0f #1");aa=aa.replace("#1",
k.get("effectiveAfterPreviewOrPub","\uff08\u9884\u89c8\u6216\u53d1\u5e03\u540e\u751f\u6548\uff09"));aa=new ta(aa);var e=new Qb;e.addChangedListener(function(ja,Ea){Ea&&(L=ja.getUserObject())});var d=J(e,ea.RunningMode_Normal,k.get("runningMode1","\u666e\u901a\u6a21\u5f0f")),q=f(k.get("runningMode1Desc","\u5168\u90e8\u7ec4\u4ef6\u65e0\u5dee\u522b\u6267\u884c\u3002")),z=J(e,ea.RunningMode_Auto,k.get("runningMode2","\u667a\u80fd\u6a21\u5f0f")),w=f(k.get("runningMode2Desc","\u53ef\u89c1\u9875\u7b7e\u4e2d\u7684\u7ec4\u4ef6\u4f18\u5148\u6267\u884c\uff0c\u4e0d\u53ef\u89c1\u9875\u7b7e\u4e2d\u7684\u7ec4\u4ef6\u81ea\u52a8\u5ef6\u8fdf\u6267\u884c\u3002")),
B=J(e,ea.RunningMode_Lazy,k.get("runningMode3","\u8282\u7ea6\u6a21\u5f0f")),W=f(k.get("runningMode3Desc","\u53ef\u89c1\u9875\u7b7e\u4e2d\u7684\u7ec4\u4ef6\u7acb\u5373\u6267\u884c\uff0c\u5176\u5b83\u7b49\u5230\u9875\u7b7e\u5207\u6362\u4e3a\u53ef\u89c1\u65f6\u624d\u6267\u884c\u3002"));e.toCheckTheElement(function(ja){return ja.getUserObject()==L});e=$("<div>");I(e,aa.getJqUi(),0,0,23);I(e,d.getJqUi(),20,30,23);I(e,q,40,55,40);I(e,z.getJqUi(),20,95,23);I(e,w,40,120,40);I(e,B.getJqUi(),20,160,23);I(e,
W,40,185,40);return e},I=function(aa,e,d,q,z){t.layoutCtrlWithLRTB(e,d,0,null,q,null,z);aa.append(e)},J=function(aa,e,d){var q=new Oa;q.setText(d);q.setUserObject(e);aa.addElement(q);return q},f=function(aa){var e=$("<div>");e.css({color:"#999","white-space":"pre-wrap",overflow:"hidden"});e.text(aa);return e}};var db,t,V,la,Qa,ca,na,k,Wa,fa,ta,Ra,Oa,Qb,Ka,$b,pc,Bc,yc,Gc,Qc,Pa,fb,gb,sb,Na,eb,Lb,ob,Pb,ec,E,ib,bc,nc,Xb,Mc,Kc,Ic,Rc,Zc,$c,v,g,r,y,R,T,Y,ia,pa,Ba,Ya,$a,Fb,wb,Fa,ua,Sb,hc,wc,ma,qa,ea,ha,xa,
Ha,Ia,qb,ab,ub,Db,xb,fc,rc,kc;(function(){var M=com.kingdee.bos.qing.common;db=M.Util;t=M.DomUtil;V=M.RelativePeriodModel;la=M.CompositeCtrl;Qa=M.CanvasUtil;ca=M.DateFormater;na=M.DateUtil;M=com.kingdee.bos.qing.framework.common;k=M.MultilanguageManager.createPackageAccessor(Aa);M=com.kingdee.bos.qing.ui.component;Wa=M.ComboBox;fa=M.AbstractModalDialog;ta=M.Label;Ra=M.TextArea;Oa=M.RadioButton;Qb=M.RadioButtonGroup;Ka=M.TextField;$b=M.CheckBox;pc=M.SimpleConfirmer;Bc=M.WorkButton;yc=M.Menu;Gc=M.MenuModel;
Qc=M.List;Pa=M.Tree;fb=M.Spinner;gb=M.DateOfYearQuarterPanel;sb=M.DateOfYearMonthPanel;Na=M.Calendar;eb=M.LeftTabContainer;Lb=M.DropdownSelector;ob=M.SwitchButton;Pb=M.RegionSlider;ec=M.ColorChooser;E=M.ComboColor;ib=M.MessageDialog;bc=M.F7Selector;nc=M.HelpIcon;M=com.kingdee.bos.qing.common.ui;Xb=M.TableUtil;Mc=M.RadioButtonGroupWithTabbedPane;Kc=M.DateRangePanel;Ic=M.RelativePeriodPanel;Rc=M.CommonIconUtil;Zc=M.ColorWithOpacitySelector;$c=M.ColorSelector;v=M.FontSelector;g=M.AbstractLeftRightSelector;
M=com.kingdee.bos.qing.common.rich;r=M.Chapter;y=M.RichEditor;M=com.kingdee.bos.qing.core.commonui;R=M.MetaFieldSelector;M=com.kingdee.bos.qing.core.model;T=M.Meta;Y=M.MetaField;M=com.kingdee.bos.qing.core.ui;ia=M.AbstractEditableItemsPanel;pa=M.AbstractSingleValueDiscreteSelector;Ba=M.AbstractMultiValueDiscreteSelector;M=com.kingdee.bos.qing.dsb;Ya=M.Icons;$a=M.CosmeticBag;Fb=M.IntegrationRegister;M=com.kingdee.bos.qing.dsb.commonui;wb=M.AbstractDialogWithJsonExportor;M=com.kingdee.bos.qing.dsb.look;
Fa=M.CardLook;ua=Fa.Edge;Sb=Fa.Corner;hc=M.CardLookRenderer;wc=M.DecorationParser;ma=M.ParsingException;M=com.kingdee.bos.qing.dsb.model;qa=M.WidgetTypeManager;ea=M.DashboardModel;ha=M.AbstractFilterSource;xa=M.AffectedTargets;Ha=M.PredefinedTextFragments;Ia=M.AbstractDefaultSelected;qb=M.AbstractTextWidget;ab=M.AbstractCalendar;ub=M.CardTopBarCommon;Db=M.PreviewCardModel;xb=M.WidgetPicture;fc=M.WidgetCalendar;rc=M.AbstractDurationMode})();Wb.getAffectedTypeDisplay=function(M){return M==ea.AffectedType_Tab?
k.get("affectedTargetTypeTab","\u9875\u7b7e\u5207\u6362"):M==ea.AffectedType_Hotlink?k.get("affectedTargetTypeHotlink","\u8d85\u94fe\u63a5"):null};kb.INVALID_CHAR_INSIDE_WIDGET_NAME=["#","${","}$",","];kb.isWidgetNameInvalid=function(M){for(var H=kb.INVALID_CHAR_INSIDE_WIDGET_NAME,L=0;L<H.length;L++)if(0<=M.indexOf(H[L]))return!0;return!1};var N=new function(){this.paint=function(M,H){var L=$("<div>"),A=qa.getInstance(M.getWidgetTypeName()).getIconFileName()+"_min";Ya.background(L,A);A=$("<div>");
A.text(M.getDisplayName());H.append(L);H.append(A);t.layoutCtrl(L,4,2,16,16);t.layoutCtrlWithLRTB(A,24,0,null,0,0,null)}};dc.modelToDisplayText=function(M){var H=[k.get("dateYearBefore","\u4e4b\u524d\u7b2c #1 \u5e74"),k.get("dateYearCurrent","\u672c\u5e74"),k.get("dateYearAfter","\u4e4b\u540e\u7b2c #1 \u5e74")];return Eb.modelToDisplayText(H,M)};Bb.modelToDisplayText=function(M){var H=[k.get("dateQuarterBefore","\u4e4b\u524d\u7b2c #1 \u5b63\u5ea6"),k.get("dateQuarterCurrent","\u672c\u5b63\u5ea6"),
k.get("dateQuarterAfter","\u4e4b\u540e\u7b2c #1 \u5b63\u5ea6")];return Eb.modelToDisplayText(H,M)};Hb.modelToDisplayText=function(M){var H=[k.get("dateMonthBefore","\u4e4b\u524d\u7b2c #1 \u4e2a\u6708"),k.get("dateMonthCurrent","\u672c\u6708"),k.get("dateMonthAfter","\u4e4b\u540e\u7b2c #1 \u4e2a\u6708")];return Eb.modelToDisplayText(H,M)};Da.modelToDisplayText=function(M){var H=[k.get("dateDayBefore","\u4e4b\u524d\u7b2c #1 \u5929"),k.get("dateDayCurrent","\u5f53\u5929"),k.get("dateDayAfter","\u4e4b\u540e\u7b2c #1 \u5929")];
return Eb.modelToDisplayText(H,M)};Eb.modelToDisplayText=function(M,H){var L=M[0],A=M[1];M=M[2];if(H)return H=H.getOffset(),0>H?L.replace("#1",-H):0<H?M.replace("#1",H):A;L=L.replace("#1","X");M=M.replace("#1","X");return[L,A,M]};bb.hookPreviewCard=function(M){kc=M}})();(function(){function p(){aa.call(this);var e,d,q;this.getCaption=function(){return E.get("importFrom","\u5bfc\u5165")};this.perform=function(){e.setCosmeticModel(q)};this.unperform=function(){e.setCosmeticModel(d)};this.bindConfigUi=function(z){e=z;d=e.getCosmeticModel()};this.setImportTarget=function(z){q=z}}function Wb(){aa.call(this);var e=this,d,q,z,w,B,W;this.getCaption=function(){return w.getGroupDisplayText()+"-"+B.getUserObject()};this.perform=function(){for(var Ea=!1,Ua=d().getItems(w.getGroupId()),
mb=0;mb<Ua.length;mb++){var Gb=Ua[mb];if(Gb.getKey()==q){Ea=!0;ja(Gb);void 0===W&&Ua.splice(mb,1);break}}Ea||(Gb=H.createEditableItem(q,void 0),Ua.push(Gb),ja(Gb))};var ja=function(Ea){var Ua=Ea.getValue();Ea.setValue(z);W=z;z=Ua};this.unperform=function(){e.perform()};this.setContext=function(Ea,Ua,mb,Gb,zb){d=zb;q=Ea;z=Ua;w=mb;B=Gb};this.getConfigGroup=function(){return w};this.getJqItem=function(){return B.getJqUi()};this.getCurrentKeyAndValue=function(){return[q,W]}}function kb(){var e=this,d,
q,z,w,B,W,ja;this.setCosmeticModel=function(l){d=l};this.getCosmeticModel=function(){return d};this.getCommandManager=function(){W||(W=new f,W.setActionCapacity(64),W.addPerformedListener(va));return W};this.getJqUi=function(){if(!q){var l=new nc;l.setRootVisible(!1);l.setMultiSelectable(!1);l.addSelectedListener(mb);Ea(l);w=l;var h=new v;h.setBorderVisible(!1);h.setTitle(E.get("cosmeticClassified","\u7c7b\u522b"));h.getJqContainer().append(l.getJqUi());h.getJqUi().css("border","1px solid #e5e5e5");
ob.layoutCtrlWithLRTB(l.getJqUi(),0,0,null,0,0,null);z=$("<div>");z.css("border","1px solid #e5e5e5");q=new bc;q.setHorizontalSplit(!0);q.setResizeMode(bc.RESIZE_MODE_FIRST_FIXED);q.setFirstSize(180,120,480);q.setSecondSize(-1,120,-1);q.setFirstChild(bc.createChildWrapper(h.getJqUi()));q.setSecondChild(bc.createChildWrapper(z))}return q.getJqUi()};this.resize=function(){q.resize();zb()};var Ea=function(l){var h=Ua(E.get("cosmeticClassifiedChartCommon","\u56fe\u8868"),[new Hb,new Da,new Bb,new dc,
new Eb,new Ca]),u=Ua(E.get("cosmeticClassifiedChartSpecific","\u7279\u5b9a\u56fe\u8868"),[new Ab,new vb,new Kb,new rb,new cc,new Va]),U=Ua(E.get("cosmeticClassifiedOverall","\u6574\u4f53"),[new oc,new Ub,new lb,new Jb,new Cb]),da=Ua(E.get("cosmeticClassifiedWidget","\u7ec4\u4ef6"),[new Rb,new Ta,new Ga]);h=Ua(E.get("cosmeticClassifiedSquare","\u6570\u636e\u6597\u65b9"),[new Xa,h,u]);u=new nc.BranchNode;u.setExpanded(!0);u.addChild(U);u.addChild(da);u.addChild(h);l.setRoot(u);l.setSelecteds([U.getChild(0)]);
setTimeout(function(){mb(l)},0)},Ua=function(l,h){var u=new nc.BranchNode;u.setUserObject(l);u.setExpanded(!0);u.setSelectable(!1);for(l=0;l<h.length;l++){var U=h[l];if(!(U instanceof nc.BranchNode)){U.setCosmeticModel(d);U.setItemModifier(tb);var da=new nc.LeafNode;da.setUserObject(U);U=da}u.addChild(U)}return u},mb=function(l){B=l.getSelecteds()[0].getUserObject();Gb();B.updatePreview()},Gb=function(){z.children().detach();B.getJqUi().appendTo(z);zb()},zb=function(){B&&B.relayout(z.prop("clientWidth"),
z.prop("clientHeight"))},tb=function(l,h,u,U){var da=new Wb;da.setContext(h,u,l,U,function(){return d});e.getCommandManager().perform(da)},va=function(l,h,u){l instanceof Wb?G(l,h):l instanceof p&&sa(l,h)},sa=function(l,h){w.getRoot().visiting(function(u){u.isLeafNode()&&(u=u.getUserObject(),u.setCosmeticModel(d),u.updatePreview(),u.updateCtrlState(),u.syncCtrlVisible())})},G=function(l,h){if(h)B.updatePreview(),B.syncCtrlVisible();else{if(B==l.getConfigGroup())w.expandToNode(w.getSelecteds()[0]),
h=2;else{var u=[];w.getRoot().visiting(function(ya){return ya.getUserObject()==l.getConfigGroup()?(u.push(ya),!0):!1});w.setSelecteds(u);w.expandToNode(u[0]);B=l.getConfigGroup();Gb();h=3}w.scrollSelectedToVisible();var U=l.getCurrentKeyAndValue(),da=U[0];U=U[1];B.updatePreview();B.updateCtrlState(da,U);B.syncCtrlVisible();D(l.getJqItem(),h)}},D=function(l,h){ja&&ja.terminate();ja=new r;ja.setDuration(325,175);ja.setTimes(h,!1);ja.blink(l)}}function Mb(){var e=this,d,q,z,w,B,W,ja,Ea;this.setCosmeticModel=
function(h){d=h};this.getGroupId=function(){throw Error("Implement");};this.getGroupDisplayText=function(){throw Error("Implement");};this.setItemModifier=function(h){Ea=h};this.getJqUi=function(){if(!q){z=Ua(E.get("cosmeticSetting","\u8bbe\u7f6e"));W=e.protectedCreateSettingItems();w=Ua(E.get("cosmeticPreview","\u9884\u89c8"));ja=e.protectedCreatePreviewPages();for(var h=0;h<ja.length;h++)w.getJqContainer().append(ja[h].getJqUi());if(h=e.protectedGetComment()){B=Ua(E.get("cosmeticComment","\u8bf4\u660e"));
B.getJqUi().css("border-top","1px solid #f0f0f0");var u=B.getJqContainer();u.css("white-space","pre-wrap");u.text(h)}q=$("<div>");q.append(z.getJqUi());q.append(w.getJqUi());B&&q.append(B.getJqUi());ob.layoutCtrlWithLRTB(q,0,0,null,0,0,null)}return q};this.relayout=function(h,u){var U=0;B&&(U=80,ob.layoutCtrlWithLRTB(B.getJqUi(),0,0,null,null,0,U));var da=e.protectedGetSettingItemColumns();da*=160;300<h-da?(ob.layoutCtrlWithLRTB(z.getJqUi(),0,"auto",da,0,U,"auto"),ob.layoutCtrlWithLRTB(w.getJqUi(),
da,0,"auto",0,U,"auto"),w.getJqUi().css("border-left","1px solid #f0f0f0"),w.getJqUi().css("border-top","")):(h=z.getJqUi().parent().prop("clientWidth"),da=Math.floor((h+40)/160),u=Math.min(60*Math.ceil(W.length/da)+30,u-U-120),ob.layoutCtrlWithLRTB(z.getJqUi(),0,0,"auto",0,"auto",u),ob.layoutCtrlWithLRTB(w.getJqUi(),0,0,"auto",u,U,"auto"),w.getJqUi().css("border-left",""),w.getJqUi().css("border-top","1px solid #f0f0f0"));U=z.getJqContainer();u=U.prop("clientWidth");U.prop("clientHeight");U=W.length;
h=Math.floor((u+40)/160);u=Math.ceil(U/h);h=h==e.protectedGetSettingItemColumns();for(var ya=da=0;ya<U;ya++){var oa=160*Math.floor(da/u),za=da%u*60,wa=W[ya];wa&&ob.layoutCtrl(wa,oa,za,120,50);(wa||h)&&da++}u=w.getJqContainer();U=u.prop("clientWidth");u=u.prop("clientHeight");if(!e.protectedCustomRelayoutPreviewPages(U,u))for(ya=da=h=u=0;ya<ja.length;ya++)oa=ja[ya],za=oa.getWidth(),wa=oa.getHeight(),0<u&&u+za>U&&(u=0,h+=da+10,da=0),ob.layoutCtrl(oa.getJqUi(),u,h,za,wa),u+=za+10,da=Math.max(da,wa)};
this.updatePreview=function(){if(q)for(var h=0;h<ja.length;h++)ja[h].update(d)};this.updateCtrlState=function(h,u){if(q)for(var U=0;U<W.length;U++){var da=W[U];if(da&&(!h||h==da.data("qing-itemKey"))){da=da.data("qing-updateCtrlModel");for(var ya=0;ya<da.length;ya++)(0,da[ya])(u)}}};this.syncCtrlVisible=function(){if(q)for(var h=0;h<W.length;h++){var u=W[h];u&&(u=u.data("qing-updateCtrlVisible"))&&u()}};this.protectedCreateSettingItems=function(){throw Error("Implement");};this.protectedGetSettingItemColumns=
function(){return 2};this.protectedCreatePreviewPages=function(){throw Error("Implement");};this.protectedCustomRelayoutPreviewPages=function(h,u){return!1};this.protectedGetComment=function(){return null};this.toString=function(){return e.getGroupDisplayText()};var Ua=function(h){var u=new v;u.setBorderVisible(!1);u.setTitle(h);return u},mb=function(h,u,U,da){var ya=new Ic;ya.setConstraint(U,da,1);ya.addValueChangedListener(function(oa,za,wa,Ib){G(oa,h,wa+"")},!0);u=Gb(h,u,ya);zb(u,[function(oa){ya.setValue(parseInt(void 0===
oa?sa(h):oa))}]);return u},Gb=function(h,u,U,da){U.setUserObject(u);var ya=U.getJqUi(),oa=new Xb;oa.setText(u);U=$("<div>");U.append(oa.getJqUi());U.append(ya);ob.layoutCtrlWithLRTB(oa.getJqUi(),0,0,null,0,null,23);ob.layoutCtrlWithLRTB(ya,0,0,null,23,null,23);da&&(da.setUserObject(u),u=da.getJqUi(),U.append(u),ob.layoutCtrlWithLRTB(u,null,0,0,23,null,23));U.appendTo(z.getJqContainer());U.data("qing-itemKey",h);return U},zb=function(h,u){for(var U=0;U<u.length;U++)(0,u[U])();h.data("qing-updateCtrlModel",
u)},tb=function(h,u){u(!0);h.data("qing-updateCtrlVisible",u)},va=function(h,u,U,da){var ya=0,oa=0;U&&(ya=U+4,oa=U);da?(h.getJqUi().css({right:ya}),u.getJqUi().css({width:oa})):(h.getJqUi().animate({right:ya},250),u.getJqUi().animate({width:oa},250))},sa=function(h){return d.pickItems(e.getGroupId())[h]},G=function(h,u,U){d.setPriorPreview(null);Ea(e,u,U,h)},D=function(h,u){var U={};U[h]=u;h={};h[e.getGroupId()]=U;d.setPriorPreview(h);e.updatePreview()},l=function(h){if(h){var u=Pb.splitRgbAndOpacity(h);
h=u[0];u=parseInt(100*u[1]);return[h,u]}return[null,100]};this.protectedMethod={createColorItem:function(h,u){var U=new Mc;U.setColorPool(Kc.getColorPool7());U.addSelectedListener(function(da){G(U,h,da.encodeToHexRgb())});u=Gb(h,u,U);zb(u,[function(da){U.getModel().decodeFrom(void 0===da?sa(h):da)}]);return u},createWithAlphaColorItem:function(h,u){var U,da,ya=function(wa){wa=l(wa);U=wa[0];da=wa[1]},oa=new Mc;oa.setColorPool(Kc.getColorPool7());oa.addSelectedListener(function(wa){wa=(U=wa.encodeToHexRgb())?
Pb.withOpacityToRgba(U,da/100):null;G(oa,h,wa)});var za=new g;za.setValueChangedListener(function(wa,Ib){da=wa;wa=U?Pb.withOpacityToRgba(U,da/100):null;Ib?D(h,wa):G(za,h,wa)});u=Gb(h,u,oa,za);zb(u,[function(wa){wa=void 0===wa?sa(h):wa;ya(wa);oa.getModel().decodeFrom(U)},function(wa){wa=void 0===wa?sa(h):wa;ya(wa);za.setValue(da)}]);va(oa,za,60,!0);return u},createNullableColorItem:function(h,u,U){var da=new y;da.setColorPool(Kc.getColorPool7());U&&da.setDisplayForNull(U);da.setColorSelectedListener(function(ya){var oa=
ya.getColor();G(ya,h,oa?oa:"")});u=Gb(h,u,da);zb(u,[function(ya){da.setColor(void 0===ya?sa(h):ya)}]);return u},createNullableWithAlphaColorItem:function(h,u,U){var da,ya,oa=function(Ib){Ib=l(Ib);da=Ib[0];ya=Ib[1]},za=new y;za.setColorPool(Kc.getColorPool7());U&&za.setDisplayForNull(U);za.setColorSelectedListener(function(Ib){var qc=(da=Ib.getColor())?da?Pb.withOpacityToRgba(da,ya/100):null:"";G(Ib,h,qc)});var wa=new g;wa.setValueChangedListener(function(Ib,qc){ya=Ib;Ib=da?da?Pb.withOpacityToRgba(da,
ya/100):null:"";qc?D(h,Ib):G(wa,h,Ib)});u=Gb(h,u,za,wa);zb(u,[function(Ib){Ib=void 0===Ib?sa(h):Ib;oa(Ib);za.setColor(da)},function(Ib){Ib=void 0===Ib?sa(h):Ib;oa(Ib);wa.setValue(ya)}]);tb(u,function(Ib){va(za,wa,da?60:0,Ib)});return u},createFontSizeItem:function(h,u){return mb(h,u,6,99)},createFontSizeEnhancedItem:function(h,u){var U=new Rc;U.setItemModels([0,1,2,3,4,5]);U.setCustomPainter(function(da,ya,oa){ya.text(oa||0===oa?100+10*oa+"%":"")});U.addSelectedChangedListener(function(da,ya,oa){G(da,
h,0===oa?void 0:oa+"")});u=Gb(h,u,U);zb(u,[function(da){U.setSelected(void 0===da?parseInt(sa(h)||"0"):da)}]);return u},createIntegerItem:mb,createNumberItem:function(h,u,U,da,ya){var oa=new Ic;oa.supportDecimal(2);oa.setConstraint(U,da,ya);oa.addValueChangedListener(function(za,wa,Ib,qc){G(za,h,Ib+"")},!0);u=Gb(h,u,oa);zb(u,[function(za){oa.setValue(parseFloat(void 0===za?sa(h):za))}]);return u},createPaletteItem:function(h,u){var U=new ba;U.setEditedListener(function(da){G(U,h,da)});u=Gb(h,u,U);
zb(u,[function(da){da=void 0===da?sa(h):da;!da&&(da="");U.setColorsString(da)}]);return u},compositeCaptionWithSelected:function(h){return h+"("+E.get("cosmeticItemStateSelected","\u9009\u4e2d")+")"},compositeCaptionWithHover:function(h){return h+"("+E.get("cosmeticItemStateHover","\u9f20\u6807\u5212\u8fc7")+")"}}}function oc(){Mb.call(this);var e=this.protectedMethod;this.getGroupId=function(){return N.DSB_PAGE};this.getGroupDisplayText=function(){return E.get("cosmeticGroupPage","\u9875\u9762")};
this.protectedCreateSettingItems=function(){return[e.createColorItem(N.Key_Page_BackgroundColor,E.get("cosmeticItemBackgroundColor","\u80cc\u666f\u989c\u8272"))]};this.protectedCreatePreviewPages=function(){var d=new Aa;d.setWidth(320);d.setHeight(240);return[d]}}function Ub(){Mb.call(this);var e=this.protectedMethod;this.getGroupId=function(){return N.DSB_PAGE_TITLE_BAR};this.getGroupDisplayText=function(){return E.get("cosmeticGroupPageTitleBar","\u9875\u9762\u6807\u9898\u680f")};this.protectedCreateSettingItems=
function(){return[e.createNullableColorItem(N.Key_PageTitleBar_BackgroundColor,E.get("titleBarBackgroundColor","\u80cc\u666f\u989c\u8272"),E.get("colorNull","\u65e0")),e.createIntegerItem(N.Key_PageTitleBar_SeparaterLineWidth,E.get("titleBarSeparaterLineWidth","\u5206\u9694\u7ebf\u7ebf\u5bbd"),0,10),e.createNullableColorItem(N.Key_PageTitleBar_SeparaterColor,E.get("titleBarSeparaterColor","\u5206\u9694\u7ebf\u989c\u8272"),E.get("colorNull","\u65e0"))]};this.protectedCreatePreviewPages=function(){var d=
new db,q=new Aa;q.setWidth(320);q.setHeight(240);q.appendChild(d);ob.layoutCtrlWithLRTB(d.getJqUi(),0,0,null,0,null,40);return[q]}}function lb(){Mb.call(this);var e=this.protectedMethod;this.getGroupId=function(){return N.DSB_CARD};this.getGroupDisplayText=function(){return E.get("cosmeticGroupCard","\u5361\u7247")};this.protectedGetComment=function(){return E.get("commentCard","1\u3001\u5f71\u54cd\u6570\u636e\u6597\u65b9\u3001\u6570\u636e\u5206\u6790\u3001\u7ec4\u5408\u5361\u7247\u5bb9\u5668\u7b49\u7ec4\u4ef6\u5728\u4eea\u8868\u677f\u4e2d\u7684\u5361\u7247\u5916\u89c2\u3002\r\n2\u3001\u5176\u4e2d\u80cc\u666f\u534a\u900f\u660e\u5ea6\uff0c\u4ec5\u5728\u9875\u9762\u8bbe\u7f6e\u80cc\u666f\u56fe\u7247\u65f6\u751f\u6548\u3002")};
this.protectedCreateSettingItems=function(){return[e.createColorItem(N.Key_Card_BackgroundColor,E.get("cosmeticItemBackgroundColor","\u80cc\u666f\u989c\u8272")),e.createNumberItem(N.Key_Card_BackgroundOpacity,E.get("cosmeticItemBackgroundOpacity","\u80cc\u666f\u534a\u900f\u660e"),0,1,.05),e.createNullableWithAlphaColorItem(N.Key_Card_ShadowColor,E.get("cosmeticItemShadowColor","\u9634\u5f71\u989c\u8272"),E.get("colorNull","\u65e0")),e.createIntegerItem(N.Key_Card_BorderRadius,E.get("cosmeticItemBorderRadius",
"\u5706\u89d2\u534a\u5f84"),0,40),e.createColorItem(N.Key_Card_TitleColor,E.get("cosmeticItemTitleColor","\u6807\u9898\u989c\u8272")),e.createFontSizeItem(N.Key_Card_TitleFontSize,E.get("cosmeticItemTitleFontSize","\u6807\u9898\u5b57\u53f7")),e.createColorItem(N.Key_Card_ModalLayerColor,E.get("cosmeticItemModalLayerColor","\u63d0\u793a\u6587\u5b57\u989c\u8272"))]};this.protectedCreatePreviewPages=function(){var z=d(!1),w=d(!1),B=d(!0),W=new V;W.setText(xb.getWaitingText()+"...");W.setTransparent(!1);
var ja=new V;ja.setText(E.get("refreshing","\u6b63\u5728\u5237\u65b0")+"...");ja.setTransparent(!0);w.appendChild(W);w.appendChild(ja);ob.layoutCtrlWithLRTB(W.getJqUi(),40,40,null,60,40,null);ob.layoutCtrlWithLRTB(ja.getJqUi(),20,30,null,30,null,20);B.getJqUi().children().first().before(q());return[z,w,B]};var d=function(z){var w=new t;w.setTitle(E.get("previewCardTitle","\u5361\u7247\u6807\u9898\u793a\u4f8b"));w.setOpacityRequired(z);z=new Aa;z.setWidth(320);z.setHeight(160);z.appendChild(w);ob.layoutCtrlWithLRTB(w.getJqUi(),
20,20,null,20,20,null);return z},q=function(){var z=ec.createCanvas(),w=$(z);ob.layoutCtrl(w,0,0,320,160);var B=ec.createContext2d(z,320,160);z=function(W,ja,Ea,Ua){B.fillStyle=Ua;B.beginPath();B.arc(W,ja,Ea,0,2*Math.PI);B.closePath();B.fill()};z(50,100,40,"rgba(255,102,102,0.5)");z(150,50,60,"rgba(102,255,102,0.5)");z(250,150,80,"rgba(102,102,255,0.5)");return w}}function Jb(){Mb.call(this);var e=this.protectedMethod;this.getGroupId=function(){return N.DSB_LABEL};this.getGroupDisplayText=function(){return E.get("cosmeticGroupLabel",
"\u6587\u5b57")};this.protectedGetComment=function(){return E.get("commentLabel","1\u3001\u5f71\u54cd\u6587\u5b57\u7ec4\u4ef6\u3001\u591a\u884c\u6587\u5b57\u7ec4\u4ef6\u7684\u9ed8\u8ba4\u989c\u8272\u3002\r\n2\u3001\u5f71\u54cd\u4e0b\u62c9\u5217\u8868\u3001\u65e5\u671f\u8303\u56f4\u7b49\u7ec4\u4ef6\u7684\u81ea\u5e26\u6807\u7b7e\u6587\u5b57\u989c\u8272\u3002")};this.protectedCreateSettingItems=function(){return[e.createColorItem(N.Key_Label_Color,E.get("cosmeticItemTextColor","\u6587\u5b57\u989c\u8272"))]};
this.protectedCreatePreviewPages=function(){var d=new la,q=new la,z=new t;z.setTitle(E.get("previewCardTitle","\u5361\u7247\u6807\u9898\u793a\u4f8b"));z.appendChild(d);ob.layoutCtrlWithLRTB(d.getJqUi(),20,20,null,20,null,40);d=new Aa;d.setWidth(320);d.setHeight(240);d.appendChild(q);d.appendChild(z);ob.layoutCtrlWithLRTB(q.getJqUi(),20,20,null,20,null,40);ob.layoutCtrlWithLRTB(z.getJqUi(),20,40,null,60,40,null);return[d]}}function Rb(){Mb.call(this);var e=this.protectedMethod;this.getGroupId=function(){return N.DSB_INPUTER};
this.getGroupDisplayText=function(){return E.get("cosmeticGroupInputer","\u5355\u884c\u63a7\u4ef6")};this.protectedGetComment=function(){return E.get("commentInputer","\u5f71\u54cd\u4e0b\u62c9\u5217\u8868\u3001\u5f39\u7a97\u9009\u62e9\u5668\u3001\u65e5\u671f\u8303\u56f4\u7b49\u7b5b\u9009\u5668\u7ec4\u4ef6\u3002")};this.protectedCreateSettingItems=function(){return[e.createColorItem(N.Key_Inputer_Color,E.get("cosmeticItemTextColor","\u6587\u5b57\u989c\u8272")),e.createColorItem(N.Key_Inputer_UnderlineColor,
E.get("cosmeticItemUnderlineColor","\u4e0b\u5212\u7ebf\u989c\u8272"))]};this.protectedCreatePreviewPages=function(){var d=new Qa,q=new Qa,z=new t;z.appendChild(d);ob.layoutCtrlWithLRTB(d.getJqUi(),0,null,120,20,null,25);d=new Aa;d.setWidth(320);d.setHeight(240);d.appendChild(q);d.appendChild(z);ob.layoutCtrlWithLRTB(q.getJqUi(),20,null,120,20,null,25);ob.layoutCtrlWithLRTB(z.getJqUi(),20,40,null,60,40,null);return[d]}}function Ta(){Mb.call(this);var e=this.protectedMethod;this.getGroupId=function(){return N.DSB_BUTTON_GROUP};
this.getGroupDisplayText=function(){return E.get("cosmeticGroupButtonGroup","\u6309\u94ae\u7ec4")};this.protectedCreateSettingItems=function(){return[e.createColorItem(N.Key_ButtonGroup_Color,E.get("cosmeticItemTextColor","\u6587\u5b57\u989c\u8272")),e.createWithAlphaColorItem(N.Key_ButtonGroup_BackgroundColor,E.get("cosmeticItemBackgroundColor","\u80cc\u666f\u989c\u8272")),e.createWithAlphaColorItem(N.Key_ButtonGroup_BorderColor,E.get("cosmeticItemBorderColor","\u8fb9\u6846\u989c\u8272")),e.createColorItem(N.Key_ButtonGroup_Color_Selected,
e.compositeCaptionWithSelected(E.get("cosmeticItemTextColor","\u6587\u5b57\u989c\u8272"))),e.createWithAlphaColorItem(N.Key_ButtonGroup_BackgroundColor_Selected,e.compositeCaptionWithSelected(E.get("cosmeticItemBackgroundColor","\u80cc\u666f\u989c\u8272"))),e.createWithAlphaColorItem(N.Key_ButtonGroup_BorderColor_Selected,e.compositeCaptionWithSelected(E.get("cosmeticItemBorderColor","\u8fb9\u6846\u989c\u8272"))),null,e.createWithAlphaColorItem(N.Key_ButtonGroup_BackgroundColor_Hover,e.compositeCaptionWithHover(E.get("cosmeticItemBackgroundColor",
"\u80cc\u666f\u989c\u8272")))]};this.protectedGetSettingItemColumns=function(){return 3};this.protectedCreatePreviewPages=function(){var d=new ca,q=new ca,z=new t;z.appendChild(d);ob.layoutCtrlWithLRTB(d.getJqUi(),0,0,null,20,null,32);d=new Aa;d.setWidth(320);d.setHeight(240);d.appendChild(q);d.appendChild(z);ob.layoutCtrlWithLRTB(q.getJqUi(),20,40,null,16,null,32);ob.layoutCtrlWithLRTB(z.getJqUi(),20,40,null,60,40,null);return[d]}}function Ga(){Mb.call(this);var e=this.protectedMethod;this.getGroupId=
function(){return N.DSB_TABBED_HEAD};this.getGroupDisplayText=function(){return E.get("cosmeticGroupTabbed","\u9875\u7b7e")};this.protectedCreateSettingItems=function(){return[e.createColorItem(N.Key_TabbedHead_MainColor,E.get("cosmeticItemMainColor","\u4e3b\u8272\u8c03")),e.createColorItem(N.Key_TabbedHead_InverseColor,E.get("cosmeticItemInverseColor","\u53cd\u8272\u8c03"))]};this.protectedCreatePreviewPages=function(){var d=new na,q=new t;q.appendChild(d);ob.layoutCtrlWithLRTB(d.getJqUi(),0,0,null,
0,null,24);d=new Aa;d.setWidth(320);d.setHeight(240);d.appendChild(q);ob.layoutCtrlWithLRTB(q.getJqUi(),20,40,null,20,40,null);return[d]}}function Cb(){Mb.call(this);var e=this.protectedMethod;this.getGroupId=function(){return N.DESIGN};this.getGroupDisplayText=function(){return E.get("cosmeticGroupDesign","\u8bbe\u8ba1\u65f6")};this.protectedGetComment=function(){return E.get("commentDesign","1\u3001\u5f71\u54cd\u8bbe\u8ba1\u65f6\u8d77\u63d0\u793a\u4f5c\u7528\u7684\u6807\u8bb0\u3002\r\n2\u3001\u8272\u503cA~C\u5e94\u8be5\u76f8\u5bf9\u4e8e\u9875\u9762\u80cc\u666f\u4ece\u663e\u773c\u5230\u4e0d\u663e\u773c\u3002")};
this.protectedCreateSettingItems=function(){return[e.createColorItem(N.Key_Design_Adjustable,E.get("cosmeticItemAdjustable","\u53ef\u8c03\u6574")),e.createColorItem(N.Key_Design_Unadjustable,E.get("cosmeticItemUnadjustable","\u7981\u6b62\u8c03\u6574")),null,e.createColorItem(N.Key_Design_ColorA,E.get("cosmeticItemColorA","\u8272\u503cA")),e.createColorItem(N.Key_Design_ColorB,E.get("cosmeticItemColorB","\u8272\u503cB")),e.createColorItem(N.Key_Design_ColorC,E.get("cosmeticItemColorC","\u8272\u503cC"))]};
this.protectedCreatePreviewPages=function(){var d=new k,q=new k,z=new Wa,w=new Wa,B=new fa,W=new fa,ja=new t;ja.appendChild(d);ja.appendChild(z);ja.appendChild(B);ob.layoutCtrlWithLRTB(z.getJqUi(),0,null,120,0,null,30);ob.layoutCtrlWithLRTB(d.getJqUi(),0,null,120,50,null,30);ob.layoutCtrlWithLRTB(B.getJqUi(),170,null,80,0,null,99);d=new Aa;d.setWidth(320);d.setHeight(240);d.appendChild(ja);d.appendChild(q);d.appendChild(w);d.appendChild(W);ob.layoutCtrlWithLRTB(w.getJqUi(),20,null,120,10,null,30);
ob.layoutCtrlWithLRTB(q.getJqUi(),20,null,120,60,null,30);ob.layoutCtrlWithLRTB(W.getJqUi(),200,null,80,10,null,90);ob.layoutCtrlWithLRTB(ja.getJqUi(),20,10,null,110,10,null);return[d]}}function Xa(){Mb.call(this);var e=this.protectedMethod;this.getGroupId=function(){return N.SQUARE_EXHIBITION};this.getGroupDisplayText=function(){return E.get("cosmeticGroupSquareExhibition","\u901a\u7528")};this.protectedCreateSettingItems=function(){return[e.createNullableWithAlphaColorItem(kc.STYLE_CRUMB_COLOR,
E.get("cosmeticItemCrumbColor","\u94bb\u53d6\u8def\u5f84\u6587\u5b57\u989c\u8272")),e.createFontSizeEnhancedItem(kc.STYLE_CRUMB_FONTSIZE_ENHANCED,E.get("cosmeticItemCrumbFontSizeEnhanced","\u94bb\u53d6\u8def\u5f84\u6587\u5b57\u7f29\u653e")),e.createWithAlphaColorItem(kc.STYLE_PROMPTLABEL_COLOR,E.get("cosmeticItemPromptLabelColor","\u9644\u52a0\u4fe1\u606f\u6587\u5b57\u989c\u8272")),e.createFontSizeEnhancedItem(kc.STYLE_PROMPTLABEL_FONTSIZE_ENHANCED,E.get("cosmeticItemPromptLabelFontSizeEnhanced",
"\u9644\u52a0\u4fe1\u606f\u6587\u5b57\u7f29\u653e"))]};this.protectedCreatePreviewPages=function(){var d=new ta,q=new Ra,z=new t,w=new Aa;w.setWidth(320);w.setHeight(240);w.appendChild(z);w.appendChild(d);w.appendChild(q);ob.layoutCtrlWithLRTB(z.getJqUi(),20,40,null,20,40,null);ob.layoutCtrlWithLRTB(d.getJqUi(),36,40,null,30,null,30);ob.layoutCtrlWithLRTB(q.getJqUi(),36,40,null,null,40,30);return[w]}}function jc(){Mb.call(this);var e=this;this.getGroupId=function(){return N.CHART_COMMON};this.protectedCreatePreviewPages=
function(){for(var d=[],q=e.protectedCreatePreviews(),z=0;z<q.length;z++){var w=q[z],B=new t;B.appendChild(w);ob.layoutCtrlWithLRTB(w.getJqUi(),0,0,null,0,0,null);w=e.protectedGetPreviewPageSize();var W=new Aa;W.setWidth(w[0]);W.setHeight(w[1]);W.appendChild(B);ob.layoutCtrlWithLRTB(B.getJqUi(),20,20,null,20,20,null);d.push(W)}return d};this.protectedGetPreviewPageSize=function(){return[320,240]};this.protectedCreatePreviews=function(){throw Error("Implement");}}function dc(){jc.call(this);var e=
this.protectedMethod;this.getGroupDisplayText=function(){return E.get("cosmeticGroupChartLegend","\u56fe\u4f8b")};this.protectedCreateSettingItems=function(){return[e.createFontSizeItem(Fa.LEGEND_FONTSIZE,E.get("cosmeticItemFontSize","\u5b57\u53f7")),e.createColorItem(Fa.LEGEND_COLOR,E.get("cosmeticItemTextColor","\u6587\u5b57\u989c\u8272"))]};this.protectedCreatePreviews=function(){return[new pc]}}function Bb(){jc.call(this);var e=this.protectedMethod;this.getGroupDisplayText=function(){return E.get("cosmeticGroupChartDataLabel",
"\u6570\u636e\u6807\u7b7e")};this.protectedCreateSettingItems=function(){return[e.createFontSizeItem(Fa.DATALABEL_FONTSIZE,E.get("cosmeticItemFontSize","\u5b57\u53f7")),e.createColorItem(Fa.DATALABEL_COLOR,E.get("cosmeticItemTextColor","\u6587\u5b57\u989c\u8272"))]};this.protectedCreatePreviews=function(){return[new $b]}}function Hb(){jc.call(this);var e=this.protectedMethod;this.getGroupDisplayText=function(){return E.get("cosmeticGroupChartAxis","\u6587\u672c\u5750\u6807\u8f74")};this.protectedCreateSettingItems=
function(){return[e.createFontSizeItem(Fa.AXIS_FONTSIZE,E.get("cosmeticItemFontSize","\u5b57\u53f7")),e.createColorItem(Fa.AXIS_TEXT_COLOR,E.get("cosmeticItemTextColor","\u6587\u5b57\u989c\u8272")),e.createWithAlphaColorItem(Fa.AXIS_LINE_COLOR,E.get("cosmeticItemAxisColor","\u5750\u6807\u8f74\u989c\u8272"))]};this.protectedCreatePreviews=function(){return[new Ka]}}function Da(){jc.call(this);var e=this.protectedMethod;this.getGroupDisplayText=function(){return E.get("cosmeticGroupChartRuler","\u6570\u5b57\u5750\u6807\u8f74")};
this.protectedCreateSettingItems=function(){return[e.createFontSizeItem(Fa.RULER_FONTSIZE,E.get("cosmeticItemFontSize","\u5b57\u53f7")),e.createColorItem(Fa.RULER_TEXT_COLOR,E.get("cosmeticItemTextColor","\u6587\u5b57\u989c\u8272")),e.createWithAlphaColorItem(Fa.RULER_MARK_COLOR,E.get("cosmeticItemRulerMarkColor","\u523b\u5ea6\u989c\u8272")),e.createWithAlphaColorItem(Fa.RULER_MARK_LINE_COLOR,E.get("cosmeticItemRulerMarkLineColor","\u7f51\u683c\u7ebf\u989c\u8272"))]};this.protectedCreatePreviews=
function(){return[new Qb]}}function Eb(){jc.call(this);var e=this.protectedMethod;this.getGroupDisplayText=function(){return E.get("cosmeticGroupChartRefline","\u53c2\u8003\u7ebf")};this.protectedCreateSettingItems=function(){return[e.createWithAlphaColorItem(Fa.REFLINE_COLOR,E.get("cosmeticItemReflineColor","\u7ebf\u989c\u8272")),e.createWithAlphaColorItem(Fa.REFLINE_COLOR_HOVER,e.compositeCaptionWithHover(E.get("cosmeticItemReflineColor","\u7ebf\u989c\u8272"))),e.createWithAlphaColorItem(Fa.REFLINE_TIPS_COLOR,
E.get("cosmeticItemReflineTipsColor","\u6807\u7b7e\u989c\u8272")),e.createFontSizeItem(Fa.REFLINE_TIPS_FONTSIZE,E.get("cosmeticItemReflineTipsFontSize","\u6807\u7b7e\u5b57\u53f7"))]};this.protectedCreatePreviews=function(){return[new Bc]}}function Ca(){jc.call(this);var e=this,d=this.protectedMethod;this.getGroupId=function(){return N.CHART_PALETTE};this.getGroupDisplayText=function(){return E.get("cosmeticGroupChartPalette","\u8c03\u8272\u677f")};this.protectedGetComment=function(){return E.get("commentPalette",
"\u201c\u57fa\u672c\u201d\u8c03\u8272\u677f\u5f71\u54cd\u67f1\u56fe\u3001\u997c\u56fe\u7b49\u5927\u90e8\u5206\u56fe\u8868\u3002\u201c\u5f3a\u5bf9\u6bd41\u201d\u8c03\u8272\u677f\u5f71\u54cd\u6298\u7ebf\u56fe\u3001\u96f7\u8fbe\u56fe\u7b49\u7ed8\u5236\u7ebf\u72b6\u7684\u56fe\u8868\u3002\u201c\u5f3a\u5bf9\u6bd42\u201d\u8c03\u8272\u677f\u5f71\u54cd\u6c14\u6ce1\u56fe\u3001GIS\u5730\u56fe\u7b49\u7ed8\u5236\u8272\u5757\u7684\u56fe\u8868\u3002")};this.protectedGetSettingItemColumns=function(){return 1};this.protectedCreateSettingItems=
function(){return[d.createPaletteItem(N.Key_Palette_Base,E.get("cosmeticItemPaletteBase","\u57fa\u672c")),d.createPaletteItem(N.Key_Palette_ContrastingLine,E.get("cosmeticItemPaletteContrasting1","\u5f3a\u5bf9\u6bd41")),d.createPaletteItem(N.Key_Palette_ContrastingArea,E.get("cosmeticItemPaletteContrasting2","\u5f3a\u5bf9\u6bd42"))]};this.protectedCreatePreviews=function(){return[new yc(e.getGroupId()),new Gc(e.getGroupId()),new Qc(e.getGroupId())]};this.protectedGetPreviewPageSize=function(){return[300,
240]}}function vb(){jc.call(this);var e=this,d=this.protectedMethod;this.getGroupId=function(){return Fa.CHART_KPI};this.getGroupDisplayText=function(){return E.get("cosmeticGroupChartKpi","\u4e1a\u52a1\u6307\u6807")};this.protectedCreateSettingItems=function(){return[d.createColorItem(ua.C_COLOR,E.get("cosmeticItemKpiCaptionColor","\u4e3b\u6307\u6807\u6458\u8981")),d.createColorItem(ua.P_VALUE_COLOR,E.get("cosmeticItemKpiPrimaryValueColor","\u4e3b\u6307\u6807\u6570\u503c")),d.createColorItem(ua.P_TEXT_COLOR,
E.get("cosmeticItemKpiPrimaryTextColor","\u4e3b\u6307\u6807\u6587\u5b57")),null,d.createColorItem(ua.S_VALUE_COLOR,E.get("cosmeticItemKpiSecondaryValueColor","\u526f\u6307\u6807\u6570\u503c")),d.createColorItem(ua.S_TEXT_COLOR,E.get("cosmeticItemKpiSecondaryTextColor","\u526f\u6307\u6807\u6587\u5b57"))]};this.protectedCreatePreviews=function(){return[new Pa(e.getGroupId())]}}function Kb(){jc.call(this);var e=this,d=this.protectedMethod;this.getGroupId=function(){return N.CHART_PROGRESS};this.getGroupDisplayText=
function(){return E.get("cosmeticGroupChartProgress","\u8fdb\u5ea6\u56fe")};this.protectedCreateSettingItems=function(){return[d.createColorItem(N.Key_ChartProgress_DesiredColor,E.get("cosmeticItemProgressDesiredColor","\u76ee\u6807\u503c\u989c\u8272")),d.createColorItem(N.Key_ChartProgress_CompleteColor,E.get("cosmeticItemProgressCompleteColor","\u5b9e\u9645\u503c\u989c\u8272"))]};this.protectedCreatePreviews=function(){return[new fb(e.getGroupId())]};this.protectedGetComment=function(){return E.get("commentPregress",
"1\u3001\u5f71\u54cd\u67f1\u5f62\u8fdb\u5ea6\u56fe\u3001\u6761\u5f62\u8fdb\u5ea6\u56fe\u3001\u73af\u5f62\u8fdb\u5ea6\u56fe\u3002\r\n2\u3001\u5efa\u8bae\uff1a\u7528\u540c\u4e00\u8272\u7cfb\uff0c\u76ee\u6807\u503c\u989c\u8272\u4e0e\u5e95\u8272\u4eae\u5ea6\u66f4\u63a5\u8fd1\uff0c\u5b9e\u9645\u503c\u989c\u8272\u53cd\u5dee\u5927\u66f4\u663e\u773c\u3002")}}function rb(){jc.call(this);var e=this,d=this.protectedMethod;this.getGroupId=function(){return Fa.CHART_PIE};this.getGroupDisplayText=function(){return E.get("cosmeticGroupChartRing",
"\u73af\u5f62\u56fe")};this.protectedCreateSettingItems=function(){return[d.createColorItem(Sb.RING_CENTER_COLOR,E.get("cosmeticItemRingCenterColor","\u4e2d\u5fc3\u603b\u8ba1\u503c\u989c\u8272"))]};this.protectedCreatePreviews=function(){return[new gb(e.getGroupId())]}}function cc(){jc.call(this);var e=this,d=this.protectedMethod;this.getGroupId=function(){return Fa.CHART_RADAR};this.getGroupDisplayText=function(){return E.get("cosmeticGroupChartRadar","\u96f7\u8fbe\u56fe")};this.protectedCreateSettingItems=
function(){return[d.createWithAlphaColorItem(hc.WEB_LINE,E.get("cosmeticItemWebLineColor","\u7f51\u683c\u7ebf")),d.createWithAlphaColorItem(hc.WEB_INTERVAL_BACKGROUND,E.get("cosmeticItemWebIntervalColor","\u7f51\u683c\u95f4\u9694\u586b\u5145"))]};this.protectedCreatePreviews=function(){return[new sb(e.getGroupId())]}}function Ab(){jc.call(this);var e=this,d=this.protectedMethod;this.getGroupId=function(){return Fa.CHART_GRID};this.getGroupDisplayText=function(){return E.get("cosmeticGroupChartGrid",
"\u5217\u8868")};this.protectedCreateSettingItems=function(){return[d.createFontSizeItem(wc.FONTSIZE,E.get("cosmeticItemFontSize","\u5b57\u53f7")),d.createColorItem(wc.COLOR,E.get("cosmeticItemTextColor","\u6587\u5b57\u989c\u8272")),d.createWithAlphaColorItem(wc.TITLE_BACKGROUND,E.get("cosmeticItemGridHeadBackgroundColor","\u8868\u5934\u80cc\u666f\u989c\u8272")),d.createNullableColorItem(wc.TITLE_COLOR,E.get("cosmeticItemGridHeadColor","\u8868\u5934\u6587\u5b57\u989c\u8272"))]};this.protectedCreatePreviews=
function(){return[new Na(e.getGroupId())]}}function Va(){jc.call(this);var e=this,d=this.protectedMethod;this.getGroupId=function(){return Fa.CHART_WATERFALL};this.getGroupDisplayText=function(){return E.get("cosmeticGroupChartWaterfall","\u7011\u5e03\u56fe")};this.protectedCreateSettingItems=function(){return[d.createColorItem(ma.POSITVE_COLOR,E.get("cosmeticItemWaterfallPositiveColor","\u6761\u76ee\u6b63\u503c")),d.createColorItem(ma.NEGATIVE_COLOR,E.get("cosmeticItemWaterfallNegativeColor","\u6761\u76ee\u8d1f\u503c")),
d.createColorItem(ma.STAGE_COLOR,E.get("cosmeticItemWaterfallStageColor","\u9636\u6bb5"))]};this.protectedCreatePreviews=function(){return[new eb(e.getGroupId())]}}function ba(){function e(){ib.call(this);var W=this,ja=this.protectedMethod,Ea=new rc;this.show=function(Ua,mb){W.setSize(540,360);ja.setTitle(E.get("cosmeticGroupChartPalette","\u8c03\u8272\u677f"));ja.setContentPaneCreator(function(){var Gb=$("<div>"),zb=Ea.createJqUi();zb.appendTo(Gb);ob.layoutCtrlWithLRTB(zb,6,6,null,6,6,null);return Gb});
ja.setClosingAction(function(Gb){Gb&&(Ea.acceptEditing(Ua),mb())});W.showDialog();Ea.setPalette(Ua)}}var d,q;this.setUserObject=function(W){z().setUserObject(W)};this.getUserObject=function(){return z().getUserObject()};this.getJqUi=function(){return z().getJqUi()};this.setColorsString=function(W){var ja=new fc;ja.decodeFromString(W);z().setModel(ja)};this.setEditedListener=function(W){q=W};var z=function(){d||(d=new $c,d.setCustomPainter(w),d.addActionListener(B));return d},w=function(W){var ja=
d.getJqUi(),Ea=ja.children(".qing-custom-palette");Ea.remove();if(W){Ea=$("<div>");Ea.addClass("qing-custom-palette");Ea.css("overflow","hidden");W=W.getColors();for(var Ua=0;Ua<W.length;Ua++){var mb=W[Ua],Gb=$("<div>");Gb.css("background-color",mb);Gb.appendTo(Ea);ob.layoutCtrlWithLRTB(Gb,8*Ua,null,8,1,1,null)}ob.layoutCtrlWithLRTB(Ea,0,20,null,4,1,null);Ea.appendTo(ja)}return""},B=function(W){var ja=W.getModel();(new e).show(ja,function(){z().setModel(ja);var Ea=z().getModel().encodeToString();
q(Ea)})}}function bb(){this.getJqUi=function(){throw Error("Implement");};this.update=function(e){throw Error("Implement");}}function jb(){bb.call(this);var e=this,d=[];this.appendChild=function(q){d.push(q);e.protectedGetJqContainer().append(q.getJqUi())};this.protectedGetJqContainer=function(){throw Error("Implement");};this.update=function(q){e.protectedUpdateSelf(q);for(var z=0;z<d.length;z++)d[z].update(q)};this.protectedUpdateSelf=function(q){throw Error("Implement");}}function Aa(){jb.call(this);
var e=$("<div>"),d=100,q=100;this.getJqUi=function(){return e};this.protectedGetJqContainer=function(){return e};this.protectedUpdateSelf=function(z){z=z.pickItems(N.DSB_PAGE)[N.Key_Page_BackgroundColor];e.css("background-color",z);e.css({"box-sizing":"border-box",border:"1px solid #f0f0f0"})};this.setWidth=function(z){d=z};this.getWidth=function(){return d};this.setHeight=function(z){q=z};this.getHeight=function(){return q}}function db(){bb.call(this);var e,d;this.getJqUi=function(){e||(e=$("<div>"),
d=$("<div>"),d.css({"font-size":"16px","text-align":"center"}),d.text(E.get("cosmeticGroupPageTitleBar","\u9875\u9762\u6807\u9898\u680f")),d.appendTo(e),ob.layoutCtrlWithLRTB(d,10,10,null),ob.layoutCtrlMiddleAlign(d,20));return e};this.update=function(q){var z=q.pickItems(N.DSB_PAGE_TITLE_BAR),w=z[N.Key_PageTitleBar_BackgroundColor],B=z[N.Key_PageTitleBar_SeparaterLineWidth];z=z[N.Key_PageTitleBar_SeparaterColor];B=(B?B:0)+"px solid "+(z?z:"transparent");e.css("background-color",w?w:"");e.css({"box-sizing":"border-box",
"border-bottom":B});z=q.pickItems(N.DSB_LABEL);N.decorateLabel(d,z)}}function t(){jb.call(this);var e,d,q=$("<div>"),z=!1;this.setTitle=function(w){d=$("<div>");d.text(w)};this.setOpacityRequired=function(w){z=w};this.getJqUi=function(){e||(e=$("<div>"),e.append(q),d?(d.css("line-height","40px"),ob.makeTextOmissible(d),e.append(d),ob.layoutCtrlWithLRTB(d,20,20,null,0,null,40),ob.layoutCtrlWithLRTB(q,20,20,null,40,null,10)):ob.layoutCtrlWithLRTB(q,20,20,null,10,10,null));return e};this.protectedGetJqContainer=
function(){return q};this.protectedUpdateSelf=function(w){w=w.pickItems(N.DSB_CARD);N.decorateCardSimpleBorder(z,e,w);d&&N.decorateCardTitle(d,w)}}function V(){bb.call(this);var e=$("<div>"),d;this.setText=function(q){e.text(q)};this.setTransparent=function(q){d=q};this.getJqUi=function(){return e};this.update=function(q){q=q.pickItems(N.DSB_CARD);N.decorateCardModalLayer(e,d,q);d?e.css("text-align","right"):(e.css("text-align","center"),e.css("line-height",e.prop("clientHeight")+"px"))}}function la(){bb.call(this);
var e;this.getJqUi=function(){e||(e=$("<div>"),e.css("font-size","14px"),e.text(E.get("previewLabel","\u6587\u5b57\u793a\u4f8b")));return e};this.update=function(d){d=d.pickItems(N.DSB_LABEL);N.decorateLabel(e,d)}}function Qa(){bb.call(this);var e;this.getJqUi=function(){if(!e){for(var d=[],q=1;3>=q;q++)d.push(E.get("previewOption","\u9009\u9879\u793a\u4f8b")+q);q=new Rc;q.setItemModels(d);q.setSelected(d[0]);e=q.getJqUi()}return e};this.update=function(d){d=d.pickItems(N.DSB_INPUTER);N.decorateInputer(e,
d)}}function ca(){function e(){com.kingdee.bos.qing.dsb.widget.CosmeticConfigPreviewButtonGroup.call(this);var z;this.bindCosmeticModel=function(w){z=w};this.protectedGetStyleMap=function(){return z.pickItems(N.DSB_BUTTON_GROUP)}}bb.call(this);var d;this.getJqUi=function(){d||(d=new e,d.bindWidget({getWidth:function(){return d.getJqUi().prop("clientWidth")},getHeight:function(){return d.getJqUi().prop("clientHeight")},getLayoutMode:function(){return A.LAYOUT_MODE_HORIZONTAL},getSizeMode:function(){return A.SIZE_MODE_MIDDLE},
isIncludedItemAll:function(){return!1},isMultiSelectable:function(){return!1}}));return d.getJqUi()};this.update=function(z){d.bindCosmeticModel(z);d.getSelectedItems()&&0!=d.getSelectedItems().length?d.repaintButtons():(z=q(),d.setSelectableItems(z),d.setSelectedItems([z[0]]),setTimeout(function(){d.requestRepaint()},0))};var q=function(){for(var z=[],w=1;3>=w;w++){var B=new L;B.setValue(w);B.setText(E.get("previewButton","\u9009\u9879")+w);z.push(B)}return z}}function na(){bb.call(this);var e,d,
q;this.getJqUi=function(){if(!e){e=$("<div>");for(var w=0;3>w;w++){var B=$("<div>");B.text(E.get("previewTabbed","\u9875\u7b7e")+(w+1));ob.makeTextOmissible(B);B.css({"text-align":"center","font-size":"12px","line-height":"24px"});B.appendTo(e);B.data("myIdx",w);B.on("click",function(W){d=$(W.currentTarget).data("myIdx");z()});ob.layoutCtrlWithLRTB(B,60*w,null,59,0,null,24)}d=0}return e};this.update=function(w){q=w;z()};var z=function(){var w=q.pickItems(N.DSB_TABBED_HEAD),B=w[N.Key_TabbedHead_MainColor];
w=w[N.Key_TabbedHead_InverseColor];for(var W=e.children(),ja=0;ja<W.length;ja++){var Ea=W.eq(ja),Ua=d==ja;Ea.css({color:Ua?w:B,"background-color":Ua?B:"transparent",border:"1px solid "+B})}}}function k(){bb.call(this);var e=new com.kingdee.bos.qing.dsb.ui.CosmeticConfigPreviewCreator,d;this.getJqUi=function(){d||(d=$("<div>"));return d};this.update=function(q){q=q.pickItems(N.DESIGN);var z=d.prop("clientWidth"),w=d.prop("clientHeight");q=e.createOperatableTips(0,0,z,w,z,w,!0,!0,!1,q,null,null);d.empty();
d.append(q)}}function Wa(){bb.call(this);var e;this.getJqUi=function(){e||(e=$("<div>"));return e};this.update=function(d){d=d.pickItems(N.DESIGN);N.decorateDesigntimeRectangle(e,d)}}function fa(){bb.call(this);var e,d,q;this.getJqUi=function(){e||(e=$("<div>"));return e};this.update=function(B){B=B.pickItems(N.DESIGN);N.decorateDesigntimeRectangle(e,B);z().setStyleMap(B);w()};var z=function(){if(!d){var B=I.getInstance(J.WidgetType_TabbedContainer).createWidgetModel(!0);q=B.getWidget(0);d=new com.kingdee.bos.qing.dsb.widget.CosmeticConfigPreviewTabbedSelector(B,
function(W){q=W;w()})}return d},w=function(){e.empty();z().createJqUi(0,0,q).appendTo(e)}}function ta(){bb.call(this);var e;this.getJqUi=function(){e||(e=$("<div>"),e.text(E.get("previewCrumb","\u5e7f\u4e1c\u7701 > \u6df1\u5733\u5e02 > \u5357\u5c71\u533a")));return e};this.update=function(d){d=d.pickItems(N.SQUARE_EXHIBITION);e.css({color:d[kc.STYLE_CRUMB_COLOR]||"#999","font-size":100+10*parseInt(d[kc.STYLE_CRUMB_FONTSIZE_ENHANCED]||"0")+"%"})}}function Ra(){bb.call(this);var e;this.getJqUi=function(){e||
(e=$("<div>"),e.text(E.get("previewPromptNoData","\u6ca1\u6709\u53ef\u5c55\u73b0\u7684\u6570\u636e")));return e};this.update=function(d){d=d.pickItems(N.SQUARE_EXHIBITION);e.css({color:d[kc.STYLE_PROMPTLABEL_COLOR],"font-size":100+10*parseInt(d[kc.STYLE_PROMPTLABEL_FONTSIZE_ENHANCED]||"0")+"%"})}}function Oa(){bb.call(this);var e=this,d,q;this.getJqUi=function(){if(!d){d=$("<div>");var z=e.protectedCreateChartModel();q=e.protectedCreateChartCtrl();q.setModel(z)}return d};this.update=function(z){d.empty();
var w={};z.pickItems(N.CHART_COMMON,w);e.protectedCustomUpdateStyle(z,w,q);q.getAttr().putCustomStyles(w);q.draw(d[0],d.prop("clientWidth"),d.prop("clientHeight"))};this.protectedCustomUpdateStyle=function(z,w,B){};this.protectedCreateSeries=function(){var z=[],w=e.protectedGetSeriesDescription(),B=w[0],W=w[1];w=w[2];for(var ja=0;ja<B.length;ja++){for(var Ea=B[ja],Ua=W[ja],mb=w[ja],Gb=[],zb=0;zb<mb.length;zb++){var tb=null;null!==mb[zb]&&(tb=new ia,tb.setValue(mb[zb]),tb.setText(mb[zb]));Gb.push(tb)}mb=
new Y;mb.setNodes(Gb);mb.setName(Ea);mb.setColor(Ua);z.push(mb)}return z};this.protectedCreateChartModel=function(){var z=new R,w=z.setCategories,B=[],W=e.protectedGetCategoryDescription(),ja=W[0];W=W[1];for(var Ea=0;Ea<ja.length;Ea++){var Ua=new T;Ua.setLabel(ja[Ea]);W&&Ua.setColor(W[Ea]);B.push(Ua)}w.call(z,B);z.setSeries(e.protectedCreateSeries());w=z.setScopes;B=[];ja=e.protectedGetScopesDescription();for(W=0;W<ja.length;W++)Ea=new Ba,Ea.setAppointedMinMax(ja[W][0],ja[W][1]),B.push(Ea);w.call(z,
B);w=z.setPaintableLines;if(B=e.protectedGetReflineDescription()){ja=[];for(W=0;W<B.length;W++)Ea=B[W],Ua=new Ya,Ua.setLabel(Ea[0]),Ua.setLineValue(Ea[1]),ja.push(Ua);B=[ja]}else B=null;w.call(z,B);return z};this.protectedCreateChartCtrl=function(){return new qa};this.protectedGetCategoryDescription=function(){return[["A","B"],null]};this.protectedGetSeriesDescription=function(){var z=E.get("previewSeries","\u7cfb\u5217");return[[z+1,z+2],["#ccc","#999"],[[110,40],[70,100]]]};this.protectedGetScopesDescription=
function(){return[[0,120]]};this.protectedGetReflineDescription=function(){return null}}function Qb(){Oa.call(this);this.protectedCreateChartCtrl=function(){var e=new ea;e.getAttr().setPYUnitText(E.get("previewPrimaryRulerUnit","\u5143"));e.getAttr().setSYUnitText("%");return e};this.protectedGetScopesDescription=function(){return[[0,125],[0,105]]}}function Ka(){Oa.call(this);this.protectedGetCategoryDescription=function(){var e=E.get("previewCategory","\u7c7b\u522b");return[[e+1,e+2],null]}}function $b(){Oa.call(this);
this.protectedCreateChartCtrl=function(){var e=new qa;e.getAttr().setShowDataLabel(!0);return e};this.protectedCustomUpdateStyle=function(e,d,q){e=e.pickItems(N.DSB_CARD);d[Fa.BACKGROUND]=e[N.Key_Card_BackgroundColor]}}function pc(){Oa.call(this);var e=this;this.protectedCreateChartCtrl=function(){var d=new qa,q=d.setLegendModel,z=e.protectedGetSeriesDescription(),w=z[0];z=z[1];var B=new $a;B.prepare(z,w,null,0);q.call(d,B);return d}}function Bc(){Oa.call(this);this.protectedGetReflineDescription=
function(){return[[E.get("previewReflineTips","\u53c2\u8003\u7ebf"),60]]};this.protectedCustomUpdateStyle=function(e,d,q){e=e.pickItems(N.DSB_CARD);d[Fa.BACKGROUND]=e[N.Key_Card_BackgroundColor]}}function yc(e){Oa.call(this);this.protectedGetSeriesDescription=function(){var d=E.get("previewSeries","\u7cfb\u5217");return[[d+1,d+2,d+3],["#999","#999","#999"],[[70,85],[80,105],[90,90]]]};this.protectedCustomUpdateStyle=function(d,q,z){q=d.pickItems(e);d=q[N.Key_Palette_Base];q=new fc;q.decodeFromString(d);
d=q.getColors();z=z.getModel().getSeries();z[0].setColor(d[0]);z[1].setColor(d[1]);z[2].setColor(d[2])}}function Gc(e){Oa.call(this);this.protectedCreateChartCtrl=function(){return new ab};this.protectedGetCategoryDescription=function(){return[["1","2","3","4","5"],null]};this.protectedGetSeriesDescription=function(){var d=E.get("previewSeries","\u7cfb\u5217");return[[d+1,d+2],["#999","#999"],[[40,65,50,90,70],[60,75,80,65,95]]]};this.protectedCustomUpdateStyle=function(d,q,z){q=d.pickItems(e);d=
q[N.Key_Palette_ContrastingLine];q=new fc;q.decodeFromString(d);d=q.getColors();z=z.getModel().getSeries();z[0].setColor(d[0]);z[1].setColor(d[1])}}function Qc(e){Oa.call(this);this.protectedCreateChartCtrl=function(){return new Db};this.protectedCreateSeries=function(){for(var d=[],q=["I","II","III"],z=["#666","#999","#ccc"],w=[[[10,70,2],[50,50,6]],[[20,10,3],[40,30,4]],[[90,80,1],[70,40,5]]],B=0;B<q.length;B++){for(var W=q[B],ja=z[B],Ea=w[B],Ua=[],mb=0;mb<Ea.length;mb++){var Gb=Ea[mb],zb=new pa;
zb.setXAxisValue(Gb[0]);zb.setYAxisValue(Gb[1]);zb.setZAxisValue(Gb[2]);Ua.push(zb)}Ea=new Y;Ea.setNodes(Ua);Ea.setName(W);Ea.setColor(ja);d.push(Ea)}return d};this.protectedGetScopesDescription=function(){return[[0,100],[0,100],[1,3]]};this.protectedCustomUpdateStyle=function(d,q,z){q=d.pickItems(e);d=q[N.Key_Palette_ContrastingArea];q=new fc;q.decodeFromString(d);d=q.getColors();z=z.getModel().getSeries();z[0].setColor(Pb.withOpacityToRgba(d[0],.7));z[1].setColor(Pb.withOpacityToRgba(d[1],.7));
z[2].setColor(Pb.withOpacityToRgba(d[2],.7))}}function Pa(e){Oa.call(this);this.protectedCreateChartCtrl=function(){return new ha};this.protectedGetCategoryDescription=function(){return["caption_text primary_value primary_text secondary_text secondary_value secondary_text".split(" "),null]};this.protectedGetSeriesDescription=function(){return[["series"],[null],[[E.get("previewKpiCaption","\u9500\u552e\u989d"),"100",E.get("previewKpiPrimaryText","\u4e07\u5143"),E.get("previewKpiSecondaryText1","\u6570\u91cf"),
"1234",E.get("previewKpiSecondaryText2","\u4e2a")]]]};this.protectedCustomUpdateStyle=function(d,q,z){d.pickItems(e,q)}}function fb(e){Oa.call(this);var d=this;this.protectedCreateChartCtrl=function(){var q=new Ha;q.getAttr().setShowLegend(wb.ShowLegend_Bottom);var z=q.setLegendModel,w=d.protectedGetSeriesDescription(),B=w[0],W=w[1];w=[""+w[2][0][0],""+w[2][1][0]];var ja=new $a;ja.prepare(W,w,B,0);z.call(q,ja);return q};this.protectedGetCategoryDescription=function(){return[[""],null]};this.protectedGetSeriesDescription=
function(){return[[E.get("previewProgressDesired","\u76ee\u6807\u503c"),E.get("previewProgressComplete","\u5b9e\u9645\u503c")],["red","blue"],[[100],[60]]]};this.protectedCustomUpdateStyle=function(q,z,w){z=q.pickItems(e);q=z[N.Key_ChartProgress_DesiredColor];z=z[N.Key_ChartProgress_CompleteColor];var B=w.getModel().getSeries();B[0].setColor(q);B[1].setColor(z);w.getLegendModel().updateColor([q,z])}}function gb(e){Oa.call(this);this.protectedCreateChartCtrl=function(){var d=new xa;d.getAttr().setHollow(!0);
d.getAttr().setShowTotalWhenHollow(!0);return d};this.protectedGetCategoryDescription=function(){return[["A","B","C"],["#40A9FF","#A0D911","#FFA940"]]};this.protectedGetSeriesDescription=function(){return[["series"],[null],[[100,100,100]]]};this.protectedCustomUpdateStyle=function(d,q,z){d.pickItems(e,q);d=d.pickItems(N.DSB_CARD);q[Fa.BACKGROUND]=d[N.Key_Card_BackgroundColor]}}function sb(e){Oa.call(this);this.protectedCreateChartCtrl=function(){return new Ia};this.protectedGetCategoryDescription=
function(){return[["A","B","C","D","E"],null]};this.protectedGetSeriesDescription=function(){return[["series"],["#40A9FF"],[[120,95,60,50,85]]]};this.protectedCustomUpdateStyle=function(d,q,z){d.pickItems(e,q)}}function Na(e){Oa.call(this);this.protectedCreateChartCtrl=function(){return new qb};this.protectedCreateChartModel=function(){return Fb.createFromJson({columns:[{title:"F1"},{title:"F2",style:0}],rows:[{cells:[{content:"AAAA"},{content:"111.11"}]},{cells:[{content:"BBBB"},{content:"222.22"}]},
{cells:[{content:"CCCC"},{content:"333.33"}]}],styles:[{align:"right"}]})};this.protectedCustomUpdateStyle=function(d,q,z){d.pickItems(e,q)}}function eb(e){Oa.call(this);this.protectedCreateChartCtrl=function(){return new ub};this.protectedGetCategoryDescription=function(){return["XabcdY".split(""),null]};this.protectedGetSeriesDescription=function(){return[["value","start"],[null,null],[[80,60,40,-30,-20,130],[null,80,140,180,150,null]]]};this.protectedGetScopesDescription=function(){return[[0,190]]};
this.protectedCustomUpdateStyle=function(d,q,z){d.pickItems(e,q)}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.dsb&&(com.kingdee.bos.qing.dsb={});"undefined"==typeof com.kingdee.bos.qing.dsb.ui&&(com.kingdee.bos.qing.dsb.ui={});var Lb=com.kingdee.bos.qing.dsb.ui;Lb.CosmeticConfigDialog=function(){M.call(this);
var e=this,d=this.protectedMethod,q=new kb,z=!1,w;this.setCosmeticModel=function(va){q.setCosmeticModel(va)};this.show=function(va){var sa=$(document.body),G=sa.prop("clientWidth");sa=sa.prop("clientHeight");G=parseInt(.8*G);sa=parseInt(.9*sa);e.setSize(G,sa);d.getDialogCtrl().setMinSize(520,400);d.setTitle(E.get("customSkin","\u81ea\u5b9a\u4e49\u5916\u89c2\u98ce\u683c"));d.getDialogCtrl().setResizeEnabled();d.getDialogCtrl().setFullScreenEnabled();d.getDialogCtrl().addResizeListener(function(D,l){q.resize()});
d.setContentPaneCreator(function(){return q.getJqUi()});d.setClosingChecker2(function(D){D(!0)},function(D){if(z){var l=!1,h=Zc.createFeedbackDialog();h.setOptionType(Zc.OPTION_YES_NO);h.setMessage(E.get("askAbort","\u662f\u5426\u653e\u5f03\u60a8\u7684\u4fee\u6539\uff1f"));h.setClosingChecker(function(u){l=u==Zc.RETURN_YES;return!0});h.setClosedAction(function(){D(l)});h.showDialog()}else D(!0)},!0);d.setClosingAction(function(D){D&&(D=new H,D.fromJsonObject(q.getCosmeticModel().toJsonObject()),va(D))});
e.showDialog();B();W();q.resize()};var B=function(){d.getDialogCtrl().setToolbarVisible(!0);var va=d.getDialogCtrl().createToolbarButton(E.get("undo","\u64a4\u6d88"),function(){q.getCommandManager().isCanUndo()&&q.getCommandManager().undo()}),sa=d.getDialogCtrl().createToolbarButton(E.get("redo","\u53cd\u64a4\u6d88"),function(){q.getCommandManager().isCanRedo()&&q.getCommandManager().redo()});Ea(va,sa);q.getCommandManager().addPerformedListener(function(G,D,l){Ea(va,sa);z=!0;!D&&ja(G,l)});d.initToolbarExportButton("qing-style-dashboard",
"20230530",mb,Gb,tb,zb,function(){return q.getJqUi().parent()},!0)},W=function(){var va=q.getJqUi().parent().parent().find(".sa-ctrl-dialog-footer");w=new Xb;var sa=w.getJqUi();sa.appendTo(va);ob.layoutCtrl(sa,16,4,200,20)},ja=function(va,sa){sa=sa?E.get("undo","\u64a4\u6d88"):E.get("redo","\u53cd\u64a4\u6d88");w.setText(sa+": "+va.getCaption());clearTimeout(w.getUserObject());va=setTimeout(function(){w.setText("")},5E3);w.setUserObject(va)},Ea=function(va,sa){Ua(va,q.getCommandManager().isCanUndo());
Ua(sa,q.getCommandManager().isCanRedo())},Ua=function(va,sa){var G={};G.color=sa?"":"#ccc";G.cursor=sa?"":"default";G["background-color"]=sa?"":"transparent";va.css(G)},mb=function(va){return va.getKeyOfCosmetic()},Gb=function(){return q.getCosmeticModel().toJsonObject()},zb=function(va,sa){var G=new H;G.fromJsonObject(va);G=G.copyToEdit();va=new p;va.bindConfigUi(q);va.setImportTarget(G);q.getCommandManager().perform(va);sa(!0)},tb=function(va,sa){if(20211225>va){var G=sa.groups;G.chartWaterfall=
[{key:"waterfallPositiveColor",value:"#73D13D"},{key:"waterfallNegativeColor",value:"#F57582"},{key:"waterfallStageColor",value:"#40A9FF"}]}20230530>va&&(G=sa.groups,G.pageTitleBar=[{key:"backgroundColor",value:""},{key:"separaterLineWidth",value:"0"},{key:"separaterColor",value:""}])}};var ob,Pb,ec,E,ib,bc,nc,Xb,Mc,Kc,Ic,Rc,Zc,$c,v,g,r,y,R,T,Y,ia,pa,Ba,Ya,$a,Fb,wb,Fa,ua,Sb,hc,wc,ma,qa,ea,ha,xa,Ha,Ia,qb,ab,ub,Db,xb,fc,rc,kc,N,M,H,L,A,I,J,f,aa;(function(){var e=com.kingdee.bos.qing.common;ob=e.DomUtil;
Pb=e.ColorUtil;ec=e.CanvasUtil;e=com.kingdee.bos.qing.framework.common;E=e.MultilanguageManager.createPackageAccessor(Lb);e=com.kingdee.bos.qing.ui.component;ib=e.AbstractModalDialog;bc=e.SplitPane;nc=e.Tree;Xb=e.Label;Mc=e.ComboColor;Kc=e.ColorChooser;Ic=e.Spinner;Rc=e.ComboBox;Zc=e.MessageDialog;$c=e.F7Selector;v=e.TitleContainer;e=com.kingdee.bos.qing.common.ui;g=e.OpacityEditor;r=e.BlinkHelper;y=e.ColorSelector;e=com.kingdee.bos.qing.common.shared;xb=e.DataPreparingProgressParser;e=com.kingdee.bos.qing.chart.model;
R=e.NormalChartModel;T=e.Category;Y=e.Series;ia=e.Node;pa=e.XYNode;Ba=e.AxisValueScope;Ya=e.Refline;$a=e.DiscreteColorLegendModel;Fb=e.GridChartModel;wb=e.AbstractAttr;e=com.kingdee.bos.qing.chart.render;Fa=e.StyleTool;ua=e.KpiChartRender;Sb=e.PieChartRender;hc=e.RadarChartRender;wc=e.GridChartRender;ma=e.WaterfallChartRender;e=com.kingdee.bos.qing.chart.square;qa=e.ColumnChart;ea=e.CompositeChart;ha=e.KPICardChart;xa=e.PieChart;Ha=e.ProgressCircleChart;Ia=e.RadarChart;qb=e.GridChart;ab=e.LineChart;
ub=e.WaterfallChart;e=com.kingdee.bos.qing.chart.longer;Db=e.ScatterChart;e=com.kingdee.bos.qing.core.model;fc=e.Palette;e=com.kingdee.bos.qing.core.ui;rc=e.PaletteSettingPanel;e=com.kingdee.bos.qing.square.ui;kc=e.ExhibitionContent;e=com.kingdee.bos.qing.dsb;N=e.CosmeticBag;e=com.kingdee.bos.qing.dsb.commonui;M=e.AbstractDialogWithJsonExportor;e=com.kingdee.bos.qing.dsb.model;H=e.CosmeticModel;L=e.ValueTextItem;A=e.WidgetButtonGroup;I=e.WidgetTypeManager;J=e.DashboardModel;e=com.kingdee.bos.qing.dsb.controller;
f=e.CommandManager;aa=e.AbstractAction})()})();(function(){function p(){var a={};this.registerClass=function(b,c){a[b]=c};this.findClass=function(b){var c=a[b];if(!c)throw Error("WidgetCtrl not found: "+b);return c}}function Wb(){var a=this,b=!1;this.setPreview=function(c){b=c};this.isPreview=function(){return b};this.isDesigntime=function(){return!1};this.isMobile=function(){return!1};this.createWidgetCtrl=function(c){var m=new (a.protectedGetRegister().findClass(c.getWidgetTypeName()));m.bindWidget(c);b&&m.appendSituation(kb.Situation_Runtime_Preview);
a.protectedInitWidgetCtrl(m);return m};this.protectedInitWidgetCtrl=function(c){throw Error("Implement");};this.protectedGetRegister=function(){throw Error("Implement");}}function kb(){var a,b=0;this.bindWidget=function(c){a=c};this.appendSituation=function(c){b|=c};this.getJqUi=function(){throw Error("Implement");};this.protectedMethod={getWidget:function(){return a},isDesigntime:function(){return(b&kb.Situation_Designtime)==kb.Situation_Designtime},isPreview:function(){return(b&kb.Situation_Runtime_Preview)==
kb.Situation_Runtime_Preview},isMobile:function(){return(b&kb.Situation_Runtime_Mobile)==kb.Situation_Runtime_Mobile}}}function Mb(){var a=this,b=this.protectedMethod,c,m,n,x,C,Z,P,O;this.updateTopBar=function(La){O=La;X()};this.getJqUi=function(){c||(C=$("<div>"),C.css("position","absolute"),x=$("<div>"),x.css("position","absolute"),N.makeTextOmissible(x),n=$("<div>"),n.css("z-index",2),n.css("overflow","hidden"),n.append(C),n.append(x),Z=$("<div>"),Z.css("z-index",4),c=$("<div>"),c.css("overflow",
"hidden"),c.append(n),c.append(Z),a.protectedInitUi(c),X());return c};this.getJqContent=function(){return Z};this.repaintSurface=function(){X()};this.showWaiting=function(La,cb,hb){P||(P=new D,P.hookOwner(c,function(Zb,mc){wa.decorateCardModalLayer(Zb,La?!0:!1);Zb.css("z-index",6);La&&N.layoutCtrlWithLRTB(mc,"",20,"",12,"","")}));P.showWaiting(cb,hb)};this.hookWaitingProgressDisplayer=function(La){P&&P.hookProgressDisplayer(La)};this.hideWaiting=function(){P&&(P.hideWaiting(),P=null)};this.protectedInitUi=
function(La){throw Error("Implement");};var F=function(){var La=b.getWidget();if(La.isBareSurface())wa.undecorateCardSimpleBorder(c),K();else{var cb=La.getActiveBackgroundColor(),hb=La.isOpacityRequired(),Zb=La.getUsableCardBorder();if(Zb.getType()==gd.TYPE_MODEL){wa.undecorateCardSimpleBorder(c);!cb&&(cb=wa.getCardBackgroundColor(hb));var mc=Zb.getCardLook();mc.hookBackgroundColor(cb);Q(function(tc,sc,Ec){var Fc=new Lc;Fc.setModel(mc);Fc.draw(tc,0,0,sc,Ec)})}else Zb.getType()==gd.TYPE_IMAGE?(wa.undecorateCardSimpleBorder(c),
Zb.getImage()?Zb.loadImage(function(tc){tc?Q(function(sc,Ec,Fc){var Wc=Zb.getFixedEdges(),Xc=new Ib;Xc.setModel(tc,Wc[0],Wc[1],Wc[2],Wc[3]);Xc.draw(sc,0,0,Ec,Fc)}):K()}):(K(),wa.decorateCardSimpleBorder(hb,c),cb&&c.css("background-color",cb))):(K(),wa.decorateCardSimpleBorder(hb,c),cb&&c.css("background-color",cb));wa.decorateCardTitle(x);La.isSkinActive()&&(cb=La.getTitleFontName(),hb=La.getTitleFontSize(),(La=La.getTitleColor())&&x.css("color",La),hb&&x.css("font-size",hb+"px"),cb&&x.css("font-family",
cb))}},Q=function(La){var cb=c.prop("clientWidth"),hb=c.prop("clientHeight");m||(m=$(I.createCanvas()),m.css("z-index",1),c.append(m));N.layoutCtrl(m,0,0,cb,hb);var Zb=I.createContext2d(m[0],cb,hb);La(Zb,cb,hb)},K=function(){m&&(m.remove(),m=null)},X=function(){if(Z){var La=b.getWidget(),cb=La.getPaddingTop(),hb=La.getPaddingBottom(),Zb=La.getPaddingLeft(),mc=La.getPaddingRight();N.layoutCtrlWithLRTB(Z,Zb,mc,null,cb,hb,null);N.layoutCtrlWithLRTB(n,0,0,null,0,null,cb);n.attr("title",null);La.isBareSurface()?
(C.css("display","none"),x.css("display","none"),ra(cb,null,null,null,null)):(x.css("display","block"),(La=La.getUsableCardTopBarIcon())?(C.css("display","block"),za.getPictureLoader()(La.getReferenceCustomMap(),function(tc,sc,Ec){S(cb,"url("+tc+")",sc,Ec)},function(tc){var sc=oa.getInsteadOfNotFound();S(cb,sc,24,24);C.css("background-size","");n.attr("title","Icon not found: \r\n"+tc)})):(C.css("background-image",""),C.css("display","none"),ra(cb,null,null,null,null)));a.protectedSyncLayoutMore()}};
this.protectedSyncLayoutMore=function(){throw Error("Implement");};var S=function(La,cb,hb,Zb){var mc=b.getWidget(),tc=mc.getUsableCardTopBarCommon(),sc=tc.getTopBarIconOffset(),Ec=tc.getTopBarIconSize(),Fc=sc?!1:!0,Wc=Ec?!1:!0;tc=!Wc&&tc.isTopBarIconWidthAsPercentage();hb=Wc?hb:Ec[0];Zb=Wc?Zb:Ec[1];mc=Fc?tc?0:mc.getPaddingLeft():sc[0];sc=Fc?La-Zb>>1:sc[1];Fc={};Fc["background-image"]=cb;Fc["background-repeat"]="no-repeat";Fc["background-size"]="100% 100%";Fc.left=mc+"px";Fc.top=sc+"px";Fc.width=
hb+(tc?"%":"px");Fc.height=Zb+"px";C.css(Fc);tc&&(hb=-hb);ra(La,mc,hb,sc,Zb)},ra=function(La,cb,hb,Zb,mc){setTimeout(function(){F();var tc=b.getWidget();if(tc.isBareSurface())var sc=[tc.getPaddingLeft(),La>>1];else{var Ec=c.prop("clientWidth"),Fc=parseInt(x.css("font-size")),Wc=x.css("font-family"),Xc=hb,ad=!(null==cb||null==Xc||null==Zb||null==mc),ld=!1;0>Xc&&(ld=!0,Xc=Math.round(Ec*-Xc/100));var qd=b.getWidget(),Nb=qd.getPaddingLeft();tc=qd.getPaddingRight();var lc=(O?40:0)+a.protectedYieldButtonsSpace(),
Ac=Math.max(Nb,Ec-tc);tc=qd.getCardTitle();sc=Math.ceil(1.25*Fc);var Za=0;if(tc){var Ja=new L;Ja.setFontSize(Fc,Wc);Za=Ja.measureWidth(tc);Ja.destroy()}else tc="";a.protectedConfirmDynamicTitleWidth(null,null);Wc=(Fc=qd.getUsableCardTopBarCommon())?Fc.getCardTitleHorizontalPosition():sd.TitlePosition_Auto;Wc==sd.TitlePosition_Offset?(Ec=Fc.getCardTitleOffsetX(),Xc=Math.min(Za,Math.max(0,Ac-Ec-lc)),Za=Math.min(Za,Math.max(0,Ac-Ec)),Za=a.protectedConfirmDynamicTitleWidth(Za,Xc)):Wc==sd.TitlePosition_MidOfIcon&&
ad?(lc=Math.max(0,cb),Ec=Math.min(Ec,cb+Xc)-lc,Za=Math.min(Za,Ec),Ec=lc+(Ec-Za>>1),Xc=Za):(Ec=ad&&!ld&&2>Xc/mc?cb+Xc+6:Nb,Xc=Math.min(Za,Math.max(0,Ac-Ec-lc)),Za=Math.min(Za,Math.max(0,Ac-Ec)),Za=a.protectedConfirmDynamicTitleWidth(Za,Xc));lc=Fc?Fc.getCardTitleVerticalPosition():sd.TitlePosition_Auto;lc==sd.TitlePosition_Offset?ad=Fc.getCardTitleOffsetY():lc==sd.TitlePosition_MidOfIcon&&ad?(ad=Math.max(0,Zb),ad+=Math.min(La,Zb+mc)-ad-sc>>1):ad=La-sc>>1;lc={};lc.left=Ec+"px";lc.top=ad+"px";lc.width=
Za+"px";lc.height=sc+"px";lc["line-height"]=sc+"px";x.css(lc);x.text(tc);sc=[Ec+Xc,ad+(sc>>1)]}tc=sc[0];sc=sc[1];ka().remove();O&&(Za=new Gb,Za.setIconType(Gb.ICON_TYPE_QUESTION),Za.setTipsText(O),Za.setContainer(c),Hd?Hd(Za,O):(ad=Za.getJqUi(),ad.css("filter","opacity(0.5)"),ad.hide()),Za=Za.getJqUi(),Za.appendTo(n),N.layoutCtrl(Za,tc+4,sc-8),Za.addClass("dsb-widgetcard-topbar-tips"))},0)};this.protectedYieldButtonsSpace=function(){throw Error("Implement");};this.protectedConfirmDynamicTitleWidth=
function(La,cb){return cb};var ka=function(){return n.children(".dsb-widgetcard-topbar-tips")};this.protectedMethod.getOperationLevel=function(){return 3};this.protectedMethod.getUpwardLevel=function(){return 5};this.protectedMethod.updateTitleYield=function(La,cb){x.css("width",cb+"px");cb=ka();La?cb.show():cb.hide()}}function oc(){kb.call(this);Mb.call(this);this.protectedInitUi=function(a){};this.protectedSyncLayoutMore=function(){};this.protectedYieldButtonsSpace=function(){return 0}}function Ub(){this.getGroupName=
function(){throw Error("Override");};this.getGroupDisplayName=function(){throw Error("Override");};this.isEquals=function(a){return _this.getGroupName()==a.getGroupName()}}function lb(){var a=this,b,c,m;this.isSupported=function(){return!0};this.isReleased=function(){return!0};this.getToolboxGroup=function(){throw Error("Override");};this.getTypeName=function(){return b};this.getTypeDisplayName=function(){return c};this.getIconFileName=function(){return m};this.createWidgetModel=function(n){var x=
a.getSuggestSize();n=a.protectedCreateWidgetModel(n);n.setSize(x[0],x[1]);n.setWidthLocked(n.isWidthLockedAlways(a));n.setHeightLocked(n.isHeightLockedAlways(a));return n};this.protectedCreateWidgetModel=function(n){throw Error("Override");};this.createWidgetUi=function(n){var x=a.protectedCreateWidgetUi();x.setModel(n);return x};this.protectedCreateWidgetUi=function(){throw Error("Override");};this.isWidthLockedAlways=function(){return!1};this.isHeightLockedAlways=function(){return!1};this.getMinSize=
function(){return[40,30]};this.getSuggestSize=function(){return[100,75]};this.getMargin=function(){return 0};this.createCustomDesignHandlerJqUi=function(n,x,C,Z){return null};this.selectSource=function(n,x,C){C(!0)};this.createPropertyPanel=function(){throw Error("Override");};this.createOutlineMenu=function(n,x,C,Z,P){return!1};this.protectedMethod={setTypeName:function(n){b=n},setTypeDisplayName:function(n){c=n},setIconFileName:function(n){m=n}}}function Jb(){this.getToolboxGroup=function(){return Sd};
this.selectSource=function(a,b,c){(new Ad).showDialog(a,b,function(m,n,x){if(m&&(b.isIncludeItemAllSupported()&&b.setIncludedItemAll(x),b.setFilterSource(n),x=b.getFilterSource(),x instanceof Td)){n=x.getSourceWidgetName();var C=x.getMetaFieldFullName();n&&C&&(x=xd.createItem(Sa.AffectedType_BindField),x.setTargetWidgetName(n),x.setMetaFieldFullName(C),n=new xd,n.addItem(x),b.setAffectedTargets(n))}c(m)})}}function Rb(){lb.call(this);var a=this;this.getToolboxGroup=function(){return Sd};this.getSuggestSize=
function(){return[180,25]};this.isHeightLockedAlways=function(){return!0};this.selectSource=function(b,c,m){a.protectedCreateInitialDialog().showDialog(b,c,function(n,x,C,Z,P){n&&c.setInitialValue(x,C,Z,P);m(n)})};this.protectedCreateInitialDialog=function(){throw Error("Implement");}}function Ta(a,b){var c=wa.dip(wa.DESIGN);this.setStyleMap=function(C){c=C};this.createJqUi=function(C,Z,P){var O=$("<div>");O.addClass("dsb-pagearea-custom-operate");var F=$("<div>");F.data("my-model",a);F.text("T");
F.appendTo(O);var Q=28,K=0;m(F,Q);a==P?x(F):n(F);N.layoutCtrl(F,-4,K,16,Q);K=Q-1;Q=20;for(F=0;F<a.getWidgetCount();F++){var X=a.getWidget(F),S=$("<div>");S.data("my-model",X);S.text(F+1);m(S,Q);X==P?x(S):n(S);S.appendTo(O);N.layoutCtrl(S,0,K,12,Q);K+=Q-1}N.layoutCtrl(O,C-12,Z,12,K);O.on("click",function(ra){ra=$(ra.target).data("my-model");b(ra)});return O};var m=function(C,Z){C.css({cursor:"pointer","box-sizing":"border-box",border:"1px solid #ccc","border-color":c[wa.Key_Design_ColorB],"border-right-width":"0px",
"text-align":"center","line-height":Z-2+"px"})},n=function(C){C.css({color:c[wa.Key_Design_ColorA],"background-color":c[wa.Key_Design_ColorC]})},x=function(C){C.css({color:c[wa.Key_Design_ColorA],"background-color":c[wa.Key_Design_ColorB]})}}function Ga(){var a=this,b,c,m,n,x,C=!1;this.destroy=function(){a.protectedUnhookWidget(b);b.removePropertyChangedListener(Z);x=m=c=null;C=!0};this.protectedUnhookWidget=function(P){};this.getModel=function(){return b};this.setModel=function(P){b=P;b.addPropertyChangedListener(Z);
a.protectedHookWidget(b)};this.protectedHookWidget=function(P){};this.setCtxApi=function(P){x=P};this.createJqUi=function(P){n=P.isDesigntime();return a.protectedCreateJqUi(P)};this.protectedCreateJqUi=function(P){throw Error("Override");};this.inside=function(){};this.outside=function(){};this.payAttentionTo=function(P,O){};this.run=function(P){};this.collectContextForPreview=function(){};this.applyPreviewContext=function(P){};this.setEditedListener=function(P){c=P};this.setCommunicationListener=
function(P){m=P};var Z=function(P,O){P==b&&(O==Sa.KEY_RECT?setTimeout(a.protectedRepaint,0):a.protectedDoPropertyChanged(O))};this.protectedDoPropertyChanged=function(P){};this.protectedRepaint=function(){};this.protectedMethod={isDesigntime:function(){return n},setupDesigntimeRectangle:function(P){n&&wa.decorateDesigntimeRectangle(P)},fireEditedEvent:function(){c&&c()},fireCommunicationEvent:function(P,O){m&&m(O?O:a,P)},getCtxApi:function(){return x},isDead:function(){return C}}}function Cb(){Ga.call(this);
var a=this;this.protectedCreateJqUi=function(b){b="Unknown widget type: "+a.getModel().getUnknownType();var c=$("<div>");c.text(b);c.attr("title",b);c.css({"background-color":"#fff",color:"#f00"});return c}}function Xa(){Ga.call(this);this.getJqPhysicalContainer=function(){throw Error("Override");}}function jc(){this.updateCardSurface=function(){throw Error("Override");};this.protectedMethod.fakeAction=function(a,b){var c=new mb;c.setText(f.get("effectiveAfterPub","#1\uff0c\u53d1\u5e03\u540e\u751f\u6548\u3002").replace("#1",
b));c.show(a,!0)}}function dc(){var a=this.protectedMethod;this.getFilterSelectedValue=function(){throw Error("Override");};this.protectedMethod.filterSimilaryDoPropertyChanged=function(b){b==Sa.KEY_AFFECTED_TARGETS&&a.fireCommunicationEvent(Ga.KEY_SELECTED_BY_API)}}function Bb(){dc.call(this);Hb.call(this);var a=this,b=this.protectedMethod,c,m,n;this.protectedCreateJqUi=function(O){O=a.protectedCreateJqUiImpl(O);n=$("<div>");n.css("text-align","center");wa.decorateCardModalLayer(n,!1);N.makeTextOmissible(n);
var F=$("<div>");F.append(O);F.append(n);N.layoutCtrlWithLRTB(O,0,0,null,0,0,null);N.layoutCtrlWithLRTB(n,0,0,null,0,0,null);return F};this.protectedCreateJqUiImpl=function(O){throw Error("Implement");};this.protectedRunImpl=function(O){c=O;x()};this.payAttentionTo=function(O,F){if(F==Ga.KEY_VISUAL_DATA_PREPARED_SUCCESS||F==Ga.KEY_VISUAL_DATA_PREPARED_ERROR){O=O.getModel();var Q=a.getModel().getFilterSource();Q&&Q.isPreparedValueRelatedToWidget(O.getName())&&(F==Ga.KEY_VISUAL_DATA_PREPARED_SUCCESS?
x():F==Ga.KEY_VISUAL_DATA_PREPARED_ERROR&&(C(f.get("discreteFilterDataWaitingError","\u5f15\u7528\u6570\u636e\u66f4\u65b0\u5931\u8d25")),Z(null)))}else b.isAnotherSelectedAffectedMe(O,F)&&x()};this.getFilterSelectedValue=function(){return m&&0==m.length?vd.createItemAll():a.protectedGetFilterSelectedValue()};this.protectedGetFilterSelectedValue=function(){throw Error("Implement");};var x=function(){var O=a.getModel(),F=O.getFilterSource();if(F&&F.isValid())if(F.isConfirmedToGetPreparedValue(O))if(b.isWaitingInputs())C(f.get("discreteFilterParamWaiting",
"\u7b49\u5f85\u7b5b\u9009\u6761\u4ef6")),Z(null);else{C(f.get("discreteFilterItemUpdating","\u66f4\u65b0\u5907\u9009\u503c"));var Q=b.createAdditionalFilterApi();Q=Q?Q.toExecutableJsonObject():null;F.getPreparedValue(O,Q,c,function(K){C(K?0==K.length?f.get("discreteFilterItemEmpty","\u6ca1\u6709\u5907\u9009\u503c"):null:f.get("discreteFilterItemUpdatingError","\u66f4\u65b0\u5907\u9009\u503c\u5931\u8d25"));Z(K)})}else C(f.get("discreteFilterDataWaiting","\u7b49\u5f85\u5f15\u7528\u6570\u636e")),Z(null);
else C(f.get("discreteFilterInvalid","\u672a\u6b63\u786e\u8bbe\u7f6e\u5907\u9009\u503c")),Z(null)},C=function(O){O?(n.text(O),n.attr("title",O),n.css("line-height",a.getModel().getHeight()+"px"),n.css("display","")):(n.text(""),n.attr("title",""),n.css("display","none"))},Z=function(O){O?(m=O,a.getModel().isIncludeItemAllSupported()&&a.getModel().isIncludedItemAll()&&m.splice(0,0,vd.createItemAll())):m=null;a.protectedUpdateCtrlModel(m?m:[]);P()};this.protectedUpdateCtrlModel=function(O){throw Error("Implement");
};var P=function(){if(m){var O=a.getModel(),F=O.getDefaultSelected();F?F.getItems(m,O.isMultiSelectable(),function(Q){a.protectedUpdateSelectedValue(Q);b.fireCommunicationEvent(Ga.KEY_SELECTED_BY_API)}):(a.protectedUpdateSelectedValue(null),b.fireCommunicationEvent(Ga.KEY_SELECTED_BY_API))}};this.protectedUpdateSelectedValue=function(O){throw Error("Implement");};this.protectedMethod.discreteItemFilterDoPropertyChanged=function(O){O==Sa.KEY_FILTER_SOURCE||O==Sa.KEY_DISCRETE_INCLUDED_ITEMALL?x():O==
Sa.KEY_FILTER_DEFAULT_SELECTED||O==Sa.KEY_DISCRETE_MULTISELECTABLE?P():b.filterSimilaryDoPropertyChanged(O)};this.protectedMethod.getSelectableItems=function(){return m}}function Hb(){var a=this,b=!1;this.run=function(n){b=!0;a.protectedRunImpl(n)};this.protectedRunImpl=function(n){throw Error("Implement");};this.updateInputParams=function(n){n?c(!0).repickParams(n):c()&&c().repickParams(null)};var c=function(n){return a.getModel().getExecutingInputParams(n)},m=function(n,x){if(c()&&c().checkAffectedChainBroken())return!0;
var C=a.getModel(),Z=n.getModel(),P=Z.getAffectedTargets();if(P&&(P=P.getTarget(C.getName()))&&P.isSettingComplete()){if(C.isInstanceOf(Sa.WidgetSuperType_FilterSimilary)&&(C=C.checkCircularAffection()))return console&&console.warn("\u6b7b\u5faa\u73af\u5566\uff01"+C),!1;Z=Z.getSourceDataType();n=n.getFilterSelectedValue();n=c(!0).putParamValue(P.getUsableParamName(),Z,n);return x?n:!0}return!1};this.protectedMethod.isAnotherSelectedAffectedMe=function(n,x){return 0==x.indexOf(Ga.KEY_SELECTED)&&m(n,
!0)&&c()&&c().isAllParamsAttend()&&b};this.protectedMethod.isAnotherManualSelectedAffectedMe=function(n,x){return x==Ga.KEY_SELECTED_BY_MANUAL&&m(n,!1)&&c()&&c().isAllParamsAttend()&&b};this.protectedMethod.isPlayAffectedMe=function(n,x){return x==Ga.KEY_PLAY&&m(n)&&b};this.protectedMethod.createAdditionalFilterApi=function(){return c()?c().createAdditionalFilterApi():null};this.protectedMethod.createParamValueSearcherApi=function(){return c()?c().createParamValueSearcherApi():null};this.protectedMethod.isWaitingInputs=
function(){return c()&&!c().isAllParamsAttend()}}function Da(){var a=this,b=this.protectedMethod,c;this.protectedCreateJqUi=function(m){var n=$("<div>");m=a.protectedCreateJqUiWithIframe(m);m.css("z-index",1);m.appendTo(n);N.layoutCtrl(m,0,0,"100%","100%");b.isDesigntime()&&(c=$("<div>"),c.addClass("dsb-glasslayer"),c.css("z-index",2),c.appendTo(n),N.layoutCtrl(c,0,0,"100%","100%"));return n};this.protectedCreateJqUiWithIframe=function(m){throw Error("Override");};this.inside=function(){c.hide()};
this.outside=function(){c.show()}}function Eb(){this.checkOutputParam=function(a){throw Error("Implement");};this.refreshOutputParamValue=function(a,b){throw Error("Implement");}}function Ca(){function a(){var P=!0,O=[],F={};this.markExist=function(Q){P=Q};this.isExist=function(){return P};this.registParam=function(Q){F[Q]||(F[Q]=new b,O.push(Q))};this.getParam=function(Q){return F[Q]};this.getParamNames=function(){return O}}function b(){var P=!0,O=!0,F,Q,K;this.markExist=function(X){P=X};this.isExist=
function(){return P};this.reset=function(){O=!0};this.setup=function(X,S,ra){O=!1;K=X;F=S;Q=ra};this.copyFrom=function(X){O=!1;F=X.getErrorCode();Q=X.getErrorMessage();K=X.getDisplay()};this.isUnsure=function(){return O};this.isError=function(){return F||0===F};this.getErrorCode=function(){return F};this.getErrorMessage=function(){return Q};this.getDisplay=function(){return K}}var c=this,m=this.protectedMethod,n={},x,C=function(P,O){var F=function(X){delete P[X];var S=!1;for(X in P){S=!0;break}S||
O()},Q;for(Q in P){var K=P[Q];Z(K[0],K[1],F)}},Z=function(P,O,F){P.refreshOutputParamValue(O,function(Q){var K=P.getModel().getName();if(Q){var X=n[K],S;for(S in Q){var ra=Q[S];X.getParam(S).setup(ra.getDisplay(),ra.getErrorCode(),ra.getErrorMessage())}}F(K)})};this.protectedMethod.registWatchingTargetStart=function(){x=n;n={}};this.protectedMethod.registWatchingTarget=function(P,O){var F=n[P];F||(F=new a,n[P]=F);F.registParam(O)};this.protectedMethod.registWatchingTargetEnd=function(P){var O=x?x:
{},F=x=null,Q;for(Q in n){var K=c.getModel().getTopPage().searchWidgetByName(Q),X=K?!0:!1,S=n[Q];S.markExist(X);if(X){X=S.getParamNames();K=m.getCtxApi().getWidgetUiObject(K);var ra=K.checkOutputParam(X);if(ra)for(var ka=0;ka<X.length;ka++){var La=X[ka],cb=ra[ka],hb=!0===cb||!1===cb;cb=S.getParam(La);cb.markExist(hb);hb&&((hb=(hb=O[Q])?hb.getParam(La):null)?cb.copyFrom(hb):(!F&&(F={}),(cb=F[Q])?cb=cb[1]:(cb=[],F[Q]=[K,cb]),cb.push(La)))}}}F?C(F,P):P()};this.protectedMethod.isOutputParamWatched=function(P,
O){if(O=O==Ga.KEY_OUTPUT_PARAM_REFRESHABLE||O==Ga.KEY_OUTPUT_PARAM_VISUAL_UPDATABLE)P=P.getModel().getName(),O=n[P]?!0:!1;return O};this.protectedMethod.refreshOutputParamValueByAnotherWidget=function(P,O,F,Q){P=P==Ga.KEY_OUTPUT_PARAM_VISUAL_UPDATABLE;var K=O.getModel().getName();K=n[K];K.markExist(!0);for(var X=K.getParamNames().slice(0),S=O.checkOutputParam(X),ra=X.length-1;0<=ra;ra--){var ka=S[ra],La=!0===ka||!1===ka,cb=X[ra];K.getParam(cb).markExist(La);La?P&&!ka&&X.splice(ra,1):X.splice(ra,1)}if(0<
X.length){for(ra=0;ra<X.length;ra++)cb=X[ra],K.getParam(cb).reset();F();Z(O,X,function(hb){Q()})}else Q()};this.protectedMethod.lookupOutputParamValue=function(P,O,F,Q,K){var X=n[P];if(X&&X.isExist())if((F=X.getParam(O))&&F.isExist()){if(F.isUnsure())return"...";if(F.isError())K(P,O,F.getErrorCode(),F.getErrorMessage());else return F.getDisplay()}else Q(P,O);else F(P)}}function vb(){var a=this,b;this.refreshDuringFullscreen=function(){throw Error("Implement");};this.updateUiWhenAncestorFullscreenAllowedChanged=
function(){throw Error("Implement");};this.protectedUpdateButtonStateByAncestorFullscreen=function(n){throw Error("Implement");};var c=function(n){var x=b;if(n==x[0]){n=!0;var C=new Kb;C.setContext(b,[0,0,0,0]);x.data("myContext",C);C.forward(a)}else n=!1,M.removeChangedListener(c),C=x.data("myContext"),x.removeData("myContext"),C.backward();m(n);a.protectedFullScreenChanged(n)};this.protectedFullScreenChanged=function(n){throw Error("Implement");};var m=function(n){a.getModel().markFullscreen(n);
a.getModel().isContainer()&&a.getModel().traversalDescendents(function(x){x.markFullscreen(n,!0)})};this.protectedMethod.fullscreenSupportedWidgetDoPropertyChanged=function(n){n==Sa.KEY_FULLSCREEN_BY_ANCESTOR&&(n=a.getModel().hasBeenFullscreen(),a.protectedUpdateButtonStateByAncestorFullscreen(n))};this.protectedMethod.doFullscreen=function(n){b=n;M.removeChangedListener(c);M.addChangedListener(c);a.getModel().hasBeenFullscreen()?M.exit():M.request(n[0])};this.protectedMethod.markFullscreen=m}function Kb(){var a,
b,c,m;this.setContext=function(C,Z){a=C;b=Z};this.forward=function(C){if(!c){m=parseInt(a.css("z-index"));var Z=m+1,P=Z+1,O=C.getModel();C=$("<div>");var F=$("<div>"),Q=x(O);O=Q[0];Q=Q[1];O&&F.css("background-color",O);N.layoutCtrlWithLRTB(F,10,10,null,10,10,null);F.appendTo(C);C.css({"z-index":Z,position:"fixed",left:n(0),right:n(1),top:n(2),bottom:n(3),"background-color":wa.getPageBackgroundColor()});Q&&qb.updateBackgroundPicture(Q,C);c=C;c.appendTo(a.parent());a.css({"z-index":P,position:"fixed",
left:n(0)+10,right:n(1)+10,top:n(2)+10,bottom:n(3)+10,width:"",height:""})}};this.backward=function(){c&&(c.remove(),c=null,a.css({"z-index":m,position:"",left:"",right:"",top:"",bottom:""}))};var n=function(C){return(C=b[C])?C:0},x=function(C){var Z=null,P=null;C.upToVisitPath(function(O){var F=!1;O.isInstanceOf(Sa.WidgetSuperType_ContainerWithBackground)&&O.getBackgroundPicture()&&(P=O,F=!0);F||!O.isInstanceOf(Sa.WidgetSuperType_CardSimilary)||O.isBareSurface()||(Z=O.getActiveBackgroundColor(),
Z||O.getCardSurfaceMode()==Ob.Surface_Custom&&O.getUsableCardBorder().getType()==gd.TYPE_IMAGE||(O=O.isOpacityRequired(),Z=wa.getCardBackgroundColor(O)));return F});return[Z,P]}}function rb(){Ga.call(this);Hb.call(this);jc.call(this);Eb.call(this);vb.call(this);var a=this,b=this.protectedMethod,c,m,n,x,C,Z=!1,P,O,F,Q=new cc,K=!1,X,S=!1,ra=!1,ka=!1;this.setVisualWidgetEditableConfirmer=function(Ja){c=Ja};var La=this.destroy;this.destroy=function(){La();clearTimeout(X);C&&C.destroy()};this.protectedCreateJqUi=
function(Ja){var yb=Ja.isDesigntime(),Tb=!(yb||Ja.isPreview());P=Ja.createWidgetCtrl(a.getModel());Zb();P.setActionListener(function(gc,xc,vc){switch(xc){case Ab.ACTION_REFRESH:tc(!1);break;case Ab.ACTION_EDIT:yb||Tb?lc(vc):b.fakeAction(gc,vc);break;case Ab.ACTION_ANALYSIS:Tb?a.protectedAccessAdvancedAnalysis(Za())||C.displayActionPrompt(P.getJqUi(),f.get("cardEditUnaccessable","\u60a8\u6ca1\u6709#1\u7684\u6743\u9650").replace("#1",vc)):b.fakeAction(gc,vc);break;case Mb.ACTION_FULLSCREEN:Tb?b.doFullscreen(P.getJqUi()):
b.fakeAction(gc,vc)}});P.setFullscreenAnnouncer(function(gc){O=gc},function(gc){b.markFullscreen(gc)});Ja=P.getJqUi();P.getJqContent().addClass("sa-ctrl-common-unselectable");return Ja};this.protectedRunImpl=function(Ja){n=Ja;Z=!1;P.createScene(function(yb){a.protectedInitScene(yb);C=yb;C.setSkinName(a.getModel().getTopPage().getSkin());C.setExecutedListener(function(Tb){a.protectedAfterExecuted();Nb()});C.setFilteringListener(function(){b.fireCommunicationEvent(Ga.KEY_OUTPUT_PARAM_VISUAL_UPDATABLE)});
C.show(P.getJqContent(),function(){Z=!0;ld()})});a.getModel().getExecutingTag()&&C.setRemoteTag(a.getModel().getExecutingTag());Ja=[];(x=cb(Ja))?Ja[0]?Ec(!1):(K=!0,ld()):b.isWaitingInputs()?(Ec(!1),Fc(!1,a.getModel().getName(),f.get("filterWaiting","\u7b49\u5f85\u7b5b\u9009\u6761\u4ef6"),function(){})):tc(!1)};this.protectedInitScene=function(Ja){};this.protectedAfterExecuted=function(){};this.payAttentionTo=function(Ja,yb){if(b.isPlayAffectedMe(Ja,yb)){var Tb=Ja.getModel().getDurationMode(),gc=Tb.getPlayingRoundId(),
xc;C.setBlocking(!1);C.executeWithoutRendering(function(vc,Uc){C.setBlocking(!0);xc=Uc;!vc&&sc(!1)},function(vc,Uc){Tb.untilAllAffectedTargetsExecuted(gc,a.getModel().getName(),function(){P.getJqContent().stop(!0);P.getJqContent().fadeTo(500,.2,function(){xc(vc,Uc);P.getJqContent().fadeTo(500,1);b.fireCommunicationEvent(Ga.KEY_OUTPUT_PARAM_VISUAL_UPDATABLE)})})})}else b.isAnotherSelectedAffectedMe(Ja,yb)&&mc(!0)};this.collectContextForPreview=function(){var Ja={};Ja.tag=a.getModel().getExecutingTag();
return Ja};this.applyPreviewContext=function(Ja){(Ja=Ja.tag)&&a.getModel().setExecutingTag(Ja);S=!0};this.protectedRepaint=function(){P.repaintSurface();hb()};this.updateCardSurface=function(){P.repaintSurface()};var cb=function(Ja){var yb=a.getModel().pickupTmpJsonModelBook();Ja[0]=yb?yb[2]:null;m=(Ja=yb?yb[1]:null)?za.parseBuiltinVisualWidgetEditableConfirmer(Ja):null;return yb?yb[0]:null},hb=function(){C&&C.redraw()},Zb=function(){var Ja=a.getModel().getCardDescription();!Ja&&(Ja=F);P.updateTopBar(Ja)},
mc=function(Ja){C.setBlocking(Ja);Ja=C.reExecute();C.setBlocking(!0);Ja?b.fireCommunicationEvent(Ga.KEY_OUTPUT_PARAM_VISUAL_UPDATABLE):sc(!1)},tc=function(Ja){Ja&&ad(Ab.STATE_AUTO_REFRESHING);Ec(Ja);sc(Ja)},sc=function(Ja){if(!b.isDead()){var yb="id"+Math.random(),Tb=Ja?f.get("refreshing","\u6b63\u5728\u5237\u65b0"):f.get("loading","\u52a0\u8f7d\u4e2d");Fc(Ja,yb,Tb,function(){xc()});Ja=a.getModel().getReferenceCustomMap();Tb=n(function(vc){Wc(yb);x=vc.model;vc=(vc=vc.operation)?za.parseBuiltinVisualWidgetEditableConfirmer(vc):
null;m=a.protectedMergeRtEditableConfirmer(c,vc);ld()},function(vc,Uc,ed){Wc(yb);Wc(a.getModel().getName());-1!=vc&&(C.displayError(vc,Uc,ed),ra=!0,F=null,Nb());ad();return!0});Tb.setShowBlocking(!1);Tb.setCancelable(!0);var gc=a.protectedGetFacadeMethodForLoadSchema(),xc=Tb[gc](Ja)}};this.protectedGetFacadeMethodForLoadSchema=function(){throw Error("Override");};this.protectedMergeRtEditableConfirmer=function(Ja,yb){throw Error("Override");};var Ec=function(Ja){var yb="id"+Math.random(),Tb=!0;K=
!1;var gc=function(jd){K=!0;a.getModel().setExecutingTag(jd);Tb&&b.fireCommunicationEvent(Ga.KEY_VISUAL_DATA_PREPARED_SUCCESS);C.setRemoteTag(jd);Wc(yb);ld()},xc=function(jd,td,yd){Tb&&b.fireCommunicationEvent(Ga.KEY_VISUAL_DATA_PREPARED_ERROR);Wc(yb);Wc(a.getModel().getName());-1!=jd&&(C.displayError(jd,td,yd),ra=!0,F=null,Nb());ad();return!0},vc=function(){return b.isDead()},Uc=function(jd){var td=Q.getDisplayOne();td&&td.getRandomId()==yb&&P.hookWaitingProgressDisplayer(l.makeUiCreator(jd))},ed=
null,Yc=Ja?f.get("refreshing","\u6b63\u5728\u5237\u65b0"):l.getWaitingText();Fc(Ja,yb,Yc,function(){ed()});Ja=a.getModel().getReferenceCustomMap();Yc=new Ha;Yc.setFacadeCreator(n);var md=a.getModel().getExecutingTag();md?(Tb=!S,ed=Yc.refresh(Ja,md,S,gc,xc,vc,Uc),S=!1):ed=Yc.prepare(Ja,gc,xc,vc,Uc)},Fc=function(Ja,yb,Tb,gc){Q.appendOne(yb,Tb,gc)&&Xc(Ja)},Wc=function(Ja){Q.removeOne(Ja)&&(P.hookWaitingProgressDisplayer(function(yb){return null}),Xc())},Xc=function(Ja){var yb=Q.getDisplayOne();yb?P.showWaiting(Ja,
yb.getPrompt(),Q.cancelAll):P.hideWaiting()},ad=function(Ja){Ja?P.updateState(Ja):ra?P.updateState(Ab.STATE_REMOTE_ERROR):P.updateState(Ab.STATE_PERFECT)},ld=function(){if(K&&x&&Z){Wc(a.getModel().getName());ra=!1;ad();var Ja=C.setJsonModelBook(x,function(){return b.createAdditionalFilterApi()},function(yb){return(yb=wa.getChartDefaultPalette(yb))&&!yb.isInvalid()?yb.toJsonObject():null});x=null;F=a.protectedGetCardDescription(Ja);Zb();qd(Ja);b.fireCommunicationEvent(Ga.KEY_OUTPUT_PARAM_REFRESHABLE)}};
this.protectedGetCardDescription=function(Ja){return null};var qd=function(Ja){a.getModel().clearAllParamInfo();Ja=Ja.getModelPages();for(var yb=0;yb<Ja.length;yb++){var Tb=Ja[yb],gc=Tb.getModel();Tb=Tb.getPreferences();var xc=gc.getBriefOutputDefinitions();if(xc)for(var vc=0;vc<xc.length;vc++){var Uc=xc[vc];a.getModel().appendOutputParamInfo(yb,gc,Tb,Uc.getName(),Uc.getDescription())}if(xc=gc.getWarningRuleDefinitions())for(vc=0;vc<xc.length;vc++)Uc=xc[vc],a.getModel().appendWarningRuleInfo(yb,gc,
Tb,Uc.getName(),Uc.getDescription())}ka=!0};this.checkOutputParam=function(Ja){if(!ka)return null;for(var yb={},Tb=a.getModel().getOutputParamsInfo(),gc=0;gc<Tb.length;gc++){var xc=Tb[gc],vc=xc.getName();yb[vc]=0===xc.getQingModelIndex()}Tb=[];for(gc=0;gc<Ja.length;gc++)vc=Ja[gc],Tb[gc]=yb[vc];return Tb};this.refreshOutputParamValue=function(Ja,yb){ka||yb(null);for(var Tb={},gc=0;gc<Ja.length;gc++){var xc=Ja[gc];Tb[xc]=!0}Ja=a.getModel().getOutputParamsInfo();var vc={};for(gc=0;gc<Ja.length;gc++){var Uc=
Ja[gc];xc=Uc.getName();if(Tb[xc]){var ed=Uc.getQingModelIndex(),Yc=vc[ed];Yc||(Yc=[],Yc[0]=Uc.getQingModel(),Yc[1]=Uc.getQingModelPreferences(),Yc[2]=[],Yc[3]=!1,vc[ed]=Yc);var md=Yc[2];md.push(xc)}}var jd=null;for(ed in vc)!jd&&(jd={}),Yc=vc[ed],Tb=Yc[0],gc=Yc[1],md=Yc[2],C.executeOutputParamValue(Tb,gc,md,function(td){if(td)for(var yd=0;yd<md.length;yd++){var Ud=md[yd],je=td[Ud],Vd=new ya;Vd.parseFromJson(je);jd[Ud]=Vd}Yc[3]=!0;a:{for(var ke in vc)if(!vc[ke][3])break a;yb(jd)}});jd||yb({})};var Nb=
function(){if(!b.isDesigntime()){C.setBlocking(!0);var Ja=a.getModel().getRefreshTiming();0<Ja&&(clearTimeout(X),X=setTimeout(function(){C.setBlocking(!1);tc(!0)},1E3*Ja))}},lc=function(Ja){a.protectedCheckDesignerAccessable(Za(),function(yb,Tb){yb?Ac(Tb,b.createAdditionalFilterApi()):C.displayActionPrompt(P.getJqUi(),f.get("cardEditUnaccessable","\u60a8\u6ca1\u6709#1\u7684\u6743\u9650").replace("#1",Ja))})};this.protectedCheckDesignerAccessable=function(Ja,yb){throw Error("Implement");};var Ac=function(Ja,
yb){var Tb=a.getModel(),gc=Tb.getCardTitle(),xc=Jc.getInstance(Tb.getWidgetTypeName()).getTypeDisplayName();xc=f.get("modifyWidget","\u7f16\u8f91\u7ec4\u4ef6-#1").replace("#1",xc);xc+=gc?": "+gc:"";Tb=Tb.getReferenceCustomMap();a.protectedGetIntegrationMethodForShowDesigner()(xc,!0,Tb,a.getModel().getExecutingTag(),Ja,yb,function(vc){vc&&(b.fireEditedEvent(),x=vc,ld())})};this.protectedGetIntegrationMethodForShowDesigner=function(){throw Error("Override");};this.protectedAccessAdvancedAnalysis=function(Ja){throw Error("Unsupported");
};this.refreshDuringFullscreen=function(){P.repaintSurface();hb()};this.updateUiWhenAncestorFullscreenAllowedChanged=function(){ad()};this.protectedFullScreenChanged=function(Ja){O(Ja);P.repaintSurface();hb()};this.protectedUpdateButtonStateByAncestorFullscreen=function(Ja){ad()};var Za=function(){m||(m=a.protectedMergeRtEditableConfirmer(c,null));return m};this.protectedMethod.builtinVisualWidgetDoPropertyChanged=function(Ja){Ja==Sa.KEY_CARD_TITLE?(Zb(),hb()):Ja==Sa.KEY_CARD_SURFACE?(P.repaintSurface(),
hb()):Ja==Sa.KEY_AFFECTED_TARGETS?hb():Ja==Sa.KEY_REF?(Ja=[],x=cb(Ja),Ja[0]?Ec(!1):(K=!0,ld())):b.fullscreenSupportedWidgetDoPropertyChanged(Ja)};this.protectedMethod.getRtEditableConfirmer=Za;this.protectedMethod.createExecutingWaitingImpl=function(){return{showWaiting:function(Ja){P.showWaiting(!1,f.get("executing","\u65b9\u6848\u6267\u884c\u4e2d"),Ja)},hookWaitingProgressDisplayer:function(Ja){P.hookWaitingProgressDisplayer(Ja)},hideWaiting:function(){P.hideWaiting()}}}}function cc(){var a=[];
this.appendOne=function(b,c,m){a.push(new function(n,x,C){this.getRandomId=function(){return n};this.getPrompt=function(){return x};this.cancel=function(){return C()}}(b,c,m));return 1==a.length};this.removeOne=function(b){for(var c=!1,m=a.length-1;0<=m;m--)a[m].getRandomId()==b&&(a.splice(m,1),0==m&&(c=!0));return c};this.getDisplayOne=function(){return 0<a.length?a[0]:null};this.cancelAll=function(){for(var b=a.length-1;0<=b;b--)a[b].cancel()}}function Ab(){kb.call(this);var a=this.protectedMethod;
this.createScene=function(b){throw Error("Implement");};this.setActionListener=function(b){throw Error("Implement");};this.setFullscreenAnnouncer=function(b,c){throw Error("Implement");};this.updateState=function(b){throw Error("Implement");};this.updateTopBar=function(b){throw Error("Implement");};this.getJqContent=function(){throw Error("Implement");};this.showWaiting=function(b,c,m){throw Error("Implement");};this.hookWaitingProgressDisplayer=function(b){throw Error("Implement");};this.hideWaiting=
function(){throw Error("Implement");};this.repaintSurface=function(){throw Error("Implement");};this.protectedMethod.isFullscreenEnabled=function(){var b=a.getWidget(),c=b.isAncestorForbidFullscreen();b=b.hasBeenFullscreen()&&b.getParent().hasBeenFullscreen();return!(c||b)}}function Va(){rb.call(this);dc.call(this);var a=this,b=this.protectedMethod,c,m;this.protectedDoPropertyChanged=function(x){b.builtinVisualWidgetDoPropertyChanged(x);b.filterSimilaryDoPropertyChanged(x)};this.getFilterSelectedValue=
function(){if(c&&0<c.length){for(var x=[],C=0;C<c.length;C++){var Z=c[C],P=new Bd;P.setValue(Z.value);P.setText(Z.text);x.push(P)}return x}return vd.createItemAll()};var n=function(x,C){void 0!==c&&(!c&&!x||c&&x&&JSON.stringify(c)==JSON.stringify(x))||(c=x,b.fireCommunicationEvent(!0===C?Ga.KEY_SELECTED_BY_MANUAL:!1===C?Ga.KEY_SELECTED_BY_API:Ga.KEY_SELECTED))};this.protectedAfterExecuted=function(){n(null,!1)};this.protectedGetFacadeMethodForLoadSchema=function(){return"squareLoadSchema"};this.protectedMergeRtEditableConfirmer=
function(x,C){C||(C=new da);x&&(C=C.mergeToNewInstance(x.getRtSquareEditableConfirmer()));return C};this.protectedInitScene=function(x){x.hookExecutingWaitingImpl(b.createExecutingWaitingImpl());x.setCosmeticHandler(function(C){if(C){var Z=[wa.CHART_COMMON],P=C.getCosmeticId();P&&Z.push(P);Z=wa.dipSome(Z);C.getAttr().putCustomStyles(Z);C.getAttr().setSkinName(a.getModel().getTopPage().getSkin())}return wa.dip(wa.SQUARE_EXHIBITION)});x.setPredrawListener(function(C){if(C.isSelectionSupported()){var Z=
a.getModel().getAffectedTargets();((Z=Z&&Z.getItemCount()?!0:!1)&&!C.isSelectable()||!Z&&C.isSelectable())&&C.setSelectable(Z)}(Z=a.getModel().getActiveBackgroundColor())||(Z=wa.dip(wa.DSB_CARD)[wa.Key_Card_BackgroundColor]);C.getAttr().putCustomStyle(u.BACKGROUND,Z)});x.setSelectionListener(function(C,Z,P){n(Z,P)})};this.protectedGetIntegrationMethodForShowDesigner=function(){return za.showSquareDesigner};this.protectedGetCardDescription=function(x){var C=x.getModelPages()[0].getModel();m=function(){var Z=
C.getFilterSet().copyFiltersForSetting();return C.getFilterSet().toInsteadJson(Z)};return C.getChart().getChartProperty().getDescription()};this.protectedCheckDesignerAccessable=function(x,C){var Z=x.isSquareDesignerAccessable();x=x.getSquareDesignerOperationJudger();C(Z,x)};this.protectedAccessAdvancedAnalysis=function(x){var C=x.isAdvancedAnalysisAccessable();if(C){x=x.getAdvancedAnalysisOperationJudger();var Z=a.getModel().getCardTitle(),P=a.getModel().getReferenceCustomMap(),O=a.getModel().getExecutingTag(),
F=b.createAdditionalFilterApi(),Q=m();za.squareAnalysis(Z,P,O,Q,x,F)}return C}}function ba(){rb.call(this);var a=this.protectedMethod;this.protectedDoPropertyChanged=function(b){a.builtinVisualWidgetDoPropertyChanged(b)};this.protectedGetFacadeMethodForLoadSchema=function(){return"longerLoadSchema"};this.protectedMergeRtEditableConfirmer=function(b,c){c||(c=new U);b&&(c=c.mergeToNewInstance(b.getRtLongerEditableConfirmer()));return c};this.protectedInitScene=function(b){b.setLongerDesignerOperationJudgerGetter(function(){return a.getRtEditableConfirmer().getLongerDesignerOperationJudger()})};
this.protectedGetIntegrationMethodForShowDesigner=function(){return za.showLongerDesigner};this.protectedCheckDesignerAccessable=function(b,c){var m=b.isLongerDesignerAccessable();b=b.getLongerDesignerOperationJudger();c(m,b)}}function bb(){Ga.call(this);Da.call(this);Hb.call(this);jc.call(this);vb.call(this);var a=this,b=this.protectedMethod,c,m,n=this.destroy;this.destroy=function(){n();za.getQingReportExecutor().destroy(c.getJqContent(),a.getModel())};this.protectedCreateJqUiWithIframe=function(Z){var P=
!(Z.isDesigntime()||Z.isPreview());c=Z.createWidgetCtrl(a.getModel());c.updateTopBar(a.getModel().getCardDescription());c.setActionListener(function(O,F,Q){switch(F){case jb.ACTION_REFRESH:x();break;case jb.ACTION_FILTER:za.getQingReportExecutor().fireEvent(qc.EVENT_FILTER,c.getJqContent(),a.getModel());break;case Mb.ACTION_FULLSCREEN:P?b.doFullscreen(c.getJqUi().parent()):b.fakeAction(O,Q)}});c.setFullscreenAnnouncer(function(O){m=O},function(O){b.markFullscreen(O)});Z=c.getJqUi();za.getQingReportExecutor().initUi(c.getJqContent(),
a.getModel());c.updateState();return Z};this.protectedRunImpl=function(Z){b.isWaitingInputs()||x()};this.protectedDoPropertyChanged=function(Z){Z==Sa.KEY_REF?x():Z==Sa.KEY_CARD_TITLE?(c.updateTopBar(a.getModel().getCardDescription()),C()):Z==Sa.KEY_CARD_SURFACE?(c.repaintSurface(),C()):b.fullscreenSupportedWidgetDoPropertyChanged(Z)};this.protectedRepaint=function(){c.repaintSurface();C()};this.payAttentionTo=function(Z,P){b.isPlayAffectedMe(Z,P)?(x(),Z=Z.getModel().getDurationMode(),Z.untilAllAffectedTargetsExecuted(Z.getPlayingRoundId(),
a.getModel().getName(),function(){c.getJqContent().stop(!0);c.getJqContent().fadeTo(500,.2,function(){c.getJqContent().fadeTo(500,1)})})):b.isAnotherSelectedAffectedMe(Z,P)&&x()};this.refreshDuringFullscreen=function(){c.repaintSurface();C()};this.updateUiWhenAncestorFullscreenAllowedChanged=function(){c.updateState()};this.protectedFullScreenChanged=function(Z){m(Z);c.repaintSurface();C()};this.protectedUpdateButtonStateByAncestorFullscreen=function(Z){c.updateState()};this.updateCardSurface=function(){c.repaintSurface()};
var x=function(){za.getQingReportExecutor().run(c.getJqContent(),a.getModel(),b.isDesigntime())},C=function(){za.getQingReportExecutor().resize(c.getJqContent(),a.getModel())}}function jb(){kb.call(this);var a=this.protectedMethod;this.setActionListener=function(b){throw Error("Implement");};this.setFullscreenAnnouncer=function(b,c){throw Error("Implement");};this.updateState=function(){throw Error("Implement");};this.updateTopBar=function(b){throw Error("Implement");};this.getJqContent=function(){throw Error("Implement");
};this.repaintSurface=function(){throw Error("Implement");};this.protectedMethod.isFullscreenEnabled=function(){var b=a.getWidget(),c=b.isAncestorForbidFullscreen();b=b.hasBeenFullscreen()&&b.getParent().hasBeenFullscreen();return!(c||b)}}function Aa(){Ga.call(this);Da.call(this);Hb.call(this);var a=this,b=this.protectedMethod,c,m=this.destroy;this.destroy=function(){m();var x=za.getExtReportExecutor();x&&x.destroy(c,a.getModel())};this.protectedCreateJqUiWithIframe=function(x){c=$("<div>");(x=za.getExtReportExecutor())&&
x.initUi(c,a.getModel());return c};this.protectedRunImpl=function(x){b.isWaitingInputs()||n()};this.protectedDoPropertyChanged=function(x){x==Cc.KEY_MODEL?n():x==Cc.KEY_TITLE&&(x=za.getExtReportExecutor())&&x.updateTitle(c,a.getModel())};this.protectedRepaint=function(){var x=za.getExtReportExecutor();x&&x.resize(c,a.getModel())};this.payAttentionTo=function(x,C){if(b.isPlayAffectedMe(x,C)){n();var Z=x.getModel().getDurationMode();Z.untilAllAffectedTargetsExecuted(Z.getPlayingRoundId(),a.getModel().getName(),
function(){c.stop(!0);c.fadeTo(500,.2,function(){c.fadeTo(500,1)})})}b.isAnotherSelectedAffectedMe(x,C)&&n()};var n=function(){var x=za.getExtReportExecutor();x&&x.run(c,a.getModel(),b.isDesigntime())}}function db(){Ga.call(this);Da.call(this);var a=this,b=this.protectedMethod,c,m=this.destroy;this.destroy=function(){m();var x=za.getProgramableCardExecutor();x&&x.destroy(c,a.getModel())};this.protectedCreateJqUiWithIframe=function(x){c=$("<div>");(x=za.getProgramableCardExecutor())&&x.initUi(c,a.getModel());
return c};this.run=function(x){n()};this.protectedRepaint=function(){var x=za.getProgramableCardExecutor();x&&x.resize(c,a.getModel())};this.protectedDoPropertyChanged=function(x){x==Sa.KEY_REF&&n()};var n=function(){var x=za.getProgramableCardExecutor();x&&x.run(c,a.getModel(),b.isDesigntime())}}function t(){Ga.call(this);Da.call(this);var a=this,b=this.protectedMethod,c,m=this.destroy;this.destroy=function(){m();var x=za.getCosmicCustomCardExecutor();x&&x.destroy(c,a.getModel())};this.protectedCreateJqUiWithIframe=
function(x){c=$("<div>");(x=za.getCosmicCustomCardExecutor())&&x.initUi(c,a.getModel());return c};this.run=function(x){n()};this.protectedRepaint=function(){var x=za.getCosmicCustomCardExecutor();x&&x.resize(c,a.getModel())};this.protectedDoPropertyChanged=function(x){x==Nc.KEY_MODEL&&n()};var n=function(){var x=za.getCosmicCustomCardExecutor();x&&x.run(c,a.getModel(),b.isDesigntime())}}function V(){Ga.call(this);Da.call(this);var a=this,b=this.protectedMethod,c,m=this.destroy;this.destroy=function(){m();
var n=za.getCloudhubSubscribesExecutor();n&&n.destroy(c,a.getModel())};this.protectedCreateJqUiWithIframe=function(n){c=$("<div>");(n=za.getCloudhubSubscribesExecutor())&&n.initUi(c,a.getModel());return c};this.run=function(n){(n=za.getCloudhubSubscribesExecutor())&&n.run(c,a.getModel(),b.isDesigntime())};this.protectedRepaint=function(){var n=za.getCloudhubSubscribesExecutor();n&&n.resize(c,a.getModel())}}function la(){Ga.call(this);Da.call(this);Hb.call(this);var a=this,b=this.protectedMethod,c;
this.protectedCreateJqUiWithIframe=function(n){c=$("<iframe>");c.css("border","0px");b.setupDesigntimeRectangle(c);return c};this.protectedDoPropertyChanged=function(n){n==nb.KEY_URL&&m()};this.payAttentionTo=function(n,x){b.isAnotherSelectedAffectedMe(n,x)&&m()};this.protectedRunImpl=function(n){b.isWaitingInputs()||m()};var m=function(){c.attr("src","");setTimeout(function(){var n=a.getModel().getUsableUrl();c.attr("src",n)},100)}}function Qa(){Ga.call(this);var a=this,b=this.protectedMethod,c,
m=new H,n,x,C=this.destroy;this.destroy=function(){C();clearTimeout(x)};this.protectedCreateJqUi=function(F){c=$("<div>");c.css({overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"});b.setupDesigntimeRectangle(c);return c};this.run=function(F){Z();P();O()};this.protectedDoPropertyChanged=function(F){F==ac.KEY_FORMAT?(P(),O()):F==Sa.KEY_STYLE&&Z()};this.protectedRepaint=function(){Z()};var Z=function(){wa.decorateLabel(c);var F=a.getModel(),Q=F.getStyle(),K=Q.getFontName(),X={};X["line-height"]=
F.getHeight()+"px";X["font-family"]=K?K:"";X["font-size"]=Q.getFontSize()+"px";X["text-align"]=Q.getAlign();(F=Q.getColor())&&(X.color=F);c.css(X)},P=function(){var F=a.getModel().getFormatString();m.setFormatString(F);n=1E3*(0>F.indexOf("s")?10:1)},O=function(){clearTimeout(x);var F=m.format(new Date);c.text(F);x=setTimeout(O,n)}}function ca(){Ga.call(this);Hb.call(this);dc.call(this);Ca.call(this);var a=this,b=this.protectedMethod,c,m,n=!1,x;this.protectedCreateJqUi=function(ka){ka=new rc;ka.bindWidget(a.getModel());
c=ka.getJqUi();c.css({"text-align":"center",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"});b.setupDesigntimeRectangle(c);return c};this.protectedDoPropertyChanged=function(ka){ka==Vc.KEY_CONTENT?ra(function(){C()}):(ka==Sa.KEY_STYLE||ka==Vc.KEY_WALKING)&&C()};this.protectedRepaint=function(){C()};this.payAttentionTo=function(ka,La){b.isPlayAffectedMe(ka,La)?(n=!0,ka=ka.getModel().getDurationMode(),ka.untilAllAffectedTargetsExecuted(ka.getPlayingRoundId(),a.getModel().getName(),
function(){n=!1;C()})):b.isAnotherSelectedAffectedMe(ka,La)?C():b.isOutputParamWatched(ka,La)&&b.refreshOutputParamValueByAnotherWidget(La,ka,function(){C()},function(){C()})};this.getFilterSelectedValue=function(){return m};this.protectedRunImpl=function(ka){ra(function(){C()})};var C=function(){if(!n){wa.decorateLabel(c);var ka=a.getModel(),La=ka.getStyle(),cb=La.getFontName(),hb={};hb["line-height"]=ka.getHeight()+"px";hb["font-family"]=cb?cb:"";hb["font-size"]=La.getFontSize()+"px";hb["text-align"]=
La.getAlign();(La=La.getColor())&&(hb.color=La);c.css(hb);c.empty();c.attr("title","");hb=$("<span>");P(hb);hb.appendTo(c);x&&clearInterval(x);La=ka.getWalkingSpeed();ka.setRuntimeWalkable(0<La);0<La&&(hb.css("position","absolute"),Z(hb,La))}},Z=function(ka,La){var cb=c.prop("clientWidth");x=setInterval(function(){b.isDead()&&clearInterval(x);a.getModel().isRuntimeWalkable()&&c.is(":visible")&&"hidden"!=c.css("visibility")&&(ka.css("left",cb),cb--,0>cb+ka.prop("offsetWidth")&&(cb=c.prop("clientWidth")))},
La)},P=function(ka){var La=[],cb=X(function(hb){La=hb});(cb=O(cb,La,function(hb,Zb,mc){hb&&F(hb).appendTo(ka);Q(Zb,mc).appendTo(ka)}))&&F(cb).appendTo(ka)},O=function(ka,La,cb){var hb={},Zb=a.getModel().getPredefinedTextFragments();if(Zb)for(var mc=0;mc<Zb.getFragmentCount();mc++){var tc=Zb.getFragment(mc),sc=tc.getName();hb[sc]=tc}for(mc=0;mc<La.length;mc++)if(sc=La[mc][2],tc=hb[sc])if(Zb=tc.getDisplay(),tc=tc.getAffectedTargets(),sc&&Zb&&tc){Zb=S(cd.parseRef(Zb),Zb);sc="${"+sc+"}$";var Ec=ka.indexOf(sc);
if(0<=Ec){var Fc=ka.substring(0,Ec);ka=ka.substring(Ec+sc.length);cb(Fc,Zb,tc)}}return ka},F=function(ka){var La=$("<span>");La.text(ka);return La},Q=function(ka,La){var cb=$("<span>");cb.text(ka);cb.css("cursor","pointer");cb.on("click",function(hb){m=new Bd;m.setValue(ka);m.setText(ka);K(La);a.getModel().setAffectedTargets(La);b.fireCommunicationEvent(Ga.KEY_SELECTED_BY_MANUAL)});cb.on("mouseenter",function(hb){cb.css("text-decoration","underline")});cb.on("mouseleave",function(hb){cb.css("text-decoration",
"")});return cb},K=function(ka){for(var La=0;La<ka.getItemCount();La++){var cb=ka.getItem(La);if(cb.getType()==Sa.AffectedType_Hotlink){var hb=cb.getUrl(),Zb=cd.parseRef(hb);hb=S(Zb,hb);var mc="";Zb=O(hb,Zb,function(tc,sc,Ec){mc+=tc;mc+=sc});mc+=Zb;cb.setUsableUrl(mc)}}},X=function(ka){var La=a.getModel().getContent();if(La){var cb=cd.parseRef(La);La=S(cb,La);ka(cb);return La}return b.isDesigntime()?f.get("labelHasNoText","(\u672a\u8bbe\u7f6e)"):""},S=function(ka,La){for(var cb=b.createParamValueSearcherApi(),
hb=ka.length-1;0<=hb;hb--){var Zb=ka[hb],mc=Zb[0],tc=Zb[1],sc=Zb[2];Zb=Zb[3];if(0==sc.indexOf("#"))sc=sc.substring(1),sc=cb?cb.searchDisplayText(sc):void 0;else if(0<sc.indexOf("#")){sc=sc.split("#");var Ec=null;sc=b.lookupOutputParamValue(sc[0],sc[1],function(Fc){Ec=" (Widget '#1' not exist) ".replace("#1",Fc)},function(Fc,Wc){var Xc=a.getModel().getTopPage().searchWidgetByName(Fc);Fc=Xc?Xc.getDisplayName():Fc;Ec=" (Param '#1' not found) ".replace("#1",Fc+"#"+Wc)},function(Fc,Wc,Xc,ad){Ec="***";
Fc=(Xc=a.getModel().getTopPage().searchWidgetByName(Fc))?Xc.getDisplayName():Fc;c.attr("title",Fc+"#"+Wc+" error: "+ad)});Ec&&(sc=Ec)}else continue;void 0===sc&&(sc=Zb);La=La.substring(0,mc)+sc+La.substring(tc);ka.splice(hb,1)}return La},ra=function(ka){b.registWatchingTargetStart();a.getModel().parseOutputParam(function(La,cb){b.registWatchingTarget(La,cb)});b.registWatchingTargetEnd(ka)}}function na(){Ga.call(this);Hb.call(this);dc.call(this);Ca.call(this);var a=this,b=this.protectedMethod,c,m,
n,x=!1;this.protectedCreateJqUi=function(K){m=new h;c=$("<div>");c.append(m.getJqUi());N.layoutCtrlWithLRTB(m.getJqUi(),0,0,null,0,0,null);b.setupDesigntimeRectangle(c);return c};this.protectedDoPropertyChanged=function(K){K==pb.KEY_CONTENT&&Q(function(){C()})};this.protectedRepaint=function(){C()};this.payAttentionTo=function(K,X){b.isPlayAffectedMe(K,X)?(x=!0,K=K.getModel().getDurationMode(),K.untilAllAffectedTargetsExecuted(K.getPlayingRoundId(),a.getModel().getName(),function(){x=!1;C()})):b.isAnotherSelectedAffectedMe(K,
X)?C():b.isOutputParamWatched(K,X)&&b.refreshOutputParamValueByAnotherWidget(X,K,function(){C()},function(){C()})};this.getFilterSelectedValue=function(){return n};this.protectedRunImpl=function(K){Q(function(){C()})};var C=function(){if(!x){var K=a.getModel().getContent().clone();Z(K);m.setDefaultColor(wa.dip(wa.DSB_LABEL)[wa.Key_Label_Color]);m.setModel(K);m.refresh()}},Z=function(K){var X=K.getAllText();X=cd.parseRef(X);F(X,function(S,ra,ka){K.replaceVar(S,ra,ka)});O(X,function(S,ra,ka){var La=
K.getAllText().indexOf(S);K.replaceVar(La,La+S.length,ra).hookUiCustomDecorator(function(cb){cb.css("cursor","pointer");cb.on("click",function(hb){n=new Bd;n.setValue(ra);n.setText(ra);P(ka);a.getModel().setAffectedTargets(ka);b.fireCommunicationEvent(Ga.KEY_SELECTED_BY_MANUAL)});cb.on("mouseenter",function(hb){cb.css("text-decoration","underline")});cb.on("mouseleave",function(hb){cb.css("text-decoration","")})})})},P=function(K){for(var X=0;X<K.getItemCount();X++){var S=K.getItem(X);if(S.getType()==
Sa.AffectedType_Hotlink){var ra=S.getUrl(),ka=cd.parseRef(ra),La=ra;F(ka,function(cb,hb,Zb){La=La.substring(0,cb)+Zb+La.substring(hb)});O(ka,function(cb,hb,Zb){Zb=La.indexOf(cb);cb=Zb+cb.length;La=La.substring(0,Zb)+hb+La.substring(cb)});S.setUsableUrl(La)}}},O=function(K,X){var S={},ra=a.getModel().getPredefinedTextFragments();if(ra)for(var ka=0;ka<ra.getFragmentCount();ka++){var La=ra.getFragment(ka),cb=La.getName();S[cb]=La}for(ka=0;ka<K.length;ka++)if(cb=K[ka][2],La=S[cb]){var hb=La.getDisplay();
ra=La.getAffectedTargets();cb&&hb&&ra&&(F(cd.parseRef(hb),function(Zb,mc,tc){hb=hb.substring(0,Zb)+tc+hb.substring(mc)}),X("${"+cb+"}$",hb,ra))}},F=function(K,X){for(var S=b.createParamValueSearcherApi(),ra=K.length-1;0<=ra;ra--){var ka=K[ra],La=ka[0],cb=ka[1],hb=ka[2];ka=ka[3];if(0==hb.indexOf("#"))hb=hb.substring(1),hb=S?S.searchDisplayText(hb):void 0;else if(0<hb.indexOf("#")){hb=hb.split("#");var Zb=null;hb=b.lookupOutputParamValue(hb[0],hb[1],function(mc){Zb=" (Widget '#1' not exist) ".replace("#1",
mc)},function(mc,tc){var sc=a.getModel().getTopPage().searchWidgetByName(mc);mc=sc?sc.getDisplayName():mc;Zb=" (Param '#1' not found) ".replace("#1",mc+"#"+tc)},function(mc,tc,sc,Ec){Zb="***";mc=(sc=a.getModel().getTopPage().searchWidgetByName(mc))?sc.getDisplayName():mc;c.attr("title",mc+"#"+tc+" error: "+Ec)});Zb&&(hb=Zb)}else continue;void 0===hb&&(hb=ka);X(La,cb,hb);K.splice(ra,1)}},Q=function(K){b.registWatchingTargetStart();a.getModel().parseOutputParam(function(X,S){b.registWatchingTarget(X,
S)});b.registWatchingTargetEnd(K)}}function k(){Ga.call(this);Bb.call(this);var a=this,b=this.protectedMethod,c;this.protectedCreateJqUiImpl=function(m){c=m.createWidgetCtrl(a.getModel());c.setValueChangedListener(function(){b.fireCommunicationEvent(Ga.KEY_SELECTED_BY_MANUAL)});return c.getJqUi()};this.protectedDoPropertyChanged=function(m){m==Sa.KEY_FILTER_FRONT_LABEL||m==Sa.KEY_FILTER_FRONT_LABEL_POSITION||m==Sa.KEY_FILTER_FRONT_LABEL_LENGTH?c.updateFrontLabel():m==Sa.KEY_FONT_SIZE_ENHANCED?c.updateSurface():
b.discreteItemFilterDoPropertyChanged(m)};this.protectedRepaint=function(){c.updateFrontLabel()};this.protectedGetFilterSelectedValue=function(){return c.getSelectedItem()};this.protectedUpdateCtrlModel=function(m){c.setSelectableItems(m)};this.protectedUpdateSelectedValue=function(m){m=m&&0<m.length?m[0]:(m=b.getSelectableItems())&&0<m.length?m[0]:null;c.setSelectedItem(m)}}function Wa(){Ga.call(this);Bb.call(this);var a=this,b=this.protectedMethod,c;this.protectedCreateJqUiImpl=function(m){c=new fc;
c.bindWidget(a.getModel());c.setValueChangedListener(function(){b.fireCommunicationEvent(Ga.KEY_SELECTED_BY_MANUAL)});return c.getJqUi()};this.protectedDoPropertyChanged=function(m){m==ic.KEY_LAYOUT_MODE||m==ic.KEY_ITEMS_PER_ROW||m==ic.KEY_CHARS_PER_ITEM?c.relayout():m==ic.KEY_SIZE_MODE&&a.getModel().getLayoutMode()==ic.LAYOUT_MODE_WRAP?c.relayout():b.discreteItemFilterDoPropertyChanged(m)};this.protectedRepaint=function(){c.requestRepaint()};this.protectedGetFilterSelectedValue=function(){return c.getSelectedItems().slice(0)};
this.protectedUpdateCtrlModel=function(m){c.setSelectableItems(m)};this.protectedUpdateSelectedValue=function(m){m||(m=(m=b.getSelectableItems())&&0<m.length?[m[0]]:[]);c.setSelectedItems(m)}}function fa(){kb.call(this);this.setSelectableItems=function(a){throw Error("Implement");};this.setSelectedItems=function(a){throw Error("Implement");};this.getSelectedItems=function(){throw Error("Implement");};this.setValueChangedListener=function(a){throw Error("Implement");};this.requestRepaint=function(){throw Error("Implement");
};this.relayout=function(){throw Error("Implement");}}function ta(){Ga.call(this);Bb.call(this);var a=this,b=this.protectedMethod,c;this.protectedCreateJqUiImpl=function(m){c=m.createWidgetCtrl(a.getModel());c.setValueChangedListener(function(){b.fireCommunicationEvent(Ga.KEY_SELECTED_BY_MANUAL)});return c.getJqUi()};this.protectedDoPropertyChanged=function(m){m==Sa.KEY_FILTER_FRONT_LABEL||m==Sa.KEY_FILTER_FRONT_LABEL_POSITION||m==Sa.KEY_FILTER_FRONT_LABEL_LENGTH?c.updateFrontLabel():m==Sa.KEY_FONT_SIZE_ENHANCED?
c.updateSurface():b.discreteItemFilterDoPropertyChanged(m)};this.protectedRepaint=function(){c.updateFrontLabel()};this.protectedGetFilterSelectedValue=function(){var m=c.getSelectedItems();return m?m.slice(0):vd.createItemAll()};this.protectedUpdateCtrlModel=function(m){c.setSelectableItems(m)};this.protectedUpdateSelectedValue=function(m){m||(m=a.getModel().isMultiSelectable()?null:(m=b.getSelectableItems())&&0<m.length?[m[0]]:[]);c.setSelectedItems(m)}}function Ra(){Ga.call(this);dc.call(this);
var a=this,b=this.protectedMethod,c,m;this.reparseRelativeDate=function(){m(null,C)};this.protectedCreateJqUi=function(Z){c=Z.createWidgetCtrl(a.getModel());c.setValueChangedListener(function(){b.fireCommunicationEvent(Ga.KEY_SELECTED_BY_MANUAL)});return c.getJqUi()};this.run=function(Z){if(a.getModel().getRelativeModel()){var P=null;m=function(O,F){var Q=a.getModel().getRelativeModel(),K=a.protectedGetDatePart(),X=Z(function(S){var ra=S.fromDate;S=S.toDate;a.getModel().updateDate(ra,S);O&&O();ra=
"["+ra+","+S+"]";P!=ra&&(P=ra,F&&F())});X.setShowBlocking(!1);X.parseRelativePeriod(Q,K)};m(C)}else C()};this.protectedGetDatePart=function(){return null};this.protectedDoPropertyChanged=function(Z){Z==Pc.KEY_DATE_INITIAL?C():Z==Sa.KEY_FILTER_FRONT_LABEL||Z==Sa.KEY_FILTER_FRONT_LABEL_POSITION||Z==Sa.KEY_FILTER_FRONT_LABEL_LENGTH?c.updateFrontLabel():Z==Sa.KEY_FONT_SIZE_ENHANCED?c.updateSurface():b.filterSimilaryDoPropertyChanged(Z)};this.protectedRepaint=function(){c.updateFrontLabel()};this.getFilterSelectedValue=
function(){var Z=c.getFromDateMs(),P=c.getToDateMs(),O=a.getModel().isContainNull();O=new Wd(Z,P,O);Z=n(Z);P=n(P);var F=a.protectedConfirmSingleParamValue(Z,P);O.setParamValue(F,Z,P);return O};this.protectedConfirmSingleParamValue=function(Z,P){return null};var n=function(Z){return J.getFullYear(Z)+x(J.getMonth(Z)+1)+x(J.getDate(Z))},x=function(Z){return(9<Z?"":"0")+Z},C=function(){c.setDateMs([a.getModel().getFromDate(),a.getModel().getToDate()]);b.fireCommunicationEvent(Ga.KEY_SELECTED_BY_API)}}
function Oa(){Ra.call(this)}function Qb(){Ra.call(this);this.protectedGetDatePart=function(){return"y"};this.protectedConfirmSingleParamValue=function(a,b){return a.substring(0,4)}}function Ka(){Ra.call(this);this.protectedGetDatePart=function(){return"q"};this.protectedConfirmSingleParamValue=function(a,b){b=a.substring(0,4);a=a.substring(4,6);a=Math.ceil(parseInt(a)/3);return b+a}}function $b(){Ra.call(this);this.protectedGetDatePart=function(){return"m"};this.protectedConfirmSingleParamValue=function(a,
b){return a.substring(0,6)}}function pc(){Ra.call(this);this.protectedGetDatePart=function(){return"d"};this.protectedConfirmSingleParamValue=function(a,b){return a}}function Bc(){Xa.call(this);jc.call(this);vb.call(this);var a=this,b=this.protectedMethod,c,m;this.protectedCreateJqUi=function(x){var C=!(x.isDesigntime()||x.isPreview());c=x.createWidgetCtrl(a.getModel());c.updateTopBar(a.getModel().getCardDescription());c.setActionListener(function(Z,P,O){P==Mb.ACTION_FULLSCREEN&&(C?b.doFullscreen(c.getJqUi()):
b.fakeAction(Z,O))});c.setFullscreenAnnouncer(function(Z){m=Z},function(Z){b.markFullscreen(Z);Z&&n()});x=c.getJqUi();c.updateState();return x};this.protectedRepaint=function(){c.repaintSurface()};this.getJqPhysicalContainer=function(){return c.getJqContent()};this.protectedDoPropertyChanged=function(x){x==Sa.KEY_CARD_TITLE?c.updateTopBar(a.getModel().getCardDescription()):x==Sa.KEY_CARD_SURFACE?c.repaintSurface():x==kd.KEY_FULLSCREEN_ALLOWED?a.getModel().traversalMeAndDescendents(function(C){C.isInstanceOf(Sa.WidgetSuperType_FullscreenSupported)&&
b.getCtxApi().getWidgetUiObject(C).updateUiWhenAncestorFullscreenAllowedChanged()}):b.fullscreenSupportedWidgetDoPropertyChanged(x)};this.updateCardSurface=function(){c.repaintSurface()};this.refreshDuringFullscreen=function(){c.repaintSurface();setTimeout(n,0)};this.updateUiWhenAncestorFullscreenAllowedChanged=function(){c.updateState()};this.protectedFullScreenChanged=function(x){m(x);c.repaintSurface();x&&setTimeout(n,100)};this.protectedUpdateButtonStateByAncestorFullscreen=function(x){c.updateState()};
var n=function(){var x={};a.getModel().traversalMeAndDescendents(function(P){if(P.isContainer()&&!P.isInstanceOf(Sa.WidgetSuperType_CompositeContainer)){var O=new A;O.setDesigningSize(P.getClientWidth(),P.getClientHeight());x[P.getName()]=O;for(var F=0;F<P.getWidgetCount();F++){var Q=P.getWidget(F);O.appendBlock(Q.getName(),Q.getX(),Q.getY(),Q.getWidth(),Q.getHeight(),Q.isWidthLocked(),Q.isHeightLocked())}}});var C=c.getJqUi().prop("offsetWidth"),Z=c.getJqUi().prop("offsetHeight");C=a.getModel().getClientWidth(C);
Z=a.getModel().getClientHeight(Z);a.getModel().traversalMeAndDescendents(function(P){var O=x[P.getName()];if(O){P!=a.getModel()&&(C=P.getClientWidth(),Z=P.getClientHeight());O.transformTo(C,Z);for(var F=0;F<P.getWidgetCount();F++){var Q=P.getWidget(F),K=O.searchBlockRect(Q.getName());K&&Q.setRectangle(K[0],K[1],K[2],K[3])}}})}}function yc(){Xa.call(this);jc.call(this);Hb.call(this);var a=this,b=this.protectedMethod,c,m=0,n;this.protectedHookWidget=function(F){F.addChildrenChangedListener(Z)};this.protectedUnhookWidget=
function(F){F.removeChildrenChangedListener(Z)};this.protectedCreateJqUi=function(F){c=new ab;c.bindWidget(a.getModel());F=c.getJqUi();b.setupDesigntimeRectangle(c.getJqContent());return F};this.payAttentionTo=function(F,Q){if(b.isAnotherManualSelectedAffectedMe(F,Q)){Q=a.getModel();var K=(F=F.getModel().getAffectedTargets())?F.getTarget(Q.getName()):null;if(K&&K.isSettingComplete()){F=K.getUsableParamName();var X=b.createParamValueSearcherApi();F=X?X.searchDisplayText(F):void 0;if(void 0!==F&&X.isAnyOneExceptedItemAll())if(K=
K.getTabIndex(),0>K){for(K=0;K<Q.getWidgetCount();K++)if(Q.getWidget(K).getHeadText()==F){x(K);return}console&&console.warn("Tab '#1' at '#2' not exist.".replace("#1",F).replace("#2",Q.getDisplayName()))}else K<Q.getWidgetCount()?x(K):console&&console.warn("Tab index #1 at '#2' not exist.".replace("#1",K).replace("#2",Q.getDisplayName()))}}};var x=function(F){setTimeout(function(){a.getModel().switchToSubTabbed(F)},0)},C=this.updateInputParams;this.updateInputParams=function(F){var Q=xd.createItem(Sa.AffectedType_Tab);
Q.setTargetWidgetName(a.getModel().getName());F=new xd;F.addItem(Q);Q={};F.reverse("whoCare",Q);F=Q[a.getModel().getName()];C(F)};this.protectedRunImpl=function(F){if(b.isDesigntime()){F=a.getModel();for(var Q=0;Q<F.getWidgetCount();Q++){var K=F.getWidget(Q),X=K.getDurationMode();X.getType()==rd.TYPE_ByData&&(X.setRuntimeData([vd.createItemAll()]),K=b.getCtxApi().getWidgetUiObject(K),b.fireCommunicationEvent(Ga.KEY_PLAY,K))}}else if(a.getModel().isTopLevelSlideshow()){var S=function(){var ka=a.getModel().isAllDescendentSlideshowRuntimePrepared();
ka&&void 0===n&&(n=!1,P());return ka};if(!S()){var ra=function(){setTimeout(function(){!S()&&ra()},1E3)};ra()}}};this.protectedRepaint=function(){c.updateHeadUi(!1)};this.getJqPhysicalContainer=function(){return c.getJqContent()};this.protectedDoPropertyChanged=function(F){F!=Tc.KEY_TABBED_SELECTED&&F!=nd.KEY_HEAD_TEXT&&F!=Tc.KEY_HEAD_POSITION&&F!=Tc.KEY_HEAD_PATTERN&&F!=Sa.KEY_FONT_SIZE_ENHANCED||c.updateHeadUi(!0)};this.updateCardSurface=function(){c.updateHeadUi(!0)};var Z=function(F,Q,K){F==Sa.KEY_MOVE_CHILD&&
a.getModel()==Q&&c.updateHeadUi(!0)},P=function(){var F=a.getModel();if(!0!==n&&!b.isDead()&&0!=F.getWidgetCount()){var Q=F.getWidget(m);Q.getDurationMode().playStart(function(){var K=!0===n;if(!K){var X=a.getModel().searchVisibleSubTabbedIndex();m!=X&&F.switchToSubTabbed(m);O(F.getWidget(X),!0,function(S){S.isSlideshowPlaying()&&(S.slideshowPause(!0),S.resetSlideshowStatus())});O(F.getWidget(m),!1,function(S){!S.isSlideshowPlaying()&&S.slideshowPause(!1)})}return K},function(K){!0!==n&&(K&&(m++,
m>=F.getWidgetCount()&&(m=0)),setTimeout(P,0))})&&(Q=b.getCtxApi().getWidgetUiObject(Q),b.fireCommunicationEvent(Ga.KEY_PLAY,Q))}};this.resetSlideshowStatus=function(){m=0;var F=a.getModel();F.switchToSubTabbed(m);for(var Q=0;Q<F.getWidgetCount();Q++)F.getWidget(Q).getDurationMode().resetPlayingStatus()};this.isSlideshowPlaying=function(){return!1===n};this.slideshowPause=function(F){n=F?!0:!1;var Q=a.getModel();if(F)for(F=0;F<Q.getWidgetCount();F++)Q.getWidget(F).getDurationMode().playStop();else m=
Q.searchVisibleSubTabbedIndex(),P()};var O=function(F,Q,K){var X=function(S){for(var ra=0;ra<S.getWidgetCount();ra++){var ka=S.getWidget(ra);if(ka instanceof Tc&&ka.isSlideshowEnabled()){var La=b.getCtxApi().getWidgetUiObject(ka);K(La);if(!Q)continue}ka.isContainer()&&X(ka)}};X(F)}}function Gc(){kb.call(this);this.getJqContent=function(){throw Error("Implement");};this.updateHeadUi=function(a){throw Error("Implement");}}function Qc(){Xa.call(this);dc.call(this);var a=this,b=this.protectedMethod,c,
m,n=!1;this.protectedCreateJqUi=function(O){c=$("<div>");x();return c};this.getJqPhysicalContainer=function(){return c};this.run=function(O){C()&&(m=O,P());n=!0};this.protectedDoPropertyChanged=function(O){O==Sa.KEY_VISIBLE&&x()};this.payAttentionTo=function(O,F){if(C()&&(F==Ga.KEY_VISUAL_DATA_PREPARED_SUCCESS||F==Ga.KEY_VISUAL_DATA_PREPARED_ERROR)){O=O.getModel();var Q=Z();Q&&Q.isPreparedValueRelatedToWidget(O.getName())&&(F==Ga.KEY_VISUAL_DATA_PREPARED_SUCCESS?P():F==Ga.KEY_VISUAL_DATA_PREPARED_ERROR&&
a.getModel().getDurationMode().setRuntimeData(null))}};this.getFilterSelectedValue=function(){return a.getModel().getDurationMode().getPlayingData()};var x=function(){var O=a.getModel().isVisible();C()&&n?(c.stop(!0,!0),O?(c.css("visibility",""),c.fadeTo(1E3,1)):c.fadeTo(500,.2,function(){c.css("visibility","hidden")})):c.css("visibility",O?"":"hidden")},C=function(){return!b.isDesigntime()&&a.getModel().getParent().isSlideshowEnabled()},Z=function(){var O=a.getModel().getDurationMode();return O.getType()==
rd.TYPE_ByData?O.getFilterSource():null},P=function(){var O=a.getModel(),F=Z();F&&F.isValid()&&F.isConfirmedToGetPreparedValue(O)&&F.getPreparedValuePeer(O,m,function(Q){O.getDurationMode().setRuntimeData(Q)})}}function Pa(){Ga.call(this);var a=this,b=this.protectedMethod,c,m,n,x,C;this.protectedCreateJqUi=function(K){c=$("<div>");c.css("overflow","hidden");b.setupDesigntimeRectangle(c);n=$("<img>");n.css("position","absolute");n.appendTo(c);O();return c};this.protectedDoPropertyChanged=function(K){K==
Sa.KEY_REF?O():K==Ma.KEY_SCALE?Z():K==Ma.KEY_ALIGN&&P()};this.protectedRepaint=function(){n&&Z()};var Z=function(){var K=a.getModel(),X=K.getWidth(),S=K.getHeight();if(K.getScale()==Ma.SCALE_NON)K=x,X=C;else{K=X/S;var ra=x/C;ra>K?(K=X,X/=ra):(K=ra<K?S*ra:X,X=S)}n.css({height:X+"px",width:K+"px"});P()},P=function(){var K=a.getModel(),X=K.getAlign()==(Ma.HALIGN_CENTER|Ma.VALIGN_MIDDLE)?!0:!1,S=K.getHeight();K=K.getWidth();var ra=n.height(),ka=n.width(),La=0,cb=0;X&&(La=parseInt((S-ra)/2),cb=parseInt((K-
ka)/2));n.css({top:La+"px",left:cb+"px"})},O=function(){m&&(n.show(),m.remove(),c.css("background","none"));c.attr("title",null);var K=a.getModel().getReferenceCustomMap();za.getPictureLoader()(K,F,Q)},F=function(K,X,S){x=X;C=S;n.attr("src",K);Z()},Q=function(K){n&&n.hide();c.css("background","#fff");m=$("<div>");m.addClass("dsb-widget-picture-loaderror");var X=f.get("pictureCanNotBeFind","\u627e\u4e0d\u5230\u5bf9\u5e94\u7684\u56fe\u7247"),S=$("<div>");S.text(X);var ra=$("<div>");ra.css("fontSize",
"12px");ra.text(K);S.appendTo(m);ra.appendTo(m);m.appendTo(c);c.attr("title",X+"\r\n"+K)}}function fb(){Xa.call(this);var a=this,b=this.protectedMethod,c;this.protectedCreateJqUi=function(n){c=$("<div>");m();b.setupDesigntimeRectangle(c);return c};this.getJqPhysicalContainer=function(){return c};this.protectedDoPropertyChanged=function(n){n==Vb.KEY_SURFACE&&m()};this.run=function(n){!b.isDesigntime()&&a.getModel().isFrozen()&&c.addClass("dsb-widget-titlebar-frozen")};var m=function(){var n;if(n=a.getModel().getSurfaceModel()){var x=
n.getBackgroundColor();var C=n.getSeparaterLineWidth();n=n.getSepataterColor()}else n=wa.dip(wa.DSB_PAGE_TITLE_BAR),x=n[wa.Key_PageTitleBar_BackgroundColor],C=n[wa.Key_PageTitleBar_SeparaterLineWidth],n=n[wa.Key_PageTitleBar_SeparaterColor];C=(C?C:0)+"px solid "+(n?n:"transparent");c.css("background-color",x?x:"");c.css({"box-sizing":"border-box","border-bottom":C})}}function gb(){var a=this,b,c,m,n;this.destroy=function(){c&&c.removePropertyChangedListener(a.protectedDoPropertyChanged);setTimeout(function(){c=
b=null},2E3)};this.setGlobalDependence=function(O){b=O};this.setWidget=function(O){c=O;c.addPropertyChangedListener(Z)};this.getWidget=function(){return c};this.getJqUi=function(){m||(m=$("<div>"),m.css({"overflow-x":"hidden","overflow-y":"auto"}),n=new e,n.setAlign(e.ALIGN_CENTER),n.getJqUi().addClass("dsb-propertyarea-lineitem"),n.getJqUi().appendTo(m),x(),a.protectedInitUi(m));return m};var x=function(){var O=Jc.getInstance(a.getWidget().getWidgetTypeName()).getTypeDisplayName(),F=a.getWidget().getDisplayName(),
Q=F;O!=F&&(Q=O+": "+F);n.setText(Q)},C=function(O,F){if(O.length){var Q=b.getCommandManager().createCompositeAction();for(var K=0;K<O.length;K++)Q.appendUnitAction(O[K])}else Q=O;O=a.getWidget().getDisplayName();F=f.get("actionCaption","#1\u4fee\u6539#2").replace("#2",F).replace("#1",O);Q.setCaption(F);b.getCommandManager().perform(Q)},Z=function(O,F){O==c&&(F==Sa.KEY_DISPLAY_NAME&&x(),a.protectedDoPropertyChanged(F))};this.protectedDoPropertyChanged=function(O){throw Error("Override");};this.protectedInitUi=
function(O){throw Error("Override");};var P=function(O){return O.getUserObject().getText()};this.protectedMethod={getGlobal:function(){return b},performAction:C,createJqCap:function(){var O=$("<div>");O.addClass("dsb-propertyarea-gap");return O},createJqGroupTitle:function(O,F){var Q=$("<div>");Q.addClass("dsb-propertyarea-grouptitle");O=new e(O);var K=O.getJqUi();K.addClass("dsb-propertyarea-grouptitle-label");K.appendTo(Q);if(F||0==F)K.css("left",0),K.css("right",0),O.setAlign(F);return Q},createJqLineItem:function(O,
F){var Q=new e(O);O=Q.getJqUi();O.addClass("dsb-propertyarea-lineitem-caption");F.setUserObject(Q);F=F.getJqUi();F.addClass("dsb-propertyarea-lineitem-ctrl");Q=$("<div>");Q.addClass("dsb-propertyarea-lineitem");Q.append(O);Q.append(F);return Q},createTextEditor:function(O,F,Q,K,X,S){var ra=function(La){if(Q)Q(La);else{var cb=P(ka),hb=new Dc;hb.setMethod(O,F);hb.setValue(La);C(hb,cb)}},ka=new q;ka.addActionListener(function(La){La=a.getWidget().getDisplayName();var cb=P(ka),hb=ka.getModel(),Zb=new Id;
Zb.setCaption(La,cb);Zb.setEmptyEnabled(K);Zb.setMaxLength(X);Zb.setClosingChecker(S);Zb.setText(hb,function(mc,tc){mc&&ra(tc)});Zb.showDialogLeftAnchorTo(ka.getUserObject().getJqUi())});K&&(ka.setClearable(!0),ka.addClearListener(function(La){ra("")}));return ka},createTextAreaEditor:function(O,F){var Q=function(X){var S=P(K),ra=new Dc;ra.setMethod(O,F);ra.setValue(X);C(ra,S)},K=new q;K.addActionListener(function(X){X=a.getWidget().getDisplayName();var S=P(K),ra=K.getModel(),ka=new Xd;ka.setSize(640,
480);ka.setTitle(X,S);ka.showDialog(ra,function(La,cb){La&&Q(cb)})});K.setClearable(!0);K.addClearListener(function(X){Q("")});return K},updateEditorEnabled:function(O,F){O.setEnabled(F);O.getUserObject().setEnabled(F)},updateEditorVisible:function(O,F){O.getJqUi().parent().css("display",F?"":"none")},getEditorCaption:P,createSpinerHandlerWrapper:function(O){var F;return function(Q,K,X,S){S==z.CHANGED_BY_MANUAL_ADJUST?(clearTimeout(F),F=setTimeout(function(){O(Q,K,X)},625)):S==z.CHANGED_BY_MANUAL_EDIT&&
O(Q,K,X)}}}}function sb(){gb.call(this);this.protectedInitUi=function(a){};this.protectedDoPropertyChanged=function(a){}}function Na(){var a=this,b=this.protectedMethod,c,m,n,x=function(X){var S=za.getWidgetSourceSelector(),ra=a.getWidget().getBackgroundPicture(),ka=ra?ra.getReferenceCustomMap():null;S.selectPicture(ka,function(La){if(La){var cb=b.getEditorCaption(X),hb=new Ma;hb.setReferenceCustomMap(La);hb.setScale(ra?ra.getScale():Ma.SCALE_FULL);hb.setAlign(ra?ra.getAlign():Ma.HALIGN_LEFT|Ma.VALIGN_TOP);
O(hb,cb)}})},C=function(X){X=b.getEditorCaption(X);O(null,X)},Z=function(X,S,ra){X=b.getEditorCaption(X);S=a.getWidget().getBackgroundPicture();var ka=new Ma;ka.setReferenceCustomMap(S.getReferenceCustomMap());ka.setScale(ra);ka.setAlign(S.getAlign());O(ka,X)},P=function(X,S,ra){X=b.getEditorCaption(X);S=a.getWidget().getBackgroundPicture();var ka=new Ma;ka.setReferenceCustomMap(S.getReferenceCustomMap());ka.setScale(S.getScale());ka.setAlign(ra);O(ka,X)},O=function(X,S){var ra=a.getWidget(),ka=new Dc;
ka.setMethod(ra.getBackgroundPicture,ra.setBackgroundPicture);ka.setValue(X);b.performAction(ka,S)},F=function(){var X=a.getWidget().getBackgroundPicture(),S=X&&X.getReferenceCustomMap()?!0:!1,ra=!1;S?(c.setModel(f.get("refHasSet","\u5df2\u8bbe\u7f6e")),m.setSelected(X.getScale()),n.setSelected(X.getAlign()),ra=X.isAlignNeccessary()):c.setModel("");b.updateEditorVisible(m,S);b.updateEditorVisible(n,ra)},Q=function(X,S,ra){var ka=function(cb){return(ra&cb)==cb},La=ka(Ma.HALIGN_LEFT)?f.get("pictureAlignLeft",
"\u5de6"):ka(Ma.HALIGN_RIGHT)?f.get("pictureAlignRight","\u53f3"):f.get("pictureAlignCenter","\u4e2d");ka=ka(Ma.VALIGN_TOP)?f.get("pictureAlignTop","\u4e0a"):ka(Ma.VALIGN_BOTTOM)?f.get("pictureAlignBottom","\u4e0b"):f.get("pictureAlignMiddle","\u4e2d");La=La+"-"+ka;X||S.css({display:"inline-block",padding:0,margin:0,width:"33%",height:"30%","text-align":"center","line-height":"50px"});S.text(La)},K=function(X,S,ra){switch(ra){case Ma.SCALE_NON:var ka=f.get("pictureScaleNon","\u539f\u59cb\u5c3a\u5bf8");
break;case Ma.SCALE_ADAPTIVE:ka=f.get("pictureScaleAdaptive","\u9002\u5e94");break;case Ma.SCALE_FULL:ka=f.get("pictureScaleFull","\u5145\u6ee1");break;case Ma.SCALE_TILED:ka=f.get("pictureScaleTiled","\u5e73\u94fa")}S.text(ka)};b.backgroundInitUi=function(X){c=new q;c.setClearable(!0);c.addActionListener(x);c.addClearListener(C);m=new aa;m.setItemModels([Ma.SCALE_NON,Ma.SCALE_ADAPTIVE,Ma.SCALE_FULL,Ma.SCALE_TILED]);m.setCustomPainter(K);m.addSelectedChangedListener(Z);n=new aa;n.setItemModels([Ma.HALIGN_LEFT|
Ma.VALIGN_TOP,Ma.HALIGN_CENTER|Ma.VALIGN_TOP,Ma.HALIGN_RIGHT|Ma.VALIGN_TOP,Ma.HALIGN_LEFT|Ma.VALIGN_MIDDLE,Ma.HALIGN_CENTER|Ma.VALIGN_MIDDLE,Ma.HALIGN_RIGHT|Ma.VALIGN_MIDDLE,Ma.HALIGN_LEFT|Ma.VALIGN_BOTTOM,Ma.HALIGN_CENTER|Ma.VALIGN_BOTTOM,Ma.HALIGN_RIGHT|Ma.VALIGN_BOTTOM]);n.setCustomPainter(Q);n.addSelectedChangedListener(P);var S=b.createJqGroupTitle(f.get("pageBackgroundGroupTitle","\u80cc\u666f\uff1a")),ra=b.createJqLineItem(f.get("pageBackgroundPicture","\u80cc\u666f\u56fe\u7247"),c),ka=b.createJqLineItem(f.get("pageBackgroundScale",
"\u56fe\u7247\u7f29\u653e"),m),La=b.createJqLineItem(f.get("pageBackgroundAlign","\u56fe\u7247\u5bf9\u9f50"),n);X.append(S);X.append(ra);X.append(ka);X.append(La);F()};b.backgroundDoPropertyChanged=function(X){X==Sa.KEY_PAGE_BACKGROUND&&F()}}function eb(){var a=this,b=this.protectedMethod,c,m,n={},x=function(){var P=a.getWidget(),O=!0;if(P.isInstanceOf(Sa.WidgetSuperType_CardSimilary)){O=P.isBareSurface();var F=P.getCardSurfaceMode()==Ob.Surface_Custom;O=!O&&F}F=!1;var Q="Unified";if(P=P.getCardBorder())Q=
P.getType(),F=Q==gd.TYPE_MODEL||Q==gd.TYPE_IMAGE;c.setSelected(Q);b.updateEditorVisible(c,O);m.setModel(P);b.updateEditorVisible(m,O&&F)},C=function(P){var O=m.getJqUi(),F=O.children(".qing-custom-cardlook");0==F.length&&(F=$("<div>"),F.css("border","1px solid #ccc"),F.addClass("qing-custom-cardlook"),N.layoutCtrlWithLRTB(F,2,32,null,5,2,null),F.appendTo(O));P&&P.getType()==gd.TYPE_IMAGE?(P=$(document.createDocumentFragment()),Z(P,20,20,null,0,null,5,"0px 1px 1px 1px"),Z(P,20,20,null,null,0,5,"1px 1px 0px 1px"),
Z(P,0,null,21,4,4,null,"1px 1px 1px 0px"),Z(P,null,0,21,4,4,null,"1px 0px 1px 1px"),P.appendTo(F)):F.empty();return""},Z=function(P,O,F,Q,K,X,S,ra){var ka=$("<div>");ka.css({"box-sizing":"border-box",border:"1px dotted #ccc","border-width":ra});ka.appendTo(P);N.layoutCtrlWithLRTB(ka,O,F,Q,K,X,S)};b.initUiOfCardBorder=function(P,O,F){F&&(O=["Unified"].concat(O));c=new aa;c.setItemModels(O);c.setCustomPainter(function(Q,K,X){Q=X==gd.TYPE_SIMPLE?f.get("cardBorderSimple","\u7b80\u6613"):X==gd.TYPE_MODEL?
f.get("cardBorderCustom","\u81ea\u5b9a\u4e49"):X==gd.TYPE_IMAGE?f.get("cardBorderImage","\u8d34\u56fe"):"Unified"==X?f.get("unifiedInPage","\u9875\u9762\u7edf\u4e00"):"";K.text(Q)});c.addSelectedChangedListener(function(Q,K,X){(K="Unified"==K?null:K)&&!n[K]&&(n[K]=a.getWidget().getCardBorder());Q=b.getEditorCaption(Q);X=(K="Unified"==X?null:X)?n[K]:null;K&&!X&&(X=gd.createInstance(K),n[K]=X);K=new Dc;K.setMethod(a.getWidget().getCardBorder,a.getWidget().setCardBorder);K.setValue(X);b.performAction(K,
Q)});m=new q;m.setCustomPainter(C);m.addActionListener(function(Q){var K=a.getWidget().isInstanceOf(Sa.WidgetSuperType_CardSimilary);Q=K?a.getWidget().getDisplayName():f.get("unifiedInPage","\u9875\u9762\u7edf\u4e00");var X=a.getWidget().getCardBorder();if(X.getType()==gd.TYPE_MODEL){var S=wa.getPageBackgroundColor();K=K?a.getWidget().getBackgroundColor():null;K||(K=a.getWidget().isOpacityRequired(),K=wa.getCardBackgroundColor(K));var ra=new Yd;ra.setContextStyle(S,K);ra.setCardLookModel(X.getCardLook());
ra.show(Q,function(ka){var La=b.getEditorCaption(c),cb=new Dc;cb.setMethod(X.getCardLook,X.setCardLook);cb.setValue(ka);b.performAction(cb,La)})}else X.getType()==gd.TYPE_IMAGE&&(ra=new Zd,ra.setImage(X.getImage(),X.getFixedEdges()),ra.show(Q,function(ka,La){var cb=b.getEditorCaption(c),hb=new Dc;hb.setMethod(function(){return[X.getImage(),X.getFixedEdges()]},function(Zb){X.setDefinition(Zb[0],Zb[1])});hb.setValue([ka,La]);b.performAction(hb,cb)}))});P.append(b.createJqLineItem(f.get("cardBorder",
"\u5361\u7247\u8fb9\u6846"),c));P.append(b.createJqLineItem(f.get("cardBorderSetup","\u8fb9\u6846\u81ea\u5b9a\u4e49"),m));x()};b.cardBorderDoPropertyChanged=function(P){P!=Sa.KEY_PAGE_UNIFIED_CARD&&P!=Sa.KEY_CARD_SURFACE||x()}}function Lb(){var a=this,b=this.protectedMethod,c,m=function(){var C=a.getWidget();c.setModel(C.getCardTopBarCommon());var Z=!0;C.isInstanceOf(Sa.WidgetSuperType_CardSimilary)&&(Z=!C.isBareSurface());b.updateEditorVisible(c,Z)},n=function(C){var Z=b.getEditorCaption(c),P=new Dc;
P.setMethod(a.getWidget().getCardTopBarCommon,a.getWidget().setCardTopBarCommon);P.setValue(C);b.performAction(P,Z)},x=function(C){return a.getWidget().isInstanceOf(Sa.WidgetSuperType_CardSimilary)?C?f.get("custom","\u81ea\u5b9a\u4e49"):f.get("unifiedInPage","\u9875\u9762\u7edf\u4e00"):C?f.get("refHasSet","\u5df2\u8bbe\u7f6e"):""};b.initUiOfCardTopBarCommon=function(C){var Z=a.getWidget();if(Z.isInstanceOf(Sa.WidgetSuperType_CardSimilary)){var P=f.get("cardIcon","\u6807\u9898\u680f\u56fe\u7247");
var O=Jd}else P=f.get("cardTopBar","\u5361\u7247\u6807\u9898\u680f"),O=$d;c=new q;c.setClearable(!0);c.addActionListener(function(F){F=new O;F.setWidget(Z);F.show(function(Q){n(Q)})});c.addClearListener(function(F){n(null)});c.setCustomPainter(x);P=b.createJqLineItem(P,c);C.append(P);m()};b.cardTopBarCommonDoPropertyChanged=function(C){C!=Sa.KEY_PAGE_UNIFIED_CARD&&C!=Sa.KEY_CARD_TITLE&&C!=Sa.KEY_CARD_SURFACE||m()}}function ob(){function a(Za,Ja,yb){this.getWidth=function(){return Za};this.getHeight=
function(){return Ja};this.isMatched=function(Tb,gc){return Za==Tb&&Ja==gc};this.toString=function(){return Za+"*"+Ja+" "+yb}}gb.call(this);Na.call(this);eb.call(this);Lb.call(this);var b=this,c=this.protectedMethod,m,n,x,C,Z,P,O,F,Q,K,X,S;this.protectedInitUi=function(Za){n=new aa;n.setItemModels(Ac());n.addSelectedChangedListener(cb);x=new z;x.setConstraint(200,65535,10);x.addValueChangedListener(hb,!0);C=new z;C.setConstraint(200,65535,10);C.addValueChangedListener(hb,!0);Z=new e(f.get("mobileDesiredTips",
"\u4ee5\u4e0a\u5c3a\u5bf8\u81ea\u52a8\u8bc6\u522b\u4e3a\u624b\u673a\u6a21\u5f0f"));Z.getJqUi().css({"text-align":"right",padding:"8px"});var Ja=c.createJqGroupTitle(f.get("pageSizeGroupTitle","\u8bbe\u8ba1\u65f6\u9875\u9762\u5927\u5c0f\uff1a")),yb=c.createJqLineItem(f.get("size","\u5c3a\u5bf8"),n),Tb=c.createJqLineItem(f.get("sizeWidth","\u5bbd\u5ea6"),x),gc=c.createJqLineItem(f.get("sizeHeight","\u9ad8\u5ea6"),C);Za.append(Ja);Za.append(yb);Za.append(Tb);Za.append(gc);Za.append(Z.getJqUi());setTimeout(Xc,
0);Za.append(c.createJqCap());c.backgroundInitUi(Za);Q=new d;Q.addBlurListener(tc);Q.addAcceptableListener(sc);Ja=c.createJqLineItem(f.get("pageWatermark","\u6c34\u5370"),Q);Za.append(Ja);c.updateEditorVisible(Q,!1);ld();Za.append(c.createJqCap());Za.append(c.createJqCap());Za.append(ra(f.get("justForDesktop","\u4ee5\u4e0b\u4ec5\u5728\u684c\u9762\u7aef\u751f\u6548")));Ja=c.createJqGroupTitle(f.get("exhibitionModeGroupTitle","\u5c55\u793a\u6a21\u5f0f\uff1a"));P=new Pb;P.addSelectionChangedListener(Ec);
yb=P.createJqUi();Za.append(Ja);Za.append(yb);P.setSelection(b.getWidget().getExhibitionMode());Za.append(c.createJqCap());ka(Za);Za.append(c.createJqCap());Za.append(c.createJqCap());Za.append(ra(f.get("justForMobile","\u4ee5\u4e0b\u4ec5\u5728\u79fb\u52a8\u7aef\u751f\u6548")));K=$("<div>");La(Za,K);Za.append(c.createJqCap());K.appendTo(Za);Za.append(c.createJqCap());Za.append(c.createJqCap());Za.append(c.createJqCap())};var ra=function(Za){Za="--- @ ---".replace("@",Za);return c.createJqGroupTitle(Za,
e.ALIGN_CENTER)},ka=function(Za){O=new aa;O.setItemModels([Sa.Skin_White,Sa.Skin_DarkBlue,Sa.Skin_Gold,Sa.Skin_Cyan,Sa.Skin_Custom]);O.setCustomPainter(function(Ja,yb,Tb){Ja=Tb==Sa.Skin_Custom?f.get("custom","\u81ea\u5b9a\u4e49"):Tb==Sa.Skin_Cyan?f.get("skinCyan","\u9759\u8c27\u9752"):Tb==Sa.Skin_Gold?f.get("skinGold","\u571f\u8c6a\u91d1"):Tb==Sa.Skin_DarkBlue?f.get("skinDarkBllue","\u6df1\u9083\u84dd"):Tb==Sa.Skin_White?f.get("skinWhite","\u6de1\u96c5\u767d"):"";yb.text(Ja)});O.addSelectedChangedListener(Zb);
F=new q;F.setCustomPainter(lc);F.addActionListener(mc);Za.append(c.createJqGroupTitle(f.get("skinGroupTitle","\u5916\u89c2\uff1a")));Za.append(c.createJqLineItem(f.get("skin","\u5916\u89c2\u98ce\u683c"),O));Za.append(c.createJqLineItem(f.get("skinCustom","\u5916\u89c2\u81ea\u5b9a\u4e49"),F));c.initUiOfCardBorder(Za,[gd.TYPE_SIMPLE,gd.TYPE_MODEL,gd.TYPE_IMAGE]);c.initUiOfCardTopBarCommon(Za);ad()},La=function(Za,Ja){var yb=function(Tb,gc,xc,vc){var Uc=new B;Uc.setUserObject(Tb);Uc.setText(gc);vc.addElement(Uc);
Tb=Uc.getJqUi();Tb.css({position:"relative",height:"23px","margin-left":"8px"});xc.append(Tb)};Za.append(c.createJqGroupTitle(f.get("mobileSkinGroupTitle","\u79fb\u52a8\u7aef\u5916\u89c2\uff1a")));S=new W;S.addChangedListener(function(Tb,gc){if(gc){Tb=Tb.getUserObject();gc=f.get("mobileSkinGroupTitle","\u79fb\u52a8\u7aef\u5916\u89c2");var xc=b.getWidget(),vc=new Dc;vc.setMethod(xc.isMobileSkinActive,xc.setMobileSkinActive);vc.setValue(Tb);c.performAction(vc,gc)}});yb(!1,f.get("mobileSkinUnactive",
"\u7cfb\u7edf\u9ed8\u8ba4"),Za,S);yb(!0,f.get("mobileSkinActive","\u4e0e\u684c\u9762\u7aef\u76f8\u540c"),Za,S);Ja.append(c.createJqGroupTitle(f.get("mobileLayoutConverterGroupTitle","\u7ec4\u4ef6\u5728\u79fb\u52a8\u7aef\u81ea\u9002\u5e94\u5e03\u5c40\uff1a")));X=new W;X.addChangedListener(function(Tb,gc){if(gc){Tb=Tb.getUserObject();gc=f.get("mobileLayoutConverterGroupTitle","\u7ec4\u4ef6\u5728\u79fb\u52a8\u7aef\u81ea\u9002\u5e94\u5e03\u5c40");var xc=b.getWidget(),vc=new Dc;vc.setMethod(xc.getMobileLayoutConverter,
xc.setMobileLayoutConverter);vc.setValue(Tb);c.performAction(vc,gc)}});yb(Sa.MobileLayoutConverter_ByPosition,f.get("mobileLayoutConverterByPosition","\u6309\u4f4d\u7f6e"),Ja,X);yb(Sa.MobileLayoutConverter_InOrder,f.get("mobileLayoutConverterInOrder","\u6309\u5927\u7eb2\u4e2d\u7684\u987a\u5e8f"),Ja,X);qd();Nb()};this.protectedDoPropertyChanged=function(Za){Za==Sa.KEY_PAGE_SIZE?Xc():Za==Sa.KEY_PAGE_EXHIBITION_MODE?P.setSelection(b.getWidget().getExhibitionMode()):Za==Sa.KEY_PAGE_SKIN?ad():Za==Sa.KEY_PAGE_WATERMARK?
ld():Za==Sa.KEY_PAGE_MOBILE_LAYOUT_CONVERTER?qd():Za==Sa.KEY_PAGE_MOBILE_SKIN_ACTIVE?Nb():(c.backgroundDoPropertyChanged(Za),c.cardBorderDoPropertyChanged(Za),c.cardTopBarCommonDoPropertyChanged(Za))};var cb=function(Za,Ja,yb){Za=c.getEditorCaption(Za);if(yb!=a.CUSTOM){Ja=yb.getWidth();yb=yb.getHeight();var Tb=new Kd;Tb.setValue(b.getWidget(),Ja,yb);c.performAction(Tb,Za)}},hb=function(Za,Ja,yb){Za=c.getEditorCaption(Za);Ja=x.getValue();yb=C.getValue();var Tb=new Kd;Tb.setValue(b.getWidget(),Ja,yb);
c.performAction(Tb,Za)},Zb=function(Za,Ja,yb){Za=c.getEditorCaption(Za);Ja=yb==Sa.Skin_Custom?c.getGlobal().getDashboardModel().getCurrentCosmeticModel():null;Fc(yb,Ja,Za)},mc=function(Za){Za=new ae;Za.setCosmeticModel(c.getGlobal().getDashboardModel().getCurrentCosmeticModel().copyToEdit());Za.show(function(Ja){var yb=c.getEditorCaption(O);Fc(Sa.Skin_Custom,Ja,yb)})},tc=function(Za){Wc()},sc=function(Za,Ja){Ja?Wc():ld()},Ec=function(Za){var Ja=f.get("exhibitionMode","\u5c55\u793a\u6a21\u5f0f"),yb=
b.getWidget(),Tb=new Dc;Tb.setMethod(yb.getExhibitionMode,yb.setExhibitionMode);Tb.setValue(Za);c.performAction(Tb,Ja)},Fc=function(Za,Ja,yb){var Tb=b.getWidget(),gc=new Dc;gc.setMethod(function(){return[Tb.getSkin(),Tb.getCustomCosmetic()]},function(xc){Tb.setSkin(xc[0],xc[1])});gc.setValue([Za,Ja]);c.performAction(gc,yb)},Wc=function(){var Za=b.getWidget(),Ja=$.trim(Q.getText()),yb=$.trim(Za.getWatermark());if(Ja!=yb){yb=c.getEditorCaption(Q);var Tb=new Dc;Tb.setMethod(Za.getWatermark,Za.setWatermark);
Tb.setValue(Ja);c.performAction(Tb,yb)}},Xc=function(){var Za=b.getWidget().getWidth(),Ja=b.getWidget().getHeight();Z.getJqUi().css("display",b.getWidget().isMobileDesired()?"":"none");K.css("display",b.getWidget().isMobileDesired()?"none":"");x.setValue(Za);C.setValue(Ja);for(var yb=Ac(),Tb=0;Tb<yb.length;Tb++){var gc=yb[Tb];if(gc!=a.CUSTOM&&gc.isMatched(Za,Ja)){n.setSelected(gc);return}}n.setSelected(a.CUSTOM)},ad=function(){var Za=b.getWidget().getSkin();Za=Za?Za:Sa.Skin_White;O.setSelected(Za);
Za=Za==Sa.Skin_Custom;F.setModel(b.getWidget().getCustomCosmetic());c.updateEditorVisible(F,Za)},ld=function(){Q.setText(b.getWidget().getWatermark())},qd=function(){X.toCheckTheElement(function(Za){return Za.getUserObject()==b.getWidget().getMobileLayoutConverter()})},Nb=function(){S.toCheckTheElement(function(Za){return Za.getUserObject()==b.getWidget().isMobileSkinActive()})},lc=function(Za){var Ja=F.getJqUi(),yb=Ja.children(".qing-custom-cosmetic");yb.remove();if(Za){yb=$("<div>");yb.addClass("qing-custom-cosmetic");
yb.css("border","1px solid #ccc");var Tb=$("<div>");Tb.css("background-color",Za.getItems(wa.DSB_PAGE)[0].getValue());Tb.appendTo(yb);var gc=$("<div>");gc.css("background-color",Za.getItems(wa.DSB_CARD)[0].getValue());gc.appendTo(yb);var xc=$("<div>");xc.css("background-color",Za.getItems(wa.DSB_LABEL)[0].getValue());xc.appendTo(yb);N.layoutCtrlWithLRTB(Tb,1,null,"33%",1,1,null);N.layoutCtrlWithLRTB(gc,"33%","33%",null,1,1,null);N.layoutCtrlWithLRTB(xc,null,1,"33%",1,1,null);N.layoutCtrlWithLRTB(yb,
0,30,null,4,1,null);yb.appendTo(Ja)}return""},Ac=function(){m||(m=[a.CUSTOM,new a(800,600,"(4:3)"),new a(1024,768,"(4:3)"),new a(1280,960,"(4:3)"),new a(1280,720,"(16:9)"),new a(1600,900,"(16:9)"),new a(1920,1080,"(16:9)"),new a(1280,800,"(16:10)"),new a(1920,1200,"(16:10)"),new a(360,640,"("+f.get("mobilePhone","\u624b\u673a")+")")]);return m};a.CUSTOM=f.get("custom","\u81ea\u5b9a\u4e49")}function Pb(){var a=new W;this.addSelectionChangedListener=function(c){a.addChangedListener(function(m,n){n&&
c(m.getUserObject())})};this.setSelection=function(c){a.toCheckTheElement(function(m){return c==m.getUserObject()})};this.createJqUi=function(){var c=f.get("keepRatio","(\u4fdd\u6301\u6bd4\u4f8b)"),m=b(Sa.ExhibitionMode_Full,f.get("exmodeFull","\u5145\u6ee1"),null,"icon_exmode_full"),n=b(Sa.ExhibitionMode_Fit,f.get("exmodeFit","\u9002\u5e94"),c,"icon_exmode_fit"),x=b(Sa.ExhibitionMode_HFull,f.get("exmodeHFull","\u6a2a\u5411\u5145\u6ee1"),c,"icon_exmode_hfull");c=b(Sa.ExhibitionMode_Idle,f.get("exmodeIdle",
"\u4e0d\u7f29\u653e"),c,"icon_exmode_idle");var C=$("<div>");C.addClass("dsb-propertyarea-exmodearea");C.append(m);C.append(n);C.append(x);C.append(c);return C};var b=function(c,m,n,x){var C=new B;C.setUserObject(c);C.setText(m);a.addElement(C);c=C.getJqUi();c.addClass("dsb-propertyarea-exmodearea-item-radio");m=new e;n&&m.setText(n);n=m.getJqUi();n.addClass("dsb-propertyarea-exmodearea-item-text");m=$("<div>");m.addClass("dsb-propertyarea-exmodearea-item-icon");oa.background(m,x);x=$("<div>");x.addClass("dsb-propertyarea-exmodearea-item");
x.append(c);x.append(n);x.append(m);return x}}function ec(){gb.call(this);Na.call(this);var a=this,b=this.protectedMethod,c,m,n;this.protectedInitUi=function(P){x(P);P.append(b.createJqCap());b.backgroundInitUi(P);C(P)};var x=function(P){c=new z;c.addValueChangedListener(function(K,X,S){K=b.getEditorCaption(K);X=c.getValue();S=new wd;S.setValue(a.getWidget(),0,0,a.getWidget().getWidth(),X);b.performAction(S,K)},!0);m=new w;m.addCheckedListener(function(K,X){if(X){X=b.getEditorCaption(K);var S=new Dc;
S.setMethod(a.getWidget().isFrozen,a.getWidget().setFrozen);S.setValue(K.isChecked());b.performAction(S,X)}});var O=b.createJqGroupTitle(f.get("positionGroupTitle","\u4f4d\u7f6e\u3001\u5927\u5c0f\uff1a")),F=b.createJqLineItem(f.get("sizeHeight","\u9ad8\u5ea6"),c),Q=b.createJqLineItem(f.get("scrollingFrozen","\u6eda\u52a8\u65f6\u51bb\u7ed3"),m);P.append(O);P.append(F);P.append(Q);P=new Gb;P.setTipsText(f.get("titleBarScrollingFrozenHelp","\u5f00\u542f\u201c\u6eda\u52a8\u65f6\u51bb\u7ed3\u201d\u65f6\uff0c\u5f53\u9875\u9762\u7eb5\u5411\u6eda\u52a8\uff0c\u6807\u9898\u680f\u603b\u662f\u56fa\u5b9a\u5728\u9875\u9762\u53ef\u89c6\u533a\u57df\u9876\u90e8\u3002\r\n\u8be5\u5c5e\u6027\u5728Chrome56+\u7b49\u6d4f\u89c8\u5668\u4e0a\u652f\u6301\uff0cIE\u7b49\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u3002"));
P.getJqUi().appendTo(Q);N.layoutCtrlWithLRTB(P.getJqUi(),null,4,null,4,null,null);Z();m.setChecked(a.getWidget().isFrozen())},C=function(P){n=new q;n.setCustomPainter(function(Q){return Q?f.get("custom","\u81ea\u5b9a\u4e49"):f.get("unifiedInPage","\u9875\u9762\u7edf\u4e00")});n.addActionListener(function(Q){(new be).showDialog(a.getWidget(),function(K){var X=b.getEditorCaption(n),S=new Dc;S.setMethod(a.getWidget().getSurfaceModel,a.getWidget().setSurfaceModel);S.setValue(K);b.performAction(S,X)})});
var O=b.createJqGroupTitle(f.get("skinGroupTitle","\u5916\u89c2\uff1a")),F=b.createJqLineItem(f.get("titleBarSurface","\u6837\u5f0f"),n);P.append(b.createJqCap());P.append(O);P.append(F);n.setModel(a.getWidget().getSurfaceModel())};this.protectedDoPropertyChanged=function(P){P==Sa.KEY_RECT?Z():P==Vb.KEY_FROZEN?m.setChecked(a.getWidget().isFrozen()):P==Vb.KEY_SURFACE?n.setModel(a.getWidget().getSurfaceModel()):b.backgroundDoPropertyChanged(P)};var Z=function(){var P=a.getWidget(),O=Jc.getInstance(P.getWidgetTypeName()).getMinSize()[1],
F=P.getParent().getClientHeight();c.setConstraint(O,Math.min(200,Math.max(O,F>>1)),1);c.setValue(P.getHeight())}}function E(){gb.call(this);var a=this,b=this.protectedMethod,c,m,n,x;this.protectedInitUi=function(O){c=new z;m=new z;n=new z;x=new z;Z();c.addValueChangedListener(P,!0);m.addValueChangedListener(P,!0);n.addValueChangedListener(P,!0);x.addValueChangedListener(P,!0);var F=b.createJqGroupTitle(f.get("positionGroupTitle","\u4f4d\u7f6e\u3001\u5927\u5c0f\uff1a")),Q=b.createJqLineItem(f.get("positionX",
"X"),c),K=b.createJqLineItem(f.get("positionY","Y"),m),X=b.createJqLineItem(f.get("sizeWidth","\u5bbd\u5ea6"),n),S=b.createJqLineItem(f.get("sizeHeight","\u9ad8\u5ea6"),x);O.append(F);O.append(Q);O.append(K);O.append(b.createJqCap());O.append(X);O.append(S);C();a.protectedInitCustomUi(O)};this.protectedInitCustomUi=function(O){};this.protectedDoPropertyChanged=function(O){O==Sa.KEY_RECT?Z():a.protectedDoCustomPropertyChanged(O)};this.protectedDoCustomPropertyChanged=function(O){};var C=function(){var O=
a.getWidget(),F=Jc.getInstance(O.getWidgetTypeName()),Q=!O.isWidthLockedAlways(F);O=!O.isHeightLockedAlways(F);b.updateEditorEnabled(n,Q);b.updateEditorEnabled(x,O)},Z=function(){var O=a.getWidget(),F=O.getX(),Q=O.getY(),K=O.getWidth(),X=O.getHeight(),S=O.getParent(),ra=S.getClientWidth();S=S.getClientHeight();var ka=Jc.getInstance(O.getWidgetTypeName());O=ka.getMinSize()[0];ka=ka.getMinSize()[1];c.setConstraint(0,Math.max(0,ra-K),1);m.setConstraint(0,Math.max(0,S-X),1);n.setConstraint(O,Math.max(O,
ra-F),1);x.setConstraint(ka,Math.max(ka,S-Q),1);c.setValue(F);m.setValue(Q);n.setValue(K);x.setValue(X)},P=function(O,F,Q){O=b.getEditorCaption(O);F=c.getValue();Q=m.getValue();var K=n.getValue(),X=x.getValue(),S=new wd;S.setValue(a.getWidget(),F,Q,K,X);b.performAction(S,O)};b.syncSizeCtrlEnabled=C}function ib(){var a=this,b=this.protectedMethod,c,m,n,x,C=function(ka,La,cb){ka="left"==cb?f.get("alignLeft","\u5de6\u5bf9\u9f50"):"right"==cb?f.get("alignRight","\u53f3\u5bf9\u9f50"):f.get("alignCenter",
"\u5c45\u4e2d");La.text(ka)},Z=function(){c.setSelected(a.getWidget().getStyle().getFontName())},P=function(){m.setValue(a.getWidget().getStyle().getFontSize())},O=function(){n.setColor(a.getWidget().getStyle().getColor())},F=function(){x.setSelected(a.getWidget().getStyle().getAlign())},Q=function(ka,La,cb){ra(ka,"setAlign",cb)},K=function(ka){var La=ka.getColor();ra(ka,"setColor",La)},X=function(ka,La){ra(ka,"setFontName",La)},S=function(ka,La,cb){La=m.getValue();ra(ka,"setFontSize",La)},ra=function(ka,
La,cb){ka=b.getEditorCaption(ka);var hb=new ce;hb.setContext(a.getWidget().getStyle,a.getWidget().setStyle,La,cb);b.performAction(hb,ka)};b.styleInitCustomUi=function(ka){c=new G;c.setDefaultDisplay(f.get("labelFontNameDefault","\u7cfb\u7edf\u9ed8\u8ba4"));c.setSelectionListener(X);m=new z;m.setConstraint(6,999,1);m.addValueChangedListener(S,!0);n=new va;n.setColorPool(zb.getColorPool7());n.setDisplayForNull(f.get("unifiedInPage","\u9875\u9762\u7edf\u4e00"));n.setColorSelectedListener(K);x=new aa;
x.setItemModels(["left","center","right"]);x.setCustomPainter(C);x.addSelectedChangedListener(Q);var La=b.createJqGroupTitle(f.get("labelSurfaceGroupTitle","\u5916\u89c2\uff1a")),cb=b.createJqLineItem(f.get("labelFontName","\u5b57\u4f53"),c),hb=b.createJqLineItem(f.get("labelFontSize","\u5b57\u53f7"),m),Zb=b.createJqLineItem(f.get("labelColor","\u989c\u8272"),n),mc=b.createJqLineItem(f.get("labelTextAlign","\u5bf9\u9f50"),x);ka.append(b.createJqCap());ka.append(La);ka.append(cb);ka.append(hb);ka.append(Zb);
ka.append(mc);Z();P();O();F()};b.styleDoCustomPropertyChanged=function(ka){ka==Sa.KEY_STYLE&&(Z(),P(),O(),F())}}function bc(){var a=this,b=this.protectedMethod,c,m,n=function(F){var Q=Sa.AffectedType_BindField|Sa.AffectedType_Param;return F?O(F,Q):""},x=function(F){var Q=a.protectedGetAffectedTargetSupportedTypes();(new Ld).showDialog(b.getGlobal(),a.getWidget(),function(K){K=Q[K.getWidgetTypeName()];return 0<=K?K:-1},function(K){if(null!==K){var X=b.getEditorCaption(F);C(K,X)}})};this.protectedGetAffectedTargetSupportedTypes=
function(){throw Error("Implement");};var C=function(F,Q){var K=new Dc;K.setMethod(a.getWidget().getAffectedTargets,a.getWidget().setAffectedTargets);K.setValue(F);b.performAction(K,Q)},Z=function(F){var Q=Sa.AffectedType_Tab;return F?O(F,Q):""},P=function(F){(new de).showDialog(a.getWidget(),function(Q){if(null!==Q){var K=b.getEditorCaption(F);C(Q,K)}})},O=function(F,Q){return bc.affectedTargetsToShortDisplay(b.getGlobal().getDashboardModel(),F,Q)};this.protectedMethod.filterSimilaryPropertyChanged=
function(F){F==Sa.KEY_AFFECTED_TARGETS&&(c&&c.setModel(a.getWidget().getAffectedTargets()),m&&m.setModel(a.getWidget().getAffectedTargets()))};this.protectedMethod.createAffectedTargetEditorItem=function(){c=new q;c.addActionListener(x);c.setCustomPainter(n);c&&c.setModel(a.getWidget().getAffectedTargets());return b.createJqLineItem(f.get("affectedTarget","\u4f5c\u7528\u4e8e"),c)};this.protectedMethod.createTabSwitchEditorItem=function(){m=new q;m.addActionListener(P);m.setCustomPainter(Z);m&&m.setModel(a.getWidget().getAffectedTargets());
return b.createJqLineItem(f.get("tabSwitch","\u9875\u7b7e\u5207\u6362"),m)}}function nc(){var a=this,b=this.protectedMethod,c,m,n,x=function(Q){return Q?Q.toShortDisplay(b.getGlobal().getDashboardModel()):""},C=function(Q){var K=a.getWidget();(new Ad).showDialog(b.getGlobal(),K,function(X,S,ra){if(X){X=[];var ka=!1,La={},cb={};S.toJsonObject(La);K.getFilterSource().toJsonObject(cb);JSON.stringify(La)!=JSON.stringify(cb)&&(ka=new Dc,ka.setMethod(K.getFilterSource,K.setFilterSource),ka.setValue(S),
X.push(ka),ka=!0);K.isIncludeItemAllSupported()&&ra!=K.isIncludedItemAll()&&(S=new Dc,S.setMethod(K.isIncludedItemAll,K.setIncludedItemAll),S.setValue(ra),X.push(S));ka&&(ra=new Dc,ra.setMethod(K.getDefaultSelected,K.setDefaultSelected),K.isMultiSelectable()?ra.setValue(ud.createInstance(ud.TYPE_ByAppointed)):ra.setValue(ud.createInstance(ud.TYPE_ByIndex)),X.push(ra));0<X.length&&(ra=b.getEditorCaption(Q),b.performAction(X,ra))}})},Z=function(Q,K,X){Q=!0===X?f.get("multiSelectableYes","\u591a\u9009"):
!1===X?f.get("multiSelectableNo","\u5355\u9009"):"";K.text(Q)},P=function(Q,K,X){var S=new Dc;S.setMethod(a.getWidget().isMultiSelectable,a.getWidget().setMultiSelectable);S.setValue(X);K=[S];X=!X;S=(S=a.getWidget().getDefaultSelected())?S.isSingleSelectableFitting():!1;X&&!S&&(S=new Dc,S.setMethod(a.getWidget().getDefaultSelected,a.getWidget().setDefaultSelected),S.setValue(ud.createInstance(ud.TYPE_ByIndex)),K.push(S));Q=b.getEditorCaption(Q);b.performAction(K,Q)},O=function(Q){return Q?Q.toShortDisplay():
""},F=function(Q){var K=a.getWidget();(new ee).showDialog(b.getGlobal(),K,function(X){if(X){var S=new Dc;S.setMethod(K.getDefaultSelected,K.setDefaultSelected);S.setValue(X);X=b.getEditorCaption(Q);b.performAction(S,X)}})};this.protectedMethod.discreteItemFilterPropertyChanged=function(Q){Q==Sa.KEY_FILTER_SOURCE?c.setModel(a.getWidget().getFilterSource()):Q==Sa.KEY_DISCRETE_MULTISELECTABLE?m&&m.setSelected(a.getWidget().isMultiSelectable()):Q==Sa.KEY_FILTER_DEFAULT_SELECTED&&n&&n.setModel(a.getWidget().getDefaultSelected())};
this.protectedMethod.createSourceEditorItem=function(){c=new q;c.addActionListener(C);c.setCustomPainter(x);c.setModel(a.getWidget().getFilterSource());return b.createJqLineItem(f.get("filterPreparedValue","\u5907\u9009\u503c"),c)};this.protectedMethod.getAffectedTargetSupportedTypes=function(){var Q={};Q[Sa.WidgetType_Square]=0;Q[Sa.WidgetType_Longer]=1;Q[Sa.WidgetType_QingReport]=2;Q[Sa.WidgetType_ExtReport]=3;Q[Sa.WidgetType_Iframe]=4;Q[Sa.WidgetType_Combobox]=5;Q[Sa.WidgetType_ButtonGroup]=6;
Q[Sa.WidgetType_F7]=7;Q[Sa.WidgetType_Label]=8;Q[Sa.WidgetType_Rich]=9;return Q};this.protectedMethod.createMultiSelectableEditorItem=function(){m=new aa;m.setItemModels([!1,!0]);m.setCustomPainter(Z);m.addSelectedChangedListener(P);m&&m.setSelected(a.getWidget().isMultiSelectable());return b.createJqLineItem(f.get("multiSelectable","\u9009\u9879\u6a21\u5f0f"),m)};this.protectedMethod.createDefaultSelectedEditorItem=function(){n=new q;n.addActionListener(F);n.setCustomPainter(O);n&&n.setModel(a.getWidget().getDefaultSelected());
return b.createJqLineItem(f.get("defaultSelected","\u9ed8\u8ba4\u9009\u4e2d\u9879"),n)}}function Xb(){var a=this,b=this.protectedMethod,c;this.protectedMethod.fontSizeEnhancedPropertyChanged=function(m){m==Sa.KEY_FONT_SIZE_ENHANCED&&c&&c.setSelected(a.getWidget().getFontSizeEnhanced())};this.protectedMethod.createFontSizeEnhancedEditorItem=function(){c=new aa;c.setItemModels([0,1,2,3,4,5]);c.setCustomPainter(function(m,n,x){n.text(x||0===x?100+10*x+"%":"")});c.addSelectedChangedListener(function(m,
n,x){n=new Dc;n.setMethod(a.getWidget().getFontSizeEnhanced,a.getWidget().setFontSizeEnhanced);n.setValue(x);m=b.getEditorCaption(m);b.performAction(n,m)});c&&c.setSelected(a.getWidget().getFontSizeEnhanced());return b.createJqLineItem(f.get("fontSizeScaling","\u6587\u5b57\u7f29\u653e"),c)};this.protectedMethod.updateFontSizeEditorVisible=function(m){b.updateEditorVisible(c,m)}}function Mc(){var a=this,b=this.protectedMethod,c,m,n,x=function(){if(c){var S=a.getWidget().getFrontLabel();c.setModel(S?
S:"")}},C=function(){if(m){var S=a.getWidget().getFrontLabelPosition();m.setSelected(S)}},Z=function(){if(n){var S=a.getWidget().getFrontLabelLength();n.setValue(S?S:0)}},P=function(){if(n){var S="left"==a.getWidget().getFrontLabelPosition();b.updateEditorVisible(n,S)}},O=function(S,ra,ka){S=b.getEditorCaption(S);ra=new Dc;ra.setMethod(a.getWidget().getFrontLabelPosition,a.getWidget().setFrontLabelPosition);ra.setValue(ka);var La=$.trim(a.getWidget().getFrontLabel());K(La,ka,ra,S)||b.performAction(ra,
S)},F=function(S,ra,ka){S=b.getEditorCaption(S);ra=n.getValue();ka=new Dc;ka.setMethod(a.getWidget().getFrontLabelLength,a.getWidget().setFrontLabelLength);ka.setValue(ra);b.performAction(ka,S)},Q=function(S){var ra=b.getEditorCaption(c),ka=new Dc;ka.setMethod(a.getWidget().getFrontLabel,a.getWidget().setFrontLabel);ka.setValue(S);var La=$.trim(a.getWidget().getFrontLabelPosition());K(S,La,ka,ra)||b.performAction(ka,ra)},K=function(S,ra,ka,La){var cb=a.getWidget(),hb=Jc.getInstance(cb.getWidgetTypeName());
return cb.isHeightLockedAlways(hb)?(S=hb.getSuggestSize()[1]+(S&&"left"!=ra?25:0),ra=new wd,ra.setValue(cb,cb.getX(),cb.getY(),cb.getWidth(),S),b.performAction([ra,ka],La),!0):!1},X=function(S,ra,ka){S="left"==ka?f.get("frontLabelPositionLeft","\u5de6\u4fa7"):f.get("frontLabelPositionTop","\u4e0a\u65b9");ra.text(S)};this.protectedMethod.withLabelCtrlPropertyChanged=function(S){S==Sa.KEY_FILTER_FRONT_LABEL?x():S==Sa.KEY_FILTER_FRONT_LABEL_POSITION?(C(),P()):S==Sa.KEY_FILTER_FRONT_LABEL_LENGTH&&Z()};
this.protectedMethod.createFrontLabelEditorItem=function(){c=b.createTextEditor(null,null,Q,!0,40);x();return b.createJqLineItem(f.get("frontLabelText","\u6807\u7b7e\u6587\u5b57"),c)};this.protectedMethod.createFrontLabelPositionEditorItem=function(){void 0===a.getWidget().getFrontLabelPosition()&&a.getWidget().setFrontLabelPosition("top");m=new aa;m.setItemModels(["left","top"]);m.setCustomPainter(X);m.addSelectedChangedListener(O);C();return b.createJqLineItem(f.get("frontLabelPosition","\u6807\u7b7e\u4f4d\u7f6e"),
m)};this.protectedMethod.createFrontLabelLengthEditorItem=function(){void 0===a.getWidget().getFrontLabelLength()&&a.getWidget().setFrontLabelLength(72);n=new z;n.setConstraint(0,9999,1);n.addValueChangedListener(F,!0);var S=b.createJqLineItem(f.get("frontLabelLength","\u6807\u7b7e\u5bbd\u5ea6"),n);Z();P();return S}}function Kc(){var a=this,b=this.protectedMethod,c,m,n=function(){0<a.getWidget().getRefreshTiming()?c.setChecked(!0):c.setChecked(!1)},x=function(){var F=a.getWidget().getRefreshTiming();
0<F?(m.setValue(F),b.updateEditorEnabled(m,!0)):(m.setValue(0),b.updateEditorEnabled(m,!1))},C=600,Z=function(F,Q){Q&&(F.isChecked()?Q=C:(C=m.getValue(),Q=-1),F=b.getEditorCaption(F),O(Q,F))},P=function(F,Q,K){F=b.getEditorCaption(F);Q=m.getValue();O(Q,F)},O=function(F,Q){var K=new Dc;K.setMethod(a.getWidget().getRefreshTiming,a.getWidget().setRefreshTiming);K.setValue(F);b.performAction(K,Q)};this.protectedMethod.autoRefreshablePropertyChanged=function(F){F==Sa.KEY_REFRESH_TIMING&&(n(),x())};this.protectedMethod.createRefreshTimingSwitchEditorItem=
function(){c=new w;c.addCheckedListener(Z);var F=b.createJqLineItem(f.get("timingSwitch","\u542f\u7528"),c);n();return F};this.protectedMethod.createRefreshTimingValueEditorItem=function(){m=new z;m.setConstraint(10,999999,1);m.addValueChangedListener(P,!0);var F=b.createJqLineItem(f.get("timingValue","\u95f4\u9694(\u79d2)"),m);x();return F}}function Ic(){eb.call(this);Lb.call(this);var a=this,b=this.protectedMethod,c,m,n,x,C,Z=function(){var F=a.getWidget(),Q=F.isBareSurface(),K=F.isBareSurfacePassively(),
X=F.getCardSurfaceMode();c.setSelected(K?Ob.Surface_Bare:X);c.getJqUi().parent().attr("title",K?f.get("cardSurfaceModeNonePrompt","\u7ec4\u4ef6\u5728\u5361\u7247\u5bb9\u5668\u4e2d\uff0c\u672c\u8eab\u6ca1\u6709\u5361\u7247\u5916\u89c2\u3002"):null);b.updateEditorEnabled(c,!K);K=X==Ob.Surface_Custom;Q=!Q&&K;X=!1;K=F.getBackgroundColor();Q&&(F=F.getUsableCardBorder(),X=!(F&&F.getType()==gd.TYPE_IMAGE),!X&&(K="rgba(255,255,255,0)"));m.setNullableColor(K);b.updateEditorVisible(m,Q);b.updateEditorEnabled(m,
X)},P=function(){var F=a.getWidget(),Q=F.isBareSurface(),K=F.getCardTitle(),X=K?!0:!1;n.setModel(X?K:"");b.updateEditorVisible(n,!Q);K=F.getTitleFontName()||F.getTitleFontSize()||F.getTitleColor()?!0:!1;x.setModel(K?!0:null);b.updateEditorVisible(x,!Q&&X);C.setModel(F.getCardDescription())},O=function(F,Q,K,X){var S=a.getWidget();F=b.getEditorCaption(F);var ra=new Dc;ra.setMethod(function(){var ka=S.getTitleFontName(),La=S.getTitleFontSize(),cb=S.getTitleColor();return[ka,La,cb]},function(ka){S.setTitleStyle(ka[0],
ka[1],ka[2])});ra.setValue([Q,K,X]);b.performAction(ra,F)};b.cardSimilaryPropertyChanged=function(F){F==Sa.KEY_CARD_TITLE?P():F==Sa.KEY_CARD_SURFACE&&(Z(),P());b.cardBorderDoPropertyChanged(F);b.cardTopBarCommonDoPropertyChanged(F)};b.initCardTopBarEditorItems=function(F){var Q=a.getWidget();n=b.createTextEditor(Q.getCardTitle,Q.setCardTitle,null,!0,40);x=new q;x.setClearable(!0);x.addActionListener(function(ka){var La=new fe;La.setWidget(Q);La.show(function(cb,hb,Zb){O(ka,cb,hb,Zb)})});x.addClearListener(function(ka){O(ka,
null,null,null)});x.setCustomPainter(function(ka){return ka?f.get("custom","\u81ea\u5b9a\u4e49"):f.get("unifiedInPage","\u9875\u9762\u7edf\u4e00")});C=b.createTextAreaEditor(Q.getCardDescription,Q.setCardDescription);var K=b.createJqGroupTitle(f.get("cardGroupTitle","\u5361\u7247\u6807\u9898\u680f\uff1a")),X=b.createJqLineItem(f.get("cardTitle","\u6807\u9898\u6587\u5b57"),n),S=b.createJqLineItem(f.get("cardTitleStyle","\u6807\u9898\u6837\u5f0f"),x),ra=b.createJqLineItem(f.get("cardDescription","\u5361\u7247\u8bf4\u660e"),
C);F.append(b.createJqCap());F.append(K);F.append(X);F.append(S);b.initUiOfCardTopBarCommon(F);F.append(ra);P()};b.initCardSurfaceEditorItems=function(F){c=new aa;c.setItemModels([Ob.Surface_Unified,Ob.Surface_Bare,Ob.Surface_Custom]);c.setCustomPainter(function(S,ra,ka){S=ka==Ob.Surface_Unified?f.get("unifiedInPage","\u9875\u9762\u7edf\u4e00"):ka==Ob.Surface_Bare?f.get("cardSurfaceModeNone","\u65e0"):ka==Ob.Surface_Custom?f.get("custom","\u81ea\u5b9a\u4e49"):"";ra.text(S)});c.addSelectedChangedListener(function(S,
ra,ka){S=b.getEditorCaption(S);ra=new Dc;ra.setMethod(a.getWidget().getCardSurfaceMode,a.getWidget().setCardSurfaceMode);ra.setValue(ka);b.performAction(ra,S)});m=new sa;m.setColorPool(zb.getColorPool7());m.setDisplayForNull(f.get("unifiedInPage","\u9875\u9762\u7edf\u4e00"));m.setChangedListener(function(S){var ra=b.getEditorCaption(S),ka=new Dc;ka.setMethod(a.getWidget().getBackgroundColor,a.getWidget().setBackgroundColor);ka.setValue(S.getNullableColor());b.performAction(ka,ra)});var Q=b.createJqGroupTitle(f.get("cardSurfaceGroupTitle",
"\u5361\u7247\u5916\u89c2\uff1a")),K=b.createJqLineItem(f.get("cardSurfaceMode","\u6574\u4f53\u5916\u89c2"),c),X=b.createJqLineItem(f.get("cardSurfaceBackground","\u5361\u7247\u80cc\u666f"),m);F.append(b.createJqCap());F.append(Q);F.append(K);F.append(X);b.initUiOfCardBorder(F,[gd.TYPE_MODEL,gd.TYPE_IMAGE],!0);Z()}}function Rc(){var a=this,b=this.protectedMethod,c,m=function(n){n=a.protectedGetSourceSelector();var x=a.protectedGetShowDesignerMethod(),C=new Ia;C.bindIntegrationImpl(n,x);C.reselecting(b.getGlobal(),
a.getWidget(),function(Z){if(Z){var P=b.getEditorCaption(c),O=new Dc;O.setMethod(a.getWidget().getReferenceCustomMap,a.getWidget().setReferenceCustomMap);O.setValue(Z);b.performAction(O,P)}})};this.protectedGetSourceSelector=function(){throw Error("Override");};this.protectedGetShowDesignerMethod=function(){throw Error("Override");};this.protectedMethod.createReferenceEditorItem=function(n){c=new q;c.setModel(f.get("refHasSet","\u5df2\u8bbe\u7f6e"));c.addActionListener(m);return b.createJqLineItem(n,
c)}}function Zc(){var a=this,b=this.protectedMethod,c,m=function(n){a.protectedGetSourceSelector()(a.getWidget().getReferenceCustomMap(),function(x){if(x){var C=b.getEditorCaption(c),Z=new Dc;Z.setMethod(a.getWidget().getReferenceCustomMap,a.getWidget().setReferenceCustomMap);Z.setValue(x);b.performAction(Z,C)}})};this.protectedGetSourceSelector=function(){throw Error("Override");};this.protectedMethod.createReferenceEditorItem=function(n){c=new q;c.setModel(f.get("refHasSet","\u5df2\u8bbe\u7f6e"));
c.addActionListener(m);return b.createJqLineItem(n,c)}}function $c(){var a=this,b=this.protectedMethod,c,m=function(n){a.protectedGetSourceSelector()(a.getWidget().getEncodedModel(),function(x){if(x){var C=b.getEditorCaption(c),Z=new Dc;Z.setMethod(a.getWidget().getEncodedModel,a.getWidget().setEncodedModel);Z.setValue(x);b.performAction(Z,C)}})};this.protectedGetSourceSelector=function(){throw Error("Override");};this.protectedMethod.createReferenceEditorItem=function(n){c=new q;c.setModel(f.get("refHasSet",
"\u5df2\u8bbe\u7f6e"));c.addActionListener(m);return b.createJqLineItem(n,c)}}function v(){E.call(this);Rc.call(this);Ic.call(this);Kc.call(this);bc.call(this);var a=this.protectedMethod;this.protectedGetSourceSelector=function(){return za.getWidgetSourceSelector().selectSquare};this.protectedGetShowDesignerMethod=function(){return za.showSquareDesigner};this.protectedInitCustomUi=function(b){var c=a.createJqGroupTitle(f.get("refGroupTitle","\u5f15\u7528\uff1a")),m=a.createReferenceEditorItem(f.get("refDataSource",
"\u6570\u636e\u6765\u6e90"));b.append(a.createJqCap());b.append(c);b.append(m);a.initCardSurfaceEditorItems(b);a.initCardTopBarEditorItems(b);c=a.createJqGroupTitle(f.get("cardGroupRefreshTitle","\u5b9a\u65f6\u5237\u65b0\uff1a"));m=a.createRefreshTimingSwitchEditorItem();var n=a.createRefreshTimingValueEditorItem();b.append(a.createJqCap());b.append(c);b.append(m);b.append(n);c=a.createJqGroupTitle(f.get("affectingGroupTitle","\u8054\u52a8\uff1a"));m=a.createAffectedTargetEditorItem();n=a.createTabSwitchEditorItem();
b.append(a.createJqCap());b.append(c);b.append(m);b.append(n)};this.protectedDoCustomPropertyChanged=function(b){a.cardSimilaryPropertyChanged(b);a.autoRefreshablePropertyChanged(b);a.filterSimilaryPropertyChanged(b)};this.protectedGetAffectedTargetSupportedTypes=function(){var b={};b[Sa.WidgetType_Square]=0;b[Sa.WidgetType_Longer]=1;b[Sa.WidgetType_QingReport]=2;b[Sa.WidgetType_ExtReport]=3;b[Sa.WidgetType_Iframe]=4;b[Sa.WidgetType_Label]=5;b[Sa.WidgetType_Rich]=6;return b}}function g(){E.call(this);
Rc.call(this);Ic.call(this);Kc.call(this);var a=this.protectedMethod;this.protectedGetSourceSelector=function(){return za.getWidgetSourceSelector().selectLonger};this.protectedGetShowDesignerMethod=function(){return za.showLongerDesigner};this.protectedInitCustomUi=function(b){var c=a.createJqGroupTitle(f.get("refGroupTitle","\u5f15\u7528\uff1a")),m=a.createReferenceEditorItem(f.get("refDataSource","\u6570\u636e\u6765\u6e90"));b.append(a.createJqCap());b.append(c);b.append(m);a.initCardSurfaceEditorItems(b);
a.initCardTopBarEditorItems(b);c=a.createJqGroupTitle(f.get("cardGroupRefreshTitle","\u5b9a\u65f6\u5237\u65b0\uff1a"));m=a.createRefreshTimingSwitchEditorItem();var n=a.createRefreshTimingValueEditorItem();b.append(a.createJqCap());b.append(c);b.append(m);b.append(n)};this.protectedDoCustomPropertyChanged=function(b){a.cardSimilaryPropertyChanged(b);a.autoRefreshablePropertyChanged(b)}}function r(){E.call(this);Zc.call(this);Ic.call(this);Kc.call(this);var a=this.protectedMethod;this.protectedGetSourceSelector=
function(){return za.getWidgetSourceSelector().selectQingReport};this.protectedInitCustomUi=function(b){var c=a.createJqGroupTitle(f.get("refGroupTitle","\u5f15\u7528\uff1a")),m=a.createReferenceEditorItem(f.get("refSource","\u6765\u6e90"));b.append(a.createJqCap());b.append(c);b.append(m);a.initCardSurfaceEditorItems(b);a.initCardTopBarEditorItems(b);c=a.createJqGroupTitle(f.get("cardGroupRefreshTitle","\u5b9a\u65f6\u5237\u65b0\uff1a"));m=a.createRefreshTimingSwitchEditorItem();var n=a.createRefreshTimingValueEditorItem();
b.append(a.createJqCap());b.append(c);b.append(m);b.append(n)};this.protectedDoCustomPropertyChanged=function(b){a.cardSimilaryPropertyChanged(b);a.autoRefreshablePropertyChanged(b)}}function y(){E.call(this);$c.call(this);Kc.call(this);var a=this,b=this.protectedMethod,c;this.protectedGetSourceSelector=function(){return za.getExtReportSourceSelector()};this.protectedInitCustomUi=function(m){var n=b.createJqGroupTitle(f.get("refGroupTitle","\u5f15\u7528\uff1a")),x=b.createReferenceEditorItem(f.get("refSource",
"\u6765\u6e90"));m.append(b.createJqCap());m.append(n);m.append(x);c=b.createTextEditor(a.getWidget().getTitle,a.getWidget().setTitle,null,!0,40);n=b.createJqGroupTitle(f.get("cardGroupTitle","\u6807\u9898\u680f\uff1a"));x=b.createJqLineItem(f.get("cardTitle","\u6807\u9898"),c);m.append(b.createJqCap());m.append(n);m.append(x);c.setModel(a.getWidget().getTitle());n=b.createJqGroupTitle(f.get("cardGroupRefreshTitle","\u5b9a\u65f6\u5237\u65b0\uff1a"));x=b.createRefreshTimingSwitchEditorItem();var C=
b.createRefreshTimingValueEditorItem();m.append(b.createJqCap());m.append(n);m.append(x);m.append(C)};this.protectedDoCustomPropertyChanged=function(m){m==Cc.KEY_TITLE?c.setModel(a.getWidget().getTitle()):b.autoRefreshablePropertyChanged(m)}}function R(){E.call(this);Zc.call(this);Kc.call(this);var a=this.protectedMethod;this.protectedGetSourceSelector=function(){return za.getWidgetSourceSelector().selectProgramableCard};this.protectedInitCustomUi=function(b){var c=a.createJqGroupTitle(f.get("refGroupTitle",
"\u5f15\u7528\uff1a")),m=a.createReferenceEditorItem(f.get("refSource","\u6765\u6e90"));b.append(a.createJqCap());b.append(c);b.append(m);c=a.createJqGroupTitle(f.get("cardGroupRefreshTitle","\u5b9a\u65f6\u5237\u65b0\uff1a"));m=a.createRefreshTimingSwitchEditorItem();var n=a.createRefreshTimingValueEditorItem();b.append(a.createJqCap());b.append(c);b.append(m);b.append(n)};this.protectedDoCustomPropertyChanged=function(b){a.autoRefreshablePropertyChanged(b)}}function T(){E.call(this);$c.call(this);
var a=this.protectedMethod;this.protectedGetSourceSelector=function(){return za.getCosmicCustomCardSourceSelector()};this.protectedInitCustomUi=function(b){var c=a.createJqGroupTitle(f.get("refGroupTitle","\u5f15\u7528\uff1a")),m=a.createReferenceEditorItem(f.get("refSource","\u6765\u6e90"));b.append(a.createJqCap());b.append(c);b.append(m)}}function Y(){E.call(this)}function ia(){E.call(this);var a=this,b=this.protectedMethod,c;this.protectedInitCustomUi=function(n){c=new q;c.addActionListener(m);
var x=b.createJqGroupTitle(f.get("iframeGroupTitle","\u7f51\u9875\uff1a")),C=b.createJqLineItem(f.get("iframeUrl","\u7f51\u9875\u5730\u5740"),c);n.append(b.createJqCap());n.append(x);n.append(C);c.setModel(a.getWidget().getUrl())};this.protectedDoCustomPropertyChanged=function(n){n==nb.KEY_URL&&c.setModel(a.getWidget().getUrl())};var m=function(n){(new Md).showDialog(a.getWidget().getUrl(),function(x,C){if(x){x=b.getEditorCaption(n);var Z=new Dc;Z.setMethod(a.getWidget().getUrl,a.getWidget().setUrl);
Z.setValue(C);b.performAction(Z,x)}})}}function pa(){E.call(this);ib.call(this);var a=this,b=this.protectedMethod,c;this.protectedInitCustomUi=function(n){c=new q;c.addActionListener(m);var x=b.createJqGroupTitle(f.get("clockContentGroupTitle","\u5185\u5bb9\uff1a")),C=b.createJqLineItem(f.get("clockFormatString","\u663e\u793a\u683c\u5f0f"),c);n.append(b.createJqCap());n.append(x);n.append(C);c.setModel(a.getWidget().getFormatString());b.styleInitCustomUi(n)};this.protectedDoCustomPropertyChanged=
function(n){n==ac.KEY_FORMAT?c.setModel(a.getWidget().getFormatString()):b.styleDoCustomPropertyChanged(n)};var m=function(n){var x=b.getEditorCaption(c);(new ge).showDialog(c.getModel(),function(C,Z){C&&(C=new Dc,C.setMethod(a.getWidget().getFormatString,a.getWidget().setFormatString),C.setValue(Z),b.performAction(C,x))})}}function Ba(){E.call(this);ib.call(this);var a=this,b=this.protectedMethod,c,m;this.protectedInitCustomUi=function(C){c=new q;c.addActionListener(n);var Z=b.createJqGroupTitle(f.get("labelContentGroupTitle",
"\u5185\u5bb9\uff1a")),P=b.createJqLineItem(f.get("labelContent","\u663e\u793a\u6587\u5b57"),c);C.append(b.createJqCap());C.append(Z);C.append(P);c.setModel(a.getWidget().getContent());b.styleInitCustomUi(C);m=new w;m.addCheckedListener(x);Z=b.createJqGroupTitle(f.get("labelWalkingGroupTitle","\u8d70\u9a6c\u706f\uff1a"));P=b.createJqLineItem(f.get("labelWalking","\u542f\u7528"),m);C.append(b.createJqCap());C.append(Z);C.append(P);m.setChecked(0<a.getWidget().getWalkingSpeed())};this.protectedDoCustomPropertyChanged=
function(C){C==Vc.KEY_CONTENT?c.setModel(a.getWidget().getContent()):C==Vc.KEY_WALKING?m.setChecked(0<a.getWidget().getWalkingSpeed()):b.styleDoCustomPropertyChanged(C)};var n=function(C){var Z=a.getWidget();(new Nd).show(Z,Z.getTopPage(),function(P,O,F,Q){if(F||P){var K=Z.getPredefinedTextFragments(),X=Z.getContent();if(P){K=O;var S=f.get("labelPredefined","\u94fe\u63a5\u7684\u5b9a\u4e49")}F&&(X=Q,S=b.getEditorCaption(c));P=new Dc;P.setMethod(function(){return[Z.getPredefinedTextFragments(),Z.getContent()]},
function(ra){Z.setContent(ra[0],ra[1])});P.setValue([K,X]);b.performAction(P,S)}})},x=function(C,Z){if(Z){var P=a.getWidget();Z=b.getEditorCaption(C);var O=new Dc;O.setMethod(function(){return 0<P.getWalkingSpeed()},function(F){P.setWalkingSpeed(F?50:0)});O.setValue(C.isChecked());b.performAction(O,Z)}}}function Ya(){E.call(this);var a=this,b=this.protectedMethod,c;this.protectedInitCustomUi=function(x){c=new q;c.addActionListener(m);c.setCustomPainter(n);var C=b.createJqGroupTitle(f.get("labelContentGroupTitle",
"\u5185\u5bb9\uff1a")),Z=b.createJqLineItem(f.get("labelContent","\u663e\u793a\u6587\u5b57"),c);x.append(b.createJqCap());x.append(C);x.append(Z);c.setModel(a.getWidget().getContent())};this.protectedDoCustomPropertyChanged=function(x){x==pb.KEY_CONTENT&&c.setModel(a.getWidget().getContent())};var m=function(x){var C=a.getWidget();(new Od).show(C,C.getTopPage(),function(Z,P,O,F){if(O||Z){var Q=C.getPredefinedTextFragments(),K=C.getContent();if(Z){Q=P;var X=f.get("labelPredefined","\u94fe\u63a5\u7684\u5b9a\u4e49")}O&&
(K=F,X=b.getEditorCaption(c));Z=new Dc;Z.setMethod(function(){return[C.getPredefinedTextFragments(),C.getContent()]},function(S){C.setContent(S[0],S[1])});Z.setValue([Q,K]);b.performAction(Z,X)}})},n=function(x){return x?x.getAllText():""}}function $a(){E.call(this);nc.call(this);bc.call(this);Mc.call(this);Xb.call(this);var a=this.protectedMethod;this.protectedInitCustomUi=function(b){var c=a.createJqGroupTitle(f.get("filterDataGroupTitle","\u6570\u636e\uff1a")),m=a.createSourceEditorItem(),n=a.createDefaultSelectedEditorItem();
b.append(a.createJqCap());b.append(c);b.append(m);b.append(n);c=a.createJqGroupTitle(f.get("affectingGroupTitle","\u8054\u52a8\uff1a"));m=a.createAffectedTargetEditorItem();n=a.createTabSwitchEditorItem();b.append(a.createJqCap());b.append(c);b.append(m);b.append(n);c=a.createJqGroupTitle(f.get("frontLabelGroupTitle","\u6807\u7b7e\uff1a"));m=a.createFrontLabelEditorItem();n=a.createFrontLabelPositionEditorItem();var x=a.createFrontLabelLengthEditorItem();b.append(a.createJqCap());b.append(c);b.append(m);
b.append(n);b.append(x);c=a.createJqGroupTitle(f.get("surfaceGroupTitle","\u5916\u89c2\uff1a"));m=a.createFontSizeEnhancedEditorItem();b.append(a.createJqCap());b.append(c);b.append(m)};this.protectedGetAffectedTargetSupportedTypes=function(){return a.getAffectedTargetSupportedTypes()};this.protectedDoCustomPropertyChanged=function(b){a.discreteItemFilterPropertyChanged(b);a.filterSimilaryPropertyChanged(b);a.withLabelCtrlPropertyChanged(b);a.fontSizeEnhancedPropertyChanged(b)}}function Fb(){E.call(this);
nc.call(this);bc.call(this);var a=this,b=this.protectedMethod,c,m,n,x;this.protectedInitCustomUi=function(K){var X=b.createJqGroupTitle(f.get("filterDataGroupTitle","\u6570\u636e\uff1a")),S=b.createSourceEditorItem(),ra=b.createDefaultSelectedEditorItem();K.append(b.createJqCap());K.append(X);K.append(S);K.append(ra);X=b.createJqGroupTitle(f.get("affectingGroupTitle","\u8054\u52a8\uff1a"));S=b.createAffectedTargetEditorItem();ra=b.createTabSwitchEditorItem();K.append(b.createJqCap());K.append(X);
K.append(S);K.append(ra);X=b.createJqGroupTitle(f.get("btnsGroupTitle","\u5916\u89c2\uff1a"));S=P();ra=Z();var ka=C(),La=O();K.append(b.createJqCap());K.append(X);K.append(ka);K.append(S);K.append(ra);K.append(La)};this.protectedGetAffectedTargetSupportedTypes=function(){return b.getAffectedTargetSupportedTypes()};this.protectedDoCustomPropertyChanged=function(K){K==ic.KEY_LAYOUT_MODE?(Q(),b.syncSizeCtrlEnabled()):K==ic.KEY_CHARS_PER_ITEM?m&&m.setValue(a.getWidget().getCharsPerItemWhenWrap()):K==
ic.KEY_ITEMS_PER_ROW?n&&n.setValue(a.getWidget().getItemsPerRowWhenWrap()):K==ic.KEY_SIZE_MODE&&x&&x.setSelected(a.getWidget().getSizeMode());b.discreteItemFilterPropertyChanged(K);b.filterSimilaryPropertyChanged(K)};var C=function(){c=new aa;c.setItemModels([ic.LAYOUT_MODE_HORIZONTAL,ic.LAYOUT_MODE_WRAP]);c.setCustomPainter(function(K,X,S){K=S==ic.LAYOUT_MODE_HORIZONTAL?f.get("btnsLayoutModeH","\u5355\u884c"):S==ic.LAYOUT_MODE_WRAP?f.get("btnsLayoutModeW","\u591a\u884c"):"";X.text(K)});c.addSelectedChangedListener(function(K,
X,S){K=b.getEditorCaption(K);X=new Dc;X.setMethod(a.getWidget().getLayoutMode,a.getWidget().setLayoutMode);X.setValue(S);var ra=new Dc;ra.setMethod(a.getWidget().isHeightLocked,a.getWidget().setHeightLocked);ra.setValue(S==ic.LAYOUT_MODE_HORIZONTAL);F(K,[X,ra],S,null)});Q();return b.createJqLineItem(f.get("btnsLayoutMode","\u6309\u94ae\u5e03\u5c40"),c)},Z=function(){m=new z;m.setConstraint(1,100,1);m.addValueChangedListener(function(K,X,S){K=b.getEditorCaption(K);X=new Dc;X.setMethod(a.getWidget().getCharsPerItemWhenWrap,
a.getWidget().setCharsPerItemWhenWrap);X.setValue(S);b.performAction(X,K)},!0);m&&m.setValue(a.getWidget().getCharsPerItemWhenWrap());return b.createJqLineItem(f.get("btnsPerItem","\u6bcf\u4e2a\u6700\u5c11\u5b57\u6570"),m)},P=function(){n=new z;n.setConstraint(1,20,1);n.addValueChangedListener(function(K,X,S){K=b.getEditorCaption(K);X=new Dc;X.setMethod(a.getWidget().getItemsPerRowWhenWrap,a.getWidget().setItemsPerRowWhenWrap);X.setValue(S);b.performAction(X,K)},!0);n&&n.setValue(a.getWidget().getItemsPerRowWhenWrap());
return b.createJqLineItem(f.get("btnsPerRow","\u6bcf\u884c\u6700\u591a\u4e2a\u6570"),n)},O=function(){x=new aa;x.setItemModels([ic.SIZE_MODE_LARGE,ic.SIZE_MODE_MIDDLE,ic.SIZE_MODE_SMALL]);x.setCustomPainter(function(K,X,S){K=S==ic.SIZE_MODE_LARGE?f.get("btnsSizeModeLarge","\u5927"):S==ic.SIZE_MODE_MIDDLE?f.get("btnsSizeModeMiddle","\u4e2d"):S==ic.SIZE_MODE_SMALL?f.get("btnsSizeModeSmall","\u5c0f"):"";X.text(K)});x.addSelectedChangedListener(function(K,X,S){K=b.getEditorCaption(K);X=new Dc;X.setMethod(a.getWidget().getSizeMode,
a.getWidget().setSizeMode);X.setValue(S);F(K,[X],null,S)});x&&x.setSelected(a.getWidget().getSizeMode());return b.createJqLineItem(f.get("btnsSizeMode","\u5c3a\u5bf8"),x)},F=function(K,X,S,ra){var ka=a.getWidget(),La=S?!0:!1;null==S&&(S=ka.getLayoutMode());S==ic.LAYOUT_MODE_HORIZONTAL?(null==ra&&(ra=ka.getSizeMode()),S=new wd,ra=ic.askButtonHeight(ra),S.setValue(ka,ka.getX(),ka.getY(),ka.getWidth(),ra),X.push(S)):La&&S==ic.LAYOUT_MODE_WRAP&&(S=new wd,S.setValue(ka,ka.getX(),ka.getY(),240,160),X.push(S));
b.performAction(X,K)},Q=function(){c&&c.setSelected(a.getWidget().getLayoutMode());n&&b.updateEditorVisible(n,a.getWidget().getLayoutMode()==ic.LAYOUT_MODE_WRAP);m&&b.updateEditorVisible(m,a.getWidget().getLayoutMode()==ic.LAYOUT_MODE_WRAP)}}function wb(){E.call(this);nc.call(this);bc.call(this);Mc.call(this);Xb.call(this);var a=this.protectedMethod;this.protectedInitCustomUi=function(b){var c=a.createJqGroupTitle(f.get("filterDataGroupTitle","\u6570\u636e\uff1a")),m=a.createSourceEditorItem(),n=
a.createMultiSelectableEditorItem(),x=a.createDefaultSelectedEditorItem();b.append(a.createJqCap());b.append(c);b.append(m);b.append(n);b.append(x);c=a.createJqGroupTitle(f.get("affectingGroupTitle","\u8054\u52a8\uff1a"));m=a.createAffectedTargetEditorItem();n=a.createTabSwitchEditorItem();b.append(a.createJqCap());b.append(c);b.append(m);b.append(n);c=a.createJqGroupTitle(f.get("frontLabelGroupTitle","\u6807\u7b7e\uff1a"));m=a.createFrontLabelEditorItem();n=a.createFrontLabelPositionEditorItem();
x=a.createFrontLabelLengthEditorItem();b.append(a.createJqCap());b.append(c);b.append(m);b.append(n);b.append(x);c=a.createJqGroupTitle(f.get("surfaceGroupTitle","\u5916\u89c2\uff1a"));m=a.createFontSizeEnhancedEditorItem();b.append(a.createJqCap());b.append(c);b.append(m)};this.protectedGetAffectedTargetSupportedTypes=function(){return a.getAffectedTargetSupportedTypes()};this.protectedDoCustomPropertyChanged=function(b){a.discreteItemFilterPropertyChanged(b);a.filterSimilaryPropertyChanged(b);a.withLabelCtrlPropertyChanged(b);
a.fontSizeEnhancedPropertyChanged(b)}}function Fa(){E.call(this);bc.call(this);Mc.call(this);Xb.call(this);var a=this,b=this.protectedMethod,c;this.protectedInitCustomUi=function(x){c=new q;c.addActionListener(n);c.setCustomPainter(m);var C=b.createJqGroupTitle(f.get("filterDataGroupTitle","\u6570\u636e\uff1a")),Z=b.createJqLineItem(f.get("dateRangeInitial","\u521d\u59cb\u503c"),c);x.append(b.createJqCap());x.append(C);x.append(Z);c.setModel(a.getWidget());C=b.createJqGroupTitle(f.get("affectingGroupTitle",
"\u8054\u52a8\uff1a"));Z=b.createAffectedTargetEditorItem();x.append(b.createJqCap());x.append(C);x.append(Z);C=b.createJqGroupTitle(f.get("frontLabelGroupTitle","\u6807\u7b7e\uff1a"));Z=b.createFrontLabelEditorItem();var P=b.createFrontLabelPositionEditorItem(),O=b.createFrontLabelLengthEditorItem();x.append(b.createJqCap());x.append(C);x.append(Z);x.append(P);x.append(O);C=b.createJqGroupTitle(f.get("surfaceGroupTitle","\u5916\u89c2\uff1a"));Z=b.createFontSizeEnhancedEditorItem();x.append(b.createJqCap());
x.append(C);x.append(Z)};this.protectedGetAffectedTargetSupportedTypes=function(){var x={};x[Sa.WidgetType_Square]=0;x[Sa.WidgetType_Longer]=1;x[Sa.WidgetType_QingReport]=2;x[Sa.WidgetType_Iframe]=3;return x};this.protectedDoCustomPropertyChanged=function(x){x==Pc.KEY_DATE_INITIAL?c.setModel(a.getWidget()):(b.filterSimilaryPropertyChanged(x),b.withLabelCtrlPropertyChanged(x),b.fontSizeEnhancedPropertyChanged(x))};var m=function(x){return x?a.protectedToF7DateDisplay(x):""};this.protectedToF7DateDisplay=
function(x){throw Error("Implement");};var n=function(x){a.protectedCreateDateInitialDialog().showDialog(b.getGlobal(),a.getWidget(),function(C,Z,P,O,F){if(C){C=b.getEditorCaption(c);var Q=new he;Q.setValue(a.getWidget(),Z,P,O,F);b.performAction(Q,C)}})};this.protectedCreateDateInitialDialog=function(){throw Error("Implement");}}function ua(){Fa.call(this);this.protectedCreateDateInitialDialog=function(){return new Pd};this.protectedToF7DateDisplay=function(a){if(a.getRelativeModel())return tb.modelToDisplayText(a.getRelativeModel(),
!1);var b=new H;b.setFormatString("yyyy-M-d");var c=b.format(a.getFromDate());a=b.format(a.getToDate());return c+"~"+a}}function Sb(){Fa.call(this);this.protectedCreateDateInitialDialog=function(){return new Cd};this.protectedToF7DateDisplay=function(a){if(a.getRelativeModel())return Cd.modelToDisplayText(a.getRelativeModel());var b=new H;b.setFormatString("yyyy");return b.format(a.getFromDate())}}function hc(){Fa.call(this);this.protectedCreateDateInitialDialog=function(){return new Dd};this.protectedToF7DateDisplay=
function(a){if(a.getRelativeModel())return Dd.modelToDisplayText(a.getRelativeModel());var b=a.getFromDate();a=J.getFullYear(b);b=Math.floor(J.getMonth(b)/3)+1;return a+" Q"+b}}function wc(){Fa.call(this);this.protectedCreateDateInitialDialog=function(){return new Ed};this.protectedToF7DateDisplay=function(a){if(a.getRelativeModel())return Ed.modelToDisplayText(a.getRelativeModel());var b=new H;b.setFormatString("yyyy-MM");return b.format(a.getFromDate())}}function ma(){Fa.call(this);this.protectedCreateDateInitialDialog=
function(){return new Fd};this.protectedToF7DateDisplay=function(a){if(a.getRelativeModel())return Fd.modelToDisplayText(a.getRelativeModel());var b=new H;b.setFormatString("yyyy-MM-dd");return b.format(a.getFromDate())}}function qa(){E.call(this);Ic.call(this);var a=this,b=this.protectedMethod,c;this.protectedInitCustomUi=function(C){b.initCardSurfaceEditorItems(C);b.initCardTopBarEditorItems(C);C.append(m())};this.protectedDoCustomPropertyChanged=function(C){C==kd.KEY_FULLSCREEN_ALLOWED&&n();b.cardSimilaryPropertyChanged(C)};
var m=function(){c=new aa;c.setItemModels([kd.FULLSCREEN_ALLOWED_NONE,kd.FULLSCREEN_ALLOWED_ALONE,kd.FULLSCREEN_ALLOWED_ALIVE]);c.setCustomPainter(x);c.addSelectedChangedListener(function(C,Z,P){C=b.getEditorCaption(C);Z=new Dc;Z.setMethod(a.getWidget().getFullscreenAllowed,a.getWidget().setFullscreenAllowed);Z.setValue(P);b.performAction(Z,C)});n();return b.createJqLineItem(f.get("fullscreenAllowed","\u5168\u5c4f"),c)},n=function(){if(c){var C=a.getWidget().getFullscreenAllowed();c.setSelected(C)}},
x=function(C,Z,P){switch(P){case kd.FULLSCREEN_ALLOWED_NONE:C=f.get("fullscreenAllowedNone","\u5173\u95ed");break;case kd.FULLSCREEN_ALLOWED_ALONE:C=f.get("fullscreenAllowedAlone","\u5f00\u542f\u4e14\u4e0b\u7ea7\u7ec4\u4ef6\u7981\u6b62");break;case kd.FULLSCREEN_ALLOWED_ALIVE:C=f.get("fullscreenAllowedAlive","\u5f00\u542f\u4e14\u4e0b\u7ea7\u7ec4\u4ef6\u5141\u8bb8");break;default:C=""}Z.text(C)}}function ea(){E.call(this);Xb.call(this);var a=this,b=this.protectedMethod,c,m,n;this.protectedInitCustomUi=
function(S){var ra=b.createJqGroupTitle(f.get("tabbedHeadGroupTitle","\u5bfc\u822a\u680f\uff1a")),ka=P(),La=O(),cb=b.createFontSizeEnhancedEditorItem();Z();S.append(b.createJqCap());S.append(ra);S.append(ka);S.append(La);S.append(cb);ra=b.createJqGroupTitle(f.get("slideshowGroupTitle","\u8f6e\u64ad\uff1a"));ka=X();S.append(b.createJqCap());S.append(ra);S.append(ka)};this.protectedDoCustomPropertyChanged=function(S){S==Tc.KEY_HEAD_PATTERN?(x(),Z()):S==Tc.KEY_HEAD_POSITION?C():S==Tc.KEY_SLIDESHOW?K():
b.fontSizeEnhancedPropertyChanged(S)};var x=function(){if(c){var S=a.getWidget().getHeadPattern();c.setSelected(S)}},C=function(){if(m){var S=a.getWidget().getHeadPosition();m.setSelected(S)}},Z=function(){if(m){var S=a.getWidget().getHeadPattern()==Tc.HEAD_PATTERN_HIDDEN;b.updateEditorVisible(m,!S);b.updateFontSizeEditorVisible(!S)}},P=function(){c=new aa;c.setItemModels([Tc.HEAD_PATTERN_BAR,Tc.HEAD_PATTERN_BARE,Tc.HEAD_PATTERN_HIDDEN]);c.setCustomPainter(F);c.addSelectedChangedListener(function(S,
ra,ka){S=b.getEditorCaption(S);ra=new Dc;ra.setMethod(a.getWidget().getHeadPattern,a.getWidget().setHeadPattern);ra.setValue(ka);b.performAction(ra,S)});x();return b.createJqLineItem(f.get("tabbedHeadPattern","\u5916\u89c2\u98ce\u683c"),c)},O=function(){m=new aa;m.setItemModels([Tc.HEAD_TOP_LEFT,Tc.HEAD_TOP_RIGHT,Tc.HEAD_BOTTOM_LEFT,Tc.HEAD_BOTTOM_RIGHT]);m.setCustomPainter(Q);m.addSelectedChangedListener(function(S,ra,ka){S=b.getEditorCaption(S);ra=new Dc;ra.setMethod(a.getWidget().getHeadPosition,
a.getWidget().setHeadPosition);ra.setValue(ka);b.performAction(ra,S)});C();return b.createJqLineItem(f.get("tabbedHeadPosition","\u6309\u94ae\u4f4d\u7f6e"),m)},F=function(S,ra,ka){switch(ka){case Tc.HEAD_PATTERN_BAR:S=f.get("tabbedHeadPatternBar","\u9002\u7528\u4e8e\u9875\u9762\u4e2d");break;case Tc.HEAD_PATTERN_BARE:S=f.get("tabbedHeadPatternBare","\u9002\u7528\u4e8e\u5361\u7247\u4e2d");break;case Tc.HEAD_PATTERN_HIDDEN:S=f.get("tabbedHeadPatternHide","\u9690\u85cf");break;default:S=""}ra.text(S)},
Q=function(S,ra,ka){switch(ka){case Tc.HEAD_TOP_LEFT:S=f.get("tabbedHeadPositionTL","\u5de6\u4e0a");break;case Tc.HEAD_TOP_RIGHT:S=f.get("tabbedHeadPositionTR","\u53f3\u4e0a");break;case Tc.HEAD_BOTTOM_LEFT:S=f.get("tabbedHeadPositionBL","\u5de6\u4e0b");break;case Tc.HEAD_BOTTOM_RIGHT:S=f.get("tabbedHeadPositionBR","\u53f3\u4e0b");break;default:S=""}ra.text(S)},K=function(){if(n){var S=a.getWidget().isSlideshowEnabled();n.setChecked(S)}},X=function(){n=new w;n.addCheckedListener(function(S,ra){if(ra){ra=
b.getEditorCaption(S);var ka=new Dc;ka.setMethod(a.getWidget().isSlideshowEnabled,a.getWidget().setSlideshowEnabled);ka.setValue(S.isChecked());b.performAction(ka,ra)}});K();return b.createJqLineItem(f.get("slideshow","\u542f\u7528\u8f6e\u64ad"),n)}}function ha(){function a(){var Q,K;this.bindModel=function(S){K=S};this.initUi=function(S){Q=new z;Q.setConstraint(1,999999,1);Q.addValueChangedListener(X,!0);var ra=m.createJqLineItem(f.get("slideshowDuration","\u6301\u7eed\u65f6\u95f4(\u79d2)"),Q);S.append(ra)};
this.updateVisibleAndState=function(S){m.updateEditorVisible(Q,S);Q.setValue(K.getDuration())};var X=function(S,ra,ka){S=new Dc;S.setMethod(K.getDuration,K.setDuration);S.setValue(Q.getValue());F(K,S)}}function b(){var Q,K,X,S;this.bindModel=function(hb){Q=hb};this.initUi=function(hb){K=new q;K.addActionListener(ra);K.setCustomPainter(function(Zb){return Zb?Zb.toShortDisplay(m.getGlobal().getDashboardModel()):""});X=new q;X.addActionListener(ka);X.setCustomPainter(function(Zb){if(!Zb)return"";var mc=
Sa.AffectedType_BindField|Sa.AffectedType_Param;return bc.affectedTargetsToShortDisplay(m.getGlobal().getDashboardModel(),Zb,mc)});S=new z;S.setConstraint(1,999999,1);S.addValueChangedListener(La,!0);hb.append(m.createJqLineItem(f.get("slideshowDataItems","\u8f6e\u64ad\u6570\u636e\u9879"),K));hb.append(m.createJqLineItem(f.get("slideshowEachDuration","\u6bcf\u9879\u95f4\u9694(\u79d2)"),S));hb.append(m.createJqLineItem(f.get("affectedTarget","\u4f5c\u7528\u4e8e"),X))};this.updateVisibleAndState=function(hb){m.updateEditorVisible(K,
hb);m.updateEditorVisible(X,hb);m.updateEditorVisible(S,hb);K.setModel(Q.getFilterSource());X.setModel(Q.getAffectedTargets());S.setValue(Q.getEachDuration())};var ra=function(hb){hb=Q.createWidgetPeer();var Zb=new Ad;Zb.setTitle(f.get("slideshowDataItemsDialogTitle","\u201c#1\u201d\u7684\u8f6e\u64ad\u6570\u636e\u9879").replace("#1",c.getWidget().getDisplayName()));Zb.showDialog(m.getGlobal(),hb,function(mc,tc,sc){mc&&(mc=new Dc,mc.setMethod(Q.getFilterSource,Q.setFilterSource),mc.setValue(tc),F(Q,
mc))})},ka=function(hb){var Zb=cb();(new Ld).showDialog(m.getGlobal(),c.getWidget(),function(mc){mc=Zb[mc.getWidgetTypeName()];return 0<=mc?mc:-1},function(mc){if(null!==mc){var tc=new Dc;tc.setMethod(Q.getAffectedTargets,Q.setAffectedTargets);tc.setValue(mc);F(Q,tc)}})},La=function(hb,Zb,mc){hb=new Dc;hb.setMethod(Q.getEachDuration,Q.setEachDuration);hb.setValue(S.getValue());F(Q,hb)},cb=function(){var hb={};hb[Sa.WidgetType_Square]=0;hb[Sa.WidgetType_Longer]=1;hb[Sa.WidgetType_QingReport]=2;hb[Sa.WidgetType_ExtReport]=
3;hb[Sa.WidgetType_Label]=4;hb[Sa.WidgetType_Rich]=5;return hb}}gb.call(this);Na.call(this);var c=this,m=this.protectedMethod,n,x,C={};this.protectedInitUi=function(Q){var K=m.createJqGroupTitle(f.get("tabbedHeadGroupTitle","\u5bfc\u822a\u680f\uff1a"));n=m.createTextEditor(c.getWidget().getHeadText,c.getWidget().setHeadText,null,!1,40);var X=m.createJqLineItem(f.get("tabbedHeadText","\u663e\u793a\u6587\u5b57"),n);Q.append(K);Q.append(X);n.setModel(c.getWidget().getHeadText());K=m.createJqGroupTitle(f.get("slideshowGroupTitle",
"\u8f6e\u64ad\uff1a"));X=Z();Q.append(m.createJqCap());Q.append(K);Q.append(X);for(var S in C)C[S].initUi(Q);P();Q.append(m.createJqCap());m.backgroundInitUi(Q)};this.protectedDoPropertyChanged=function(Q){Q==nd.KEY_HEAD_TEXT?n.setModel(c.getWidget().getHeadText()):Q==nd.KEY_DURATION_MODE?P():m.backgroundDoPropertyChanged(Q)};var Z=function(){for(var Q=c.getWidget().getDurationMode(),K=[rd.TYPE_ByFixedTime,rd.TYPE_ByData],X=[a,b],S=[],ra=0;ra<K.length;ra++){var ka=K[ra],La=ka==Q.getType()?Q:rd.createInstance(ka);
S.push(La);var cb=new X[ra];cb.bindModel(La);C[ka]=cb}x=new aa;x.setItemModels(S,function(hb,Zb){return hb.getType()==Zb.getType()});x.setCustomPainter(O);x.addSelectedChangedListener(function(hb,Zb,mc){F(mc)});return m.createJqLineItem(f.get("slideshowMode","\u8f6e\u64ad\u6a21\u5f0f"),x)},P=function(){var Q=c.getWidget().getDurationMode();x.setSelected(Q);for(var K in C){var X=C[K],S=K==Q.getType();S&&X.bindModel(Q);X.updateVisibleAndState(S)}},O=function(Q,K,X){switch(X?X.getType():""){case rd.TYPE_ByFixedTime:Q=
f.get("slideshowModeFixedTime","\u56fa\u5b9a\u65f6\u95f4");break;case rd.TYPE_ByData:Q=f.get("slideshowModeByData","\u6570\u636e\u9a71\u52a8");break;default:Q=""}K.text(Q)},F=function(Q,K){var X=new Dc;X.setMethod(c.getWidget().getDurationMode,c.getWidget().setDurationMode);X.setValue(Q);m.performAction(K?[X,K]:X,f.get("slideshowMode","\u8f6e\u64ad\u6a21\u5f0f"))}}function xa(){E.call(this);Zc.call(this);var a=this,b=this.protectedMethod,c,m;this.protectedGetSourceSelector=function(){return za.getWidgetSourceSelector().selectPicture};
this.protectedInitCustomUi=function(P){var O=b.createJqGroupTitle(f.get("pictureGroupTitle","\u56fe\u7247\uff1a")),F=b.createReferenceEditorItem(f.get("pictureUrl","\u56fe\u7247\u5185\u5bb9"));c=new w;c.addCheckedListener(n);var Q=b.createJqLineItem(f.get("pictureScale","\u539f\u59cb\u5c3a\u5bf8"),c);m=new w;m.addCheckedListener(x);var K=b.createJqLineItem(f.get("pictureAlign","\u5c45\u4e2d"),m);P.append(b.createJqCap());P.append(O);P.append(F);P.append(Q);P.append(K);C();Z()};this.protectedDoCustomPropertyChanged=
function(P){P==Ma.KEY_SCALE?C():P==Ma.KEY_ALIGN&&Z()};var n=function(P,O){if(O){P=b.getEditorCaption(P);O=c.isChecked()?Ma.SCALE_NON:Ma.SCALE_ADAPTIVE;var F=new Dc;F.setMethod(a.getWidget().getScale,a.getWidget().setScale);F.setValue(O);b.performAction(F,P)}},x=function(P,O){if(O){P=b.getEditorCaption(P);O=m.isChecked()?Ma.HALIGN_CENTER|Ma.VALIGN_MIDDLE:Ma.HALIGN_LEFT|Ma.VALIGN_TOP;var F=new Dc;F.setMethod(a.getWidget().getAlign,a.getWidget().setAlign);F.setValue(O);b.performAction(F,P)}},C=function(){var P=
a.getWidget().getScale();P==Ma.SCALE_NON?c.setChecked(!0):P==Ma.SCALE_ADAPTIVE&&c.setChecked(!1)},Z=function(){a.getWidget().getAlign()==(Ma.HALIGN_CENTER|Ma.VALIGN_MIDDLE)?m.setChecked(!0):m.setChecked(!1)}}function Ha(){var a,b,c,m,n,x,C=!1,Z;this.setShowBlockingByFacade=function(O,F){C=O;Z=F};this.setFacadeCreator=function(O){a=O};this.refresh=function(O,F,Q,K,X,S,ra){m=F;b=K;c=X;x=S;F=a(P,c);F.setShowBlocking(C);F.setBlockingPrompt(Z);F.setCancelable(!0);ra&&F.setProgressListener(ra);return F.refreshData(O,
m,Q)};this.prepare=function(O,F,Q,K,X){b=F;c=Q;x=K;F=a(P,c);F.setShowBlocking(C);F.setBlockingPrompt(Z);F.setCancelable(!0);X&&F.setProgressListener(X);return F.refreshData(O)};this.setTagImmediateAnnouncer=function(O){n=O};var P=function(O){if(!x||!x()){if(O=O.tag)m=O,n&&(n(m),n=null);b(m)}}}function Ia(){function a(){ja.call(this);var K=this,X=this.protectedMethod,S=$("<div>"),ra;(function(){K.setSize(480,360);X.setContentPaneCreator(function(){return S});X.setClosingAction(function(ka){ra.destroy();
X.destroy()});X.setFooterPaneCreator(function(ka){var La=new Ea(f.get("createWidgetErrorConfirm","\u6211\u77e5\u9053\u4e86"));La.getJqUi().appendTo(ka);La.addActionListener(function(cb){ra.destroy();X.destroy()});N.layoutCtrlWithLRTB(La.getJqUi(),180,180,null,null,12,28)})})();this.setTitle=function(ka){X.setTitle(ka)};this.setErrorInfo=function(ka,La,cb){za.createDashboardSquareScene(!1,function(hb){ra=hb;ra.show(S);ra.displayError(ka,La,cb)})}}var b,c,m,n,x,C;this.bindIntegrationImpl=function(K,
X){b=K;c=X};this.selecting=function(K,X,S){m=K;n=X;x=function(ra){S(ra?!0:!1)};K=Jc.getInstance(n.getWidgetTypeName()).getTypeDisplayName();C=f.get("createWidget","\u65b0\u5efa\u7ec4\u4ef6-#1").replace("#1",K);b(null,Z)};this.reselecting=function(K,X,S){m=K;n=X;x=S;C=n.getDisplayName();b(n.getReferenceCustomMap(),P)};var Z=function(K,X,S,ra,ka){K?(X&&n.setCardTitle(X),n.setReferenceCustomMap(K),S?O(K,!0):Q(ra,ka,!0,K)):x(null)},P=function(K,X,S,ra,ka){K?S?O(K,!1):Q(ra,ka,!0,K):x(null)},O=function(K,
X){var S=new Ha;S.setFacadeCreator(m.createFacade);S=S.prepare(K,function(ka){ra.hideWaiting();n.setExecutingTag(ka);F(K,ka,X)},function(ka,La,cb){ra.hideWaiting();x(null);if(-1!=ka){var hb=new a;hb.setTitle(C);hb.showDialog();hb.setErrorInfo(ka,La,cb)}return!0},null,function(ka){ra.hookProgressDisplayer(l.makeUiCreator(ka))});var ra=new D;ra.setIconVisible(!0);ra.hookOwner($(document.body),null);ra.showWaiting(l.getWaitingText(),S)},F=function(K,X,S){c(C,!1,K,X,null,null,function(ra){Q(ra,null,!S,
K)})},Q=function(K,X,S,ra){K?(n.deliveryTemporary(K,X,S),x(ra)):x(null)}}function qb(){this.updateBackgroundPicture=function(a,b){b.attr("title",null);var c=a.getBackgroundPicture();c?za.getPictureLoader()(c.getReferenceCustomMap(),function(m,n,x){n={};n["background-image"]="url("+m+")";n["background-repeat"]="no-repeat";n["background-size"]="auto";switch(c.getScale()){case Ma.SCALE_FULL:n["background-size"]="100% 100%";break;case Ma.SCALE_TILED:n["background-repeat"]="repeat";break;case Ma.SCALE_ADAPTIVE:n["background-size"]=
"contain"}m=c.isAlignTo(Ma.HALIGN_LEFT)?"left":c.isAlignTo(Ma.HALIGN_RIGHT)?"right":"center";x=c.isAlignTo(Ma.VALIGN_TOP)?"top":c.isAlignTo(Ma.VALIGN_BOTTOM)?"bottom":"center";n["background-position"]=m+" "+x;b.css(n)},function(m){b.attr("title","Background image not found:\r\n"+m+"\r\n"+a.getDisplayName())}):b.css("background-image","")}}function ab(){Gc.call(this);var a=this,b=this.protectedMethod,c,m,n,x;this.getJqUi=function(){if(!c){c=$("<div>");c.css("overflow","hidden");var C=Jc.getInstance(b.getWidget().getWidgetTypeName()).getMargin();
m=$("<div>");m.appendTo(c);N.layoutCtrlWithLRTB(m,C,C,null,C,C,null);a.updateHeadUi(!0)}return c};this.getJqContent=function(){return m};this.updateHeadUi=function(C){var Z=b.getWidget();a:switch(Z.getHeadPattern()){case Tc.HEAD_PATTERN_BAR:var P=new Db;break a;case Tc.HEAD_PATTERN_BARE:P=new xb;break a;default:P=null}var O=P?P.measureButtons(Z):0;if(C||O!=x)if(x=O,n&&n.getJqUi().remove(),n=P)n.getJqUi().appendTo(m),C=n.getJqUi(),O=b.getWidget(),P=O.getHeadHeight(),O=O.getHeadPosition(),O=O==Tc.HEAD_BOTTOM_LEFT||
O==Tc.HEAD_BOTTOM_RIGHT,N.layoutCtrlWithLRTB(C,0,0,null,O?null:0,O?0:null,P),0<Z.getWidgetCount()&&n.createButtons(Z,x)}}function ub(){var a=this,b,c;this.getJqUi=function(){b||(b=$("<div>"),b.css({"box-sizing":"border-box"}),c=$("<div>"),c.appendTo(b));return b};this.measureButtons=function(x){var C=new L;C.setFontSize(n(x));for(var Z=0,P=0;P<x.getWidgetCount();P++){var O=x.getWidget(P);O=C.measureWidth(O.getHeadText());Z=Math.max(Z,O)}C.destroy();C=a.protectedGetPadding();x=parseInt((x.getClientWidth()-
2*C)/x.getWidgetCount());C=a.protectedGetButtonPadding();return Math.min(Z+2*C,x)};this.createButtons=function(x,C){var Z=x.isOpacityRequired();a.protectedPaintHead(a.getJqUi(),Z);Z=[];for(var P=0;P<x.getWidgetCount();P++){var O=x.getWidget(P);O=m(x,O);Z.push(O)}P=x.getHeadHeight();C=a.protectedLayoutButtons(Z,C,P);Z=a.protectedGetPadding();C+=2*Z;x=x.getHeadPosition();x=x==Tc.HEAD_BOTTOM_LEFT||x==Tc.HEAD_TOP_LEFT;N.layoutCtrlWithLRTB(c,x?0:null,x?null:0,C,0,0,null)};this.protectedPaintHead=function(x,
C){};this.protectedGetPadding=function(){return 0};this.protectedGetButtonPadding=function(){return 0};this.protectedLayoutButtons=function(x,C,Z){throw Error("Implement");};var m=function(x,C){var Z=wa.dip(wa.DSB_TABBED_HEAD),P=Z[wa.Key_TabbedHead_MainColor];Z=Z[wa.Key_TabbedHead_InverseColor];Z=C.isVisible()?Z:P;var O=C.isVisible()?P:"transparent",F=$("<div>");F.text(C.getHeadText());F.css({overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis","box-sizing":"border-box","text-align":"center",
color:Z,"background-color":O,border:"1px solid "+P,"font-size":n(x)+"px"});F.appendTo(c);F.on("click",function(Q){C.setVisible(!0)});return F},n=function(x){x=x.getFontSizeEnhanced();return Math.round(12*(1+x/10))}}function Db(){ub.call(this);var a=this;this.protectedPaintHead=function(b,c){wa.decorateCardSimpleBorder(c,b)};this.protectedLayoutButtons=function(b,c,m){var n=a.protectedGetPadding(),x=parseInt(.2*m);m=parseInt(.6*m);for(var C=0;C<b.length;C++){var Z=b[C];Z.css("line-height",m-2+"px");
N.layoutCtrl(Z,n,x,c,m);n+=c-1;0==C&&Z.css({"border-top-left-radius":"2px","border-bottom-left-radius":"2px"});C==b.length-1&&Z.css({"border-top-right-radius":"2px","border-bottom-right-radius":"2px"})}return(c-1)*b.length+1};this.protectedGetPadding=function(){return 16};this.protectedGetButtonPadding=function(){return 20}}function xb(){ub.call(this);var a=this;this.protectedLayoutButtons=function(b,c,m){for(var n=a.protectedGetPadding(),x=0;x<b.length;x++){var C=b[x];C.css("line-height",m-2+"px");
N.layoutCtrl(C,n,0,c,m);n+=c-1}return(c-1)*b.length+1};this.protectedGetPadding=function(){return 0};this.protectedGetButtonPadding=function(){return 16}}function fc(){fa.call(this);var a=this,b=this.protectedMethod,c,m,n,x,C=$("<div>"),Z,P=[],O;this.getJqUi=function(){if(!m){var Nb=$("<div>");n=F(1,"left");n.appendTo(Nb);x=F(-1,"right");x.appendTo(Nb);Q();m=$("<div>");m.css({overflow:"hidden","z-index":1});m.appendTo(Nb);C.appendTo(m);C.on("mouseover",Wc);C.on("mouseout",Xc);C.on("click",ad)}return m.parent()};
var F=function(Nb,lc){var Ac=$("<div>");oa.background(Ac,lc);N.layoutCtrlCenterAlign(Ac,16);N.layoutCtrlMiddleAlign(Ac,16);lc=$("<div>");lc.append(Ac);lc.css({cursor:"pointer","z-index":2});lc.on("click",function(Za){Za=X();var Ja=m.prop(Za?"clientHeight":"clientWidth"),yb=C.prop(Za?"offsetHeight":"offsetWidth");yb=Ja-yb;var Tb=C.data("my-start");Ja=parseInt(.618*Ja)*Nb;0<=Tb&&0<Ja?ka(0,Ja):Tb<=yb&&0>Ja?ka(yb,Ja):S(Za?"top":"left",Math.min(0,Math.max(yb,Tb+Ja)),375)});return lc};this.setSelectableItems=
function(Nb){ra(Nb)};this.setSelectedItems=function(Nb){P=Nb;tc();La()};this.getSelectedItems=function(){return P};this.setValueChangedListener=function(Nb){O=Nb};this.relayout=function(){Q();K()};this.requestRepaint=function(){if(c){var Nb=b.getWidget().getWidth(),lc=b.getWidget().getHeight();if(c[0]==Nb&&c[1]==lc)return}K()};this.repaintButtons=function(){tc()};var Q=function(){var Nb={transform:X()?"rotate(90deg)":""};n.children().eq(0).css(Nb);x.children().eq(0).css(Nb)},K=function(){var Nb=[];
mc(function(lc){lc=Ec(lc);Nb.push(lc)});ra(Nb);tc()},X=function(){return b.getWidget().getLayoutMode()==ic.LAYOUT_MODE_WRAP},S=function(Nb,lc,Ac){C.data("my-start",lc);var Za={};Za[Nb]=lc;C.stop().animate(Za,Ac)},ra=function(Nb){var lc=b.getWidget().getWidth(),Ac=b.getWidget().getHeight();c=[lc,Ac];Z=null;C.empty();if(X()){var Za=sc(),Ja=Za[0],yb=Za[2];Za=Math.min(Za[3],Ac);var Tb=yb,gc=b.getWidget().getCharsPerItemWhenWrap(),xc=Ja*(gc+1);gc=b.getWidget().getItemsPerRowWhenWrap();gc=Math.min(Nb.length,
Math.max(1,gc));var vc=Math.floor((lc+yb)/gc-yb),Uc=vc;vc<xc&&(gc=Math.max(1,Math.floor((lc+yb)/(xc+yb))),Uc=Math.floor((lc+yb)/gc-yb));xc=Math.ceil(Nb.length/gc);1<xc&&(xc=Math.floor((Ac-xc*Za)/(xc-1)),Math.floor(Tb/2)<=xc&&(Tb=Math.min(xc,Za)));vc=xc=0;for(var ed=$(document.createDocumentFragment()),Yc=0;Yc<Nb.length;Yc++){var md=Nb[Yc],jd=md.getDisplayText();md=hb(jd,Za,Ja,md);md.attr("title",jd);md.appendTo(ed);xc=(jd=0==Yc%gc)?0:xc+Uc+yb;vc=0<Yc&&jd?vc+Za+Tb:vc;N.layoutCtrl(md,xc,vc,Uc,Za);0==
Yc&&b.getWidget().isIncludedItemAll()&&(Z=md)}C.append(ed);Nb=vc+Za;N.layoutCtrl(C,0,0,"100%",Nb);S("left",0,0);S("top",0,0);Nb=(Ja=Nb>Ac)?24:0;Ja=Ja?"":"none";n.css("display",Ja);x.css("display",Ja);Ja=Nb;yb=0;2*Nb+Za>Ac&&(Ja=0,yb=Math.floor((lc-Nb)/2));N.layoutCtrlWithLRTB(m,0,0,"",Ja,Ja,"");N.layoutCtrlWithLRTB(n,yb,yb,"",0,"",Nb);N.layoutCtrlWithLRTB(x,yb,yb,"","",0,Nb)}else{yb=sc();Ac=yb[0];Za=yb[1];Ja=yb[2];yb=yb[3];Tb=0;gc=$(document.createDocumentFragment());Uc=new L;Uc.setFontSize(Ac);for(xc=
0;xc<Nb.length;xc++)ed=Nb[xc],Yc=ed.getDisplayText(),vc=Uc.measureWidth(Yc)+2*Za+1,ed=hb(Yc,yb,Ac,ed),ed.appendTo(gc),N.layoutCtrl(ed,Tb,0,vc,yb),Tb+=vc+Ja,0==xc&&b.getWidget().isIncludedItemAll()&&(Z=ed);Uc.destroy();C.append(gc);Nb=Math.max(0,Tb-Ja);N.layoutCtrl(C,0,0,Nb,"100%");S("left",0,0);S("top",0,0);lc=(Nb=Nb>lc)?40:0;Nb=Nb?"":"none";n.css("display",Nb);x.css("display",Nb);N.layoutCtrlWithLRTB(m,lc,lc,"",0,0,"");N.layoutCtrlWithLRTB(n,0,"",lc,0,0,"");N.layoutCtrlWithLRTB(x,"",0,lc,0,0,"")}},
ka=function(Nb,lc){var Ac=X()?"top":"left",Za={};Za[Ac]=Nb+parseInt(.2*lc);C.stop().animate(Za,100,function(){Za[Ac]=Nb;C.animate(Za,250)})},La=function(){if(P&&0<P.length){var Nb=P[0],lc;mc(function(Ac){return Ec(Ac).getValue()==Nb.getValue()?(lc=Ac,!0):!1});lc&&cb(lc,0)}},cb=function(Nb,lc){var Ac=X(),Za=Nb.prop(Ac?"offsetTop":"offsetLeft");Nb=Za+Nb.prop(Ac?"offsetHeight":"offsetWidth");var Ja=m.prop(Ac?"clientHeight":"clientWidth"),yb=-C.prop(Ac?"offsetTop":"offsetLeft"),Tb=!1;Nb>yb+Ja&&(yb=Nb-
Ja,Tb=!0);Za<yb&&(yb=Za,Tb=!0);Tb&&S(Ac?"top":"left",-yb,lc)},hb=function(Nb,lc,Ac,Za){var Ja=$("<div>");Ja.text(Nb);N.makeTextOmissible(Ja);N.layoutCtrlWithLRTB(Ja,0,0,null);N.layoutCtrlMiddleAlign(Ja,lc-4);Nb=$("<div>");Nb.append(Ja);Nb.addClass("btn");Nb.css("font-size",Ac+"px");Nb.css({cursor:"pointer","box-sizing":"border-box",border:"1px solid #ccc","border-radius":"3px","text-align":"center"});Zb(Nb);Nb.data("my-model",Za);return Nb},Zb=function(Nb,lc,Ac){var Za=a.protectedGetStyleMap(),Ja=
Za[wa.Key_ButtonGroup_Color],yb=Za[wa.Key_ButtonGroup_BackgroundColor],Tb=Za[wa.Key_ButtonGroup_BorderColor];lc&&(Ja=Za[wa.Key_ButtonGroup_Color_Selected],yb=Za[wa.Key_ButtonGroup_BackgroundColor_Selected],Tb=Za[wa.Key_ButtonGroup_BorderColor_Selected]);Ac&&(yb=Za[wa.Key_ButtonGroup_BackgroundColor_Hover]);Nb.css({color:Ja,"background-color":yb,"border-color":Tb})};this.protectedGetStyleMap=function(){return wa.dip(wa.DSB_BUTTON_GROUP)};var mc=function(Nb){for(var lc=C.children(".btn"),Ac=0;Ac<lc.length&&
!Nb(lc.eq(Ac));Ac++);},tc=function(Nb){var lc=qd();mc(function(Ac){var Za=Nb&&Nb[0]==Ac[0];if(Z&&Z[0]==Ac[0])if(1==P.length&&Z){var Ja=P[0];var yb=Ec(Z);Ja=Ja.getValue()==yb.getValue()}else Ja=!1;else Ja=Ec(Ac),Ja=lc[Ja.getValue()]?!0:!1;Zb(Ac,Ja,Za)})},sc=function(){var Nb=b.getWidget().getSizeMode();if(Nb>=ic.SIZE_MODE_LARGE){var lc=16;var Ac=20;var Za=16}else Nb>=ic.SIZE_MODE_MIDDLE?(Ac=lc=14,Za=8):(lc=12,Ac=8,Za=4);Nb=ic.askButtonHeight(Nb);return[lc,Ac,Za,Nb]},Ec=function(Nb){return Nb.data("my-model")},
Fc=function(Nb){return N.upwardSearchHasData(Nb,C,"my-model")},Wc=function(Nb){Nb=$(Nb.target);(Nb=Fc(Nb))&&tc(Nb)},Xc=function(Nb){Nb=$(Nb.target);Fc(Nb)&&tc(null)},ad=function(Nb){Nb=$(Nb.target);if(Nb=Fc(Nb)){cb(Nb,250);if(Z&&Z[0]==Nb[0])P=[Ec(Z)];else if(Nb=Ec(Nb),b.getWidget().isMultiSelectable()){if(Z){var lc=Ec(Z);ld(lc)}!ld(Nb)&&P.push(Nb)}else P=[Nb];tc();O&&O()}},ld=function(Nb){for(var lc=0;lc<P.length;lc++)if(P[lc].getValue()===Nb.getValue())return P.splice(lc,1),!0;return!1},qd=function(){for(var Nb=
{},lc=0;lc<P.length;lc++){var Ac=P[lc];Nb[Ac.getValue()]=Ac}return Nb}}function rc(){kb.call(this);var a=this.protectedMethod;this.getJqUi=function(){var b=$("<div>");b.on("mousemove",function(c){a.getWidget().setRuntimeWalkable(!1)});b.on("mouseleave",function(c){a.getWidget().setRuntimeWalkable(!0)});return b}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing=
{});"undefined"==typeof com.kingdee.bos.qing.dsb&&(com.kingdee.bos.qing.dsb={});"undefined"==typeof com.kingdee.bos.qing.dsb.widget&&(com.kingdee.bos.qing.dsb.widget={});var kc=com.kingdee.bos.qing.dsb.widget;qb=new qb;kc.DesktopWidgetCtrlRegister=new p;kc.MobileWidgetCtrlRegister=new p;kc.DesktopWidgetCtrlProvider=function(){Wb.call(this);var a=!0;this.setDesigntime=function(b){a=b};this.isDesigntime=function(){return a};this.protectedGetRegister=function(){return kc.DesktopWidgetCtrlRegister};this.protectedInitWidgetCtrl=
function(b){a&&b.appendSituation(kb.Situation_Designtime)}};kc.MobileWidgetCtrlProvider=function(){Wb.call(this);this.isMobile=function(){return!0};this.protectedGetRegister=function(){return kc.MobileWidgetCtrlRegister};this.protectedInitWidgetCtrl=function(a){a.appendSituation(kb.Situation_Runtime_Mobile)}};kc.AbstractWidgetUi=Ga;kc.AbstractCardWidgetCtrl=Mb;kc.AbstractBuiltinVisualWidgetCtrl=Ab;kc.AbstractQingReportWidgetCtrl=jb;kc.AbstractPanelWidgetCtrl=function(){kb.call(this);var a=this.protectedMethod;
this.setActionListener=function(b){throw Error("Implement");};this.setFullscreenAnnouncer=function(b,c){throw Error("Implement");};this.updateState=function(){throw Error("Implement");};this.updateTopBar=function(b){throw Error("Implement");};this.getJqContent=function(){throw Error("Implement");};this.repaintSurface=function(){throw Error("Implement");};this.protectedMethod.isFullscreenEnabled=function(){var b=a.getWidget();return!(b.getFullscreenAllowed()==kd.FULLSCREEN_ALLOWED_NONE||b.isAncestorForbidFullscreen()||
b.hasBeenFullscreen()&&b.getParent().hasBeenFullscreen())}};kc.AbstractLabelWidgetCtrl=function(){kb.call(this)};kc.AbstractCalendarWidgetCtrl=function(){kb.call(this);this.setDateMs=function(a){throw Error("Implement");};this.getFromDateMs=function(){throw Error("Implement");};this.getToDateMs=function(){throw Error("Implement");};this.setValueChangedListener=function(a){throw Error("Implement");};this.updateFrontLabel=function(){throw Error("Implement");};this.updateSurface=function(){}};kc.AbstractComboboxWidgetCtrl=
function(){kb.call(this);this.setSelectableItems=function(a){throw Error("Implement");};this.setSelectedItem=function(a){throw Error("Implement");};this.getSelectedItem=function(){throw Error("Implement");};this.setValueChangedListener=function(a){throw Error("Implement");};this.updateFrontLabel=function(){};this.updateSurface=function(){}};kc.AbstractF7WidgetCtrl=function(){kb.call(this);this.setSelectableItems=function(a){throw Error("Implement");};this.setSelectedItems=function(a){throw Error("Implement");
};this.getSelectedItems=function(){throw Error("Implement");};this.setValueChangedListener=function(a){throw Error("Implement");};this.updateFrontLabel=function(){};this.updateSurface=function(){}};kc.CosmeticConfigPreviewButtonGroup=fc;kc.CosmeticConfigPreviewTabbedSelector=Ta;kc.ExhibitionModePanel=Pb;kc.WidgetFullscreenHelper=Kb;kc.BackgroundPictureLoader=qb;var N,M,H,L,A,I,J,f,aa,e,d,q,z,w,B,W,ja,Ea,Ua,mb,Gb,zb,tb,va,sa,G,D,l,h,u,U,da,ya,oa,za,wa,Ib,qc,Lc,Jc,Sa,bd,Vb,Ob,Yb,uc,Sc,Cc,Hc,Nc,dd,cd,
Vc,pb,Ma,nb,ac,zc,ic,Oc,Pc,fd,od,hd,id,pd,kd,Tc,nd,vd,Td,Bd,Wd,xd,ud,rd,gd,sd,Dc,Kd,wd,ce,he,ie,Md,Od,Nd,Id,Xd,Ad,Ld,de,Pd,Cd,Dd,Ed,Fd,ee,ae,ge,Yd,be,Jd,$d,fe,Zd;(function(){var a=com.kingdee.bos.qing.common;N=a.DomUtil;M=a.FullScreenHelper;H=a.DateFormater;L=a.TextMeasurer;A=a.BlocksToTable;I=a.CanvasUtil;J=a.DateUtil;a=com.kingdee.bos.qing.framework.common;f=a.MultilanguageManager.createPackageAccessor(com.kingdee.bos.qing.dsb.ui);a=com.kingdee.bos.qing.ui.component;aa=a.ComboBox;e=a.Label;d=a.TextField;
q=a.F7Selector;z=a.Spinner;w=a.CheckBox;B=a.RadioButton;W=a.RadioButtonGroup;ja=a.AbstractModalDialog;Ea=a.Button;Ua=a.Menu;mb=a.SimpleConfirmer;Gb=a.HelpIcon;zb=a.ColorChooser;a=com.kingdee.bos.qing.common.ui;tb=a.RelativePeriodPanel;va=a.ColorSelector;sa=a.ColorWithOpacitySelector;G=a.FontSelector;a=com.kingdee.bos.qing.common.shared;D=a.LongtimeWaitingMask;l=a.DataPreparingProgressParser;a=com.kingdee.bos.qing.common.rich;h=a.RichDisplayer;a=com.kingdee.bos.qing.chart.render;u=a.StyleTool;a=com.kingdee.bos.qing.core;
U=a.RtLongerEditableConfirmer;da=a.RtSquareEditableConfirmer;a=com.kingdee.bos.qing.core.model;ya=a.BriefOutput;a=com.kingdee.bos.qing.dsb;oa=a.Icons;za=a.IntegrationRegister;wa=a.CosmeticBag;Ib=a.ImageBorderRenerer;qc=a.AbstractQingReportExecutor;a=com.kingdee.bos.qing.dsb.look;Lc=a.CardLookRenderer;a=com.kingdee.bos.qing.dsb.model;Jc=a.WidgetTypeManager;Sa=a.DashboardModel;bd=a.WidgetUnknown;Vb=a.WidgetPageTitleBar;Ob=a.AbstractCardSimilary;Yb=a.WidgetSquare;uc=a.WidgetLonger;Sc=a.WidgetQingReport;
Cc=a.WidgetExtReport;Hc=a.WidgetProgramableCard;Nc=a.WidgetCosmicCustomCard;dd=a.WidgetCloudhubSubscribes;cd=a.AbstractTextWidget;Vc=a.WidgetLabel;pb=a.WidgetRich;Ma=a.WidgetPicture;nb=a.WidgetIframe;ac=a.WidgetClock;zc=a.WidgetCombobox;ic=a.WidgetButtonGroup;Oc=a.WidgetF7;Pc=a.AbstractCalendar;fd=a.WidgetCalendar;od=a.WidgetCalendarYear;hd=a.WidgetCalendarQuarter;id=a.WidgetCalendarMonth;pd=a.WidgetCalendarDay;kd=a.WidgetPanel;Tc=a.WidgetTabbedContainer;nd=a.WidgetOneTabbed;vd=a.AbstractFilterSource;
Td=a.FilterSourceFromVisualWidget;Bd=a.ValueTextItem;Wd=a.DateSelected;xd=a.AffectedTargets;ud=a.AbstractDefaultSelected;rd=a.AbstractDurationMode;gd=a.AbstractCardBorder;sd=a.CardTopBarCommon;if(a=com.kingdee.bos.qing.dsb.controller)Dc=a.ActionChangeProperty,Kd=a.ActionChangePageRect,wd=a.ActionChangeWidgetRect,ce=a.ActionModifyStyle,he=a.ActionChangeDateRange,ie=a.ActionAddWidget;if(a=com.kingdee.bos.qing.dsb.ui)Md=a.UrlInputDialog,Od=a.RichEditorDialog,Nd=a.LabelContentDialog,Id=a.TextInputDialog,
Xd=a.TextAreaDialog,Ad=a.FilterSourceDialog,Ld=a.AffectedTargetDialog,de=a.TabSwitchDialog,Pd=a.DateRangeInitialDialog,Cd=a.CalendarYearInitialDialog,Dd=a.CalendarQuarterInitialDialog,Ed=a.CalendarMonthInitialDialog,Fd=a.CalendarDayInitialDialog,ee=a.DefaultSelectedDialog,ae=a.CosmeticConfigDialog,ge=a.ClockFormatDialog,Yd=a.CardLookConfigDialog,be=a.PageTitleBarSurfaceDialog,Jd=a.CardTopBarTitleLayoutDialog,$d=a.PageCardTopBarTitleLayoutDialog,fe=a.CardTitleStyleDialog,Zd=a.CardBorderOfImageDialog,
Jd.hookPreviewCard(oc)})();Jc.registerAll([function(){lb.call(this);var a=this.protectedMethod;a.setTypeName(Sa.WidgetType_Page);a.setTypeDisplayName(f.get("widgetPage","\u9875\u9762"));a.setIconFileName("widget_page");this.createPropertyPanel=function(){return new ob}},function(){lb.call(this);var a=this.protectedMethod;a.setTypeName(Sa.WidgetType_Square);a.setTypeDisplayName(f.get("widgetSquare","\u6570\u636e\u6597\u65b9"));a.setIconFileName("widget_square");this.getToolboxGroup=function(){return Gd};
this.protectedCreateWidgetModel=function(b){return new Yb};this.protectedCreateWidgetUi=function(){return new Va};this.createPropertyPanel=function(){return new v};this.getSuggestSize=function(){return[320,190]};this.selectSource=function(b,c,m){var n=za.getWidgetSourceSelector().selectSquare,x=za.showSquareDesigner,C=new Ia;C.bindIntegrationImpl(n,x);C.selecting(b,c,m)}},function(){lb.call(this);var a=this.protectedMethod;a.setTypeName(Sa.WidgetType_Longer);a.setTypeDisplayName(f.get("widgetLonger",
"\u6570\u636e\u5206\u6790"));a.setIconFileName("widget_longer");this.getToolboxGroup=function(){return Gd};this.protectedCreateWidgetModel=function(b){return new uc};this.protectedCreateWidgetUi=function(){return new ba};this.createPropertyPanel=function(){return new g};this.getSuggestSize=function(){return[450,300]};this.selectSource=function(b,c,m){var n=za.getWidgetSourceSelector().selectLonger,x=za.showLongerDesigner,C=new Ia;C.bindIntegrationImpl(n,x);C.selecting(b,c,m)}},function(){lb.call(this);
var a=this.protectedMethod;a.setTypeName(Sa.WidgetType_QingReport);a.setTypeDisplayName(f.get("widgetQingReport","\u8f7b\u62a5\u8868"));a.setIconFileName("widget_qingreport");this.isSupported=function(){return za.getQingReportExecutor()?!0:!1};this.getToolboxGroup=function(){return Gd};this.protectedCreateWidgetModel=function(b){return new Sc};this.protectedCreateWidgetUi=function(){return new bb};this.getSuggestSize=function(){return[450,300]};this.selectSource=function(b,c,m){za.getWidgetSourceSelector().selectQingReport(null,
function(n,x){n?(c.setReferenceCustomMap(n),x&&c.setCardTitle(x),m(!0)):m(!1)})};this.createPropertyPanel=function(){return new r}},function(){lb.call(this);var a=this.protectedMethod;a.setTypeName(Sa.WidgetType_ExtReport);a.setTypeDisplayName(f.get("widgetExt","\u6269\u5c55\u62a5\u8868"));a.setIconFileName("widget_ext");this.isSupported=function(){return za.getExtReportExecutor()?!0:!1};this.getToolboxGroup=function(){return Gd};this.protectedCreateWidgetModel=function(b){return new Cc};this.protectedCreateWidgetUi=
function(){return new Aa};this.getSuggestSize=function(){return[450,300]};this.selectSource=function(b,c,m){za.getExtReportSourceSelector()(null,function(n){n?(c.setEncodedModel(n),m(!0)):m(!1)})};this.createPropertyPanel=function(){return new y}},function(){lb.call(this);var a=this.protectedMethod;a.setTypeName(Sa.WidgetType_Label);a.setTypeDisplayName(f.get("widgetLabel","\u6587\u5b57"));a.setIconFileName("widget_label");this.getToolboxGroup=function(){return zd};this.protectedCreateWidgetModel=
function(b){return new Vc};this.protectedCreateWidgetUi=function(){return new ca};this.getMinSize=function(){return[40,20]};this.getSuggestSize=function(){return[200,40]};this.createPropertyPanel=function(){return new Ba};this.selectSource=function(b,c,m){(new Nd).show(c,b.getDashboardModel().getPage(),function(n,x,C,Z){C?(c.setContent(x,Z),m(!0)):m(!1)})}},function(){lb.call(this);var a=this.protectedMethod;a.setTypeName(Sa.WidgetType_Rich);a.setTypeDisplayName(f.get("widgetRich","\u591a\u884c\u6587\u5b57"));
a.setIconFileName("widget_rich");this.getToolboxGroup=function(){return zd};this.protectedCreateWidgetModel=function(b){return new pb};this.protectedCreateWidgetUi=function(){return new na};this.getSuggestSize=function(){return[320,180]};this.createPropertyPanel=function(){return new Ya};this.selectSource=function(b,c,m){(new Od).show(c,b.getDashboardModel().getPage(),function(n,x,C,Z){C?(c.setContent(x,Z),m(!0)):m(!1)})}},function(){lb.call(this);var a=this.protectedMethod;a.setTypeName(Sa.WidgetType_Picture);
a.setTypeDisplayName(f.get("widgetPicture","\u56fe\u7247"));a.setIconFileName("widget_picture");this.getToolboxGroup=function(){return zd};this.protectedCreateWidgetModel=function(b){return new Ma};this.protectedCreateWidgetUi=function(){return new Pa};this.createPropertyPanel=function(){return new xa};this.getSuggestSize=function(){return[320,190]};this.selectSource=function(b,c,m){za.getWidgetSourceSelector().selectPicture(null,function(n){n?(c.setReferenceCustomMap(n),m(!0)):m(!1)})}},function(){lb.call(this);
var a=this.protectedMethod;a.setTypeName(Sa.WidgetType_Iframe);a.setTypeDisplayName(f.get("widgetIframe","\u7f51\u9875"));a.setIconFileName("widget_iframe");this.getToolboxGroup=function(){return zd};this.protectedCreateWidgetModel=function(b){return new nb};this.protectedCreateWidgetUi=function(){return new la};this.getSuggestSize=function(){return[320,190]};this.selectSource=function(b,c,m){(new Md).showDialog("",function(n,x){n?(c.setUrl(x),m(!0)):m(!1)})};this.createPropertyPanel=function(){return new ia}},
function(){lb.call(this);var a=this.protectedMethod;a.setTypeName(Sa.WidgetType_Clock);a.setTypeDisplayName(f.get("widgetClock","\u5b9e\u65f6\u65f6\u95f4"));a.setIconFileName("widget_clock");this.getToolboxGroup=function(){return zd};this.protectedCreateWidgetModel=function(b){return new ac};this.protectedCreateWidgetUi=function(){return new Qa};this.createPropertyPanel=function(){return new pa};this.getSuggestSize=function(){return[200,40]}},function(){lb.call(this);Jb.call(this);var a=this.protectedMethod;
a.setTypeName(Sa.WidgetType_Combobox);a.setTypeDisplayName(f.get("widgetCombobox","\u4e0b\u62c9\u5217\u8868"));a.setIconFileName("widget_combobox");this.protectedCreateWidgetModel=function(b){var c=new zc;b&&c.setIncludedItemAll(!0);return c};this.protectedCreateWidgetUi=function(){return new k};this.getSuggestSize=function(){return[180,25]};this.isHeightLockedAlways=function(){return!0};this.createPropertyPanel=function(){return new $a}},function(){lb.call(this);Jb.call(this);var a=this.protectedMethod;
a.setTypeName(Sa.WidgetType_ButtonGroup);a.setTypeDisplayName(f.get("widgetButtonGroup","\u6309\u94ae\u7ec4"));a.setIconFileName("widget_buttongroup");this.protectedCreateWidgetModel=function(b){var c=new ic;b&&(c.setIncludedItemAll(!1),c.setLayoutMode(ic.LAYOUT_MODE_HORIZONTAL),c.setSizeMode(ic.SIZE_MODE_MIDDLE));return c};this.protectedCreateWidgetUi=function(){return new Wa};this.getMinSize=function(){return[100,ic.askButtonHeight(ic.SIZE_MODE_SMALL)]};this.getSuggestSize=function(){return[320,
ic.askButtonHeight(ic.SIZE_MODE_MIDDLE)]};this.createPropertyPanel=function(){return new Fb}},function(){lb.call(this);Jb.call(this);var a=this.protectedMethod;a.setTypeName(Sa.WidgetType_F7);a.setTypeDisplayName(f.get("widgetF7","\u5f39\u7a97\u9009\u62e9\u5668"));a.setIconFileName("widget_f7");this.protectedCreateWidgetModel=function(b){return new Oc};this.protectedCreateWidgetUi=function(){return new ta};this.getSuggestSize=function(){return[180,25]};this.isHeightLockedAlways=function(){return!0};
this.createPropertyPanel=function(){return new wb}},function(){Rb.call(this);var a=this.protectedMethod;a.setTypeName(Sa.WidgetType_Calendar);a.setTypeDisplayName(f.get("widgetCalendar","\u65e5\u671f\u8303\u56f4"));a.setIconFileName("widget_calendar");this.protectedCreateWidgetModel=function(b){return new fd};this.protectedCreateWidgetUi=function(){return new Oa};this.createPropertyPanel=function(){return new ua};this.protectedCreateInitialDialog=function(){return new Pd}},function(){Rb.call(this);
var a=this.protectedMethod;a.setTypeName(Sa.WidgetType_CalendarYear);a.setTypeDisplayName(f.get("widgetCalendarYear","\u65e5\u671f-\u5e74"));a.setIconFileName("widget_calendaryear");this.protectedCreateWidgetModel=function(b){return new od};this.protectedCreateWidgetUi=function(){return new Qb};this.createPropertyPanel=function(){return new Sb};this.protectedCreateInitialDialog=function(){return new Cd}},function(){Rb.call(this);var a=this.protectedMethod;a.setTypeName(Sa.WidgetType_CalendarQuarter);
a.setTypeDisplayName(f.get("widgetCalendarQuarter","\u65e5\u671f-\u5e74\u5b63"));a.setIconFileName("widget_calendarquarter");this.protectedCreateWidgetModel=function(b){return new hd};this.protectedCreateWidgetUi=function(){return new Ka};this.createPropertyPanel=function(){return new hc};this.protectedCreateInitialDialog=function(){return new Dd}},function(){Rb.call(this);var a=this.protectedMethod;a.setTypeName(Sa.WidgetType_CalendarMonth);a.setTypeDisplayName(f.get("widgetCalendarMonth","\u65e5\u671f-\u5e74\u6708"));
a.setIconFileName("widget_calendarmonth");this.protectedCreateWidgetModel=function(b){return new id};this.protectedCreateWidgetUi=function(){return new $b};this.createPropertyPanel=function(){return new wc};this.protectedCreateInitialDialog=function(){return new Ed}},function(){Rb.call(this);var a=this.protectedMethod;a.setTypeName(Sa.WidgetType_CalendarDay);a.setTypeDisplayName(f.get("widgetCalendarDay","\u65e5\u671f-\u5e74\u6708\u65e5"));a.setIconFileName("widget_calendarday");this.protectedCreateWidgetModel=
function(b){return new pd};this.protectedCreateWidgetUi=function(){return new pc};this.createPropertyPanel=function(){return new ma};this.protectedCreateInitialDialog=function(){return new Fd}},function(){lb.call(this);var a=this.protectedMethod;a.setTypeName(Sa.WidgetType_PageTitleBar);a.setTypeDisplayName(f.get("widgetPageTitleBar","\u9875\u9762\u6807\u9898\u680f"));a.setIconFileName("widget_titlebar");this.getToolboxGroup=function(){return Qd};this.protectedCreateWidgetModel=function(b){return new Vb};
this.protectedCreateWidgetUi=function(){return new fb};this.createPropertyPanel=function(){return new ec};this.getMinSize=function(){return[40,20]};this.getSuggestSize=function(){return[320,60]};this.isWidthLockedAlways=function(){return!0};this.isHeightLockedAlways=function(){return!0};this.selectSource=function(b,c,m){c.setPosition(0,0);c.setSize(0,c.getHeight());m(!0)}},function(){lb.call(this);var a=this.protectedMethod;a.setTypeName(Sa.WidgetType_Panel);a.setTypeDisplayName(f.get("widgetPanel",
"\u7ec4\u5408\u5361\u7247"));a.setIconFileName("widget_panel");this.getToolboxGroup=function(){return Qd};this.protectedCreateWidgetModel=function(b){return new kd};this.protectedCreateWidgetUi=function(){return new Bc};this.getSuggestSize=function(){return[450,300]};this.getMinSize=function(){return[150,60]};this.createPropertyPanel=function(){return new qa}},function(){lb.call(this);var a=this.protectedMethod;a.setTypeName(Sa.WidgetType_TabbedContainer);a.setTypeDisplayName(f.get("widgetTabbedContainer",
"\u9875\u7b7e\u63a7\u4ef6"));a.setIconFileName("widget_tabbedall");this.getToolboxGroup=function(){return Qd};this.protectedCreateWidgetModel=function(m){var n=new Tc;m&&(n.addWidget(b(f.get("widgetOneTabbed","\u9875\u7b7e")),0),n.addWidget(b(f.get("widgetOneTabbed","\u9875\u7b7e")),0),n.addWidget(b(f.get("widgetOneTabbed","\u9875\u7b7e")),0));return n};var b=function(m){var n=new nd;n.setHeadText(m);n.setVisible(!1);return n};this.protectedCreateWidgetUi=function(){return new yc};this.getSuggestSize=
function(){return[450,300]};this.getMinSize=function(){return[150,90]};this.getMargin=function(){return 5};this.createCustomDesignHandlerJqUi=function(m,n,x,C){return(new Ta(m,C)).createJqUi(n,x,m)};this.createPropertyPanel=function(){return new ea};this.createOutlineMenu=function(m,n,x,C,Z){m.addItemModel(Ua.createActionMenuItem(f.get("appendOneTabbed","\u6dfb\u52a0\u9875\u7b7e"),function(P){c(n,C,x,Z)}));return!0};var c=function(m,n,x,C){var Z=f.get("appendOneTabbed","\u6dfb\u52a0\u9875\u7b7e"),
P=f.get("tabbedHeadText","\u663e\u793a\u6587\u5b57"),O=new Id;O.setCaption(Z,P);O.setEmptyEnabled(!1);O.setMaxLength(40);O.setText("",function(F,Q){F&&(F=new nd,F.setHeadText(Q),F.setVisible(!1),Q=Jc.getInstance(F.getWidgetTypeName()),n.allocateNameForNewWidget(F,Q),Q=new ie,Q.setCaption(f.get("appendOneTabbed","\u6dfb\u52a0\u9875\u7b7e")),Q.setValue(x,F),C.perform(Q))});O.showDialogRightAnchorTo(m)}},function(){lb.call(this);var a=this.protectedMethod;a.setTypeName(Sa.WidgetType_OneTabbed);a.setTypeDisplayName(f.get("widgetOneTabbed",
"\u9875\u7b7e"));a.setIconFileName("widget_tabbedone");this.getToolboxGroup=function(){return null};this.protectedCreateWidgetModel=function(b){return new nd};this.protectedCreateWidgetUi=function(){return new Qc};this.createPropertyPanel=function(){return new ha};this.isWidthLockedAlways=function(){return!0};this.isHeightLockedAlways=function(){return!0};this.createCustomDesignHandlerJqUi=function(b,c,m,n){m-=b.getY();return(new Ta(b.getParent(),n)).createJqUi(c,m,b)}},function(){lb.call(this);var a=
this.protectedMethod;a.setTypeName(Sa.WidgetType_ProgramableCard);a.setTypeDisplayName(f.get("widgetProgramableCard","\u7f16\u7a0b\u5f0f\u5361\u7247"));a.setIconFileName("widget_programable");this.isSupported=function(){return za.getProgramableCardExecutor()?!0:!1};this.getToolboxGroup=function(){return Rd};this.protectedCreateWidgetModel=function(b){return new Hc};this.protectedCreateWidgetUi=function(){return new db};this.getSuggestSize=function(){return[320,190]};this.selectSource=function(b,c,
m){za.getWidgetSourceSelector().selectProgramableCard(null,function(n){n?(c.setReferenceCustomMap(n),m(!0)):m(!1)})};this.createPropertyPanel=function(){return new R}},function(){lb.call(this);var a=this.protectedMethod;a.setTypeName(Sa.WidgetType_CosmicCustomCard);a.setTypeDisplayName(f.get("widgetCustomCard","\u81ea\u5b9a\u4e49\u5361\u7247"));a.setIconFileName("widget_customcard");this.isSupported=function(){return za.getCosmicCustomCardExecutor()?!0:!1};this.getToolboxGroup=function(){return Rd};
this.protectedCreateWidgetModel=function(b){return new Nc};this.protectedCreateWidgetUi=function(){return new t};this.getSuggestSize=function(){return[320,190]};this.selectSource=function(b,c,m){za.getCosmicCustomCardSourceSelector()(null,function(n){n?(c.setEncodedModel(n),m(!0)):m(!1)})};this.createPropertyPanel=function(){return new T}},function(){lb.call(this);var a=this.protectedMethod;a.setTypeName(Sa.WidgetType_CloudhubSubscribes);a.setTypeDisplayName(f.get("widgetCloudhubSubscribes","\u4e91\u4e4b\u5bb6\u8ba2\u9605"));
a.setIconFileName("widget_cloudhub");this.isSupported=function(){return za.getCloudhubSubscribesExecutor()?!0:!1};this.getToolboxGroup=function(){return Rd};this.protectedCreateWidgetModel=function(b){return new dd};this.protectedCreateWidgetUi=function(){return new V};this.getSuggestSize=function(){return[320,190]};this.selectSource=function(b,c,m){za.getCloudhubSubscribesSourceSelector()(function(n){n||""===n?(c.setEncodedModel(n),m(!0)):m(!1)})};this.createPropertyPanel=function(){return new Y}}]);
Jc.registerUnknown(new function(){lb.call(this);this.protectedCreateWidgetModel=function(a){return new bd};this.protectedCreateWidgetUi=function(){return new Cb};this.createPropertyPanel=function(){return new sb}});kb.Situation_Designtime=1;kb.Situation_Runtime_Preview=16;kb.Situation_Runtime_Mobile=256;Mb.ACTION_ALL=65535;Mb.ACTION_FULLSCREEN=4096;Mb.ACTION_NONE=0;var Hd;Mb.hookDescriptionTipsDecorater=function(a){Hd=a};var Gd=new function(){Ub.call(this);this.getGroupName=function(){return"Content"};
this.getGroupDisplayName=function(){return f.get("groupContent","\u6570\u636e\u53ef\u89c6\u5316\u5185\u5bb9")}},Sd=new function(){Ub.call(this);this.getGroupName=function(){return"Filter"};this.getGroupDisplayName=function(){return f.get("groupFilter","\u7b5b\u9009\u5668")}},zd=new function(){Ub.call(this);this.getGroupName=function(){return"Common"};this.getGroupDisplayName=function(){return f.get("groupCommon","\u901a\u7528\u5185\u5bb9")}},Qd=new function(){Ub.call(this);this.getGroupName=function(){return"Container"};
this.getGroupDisplayName=function(){return f.get("groupContainer","\u5bb9\u5668")}},Rd=new function(){Ub.call(this);this.getGroupName=function(){return"BizSystem"};this.getGroupDisplayName=function(){return f.get("groupBizSystem","\u4e1a\u52a1\u7cfb\u7edf\u5185\u5bb9")}};Ga.KEY_VISUAL_DATA_PREPARED_SUCCESS="tagPrepared";Ga.KEY_VISUAL_DATA_PREPARED_ERROR="tagPreparingFailed";Ga.KEY_SELECTED="selected";Ga.KEY_SELECTED_BY_API=Ga.KEY_SELECTED+"_api";Ga.KEY_SELECTED_BY_MANUAL=Ga.KEY_SELECTED+"_manual";
Ga.KEY_PLAY="play";Ga.KEY_OUTPUT_PARAM_REFRESHABLE="outputParamRefreshable";Ga.KEY_OUTPUT_PARAM_VISUAL_UPDATABLE="outputParamVisualUpdatable";Ab.ACTION_EDIT=1;Ab.ACTION_ANALYSIS=2;Ab.ACTION_REFRESH=4;Ab.ACTION_FILTER=8;Ab.ACTION_INFO=32;Ab.ACTION_INSIGHT=64;Ab.STATE_PERFECT=0;Ab.STATE_REMOTE_ERROR=1;Ab.STATE_AUTO_REFRESHING=2;jb.ACTION_REFRESH=1;jb.ACTION_FILTER=2;bc.affectedTargetsToShortDisplay=function(a,b,c){for(var m="",n=0;n<b.getItemCount();n++){var x=b.getItem(n);if((c&x.getType())==x.getType()){var C=
[];var Z=C;if(x.isSettingComplete()){var P=a.searchWidgetByName(x.getTargetWidgetName());P?(Z.push(f.get("affectedTargetItem","\u201c#1\u201d").replace("#1",P.getDisplayName())),x=!0):(Z.push(f.get("affectedTargetNotExist","\u4e0d\u5b58\u5728\u7ec4\u4ef6\u201c#1\u201d").replace("#1",x.getTargetWidgetName())),x=!1)}else Z.push(f.get("affectedTargetIncomplete","\u8bbe\u7f6e\u4e0d\u5b8c\u6574")),x=!1;if(x)m+=C.join(""),m+=" ";else return C.join("")}}return m}})();(function(){function p(){var ma=this,qa,ea,ha,xa,Ha,Ia=!1,qb=256;this.setVisualWidgetEditableConfirmer=function(N){Ha=N};this.setHeightAnnouncer=function(N){xa=N};var ab=function(){ha||(ha=new Aa,ma.protectedInit(ha));return ha};this.protectedInit=function(N){throw Error("Override");};this.setPreviewContext=function(N){ab().setPreviewContext(N)};this.setFacadeCreator=function(N){ab().setFacadeCreator(N)};this.createJqPage=function(N){ea=$("<div>");ea.appendTo(N)};this.resize=function(){if(qa){var N=
[];ub(N)?(Ia=!0,N=N.pop(),ab().getWidgetUiObject(N).refreshDuringFullscreen()):ab().relayoutAll(qa.getPage())}};var ub=function(N){var M=!1;qa.getPage().traversalDescendents(function(H){var L=!1;H.hasBeenFullscreen()&&(L=M=!0,N&&N.push(H));return L});return M};this.setJsonModel=function(N,M){var H=new dc;qa=new E;try{qa.fromJsonObject(N,H)}catch(L){H.setError(!0),window.console&&console.error(L)}ma.protectedDecorateModel(qa);qa.addPropertyChangedListener(fc);M&&M(H);ab().changeSkin(qa,function(L){return L==
qa},function(){var L=qa.getPage();ab().clear();ab().create(L,ea,!1);L=ab().relayoutAll(L);xa&&xa(L);ea.parent().css("background-color",ea.css("background-color"));Db()});xb()};var Db=function(){Ha&&ab().traversalWidgetUiObjects(function(N){N.getModel().isInstanceOf(E.WidgetSuperType_BuiltinVisual)&&N.setVisualWidgetEditableConfirmer(Ha)})};this.protectedDecorateModel=function(N){};this.protectedUndecorateModel=function(N){};this.destroy=function(){ma.protectedUndecorateModel(qa);qa.getPage().traversalDescendents(function(N){ab().getWidgetUiObject(N).destroy()})};
this.getEnvironmentDescription=function(){var N=Ka.get("envBrowser","\u6d4f\u89c8\u5668\uff1a")+ta.getBrowserName()+" "+ta.getBrowserVersion(),M=Ka.get("envScreen","\u5168\u5c4f\u5206\u8fa8\u7387\uff1a");M+=window.screen.width;M=M+"*"+window.screen.height;M=M+" "+Ka.get("envScreenComment","\uff08\u5728\u6d4f\u89c8\u5668\u7f29\u653e100%\u7684\u60c5\u51b5\u4e0b\uff09");return N+"\r\n"+M};this.hasSlideshow=function(){var N=!1;qa.getPage().traversalDescendents(function(M){return M instanceof Rc&&M.isSlideshowEnabled()?
N=!0:!1});return N};this.slideshowPause=function(N){ab().traversalWidgetUiObjects(function(M){var H=M.getModel();H instanceof Rc&&H.isSlideshowEnabled()&&(N?M.slideshowPause(!0):H.isTopLevelSlideshow()&&M.slideshowPause(!1))})};this.setLayerCoverOthers=function(N){qb=N};var xb=function(){var N=[];qa.getPage().traversalDescendents(function(M){N.push(M.getWidgetTypeName())});eb.occur(eb.DSB_WIDGET_TYPE,N)},fc=function(N,M){if(M==E.KEY_RECT)ab().updateWidgetRect(N);else if(M==Rc.KEY_SWITCH_SUB){if(!N.hasBeenFullscreen()){var H=
ab().searchJqUiByModel(N.getParent());N=ea.parent();M=N.prop("scrollLeft");var L=M+N.prop("clientWidth"),A=N.prop("scrollTop"),I=A+N.prop("clientHeight"),J=[0,0];J=fa.upwardCoordinate(H[0],J,N[0]);H=J[0];J=J[1];var f={},aa=!1;if(H<M||H>L)aa=!0,f.scrollLeft=H;if(J<A||J>I)aa=!0,f.scrollTop=J;aa&&N.animate(f)}}else M==E.KEY_FULLSCREEN?(Ia&&!ub()&&(Ia=!1,ab().relayoutAll(qa.getPage())),rc(N),kc(N)):M==Rc.KEY_TABBED_SELECTED&&ab().intoTabbed(N)},rc=function(N){var M=N.hasBeenFullscreen();N.upToVisitPath(function(H){var L;
if(H==qa.getPage())H=ea.parent(),M&&(L=qb);else{var A=ea,I=H.getParent();I!=qa.getPage()&&(A=ab().getWidgetUiObject(I).getJqPhysicalContainer());H=ab().searchJqUiByModel(H,A);M&&(L=parseInt(H.css("z-index"))+1)}M?H.data("myLayer",parseInt(H.css("z-index"))):(L=H.data("myLayer"),H.removeData("myLayer"));H.css("z-index",L)})},kc=function(N){var M=N.hasBeenFullscreen();N=ab().searchJqUiByModel(N.getParent());fa.upwardSearch(N,$(document.body),function(H){if(M){var L=H.css("overflow");L&&H.data("myCutting",
L);H.css("overflow","visible")}else L=H.data("myCutting"),H.removeData("myCutting"),L&&H.css("overflow",L)})};this.protectedMethod={getDashboardModel:function(){return qa},getPageUiManager:ab}}function Wb(){p.call(this);var ma=this,qa=this.protectedMethod,ea,ha,xa={};this.protectedInit=function(ab){Ia(ab,ea);var ub=new Ba;ub.setDesigntime(!1);ab.hookWidgetCtrlProvider(ub)};this.protectedDecorateModel=function(ab){ab=ab.getPage();ha=ab.getExhibitionMode();ab.traversalDescendents(function(ub){xa[ub.getName()]=
[ub.getX(),ub.getY(),ub.getWidth(),ub.getHeight()]})};this.setCachedExhibitionMode=function(ab){ea=ab};this.getFreshExhibitionMode=function(){return ha};this.updateLayoutAdapter=function(ab){var ub=qa.getDashboardModel().getPage();ub.traversalDescendents(function(Db){var xb=xa[Db.getName()];Db.setPosition(xb[0],xb[1]);Db.setSize(xb[2],xb[3])});Ia(qa.getPageUiManager(),ab);ab=qb(ab);Ha(ab,ub);ma.resize()};this.reparseRelativeDate=function(){var ab=!1;qa.getPageUiManager().traversalWidgetUiObjects(function(ub){var Db=
ub.getModel();Db.isInstanceOf(E.WidgetSuperType_Calendar)&&Db.getRelativeModel()&&(ab=!0,ub.reparseRelativeDate())});return ab};var Ha=function(ab,ub){var Db=new ab;ub.setLayoutAdapter(Db);Db.initForParent(ub);for(var xb=0;xb<ub.getWidgetCount();xb++){var fc=ub.getWidget(xb);Db.initForChild(fc);fc.isContainer()&&Ha(ab,fc)}},Ia=function(ab,ub){ab.setLayoutAdapterCreator(function(){!ub&&(ub=ha);return new (qb(ub))})},qb=function(ab){var ub={};ub[E.ExhibitionMode_Full]=Ta;ub[E.ExhibitionMode_Fit]=Ga;
ub[E.ExhibitionMode_HFull]=Cb;ab=ub[ab];!ab&&(ab=Xa);return ab}}function kb(){p.call(this);var ma=this.protectedMethod,qa;this.protectedInit=function(ea){ea.setLayoutAdapterCreator(function(){return new jc});var ha=new Ya;ea.hookWidgetCtrlProvider(ha)};this.protectedDecorateModel=function(ea){ea=ea.getPage();ea.isMobileSkinActive()?qa=null:(qa=[ea.getSkin(),ea.getCustomCosmetic()],ea.setSkin(E.Skin_White),ea.traversalDescendents(function(ha){ha.setSkinActive(!1)}))};this.protectedUndecorateModel=
function(ea){qa&&(ea.getPage().setSkin(qa[0],qa[1]),ma.getPageUiManager().changeSkin(ea,function(ha){return!0},function(){}))}}function Mb(){var ma=this,qa,ea=function(){qa||(qa=ma.protectedCreateExhibition());return qa};this.protectedCreateExhibition=function(){throw Error("Override");};this.setRemoteImpl=function(ha){ea().setFacadeCreator(function(xa,Ha,Ia){return new ob(ha,xa,Ha,Ia)})};this.createJqUi=function(){var ha=$("<div>");ha.css("background-color","#fff");ea().createJqPage(ha);fa.layoutCtrlWithLRTB(ha,
0,0,null,0,0,null);return ha};this.resize=function(){ea().resize()};this.setJsonModel=function(ha,xa){ea().setJsonModel(ha,xa)};this.getEnvironmentDescription=function(){return ea().getEnvironmentDescription()};this.hasSlideshow=function(){return ea().hasSlideshow()};this.slideshowPause=function(ha){ea().slideshowPause(ha)};this.setVisualWidgetEditableConfirmer=function(ha){ea().setVisualWidgetEditableConfirmer(ha)};this.setLayerCoverOthers=function(ha){ea().setLayerCoverOthers(ha)};this.protectedMethod=
{getExhibition:ea}}function oc(){var ma=this,qa=new Hb,ea,ha,xa,Ha,Ia=function(){ea||(ea=ma.protectedCreateExhibition());return ea};this.protectedCreateExhibition=function(){throw Error("Override");};this.protectedCreateExhibitionOwner=function(Db){throw Error("Override");};this.setFacadeCreator=function(Db){Ia().setFacadeCreator(Db)};this.resize=function(){Ia().resize()};this.setJsonModel=function(Db){Ia().setJsonModel(Db)};this.createJqUi=function(Db){qa.addButton(qb,"btn_backward",Ka.get("backward",
"\u8fd4\u56de"));qa.addButton(function(){},"btn_preview",Ka.get("fullscreen","\u5168\u5c4f")).getJqUi().on("click",ab);Ra.addChangedListener(ub);ma.protectedInitToolbar(qa,Ia());ha=$("<div>");ha.css("overflow","auto");ha.addClass("dsb-previewer-contentpane");var xb=ma.protectedCreateExhibitionOwner(ha);Ia().setPreviewContext(Db);Ia().createJqPage(xb);Db=$("<div>");Db.addClass("dsb-previewer");Db.append(qa.getJqUi());Db.append(ha);return Db};this.protectedInitToolbar=function(Db,xb){};this.setBackwardListener=
function(Db){xa=Db};var qb=function(){Ra.removeChangedListener(ub);Ia().destroy();xa()},ab=function(){Ra.request(document.body)},ub=function(Db){null==Db&&Ha?(ha.css({top:"",bottom:""}),qa.getJqUi().css("display",""),Ha.remove(),Ha=null):Db==document.body&&(ha.css({top:0,bottom:0}),qa.getJqUi().css("display","none"),Ha=$("<div>"),Ha.text(Ka.get("quitFullscreen","\u9000\u51fa\u5168\u5c4f")),Ha.css({"z-index":65535,cursor:"pointer","line-height":"30px","text-align":"center","font-size":"14px",color:"#789",
"background-color":"rgba(128,128,128,0.2)"}),Ha.on("click",function(xb){Ra.exit()}),Ha.appendTo($(document.body)),fa.layoutCtrl(Ha,0,0,72,30))}}function Ub(){oc.call(this);this.protectedCreateExhibition=function(){return new Wb};this.protectedCreateExhibitionOwner=function(ma){return ma};this.protectedInitToolbar=function(ma,qa){ma.addButton(function(){var ea=new gb;ea.setOptionType(gb.OPTION_OK);ea.setTitle(Ka.get("currentEnvironment","\u5f53\u524d\u73af\u5883"));ea.setMessage(qa.getEnvironmentDescription());
ea.showDialog()},"btn_info",Ka.get("environment","\u73af\u5883"))}}function lb(){oc.call(this);this.protectedCreateExhibition=function(){return new kb};this.protectedCreateExhibitionOwner=function(qa){var ea=$("<div>");ea.css({"background-color":"#000","border-radius":"12px"});ea.appendTo(qa);fa.layoutCtrl(ea,4,4,380,700);ma(ea);qa=$("<div>");qa.css({"background-color":"#000","border-radius":"4px"});qa.appendTo(ea);fa.layoutCtrl(qa,375,150,8,60);qa=$("<div>");qa.css({"background-color":"#333","border-radius":"10px"});
qa.appendTo(ea);fa.layoutCtrl(qa,60,10,12,12);qa=$("<div>");qa.css({"background-color":"#222","border-radius":"4px"});qa.appendTo(ea);fa.layoutCtrl(qa,160,12,60,8);qa=$("<div>");qa.text(Ka.get("preview","\u9884\u89c8"));qa.css({"text-align":"center","line-height":"40px","font-size":"14px",color:"#333","background-color":"#fff","border-bottom":"1px solid #ccc"});qa.appendTo(ea);fa.layoutCtrlWithLRTB(qa,10,10,null,30,null,39);qa=$("<div>");qa.appendTo(ea);fa.layoutCtrlWithLRTB(qa,10,10,null,70,30,null);
return qa};var ma=function(qa){var ea=$("<div>");ea.css("transform-origin","left top");fa.layoutCtrlWithLRTB(ea,170,null,30,null,0,7);ea.appendTo(qa);var ha=$("<div>");ha.css("background-color",qa.css("background-color"));ha.appendTo(ea);fa.layoutCtrlWithLRTB(ha,14,0,null,0,0,null);ha=$("<div>");ha.css("background-color",qa.css("background-color"));ha.appendTo(ea);fa.layoutCtrlWithLRTB(ha,0,null,14,null,0,2);var xa=!1;ea.on("mouseenter",function(Ha){xa=!xa;ea.css({transform:xa?"rotate(40deg)":"",
transition:"0.2s"})})}}function Jb(){this.initForParent=function(ma){throw Error("Override");};this.initForChild=function(ma){throw Error("Override");};this.relayoutPage=function(ma,qa){throw Error("Override");};this.relayout=function(ma,qa,ea){throw Error("Override");}}function Rb(){Jb.call(this);var ma;this.initForParent=function(qa){qa.isInstanceOf(E.WidgetSuperType_CompositeContainer)||(ma=new Qb,ma.setDesigningSize(qa.getClientWidth(),qa.getClientHeight()))};this.initForChild=function(qa){ma&&
ma.appendBlock(qa.getName(),qa.getX(),qa.getY(),qa.getWidth(),qa.getHeight(),qa.isWidthLocked(),qa.isHeightLocked())};this.protectedMethod={relayoutParentWidget:function(qa,ea,ha){ma&&ma.transformTo(ea,ha);for(ea=0;ea<qa.getWidgetCount();ea++){ha=qa.getWidget(ea);if(ma){var xa=ma.searchBlockRect(ha.getName());if(!xa)continue;ha.setRectangle(xa[0],xa[1],xa[2],xa[3])}ha.isContainer()&&ha.getLayoutAdapter().relayout(ha,ha.getClientWidth(),ha.getClientHeight())}}}}function Ta(){Rb.call(this);var ma=this,
qa=this.protectedMethod;this.relayoutPage=function(ea,ha){ha.parent().css("overflow","hidden");fa.layoutCtrl(ha,0,0,"100%","100%");var xa=ha.innerWidth();ha=ha.innerHeight();ma.relayout(ea,xa,ha);return ha};this.relayout=function(ea,ha,xa){qa.relayoutParentWidget(ea,ha,xa)}}function Ga(){Rb.call(this);var ma=this.protectedMethod;this.relayoutPage=function(qa,ea){ea.parent().css("overflow","hidden");fa.layoutCtrl(ea,0,0,"100%","100%");var ha=ea.innerWidth(),xa=ea.innerHeight(),Ha=0,Ia=0,qb=ha,ab=xa,
ub=qa.getClientWidth(),Db=qa.getClientHeight();ub/=Db;Db=qb/ab;ub>Db?(ab=Math.round(qb/ub),Ia=xa-ab>>1):ub<Db&&(qb=Math.round(ab*ub),Ha=ha-qb>>1);fa.layoutCtrl(ea,Ha,Ia,qb,ab);ma.relayoutParentWidget(qa,qb,ab);return xa};this.relayout=function(qa,ea,ha){ma.relayoutParentWidget(qa,ea,ha)}}function Cb(){Rb.call(this);var ma=this,qa=this.protectedMethod;this.relayoutPage=function(ea,ha){ha.parent().css({"overflow-x":"hidden","overflow-y":"auto"});var xa=ha.parent().prop("clientWidth");var Ha=ea.getClientWidth();
var Ia=ea.getClientHeight();Ha=parseInt(Ia*xa/Ha);fa.layoutCtrl(ha,0,0,xa,Ha);ma.relayout(ea,xa,Ha);return Ha};this.relayout=function(ea,ha,xa){xa=ea.getClientWidth();var Ha=ea.getClientHeight();xa=parseInt(Ha*ha/xa);qa.relayoutParentWidget(ea,ha,xa)}}function Xa(){Jb.call(this);var ma=this;this.initForParent=function(qa){};this.initForChild=function(qa){};this.relayoutPage=function(qa,ea){ea.parent().css("overflow","auto");var ha=qa.getClientWidth(),xa=qa.getClientHeight();fa.layoutCtrl(ea,0,0,ha,
xa);ma.relayout(qa,-1,-1);return xa};this.relayout=function(qa,ea,ha){for(ea=0;ea<qa.getWidgetCount();ea++)ha=qa.getWidget(ea),ha.setRectangle(ha.getX(),ha.getY(),ha.getWidth(),ha.getHeight()),ha.isContainer()&&ha.getLayoutAdapter().relayout(ha,ha.getClientWidth(),ha.getClientHeight())}}function jc(){Jb.call(this);var ma;this.initForParent=function(ha){ha.getTopPage().isMobileDesired()&&(ma=new Cb,ma.initForParent(ha))};this.initForChild=function(ha){ma&&ma.initForChild(ha)};this.relayoutPage=function(ha,
xa){if(ma)return ma.relayoutPage(ha,xa);xa.parent().css({"overflow-x":"hidden","overflow-y":"auto"});var Ha=xa.parent().prop("clientWidth");ha=qa(ha,Ha,6,6);fa.layoutCtrl(xa,0,0,Ha,ha);return ha};this.relayout=function(ha,xa,Ha){if(ma)ma.relayout(ha,xa,Ha);else return qa(ha,xa,0,6)};var qa=function(ha,xa,Ha,Ia){xa-=2*Ha;var qb=Ha,ab=0;if(ha.getTopPage().getMobileLayoutConverter()==E.MobileLayoutConverter_ByPosition)var ub=ea(ha);else{ub=[];for(var Db=0;Db<ha.getWidgetCount();Db++){var xb=ha.getWidget(Db);
ub.push(xb)}}for(Db=0;Db<ub.length;Db++){xb=ub[Db];if(xb.isContainer()){var fc=xb.getHeight();xb.setSize(xa,fc);var rc=xb.getClientWidth();fc=xb.getLayoutAdapter().relayout(xb,rc,fc);xb.setClientSize(rc,fc);rc=xb.getHeight();xb instanceof bc&&(qb=0)}else xb.isInstanceOf(E.WidgetSuperType_BuiltinVisual)||xb instanceof Xb||xb instanceof Mc||xb instanceof Kc?rc=xb.isHeightLocked()?xb.getHeight():parseInt(.618*xa):xb instanceof Ic?rc=xa*xb.getHeight()/xb.getWidth():xb.isInstanceOf(E.WidgetSuperType_WithLabel)?
xb.getFrontLabel()?(xb.setFrontLabelPosition("top"),rc=50):rc=32:rc=xb.getHeight();xb.setRectangle(Ha,qb,xa,rc);ab=ha instanceof Rc?Math.max(ab,ha.getHeadHeight()+rc+Ia):qb+=rc+Ia}return ab},ea=function(ha){for(var xa=null,Ha=[],Ia=[],qb=0;qb<ha.getWidgetCount();qb++){var ab=ha.getWidget(qb);ab.isEldestSon()?xa=ab:ab.isInstanceOf(E.WidgetSuperType_WithLabel)?Ha.push(ab):Ia.push(ab)}ha=function(ub,Db){var xb=ub.getY()-Db.getY();return 0==xb?ub.getX()-Db.getX():xb};Ha=Ha.sort(ha);Ia=Ia.sort(ha);Ha=
Ha.concat(Ia);xa&&Ha.splice(0,0,xa);return Ha}}function dc(){var ma=!1,qa=!1;this.setError=function(ea){ma=ea};this.isError=function(){return ma};this.setTooModern=function(ea){qa=ea};this.isTooModern=function(){return qa}}function Bb(ma,qa,ea){function ha(xa){var Ha,Ia,qb,ab,ub;(function(){Ha=$("<div>");Ha.addClass("sa-ctrl-common-modallayer");Ha.appendTo($(document.body));Ha.on("click",function(fc){Db()});Ia=$("<div>");Ia.addClass("dsb-toolbar-dropdown-area");Ia.appendTo(Ha);Ia.css("max-height",
Math.floor(Ha.prop("clientHeight")-Ia.prop("offsetTop")-30));qb=$("<div>");qb.addClass("dsb-toolbar-dropdown-container");qb.appendTo(Ia);ab=$("<div>");ab.addClass("dsb-toolbar-dropdown-collapse");ab.appendTo(Ia);var xb=$("<div>");xb.text("<<");xb.addClass("dsb-toolbar-dropdown-collapse-text");xb.appendTo(ab)})();this.getJqContainer=function(){return qb};this.animateHeight=function(xb,fc){0===xb?Db():(xb+=ab.prop("offsetHeight"),Ia&&Ia.animate({height:xb},{duration:100,queue:!1,complete:fc}))};this.setCollapseListener=
function(xb){ub=xb};var Db=function(){Ia&&(Ia.animate({height:0},function(){Ha.remove()}),Ia=null,ub&&ub())}}this.setCurrentName=function(xa){qa.setCurrentName(xa)};this.showShortPrompt=function(xa,Ha,Ia){qa.showShortPrompt(xa,Ha,Ia)};this.setDirtyListener=function(xa){ea.hookDirtyListener(xa)};this.clearDirty=function(){ea.setDirty(!1)};this.isDirty=function(){return ea.isDirty()};this.insertToolbarButton=function(xa,Ha,Ia,qb){return ma.addButtonForHeadCustom(xa,Ha,Ia,qb)};this.appendToolbarButton=
function(xa,Ha,Ia,qb){return ma.addButtonForTailCustom(xa,Ha,Ia,qb)};this.insertToolbarSeperator=function(){ma.addSeperatorForHeadCustom()};this.insertToolbarMenu=function(xa,Ha,Ia,qb){return ma.addMenuButtonForHeadCustom(function(){return xa},Ha,Ia,qb)};this.appendToolbarMenu=function(xa,Ha,Ia,qb){return ma.addMenuButtonForTailCustom(function(){return xa},Ha,Ia,qb)};this.getWarningRuleHelper=function(){return ea.getWarningRuleHelper()};this.showModalUi=function(xa){return new ha(xa.getJqUi())}}function Hb(){var ma=
new yc,qa,ea=$("<div>"),ha=$("<div>"),xa=$("<div>");this.getJqUi=function(){qa||(qa=ma.getJqUi(),qa.addClass("dsb-toolbar"),Ha(ea),Ha(ha),Ha(xa));return qa};this.refresh=function(){ma.refresh()};this.addSeperator=function(){ma.appendSeperator(ha)};this.addSeperatorForHeadCustom=function(){ma.appendSeperator(ea)};this.addButton=function(qb,ab,ub,Db){return Ia(ha,!1,qb,ab,ub,Db)};this.addButtonForHeadCustom=function(qb,ab,ub,Db){return Ia(ea,!1,qb,ab,ub,Db)};this.addButtonForTailCustom=function(qb,
ab,ub,Db){return Ia(xa,!1,qb,ab,ub,Db)};this.addMenuButton=function(qb,ab,ub,Db){return Ia(ha,!0,qb,ab,ub,Db)};this.addMenuButtonForHeadCustom=function(qb,ab,ub,Db){return Ia(ea,!0,qb,ab,ub,Db)};this.addMenuButtonForTailCustom=function(qb,ab,ub,Db){return Ia(xa,!0,qb,ab,ub,Db)};var Ha=function(qb){qb.css({"float":"left",position:"relative",height:"100%"});qb.appendTo(qa)},Ia=function(qb,ab,ub,Db,xb,fc){qb=ma.createButton(qb,ab,ub,xb,fc);qb.setIconSetter(function(rc,kc){Lb.background(rc,kc)});qb.setIconName(Db);
return qb}}function Da(){var ma,qa,ea,ha,xa;this.getJqUi=function(){ma||(ma=$("<div>"),ma.addClass("dsb-statusbar"),qa=$("<span>"),qa.addClass("dsb-statusbar-name"),qa.appendTo(ma),ea=$("<span>"),ea.addClass("dsb-statusbar-dirtystate"),ea.appendTo(ma),ha=$("<span>"),ha.addClass("dsb-statusbar-prompt"),ha.appendTo(ma));return ma};this.setCurrentName=function(Ia){qa.text(Ia)};this.showDirtyState=function(Ia){ea.text(Ia?"*":"")};this.showShortPrompt=function(Ia,qb,ab){clearTimeout(xa);ha.text(Ia);ha.css("color",
ab?ab:"");if(qb){var ub=0,Db=function(){if(6<ub)Ha();else{if(0==ub%2){ha.text(Ia);var xb=650}else ha.text(""),xb=350;xa=setTimeout(Db,xb);ub++}};Db()}else Ha()};var Ha=function(){xa=setTimeout(function(){ha.text("")},5E3)}}function Eb(){var ma=this,qa,ea,ha,xa,Ha,Ia;this.setGlobalDependence=function(qb){qa=qb};this.updateDashboardModel=function(){if(xa){var qb=qa.getDashboardModel();xa.setDashboardModel(qb);Ia.setDashboardModel(qb,function(){xa.getWidgetSelectedModel().setSelected(qb.getPage())})}};
this.resize=function(){ea.resize();Ia.requestWidgetsRepainting()};this.getJqUi=function(){if(!ea){var qb=new Qa,ab=new Ca;ha=new rb;ha.setDragingHandler(qb);xa=new cc;xa.setGlobalDependence(qa);xa.setWidgetSelectedModel(ab);Ha=new Ab;Ha.setGlobalDependence(qa);Ha.setWidgetSelectedModel(ab);Ia=new Va;Ia.setGlobalDependence(qa);Ia.setWidgetSelectedModel(ab);Ia.setDragingHandler(qb);qb=new Pa;qb.setHorizontalSplit(!1);qb.setSplitLineWide(8);qb.setResizeMode(Pa.RESIZE_MODE_FIRST_FIXED);qb.setFirstSize(360,
60,600);qb.setSecondSize(-1,60,-1);qb.setFirstChild(Pa.createChildWrapper(ha.getJqUi()));qb.setSecondChild(Pa.createChildWrapper(xa.getJqUi()));ab=new Pa;ab.setHorizontalSplit(!0);ab.setSplitLineWide(8);ab.setResizeMode(Pa.RESIZE_MODE_SECOND_FIXED);ab.setFirstSize(-1,120,-1);ab.setSecondSize(220,80,600);ab.setFirstChild(Pa.createChildWrapper(Ia.getJqUi()));ab.setSecondChild(Pa.createChildWrapper(Ha.getJqUi()));ea=new Pa;ea.setHorizontalSplit(!0);ea.setSplitLineWide(8);ea.setResizeMode(Pa.RESIZE_MODE_FIRST_FIXED);
ea.setFirstSize(206,60,640);ea.setSecondSize(-1,600,-1);ea.setFirstChild(qb);ea.setSecondChild(ab);ea.getJqUi().addClass("dsb-main-body");ma.updateDashboardModel()}return ea.getJqUi()};this.collectWidgetsContextForPreview=function(){return Ia.collectWidgetsContextForPreview()};this.requestSelectingWidget=function(qb){xa.getWidgetSelectedModel().setSelected(qb)}}function Ca(){var ma=null,qa=[];this.addChangedListener=function(ea){qa.push(ea)};this.setSelected=function(ea){if(ma!=ea){var ha=ma;ea=ma=
ea;for(var xa=0;xa<qa.length;xa++)(0,qa[xa])(ha,ea)}};this.getSelected=function(){return ma}}function vb(){var ma=null,qa;this.putByCut=function(ea){ma=ea;qa=!1};this.putByCopy=function(ea){ma=ea;qa=!0};this.isCopying=function(){return qa};this.pickToPasteByCut=function(){var ea=ma;ma=null;return ea};this.getTarget=function(){return ma};this.hasNothing=function(){return null==ma}}function Kb(){var ma=this,qa;this.getJqUi=function(){if(!qa){qa=$("<div>");qa.addClass("dsb-workarea");var ea=$("<div>");
ea.addClass("dsb-workarea-title");ea.appendTo(qa);var ha=$("<div>");ha.addClass("dsb-workarea-title-text");ha.appendTo(ea);ea=$("<div>");ea.addClass("dsb-workarea-container");ea.appendTo(qa);ma.protectedInitUi(ha,ea)}return qa};this.protectedInitUi=function(ea,ha){throw Error("Override");}}function rb(){Kb.call(this);var ma=$("<div>");this.setDragingHandler=function(ha){ha.bindDragContainer(ma,ea)};this.protectedInitUi=function(ha,xa){ha.text(Ka.get("toolboxAreaTitle","\u5de5\u5177\u7bb1"));ha=qa();
var Ha={};ma.css({"overflow-x":"hidden","overflow-y":"auto"});fa.layoutCtrlWithLRTB(ma,0,0,null,0,0,null);for(var Ia=ec.getToolboxInstances(),qb=0;qb<Ia.length;qb++){var ab=Ia[qb],ub=ab.getToolboxGroup();if(ub){var Db=Ha[ub.getGroupName()];if(!Db){Db=$("<div>");Db.addClass("dsb-toolbox-group");var xb=$("<div>");xb.addClass("dsb-toolbox-group-title");xb.text(ub.getGroupDisplayName());xb.appendTo(Db);Ha[ub.getGroupName()]=Db;Db.appendTo(ma)}ub=void 0;xb=ab;var fc=ha;ab=$("<div>");ab.addClass("dsb-toolbox-widget");
ab.data("model",xb);var rc=$("<div>");rc.addClass("dsb-toolbox-widget-icon");Lb.background(rc,xb.getIconFileName());rc.appendTo(ab);var kc=$("<div>");kc.addClass("dsb-toolbox-widget-text");kc.appendTo(ab);var N=$.trim(xb.getTypeDisplayName());60<fc(N)&&(0<N.indexOf(" ")?ub=N.split(" "):(ub=N.length>>1,ub=[N.substr(0,ub),N.substr(ub)]));if(ub){for(N=0;N<ub.length;N++){fc=ub[N];var M=$("<div>");M.css("line-height","14px");M.text(fc);M.appendTo(kc)}kc.css("bottom",0);kc.css("height",14*ub.length)}else kc.text(N);
xb.isReleased()||(rc.addClass("dsb-toolbox-widget-icon_unreleased"),kc.addClass("dsb-toolbox-widget-text_unreleased"),ub=$("<div>"),ub.addClass("dsb-toolbox-widget-unreleased"),Lb.background(ub,"widget_unreleased"),ub.appendTo(ab));ab.appendTo(Db)}}ma.appendTo(xa);ha(null)};var qa=function(){var ha=new Oa;ha.setFontSize(pc.getFontSize());return function(xa){return null===xa?(ha.destroy(),0):ha.measureWidth(xa)}},ea=function(ha){return(ha=fa.upwardSearchHasClass(ha,ma,"dsb-toolbox-widget"))?ha.data("model"):
null}}function cc(){Kb.call(this);var ma=this,qa,ea,ha,xa,Ha,Ia=!0,qb=!1,ab,ub,Db,xb;this.setDashboardModel=function(G){ea&&ea.removeChildrenChangedListener(A);ea&&ea.removePropertyChangedListener(I);ea=G;ea.addChildrenChangedListener(A);ea.addPropertyChangedListener(I);Ha&&fc()};this.setGlobalDependence=function(G){qa=G};this.setWidgetSelectedModel=function(G){ha=G;ha.addChangedListener(f)};this.getWidgetSelectedModel=function(){return ha};this.protectedInitUi=function(G,D){G.text(Ka.get("outlineAreaTitle",
"\u5927\u7eb2"));ab=new sb;ab.setText("\u2191");ab.setTooltips(Ka.get("moveUp","\u4e0a\u79fb"));ab.addActionListener(e);ub=new sb;ub.setText("\u2193");ub.setTooltips(Ka.get("moveDown","\u4e0b\u79fb"));ub.addActionListener(e);ab.getJqUi().appendTo(G);ub.getJqUi().appendTo(G);fa.layoutCtrlWithLRTB(ab.getJqUi(),null,22,20,2,2,null);fa.layoutCtrlWithLRTB(ub.getJqUi(),null,2,20,2,2,null);Ha=new fb;Ha.setBorderVisible(!1);Ha.setToggleSelectingEnabled(!1);Ha.setCustomItemPainter(rc);Ha.setCustomSelectedsPainter(kc);
Ha.addSelectedChangedListener(aa);G=Ha.getJqUi();G.appendTo(D);fa.layoutCtrlWithLRTB(G,0,0,null,0,0,null);ea&&fc()};var fc=function(){for(var G=[],D=[ea.getPage()];0<D.length;){var l=D.pop();G.push(l);if(l.isContainer())for(var h=l.getWidgetCount()-1;0<=h;h--){var u=l.getWidget(h);D.push(u)}}Ha.setItemModels(G)},rc=function(G,D){G.attr("name","ol_"+D.getName());for(var l=-1,h=D;h;)l++,h=h.getParent();l*=18;h=D.getParent()?!1:!0;var u=ec.getInstance(D.getWidgetTypeName()),U=$("<div>");U.addClass("dsb-outline-listitem-icon");
U.data("myIconName",u.getIconFileName()+"_min");U.appendTo(G);u=$("<div>");u.addClass("dsb-outline-listitem-text");u.appendTo(G);var da=$("<div>");da.addClass("dsb-outline-listitem-op");da.text("...");da.hide();da.appendTo(G);U.css("left",l+"px");u.css("left",l+20+"px");N(G,!1);M(D,u);!h&&H(D,G);da.data("widget",D);G.on("mouseenter",z);G.on("mouseleave",w);da.on("click",B)},kc=function(G,D){for(var l=0;l<G.length;l++){var h=G[l];N(h,!1)}for(l=0;l<D.length;l++)h=D[l],N(h,!0)},N=function(G,D){G=G.children().first();
var l=G.data("myIconName");Lb.background(G,l+(D?"_selected":""))},M=function(G,D){!D&&(D=L(G).find(".dsb-outline-listitem-text"));D.text(G.getDisplayName())},H=function(G,D){!D&&(D=L(G));var l=G.getParent(),h=D.children().first(),u=h.find(".dsb-outline-listitem-icon_alarm"),U=l.getClientWidth(),da=l.getClientHeight();G.getX()+G.getWidth()>U||G.getY()+G.getHeight()>da?0==u.length&&(u=Na.createWarning(),u.addClass("dsb-outline-listitem-icon_alarm"),u.appendTo(h),h=Ka.get("outside","#1 \u8d85\u51fa\u5176\u6240\u5728\u5bb9\u5668 #2 \u7684\u8303\u56f4\u3002"),
h=h.replace("#1",G.getDisplayName()),h=h.replace("#2",l.getDisplayName()),D.attr("title",h)):(u.remove(),D.attr("title",null))},L=function(G){return Ha.getJqUi().find("[name=ol_"+G.getName()+"]")},A=function(G,D,l){fc();G==E.KEY_MOVE_CHILD&&q()},I=function(G,D){D==E.KEY_PAGE_SIZE||D==E.KEY_RECT?(D!=E.KEY_PAGE_SIZE&&H(G),J(G)):D==E.KEY_PAGE_UNIFIED_CARD?G.traversalDescendents(function(l){J(l)}):D==E.KEY_CARD_SURFACE&&G.isContainer()?G.traversalMeAndDescendents(function(l){J(l)}):D==E.KEY_CARD_TITLE||
D==nc.KEY_FULLSCREEN_ALLOWED?J(G):D==E.KEY_DISPLAY_NAME?M(G):D==Rc.KEY_SWITCH_SUB&&ha.setSelected(G)},J=function(G){if(G.isContainer())for(var D=0;D<G.getWidgetCount();D++){var l=G.getWidget(D);H(l)}},f=function(G,D){qb||(Ia=!1,G=D?[D]:[ea.getPage()],Ha.setSelecteds(G),Ha.scrollSelectedToVisible(),Ia=!0);for(G=[];D&&D!=ea.getPage();)G.push(D),D=D.getParent();for(;0<G.length;)D=G.pop(),D.setVisible(!0);q()},aa=function(G,D,l){Ia&&(qb=!0,ha.setSelected(l[0]),qb=!1)},e=function(G){var D=G.getUserObject();
!D&&(D=0);D++;G.setUserObject(D);G==ab&&(D=-D);d(D);clearTimeout(Db);Db=setTimeout(function(){xb&&xb.remove();xb=null;var l=G.getUserObject();G.setUserObject(null);G==ab&&(l=-l);var h=ha.getSelected(),u=new y;u.setCaption(0>l?Ka.get("moveUp","\u4e0a\u79fb"):Ka.get("moveDown","\u4e0b\u79fb"));u.setValue(h,l);qa.getCommandManager().perform(u)},375)},d=function(G){var D=ha.getSelected();if(!xb){var l=L(D),h=l.prop("offsetTop")+(l.prop("offsetHeight")>>1);xb=$("<div>");xb.css({"background-color":l.css("background-color")});
xb.appendTo(l.parent());fa.layoutCtrl(xb,0,h,"100%",2)}l=D.getParent();h=l.getWidget(0).isEldestSon()?1:0;for(var u=l.getWidgetCount(),U,da=0;da<u;da++)if(l.getWidget(da)==D){U=da;break}U=Math.min(u-1,Math.max(h,U+G));D=l.getWidget(U);if(0<G)for(;D.isContainer()&&0<D.getWidgetCount();)D=D.getWidget(D.getWidgetCount()-1);D=L(D);h=D.prop("offsetTop")+(0<G?D.prop("offsetHeight"):0);xb.animate({top:h},250)},q=function(){var G=ha.getSelected();ab.setUserObject(null);ub.setUserObject(null);var D=G.getParent();
if(D&&!G.isEldestSon()){var l=D.getWidget(0);l.isEldestSon()?ab.setEnabled(D.getWidget(1)!=G):ab.setEnabled(l!=G);ub.setEnabled(D.getWidget(D.getWidgetCount()-1)!=G)}else ab.setEnabled(!1),ub.setEnabled(!1)},z=function(G){$(G.currentTarget).children().last().show()},w=function(G){$(G.currentTarget).children().last().hide()},B=function(G){var D=$(G.currentTarget),l=D.parent(),h=D.data("widget"),u=h.getParent()?!1:!0;if((G=D.data("menu"))&&G.isShowing())D.data("menu",null),G.hide();else{var U=new Qc;
W(U,l,h);u||(U.addItemModel(Gc.createActionMenuItem(Ka.get("rename","\u91cd\u547d\u540d"),function(da){Ea(l)})),h.getWidgetTypeName()!=E.WidgetType_PageTitleBar&&(U.addSeperator(),U.addItemModel(Gc.createActionMenuItem(Ka.get("cut","\u526a\u5207"),mb)),U.addItemModel(Gc.createActionMenuItem(Ka.get("copy","\u590d\u5236"),Gb))));h.isContainer()&&(G=Gc.createActionMenuItem(Ka.get("paste","\u7c98\u8d34"),zb),G.setEnabled(!ja().hasNothing()),U.addItemModel(G));u||(U.addSeperator(),U.addItemModel(Gc.createActionMenuItem(Ka.get("remove",
"\u5220\u9664"),Ua)));G=new Gc;G.setModel(U);G.setHideListener(function(){D.data("menu",null)});D.data("menu",G);u=ma.getJqUi();U=Math.max(80,Math.min(120,.8*u.innerWidth()));h=[-U-4,0];h=fa.upwardCoordinate(D[0],h,u[0]);G.setWidth(U);G.show(u,h[0],h[1],D,!0,[0,D.outerHeight()])}},W=function(G,D,l){ec.getInstance(l.getWidgetTypeName()).createOutlineMenu(G,D,l,ea,qa.getCommandManager())&&G.addSeperator()},ja=function(){xa||(xa=new vb);return xa},Ea=function(G){var D=ha.getSelected(),l=D.getDisplayName(),
h=Ka.get("displayName","\u540d\u79f0"),u=$.trim(D.getDisplayName()),U=new Fb;U.setCaption(l,h);U.setEmptyEnabled(!1);U.setMaxLength(40);U.setClosingChecker(function(da){return da!=u&&ea.isDisplayNameExist(da)?Ka.get("duplicatedDisplayName","\u540d\u79f0\u91cd\u590d"):null});U.setText(D.getDisplayName(),function(da,ya){da&&(da=new ia,da.setCaption(Ka.get("actionRename","\u4fee\u6539\u201c#1\u201d\u540d\u79f0\u4e3a\u201c#2\u201d").replace("#1",u).replace("#2",ya)),da.setMethod(D.getDisplayName,D.setDisplayName),
da.setValue(ya),qa.getCommandManager().perform(da))});U.showDialogRightAnchorTo(G)},Ua=function(G){G=ha.getSelected();var D=new r;D.setCaption(Ka.get("removeWidget","\u5220\u9664\u201c#1\u201d").replace("#1",G.getDisplayName()));D.setValue(G.getParent(),G);qa.getCommandManager().perform(D)},mb=function(G){G=ha.getSelected();var D=new R;D.setCaption(Ka.get("cutWidget","\u526a\u5207\u201c#1\u201d").replace("#1",G.getDisplayName()));D.setValue(G.getParent(),G);D.setClipboard(ja());qa.getCommandManager().perform(D)},
Gb=function(G){qa.showBlockingPrompt(Ka.get("copying","\u6b63\u5728\u590d\u5236\u7ec4\u4ef6"));G=ha.getSelected();sa(G,function(D){ja().putByCopy(D);qa.showBlockingPrompt(!1)})},zb=function(G){G=ha.getSelected();var D=ja().getTarget(),l=[];G.isCanContain(D,l)&&D.isCanBeContained(G,l)?ja().isCopying()?tb(G,D):va(G,D):(G=l.join(" "),D=new gb,D.setOptionType(gb.OPTION_OK),D.setMessage(G),D.showDialog())},tb=function(G,D){qa.showBlockingPrompt(Ka.get("pasting","\u6b63\u5728\u7c98\u8d34\u7ec4\u4ef6"));
sa(D,function(l){ea.reallocateNameForCopyPasteWidget(l);for(var h=0;h<G.getWidgetCount();h++){var u=G.getWidget(h);l.getX()==u.getX()&&l.getY()==u.getY()&&l.getWidth()==u.getWidth()&&l.getHeight()==u.getHeight()&&(l.setPosition(l.getX()+10,l.getY()+10),h=0)}h=new g;h.setCaption(Ka.get("pasteWidget","\u7c98\u8d34\u201c#1\u201d").replace("#1",l.getDisplayName()));h.setValue(G,l);qa.getCommandManager().perform(h);qa.showBlockingPrompt(!1)})},va=function(G,D){var l=qa.getCommandManager();l.compositeStart(Ka.get("pasteWidget",
"\u7c98\u8d34\u201c#1\u201d").replace("#1",D.getDisplayName()));D.isContainer()&&D.traversalMeAndDescendents(function(h){h.getDisplayName();h.getName()});ea.reallocateNameForCutPasteWidget(D,function(h,u){var U=new ia;U.setMethod(h.getDisplayName,h.setDisplayName);U.setValue(u);l.perform(U)},function(h,u){var U=new ia;U.setMethod(h.getName,h.setName);U.setValue(u);l.perform(U)});D=new T;D.setValue(G);D.setClipboard(ja());l.perform(D);l.compositeEnd()},sa=function(G,D){var l=ea.collectStylesToJsonObject(G),
h=G.toJsonObject(),u=ec.getInstance(G.getWidgetTypeName()).createWidgetModel();u.fromJsonObject(h);l&&ea.distributeStylesFromJsonObject(u,l);G=[];for(l=[u];0<l.length;){h=l.shift();if(h.isContainer())for(var U=0;U<h.getWidgetCount();U++)l.push(h.getWidget(U));h.isInstanceOf(E.WidgetSuperType_Referable)&&G.push(h)}var da=G.length;if(0==da)D(u);else{var ya=0;for(U=0;U<da;U++)G[U].copyReference(function(){ya++;ya==da&&D(u)})}}}function Ab(){Kb.call(this);var ma,qa,ea,ha;this.setGlobalDependence=function(Ha){ma=
Ha};this.protectedInitUi=function(Ha,Ia){Ha.text(Ka.get("propertyAreaTitle","\u5c5e\u6027"));ea=Ia};this.setWidgetSelectedModel=function(Ha){qa=Ha;qa.addChangedListener(xa)};var xa=function(Ha,Ia){ea.empty();ha&&ha.destroy();Ia&&(ha=ec.getInstance(Ia.getWidgetTypeName()).createPropertyPanel(),ha.setGlobalDependence(ma),ha.setWidget(Ia),Ha=ha.getJqUi(),fa.layoutCtrlWithLRTB(Ha,0,0,null,0,0,null),ea.append(Ha))}}function Va(){var ma=this,qa,ea,ha,xa,Ha=new jb,Ia,qb,ab,ub=!1;this.setGlobalDependence=
function(l){qa=l};this.setDashboardModel=function(l,h){ea&&ea.removePropertyChangedListener(va);ea&&ea.removeChildrenChangedListener(tb);ea=l;ea.addPropertyChangedListener(va);ea.addChildrenChangedListener(tb);Ha.changeSkin(ea,function(u){return u==ea},function(){N();h()})};this.setWidgetSelectedModel=function(l){ab=l;ab.addChangedListener(sa)};this.setDragingHandler=function(l){l.bindDropContainer(ma.getJqUi(),ja,Ea,Ua)};this.getJqUi=function(){if(!ha){Ha.setFacadeCreator(qa.createFacade);Ha.setWidgetJqUiDecorator(H);
Ha.setWidgetEditedListener(L);ha=$("<div>");ha.addClass("dsb-pagearea");ha.on("mousemove",xb);ha.on("mousedown",fc);ha.on("mouseleave",rc);var l=$("<div>");l.addClass("dsb-pagearea-page");l.appendTo(ha);xa=l;l=$("<div>");fa.layoutCtrl(l,0,0,1,1);l.appendTo(ha);ea&&N()}return ha};this.requestWidgetsRepainting=function(){Db().traversalDescendents(function(l){l.setRectangle(l.getX(),l.getY(),l.getWidth(),l.getHeight())})};this.collectWidgetsContextForPreview=function(){var l={};Ha.traversalWidgetUiObjects(function(h){var u=
h.getModel().getName();h=h.collectContextForPreview();l[u]=h});return l};var Db=function(){return ea.getPage()},xb=function(l){l=$(l.target);!fa.upwardSearchHasClass(l,ha,f())&&!fa.upwardSearchHasClass(l,ha,J())&&(l=(l=fa.upwardSearchHasClass(l,ha,A()))?Ha.getWidgetNameByJqUi(l):null,Ia!=l&&(Ia&&kc(Ia),Ia=l))&&(l=ea.searchWidgetByName(Ia),Ha.getWidgetUiObject(l).inside(),d()!=l&&aa(l))},fc=function(l){var h=$(l.target);if(!(fa.upwardSearchHasClass(h,ha,f())||fa.upwardSearchHasClass(h,ha,J())||fa.upwardSearchHasClass(h,
ha,A()))){var u=[l.offsetX,l.offsetY];u=fa.upwardCoordinate(h[0],u,ha[0]);l=$(l.currentTarget);u[0]>l.prop("scrollLeft")+l.prop("clientWidth")||u[1]>l.prop("scrollTop")+l.prop("clientHeight")||null!=d()&&e(Db())}},rc=function(l){Ia&&(kc(Ia),Ia=null)},kc=function(l){(l=ea.searchWidgetByName(l))&&Ha.getWidgetUiObject(l).outside();aa(null)},N=function(){Ha.clear();M();Ha.create(Db(),xa,!0)},M=function(){var l=Db().getWidth(),h=Db().getHeight();xa.css({width:l,height:h});xa.siblings().css({left:l+20,
top:h+20})},H=function(l,h){l.addClass(A());l.on("mousedown",function(u){d()!=h&&(u=fa.upwardSearchHasClass($(u.target),ha,A()),l[0]==u[0]&&z())})},L=function(){qa.setDirty(!0)},A=function(){return"dsb-pagearea-widget"},I=function(){return"dsb-pagearea-selecting"},J=function(){return"dsb-pagearea-selected"},f=function(){return"dsb-pagearea-preselect"},aa=function(l){if(qb){var h=Ha.searchJqUiByModel(qb);q(h,!1)}qb=l;l=null;qb&&(h=Ha.searchJqUiByModel(qb),q(h,!0),l=h);ha.find("."+f()).remove();l&&
w(qb,l,!0)},e=function(l){ab.setSelected(l)},d=function(){var l=ab.getSelected();return l==Db()?null:l},q=function(l,h){fa.upwardSearch(l,ha,function(u){u.hasClass(A())&&u.css("z-index",h?2:1)})},z=function(){if(qb){ub=!0;e(qb);ub=!1;qb=null;var l=ha.find("."+f());l.removeClass(f());l.addClass(J())}},w=function(l,h,u){var U=Pb.dip(Pb.DESIGN),da=ec.getInstance(l.getWidgetTypeName()),ya=!l.isWidthLockedAlways(da),oa=!l.isHeightLockedAlways(da),za=da.getMargin(),wa=l.getWidth(),Ib=l.getHeight(),qc=[za,
za];qc=fa.upwardCoordinate(h[0],qc,ha[0]);var Lc=qc[0];qc=qc[1];var Jc=[za+wa,za+Ib];Jc=fa.upwardCoordinate(h[0],Jc,ha[0]);za=Jc[0];Jc=Jc[1];var Sa=new ca;Sa.setJqPageArea(ha);Sa.setTarget(l,h);Sa.setActionListener(mb);h=ma.createOperatableTips(Lc,qc,za,Jc,wa,Ib,l.isMovable(),ya,oa,U,Sa,u);if(l=da.createCustomDesignHandlerJqUi(l,Lc,qc,e))l.addClass(u?f():J()),l.appendTo(h);h.appendTo(ha)};this.createOperatableTips=function(l,h,u,U,da,ya,oa,za,wa,Ib,qc,Lc){var Jc=$(document.createDocumentFragment()),
Sa=function(Hc,Nc,dd,cd){var Vc=$("<div>");!0===Lc?(Vc.addClass(f()),Vc.on("mousedown",function(pb){$(pb.currentTarget).hasClass(f())&&z()})):Vc.addClass(J());Vc.addClass(I());Vc.appendTo(Jc);fa.layoutCtrl(Vc,Hc,Nc,dd,cd);return Vc},bd=function(Hc,Nc){var dd=Nc[0];Nc=Nc[1];var cd=Ib[Pb.Key_Design_Unadjustable];Nc&&(wc.isBorder(Nc.getAnchorBorder(),wc.LEFT)?(Hc.css("border-left-width",Yb+"px"),!za&&Hc.css("border-left-color",cd)):wc.isBorder(Nc.getAnchorBorder(),wc.RIGHT)&&(Hc.css("border-right-width",
Yb+"px"),!za&&Hc.css("border-right-color",cd)),wc.isBorder(Nc.getAnchorBorder(),wc.TOP)?(Hc.css("border-top-width",Yb+"px"),!wa&&Hc.css("border-top-color",cd)):wc.isBorder(Nc.getAnchorBorder(),wc.BOTTOM)&&(Hc.css("border-bottom-width",Yb+"px"),!wa&&Hc.css("border-bottom-color",cd)));dd?(Hc.css("border-color",Ib[Pb.Key_Design_Adjustable]),qc&&(Hc.css("cursor",dd.getCursor()),qc.bindOperator(Hc,dd))):(Hc.css("border-color",cd),Hc.css("cursor","default"))},Vb=function(Hc,Nc,dd){return[za&&wa?Hc:za?Nc:
wa?dd:null,Hc]},Ob=function(Hc,Nc){return[Nc?Hc:null,Hc]},Yb=2,uc=l-Yb,Sc=l+(da>>1)-5;u-=6;var Cc=h-Yb;ya=h+(ya>>1)-5;U-=6;oa&&(l=Sa(l,h-10,da,10),l.addClass(I()+"-header"),l.css("background-color",Ib[Pb.Key_Design_ColorB]),!1===Lc&&B(l),qc&&qc.bindOperator(l,na.MOVE));bd(Sa(uc,Cc,6,6),Vb(na.NW,na.W,na.N));bd(Sa(u,Cc,6,6),Vb(na.NE,na.E,na.N));bd(Sa(uc,U,6,6),Vb(na.SW,na.W,na.S));bd(Sa(u,U,6,6),Vb(na.SE,na.E,na.S));bd(Sa(uc,ya,6,11),Ob(na.W,za));bd(Sa(u,ya,6,11),Ob(na.E,za));bd(Sa(Sc,Cc,11,6),Ob(na.N,
wa));bd(Sa(Sc,U,11,6),Ob(na.S,wa));oa&&(h=Sa(u-10,h-10,10,10),Lb.background(h,"minidelete"),h.addClass(I()+"-operate"),qc&&(h.css("cursor","pointer"),h.on("click",Gb)));return Jc};var B=function(l){!l&&(l=ha.find("."+I()+"-header"));l.css("cursor","move")},W=function(l,h,u){var U=!1,da={};Ha.traversalWidgetUiObjects(function(wa){var Ib=wa.getModel();if(Ib.isContainer()&&Ib.isCanContain(u)&&u.isCanBeContained(Ib)&&(wa=wa.getJqPhysicalContainer(),Ib=[0,0],Ib=fa.upwardCoordinate(wa[0],Ib,xa[0]),!(l<
Ib[0]||h<Ib[1]||(Ib=[wa.innerWidth(),wa.innerHeight()],Ib=fa.upwardCoordinate(wa[0],Ib,xa[0]),l>Ib[0]||h>Ib[1])))){Ib=fa.upwardSearchHasClass(wa,ha,A());var qc=Ha.getWidgetNameByJqUi(Ib);da[qc]=[Ib,wa];U=!0}});if(U){var ya=function(wa){for(var Ib=wa.getWidgetCount()-1;0<=Ib;Ib--){var qc=wa.getWidget(Ib);if(qc.isContainer()&&qc.isVisible()){var Lc=ya(qc);if(qc.isCanContain(u)&&u.isCanBeContained(qc)&&da[qc.getName()])return Lc?Lc:qc;if(Lc)return Lc}}return null},oa=ya(Db());if(oa){var za=da[oa.getName()];
return new la(oa,za[0],za[1])}}return Db().isCanContain(u)&&u.isCanBeContained(Db())?new la(Db(),xa,xa):null},ja=function(){var l=[0,0];l=fa.upwardCoordinate(ha[0],l,document.body);var h=[ha.prop("clientWidth"),ha.prop("clientHeight")];h=fa.upwardCoordinate(ha[0],h,document.body);var u=[0,0];u=fa.upwardCoordinate(xa[0],u,document.body);var U=[Db().getWidth(),Db().getHeight()];U=fa.upwardCoordinate(xa[0],U,document.body);return new function(da,ya,oa,za,wa,Ib){this.getLeft=function(){return da};this.getRight=
function(){return ya};this.getTop=function(){return oa};this.getBottom=function(){return za};this.getPageLeftAtBody=function(){return wa};this.getPageTopAtBody=function(){return Ib}}(Math.max(l[0],u[0]),Math.min(h[0],U[0]),Math.max(l[1],u[1]),Math.min(h[1],U[1]),u[0],u[1])},Ea=function(l,h,u,U){var da=fa.getCurrentTargetPosition(l);da=fa.upwardCoordinate(l.target,da,document.body);l=da[0];da=da[1];if(l<h.getLeft()||l>h.getRight()||da<h.getTop()||da>h.getBottom())return null;var ya=l-h.getPageLeftAtBody();
h=da-h.getPageTopAtBody();h=W(ya,h,U);if(!h)return null;ya=h.getContainerWidget();if(u!=ya){var oa=ec.getInstance(U.getWidgetTypeName());u=oa.getSuggestSize();U.setSize(u[0],u[1])}u=U.getWidth();var za=U.getHeight();if(!(u<=ya.getClientWidth()&&za<=ya.getClientHeight())){!oa&&(oa=ec.getInstance(U.getWidgetTypeName()));var wa=oa.getMinSize();oa=wa[0];for(wa=wa[1];(u>ya.getClientWidth()||za>ya.getClientHeight())&&!(u>>=1,za>>=1,u<oa||za<wa);)U.setSize(u,za)}oa=[0,0];oa=fa.upwardCoordinate(h.getJqPhysicalContainer()[0],
oa,document.body);l-=oa[0];da-=oa[1];l-=Math.min(160,parseInt(.2*U.getWidth()));da-=Math.min(90,parseInt(.2*U.getHeight()));oa=h.getContainerWidget().getClientWidth();ya=h.getContainerWidget().getClientHeight();l=l+U.getWidth()>oa?oa-U.getWidth():l;da=da+U.getHeight()>ya?ya-U.getHeight():da;U.setPosition(0>l?0:l,0>da?0:da);return h},Ua=function(l,h,u){var U=ec.getInstance(h.getWidgetTypeName());if(U.isReleased()){var da={},ya={};ea.allocateNameForNewWidget(h,U,da,ya);if(h.isInstanceOf(E.WidgetSuperType_CompositeContainer))for(var oa=
0;oa<h.getWidgetCount();oa++){var za=h.getWidget(oa),wa=ec.getInstance(za.getWidgetTypeName());ea.allocateNameForNewWidget(za,wa,da,ya)}U.selectSource(qa,h,function(Ib){Ib&&(Ib=new g,Ib.setCaption(Ka.get("addWidget","\u521b\u5efa\u201c#1\u201d").replace("#1",h.getDisplayName())),Ib.setValue(l,h),qa.getCommandManager().perform(Ib));u()})}else u()},mb=function(l,h,u,U,da){da=da==na.MOVE?Ka.get("moveWidget","\u79fb\u52a8\u201c#1\u201d\u4f4d\u7f6e"):Ka.get("resizeWidget","\u6539\u52a8\u201c#1\u201d\u5927\u5c0f");
da=da.replace("#1",d().getDisplayName());var ya=new Y;ya.setCaption(da);ya.setValue(d(),l,h,u,U);qa.getCommandManager().perform(ya)},Gb=function(){var l=new r;l.setCaption(Ka.get("removeWidget","\u5220\u9664\u201c#1\u201d").replace("#1",d().getDisplayName()));l.setValue(d().getParent(),d());qa.getCommandManager().perform(l)},zb=function(l){var h=xa;l!=Db()&&(h=Ha.getWidgetUiObject(l).getJqPhysicalContainer());return h},tb=function(l,h,u){if(l==E.KEY_ADD_CHILD)l=zb(h),Ha.addWidgetUi(u,l),e(u),Ha.parseWidgetsInputParams(Db());
else if(l==E.KEY_REMOVE_CHILD)Ha.removeWidgetUi(u),(u==d()||u.isContainer()&&u.isDescendentsContain(d()))&&e(Db()),Ha.parseWidgetsInputParams(Db());else if(l==E.KEY_MOVE_CHILD){u=$(document.createDocumentFragment());l=zb(h);for(var U=0;U<h.getWidgetCount();U++){var da=h.getWidget(U);da=Ha.searchJqUiByModel(da,l);da.detach();da.appendTo(u)}u.appendTo(l)}},va=function(l,h){h==E.KEY_RECT?Ha.isCreated()&&(h=Ha.updateWidgetRect(l),l==d()&&(ha.find("."+J()).remove(),w(l,h,!1),G(h))):h==E.KEY_PAGE_SIZE?
M():h==E.KEY_AFFECTED_TARGETS||h==E.KEY_FILTER_SOURCE?Ha.parseWidgetsInputParams(Db()):h==E.KEY_PAGE_SKIN?Ha.changeSkin(ea,function(u){return u==ea},function(){N()}):h==E.KEY_PAGE_BACKGROUND?(h=l==Db()?xa:Ha.searchJqUiByModel(l),Ha.updateBackgroundPicture(l,h),D()):h==E.KEY_PAGE_WATERMARK?(Ha.updateWatermark(Db()),D()):h==E.KEY_PAGE_UNIFIED_CARD&&D()},sa=function(l,h){ha.find("."+J()).remove();l&&l!=Db()&&(l=Ha.searchJqUiByModel(l),q(l,!1));h&&h!=Db()&&(l=Ha.searchJqUiByModel(h),q(l,!0),l&&(ub?B():
(w(d(),l,!1),G(l))))},G=function(l){var h=ha.prop("scrollLeft"),u=h+ha.prop("clientWidth"),U=ha.prop("scrollTop"),da=U+ha.prop("clientHeight"),ya=[0,0];ya=fa.upwardCoordinate(l[0],ya,ha[0]);var oa=ya[0]-20,za=ya[0]+l.prop("offsetWidth"),wa=ya[1]-20;l=ya[1]+l.prop("offsetHeight");ya={};var Ib=!1;if(oa<h||za>u)Ib=!0,ya.scrollLeft=oa;if(wa<U||l>da)Ib=!0,ya.scrollTop=wa;Ib&&ha.animate(ya)},D=function(){Ha.traversalWidgetUiObjects(function(l){l.getModel().isInstanceOf(E.WidgetSuperType_CardSurfaceAbout)&&
l.updateCardSurface()})}}function ba(){var ma;this.bindContext=function(ha){ma=ha};this.register=function(ha){ha.setCommunicationListener(qa)};this.unregister=function(ha){ha.setCommunicationListener(null)};var qa=function(ha,xa){var Ha=ha.getModel();Ha.getTopPage().traversalDescendents(function(Ia){Ha!=Ia&&ma.getWidgetUiObject(Ia).payAttentionTo(ha,xa)});ea(Ha,ha,xa)},ea=function(ha,xa,Ha){if(Ha==pa.KEY_SELECTED_BY_MANUAL&&(ha=ha.getAffectedTargets()))for(Ha=0;Ha<ha.getItemCount();Ha++){var Ia=ha.getItem(Ha);
if(Ia.getType()==E.AffectedType_Hotlink&&Ia.isSettingComplete()){var qb=Ia.getUsableUrl();"biz"==Ia.getMode()?(Ia=xa.getFilterSelectedValue().getText(),Bc.openNewTab(Ia,qb)):window.open(qb)}}}}function bb(){var ma=this,qa,ea,ha,xa={},Ha,Ia,qb;this.hookWidgetCtrlProvider=function(N){Ia=N};var ab=function(){Ia||(Ia=new Ba);return Ia};this.setFacadeCreator=function(N){ea=N};this.setWidgetJqUiDecorator=function(N){ha=N};this.changeSkin=function(N,M,H){var L=N.getPage();L.getSkin()==E.Skin_Custom?(L=L.getCustomCosmetic(),
N.setCurrentCosmeticModel(L),Pb.unpack(L),H()):ea(function(A){if(M(N)){var I=new $c;I.fromJsonObject(A);N.setCurrentCosmeticModel(I);Pb.unpack(I);H()}}).loadPresetCosmetic(L.getSkin())};this.clear=function(){ma.traversalWidgetUiObjects(function(N){N.destroy()});xa={};qa&&qa.empty()};this.create=function(N,M,H){qa=M;qa.css("background-color",Pb.getPageBackgroundColor());qa.css("cursor","default");rc(N);var L=$(document.createDocumentFragment());ma.protectedCreateChildrenUi(N,L);M.append(L);ma.parseWidgetsInputParams(N);
if(H)N.deepFirstTraversalDescendents(function(I){ub(I)});else{var A=new k;A.readyFor(N);N.deepFirstTraversalDescendents(function(I){A.isRunImmediately(I)?ub(I):(A.registDelayRun(I,ub),qb=A)})}};this.intoTabbed=function(N){qb&&(qb.requestRunImmediately(N)||(qb=null))};this.isCreated=function(){return qa?!0:!1};this.updateWidgetRect=function(N){var M=ec.getInstance(N.getWidgetTypeName()),H=ma.searchJqUiByModel(N);xb(N,H,M);return H};this.addWidgetUi=function(N,M){Db(N,M);N.isContainer()&&0<N.getWidgetCount()&&
(M=$(document.createDocumentFragment()),ma.protectedCreateChildrenUi(N,M),ma.getWidgetUiObject(N).getJqPhysicalContainer().append(M));ub(N);N.isContainer()&&0<N.getWidgetCount()&&N.deepFirstTraversalDescendents(ub)};this.removeWidgetUi=function(N){for(var M=[N];0<M.length;){var H=M.shift();fc().unregister(ma.getWidgetUiObject(H));var L=H.getName();xa[L].destroy();delete xa[L];if(H.isContainer())for(L=0;L<H.getWidgetCount();L++)M.push(H.getWidget(L))}ma.searchJqUiByModel(N).remove()};this.protectedCreateChildrenUi=
function(N,M,H){for(var L=0;L<N.getWidgetCount();L++){var A=N.getWidget(L);Db(A,M);if(A.isContainer()){var I=ma.getWidgetUiObject(A).getJqPhysicalContainer();ma.protectedCreateChildrenUi(A,I,H)}H&&H(A)}};var ub=function(N){ma.getWidgetUiObject(N).run(ea)},Db=function(N,M){var H=ec.getInstance(N.getWidgetTypeName()),L=H.createWidgetUi(N);L.setCtxApi(kc);xa[N.getName()]=L;fc().register(L);L=ma.protectedCreateWidgetJqUi(L,N,ab());L.css("z-index",1);N.isInstanceOf(E.WidgetSuperType_ContainerWithBackground)&&
ma.updateBackgroundPicture(N,L);ha&&ha(L,N);L.attr("name",N.getName());xb(N,L,H);L.appendTo(M)};this.protectedCreateWidgetJqUi=function(N,M,H){throw Error("Override");};this.getWidgetUiObject=function(N){return xa[N.getName()]};this.getWidgetUiObjectByName=function(N){return xa[N]};this.traversalWidgetUiObjects=function(N){for(var M in xa)if(N(xa[M]))break};var xb=function(N,M,H){H=H.getMargin();fa.layoutCtrl(M,N.getX()-H,N.getY()-H,N.getWidth()+2*H,N.getHeight()+2*H)};this.searchJqUiByModel=function(N,
M){N="[name='"+N.getName()+"']";return M?M.children(N).eq(0):qa.find(N)};this.getWidgetNameByJqUi=function(N){return N.attr("name")};var fc=function(){Ha||(Ha=new ba,Ha.bindContext(kc));return Ha};this.parseWidgetsInputParams=function(N){var M={};N.traversalDescendents(function(H){if(H.isInstanceOf(E.WidgetSuperType_FilterSimilary)){var L=H.getAffectedTargets();L&&L.reverse(H.getName(),M)}});N.traversalDescendents(function(H){if(H.isInstanceOf(E.WidgetSuperType_AffectedTarget)){H=H.getName();var L=
M[H];ma.getWidgetUiObjectByName(H).updateInputParams(L)}})};var rc=function(N){ma.updateBackgroundPicture(N,qa);ma.updateWatermark(N)};this.updateBackgroundPicture=function(N,M){$a.updateBackgroundPicture(N,M)};this.updateWatermark=function(N){qa.find(".dsb-page-watermark").remove();if(N=N.getWatermark()){var M=Pb.dip(Pb.DSB_PAGE)[Pb.Key_Page_WatermarkColor],H=25*Math.PI/180,L=document.createElement("canvas"),A=L.getContext("2d");A.font="14px "+pc.getFontName();var I=A.measureText(N).width,J=Math.max(84,
I*Math.sin(H)*2.5);L.width=Math.max(84,I*Math.cos(H)*2.5);L.height=J;A.font="14px "+pc.getFontName();A.rotate(-H);A.textBaseline="top";A.fillStyle=M;A.fillText(N,-I*(1-Math.cos(H)),I*Math.sin(H));M=L.toDataURL();N={"z-index":0};N["background-image"]="url("+M+")";M=$("<div>");M.addClass("dsb-page-watermark");M.css(N);M.appendTo(qa);fa.layoutCtrlWithLRTB(M,0,0,null,0,0,null)}};var kc={getWidgetUiObject:ma.getWidgetUiObject};this.protectedMethod={getWidgetCtrlProvider:ab,getJqPage:function(){return qa}}}
function jb(){bb.call(this);var ma;this.setWidgetEditedListener=function(qa){ma=qa};this.protectedCreateWidgetJqUi=function(qa,ea,ha){qa.setEditedListener(ma);return qa.createJqUi(ha)}}function Aa(){bb.call(this);var ma=this.protectedMethod,qa,ea;this.setPreviewContext=function(xa){qa=xa;ma.getWidgetCtrlProvider().setPreview(!0)};this.setLayoutAdapterCreator=function(xa){ea=xa};this.relayoutAll=function(xa){var Ha=xa.getLayoutAdapter();return Ha?Ha.relayoutPage(xa,ma.getJqPage()):0};var ha=this.protectedCreateChildrenUi;
this.protectedCreateChildrenUi=function(xa,Ha,Ia){Ia=ea();xa.setLayoutAdapter(Ia);Ia.initForParent(xa);ha(xa,Ha,function(qb){xa.getLayoutAdapter().initForChild(qb)})};this.protectedCreateWidgetJqUi=function(xa,Ha,Ia){qa&&(Ha=qa[Ha.getName()],xa.applyPreviewContext(Ha));return xa.createJqUi(Ia)}}function db(){var ma=16,qa=12,ea=12,ha=2*qa+40,xa=2*ea+20,Ha,Ia,qb,ab,ub,Db,xb,fc,rc,kc,N,M,H;this.prepare=function(va,sa){va.getTopPage().isMobileDesired()&&(ea=qa=ma=6);Ha=!va.isInstanceOf(E.WidgetSuperType_CardSimilary)&&
!(va instanceof bc);Ia=va.getClientWidth();qb=va.getClientHeight();var G=ec.getInstance(sa.getWidgetTypeName()).getMinSize();ab=G[0];ub=G[1];L(va,sa);xb=[];fc=[];rc=[];kc=[];for(G=0;G<va.getWidgetCount();G++){var D=va.getWidget(G);if(D!=sa){var l=D.getX(),h=D.getY(),u=l+D.getWidth();D=h+D.getHeight();for(var U=0;U<va.getWidgetCount();U++){var da=va.getWidget(U);if(G!=U&&da!=sa){var ya=da.getX(),oa=da.getY(),za=ya+da.getWidth();da=oa+da.getHeight();if(!(u<ya||za<l))if(da<h){var wa=h-da;wa<xa&&xb.push(new t(D,
h,wa,Math.min(l,ya),Math.max(u,za)))}else D<oa&&(wa=oa-D,wa<xa&&fc.push(new t(h,D,-wa,Math.min(l,ya),Math.max(u,za))));D<oa||da<h||(za<l?(wa=l-za,wa<ha&&rc.push(new t(u,l,wa,Math.min(h,oa),Math.max(D,da)))):u<ya&&(wa=ya-u,wa<ha&&kc.push(new t(l,u,-wa,Math.min(h,oa),Math.max(D,da)))))}}}}};var L=function(va,sa){Db=[];for(var G=0;G<va.getWidgetCount();G++){var D=va.getWidget(G);if(D!=sa){var l=D.getX(),h=D.getY(),u=l+D.getWidth();D=h+D.getHeight();l=new function(U,da,ya,oa){this.getX1=function(){return U};
this.getY1=function(){return da};this.getX2=function(){return ya};this.getY2=function(){return oa}}(l,h,u,D);Db.push(l)}}},A=function(va){return hc.isContains(M.getActionUnit(),va)},I=function(va){return wc.isBorder(M.getAnchorBorder(),va)},J=function(va,sa){return 8>Math.abs(va-sa)},f=function(){return N[0]+N[2]},aa=function(){return N[1]+N[3]};this.keepMinSizeLimited=function(va,sa){N=va;M=sa;(A(hc.WIDTH)||A(hc.WIDTH_NEGATIVE))&&N[2]<ab&&(A(hc.WIDTH_NEGATIVE)&&(va=ab-N[2],N[0]-=va),N[2]=ab);(A(hc.HEIGHT)||
A(hc.HEIGHT_NEGATIVE))&&N[3]<ub&&(A(hc.HEIGHT_NEGATIVE)&&(va=ub-N[3],N[1]-=va),N[3]=ub)};this.keepInsideContainer=function(va,sa){N=va;M=sa;va=N[0];sa=N[2];A(hc.X)?(va+sa>Ia&&(va=Ia-sa,N[0]=va),0>va&&(A(hc.WIDTH_NEGATIVE)&&(N[2]=sa- -va),N[0]=0)):A(hc.WIDTH)&&(N[2]=va<Ia&&va+sa>Ia?Ia-va:sa);va=N[1];sa=N[3];A(hc.Y)?(va+sa>qb&&(va=qb-sa,N[1]=va),0>va&&(A(hc.HEIGHT_NEGATIVE)&&(N[3]=sa- -va),N[1]=0)):A(hc.HEIGHT)&&(N[3]=va<qb&&va+sa>qb?qb-va:sa)};this.anchor=function(va,sa,G){H=va;M=sa;N=G;Ea();va=!1;
I(wc.LEFT)&&((va=w(N[0],0,0,qb,e)||B(N[0],N[1],aa(),"getX1","getY1","getY2",!1,e))||(va=I(wc.LEFT)?W(N[0],N[1],aa(),rc,e,mb,Gb)||ja(N[0],N[1],aa(),"getX2","getY1","getY2",qa,e,Gb):!1),!(va=va||B(N[0],N[1],aa(),"getX2","getY1","getY2",!0,e))&&(va=Ha)&&(va=ma,J(N[0],va)?(e(va,ma,qb-ma),va=!0):va=!1));!va&&I(wc.RIGHT)&&((va=w(f(),Ia,0,qb,d)||B(f(),N[1],aa(),"getX2","getY1","getY2",!1,d))||(va=I(wc.RIGHT)?W(f(),N[1],aa(),kc,d,Gb,mb)||ja(f(),N[1],aa(),"getX1","getY1","getY2",-qa,d,mb):!1),va||B(f(),N[1],
aa(),"getX1","getY1","getY2",!0,d)||!Ha||(va=Ia-ma,J(f(),va)&&d(va,ma,qb-ma)));va=!1;I(wc.TOP)&&((va=w(N[1],0,0,Ia,q)||B(N[1],N[0],f(),"getY1","getX1","getX2",!1,q))||(va=I(wc.TOP)?W(N[1],N[0],f(),xb,q,zb,tb)||ja(N[1],N[0],f(),"getY2","getX1","getX2",ea,q,tb):!1),!(va=va||B(N[1],N[0],f(),"getY2","getX1","getX2",!0,q))&&(va=Ha)&&(va=ma,J(N[1],va)?(q(va,ma,Ia-ma),va=!0):va=!1));!va&&I(wc.BOTTOM)&&((va=w(aa(),qb,0,Ia,z)||B(aa(),N[0],f(),"getY2","getX1","getX2",!1,z))||(va=I(wc.BOTTOM)?W(aa(),N[0],f(),
fc,z,tb,zb)||ja(aa(),N[0],f(),"getY1","getX1","getX2",-ea,z,zb):!1),va||B(aa(),N[0],f(),"getY1","getX1","getX2",!0,z)||!Ha||(va=qb-ma,J(aa(),va)&&z(va,ma,Ia-ma)))};this.abort=function(){H&&Ea()};var e=function(va,sa,G){var D=N[2];I(wc.RIGHT)||(D+=N[0]-va);if(0>va||va+D>Ia)return!1;I(wc.RIGHT)||(N[2]=D);N[0]=va;mb(va,sa,G);return!0},d=function(va,sa,G){var D=N[2];if(!I(wc.LEFT)){var l=f()-va;D-=l}l=va-D;if(0>l||va>Ia)return!1;I(wc.LEFT)||(N[2]=D);N[0]=l;Gb(va,sa,G);return!0},q=function(va,sa,G){var D=
N[3];I(wc.BOTTOM)||(D+=N[1]-va);if(0>va||va+D>qb)return!1;I(wc.BOTTOM)||(N[3]=D);N[1]=va;zb(va,sa,G);return!0},z=function(va,sa,G){var D=N[3];if(!I(wc.TOP)){var l=aa()-va;D-=l}l=va-D;if(0>l||va>qb)return!1;I(wc.TOP)||(N[3]=D);N[1]=l;tb(va,sa,G);return!0},w=function(va,sa,G,D,l){return J(va,sa)?l(sa,G,D):!1},B=function(va,sa,G,D,l,h,u,U){for(var da=65535,ya,oa=0;oa<Db.length;oa++){var za=Db[oa],wa=za[l](),Ib=za[h]();u&&(G<wa||Ib<sa)||!J(va,za[D]())||(wa=Math.min(Math.abs(sa-Ib),Math.abs(G-wa)),wa<
da&&(da=wa,ya=za))}if(!ya)return!1;va=Math.min(sa,ya[l]());G=Math.max(G,ya[h]());return U(ya[D](),va,G)},W=function(va,sa,G,D,l,h,u){for(var U=65535,da,ya=0;ya<D.length;ya++){var oa=D[ya];var za=oa.getPerpendicularMin();var wa=oa.getPerpendicularMax();G<za||wa<sa||!J(va,oa.getStuckPos())||(za=Math.abs(va-oa.getStuckPos()),za<U&&(U=za,da=oa))}return da?(va=Math.min(da.getPerpendicularMin(),sa),G=Math.max(da.getPerpendicularMax(),G),l(da.getStuckPos(),va,G),u(da.getBrotherNearSide(),va,G),h(da.getBrotherFarSide(),
va,G),u(da.getFarFarPos(),va,G),!0):!1},ja=function(va,sa,G,D,l,h,u,U,da){for(var ya=0;ya<Db.length;ya++){var oa=Db[ya],za=oa[D](),wa=oa[l](),Ib=oa[h]();oa=za+u;if(!(G<wa||Ib<sa)&&J(va,oa))return va=Math.min(wa,sa),G=Math.max(Ib,G),U(oa,va,G),da(za,va,G),!0}return!1},Ea=function(){H.getJqParent().find(".dsb-dragdrop-auxiliaryline").remove()},Ua=function(va,sa,G,D,l){H.isClear()||(G-=va,D-=sa,va=H.transX(va+l),sa=H.transY(sa+l),l=$("<div>"),l.addClass("dsb-dragdrop-auxiliaryline"),fa.layoutCtrl(l,
va,sa,G,D),l.appendTo(H.getJqParent()))},mb=function(va,sa,G){Ua(va,sa-10,va,G+10,-1)},Gb=function(va,sa,G){Ua(va,sa-10,va,G+10,0)},zb=function(va,sa,G){Ua(sa-10,va,G+10,va,-1)},tb=function(va,sa,G){Ua(sa-10,va,G+10,va,0)}}function t(ma,qa,ea,ha,xa){this.getStuckPos=function(){return ma+ea};this.getBrotherNearSide=function(){return ma};this.getBrotherFarSide=function(){return qa};this.getFarFarPos=function(){return qa-ea};this.getPerpendicularMin=function(){return ha};this.getPerpendicularMax=function(){return xa}}
function V(ma,qa,ea){var ha;this.getJqParent=function(){return ma};this.transX=function(xa){return xa+qa};this.transY=function(xa){return xa+ea};this.setClear=function(xa){ha=xa};this.isClear=function(){return ha}}function la(ma,qa,ea){this.getContainerWidget=function(){return ma};this.getJqContainerWidget=function(){return qa};this.getJqPhysicalContainer=function(){return ea}}function Qa(){var ma=$(document.body),qa,ea,ha,xa,Ha,Ia,qb,ab,ub,Db,xb,fc,rc;this.bindDragContainer=function(I,J){var f=!1,
aa=[-1,-1],e=null,d=function(){ha=f=!1;e=null;aa=[-1,-1]};I.on("mousedown",function(q){f=!0;ha=!1;e=$(q.target);aa=[q.screenX,q.screenY]});I.on("mouseup",function(q){d()});I.on("mouseleave",function(q){f&&d()});I.on("mousemove",function(q){var z=!1;f&&(z=5<Math.abs(q.screenX-aa[0])||5<Math.abs(q.screenY-aa[1]));z&&(f=!1,(q=J(e))?(qa=new db,ub=xb(),xa=q.createWidgetModel(!0),Ha=q.getTypeDisplayName(),ha=!0,ma.on("mousemove",kc),ma.on("mouseup",N),ma.on("mouseleave",M)):d())})};this.bindDropContainer=
function(I,J,f,aa){Db=I;xb=J;fc=f;rc=aa};var kc=function(I){if(ha){if(!Ia){Ia=$("<div onselectstart='return false'>");Ia.addClass("dsb-dragdrop-creating-widget");var J=fa.getCurrentTargetPosition(I);J=fa.upwardCoordinate(I.target,J,ma[0]);Ia.data("sys-my-ori-left",J[0]);Ia.data("sys-my-ori-top",J[1]);Ia.appendTo(ma)}(J=fc(I,ub,ab,xa))?(I=J.getContainerWidget(),ab!=I&&(qa.prepare(I,xa),ab=I),I=J.getJqPhysicalContainer(),H(I),L(),Ia.text(Ha),J=[xa.getX(),xa.getY()],J=fa.upwardCoordinate(I[0],J,ma[0]),
fa.layoutCtrl(Ia,J[0],J[1],xa.getWidth(),xa.getHeight())):(ab=null,Ia.text(""),J=fa.getCurrentTargetPosition(I),J=fa.upwardCoordinate(I.target,J,ma[0]),fa.layoutCtrl(Ia,J[0]-20,J[1]-15,40,30),H(null))}},N=function(I){(I=fc(I,ub,ab,xa))?(L(),rc(I.getContainerWidget(),xa,function(){Ia.remove();Ia=null}),A(!0)):A()},M=function(I){A()},H=function(I){if(I){qb||(qb=$("<div>"),qb.addClass("dsb-dragdrop-creating-droppingcontainer"),qb.appendTo(Db),ea=new V(qb,0,0));var J=I.outerWidth(),f=I.outerHeight(),
aa=[0,0];aa=fa.upwardCoordinate(I[0],aa,Db[0]);fa.layoutCtrl(qb,aa[0],aa[1],J,f)}else qb&&(qb.remove(),qb=null)},L=function(){var I=[xa.getX(),xa.getY(),xa.getWidth(),xa.getHeight()];qa.anchor(ea,na.MOVE,I);xa.setPosition(I[0],I[1])},A=function(I){H(null);ha=!1;!I&&Ia&&Ia.animate({left:Ia.data("sys-my-ori-left"),top:Ia.data("sys-my-ori-top"),width:4,height:3},function(){Ia.remove();Ia=null});xa=null;ma.off("mousemove",kc);ma.off("mouseup",N);ma.off("mouseleave",M)}}function ca(){var ma,qa,ea,ha,xa,
Ha,Ia,qb,ab,ub,Db,xb;this.setJqPageArea=function(L){ma=L};this.setTarget=function(L,A){qa=L;ea=A};this.setActionListener=function(L){ha=L};this.bindOperator=function(L,A){L.on("mousedown",function(I){xa=A;Db=new db;Db.prepare(qa.getParent(),qa);Ha=[I.clientX,I.clientY];Ia=$("<div>");Ia.addClass("dsb-glasslayer");Ia.css("cursor",xa.getCursor());Ia.appendTo($(document.body));fa.layoutCtrlWithLRTB(Ia,0,0,null,0,0,null);Ia.on("mousemove",rc);Ia.on("mouseup",kc);Ia.on("mouseleave",N);I=[0,0];I=fa.upwardCoordinate(ea.parent()[0],
I,ma[0]);xb=new V(ma,I[0],I[1])})};var fc=function(L){var A=L.clientX-Ha[0],I=L.clientY-Ha[1];L=H(hc.X)?A:0;var J=H(hc.Y)?I:0;A=H(hc.WIDTH)?A:H(hc.WIDTH_NEGATIVE)?-A:0;I=H(hc.HEIGHT)?I:H(hc.HEIGHT_NEGATIVE)?-I:0;return[ub[0]+L,ub[1]+J,ub[2]+A,ub[3]+I]},rc=function(L){if(!ab){var A=qa.getX(),I=qa.getY(),J=qa.getWidth(),f=qa.getHeight();ub=[A,I,J,f];var aa=ea.parent();I=[A,I];I=fa.upwardCoordinate(aa[0],I,ma[0]);A=I[0];I=I[1];ab=$("<div>");ab.addClass("dsb-dragdrop-moving-target");ab.css("cursor",xa.getCursor());
ab.appendTo(ma);fa.layoutCtrl(ab,A,I,J,f)}qb||(qb=$("<div>"),qb.addClass("dsb-dragdrop-moving-container"),qb.appendTo(ma),A=ea.parent(),J=A.outerWidth(),f=A.outerHeight(),aa=[0,0],aa=fa.upwardCoordinate(A[0],aa,ma[0]),fa.layoutCtrl(qb,aa[0],aa[1],J,f));L=fc(L);Db.keepInsideContainer(L,xa);Db.keepMinSizeLimited(L,xa);Db.anchor(xb,xa,L);A=xb.transX(L[0]);J=xb.transY(L[1]);fa.layoutCtrl(ab,A,J,L[2],L[3])},kc=function(L){ab&&(xb.setClear(!0),L=fc(L),Db.keepInsideContainer(L,xa),Db.keepMinSizeLimited(L,
xa),Db.anchor(xb,xa,L),ha(L[0],L[1],L[2],L[3],xa));M()},N=function(L){M()},M=function(){Db.abort();Ia.off("mousemove",rc);Ia.off("mouseup",kc);Ia.off("mouseleave",N);Ia.remove();Ia=null;ab&&ab.remove();ab=null;qb&&qb.remove();qb=null},H=function(L){return hc.isContains(xa.getActionUnit(),L)}}function na(ma,qa,ea){this.getCursor=function(){return ma};this.getActionUnit=function(){return qa};this.getAnchorBorder=function(){return ea}}function k(){var ma,qa,ea,ha=[],xa={},Ha=null;this.readyFor=function(xb){qb(xb);
ab(xb);ea=xb.getRunningMode()};this.isRunImmediately=function(xb){return xb.isInstanceOf(E.WidgetSuperType_BuiltinVisual)?!ea||ea==E.RunningMode_Normal||ma[xb.getName()]||qa[xb.getName()]:!0};this.registDelayRun=function(xb,fc){ha.push(xb);xa[xb.getName()]=fc;Ha||ea!=E.RunningMode_Auto||(Ha=ub())};this.requestRunImmediately=function(xb){Ha&&clearTimeout(Ha);var fc=0<ha.length;if(fc){var rc=xb.searchVisibleSubTabbedIndex(),kc=[];xb.getWidget(rc).deepFirstTraversalDescendents(function(N){N.isInstanceOf(E.WidgetSuperType_BuiltinVisual)&&
xa[N.getName()]&&kc.push(N)},function(N){return N.isVisible()});0<kc.length&&(Ia(kc),fc=0<ha.length)}Ha&&fc&&(Ha=ub());return fc};var Ia=function(xb){for(var fc={},rc=0;rc<xb.length;rc++){var kc=xb[rc];Db(kc);fc[kc.getName()]=!0}for(rc=ha.length-1;0<=rc;rc--)kc=ha[rc],fc[kc.getName()]&&ha.splice(rc,1)},qb=function(xb){ma={};xb.traversalDescendents(function(fc){var rc=null;fc.isInstanceOf(E.WidgetSuperType_DiscreteItemFilter)?rc=fc.getFilterSource():fc.getWidgetTypeName()==E.WidgetType_OneTabbed&&
fc.getDurationMode().getType()==Zc.TYPE_ByData&&fc.getParent().isSlideshowEnabled()&&(rc=fc.getDurationMode().getFilterSource(),fc.getDurationMode().lookForAffectedTargetWidgets(function(kc){ma[kc]=!0}));rc&&rc.getType()==ib.TYPE_VisualWidget?(fc=rc.getSourceWidgetName())&&(ma[fc]=!0):fc.isInstanceOf(E.WidgetSuperType_Text)&&fc.parseOutputParam(function(kc,N){ma[kc]=!0})})},ab=function(xb){qa={};xb.deepFirstTraversalDescendents(function(fc){fc.isInstanceOf(E.WidgetSuperType_BuiltinVisual)&&(qa[fc.getName()]=
!0)},function(fc){return fc.isVisible()})},ub=function(){return setTimeout(function(){var xb=Math.ceil(.2*ha.length);xb=Math.min(ha.length,Math.max(10,xb));for(var fc=ha.splice(0,xb),rc=0;rc<xb;rc++)Db(fc[rc]);0<ha.length&&ub()},2E3)},Db=function(xb){var fc=xb.getName(),rc=xa[fc];delete xa[fc];rc(xb)}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing=
{});"undefined"==typeof com.kingdee.bos.qing.dsb&&(com.kingdee.bos.qing.dsb={});"undefined"==typeof com.kingdee.bos.qing.dsb.ui&&(com.kingdee.bos.qing.dsb.ui={});var Wa=com.kingdee.bos.qing.dsb.ui;Wa.Designer=function(){var ma=this,qa,ea,ha=new Hb,xa=new Da,Ha,Ia=new v,qb,ab,ub=!1,Db,xb=new function(){this.getDashboardModel=function(){qa||(qa=new E);return qa};this.getCommandManager=function(){return Ia};this.createFacade=function(w,B,W){return new ob(qb,w,B,W)};this.showBlockingPrompt=function(w){if(w){var B=
$("<div>");B.addClass("dsb-main-modallayer");B.appendTo(ea);Lb.createLoadingIcon().appendTo(B);var W=$("<div>");W.addClass("dsb-main-modallayer-prompt");W.text(w);W.appendTo(B)}else ea.find(".dsb-main-modallayer").remove()};this.setDirty=function(w){H(w)};this.selectWidget=function(w){Ha.requestSelectingWidget(w)}};this.setRemoteImpl=function(w){qb=w};this.getConductor=function(){if(!ab){var w={};w.setDirty=H;w.isDirty=function(){return ub};w.hookDirtyListener=function(B){Db=B};w.getWarningRuleHelper=
z;ab=new Bb(ha,xa,w)}return ab};this.createJqUi=function(){ea=$("<div onselectstart='return false'>");ea.addClass("dsb-main");fc();ea.append(ha.getJqUi());ea.append(xa.getJqUi());Ha=new Eb;Ha.setGlobalDependence(xb);ea.append(Ha.getJqUi());Ia.addPerformedListener(rc);return ea};this.resize=function(){Ha.resize();ha.refresh()};this.born=function(){var w=ec.getInstance(E.WidgetType_PageTitleBar),B=w.createWidgetModel(!0);B.setName(w.getTypeName());B.setDisplayName(w.getTypeDisplayName());qa=new E;qa.getPage().addWidget(B);
Ha.updateDashboardModel();H(!1)};this.setJsonModel=function(w,B){var W=new dc;qa=new E;try{qa.fromJsonObject(w,W)}catch(ja){W.setError(!0),window.console&&console.error(ja)}Ha.updateDashboardModel();H(!1);W.isTooModern()&&xa.showShortPrompt(Ka.get("loadHighVersion","\u517c\u5bb9\u6027\u52a0\u8f7d\u9ad8\u7248\u672c\u6587\u6863"),!0,"#930");B&&B(W)};this.getJsonModel=function(){return xb.getDashboardModel().toJsonObject()};this.collectBuiltinWidgetsExecutingTag=function(){var w={};xb.getDashboardModel().getPage().traversalDescendents(function(B){if(B.isInstanceOf(E.WidgetSuperType_BuiltinVisual)){var W=
B.getReferenceCustomMap().uid;(B=B.getExecutingTag())?(w[W]=B,W=!1):(w=null,W=!0);return W}});return w};var fc=function(){var w=ha.addButton(N,"btn_undo",Ka.get("undo","\u64a4\u6d88")),B=ha.addButton(M,"btn_redo",Ka.get("redo","\u91cd\u505a"));kc(w,B);Ia.addPerformedListener(function(W,ja,Ea){kc(w,B)});ha.addSeperator();ha.addMenuButton(e,"btn_overall",Ka.get("overall","\u5168\u5c40\u89c6\u56fe"));ha.addMenuButton(L,"btn_setting",Ka.get("setting","\u8bbe\u7f6e"));ha.addMenuButton(I,"btn_preview",
Ka.get("preview","\u9884\u89c8"))},rc=function(w,B,W){H(!0);w&&(B=B?"":(W?Ka.get("undo","\u64a4\u6d88"):Ka.get("redo","\u91cd\u505a"))+" ",B+=w.getCaption(),xa.showShortPrompt(B))},kc=function(w,B){w.setEnabled(Ia.isCanUndo());B.setEnabled(Ia.isCanRedo())},N=function(){Ia.isCanUndo()&&Ia.undo()},M=function(){Ia.isCanRedo()&&Ia.redo()},H=function(w){ub=w;xa&&xa.showDirtyState(ub);Db&&Db(ub)},L=function(w){w=new Qc;w.addItemModel(Gc.createActionMenuItem(Ka.get("performanceLab","\u6027\u80fd\u5b9e\u9a8c\u5ba4"),
A));return w},A=function(w){var B=xb.getDashboardModel().getPage();(new Sb).show(B,function(W){var ja=new ia;ja.setCaption(Ka.get("performanceLab","\u6027\u80fd\u5b9e\u9a8c\u5ba4"));ja.setValue(W);ja.setMethod(B.getRunningMode,B.setRunningMode);xb.getCommandManager().perform(ja)})},I=function(w){w=new Qc;w.addItemModel(Gc.createActionMenuItem(Ka.get("previewOnDesktop","\u684c\u9762\u7aef"),J));w.addItemModel(Gc.createActionMenuItem(Ka.get("previewOnMobile","\u79fb\u52a8\u7aef"),f));return w},J=function(w){aa(new Ub)},
f=function(w){aa(new lb)},aa=function(w){var B=Ha.collectWidgetsContextForPreview();w.setFacadeCreator(xb.createFacade);w.setBackwardListener(function(){ja.unobserve();W.remove()});var W=w.createJqUi(B);W.appendTo(ea);fa.layoutCtrlWithLRTB(W,0,0,null,0,0,null);w.setJsonModel(ma.getJsonModel());var ja=new $b;ja.setDelay(325);ja.setCallback(function(){w.resize()});ja.observe()},e=function(w){w=new Qc;w.addItemModel(Gc.createActionMenuItem(Ka.get("overallCutPaste","\u8de8\u5bb9\u5668\u79fb\u52a8\u7ec4\u4ef6")+
"...",d));w.addItemModel(Gc.createActionMenuItem(Ka.get("overallAffecting","\u7ec4\u4ef6\u5173\u7cfb\u89c6\u56fe"),q));return w},d=function(){(new Fa).show(xb.getDashboardModel().getPage(),function(w){Ia.compositeStart(Ka.get("overallCutPaste","\u8de8\u5bb9\u5668\u79fb\u52a8\u7ec4\u4ef6"));for(var B=0;B<w.length;B++){var W=w[B],ja=W[0];W=W[1];var Ea=new r;Ea.setValue(ja.getParent(),ja);var Ua=new g;Ua.setValue(W,ja);Ia.perform(Ea);Ia.perform(Ua)}Ia.compositeEnd()})},q=function(){(new ua).show(xb)},
z=function(){return{popupWarningRuleSelector:function(w,B){(new wb).showDialog(xb.getDashboardModel(),w,B)},parseWidgetDisplayName:function(w){var B="";if(w){B=wb.decodeFullName(w);var W=B[0];B=B[1];(W=xb.getDashboardModel().searchWidgetByName(W))?(w=W.getDisplayName(),B=wb.encodeFullName(w,B)):B=w}return B}}}};Wa.Executor=function(){Mb.call(this);var ma=this.protectedMethod;this.protectedCreateExhibition=function(){return new Wb};this.setUiCreatedAnnouncer=function(qa){ma.getExhibition().setHeightAnnouncer(function(ea){qa()})};
this.setCachedExhibitionMode=function(qa){ma.getExhibition().setCachedExhibitionMode(qa)};this.getFreshExhibitionMode=function(){return ma.getExhibition().getFreshExhibitionMode()};this.updateLayoutAdapter=function(qa){ma.getExhibition().updateLayoutAdapter(qa)};this.reparseRelativeDate=function(){return ma.getExhibition().reparseRelativeDate()}};Wa.Executor4Mobile=function(){Mb.call(this);var ma=this.protectedMethod;this.protectedCreateExhibition=function(){return new kb};this.setHeightAnnouncer=
function(qa){ma.getExhibition().setHeightAnnouncer(qa)}};Wa.CosmeticConfigPreviewCreator=Va;var fa,ta,Ra,Oa,Qb,Ka,$b,pc,Bc,yc,Gc,Qc,Pa,fb,gb,sb,Na,eb,Lb,ob,Pb,ec,E,ib,bc,nc,Xb,Mc,Kc,Ic,Rc,Zc,$c,v,g,r,y,R,T,Y,ia,pa,Ba,Ya,$a,Fb=Wa.TextInputDialog,wb=Wa.WidgetWarningRuleSelector,Fa=Wa.OverallCutPasteDialog,ua=Wa.OverallCommunicationDialog,Sb=Wa.PerformanceSettingDialog;(function(){var ma=com.kingdee.bos.qing.common;fa=ma.DomUtil;ta=ma.BrowserUtil;Ra=ma.FullScreenHelper;Oa=ma.TextMeasurer;Qb=ma.BlocksToTable;
ma=com.kingdee.bos.qing.framework.common;Ka=ma.MultilanguageManager.createPackageAccessor(Wa);$b=ma.WindowResizeObserver;pc=ma.GlobalFont;Bc=ma.TabbedUiUtil;ma=com.kingdee.bos.qing.ui.component;yc=ma.Toolbar;Gc=ma.Menu;Qc=ma.MenuModel;Pa=ma.SplitPane;fb=ma.List;gb=ma.MessageDialog;sb=ma.WorkButton;ma=com.kingdee.bos.qing.common.ui;Na=ma.CommonIconUtil;ma=com.kingdee.bos.qing.core;eb=ma.UserOperationReporter;ma=com.kingdee.bos.qing.dsb;Lb=ma.Icons;ob=ma.Facade;Pb=ma.CosmeticBag;ma=com.kingdee.bos.qing.dsb.model;
ec=ma.WidgetTypeManager;E=ma.DashboardModel;ib=ma.AbstractFilterSource;bc=ma.WidgetPageTitleBar;nc=ma.WidgetPanel;Xb=ma.WidgetExtReport;Mc=ma.WidgetQingReport;Kc=ma.WidgetIframe;Ic=ma.WidgetPicture;Rc=ma.WidgetTabbedContainer;Zc=ma.AbstractDurationMode;$c=ma.CosmeticModel;if(ma=com.kingdee.bos.qing.dsb.controller)v=ma.CommandManager,g=ma.ActionAddWidget,r=ma.ActionRemoveWidget,y=ma.ActionMoveWidget,R=ma.ActionCutWidget,T=ma.ActionPasteAfterCutWidget,Y=ma.ActionChangeWidgetRect,ia=ma.ActionChangeProperty;
ma=com.kingdee.bos.qing.dsb.widget;pa=ma.AbstractWidgetUi;Ba=ma.DesktopWidgetCtrlProvider;Ya=ma.MobileWidgetCtrlProvider;$a=ma.BackgroundPictureLoader})();var hc=new function(){this.isContains=function(ma,qa){return(ma&qa)==qa}};hc.X=1;hc.WIDTH=2;hc.WIDTH_NEGATIVE=4;hc.Y=16;hc.HEIGHT=32;hc.HEIGHT_NEGATIVE=64;var wc=new function(){this.isBorder=function(ma,qa){return(ma&qa)==qa}};wc.LEFT=1;wc.RIGHT=2;wc.TOP=4;wc.BOTTOM=8;na.W=new na("w-resize",hc.X|hc.WIDTH_NEGATIVE,wc.LEFT);na.E=new na("e-resize",
hc.WIDTH,wc.RIGHT);na.N=new na("n-resize",hc.Y|hc.HEIGHT_NEGATIVE,wc.TOP);na.S=new na("s-resize",hc.HEIGHT,wc.BOTTOM);na.NW=new na("nw-resize",na.N.getActionUnit()|na.W.getActionUnit(),na.N.getAnchorBorder()|na.W.getAnchorBorder());na.NE=new na("ne-resize",na.N.getActionUnit()|na.E.getActionUnit(),na.N.getAnchorBorder()|na.E.getAnchorBorder());na.SW=new na("sw-resize",na.S.getActionUnit()|na.W.getActionUnit(),na.S.getAnchorBorder()|na.W.getAnchorBorder());na.SE=new na("se-resize",na.S.getActionUnit()|
na.E.getActionUnit(),na.S.getAnchorBorder()|na.E.getAnchorBorder());na.MOVE=new na("move",hc.X|hc.Y,wc.LEFT|wc.RIGHT|wc.TOP|wc.BOTTOM)})();(function(){function p(){Ka.call(this);var Pa=this,fb=this.protectedMethod,gb=[],sb,Na=[],eb=[],Lb,ob,Pb=Ka.ACTION_NONE,ec;this.protectedInitUi=function(g){Pa.protectedInitCardButtons();E(Ka.ACTION_ALL);sb=null;for(var r=0;r<Na.length;r++){var y=Na[r];bc(g,y)}for(r=0;r<eb.length;r++)y=eb[r],bc(g,y);g.on("mouseenter",Kc);g.on("mouseleave",Ic)};this.protectedInitCardButtons=function(){throw Error("Implement");};this.protectedSyncLayoutMore=function(){Mc()};this.protectedYieldButtonsSpace=function(){for(var g=
0,r=0,y=gb.length-1;0<=y;y--){var R=nc(gb[y]);ib(R)?r=1:g++}return 24*(g+r)};this.protectedConfirmDynamicTitleWidth=function(g,r){ec=g&&g!=r?[g,r]:null;return g};var E=function(g){Pb=g;void 0!==sb&&Mc()},ib=function(g){for(var r=0;r<eb.length;r++)if(eb[r]==g)return!0;return!1},bc=function(g,r){var y=Lb(r),R=y[1];y=Xb(y[0],R);y.on("click",function(T){T=$(T.target);var Y=nc(T);ob&&ob(T,Y,R)});ib(r)?sb||(sb=Xb("others",Va.get("othersMore","\u66f4\u591a")),sb.on("click",function(T){if(Rc(g).is(":visible"))$c(g);
else{g.on("click",v);T=Rc(g);for(var Y=sb.prop("offsetWidth"),ia=sb.prop("offsetHeight"),pa=.5*Y,Ba=.25*ia,Ya=gb.length-1;0<=Ya;Ya--){var $a=gb[Ya],Fb=nc($a);ib(Fb)&&((Pb&Fb)==Fb?$a.hide():($a.css("top",Ba),$a.css("right",pa),pa+=1.5*Y))}Y=pa;pa=fb.getWidget().getPaddingRight();Ba=sb.prop("offsetTop")+1.5*ia;rb.layoutCtrlWithLRTB(T,null,pa,Y,Ba,null,1.5*ia);T.show();Pa.protectedWhenActionMenuSwitch(!0)}}),g.append(sb)):g.append(y);y.data("myActionTag",r);gb.push(y)},nc=function(g){return g.data("myActionTag")},
Xb=function(g,r){var y=$("<div>");Wa.background(y,g);y.attr("title",r);y.css("z-index",fb.getOperationLevel());y.addClass("dsb-widgetcard-btn");y.hide();return y},Mc=function(){var g=fb.getWidget(),r=g.getPaddingRight()+4,y=g.getPaddingTop();y=Math.max(2,parseInt((y-16)/2));g=function(ia){ia.css("top",y);ia.css("right",r);r+=24};sb&&(Zc()?g(sb):sb.hide());for(var R=gb.length-1;0<=R;R--){var T=gb[R],Y=nc(T);ib(Y)||((Pb&Y)==Y?T.hide():g(T))}},Kc=function(g){fb.updateTitleYield(!0,ec?ec[1]:null);sb&&
Zc()&&sb.show();for(g=0;g<gb.length;g++){var r=gb[g],y=nc(r);(Pb&y)!=y&&r.show()}},Ic=function(g){fb.updateTitleYield(!1,ec?ec[0]:null);sb&&sb.hide();for(var r=0;r<gb.length;r++)gb[r].hide();g=$(g.currentTarget);$c(g)},Rc=function(g){var r=g.children(".dsb-widgetcard-othersmenu");if(0==r.length){r=$("<div>");r.hide();r.css("z-index",fb.getUpwardLevel());r.addClass("dsb-widgetcard-othersmenu");for(var y=0;y<gb.length;y++){var R=gb[y],T=nc(R);ib(T)&&R.appendTo(r)}r.appendTo(g)}return r},Zc=function(){for(var g=
!1,r=gb.length-1;0<=r;r--){var y=nc(gb[r]);if(ib(y)&&(Pb&y)!=y){g=!0;break}}return g},$c=function(g){g.off("click",v);Rc(g).hide();Pa.protectedWhenActionMenuSwitch(!1)};this.protectedWhenActionMenuSwitch=function(g){};var v=function(g){g.target!=sb[0]&&(g=$(g.currentTarget),$c(g))};this.protectedMethod.setCardActions=function(g,r){Na=g?g:[];eb=r?r:[]};this.protectedMethod.setCardActionUiDefiner=function(g){Lb=g};this.protectedMethod.setCardActionListener=function(g){ob=g};this.protectedMethod.hideCardActions=
E;this.protectedMethod.updateUiForFullscreen=function(g,r){for(var y=null,R=0;R<gb.length;R++){var T=gb[R];if(nc(T)==g){y=T;break}}y&&(g=r?"quitFullscreen":"fullscreen",r=r?Va.get("quitFullscreen","\u9000\u51fa\u5168\u5c4f"):Va.get("fullscreen","\u5168\u5c4f"),Wa.background(y,g),y.attr("title",r))}}function Wb(){$b.call(this);p.call(this);var Pa=this,fb=this.protectedMethod,gb;this.setActionListener=function(sb){gb=sb};this.setFullscreenAnnouncer=function(sb,Na){sb(function(eb){fb.updateUiForFullscreen(Ka.ACTION_FULLSCREEN,
eb)})};this.updateState=function(sb){switch(sb){case $b.STATE_AUTO_REFRESHING:fb.hideCardActions(Ka.ACTION_ALL);break;case $b.STATE_REMOTE_ERROR:fb.hideCardActions(Ka.ACTION_ALL^$b.ACTION_REFRESH);break;default:sb=fb.isFullscreenEnabled()?Ka.ACTION_NONE:Ka.ACTION_FULLSCREEN,fb.hideCardActions(sb)}};this.protectedInitCardButtons=function(){var sb=Pa.protectedCustomGetActions();fb.setCardActions(sb[0],sb[1]);fb.setCardActionUiDefiner(function(Na){return Pa.protectedCustomGetActionUiDefine(Na)});fb.setCardActionListener(function(Na,
eb,Lb){Pa.protectedCustomFireAction(eb)||gb(Na,eb,Lb)})};this.protectedCustomGetActions=function(){throw Error("Implement");};this.protectedCustomGetActionUiDefine=function(sb){throw Error("Implement");};this.protectedCustomFireAction=function(sb){return!1}}function kb(){Wb.call(this);var Pa=this,fb=this.protectedMethod,gb;this.protectedCustomGetActions=function(){if(fb.isDesigntime()){var sb=[$b.ACTION_REFRESH,$b.ACTION_EDIT];var Na=[Ka.ACTION_FULLSCREEN]}else sb=[$b.ACTION_REFRESH,$b.ACTION_FILTER],
Na=[$b.ACTION_INFO,$b.ACTION_EDIT,$b.ACTION_ANALYSIS,Ka.ACTION_FULLSCREEN];return[sb,Na]};this.protectedCustomGetActionUiDefine=function(sb){switch(sb){case $b.ACTION_FILTER:return["filter",Va.get("filter","\u6570\u636e\u7b5b\u9009")];case $b.ACTION_REFRESH:return["refresh",Va.get("refresh","\u5237\u65b0")];case $b.ACTION_EDIT:return["edit",fb.isDesigntime()?Va.get("edit","\u8fdb\u5165\u8bbe\u8ba1\u5668"):Va.get("squareIntoDesigner","\u8fdb\u5165\u8bbe\u8ba1\u5668\u4e2a\u6027\u5316\u4fee\u6539")];
case $b.ACTION_ANALYSIS:return["analysis",Va.get("squareOpenAnalysis","\u6253\u5f00\u201c\u6570\u636e\u5206\u6790\u201d\u5de5\u5177")];case Ka.ACTION_FULLSCREEN:return["fullscreen",Va.get("fullscreen","\u5168\u5c4f")];case $b.ACTION_INFO:return["info",Va.get("chartInfo","\u56fe\u8868\u4fe1\u606f")];case $b.ACTION_INSIGHT:return["insight",Va.get("insight","\u6d1e\u5bdf")];default:throw Error("Modify here");}};this.protectedCustomFireAction=function(sb){gb.getTooltipsWidget().hide();switch(sb){case $b.ACTION_FILTER:return gb.showExtraFilter(Pa.getJqUi()),
!0;case $b.ACTION_INFO:return gb.showChartInfo(Pa.getJqUi()),!0;case $b.ACTION_INSIGHT:return gb.showInsight(Pa.getJqUi()),!0;default:return!1}};this.createScene=function(sb){fa.createDashboardSquareScene(!1,function(Na){gb=Na;sb(Na)})};this.protectedWhenActionMenuSwitch=function(sb){gb.getTooltipsWidget().setDumb(sb)}}function Mb(){Wb.call(this);var Pa=this.protectedMethod;this.protectedCustomGetActions=function(){if(Pa.isDesigntime()){var fb=[$b.ACTION_REFRESH,$b.ACTION_EDIT];var gb=[Ka.ACTION_FULLSCREEN]}else fb=
[$b.ACTION_REFRESH],gb=[$b.ACTION_EDIT,Ka.ACTION_FULLSCREEN];return[fb,gb]};this.protectedCustomGetActionUiDefine=function(fb){switch(fb){case $b.ACTION_REFRESH:return["refresh",Va.get("refresh","\u5237\u65b0")];case $b.ACTION_EDIT:return["edit",Pa.isDesigntime()?Va.get("edit","\u8fdb\u5165\u8bbe\u8ba1\u5668"):Va.get("analysisIntoDesigner","\u8fdb\u5165\u201c\u6570\u636e\u5206\u6790\u201d\u5de5\u5177")];case Ka.ACTION_FULLSCREEN:return["fullscreen",Va.get("fullscreen","\u5168\u5c4f")];default:throw Error("Modify here");
}};this.createScene=function(fb){fa.createDashboardLongerScene(!1,fb)}}function oc(){pc.call(this);p.call(this);var Pa=this.protectedMethod,fb;this.setActionListener=function(gb){fb=gb};this.setFullscreenAnnouncer=function(gb,sb){gb(function(Na){Pa.updateUiForFullscreen(Ka.ACTION_FULLSCREEN,Na)})};this.updateState=function(){var gb=Pa.isFullscreenEnabled()?Ka.ACTION_NONE:Ka.ACTION_FULLSCREEN;Pa.hideCardActions(gb)};this.protectedInitCardButtons=function(){Pa.setCardActions([pc.ACTION_REFRESH,pc.ACTION_FILTER,
Ka.ACTION_FULLSCREEN]);Pa.setCardActionUiDefiner(function(gb){switch(gb){case pc.ACTION_FILTER:return["filter",Va.get("filter","\u6570\u636e\u7b5b\u9009")];case pc.ACTION_REFRESH:return["refresh",Va.get("refresh","\u5237\u65b0")];case Ka.ACTION_FULLSCREEN:return["fullscreen",Va.get("fullscreen","\u5168\u5c4f")];default:throw Error("Modify here");}});Pa.setCardActionListener(function(gb,sb,Na){fb(gb,sb,Na)})}}function Ub(){Bc.call(this);p.call(this);var Pa=this.protectedMethod,fb;this.setActionListener=
function(gb){fb=gb};this.setFullscreenAnnouncer=function(gb,sb){gb(function(Na){Pa.updateUiForFullscreen(Ka.ACTION_FULLSCREEN,Na)})};this.updateState=function(){var gb=Pa.isFullscreenEnabled()?Ka.ACTION_NONE:Ka.ACTION_FULLSCREEN;Pa.hideCardActions(gb)};this.protectedInitCardButtons=function(){Pa.setCardActions([Ka.ACTION_FULLSCREEN]);Pa.setCardActionUiDefiner(function(gb){if(gb==Ka.ACTION_FULLSCREEN)return["fullscreen",Va.get("fullscreen","\u5168\u5c4f")];throw Error("Modify here");});Pa.setCardActionListener(function(gb,
sb,Na){fb(gb,sb,Na)})}}function lb(){var Pa=this.protectedMethod;this.protectedMethod.decorateFontSizeEnhanced=function(fb){var gb=Pa.getWidget().getFontSizeEnhanced();fb.css("font-size",gb?100+10*gb+"%":"")}}function Jb(){var Pa=this.protectedMethod,fb,gb,sb=function(Na){if(gb){var eb=Pa.getWidget(),Lb=$.trim(eb.getFrontLabel());gb.text(Lb);if(Lb){var ob=Ra.getInstance(eb.getWidgetTypeName());gb.css("display","");var Pb=eb.getWidth();Lb=eb.getHeight();"left"==eb.getFrontLabelPosition()?(eb=eb.getFrontLabelLength(),
eb=eb>Pb-20?Math.max(0,Pb-20):eb,rb.layoutCtrlMiddleAlign(gb,Lb),rb.layoutCtrlWithLRTB(gb,0,null,eb),rb.layoutCtrlWithLRTB(Na.getJqUi(),eb,0,null,0,null,"100%")):(eb=ob.getSuggestSize()[1],Lb-=eb,gb.css({"margin-top":"","line-height":Lb+"px"}),rb.layoutCtrlWithLRTB(gb,0,null,"100%",0,null,Lb),rb.layoutCtrlWithLRTB(Na.getJqUi(),0,0,null,Lb,null,eb))}else gb.css("display","none"),rb.layoutCtrlWithLRTB(Na.getJqUi(),0,0,null,0,null,"100%")}};this.protectedMethod.createJqCompositeContainer=function(Na){fb||
(gb=$("<div>"),gb.addClass("dsb-widget-frontlabel"),ta.decorateLabel(gb),sb(Na),fb=$("<div>"),fb.append(gb),fb.append(Na.getJqUi()));return fb};this.protectedMethod.updateFrontLabel=sb;this.protectedMethod.decorateInputer=function(Na){ta.decorateInputer(Na)}}function Rb(){yc.call(this);Jb.call(this);lb.call(this);var Pa=this.protectedMethod,fb,gb,sb;this.getJqUi=function(){fb||(fb=Pa.isDesigntime()||Pa.getWidget().getFrontLabel()?Pa.createJqCompositeContainer(Na()):Na().getJqUi(),Pa.decorateFontSizeEnhanced(fb));
return fb};this.setSelectableItems=function(eb){Na().setItemModels(eb,function(Lb,ob){return Lb&&ob?Lb.getValue()===ob.getValue():!Lb&&!ob})};this.setSelectedItem=function(eb){Na().setSelected(eb)};this.getSelectedItem=function(){return Na().getSelected()};this.setValueChangedListener=function(eb){sb=eb};this.updateFrontLabel=function(){Pa.updateFrontLabel(Na())};this.updateSurface=function(){Pa.decorateFontSizeEnhanced(fb)};var Na=function(){gb||(gb=new bb,gb.setDropdownAsLongAsPossible(!0),gb.setCustomPainter(function(eb,
Lb,ob){eb=ob?ob.getDisplayText():"";Lb.text(eb)}),gb.addSelectedChangedListener(function(eb,Lb,ob){sb()}),Pa.decorateInputer(gb.getJqUi()));return gb}}function Ta(){Gc.call(this);Jb.call(this);lb.call(this);var Pa=this,fb=this.protectedMethod,gb,sb,Na,eb;this.getJqUi=function(){gb||(gb=fb.isDesigntime()||fb.getWidget().getFrontLabel()?fb.createJqCompositeContainer(Lb()):Lb().getJqUi(),fb.decorateFontSizeEnhanced(gb));return gb};this.setSelectableItems=function(ob){Na=ob};this.setSelectedItems=function(ob){Lb().setModel(ob)};
this.getSelectedItems=function(){return Lb().getModel()};this.setValueChangedListener=function(ob){eb=ob};this.updateFrontLabel=function(){fb.updateFrontLabel(Lb())};this.updateSurface=function(){fb.decorateFontSizeEnhanced(gb)};var Lb=function(){sb||(sb=new db,sb.setCustomPainter(function(ob){if(void 0===ob)return"";if(null===ob)return Qb.createItemAll().getDisplayText();for(var Pb=Math.min(20,ob.length),ec="",E=0;E<Pb;E++)0<E&&(ec+=", "),ec+=ob[E].getDisplayText();ob.length>Pb&&(ec+="...");return ec}),
sb.addActionListener(function(ob){if(Na){ob=fb.getWidget();var Pb=$.trim(ob.getFrontLabel());Pb=Pb?Pb:ob.getDisplayName();var ec=new Ga;ec.setContext(Pb,Pa.getJqUi(),ob.isMultiSelectable(),Na,Pa.getSelectedItems(),function(E){Pa.setSelectedItems(E);eb()});ec.showDialog()}}),fb.decorateInputer(sb.getJqUi()));return sb}}function Ga(){t.call(this);var Pa=this,fb=this.protectedMethod;this.setContext=function(sb,Na,eb,Lb,ob,Pb){var ec=eb?new jc:new Xa;ec.setItems(Lb,ob);fb.setTitle(sb);fb.setContentPaneCreator(function(){return ec.getJqUi()});
fb.setClosingAction(function(E){E&&(E=ec.acceptSelectedItems(),void 0!==E&&Pb(E))});sb=$(document.body);eb=ec.suggestDialogSize(sb);gb(sb,Na,eb)};var gb=function(sb,Na,eb){var Lb=eb[0],ob=eb[1],Pb=eb[2],ec=Pb?eb[3]:Lb;eb=Pb?eb[4]:ob;var E=rb.upwardCoordinate(Na[0],[0,0],sb[0]),ib=E[1];E=E[0];Na=ib+Na.outerHeight();var bc=sb.innerWidth()-10;sb=sb.innerHeight()-10;E+Lb>bc&&(E=bc-Lb);Na+ob>sb&&(ib>.5*sb?(Na=ib-ob,10>Na&&(ob=Math.max(ob-(10-Na),eb),Na=10)):(ob=Math.max(sb-Na,eb),Na+ob>sb&&(Na=Math.max(0,
sb-ob))));Pa.setSize(Lb,ob);Pa.setPosition(E,Na);Pb&&(fb.setMinSize(ec,eb),fb.getDialogCtrl().setResizeEnabled())}}function Cb(){var Pa=this,fb=this.protectedMethod,gb,sb;this.setItems=function(Na,eb){gb=Na;sb=eb};this.acceptSelectedItems=function(){var Na=fb.acceptSelectingResult();if(Na){var eb=[];for(var Lb=!0,ob=0;ob<gb.length;ob++){var Pb=gb[ob];Na[Pb.getValue()]?eb.push(Pb):Lb=!1}Pa.protectedIsMultiValue()&&Lb&&(eb=null)}return eb};this.protectedIsMultiValue=function(){throw Error("Implement");
};this.protectedGetSelectableItems=function(){return gb};this.protectedCloneSelectedValue=function(){for(var Na={},eb=sb?sb:Pa.protectedGetInsteadSelecteds(gb),Lb=0;Lb<eb.length;Lb++)Na[eb[Lb].getValue()]=!0;return Na};this.protectedGetInsteadSelecteds=function(Na){throw Error("Implement");}}function Xa(){na.call(this);Cb.call(this);this.protectedGetInsteadSelecteds=function(Pa){return 0==Pa.length?[]:[Pa[0]]};this.protectedIsMultiValue=function(){return!1}}function jc(){k.call(this);Cb.call(this);
this.protectedGetInsteadSelecteds=function(Pa){return Pa};this.protectedIsMultiValue=function(){return!0}}function dc(){Qc.call(this);Jb.call(this);lb.call(this);var Pa=this,fb=this.protectedMethod,gb,sb,Na;this.getJqUi=function(){gb||(gb=fb.isDesigntime()||fb.getWidget().getFrontLabel()?fb.createJqCompositeContainer(eb()):eb().getJqUi(),fb.decorateFontSizeEnhanced(gb));return gb};this.setDateMs=function(Pb){eb().setSelectedModel(Pb)};this.getFromDateMs=function(){return eb().getSelectedModel()[0]};
this.getToDateMs=function(){return eb().getSelectedModel()[1]};this.setValueChangedListener=function(Pb){Na=Pb};this.updateFrontLabel=function(){fb.updateFrontLabel(eb())};this.updateSurface=function(){fb.decorateFontSizeEnhanced(gb)};var eb=function(){sb||(sb=new jb,sb.setCustomPainter(Lb),sb.setDropdownCreator(ob),sb.addSelectionListener(function(Pb,ec){ec&&Na()}),fb.decorateInputer(sb.getJqUi()));return sb},Lb=function(Pb,ec){Pb=Pb?Pa.protectedToCtrlDisplay(Pb):"...";ec.text(Pb)};this.protectedToCtrlDisplay=
function(Pb){throw Error("Implement");};var ob=function(Pb,ec,E,ib,bc){var nc=new Aa;nc.addActionListener(function(Kc){Kc=Mc();E(Kc)});nc.setText(Va.get("dateRangeOk","\u786e\u5b9a"));nc.getJqUi().addClass("dsb-widget-calendar-okcancel-"+(ba.isModern()?"right":"left"));var Xb=new Aa;Xb.addActionListener(function(Kc){ib()});Xb.setText(Va.get("dateRangeCancel","\u53d6\u6d88"));Xb.getJqUi().addClass("dsb-widget-calendar-okcancel-"+(ba.isModern()?"left":"right"));Pb.css("background-color","#fff");Pb.append(nc.getJqUi());
Pb.append(Xb.getJqUi());nc=[];var Mc=Pa.protectedInitPopup(ec,Pb,nc,bc);return nc};this.protectedInitPopup=function(Pb,ec,E,ib){throw Error("Implement");}}function Bb(){Qc.call(this);Jb.call(this);lb.call(this);var Pa=this,fb=this.protectedMethod,gb,sb,Na;this.getJqUi=function(){gb||(gb=fb.isDesigntime()||fb.getWidget().getFrontLabel()?fb.createJqCompositeContainer(eb()):eb().getJqUi(),fb.decorateFontSizeEnhanced(gb));return gb};this.setValueChangedListener=function(Lb){Na=Lb};this.updateFrontLabel=
function(){fb.updateFrontLabel(eb())};this.updateSurface=function(){fb.decorateFontSizeEnhanced(gb)};var eb=function(){sb||(sb=Pa.protectedCreateRealCtrl(),fb.decorateInputer(sb.getJqUi()));return sb};this.protectedCreateRealCtrl=function(){throw Error("Implement");};fb.getRealCtrl=eb;fb.fireValueChangedEvent=function(){Na()}}function Hb(){dc.call(this);this.protectedToCtrlDisplay=function(Pa){var fb=new cc;fb.setFormatString("yyyy-M-d");var gb=fb.format(Pa[0]);Pa=fb.format(Pa[1]);return gb+"~"+Pa};
this.protectedInitPopup=function(Pa,fb,gb,sb){var Na=$("<div>");Na.css("display","none");Na.addClass("sa-ctrl-date-mask");sb=new ca;sb.setDateRange(Pa[0],Pa[1]);sb.setMaskRequestListener(function(eb,Lb){Na.css("display",Lb?"":"none")});fb.append(sb.getJqUi());fb.append(Na);rb.layoutCtrlWithLRTB(sb.getJqUi(),20,20,null,8,32,null);rb.layoutCtrlWithLRTB(Na,0,0,null,null,0,32);gb[0]=560;gb[1]=320;return sb.getDateRange}}function Da(){dc.call(this);this.protectedToCtrlDisplay=function(Pa){var fb=Pa[0];
Pa=Ab.getFullYear(fb);fb=Math.floor(Ab.getMonth(fb)/3)+1;return Pa+"Q"+fb};this.protectedInitPopup=function(Pa,fb,gb,sb){var Na=Pa[0]||Ab.createTimestamp();Pa=Ab.getFullYear(Na);Na=Math.floor(Ab.getMonth(Na)/3);var eb=new V;eb.setSelectedYear(Pa);eb.setSelectedQuarter(Na);eb.getJqUi().appendTo(fb);rb.layoutCtrlWithLRTB(eb.getJqUi(),0,0,null,0,40,null);gb[0]=260;gb[1]=400;sb(function(){eb.scrollSelectedToVisible()});return function(){var Lb=eb.getSelectedYear(),ob=eb.getSelectedQuarter();return V.toDateRange(Lb,
ob)}}}function Eb(){dc.call(this);this.protectedToCtrlDisplay=function(Pa){var fb=new cc;fb.setFormatString("yyyy-MM");return fb.format(Pa[0])};this.protectedInitPopup=function(Pa,fb,gb,sb){var Na=Pa[0]||Ab.createTimestamp();Pa=Ab.getFullYear(Na);Na=Ab.getMonth(Na);var eb=new la;eb.setSelectedYear(Pa);eb.setSelectedMonth(Na+1);eb.getJqUi().appendTo(fb);rb.layoutCtrlWithLRTB(eb.getJqUi(),0,0,null,0,40,null);gb[0]=260;gb[1]=400;sb(function(){eb.scrollSelectedToVisible()});return function(){var Lb=eb.getSelectedYear(),
ob=eb.getSelectedMonth()-1;return la.toDateRange(Lb,ob)}}}function Ca(){Bb.call(this);var Pa=this.protectedMethod,fb=!1;this.protectedCreateRealCtrl=function(){for(var gb=[],sb=1970;2099>=sb;sb++)gb.push(sb);sb=new bb;sb.setItemModels(gb);sb.addSelectedChangedListener(function(Na,eb,Lb){!fb&&Pa.fireValueChangedEvent()});return sb};this.setDateMs=function(gb){gb=gb?gb[0]:Ab.createTimestamp();gb=Ab.getFullYear(gb);fb=!0;Pa.getRealCtrl().setSelected(gb);fb=!1};this.getFromDateMs=function(){var gb=Pa.getRealCtrl().getSelected();
return Ab.createDateWithTime(gb,0,1,0,0,0,0).getTime()};this.getToDateMs=function(){var gb=Pa.getRealCtrl().getSelected();return Ab.createDateWithTime(gb,11,31,23,59,59,999).getTime()}}function vb(){Bb.call(this);var Pa=this.protectedMethod;this.protectedCreateRealCtrl=function(){var fb=new Qa;fb.addModelChangedListener(function(gb){Pa.fireValueChangedEvent()});return fb};this.setDateMs=function(fb){fb=fb?new Date(fb[0]):new Date;Pa.getRealCtrl().setDateObject(fb)};this.getFromDateMs=function(){var fb=
Pa.getRealCtrl().getYear(),gb=Pa.getRealCtrl().getMonth()-1,sb=Pa.getRealCtrl().getDay();return Ab.createDateWithTime(fb,gb,sb,0,0,0,0).getTime()};this.getToDateMs=function(){var fb=Pa.getRealCtrl().getYear(),gb=Pa.getRealCtrl().getMonth()-1,sb=Pa.getRealCtrl().getDay();return Ab.createDateWithTime(fb,gb,sb,23,59,59,999).getTime()}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&
(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.dsb&&(com.kingdee.bos.qing.dsb={});"undefined"==typeof com.kingdee.bos.qing.dsb.widget&&(com.kingdee.bos.qing.dsb.widget={});"undefined"==typeof com.kingdee.bos.qing.dsb.widget.desktop&&(com.kingdee.bos.qing.dsb.widget.desktop={});var Kb=com.kingdee.bos.qing.dsb.widget.desktop,rb,cc,Ab,Va,ba,bb,jb,Aa,db,t,V,la,Qa,ca,na,k,Wa,fa,ta,Ra,Oa,Qb,Ka,$b,pc,Bc,yc,Gc,Qc;(function(){var Pa=com.kingdee.bos.qing.common;rb=Pa.DomUtil;cc=Pa.DateFormater;
Ab=Pa.DateUtil;Pa=com.kingdee.bos.qing.framework.common;Va=Pa.MultilanguageManager.createPackageAccessor(Kb);Pa=com.kingdee.bos.qing.ui.component;ba=Pa.SkinUiContext;bb=Pa.ComboBox;jb=Pa.DropdownSelector;Aa=Pa.WorkButton;db=Pa.F7Selector;t=Pa.AbstractModalDialog;V=Pa.DateOfYearQuarterPanel;la=Pa.DateOfYearMonthPanel;Qa=Pa.DateSelector;Pa=com.kingdee.bos.qing.common.ui;ca=Pa.DateRangePanel;Pa=com.kingdee.bos.qing.core.ui;na=Pa.AbstractSingleValueDiscreteSelector;k=Pa.AbstractMultiValueDiscreteSelector;
Pa=com.kingdee.bos.qing.dsb;Wa=Pa.Icons;fa=Pa.IntegrationRegister;ta=Pa.CosmeticBag;Pa=com.kingdee.bos.qing.dsb.model;Ra=Pa.WidgetTypeManager;Oa=Pa.DashboardModel;Qb=Pa.AbstractFilterSource;Pa=com.kingdee.bos.qing.dsb.widget;Ka=Pa.AbstractCardWidgetCtrl;$b=Pa.AbstractBuiltinVisualWidgetCtrl;pc=Pa.AbstractQingReportWidgetCtrl;Bc=Pa.AbstractPanelWidgetCtrl;yc=Pa.AbstractComboboxWidgetCtrl;Gc=Pa.AbstractF7WidgetCtrl;Qc=Pa.AbstractCalendarWidgetCtrl})();(function(){var Pa=function(fb){fb.registerClass(Oa.WidgetType_Square,
kb);fb.registerClass(Oa.WidgetType_Longer,Mb);fb.registerClass(Oa.WidgetType_QingReport,oc);fb.registerClass(Oa.WidgetType_Panel,Ub);fb.registerClass(Oa.WidgetType_Combobox,Rb);fb.registerClass(Oa.WidgetType_F7,Ta);fb.registerClass(Oa.WidgetType_Calendar,Hb);fb.registerClass(Oa.WidgetType_CalendarYear,Ca);fb.registerClass(Oa.WidgetType_CalendarQuarter,Da);fb.registerClass(Oa.WidgetType_CalendarMonth,Eb);fb.registerClass(Oa.WidgetType_CalendarDay,vb)};Pa(com.kingdee.bos.qing.dsb.widget.DesktopWidgetCtrlRegister);
Pa(com.kingdee.bos.qing.dsb.widget.MobileWidgetCtrlRegister)})()})();
//qingVersionTag: 20250324