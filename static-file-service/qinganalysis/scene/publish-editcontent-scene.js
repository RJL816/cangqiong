var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(y,V,Q){y instanceof String&&(y=String(y));for(var z=y.length,ba=0;ba<z;ba++){var Aa=y[ba];if(V.call(Q,Aa,ba,y))return{i:ba,v:Aa}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(y,V,Q){if(y==Array.prototype||y==Object.prototype)return y;y[V]=Q.value;return y};$jscomp.getGlobal=function(y){y=["object"==typeof globalThis&&globalThis,y,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var V=0;V<y.length;++V){var Q=y[V];if(Q&&Q.Math==Math)return Q}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(y,V){var Q=$jscomp.propertyToPolyfillSymbol[V];if(null==Q)return y[V];Q=y[Q];return void 0!==Q?Q:y[V]};
$jscomp.polyfill=function(y,V,Q,z){V&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(y,V,Q,z):$jscomp.polyfillUnisolated(y,V,Q,z))};$jscomp.polyfillUnisolated=function(y,V,Q,z){Q=$jscomp.global;y=y.split(".");for(z=0;z<y.length-1;z++){var ba=y[z];if(!(ba in Q))return;Q=Q[ba]}y=y[y.length-1];z=Q[y];V=V(z);V!=z&&null!=V&&$jscomp.defineProperty(Q,y,{configurable:!0,writable:!0,value:V})};
$jscomp.polyfillIsolated=function(y,V,Q,z){var ba=y.split(".");y=1===ba.length;z=ba[0];z=!y&&z in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var Aa=0;Aa<ba.length-1;Aa++){var D=ba[Aa];if(!(D in z))return;z=z[D]}ba=ba[ba.length-1];Q=$jscomp.IS_SYMBOL_NATIVE&&"es6"===Q?z[ba]:null;V=V(Q);null!=V&&(y?$jscomp.defineProperty($jscomp.polyfills,ba,{configurable:!0,writable:!0,value:V}):V!==Q&&(void 0===$jscomp.propertyToPolyfillSymbol[ba]&&(Q=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[ba]=
$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(ba):$jscomp.POLYFILL_PREFIX+Q+"$"+ba),$jscomp.defineProperty(z,$jscomp.propertyToPolyfillSymbol[ba],{configurable:!0,writable:!0,value:V})))};$jscomp.polyfill("Array.prototype.find",function(y){return y?y:function(V,Q){return $jscomp.findInternal(this,V,Q).v}},"es6","es3");
$jscomp.polyfill("String.prototype.replaceAll",function(y){return y?y:function(V,Q){if(V instanceof RegExp&&!V.global)throw new TypeError("String.prototype.replaceAll called with a non-global RegExp argument.");return V instanceof RegExp?this.replace(V,Q):this.replace(new RegExp(String(V).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"),"g"),Q)}},"es_2021","es3");
(function(){function y(){z.call(this);var b=this,e=this.protectedMethod,g,A,fa,X,ra;this.setCurrentPublishSchema=function(a){ra=a};this.setUserOperatorPrevCheck=function(a){fa=a};this.setCloseResourceLock=function(a){};this.protectedHaveToCarryData=function(){return!1};this.protectedNeedToShowMessageBox=function(){return!0};this.protectedGetRemoteUrl=function(){var a=e.getUrlParamUtil().getParamPathPrefix();return(a?a:"/ierp")+"/qing/core.do"};this.protectedImportMoreCode=function(a){a.pushSkinJs("scene",
"skin");a.pushI18n("scene","scene")};this.protectedCustomInitEnv=function(a){a=$("<div>");a.css({position:"fixed",bottom:"3px",right:"1px",width:"180px",height:"18px",zIndex:"999"});xa(a);b.protectedNeedToShowMessageBox()&&Z(a);a.appendTo($(document.body));com.kingdee.bos.qing.integration.ImglibUrlParser.hookUrlParser()};var xa=function(a){ba.setCallback(function(){var d=new com.kingdee.bos.qing.support.Main;d.setParamLanguage(e.getUrlParamUtil().getParamLanguage());d.creatSupportUi(a)});ba.loadCss("support/support.css");
ba.loadJs("support/support-ui.js");ba.loadI18n("support","support")},Z=function(a){ba.setCallback(function(){var d=com.kingdee.bos.qing.common.Util.decodeParamFromUrl(window.location.search,"path");d=d?d:"/ierp";com.kingdee.bos.qing.message.common.Integration.setRemoteUrl(d+"/qing/messageManage.do");ka(d);var l=new com.kingdee.bos.qing.message.ui.Main;l.setFunOpenMessageDialog(function(){l.setViewSize(null,null,10,30)});l.setMessageWidth(80);l.getJqUi(25).appendTo(a)});ba.loadSkinCss("message","message");
ba.loadSkinJs("message","skin");ba.loadJs("message/message-manage-ui.js");ba.loadI18n("message","message")},ka=function(a){var d=com.kingdee.bos.qing.message.common.Integration;d.setImportJSCodeForManager(function(){var f=com.kingdee.bos.qing.CodeLoader;f.setCallback(function(){var m=com.kingdee.bos.qing.theme.message.panel.common.Integration;m.setFunPublishRemoteImpl(function(){var q=new com.kingdee.bos.qing.theme.message.panel.common.RemoteImpl;q.setRemoteUrl(a+"/qing/publishTo.do");return q});
m.setFunQingCenterAndMenuEntrance(function(q,r,t,B){r=Q.getUrlParamValue();var u=a+"/qing/publishEntrance.do";u=H.appendParamToUrl(u,"publishId",q);"extreport"==B?(u=H.appendParamToUrl(u,"appID","qing_rpt"),r&&(u=H.appendParamToUrl(u,"skin",r)),J.openNewTabInAppId(t,u,u,J.QING_RPT)):(r&&(u=H.appendParamToUrl(u,"skin",r)),J.openNewTabInAppId(t,u,u,J.QING_ANALYSIS))});m.setResourceRemoteUrl(a+"/qing/resource.do");m.setDataModelEntrance(function(q,r,t){var B=Q.getUrlParamValue();r=c.get("dataModeling",
"\u6570\u636e\u51c6\u5907")+"-"+r;var u=a+"/qing/dataModelingEntrance.do";u=H.appendParamToUrl(u,"themeID",q);u=H.appendParamToUrl(u,"isPreset",t);B&&(u=H.appendParamToUrl(u,"skin",B));J.openNewTabInAppId(r,u,u,J.QING_ANALYSIS)});m.setFunPublishContext(function(){var q=new com.kingdee.bos.qing.publish.common.PublishContext;q.setParamPathPrefix(a);q.setLappEntranceUrl(a+"/qing/lappEntrance.do");q.setSpaceID(k.getUrlParamValue("qingID"));return q});m.setFunPublishedEmailLoginViewUrl(function(){var q=
Q.getUrlParamValue(),r=k.getUrlParamValue("language"),t=a+"/qing/publishedEmailEntrance.do?publishId=(publishId)&kdcdc=(accountId)";q&&(t=H.appendParamToUrl(t,"skin",q));r&&(t=H.appendParamToUrl(t,"language",r));return t});m.setFunPublishedEmailAnonymousViewUrl(function(){var q=Q.getUrlParamValue(),r=k.getUrlParamValue("language"),t=a+"/index.html?userId=Guest&accountId=(accountId)&appNumber=qing&formId=qing_analysis_pub_email#/dform?appNumber=qing&formId=qing_analysis_pub_email&publishId=(publishId)";
q&&(t=H.appendParamToUrl(t,"skin",q));r&&(t=H.appendParamToUrl(t,"language",r));return t});m.setFunPublishContentEditEntrance(function(){return function(q,r,t){var B=com.kingdee.bos.qing.publish.model.PublishTargetType;if(t&&B.MOBILE==t){B=q.getPublishId();var u=q.getId()}else B=q.getId();var w=Q.getUrlParamValue(),la=k.getUrlParamValue("language");t=a+"/qing/publishContentEditEntrance.do";t=H.appendParamToUrl(t,"skin",w);t=H.appendParamToUrl(t,"language",la);t=H.appendParamToUrl(t,"publishId",B);
u&&(t=H.appendParamToUrl(t,"lappId",u));u=t;r&&(B="editPublishedContent-"+B,w=com.kingdee.bos.qing.publish.common.PublishSubscribeHelper,w.putSubscribe(B,r),t=H.appendParamToUrl(t,"subscribeKey",B),t=H.appendParamToUrl(t,"currentPageClientId",w.getCurrentPageClientId()));r=com.kingdee.bos.qing.framework.common.TabbedUiUtil;r.openNewTabInAppId(c.get("editPublishedContent","\u7f16\u8f91\u53d1\u5e03\u65b9\u6848-")+q.getName(),t,u,r.QING_ANALYSIS)}});m.setFunTimedPushContentEditEntrance(function(){return function(q){var r=
a+"/qing/timedPushContentEditEntrance.do",t=c.get("editTimedPushContent","\u7f16\u8f91\u63a8\u9001\u65b9\u6848");if(q instanceof com.kingdee.bos.qing.timedpush.model.EmailConfig){var B=q.getId(),u=q.getPublishSourceType();w=q.getSchemaSourceType();r=H.appendParamToUrl(r,"configId",B);r=H.appendParamToUrl(r,"publishSourceType",u);r=H.appendParamToUrl(r,"schemaType",w);r=H.appendParamToUrl(r,"pushTarget","email");t=t+"-"+q.getNameRule().getName();q.isSourceNameNotFound()&&(r=H.appendParamToUrl(r,"errorCode",
"2301001"))}else{B=q.getId();u=q.getPushTargetType();var w=q.getSchemaType();r=H.appendParamToUrl(r,"configId",B);r=H.appendParamToUrl(r,"pushTargetType",u);r=H.appendParamToUrl(r,"schemaType",w);r=H.appendParamToUrl(r,"pushTarget","lapp");t=t+"-"+q.getName();q.getSourceName()||(r=H.appendParamToUrl(r,"errorCode","2301001"))}q=Q.getUrlParamValue();w=k.getUrlParamValue("language");q&&(r=H.appendParamToUrl(r,"skin",q));w&&(r=H.appendParamToUrl(r,"language",w));q=com.kingdee.bos.qing.framework.common.TabbedUiUtil;
q.openNewTabInAppId(t,r,r,q.QING_ANALYSIS)}});m=com.kingdee.bos.qing.modeler.message.panel.common.Integration;m.setMessageRemoteUrl(a+"/qing_modeler/message.do");m.setFunOpenModelSetPage(function(q,r){var t=Q.getUrlParamValue(),B=c.get("modelSet","\u6a21\u578b\u96c6-")+r,u=a+"/qing_modeler/modelSetMainPage.do";u=H.appendParamToUrl(u,"modelSetId",q);u=H.appendParamToUrl(u,"modelSetName",r);u=H.appendParamToUrl(u,"currentPageClientId",com.kingdee.bos.qing.framework.common.RemoteFramework.getClientID());
t&&(u=H.appendParamToUrl(u,"skin",t));J.openNewTabInAppId(B,u,u,J.QING_MODELER)});m.setFunOpenModelDesign(function(q,r,t,B,u){var w=com.kingdee.bos.qing.modeler.message.panel.common.ModelType,la=Q.getUrlParamValue();u=(u=w.getModelTypeText(u))?u+"-"+t:t;w=a+"/qing_modeler/deployDesignerEntrance.do";w=H.appendParamToUrl(w,"modelSetId",q);w=H.appendParamToUrl(w,"modelId",r);w=H.appendParamToUrl(w,"modelName",t);w=H.appendParamToUrl(w,"modelDeployId",B);la&&(w=H.appendParamToUrl(w,"skin",la));J.openNewTabInAppId(u,
w,w,J.QING_MODELER)})});f.loadSkinCss("message","messagepanel");f.loadSkinJs("message","skin");f.loadJs("message/message-content-panel-management.js");f.loadI18n("message","messagepanel");f.loadSkinCss("qingmodeler/message","message-modeler-panel");f.loadSkinJs("qingmodeler/message","skin");f.loadJs("qingmodeler/message/message-content-panel-management.js");f.loadI18n("qingmodeler/message","message-modeler-panel")});var l=H.decodeParamFromUrl(location.search,"appID");d.setAppId(l)},ta=function(a){a=
new com.kingdee.bos.qing.publish.permission.PermLabelManageDialog(K());a.setSpaceID(k.getUrlParamValue("qingID"));a.showDialog()},N=function(a,d,l,f,m,q){var r=com.kingdee.bos.qing.publish.model.PublishSourceType,t=com.kingdee.bos.qing.publish.model.PublishTargetType;a!=r.EXTREPORT&&a!=r.DASHBOARD&&d!=t.GUIMENU?(a=new com.kingdee.bos.qing.publish.common.PublishFacade(K(),function(B){q&&q()},function(B,u){return 2301016==B?(ca().showPrompt(c.get("publishNoOperAuthExceptionCurtain","\u6ca1\u6709\u64cd\u4f5c\u6743\u9650\u3002"),
2E3),!0):!1}),d=l.getBizTag(),r=l.getDsbPublishId(),l.getRefToId()&&(d=l.getRefToId()),a.judgePublishOper(d,r,f,m)):q&&q()},va=function(){com.kingdee.bos.qing.timedpush.LappIntegration.syncDatacenterInfo(K())},da=function(){var a=e.getUrlParamUtil().getParamPathPrefix();com.kingdee.bos.qing.timedpush.LappIntegration.setLappPrivateUrl(a+"/qing/lappPrivateInfo.do")},wa=function(a,d,l,f,m,q){var r=e.getUrlParamUtil().getParamPathPrefix(),t=com.kingdee.bos.qing.publish.common,B=t.PublishContext;t=com.kingdee.bos.qing.schemamanage.model;
var u=t.SchemaAttrModel;t=t.SchemaModel;var w=e.getUrlParamUtil().getUrlParam("bizTag"),la=b.protectedHaveToCarryData(),L;com.kingdee.bos.qing&&com.kingdee.bos.qing.prepare&&com.kingdee.bos.qing.prepare.DataSourceInfoContext&&(L=com.kingdee.bos.qing.prepare.DataSourceInfoContext.getCurrentDataSourceInfo());var za=L&&L.hasDirectModeTable();L=new B;L.setSource(m);L.setBizTag(w);L.setCurrentSourceType(d);L.setHaveToCarryData(la);L.setHasDirectModeTable(za);L.setParamPathPrefix(r);L.setSchemaTag("Dashboard-Analysis"==
q?e.getUrlParamUtil().getUrlParam("schemaTag"):null);L.setSpaceID(k.getUrlParamValue("qingID"));d=new u;d.setSchemaType(u.SCHEMATYPE_SYSTEM);d.setIsDefault(!0);d.setSchemaName(F("sysPublishScheme","\u7cfb\u7edf\u9ed8\u8ba4\u65b9\u6848"));d.setSource(l);m=new t;m.setSchemaAttr(d);m.setSchemaContent(a.getJsonModelBook());a=m.toJsonObject();L.setCurrentContentModel(a);a=e.getUrlParamUtil().getParamTag();d=function(sa){sa+="/qinganalysis/lappPreviewEntrance.do";for(var O=window.location.search.substring(1).split("&"),
qa=0;qa<O.length;qa++){var ya=O[qa],h=ya.indexOf("=");if(-1!=h){var p=ya.substring(0,h);"clientID"!=p&&"safetyCode"!=p&&(ya=ya.substring(h+1),sa+=0>sa.indexOf("?")?"?":"&",sa+=p,sa+="=",sa+=ya)}}return sa};l==u.SCHEMASOURCE_SQUARE?(L.setScene(B.Scene.Square),l=d(r),l=H.appendParamToUrl(l,"view","10"),L.setMobilePreviewUrl(l),r=H.appendParamToUrl(r+"/qing/lappEntrance.do","tag",a),r=H.appendParamToUrl(r,"view","10"),L.setLappEntranceUrl(r)):l==u.SCHEMASOURCE_LONGER&&(L.setScene(B.Scene.Longer),L.setMobilePreviewUrl(d(r)),
r=H.appendParamToUrl(r+"/qing/lappEntrance.do","tag",a),L.setLappEntranceUrl(r));f&&(L.setRefToId(e.getUrlParamUtil().getUrlParam("publishId")),L.setDsbPublishId(f),L.setDashBoardAnalysis(!0));return L},Ca=function(a){var d=!1;if(a&&(a=a.tables)&&0<a.length)for(var l=0;l<a.length;l++)if(a[l].subViews){d=!0;break}return d},pa=function(a,d){fa?fa(function(l){var f=new com.kingdee.bos.qing.schemamanage.common.SchemaManageFacade(ua(),function(q){q.publishInfoPerCheck==y.PUBLISHINFO_PERMISSION_PUBLISHPLAN_EXIST?
a&&a(d):q.publishInfoPerCheck==y.THEME_IS_DEL?Ba($(document.body),"msg-warning",c.get("ThemeIsDel","\u8be5\u53d1\u5e03\u8bb0\u5f55\u7684\u6765\u6e90\u88ab\u5220\u9664")):q.publishInfoPerCheck==y.PUBLISHINFO_NOEXIST?Ba($(document.body),"msg-warning",c.get("publishInfoExist","\u53d1\u5e03\u8bb0\u5f55\u4e0d\u5b58\u5728\u6216\u5df2\u88ab\u5220\u9664")):q.publishInfoPerCheck==y.PERMISSION_CANCEL?Ba($(document.body),"msg-jurisdiction",c.get("notAuthority","\u60a8\u6ca1\u6709\u8be5\u53d1\u5e03\u8bb0\u5f55\u7684\u67e5\u770b\u6743\u9650, \u8bf7\u8054\u7cfb\u53d1\u5e03\u4eba")+
'"'+q.publishInfoUserName+'"'+c.get("authority","\u6388\u6743")):q.publishInfoPerCheck==y.PUBLSIHPLAN_DELETE&&Ba($(document.body),"msg-warning",c.get("publishPlanExist","\u8be5\u5206\u6790\u65b9\u6848\u4e0d\u5b58\u5728\u6216\u5df2\u88ab\u5220\u9664"))}),m=new com.kingdee.bos.qing.schemamanage.model.SchemaAttrModel;m.setFId(ra.getCurrentSchemaId());m.setSchemaName(ra.getCurrentSchemaName());f.checkPublishInfoAndAuthority(l,m)}):a&&a(d)},ua=function(){var a=e.getUrlParamUtil().getParamPathPrefix(),
d=e.getUrlParamUtil().getParamTag();a=(a?a:"/ierp")+"/qing/schemaManage.do";var l=new com.kingdee.bos.qing.RemoteImpl;l.setRemoteUrl(a);l.setTag(d);return l},Ba=function(a,d,l){a=new Aa;a.setOptionType(Aa.OPTION_OK);a.setButtonText(Aa.RETURN_OK,c.get("ISee","\u6211\u77e5\u9053\u4e86"));var f={};f.text=l;f.iconName=d;a.setMessage(f);a.setCustomPainter(function(m,q){var r=$("<div>");r.addClass("sa-ctrl-msgdlg-icon");D.background(r,q.iconName);var t=$("<div>");t.addClass("sa-ctrl-msgdlg-content");t.text(q.text);
m.append(r);m.append(t)});a.showDialog(380,280)},Ea=function(a,d,l){g?d(g):(new com.kingdee.bos.qing.core.Facade(a,function(f){g=f;d(f)},l)).getMeta()},x=function(a){g=null;Ea(b.getRemoteImpl(),a)},K=function(){var a=e.getUrlParamUtil().getParamPathPrefix(),d=e.getUrlParamUtil().getParamTag();a=(a?a:"/ierp")+"/qing/publishTo.do";var l=new com.kingdee.bos.qing.RemoteImpl;l.setRemoteUrl(a);l.setTag(d);return l},aa=function(){var a=e.getUrlParamUtil().getParamPathPrefix(),d=Q.getUrlParamValue(),l=e.getUrlParamUtil().getParamLanguage();
a=(a?a:"/ierp")+"/index.html?userId=Guest&accountId=(accountId)&appNumber=qing&formId=qing_analysis_pub_email#/dform?appNumber=qing&formId=qing_analysis_pub_email&publishId=(publishId)";d&&(a=H.appendParamToUrl(a,"skin",d));l&&(a=H.appendParamToUrl(a,"language",l));return a},Y=function(){var a=e.getUrlParamUtil().getParamPathPrefix(),d=Q.getUrlParamValue(),l=e.getUrlParamUtil().getParamLanguage();a=(a?a:"/ierp")+"/qing/publishedEmailEntrance.do?publishId=(publishId)&kdcdc=(accountId)";d&&(a=H.appendParamToUrl(a,
"skin",d));l&&(a=H.appendParamToUrl(a,"language",l));return a},M=function(){return function(a,d,l){var f=com.kingdee.bos.qing.publish.model.PublishTargetType;if(l&&f.MOBILE==l){l=a.getPublishId();var m=a.getId();var q=a.getLappUserType()}else l=a.getId();f=e.getUrlParamUtil().getParamPathPrefix();var r=Q.getUrlParamValue(),t=e.getUrlParamUtil().getParamLanguage();f=H.appendParamToUrl((f?f:"/ierp")+"/qing/publishContentEditEntrance.do","skin",r);f=H.appendParamToUrl(f,"language",t);f=H.appendParamToUrl(f,
"publishId",l);m&&(f=H.appendParamToUrl(f,"lappId",m));q&&(f=H.appendParamToUrl(f,"lappUserType",q));m=f;d&&(q="editPublishedContent-"+l,l=com.kingdee.bos.qing.publish.common.PublishSubscribeHelper,l.putSubscribe(q,d),f=H.appendParamToUrl(f,"subscribeKey",q),f=H.appendParamToUrl(f,"currentPageClientId",l.getCurrentPageClientId()));J.openNewTab(c.get("editPublishedContent","\u7f16\u8f91\u53d1\u5e03\u65b9\u6848-")+a.getName(),f,m)}},ma=function(){return function(a){var d=e.getUrlParamUtil().getParamPathPrefix();
d=(d?d:"/ierp")+"/qing/timedPushContentEditEntrance.do";var l=c.get("editTimedPushContent","\u7f16\u8f91\u63a8\u9001\u65b9\u6848");if(a instanceof com.kingdee.bos.qing.timedpush.model.EmailConfig){var f=a.getId(),m=a.getPublishSourceType();q=a.getSchemaSourceType();d=H.appendParamToUrl(d,"configId",f);d=H.appendParamToUrl(d,"publishSourceType",m);d=H.appendParamToUrl(d,"schemaType",q);d=H.appendParamToUrl(d,"pushTarget","email");l=l+"-"+a.getNameRule().getName();a.isSourceNameNotFound()&&(d=H.appendParamToUrl(d,
"errorCode","2301001"))}else{f=a.getId();m=a.getPushTargetType();var q=a.getSchemaType();d=H.appendParamToUrl(d,"configId",f);d=H.appendParamToUrl(d,"pushTargetType",m);d=H.appendParamToUrl(d,"schemaType",q);d=H.appendParamToUrl(d,"pushTarget","lapp");l=l+"-"+a.getName();a.getSourceName()||(d=H.appendParamToUrl(d,"errorCode","2301001"))}a=Q.getUrlParamValue();q=e.getUrlParamUtil().getParamLanguage();a&&(d=H.appendParamToUrl(d,"skin",a));q&&(d=H.appendParamToUrl(d,"language",q));J.openNewTab(l,d)}},
F=function(a,d){return c.get(a,d)},ca=function(){A||(A=new com.kingdee.bos.qing.ui.component.MessageCurtain,A.getJqUi().appendTo($(document.body)));return A};e.getMLS=F;e.importLinkage=function(a){a.pushSkinJs("linkage","skin");a.pushJs("linkage/linkage.js");a.pushSkinCss("linkage","linkage")};e.importForSchema=function(a){a.pushSkinJs("schema-manage","skin-initialize");a.pushJs("schema-manage/schema-manage-initialize.js");a.pushI18n("schema-manage","schema-initialize");a.pushSkinCss("schema-manage",
"schema-manage");a.pushJs("schema-manage/schema-manage-ui.js");a.pushI18n("schema-manage","schema-ui")};e.importForPublish=function(a){a.pushJs("biz-common/qing-biz-common.js");a.pushSkinCss("biz-common","biz-common");a.pushSkinJs("biz-common","skin");a.pushI18n("biz-common","biz-common");a.pushSkinJs("imagelib","skin");a.pushSkinCss("imagelib","qing-imagelib");a.pushJs("imagelib/imagelib.js");a.pushI18n("imagelib","imagelib");a.pushJs("common/qing-schedule.js");a.pushI18n("common","qing-schedule");
a.pushSkinCss("publish","qing-publish");a.pushSkinJs("publish","skin");a.pushI18n("publish","publish");a.pushJs("publish/qing-publish.js");a.pushSkinCss("timedpush","qing-timedpush");a.pushSkinJs("timedpush","skin");a.pushI18n("timedpush","timedpush");a.pushJs("timedpush/qing-timedpush.js");a.pushJs("lightapp/common/qing-lapp-env.js");a.pushJs("timedpush/qing-timedpush-lapp.js");a.pushJs("timedpush/html2canvas.js")};e.importForMap=function(a){a.pushSkinJs("map-designer","integration-skin");a.pushJs("map-designer/map-integration.js");
a.pushSkinCss("map-designer","map-integration");a.pushI18n("map-designer","map-integration")};e.hookLongerPublishTo=function(a,d,l,f,m,q){com.kingdee.bos.qing.publish.common.UserOperationReporter.hookCollector(function(L,za,sa){com.kingdee.bos.qing.behavior.BehaviorManager.interestInBehavior(L,za,0,sa)});d=com.kingdee.bos.qing.publish.model;var r=d.PublishTargetType;d=com.kingdee.bos.qing.schemamanage.model;var t=d.SchemaAttrModel,B=function(L){var za=com.kingdee.bos.qing.publish.common.PublishFactory,
sa=L.getUserObject(),O=L.getText().replace("...",""),qa=wa(a,l,t.SCHEMASOURCE_LONGER,f,m,q);N(l,sa,qa,"longer",n.ANALYSIS_PUBLISH,function(){var ya=za.createPublishToDialog(O,K(),qa,sa,M());ya.setOuterMessageCurtain(ca());ya.showDialog()})},u=com.kingdee.bos.qing.ui.component.MenuItemModel;d=new com.kingdee.bos.qing.ui.component.MenuModel;var w=new u(function(L){pa(B,L)});w.setUserObject(r.APPMENU);w.setText(F("toAppMenu","\u5e94\u7528\u83dc\u5355..."));d.addItemModel(w);w=new u(function(L){pa(B,
L)});w.setUserObject(r.CENTER);w.setText(F("toAnalysisCenter","\u6570\u636e\u5de5\u4f5c\u53f0\u9605\u89c8\u5939..."));d.addItemModel(w);w=new u(function(L){pa(B,L)});w.setUserObject(r.MOBILE);w.setText(F("toMobile","\u79fb\u52a8\u8f7b\u5e94\u7528..."));d.addItemModel(w);va();da();d.addSeperator();var la=function(){var L=com.kingdee.bos.qing.publish.common.PublishManagerDialog,za=wa(a,l,com.kingdee.bos.qing.schemamanage.model.SchemaAttrModel.SCHEMASOURCE_LONGER);(new L(K(),za,M())).showDialog()};w=
new u(function(L){pa(la,L)});w.setUserObject();w.setText(F("publishManager","\u53d1\u5e03\u7ba1\u7406")+"...");d.addItemModel(w);r=new u(ta);r.setUserObject();r.setText(F("permLabelManage","\u6743\u9650\u6807\u7b7e\u7ba1\u7406")+"...");d.addItemModel(r);r=F("publishTo","\u53d1\u5e03\u5230");return a.getConductor().appendToolbarMenu(d,"publish_to",r)};e.hookSquarePublishTo=function(a,d,l){com.kingdee.bos.qing.publish.common.UserOperationReporter.hookCollector(function(B,u,w){com.kingdee.bos.qing.behavior.BehaviorManager.interestInBehavior(B,
u,0,w)});d=com.kingdee.bos.qing.publish.model;var f=d.PublishTargetType;d=com.kingdee.bos.qing.schemamanage.model;var m=d.SchemaAttrModel,q=function(B){var u=com.kingdee.bos.qing.publish.common.PublishFactory,w=B.getUserObject(),la=B.getText().replace("...",""),L=wa(a,l,m.SCHEMASOURCE_SQUARE);N(l,w,L,"square",n.CARD_PUBLISH,function(){var za=u.createPublishToDialog(la,K(),L,w,M());za.setOuterMessageCurtain(ca());za.showDialog()})},r=com.kingdee.bos.qing.ui.component.MenuItemModel;d=new com.kingdee.bos.qing.ui.component.MenuModel;
var t=new r(q);t.setUserObject(f.CARD_REPOSITORY);t.setText(F("toCardRepository","\u5361\u7247\u5e93..."));d.addItemModel(t);q=new r(q);q.setText(F("toMobile","\u79fb\u52a8\u8f7b\u5e94\u7528..."));q.setUserObject(f.MOBILE);d.addItemModel(q);va();da();d.addSeperator();f=new r(function(){var B=com.kingdee.bos.qing.publish.common.PublishManagerDialog,u=wa(a,l,com.kingdee.bos.qing.schemamanage.model.SchemaAttrModel.SCHEMASOURCE_SQUARE);(new B(K(),u,M())).showDialog()});f.setUserObject();f.setText(F("publishManager",
"\u53d1\u5e03\u7ba1\u7406")+"...");d.addItemModel(f);f=new r(ta);f.setUserObject();f.setText(F("permLabelManage","\u6743\u9650\u6807\u7b7e\u7ba1\u7406")+"...");d.addItemModel(f);f=F("publishTo","\u53d1\u5e03\u5230");return a.getConductor().appendToolbarMenu(d,"publish_to",f)};e.hookPublishManager=function(a,d,l){var f=F("publishManager","\u53d1\u5e03\u7ba1\u7406");return a.getConductor().appendToolbarButton(function(){var m=com.kingdee.bos.qing.publish.common.PublishManagerDialog,q=wa(a,d,l);(new m(K(),
q,M())).showDialog()},"publish_manager",f)};e.hookCloseTab=function(a){var d=F("closeTab","\u9000\u51fa");return a.getConductor().appendToolbarButton(function(){a.getConductor().isDirty()?P.showConfirmExitDialog():J.closeCurrentTab()},"error_close",d)};e.hookShareTo=function(a,d,l,f,m){com.kingdee.bos.qing.publish.common.UserOperationReporter.hookCollector(function(O,qa,ya){com.kingdee.bos.qing.behavior.BehaviorManager.interestInBehavior(O,qa,0,ya)});var q=function(O){O=F("yzjCommunicate","\u4e91\u4e4b\u5bb6\u6c9f\u901a...").replace("...",
"");var qa=wa(a,f,d);O=com.kingdee.bos.qing.timedpush.PublishToYunzhijiaDialogFactory.createDialog(O,K(),qa);O.setOuterMessageCurtain(ca());O.showDialog()},r=function(O){O=com.kingdee.bos.qing.CodeLoader.createSafety();O.pushJs("yzj-web/qingjs.js");O.pushJs("yzj-web/imcloud.js");O.pushJs("yzj-web/imsdkerp.js");O.pushJs("yzj-web/imShare.js");O.pushSkinCss("yzj-web","imcloud");O.pushSkinCss("yzj-web","imsdk");O.pushSkinCss("yzj-web","imsdkerp");O.load(function(){})};l=new ia;(new na(function(O){window.beLoadedImCloud?
q(O):r(O)})).setText(F("yzjCommunicate","\u4e91\u4e4b\u5bb6\u6c9f\u901a..."));var t=com.kingdee.bos.qing.schemamanage.model.SchemaAttrModel,B=b.protectedHaveToCarryData(),u;com.kingdee.bos.qing&&com.kingdee.bos.qing.prepare&&com.kingdee.bos.qing.prepare.DataSourceInfoContext&&(u=com.kingdee.bos.qing.prepare.DataSourceInfoContext.getCurrentDataSourceInfo());u=u&&u.hasDirectModeTable();var w=com.kingdee.bos.qing.publish.model.PublishTargetType;if(!u&&!B&&d==t.SCHEMASOURCE_LONGER){var la=function(O){var qa=
O.getText().replace("...",""),ya=wa(a,f,d,m);N(f,w.EMAIL,ya,"longer",n.ANALYSIS_TIMEPUSH,function(){var h=new com.kingdee.bos.qing.timedpush.EmailPublishConfigDialog(qa,K(),ya,aa(),Y(),ma(),a);h.setOuterMessageCurtain(ca());h.showDialog()})},L=new na(function(O){pa(la,O)});L.setText(F("emailSchedulePush","\u90ae\u4ef6\u5b9a\u65f6\u63a8\u9001..."));l.addItemModel(L)}if(!u&&!B){var za=function(O){var qa=wa(a,f,d,m),ya="longer",h=n.ANALYSIS_TIMEPUSH;d==t.SCHEMASOURCE_SQUARE&&(ya="square",h=n.CARD_TIMEPUSH);
N(f,w.EMAIL,qa,ya,h,function(){var p=new com.kingdee.bos.qing.timedpush.LappSchedulePush,v=O.getText().replace("...","");p.createDialog(v,K(),qa,ma(),a)})};B=new na(function(O){pa(za,O)});B.setText(F("mobileSchedulePush","\u79fb\u52a8\u7aef\u5b9a\u65f6\u63a8\u9001")+"...");l.addItemModel(B)}l.addSeperator();var sa=function(){var O=com.kingdee.bos.qing.publish.common.PushManager,qa=wa(a,f,d);O=new O(ma());var ya=com.kingdee.bos.qing.timedpush;O.registerEmailPushPanelConstructor(ya.EmailConfigManagePanel);
O.initEmailPushConfig(K(),aa(),Y());O.registerLappPushPanelConstructor(ya.LappPushManagePanel);O.initLappPushConfig(function(h,p,v){return com.kingdee.bos.qing.publish.common.PublishFactory.createPublishFacade(com.kingdee.bos.qing.publish.model.PublishTargetType.MOBILE,K(),h,p,v)},qa);O.showDialog()};B=new na(function(O){pa(sa,O)});B.setUserObject();B.setText(F("pushManager","\u5b9a\u65f6\u63a8\u9001\u7ba1\u7406")+"...");l.addItemModel(B);l=a.getConductor().appendToolbarMenu(l,"btn_communicate",F("timedPush",
"\u5b9a\u65f6\u63a8\u9001"));l.addActionListener(function(){window.beLoadedImCloud||(window.funCallback=q)});return l};e.initDesigntimeLinkage=function(){var a=e.getUrlParamUtil().getParamPathPrefix(),d=(a?a:"/ierp")+"/qing/linkage.do",l=com.kingdee.bos.qing.integration.LinkageJumper;a=new com.kingdee.bos.qing.linkage.LinkageManage;a.initDesigntime(d,l.jump);d=e.getUrlParamUtil().getParamTag();a.setCurrentLinkageTag(d)};e.loadMeta=Ea;e.reloadMeta=x;e.hookRefresh=function(a,d){var l=e.getMLS("refresh",
"\u6570\u636e\u66f4\u65b0"),f=function(){d.restart();d.setExtractDataFinishedSuccessCallback(function(m){m||Ca(g)?x(function(q){var r=a.getJsonModelBook();a.prepareMeta(q);a.setJsonModelBook(r)}):a.reExecute()})};return a.getConductor().appendToolbarButton(function(){pa(f)},"btn_reset",l)};e.getMessageCurtain=ca;e.hookSetCurrentTabStatus=function(a){a.getConductor().setDirtyListener(function(d){P.setTabStatus(d)})};e.loadPublishOperList=function(a,d,l,f,m){X?l(X):(new com.kingdee.bos.qing.publish.common.PublishFacade(K(),
function(q){X=q;l(X)},m)).loadPublishOperList(a,d,f)};e.loadPublishOperModel=function(a,d,l,f){X?l(X):(new com.kingdee.bos.qing.publish.common.PublishFacade(K(),function(m){X=m.noOperValueMap;l(X)},f)).loadPublishOperModel(a,d)};e.registMapMapLibrary=function(a){com.kingdee.bos.qing.map.common.Integration.setRemoteUrl(a+"/qing/mapManage.do");var d=new com.kingdee.bos.qing.map.integration.MapSelectorDialog;com.kingdee.bos.qing.core.MapLibraryRegister.registerTemplateSelector(function(l,f){d.setParamPathPrefix(a);
d.showDialog(l,f)})}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.scene&&(com.kingdee.bos.qing.scene={});"undefined"==typeof com.kingdee.bos.qing.scene.common&&(com.kingdee.bos.qing.scene.common={});"undefined"==typeof com.kingdee.bos.qing.scene.common.designer&&(com.kingdee.bos.qing.scene.common.designer=
{});var V=com.kingdee.bos.qing.scene.common.designer,Q,z,ba,Aa,D,H,c,J,ia,na,P,k;(function(){var b=com.kingdee.bos.qing;Q=b.SkinUtil;z=b.AbstractDesignerScene;ba=b.CodeLoader;k=b.Seer;b=com.kingdee.bos.qing.common;H=b.Util;b=com.kingdee.bos.qing.framework.common;c=b.MultilanguageManager.createPackageAccessor(com.kingdee.bos.qing.scene);J=b.TabbedUiUtil;b=com.kingdee.bos.qing.ui.component;ia=b.MenuModel;na=b.MenuItemModel;Aa=b.MessageDialog;D=b.Icons;b=com.kingdee.bos.qing.integration;P=b.TabStatusHelper})();
V.AbstractDesignerSceneImpl=y;V.LongerDesignerOperationJudgerModel=function(b){com.kingdee.bos.qing.core.LongerDesignerOperationJudger.call(this);b&&0!=b&&(this.protectedParseDesignable=function(){return 0==(b&n.ANALYSIS_EDITABLE)},this.protectedParseDataDetailReadable=function(){return 0==(b&n.ANALYSIS_DETAIL)},this.protectedParseExportable=function(){return 0==(b&n.ANALYSIS_EXPORT)},this.protectedParsePrintable=function(){return 0==(b&n.ANALYSIS_PRINT)},this.protectedParsePublishable=function(){return 0==
(b&n.ANALYSIS_PUBLISH)},this.protectedParseTimingPushable=function(){return 0==(b&n.ANALYSIS_TIMEPUSH)})};V.SquareDesignerOperationJudgerModel=function(b){com.kingdee.bos.qing.core.SquareDesignerOperationJudger.call(this);b&&0!=b&&(this.protectedParsePublishable=function(){return 0==(b&n.CARD_PUBLISH)},this.protectedParseTimingPushable=function(){return 0==(b&n.CARD_TIMEPUSH)})};V.LongerDesignerOperationJudger=function(){com.kingdee.bos.qing.core.LongerDesignerOperationJudger.call(this);var b=this;
this.protectedParseDesignable=function(){return b.isDesignable()};this.protectedParseDataDetailReadable=function(){return b.isDataDetailReadable()};this.protectedParseExportable=function(){return b.isExportable()};this.protectedParsePrintable=function(){return b.isPrintable()};this.protectedParsePublishable=function(){return b.isPublishable()};this.protectedParseTimingPushable=function(){return b.isTimingPushable()}};var n={};V.OperCodeType=n;n.ANALYSIS_EDITABLE=2;n.ANALYSIS_EXPORT=4;n.ANALYSIS_PRINT=
8;n.ANALYSIS_PUBLISH=16;n.ANALYSIS_TIMEPUSH=32;n.ANALYSIS_DETAIL=64;n.CARD_PUBLISH=256;n.CARD_TIMEPUSH=512;n.ENTRY_ANALYSIS=1;n.ENTRY_SQUARE=128;y.THEME_IS_DEL="Theme is Delete";y.PUBLISHINFO_PERMISSION_PUBLISHPLAN_EXIST="success";y.PUBLISHINFO_NOEXIST="PublishInfo Not Exist";y.PERMISSION_CANCEL="Not Permission";y.PUBLSIHPLAN_DELETE="Publish Not Exist"})();(function(){function y(){k.call(this);var x,K,aa,Y,M,ma;this.setIsSquare=function(F){aa=F};this.protectedIsSquare=function(){return aa};this.protectedInitDesigner=function(F){F.getConductor().insertToolbarButton(function(ca){K(F)},null,g.get("finish","\u5b8c\u6210"));F.getConductor().insertToolbarSeperator();F.setDesignerOperationJudger(M?null:Y,M?Y:null);F.setAdditionalFilterApi(ma)};this.protectedLoading=function(F,ca){x(F,ca)};this.setSchemaLoader=function(F){x=F};this.setSchemaSaver=function(F){K=
F};this.setDesignerOperationJudger=function(F){Y=F};this.setSquareOrLonger=function(F){M=F};this.protectedIsSquare=function(){return M};this.setAdditionalFilterApi=function(F){ma=F}}function V(){com.kingdee.bos.qing.dashboard.AbstractImportUi.call(this);this.protectedInitUi=function(){var x=new ra;x.setText(g.get("fromCardLibrary","\u4ece\u5361\u7247\u5e93\u590d\u5236\u65b9\u6848"));return x};this.doNext=function(x,K,aa){K=x.getDsbRemoteImpl();var Y=new Q;Y.setStepContentInfo(x);Y.setDsbRemoteImpl(K);
aa([Y])}}function Q(){com.kingdee.bos.qing.dashboard.AbstractImportStep.call(this);var x=this.protectedMethod,K,aa,Y,M,ma,F,ca;this.setDsbRemoteImpl=function(a){M=a};this.setStepContentInfo=function(a){ma=a};this.over=function(a){a&&(a=ma.getAllStepOverCallback())&&a(Y,aa,!1,F,ca)};this.isLastStep=function(){return!0};this.getSubTitle=function(){return g.get("selectCard","\u9009\u62e9\u8981\u590d\u5236\u7684\u5361\u7247")};this.getSuggestedDialogSize=function(){return[810,580]};this.protectedCreateUi=
function(){var a=e.decodeParamFromUrl(location.search,"path"),d=(a?a:"/ierp")+"/qing/publishTo.do",l=new com.kingdee.bos.qing.RemoteImpl;l.setRemoteUrl(d);K=new com.kingdee.bos.qing.publish.CardSelector(l);K.setOuterMessageCurtain(x.getMessageCurtain());K.setParamPathPrefix(a);K.setSingleSelected(!0);return K.getJqUi()};this.intoThisStep=function(a,d){};this.outThisStep=function(a,d){if(a)d();else if(a=K.getSelectedPublishModels(),0<a.length){var l=a[0];a=l.getSchemeId();aa=l.getName();l=l.getId();
(new com.kingdee.bos.qing.dashboard.DsbFacade(M,function(f){f.noModeling?x.getMessageCurtain().showPrompt(g.get("noModeling","\u8be5\u5361\u7247\u5bf9\u5e94\u7684\u4e3b\u9898\u6ca1\u6709\u8fdb\u884c\u6570\u636e\u51c6\u5907\uff0c\u5361\u7247\u65e0\u6cd5\u4f7f\u7528\u3002")):f.noTheme?x.getMessageCurtain().showPrompt(g.get("noTheme","\u8be5\u5361\u7247\u5bf9\u5e94\u7684\u4e3b\u9898\u5df2\u88ab\u5220\u9664\uff0c\u5361\u7247\u65e0\u6cd5\u4f7f\u7528\u3002")):(Y=f.ref,F=f.model,ca=f.operation,d())},function(f,
m){return"900001"==f?(d(),x.getMessageCurtain().showError(g.get("failToloadCardContent","\u52a0\u8f7d\u5361\u7247\u65b9\u6848\u5931\u8d25\u3002")),!0):!1})).getCardReferenceMap(l,a)}else a=g.get("chooseImportCard","\u8bf7\u9009\u62e9\u8981\u5f15\u5165\u7684\u5361\u7247\u3002"),x.getMessageCurtain().showPrompt(a,2E3)}}function z(){com.kingdee.bos.qing.dashboard.AbstractImportUi.call(this);var x=z.LONGER_TYPE,K=com.kingdee.bos.qing.publish.env.PublishAppMenuFolderNode;this.protectedInitUi=function(){var Y=
new ra;x===z.EXTREPORT_TYPE?Y.setText(g.get("fromAppMenuRef","\u4ece\u5e94\u7528\u83dc\u5355\u5f15\u7528")):Y.setText(g.get("fromAppMenu","\u4ece\u5e94\u7528\u83dc\u5355\u590d\u5236\u65b9\u6848"));return Y};this.doNext=function(Y,M,ma){var F=Y.getDsbRemoteImpl();F=new com.kingdee.bos.qing.dashboard.CommonDsbDesignerFacade(F,function(ca){var a=ca.appmenu;ca=ca.publish;var d=!1,l=!0,f=new K;f.fromJsonObject(a);f=f.getChildren();a=[];for(var m=0;m<f.length;m++)aa(a,f[m]);for(m=0;m<ca.length;m++)ca[m].publishAppMenuBO.isPreset?
d=!0:l=!1;if(0==a.length)M.showPrompt(g.get("noPublish","\u6682\u65e0\u53d1\u5e03\u3002"));else{switch(x){case z.LONGER_TYPE:f=new Aa;break;case z.EXTREPORT_TYPE:f=new J;break;default:throw Error("do not support this type!");}f.setAppmenu(a);f.setAppmenuPublish(ca);f.setStepContentInfo(Y);f.showPresetFilter(d,l);ma([f]);f.refreshTable()}},function(ca,a){ca=a.toString();return"9"==ca.substr(0,1)&&6==ca.length?(M.showError(g.get("failToGetAppMenu","\u83b7\u53d6\u5e94\u7528\u83dc\u5355\u5931\u8d25\u3002")),
!0):!1});x==z.LONGER_TYPE&&F.loadAppMenuTree();x==z.EXTREPORT_TYPE&&F.loadAppMenuTreeForExtreport()};var aa=function(Y,M){Y.push(M);if(M instanceof K&&(M=M.getChildren()))for(var ma=0;ma<M.length;ma++)aa(Y,M[ma])};this.protectedMethod={setImportType:function(Y){x=Y}}}function ba(){function x(C){KTDefaultCellRender.call(this,C);var S=this,T=this.paintCellUI;this.paintCellUI=function(ea,U){var W=S.getCurrentRow(),oa=S.getCurrentColIdx();if(S.getCurrentRowIdx()<N.getHeadRowCount()||1==oa||2==oa)T(ea,
U);else if(0==oa){U=W.getUserObject();W=new ra;ya.addElement(W);ca&&ca.getPublishAppMenuBO().formParams.publishId==U.getPublishAppMenuBO().formParams.publishId&&W.setChecked(!0);W.setUserObject(U);oa=W.getJqUi();W=$("<div class='appmenu-publish-item-btn-name'>");if(O){var ja=U.getPublishAppMenuBO().qingMenuName;if(O&&ja){var Da=O.toUpperCase(),Fa=ja.toUpperCase(),Ga=Fa.split(Da),Ia=Da.length;for(Ja in Ga){var Ha=Fa.indexOf(Ga[Ja]),Ma=ja.substr(La,Ga[Ja].length);Ha+=Ga[Ja].length;var Ka=Fa.length-
Ha;Fa=Fa.substr(Ha,Ka);ja=ja.substr(Ha,Ka);Ha=$("<span>");Ha.text(Ma);Ha.appendTo(W);if(Ja!=Ga.length-1&&1<Ga.length){var La=Fa.indexOf(Da);Ma=ja.substr(La,Ia);Ha=La+Ia;Ka=Fa.length-Ha;Fa=Fa.substr(Ha,Ka);ja=ja.substr(Ha,Ka);Ha=$("<span>");Ha.text(Ma);Ha.css("color","red");Ha.clone().appendTo(W)}}}else W.text(ja)}else W.text(U.getPublishAppMenuBO().qingMenuName);oa.addClass("appmenu-publish-item-btn");oa.appendTo(ea);if(U.getPublishAppMenuBO().isPreset){var Ja=$("<div>");Ja.text(g.get("preset","\u9884\u7f6e"));
Ja.addClass("appmenu-publish-item-btn-preset-tag");Ja.appendTo(ea)}W.appendTo(ea)}}}com.kingdee.bos.qing.dashboard.AbstractImportStep.call(this);var K=this,aa=this.protectedMethod,Y,M,ma,F,ca,a,d,l,f,m,q,r=com.kingdee.bos.qing.publish.common.FilterModelType,t=com.kingdee.bos.qing.publish.common.CardFilterType,B,u,w=!1,la=[new t(g.get("myLonger","\u6211\u7684\u5206\u6790"),!1),new t(g.get("presetLonger","\u9884\u7f6e\u5206\u6790"),!0)],L=[void 0,void 0],za=!1,sa,O="",qa,ya=new Z;ya.addChangedListener(function(C,
S){ca=C.getUserObject()?C.getUserObject():ca});var h=new ta;h.setFormatString("yyyy-MM-dd HH:mm:ss");this.isLastStep=function(){return!1};this.setStepContentInfo=function(C){Y=C};this.setAppmenu=function(C){M=C};this.setAppmenuPublish=function(C){ma=C};this.showPresetFilter=function(C,S){u=C;(w=S)&&la.reverse()};this.refreshTable=function(){m&&N.refresh(m)};this.getSubTitle=function(){return g.get("selectAppmenu","\u9009\u62e9\u5df2\u53d1\u5e03\u9879")};this.protectedCreateUi=function(){var C=$("<div>"),
S=$("<div>"),T=v,ea=new r;ea.setSearchType(la);ea.setSelectedChangedListener(T);B=ea.getJqUi();B.css({top:"-4px",left:"6px"});B.appendTo(S);!u&&B.hide();sa?T=sa.getJqUi():(sa=new va,sa.addSearchListener(G),sa.setSearchListenerDelay(100),sa.setPlaceholder(g.get("searchBoxPlaceholder","\u641c\u7d22\u53d1\u5e03\u540d\u79f0")),sa.setShowSearchIcon(!0),T=sa.getJqUi(),T.addClass("import-longer-from-appmenu-search-box"),T.css({position:"relative",width:"175px",height:"23px"}));T.appendTo(S);S.appendTo(C);
S=$("<div>");S.addClass("import-longer-from-appmenu");for(T=0;T<M.length;T++){ea=M[T];var U=ea;var W=[];for(var oa=U.getAppId(),ja=U.getAppMenuId(),Da=U.getAppMenuId2(),Fa=oa?ja?Da?Da:ja:oa:null,Ga=0;Ga<ma.length;Ga++)U=new H,U.fromJsonObject(ma[Ga]),oa=U.getPublishAppMenuBO().appId,ja=U.getPublishAppMenuBO().appMenuId,Da=U.getPublishAppMenuBO().appMenuId2,Fa===(oa?ja?Da?Da:ja:oa:null)&&W.push(U);W&&0<W.length&&ea.setPublishModels(W)}F=new D;qa=a=E();F.setCurrentNode(qa);F.setTreeItemSelectedListener(R);
p();F.getJqUi(M).appendTo(S);f=$("<div>");f.addClass("appmenu-publish-table");m=N.createTable();N.bindTableListenerForCtrl(m);T=new x(m);T.setOutsideVisible(!1);m.setCellRender(T);m.addColumns(3);m.getColumn(0).setWidth(220);m.getColumn(1).setWidth(90);m.getColumn(2).setWidth(150);T=N.createHeadRow(m);T.getCell(0).setValue(g.get("publishName","\u53d1\u5e03\u540d\u79f0"));T.getCell(1).setValue(g.get("publishPerson","\u53d1\u5e03\u4eba"));T.getCell(2).setValue(g.get("publishTime","\u53d1\u5e03\u65f6\u95f4"));
T=a.getPublishModels();ea=!1;for(W=0;W<T.length;W++)ja=T[W],w==ja.getPublishAppMenuBO().isPreset&&(ea||(ca=ja,ea=!0),oa=N.createRow(m),oa.setUserObject(ja),oa.getCell(0).setValue(ja.getPublishAppMenuBO().name),oa.getCell(1).setValue(ja.getPublishPersonName()),ja=Number(ja.getPublishAppMenuBO().formParams.publishTime),oa.getCell(2).setValue(h.format(ja)));N.refresh(m);d=$(m.getUI());d.appendTo(f);f.appendTo(S);S.appendTo(C);return C};var p=function(){for(var C=0;C<M.length;C++)M[C].setIsShow(!1);for(C=
0;C<M.length;C++){var S;if(S=M[C].getPublishModels())a:{S=M[C].getPublishModels();for(var T=0;T<S.length;T++)if(S[T].getPublishAppMenuBO().isPreset==w){S=!0;break a}S=!1}if(S)for(S=M[C],S.setIsShow(!0);S.getParentNode()&&S.getParentNode().getDisplayName();)S=S.getParentNode(),S.getIsShow()||S.setIsShow(!0)}},v=function(C,S,T){w=T.getTypeId();p();w?(L[1]=F.getCurrentNode(),L[0]||(C=E(),L[0]=C),R(L[0]),F.setCurrentNode(L[0])):(L[0]=F.getCurrentNode(),L[1]||(C=E(),L[1]=C),R(L[1]),F.setCurrentNode(L[1]));
G()},E=function(){for(var C=0;C<M.length;C++){for(var S=M[C],T=S.getPublishModels(),ea=[],U=0;T&&U<T.length;U++)T[U].getPublishAppMenuBO().isPreset==w&&ea.push(T[U]);if(T&&0<ea.length)return S}},G=function(){O=sa.getText().trim();if(0<O.length){za=!0;for(var C={},S=0;S<M.length;S++){var T=0,ea=M[S],U=ea.getPublishModels();if(U&&0<U.length)for(var W=0;W<U.length;W++){var oa=U[W],ja=-1<oa.getPublishAppMenuBO().qingMenuName.toUpperCase().indexOf(O.toUpperCase());w==oa.getPublishAppMenuBO().isPreset&&
ja&&T++}W=ea;ea=W.getAppId();U=W.getAppMenuId();W=W.getAppMenuId2();C[ea?U?W?ea+U+W:ea+U:ea:null]=T}ha(qa.getPublishModels(),!1);F.setSearchStatus(!0);F.updateTreeUi(M,C)}else za=!1,ha(qa.getPublishModels(),!1),F.setSearchStatus(!1),F.updateTreeUi(M)},R=function(C){qa=C;(C=C.getPublishModels())&&0<C.length?ha(C,!0):I()},I=function(){d&&d.hide();if(l)l.show();else{l=$("<div>");l.css({position:"absolute",height:"82%",width:"100%",top:"33px"});q=$("<div>");q.text(g.get("noSearchData","\u6ca1\u6709\u7b26\u5408\u641c\u7d22\u6761\u4ef6\u7684\u7ed3\u679c"));
ka.layoutCtrlCenterAlign(q,444);q.css({height:"20px","line-height":"20px","text-align":"center","font-size":"16px",color:"#BBBBBB",top:"50%","margin-top":"98.5px"});q.appendTo(l);var C=$("<div>");ia.Icons.background(C,"no-data");ka.layoutCtrlCenterAlign(C,187);C.css({"background-size":"contain",top:"50%",height:"187px","margin-top":"-113.5px"});C.appendTo(l);f.append(l)}C=O?g.get("noSearchData","\u6ca1\u6709\u7b26\u5408\u641c\u7d22\u6761\u4ef6\u7684\u7ed3\u679c"):g.get("noData","\u6682\u65e0\u53d1\u5e03\u8bb0\u5f55");
q.text(C)},ha=function(C,S){d&&d.show();l&&l.hide();N.clearWithoutHead(m);for(var T=0,ea,U=0;C&&U<C.length;U++){var W=C[U];if(w==W.getPublishAppMenuBO().isPreset){S&&!ea&&(ca=W,ea=!0);var oa=-1<W.getPublishAppMenuBO().qingMenuName.toUpperCase().indexOf(O.toUpperCase());if(!za||oa)oa=N.createRow(m),oa.setUserObject(W),oa.getCell(0).setValue(W.getPublishAppMenuBO().qingMenuName),oa.getCell(1).setValue(W.getPublishPersonName()),W=Number(W.getPublishAppMenuBO().formParams.publishTime),oa.getCell(2).setValue(h.format(W)),
T++}}0===T&&I();K.refreshTable()};this.intoThisStep=function(C,S){};this.outThisStep=function(C,S){C?S():null==ca?aa.getMessageCurtain().showPrompt(g.get("notSelectAppMenuPublish","\u672a\u9009\u4e2d\u53d1\u5e03\u4fe1\u606f\u3002")):(C=ca.getPublishAppMenuBO(),K.protectedDoNext(C,Y,S))};this.protectedDoNext=function(C,S,T){throw Error("overwrite me!");};this.protectedMethod.getStepContentInfo=function(){return Y}}function Aa(){ba.call(this);var x=this.protectedMethod;this.protectedDoNext=function(K,
aa,Y){var M=K.formParams.publishId;K=aa.getDsbRemoteImpl();(new com.kingdee.bos.qing.dashboard.CommonDsbDesignerFacade(K,function(ma){if(ma.noModeling)x.getMessageCurtain().showPrompt(g.get("publishOfSubjectNoModeling","\u8be5\u53d1\u5e03\u5bf9\u5e94\u7684\u4e3b\u9898\u6ca1\u6709\u8fdb\u884c\u6570\u636e\u51c6\u5907\uff0c\u65e0\u6cd5\u4f7f\u7528\u3002"));else if(ma.noTheme)x.getMessageCurtain().showPrompt(g.get("publishOfSubjectBeDeleted","\u8be5\u53d1\u5e03\u5bf9\u5e94\u7684\u4e3b\u9898\u5df2\u88ab\u5220\u9664\uff0c\u65e0\u6cd5\u4f7f\u7528\u3002"));
else{var F=new com.kingdee.bos.qing.dashboard.ImportLongerThirdStep;F.setPublishType("appmenu_qing");F.setPublishId(M);aa.setSchema(ma);aa.setImportSourceIsPublish(!0);F.setStepContentInfo(aa);Y([F])}},function(ma,F){ma=ma.toString();return"9"==ma.substr(0,1)&&6==ma.length?(x.getMessageCurtain().showError(g.get("failToGetPublishSchemaList","\u83b7\u53d6\u53d1\u5e03\u65b9\u6848\u5217\u8868\u5931\u8d25\u3002")),!0):!1})).getPublishSchema(M)}}function D(){function x(f){KTDefaultCellRender.call(this,
f);var m=this;this.paintCellUI=function(t,B){var u=m.getCell(),w=u.getValue();u=q(w,u);B?(t=$(B),u.appendTo(t)):(t=$(t),u.appendTo(t))};var q=function(t,B){B=t.getDisplayName();var u=$("<div>");u.addClass("appmenu-item ");var w=$("<div>");w.css({overflow:"hidden","max-width":"96px","text-overflow":"ellipsis"});var la=Ea.createWarning();ka.layoutCtrl(la,0,12);B==a.CLOUD_HAS_BEEN_DELETED?(B=g.get("cloudHasBeenDeleted","\u8be5\u670d\u52a1\u4e91\u5df2\u88ab\u5220\u9664"),w.css({"margin-left":"6px",overflow:"unset"}),
u.append(la)):B==a.APP_HAS_BEEN_DELETED?(B=g.get("appHasBeenDeleted","\u8be5\u5e94\u7528\u5df2\u88ab\u5220\u9664"),w.css({"margin-left":"6px",overflow:"unset"}),u.append(la)):B==a.APP_MENU_HAS_BEEN_DELETED&&(B=g.get("appMenuHasBeenDeleted","\u8be5\u5e94\u7528\u83dc\u5355\u5df2\u88ab\u5220\u9664"),w.css({"margin-left":"6px",overflow:"unset"}),u.append(la));u.attr("title",B);la.attr("title",B);w.text(B);0<t.getSubNodeLevel()&&(u.css("cursor","pointer"),l(ca)===l(t)&&u.addClass("appmenu-item-selected"),
u.on("mousedown",function(L){l(ca)!==l(t)&&(K.find(".appmenu-item-selected").removeClass("appmenu-item-selected"),u.addClass("appmenu-item-selected"),ca=t,M&&M(t))}));u.append(w);ka.layoutCtrlWithLRTB(u,0,0,null,0,0,null);ma&&0<t.getSubNodeLevel()&&r(w,u,t,B);return u},r=function(t,B,u,w){u=F[l(u)];var la="("+u+")",L=$("<div>");L.addClass(0<u?"appmenu-item-search-hits-number-with-color":"appmenu-item-search-hits-number");L.text(la);t.append(L);B.attr("title",w+" "+la)}}var K,aa,Y,M,ma=!1,F,ca,a=com.kingdee.bos.qing.publish.env.AbstractPublishAppMenuNode;
this.setTreeItemSelectedListener=function(f){M=f};this.setCurrentNode=function(f){ca=f};this.getCurrentNode=function(){return ca};this.setSearchStatus=function(f){ma=f};this.getJqUi=function(f){K||(K=$("<div>"),K.append(d(f)));return K};var d=function(f){Y=aa=null;aa=new KTable;Y=$(aa.getUI());Y.children().css("overflow-x","hidden");aa.setCellRender(new x(aa));aa.setSyncUIWhenModelChanged(!1);aa.addColumn().setWidth(170);var m=new KTStyle;m.setVerticalAlign("middle");aa.setStyle(m);m=aa;for(var q=
0;q<f.length;q++){var r=f[q];if(r.getIsShow()){var t=m.addRow();t.setHeight(36);t=t.getCell(0);t.setValue(r);r=r.getSubNodeLevel();r=new KTCellTreeModel(r);t.setTreeModel(r)}}aa.updateUI();Y.addClass("appmenu-table");return Y};this.updateTreeUi=function(f,m){K.empty();ma&&(F=m);d(f).appendTo(K)};var l=function(f){var m=f.getAppId(),q=f.getAppMenuId();f=f.getAppMenuId2();return m?q?f?m+q+f:m+q:m:null}}function H(){var x,K;this.getPublishAppMenuBO=function(){return x};this.setPublishAppMenuBO=function(aa){x=
aa};this.setPublishPersonName=function(aa){K=aa};this.getPublishPersonName=function(){return K};this.fromJsonObject=function(aa){x=aa.publishAppMenuBO;K=aa.publishPersonName}}function c(){z.call(this);this.protectedMethod.setImportType(z.EXTREPORT_TYPE)}function J(){ba.call(this);var x=this.protectedMethod,K,aa,Y;this.getSubTitle=function(){return g.get("selectPublishedQingreport","\u9009\u62e9\u5df2\u53d1\u5e03\u7684\u62a5\u8868")};this.isLastStep=function(){return!0};this.over=function(M){M&&((M=
x.getStepContentInfo().getAllStepOverCallback())&&M(Y,aa),M=com.kingdee.bos.qing.dashboard.UserOperationReporter,M.occur(M.DSB_IMPORT_EXREPORT_TYPE,M.IMPORT_EXTREPORTAPP))};this.protectedDoNext=function(M,ma,F){M=M.formParams;K=M.publishId;aa=M.caption;M=x.getStepContentInfo().getDsbRemoteImpl();(new com.kingdee.bos.qing.dashboard.CommonDsbDesignerFacade(M,function(ca){Y=ca.ref;F()},function(ca,a){})).getPublishReferenceMap(K,"appmenu_rpt")}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&
(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.scene&&(com.kingdee.bos.qing.scene={});"undefined"==typeof com.kingdee.bos.qing.scene.common&&(com.kingdee.bos.qing.scene.common={});"undefined"==typeof com.kingdee.bos.qing.scene.common.designer&&(com.kingdee.bos.qing.scene.common.designer={});var ia=com.kingdee.bos.qing.scene.common.designer;ia.AbstractDashboardDesignerSceneImpl=
function(){P.call(this);var x=this,K=this.protectedMethod,aa,Y,M=!0,ma,F,ca;this.protectedSetSourceDetail=function(h,p){throw Error("override me");};this.protectedGetSourceDetail=function(){throw Error("override me");};this.protectedGetRemoteUrl=function(){throw Error("override me");};this.protectedLoading=function(h,p,v){throw Error("override me");};this.addDsbResourceLock=function(){throw Error("override me");};this.setCloseResourceLock=function(h){ca=h};this.protectedSaveModel=function(h){throw Error("override me");
};this.protectedOverrideDsbSource=function(h){throw Error("override me");};this.protectedCreateNewDsb=function(h,p,v){throw Error("override me");};this.protectedListUnpresetThemeGroup=function(){throw Error("override me");};this.protectedInitBehaviorManager=function(){};this.protectedCreateFacade=function(h,p,v){return new com.kingdee.bos.qing.dashboard.DsbFacade(h,p,v)};this.protectedImportMoreCode=function(h){h.pushSkinJs("scene","skin");h.pushI18n("scene","scene");h.pushJs("biz-common/qing-biz-common.js");
h.pushSkinCss("biz-common","biz-common");h.pushSkinJs("biz-common","skin");h.pushI18n("biz-common","biz-common");h.pushJs("common/qing-schedule.js");h.pushI18n("common","qing-schedule");h.pushSkinCss("publish","qing-publish");h.pushSkinJs("publish","skin");h.pushI18n("publish","publish");h.pushJs("schema-manage/schema-manage-initialize.js");h.pushJs("schema-manage/schema-manage-ui.js");h.pushJs("publish/qing-publish.js");h.pushSkinCss("timedpush","qing-timedpush");h.pushSkinJs("timedpush","skin");
h.pushI18n("timedpush","timedpush");h.pushJs("timedpush/qing-timedpush.js");h.pushJs("lightapp/common/qing-lapp-env.js");h.pushJs("timedpush/qing-timedpush-lapp.js");h.pushSkinJs("imagelib","skin");h.pushI18n("dashboard","dsb-integration");h.pushSkinCss("imagelib","qing-imagelib");h.pushJs("imagelib/imagelib.js");h.pushI18n("imagelib","imagelib");h.pushSkinJs("dashboard","skin-dsb-integration");h.pushJs("dashboard/dsb-integration.js");h.pushSkinCss("dashboard","dsb-integration");h.pushSkinJs("linkage",
"skin");h.pushJs("linkage/linkage.js");h.pushSkinCss("linkage","linkage");h.pushSkinJs("map-designer","integration-skin");h.pushJs("map-designer/map-integration.js");h.pushSkinCss("map-designer","map-integration");h.pushI18n("map-designer","map-integration");h.pushJs("qhf/qing-qhf.js");h.pushSkinJs("theme-manage","skin");h.pushJs("theme-manage/qing-theme-manage.js")};this.protectedCustomInitEnv=function(){com.kingdee.bos.qing.integration.TabStatusHelper.setMyI18n(g.get("confirmExit","\u68c0\u6d4b\u5230\u60a8\u6709\u66f4\u6539\u5185\u5bb9\uff0c\u662f\u5426\u4e0d\u4fdd\u5b58\u76f4\u63a5\u9000\u51fa\uff1f\u82e5\u4e0d\u4fdd\u5b58\uff0c\u5c06\u4e22\u5931\u8fd9\u4e9b\u66f4\u6539\u3002"),
g.get("sureExit","\u76f4\u63a5\u9000\u51fa"),g.get("sureReturn","\u8fd4\u56de\u7f16\u8f91"));ma=com.kingdee.bos.qing.theme.model.ThemeGroupModel;F=com.kingdee.bos.qing.theme.model.ThemeModel;var h=com.kingdee.bos.qing.map.common.Integration,p=e.decodeParamFromUrl(location.search,"path");p=p?p:"/ierp";h.setRemoteUrl(p+"/qing/mapManage.do");var v=new com.kingdee.bos.qing.map.integration.MapSelectorDialog;com.kingdee.bos.qing.core.MapLibraryRegister.registerTemplateSelector(function(E,G){v.setParamPathPrefix(p);
v.showDialog(E,G)});com.kingdee.bos.qing.integration.ImglibUrlParser.hookUrlParser();x.protectedInitBehaviorManager()};this.protectedRegisterImplements=function(h){var p=new com.kingdee.bos.qing.dashboard.WidgetSourceSelector;p.setDsbRemoteImpl(x.getRemoteImpl());p.setParamPathPrefix(qa());p.setCustomLongerImportFuncTypes([z]);p.setCustomSquareImportFuncTypes([V]);p.setCustomQingReportImportFuncTypes([c]);var v=new com.kingdee.bos.qing.scene.common.square.exhibition.DsbIntegrationScene;h.registerBuiltinVisualWidgetEditableConfirmerParser(function(E){var G=
E.operation?E.operation:{};E=E.scene;var R=com.kingdee.bos.qing.publish.model.OperType,I=G[R.SQUARE];G=G[R.LONGER];return"square"==E?new com.kingdee.bos.qing.publish.model.RtSquareEditableConfirmerModel(I|G):"longer"==E?new com.kingdee.bos.qing.publish.model.RtLongerEditableConfirmerModel(G):null});v.setFacade(function(E,G){return x.protectedCreateFacade(x.getRemoteImpl(),E,G)});v.setParamPathPrefix(qa());v.setMessageCurtain(O());v.setCoreRemoteUrl(x.getCoreRemoteUrl());v.setDesignerSceneCreator(function(){return new y});
h.registerWidgetSourceSelector(p);h.registerPictrueLoader(function(E,G,R){v.loadImage(E,G,R)});h.registerSquareDesignerCreator(function(E,G,R,I,ha,C,S){Y&&Y.setCurrentLinkageTag(I);v.createSquareDesigner(E,G,R,I,ha,C,S)});h.registerSquareSceneCreator(function(E,G){v.createSquareDesignerScene(G)});h.registerLongerDesignerCreator(function(E,G,R,I,ha,C,S){Y&&Y.setCurrentLinkageTag(I);v.createLongerDesigner(E,G,R,I,ha,C,S)});h.registerLongerSceneCreator(function(E,G){v.createLongerDesignerScene(G)});
p=new com.kingdee.bos.qing.dashboard.qingreport.QingReportExecutor;p.setDsbRemoteImpl(x.getRemoteImpl());h.registerQingReportExecutor(p)};this.protectedInitDesigner=function(h){M&&ya();h.getConductor().setDirtyListener(function(p){xa.setTabStatus(p)});"true"!=K.getUrlParamUtil().getUrlParam("isPreset")?h.getConductor().insertToolbarButton(function(){x.protectedSaveModel(h)},"btn_save",g.get("save","\u4fdd\u5b58"),g.get("save","\u4fdd\u5b58")):O().showPrompt(g.get("presetDsbTips","\u9884\u7f6e\u7684\u4eea\u8868\u677f\u4e0d\u5141\u8bb8\u4fdd\u5b58\u3001\u53d1\u5e03\u7b49\u64cd\u4f5c\uff0c\u5982\u6709\u9700\u8981\uff0c\u53ef\u590d\u5236\u540e\u518d\u8fdb\u884c\u64cd\u4f5c\u3002"),
-1)};var a=function(h){var p=g.get("publishSourceColons","\u53d1\u5e03\u6765\u6e90\uff1a");x.checkDsbIsOpened(function(){var v=g.get("SyncSchemaPublishConfirm","\u540c\u6b65\u540e\uff0c\u5f53\u524d\u4eea\u8868\u677f\u5185\u5bb9\u5c06\u4f1a\u8986\u76d6\u53d1\u5e03\u6765\u6e90\uff0c\u786e\u5b9a\u540c\u6b65\u5417\uff1f");x.showSyncConfirm(v,p,h.getUserObject())},function(){var v=g.get("SyncSchemaPublishRefuse","\u6b63\u5728\u7f16\u8f91\u8be5\u53d1\u5e03\u8bb0\u5f55\u5bf9\u5e94\u7684\u53d1\u5e03\u6765\u6e90\uff0c\u8bf7\u5148\u5173\u95ed\u53d1\u5e03\u6765\u6e90\u9875\u9762\u518d\u8fdb\u884c\u540c\u6b65\u64cd\u4f5c\u3002");
x.showSyncRefused(v,!0,p)})},d=function(h){var p=g.get("TPSourceColons","\u63a8\u9001\u6765\u6e90\uff1a");x.checkDsbIsOpened(function(){var v=g.get("SyncSchemaTPConfirm","\u540c\u6b65\u540e\uff0c\u5f53\u524d\u4eea\u8868\u677f\u5185\u5bb9\u5c06\u4f1a\u8986\u76d6\u63a8\u9001\u6765\u6e90\uff0c\u786e\u5b9a\u540c\u6b65\u5417\uff1f");x.showSyncConfirm(v,p,h.getUserObject())},function(){var v=g.get("SyncSchemaTPRefuse","\u6b63\u5728\u7f16\u8f91\u8be5\u63a8\u9001\u8bb0\u5f55\u5bf9\u5e94\u7684\u63a8\u9001\u6765\u6e90\uff0c\u8bf7\u5148\u5173\u95ed\u63a8\u9001\u6765\u6e90\u9875\u9762\u518d\u8fdb\u884c\u540c\u6b65\u64cd\u4f5c\u3002");
x.showSyncRefused(v,!0,p)})};this.checkDsbIsOpened=function(h,p){throw Error("override me");};this.protectedCheckPublishLogExist=function(h,p){throw Error("override me");};var l=function(h){x.protectedCheckPublishLogExist(function(){f&&f(h)},function(){console&&console.log("\u5f39\u7a97\u63d0\u793alog\u88ab\u5220\u9664")})},f=function(h){var p=[];x.protectedListUnpresetThemeGroup(function(v){if(v)for(var E=0;E<v.length;E++){var G=new ma;G.fromJsonObject(v[E]);p.push(G)}v=h.getUserObject();E=new m;
E.setThemeGroupModel(p);E.addSuccessCallback(v);E.createDialog().show();return!0})};this.showSyncConfirm=function(h,p,v){var E=com.kingdee.bos.qing.ui.component.MessageDialog,G=E.createFeedbackDialog();G.setOptionType(E.OPTION_OK_CANCEL);G.setMessage(h);G.setClosingChecker(function(R){R==E.RETURN_OK&&v&&v();return!0});G.setBounds(380,330,0,0);G.setExtendPainter(function(R,I){var ha=x.protectedGetSourceDetail(),C=$("<div>");C.addClass("sa-ctrl-feedback-dialog-text");C.text(I);C.attr("title",I);C.appendTo(R);
I=$("<div>");I.addClass("sa-ctrl-feedback-dialog-text");I.css({color:"#999999",height:"60px",top:"53px"});I.text(p+ha);I.attr("title",p+ha);I.appendTo(R)});G.showDialog()};this.showSyncRefused=function(h,p,v){var E=function(I,ha){var C=x.protectedGetSourceDetail(),S=$("<div>");S.addClass("sa-ctrl-feedback-dialog-text");S.text(ha);S.attr("title",ha);S.appendTo(I);ha=$("<div>");ha.addClass("sa-ctrl-feedback-dialog-text");ha.css({top:"60px",height:"40px",color:"#999999"});ha.text(v+C);ha.attr("title",
v+C);ha.appendTo(I)},G=com.kingdee.bos.qing.ui.component.MessageDialog,R=G.createFeedbackDialog();R.setOptionType(G.OPTION_OK);R.setMsgImageType(G.MSG_WARNING);R.setButtonText(G.OPTION_OK,g.get("iknow","\u6211\u77e5\u9053\u4e86"));R.setMessage(h);p&&(R.setBounds(380,310,0,0),R.setExtendPainter(E));R.showDialog()};var m=function(){var h=new F,p=[400,380],v=[],E,G,R,I,ha=[];this.addSuccessCallback=function(T){v.push(T)};this.setThemeGroupModel=function(T){ha=T};this.createDialog=function(){var T=$(document.body),
ea=$("<div class='sa-ctrl-common-modallayer'>");ea.appendTo(T);var U=new wa(ea);U.setSelectable(!0);U.setTitle(g.get("SyncSchemaToNewDSB","\u53e6\u5b58\u4e3a\u65b0\u4eea\u8868\u677f"));var W=p[0],oa=p[1],ja=T.prop("clientWidth"),Da=T.prop("clientHeight");U.setBounds(ja-W>>1,Da-oa>>1,W,oa);U.setToolbarVisible(!1);U.setContent(S());U.showFooterPane();ea.appendTo(T);var Fa=function(){U.destroy();ea.remove()};U.addClosingListener(function(Ga,Ia){Ia?C(Fa,Ga.getMessageCurtain()):Fa()});return U};var C=
function(T,ea){var U=$.trim(G.getText()),W=$.trim(R.getText()),oa=function(Da){1010003==Da?(Da=g.get("duplicateDSBNameInCategory","\u8be5\u5206\u7c7b\u4e0b\u5b58\u5728\u540c\u540d\u4eea\u8868\u677f\u3002"),ea.showPrompt(Da,2E3)):null==Da&&T()},ja;""!=U&&50<U.length?ja=g.get("nameTooLong","\u540d\u79f0\u4e0d\u80fd\u8d85\u8fc750\u4e2a\u5b57\u7b26\u3002"):""==U&&(ja=g.get("nameCannotBeEmpty","\u8bf7\u8f93\u5165#1\u540d\u79f0\u3002").replace("#1","\u4eea\u8868\u677f"));""!=W&&500<W.length&&(ja=g.get("descriptionTooLong",
"\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7500\u4e2a\u5b57\u7b26\u3002"));if(ja)ea.showPrompt(ja,2E3);else for(h.setThemeName(U),h.setThemeGroupID(E),h.setThemeDescription(W),h.setThemeType("1"),h.setIsPreset(!1),U=0;U<v.length;U++)(W=v[U])&&W(h,oa)},S=function(){var T=$("<div>"),ea=new Ca;ea.setRequired(!0);ea.setText(g.get("category","\u5206\u7c7b"));ea=ea.getJqUi();var U=ha[0];E=U.getThemeGroupID();I=new pa;I.setItemModels(ha);I.setSelected(U);I.setCustomPainter(function(Fa,Ga,Ia){Ga.text(Ia.getThemeGroupName())});
I.addSelectedChangedListener(function(Fa,Ga,Ia){E=Ia.getThemeGroupID()});U=I.getJqUi();var W=new Ca;W.setRequired(!0);W.setText(g.get("themeName","\u540d\u79f0"));W=W.getJqUi();G=new ua;G.setText(h.getThemeName());var oa=G.getJqUi(),ja=new Ca;ja.setText(g.get("description","\u63cf\u8ff0"));ja=ja.getJqUi();R=new Ba;R.setText(h.getThemeDescription());var Da=R.getJqUi();ea.appendTo(T);U.appendTo(T);W.appendTo(T);oa.appendTo(T);ja.appendTo(T);Da.appendTo(T);ka.layoutCtrl(ea,8,0,70,23);ka.layoutCtrl(U,
76,0,280,23);ka.layoutCtrl(W,8,48,70,23);ka.layoutCtrl(oa,76,48,280,23);ka.layoutCtrl(ja,8,96,70,23);ka.layoutCtrl(Da,76,100,280,120);return T}},q=function(h){h=new com.kingdee.bos.qing.publish.permission.PermLabelManageDialog(w());h.setSpaceID(n.getUrlParamValue("qingID"));h.showDialog()},r=function(){var h=K.getUrlParamUtil().getParamPathPrefix();com.kingdee.bos.qing.timedpush.LappIntegration.setLappPrivateUrl(h+"/qing/lappPrivateInfo.do")},t=function(){return function(h,p,v){var E=com.kingdee.bos.qing.publish.model.PublishTargetType;
if(v&&E.MOBILE==v){v=h.getPublishId();var G=h.getId()}else v=h.getId();E=K.getUrlParamUtil().getParamPathPrefix();var R=na.getUrlParamValue(),I=K.getUrlParamUtil().getParamLanguage();E=e.appendParamToUrl((E?E:"/ierp")+"/qing/publishContentEditEntrance.do","skin",R);E=e.appendParamToUrl(E,"language",I);E=e.appendParamToUrl(E,"publishId",v);G&&(E=e.appendParamToUrl(E,"lappId",G));G=E;p&&(v="editPublishedContent-"+v,I=com.kingdee.bos.qing.publish.common.PublishSubscribeHelper,I.putSubscribe(v,p),E=e.appendParamToUrl(E,
"subscribeKey",v),E=e.appendParamToUrl(E,"currentPageClientId",I.getCurrentPageClientId()));com.kingdee.bos.qing.framework.common.TabbedUiUtil.openNewTab(g.get("editPublishedContent","\u7f16\u8f91\u53d1\u5e03\u65b9\u6848-")+h.getName(),E,G)}},B=function(){return function(h){var p=K.getUrlParamUtil().getParamPathPrefix();p=(p?p:"/ierp")+"/qing/timedPushContentEditEntrance.do";var v=g.get("editTimedPushContent","\u7f16\u8f91\u63a8\u9001\u65b9\u6848");if(h instanceof com.kingdee.bos.qing.timedpush.model.EmailConfig){var E=
h.getId(),G=h.getPublishSourceType();R=h.getSchemaSourceType();p=e.appendParamToUrl(p,"configId",E);p=e.appendParamToUrl(p,"publishSourceType",G);p=e.appendParamToUrl(p,"schemaType",R);p=e.appendParamToUrl(p,"pushTarget","email");v=v+"-"+h.getNameRule().getName();h.isSourceNameNotFound()&&(p=e.appendParamToUrl(p,"errorCode","2301001"))}else{E=h.getId();G=h.getPushTargetType();var R=h.getSchemaType();p=e.appendParamToUrl(p,"configId",E);p=e.appendParamToUrl(p,"pushTargetType",G);p=e.appendParamToUrl(p,
"schemaType",R);p=e.appendParamToUrl(p,"pushTarget","lapp");v=v+"-"+h.getName();h.getSourceName()||(p=e.appendParamToUrl(p,"errorCode","2301001"))}h=na.getUrlParamValue();R=K.getUrlParamUtil().getParamLanguage();h&&(p=e.appendParamToUrl(p,"skin",h));R&&(p=e.appendParamToUrl(p,"language",R));com.kingdee.bos.qing.framework.common.TabbedUiUtil.openNewTab(v,p)}},u=function(h){var p=com.kingdee.bos.qing.publish.model,v=p.PublishSourceType;p=com.kingdee.bos.qing.publish.common;var E=p.PublishContext;p=
new E;p.setBizTag(K.getUrlParamUtil().getUrlParam("dsbId"));p.setCurrentSourceType(v.DASHBOARD);p.setCurrentContentModel(h);p.setScene(E.Scene.Dashboard);h=qa();p.setParamPathPrefix(h);p.setLappEntranceUrl(h+"/qing/lappEntrance.do");p.setSpaceID(n.getUrlParamValue("qingID"));return p},w=function(){var h=qa()+"/qing/publishTo.do",p=new com.kingdee.bos.qing.RemoteImpl;p.setRemoteUrl(h);return p},la=function(h){return 0==h.page.widgets.length?!1:!0},L=function(){var h=na.getUrlParamValue(),p=K.getUrlParamUtil().getParamLanguage(),
v=qa()+"/index.html?userId=Guest&accountId=(accountId)&appNumber=qing&formId=qing_analysis_pub_email#/dform?appNumber=qing&formId=qing_analysis_pub_email&publishId=(publishId)";h&&(v=e.appendParamToUrl(v,"skin",h));p&&(v=e.appendParamToUrl(v,"language",p));return v},za=function(){var h=na.getUrlParamValue(),p=K.getUrlParamUtil().getParamLanguage(),v=qa()+"/qing/publishedEmailEntrance.do?publishId=(publishId)&kdcdc=(accountId)";h&&(v=e.appendParamToUrl(v,"skin",h));p&&(v=e.appendParamToUrl(v,"language",
p));return v};this.getCoreRemoteUrl=function(){return qa()+"/qing/core.do"};var sa=function(h){h.getConductor().isDirty()?(xa.showConfirmExitDialog(),ca&&xa.setClosingListener(ca)):ca?ca(function(){b.closeCurrentTab()}):b.closeCurrentTab()},O=function(){aa||(aa=new A,aa.getJqUi().appendTo($(document.body)));return aa},qa=function(){var h=K.getUrlParamUtil().getParamPathPrefix();return h?h:"/ierp"},ya=function(){var h=qa()+"/qing/linkage.do",p=com.kingdee.bos.qing.integration.LinkageJumper;Y=new com.kingdee.bos.qing.linkage.LinkageManage;
Y.initDesigntime(h,p.jump)};this.protectedMethod.getMessageCurtain=O;this.protectedMethod.hookCloseTab=function(h){h.getConductor().appendToolbarButton(function(){sa(h)},"error_close",g.get("closeTab","\u9000\u51fa"))};this.protectedMethod.hookSyncPublishToDsb=function(h){var p=g.get("SchemeSynced","\u540c\u6b65\u4e0e\u53e6\u5b58"),v=g.get("SyncSchemaToDSB","\u540c\u6b65\u56de\u539f\u4eea\u8868\u677f"),E=g.get("SyncSchemaToNewDSB","\u53e6\u5b58\u4e3a\u65b0\u4eea\u8868\u677f"),G=new fa,R=new X(a);
R.setText(v);R.setUserObject(function(){x.protectedOverrideDsbSource(h)});G.addItemModel(R);v=new X(l);v.setText(E);v.setUserObject(function(I,ha){x.protectedCreateNewDsb(h,I,ha)});G.addItemModel(v);h.getConductor().appendToolbarMenu(G,"sync_scheme_to_publish",p)};this.protectedMethod.hookSyncTimePushToDsb=function(h){var p=g.get("SchemeSynced","\u540c\u6b65\u4e0e\u53e6\u5b58"),v=g.get("SyncSchemaToDSB","\u540c\u6b65\u56de\u539f\u4eea\u8868\u677f"),E=g.get("SyncSchemaToNewDSB","\u53e6\u5b58\u4e3a\u65b0\u4eea\u8868\u677f"),
G=new fa,R=new X(d);R.setText(v);R.setUserObject(function(){x.protectedOverrideDsbSource(h)});G.addItemModel(R);v=new X(l);v.setText(E);v.setUserObject(function(I,ha){x.protectedCreateNewDsb(h,I,ha)});G.addItemModel(v);h.getConductor().appendToolbarMenu(G,"sync_scheme_to_push",p)};this.protectedMethod.hookPublishTo=function(h){var p=com.kingdee.bos.qing.publish.model,v=p.PublishTargetType;p=com.kingdee.bos.qing.publish.common;var E=p.PublishFactory,G=function(ha){if(la(h.getJsonModel())){var C=ha.getUserObject();
ha=ha.getText().replace("...","");var S=u(h.getJsonModel());S.setWidgetsExecutingTag(h.collectBuiltinWidgetsExecutingTag());C=E.createPublishToDialog(ha,w(),S,C,t());C.setOuterMessageCurtain(O());C.showDialog()}else O().showPrompt(g.get("noWidgets","\u4eea\u8868\u677f\u6ca1\u6709\u5185\u5bb9\u3002"),2E3)};p=new fa;var R=new X(G);R.setUserObject(v.APPMENU);R.setText(g.get("toAppMenu","\u5e94\u7528\u83dc\u5355..."));p.addItemModel(R);R=new X(G);R.setUserObject(v.CENTER);R.setText(g.get("toAnalysisCenter",
"\u6570\u636e\u5de5\u4f5c\u53f0\u9605\u89c8\u5939..."));p.addItemModel(R);R=new X(G);R.setUserObject(v.CARD_REPOSITORY);R.setText(g.get("toCardRepository","\u5361\u7247\u5e93..."));p.addItemModel(R);G=new X(G);G.setUserObject(v.MOBILE);G.setText(g.get("toMobile","\u79fb\u52a8\u8f7b\u5e94\u7528..."));p.addItemModel(G);com.kingdee.bos.qing.timedpush.LappIntegration.syncDatacenterInfo(w());r();var I=u(h.getJsonModel());p.addSeperator();R=new X(function(){(new com.kingdee.bos.qing.publish.common.PublishManagerDialog(w(),
I,t())).showDialog()});R.setUserObject();R.setText(g.get("publishManager","\u53d1\u5e03\u7ba1\u7406")+"...");p.addItemModel(R);v=new X(q);v.setUserObject();v.setText(g.get("permLabelManage","\u6743\u9650\u6807\u7b7e\u7ba1\u7406")+"...");p.addItemModel(v);v=g.get("publishTo","\u53d1\u5e03\u5230");h.getConductor().appendToolbarMenu(p,"publish_to",v)};this.protectedMethod.hookCommunicateTo=function(h){var p=function(I){I=g.get("yzjCommunicate","\u4e91\u4e4b\u5bb6\u6c9f\u901a...").replace("...","");var ha=
u(h.getJsonModel());I=com.kingdee.bos.qing.timedpush.PublishToYunzhijiaDialogFactory.createDialog(I,w(),ha);I.setOuterMessageCurtain(O());I.showDialog()},v=function(I){la(h.getJsonModel())?(I=com.kingdee.bos.qing.CodeLoader.createSafety(),I.pushJs("yzj-web/qingjs.js"),I.pushJs("yzj-web/imcloud.js"),I.pushJs("yzj-web/imsdkerp.js"),I.pushJs("yzj-web/imShare.js"),I.pushSkinCss("yzj-web","imcloud"),I.pushSkinCss("yzj-web","imsdk"),I.pushSkinCss("yzj-web","imsdkerp"),I.load(function(){})):O().showPrompt(g.get("noWidgets",
"\u4eea\u8868\u677f\u6ca1\u6709\u5185\u5bb9\u3002"),2E3)},E=new fa;(new X(function(I){window.beLoadedImCloud?p(I):v(I)})).setText(g.get("yzjCommunicate","\u4e91\u4e4b\u5bb6\u6c9f\u901a..."));var G=new X(function(I){if(la(h.getJsonModel())){I=I.getText().replace("...","");var ha=u(h.getJsonModel());I=new com.kingdee.bos.qing.timedpush.EmailPublishConfigDialog(I,w(),ha,L(),za(),B());I.setOuterMessageCurtain(O());I.showDialog()}else O().showPrompt(g.get("noWidgets","\u4eea\u8868\u677f\u6ca1\u6709\u5185\u5bb9\u3002"),
2E3)});G.setText(g.get("emailSchedulePush","\u90ae\u4ef6\u5b9a\u65f6\u63a8\u9001..."));E.addItemModel(G);G=new X(function(I){if(la(h.getJsonModel())){var ha=u(h.getJsonModel()),C=new com.kingdee.bos.qing.timedpush.LappSchedulePush;I=I.getText().replace("...","");C.createDialog(I,w(),ha,B(),h)}else O().showPrompt(g.get("noWidgets","\u4eea\u8868\u677f\u6ca1\u6709\u5185\u5bb9\u3002"),2E3)});G.setText(g.get("mobileSchedulePush","\u79fb\u52a8\u7aef\u5b9a\u65f6\u63a8\u9001")+"...");E.addItemModel(G);var R=
u(h.getJsonModel());E.addSeperator();G=new X(function(){var I=new com.kingdee.bos.qing.publish.common.PushManager(B()),ha=com.kingdee.bos.qing.timedpush;I.registerEmailPushPanelConstructor(ha.EmailConfigManagePanel);I.initEmailPushConfig(w(),L(),za());I.registerLappPushPanelConstructor(ha.LappPushManagePanel);I.initLappPushConfig(function(C,S,T){return com.kingdee.bos.qing.publish.common.PublishFactory.createPublishFacade(com.kingdee.bos.qing.publish.model.PublishTargetType.MOBILE,w(),C,S,T)},R);
I.showDialog()});G.setUserObject();G.setText(g.get("pushManager","\u5b9a\u65f6\u63a8\u9001\u7ba1\u7406")+"...");E.addItemModel(G);E=h.getConductor().appendToolbarMenu(E,"btn_communicate",g.get("timedPush","\u5b9a\u65f6\u63a8\u9001"));E.addActionListener(function(){window.beLoadedImCloud||(window.funCallback=p)});return E};this.protectedMethod.setNeedShowLinkage=function(h){M=h}};var na,P,k,n,b,e,g,A,fa,X,ra,xa,Z,ka,ta,N,va,da,wa,Ca,pa,ua,Ba,Ea;(function(){var x=com.kingdee.bos.qing;na=x.SkinUtil;
P=x.AbstractDashboardDesignerScene;k=x.AbstractModalDesignerScene;n=x.Seer;x=com.kingdee.bos.qing.common;e=x.Util;ka=x.DomUtil;ta=x.DateFormater;x=com.kingdee.bos.qing.common.ui;N=x.TableUtil;Ea=x.CommonIconUtil;x=com.kingdee.bos.qing.framework.common;b=x.TabbedUiUtil;da=x.AbstractIcons;x=com.kingdee.bos.qing.ui.component;A=x.MessageCurtain;fa=x.MenuModel;X=x.MenuItemModel;ra=x.RadioButton;Z=x.RadioButtonGroup;va=x.SearchBox;wa=x.Dialog;Ca=x.Label;pa=x.ComboBox;ua=x.TextField;Ba=x.TextArea;x=com.kingdee.bos.qing.framework.common;
g=x.MultilanguageManager.createPackageAccessor(com.kingdee.bos.qing.scene);x=com.kingdee.bos.qing.integration;xa=x.TabStatusHelper})();ia.Icons=new function(){da.call(this);var x=this.protectedMethod,K;this.setComboIconImpl=function(aa){K=aa};this.protectedInit=function(aa,Y){if(!K)throw Error("Please setComboIconImpl() first.");K.define(Y,"no-data");Y.setStartPosition(0,0);Y.setGap(0);Y.setIconSize(220,220);x.registIcon(0,0,"no-data")}};z.SQUARE_TYPE=1;z.LONGER_TYPE=0;z.EXTREPORT_TYPE=2})();(function(){function y(b){var e,g,A,fa,X,ra,xa,Z,ka,ta,N,va=!0,da=!1,wa=!1,Ca,pa,ua="icon_nodata",Ba="12px";this.setShowErrorDetailListener=function(a){Ca=a};this.setIsQingreportDsbComponent=function(a){wa=a};this.setIsDsbComponent=function(a){da=a};this.show=function(a,d,l){e?K(a,d,l):Ea(a,d,l)};this.setShowDetail=function(a){va=a};this.getShowOperate=function(){return N};this.setBackgroundIcon=function(a){ua=a};this.setFontSize=function(a){Ba=a};var Ea=function(a,d,l){e=$("<div>");e.text("loading...");
e.appendTo(b);H.setCallback(function(){x();K(a,d,l)});H.loadSkinCss("scene","common-square-exhibition")},x=function(){e.empty();e.addClass("carderror-errorprompt");!da&&e.css("top","22px");g=$("<div>");g.css({position:"absolute",margin:"0px auto",width:"100%",height:"100%"});g.appendTo(e);var a=$("<iframe>");a.addClass("carderror-errorprompt-size-listener");a.appendTo(e);a[0].contentWindow&&a[0].contentWindow.addEventListener("resize",function(){aa()});A=$("<div>");A.addClass("carderror-errorprompt-img");
ba.Icons.background(A,ua);A.appendTo(g);ra=$("<div>");ra.addClass("carderror-errorprompt-errorinfo");ra.appendTo(g);fa=$("<span>");fa.addClass("carderror-errorprompt-text");fa.css("font-size",Ba);fa.appendTo(ra);X=$("<span>");X.addClass("carderror-errorprompt-error-btn");X.text(D.get("showErrorLog","\u663e\u793a\u9519\u8bef\u65e5\u5fd7"));X.appendTo(ra)},K=function(a,d,l){var f;if(2101001==a){N=f=!1;var m=D.get("themeIsDeleted","\u5bf9\u5e94\u4e3b\u9898\u4e0d\u5b58\u5728\u6216\u5df2\u88ab\u5220\u9664")}else if(2101002==
a||2101003==a||2101004==a||2101005==a)N=f=!1,m=D.get("themeHasNoData","\u5bf9\u5e94\u4e3b\u9898\u6ca1\u6709\u5b9a\u4e49\u6570\u636e");else if(2103001==a||2103002==a)N=f=!1,m=D.get("componentSourceHasNotFound","\u8be5\u7ec4\u4ef6\u6765\u6e90\u5df2\u88ab\u53d1\u5e03\u8005\u5220\u9664");else if(2101016==a)N=f=!1,m=D.get("subjectEntityMySQLMoreThan61Table","\u5f53\u524d\u5b9e\u4f53\u5173\u8054\u6570\u636e\u8868\u592a\u591a\uff0c\u8bf7\u51cf\u5c11\u5b9e\u4f53\u7684\u5206\u6790\u5b57\u6bb5\u6216\u5220\u9664\u4e0d\u9700\u8981\u7684\u5b9e\u4f53\u5206\u5f55\u3002");
else if(2101009==a)f=!0,N=!1,m=D.get("subjectDataSourceError","\u6570\u636e\u6e90\u53d1\u751f\u5f02\u5e38");else if(2101010==a)N=f=!1,m=D.get("qingStorageFileSizeLimit","\u8f7b\u5b58\u50a8\u7a7a\u95f4\u4e0d\u8db3");else if(2100001==a)N=f=!1,m=D.get("qingStorageNoSpace","\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\uff0c\u8bf7\u8054\u7cfb\u8fd0\u7ef4\u4eba\u5458\u6dfb\u52a0\u78c1\u76d8");else if(2101011==a)f=!0,N=!1,m=D.get("subjectDBDataSourceError","\u6570\u636e\u6e90\u5bf9\u5e94\u7684\u6570\u636e\u5e93\u8fde\u63a5\u5f02\u5e38");
else if(2101012==a)m=D.get("noDBCenterPermission","\u6ca1\u6709\u6570\u636e\u4e2d\u5fc3\u6743\u9650\uff0c\u8bf7\u5148\u8054\u7cfb\u7ba1\u7406\u5458\u5206\u914d\u6743\u9650");else if(2101023==a)m=D.get("noSuperQueryAuth","\u6ca1\u6709\u5f53\u524d\u8d85\u7ea7\u67e5\u8be2\u6a21\u5f0f\u7684\u6743\u9650\uff0c\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\u5206\u914d\u6743\u9650");else if(2101013==a||2101014==a)m=D.get("entityDestroyed","\u5bf9\u5e94\u4e3b\u9898\u7684\u6570\u636e\u8868\u88ab\u635f\u574f");else if(2101015==
a)m=D.get("noDBCenterOwnerPermission","\u53d1\u5e03\u4eba\u201c#1\u201d\u6ca1\u6709\u6570\u636e\u4e2d\u5fc3\u6743\u9650\uff0c\u8bf7\u8054\u7cfb\u53d1\u5e03\u4eba\u68c0\u67e5\u6743\u9650").replace("#1",d);else if(2101021==a)m=D.get("notExistTable","\u65e0\u6cd5\u5728\u6a21\u5f0f\u201c#1\u201d\u4e2d\u627e\u5230\u8be5\u5b9e\u4f53\u6570\u636e\u8868").replaceAll("#1",d);else if(2101022==a)m=D.get("noSuperQueryPerm","\u53d1\u5e03\u4eba\u201c#1\u201d\u6ca1\u6709\u8d85\u7ea7\u67e5\u8be2\u76f8\u5173\u6a21\u5f0f\u7684\u6743\u9650\uff0c\u8bf7\u8054\u7cfb\u53d1\u5e03\u4eba\u68c0\u67e5\u6743\u9650").replace("#1",
d);else if(2101024==a)m=D.get("ownerNotExistTable","\u6570\u636e\u6e90\u5f02\u5e38\uff0c\u8bf7\u8054\u7cfb\u53d1\u5e03\u4eba\u68c0\u67e5\u6570\u636e\u6e90");else if(2106002==a)m=D.get("chartExpired","\u56fe\u8868\u4fe1\u606f\u5df2\u8fc7\u671f");else if(2215011==a)m=D.get("noDmoPermission","\u6ca1\u6709\u6570\u636e\u5f00\u53d1\u5e73\u53f0\u6743\u9650\uff0c\u8bf7\u5148\u8054\u7cfb\u7ba1\u7406\u5458\u5206\u914d\u6743\u9650");else if(2215012==a)m=D.get("noDmoOwnerPermission","\u53d1\u5e03\u4eba\u201c#1\u201d\u6ca1\u6709\u6570\u636e\u5f00\u53d1\u5e73\u53f0\u6743\u9650\uff0c\u8bf7\u8054\u7cfb\u53d1\u5e03\u4eba\u68c0\u67e5\u6743\u9650").replace("#1",
d);else if(2215020==a)m=D.get("dmoPermission","\u6ca1\u6709\u6570\u636e\u5f00\u53d1\u5e73\u53f0#1\u6743\u9650\uff0c\u8bf7\u8054\u7cfb\u53d1\u5e03\u4eba\u68c0\u67e5\u6743\u9650").replace("#1",d);else if(2301001==a)N=f=!1,m=da||wa?D.get("componentSourceHasNotFound","\u8be5\u7ec4\u4ef6\u6765\u6e90\u5df2\u88ab\u53d1\u5e03\u8005\u5220\u9664"):D.get("cardHasNotFound","\u8be5\u5361\u7247\u5df2\u88ab\u53d1\u5e03\u8005\u5220\u9664");else if(2301005==a)N=f=!1,m=da?D.get("componentSourceNoAuthority","\u6ca1\u6709\u8be5\u7ec4\u4ef6\u6765\u6e90\u7684\u67e5\u770b\u6743\u9650"):
wa?D.get("extreportCardNoAuthority","\u6ca1\u6709\u8be5\u8f7b\u62a5\u8868\u7684\u67e5\u770b\u6743\u9650"):D.get("cardNoAuthority","\u6ca1\u6709\u8be5\u5361\u7247\u7684\u67e5\u770b\u6743\u9650");else if(2105E3==a)N=f=!1,m=D.get("cardHasNotFound","\u8be5\u5361\u7247\u5df2\u88ab\u5220\u9664");else if(2201003==a)N=f=!1,m=D.get("cardNoDefaultSchema","\u8be5\u5361\u7247\u6ca1\u6709\u5b9a\u4e49\u9ed8\u8ba4\u65b9\u6848");else if(909001==a)N=f=!1,m=D.get("unsupportedDsbRefSource","\u5f53\u524d\u7cfb\u7edf\u4e0d\u652f\u6301\u8be5\u7ec4\u4ef6\u6765\u6e90");
else if(3010002==a)N=f=!1,m=D.get("illegalLicense","\u5f53\u524d\u7cfb\u7edf\u6ca1\u6709\u3010\u8f7b\u5206\u6790\u3011\u6a21\u5757\u7684\u4f7f\u7528\u8bb8\u53ef\uff0c\u8bf7\u4e0e\u7cfb\u7edf\u7ba1\u7406\u5458\u8054\u7cfb\u3002");else if(3010003==a)N=f=!1,m=D.get("noQingModulePermission","\u60a8\u6240\u4f7f\u7528\u7684\u8d26\u6237\u6ca1\u6709\u88ab\u5206\u914d\u3010\u8f7b\u5206\u6790\u3011\u6a21\u5757\u7684\u4f7f\u7528\u8bb8\u53ef\uff0c\u8bf7\u4e0e\u7cfb\u7edf\u7ba1\u7406\u5458\u8054\u7cfb\u3002");
else if(3010004==a)N=f=!1,m=D.get("replicatedLogin","\u60a8\u7684\u8d26\u53f7\u5728\u5176\u4ed6\u5730\u65b9\u767b\u5f55\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55\u5f53\u524d\u7cfb\u7edf\u3002");else if(3010005==a)N=f=!1,m=D.get("illegalQingReportLicense","\u5f53\u524d\u7cfb\u7edf\u6ca1\u6709\u3010\u8f7b\u62a5\u8868\u3011\u6a21\u5757\u7684\u4f7f\u7528\u8bb8\u53ef\uff0c\u8bf7\u4e0e\u7cfb\u7edf\u7ba1\u7406\u5458\u8054\u7cfb\u3002");else if(3010006==a)N=f=!1,m=D.get("noQingReportModulePermission","\u60a8\u6240\u4f7f\u7528\u7684\u8d26\u6237\u6ca1\u6709\u88ab\u5206\u914d\u3010\u8f7b\u62a5\u8868\u3011\u6a21\u5757\u7684\u4f7f\u7528\u8bb8\u53ef\uff0c\u8bf7\u4e0e\u7cfb\u7edf\u7ba1\u7406\u5458\u8054\u7cfb\u3002");
else if(3099002==a)N=f=!1,m=D.get("qingRuntimeException","\u7a0b\u5e8f\u53d1\u751f\u9519\u8bef");else if(3001002==a)N=f=!0,m=D.get("qingRuntimeException","\u7a0b\u5e8f\u53d1\u751f\u9519\u8bef");else if(1030001==a)N=f=!1,m=d;else if("unsetCardSource"==a)N=f=!1,m=D.get("unsetCardSource","\u8bf7\u9009\u62e9\u5361\u7247\u6765\u6e90");else if(8099001==a)N=f=!1,m=D.get("extreportNotFound","\u8be5\u62a5\u8868\u4e0d\u5b58\u5728\u6216\u5df2\u88ab\u5220\u9664");else if(21000008==a)N=f=!1,m=D.get("noQingModelerLicense",
"\u5f53\u524d\u7cfb\u7edf\u6ca1\u6709\u3010\u8f7b\u5efa\u6a21\u3011\u6a21\u5757\u7684\u4f7f\u7528\u8bb8\u53ef\uff0c\u8bf7\u4e0e\u7cfb\u7edf\u7ba1\u7406\u5458\u8054\u7cfb");else if(2101006==a)N=!1,(m=d.match(/(\(|\uff08)([^(\)|\uff09)]+)(\)|\uff09)/))&&(d=m[2]),pa=$("<p>"),pa.addClass("carderror-errorprompt-support-qing-text"),pa.html(d.replace(/,/g,D.get("semicolon","\uff1b")+"<br>")),da?(f=!0,m=D.get("haveNotGetDataEntityAuthority","\u5c1a\u672a\u83b7\u5f97\u5b9e\u4f53\u6570\u636e\u8868\u7684\u67e5\u770b\u6743\u9650"),
X.text(D.get("viewDetails","\u67e5\u770b\u8be6\u60c5"))):(f=!1,m=D.get("noAuthorityForTheseEntities","\u5c1a\u672a\u83b7\u5f97\u4ee5\u4e0b\u5b9e\u4f53\u6570\u636e\u8868\u7684\u67e5\u770b\u6743\u9650\uff1a")),fa.text(m),!f&&fa.append(pa);else if(2101018==a){N=!1;f=na.getSupportQingAnalysisUrl();(m=/(?:\u3010\s)(.+)(?=\s\u3011)/.exec(d))&&(d=m[1]);var q=$("<a onclick='javascript:window.open(\""+f+"\");' href='#'>");q.css({cursor:"pointer",color:"#5582f3"});q.text(D.get("viewDocument","\u67e5\u770b\u5e2e\u52a9\u6587\u6863"));
pa=$("<p>");pa.addClass("carderror-errorprompt-support-qing-text");pa.html(d.replace(/,/g,D.get("semicolon","\uff1b")+"<br>"));da?(f=!0,m=D.get("entityNotSupportQingAnalysis","\u4e1a\u52a1\u5b9e\u4f53\u672a\u5f00\u542f\u201c\u652f\u6301\u8f7b\u5206\u6790\u201d\u8bbe\u7f6e\u9879\uff0c\u8bf7\u5728\u5f00\u53d1\u5e73\u53f0\u7684\u5bf9\u5e94\u8868\u5355\u4e2d\u8fdb\u884c\u8bbe\u7f6e  "),X.text(D.get("viewDetails","\u67e5\u770b\u8be6\u60c5"))):(f=!1,m=D.get("notSupportQingAnalysisTip","\u4ee5\u4e0b\u4e1a\u52a1\u5b9e\u4f53\u5c1a\u672a\u5f00\u542f\u201c\u652f\u6301\u8f7b\u5206\u6790\u201d\u8bbe\u7f6e\u9879\uff0c\u8bf7\u5728\u5f00\u53d1\u5e73\u53f0\u7684\u5bf9\u5e94\u8868\u5355\u4e2d\u8fdb\u884c\u8bbe\u7f6e  "),
e.css("overflow-y","auto"),ra.css("max-height","unset"));fa.text(m);fa.append(q);!f&&fa.append(pa)}else 4040002==a||4040003==a||4040004==a?(N=f=!0,m=D.get("serverBusy","\u5f53\u524d\u670d\u52a1\u5668\u7e41\u5fd9\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5\u3002")):4100001==a?(N=f=!0,m=D.get("extractDataFail","\u51c6\u5907\u6570\u636e\u5931\u8d25")):(N=f=!0,m=a+"",m=0==m.indexOf("21")&&7==m.length?D.get("extractDataFail","\u51c6\u5907\u6570\u636e\u5931\u8d25"):0==m.indexOf("30")&&6==m.length?D.get("extractDataFail",
"\u51c6\u5907\u6570\u636e\u5931\u8d25"):0==m.indexOf("40")&&6==m.length?D.get("executeFail","\u56fe\u8868\u6267\u884c\u5931\u8d25"):D.get("unknownException","\u53d1\u751f\u4e86\u672a\u77e5\u9519\u8bef"));f&&va?(X.show(),X.on("click",function(r){Y(a,d,l)})):X.hide();2101018!=a&&2101006!=a&&fa.text(m);setTimeout(aa,500)},aa=function(){var a=e.height()-2;e.width();if(0!=a){var d=ra.height()+10,l=a-d;70>l?(A.hide(),l=0):(A.show(),200<l&&(l=200),A.css("height",l+"px"));ra.css("min-height","unset");g.css({"margin-top":-Math.floor((l+
d)/2)+"px",top:"50%",height:l+d+"px"});0>a-d&&(e.css("overflow-y","auto"),e.css("overflow-x","auto"))}},Y=function(a,d,l){if(2101006==a){var f=new F($(document.body));f.setSize(440,330);f.setTitle(D.get("permissionTitle","\u6743\u9650\u63d0\u793a"));f.showDialog(ma(D.get("noAuthorityForTheseEntities","\u5c1a\u672a\u83b7\u5f97\u4ee5\u4e0b\u5b9e\u4f53\u6570\u636e\u8868\u7684\u67e5\u770b\u6743\u9650\uff1a"),pa),!0)}else if(2101018==a)f=new F($(document.body)),f.setSize(440,330),f.setTitle(D.get("DetailInfo",
"\u8be6\u7ec6\u4fe1\u606f")),f.showDialog(ma(D.get("notSupportQingAnalysis","\u4ee5\u4e0b\u4e1a\u52a1\u5b9e\u4f53\u5c1a\u672a\u5f00\u542f\u201c\u652f\u6301\u8f7b\u5206\u6790\u201d\u8bbe\u7f6e\u9879\uff1a"),pa),!0);else if(Ca)Ca(a,d,l);else{if(!xa){xa=$("<div>");xa.addClass("carderror-errorprompt-logdetail-container");f=$("<div>");f.addClass("carderror-errorprompt-logdetail-container-title");var m=$("<div>");m.addClass("carderror-errorprompt-logdetail-titiletag");var q=$("<div>");q.addClass("carderror-errorprompt-logdetail-title-lable");
q.text(D.get("errorLog","\u9519\u8bef\u65e5\u5fd7"));var r=$("<div>");r.addClass("carderror-errorprompt-logdetail-close");ba.Icons.background(r,"icon_errorclose");r.on("click",ca);f.append(m);f.append(q);f.append(r);ka=$("<div>");ka.css("padding","10px");ka.text(D.get("errorCode","\u9519\u8bef\u7801\uff1a")+a);ta=$("<pre>");ta.addClass("carderror-errorprompt-logdetail-content-container-text");ta.text("\u9519\u8bef\u4fe1\u606f\uff1a"+d+(null!=l?"\r\n\u9519\u8bef\u6808\uff1a"+l:""));var t=$("<div>");
t.addClass("carderror-errorprompt-logdetail-content-container");var B=$("<span>");B.text(D.get("copy","\u590d\u5236"));B.addClass("carderror-errorprompt-logdetail-content-copybutton");B.click(function(){var u=M("\u9519\u8bef\u7801\uff1a"+a+"\r\n\u9519\u8bef\u4fe1\u606f\uff1a"+d+"\r\n\u9519\u8bef\u6808\uff1a"+l),w=$("<span>");w.addClass("carderror-errorprompt-logdetail-content-copybutton-end");t.append(w);u?w.text(D.get("copy success!","\u590d\u5236\u6210\u529f\uff01")):w.text(D.get("copy error!",
"\u590d\u5236\u5931\u8d25\uff01"));setTimeout(function(){w.remove()},1500)});t.mouseover(function(){B.css("visibility","visible")});t.mouseout(function(){B.css("visibility","hidden")});t.append(ka);t.append(ta);t.append(B);xa.append(f);xa.append(t);Z=$("<div class='sa-ctrl-common-modallayer'>");xa.appendTo(Z)}f=$(document.body);Z.appendTo(f)}},M=function(a){var d=document.createElement("textarea");document.body.appendChild(d);d.value=a;d.select();a=document.execCommand("copy");document.body.removeChild(d);
return a},ma=function(a,d){var l=$("<div>");l.addClass("carderror-errorprompt-logdetail-content");var f=$("<p>");f.addClass("carderror-errorprompt-logdetail-contenxt-texttitle");f.text(a);a=$("<p>");a.addClass("carderror-errorprompt-logdetail-contenxt-text");a.html(d);l.append(f);l.append(a);return l},F=function(a){var d=$("<div class='sa-ctrl-common-modallayer'>"),l=new P(d),f=0,m=0,q=320,r=240,t=a?a:$(document.body),B,u;this.setTitle=function(w){u=w};this.setClosingListener=function(w){B=w};this.setSize=
function(w,la){q=w;r=la};this.showDialog=function(w,la){d.appendTo(t);if(!f){var L=t.prop("clientWidth"),za=t.prop("clientHeight");f=L-q>>1;m=(za-r)/3}l.setBounds(f,m,q,r);l.setToolbarVisible(!1);l.setContent(w,la);l.setTitle(u);l.addClosingListener(function(sa,O){if(O)B(O);else return sa.destroy(),d.remove(),!0});l.addClosedListener(function(sa){sa.destroy();d.remove()});l.showFooterPane(this.createFooter);l.show()};this.setContent=function(w,la){l.setContent(w,la)};this.destroy=function(){l.destroy();
d.remove()};this.createFooter=function(w){var la=new k(D.get("iknow","\u6211\u77e5\u9053\u4e86"));la.setHighlight(!0);var L=la.getJqUi();n.layoutCtrlWithLRTB(L,"50%",0,100,null,13,28);L.addClass("dialog-footer-close");L.css("margin-left","-50px");L.appendTo(w);la.addActionListener(function(za){l.destroy();d.remove()})}},ca=function(){Z&&Z.detach()}}function V(){var b,e,g;this.setIsSquare=function(A){b=A};this.getIsSquare=function(){return b};this.setLoadSchema=function(A){e=A};this.getLoadSchema=
function(){return e};this.setSaveSchema=function(A){g=A};this.getSaveSchema=function(){return g}}function Q(){c.call(this);this.protectedShowErrorImpl=function(b,e,g,A){b=new y(b);b.setIsDsbComponent(!0);b.show(e,g,A);return!0}}function z(){J.call(this);this.protectedShowErrorImpl=function(b,e,g,A){b=new y(b);b.setIsDsbComponent(!0);b.show(e,g,A);return!0}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});
"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.scene&&(com.kingdee.bos.qing.scene={});"undefined"==typeof com.kingdee.bos.qing.scene.common&&(com.kingdee.bos.qing.scene.common={});"undefined"==typeof com.kingdee.bos.qing.scene.common.square&&(com.kingdee.bos.qing.scene.common.square={});"undefined"==typeof com.kingdee.bos.qing.scene.common.square.exhibition&&(com.kingdee.bos.qing.scene.common.square.exhibition={});var ba=com.kingdee.bos.qing.scene.common.square.exhibition,
Aa,D,H,c,J,ia,na,P,k,n;(function(){var b=com.kingdee.bos.qing.framework.common;Aa=b.AbstractIcons;D=b.MultilanguageManager.createPackageAccessor(com.kingdee.bos.qing.scene);na=na=b.OfficialArticleUtil;b=com.kingdee.bos.qing;H=b.CodeLoader;c=b.DashboardSquareScene;J=b.DashboardLongerScene;b=com.kingdee.bos.qing.ui.component;ia=b.MessageDialog;P=b.Dialog;k=b.Button;b=com.kingdee.bos.qing.common;n=b.DomUtil})();ba.Icons=new function(){Aa.call(this);var b=this.protectedMethod,e;this.setComboIconImpl=
function(g){e=g};this.protectedInit=function(g,A){if(!e)throw Error("Please setComboIconImpl() first.");e.define(A,"scene-error-image-sprite");A.setStartPosition(1,1);A.setGap(1);A.setIconSize(20,20);b.registIcon(0,0,"icon_qhfInfo");b.registIcon(0,1,"icon_errorclose");e.define(A,"errorbackground");A.setStartPosition(0,0);A.setGap(0);A.setIconSize(200,200);b.registIcon(0,0,"icon_errorbackground");e.define(A,"nodata");b.registIcon(0,1,"icon_nodata")}};ba.CardErrorUi=y;ba.DsbIntegrationScene=function(){var b,
e,g,A,fa;this.setResetSquare=function(Z){A=Z};this.setFacade=function(Z){g=Z};this.setParamPathPrefix=function(Z){};this.setMessageCurtain=function(Z){e=Z};this.setCoreRemoteUrl=function(Z){b=Z};this.setDesignerSceneCreator=function(Z){fa=Z};this.createSquareDesignerScene=function(Z){var ka=new Q;ka.setRemoteUrl(b);Z(ka)};this.createLongerDesignerScene=function(Z){var ka=new z;ka.setRemoteUrl(b);Z(ka)};this.loadImage=function(Z,ka,ta){var N=Z.refToId;N&&0!=$.trim(N).length?(Z=g(function(va){var da=
va.imageHeight;va=va.imageWidth;if(da||va){var wa=com.kingdee.bos.qing.framework.common.RemoteFramework.getLoadImgUrl(N,"image-library");ka(wa,va,da)}else ta&&ta("")},function(va,da){return!1}),Z.setShowBlocking(!1),Z.getImageSize(N)):(Z=Z.widgetSourcePath,ta&&ta(Z))};this.createSquareDesigner=function(Z,ka,ta,N,va,da,wa){var Ca=new V;Ca.setIsSquare(!0);Ca.setLoadSchema(function(pa,ua){g(pa,ua).squareLoadSchema(ta)});Ca.setSaveSchema(function(pa,ua,Ba){g(ua,Ba).squareSaveSchema(ta,pa)});X(Ca,Z,ka,
ta,N,va,da,wa,!0)};this.createLongerDesigner=function(Z,ka,ta,N,va,da,wa,Ca){var pa=new V;pa.setIsSquare(!1);pa.setLoadSchema(function(ua,Ba){g(ua,Ba).longerLoadSchema(ta,Ca)});pa.setSaveSchema(function(ua,Ba,Ea){g(Ba,Ea).longerSaveSchema(ta,ua)});X(pa,Z,ka,ta,N,va,da,wa,!1)};var X=function(Z,ka,ta,N,va,da,wa,Ca,pa){var ua=fa(),Ba=function(Ea){ua.hide();Ca(Ea)};ua.setIsSquare(Z.getIsSquare());ua.setRemoteUrl(b);ua.setRemoteTag(va);ua.setDesignerOperationJudger(da);ua.setSquareOrLonger(pa);ua.setClosable(ta);
ua.setAdditionalFilterApi(wa);ua.setSchemaLoader(function(Ea,x){ra(Z,N,Ea,x,Ba)});ua.setSchemaSaver(function(Ea){xa(Z,N,Ea,Ba)});null!=A&&ua.setSchemaReseter(function(Ea){A(N,Ea,Ba)});ua.show(ka,function(){Ba(null)})},ra=function(Z,ka,ta,N,va){ka.uid?Z.getLoadSchema()(function(da){da.model?(ta.setJsonModelBook(da.model),N(!0)):N(!1)},function(da,wa){va();da=da.toString();return"9"==da.substr(0,1)&&6==da.length?(e&&e.showError(D.get("failToLoadSchema","\u52a0\u8f7d\u65b9\u6848\u5931\u8d25\u3002")),
!0):!1}):N(!1)},xa=function(Z,ka,ta,N){var va=ta.getJsonModelBook();Z.getSaveSchema()(va,function(da){N(va)},function(da,wa){if(909002==da)return da=ia.createFeedbackDialog(),da.setMessage(D.get("noSelectMapTemplate","\u8bf7\u9009\u62e9\u5730\u56fe\u6a21\u677f")),da.setMsgImageType(ia.MSG_WARNING),da.setOptionType(ia.OPTION_OK),da.setButtonText(ia.OPTION_OK,D.get("iknow","\u6211\u77e5\u9053\u4e86")),da.showDialog(),!0;N();da=da.toString();return"9"==da.substr(0,1)&&6==da.length?(e&&e.showError(D.get("failToTemporarySchema",
"\u6682\u5b58\u65b9\u6848\u5931\u8d25\u3002")),!0):!1})}}})();(function(){function y(){var c={};this.createScene=function(J,ia){var na=y.MANAGETYPE_PUBLISH;if("longer"==J)var P=y.LONGER;else"square"==J?P=y.SQUARE:"dashboard"==J&&(P=y.DASHBOARD);"lappTimedPush"==ia?na=y.MANAGETYPE_TIMED_PUSH_LAPP:"emailTimedPush"==ia&&(na=y.MANAGETYPE_TIMED_PUSH_EMAIL);if(J=c[P|na])return new J;throw Error("unknown type");};this.register=function(J,ia){c[J]=ia}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&
(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.scene&&(com.kingdee.bos.qing.scene={});var V=com.kingdee.bos.qing.scene;V.PublishEditSceneFactory=new y;var Q,z,ba,Aa,D,H;(function(){var c=com.kingdee.bos.qing;Q=c.RemoteImpl;c=com.kingdee.bos.qing.framework.common;z=c.MultilanguageManager.createPackageAccessor(V);c=com.kingdee.bos.qing.scene.common.designer;ba=c.AbstractDesignerSceneImpl;Aa=c.AbstractDashboardDesignerSceneImpl;
D=c.LongerDesignerOperationJudgerModel;H=c.SquareDesignerOperationJudgerModel})();y.LONGER=1;y.SQUARE=2;y.DASHBOARD=3;y.MANAGETYPE_PUBLISH=16;y.MANAGETYPE_TIMED_PUSH_LAPP=32;y.MANAGETYPE_TIMED_PUSH_EMAIL=48;V.PublishEditSceneFactory.register(y.LONGER|y.MANAGETYPE_TIMED_PUSH_EMAIL,function(){ba.call(this);var c=this.protectedMethod,J,ia=this.protectedCustomInitEnv;this.protectedCustomInitEnv=function(k){c.setModuleWithLonger(!0,!0);c.setModuleWithSquare(!1,!1);ia(k);J=new D(null);k()};var na=this.protectedImportMoreCode;
this.protectedImportMoreCode=function(k){na(k);c.importLinkage(k);c.importForSchema(k);c.importForPublish(k)};this.protectedLoadingLonger=function(k,n,b){c.loadMeta(k,function(e){n.prepareMeta(e);var g=new Q;e=c.getUrlParamUtil().getParamPathPrefix();g.setRemoteUrl((e?e:"/ierp")+"/qing/publishTo.do");g.setTag(c.getUrlParamUtil().getParamTag());e=com.kingdee.bos.qing.publish.model.PublishTargetType;g=new com.kingdee.bos.qing.timedpush.EmailPublishFacade(g,function(X){n.setJsonModelBook(X.model);b(!0)});
var A=c.getUrlParamUtil().getUrlParam("configId"),fa=c.getUrlParamUtil().getUrlParam("publishSourceType");g.loadPushSchema(e.EMAIL,A,fa)})};this.protectedInitDesignerForLonger=function(k){k.setDesignerOperationJudger(J,null);k.getConductor().insertToolbarButton(function(){P(k)},"btn_save",z.get("save","\u4fdd\u5b58"),z.get("save","\u4fdd\u5b58"));c.hookCloseTab(k);c.hookSetCurrentTabStatus(k);c.initDesigntimeLinkage()};var P=function(k){var n=new Q,b=c.getUrlParamUtil().getParamPathPrefix();n.setRemoteUrl((b?
b:"/ierp")+"/qing/publishTo.do");n.setTag(c.getUrlParamUtil().getParamTag());b=com.kingdee.bos.qing.publish.model.PublishTargetType;n=new com.kingdee.bos.qing.timedpush.EmailPublishFacade(n,function(A){k.getConductor().clearDirty();c.getMessageCurtain().showSuccess(z.get("saveSuccess","\u4fdd\u5b58\u6210\u529f\u3002"))},function(A){return 2314107==A?(c.getMessageCurtain().showPrompt(z.get("emailConfigNotFoundCurtain","\u8be5\u63a8\u9001\u914d\u7f6e\u5df2\u88ab\u5220\u9664\u3002")),!0):!1});var e=
c.getUrlParamUtil().getUrlParam("configId"),g=c.getUrlParamUtil().getUrlParam("publishSourceType");n.updatePushSchema(b.EMAIL,e,g,k.getJsonModelBook())}});V.PublishEditSceneFactory.register(y.DASHBOARD|y.MANAGETYPE_TIMED_PUSH_EMAIL,function(){Aa.call(this);var c=this,J=this.protectedMethod,ia;this.protectedSetSourceDetail=function(k,n){ia=k+"/"+n};this.protectedGetSourceDetail=function(){return ia};this.protectedCreateFacade=function(k,n,b){return new com.kingdee.bos.qing.dashboard.EmailPushDsbDesignerFacade(k,
n,b)};this.protectedLoading=function(k,n,b){var e=P();(new com.kingdee.bos.qing.dashboard.EmailPushDsbDesignerFacade(k,function(g){g&&n.setJsonModel(g,function(A){A.isError()&&J.getMessageCurtain().showError(z.get("failToLoadDsbCurtain","\u52a0\u8f7d\u4eea\u8868\u677f\u5931\u8d25\u3002"))});b(!0)},function(g,A){return 1030001==g?(com.kingdee.bos.qing.framework.common.RemoteFramework.openErrorPage(g,com.kingdee.bos.qing.common.Base64Util.encode(encodeURIComponent(A))),!0):!1})).loadModel(e)};this.protectedGetRemoteUrl=
function(){var k=J.getUrlParamUtil().getParamPathPrefix();return(k?k:"/ierp")+"/qing/editEmailPushDsb.do"};this.protectedGetDashboardUniqueId=function(){return P()};this.protectedOverrideDsbSource=function(k){k=JSON.stringify(k.getJsonModel());(new com.kingdee.bos.qing.dashboard.EmailPushDsbDesignerFacade(c.getRemoteImpl(),function(n){J.getMessageCurtain().showSuccess("\u540c\u6b65\u6210\u529f\u3002")},function(n,b){return 1010006==n||1010004==n?(n=z.get("SyncSchemaTPDeleted","\u8be5\u63a8\u9001\u8bb0\u5f55\u5bf9\u5e94\u7684\u63a8\u9001\u6765\u6e90\u5df2\u5220\u9664\uff0c\u65e0\u6cd5\u8fdb\u884c\u540c\u6b65\u64cd\u4f5c\u3002"),
c.showSyncRefused(n,!1,""),!0):2314107==n?(n=z.get("SyncSchemaTPLogDeleted","\u8be5\u63a8\u9001\u8bb0\u5f55\u5df2\u88ab\u5220\u9664\uff0c\u65e0\u6cd5\u8fdb\u884c\u540c\u6b65\u64cd\u4f5c\u3002"),c.showSyncRefused(n,!1,""),!0):!1})).syncModelToDsbSource(P(),k)};this.protectedCreateNewDsb=function(k,n,b){k=JSON.stringify(k.getJsonModel());(new com.kingdee.bos.qing.dashboard.EmailPushDsbDesignerFacade(c.getRemoteImpl(),function(e){b&&b();J.getMessageCurtain().showSuccess("\u540c\u6b65\u6210\u529f\u3002")},
function(e,g){return 1010006==e?(b&&b(),e=z.get("SyncSchemaToNewDSBCategoryDeletedCurtain","\u65b0\u4eea\u8868\u677f\u7684\u5206\u7c7b\u4e0d\u5b58\u5728\u6216\u5df2\u88ab\u5220\u9664"),c.showSyncRefused(e,!1,""),!0):2314107==e?(b&&b(),e=z.get("SyncSchemaTPLogDeleted","\u8be5\u63a8\u9001\u8bb0\u5f55\u5df2\u88ab\u5220\u9664\uff0c\u65e0\u6cd5\u8fdb\u884c\u540c\u6b65\u64cd\u4f5c\u3002"),c.showSyncRefused(e,!1,""),!0):1010003==e?(b&&b(e),!0):!1})).syncModelToNewDsb(P(),n,k)};this.checkDsbIsOpened=function(k,
n){(new com.kingdee.bos.qing.dashboard.EmailPushDsbDesignerFacade(c.getRemoteImpl(),function(b){c.protectedSetSourceDetail(b.themeGroupName,b.themeName);1==b.isLocked?k&&k():n&&n()},function(b,e){return 2314107==b?(b=z.get("SyncSchemaTPLogDeleted","\u8be5\u63a8\u9001\u8bb0\u5f55\u5df2\u88ab\u5220\u9664\uff0c\u65e0\u6cd5\u8fdb\u884c\u540c\u6b65\u64cd\u4f5c\u3002"),c.showSyncRefused(b,!1,""),!0):1010004==b?(b=z.get("SyncSchemaTPDeleted","\u8be5\u63a8\u9001\u8bb0\u5f55\u5bf9\u5e94\u7684\u63a8\u9001\u6765\u6e90\u5df2\u5220\u9664\uff0c\u65e0\u6cd5\u8fdb\u884c\u540c\u6b65\u64cd\u4f5c\u3002"),
c.showSyncRefused(b,!1,""),!0):!1})).checkDsbIsOpened(P())};this.protectedCheckPublishLogExist=function(k,n){(new com.kingdee.bos.qing.dashboard.EmailPushDsbDesignerFacade(c.getRemoteImpl(),function(b){k&&k()},function(b,e){return 2314107==b?(b=z.get("SyncSchemaTPLogDeleted","\u8be5\u63a8\u9001\u8bb0\u5f55\u5df2\u88ab\u5220\u9664\uff0c\u65e0\u6cd5\u8fdb\u884c\u540c\u6b65\u64cd\u4f5c\u3002"),c.showSyncRefused(b,!1,""),!0):!1})).checkEmailConfigsExist(P())};this.protectedListUnpresetThemeGroup=function(k){(new com.kingdee.bos.qing.dashboard.EmailPushDsbDesignerFacade(c.getRemoteImpl(),
k,function(n,b){return!1})).protectedListUnpresetThemeGroup()};var na=c.protectedInitDesigner;this.protectedInitDesigner=function(k){na(k);J.hookSyncTimePushToDsb(k);J.hookCloseTab(k)};this.protectedSaveModel=function(k){if(k.getConductor().isDirty()){var n=JSON.stringify(k.getJsonModel());(new com.kingdee.bos.qing.dashboard.EmailPushDsbDesignerFacade(c.getRemoteImpl(),function(b){J.getMessageCurtain().showSuccess(z.get("saveDsbSuccess","\u4fdd\u5b58\u4eea\u8868\u677f\u6210\u529f\u3002"));k.getConductor().clearDirty()},
function(b,e){return 2314107==b?(J.getMessageCurtain().showPrompt(z.get("dsbIsDeletedCurtain","\u5bf9\u5e94\u4eea\u8868\u677f\u4e0d\u5b58\u5728\u6216\u5df2\u88ab\u5220\u9664\u3002")),!0):!1})).saveModel(P(),n)}else J.getMessageCurtain().showPrompt(z.get("noEditCurtain","\u4eea\u8868\u677f\u5185\u5bb9\u6ca1\u6709\u4fee\u6539\u3002"),2E3)};var P=function(){return J.getUrlParamUtil().getUrlParam("configId")}});V.PublishEditSceneFactory.register(y.SQUARE|y.MANAGETYPE_TIMED_PUSH_LAPP,function(){ba.call(this);
var c=this.protectedMethod,J=this.protectedCustomInitEnv;this.protectedCustomInitEnv=function(P){c.setModuleWithLonger(!1,!1);c.setModuleWithSquare(!0,!0);J(P);var k=c.getUrlParamUtil().getParamPathPrefix();c.registMapMapLibrary(k);P()};var ia=this.protectedImportMoreCode;this.protectedImportMoreCode=function(P){ia(P);c.importLinkage(P);c.importForSchema(P);c.importForPublish(P);c.importForMap(P)};this.protectedLoadingSquare=function(P,k,n){c.loadMeta(P,function(b){k.prepareMeta(b);b=new Q;var e=
c.getUrlParamUtil().getParamPathPrefix();b.setRemoteUrl((e?e:"/ierp")+"/qing/publishTo.do");b.setTag(c.getUrlParamUtil().getParamTag());b=com.kingdee.bos.qing.publish.common.PublishFactory.createPublishFacade(com.kingdee.bos.qing.publish.model.PublishTargetType.MOBILE,b,function(A){k.setJsonModelBook(A.model);n(!0)});e=c.getUrlParamUtil().getUrlParam("configId");var g=c.getUrlParamUtil().getUrlParam("pushTargetType");b.loadPushSchema(e,g)})};this.protectedInitDesignerForSquare=function(P){P.getConductor().insertToolbarButton(function(){na(P)},
"btn_save",z.get("save","\u4fdd\u5b58"),z.get("save","\u4fdd\u5b58"));c.hookCloseTab(P);c.hookSetCurrentTabStatus(P);c.initDesigntimeLinkage()};var na=function(P){var k=new Q,n=c.getUrlParamUtil().getParamPathPrefix();k.setRemoteUrl((n?n:"/ierp")+"/qing/publishTo.do");k.setTag(c.getUrlParamUtil().getParamTag());k=com.kingdee.bos.qing.publish.common.PublishFactory.createPublishFacade(com.kingdee.bos.qing.publish.model.PublishTargetType.MOBILE,k,function(e){P.getConductor().clearDirty();c.getMessageCurtain().showSuccess(z.get("saveSuccess",
"\u4fdd\u5b58\u6210\u529f\u3002"))},function(e){if(2301001==e){e=com.kingdee.bos.qing.ui.component.MessageDialog;var g=new e;g.setOptionType(e.OPTION_OK);g.setMessage(z.get("schemaNotExist","\u65b9\u6848\u5df2\u88ab\u522a\u9664"));g.showDialog();return!0}return 2301013==e?(c.getMessageCurtain().showPrompt(z.get("noSelectMapTemplateCurtain","\u8bf7\u9009\u62e9\u5730\u56fe\u6a21\u677f\u3002")),!0):!1});n=c.getUrlParamUtil().getUrlParam("configId");var b=c.getUrlParamUtil().getUrlParam("pushTargetType");
k.updatePushSchema(n,b,P.getJsonModelBook())}});V.PublishEditSceneFactory.register(y.LONGER|y.MANAGETYPE_TIMED_PUSH_LAPP,function(){ba.call(this);var c=this.protectedMethod,J,ia=this.protectedCustomInitEnv;this.protectedCustomInitEnv=function(k){c.setModuleWithLonger(!0,!0);c.setModuleWithSquare(!1,!1);ia(k);J=new D(null);k()};var na=this.protectedImportMoreCode;this.protectedImportMoreCode=function(k){na(k);c.importLinkage(k);c.importForSchema(k);c.importForPublish(k)};this.protectedLoadingLonger=
function(k,n,b){c.loadMeta(k,function(e){n.prepareMeta(e);e=new Q;var g=c.getUrlParamUtil().getParamPathPrefix();e.setRemoteUrl((g?g:"/ierp")+"/qing/publishTo.do");e.setTag(c.getUrlParamUtil().getParamTag());e=com.kingdee.bos.qing.publish.common.PublishFactory.createPublishFacade(com.kingdee.bos.qing.publish.model.PublishTargetType.MOBILE,e,function(fa){n.setJsonModelBook(fa.model);b(!0)});g=c.getUrlParamUtil().getUrlParam("configId");var A=c.getUrlParamUtil().getUrlParam("pushTargetType");e.loadPushSchema(g,
A)})};this.protectedInitDesignerForLonger=function(k){k.setDesignerOperationJudger(J,null);k.getConductor().insertToolbarButton(function(){P(k)},"btn_save",z.get("save","\u4fdd\u5b58"),z.get("save","\u4fdd\u5b58"));c.hookCloseTab(k);c.hookSetCurrentTabStatus(k);c.initDesigntimeLinkage()};var P=function(k){var n=new Q,b=c.getUrlParamUtil().getParamPathPrefix();n.setRemoteUrl((b?b:"/ierp")+"/qing/publishTo.do");n.setTag(c.getUrlParamUtil().getParamTag());n=com.kingdee.bos.qing.publish.common.PublishFactory.createPublishFacade(com.kingdee.bos.qing.publish.model.PublishTargetType.MOBILE,
n,function(g){k.getConductor().clearDirty();c.getMessageCurtain().showSuccess(z.get("saveSuccess","\u4fdd\u5b58\u6210\u529f\u3002"))},function(g){if(2301001==g){g=com.kingdee.bos.qing.ui.component.MessageDialog;var A=new g;A.setOptionType(g.OPTION_OK);A.setMessage(z.get("schemaNotExist","\u65b9\u6848\u5df2\u88ab\u522a\u9664"));A.showDialog();return!0}return!1});b=c.getUrlParamUtil().getUrlParam("configId");var e=c.getUrlParamUtil().getUrlParam("pushTargetType");n.updatePushSchema(b,e,k.getJsonModelBook())}});
V.PublishEditSceneFactory.register(y.SQUARE|y.MANAGETYPE_PUBLISH,function(){ba.call(this);var c=this.protectedMethod,J,ia,na,P=this.protectedImportMoreCode;this.protectedImportMoreCode=function(b){P(b);c.importLinkage(b);c.importForSchema(b);c.importForPublish(b);c.importForMap(b)};var k=this.protectedCustomInitEnv;this.protectedCustomInitEnv=function(b){c.setModuleWithLonger(!1,!1);c.setModuleWithSquare(!0,!0);k(b);J=c.getUrlParamUtil().getUrlParam("bizTag");ia=new Q;var e=c.getUrlParamUtil().getParamPathPrefix();
ia.setRemoteUrl((e?e:"/ierp")+"/qing/schemaManage.do");ia.setTag(c.getUrlParamUtil().getParamTag());c.registMapMapLibrary(e);c.loadPublishOperModel(c.getUrlParamUtil().getUrlParam("publishId"),!0,function(g){var A=com.kingdee.bos.qing.publish.model.OperType;na=new H(g?g[A.SQUARE]:null);b()},function(){na=new H(null);b()})};this.protectedLoadingSquare=function(b,e,g){c.loadMeta(b,function(A){var fa=com.kingdee.bos.qing.schemamanage.SchemaManage,X=com.kingdee.bos.qing.schemamanage.model.SchemaAttrModel;
e.prepareMeta(A);A=new fa(J,X.SCHEMASOURCE_SQUARE,"");A.setReloadMetaFun(function(ra){c.reloadMeta(function(xa){e.prepareMeta(xa);ra&&ra()})});A.initializeForSystemSquareEdit(ia,e,function(ra){g(ra)},J);A.setSaveSuccessCallback(n)})};this.protectedInitDesignerForSquare=function(b){b.setDesignerOperationJudger(null,na);"true"!=c.getUrlParamUtil().getUrlParam("haveToCarryData")&&c.hookRefresh(b,com.kingdee.bos.qing.prepare.DataExtractor);c.hookCloseTab(b);c.hookSetCurrentTabStatus(b);c.initDesigntimeLinkage()};
var n=function(){var b=new Q,e=c.getUrlParamUtil().getParamPathPrefix();b.setRemoteUrl((e?e:"/ierp")+"/qing/publishTo.do");b.setTag(c.getUrlParamUtil().getParamTag());e=com.kingdee.bos.qing.publish.common.PublishFactory;var g=com.kingdee.bos.qing.publish.model.PublishTargetType,A=c.getUrlParamUtil().getUrlParam("publishTargetType"),fa=c.getUrlParamUtil().getUrlParam("publishId"),X=c.getUrlParamUtil().getUrlParam("schemaId"),ra=c.getUrlParamUtil().getUrlParam("subscribeKey"),xa=c.getUrlParamUtil().getUrlParam("fromPageClientId");
A==g.MOBILE?(A=c.getUrlParamUtil().getUrlParam("lappId"),fa=c.getUrlParamUtil().getUrlParam("lappUserType"),e.createPublishFacade(g.MOBILE,b).updateLappThumbnail(A,X,xa,ra,fa)):A==g.CARD_REPOSITORY&&e.createPublishFacade(g.CARD_REPOSITORY,b).updateCardThumbnail(fa,xa,ra)}});V.PublishEditSceneFactory.register(y.LONGER|y.MANAGETYPE_PUBLISH,function(){ba.call(this);var c=this.protectedMethod,J,ia,na,P,k,n=this.protectedImportMoreCode;this.protectedImportMoreCode=function(g){n(g);c.importLinkage(g);c.importForSchema(g);
c.importForPublish(g)};var b=this.protectedCustomInitEnv;this.protectedCustomInitEnv=function(g){c.setModuleWithLonger(!0,!0);c.setModuleWithSquare(!1,!1);b(g);J=c.getUrlParamUtil().getUrlParam("publishId");ia=c.getUrlParamUtil().getUrlParam("bizTag");na=c.getUrlParamUtil().getUrlParam("publishTargetType");P=new Q;var A=c.getUrlParamUtil().getParamPathPrefix();P.setRemoteUrl((A?A:"/ierp")+"/qing/schemaManage.do");P.setTag(c.getUrlParamUtil().getParamTag());c.loadPublishOperModel(c.getUrlParamUtil().getUrlParam("publishId"),
!0,function(fa){var X=com.kingdee.bos.qing.publish.model.OperType;k=new D(fa?fa[X.LONGER]:null);g()},function(){k=new D(null);g()})};this.protectedLoadingLonger=function(g,A,fa){c.loadMeta(g,function(X){var ra=com.kingdee.bos.qing.schemamanage.SchemaManage,xa=com.kingdee.bos.qing.schemamanage.model.SchemaAttrModel;A.prepareMeta(X);X=new ra(J,xa.SCHEMASOURCE_LONGER);X.setDesignerOperationJudger(k);X.setReloadMetaFun(function(Z){c.reloadMeta(function(ka){A.prepareMeta(ka);Z&&Z()})});X.initializeForLongerEdit(P,
A,function(Z){fa(Z)},ia,na);X.setSaveSuccessCallback(e)})};this.protectedInitDesignerForLonger=function(g){g.setDesignerOperationJudger(k,null);"true"!=c.getUrlParamUtil().getUrlParam("haveToCarryData")&&c.hookRefresh(g,com.kingdee.bos.qing.prepare.DataExtractor);c.hookCloseTab(g);c.hookSetCurrentTabStatus(g);c.initDesigntimeLinkage()};var e=function(){var g=c.getUrlParamUtil().getUrlParam("publishTargetType"),A=c.getUrlParamUtil().getUrlParam("schemaId"),fa=com.kingdee.bos.qing.publish.model.PublishTargetType;
if(g==fa.MOBILE){g=new Q;var X=c.getUrlParamUtil().getParamPathPrefix();g.setRemoteUrl((X?X:"")+"/qing/publishTo.do");g.setTag(c.getUrlParamUtil().getParamTag());X=com.kingdee.bos.qing.publish.common.PublishFactory;var ra=c.getUrlParamUtil().getUrlParam("lappId"),xa=c.getUrlParamUtil().getUrlParam("lappUserType"),Z=c.getUrlParamUtil().getUrlParam("subscribeKey"),ka=c.getUrlParamUtil().getUrlParam("fromPageClientId");X.createPublishFacade(fa.MOBILE,g).updateLappThumbnail(ra,A,ka,Z,xa)}}});V.PublishEditSceneFactory.register(y.DASHBOARD|
y.MANAGETYPE_PUBLISH,function(){Aa.call(this);var c=this,J=this.protectedMethod,ia;this.protectedSetSourceDetail=function(k,n){ia=k+"/"+n};this.protectedGetSourceDetail=function(){return ia};this.protectedCreateFacade=function(k,n,b){return new com.kingdee.bos.qing.dashboard.PublishDsbDesignerFacade(k,n,b)};this.protectedLoading=function(k,n,b){var e=P();(new com.kingdee.bos.qing.dashboard.PublishDsbDesignerFacade(k,function(g){g&&n.setJsonModel(g,function(A){A.isError()&&J.getMessageCurtain().showError(z.get("failToLoadDsbCurtain",
"\u52a0\u8f7d\u4eea\u8868\u677f\u5931\u8d25\u3002"))});b(!0)},function(g,A){return 1030001==g?(com.kingdee.bos.qing.framework.common.RemoteFramework.openErrorPage(g,com.kingdee.bos.qing.common.Base64Util.encode(encodeURIComponent(A))),!0):!1})).loadModel(e)};this.protectedOverrideDsbSource=function(k){k=JSON.stringify(k.getJsonModel());(new com.kingdee.bos.qing.dashboard.PublishDsbDesignerFacade(c.getRemoteImpl(),function(n){J.getMessageCurtain().showSuccess("\u540c\u6b65\u6210\u529f\u3002")},function(n,
b){return 1010006==n||1010004==n?(n=z.get("SyncSchemaPublishDeleted","\u8be5\u53d1\u5e03\u8bb0\u5f55\u5bf9\u5e94\u7684\u53d1\u5e03\u6765\u6e90\u5df2\u5220\u9664\uff0c\u65e0\u6cd5\u8fdb\u884c\u540c\u6b65\u64cd\u4f5c\u3002"),c.showSyncRefused(n,!1,""),!0):2301001==n?(n=z.get("SyncSchemaPublishLogDeleted","\u8be5\u53d1\u5e03\u8bb0\u5f55\u5df2\u88ab\u5220\u9664\uff0c\u65e0\u6cd5\u8fdb\u884c\u540c\u6b65\u64cd\u4f5c\u3002"),c.showSyncRefused(n,!1,""),!0):!1})).syncModelToDsbSource(P(),k)};this.protectedCreateNewDsb=
function(k,n,b){k=JSON.stringify(k.getJsonModel());(new com.kingdee.bos.qing.dashboard.PublishDsbDesignerFacade(c.getRemoteImpl(),function(e){b&&b();J.getMessageCurtain().showSuccess("\u540c\u6b65\u6210\u529f\u3002")},function(e,g){return 1010006==e?(b&&b(),e=z.get("SyncSchemaToNewDSBCategoryDeletedCurtain","\u65b0\u4eea\u8868\u677f\u7684\u5206\u7c7b\u4e0d\u5b58\u5728\u6216\u5df2\u88ab\u5220\u9664\u3002"),c.showSyncRefused(e,!1,""),!0):2301001==e?(b&&b(),e=z.get("SyncSchemaPublishLogDeleted","\u8be5\u53d1\u5e03\u8bb0\u5f55\u5df2\u88ab\u5220\u9664\uff0c\u65e0\u6cd5\u8fdb\u884c\u540c\u6b65\u64cd\u4f5c\u3002"),
c.showSyncRefused(e,!1,""),!0):1010003==e?(b&&b(e),!0):!1})).syncModelToNewDsb(k,n)};this.protectedCheckPublishLogExist=function(k,n){(new com.kingdee.bos.qing.dashboard.PublishDsbDesignerFacade(c.getRemoteImpl(),function(b){k&&k()},function(b,e){return 2301001==b?(b=z.get("SyncSchemaPublishLogDeleted","\u8be5\u53d1\u5e03\u8bb0\u5f55\u5df2\u88ab\u5220\u9664\uff0c\u65e0\u6cd5\u8fdb\u884c\u540c\u6b65\u64cd\u4f5c\u3002"),c.showSyncRefused(b,!1,""),!0):!1})).checkPublishExist(P())};this.checkDsbIsOpened=
function(k,n){(new com.kingdee.bos.qing.dashboard.PublishDsbDesignerFacade(c.getRemoteImpl(),function(b){c.protectedSetSourceDetail(b.themeGroupName,b.themeName);1==b.isLocked?k&&k():n&&n();return!0},function(b,e){return 2301001==b?(b=z.get("SyncSchemaPublishLogDeleted","\u8be5\u53d1\u5e03\u8bb0\u5f55\u5df2\u88ab\u5220\u9664\uff0c\u65e0\u6cd5\u8fdb\u884c\u540c\u6b65\u64cd\u4f5c\u3002"),c.showSyncRefused(b,!1,""),!0):1010004==b?(b=z.get("SyncSchemaPublishDeleted","\u8be5\u53d1\u5e03\u8bb0\u5f55\u5bf9\u5e94\u7684\u53d1\u5e03\u6765\u6e90\u5df2\u5220\u9664\uff0c\u65e0\u6cd5\u8fdb\u884c\u540c\u6b65\u64cd\u4f5c\u3002"),
c.showSyncRefused(b,!1,""),!0):!1})).checkDsbIsOpened(P())};this.protectedListUnpresetThemeGroup=function(k){(new com.kingdee.bos.qing.dashboard.PublishDsbDesignerFacade(c.getRemoteImpl(),k,function(n,b){return!1})).protectedListUnpresetThemeGroup()};this.protectedGetRemoteUrl=function(){var k=J.getUrlParamUtil().getParamPathPrefix();return(k?k:"/ierp")+"/qing/editPublishedDsb.do"};this.protectedGetDashboardUniqueId=function(){return P()};var na=c.protectedInitDesigner;this.protectedInitDesigner=
function(k){na(k);J.hookSyncPublishToDsb(k);J.hookCloseTab(k)};this.protectedSaveModel=function(k){if(k.getConductor().isDirty()){var n=JSON.stringify(k.getJsonModel());(new com.kingdee.bos.qing.dashboard.PublishDsbDesignerFacade(c.getRemoteImpl(),function(b){J.getMessageCurtain().showSuccess(z.get("saveDsbSuccess","\u4fdd\u5b58\u4eea\u8868\u677f\u6210\u529f\u3002"));k.getConductor().clearDirty()},function(b,e){return 2301001==b?(J.getMessageCurtain().showPrompt(z.get("dsbIsDeletedCurtain","\u5bf9\u5e94\u4eea\u8868\u677f\u4e0d\u5b58\u5728\u6216\u5df2\u88ab\u5220\u9664\u3002")),
!0):!1})).saveModel(P(),n)}else J.getMessageCurtain().showPrompt(z.get("noEditCurtain","\u4eea\u8868\u677f\u5185\u5bb9\u6ca1\u6709\u4fee\u6539\u3002"),2E3)};var P=function(){return J.getUrlParamUtil().getUrlParam("publishId")}});V.PublishEditSceneFactory.register(y.DASHBOARD|y.MANAGETYPE_TIMED_PUSH_LAPP,function(){Aa.call(this);var c=this,J=this.protectedMethod,ia;this.protectedSetSourceDetail=function(k,n){ia=k+"/"+n};this.protectedGetSourceDetail=function(){return ia};this.protectedCreateFacade=
function(k,n,b){return new com.kingdee.bos.qing.dashboard.LappPushDsbDesignerFacade(k,n,b)};this.protectedLoading=function(k,n,b){var e=P();(new com.kingdee.bos.qing.dashboard.LappPushDsbDesignerFacade(k,function(g){g&&n.setJsonModel(g,function(A){A.isError()&&J.getMessageCurtain().showError(z.get("failToLoadDsbCurtain","\u52a0\u8f7d\u4eea\u8868\u677f\u5931\u8d25\u3002"))});b(!0)},function(g,A){return 1030001==g?(com.kingdee.bos.qing.framework.common.RemoteFramework.openErrorPage(g,com.kingdee.bos.qing.common.Base64Util.encode(encodeURIComponent(A))),
!0):!1})).loadModel(e)};this.protectedGetRemoteUrl=function(){var k=J.getUrlParamUtil().getParamPathPrefix();return(k?k:"/ierp")+"/qing/editLappPushDsb.do"};this.protectedGetDashboardUniqueId=function(){return P()};this.protectedOverrideDsbSource=function(k){k=JSON.stringify(k.getJsonModel());(new com.kingdee.bos.qing.dashboard.LappPushDsbDesignerFacade(c.getRemoteImpl(),function(n){J.getMessageCurtain().showSuccess("\u540c\u6b65\u6210\u529f\u3002")},function(n,b){return 1010006==n||1010004==n?(n=
z.get("SyncSchemaPublishDeleted","\u8be5\u63a8\u9001\u8bb0\u5f55\u5bf9\u5e94\u7684\u63a8\u9001\u6765\u6e90\u5df2\u5220\u9664\uff0c\u65e0\u6cd5\u8fdb\u884c\u540c\u6b65\u64cd\u4f5c\u3002"),c.showSyncRefused(n,!1,null),!0):4300109==n?(n=z.get("SyncSchemaTPLogDeleted","\u8be5\u63a8\u9001\u8bb0\u5f55\u5df2\u88ab\u5220\u9664\uff0c\u65e0\u6cd5\u8fdb\u884c\u540c\u6b65\u64cd\u4f5c\u3002"),c.showSyncRefused(n,!1,""),!0):!1})).syncModelToDsbSource(P(),k)};this.protectedCreateNewDsb=function(k,n,b){k=JSON.stringify(k.getJsonModel());
(new com.kingdee.bos.qing.dashboard.LappPushDsbDesignerFacade(c.getRemoteImpl(),function(e){b&&b();J.getMessageCurtain().showSuccess("\u540c\u6b65\u6210\u529f\u3002")},function(e,g){return 1010006==e?(b&&b(),e=z.get("SyncSchemaToNewDSBCategoryDeleted","\u65b0\u4eea\u8868\u677f\u7684\u5206\u7c7b\u4e0d\u5b58\u5728\u6216\u5df2\u88ab\u5220\u9664"),c.showSyncRefused(e,!1,""),!0):4300109==e?(b&&b(),e=z.get("SyncSchemaTPLogDeleted","\u8be5\u63a8\u9001\u8bb0\u5f55\u5df2\u88ab\u5220\u9664\uff0c\u65e0\u6cd5\u8fdb\u884c\u540c\u6b65\u64cd\u4f5c\u3002"),
c.showSyncRefused(e,!1,""),!0):1010003==e?(b&&b(e),!0):!1})).syncModelToNewDsb(P(),n,k)};this.protectedListUnpresetThemeGroup=function(k){(new com.kingdee.bos.qing.dashboard.LappPushDsbDesignerFacade(c.getRemoteImpl(),k,function(n,b){return!1})).protectedListUnpresetThemeGroup()};this.checkDsbIsOpened=function(k,n){(new com.kingdee.bos.qing.dashboard.LappPushDsbDesignerFacade(c.getRemoteImpl(),function(b){c.protectedSetSourceDetail(b.themeGroupName,b.themeName);1==b.isLocked?k&&k():n&&n()},function(b,
e){return 2301001==b?(b=z.get("SyncSchemaTPDeleted","\u8be5\u63a8\u9001\u8bb0\u5f55\u5bf9\u5e94\u7684\u63a8\u9001\u6765\u6e90\u5df2\u5220\u9664\uff0c\u65e0\u6cd5\u8fdb\u884c\u540c\u6b65\u64cd\u4f5c\u3002"),c.showSyncRefused(b,!1,""),!0):4300109==b?(b=z.get("SyncSchemaTPLogDeleted","\u8be5\u63a8\u9001\u8bb0\u5f55\u5df2\u88ab\u5220\u9664\uff0c\u65e0\u6cd5\u8fdb\u884c\u540c\u6b65\u64cd\u4f5c\u3002"),c.showSyncRefused(b,!1,""),!0):!1})).checkDsbIsOpened(P())};this.protectedCheckPublishLogExist=function(k,
n){(new com.kingdee.bos.qing.dashboard.LappPushDsbDesignerFacade(c.getRemoteImpl(),function(b){k&&k()},function(b,e){return 4300109==b?(b=z.get("SyncSchemaTPLogDeleted","\u8be5\u63a8\u9001\u8bb0\u5f55\u5df2\u88ab\u5220\u9664\uff0c\u65e0\u6cd5\u8fdb\u884c\u540c\u6b65\u64cd\u4f5c\u3002"),c.showSyncRefused(b,!1,""),!0):!1})).checkLappConfigExist(P())};var na=c.protectedInitDesigner;this.protectedInitDesigner=function(k){na(k);J.hookSyncTimePushToDsb(k);J.hookCloseTab(k)};this.protectedSaveModel=function(k){if(k.getConductor().isDirty()){var n=
JSON.stringify(k.getJsonModel());(new com.kingdee.bos.qing.dashboard.EmailPushDsbDesignerFacade(c.getRemoteImpl(),function(b){J.getMessageCurtain().showSuccess(z.get("saveDsbSuccess","\u4fdd\u5b58\u4eea\u8868\u677f\u6210\u529f\u3002"));k.getConductor().clearDirty()},function(b,e){return 4300109==b?(J.getMessageCurtain().showPrompt(z.get("dsbIsDeletedCurtain","\u5bf9\u5e94\u4eea\u8868\u677f\u4e0d\u5b58\u5728\u6216\u5df2\u88ab\u5220\u9664\u3002")),!0):!1})).saveModel(P(),n)}else J.getMessageCurtain().showPrompt(z.get("noEditCurtain",
"\u4eea\u8868\u677f\u5185\u5bb9\u6ca1\u6709\u4fee\u6539\u3002"),2E3)};var P=function(){return J.getUrlParamUtil().getUrlParam("configId")}})})();
//qingVersionTag: 20250324