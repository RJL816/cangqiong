(function(){function z(m,d,t,v){com.kingdee.bos.qing.framework.common.AbstractFacade.call(this,m,d,t,v);var p=this.protectedMethod;this.getGaiPrivacyAgreement=function(){p.remote("getGaiPrivacyAgreement",{})}}function A(){com.kingdee.bos.qing.framework.common.AbstractRemoteCall.call(this);var m;this.getRemoteUrl=function(){return m};this.setRemoteUrl=function(d){m=d}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos=
{});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.scene&&(com.kingdee.bos.qing.scene={});com.kingdee.bos.qing.scene.ThemeManageScene=function(){var m,d,t,v,p,u;(function(){var e=com.kingdee.bos.qing;m=e.SkinUtil;u=e.Seer;e=com.kingdee.bos.qing.common;d=e.Util;e=com.kingdee.bos.qing.framework.common;t=e.MultilanguageManager.createPackageAccessor(com.kingdee.bos.qing.theme.ui);v=e.WebPageInitializer;p=e.TabbedUiUtil})();this.start=function(){v.init();
B();var e=com.kingdee.bos.qing.behavior.BehaviorManager;com.kingdee.bos.qing.theme.common.UserOperationReporter.hookCollector(function(h,q){e.interestInBehavior(h,q)});e.interestInBehaviorEntrance(e.ENTRANCE_THEME_MANAGER)};var B=function(){var e=d.decodeParamFromUrl(location.search,"path");e=e?e:"/ierp";var h=com.kingdee.bos.qing.theme.common.Integration;h.setRemoteUrl(e+"/qing/themeManage.do");h.setMessageRemoteUrl(e+"/qing/messageManage.do");var q=e+"/qing/resource.do";h.setResourceRemoteUrl(q);
h.setFontRemoteImpl(e+"/qing/fontLib.do");h.setDataModelEntrance(function(c,a,b){var f=m.getUrlParamValue();a=t.get("dataModeling","\u6570\u636e\u51c6\u5907")+"-"+a;var g=e+"/qing/dataModelingEntrance.do";g=d.appendParamToUrl(g,"themeID",c);g=d.appendParamToUrl(g,"isPreset",b);f&&(g=d.appendParamToUrl(g,"skin",f));p.openNewTab(a,g)});h.setAnalysisEntrance(function(c,a,b){var f=m.getUrlParamValue(),g=t.get("moduleLonger","\u6570\u636e\u5206\u6790")+"-"+a,k=e+"/qing/themeAnalysisEntrance.do";k=d.appendParamToUrl(k,
"themeId",c);k=d.appendParamToUrl(k,"themeName",a);k=d.appendParamToUrl(k,"isPreset",b);f&&(k=d.appendParamToUrl(k,"skin",f));p.openNewTab(g,k)});h.setSquareEntrance(function(c,a,b){var f=m.getUrlParamValue(),g=t.get("moduleSquare","\u6570\u636e\u6597\u65b9")+"-"+a,k=e+"/qing/themeSquareEntrance.do";k=d.appendParamToUrl(k,"themeId",c);k=d.appendParamToUrl(k,"themeName",a);k=d.appendParamToUrl(k,"isPreset",b);f&&(k=d.appendParamToUrl(k,"skin",f));p.openNewTab(g,k)});h.setDashboardEntrance(function(c,
a,b){var f=m.getUrlParamValue();a=t.get("dashboard","\u4eea\u8868\u677f")+"-"+a;var g=e+"/qing/dashboardEntrance.do";g=d.appendParamToUrl(g,"dsbId",c);g=d.appendParamToUrl(g,"isPreset",b);f&&(g=d.appendParamToUrl(g,"skin",f));p.openNewTab(a,g)});h.setAIAnalysisEntrance(function(c,a,b){C(c,a,b)});h.setFunDeleteLappPublishInfos(function(c){var a=com.kingdee.bos.qing.CodeLoader.createSafety();a.pushJs("biz-common/qing-biz-common.js");a.pushJs("common/qing-schedule.js");a.pushJs("schema-manage/schema-manage-initialize.js");
a.pushJs("schema-manage/schema-manage-ui.js");a.pushJs("publish/qing-publish.js");a.pushJs("timedpush/qing-timedpush.js");a.pushJs("lightapp/common/qing-lapp-env.js");a.pushJs("timedpush/qing-timedpush-lapp.js");a.load(function(){var b=new com.kingdee.bos.qing.theme.common.RemoteImpl;b.setRemoteUrl(e+"/qing/publishTo.do");com.kingdee.bos.qing.timedpush.LappIntegration.deleteLappPublishInfos(b,c)})});h.setFunPublishRemoteImpl(function(){var c=new com.kingdee.bos.qing.theme.common.RemoteImpl;c.setRemoteUrl(e+
"/qing/publishTo.do");return c});h.setFunPublishContext(function(){var c=new com.kingdee.bos.qing.publish.common.PublishContext;c.setParamPathPrefix(e);c.setLappEntranceUrl(e+"/qing/lappEntrance.do");c.setSpaceID(u.getUrlParamValue("qingID"));return c});h.setFunPublishedEmailLoginViewUrl(function(){var c=m.getUrlParamValue(),a=u.getUrlParamValue("language"),b=e+"/qing/publishedEmailEntrance.do?publishId=(publishId)&kdcdc=(accountId)";c&&(b=d.appendParamToUrl(b,"skin",c));a&&(b=d.appendParamToUrl(b,
"language",a));return b});h.setFunPublishedEmailAnonymousViewUrl(function(){var c=m.getUrlParamValue(),a=u.getUrlParamValue("language"),b=e+"/index.html?userId=Guest&accountId=(accountId)&appNumber=qing&formId=qing_analysis_pub_email#/dform?appNumber=qing&formId=qing_analysis_pub_email&publishId=(publishId)";c&&(b=d.appendParamToUrl(b,"skin",c));a&&(b=d.appendParamToUrl(b,"language",a));return b});h.setFunPublishContentEditEntrance(function(){return function(c,a,b){var f=com.kingdee.bos.qing.publish.model.PublishTargetType;
if(b&&f.MOBILE==b){f=c.getPublishId();var g=c.getId();var k=c.getLappUserType()}else f=c.getId();var l=m.getUrlParamValue(),n=u.getUrlParamValue("language");b=e+"/qing/publishContentEditEntrance.do";b=d.appendParamToUrl(b,"skin",l);b=d.appendParamToUrl(b,"language",n);b=d.appendParamToUrl(b,"publishId",f);g&&(b=d.appendParamToUrl(b,"lappId",g));k&&(b=d.appendParamToUrl(b,"lappUserType",k));g=b;a&&(k="editPublishedContent-"+f,f=com.kingdee.bos.qing.publish.common.PublishSubscribeHelper,f.putSubscribe(k,
a),b=d.appendParamToUrl(b,"subscribeKey",k),b=d.appendParamToUrl(b,"currentPageClientId",f.getCurrentPageClientId()));com.kingdee.bos.qing.framework.common.TabbedUiUtil.openNewTab(t.get("editPublishedContent","\u7f16\u8f91\u53d1\u5e03\u65b9\u6848-")+c.getName(),b,g)}});h.setFunTimedPushContentEditEntrance(function(){return function(c){var a=e+"/qing/timedPushContentEditEntrance.do",b=t.get("editTimedPushContent","\u7f16\u8f91\u63a8\u9001\u65b9\u6848");if(c instanceof com.kingdee.bos.qing.timedpush.model.EmailConfig){var f=
c.getId(),g=c.getPublishSourceType();k=c.getSchemaSourceType();a=d.appendParamToUrl(a,"configId",f);a=d.appendParamToUrl(a,"publishSourceType",g);a=d.appendParamToUrl(a,"schemaType",k);a=d.appendParamToUrl(a,"pushTarget","email");b=b+"-"+c.getNameRule().getName();c.isSourceNameNotFound()&&(a=d.appendParamToUrl(a,"errorCode","2301001"))}else{f=c.getId();g=c.getPushTargetType();var k=c.getSchemaType();a=d.appendParamToUrl(a,"configId",f);a=d.appendParamToUrl(a,"pushTargetType",g);a=d.appendParamToUrl(a,
"schemaType",k);a=d.appendParamToUrl(a,"pushTarget","lapp");b=b+"-"+c.getName();c.getSourceName()||(a=d.appendParamToUrl(a,"errorCode","2301001"))}c=m.getUrlParamValue();k=u.getUrlParamValue("language");c&&(a=d.appendParamToUrl(a,"skin",c));k&&(a=d.appendParamToUrl(a,"language",k));com.kingdee.bos.qing.framework.common.TabbedUiUtil.openNewTab(b,a)}});h.setParamPathPrefix(D());h.setImportJSCodeForManager(function(){var c=com.kingdee.bos.qing.CodeLoader;c.setCallback(function(){var a=com.kingdee.bos.qing.theme.message.panel.common.Integration;
a.setFunPublishRemoteImpl(h.getFunPublishRemoteImpl());a.setFunQingCenterAndMenuEntrance(function(b,f,g,k){f=m.getUrlParamValue();var l=e+"/qing/publishEntrance.do";l=d.appendParamToUrl(l,"publishId",b);"extreport"==k?(l=d.appendParamToUrl(l,"appID","qing_rpt"),f&&(l=d.appendParamToUrl(l,"skin",f)),p.openNewTabInAppId(g,l,l,p.QING_RPT)):(f&&(l=d.appendParamToUrl(l,"skin",f)),p.openNewTab(g,l))});a.setFunPublishContext(h.getFunPublishContext());a.setResourceRemoteUrl(q);a.setDataModelEntrance(h.getDataModelEntrance());
a.setFunPublishedEmailLoginViewUrl(h.getFunPublishedEmailLoginViewUrl());a.setFunPublishedEmailAnonymousViewUrl(h.getFunPublishedEmailAnonymousViewUrl());a.setFunPublishContentEditEntrance(h.getFunPublishContentEditEntrance());a.setFunTimedPushContentEditEntrance(h.getFunTimedPushContentEditEntrance());a=com.kingdee.bos.qing.modeler.message.panel.common.Integration;a.setMessageRemoteUrl(e+"/qing_modeler/message.do");a.setFunOpenModelSetPage(function(b,f){var g=m.getUrlParamValue(),k=t.get("modelSet",
"\u6a21\u578b\u96c6-")+f,l=e+"/qing_modeler/modelSetMainPage.do";l=d.appendParamToUrl(l,"modelSetId",b);l=d.appendParamToUrl(l,"modelSetName",f);l=d.appendParamToUrl(l,"currentPageClientId",com.kingdee.bos.qing.framework.common.RemoteFramework.getClientID());g&&(l=d.appendParamToUrl(l,"skin",g));p.openNewTabInAppId(k,l,l,p.QING_MODELER)});a.setFunOpenModelDesign(function(b,f,g,k,l){var n=com.kingdee.bos.qing.modeler.message.panel.common.ModelType,x=m.getUrlParamValue();l=(l=n.getModelTypeText(l))?
l+"-"+g:g;n=e+"/qing_modeler/deployDesignerEntrance.do";n=d.appendParamToUrl(n,"modelSetId",b);n=d.appendParamToUrl(n,"modelId",f);n=d.appendParamToUrl(n,"modelName",g);n=d.appendParamToUrl(n,"modelDeployId",k);x&&(n=d.appendParamToUrl(n,"skin",x));p.openNewTabInAppId(l,n,n,p.QING_MODELER)})});c.loadSkinCss("message","messagepanel");c.loadSkinJs("message","skin");c.loadJs("message/message-content-panel-management.js");c.loadI18n("message","messagepanel");c.loadSkinCss("qingmodeler/message","message-modeler-panel");
c.loadSkinJs("qingmodeler/message","skin");c.loadJs("qingmodeler/message/message-content-panel-management.js");c.loadI18n("qingmodeler/message","message-modeler-panel")});h.setHasAIAnalysisEntrance(u.getUrlParamValue("hasAIAnalysisEntrance"));h.setFunSetLappPrivateUrl(function(){com.kingdee.bos.qing.timedpush.LappIntegration.setLappPrivateUrl(e+"/qing/lappPrivateInfo.do")});var r=d.decodeParamFromUrl(location.search,"appID");h.setAppId(r);(new com.kingdee.bos.qing.theme.ui.Main).createJqUi().appendTo($(document.body))},
D=function(){var e=d.decodeParamFromUrl(location.search,"path");return e?e:"/ierp"},C=function(e,h,q){var r=d.decodeParamFromUrl(location.search,"path");r=r?r:"/ierp";var c=r+"/qing/AIAnalysis.do",a=new A;a.setRemoteUrl(c);(new z(a,function(b){var f=b.tenantAgreement,g=b.userAgreement,k=b.admin;b.hasQingGPTLicense?f&&!k?(b=com.kingdee.bos.qing.ui.component.MessageDialog,f=b.createFeedbackDialog(),f.setMsgImageType(b.MSG_CONFIRM),f.setOptionType(b.OPTION_OK),f.setButtonText(b.RETURN_OK,t.get("tenantAgreementConfirm",
"\u6211\u77e5\u9053\u4e86")),f.setMessage(t.get("tenantAgreementTips","\u60a8\u7684\u4f01\u4e1a\u8fd8\u672a\u7b7e\u7f72\u82cd\u7a79GPT\u670d\u52a1\u534f\u8bae\uff0c\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\u8fdb\u884c\u7b7e\u7f72\u3002")),f.showDialog(),f.setClosingChecker(function(l){return!0}),f.setClosedAction(function(l){})):w(f,g,r,e,h,q):y(r,e,h,q)},function(b,f){return!1})).getGaiPrivacyAgreement()},w=function(e,h,q,r,c,a){if(e||h){com.kingdee.bos.qing.integration.GaiPrivacyAgreementActionHandler.setCallback(function(f){var g=
f.content;f=g.tenantAgree;g=g.userAgree;e&&f?w(!1,h,q,r,c,a):h&&g&&w(e,!1,q,r,c,a)});var b={};b.tenantAgreement=e;b.userAgreement=h;com.kingdee.bos.qing.integration.GaiPrivacyAgreementActionHandler.openGaiPrivacyAgreement(b)}else y(q,r,c,a)},y=function(e,h,q,r){var c=m.getUrlParamValue(),a=t.get("AIAnalysis","AI\u6570\u636e\u5206\u6790\u52a9\u624b")+"-"+q;e=d.appendParamToUrl(e+"/qing/themeAIAnalysisEntrance.do","themeId",h);e=d.appendParamToUrl(e,"themeName",q);e=d.appendParamToUrl(e,"isPreset",
r);c&&(e=d.appendParamToUrl(e,"skin",c));p.openNewTab(a,e)}}})();
//qingVersionTag: 20250324