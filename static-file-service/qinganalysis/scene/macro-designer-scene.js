var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(b){var c=0;return function(){return c<b.length?{done:!1,value:b[c++]}:{done:!0}}};$jscomp.arrayIterator=function(b){return{next:$jscomp.arrayIteratorImpl(b)}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,c,e){if(b==Array.prototype||b==Object.prototype)return b;b[c]=e.value;return b};$jscomp.getGlobal=function(b){b=["object"==typeof globalThis&&globalThis,b,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var c=0;c<b.length;++c){var e=b[c];if(e&&e.Math==Math)return e}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(b,c){var e=$jscomp.propertyToPolyfillSymbol[c];if(null==e)return b[c];e=b[e];return void 0!==e?e:b[c]};
$jscomp.polyfill=function(b,c,e,h){c&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(b,c,e,h):$jscomp.polyfillUnisolated(b,c,e,h))};$jscomp.polyfillUnisolated=function(b,c,e,h){e=$jscomp.global;b=b.split(".");for(h=0;h<b.length-1;h++){var m=b[h];if(!(m in e))return;e=e[m]}b=b[b.length-1];h=e[b];c=c(h);c!=h&&null!=c&&$jscomp.defineProperty(e,b,{configurable:!0,writable:!0,value:c})};
$jscomp.polyfillIsolated=function(b,c,e,h){var m=b.split(".");b=1===m.length;h=m[0];h=!b&&h in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var q=0;q<m.length-1;q++){var v=m[q];if(!(v in h))return;h=h[v]}m=m[m.length-1];e=$jscomp.IS_SYMBOL_NATIVE&&"es6"===e?h[m]:null;c=c(e);null!=c&&(b?$jscomp.defineProperty($jscomp.polyfills,m,{configurable:!0,writable:!0,value:c}):c!==e&&(void 0===$jscomp.propertyToPolyfillSymbol[m]&&(e=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[m]=$jscomp.IS_SYMBOL_NATIVE?
$jscomp.global.Symbol(m):$jscomp.POLYFILL_PREFIX+e+"$"+m),$jscomp.defineProperty(h,$jscomp.propertyToPolyfillSymbol[m],{configurable:!0,writable:!0,value:c})))};$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(b){if(b)return b;var c=function(q,v){this.$jscomp$symbol$id_=q;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:v})};c.prototype.toString=function(){return this.$jscomp$symbol$id_};var e="jscomp_symbol_"+(1E9*Math.random()>>>0)+"_",h=0,m=function(q){if(this instanceof m)throw new TypeError("Symbol is not a constructor");return new c(e+(q||"")+"_"+h++,q)};return m},"es6","es3");
$jscomp.polyfill("Symbol.iterator",function(b){if(b)return b;b=Symbol("Symbol.iterator");for(var c="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),e=0;e<c.length;e++){var h=$jscomp.global[c[e]];"function"===typeof h&&"function"!=typeof h.prototype[b]&&$jscomp.defineProperty(h.prototype,b,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return b},"es6",
"es3");$jscomp.iteratorPrototype=function(b){b={next:b};b[Symbol.iterator]=function(){return this};return b};$jscomp.iteratorFromArray=function(b,c){b instanceof String&&(b+="");var e=0,h=!1,m={next:function(){if(!h&&e<b.length){var q=e++;return{value:c(q,b[q]),done:!1}}h=!0;return{done:!0,value:void 0}}};m[Symbol.iterator]=function(){return m};return m};$jscomp.polyfill("Array.prototype.keys",function(b){return b?b:function(){return $jscomp.iteratorFromArray(this,function(c){return c})}},"es6","es3");
(function(){function b(){var a=new D,f,l=function(){};this.setFunSelectedChangeListener=function(g){l=g};this.getJqUi=function(){if(!f){f=$("<div>");var g=(new B(x.get("app","\u5e94\u7528"))).getJqUi();a.setFunSelectedChangeListener(l);var d=a.getJqUi();y.layoutCtrl(g,15,0,70,23);y.layoutCtrl(d,60,0,200,23);g.appendTo(f);d.appendTo(f)}return f};this.getSource=function(){var g=a.getSelectedValue();if(g){var d=new z;d.setName("s"+(new Date).getTime());d.setTypeName(z.DBCENTER);d.setAppNumber(g.value);
return d}};this.setSource=function(g){var d=com.kingdee.bos.qing.common.Util.decodeParamFromUrl(window.location.search,"path");d=(d?d:"/ierp")+"/qing/dataModeling.do";var n=new com.kingdee.bos.qing.macro.RemoteImpl;n.setRemoteUrl(d);var p=g.getAppNumber();p&&(new A(n,function(t){t&&a.setSelectedValue({text:t.appName,value:p})},function(){a.setSelectedValue({text:p,value:p});return!0})).loadAppNameByAppNumber(p)}}function c(){var a,f=[],l,g=new E;this.setSchemas=function(d){f=d;g.setSchemas(f);if(l){d=
l.getName();for(var n=0;n<f.length;n++)if(f[n].getName()==d){l=f[n];g.setSelectedSchema(l);break}}else l=d[0],g.setSelectedSchema(l)};this.getJqUi=function(){if(!a){a=$("<div>");var d=(new B(x.get("schemas","\u6a21\u5f0f"))).getJqUi();g.setSchemas(f);g.setSelectedSchema(l);g.setFunSelectCallBack(function(p){l=p});g.setShowTips(!0);var n=g.getJqUi();y.layoutCtrl(d,15,0,70,23);y.layoutCtrl(n,60,0,180,23);d.appendTo(a);n.appendTo(a)}return a};this.getSource=function(){if(l){var d=new w;d.setName("s"+
(new Date).getTime());d.setTypeName(w.ENTITY);d.setSchemaName(l.getName());return d}};this.setSource=function(d){l=new C;d=d.getSchemaName();l.setName(d);l.setAlias(d);g.setSelectedSchema(l)}}function e(){this.createBizMetaSource=function(a){var f=null;a.bizMetaType==z.DBCENTER?(f=new z,f.fromJsonObject(a)):a.bizMetaType==w.ENTITY&&(f=new w,f.fromJsonObject(a));return f}}function h(){this.loadDataCenterDBType=function(a,f,l){var g=com.kingdee.bos.qing.common.Util.decodeParamFromUrl(window.location.search,
"path");g=(g?g:"/ierp")+"/qing/dataModeling.do";var d=new com.kingdee.bos.qing.macro.RemoteImpl;d.setRemoteUrl(g);(new A(d,function(n){f(n)},function(n,p){return l?l(n,p):!1})).getDBCenterAppDBType(a.getAppNumber())}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.scene&&(com.kingdee.bos.qing.scene=
{});"undefined"==typeof com.kingdee.bos.qing.scene.macro&&(com.kingdee.bos.qing.scene.macro={});"undefined"==typeof com.kingdee.bos.qing.scene.macro.designer&&(com.kingdee.bos.qing.scene.macro.designer={});var m=com.kingdee.bos.qing.scene.macro.designer;m.MacroDesignerScene=function(){var a,f;this.start=function(){d();t();a||(a=new com.kingdee.bos.qing.macro.MacroDesigner(n()),a.registerDataCenterSelectorConstructor(b),a.registerSuperQuerySelectorConstructor(c),l(a),com.kingdee.bos.qing.dbmanage.BizMetaSourceCreatorRegister.setCreator(new e),
com.kingdee.bos.qing.macro.DataCenterInfoHelper.registerInfoGetter(new h),p(),g());a.createJqUi().appendTo($(document.body));f&&f.unobserve();f=new F;f.setDelay(250);f.setCallback(function(){a.resize()});f.observe();var k=com.kingdee.bos.qing.behavior.BehaviorManager;k.interestInBehaviorEntrance(k.ENTRANCE_MACRO)};var l=function(k){if(k){var r=n(),u=new G;u.setRemoteImpl(r);u.setSuperQuerySelector(c);u.setDataCenterSelector(b);k.registerMacroTypeItem(u);u=new H;u.setRemoteImpl(r);k.registerMacroTypeItem(u)}},
g=function(){a.addToolbarButton(function(){I.closeCurrentTab()},null,x.get("closeTab","\u9000\u51fa"))},d=function(){var k=v.createSafety();k.pushSkinJs("macro","skin");k.pushSkinCss("macro","qing-macro");k.pushI18n("macro","macro");k.load()},n=function(){var k=com.kingdee.bos.qing.common.Util.decodeParamFromUrl(window.location.search,"path");k=(k?k:"/ierp")+"/qing/macroManage.do";var r=new com.kingdee.bos.qing.macro.RemoteImpl;r.setRemoteUrl(k);return r},p=function(){var k=com.kingdee.bos.qing.common.Util.decodeParamFromUrl(window.location.search,
"path");k=(k?k:"/ierp")+"/qing/dataModeling.do";var r=new com.kingdee.bos.qing.macro.RemoteImpl;r.setRemoteUrl(k);(new A(r,function(u){com.kingdee.bos.qing.macro.model.DataCenterAuthChecker.setAuthority(u?!0:!1)})).checkDBCenterPermission()},t=function(){var k=v.getSkinName(),r=new J;r.setFilePath("scene/skin/"+k+"/res/dm-impl.png");r.setStartPosition(1,1);r.setIconSize(16,16);k=r.createDescription(0,2);K.regist("f7",k)}};m.ModalMacroDesignerScene=function(){q.call(this);this.protectedGetRemoteImpl=
function(){var a=com.kingdee.bos.qing.common.Util.decodeParamFromUrl(window.location.search,"path");a=(a?a:"/ierp")+"/qing/macroManage.do";var f=new com.kingdee.bos.qing.macro.RemoteImpl;f.setRemoteUrl(a);return f};this.protectedGetDataCenterSelectorConstructor=function(){return b};this.protectedGetSuperQuerySelectorConstructor=function(){return c}};var q,v,L,J,K,I,F,B,y,x,D,E,C,z,w,A,M,N,G,H;(function(){var a=com.kingdee.bos.qing;v=a.CodeLoader;L=a.Seer;a=com.kingdee.bos.qing.scene;D=a.AppChooseDialogSelector;
z=a.ERPCloudDBCenterSource;w=a.SuperQuerySource;A=a.DataCenterFacade;M=a.SuperQueryFacade;a=com.kingdee.bos.qing.framework.common;J=a.IconsFile;I=a.TabbedUiUtil;F=a.WindowResizeObserver;x=a.MultilanguageManager.createPackageAccessor(com.kingdee.bos.qing.scene);a=com.kingdee.bos.qing.ui.component;B=a.Label;a=com.kingdee.bos.qing.common;y=a.DomUtil;a=com.kingdee.bos.qing.data;C=a.SchemaInfo;E=a.SuperQuerySchemaSelector;K=a.Icons;a=com.kingdee.bos.qing.macro;q=a.AbstractModalMacroDesignerScene;N=a.MacroAppendSceneParams;
a=com.kingdee.bos.qing.macro.sql;G=a.SQLMacroTypeItem;a=com.kingdee.bos.qing.macro.entity;H=a.EntityMacroTypeItem})();N.addFunAppendMoreParams(function(a){a.appID=L.getUrlParamValue("appID")});c.loadUsableSchemas=function(a,f){var l=com.kingdee.bos.qing.common.Util.decodeParamFromUrl(window.location.search,"path"),g=(l?l:"/ierp")+"/qing/dataModeling.do";l=new com.kingdee.bos.qing.macro.RemoteImpl;l.setRemoteUrl(g);g=new w;g.setName("s"+(new Date).getTime());g.setTypeName(w.ENTITY);(new M(l,function(d){for(var n=
[],p=Object.keys(d),t=0;t<p.length;t++){var k=new C;k.setName(p[t]);k.setAlias(d[p[t]]);n.push(k)}a(n);0==n.length&&(d=x.get("noAuthentication","\u6ca1\u6709\u53ef\u7528\u7684\u6a21\u5f0f\uff0c\u8bf7\u5148\u8054\u7cfb\u7ba1\u7406\u5458\u6388\u6743\u6a21\u5f0f\u3002"),f.showPrompt(d))},function(d,n){3201007==d&&(n=x.get("SQNotDeploy","\u5f53\u524d\u73af\u5883\u672a\u90e8\u7f72\u8d85\u7ea7\u67e5\u8be2\u670d\u52a1\u6216\u670d\u52a1\u672a\u542f\u52a8\uff0c\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\u68c0\u67e5\u8d85\u7ea7\u67e5\u8be2\u90e8\u7f72\u60c5\u51b5\u3002"));
f.showPrompt(n);return!0})).loadUsableSchemas(g)}})();
//qingVersionTag: 20250324