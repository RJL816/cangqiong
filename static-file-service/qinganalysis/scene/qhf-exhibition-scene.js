var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(N,Z,O){if(N==Array.prototype||N==Object.prototype)return N;N[Z]=O.value;return N};
$jscomp.getGlobal=function(N){N=["object"==typeof globalThis&&globalThis,N,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var Z=0;Z<N.length;++Z){var O=N[Z];if(O&&O.Math==Math)return O}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(N,Z){var O=$jscomp.propertyToPolyfillSymbol[Z];if(null==O)return N[Z];O=N[O];return void 0!==O?O:N[Z]};$jscomp.polyfill=function(N,Z,O,da){Z&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(N,Z,O,da):$jscomp.polyfillUnisolated(N,Z,O,da))};
$jscomp.polyfillUnisolated=function(N,Z,O,da){O=$jscomp.global;N=N.split(".");for(da=0;da<N.length-1;da++){var X=N[da];if(!(X in O))return;O=O[X]}N=N[N.length-1];da=O[N];Z=Z(da);Z!=da&&null!=Z&&$jscomp.defineProperty(O,N,{configurable:!0,writable:!0,value:Z})};
$jscomp.polyfillIsolated=function(N,Z,O,da){var X=N.split(".");N=1===X.length;da=X[0];da=!N&&da in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var ka=0;ka<X.length-1;ka++){var C=X[ka];if(!(C in da))return;da=da[C]}X=X[X.length-1];O=$jscomp.IS_SYMBOL_NATIVE&&"es6"===O?da[X]:null;Z=Z(O);null!=Z&&(N?$jscomp.defineProperty($jscomp.polyfills,X,{configurable:!0,writable:!0,value:Z}):Z!==O&&(void 0===$jscomp.propertyToPolyfillSymbol[X]&&(O=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[X]=
$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(X):$jscomp.POLYFILL_PREFIX+O+"$"+X),$jscomp.defineProperty(da,$jscomp.propertyToPolyfillSymbol[X],{configurable:!0,writable:!0,value:Z})))};
$jscomp.polyfill("String.prototype.replaceAll",function(N){return N?N:function(Z,O){if(Z instanceof RegExp&&!Z.global)throw new TypeError("String.prototype.replaceAll called with a non-global RegExp argument.");return Z instanceof RegExp?this.replace(Z,O):this.replace(new RegExp(String(Z).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"),"g"),O)}},"es_2021","es3");
$jscomp.findInternal=function(N,Z,O){N instanceof String&&(N=String(N));for(var da=N.length,X=0;X<da;X++){var ka=N[X];if(Z.call(O,ka,X,N))return{i:X,v:ka}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(N){return N?N:function(Z,O){return $jscomp.findInternal(this,Z,O).v}},"es6","es3");
(function(){function N(){da.call(this);var v=this,c=this.protectedMethod,k,S,ea,D,E;this.setCurrentPublishSchema=function(a){E=a};this.setUserOperatorPrevCheck=function(a){ea=a};this.setCloseResourceLock=function(a){};this.protectedHaveToCarryData=function(){return!1};this.protectedNeedToShowMessageBox=function(){return!0};this.protectedGetRemoteUrl=function(){var a=c.getUrlParamUtil().getParamPathPrefix();return(a?a:"/ierp")+"/qing/core.do"};this.protectedImportMoreCode=function(a){a.pushSkinJs("scene",
"skin");a.pushI18n("scene","scene")};this.protectedCustomInitEnv=function(a){a=$("<div>");a.css({position:"fixed",bottom:"3px",right:"1px",width:"180px",height:"18px",zIndex:"999"});f(a);v.protectedNeedToShowMessageBox()&&m(a);a.appendTo($(document.body));com.kingdee.bos.qing.integration.ImglibUrlParser.hookUrlParser()};var f=function(a){X.setCallback(function(){var b=new com.kingdee.bos.qing.support.Main;b.setParamLanguage(c.getUrlParamUtil().getParamLanguage());b.creatSupportUi(a)});X.loadCss("support/support.css");
X.loadJs("support/support-ui.js");X.loadI18n("support","support")},m=function(a){X.setCallback(function(){var b=com.kingdee.bos.qing.common.Util.decodeParamFromUrl(window.location.search,"path");b=b?b:"/ierp";com.kingdee.bos.qing.message.common.Integration.setRemoteUrl(b+"/qing/messageManage.do");y(b);var g=new com.kingdee.bos.qing.message.ui.Main;g.setFunOpenMessageDialog(function(){g.setViewSize(null,null,10,30)});g.setMessageWidth(80);g.getJqUi(25).appendTo(a)});X.loadSkinCss("message","message");
X.loadSkinJs("message","skin");X.loadJs("message/message-manage-ui.js");X.loadI18n("message","message")},y=function(a){var b=com.kingdee.bos.qing.message.common.Integration;b.setImportJSCodeForManager(function(){var d=com.kingdee.bos.qing.CodeLoader;d.setCallback(function(){var h=com.kingdee.bos.qing.theme.message.panel.common.Integration;h.setFunPublishRemoteImpl(function(){var n=new com.kingdee.bos.qing.theme.message.panel.common.RemoteImpl;n.setRemoteUrl(a+"/qing/publishTo.do");return n});h.setFunQingCenterAndMenuEntrance(function(n,
q,t,A){q=O.getUrlParamValue();var u=a+"/qing/publishEntrance.do";u=G.appendParamToUrl(u,"publishId",n);"extreport"==A?(u=G.appendParamToUrl(u,"appID","qing_rpt"),q&&(u=G.appendParamToUrl(u,"skin",q)),xa.openNewTabInAppId(t,u,u,xa.QING_RPT)):(q&&(u=G.appendParamToUrl(u,"skin",q)),xa.openNewTabInAppId(t,u,u,xa.QING_ANALYSIS))});h.setResourceRemoteUrl(a+"/qing/resource.do");h.setDataModelEntrance(function(n,q,t){var A=O.getUrlParamValue();q=va.get("dataModeling","\u6570\u636e\u51c6\u5907")+"-"+q;var u=
a+"/qing/dataModelingEntrance.do";u=G.appendParamToUrl(u,"themeID",n);u=G.appendParamToUrl(u,"isPreset",t);A&&(u=G.appendParamToUrl(u,"skin",A));xa.openNewTabInAppId(q,u,u,xa.QING_ANALYSIS)});h.setFunPublishContext(function(){var n=new com.kingdee.bos.qing.publish.common.PublishContext;n.setParamPathPrefix(a);n.setLappEntranceUrl(a+"/qing/lappEntrance.do");n.setSpaceID(la.getUrlParamValue("qingID"));return n});h.setFunPublishedEmailLoginViewUrl(function(){var n=O.getUrlParamValue(),q=la.getUrlParamValue("language"),
t=a+"/qing/publishedEmailEntrance.do?publishId=(publishId)&kdcdc=(accountId)";n&&(t=G.appendParamToUrl(t,"skin",n));q&&(t=G.appendParamToUrl(t,"language",q));return t});h.setFunPublishedEmailAnonymousViewUrl(function(){var n=O.getUrlParamValue(),q=la.getUrlParamValue("language"),t=a+"/index.html?userId=Guest&accountId=(accountId)&appNumber=qing&formId=qing_analysis_pub_email#/dform?appNumber=qing&formId=qing_analysis_pub_email&publishId=(publishId)";n&&(t=G.appendParamToUrl(t,"skin",n));q&&(t=G.appendParamToUrl(t,
"language",q));return t});h.setFunPublishContentEditEntrance(function(){return function(n,q,t){var A=com.kingdee.bos.qing.publish.model.PublishTargetType;if(t&&A.MOBILE==t){A=n.getPublishId();var u=n.getId()}else A=n.getId();var x=O.getUrlParamValue(),oa=la.getUrlParamValue("language");t=a+"/qing/publishContentEditEntrance.do";t=G.appendParamToUrl(t,"skin",x);t=G.appendParamToUrl(t,"language",oa);t=G.appendParamToUrl(t,"publishId",A);u&&(t=G.appendParamToUrl(t,"lappId",u));u=t;q&&(A="editPublishedContent-"+
A,x=com.kingdee.bos.qing.publish.common.PublishSubscribeHelper,x.putSubscribe(A,q),t=G.appendParamToUrl(t,"subscribeKey",A),t=G.appendParamToUrl(t,"currentPageClientId",x.getCurrentPageClientId()));q=com.kingdee.bos.qing.framework.common.TabbedUiUtil;q.openNewTabInAppId(va.get("editPublishedContent","\u7f16\u8f91\u53d1\u5e03\u65b9\u6848-")+n.getName(),t,u,q.QING_ANALYSIS)}});h.setFunTimedPushContentEditEntrance(function(){return function(n){var q=a+"/qing/timedPushContentEditEntrance.do",t=va.get("editTimedPushContent",
"\u7f16\u8f91\u63a8\u9001\u65b9\u6848");if(n instanceof com.kingdee.bos.qing.timedpush.model.EmailConfig){var A=n.getId(),u=n.getPublishSourceType();x=n.getSchemaSourceType();q=G.appendParamToUrl(q,"configId",A);q=G.appendParamToUrl(q,"publishSourceType",u);q=G.appendParamToUrl(q,"schemaType",x);q=G.appendParamToUrl(q,"pushTarget","email");t=t+"-"+n.getNameRule().getName();n.isSourceNameNotFound()&&(q=G.appendParamToUrl(q,"errorCode","2301001"))}else{A=n.getId();u=n.getPushTargetType();var x=n.getSchemaType();
q=G.appendParamToUrl(q,"configId",A);q=G.appendParamToUrl(q,"pushTargetType",u);q=G.appendParamToUrl(q,"schemaType",x);q=G.appendParamToUrl(q,"pushTarget","lapp");t=t+"-"+n.getName();n.getSourceName()||(q=G.appendParamToUrl(q,"errorCode","2301001"))}n=O.getUrlParamValue();x=la.getUrlParamValue("language");n&&(q=G.appendParamToUrl(q,"skin",n));x&&(q=G.appendParamToUrl(q,"language",x));n=com.kingdee.bos.qing.framework.common.TabbedUiUtil;n.openNewTabInAppId(t,q,q,n.QING_ANALYSIS)}});h=com.kingdee.bos.qing.modeler.message.panel.common.Integration;
h.setMessageRemoteUrl(a+"/qing_modeler/message.do");h.setFunOpenModelSetPage(function(n,q){var t=O.getUrlParamValue(),A=va.get("modelSet","\u6a21\u578b\u96c6-")+q,u=a+"/qing_modeler/modelSetMainPage.do";u=G.appendParamToUrl(u,"modelSetId",n);u=G.appendParamToUrl(u,"modelSetName",q);u=G.appendParamToUrl(u,"currentPageClientId",com.kingdee.bos.qing.framework.common.RemoteFramework.getClientID());t&&(u=G.appendParamToUrl(u,"skin",t));xa.openNewTabInAppId(A,u,u,xa.QING_MODELER)});h.setFunOpenModelDesign(function(n,
q,t,A,u){var x=com.kingdee.bos.qing.modeler.message.panel.common.ModelType,oa=O.getUrlParamValue();u=(u=x.getModelTypeText(u))?u+"-"+t:t;x=a+"/qing_modeler/deployDesignerEntrance.do";x=G.appendParamToUrl(x,"modelSetId",n);x=G.appendParamToUrl(x,"modelId",q);x=G.appendParamToUrl(x,"modelName",t);x=G.appendParamToUrl(x,"modelDeployId",A);oa&&(x=G.appendParamToUrl(x,"skin",oa));xa.openNewTabInAppId(u,x,x,xa.QING_MODELER)})});d.loadSkinCss("message","messagepanel");d.loadSkinJs("message","skin");d.loadJs("message/message-content-panel-management.js");
d.loadI18n("message","messagepanel");d.loadSkinCss("qingmodeler/message","message-modeler-panel");d.loadSkinJs("qingmodeler/message","skin");d.loadJs("qingmodeler/message/message-content-panel-management.js");d.loadI18n("qingmodeler/message","message-modeler-panel")});var g=G.decodeParamFromUrl(location.search,"appID");b.setAppId(g)},p=function(a){a=new com.kingdee.bos.qing.publish.permission.PermLabelManageDialog(L());a.setSpaceID(la.getUrlParamValue("qingID"));a.showDialog()},r=function(a,b,g,d,
h,n){var q=com.kingdee.bos.qing.publish.model.PublishSourceType,t=com.kingdee.bos.qing.publish.model.PublishTargetType;a!=q.EXTREPORT&&a!=q.DASHBOARD&&b!=t.GUIMENU?(a=new com.kingdee.bos.qing.publish.common.PublishFacade(L(),function(A){n&&n()},function(A,u){return 2301016==A?(ca().showPrompt(va.get("publishNoOperAuthExceptionCurtain","\u6ca1\u6709\u64cd\u4f5c\u6743\u9650\u3002"),2E3),!0):!1}),b=g.getBizTag(),q=g.getDsbPublishId(),g.getRefToId()&&(b=g.getRefToId()),a.judgePublishOper(b,q,d,h)):n&&
n()},T=function(){com.kingdee.bos.qing.timedpush.LappIntegration.syncDatacenterInfo(L())},K=function(){var a=c.getUrlParamUtil().getParamPathPrefix();com.kingdee.bos.qing.timedpush.LappIntegration.setLappPrivateUrl(a+"/qing/lappPrivateInfo.do")},ia=function(a,b,g,d,h,n){var q=c.getUrlParamUtil().getParamPathPrefix(),t=com.kingdee.bos.qing.publish.common,A=t.PublishContext;t=com.kingdee.bos.qing.schemamanage.model;var u=t.SchemaAttrModel;t=t.SchemaModel;var x=c.getUrlParamUtil().getUrlParam("bizTag"),
oa=v.protectedHaveToCarryData(),M;com.kingdee.bos.qing&&com.kingdee.bos.qing.prepare&&com.kingdee.bos.qing.prepare.DataSourceInfoContext&&(M=com.kingdee.bos.qing.prepare.DataSourceInfoContext.getCurrentDataSourceInfo());var za=M&&M.hasDirectModeTable();M=new A;M.setSource(h);M.setBizTag(x);M.setCurrentSourceType(b);M.setHaveToCarryData(oa);M.setHasDirectModeTable(za);M.setParamPathPrefix(q);M.setSchemaTag("Dashboard-Analysis"==n?c.getUrlParamUtil().getUrlParam("schemaTag"):null);M.setSpaceID(la.getUrlParamValue("qingID"));
b=new u;b.setSchemaType(u.SCHEMATYPE_SYSTEM);b.setIsDefault(!0);b.setSchemaName(H("sysPublishScheme","\u7cfb\u7edf\u9ed8\u8ba4\u65b9\u6848"));b.setSource(g);h=new t;h.setSchemaAttr(b);h.setSchemaContent(a.getJsonModelBook());a=h.toJsonObject();M.setCurrentContentModel(a);a=c.getUrlParamUtil().getParamTag();b=function(ua){ua+="/qinganalysis/lappPreviewEntrance.do";for(var Q=window.location.search.substring(1).split("&"),ta=0;ta<Q.length;ta++){var ya=Q[ta],e=ya.indexOf("=");if(-1!=e){var l=ya.substring(0,
e);"clientID"!=l&&"safetyCode"!=l&&(ya=ya.substring(e+1),ua+=0>ua.indexOf("?")?"?":"&",ua+=l,ua+="=",ua+=ya)}}return ua};g==u.SCHEMASOURCE_SQUARE?(M.setScene(A.Scene.Square),g=b(q),g=G.appendParamToUrl(g,"view","10"),M.setMobilePreviewUrl(g),q=G.appendParamToUrl(q+"/qing/lappEntrance.do","tag",a),q=G.appendParamToUrl(q,"view","10"),M.setLappEntranceUrl(q)):g==u.SCHEMASOURCE_LONGER&&(M.setScene(A.Scene.Longer),M.setMobilePreviewUrl(b(q)),q=G.appendParamToUrl(q+"/qing/lappEntrance.do","tag",a),M.setLappEntranceUrl(q));
d&&(M.setRefToId(c.getUrlParamUtil().getUrlParam("publishId")),M.setDsbPublishId(d),M.setDashBoardAnalysis(!0));return M},sa=function(a){var b=!1;if(a&&(a=a.tables)&&0<a.length)for(var g=0;g<a.length;g++)if(a[g].subViews){b=!0;break}return b},qa=function(a,b){ea?ea(function(g){var d=new com.kingdee.bos.qing.schemamanage.common.SchemaManageFacade(wa(),function(n){n.publishInfoPerCheck==N.PUBLISHINFO_PERMISSION_PUBLISHPLAN_EXIST?a&&a(b):n.publishInfoPerCheck==N.THEME_IS_DEL?Aa($(document.body),"msg-warning",
va.get("ThemeIsDel","\u8be5\u53d1\u5e03\u8bb0\u5f55\u7684\u6765\u6e90\u88ab\u5220\u9664")):n.publishInfoPerCheck==N.PUBLISHINFO_NOEXIST?Aa($(document.body),"msg-warning",va.get("publishInfoExist","\u53d1\u5e03\u8bb0\u5f55\u4e0d\u5b58\u5728\u6216\u5df2\u88ab\u5220\u9664")):n.publishInfoPerCheck==N.PERMISSION_CANCEL?Aa($(document.body),"msg-jurisdiction",va.get("notAuthority","\u60a8\u6ca1\u6709\u8be5\u53d1\u5e03\u8bb0\u5f55\u7684\u67e5\u770b\u6743\u9650, \u8bf7\u8054\u7cfb\u53d1\u5e03\u4eba")+'"'+
n.publishInfoUserName+'"'+va.get("authority","\u6388\u6743")):n.publishInfoPerCheck==N.PUBLSIHPLAN_DELETE&&Aa($(document.body),"msg-warning",va.get("publishPlanExist","\u8be5\u5206\u6790\u65b9\u6848\u4e0d\u5b58\u5728\u6216\u5df2\u88ab\u5220\u9664"))}),h=new com.kingdee.bos.qing.schemamanage.model.SchemaAttrModel;h.setFId(E.getCurrentSchemaId());h.setSchemaName(E.getCurrentSchemaName());d.checkPublishInfoAndAuthority(g,h)}):a&&a(b)},wa=function(){var a=c.getUrlParamUtil().getParamPathPrefix(),b=c.getUrlParamUtil().getParamTag();
a=(a?a:"/ierp")+"/qing/schemaManage.do";var g=new com.kingdee.bos.qing.RemoteImpl;g.setRemoteUrl(a);g.setTag(b);return g},Aa=function(a,b,g){a=new ka;a.setOptionType(ka.OPTION_OK);a.setButtonText(ka.RETURN_OK,va.get("ISee","\u6211\u77e5\u9053\u4e86"));var d={};d.text=g;d.iconName=b;a.setMessage(d);a.setCustomPainter(function(h,n){var q=$("<div>");q.addClass("sa-ctrl-msgdlg-icon");C.background(q,n.iconName);var t=$("<div>");t.addClass("sa-ctrl-msgdlg-content");t.text(n.text);h.append(q);h.append(t)});
a.showDialog(380,280)},Ea=function(a,b,g){k?b(k):(new com.kingdee.bos.qing.core.Facade(a,function(d){k=d;b(d)},g)).getMeta()},z=function(a){k=null;Ea(v.getRemoteImpl(),a)},L=function(){var a=c.getUrlParamUtil().getParamPathPrefix(),b=c.getUrlParamUtil().getParamTag();a=(a?a:"/ierp")+"/qing/publishTo.do";var g=new com.kingdee.bos.qing.RemoteImpl;g.setRemoteUrl(a);g.setTag(b);return g},ba=function(){var a=c.getUrlParamUtil().getParamPathPrefix(),b=O.getUrlParamValue(),g=c.getUrlParamUtil().getParamLanguage();
a=(a?a:"/ierp")+"/index.html?userId=Guest&accountId=(accountId)&appNumber=qing&formId=qing_analysis_pub_email#/dform?appNumber=qing&formId=qing_analysis_pub_email&publishId=(publishId)";b&&(a=G.appendParamToUrl(a,"skin",b));g&&(a=G.appendParamToUrl(a,"language",g));return a},aa=function(){var a=c.getUrlParamUtil().getParamPathPrefix(),b=O.getUrlParamValue(),g=c.getUrlParamUtil().getParamLanguage();a=(a?a:"/ierp")+"/qing/publishedEmailEntrance.do?publishId=(publishId)&kdcdc=(accountId)";b&&(a=G.appendParamToUrl(a,
"skin",b));g&&(a=G.appendParamToUrl(a,"language",g));return a},P=function(){return function(a,b,g){var d=com.kingdee.bos.qing.publish.model.PublishTargetType;if(g&&d.MOBILE==g){g=a.getPublishId();var h=a.getId();var n=a.getLappUserType()}else g=a.getId();d=c.getUrlParamUtil().getParamPathPrefix();var q=O.getUrlParamValue(),t=c.getUrlParamUtil().getParamLanguage();d=G.appendParamToUrl((d?d:"/ierp")+"/qing/publishContentEditEntrance.do","skin",q);d=G.appendParamToUrl(d,"language",t);d=G.appendParamToUrl(d,
"publishId",g);h&&(d=G.appendParamToUrl(d,"lappId",h));n&&(d=G.appendParamToUrl(d,"lappUserType",n));h=d;b&&(n="editPublishedContent-"+g,g=com.kingdee.bos.qing.publish.common.PublishSubscribeHelper,g.putSubscribe(n,b),d=G.appendParamToUrl(d,"subscribeKey",n),d=G.appendParamToUrl(d,"currentPageClientId",g.getCurrentPageClientId()));xa.openNewTab(va.get("editPublishedContent","\u7f16\u8f91\u53d1\u5e03\u65b9\u6848-")+a.getName(),d,h)}},pa=function(){return function(a){var b=c.getUrlParamUtil().getParamPathPrefix();
b=(b?b:"/ierp")+"/qing/timedPushContentEditEntrance.do";var g=va.get("editTimedPushContent","\u7f16\u8f91\u63a8\u9001\u65b9\u6848");if(a instanceof com.kingdee.bos.qing.timedpush.model.EmailConfig){var d=a.getId(),h=a.getPublishSourceType();n=a.getSchemaSourceType();b=G.appendParamToUrl(b,"configId",d);b=G.appendParamToUrl(b,"publishSourceType",h);b=G.appendParamToUrl(b,"schemaType",n);b=G.appendParamToUrl(b,"pushTarget","email");g=g+"-"+a.getNameRule().getName();a.isSourceNameNotFound()&&(b=G.appendParamToUrl(b,
"errorCode","2301001"))}else{d=a.getId();h=a.getPushTargetType();var n=a.getSchemaType();b=G.appendParamToUrl(b,"configId",d);b=G.appendParamToUrl(b,"pushTargetType",h);b=G.appendParamToUrl(b,"schemaType",n);b=G.appendParamToUrl(b,"pushTarget","lapp");g=g+"-"+a.getName();a.getSourceName()||(b=G.appendParamToUrl(b,"errorCode","2301001"))}a=O.getUrlParamValue();n=c.getUrlParamUtil().getParamLanguage();a&&(b=G.appendParamToUrl(b,"skin",a));n&&(b=G.appendParamToUrl(b,"language",n));xa.openNewTab(g,b)}},
H=function(a,b){return va.get(a,b)},ca=function(){S||(S=new com.kingdee.bos.qing.ui.component.MessageCurtain,S.getJqUi().appendTo($(document.body)));return S};c.getMLS=H;c.importLinkage=function(a){a.pushSkinJs("linkage","skin");a.pushJs("linkage/linkage.js");a.pushSkinCss("linkage","linkage")};c.importForSchema=function(a){a.pushSkinJs("schema-manage","skin-initialize");a.pushJs("schema-manage/schema-manage-initialize.js");a.pushI18n("schema-manage","schema-initialize");a.pushSkinCss("schema-manage",
"schema-manage");a.pushJs("schema-manage/schema-manage-ui.js");a.pushI18n("schema-manage","schema-ui")};c.importForPublish=function(a){a.pushJs("biz-common/qing-biz-common.js");a.pushSkinCss("biz-common","biz-common");a.pushSkinJs("biz-common","skin");a.pushI18n("biz-common","biz-common");a.pushSkinJs("imagelib","skin");a.pushSkinCss("imagelib","qing-imagelib");a.pushJs("imagelib/imagelib.js");a.pushI18n("imagelib","imagelib");a.pushJs("common/qing-schedule.js");a.pushI18n("common","qing-schedule");
a.pushSkinCss("publish","qing-publish");a.pushSkinJs("publish","skin");a.pushI18n("publish","publish");a.pushJs("publish/qing-publish.js");a.pushSkinCss("timedpush","qing-timedpush");a.pushSkinJs("timedpush","skin");a.pushI18n("timedpush","timedpush");a.pushJs("timedpush/qing-timedpush.js");a.pushJs("lightapp/common/qing-lapp-env.js");a.pushJs("timedpush/qing-timedpush-lapp.js");a.pushJs("timedpush/html2canvas.js")};c.importForMap=function(a){a.pushSkinJs("map-designer","integration-skin");a.pushJs("map-designer/map-integration.js");
a.pushSkinCss("map-designer","map-integration");a.pushI18n("map-designer","map-integration")};c.hookLongerPublishTo=function(a,b,g,d,h,n){com.kingdee.bos.qing.publish.common.UserOperationReporter.hookCollector(function(M,za,ua){com.kingdee.bos.qing.behavior.BehaviorManager.interestInBehavior(M,za,0,ua)});b=com.kingdee.bos.qing.publish.model;var q=b.PublishTargetType;b=com.kingdee.bos.qing.schemamanage.model;var t=b.SchemaAttrModel,A=function(M){var za=com.kingdee.bos.qing.publish.common.PublishFactory,
ua=M.getUserObject(),Q=M.getText().replace("...",""),ta=ia(a,g,t.SCHEMASOURCE_LONGER,d,h,n);r(g,ua,ta,"longer",fa.ANALYSIS_PUBLISH,function(){var ya=za.createPublishToDialog(Q,L(),ta,ua,P());ya.setOuterMessageCurtain(ca());ya.showDialog()})},u=com.kingdee.bos.qing.ui.component.MenuItemModel;b=new com.kingdee.bos.qing.ui.component.MenuModel;var x=new u(function(M){qa(A,M)});x.setUserObject(q.APPMENU);x.setText(H("toAppMenu","\u5e94\u7528\u83dc\u5355..."));b.addItemModel(x);x=new u(function(M){qa(A,
M)});x.setUserObject(q.CENTER);x.setText(H("toAnalysisCenter","\u6570\u636e\u5de5\u4f5c\u53f0\u9605\u89c8\u5939..."));b.addItemModel(x);x=new u(function(M){qa(A,M)});x.setUserObject(q.MOBILE);x.setText(H("toMobile","\u79fb\u52a8\u8f7b\u5e94\u7528..."));b.addItemModel(x);T();K();b.addSeperator();var oa=function(){var M=com.kingdee.bos.qing.publish.common.PublishManagerDialog,za=ia(a,g,com.kingdee.bos.qing.schemamanage.model.SchemaAttrModel.SCHEMASOURCE_LONGER);(new M(L(),za,P())).showDialog()};x=new u(function(M){qa(oa,
M)});x.setUserObject();x.setText(H("publishManager","\u53d1\u5e03\u7ba1\u7406")+"...");b.addItemModel(x);q=new u(p);q.setUserObject();q.setText(H("permLabelManage","\u6743\u9650\u6807\u7b7e\u7ba1\u7406")+"...");b.addItemModel(q);q=H("publishTo","\u53d1\u5e03\u5230");return a.getConductor().appendToolbarMenu(b,"publish_to",q)};c.hookSquarePublishTo=function(a,b,g){com.kingdee.bos.qing.publish.common.UserOperationReporter.hookCollector(function(A,u,x){com.kingdee.bos.qing.behavior.BehaviorManager.interestInBehavior(A,
u,0,x)});b=com.kingdee.bos.qing.publish.model;var d=b.PublishTargetType;b=com.kingdee.bos.qing.schemamanage.model;var h=b.SchemaAttrModel,n=function(A){var u=com.kingdee.bos.qing.publish.common.PublishFactory,x=A.getUserObject(),oa=A.getText().replace("...",""),M=ia(a,g,h.SCHEMASOURCE_SQUARE);r(g,x,M,"square",fa.CARD_PUBLISH,function(){var za=u.createPublishToDialog(oa,L(),M,x,P());za.setOuterMessageCurtain(ca());za.showDialog()})},q=com.kingdee.bos.qing.ui.component.MenuItemModel;b=new com.kingdee.bos.qing.ui.component.MenuModel;
var t=new q(n);t.setUserObject(d.CARD_REPOSITORY);t.setText(H("toCardRepository","\u5361\u7247\u5e93..."));b.addItemModel(t);n=new q(n);n.setText(H("toMobile","\u79fb\u52a8\u8f7b\u5e94\u7528..."));n.setUserObject(d.MOBILE);b.addItemModel(n);T();K();b.addSeperator();d=new q(function(){var A=com.kingdee.bos.qing.publish.common.PublishManagerDialog,u=ia(a,g,com.kingdee.bos.qing.schemamanage.model.SchemaAttrModel.SCHEMASOURCE_SQUARE);(new A(L(),u,P())).showDialog()});d.setUserObject();d.setText(H("publishManager",
"\u53d1\u5e03\u7ba1\u7406")+"...");b.addItemModel(d);d=new q(p);d.setUserObject();d.setText(H("permLabelManage","\u6743\u9650\u6807\u7b7e\u7ba1\u7406")+"...");b.addItemModel(d);d=H("publishTo","\u53d1\u5e03\u5230");return a.getConductor().appendToolbarMenu(b,"publish_to",d)};c.hookPublishManager=function(a,b,g){var d=H("publishManager","\u53d1\u5e03\u7ba1\u7406");return a.getConductor().appendToolbarButton(function(){var h=com.kingdee.bos.qing.publish.common.PublishManagerDialog,n=ia(a,b,g);(new h(L(),
n,P())).showDialog()},"publish_manager",d)};c.hookCloseTab=function(a){var b=H("closeTab","\u9000\u51fa");return a.getConductor().appendToolbarButton(function(){a.getConductor().isDirty()?ha.showConfirmExitDialog():xa.closeCurrentTab()},"error_close",b)};c.hookShareTo=function(a,b,g,d,h){com.kingdee.bos.qing.publish.common.UserOperationReporter.hookCollector(function(Q,ta,ya){com.kingdee.bos.qing.behavior.BehaviorManager.interestInBehavior(Q,ta,0,ya)});var n=function(Q){Q=H("yzjCommunicate","\u4e91\u4e4b\u5bb6\u6c9f\u901a...").replace("...",
"");var ta=ia(a,d,b);Q=com.kingdee.bos.qing.timedpush.PublishToYunzhijiaDialogFactory.createDialog(Q,L(),ta);Q.setOuterMessageCurtain(ca());Q.showDialog()},q=function(Q){Q=com.kingdee.bos.qing.CodeLoader.createSafety();Q.pushJs("yzj-web/qingjs.js");Q.pushJs("yzj-web/imcloud.js");Q.pushJs("yzj-web/imsdkerp.js");Q.pushJs("yzj-web/imShare.js");Q.pushSkinCss("yzj-web","imcloud");Q.pushSkinCss("yzj-web","imsdk");Q.pushSkinCss("yzj-web","imsdkerp");Q.load(function(){})};g=new Ca;(new Ba(function(Q){window.beLoadedImCloud?
n(Q):q(Q)})).setText(H("yzjCommunicate","\u4e91\u4e4b\u5bb6\u6c9f\u901a..."));var t=com.kingdee.bos.qing.schemamanage.model.SchemaAttrModel,A=v.protectedHaveToCarryData(),u;com.kingdee.bos.qing&&com.kingdee.bos.qing.prepare&&com.kingdee.bos.qing.prepare.DataSourceInfoContext&&(u=com.kingdee.bos.qing.prepare.DataSourceInfoContext.getCurrentDataSourceInfo());u=u&&u.hasDirectModeTable();var x=com.kingdee.bos.qing.publish.model.PublishTargetType;if(!u&&!A&&b==t.SCHEMASOURCE_LONGER){var oa=function(Q){var ta=
Q.getText().replace("...",""),ya=ia(a,d,b,h);r(d,x.EMAIL,ya,"longer",fa.ANALYSIS_TIMEPUSH,function(){var e=new com.kingdee.bos.qing.timedpush.EmailPublishConfigDialog(ta,L(),ya,ba(),aa(),pa(),a);e.setOuterMessageCurtain(ca());e.showDialog()})},M=new Ba(function(Q){qa(oa,Q)});M.setText(H("emailSchedulePush","\u90ae\u4ef6\u5b9a\u65f6\u63a8\u9001..."));g.addItemModel(M)}if(!u&&!A){var za=function(Q){var ta=ia(a,d,b,h),ya="longer",e=fa.ANALYSIS_TIMEPUSH;b==t.SCHEMASOURCE_SQUARE&&(ya="square",e=fa.CARD_TIMEPUSH);
r(d,x.EMAIL,ta,ya,e,function(){var l=new com.kingdee.bos.qing.timedpush.LappSchedulePush,w=Q.getText().replace("...","");l.createDialog(w,L(),ta,pa(),a)})};A=new Ba(function(Q){qa(za,Q)});A.setText(H("mobileSchedulePush","\u79fb\u52a8\u7aef\u5b9a\u65f6\u63a8\u9001")+"...");g.addItemModel(A)}g.addSeperator();var ua=function(){var Q=com.kingdee.bos.qing.publish.common.PushManager,ta=ia(a,d,b);Q=new Q(pa());var ya=com.kingdee.bos.qing.timedpush;Q.registerEmailPushPanelConstructor(ya.EmailConfigManagePanel);
Q.initEmailPushConfig(L(),ba(),aa());Q.registerLappPushPanelConstructor(ya.LappPushManagePanel);Q.initLappPushConfig(function(e,l,w){return com.kingdee.bos.qing.publish.common.PublishFactory.createPublishFacade(com.kingdee.bos.qing.publish.model.PublishTargetType.MOBILE,L(),e,l,w)},ta);Q.showDialog()};A=new Ba(function(Q){qa(ua,Q)});A.setUserObject();A.setText(H("pushManager","\u5b9a\u65f6\u63a8\u9001\u7ba1\u7406")+"...");g.addItemModel(A);g=a.getConductor().appendToolbarMenu(g,"btn_communicate",
H("timedPush","\u5b9a\u65f6\u63a8\u9001"));g.addActionListener(function(){window.beLoadedImCloud||(window.funCallback=n)});return g};c.initDesigntimeLinkage=function(){var a=c.getUrlParamUtil().getParamPathPrefix(),b=(a?a:"/ierp")+"/qing/linkage.do",g=com.kingdee.bos.qing.integration.LinkageJumper;a=new com.kingdee.bos.qing.linkage.LinkageManage;a.initDesigntime(b,g.jump);b=c.getUrlParamUtil().getParamTag();a.setCurrentLinkageTag(b)};c.loadMeta=Ea;c.reloadMeta=z;c.hookRefresh=function(a,b){var g=
c.getMLS("refresh","\u6570\u636e\u66f4\u65b0"),d=function(){b.restart();b.setExtractDataFinishedSuccessCallback(function(h){h||sa(k)?z(function(n){var q=a.getJsonModelBook();a.prepareMeta(n);a.setJsonModelBook(q)}):a.reExecute()})};return a.getConductor().appendToolbarButton(function(){qa(d)},"btn_reset",g)};c.getMessageCurtain=ca;c.hookSetCurrentTabStatus=function(a){a.getConductor().setDirtyListener(function(b){ha.setTabStatus(b)})};c.loadPublishOperList=function(a,b,g,d,h){D?g(D):(new com.kingdee.bos.qing.publish.common.PublishFacade(L(),
function(n){D=n;g(D)},h)).loadPublishOperList(a,b,d)};c.loadPublishOperModel=function(a,b,g,d){D?g(D):(new com.kingdee.bos.qing.publish.common.PublishFacade(L(),function(h){D=h.noOperValueMap;g(D)},d)).loadPublishOperModel(a,b)};c.registMapMapLibrary=function(a){com.kingdee.bos.qing.map.common.Integration.setRemoteUrl(a+"/qing/mapManage.do");var b=new com.kingdee.bos.qing.map.integration.MapSelectorDialog;com.kingdee.bos.qing.core.MapLibraryRegister.registerTemplateSelector(function(g,d){b.setParamPathPrefix(a);
b.showDialog(g,d)})}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.scene&&(com.kingdee.bos.qing.scene={});"undefined"==typeof com.kingdee.bos.qing.scene.common&&(com.kingdee.bos.qing.scene.common={});"undefined"==typeof com.kingdee.bos.qing.scene.common.designer&&(com.kingdee.bos.qing.scene.common.designer=
{});var Z=com.kingdee.bos.qing.scene.common.designer,O,da,X,ka,C,G,va,xa,Ca,Ba,ha,la;(function(){var v=com.kingdee.bos.qing;O=v.SkinUtil;da=v.AbstractDesignerScene;X=v.CodeLoader;la=v.Seer;v=com.kingdee.bos.qing.common;G=v.Util;v=com.kingdee.bos.qing.framework.common;va=v.MultilanguageManager.createPackageAccessor(com.kingdee.bos.qing.scene);xa=v.TabbedUiUtil;v=com.kingdee.bos.qing.ui.component;Ca=v.MenuModel;Ba=v.MenuItemModel;ka=v.MessageDialog;C=v.Icons;v=com.kingdee.bos.qing.integration;ha=v.TabStatusHelper})();
Z.AbstractDesignerSceneImpl=N;Z.LongerDesignerOperationJudgerModel=function(v){com.kingdee.bos.qing.core.LongerDesignerOperationJudger.call(this);v&&0!=v&&(this.protectedParseDesignable=function(){return 0==(v&fa.ANALYSIS_EDITABLE)},this.protectedParseDataDetailReadable=function(){return 0==(v&fa.ANALYSIS_DETAIL)},this.protectedParseExportable=function(){return 0==(v&fa.ANALYSIS_EXPORT)},this.protectedParsePrintable=function(){return 0==(v&fa.ANALYSIS_PRINT)},this.protectedParsePublishable=function(){return 0==
(v&fa.ANALYSIS_PUBLISH)},this.protectedParseTimingPushable=function(){return 0==(v&fa.ANALYSIS_TIMEPUSH)})};Z.SquareDesignerOperationJudgerModel=function(v){com.kingdee.bos.qing.core.SquareDesignerOperationJudger.call(this);v&&0!=v&&(this.protectedParsePublishable=function(){return 0==(v&fa.CARD_PUBLISH)},this.protectedParseTimingPushable=function(){return 0==(v&fa.CARD_TIMEPUSH)})};Z.LongerDesignerOperationJudger=function(){com.kingdee.bos.qing.core.LongerDesignerOperationJudger.call(this);var v=
this;this.protectedParseDesignable=function(){return v.isDesignable()};this.protectedParseDataDetailReadable=function(){return v.isDataDetailReadable()};this.protectedParseExportable=function(){return v.isExportable()};this.protectedParsePrintable=function(){return v.isPrintable()};this.protectedParsePublishable=function(){return v.isPublishable()};this.protectedParseTimingPushable=function(){return v.isTimingPushable()}};var fa={};Z.OperCodeType=fa;fa.ANALYSIS_EDITABLE=2;fa.ANALYSIS_EXPORT=4;fa.ANALYSIS_PRINT=
8;fa.ANALYSIS_PUBLISH=16;fa.ANALYSIS_TIMEPUSH=32;fa.ANALYSIS_DETAIL=64;fa.CARD_PUBLISH=256;fa.CARD_TIMEPUSH=512;fa.ENTRY_ANALYSIS=1;fa.ENTRY_SQUARE=128;N.THEME_IS_DEL="Theme is Delete";N.PUBLISHINFO_PERMISSION_PUBLISHPLAN_EXIST="success";N.PUBLISHINFO_NOEXIST="PublishInfo Not Exist";N.PERMISSION_CANCEL="Not Permission";N.PUBLSIHPLAN_DELETE="Publish Not Exist"})();(function(){function N(v){var c,k,S,ea,D,E,f,m,y,p,r,T=!0,K=!1,ia=!1,sa,qa,wa="icon_nodata",Aa="12px";this.setShowErrorDetailListener=function(a){sa=a};this.setIsQingreportDsbComponent=function(a){ia=a};this.setIsDsbComponent=function(a){K=a};this.show=function(a,b,g){c?L(a,b,g):Ea(a,b,g)};this.setShowDetail=function(a){T=a};this.getShowOperate=function(){return r};this.setBackgroundIcon=function(a){wa=a};this.setFontSize=function(a){Aa=a};var Ea=function(a,b,g){c=$("<div>");c.text("loading...");
c.appendTo(v);G.setCallback(function(){z();L(a,b,g)});G.loadSkinCss("scene","common-square-exhibition")},z=function(){c.empty();c.addClass("carderror-errorprompt");!K&&c.css("top","22px");k=$("<div>");k.css({position:"absolute",margin:"0px auto",width:"100%",height:"100%"});k.appendTo(c);var a=$("<iframe>");a.addClass("carderror-errorprompt-size-listener");a.appendTo(c);a[0].contentWindow&&a[0].contentWindow.addEventListener("resize",function(){ba()});S=$("<div>");S.addClass("carderror-errorprompt-img");
X.Icons.background(S,wa);S.appendTo(k);E=$("<div>");E.addClass("carderror-errorprompt-errorinfo");E.appendTo(k);ea=$("<span>");ea.addClass("carderror-errorprompt-text");ea.css("font-size",Aa);ea.appendTo(E);D=$("<span>");D.addClass("carderror-errorprompt-error-btn");D.text(C.get("showErrorLog","\u663e\u793a\u9519\u8bef\u65e5\u5fd7"));D.appendTo(E)},L=function(a,b,g){var d;if(2101001==a){r=d=!1;var h=C.get("themeIsDeleted","\u5bf9\u5e94\u4e3b\u9898\u4e0d\u5b58\u5728\u6216\u5df2\u88ab\u5220\u9664")}else if(2101002==
a||2101003==a||2101004==a||2101005==a)r=d=!1,h=C.get("themeHasNoData","\u5bf9\u5e94\u4e3b\u9898\u6ca1\u6709\u5b9a\u4e49\u6570\u636e");else if(2103001==a||2103002==a)r=d=!1,h=C.get("componentSourceHasNotFound","\u8be5\u7ec4\u4ef6\u6765\u6e90\u5df2\u88ab\u53d1\u5e03\u8005\u5220\u9664");else if(2101016==a)r=d=!1,h=C.get("subjectEntityMySQLMoreThan61Table","\u5f53\u524d\u5b9e\u4f53\u5173\u8054\u6570\u636e\u8868\u592a\u591a\uff0c\u8bf7\u51cf\u5c11\u5b9e\u4f53\u7684\u5206\u6790\u5b57\u6bb5\u6216\u5220\u9664\u4e0d\u9700\u8981\u7684\u5b9e\u4f53\u5206\u5f55\u3002");
else if(2101009==a)d=!0,r=!1,h=C.get("subjectDataSourceError","\u6570\u636e\u6e90\u53d1\u751f\u5f02\u5e38");else if(2101010==a)r=d=!1,h=C.get("qingStorageFileSizeLimit","\u8f7b\u5b58\u50a8\u7a7a\u95f4\u4e0d\u8db3");else if(2100001==a)r=d=!1,h=C.get("qingStorageNoSpace","\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\uff0c\u8bf7\u8054\u7cfb\u8fd0\u7ef4\u4eba\u5458\u6dfb\u52a0\u78c1\u76d8");else if(2101011==a)d=!0,r=!1,h=C.get("subjectDBDataSourceError","\u6570\u636e\u6e90\u5bf9\u5e94\u7684\u6570\u636e\u5e93\u8fde\u63a5\u5f02\u5e38");
else if(2101012==a)h=C.get("noDBCenterPermission","\u6ca1\u6709\u6570\u636e\u4e2d\u5fc3\u6743\u9650\uff0c\u8bf7\u5148\u8054\u7cfb\u7ba1\u7406\u5458\u5206\u914d\u6743\u9650");else if(2101023==a)h=C.get("noSuperQueryAuth","\u6ca1\u6709\u5f53\u524d\u8d85\u7ea7\u67e5\u8be2\u6a21\u5f0f\u7684\u6743\u9650\uff0c\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\u5206\u914d\u6743\u9650");else if(2101013==a||2101014==a)h=C.get("entityDestroyed","\u5bf9\u5e94\u4e3b\u9898\u7684\u6570\u636e\u8868\u88ab\u635f\u574f");else if(2101015==
a)h=C.get("noDBCenterOwnerPermission","\u53d1\u5e03\u4eba\u201c#1\u201d\u6ca1\u6709\u6570\u636e\u4e2d\u5fc3\u6743\u9650\uff0c\u8bf7\u8054\u7cfb\u53d1\u5e03\u4eba\u68c0\u67e5\u6743\u9650").replace("#1",b);else if(2101021==a)h=C.get("notExistTable","\u65e0\u6cd5\u5728\u6a21\u5f0f\u201c#1\u201d\u4e2d\u627e\u5230\u8be5\u5b9e\u4f53\u6570\u636e\u8868").replaceAll("#1",b);else if(2101022==a)h=C.get("noSuperQueryPerm","\u53d1\u5e03\u4eba\u201c#1\u201d\u6ca1\u6709\u8d85\u7ea7\u67e5\u8be2\u76f8\u5173\u6a21\u5f0f\u7684\u6743\u9650\uff0c\u8bf7\u8054\u7cfb\u53d1\u5e03\u4eba\u68c0\u67e5\u6743\u9650").replace("#1",
b);else if(2101024==a)h=C.get("ownerNotExistTable","\u6570\u636e\u6e90\u5f02\u5e38\uff0c\u8bf7\u8054\u7cfb\u53d1\u5e03\u4eba\u68c0\u67e5\u6570\u636e\u6e90");else if(2106002==a)h=C.get("chartExpired","\u56fe\u8868\u4fe1\u606f\u5df2\u8fc7\u671f");else if(2215011==a)h=C.get("noDmoPermission","\u6ca1\u6709\u6570\u636e\u5f00\u53d1\u5e73\u53f0\u6743\u9650\uff0c\u8bf7\u5148\u8054\u7cfb\u7ba1\u7406\u5458\u5206\u914d\u6743\u9650");else if(2215012==a)h=C.get("noDmoOwnerPermission","\u53d1\u5e03\u4eba\u201c#1\u201d\u6ca1\u6709\u6570\u636e\u5f00\u53d1\u5e73\u53f0\u6743\u9650\uff0c\u8bf7\u8054\u7cfb\u53d1\u5e03\u4eba\u68c0\u67e5\u6743\u9650").replace("#1",
b);else if(2215020==a)h=C.get("dmoPermission","\u6ca1\u6709\u6570\u636e\u5f00\u53d1\u5e73\u53f0#1\u6743\u9650\uff0c\u8bf7\u8054\u7cfb\u53d1\u5e03\u4eba\u68c0\u67e5\u6743\u9650").replace("#1",b);else if(2301001==a)r=d=!1,h=K||ia?C.get("componentSourceHasNotFound","\u8be5\u7ec4\u4ef6\u6765\u6e90\u5df2\u88ab\u53d1\u5e03\u8005\u5220\u9664"):C.get("cardHasNotFound","\u8be5\u5361\u7247\u5df2\u88ab\u53d1\u5e03\u8005\u5220\u9664");else if(2301005==a)r=d=!1,h=K?C.get("componentSourceNoAuthority","\u6ca1\u6709\u8be5\u7ec4\u4ef6\u6765\u6e90\u7684\u67e5\u770b\u6743\u9650"):
ia?C.get("extreportCardNoAuthority","\u6ca1\u6709\u8be5\u8f7b\u62a5\u8868\u7684\u67e5\u770b\u6743\u9650"):C.get("cardNoAuthority","\u6ca1\u6709\u8be5\u5361\u7247\u7684\u67e5\u770b\u6743\u9650");else if(2105E3==a)r=d=!1,h=C.get("cardHasNotFound","\u8be5\u5361\u7247\u5df2\u88ab\u5220\u9664");else if(2201003==a)r=d=!1,h=C.get("cardNoDefaultSchema","\u8be5\u5361\u7247\u6ca1\u6709\u5b9a\u4e49\u9ed8\u8ba4\u65b9\u6848");else if(909001==a)r=d=!1,h=C.get("unsupportedDsbRefSource","\u5f53\u524d\u7cfb\u7edf\u4e0d\u652f\u6301\u8be5\u7ec4\u4ef6\u6765\u6e90");
else if(3010002==a)r=d=!1,h=C.get("illegalLicense","\u5f53\u524d\u7cfb\u7edf\u6ca1\u6709\u3010\u8f7b\u5206\u6790\u3011\u6a21\u5757\u7684\u4f7f\u7528\u8bb8\u53ef\uff0c\u8bf7\u4e0e\u7cfb\u7edf\u7ba1\u7406\u5458\u8054\u7cfb\u3002");else if(3010003==a)r=d=!1,h=C.get("noQingModulePermission","\u60a8\u6240\u4f7f\u7528\u7684\u8d26\u6237\u6ca1\u6709\u88ab\u5206\u914d\u3010\u8f7b\u5206\u6790\u3011\u6a21\u5757\u7684\u4f7f\u7528\u8bb8\u53ef\uff0c\u8bf7\u4e0e\u7cfb\u7edf\u7ba1\u7406\u5458\u8054\u7cfb\u3002");
else if(3010004==a)r=d=!1,h=C.get("replicatedLogin","\u60a8\u7684\u8d26\u53f7\u5728\u5176\u4ed6\u5730\u65b9\u767b\u5f55\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55\u5f53\u524d\u7cfb\u7edf\u3002");else if(3010005==a)r=d=!1,h=C.get("illegalQingReportLicense","\u5f53\u524d\u7cfb\u7edf\u6ca1\u6709\u3010\u8f7b\u62a5\u8868\u3011\u6a21\u5757\u7684\u4f7f\u7528\u8bb8\u53ef\uff0c\u8bf7\u4e0e\u7cfb\u7edf\u7ba1\u7406\u5458\u8054\u7cfb\u3002");else if(3010006==a)r=d=!1,h=C.get("noQingReportModulePermission","\u60a8\u6240\u4f7f\u7528\u7684\u8d26\u6237\u6ca1\u6709\u88ab\u5206\u914d\u3010\u8f7b\u62a5\u8868\u3011\u6a21\u5757\u7684\u4f7f\u7528\u8bb8\u53ef\uff0c\u8bf7\u4e0e\u7cfb\u7edf\u7ba1\u7406\u5458\u8054\u7cfb\u3002");
else if(3099002==a)r=d=!1,h=C.get("qingRuntimeException","\u7a0b\u5e8f\u53d1\u751f\u9519\u8bef");else if(3001002==a)r=d=!0,h=C.get("qingRuntimeException","\u7a0b\u5e8f\u53d1\u751f\u9519\u8bef");else if(1030001==a)r=d=!1,h=b;else if("unsetCardSource"==a)r=d=!1,h=C.get("unsetCardSource","\u8bf7\u9009\u62e9\u5361\u7247\u6765\u6e90");else if(8099001==a)r=d=!1,h=C.get("extreportNotFound","\u8be5\u62a5\u8868\u4e0d\u5b58\u5728\u6216\u5df2\u88ab\u5220\u9664");else if(21000008==a)r=d=!1,h=C.get("noQingModelerLicense",
"\u5f53\u524d\u7cfb\u7edf\u6ca1\u6709\u3010\u8f7b\u5efa\u6a21\u3011\u6a21\u5757\u7684\u4f7f\u7528\u8bb8\u53ef\uff0c\u8bf7\u4e0e\u7cfb\u7edf\u7ba1\u7406\u5458\u8054\u7cfb");else if(2101006==a)r=!1,(h=b.match(/(\(|\uff08)([^(\)|\uff09)]+)(\)|\uff09)/))&&(b=h[2]),qa=$("<p>"),qa.addClass("carderror-errorprompt-support-qing-text"),qa.html(b.replace(/,/g,C.get("semicolon","\uff1b")+"<br>")),K?(d=!0,h=C.get("haveNotGetDataEntityAuthority","\u5c1a\u672a\u83b7\u5f97\u5b9e\u4f53\u6570\u636e\u8868\u7684\u67e5\u770b\u6743\u9650"),
D.text(C.get("viewDetails","\u67e5\u770b\u8be6\u60c5"))):(d=!1,h=C.get("noAuthorityForTheseEntities","\u5c1a\u672a\u83b7\u5f97\u4ee5\u4e0b\u5b9e\u4f53\u6570\u636e\u8868\u7684\u67e5\u770b\u6743\u9650\uff1a")),ea.text(h),!d&&ea.append(qa);else if(2101018==a){r=!1;d=Ba.getSupportQingAnalysisUrl();(h=/(?:\u3010\s)(.+)(?=\s\u3011)/.exec(b))&&(b=h[1]);var n=$("<a onclick='javascript:window.open(\""+d+"\");' href='#'>");n.css({cursor:"pointer",color:"#5582f3"});n.text(C.get("viewDocument","\u67e5\u770b\u5e2e\u52a9\u6587\u6863"));
qa=$("<p>");qa.addClass("carderror-errorprompt-support-qing-text");qa.html(b.replace(/,/g,C.get("semicolon","\uff1b")+"<br>"));K?(d=!0,h=C.get("entityNotSupportQingAnalysis","\u4e1a\u52a1\u5b9e\u4f53\u672a\u5f00\u542f\u201c\u652f\u6301\u8f7b\u5206\u6790\u201d\u8bbe\u7f6e\u9879\uff0c\u8bf7\u5728\u5f00\u53d1\u5e73\u53f0\u7684\u5bf9\u5e94\u8868\u5355\u4e2d\u8fdb\u884c\u8bbe\u7f6e  "),D.text(C.get("viewDetails","\u67e5\u770b\u8be6\u60c5"))):(d=!1,h=C.get("notSupportQingAnalysisTip","\u4ee5\u4e0b\u4e1a\u52a1\u5b9e\u4f53\u5c1a\u672a\u5f00\u542f\u201c\u652f\u6301\u8f7b\u5206\u6790\u201d\u8bbe\u7f6e\u9879\uff0c\u8bf7\u5728\u5f00\u53d1\u5e73\u53f0\u7684\u5bf9\u5e94\u8868\u5355\u4e2d\u8fdb\u884c\u8bbe\u7f6e  "),
c.css("overflow-y","auto"),E.css("max-height","unset"));ea.text(h);ea.append(n);!d&&ea.append(qa)}else 4040002==a||4040003==a||4040004==a?(r=d=!0,h=C.get("serverBusy","\u5f53\u524d\u670d\u52a1\u5668\u7e41\u5fd9\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5\u3002")):4100001==a?(r=d=!0,h=C.get("extractDataFail","\u51c6\u5907\u6570\u636e\u5931\u8d25")):(r=d=!0,h=a+"",h=0==h.indexOf("21")&&7==h.length?C.get("extractDataFail","\u51c6\u5907\u6570\u636e\u5931\u8d25"):0==h.indexOf("30")&&6==h.length?C.get("extractDataFail",
"\u51c6\u5907\u6570\u636e\u5931\u8d25"):0==h.indexOf("40")&&6==h.length?C.get("executeFail","\u56fe\u8868\u6267\u884c\u5931\u8d25"):C.get("unknownException","\u53d1\u751f\u4e86\u672a\u77e5\u9519\u8bef"));d&&T?(D.show(),D.on("click",function(q){aa(a,b,g)})):D.hide();2101018!=a&&2101006!=a&&ea.text(h);setTimeout(ba,500)},ba=function(){var a=c.height()-2;c.width();if(0!=a){var b=E.height()+10,g=a-b;70>g?(S.hide(),g=0):(S.show(),200<g&&(g=200),S.css("height",g+"px"));E.css("min-height","unset");k.css({"margin-top":-Math.floor((g+
b)/2)+"px",top:"50%",height:g+b+"px"});0>a-b&&(c.css("overflow-y","auto"),c.css("overflow-x","auto"))}},aa=function(a,b,g){if(2101006==a){var d=new H($(document.body));d.setSize(440,330);d.setTitle(C.get("permissionTitle","\u6743\u9650\u63d0\u793a"));d.showDialog(pa(C.get("noAuthorityForTheseEntities","\u5c1a\u672a\u83b7\u5f97\u4ee5\u4e0b\u5b9e\u4f53\u6570\u636e\u8868\u7684\u67e5\u770b\u6743\u9650\uff1a"),qa),!0)}else if(2101018==a)d=new H($(document.body)),d.setSize(440,330),d.setTitle(C.get("DetailInfo",
"\u8be6\u7ec6\u4fe1\u606f")),d.showDialog(pa(C.get("notSupportQingAnalysis","\u4ee5\u4e0b\u4e1a\u52a1\u5b9e\u4f53\u5c1a\u672a\u5f00\u542f\u201c\u652f\u6301\u8f7b\u5206\u6790\u201d\u8bbe\u7f6e\u9879\uff1a"),qa),!0);else if(sa)sa(a,b,g);else{if(!f){f=$("<div>");f.addClass("carderror-errorprompt-logdetail-container");d=$("<div>");d.addClass("carderror-errorprompt-logdetail-container-title");var h=$("<div>");h.addClass("carderror-errorprompt-logdetail-titiletag");var n=$("<div>");n.addClass("carderror-errorprompt-logdetail-title-lable");
n.text(C.get("errorLog","\u9519\u8bef\u65e5\u5fd7"));var q=$("<div>");q.addClass("carderror-errorprompt-logdetail-close");X.Icons.background(q,"icon_errorclose");q.on("click",ca);d.append(h);d.append(n);d.append(q);y=$("<div>");y.css("padding","10px");y.text(C.get("errorCode","\u9519\u8bef\u7801\uff1a")+a);p=$("<pre>");p.addClass("carderror-errorprompt-logdetail-content-container-text");p.text("\u9519\u8bef\u4fe1\u606f\uff1a"+b+(null!=g?"\r\n\u9519\u8bef\u6808\uff1a"+g:""));var t=$("<div>");t.addClass("carderror-errorprompt-logdetail-content-container");
var A=$("<span>");A.text(C.get("copy","\u590d\u5236"));A.addClass("carderror-errorprompt-logdetail-content-copybutton");A.click(function(){var u=P("\u9519\u8bef\u7801\uff1a"+a+"\r\n\u9519\u8bef\u4fe1\u606f\uff1a"+b+"\r\n\u9519\u8bef\u6808\uff1a"+g),x=$("<span>");x.addClass("carderror-errorprompt-logdetail-content-copybutton-end");t.append(x);u?x.text(C.get("copy success!","\u590d\u5236\u6210\u529f\uff01")):x.text(C.get("copy error!","\u590d\u5236\u5931\u8d25\uff01"));setTimeout(function(){x.remove()},
1500)});t.mouseover(function(){A.css("visibility","visible")});t.mouseout(function(){A.css("visibility","hidden")});t.append(y);t.append(p);t.append(A);f.append(d);f.append(t);m=$("<div class='sa-ctrl-common-modallayer'>");f.appendTo(m)}d=$(document.body);m.appendTo(d)}},P=function(a){var b=document.createElement("textarea");document.body.appendChild(b);b.value=a;b.select();a=document.execCommand("copy");document.body.removeChild(b);return a},pa=function(a,b){var g=$("<div>");g.addClass("carderror-errorprompt-logdetail-content");
var d=$("<p>");d.addClass("carderror-errorprompt-logdetail-contenxt-texttitle");d.text(a);a=$("<p>");a.addClass("carderror-errorprompt-logdetail-contenxt-text");a.html(b);g.append(d);g.append(a);return g},H=function(a){var b=$("<div class='sa-ctrl-common-modallayer'>"),g=new ha(b),d=0,h=0,n=320,q=240,t=a?a:$(document.body),A,u;this.setTitle=function(x){u=x};this.setClosingListener=function(x){A=x};this.setSize=function(x,oa){n=x;q=oa};this.showDialog=function(x,oa){b.appendTo(t);if(!d){var M=t.prop("clientWidth"),
za=t.prop("clientHeight");d=M-n>>1;h=(za-q)/3}g.setBounds(d,h,n,q);g.setToolbarVisible(!1);g.setContent(x,oa);g.setTitle(u);g.addClosingListener(function(ua,Q){if(Q)A(Q);else return ua.destroy(),b.remove(),!0});g.addClosedListener(function(ua){ua.destroy();b.remove()});g.showFooterPane(this.createFooter);g.show()};this.setContent=function(x,oa){g.setContent(x,oa)};this.destroy=function(){g.destroy();b.remove()};this.createFooter=function(x){var oa=new la(C.get("iknow","\u6211\u77e5\u9053\u4e86"));
oa.setHighlight(!0);var M=oa.getJqUi();fa.layoutCtrlWithLRTB(M,"50%",0,100,null,13,28);M.addClass("dialog-footer-close");M.css("margin-left","-50px");M.appendTo(x);oa.addActionListener(function(za){g.destroy();b.remove()})}},ca=function(){m&&m.detach()}}function Z(){var v,c,k;this.setIsSquare=function(S){v=S};this.getIsSquare=function(){return v};this.setLoadSchema=function(S){c=S};this.getLoadSchema=function(){return c};this.setSaveSchema=function(S){k=S};this.getSaveSchema=function(){return k}}
function O(){va.call(this);this.protectedShowErrorImpl=function(v,c,k,S){v=new N(v);v.setIsDsbComponent(!0);v.show(c,k,S);return!0}}function da(){xa.call(this);this.protectedShowErrorImpl=function(v,c,k,S){v=new N(v);v.setIsDsbComponent(!0);v.show(c,k,S);return!0}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.scene&&
(com.kingdee.bos.qing.scene={});"undefined"==typeof com.kingdee.bos.qing.scene.common&&(com.kingdee.bos.qing.scene.common={});"undefined"==typeof com.kingdee.bos.qing.scene.common.square&&(com.kingdee.bos.qing.scene.common.square={});"undefined"==typeof com.kingdee.bos.qing.scene.common.square.exhibition&&(com.kingdee.bos.qing.scene.common.square.exhibition={});var X=com.kingdee.bos.qing.scene.common.square.exhibition,ka,C,G,va,xa,Ca,Ba,ha,la,fa;(function(){var v=com.kingdee.bos.qing.framework.common;
ka=v.AbstractIcons;C=v.MultilanguageManager.createPackageAccessor(com.kingdee.bos.qing.scene);Ba=Ba=v.OfficialArticleUtil;v=com.kingdee.bos.qing;G=v.CodeLoader;va=v.DashboardSquareScene;xa=v.DashboardLongerScene;v=com.kingdee.bos.qing.ui.component;Ca=v.MessageDialog;ha=v.Dialog;la=v.Button;v=com.kingdee.bos.qing.common;fa=v.DomUtil})();X.Icons=new function(){ka.call(this);var v=this.protectedMethod,c;this.setComboIconImpl=function(k){c=k};this.protectedInit=function(k,S){if(!c)throw Error("Please setComboIconImpl() first.");
c.define(S,"scene-error-image-sprite");S.setStartPosition(1,1);S.setGap(1);S.setIconSize(20,20);v.registIcon(0,0,"icon_qhfInfo");v.registIcon(0,1,"icon_errorclose");c.define(S,"errorbackground");S.setStartPosition(0,0);S.setGap(0);S.setIconSize(200,200);v.registIcon(0,0,"icon_errorbackground");c.define(S,"nodata");v.registIcon(0,1,"icon_nodata")}};X.CardErrorUi=N;X.DsbIntegrationScene=function(){var v,c,k,S,ea;this.setResetSquare=function(m){S=m};this.setFacade=function(m){k=m};this.setParamPathPrefix=
function(m){};this.setMessageCurtain=function(m){c=m};this.setCoreRemoteUrl=function(m){v=m};this.setDesignerSceneCreator=function(m){ea=m};this.createSquareDesignerScene=function(m){var y=new O;y.setRemoteUrl(v);m(y)};this.createLongerDesignerScene=function(m){var y=new da;y.setRemoteUrl(v);m(y)};this.loadImage=function(m,y,p){var r=m.refToId;r&&0!=$.trim(r).length?(m=k(function(T){var K=T.imageHeight;T=T.imageWidth;if(K||T){var ia=com.kingdee.bos.qing.framework.common.RemoteFramework.getLoadImgUrl(r,
"image-library");y(ia,T,K)}else p&&p("")},function(T,K){return!1}),m.setShowBlocking(!1),m.getImageSize(r)):(m=m.widgetSourcePath,p&&p(m))};this.createSquareDesigner=function(m,y,p,r,T,K,ia){var sa=new Z;sa.setIsSquare(!0);sa.setLoadSchema(function(qa,wa){k(qa,wa).squareLoadSchema(p)});sa.setSaveSchema(function(qa,wa,Aa){k(wa,Aa).squareSaveSchema(p,qa)});D(sa,m,y,p,r,T,K,ia,!0)};this.createLongerDesigner=function(m,y,p,r,T,K,ia,sa){var qa=new Z;qa.setIsSquare(!1);qa.setLoadSchema(function(wa,Aa){k(wa,
Aa).longerLoadSchema(p,sa)});qa.setSaveSchema(function(wa,Aa,Ea){k(Aa,Ea).longerSaveSchema(p,wa)});D(qa,m,y,p,r,T,K,ia,!1)};var D=function(m,y,p,r,T,K,ia,sa,qa){var wa=ea(),Aa=function(Ea){wa.hide();sa(Ea)};wa.setIsSquare(m.getIsSquare());wa.setRemoteUrl(v);wa.setRemoteTag(T);wa.setDesignerOperationJudger(K);wa.setSquareOrLonger(qa);wa.setClosable(p);wa.setAdditionalFilterApi(ia);wa.setSchemaLoader(function(Ea,z){E(m,r,Ea,z,Aa)});wa.setSchemaSaver(function(Ea){f(m,r,Ea,Aa)});null!=S&&wa.setSchemaReseter(function(Ea){S(r,
Ea,Aa)});wa.show(y,function(){Aa(null)})},E=function(m,y,p,r,T){y.uid?m.getLoadSchema()(function(K){K.model?(p.setJsonModelBook(K.model),r(!0)):r(!1)},function(K,ia){T();K=K.toString();return"9"==K.substr(0,1)&&6==K.length?(c&&c.showError(C.get("failToLoadSchema","\u52a0\u8f7d\u65b9\u6848\u5931\u8d25\u3002")),!0):!1}):r(!1)},f=function(m,y,p,r){var T=p.getJsonModelBook();m.getSaveSchema()(T,function(K){r(T)},function(K,ia){if(909002==K)return K=Ca.createFeedbackDialog(),K.setMessage(C.get("noSelectMapTemplate",
"\u8bf7\u9009\u62e9\u5730\u56fe\u6a21\u677f")),K.setMsgImageType(Ca.MSG_WARNING),K.setOptionType(Ca.OPTION_OK),K.setButtonText(Ca.OPTION_OK,C.get("iknow","\u6211\u77e5\u9053\u4e86")),K.showDialog(),!0;r();K=K.toString();return"9"==K.substr(0,1)&&6==K.length?(c&&c.showError(C.get("failToTemporarySchema","\u6682\u5b58\u65b9\u6848\u5931\u8d25\u3002")),!0):!1})}}})();(function(){function N(){la.call(this);var z,L,ba,aa,P,pa;this.setIsSquare=function(H){ba=H};this.protectedIsSquare=function(){return ba};this.protectedInitDesigner=function(H){H.getConductor().insertToolbarButton(function(ca){L(H)},null,k.get("finish","\u5b8c\u6210"));H.getConductor().insertToolbarSeperator();H.setDesignerOperationJudger(P?null:aa,P?aa:null);H.setAdditionalFilterApi(pa)};this.protectedLoading=function(H,ca){z(H,ca)};this.setSchemaLoader=function(H){z=H};this.setSchemaSaver=function(H){L=
H};this.setDesignerOperationJudger=function(H){aa=H};this.setSquareOrLonger=function(H){P=H};this.protectedIsSquare=function(){return P};this.setAdditionalFilterApi=function(H){pa=H}}function Z(){com.kingdee.bos.qing.dashboard.AbstractImportUi.call(this);this.protectedInitUi=function(){var z=new E;z.setText(k.get("fromCardLibrary","\u4ece\u5361\u7247\u5e93\u590d\u5236\u65b9\u6848"));return z};this.doNext=function(z,L,ba){L=z.getDsbRemoteImpl();var aa=new O;aa.setStepContentInfo(z);aa.setDsbRemoteImpl(L);
ba([aa])}}function O(){com.kingdee.bos.qing.dashboard.AbstractImportStep.call(this);var z=this.protectedMethod,L,ba,aa,P,pa,H,ca;this.setDsbRemoteImpl=function(a){P=a};this.setStepContentInfo=function(a){pa=a};this.over=function(a){a&&(a=pa.getAllStepOverCallback())&&a(aa,ba,!1,H,ca)};this.isLastStep=function(){return!0};this.getSubTitle=function(){return k.get("selectCard","\u9009\u62e9\u8981\u590d\u5236\u7684\u5361\u7247")};this.getSuggestedDialogSize=function(){return[810,580]};this.protectedCreateUi=
function(){var a=c.decodeParamFromUrl(location.search,"path"),b=(a?a:"/ierp")+"/qing/publishTo.do",g=new com.kingdee.bos.qing.RemoteImpl;g.setRemoteUrl(b);L=new com.kingdee.bos.qing.publish.CardSelector(g);L.setOuterMessageCurtain(z.getMessageCurtain());L.setParamPathPrefix(a);L.setSingleSelected(!0);return L.getJqUi()};this.intoThisStep=function(a,b){};this.outThisStep=function(a,b){if(a)b();else if(a=L.getSelectedPublishModels(),0<a.length){var g=a[0];a=g.getSchemeId();ba=g.getName();g=g.getId();
(new com.kingdee.bos.qing.dashboard.DsbFacade(P,function(d){d.noModeling?z.getMessageCurtain().showPrompt(k.get("noModeling","\u8be5\u5361\u7247\u5bf9\u5e94\u7684\u4e3b\u9898\u6ca1\u6709\u8fdb\u884c\u6570\u636e\u51c6\u5907\uff0c\u5361\u7247\u65e0\u6cd5\u4f7f\u7528\u3002")):d.noTheme?z.getMessageCurtain().showPrompt(k.get("noTheme","\u8be5\u5361\u7247\u5bf9\u5e94\u7684\u4e3b\u9898\u5df2\u88ab\u5220\u9664\uff0c\u5361\u7247\u65e0\u6cd5\u4f7f\u7528\u3002")):(aa=d.ref,H=d.model,ca=d.operation,b())},function(d,
h){return"900001"==d?(b(),z.getMessageCurtain().showError(k.get("failToloadCardContent","\u52a0\u8f7d\u5361\u7247\u65b9\u6848\u5931\u8d25\u3002")),!0):!1})).getCardReferenceMap(g,a)}else a=k.get("chooseImportCard","\u8bf7\u9009\u62e9\u8981\u5f15\u5165\u7684\u5361\u7247\u3002"),z.getMessageCurtain().showPrompt(a,2E3)}}function da(){com.kingdee.bos.qing.dashboard.AbstractImportUi.call(this);var z=da.LONGER_TYPE,L=com.kingdee.bos.qing.publish.env.PublishAppMenuFolderNode;this.protectedInitUi=function(){var aa=
new E;z===da.EXTREPORT_TYPE?aa.setText(k.get("fromAppMenuRef","\u4ece\u5e94\u7528\u83dc\u5355\u5f15\u7528")):aa.setText(k.get("fromAppMenu","\u4ece\u5e94\u7528\u83dc\u5355\u590d\u5236\u65b9\u6848"));return aa};this.doNext=function(aa,P,pa){var H=aa.getDsbRemoteImpl();H=new com.kingdee.bos.qing.dashboard.CommonDsbDesignerFacade(H,function(ca){var a=ca.appmenu;ca=ca.publish;var b=!1,g=!0,d=new L;d.fromJsonObject(a);d=d.getChildren();a=[];for(var h=0;h<d.length;h++)ba(a,d[h]);for(h=0;h<ca.length;h++)ca[h].publishAppMenuBO.isPreset?
b=!0:g=!1;if(0==a.length)P.showPrompt(k.get("noPublish","\u6682\u65e0\u53d1\u5e03\u3002"));else{switch(z){case da.LONGER_TYPE:d=new ka;break;case da.EXTREPORT_TYPE:d=new xa;break;default:throw Error("do not support this type!");}d.setAppmenu(a);d.setAppmenuPublish(ca);d.setStepContentInfo(aa);d.showPresetFilter(b,g);pa([d]);d.refreshTable()}},function(ca,a){ca=a.toString();return"9"==ca.substr(0,1)&&6==ca.length?(P.showError(k.get("failToGetAppMenu","\u83b7\u53d6\u5e94\u7528\u83dc\u5355\u5931\u8d25\u3002")),
!0):!1});z==da.LONGER_TYPE&&H.loadAppMenuTree();z==da.EXTREPORT_TYPE&&H.loadAppMenuTreeForExtreport()};var ba=function(aa,P){aa.push(P);if(P instanceof L&&(P=P.getChildren()))for(var pa=0;pa<P.length;pa++)ba(aa,P[pa])};this.protectedMethod={setImportType:function(aa){z=aa}}}function X(){function z(B){KTDefaultCellRender.call(this,B);var U=this,V=this.paintCellUI;this.paintCellUI=function(ja,W){var Y=U.getCurrentRow(),ra=U.getCurrentColIdx();if(U.getCurrentRowIdx()<r.getHeadRowCount()||1==ra||2==ra)V(ja,
W);else if(0==ra){W=Y.getUserObject();Y=new E;ya.addElement(Y);ca&&ca.getPublishAppMenuBO().formParams.publishId==W.getPublishAppMenuBO().formParams.publishId&&Y.setChecked(!0);Y.setUserObject(W);ra=Y.getJqUi();Y=$("<div class='appmenu-publish-item-btn-name'>");if(Q){var na=W.getPublishAppMenuBO().qingMenuName;if(Q&&na){var Da=Q.toUpperCase(),Fa=na.toUpperCase(),Ga=Fa.split(Da),Ia=Da.length;for(Ja in Ga){var Ha=Fa.indexOf(Ga[Ja]),Ma=na.substr(La,Ga[Ja].length);Ha+=Ga[Ja].length;var Ka=Fa.length-Ha;
Fa=Fa.substr(Ha,Ka);na=na.substr(Ha,Ka);Ha=$("<span>");Ha.text(Ma);Ha.appendTo(Y);if(Ja!=Ga.length-1&&1<Ga.length){var La=Fa.indexOf(Da);Ma=na.substr(La,Ia);Ha=La+Ia;Ka=Fa.length-Ha;Fa=Fa.substr(Ha,Ka);na=na.substr(Ha,Ka);Ha=$("<span>");Ha.text(Ma);Ha.css("color","red");Ha.clone().appendTo(Y)}}}else Y.text(na)}else Y.text(W.getPublishAppMenuBO().qingMenuName);ra.addClass("appmenu-publish-item-btn");ra.appendTo(ja);if(W.getPublishAppMenuBO().isPreset){var Ja=$("<div>");Ja.text(k.get("preset","\u9884\u7f6e"));
Ja.addClass("appmenu-publish-item-btn-preset-tag");Ja.appendTo(ja)}Y.appendTo(ja)}}}com.kingdee.bos.qing.dashboard.AbstractImportStep.call(this);var L=this,ba=this.protectedMethod,aa,P,pa,H,ca,a,b,g,d,h,n,q=com.kingdee.bos.qing.publish.common.FilterModelType,t=com.kingdee.bos.qing.publish.common.CardFilterType,A,u,x=!1,oa=[new t(k.get("myLonger","\u6211\u7684\u5206\u6790"),!1),new t(k.get("presetLonger","\u9884\u7f6e\u5206\u6790"),!0)],M=[void 0,void 0],za=!1,ua,Q="",ta,ya=new m;ya.addChangedListener(function(B,
U){ca=B.getUserObject()?B.getUserObject():ca});var e=new p;e.setFormatString("yyyy-MM-dd HH:mm:ss");this.isLastStep=function(){return!1};this.setStepContentInfo=function(B){aa=B};this.setAppmenu=function(B){P=B};this.setAppmenuPublish=function(B){pa=B};this.showPresetFilter=function(B,U){u=B;(x=U)&&oa.reverse()};this.refreshTable=function(){h&&r.refresh(h)};this.getSubTitle=function(){return k.get("selectAppmenu","\u9009\u62e9\u5df2\u53d1\u5e03\u9879")};this.protectedCreateUi=function(){var B=$("<div>"),
U=$("<div>"),V=w,ja=new q;ja.setSearchType(oa);ja.setSelectedChangedListener(V);A=ja.getJqUi();A.css({top:"-4px",left:"6px"});A.appendTo(U);!u&&A.hide();ua?V=ua.getJqUi():(ua=new T,ua.addSearchListener(I),ua.setSearchListenerDelay(100),ua.setPlaceholder(k.get("searchBoxPlaceholder","\u641c\u7d22\u53d1\u5e03\u540d\u79f0")),ua.setShowSearchIcon(!0),V=ua.getJqUi(),V.addClass("import-longer-from-appmenu-search-box"),V.css({position:"relative",width:"175px",height:"23px"}));V.appendTo(U);U.appendTo(B);
U=$("<div>");U.addClass("import-longer-from-appmenu");for(V=0;V<P.length;V++){ja=P[V];var W=ja;var Y=[];for(var ra=W.getAppId(),na=W.getAppMenuId(),Da=W.getAppMenuId2(),Fa=ra?na?Da?Da:na:ra:null,Ga=0;Ga<pa.length;Ga++)W=new G,W.fromJsonObject(pa[Ga]),ra=W.getPublishAppMenuBO().appId,na=W.getPublishAppMenuBO().appMenuId,Da=W.getPublishAppMenuBO().appMenuId2,Fa===(ra?na?Da?Da:na:ra:null)&&Y.push(W);Y&&0<Y.length&&ja.setPublishModels(Y)}H=new C;ta=a=F();H.setCurrentNode(ta);H.setTreeItemSelectedListener(R);
l();H.getJqUi(P).appendTo(U);d=$("<div>");d.addClass("appmenu-publish-table");h=r.createTable();r.bindTableListenerForCtrl(h);V=new z(h);V.setOutsideVisible(!1);h.setCellRender(V);h.addColumns(3);h.getColumn(0).setWidth(220);h.getColumn(1).setWidth(90);h.getColumn(2).setWidth(150);V=r.createHeadRow(h);V.getCell(0).setValue(k.get("publishName","\u53d1\u5e03\u540d\u79f0"));V.getCell(1).setValue(k.get("publishPerson","\u53d1\u5e03\u4eba"));V.getCell(2).setValue(k.get("publishTime","\u53d1\u5e03\u65f6\u95f4"));
V=a.getPublishModels();ja=!1;for(Y=0;Y<V.length;Y++)na=V[Y],x==na.getPublishAppMenuBO().isPreset&&(ja||(ca=na,ja=!0),ra=r.createRow(h),ra.setUserObject(na),ra.getCell(0).setValue(na.getPublishAppMenuBO().name),ra.getCell(1).setValue(na.getPublishPersonName()),na=Number(na.getPublishAppMenuBO().formParams.publishTime),ra.getCell(2).setValue(e.format(na)));r.refresh(h);b=$(h.getUI());b.appendTo(d);d.appendTo(U);U.appendTo(B);return B};var l=function(){for(var B=0;B<P.length;B++)P[B].setIsShow(!1);for(B=
0;B<P.length;B++){var U;if(U=P[B].getPublishModels())a:{U=P[B].getPublishModels();for(var V=0;V<U.length;V++)if(U[V].getPublishAppMenuBO().isPreset==x){U=!0;break a}U=!1}if(U)for(U=P[B],U.setIsShow(!0);U.getParentNode()&&U.getParentNode().getDisplayName();)U=U.getParentNode(),U.getIsShow()||U.setIsShow(!0)}},w=function(B,U,V){x=V.getTypeId();l();x?(M[1]=H.getCurrentNode(),M[0]||(B=F(),M[0]=B),R(M[0]),H.setCurrentNode(M[0])):(M[0]=H.getCurrentNode(),M[1]||(B=F(),M[1]=B),R(M[1]),H.setCurrentNode(M[1]));
I()},F=function(){for(var B=0;B<P.length;B++){for(var U=P[B],V=U.getPublishModels(),ja=[],W=0;V&&W<V.length;W++)V[W].getPublishAppMenuBO().isPreset==x&&ja.push(V[W]);if(V&&0<ja.length)return U}},I=function(){Q=ua.getText().trim();if(0<Q.length){za=!0;for(var B={},U=0;U<P.length;U++){var V=0,ja=P[U],W=ja.getPublishModels();if(W&&0<W.length)for(var Y=0;Y<W.length;Y++){var ra=W[Y],na=-1<ra.getPublishAppMenuBO().qingMenuName.toUpperCase().indexOf(Q.toUpperCase());x==ra.getPublishAppMenuBO().isPreset&&
na&&V++}Y=ja;ja=Y.getAppId();W=Y.getAppMenuId();Y=Y.getAppMenuId2();B[ja?W?Y?ja+W+Y:ja+W:ja:null]=V}ma(ta.getPublishModels(),!1);H.setSearchStatus(!0);H.updateTreeUi(P,B)}else za=!1,ma(ta.getPublishModels(),!1),H.setSearchStatus(!1),H.updateTreeUi(P)},R=function(B){ta=B;(B=B.getPublishModels())&&0<B.length?ma(B,!0):J()},J=function(){b&&b.hide();if(g)g.show();else{g=$("<div>");g.css({position:"absolute",height:"82%",width:"100%",top:"33px"});n=$("<div>");n.text(k.get("noSearchData","\u6ca1\u6709\u7b26\u5408\u641c\u7d22\u6761\u4ef6\u7684\u7ed3\u679c"));
y.layoutCtrlCenterAlign(n,444);n.css({height:"20px","line-height":"20px","text-align":"center","font-size":"16px",color:"#BBBBBB",top:"50%","margin-top":"98.5px"});n.appendTo(g);var B=$("<div>");Ca.Icons.background(B,"no-data");y.layoutCtrlCenterAlign(B,187);B.css({"background-size":"contain",top:"50%",height:"187px","margin-top":"-113.5px"});B.appendTo(g);d.append(g)}B=Q?k.get("noSearchData","\u6ca1\u6709\u7b26\u5408\u641c\u7d22\u6761\u4ef6\u7684\u7ed3\u679c"):k.get("noData","\u6682\u65e0\u53d1\u5e03\u8bb0\u5f55");
n.text(B)},ma=function(B,U){b&&b.show();g&&g.hide();r.clearWithoutHead(h);for(var V=0,ja,W=0;B&&W<B.length;W++){var Y=B[W];if(x==Y.getPublishAppMenuBO().isPreset){U&&!ja&&(ca=Y,ja=!0);var ra=-1<Y.getPublishAppMenuBO().qingMenuName.toUpperCase().indexOf(Q.toUpperCase());if(!za||ra)ra=r.createRow(h),ra.setUserObject(Y),ra.getCell(0).setValue(Y.getPublishAppMenuBO().qingMenuName),ra.getCell(1).setValue(Y.getPublishPersonName()),Y=Number(Y.getPublishAppMenuBO().formParams.publishTime),ra.getCell(2).setValue(e.format(Y)),
V++}}0===V&&J();L.refreshTable()};this.intoThisStep=function(B,U){};this.outThisStep=function(B,U){B?U():null==ca?ba.getMessageCurtain().showPrompt(k.get("notSelectAppMenuPublish","\u672a\u9009\u4e2d\u53d1\u5e03\u4fe1\u606f\u3002")):(B=ca.getPublishAppMenuBO(),L.protectedDoNext(B,aa,U))};this.protectedDoNext=function(B,U,V){throw Error("overwrite me!");};this.protectedMethod.getStepContentInfo=function(){return aa}}function ka(){X.call(this);var z=this.protectedMethod;this.protectedDoNext=function(L,
ba,aa){var P=L.formParams.publishId;L=ba.getDsbRemoteImpl();(new com.kingdee.bos.qing.dashboard.CommonDsbDesignerFacade(L,function(pa){if(pa.noModeling)z.getMessageCurtain().showPrompt(k.get("publishOfSubjectNoModeling","\u8be5\u53d1\u5e03\u5bf9\u5e94\u7684\u4e3b\u9898\u6ca1\u6709\u8fdb\u884c\u6570\u636e\u51c6\u5907\uff0c\u65e0\u6cd5\u4f7f\u7528\u3002"));else if(pa.noTheme)z.getMessageCurtain().showPrompt(k.get("publishOfSubjectBeDeleted","\u8be5\u53d1\u5e03\u5bf9\u5e94\u7684\u4e3b\u9898\u5df2\u88ab\u5220\u9664\uff0c\u65e0\u6cd5\u4f7f\u7528\u3002"));
else{var H=new com.kingdee.bos.qing.dashboard.ImportLongerThirdStep;H.setPublishType("appmenu_qing");H.setPublishId(P);ba.setSchema(pa);ba.setImportSourceIsPublish(!0);H.setStepContentInfo(ba);aa([H])}},function(pa,H){pa=pa.toString();return"9"==pa.substr(0,1)&&6==pa.length?(z.getMessageCurtain().showError(k.get("failToGetPublishSchemaList","\u83b7\u53d6\u53d1\u5e03\u65b9\u6848\u5217\u8868\u5931\u8d25\u3002")),!0):!1})).getPublishSchema(P)}}function C(){function z(d){KTDefaultCellRender.call(this,
d);var h=this;this.paintCellUI=function(t,A){var u=h.getCell(),x=u.getValue();u=n(x,u);A?(t=$(A),u.appendTo(t)):(t=$(t),u.appendTo(t))};var n=function(t,A){A=t.getDisplayName();var u=$("<div>");u.addClass("appmenu-item ");var x=$("<div>");x.css({overflow:"hidden","max-width":"96px","text-overflow":"ellipsis"});var oa=Ea.createWarning();y.layoutCtrl(oa,0,12);A==a.CLOUD_HAS_BEEN_DELETED?(A=k.get("cloudHasBeenDeleted","\u8be5\u670d\u52a1\u4e91\u5df2\u88ab\u5220\u9664"),x.css({"margin-left":"6px",overflow:"unset"}),
u.append(oa)):A==a.APP_HAS_BEEN_DELETED?(A=k.get("appHasBeenDeleted","\u8be5\u5e94\u7528\u5df2\u88ab\u5220\u9664"),x.css({"margin-left":"6px",overflow:"unset"}),u.append(oa)):A==a.APP_MENU_HAS_BEEN_DELETED&&(A=k.get("appMenuHasBeenDeleted","\u8be5\u5e94\u7528\u83dc\u5355\u5df2\u88ab\u5220\u9664"),x.css({"margin-left":"6px",overflow:"unset"}),u.append(oa));u.attr("title",A);oa.attr("title",A);x.text(A);0<t.getSubNodeLevel()&&(u.css("cursor","pointer"),g(ca)===g(t)&&u.addClass("appmenu-item-selected"),
u.on("mousedown",function(M){g(ca)!==g(t)&&(L.find(".appmenu-item-selected").removeClass("appmenu-item-selected"),u.addClass("appmenu-item-selected"),ca=t,P&&P(t))}));u.append(x);y.layoutCtrlWithLRTB(u,0,0,null,0,0,null);pa&&0<t.getSubNodeLevel()&&q(x,u,t,A);return u},q=function(t,A,u,x){u=H[g(u)];var oa="("+u+")",M=$("<div>");M.addClass(0<u?"appmenu-item-search-hits-number-with-color":"appmenu-item-search-hits-number");M.text(oa);t.append(M);A.attr("title",x+" "+oa)}}var L,ba,aa,P,pa=!1,H,ca,a=com.kingdee.bos.qing.publish.env.AbstractPublishAppMenuNode;
this.setTreeItemSelectedListener=function(d){P=d};this.setCurrentNode=function(d){ca=d};this.getCurrentNode=function(){return ca};this.setSearchStatus=function(d){pa=d};this.getJqUi=function(d){L||(L=$("<div>"),L.append(b(d)));return L};var b=function(d){aa=ba=null;ba=new KTable;aa=$(ba.getUI());aa.children().css("overflow-x","hidden");ba.setCellRender(new z(ba));ba.setSyncUIWhenModelChanged(!1);ba.addColumn().setWidth(170);var h=new KTStyle;h.setVerticalAlign("middle");ba.setStyle(h);h=ba;for(var n=
0;n<d.length;n++){var q=d[n];if(q.getIsShow()){var t=h.addRow();t.setHeight(36);t=t.getCell(0);t.setValue(q);q=q.getSubNodeLevel();q=new KTCellTreeModel(q);t.setTreeModel(q)}}ba.updateUI();aa.addClass("appmenu-table");return aa};this.updateTreeUi=function(d,h){L.empty();pa&&(H=h);b(d).appendTo(L)};var g=function(d){var h=d.getAppId(),n=d.getAppMenuId();d=d.getAppMenuId2();return h?n?d?h+n+d:h+n:h:null}}function G(){var z,L;this.getPublishAppMenuBO=function(){return z};this.setPublishAppMenuBO=function(ba){z=
ba};this.setPublishPersonName=function(ba){L=ba};this.getPublishPersonName=function(){return L};this.fromJsonObject=function(ba){z=ba.publishAppMenuBO;L=ba.publishPersonName}}function va(){da.call(this);this.protectedMethod.setImportType(da.EXTREPORT_TYPE)}function xa(){X.call(this);var z=this.protectedMethod,L,ba,aa;this.getSubTitle=function(){return k.get("selectPublishedQingreport","\u9009\u62e9\u5df2\u53d1\u5e03\u7684\u62a5\u8868")};this.isLastStep=function(){return!0};this.over=function(P){P&&
((P=z.getStepContentInfo().getAllStepOverCallback())&&P(aa,ba),P=com.kingdee.bos.qing.dashboard.UserOperationReporter,P.occur(P.DSB_IMPORT_EXREPORT_TYPE,P.IMPORT_EXTREPORTAPP))};this.protectedDoNext=function(P,pa,H){P=P.formParams;L=P.publishId;ba=P.caption;P=z.getStepContentInfo().getDsbRemoteImpl();(new com.kingdee.bos.qing.dashboard.CommonDsbDesignerFacade(P,function(ca){aa=ca.ref;H()},function(ca,a){})).getPublishReferenceMap(L,"appmenu_rpt")}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&
(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.scene&&(com.kingdee.bos.qing.scene={});"undefined"==typeof com.kingdee.bos.qing.scene.common&&(com.kingdee.bos.qing.scene.common={});"undefined"==typeof com.kingdee.bos.qing.scene.common.designer&&(com.kingdee.bos.qing.scene.common.designer={});var Ca=com.kingdee.bos.qing.scene.common.designer;Ca.AbstractDashboardDesignerSceneImpl=
function(){ha.call(this);var z=this,L=this.protectedMethod,ba,aa,P=!0,pa,H,ca;this.protectedSetSourceDetail=function(e,l){throw Error("override me");};this.protectedGetSourceDetail=function(){throw Error("override me");};this.protectedGetRemoteUrl=function(){throw Error("override me");};this.protectedLoading=function(e,l,w){throw Error("override me");};this.addDsbResourceLock=function(){throw Error("override me");};this.setCloseResourceLock=function(e){ca=e};this.protectedSaveModel=function(e){throw Error("override me");
};this.protectedOverrideDsbSource=function(e){throw Error("override me");};this.protectedCreateNewDsb=function(e,l,w){throw Error("override me");};this.protectedListUnpresetThemeGroup=function(){throw Error("override me");};this.protectedInitBehaviorManager=function(){};this.protectedCreateFacade=function(e,l,w){return new com.kingdee.bos.qing.dashboard.DsbFacade(e,l,w)};this.protectedImportMoreCode=function(e){e.pushSkinJs("scene","skin");e.pushI18n("scene","scene");e.pushJs("biz-common/qing-biz-common.js");
e.pushSkinCss("biz-common","biz-common");e.pushSkinJs("biz-common","skin");e.pushI18n("biz-common","biz-common");e.pushJs("common/qing-schedule.js");e.pushI18n("common","qing-schedule");e.pushSkinCss("publish","qing-publish");e.pushSkinJs("publish","skin");e.pushI18n("publish","publish");e.pushJs("schema-manage/schema-manage-initialize.js");e.pushJs("schema-manage/schema-manage-ui.js");e.pushJs("publish/qing-publish.js");e.pushSkinCss("timedpush","qing-timedpush");e.pushSkinJs("timedpush","skin");
e.pushI18n("timedpush","timedpush");e.pushJs("timedpush/qing-timedpush.js");e.pushJs("lightapp/common/qing-lapp-env.js");e.pushJs("timedpush/qing-timedpush-lapp.js");e.pushSkinJs("imagelib","skin");e.pushI18n("dashboard","dsb-integration");e.pushSkinCss("imagelib","qing-imagelib");e.pushJs("imagelib/imagelib.js");e.pushI18n("imagelib","imagelib");e.pushSkinJs("dashboard","skin-dsb-integration");e.pushJs("dashboard/dsb-integration.js");e.pushSkinCss("dashboard","dsb-integration");e.pushSkinJs("linkage",
"skin");e.pushJs("linkage/linkage.js");e.pushSkinCss("linkage","linkage");e.pushSkinJs("map-designer","integration-skin");e.pushJs("map-designer/map-integration.js");e.pushSkinCss("map-designer","map-integration");e.pushI18n("map-designer","map-integration");e.pushJs("qhf/qing-qhf.js");e.pushSkinJs("theme-manage","skin");e.pushJs("theme-manage/qing-theme-manage.js")};this.protectedCustomInitEnv=function(){com.kingdee.bos.qing.integration.TabStatusHelper.setMyI18n(k.get("confirmExit","\u68c0\u6d4b\u5230\u60a8\u6709\u66f4\u6539\u5185\u5bb9\uff0c\u662f\u5426\u4e0d\u4fdd\u5b58\u76f4\u63a5\u9000\u51fa\uff1f\u82e5\u4e0d\u4fdd\u5b58\uff0c\u5c06\u4e22\u5931\u8fd9\u4e9b\u66f4\u6539\u3002"),
k.get("sureExit","\u76f4\u63a5\u9000\u51fa"),k.get("sureReturn","\u8fd4\u56de\u7f16\u8f91"));pa=com.kingdee.bos.qing.theme.model.ThemeGroupModel;H=com.kingdee.bos.qing.theme.model.ThemeModel;var e=com.kingdee.bos.qing.map.common.Integration,l=c.decodeParamFromUrl(location.search,"path");l=l?l:"/ierp";e.setRemoteUrl(l+"/qing/mapManage.do");var w=new com.kingdee.bos.qing.map.integration.MapSelectorDialog;com.kingdee.bos.qing.core.MapLibraryRegister.registerTemplateSelector(function(F,I){w.setParamPathPrefix(l);
w.showDialog(F,I)});com.kingdee.bos.qing.integration.ImglibUrlParser.hookUrlParser();z.protectedInitBehaviorManager()};this.protectedRegisterImplements=function(e){var l=new com.kingdee.bos.qing.dashboard.WidgetSourceSelector;l.setDsbRemoteImpl(z.getRemoteImpl());l.setParamPathPrefix(ta());l.setCustomLongerImportFuncTypes([da]);l.setCustomSquareImportFuncTypes([Z]);l.setCustomQingReportImportFuncTypes([va]);var w=new com.kingdee.bos.qing.scene.common.square.exhibition.DsbIntegrationScene;e.registerBuiltinVisualWidgetEditableConfirmerParser(function(F){var I=
F.operation?F.operation:{};F=F.scene;var R=com.kingdee.bos.qing.publish.model.OperType,J=I[R.SQUARE];I=I[R.LONGER];return"square"==F?new com.kingdee.bos.qing.publish.model.RtSquareEditableConfirmerModel(J|I):"longer"==F?new com.kingdee.bos.qing.publish.model.RtLongerEditableConfirmerModel(I):null});w.setFacade(function(F,I){return z.protectedCreateFacade(z.getRemoteImpl(),F,I)});w.setParamPathPrefix(ta());w.setMessageCurtain(Q());w.setCoreRemoteUrl(z.getCoreRemoteUrl());w.setDesignerSceneCreator(function(){return new N});
e.registerWidgetSourceSelector(l);e.registerPictrueLoader(function(F,I,R){w.loadImage(F,I,R)});e.registerSquareDesignerCreator(function(F,I,R,J,ma,B,U){aa&&aa.setCurrentLinkageTag(J);w.createSquareDesigner(F,I,R,J,ma,B,U)});e.registerSquareSceneCreator(function(F,I){w.createSquareDesignerScene(I)});e.registerLongerDesignerCreator(function(F,I,R,J,ma,B,U){aa&&aa.setCurrentLinkageTag(J);w.createLongerDesigner(F,I,R,J,ma,B,U)});e.registerLongerSceneCreator(function(F,I){w.createLongerDesignerScene(I)});
l=new com.kingdee.bos.qing.dashboard.qingreport.QingReportExecutor;l.setDsbRemoteImpl(z.getRemoteImpl());e.registerQingReportExecutor(l)};this.protectedInitDesigner=function(e){P&&ya();e.getConductor().setDirtyListener(function(l){f.setTabStatus(l)});"true"!=L.getUrlParamUtil().getUrlParam("isPreset")?e.getConductor().insertToolbarButton(function(){z.protectedSaveModel(e)},"btn_save",k.get("save","\u4fdd\u5b58"),k.get("save","\u4fdd\u5b58")):Q().showPrompt(k.get("presetDsbTips","\u9884\u7f6e\u7684\u4eea\u8868\u677f\u4e0d\u5141\u8bb8\u4fdd\u5b58\u3001\u53d1\u5e03\u7b49\u64cd\u4f5c\uff0c\u5982\u6709\u9700\u8981\uff0c\u53ef\u590d\u5236\u540e\u518d\u8fdb\u884c\u64cd\u4f5c\u3002"),
-1)};var a=function(e){var l=k.get("publishSourceColons","\u53d1\u5e03\u6765\u6e90\uff1a");z.checkDsbIsOpened(function(){var w=k.get("SyncSchemaPublishConfirm","\u540c\u6b65\u540e\uff0c\u5f53\u524d\u4eea\u8868\u677f\u5185\u5bb9\u5c06\u4f1a\u8986\u76d6\u53d1\u5e03\u6765\u6e90\uff0c\u786e\u5b9a\u540c\u6b65\u5417\uff1f");z.showSyncConfirm(w,l,e.getUserObject())},function(){var w=k.get("SyncSchemaPublishRefuse","\u6b63\u5728\u7f16\u8f91\u8be5\u53d1\u5e03\u8bb0\u5f55\u5bf9\u5e94\u7684\u53d1\u5e03\u6765\u6e90\uff0c\u8bf7\u5148\u5173\u95ed\u53d1\u5e03\u6765\u6e90\u9875\u9762\u518d\u8fdb\u884c\u540c\u6b65\u64cd\u4f5c\u3002");
z.showSyncRefused(w,!0,l)})},b=function(e){var l=k.get("TPSourceColons","\u63a8\u9001\u6765\u6e90\uff1a");z.checkDsbIsOpened(function(){var w=k.get("SyncSchemaTPConfirm","\u540c\u6b65\u540e\uff0c\u5f53\u524d\u4eea\u8868\u677f\u5185\u5bb9\u5c06\u4f1a\u8986\u76d6\u63a8\u9001\u6765\u6e90\uff0c\u786e\u5b9a\u540c\u6b65\u5417\uff1f");z.showSyncConfirm(w,l,e.getUserObject())},function(){var w=k.get("SyncSchemaTPRefuse","\u6b63\u5728\u7f16\u8f91\u8be5\u63a8\u9001\u8bb0\u5f55\u5bf9\u5e94\u7684\u63a8\u9001\u6765\u6e90\uff0c\u8bf7\u5148\u5173\u95ed\u63a8\u9001\u6765\u6e90\u9875\u9762\u518d\u8fdb\u884c\u540c\u6b65\u64cd\u4f5c\u3002");
z.showSyncRefused(w,!0,l)})};this.checkDsbIsOpened=function(e,l){throw Error("override me");};this.protectedCheckPublishLogExist=function(e,l){throw Error("override me");};var g=function(e){z.protectedCheckPublishLogExist(function(){d&&d(e)},function(){console&&console.log("\u5f39\u7a97\u63d0\u793alog\u88ab\u5220\u9664")})},d=function(e){var l=[];z.protectedListUnpresetThemeGroup(function(w){if(w)for(var F=0;F<w.length;F++){var I=new pa;I.fromJsonObject(w[F]);l.push(I)}w=e.getUserObject();F=new h;
F.setThemeGroupModel(l);F.addSuccessCallback(w);F.createDialog().show();return!0})};this.showSyncConfirm=function(e,l,w){var F=com.kingdee.bos.qing.ui.component.MessageDialog,I=F.createFeedbackDialog();I.setOptionType(F.OPTION_OK_CANCEL);I.setMessage(e);I.setClosingChecker(function(R){R==F.RETURN_OK&&w&&w();return!0});I.setBounds(380,330,0,0);I.setExtendPainter(function(R,J){var ma=z.protectedGetSourceDetail(),B=$("<div>");B.addClass("sa-ctrl-feedback-dialog-text");B.text(J);B.attr("title",J);B.appendTo(R);
J=$("<div>");J.addClass("sa-ctrl-feedback-dialog-text");J.css({color:"#999999",height:"60px",top:"53px"});J.text(l+ma);J.attr("title",l+ma);J.appendTo(R)});I.showDialog()};this.showSyncRefused=function(e,l,w){var F=function(J,ma){var B=z.protectedGetSourceDetail(),U=$("<div>");U.addClass("sa-ctrl-feedback-dialog-text");U.text(ma);U.attr("title",ma);U.appendTo(J);ma=$("<div>");ma.addClass("sa-ctrl-feedback-dialog-text");ma.css({top:"60px",height:"40px",color:"#999999"});ma.text(w+B);ma.attr("title",
w+B);ma.appendTo(J)},I=com.kingdee.bos.qing.ui.component.MessageDialog,R=I.createFeedbackDialog();R.setOptionType(I.OPTION_OK);R.setMsgImageType(I.MSG_WARNING);R.setButtonText(I.OPTION_OK,k.get("iknow","\u6211\u77e5\u9053\u4e86"));R.setMessage(e);l&&(R.setBounds(380,310,0,0),R.setExtendPainter(F));R.showDialog()};var h=function(){var e=new H,l=[400,380],w=[],F,I,R,J,ma=[];this.addSuccessCallback=function(V){w.push(V)};this.setThemeGroupModel=function(V){ma=V};this.createDialog=function(){var V=$(document.body),
ja=$("<div class='sa-ctrl-common-modallayer'>");ja.appendTo(V);var W=new ia(ja);W.setSelectable(!0);W.setTitle(k.get("SyncSchemaToNewDSB","\u53e6\u5b58\u4e3a\u65b0\u4eea\u8868\u677f"));var Y=l[0],ra=l[1],na=V.prop("clientWidth"),Da=V.prop("clientHeight");W.setBounds(na-Y>>1,Da-ra>>1,Y,ra);W.setToolbarVisible(!1);W.setContent(U());W.showFooterPane();ja.appendTo(V);var Fa=function(){W.destroy();ja.remove()};W.addClosingListener(function(Ga,Ia){Ia?B(Fa,Ga.getMessageCurtain()):Fa()});return W};var B=
function(V,ja){var W=$.trim(I.getText()),Y=$.trim(R.getText()),ra=function(Da){1010003==Da?(Da=k.get("duplicateDSBNameInCategory","\u8be5\u5206\u7c7b\u4e0b\u5b58\u5728\u540c\u540d\u4eea\u8868\u677f\u3002"),ja.showPrompt(Da,2E3)):null==Da&&V()},na;""!=W&&50<W.length?na=k.get("nameTooLong","\u540d\u79f0\u4e0d\u80fd\u8d85\u8fc750\u4e2a\u5b57\u7b26\u3002"):""==W&&(na=k.get("nameCannotBeEmpty","\u8bf7\u8f93\u5165#1\u540d\u79f0\u3002").replace("#1","\u4eea\u8868\u677f"));""!=Y&&500<Y.length&&(na=k.get("descriptionTooLong",
"\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7500\u4e2a\u5b57\u7b26\u3002"));if(na)ja.showPrompt(na,2E3);else for(e.setThemeName(W),e.setThemeGroupID(F),e.setThemeDescription(Y),e.setThemeType("1"),e.setIsPreset(!1),W=0;W<w.length;W++)(Y=w[W])&&Y(e,ra)},U=function(){var V=$("<div>"),ja=new sa;ja.setRequired(!0);ja.setText(k.get("category","\u5206\u7c7b"));ja=ja.getJqUi();var W=ma[0];F=W.getThemeGroupID();J=new qa;J.setItemModels(ma);J.setSelected(W);J.setCustomPainter(function(Fa,Ga,Ia){Ga.text(Ia.getThemeGroupName())});
J.addSelectedChangedListener(function(Fa,Ga,Ia){F=Ia.getThemeGroupID()});W=J.getJqUi();var Y=new sa;Y.setRequired(!0);Y.setText(k.get("themeName","\u540d\u79f0"));Y=Y.getJqUi();I=new wa;I.setText(e.getThemeName());var ra=I.getJqUi(),na=new sa;na.setText(k.get("description","\u63cf\u8ff0"));na=na.getJqUi();R=new Aa;R.setText(e.getThemeDescription());var Da=R.getJqUi();ja.appendTo(V);W.appendTo(V);Y.appendTo(V);ra.appendTo(V);na.appendTo(V);Da.appendTo(V);y.layoutCtrl(ja,8,0,70,23);y.layoutCtrl(W,76,
0,280,23);y.layoutCtrl(Y,8,48,70,23);y.layoutCtrl(ra,76,48,280,23);y.layoutCtrl(na,8,96,70,23);y.layoutCtrl(Da,76,100,280,120);return V}},n=function(e){e=new com.kingdee.bos.qing.publish.permission.PermLabelManageDialog(x());e.setSpaceID(fa.getUrlParamValue("qingID"));e.showDialog()},q=function(){var e=L.getUrlParamUtil().getParamPathPrefix();com.kingdee.bos.qing.timedpush.LappIntegration.setLappPrivateUrl(e+"/qing/lappPrivateInfo.do")},t=function(){return function(e,l,w){var F=com.kingdee.bos.qing.publish.model.PublishTargetType;
if(w&&F.MOBILE==w){w=e.getPublishId();var I=e.getId()}else w=e.getId();F=L.getUrlParamUtil().getParamPathPrefix();var R=Ba.getUrlParamValue(),J=L.getUrlParamUtil().getParamLanguage();F=c.appendParamToUrl((F?F:"/ierp")+"/qing/publishContentEditEntrance.do","skin",R);F=c.appendParamToUrl(F,"language",J);F=c.appendParamToUrl(F,"publishId",w);I&&(F=c.appendParamToUrl(F,"lappId",I));I=F;l&&(w="editPublishedContent-"+w,J=com.kingdee.bos.qing.publish.common.PublishSubscribeHelper,J.putSubscribe(w,l),F=c.appendParamToUrl(F,
"subscribeKey",w),F=c.appendParamToUrl(F,"currentPageClientId",J.getCurrentPageClientId()));com.kingdee.bos.qing.framework.common.TabbedUiUtil.openNewTab(k.get("editPublishedContent","\u7f16\u8f91\u53d1\u5e03\u65b9\u6848-")+e.getName(),F,I)}},A=function(){return function(e){var l=L.getUrlParamUtil().getParamPathPrefix();l=(l?l:"/ierp")+"/qing/timedPushContentEditEntrance.do";var w=k.get("editTimedPushContent","\u7f16\u8f91\u63a8\u9001\u65b9\u6848");if(e instanceof com.kingdee.bos.qing.timedpush.model.EmailConfig){var F=
e.getId(),I=e.getPublishSourceType();R=e.getSchemaSourceType();l=c.appendParamToUrl(l,"configId",F);l=c.appendParamToUrl(l,"publishSourceType",I);l=c.appendParamToUrl(l,"schemaType",R);l=c.appendParamToUrl(l,"pushTarget","email");w=w+"-"+e.getNameRule().getName();e.isSourceNameNotFound()&&(l=c.appendParamToUrl(l,"errorCode","2301001"))}else{F=e.getId();I=e.getPushTargetType();var R=e.getSchemaType();l=c.appendParamToUrl(l,"configId",F);l=c.appendParamToUrl(l,"pushTargetType",I);l=c.appendParamToUrl(l,
"schemaType",R);l=c.appendParamToUrl(l,"pushTarget","lapp");w=w+"-"+e.getName();e.getSourceName()||(l=c.appendParamToUrl(l,"errorCode","2301001"))}e=Ba.getUrlParamValue();R=L.getUrlParamUtil().getParamLanguage();e&&(l=c.appendParamToUrl(l,"skin",e));R&&(l=c.appendParamToUrl(l,"language",R));com.kingdee.bos.qing.framework.common.TabbedUiUtil.openNewTab(w,l)}},u=function(e){var l=com.kingdee.bos.qing.publish.model,w=l.PublishSourceType;l=com.kingdee.bos.qing.publish.common;var F=l.PublishContext;l=
new F;l.setBizTag(L.getUrlParamUtil().getUrlParam("dsbId"));l.setCurrentSourceType(w.DASHBOARD);l.setCurrentContentModel(e);l.setScene(F.Scene.Dashboard);e=ta();l.setParamPathPrefix(e);l.setLappEntranceUrl(e+"/qing/lappEntrance.do");l.setSpaceID(fa.getUrlParamValue("qingID"));return l},x=function(){var e=ta()+"/qing/publishTo.do",l=new com.kingdee.bos.qing.RemoteImpl;l.setRemoteUrl(e);return l},oa=function(e){return 0==e.page.widgets.length?!1:!0},M=function(){var e=Ba.getUrlParamValue(),l=L.getUrlParamUtil().getParamLanguage(),
w=ta()+"/index.html?userId=Guest&accountId=(accountId)&appNumber=qing&formId=qing_analysis_pub_email#/dform?appNumber=qing&formId=qing_analysis_pub_email&publishId=(publishId)";e&&(w=c.appendParamToUrl(w,"skin",e));l&&(w=c.appendParamToUrl(w,"language",l));return w},za=function(){var e=Ba.getUrlParamValue(),l=L.getUrlParamUtil().getParamLanguage(),w=ta()+"/qing/publishedEmailEntrance.do?publishId=(publishId)&kdcdc=(accountId)";e&&(w=c.appendParamToUrl(w,"skin",e));l&&(w=c.appendParamToUrl(w,"language",
l));return w};this.getCoreRemoteUrl=function(){return ta()+"/qing/core.do"};var ua=function(e){e.getConductor().isDirty()?(f.showConfirmExitDialog(),ca&&f.setClosingListener(ca)):ca?ca(function(){v.closeCurrentTab()}):v.closeCurrentTab()},Q=function(){ba||(ba=new S,ba.getJqUi().appendTo($(document.body)));return ba},ta=function(){var e=L.getUrlParamUtil().getParamPathPrefix();return e?e:"/ierp"},ya=function(){var e=ta()+"/qing/linkage.do",l=com.kingdee.bos.qing.integration.LinkageJumper;aa=new com.kingdee.bos.qing.linkage.LinkageManage;
aa.initDesigntime(e,l.jump)};this.protectedMethod.getMessageCurtain=Q;this.protectedMethod.hookCloseTab=function(e){e.getConductor().appendToolbarButton(function(){ua(e)},"error_close",k.get("closeTab","\u9000\u51fa"))};this.protectedMethod.hookSyncPublishToDsb=function(e){var l=k.get("SchemeSynced","\u540c\u6b65\u4e0e\u53e6\u5b58"),w=k.get("SyncSchemaToDSB","\u540c\u6b65\u56de\u539f\u4eea\u8868\u677f"),F=k.get("SyncSchemaToNewDSB","\u53e6\u5b58\u4e3a\u65b0\u4eea\u8868\u677f"),I=new ea,R=new D(a);
R.setText(w);R.setUserObject(function(){z.protectedOverrideDsbSource(e)});I.addItemModel(R);w=new D(g);w.setText(F);w.setUserObject(function(J,ma){z.protectedCreateNewDsb(e,J,ma)});I.addItemModel(w);e.getConductor().appendToolbarMenu(I,"sync_scheme_to_publish",l)};this.protectedMethod.hookSyncTimePushToDsb=function(e){var l=k.get("SchemeSynced","\u540c\u6b65\u4e0e\u53e6\u5b58"),w=k.get("SyncSchemaToDSB","\u540c\u6b65\u56de\u539f\u4eea\u8868\u677f"),F=k.get("SyncSchemaToNewDSB","\u53e6\u5b58\u4e3a\u65b0\u4eea\u8868\u677f"),
I=new ea,R=new D(b);R.setText(w);R.setUserObject(function(){z.protectedOverrideDsbSource(e)});I.addItemModel(R);w=new D(g);w.setText(F);w.setUserObject(function(J,ma){z.protectedCreateNewDsb(e,J,ma)});I.addItemModel(w);e.getConductor().appendToolbarMenu(I,"sync_scheme_to_push",l)};this.protectedMethod.hookPublishTo=function(e){var l=com.kingdee.bos.qing.publish.model,w=l.PublishTargetType;l=com.kingdee.bos.qing.publish.common;var F=l.PublishFactory,I=function(ma){if(oa(e.getJsonModel())){var B=ma.getUserObject();
ma=ma.getText().replace("...","");var U=u(e.getJsonModel());U.setWidgetsExecutingTag(e.collectBuiltinWidgetsExecutingTag());B=F.createPublishToDialog(ma,x(),U,B,t());B.setOuterMessageCurtain(Q());B.showDialog()}else Q().showPrompt(k.get("noWidgets","\u4eea\u8868\u677f\u6ca1\u6709\u5185\u5bb9\u3002"),2E3)};l=new ea;var R=new D(I);R.setUserObject(w.APPMENU);R.setText(k.get("toAppMenu","\u5e94\u7528\u83dc\u5355..."));l.addItemModel(R);R=new D(I);R.setUserObject(w.CENTER);R.setText(k.get("toAnalysisCenter",
"\u6570\u636e\u5de5\u4f5c\u53f0\u9605\u89c8\u5939..."));l.addItemModel(R);R=new D(I);R.setUserObject(w.CARD_REPOSITORY);R.setText(k.get("toCardRepository","\u5361\u7247\u5e93..."));l.addItemModel(R);I=new D(I);I.setUserObject(w.MOBILE);I.setText(k.get("toMobile","\u79fb\u52a8\u8f7b\u5e94\u7528..."));l.addItemModel(I);com.kingdee.bos.qing.timedpush.LappIntegration.syncDatacenterInfo(x());q();var J=u(e.getJsonModel());l.addSeperator();R=new D(function(){(new com.kingdee.bos.qing.publish.common.PublishManagerDialog(x(),
J,t())).showDialog()});R.setUserObject();R.setText(k.get("publishManager","\u53d1\u5e03\u7ba1\u7406")+"...");l.addItemModel(R);w=new D(n);w.setUserObject();w.setText(k.get("permLabelManage","\u6743\u9650\u6807\u7b7e\u7ba1\u7406")+"...");l.addItemModel(w);w=k.get("publishTo","\u53d1\u5e03\u5230");e.getConductor().appendToolbarMenu(l,"publish_to",w)};this.protectedMethod.hookCommunicateTo=function(e){var l=function(J){J=k.get("yzjCommunicate","\u4e91\u4e4b\u5bb6\u6c9f\u901a...").replace("...","");var ma=
u(e.getJsonModel());J=com.kingdee.bos.qing.timedpush.PublishToYunzhijiaDialogFactory.createDialog(J,x(),ma);J.setOuterMessageCurtain(Q());J.showDialog()},w=function(J){oa(e.getJsonModel())?(J=com.kingdee.bos.qing.CodeLoader.createSafety(),J.pushJs("yzj-web/qingjs.js"),J.pushJs("yzj-web/imcloud.js"),J.pushJs("yzj-web/imsdkerp.js"),J.pushJs("yzj-web/imShare.js"),J.pushSkinCss("yzj-web","imcloud"),J.pushSkinCss("yzj-web","imsdk"),J.pushSkinCss("yzj-web","imsdkerp"),J.load(function(){})):Q().showPrompt(k.get("noWidgets",
"\u4eea\u8868\u677f\u6ca1\u6709\u5185\u5bb9\u3002"),2E3)},F=new ea;(new D(function(J){window.beLoadedImCloud?l(J):w(J)})).setText(k.get("yzjCommunicate","\u4e91\u4e4b\u5bb6\u6c9f\u901a..."));var I=new D(function(J){if(oa(e.getJsonModel())){J=J.getText().replace("...","");var ma=u(e.getJsonModel());J=new com.kingdee.bos.qing.timedpush.EmailPublishConfigDialog(J,x(),ma,M(),za(),A());J.setOuterMessageCurtain(Q());J.showDialog()}else Q().showPrompt(k.get("noWidgets","\u4eea\u8868\u677f\u6ca1\u6709\u5185\u5bb9\u3002"),
2E3)});I.setText(k.get("emailSchedulePush","\u90ae\u4ef6\u5b9a\u65f6\u63a8\u9001..."));F.addItemModel(I);I=new D(function(J){if(oa(e.getJsonModel())){var ma=u(e.getJsonModel()),B=new com.kingdee.bos.qing.timedpush.LappSchedulePush;J=J.getText().replace("...","");B.createDialog(J,x(),ma,A(),e)}else Q().showPrompt(k.get("noWidgets","\u4eea\u8868\u677f\u6ca1\u6709\u5185\u5bb9\u3002"),2E3)});I.setText(k.get("mobileSchedulePush","\u79fb\u52a8\u7aef\u5b9a\u65f6\u63a8\u9001")+"...");F.addItemModel(I);var R=
u(e.getJsonModel());F.addSeperator();I=new D(function(){var J=new com.kingdee.bos.qing.publish.common.PushManager(A()),ma=com.kingdee.bos.qing.timedpush;J.registerEmailPushPanelConstructor(ma.EmailConfigManagePanel);J.initEmailPushConfig(x(),M(),za());J.registerLappPushPanelConstructor(ma.LappPushManagePanel);J.initLappPushConfig(function(B,U,V){return com.kingdee.bos.qing.publish.common.PublishFactory.createPublishFacade(com.kingdee.bos.qing.publish.model.PublishTargetType.MOBILE,x(),B,U,V)},R);
J.showDialog()});I.setUserObject();I.setText(k.get("pushManager","\u5b9a\u65f6\u63a8\u9001\u7ba1\u7406")+"...");F.addItemModel(I);F=e.getConductor().appendToolbarMenu(F,"btn_communicate",k.get("timedPush","\u5b9a\u65f6\u63a8\u9001"));F.addActionListener(function(){window.beLoadedImCloud||(window.funCallback=l)});return F};this.protectedMethod.setNeedShowLinkage=function(e){P=e}};var Ba,ha,la,fa,v,c,k,S,ea,D,E,f,m,y,p,r,T,K,ia,sa,qa,wa,Aa,Ea;(function(){var z=com.kingdee.bos.qing;Ba=z.SkinUtil;ha=
z.AbstractDashboardDesignerScene;la=z.AbstractModalDesignerScene;fa=z.Seer;z=com.kingdee.bos.qing.common;c=z.Util;y=z.DomUtil;p=z.DateFormater;z=com.kingdee.bos.qing.common.ui;r=z.TableUtil;Ea=z.CommonIconUtil;z=com.kingdee.bos.qing.framework.common;v=z.TabbedUiUtil;K=z.AbstractIcons;z=com.kingdee.bos.qing.ui.component;S=z.MessageCurtain;ea=z.MenuModel;D=z.MenuItemModel;E=z.RadioButton;m=z.RadioButtonGroup;T=z.SearchBox;ia=z.Dialog;sa=z.Label;qa=z.ComboBox;wa=z.TextField;Aa=z.TextArea;z=com.kingdee.bos.qing.framework.common;
k=z.MultilanguageManager.createPackageAccessor(com.kingdee.bos.qing.scene);z=com.kingdee.bos.qing.integration;f=z.TabStatusHelper})();Ca.Icons=new function(){K.call(this);var z=this.protectedMethod,L;this.setComboIconImpl=function(ba){L=ba};this.protectedInit=function(ba,aa){if(!L)throw Error("Please setComboIconImpl() first.");L.define(aa,"no-data");aa.setStartPosition(0,0);aa.setGap(0);aa.setIconSize(220,220);z.registIcon(0,0,"no-data")}};da.SQUARE_TYPE=1;da.LONGER_TYPE=0;da.EXTREPORT_TYPE=2})();(function(){function N(){da.call(this);var ha,la,fa,v,c=!0,k,S=!0,ea;this.setIsSquare=function(D){c=D};this.protectedIsSquare=function(){return c};this.protectedInitDesigner=function(D){var E=ka.get("save","\u4fdd\u5b58");D.getConductor().insertToolbarButton(function(m){la(D)},"btn_save",E,null);E=new G;var f=new va(function(m){m=new xa;m.setText(ka.get("resetConfirmTips","\u60a8\u786e\u5b9a\u8981\u91cd\u7f6e\u5230\u53d1\u5e03\u6700\u521d\u59cb\u7684\u72b6\u6001\uff0c\u5e76\u9000\u51fa\u5417\uff1f"));
m.setConfirmedListener(function(p){p&&fa(D)});var y=v.getJqUi();m.show(y)});f.setText(ka.get("resetAndBack","\u91cd\u7f6e\u5e76\u8fd4\u56de"));E.addItemModel(f);v=D.getConductor().insertToolbarMenu(E,"btn_reset",ka.get("reset","\u91cd\u7f6e"),null);D.setDesignerOperationJudger(S?null:k,S?k:null);D.setAdditionalFilterApi(ea);if(E=window.com.kingdee.bos.qing.AnalysisSceneOuterApi)E.inside.setDirtyChecker(function(){return!1}),E.inside.setBeforeClosing(function(){return Ba.setTabStatus(!1)})};this.protectedLoading=
function(D,E){ha(D,E)};this.setSchemaLoader=function(D){ha=D};this.setSchemaSaver=function(D){la=D};this.setSchemaReseter=function(D){fa=D};this.setDesignerOperationJudger=function(D){k=D};this.setSquareOrLonger=function(D){S=D};this.protectedIsSquare=function(){return S};this.setAdditionalFilterApi=function(D){ea=D}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&
(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.scene&&(com.kingdee.bos.qing.scene={});"undefined"==typeof com.kingdee.bos.qing.scene.common&&(com.kingdee.bos.qing.scene.common={});"undefined"==typeof com.kingdee.bos.qing.scene.common.exhibitioner&&(com.kingdee.bos.qing.scene.common.exhibitioner={});var Z=com.kingdee.bos.qing.scene.common.exhibitioner;Z.AbstractDashboardExhibitionerSceneImpl=function(){O.call(this);var ha=this,la=this.protectedMethod,fa,v,c;this.protectedGetRemoteUrl=
function(){throw Error("override me");};this.getCoreRemoteUrl=function(){throw Error("override me");};this.protectedLoading=function(f,m,y){throw Error("override me");};this.squareAnalysisHandler=function(f,m,y,p,r,T){throw Error("override me");};this.protectedImportMoreCode=function(f){f.pushJs("biz-common/qing-biz-common.js");f.pushSkinCss("biz-common","biz-common");f.pushSkinJs("biz-common","skin");f.pushI18n("biz-common","biz-common");f.pushJs("qhf/qing-qhf.js");f.pushJs("common/qing-schedule.js");
f.pushJs("schema-manage/schema-manage-initialize.js");f.pushJs("schema-manage/schema-manage-ui.js");f.pushJs("publish/qing-publish.js");f.pushSkinJs("scene","skin");f.pushI18n("scene","scene");f.pushI18n("dashboard","dsb-integration");f.pushSkinJs("dashboard","skin-dsb-integration");f.pushJs("dashboard/dsb-integration.js");f.pushSkinCss("dashboard","dsb-integration");f.pushSkinJs("map-designer","integration-skin");f.pushJs("map-designer/map-integration.js");f.pushSkinCss("map-designer","map-integration");
f.pushI18n("map-designer","map-integration");f.pushSkinJs("linkage","skin");f.pushJs("linkage/linkage.js");f.pushSkinCss("linkage","linkage")};this.protectedCustomInitEnv=function(){var f=com.kingdee.bos.qing.map.common.Integration,m=X.decodeParamFromUrl(location.search,"path");m=m?m:"/ierp";f.setRemoteUrl(m+"/qing/mapManage.do");var y=new com.kingdee.bos.qing.map.integration.MapSelectorDialog;com.kingdee.bos.qing.core.MapLibraryRegister.registerTemplateSelector(function(T,K){y.setParamPathPrefix(m);
y.showDialog(T,K)});f=la.getUrlParamUtil().getUrlParam("publishTargetType");6!=f&&k();var p=com.kingdee.bos.qing.behavior.BehaviorManager;p.interestInBehaviorEntrance(p.getEntrance(p.ENTRANCE_PUBLISH_DASHBOARD,f));if(5!=f){f=la.getUrlParamUtil().getUrlParam("publishId");var r=X.createUUID();p.initAccessRecordParams(f,r,p.SourceType.QING_PUBLISH,p.AppType.QING);p.setRefuseOperationType([p.OperationType.QING_EXPORT,p.OperationType.QING_PRINT]);p.recordResourceOperation(p.OperationType.QING_VISIT);window.addEventListener("unload",
function(){p.recordResourceOperation(p.OperationType.QING_EXIT)})}com.kingdee.bos.qing.integration.ImglibUrlParser.hookUrlParser()};var k=function(){var f=la.getUrlParamUtil().getParamPathPrefix();f=(f?f:"/ierp")+"/qing/linkage.do";var m=com.kingdee.bos.qing.integration.LinkageJumper;v=new com.kingdee.bos.qing.linkage.LinkageManage;v.initDesigntime(f,m.jump)};this.protectedRegisterImplements=function(f){var m=la.getUrlParamUtil().getParamPathPrefix(),y=new com.kingdee.bos.qing.scene.common.square.exhibition.DsbIntegrationScene;
y.setFacade(function(p,r){return new com.kingdee.bos.qing.dashboard.RuntimeDsbFacade(ha.getRemoteImpl(),p,r)});y.setParamPathPrefix(m);y.setMessageCurtain(D());y.setCoreRemoteUrl(ha.getCoreRemoteUrl());y.setResetSquare(S);y.setDesignerSceneCreator(function(){return new N});f.registerSquareSceneCreator(function(p,r){y.createSquareDesignerScene(r)});f.registerBuiltinVisualWidgetEditableConfirmerParser(function(p){var r=p.operation?p.operation:{};p=p.scene;var T=com.kingdee.bos.qing.publish.model.OperType,
K=r[T.SQUARE];r=r[T.LONGER];return"square"==p?new com.kingdee.bos.qing.publish.model.RtSquareEditableConfirmerModel(K|r):"longer"==p?new com.kingdee.bos.qing.publish.model.RtLongerEditableConfirmerModel(r):null});f.registerSquareDesignerCreator(function(p,r,T,K,ia,sa,qa){v&&v.setCurrentLinkageTag(K);y.createSquareDesigner(p,r,T,K,ia,sa,qa)});f.registerSquareAnalysisHandler(ha.squareAnalysisHandler);f.registerPictrueLoader(function(p,r,T){y.loadImage(p,r,T)});f.registerLongerSceneCreator(function(p,
r){y.createLongerDesignerScene(r)});f.registerLongerDesignerCreator(function(p,r,T,K,ia,sa,qa){v&&v.setCurrentLinkageTag(K);c=la.getUrlParamUtil().getUrlParam("timedPush");y.createLongerDesigner(p,r,T,K,ia,sa,qa,c)});m=new com.kingdee.bos.qing.dashboard.qingreport.QingReportExecutor;m.setDsbRemoteImpl(ha.getRemoteImpl());f.registerQingReportExecutor(m)};var S=function(f,m,y){(new com.kingdee.bos.qing.dashboard.RuntimeDsbFacade(ha.getRemoteImpl(),function(p){D().showSuccess(ka.get("resetRefContentSuccess",
"\u91cd\u7f6e\u5f15\u7528\u6a21\u578b\u5185\u5bb9\u5230\u53d1\u5e03\u72b6\u6001\u6210\u529f\u3002"));y(p.model)},ea)).squareResetAndGetPubSchema(f)},ea=function(f,m){return 900001==f?(D().showError(ka.get("failToLoadRefContent","\u52a0\u8f7d\u5f15\u7528\u5185\u5bb9\u5931\u8d25\u3002")),!0):900004==f?(D().showError(ka.get("dsbContentParseError","\u4eea\u8868\u677f\u6a21\u578b\u5185\u5bb9\u8f6c\u6362\u5931\u8d25\u3002")),!0):900005==f?(D().showError(ka.get("refContentParseError","\u5f15\u7528\u6a21\u578b\u5185\u5bb9\u8f6c\u6362\u5931\u8d25\u3002")),
!0):301201==f?(D().showError(ka.get("extractDataFailToRefresh","\u51c6\u5907\u6570\u636e\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u51fa\u6570\u636e\u518d\u8fdb\u884c\u8be5\u64cd\u4f5c\u3002")),!0):!1},D=function(){fa||(fa=new C,fa.getJqUi().appendTo($(document.body)));return fa};this.protectedLoadDashboardInfo=function(f){var m=la.getUrlParamUtil().getUrlParam("publishId");m&&(new com.kingdee.bos.qing.dashboard.RuntimeDsbFacade(ha.getRemoteImpl(),function(y){var p=X.decodeParamFromUrl(location.search,
"path"),r=la.getUrlParamUtil().getUrlParam("publishTargetType"),T=la.getUrlParamUtil().getUrlParam("skin");p=X.appendParamToUrl((p?p:"/ierp")+"/qing/publishEntrance.do","publishId",m);p=X.appendParamToUrl(p,"publishTargetType",r);p=X.appendParamToUrl(p,"skin",T);p=com.kingdee.bos.qing.integration.PageHelper.getIframeUrl(p);E(f,p,y)},function(){})).getPublishUsername(m)};var E=function(f,m,y){var p=new C;p.getJqUi().appendTo(f[0].parentNode.parentNode.parentNode);var r=$("<div>");r.addClass("dsb-desc-publish-user");
r.text(ka.get("publisher","\u53d1\u5e03\u4eba\uff1a")+y);y=$("<div>");var T=$("<div>");T.addClass("dsb-desc-url-info");T.css({display:"inline-block","vertical-align":"middle"});T.text(ka.get("dsbUrlInformation","\u4eea\u8868\u677f\u94fe\u63a5"));T.appendTo(y);T=$("<div>");T.addClass("dsb-desc-url");T.css("word-break","break-all");T.text(m);var K=$("<div>");K.addClass("dsb-desc-url-copyIcon");Z.Icons.background(K,"copy_icon");K.css({"margin-left":"13px",width:"16px",height:"16px",display:"inline-block",
"vertical-align":"middle"});K.attr("title",ka.get("copy","\u590d\u5236"));K.appendTo(y);K.on("mouseover",function(ia){Z.Icons.background(K,"copy_icon_hover");K.css("vertical-align","middle")});K.on("mouseout",function(ia){Z.Icons.background(K,"copy_icon");K.css("vertical-align","middle")});K.on("click",function(ia){try{var sa=document.createElement("input");document.body.appendChild(sa);sa.setAttribute("value",m);sa.select();document.execCommand("copy");p.showSuccess(ka.get("hasCopied","\u5df2\u590d\u5236\u5230\u526a\u8d34\u677f"));
document.body.removeChild(sa)}catch(qa){p.showError(ka.get("copyfailed","\u590d\u5236\u5931\u8d25"))}});r.appendTo(f);y.appendTo(f);T.appendTo(f)};this.protectedCreateVisualWidgetEditableConfirmer=function(f,m){var y=com.kingdee.bos.qing.publish.model.OperType,p=new com.kingdee.bos.qing.publish.model.RtSquareEditableConfirmerModel(m[y.SQUARE]|m[y.LONGER]);m=new com.kingdee.bos.qing.publish.model.RtLongerEditableConfirmerModel(m[y.SQUARE_LONGER]);p=new com.kingdee.bos.qing.dsb.VisualWidgetEditableConfirmer(p,
m);f.setVisualWidgetEditableConfirmer(p)}};var O,da,X,ka,C,G,va,xa,Ca,Ba;(function(){var ha=com.kingdee.bos.qing;O=ha.AbstractDashboardExhibitionScene;da=ha.AbstractModalDesignerScene;ha=com.kingdee.bos.qing.common;X=ha.Util;ha=com.kingdee.bos.qing.framework.common;ka=ha.MultilanguageManager.createPackageAccessor(com.kingdee.bos.qing.scene);Ca=ha.AbstractIcons;ha=com.kingdee.bos.qing.ui.component;C=ha.MessageCurtain;G=ha.MenuModel;va=ha.MenuItemModel;xa=ha.SimpleConfirmer;ha=com.kingdee.bos.qing.integration;
Ba=ha.TabStatusHelper})();Z.Icons=new function(){Ca.call(this);var ha=this.protectedMethod,la;this.setComboIconImpl=function(fa){la=fa};this.protectedInit=function(fa,v){if(!la)throw Error("Please setComboIconImpl() first.");la.define(v,"tm");v.setGap(1);v.setStartPosition(1,1);v.setIconSize(16,16);ha.registIcon(0,10,"copy_icon_hover");ha.registIcon(1,10,"copy_icon")}}})();(function(){function N(){va.call(this);var c=this.protectedMethod,k,S=this.protectedImportMoreCode;this.protectedImportMoreCode=function(f){S(f);c.importLinkage(f);c.importForSchema(f);c.importForPublish(f)};var ea=this.protectedCustomInitEnv;this.protectedCustomInitEnv=function(f){c.setModuleWithLonger(!0,!0);c.setModuleWithSquare(!1,!1);ea(f);k=new Ca(null);f()};this.protectedLoadingLonger=function(f,m,y){c.loadMeta(f,function(p){m.prepareMeta(p);p=D();var r=com.kingdee.bos.qing.schemamanage.SchemaManage,
T=com.kingdee.bos.qing.schemamanage.model.SchemaAttrModel.SCHEMASOURCE_LONGER,K=c.getUrlParamUtil().getParamTag();r=new r(K,T);r.setReloadMetaFun(function(ia){c.reloadMeta(function(sa){m.prepareMeta(sa);ia&&ia()})});r.initialize(p,m,y,null,!0)});(new ha).getJqUi().appendTo($(document.body))};this.protectedInitDesignerForLonger=function(f){f.setDesignerOperationJudger(k,null);var m=c.getMLS("refresh","\u6570\u636e\u66f4\u65b0");f.getConductor().appendToolbarButton(function(){E(f)},"btn_reset",m);c.hookCloseTab(f);
c.hookSetCurrentTabStatus(f)};this.protectedGetRemoteUrl=function(){var f=c.getUrlParamUtil().getParamPathPrefix();return(f?f:"/ierp")+"/qing/qhfCore.do"};var D=function(){var f=c.getUrlParamUtil().getParamPathPrefix();f=(f?f:"/ierp")+"/qing/qhf.do";var m=c.getUrlParamUtil().getParamTag(),y=new da;y.setRemoteUrl(f);y.setTag(m);return y},E=function(f){c.reloadMeta(function(m){var y=f.getJsonModelBook();f.prepareMeta(m);f.setJsonModelBook(y)})}}function Z(){va.call(this);var c=this.protectedMethod,
k=this.protectedImportMoreCode;this.protectedImportMoreCode=function(E){k(E);c.importLinkage(E);c.importForSchema(E);c.importForPublish(E);c.importForMap(E)};var S=this.protectedCustomInitEnv;this.protectedCustomInitEnv=function(E){c.setModuleWithLonger(!1,!1);c.setModuleWithSquare(!0,!0);S(E);var f=com.kingdee.bos.qing.map.common.Integration,m=c.getUrlParamUtil().getParamPathPrefix();f.setRemoteUrl(m+"/qing/mapManage.do");var y=new com.kingdee.bos.qing.map.integration.MapSelectorDialog;com.kingdee.bos.qing.core.MapLibraryRegister.registerTemplateSelector(function(p,
r){y.setParamPathPrefix(m);y.showDialog(p,r)});E()};this.protectedLoadingSquare=function(E,f,m){c.loadMeta(E,function(y){f.prepareMeta(y);y=ea();var p=com.kingdee.bos.qing.schemamanage.SchemaManage,r=com.kingdee.bos.qing.schemamanage.model.SchemaAttrModel.SCHEMASOURCE_SQUARE,T=c.getUrlParamUtil().getParamTag();p=new p(T,r);p.setReloadMetaFun(function(K){c.reloadMeta(function(ia){f.prepareMeta(ia);K&&K()})});p.initialize(y,f,m,null,!0)});(new ha).getJqUi().appendTo($(document.body))};this.protectedInitDesignerForSquare=
function(E){var f=c.getMLS("refresh","\u6570\u636e\u66f4\u65b0");E.getConductor().appendToolbarButton(function(){D(E)},"btn_reset",f);c.hookCloseTab(E);c.hookSetCurrentTabStatus(E);c.initDesigntimeLinkage()};this.protectedGetRemoteUrl=function(){var E=c.getUrlParamUtil().getParamPathPrefix();return(E?E:"/ierp")+"/qing/qhfCore.do"};var ea=function(){var E=c.getUrlParamUtil().getParamPathPrefix();E=(E?E:"/ierp")+"/qing/qhf.do";var f=c.getUrlParamUtil().getParamTag(),m=new da;m.setRemoteUrl(E);m.setTag(f);
return m},D=function(E){c.reloadMeta(function(f){var m=E.getJsonModelBook();E.prepareMeta(f);E.setJsonModelBook(m)})}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.scene&&(com.kingdee.bos.qing.scene={});var O=com.kingdee.bos.qing.scene;O.QHFSceneFactory=new function(){var c={};this.createScene=function(k){if(k=
c[k])return new k;throw Error("unknown sSceneType");};this.register=function(k,S){c[k]=S}};var da,X,ka,C,G,va,xa,Ca,Ba,ha,la,fa,v;(function(){var c=com.kingdee.bos.qing;da=c.RemoteImpl;c=com.kingdee.bos.qing.scene.common.exhibitioner;G=c.AbstractDashboardExhibitionerSceneImpl;c=com.kingdee.bos.qing.common;X=c.Util;c=com.kingdee.bos.qing.framework.common;ka=c.MultilanguageManager.createPackageAccessor(O);C=c.TabbedUiUtil;c=com.kingdee.bos.qing.scene.common.designer;va=c.AbstractDesignerSceneImpl;xa=
c.AbstractDashboardDesignerSceneImpl;Ca=c.LongerDesignerOperationJudgerModel;c=com.kingdee.bos.qing.qhf;Ba=c.QHFFacade;ha=c.QHFInfoIcon;la=c.QHFExporter;c=com.kingdee.bos.qing.ui.component;fa=c.Dialog;v=c.MessageCurtain})();O.QHFSceneFactory.register(la.SCENE_TYPE_SUBJECT_LONGER,N);O.QHFSceneFactory.register(la.SCENE_TYPE_PUBLISH_SUBJECT_LONGER,N);O.QHFSceneFactory.register(la.SCENE_TYPE_PUBLISH_EMBEDDED_LONGER,N);O.QHFSceneFactory.register(la.SCENE_TYPE_SUBJECT_SQUARE,Z);O.QHFSceneFactory.register(la.SCENE_TYPE_PUBLISH_SUBJECT_SQUARE,
Z);O.QHFSceneFactory.register(la.SCENE_TYPE_PUBLISH_EMBEDDED_SQUARE,Z);O.QHFSceneFactory.register(la.SCENE_TYPE_EMBEDDED_LONGER_SQUARE,function(){va.call(this);var c=this.protectedMethod,k=!1,S,ea=this.protectedImportMoreCode;this.protectedImportMoreCode=function(f){ea(f);c.importLinkage(f);c.importForSchema(f);c.importForPublish(f);c.importForMap(f)};var D=this.protectedCustomInitEnv;this.protectedCustomInitEnv=function(f){c.setModuleWithLonger(!0,!0);c.setModuleWithSquare(!0,!1);D(f);fa.setFullScreenPadding(0,
45,0,0);var m=com.kingdee.bos.qing.map.common.Integration,y=c.getUrlParamUtil().getParamPathPrefix();m.setRemoteUrl(y+"/qing/mapManage.do");var p=new com.kingdee.bos.qing.map.integration.MapSelectorDialog;com.kingdee.bos.qing.core.MapLibraryRegister.registerTemplateSelector(function(r,T){p.setParamPathPrefix(y);p.showDialog(r,T)});S=new Ca(null);f()};this.protectedInitDesignerForLonger=function(f){f.setDesignerOperationJudger(S,null);c.hookCloseTab(f);c.hookSetCurrentTabStatus(f)};this.protectedInitDesignerForSquare=
function(f){c.hookCloseTab(f);c.hookSetCurrentTabStatus(f);c.initDesigntimeLinkage()};this.protectedLoadingLonger=function(f,m,y){c.loadMeta(f,function(p){m.prepareMeta(p);p=E();var r=com.kingdee.bos.qing.schemamanage.SchemaManage,T=com.kingdee.bos.qing.schemamanage.model.SchemaAttrModel.SCHEMASOURCE_LONGER,K=c.getUrlParamUtil().getParamTag();r=new r(K,T);r.setReloadMetaFun(function(ia){c.reloadMeta(function(sa){m.prepareMeta(sa);ia&&ia()})});r.initialize(p,m,y,null,!0)});(new ha).getJqUi().appendTo($(document.body))};
this.protectedLoadingSquare=function(f,m,y){c.loadMeta(f,function(p){m.prepareMeta(p);p=E();var r=com.kingdee.bos.qing.schemamanage.SchemaManage,T=com.kingdee.bos.qing.schemamanage.model.SchemaAttrModel.SCHEMASOURCE_SQUARE,K=c.getUrlParamUtil().getParamTag();r=new r(K,T);r.setReloadMetaFun(function(ia){c.reloadMeta(function(sa){m.prepareMeta(sa);ia&&ia()})});r.initialize(p,m,y,null,!0)});(new ha).getJqUi().appendTo($(document.body))};this.protectedIntoTab=function(f,m){k&&!m&&(f&&f.reExecute(),k=
!1)};var E=function(){var f=c.getUrlParamUtil().getParamPathPrefix();f=(f?f:"/ierp")+"/qing/qhf.do";var m=c.getUrlParamUtil().getParamTag(),y=new da;y.setRemoteUrl(f);y.setTag(m);return y}});O.QHFSceneFactory.register(la.SCENE_TYPE_DSB_DESIGNER,function(){xa.call(this);var c=this.protectedMethod;this.protectedCreateFacade=function(ea,D,E){return new com.kingdee.bos.qing.dashboard.PublishDsbDesignerFacade(ea,D,E)};this.protectedLoading=function(ea,D,E){(new Ba(ea,function(f){f&&D.setJsonModel(f,function(m){m.isError()&&
c.getMessageCurtain().showError(ka.get("failToLoadDsbCurtain","\u52a0\u8f7d\u4eea\u8868\u677f\u5931\u8d25\u3002"))});E(!0)},function(f,m){return 1030001==f?(com.kingdee.bos.qing.framework.common.RemoteFramework.openErrorPage(f,com.kingdee.bos.qing.common.Base64Util.encode(encodeURIComponent(m))),!0):!1})).loadModel();(new ha).getJqUi().appendTo($(document.body))};this.protectedGetRemoteUrl=function(){return S()+"/qing/qhfDsb.do"};this.protectedGetDashboardUniqueId=function(){return c.getUrlParamUtil().getUrlParam("tag")};
this.getCoreRemoteUrl=function(){return S()+"/qing/qhfCore.do"};var k=this.protectedInitDesigner;this.protectedInitDesigner=function(ea){k(ea);c.hookCloseTab(ea)};this.protectedSaveModel=function(ea){c.getMessageCurtain().showPrompt(ka.get("QHFdsbNotSupportSave","\u5bfc\u5165\u7684\u5168\u4fe1\u606f\u6a21\u677f\u4e0d\u652f\u6301\u4fdd\u5b58\u3002"),2E3)};var S=function(){var ea=c.getUrlParamUtil().getParamPathPrefix();return ea?ea:"/ierp"}});O.QHFSceneFactory.register(la.SCENE_TYPE_PUBLISH_DSB,function(){G.call(this);
var c=this.protectedMethod,k;this.getCoreRemoteUrl=function(){return S()+"/qing/qhfCore.do"};this.protectedGetRemoteUrl=function(){return S()+"/qing/qhfRuntimeDsb.do"};this.protectedGetDashboardUniqueId=function(){return c.getUrlParamUtil().getUrlParam("tag")};this.squareAnalysisHandler=function(E,f,m,y,p,r){var T=com.kingdee.bos.qing.SkinUtil.getUrlParamValue();p=S()+"/qing/exhibitionQHFPublishedDsbAnalysisEntrance.do";p=X.appendParamToUrl(p,"dashboardUniqueId",c.getUrlParamUtil().getUrlParam("tag"));
p=X.appendParamToUrl(p,"tag",m);p=X.appendParamToUrl(p,"ref",JSON.stringify(f));p=X.appendParamToUrl(p,"path",S());T&&(p=X.appendParamToUrl(p,"skin",T));E=ka.get("dataAnalysis","\u6570\u636e\u5206\u6790")+(E?"-"+E:"");r&&(r=com.kingdee.bos.qing.core.shared.AdditionalFilterInfoParser.encodeAdditionalFilterApi(r),window.sessionStorage.setItem("qhf-oAdditionalFilterApi",r));y&&window.sessionStorage.setItem("qhf-oJsonFilterSetForInstead",JSON.stringify(y));C.openNewTab(E,p)};this.protectedLoading=function(E,
f,m){(new com.kingdee.bos.qing.dashboard.RuntimeDsbFacade(E,function(y){y&&f.setJsonModel(y,function(p){p.isError()&&D().showError(ka.get("failToLoadDsbCurtain","\u52a0\u8f7d\u4eea\u8868\u677f\u5931\u8d25\u3002"))});m(!0)},ea)).loadPublishedDsb();(new ha).getJqUi().appendTo($(document.body))};var S=function(){var E=c.getUrlParamUtil().getParamPathPrefix();return E?E:"/ierp"},ea=function(E,f){return 900001==E?(D().showError(ka.get("failToLoadRefContent","\u52a0\u8f7d\u5f15\u7528\u5185\u5bb9\u5931\u8d25\u3002")),
!0):900004==E?(D().showError(ka.get("dsbContentParseError","\u4eea\u8868\u677f\u6a21\u578b\u5185\u5bb9\u8f6c\u6362\u5931\u8d25\u3002")),!0):900005==E?(D().showError(ka.get("refContentParseError","\u5f15\u7528\u6a21\u578b\u5185\u5bb9\u8f6c\u6362\u5931\u8d25\u3002")),!0):301201==E?(D().showError(ka.get("extractDataFailToRefresh","\u51c6\u5907\u6570\u636e\u5931\u8d25\uff0c\u8bf7\u5237\u65b0\u51fa\u6570\u636e\u518d\u8fdb\u884c\u8be5\u64cd\u4f5c\u3002")),!0):!1},D=function(){k||(k=new v,k.getJqUi().appendTo($(document.body)));
return k}})})();
//qingVersionTag: 20250324