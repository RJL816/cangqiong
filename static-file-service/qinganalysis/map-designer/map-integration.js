var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(A,L,O){A instanceof String&&(A=String(A));for(var X=A.length,w=0;w<X;w++){var H=A[w];if(L.call(O,H,w,A))return{i:w,v:H}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(A,L,O){if(A==Array.prototype||A==Object.prototype)return A;A[L]=O.value;return A};$jscomp.getGlobal=function(A){A=["object"==typeof globalThis&&globalThis,A,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var L=0;L<A.length;++L){var O=A[L];if(O&&O.Math==Math)return O}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(A,L){var O=$jscomp.propertyToPolyfillSymbol[L];if(null==O)return A[L];O=A[O];return void 0!==O?O:A[L]};
$jscomp.polyfill=function(A,L,O,X){L&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(A,L,O,X):$jscomp.polyfillUnisolated(A,L,O,X))};$jscomp.polyfillUnisolated=function(A,L,O,X){O=$jscomp.global;A=A.split(".");for(X=0;X<A.length-1;X++){var w=A[X];if(!(w in O))return;O=O[w]}A=A[A.length-1];X=O[A];L=L(X);L!=X&&null!=L&&$jscomp.defineProperty(O,A,{configurable:!0,writable:!0,value:L})};
$jscomp.polyfillIsolated=function(A,L,O,X){var w=A.split(".");A=1===w.length;X=w[0];X=!A&&X in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var H=0;H<w.length-1;H++){var ia=w[H];if(!(ia in X))return;X=X[ia]}w=w[w.length-1];O=$jscomp.IS_SYMBOL_NATIVE&&"es6"===O?X[w]:null;L=L(O);null!=L&&(A?$jscomp.defineProperty($jscomp.polyfills,w,{configurable:!0,writable:!0,value:L}):L!==O&&(void 0===$jscomp.propertyToPolyfillSymbol[w]&&(O=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[w]=$jscomp.IS_SYMBOL_NATIVE?
$jscomp.global.Symbol(w):$jscomp.POLYFILL_PREFIX+O+"$"+w),$jscomp.defineProperty(X,$jscomp.propertyToPolyfillSymbol[w],{configurable:!0,writable:!0,value:L})))};$jscomp.polyfill("Array.prototype.find",function(A){return A?A:function(L,O){return $jscomp.findInternal(this,L,O).v}},"es6","es3");
(function(){"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.map&&(com.kingdee.bos.qing.map={});"undefined"==typeof com.kingdee.bos.qing.map.common&&(com.kingdee.bos.qing.map.common={});var A=com.kingdee.bos.qing.map.common;A.MapFacade=function(w,H,ia,fa){L.call(this,w,H,ia,fa);var Q=this.protectedMethod;
this.loadMapGroupListWithSystem=function(){Q.remote("loadMapGroupListWithSystem",{})};this.loadMapGroupList=function(){Q.remote("loadMapGroupList",{})};this.loadMapGroupListForMoveMap=function(m){Q.remote("loadMapGroupListForMoveMap",{mapGroupId:m})};this.saveMapGroup=function(m){m={model:JSON.stringify(m.toJsonObject())};Q.remote("saveMapGroup",m)};this.updateMapGroup=function(m,x){Q.remote("updateMapGroup",{mapGroupId:m,mapGroupName:x})};this.getMapList=function(m){Q.remote("loadMapList",{mapGroupId:m})};
this.copyMap=function(m,x,ba){m={model:JSON.stringify(m.toJsonObject()),mapGroupId:x,mapName:ba};Q.remote("copyMap",m)};this.deleteMapGroup=function(m){Q.remote("deleteMapGroup",{mapGroupId:m})};this.saveOrUpdateMap=function(m){m={model:JSON.stringify(m.toJsonObject())};Q.remote("saveOrUpdateMap",m)};this.moveMap=function(m,x){m={model:JSON.stringify(m.toJsonObject()),mapGroupId:x};Q.remote("moveMap",m)};this.deleteMap=function(m){m={model:JSON.stringify(m.toJsonObject())};Q.remote("deleteMap",m)};
this.loadMapGroupWithSelectedMap=function(m){Q.remote("loadMapGroupWithSelectedMap",{refToId:m})};this.getOutsideReference=function(m,x){m={model:JSON.stringify(m.toJsonObject()),mapGroupName:x};Q.remote("getOutsideReference",m)};this.getMapForExport=function(){Q.remote("getMapForExport",{})};this.confirmForExportMap=function(m){m={mapList:JSON.stringify({exportMaps:m})};Q.remote("confirmForExportMap",m)};this.getExportedMapData=function(m){var x="Qing-"+(new Date).getTime()+".qing-map";X.downloadFile(x,
m)};this.getSelectableForImportMap=function(m){Q.remote("getSelectableForImportMap",{fileName:m})};this.importSelectedMap=function(m,x){m={fileName:m,mapList:JSON.stringify({exportMaps:x})};Q.remote("importSelectedMap",m)}};A.MapRemoteImpl=function(){O.call(this);var w;this.getRemoteUrl=function(){return w};this.setRemoteUrl=function(H){w=H}};var L,O,X;(function(){var w=com.kingdee.bos.qing.framework.common;L=w.AbstractFacade;O=w.AbstractRemoteCall;X=w.RemoteFramework})();A.Integration=new function(){var w,
H,ia=new A.MapRemoteImpl;this.getMonolayerMapDesignerEntrance=function(){return w};this.setMonolayerMapDesignerEntrance=function(fa){w=fa};this.getMultilayerMapDesignerEntrance=function(){return H};this.setMultilayerMapDesignerEntrance=function(fa){H=fa};this.getRemoteImpl=function(){return ia};this.setRemoteUrl=function(fa){ia.setRemoteUrl(fa)}}})();(function(){function A(){var w=this,H,ia,fa,Q,m=[];this.setName=function(x){H=x};this.getName=function(){return H};this.setMapId=function(x){ia=x};this.getMapId=function(){return ia};this.setMapType=function(x){fa=x};this.getMapType=function(){return fa};this.setParentNode=function(x){Q=x};this.getParentNode=function(){return Q};this.setChildren=function(x){m=x};this.getChildren=function(){return m};this.getSubNodeLevel=function(){for(var x=-1,ba=Q;ba;)x++,ba=ba.getParentNode();return x};this.toJsonObject=
function(){var x={},ba=Q&&Q.getName(),F=Q&&Q.getMapId();x.name=H;x.mapId=ia;x.mapType=fa;x.mapGroupName=ba;x.mapGroupID=F;return x};this.fromJsonObject=function(x){w.setName(x.name);w.setMapId(x.mapId);w.setMapType(x.mapType);if(x=x.children)for(var ba=0;ba<x.length;ba++){var F=x[ba];if(F){var da=new A;da.fromJsonObject(F);da.setParentNode(w);m.push(da)}}}}function L(){var w=this,H,ia,fa,Q="1";this.setMapGroupId=function(m){H=m};this.getMapGroupId=function(){return H};this.setMapGroupName=function(m){ia=
m};this.getMapGroupName=function(){return ia};this.setParentId=function(m){fa=m};this.getParentId=function(){return fa};this.setNameSpace=function(m){Q=m};this.getNameSpace=function(){return Q};this.fromJsonObject=function(m){w.setMapGroupId(m.mapGroupId);w.setMapGroupName(m.mapGroupName);w.setParentId(m.parentId);w.setNameSpace(m.nameSpace)};this.toJsonObject=function(){var m={};m.mapGroupId=H;m.mapGroupName=ia;m.parentId=fa;m.nameSpace=Q;return m}}function O(){var w=this,H,ia,fa,Q,m,x,ba,F="1",
da,r;this.copy=function(){var d=new O;d.setMapId(H);d.setMapGroupId(ia);d.setMapName(fa);d.setMapDescription(Q);d.setMapType(ba);d.setMapCreateDate(x);d.setMapModifyDate(m);d.setNameSpace(F);d.setVersion(da);d.setThumbnail(r);return d};this.setMapId=function(d){H=d};this.getMapId=function(){return H};this.setMapGroupId=function(d){ia=d};this.getMapGroupId=function(){return ia};this.setMapName=function(d){fa=d};this.getMapName=function(){return fa};this.setMapDescription=function(d){Q=d};this.getMapDescription=
function(){return Q};this.setMapCreateDate=function(d){x=d};this.getMapCreateDate=function(){return x};this.setMapModifyDate=function(d){m=d};this.getMapModifyDate=function(){return m};this.setMapType=function(d){ba=d};this.getMapType=function(){return ba};this.setNameSpace=function(d){F=d};this.getNameSpace=function(){return F};this.setVersion=function(d){da=d};this.getVersion=function(){return da};this.setThumbnail=function(d){r=d};this.getThumbnail=function(){return r};this.fromJsonObject=function(d){w.setMapId(d.mapId);
w.setMapGroupId(d.mapGroupId);w.setMapName(d.name);w.setMapDescription(d.mapDescription);w.setMapCreateDate(d.mapCreateDate);w.setMapModifyDate(d.mapModifyDate);w.setMapType(d.mapType);w.setNameSpace(d.nameSpace);w.setVersion(d.version);w.setThumbnail(d.thumbnail)};this.toJsonObject=function(){var d={};d.mapId=H;d.mapGroupId=ia;d.name=fa;d.mapDescription=Q;d.mapCreateDate=x;d.mapModifyDate=m;d.mapType=ba;d.nameSpace=F;d.version=da;d.thumbnail=r;return d}}"undefined"==typeof com&&(com={});"undefined"==
typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.map&&(com.kingdee.bos.qing.map={});"undefined"==typeof com.kingdee.bos.qing.map.model&&(com.kingdee.bos.qing.map.model={});var X=com.kingdee.bos.qing.map.model;X.MapGroupModel=L;X.MapModel=O;X.FolderNode=A;L.createInstance=function(w){if(w){var H=new L;H.fromJsonObject(w);return H}};L.SYSTEMT="0";
L.USER="1";O.createInstance=function(w){if(w){var H=new O;H.fromJsonObject(w);return H}};O.MAP="Map";O.ATLAS="Atlas";O.SYSTEMT="0";O.USER="1"})();(function(){function A(){function r(e){KTDefaultCellRender.call(this,e);var b=this;this.paintCellUI=function(a,t){var k=b.getCell().getValue(),u=k.getMapId(),G=k.getName();a=$("<div>");a.addClass("map-export-area-list-item");a.attr("table-name",u);a.attr("title",G);var ca=new fa,V=ca.getJqUi();V.attr("table-name-checkbox",u);V.addClass("map-export-area-list-item-checkbox");V.data("object",k);V.data("model",ca);u=$("<div>");u.addClass("map-export-area-list-item-text");u.text(G);a.append(V);a.append(u);
"0"==k.getSubNodeLevel()?((G=v[G])?(k=G.length==k.getChildren().length?!0:!1,ca.setChecked(k)):ca.setChecked(!1),ca.addCheckedListener(y)):(G=k.getParentNode().getName(),k=(G=v[G])&&-1!=G.indexOf(k.getMapId())?!0:!1,ca.setChecked(k),ca.addCheckedListener(T));t?(t=$(t),t.css("overflow","visible"),a.appendTo(t)):a.appendTo(jqDiv);com.kingdee.bos.qing.common.DomUtil.layoutCtrlWithLRTB(a,0,0,null,0,0,null)}}var d,v={},S=[];this.createJqUi=function(e){_arrAllMapGroup=e.getChildren();e=[];for(var b=0;b<
_arrAllMapGroup.length;b++)K(e,_arrAllMapGroup[b]);b=new KTable;var a=$(b.getUI());a.children().css("overflow-x","hidden");b.setCellRender(new r(b));b.setSyncUIWhenModelChanged(!1);b.addColumn().setWidth(400);for(var t=0;t<e.length;t++){var k=e[t],u=b.addRow();u.setHeight(23);var G=u.getCell(0);G.setValue(k);k=k.getSubNodeLevel();k=new KTCellTreeModel(k);k.setExpanded(!1);0<k.getLevel()&&u.setHide(!0);G.setTreeModel(k)}b.updateUI();d=a;d.addClass("map-export-area");return d};this.getSelectedMap=function(){return v};
this.getSelectedMapNode=function(){var e=[],b;for(b in v)for(var a=v[b],t=0;t<S.length;t++){var k=S[t].getMapId();-1!=a.indexOf(k)&&e.push(S[t].toJsonObject())}return e};var K=function(e,b){e.push(b);b=b.getChildren();S=S.concat(b);if(b)for(var a=0;a<b.length;a++)K(e,b[a])},y=function(e,b){if(b){b=e.getJqUi().data("object");var a=b.getName(),t=b.getChildren();e=e.isChecked();for(var k=null==v[a]?[]:v[a],u=0;u<t.length;u++){var G=t[u],ca=G.getMapId();e&&-1==k.indexOf(ca)&&(k=k.concat(ca),v[a]=k);q(G,
e)}e||delete v[a];q(b,e)}},T=function(e,b){if(b){b=e.getJqUi().data("object");var a=b.getMapId(),t=b.getParentNode().getName(),k=null==v[t]?[]:v[t];e.isChecked()?-1==k.indexOf(a)&&(k=k.concat(a),v[t]=k):(e=k.indexOf(a),k.splice(e,1),v[t]=k);e=b.getParentNode();t=e.getName();e=(null==v[t]?[]:v[t]).length==e.getChildren().length?!0:!1;q(b.getParentNode(),e)}},q=function(e,b){e=e.getMapId();(e=d.find("[table-name-checkbox='"+e+"']").data("model"))&&e.setChecked(b);return e}}function L(){function r(K){KTDefaultCellRender.call(this,
K);var y=this,T=this.paintCellUI;this.paintCellUI=function(e,b){y.getCurrentRowIdx()<ba.getHeadRowCount()?T(e,b):($(e),2==y.getCurrentColIdx()?q(e,y.getCellWidth(),y.getCellHeight(),y.getCurrentRow()):T(e,b))};var q=function(e,b,a,t){e=ba.createCtrlInCell(e,b,a,ia);e.setSelected(t.getUserObject().strategy);e.setItemModels(L.ALL_CONFLICTTYPE);e.setUserObject(t);e.setCustomPainter(function(k,u,G){switch(G){case L.ALL_CONFLICTTYPE[0]:k=x.get("ignore","\u5ffd\u7565");break;case L.ALL_CONFLICTTYPE[1]:k=
x.get("overwrite","\u8986\u76d6");break;case L.ALL_CONFLICTTYPE[2]:k=x.get("rename","\u91cd\u547d\u540d");break;default:k=""}G=$("<div>");G.text(k);G.appendTo(u)});e.addSelectedChangedListener(function(k,u,G){k.getUserObject().getUserObject().strategy=G})}}var d=this,v,S;this.getConflictMapList=function(){return S};this.getJqUi=function(K){v=ba.createTable();ba.bindTableListenerForCtrl(v);var y=new r(v);y.setOutsideVisible(!1);v.setCellRender(y);v.addColumns(3);v.getColumn(0).setWidth(200);v.getColumn(1).setWidth(200);
v.getColumn(2).setWidth(140);y=ba.createHeadRow(v);y.getCell(0).setValue(x.get("mapGroupName","\u5206\u7c7b\u540d\u79f0"));y.getCell(1).setValue(x.get("map","\u5730\u56fe"));y.getCell(2).setValue(x.get("strategy","\u5904\u7406\u7b56\u7565"));S=K;for(var T in K)S[T].strategy=L.ALL_CONFLICTTYPE[0];d.updateUi(K);ba.refresh(v);K=$(v.getUI());K.addClass("map-import-selection-table");return K};this.updateUi=function(K){ba.clearWithoutHead(v);ba.refresh(v);for(var y,T=0;T<K.length;T++){var q=K[T];y=ba.createRow(v);
y.setUserObject(q);y.getCell(0).setValue(q.mapGroupName);y.getCell(1).setValue(q.name);y.getCell(2).setValue(q.strategy)}ba.refresh(v)};this.refresh=function(){ba.refresh(v)}}function O(r){Q.call(this);var d=this,v=this.protectedMethod,S=[],K,y;this.setFunRefreshMapGroupList=function(q){y=q};this.addConfirmListener=function(q){S.push(q)};this.createUi=function(q,e){d.setSize(640,480);d.setPosition(window.innerWidth-640>>1,window.innerHeight-480>>1);v.setTitle(x.get("importMap","\u5bfc\u5165\u5730\u56fe"));
v.setContentPaneCreator(function(){var b=$("<div>");K=new A;var a=K.createJqUi(e);a.addClass("map-export-tree-selection-area");b.append(a);return b});v.setClosingChecker(d.isValidToAccepted,!0);v.setClosingAction(function(b){b&&(b=K.getSelectedMapNode(),0!=b.length&&T(q,b))});d.showDialog()};this.isValidToAccepted=function(q){0!=K.getSelectedMapNode().length?q(!0):(v.getMessageCurtain().showPrompt(x.get("noMapBeSelected","\u672a\u9009\u4e2d\u5730\u56fe\u3002")),q(!1))};var T=function(q,e){var b=new da(H.getRemoteImpl(),
function(a){a=a.conflictMap;if(0<a.length){$("<div>");for(var t=null,k=0;k<e.length;k++){var u=e[k].name,G=e[k].mapGroupName;if(null==t)for(var ca=0;ca<a.length;ca++)a[ca].name!=u&&(t=G)}k=e.length-a.length;u=new X;u.setFunRefreshMapGroupList(y);u.createUi(q,a,k,t);u.repaint()}else{for(k in e)t=e[k].mapGroupName;y&&y(t)}},function(a,t){return!1});b.setShowBlocking(!0);b.importSelectedMap(q,e)}}function X(){Q.call(this);var r=this,d=this.protectedMethod,v=[],S,K,y,T,q;this.setFunRefreshMapGroupList=
function(u){q=u};this.addConfirmListener=function(u){v.push(u)};this.createUi=function(u,G,ca,V){S=u;K=G;y=V;r.setSize(640,480);r.setPosition(window.innerWidth-640>>1,window.innerHeight-480>>1);d.setTitle(x.get("importMap","\u5bfc\u5165\u5730\u56fe"));d.setContentPaneCreator(function(){var na=$("<div>"),c=x.get("importSuccessPrompt","\u6210\u529f\u5bfc\u5165#1\u4e2a\u5730\u56fe\u3002\u4ee5\u4e0b\u5730\u56fe\u540d\u79f0\u51b2\u7a81\uff0c\u8bf7\u5904\u7406\u3002").replace("#1",ca);c=(new m(c)).getJqUi();
var B=e(x.get("allIgnore","\u5168\u90e8\u5ffd\u7565"),!0,b),z=e(x.get("allOverwrite","\u5168\u90e8\u8986\u76d6"),!0,a),l=e(x.get("allRename","\u5168\u90e8\u91cd\u547d\u540d"),!1,t);c.addClass("map-import-selection-prompt");B.addClass("map-import-selection-ignore-btn");z.addClass("map-import-selection-overwrite-btn");l.addClass("map-import-selection-rename-btn");na.append(c);na.append(B);na.append(z);na.append(l);T=new L;na.append(T.getJqUi(G));return na});d.setClosingChecker(r.isValidToAccepted,!0);
d.setClosingAction(function(na){});r.showDialog()};this.repaint=function(){T.refresh()};var e=function(u,G,ca){var V=$("<div>");V.text(u);V.addClass("map-import-conflict-all-operate");V.on("click",ca);G&&(u=$("<div>"),u.addClass("map-import-conflict-btn-split-line"),u.appendTo(V));return V},b=function(){for(var u in K)K[u].strategy=L.ALL_CONFLICTTYPE[0];T.updateUi(K)},a=function(){for(var u in K)K[u].strategy=L.ALL_CONFLICTTYPE[1];T.updateUi(K)},t=function(){for(var u in K)K[u].strategy=L.ALL_CONFLICTTYPE[2];
T.updateUi(K)};this.isValidToAccepted=function(u){k(S,K,u)};var k=function(u,G,ca){var V=[],na;for(na in G)"ignore"!=G[na].strategy&&(V=V.concat(G[na]));0==V.length?(ca(!0),null==y&&(y=G[0].mapGroupName),q&&q(y)):(G=new da(H.getRemoteImpl(),function(c){ca(!0);c=V[0].mapGroupName;q&&q(c)},function(c,B){return!1}),G.setShowBlocking(!0),G.importSelectedMap(u,V))}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos=
{});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.map&&(com.kingdee.bos.qing.map={});"undefined"==typeof com.kingdee.bos.qing.map.imexport&&(com.kingdee.bos.qing.map.imexport={});var w=com.kingdee.bos.qing.map.imexport;w.ExportMapDialog=function(){Q.call(this);var r=this,d=this.protectedMethod,v,S;this.setFolderNode=function(y){S=y};this.setMessageCurtain=function(y){};this.showExportDialog=function(){r.setSize(640,480);r.setPosition(window.innerWidth-
640>>1,window.innerHeight-480>>1);d.setTitle(x.get("exportMap","\u5bfc\u51fa\u5730\u56fe"));d.setContentPaneCreator(function(){var y=$("<div>");v=new A;var T=v.createJqUi(S);T.addClass("map-export-tree-selection-area");y.append(T);return y});d.setClosingChecker(r.isValidToAccepted,!0);d.setClosingAction(function(y){y&&(y=v.getSelectedMapNode(),K(y))});r.showDialog()};this.isValidToAccepted=function(y){var T=v.getSelectedMapNode();"[]"!=JSON.stringify(T)?y(!0):(d.getMessageCurtain().showPrompt(x.get("noMapBeSelected",
"\u672a\u9009\u4e2d\u5730\u56fe\u3002")),y(!1))};var K=function(y){var T=new da(H.getRemoteImpl(),function(q){(new da(H.getRemoteImpl())).getExportedMapData(q)},function(q,e){return!1});T.setShowBlocking(!0);T.confirmForExportMap(y)}};w.UploadPane=function(){var r,d,v;this.createJqUi=function(q,e){r=e;e=$("<div>");e.addClass("map-importing-exporting-main");var b=$(document.body),a=$("<div class='sa-ctrl-modallayer'>");a.appendTo(b);a.css("height",$(".map-manage").height());d=$("<progress value='0' max='100'>");
d.addClass("map-importing-upload-progress");var t=$("<div>");t.addClass("map-importing-exporting-text");t.text(x.get("uploading","\u6b63\u5728\u4e0a\u4f20\u4e2d\uff0c\u8bf7\u7a0d\u5019"));e.append(d);e.append(t);b.append(e);S(q,e,a)};this.setFunRefreshMapGroupList=function(q){v=q};var S=function(q,e,b){var a=new FormData;a.append("filename",q);q=new XMLHttpRequest;q.upload.addEventListener("progress",K,!1);q.addEventListener("error",y,!1);var t=com.kingdee.bos.qing.framework.common.RemoteFrameworkRegister.getUploadUrl();
q.open("post",t,!0);q.onload=function(k){200==this.status&&(k=JSON.parse(this.response),"number"==typeof k.errorCode&&3099003==k.errorCode?r.showError(k.errorMessage):T(k.data),e.remove(),b.remove())};q.send(a)},K=function(q){var e=d.get(0);q.lengthComputable&&(e.max=q.total,e.value=q.loaded)},y=function(q){_funErrorCallbackEvent&&_funErrorCallbackEvent(x.get("uploadFail","\u4e0a\u4f20\u5931\u8d25"))},T=function(q){var e=new da(H.getRemoteImpl(),function(b){var a=new F;a.fromJsonObject(b);0!=a.getChildren().length?
(b=new O(r),b.createUi(q,a),b.setFunRefreshMapGroupList(v)):r.showPrompt(x.get("noMapAndMapGroup","\u672a\u627e\u5230\u5730\u56fe\u5206\u7c7b\u548c\u5730\u56fe\u3002"))},function(b,a){return!1});e.setShowBlocking(!0);e.getSelectableForImportMap(q)}};var H,ia,fa,Q,m,x,ba,F,da;(function(){var r=com.kingdee.bos.qing.map.common;H=r.Integration;r=com.kingdee.bos.qing.ui.component;ia=r.ComboBox;fa=r.CheckBox;Q=r.AbstractModalDialog;m=r.Label;r=com.kingdee.bos.qing.framework.common;x=r.MultilanguageManager.createPackageAccessor(com.kingdee.bos.qing.map.ui);
r=com.kingdee.bos.qing.common.ui;ba=r.TableUtil;r=com.kingdee.bos.qing.map.model;F=r.FolderNode;r=com.kingdee.bos.qing.map.common;da=r.MapFacade})();L.ALL_CONFLICTTYPE=["ignore","overwrite","rename"]})();(function(){function A(){w||(w=com.kingdee.bos.qing.map.ui.Icons);return w}function L(){var F,da,r,d,v,S,K="\u4e2d\u56fd\u7701\u4efd\u793a\u610f\u56fe \u5317\u4eac\u5e02 \u5929\u6d25\u5e02 \u6cb3\u5317\u7701 \u5c71\u897f\u7701 \u5185\u8499\u53e4\u81ea\u6cbb\u533a \u8fbd\u5b81\u7701 \u5409\u6797\u7701 \u9ed1\u9f99\u6c5f\u7701 \u4e0a\u6d77\u5e02 \u6c5f\u82cf\u7701 \u6d59\u6c5f\u7701 \u5b89\u5fbd\u7701 \u798f\u5efa\u7701 \u6c5f\u897f\u7701 \u5c71\u4e1c\u7701 \u6cb3\u5357\u7701 \u6e56\u5317\u7701 \u6e56\u5357\u7701 \u5e7f\u4e1c\u7701 \u5e7f\u897f\u58ee\u65cf\u81ea\u6cbb\u533a \u6d77\u5357\u7701 \u91cd\u5e86\u5e02 \u56db\u5ddd\u7701 \u8d35\u5dde\u7701 \u4e91\u5357\u7701 \u897f\u85cf\u81ea\u6cbb\u533a \u9655\u897f\u7701 \u7518\u8083\u7701 \u9752\u6d77\u7701 \u5b81\u590f\u56de\u65cf\u81ea\u6cbb\u533a \u65b0\u7586\u7ef4\u543e\u5c14\u81ea\u6cbb\u533a \u9999\u6e2f\u7279\u522b\u884c\u653f\u533a \u6fb3\u95e8\u7279\u522b\u884c\u653f\u533a \u53f0\u6e7e\u7701".split(" ");
this.setParamPathPrefix=function(b){};this.getJqUi=function(){if(!F){F=$("<div>");F.addClass("select-map-dialog-content");da?(S=$("<div>"),S.addClass("map-selector-title"),S.text(H.get("mapGroup","\u5730\u56fe\u5206\u7c7b")),r=$("<div>"),r.addClass("dialog-map-group-container"),S.appendTo(F),r.appendTo(F),d||(d=$("<div>"),d.addClass("dialog-map-item-area"),d.appendTo(F))):y().appendTo(F);var b=da;r&&r.empty();d&&d.empty();y().appendTo(d);if(0==b.length)y().appendTo(r);else{var a=null,t=!1;for(i=0;i<
b.length;i++){var k=fa.createInstance(b[i]),u=new O;u.setMapGroupModel(k);u.setClickListener(T);u=u.getJqUi();v&&v.getMapGroupId()==k.getMapGroupId()&&(r.prop("scrollTop",u.prop("offsetTop")),u.addClass("dialog-map-group-selected"),u.click(),t=!0);0==i&&(a=u);u.appendTo(r)}!t&&a&&(a.find(".dialog-map-group-item-icon").removeClass("dialog-map-group-item-icon_on"),a.click())}}return F};this.setOldSelectedMap=function(b){b&&(v=Q.createInstance(b))};this.getSelectedMapModel=function(){return _oList.getSelecteds()[0]?
_oList.getSelecteds()[0]:v};this.getSelectedMapGroupModel=function(){return r.find(".dialog-map-group-selected").data("model")};this.setMessageCurtain=function(b){};this.setMapGroup=function(b){da=b};var y=function(){var b=$("<div>");b.addClass("no-data");b.text(H.get("noData","\u6682\u65e0\u6570\u636e"));return b},T=function(b){var a=$(b.currentTarget),t=a.data("model");b=t.getMapGroupId();(new m(x.getRemoteImpl(),function(k){A().background(F.find(".dialog-map-group-item-icon_on"),"icon_directory");
F.find(".dialog-map-group-item-icon_on").removeClass("dialog-map-group-item-icon_on");a.find(".dialog-map-group-item-icon").addClass("dialog-map-group-item-icon_on");A().background(a.find(".dialog-map-group-item-icon_on"),"icon_directory_on");d&&d.empty();r.find(".dialog-map-group-selected").removeClass("dialog-map-group-selected");a.addClass("dialog-map-group-selected");if(0==k.length){k=$("<div>");k.addClass("dialog-map-no-card-tips");var u=$("<div>");u.addClass("dialog-map-no-card-tips-bg");A().background(u,
"no-data");var G=$("<div>");G.addClass("dialog-map-no-card-tips-text");G.text(H.get("tips","\u6682\u65e0\u5730\u56fe"));u.appendTo(k);G.appendTo(k);k.appendTo(d)}else{u=[];var ca=!1;"\u7cfb\u7edf\u5730\u56fe"==t.getMapGroupName()&&"0"==t.getNameSpace()&&(ca=!0);G=0;if(ca)for(;u.length<k.length;)for(ca=0;ca<k.length;ca++){var V=Q.createInstance(k[ca]);if(K[G]==V.getMapName()){u.push(V);G++;break}}else for(ca=0;ca<k.length;ca++)V=Q.createInstance(k[ca]),u.push(V);_oList=new ba;_oList.setItemModels(u);
_oList.setCustomSelectedsPainter(e);_oList.setBorderVisible(!1);_oList.setCustomItemPainter(q);_oList.getJqUi().appendTo(d)}},function(k,u){return!1})).getMapList(b)},q=function(b,a){b.addClass("svg-thumbnail-container");b.css("background-color","white");b.on("click",function(u){v=a;u=$(u.currentTarget);d.find(".map-card-selected").removeClass("map-card-selected");u.addClass("map-card-selected")});v&&v.getMapId()==a.getMapId()&&b.addClass("map-card-selected");if(a.getNameSpace()==Q.SYSTEMT){var t=
$("<span>");t.text(H.get("preset","\u9884 \u7f6e"));t.addClass("map-preset-text");var k=$("<div>");k.addClass("map-preset-icon");A().background(k,"icon-preset-big");t.appendTo(b);k.appendTo(b)}t=$("<div>");k=a.getMapName();"\u4e2d\u56fd\u7701\u4efd\u793a\u610f\u56fe"==k&&a.getNameSpace()==Q.SYSTEMT&&(k=H.get("chinaProvince",k));t.attr("title",k);t.text(k);t.addClass("svg-thumbnail-name");t.appendTo(b);a.getThumbnail()?(t=$("<img>"),t.addClass("svg-thumbnail-item"),t.attr("src",com.kingdee.bos.qing.framework.common.RemoteFramework.getLoadImgUrl(a.getThumbnail(),
"map")),t.appendTo(b)):(t=$("<div>"),t.addClass("no-map-template"),t.text(H.get("noMapTemplate","\u672a\u914d\u7f6e\u5730\u56fe\u6a21\u677f")),t.appendTo(b))},e=function(b,a){(b=a[0])&&b.css("background-color","rgb(255,255,255)");b&&b.data("model")}}function O(){var F,da,r;this.setClickListener=function(v){r=v};this.setMapGroupModel=function(v){da=v};this.getJqUi=function(){F||d();return F};var d=function(){F=$("<div>");F.addClass("dialog-map-group-item");F.data("model",da);var v=$("<div>");v.addClass("dialog-map-group-item-icon");
A().background(v,"icon_directory");var S=$("<span>");S.addClass("dialog-map-group-item-text");var K=da.getMapGroupName();"\u7cfb\u7edf\u5730\u56fe"==K&&da.getNameSpace()==fa.SYSTEMT&&(K=H.get("systemMapGroup","\u7cfb\u7edf\u5730\u56fe"));if(da.getNameSpace()==fa.SYSTEMT){var y=$("<span>");y.addClass("dialog-map-group-preset-text");y.text(H.get("preset","\u9884\u7f6e"));y.css({overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"});var T=$("<div>");T.addClass("dialog-map-group-preset-icon");
T.attr("title",H.get("preset","\u9884\u7f6e"));A().background(T,"icon-preset-small");y.appendTo(F);T.appendTo(F)}S.text(K);S.attr("title",K);v.appendTo(F);S.appendTo(F);F.on("click",function(q){r&&r(q)})}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.map&&(com.kingdee.bos.qing.map={});"undefined"==
typeof com.kingdee.bos.qing.map.integration&&(com.kingdee.bos.qing.map.integration={});var X=com.kingdee.bos.qing.map.integration;X.MapSelectorDialog=function(){var F,da,r;this.setParamPathPrefix=function(S){r=S};this.showDialog=function(S,K){var y=S&&S.getRefToId();(new m(x.getRemoteImpl(),function(T){var q=$(document.body),e=$("<div class='sa-ctrl-common-modallayer'>");e.appendTo(q);var b=new ia(e),a=H.get("mapTemplate","\u9009\u62e9\u5730\u56fe\u6a21\u677f");b.setTitle(a);a=q.prop("clientWidth");
q=q.prop("clientHeight");a=a-785>>1;q=q-560>>1;var t=function(){b.destroy();e.remove()};da=b.getMessageCurtain();b.setBounds(a,q,785,560);b.setToolbarVisible(!1);b.setContent(d(T,y));b.addClosingListener(function(k,u){u?(oMapModel=F.getSelectedMapModel(),oMapModel.getMapId()?v(K,t):da.showPrompt(H.get("selectMapTemplateCurtain","\u8bf7\u9009\u62e9\u5730\u56fe\u6a21\u677f\u3002"))):t()});b.showFooterPane()},function(){return!1})).loadMapGroupWithSelectedMap(y)};var d=function(S,K){K=S.mapGroup;S=S.selectedMap;
F=new L;F.setParamPathPrefix(r);F.setMapGroup(K);F.setOldSelectedMap(S);F.setMessageCurtain(da);return F.getJqUi()},v=function(S,K){var y=F.getSelectedMapModel(),T=F.getSelectedMapGroupModel().getMapGroupName();(new m(x.getRemoteImpl(),function(q){K&&K();var e=new com.kingdee.bos.qing.core.model.OutsideReference;e.fromJsonObject(q);S(e)},function(q,e){if(7010006==q)return da.showPrompt(H.get("mapHadBeDeleted","\u5730\u56fe\u5df2\u88ab\u5220\u9664\u3002")),!0;if(7010007==q)return da.showPrompt(H.get("mapIsEmpty",
"\u672a\u914d\u7f6e\u5730\u56fe\u6a21\u677f\uff0c\u65e0\u6cd5\u4f7f\u7528\u3002")),!0;K&&K();return!1})).getOutsideReference(y,T)}};var w,H,ia,fa,Q,m,x,ba;(function(){var F=com.kingdee.bos.qing.framework.common;H=F.MultilanguageManager.createPackageAccessor(X);F=com.kingdee.bos.qing.ui.component;ia=F.Dialog;ba=F.List;F=com.kingdee.bos.qing.map.model;Q=F.MapModel;fa=F.MapGroupModel;F=com.kingdee.bos.qing.map.common;m=F.MapFacade;x=F.Integration})()})();(function(){function A(){var c,B,z;this.setClickListener=function(n){z=n};this.setGroupModel=function(n){B=n};this.getJqUi=function(){c||l();return c};var l=function(){c=$("<div>");c.addClass("map-group-item");c.data("model",B);var n=B.getMapGroupName();"\u7cfb\u7edf\u5730\u56fe"==n&&B.getNameSpace()==b.SYSTEMT&&(n=a.get("systemMapGroup","\u7cfb\u7edf\u5730\u56fe"));var M=$("<span>");M.addClass("map-group-name");M.text(n);M.attr("title",n);c.on("click",function(Y){z&&z(Y)});M.appendTo(c);B.getNameSpace()==
e.USER?(n=$("<span>"),n.addClass("edit-group-button"),n.attr("title",a.get("editMapGroup","\u7f16\u8f91\u5206\u7c7b")),V.backgroundWithHover(n,"btn-edit"),M=$("<span>"),M.addClass("delete-group-button"),M.attr("title",a.get("deleteMapGroup","\u5220\u9664\u5206\u7c7b")),V.backgroundWithHover(M,"btn-delete"),n.appendTo(c),M.appendTo(c)):(M.css("width","122px"),n=$("<span>"),n.text(a.get("preset","\u9884 \u7f6e")),n.addClass("map-group-preset-text"),M=$("<div>"),M.addClass("map-group-preset-icon"),V.background(M,
"icon-preset-small"),n.appendTo(c),M.appendTo(c))};this.editMapGroupName=function(n){_jqNameSpan.hide();_oNameTextField.getJqUi().show();_oNameTextField.requestFocus()}}function L(){var c,B,z;this.isSupported=function(){return!0};this.getMapType=function(){return c};this.getIconFileName=function(){return z};this.getDisplayName=function(){return B};this.createCardUi=function(l){throw Error("override me");};this.createMapModel=function(){throw Error("override me");};this.protectedMethod={setMapType:function(l){c=
l},setDisplayName:function(l){B=l},setIconFileName:function(l){z=l}}}function O(){L.call(this);var c=this.protectedMethod,B=this,z;c.setIconFileName("icon-map");c.setMapType(b.MAP);c.setDisplayName(a.get("monolayerMap","\u5730\u56fe"));this.setMessageCurtain=function(l){z=l};this.createCardUi=function(l){l=new w(l);l.setMessageCurtain(z);l.setIconFileName(B.getIconFileName());l.setMapTypeName(B.getDisplayName());return l};this.createMapModel=function(){var l=new b;l.setMapType(b.MAP);return l}}function X(c){var B=
this,z,l,n,M,Y,aa,D,I;this.setMessageCurtain=function(f){I=f};this.setCopySuccessCallback=function(f){D=f};this.setIconFileName=function(f){aa=f};this.getJqUi=function(){if(!z){z=$("<div>");z.addClass("map-card");z.on("click",J);var f=$("<div>");f.addClass("map-detail-container");var E=$("<span class='map-icon'>");V.background(E,aa);E.addClass("icon-test");l=$("<span>");l.addClass("map-name");var N=c.getMapName();"\u4e2d\u56fd\u7701\u4efd\u793a\u610f\u56fe"==N&&c.getNameSpace()==b.SYSTEMT&&(N=a.get("chinaProvince",
"\u4e2d\u56fd\u7701\u4efd\u793a\u610f\u56fe"));l.text(N);l.attr("title",N);var Z=$("<div>");Z.addClass("map-description-container");var ma=$("<span>");ma.addClass("map-description-title");ma.text(a.get("description","\u63cf\u8ff0\uff1a"));n=$("<span>");n.addClass("map-description-text");N=$("<div>");N.addClass("manage-icon-container");var ja=$("<div>");ja.addClass("operate-icon-container");var oa=c.getMapDescription();oa=""==oa||null==oa?a.get("noDescription","\u65e0"):ba.cutExceedCharacters(oa,62);
n.text(oa);n.attr("title",oa);oa=$("<div>");oa.addClass("map-create-date-container");var qa=$("<span>");qa.addClass("map-create-title");qa.text(a.get("updateDate","\u4fee\u6539\u65e5\u671f\uff1a"));M=$("<span>");M.addClass("map-create-date");M.text(c.getMapModifyDate());E.appendTo(f);l.appendTo(f);N.appendTo(f);ma.appendTo(Z);n.appendTo(Z);Z.appendTo(f);qa.appendTo(oa);M.appendTo(oa);oa.appendTo(f);f.appendTo(z);ja.appendTo(z);c.getNameSpace()!=b.USER&&(f=$("<span>"),f.text(a.get("preset","\u9884 \u7f6e")),
f.addClass("map-preset-text"),E=$("<div>"),E.addClass("map-preset-icon"),V.background(E,"icon-preset-big"),f.appendTo(z),E.appendTo(z));f=$("<span>");f.addClass("copy-map-icon operate-icon");V.backgroundWithHover(f,"btn-copy");f.attr("title",a.get("copy","\u590d\u5236"));f.appendTo(ja);c.getNameSpace()==b.USER&&(f=$("<span>"),f.addClass("move-map-icon operate-icon"),f.attr("title",a.get("move","\u79fb\u52a8")),V.backgroundWithHover(f,"btn-moving"),f.appendTo(ja));c.getNameSpace()==b.USER&&(ja=$("<span>"),
ja.addClass("edit-map-icon manage-icon"),ja.attr("title",a.get("edit","\u7f16\u8f91")),V.backgroundWithHover(ja,"btn-edit"),ja.appendTo(N),ja=$("<span>"),ja.addClass("delete-map-icon manage-icon"),ja.attr("title",a.get("deleteMap","\u5220\u9664")),V.backgroundWithHover(ja,"btn-delete"),ja.appendTo(N))}return z};this.setMapTypeName=function(f){Y=f};this.getMapTypeName=function(){return Y};this.setMapName=function(f){l&&l.text(f)};this.setMapDescription=function(f){n&&n.text(f)};this.getMapCopyDialogCreator=
function(f){throw Error("override me");};this.getMapDelDialogCreator=function(f){throw Error("override me");};var J=function(f){var E=$(f.target);f=E.hasClass("delete-map-icon");var N=E.hasClass("edit-map-icon"),Z=E.hasClass("move-map-icon");E=E.hasClass("copy-map-icon");if(f)R();else if(N)P();else if(Z)W();else if(E)C();else if(c.getMapType()==b.MAP){if(f=r.getMonolayerMapDesignerEntrance())N=c.getMapId(),Z=c.getMapName(),E=c.getNameSpace()==b.USER?!0:!1,f(N,Z,E)}else I.showPrompt(a.get("expect",
"\u656c\u8bf7\u671f\u5f85\u3002"))},C=function(){(new d(r.getRemoteImpl(),function(f){var E=B.getMapCopyDialogCreator(c);E.setMapTypeName(Y);for(var N=[],Z=0;Z<f.length;Z++)N.push(e.createInstance(f[Z]));E.setAllMapGroupModel(N);E.addSuccessCallback(function(ma){ma=b.createInstance(ma);var ja=ma.getMapGroupId();c.getMapGroupId()==ja&&D&&D(ma);ma=a.get("copyMapSuccess","\u590d\u5236\u5730\u56fe\u6210\u529f\u3002");I.showSuccess(ma,2E3)});E.createDialog().show()},function(f,E){return!1})).loadMapGroupList()},
P=function(){var f=new Q(c);f.setMapTypeName(Y);f.addSuccessCallback(function(E){var N=E.getMapName();E=E.getMapDescription();c.setMapName(N);c.setMapDescription(E);l.text(N);l.attr("title",N);N=""==E||null==E?a.get("noDescription","\u65e0"):ba.cutExceedCharacters(E,62);n.text(N);n.attr("title",N);N=a.get("editSuccess","\u7f16\u8f91#1\u6210\u529f\u3002").replace("#1",Y);I.showSuccess(N,2E3)});f.createDialog().show()},W=function(){(new d(r.getRemoteImpl(),function(f){if(0==f.length){var E=a.get("noGroup",
"\u6ca1\u6709\u53ef\u4ee5\u9009\u62e9\u7684\u5206\u7c7b\u3002");I.showPrompt(E,2E3)}else{E=[];for(var N=0;N<f.length;N++)E.push(e.createInstance(f[N]));f=new m(c);f.setAllMapGroupModel(E);f.setMapTypeName(Y);f.addSuccessCallback(function(){z.remove();var Z=a.get("moveSuccess","\u79fb\u52a8#1\u6210\u529f\u3002").replace("#1",Y);I.showSuccess(Z,2E3)});f.createDialog().show()}},function(f,E){return!1})).loadMapGroupListForMoveMap(c.getMapGroupId())},R=function(){var f=B.getMapDelDialogCreator(c);f.setMapTypeName(Y);
f.addSuccessCallback(function(){B.getJqUi().remove();var E=a.get("deleteMapSuccess","\u5220\u9664#1\u6210\u529f\u3002").replace("#1",Y);I.showSuccess(E,2E3)});f.createDialog().show()};this.protectedMethod={setAllEntranceType:function(f){},setMainEntranceType:function(f){}}}function w(c){X.call(this,c);c=this.protectedMethod;c.setAllEntranceType(7);c.setMainEntranceType(1);this.getMapCopyDialogCreator=function(B){return new fa(B)};this.getMapDelDialogCreator=function(B){return new x(B)}}function H(){this.createDialog=
function(){throw Error("override");}}function ia(c){H.call(this);var B=this,z=[400,300],l,n,M,Y=[],aa=!1,D;this.setAllMapGroupModel=function(C){D=C};this.setMapTypeName=function(C){l=C};this.addSuccessCallback=function(C){Y.push(C)};this.createDialog=function(){var C=$(document.body),P=$("<div class='sa-ctrl-common-modallayer'>");P.appendTo(C);var W=new v(P);W.setTitle(a.get("copyMap","\u590d\u5236#1").replace("#1",l));var R=z[0],f=z[1],E=C.prop("clientWidth");C=C.prop("clientHeight");var N=function(){W.destroy();
P.remove()};W.setBounds(E-R>>1,C-f>>1,R,f);W.setToolbarVisible(!1);W.setContent(B.createCopyMapPanel());W.addClosingListener(function(Z,ma){ma?J(Z.getMessageCurtain(),N):N()});W.showFooterPane();return W};this.createCopyMapPanel=function(){var C=$("<div>"),P=new y;P.setText(a.get("mapName","\u540d\u79f0"));P=P.getJqUi();n=new q;n.addEditedListener(function(){aa=!0});var W=n.getJqUi(),R=new y;R.setText(a.get("copyTo","\u590d\u5236\u5230"));R=R.getJqUi();M=new K;M.setItemModels(D);M.setSelected(D[0]);
M.setCustomPainter(function(E,N,Z){N.text(Z.getMapGroupName())});M.addSelectedChangedListener(function(E,N,Z){aa||I(Z.getMapGroupId())});I(D[0].getMapGroupId());var f=M.getJqUi();C.append(P);C.append(W);C.append(f);C.append(R);B.protectedCustomLayout(C,P,W,R,f);return C};this.protectedCustomLayout=function(C,P,W,R,f){G.layoutCtrl(P,20,20,80,23);G.layoutCtrl(W,110,20,200,23);G.layoutCtrl(R,20,85,80,23);G.layoutCtrl(f,110,85,200,23)};var I=function(C,P){P=c.getMapType();var W=new d(r.getRemoteImpl(),
function(R){for(var f=c.getMapName(),E=[],N=!1,Z=0,ma=R.length;Z<ma;Z++){var ja=b.createInstance(R[Z]).getMapName();ja==f?N=!0:0==ja.indexOf(f)&&E.push(ja)}if(N){R=1;for(Z=!1;!Z;){N=!1;for(Z=0;Z<E.length;Z++)if(E[Z]==f+"-"+R){R++;N=!0;break}Z=!N}f=f+"-"+R}n.setText(f)},function(R,f){return!1});W.setShowBlocking(!0);W.getMapList(C,P)},J=function(C,P){var W=M.getSelected().getMapGroupId(),R=$.trim(n.getText()),f;""!=R&&50<R.length?f=a.get("mapNameTooLong","\u540d\u79f0\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc750\u4e2a\u5b57\u7b26\u3002"):
""==R&&(f=a.get("mapNameCannotBeEmpty","#1\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a\u3002").replace("#1",l));f?C.showPrompt(f,2E3):(f=new d(r.getRemoteImpl(),function(E){for(var N=0,Z=Y.length;N<Z;N++){var ma=Y[N];ma&&ma(E)}P()},function(E,N){return 7010004==E?(E=a.get("duplicateNameInMapGroup","\u8be5\u5206\u7c7b\u4e0b\u5b58\u5728\u540c\u540d#1\u3002").replace("#1",l),C.showPrompt(E,2E3),!0):!1}),f.setShowBlocking(!0),B.protectedRequestCopyMap(f,R,W))};this.protectedRequestCopyMap=function(C,P,W){C.copyMap(c,
W,P)};this.protectedMethod={setSuggestSize:function(C){z=C}}}function fa(c){ia.call(this,c);this.protectedMethod.setSuggestSize([360,270])}function Q(c){H.call(this);var B=[400,300],z=[],l,n,M;this.setMapTypeName=function(D){l=D};this.addSuccessCallback=function(D){z.push(D)};this.createDialog=function(){var D=$(document.body),I=$("<div class='sa-ctrl-common-modallayer'>");I.appendTo(D);var J=new v(I);J.setSelectable(!0);var C=void 0!=c.getMapId()?a.get("editMap","\u7f16\u8f91\u5730\u56fe"):a.get("createMap",
"\u65b0\u5efa\u5730\u56fe");J.setTitle(C);C=B[0];var P=B[1],W=D.prop("clientWidth"),R=D.prop("clientHeight");J.setBounds(W-C>>1,R-P>>1,C,P);J.setToolbarVisible(!1);J.setContent(aa());J.showFooterPane();I.appendTo(D);var f=function(){J.destroy();I.remove()};J.addClosingListener(function(E,N){N?Y(f,E.getMessageCurtain()):f()});return J};var Y=function(D,I){var J=$.trim(n.getText()),C=$.trim(M.getText()),P;""!=J&&50<J.length?P=a.get("mapNameTooLong","\u540d\u79f0\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc750\u4e2a\u5b57\u7b26\u3002"):
""==J&&(P=a.get("mapNameCannotBeEmpty","\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a\u3002"));""!=C&&500<C.length&&(P=a.get("mapDescriptionTooLong","\u63cf\u8ff0\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7500\u4e2a\u5b57\u7b26\u3002"));if(P)I.showPrompt(P,2E3);else{var W=c.copy();W.setMapName(J);W.setMapDescription(C);J=new d(r.getRemoteImpl(),function(R){W.fromJsonObject(R);R=0;for(var f=z.length;R<f;R++){var E=z[R];E&&E(W)}D()},function(R,f){return 7010004==R?(R=a.get("mapNameExist","\u8be5#1\u540d\u79f0\u5df2\u5b58\u5728\u3002").replace("#1",
l),I.showPrompt(R,2E3),!0):!1});J.setShowBlocking(!0);J.saveOrUpdateMap(W)}},aa=function(){var D=$("<div>"),I=new y;I.setText(a.get("mapName","\u540d\u79f0"));I.setRequired(!0);I=I.getJqUi();n=new q;n.setText(c.getMapName());var J=n.getJqUi(),C=new y;C.setText(a.get("description","\u63cf\u8ff0"));C=C.getJqUi();M=new T;M.setText(c.getMapDescription());var P=M.getJqUi();I.appendTo(D);J.appendTo(D);C.appendTo(D);P.appendTo(D);G.layoutCtrl(I,0,0,70,23);G.layoutCtrl(J,70,0,280,23);G.layoutCtrl(C,0,48,
70,23);G.layoutCtrl(P,70,54,280,120);return D}}function m(c){H.call(this);var B=[],z=[400,300],l,n,M;this.setAllMapGroupModel=function(D){M=D};this.setMapTypeName=function(D){l=D};this.addSuccessCallback=function(D){B.push(D)};this.createDialog=function(){var D=$(document.body),I=$("<div class='sa-ctrl-common-modallayer'>");I.appendTo(D);var J=new v(I),C=a.get("moveMap","\u79fb\u52a8#1").replace("#1",l);J.setTitle(C);C=z[0];var P=z[1],W=D.prop("clientWidth");D=D.prop("clientHeight");var R=function(){J.destroy();
I.remove()};J.setBounds(W-C>>1,D-P>>1,C,P);J.setToolbarVisible(!1);J.setContent(Y());J.addClosingListener(function(f,E){E?aa(f.getMessageCurtain(),R):R()});J.showFooterPane();return J};var Y=function(){var D=$("<div>");D.addClass("move-map-panel");var I=new y;I.setText(a.get("moveTo","\u79fb\u52a8\u5230"));I=I.getJqUi();n=new K;n.setItemModels(M);n.setSelected(M[0]);n.setCustomPainter(function(C,P,W){P.text(W.getMapGroupName())});var J=n.getJqUi();I.appendTo(D);J.appendTo(D);G.layoutCtrl(I,25,50,
70,23);G.layoutCtrl(J,100,50,235,23);return D},aa=function(D,I){var J=n.getSelected().getMapGroupId(),C=c.getMapGroupId();J==C?I():(C=new d(r.getRemoteImpl(),function(P){P=0;for(var W=B.length;P<W;P++){var R=B[P];R&&R()}I()},function(P,W){return 7010004==P?(P=a.get("duplicateNameInMapGroup","\u8be5\u5206\u7c7b\u4e0b\u5b58\u5728\u540c\u540d\u5730\u56fe\u3002"),D.showPrompt(P,2E3),!0):!1}),C.setShowBlocking(!0),C.moveMap(c,J))}}function x(c){function B(){this.show=function(){var aa=a.get("comfirmToDeleteMap",
"\u786e\u5b9a\u8981\u5220\u9664\u5730\u56fe\u201c#2\u201d\u5417\uff1f");aa=aa.replace("#2",l.getMapName());var D=$(document.body),I=$("<div class='sa-ctrl-common-modallayer'>");I.appendTo(D);var J=new v(I);J.setTitle(a.get("operateConfirm","\u64cd\u4f5c\u786e\u8ba4"));var C=D.prop("clientWidth"),P=D.prop("clientHeight");J.setBounds(C-400>>1,P-300>>1,400,300);J.setToolbarVisible(!1);J.setContent(M(aa));J.addClosingListener(function(W,R){R&&Y();W.destroy();I.remove()});J.showFooterPane();I.appendTo(D)}}
H.call(this);var z=this,l=c,n=[];this.setMapTypeName=function(aa){};this.addSuccessCallback=function(aa){n.push(aa)};this.createDialog=function(){return new B};var M=function(aa){var D=$("<div>"),I=$("<span>");da.background(I,"msg-delete");var J=$("<span>");J.addClass("map-manage-deldialog-confirm-msg");J.text(aa);J.attr("title",aa);I.appendTo(D);J.appendTo(D);z.protectedCustomLayout(D,I,J);return D},Y=function(){var aa=new d(r.getRemoteImpl(),function(D){for(var I=0,J=n.length;I<J;I++){var C=n[I];
C&&C()}z.protectedDoThingAfterDeleteCard(D)},function(){return!1});aa.setShowBlocking(!0);z.protectedRequestDel(aa)};this.protectedDoThingAfterDeleteCard=function(aa){};this.protectedRequestDel=function(aa){aa.deleteMap(l)};this.protectedCustomLayout=function(aa,D,I){G.layoutCtrl(D,140,20,98,80);G.layoutCtrl(I,0,130,370,23)};this.protectedMethod={getGlobal:function(){return _oGlobal}}}function ba(){}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&
(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.map&&(com.kingdee.bos.qing.map={});"undefined"==typeof com.kingdee.bos.qing.map.ui&&(com.kingdee.bos.qing.map.ui={});var F=com.kingdee.bos.qing.map.ui;F.Main=function(){var c,B,z,l,n,M,Y,aa,D,I,J="\u4e2d\u56fd\u7701\u4efd\u793a\u610f\u56fe \u5317\u4eac\u5e02 \u5929\u6d25\u5e02 \u6cb3\u5317\u7701 \u5c71\u897f\u7701 \u5185\u8499\u53e4\u81ea\u6cbb\u533a \u8fbd\u5b81\u7701 \u5409\u6797\u7701 \u9ed1\u9f99\u6c5f\u7701 \u4e0a\u6d77\u5e02 \u6c5f\u82cf\u7701 \u6d59\u6c5f\u7701 \u5b89\u5fbd\u7701 \u798f\u5efa\u7701 \u6c5f\u897f\u7701 \u5c71\u4e1c\u7701 \u6cb3\u5357\u7701 \u6e56\u5317\u7701 \u6e56\u5357\u7701 \u5e7f\u4e1c\u7701 \u5e7f\u897f\u58ee\u65cf\u81ea\u6cbb\u533a \u6d77\u5357\u7701 \u91cd\u5e86\u5e02 \u56db\u5ddd\u7701 \u8d35\u5dde\u7701 \u4e91\u5357\u7701 \u897f\u85cf\u81ea\u6cbb\u533a \u9655\u897f\u7701 \u7518\u8083\u7701 \u9752\u6d77\u7701 \u5b81\u590f\u56de\u65cf\u81ea\u6cbb\u533a \u65b0\u7586\u7ef4\u543e\u5c14\u81ea\u6cbb\u533a \u9999\u6e2f\u7279\u522b\u884c\u653f\u533a \u6fb3\u95e8\u7279\u522b\u884c\u653f\u533a \u53f0\u6e7e\u7701".split(" ");
this.createJqUi=function(){c=$("<div>");c.addClass("map-manage");var g=$("<div>");g.addClass("map-manage-container");var h=$(window);h.off("resize",sa);h.on("resize",sa);C(g);z=$("<div>");z.addClass("map-container");h=$(document).height();z.css("height",h);ta();z.appendTo(g);g.appendTo(c);qa();return c};var C=function(g){B=$("<div>");B.addClass("map-group-container");var h=$(document).height();B.css("min-height",h);var p=$("<div>");p.addClass("map-group-op");aa=$("<div>");aa.addClass("map-group-scrollbar");
aa.css({height:h-48,width:"100%"});h=$("<span>");h.addClass("map-group-title");h.text(a.get("mapGroup","\u5206\u7c7b"));var U=$("<span>");U.addClass("export-map");U.attr("title",a.get("exportMap","\u5bfc\u51fa\u5730\u56fe"));U.on("click",P);V.backgroundWithHover(U,"btn-export");var ha=$("<input type='file' id='uploadBtn'>");ha.addClass("import-map-file");ha.attr("accept",[".qing-map"]);var ka=$("<span>");ka.addClass("import-map");ka.attr("title",a.get("importMap","\u5bfc\u5165\u5730\u56fe"));ka.on("click",
function(){ha.click()});V.backgroundWithHover(ka,"btn-import");ha.on("change",W);var ea=$("<span>");ea.addClass("add-map-group");ea.attr("title",a.get("addMapGroup","\u6dfb\u52a0\u5206\u7c7b"));ea.on("click",va);V.backgroundWithHover(ea,"btn-add-classification");h.appendTo(p);U.appendTo(p);ka.appendTo(p);ea.appendTo(p);ha.appendTo(p);p.appendTo(B);aa.appendTo(B);B.appendTo(g)},P=function(){var g=new d(r.getRemoteImpl(),function(h){var p=new u;p.fromJsonObject(h);0<p.getChildren().length?(h=new t,
h.setFolderNode(p),h.setMessageCurtain(la()),h.showExportDialog()):la().showPrompt(a.get("noMapForExport","\u6ca1\u6709\u53ef\u4f9b\u5bfc\u51fa\u7684\u5730\u56fe\u3002"),2E3)},function(h,p){return!1});g.setShowBlocking(!0);g.getMapForExport()},W=function(){var g=c.find("#uploadBtn").get(0).files[0];if(g){var h=g.name,p=g.size,U=h.lastIndexOf(".");h=h.substring(U+1,h.length).toLowerCase();c.find("#uploadBtn").val("");"qing-map"!=h?la().showPrompt(a.get("fileTypeIncorrect","\u6587\u4ef6\u7c7b\u578b\u4e0d\u6b63\u786e\uff0c\u8bf7\u91cd\u65b0\u4e0a\u4f20\u3002"),
2E3):0==p?la().showPrompt(a.get("uploadFileIsNull","\u4e0a\u4f20\u7684\u6587\u4ef6\u4e3a\u7a7a\uff0c\u8bf7\u91cd\u65b0\u4e0a\u4f20\u3002"),2E3):104857600<=p?la().showPrompt(a.get("fileTooLarge","\u6587\u4ef6\u592a\u5927\uff0c\u8bf7\u91cd\u65b0\u4e0a\u4f20\u3002"),2E3):(p=new k,p.createJqUi(g,la()),p.setFunRefreshMapGroupList(R))}},R=function(g){B.find(".map-group-item").remove();qa(g)},f=function(g){var h=$(g.target);if(!(0<$(g.currentTarget).find(".add-group-input").length)){var p=h.hasClass("edit-group-button"),
U=h.hasClass("delete-group-button");h=h.hasClass("add-group-input");p?E(g):U?ma(g):h||(g=$(g.currentTarget),g.hasClass("map-group-selected")||($(B).find(".map-group-selected").removeClass("map-group-selected"),g.addClass("map-group-selected"),g=g.data("model"),z.empty(),g.getNameSpace()==e.USER&&ta(),wa(g)))}},E=function(g){g=$(g.target);n=g.parent();var h=n.data("model").getMapGroupName();g.parent().empty();Y=new q;Y.setText(h);Y.addBlurListener(function(p){N()});Y.addAcceptableListener(function(p,
U){U&&N()});l=Y.getJqUi();l.addClass("add-group-input");l.appendTo(n);Y.requestFocus()},N=function(){var g=n.data("model"),h=g.getMapGroupName(),p=Y.getText();if(0==$.trim(p).length)Z(h),la().showPrompt(a.get("mapGroupNameCanNotEmpty","\u5206\u7c7b\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a\u3002"));else if(50<$.trim(p).length)Z(h),la().showPrompt(a.get("mapGroupNameToLong","\u5206\u7c7b\u540d\u79f0\u4e0d\u80fd\u8d85\u8fc750\u4e2a\u5b57\u7b26\u3002"));else{var U=g.getMapGroupId();p==h?Z(h):(new d(r.getRemoteImpl(),
function(ha){Z(p);g.setMapGroupName(p);n.data("model",g);la().showSuccess(a.get("successToUpdateMapGroup","\u66f4\u65b0\u5206\u7c7b\u540d\u79f0\u6210\u529f\u3002"))},function(ha,ka){return 7010002==ha?(la().showPrompt(a.get("mapGroupDuplicateName","\u5206\u7c7b\u540d\u79f0\u5df2\u5b58\u5728\u3002")),Z(h),!0):!1})).updateMapGroup(U,p)}},Z=function(g){l&&l.remove();l=null;var h=$("<span>");h.addClass("map-group-name");h.text(g);h.attr("title",g);g=$("<span>");g.addClass("edit-group-button");g.attr("title",
a.get("editMapGroup","\u7f16\u8f91\u5206\u7c7b"));V.backgroundWithHover(g,"btn-edit");var p=$("<span>");p.addClass("delete-group-button");p.attr("title",a.get("deleteMapGroup","\u5220\u9664\u5206\u7c7b"));V.backgroundWithHover(p,"btn-delete");h.appendTo(n);g.appendTo(n);p.appendTo(n)},ma=function(g){var h=$(g.currentTarget).data("model"),p=$(document.body),U=$("<div class='sa-ctrl-common-modallayer'>");U.appendTo(p);var ha=new v(U);ha.setTitle(a.get("operateConfirm","\u64cd\u4f5c\u786e\u8ba4"));var ka=
p.prop("clientWidth"),ea=p.prop("clientHeight");ha.setBounds(ka-400>>1,ea-300>>1,400,300);ha.setToolbarVisible(!1);ha.setContent(ja(h));ha.addClosingListener(function(pa,xa){xa&&oa(g);pa.destroy();U.remove()});ha.showFooterPane();U.appendTo(p)},ja=function(g){var h=$("<div>"),p=$("<span>");V.background(p,"icon-question");var U=$("<span>");U.addClass("map-manage-deldialog-confirm-msg");g=a.get("confirmToDeleteMapGroup","\u786e\u5b9a\u8981\u5220\u9664\u5206\u7c7b\u201c#1\u201d\u5417\uff1f").replace("#1",
g.getMapGroupName());U.text(g);U.attr("title",g);p.appendTo(h);U.appendTo(h);G.layoutCtrl(p,150,20,65,78);G.layoutCtrl(U,0,130,370,23);return h},oa=function(g){var h=$(g.target).parent(),p=h.data("model");g=p.getMapGroupId();p=p.getMapGroupName();(new d(r.getRemoteImpl(),function(U){U=h.prev();var ha=h.next();h.hasClass("map-group-selected")&&(z.empty(),U&&U.hasClass("map-group-item")?U.click():U&&ha.hasClass("map-group-item")&&ha.click());h&&h.remove();la().showSuccess(a.get("successToDeleteMapGroup",
"\u5220\u9664\u5206\u7c7b\u6210\u529f\u3002"))},function(U,ha){return 7010003==U?(la().showPrompt(a.get("deleteMapBeforeDeleteMapGroup","\u5220\u9664\u5206\u7c7b\u524d\u8bf7\u5148\u5220\u9664\u5206\u7c7b\u4e0b\u7684\u5730\u56fe\u3002")),!0):7010005==U?(la().showPrompt(a.get("atLeastLeaveOneMapGroup","\u81f3\u5c11\u7559\u6709\u4e00\u4e2a\u5206\u7c7b\u3002")),!0):!1})).deleteMapGroup(g,p)},qa=function(g){(new d(r.getRemoteImpl(),function(h){if(null==h)h=a.get("createMapGroupFirst","\u60a8\u9700\u8981\u5148\u521b\u5efa\u4e00\u4e2a\u5206\u7c7b\u3002"),
la().showPrompt(h,2E3);else{for(var p=null,U=!1,ha=0;ha<h.length;ha++){var ka=new e;ka.fromJsonObject(h[ha]);var ea=new A;ea.setClickListener(f);ea.setGroupModel(ka);ea=ea.getJqUi();ea.appendTo(aa);g==ka.getMapGroupName()&&ka.getNameSpace()==e.USER&&(ea.click(),U=!0);ka.getNameSpace()!=e.USER||p||(p=ea)}p&&!U&&p.click()}},function(h,p){return!1})).loadMapGroupListWithSystem()},sa=function(){var g=$(document).height();B.css("min-height",g);var h=B.find(".map-group-op").height();aa.css("height",g-h);
z.css("height",g)},va=function(){M||(M=$("<div>"),M.addClass("map-group-item"),Y=new q,Y.addBlurListener(ua),l=Y.getJqUi(),l.addClass("add-group-input"),l.appendTo(M),Y.addAcceptableListener(function(g,h){h&&ua(g)}),M.appendTo(aa),aa.scrollTop(aa.scrollHeight),Y.requestFocus())},ua=function(g){g=g.getText().trim();if(0==g.length)M.remove(),M=null;else if(50<g.length)M.remove(),M=null,la().showPrompt(a.get("mapGroupNameToLong","\u5206\u7c7b\u540d\u79f0\u4e0d\u80fd\u8d85\u8fc750\u4e2a\u5b57\u7b26\u3002"));
else{var h=new e;h.setMapGroupName(g);(new d(r.getRemoteImpl(),function(p){h.setMapGroupId(p);p=new A;p.setClickListener(f);p.setGroupModel(h);p.getJqUi().appendTo(aa);M.remove();M=null;la().showSuccess(a.get("successToSaveMapGroup","\u4fdd\u5b58\u5206\u7c7b\u6210\u529f\u3002"))},function(p,U){return 7010002==p?(la().showPrompt(a.get("mapGroupDuplicateName","\u5206\u7c7b\u540d\u79f0\u5df2\u5b58\u5728\u3002")),M.remove(),M=null,!0):!1})).saveMapGroup(h)}},la=function(){I||(I=new S,I.getJqUi().appendTo($("body")));
return I},wa=function(g){D=g;var h=g.getMapGroupId(),p=new d(r.getRemoteImpl(),function(U){var ha=[],ka=!1;"\u7cfb\u7edf\u5730\u56fe"==g.getMapGroupName()&&"0"==g.getNameSpace()&&(ka=!0);if(ka){ka={};for(var ea=0;ea<U.length;ea++){var pa=b.createInstance(U[ea]);ka[pa.getMapName()]=pa}for(ea=0;ea<J.length;ea++)(pa=ka[J[ea]])&&ha.push(pa)}else for(ea=0;ea<U.length;ea++)pa=b.createInstance(U[ea]),ha.push(pa);for(ea=0;ea<ha.length;ea++)pa=ha[ea],ra(pa).appendTo(z)},function(U,ha){return!1});p.setShowBlocking(!0);
p.getMapList(h)},ra=function(g){var h=na.getInstance(g.getMapType());h.setMessageCurtain(la());g=h.createCardUi(g);g.setCopySuccessCallback(function(p){ra(p).insertAfter($(z).children(".add-map-card"))});return g.getJqUi()},ta=function(){var g=$("<div>");g.addClass("add-map-card");var h=$("<div>");h.addClass("add-map-icon");V.background(h,"icon-addcard");h.appendTo(g);h=$("<span>");h.addClass("add-map-text");h.text(a.get("create","\u65b0\u5efa"));h.appendTo(g);g.on("click",function(){var p=na.getInstance(b.MAP);
D?ya(p):(p=a.get("createMapGroupFirst","\u60a8\u9700\u8981\u5148\u521b\u5efa\u4e00\u4e2a\u5206\u7c7b\u3002"),la().showPrompt(p,2E3))});g.appendTo(z)},ya=function(g){var h=g.createMapModel();h.setMapGroupId(D.getMapGroupId());h=new Q(h);h.setMapTypeName(g.getDisplayName());h.addSuccessCallback(function(p){ra(p).insertAfter($(z).children(".add-map-card"));p=a.get("createMapSuccess","\u65b0\u5efa\u5730\u56fe\u6210\u529f\u3002");la().showSuccess(p,2E3)});h.createDialog().show()}};var da,r,d,v,S,K,y,T,
q,e,b,a,t,k,u,G,ca;(function(){var c=com.kingdee.bos.qing.ui.component;v=c.Dialog;S=c.MessageCurtain;K=c.ComboBox;y=c.Label;T=c.TextArea;q=c.TextField;da=c.Icons;c=com.kingdee.bos.qing.common;G=c.DomUtil;c=com.kingdee.bos.qing.framework.common;a=c.MultilanguageManager.createPackageAccessor(F);ca=c.AbstractIcons;c=com.kingdee.bos.qing.map.model;b=c.MapModel;e=c.MapGroupModel;u=c.FolderNode;c=com.kingdee.bos.qing.map.common;d=c.MapFacade;r=c.Integration;c=com.kingdee.bos.qing.map.imexport;t=c.ExportMapDialog;
k=c.UploadPane})();F.Icons=new function(){ca.call(this);var c=this.protectedMethod;this.protectedInit=function(z,l){z=com.kingdee.bos.qing.map.ComboIcon;if(!z)throw Error("com.kingdee.bos.qing.map.ComboIcon not found.");z.define(l,"map-integration");l.setGap(1);l.setStartPosition(1,1);l.setIconSize(16,16);B(0,0,"btn-add-classification");B(0,1,"btn-import");B(0,2,"btn-export");B(0,3,"btn-edit");B(0,4,"btn-delete");B(0,5,"btn-moving");B(0,6,"btn-copy");l.setStartPosition(1,69);l.setIconSize(50,50);
c.registIcon(0,0,"icon-addcard");c.registIcon(0,1,"icon-preset-big");l.setStartPosition(1,120);l.setIconSize(36,36);c.registIcon(0,0,"icon-map");c.registIcon(0,1,"icon-preset-small");l.setStartPosition(207,78);l.setIconSize(65,78);c.registIcon(0,0,"icon-question");z.define(l,"map-integration-sprite");l.setGap(1);l.setStartPosition(1,1);l.setIconSize(17,15);c.registIcon(0,0,"icon_directory");c.registIcon(1,0,"icon_directory_on");l.setStartPosition(1,41);l.setIconSize(16,16);c.registIcon(0,0,"icon_select");
z.define(l,"no-data");l.setStartPosition(0,0);l.setGap(0);l.setIconSize(220,220);c.registIcon(0,0,"no-data")};var B=function(z,l,n){c.registIcon(z,l,n+"_hover");c.registIcon(z+1,l,n)}};var V=F.Icons;var na=new function(){var c,B=[],z=[O],l=function(){c={};for(var n=0,M=z.length;n<M;n++){var Y=new z[n];Y.isSupported()&&(B.push(Y),c[Y.getMapType()]=Y)}};this.getInstance=function(n){!c&&l();n=c[n];if(!n)throw Error("Unknown theme type");return n};this.getAllInstance=function(){!c&&l();return B}};X.ENTRANCE_ANALYSIS=
1;X.ENTRANCE_SQUARE=2;X.ENTRANCE_DATAMODELING=4;X.ENTRANCE_DASHBOARD=8;X.ENTRANCE_PROGRAMABLECARD=16;ba.cutExceedCharacters=function(c,B){var z=0,l=0;if(c.replace(/[^\x00-\xff]/g,"**").length>B)for(var n=0;n<c.length;n++)if(z<B)if(/^[\u0000-\u00ff]$/.test(c.charAt(n)))if(z+1<B)z+=1,l++;else break;else if(z+2<B)z+=2,l++;else break;return 0==l?c:c.substring(0,l)+"..."}})();
//qingVersionTag: 20250324