var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.checkStringArgs=function(f,H,D){if(null==f)throw new TypeError("The 'this' value for String.prototype."+D+" must not be null or undefined");if(H instanceof RegExp)throw new TypeError("First argument to String.prototype."+D+" must not be a regular expression");return f+""};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;
$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(f,H,D){if(f==Array.prototype||f==Object.prototype)return f;f[H]=D.value;return f};
$jscomp.getGlobal=function(f){f=["object"==typeof globalThis&&globalThis,f,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var H=0;H<f.length;++H){var D=f[H];if(D&&D.Math==Math)return D}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(f,H){var D=$jscomp.propertyToPolyfillSymbol[H];if(null==D)return f[H];D=f[D];return void 0!==D?D:f[H]};$jscomp.polyfill=function(f,H,D,R){H&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(f,H,D,R):$jscomp.polyfillUnisolated(f,H,D,R))};
$jscomp.polyfillUnisolated=function(f,H,D,R){D=$jscomp.global;f=f.split(".");for(R=0;R<f.length-1;R++){var J=f[R];if(!(J in D))return;D=D[J]}f=f[f.length-1];R=D[f];H=H(R);H!=R&&null!=H&&$jscomp.defineProperty(D,f,{configurable:!0,writable:!0,value:H})};
$jscomp.polyfillIsolated=function(f,H,D,R){var J=f.split(".");f=1===J.length;R=J[0];R=!f&&R in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var fa=0;fa<J.length-1;fa++){var ya=J[fa];if(!(ya in R))return;R=R[ya]}J=J[J.length-1];D=$jscomp.IS_SYMBOL_NATIVE&&"es6"===D?R[J]:null;H=H(D);null!=H&&(f?$jscomp.defineProperty($jscomp.polyfills,J,{configurable:!0,writable:!0,value:H}):H!==D&&(void 0===$jscomp.propertyToPolyfillSymbol[J]&&(D=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[J]=
$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(J):$jscomp.POLYFILL_PREFIX+D+"$"+J),$jscomp.defineProperty(R,$jscomp.propertyToPolyfillSymbol[J],{configurable:!0,writable:!0,value:H})))};$jscomp.polyfill("String.prototype.startsWith",function(f){return f?f:function(H,D){var R=$jscomp.checkStringArgs(this,H,"startsWith");H+="";var J=R.length,fa=H.length;D=Math.max(0,Math.min(D|0,R.length));for(var ya=0;ya<fa&&D<J;)if(R[D++]!=H[ya++])return!1;return ya>=fa}},"es6","es3");
$jscomp.findInternal=function(f,H,D){f instanceof String&&(f=String(f));for(var R=f.length,J=0;J<R;J++){var fa=f[J];if(H.call(D,fa,J,f))return{i:J,v:fa}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(f){return f?f:function(H,D){return $jscomp.findInternal(this,H,D).v}},"es6","es3");$jscomp.polyfill("Object.is",function(f){return f?f:function(H,D){return H===D?0!==H||1/H===1/D:H!==H&&D!==D}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(f){return f?f:function(H,D){var R=this;R instanceof String&&(R=String(R));var J=R.length;D=D||0;for(0>D&&(D=Math.max(D+J,0));D<J;D++){var fa=R[D];if(fa===H||Object.is(fa,H))return!0}return!1}},"es7","es3");$jscomp.polyfill("String.prototype.includes",function(f){return f?f:function(H,D){return-1!==$jscomp.checkStringArgs(this,H,"includes").indexOf(H,D||0)}},"es6","es3");
(function(){function f(){var v=this,K,h,ka,T,da,d,Ea,Aa;this.getFileSize=function(){return Aa};this.setFileSize=function(B){Aa=B};this.getId=function(){return K};this.setId=function(B){K=B};this.getName=function(){return h};this.setName=function(B){h=B};this.getConfigId=function(){return ka};this.setConfigId=function(B){ka=B};this.getPublishId=function(){return T};this.setPublishId=function(B){T=B};this.getSendEmailsStatus=function(){return da};this.setSendEmailsStatus=function(B){da=B};this.getCreateTime=
function(){return d};this.setCreateTime=function(B){d=B};this.getCreateFormatTime=function(){return Ea};this.setCreateFormatTime=function(B){Ea=B};this.fromJsonObject=function(B){B&&(v.setId(B.id),v.setName(B.name),v.setConfigId(B.configId),v.setPublishId(B.publishId),v.setCreateTime(B.createTime),v.setCreateFormatTime(B.createFormatTime),v.setSendEmailsStatus(B.sendEmailsStatus),v.setFileSize(B.fileSize))};this.toJsonObject=function(){var B={};B.id=K;B.name=h;B.configId=ka;B.publishId=T;B.createTime=
d;B.sendEmailsStatus=da;B.fileSize=Aa;return B}}function H(v,K,h,ka,T){this.getRegExp=function(){return v};this.getSmtpHost=function(){return K};this.isSSL=function(){return ka};this.getPort=function(){return T};this.getSendType=function(){return h}}function D(){var v=this,K,h,ka,T,da,d,Ea,Aa;this.getId=function(){return K};this.setId=function(B){K=B};this.getName=function(){return h};this.setName=function(B){h=B};this.getAccount=function(){return ka};this.setAccount=function(B){ka=B};this.getPwd=
function(){return T};this.setPwd=function(B){T=B};this.getSmtpHost=function(){return da};this.setSmtpHost=function(B){da=B};this.isSSL=function(){return d};this.setIsSSL=function(B){d=B};this.getPort=function(){return Ea};this.setPort=function(B){Ea=B};this.setSendType=function(B){Aa=B};this.getSendType=function(){return Aa};this.doCheck=function(){if(!$.trim(h))return N.get("emailNameEmpty","\u8bf7\u8f93\u5165\u540d\u79f0\u3002");if(100<h.length)return N.get("emailNameTooLong","\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7100\u4e2a\u5b57\u7b26\u3002");
if(!$.trim(da))return N.get("smtpHostEmpty","\u8bf7\u8f93\u5165\u90ae\u7bb1\u670d\u52a1\u5668smtp\u3002");if(100<da.length)return N.get("smtpHostTooLong","\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7100\u4e2a\u5b57\u7b26\u3002");if($.trim(ka)){if(!RegExp("^[A-Za-z0-9._-\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+([.][a-zA-Z0-9._-]+)$").test(ka))return N.get("accountFormatError","\u90ae\u7bb1\u5730\u5740\u683c\u5f0f\u4e0d\u6b63\u786e\u3002");if(100<ka.length)return N.get("accountTooLong","\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7100\u4e2a\u5b57\u7b26\u3002")}else return N.get("accountEmpty",
"\u8bf7\u8f93\u5165\u90ae\u7bb1\u5730\u5740\u3002");return $.trim(T)?100<T.length?N.get("pwdTooLong","\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7100\u4e2a\u5b57\u7b26\u3002"):""===d?N.get("isSSLEmpty","\u8bf7\u8f93\u5165\u662f\u5426SSL\u3002"):""===Ea?N.get("portEmpty","\u8bf7\u8f93\u5165\u7aef\u53e3\u3002"):(new RegExp(/^[0-9]*[1-9][0-9]*$/)).test(Ea)?6<Ea.length?N.get("portTooLong","\u7aef\u53e3\u8fc7\u957f\uff0c\u8bf7\u8f93\u5165\u957f\u5ea6\u5c11\u4e8e6\u7684\u6b63\u6574\u6570\u3002"):""===Aa?N.get("sendTypeEmpty",
"\u90ae\u4ef6\u53d1\u9001\u65b9\u5f0f\u4e0d\u80fd\u4e3a\u7a7a\u3002"):null:N.get("portMustNum","\u7aef\u53e3\u5fc5\u987b\u4e3a\u6b63\u6574\u6570\u3002"):N.get("pwdEmpty","\u8bf7\u8f93\u5165\u90ae\u7bb1\u5bc6\u7801/\u6388\u6743\u7801\u3002")};this.toJsonObject=function(){var B={};B.id=K;B.name=h;B.account=ka;B.pwd=T;B.smtpHost=da;B.isSSL=d;B.port=Ea;B.sendType=Aa;return B};this.fromJsonObject=function(B){B&&(v.setId(B.id),v.setName(B.name),v.setAccount(B.account),v.setPwd(B.pwd),v.setSmtpHost(B.smtpHost),
v.setIsSSL(B.isSSL),v.setPort(B.port),v.setSendType(B.sendType))}}function R(v,K){this.toString=function(){return v};this.getValue=function(){return K}}function J(){var v=this,K,h,ka,T,da;this.getName=function(){return K};this.setName=function(d){K=d};this.getType=function(){return h};this.setType=function(d){h=d};this.getDateFormat=function(){return ka};this.setDateFormat=function(d){ka=d};this.getSerialStartValue=function(){return T};this.setSerialStartValue=function(d){T=d};this.getSerialStepSize=
function(){return da};this.setSerialStepSize=function(d){da=d};this.toString=function(){var d;J.TYPE_FIXED==h?d=K:J.TYPE_DATE==h?d=N.get("nameDateStr","#1-\u7cfb\u7edf\u65e5\u671f").replace("#1",K):J.TYPE_SERIALNUM==h&&(d=N.get("nameSerialStr","#1-\u6d41\u6c34\u53f7 \u8d77\u59cb\u503c\uff1a#2\uff0c\u6b65\u957f\uff1a#3").replace("#1",K).replace("#2",T).replace("#3",da));return d};this.check=function(){if(!$.trim(K))return N.get("nameEmpty","\u8bf7\u8f93\u5165\u540d\u79f0");if(100<K.length)return N.get("nameTooLong",
"\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7100\u4e2a\u5b57\u7b26");if(!h)return N.get("pleaseSelectRule","\u8bf7\u9009\u62e9\u89c4\u5219");if(J.TYPE_DATE==h){if(!ka)return N.get("pleaseSelectTheDateFormat","\u8bf7\u9009\u62e9\u65e5\u671f\u683c\u5f0f")}else if(J.TYPE_SERIALNUM==h){if(!T)return N.get("serialStartValueEmpty","\u6d41\u6c34\u53f7\u8d77\u59cb\u503c\u4e0d\u80fd\u4e3a\u7a7a");var d=new RegExp(/^[0-9]*[0-9][0-9]*$$/);if(!d.test(T))return N.get("serialStartValueBeNum","\u6d41\u6c34\u53f7\u8d77\u59cb\u503c\u5fc5\u987b\u4e3a\u81ea\u7136\u6570");
if(!da)return N.get("serialStepSizeEmpty","\u6d41\u6c34\u53f7\u6b65\u957f\u4e0d\u80fd\u4e3a\u7a7a");d=new RegExp(/^[0-9]*[1-9][0-9]*$$/);if(!d.test(da))return N.get("serialStepSizeBeNum","\u6d41\u6c34\u53f7\u6b65\u957f\u5fc5\u987b\u4e3a\u6b63\u6574\u6570")}return null};this.toJsonObject=function(){var d={};d.name=K;d.type=h;d.dateFormat=ka;d.serialStartValue=T;d.serialStepSize=da;return d};this.fromJsonObject=function(d){d&&(v.setName(d.name),v.setType(d.type),v.setDateFormat(d.dateFormat),v.setSerialStartValue(d.serialStartValue),
v.setSerialStepSize(d.serialStepSize))};this.copy=function(){var d=v.toJsonObject(),Ea=new J;Ea.fromJsonObject(d);return Ea}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.timedpush&&(com.kingdee.bos.qing.timedpush={});"undefined"==typeof com.kingdee.bos.qing.timedpush.model&&(com.kingdee.bos.qing.timedpush.model=
{});var fa=com.kingdee.bos.qing.timedpush.model,ya=com.kingdee.bos.qing.schedule.QingSchedule,N=com.kingdee.bos.qing.framework.common.MultilanguageManager.createPackageAccessor(com.kingdee.bos.qing.timedpush),Ma=com.kingdee.bos.qing.common.Util;fa.EmailSender=D;fa.EmailNameRule=J;fa.EmailConfig=function(){var v=this,K,h,ka,T,da,d,Ea=!0,Aa=!0,B=!0,Wa=!1,Sa,Ta,L,u,a,m,na,Z,xa,Oa,g=!0;this.setNoOperValueMap=function(b){xa=b};this.getNoOperValueMap=function(){return xa};this.setTotalPushRecordSize=function(b){Z=
b};this.getTotalPushRecordSize=function(){return Z};this.setsTotalPushRecordSizeToNoFormat=function(b){};this.getId=function(){return K};this.setId=function(b){K=b};this.getTagId=function(){return h};this.setTagId=function(b){h=b};this.getSchemaSourceType=function(){return ka};this.setSchemaSourceType=function(b){ka=b};this.getPublishSourceType=function(){return T};this.setPublishSourceType=function(b){T=b};this.getNameRule=function(){return da};this.setNameRule=function(b){da=b};this.getSchedule=
function(){return d};this.setSchedule=function(b){d=b};this.getScheduleSwitch=function(){return Ea};this.setScheduleSwitch=function(b){Ea=b};this.isAnonymousView=function(){return Aa};this.setIsAnonymousView=function(b){Aa=b};this.isHasPermission=function(){return B};this.setIsHasPermission=function(b){B=b};this.isSourceNameNotFound=function(){return Wa};this.setIsSourceNameNotFound=function(b){Wa=b};this.getSenderId=function(){return Sa};this.setSenderId=function(b){Sa=b};this.getReceivers=function(){return Ta};
this.setReceivers=function(b){Ta=b};this.getContent=function(){return L};this.setContent=function(b){L=b};this.getCreateTime=function(){return u};this.setCreateTime=function(b){u=b};this.getCreateFormatTime=function(){return a};this.setCreateFormatTime=function(b){a=b};this.getPublishSourceName=function(){return m};this.setPublishSourceName=function(b){m=b};this.getPublishSourceGroupName=function(){return na};this.setPublishSourceGroupName=function(b){na=b};this.getWarningRuleName=function(){return Oa};
this.setWarningRuleName=function(b){Oa=b};this.getWarningRuleStatus=function(){return g};this.setWarningRuleStatus=function(b){g=b};this.getSourceName=function(){var b=com.kingdee.bos.qing.publish.model.PublishSourceType,z="";m?z=N.get(T,T)+":"+m:T==b.SUBJECT?z=N.get("subjectDeleted","\u8be5\u4e1a\u52a1\u4e3b\u9898\u5df2\u88ab\u5220\u9664"):T==b.DASHBOARD&&(z=N.get("dashboardDeleted","\u8be5\u4eea\u8868\u677f\u5df2\u88ab\u5220\u9664"));return z};this.toJsonObject=function(){var b={};b.id=K;b.tagId=
h;b.schemaSourceType=ka;b.publishSourceType=T;da&&(b.nameRule=da.toJsonObject());d&&(b.schedule=d.toJsonObject());b.scheduleSwitch=Ea;b.isAnonymousView=Aa;b.isHasPermission=B;b.isSourceNameNotFound=Wa;b.senderId=Sa;b.receivers=Ta;b.content=L;b.createTime=u;b.publishSourceName=m;b.publishSourceGroupName=na;b.totalPushRecordSize=Z;var z;if(z=Z){var oa=z.substring(0,z.length-2),va="";z=va=z.indexOf("MB")?va+1048576*oa:va+1024*oa}else z=void 0;b.sTotalPushRecordSizeToNoFormat=z;b.noOperValueMap=xa;b.warningRuleName=
Oa;b.warningRuleStatus=g;return b};this.fromJsonObject=function(b){b&&(v.setId(b.id),v.setTagId(b.tagId),v.setSchemaSourceType(b.schemaSourceType),v.setPublishSourceType(b.publishSourceType),b.nameRule&&(da=new J,da.fromJsonObject(b.nameRule)),b.schedule&&(d=new ya,d.fromJsonObject(b.schedule)),v.setScheduleSwitch(b.scheduleSwitch),v.setIsAnonymousView(b.isAnonymousView),v.setIsHasPermission(b.isHasPermission),v.setIsSourceNameNotFound(b.isSourceNameNotFound),v.setSenderId(b.senderId),v.setReceivers(b.receivers),
v.setContent(b.content),v.setCreateTime(b.createTime),v.setCreateFormatTime(b.createFormatTime),v.setPublishSourceName(b.publishSourceName),v.setPublishSourceGroupName(b.publishSourceGroupName),v.setTotalPushRecordSize(b.totalPushRecordSize),v.setsTotalPushRecordSizeToNoFormat(b.sTotalPushRecordSizeToNoFormat),v.setNoOperValueMap(b.noOperValueMap),v.setWarningRuleName(b.warningRuleName),v.setWarningRuleStatus(b.warningRuleStatus))};this.check=function(){return da?d?Sa?Ta?RegExp("^(([A-Za-z0-9._-\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+([.][a-zA-Z0-9._-]+)[;,,\uff0c,\uff1b,])*([A-Za-z0-9._-\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+([.][a-zA-Z0-9._-]+)))$").test(Ta)?
2E3<Ta.length?N.get("receiversTooLong","\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc72000\u4e2a\u5b57\u7b26"):65535<L.length?N.get("contentTooLong","\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc765535\u4e2a\u5b57\u7b26"):null:N.get("receiversFormatError","\u6536\u4ef6\u90ae\u7bb1\u683c\u5f0f\u4e0d\u6b63\u786e"):N.get("receiversEmpty","\u8bf7\u8f93\u5165\u6536\u4ef6\u90ae\u7bb1"):N.get("senderEmpty","\u8bf7\u8f93\u5165\u53d1\u4ef6\u90ae\u7bb1"):N.get("scheduleEmpty","\u8bf7\u8f93\u5165\u63a8\u9001\u65f6\u95f4"):N.get("nameRuleEmpty",
"\u8bf7\u8f93\u5165\u90ae\u4ef6\u540d\u79f0")}};fa.EmailSendLog=f;fa.EmailPushRecordConfig=function(){var v=this,K,h,ka,T,da;this.setId=function(d){K=d};this.getId=function(){return K};this.setUserId=function(d){h=d};this.getUserId=function(){return h};this.setPushTargetType=function(d){ka=d};this.getPushTargetType=function(){return ka};this.setStrategy=function(d){T=d};this.getStrategy=function(){return T};this.setValue=function(d){da=d};this.getValue=function(){return da};this.toJsonObject=function(){var d=
{};d.id=K;d.userId=h;d.pushTargetType=ka;d.strategy=T;d.value=da;return d};this.fromJsonObject=function(d){d&&(v.setId(d.id),v.setUserId(d.userId),v.setPushTargetType(d.pushTargetType),v.setStrategy(d.strategy),v.setValue(d.value))}};f.SENDEMAILSSTATUS_FAIL=0;f.SENDEMAILSSTATUS_SUCCESS=1;f.SENDEMAILSSTATUS_PARTSUCCESS=2;f.INSUFFICIENT_SCHEDULING_TIMES=3;f.SENDEMAILSSTATUS_WARNINGRULE_UNMATCHED=4;D.ARR_COMMON_EMAIL_INFO=[new H(".*@qq.com$","smtp.qq.com","smtp",!0,465),new H(".*@vip.qq.com$","smtp.qq.com",
"smtp",!0,465),new H(".*@foxmail.com$","smtp.qq.com","smtp",!0,465),new H(".*@gmail.com$","smtp.gmail.com","smtp",!0,465),new H(".*@163.com$","smtp.163.com","smtp",!1,25),new H(".*@163.com.cn$","smtp.163.com","smtp",!1,25),new H(".*@126.com$","smtp.126.com","smtp",!1,25),new H(".*@sina.com$","smtp.sina.com","smtp",!1,25),new H(".*@hotmail.com$","smtp-mail.outlook.com","smtp",!1,25),new H(".*@tom.com$","smtp.tom.com","smtp",!1,25),new H(".*@yahoo.com$","smtp.mail.yahoo.com","smtp",!1,25),new H(".*@sohu.com",
"smtp.sohu.com","smtp",!1,25),new H(".*@189.cn$","smtp.189.cn","smtp",!1,25),new H(".*@qiye.aliyun.com$","smtp.qiye.aliyun.com","smtp",!1,25),new H(".*@aliyun.com$","smtp.aliyun.com","smtp",!1,25),new H(".*@mxhichina.com$","smtp.mxhichina.com","smtp",!1,25),new H(".*@kingdee.com$","mail.kingdee.com","smtp",!1,25)];D.SEND_TYPE_SMTP="smtp";D.SEND_TYPE_EXCHANGE="exchange";D.DEFAULT_SMTP_PORT="25";D.DEFAULT_SMTP_SSL_PORT="465";D.DEFAULT_EXCHANGE_PORT="80";D.DEFAULT_EXCHANGE_SSL_PORT="443";D.PWD_ENCRYPT_PUBLICKEY=
"MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDOPTpBwk83pZpzM5S5GUCJjw3cr9jTXiva6p669MM1vn94Ya7VTHgqTkoVTKKXT/5fPrMhZHYt7zZcd2Di+pDDcu0pcV1Ukq6vBVzD4U5TbRstgJ0UGjnbBODQkfe81NBqnDD1Ba9mbF/PLPonNbnaj+9pyJsn1xzi/h9NRDcOKQIDAQAB";J.TYPE_FIXED="fixed";J.TYPE_DATE="date";J.TYPE_SERIALNUM="serialNum";J.getArrDateFormat=function(){return Ma.decodeParamFromUrl(window.location.search,"language").startsWith("zh")?[new R("2019\u5e743\u670814\u65e5","yyyy\u5e74M\u6708d\u65e5"),new R("2019-03-14","yyyy-MM-dd"),new R("2019/3/14",
"yyyy/M/d"),new R("20190314","yyyyMMdd"),new R("2019\u5e743\u6708","yyyy\u5e74M\u6708"),new R("2019/03","yyyy/MM"),new R("201903","yyyyMM"),new R("3\u670814\u65e5","M\u6708d\u65e5"),new R("03/14","MM/dd"),new R("0314","MMdd")]:[new R("March 14, 2019","MMM d, yyyy"),new R("2019-03-14","yyyy-MM-dd"),new R("2019/3/14","yyyy/M/d"),new R("20190314","yyyyMMdd"),new R("March, 2019","MMM, yyyy"),new R("2019/03","yyyy/MM"),new R("201903","yyyyMM"),new R("March 14","MMM d"),new R("03/14","MM/dd"),new R("0314",
"MMdd")]};J.searchDateFormatObj=function(v){for(var K=J.getArrDateFormat(),h=0;h<K.length;h++)if(K[h].getValue()==v)return K[h];return null}})();(function(){function f(){ya.call(this);var L=this,u=this.protectedMethod,a,m=[],na=[f.SAVEALLPUSHDETAIL,f.SAVEPUSHDETAILBYTIME,f.SAVEPUSHDETAILBYNUMBER],Z={},xa={},Oa=[h.get("day","\u5929"),h.get("week","\u5468"),h.get("month","\u6708"),h.get("year","\u5e74")],g,b=new d;(function(){u.setTitle(h.get("pushRecordDetailSet","\u63a8\u9001\u660e\u7ec6\u8bbe\u7f6e"));L.setSize(460,330);u.setContentPaneCreator(function(){return oa()});u.setClosingAction(function(ha){ha&&(ha=da.createFeedbackDialog(),ha.setOptionType(da.OPTION_OK_CANCEL),
ha.setMsgImageType(da.MSG_DELETE),ha.setMessage(z()),ha.setClosingChecker(function(Ja){if(Ja==da.RETURN_OK)for(Ja=0;Ja<na.length;Ja++)if(m[na[Ja]].isChecked()){var Ba=0!=Ja?Z[na[Ja]].getValue():null;if(na[Ja]==f.SAVEPUSHDETAILBYTIME){var Fa=xa[f.SAVEPUSHDETAILBYTIME].getSelected();Fa=Ca(Fa);Ba+=","+Fa}g&&g(na[Ja],Ba);break}return!0}),ha.showDialog())})})();var z=function(){for(var ha=0;ha<na.length;ha++)if(m[na[ha]].isChecked())switch(na[ha]){case f.SAVEALLPUSHDETAIL:return h.get("allPushDetailTip",
"\u786e\u5b9a\u4fdd\u7559\u6240\u6709\u7684\u63a8\u9001\u660e\u7ec6\u5417\uff1f\u82e5\u4fdd\u5b58\u8bbe\u7f6e\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u751f\u6210\u5927\u91cf\u7684\u5b9a\u65f6\u63a8\u9001\u6570\u636e\u6587\u4ef6");case f.SAVEPUSHDETAILBYTIME:ha=Z[na[ha]].getValue();var Ja=xa.time.getSelected();return ha=h.get("saveRecentTip","\u786e\u5b9a\u4fdd\u7559\u6700\u8fd1")+ha+Ja+h.get("savePushDetailByTimeTip","\u7684\u63a8\u9001\u660e\u7ec6\u5417\uff1f\u82e5\u4fdd\u5b58\u8bbe\u7f6e\uff0c\u5176\u4ed6\u63a8\u9001\u660e\u7ec6\u5c06\u4f1a\u88ab\u5220\u9664");
case f.SAVEPUSHDETAILBYNUMBER:return ha=Z[na[ha]].getValue(),ha=h.get("saveRecentTip","\u786e\u5b9a\u4fdd\u7559\u6700\u8fd1")+ha+h.get("savePushDetailByNumTip","\u6761\u63a8\u9001\u660e\u7ec6\u5417\uff1f\u82e5\u4fdd\u5b58\u8bbe\u7f6e\uff0c\u5176\u4ed6\u63a8\u9001\u660e\u7ec6\u5c06\u4f1a\u88ab\u5220\u9664")}},oa=function(){b.setFontSize(13);var ha=new v,Ja=$("<div>");Ja.addClass("push-record-set-content");Ja.css("padding","15px");var Ba=$("<div>");Ba.addClass("each-record-set");Ba.text(h.get("eachPushSet",
"\u9488\u5bf9\u6bcf\u4e2a\u63a8\u9001\u914d\u7f6e\uff1a"));Ja.append(Ba);Ba=$("<div>");Ba.addClass("first-choice-set-item");var Fa=$("<div>");Fa.addClass("first-choice-set-item-left");var Xa=new N;Xa.setChecked(!0);m[f.SAVEALLPUSHDETAIL]=Xa;ha.addElement(Xa);Xa=Xa.getJqUi();Fa.append(Xa);var Ua=$("<div>");Ua.addClass("first-choice-set-item-right");var bb=h.get("saveAllPushRecord","\u4fdd\u7559\u6240\u6709\u7684\u63a8\u9001\u660e\u7ec6\uff08\u4e0d\u63a8\u8350\uff09");Xa=b.measureWidth(bb);Ua.text(bb);
Ba.append(Fa);Ba.append(Ua);Ua=$("<div>");Ua.addClass("second-choice-set-item");var Ya=$("<div>");Ya.addClass("second-choice-set-item-left");Fa=new N;m[f.SAVEPUSHDETAILBYTIME]=Fa;ha.addElement(Fa);Fa=Fa.getJqUi();Ya.append(Fa);var cb=$("<div>");cb.addClass("save-recent-record-sec");Fa=h.get("saveRecent","\u4fdd\u7559\u6700\u8fd1");bb=b.measureWidth(Fa);cb.text(Fa);var Va=$("<div>");Va.addClass("second-spinner-ctrl");var db=new Ma;db.setConstraint(1,999,1);db.setValue(3);db.addValueChangedListener(function(qb,
lb,eb,p){db.setValue(eb,p)});Z[f.SAVEPUSHDETAILBYTIME]=db;Fa=db.getJqUi();fa.layoutCtrl(Fa,46+bb,39,55,22);Va.append(Fa);var Qa=$("<div>");Qa.addClass("second-combobox-ctrl");Fa=new K;Fa.setItemModels(Oa);Fa.setSelected(h.get("day","\u5929"));xa[f.SAVEPUSHDETAILBYTIME]=Fa;var gb=Fa.getJqUi();fa.layoutCtrl(gb,101+bb,39,55,22);Qa.append(gb);gb=$("<div>");gb.text(h.get("pushOfRecord","\u7684\u63a8\u9001\u660e\u7ec6"));gb.attr("title",h.get("pushOfRecord","\u7684\u63a8\u9001\u660e\u7ec6"));gb.css({overflow:"hidden",
"text-overflow":"ellipsis","white-space":"nowrap"});fa.layoutCtrl(gb,156+bb,42,75,17);Ua.append(Ya);Ua.append(cb);Ua.append(Va);Ua.append(Qa);Ua.append(gb);Ya=$("<div>");Ya.addClass("third-choice-set-item");cb=$("<div>");cb.addClass("third-choice-set-item-left");Va=new N;m[f.SAVEPUSHDETAILBYNUMBER]=Va;ha.addElement(Va);ha=Va.getJqUi();cb.append(ha);ha=$("<div>");ha.addClass("save-recent-record-trd");ha.text(h.get("saveRecent","\u4fdd\u7559\u6700\u8fd1"));Va=$("<div>");Va.addClass("third-spinner-ctrl");
var hb=new Ma;hb.setConstraint(1,999,1);hb.setValue(100);hb.addValueChangedListener(function(qb,lb,eb,p){hb.setValue(eb,p)});Z[f.SAVEPUSHDETAILBYNUMBER]=hb;Qa=hb.getJqUi();fa.layoutCtrl(Qa,61+bb,125,55,22);Va.append(Qa);Qa=$("<div>");Qa.text(h.get("pushRecordItem","\u6761\u63a8\u9001\u660e\u7ec6"));Qa.attr("title",h.get("pushRecordItem","\u6761\u63a8\u9001\u660e\u7ec6"));Qa.css({overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"});fa.layoutCtrl(Qa,116+bb,128,75,17);Ya.append(cb);
Ya.append(ha);Ya.append(Va);Ya.append(Qa);Ja.append(Ba);Ja.append(Ua);Ja.append(Ya);Ba=new Sa;Ba.setIconType(Sa.ICON_TYPE_QUESTION);Ba.setTipsSize(320,54);Ba.setTipsText(h.get("saveAllPushRecordSuggestion","\u4fdd\u7559\u6240\u6709\u7684\u63a8\u9001\u660e\u7ec6\u53ef\u80fd\u4f1a\u5bfc\u81f4\u751f\u6210\u5927\u91cf\u7684\u5b9a\u65f6\u63a8\u9001\u6570\u636e\u6587\u4ef6\uff0c\u5efa\u8bae\u53ea\u4fdd\u7559\u90e8\u5206\u63a8\u9001\u660e\u7ec6\u3002"));Ba=Ba.getJqUi();fa.layoutCtrl(Ba,70+Xa,54,16,16);Ja.append(Ba);
if(a)switch(Ba=a.getValue(),Xa=a.getStrategy(),m[Xa].setChecked(!0),Xa){case f.SAVEPUSHDETAILBYTIME:Ba=Ba.split(",");db.setValue(parseInt(Ba[0]));Fa.setSelected(va(parseInt(Ba[1])));break;case f.SAVEPUSHDETAILBYNUMBER:hb.setValue(parseInt(Ba))}return Ja},va=function(ha){switch(ha){case f.DAY:return h.get("day","\u5929");case f.WEEK:return h.get("week","\u5468");case f.MONTH:return h.get("month","\u6708");case f.YEAR:return h.get("year","\u5e74");default:return h.get("day","\u5929")}},Ca=function(ha){switch(ha){case h.get("day",
"\u5929"):return f.DAY;case h.get("week","\u5468"):return f.WEEK;case h.get("month","\u6708"):return f.MONTH;case h.get("year","\u5e74"):return f.YEAR;default:return f.DAY}};this.setPushRecordConfig=function(ha){a=ha};this.setPushDetailSettingAfter=function(ha){g=ha};this.setContentPane=function(ha){}}function H(){var L,u,a,m;this.setGroupName=function(na){m=na};this.getGroupName=function(){return m};this.setPropertyName=function(na){u=na};this.getPropertyName=function(){return u};this.setDescName=
function(na){L=na};this.getDescName=function(){return L};this.setUserObject=function(na){a=na};this.getUserObject=function(){return a}}function D(){var L=this,u=[],a,m,na,Z,xa=D.SORT_TYPE_DESC;this.sort=function(){Z&&Z(na,xa)};this.setFunSortModel=function(b){Z=b};this.setSortTitle=function(b){a=b};this.setArrSortField=function(b){u=b};this.getArrSortField=function(){return u};this.getSortMenuModel=function(){if(!m&&u&&0!==u.length){m=new Aa;var b=a?a:h.get("sort","\u6392\u5e8f");m.setText(b);m.setGroupName(b);
for(var z in u){b=u[z];var oa=!1;0==z&&(oa=!0,na=b);b=Oa(b,oa);m.addItemModel(b)}m.addSeperator();z=new H;z.setDescName(h.get("DESC","\u964d\u5e8f"));z.setGroupName("SortType");z.setPropertyName(D.SORT_TYPE_DESC);z=Oa(z,!0);m.addItemModel(z);z=new H;z.setDescName(h.get("ASC","\u5347\u5e8f"));z.setGroupName("SortType");z.setPropertyName(D.SORT_TYPE_ASC);z=Oa(z,!1);m.addItemModel(z)}return m};var Oa=function(b,z){z=Ea.createRadio(b.getDescName(),b.getPropertyName(),z,g);z.setUserObject(b);z.setGroupName(b.getGroupName());
return z},g=function(b){if(b=b.getUserObject()){var z=b.getPropertyName();z==D.SORT_TYPE_DESC||z==D.SORT_TYPE_ASC?xa=z:na=b;L.sort()}}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.timedpush&&(com.kingdee.bos.qing.timedpush={});"undefined"==typeof com.kingdee.bos.qing.timedpush.common&&(com.kingdee.bos.qing.timedpush.common=
{});var R=com.kingdee.bos.qing.timedpush.common;R.PushRecordDetailSetting=function(){var L,u,a,m="0KB",na="0KB",Z,xa,Oa;this.setTotalRowNum=function(z){Oa=z};this.setPushRecordConfig=function(z){};this.setPushDetailSettingAfter=function(z){};this.setPushDetailSettingDisplayPrev=function(z){xa=z};this.setMarkClassName=function(z){Z=z};this.setTotalFileSize=function(z){na=z};this.setTotalPushRecordFileSize=function(z){m=z};this.setIsEmailPush=function(z){a=z};this.setBatchHandleEvent=function(z){u=
z};this.setContentPane=function(z){L=z};this.paintPushDetailSetting=function(){var z=$("<div>");z.addClass("push-record-storage-set");var oa=$("<div>");oa.addClass("push-record-storage-left");var va=$("<div>");va.addClass("push-record-icon-setting");Ta.background(va,"icon-setting");var Ca=$("<div>");Ca.addClass("push-record-storage-left-text");var ha=h.get("pushRecordDetailSet","\u63a8\u9001\u660e\u7ec6\u8bbe\u7f6e");Ca.text(ha);oa.attr("title",ha);oa.append(va);oa.append(Ca);oa.on("click",function(){xa&&
xa()});va=$("<div>");va.addClass("push-record-storage-right");va.text(h.get("totalFileSize","\u603b\u6587\u4ef6\u5927\u5c0f\uff1a"));Ca=$("<span>");Ca.addClass(Z&&Z);Ca.text(na);va.append(Ca);z.append(oa);z.append(va);return z};this.paintBatchDelUI=function(){var z=$("<div>");z.addClass("batch-del-item");var oa=$("<div>");oa.addClass("batch-del-item-left");var va=new ka(h.get("deletePushRecord","\u5220\u9664"));va.addActionListener(g);va=va.getJqUi();fa.layoutCtrl(va,0,0,60,28);va.css({"border-radius":"4px",
"font-size":"12px"});va.find(".sa-ctrl-button-border-highlight").css("border","none");oa.append(va);va=$("<div>");va.addClass("batch-del-display-content");var Ca=$("<div>");Ca.addClass("total-row-number");Ca.html(h.get("total","\u5171")+"<span class='push-detail-total-row-count'>"+Oa+"</span>"+h.get("row","\u884c"));va.append(Ca);Ca=$("<div>");Ca.addClass("batch-del-item-left-right");Ca.text(h.get("totalFileSize","\u603b\u6587\u4ef6\u5927\u5c0f\uff1a"));var ha=$("<span>");ha.addClass("total-file-value push-record-total-value");
ha.text(m);Ca.append(ha);va.append(Ca);z.append(oa);z.append(va);return z};var g=function(){var z=b();if(0==z.length){var oa=new T;oa.getJqUi().appendTo(L);oa.showPrompt(h.get("chooseDelPushRecord","\u8bf7\u9009\u62e9\u8981\u5220\u9664\u7684\u63a8\u9001\u8bb0\u5f55\u3002"))}else oa=da.createFeedbackDialog(),oa.setOptionType(da.OPTION_OK_CANCEL),oa.setMsgImageType(da.MSG_DELETE),oa.setMessage(h.get("pushRecordDelTips","\u5220\u9664\u8bb0\u5f55\u540e\u5c06\u65e0\u6cd5\u6062\u590d\uff0c\u5bf9\u5e94\u65f6\u95f4\u70b9\u63a8\u9001\u7684\u6570\u636e\u5185\u5bb9\u5c06\u65e0\u6cd5\u67e5\u770b\uff0c\u786e\u5b9a\u5220\u9664\u9009\u4e2d\u8bb0\u5f55\u5417\uff1f")),
oa.setClosingChecker(function(va){va==da.RETURN_OK&&u&&u(z);return!0}),oa.showDialog()},b=function(){for(var z=[],oa=$(".push-detail-name-left"),va=0;va<oa.length;va++){var Ca=oa[va],ha=$(Ca).data("checkBoxModel"),Ja=a?$(Ca).data("emailSendLogModel"):$(Ca).data("yzjPushRecordModel"),Ba=$(Ca).data("tableModel");Ca=$(Ca).attr("rowIndex");ha.isChecked()&&z.push({pushRecordModel:Ja,tableModel:Ba,rowIndex:Ca})}return z}};R.PushDetailSettingDialog=f;R.SortWidget=D;R.SortField=H;R.TimedPushManagerSortPanel=
function(){var L,u=[],a,m,na=function(){a=$("<div>");var Z=new H;Z.setDescName(h.get("PushCreateTime","\u521b\u5efa\u65f6\u95f4"));Z.setGroupName("SortField");Z.setPropertyName("createTime");var xa=new H;xa.setDescName(h.get("pushName","\u540d\u79f0"));xa.setGroupName("SortField");xa.setPropertyName("name");u.push(Z);u.push(xa);L=new D;L.setArrSortField(u);L.setFunSortModel(m);var Oa=L.getSortMenuModel();Z=h.get("sort","\u6392\u5e8f");xa=new B;xa.setSelectedModel(Z);xa.setDropdownCreator(function(g,
b,z,oa){b=new Ea;b.setModel(Oa);b.setHideListener(function(){oa()});b=b.getJqUi();g.append(b);return[b.prop("offsetWidth"),b.prop("offsetHeight")]});Z=xa.getJqUi();fa.layoutCtrlWithLRTB(Z,null,20,53);fa.layoutCtrlMiddleAlign(Z,24);Z.appendTo(a);Z.css({"margin-top":"-11px",top:"19px"});return a};this.getJqUi=function(){a||(a=na());return a};this.setSortModel=function(Z){m=Z};this.sort=function(){L.sort()}};R.PubshSearchPanel=function(){var L,u,a;this.getInputContent=function(){return a.getText()};
this.getJqUi=function(){if(!L){var m=$("<div>");a=new Wa;a.setPlaceholder(h.get("searchPushContent","\u641c\u7d22\u63a8\u9001\u540d\u79f0"));a.setSearchListenerDelay(1E3);a.setShowSearchIcon(!0);a.addSearchListener(u);var na=a.getJqUi();na.addClass("sa-qing-publish-manager-searchBox");na.appendTo(m);L=m}return L};this.setSearchListener=function(m){u=m}};var J,fa,ya,N,Ma,v,K,h,ka,T,da,d,Ea,Aa,B,Wa,Sa;(function(){var L=com.kingdee.bos.qing.ui.component;ya=L.AbstractModalDialog;N=L.RadioButton;Ma=L.Spinner;
v=L.RadioButtonGroup;K=L.ComboBox;ka=L.Button;T=L.MessageCurtain;da=L.MessageDialog;Ea=L.Menu;Aa=L.MenuModel;B=L.DropdownSelector;Wa=L.SearchBox;Sa=L.HelpIcon;L=com.kingdee.bos.qing.framework.common;J=L.AbstractIcons;h=L.MultilanguageManager.createPackageAccessor(com.kingdee.bos.qing.timedpush);L=com.kingdee.bos.qing.common;fa=L.DomUtil;d=L.TextMeasurer})();var Ta=new function(){J.call(this);var L=this.protectedMethod;this.protectedInit=function(a,m){a=com.kingdee.bos.qing.timedpush.common.ComboIcon;
if(!a)throw Error("com.kingdee.bos.qing.timedpush.common.ComboIcon not found.");a.define(m,"timedpush-sprite");m.setGap(1);m.setStartPosition(1,1);m.setIconSize(18,18);u(0,0,"btn_orderup");u(1,0,"btn_orderup_hover");u(0,1,"btn_edit");u(1,1,"btn_edit_on");u(0,2,"btn_delete");u(1,2,"btn_delete_on");m.setStartPosition(1,51);m.setIconSize(18,18);u(0,0,"btn_edit_white");u(0,1,"icon_lapp_setting");u(0,2,"publish_manager");m.setStartPosition(1,77);m.setIconSize(8,8);u(0,0,"icon_dragchunk");m.setStartPosition(1,
121);m.setIconSize(16,16);u(0,0,"icon-setting");u(0,1,"icon_sort-asc-esc");u(0,2,"icon_sort-asc-desc");u(0,3,"icon_sortable-v");m.setStartPosition(1,81);m.setIconSize(16,14);u(0,0,"high-set-up");u(1,0,"high-set-down");u(0,1,"icon-rule-setting");u(1,1,"icon-rule-setting_hover");m.setStartPosition(0,140);m.setIconSize(8,8);u(0,0,"icon_drag");a.define(m,"icon_thirdapp.png");u(0,0,"icon_yzj");u(1,0,"icon_wxqyh");u(2,0,"icon_missioncloud");u(3,0,"icon_dingding");u(3,0,"icon_dingdingoffline");u(4,0,"icon_welink");
u(5,0,"icon_wxxcx");u(0,1,"icon_yzj_off");u(1,1,"icon_wxqyh_off");u(2,1,"icon_missioncloud_off");u(3,1,"icon_dingding_off");u(3,1,"icon_dingdingoffline_off");u(4,1,"icon_welink_off");u(5,1,"icon_wxxcx_off");a.define(m,"icon_help.png");u(0,0,"icon_help");u(0,1,"icon_help_white");a.define(m,"tm-publish");m.setGap(0);m.setStartPosition(0,0);m.setIconSize(17,14);u(0,0,"icon-side-close");m.setStartPosition(33,0);m.setIconSize(17,14);u(0,0,"icon-side-open");m.setStartPosition(55,0);m.setIconSize(16,16);
u(0,0,"dataAnalysis");m.setStartPosition(77,0);m.setIconSize(16,16);u(0,0,"dashboard");m.setStartPosition(102,0);m.setIconSize(16,16);u(0,0,"squareData");m.setStartPosition(126,0);m.setIconSize(15,16);u(0,0,"del");m.setStartPosition(199,0);m.setIconSize(15,16);u(0,0,"del_on");m.setStartPosition(150,0);m.setIconSize(16,16);u(0,0,"edit");m.setStartPosition(175,0);m.setIconSize(16,16);u(0,0,"edit_on");m.setStartPosition(221,0);m.setIconSize(16,16);u(0,0,"add");m.setStartPosition(244,0);m.setIconSize(16,
16);u(0,0,"add_on");m.setStartPosition(295,0);m.setIconSize(18,18);u(0,0,"btn_delete");m.setStartPosition(269,0);m.setIconSize(18,18);u(0,0,"btn_delete_on");m.setStartPosition(320,0);m.setIconSize(18,18);u(0,0,"card2picN");m.setStartPosition(346,0);m.setIconSize(18,18);u(0,0,"card2listN");m.setStartPosition(372,0);m.setIconSize(18,18);u(0,0,"card2pic");m.setStartPosition(398,0);m.setIconSize(18,18);u(0,0,"card2list");a.define(m,"icon_blue_sprite");m.setStartPosition(1,1);m.setGap(1);m.setIconSize(40,
40);u(0,0,"icon_add_blue");u(0,1,"icon_thumbedit_blue");a.define(m,"no-data.png");m.setStartPosition(0,0);m.setGap(0);m.setIconSize(220,220);u(0,0,"no-data")};var u=function(a,m,na){L.registIcon(a,m,na)}};R.MyIcons=Ta;f.SAVEALLPUSHDETAIL="all";f.SAVEPUSHDETAILBYTIME="time";f.SAVEPUSHDETAILBYNUMBER="number";f.DAY=0;f.WEEK=1;f.MONTH=2;f.YEAR=3;D.SORT_TYPE_DESC=1;D.SORT_TYPE_ASC=2})();(function(){function f(p,aa,I,ia){na.call(this,p,aa,I,ia);var O=this.protectedMethod;this.getUserEmailSender=function(q){O.remote("getUserEmailSender",{publishTargetType:q})};this.saveEmailSender=function(q,k){q={publishTargetType:q,emailSender:JSON.stringify(k.toJsonObject())};O.remote("saveEmailSender",q)};this.connectTest=function(q,k){q={publishTargetType:q,emailSender:JSON.stringify(k.toJsonObject())};O.remote("connectTest",q)};this.saveEmailConfig=function(q,k,Q,r,S,x){q={publishTargetType:q,
eamilConfModel:JSON.stringify(k.toJsonObject()),sceneModel:Q?JSON.stringify(Q):null,publishedRuntimeUrl:r,dsbPublishId:S,scene:x};O.remote("saveEmailConfig",q);B.occur(B.COMMUNICATE_TYPE,B.EMAIL_SCHEDULE_PUSH)};this.updateEmailConfig=function(q,k,Q){q={publishTargetType:q,eamilConfModel:JSON.stringify(k.toJsonObject()),publishedRuntimeUrl:Q};O.remote("updateEmailConfig",q)};this.loadEmailConfigs=function(q){O.remote("loadEmailConfigs",{publishTargetType:q})};this.deleteEmailConfigById=function(q,
k){O.remote("deleteEmailConfigById",{publishTargetType:q,id:k})};this.loadPublishInfos=function(q,k){O.remote("loadPublishInfos",{publishTargetType:q,path:k})};this.loadExceptionLog=function(q,k){O.remote("loadExceptionLog",{publishTargetType:q,id:k})};this.deleteEmailPublishInfoById=function(q,k){q={publishTargetType:q,arrEmailSendLogModel:JSON.stringify(k)};O.remote("deleteEmailPublishInfoById",q)};this.loadPushRecordConfigInfo=function(q){O.remote("loadPushRecordConfigInfo",{publishTargetType:q})};
this.saveEmailPushRecordConfig=function(q,k,Q){O.remote("saveEmailPushRecordConfig",{publishTargetType:q,strategy:k,value:Q})};this.loadPublishOperModel=function(q,k,Q){O.remote("loadPublishOperModel",{publishTargetType:h.EMAIL,biztag:q,isEdit:k,dsbRefToPublishId:Q})};this.updateScheduleState=function(q,k,Q,r){O.remote("updateScheduleState",{publishTargetType:q,openSchedule:k,configId:Q,publishedRuntimeUrl:r})};this.loadPushSchema=function(q,k,Q){O.remote("loadPushSchema",{publishTargetType:q,configId:k,
publishSourceType:Q})};this.updatePushSchema=function(q,k,Q,r){q={publishTargetType:q,configId:k,publishSourceType:Q,model:JSON.stringify(r)};O.remote("updatePushSchema",q)};this.cronExpression=function(q,k){O.remote("cronExpression",{publishTargetType:q,cron:k})};this.doPush=function(q,k,Q){return O.remote("doPush",{publishTargetType:h.EMAIL,configId:q,publishedRuntimeUrl:k,timeStamp:Q})};this.getServerTimeStamp=function(){O.remote("getServerTimeStamp",{publishTargetType:h.EMAIL})};this.getServerTimeStampForDoPush=
function(){O.remote("getServerTimeStampForDoPush",{publishTargetType:h.EMAIL})}}function H(p,aa,I,ia){b.call(this);var O=this,q=this.protectedMethod,k,Q,r;(function(){q.setTitle(a.get("emailPushEdit","\u7f16\u8f91\u90ae\u4ef6\u63a8\u9001"));O.setSize(480,570);q.setSelectable(!0);k=new J(p,I,ia,q.getMessageCurtain());k.setEmailConfigModel(aa);k.setIsEdit(!0);k.setFuncReSize(q.getDialogCtrl().setBounds);q.setContentPaneCreator(function(){return k.createUi()});q.setClosingChecker(function(x){S(x)},!0);
q.setClosingAction(function(x){})})();this.setOuterMessageCurtain=function(x){r=x};this.setSuccessCallBack=function(x){Q=x};var S=function(x){var t=k.getEmailConfigModel(),y=t.check();if(y)return q.getMessageCurtain().showPrompt(y,2E3),x(!1),!1;if(!k.checkWarningRuleExist())return q.getMessageCurtain().showPrompt(a.get("saveWarningRuleTips","\u9884\u8b66\u89c4\u5219\u4e0d\u5b58\u5728\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\u6216\u5220\u9664\u3002")),x(!1),!1;y=ia;t.isAnonymousView()&&(y=I);(new f(p,function(Y){Q&&
Q(t);r&&r.showSuccess(a.get("successToSaveConfigInfo","\u4fdd\u5b58\u914d\u7f6e\u4fe1\u606f\u6210\u529f\u3002"));x(!0)},function(Y,M){if(2301005==Y)return q.getMessageCurtain().showError(a.get("sourceIsPublishAndNoPermission","\u539f\u53d1\u5e03\u672a\u6388\u6743\u3002")),x(!1),!0;if(2301006==Y)return q.getMessageCurtain().showError(a.get("publishSourcePublishNotExistException","\u539f\u53d1\u5e03\u4fe1\u606f\u4e0d\u5b58\u5728\u6216\u5df2\u88ab\u5220\u9664\u3002")),x(!1),!0;x(!1);return!1})).updateEmailConfig(h.EMAIL,
t,y)};this.getFunBound=function(){return q.getDialogCtrl().setBounds}}function D(p,aa,I,ia,O,q){b.call(this);var k=this.protectedMethod,Q=this,r;(function(){k.setTitle(a.get("scheduleDetails","\u63a8\u9001\u660e\u7ec6"));Q.setSize(800,570);k.setSelectable(!0);k.getDialogCtrl().setMinSize(800,570);k.getDialogCtrl().setFullScreenEnabled();k.getDialogCtrl().addResizeListener(function(){r&&r.relayoutViews()});r=new R(p,aa,I);r.setParentRowIdx(O);r.setParentCellIndex(q);r.setParentTableModel(ia);r.setOuterMessageCurtain(k.getMessageCurtain());
k.setContentPaneCreator(function(){return r.getJqUi()});k.setClosingAction(function(S){k.destroy()});k.setFooterClosingOnly(!0);k.setClosingChecker2(null,function(S){k.destroy();return!0})})()}function R(p,aa,I){function ia(C){KTDefaultCellRender.call(this,C);var A=this,U=this.paintCellUI;this.paintCellUI=function(F,W){var V=A.getCurrentRowIdx(),ma=A.getCurrentRow(),qa=A.getCurrentColIdx();if(V<L.getHeadRowCount()||0!=qa&&4!=qa&&2!=qa){U(F,W);if(1==V&&0==qa){V=$("<div>");V.addClass("total-checkbox-ctrl");
var ea=new Ja;V.data("checkBoxModel",ea);W=ea.getJqUi();V.append(W);V.on("click",Da);W=y&&0!=$(".push-detail-name-left").length&&y.length==$(".push-detail-name-left").length;ea.setChecked(W);V.appendTo(F)}$(F).find("span").css({"padding-right":"8px","padding-left":"6px"})}else if(0==qa){var ra=ma.getUserObject();ma=$("<div>");ma.addClass("push-detail-name-left");ea=new Ja;W=ea.getJqUi();ma.data("checkBoxModel",ea);ma.data("emailSendLogModel",ra);ma.data("tableModel",C);ma.attr("rowIndex",V);ma.attr("table-emailSendLog-id",
ra.getId());ma.on("click",pa);ea.setChecked(sa(ra.getId()));ma.append(W);ea=$("<div>");ea.addClass("push-detail-name-right");ea.text(ra.getName());ma.appendTo(F);ea.appendTo(F)}else 4==qa?(ra=ma.getUserObject(),ra.getPublishId()&&(ea=new oa(a.get("open","\u6253\u5f00")),ea.addActionListener(function(){var Ka=I.indexOf("?");Ka=I.substring(0,-1!==Ka?Ka:I.length);Ka=Va.appendParamToUrl(Ka,"publishId",ra.getPublishId());Ka=Va.appendParamToUrl(Ka,"timedPush",!0);m.openNewTabInAppId(ra.getName(),Ka,Ka,
m.QING_ANALYSIS)}),ea=ea.getJqUi(),ea.addClass("sa-qing-publish-email-publishinfo-manager-op-open"),ea.appendTo(F))):2==qa&&(ra=ma.getUserObject(),ka.SENDEMAILSSTATUS_SUCCESS==ra.getSendEmailsStatus()?(W="green",V=a.get("pushSuccess","\u6210\u529f")):ka.SENDEMAILSSTATUS_WARNINGRULE_UNMATCHED==ra.getSendEmailsStatus()?(W="#ff831f",V=a.get("unPush","\u672a\u63a8\u9001")):(W="red",V=a.get("pushFailure","\u5931\u8d25")),ma=$("<div style='border: solid 1px;text-align:center;height: 16px'>"),ma.text(V),
ma.css("color",W),ma.css("width","60px"),ma.css("position","absolute"),ma.css("top","0"),ma.css("bottom","0"),ma.css("margin","auto"),ma.appendTo(F),ka.SENDEMAILSSTATUS_PARTSUCCESS==ra.getSendEmailsStatus()?ea=a.get("sendEmailsStatusPartSuccess","\u90e8\u5206\u6210\u529f"):ka.INSUFFICIENT_SCHEDULING_TIMES==ra.getSendEmailsStatus()?ea=a.get("insufficientSchedulingTimes","\u8c03\u5ea6\u6b21\u6570\u4e0d\u8db3"):ka.SENDEMAILSSTATUS_WARNINGRULE_UNMATCHED==ra.getSendEmailsStatus()&&(ea=a.get("warningRuleUnMatched",
"\u4e0d\u6ee1\u8db3\u9884\u8b66\u89c4\u5219")),ka.SENDEMAILSSTATUS_SUCCESS!=ra.getSendEmailsStatus()&&(ka.INSUFFICIENT_SCHEDULING_TIMES==ra.getSendEmailsStatus()||ka.SENDEMAILSSTATUS_WARNINGRULE_UNMATCHED==ra.getSendEmailsStatus()?(V=$("<div style='text-align:center;width:75px;height: 16px'>"),V.text(ea),V.css("position","absolute"),V.css("top","0"),V.css("bottom","0"),V.css("left","70px"),V.css("margin","auto"),V.appendTo(F)):(ea=new oa(a.get("errorDetail","\u8be6\u60c5")),ea.addActionListener(function(Ka){La(ra.getId())}),
ea=ea.getJqUi(),ea.addClass("push-failure-detail"),ea.appendTo(F))))}}Wa.call(this,p,h.EMAIL);var O=this.protectedMethod,q,k,Q,r,S,x,t,y;this.setParentRowIdx=function(C){q=C};this.setParentCellIndex=function(C){k=C};this.setParentTableModel=function(C){Q=C};this.getJqUi=function(){if(!r){var C=$("<div>");C.addClass("sa-qing-publish-manager");S=$("<div>");S.addClass("sa-qing-publish-manager-content-emptytip");S.text(a.get("loading","\u52a0\u8f7d\u4e2d"));S.appendTo(C);x=L.createTable();x.setDraggableAdjusting(!0,
2,0,new Sa);x.setColumnFitVisibleWidth(!0);var A=new ia(x);A.setOutsideVisible(!1);x.setCellRender(A);x.setSyncUIWhenModelChanged(!0);x.addColumns(5);x.getColumn(0).setWidth(200);x.getColumn(1).setWidth(150);x.getColumn(2).setWidth(100);x.getColumn(3).setWidth(100);x.getColumn(4).setWidth(60);A=L.createHeadRow(x);A.getCell(0).setValue(a.get("rName","\u540d\u79f0"));A.getCell(1).setValue(a.get("createTime","\u751f\u6210\u65f6\u95f4"));A.getCell(2).setValue(a.get("sendEmailsStatus","\u63a8\u9001\u72b6\u6001"));
A.getCell(3).setValue(a.get("fileSize","\u6587\u4ef6\u5927\u5c0f"));A.getCell(4).setValue(a.get("operate","\u64cd\u4f5c"));t=$(x.getUI());u.layoutCtrlWithLRTB(t,0,0,null,65,0,null);t.appendTo(C);Y();r=C}return r};var Y=function(){var C=new f(p,function(A){S.hide();if(null==A||0==A.length)A=$("<div>"),A.addClass("no-data-image"),Aa.background(A,"no-data"),A.appendTo(r),A=$("<div>"),A.addClass("no-push-config-data"),A.text(a.get("noData","\u6682\u65e0\u76f8\u5173\u6570\u636e")),A.appendTo(r),t.hide();
else{for(var U="0KB",F=0;F<A.length;F++){var W=new ka;W.fromJsonObject(A[F]);W=W.getFileSize();U=za(W,U,!0)}F=new ha;F.setTotalRowNum(A.length);F.setContentPane(r);F.setTotalPushRecordFileSize(U);F.setIsEmailPush(!0);F.setBatchHandleEvent(function(V){M(V)});F.paintBatchDelUI().appendTo(r);t.show();ba(A)}},function(A,U){S.hide();return!1});C.setShowBlocking(!1);C.loadPublishInfos(h.EMAIL,aa)},M=function(C){for(var A,U=[],F=[],W=0;W<C.length;W++){var V=C[W];!A&&(A=V.tableModel);U.push(V.rowIndex);F.push(V.pushRecordModel.toJsonObject())}(new f(p,
function(){O.getOuterMessageCurtain().showSuccess(a.get("deleteSuccess","\u5220\u9664\u6210\u529f\u3002"));for(var ma=0,qa=0;qa<U.length;qa++)A.removeRow(U[qa]-ma),ma++;A.updateUI(!0);var ea=A.getRowsCount();ma="0KB";for(qa=3;qa<ea;qa++){var ra=A.getRow(qa).getUserObject().getFileSize();ma=za(ra,ma,!0)}$(".push-record-total-value").text(ma);qa=$(".push-detail-total-row-count").text();qa=parseInt(qa);$(".push-detail-total-row-count").text(qa-U.length);qa=Q.getRow(q);qa.getCell(k).setValue(ma);ea=qa.getUserObject();
ea.setTotalPushRecordSize(ma);qa.setUserObject(ea);ma=Q.getRowsCount();ea="0KB";for(ra=3;ra<ma;ra++)qa=Q.getRow(ra).getUserObject().getTotalPushRecordSize(),ea=za(qa,ea,!0);$(".email-push-manage-fileSize").text(ea)},function(ma,qa){return!1})).deleteEmailPublishInfoById(h.EMAIL,F)},ba=function(C){L.clearWithoutHead(x);if(C)for(var A=0;A<C.length;A++){var U=new ka;U.fromJsonObject(C[A]);var F=L.createRow(x);F.setUserObject(U);F.setHeight(30);F.getCell(0).setValue(U.getName());F.getCell(1).setValue(U.getCreateFormatTime());
F.getCell(3).setValue(U.getFileSize())}L.refresh(x)},sa=function(C){if(y)for(var A=0;A<y.length;A++)if(C==y[A])return!0;return!1},pa=function(C){var A=$(C.currentTarget).data("checkBoxModel").isChecked();C=$(".total-checkbox-ctrl");C=$(C).data("checkBoxModel");if(A){a:{A=$(".push-detail-name-left");for(var U=0;U<A.length;U++)if(!$(A[U]).data("checkBoxModel").isChecked()){A=!1;break a}A=!0}C.setChecked(A)}else C.setChecked(A)},Da=function(C){C=$(C.currentTarget).data("checkBoxModel").isChecked();for(var A=
$(".push-detail-name-left"),U=0;U<A.length;U++)$(A[U]).data("checkBoxModel").setChecked(C)},za=function(C,A,U){C=Ga(C);A=Ga(A);C=U?eb.add(A,C):eb.sub(A,C);C=1024>C?0==C?C+"KB":C.toFixed(2)+"KB":eb.div(C,1024).toFixed(2)+"MB";return C},Ga=function(C){var A=C.substring(0,C.length-2);return A="MB"==C.substring(C.length-2,C.length)?eb.mul(A,1024):A},La=function(C){var A=new f(p,function(U){if(U){var F=U.errorCode,W=U.errorMessage,V=U.errorStackTrace;U=new z;if(2314104==F)W=a.get("sendEmailsSenderException",
"\u53d1\u4ef6\u90ae\u7bb1\u914d\u7f6e\u6709\u8bef\uff0c\u8bf7\u91cd\u65b0\u914d\u7f6e");else if(2314105==F)W=a.get("sendEmailsInvalidReceiversException","\u90e8\u5206\u6536\u4ef6\u90ae\u7bb1\u63a8\u9001\u5931\u8d25\uff0c\u8bf7\u4ed4\u7ec6\u6838\u5b9e\u6536\u4ef6\u90ae\u7bb1\uff0c\u63a8\u9001\u5931\u8d25\u7684\u6536\u4ef6\u90ae\u7bb1\u6709\uff1a#1\u3002").replace("#1",W);else if(2101001==F)W=a.get("publishSourceSubjectNotExist","\u539f\u4e1a\u52a1\u4e3b\u9898\u4e0d\u5b58\u5728\u6216\u5df2\u88ab\u5220\u9664");
else if(2106001==F)W=a.get("publishSourceDashboardNotExist","\u539f\u4eea\u8868\u677f\u4e0d\u5b58\u5728\u6216\u5df2\u88ab\u5220\u9664");else if(2101010==F||2301010==F)W=a.get("themeFileSizeLimit","\u8f7b\u5b58\u50a8\u7a7a\u95f4\u4e0d\u8db3");else if(2100001==F)W=a.get("qingStorageNoSpace","\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\uff0c\u8bf7\u8054\u7cfb\u8fd0\u7ef4\u4eba\u5458\u6dfb\u52a0\u78c1\u76d8");else if(21000008==F)W=a.get("noQingModelerLicense","\u5f53\u524d\u7cfb\u7edf\u6ca1\u6709\u3010\u8f7b\u5efa\u6a21\u3011\u6a21\u5757\u7684\u4f7f\u7528\u8bb8\u53ef\uff0c\u8bf7\u4e0e\u7cfb\u7edf\u7ba1\u7406\u5458\u8054\u7cfb");
else if(2101019==F)W=a.get("noModelerPermission","\u5c1a\u672a\u83b7\u5f97\u6570\u636e\u8868\u6a21\u578b\u7684\u6570\u636e\u6743\u9650\u3002");else if(2101006==F)W=a.get(F.toString(),"\u5c1a\u672a\u83b7\u5f97\u5b9e\u4f53\u6570\u636e\u8868\u7684\u67e5\u770b\u6743\u9650"),(F=V.match(/(\(|\uff08)([^(\)|\uff09)]+)(\)|\uff09)/))&&F[2]&&(V=F[2]),V=a.get("noAuthorityForTheseEntities","\u5c1a\u672a\u83b7\u5f97\u4ee5\u4e0b\u5b9e\u4f53\u6570\u636e\u8868\u7684\u67e5\u770b\u6743\u9650\uff1a")+"\r  "+V.replace(/,/g,
a.get("semicolon","\uff1b")+"\r  ");else if(2101018==F){if(F=/(?:\u3010\s)(.+)(?=\s\u3011)/.exec(V))W=F[1],W=a.get("notSupportQingAnalysis","\u4ee5\u4e0b\u4e1a\u52a1\u5b9e\u4f53\u5c1a\u672a\u5f00\u542f\u201c\u652f\u6301\u8f7b\u5206\u6790\u201d\u8bbe\u7f6e\u9879\uff1a")+"\r  "+W,V=W.replace(/,/g,a.get("semicolon","\uff1b")+"\r  ");W=a.get("entityNotSupportQingAnalysis","\u4e1a\u52a1\u5b9e\u4f53\u672a\u5f00\u542f\u201c\u652f\u6301\u8f7b\u5206\u6790\u201d\u8bbe\u7f6e\u9879\uff0c\u8bf7\u5728\u5f00\u53d1\u5e73\u53f0\u7684\u5bf9\u5e94\u8868\u5355\u4e2d\u8fdb\u884c\u8bbe\u7f6e   ");
var ma=qb.getSupportQingAnalysisUrl();U.setCustomPainter(function(qa,ea){var ra=$("<div class='sa-ctrl-msgdlg-text'>");ra.css("bottom",20);var Ka=$("<a onclick='javascript:window.open(\""+ma+"\");' href='#'>");Ka.css("cursor","pointer");Ka.css("color","#5582f3");Ka.text(a.get("viewDocument","\u67e5\u770b\u5e2e\u52a9\u6587\u6863"));ra.text(ea);ra.append(Ka);qa.append(ra)})}else W=a.get("sendEmailsOtherException","\u5176\u4ed6\u9519\u8bef\uff1a#1").replace("#1",W);U.setOptionType(z.OPTION_OK);U.setMessage(W);
V&&U.setDetail(V);U.showDialog()}else O.getOuterMessageCurtain().showPrompt(a.get("notFindExceptionLog","\u672a\u627e\u5230\u5bf9\u5e94\u7684\u4fe1\u606f\u3002"))},function(U,F){return!1});A.setShowBlocking(!1);A.loadExceptionLog(h.EMAIL,C)};this.relayoutViews=function(){if(x){y=[];for(var C=$(".push-detail-name-left"),A=0;A<C.length;A++){var U=C[A];$(U).data("checkBoxModel").isChecked()&&(U=$(U).attr("table-emailSendLog-id"),y.push(U))}L.refresh(x);x.relayoutViews()}}}function J(p,aa,I,ia,O,q){var k=
this,Q,r,S,x,t,y,Y,M,ba,sa,pa,Da=!1,za=!1,Ga,La,C=!1,A,U,F,W,V,ma,qa=!1,ea;this.setFuncReSize=function(P){U=P};this.getFunResize=function(){return U};this.setPublishContext=function(P){A=P};this.getPublishContext=function(){return A};this.setEmailConfigModel=function(P){r=P};this.getEmailConfigModel=function(){r.setNameRule(ba);r.setSchedule(sa);pa&&r.setSenderId(pa.getId());r.setReceivers(y.getText());r.setContent(M.getText());r.setScheduleSwitch(!0);r.setIsAnonymousView(Y.isOn());r.setNoOperValueMap(La.getNoOperValueMap());
r.setWarningRuleName(V);r.setWarningRuleStatus(!0);return r};this.setIsEdit=function(P){za=P};this.createUi=function(){if(!Q){var P=new Z;P.setRequired(!0);P.setText(a.get("emailName","\u90ae\u4ef6\u540d\u79f0"));P=P.getJqUi();P.attr("title",a.get("emailName","\u90ae\u4ef6\u540d\u79f0"));S=new lb;S.addActionListener(mb);var ta=S.getJqUi(),Na=new Z;Na.setRequired(!0);Na.setText(a.get("pushSchedule","\u63a8\u9001\u9891\u7387"));Na=Na.getJqUi();Na.attr("title",a.get("pushSchedule","\u63a8\u9001\u9891\u7387"));
x=new lb;x.addActionListener(vb);var Za=x.getJqUi(),$a=new Z;$a.setRequired(!0);$a.setText(a.get("senderEmail","\u53d1\u4ef6\u90ae\u7bb1"));$a=$a.getJqUi();$a.attr("title",a.get("senderEmail","\u53d1\u4ef6\u90ae\u7bb1"));t=new lb;t.addActionListener(wb);var c=t.getJqUi();if(!nb()){var e=new Z;e.setText(a.get("warningRule","\u9884\u8b66\u89c4\u5219"));e=e.getJqUi();e.attr("title",a.get("warningRule","\u9884\u8b66\u89c4\u5219"));W=new lb;W.addActionListener(xb);W.addClearListener(yb);ea=W.getJqUi();
if(!za){var n=$("<span>");n.addClass("sa-qing-publish-edit-icon");n.attr("title",a.get("warningRuleEdit","\u7f16\u8f91\u9884\u8b66\u89c4\u5219"));Aa.backgroundWithHover(n,"icon-rule-setting");n.on("click",zb)}}var w=new Z;w.setRequired(!0);w.setText(a.get("receiverEmails","\u6536\u4ef6\u90ae\u7bb1"));w=w.getJqUi();w.attr("title",a.get("receiverEmails","\u6536\u4ef6\u90ae\u7bb1"));y=new xa;y.setPlaceholder(a.get("receiverEmailsTips","\u591a\u4e2a\u90ae\u7bb1\u53ef\u7528\u9017\u53f7\u6216\u5206\u53f7\u5206\u9694"));
var l=y.getJqUi();l.attr("title",a.get("receiverEmailsTips","\u591a\u4e2a\u90ae\u7bb1\u53ef\u7528\u9017\u53f7\u6216\u5206\u53f7\u5206\u9694"));var wa=new Z;wa.setText(a.get("emailContent","\u90ae\u4ef6\u6b63\u6587"));wa=wa.getJqUi();M=new Ca;var X=M.getJqUi();(new Z).setText(a.get("anonymousView","\u533f\u540d\u67e5\u770b"));Y=new va;Y.setOn(!1);var E=Ua.LONGER_VIEW;nb()&&(E=Ua.DSB_VIEW);La||(La=Xa.createPublishAdvancePanel(E,A,r),La.setInitSuccessCallBackHandler(ra),La.setRemoteImpl(p),La.setPublishTargetType(h.EMAIL),
La.setTimedPush(!0),La.loadPublishOperModel());Ga=$("<div>");Ga.addClass("sa-qing-publish-advance-set-btn");Ga.text(a.get("advanceSetting","\u9ad8\u7ea7\u8bbe\u7f6e")+" >>");F=$("<div>");E=0;Pa(F,P,18,E,70,23);Pa(F,ta,90,E,335,23);E+=43;Pa(F,$a,18,E,70,23);Pa(F,c,90,E,335,23);E+=43;Pa(F,w,18,E,70,23);Pa(F,l,90,E,335,23);E+=43;Pa(F,Na,18,E,70,23);Pa(F,Za,90,E,335,23);nb()?(E+=43,Pa(F,wa,18,E,70,23),Pa(F,X,90,E,315,215),za||(E+=231),Pa(F,Ga,338,za?E+237:E+17,70,23)):(E+=43,Pa(F,e,18,E,70,23),Pa(F,ea,
90,E,za?335:315,23),za||Pa(F,n,408,E-20,20,16),E+=43,Pa(F,wa,18,E,70,23),Pa(F,X,90,E,315,za?180:165),za||(E+=181),Pa(F,Ga,338,za?E+188:E+22,70,23));r?(ba=r.getNameRule(),sa=r.getSchedule(),S.setModel(r.getNameRule().toString()),x.setModel(r.getSchedule().toString()),y.setText(r.getReceivers()),M.setText(r.getContent()),Y.setOn(r.isAnonymousView()),nb()||(V=r.getWarningRuleName(),rb())):(r=new d,nb()||jb());ob();n=$("<div>");F.appendTo(n);Q=n}return Q};var ra=function(P){P.appendTo(Q);r&&r.getNoOperValueMap()&&
0!=(r.getNoOperValueMap()[cb.LONGER]|r.getNoOperValueMap()[cb.SQUARE_LONGER]|r.getNoOperValueMap()[cb.SQUARE])&&(C=!0,Ka(P,C));Ga.on("click",function(){C=!C;Ka(P,C)})},Ka=function(P,ta){var Na=$(document.body),Za=Na.prop("clientWidth");Na=Na.prop("clientHeight");La.showOrHide(P,ta);ta?(F.css({width:"50%"}),Ga.text(a.get("advanceSetting","\u9ad8\u7ea7\u8bbe\u7f6e")+" <<"),U&&U((Za-928)/2,parseInt((Na-595)/2),928,za?570:595)):(F.css({width:"100%"}),Ga.text(a.get("advanceSetting","\u9ad8\u7ea7\u8bbe\u7f6e")+
" >>"),U&&U((Za-480)/2,parseInt((Na-595)/2),480,za?570:595))},nb=function(){return za?r.getPublishSourceType()==bb.DASHBOARD:A.getCurrentSourceType()==bb.DASHBOARD},wb=function(){Da&&(Qa.setCallback(function(){var P=new Ma(p,pa,ia);P.setConfirmCallback(pb);P.showDialog()}),Qa.loadJs("timedpush/jsencrypt.min-2.1.0.js"))},Pa=function(P,ta,Na,Za,$a,c){ta.css("position","absolute");ta.css("left",Na+"px");ta.css("top",Za+"px");ta.css("width",$a+"px");ta.css("height",c+"px");ta.appendTo(P)},ob=function(){var P=
new f(p,function(ta){if(ta){var Na=new T;Na.fromJsonObject(ta);pb(Na)}Da=!0},function(ta,Na){return!1});P.setShowBlocking(!1);P.getUserEmailSender(h.EMAIL)},pb=function(P){if(P){var ta;P.getName()&&(ta=P.getName());P.getAccount()&&(ta=ta+"("+P.getAccount()+")");t.setModel(ta)}pa=P},mb=function(P){P=new fa(ba);P.setConfirmCallback(sb);P.showDialog()},vb=function(P){P=new ya(sa,p);P.setConfirmCallback(Ab);P.showDialog()},sb=function(P){S.setModel(P.toString());ba=P},Ab=function(P){x.setModel(P.toString());
sa=P},xb=function(P){za?(new com.kingdee.bos.qing.core.ui.WarningRuleSelector).showDialog(ma,V,tb,function(ta){qa=k.checkWarningRuleExist();jb()}):q.getConductor().popupWarningRuleSelector(V,tb,function(ta){qa=k.checkWarningRuleExist();jb()})},tb=function(P){V=P},yb=function(P){V=null;jb()},zb=function(P){za||q.getConductor().popupWarningRuleEditor(function(ta){ta&&(A.getCurrentContentModel().schemaContent=q.getJsonModelBook(),qa=k.checkWarningRuleExist(),jb())})};this.checkWarningRuleExist=function(){return null==
V||null!=q&&q.getConductor().checkWarningRuleExist(V)||null!=ma&&com.kingdee.bos.qing.core.ui.WarningRuleSelector.checkWarningRuleExist(ma,V)?!0:!1};var ub=function(P){var ta=new f(p,function($a){P($a.model)}),Na=r.getId(),Za=r.getPublishSourceType();ta.loadPushSchema(h.EMAIL,Na,Za)},rb=function(){ub(function(P){var ta=com.kingdee.bos.qing.CodeLoader;ta.setCallback(function(){ma=com.kingdee.bos.qing.ModelHelper.fromJson(P);qa=k.checkWarningRuleExist();jb()});ta.setRootPath(".");ta.loadJs("core/qing-scene.js")})},
jb=function(){ea.css("color","#666666");var P=ea.find(".warning-rule-item-notexist");P&&P.remove();P=ea.find(".sa-ctrl-f7selector-text");P.css("margin-left","0px");null==V&&(W.setModel(a.get("warningRuleTips","\u8bf7\u9009\u62e9\u9884\u8b66\u89c4\u5219")),ea.css("color","#b2b2b2"),ea.attr("title",a.get("warningRuleTips","\u8bf7\u9009\u62e9\u9884\u8b66\u89c4\u5219")));null!=V&&qa&&(W.setModel(a.get("selectedWarningRule","\u5df2\u9009\u62e9\u9884\u8b66\u89c4\u5219")+V),ea.attr("title",""));if(null!=
V&&!qa){W.setModel(a.get("TheWarningRuleNotExist","\u9884\u8b66\u89c4\u5219#1\u4e0d\u5b58\u5728").replace("#1",V));ea.attr("title","");var ta=db.createWarning();ta.addClass("warning-rule-item-notexist");ta.attr("title",a.get("warningRuleNotExist","\u9884\u8b66\u89c4\u5219\u4e0d\u5b58\u5728"));ea.append(ta);P.css("margin-left","16px")}V?W.setClearable(!0):W.setClearable(!1)}}function fa(p){b.call(this);var aa=this,I=this.protectedMethod,ia,O,q;(function(){I.setTitle(a.get("emailName","\u90ae\u4ef6\u540d\u79f0"));
aa.setSize(400,320);I.setSelectable(!0);ia=new N;p&&(O=p.copy());ia.setEmailNameRuleModel(O);ia.setMessageCurtain(I.getMessageCurtain());I.setContentPaneCreator(function(){return ia.getJqUi()});I.setClosingChecker(function(k){O=ia.getEmailNameRuleModel();var Q=O.check();Q?(I.getMessageCurtain().showPrompt(Q),k(!1)):(q&&q(O),k(!0))},!0);I.setClosingAction(function(k){})})();this.setConfirmCallback=function(k){q=k}}function ya(p,aa){b.call(this);var I=this,ia=this.protectedMethod,O,q=p,k,Q;(function(){ia.setTitle(a.get("pushSchedule",
"\u63a8\u9001\u65f6\u95f4"));I.setSize(400,320);ia.setSelectable(!0);ia.setContentPaneCreator(function(){O=new com.kingdee.bos.qing.schedule.ScheduleSelector;O.isOnlyPeriod(!0);O.setCronAnalysisFacade(r);var S=O.getJqUi();S.css("left","60px");q&&O.setSchedule(q.copy());return S});ia.setClosingChecker(function(S){var x=O.getSchedule();if("Custom"==x.getPeriod()){var t=x.getCron();x=x.getCronMsg();"undefined"==typeof t||""==t?(k.showPrompt(a.get("cronErrorMessage","\u8bf7\u8f93\u5165\u8868\u8fbe\u5f0f\u3002")),
S(!1)):x&&(k.showPrompt(x),S(!1))}q=O.getSchedule();Q&&Q(q);S(!0)},!0);ia.setClosingAction(function(S){});k=ia.getMessageCurtain()})();var r=function(S,x,t){x=new f(aa,x,t);x.setShowBlocking(!0);x.cronExpression(h.EMAIL,S)};this.setConfirmCallback=function(S){Q=S}}function N(){function p(t,y,Y){this.toString=function(){return t};this.getType=function(){return y};this.getSettingPane=function(){return Y}}var aa,I,ia,O,q,k,Q,r=[new p(a.get("nameFixed","\u56fa\u5b9a\u540d\u79f0"),da.TYPE_FIXED,new function(){var t;
this.getJqUi=function(){t||(t=$("<div>"));return t}}),new p(a.get("nameDate","\u540d\u79f0-\u7cfb\u7edf\u65e5\u671f"),da.TYPE_DATE,new function(){var t;this.getJqUi=function(){if(!t){var Y=t=$("<div>"),M=new Z;M.setText(a.get("dateFormat","\u65e5\u671f\u683c\u5f0f"));M=M.getJqUi();k=new g;var ba=k.getJqUi();y(Y,M,0,0,90,23);y(Y,ba,95,0,220,23);Y=da.getArrDateFormat();k.setItemModels(Y);ia&&k.setSelected(da.searchDateFormatObj(ia.getDateFormat()))}return t};var y=function(Y,M,ba,sa,pa,Da){M.css("position",
"absolute");M.css("left",ba+"px");M.css("top",sa+"px");M.css("width",pa+"px");M.css("height",Da+"px");M.appendTo(Y)}})];this.getJqUi=function(){if(!aa){var t=new Z;t.setText(a.get("rule","\u89c4\u5219"));t=t.getJqUi();q=new g;q.setItemModels(r);q.addSelectedChangedListener(x);var y=q.getJqUi(),Y=new Z;Y.setRequired(!0);Y.setText(a.get("rName","\u540d\u79f0"));Y=Y.getJqUi();O=new xa;var M=O.getJqUi();aa=$("<div>");Q=$("<div>");S(aa,t,18,2,64,23);S(aa,y,115,2,220,23);S(aa,Y,18,45,64,23);S(aa,M,115,
45,220,23);S(aa,Q,18,88,320,190);if(ia){O.setText(ia.getName());a:{t=ia.getType();for(y=0;y<r.length;y++)if(r[y].getType()==t){t=r[y];break a}t=null}q.setSelected(t);t=t.getSettingPane();t=t.getJqUi()}else t=r[0],q.setSelected(t),t=t.getSettingPane(),t=t.getJqUi();t.addClass("sa-qing-publish-rule-pane");t.appendTo(Q)}return aa};this.setEmailNameRuleModel=function(t){ia=t};this.getEmailNameRuleModel=function(){ia||(ia=new da);ia.setName(O.getText());var t=q.getSelected();ia.setType(t.getType());k&&
k.getSelected()&&ia.setDateFormat(k.getSelected().getValue());return ia};this.setMessageCurtain=function(t){I=t};this.getMessageCurtain=function(){return I};var S=function(t,y,Y,M,ba,sa){y.css("position","absolute");y.css("left",Y+"px");y.css("top",M+"px");y.css("width",ba+"px");y.css("height",sa+"px");y.appendTo(t)},x=function(t,y,Y){t=Y.getSettingPane();Q.find(".sa-qing-publish-rule-pane").detach();t=t.getJqUi();t.addClass("sa-qing-publish-rule-pane");t.appendTo(Q)}}function Ma(p,aa,I){b.call(this);
var ia=this,O=this.protectedMethod,q,k;(function(){O.setTitle(a.get("senderEmail","\u53d1\u4ef6\u90ae\u7bb1"));ia.setSize(400,415);O.setSelectable(!0);q=new v(p,aa);O.setContentPaneCreator(function(){return q.getJqUi()});O.setClosingChecker(function(S){var x=q.getEmailSenderModel(),t=new T;t.fromJsonObject(x.toJsonObject());var y=new JSEncrypt;y.setPublicKey(T.PWD_ENCRYPT_PUBLICKEY);y=y.encrypt(t.getPwd());t.setPwd(y);(y=x.doCheck())?(O.getMessageCurtain().showPrompt(y),S(!1)):Q(t,x,S)},!0);O.setClosingAction(function(S){})})();
this.setConfirmCallback=function(S){k=S};var Q=function(S,x,t){var y=new f(p,function(){r(S,x,t)},function(Y,M){O.getMessageCurtain().showPrompt(a.get("connectedFail","\u8fde\u63a5\u90ae\u7bb1\u5931\u8d25\uff1a")+M,3E5);t(!1);return!0});y.setShowBlocking(!0);y.connectTest(h.EMAIL,S)},r=function(S,x,t){var y=new f(p,function(Y){x.getId()||x.setId(Y);I.showSuccess(a.get("saveSuceess","\u4fdd\u5b58\u6210\u529f\u3002"));k&&k(x);t(!0)},function(Y,M){t(!1);return!1});y.setShowBlocking(!1);y.saveEmailSender(h.EMAIL,
S)}}function v(p,aa){var I,ia,O,q,k,Q,r,S;this.getEmailSenderModel=function(){var ba=new T;aa&&ba.setId(aa.getId());ba.setName(ia.getText());ba.setAccount(O.getText());ba.setPwd(q.getPassword());ba.setPort(k.getText());ba.setIsSSL(r.getSelected());ba.setSmtpHost(Q.getText());ba.setSendType(S.getSelected());return ba};this.getJqUi=function(){if(I)return I;I=$("<div>");var ba=new Z;ba.setRequired(!0);ba.setText(a.get("rName","\u540d\u79f0"));ba=ba.getJqUi();ia=new xa;var sa=ia.getJqUi(),pa=new Z;pa.setRequired(!0);
pa.setText(a.get("emailAccount","\u90ae\u7bb1\u5730\u5740"));pa=pa.getJqUi();O=new xa;O.addBlurListener(x);var Da=O.getJqUi(),za=new Z;za.setText(a.get("emailPwd","\u90ae\u7bb1\u5bc6\u7801/\u6388\u6743\u7801"));za=za.getJqUi();q=new Oa;var Ga=q.getJqUi(),La=new Z;La.setRequired(!0);La.setText(a.get("sendType","\u90ae\u4ef6\u53d1\u9001\u65b9\u5f0f"));La=La.getJqUi();S=new g;S.setItemModels([T.SEND_TYPE_SMTP,T.SEND_TYPE_EXCHANGE]);S.setCustomPainter(function(qa,ea,ra){var Ka;ra===T.SEND_TYPE_EXCHANGE?
Ka="Exchange":ra===T.SEND_TYPE_SMTP&&(Ka="SMTP");ea.text(Ka)});S.addSelectedChangedListener(y);var C=S.getJqUi(),A=new Z;A.setRequired(!0);A.setText(a.get("smtpHost","\u90ae\u7bb1\u670d\u52a1\u5668"));A=A.getJqUi();Q=new xa;var U=Q.getJqUi(),F=new Z;F.setRequired(!0);F.setText(a.get("isSSL","\u662f\u5426SSL\u52a0\u5bc6"));F=F.getJqUi();r=new g;r.setItemModels([!0,!1]);r.setCustomPainter(function(qa,ea,ra){qa=1==ra?a.get("yes","\u662f"):0==ra?a.get("no","\u5426"):"";ea.text(qa)});r.addSelectedChangedListener(t);
var W=r.getJqUi(),V=new Z;V.setRequired(!0);V.setText(a.get("port","\u7aef\u53e3"));V=V.getJqUi();k=new xa;var ma=k.getJqUi();Y(I,ba,18,0,110,23);Y(I,sa,130,0,200,23);Y(I,pa,18,45,110,23);Y(I,Da,130,45,200,23);Y(I,za,18,88,110,23);Y(I,Ga,130,88,200,23);Y(I,La,18,131,110,23);Y(I,C,130,131,200,23);Y(I,A,18,174,110,23);Y(I,U,130,174,200,23);Y(I,F,18,217,110,23);Y(I,W,130,217,200,23);Y(I,V,18,260,110,23);Y(I,ma,130,260,200,23);aa&&(ia.setText(aa.getName()),O.setText(aa.getAccount()),q.setPassword(aa.getPwd()),
S.setSelected(aa.getSendType()),Q.setText(aa.getSmtpHost()),r.setSelected(aa.isSSL()),k.setText(aa.getPort()));return I};var x=function(ba){var sa=!1;if(ba.getText())for(var pa=0;pa<T.ARR_COMMON_EMAIL_INFO.length;pa++){var Da=T.ARR_COMMON_EMAIL_INFO[pa];if((new RegExp(Da.getRegExp())).test(ba.getText().toLowerCase())){sa=!0;S.setSelected(Da.getSendType());Q.setText(Da.getSmtpHost());r.setSelected(Da.isSSL());k.setText(Da.getPort());break}}sa||(Q.setText(""),r.setSelected(!1),k.setText(T.DEFAULT_SMTP_PORT))},
t=function(ba,sa,pa){ba=S.getSelected();pa=M(pa,ba);k.setText(pa)},y=function(ba,sa,pa){ba=r.getSelected();pa=M(ba,pa);k.setText(pa)},Y=function(ba,sa,pa,Da,za,Ga){sa.css("position","absolute");sa.css("left",pa+"px");sa.css("top",Da+"px");sa.css("width",za+"px");sa.css("height",Ga+"px");sa.appendTo(ba)},M=function(ba,sa){return ba?sa===T.SEND_TYPE_EXCHANGE?T.DEFAULT_EXCHANGE_SSL_PORT:T.DEFAULT_SMTP_SSL_PORT:sa===T.SEND_TYPE_EXCHANGE?T.DEFAULT_EXCHANGE_PORT:T.DEFAULT_SMTP_PORT}}"undefined"==typeof com&&
(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.timedpush&&(com.kingdee.bos.qing.timedpush={});var K=com.kingdee.bos.qing.timedpush;K.EmailPublishConfigDialog=function(p,aa,I,ia,O,q,k){b.call(this);var Q=this,r=this.protectedMethod,S,x;(function(){r.setTitle(p);Q.setSize(480,595);r.setSelectable(!0);x=new J(aa,ia,O,r.getMessageCurtain(),
q,k);x.setPublishContext(I);x.setFuncReSize(r.getDialogCtrl().setBounds);r.setContentPaneCreator(function(){return x.createUi()});r.setClosingChecker(function(y){t(y)},!0);r.setClosingAction(function(y){})})();this.setOuterMessageCurtain=function(y){S=y};var t=function(y){var Y=x.getEmailConfigModel(),M=Y.check();if(M)return r.getMessageCurtain().showPrompt(M,2E3),y(!1),!1;if(!x.checkWarningRuleExist())return r.getMessageCurtain().showPrompt(a.get("saveWarningRuleTips","\u9884\u8b66\u89c4\u5219\u4e0d\u5b58\u5728\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\u6216\u5220\u9664\u3002")),
y(!1),!1;Y.setTagId(I.getBizTag());Y.setPublishSourceType(I.getCurrentSourceType());M=O;Y.isAnonymousView()&&(M=ia);var ba=new f(aa,function(pa){S&&S.showSuccess(a.get("successToSaveConfigInfo","\u4fdd\u5b58\u914d\u7f6e\u4fe1\u606f\u6210\u529f\u3002"));y(!0);pa=com.kingdee.bos.qing.behavior.BehaviorManager;pa.recordResourceOperation(pa.OperationType.QING_PUSH)},function(pa,Da){Da=!1;2301006==pa?(r.getMessageCurtain().showPrompt(a.get("publishSourcePublishNotExistException","\u539f\u53d1\u5e03\u4fe1\u606f\u4e0d\u5b58\u5728\u6216\u5df2\u88ab\u5220\u9664\u3002"),
2E3),Da=!0):2301007==pa?(r.getMessageCurtain().showPrompt(a.get("publishSourceSubjectNotExist","\u539f\u4e1a\u52a1\u4e3b\u9898\u4e0d\u5b58\u5728\u6216\u5df2\u88ab\u5220\u9664\u3002"),2E3),Da=!0):2301008==pa?(r.getMessageCurtain().showPrompt(a.get("publishSourceDashboardNotExist","\u539f\u4eea\u8868\u677f\u4e0d\u5b58\u5728\u6216\u5df2\u88ab\u5220\u9664\u3002"),2E3),Da=!0):2314104==pa?(r.getMessageCurtain().showPrompt(a.get("sendEmailsSenderException","\u53d1\u4ef6\u90ae\u7bb1\u914d\u7f6e\u6709\u8bef\uff0c\u8bf7\u91cd\u65b0\u914d\u7f6e\u3002"),
2E3),Da=!0):2301005==pa?(r.getMessageCurtain().showError(a.get("sourceIsPublishAndNoPermission","\u539f\u53d1\u5e03\u672a\u6388\u6743\u3002")),Da=!0):2301016==pa&&(r.getMessageCurtain().showPrompt(a.get("publishNoOperAuthException","\u6ca1\u6709\u64cd\u4f5c\u6743\u9650\u3002"),2E3),Da=!0);y(!1);return Da}),sa=I.getCurrentContentModel();ba.saveEmailConfig(h.EMAIL,Y,sa,M,I.getDsbPublishId(),I.getScene())}};K.EmailConfigManagePanel=function(p,aa,I,ia){function O(c){KTDefaultCellRender.call(this,c);var e=
this,n=this.paintCellUI;this.paintCellUI=function(w,l){var wa=e.getCurrentRowIdx(),X=e.getCurrentRow(),E=e.getCurrentColIdx(),ca=X.getUserObject();if(1==wa){n(w,l);var G=$(w).find("span");G.css({"padding-right":"12px","padding-left":"2px"});if(!/Trident|MSIE/.test(window.navigator.userAgent)&&(C&&1!=E&&2!=E&&4!=E&&6!=E&&C.addSortingTips($(w),F[E]),!C&&3==E&&!U)){U=new q;sa=[];for(G=0;G<M.length;G++)sa.push(M[G].toJsonObject());U.setArrJson(sa);U.setFunSortchangeListener(function(Ha,Ra){Ra?C.setShowSortingModel(U.getShowSortingModel()):
(Ra=new k,Ra.setField("PushCreateTime"),Ra.setOrder(k.ORDER_DESC));Ha=[];for(var ab=0;ab<M.length;ab++)Ha.push(M[ab].toJsonObject());U.setArrJson(Ha);U.sortArrJson(Ha,Ra,function(ib){M=[];for(var fb=0;fb<ib.length;fb++){var kb=new d;kb.fromJsonObject(ib[fb]);M.push(kb)}Za()},function(ib){return"fileSize"==ib?"sTotalPushRecordSizeToNoFormat":ib})});U.addPushCreateTimeSortingTips($(w),F[E])}}if(wa<L.getHeadRowCount()||6!=E&&4!=E&&0!=E&&3!=E&&1!=E)n(w,l),G=$(w).find("span"),G.css({"padding-right":"12px",
"padding-left":"5px"});else if(0==E)n(w,l),G=$(w).find("span"),G.css({"padding-right":"8px","padding-left":"6px",left:"8px"}),G.attr("title",X.getCell(0).getValue()),G.addClass("sa-publish-item-list-head"),ca.isSourceNameNotFound()?(l=ca.getSourceName(),X=db.createWarning(),X.attr("title",l),u.layoutCtrl(X,0,8),$(w).append(X)):ca.getWarningRuleStatus()||(l=a.get("warningRuleInvalidTips","\u9884\u8b66\u89c4\u5219\u4e0d\u5b58\u5728"),X=db.createWarning(),X.attr("title",l),u.layoutCtrl(X,0,8),$(w).append(X));
else if(1==E)n(w,l),G=$(w).find("span"),G.css({"padding-right":"8px","padding-left":"6px",left:"8px"}),G.attr("title",X.getCell(1).getValue());else if(3==E)l=ca.getCreateFormatTime(),X=$("<span>"),X.text(l),X.attr("title",l),X.css("line-height","28px"),X.css("padding-left","6px"),X.css("padding-right","8px"),X.appendTo(w);else if(6==E){l=new oa(a.get("scheduleDetails","\u63a8\u9001\u660e\u7ec6"));l.addActionListener(function(){(new D(r,ca.getId(),I,c,wa,5)).showDialog()});l=l.getJqUi();l.addClass("sa-qing-publish-email-manager-op-query");
l.appendTo(w);l.attr("title",a.get("scheduleDetails","\u63a8\u9001\u660e\u7ec6"));l.css({overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"});l=[xb,tb];X=[a.get("editPushInfoItem","\u7f16\u8f91\u63a8\u9001\u4fe1\u606f"),a.get("editPushContentItem","\u7f16\u8f91\u63a8\u9001\u65b9\u6848")];var ja=new Ta($(y.getUI()),X,l);l=new oa(a.get("edit","\u7f16\u8f91"));var la=l.getJqUi();la.addClass("sa-qing-publish-email-manager-op-edit");la.appendTo(w);la.attr("title",a.get("edit","\u7f16\u8f91"));
la.css({overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"});l.addActionListener(function(){ja.show(la,ca);var Ha=x.find(".sa-qing-publish-manager-editcontent-selector"),Ra=la.offset().left-82;Ha.offset({left:Ra})});l=new oa(a.get("del","\u5220\u9664"));l.addActionListener(function(){var Ha=z.createFeedbackDialog();Ha.setOptionType(z.OPTION_OK_CANCEL);Ha.setMsgImageType(z.MSG_DELETE);Ha.setMessage(a.get("emailDelTips","\u5220\u9664\u8be5\u8bb0\u5f55\u540e\u5c06\u540c\u65f6\u6e05\u7a7a\u8be5\u8bb0\u5f55\u4e0b\u751f\u6210\u7684\u6240\u6709\u63a8\u9001\u660e\u7ec6\u6570\u636e\uff0c\u786e\u5b9a\u5220\u9664\u8be5\u8bb0\u5f55\u5417\uff1f"));
Ha.setClosingChecker(function(Ra){Ra==z.RETURN_OK&&P(c,wa,ca);return!0});Ha.showDialog()});l=l.getJqUi();l.addClass("sa-qing-publish-email-manager-op-delete");l.appendTo(w);l.attr("title",a.get("del","\u5220\u9664"));l.css({overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"});l=new oa(a.get("pushImmediately","\u7acb\u5373\u63a8\u9001"));X=ca.isHasPermission()&&ca.getWarningRuleStatus();l.setEnabled(X);l.addActionListener(function(){var Ha=new com.kingdee.bos.qing.publish.common.SchedulePushDialog;
Ha.setConfirmListener(function(){yb(ca)});Ha.showDialog(ca.getNameRule().toString(),a.get("targetEmail","\u76ee\u6807\u90ae\u7bb1"))});l=l.getJqUi();l.addClass("sa-qing-publish-email-manager-op-push");l.appendTo(w);l.attr("title",a.get("pushImmediately","\u7acb\u5373\u63a8\u9001"));l.css({overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"})}else if(4==E){var ua=new va;ua.setOn(ca.getScheduleSwitch()&&ca.getWarningRuleStatus()&&!ca.isSourceNameNotFound());ua.setEnabled(ca.isHasPermission());
var Ia=ua.isOn();ua.addStateChangeListener(function(Ha,Ra,ab){Ra&&(ab=Ha.isOn(),ca.setScheduleSwitch(ab),jb(ua,ab,Ia,ca))});l=ua.getJqUi();l.addClass("sa-qing-publish-email-manager-schedule-switchbutton");l.appendTo(w);X=$("<div>");X.addClass("sa-qing-publish-email-manager-schedule-switchbutton-tips");E=$("<span>");E.css({opacity:"0","z-index":"100"});u.layoutCtrl(E,5,5,100,23);ca.isHasPermission()||(l=a.get("sourceIsPublishNoPermissionOrNotFound","\u539f\u53d1\u5e03\u4e0d\u5b58\u5728\u6216\u672a\u6388\u6743"),
ca.isSourceNameNotFound()&&(l=ca.getSourceName()),E.attr("title",l),E.appendTo(X),X.appendTo(w));ca.isHasPermission()&&!ca.getWarningRuleStatus()&&(ua.setEnabled(!1),l=a.get("warningRuleInvalidTips","\u9884\u8b66\u89c4\u5219\u4e0d\u5b58\u5728"),E.attr("title",l),E.appendTo(X),X.appendTo(w))}}}function q(){var c,e,n,w;this.setShowSortingModel=function(G){e=G};this.getShowSortingModel=function(){return e};this.setFunSortchangeListener=function(G){n=G};this.setArrJson=function(G){w=G};this.showSortingTips=
function(G,ja){var la=G.find(".resourceinfo-detaillist-sort-box");0==la.length&&(la=new k,la.setField(ja),la.setOrder(null),la=ca(G,la),G.append(la));la.addClass("resourceinfo-detaillist-sort-box_clickable")};this.hideSortingTips=function(G){G=G.find(".resourceinfo-detaillist-sort-box");G.removeClass("resourceinfo-detaillist-sort-box_clickable");wa(G)};this.addSortingTips=function(G,ja){e&&null!=e.getOrder()&&e.getField()==ja&&(ja=ca(G,e),G.append(ja))};this.addPushCreateTimeSortingTips=function(G,
ja){var la=new k;la.setField(ja);la.setOrder(k.ORDER_DESC);ja=ca(G,la);G.append(ja)};this.sortArrJson=function(G,ja,la,ua){switch(ja.getOrder()){case k.ORDER_ASC:var Ia=!0;break;case k.ORDER_DESC:Ia=!1;break;default:Ia=!1}ja=ja.getField();ua&&(ja=ua(ja));G=[].concat(G);G.sort(l(ja,Ia));ua=[];for(var Ha=[],Ra=[],ab=[],ib=[],fb=0;fb<G.length;fb++){var kb=G[fb][ja];kb||0===kb?/^\d+?.*$/.test(kb)?(Ha=Ha||[],Ha.push(G[fb])):/^[a-zA-Z]+?.*$/.test(kb)?(Ra=Ra||[],Ra.push(G[fb])):/^[\u4e00-\u9fa5]+?.*$/.test(kb)?
(ab=ab||[],ab.push(G[fb])):(ib=ib||[],ib.push(G[fb])):(ua=ua||[],ua.push(G[fb]))}G=Ia?[].concat(Ha||[]).concat(Ra||[]).concat(ab||[]).concat(ib||[]).concat(ua||[]):[].concat(ua||[]).concat(ib||[]).concat(ab||[]).concat(Ra||[]).concat(Ha||[]);la&&la(G)};var l=function(G,ja){return function(la,ua){if("rName"==G){var Ia=la.nameRule.name;var Ha=ua.nameRule.name}else"PushCreateTime"==G?(Ia=la.createTime,Ha=ua.createTime):"sTotalPushRecordSizeToNoFormat"==G&&(Ia=la.sTotalPushRecordSizeToNoFormat,Ha=ua.sTotalPushRecordSizeToNoFormat);
la=Ia-Ha;isNaN(la)&&(la=String(Ia).localeCompare(String(Ha),"zh-CN",{sensitivity:"accent"}));return ja?la:-la}},wa=function(G){var ja=G.data("sortable-data");ja&&null==ja.getOrder()&&G.remove()},X=function(G,ja){var la=q.BOX_LEN-2,ua=$("<div>");Aa.background(ua,"icon_sortable-v");ua.attr("title",a.get("sort","\u6392\u5e8f"));ua.addClass("resourceinfo-detaillist-sort-box");ua.css("left",G);ua.css("top",ja);ua.css("width",la);ua.css("height",la);return ua},E=function(G){var ja=G.data("sortable-data");
ja.getOrder()==k.ORDER_ASC?Aa.background(G,"icon_sort-asc-esc"):ja.getOrder()==k.ORDER_DESC?Aa.background(G,"icon_sort-asc-desc"):ja.getOrder()||Aa.background(G,"icon_sortable-v")},ca=function(G,ja){var la=G.width();G=G.height();la=X(la-q.BOX_LEN-1,G-q.BOX_LEN-1);la.data("sortable-data",ja);E(la);la.on("click",function(ua){ua=$(ua.currentTarget);var Ia=ua.data("sortable-data");"PushCreateTime"==Ia.getField()?Ia.getOrder()==k.ORDER_ASC?Ia.setOrder(k.ORDER_DESC):Ia.getOrder()==k.ORDER_DESC?Ia.setOrder(k.ORDER_ASC):
Ia.getOrder()||Ia.setOrder(k.ORDER_ASC):Ia.getOrder()==k.ORDER_ASC?Ia.setOrder(k.ORDER_DESC):Ia.getOrder()==k.ORDER_DESC?Ia.setOrder(null):Ia.getOrder()||Ia.setOrder(k.ORDER_ASC);ua.data("sortable-data",Ia);E(ua);wa(ua);c&&c[0]!=ua[0]&&c&&c.remove();c=ua;e=Ia;n&&n(w,c?c.data("sortable-data"):null)});return la}}function k(){var c,e;this.getOrder=function(){return c};this.setOrder=function(n){c=n};this.getField=function(){return e};this.setField=function(n){e=n}}Wa.call(this,p,h.EMAIL);var Q=this.protectedMethod,
r=p,S=this,x,t,y,Y,M=[],ba=[],sa=[],pa,Da,za,Ga=new com.kingdee.bos.qing.biz.common.SimplePaginationBar,La,C,A,U,F="rName source pushSchedule PushCreateTime scheduleOnOff fileSize operation".split(" "),W,V,ma;this.setClickTimedPushManager=function(c){ma=c};this.getTitle=function(){return a.get("Email","\u90ae\u4ef6")};this.getJqUi=function(){if(!x){var c=$("<div>");c.addClass("sa-qing-publish-manager");ma&&c.css("top","3px");var e=new Fa;e.setSearchListener(Za);pa=e;Da=pa.getJqUi();u.layoutCtrl(Da,
-15,-3,171,25);V=S.getAutoSelectedData();La=ea();La.css("margin-top","36px");La.css("border-top","1px solid #ccc");t=$("<div>");t.addClass("sa-qing-publish-manager-content-emptytip");t.text(a.get("loading","\u52a0\u8f7d\u4e2d"));t.appendTo(c);qa();x=c}return x};this.relayoutViews=function(){y&&"none"==t.css("display")&&(L.refresh(y),y.relayoutViews());if(W&&W.hasSelected()){var c=W.getSelected();W.removeAllSelecteds();c&&W.addSelected(c)}c=x.find(".sa-publish-item-list-head");for(var e in ba)$a(c[e],
ba[e].getNameRule().toString(),za)};var qa=function(){setTimeout(function(){var c=new f(r,function(e){if(null==e||0==e.length)sb();else{pb(e);Ga.resetPaginationAndJumpToFirstPage(M.length);for(var n="0KB",w=0;w<e.length;w++){var l=new d;l.fromJsonObject(e[w]);l=l.getTotalPushRecordSize();n=ta(n,l,!0)}e=new ha;e.setMarkClassName("email-push-manage-fileSize");n=parseFloat(n.match(/^\d+(?:\.\d{0,4})?/)).toFixed(2)+n.substring(n.length-2,n.length);e.setTotalFileSize("0.00KB"==n?"0KB":n);e.setPushDetailSettingDisplayPrev(nb);
e.paintPushDetailSetting().appendTo(x);Da.appendTo(x);La.appendTo(x);Y=vb();Y.appendTo(x);t.hide();ba=M.slice(0,20);mb(ba)}},ob);c.setShowBlocking(!0);c.loadEmailConfigs(h.EMAIL)},0)},ea=function(){Ga.setJumpToPageListener(function(c,e,n){var w=M.length;0<w&&w<=c*e&&(ba=M.slice((c-1)*e,w));0<w&&w>c*e&&(ba=M.slice((c-1)*e,c*e));n?n(w):Ga.refreshPagination();mb(ba)});Ga.setComboBoxItemModelsAndSelectedItem([5,10,20,50,100,500,1E3],2);return Ga.getJqUi()},ra=function(c){Ga.resetPaginationAndJumpToFirstPage(c.length);
ba=c.slice(0,Ga.getPageSize());Ga.setJumpToPageListener(function(e,n,w){var l=c.length;0<l&&l<=e*n&&(ba=c.slice((e-1)*n,l));0<l&&l>e*n&&(ba=c.slice((e-1)*n,e*n));w?w(l):Ga.refreshPagination();mb(ba)})},Ka=function(c){var e="0KB";for(var n=0;n<c.length;n++){var w=c[n];w=w.getTotalPushRecordSize();e=ta(e,w,!0)}e=parseFloat(e.match(/^\d+(?:\.\d{0,4})?/)).toFixed(2)+e.substring(e.length-2,e.length);e="0.00KB"==e?"0KB":e;$(".email-push-manage-fileSize").text(e)},nb=function(){var c=new f(r,function(e){if(e){var n=
new Ea;n.fromJsonObject(e)}e=new Ba;e.setPushRecordConfig(n);e.setContentPane(x);e.setPushDetailSettingAfter(wb);e.showDialog()},ob);c.setShowBlocking(!1);c.loadPushRecordConfigInfo(h.EMAIL)},wb=function(c,e){var n=new f(r,function(w){w&&Pa(!0)},function(){Q.getOuterMessageCurtain().showError(a.get("emailPushStorageSetError","\u90ae\u4ef6\u7684\u63a8\u9001\u660e\u7ec6\u8bbe\u7f6e\u5931\u8d25\u3002"));return!1});n.setBlockingPrompt(a.get("savePushDetailConfigInfo","\u6b63\u5728\u4fdd\u5b58\u63a8\u9001\u660e\u7ec6\u8bbe\u7f6e"));
n.saveEmailPushRecordConfig(h.EMAIL,c,e)},Pa=function(c){var e=new f(r,function(n){null==n||0==n.length?sb():(pb(n),Za());c&&Q.getOuterMessageCurtain().showSuccess(a.get("pushDetailSetSuccess","\u63a8\u9001\u660e\u7ec6\u8bbe\u7f6e\u4fdd\u5b58\u6210\u529f\u3002"))},ob);e.setShowBlocking(!1);e.loadEmailConfigs(h.EMAIL)},ob=function(){t.hide();return!1},pb=function(c){M=[];for(var e=0;e<c.length;e++){var n=new d;n.fromJsonObject(c[e]);M.push(n)}},mb=function(c){L.clearWithoutHead(y);W.removeAllSelecteds();
var e=!1;if(c)for(var n=0;n<c.length;n++){var w=c[n],l=w.getSourceName();w.getPublishSourceGroupName()&&(l=w.getPublishSourceGroupName()+"/"+l);var wa=L.createRow(y,!1),X=new KTBorderStyle;X.setBottomBorderWidth(1);X.setBottomBorderPen("solid");X.setBottomBorderColor("#E5E5E5");wa.setBorder(X);wa.setUserObject(w);wa.setHeight(30);wa.getCell(0).setValue(w.getNameRule().toString());wa.getCell(1).setValue(l);wa.getCell(2).setValue(w.getSchedule().toString());wa.getCell(5).setValue(w.getTotalPushRecordSize());
if(V&&w.getId()==V.id){e=!0;var E=n}}L.refresh(y);e&&(E+=L.getHeadRowCount(),e=W.createRowTarget(E),W.addSelected(e),y.scrollCellVisible(E,0,!1));E=x.find(".sa-publish-item-list-head");for(n in c)$a(E[n],c[n].getNameRule().toString(),za)},vb=function(){y=L.createTable();L.setupSingleRowSelection(y);W=y.getSelectionModel();y.setDraggableAdjusting(!0,2,0,new Sa);y.setColumnFitVisibleWidth(!0);var c=new O(y);c.setOutsideVisible(!1);y.setCellRender(c);y.setSyncUIWhenModelChanged(!0);y.addColumns(7);y.getColumn(0).setWidth(130);
y.getColumn(1).setWidth(155);y.getColumn(2).setWidth(65);y.getColumn(3).setWidth(138);y.getColumn(4).setWidth(63);y.getColumn(5).setWidth(80);y.getColumn(6).setWidth(212);c=L.createHeadRow(y);c.getCell(0).setValue(a.get("rName","\u540d\u79f0"));c.getCell(1).setValue(a.get("source","\u6765\u6e90"));c.getCell(2).setValue(a.get("pushSchedule","\u63a8\u9001\u9891\u7387"));c.getCell(3).setValue(a.get("PushCreateTime","\u521b\u5efa\u65f6\u95f4"));c.getCell(4).setValue(a.get("scheduleOnOff","\u542f\u7528\u72b6\u6001"));
c.getCell(6).setValue(a.get("operate","\u64cd\u4f5c"));c.getCell(5).setValue(a.get("fileSize","\u6587\u4ef6\u5927\u5c0f"));/Trident|MSIE/.test(window.navigator.userAgent)||y.setCellAcrossListener(function(e,n,w){x&&x.find(".resourceinfo-detaillist-table-op").remove();var l=e&&0<e.length?e[0]:null;if(A!=l&&(A&&(C.hideSortingTips($(A)),A=null),1==n&&1!=w&&2!=w&&4!=w&&6!=w)){if(!C){C=new q;sa=[];for(n=0;n<M.length;n++)sa.push(M[n].toJsonObject());C.setArrJson(sa);C.setFunSortchangeListener(function(wa,
X){X||(X=new k,X.setField("PushCreateTime"),X.setOrder(k.ORDER_DESC));wa=[];for(var E=0;E<M.length;E++)wa.push(M[E].toJsonObject());C.setArrJson(wa);C.sortArrJson(wa,X,function(ca){M=[];for(var G=0;G<ca.length;G++){var ja=new d;ja.fromJsonObject(ca[G]);M.push(ja)}Za()},function(ca){return"fileSize"==ca?"sTotalPushRecordSizeToNoFormat":ca})})}C.showSortingTips(e,F[w]);A=l}});c=$(y.getUI());c.addClass("sa-qing-publish-manager-content-table");c.css("margin-top","67px");c.children("div:first-child").css("overflow-y",
"overlay");return c},sb=function(){x.empty();t.detach();t=$("<div>");var c=$("<div>");c.addClass("no-data-image");Aa.background(c,"no-data");c.appendTo(t);c=$("<div>");c.addClass("no-push-config-data");c.text(a.get("noData","\u6682\u65e0\u76f8\u5173\u6570\u636e"));c.appendTo(t);t.appendTo(x);t.show()},Ab=function(){t.detach();t=$("<div>");var c=$("<div>");c.addClass("no-data-image");Aa.background(c,"no-data");c.appendTo(t);c=$("<div>");c.addClass("no-search-push-config-data");c.text(a.get("noSearchData",
"\u6ca1\u6709\u7b26\u5408\u641c\u7d22\u6761\u4ef6\u7684\u7ed3\u679c"));c.appendTo(t);t.appendTo(x);t.show()},xb=function(c){c=new H(r,c,aa,I);c.setOuterMessageCurtain(Q.getOuterMessageCurtain());c.setSuccessCallBack(function(e){Pa()});c.showDialog()},tb=function(c){ia(c)},yb=function(c){var e=new f(r,function(n){var w="ExtractData"+n,l=new gb;zb(l,w);var wa=I;c.isAnonymousView()&&(wa=aa);var X=c.getId(),E=new f(r,function(ca){ub(l,w);l.destroy();Pa();Q.getOuterMessageCurtain().showSuccess(a.get("pushImmediatelySuccess",
"\u63a8\u9001\u6210\u529f\u3002"))},function(ca,G,ja){ub(l,w);l.destroy();var la=new z;if(-1==ca)return!0;G=2314104==ca?a.get("sendEmailsSenderException","\u53d1\u4ef6\u90ae\u7bb1\u914d\u7f6e\u6709\u8bef\uff0c\u8bf7\u91cd\u65b0\u914d\u7f6e"):2314105==ca?a.get("sendEmailsInvalidReceiversException","\u90e8\u5206\u6536\u4ef6\u90ae\u7bb1\u63a8\u9001\u5931\u8d25\uff0c\u8bf7\u4ed4\u7ec6\u6838\u5b9e\u6536\u4ef6\u90ae\u7bb1\uff0c\u63a8\u9001\u5931\u8d25\u7684\u6536\u4ef6\u90ae\u7bb1\u6709\uff1a#1\u3002").replace("#1",
G):2101001==ca?a.get("publishSourceSubjectNotExist","\u539f\u4e1a\u52a1\u4e3b\u9898\u4e0d\u5b58\u5728\u6216\u5df2\u88ab\u5220\u9664"):2106001==ca?a.get("publishSourceDashboardNotExist","\u539f\u4eea\u8868\u677f\u4e0d\u5b58\u5728\u6216\u5df2\u88ab\u5220\u9664"):2101010==ca||2301010==ca?a.get("themeFileSizeLimit","\u8f7b\u5b58\u50a8\u7a7a\u95f4\u4e0d\u8db3"):2100001==ca?a.get("qingStorageNoSpace","\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3\uff0c\u8bf7\u8054\u7cfb\u8fd0\u7ef4\u4eba\u5458\u6dfb\u52a0\u78c1\u76d8"):
21000008==ca?a.get("noQingModelerLicense","\u5f53\u524d\u7cfb\u7edf\u6ca1\u6709\u3010\u8f7b\u5efa\u6a21\u3011\u6a21\u5757\u7684\u4f7f\u7528\u8bb8\u53ef\uff0c\u8bf7\u4e0e\u7cfb\u7edf\u7ba1\u7406\u5458\u8054\u7cfb"):2101019==ca?a.get("noModelerPermission","\u5c1a\u672a\u83b7\u5f97\u6570\u636e\u8868\u6a21\u578b\u7684\u6570\u636e\u6743\u9650\u3002"):2101006==ca?a.get(ca.toString(),"\u5c1a\u672a\u83b7\u5f97\u5b9e\u4f53\u6570\u636e\u8868\u7684\u67e5\u770b\u6743\u9650"):"2101018"==ca?a.get("pushError","\u63a8\u9001\u5931\u8d25")+
"\uff0c"+a.get("entityNotSupportQingAnalysis","\u4e1a\u52a1\u5b9e\u4f53\u672a\u5f00\u542f\u201c\u652f\u6301\u8f7b\u5206\u6790\u201d\u8bbe\u7f6e\u9879\uff0c\u8bf7\u5728\u5f00\u53d1\u5e73\u53f0\u7684\u5bf9\u5e94\u8868\u5355\u4e2d\u8fdb\u884c\u8bbe\u7f6e   "):a.get("sendEmailsOtherException","\u5176\u4ed6\u9519\u8bef\uff1a#1").replace("#1",G);la.setOptionType(z.OPTION_OK);la.setMessage(G);ja&&la.setDetail(ja);la.showDialog();return!0});E.setCancelable(!0);E.setShowBlocking(!1);n=E.doPush(X,wa,n);l.setClosedListener(n);
l.showDialog()},function(n,w){return!1});e.setShowBlocking(!1);e.getServerTimeStampForDoPush()},zb=function(c,e){hb.subscribeChannel(e,function(n){rb(c,n)})},ub=function(c,e){hb.unsubscribeChannel(e,function(n){rb(c,n)})},rb=function(c,e){if("pushing"==e)c.setText(a.get("pushing","\u63a8\u9001\u4e2d"));else if("connectEmail"==e)c.setText(a.get("connectEmail","\u6b63\u5728\u8fde\u63a5\u90ae\u7bb1"));else{var n=com.kingdee.bos.qing.CodeLoader;n.setRootPath(".");n.setCallback(function(){var w=JSON.parse(e),
l=new com.kingdee.bos.qing.prepare.model.ProgressModel;l.fromJsonObject(w);l.isFinshed()||c.setText(l.toText())});n.loadJs("prepare/publish-prepare.js");n.loadI18n("prepare","prepare")}},jb=function(c,e,n,w){var l=I;w.isAnonymousView()&&(l=aa);var wa=w.getId();(new f(r,function(X){},function(X,E){w.setScheduleSwitch(n);c.setOn(n);return 2314106==X?(Q.getOuterMessageCurtain().showError(a.get("failToChangScheduleState","\u4fee\u6539\u72b6\u6001\u5931\u8d25\u3002")),!0):2301005==X?(Q.getOuterMessageCurtain().showError(a.get("sourceIsPublishAndNoPermission",
"\u539f\u53d1\u5e03\u672a\u6388\u6743\u3002")),!0):2301006==X?(Q.getOuterMessageCurtain().showError(a.get("publishSourcePublishNotExistException","\u539f\u53d1\u5e03\u4fe1\u606f\u4e0d\u5b58\u5728\u6216\u5df2\u88ab\u5220\u9664\u3002")),!0):!1})).updateScheduleState(h.EMAIL,e,wa,l)},P=function(c,e,n){var w=new f(p,function(){for(var l="0KB",wa=c.getRow(e).getUserObject(),X=0;X<M.length;X++){var E=M[X];wa.getId()==E.getId()?M[X].setTotalPushRecordSize("0KB"):(E=E.getTotalPushRecordSize(),l=ta(l,E,!0))}l=
parseFloat(l.match(/^\d+(?:\.\d{0,4})?/)).toFixed(2)+l.substring(l.length-2,l.length);l="0.00KB"==l?"0KB":l;$(".email-push-manage-fileSize").text(l);Pa();Q.getOuterMessageCurtain().showSuccess(a.get("deleteSuccess","\u5220\u9664\u6210\u529f\u3002"))},function(l,wa){return!1});w.setShowBlocking(!0);w.deleteEmailConfigById(h.EMAIL,n.getId())},ta=function(c,e,n){c=Na(c);e=Na(e);c=n?eb.add(e,c):eb.sub(e,c);c=1024>c?0==c?c+"KB":c.toFixed(2)+"KB":eb.div(c,1024)+"MB";return c},Na=function(c){var e=c.substring(0,
c.length-2);return e="MB"==c.substring(c.length-2,c.length)?eb.mul(e,1024):e},Za=function(){za=pa.getInputContent().trim();var c=[];if(C&&C.getShowSortingModel()){sa=[];for(var e=0;e<M.length;e++)sa.push(M[e].toJsonObject());C.setArrJson(sa);C.sortArrJson(sa,C.getShowSortingModel(),function(n){M=[];for(var w=0;w<n.length;w++){var l=new d;l.fromJsonObject(n[w]);M.push(l)}},function(n){return"fileSize"==n?"sTotalPushRecordSizeToNoFormat":n})}if(0<za.length){za=za.toUpperCase();for(e in M)-1<M[e].getNameRule().toString().toUpperCase().indexOf(za)&&
c.push(M[e]);0<c.length?(t.hide(),La.show(),Y.show(),Ka(c),ra(c),mb(ba)):(Ga.resetPaginationAndJumpToFirstPage(0),La.hide(),Ab(),Y.hide(),Ga.setJumpToPageListener(function(n,w,l){l?l(0):Ga.refreshPagination()}),$(".email-push-manage-fileSize").text("0KB"))}else t.hide(),La.show(),Y.show(),Ka(M),ra(M),mb(ba)},$a=function(c,e,n){if(c&&e&&n){n=n.toUpperCase();var w=e.toUpperCase(),l=w.split(n),wa=n.length,X=$("<span>");X.addClass("sa-publish-item-list-head-name");for(var E in l){var ca=w.indexOf(l[E]),
G=e.substr(0,l[E].length);ca+=l[E].length;var ja=w.length-ca;w=w.substr(ca,ja);e=e.substr(ca,ja);ca=$("<span>");ca.text(G);ca.appendTo(X);if(E!==l.length-1&&1<l.length){ja=w.indexOf(n);G=e.substr(ja,wa);ja+=wa;var la=w.length-ja;w=w.substr(ja,la);e=e.substr(ja,la);ja=$("<span>");ja.text(G);ja.css("color","#FF0000");ja.appendTo(ca)}$(c).children(".sa-publish-item-list-head-name").remove()}$(c).text("");X.appendTo($(c));$(c).attr("title",X.text())}};q.BOX_LEN=15;k.ORDER_DESC="DESC";k.ORDER_ASC="ASC"};
K.EmailPublishFacade=f;var h,ka,T,da,d,Ea,Aa,B,Wa,Sa,Ta,L,u,a,m,na,Z,xa,Oa,g,b,z,oa,va,Ca,ha,Ja,Ba,Fa,Xa,Ua,bb,Ya,cb,Va,db,Qa,gb,hb,qb,lb;(function(){var p=com.kingdee.bos.qing.common.ui;L=p.TableUtil;db=p.CommonIconUtil;p=com.kingdee.bos.qing.framework.common;a=p.MultilanguageManager.createPackageAccessor(K);m=p.TabbedUiUtil;na=p.AbstractFacade;hb=p.RemoteFramework;qb=p.OfficialArticleUtil;p=com.kingdee.bos.qing.common;u=p.DomUtil;Va=p.Util;p=com.kingdee.bos.qing.publish.common;Sa=p.MyCustomExpendor;
Wa=p.AbstractPublishManagerPanel;Ta=p.MultiOperationContainer;B=p.UserOperationReporter;gb=p.SchedulePushingDialog;Xa=p.PublishAdvancePanelFactory;Ua=p.PublishAdvanceViewType;Ya=p.PublishFactory;p=com.kingdee.bos.qing.timedpush.common;Aa=p.MyIcons;ha=p.PushRecordDetailSetting;Ba=p.PushDetailSettingDialog;Fa=p.PubshSearchPanel;p=com.kingdee.bos.qing.publish.model;h=p.PublishTargetType;bb=p.PublishSourceType;cb=p.OperType;p=com.kingdee.bos.qing.timedpush.model;ka=p.EmailSendLog;T=p.EmailSender;da=p.EmailNameRule;
d=p.EmailConfig;Ea=p.EmailPushRecordConfig;p=com.kingdee.bos.qing.ui.component;Z=p.Label;xa=p.TextField;Oa=p.PasswordField;g=p.ComboBox;b=p.AbstractModalDialog;z=p.MessageDialog;va=p.SwitchButton;oa=p.WorkButton;Ca=p.TextArea;Ja=p.CheckBox;lb=p.F7Selector;p=com.kingdee.bos.qing;Qa=p.CodeLoader})();Qa.setRootPath(".");Qa.loadJs("biz-common/qing-biz-common.js");Qa.loadSkinCss("biz-common","biz-common");Qa.loadSkinJs("biz-common","skin");Qa.loadI18n("biz-common","biz-common");Ya.addPublishFacade(h.EMAIL,
f);var eb=new function(){this.add=function(p,aa){sArr=p.toString().split(".");var I=1<sArr.length?sArr[1].length:0;sArr=aa.toString().split(".");I=Math.pow(10,Math.max(I,1<sArr.length?sArr[1].length:0));return(this.mul(p,I)+this.mul(aa,I))/I};this.sub=function(p,aa){sArr=p.toString().split(".");var I=1<sArr.length?sArr[1].length:0;sArr=aa.toString().split(".");I=Math.pow(10,Math.max(I,1<sArr.length?sArr[1].length:0));return(this.mul(p,I)-this.mul(aa,I))/I};this.mul=function(p,aa){var I=0;p=p.toString();
aa=aa.toString();sArr=p.split(".");1<sArr.length&&(I+=sArr[1].length);sArr=aa.split(".");1<sArr.length&&(I+=sArr[1].length);return Number(p.replace(".",""))*Number(aa.replace(".",""))/Math.pow(10,I)};this.div=function(p,aa){var I=0,ia=0;sArr=p.toString().split(".");1<sArr.length&&(I=sArr[1].length);sArr=aa.toString().split(".");1<sArr.length&&(ia=sArr[1].length);p=Number(p.toString().replace(".",""));aa=Number(aa.toString().replace(".",""));return this.mul(p/aa,Math.pow(10,ia-I))}}})();(function(){function f(){var J,fa,ya,N,Ma,v,K,h,ka,T,da,d="NORMAL",Ea,Aa,B,Wa,Sa,Ta,L,u,a,m,na,Z,xa,Oa=!0;this.setFileSize=function(g){Z=g};this.getFileSize=function(){return Z};this.setApeLeft=function(g){u=g};this.getApeLeft=function(){return u};this.setApeTop=function(g){a=g};this.getApeTop=function(){return a};this.setScoLeft=function(g){Ta=g};this.getScoLeft=function(){return Ta};this.setScoTop=function(g){L=g};this.getScoTop=function(){return L};this.setApeWidth=function(g){Wa=g};this.getApeWidth=
function(){return Wa};this.setApeHeight=function(g){Sa=g};this.getApeHeight=function(){return Sa};this.setId=function(g){J=g};this.getId=function(){return J};this.setName=function(g){fa=g};this.getName=function(){return fa};this.setNameRule=function(g){ya=g};this.getNameRule=function(){return ya};this.setDescText=function(g){N=g};this.getDescText=function(){return N};this.setTagId=function(g){Ma=g};this.getTagId=function(){return Ma};this.setSourceType=function(g){v=g};this.getSourceType=function(){return v};
this.setSchedule=function(g){K=g};this.getSchedule=function(){return K};this.setOpenSchedule=function(g){h=g};this.getOpenSchedule=function(){return h};this.setThumbnailPath=function(g){ka=g};this.getThumbnailPath=function(){return ka};this.getSourceName=function(){return T};this.setSourceName=function(g){T=g};this.getSourceGroupName=function(){return da};this.setSourceGroupName=function(g){da=g};this.getLayoutType=function(g){return d};this.setLayoutType=function(g){d=g};this.getPushTargetType=function(){return Ea};
this.setPushTargetType=function(g){Ea=g};this.getCreateTime=function(){return Aa};this.setCreateTime=function(g){Aa=g};this.getCreateFormatTime=function(){return B};this.setCreateFormatTime=function(g){B=g};this.isHasPermission=function(){return m};this.setHasPermission=function(g){m=g};this.getSchemaType=function(){return na};this.setSchemaType=function(g){na=g};this.getWarningRuleName=function(){return xa};this.setWarningRuleName=function(g){xa=g};this.getWarningRuleStatus=function(){return Oa};
this.setWarningRuleStatus=function(g){Oa=g};this.toJsonObject=function(){var g={};g.id=J;g.name=fa;g.nameRule=ya;g.schedule=K.toJsonObject();g.descText=N;g.tagId=Ma;g.sourceType=v;g.openSchedule=h;g.thumbnailPath=ka;g.sourceName=T;g.sourceGroupName=da;g.layoutType=d;g.pushTargetType=Ea;g.createTime=Aa;g.apeWidth=Wa;g.apeHeight=Sa;g.scoLeft=Ta;g.scoTop=L;g.apeLeft=u;g.apeTop=a;g.schemaType=na;g.isHasPermission=m;g.fileSize=Z;var b;if(b=Z){var z=b.substring(0,b.length-2),oa="";b=oa=b.includes("MB")?
oa+1048576*z:oa+1024*z}else b=void 0;g.sFileSizeNoFormat=b;g.warningRuleName=xa;g.warningRuleStatus=Oa;return g};this.fromJsonObject=function(g){J=g.id;fa=g.name;ya=g.nameRule;g.schedule&&(K=new R,K.fromJsonObject(g.schedule));N=g.descText;Ma=g.tagId;v=g.sourceType;h=g.openSchedule;T=g.sourceName;da=g.sourceGroupName;d=g.layoutType;Ea=g.pushTargetType;Aa=g.createTime;B=g.createFormatTime;m=g.isHasPermission;na=g.schemaType;ka=g.thumbnailPath;Z=g.fileSize;xa=g.warningRuleName;Oa=g.warningRuleStatus}}
function H(){f.call(this);var J,fa,ya;this.getPushTargetCategory=function(){return f.MISSION_CLOUD_PUSH};this.setPushToTarget=function(v){J=v};this.getPushToTarget=function(){return J};this.setUserIds=function(v){fa=v};this.getUserIds=function(){return fa};this.setGroupIds=function(v){ya=v};this.getGroupIds=function(){return ya};var N=this.toJsonObject;this.toJsonObject=function(){var v={};v.lappSchedulePushConfigModel=N();v.pushToTarget=J;v.userIds=fa;v.groupIds=ya;return v};var Ma=this.fromJsonObject;
this.fromJsonObject=function(v){v&&(Ma(v.lappSchedulePushConfigModel),J=v.pushToTarget,fa=v.userIds,ya=v.groupIds)}}"undefined"==typeof com&&(com={});"undefined"==typeof com.kingdee&&(com.kingdee={});"undefined"==typeof com.kingdee.bos&&(com.kingdee.bos={});"undefined"==typeof com.kingdee.bos.qing&&(com.kingdee.bos.qing={});"undefined"==typeof com.kingdee.bos.qing.timedpush&&(com.kingdee.bos.qing.timedpush={});"undefined"==typeof com.kingdee.bos.qing.timedpush.model&&(com.kingdee.bos.qing.timedpush.model=
{});var D=com.kingdee.bos.qing.timedpush.model,R=com.kingdee.bos.qing.schedule.QingSchedule;D.LappSchedulePushConfigModel=f;D.ChatRobotSchedulePushConfigModel=function(){f.call(this);var J;this.getPushTargetCategory=function(){return f.CHAT_ROBOT_PUSH};this.setWebhook=function(N){J=N};this.getWebhook=function(){return J};var fa=this.toJsonObject;this.toJsonObject=function(){var N={};N.lappSchedulePushConfigModel=fa();N.webhook=J;return N};var ya=this.fromJsonObject;this.fromJsonObject=function(N){N&&
(ya(N.lappSchedulePushConfigModel),J=N.webhook)}};D.MissionCloudPushConfigModel=H;D.PushRecordModel=function(){var J,fa,ya,N,Ma,v,K,h,ka,T,da;this.setFileSize=function(d){h=d};this.getFileSize=function(){return h};this.setId=function(d){J=d};this.getId=function(){return J};this.setName=function(d){fa=d};this.getName=function(){return fa};this.setPushTime=function(d){ya=d};this.getPushTime=function(){return ya};this.setPushFormatTime=function(d){N=d};this.getPushFormatTime=function(){return N};this.setAnalysisId=
function(d){Ma=d};this.getAnalysisId=function(){return Ma};this.setConfigId=function(d){v=d};this.getConfigId=function(){return v};this.setPublishId=function(d){K=d};this.getPublishId=function(){return K};this.setErrorCode=function(d){ka=d};this.getErrorCode=function(){return ka};this.setErrorMessage=function(d){T=d};this.getErrorMessage=function(){return T};this.setErrorStack=function(d){da=d};this.getErrorStack=function(){return da};this.toJsonObject=function(){var d={};d.id=J;d.name=fa;d.pushTime=
ya;d.analysisId=Ma;d.configId=v;d.publishId=K;d.fileSize=h;return d};this.fromJsonObject=function(d){J=d.id;fa=d.name;ya=d.pushTime;N=d.pushFormatTime;Ma=d.analysisId;v=d.configId;K=d.publishId;ka=d.errorCode;T=d.errorMessage;da=d.errorStack;h=d.fileSize};this.fromErrorInfoJsonObject=function(d){ka=d.errorCode;T=d.errorMessage;da=d.errorStackTrace}};D.LappPushRecordConfig=function(){var J=this,fa,ya,N,Ma,v;this.setId=function(K){fa=K};this.getId=function(){return fa};this.setUserId=function(K){ya=
K};this.getUserId=function(){return ya};this.setPushTargetType=function(K){N=K};this.getPushTargetType=function(){return N};this.setStrategy=function(K){Ma=K};this.getStrategy=function(){return Ma};this.setValue=function(K){v=K};this.getValue=function(){return v};this.toJsonObject=function(){var K={};K.id=fa;K.userId=ya;K.pushTargetType=N;K.strategy=Ma;K.value=v;return K};this.fromJsonObject=function(K){K&&(J.setId(K.id),J.setUserId(K.userId),J.setPushTargetType(K.pushTargetType),J.setStrategy(K.strategy),
J.setValue(K.value))}};f.CHAT_ROBOT_PUSH="CHAT_ROBOT_PUSH";f.MISSION_CLOUD_PUSH="MISSION_CLOUD_PUSH";H.PUSH_TO_USER=0;H.PUSH_TO_GROUP=1})();
//qingVersionTag: 20250324